var requirejs,irequire,define;if(!function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;unction isFunction(e){return"[object Function]"===ostring.call(e)}nction eachReverse(e,t){var n;if(e)for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));--n);}tion bind(e,t){return function(){return t.apply(e,arguments)}}oid 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===irequire||isFunction(irequire)||(cfg=irequire,irequire=void 0),req=requirejs=function(e,t,n,i){var r,a=defContextName;return isArray(e)||"string"==typeof e||(r=e,isArray(t)?(e=t,t=n,n=i):e=[]),r&&r.context&&(a=r.context),(i=getOwn(contexts,a))||(i=contexts[a]=req.s.newContext(a)),r&&i.configure(r),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){e()},irequire=irequire||req,req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],,isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=req.load=isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),,define=define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(l){var t,e,p,c,n,y={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},d={},u={},i={},h=[],f={},r={},m={},v=1,g=1;function b(e,t,n){var i,r,a,o,s,l,c,d,u,p=t&&t.split("/"),h=y.map,f=h&&h["*"];if(e){t=(e=e.split("/")).length-1,y.nodeIdCompat&&jsSuffixRegExp.test(e[t])&&(e[t]=e[t].replace(jsSuffixRegExp,""));for(var m=e="."===e[0].charAt(0)&&p?p.slice(0,p.length-1).concat(e):e,v,g=0;g<m.length;g++)if("."===(v=m[g]))m.splice(g,1),--g;else if(".."===v){if(0===g||1===g&&".."===m[2]||".."===m[g-1])continue;0<g&&(m.splice(g-1,2),g-=2)}e=e.join("/")}if(n&&h&&(p||f)){e:for(a=(r=e.split("/")).length;0<a;--a){if(s=r.slice(0,a).join("/"),p)for(o=p.length;0<o;--o)if((i=getOwn(h,p.slice(0,o).join("/")))&&(i=getOwn(i,s))){l=i,c=a;break e}!d&&f&&getOwn(f,s)&&(d=getOwn(f,s),u=a)}!l&&d&&(l=d,c=u),l&&(r.splice(0,c,l),e=r.join("/"))}return getOwn(y.pkgs,e)||e}ction x(e,t,n,i){var r,a,o,s=null,l=t?t.name:null,c=e,d=!0,u="";return e||(d=!1,e="_@r"+(v+=1)),s=(o=k(e))[0],e=o[1],s&&(s=b(s,l,i),a=getOwn(f,s)),e&&(s?u=n?e:a&&a.normalize?a.normalize(e,function(e){return b(e,l,i)}):-1===e.indexOf("!")?b(e,l,i):e:(s=(o=k(u=b(e,l,i)))[0],u=o[1],n=!0,r=p.nameToUrl(u))),{prefix:s,name:u,parentMap:t,unnormalized:!!(e=!s||a||n?"":"_unnormalized"+(g+=1)),url:r,originalName:c,isDefine:d,id:(s?s+"!"+u:u)+e}}tion A(e){delete d[e],delete u[e]}function P(){var i,e=1e3*y.waitSeconds,r=e&&p.startTime+e<(new Date).getTime(),a=[],o=[],s=!1,l=!0;if(!t){if(t=!0,eachProp(u,,r&&a.length)return(e=makeError("timeout","Load timeout for modules: "+a,null,a)).contextName=p.contextName,T(e);l&&each(o,,r&&!i||!s||!isBrowser&&!isWebWorker||n||(n=setTimeout(50)),t=!1}}rn c={require:exports:module:,(e=.prototype={init:defineDep:fetch:load:check:function(){if(this.enabled&&!this.enabling){var e,t,n,i=this.map.id,r=this.depExports,a=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{a=p.execCb(i,o,r,a)}catch(t){e=t}else a=p.execCb(i,o,r,a);if(this.map.isDefine&&void 0===a&&((t=this.module)?a=t.exports:this.usingExports&&(a=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",T(this.error=e)}else a=o;this.exports=a,this.map.isDefine&&!this.ignore&&(f[i]=a,req.onResourceLoad)&&(n=[],each(this.depMaps,,req.onResourceLoad(p,this.map,n)),A(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(p.defQueueMap,i)||this.fetch()}},callPlugin:function(){var s=this.map,l=s.id,e=x(s.prefix);this.depMaps.push(e),_(e,"defined",bind(this,function(e){var a,t,n=getOwn(m,this.map.id),i=this.map.name,r=this.map.parentMap?this.map.parentMap.name:null,o=p.makeRequire(s.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(e.normalize&&(i=e.normalize(i,function(e){return b(e,r,!0)})||""),_(t=x(s.prefix+"!"+i,this.map.parentMap,!0),"defined",bind(this,),void((i=getOwn(d,t.id))&&(this.depMaps.push(t),this.events.error&&i.on("error",bind(this,function(e){this.emit("error",e)})),i.enable()))):n?(this.map.url=p.nameToUrl(n),void this.load()):((a=bind(this,).error=bind(this,,a.fromText=bind(this,,void e.load(s.name,o,a,y))})),p.enable(e,this),this.pluginMaps[e.id]=e},enable:on:emit:,(p={config:y,contextName:l,registry:d,defined:f,urlFetched:r,defQueue:h,defQueueMap:{},Module:e,makeModuleMap:x,nextTick:req.nextTick,onError:T,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs&&(n=e.urlArgs,e.urlArgs=;var n,i=y.shim,r={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,,e.bundles&&eachProp(e.bundles,,e.shim&&(eachProp(e.shim,,y.shim=i),e.packages&&each(e.packages,,eachProp(d,,(e.deps||e.callback)&&p.require(e.deps||[],e.callback)},makeShimExports:makeRequire:function(a,o){eturn o=o||{},mixin(s,{isBrowser:isBrowser,toUrl:defined:specified:),a||(s.undef=,s},enable:completeLoad:nameToUrl:load:function(e,t){req.load(p,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:onScriptError:function(e){var n,i=s(e);if(!E(i.id))return n=[],eachProp(d,,T(makeError("scripterror",'Script error for "'+i.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[i.id]))}}).require=p.makeRequire(),p}(this||window,"undefined"==typeof setTimeout?void 0:setTimeout),window.define=define,window.irequire=irequire,window.requirejs=requirejs,!window.hapyak){var SCRIPT_SRC=document.currentScript&&document.currentScript.src,ENV=window.hapyak&&window.hapyak.ENV||{},FEATURES=window.hapyak&&window.hapyak.FEATURES||{},AUTH_PARAMS=["userId","user"],PARTNER_AUTH_PARAMS=["userId","username","userRole","userToken","groupId","groupToken","email"],partnersNamespace=window.hapyak&&window.hapyak.partners||{},auth={partner:{}},controlbarheight=NaN,listeners={auth:[]},hapyakInstances=0,_toString=Object.prototype.toString;unction hapyakViewer(i){if(hapyak.supports.browser()){if(i.player&&!i.videoId&&!i.videoUrl&&!(i.trackId||i.track||i.project||i.projectId))throw new Error("trackId, track, project or projectId is required if videoId/videoUrl is missing");var r;hapyakInstances+=1,hapyak.viewerConfigured||(requirejs.config({context:"hapyak",config:{viewer:{assets:hapyak.assets,createdTrack:i.createdTrack,css:i.css,cuePoints:i.cuePoints,environment:hapyak.environment,hideEndAnnotations:i.hideEndAnnotations,loadData:i.loadData,onLoad:i.onLoad,plugins:i.plugins,projectId:i.projectId,resetVariables:i.resetVariables,readOnly:i.readOnly,rootUrl:hapyak.rootUrl,time:i.time,trackId:i.trackId,tracking:i.plugins?i.plugins.tracking:null,version:hapyak.version},"popcorn.persist":{trackId:i.trackId},dao:{api:hapyak.api,apiCdn:hapyak.apiCdn,apiKey:i.apiKey,csrfToken:i.csrfToken,version:hapyak.version,readOnly:!0},"hapyak.player":{apiKey:i.apiKey,captions:!!i.captions,context:i.plugins?i.plugins.context:null,csrfToken:i.csrfToken,debug:hapyak.debug,muted:!!i.muted,rootUrl:hapyak.rootUrl,tracking:i.plugins?i.plugins.tracking:null},"player.profile.wistia":{captions:!!i.captions},"popcorn.htmlmediaelementvideoelement":{assetsUrl:hapyak.assets},quiz:{api:toSSL(hapyak.api+"/api/quiz"),apiKey:i.apiKey,tracking:i.plugins?i.plugins.tracking:null},analytics:{logLevel:hapyak.logLevel},"analytics.distinctids":{environment:hapyak.environment},"analytics.geo":{environment:hapyak.environment},"popcorn.quickedit.iframe":{rootUrl:hapyak.rootUrl,version:hapyak.version},"popcorn.quickedit.html":{rootUrl:hapyak.rootUrl,version:hapyak.version},"utils.embed":{controlBarHeight:i.controlBarHeight,controlStyle:i.controlStyle,edit:i.edit,external:i.external}}}),hapyak.viewerConfigured=!0),loadEmbedCss(),r=hapyakInstances,requirejs(["viewer"],function(e){var t,n;if(i.player){for(n in t={instanceId:r},i)i.hasOwnProperty(n)&&(t[n]=i[n]);t.autoplay=!!isBoolean(i.autoplay)&&i.autoplay,e.load(t,function(e){i.onTrackingEvent&&listen({context:"hapyak-tracking",onEvent:i.onTrackingEvent,instanceId:e.instanceId})})}})}}function isBoolean(e){return!0===e||!1===e||e&&"object"==typeof e&&"[object Boolean]"==_toString.call(e)||!1}unction isNumber(e){var t=typeof e;return"number"==t||e&&"object"==t&&"[object Number]"==_toString.call(e)||!1}ction isElement(e){return e&&"object"==typeof e&&1===e.nodeType&&-1<_toString.call(e).indexOf("Element")||!1}function toSSL(e){return 0===e.indexOf("//")?"https:"+e:e}function addEventListenerToList(e,t,n){t&&isString(t)&&isFunction(n)&&(e[t=t.toLowerCase()]||(e[t]=[])).push(n)}function fireEventListenersInList(e,t,n,i){var r,a=e[t];if(a)for(r=0;r<a.length;r++)a[r].apply(n,i)}function removeEventListenerFromList(e,t,n){t&&isString(t)&&isFunction(n)&&(e=e[t=t.toLowerCase()])&&0<=(t=e.indexOf(n))&&e.splice(t,1)}function copyKeys(e,t,n,i){var r,a,o,s,l=!1;for(void 0===i&&(i=!0),r=0;r<e.length;r++)o=t[a=e[r]],s=n[a],(i||void 0===s)&&o&&s!==o&&(n[a]=o,l=!0);return l}function getTopHost(){var e,t;try{window.top&&window.top.location&&(e=window.top.location.host)}catch(e){}return e||((t=document.createElement("a")).href=parent!==window?document.referrer:window.location.host,e=t.host),e}function Environment(e){this.name=e.name,this.root=e.root||e.name+".brightcove.com",this.cdn=e.cdn||this.root,this.uploadsHost=e.uploadsHost||"hapyak_uploads.s3.amazonaws.com",this.uploadsCdn=e.uploadsCdn||"d3u7twytwz85jb.cloudfront.net",this.css360Host=e.css360Host||"//s3.amazonaws.com/Css360Portal/production/v1",this.ltiHost=e.ltiHost||"//lti.hapyak.com",this.hyrtmHost=e.hyrtmHost||"//d1ye8dyxedsepm.cloudfront.net",this.microserviceHost=e.microserviceHost||"//microservice.hapyak.com",this.apiHost=e.apiHost,this.viewerApiHost=e.viewerApiHost,this.playerUrl=e.playerUrl,this.edgeUrl=e.edgeUrl,this.resourcesUrl=e.resourcesUrl,this.uploadsUrl=e.resourcesUrl,this.metricsUrl=e.metricsUrl,this.configurationUrl=e.configurationUrl,this.assetsUrl=e.assetsUrl,this.catalogApiUrl=e.catalogApiUrl,this.isMatchingEnv=e.isMatchingEnv||function(){return-1!==window.location.host.indexOf(this.root)}}window.interactivity=window.hapyak={ENV:ENV,FEATURES:FEATURES,VERSION:1,browser:function(){var e,t,n,i,r=navigator.userAgent,a=navigator.appName,o=r.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*([\d\.]+)/i)||[],s=r.match(/Hapyak\(([^\)]+)\)/),l={5:"9",6:"10",7:"11"},c={},d=(d=r.match(/Trident\/(\d)/i))&&d[1];if((o=o[2]?[o[1],o[2]]:[a,navigator.appVersion,"-?"])&&null!==(e=r.match(/version\/([\.\d]+)/i))&&(o[2]=e[1]),s)for(e=s[1].split(";"),t=0;t<e.length;t++)(o=e[t].match(/([^:]+):([^:]+)/))&&(n=o[1].trim(),i=o[2].trim(),c[n]="true"===i||"false"!==i&&i);return{name:o[0],version:o[1],majorVersion:l[d]?parseInt(l[d],10):parseInt(o[1],10),overrides:c}}()},hapyak.config=function(e){var t={};return hapyak.version=e.version||hapyak.VERSION,hapyak.projectId=e.projectId,hapyak.accountId=e.accountId,hapyak.userId=e.user&&e.user.id,hapyak.pVideo=e.playerRefInstance,hapyak.videoExperienceViewer=e.videoExperienceViewer,hapyak.fetchAuthHeader=function(){return Promise.resolve(e.fetchAuthHeader&&e.fetchAuthHeader()||void 0)},hapyak.inAuthoringMode=!!e.fetchAuthHeader,void 0===e.external&&(e.external=-1===getTopHost().indexOf("hapyak.com")),injectEnv(e),setupUri(e),hapyak.dataURI=e.dataURI||"https://"+hapyak.apiHost,hapyak.viewerDataURI=e.viewerDataURI||"https://"+hapyak.viewerApiHost,hapyak.logLevel=e.logLevel||"error",hapyak.debug=isBoolean(e.debug)?e.debug:"dev"===hapyak.environment,hapyak.auth({user:e.user,userId:e.user&&e.user.id,partner:e}),window.Ember?window.Ember.ENV?window.Ember.ENV.FEATURES||(window.Ember.ENV.FEATURES={}):window.Ember.ENV={FEATURES:{}}:window.Ember={ENV:{FEATURES:{}}},window.Ember.ENV.EXTEND_PROTOTYPES=!1,"dev"===hapyak.environment&&(t={useXhr:function(){return!0}}),requirejs.config({baseUrl:"js"}),t={context:"hapyak",waitSeconds:"dev"===hapyak.environment?7:90,config:{"analytics.bigquery":{environment:hapyak.environment},"app.portal":{assetsUrl:hapyak.assets,rootUrl:e.rootUrl,group:e.group,readKey:e.readKey,writeKey:e.writeKey,reportingKey:e.reportingKey,isDevEnv:"dev"===hapyak.environment,usePushState:hapyak.supportsPushState(),user:e.user,version:hapyak.version},"portal/controllers/application":{lti_context:e.lti_context,subscription_state:e.subscription_state,trial_days_left:e.trial_days_left},"portal/controllers/experience":{hapyakJwt:e.hapyakJwt},"portal/controllers/current_user":{groupMembersEnabled:e.group_members_enabled},"portal/controllers/current_group":{csrfToken:e.csrfToken},dao:{version:hapyak.version,api:hapyak.api,apiCdn:hapyak.apiCdn,apiKey:e.apiKey,csrfToken:e.csrfToken,reportingKey:e.reportingKey},"jquery.noconflict":{preserveJQuery:e.preserveJQuery},"popcorn.persist":{trackId:e.trackId},"popcorn.pop":{localLinks:e.localLinks},"report.transformer":{apiKey:e.apiKey,reportingKey:e.reportingKey},utils:{localLinks:e.localLinks},"utils.authorizedService":{csrfToken:e.csrfToken},"utils.linkifiedtext":{localLinks:e.localLinks},"vendor/text":t},urlArgs:"v="+hapyak.version},requirejs.config(t)},hapyak.interactive=hapyak.interactivity=function(n){hapyakInstances=n.instanceId||hapyakInstances+1,n.videoExperienceViewer=hapyak.videoExperienceViewer||n.videoExperienceViewer,hapyak.config(n),requirejs.config({config:{embed:{aspectRatio:n.aspectRatio,annotationBlacklist:n.annotationBlacklist,contentTracks:n.contentTracks,keepAnnotationAspectRatio:n.keepAnnotationAspectRatio,autoplay:!!isBoolean(n.autoplay)&&n.autoplay,controlBarHeight:n.controlBarHeight,controls:n.controls,createdTrack:n.createdTrack,controlStyle:n.controlStyle,css:n.css,cuePoints:n.cuePoints,edit:n.edit,enableAltControls:n.enableAltControls,environment:hapyak.environment,external:n.external,height:n.height,hideEndAnnotations:n.hideEndAnnotations,loadData:n.loadData,minHeight:n.minHeight,minWidth:n.minWidth,nativeControls:n.nativeControls,nls:n.nls,onLoad:n.onLoad,placeholderSrc:n.placeholderSrc,player:n.player,playerParameters:n.playerParameters,playerType:n.playerType,plugins:n.plugins,projectId:n.projectId,resetVariables:n.resetVariables,rootUrl:hapyak.rootUrl,startInEditMode:n.startInEditMode,time:n.time,trackId:n.trackId,tracking:n.plugins?n.plugins.tracking:null,version:hapyak.version,videoId:n.videoId,videoType:n.videoType,videoUrl:n.videoUrl,width:n.width,experienceData:n.experienceData,ltiContext:n.ltiContext,hideCtrlbarSkipfwd:n.hideCtrlbarSkipfwd,hideCtrlbarTimeline:n.hideCtrlbarTimeline,hideCtrlbarLogo:n.hideCtrlbarLogo,hideCtrlbarAnnotationMarkers:n.hideCtrlbarAnnotationMarkers,instanceId:hapyakInstances,signature:n.signature,mat:n.mat},dao:{api:hapyak.api,apiCdn:hapyak.apiCdn,apiKey:n.apiKey,csrfToken:n.csrfToken,version:hapyak.version,readOnly:!n.edit},"popcorn.persist":{trackId:n.trackId},"hapyak.player":{apiKey:n.apiKey,captions:!!n.captions,context:n.plugins?n.plugins.context:null,csrfToken:n.csrfToken,debug:hapyak.debug,hideTrackInfo:!0,muted:!!n.muted,rootUrl:hapyak.rootUrl,tracking:n.plugins?n.plugins.tracking:null,disableInlineTextEdit:n.disableInlineTextEdit,autoEditDialog:n.autoEditDialog},"player.profile.wistia":{captions:!!n.captions},"popcorn.quickedit.image":{debug:hapyak.debug},"popcorn.htmlmediaelementvideoelement":{assetsUrl:hapyak.assets},quiz:{api:toSSL(hapyak.api+"/api/quiz"),apiKey:n.apiKey,tracking:n.plugins?n.plugins.tracking:null},analytics:{iframed:!0,logLevel:hapyak.logLevel},"popcorn.quickedit.iframe":{rootUrl:hapyak.rootUrl,version:hapyak.version},"popcorn.quickedit.html":{rootUrl:hapyak.rootUrl,version:hapyak.version},"utils.embed":{controlBarHeight:n.controlBarHeight,controlStyle:n.controlStyle,edit:n.edit,external:n.external},"utils.accruedTime":{enabled:!!(n.experienceData&&n.experienceData.scormVersion||n.ltiContext&&"student"===n.ltiContext.resolved_role)}}});var i,r=n.onLoad||function(){};const a=new Deferred;return i=hapyakInstances,irequire(["promise!configuration","embed"],function(e,t){embedCssLoaded=!0,removeLoadingElement(i),r(),n.returnPlayerDOM||document.body.appendChild(t),a.resolve(t)}),a.promise},hapyak.viewer=function(t){hapyak.config(t),hapyakEntry="viewer",requirejs(["promise!configuration"],function(e){t.nls?hapyak.config(t):e.player&&e.player.nls&&(t.nls=e.player.nls,hapyak.config(t)),hapyakViewer(t)})},hapyak.experienceViewer=function(e){e.videoExperienceViewer=!0,hapyak.config(e);var t=e.registration_data,n=e.frep_params,i=e.experience_data_graph,r=(window.Ember.ENV.FEATURES["query-params-new"]=!0,requirejs.config({config:{"app.portalExperience":{assetsUrl:hapyak.assets,rootUrl:e.rootUrl,group:e.group,readKey:e.readKey,isDevEnv:"dev"===hapyak.environment,usePushState:hapyak.supportsPushState(),user:e.user,version:hapyak.version,ltiContext:e.lti_context},"portal/views/application_experience":{frepParams:n},"portal/routesExperience":{experienceInstance:i.experience},"portal/controllers/experience":{transitionImageUrl:i.transition_image_url,originalUrl:window.location.href,viewerMode:i.viewerMode,branding:i.experience_branding,ltiContext:e.lti_context,scormVersion:i.scorm_version,experienceProvisioning:i.experience_provisioning},"hapyak.list":{experienceDataGraph:i,registrationData:t,frepParams:n},"hapyak.player.timer":{ltiContext:e.lti_context},dao:{version:hapyak.version,api:hapyak.api,apiCdn:hapyak.apiCdn,apiKey:e.apiKey,csrfToken:e.csrfToken,viewerMode:i.viewerMode,experienceDataGraph:i,readOnly:!0},analytics:{logLevel:hapyak.logLevel},"gradingAlgorithms/quizResults":{totalNumberOfQuizQuestions:i.total_number_of_quiz_questions}},shim:{ember:{deps:["jquery.noconflict","handlebars"],exports:"Ember"},"ember.data":{deps:["ember.noconflict"],exports:"DS"},"loadingbutton.segment":{exports:"Segment"},loadingbutton:{deps:["loadingbutton.segment"],exports:"LoadingButton"}}}),e.onLoad||function(){});irequire(["jquery.noconflict"],function(){irequire(["datatables"],function(){irequire(["app.portalExperience","promise!configuration"],r)})})},hapyak.addon=function(e,t,n){var i,r={};if(e&&t){for(i in r.actions={},n&&n.length&&hapyak.message.addTargetFrames(e,n),t)"function"==typeof t[i]&&(r.actions[i]=t[i].bind(r),hapyak.message.addEventListener(i,r.actions[i],e));return r.destroy=function(){var e,t=this.actions;for(e in t)hapyak.message.removeEventListener(e,t[e]);this.actions=null},t.init&&"function"==typeof t.init&&t.init(r),r}},Environment.environments={dev:new Environment({name:"dev",apiHost:"interactivity.api.qa.brightcove.com",viewerApiHost:"interactivity.viewer.api.qa.brightcove.com",playerUrl:"https://bc-players-qa.s3.amazonaws.com",edgeUrl:"https://edge.api.qa.brightcove.com",assetsUrl:window.location.origin,resourcesUrl:"https://resources.interactivity.qa.brightcove.com",uploadsUrl:"https://uploads.interactivity.qa.brightcove.com",metricsUrl:"https://interactivity-collector.dev.metric.brightcove.com/track",configurationUrl:"https://interactivity.viewer.api.qa.brightcove.com/api",catalogApiUrl:"https://cms.api.qa.brightcove.com"}),"studio.local":new Environment({name:"studio.local",apiHost:"interactivity.api.qa.brightcove.com",viewerApiHost:"interactivity.viewer.api.qa.brightcove.com",playerUrl:"https://bc-players-qa.s3.amazonaws.com",edgeUrl:"https://edge.api.qa.brightcove.com",assetsUrl:"https://player.interactivity.qa.brightcove.com",resourcesUrl:"https://resources.interactivity.qa.brightcove.com",uploadsUrl:"https://uploads.interactivity.qa.brightcove.com",metricsUrl:"https://interactivity-collector.qa.metric.brightcove.com/track",configurationUrl:"https://interactivity.viewer.api.qa.brightcove.com/api",catalogApiUrl:"https://cms.api.qa.brightcove.com"}),qa:new Environment({name:"qa",apiHost:"interactivity.api.qa.brightcove.com",viewerApiHost:"interactivity.viewer.api.qa.brightcove.com",playerUrl:"https://bc-players-qa.s3.amazonaws.com",edgeUrl:"https://edge.api.qa.brightcove.com",assetsUrl:"https://player.interactivity.qa.brightcove.com",resourcesUrl:"https://resources.interactivity.qa.brightcove.com",uploadsUrl:"https://uploads.interactivity.qa.brightcove.com",metricsUrl:"https://interactivity-collector.qa.metric.brightcove.com/track",configurationUrl:"https://interactivity.viewer.api.qa.brightcove.com/api",catalogApiUrl:"https://cms.api.qa.brightcove.com"}),staging:new Environment({name:"stage",apiHost:"interactivity.api.stage.brightcove.com",viewerApiHost:"interactivity.viewer.api.stage.brightcove.com",playerUrl:"https://players.staging.brightcove.net",edgeUrl:"https://edge.api.staging.brightcove.com",assetsUrl:"https://player.interactivity.stage.brightcove.com",resourcesUrl:"https://resources.interactivity.stage.brightcove.com",uploadsUrl:"https://uploads.interactivity.stage.brightcove.com",metricsUrl:"https://interactivity-collector.qa.metric.brightcove.com/track",configurationUrl:"https://interactivity.viewer.api.stage.brightcove.com/api",catalogApiUrl:"https://cms.api.staging.brightcove.com"}),production:new Environment({name:"production",apiHost:"interactivity.api.brightcove.com",viewerApiHost:"interactivity.viewer.api.brightcove.com",playerUrl:"https://players.brightcove.net",edgeUrl:"https://edge.api.brightcove.com",assetsUrl:"https://player.interactivity.brightcove.com",resourcesUrl:"https://resources.interactivity.brightcove.com",uploadsUrl:"https://uploads.interactivity.brightcove.com",metricsUrl:"https://interactivity-collector.metric.brightcove.com/track",configurationUrl:"https://interactivity.viewer.api.brightcove.com/api",catalogApiUrl:"https://cms.api.brightcove.com"})},Environment.find=function(e){var t,n,i=Environment.environments;if(e="feature"===e?"dev":e)return i[e]||i.production;for(t in i)if(i.hasOwnProperty(t)&&(n=i[t]).isMatchingEnv())return n;return i.production};var embedCssLoaded=!1,loadingEl={},loadingSpinner={},isNewExperienceView=!0;try{hapyak.iframed=window.self!==window.top}catch(e){}function toArray(e,t){return"[object Array]"===Object.prototype.toString.call(e)?e:isString(e)&&-1!==e.indexOf(";")?e.split(t||";"):[e]}function versionUrl(e){return hapyak.version?e+(-1===e.indexOf("?")?"?":"&")+"v="+hapyak.version:e}function injectEnv(e){return copyKeys(["apiKey","environment","variables"].concat(PARTNER_AUTH_PARAMS),ENV,e,!1),e}function setupUri(e){var t=hapyak.browser.overrides.environment||e&&e.environment,t=Environment.find(t),n=!isUndefined(e.secure),i=!0===e.secure||"https:"===document.location.protocol,n=n?i?"https:":"http:":"",i=e.plugins&&e.plugins.cdn||{},r=i&&i.api||{},i=i&&i.assets||{};"tests"===t.name?(hapyak.rootUrl=hapyak.assets=hapyak.api=document.location.href.substring(0,document.location.href.indexOf("js/tests")),hapyak.environment="dev"):(hapyak.environment=t.name,hapyak.apiCdn=r,hapyak.apiHost=t.apiHost,hapyak.viewerApiHost=t.viewerApiHost,hapyak.viewerDataURI=e.viewerDataURI||"https://"+t.viewerApiHost,hapyak.dataURI=e.dataURI||"https://"+t.apiHost,hapyak.playerUrl=t.playerUrl,hapyak.edgeUrl=t.edgeUrl,hapyak.resourcesUrl=t.resourcesUrl,hapyak.uploadsUrl=t.uploadsUrl,hapyak.metricsUrl=t.metricsUrl,hapyak.configurationUrl=t.configurationUrl,hapyak.catalogApiUrl=t.catalogApiUrl,r.enabled=!1,i.enabled=!1,hapyak.rootUrl=hapyak.api=n+"//"+t.root,hapyak.assets=t.assetsUrl,i.enabled&&(hapyak.assets=i.prefix||n+"//"+t.cdn),r.enabled&&(r.prefix||(r.prefix=n+"//"+t.cdn),-1!==(e=r.prefix.indexOf("?"))&&(r.query=r.prefix.substr(e+1),r.prefix=r.prefix.substr(0,e)),"/"===r.prefix.substr(-1)&&(r.prefix=r.prefix.substr(0,r.prefix.length-1))))}function createFrameElement(e,t,n){var i=window.document.createElement("iframe"),r=i.requestFullscreen||i.mozRequestFullScreen||i.msRequestFullscreen||i.webkitRequestFullscreen,a=t.height,o=t.width,s=t.videoWidth,t=t.videoHeight/s;return isNaN(t)&&(t=16/9),i.setAttribute("id","hapyak-embed-"+n),i.setAttribute("name","hapyak-embed"),i.setAttribute("class","hapyak-embed"),i.setAttribute("marginwidth",0),i.setAttribute("marginheight",0),i.setAttribute("frameborder","no"),i.setAttribute("scrolling","no"),r&&i.setAttribute("allowfullscreen",""),i.mozRequestFullScreen?i.setAttribute("mozallowfullscreen",""):i.msRequestFullscreen?i.setAttribute("msallowfullscreen",""):i.webkitRequestFullscreen&&i.setAttribute("webkitallowfullscreen",""),i.setAttribute("src",e),isNumber(o)&&(i.setAttribute("width",o),isNumber(a)||i.setAttribute("height",Math.round(t*o)+59)),isNumber(a)&&i.setAttribute("height",a),isNumber(o)||isNumber(a)||(i.setAttribute("width","100%"),i.setAttribute("height","100%")),i}function generateEmbedUrl(e){var t,n=void 0===e.edit||!0===e.edit,i=["embed=true"],r=void 0===e.startInEditMode||!0===e.startInEditMode;if(setupUri(e),i.push("edit="+n),i.push("startInEditMode="+(n&&r)),n=SCRIPT_SRC.replace(/(.*)\/.*\.js$/i,"$1/embed.html"),!isUndefined(e.annotationBlacklist)&&e.annotationBlacklist&&i.push("annotation_blacklist="+encodeURIComponent(JSON.stringify(e.annotationBlacklist))),e.apiHost&&i.push("apiHost="+encodeURIComponent(e.apiHost)),e.projectId?i.push("projectId="+encodeURIComponent(e.projectId)):e.templateId&&i.push("templateId="+encodeURIComponent(e.templateId)),isString(e.accountId)&&e.accountId&&i.push("accountId="+encodeURIComponent(e.accountId)),!isUndefined(e.placeholderSrc)&&e.placeholderSrc&&i.push("placeholderSrc="+encodeURIComponent(e.placeholderSrc)),!isUndefined(e.playerParameters)&&e.playerParameters&&i.push("player_parameters="+encodeURIComponent(JSON.stringify(e.playerParameters))),!isUndefined(e.videoWidth)&&e.videoWidth&&i.push("source_width="+encodeURIComponent(e.videoWidth)),!isUndefined(e.videoHeight)&&e.videoHeight&&i.push("source_height="+encodeURIComponent(e.videoHeight)),!isUndefined(e.groupId)&&e.groupId&&(i.push("partner_group="+encodeURIComponent(e.groupId)),isString(e.groupToken)&&e.groupToken&&i.push("partner_group_token="+encodeURIComponent(e.groupToken))),!isUndefined(e.userId)&&e.userId&&(i.push("partner_user="+encodeURIComponent(e.userId)),isString(e.userRole)&&e.userRole&&i.push("partner_user_role="+encodeURIComponent(e.userRole)),isString(e.userToken)&&e.userToken&&i.push("partner_user_token="+encodeURIComponent(e.userToken)),isString(e.username)&&e.username&&i.push("partner_username="+encodeURIComponent(e.username))),isString(e.disable)&&e.disable&&i.push("disable="+encodeURIComponent(e.disable)),isString(e.enable)&&e.enable&&i.push("enable="+encodeURIComponent(e.enable)),isString(e.controlStyle)&&e.controlStyle&&i.push("control_style="+encodeURIComponent(e.controlStyle)),isString(e.css)&&e.css&&i.push("css="+encodeURIComponent(e.css)),isUndefined(e.controls)||i.push("controls="+encodeURIComponent(e.controls)),!isNaN(e.controlBarHeight)&&0<=e.controlBarHeight&&i.push("control_bar_height="+e.controlBarHeight),isUndefined(e.nativeControls)||i.push("native_controls="+!!e.nativeControls),void 0!==e.external&&i.push("external="+encodeURIComponent(e.external)),e.resetVariables&&i.push("reset_variables=true"),e.isExperience&&i.push("is_experience=true"),e.autoplay&&i.push("autoplay="+encodeURIComponent(e.autoplay)),isObject(e.tracking)&&(e.plugins||(e.plugins={}),e.plugins.tracking=e.tracking,delete e.tracking),isObject(e.plugins)&&i.push("plugins="+encodeURIComponent(JSON.stringify(e.plugins))),isString(e.nls)&&e.nls&&i.push("nls="+encodeURIComponent(e.nls)),isUndefined(e.captions)||i.push("captions="+!!e.captions),e.aspectRatio&&i.push("aspect_ratio="+encodeURIComponent(e.aspectRatio)),isUndefined(e.hideEndAnnotations)||i.push("hide_end="+!!e.hideEndAnnotations),e.cuePoints&&i.push("cuepoints=true"),isUndefined(e.enableAltControls)||e.enableAltControls||i.push("enable_alt_controls=false"),isBoolean(e.disableInlineTextEdit)&&i.push("disable_inline_text_edit="+!!e.disableInlineTextEdit),isBoolean(e.autoEditDialog)&&i.push("auto_edit_dialog="+!!e.autoEditDialog),e.localLinks&&i.push("local_links=true"),e.registrationData)for(var a in e.registrationData)i.push(encodeURIComponent(a)+"="+encodeURIComponent(e.registrationData[a]));if(e.frepParams)for(var a in e.frepParams)i.push(encodeURIComponent(a)+"="+encodeURIComponent(e.frepParams[a]));return e.experienceDataGraph&&(t={generateExperienceViewId:isNewExperienceView,experience:{id:e.experienceDataGraph.experience&&e.experienceDataGraph.experience.id,title:e.experienceDataGraph.experience&&e.experienceDataGraph.experience.title},playlist:{id:e.experienceDataGraph.experience&&e.experienceDataGraph.experience.playlist&&e.experienceDataGraph.experience.playlist.id,name:e.experienceDataGraph.experience&&e.experienceDataGraph.experience.playlist&&e.experienceDataGraph.experience.playlist.name},layout:{id:e.experienceDataGraph.experience&&e.experienceDataGraph.experience.layout&&e.experienceDataGraph.experience.layout.id,name:e.experienceDataGraph.experience&&e.experienceDataGraph.experience.layout&&e.experienceDataGraph.experience.layout.name,type_id:e.experienceDataGraph.experience&&e.experienceDataGraph.experience.layout&&e.experienceDataGraph.experience.layout.layout_type&&e.experienceDataGraph.experience.layout.layout_type.id,type_name:e.experienceDataGraph.experience&&e.experienceDataGraph.experience.layout&&e.experienceDataGraph.experience.layout.layout_type&&e.experienceDataGraph.experience.layout.layout_type.name},scormVersion:e.experienceDataGraph.scorm_version,css:e.experienceDataGraph.css,urlParams:e.variables||{}},i.push("experience_data="+encodeURIComponent(JSON.stringify(t))),isNewExperienceView=!1),e.experienceData&&(e.isExperience||i.push("is_experience=true"),t={generateExperienceViewId:isNewExperienceView,experience:{id:e.experienceData.id,title:e.experienceData.title},playlist:{id:e.experienceData.id,name:e.experienceData.title+"_playlist"},layout:{id:e.experienceData.id,name:e.experienceData.title+"_layout",type_name:e.experienceData.type},scormVersion:e.experienceData.scorm_version,css:e.experienceData.css,urlParams:e.variables||{}},i.push("experience_data="+encodeURIComponent(JSON.stringify(t))),isNewExperienceView=!1),e.instanceId&&i.push("instance_id="+e.instanceId),e.playerType&&i.push("player="+e.playerType),n+"?"+i.join("&")}function loadEmbedCss(){if(!hapyak.assets)throw new Error("Called loadEmbedCss() too early: hapyak.assets expected");if(!hapyak.version)throw new Error("Called loadEmbedCss() too early: hapyak.version expected");embedCssLoaded||(hapyak.asset.css([hapyak.assets+"/css/generated/embed.css",hapyak.assets+"/css/generated/player.css"]),embedCssLoaded=!0)}function createLoadingElement(e,t){if(t="i"+(t=t||hapyakInstances),e&&window.Element&&e instanceof Element)return loadingEl[t]=window.document.createElement("div"),loadingEl[t].setAttribute("style","height: 44px; left: 50%; margin-left: -22px; margin-top: -22px; position: absolute; top: 50%; width: 44px;"),loadingEl[t].setAttribute("id","hapyak-embed-loading-"+t),e.appendChild(loadingEl[t]),loadingEl[t]}function createLoadingIndicator(e,t){if(t="i"+(t=t||hapyakInstances),isFunction(e)&&window.Element&&loadingEl[t]instanceof Element)return loadingSpinner[t]=new e({lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:0,left:0}).spin(loadingEl[t]),loadingSpinner[t]}function removeLoadingElement(e){loadingSpinner[e="i"+(e=e||hapyakInstances)]&&isFunction(loadingSpinner[e].stop)&&(loadingSpinner[e].stop(),delete loadingSpinner[e]),loadingEl[e]instanceof Element&&loadingEl[e].parentNode&&(loadingEl[e].parentNode.removeChild(loadingEl[e]),delete loadingEl[e])}function displayOverlayMessage(n,e,t,i){var r,a=document.createElement("div"),o=document.createElement("div"),s=document.createElement("button");n=n||document.querySelector(".hapyak-player")||document.body,i=i||{},(r=n.querySelector("#hapyak-isdown-container"))&&n.removeChild(r),a.id="hapyak-isdown-container",o.className="hapyak-isdown-message",o.innerHTML=e||"We are experiencing issues connecting to the service. Please wait a moment and try again.",s.id="hapyak-isdown-retry",s.innerHTML=i.text||"Retry",i.title&&((r=document.createElement("div")).className="hapyak-isdown-title",r.innerHTML=i.title,a.appendChild(r)),a.appendChild(o),0<t&&((e=document.createElement("div")).innerHTML=t,e.id="hapyak-isdown-countdown",a.appendChild(e),o.innerHTML+="<br />Trying again in:"),a.appendChild(s),i.dismissible&&a.classList.add("dismissible"),i.text&&s.addEventListener("click",function e(t){t.target.removeEventListener("click",e),i.refresh?document.location.reload(!0):i.dismissible?n.removeChild(a):window.top.location="https://"+window.location.host+"/login?next="+encodeURIComponent(window.top.location.href)},!1),n.appendChild(a)}function listen(n){var e=window.addEventListener?"addEventListener":"attachEvent",t=window[e],e="addEventListener"==e?"message":"onmessage",i=n.context||"hapyak";isString(i)&&(i=[i]),n.onEvent&&t(e,function(e){try{var t=JSON.parse(e.data);-1!==i.indexOf(t.context)&&matchesInstance(t,n)&&n.onEvent(t)}catch(e){"ReferenceError"!==e.name&&"customTrackingHandler is not defined"!==e.message&&"production"!==hapyak.environment&&console.error(e)}})}function matchesInstance(e,t){var n;function i(e){return-1===[void 0,null].indexOf(e)}return i(e.instanceId)?n=e.instanceId:i(e.properties)&&(n=e.properties.instanceId),n===t.instanceId}function hapyakList(i,r){requirejs.config({context:"hapyak"}),irequire(["promise!configuration","hapyak.list","hapyak.player.timer"],function(e,t,n){t=new t(i);hapyak.instances.playlist.push(t),"function"==typeof r&&r(t)})}hapyak.asset={css:function(e,t){if(window&&window.document)for(var n,i=toArray(e),r=i.length,a=0;a<r;a++)(n=window.document.createElement("link")).type="text/css",n.rel="stylesheet",n.href=i[a],!1!==t&&(n.href=versionUrl(n.href)),window.document.getElementsByTagName("head")[0].appendChild(n)},script:function(e,t,n){if(window&&window.document)for(var i,r=toArray(e),a=r.length,o=0;o<a;o++)(i=window.document.createElement("script")).type="text/javascript",t&&(i.async=!0),i.src=r[o],!1!==n&&(i.src=versionUrl(i.src)),window.document.getElementsByTagName("head")[0].appendChild(i)}},hapyak.auth=function(e){var t=!1;return void 0!==e&&(e.user&&!e.userId&&(e.userId=e.user.id),t=copyKeys(AUTH_PARAMS,e,auth),(t=void 0!==(e=e.partner)?copyKeys(PARTNER_AUTH_PARAMS,e,auth.partner)||t:t)&&fireEventListenersInList(listeners,"auth",this,[auth])),auth},hapyak.addEventListener=function(e,t){addEventListenerToList(listeners,e,t)},hapyak.removeEventListener=function(e,t){removeEventListenerFromList(listeners,e,t)},hapyak.triggerListeners=function(e,t,n){fireEventListenersInList(listeners,e,t,n)},hapyak.displayOverlayMessage=displayOverlayMessage,hapyak.generateEmbedUrl=generateEmbedUrl,hapyak.getBaseURI=function(){var e=document.baseURI;return e=e&&"/"===e[e.length-1]?e.slice(0,e.length-1):e},hapyak.supportsPushState=hapyak.isOldDocumentMode=function(){return!window.addEventListener&&"MSIE"===hapyak.browser.name&&9<=hapyak.browser.majorVersion&&(document.documentMode<9||"CSS1Compat"!==document.compatMode)},hapyak.injectLegacyBrowserButton=function(e,t){var n=document.getElementById(e),e=document.createElement("button");n.style.backgroundColor="#696969",e.style.position="absolute",e.innerHTML="Watch Video",e.attachEvent("onclick",function(){window.open(t,"hapyak","width="+(n.offsetWidth+10)+",height="+(n.offsetHeight+10)+",resizable")}),n.appendChild(e),e.style.overflow="visible",e.style.width=3*e.offsetWidth+"px",e.style.height=3*e.offsetHeight+"px",e.style.top=n.offsetHeight/2-e.offsetHeight/2+"px",e.style.left=(n.offsetWidth-e.offsetWidth)/2+"px"},hapyak.instances={viewer:[],editor:[],playlist:[]},hapyak.supports={browser:fullscreen:function(){var e=window&&window.document;return!!navigator.userAgent.match(/iP(od|ad|hone)/)||hapyak.supports.browser()&&(e.fullscreenEnabled||e.mozFullScreenEnabled||e.msFullscreenEnabled||e.webkitFullscreenEnabled)}},hapyak.player=function(e){return e.edit=!1,hapyak.iframe(e)},hapyak.editor=hapyak.partners=partnersNamespace,hapyak.partners.brightcove={onReady:function(e){var t,n=document.createElement("script");n.type="text/javascript",/(iPhone|iPad)/i.test(navigator.userAgent)?n.src="https://sadmin.brightcove.com/js/APIModules_all.js":n.src="https://sadmin.brightcove.com/js/api/SmartPlayerAPI.js",document.head.appendChild(n),t=setInterval(function(){window.brightcove&&window.brightcove.api&&(clearInterval(t),e&&e())},100)}},hapyak.iframe=function(p){var r;if(p.videoExperienceViewer=hapyak.videoExperienceViewer||p.videoExperienceViewer,hapyak.config(p),!p.elementId&&!p.element)throw new Error("elementId or element is a required field");if(p.elementId&&!isString(p.elementId))throw new Error("elementId must be a string");if(p.element&&!isElement(p.element))throw new Error("element must be an html element");if(!p.projectId&&!p.templateId)throw new Error("projectId is required");hapyakInstances+=1,p.instanceId=hapyakInstances;var h,f,n,a,m,v,o=generateEmbedUrl(p),g=p.element||window.document.getElementById(p.elementId),y={},i=1,b={},w=!1,E=0,k=0,x=0,C=0,_=0,t=NaN,T=NaN,S=!0,A={},P=!1,I=!1,L={user:!1,track:!1,annotations:!1},D={},O={},M=[],N=p.resetVariables,R=[],V={},j=[];function s(e,t){isFunction(e)&&(y["callback_"+i]=e,t.callbackIndex=i,i++)}unction H(e,t){var n,i={context:"hapyak",event:"setData",data:{}},r=!1;if(L.iframe){if(e)i.data[e]=t,r=!0;else if(t&&isObject(t))for(n in t)if(t.hasOwnProperty(n)){r=!0,i.data=t;break}try{r&&h&&h.contentWindow&&h.contentWindow.postMessage(JSON.stringify(i),"*")}catch(e){}}else M.push([e,t])}function c(e,t,n){e=new a.HapyakRemote(e,t,n);return R.push(e),e}function z(t){irequire(["remote"],function(e){for(a=e;j.length;)a.registerItem(j.shift());isFunction(t)&&t()})}function l(t){t&&(n||w?n.call(t):irequire(["jschannel"],function(e){!w&&h&&h.contentWindow&&(n=n||e.build({window:h.contentWindow,origin:"*",scope:"hapyak"})).call(t)}))}return m=hapyakInstances,irequire(["promise!configuration"],function(i){var c;function d(){var e=g.querySelector("#hapyak-isdown-countdown"),t=+e.innerHTML-1;0<(e.innerHTML=t)?(clearTimeout(c),c=setTimeout(d,1e3)):u()}function u(){h&&h.parentNode&&h.parentNode.removeChild(h),clearTimeout(c),g.querySelector("#hapyak-isdown-retry").removeEventListener("click",u,!1),g.removeChild(g.querySelector("#hapyak-isdown-container")),e()}function e(){var e,t=i.maintenance,s=t&&t.countdownTimeout||15,n=i.player&&i.player.iframeTimeout,l=t&&t.message;if(t&&t.isDown)removeLoadingElement(m),displayOverlayMessage(g,l,s),g.querySelector("#hapyak-isdown-retry").addEventListener("click",u,!1),c=setTimeout(d,1e3);else{if((h=createFrameElement(o,p,m)).style.visibility="hidden",h.style.position="absolute",!g)throw new Error("Could not find container to embed HapYak iframe into");for(e in createLoadingElement(g,m),v=setTimeout(function(){removeLoadingElement(m),displayOverlayMessage(g,l,s),g.querySelector("#hapyak-isdown-retry").addEventListener("click",u,!1),c=setTimeout(d,1e3)},n||1e4),irequire(["spin"],function(e){createLoadingIndicator(e,m),h.addEventListener("load",function(){removeLoadingElement(m)})}),p)p.hasOwnProperty(e)&&"on"===e.substring(0,2)&&q(e.substring(2),p[e]);p.plugins&&p.plugins.remote&&p.plugins.remote.items&&(p.plugins.remote.scan&&z(function(){for(var e,t=a.scan(),n={context:"hapyak",event:"setRemotes",remotes:V};t.length;)e=t.shift(),R.push(e),V[e.item.id]=e.item;h&&h.contentWindow&&h.contentWindow.postMessage(n,"*")}),p.plugins.remote.items.forEach(function(e){a?a.registerItem(e):j.push(e),V[e.id]=e})),listen({context:["hapyak","hapyak-tracking"],instanceId:m,onEvent:function(e){var t,n,i,r="hapyak"===e.context?e.callback:"trackingevent",a=[];if(!w){switch(v&&"loaderror"!==r&&(clearTimeout(v),v=void 0,h.style.visibility="visible",h.style.position="static"),r){case"loadtrack":N&&(f.resetVariables(),N=p.resetVariables),h.contentWindow&&"function"==typeof h.contentWindow.postMessage&&h.contentWindow.postMessage(JSON.stringify({context:"hapyak",event:"setRemotes",remotes:V}),"*"),a.push(e);break;case"loadannotations":case"setupannotations":case"loadcurrentuser":case"trackingevent":a.push(e);break;case"annotationupdated":case"annotationcreated":a.push(e.annotation);break;case"annotationfocus":case"annotationblur":case"annotationremoved":a.push(e.annotationId);break;case"save":case"edittrack":case"newtrack":a.push(e.trackId);break;case"durationchange":T=e.duration;break;case"timeupdate":P||(E=e.currentTime);break;case"canplay":C=e.videoWidth,_=e.videoHeight,A=e.pluginData,removeLoadingElement(m);break;case"seeked":P=!1,E=e.currentTime;break;case"play":(S=I?S:!1)||(I=!1);break;case"pause":(S=I?S:!0)&&(I=!1);break;case"load":for(removeLoadingElement(m),L.iframe=!0;M.length;)H.apply(null,M.shift());a.push(h);break;case"resized":k=e.width,x=e.height,_=e.videoHeight,C=e.videoWidth;break;case"controlvisibilitychange":a.push(e.visible);break;case"data":for(t in e.removes&&e.removes.forEach(function(e){delete D[e]}),e.changes)e.changes.hasOwnProperty(t)&&(D[t]=e.changes[t]);if(a.push(D,function(){var e,t,n=!1,i={},r={};for(t in O)O.hasOwnProperty(t)&&(r[t]=!(i[t]=void 0));for(t in D)D.hasOwnProperty(t)&&(O[t]===(t,e=D[t])?delete i[t]:(i[t]=O[t]=e,n=!0),delete r[t]);if(n){for(t in r)r.hasOwnProperty(t)&&delete O[t];return i}return!1}()),a[1])break;return;case"loaderror":clearTimeout(v),removeLoadingElement(m);var o=g.querySelector("#hapyak-isdown-retry");o&&o.removeEventListener("click",u,!1),displayOverlayMessage(g,l,s),g.querySelector("#hapyak-isdown-retry").addEventListener("click",u,!1),clearTimeout(c),c=setTimeout(d,1e3)}fireEventListenersInList(b,r,this,a),e.callbackIndex&&(r=e.callbackIndex,n=a,isFunction(i=y["callback_"+r])&&(delete y["callback_"+r],i.apply(void 0,n)))}}}),-1===g.className.indexOf("hapyak-iframe-container")&&(g.classList&&g.classList.add?g.classList.add("hapyak-iframe-container"):g.className="hapyak-iframe-container"),h.addEventListener("load",function(){p.fetchAuthHeaderCallback&&(r&&r.destroy(),(r=Channel.build({window:h.contentWindow,origin:o.split("?")[0],scope:"bcauth"})).bind("fetchAuthHeader",function(e){Promise.resolve(p.fetchAuthHeaderCallback()).then(e.complete),e.delayReturn(!0)}))}),g.appendChild(h)}}controlbarheight=i&&i.player&&i.player.controlbarheight?i.player.controlbarheight:59,e()}),f={element:function(){return h},save:function(e){w||(s(e,e={context:"hapyak",event:"saveTrack"}),h&&h.contentWindow&&h.contentWindow.postMessage(JSON.stringify(e),"*"))},newTrack:function(e){w||(L.track=!1,L.annotations=!1,s(e,e={context:"hapyak",event:"newTrack"}),h&&h.contentWindow&&h.contentWindow.postMessage(JSON.stringify(e),"*"))},editTrack:function(e,t){w||(L.track=!1,L.annotations=!1,s(t,t={context:"hapyak",event:"editTrack",update:e}),h&&h.contentWindow&&h.contentWindow.postMessage(JSON.stringify(t),"*"))},copyTrack:function(e){w||(L.track=!1,L.annotations=!1,s(e,e={context:"hapyak",event:"copyTrack"}),h&&h.contentWindow&&h.contentWindow.postMessage(JSON.stringify(e),"*"))},resize:function(e,t,n){var i;h&&h.contentWindow&&!w&&(i={context:"hapyak",event:"resize"},void 0!==e&&(i.width=e),void 0!==t&&(i.height=t),n&&(i.sync=!0),h.contentWindow.postMessage(JSON.stringify(i),"*"))},resetVariables:function(){L.iframe?h&&h.contentWindow&&h.contentWindow.postMessage('{"context":"hapyak","event":"resetVariables"}',"*"):N=!0},play:function(){L.iframe&&!w&&(S=!(I=!0),h&&h.contentWindow&&h.contentWindow.postMessage('{"context":"hapyak","event":"play"}',"*"))},pause:function(){L.iframe&&!w&&(S=I=!0,h&&h.contentWindow&&h.contentWindow.postMessage('{"context":"hapyak","event":"pause"}',"*"))},destroy:function(){for(w=!0,h&&h.contentWindow&&h.contentWindow.postMessage('{"context":"hapyak","event":"destroy"}',"*");R.length;)R.pop().destroy()},trackControls:function(e,n){loadEmbedCss(),irequire(["widget.controls.track"],function(t){t.trackControls(e,n,h.contentWindow),listen({context:["hapyak"],onEvent:function(e){"hapyak"===e.context&&"edittrack"===e.callback&&t.onEditTrack(e)}})})},trackList:function(t,n){irequire(["widget.controls.tracklist"],},showAnnotations:function(e,t,n){var i={context:"hapyak",event:"showAnnotations"};void 0!==e&&(i.show=e),void 0!==t&&(i.annotationType=t),void 0!==n&&(i.annotationId=n),h.contentWindow.postMessage(JSON.stringify(i),"*")},transaction:{start:function(n){l({method:"transaction.start",error:function(e,t){isFunction(n)&&n(null,t)},success:isFunction(n)?n:function(){}})},commit:function(n){l({method:"transaction.commit",error:function(e,t){isFunction(n)&&n(null,t)},success:isFunction(n)?n:function(){}})},abort:function(n){l({method:"transaction.abort",error:function(e,t){isFunction(n)&&n(null,t)},success:isFunction(n)?n:function(){}})}},setPlaylist:function(e,t){e=e.map(function(e){return{data:{id:e.id,project:{data:{title:e.title}}}}});interactivity.message.send(h,"move",{playlistItems:e,currentVideo:e[t],customContext:"getPlaylist"})},getControlState:function(e){l({method:"controls.status",success:isFunction(e)?e:function(){}})},annotations:{all:function(e,n){isFunction(e)&&!n&&(n=e,e=null),l({method:"annotations.all",error:function(e,t){isFunction(n)&&n(null,t)},success:isFunction(n)?n:function(){},params:e})},get:function(e,n){e&&l({method:"annotations.get",params:e,error:function(e,t){isFunction(n)&&n(null,t)},success:isFunction(n)?n:function(){}})},create:function(e,t,n){e&&(isFunction(t)&&(n=t,t={}),l({method:"annotations.create",params:{type:e,properties:t||{}},error:function(e,t){isFunction(n)&&n(null,t)},success:isFunction(n)?n:function(){}}))},update:function(e,t,n){e&&t&&l({method:"annotations.update",params:{id:e,properties:t},error:function(e,t){isFunction(n)&&n(null,t)},success:isFunction(n)?n:function(){}})},remove:function(e,n){e&&l({method:"annotations.remove",params:e,error:function(e,t){isFunction(n)&&n(null,t)},success:isFunction(n)?n:function(){}})},types:function(n){l({method:"annotations.types",error:function(e,t){isFunction(n)&&n(null,t)},success:isFunction(n)?n:function(){}})},normalize:function(e,t,n,i,r){isFunction(r)&&l({method:"annotations.normalize",params:{id:e,key:t,value:n,dictionary:i},error:function(e,t){r(null,t)},success:r})},focus:function(e,n){l({method:"annotations.focus",params:e||null,error:function(e,t){isFunction(n)&&n(null,t)},success:isFunction(n)?n:function(){}})},blur:function(e,n){l({method:"annotations.blur",params:e||null,error:function(e,t){isFunction(n)&&n(null,t)},success:isFunction(n)?n:function(){}})}},loaded:{},addEventListener:q,removeEventListener:function(e,t){removeEventListenerFromList(b,e,t)},getData:function(e){var t,n;if(e)return D[e];for(n in t={},D)D.hasOwnProperty(n)&&(t[n]=D[n]);return t},setData:H,remote:function(e,t,n,i){isFunction(n)&&(i=n,n=null),a?i(c(e,t)):z(}},p.variables&&H(null,p.variables),p.plugins&&H("plugins",p.plugins),Object.defineProperty(f,"currentTime",{configurable:!1,enumerable:!0,get:function(){return E},set:function(e){e=parseFloat(e),isNaN(e)||!T||e<0||T<e||e===E||(P=!0,e={context:"hapyak",event:"currentTime",currentTime:E=e},h&&h.contentWindow&&h.contentWindow.postMessage(JSON.stringify(e),"*"))}}),Object.defineProperty(f,"width",{configurable:!1,enumerable:!1,get:function(){return k}}),Object.defineProperty(f,"videoWidth",{configurable:!1,enumerable:!1,get:function(){return C}}),Object.defineProperty(f,"height",{configurable:!1,enumerable:!1,get:function(){return x}}),Object.defineProperty(f,"videoHeight",{configurable:!1,enumerable:!1,get:function(){return _}}),Object.defineProperty(f,"duration",{configurable:!1,enumerable:!0,get:function(){return T}}),Object.defineProperty(f,"paused",{configurable:!1,enumerable:!0,get:function(){return S}}),Object.defineProperty(f,"aspectRatio",{configurable:!1,enumerable:!0,get:function(){return t},set:function(e){isNaN(e)||e<=0||(t=e,h&&h.contentWindow&&h.contentWindow.postMessage(JSON.stringify({context:"hapyak",event:"aspectRatio",aspectRatio:e}),"*"))}}),Object.defineProperty(f,"pluginData",{configurable:!1,enumerable:!1,get:function(){return A}}),Object.defineProperty(f.loaded,"user",{configurable:!1,enumerable:!1,get:function(){return L.user}}),Object.defineProperty(f.loaded,"track",{configurable:!1,enumerable:!1,get:function(){return L.track}}),Object.defineProperty(f.loaded,"annotations",{configurable:!1,enumerable:!1,get:function(){return L.annotations}}),Object.defineProperty(f,"controlbarheight",{configurable:!1,enumerable:!1,get:function(){return controlbarheight}}),f.toString=function(){return"[object HapyakIframe]"},f},hapyak.embed=function(){hapyak.asset.css(["/css/webfonts/google/raleway/raleway.css","/css/webfonts/font_awesome.css","/css/generated/embed.css","/css/generated/player.css"]);var n=Channel.build({window:window.parent,origin:"*",scope:"bcauth"});const o=new URLSearchParams(window.location.search),e="true"===o.get("edit"),s=o.get("accountId"),i=o.get("projectId"),l=o.get("templateId"),c=o.get("apiHost"),d=o.get("player_parameters"),u=o.get("instance_id"),p=o.get("placeholderSrc"),h=o.get("experience_data");function f(){return new Promise((t,e)=>{n.call({method:"fetchAuthHeader",success:function(e){t(new Headers({authorization:e}))},error:e})})}(e?f().then(function(e){var t=i?`/v1/accounts/${s}/projects/`+i:`/v1/accounts/${s}/templates/`+l;return fetch(`https://${c}${t}?include_template_annotations=`+!!i,{headers:e})}):fetch(`https://${c}/api/accounts/${s}/projects/`+i)).then(function(e){return e.json()}).then(function(e){const t=e.result.data;var e={type:"Project",data:{id:t.id,title:t.title,tags:t.tags}},n={type:"Video",data:{id:t.video_id,source:"brightcove-v2",source_id:t.video_id}},i={type:"Track",data:{id:t.id,isTemplate:!!l,group:s}},r={type:"Comment",data:(t.annotations||[]).concat((t.template_annotations||[]).map().map(e=>({id:e.id,start_time:e.start_time.value,start_time_format:e.start_time.units,duration:e.duration.value,duration_format:e.duration.units,properties:{popcorn:e.properties.popcorn,html:e.properties.html,html_key:e.properties.html_key},custom_configuration:e.properties.custom_configuration,type:e.type,group:s,track:e.isTemplate?"template":t.id,created:e.created_at,modified:e.modified_at}))};const a={accountId:s,dataURI:"https://"+c,edit:"true"===o.get("edit"),embed:!0,fetchAuthHeader:f,keepAnnotationAspectRatio:!0,loadData:[e,n,i,r],logLevel:"info",muted:!1,projectId:t.id,returnPlayerDOM:!0,nativeControls:"true"===o.get("native_controls"),controls:"false"!==o.get("controls"),startInEditMode:"true"===o.get("startInEditMode"),trackId:t.id,user:{membership:{[s]:"editor"}},version:20220818,videoId:t.video_id,placeholderSrc:p,resetVariables:!t.show_questions_once,videoExperienceViewer:hapyak.videoExperienceViewer||!0};t.css_url&&(a.css=t.css_url),a.playerParameters=d?JSON.parse(d):{accountId:s,bcEmbed:"default",bcPlayer:"default"},u&&(a.instanceId=parseInt(u,10)),h&&(a.experienceData=JSON.parse(h)),t.video_id?(a.accountId==a.playerParameters.accountId?Promise.resolve():f().then(function(e){return fetch(`${hapyak.catalogApiUrl}/v1/accounts/${s}/videos/${t.video_id}/clear_sources`,{headers:e}).then(.then(})).then(()=>{hapyak.interactivity(a).then(e=>{document.body.appendChild(e)})}):hapyak.interactivity(a).then(})},hapyak.list=function(t,n){t.videoExperienceViewer=hapyak.videoExperienceViewer||t.videoExperienceViewer,hapyak.config(t),irequire(["promise!configuration"],},hapyak.mixpanelTrackingEventListener=function(e){var t=e.mixpanel||window.mixpanel;return function(e){e.properties["Mixpanel Event Source"]="Hapyak",t.track("HapYak / "+e.event,e.properties)}},hapyak.eloquaTrackingEventListener=function(e){e._elq||window._elq;return function(){}},hapyak.consoleTrackingEventListener=function(){return function(e){e.properties["Mixpanel Event Source"]="Hapyak",window.console&&isFunction(window.console.log)&&window.console.log("HapYak / "+e.event,e.properties)}},hapyak.notifyResize=function(e,t,n){window.postMessage(JSON.stringify({context:"hapyak",event:"notifyResize",width:e,height:t,sync:n}),"*")},hapyak.message=function(){var i={},a={};function n(e,t){e=i[e];e&&e.forEach(function(e){(!e.context||e.context===t.context||t.data&&t.data.customContext===e.context)&&e.callback.apply(window,[t])})}return window.addEventListener("message",function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}t&&"hapyak"===t.context&&n(t.event,t)},!1),{addTargetFrames:function(e,t){e&&t&&t.length&&(a[e]=t)},addEventListener:function(e,t,n){i[e]||(i[e]=[]),t={context:n,callback:t},n||delete t.context,i[e].push(t)},receiveData:function(e){var t;e.addon&&(t=(e=e.addon.split(":")).shift(),n(e.shift(),{context:t,data:e}))},removeEventListener:function(e,t){var n=i[e];n&&(i[e]=n.filter()},send:function(t,e,n){if(e){var i,r={context:"hapyak",data:n,event:e},e=a[n.customContext];try{i=t.contentWindow||t}catch(e){i=t}try{e?e.forEach(:i.postMessage(JSON.stringify(r),"*")}catch(e){}}}}}(),hapyak.addon=function(e,t,n){var i,r={};if(e&&t){for(i in r.actions={},n&&n.length&&hapyak.message.addTargetFrames(e,n),t)"function"==typeof t[i]&&(r.actions[i]=t[i].bind(r),hapyak.message.addEventListener(i,r.actions[i],e));return r.destroy=function(){var e,t=this.actions;for(e in t)hapyak.message.removeEventListener(e,t[e]);this.actions=null},t.init&&"function"==typeof t.init&&t.init(r),r}},!function(){var e,t,n,i=document.getElementsByTagName("script"),i=i[i.length-1],r=i&&i.src.match(/https?:\/\/([^/]+)/i),a=Environment.environments;if(r&&1<r.length){for(n in hapyak.host=r[1],a)a.hasOwnProperty(n)&&(e=a[n]).assetsUrl===r[0]&&(t=e.name);setupUri({environment:t||"production"})}}()}define("hapyak",function(){}),define("promise",[],function(){"use strict";var a=function(e){return!(!e||"object"!=typeof e)&&(!!(window.Promise&&e instanceof Promise)||"function"==typeof e.then)};return{load:function(e,t,r){t([e],function(e){var t,n=function(){r.error.apply(null,arguments)},i=function(){r.apply(null,arguments)};a(e)?(t=e.done||e.then,"function"==typeof e.fail?(t.call(e,i),e.fail(n)):t.call(e,i,n)):r(e)})}}}),define("configuration",[],function(){var i={analytics:{bigquery:{api_key:"593ea2fc799b78acb28ed7d5d544efb0e9400991706f72ed0ce25eb09951229f",exclude:{Load:!0,"Player Action":{Action:"Pause",Type:"Video"}}},customFields:{enabled:!0},google:!1,googleDisabledValuesCopy:"false",localDebug:2,mixpanel:{localDebug:!0},modules:["analytics.bigquery","analytics.ganalytics"],progressInterval:3,realTime:{refreshRate:5e3}},colors:{colors:{chapterExBackgroundTransparency:"0.4",chapterExColorBackground:"0, 0, 0",chapterExListElColorFont:"255, 255, 255",chapterExListElHoverColorFont:"255, 255, 255",chapterExTitleBackgroundTransparency:"0.4",chapterExTitleColorBackground:"0, 0, 0",chapterExTitleColorFont:"255, 255, 255",hotLinkBackgroundColor:"68, 68, 68",hotLinkBackgroundTransparency:"0.6",popBackgroundColor:"68, 68, 68",popBackgroundTransparency:"0.4",popBorderColorBottom:"0, 0, 0",popBorderColorLeft:"0, 0, 0",popBorderColorRight:"0, 0, 0",popBorderColorTop:"0, 0, 0",popBorderThicknessBottom:"0",popBorderThicknessLeft:"0",popBorderThicknessRight:"0",popBorderThicknessTop:"0",popFontColor:"255, 255, 255",quizBackgroundTitleColor:"68, 68, 68",quizBackgroundTransparency:"0.7",quizBorderColor:"68, 68, 68",quizBorderRadius:"3",quizBorderThickness:"3",quizBtnBorderColor:"68, 68, 68",quizCancelBtnBackgroundColor:"255, 255, 255",quizCancelBtnFontColor:"68, 68, 68",quizMainBackgroundColor:"255, 255, 255",quizMainColorFont:"68, 68, 68",quizSubmitBtnBackgroundColor:"68, 68, 68",quizSubmitBtnFontColor:"255, 255, 255",quizTitleColorFont:"255, 255, 255"}},constants:{CONFIGURATION:{ANALYTICS__PROGRESS_INTERVAL:"ANALYTICS__PROGRESS_INTERVAL",HAPYAK_HOSTING__PLACEHOLDER__TRANSCODING_URL:"HAPYAK_HOSTING__PLACEHOLDER__TRANSCODING_URL",PORTAL__BANNER:"PORTAL__BANNER",PORTAL__BRIGHTCOVE__SYNC_POLL_INTERVAL:"PORTAL__BRIGHTCOVE__SYNC_POLL_INTERVAL"},PROVISIONING:{ANNOTATIONS__IFRAME__HTML_TAB:"ANNOTATIONS__IFRAME__HTML_TAB",ANNOTATIONS__IFRAME__URL_TAB:"ANNOTATIONS__IFRAME__URL_TAB",API__ANNOTATION:"API__ANNOTATION",CUSTOM_CSS:"CUSTOM_CSS",EMBED_WHITELIST:"EMBED_WHITELIST",EXPERIENCES__NATIVE_CONTROLS:"EXPERIENCES__NATIVE_CONTROLS",EXPERIENCES__SOCIAL_SHARE:"EXPERIENCES__SOCIAL_SHARE",GEO_SERVICE:"GEO_SERVICE",HAPYAK_API_KEYS__READ:"HAPYAK_API_KEYS__READ",HAPYAK_API_KEYS__REPORTING:"HAPYAK_API_KEYS__REPORTING",HAPYAK_API_KEYS__WRITE:"HAPYAK_API_KEYS__WRITE",HOSTING__ASSET_UPLOAD:"HOSTING__ASSET_UPLOAD",HOSTING__VIDEO:"HOSTING__VIDEO",SAFESTREAM__APPROVAL:"SAFESTREAM__APPROVAL",SAFESTREAM__EMBOSS:"SAFESTREAM__EMBOSS",SETTINGS__ADMIN__INVITE_GROUP_MEMBERS:"SETTINGS__ADMIN__INVITE_GROUP_MEMBERS",SETTINGS__STYLE__NLS:"SETTINGS__STYLE__NLS",SHARE_TYPES__HAPYAK_PLAYER__NATIVE_CONTROLS:"SHARE_TYPES__HAPYAK_PLAYER__NATIVE_CONTROLS",VISUAL_TIMELINE_EDITOR:"VISUAL_TIMELINE_EDITOR"},README:["This object holds constants for accessing provisioning and configuration data. All calls to provisioning and configuration should reference the values in this object.","","CONVENTIONS:","A) All properties should be MIRRORED (key == value)","B) USE ALL CAPS","C) Use single underscore '_' to separate words within a level","D) Use double underscore '__' to separate levels","E) Put in ALPHABETICAL ORDER"]},customReports:{"Debug Date Range":{endpoint:"/api/reports/v2/test-hap-5284",title:"Debug Date Range"},"Success Team - Group Activity Summary":{endpoint:"/api/reports/v2/admin_activity_summary",title:"Success Team - Group Activity Summary"},cben_signin_widget_detail:{endpoint:"/api/reports/v2/cben_signin_widget_detail",filters:["project"],limitDateRangeMonths:12,title:"CBEN Signin Widget Detail"},experience_summary:{endpoint:"/api/reports/v2/experience_summary",limitDateRangeMonths:12,title:"Experience Summary"},leadgen:{endpoint:"/api/reports/v2/aarp_quiz_submits",title:"Lead Generation Report"},like_summary:{endpoint:"/api/reports/v2/like_summary",limitDateRangeMonths:2,title:"Like Summary"},user_responses_new:{endpoint:"/api/reports/v2/user_responses_new",limitDateRangeMonths:12,title:"New User Response Report"},user_stream:{endpoint:"/api/reports/v2/user_stream",limitDateRangeMonths:12,title:"User Activity Stream"}},direct:{CONFIGURATION:{},PROVISIONING:{}},experience:{access_gate:!1,branding:{header:"%3Cdiv%20id%3D%22default-experience-branding-header%22%3E%3Ca%20target%3D%22_blank%22%20class%3D%22default-experience-branding-header-logo%22%20href%3D%22http%3A//corp.hapyak.com%22%3E%3C/a%3E%3C/div%3E"},facebookId:"1066753780099293",transitionImageUrl:"",useDefaultAccessGate:!1},facebook:{appId:"428638473871720"},googleAnalytics:{id:null},hapyak_hosting:{placeholder:{errorUrl:"https://hapyak-hosted-placeholder-videos.s3.amazonaws.com/error.mp4",transcodingUrl:"https://hapyak-hosted-placeholder-videos.s3.amazonaws.com/transcoding.mp4"}},hosting:{widgetHost:"d83bfe882c54e68fdcc512333b5b6c88775e5223.hapyak-hosted.com"},integrations:{brightcove:{accountId:"2335723960001",clientId:"HIDDEN",clientSecret:"HIDDEN",playerId:"bc",xapikey:"HIDDEN"},wistia:!1,wistiaDisabledValuesCopy:""},logging:{level:0},maintenance:{message:"We are experiencing issues connecting to the service. Please wait a moment and try again."},mixpanel:{hapyak:{exclude:{Load:!0,"Player Action":{Action:"Progress",Type:"Video"},"Player View":!0},token:"29f33e43e248a06b4a72a8ee6ff83c68"}},modified:1648734877483,player:{css:void 0,defaults:{bookmark:{mode:"invisible"},contents:{title:"Chapters"},fullScreenPopOut:!0,image:{transitionClass:"hapyak-transition-fade"},pearsonLearningStudioQuizSubmit:{gate:!0},pop:{mode:"black",transitionClass:"hapyak-transition-fade"},quiz:{pause:!0,showResults:!1,showRetry:!1,showReview:!1,showSkip:!0}},facebook:{appId:"1066753780099293"},fullScreenPopOut:!0,gates:!0,iframeTimeout:3e4,logLevel:hapyak.logLevel,minHeight:"0",minWidth:"0",noscale:!0,plugins:{},sharing:!1,stream_error_list:[4,2],tocExpanded:!0,viewer:{controlStyle:"light_bottom"}},portal:{application:{message:""},brightcove:{sync_poll_interval:1e4},connectionTimeout:15e3,embedModal:{embedMode:"embed",hapyakResponsive:!0},exampleProjectId:13011,guides:{branching:{description:"Create powerful storytelling, or allow your audience to seamlessly choose their own path through a playlist of your interactive videos."},chapters:{description:"Increase engagement with an in-video menu to tell your audience whats in the video and let them skip ahead or back to the content they want.",guideUrl:"//hapyak-guides.s3.amazonaws.com/templates/annotations/chapters.html"},lesson:{description:"Lessons enable the HapYak scoring module which can be integrated with 3rd party Learning Manage Systems via the SCORM or LTI standards."},links:{description:"Increase click-through-rate and link to related content with in-video links to any content, synchronized to the video.",guideUrl:"//hapyak-guides.s3.amazonaws.com/templates/annotations/links.html"},playlist:{description:"Group together any videos, from any source, into a playlist that your audience can explore."},questions:{description:"Get direct responses from your audience with in-video questions asked at the exact moment it makes the most sense.",guideUrl:"//hapyak-guides.s3.amazonaws.com/templates/annotations/questions.html"},singleVideoLandingPage:{description:"Easily publish and share your videos with a hosted, branded landing page."},slidesync:{description:"Create a webpage or widget that showcases your interactive videos and synchronizes them to your slide presentations."}},partnerCustomer:{cardDescription:"For further support contact Brightcove support.",cardPicture:"/img/brightcove-support-card.png",cardTitle:"Brightcove Support",contactCTA:"Contact Brightcove",linkTo:"//support.brightcove.com/en/contact/create"},sampleProjectId:157199},provisioning:{addons:{enabled:!0},analytics:{bigquery:!0,google:!0},annotationActions:{advanced:{javascript:!0}},annotationList:!0,annotationTypes:{audio:!1,basic360:!0,bookmark:!0,closedcaptions:!1,drawing:!0,hotlink:!0,iframe:{htmlTab:!0,urlTab:!0},image:!0,ontime:!0,pop:!0,quiz:!0,quizreview:!1,response:!1,social:!1,toc:!0},api:{annotation:!0},assetUpload:!0,cards:{branching:!0,chapters:!0,lesson:!0,links:!0,playlist:!0,questions:!0,singleVideoLandingPage:!0,slidesync:!0},clickSetCss:!0,configPlayerbar:{project:!0},customClassNames:{Black:"MULLINS SPECIAL",Speech:"HappyYaks"},customClasses:!0,customCss:!0,defaults:{zing:{a:!0}},dynamicAnnotations:!0,experiences:{access_gate:!0,branding:!0,cookieComplianceBanner:!0,enabled:!0,layoutTypes:{branching:!0,lesson:!0,live:!0,"single video landing page":!0,slidesync:!0,"video only":!0},nativeControls:!0,socialShare:!0},geo:{enabled:!0},hapyak_api_keys:{read:!0,reporting:!0,write:!0},hosting:{accountmedia:{enabled:!0,type:"wistia"},video:{brightcove:!0,enabled:!0,hapyak_hosting:!0}},integrations:{blackboard:!0,healthstream:!0,vidyard:!0},intercom:!1,multitrack:!0,persistTime:!1,player:{blacklist:{brightcove:!0,dailymotion:!0,dailymotionv5:!0,flowplayer:!0,hapyakhostedplayer:!1,jplayer:!0,jwplayer:!0,mediaelement:!0,mediaplatform:!0,ooyala:!0,theplatform:!1,videojsvr:!1,vrviewer:!1,vzaar:!1}},playlists:!0,randomizedQuiz:!0,realTimeStats:{activeSessions:!0,interactionRate:!0,interactions:!0,people:!0,plays:!0},reports:{core:{chapter_summary:{enabled:!0,endpoint:"/api/reports/v2/chapter_summary",title:"Chapter Summary"},experience_engagement_summary_raw:{enabled:!0,endpoint:"/api/reports/v2/experience_engagement_summary_raw",filters:["experience","project"],title:"Experience Summary"},experience_stream_raw:{enabled:!0,endpoint:"/api/reports/v2/experience_stream_raw",filters:["experience","project"],title:"Experience Stream"},poll_widget_detail:{enabled:!0,endpoint:"/api/reports/v2/poll_widget_detail",title:"Poll Widget Detail"},poll_widget_summary:{enabled:!0,endpoint:"/api/reports/v2/poll_widget_summary",title:"Poll Widget Summary"},project_engagement_summary_raw:{enabled:!0,endpoint:"/api/reports/v2/project_engagement_summary_raw",filters:["project"],title:"Project Summary"},project_stream_raw:{enabled:!0,endpoint:"/api/reports/v2/project_stream_raw",filters:["project"],title:"Project Activity Stream"},signin_widget_detail:{enabled:!0,endpoint:"/api/reports/v2/signin_widget_detail",title:"Signin Widget Detail"},signin_widget_summary:{enabled:!0,endpoint:"/api/reports/v2/signin_widget_summary",title:"Signin Widget Summary"},user_engagement_summary_raw:{enabled:!0,endpoint:"/api/reports/v2/user_engagement_summary_raw",filters:["project"],title:"User Summary"},user_stream_raw:{enabled:!0,endpoint:"/api/reports/v2/user_stream_raw",filters:["project"],title:"User Activity Stream"},widget_user_sentiment_summary:{enabled:!0,endpoint:"/api/reports/v2/widget_user_sentiment_summary",title:" User Sentiment Summary"}},custom:!0},security:{domainRestriction:{whitelist:{workflow:{preReleaseDefault:!0}}}},settings:{admin:{inviteGroupMembers:!0},defaults:!0,sampleTab:!0,style:{nls:!0,styleBuilder:!0}},shareTypes:{embedly:!0,"experience-hapyak-player":!0,"experience-share-to-app":!0,"external-chapters":!0,"hapyak-hosted-player":!0,"hapyak-player":{nativeControls:!0},"landing-page":!0,"native-player":!0,scorm:!0,"share-to-app":!0,vrviewer:!0},sharing:!1,subgroupCreation:{enabled:!0},support:!0,templates:{enabled:!0},transitions:!0,vendorIntegrations:{brightcove:{sync:!0,sync_poll_interval:1e4},youtube:{sync:!0}},visual_timeline_editor:!0,workflows:{basic_approval:!0,enterprise_approval:!0,standard_approval:!0}},resolved:{CONFIGURATION:{ANALYTICS__PROGRESS_INTERVAL:3,HAPYAK_HOSTING__PLACEHOLDER__TRANSCODING_URL:"https://hapyak-hosted-placeholder-videos.s3.amazonaws.com/transcoding.mp4",PORTAL__BANNER:"",PORTAL__BRIGHTCOVE__SYNC_POLL_INTERVAL:1e4},PROVISIONING:{ANNOTATIONS__IFRAME__HTML_TAB:!0,ANNOTATIONS__IFRAME__URL_TAB:!0,API__ANNOTATION:!0,CUSTOM_CSS:!0,EXPERIENCES__NATIVE_CONTROLS:!0,EXPERIENCES__SOCIAL_SHARE:!0,GEO_SERVICE:!0,HAPYAK_API_KEYS__READ:!0,HAPYAK_API_KEYS__REPORTING:!0,HAPYAK_API_KEYS__WRITE:!0,HOSTING__ASSET_UPLOAD:!0,HOSTING__VIDEO:!0,SETTINGS__ADMIN__INVITE_GROUP_MEMBERS:!0,SETTINGS__STYLE__NLS:!0,SHARE_TYPES__HAPYAK_PLAYER__NATIVE_CONTROLS:!0,VISUAL_TIMELINE_EDITOR:!0}},uploads:{host:"hapyak_uploads.s3.amazonaws.com"},watch:{}};return Promise.resolve(async function(){var e=hapyak.accountId&&hapyak.inAuthoringMode,[t,n]=await Promise.all([e&&async function(){return(await fetch(hapyak.resourcesUrl+"/widgets/widgetLibrary.json")).json()}(),async function(){return(await(await fetch(`${hapyak.configurationUrl}/accounts/${hapyak.accountId}/configuration`)).json()).result.data}()]);return e&&(e=t.concat(n.custom_widgets||[]),i.provisioning.widgetLibrary=e,i.provisioning.annotationLibrary=function(t){var n={};for(let e=0;e<t.length;e++)n[t[e].name]=!0;return n}(e)),i.accountCSS=n.custom_css_url||hapyak.resourcesUrl+"/css/brightcove_interactivity_custom_css.css",n.chapter_menu_editor_settings&&(i.player.defaults.contents.mode=n.chapter_menu_editor_settings.initial_style,i.player.defaults.contents.expandedState=n.chapter_menu_editor_settings.initial_menu_state),i.nls=n.nls,i.experiencePlayer=n.experience_player,i.group={id:parseInt(hapyak.accountId)},i}())}),!"undefined"!=typeof window?window:this,function(f,R){ar e=[],d=e.slice,j=e.concat,H=e.push,r=e.indexOf,n={},q=n.toString,z=n.hasOwnProperty,m={},v=f.document,E=F=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,B=/^-ms-/,U=/-([\da-z])/gi;.fn=E.prototype={jquery:"2.1.1",constructor:E,selector:"",length:0,toArray:get:pushStack:each:map:slice:first:function(){return this.eq(0)},last:eq:end:push:H,sort:e.sort,splice:e.splice},E.extend=E.fn.extend=E.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===E.type(e)},isArray:Array.isArray,isWindow:isNumeric:isPlainObject:isEmptyObject:type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[q.call(e)]||"object":typeof e},globalEval:camelCase:nodeName:each:trim:makeArray:inArray:merge:grep:map:guid:1,proxy:now:Date.now,support:m}),E.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),;var e=function(R){ar e,p,w,a,V,h,j,H,E,c,d,f,k,t,m,v,i,r,g,b="sizzle"+-new Date,y=R.document,x=0,q=0,z=ce(),F=ce(),B=ce(),U=n="undefined",W={}.hasOwnProperty,o=[],$=o.pop,Y=o.push,C=o.push,G=o.slice,_=o.indexOf||K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",s="[\\x20\\t\\r\\n\\f]",l="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Q=l.replace("w","w#"),X="\\["+s+"*("+l+")(?:"+s+"*([*^$|!~]?=)"+s+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Q+"))|)"+s+"*\\]",J=":("+l+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+X+")*)|.*)\\)|)",T=new RegExp("^"+s+"+|((?:^|[^\\\\])(?:\\\\.)*)"+s+"+$","g"),Z=new RegExp("^"+s+"*,"+s+"*"),ee=new RegExp("^"+s+"*([>+~]|"+s+")"+s+"*"),te=new RegExp("="+s+"*([^\\]'\"]*?)"+s+"*\\]","g"),ne=new RegExp(J),ie=new RegExp("^"+Q+"$"),S={ID:new RegExp("^#("+l+")"),CLASS:new RegExp("^\\.("+l+")"),TAG:new RegExp("^("+l.replace("w","w*")+")"),ATTR:new RegExp("^"+X),PSEUDO:new RegExp("^"+J),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+s+"*(even|odd|(([+-]|)(\\d*)n|)"+s+"*(?:([+-]|)"+s+"*(\\d+)|))"+s+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+s+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+s+"*((?:-\\d)?\\d*)"+s+"*\\)|)(?=[^-]|$)","i")},re=/^(?:input|select|textarea|button)$/i,ae=/^h\d$/i,A=/^[^{]+\{\s*\[native \w/,oe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,se=/[+~]/,le=/'|\\/g,P=new RegExp("\\\\([\\da-f]{1,6}"+s+"?|("+s+")|.)","ig");try{C.apply(o=G.call(y.childNodes),y.childNodes),o[y.childNodes.length].nodeType}catch(e){C={apply:o.length?} p=I.support={},V=I.isXML=f=I.setDocument=function(e){var l=e?e.ownerDocument||e:y,e=l.defaultView;return l!==k&&9===l.nodeType&&l.documentElement?(t=(k=l).documentElement,m=!V(l),e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",function(){f()},!1):e.attachEvent&&e.attachEvent("onunload",function(){f()})),p.attributes=D(,p.getElementsByTagName=D(,p.getElementsByClassName=A.test(l.getElementsByClassName)&&D(,p.getById=D(,p.getById?(w.find.ID=w.filter.ID=:(delete w.find.ID,w.filter.ID=,w.find.TAG=p.getElementsByTagName?w.find.CLASS=p.getElementsByClassName&&i=[],v=[],(p.qsa=A.test(l.querySelectorAll))&&(D(,D(),(p.matchesSelector=A.test(r=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.msMatchesSelector))&&D(,v=v.length&&new RegExp(v.join("|")),i=i.length&&new RegExp(i.join("|")),e=A.test(t.compareDocumentPosition),g=e||A.test(t.contains)?U=e?l):k},I.matches=I.matchesSelector=I.contains=I.attr=I.error=I.uniqueSort=a=I.getText=(w=I.selectors={cacheLength:50,createPseudo:L,match:S,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:CHILD:PSEUDO:,filter:{TAG:CLASS:ATTR:CHILD:PSEUDO:,pseudos:{not:L(,has:L(,contains:L(,lang:L(,target:root:function(e){return e===t},focus:enabled:function(e){return!1===e.disabled},disabled:checked:selected:empty:parent:header:function(e){return ae.test(e.nodeName)},input:function(e){return re.test(e.nodeName)},button:text:first:O(function(){return[0]}),last:O(,eq:O(,even:O(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:O(,lt:O(,gt:O(}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[e]=e);for(e in{submit:!0,reset:!0})w.pseudos[e]=e);function he(){} he.prototype=w.filters=w.pseudos,w.setFilters=new he,h=I.tokenize=j=I.compile=H=I.select=p.sortStable=b.split("").sort(U).join("")===b,p.detectDuplicates=!!d,f(),p.sortDetached=D(,D(||de("type|href|height|width",,p.attributes&&D(||de("value",,D(||de(K,,I}(f),$=(E.find=e,E.expr=e.selectors,E.expr[":"]=E.expr.pseudos,E.unique=e.uniqueSort,E.text=e.getText,E.isXMLDoc=e.isXML,E.contains=e.contains,E.expr.match.needsContext),Y=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,G=/^.[^:#\[\.,]*$/;.filter=E.fn.extend({find:filter:function(e){return this.pushStack(K(this,e||[],!1))},not:is:);var a,Q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,X=((E.fn.init=.prototype=E.fn,a=E(v),/^(?:parents|prev(?:Until|All))/),J={children:!0,contents:!0,next:!0,prev:!0};.extend({dir:sibling:),E.fn.extend({has:closest:index:add:addBack:),E.each({parent:parents:function(e){return E.dir(e,"parentNode")},parentsUntil:function(e,t,n){return E.dir(e,"parentNode",n)},next:function(e){return Z(e,"nextSibling")},prev:nextAll:function(e){return E.dir(e,"nextSibling")},prevAll:nextUntil:function(e,t,n){return E.dir(e,"nextSibling",n)},prevUntil:siblings:children:contents:,;var t,k=/\S+/g,ee={};.Callbacks=E.extend({Deferred:when:),E.fn.ready=E.extend({isReady:!1,readyWait:1,holdReady:ready:),E.ready.promise=E.ready.promise();var s=E.access=.acceptData=o.uid=1,o.accepts=E.acceptData,o.prototype={key:set:get:access:remove:hasData:discard:;var g=new o,l=new o,te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ne=/([A-Z])/g;.extend({hasData:data:function(e,t,n){return l.access(e,t,n)},removeData:function(e,t){l.remove(e,t)},_data:function(e,t,n){return g.access(e,t,n)},_removeData:function(e,t){g.remove(e,t)}}),E.fn.extend({data:removeData:function(e){return this.each(function(){l.remove(this,e)})}}),E.extend({queue:dequeue:_queueHooks:),E.fn.extend({queue:dequeue:function(e){return this.each(function(){E.dequeue(this,e)})},clearQueue:promise:);ar e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,c=["Top","Right","Bottom","Left"],re=/^(?:checkbox|radio)$/i,b=(I=v.createDocumentFragment().appendChild(v.createElement("div")),(P=v.createElement("input")).setAttribute("type","radio"),P.setAttribute("checked","checked"),P.setAttribute("name","t"),I.appendChild(P),m.checkClone=I.cloneNode(!0).cloneNode(!0).lastChild.checked,I.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!I.cloneNode(!0).lastChild.defaultValue,"undefined"),ae=(m.focusinBubbles="onfocusin"in f,/^key/),oe=/^(?:mouse|pointer|contextmenu)|click/,se=/^(?:focusinfocus|focusoutblur)$/,le=/^([^.]*)(?:\.(.+)|)$/;function u(){return!0}unction ce(){try{return v.activeElement}catch(e){}}E.event={global:{},add:remove:trigger:dispatch:handlers:props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:,mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:,fix:special:{load:{noBubble:!0},focus:{trigger:delegateType:"focusin"},blur:{trigger:delegateType:"focusout"},click:{trigger:_default:,beforeunload:{postDispatch:},simulate:,E.removeEvent=E.Event=E.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&e.preventDefault&&e.preventDefault()},stopPropagation:stopImmediatePropagation:,E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},,m.focusinBubbles||E.each({focus:"focusin",blur:"focusout"},,E.fn.extend({on:one:off:trigger:triggerHandler:);var de=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ue=/<([\w:]+)/,pe=/<|&#?\w+;/,he=/<(?:script|style|link)/i,fe=/checked\s*(?:[^=]|=\s*.checked.)/i,me=/^$|\/(?:java|ecma)script/i,ve=/^true\/(.*)/,ge=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,h={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};roup=h.option,h.tbody=h.tfoot=h.colgroup=h.caption=h.thead,h.th=h.td,E.extend({clone:buildFragment:cleanData:),E.fn.extend({text:append:prepend:before:after:remove:empty:clone:html:replaceWith:detach:domManip:),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},;var xe,Ce={}; Ae,Pe,x,C,_,Ie=/^margin/,Le=new RegExp("^("+e+")(?!px)[a-z%]+$","i");.documentElement,C=v.createElement("div"),(_=v.createElement("div")).style&&(_.style.backgroundClip="content-box",_.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===_.style.backgroundClip,C.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",C.appendChild(_),f.getComputedStyle&&E.extend(m,{pixelPosition:boxSizingReliable:reliableMarginRight:)),E.swap=var Me=/^(none|table(?!-c[ea]).+)/,Ne=new RegExp("^("+e+")(.*)$","i"),Re=new RegExp("^([+-])=("+e+")","i"),Ve={position:"absolute",visibility:"hidden",display:"block"},je={letterSpacing:"0",fontWeight:"400"},He=["Webkit","O","Moz","ms"];nd({cssHooks:{opacity:{get:},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:css:),E.each(["height","width"],,E.cssHooks.marginRight=De(m.reliableMarginRight,,E.each({margin:"",padding:"",border:"Width"},,E.fn.extend({css:show:hide:function(){return Ue(this)},toggle:),((E.Tween=S).prototype={constructor:S,init:cur:run:).init.prototype=S.prototype,(S.propHooks={_default:{get:set:}).scrollTop=S.propHooks.scrollLeft={set:,E.easing={linear:function(e){return e},swing:,E.fx=S.prototype.init,E.fx.step={};var A,We,P,I,$e=/^(?:toggle|show|hide)$/,Ye=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),Ge=/queueHooks$/,Ke=[,L={"*":[};imation=E.extend(Ze,{tweener:prefilter:),E.speed=E.fn.extend({fadeTo:animate:stop:finish:),E.each(["toggle","show","hide"],,E.each({slideDown:Xe("show"),slideUp:Xe("hide"),slideToggle:Xe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},,E.timers=[],E.fx.tick=E.fx.timer=E.fx.interval=13,E.fx.start=E.fx.stop=E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=P=v.createElement("input"),I=v.createElement("select"),e=I.appendChild(v.createElement("option")),P.type="checkbox",m.checkOn=""!==P.value,m.optSelected=e.selected,I.disabled=!0,m.optDisabled=!e.disabled,(P=v.createElement("input")).value="t",P.type="radio",m.radioValue="t"===P.value;var et,D=E.expr.attrHandle,tt=(E.fn.extend({attr:function(e,t){return s(this,E.attr,e,t,1<arguments.length)},removeAttr:),E.extend({attr:removeAttr:attrHooks:{type:{set:}}),et={set:,E.each(E.expr.match.bool.source.match(/\w+/g),,/^(?:input|select|textarea|button)$/i),nt=(E.fn.extend({prop:removeProp:),E.extend({propFix:{for:"htmlFor",class:"className"},prop:propHooks:{tabIndex:{get:}}),m.optSelected||(E.propHooks.selected={get:),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],,/[\t\r\n\f]/g),it=(E.fn.extend({addClass:removeClass:toggleClass:hasClass:),/\r/g),rt=(E.fn.extend({val:),E.extend({valHooks:{option:{get:,select:{get:set:}}),E.each(["radio","checkbox"],,E.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),,E.fn.extend({hover:bind:unbind:delegate:undelegate:),E.now()),at=/\?/;E.parseJSON=E.parseXML=var O,M,ot=/#.*$/,st=/([?&])_=[^&]*/,lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ct=/^(?:GET|HEAD)$/,dt=/^\/\//,ut=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,pt={},ht={},ft="*/".concat("*");try{M=location.href}catch(e){(M=v.createElement("a")).href="",M=M.href}t.exec(M.toLowerCase())||[],E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:M,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(O[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":E.parseJSON,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:ajaxPrefilter:mt(pt),ajaxTransport:mt(ht),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,c,d,n,u,p,i,h=E.ajaxSetup({},t=t||{}),f=h.context||h,m=h.context&&(f.nodeType||f.jquery)?E(f):E.event,v=E.Deferred(),g=E.Callbacks("once memory"),y=h.statusCode||{},r={},a={},b=0,o="canceled",w={readyState:0,getResponseHeader:getAllResponseHeaders:setRequestHeader:overrideMimeType:statusCode:abort:;if(v.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,h.url=((e||h.url||M)+"").replace(ot,"").replace(dt,O[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=E.trim(h.dataType||"*").toLowerCase().match(k)||[""],null==h.crossDomain&&(e=ut.exec(h.url.toLowerCase()),h.crossDomain=!(!e||e[1]===O[1]&&e[2]===O[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(O[3]||("http:"===O[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=E.param(h.data,h.traditional)),vt(pt,h,t,w),2!==b){for(i in(p=h.global)&&0==E.active++&&E.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!ct.test(h.type),c=h.url,h.hasContent||(h.data&&(c=h.url+=(at.test(c)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=st.test(c)?c.replace(st,"$1_="+rt++):c+(at.test(c)?"&":"?")+"_="+rt++)),h.ifModified&&(E.lastModified[c]&&w.setRequestHeader("If-Modified-Since",E.lastModified[c]),E.etag[c]&&w.setRequestHeader("If-None-Match",E.etag[c])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+ft+"; q=0.01":""):h.accepts["*"]),h.headers)w.setRequestHeader(i,h.headers[i]);if(h.beforeSend&&(!1===h.beforeSend.call(f,w,h)||2===b))return w.abort();for(i in o="abort",{success:1,error:1,complete:1})w[i](h[i]);if(l=vt(ht,h,t,w)){w.readyState=1,p&&m.trigger("ajaxSend",[w,h]),h.async&&0<h.timeout&&(u=setTimeout(function(){w.abort("timeout")},h.timeout));try{b=1,l.send(r,s)}catch(e){if(!(b<2))throw e;s(-1,e)}}else s(-1,"No Transport")}return w;,getJSON:getScript:),E.each(["get","post"],,E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],,E._evalUrl=E.fn.extend({wrapAll:wrapInner:wrap:unwrap:),E.expr.filters.hidden=E.expr.filters.visible=var yt=/%20/g,bt=/\[\]$/,wt=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;E.param=E.fn.extend({serialize:serializeArray:),E.ajaxSettings.xhr=var xt=0,Ct={},_t={0:200,1223:204},N=E.ajaxSettings.xhr(),Tt=(f.ActiveXObject&&E(f).on("unload",,m.cors=!!N&&"withCredentials"in N,m.ajax=N=!!N,E.ajaxTransport(,E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":}),E.ajaxPrefilter(,E.ajaxPrefilter("script",,E.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(e,t){(i=E("<script>").prop({async:!0,charset:n.scriptCharset,src:n.url}).on("load error",r=)[0].setAttribute("importance","high"),v.head.appendChild(i[0])},abort:function(){r&&r()}}}),[]),St=/(=)\?(?=&|$)|\?\?/,At=(E.ajaxSetup({jsonp:"callback",jsonpCallback:),E.ajaxPrefilter("json jsonp",,E.parseHTML=E.fn.load),Pt=(E.fn.load=E.expr.filters.animated=f.document.documentElement);.offset={setOffset:,E.fn.extend({offset:position:offsetParent:),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},,E.each(["top","left"],,E.each({Height:"height",Width:"width"},,E.fn.size=function(){return this.length},E.fn.andSelf=E.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return E});var Lt=f.jQuery,Dt=f.$;return E.noConflict=typeof R==b&&(f.jQuery=f.$=E),E}),"undefined"!=typeof hapyak&&(hapyak.jQueryExists=!!window.jQuery),define("jquery.noconflict",["jquery","module"],function(e,t){"use strict";var n,i,r,s,l;t.config();return e.uaMatch=t={},(n=e.uaMatch(navigator.userAgent)).browser&&(t[n.browser]=!0,t.version=n.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),e.browser=t,!e.support.cors&&window.XDomainRequest&&(i=/^https?:\/\//i,r=/^get|post$/i,s=new RegExp("^"+location.protocol,"i"),l=/\/xml/i,e.ajaxTransport("text html xml json",function(t,n,e){var a,o;if(t.crossDomain&&t.async&&r.test(t.type)&&i.test(n.url)&&s.test(n.url))return a=null,o=(n.dataType||"").toLowerCase(),{send:function(e,r){a=new XDomainRequest,/^\d+$/.test(n.timeout)&&(a.timeout=n.timeout),a.ontimeout=a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,t={code:200,message:"success"},n={text:a.responseText};try{if("json"===o)try{n.json=JSON.parse(a.responseText)}catch(e){t.code=500,t.message="parseerror"}else if("xml"===o||"text"!==o&&l.test(a.contentType)){var i=new ActiveXObject("Microsoft.XMLDOM");i.async=!1;try{i.loadXML(a.responseText)}catch(e){i=void 0}if(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror",new Error("Invalid XML: "+a.responseText);n.xml=i}}catch(e){throw e}finally{r(t.code,t.message,n,e)}},a.onerror=a.open(t.type,t.url),a.send()},abort:function(){a&&a.abort()}}})),n={imports:{jQuery:e}},"undefined"!=typeof window&&(void 0===window.Ember?window.Ember=n:void 0!==window.Ember&&window.Ember.hasOwnProperty("imports")?window.Ember.imports.jQuery=n.imports.jQuery:window.Ember.imports=n.imports,window.Ember.$=n.imports.jQuery),/^[\w\.]+brightcove\.com/.test(window.location.host)?e:hapyak.jQueryExists?e.noConflict(!0):e.noConflict()});var Handlebars=function(){var c=),p=function(){"use strict";var e={},t=c,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,r=/[&<>"'`]/;.extend=var o=Object.prototype.toString,s=(e.toString=o,function(e){return"function"==typeof e}),l=(s(/x/)&&(s=,e.isFunction=s,Array.isArray||;return e.isArray=l,e.escapeExpression=function(e){return e instanceof t?e.toString():e||0===e?r.test(e=""+e)?e.replace(i,a):e:""},e.isEmpty=e}(),h=function(){"use strict";var a=["description","fileName","lineNumber","message","name","number","stack"];function e(e,t){t&&t.firstLine&&(e+=" - "+(n=t.firstLine)+":"+t.firstColumn);for(var n,i=Error.prototype.constructor.call(this,e),r=0;r<a.length;r++)this[a[r]]=i[a[r]];n&&(this.lineNumber=n,this.column=t.firstColumn)}return e.prototype=new Error,e}(),d=function(){"use strict";var e={},i=p,a=h,c=(e.VERSION="1.3.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},i.isArray),d=i.isFunction,r=i.toString,o="[object Object]";function t(e,t){var r;this.helpers=e||{},this.partials=t||{},(r=this).registerHelper("helperMissing",,r.registerHelper("blockHelperMissing",function(e,t){var n=t.inverse||function(){},i=t.fn;return!0===(e=d(e)?e.call(this):e)?i(this):!1===e||null==e?n(this):c(e)?0<e.length?r.helpers.each(e,t):n(this):i(e)}),r.registerHelper("each",function(e,t){var n,i=t.fn,r=t.inverse,a=0,o="";if(d(e)&&(e=e.call(this)),t.data&&(n=u(t.data)),e&&"object"==typeof e)if(c(e))for(var s=e.length;a<s;a++)n&&(n.index=a,n.first=0===a,n.last=a===e.length-1),o+=i(e[a],{data:n});else for(var l in e)e.hasOwnProperty(l)&&(n&&(n.key=l,n.index=a,n.first=0===a),o+=i(e[l],{data:n}),a++);return o=0===a?r(this):o}),r.registerHelper("if",,r.registerHelper("unless",,r.registerHelper("with",,r.registerHelper("log",function(e,t){t=t.data&&null!=t.data.level?parseInt(t.data.level,10):1;r.log(t,e)})}(e.HandlebarsEnvironment=t).prototype={constructor:t,logger:n,log:s,registerHelper:registerPartial:;var n={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){n.level<=e&&(e=n.methodMap[e],"undefined"!=typeof console&&console[e]&&console[e].call(console,t))}};.logger=n,e.log=s;var u=return e.createFrame=u,e}(),s=function(){"use strict";var e={},i=p,l=h,r=d.COMPILER_REVISION,a=d.REVISION_CHANGES;function c(e,n,i){function t(e,t){return n(e,(t=t||{}).data||i)}return t.program=e,t.depth=0,t}return e.checkRevision=function(e){var t,n=e&&e[0]||1;if(n!==r)throw n<r?(t=a[r],n=a[n],new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+t+") or downgrade your runtime to an older version ("+n+").")):new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},e.template=function(a,s){var o;if(s)return o={escapeExpression:i.escapeExpression,invokePartial:function(e,t,n,i,r,a){var o=s.VM.invokePartial.apply(this,arguments);if(null!=o)return o;if(s.compile)return o={helpers:i,partials:r,data:a},r[t]=s.compile(e,{data:void 0!==a},s),r[t](n,o);throw new l("The partial "+t+" could not be compiled when running in runtime-only mode")},programs:[],program:function(e,t,n){var i=this.programs[e];return i=n?c(e,t,n):i||(this.programs[e]=c(e,t))},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(i.extend(n={},t),i.extend(n,e)),n},programWithDepth:s.VM.programWithDepth,noop:s.VM.noop,compilerInfo:null},function(e,t){var n,i,r=(t=t||{}).partial?t:s,r=(t.partial||(n=t.helpers,i=t.partials),a.call(o,r,e,n,i,t.data));return t.partial||s.VM.checkRevision(o.compilerInfo),r};throw new l("No environment passed to template")},e.programWithDepth=function(e,n,i){function t(e,t){return n.apply(this,[e,(t=t||{}).data||i].concat(r))}var r=Array.prototype.slice.call(arguments,3);return t.program=e,t.depth=r.length,t},e.program=c,e.invokePartial=function(e,t,n,i,r,a){if(i={partial:!0,helpers:i,partials:r,data:a},void 0===e)throw new l("The partial "+t+" could not be found");if(e instanceof Function)return e(n,i)},e.noop=function(){return""},e}(),n=function(){"use strict";function e(){var t=new n.HandlebarsEnvironment;return a.extend(t,n),t.SafeString=i,t.Exception=r,t.Utils=a,t.VM=o,t.template=function(e){return o.template(e,t)},t}var n=d,i=c,r=h,a=p,o=s,t=e();return t.create=e,t}(),u=function(){"use strict";var l=h;function c(e){this.firstLine=(e=e||{}).first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var a={ProgramNode:function(e,t,n,i){3===arguments.length?(i=n,n=null):2===arguments.length&&(i=t,t=null),c.call(this,i),this.type="program",this.statements=e,this.strip={},n?((i=n[0])?(e={first_line:i.firstLine,last_line:i.lastLine,last_column:i.lastColumn,first_column:i.firstColumn},this.inverse=new a.ProgramNode(n,t,e)):this.inverse=new a.ProgramNode(n,t),this.strip.right=t.left):t&&(this.strip.left=t.right)},MustacheNode:function(e,t,n,i,r){c.call(this,r),this.type="mustache",this.strip=i,null!=n&&n.charAt?(r=n.charAt(3)||n.charAt(2),this.escaped="{"!==r&&"&"!==r):this.escaped=!!n,e instanceof a.SexprNode?this.sexpr=e:this.sexpr=new a.SexprNode(e,t),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,n){c.call(this,n),this.type="sexpr",this.hash=t;n=this.id=e[0],e=this.params=e.slice(1),n=this.eligibleHelper=n.isSimple;this.isHelper=n&&(e.length||t)},PartialNode:BlockNode:ContentNode:function(e,t){c.call(this,t),this.type="content",this.string=e},HashNode:function(e,t){c.call(this,t),this.type="hash",this.pairs=e},IdNode:function(e,t){c.call(this,t),this.type="ID";for(var n="",i=[],r=0,a=0,o=e.length;a<o;a++){var s=e[a].part;if(n+=(e[a].separator||"")+s,".."===s||"."===s||"this"===s){if(0<i.length)throw new l("Invalid path: "+n,this);".."===s?r++:this.isScoped=!0}else i.push(s)}this.original=n,this.parts=i,this.string=i.join("."),this.depth=r,this.isSimple=1===e.length&&!this.isScoped&&0===r,this.stringModeValue=this.string},PartialNameNode:DataNode:function(e,t){c.call(this,t),this.type="DATA",this.id=e},StringNode:IntegerNode:BooleanNode:CommentNode:;return a}(),i=function(){"use strict";var e;turn(e={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:parse:).lexer={EOF:1,parseError:setInput:input:unput:more:function(){return this._more=!0,this},less:pastInput:upcomingInput:showPosition:next:lex:begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}}},new((t.prototype=e).Parser=t)}(),f=function(){"use strict";var e={},t=i,n=u;return e.parser=t,e.parse=e}(),m=function(){"use strict";var e={},s=h;function t(){}return(e.Compiler=t).prototype={compiler:t,disassemble:function(){for(var e,t,n=this.opcodes,i=[],r=0,a=n.length;r<a;r++)if("DECLARE"===(e=n[r]).opcode)i.push("DECLARE "+e.name+"="+e.value);else{for(var o=[],s=0;s<e.args.length;s++)"string"==typeof(t=e.args[s])&&(t='"'+t.replace("\n","\\n")+'"'),o.push(t);i.push(e.opcode+" "+o.join(" "))}return i.join("\n")},equals:guid:0,compile:accept:function(e){var t=e.strip||{};return t.left&&this.opcode("strip"),e=this[e.type](e),t.right&&this.opcode("strip"),e},program:compileProgram:block:function(e){var t=e.mustache,n=e.program,e=e.inverse,n=n&&this.compileProgram(n),e=e&&this.compileProgram(e),t=t.sexpr,i=this.classifySexpr(t);"helper"===i?this.helperSexpr(t,n,e):"simple"===i?(this.simpleSexpr(t),this.opcode("pushProgram",n),this.opcode("pushProgram",e),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(t,n,e),this.opcode("pushProgram",n),this.opcode("pushProgram",e),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:partial:content:function(e){this.opcode("appendContent",e.string)},mustache:ambiguousSexpr:simpleSexpr:function(e){e=e.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){t=this.setupFullMustacheParams(e,t,n),n=e.id.parts[0];if(this.options.knownHelpers[n])this.opcode("invokeKnownHelper",t.length,n);else{if(this.options.knownHelpersOnly)throw new s("You specified knownHelpersOnly, but used the unknown helper "+n,e);this.opcode("invokeHelper",t.length,n,e.isRoot)}},sexpr:ID:DATA:STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:comment:function(){},opcode:declare:addDepth:function(e){0===e||this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;return n&&!t&&(e=e.id.parts[0],i.knownHelpers[e]?t=!0:i.knownHelpersOnly&&(n=!1)),t?"helper":n?"ambiguous":"simple"},pushParams:setupFullMustacheParams:,e.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);return"data"in(t=t||{})||(t.data=!0),e=n.parse(e),e=(new n.Compiler).compile(e,t),(new n.JavaScriptCompiler).compile(e,t)},e.compile=function(i,r,a){if(null==i||"string"!=typeof i&&i.constructor!==a.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+i);var o;return"data"in(r=r||{})||(r.data=!0),function(e,t){var n;return o||(n=a.parse(i),n=(new a.Compiler).compile(n,r),n=(new a.JavaScriptCompiler).compile(n,r,void 0,!0),o=a.template(n)),o.call(this,e,t)}},e}(),v=function(){"use strict";var e=d.COMPILER_REVISION,t=d.REVISION_CHANGES,s=d.log,l=h;function c(e){this.value=e}function i(){}i.prototype={nameLookup:function(e,t){var n;return 0===e.indexOf("depth")&&(n=!0),t=/^[0-9]+$/.test(t)?e+"["+t+"]":i.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",n?"("+e+" && "+t+")":t},compilerInfo:appendToBuffer:initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:preamble:function(){var e,t,n=[];this.isChild?n.push(""):(t="helpers = this.merge(helpers, "+(e=this.namespace)+".helpers);",this.environment.usePartial&&(t=t+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(t+=" data = data || {};"),n.push(t)),this.environment.isSimple?n.push(""):n.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=n},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(0<t.length&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,a=this.environment.depths.list.length;r<a;r++)i.push("depth"+this.environment.depths.list[r]);t=this.mergeSource();return this.isChild||(t=this.compilerInfo()+t),e?(i.push(t),Function.apply(this,i)):(e="function "+(this.name||"")+"("+i.join(",")+") {\n  "+t+"}",s("debug",e+"\n\n"),e)},mergeSource:blockValue:ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"],t=(this.setupParams(0,e),this.topStack());e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:strip:append:appendEscaped:getContext:lookupOnContext:pushContext:resolvePossibleLambda:lookup:lookupData:function(){this.pushStackLiteral("data")},pushStringParam:emptyHash:pushHash:popHash:pushString:push:pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");e=this.lastHelper=this.setupHelper(e,t,!0),t=this.nameLookup("depth"+this.lastContext,t,"context"),t="helper = "+e.name+" || "+t;e.paramsInit&&(t+=","+e.paramsInit),this.push("("+t+",helper ? helper.call("+e.callParams+") : helperMissing.call("+e.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(e,t){e=this.setupHelper(e,t);this.push(e.name+".call("+e.callParams+")")},invokeAmbiguous:invokePartial:function(e){e=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(e){var t,n,i=this.popStack(),r=(this.options.stringParams&&(n=this.popStack(),t=this.popStack()),this.hash);t&&r.contexts.push("'"+e+"': "+t),n&&r.types.push("'"+e+"': "+n),r.values.push("'"+e+"': ("+i+")")},compiler:i,compileChildren:function(e,t){for(var n=e.children,i=0,r=n.length;i<r;i++){var a=n[i],o=new this.compiler,s=this.matchExistingProgram(a);null==s?(this.context.programs.push(""),s=this.context.programs.length,a.index=s,a.name="program"+s,this.context.programs[s]=o.compile(a,t,this.context),this.context.environments[s]=a):(a.index=s,a.name="program"+s)}},matchExistingProgram:programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,e=this.environment.children[e],n=e.depths.list,i=[e.index,e.name,"data"],r=0,a=n.length;r<a;r++)t=n[r],i.push(1===t?"depth0":"depth"+(t-1));return(0===n.length?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:useRegister:pushStackLiteral:pushSource:pushStack:replaceStack:function(e){var t,n,i,r,a="",o=this.isInline(),s=(o?(n=this.popStack(!0))instanceof c?(r=n.value,t=!0):(s=(i=!this.stackSlot)?this.incrStack():this.topStackName(),a="("+this.push(s)+" = "+n+"),",r=this.topStack()):r=this.topStack(),e.call(this,r));return o?(t||this.popStack(),i&&this.stackSlot--,this.push("("+a+s+")")):(/^stack/.test(r)||(r=this.nextStack()),this.pushSource(r+" = ("+a+s+");")),r},nextStack:function(){return this.pushStack()},incrStack:topStackName:function(){return"stack"+this.stackSlot},flushInline:isInline:function(){return this.inlineStack.length},popStack:topStack:quotedString:setupHelper:setupOptions:setupParams:function(e,t,n){e="{"+this.setupOptions(e,t).join(",")+"}";return n?(this.useRegister("options"),t.push("options"),"options="+e):(t.push(e),"")}};for(var n="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),r=i.RESERVED_WORDS={},a=0,o=n.length;a<o;a++)r[n[a]]=!0;return i.isValidJavaScriptVariableName=i}();return function(){"use strict";function e(){var n=d();return n.compile=function(e,t){return s(e,t,n)},n.precompile=function(e,t){return l(e,t,n)},n.AST=i,n.Compiler=o,n.JavaScriptCompiler=c,n.Parser=r,n.parse=a,n}var t=n,i=u,r=f.parser,a=f.parse,o=m.Compiler,s=m.compile,l=m.precompile,c=v,d=t.create;return(t=e()).create=e,t}()}();efine("handlebars",function(e){return function(){return e.Handlebars}}(this)),"undefined"==typeof Ember&&(Ember={},"undefined"!=typeof window&&(window.Em=window.Ember=Em=Ember)),Ember.ENV||("undefined"!=typeof EmberENV?Ember.ENV=EmberENV:Ember.ENV=void 0!==ENV?ENV:{}),"MANDATORY_SETTER"in Ember.ENV||(Ember.ENV.MANDATORY_SETTER=!0),Ember.assert=function(e,t){if(!t)throw new Ember.Error("Assertion Failed: "+e)},Ember.warn=function(e,t){t||(Ember.Logger.warn("WARNING: "+e),"trace"in Ember.Logger&&Ember.Logger.trace())},Ember.debug=Ember.deprecate=function(e,t){if(!Ember.TESTING_DEPRECATION&&!(t=1===arguments.length?!1:t)){if(Ember.ENV.RAISE_ON_DEPRECATION)throw new Ember.Error(e);var n,i;try{__fail__.fail()}catch(e){n=e}Ember.LOG_STACKTRACE_ON_DEPRECATION&&n.stack&&(n.arguments?(i=n.stack.replace(/^\s+at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}($1)").split("\n")).shift():i=n.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n"),e+="\n    "+i.slice(2).join("\n    ")),Ember.Logger.warn("DEPRECATION: "+e)}},Ember.deprecateFunc=function(e,t){return function(){return Ember.deprecate(e),t.apply(this,arguments)}},Ember.testing||"undefined"!=typeof window&&window.chrome&&window.addEventListener&&window.addEventListener("load",function(){document.body&&document.body.dataset&&!document.body.dataset.emberExtension&&Ember.debug("For more advanced debugging, install the Ember Inspector from https://chrome.google.com/webstore/detail/ember-inspector/bmdblncegkenkacieihfhpjfppoconhi")},!1),!function(){var s,R,V,j,H,q,z,F,B,U,W,$,Y,G,K,Q,X,J,Z,ee,te,ne,ie,re,ae,oe,se,le,ce,de,ue,pe,he,fe,me,ve,ge,ye,be,we,Ee,ke,xe,Ce,_e,Te,Se,Ae,Pe,Ie,Le,De,Oe,Me,Ne,Re,Ve,je,He,qe,a,ze,Fe,Be,Ue,We,$e,Ye,Ge,Ke,Qe,Xe,Je,Ze,et,tt,nt,it,rt,at,ot,st,lt,ct,dt,ut,pt,ht,ft,mt,vt,gt,yt,bt,wt,Et,kt,xt,Ct,_t,Tt,St,At,Pt,It,Lt,Dt,r,Ot,Mt,Nt,Rt,Vt,jt,Ht,qt,zt,Ft,Bt,Ut,Wt,$t,y,Yt,Gt,Kt,Qt,Xt,o,Jt,Zt,en,tn,nn,rn,an,on,n,sn,ln,cn,dn,un,pn,hn,fn,mn,vn,gn,yn,bn,wn,En,kn,xn,Cn,_n,Tn,Sn,An,Pn,In,Ln,Dn,On,Mn,Nn,Rn,Vn,jn,Hn,qn,zn,Fn,Bn,Un,Wn,$n,Yn,Gn,Kn,i,Qn,Xn,Jn,Zn,ei,ti,ni,ii,ri,ai,oi,si,li,ci,di,ui,pi,hi,fi,mi,vi,gi,yi,bi,c,wi,Ei,ki,xi,l,Ci,_i,Ti,Si,Ai,Pi,Ii,Li,Di,Oi,Mi,Ni,Ri,Vi,m,ji,Hi,qi,zi,Fi,Bi,Ui,Wi,d,u,$i,Yi,Gi,Ki,Qi,Xi,Ji,Zi,er,tr,nr,ir,rr,ar,or,sr,lr,cr,dr,ur,pr,hr,fr,mr,vr,gr,yr,br,p,wr,Er,kr,xr,Cr,_r,Tr,Sr,h,f,Ar,Pr,Ir,Lr,Dr,Or,Mr,Nr,Rr,Vr,jr,Hr,qr,zr,Fr,Br,Ur,Wr,$r,v,Yr,Gr,Kr,g,Qr,Xr,b,Jr,Zr,ea,ta,na,ia,ra,aa,oa,w,sa,la,ca,da,ua,pa,ha,fa,ma,E,va,ga,ya,ba,wa,Ea,ka,xa,Ca,_a,Ta,k,Sa,Aa,Pa,Ia,La,Da,x,Oa,Ma,Na,Ra,Va,ja,Ha,C,qa,za,Fa,Ba,Ua,_,Wa,$a,Ya,Ga,Ka,Qa,Xa,Ja,Za,eo,T,to,no,io,ro,ao,oo,so,lo,co,uo,po,ho,fo,mo,vo,go,yo,e,bo,S,wo;j={},H={},e=V=R=s=function(o){if(V._eak_seen=j,H[o])return H[o];if(H[o]={},!j[o])throw new Error("Could not find module "+o);for(var e,t=j[o],n=t.deps,t=t.callback,i=[],r=0,a=n.length;r<a;r++)"exports"===n[r]?i.push(e={}):i.push(s(function(e){if("."!==e.charAt(0))return e;for(var t=e.split("/"),n=o.split("/").slice(0,-1),i=0,r=t.length;i<r;i++){var a=t[i];".."===a?n.pop():"."!==a&&n.push(a)}return n.join("/")}(n[r])));t=t.apply(this,i);return H[o]=e||t},function(){(Ember="undefined"==typeof Ember?{}:Ember).imports=Ember.imports||this;var e=Ember.exports=Ember.exports||this;Ember.lookup=Ember.lookup||this;(e.Em=e.Ember=Em=Ember).isNamespace=!0,Ember.toString=function(){return"Ember"},Ember.VERSION="1.4.0-beta.3",Ember.ENV||("undefined"!=typeof EmberENV?Ember.ENV=EmberENV:Ember.ENV=void 0!==ENV?ENV:{}),Ember.config=Ember.config||{},void 0===Ember.ENV.DISABLE_RANGE_API&&(Ember.ENV.DISABLE_RANGE_API=!0),"undefined"==typeof MetamorphENV&&(e.MetamorphENV={}),MetamorphENV.DISABLE_RANGE_API=Ember.ENV.DISABLE_RANGE_API,Ember.FEATURES=Ember.ENV.FEATURES||{},Ember.FEATURES.isEnabled=function(e){e=Ember.FEATURES[e];return!!Ember.ENV.ENABLE_ALL_FEATURES||(!0===e||!1===e||void 0===e?e:!!Ember.ENV.ENABLE_OPTIONAL_FEATURES)},Ember.EXTEND_PROTOTYPES=Ember.ENV.EXTEND_PROTOTYPES,void 0===Ember.EXTEND_PROTOTYPES&&(Ember.EXTEND_PROTOTYPES=!0),Ember.LOG_STACKTRACE_ON_DEPRECATION=!1!==Ember.ENV.LOG_STACKTRACE_ON_DEPRECATION,Ember.SHIM_ES5=!1!==Ember.ENV.SHIM_ES5&&Ember.EXTEND_PROTOTYPES,Ember.LOG_VERSION=!1!==Ember.ENV.LOG_VERSION,Ember.K=function(){return this},void 0===Ember.assert&&(Ember.assert=Ember.K),void 0===Ember.warn&&(Ember.warn=Ember.K),void 0===Ember.debug&&(Ember.debug=Ember.K),void 0===Ember.deprecate&&(Ember.deprecate=Ember.K),void 0===Ember.deprecateFunc&&(Ember.deprecateFunc=function(e,t){return t}),Ember.uuid=0,Ember.merge=Ember.isNone=function(e){return null==e},Ember.none=Ember.deprecateFunc("Ember.none is deprecated. Please use Ember.isNone instead.",Ember.isNone),Ember.isEmpty=function(e){return Ember.isNone(e)||0===e.length&&"function"!=typeof e||"object"==typeof e&&0===Ember.get(e,"length")},Ember.empty=Ember.deprecateFunc("Ember.empty is deprecated. Please use Ember.isEmpty instead.",Ember.isEmpty)}();var Eo,ko,xo,t=Ember.platform={},A=(Ember.create=Object.create,Ember.create&&2!==Ember.create({a:1},{a:{value:2}}).a&&(Ember.create=null),Ember.create&&!Ember.ENV.STUB_OBJECT_CREATE||(Eo=function(){},Ember.create=function(e,t){if(Eo.prototype=e,e=new Eo,t){for(var n in Eo.prototype=e,t)Eo.prototype[n]=t[n].value;e=new Eo}return Eo.prototype=null,e},Ember.create.isSimulated=!0),Object.defineProperty);if(A)try{A({},"a",{get:function(){}})}catch(e){A=null}function Co(e){return e&&-1<Function.prototype.toString.call(e).indexOf("[native code]")}function _o(e){this.descs={},this.watching={},this.cache={},this.source=e}unction So(e,t,n){for(var i=-1,r=0,a=e.length;r<a;r+=3)if(t===e[r]&&n===e[r+1]){i=r;break}return i}function Ao(e,t){var n,e=be(e,!0);return e.listeners||(e.listeners={}),e.hasOwnProperty("listeners")||(e.listeners=ye(e.listeners)),n=(n=e.listeners[t])&&!e.listeners.hasOwnProperty(t)?e.listeners[t]=e.listeners[t].slice():n||(e.listeners[t]=[])}function Po(r,a,e,t){f(Ember.assert("You must pass at least an object and event name to Ember.removeListener",!!r&&!!a),t||"function"!=typeof e||(t=e,e=null),t)n(e,t);else{var e=r[we],i=e&&e.listeners&&e.listeners[a];if(i)for(var o=i.length-3;0<=o;o-=3)n(i[o],i[o+1])}}function Io(e,t){var n=e[Te],i=n&&0<n.watching[t]||"length"===t,r=n&&n.proto,a=n&&n.descs[t];if(i&&r!==e){a&&a.willChange&&a.willChange(e,t),i=t,r=n,(a=e).isDestroying||((s=!(o=Ce))&&(o=Ce={}),Do(Io,a,i,o,r),s&&(Ce=null));var o,s,a=t,i=n;if(i.hasOwnProperty("chainWatchers")&&i.chainWatchers[a]){var l,c,d=i.chainWatchers[a],u=[];for(l=0,c=d.length;l<c;l++)d[l].willChange(u);for(l=0,c=u.length;l<c;l+=2)Io(u[l],u[l+1])}o=t,(r=e).isDestroying||(s=o+":before",Me?(n=De.add(r,o,s),n=Le(r,s,n),Pe(r,s,[r,o],n)):Pe(r,s,[r,o]))}}function Lo(e,t){var n,i,r=e[Te],a=r&&0<r.watching[t]||"length"===t,o=r&&r.proto,s=r&&r.descs[t];o!==e&&(s&&s.didChange&&s.didChange(e,t),!a&&"length"!==t||(o=t,s=r,(a=e).isDestroying||((n=!(i=_e))&&(i=_e={}),Do(Lo,a,o,i,s),n&&(_e=null)),Oo(0,t,r,!1),a=t,(o=e).isDestroying||(i=a+":change",Me?(s=Oe.add(o,a,i),Ie(o,i,s)):Pe(o,i,[o,a]))))}function Do(e,t,n,i,r){var a=Se(t);if(i[a]||(i[a]={}),!i[a][n]){i[a][n]=!0;i=r.deps;if(i=i&&i[n])for(var o in i){var s=r.descs[o];s&&s._suspended===t||e(t,o)}}}function Oo(e,t,n,i){if(n&&n.hasOwnProperty("chainWatchers")&&n.chainWatchers[t]){for(var r=n.chainWatchers[t],a=i?null:[],o=0,s=r.length;o<s;o++)r[o].didChange(a);if(!i)for(o=0,s=a.length;o<s;o+=2)Lo(a[o],a[o+1])}}function Mo(){Me++}ction jo(e){Ember.imports.console?t=Ember.imports.console:"undefined"!=typeof console&&(t=console);var t,n,i="object"==typeof t?t[e]:null;if(i)return i.apply?((n=function(){i.apply(t,arguments)}).displayName="console."+e,n):unction qo(e,t,n){var i,r;e&&"object"==typeof e&&(r=(i=at(e)).chainWatchers,(r=i.hasOwnProperty("chainWatchers")?r:i.chainWatchers={})[t]||(r[t]=[]),r[t].push(n),dt(e,t,i))}function zo(e,t){var t=t||bt(e),n=t.chains;return n?n.value()!==e&&(n=t.chains=n.copy(e)):n=t.chains=new Et(null,null,e),n}function Fo(e){return"*"===e||!Lt.test(e)}function Bo(e,t){var n=e[t];return n?e.hasOwnProperty(t)||(n=e[t]=Rt(n)):n=e[t]={},n}unction Wo(e,t,n,i){var r,a,o,s,l,c=e._dependentKeys;if(c)for(r=Uo(i),a=0,o=c.length;a<o;a++)(l=Bo(r,s=c[a]))[n]=(l[n]||0)+1,jt(t,s,i)}function $o(e,t,n,i){var r,a,o,s,l,c=e._dependentKeys;if(c)for(r=Uo(i),a=0,o=c.length;a<o;a++)(l=Bo(r,s=c[a]))[n]=(l[n]||0)-1,Ht(t,s,i)}function Yo(e,t){this.func=e,Wt(this,t&&t.dependentKeys),this._cacheable=!t||void 0===t.cacheable||t.cacheable,this._readOnly=t&&(void 0!==t.readOnly||!!t.readOnly)}function Go(e){return[zt(e)].concat(e._dependentKeys).join("_")}unction Qo(e){return e+":change"}&&(A(xo={},"a",{configurable:!0,enumerable:!0,get:function(){},set:function(){}}),A(xo,"a",{configurable:!0,enumerable:!0,writable:!0,value:!0}),xo=!0===xo.a,ko=),xo?ko||(A=function(e,t,n){var i="object"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName;return i?e[t]=n.value:Object.defineProperty(e,t,n)}):A=null),t.defineProperty=A,t.hasPropertyAccessors=!0,t.defineProperty||(t.hasPropertyAccessors=!1,t.defineProperty=t.defineProperty.isSimulated=!0),Ember.ENV.MANDATORY_SETTER&&!t.hasPropertyAccessors&&(Ember.ENV.MANDATORY_SETTER=!1),xo=Co(Array.prototype.map)?Array.prototype.map:function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=new Array(n),r=arguments[1],a=0;a<n;a++)a in t&&(i[a]=e.call(r,t[a],a,t));return i},ko=Co(Array.prototype.forEach)?Array.prototype.forEach:function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=arguments[1],r=0;r<n;r++)r in t&&e.call(i,t[r],r,t)},t=Co(Array.prototype.indexOf)?Array.prototype.indexOf:function(e,t){null==t?t=0:t<0&&(t=Math.max(0,this.length+t));for(var n=t,i=this.length;n<i;n++)if(this[n]===e)return n;return-1},Ember.ArrayPolyfills={map:xo,forEach:ko,indexOf:t},Ember.SHIM_ES5&&(Array.prototype.map||(Array.prototype.map=xo),Array.prototype.forEach||(Array.prototype.forEach=ko),Array.prototype.indexOf||(Array.prototype.indexOf=t)),q=["description","fileName","lineNumber","message","name","number","stack"],Ember.Error=function(){var e=Error.apply(this,arguments);Error.captureStackTrace&&Error.captureStackTrace(this,Ember.Error);for(var t=0;t<q.length;t++)this[q[t]]=e[q[t]]},Ember.Error.prototype=Ember.create(Error.prototype),Ember.onerror=null,Ember.handleErrors=function(e,t){if("function"!=typeof Ember.onerror)return e.call(t||this);try{return e.call(t||this)}catch(e){Ember.onerror(e)}},Ember.GUID_PREFIX="ember",z=Ember.platform.defineProperty,F=Ember.create,B="__ember"+ +new Date,U=0,W=[],$={},Y=Ember.ENV.MANDATORY_SETTER,Ember.GUID_KEY=B,G={writable:!1,configurable:!1,enumerable:!1,value:null},Ember.generateGuid=function(e,t){t=(t=t||Ember.GUID_PREFIX)+U++;return e&&(G.value=t,z(e,B,G)),t},Ember.guidFor=function(e){if(void 0===e)return"(undefined)";if(null===e)return"(null)";var t;switch(typeof e){case"number":return t=(t=W[e])||(W[e]="nu"+e);case"string":return t=(t=$[e])||($[e]="st"+U++);case"boolean":return e?"(true)":"(false)";default:return e[B]?e[B]:e===Object?"(Object)":e===Array?"(Array)":(t="ember"+U++,G.value=t,z(e,B,G),t)}},K=Ember.META_DESC={writable:!0,configurable:!1,enumerable:!1,value:null},Q=Ember.GUID_KEY+"_meta",Ember.META_KEY=Q,X=Ember.platform.defineProperty.isSimulated,_o.prototype={descs:null,deps:null,watching:null,listeners:null,cache:null,source:null,mixins:null,bindings:null,chains:null,chainWatchers:null,values:null,proto:null},X&&(_o.prototype.__preventPlainObject__=!0,_o.prototype.toJSON=function(){}),J=new _o(null),Y&&(J.values={}),Ember.EMPTY_META=J,Ember.meta=function(e,t){var n=e[Q];return!1===t?n||J:(n?n.source!==e&&(X||z(e,Q,K),(n=F(n)).descs=F(n.descs),n.watching=F(n.watching),n.cache={},n.source=e,Y&&(n.values=F(n.values)),e[Q]=n):(X||z(e,Q,K),n=new _o(e),Y&&(n.values={}),(e[Q]=n).descs.constructor=null),n)},Ember.getMeta=function(e,t){return Ember.meta(e,!1)[t]},Ember.setMeta=function(e,t,n){return Ember.meta(e,!0)[t]=n},Ember.metaPath=function(e,t,n){Ember.deprecate("Ember.metaPath is deprecated and will be removed from future releases.");for(var i,r,a=Ember.meta(e,n),o=0,s=t.length;o<s;o++){if(r=a[i=t[o]]){if(r.__ember_source__!==e){if(!n)return;(r=a[i]=F(r)).__ember_source__=e}}else{if(!n)return;r=a[i]={__ember_source__:e}}a=r}return r},Ember.wrap=function(n,i){function r(){}function e(){var e,t=this._super;return this._super=i||r,e=n.apply(this,arguments),this._super=t,e}return e.wrappedFunction=n,e.__ember_observes__=n.__ember_observes__,e.__ember_observesBefore__=n.__ember_observesBefore__,e.__ember_listens__=n.__ember_listens__,e},Ember.isArray=function(e){return!(!e||e.setInterval)&&(!(!Array.isArray||!Array.isArray(e))||(!(!Ember.Array||!Ember.Array.detect(e))||void 0!==e.length&&"object"==typeof e))},Ember.makeArray=Ember.canInvoke=To,Ember.tryInvoke=function(e,t,n){if(To(e,t))return e[t].apply(e,n||[])},t=),Ember.tryFinally=t?function(e,t,n){var i;n=n||this;try{i=e.call(n)}finally{e=t.call(n)}return void 0===e?i:e},Ember.tryCatchFinally=t?function(e,t,n,i){var r;i=i||this;try{r=e.call(i)}catch(e){r=t.call(i,e)}finally{e=n.call(i)}return void 0===e?r:e},Z={},t="Boolean Number String Function Array Date RegExp Object".split(" "),Ember.ArrayPolyfills.forEach.call(t,,ee=Object.prototype.toString,Ember.typeOf=function(e){var t=null==e?String(e):Z[ee.call(e)]||"object";return"function"===t?Ember.Object&&Ember.Object.detect(e)&&(t="class"):"object"===t&&(e instanceof Error?t="error":Ember.Object&&e instanceof Ember.Object?t="instance":e instanceof Date&&(t="date")),t},Ember.inspect=function(e){var t=Ember.typeOf(e);if("array"===t)return"["+e+"]";if("object"!==t)return e+"";var n,i,r=[];for(i in e)e.hasOwnProperty(i)&&"toString"!==(n=e[i])&&("function"===Ember.typeOf(n)&&(n="function() { ... }"),r.push(i+": "+n));return"{"+r.join(", ")+"}"},Ember.Instrumentation={},te=[],ne={},t="undefined"!=typeof window&&window.performance||{},ie=(O=t.now||t.mozNow||t.webkitNow||t.msNow||t.oNow)?O.bind(t):Ember.Instrumentation.instrument=function(e,t,n,i){var r,a,o,s,l,c,d=ne[e];return Ember.STRUCTURED_PROFILE&&(r=e+": "+t.object,console.time(r)),0===(d=d||function(e){for(var t,n=[],i=0,r=te.length;i<r;i++)(t=te[i]).regex.test(e)&&n.push(t.object);return ne[e]=n}(e)).length?(a=n.call(i),Ember.STRUCTURED_PROFILE&&console.timeEnd(r),a):(o=[],Ember.tryCatchFinally(function(){for(l=0,c=d.length;l<c;l++)s=d[l],o[l]=s.before(e,ie(),t);return n.call(i)},function(e){(t=t||{}).exception=e},function(){for(l=0,c=d.length;l<c;l++)(s=d[l]).after(e,ie(),t,o[l]);Ember.STRUCTURED_PROFILE&&console.timeEnd(r)}))},Ember.Instrumentation.subscribe=function(e,t){for(var n,i=e.split("."),r=[],a=0,o=i.length;a<o;a++)"*"===(n=i[a])?r.push("[^\\.]*"):r.push(n);r=r.join("\\."),r+="(\\..*)?";e={pattern:e,regex:new RegExp("^"+r+"$"),object:t};return te.push(e),ne={},e},Ember.Instrumentation.unsubscribe=function(e){for(var t,n=0,i=te.length;n<i;n++)te[n]===e&&(t=n);te.splice(t,1),ne={}},Ember.Instrumentation.reset=Ember.instrument=Ember.Instrumentation.instrument,Ember.subscribe=Ember.Instrumentation.subscribe,re=Array.prototype.map||Ember.ArrayPolyfills.map,ae=Array.prototype.forEach||Ember.ArrayPolyfills.forEach,oe=Array.prototype.indexOf||Ember.ArrayPolyfills.indexOf,se=Array.prototype.filter||Ember.ArrayPolyfills.filter,le=Array.prototype.splice,ce=Ember.EnumerableUtils={map:function(e,t,n){return(e.map||re).call(e,t,n)},forEach:function(e,t,n){return(e.forEach||ae).call(e,t,n)},filter:function(e,t,n){return(e.filter||se).call(e,t,n)},indexOf:function(e,t,n){return(e.indexOf||oe).call(e,t,n)},indexesOf:function(t,e){return void 0===e?[]:ce.map(e,function(e){return ce.indexOf(t,e)})},addObject:removeObject:function(e,t){t=ce.indexOf(e,t);-1!==t&&e.splice(t,1)},_replace:function(e,t,n,i){for(var r,a,o=[].concat(i),s=[],l=t,c=n;o.length;)(a=6e4<c?6e4:c)<=0&&(a=0),r=o.splice(0,6e4),r=[l,a].concat(r),l+=6e4,c-=a,s=s.concat(le.apply(e,r));return s},replace:function(e,t,n,i){return e.replace?e.replace(t,n,i):ce._replace(e,t,n,i)},intersection:function(e,t){var n=[];return ce.forEach(e,function(e){0<=ce.indexOf(t,e)&&n.push(e)}),n}},de=Ember.META_KEY,ue=Ember.ENV.MANDATORY_SETTER,pe=/^([A-Z$]|([0-9][A-Z$])).*[\.\*]/,he=/^this[\.\*]/,fe=/^([^\.\*]+)/,me=function(e,t){var n,i;return""===t?e:(t||"string"!=typeof e||(t=e,e=null),Ember.assert("Cannot call get with "+t+" key.",!!t),Ember.assert("Cannot call get with '"+t+"' on an undefined object.",void 0!==e),null===e||-1!==t.indexOf(".")?ge(e,t):(i=(n=e[de])&&n.descs[t])?i.get(e,t):void 0!==(i=(ue&&n&&0<n.watching[t]?n.values:e)[t])||"object"!=typeof e||t in e||"function"!=typeof e.unknownProperty?i:e.unknownProperty(t))},Ember.config.overrideAccessors&&(Ember.get=me,Ember.config.overrideAccessors(),me=Ember.get),ve=Ember.normalizeTuple=function(e,t){var n=he.test(t),i=!n&&pe.test(t);if(e&&!i||(e=Ember.lookup),n&&(t=t.slice(5)),e===Ember.lookup&&(i=t.match(fe)[0],e=me(e,i),t=t.slice(i.length+1)),t&&0!==t.length)return[e,t];throw new Ember.Error("Path cannot be empty")},ge=Ember._getPath=function(e,t){var n,i,r,a;if(null===e&&-1===t.indexOf("."))return me(Ember.lookup,t);for(i=he.test(t),e&&!i||(e=(i=ve(e,t))[0],t=i[1],i.length=0),a=(n=t.split(".")).length,r=0;null!=e&&r<a;r++)if((e=me(e,n[r],!0))&&e.isDestroyed)return;return e},Ember.getWithDefault=function(e,t,n){e=me(e,t);return void 0===e?n:e},Ember.get=me,ye=Ember.create,be=Ember.meta,we=Ember.META_KEY,Ee=[].slice,Ember.on=function(){var e=Ee.call(arguments,-1)[0],t=Ee.call(arguments,0,-1);return e.__ember_listens__=t,e},Ember.addListener=function(e,t,n,i,r){Ember.assert("You must pass at least an object and event name to Ember.addListener",!!e&&!!t),i||"function"!=typeof n||(i=n,n=null);var a=Ao(e,t),o=0;r&&(o|=1),-1===So(a,n,i)&&(a.push(n,i,o),"function"==typeof e.didAddListener&&e.didAddListener(t,n,i))},Ember.removeListener=Po,Ember._suspendListener=function(e,t,n,i,r){i||"function"!=typeof n||(i=n,n=null);var a=Ao(e,t),o=So(a,n,i);return-1!==o&&(a[o+2]|=2),Ember.tryFinally(function(){return r.call(n)},function(){-1!==o&&(a[o+2]&=-3)})},Ember._suspendListeners=function(e,t,n,i,r){i||"function"!=typeof n||(i=n,n=null);for(var a=[],o=[],s=0,l=t.length;s<l;s++){var c,d=So(c=Ao(e,t[s]),n,i);-1!==d&&(c[d+2]|=2,a.push(d),o.push(c))}return Ember.tryFinally(function(){return r.call(n)},function(){for(var e=0,t=a.length;e<t;e++)o[e][a[e]+2]&=-3})},Ember.sendEvent=function(e,t,n,i){var r;if(e!==Ember&&"function"==typeof e.sendEvent&&e.sendEvent(t,n),i=i?i:(r=e[we])&&r.listeners&&r.listeners[t]){for(var a=i.length-3;0<=a;a-=3){var o=i[a],s=i[a+1],l=i[a+2];!s||2&l||(1&l&&Po(e,t,o,s),o=o||e,"string"==typeof s&&(s=o[s]),n?s.apply(o,n):s.call(o))}return!0}},Ember.hasListeners=function(e,t){return!(!(e=(e=e[we])&&e.listeners&&e.listeners[t])||!e.length)},Ember.watchedEvents=function(e){var t=e[we].listeners,n=[];if(t)for(var i in t)t[i]&&n.push(i);return n},Ember.listenersFor=function(e,t){var n=[],i=(e=e[we])&&e.listeners&&e.listeners[t];if(i)for(var r=0,a=i.length;r<a;r+=3){var o=i[r],s=i[r+1];n.push([o,s])}return n},Ember.listenersDiff=function(e,t,n){var i=(e=e[we])&&e.listeners&&e.listeners[t],r=[];if(i){for(var a=i.length-3;0<=a;a-=3){var o=i[a],s=i[a+1],l=i[a+2];-1===So(n,o,s)&&(n.push(o,s,l),r.push(o,s,l))}return r}},Ember.listenersUnion=function(e,t,n){var i=(e=e[we])&&e.listeners&&e.listeners[t];if(i)for(var r=i.length-3;0<=r;r-=3){var a=i[r],o=i[r+1],s=i[r+2];-1===So(n,a,o)&&n.push(a,o,s)}},ke=Ember.guidFor,xe=Ember.sendEvent,(O=Ember._ObserverSet=function(){this.clear()}).prototype.add=function(e,t,n){var i=this.observerSet,r=this.observers,a=ke(e),o=i[a];return o||(i[a]=o={}),void 0===(i=o[t])&&(i=r.push({sender:e,keyName:t,eventName:n,listeners:[]})-1,o[t]=i),r[i].listeners},O.prototype.flush=function(){var e,t,n,i,r=this.observers;for(this.clear(),e=0,t=r.length;e<t;++e)(i=(n=r[e]).sender).isDestroying||i.isDestroyed||xe(i,n.eventName,[i,n.keyName],n.listeners)},O.prototype.clear=function(){this.observerSet={},this.observers=[]},Te=Ember.META_KEY,Se=Ember.guidFor,Ae=Ember.tryFinally,Pe=Ember.sendEvent,Ie=Ember.listenersUnion,Le=Ember.listenersDiff,t=Ember._ObserverSet,De=new t,Oe=new t,Me=0,Ember.propertyWillChange=Io,Ember.propertyDidChange=Lo,Ember.overrideChains=function(e,t,n){Oo(0,t,n,!0)},Ember.beginPropertyChanges=Mo,Ember.endPropertyChanges=No,Ember.changeProperties=Ne=Ember.META_KEY,Re=Ember.ENV.MANDATORY_SETTER,Ve=/^([A-Z$]|([0-9][A-Z$]))/,je=Ember._getPath,He=function(e,t,n,i){if("string"==typeof e&&(Ember.assert("Path '"+e+"' must be global if no obj is given.",Ve.test(e)),n=t,t=e,e=null),Ember.assert("Cannot call set with "+t+" key.",!!t),!e||-1!==t.indexOf(".")){var r=e,a=t,o=n;if(s=a.slice(a.lastIndexOf(".")+1),"this"!==(a=a===s?s:a.slice(0,a.length-(s.length+1)))&&(r=je(r,a)),!s||0===s.length)throw new Ember.Error("Property set failed: You passed an empty path");if(r)return He(r,s,o);if(i)return;throw new Ember.Error('Property set failed: object in path "'+a+'" could not be found or was destroyed.')}Ember.assert("You need to provide an object and key to `set`.",!!e&&void 0!==t),Ember.assert("calling set on destroyed object",!e.isDestroyed);var r=e[Ne],s=r&&r.descs[t];return s?s.set(e,t,n):"object"==typeof e&&!(t in e)&&"function"==typeof e.setUnknownProperty?e.setUnknownProperty(t,n):r&&0<r.watching[t]?n!==(o=(Re?r.values:e)[t])&&(Ember.propertyWillChange(e,t),Re?(void 0!==o||t in e)&&e.propertyIsEnumerable(t)?r.values[t]=n:Ember.defineProperty(e,t,null,n):e[t]=n,Ember.propertyDidChange(e,t)):e[t]=n,n},Ember.config.overrideAccessors&&(Ember.set=He,Ember.config.overrideAccessors(),He=Ember.set),Ember.set=He,Ember.trySet=qe=Ember.set,a=Ember.guidFor,ze=Ember.ArrayPolyfills.indexOf,(Fe=Ember.OrderedSet=function(){this.clear()}).create=function(){return new Fe},Fe.prototype={clear:add:function(e){var t=a(e),n=this.presenceSet,i=this.list;t in n||(n[t]=!0,i.push(e))},remove:function(e){var t=a(e),n=this.presenceSet,i=this.list,n=(delete n[t],ze.call(i,e));-1<n&&i.splice(n,1)},isEmpty:has:forEach:function(e,t){for(var n=this.toArray(),i=0,r=n.length;i<r;i++)e.call(t,n[i])},toArray:function(){return this.list.slice()},copy:function(){var e=new Fe;return e.presenceSet=Ro(this.presenceSet),e.list=this.toArray(),e}},(Be=Ember.Map=function(){this.keys=Ember.OrderedSet.create(),this.values={}}).create=Be.prototype={length:0,get:set:function(e,t){var n=this.keys,i=this.values,r=a(e);n.add(e),i[r]=t,qe(this,"length",n.list.length)},remove:function(e){var t=this.keys,n=this.values,i=a(e);return!!n.hasOwnProperty(i)&&(t.remove(e),delete n[i],qe(this,"length",t.list.length),!0)},has:function(e){var t=this.values,e=a(e);return t.hasOwnProperty(e)},forEach:function(n,i){var e=this.keys,r=this.values;e.forEach(function(e){var t=a(e);n.call(i,e,r[t])})},copy:,(Ue=Ember.MapWithDefault=function(e){Be.call(this),this.defaultValue=e.defaultValue}).create=(Ue.prototype=Ember.create(Be.prototype)).get=function(e){var t;return this.has(e)?Be.prototype.get.call(this,e):(t=this.defaultValue(e),this.set(e,t),t)},Ue.prototype.copy=function(){return Vo(this,new Ue({defaultValue:this.defaultValue}))},Ember.Logger={log:jo("log")||Ember.K,warn:jo("warn")||Ember.K,error:jo("error")||Ember.K,info:jo("info")||Ember.K,debug:jo("debug")||jo("info")||Ember.K,assert:jo("assert")||function(e,t){if(!e)try{throw new Ember.Error("assertion failed: "+t)}catch(e){setTimeout(function(){throw e},0)}}},We=Ember.META_KEY,$e=Ember.meta,Ye=Ember.platform.defineProperty,Ge=Ember.ENV.MANDATORY_SETTER,Ember.Descriptor=function(){},Ke=Ember.MANDATORY_SETTER_FUNCTION=function(e){Ember.assert("You must use Ember.set() to access this property (of "+this+")",!1)},Qe=Ember.DEFAULT_GETTER_FUNCTION=function(t){return ,Ember.defineProperty=function(e,t,n,i,r){var a,o=(r=r||$e(e)).descs,s=r.descs[t],l=0<r.watching[t];return s instanceof Ember.Descriptor&&s.teardown(e,t),n instanceof Ember.Descriptor?(o[t]=a=n,Ge&&l?Ye(e,t,{configurable:!0,enumerable:!0,writable:!0,value:void 0}):e[t]=void 0,n.func&&n._dependentCPs&&Xe(e,n._dependentCPs,r)):(o[t]=void 0,null==n?(a=i,Ge&&l?(r.values[t]=i,Ye(e,t,{configurable:!0,enumerable:!0,set:Ke,get:Qe(t)})):e[t]=i):Ye(e,t,a=n)),l&&Ember.overrideChains(e,t,r),e.didDefineProperty&&e.didDefineProperty(e,t,a),this},Xe=function(e,t,n){for(var i,r,a=t.length,o=0;o<a;++o)r=(i=t[o]).implicitCPKey,Ember.defineProperty(e,r,i,void 0,n),i._dependentCPs&&Xe(e,i._dependentCPs,n)},Je=Ember.get,Ember.getProperties=function(e){var t={},n=arguments,i=1;2===arguments.length&&"array"===Ember.typeOf(arguments[1])&&(i=0,n=arguments[1]);for(var r=n.length;i<r;i++)t[n[i]]=Je(e,n[i]);return t},Ze=Ember.changeProperties,et=Ember.set,Ember.setProperties=function(t,n){return Ze(function(){for(var e in n)n.hasOwnProperty(e)&&et(t,e,n[e])}),t},tt=Ember.meta,nt=Ember.typeOf,it=Ember.ENV.MANDATORY_SETTER,rt=Ember.platform.defineProperty,Ember.watchKey=function(e,t,n){var i;"length"===t&&"array"===nt(e)||((i=(n=n||tt(e)).watching)[t]?i[t]=(i[t]||0)+1:(i[t]=1,"function"==typeof e.willWatchProperty&&e.willWatchProperty(t),it&&t in e&&(n.values[t]=e[t],rt(e,t,{configurable:!0,enumerable:e.propertyIsEnumerable(t),set:Ember.MANDATORY_SETTER_FUNCTION,get:Ember.DEFAULT_GETTER_FUNCTION(t)}))))},Ember.unwatchKey=function(t,n,e){var i=e||tt(t),e=i.watching;1===e[n]?(e[n]=0,"function"==typeof t.didUnwatchProperty&&t.didUnwatchProperty(n),it&&n in t&&rt(t,n,{configurable:!0,enumerable:t.propertyIsEnumerable(n),set:function(e){rt(t,n,{configurable:!0,writable:!0,enumerable:!0,value:e}),delete i.values[n]},get:Ember.DEFAULT_GETTER_FUNCTION(n)})):1<e[n]&&e[n]--},at=Ember.meta,ot=Ember.get,st=Ember.normalizeTuple,lt=Ember.ArrayPolyfills.forEach,ct=Ember.warn,dt=Ember.watchKey,ut=Ember.unwatchKey,pt=/^([^\.\*]+)/,ht=Ember.META_KEY,ft=[],Ember.flushPendingChains=function(){var e;0!==ft.length&&(e=ft,ft=[],lt.call(e,,ct("Watching an undefined global, Ember expects watched globals to be setup by the time the run loop is flushed, check for typos",0===ft.length))},mt=Ember.removeChainWatcher=function(e,t,n){if(e&&"object"==typeof e){var i=e[ht];if(!i||i.hasOwnProperty("chainWatchers")){var r=i&&i.chainWatchers;if(r&&r[t])for(var a=0,o=(r=r[t]).length;a<o;a++)r[a]===n&&r.splice(a,1);ut(e,t,i)}}},vt=Ember._ChainNode=function(e,t,n){this._parent=e,this._key=t,this._watching=void 0===n,this._value=n,this._paths={},this._watching&&(this._object=e.value(),this._object&&qo(this._object,this._key,this)),this._parent&&"@each"===this._parent._key&&this.value()},(O=vt.prototype).value=function(){var e;return void 0===this._value&&this._watching&&(e=this._parent.value(),this._value=function(e,t){if(e){var n,i=e[ht];if(!i||i.proto!==e)return"@each"!==t&&(n=i&&i.descs[t])&&n._cacheable?t in i.cache?i.cache[t]:void 0:ot(e,t)}}(e,this._key)),this._value},O.destroy=function(){var e;this._watching&&((e=this._object)&&mt(e,this._key,this),this._watching=!1)},O.copy=O.add=function(e){var t,n,i,r=this._paths;if(r[e]=(r[e]||0)+1,r=this.value(),(t=st(r,e))[0]&&t[0]===r)n=Ho(e=t[1]),e=e.slice(n.length+1);else{if(!t[0])return ft.push([this,e]),void(t.length=0);i=t[0],n=e.slice(0,0-(t[1].length+1)),e=t[1]}t.length=0,this.chain(n,e,i)},O.remove=function(e){var t,n,i=this._paths;0<i[e]&&i[e]--,i=this.value(),e=(t=st(i,e))[0]===i?(n=Ho(e=t[1]),e.slice(n.length+1)):(t[0],n=e.slice(0,0-(t[1].length+1)),t[1]),t.length=0,this.unchain(n,e)},O.count=0,O.chain=function(e,t,n){var i=this._chains,r=(i=i||(this._chains={}))[e];(r=r||(i[e]=new vt(this,e,n))).count++,t&&0<t.length&&(e=Ho(t),t=t.slice(e.length+1),r.chain(e,t))},O.unchain=function(e,t){var n=this._chains,i=n[e];t&&1<t.length&&(e=Ho(t),t=t.slice(e.length+1),i.unchain(e,t)),i.count--,i.count<=0&&(delete n[i._key],i.destroy())},O.willChange=O.chainWillChange=function(e,t,n,i){this._key&&(t=this._key+"."+t),this._parent?this._parent.chainWillChange(this,t,n+1,i):(1<n&&i.push(this.value(),t),0<this._paths[t="this."+t]&&i.push(this.value(),t))},O.chainDidChange=function(e,t,n,i){this._key&&(t=this._key+"."+t),this._parent?this._parent.chainDidChange(this,t,n+1,i):(1<n&&i.push(this.value(),t),0<this._paths[t="this."+t]&&i.push(this.value(),t))},O.didChange=function(e){this._watching&&((t=this._parent.value())!==this._object&&(mt(this._object,this._key,this),qo(this._object=t,this._key,this)),this._value=void 0,this._parent&&"@each"===this._parent._key&&this.value());var t,n=this._chains;if(n)for(var i in n)n.hasOwnProperty(i)&&n[i].didChange(e);null!==e&&this._parent&&this._parent.chainDidChange(this,this._key,1,e)},Ember.finishChains=function(e){var t=e[ht],t=t&&t.chains;t&&(t.value()!==e?at(e).chains=t=t.copy(e):t.didChange(null))},gt=Ember.EnumerableUtils.forEach,yt=/^((?:[^\.]*\.)*)\{(.*)\}$/,Ember.expandProperties=function(e,t){var n,i;(i=yt.exec(e))?(n=i[1],i=i[2],gt(i.split(","),):t(e)},bt=Ember.meta,wt=Ember.typeOf,Et=Ember._ChainNode,Ember.watchPath=function(e,t,n){var i;"length"===t&&"array"===wt(e)||((i=(n=n||bt(e)).watching)[t]?i[t]=(i[t]||0)+1:(i[t]=1,zo(e,n).add(t)))},Ember.unwatchPath=function(e,t,n){var n=n||bt(e),i=n.watching;1===i[t]?(i[t]=0,zo(e,n).remove(t)):1<i[t]&&i[t]--},Ember.meta,kt=Ember.GUID_KEY,xt=Ember.META_KEY,Ct=Ember.removeChainWatcher,_t=Ember.watchKey,Tt=Ember.unwatchKey,St=Ember.watchPath,At=Ember.unwatchPath,Pt=Ember.typeOf,It=Ember.generateGuid,Lt=/[\.\*]/,Ember.watch=function(e,t,n){"length"===t&&"array"===Pt(e)||(Fo(t)?_t:St)(e,t,n)},Ember.isWatching=function(e,t){e=e[xt];return 0<(e&&e.watching[t])},Ember.watch.flushPending=Ember.flushPendingChains,Ember.unwatch=function(e,t,n){"length"===t&&"array"===Pt(e)||(Fo(t)?Tt:At)(e,t,n)},Ember.rewatch=function(e){var t=e[xt],n=t&&t.chains;kt in e&&!e.hasOwnProperty(kt)&&It(e),n&&n.value()!==e&&(t.chains=n.copy(e))},Dt=[],Ember.destroy=function(e){var t,n,i,r,a=e[xt];if(a&&(e[xt]=null,t=a.chains))for(Dt.push(t);0<Dt.length;){if(n=(t=Dt.pop())._chains)for(i in n)n.hasOwnProperty(i)&&Dt.push(n[i]);t._watching&&(r=t._object)&&Ct(r,t._key,t)}},Ember.warn("The CP_DEFAULT_CACHEABLE flag has been removed and computed properties are always cached by default. Use `volatile` if you don't want caching.",!1!==Ember.ENV.CP_DEFAULT_CACHEABLE),r=Ember.get,Ot=Ember.set,Mt=Ember.meta,Nt=[].slice,Rt=Ember.create,Vt=Ember.META_KEY,jt=Ember.watch,Ht=Ember.unwatch,qt=Ember.expandProperties,(t=(Ember.ComputedProperty=Yo).prototype=new Ember.Descriptor).toString=function(){return this.implicitCPKey||Ember.Descriptor.prototype.toString.apply(this,arguments)},t.cacheable=t.volatile=t.readOnly=t.property=function(){function e(e){t.push(e)}for(var t=[],n=0,i=arguments.length;n<i;n++)qt(arguments[n],e);return Wt(this,t),this},t.meta=t.didChange=function(e,t){var n;this._cacheable&&this._suspended!==e&&t in(n=Mt(e)).cache&&(delete n.cache[t],$o(this,e,t,n))},t.get=function(e,t){var n,i,r;if(this._cacheable){if(t in(n=(i=Mt(e)).cache))return n[t];if(n=n[t]=this.func.call(e,t),r=i.chainWatchers&&i.chainWatchers[t])for(var a=r,o=0,s=a.length;o<s;o++)a[o].didChange(null);Wo(this,e,t,i)}else n=this.func.call(e,t);return n},t.set=function(e,t,n){var i,r,a,o=this._cacheable,s=this.func,l=Mt(e,o),c=l.watching[t],d=this._suspended,u=!1,p=l.cache;if(this._readOnly)throw new Ember.Error("Cannot Set: "+t+" on: "+Ember.inspect(e));this._suspended=e;try{if(o&&p.hasOwnProperty(t)&&(r=p[t],u=!0),3===(i=(s.wrappedFunction||s).length))a=s.call(e,t,n,r);else{if(2!==i)return Ember.defineProperty(e,t,null,r),void Ember.set(e,t,n);a=s.call(e,t,n)}if(u&&r===a)return;c&&Ember.propertyWillChange(e,t),u&&delete p[t],o&&(u||Wo(this,e,t,l),p[t]=a),c&&Ember.propertyDidChange(e,t)}finally{this._suspended=d}return a},t.teardown=function(e,t){var n=Mt(e);return t in n.cache&&$o(this,e,t,n),this._cacheable&&delete n.cache[t],null},Ember.computed=function(e){var t;if(1<arguments.length&&(t=Nt.call(arguments,0,-1),e=Nt.call(arguments,-1)[0]),"function"!=typeof e)throw new Ember.Error("Computed Property declared without a property function");var n=new Yo(e);return t&&n.property.apply(n,t),n},Ember.cacheFor=function(e,t){e=e[Vt],e=e&&e.cache;if(e&&t in e)return e[t]},zt=Ember.guidFor,Ft=Ember.EnumerableUtils.map,Bt=Ember.EnumerableUtils.filter,Ember.typeOf,Ut=function(e){return e instanceof Ember.ComputedProperty?Go(e):"string"==typeof e||e instanceof String||"object"==typeof e||"number"==typeof e?e:void Ember.assert("Unexpected dependent key  "+e+" of type "+typeof e,!1)},Wt=function(e,t){t?(e._dependentKeys=Ko(t),e._dependentCPs=Bt(t,,e.implicitCPKey=Go(e)):(e._dependentKeys=e._dependentCPs=[],delete e.implicitCPKey)},Ember.computed.normalizeDependentKey=Ut,Ember.computed.normalizeDependentKeys=Ko,t=function(e,n){Ember.computed[e]=function(e){var t=Ko(Nt.call(arguments));return Ember.computed(e,function(){return n.apply(this,t)})}},O=function(e,i){Ember.computed[e]=function(){var e=Nt.call(arguments),t=Ko(e),n=Ember.computed(function(){return i.apply(this,[function(e,t){for(var n={},i=0;i<t.length;i++)n[t[i]]=r(e,t[i]);return n}(this,t)])});return n.property.apply(n,e)}},Ember.computed.literal=t("empty",function(e){return Ember.isEmpty(r(this,e))}),t("notEmpty",function(e){return!Ember.isEmpty(r(this,e))}),t("none",function(e){return Ember.isNone(r(this,e))}),t("not",,t("bool",,t("match",function(e,t){e=r(this,e);return"string"==typeof e&&t.test(e)}),t("equal",function(e,t){return r(this,e)===t}),t("gt",function(e,t){return r(this,e)>t}),t("gte",function(e,t){return r(this,e)>=t}),t("lt",function(e,t){return r(this,e)<t}),t("lte",function(e,t){return r(this,e)<=t}),O("and",,O("or",,O("any",,O("collect",function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&(Ember.isNone(e[t])?n.push(null):n.push(e[t]));return n}),Ember.computed.alias=function(n){return Ember.computed(n,function(e,t){return 1<arguments.length?(Ot(this,n,t),t):r(this,n)})},Ember.computed.oneWay=function(e){return Ember.computed(e,function(){return r(this,e)})},Ember.FEATURES.isEnabled("computed-read-only")&&(Ember.computed.readOnly=function(e){return Ember.computed(e,function(){return r(this,e)}).readOnly()}),Ember.computed.defaultTo=function(i){return Ember.computed(function(e,t,n){return 1===arguments.length?null!=n?n:r(this,i):null!=t?t:r(this,i)})},Ember.addObserver=function(e,t,n,i){return Ember.addListener(e,Qo(t),n,i),Ember.watch(e,t),this},Ember.observersFor=function(e,t){return Ember.listenersFor(e,Qo(t))},Ember.removeObserver=function(e,t,n,i){return Ember.unwatch(e,t),Ember.removeListener(e,Qo(t),n,i),this},Ember.addBeforeObserver=function(e,t,n,i){return Ember.addListener(e,Xo(t),n,i),Ember.watch(e,t),this},Ember._suspendBeforeObserver=function(e,t,n,i,r){return Ember._suspendListener(e,Xo(t),n,i,r)},Ember._suspendObserver=function(e,t,n,i,r){return Ember._suspendListener(e,Qo(t),n,i,r)},$t=Ember.ArrayPolyfills.map,Ember._suspendBeforeObservers=function(e,t,n,i,r){t=$t.call(t,Xo);return Ember._suspendListeners(e,t,n,i,r)},Ember._suspendObservers=function(e,t,n,i,r){t=$t.call(t,Qo);return Ember._suspendListeners(e,t,n,i,r)},Ember.beforeObserversFor=Ember.removeBeforeObserver=function(e,t,n,i){return Ember.unwatch(e,t),Ember.removeListener(e,Xo(t),n,i),this},e("backburner/queue",["exports"],function(e){"use strict";.prototype={daq:null,name:null,options:null,_queue:null,push:pushUnique:function(e,t,n,i){for(var r,a,o=this._queue,s=0,l=o.length;s<l;s+=4)if(r=o[s],a=o[s+1],r===e&&a===t)return o[s+2]=n,o[s+3]=i,{queue:this,target:e,method:t};return this._queue.push(e,t,n,i),{queue:this,target:e,method:t}},flush:function(){var e,t,n,i,r=this._queue,a=this.options,o=a&&a.before,a=a&&a.after,s=r.length;for(s&&o&&o(),i=0;i<s;i+=4)e=r[i],t=r[i+1],n=r[i+2],r[i+3],n&&0<n.length?t.apply(e,n):t.call(e);s&&a&&a(),r.length>s?(this._queue=r.slice(s),this.flush()):this._queue.length=0},cancel:function(e){for(var t,n,i=this._queue,r=0,a=i.length;r<a;r+=4)if(t=i[r],n=i[r+1],t===e.target&&n===e.method)return i.splice(r,4),!0;if(i=this._queueBeingFlushed)for(r=0,a=i.length;r<a;r+=4)if(t=i[r],n=i[r+1],t===e.target&&n===e.method)return!(i[r+1]=null)}},e.Queue=t}),e("backburner/deferred_action_queues",["backburner/queue","exports"],function(e,t){"use strict";var o=e.Queue;function n(e,t){var n,i=this.queues={};this.queueNames=e=e||[];for(var r=0,a=e.length;r<a;r++)i[n=e[r]]=new o(this,n,t[n])}n.prototype={queueNames:null,queues:null,schedule:function(e,t,n,i,r,a){var o=this.queues[e];if(o)return r?o.pushUnique(t,n,i,a):o.push(t,n,i,a);throw new Error("You attempted to schedule an action in a queue ("+e+") that doesn't exist")},flush:function(){for(var e,t,n=this.queues,i=this.queueNames,r=0,a=i.length;r<a;){t=(e=n[i[r]])._queueBeingFlushed=e._queue.slice(),e._queue=[];var o,s,l,c=e.options,d=c&&c.before,c=c&&c.after,u=0,p=t.length;for(p&&d&&d();u<p;)o=t[u],s=t[u+1],l=t[u+2],t[u+3],(s="string"==typeof s?o[s]:s)&&(l&&0<l.length?s.apply(o,l):s.call(o)),u+=4;e._queueBeingFlushed=null,p&&c&&c(),-1!==(d=function(e,t){for(var n,i=0,r=t;i<=r;i++)if(n=e.queueNames[i],e.queues[n]._queue.length)return i;return-1}(this,r))?r=d:r++}}},t.DeferredActionQueues=n}),e("backburner",["backburner/deferred_action_queues","exports"],function(e,t){"use strict";var n,s,l,i=e.DeferredActionQueues,d=[].slice,c=[].pop,o=[],u=[],p=[],h=this,r=/\d+/;unction a(e,t){this.queueNames=e,this.options=t||{},this.options.defaultQueue||(this.options.defaultQueue=e[0]),this.instanceStack=[]}function m(e){e.begin(),n=h.setTimeout(}function v(o,e,t){(!s||e<l)&&(s&&clearTimeout(s),s=h.setTimeout(function(){var e,t,n,i,r,a;l=s=null,e=o,a=+new Date,e.run(function(){for(i=0,r=p.length;i<r&&(t=p[i],!(a<t));i+=2);for(n=p.splice(0,i),i=1,r=n.length;i<r;i+=2)e.schedule(e.options.defaultQueue,null,n[i])}),p.length&&v(e,p[0],p[0]-a)},t),l=e)}function g(e,t){for(var n,i=-1,r=0,a=u.length;r<a;r++)if((n=u[r])[0]===e&&n[1]===t){i=r;break}return i}function y(e,t){for(var n,i=-1,r=0,a=o.length;r<a;r++)if((n=o[r])[0]===e&&n[1]===t){i=r;break}return i}(a.prototype={queueNames:null,options:null,currentInstance:null,instanceStack:null,begin:function(){var e=this.options&&this.options.onBegin,t=this.currentInstance;t&&this.instanceStack.push(t),this.currentInstance=new i(this.queueNames,this.options),e&&e(this.currentInstance,t)},end:function(){var e=this.options&&this.options.onEnd,t=this.currentInstance,n=null;try{t.flush()}finally{this.currentInstance=null,this.instanceStack.length&&(n=this.instanceStack.pop(),this.currentInstance=n),e&&e(t,n)}},run:function(e,t){var n;this.begin(),t||(t=e,e=null),"string"==typeof t&&(t=e[t]);try{n=2<arguments.length?t.apply(e,d.call(arguments,2)):t.call(e)}finally{this.end()}return n},defer:function(e,t,n){n||(n=t,t=null),"string"==typeof n&&(n=t[n]);var i=this.DEBUG?new Error:void 0,r=3<arguments.length?d.call(arguments,3):void 0;return this.currentInstance||m(this),this.currentInstance.schedule(e,t,n,r,!1,i)},deferOnce:function(e,t,n){n||(n=t,t=null),"string"==typeof n&&(n=t[n]);var i=this.DEBUG?new Error:void 0,r=3<arguments.length?d.call(arguments,3):void 0;return this.currentInstance||m(this),this.currentInstance.schedule(e,t,n,r,!0,i)},setTimeout:function(){var e,t,n,i,r=d.call(arguments),a=r.length;if(0!==a){1===a?(e=r.shift(),t=0):2===a?(i=r[0],t="function"==typeof(a=r[1])||"function"==typeof i[a]?(n=r.shift(),e=r.shift(),0):f(a)?(e=r.shift(),r.shift()):(e=r.shift(),0)):(f(r[r.length-1])&&(t=r.pop()),i=r[0],a=r[1],e=(("function"==typeof a||"string"==typeof a&&null!==i&&a in i)&&(n=r.shift()),r.shift()));var o,s,l=+new Date+parseInt(t,10);for("string"==typeof e&&(e=n[e]),o=0,s=p.length;o<s&&!(l<p[o]);o+=2);return p.splice(o,0,l,c),v(this,l,t),c},throttle:function(t,n){var i=this,r=arguments,e=parseInt(c.call(r),10),a=y(t,n);return-1<a?o[a]:(a=h.setTimeout(function(){i.run.apply(i,r);var e=y(t,n);-1<e&&o.splice(e,1)},e),o.push(e=[t,n,a]),e)},debounce:function(t,n){var e,i,r,a=this,o=arguments,s=c.call(o);return"number"==typeof s||"string"==typeof s?(r=s,s=!1):r=c.call(o),r=parseInt(r,10),-1<(e=g(t,n))&&(i=u[e],u.splice(e,1),clearTimeout(i[2])),r=h.setTimeout(function(){s||a.run.apply(a,o);var e=g(t,n);-1<e&&u.splice(e,1)},r),s&&-1===e&&a.run.apply(a,o),u.push(i=[t,n,r]),i},cancelTimers:function(){for(var e=0,t=o.length;e<t;e++)clearTimeout(o[e][2]);for(o=[],e=0,t=u.length;e<t;e++)clearTimeout(u[e][2]);u=[],s&&(clearTimeout(s),s=null),p=[],n&&(clearTimeout(n),n=null)},hasTimers:function(){return!!p.length||n},cancel:function(e){var t=typeof e;if(e&&"object"==t&&e.queue&&e.method)return e.queue.cancel(e);if("function"==t){for(var n=0,i=p.length;n<i;n+=2)if(p[n+1]===e)return p.splice(n,2),!0}else if("[object Array]"===window.toString.call(e))return this._cancelItem(y,o,e)||this._cancelItem(g,u,e)},_cancelItem:function(e,t,n){return!(n.length<3)&&(-1<(e=e(n[0],n[1]))&&t[e][2]===n[2]&&(t.splice(e,1),clearTimeout(n[2]),!0))}}).schedule=a.prototype.defer,a.prototype.scheduleOnce=a.prototype.deferOnce,a.prototype.later=a.prototype.setTimeout,t.Backburner=a});var P=new(s("backburner").Backburner)(["sync","actions","destroy"],{sync:{before:Ember.beginPropertyChanges,after:Ember.endPropertyChanges},defaultQueue:"actions",onBegin:function(e){Ember.run.currentRunLoop=e},onEnd:function(e,t){Ember.run.currentRunLoop=t}}),Jo=[].slice;function Zo(){Ember.run.currentRunLoop||Ember.assert("You have turned on testing mode, which disabled the run-loop's autorun. You will need to wrap any code with asynchronous side-effects in an Ember.run",!Ember.testing)}Ember.run=function(e,t){var n;if(Ember.onerror)try{n=P.run.apply(P,arguments)}catch(e){Ember.onerror(e)}else n=P.run.apply(P,arguments);return n},Ember.run.join=function(e,t){if(!Ember.run.currentRunLoop)return Ember.run.apply(Ember.run,arguments);var n=Jo.call(arguments);n.unshift("actions"),Ember.run.schedule.apply(Ember.run,n)},Ember.run.bind=function(e,t){var n=arguments;return ,Ember.run.backburner=P,Ember.run,Ember.run.currentRunLoop=null,Ember.run.queues=P.queueNames,Ember.run.begin=function(){P.begin()},Ember.run.end=function(){P.end()},Ember.run.schedule=function(e,t,n){Zo(),P.schedule.apply(P,arguments)},Ember.run.hasScheduledTimers=function(){return P.hasTimers()},Ember.run.cancelTimers=function(){P.cancelTimers()},Ember.run.sync=Ember.run.later=Ember.run.once=function(e,t){Zo();var n=Jo.call(arguments);return n.unshift("actions"),P.scheduleOnce.apply(P,n)},Ember.run.scheduleOnce=function(e,t,n){return Zo(),P.scheduleOnce.apply(P,arguments)},Ember.run.next=function(){var e=Jo.call(arguments);return e.push(1),P.later.apply(P,e)},Ember.run.cancel=function(e){return P.cancel(e)},Ember.run.debounce=function(){return P.debounce.apply(P,arguments)},Ember.run.throttle=function(){return P.throttle.apply(P,arguments)},Ember.LOG_BINDINGS=!!Ember.ENV.LOG_BINDINGS;var es=Ember.get,ts=(Ember.set,Ember.guidFor),ns=/^([A-Z$]|([0-9][A-Z$]))/,is=Ember.isGlobalPath=function(e){return ns.test(e)};function rs(e,t){return es(is(t)?Ember.lookup:e,t)}function as(e,t){this._direction="fwd",this._from=t,this._to=e,this._directionMap=Ember.Map.create()}as.prototype={copy:from:function(e){return this._from=e,this},to:function(e){return this._to=e,this},oneWay:function(){return this._oneWay=!0,this},toString:function(){var e=this._oneWay?"[oneWay]":"";return"Ember.Binding<"+ts(this)+">("+this._from+" -> "+this._to+")"+e},connect:function(e){Ember.assert("Must pass a valid object to Ember.Binding.connect()",!!e);var t=this._from,n=this._to;return Ember.trySet(e,n,rs(e,t)),Ember.addObserver(e,t,this,this.fromDidChange),this._oneWay||Ember.addObserver(e,n,this,this.toDidChange),this._readyToSync=!0,this},disconnect:function(e){Ember.assert("Must pass a valid object to Ember.Binding.disconnect()",!!e);var t=!this._oneWay;return Ember.removeObserver(e,this._from,this,this.fromDidChange),t&&Ember.removeObserver(e,this._to,this,this.toDidChange),this._readyToSync=!1,this},fromDidChange:function(e){this._scheduleSync(e,"fwd")},toDidChange:_scheduleSync:function(e,t){var n=this._directionMap,i=n.get(e);i||(Ember.run.schedule("sync",this,this._sync,e),n.set(e,t)),"back"===i&&"fwd"===t&&n.set(e,"fwd")},_sync:function(e){var t,n,i,r,a,o,s=Ember.LOG_BINDINGS;!e.isDestroyed&&this._readyToSync&&(n=(t=this._directionMap).get(e),i=this._from,r=this._to,t.remove(e),"fwd"===n?(a=rs(e,this._from),s&&Ember.Logger.log(" ",this.toString(),"->",a,e),this._oneWay?Ember.trySet(e,r,a):Ember._suspendObserver(e,r,this,this.toDidChange,function(){Ember.trySet(e,r,a)})):"back"===n&&(o=es(e,this._to),s&&Ember.Logger.log(" ",this.toString(),"<-",o,e),Ember._suspendObserver(e,i,this,this.fromDidChange,function(){Ember.trySet(Ember.isGlobalPath(i)?Ember.lookup:e,i,o)})))}};var os,ss=as,ls={from:function(){var e=new this;return e.from.apply(e,arguments)},to:function(){var e=new this;return e.to.apply(e,arguments)},oneWay:function(e,t){return new this(null,e).oneWay(t)}};for(os in ls)ls.hasOwnProperty(os)&&(ss[os]=ls[os]);function cs(e,t){return t&&0<t.length&&(e.mixins=Kt.call(t,function(e){var t;return e instanceof y?e:((t=new y).properties=e,t)})),e}unction us(e,t,n,i){n=n[e]||i[e];return n=t[e]?n?n.concat(t[e]):t[e]:n}function ps(e,t,n,i,r){var a;return"function"!=typeof(a=(a=void 0===r[t]?i[t]:a)||e[t])?n:Ember.wrap(n,a)}function hs(e,t,n,i,r,a,o,s){var l,c,d,u;n instanceof Ember.Descriptor?n===Yt&&r[t]||(n.func&&(i=i,c=n,d=r,(u=(u=void 0===a[l=t]?d[l]:u)||i.descs[l])&&u instanceof Ember.ComputedProperty&&((c=Jt(c)).func=Ember.wrap(c.func,u.func)),n=c),r[t]=n,a[t]=void 0):(o&&0<=Qt.call(o,t)||"concatenatedProperties"===t||"mergedProperties"===t?(d=e,i=n,n=(l=(l=a)[u=t]||d[u])?("function"==typeof l.concat?l:Ember.makeArray(l)).concat(i):Ember.makeArray(i)):s&&0<=Qt.call(s,t)?n=function(e,t,n,i){var r=i[t]||e[t];if(!r)return n;var a,o,s=Ember.merge({},r);for(a in n)n.hasOwnProperty(a)&&(ds(o=n[a])?s[a]=ps(e,a,o,r,{}):s[a]=o);return s}(e,t,n,a):ds(n)&&(n=ps(e,t,n,a,r)),r[t]=void 0,a[t]=n)}function fs(e,t,n,i,r,a){var o,s,l,c,d,u;or(var h,f,m,v=0,g=e.length;v<g;v++)if(o=e[v],Ember.assert("Expected hash or Mixin instance, got "+Object.prototype.toString.call(o),"object"==typeof o&&null!==o&&"[object Array]"!==Object.prototype.toString.call(o)),h=t,m=void 0,(s=(f=o)instanceof y?h[m=en(f)]?an:(h[m]=f).properties:f)!==an)if(s){for(l in u=tn(r),r.willMergeMixin&&r.willMergeMixin(s),c=us("concatenatedProperties",s,i,r),d=us("mergedProperties",s,i,r),s)s.hasOwnProperty(l)&&(a.push(l),hs(r,l,s[l],u,n,i,c,d));s.hasOwnProperty("toString")&&(r.toString=s.toString)}else o.mixins&&(fs(o.mixins,t,n,i,r,a),o._without&&Xt.call(o._without,p))}function ms(e,t){var n,i,r,a=e,t=t||tn(e),o=t.bindings;if(o){for(n in o)(i=o[n])&&(r=n.slice(0,-7),i instanceof Ember.Binding?(i=i.copy()).to(r):i=new Ember.Binding(r,i),i.connect(a),a[n]=i);t.bindings={}}return e}function vs(e,t,n,i,r){var a=n[i];if(a)for(var o=0,s=a.length;o<s;o++)Ember[r](e,a[o],null,t)}function gs(e,t,n){var i,r,a={},o={},s=tn(e),l=[];fs(t,((r=(t=tn(t=e,!0)).mixins)?t.hasOwnProperty("mixins")||(r=t.mixins=Jt(r)):r=t.mixins={},r),a,o,e,l);for(var c,d,u,p,h,f,m,v,g,y,b=0,w=l.length;b<w;b++)if("constructor"!==(i=l[b])&&o.hasOwnProperty(i)&&(k=a[i],x=o[i],k!==Yt)){for(;k&&k instanceof Gt;){h=e,m=s,v=a,E=o,y=g=void 0,y=(f=k).methodName,v[y]||E[y]?(g=E[y],f=v[y]):g=m.descs[y]?void(f=m.descs[y]):(f=void 0,h[y]);var E={desc:f,value:g},k=E.desc,x=E.value}void 0===k&&void 0===x||(u=x,p=void 0,"function"==typeof(p=(c=e)[d=i])&&(vs(c,d,p,"__ember_observesBefore__","removeBeforeObserver"),vs(c,d,p,"__ember_observes__","removeObserver"),vs(c,d,p,"__ember_listens__","removeListener")),"function"==typeof u&&(vs(c,d,u,"__ember_observesBefore__","addBeforeObserver"),vs(c,d,u,"__ember_observes__","addObserver"),vs(c,d,u,"__ember_listens__","addListener")),p=i,c=x,d=s,u=void 0,on.test(p)&&((u=d.bindings)?d.hasOwnProperty("bindings")||(u=d.bindings=Jt(d.bindings)):u=d.bindings={},u[p]=c),Zt(e,i,k,x,s))}return n||ms(e,s),e}unction bs(){function m(){y||m.proto(),Hn(this,qn,ti),Hn(this,"_super",ti);var e,t=Bn(this),n=t.proto;if(t.proto=this,v&&(e=v,v=null,this.reopen.apply(this,e)),g)for(var i=g,r=(g=null,this.concatenatedProperties),a=0,o=i.length;a<o;a++){var s=i[a];if(Ember.assert("Ember.Object.create no longer supports mixing in other definitions, use createWithMixins instead.",!(s instanceof Ember.Mixin)),"object"!=typeof s&&void 0!==s)throw new Ember.Error("Ember.Object.create only accepts objects.");if(s)for(var l=Ember.keys(s),c=0,d=l.length;c<d;c++){var u,p,h,f=l[c];s.hasOwnProperty(f)&&(h=s[f],Ember.IS_BINDING.test(f)&&((u=t.bindings)?t.hasOwnProperty("bindings")||(u=t.bindings=jn(t.bindings)):u=t.bindings={},u[f]=h),u=t.descs[f],Ember.assert("Ember.Object.create no longer supports defining computed properties.",!(h instanceof Ember.ComputedProperty)),Ember.assert("Ember.Object.create no longer supports defining methods that call _super.",!("function"==typeof h&&-1!==h.toString().indexOf("._super"))),Ember.assert("`actions` must be provided at extend time, not at create time, when Ember.ActionHandler is used (i.e. views, controllers & routes).",!("actions"===f&&Ember.ActionHandler.detect(this))),r&&0<=ei(r,f)&&(h=(p=this[f])?("function"==typeof p.concat?p:Ember.makeArray(p)).concat(h):Ember.makeArray(h)),u?u.set(this,f,h):"function"!=typeof this.setUnknownProperty||f in this?Zn?Ember.defineProperty(this,f,null,h):this[f]=h:this.setUnknownProperty(f,h))}}Xn(this,t),this.init.apply(this,arguments),t.proto=n,$n(this),Yn(this,"init")}var v,g,y=!1;return m.toString=i.prototype.toString,m.willReopen=function(){y&&(m.PrototypeMixin=i.create(m.PrototypeMixin)),y=!1},m._initMixins=function(e){v=e},m._initProperties=function(e){g=e},m.proto=function(){var e=m.superclass;return e&&e.proto(),y||(y=!0,m.PrototypeMixin.applyPartial(m.prototype),Wn(m.prototype)),this.prototype},m}function ws(e,t,n){var i,r,a=e.length;for(i in ai[e.join(".")]=t)oi.call(t,i)&&(r=t[i],e[a]=i,r&&r.toString===ks?(r.toString=Cs(e.join(".")),r[li]=e.join(".")):r&&r.isNamespace&&(n[si(r)]||(n[si(r)]=!0,ws(e,r,n))));e.length=a}function Es(){var e,t,n=Ember.Namespace,i=Ember.lookup;if(!n.PROCESSED)for(var r in i)if("parent"!==r&&"top"!==r&&"frameElement"!==r&&"webkitStorageInfo"!==r&&!("globalStorage"===r&&i.StorageList&&i.globalStorage instanceof i.StorageList)&&(!i.hasOwnProperty||i.hasOwnProperty(r))){try{t=(e=Ember.lookup[r])&&e.isNamespace}catch(e){continue}t&&(Ember.deprecate("Namespaces should not begin with lowercase.",/^[A-Z]/.test(r)),e[li]=r)}}function ks(){var e,t;return Ember.BOOTED||this[li]||xs(),this[li]?t=this[li]:this._toString?t=this._toString:(e=function e(t){t=t.superclass;if(t)return t[li]||e(t)}(this),this.toString=Cs(t=e?"(subclass of "+e+")":"(unknown mixin)")),t}function xs(){var e=!ri.PROCESSED,t=Ember.anyUnprocessedMixins;if(e&&(Es(),ri.PROCESSED=!0),e||t){for(var n,i=ri.NAMESPACES,r=0,a=i.length;r<a;r++)ws([(n=i[r]).toString()],n,{});Ember.anyUnprocessedMixins=!1}}unction _s(e,t){t=t.slice(8);t in this||vi(this,t)}function Ts(e,t){t=t.slice(8);t in this||gi(this,t)}nction Ps(t,n){var i=2===arguments.length;return function(e){return e=c(e,t),i?n===e:!!e}}function Is(e,t){return"@this"===t?e:Si(e,t)}function Ls(e,t,n,i,r,a){this.callbacks=e,this.cp=t,this.instanceMeta=n,this.dependentKeysByGuid={},this.trackedArraysByGuid={},this.suspended=!1,this.changedItems={}}function Ds(e,t,n){Ember.assert("Internal error: trackedArray is null or undefined",n),this.dependentArray=e,this.index=t,this.item=e.objectAt(t),this.trackedArray=n,this.beforeObserver=null,this.observer=null,this.destroyed=!1}unction Ms(e,t,n,i,r,a){e={arrayChanged:e,index:n,item:t,propertyName:i,property:r};return a&&(e.previousValues=a),e}function Ns(e,t){if(!qi.test(t))return e=Is(e,t),Ember.Array.detect(e)}function Rs(e,t,n){this.context=e,this.propertyName=t,this.cache=Pi(e).cache,this.dependentArrays={},this.sugarMeta={},this.initialValue=n}function Vs(e){var r=this,t=(this.options=e,this._instanceMetas={},this._dependentKeys=null,this._itemPropertyKeys={},this._previousItemPropertyKeys={},this.readOnly(),this.cacheable(),this.recomputeOnce=function(e){Ember.run.once(this,t,e)},function(t){r._dependentKeys;var i=r._instanceMeta(this,t),n=r._callbacks();!function(e,t){var n;e._callbacks(),e._hasInstanceMeta(this,t)?(n=e._instanceMeta(this,t)).setValue(e.resetValue(n.getValue())):n=e._instanceMeta(this,t),e.options.initialize&&e.options.initialize.call(this,n.getValue(),{property:e,propertyName:t},n.sugarMeta)}.call(this,r,t),i.dependentArraysObserver.suspendArrayObservers(function(){m(r._dependentKeys,function(e){var t,n;Ns(this,e)&&((t=Is(this,e))===(n=i.dependentArrays[e])?r._previousItemPropertyKeys[e]&&(delete r._previousItemPropertyKeys[e],i.dependentArraysObserver.setupPropertyObservers(e,r._itemPropertyKeys[e])):(i.dependentArrays[e]=t,n&&i.dependentArraysObserver.teardownObservers(n,e),t&&i.dependentArraysObserver.setupObservers(t,e)))},this)},this),m(r._dependentKeys,function(e){Ns(this,e)&&(e=Is(this,e))&&function(n,i,r,a,o){m(n,function(e,t){o.setValue(i.addedItem.call(this,o.getValue(),e,Ms(n,e,t,a,r),o.sugarMeta))},this)}.call(this,e,n,r,t,i)},this)});this.func=function(e){return Ember.assert("Computed reduce values require at least one dependent key",r._dependentKeys),t.call(this,e),r._instanceMeta(this,e).getValue()}}function js(e){return e}function Hs(){var e,n=this;return Fi.apply(this,arguments),this.func=(e=this.func,function(t){return n._hasInstanceMeta(this,t)||Ui(n._dependentKeys,function(e){Ember.addObserver(this,e,function(){n.recomputeOnce.call(this,t)})},this),e.apply(this,arguments)}),this}function qs(e,t,n,i){var r,a,o,s;return arguments.length<4&&(i=d(e,"length")),(n=arguments.length<3?0:n)===i?n:(r=n+Math.floor((i-n)/2),(o=l(a=e.objectAt(r)))===(s=l(t))?r:(a=0===(a=this.order(a,t))?o<s?-1:1:a)<0?this.binarySearch(e,t,r+1,i):0<a?this.binarySearch(e,t,n,r):r);function l(e){return Wi.detectInstance(e)?u(d(e,"content")):u(e)}}Ember.Binding=as,Ember.bind=Ember.oneWay=function(e,t,n){return new Ember.Binding(t,n).oneWay().connect(e)},Kt=Ember.ArrayPolyfills.map,Qt=Ember.ArrayPolyfills.indexOf,Xt=Ember.ArrayPolyfills.forEach,o=[].slice,Jt=Ember.create,Zt=Ember.defineProperty,en=Ember.guidFor,tn=Ember.meta,nn=Ember.META_KEY,rn=Ember.expandProperties,an={},on=Ember.IS_BINDING=/^.+Binding$/,Ember.mixin=function(e){return gs(e,o.call(arguments,1),!1),e},Ember.Mixin=function(){return cs(this,arguments)},(y=Ember.Mixin).prototype={properties:null,mixins:null,ownerConstructor:null},y._apply=gs,y.applyPartial=y.finishPartial=ms,Ember.anyUnprocessedMixins=!1,y.create=function(){Ember.anyUnprocessedMixins=!0;return cs(new this,arguments)},(t=y.prototype).reopen=function(){this.properties?((e=y.create()).properties=this.properties,delete this.properties,this.mixins=[e]):this.mixins||(this.mixins=[]);for(var e,t,n=arguments.length,i=this.mixins,r=0;r<n;r++)e=arguments[r],Ember.assert("Expected hash or Mixin instance, got "+Object.prototype.toString.call(e),"object"==typeof e&&null!==e&&"[object Array]"!==Object.prototype.toString.call(e)),e instanceof y?i.push(e):((t=y.create()).properties=e,i.push(t));return this},t.apply=function(e){return gs(e,[this],!1)},t.applyPartial=t.detect=function(e){return!!e&&(e instanceof y?function e(t,n,i){var r=en(t);if(!i[r]){if(i[r]=!0,t===n)return!0;for(var a=t.mixins,o=a?a.length:0;0<=--o;)if(e(a[o],n,i))return!0}return!1}(e,this,{}):!!(e=(e=e[nn])&&e.mixins)&&!!e[en(this)])},t.without=function(){var e=new y(this);return e._without=o.call(arguments),e},t.keys=function(){var e,t={},n=[];for(e in!function t(n,e,i){if(!i[en(e)])if(i[en(e)]=!0,e.properties){var r,a=e.properties;for(r in a)a.hasOwnProperty(r)&&(n[r]=!0)}else e.mixins&&Xt.call(e.mixins,function(e){t(n,e,i)})}(t,this,{}),t)t.hasOwnProperty(e)&&n.push(e);return n},y.mixins=function(e){var e=e[nn],t=e&&e.mixins,n=[];if(t)for(var i in t){i=t[i];i.properties||n.push(i)}return n},(Yt=new Ember.Descriptor).toString=function(){return"(Required Property)"},Ember.required=function(){return Yt},(Gt=function(e){this.methodName=e}).prototype=new Ember.Descriptor,Ember.aliasMethod=function(e){return new Gt(e)},Ember.observer=function(){function e(e){i.push(e)}var t=o.call(arguments,-1)[0],n=o.call(arguments,0,-1);"function"!=typeof t&&(t=arguments[0],n=o.call(arguments,1));for(var i=[],r=0;r<n.length;++r)rn(n[r],e);if("function"!=typeof t)throw new Ember.Error("Ember.observer called without a function");return t.__ember_observes__=i,t},Ember.immediateObserver=function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];Ember.assert("Immediate observers must observe internal properties only, not properties on other objects.","string"!=typeof n||-1===n.indexOf("."))}return Ember.observer.apply(this,arguments)},Ember.beforeObserver=function(){ar t=o.call(arguments,-1)[0],n=o.call(arguments,0,-1);"function"!=typeof t&&(t=arguments[0],n=o.call(arguments,1));for(var i=[],r=0;r<n.length;++r)rn(n[r],e);if("function"!=typeof t)throw new Ember.Error("Ember.beforeObserver called without a function");return t.__ember_observesBefore__=i,t},ln=Ember.EnumerableUtils.forEach,cn=Ember.EnumerableUtils.indexOf,Ember.libraries=(sn=0,(n=[]).register=function(e,t){ys(e)||n.push({name:e,version:t})},n.registerCoreLibrary=function(e,t){ys(e)||n.splice(sn++,0,{name:e,version:t})},n.deRegister=function(e){e=ys(e);e&&n.splice(cn(n,e),1)},n.each=function(t){ln(n,},n),Ember.libraries.registerCoreLibrary("Ember",Ember.VERSION),e("rsvp/all",["./promise","exports"],,e("rsvp/all_settled",["./promise","./utils","exports"],function(e,t,n){"use strict";var l=e.default,c=t.isArray,d=t.isNonThenable;.default=function(s,e){return new l(function(n,e){if(!c(s))throw new TypeError("You must pass an array to allSettled.");var t,i=s.length;if(0===i)n([]);else for(var r=new Array(i),a=0;a<s.length;a++)t=s[a],d(t)?o(a,u(t)):l.cast(t).then(function(t){return (a),function(t){return (a));,e)}}),e("rsvp/config",["./events","exports"],function(e,t){"use strict";var e=e.default,n={instrument:!1};e.mixin(n),t.config=n,t.configure=function(e,t){if("onerror"!==e)return 2!==arguments.length?n[e]:void(n[e]=t);n.on("error",t)}}),e("rsvp/defer",["./promise","exports"],,e("rsvp/events",["exports"],function(e){"use strict";default={mixin:on:function(e,t){var n=a(this),i=n[e];i=i||(n[e]=[]),-1===r(i,t)&&i.push(t)},off:function(e,t){var n,i=a(this);t?(n=i[e],-1!==(t=r(n,t))&&n.splice(t,1)):i[e]=[]},trigger:function(e,t){var n;if(n=a(this)[e])for(var i=0;i<n.length;i++)(0,n[i])(t)}}}),e("rsvp/filter",["./all","./map","./utils","exports"],function(e,t,n,i){"use strict";var r=e.default,a=t.default,o=n.isFunction,s=n.isArray;i.default=function(e,t,n){return r(e,n).then(function(r){if(!s(e))throw new TypeError("You must pass an array to filter.");if(o(t))return a(e,t,n).then(function(e){for(var t=r.length,n=[],i=0;i<t;i++)e[i]&&n.push(r[i]);return n});throw new TypeError("You must pass a function to filter's second argument.")})}}),e("rsvp/hash",["./promise","./utils","exports"],function(e,t,n){"use strict";var d=e.default,u=t.isNonThenable,p=t.keysOf;n.default=function(c,e){return new d(function(n,t){var e,i,r={},a=p(c),o=a.length;if(0===o)n(r);else for(var s=0;s<a.length;s++)i=a[s],e=c[i],u(e)?(r[i]=e,0==--o&&n(r)):d.cast(e).then(function(t){return function(e){r[t]=e,0==--o&&n(r)}}(i),l);function l(e){o=0,t(e)}})}}),e("rsvp/instrument",["./config","./utils","exports"],function(e,t,n){"use strict";var i=e.config,r=t.now;n.default=),e("rsvp/map",["./promise","./all","./utils","exports"],function(e,t,n,i){"use strict";e.default;var s=t.default,l=n.isArray,c=n.isFunction;i.default=function(r,a,o){return s(r,o).then(function(e){if(!l(r))throw new TypeError("You must pass an array to map.");if(!c(a))throw new TypeError("You must pass a function to map's second argument.");for(var t=e.length,n=[],i=0;i<t;i++)n.push(a(e[i]));return s(n,o)})}}),e("rsvp/node",["./promise","exports"],function(e,t){"use strict";var n=e.default,s=Array.prototype.slice;t.default=function(o,t){return function(){var e=s.call(arguments),a=this||t;return new n(function(t,r){n.all(e).then(function(e){try{e.push((n=t,i=r,function(e,t){e?i(e):n(2<arguments.length?s.call(arguments,1):t)})),o.apply(a,e)}catch(e){r(e)}var n,i})})}}}),e("rsvp/promise",["./config","./events","./instrument","./utils","./promise/cast","./promise/all","./promise/race","./promise/resolve","./promise/reject","exports"],function(e,t,n,i,r,a,o,s,l,c){"use strict";var d=e.config,u=(t.default,n.default),p=i.objectOrFunction,h=i.isFunction,e=i.now,t=r.default,n=a.default,i=o.default,r=s.default,a=l.default,o="rsvp_"+e()+"-",f=0;function m(){}function v(e,t){if(!h(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof v))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");if(this._id=f++,this._label=t,this._subscribers=[],d.instrument&&u("created",this),m!==e){var t=e,n=this;ry{t(function(e){C(n,e)},i)}catch(e){i(e)}}}(c.default=v).cast=t,v.all=n,v.race=i,v.resolve=r,v.reject=a;var g=void 0,y=0,b=1,w=2;function E(e,t){var n=e._subscribers,i=e._detail;d.instrument&&u(t===b?"fulfilled":"rejected",e);for(var r=0;r<n.length;r+=3)k(t,n[r],n[r+t],i);e._subscribers=null}unction x(t,n){var i,e=null;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(p(n)&&(e=n.then,h(e)))return e.call(n,function(e){if(i)return!0;i=!0,(n!==e?C:_)(t,e)},"derived from: "+(t._label||" unknown promise")),1}catch(e){return i||T(t,e),1}}unction _(e,t){e._state===g&&(e._state=y,e._detail=t,d.async(S,e))}rototype={constructor:v,_id:void 0,_guidKey:o,_label:void 0,_state:void 0,_detail:void 0,_subscribers:void 0,_onerror:function(e){d.trigger("error",e)},then:function(e,t,n){var i,r,a,o=this,s=(this._onerror=null,new this.constructor(m,n));return this._state?(i=arguments,d.async():(n=s,e=e,t=t,a=(r=(r=this)._subscribers).length,r[a]=n,r[a+b]=e,r[a+w]=t),d.instrument&&u("chained",o,s),s},catch:finally:}),e("rsvp/promise/all",["../utils","exports"],function(e,t){"use strict";var c=e.isArray,d=e.isNonThenable;t.default=function(s,e){var l=this;return new l(function(n,t){if(!c(s))throw new TypeError("You must pass an array to all.");var e,i=s.length,r=new Array(i);if(0===i)n(r);else for(var a=0;a<s.length;a++)e=s[a],d(e)?(r[a]=e,0==--i&&n(r)):l.cast(e).then(a),o);,e)}}),e("rsvp/promise/cast",["exports"],function(e){"use strict";e.default=function(t,e){return t&&"object"==typeof t&&t.constructor===this?t:new this(function(e){e(t)},e)}}),e("rsvp/promise/race",["../utils","exports"],function(e,t){"use strict";var c=e.isArray,d=(e.isFunction,e.isNonThenable);t.default=function(o,e){var s,l=this;return new l(function(t,n){if(!c(o))throw new TypeError("You must pass an array to race.");var i=!0;function e(e){i&&(i=!1,t(e))}or(var a=0;a<o.length;a++){if(s=o[a],d(s))return i=!1,void t(s);l.cast(s).then(e,r)}},e)}}),e("rsvp/promise/reject",["exports"],function(e){"use strict";e.default=function(n,e){return new this(function(e,t){t(n)},e)}}),e("rsvp/promise/resolve",["exports"],function(e){"use strict";e.default=function(n,e){return new this(function(e,t){e(n)},e)}}),e("rsvp/race",["./promise","exports"],function(e,t){"use strict";var n=e.default;t.default=function(e,t){return n.race(e,t)}}),e("rsvp/reject",["./promise","exports"],function(e,t){"use strict";var n=e.default;t.default=function(e,t){return n.reject(e,t)}}),e("rsvp/resolve",["./promise","exports"],function(e,t){"use strict";var n=e.default;t.default=function(e,t){return n.resolve(e,t)}}),e("rsvp/rethrow",["exports"],,e("rsvp/utils",["exports"],function(e){"use strict";.objectOrFunction=t,e.isFunction=function(e){return"function"==typeof e},e.isNonThenable=e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)};var n=Date.now||function(){return(new Date).getTime()},n=(e.now=n,Object.keys||;e.keysOf=n}),e("rsvp",["./rsvp/promise","./rsvp/events","./rsvp/node","./rsvp/all","./rsvp/all_settled","./rsvp/race","./rsvp/hash","./rsvp/rethrow","./rsvp/defer","./rsvp/config","./rsvp/map","./rsvp/resolve","./rsvp/reject","./rsvp/filter","exports"],function(e,t,n,i,r,a,o,s,l,c,d,u,p,h,f){"use strict";var e=e.default,t=t.default,n=n.default,i=i.default,r=r.default,a=a.default,o=o.default,s=s.default,l=l.default,m=c.config,c=c.configure,d=d.default,u=u.default,p=p.default,h=h.default;f("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var g,y=window.__PROMISE_INSTRUMENTATION__;for(g in c("instrument",!0),y)y.hasOwnProperty(g)&&v(g,y[g])}f.Promise=e,f.EventTarget=t,f.all=i,f.allSettled=r,f.race=a,f.hash=o,f.rethrow=s,f.defer=l,f.denodeify=n,f.configure=c,f.on=v,f.off=f.resolve=u,f.reject=p,f.async=function(e,t){m.async(e,t)},f.map=d,f.filter=h}),Ember.MODEL_FACTORY_INJECTIONS=!!Ember.ENV.MODEL_FACTORY_INJECTIONS,e("container",[],function(){"use strict";unction n(e){this.parent=e,this.children=[],this.resolver=e&&e.resolver||function(){},this.registry=new t(e&&e.registry),this.cache=new t(e&&e.cache),this.factoryCache=new t(e&&e.factoryCache),this.resolveCache=new t(e&&e.resolveCache),this.typeInjections=new t(e&&e.typeInjections),this.injections={},this.factoryTypeInjections=new t(e&&e.factoryTypeInjections),this.factoryInjections={},this._options=new t(e&&e._options),this._typeOptions=new t(e&&e._typeOptions)}function s(e,t,n){var i;return n=n||{},e.cache.has(t)&&!1!==n.singleton?e.cache.get(t):void 0!==(i=function(e,t){var n=o(e,t);if(!1===r(e,t,"instantiate"))return n;if(n)return"function"==typeof n.extend?n.create():n.create(d(e,t))}(e,t))?(!1!==r(e,t,"singleton")&&!1!==n.singleton&&e.cache.set(t,i),i):void 0}unction c(e,t){var n={};if(t)for(var i,r,a=0,o=t.length;a<o;a++){if(void 0===(r=s(e,(i=t[a]).fullName)))throw new Error("Attempting to inject an unknown injection: `"+i.fullName+"`");n[i.property]=r}return n}function r(e,t,n){var i=e._options.get(t);return i&&void 0!==i[n]||(t=t.split(":")[0],i=e._typeOptions.get(t))?i[n]:void 0}function o(e,t){var n,i,r,a,o=e.resolve(t),s=e.factoryCache,l=t.split(":")[0];if(void 0!==o)return s.has(t)?s.get(t):!o||"function"!=typeof o.extend||!Ember.MODEL_FACTORY_INJECTIONS&&"model"===l?o:(l=d(e,t),n=e,r=(i=t).split(":")[0],a=(a=(a=[]).concat(n.factoryTypeInjections.get(r)||[])).concat(n.factoryInjections[i]||[]),(a=c(n,a))._debugContainerKey=i,(r=a)._toString=e.makeToString(o,t),(n=o.extend(l)).reopenClass(r),s.set(t,n),n)}function d(e,t){var n=t.split(":")[0],i=(i=[]).concat(e.typeInjections.get(n)||[]);return(i=c(e,i=i.concat(e.injections[t]||[])))._debugContainerKey=t,i.container=e,i}function i(n){n.cache.eachLocal(function(e,t){!1!==r(n,e,"instantiate")&&t.destroy()}),n.cache.dict={}}function l(e,t,n,i){var r=e.get(t);r||e.set(t,r=[]),r.push({property:n,fullName:i})}t.prototype={parent:null,dict:null,get:function(e){var t=this.dict;return t.hasOwnProperty(e)?t[e]:this.parent?this.parent.get(e):void 0},set:function(e,t){this.dict[e]=t},remove:has:function(e){return!!this.dict.hasOwnProperty(e)||!!this.parent&&this.parent.has(e)},eachLocal:function(e,t){var n,i=this.dict;for(n in i)i.hasOwnProperty(n)&&e.call(t,n,i[n])}},n.prototype={parent:null,children:null,resolver:null,registry:null,cache:null,typeInjections:null,injections:null,_options:null,_typeOptions:null,child:set:function(e,t,n){e[t]=n},register:function(e,t,n){if(p(e),void 0===t)throw new TypeError("Attempting to register an unknown factory: `"+e+"`");var i=this.normalize(e);if(this.cache.has(i))throw new Error("Cannot re-register: `"+e+"`, as it has already been looked up.");this.registry.set(i,t),this._options.set(i,n||{})},unregister:function(e){p(e);e=this.normalize(e);this.registry.remove(e),this.cache.remove(e),this.factoryCache.remove(e),this.resolveCache.remove(e),this._options.remove(e)},resolve:function(e){p(e);var e=this.normalize(e),t=this.resolveCache.get(e);return t||(t=this.resolver(e)||this.registry.get(e),this.resolveCache.set(e,t),t)},describe:function(e){return e},normalize:function(e){return e},makeToString:function(e,t){return e.toString()},lookup:function(e,t){return p(e),s(this,this.normalize(e),t)},lookupFactory:function(e){return p(e),o(this,this.normalize(e))},has:function(e){p(e);var t=this,e=this.normalize(e);return!!t.cache.has(e)||!!t.resolve(e)},optionsForType:function(e,t){this.parent&&a("optionsForType"),this._typeOptions.set(e,t)},options:function(e,t){this.optionsForType(e,t)},typeInjection:function(e,t,n){p(n),this.parent&&a("typeInjection"),l(this.typeInjections,e,t,n)},injection:function(e,t,n){this.parent&&a("injection"),p(n);n=this.normalize(n);if(-1===e.indexOf(":"))return this.typeInjection(e,t,n);p(e);e=this.normalize(e);h(this.injections,e,t,n)},factoryTypeInjection:function(e,t,n){this.parent&&a("factoryTypeInjection"),l(this.factoryTypeInjections,e,t,this.normalize(n))},factoryInjection:function(e,t,n){this.parent&&a("injection");var i=this.normalize(e),r=this.normalize(n);if(p(n),-1===e.indexOf(":"))return this.factoryTypeInjection(i,t,r);p(e),h(this.factoryInjections,i,t,r)},destroy:function(){for(var n,i,e=0,t=this.children.length;e<t;e++)this.children[e].destroy();this.children=[],i=function(e){e.destroy()},(n=this).cache.eachLocal(function(e,t){!1!==r(n,e,"instantiate")&&i(t)}),this.parent=void 0,this.isDestroyed=!0},reset:function(){for(var e=0,t=this.children.length;e<t;e++)i(this.children[e]);i(this)}};var u=/^[^:]+.+:[^:]+$/;unction h(e,t,n,i){(e[t]=e[t]||[]).push({property:n,fullName:i})}return n}),pn=Ember.EnumerableUtils.indexOf,Ember.compare=function e(t,n){if(t===n)return 0;var i=Ember.typeOf(t),r=Ember.typeOf(n),a=Ember.Comparable;if(a){if("instance"===i&&a.detect(t.constructor))return t.constructor.compare(t,n);if("instance"===r&&a.detect(n.constructor))return 1-n.constructor.compare(n,t)}if(!(s=Ember.ORDER_DEFINITION_MAPPING)){for(var o=Ember.ORDER_DEFINITION,s=Ember.ORDER_DEFINITION_MAPPING={},l=0,c=o.length;l<c;++l)s[o[l]]=l;delete Ember.ORDER_DEFINITION}a=s[i],r=s[r];if(a<r)return-1;if(r<a)return 1;switch(i){case"boolean":case"number":return t<n?-1:n<t?1:0;case"string":var d=t.localeCompare(n);return d<0?-1:0<d?1:0;case"array":for(var d=t.length,u=n.length,p=Math.min(d,u),h=0,f=0;0===h&&f<p;)h=e(t[f],n[f]),f++;return 0!==h?h:d<u?-1:u<d?1:0;case"instance":return Ember.Comparable&&Ember.Comparable.detect(t)?t.compare(t,n):0;case"date":u=t.getTime(),d=n.getTime();return u<d?-1:d<u?1:0;default:return 0}},Ember.copy=function(e,t){return"object"!=typeof e||null===e?e:Ember.Copyable&&Ember.Copyable.detect(e)?e.copy(t):function e(t,n,i,r){var a,o,s;if("object"!=typeof t||null===t)return t;if(n&&0<=(o=pn(i,t)))return r[o];if(Ember.assert("Cannot clone an Ember.Object that does not implement Ember.Copyable",!(t instanceof Ember.Object)||Ember.Copyable&&Ember.Copyable.detect(t)),"array"===Ember.typeOf(t)){if(a=t.slice(),n)for(o=a.length;0<=--o;)a[o]=e(a[o],n,i,r)}else if(Ember.Copyable&&Ember.Copyable.detect(t))a=t.copy(n,i,r);else for(s in a={},t)t.hasOwnProperty(s)&&"__"!==s.substring(0,2)&&(a[s]=n?e(t[s],n,i,r):t[s]);return n&&(i.push(t),r.push(a)),a}(e,t,t?[]:null,t?[]:null)},Ember.isEqual=function(e,t){return e&&"function"==typeof e.isEqual?e.isEqual(t):e===t},Ember.ORDER_DEFINITION=Ember.ENV.ORDER_DEFINITION||["undefined","null","boolean","number","string","array","object","instance","function","class","date"],Ember.keys=Object.keys,Ember.keys&&!Ember.create.isSimulated||(dn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","valueOf","toLocaleString","toString"],un=function(e,t,n){"__"===n.substring(0,2)||"_super"===n||0<=pn(t,n)||e.hasOwnProperty(n)&&t.push(n)},Ember.keys=function(e){var t,n=[];for(t in e)un(e,n,t);for(var i=0,r=dn.length;i<r;i++)un(e,n,t=dn[i]);return n}),hn=/[ _]/g,fn={},mn=/([a-z\d])([A-Z])/g,vn=/(\-|_|\.|\s)+(.)?/g,gn=/([a-z\d])([A-Z]+)/g,yn=/\-|\s+/g,bn=/[_|\/|\s]+/g,wn=/[^a-z0-9\-]+/gi,En=/[\-]+/g,kn=/^-+|-+$/g,Ember.STRINGS={},Ember.String={fmt:function(e,n){var i=0;return e.replace(/%@([0-9]+)?/g,function(e,t){return t=t?parseInt(t,10)-1:i++,null===(e=n[t])?"(null)":void 0===e?"":Ember.inspect(e)})},loc:function(e,t){return e=Ember.STRINGS[e]||e,Ember.String.fmt(e,t)},w:function(e){return e.split(/\s+/)},decamelize:dasherize:function(e){var t,n=fn;return n.hasOwnProperty(e)?n[e]:(t=Ember.String.decamelize(e).replace(hn,"-"),n[e]=t)},camelize:function(e){return e.replace(vn,.replace(/^([A-Z])/,},classify:function(e){for(var t=e.split("."),n=[],i=0,r=t.length;i<r;i++){var a=Ember.String.camelize(t[i]);n.push(a.charAt(0).toUpperCase()+a.substr(1))}return n.join(".")},underscore:capitalize:,Ember.FEATURES.isEnabled("string-humanize")&&(Ember.String.humanize=function(e){return e.replace(/_id$/,"").replace(/_/g," ").replace(/^\w/g,function(e){return e.toUpperCase()})}),Ember.FEATURES.isEnabled("string-parameterize")&&(Ember.String.parameterize=,_n=Ember.String.fmt,Tn=Ember.String.w,Sn=Ember.String.loc,An=Ember.String.camelize,Pn=Ember.String.decamelize,In=Ember.String.dasherize,Ln=Ember.String.underscore,Dn=Ember.String.capitalize,On=Ember.String.classify,Ember.FEATURES.isEnabled("string-humanize")&&(xn=Ember.String.humanize),Ember.FEATURES.isEnabled("string-parameterize")&&(Cn=Ember.String.parameterize),!0!==Ember.EXTEND_PROTOTYPES&&!Ember.EXTEND_PROTOTYPES.String||(String.prototype.fmt=function(){return _n(this,arguments)},String.prototype.w=function(){return Tn(this)},String.prototype.loc=function(){return Sn(this,arguments)},String.prototype.camelize=function(){return An(this)},String.prototype.decamelize=function(){return Pn(this)},String.prototype.dasherize=function(){return In(this)},String.prototype.underscore=function(){return Ln(this)},String.prototype.classify=function(){return On(this)},String.prototype.capitalize=function(){return Dn(this)},Ember.FEATURES.isEnabled("string-humanize")&&(String.prototype.humanize=function(){return xn(this)}),Ember.FEATURES.isEnabled("string-parameterize")&&(String.prototype.parameterize=function(){return Cn(this)})),Mn=Ember.get,Nn=Ember.set,Rn=Array.prototype.slice,Vn=Ember.getProperties,Ember.Observable=Ember.Mixin.create({get:function(e){return Mn(this,e)},getProperties:set:setProperties:function(e){return Ember.setProperties(this,e)},beginPropertyChanges:function(){return Ember.beginPropertyChanges(),this},endPropertyChanges:propertyWillChange:function(e){return Ember.propertyWillChange(this,e),this},propertyDidChange:notifyPropertyChange:addBeforeObserver:function(e,t,n){Ember.addBeforeObserver(this,e,t,n)},addObserver:function(e,t,n){Ember.addObserver(this,e,t,n)},removeObserver:hasObserverFor:getWithDefault:function(e,t){return Ember.getWithDefault(this,e,t)},incrementProperty:function(e,t){return Ember.isNone(t)&&(t=1),Ember.assert("Must pass a numeric value to incrementProperty",!isNaN(parseFloat(t))&&isFinite(t)),Nn(this,e,(Mn(this,e)||0)+t),Mn(this,e)},decrementProperty:function(e,t){return Ember.isNone(t)&&(t=1),Ember.assert("Must pass a numeric value to decrementProperty",!isNaN(parseFloat(t))&&isFinite(t)),Nn(this,e,(Mn(this,e)||0)-t),Mn(this,e)},toggleProperty:function(e){return Nn(this,e,!Mn(this,e)),Mn(this,e)},cacheFor:function(e){return Ember.cacheFor(this,e)},observersForKey:function(e){return Ember.observersFor(this,e)}}),Ember.set,Ember.get,jn=Ember.create,Hn=Ember.platform.defineProperty,qn=Ember.GUID_KEY,zn=Ember.guidFor,Fn=Ember.generateGuid,Bn=Ember.meta,Un=Ember.META_KEY,Wn=Ember.rewatch,$n=Ember.finishChains,Yn=Ember.sendEvent,Gn=Ember.destroy,Kn=Ember.run.schedule,i=Ember.Mixin,Qn=i._apply,Xn=i.finishPartial,Jn=i.prototype.reopen,Zn=Ember.ENV.MANDATORY_SETTER,ei=Ember.EnumerableUtils.indexOf,ti={configurable:!0,writable:!0,enumerable:!1,value:void 0},(O=bs()).toString=function(){return"Ember.CoreObject"},O.PrototypeMixin=i.create({reopen:init:function(){},concatenatedProperties:null,isDestroyed:!1,isDestroying:!1,destroy:willDestroy:Ember.K,_scheduledDestroy:function(){this.isDestroyed||(Gn(this),this.isDestroyed=!0)},bind:function(e,t){return(t=t instanceof Ember.Binding?t:Ember.Binding.from(t)).to(e).connect(this),t},toString:function(){var e,t="function"==typeof this.toStringExtension?":"+this.toStringExtension():"",t="<"+this.constructor.toString()+":"+zn(this)+t+">";return this.toString=(e=t,function(){return e}),t}}),O.PrototypeMixin.ownerConstructor=O,Ember.config.overridePrototypeMixin&&Ember.config.overridePrototypeMixin(O.PrototypeMixin),O.__super__=null,(t=i.create({ClassMixin:Ember.required(),PrototypeMixin:Ember.required(),isClass:!0,isMethod:!1,extend:function(){var e,t=bs();return t.ClassMixin=i.create(this.ClassMixin),t.PrototypeMixin=i.create(this.PrototypeMixin),(t.ClassMixin.ownerConstructor=t).PrototypeMixin.ownerConstructor=t,Jn.apply(t.PrototypeMixin,arguments),t.superclass=this,t.__super__=this.prototype,(e=t.prototype=jn(this.prototype)).constructor=t,Fn(e),Bn(e).proto=e,t.ClassMixin.apply(t),t},createWithMixins:function(){return 0<arguments.length&&this._initMixins(arguments),new this},create:function(){return 0<arguments.length&&this._initProperties(arguments),new this},reopen:reopenClass:detect:function(e){if("function"==typeof e)for(;e;){if(e===this)return!0;e=e.superclass}return!1},detectInstance:metaForProperty:function(e){var t=this.proto()[Un],t=t&&t.descs[e];return Ember.assert("metaForProperty() could not find a computed property with key '"+e+"'.",!!t&&t instanceof Ember.ComputedProperty),t._meta||{}},eachComputedProperty:function(e,t){var n,i,r=this.proto(),a=Bn(r).descs,o={};for(i in a)(n=a[i])instanceof Ember.ComputedProperty&&e.call(t||this,i,n._meta||o)}})).ownerConstructor=O,Ember.config.overrideClassMixin&&Ember.config.overrideClassMixin(t),(O.ClassMixin=t).apply(O),Ember.CoreObject=O,Ember.Object=Ember.CoreObject.extend(Ember.Observable),Ember.Object.toString=function(){return"Ember.Object"},ni=Ember.get,ii=Ember.ArrayPolyfills.indexOf,(ri=Ember.Namespace=Ember.Object.extend({isNamespace:!0,init:function(){Ember.Namespace.NAMESPACES.push(this),Ember.Namespace.PROCESSED=!1},toString:function(){var e=ni(this,"name");return e||(Es(),this[Ember.GUID_KEY+"_name"])},nameClasses:destroy:function(){var e=Ember.Namespace.NAMESPACES;Ember.lookup[this.toString()]=void 0,e.splice(ii.call(e,this),1),this._super()}})).reopenClass({NAMESPACES:[Ember],NAMESPACES_BY_ID:{},PROCESSED:!1,processAll:xs,byName:function(e){return Ember.BOOTED||xs(),ai[e]}}),ai=ri.NAMESPACES_BY_ID,oi={}.hasOwnProperty,si=Ember.guidFor,li=Ember.NAME_KEY=Ember.GUID_KEY+"_name",Ember.Mixin.prototype.toString=ks,ci=Ember.get,di=Ember.set,ui=Ember.String.fmt,pi=Ember.addBeforeObserver,hi=Ember.addObserver,fi=Ember.removeBeforeObserver,mi=Ember.removeObserver,vi=Ember.propertyWillChange,gi=Ember.propertyDidChange,yi=Ember.meta,bi=Ember.defineProperty,Ember.ObjectProxy=Ember.Object.extend({content:null,_contentDidChange:Ember.observer("content",function(){Ember.assert("Can't set ObjectProxy's content to itself",this.get("content")!==this)}),isTruthy:Ember.computed.bool("content"),_debugContainerKey:null,willWatchProperty:function(e){e="content."+e;pi(this,e,null,_s),hi(this,e,null,Ts)},didUnwatchProperty:function(e){e="content."+e;fi(this,e,null,_s),mi(this,e,null,Ts)},unknownProperty:function(e){var t=ci(this,"content");if(t)return ci(t,e)},setUnknownProperty:function(e,t){var n;return yi(this).proto===this?(bi(this,e,null,t),t):(n=ci(this,"content"),Ember.assert(ui("Cannot delegate set('%@', %@) to the 'content' property of object proxy %@: its 'content' is undefined.",[e,t,this]),n),di(n,e,t))}}),c=Ember.get,wi=Ember.set,Ei=Array.prototype.slice,ki=Ember.EnumerableUtils.indexOf,xi=[],Ember.Enumerable=Ember.Mixin.create({nextObject:Ember.required(Function),firstObject:Ember.computed(function(){var e,t;if(0!==c(this,"length"))return e=Ss(),t=this.nextObject(0,null,e),As(e),t}).property("[]"),lastObject:Ember.computed(function(){var e=c(this,"length");if(0!==e){for(var t,n=Ss(),i=0,r=null;r=t,void 0!==(t=this.nextObject(i++,r,n)););return As(n),r}}).property("[]"),contains:forEach:function(e,t){if("function"!=typeof e)throw new TypeError;var n=c(this,"length"),i=null,r=Ss();void 0===t&&(t=null);for(var a=0;a<n;a++){var o=this.nextObject(a,i,r);e.call(t,o,a,this),i=o}return i=null,r=As(r),this},getEach:setEach:map:function(i,r){var a=Ember.A();return this.forEach(,a},mapBy:mapProperty:Ember.aliasMethod("mapBy"),filter:function(i,r){var a=Ember.A();return this.forEach(,a},reject:filterBy:function(e,t){return this.filter(Ps.apply(this,arguments))},filterProperty:Ember.aliasMethod("filterBy"),rejectBy:function(t,n){return this.reject(2===arguments.length?},rejectProperty:Ember.aliasMethod("rejectBy"),find:function(e,t){for(var n,i,r=c(this,"length"),a=(void 0===t&&(t=null),null),o=!1,s=Ss(),l=0;l<r&&!o;l++)n=this.nextObject(l,a,s),(o=e.call(t,n,l,this))&&(i=n),a=n;return n=a=null,s=As(s),i},findBy:function(e,t){return this.find(Ps.apply(this,arguments))},findProperty:Ember.aliasMethod("findBy"),every:everyBy:Ember.aliasMethod("isEvery"),everyProperty:Ember.aliasMethod("isEvery"),isEvery:function(e,t){return this.every(Ps.apply(this,arguments))},any:function(i,r){return void 0!==this.find(function(e,t,n){return!!i.call(r,e,t,n)})},some:Ember.aliasMethod("any"),isAny:anyBy:Ember.aliasMethod("isAny"),someProperty:Ember.aliasMethod("isAny"),reduce:invoke:function(i){var r,a=Ember.A();return 1<arguments.length&&(r=Ei.call(arguments,1)),this.forEach(this),a},toArray:function(){var n=Ember.A();return this.forEach(function(e,t){n[t]=e}),n},compact:without:function(t){var n;return this.contains(t)?(n=Ember.A(),this.forEach(,n):this},uniq:function(){var t=Ember.A();return this.forEach(,t},"[]":Ember.computed(,addEnumerableObserver:function(e,t){var n=t&&t.willChange||"enumerableWillChange",t=t&&t.didChange||"enumerableDidChange",i=c(this,"hasEnumerableObservers");return i||Ember.propertyWillChange(this,"hasEnumerableObservers"),Ember.addListener(this,"@enumerable:before",e,n),Ember.addListener(this,"@enumerable:change",e,t),i||Ember.propertyDidChange(this,"hasEnumerableObservers"),this},removeEnumerableObserver:function(e,t){var n=t&&t.willChange||"enumerableWillChange",t=t&&t.didChange||"enumerableDidChange",i=c(this,"hasEnumerableObservers");return i&&Ember.propertyWillChange(this,"hasEnumerableObservers"),Ember.removeListener(this,"@enumerable:before",e,n),Ember.removeListener(this,"@enumerable:change",e,t),i&&Ember.propertyDidChange(this,"hasEnumerableObservers"),this},hasEnumerableObservers:Ember.computed(function(){return Ember.hasListeners(this,"@enumerable:change")||Ember.hasListeners(this,"@enumerable:before")}),enumerableContentWillChange:function(e,t){var n="number"==typeof e?e:e?c(e,"length"):e=-1,i="number"==typeof t?t:t?c(t,"length"):t=-1,i=i<0||n<0||i-n!=0;return-1===e&&(e=null),-1===t&&(t=null),Ember.propertyWillChange(this,"[]"),i&&Ember.propertyWillChange(this,"length"),Ember.sendEvent(this,"@enumerable:before",[this,e,t]),this},enumerableContentDidChange:function(e,t){var n="number"==typeof e?e:e?c(e,"length"):e=-1,i="number"==typeof t?t:t?c(t,"length"):t=-1,i=i<0||n<0||i-n!=0;return-1===e&&(e=null),-1===t&&(t=null),Ember.sendEvent(this,"@enumerable:change",[this,e,t]),i&&Ember.propertyDidChange(this,"length"),Ember.propertyDidChange(this,"[]"),this},sortBy:function(){var a=arguments;return this.toArray().sort(function(e,t){for(var n=0;n<a.length;n++){var i=a[n],r=c(e,i),i=c(t,i),r=Ember.compare(r,i);if(r)return r}return 0})}}),l=Ember.get,Ember.set,Ci=Ember.isNone,_i=Ember.EnumerableUtils.map,Ti=Ember.cacheFor,Ember.Array=Ember.Mixin.create(Ember.Enumerable,{length:Ember.required(),objectAt:function(e){if(!(e<0||e>=l(this,"length")))return l(this,e)},objectsAt:nextObject:function(e){return this.objectAt(e)},"[]":Ember.computed(function(e,t){return void 0!==t&&this.replace(0,l(this,"length"),t),this}),firstObject:Ember.computed(function(){return this.objectAt(0)}),lastObject:Ember.computed(function(){return this.objectAt(l(this,"length")-1)}),contains:slice:function(e,t){var n=Ember.A(),i=l(this,"length");for((e=Ci(e)?0:e)<0&&(e=i+e),(t=Ci(t)||i<t?i:t)<0&&(t=i+t);e<t;)n[n.length]=this.objectAt(e++);return n},indexOf:function(e,t){var n,i=l(this,"length");for((t=void 0===t?0:t)<0&&(t+=i),n=t;n<i;n++)if(this.objectAt(n)===e)return n;return-1},lastIndexOf:function(e,t){var n,i=l(this,"length");for((t=void 0===t||i<=t?i-1:t)<0&&(t+=i),n=t;0<=n;n--)if(this.objectAt(n)===e)return n;return-1},addArrayObserver:function(e,t){var n=t&&t.willChange||"arrayWillChange",t=t&&t.didChange||"arrayDidChange",i=l(this,"hasArrayObservers");return i||Ember.propertyWillChange(this,"hasArrayObservers"),Ember.addListener(this,"@array:before",e,n),Ember.addListener(this,"@array:change",e,t),i||Ember.propertyDidChange(this,"hasArrayObservers"),this},removeArrayObserver:function(e,t){var n=t&&t.willChange||"arrayWillChange",t=t&&t.didChange||"arrayDidChange",i=l(this,"hasArrayObservers");return i&&Ember.propertyWillChange(this,"hasArrayObservers"),Ember.removeListener(this,"@array:before",e,n),Ember.removeListener(this,"@array:change",e,t),i&&Ember.propertyDidChange(this,"hasArrayObservers"),this},hasArrayObservers:Ember.computed(,arrayContentWillChange:function(e,t,n){if(void 0===e?(e=0,t=n=-1):(void 0===t&&(t=-1),void 0===n&&(n=-1)),Ember.isWatching(this,"@each")&&l(this,"@each"),Ember.sendEvent(this,"@array:before",[this,e,t,n]),0<=e&&0<=t&&l(this,"hasEnumerableObservers"))for(var i=[],r=e+t,a=e;a<r;a++)i.push(this.objectAt(a));else i=t;return this.enumerableContentWillChange(i,n),this},arrayContentDidChange:function(e,t,n){if(void 0===e?(e=0,t=n=-1):(void 0===t&&(t=-1),void 0===n&&(n=-1)),0<=e&&0<=n&&l(this,"hasEnumerableObservers"))for(var i=[],r=e+n,a=e;a<r;a++)i.push(this.objectAt(a));else i=n;this.enumerableContentDidChange(t,i),Ember.sendEvent(this,"@array:change",[this,e,t,n]);e=l(this,"length"),t=Ti(this,"firstObject"),n=Ti(this,"lastObject");return this.objectAt(0)!==t&&(Ember.propertyWillChange(this,"firstObject"),Ember.propertyDidChange(this,"firstObject")),this.objectAt(e-1)!==n&&(Ember.propertyWillChange(this,"lastObject"),Ember.propertyDidChange(this,"lastObject")),this},"@each":Ember.computed(}),Si=Ember.get,Ember.set,Ai=Ember.guidFor,Pi=Ember.meta,Ii=Ember.propertyWillChange,Li=Ember.propertyDidChange,Di=Ember.addBeforeObserver,Oi=Ember.removeBeforeObserver,Mi=Ember.addObserver,Ni=Ember.removeObserver,Ri=Ember.ComputedProperty,Vi=[].slice,t=Ember.create,m=Ember.EnumerableUtils.forEach,ji=/^(.*)\.@each\.(.*)/,Hi=/(.*\.@each){2,}/,qi=/\.\[\]$/,zi=Ember.expandProperties,Ls.prototype={setValue:getValue:function(){return this.instanceMeta.getValue()},setupObservers:function(e,t){Ember.assert("dependent array must be an `Ember.Array`",Ember.Array.detect(e)),this.dependentKeysByGuid[Ai(e)]=t,e.addArrayObserver(this,{willChange:"dependentArrayWillChange",didChange:"dependentArrayDidChange"}),this.cp._itemPropertyKeys[t]&&this.setupPropertyObservers(t,this.cp._itemPropertyKeys[t])},teardownObservers:function(e,t){var n=this.cp._itemPropertyKeys[t]||[];delete this.dependentKeysByGuid[Ai(e)],this.teardownPropertyObservers(t,n),e.removeArrayObserver(this,{willChange:"dependentArrayWillChange",didChange:"dependentArrayDidChange"})},suspendArrayObservers:setupPropertyObservers:function(i,r){var a=Is(this.instanceMeta.context,i),e=Is(a,"length"),o=new Array(e);this.resetTransformations(i,o),m(a,function(t,e){var n=this.createPropertyObserverContext(a,e,this.trackedArraysByGuid[i]);o[e]=n,m(r,function(e){Di(t,e,this,n.beforeObserver),Mi(t,e,this,n.observer)},this)},this)},teardownPropertyObservers:function(e,i){var r,a,o,s=this,e=this.trackedArraysByGuid[e];e&&e.apply(function(e,t,n){n!==Ember.TrackedArray.DELETE&&m(e,function(e){e.destroyed=!0,r=e.beforeObserver,a=e.observer,o=e.item,m(i,})})},createPropertyObserverContext:function(e,t,n){e=new Ds(e,t,n);return this.createPropertyObserver(e),e},createPropertyObserver:resetTransformations:trackAdd:function(e,t,n){e=this.trackedArraysByGuid[e];e&&e.addItems(t,n)},trackRemove:function(e,t,n){e=this.trackedArraysByGuid[e];return e?e.removeItems(t,n):[]},updateIndexes:function(e,t){var i=Is(t,"length");e.apply(function(e,n,t){t===Ember.TrackedArray.DELETE||t===Ember.TrackedArray.RETAIN&&e.length===i&&0===n||m(e,})},dependentArrayWillChange:function(e,t,n,i){if(!this.suspended)for(var r,a,o,s=this.callbacks.removedItem,l=Ai(e),l=this.dependentKeysByGuid[l],c=this.cp._itemPropertyKeys[l]||[],d=Is(e,"length"),u=Os(t,d,0),t=Math.min(n,d-u),p=this.trackRemove(l,u,t),h=t-1;0<=h&&!(d<=(o=u+h));--h)a=e.objectAt(o),m(c,f,this),r=Ms(e,a,o,this.instanceMeta.propertyName,this.cp),this.setValue(s.call(this.instanceMeta.context,this.getValue(),a,r,this.instanceMeta.sugarMeta));function f(e){p[h].destroyed=!0,Oi(a,e,this,p[h].beforeObserver),Ni(a,e,this,p[h].observer)}},dependentArrayDidChange:function(n,e,t,i){var r,a,o,s,l,c,d,u;this.suspended||(r=this.callbacks.addedItem,a=Ai(n),o=this.dependentKeysByGuid[a],s=new Array(i),l=this.cp._itemPropertyKeys[o],c=Os(e,Is(n,"length"),i),m(n.slice(c,c+i),function(t,e){l&&(u=s[e]=this.createPropertyObserverContext(n,c+e,this.trackedArraysByGuid[o]),m(l,function(e){Di(t,e,this,u.beforeObserver),Mi(t,e,this,u.observer)},this)),d=Ms(n,t,c+e,this.instanceMeta.propertyName,this.cp),this.setValue(r.call(this.instanceMeta.context,this.getValue(),t,d,this.instanceMeta.sugarMeta))},this),this.trackAdd(o,c,s))},itemPropertyWillChange:function(e,t,n,i){var r=Ai(e);this.changedItems[r]||(this.changedItems[r]={array:n,observerContext:i,obj:e,previousValues:{}}),this.changedItems[r].previousValues[t]=Is(e,t)},itemPropertyDidChange:flushChanges:function(){var e,t,n,i=this.changedItems;for(e in i)(t=i[e]).observerContext.destroyed||(this.updateIndexes(t.observerContext.trackedArray,t.observerContext.dependentArray),n=Ms(t.array,t.obj,t.observerContext.index,this.instanceMeta.propertyName,this.cp,t.previousValues),this.setValue(this.callbacks.removedItem.call(this.instanceMeta.context,this.getValue(),t.obj,n,this.instanceMeta.sugarMeta)),this.setValue(this.callbacks.addedItem.call(this.instanceMeta.context,this.getValue(),t.obj,n,this.instanceMeta.sugarMeta)));this.changedItems={}}},Rs.prototype={getValue:function(){return this.propertyName in this.cache?this.cache[this.propertyName]:this.initialValue},setValue:function(e,t){void 0!==e?((t=t&&e!==this.cache[this.propertyName])&&Ii(this.context,this.propertyName),this.cache[this.propertyName]=e,t&&Li(this.context,this.propertyName)):delete this.cache[this.propertyName]}},((Ember.ReduceComputedProperty=Vs).prototype=t(Ri.prototype))._callbacks=function(){var e;return this.callbacks||(e=this.options,this.callbacks={removedItem:e.removedItem||js,addedItem:e.addedItem||js}),this.callbacks},Vs.prototype._hasInstanceMeta=function(e,t){e=Ai(e);return!!this._instanceMetas[e+":"+t]},Vs.prototype._instanceMeta=function(e,t){var n=Ai(e)+":"+t,i=this._instanceMetas[n];return i||((i=this._instanceMetas[n]=new Rs(e,t,this.initialValue())).dependentArraysObserver=new Ls(this._callbacks(),this,i,0,0,i.sugarMeta)),i},Vs.prototype.initialValue=Vs.prototype.resetValue=Vs.prototype.itemPropertyKey=Vs.prototype.clearItemPropertyKeys=Vs.prototype.property=function(){var n,i,r=this,a=(Vi.call(arguments),new Ember.Set);return m(Vi.call(arguments),function(e){if(Hi.test(e))throw new Ember.Error("Nested @each properties not supported: "+e);var t;(n=ji.exec(e))?(i=n[1],t=n[2],zi(t,function(e){r.itemPropertyKey(i,e)}),a.add(i)):a.add(e)}),Ri.prototype.property.apply(this,a.toArray())},Ember.reduceComputed=function(e){var t,n;if(1<arguments.length&&(t=Vi.call(arguments,0,-1),e=Vi.call(arguments,-1)[0]),"object"!=typeof e)throw new Ember.Error("Reduce Computed Property declared without an options hash");if("initialValue"in e)return n=new Vs(e),t&&n.property.apply(n,t),n;throw new Ember.Error("Reduce Computed Property declared without an initial value")},Fi=Ember.ReduceComputedProperty,Bi=[].slice,O=Ember.create,Ui=Ember.EnumerableUtils.forEach,((Ember.ArrayComputedProperty=Hs).prototype=O(Fi.prototype)).initialValue=function(){return Ember.A()},Hs.prototype.resetValue=Hs.prototype.didChange=Ember.arrayComputed=function(e){var t;if(1<arguments.length&&(t=Bi.call(arguments,0,-1),e=Bi.call(arguments,-1)[0]),"object"!=typeof e)throw new Ember.Error("Array Computed Property declared without an options hash");var n=new Hs(e);return t&&n.property.apply(n,t),n},d=Ember.get,Ember.set,u=Ember.guidFor,$i=Ember.merge,Yi=[].slice,Gi=Ember.EnumerableUtils.forEach,Ki=Ember.EnumerableUtils.map,Ember.computed.sum=function(e){return Ember.reduceComputed(e,{initialValue:0,addedItem:removedItem:)},Ember.computed.max=function(e){return Ember.reduceComputed(e,{initialValue:-1/0,addedItem:function(e,t,n,i){return Math.max(e,t)},removedItem:function(e,t,n,i){if(t<e)return e}})},Ember.computed.min=function(e){return Ember.reduceComputed(e,{initialValue:1/0,addedItem:removedItem:)},Ember.computed.map=function(e,r){return Ember.arrayComputed(e,{addedItem:function(e,t,n,i){t=r.call(this,t);return e.insertAt(n.index,t),e},removedItem:)},Ember.computed.mapBy=function(e,t){return Ember.computed.map(e+".@each."+t,function(e){return d(e,t)})},Ember.computed.mapProperty=Ember.computed.mapBy,Ember.computed.filter=function(e,a){return Ember.arrayComputed(e,{initialize:function(e,t,n){n.filteredArrayIndexes=new Ember.SubArray},addedItem:function(e,t,n,i){var r=!!a.call(this,t),i=i.filteredArrayIndexes.addItem(n.index,r);return r&&e.insertAt(i,t),e},removedItem:function(e,t,n,i){i=i.filteredArrayIndexes.removeItem(n.index);return-1<i&&e.removeAt(i),e}})},Ember.computed.filterBy=function(e,t,n){var i=2===arguments.length?function(e){return d(e,t)}:function(e){return d(e,t)===n};return Ember.computed.filter(e+".@each."+t,i)},Ember.computed.filterProperty=Ember.computed.filterBy,Ember.computed.uniq=function(){var e=Yi.call(arguments);return e.push({initialize:function(e,t,n){n.itemCounts={}},addedItem:function(e,t,n,i){var r=u(t);return i.itemCounts[r]?++i.itemCounts[r]:i.itemCounts[r]=1,e.addObject(t),e},removedItem:function(e,t,n,i){var r=u(t);return 0==--i.itemCounts[r]&&e.removeObject(t),e}}),Ember.arrayComputed.apply(null,e)},Ember.computed.union=Ember.computed.uniq,Ember.computed.intersect=function(){function o(e){return Ki(e.property._dependentKeys,function(e){return u(e)})}var e=Yi.call(arguments);return e.push({initialize:addedItem:function(e,t,n,i){var r=u(t),a=(o(n),u(n.arrayChanged)),n=n.property._dependentKeys.length,i=i.itemCounts;return i[r]||(i[r]={}),void 0===i[r][a]&&(i[r][a]=0),1==++i[r][a]&&n===Ember.keys(i[r]).length&&e.addObject(t),e},removedItem:function(e,t,n,i){var r=u(t),a=(o(n),u(n.arrayChanged)),n=(n.property._dependentKeys.length,i.itemCounts);return void 0===n[r][a]&&(n[r][a]=0),0==--n[r][a]&&(delete n[r][a],0===Ember.keys(n[r]).length&&delete n[r],e.removeObject(t)),e}}),Ember.arrayComputed.apply(null,e)},Ember.computed.setDiff=function(o,s){if(2!==arguments.length)throw new Ember.Error("setDiff requires exactly two dependent arrays.");return Ember.arrayComputed(o,s,{addedItem:function(e,t,n,i){var r=d(this,o),a=d(this,s);return n.arrayChanged===r?a.contains(t)||e.addObject(t):e.removeObject(t),e},removedItem:function(e,t,n,i){var r=d(this,o),a=d(this,s);return n.arrayChanged===a?r.contains(t)&&e.addObject(t):e.removeObject(t),e}})},Wi=Ember.ObjectProxy.extend(),Ember.computed.sort=function(l,i){var e,c;return Ember.assert("Ember.computed.sort requires two arguments: an array key to sort and either a sort properties key or sort function",2===arguments.length),e="function"==typeof i?(c=i,function(e,a,o){function t(){var t,n,e=d(this,c),i=o.sortProperties=[],r=o.sortPropertyAscending={};Ember.assert("Cannot sort: '"+c+"' is not an array.",Ember.isArray(e)),a.property.clearItemPropertyKeys(l),Gi(e,function(e){n=-1!==(n=e.indexOf(":"))?(t=e.substring(0,n),"desc"!==e.substring(n+1).toLowerCase()):(t=e,!0),i.push(t),r[t]=n,a.property.itemPropertyKey(l,t)}),e.addObserver("@each",this,s)}function s(){Ember.run.once(this,n,a.propertyName)}mber.addObserver(this,c,s),t.call(this),o.order=function(e,t){for(var n,i,r=0;r<this.sortProperties.length;++r)if(n=this.sortProperties[r],0!==(i=Ember.compare(d(e,n),d(t,n))))return this.sortPropertyAscending[n]?i:-1*i;return 0},o.binarySearch=qs}),Ember.arrayComputed(l,{initialize:e,addedItem:function(e,t,n,i){i=i.binarySearch(e,t);return e.insertAt(i,t),e},removedItem:function(e,t,n,i){n=n.previousValues?(n=$i({content:t},n.previousValues),Wi.create(n)):t,t=i.binarySearch(e,n);return e.removeAt(t),e}})},Ember.RSVP=s("rsvp"),Ember.RSVP.onerrorDefault=function(e){if(e instanceof Error)if(Ember.testing){if(!Ember.Test||!Ember.Test.adapter)throw e;Ember.Test.adapter.exception(e)}else Ember.Logger.error(e.stack),Ember.assert(e,!1)},Ember.RSVP.on("error",Ember.RSVP.onerrorDefault),Qi=Array.prototype.slice,Xi=Ember.expandProperties,!0!==Ember.EXTEND_PROTOTYPES&&!Ember.EXTEND_PROTOTYPES.Function||(Function.prototype.property=Function.prototype.observes=function(){function e(e){t.push(e)}for(var t=[],n=0;n<arguments.length;++n)Xi(arguments[n],e);return this.__ember_observes__=t,this},Function.prototype.observesImmediately=function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];Ember.assert("Immediate observers must observe internal properties only, not properties on other objects.",-1===n.indexOf("."))}return this.observes.apply(this,arguments)},Function.prototype.observesBefore=function(){function e(e){t.push(e)}for(var t=[],n=0;n<arguments.length;++n)Xi(arguments[n],e);return this.__ember_observesBefore__=t,this},Function.prototype.on=,Ember.Comparable=Ember.Mixin.create({compare:Ember.required(Function)});var zs=Ember.get,Fs=(Ember.set,Ember.Copyable=Ember.Mixin.create({copy:Ember.required(Function),frozenCopy:function(){if(Ember.Freezable&&Ember.Freezable.detect(this))return zs(this,"isFrozen")?this:this.copy().freeze();throw new Ember.Error(Ember.String.fmt("%@ does not support freezing",[this]))}}),Ji=Ember.get,Zi=Ember.set,Ember.Freezable=Ember.Mixin.create({isFrozen:!1,freeze:function(){return Ji(this,"isFrozen")||Zi(this,"isFrozen",!0),this}}),Ember.FROZEN_ERROR="Frozen object cannot be modified.",er=Ember.EnumerableUtils.forEach,Ember.MutableEnumerable=Ember.Mixin.create(Ember.Enumerable,{addObject:Ember.required(Function),addObjects:function(e){return Ember.beginPropertyChanges(this),er(e,function(e){this.addObject(e)},this),Ember.endPropertyChanges(this),this},removeObject:Ember.required(Function),removeObjects:function(e){return Ember.beginPropertyChanges(this),er(e,function(e){this.removeObject(e)},this),Ember.endPropertyChanges(this),this}}),"Index out of range"),Bs=[],I=Ember.get,Us=(Ember.set,Ember.MutableArray=Ember.Mixin.create(Ember.Array,Ember.MutableEnumerable,{replace:Ember.required(),clear:function(){var e=I(this,"length");return 0!==e&&this.replace(0,e,Bs),this},insertAt:function(e,t){if(e>I(this,"length"))throw new Ember.Error(Fs);return this.replace(e,0,[t]),this},removeAt:function(e,t){if("number"==typeof e){if(e<0||e>=I(this,"length"))throw new Ember.Error(Fs);this.replace(e,t=void 0===t?1:t,Bs)}return this},pushObject:function(e){return this.insertAt(I(this,"length"),e),e},pushObjects:function(e){if(Ember.Enumerable.detect(e)||Ember.isArray(e))return this.replace(I(this,"length"),0,e),this;throw new TypeError("Must pass Ember.Enumerable to Ember.MutableArray#pushObjects")},popObject:function(){var e,t=I(this,"length");return 0===t?null:(e=this.objectAt(t-1),this.removeAt(t-1,1),e)},shiftObject:function(){var e;return 0===I(this,"length")?null:(e=this.objectAt(0),this.removeAt(0),e)},unshiftObject:function(e){return this.insertAt(0,e),e},unshiftObjects:function(e){return this.replace(0,0,e),this},reverseObjects:function(){var e,t=I(this,"length");return 0!==t&&(e=this.toArray().reverse(),this.replace(0,t,e)),this},setObjects:function(e){var t;return 0===e.length?this.clear():(t=I(this,"length"),this.replace(0,t,e),this)},removeObject:function(e){for(var t=I(this,"length")||0;0<=--t;)this.objectAt(t)===e&&this.removeAt(t);return this},addObject:),Ember.get);unction $s(e,t,n){this.type=e,this.count=t,this.items=n}ber.set,Ember.TargetActionSupport=Ember.Mixin.create({target:null,action:null,actionContext:null,targetObject:Ember.computed(function(){var e,t=Us(this,"target");return"string"===Ember.typeOf(t)?void 0===(e=Us(this,t))?Us(Ember.lookup,t):e:t}).property("target"),actionContextObject:Ember.computed(function(){var e,t=Us(this,"actionContext");return"string"===Ember.typeOf(t)?void 0===(e=Us(this,t))?Us(Ember.lookup,t):e:t}).property("actionContext"),triggerAction:function(e){var t=(e=e||{}).action||Us(this,"action"),n=e.target||Us(this,"targetObject"),e=e.actionContext;eturn void 0===e&&(e=Us(this,"actionContextObject")||this),!(!n||!t)&&(!1!==(t=n.send?n.send.apply(n,i(e,t)):(Ember.assert("The action '"+t+"' did not exist on "+n,"function"==typeof n[t]),n[t].apply(n,i(e))))||t)}}),Ember.Evented=Ember.Mixin.create({on:function(e,t,n){return Ember.addListener(this,e,t,n),this},one:trigger:function(e){for(var t=[],n=1,i=arguments.length;n<i;n++)t.push(arguments[n]);Ember.sendEvent(this,e,t)},off:has:function(e){return Ember.hasListeners(this,e)}}),(tr=s("rsvp")).configure("async",function(e,t){Ember.run.schedule("actions",t,e,t)}),tr.Promise.prototype.fail=nr=Ember.get,Ember.DeferredMixin=Ember.Mixin.create({then:function(t,e,n){var i,r,a;return i=nr(a=this,"_deferred"),(r=i.promise).then(t&&function(e){return t(e===r?a:e)},e,n)},resolve:function(e){var t=nr(this,"_deferred"),n=t.promise;e===this?t.resolve(n):t.resolve(e)},reject:function(e){nr(this,"_deferred").reject(e)},_deferred:Ember.computed(function(){return tr.defer("Ember: DeferredMixin - "+this)})}),ir=Ember.get,rr=Ember.typeOf,Ember.ActionHandler=Ember.Mixin.create({mergedProperties:["_actions"],willMergeMixin:function(e){var t;e._actions||(Ember.assert(this+" 'actions' should not be a function","function"!=typeof e.actions),"object"===rr(e.actions)?t="actions":"object"===rr(e.events)&&(Ember.deprecate("Action handlers contained in an `events` object are deprecated in favor of putting them in an `actions` object",!1),t="events"),t&&(e._actions=Ember.merge(e._actions||{},e[t])),delete e[t])},send:function(e){var t=[].slice.call(arguments,1);if(this._actions&&this._actions[e]){if(!0!==this._actions[e].apply(this,t))return}else if(this.deprecatedSend&&this.deprecatedSendHandles&&this.deprecatedSendHandles(e)&&!0!==this.deprecatedSend.apply(this,[].slice.call(arguments)))return;(t=ir(this,"target"))&&(Ember.assert("The `target` for "+this+" ("+t+") does not have a `send` method","function"==typeof t.send),t.send.apply(t,arguments))}}),ar=Ember.set,or=Ember.get,t=Ember.computed.not,O=Ember.computed.or,Ember.PromiseProxyMixin=Ember.Mixin.create({reason:null,isPending:t("isSettled").readOnly(),isSettled:O("isRejected","isFulfilled").readOnly(),isRejected:!1,isFulfilled:!1,promise:Ember.computed(function(e,t){if(2===arguments.length)return n=this,t.then(function(e){return ar(n,"isFulfilled",!0),ar(n,"content",e),e},function(e){throw ar(n,"isRejected",!0),ar(n,"reason",e),e},"Ember: PromiseProxy");throw new Ember.Error("PromiseProxy's promise must be set");var n}),then:Ws("then"),catch:Ws("catch"),finally:Ws("finally")}),sr=Ember.get,lr=Ember.EnumerableUtils.forEach,Ember.TrackedArray=function(e){var t=sr(e=arguments.length<1?[]:e,"length");this._operations=t?[new $s("r",t,e)]:[]},Ember.TrackedArray.RETAIN="r",Ember.TrackedArray.INSERT="i",Ember.TrackedArray.DELETE="d",Ember.TrackedArray.prototype={addItems:function(e,t){var n,i,r,a,o=sr(t,"length");o<1||(i=(n=this._findArrayOperation(e)).operation,r=n.index,a=n.rangeStart,o=new $s("i",o,t),t=i?n.split?(this._split(r,e-a,o),r+1):(this._operations.splice(r,0,o),r):(this._operations.push(o),r),this._composeInsert(t))},removeItems:function(e,t){var n,i,r;if(!(t<1))return(r=this._findArrayOperation(e)).operation,n=r.index,i=r.rangeStart,t=new $s("d",t),r=r.split?(this._split(n,e-i,t),n+1):(this._operations.splice(n,0,t),n),this._composeDelete(r)},apply:function(t){var n=[],i=0;lr(this._operations,function(e){t(e.items,i,e.type),"d"!==e.type&&(i+=e.count,n=n.concat(e.items))}),this._operations=[new $s("r",n.length,n)]},_findArrayOperation:function(e){for(var t,n,i,r=!1,a=n=0,o=this._operations.length;a<o;++a)if("d"!==(t=this._operations[a]).type){if(i=n+t.count-1,e===n)break;if(n<e&&e<=i){r=!0;break}n=1+i}return new Ys(t,a,r,n)},_split:_composeInsert:_composeDelete:function(e){var t,n,i,r=this._operations[e],a=r.count,o=this._operations[e-1],s=!1,l=[];"d"===(o&&o.type)&&(r=o,--e);for(var c=e+1;0<a;++c)n=(t=this._operations[c]).type,i=t.count,"d"===n?r.count+=i:(a<i?(l=l.concat(t.items.splice(0,a)),t.count-=a,--c,i=a,a=0):(i===a&&(s=!0),l=l.concat(t.items),a-=i),"i"===n&&(r.count-=i));return 0<r.count?this._operations.splice(e+1,c-1-e):this._operations.splice(e,s?2:1),l},toString:function(){var t="";return lr(this._operations,function(e){t+=" "+e.type+":"+e.count}),t.substring(1)}},Ember.get,cr=Ember.EnumerableUtils.forEach,Ember.SubArray=function(e){this._operations=0<(e=arguments.length<1?0:e)?[new Gs("r",e)]:[]},Ember.SubArray.prototype={addItem:function(o,s){var l=-1,c=s?"r":"f",d=this;return this._findOperation(o,function(e,t,n,i,r){var a;c===e.type?++e.count:o===n?d._operations.splice(t,0,new Gs(c,1)):(a=new Gs(c,1),i=new Gs(e.type,i-o+1),e.count=o-n,d._operations.splice(t+1,0,a,i)),s&&(l="r"===e.type?r+(o-n):r),d._composeAt(t)},,l},removeItem:function(a){var o=-1,s=this;return this._findOperation(a,function(e,t,n,i,r){"r"===e.type&&(o=r+(a-n)),1<e.count?--e.count:(s._operations.splice(t,1),s._composeAt(t))},function(){throw new Ember.Error("Can't remove an item that has never been added.")}),o},_findOperation:function(e,t,n){for(var i,r,a,o=0,s=r=0,l=this._operations.length;s<l;r=1+a,++s){if(a=r+(i=this._operations[s]).count-1,r<=e&&e<=a)return void t(i,s,r,a,o);"r"===i.type&&(o+=i.count)}n(o)},_composeAt:function(e){var t,n=this._operations[e];n&&(0<e&&(t=this._operations[e-1]).type===n.type&&(n.count+=t.count,this._operations.splice(e-1,1),--e),e<this._operations.length-1&&(t=this._operations[e+1]).type===n.type&&(n.count+=t.count,this._operations.splice(e+1,1)))},toString:function(){var t="";return cr(this._operations,,t.substring(1)}},Ember.Container=s("container"),Ember.Container.set=Ember.set,Ember.Application=Ember.Namespace.extend();var Ks="Index out of range",Qs=[],L=Ember.get;function Xs(e,t,n,i,r){for(var a=(a=n._objects)||(n._objects={});--r>=i;){var o=e.objectAt(r);o&&(Ember.assert("When using @each to observe the array "+e+", the array must return an object","instance"===Ember.typeOf(o)||"object"===Ember.typeOf(o)),Ember.addBeforeObserver(o,t,n,"contentKeyWillChange"),Ember.addObserver(o,t,n,"contentKeyDidChange"),a[o=ur(o)]||(a[o]=[]),a[o].push(r))}}function Js(e,t,n,i,r){for(var a=(a=n._objects)||(n._objects={});--r>=i;){var o=e.objectAt(r);o&&(Ember.removeBeforeObserver(o,t,n,"contentKeyWillChange"),Ember.removeObserver(o,t,n,"contentKeyDidChange"),(o=a[ur(o)])[hr.call(o,r)]=null)}}mber.set,Ember.ArrayProxy=Ember.Object.extend(Ember.MutableArray,{content:null,arrangedContent:Ember.computed.alias("content"),objectAtContent:function(e){return L(this,"arrangedContent").objectAt(e)},replaceContent:function(e,t,n){L(this,"content").replace(e,t,n)},_contentWillChange:Ember.beforeObserver("content",function(){this._teardownContent()}),_teardownContent:function(){var e=L(this,"content");e&&e.removeArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},contentArrayWillChange:Ember.K,contentArrayDidChange:Ember.K,_contentDidChange:Ember.observer("content",function(){var e=L(this,"content");Ember.assert("Can't set ArrayProxy's content to itself",e!==this),this._setupContent()}),_setupContent:function(){var e=L(this,"content");e&&e.addArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},_arrangedContentWillChange:Ember.beforeObserver("arrangedContent",function(){var e=L(this,"arrangedContent"),t=e?L(e,"length"):0;this.arrangedContentArrayWillChange(this,0,t,void 0),this.arrangedContentWillChange(this),this._teardownArrangedContent(e)}),_arrangedContentDidChange:Ember.observer("arrangedContent",function(){var e=L(this,"arrangedContent"),t=e?L(e,"length"):0;Ember.assert("Can't set ArrayProxy's content to itself",e!==this),this._setupArrangedContent(),this.arrangedContentDidChange(this),this.arrangedContentArrayDidChange(this,0,void 0,t)}),_setupArrangedContent:function(){var e=L(this,"arrangedContent");e&&e.addArrayObserver(this,{willChange:"arrangedContentArrayWillChange",didChange:"arrangedContentArrayDidChange"})},_teardownArrangedContent:function(){var e=L(this,"arrangedContent");e&&e.removeArrayObserver(this,{willChange:"arrangedContentArrayWillChange",didChange:"arrangedContentArrayDidChange"})},arrangedContentWillChange:Ember.K,arrangedContentDidChange:Ember.K,objectAt:function(e){return L(this,"content")&&this.objectAtContent(e)},length:Ember.computed(function(){var e=L(this,"arrangedContent");return e?L(e,"length"):0}),_replace:function(e,t,n){var i=L(this,"content");return Ember.assert("The content property of "+this.constructor+" should be set before modifying it",i),i&&this.replaceContent(e,t,n),this},replace:function(){if(L(this,"arrangedContent")!==L(this,"content"))throw new Ember.Error("Using replace on an arranged ArrayProxy is not allowed.");this._replace.apply(this,arguments)},_insertAt:function(e,t){if(e>L(this,"content.length"))throw new Ember.Error(Ks);return this._replace(e,0,[t]),this},insertAt:function(e,t){if(L(this,"arrangedContent")===L(this,"content"))return this._insertAt(e,t);throw new Ember.Error("Using insertAt on an arranged ArrayProxy is not allowed.")},removeAt:function(e,t){if("number"==typeof e){var n,i=L(this,"content"),r=L(this,"arrangedContent"),a=[];if(e<0||e>=L(this,"length"))throw new Ember.Error(Ks);for(void 0===t&&(t=1),n=e;n<e+t;n++)a.push(i.indexOf(r.objectAt(n)));for(a.sort(,Ember.beginPropertyChanges(),n=0;n<a.length;n++)this._replace(a[n],1,Qs);Ember.endPropertyChanges()}return this},pushObject:function(e){return this._insertAt(L(this,"content.length"),e),e},pushObjects:function(e){if(Ember.Enumerable.detect(e)||Ember.isArray(e))return this._replace(L(this,"length"),0,e),this;throw new TypeError("Must pass Ember.Enumerable to Ember.MutableArray#pushObjects")},setObjects:function(e){var t;return 0===e.length?this.clear():(t=L(this,"length"),this._replace(0,t,e),this)},unshiftObject:unshiftObjects:slice:arrangedContentArrayWillChange:function(e,t,n,i){this.arrayContentWillChange(t,n,i)},arrangedContentArrayDidChange:init:function(){this._super(),this._setupContent(),this._setupArrangedContent()},willDestroy:function(){this._teardownArrangedContent(),this._teardownContent()}}),Ember.set,dr=Ember.get,ur=Ember.guidFor,pr=Ember.EnumerableUtils.forEach,hr=Ember.ArrayPolyfills.indexOf,fr=Ember.Object.extend(Ember.Array,{init:objectAt:function(e){e=this._content.objectAt(e);return e&&dr(e,this._keyName)},length:Ember.computed(function(){var e=this._content;return e?dr(e,"length"):0})}),mr=/^.+:(before|change)$/,Ember.EachProxy=Ember.Object.extend({init:function(e){this._super(),(this._content=e).addArrayObserver(this),pr(Ember.watchedEvents(this),function(e){this.didAddListener(e)},this)},unknownProperty:function(e,t){var n=new fr(this._content,e,this);return Ember.defineProperty(this,e,null,n),this.beginObservingContentKey(e),n},arrayWillChange:function(e,t,n,i){var r,a=this._keys,o=0<n?t+n:-1;for(r in Ember.beginPropertyChanges(this),a)a.hasOwnProperty(r)&&(0<o&&Js(e,r,this,t,o),Ember.propertyWillChange(this,r));Ember.propertyWillChange(this._content,"@each"),Ember.endPropertyChanges(this)},arrayDidChange:function(t,n,e,i){var r=this._keys,a=0<i?n+i:-1;Ember.changeProperties(function(){for(var e in r)r.hasOwnProperty(e)&&(0<a&&Xs(t,e,this,n,a),Ember.propertyDidChange(this,e));Ember.propertyDidChange(this._content,"@each")},this)},didAddListener:function(e){mr.test(e)&&this.beginObservingContentKey(e.slice(0,-7))},didRemoveListener:beginObservingContentKey:function(e){var t=this._keys;(t=t||(this._keys={}))[e]?t[e]++:(t[e]=1,Xs(t=this._content,e,this,0,dr(t,"length")))},stopObservingContentKey:function(e){var t=this._keys;t&&0<t[e]&&--t[e]<=0&&Js(t=this._content,e,this,0,dr(t,"length"))},contentKeyWillChange:function(e,t){Ember.propertyWillChange(this,t)},contentKeyDidChange:),vr=Ember.get,Ember.set,gr=Ember.EnumerableUtils._replace,yr=Ember.Mixin.create(Ember.MutableArray,Ember.Observable,Ember.Copyable,{get:objectAt:function(e){return this[e]},replace:function(e,t,n){if(this.isFrozen)throw Ember.FROZEN_ERROR;var i=n?vr(n,"length"):0;return this.arrayContentWillChange(e,t,i),0===i?this.splice(e,t):gr(this,e,t,n),this.arrayContentDidChange(e,t,i),this},unknownProperty:function(e,t){var n;return n=void 0!==t&&void 0===n?this[e]=t:n},indexOf:function(e,t){var n,i=this.length;for((t=void 0===t?0:t<0?Math.ceil(t):Math.floor(t))<0&&(t+=i),n=t;n<i;n++)if(this[n]===e)return n;return-1},lastIndexOf:function(e,t){var n,i=this.length;for((t=void 0===t?i-1:t<0?Math.ceil(t):Math.floor(t))<0&&(t+=i),n=t;0<=n;n--)if(this[n]===e)return n;return-1},copy:),br=["length"],Ember.EnumerableUtils.forEach(yr.keys(),,0<br.length&&(yr=yr.without.apply(yr,br)),Ember.NativeArray=yr,Ember.A=function(e){return void 0===e&&(e=[]),Ember.Array.detect(e)?e:Ember.NativeArray.apply(e)},Ember.NativeArray.activate=function(){yr.apply(Array.prototype),Ember.A=,!0!==Ember.EXTEND_PROTOTYPES&&!Ember.EXTEND_PROTOTYPES.Array||Ember.NativeArray.activate(),p=Ember.get,wr=Ember.set,Er=Ember.guidFor,kr=Ember.isNone,xr=Ember.String.fmt,Ember.Set=Ember.CoreObject.extend(Ember.MutableEnumerable,Ember.Copyable,Ember.Freezable,{length:0,clear:function(){if(this.isFrozen)throw new Ember.Error(Ember.FROZEN_ERROR);var e=p(this,"length");if(0!==e){this.enumerableContentWillChange(e,0),Ember.propertyWillChange(this,"firstObject"),Ember.propertyWillChange(this,"lastObject");for(var t=0;t<e;t++)delete this[Er(this[t])],delete this[t];wr(this,"length",0),Ember.propertyDidChange(this,"firstObject"),Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(e,0)}return this},isEqual:function(e){if(!Ember.Enumerable.detect(e))return!1;var t=p(this,"length");if(p(e,"length")!==t)return!1;for(;0<=--t;)if(!e.contains(this[t]))return!1;return!0},add:Ember.aliasMethod("addObject"),remove:Ember.aliasMethod("removeObject"),pop:function(){if(p(this,"isFrozen"))throw new Ember.Error(Ember.FROZEN_ERROR);var e=0<this.length?this[this.length-1]:null;return this.remove(e),e},push:Ember.aliasMethod("addObject"),shift:Ember.aliasMethod("pop"),unshift:Ember.aliasMethod("push"),addEach:Ember.aliasMethod("addObjects"),removeEach:Ember.aliasMethod("removeObjects"),init:nextObject:firstObject:Ember.computed(function(){return 0<this.length?this[0]:void 0}),lastObject:Ember.computed(function(){return 0<this.length?this[this.length-1]:void 0}),addObject:function(e){if(p(this,"isFrozen"))throw new Ember.Error(Ember.FROZEN_ERROR);var t,n,i;return kr(e)||(i=this[t=Er(e)],n=p(this,"length"),0<=i&&i<n&&this[i]===e||(this.enumerableContentWillChange(null,i=[e]),Ember.propertyWillChange(this,"lastObject"),n=p(this,"length"),this[t]=n,this[n]=e,wr(this,"length",n+1),Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(null,i))),this},removeObject:function(e){if(p(this,"isFrozen"))throw new Ember.Error(Ember.FROZEN_ERROR);var t,n,i,r,a,o;return kr(e)||(r=0===(n=this[t=Er(e)]),a=n===(i=p(this,"length"))-1,0<=n&&n<i&&this[n]===e&&(this.enumerableContentWillChange(e=[e],null),r&&Ember.propertyWillChange(this,"firstObject"),a&&Ember.propertyWillChange(this,"lastObject"),n<i-1&&(o=this[i-1],this[n]=o,this[Er(o)]=n),delete this[t],delete this[i-1],wr(this,"length",i-1),r&&Ember.propertyDidChange(this,"firstObject"),a&&Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(e,null))),this},contains:function(e){return 0<=this[Er(e)]},copy:function(){var e=new this.constructor,t=p(this,"length");for(wr(e,"length",t);0<=--t;)e[t]=this[t],e[Er(this[t])]=t;return e},toString:function(){for(var e=this.length,t=[],n=0;n<e;n++)t[n]=this[n];return xr("Ember.Set<%@>",[t.join(",")])}}),t=Ember.DeferredMixin,Ember.get,(Cr=Ember.Object.extend(t)).reopenClass({promise:),Ember.Deferred=Cr,_r=Ember.ArrayPolyfills.forEach,Tr=Ember.ENV.EMBER_LOAD_HOOKS||{},Sr={},Ember.onLoad=function(e,t){Tr[e]=Tr[e]||Ember.A(),Tr[e].pushObject(t),(e=Sr[e])&&t(e)},Ember.runLoadHooks=function(e,t){Sr[e]=t,Tr[e]&&_r.call(Tr[e],function(e){e(t)})},Ember.get,Ember.ControllerMixin=Ember.Mixin.create(Ember.ActionHandler,{isController:!0,target:null,container:null,parentController:null,store:null,model:Ember.computed.alias("content"),deprecatedSendHandles:function(e){return!!this[e]},deprecatedSend:function(e){var t=[].slice.call(arguments,1);Ember.assert(this+" has the action "+e+" but it is not a function","function"==typeof this[e]),Ember.deprecate("Action handlers implemented directly on controllers are deprecated in favor of action handlers on an `actions` object ( action: `"+e+"` on "+this+")",!1),this[e].apply(this,t)}}),Ember.Controller=Ember.Object.extend(Ember.ControllerMixin),h=Ember.get,Ember.set,f=Ember.EnumerableUtils.forEach,Ember.SortableMixin=Ember.Mixin.create(Ember.MutableEnumerable,{sortProperties:null,sortAscending:!0,sortFunction:Ember.compare,orderBy:function(t,n){var i=0,e=h(this,"sortProperties"),r=h(this,"sortAscending"),a=h(this,"sortFunction");return Ember.assert("you need to define `sortProperties`",!!e),f(e,function(e){0!==i||0===(i=a(h(t,e),h(n,e)))||r||(i*=-1)}),i},destroy:function(){var e=h(this,"content"),n=h(this,"sortProperties");return e&&n&&f(e,function(t){f(n,function(e){Ember.removeObserver(t,e,this,"contentItemSortPropertyDidChange")},this)},this),this._super()},isSorted:Ember.computed.bool("sortProperties"),arrangedContent:Ember.computed("content","sortProperties.@each",function(e,t){var n=h(this,"content"),i=h(this,"isSorted"),r=h(this,"sortProperties"),a=this;return n&&i?((n=n.slice()).sort(function(e,t){return a.orderBy(e,t)}),f(n,function(t){f(r,function(e){Ember.addObserver(t,e,this,"contentItemSortPropertyDidChange")},this)},this),Ember.A(n)):n}),_contentWillChange:Ember.beforeObserver("content",function(){var e=h(this,"content"),n=h(this,"sortProperties");e&&n&&f(e,function(t){f(n,function(e){Ember.removeObserver(t,e,this,"contentItemSortPropertyDidChange")},this)},this),this._super()}),sortAscendingWillChange:Ember.beforeObserver("sortAscending",function(){this._lastSortAscending=h(this,"sortAscending")}),sortAscendingDidChange:Ember.observer("sortAscending",function(){h(this,"sortAscending")!==this._lastSortAscending&&h(this,"arrangedContent").reverseObjects()}),contentArrayWillChange:function(e,t,n,i){var r,a,o;return h(this,"isSorted")&&(r=h(this,"arrangedContent"),a=e.slice(t,t+n),o=h(this,"sortProperties"),f(a,function(t){r.removeObject(t),f(o,function(e){Ember.removeObserver(t,e,this,"contentItemSortPropertyDidChange")},this)},this)),this._super(e,t,n,i)},contentArrayDidChange:function(e,t,n,i){var r=h(this,"isSorted"),a=h(this,"sortProperties");return r&&(r=e.slice(t,t+i),f(r,function(t){this.insertItemSorted(t),f(a,function(e){Ember.addObserver(t,e,this,"contentItemSortPropertyDidChange")},this)},this)),this._super(e,t,n,i)},insertItemSorted:function(e){var t=h(this,"arrangedContent"),n=h(t,"length"),n=this._binarySearch(e,0,n);t.insertAt(n,e)},contentItemSortPropertyDidChange:function(e){var t=h(this,"arrangedContent"),n=t.indexOf(e),i=t.objectAt(n-1),n=t.objectAt(n+1),i=i&&this.orderBy(e,i),n=n&&this.orderBy(e,n);(i<0||0<n)&&(t.removeObject(e),this.insertItemSorted(e))},_binarySearch:function(e,t,n){var i,r;return t===n?t:(r=h(this,"arrangedContent"),i=t+Math.floor((n-t)/2),r=r.objectAt(i),(r=this.orderBy(r,e))<0?this._binarySearch(e,i+1,n):0<r?this._binarySearch(e,t,i):i)}}),Ar=Ember.get,Ember.set,Pr=Ember.EnumerableUtils.forEach,Ir=Ember.EnumerableUtils.replace,Ember.ArrayController=Ember.ArrayProxy.extend(Ember.ControllerMixin,Ember.SortableMixin,{itemController:null,lookupItemController:objectAtContent:function(e){var t=Ar(this,"length"),n=Ar(this,"arrangedContent"),n=n&&n.objectAt(e);if(0<=e&&e<t){t=this.lookupItemController(n);if(t)return this.controllerAt(e,n,t)}return n},arrangedContentDidChange:function(){this._super(),this._resetSubControllers()},arrayContentDidChange:function(e,t,n){var i=Ar(this,"_subControllers"),r=i.slice(e,e+t);Pr(r,function(e){e&&e.destroy()}),Ir(i,e,t,new Array(n)),this._super(e,t,n)},init:function(){this._super(),this.set("_subControllers",Ember.A())},content:Ember.computed(function(){return Ember.A()}),controllerAt:function(e,t,n){var i,r=Ar(this,"container"),a=Ar(this,"_subControllers"),o=a[e];if(!o){if(!r.has(i="controller:"+n))throw new Ember.Error('Could not resolve itemController: "'+n+'"');o=r.lookupFactory(i).create({target:this,parentController:Ar(this,"parentController")||this,content:t}),a[e]=o}return o},_subControllers:null,_resetSubControllers:function(){var e=Ar(this,"_subControllers");e&&Pr(e,function(e){e&&e.destroy()}),this.set("_subControllers",Ember.A())}}),Ember.ObjectController=Ember.ObjectProxy.extend(Ember.ControllerMixin),function(){var e=this&&this.jQuery||Ember.imports&&Ember.imports.jQuery;e||"function"!=typeof R||(e=irequire("jquery")),Ember.assert("Ember Views require jQuery between 1.7 and 2.1",e&&(e().jquery.match(/^((1\.(7|8|9|10|11))|(2\.(0|1)))(\.\d+)?(pre|rc\d?)?/)||Ember.ENV.FORCE_JQUERY)),Ember.$=e}(),Ember.$&&(O=Ember.String.w("dragstart drag dragenter dragleave dragover drop dragend"),Ember.EnumerableUtils.forEach(O,function(e){Ember.$.event.fixHooks[e]={props:["dataTransfer"]}})),Dr="undefined"!=typeof document&&((Lr=document.createElement("div")).innerHTML="<div></div>",Lr.firstChild.innerHTML="<script><\/script>",""===Lr.firstChild.innerHTML),Or="undefined"!=typeof document&&((Lr=document.createElement("div")).innerHTML="Test: <script type='text/x-placeholder'><\/script>Value","Test:"===Lr.childNodes[0].nodeValue&&" Value"===Lr.childNodes[2].nodeValue),Mr=function(e,t){if(e.getAttribute("id")===t)return e;for(var n,i=e.childNodes.length,r=0;r<i;r++)if(n=1===(n=e.childNodes[r]).nodeType&&Mr(n,t))return n},Nr=function(e,t){Dr&&(t="&shy;"+t);var r=[];if(Or&&(t=t.replace(/(\s+)(<script id='([^']+)')/g,function(e,t,n,i){return r.push([i,t]),n})),e.innerHTML=t,0<r.length)for(var n=r.length,i=0;i<n;i++){var a=Mr(e,r[i][0]),o=document.createTextNode(r[i][1]);a.parentNode.insertBefore(o,a)}if(Dr){for(var s=e.firstChild;1===s.nodeType&&!s.nodeName;)s=s.firstChild;3===s.nodeType&&""===s.nodeValue.charAt(0)&&(s.nodeValue=s.nodeValue.slice(1))}},Rr={},Ember.ViewUtils={setInnerHTML:function(e,t){var n=e.tagName;if(void 0!==Rr[r=n]?Rr[r]:(a=!0,"select"===r.toLowerCase()&&(i=document.createElement("select"),Nr(i,'<option value="test">Test</option>'),a=1===i.options.length),Rr[r]=a))Nr(e,t);else{var i=e.outerHTML||(new XMLSerializer).serializeToString(e),r=(Ember.assert("Can't set innerHTML on "+e.tagName+" in this browser",i),i.match(new RegExp("<"+n+"([^>]*)>","i"))[0]),a="</"+n+">",o=document.createElement("div");for(Nr(o,r+t+a),e=o.firstChild;e.tagName!==n;)e=e.nextSibling}return e},isSimpleClick:function(e){var t=e.shiftKey||e.metaKey||e.altKey||e.ctrlKey,e=1<e.which;return!t&&!e}},Ember.get,Ember.set,Zs.prototype={add:function(e){e in this.seen||(this.seen[e]=!0,this.list.push(e))},toDOM};var el=/[^a-zA-Z0-9\-]/,tl=/[^a-zA-Z0-9\-]/g;function nl(e){return e&&(el.test(e)?e.replace(tl,""):e)}var il=/&(?!\w+;)|[<>"'`]/g,rl=/[&<>"'`]/;function al(e){var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},e=e.toString();return rl.test(e)?e.replace(il):e}t=document.createElement("div"),(O=document.createElement("input")).setAttribute("name","foo"),t.appendChild(O);var ol=!!t.innerHTML.match("foo"),t=(Ember.RenderBuffer=function(e){return new Ember._RenderBuffer(e)},Ember._RenderBuffer=function(e){this.tagNames=[e||null],this.buffer=""},Ember._RenderBuffer.prototype={_element:null,_hasElement:!0,elementClasses:null,classes:null,elementId:null,elementAttributes:null,elementProperties:null,elementTag:null,elementStyle:null,parentBuffer:null,push,addClass,setClasses:function(e){this.classes=e},id,attr:function(e,t){var n=this.elementAttributes=this.elementAttributes||{};return 1===arguments.length?n[e]:(n[e]=t,this)},removeAttr:function(e){var t=this.elementAttributes;return t&&delete t[e],this},prop,removeProp,style,begin:function(e){return this.tagNames.push(e||null),this},pushOpeningTag:function(){var e=this.currentTagName();if(e)if(this._hasElement&&!this._element&&0===this.buffer.length)this._element=this.generateElement();else{var t,n,i,r=this.buffer,a=this.elementId,o=this.classes,s=this.elementAttributes,l=this.elementProperties,c=this.elementStyle;if(r+="<"+nl(e),a&&(r+=' id="'+al(a)+'"',this.elementId=null),o&&(r+=' class="'+al(o.join(" "))+'"',this.classes=null),c){for(n in r+=' style="',c)c.hasOwnProperty(n)&&(r+=n+":"+al(c[n])+";");r+='"',this.elementStyle=null}if(s){for(t in s)s.hasOwnProperty(t)&&(r+=" "+t+'="'+al(s[t])+'"');this.elementAttributes=null}if(l){for(n in l)!l.hasOwnProperty(n)||!(i=l[n])&&"number"!=typeof i||(r+=!0===i?" "+n+'="'+n+'"':" "+n+'="'+al(l[n])+'"');this.elementProperties=null}this.buffer=r+=">"}},pushClosingTag:function(){var e=this.tagNames.pop();e&&(this.buffer+="</"+nl(e)+">")},currentTagName,generateElement:function(){var e,t,n=this.tagNames.pop(),i=this.elementId,r=this.classes,a=this.elementAttributes,o=this.elementProperties,s=this.elementStyle,l="",n=a&&a.name&&!ol?"<"+nl(n)+' name="'+al(a.name)+'">':n,n=document.createElement(n),c=Ember.$(n);if(i&&(c.attr("id",i),this.elementId=null),r&&(c.attr("class",r.join(" ")),this.classes=null),s){for(t in s)s.hasOwnProperty(t)&&(l+=t+":"+s[t]+";");c.attr("style",l),this.elementStyle=null}if(a){for(e in a)a.hasOwnProperty(e)&&c.attr(e,a[e]);this.elementAttributes=null}if(o){for(t in o)o.hasOwnProperty(t)&&c.prop(t,o[t]);this.elementProperties=null}return n},element:function(){var e=this.innerString();return e&&(this._element=Ember.ViewUtils.setInnerHTML(this._element,e)),this._element},string:function(){var e,t;return this._hasElement&&this._element?void 0===(t=(e=this.element()).outerHTML)?Ember.$("<div/>").append(e).html():t:this.innerString()},innerString:function(){return this.buffer}},Vr=Ember.get,jr=Ember.set,Hr=Ember.String.fmt,Ember.EventDispatcher=Ember.Object.extend({events:{touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd",touchcancel:"touchCancel",keydown:"keyDown",keyup:"keyUp",keypress:"keyPress",mousedown:"mouseDown",mouseup:"mouseUp",contextmenu:"contextMenu",click:"click",dblclick:"doubleClick",mousemove:"mouseMove",focusin:"focusIn",focusout:"focusOut",mouseenter:"mouseEnter",mouseleave:"mouseLeave",submit:"submit",input:"input",change:"change",dragstart:"dragStart",drag:"drag",dragenter:"dragEnter",dragleave:"dragLeave",dragover:"dragOver",drop:"drop",dragend:"dragEnd"},rootElement:"body",setup:function(e,t){var n,i=Vr(this,"events");for(n in Ember.$.extend(i,e||{}),Ember.isNone(t)||jr(this,"rootElement",t),t=Ember.$(Vr(this,"rootElement")),Ember.assert(Hr("You cannot use the same root element (%@) multiple times in an Ember.Application",[t.selector||t[0].tagName]),!t.is(".ember-application")),Ember.assert("You cannot make a new Ember.Application using a root element that is a descendent of an existing Ember.Application",!t.closest(".ember-application").length),Ember.assert("You cannot make a new Ember.Application using a root element that is an ancestor of an existing Ember.Application",!t.find(".ember-application").length),t.addClass("ember-application"),Ember.assert('Unable to add "ember-application" class to rootElement. Make sure you set rootElement to the body or an element in the body.',t.is(".ember-application")),i)i.hasOwnProperty(n)&&this.setupHandler(t,n,i[n])},setupHandler:function(e,t,a){var o=this;e.on(t+".ember",".ember-view",function(i,r){return Ember.handleErrors(function(){var e,t=Ember.View.views[this.id],n=!0;return(e=o._findNearestEventManager(t,a))&&e!==r?n=o._dispatchEvent(e,i,a,t):t?n=o._bubbleEvent(t,i,a):i.stopPropagation(),n},this)}),e.on(t+".ember","[data-ember-action]",function(t){return Ember.handleErrors(function(){var e=Ember.$(t.currentTarget).attr("data-ember-action"),e=Ember.Handlebars.ActionHelper.registeredActions[e];if(e&&e.eventName===a)return e.handler(t)},this)})},_findNearestEventManager:function(e,t){for(var n=null;e&&(!(n=Vr(e,"eventManager"))||!n[t]);)e=Vr(e,"parentView");return n},_dispatchEvent:function(e,t,n,i){var r=!0,a=e[n];return"function"===Ember.typeOf(a)?(r=Ember.run),t.stopPropagation()):r=this._bubbleEvent(i,t,n),r},_bubbleEvent:function(e,t,n){return Ember.run(function(){return e.handleEvent(n,t)})},destroy:function(){var e=Vr(this,"rootElement");return Ember.$(e).off(".ember","**").removeClass("ember-application"),this._super()}}),O=Ember.run.queues,t=Ember.ArrayPolyfills.indexOf,O.splice(t.call(O,"actions")+1,0,"render","afterRender"),qr=Ember.get,zr=Ember.set,Ember.ControllerMixin.reopen({target:null,namespace:null,view:null,container:null,_childContainers:null,init:function(){this._super(),zr(this,"_childContainers",{})},_modelDidChange:Ember.observer("model",function(){var e,t=qr(this,"_childContainers");for(e in t)t.hasOwnProperty(e)&&t[e].destroy();zr(this,"_childContainers",{})})}),{}),D=Ember.get,sl=Ember.set,ll=Ember.guidFor,cl=Ember.EnumerableUtils.forEach,dl=Ember.EnumerableUtils.addObject,ul=Ember.meta,O=Ember.computed(function(){var e=this._childViews,n=Ember.A(),i=this;return cl(e,function(e){var t;e.isVirtual?(t=D(e,"childViews"))&&n.pushObjects(t):n.push(e)}),n.replace=function(e,t,n){if(i instanceof Ember.ContainerView)return Ember.deprecate("Manipulating an Ember.ContainerView through its childViews property is deprecated. Please use the ContainerView instance itself as an Ember.MutableArray."),i.replace(e,t,n);throw new Ember.Error("childViews is immutable")},n}),pl=(Ember.warn("The VIEW_PRESERVES_CONTEXT flag has been removed and the functionality can no longer be disabled.",!1!==Ember.ENV.VIEW_PRESERVES_CONTEXT),Ember.TEMPLATES={},Ember.CoreView=Ember.Object.extend(Ember.Evented,Ember.ActionHandler,{isView:!0,states:t,init,parentView:Ember.computed(function(){var e=this._parentView;return e&&e.isVirtual?D(e,"parentView"):e}).property("_parentView"),state:null,_parentView:null,concreteView:Ember.computed(function(){return this.isVirtual?D(this,"parentView"):this}).property("parentView"),instrumentName:"core_view",instrumentDetails,renderToBuffer:function(e,t){var n="render."+this.instrumentName,i={};return this.instrumentDetails(i),Ember.instrument(n,i,this)},_renderToBuffer:function(e,t){var n=this.tagName,e=(null==n&&(n="div"),this.buffer=e&&e.begin(n)||Ember.RenderBuffer(n));return this.transitionTo("inBuffer",!1),this.beforeRender(e),this.render(e),this.afterRender(e),e},trigger:function(e){this._super.apply(this,arguments);var t=this[e];if(t){for(var n=[],i=1,r=arguments.length;i<r;i++)n.push(arguments[i]);return t.apply(this,n)}},deprecatedSendHandles,deprecatedSend:function(e){var t=[].slice.call(arguments,1);Ember.assert(this+" has the action "+e+" but it is not a function","function"==typeof this[e]),Ember.deprecate("Action handlers implemented directly on views are deprecated in favor of action handlers on an `actions` object ( action: `"+e+"` on "+this+")",!1),this[e].apply(this,t)},has,destroy:function(){var e=this._parentView;if(this._super())return this.removedFromDOM||this.destroyElement(),e&&e.removeChild(this),this.transitionTo("destroying",!1),this},clearRenderedChildren:Ember.K,triggerRecursively:Ember.K,invokeRecursively:Ember.K,transitionTo:Ember.K,destroyElement:Ember.K}),Ember._ViewCollection=function(e){e=this.views=e||[];this.length=e.length}),M=(pl.prototype={length:0,trigger:function(e){for(var t,n=this.views,i=0,r=n.length;i<r;i++)(t=n[i]).trigger&&t.trigger(e)},triggerRecursively:function(e){for(var t=this.views,n=0,i=t.length;n<i;n++)t[n].triggerRecursively(e)},invokeRecursively:function(e){for(var t=this.views,n=0,i=t.length;n<i;n++)e(t[n])},transitionTo,push:function(){this.length+=arguments.length;var e=this.views;return e.push.apply(e,arguments)},objectAt:function(e){return this.views[e]},forEach,clear},[]);function hl(){Ember.run.once(Ember.View,"notifyMutationListeners")}Ember.View=Ember.CoreView.extend({concatenatedProperties:["classNames","classNameBindings","attributeBindings"],isView:!0,templateName:null,layoutName:null,template:Ember.computed(function(e,t){var n;return void 0!==t?t:(t=D(this,"templateName"),n=this.templateForName(t,"template"),Ember.assert("You specified the templateName "+t+" for "+this+", but it did not exist.",!t||n),n||D(this,"defaultTemplate"))}).property("templateName"),controller:Ember.computed(function(e){var t=D(this,"_parentView");return t?D(t,"controller"):null}).property("_parentView"),layout:Ember.computed(function(e){var t=D(this,"layoutName"),n=this.templateForName(t,"layout");return Ember.assert("You specified the layoutName "+t+" for "+this+", but it did not exist.",!t||n),n||D(this,"defaultLayout")}).property("layoutName"),_yield:function(e,t){var n=D(this,"template");n&&n(e,t)},templateForName:function(e,t){var n;if(e)return Ember.assert("templateNames are not allowed to contain periods: "+e,-1===e.indexOf(".")),(n=this.container||Ember.Container&&Ember.Container.defaultContainer)&&n.lookup("template:"+e)},context:Ember.computed(function(e,t){return 2===arguments.length?(sl(this,"_context",t),t):D(this,"_context")}).volatile(),_context:Ember.computed(function(e){var t;return(t=D(this,"controller"))?t:(t=this._parentView)?D(t,"_context"):null}),_contextDidChange:Ember.observer("context",function(){this.rerender()}),isVisible:!0,childViews:O,_childViews:M,_childViewsWillChange:Ember.beforeObserver("childViews",function(){var e;this.isVirtual&&(e=D(this,"parentView"))&&Ember.propertyWillChange(e,"childViews")}),_childViewsDidChange:Ember.observer("childViews",function(){var e;this.isVirtual&&(e=D(this,"parentView"))&&Ember.propertyDidChange(e,"childViews")}),nearestInstanceOf:function(e){Ember.deprecate("nearestInstanceOf is deprecated and will be removed from future releases. Use nearestOfType.");for(var t=D(this,"parentView");t;){if(t instanceof e)return t;t=D(t,"parentView")}},nearestOfType:function(t){for(var e=D(this,"parentView"),n=t instanceof Ember.Mixin?function(e){return t.detect(e)}:function(e){return t.detect(e.constructor)};e;){if(n(e))return e;e=D(e,"parentView")}},nearestWithProperty:function(e){for(var t=D(this,"parentView");t;){if(e in t)return t;t=D(t,"parentView")}},nearestChildOf:function(e){for(var t=D(this,"parentView");t;){if(D(t,"parentView")instanceof e)return t;t=D(t,"parentView")}},_parentViewDidChange:Ember.observer("_parentView",function(){this.isDestroying||(this.trigger("parentViewDidChange"),D(this,"parentView.controller")&&!D(this,"controller")&&this.notifyPropertyChange("controller"))}),_controllerDidChange:Ember.observer("controller"),cloneKeywords:function(){var e=D(this,"templateData"),e=e?Ember.copy(e.keywords):{};return sl(e,"view",D(this,"concreteView")),sl(e,"_view",this),sl(e,"controller",D(this,"controller")),e},render:function(e){var t,n,i=D(this,"layout")||D(this,"template");i&&(t=D(this,"context"),n=this.cloneKeywords(),n={view:this,buffer:e,isRenderData:!0,keywords:n,insideGroup:D(this,"templateData.insideGroup")},Ember.assert('template must be a function. Did you mean to call Ember.Handlebars.compile("...") or specify templateName instead?',"function"==typeof i),void 0!==(i=i(t,{data:n}))&&e.push(i))},rerender:function(){return this.currentState.rerender(this)},clearRenderedChildren:function(){for(var e=this.lengthBeforeRender,t=this.lengthAfterRender,n=this._childViews,i=t-1;e<=i;i--)n[i]&&n[i].destroy()},_applyClassNameBindings:function(e){var i,r,a,o=this.classNames;cl(e,function(e){var t,n=Ember.View._parsePropertyPath(e);(a=this._classStringForProperty(e))&&(dl(o,a),t=a),this.registerObserver(this,n.path,function(){r=this._classStringForProperty(e),i=this.$(),t&&(i.removeClass(t),o.removeObject(t)),t=r?(i.addClass(r),r):null}),this.one("willClearRender")},this)},_applyAttributeBindings:function(i,e){var r,a;cl(e,function(e){var e=e.split(":"),t=e[0],n=e[1]||t;this.registerObserver(this,t,function(){a=this.$(),r=D(this,t),Ember.View.applyAttributeBindings(a,n,r)}),r=D(this,t),Ember.View.applyAttributeBindings(i,n,r)},this)},_classStringForProperty:function(e){var e=Ember.View._parsePropertyPath(e),t=e.path,n=D(this,t);return void 0===n&&Ember.isGlobalPath(t)&&(n=D(Ember.lookup,t)),Ember.View._classStringForValue(t,n,e.className,e.falsyClassName)},element:Ember.computed(function(e,t){return void 0!==t?this.currentState.setElement(this,t):this.currentState.getElement(this)}).property("_parentView"),$:function(e){return this.currentState.$(this,e)},mutateChildViews:function(e){for(var t=this._childViews,n=t.length;0<=--n;)e(this,t[n],n);return this},forEachChildView:function(e){var t=this._childViews;if(t)for(var n=t.length,i=0;i<n;i++)e(t[i]);return this},appendTo:function(e){return this._insertElementLater(function(){Ember.assert("You tried to append to ("+e+") but that isn't in the DOM",0<Ember.$(e).length),Ember.assert("You cannot append to an existing Ember.View. Consider using Ember.ContainerView instead.",!Ember.$(e).is(".ember-view")&&!Ember.$(e).parents().is(".ember-view")),this.$().appendTo(e)}),this},replaceIn:function(e){return Ember.assert("You tried to replace in ("+e+") but that isn't in the DOM",0<Ember.$(e).length),Ember.assert("You cannot replace an existing Ember.View. Consider using Ember.ContainerView instead.",!Ember.$(e).is(".ember-view")&&!Ember.$(e).parents().is(".ember-view")),this._insertElementLater(function(){Ember.$(e).empty(),this.$().appendTo(e)}),this},_insertElementLater:function(e){this._scheduledInsert=Ember.run.scheduleOnce("render",this,"_insertElement",e)},_insertElement:function(e){this._scheduledInsert=null,this.currentState.insertElement(this,e)},append,remove:function(){this.removedFromDOM||this.destroyElement(),this.invokeRecursively)},elementId:null,findElementInParentElement,createElement:function(){var e;return D(this,"element")||(e=this.renderToBuffer(),sl(this,"element",e.element())),this},willInsertElement:Ember.K,didInsertElement:Ember.K,willClearRender:Ember.K,invokeRecursively:function(e,t){for(var n,i,r=!1===t?this._childViews:[this];r.length;)for(var a=r.slice(),r=[],o=0,s=a.length;o<s;o++)i=(n=a[o])._childViews?n._childViews.slice(0):null,e(n),i&&r.push.apply(r,i)},triggerRecursively:function(e){for(var t,n,i=[this];i.length;)for(var r=i.slice(),i=[],a=0,o=r.length;a<o;a++)n=(t=r[a])._childViews?t._childViews.slice(0):null,t.trigger&&t.trigger(e),n&&i.push.apply(i,n)},viewHierarchyCollection:function(){for(var e,t=new pl([this]),n=0;n<t.length;n++)(e=t.objectAt(n))._childViews&&t.push.apply(t,e._childViews);return t},destroyElement,willDestroyElement:Ember.K,_notifyWillDestroyElement:function(){var e=this.viewHierarchyCollection();return e.trigger("willClearRender"),e.trigger("willDestroyElement"),e},_elementDidChange:Ember.observer("element",function(){this.forEachChildView(function(e){delete ul(e).cache.element})}),parentViewDidChange:Ember.K,instrumentName:"view",instrumentDetails:function(e){e.template=D(this,"templateName"),this._super(e)},_renderToBuffer:function(e,t){this.lengthBeforeRender=this._childViews.length;e=this._super(e,t);return this.lengthAfterRender=this._childViews.length,e},renderToBufferIfNeeded,beforeRender,afterRender:function(e){e.pushClosingTag()},applyAttributesToBuffer:function(e){var t=D(this,"classNameBindings"),t=(t.length&&this._applyClassNameBindings(t),D(this,"attributeBindings")),t=(t.length&&this._applyAttributeBindings(e,t),e.setClasses(this.classNames),e.id(this.elementId),D(this,"ariaRole"));t&&e.attr("role",t),!1===D(this,"isVisible")&&e.style("display","none")},tagName:null,ariaRole:null,classNames:["ember-view"],classNameBindings:M,attributeBindings:M,init:function(){this.elementId=this.elementId||ll(this),this._super(),this._childViews=this._childViews.slice(),Ember.assert("Only arrays are allowed for 'classNameBindings'","array"===Ember.typeOf(this.classNameBindings)),this.classNameBindings=Ember.A(this.classNameBindings.slice()),Ember.assert("Only arrays are allowed for 'classNames'","array"===Ember.typeOf(this.classNames)),this.classNames=Ember.A(this.classNames.slice())},appendChild:function(e,t){return this.currentState.appendChild(this,e,t)},removeChild:function(e){var t;if(!this.isDestroying)return sl(e,"_parentView",null),t=this._childViews,Ember.EnumerableUtils.removeObject(t,e),this.propertyDidChange("childViews"),this},removeAllChildren,destroyAllChildren,removeFromParent,destroy:function(){var e,t=this._childViews,n=D(this,"parentView"),i=this.viewName;if(this._super()){for(e=t.length-1;0<=e;e--)t[e].removedFromDOM=!0;for(i&&n&&n.set(i,null),e=t.length-1;0<=e;e--)t[e].destroy();return this}},createChildView:function(e,t){var n,i;if(e)return e.isView&&e._parentView===this&&e.container===this.container||((t=t||{})._parentView=this,Ember.CoreView.detect(e)?(t.templateData=t.templateData||D(this,"templateData"),t.container=this.container,(e=e.create(t)).viewName&&sl(D(this,"concreteView"),e.viewName,e)):"string"==typeof e?(i=this.container.lookupFactory(n="view:"+e),Ember.assert("Could not find view: '"+n+"'",!!i),t.templateData=D(this,"templateData"),e=i.create(t)):(Ember.assert("You must pass instance or subclass of View",e.isView),t.container=this.container,D(e,"templateData")||(t.templateData=D(this,"templateData")),Ember.setProperties(e,t))),e;throw new TypeError("createChildViews first argument must exist")},becameVisible:Ember.K,becameHidden:Ember.K,_isVisibleDidChange:Ember.observer("isVisible",function(){var e,t=this.$();t&&(e=D(this,"isVisible"),t.toggle(e),this._isAncestorHidden()||(e?this._notifyBecameVisible():this._notifyBecameHidden()))}),_notifyBecameVisible:function(){this.trigger("becameVisible"),this.forEachChildView(function(e){var t=D(e,"isVisible");!t&&null!==t||e._notifyBecameVisible()})},_notifyBecameHidden:function(){this.trigger("becameHidden"),this.forEachChildView(function(e){var t=D(e,"isVisible");!t&&null!==t||e._notifyBecameHidden()})},_isAncestorHidden:function(){for(var e=D(this,"parentView");e;){if(!1===D(e,"isVisible"))return!0;e=D(e,"parentView")}return!1},clearBuffer:function(){this.invokeRecursively(function(e){e.buffer=null})},transitionTo:function(t,e){var n=this.currentState,i=this.currentState=this.states[t];this.state=t,n&&n.exit&&n.exit(this),i.enter&&i.enter(this),"inDOM"===t&&delete Ember.meta(this).cache.element,!1!==e&&this.forEachChildView(function(e){e.transitionTo(t)})},handleEvent,registerObserver:function(e,t,n,i){var r,a,o;i||"function"!=typeof n||(i=n,n=null),e&&"object"==typeof e&&(r=this,a,o,Ember.addObserver(e,t,n,o),this.one("willClearRender"))}}),Ember.View.reopen({domManager:{prepend:function(e,t){e.$().prepend(t),hl()},after:function(e,t){e.$().after(t),hl()},html:function(e,t){e.$().html(t),hl()},replace:function(e){var t=D(e,"element");sl(e,"element",null),e._insertElementLater(function(){Ember.$(t).replaceWith(D(e,"element")),hl()})},remove:function(e){e.$().remove(),hl()},empty}}),Ember.View.reopenClass({_parsePropertyPath:function(e){var t,n,e=e.split(":"),i=e[0],r="";return 1<e.length&&(r=":"+(t=e[1]),(n=3===e.length?e[2]:n)&&(r+=":"+n)),{path:i,classNames:r,className:""===t?void 0:t,falsyClassName:n}},_classStringForValue:function(e,t,n,i){return n||i?n&&t?n:i&&!t?i:null:!0===t?(n=e.split("."),Ember.String.dasherize(n[n.length-1])):!1!==t&&null!=t?t:null}});var fl=Ember.Object.extend(Ember.Evented).create();function ml(e,t,n,i){t.triggerRecursively("willInsertElement"),n?n.domManager.after(n,i.string()):e.domManager.prepend(e,i.string()),t.forEach)}function vl(){Ember.run.once(Ember.View,"notifyMutationListeners")}function gl(e,t,n,i){this.path=e,this.pathRoot=t,this.isEscaped=n,this.templateData=i,this.morph=ca(),this.state="preRender",this.updateId=null,this._parentView=null,this.buffer=null}function yl(e){return!Ember.isNone(e)}function bl(e,t,n){e=pa(e,t,n);return null==e?e="":e instanceof Handlebars.SafeString||(e=String(e)),e=n.hash.unescaped?e:Handlebars.Utils.escapeExpression(e)}function wl(e,t,n,i,r,a){var o,s,l,c,d,u,p=t.data,h=t.fn,f=t.inverse,m=p.view,v=ha(this,e,p);if("object"==typeof this){if(p.insideGroup?(s=function(){Ember.run.once(m,"rerender")},c=pa(this,e,t),c=r?r(c):c,d=n?this:c,i(c)?l=h:f&&(l=f),l(d,{data:t.data})):(u=m.createChildView(Ember._HandlebarsBoundView,{preserveContext:n,shouldDisplayFunc:i,valueNormalizerFunc:r,displayTemplate:h,inverseTemplate:f,path:e,pathRoot:this,previousContext:this,isEscaped:!t.hash.unescaped,templateData:t.data}),t.hash.controller&&u.set("_contextController",this.container.lookupFactory("controller:"+t.hash.controller).create({container:this.container,parentController:this,target:this})),m.appendChild(u),s=function(){Ember.run.scheduleOnce("render",u,"rerenderIfNeeded")}),""!==v.path&&(m.registerObserver(v.root,v.path,s),a))for(o=0;o<a.length;o++)m.registerObserver(v.root,v.path+"."+a[o],s)}else p.buffer.push(pa(this,e,t))}function El(e){var t=e&&da(e,"isTruthy");return"boolean"==typeof t?t:Ember.isArray(e)?0!==da(e,"length"):!!efunction xl(e,t,n){var i=t.split("/"),r=i[i.length-1],r=(i[i.length-1]="_"+r,n.data.view),i=i.join("/"),i=r.templateForName(i),r=!i&&r.templateForName(t);Ember.assert("Unable to find partial with name '"+t+"'.",i||r),(i=i||r)(e,{data:n.data})}Ember.View.addMutationListener=function(e){fl.on("change",e)},Ember.View.removeMutationListener=function(e){fl.off("change",e)},Ember.View.notifyMutationListeners=function(){fl.trigger("change")},Ember.View.views={},Ember.View.childViewsProperty=O,Ember.View.applyAttributeBindings=function(e,t,n){var i=Ember.typeOf(n);"value"===t||"string"!==i&&("number"!==i||isNaN(n))?"value"===t||"boolean"===i?Ember.isNone(n)||!1===n?(e.removeAttr(t),e.prop(t,"")):n!==e.prop(t)&&e.prop(t,n):n||e.removeAttr(t):n!==e.attr(t)&&e.attr(t,n)},Ember.View.states=t,Ember.get,Fr=Ember.set,Ember.View.states._default={appendChild:function(){throw"You can't use appendChild outside of the rendering process"},$:function(){},getElement:function(){return null},handleEvent:function(){return!0},destroyElement:function(e){return Fr(e,"element",null),e._scheduledInsert&&(Ember.run.cancel(e._scheduledInsert),e._scheduledInsert=null),e},renderToBufferIfNeeded:function(){return!1},rerender:Ember.K,invokeObserver:Ember.K},M=Ember.View.states.preRender=Ember.create(Ember.View.states._default),Ember.merge(M,{insertElement:function(e,t){e.createElement();for(var n=e.viewHierarchyCollection(),i=(n.trigger("willInsertElement"),t.call(e),e.get("element"));i=i.parentNode;)i===document&&(n.transitionTo("inDOM",!1),n.trigger("didInsertElement"))},renderToBufferIfNeeded,empty:Ember.K,setElement:function(e,t){return null!==t&&e.transitionTo("hasElement"),t}}),Ember.get,Ember.set,O=Ember.View.states.inBuffer=Ember.create(Ember.View.states._default),Ember.merge(O,{$,rerender,appendChild:function(e,t,n){var i=e.buffer,r=e._childViews;return t=e.createChildView(t,n),(r=r.length?r:e._childViews=r.slice()).push(t),t.renderToBuffer(i),e.propertyDidChange("childViews"),t},destroyElement:function(e){return e.clearBuffer(),e._notifyWillDestroyElement().transitionTo("preRender",!1),e},empty:function(){Ember.assert("Emptying a view in the inBuffer state is not allowed and should not happen under normal circumstances. Most likely there is a bug in your application. This may be due to excessive property change notifications.")},renderToBufferIfNeeded,insertElement,setElement:function(e,t){return null===t?e.transitionTo("preRender"):(e.clearBuffer(),e.transitionTo("hasElement")),t},invokeObserver:function(e,t){t.call(e)}}),Br=Ember.get,Ur=Ember.set,t=Ember.View.states.hasElement=Ember.create(Ember.View.states._default),Ember.merge(t,{$:function(e,t){e=Br(e,"element");return t?Ember.$(t,e):Ember.$(e)},getElement:function(e){var t=Br(e,"parentView");return(t=t&&Br(t,"element"))?e.findElementInParentElement(t):Ember.$("#"+Br(e,"elementId"))[0]},setElement:function(e,t){if(null!==t)throw"You cannot set an element to a non-null value when the element is already in the DOM.";return e.transitionTo("preRender"),t},rerender:function(e){return e.triggerRecursively("willClearRender"),e.clearRenderedChildren(),e.domManager.replace(e),e},destroyElement:function(e){return e._notifyWillDestroyElement(),e.domManager.remove(e),Ur(e,"element",null),e._scheduledInsert&&(Ember.run.cancel(e._scheduledInsert),e._scheduledInsert=null),e},empty:function(e){var t,n,i=e._childViews;if(i)for(t=i.length,n=0;n<t;n++)i[n]._notifyWillDestroyElement();e.domManager.empty(e)},handleEvent,invokeObserver:function(e,t){t.call(e)}}),M=Ember.View.states.hasElement,M=Ember.View.states.inDOM=Ember.create(M),Ember.merge(M,{enter:function(e){e.isVirtual||(Ember.assert("Attempted to register a view with an id already in use: "+e.elementId,!Ember.View.views[e.elementId]),Ember.View.views[e.elementId]=e),e.addBeforeObserver("elementId",function(){throw new Ember.Error("Changing a view's elementId after creation is not allowed")})},exit:function(e){this.isVirtual||delete Ember.View.views[e.elementId]},insertElement}),Wr="You can't call %@ on a view being destroyed",$r=Ember.String.fmt,O=Ember.View.states.destroying=Ember.create(Ember.View.states._default),Ember.merge(O,{appendChild:function(){throw $r(Wr,["appendChild"])},rerender:function(){throw $r(Wr,["rerender"])},destroyElement:function(){throw $r(Wr,["destroyElement"])},empty:function(){throw $r(Wr,["empty"])},setElement:function(){throw $r(Wr,["set('element', ...)"])},renderToBufferIfNeeded:function(){return!1},insertElement:Ember.K}),Ember.View.cloneStates=function(e){var t,n={_default:{}};for(t in n.preRender=Ember.create(n._default),n.destroying=Ember.create(n._default),n.inBuffer=Ember.create(n._default),n.hasElement=Ember.create(n._default),n.inDOM=Ember.create(n.hasElement),e)e.hasOwnProperty(t)&&Ember.merge(n[t],e[t]);return n},t=Ember.View.cloneStates(Ember.View.states),v=Ember.get,Yr=Ember.set,Gr=Ember.EnumerableUtils.forEach,Kr=Ember._ViewCollection,Ember.ContainerView=Ember.View.extend(Ember.MutableArray,{states:t,init:function(){this._super();var e=v(this,"childViews"),i=(Ember.defineProperty(this,"childViews",Ember.View.childViewsProperty),this._childViews),e=(Gr(e,function(e,t){var n;"string"==typeof e?(n=v(this,e),n=this.createChildView(n),Yr(this,e,n)):n=this.createChildView(e),i[t]=n},this),v(this,"currentView"));e&&(i=i.length?i:this._childViews=this._childViews.slice()).push(this.createChildView(e))},replace:function(e,t,n){var i,r=n?v(n,"length"):0,a=this;return Ember.assert("You can't add a child to a container that is already a child of another view",Ember.A(n).every(function(e){return!v(e,"_parentView")||v(e,"_parentView")===a})),this.arrayContentWillChange(e,t,r),this.childViewsWillChange(this._childViews,e,t),0===r?this._childViews.splice(e,t):(i=[e,t].concat(n),n.length&&!this._childViews.length&&(this._childViews=this._childViews.slice()),this._childViews.splice.apply(this._childViews,i)),this.arrayContentDidChange(e,t,r),this.childViewsDidChange(this._childViews,e,t,r),this},objectAt:function(e){return this._childViews[e]},length:Ember.computed(function(){return this._childViews.length}).volatile(),render,instrumentName:"container",childViewsWillChange:function(e,t,n){var i;this.propertyWillChange("childViews"),0<n&&(i=e.slice(t,t+n),this.currentState.childViewsWillChange(this,e,t,n),this.initializeViews(i,null,null))},removeChild,childViewsDidChange:function(e,t,n,i){var r;0<i&&(r=e.slice(t,t+i),this.initializeViews(r,this,v(this,"templateData")),this.currentState.childViewsDidChange(this,e,t,i)),this.propertyDidChange("childViews")},initializeViews:function(e,t,n){Gr(e,function(e){Yr(e,"_parentView",t),!e.container&&t&&Yr(e,"container",t.container),v(e,"templateData")||Yr(e,"templateData",n)})},currentView:null,_currentViewWillChange:Ember.beforeObserver("currentView",function(){var e=v(this,"currentView");e&&e.destroy()}),_currentViewDidChange:Ember.observer("currentView",function(){var e=v(this,"currentView");e&&(Ember.assert("You tried to set a current view that already has a parent. Make sure you don't have multiple outlets in the same view.",!v(e,"_parentView")),this.pushObject(e))}),_ensureChildrenAreInDOM:function(){this.currentState.ensureChildrenAreInDOM(this)}}),Ember.merge(t._default,{childViewsWillChange:Ember.K,childViewsDidChange:Ember.K,ensureChildrenAreInDOM:Ember.K}),Ember.merge(t.inBuffer,{childViewsDidChange}),Ember.merge(t.hasElement,{childViewsWillChange:function(e,t,n,i){for(var r=n;r<n+i;r++)t[r].remove()},childViewsDidChange:function(e,t,n,i){Ember.run.scheduleOnce("render",e,"_ensureChildrenAreInDOM")},ensureChildrenAreInDOM:function(e){for(var t,n,i,r=e._childViews,a=new Kr,o=0,s=r.length;o<s;o++)t=r[o],i||((i=Ember.RenderBuffer())._hasElement=!1),t.renderToBufferIfNeeded(i)?a.push(t):a.length?(ml(e,a,n,i),i=null,n=t,a.clear()):n=t;a.length&&ml(e,a,n,i)}}),g=Ember.get,Qr=Ember.set,Xr=Ember.String.fmt,Ember.CollectionView=Ember.ContainerView.extend({content:null,emptyViewClass:Ember.View,emptyView:null,itemViewClass:Ember.View,init,_contentWillChange:Ember.beforeObserver("content",function(){var e=this.get("content"),t=(e&&e.removeArrayObserver(this),e?g(e,"length"):0);this.arrayWillChange(e,0,t)}),_contentDidChange:Ember.observer("content",function(){var e=g(this,"content"),t=(e&&(this._assertArrayLike(e),e.addArrayObserver(this)),e?g(e,"length"):0);this.arrayDidChange(e,0,null,t)}),_assertArrayLike:function(e){Ember.assert(Xr("an Ember.CollectionView's content must implement Ember.Array. You passed %@",[e]),Ember.Array.detect(e))},destroy:function(){var e;if(this._super())return(e=g(this,"content"))&&e.removeArrayObserver(this),this._createdEmptyView&&this._createdEmptyView.destroy(),this},arrayWillChange:function(e,t,n){var i,r=g(this,"emptyView"),a=(r&&r instanceof Ember.View&&r.removeFromParent(),this._childViews);for(n===this._childViews.length&&(this.currentState.empty(this),this.invokeRecursively,!1)),i=t+n-1;t<=i;i--)a[i].destroy()},arrayDidChange:function(e,t,n,i){var r,a,o,s,l=[];if(e?g(e,"length"):0)for("string"==typeof(o=g(this,"itemViewClass"))&&(o=g(o)||o),Ember.assert(Xr("itemViewClass must be a subclass of Ember.View, not %@",[o]),"string"==typeof o||Ember.View.detect(o)),a=t;a<t+i;a++)r=e.objectAt(a),r=this.createChildView(o,{content:r,contentIndex:a}),l.push(r);else{if(!(s=g(this,"emptyView")))return;"string"==typeof s&&(s=g(s)||s),s=this.createChildView(s),l.push(s),Qr(this,"emptyView",s),Ember.CoreView.detect(s)&&(this._createdEmptyView=s)}this.replace(t,0,l)},createChildView:function(e,t){e=this._super(e,t);t=g(e,"tagName");return null==t&&(t=Ember.CollectionView.CONTAINER_MAP[g(this,"tagName")],Qr(e,"tagName",t)),e}}),Ember.CollectionView.CONTAINER_MAP={ul:"li",ol:"li",table:"tr",thead:"tr",tbody:"tr",tfoot:"tr",tr:"td",select:"option"},Ember.ComponentTemplateDeprecation=Ember.Mixin.create({willMergeMixin:function(e){this._super.apply(this,arguments);var t,n,i=e.layoutName||e.layout;e.templateName&&!i&&(t="templateName",n="layoutName",e.layoutName=e.templateName,delete e.templateName),e.template&&!i&&(t="template",n="layout",e.layout=e.template,delete e.template),t&&Ember.deprecate("Do not specify "+t+" on a Component, use "+n+" instead.",!1)}}),b=Ember.get,Jr=Ember.set,Zr=Ember.isNone,ea=Array.prototype.slice,Ember.Component=Ember.View.extend(Ember.TargetActionSupport,Ember.ComponentTemplateDeprecation,{init:function(){this._super(),Jr(this,"context",this),Jr(this,"controller",this)},defaultLayout,template:Ember.computed(function(e,t){var n;return void 0!==t?t:(t=b(this,"templateName"),n=this.templateForName(t,"template"),Ember.assert("You specified the templateName "+t+" for "+this+", but it did not exist.",!t||n),n||b(this,"defaultTemplate"))}).property("templateName"),templateName:null,cloneKeywords,_yield:function(e,t){var t=t.data.view,n=this._parentView,i=b(this,"template");i&&(Ember.assert("A Component must have a parent view in order to yield.",n),t.appendChild(Ember.View,{isVirtual:!0,tagName:"",_contextView:n,template:i,context:b(n,"context"),controller:b(n,"controller"),templateData:{keywords:n.cloneKeywords()}}))},targetObject:Ember.computed(function(e){var t=b(this,"_parentView");return t?b(t,"controller"):null}).property("_parentView"),sendAction:function(e){var t,n=ea.call(arguments,1);void 0===e?(t=b(this,"action"),Ember.assert("The default action was triggered on the component "+this.toString()+", but the action name ("+t+") was not a string.",Zr(t)||"string"==typeof t)):(t=b(this,e),Ember.assert("The "+e+" action was triggered on the component "+this.toString()+", but the action name ("+t+") was not a string.",Zr(t)||"string"==typeof t)),void 0!==t&&this.triggerAction({action:t,actionContext:n})}}),Ember.ViewTargetActionSupport=Ember.Mixin.create(Ember.TargetActionSupport,{target:Ember.computed.alias("controller"),actionContext:Ember.computed.alias("context")}),e("metamorph",[],function(){"use strict";function n(){}function i(e){var t=this instanceof i?this:new n,e=(t.innerHTML=e,"metamorph-"+v++);return t.start=e+"-start",t.end=e+"-end",t}var e,r,t,a,o,s,l,c,d,u,p,h,f,m,v=0,g=!("undefined"!=typeof MetamorphENV?MetamorphENV.DISABLE_RANGE_API:"undefined"!==ENV&&ENV.DISABLE_RANGE_API)&&"undefined"!=typeof document&&"createRange"in document&&"undefined"!=typeof Range&&Range.prototype.createContextualFragment,y="undefined"!=typeof document&&((e=document.createElement("div")).innerHTML="<div></div>",e.firstChild.innerHTML="<script><\/script>",""===e.firstChild.innerHTML),b=document&&((e=document.createElement("div")).innerHTML="Test: <script type='text/x-placeholder'><\/script>Value","Test:"===e.childNodes[0].nodeValue&&" Value"===e.childNodes[2].nodeValue);return n.prototype=i.prototype,t=function(){return this.startTag()+this.innerHTML+this.endTag()},a=function(){return"<script id='"+this.start+"' type='text/x-placeholder'><\/script>"},o,g=g?(r=function(e,t){var n=document.createRange(),i=document.getElementById(e.start),e=document.getElementById(e.end);return t?(n.setStartBefore(i),n.setEndAfter(e)):(n.setStartAfter(i),n.setEndBefore(e)),n},p=function(e,t){t=r(this,t),t.deleteContents(),e=t.createContextualFragment(e);t.insertNode(e)},h=function(){r(this,!0).deleteContents()},f=function(e){var t=document.createRange(),t=(t.setStart(e),t.collapse(!1),t.createContextualFragment(this.outerHTML()));e.appendChild(t)},m=function(e){var t=document.createRange(),n=document.getElementById(this.end),n=(t.setStartAfter(n),t.setEndAfter(n),t.createContextualFragment(e));t.insertNode(n)},function(e){var t=document.createRange(),n=document.getElementById(this.start),n=(t.setStartAfter(n),t.setEndAfter(n),t.createContextualFragment(e));t.insertNode(n)}):(s={select:[1,"<select multiple='multiple'>","</select>"],fieldset:[1,"<fieldset>","</fieldset>"],table:[1,"<table>","</table>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"],colgroup:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],map:[1,"<map>","</map>"],_default:[0,"",""]},l=function(e,t){if(e.getAttribute("id")===t)return e;for(var n,i=e.childNodes.length,r=0;r<i;r++)if(n=1===(n=e.childNodes[r]).nodeType&&l(n,t))return n},c=function(e,t){var r=[];if(b&&(t=t.replace(/(\s+)(<script id='([^']+)')/g,function(e,t,n,i){return r.push([i,t]),n})),e.innerHTML=t,0<r.length)for(var n=r.length,i=0;i<n;i++){var a=l(e,r[i][0]),o=document.createTextNode(r[i][1]);a.parentNode.insertBefore(o,a)}},d=function(e,t){var e=s[e.tagName.toLowerCase()]||s._default,n=e[0],i=e[1],e=e[2],r=(y&&(t="&shy;"+t),document.createElement("div"));c(r,i+t+e);for(var a=0;a<=n;a++)r=r.firstChild;if(y){for(var o=r;1===o.nodeType&&!o.nodeName;)o=o.firstChild;3===o.nodeType&&""===o.nodeValue.charAt(0)&&(o.nodeValue=o.nodeValue.slice(1))}return r},u=function(e){for(;""===e.parentNode.tagName;)e=e.parentNode;return e},p=function(e,t){var n,i,r,a,o,s=u(document.getElementById(this.start)),l=document.getElementById(this.end),c=l.parentNode;for(o=l,(a=s).parentNode!==o.parentNode&&o.parentNode.insertBefore(a,o.parentNode.firstChild),n=s.nextSibling;n;){if(i=n.nextSibling,r=n===l){if(!t)break;l=n.nextSibling}if(n.parentNode.removeChild(n),r)break;n=i}for(n=d(s.parentNode,e),t&&s.parentNode.removeChild(s);n;)i=n.nextSibling,c.insertBefore(n,l),n=i},h=function(){var e=u(document.getElementById(this.start)),t=document.getElementById(this.end);this.html(""),e.parentNode.removeChild(e),t.parentNode.removeChild(t)},f=function(e){for(var t,n=d(e,this.outerHTML());n;)t=n.nextSibling,e.appendChild(n),n=t},m=function(e){for(var t,n=document.getElementById(this.end),i=n.nextSibling,r=n.parentNode,a=d(r,e);a;)t=a.nextSibling,r.insertBefore(a,i),a=t},function(e){for(var t,n=document.getElementById(this.start),i=n.parentNode,r=d(i,e),a=n.nextSibling;r;)t=r.nextSibling,i.insertBefore(r,a),r=t}),i.prototype.html=function(e){if(this.checkRemoved(),void 0===e)return this.innerHTML;p.call(this,e),this.innerHTML=e},i.prototype.replaceWith=function(e){this.checkRemoved(),p.call(this,e,!0)},i.prototype.remove=h,i.prototype.outerHTML=t,i.prototype.appendTo=f,i.prototype.after=m,i.prototype.prepend=g,i.prototype.startTag=a,i.prototype.endTag=o,i.prototype.isRemoved=function(){var e=document.getElementById(this.start),t=document.getElementById(this.end);return!e||!t},i.prototype.checkRemove},i}),function(){var e=Object.create||function(e){function t(){}return t.prototype=e,new t},n=Ember.imports&&Ember.imports.Handlebars||this&&this.Handlebars,i=(n||"function"!=typeof R||(n=irequire("handlebars")),Ember.assert("Ember Handlebars requires Handlebars version 1.0 or 1.1. Include a SCRIPT tag in the HTML HEAD linking to the Handlebars file before you link to Ember.",n),Ember.assert("Ember Handlebars requires Handlebars version 1.0 or 1.1, COMPILER_REVISION expected: 4, got: "+n.COMPILER_REVISION+" - Please note: Builds of master may have other COMPILER_REVISION values.",4===n.COMPILER_REVISION),Ember.Handlebars=e(n),Ember.Handlebars.helper=function(e,t){Ember.assert("You tried to register a component named '"+e+"', but component names must include a '-'",!Ember.Component.detect(t)||e.match(/-/)),Ember.View.detect(t)?Ember.Handlebars.registerHelper(e,Ember.Handlebars.makeViewHelper(t)):Ember.Handlebars.registerBoundHelper.apply(null,arguments)},Ember.Handlebars.makeViewHelper=function(t){return function(e){return Ember.assert("You can only pass attributes (such as name=value) not bare values to a helper for a View found in '"+t.toString()+"'",arguments.length<2),Ember.Handlebars.helpers.view.call(this,t,e)}},Ember.Handlebars.helpers=e(n.helpers),Ember.Handlebars.Compiler=function(){},n.Compiler&&(Ember.Handlebars.Compiler.prototype=e(n.Compiler.prototype)),Ember.Handlebars.Compiler.prototype.compiler=Ember.Handlebars.Compiler,Ember.Handlebars.JavaScriptCompiler=function(){},n.JavaScriptCompiler&&(Ember.Handlebars.JavaScriptCompiler.prototype=e(n.JavaScriptCompiler.prototype),Ember.Handlebars.JavaScriptCompiler.prototype.compiler=Ember.Handlebars.JavaScriptCompiler),Ember.Handlebars.JavaScriptCompiler.prototype.namespace="Ember.Handlebars",Ember.Handlebars.JavaScriptCompiler.prototype.initializeBuffer=function(){return"''"},Ember.Handlebars.JavaScriptCompiler.prototype.appendToBuffe},/helpers\.(.*?)\)/),r=/helpers\['(.*?)'/,a=/(.*blockHelperMissing\.call\(.*)(stack[0-9]+)(,.*)/,t=(Ember.Handlebars.JavaScriptCompiler.stringifyLastBlockHelperMissingInvocation=function(e){var t=e[e.length-1],n=(i.exec(t)||r.exec(t))[1],t=a.exec(t);e[e.length-1]=t[1]+"'"+n+"'"+t[3]},Ember.Handlebars.JavaScriptCompiler.stringifyLastBlockHelperMissingInvocation),o=Ember.Handlebars.JavaScriptCompiler.prototype.blockValue,s=(Ember.Handlebars.JavaScriptCompiler.prototype.blockValue=function(){o.apply(this,arguments),t(this.source)},Ember.Handlebars.JavaScriptCompiler.prototype.ambiguousBlockValue),l=(Ember.Handlebars.JavaScriptCompiler.prototype.ambiguousBlockValue=function(){s.apply(this,arguments),t(this.source)},"ember"+ +new Date),c=1;Ember.Handlebars.Compiler.prototype.mustache=function(e){var t;return e.isHelper&&"control"===e.id.string?(e.hash=e.hash||new n.AST.HashNode([]),e.hash.pairs.push(["controlID",new n.AST.StringNode(l+c++)])):e.params.length||e.hash||(t=new n.AST.IdNode([{part:"_triageMustache"}]),e.escaped||(e.hash=e.hash||new n.AST.HashNode([]),e.hash.pairs.push(["unescaped",new n.AST.StringNode("true")])),e=new n.AST.MustacheNode([t].concat([e.id]),e.hash,!e.escaped)),n.Compiler.prototype.mustache.call(this,e)},Ember.Handlebars.precompile=function(e){var e=n.parse(e),t={knownHelpers:{action:!0,unbound:!0,"bind-attr":!0,template:!0,view:!0,_triageMustache:!0},data:!0,stringParams:!0},e=(new Ember.Handlebars.Compiler).compile(e,t);return(new Ember.Handlebars.JavaScriptCompiler).compile(e,t,void 0,!0)},n.compile&&(Ember.Handlebars.compile=function(e){var e=n.parse(e),t={data:!0,stringParams:!0},e=(new Ember.Handlebars.Compiler).compile(e,t),e=(new Ember.Handlebars.JavaScriptCompiler).compile(e,t,void 0,!0),t=Ember.Handlebars.template(e);return t.isMethod=!1,t})}(),ta=Array.prototype.slice,na=Ember.Handlebars.template,ia=Ember.Handlebars.normalizePath=function(e,t,n){var i,n=n&&n.keywords||{},r=t.split(".",1)[0];return n.hasOwnProperty(r)&&(e=n[r],i=!0,t=t===r?"":t.substr(r.length+1)),{root:e,path:t,isKeyword:i}},ra=Ember.Handlebars.get=function(e,t,n){var i,n=n&&n.data,n=ia(e,t,n);return Ember.FEATURES.isEnabled("ember-handlebars-caps-lookup")?i=Ember.isGlobalPath(t)?Ember.get(Ember.lookup,t):Ember.get(n.root,n.path):(e=n.root,t=n.path,void 0===(i=Ember.get(e,t))&&e!==Ember.lookup&&Ember.isGlobalPath(t)&&(i=Ember.get(Ember.lookup,t))),i},Ember.Handlebars.resolveParams=function(e,t,n){for(var i,r,a=[],o=n.types,s=0,l=t.length;s<l;s++)i=t[s],r=o[s],a.push("ID"===r?ra(e,i,n):i);return a},Ember.Handlebars.resolveHash=function(e,t,n){var i,r,a={},o=n.hashTypes;for(r in t)t.hasOwnProperty(r)&&(i=o[r],a[r]="ID"===i?ra(e,t[r],n):t[r]);return a},Ember.Handlebars.registerHelper("helperMissing",function(e){var t="",n=arguments[arguments.length-1],i=Ember.Handlebars.resolveHelper(n.data.view.container,e);if(i)return i.apply(this,ta.call(arguments,1));throw n.data&&(t=n.data.view),new Ember.Error(Ember.String.fmt("%@ Handlebars error: Could not find property '%@' on object %@.",[t,e,this]))}),Ember.Handlebars.registerHelper("blockHelperMissing",function(e){var t=arguments[arguments.length-1],t=(Ember.assert("`blockHelperMissing` was invoked without a helper name, which is most likely due to a mismatch between the version of Ember.js you're running now and the one used to precompile your templates. Please make sure the version of `ember-handlebars-compiler` you're using is up to date.",e),Ember.Handlebars.resolveHelper(t.data.view.container,e));return t?t.apply(this,ta.call(arguments,1)):Handlebars.helpers.helperMissing.call(this,e)}),Ember.Handlebars.registerBoundHelper=function(e,t){var n=ta.call(arguments,1),n=Ember.Handlebars.makeBoundHelper.apply(this,n);Ember.Handlebars.registerHelper(e,n)},Ember.Handlebars.makeBoundHelper=function(R){var V=ta.call(arguments,1);function e(){var n,e,t,i,r,a=ta.call(arguments,0,-1),o=a.length,s=arguments[arguments.length-1],l=[],c=s.data,d=c.isUnbound?ta.call(s.types,1):s.types,u=s.hash,p=c.view,h=s.contexts,f=h&&h.length?h[0]:this,m="",v=Ember._SimpleHandlebarsView.prototype.normalizedValue,g=(Ember.assert("registerBoundHelper-generated helpers do not support use with Handlebars blocks.",!s.fn),u.boundOptions={});for(t in u)Ember.IS_BINDING.test(t)&&(g[t.slice(0,-7)]=u[t]);var y,b=[];for(c.properties=[],n=0;n<o;++n)c.properties.push(a[n]),"ID"===d[n]?(y=ia(f,a[n],c),l.push(y),b.push(y)):c.isUnbound?l.push({path:a[n]}):l.push(null);if(c.isUnbound){var w,E,k,x,C,_=this,h=R,T=l,S=s,A=[],P=S.hash,I=P.boundOptions,L=ta.call(S.types,1);for(C in I)I.hasOwnProperty(C)&&(P[C]=Ember.Handlebars.get(_,I[C],S));for(w=0,E=T.length;w<E;++w)k=T[w],x=L[w],A.push("ID"===x?Ember.Handlebars.get(k.root,k.path,S):k.path);return A.push(S),h.apply(_,A)}var D=new Ember._SimpleHandlebarsView(null,null,!s.hash.unescaped,s.data);for(i in D.normalizedValue=function(){var e,t=[];for(e in g)g.hasOwnProperty(e)&&(r=ia(f,g[e],c),D.path=r.path,D.pathRoot=r.root,u[e]=v.call(D));for(n=0;n<o;++n)(r=l[n])?(D.path=r.path,D.pathRoot=r.root,t.push(v.call(D))):t.push(a[n]);return t.push(s),R.apply(f,t)},p.appendChild(D),g)g.hasOwnProperty(i)&&b.push(ia(f,g[i],c));for(n=0,e=b.length;n<e;++n)r=b[n],p.registerObserver(r.root,r.path,D,D.rerender);if("ID"===d[0]&&0!==l.length){var h=l[0],O=h.root,h=h.path;Ember.isEmpty(h)||(m=h+".");for(var M=0,N=V.length;M<N;M++)p.registerObserver(O,m+V[M],D,D.rerender)}}return e._rawFunction=R,e},Ember.Handlebars.templat},Ember.String.htmlSaf},aa=Ember.String.htmlSafe,!0!==Ember.EXTEND_PROTOTYPES&&!Ember.EXTEND_PROTOTYPES.String||(String.prototype.htmlSafe=function(){return aa(this)}),Ember.Handlebars.resolvePaths=function(e){for(var t=[],n=e.contexts,i=e.roots,r=e.data,a=0,o=n.length;a<o;a++)t.push(Ember.Handlebars.get(i[a],n[a],{data:r}));return t},Ember.set,Ember.get,oa=s("metamorph"),Ember._Metamorph=Ember.Mixin.create({isVirtual:!0,tagName:"",instrumentName:"metamorph",init:function(){this._super(),this.morph=oa(),Ember.deprecate("Supplying a tagName to Metamorph views is unreliable and is deprecated. You may be setting the tagName on a Handlebars helper that creates a Metamorph.",!this.tagName)},beforeRender:function(e){e.push(this.morph.startTag()),e.pushOpeningTag()},afterRende},createElement:function(){var e=this.renderToBuffer();this.outerHTML=e.string(),this.clearBuffer()},domManager:{remov},prepend:function(e,t){e.morph.prepend(t),vl()},after:function(e,t){e.morph.after(t),vl()},htm},replace:function(t){var n=t.morph;t.transitionTo("preRender"),Ember.run.schedule("render",this,function(){var e;t.isDestroying||(t.clearRenderedChildren(),e=t.renderToBuffer(),t.invokeRecursively(function(e){e.propertyWillChange("element")}),t.triggerRecursively("willInsertElement"),n.replaceWith(e.string()),t.transitionTo("inDOM"),t.invokeRecursivel}),t.triggerRecursively("didInsertElement"),vl())})},empt}}}),Ember._MetamorphView=Ember.View.extend(Ember._Metamorph),Ember._SimpleMetamorphView=Ember.CoreView.extend(Ember._Metamorph),w=Ember.get,sa=Ember.set,la=Ember.Handlebars.get,ca=s("metamorph"),(Ember._SimpleHandlebarsView=gl).prototype={isVirtual:!0,isView:!0,destroy:function(){this.updateId&&(Ember.run.cancel(this.updateId),this.updateId=null),this._parentView&&this._parentView.removeChild(this),this.morph=null,this.state="destroyed"},propertyWillChange:Ember.K,propertyDidChange:Ember.K,normalizedValue:function(){var e,t=this.path,n=this.pathRoot,n=""===t?n:(e=this.templateData,la(n,t,{data:e}));return n},renderToBuffer:function(e){var t="",t=(t=(t+=this.morph.startTag())+this.render())+this.morph.endTag();e.push(t)},render:function(){var e=this.isEscaped,t=this.normalizedValue();return null==t?t="":t instanceof Handlebars.SafeString||(t=String(t)),t=e?Handlebars.Utils.escapeExpression(t):t},rerender:function(){switch(this.state){case"preRender":case"destroyed":break;case"inBuffer":throw new Ember.Error("Something you did tried to replace an {{expression}} before it was inserted into the DOM.");case"hasElement":case"inDOM":this.updateId=Ember.run.scheduleOnce("render",this,"update")}return this},updat},transitionT}},M=Ember.View.cloneStates(Ember.View.states),(O=Ember.merge)(M._default,{rerenderIfNeeded:Ember.K}),O(M.inDOM,{rerenderIfNeede}}),Ember._HandlebarsBoundView=Ember._MetamorphView.extend({instrumentName:"boundHandlebars",states:M,shouldDisplayFunc:null,preserveContext:!1,previousContext:null,displayTemplate:null,inverseTemplate:null,path:null,pathRoot:null,normalizedValue:function(){var e,t=w(this,"path"),n=w(this,"pathRoot"),i=w(this,"valueNormalizerFunc"),n=""===t?n:(e=w(this,"templateData"),la(n,t,{data:e}));return i?i(n):n},rerenderIfNeede},render:function(e){var t=w(this,"isEscaped"),n=w(this,"shouldDisplayFunc"),i=w(this,"preserveContext"),r=w(this,"previousContext"),a=w(this,"_contextController"),o=w(this,"inverseTemplate"),s=w(this,"displayTemplate"),l=this.normalizedValue();if(n(this._lastNormalizedValue=l))if(sa(this,"template",s),i)sa(this,"_context",r);else{if(!s)return null==l?l="":l instanceof Handlebars.SafeString||(l=String(l)),t&&(l=Handlebars.Utils.escapeExpression(l)),void e.push(l);a&&(sa(a,"content",l),l=a),sa(this,"_context",l)}else o?(sa(this,"template",o),sa(this,"_context",i?r:l)):sa(this,"template",function(){return""});return this._super(e)}}),da=Ember.get,Ember.set,ua=Ember.String.fmt,pa=Ember.Handlebars.get,ha=Ember.Handlebars.normalizePath,fa=Ember.ArrayPolyfills.forEach,ma=Ember.create,E=Ember.Handlebars,va=E.helpers,E.bind=wl,E.registerHelper("_triageMustache",function(e,t){var n;return Ember.assert("You cannot pass more than one argument to the _triageMustache helper",arguments.length<=2),va[e]?va[e].call(this,t):(n=Ember.Handlebars.resolveHelper(t.data.view.container,e))?n.call(this,t):va.bind.call(this,e,t)}),Ember.Handlebars.resolveHelper=function(e,t){var n,i;if(e&&-1!==t.indexOf("-"))return(n=e.lookup("helper:"+t))||(i=e.lookup("component-lookup:main"),Ember.assert("Could not find 'component-lookup:main' on the provided container, which is necessary for performing component lookups",i),(i=i.lookupFactory(t,e))&&(n=E.makeViewHelper(i),e.register("helper:"+t,n))),n},E.registerHelper("bind",function(e,t){Ember.assert("You cannot pass more than one argument to the bind helper",arguments.length<=2);var n,i,r,a,o,s,l,c,d,u=t.contexts&&t.contexts.length?t.contexts[0]:this;if(t.fn)return wl.call(u,e,t,!1,yl);u=u,n=e,s=(i=t).data,l=s.view,c=ha(u,n,s),(d=c.root)&&"object"==typeof d?(s.insideGroup?(},a=bl(u,n,i),s.buffer.push(a)):(((o=new Ember._SimpleHandlebarsView(n,u,!i.hash.unescaped,i.data))._parentView=l).appendChild(o),}),""!==c.path&&l.registerObserver(c.root,c.path,r)):(a=bl(u,n,i),s.buffer.push(a))}),E.registerHelper("boundIf",function(e,t){var n=t.contexts&&t.contexts.length?t.contexts[0]:this;return wl.call(n,e,t,!0,El,El,["isTruthy","length"])}),E.registerHelper("unboundIf",function(e,t){var n=t.contexts&&t.contexts.length?t.contexts[0]:this,i=t.data,r=t.fn,a=t.inverse;ha(n,e,i);(r=El(pa(n,e,t))?r:a)(n,{data:i})}),E.registerHelper("with",function(e,t){var n,i,r,a,o;return 4===arguments.length?(Ember.assert("If you pass more than one argument to the with helper, it must be in the form #with foo as bar","as"===arguments[1]),t=arguments[3],n=arguments[2],r=e,Ember.assert("You must pass a block to the with helper",t.fn&&t.fn!==Handlebars.VM.noop),(i=ma(t)).data=ma(t.data),i.data.keywords=ma(t.data.keywords||{}),a=Ember.isGlobalPath(r)?r:(r=(a=ha(this,r,t.data)).path,a=a.root,o=Ember.$.expando+Ember.guidFor(a),i.data.keywords[o]=a,r?o+"."+r:o),Ember.bind(i.data.keywords,n,a),wl.call(this,r,i,!0,yl)):(Ember.assert("You must pass exactly one argument to the with helper",2===arguments.length),Ember.assert("You must pass a block to the with helper",t.fn&&t.fn!==Handlebars.VM.noop),va.bind.call(t.contexts[0],e,t))}),E.registerHelper("if",function(e,t){return Ember.assert("You must pass exactly one argument to the if helper",2===arguments.length),Ember.assert("You must pass a block to the if helper",t.fn&&t.fn!==Handlebars.VM.noop),(t.data.isUnbound?va.unboundIf:va.boundIf).call(t.contexts[0],e,t)}),E.registerHelper("unless",function(e,t){Ember.assert("You must pass exactly one argument to the unless helper",2===arguments.length),Ember.assert("You must pass a block to the unless helper",t.fn&&t.fn!==Handlebars.VM.noop);var n=t.fn,i=t.inverse;return t.fn=i,t.inverse=n,(t.data.isUnbound?va.unboundIf:va.boundIf).call(t.contexts[0],e,t)}),E.registerHelper("bind-attr",function(a){var o=a.hash,s=(Ember.assert("You must specify at least one hash argument to bind-attr",!!Ember.keys(o).length),a.data.view),l=[],c=this,d=++Ember.uuid,e=o.class,e=(null!=e&&(e=E.bindClasses(this,e,s,d,a),l.push('class="'+Handlebars.Utils.escapeExpression(e.join(" "))+'"'),delete o.class),Ember.keys(o));return fa.call(e,function(n){var i,r=o[n],e=(Ember.assert(ua("You must provide an expression as the value of bound attribute. You specified: %@=%@",[n,r]),"string"==typeof r),i=ha(c,r,a.data),"this"===r?i.root:pa(c,r,a)),t=Ember.typeOf(e);Ember.assert(ua("Attributes must be numbers, strings or booleans, not %@",[e]),null==e||"number"===t||"string"===t||"boolean"===t),"this"===r||i.isKeyword&&""===i.path||s.registerObserver(i.root,i.path,function(){var e=pa(c,r,a),t=(Ember.assert(ua("Attributes must be numbers, strings or booleans, not %@",[e]),null==e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e),s.$("[data-bindattr-"+d+"='"+d+"']"));t&&0!==t.length?Ember.View.applyAttributeBindings(t,n,e):Ember.removeObserver(i.root,i.path,void 0)}),"string"===t||"number"===t&&!isNaN(e)?l.push(n+'="'+Handlebars.Utils.escapeExpression(e)+'"'):e&&"boolean"===t&&l.push(n+'="'+n+'"')},this),l.push("data-bindattr-"+d+'="'+d+'"'),new E.SafeString(l.join(" "))}),E.registerHelper("bindAttr",function(){return Ember.warn("The 'bindAttr' view helper is deprecated in favor of 'bind-attr'"),E.helpers["bind-attr"].apply(this,arguments)}),E.bindClasses=function(a,e,o,s,l){function c(e,t,n){var i=t.path,e="this"===i?e:""===i||pa(e,i,n);return Ember.View._classStringForValue(i,e,t.className,t.falsyClassName)}var d,u,p,h=[];return fa.call(e.split(" "),function(e){var t,n=Ember.View._parsePropertyPath(e),i=n.path,r=a;""!==i&&"this"!==i&&(e=ha(a,i,l.data),r=e.root,i=e.path),""!==i&&"this"!==i&&o.registerObserver(r,i,function(){d=c(a,n,l),(p=s?o.$("[data-bindattr-"+s+"='"+s+"']"):o.$())&&0!==p.length?(t&&p.removeClass(t),t=d?(p.addClass(d),d):null):Ember.removeObserver(r,i,void 0)}),(u=c(a,n,l))&&(h.push(u),t=u)}),h},ga=Ember.get,Ember.set,ya=Ember.Handlebars,ba=/^[a-z]/,wa=/^view\./,ya.ViewHelper=Ember.Object.create({propertiesFromHTMLOptions:function(e){var t,n=e.hash,i=e.data,r={},e=n.class,a=!1;for(t in n.id&&(r.elementId=n.id,a=!0),n.tag&&(r.tagName=n.tag,a=!0),e&&(e=e.split(" "),r.classNames=e,a=!0),n.classBinding&&(r.classNameBindings=n.classBinding.split(" "),a=!0),n.classNameBindings&&(void 0===r.classNameBindings&&(r.classNameBindings=[]),r.classNameBindings=r.classNameBindings.concat(n.classNameBindings.split(" ")),a=!0),n.attributeBindings&&(Ember.assert("Setting 'attributeBindings' via Handlebars is not allowed. Please subclass Ember.View and set it there instead."),a=!(r.attributeBindings=null)),a&&(delete(n=Ember.$.extend({},n)).id,delete n.tag,delete n.class,delete n.classBinding),n)n.hasOwnProperty(t)&&Ember.IS_BINDING.test(t)&&"string"==typeof n[t]&&(s=this.contextualizeBindingPath(n[t],i))&&(n[t]=s);if(r.classNameBindings)for(var o in r.classNameBindings){var s,l=r.classNameBindings[o];"string"==typeof l&&(l=Ember.View._parsePropertyPath(l),(s=this.contextualizeBindingPath(l.path,i))&&(r.classNameBindings[o]=s+l.classNames))}return Ember.$.extend(n,r)},contextualizeBindingPath:function(e,t){return Ember.Handlebars.normalizePath(null,e,t).isKeyword?"templateData.keywords."+e:Ember.isGlobalPath(e)?null:"this"===e||""===e?"_parentView.context":"_parentView.context."+e},helper:function(e,t,n){var i,r,a,o=n.data,s=n.fn,l=e,c=n,d=c.hash,u=c.hashTypes;for(r in d)"ID"===u[r]&&(a=d[r],Ember.IS_BINDING.test(r)?Ember.warn("You're attempting to render a view by passing "+r+"="+a+" to a view helper, but this syntax is ambiguous. You should either surround "+a+" in quotes or remove `Binding` from "+r+"."):(d[r+"Binding"]=a,u[r+"Binding"]="STRING",delete d[r],delete u[r]));d.hasOwnProperty("idBinding")&&(d.id=ya.get(l,d.idBinding,c),u.id="STRING",delete d.idBinding,delete u.idBinding),"string"==typeof t?(i="STRING"===n.types[0]&&ba.test(t)&&!wa.test(t)?(Ember.assert("View requires a container",!!o.view.container),o.view.container.lookupFactory("view:"+t)):ya.get(e,t,n),Ember.assert("Unable to find view at path '"+t+"'",!!i)):i=t,Ember.assert(Ember.String.fmt("You must pass a view to the #view helper, not %@ (%@)",[t,i]),Ember.View.detect(i)||Ember.View.detectInstance(i));l=this.propertiesFromHTMLOptions(n,e),c=o.view,l.templateData=o,t=i.proto?i.proto():i;s&&(Ember.assert("You cannot provide a template block if you also specified a templateName",!ga(l,"templateName")&&!ga(t,"templateName")),l.template=s),t.controller||t.controllerBinding||l.controller||l.controllerBinding||(l._context=e),c.appendChild(i,l)}}),ya.registerHelper("view",function(e,t){return Ember.assert("The view helper only takes a single argument",arguments.length<=2),e&&e.data&&e.data.isRenderData&&(t=e,e="Ember.View"),ya.ViewHelper.helper(this,e,t)}),Ea=Ember.get,ka=Ember.Handlebars.get,xa=Ember.String.fmt,Ember.Handlebars.registerHelper("collection",function(e,t){Ember.deprecate("Using the {{collection}} helper without specifying a class has been deprecated as the {{each}} helper now supports the same functionality.","collection"!==e),e&&e.data&&e.data.isRenderData?(t=e,e=void 0,Ember.assert("You cannot pass more than one argument to the collection helper",1===arguments.length)):Ember.assert("You cannot pass more than one argument to the collection helper",2===arguments.length);var n,i,r,a,o,s,l=t.fn,c=t.data,d=t.inverse,u=(t.data.view,e?(n=(f=c.keywords.controller)&&f.container,i=ka(this,e,t)||n.lookupFactory("view:"+e),Ember.assert(xa("%@ #collection: Could not find collection class %@",[c.view,e]),!!i)):i=Ember.CollectionView,t.hash),p={},h=i.proto();for(o in u.itemView?(f=c.keywords.controller,Ember.assert('You specified an itemView, but the current context has no container to look the itemView up in. This probably means that you created a view manually, instead of through the container. Instead, use container.lookup("view:viewName"), which will properly instantiate your view.',f&&f.container),a=(n=f.container).lookupFactory("view:"+u.itemView),Ember.assert("You specified the itemView "+u.itemView+", but it was not found at "+n.describe("view:"+u.itemView)+" (and it was not registered in the container)",!!a)):a=u.itemViewClass?ka(h,u.itemViewClass,t):h.itemViewClass,Ember.assert(xa("%@ #collection: Could not find itemViewClass %@",[c.view,a]),!!a),delete u.itemViewClass,delete u.itemView,u)u.hasOwnProperty(o)&&(r=o.match(/^item(.)(.*)$/))&&"itemController"!==o&&(p[r[1].toLowerCase()+r[2]]=u[o],delete u[o]);l&&(p.template=l,delete t.fn),d&&d!==Ember.Handlebars.VM.noop?s=(s=Ea(h,"emptyViewClass")).extend({template:d,tagName:p.tagName}):u.emptyViewClass&&(s=ka(this,u.emptyViewClass,t)),s&&(u.emptyView=s),u.keyword||(p._context=Ember.computed.alias("content"));var f=Ember.Handlebars.ViewHelper.propertiesFromHTMLOptions({data:c,hash:p},this);return u.itemViewClass=a.extend(f),Ember.Handlebars.helpers.view.call(this,i,t)}),Ca=Ember.Handlebars.get,Ember.Handlebars.registerHelper("unbound",function(e,t){var n,i=arguments[arguments.length-1];return 2<arguments.length?(i.data.isUnbound=!0,n=(Ember.Handlebars.helpers[e]||Ember.Handlebars.helpers.helperMissing).apply(this,Array.prototype.slice.call(arguments,1)),delete i.data.isUnbound,n):(i=t.contexts&&t.contexts.length?t.contexts[0]:this,Ca(i,e,t))}),Ember.get,_a=Ember.Handlebars.get,Ta=Ember.Handlebars.normalizePath,Ember.Handlebars.registerHelper("log",function(e,t){var n=t.contexts&&t.contexts.length?t.contexts[0]:this,n=Ta(n,e,t.data),e=n.root,n=n.path,e="this"===n?e:_a(e,n,t);Ember.Logger.log(e)}),Ember.Handlebars.registerHelper("debugger}),k=Ember.get,Sa=Ember.set,Aa=Ember.String.fmt,Ember.Handlebars.EachView=Ember.CollectionView.extend(Ember._Metamorph,{init:function(){var e,t=k(this,"itemController");return t?(e=k(this,"controller.container").lookupFactory("controller:array").create({parentController:k(this,"controller"),itemController:t,target:k(this,"controller"),_eachView:this}),this.disableContentObservers(function(){Sa(this,"content",e),new Ember.Binding("content","_eachView.dataSource").oneWay().connect(e)}),Sa(this,"_arrayController",e)):this.disableContentObservers(function(){new Ember.Binding("content","dataSource").oneWay().connect(this)}),this._super()},_assertArrayLike:function(e){Ember.assert(Aa("The value that #each loops over must be an Array. You passed %@, but it should have been an ArrayController",[e.constructor]),!Ember.ControllerMixin.detect(e)||e&&e.isGenerated||e instanceof Ember.ArrayController),Ember.assert(Aa("The value that #each loops over must be an Array. You passed %@",[Ember.ControllerMixin.detect(e)&&void 0!==e.get("model")?Aa("'%@' (wrapped in %@)",[e.get("model"),e]):e]),Ember.Array.detect(e))},disableContentObservers:function(e){Ember.removeBeforeObserver(this,"content",null,"_contentWillChange"),Ember.removeObserver(this,"content",null,"_contentDidChange"),e.call(this),Ember.addBeforeObserver(this,"content",null,"_contentWillChange"),Ember.addObserver(this,"content",null,"_contentDidChange")},itemViewClass:Ember._MetamorphView,emptyViewClass:Ember._MetamorphView,createChildView:function(e,t){e=this._super(e,t);var n,t=k(this,"keyword"),i=k(e,"content");return t&&(n=k(e,"templateData"),(n=Ember.copy(n)).keywords=e.cloneKeywords(),Sa(e,"templateData",n),n.keywords[t]=i),i&&k(i,"isController")&&Sa(e,"controller",i),e},destroy:function(){var e;if(this._super())return(e=k(this,"_arrayController"))&&e.destroy(),this}}),(Ember.Handlebars.GroupedEach=function(e,t,n){var i=this,r=Ember.Handlebars.normalizePath(e,t,n.data);this.context=e,this.path=t,this.options=n,this.template=n.fn,this.containingView=n.data.view,this.normalizedRoot=r.root,this.normalizedPath=r.path,this.content=this.lookupContent(),this.addContentObservers(),this.addArrayObservers(),this.containingView.on("willClearRender",function(){i.destroy()})}).prototype={contentWillChange:function(){this.removeArrayObservers()},contentDidChang},contentArrayWillChange:Ember.K,contentArrayDidChang},lookupConten},addArrayObservers:function(){this.content&&this.content.addArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},removeArrayObservers:function(){this.content&&this.content.removeArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},addContentObservers:function(){Ember.addBeforeObserver(this.normalizedRoot,this.normalizedPath,this,this.contentWillChange),Ember.addObserver(this.normalizedRoot,this.normalizedPath,this,this.contentDidChange)},removeContentObservers:function(){Ember.removeBeforeObserver(this.normalizedRoot,this.normalizedPath,this.contentWillChange),Ember.removeObserver(this.normalizedRoot,this.normalizedPath,this.contentDidChange)},render:function(){if(this.content){var e=this.content,t=k(e,"length"),n=this.options.data,i=this.template;n.insideEach=!0;for(var r=0;r<t;r++)i(e.objectAt(r),{data:n})}},rerenderContainingView:function(){var e=this;Ember.run.scheduleOnce("render",thi})},destro}},Ember.Handlebars.registerHelper("each",function(e,t){var n;if(4===arguments.length&&(Ember.assert("If you pass more than one argument to the each helper, it must be in the form #each foo in bar","in"===arguments[1]),n=arguments[0],t=arguments[3],""===(e=arguments[2])&&(e="this"),t.hash.keyword=n),1===arguments.length&&(t=e,e="this"),t.hash.dataSourceBinding=e,!t.data.insideGroup||t.hash.groupedRows||t.hash.itemViewClass)return Ember.Handlebars.helpers.collection.call(this,"Ember.Handlebars.EachView",t);new Ember.Handlebars.GroupedEach(this,e,t).render()}),Ember.Handlebars.registerHelper("template",function(e,t){return Ember.deprecate("The `template` helper has been deprecated in favor of the `partial` helper. Please use `partial` instead, which will work the same way."),Ember.Handlebars.helpers.partial.apply(this,arguments)}),Ember.Handlebars.registerHelper("partial",function(n,e){var t=e.contexts&&e.contexts.length?e.contexts[0]:this;if("ID"===e.types[0])return e.fn=function(e,t){xl(e,Ember.Handlebars.get(e,n,t),t)},Ember.Handlebars.bind.call(t,n,e,!0,kl);xl(t,n,e)});var Cl=Ember.get,_l=(Ember.set,Ember.Handlebars.registerHelper("yield",function(e){for(var t=e.data.view;t&&!Cl(t,"layout");)t=t._contextView||Cl(t,"parentView");Ember.assert("You called yield in a template that was not a layout",!!t),t._yield(this,e)}),Ember.Handlebars.registerHelper("loc",function(e){return Ember.String.loc(e)}),Ember.set);function Tl(e,t,n){var i=Pa(t,e),r=Pa(t,"onEvent"),a=Pa(t,"value");(r===e||"keyPress"===r&&"key-press"===e)&&t.sendAction("action",a),t.sendAction(e,a),!i&&r!==e||Pa(t,"bubbles")||n.stopPropagation()}Ember.get,Ember.Checkbox=Ember.View.extend({classNames:["ember-checkbox"],tagName:"input",attributeBindings:["type","checked","indeterminate","disabled","tabindex","name"],type:"checkbox",checked:!1,disabled:!1,indeterminate:!1,init:function(){this._super(),this.on("change",this,this._updateElementValue)},didInsertElement:function(){this._super(),this.get("element").indeterminate=!!this.get("indeterminate")},_updateElementValue:function(){_l(this,"checked",this.$().prop("checked"))}}),Pa=Ember.get,Ia=Ember.set,Ember.TextSupport=Ember.Mixin.create({value:"",attributeBindings:["placeholder","disabled","maxlength","tabindex","readonly"],placeholder:null,disabled:!1,maxlength:null,init:function(){this._super(),this.on("focusOut",this,this._elementValueDidChange),this.on("change",this,this._elementValueDidChange),this.on("paste",this,this._elementValueDidChange),this.on("cut",this,this._elementValueDidChange),this.on("input",this,this._elementValueDidChange),this.on("keyUp",this,this.interpretKeyEvents)},action:null,onEvent:"enter",bubbles:!1,interpretKeyEvents:function(e){var t=Ember.TextSupport.KEY_EVENTS[e.keyCode];if(this._elementValueDidChange(),t)return this[t](e)},_elementValueDidChange:function(){Ia(this,"value",this.$().val())},insertNewlin},cancel:function(e){Tl("escape-press",this,e)},focusIn:function(e){Tl("focus-in",this,e)},focusOut:function(e){Tl("focus-out",this,e)},keyPres}}),Ember.TextSupport.KEY_EVENTS={13:"insertNewline",27:"cancel"},Ember.get,Ember.set,Ember.TextField=Ember.Component.extend(Ember.TextSupport,{classNames:["ember-text-field"],tagName:"input",attributeBindings:["type","value","size","pattern","name","min","max"],value:"",type:"text",size:null,pattern:null,min:null,max:null});var Sl=Ember.get,Al=(Ember.set,Ember.TextArea=Ember.Component.extend(Ember.TextSupport,{classNames:["ember-text-area"],tagName:"textarea",attributeBindings:["rows","cols","name"],rows:null,cols:null,_updateElementValue:Ember.observer("value",function(){var e=Sl(this,"value"),t=this.$();t&&e!==t.val()&&t.val(e)}),init:function(){this._super(),this.on("didInsertElement",this,this._updateElementValue)}}),Ember.set),N=Ember.get,Pl=Ember.EnumerableUtils.indexOf,Il=Ember.EnumerableUtils.indexesOf,Ll=Ember.EnumerableUtils.forEach,Dl=Ember.EnumerableUtils.replace,Ol=Ember.isArray;function Ml(){Ember.Handlebars.bootstrap(Ember.$(document)}function Rl(e){this.parent=e,this.matches=[]}function Vl(e,t,n){Ember.assert("You must use `this.resource` to nest","function"!=typeof n),"string"!=typeof(n=n||{}).path&&(n.path="/"+t),e.parent&&"application"!==e.parent&&(t=e.parent+"."+t),e.push(n.path,t,null,n.queryParams)}function jl(e,i){var r=e.controllerName||e.routeName,e=e.controllerFor(r,!0);e&&e.queryParams&&Va(e.queryParams,function(e){var t=e.split(":"),n=1<t.length?t[1]:"application"!==r?r+"["+e+"]":e,e=r+":"+e;i.queryParams[e]=n,i.translations[t[0]]=e})}function Hl(e,t,n){for(var i=t.state.handlerInfos,r=!1,a=i.length-1;0<=a;--a){var o=i[a].handler;if(r){if(!0!==n(o,i[a+1].handler))return!1}else e===o&&(r=!0)}return!0}function ql(e,t,n){var i,r=e.router,t=t.routeName.split(".").pop(),e="application"===e.routeName?"":e.routeName+".";return Ember.FEATURES.isEnabled("ember-routing-named-substates")&&zl(r,i=e+t+"_"+n)||zl(r,i=e+n)?i:void 0}function zl(e,t){var n=e.container;return e.hasRoute(t)&&(n.has("template:"+t)||n.has("route:"+t))}function Fl(e,t,n){var i=n.shift();if(!e){if(t)return;throw new Ember.Error("Can't trigger action '"+i+"' because your app hasn't finished transitioning into its first route. To trigger an action on destination routes during a transition, you can call `.send()` on the `Transition` object passed to the `model/beforeModel/afterModel` hooks.")}for(var r=!1,a=e.length-1;0<=a;a--){var o=e[a].handler;if(o._actions&&o._actions[i]){if(!0!==o._actions[i].apply(o,n))return;r=!0}}if(Ha[i])Ha[i].apply(null,n);else if(!r&&!t)throw new Ember.Error("Nothing handled the action '"+i+"'. If you did handle the action, this error can be caused by returning true from an action handler in a controller, causing the action to bubble.")}function Bl(e){var t,n=e.container.lookup("controller:application");n&&(e=e.router.currentHandlerInfos,t=Ember.Router._routePath(e),"currentPath"in n||Na(n,"currentPath"),Oa(n,"currentPath",t),"currentRouteName"in n||Na(n,"currentRouteName"),Oa(n,"currentRouteName",e[e.length-1].name))}function Ul(e){var t,e=function(e){var t=e.router.router.state.handlerInfos;if(t)for(var n,i,r=0,a=t.length;r<a;r++){if((i=t[r].handler)===e)return n;n=i}}(e);if(e)return(t=e.lastRenderedTemplate)?t:Ul(e)}function Wl(e,t,n,i){var r,a=e.name,o=e.incoming,s=e.incomingNames,l=s.length;if(i=i||[],!(n=n||{}).hasOwnProperty(a)){for(i.push(a),n[a]=!0,r=0;r<l;r++)Wl(o[s[r]],t,n,i);t(e,i),i.pop()}function Yl(e){this._container=e}function Gl(n,e){var i=mo[e].method,r=mo[e].meta;return function(){var e=fo.call(arguments),t=Ember.Test.lastPromise;return e.unshift(n),r.wait?(t?Kl(function(){t=Ember.Test.resolve(t).the})}):t=i.apply(n,e),t):i.apply(n,e)}}function Kl(e){Ember.run.currentRunLoop?e():Ember.run(e}function Xl(e,t,n){e=Jl(e,t,n);if(0===e.length)throw new Ember.Error("Element "+t+" not found.");return e}function Jl(e,t,n){return n=n||bo(e,"rootElement"),e.$(t,n)}function Zl(n,i){return S.promise(function(e){1==++wo&&S.adapter.asyncStart();var t=setInterval(function(){n.__container__.lookup("router:main").router.isLoading||S.pendingAjaxRequests||Ember.run.hasScheduledTimers()||Ember.run.currentRunLoop||S.waiters&&S.waiters.any(function(e){var t=e[0];return!e[1].call(t)})||(clearInterval(t),0==--wo&&S.adapter.asyncEnd(),Ember.run(null,e,i))},10)})}function ec(e){retur}}function tc(e){var t=" has been moved into a plugin: https://github.com/emberjs/ember-states";return{extend:ec(e+t),create:ec(e+t)}}Ember.Handlebars.compile,Ember.SelectOption=Ember.View.extend({tagName:"option",attributeBindings:["value","selected"],defaultTemplate:function(e,t){t={data:t.data,hash:{}},Ember.Handlebars.helpers.bind.call(e,"view.label",t)},ini},selected:Ember.computed(function(){var e=N(this,"content"),t=N(this,"parentView.selection");return N(this,"parentView.multiple")?t&&-1<Pl(t,e.valueOf()):e==t}).property("content","parentView.selection"),labelPathDidChange:Ember.observer("parentView.optionLabelPath",function(){var e=N(this,"parentView.optionLabelPath");e&&Ember.defineProperty(this,"label",Ember.computed(function(){return N(this,e)}).property(e))}),valuePathDidChange:Ember.observer("parentView.optionValuePath",function(){var e=N(this,"parentView.optionValuePath");e&&Ember.defineProperty(this,"value",Ember.compute}).property(e))})}),Ember.SelectOptgroup=Ember.CollectionView.extend({tagName:"optgroup",attributeBindings:["label"],selectionBinding:"parentView.selection",multipleBinding:"parentView.multiple",optionLabelPathBinding:"parentView.optionLabelPath",optionValuePathBinding:"parentView.optionValuePath",itemViewClassBinding:"parentView.optionView"}),Ember.Select=Ember.View.extend({tagName:"select",classNames:["ember-select"],defaultTemplate:Ember.Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,Ember.Handlebars.helpers);var a,o=this.escapeExpression,s=this;function l(e,t){t.buffer.push(o(n.view.call(e,"view.groupView",{hash:{content:"content",label:"label"},hashTypes:{content:"ID",label:"ID"},hashContexts:{content:e,label:e},contexts:[e],types:["ID"],data:t})))}function c(e,t){t.buffer.push(o(n.view.call(e,"view.optionView",{hash:{content:""},hashTypes:{content:"ID"},hashContexts:{content:e},contexts:[e],types:["ID"],data:t})))}return!(a=n.if.call(t,"view.prompt",{hash:{},hashTypes:{},hashContexts:{},inverse:s.noop,fn:s.program(1,function(e,t){return t.buffer.push('<option value="">'),!(e=n._triageMustache.call(e,"view.prompt",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}))&&0!==e||t.buffer.push(e),t.buffer.push("</option>"),""},r=r||{}),contexts:[t],types:["ID"],data:r}))&&0!==a||r.buffer.push(a),!(a=n.if.call(t,"view.optionGroupPath",{hash:{},hashTypes:{},hashContexts:{},inverse:s.program(6,function(e,t){(e=n.each.call(e,"view.content",{hash:{},hashTypes:{},hashContexts:{},inverse:s.noop,fn:s.program(7,c,t),contexts:[e],types:["ID"],data:t}))||0===e?t.buffer.push(e):t.buffer.push("")},r),fn:s.program(3,function(e,t){(e=n.each.call(e,"view.groupedContent",{hash:{},hashTypes:{},hashContexts:{},inverse:s.noop,fn:s.program(4,l,t),contexts:[e],types:["ID"],data:t}))||0===e?t.buffer.push(e):t.buffer.push("")},r),contexts:[t],types:["ID"],data:r}))&&0!==a||r.buffer.push(a),""}),attributeBindings:["multiple","disabled","tabindex","name"],multiple:!1,disabled:!1,content:null,selection:null,value:Ember.computed(function(e,t){var n;return 2===arguments.length?t:(n=N(this,"optionValuePath").replace(/^content\.?/,""),N(this,n?"selection."+n:"selection"))}).property("selection"),prompt:null,optionLabelPath:"content",optionValuePath:"content",optionGroupPath:null,groupView:Ember.SelectOptgroup,groupedContent:Ember.computed(function(){var n=N(this,"optionGroupPath"),i=Ember.A(),e=N(this,"content")||[];return Ll(e,function(e){var t=N(e,n);N(i,"lastObject.label")!==t&&i.pushObject({label:t,content:Ember.A()}),N(i,"lastObject.content").push(e)}),i}).property("optionGroupPath","content.@each"),optionView:Ember.SelectOption,_change:function(){N(this,"multiple")?this._changeMultiple():this._changeSingle()},selectionDidChange:Ember.observer("selection.@each",function(){var e=N(this,"selection");N(this,"multiple")?Ol(e)?this._selectionDidChangeMultiple():Al(this,"selection",Ember.A([e])):this._selectionDidChangeSingle()}),valueDidChange:Ember.observer("value",function(){var e=N(this,"content"),t=N(this,"value"),n=N(this,"optionValuePath").replace(/^content\.?/,""),i=N(this,n?"selection."+n:"selection");t!==i&&(i=e?e.find(function(e){return t===(n?N(e,n):e)}):null,this.set("selection",i))}),_triggerChange:function(){var e=N(this,"selection"),t=N(this,"value");Ember.isNone(e)||this.selectionDidChange(),Ember.isNone(t)||this.valueDidChange(),this._change()},_changeSingle:function(){var e=this.$()[0].selectedIndex,t=N(this,"content"),n=N(this,"prompt");t&&N(t,"length")&&(n&&0===e?Al(this,"selection",null):(n&&--e,Al(this,"selection",t.objectAt(e))))},_changeMultiple:function(){var e=this.$("option:selected"),t=N(this,"prompt")?1:0,n=N(this,"content"),i=N(this,"selection");n&&e&&(e=e.ma}).toArray(),n=n.objectsAt(e),Ol(i)?Dl(i,0,N(i,"length"),n):Al(this,"selection",n))},_selectionDidChangeSingle:function(){var e,t,n=this.get("element");n&&(t=N(this,"content"),e=N(this,"selection"),t=t?Pl(t,e):-1,N(this,"prompt")&&(t+=1),n&&(n.selectedIndex=t))},_selectionDidChangeMultiple:function(){var e,t=N(this,"content"),n=N(this,"selection"),i=t?Il(t,n):[-1],r=N(this,"prompt")?1:0,t=this.$("option");t&&t.each(function(){e=-1<this.index?this.index-r:-1,this.selected=-1<Pl(i,e)})},init:function(){this._super(),this.on("didInsertElement",this,this._triggerChange),this.on("change",this,this._change)}}),Ember.Handlebars.registerHelper("input",function(e){Ember.assert("You can only pass attributes to the `input` helper, not arguments",arguments.length<2);var t=e.hash,n=(e.hashTypes,t.type),i=t.on;return delete t.type,delete t.on,"checkbox"===n?Ember.Handlebars.helpers.view.call(this,Ember.Checkbox,e):(n&&(t.type=n),t.onEvent=i||"enter",Ember.Handlebars.helpers.view.call(this,Ember.TextField,e))}),Ember.Handlebars.registerHelper("textarea",function(e){Ember.assert("You can only pass attributes to the `textarea` helper, not arguments",arguments.length<2);e.hash,e.hashTypes;return Ember.Handlebars.helpers.view.call(this,Ember.TextArea,e)}),Ember.ComponentLookup=Ember.Object.extend({lookupFactory:function(e,t){var n="component:"+e,e="template:components/"+e,i=(t=t||this.container)&&t.has(e),e=(i&&t.injection(n,"layout",e),t.lookupFactory(n));if(i||e)return e||(t.register(n,Ember.Component),e=t.lookupFactory(n)),e}}),Ember.Handlebars.bootstrap=function(e){Ember.$('script[type="text/x-handlebars"], script[type="text/x-raw-handlebars"]',e).each(function(){var e=Ember.$(this),t="text/x-raw-handlebars"===e.attr("type")?Ember.$.proxy(Handlebars.compile,Handlebars):Ember.$.proxy(Ember.Handlebars.compile,Ember.Handlebars),n=e.attr("data-template-name")||e.attr("id")||"application",t=t(e.html());if(void 0!==Ember.TEMPLATES[n])throw new Ember.Error('Template named "'+n+'" already exists.');Ember.TEMPLATES[n]=t,e.remove()})},Ember.onLoad("Ember.Application",function(e){e.initializer({name:"domTemplates",initialize:Ml}),e.initializer({name:"registerComponentLookup",after:"domTemplates",initialize:Nl})}),Ember.runLoadHooks("Ember.Handlebars",Ember.Handlebars),e("route-recognizer",["exports"],function(e){"use strict";var t=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g");function v(e){this.string=e}function g(e){this.name=}function b()}v.prototype={eachChar:function(e){for(var t=this.string,n=0,i=t.length;n<i;n++)e({validChars:t.charAt(n)})},rege},generate:function(){return this.string}},g.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){return e[this.name]}},y.prototype={eachCha},regex:function(){return"(.+)"},generat}},b.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},n.prototype={get:function(e){for(var t=this.nextStates,n=0,i=t.length;n<i;n++){var r=t[n];if(r.charSpec.validChars===e.validChars&&r.charSpec.invalidChars===e.invalidChars)return r}},pu},match:function(e){for(var t,n,i,r=this.nextStates,a=[],o=0,s=r.length;o<s;o++)void 0!==(i=(n=(t=r[o]).charSpec).validChars)?-1!==i.indexOf(e)&&a.push(t):void 0!==(i=n.invalidChars)&&-1===i.indexOf(e)&&a.push(t);return a}};var i=Object.create}w.prototype=i({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null}prototype={add:function(e,t){for(var n=this.rootState,i="^",r={statics:0,dynamics:0,stars:0},a=[],o=[],s=!0,l=0,c=e.length;l<c;l++){for(var d=e[l],u=[],p=function(e,t,n){for(var i=(e="/"===e.charAt(0)?e.substr(1):e).split("/"),r=[],a=0,o=i.length;a<o;a++){var s,l=i[a];(s=l.match(/^:([^\/]+)$/))?(r.push(new g(s[1])),t.push(s[1]),n.dynamics++):(s=l.match(/^\*([^\/]+)$/))?(r.push(new y(s[1])),t.push(s[1]),n.stars++):""===l?r.push(new b):(r.push(new v(l)),n.statics++)}return r}(d.path,u,r),o=o.concat(p),h=0,f=p.length;h<f;h++){var m=p[h];m instanceof b||(s=!1,i+="/",n=function(t,e){return e.eachCha}),t}(n=n.put({validChars:"/"}),m),i+=m.regex())}d={handler:d.handler,names:u};a.push(d)}s&&(n=n.put({validChars:"/"}),i+="/"),n.handlers=a,n.regex=new RegExp(i+"$"),n.types=r,(t=t&&t.as)&&(this.names[t]={segments:o,handlers:a})},handlersFo},hasRout},generate:function(e,t){var n=this.names[e],i="";if(!n)throw new Error("There is no route named "+e);for(var r=n.segments,a=0,o=r.length;a<o;a++){var s=r[a];s instanceof b||(i=(i+="/")+s.generate(t))}return"/"!==i.charAt(0)&&(i="/"+i),t&&t.queryParams&&(i+=this.generateQueryString(t.queryParams,n.handlers)),i},generateQueryString:function(e,t){var n,i=[];for(n in e)if(e.hasOwnProperty(n)){var r=e[n];if(!1!==r&&null!=r){var a=n;if(Array.isArray(r))for(var o=0,s=r.length;o<s;o++){var l=n+"[]="+encodeURIComponent(r[o]);i.push(l)}else!0!==r&&(a+="="+encodeURIComponent(r)),i.push(a)}}return 0===i.length?"":"?"+i.join("&")},parseQueryString:function(e){for(var t=e.split("&"),n={},i=0;i<t.length;i++){var r=t[i].split("="),a=decodeURIComponent(r[0]),o=a.length,s=!1,o=1===r.length||(2<o&&"[]"===a.slice(o-2)&&(s=!0,n[a=a.slice(0,o-2)]||(n[a]=[])),r[1]?decodeURIComponent(r[1]):"");s?n[a].push(o):n[a]=o}return n},recognize:function(e){var t=[this.rootState],n={},i=!1,r=e.indexOf("?");for(-1!==r&&(l=e.substr(r+1,e.length),e=e.substr(0,r),n=this.parseQueryString(l)),1<(r=(e="/"!==e.charAt(0)?"/"+e:e).length)&&"/"===e.charAt(r-1)&&(e=e.substr(0,r-1),i=!0),o=0,s=e.length;o<s&&(t=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++)var a=e[i],n=n.concat(a.match(t));return n}(t,e.charAt(o))).length;o++);for(var a=[],o=0,s=t.length;o<s;o++)t[o].handlers&&a.push(t[o]);var t=a.sort(function(e,t){return e.types.stars!==t.types.stars?e.types.stars-t.types.stars:e.types.dynamics!==t.types.dynamics?e.types.dynamics-t.types.dynamics:e.types.statics!==t.types.statics?t.types.statics-e.types.statics:0}),l=a[0];if(l&&l.handlers){i&&"(.+)$"===l.regex.source.slice(-5)&&(e+="/");for(var r=e,i=n,c=(n=l).handlers,n=n.regex,d=r.match(n),u=1,p=new w(i),h=0,f=c.length;h<f;h++){for(var m=c[h],v=m.names,g={},y=0,b=v.length;y<b;y++)g[v[y]]=d[u++];p.push({handler:m.handler,params:g,isDynamic:!!v.length})}return p}}},e.default=r,o.prototype={t}},a.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,t,n,i){var r=new a(t),e=s(e,this.children[e]=r,i);i&&i.contextEntered&&i.contextEntered(t,e),n(e)}},r.prototype.map=function(e,t){var n=new a;e(s("",n,this.delegate)),function e(t,n,i,r){var a,o=n.routes;for(a in o)if(o.hasOwnProperty(a)){for(var s=t.slice(),l=(h=p=u=d=c=l=void 0,s),c=a,d=o[a],u=0,p=0,h=l.length;p<h;p++)u+=l[p].path.length;c=c.substr(u),l.push({path:c,handler:d}),n.children[a]?e(s,n.children[a],i,r):i.call(r,s)}}([],},this)}}),e("router/handler-info",["./utils","rsvp","exports"],function(e,t,n){"use strict";var a=e.bind,r=e.merge,i=e.oCreate,o=e.serialize,s=t.resolve;function l(e){e&&r(this,e)}function c(e){l.call(this,e)}function d(e){l.call(this,e),this.params=this.params||{}}function u(e){l.call(this,e)}(c.prototype=i(l.prototype={name:null,handler:null,params:null,context:null,lo},resolve:function(e,t,n){var t=a(this.checkForAbort,this,t),i=a(this.runBeforeModelHook,this,e,n),r=a(this.getModel,this,e,n),e=a(this.runAfterModelHook,this,e,n),n=a(this.becomeResolved,this,n);return s().then(t).then(i).then(t).then(r).then(t).then(e).then(t).then(n)},runBeforeModelHook:function(e,t){return t.trigger&&t.trigger(!0,"willResolveModel",t,this.handler),this.runSharedModelHook(e,t,"beforeModel",[])},runAfterModelHook:function(e,t,n){var i=this.name;return this.stashResolvedModel(t,n),this.runSharedModelHook(e,t,"afterModel",[n]).the})},runSharedModelHook:function(e,t,n,i){this.log(t,"calling "+n+" hook"),this.queryParams&&i.push(this.queryParams),i.push(t);var r=this.handler;return })},getMode},checkForAbort:function(e,t){return s(e()).then(function(){return t})},stashResolvedMode},becomeResolved:function(e,t){var n=this.params||o(this.handler,t,this.names);return e&&(this.stashResolvedModel(e,t),e.params=e.params||{},e.params[this.name]=n),new c({context:t,name:this.name,handler:this.handler,params:n})},shouldSupercede:function(e){var t;return!e||(t=e.context===this.context,e.name!==this.name||this.hasOwnProperty("context")&&!t||this.hasOwnProperty("params")&&!function(e,t){if(!e^!t)return;if(e)for(var n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return;return 1}(this.params,e.params))}})).resolve=function(e,t,n){return n&&n.resolvedModels&&(n.resolvedModels[this.name]=this.context),s(this)},(d.prototype=i(l.prototype)).getModel=function(e,t){var n=this.params,i=(t&&t.queryParams&&(r(n={},this.params),n.queryParams=t.queryParams),"function"==typeof this.handler.deserialize?"deserialize":"model");return this.runSharedModelHook(e,t,i,[n])},(u.prototype=i(l.prototype)).getModel=function(e,t){return this.log(t,this.name+": resolving provided model"),s(this.context)},n.HandlerInfo=l,n.ResolvedHandlerInfo=c,n.UnresolvedHandlerInfoByParam=d,n.UnresolvedHandlerInfoByObject=u}),e("router/router",["route-recognizer","rsvp","./utils","./transition-state","./transition","./transition-intent/named-transition-intent","./transition-intent/url-transition-intent","exports"],function(e,t,n,i,r,a,o,s){"use strict";var l=e.default,c=(t.resolve,t.reject),d=(t.async,t.Promise),u=n.trigger,p=n.log,h=n.slice,f=n.forEach,m=n.merge,v=n.serialize,g=n.extractQueryParams,y=n.getChangelist,b=i.TransitionState,w=r.logAbort,E=r.Transition,k=r.TransitionAborted,x=a.NamedTransitionIntent,C=o.URLTransitionIntent,_=Array.prototype.po}function S(t,e,n){var i=function(e,t){var n,i,r,a,o=e.handlerInfos,s=t.handlerInfos,l={updatedContext:[],exited:[],entered:[],unchanged:[]};for(r=0,a=s.length;r<a;r++){var c=o[r],d=s[r];(n=c&&c.handler===d.handler?n:!0)?(l.entered.push(d),c&&l.exited.unshift(c)):i||c.context!==d.context?(i=!0,l.updatedContext.push(d)):l.unchanged.push(c)}for(r=s.length,a=o.length;r<a;r++)l.exited.unshift(o[r]);return l}(t.state,e),r=(f(i.exited,function(e){e=e.handler;delete e.context,e.exit&&e.exit()}),t.oldState=t.state),a=(t.state=e,t.currentHandlerInfos=i.unchanged.slice());try{f(i.updatedContext,function(e){return A(a,e,!1,n)}),f(i.entere})}catch(e){throw t.state=r,t.currentHandlerInfos=r.handlerInfos,e}t.state.queryParams=D(t,a,e.queryParams)}function A(e,t,n,i){var r=t.handler,a=t.context;if(n&&r.enter&&r.enter(i),i&&i.isAborted)throw new k;if(r.context=a,r.contextDidChange&&r.contextDidChange(),r.setup&&r.setup(a,i),i&&i.isAborted)throw new k;return e.push(t),!0}function P(e,t,n){var i=e.urlMethod;if(i){for(var e=e.router,r=t.handlerInfos,a=r[r.length-1].name,o={},s=r.length-1;0<=s;--s){var l=r[s];m(o,l.params),l.handler.inaccessibleByURL&&(i=null)}i&&(o.queryParams=t.queryParams,t=e.recognizer.generate(a,o),"replaceQuery"===i?t!==n&&e.replaceURL(t):"replace"===i?e.replaceURL(t):e.updateURL(t))}}function I(e,t,n){var i=t[0]||"/",r=t[t.length-1],a={};return r&&r.hasOwnProperty("queryParams")&&(a=_.call(t).queryParams),r=0===t.length?(p(e,"Updating query params"),r=e.state.handlerInfos,new x({name:r[r.length-1].name,contexts:[],queryParams:a})):"/"===i.charAt(0)?(p(e,"Attempting URL transition to "+i),new C({url:i})):(p(e,"Attempting transition to "+i),new x({name:t[0],contexts:h.call(t,1),queryParams:a})),e.transitionByIntent(r,n}function D(e,t,n){for(var i=[],r=(u(e,t,!0,["finalizeQueryParamChange",n,i]),{}),a=0,o=i.length;a<o;++a){var s=i[a];r[s.key]=s.value}return r}T.prototype={map:function(e){this.recognizer.delegate=this.delegate,this.recognizer.map(e,function(e,t){var n=t[t.length-1].handler;e.add.apply(e,[t,{as:n}])})},hasRout},transitionByIntent:function(t,e){var a,n=!!this.activeTransition,i=(n?this.activeTransition:this).state,o=this;try{var r,s=t.applyToState(i,this.recognizer,this.getHandler,e);return L(s.handlerInfos,i.handlerInfos)?(r=y(i.queryParams,s.queryParams))?(this._changedQueryParams=r.changed,u(this,s.handlerInfos,!0,["queryParamsDidChange",r.changed,r.all,r.removed]),this._changedQueryParams=null,!n&&this.activeTransition?this.activeTransition:(i.queryParams=D(this,s.handlerInfos,s.queryParams),(a=new E(this)).urlMethod="replace",a.promise=a.promise.the}),a)):new E(this):e?void S(this,s):(a=new E(this,t,s),this.activeTransition&&this.activeTransition.abort(),(this.activeTransition=a).promise=a.promise.then(function(r){return o.async(function(){var t=a,n=r.state;try{p(t.router,t.sequence,"Resolved all models on destination route; finalizing transition.");var e=t.router,i=n.handlerInfos;t.sequence;return(S(e,n,t),t.isAborted)?(e.state.handlerInfos=e.currentHandlerInfos,c(w(t))):(P(t,n,t.intent.url),t.isActive=!1,e.activeTransition=null,u(e,e.currentHandlerInfos,!0,["didTransition"]),e.didTransition&&e.didTransition(e.currentHandlerInfos),p(e,t.sequence,"TRANSITION COMPLETE."),i[i.length-1].handler)}catch(e){throw e instanceof k||(n=t.state.handlerInfos,t.trigger(!0,"error",e,t,n[n.length-1]),t.abort()),e}})}),n||u(this,this.state.handlerInfos,!0,["willTransition",a]),a)}catch(e){return new E(this,t,null,e)}},reset:function(){this.state&&f(this.state.handlerInfo}),this.state=new b,this.currentHandlerInfos=null},activeTransition:null,handleUR},updateUR},replaceUR},transitionT},intermediateTransitionT},refresh:function(e){for(var t=(this.activeTransition||this).state,n=t.handlerInfos,i=0,r=n.length;i<r;++i){var a=n[i];a.name,a.params||{}}p(this,"Starting a refresh transition");e=new x({name:n[n.length-1].name,pivotHandler:e||n[0].handler,contexts:[],queryParams:this._changedQueryParams||t.queryParams||{}});return this.transitionByIntent(e,!1)},replaceWit},generate:function(e){for(var t=g(h.call(arguments,1)),n=t[0],t=t[1],i=new x({name:e,contexts:n}).applyToState(this.state,this.recognizer,this.getHandler),r={},a=0,o=i.handlerInfos.length;a<o;++a){var s=i.handlerInfos[a],s=s.params||v(s.handler,s.context,s.names);m(r,s)}return r.queryParams=t,this.recognizer.generate(e,r)},isActive:function(e){var t=g(h.call(arguments,1)),n=t[0],t=t[1],i=this.state.queryParams,r=this.state.handlerInfos;if(!r.length)return!1;for(var a,o=r[r.length-1].name,s=this.recognizer.handlersFor(o),l=0,c=s.length;l<c&&r[l].name!==e;++l);return l!==s.length&&((a=new b).handlerInfos=r.slice(0,l+1),s=s.slice(0,l+1),L(new x({name:o,contexts:n}).applyToHandlers(a,s,this.getHandler,o,!0,!0).handlerInfos,a.handlerInfos)&&!y(i,t))},trigge},asyn},log:null},s.Router=T}),e("router/transition-intent",["./utils","exports"],function(e,t){"use strict";var n=e.merge;function i(e){e&&n(this,e),this.data=this.data||{}}i.prototype.applyToStat},t.TransitionIntent=i}),e("router/transition-intent/named-transition-intent",["../transition-intent","../transition-state","../handler-info","../utils","exports"],function(e,t,n,i,r){"use strict";var a=e.TransitionIntent,v=t.TransitionState,d=n.UnresolvedHandlerInfoByParam,s=n.UnresolvedHandlerInfoByObject,u=i.isParam,o=i.forEach,l=i.extractQueryParams,e=i.oCreate,g=i.merg}(c.prototype=e(a.prototype)).applyToStat},c.prototype.applyToHandlers=function(e,t,n,i,r,a){var o=new v,s=this.contexts.slice(0),l=t.length,c=[];if(this.pivotHandler)for(d=0;d<t.length;++d)if(n(t[d].handler)===this.pivotHandler){l=d;break}this.pivotHandler;for(var d=t.length-1;0<=d;--d){var u=t[d],p=u.handler,h=n(p),f=e.handlerInfos[d],m=null,h=(0<u.names.length?m=l<=d?this.createParamHandlerInfo(p,h,u.names,s,f):this.getHandlerInfoForDynamicSegment(p,h,u.names,s,f,i):(m=this.createParamHandlerInfo(p,h,u.names,s,f),c.unshift(d)),a&&(m=m.becomeResolved(null,m.context),p=f&&f.context,0<u.names.length&&m.context===p&&(m.params=f&&f.params),m.context=p),f);(l<=d||m.shouldSupercede(f))&&(l=Math.min(d,l),h=m),r&&!a&&(h=h.becomeResolved(null,h.context)),o.handlerInfos.unshift(h)}if(0<s.length)throw new Error("More context objects were passed than there are dynamic segments for the route: "+i);return r||this.invalidateNonDynamicHandlers(o.handlerInfos,c,l),g(o.queryParams,e.queryParams),g(o.queryParams,this.queryParams||{}),o},c.prototype.invalidateNonDynamicHandlers=function(n,e,i){o(e,function(e){var t;i<=e&&(t=n[e],n[e]=new d({name:t.name,handler:t.handler,params:{}}))})},c.prototype.getHandlerInfoForDynamicSegment=function(e,t,n,i,r,a){var o;n.length;return 0<i.length?(o=i[i.length-1],u(o)?this.createParamHandlerInfo(e,t,n,i,r):(i.pop(),new s({name:e,handler:t,context:o,names:n}))):(r&&r.name,r)},c.prototype.createParamHandlerInfo=function(e,t,n,i,r){for(var a={},o=n.length;o--;){var s=r&&e===r.name&&r.params||{},l=i[i.length-1],c=n[o];if(u(l))a[c]=""+i.pop();else{if(!s.hasOwnProperty(c))throw new Error("You didn't provide enough string/numeric parameters to satisfy all of the dynamic segments for route "+e);a[c]=s[c]}}return new d({name:e,handler:t,params:a})},r.NamedTransitionIntent=c}),e("router/transition-intent/url-transition-intent",["../transition-intent","../transition-state","../handler-info","../utils","exports"],function(e,t,n,i,r){"use strict";var a=e.TransitionIntent,u=t.TransitionState,p=n.UnresolvedHandlerInfoByParam,e=i.oCreate,h=i.merge;function o(e){a.call(this,e)}function f(e){this.message=e||"UnrecognizedURLError",this.name="UnrecognizedURLError"}(o.prototype=e(a.prototype)).applyToState=function(e,t,n){var i=new u,r=t.recognize(this.url);if(!r)throw new f(this.url);for(var a=!1,o=0,s=r.length;o<s;++o){var l=r[o],c=l.handler,d=n(c);if(d.inaccessibleByURL)throw new f(this.url);c=new p({name:c,handler:d,params:l.params}),d=e.handlerInfos[o];a||c.shouldSupercede(d)?(a=!0,i.handlerInfos[o]=c):i.handlerInfos[o]=d}return h(i.queryParams,r.queryParams),i},r.URLTransitionIntent=o}),e("router/transition-state",["./handler-info","./utils","rsvp","exports"],function(e,t,n,i){"use strict";e.ResolvedHandlerInfo;var c=t.forEach,d=n.resolv}r.prototype={handlerInfos:null,queryParams:null,params:null,resolve:function(e,t,n){var i=this.params,r=(c(this.handlerInfo}),(n=n||{}).resolveIndex=0,this),a=!1;return d().then(l).catch(function(e){throw{error:e,handlerWithError:r.handlerInfos[n.resolveIndex].handler,wasAborted:a,state:r}});function o(){return d(t()).catc})}function s(e){var t=(r.handlerInfos[n.resolveIndex++]=e).handler;return t&&t.redirect&&t.redirect(e.context,n),o().then(l)}function l(){return n.resolveIndex===r.handlerInfos.length?{error:null,state:r}:r.handlerInfos[n.resolveIndex].resolve(e,o,n).then(s)}}},i.TransitionState=r}),e("router/transition",["rsvp","./handler-info","./utils","exports"],function(e,t,n,i){"use strict";var l=e.reject,c=e.resolve,d=t.ResolvedHandlerInfo,r=n.trigger,a=n.slice,o=n.log;function u(e,t,n,i){var r=this;if(this.state=n||e.state,this.intent=t,this.router=e,this.data=this.intent&&this.intent.data||{},this.resolvedModels={},this.queryParams={},i)this.promise=l(i);else if(n){this.params=n.params,this.queryParams=n.queryParams;var a=n.handlerInfos.length;a&&(this.targetName=n.handlerInfos[n.handlerInfos.length-1].name);for(var o=0;o<a;++o){var s=n.handlerInfos[o];if(!(s instanceof d))break;this.pivotHandler=s.handler}this.sequence=u.currentSequence++,this.promise=n.resolve(e.async,function(){if(r.isAborted)return l()},this).catch(function(e){throw e.wasAborted?p(r):(r.trigger("error",e.error,r,e.handlerWithError),r.abort(),e.error)})}else this.promise=c(this.state),this.params={u.currentSequence=0,(u.prototype={targetName:null,urlMethod:"update",intent:null,params:null,pivotHandler:null,resolveIndex:0,handlerInfos:null,resolvedModels:null,isActive:!0,state:null,promise:null,data:null,the},abort:function(){return this.isAborted||(o(this.router,this.sequence,this.targetName+": transition was aborted"),this.isAborted=!0,this.isActive=!1,this.router.activeTransition=null),this},retr},method:function(e){return this.urlMethod=e,this},trigge},followRedirects:function(){var t=this.router;return this.promise.catch(function(e){if(t.activeTransition)return t.activeTransition.followRedirects();throw e})},toString:function(){return"Transition (sequence "+this.sequence+")"},lo}}).send=u.prototype.trigger,i.Transition=u,i.logAbort=p,i.TransitionAborted=s}),e("router/utils",["exports"],function(e){"use strict";var a=Array.prototype.slic}var t=Object.create||function(e){function t(){}return t.prototype=e,new t}e.trigger=function(e,t,n,i){if(e.triggerEvent)e.triggerEvent(t,n,i);else{var r=i.shift();if(!t){if(n)return;throw new Error("Could not trigger event '"+r+"'. There are no active handlers")}for(var a=!1,o=t.length-1;0<=o;o--){var s=t[o].handler;if(s.events&&s.events[r]){if(!0!==s.events[r].apply(s,i))return;a=!0}}if(!a&&!n)throw new Error("Nothing handled the event '"+r+"'.")}},e.log=function(e,t,n){e.log&&(3===arguments.length?e.log("Transition #"+t+": "+n):e.log(n=t))},e.oCreate=t,e.merge=o,e.extractQueryParams=function(e){var t,n=e&&e.length;return n&&0<n&&e[n-1]&&e[n-1].hasOwnProperty("queryParams")?(t=e[n-1].queryParams,[a.call(e,0,n-1),t]):[e,null]},e.bind=function(n,i){var r=arguments;retur}},e.isParam=r,e.forEach=function(e,t){for(var n=0,i=e.length;n<i&&!1!==t(e[n]);n++);},e.slice=a,e.serialize=function(e,t,n){var i={};return r(t)?(i[n[0]]=t,i):e.serialize?e.serialize(t,n):1===n.length?(e=n[0],/_id$/.test(e)?i[e]=t.id:i[e]=t,i):void 0},e.getChangelist=function(e,t){var n,i={all:{},changed:{},removed:{}},r=(o(i.all,t),!1);for(n in e)!e.hasOwnProperty(n)||t.hasOwnProperty(n)||(r=!0,i.removed[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&e[n]!==t[n]&&(i.changed[n]=t[n],r=!0);return r&&i}}),e("router",["./router/router","exports"],function(e,t){"use strict";e=e.Router;t.Router=e}),Rl.prototype={resource:function(e,t,n){var i;2===arguments.length&&"function"==typeof t&&(n=t,t={}),"string"!=typeof(t=1===arguments.length?{}:t).path&&(t.path="/"+e),n?(Vl(i=new Rl(e),"loading"),Vl(i,"error",{path:"/_unused_dummy_error_path_route_"+e+"/:error"}),n.call(i),this.push(t.path,e,i.generate(),t.queryParams)):this.push(t.path,e,null,t.queryParams),Ember.FEATURES.isEnabled("ember-routing-named-substates")&&(Vl(this,(e=e.split(".").pop())+"_loading"),Vl(this,e+"_error",{path:"/_unused_dummy_error_path_route_"+e+"/:error"}))},push:function(e,t,n,i){var r=t.split(".");""!==e&&"/"!==e&&"index"!==r[r.length-1]||(this.explicitIndex=!0),this.matches.push([e,t,n,i])},route:function(e,t){Vl(this,e,t),Ember.FEATURES.isEnabled("ember-routing-named-substates")&&(Vl(this,e+"_loading"),Vl(this,e+"_error",{path:"/_unused_dummy_error_path_route_"+e+"/:error"}))},generat}},Rl.ma},Ember.RouterDSL=Rl,La=Ember.get,Ember.controllerFo},Ember.generateControllerFactory=function(e,t,n){n=n&&Ember.isArray(n)?"array":n?"object":"basic",n=e.lookupFactory("controller:"+n).extend({isGenerated:!0,toStrin}});return e.register("controller:"+t,n),n},Ember.generateController=function(e,t,n){Ember.generateControllerFactory(e,t,n);n="controller:"+t,t=e.lookup(n);return La(t,"namespace.LOG_ACTIVE_GENERATION")&&Ember.Logger.info("generated -> "+n,{fullName:n}),t},t=s("router"),Da=t.Router,t.Transition,x=Ember.get,Oa=Ember.set,Ma=Ember.String.fmt,Na=Ember.defineProperty,Ra=Array.prototype.slice,Va=Ember.EnumerableUtils.forEach,ja=Ember._MetamorphView,Ember.Router=Ember.Object.extend(Ember.Evented,{location:"hash",init:function(){this.router=this.constructor.router||this.constructor.map(Ember.K),this._activeViews={},this._setupLocation(),x(this,"namespace.LOG_TRANSITIONS_INTERNAL")&&(this.router.log=Ember.Logger.debug)},url:Ember.compute}),startRouting:function(){this.router=this.router||this.constructor.map(Ember.K);var e=this.router,t=x(this,"location"),n=this.container,i=this;this._setupRouter(e,t),n.register("view:default",ja),n.register("view:toplevel",Ember.View.extend()),t.onUpdateURL(function(e){i.handleURL(e)}),this.handleURL(t.getURL())},didTransition:function(e){Bl(this),this._cancelLoadingEvent(),this.notifyPropertyChange("url"),Ember.run.once(this,this.trigger,"didTransition"),x(this,"namespace").LOG_TRANSITIONS&&Ember.Logger.log("Transitioned into '"+Ember.Router._routePath(e)+"'")},handleUR},transitionTo:function(){return this._doTransition("transitionTo",arguments)},intermediateTransitionTo:function(){this.router.intermediateTransitionTo.apply(this.router,arguments),Bl(this);var e=this.router.currentHandlerInfos;x(this,"namespace").LOG_TRANSITIONS&&Ember.Logger.log("Intermediate-transitioned into '"+Ember.Router._routePath(e)+"'")},replaceWit},generat},isActiv},sen},hasRoute:function(e){return this.router.hasRoute(e)},rese},_lookupActiveView:function(e){e=this._activeViews[e];return e&&e[0]},_connectActiveView:function(e,t}var i=this._activeViews[e];i&&i[0].off("willDestroyElement",this,i[1]);this._activeViews[e]=[t,n],t.one("willDestroyElement",this,n)},_setupLocation:function(){var e,t=x(this,"location"),n=x(this,"rootURL");"string"==typeof t&&this.container&&(e=this.container.lookup("location:"+t),t=Oa(this,"location",void 0!==e?e:Ember.Location.create({implementation:t}))),"string"==typeof n&&(t.rootURL=n),"function"==typeof t.initState&&t.initState()},_getHandlerFunction:function(){var i={},r=this.container,a=r.lookupFactory("route:basic"),o=this;return function(e){var t="route:"+e,n=r.lookup(t);return i[e]||(i[e]=!0,n||(r.register(t,a.extend()),n=r.lookup(t),x(o,"namespace.LOG_ACTIVE_GENERATION")&&Ember.Logger.info("generated -> "+t,{fullName:t})),n.routeName=e),n}},_setupRouter:function(e,t}var i,r,a=this;e.getHandler=this._getHandlerFunction();e.updateURL=function(e){i=e,Ember.run.once(n)},t.replaceURL&&(r=function(){t.replaceURL(i)},e.replaceUR}),e.didTransition=function(e){a.didTransition(e)}},_doTransition:function(e,t){(t=Ra.call(t))[0]=t[0]||"/";var n,i=t[0],r=!1;if(Ember.FEATURES.isEnabled("query-params-new")&&t[t.length-1].hasOwnProperty("queryParams")&&(1===t.length&&(r=!0),n=t[t.length-1].queryParams),r||"/"===i.charAt(0)||(a=this.router.hasRoute(i)?i:t[0]=i+".index",Ember.assert("The route "+i+" was not found",this.router.hasRoute(a))),n){a||(a=(r=(this.router.activeTransition||this.router).state.handlerInfos)[r.length-1].name,t.unshift(a));var a,o,s,l=this._queryParamNamesFor(a);for(o in Ember.Router._translateQueryParams(n,l.translations,a),n)o in l.queryParams&&(s=n[o],delete n[o],n[l.queryParams[o]]=s)}i=this.router[e].apply(this.router,t);return i.then(null,function(e){"UnrecognizedURLError"===e.name&&Ember.assert("The URL '"+e.message+"' did not match any routes in your application")},"Ember: Check for Router unrecognized URL error"),i},_scheduleLoadingEven},_fireLoadingEvent:function(e,t){this.router.activeTransition&&e.trigger(!0,"loading",e,t)},_cancelLoadingEven},_queryParamNamesFor:function(e){e=this.router.hasRoute(e)?e:e+".index";var e=this.router.recognizer.handlersFor(e),t={queryParams:Ember.create(null),translations:Ember.create(null)},n=this.router;return Va(}),t},_queryParamNamesForSingle:function(e){var t={queryParams:Ember.create(null),translations:Ember.create(null)};return jl(this.router.getHandler(e),t),t},_queryParamOverrides:function(e,t,n){for(var i in t){var r=i.split(":"),a=this.container.lookup("controller:"+r[0]);Ember.assert(Ma("Could not lookup controller '%@' while setting up query params",[a]),a),e[t[i]]=x(a,r[1]),n&&n(i,t[i],i)}}}),Ha={willResolveMode},error:function(n,e,t){var i=t.router;Hl(t,e,function(e,t){e=ql(e,t,"error");if(!e)return!0;i.intermediateTransitionTo(e,n)})&&(zl(t.router,"application_error")?i.intermediateTransitionTo("application_error",n):Ember.Logger.error("Error while loading route: "+n.stack))},loading:function(n,e){var i=e.router;Hl(e,n,function(e,t){t=ql(e,t,"loading");if(!t)return n.pivotHandler!==e||void 0;i.intermediateTransitionTo(t)})&&zl(e.router,"application_loading")&&i.intermediateTransitionTo("application_loading")}},Ember.Router.reopenClass({router:null,map:function(t){var n=this.router,e=(n||((n=new Da).callbacks=[],n.triggerEvent=Fl,this.reopenClass({router:n})),Ember.RouterDSL.map(function(){this.resource("application",{path:"/"},function(){for(var e=0;e<n.callbacks.length;e++)n.callbacks[e].call(this);t.call(this)})}));return n.callbacks.push(t),n.map(e.generate()),n},_routePath:function(e){var t=[];for(var n=1,i=e.length;n<i;n++){for(var r=e[n].name.split("."),a=Ra.call(t);a.length&&!function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n]!==t[n])return;return 1}(a,r);)a.shift();t.push.apply(t,r.slice(a.length))}return t.join(".")},_translateQueryParams:function(e,t,n){for(var i in e)e.hasOwnProperty(i)&&(i in t?(e[t[i]]=e[i],delete e[i]):Ember.assert(Ma("You supplied an unknown query param controller property '%@' for route '%@'. Only the following query param properties can be set for this route: %@",[i,n,Ember.keys(t)]),i in e))}}),C=Ember.get,qa=Ember.set,za=Ember.getProperties,Fa=Ember.String.classify,Ember.String.fmt,Ba=Ember.EnumerableUtils.forEach,Ua=Ember.EnumerableUtils.replace,Ember.Route=Ember.Object.extend(Ember.ActionHandler,{exit:function(){Ember.FEATURES.isEnabled("query-params-new")&&this.controller._deactivateQueryParamObservers(),this.deactivate(),this.teardownViews()},enter:function(){this.activate()},viewName:null,controllerName:null,_actions:{finalizeQueryParamChange:function(e,t){if(Ember.FEATURES.isEnabled("query-params-new")){var n,i,r=this.controller,a=r._queryParamChangesDuringSuspension,o=C(r,"_queryParamHash");for(n in o)o.hasOwnProperty(n)&&(o[n]in e&&(r._finalizingQueryParams=!0,a&&n in a||(i=e[o[n]],i=Ember.isArray(i)?Ember.A(i):i,qa(r,n,i)),r._finalizingQueryParams=!1,delete e[o[n]]),t.unshift({key:o[n],value:C(r,n)}));return!(r._queryParamChangesDuringSuspension=null)}}},events:null,mergedProperties:["events"],deactivate:Ember.K,activate:Ember.K,transitionT},intermediateTransitionTo:function(){var e=this.router;e.intermediateTransitionTo.apply(e,arguments)},refresh:function(){return this.router.router.refresh(this).method("replace")},replaceWit},sen},setup:function(e,t){var n=this.controllerName||this.routeName,i=(i=this.controllerFor(n,!0))||this.generateController(n,e);this.controller=i,Ember.FEATURES.isEnabled("query-params-new")&&("application"!==n&&(this.controller._queryParamScope=n),this.controller._activateQueryParamObservers()),this.setupControllers?(Ember.deprecate("Ember.Route.setupControllers is deprecated. Please use Ember.Route.setupController(controller, model) instead."),this.setupControllers(i,e)):Ember.FEATURES.isEnabled("query-params-new")?(i._finalizingQueryParams=!0,i._queryParamChangesDuringSuspension={},this.setupController(i,e,t),i._finalizingQueryParams=!1):this.setupController(i,e),this.renderTemplates?(Ember.deprecate("Ember.Route.renderTemplates is deprecated. Please use Ember.Route.renderTemplate(controller, model) instead."),this.renderTemplates(e)):this.renderTemplate(i,e)},beforeModel:Ember.K,afterModel:Ember.K,redirect:Ember.K,contextDidChang},model:function(e,t){var n,i,r,a,o;for(o in e)"queryParams"!==o&&((n=o.match(/^(.*)_id$/))&&(i=n[1],a=e[o]),r=!0);return!i&&r?e:i?this.findModel(i,a):void 0},deserialize:function(e,t){return Ember.FEATURES.isEnabled("query-params-new")?this.model(this.paramsFor(this.routeName),t):this.model(e,t)},findModel:function(){var e=C(this,"store");return e.find.apply(e,arguments)},store:Ember.computed(function(){var i=this.container,r=this.routeName,a=C(this,"router.namespace");return{find:function(e,t){var n=i.lookupFactory("model:"+e);return Ember.assert("You used the dynamic segment "+e+"_id in your route "+r+", but "+a+"."+Fa(e)+" did not exist and you did not override your route's `model` hook.",n),n.find(t)}}}),serialize:function(e,t){var n,i;if(!(t.length<1)&&e)return n=t[0],i={},/_id$/.test(n)&&1===t.length?i[n]=C(e,"id"):i=za(e,t),i},setupController:function(e,t,n){e&&void 0!==t&&qa(e,"model",t)},controllerFor:function(e,t){var n=this.container,i=n.lookup("route:"+e);return i&&i.controllerName&&(e=i.controllerName),i=n.lookup("controller:"+e),Ember.assert("The controller named '"+e+"' could not be found. Make sure that this route exists and has already been entered at least once. If you are accessing a controller not associated with a route, make sure the controller class is explicitly defined.",i||!0===t),i},generateController:function(e,t){var n=this.container;return t=t||this.modelFor(e),Ember.generateController(n,e,t)},modelFor:function(e){var t=this.container.lookup("route:"+e),n=this.router.router.activeTransition;if(n){e=t&&t.routeName||e;if(n.resolvedModels.hasOwnProperty(e))return n.resolvedModels[e]}return t&&t.currentModel},renderTemplat},render:function(e,t){Ember.assert("The name in the given arguments is undefined",!(0<arguments.length)||!Ember.isNone(arguments[0]));var n,i,r=!!e,a=("object"!=typeof e||t||(t=e,e=this.routeName),t=t||{},n=e?e=e.replace(/\//g,"."):(e=this.routeName,this.templateName||e),t.view||this.viewName||e),o=this.container,a=o.lookup("view:"+a),s=(s=a?a.get("template"):null)||o.lookup("template:"+n);a||s?(a=function(e,t,n){{var i;e?n.LOG_VIEW_LOOKUPS&&Ember.Logger.info("Rendering "+n.name+" with "+e,{fullName:"view:"+n.name}):(i=n.into?"view:default":"view:toplevel",e=t.lookup(i),n.LOG_VIEW_LOOKUPS&&Ember.Logger.info("Rendering "+n.name+" with default view "+e,{fullName:"view:"+n.name}))}C(e,"templateName")||(qa(e,"template",n.template),qa(e,"_debugTemplateName",n.name));return qa(e,"renderedName",n.name),qa(e,"controller",n.controller),e}(a,o,t=function(e,t,n,i){(i=i||{}).into=i.into?i.into.replace(/\//g,"."):Ul(e),i.outlet=i.outlet||"main",i.name=t,i.template=n,i.LOG_VIEW_LOOKUPS=C(e.router,"namespace.LOG_VIEW_LOOKUPS"),Ember.assert("An outlet ("+i.outlet+") was specified but was not found.","main"===i.outlet||i.into);n=i.controller;n=i.controller||((t=e.container.lookup("controller:"+t))?t:e.controllerName||e.routeName);if("string"==typeof n){t=n;if(!(n=e.container.lookup("controller:"+t)))throw new Ember.Error("You passed `controller: '"+t+"'` into the `render` method, but no such controller could be found.")}return i.controller=n,i}(this,e,s,t)),"main"===t.outlet&&(this.lastRenderedTemplate=e),n=this,o=a,(s=t).into?(a=n.router._lookupActiveView(s.into),}(a,s.outlet),n.teardownOutletViews||(n.teardownOutletViews=[]),Ua(n.teardownOutletViews,0,0,[i]),a.connectOutlet(s.outlet,o)):(i=C(n,"router.namespace.rootElement"),n.teardownTopLevelView&&n.teardownTopLevelView(),n.router._connectActiveView(s.name,o),n.teardownTopLevelVie}(o),o.appendTo(i))):(Ember.assert('Could not find "'+e+'" template or view.',!r),C(this.router,"namespace.LOG_VIEW_LOOKUPS")&&Ember.Logger.info('Could not find "'+e+'" template or view. Nothing will be rendered',{fullName:"template:"+e}))},disconnectOutlet:function(e){(e=e||{}).parentView=e.parentView?e.parentView.replace(/\//g,"."):Ul(this),e.outlet=e.outlet||"main";var t=this.router._lookupActiveView(e.parentView);t&&t.disconnectOutlet(e.outlet)},willDestroy:function(){this.teardownViews()},teardownViews:function(){this.teardownTopLevelView&&this.teardownTopLevelView();var e=this.teardownOutletViews||[];Ba(e,function(e){e()}),delete this.teardownTopLevelView,delete this.teardownOutletViews,delete this.lastRenderedTemplate}}),Ember.FEATURES.isEnabled("query-params-new")&&Ember.Route.reopen({paramsFor:function(e){var t,r,a,n=this.container.lookup("route:"+e);return n?(t=this.router.router.activeTransition,n=this.router._queryParamNamesForSingle(n.routeName),a=(t?(r=t.params[e]||{},t):(t=this.router.router.state,r=t.params[e]||{},t)).queryParams,this.router._queryParamOverrides(r,n.queryParams,function(e,t,n){var i=(t in a?a:r)[t];delete r[t],r[n.split(":").pop()]=i}),r):{}}}),Ember.onLoad("Ember.Handlebars",function(){var r=Ember.Handlebars.resolveParams,a=Ember.ArrayPolyfills.map,o=Ember.get,s=Ember.Handlebars.get;function e(e,n,t){var e=r(e,n,t),i=t.types;return a.call(e,function(e,t){return"ID"===i[t]?function e(t,n){if("controller"===n)return n;return Ember.ControllerMixin.detect(t)?e(o(t,"model"),n?n+".model":"model"):n}(e,n[t]):null})}Ember.Router.resolveParams=function(n,i,r){return a.call(e(n,i,r),function(e,t){return null===e?i[t]:s(n,e,r)})},Ember.Router.resolvePaths=e}),_=Ember.get,Ember.set,Wa=Ember.String.fmt,$a=Array.prototype.slice,Ember.onLoad("Ember.Handlebars",function(e){var s=Ember.Object.extend({values:null}),r=Ember.Router.resolveParams,l=Ember.Router._translateQueryParams,p=Ember.Router.resolvePaths,n=Ember.ViewUtils.isSimpleClick;var c=Ember.LinkView=Ember.View.extend({tagName:"a",currentWhen:null,title:null,rel:null,activeClass:"active",loadingClass:"loading",disabledClass:"disabled",_isDisabled:!1,replace:!1,attributeBindings:["href","title","rel"],classNameBindings:["active","loading","disabled"],eventName:"click",init:function(){this._super.apply(this,arguments);var e=_(this,"eventName");this.on(e,this,this._invoke)},_paramsChanged:function(){this.notifyPropertyChange("resolvedParams")},_setupPathObservers:function(){var e,t,n,i,r,a=this.parameters,o=a.options.linkTextPath,s=(i=a.options.types,r=a.options.data,p(a.context,a.params,{types:i,data:r})),l=s.length;for(o&&(n=Ember.Handlebars.normalizePath(a.context,o,a.options.data),this.registerObserver(n.root,n.path,this,this.rerender)),t=0;t<l;t++)null!==(e=s[t])&&(n=Ember.Handlebars.normalizePath(a.context,e,a.options.data),this.registerObserver(n.root,n.path,this,this._paramsChanged));var c=this.queryParamsObject;if(c){var d,u=c.values;for(d in u)u.hasOwnProperty(d)&&"ID"===c.types[d]&&(n=Ember.Handlebars.normalizePath(a.context,u[d],a.options.data),this.registerObserver(n.root,n.path,this,this._paramsChanged))}},afterRende},concreteView:Ember.computed(function(){return _(this,"parentView")}).property("parentView"),disabled:Ember.computed(function(e,t){return void 0!==t&&this.set("_isDisabled",t),!!t&&_(this,"disabledClass")}),active:Ember.computed(function(){var e,t,n,i;return!_(this,"loading")&&(e=_(this,"router"),t=_(this,"routeArgs").slice(1),n=_(this,"resolvedParams"),i=(n=this.currentWhen||n[0])+".index",e.isActive.apply(e,[n].concat(t))||e.isActive.apply(e,[i].concat(t))?_(this,"activeClass"):void 0)}).property("resolvedParams","routeArgs"),loading:Ember.computed(function(){if(!_(this,"routeArgs"))return _(this,"loadingClass")}).property("routeArgs"),router:Ember.computed(function(){return _(this,"controller").container.lookup("router:main")}),_invoke:function(e){var t;return!n(e)||(!1!==this.preventDefault&&e.preventDefault(),!1===this.bubbles&&e.stopPropagation(),!_(this,"_isDisabled")&&(_(this,"loading")?(Ember.Logger.warn("This link-to is in an inactive loading state because at least one of its parameters presently has a null/undefined value, or the provided route name is invalid."),!1):(e=_(this,"router"),t=_(this,"routeArgs"),void(_(this,"replace")?e.replaceWith:e.transitionTo).apply(e,t))))},resolvedParams:Ember.computed(function(){var e,t=this.parameters,n=t.options,i=n.types,n=n.data;return 0===t.params.length?(e=this.container.lookup("controller:application"),[_(e,"currentRouteName")]):r(t.context,t.params,{types:i,data:n})}).property("router.url"),routeArgs:Ember.computed(function(){var e,t,n=_(this,"resolvedParams").slice(0),i=_(this,"router"),r=n[0];if(r){e=r,(i=i).hasRoute(e)||(t=e+".index",Ember.assert(Wa("The attempt to link-to route '%@' failed (also tried '%@'). The router did not find '%@' in its possible routes: '%@'",[e,t,e,Ember.keys(i.router.recognizer.names).join("', '")]),i.hasRoute(t)),e=t),r=e,n[0]=r;for(var a=1,o=n.length;a<o;++a){var s=n[a];if(null==s)return}return Ember.FEATURES.isEnabled("query-params-new")&&n.push({queryParams:_(this,"queryParams")}),n}}).property("resolvedParams","queryParams"),queryParamsObject:null,queryParams:Ember.computed(function(){var i=_(this,"queryParamsObject"),r={},e=(i&&Ember.merge(r,i.values),_(this,"resolvedParams")),t=_(this,"router"),e=e[0],n=t._queryParamNamesFor(e),a=n.queryParams,n=n.translations,o={},s=(l(r,n,e),this.parameters);return t._queryParamOverrides(o,a,function(e,t){var n;e in r&&(n=e.split(":"),n="ID"===i.types[n[1]]?(n=Ember.Handlebars.normalizePath(s.context,r[e],s.options.data),Ember.Handlebars.get(n.root,n.path,s.options)):r[e],delete r[e],o[t]=n)}),o}).property("resolvedParams.[]"),href:Ember.computed(function(){var e,t;if("a"===_(this,"tagName"))return e=_(this,"router"),(t=_(this,"routeArgs"))?e.generate.apply(e,t):_(this,"loadingHref")}).property("routeArgs"),loadingHref:"#"});c.toString=function(){return"LinkView"},Ember.Handlebars.registerHelper("link-to",function(e){var t,n,i,r=$a.call(arguments,-1)[0],a=$a.call(arguments,0,-1),o=r.hash;return a[a.length-1]instanceof s&&(o.queryParamsObject=a.pop()),o.disabledBinding=o.disabledWhen,r.fn||(t=a.shift(),n=r.types.shift(),i=this,"ID"===n?(r.linkTextPath=t,r.f}):r.fn=function(){return t}),o.parameters={context:this,options:r,params:a},Ember.Handlebars.helpers.view.call(this,c,r)}),Ember.FEATURES.isEnabled("query-params-new")&&Ember.Handlebars.registerHelper("query-params",function(e){return Ember.assert(Wa("The `query-params` helper only accepts hash parameters, e.g. (query-params queryParamPropertyName='%@') as opposed to just (query-params '%@')",[e,e]),1===arguments.length),s.create({values:e.hash,types:e.hashTypes})}),Ember.Handlebars.registerHelper("linkTo",function(){return Ember.warn("The 'linkTo' view helper is deprecated in favor of 'link-to'"),Ember.Handlebars.helpers["link-to"].apply(this,arguments)})}),Ember.get,Ember.set,Ember.onLoad("Ember.Handlebars",function(o){o.OutletView=Ember.ContainerView.extend(Ember._Metamorph),o.registerHelper("outlet",function(e,t){var n,i,r,a;for(e&&e.data&&e.data.isRenderData&&(t=e,e="main"),i=t.data.view.container,n=t.data.view;!n.get("template.isTop");)n=n.get("_parentView");return(r=t.hash.view)&&(a="view:"+r,Ember.assert("Using a quoteless view parameter with {{outlet}} is not supported. Please update to quoted usage '{{outlet \""+r+'"}}.',"ID"!==t.hashTypes.view),Ember.assert("The view name you supplied '"+r+"' did not resolve to a view.",i.has(a))),r=r?i.lookupFactory(a):t.hash.viewClass||o.OutletView,t.data.view.set("outletSource",n),t.hash.currentViewBinding="_view.outletSource._outlets."+e,o.helpers.view.call(this,r,t)})}),Ember.get,Ember.set,Ember.onLoad("Ember.Handlebars",function(e){Ember.Handlebars.registerHelper("render",function(e,t,n){var i,r=arguments.length,a=(n||t).data.keywords.controller.container,o=a.lookup("router:main");if(2===r)n=t,t=void 0,Ember.assert('You can only use the {{render}} helper once without a model object as its second argument, as in {{render "post" post}}.',!o||!o._lookupActiveView(e));else{if(3!==r)throw Ember.Error("You must pass a templateName to render");i=Ember.Handlebars.get(n.contexts[1],t,n)}Ember.deprecate("Using a quoteless parameter with {{render}} is deprecated. Please update to quoted usage '{{render \""+e+'"}}.',"ID"!==n.types[0]),e=e.replace(/\//g,".");var s,l=a.lookup("view:"+e)||a.lookup("view:default"),c=n.hash.controller||e,d="controller:"+c,u=(n.hash.controller&&Ember.assert("The controller name you supplied '"+c+"' did not resolve to a controller.",a.has(d)),n.data.keywords.controller),p=(2<r?s=(a.lookupFactory(d)||Ember.generateControllerFactory(a,c,i)).create({model:i,parentController:u,target:u}):(s=a.lookup(d)||Ember.generateController(a,c)).setProperties({target:u,parentController:u}),n.contexts[1]),r=(p&&l.registerObserver(p,t,function(){s.set("model",Ember.Handlebars.get(p,t,n))}),n.hash.viewName=Ember.String.camelize(e),"template:"+e);Ember.assert("You used `{{render '"+e+"'}}`, but '"+e+"' can not be found as either a template or a view.",a.has("view:"+e)||a.has(r)),n.hash.template=a.lookup(r),n.hash.controller=s,o&&!i&&o._connectActiveView(e,l),Ember.Handlebars.helpers.view.call(this,l,n)})}),Ember.onLoad("Ember.Handlebars",function(e){var r=Ember.Router.resolveParams,a=Ember.ViewUtils.isSimpleClick,t=Ember.Handlebars,o=t.get,s=t.SafeString,l=Ember.ArrayPolyfills.forEach,c=(Ember.get,Array.prototype.slice);function d(e,t){var n=[],t=(t&&n.push(t),e.options.types.slice(1)),i=e.options.data;return n.concat(r(e.context,e.params,{types:t,data:i}))}var u=t.ActionHelper={registeredActions:{}},p=["alt","shift","meta","ctrl"],h=/^click|mouse|touch/;u.registerAction=function(n,i,r){var e=(++Ember.uuid).toString();return u.registeredActions[e]={eventName:i.eventName,handler:function(e){if(!function(t,n){if(void 0===n){if(h.test(t.type))return a(t);n=""}var i;return 0<=n.indexOf("any")||(i=!0,l.call(p,function(e){t[e+"Key"]&&-1===n.indexOf(e)&&(i=!1)}),i)}(e,r))return!0;!1!==i.preventDefault&&e.preventDefault(),!1===i.bubbles&&e.stopPropagation();var t=(t=i.target).target?o(t.root,t.target,t.options):t.root;Ember.run(function(){t.send?t.send.apply(t,d(i.parameters,n)):(Ember.assert("The action '"+n+"' did not exist on "+t,"function"==typeof t[n]),t[n].apply(t,d(i.parameters)))})}},i.view.on("willClearRender}),e},t.registerHelper("action",function(e){var t,n,i=arguments[arguments.length-1],r=c.call(arguments,1,-1),a=i.hash,o={eventName:a.on||"click"},r=(o.parameters={context:this,options:i,params:r},o.view=i.data.view,a.target?(t=this,n=a.target):(r=i.data.keywords.controller)&&(t=r),o.target={root:t,target:n,options:i},o.bubbles=a.bubbles,o.preventDefault=a.preventDefault,u.registerAction(e,o,a.allowedKeys));return new s('data-ember-action="'+r+'"')})}),Ya=Ember.get,Ember.set,Ember.EnumerableUtils.map,Ga={},Ember.ControllerMixin.reopen({transitionToRoute:function(){var e=Ya(this,"target");return(e.transitionToRoute||e.transitionTo).apply(e,arguments)},transitionTo:function(){return Ember.deprecate("transitionTo is deprecated. Please use transitionToRoute."),this.transitionToRoute.apply(this,arguments)},replaceRoute:function(){var e=Ya(this,"target");return(e.replaceRoute||e.replaceWith).apply(e,arguments)},replaceWit}}),Ember.FEATURES.isEnabled("query-params-new")&&Ember.ControllerMixin.reopen({concatenatedProperties:["queryParams"],queryParams:null,_queryParamScope:null,_finalizingQueryParams:!1,_queryParamHash:Ember.computed(function(){var e={},t=this.queryParams;if(t)for(var n=0,i=t.length;n<i;++n){var r=t[n].split(":"),a=r[0],r=(r=r[1])||(this._queryParamScope?this._queryParamScope+"["+a+"]":a);e[a]=r}return e}),_activateQueryParamObservers:function(){var e,t=Ya(this,"_queryParamHash");for(e in t)t.hasOwnProperty(e)&&(this.addObserver(e,this,this._queryParamChanged),this.addObserver(e+".[]",this,this._queryParamChanged))},_deactivateQueryParamObservers:function(){var e,t=Ya(this,"_queryParamHash");for(e in t)t.hasOwnProperty(e)&&(this.removeObserver(e,this,this._queryParamChanged),this.removeObserver(e+".[]",this,this._queryParamChanged))},_queryParamChanged:function(e,t){var n;".[]"===t.substr(-3)&&(t=t.substr(0,t.length-3)),this._finalizingQueryParams?(n=this._queryParamChangesDuringSuspension)&&(n[t]=!0):(n=Ya(this,"_queryParamHash"),Ga[n[t]]=Ember.copy(Ya(this,t)),Ember.run.once(this,this._fireQueryParamTransition))},_fireQueryParamTransition:function(){this.transitionToRoute({queryParams:Ga}),Ga={}},_queryParamChangesDuringSuspension:null}),Ka=Ember.get,Qa=Ember.set,Ember.View.reopen({init:function(){Qa(this,"_outlets",{}),this._super()},connectOutlet:function(e,t){var n,i,r;this._pendingDisconnections&&delete this._pendingDisconnections[e],this._hasEquivalentView(e,t)?t.destroy():(n=Ka(this,"_outlets"),i=(i=Ka(this,"container"))&&i.lookup("router:main"),r=Ka(t,"renderedName"),Qa(n,e,t),i&&r&&i._connectActiveView(r,t))},_hasEquivalentView:function(e,t){e=Ka(this,"_outlets."+e);return e&&e.constructor===t.constructor&&e.get("template")===t.get("template")&&e.get("context")===t.get("context")},disconnectOutlet:function(e){this._pendingDisconnections||(this._pendingDisconnections={}),this._pendingDisconnections[e]=!0,Ember.run.once(this,"_finishDisconnections")},_finishDisconnections:function(){if(!this.isDestroyed){var e,t=Ka(this,"_outlets"),n=this._pendingDisconnections;for(e in this._pendingDisconnections=null,n)Qa(t,e,null)}}}),O=Ember.run.queues,M=Ember.ArrayPolyfills.indexOf,O.splice(M.call(O,"actions")+1,0,"routerTransitions"),Ember.get,Ember.set,Ember.Location={create:function(e){var t=e&&e.implementation,n=(Ember.assert("Ember.Location.create: you must specify a 'implementation' option",!!t),this.implementations[t]);return Ember.assert("Ember.Location.create: "+t+" is not a valid implementation",!!n),n.create.apply(n,arguments)},registerImplementation:function(e,t){Ember.deprecate("Using the Ember.Location.registerImplementation is no longer supported. Register your custom location implementation with the container instead.",!1),this.implementations[e]=t},implementations:{}},Xa=Ember.get,Ja=Ember.set,Ember.NoneLocation=Ember.Object.extend({implementation:"none",path:"",getURL:function(){return Xa(this,"path")},setURL:function(e){Ja(this,"path",e)},onUpdateURL:function(e){this.updateCallback=e},handleURL:function(e){Ja(this,"path",e),this.updateCallback(e)},formatURL:function(e){return e}}),Za=Ember.get,eo=Ember.set,Ember.HashLocation=Ember.Object.extend({implementation:"hash",init:function(){eo(this,"location",Za(this,"location")||window.location)},getURL:function(){var e,t;return Ember.FEATURES.isEnabled("query-params-new")?-1===(t=(e=Za(this,"location").href).indexOf("#"))?"":e.substr(t+1):Za(this,"location").hash.substr(1)},setURL:function(e){Za(this,"location").hash=e,eo(this,"lastSetURL",e)},replaceURL:function(e){Za(this,"location").replace("#"+e),eo(this,"lastSetURL",e)},onUpdateURL:function(t){var n=this,e=Ember.guidFor(this);Ember.$(window).on("hashchange.ember-location-"+e,function(){Ember.run(function(){var e=location.hash.substr(1);Za(n,"lastSetURL")!==e&&(eo(n,"lastSetURL",null),t(e))})})},formatUR},willDestroy:function(){var e=Ember.guidFor(this);Ember.$(window).off("hashchange.ember-location-"+e)}}),T=Ember.get,to=Ember.set,no=!1,io=window.history&&"state"in window.history,Ember.HistoryLocation=Ember.Object.extend({implementation:"history",init:function(){to(this,"location",T(this,"location")||window.location),to(this,"baseURL",Ember.$("base").attr("href")||"")},initState:function(){to(this,"history",T(this,"history")||window.history),this.replaceState(this.formatURL(this.getURL()))},rootURL:"/",getURL:function(){var e=T(this,"rootURL"),t=T(this,"location"),n=t.pathname,i=T(this,"baseURL"),e=e.replace(/\/$/,""),i=i.replace(/\/$/,""),n=n.replace(i,"").replace(e,"");return Ember.FEATURES.isEnabled("query-params-new")&&(n+=t.search||""),n},setURL:function(e){var t=this.getState();e=this.formatURL(e),t&&t.path!==e&&this.pushState(e)},replaceURL:function(e){var t=this.getState();e=this.formatURL(e),t&&t.path!==e&&this.replaceState(e)},getState:function(){return io?T(this,"history").state:this._historyState},pushState:function(e){var t={path:e};T(this,"history").pushState(t,null,e),io||(this._historyState=t),this._previousURL=this.getURL()},replaceState:function(e){var t={path:e};T(this,"history").replaceState(t,null,e),io||(this._historyState=t),this._previousURL=this.getURL()},onUpdateURL:function(t){var e=Ember.guidFor(this),n=this;Ember.$(window).on("popstate.ember-location-"+e,function(e){!no&&(no=!0,n.getURL()===n._previousURL)||t(n.getURL())})},formatURL:function(e){var t=T(this,"rootURL"),n=T(this,"baseURL");return""!==e?(t=t.replace(/\/$/,""),n=n.replace(/\/$/,"")):n.match(/^\//)&&t.match(/^\//)&&(n=n.replace(/\/$/,"")),n+t+e},willDestroy:function(){var e=Ember.guidFor(this);Ember.$(window).off("popstate.ember-location-"+e)}}),$l.prototype.add=function(e){var t;if(e)return this.vertices.hasOwnProperty(e)?this.vertices[e]:(this.vertices[e]=t={name:e,incoming:{},incomingNames:[],hasOutgoing:!1,value:null},this.names.push(e),t)},$l.prototype.ma},$l.prototype.addEdge=function(e,n){var t,i;e&&n&&e!==n&&(t=this.add(e),(i=this.add(n)).incoming.hasOwnProperty(e)||(Wl(t,function(e,t){if(e.name===n)throw new Ember.Error("cycle detected: "+n+" <- "+t.join(" <- "))}),t.hasOutgoing=!0,i.incoming[e]=t,i.incomingNames.push(e)))},$l.prototype.topsort=function(e){for(var t,n={},i=this.vertices,r=this.names,a=r.length,o=0;o<a;o++)(t=i[r[o]]).hasOutgoing||Wl(t,e,n)},$l.prototype.addEdge},Ember.DAG=$l,ro=Ember.get,ao=Ember.String.classify,oo=Ember.String.capitalize,so=Ember.String.decamelize,Ember.DefaultResolver=Ember.Object.extend({namespace:null,normalize:function(e){var t=e.split(":",2),n=t[0],i=t[1];return Ember.assert("Tried to normalize a container name without a colon (:) in it. You probably tried to lookup a name that did not contain a type, a colon, and a name. A proper lookup name would be `view:post`.",2===t.length),"template"!==n?(-1<(t=i).indexOf(".")&&(t=t.replace(/\.(.)/g,function(e){return e.charAt(1).toUpperCase()})),n+":"+(t=-1<i.indexOf("_")?t.replace(/_(.)/}):t)):e},resolve:function(e){var t=this.parseName(e),n=this[t.resolveMethodName];if(!t.name||!t.type)throw new TypeError("Invalid fullName: `"+e+"`, must be of the form `type:name` ");if(n){e=n.call(this,t);if(e)return e}return this.resolveOther(t)},parseName:function(e){var t,n=e.split(":"),i=n[0],n=n[1],r=n,a=ro(this,"namespace");return"template"!==i&&-1!==r.indexOf("/")&&(r=(t=r.split("/"))[t.length-1],t=oo(t.slice(0,-1).join(".")),a=Ember.Namespace.byName(t),Ember.assert("You are looking for a "+r+" "+i+" in the "+t+" namespace, but the namespace could not be found",a)),{fullName:e,type:i,fullNameWithoutType:n,name:r,root:a,resolveMethodName:"resolve"+ao(i)}},resolveTemplate:function(e){e=e.fullNameWithoutType.replace(/\./g,"/");return Ember.TEMPLATES[e]||(e=so(e),Ember.TEMPLATES[e]||void 0)},useRouterNamin},resolveController:function(e){return this.useRouterNaming(e),this.resolveOther(e)},resolveRoute:function(e){return this.useRouterNaming(e),this.resolveOther(e)},resolveVie},resolveHelper:function(e){return this.resolveOther(e)||Ember.Handlebars.helpers[e.fullNameWithoutType]},resolveModel:function(e){var t=ao(e.name),e=ro(e.root,t);if(e)return e},resolveOther:function(e){var t=ao(e.name)+ao(e.type),e=ro(e.root,t);if(e)return e},lookupDescription:function(e){var t,e=this.parseName(e);return"template"===e.type?"template at "+e.fullNameWithoutType.replace(/\./g,"/"):(t=e.root+"."+ao(e.name),"model"!==e.type&&(t+=ao(e.type)),t)},makeToString:function(e,t){return e.toString()}}),lo=Ember.get,co=Ember.set,Yl.prototype={_container:null,lookup:(Yl.deprecate=function(t){return function(){var e=this._container;return Ember.deprecate("Using the defaultContainer is no longer supported. [defaultContainer#"+t+"] see: http://git.io/EKPpnA",!1),e[t].apply(e,arguments)}})("lookup"),resolve:Yl.deprecate("resolve"),register:Yl.deprecate("register")},uo=Ember.Application=Ember.Namespace.extend(Ember.DeferredMixin,{rootElement:"body",eventDispatcher:null,customEvents:null,_readinessDeferrals:1,init:function(){var i;this.$||(this.$=Ember.$),this.__container__=this.buildContainer(),this.Router=this.defaultRouter(),this._super(),this.scheduleInitialize(),Ember.libraries.registerCoreLibrary("Handlebars",Ember.Handlebars.VERSION),Ember.libraries.registerCoreLibrary("jQuery",Ember.$().jquery),Ember.LOG_VERSION&&(Ember.LOG_VERSION=!1,i=Math.max.apply(this,Ember.A(Ember.libraries).mapBy("name.length")),Ember.debug("-------------------------------"),Ember.libraries.each(function(e,t){var n=new Array(i-e.length+1).join(" ");Ember.debug([e,n," : ",t].join(""))}),Ember.debug("-------------------------------"))},buildContaine},defaultRouter:function(){var e;if(!1!==this.Router)return e=this.__container__,this.Router&&(e.unregister("router:main"),e.register("router:main",this.Router)),e.lookupFactory("router:main")},scheduleInitialize:function(){var e=this;!this.$||this.$.isReady?Ember.run.schedule("actions",e,"_initialize"):this.$().ready(function(){Ember.run(e,"_initialize")})},deferReadiness:function(){Ember.assert("You must call deferReadiness on an instance of Ember.Application",this instanceof Ember.Application),Ember.assert("You cannot defer readiness since the `ready()` hook has already been called.",0<this._readinessDeferrals),this._readinessDeferrals++},advanceReadiness:function(){Ember.assert("You must call advanceReadiness on an instance of Ember.Application",this instanceof Ember.Application),this._readinessDeferrals--,0===this._readinessDeferrals&&Ember.run.once(this,this.didBecomeReady)},register:function(){var e=this.__container__;e.register.apply(e,arguments)},injec},initialize:function(){Ember.deprecate("Calling initialize manually is not supported. Please see Ember.Application#advanceReadiness and Ember.Application#deferReadiness")},_initialize:function(){var e;if(!this.isDestroyed)return this.Router&&((e=this.__container__).unregister("router:main"),e.register("router:main",this.Router)),this.runInitializers(),Ember.runLoadHooks("application",this),this.advanceReadiness(),this},reset:function(){this._readinessDeferrals=1,Ember.run.join(this,function(){this.__container__.lookup("router:main").reset(),Ember.run(this.__container__,"destroy"),this.buildContainer(),Ember.run.schedule("actions",this,function(){this._initialize()})})},runInitializers:function(){var e,t,n=lo(this.constructor,"initializers"),i=this.__container__,r=new Ember.DAG,a=this;for(e in n)t=n[e],r.addEdges(t.name,t.initialize,t.before,t.after);r.topsort(function(e){var t=e.value;Ember.assert("No application initializer named '"+e.name+"'",t),t(i,a)})},didBecomeReady:function(){this.setupEventDispatcher(),this.ready(),this.startRouting(),Ember.testing||(Ember.Namespace.processAll(),Ember.BOOTED=!0),this.resolve(this)},setupEventDispatcher:function(){var e=lo(this,"customEvents"),t=lo(this,"rootElement"),n=this.__container__.lookup("event_dispatcher:main");co(this,"eventDispatcher",n),n.setup(e,t)},startRoutin},handleUR},ready:Ember.K,resolver:null,Resolver:null,willDestroy:function(){Ember.BOOTED=!1,this.__container__.destroy()},initialize}}),Ember.Application.reopenClass({initializers:{},initializer:function(e){void 0!==this.superclass.initializers&&this.superclass.initializers===this.initializers&&this.reopenClass({initializers:Ember.create(this.initializers)}),Ember.assert("The initializer '"+e.name+"' has already been registered",!this.initializers[e.name]),Ember.assert("An initializer cannot be registered with both a before and an after",!(e.before&&e.after)),Ember.assert("An initializer cannot be registered without an initialize function",Ember.canInvoke(e,"initialize")),this.initializers[e.name]=e},buildContainer:function(e){var t,n,i=new Ember.Containe}return Ember.Container.defaultContainer=new Yl(i),i.set=Ember.set,i.resolver=((t=e).get("resolver")&&Ember.deprecate("Application.resolver is deprecated in favor of Application.Resolver",!1),n=(t.get("resolver")||t.get("Resolver")||Ember.DefaultResolver).create({namespace:t}),r.describe=function(e){return n.lookupDescription(e)},r.makeToString=function(e,t){return n.makeToString(e,t)},r.normalize=function(e){return n.normalize?n.normalize(e):(Ember.deprecate("The Resolver should now provide a 'normalize' function",!1),e)},r),i.normalize=i.resolver.normalize,i.describe=i.resolver.describe,i.makeToString=i.resolver.makeToString,i.optionsForType("component",{singleton:!1}),i.optionsForType("view",{singleton:!1}),i.optionsForType("template",{instantiate:!1}),i.optionsForType("helper",{instantiate:!1}),i.register("application:main",e,{instantiate:!1}),i.register("controller:basic",Ember.Controller,{instantiate:!1}),i.register("controller:object",Ember.ObjectController,{instantiate:!1}),i.register("controller:array",Ember.ArrayController,{instantiate:!1}),i.register("route:basic",Ember.Route,{instantiate:!1}),i.register("event_dispatcher:main",Ember.EventDispatcher),i.register("router:main",Ember.Router),i.injection("router:main","namespace","application:main"),i.register("location:hash",Ember.HashLocation),i.register("location:history",Ember.HistoryLocation),i.register("location:none",Ember.NoneLocation),i.injection("controller","target","router:main"),i.injection("controller","namespace","application:main"),i.injection("route","router","router:main"),i}}),Ember.runLoadHooks("Ember.Application",Ember.Application),po=Ember.get,Ember.set,ho=Ember.computed(function(){var a=this;return{needs:po(a,"needs"),container:po(a,"container"),unknownProperty:function(e){for(var t=this.needs,n=0,i=t.length;n<i;n++)if(t[n]===e)return this.container.lookup("controller:"+e);var r=Ember.inspect(a)+"#needs does not include `"+e+"`. To access the "+e+" controller from "+Ember.inspect(a)+", "+Ember.inspect(a)+" should have a `needs` property that is an array of the controllers it has access to.";throw new ReferenceError(r)},setUnknownProperty:function(e,t){throw new Error("You cannot overwrite the value of `controllers."+e+"` of "+Ember.inspect(a))}}}),Ember.ControllerMixin.reopen({concatenatedProperties:["needs"],needs:[],init:function(){var e=po(this,"needs");if(0<po(e,"length")){if(Ember.assert(" `"+Ember.inspect(this)+" specifies `needs`, but does not have a container. Please ensure this controller was instantiated with a container.",this.container||Ember.meta(this,!1).descs.controllers!==ho),this.container){for(var t,n=this,i=this.container,r=e,a=[],o=0,s=r.length;o<s;o++)t=r[o],Ember.assert(Ember.inspect(n)+"#needs must not specify dependencies with periods in their names ("+t+")",-1===t.indexOf(".")),-1===t.indexOf(":")&&(t="controller:"+t),i.has(t)||a.push(t);if(a.length)throw new Ember.Error(Ember.inspect(n)+" needs [ "+a.join(", ")+" ] but "+(1<a.length?"they":"it")+" could not be found")}po(this,"controllers")}this._super.apply(this,arguments)},controllerFor:function(e){return Ember.deprecate("Controller#controllerFor is deprecated, please use Controller#needs instead"),Ember.controllerFor(po(this,"container"),e)},controllers:ho}),Ember.DataAdapter=Ember.Object.extend({ini},container:null,attributeLimit:3,releaseMethods:Ember.A(),getFilters:function(){return Ember.A()},watchModelTypes:function(e,n){var t=this.getModelTypes(),i=this,r=Ember.A(),a=(e(t.map(function(e){var t=i.wrapModelType(e);return r.push(i.observeModelType(e,n)),t})});return this.releaseMethods.pushObject(a),a},watchRecords:function(e,s,t,l){var n,c=this,d=Ember.A(),i=this.getRecords(e),},e=i.ma}),r={didChang},willChange:Ember.K};return i.addArrayObserver(c,r),},s(e),this.releaseMethods.pushObject(n),n},willDestro},detec},columnsForType:function(e){return Ember.A()},observeModelType:function(e,t){function n(){t([i.wrapModelType(e)])}var i=this,r=this.getRecords(e),a={didChange:function(){Ember.run.scheduleOnce("actions",this,n)},willChange:Ember.K};r.addArrayObserver(this,a);return function(){r.removeArrayObserver(i,a)}},wrapModelType:function(e,t){var n=this.getRecords(e);return{name:e.toString(),count:Ember.get(n,"length"),columns:this.columnsForType(e),object:e}},getModelTypes:function(){var e=Ember.A(Ember.Namespace.NAMESPACES),n=Ember.A(),i=this;return e.forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(t=e[t],i.detect(t)&&n.push(t))}),n},getRecords:function(e){return Ember.A()},wrapRecor},getRecordColumnValues:function(e){return{}},getRecordKeywords:function(e){return Ember.A()},getRecordFilterValue},getRecordColor:function(e){return null},observeRecor}}),fo=[].slice,mo={},vo=[],Ember.Test={registerHelper:function(e,t){mo[e]={method:t,meta:{wait:!1}}},registerAsyncHelper:function(e,t){mo[e]={method:t,meta:{wait:!0}}},unregisterHelper:function(e){delete mo[e],delete Ember.Test.Promise.prototype[e]},onInjectHelpers:function(e){vo.push(e)},promis},adapter:null,resolv},registerWaiter:function(e,t){1===arguments.length&&(t=e,e=null),this.waiters||(this.waiters=Ember.A()),this.waiters.push([e,t])},unregisterWaiter:function(e,t){var n;this.waiters&&(1===arguments.length&&(t=e,e=null),n=[e,t],this.waiters=Ember.A(this.waiters.filter(function(e){return 0!==Ember.compare(e,n)})))}},Ember.Application.reopen({testHelpers:{},originalMethods:{},testing:!1,setupForTesting:function(){Ember.testing=!0,this.testing=!0,this.Router.reopen({location:"none"}),Ember.Test.adapter||(Ember.Test.adapter=Ember.Test.QUnitAdapter.create()),Ember.FEATURES.isEnabled("ember-testing-simple-setup")&&(this.testingSetup=!0)},helperContainer:window,injectTestHelpers:function(e){for(var t in e&&(this.helperContainer=e),this.testHelpers={},mo)this.originalMethods[t]=this.helperContainer[t],this.testHelpers[t]=this.helperContainer[t]=Gl(this,t),!function(e,t,n,i){e[t]=function(){var e=arguments;return i?n.apply(this,e):this.then(function(){return n.apply(this,e)})}}(Ember.Test.Promise.prototype,t,Gl(this,t),mo[t].meta.wait);for(var n=0,i=vo.length;n<i;n++)vo[n](this)},removeTestHelpers:function(){for(var e in mo)this.helperContainer[e]=this.originalMethods[e],delete this.testHelpers[e],delete this.originalMethods[e]}}),Ember.Test.Promise=function(){Ember.RSVP.Promise.apply(this,arguments),Ember.Test.lastPromise=this},Ember.Test.Promise.prototype=Ember.create(Ember.RSVP.Promise.prototype),Ember.Test.Promise.prototype.constructor=Ember.Test.Promise,go=Ember.RSVP.Promise.prototype.then,Ember.Test.Promise.prototype.then=function(r,e){return go.call(this,function(e){return t=r,e=e,Ember.Test.lastPromise=null,n=t(e),i=Ember.Test.lastPromise,n&&n instanceof Ember.Test.Promise||!i?n:(Kl(function(){i=Ember.Test.resolve(i).then(function(){return n})}),i);var t,n,i},e)},Ember.onLoad("Ember.Application",function(e){e.initializer({name:"deferReadiness in `testing` mode",initializ}}),Ember.FEATURES.isEnabled("ember-testing-simple-setup")&&e.initializer({name:"setupForTesting and injectTestHelpers when created with testing = true",initialize:function(e,t){t.testing&&!t.testingSetup&&(t.setupForTesting(),t.injectTestHelpers())}})}),(yo=Ember.$)(function(){Ql(function(){this.checked||yo.event.special.click||(yo.event.special.click={trigge}})}),Q})}),(e=Ember.Test).Adapter=Ember.Object.extend({asyncStart:Ember.K,asyncEnd:Ember.K,exception:function(e){throw e}}),e.QUnitAdapter=e.Adapter.extend({asyncStart:function(){stop()},asyncEnd:function(){start()},exception:function(e){ok(!1,Ember.inspect(e))}}),bo=Ember.get,S=Ember.Test,t=S.registerHelper,M=S.registerAsyncHelper,wo=0,S.pendingAjaxRequests=0,S.onInjectHelpers(function(){Ember.$(document).ajaxStar}),Ember.$(document).ajaxStop(function(){Ember.assert("An ajaxStop event which would cause the number of pending AJAX requests to be negative has been triggered. This is most likely caused by AJAX events that were started before calling `injectTestHelpers()`.",0!==S.pendingAjaxRequests),S.pendingAjaxRequests--})}),M("visit",function(e,t){return Ember.run(e,"advanceReadiness"),e.__container__.lookup("router:main").location.setURL(t),Ember.run(e,e.handleURL,t),Zl(e)}),M("click",function(e,t,n){return t=Xl(e,t,n),Ember.run(t,"mousedown"),t.is(":input")&&"checkbox"!==(n=t.prop("type"))&&"radio"!==n&&"hidden"!==n&&Ember.run(t,function(){!document.hasFocus||document.hasFocus()?this.focus():this.trigger("focusin")}),Ember.run(t,"mouseup"),Ember.run(t,"click"),Zl(e)}),M("keyEvent",function(e,t,n,i,r){return void 0===r&&(r=i,i=n,n=null),t=Xl(e,t,n),n=Ember.$.Event(i,{keyCode:r}),Ember.run(t,"trigger",n),Zl(e)}),M("fillIn",function(e,t,n,i){var r;return void 0===i&&(i=n,n=null),r=Xl(e,t,n),Ember.ru}),Zl(e)}),t("find",Jl),t("findWithAssert",Xl),M("wait",Zl),M("andThen}),Ember.FEATURES.isEnabled("ember-testing-routing-helpers")&&(t("currentRouteName",function(e){return e=e.__container__.lookup("controller:application"),bo(e,"currentRouteName")}),t("currentPath",function(e){return e=e.__container__.lookup("controller:application"),bo(e,"currentPath")}),t("currentURL",function(e){return e=e.__container__.lookup("router:main"),bo(e,"location").getURL()})),Ember.FEATURES.isEnabled("ember-testing-triggerEvent-helper")&&M("triggerEvent",function(e,t,n,i){return"undefined"==typeof method&&(i=n,n=null),t=Xl(e,t,n),Ember.run(t,"trigger",i),Zl(e)}),Ember.StateManager=tc("Ember.StateManager"),Ember.State=tc("Ember.State")}(),define("ember",["jquery.noconflict","handlebars"],function(e){return function(){return e.Ember}}(this)),define("ember.noconflict",["jquery.noconflict","handlebars","ember"],function(){"use strict";var e={imports:{Handlebars:window.Handlebars}};if("undefined"!=typeof window)return void 0===window.Ember?window.Ember=e:void 0!==window.Ember&&window.Ember.hasOwnProperty("imports")?window.Ember.imports.Handlebars=e.imports.Handlebars:window.Ember.imports=e.imports,window.Ember}),!function(e){"use stricttypeof define&&define.amd?define("crypto/md5",[],function(){return t}):e.md5=t}(this),define("cookie",[],function(){"use strict";var e={set:function(e,t,n){var i,n=n?((i=new Date).setTime(i.getTime()+864e5*n),"; expires="+i.toGMTString()):"";document.cookie=e+"="+t+n+"; path=/"},ge},remov}};return"undefined"!=typeof window&&(window.HapyakCookie=e),e}),define("utils.uuid",[],function(){"use strict";var h=function(){for(var e=[],t=0;t<16;t++)e.push(t.toString(16));return e}();return function(}for(var t,n,i,r=e(),a=e(),o=e(),s=e(),l=4,c=new Array(36),d=[4294967295&r,4294905855&a|(l||4)<<12,1073741823&o|2147483648,4294967295&s],u=0,p=0;u<4;u++)for(i=d[u],t=0;t<8;t++)8!==p&&13!==p&&18!==p&&23!==p||(c[p++]="-"),n=i>>>28&15,i=(268435455&i)<<4,c[p++]=h[n];return c.join("")}}),!function(}function et(e,t){var n=typeof t;return e=e.l,"boolean"==n||null==t?e[t]?0:-1:(e=(e=e[n="number"!=n&&"string"!=n?"object":n])&&e["number"==n?t:ct+t],"object"==n?e&&-1<Ze(e,t)?0:-1:e?0:-1)}function o(e){var t,n=this.l,i=typeof e;"boolean"==i||null==e?n[e]=!0:(t="number"==(i="number"!=i&&"string"!=i?"object":i)?e:ct+e,n=n[i]||(n[i]={}),"object"==i?(n[t]||(n[t]=[])).push(e):n[t]=!0)}function tt(e){return e.charCodeAt(0ion st(e,t,n){var i=-1;n=(n=void 0===n?e?e.length:0:n)-(t=t||0)||0;for(var r=Array(n<0?0:n);++i<n;)r[i]=e[t+i];return r}var lt,t=[],n=[],Lt=0,ct=+new Date+"",dt=75,i=40,ut=" \t\v\f\ufeff\n\r\u2028\u2029",Dt=/\b__p\+='';/g,Ot=/\b(__p\+=)''\+/g,Mt=/(__e\(.*?\)|\b__t\))\+'';/g,Nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Rt=/\w*$/,Vt=/^\s*function[ \n\r\t]+\w/,pt=/<%=([\s\S]+?)%>/g,jt=RegExp("^["+ut+"]*0+(?=.$)"),ht=/($^)/,ft=/\bthis\b/,Ht=/['\n\r\t\u2028\u2029\\]/g,qt="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),mt="[object Arguments]",vt="[object Array]",gt="[object Boolean]",yt="[object Date]",bt="[object Function]",wt="[object Number]",Et="[object Object]",kt="[object RegExp]",xt="[object String]",Ct={},_t=(Ct[bt]=!1,{leading:!(Ct[mt]=Ct[vt]=Ct[gt]=Ct[yt]=Ct[wt]=Ct[Et]=Ct[kt]=Ct[xt]=!0),maxWait:0,trailing:!1}),zt={configurable:!1,enumerable:!1,value:null,writable:!1},Tt={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},s={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},St=Tt[typeof window]&&window||this,e=Tt[typeof exports]&&exports&&!exports.nodeType&&exports,r=Tt[typeof module]&&module&&!module.nodeType&&module,l=r&&r.exports===e&&e,a=Tt[typeof global]&&global,At=(!a||a.global!==a&&a.window!==a||(St=a),function R(n){function p(e,t,n){if(e&&Tt[typeof e]){t=t&&void 0===n?t:m(t,n,3);for(var i=-1,r=Tt[typeof e]&&M(e),a=r?r.length:0;++i<a&&!1!==t(e[n=r[i]],n,e););}return e}function h(e,t,n){if(e&&Tt[typeof e])for(var i in t=t&&void 0===n?t:m(t,n,3),e)if(!1===t(e[i],i,e))break;return e}function V(e,t,n){var i,r,a=e;if(e)for(var o=arguments,s=0,l="number"==typeof n?2:o.length;++s<l;)if((r=o[s])&&Tt[typeof r])for(var c=-1,d=Tt[typeof r]&&M(r),u=d?d.length:0;++c<u;)void 0===a[i=d[c]]&&(a[i]=r[i]);return a}function j(e,t,n){var i,r,a=e;if(e){var o,s=arguments,l=0,c="number"==typeof n?2:s.length;for(3<c&&"function"==typeof s[c-2]?o=m(s[--c-1],s[c--],2):2<c&&"function"==typeof s[c-1]&&(o=s[--c]);++l<c;)if((r=s[l])&&Tt[typeof r])for(var d=-1,u=Tt[typeof r]&&M(r),p=u?u.length:0;++d<p;)a[i=__chain__=!!t,this.__wrapped__=e}function H(e,n,i,r,a){if(i){var o=i(e);if(void 0!==o)return o}if(!w(e))return e;var t=S.call(e);if(!Ct[t])return e;var s=D[t];switch(t){case gt:case yt:return new s(+e);case wt:case xt:return new s(e);case kt:return(o=s(e.source,Rt.exec(e))).lastIndex=e.lastIndex,o}if(t=O(e),n){var l=!r;r=r||it(),a=a||it();for(var c=r.length;c--;)if(r[c]==e)return a[c];o=t?s(e.length):{}}else o=t?st(e):j({},e);return t&&(A.call(e,"index")&&(o.index=e.index),A.call(e,"input")&&(o.input=e.input))e,function(e,t){o[t]=unction f(e){return w(e)?Re(e):{}}function m(r,a,e){if("function"!=typeof r)return ye;if(void 0===a||!("prototype"in r))return r;var t,n=r.__bindData__;if(void 0!==n||(n=(n=Be.funcNames?!r.name:n)||!Be.funcDecomp)||(t=De.call(r),(n=Be.funcNames?n:!Vt.test(t))||(n=ft.test(t),$e(r,n))),!1===n||!0!==n&&1&n[1])return r;switch(e){case 1:return function(e){return r.call(a,e)};case 2:return function(e,t){rion(e,t,n){rete,t,n,i){return r.call(a,e,t,n,i)}}return ve(r,a)}function q(e){function n(){var e,t=c?s:this;return a&&(e=st(a),P.apply(e,arguments)),(o||u)&&(e=e||st(arguments),o&&P.apply(e,o),u&&e.length<l)?(r|=16,q([i,p?r:-4&r,e,null,s,l])):(e=e||arguments,d&&(i=t[h]),this instanceof n?(t=f(i.prototype),w(e=i.apply(t,e))?e:t):i.apply(t,e))}var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=1&r,d=2&r,u=4&r,p=8&r,h=i;return $e(n,e),n}function c(e,t){var n,i=-1,r=W(),a=e?e.length:0,o=dt<=a&&r===Ze,s=[];for(o&&((n=nt(t))?(r=et,t=n):o=!1);++i<a;)r(t,n=e[i])<0&&s.push(n);return o&&ot(t),s}function u(e,t,n,i){i=(i||0)-1;for(var r=e?e.length:0,a=[];++i<r;){var o=e[i];if(o&&"object"==typeof o&&"number"==typeof o.length&&(O(o)||G(o))){var s=-1,l=(o=t?o:u(o,t,n)).length,c=a.length;for(a.length+=l;++s<l;)a[c++]=o[s]}else n||a.push(o)}return a}function v(i,e,r,a,o,s){if(r&&void 0!==(u=r(i,e)))return!!u;if(i===e)return 0!==i||1/i==1/e;if(i==i&&!(i&&Tt[typeof i]||e&&Tt[typeof e]))return!1;if(null==i||null==e)return i===e;var t=S.call(i),n=S.call(e);if((t=t==mt?Et:t)!=(n=n==mt?Et:n))return!1;switch(t){case gt:case yt:return+i==+e;case wt:return i!=+i?e!=+e:0==i?1/i==1/e:i==+e;case kt:case xt:return i==_(e)}if(!(n=t==vt)){var l=A.call(i,"__wrapped__"),c=A.call(e,"__wrapped__");if(l||c)return v(l?i.__wrapped__:i,c?e.__wrapped__:e,r,a,o,s);if(t!=Et)return!1;if((t=i.constructor)!=(l=e.constructor)&&!(b(t)&&t instanceof t&&b(l)&&l instanceof l)&&"constructor"in i&&"constructor"in e)return!1}for(t=!o,o=o||it(),s=s||it(),l=o.length;l--;)if(o[l]==i)return s[l]==e;var d=0,u=!0;if(o.push(i),s.push(e),n){if(l=i.length,d=e.length,(u=d==l)||a)for(;d--;)if(n=l,c=e[d],a)for(;n--&&!(u=v(i[n],c,r,a,o,s)););else if(!(ul(i,t)&&v(i[eturn A.call(n,t)?u=-1<--d:void 0});return  z(e,t){return e+Le(Fe()*(t-e+1))}function F(e,t,n){var i=-1,r=W(),a=e?e.length:0,o=[],s=!t&&dt<=a&&r===Ze,l=n||s?it():o;for(s&&(l=nt(l),r=et);++i<a;){var c=e[i],d=n?n(c,i,e):c;(t?!i||l[l.length-1]!==d:r(l,d)<0)&&((n||s)&&l.push(d),o.push(c))}return s?(at(l.k),ot(l)):n&&at(l),o}function B(o){return function(e,i,t){var r={},n=(i=d.createCallback(i,t,3),t=-1,e?e.length:0);if("number"==typeof n)for(;++t<n;){varfunction(e,t,n){o(r,e,i(e,t,n),n)});return r}}function g(e,t,n,i,r,a){var o=1&t,s=4&t,l=16&t,c=32&t;if(!(2&t||b(e)))throw new T;l&&!n.length&&(t&=-17,l=n=!1),c&&!i.length&&(t&=-33,c=i=!1);var d=e&&e.__bindData__;return d&&!0!==d?((d=st(d))[2]&&(d[2]=st(d[2])),d[3]&&(d[3]=st(d[3])),!o||1&d[1]||(d[4]=r),!o&&1&d[1]&&(t|=8),!s||4&d[1]||(d[5]=a),l&&P.apply(d[2]||(d[2]=[]),n),c&&Me.apply(d[3]||(d[3]=[]),i),d[1]|=t,g.apply(null,d)):(1==t||17===t?function(e){function n(){var e,t;return r&&(t=st(r),P.apply(t,arguments)),this instanceof n?(e=f(i.prototype),w(t=i.apply(e,t||arguments))?t:e):i.apply(a,t||arguments)}var i=e[0],r=e[2],a=e[4];return $e(n,e),n}:q)([e,t,n,i,r,a])}function U(e){return Ye[e]}function W(){veturn!(!e||!Tt[typeof e])}function X(e){return"number"==typeof e||e&&"ob(i);++t<i;)r[t]=e[n[t]];return r}function Z(e,t,n){var i=-1,r=W(),a=e?e.length:0,o=!1;return n=(n<0?L(0,a+n):n)||0,O(e)?o=-1<r(e,t,n):"number"==typeof a?o=-1<(e){return++i<n?void 0:!(o=e===t)}),o}function ee(e,i,t){var r=!0,n=(i=d.createCallback(i,t,3),t=-1,e?e.length:0);if("number"==typeof n)for(;+nction(e,t,n){return r=!!i(e,t,n)});return r}function te(e,i,t){var r=[],n=(i=d.createCallback(i,t,3),t=-1,e?e.length:0);if("number"==typeof n)for(;++t<n;){var anction(e,t,n){i(e,t,n)&&r.push(e)});return r}function ne(e,i,t){i=d.createCallback(i,t,3),t=-1;var r,n=e?e.length:0;if("number"!=typeof n)return p(e,function(e,t,n){return i(e,t,n)?(r=e,!1):void 0}),r;for(;++t<n;(e[i],i,e););else p(e,t);return e}function ie(e,i,t){var r=e?e.length:0;if(i=i&&void 0===t?i:m(i,t,3),"number"==typeof r)for(;r--&&!1!==i(e[r],r,ereturn t=ae,t,n){a[++r]=i(e,t,n)});return a}function re(e,i,t){var r=-1/0,a=r;if(null==(i="function"!=typeof i&&t&&t[i]===e?null:i)&&O(e)){t=-1;for(var n=e.length;++t<n;){var o=e[t];a<o&&(a=o)}}else i=null==i&&s(e,t,n){t=i(e,t,n),r<t&&(r=t,a=e)});return a}function ae(e,i,r,t){if(e){var a=arguments.length<3,n=(i=d.createCallback(i,t,4),-1),o=e.length;if("number"==typeof o)for(a&&(r=e[++n]);++n<o;)r=i(r,e[n],n,e);else p(e,function(e,t,n){ t=z(0,++n);i[n]=i[t],i[t]=e}),i}function le(e,i,t){i=d.createCallback(i,t,3),t=-1;var r,n=e?e.length:0;if("number"==typeof n)for(;nction(e,t,0]:lt;return st(e,0,qe(L(0,i),r))}function de(e,t,n){if("number"==typeof n){var i=e?e.length:0;n=n<0?L(0,i+n):n||0}else if(n)return e[n=i=r+a>>>1])<t?r=i+1:a=i;return r}function he(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),F(e,t,n=null!=n?d.createCallback(n,i,3):n)}function fe(){for(var e=1<arguments.length?arguments:arguments[0],t=-1,n=e?re(Je(e,"length")):0,i=x(n<0ts,2),null,t):g(e=i.apply(u,s),p||l||(s=u=null)))}var s,l,c,d,u,p,h,f,m=0,v=!1,g=!0;if(b(i))return r=L(0,r)||0,!0===e?g=!(f=!0):w(e)&&(f=e.leading,v="maxWait"in e&&(L(r,e.maxWait)||0),g="trailing"in e?e.trailing:g),function(){var e,t,n;return s=arguments,d=N(),u=this,h=g&&(p||!f),!1===v?e=f&&!p:(n=(t=v-(d-(m=l||f?m:d)))<=0)?(l=l&&Ie(l),m=d,c=i.apply(u,s)):l=l||I(a,t),n&&p?p=Ie(p):p||r===v||(p=I(o,r)),e&&(n=!0,c=i.apply(u,s)),!row new T}function ye(e){return e}function be(r,t,e){var a=!0,n=t&&y(t),o=(t&&(e||n.length)||(null==e&&(e=t),o=l,t=r,r=d,n=y(t)),!1===e?a=!1:w(e)&&"cha=new o(n)).__chaion ke(){return this.__wrapped__}var x=(n=n?At.defaults(St.Object(),n,At.pick(St,qt)):St).Array,xe=n.Boolean,Ce=n.Date,_e=n.Function,e=n.Math,Te=n.Number,r=n.Object,C=n.RegExp,_=n.String,T=n.TypeError,a=[],t=r.prototype,Se=n._,S=t.toString,Ae=C("^"+_(S).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Pe=e.ceil,Ie=n.clearTimeout,Le=e.floor,De=_e.prototype.toString,o=i(o=r.getPrototypeOf)&&o,A=t.hasOwnProperty,P=a.push,I=n.setT,n=t(e,e,e)&&t}catch(e){}return n}(),Re=i(Re=r.create)&&Re,t=i(t=x.isArray)&&t,Ve=n.isFinite,je=n.isNaN,He=i(He=r.keys)&&He,L=e.max,qe=e.min,ze=n.parseInt,Fe=e.random,D={},Be=(D[vt]=x,D[gt]=xe,D[yt]=Ce,D[bt]=_e,D[Et]=r,D[wt]=Te,D[kt]=C,D[xt]=_,l.prototype=d.prototype,d.support={});function Ue(){}Be.funcDecomp=!i(n.a)&&ft.test(R),Be.funcNames="string"==typeof _e.name,d.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:pt,Ue.prototype=t.value=ypeof?function(e){return w(e)?He(e):[]}:function(e){var t,n=[];if(e&&Tt[typeof e])for(t in e)A.call(e,t)&&n.push(t);return n},Ye={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ge=Q(Ye),Ke=C("("+M(Ge).join("|")+")","g"),Qe=C("["+M(Ye).join("")+"]","g"),Xe=o?function(e){var t,n;return!(!e||S.call(e)!=Et)&&((n=i(t=e.valueOf)&&(n=o(t))(e,t,nA.call(t)}),Te=B(function(e,t,nction(){return(new  ze(s(e)?e.replace(jt,""):e,t||0)};return d.<1?t.apply(this,arguments):void 0};throw new T},d.assign=j,d.at=function(e){for(var t=-1,n=u(i=arguments,!0,!1,1),i=i[2]&&i[2][i[1]]===e?1:n.length,r=x(i);++t<i;)r[t]=e[nr]=g(e[r],nts,2),nreturn(e=new l(e)).__chain__=!0,e},d.compact=function(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t[n[t].applyon(e){return functionion(e,t){return e=f(e),t?j(e,t):e},d.createCallback=function(i,e,t){var r,n,a,o=typeof i;return null==i||"function"==o?m(i,e,t):"object"!=o?Ee(i):(r=M(i),n=rn e=e[n],anumber"==typeof t?t:+t||e.length)},d.debounce=ge,d.defaults=V,d.defer=function(e){var t;if(b(e))return t=st(arguments,1),I(function(){e.apply(lt,t)},1);throw new T},d.delay=function(e,t){var n;if(b(e))return n=st(arguments,2),I(function(){e.apply(l{return c(e,u(arguments,!0,!0,1))},d.filter=te,d.flatten=function(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),u(e=null!=n?k(e,n,i):e,t)},d.forEach=E,d.forEachRight=ie,d.forIn=h,d.forInRight=function(e,t,n){var i=[],r=(h(e,function(e,t){i.push(t,e)}),i.length);for(t=m(t,n,3);r--&&!1!==t(i[r--],i[r],e););return e},d.forOwn=p,d.forOwnRight=K,d.functions=y,d||i;return st(e,0,qe(L(0,r-i),r))},d.intersection=function(){for(var e=[],t=-1,n=arguments.length,i=it(),r=W(),a=r===Ze,o=it();++t<n;)(O(u=arguments[t])||G(u))&&(e.push(u),i.push(a&&u.length>=dt&&nt(t?e[t]:o)));var s=-1,l=(a=e[0])?a.length:0,c=[];e:for(;++s<l;){var d=i[0],u=a[s];if((d?et(d,u):r(o,u))<0){for(t=n,(d||o).push(u);--t;)if(((d=i[t])?et(d,u):r(e[t],u))<0)continue e;c.push(u)}}for(;n--;)(d=i[n])&&ot(d);return {o[++i]=(r?t:e[t]).apply(e,n)function(e,t,n){r[t]=i(e,t,n)}),re[t]:e[t]=n.apply(this,arguments)}if(b(n))return r.cache={},r;throw new T},d.merge=function(e){var t,n=arguments,i=2;if(w(e)){3<(i="number"!=typeof n[2]?n.length:i)&&"function"==typeof n[i-2]?t=m(n[--i-1],n[i--],2):2<i&&"function"==typeof n[i-1]&&(t=n[--i]);for(var n=st(arguments,1,i),r=-1,a=it(),o=it();++r<i;)!function s(l,e,c,d,u){(O(e)?E:p)(e,function(e,t){var n,i,r,a=e,o=l[t];if(e&&((i=O(e))||Xe(e))){for(a=d.length;a--;)if(n=d[a]==e){o=u[a];break}n||(c&&(r=void 0!==(a=c(o,e)))&&(o=a),r||(o=i?O(o)?o:[]:Xe(o)?o:{}),d.push(e),u.push(o),r||s(o,e,c,d,u))}else void 0!==(a=c&&void 0===(a=c(o,e))?e:a)&&(o=a);l[t]=o})}(e,n[r],t,a,o);at(a),at(o)}return e},d.min=function(e,i,t){var r=1/0,a=r;if(null==(i="function"!=typeof i&&t&&t[i]===e?null:i)&&O(e)){t=-1;for(var n=e.length;++t<n;){var o=e[t];o<a&&(a=o)}}else i=null==i&&s(e,t,n){(t=i(e,t,n,n){i(e,t,n)||(r[t]=e)});return r},d.once=e.apply(this,argumentvar a=n[t]e){return g(e,1turn g(,n){i(e,t,n)&&(r[t]=e)});return &&(Oe.call(e,a--,1),r--);return e},d.range=function(e,t,n){e=+e||0,null==t&&(t=e,e=0);var i=-1;t=L(0,Pe((t-e)/((n="number"==typeof n?n:+n||1)||1)));for(var r=x(t);++ifunction(n),Oe.call(e,i--,1),r--);return [n]=e.d.tap=function(e,t){return t(e),e},d.throttle=function(e,t,n){var i=!0,r=!0;if(b(e))return!1===n?i=!1:w(n)&&(i="leading"in n?n.leading:i,r="trailing"in n?n.trailing:r),_t.leading=i,_t.maxWait=t,_t.trailing(t,n,1);++number"==typeof e.length?st:J)(e)},d.transform=function(e,i,r,t){var n,a=O(e);return null==r&&(r=a?[]:f((n=e&&e.constructor)&&n.prototype)),i&&(ifunction(e,t,on(){return F(u(arguments,!0,!0))},d.uniq=on(e){r=function(e,t){return g(t,16,[e])},d.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n,i=arguments[e];(O(i)||G(i))&&(n=n?F(c(n,i).concat(c(i,n))):i)}return n||[]},d.zip=fe,d.zipObject=me,d.collect=k,d.drop=ue,d.each=E,d.eachRight=ie,d.extend=j,d.methods=y,d.object=me,d.select=te,d.tail=ue,d.t,"function"0,"function"==typeof t&&m(t,n,1))},d.contains=Z,d.escape=function(e){return null==e?"":_(e).replace(Qe,U))if(t(e[i],i,e))return i;return-1},d.findKey=function(e,i,t){var r;return i=d.createCallback(i,t,3),p(e,function(e,t,n){return i(e,t,n)?(r=t,!1):void 0}),r},d.findLast=function(e,i,t){var r;return i=d.createCallback(i,t,3),ie(e,function(e,t,n){return i(e,t,n)?(r)if(t(e[i],i,eturn iction(e,t){return!!e&&A.call(e,t)},d.identity=ye,d.indexOf=de,d.isAect"==typeof e&&S.call(e)==gt||!1},d.isDate=function(e){return e&&"object"==typeofn(e){return e&&1===e.nodeType||!1},d.isEmpty=function(e){var t,n,i=!0;return e?(t=S.call(e),n=e.length,t==vt||t==xt||t==mt||t==Et&&"numbe)?!n:(p(e,functiot,"function{return Ve(e)&&!je(parsaN=functisNull=function(e){return null===e},d.isNumber=X,d.isObjeect"==typeof e&&S.call(e)==ned=function(e--;)if(e[i]===t)return iict=function(){return n._=Se,this},d.noo-"+((n+"").length-1))),t)):z(e,t)},d.reduce=ae,d.reduceRight=oe,d.result=function(e,t){var n;if(e)return b(n=e[t])n"number"==typeof t?t:M(e).length},d.some=le,d.sortedIndex=pe,d.template=function(o,e,t){var n=d.templateSettings;o=_(o||""),t=V({},t,n);var s,i=V({},t.imports,n.imports),n=M(i),i=J(i),l=0,r=t.interpolate||ht,c="__p+='",r=C((t.escape||ht).source+"|"+r.source+"|"+(r===pt?Nt:ht).source+"|"+(t.evaluate==null?'':__t)+'"),l=a+e.length,e}),c+="';",(r=t=t.variable)||(c="with("+(t="obj")+"){"+c+"}"),c=(s?c.replace(Dt,""):c).replace(Ot,"$1").replace(Mt,"$1;"),c="function("+t+"){"+(r?"":t+"||("+t+"={});")+"var __t,__p='',__e=_.escape"+(s?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}";try{var a=_e(n,"return "+c).apply(lt,i)}catch(e){throw e.source=c,e}returnurn null==er t=++Lt;return _(null==e?"":e)+t},d.all=ee,d.any=le,d.detect=ne,d.findWhere=ne,d.foldl=ae,d.foldr=oe,d.ion(e,t){d.prototype[t]||(Wee?e[r-1]:lt;return st(e,L(0,r-i))},d.sample=function(e,t,n){return e&&"number"!=typeof e.length&&(e=J(e)),null==t||n?e?e[z(0,e.length-1)]:lt:((e=se(e)).length=qe(L(0,t),e.lnction"==typeof e)?new l(i,n):i})}),dn(){return this.__chain__=!0,this},d.prototype.toString=function(){return _(this.__wrapped__)},d.prototype.value=ke,d.prototype.varguments);return e?new l(t,e):t}}),E([this.__wrapped__,arguments),thiped__,arguments),this.__chain__)}}),d}());"function"==typeof define&&"object"==typeof define.amd&&define.amd?(St._=At,define("lodash",[],function(){return At})):e&&r?l?(r.exports=At)._=At:e._=At:St._=At}.call(this),defuse strict";return e.noConflict()}),define("utils.omitinvalid",["lodash.noconflict"],function(t){"use strict";function n(e){return!t.isBoolean(e)&&!t.isNumber(e)&&t.isEmpty(e)}return function(e){return t.omit(e,n)}}),define("utils.embed",["module","lodash.noconflict","promise!configuration"],function(e,l,c,d){"use strict";var u=/^(?:https?\:\/|\/)\/(?:[a-z]\.|[a-z][a-z0-9-]{0,61}[a-z0-9]\.)*?[\w\d\.\/_-]+\.css(?:\?[^?]*)?$/i,p=/_([0-9]+)\.css/i,h=navigator.userAgent.match(/iP(od|ad|hone)/),f=e.config();return{dotget:function(e,t,n){var i;if(e&&t){for(var r=t.split(".");e&&r.length;)e=e[r.shift()];i=e}return i!==d?i:n},checkLtiUserAccess:function(e,t){var n,i,r;e&&(r=e.next_url,n=window.location.pathname,i=this.get("controller.controllers.application"),r&&r.replace(location.protocol+hapyak.rootUrl,"")===n||"experience.edit"===t&&e.createdNewExperience||"/portal/lti/new"===n||!i||(r=e.experience_id||i.get("lti_context.experienceId"))&&n==="/portal/experiences/"+r||i.send("navAction","logout"))},controlStyle:function(e,t){var n,i=59,r=f.controlStyle||this.dotget(c,"player.viewer.controlStyle")||"bottom",a=this.dotget(c,"player.editor.controlStyle"),o=r,s={overlay:"/css/generated/control_overlay.css",light_bottom:"/css/generated/control_bottom.css",default:"/css/generated/control_bottom.css"};return h&&t&&(r=o="overlay"),f.edit?a&&a.match(u)?(o="custom",n=a.match(p),l.isArray(n)&&2===n.length&&(i=+n[1]),r=a):o="default":("overlay"===r?i=h?37:0:"light_bottom"===r?i=37:r&&r.match(u)?(o="custom",n=r.match(p),l.isArray(n)&&2===n.length&&(i=+n[1])):o="default",i=f.controlBarHeight!==d?f.controlBarHeight:this.dotget(c,"player.viewer.controlBarHeight",i)),e&&("custom"===o?hapyak.asset.css(r):hapyak.asset.css(hapyak.assets+s[o])),i},getQueryParams:function(e,i){var r={},t=e&&e.indexOf("?");return t!==d&&-1!==t&&e.substr(t+1).split("&").forEach(function(e){var t=e.split("="),n=t[0];(e&&i===d||0===n.indexOf(i))&&(i&&(n=n.replace(i,"")),2===t.length&&(r[n]=decodeURIComponent(t[1]. 0===e.indexOf("//")?"https:"+e:e},shortDate:function(e,t){var n;if(e)return n=(e=e instanceof Date?e:new Date(e)).getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear(),void 0===t||24!=+t&&t?void 0!==t&&(n+=" "+(e.getHours()%12||12)+":"+((t=e.getMinutes())<10?"0"+t:t)+" "+(e.getHours()<12?"AM":"PM")):n+=" "+e.getHours()+":"+e.getMinutes(),n}}}),define("logging",["require","module","promise!configuration","cookie","utils.uuid","utils.omitinvalid","lodash.noconflict","utils.embed"],function(e,t,n,i,r,a,o,s){"use strict";var l,c="metrics"===t.config().logLevel,d={log:function(){var e;arguments.length&&window.console&&window.console.log&&((e=[].slice.apply(arguments))[0]="interactivity: "+e[0],window.console.log.apply?window.console.log.apply(window.console,e):window.console.log(e[0]))},info:function(){var e;l>d.logLevels.indexOf("info")||arguments.length&&window.console&&window.console.info&&((e=[].slice.apply(arguments))[0]="interactivity (i): "+e[0],window.console.info.apply?window.console.info.apply(window.console,e):window.console.info(e[0]))},error:function(){var e;l>d.logLevels.indexOf("error")||arguments.length&&window.console&&window.console.error&&((e=[].slice.apply(arguments))[0]="interactivity (e): "+e[0],window.console.error.apply?window.console.error.apply(window.console,e):window.console.error(e[0]))},warn:function(){var e;l>d.logLevels.indexOf("warn")||arguments.length&&window.console&&window.console.warn&&((e=[].slice.apply(arguments))[0]="interactivity (w): "+e[0],window.console.warn.apply?window.console.warn.apply(window.console,e):window.console.warn(e[0]))},trace:function(){var e;l>d.logLevels.indexOf("trace")||arguments.length&&window.console&&window.console.trace&&((e=[].slice.apply(arguments))[0]="interactivity (t): "+e[0],window.console.trace.apply?window.console.trace.apply(window.console,e):window.console.trace(e[0]))},debug:function(){var e;l>d.logLevels.indexOf("debug")||arguments.length&&window.console&&window.console.debug&&((e=[].slice.apply(arguments))[0]="interactivity (d): "+e[0],window.console.debug.apply?window.console.debug.apply(window.console,e):window.console.debug(e[0]))},dev:function(){var e;"dev"===t.config().environment&&arguments.length&&window.console&&window.console.info&&((e=[].slice.apply(arguments))[0]="interactivity (!): "+e[0],window.console.info.apply?window.console.info.apply(window.console,e):window.console.info(e[0]))},logMethod:function(){var e,t,n;arguments.length&&c&&(t=(e=Array.prototype.slice.call(arguments,0))[1],n=e[2],o.isString(e[0])&&(e[0]="interactivityAnalytics."+e[0]+"()"),d.dev.apply(this,t&&n?[e[0],t,n]:e))},captureException:function(e){d.error(e)},captureMessage:function(e){d.warn(e)},logLevels:["trace","metrics","debug","info","warn","error"]};return"undefined"!=typeof window&&Object.defineProperty(window,"haplog",{get:function(){return d.warn("Deprecation warning:  window.haplog.tracking is no longer supported.   Please use hapyak.tracking.getInstance() instead."),{tracking:hapyak.tracking.getInstance()}}}),n=d.logLevels.indexOf(n.player.logLevel),l=-1<n?n:d.logLevels.indexOf(t.config().logLevel),d.logLevel=l,-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&void 0!==window.console&&(void 0!==window.console.log&&l<=d.logLevels.indexOf("debug")&&(d.log=window.console.log.bind(window.console,"interactivity:")),void 0!==window.console.trace&&l<=d.logLevels.indexOf("trace")&&(d.trace=window.console.trace.bind(window.console,"interactivity (t):")),void 0!==window.console.debug&&l<=d.logLevels.indexOf("debug")&&(d.debug=window.console.debug.bind(window.console,"interactivity (d):")),void 0!==window.console.info&&l<=d.logLevels.indexOf("info")&&(d.info=window.console.info.bind(window.console,"interactivity (i):"),"dev"===t.config().environment&&(d.dev=window.console.info.bind(window.console,"interactivity (!):"))),void 0!==window.console.warn&&l<=d.logLevels.indexOf("warn")&&(d.warn=window.console.warn.bind(window.console,"interactivity (w):")),void 0!==window.console.error&&l<=d.logLevels.indexOf("error")&&(d.error=window.console.error.bind(window.console,"interactivity (e):"))),d}),!function(e,u){"use strict";function i(e,t){var n,i,r=e.toLowerCase();for(t=[].concat(t),n=0;t.length>n;n+=1)if(i=t[n]){if(i.test&&i.test(e))return 1;if(i.toLowerCase()===r)return 1}}function n(e){return+e||0}function a(e,t){if(t<1)return"";for(var n="";0<t;)1&t&&(n+=e),t>>=1,e+=e;return n}function r(e){return null==e?"\\s":e.source||"["+m.escapeRegExp(e)+"]"}var t,o=u.prototype.trim,s=u.prototype.trimRight,l=u.prototype.trimLeft,c=[].slice,d={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},p={};for(t in d)p[d[t]]=t;p["'"]="#39";h=a,g.format=function(e,t){for(var n,i,r,a,o,s=1,l=e.length,c=[],d=0;d<l;d++)if("string"===(o=v(e[d])))c.push(e[d]);else if("array"===o){if((r=e[d])[2])for(n=t[s],i=0;r[2].length>i;i++){if(!n.hasOwnProperty(r[2][i]))throw new Error(f('[_.sprintf] property "%s" does not exist',r[2][i]));n=n[r[2][i]]}else n=r[1]?t[r[1]]:t[s++];if(/[^s]/.test(r[8])&&"number"!=v(n))throw new Error(f("[_.sprintf] expecting number but found %s",v(n)));switch(r[8]){case"b":n=n.toString(2);break;case"c":n=u.fromCharCode(n);break;case"d":n=parseInt(n,10);break;case"e":n=r[7]?n.toExponential(r[7]):n.toExponential();break;case"f":n=r[7]?parseFloat(n).toFixed(r[7]):parseFloat(n);break;case"o":n=n.toString(8);break;case"s":n=(n=u(n))&&r[7]?n.substring(0,r[7]):n;break;case"u":n=Math.abs(n);break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}n=/[def]/.test(r[8])&&r[3]&&0<=n?"+"+n:n,o=r[4]?"0"==r[4]?"0":r[4].charAt(1):" ",a=r[6]-u(n).length,o=r[6]?h(o,a):"",c.push(r[5]?n+o:o+n)}return c.join("")},g.cache={},g.parse=function(e){for(var t=e,n=[],i=[],r=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("[_.sprintf] huh?");if(n[2]){r|=1;var a=[],o=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(o)))throw new Error("[_.sprintf] huh?");for(a.push(s[1]);""!==(o=o.substring(s[0].length));){if(null===(s=/^\.([a-z_][a-z_\d]*)/i.exec(o))&&null===(s=/^\[(\d+)\]/.exec(o)))throw new Error("[_.sprintf] huh?");a.push(s[1])}n[2]=a}else r|=2;if(3===r)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");i.push(n)}t=t.substring(n[0].length)}return i};var h,f=g,m={VERSION:"2.3.0",isBlank:function(e){return/^\s*$/.test(e=null==e?"":e)},stripTags:function(e){return null==e?"":u(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return(e=null==e?"":u(e)).charAt(0).toUpperCase()+e.slice(1)},chop:function(e,t){return null==e?[]:(e=u(e),0<(t=~~t)?e.match(new Regrn m.strip(e).replace(/\s+/g," ")},count:function(e,t){if(null==e||null==t)return 0;e=u(e);for(var n=0,i=0,r=(t=u(t)).length;-1!==(i=e.indexOf(t,i));)n++,i+=r;return n},chars:function(e){return ne.toLowerCa,function(e){+)$/))?u.from.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,n,i){e=m.chars(e);return e.spn(e,t,n){return m.splice(e,t,0,n)},include:function(e,t){return""===t||null!=e&&-1!==u(e).indexOf(t)},join:function(){var e=c.call(arguments),t=e.shift();reeturn nuurn m.chars(e).reverse().join("")},startsWith:function(e,t){return""===t||null!=e&&null!=t&&(e=u(e),t=u(t),e.length>=t.length&&e.slice(0,t.length)===t)},endsWith:function(e,t){return""===t||null!=e&&null!=t&&(e=u(e),t=u(t),e.length>=t.length&&e.slice(e.length-t.length)===t)},succ:function(e){return null==e?"":(e=u(e)).slice(0,-1)+u.fromCharCode(e.charCodeAt(e.length-1)+1)},titleize:function(e){return null==e?"":(e=u(e).toLowerCase()).replace(/(?:^|\s|-)\S/g,function(e){,t){return t?t.toUpperCase():""})},underscored:function(e){return m.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\sace(/[-_\(/[\W_]/gace(/egExp(eplace).replace(new RegExp(t+"+$"),""))},truncate:function(e,t,n){return null==e?"":(n=n||"...",(e=u(e)).length>(t=~~t)?e.slice(0,t)+n:e)},prune:function(e,t,n){return null==e?"":(e=u(e),t=~~t,n=null!=n?u(n):"...",t>=e.length||((t=(t=e.slrCase()!==e.toLowerCase()?"A":" "})).slice(t.length-2).match(/\w\w/)?t.replace(/\s*\S+$/,""):m.rtrim(t.slice(0,t.length-1)))+n).length>e.lenge)?[]:m.trim(e,t).split(t||/\s+/)},pad:function(e,t,n,i){e=null==e?"":u(e),t=~~t;var r=0;switch(n?1<n.length&&(n=n.charAt(0)):n=" ",i){case"right":return r=t-e.length,e+a(n,r);case"both":return r=t-e.length,a(n,Math.ceil(r/2))+e+a(n,Math.floor(r/2));default:rnction(e,t,n){return m.pad(e,t,n)},rpad:function(e,t,n){return m.pad(e,t,n,"right")},lrpad:function(e,t,n){return m.padturn t.unshift(e),f.apply(null,t)},toNumber:function(e,t){return e?(e=m.trim(e)).match(/^-?\d+(?:\.\d+)?$/)?n((+e||0).toFixed(~~t)):NaN:0},numberFormat:function(e,t,n,i){if(isNaN(e)||null==e)return"";i="string"==typeof i?i:",";t=(e=e.toFixed(~~t)).split("."),e=t[0],n=t[1]?(n||".")+t[1]:"";return e.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+i)+n},strRight:function(e,t){if(null==e)return"";e=u(e);var n=(t=null!=t?u(t):t)?e.indexOf(t):-1;return~n?e.slice(n+t.length,e.length):e},strRightBack:function(e,t){if(null==e)return"";e=u(e);var n=(t=null!=t?u(t):t)?e.lastIndexOf(t):-1;return~n?e.slice(n+t.length,e.length):e},strLeft:function(e,t){if(null==e)return"";e=u(e);t=(t=null!=t?u(t):t)?e.indexOf(t):-1;return~t?e.slice(0,t):e},strLeftBack:function(e,t){return null==e?"":~(t=(e+="").lastIndexOf(t=null!=t?""+t:t))?e.slice(0,t):e},toSentence:function(e,t,n,i){t=t||", ",n=n||" and ";var r=e.slice(),a=r.pop();return 2<e.length&&i&&(n=m.rtrim(t)+n),r.lengthn e[3]=!0,m.toSentence.apply(m,e)},slugify:function(e){var t,n;return null==e?"":(t="",n=new RegExp(r(t),"g"),e=u(e).toLowerCase().replace(n,function(e){e=t.indexOf(e);return"aaaaaaaaaceeeeeiiiilnoooooosstuuuueplacereturn[t,e,t].join("")},quote:function(e,t){return m.surround(e,t||'"')},unquote:function(e,t){return e[0]===(t=t||'"')&&e[e.length-1]===t?e.slice(1,e.length-1):e},exports:function(){var e,t={};for(e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse)$/)&&(t[e]=this[e]);return t},repeat:function(e,t,n){if(null==e)return"";if(t=~~t,null==n)return a(u(e),t);for(var i=[];0<t;i[--t]=e);return i.join(n)},naturalCmp:function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=/(\.\d+)|(\d+)|(\D+)/g,i=u(e).toLowerCase().match(n),r=u(t).toLowerCase().match(n),a=Math.min(i.length,r.length),o=0;o<a;o++){var s=i[o],l=r[o];if(s!==l){var c=parseInt(s,10);if(!isNaN(c)){var d=parseInt(l,10);if(!isNaN(d)&&c-d)return c-d}return s<l?harAt(a-1)?n:Math.min(r[o],r[o-1],n)+1:a+o,n=r[o],r[o]=i;return r.pop()},toBoolean:function(e,t,n){return"string"!=typeof(e="number"==typeof e?""+e:erse(arguments[0])),g.format.call(null,g.cache[arguments[0]],arguments)}m.strip=m.trim,m.lstrip=m.ltrim,m.rstrip=m.rtrim,m.center=m.lrpad,m.rjust=m.lpad,m.ljust=m.rpad,m.contains=m.include,m.q=m.quote,m.toBool=m.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=m),exports._s=m),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return m}),e._=e._||{},e._.string=e._.str=m}(this,String),define("underscore.pullAt",["module"],function(R){"use strict";var i="__lodash_hash_undefined__",n=1/0,r=9007199254740991,V="[object Arguments]",j="[object Function]",H="[object GeneratorFunction]",q="[object Symbol]",z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,F=/^\w*$/,B=/^\./,U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,W=/\\(\\)?/g,$=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,e="object"==typeof global&&global&&global.Object===Object&&global,t="object"==typeof self&&self&&self.Object===Object&&self,e=e||t||Function("return this")();var t=Array.prototype,a=Function.prototype,o=Object.prototype,s=e["__core-js_shared__"],l=(s=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"",c=a.toString,d=o.hasOwnProperty,u=o.toString,G=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),s=e.Symbol,K=o.propertyIsEnumerable,p=t.splice,h=s?s.isConcatSpreadable:void 0,f=Math.max,Q=C(e,"Map"),m=C(Object,"create"),a=s?s.prototype:void 0,v=a?a.toString:void 0;function g(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function y(e){var t=-1i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function =i?void 0:functiory{return c.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function Z(e,t){for(var n,i=e?t.length:0,r=i-1;i--;){var a,o,s=t[i];i!=r&&s===a||(_(a=s)?p.call(e,s,1):T(s,e)?delete e[S(s)]:(s=k(s),o=e,null!=(o=1==(n=s).length?o:E(o,function(e,t,n){var i=-1,r=e.length;t<0&&(t=r<-t?0:r+t);(n=r<n?r:n)<0&&(n+=r);r=n<t?0:n-t>>>0,t>>>=0;var a=Array(r);for(;++i<r;)a[i]=e[i+t];return a}(p}function C(e,t){t=t;e=null==(e=e)?void 0:e[t];return J(e)?e:void 0}functioneturn null!=e&&function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=r}(e.length)&&!D(e)}(e)}(t=e)&&d.calturn(t=null==t?r:t)&&("number"==typeof e||Y.test(e))&&-1<e&&e%1==0&&e<t}function T(e,t){var n;if(!L(e))return"number"==(n=typeof e)||"symbol"==n||"boolean"==n||null==e||e in Object(t))}g.prototype.delete=,n=this.__data__.has=function(e)totype.set=functio]=m&&void 0===t?i:t_data__;return!(e.get=function(evoid 0:t[e][1]},t){var n=this.__da.clear=function(){this.__data__={hash:new g,map:new(Q||y),string:new g}},b.prototype.delete=function(e){return x(this,e).delete(n x(this,e).get(e).has(e)(,s[0],s[1]);case 3:returd.length,h=c.length;++u<p;)c[h+u]=d[u]}else foy(i);++n<i;)r[n]=t(e[n],n,e);return r}(t,func=i.apply(this,e),a.cache=n.se=typeof e}function N(e){return"symbol"==typeof e||M(e)&&u.call(e)==q}return ie}),define("lodash.extended.noconflict",["lodash","underscore.string","underscore.pullAt"],fue:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}}),e.noConflict()}),define("utils.support",["lodash.extended.noconflict"],function(n){"use strict";return{mailTo:function(e,t){return e=n.str.trim(e),(t=n.str.trim(t)).length||(t="HapYak Support Request"),"mailto:info@hapyak.com?subject="+encodeURIComponenction(t){try{return t.replace(/[^\x00-\x7F]+/gi,"-")}catch(e){return t}}}}),define("analytics.distinctids",["logging","promise!configuration","module","cookie","lodash","utils.uuid","utils.embed"],function(i,e,t,n,r,a,o){"use strict";var s=m,l={CrossDomainCookieDistinctIdProvider:m,NonPersistentDistinctIdProvider:v},c=e.analytics&&e.analytics.distinctids||ru:0,iu:0}}function m(){this._init()}function v(){this._userInfo=f()}return m.prototype={STATES:{UNLOADED:"UNLOADED",LOADING:"LOADING",LOADED:"LOADED",TIMEDOUT:"TIMEDOUT"},_init:function(){this._userInfo=f(),this._state=this.STATES.UNLOADED,this._callbacks={},this._timeoutId=null,this._iframeElement=null,this._iframeId=h(),this._iframeStyle=o.dotget(c,"provider.iframeStyle")||"position: absolute; width:0; height:0; border:0; border:none",this._timeoutDurationMs=o.dotget(c,"provider.iframeTimeout")||2e3,this._host=this._getDistinctIdHost(),this._distinctIdStubPage=o.dotget(c,"provider.distinctIdStubPage")||this._host+("dev"===u?"/distinct-id.html":"/latest/distinct-id.html"),this._activatedThisSession=!1,i.debug("distinctids _init",d)},_getDistinctIdHost:function(){return hapyak.assets},_load:function(){i.debug("[distinctids] _load out(function(){i.error("[distinctids] Load Timeout"),n._onLoadTimeout()},this._timeoutDurationMs),window.addEventListener("message",function(t){var e;if(n._state===n.STATES.TIMEDOUT)i.debug("[distinctids] ignoring message on timeout");else if(n._iframeElement.contentWindow===t.source){try{e=JSON.parse(t.data)}catch(e){i.error("[distinctids] Error parsing data",e,t.data)}n._timeoutId&&window.clearInterval(n._timeoutId),n._userInfo=e,n._state=n.STATES.LOADED,n._invokeCallbacks("getIdInfo",null,n._userInfo)}}),this._state=this.STATES.LOADING,this._injectIFrame()},_onLoadTimeout:function(){this._state=this.STATES.TIMEDOUT,this._userInfo=f(),this._userInfo.uid=h(),this._invokeCallbacks("getIdInfo",{code:"timeout",message:"Load timedout after "+this._timeoutDurationMs},this._userInfo)},_injectIFrame:function(){i.debug("[distinctids] _injectIFrame"),this._iframeElement=document.createElement("iframe"),this._iframeElement.setAttribute("id",this._iframeId),this._iframeElement.setAttribute("style",this._iframeStyle),document.body.appendChild(this._iframeElement),this._iframeElement.setAttribute("src",this._distinctIdStubPage)},_invokeCallbacks:function(e,t,n){i.debug("[distinctids] _invokeCallbacks");e=this._callbacks[e];r.forEach(e,function(e){e(t,n)})},getIdInfo:function(e){var t=this;i.debug("[distinctids] getIdInfo, state= "+this._state),this._state===this.STATES.LOADED||this._state===this.STATES.TIMEDOUT?window.setTimeout(function(){e(null,t._userInfo)},0):(this._state!==this.STATES.LOADING&&this._state!==this.STATES.UNLOADED||(this._callbacks.getIdInfo=this._callbacks.getIdInfo||[],this._callbacks.getIdInfo.push(e)),this._state===this.STATES.UNLOADED&&this._load())},setActivatedUser:function(){i.debug("[distinctids] setActivatedUser"),this._activatedThisSession||(this._activatedThisSession=!0,this._userInfo.iu++,this._iframeElement.contentWindow&&this._state===this.STATES.LOADED?this._iframeElement.contentWindow.postMessage(JSON.stringify({source:"hapyak-distinct-id",command:"set_iu"}),this._host):i.warn("Unable to set activated user"))}},v.prototype={gthis._userInfo.uid=h(},setActivatedUser:function(){i.debug("[distinctids] setActivatedUser")}},{getInstance:function(){var e;return i.debug("[distinctids] getInstance"),null===p&&(e=l[o.dotget(c,"provider.name")]||s,i.debug("[distinctids] Creating new instance using "+e),p=new e),p}}}),define("dao",["module","jquery.noconflict","crypto/md5","logging","lodash.noconflict","ember.noconflict","utils.support","utils.embed","promise!configuration","analytics.distinctids"],function(d,u,p,h,f,e,o,m,s,l){"use strict";var v,g,c,y=d.config().jsonp||-1===window.location.href.indexOf(d.config().api),b=[],w=d.config().queryCache,t=d.config().apiCdn,E=["/api/srt/"],i=d.config().readOnly||!1,k={"X-Hapyak-Partner-Group":"groupId","X-Hapyak-Partner-Group-Token":"groupToken","X-Hapyak-Partner-User":"userId","X-Hapyak-Partner-Username":"username","X-Hapyak-Partner-User-Token":"userToken"},x={partner_group:"groupId",partner_group_token:"groupToken",partner_user:"userId",partner_username:"username",partner_user_token:"userToken"};d.config().viewerMode&&(c=function(e){for(var t={Experience:[e.experience],Layout:[e.experience.layout],LayoutType:[e.experience.layout_type],Playlist:[e.experience.playlist],PlaylistToProject:e.playlist_to_project,Addon:e.addon,Project:[],Video:[]},n=0;n<t.PlaylistToProject.length;n++)t.Project.push(t.PlaylistToProject[n].project),t.Video.push(t.PlaylistToProject[n].project.video);return t}(d.config().experienceDataGraph)),!t||void 0!==t.enabled&&!0!==t.enabled||(v=t.prefix,g=t.query);var r=Ember.Object.extend(Ember.Evented,{modpWithDefault.create({defaultValue:function(e){return Ember.Map.create()}}),changeList:[],status:"ok",onStatusChange:Ember.observer(function(){hapyak.iframed&&hapyak.displayOverlayMessage(null,"Something went wrong, please refresh.",null,{text:"Refresh",refresh:!0})},"status"),commitStatus:"ok",commitIndex:1,autoSaveInterval:3e3,isDirty:!1,isCommitting:!1,shutdown:!1,getNextId:function(){var e="_"+this.get("nextRecordId");return this.incrementProperty("nextRecordId"),e},recordRecord:function(e){this.get("records").get(e.constructor).set(e.get("id"),e),this.notifyPropertyChange("records")},getRecord:function(e,t){return this.get("records").get(e).get(t)},removeRecord:function(e,t){var n=this.getRecord(e,t);return n&&(this.get("records").get(e).remove(t),this.notifyPropertyChange("recorction(e,t){var n=[],e=this._load(e,t,n);return f.each(n,function(e;return e instanceof Array?f.map(e,function(e){return this._load(a,e,o)},this):e?((s=this.getRecord(a,e.id))||((s=a.create()).set("id",e.id,!1),this.recordRecord(s)),s.beginPropertyChanges(),f.each(e,function(e,t){var n;t in a.references&&(n=a.getPropertyType(t),e instanceof Array?f.each(e,function(e){"object"==typeof e&&this._load(n,e,o)},this):"object"==typeof e&&this._load(n,e,o))},this),f.each(e,function(n,i){var r;"properties"===(i="deleted"===i?"isDeleted":i)?f.each(n,function(e,t){this.hasChange(s,"properties."+t)?h.info("ignore load data b/c of pending change to key "+t):s.setCustomProperty(t,e,!1)},this):this.hasChange(s,i)||(r=a.getPropertyType(i),i in a.references?o.push(f.bind(function(e){var t;n instanceof Array?s.set(i,Ember.A(f.map(n,function(e){return"object"==typeof e?this.getRecord(r,e.id):"number"!=typeof e||isNaN(e)?null:this.getRecord(r,e)},this)),!1):"object"==typeof n?(t=this.getRecord(r,n.id),s.get(i),t&&s.set(i,null,!1),s.set(i,t,!1)):("number"!=typeof n||isNaN(n))&&"string"!=typeof n||s.set(i,this.getRecord(r,n),!1)},this)):"id"!==i&&(r===Date&&(n=new Date(n)),s.set(i,n,!1)))},this),s.set("isLoaded",!0,!1),s.set("isSaved",!0,!1),s.endPropertyChanges(),s.trigger("didLoad"),s.resolve(s),s):void 0},find:function(e,n,t){var i,r;return d.config().viewerMode?(i=[],i=c[e.typeName].filter(function(t){return"object"==typeof n?Object.keys(n).every(function(e){return"object"==typeof t[e]?t[e].id===n[e]:t[e]===n[e]}):t.id===n}),(r=C.create({})).set("content",Ember.A(this.load(e,i))),r.set("isLoaded",!0),r):"object"===Ember.typeOf(n)?this.findQuery(e,n):this.findById(e,n,t)},findById:function(t,e,n){var i=this.getRecord(t,e);return i||((i=t.create()).set("id",e,!1),this.recordRecord(i),e=Ember.String.fmt(t.his.getJSON(t,e,{},function(e){Ember.run(this,function(){this.load(t,e)n(e,t,n){this.findQuery(e,t).onLoad(function(e){n(e.get("firstObject"))})},findMany:function(e,t){return Ember.RSVP.all(f.map(t,f.bind(this.find,this,e)))},findQuery:function(n,i){var e,r=C.create({}),t=function(t,e){Ember.run(this,function(){var e;!t.meta&&t.id?r.set("content",Ember.A([this.load(n,t)])):t&&t.meta&&(e=this.load(n,t.objects),r.set("content",Ember.A(e)),r.setProperties({total:t.meta.total,pages:t.meta.pages,page:t.meta.page,hasPrevious:!!t.meta.previous,hasNext:!!t.meta.next}),t.meta.next&&r.set("next",function(){var e={};return f.extend(e,i,{page:t.meta.page+1}),this.find(n,e)}.bind(this)),r.set("loadPage",function(e){var t;if(!(f.isNaN(+e)||e<=0))return f.extend(t={},i,{page:+e}),this.find(n,t)}.bind(this)),t.meta.previous&&r.set("previous",function(){var e={};return f.extend(e,i,{page:t.meta.page-1}),this.find(n,e)}.bind(this))),r.set("isLoaded",!0),r.trigger("didLoad"),r.resolve(r)})}.bind(this);return i.query&&1===i.page&&(e=w[i.query])?(delete w[i.query],h.info("loading query result for query "+i.query+" from cache"),t(e)):this.getJSON(n,n.getEndpoint()+"/",i,t,function(){r.set("isLoaded",!0),r.trigger("didLoad"),r.reject(r)}),r},filter:function(e,t,n){return 3===arguments.length?this.findQuery(e,t):2===arguments.length&&(n=:Ember.A([])}n e.createRecord(t,n)},deleteRecord:function(e){return e.deleteRecord()},didCreate:function(e){var t;i||(t=this.getNextId(),e.set("id",t,!1),this.recordRecord(e),this.get("changeList").push({op:"create",type:e.constructor.typeName,id:t}),this.notifyPropertyChange("changeList"),this.scheduleCommit())},beforeUpdate:function(){},didUpdate:function(t,n,e){i||(void 0===(e=e instanceof Ember.Object?e.get("id"):e)&&(e=null),this.set("changeList",f.reject(this.get("changeList"),function(e){return"set"===e.op&&t.constructor.typeName===e.type&&t.get("id")===e.id&&n===e.key})),this.get("changeList").push({op:"set",type:t.constructor.typeName,id:t.get("id"),key:n,value:e}),this.notifyPropertyChange("changeList"),this.scheduleCommit())},didDelete:function(t){i||(this.set("changeList",f.reject(this.get("changeList"),function(e){return"delete"===e.op&&t.constructor.typeName===e.type&&t.get("id")===e.id})),this.get("changeList").push({op:"delete",type:t.constructor.typeName,id:t.get("id")}),this.notifyPropertyChange("changeList"),this.notifyPropertyChange("records"),this.scheduleCommit())},hasChange:function(t,n){return!i&&f.find(this.get("changeList"),function(e){return"set"===e.op&&t.constructor.typeName===e.type&&t.get("id")===e.id&&n===e.key})},scheduleCommit:function(){i||(this.get("scheduledCommit")&&clearTimeout(this.get("scheduledCommit")),this.set("scheduledCommit",setTimeout(this.commit.bind(this),this.get("autoSaveInterval"))))},hasChanges:Ember.computed(function(){var e;return!i&&(e=0<this.get("changeList").length,this.set("isDirty",e||this.get("isCommitting")),e)}).property("changeList").cacheable(!1),commit:async function(){var e;i||!this.get("isCommitting")&&this.get("hasChanges")&&(this.set("isCommitting",!0),h.info("committing "+this.get("changeList").length+" changes",this.get("changeList")),this.get("scheduledCommit")&&(clearTimeout(this.get("scheduledCommit")),this.set("scheduledCommit",null)),this.get("commitIndex"),this.incrementProperty("commitIndex"),e=this.get("changeList").slice(0),this.set("changeList",[]),await this.sendChanges(e),this.set("isCommitting",!1),this.commit())},sendChanges:function(e){var r=this.get("model"),o=!1,s=!1,t=e.reduce(function(e,t){var n=t.type+"_"+t.id,i=e.get(n)||{id:t.id,type:t.type,modelType:r[t.type],operation:"update",data:{}};return e.set(n,i),"set"==t.op?i.data[t.key]=t.value:i.operation=t.op,e},new Map),l=t.size,c=this;return new Promise(function(i){t.forEach(t=>{let e,n;"Comment"!=t.type?(l--,h.error("Received change to unsupported type "+t.type)):(e=c.sendCommentChange(t)).then(e=>{e&&("create"==t.operation&&((n=c.removeRecord(t.modelType,t.id))&&(n.set("id",e.id),c.recordRecord(n)),f.each(c.get("changeList"),function(e){e.id===t.id&&(e.id=a.id),e.value===t.id&&(e.value=a.id)})),(n="delete"==t.operation?c.getRecord(t.modelType,t.id):c.load(t.modelType,e)).get("isDeleted")?n.trigger("didDelete"):(n.trigger("didSave"),"update"==t.operation&&n.trigger("didUpdate")))}).catch(e=>{s=!0,429==e.status&&(o=!0),h.captureMessage("API request failed, "+e.error)}).then(()=>{--l<=0&&(o&&hapyak.displayOverlayMessage(null,"Request could not be completed. Rate limit exceeded. Please try again in a few minutes.",null,{text:"DISMISS",title:"Rate limit exceeded",dismissible:!0}),c.set("status","tempts",1),s&&Ember.run(c,function(){c.set("status","connection-error")}),i())})})})},sendCommentChange:function(e){var t=this.getRecord(e.modelType,e.id).get("track");const n=t.get("id");var t=t.get("isTemplate"),i={headers:{"Content-Type":"application/json"}};if("delete"==e.operation)i.method="DELETE";else{i.method="create"==e.operation?"POST":"PATCH";var r,a,o={};for([r,a]of Object.entries(e.data))switch(r){case"type":o.type=a;break;case"start_time":o.start_time=o.start_time||{},o.start_time.value=a;break;case"start_time_format":o.start_time=o.start_time||{},o.start_time.units=a;break;case"duration":o.duration=o.duration||{},o.duration.value=a;break;case"duration_format":o.duration=o.duration||{},o.duration.units=a;break;case"properties.popcorn":o.properties=o.properties||{},o.properties.popcorn=a;break;case"properties.html":o.properties=o.properties||{},o.properties.html=a;break;case"custom_configuration":o.properties=o.properties||{},o.properties.custom_configuration=a;break;default:h.warn(`Unrecognized key ${r} for ${e.operation} operation on `+e.id)}if(0==Object.keys(o).length)return h.warn(`No changes found for ${e.operation} operation on `+e.id),Promise.resolve();i.body=JSON.stringify(o)}t=t?`/v1/accounts/${hapyak.accountId}/templates/`+n:`/v1/accounts/${hapyak.accountId}/projects/`+n,t=hapyak.dataURI+t+"/annotations";return"POST"!=i.method&&(t=t+"/"+e.id),this.fetchWithRetry(t,i).then(e=>{if(e.error)throw e;return e.data?{id:(e=e.data).id,start_time:e.start_time.value,start_time_format:e.start_time.units,duration:e.duration.value,duration_format:e.duration.units,properties:{popcorn:e.properties.popcorn},custom_configuration:e.properties.custom_configuration,type:e.type,created:new Date(e.created_at),modified:new Date(e.updated_at),group:hapyak.accountId,track:n}:{}})},sendQuizSubmission:async function(e){var t=this.getRecord(this.model.Track,e.project_id),n=t.get("id"),t=t.get("isTemplate"),i={headers:{"Content-Type":"application/json"},method:"PATCH"},r={};r.user_id=e.user_id,r.total_question_count=e.numQuestions,r.submitted_at=e.submitted_at,r.answers||(r.answers=[]);for(const s of e.answers){var a={};a.question=s.question,a.answer=s.answer,a.is_correct=s.correct||!1h(a)}var o=await new Promise(n=>{l.getInstance().getIdInfo((e,t)=>{n(t)})}),o=(r.user_id||(r.user_id=hapyak.userId||o.uid),i.body=JSON.stringify(r),t?`/api/accounts/${hapyak.accountId}/templates/`+n:`/api/accounts/${hapyak.accountId}/projects/`+n),t=e.annotation_id,n=hapyak.viewerDataURI+o+`/annotations/${t}/quiz_submissions`;return this.fetchWithRetry(n,i).then(e=>{if(e.data)return e.data;if(e.error)throw e})},fetchWithRetry:function(t,n,i){return i=i||1).then(e=>(e&&(n.headers=n.headers||{},e.forEach((e,t)=>{n.headers[t]=e})),fetch(t,n).then(t=>{const n={status:t.status};return t.jsonn(e=>(t.ok?rror=e.result.message,n)).catch(()=>n)}))).catch(e=>({status:0,error:e})).then(e=>500<=e.status||0==e.status?(this.set("status","connection-error"),this.set("commitStatus","requeue"),i%5==0&&h.error("connection error to servers, will continue to requeue changes, attempt="+i),new Promise(e=>{setTimeout(()=>{i++,this.fetchWithRetry(t,n,i).then(e)},2e3*i)})):e)},getJSON:function(i,r,a,o,s,l){var e,n,t=y,c=(-1<E.indexOf(r.split("?")[0])||i&&i.supportsCdnAccess)&&v;return l=l||1,a=a?f.clone(a):{},c?(e=v+r,g&&(e+="?"+g),t=a.cdn=!0):e=d.config().api+r,t&&(e+=(-1===e.indexOf("?")?"?":"&")+"callback=?",d.config().csrfToken&&(a.csrf=d.config().csrfToken),this.get("apiKey")&&(a.key=this.get("apiKey")),n=hapyak.auth().partner,f.isEmpty(n)||f.each(x,function(e,t){!n[e]||c&&0!==e.indexOf("group")||(a[t]=n[e])})),0<e.indexOf("viewer/setup")&&(e=m.toSSL(e)),(t=this.setupAjaxRequest(e,"GET")).data=a,t.success=o,c&&(t.jsonpCallback=function e(t,n){var i=t+(n||"");return 10<=n?i:-1===b.indexOf(i)?(b.push(i),i):(n?n++:n=1,e(t,n))}("hap_"+p(u.param(a))+"_"),t.cache=!0),t.success=function(e){this.set("status","ok"),o&&o(e)},t.error=function(e,t){function n(e,t){return e&&"function"==typeof e.indexOf&&-1<e.indexOf(t)}this.set("isCommitting",!1),200!==e.status&&400!==e.status&&403!==e.status&&404!==e.status&&l<10?(this.set("status","connection-error"),setTimeout(function(){this.incrementProperty("attempts"),this.getJSON(i,r,a,o,s,l+1)}.bind(this),2e3*l)):404===m.dotget(e,"status")&&n(e.responseText,"does_not_exist")&&n(r,"/api/experiences/")||n(r,"/api/projects/")?s&&"function"==typeof s?s():window.location="/portal/":403===e.status?(this.set("status","offline"),s&&"function"==typeof s&&s(e)):-1<[0,400,404].indexOf(e.status)&&s&&s(e)},u.ajax(t)},postJSON:function(e,t,n,i,r){e=this.setupAjaxRequest(e,"POST",null,r);return t&&(e.data=JSON.stringify(t)),e.success=n,e.error=function(e){this.set("isCommitting",!1),-1<[0,403].indexOf(e.status)&&this.set("status","offline"),"function"==typeof i&&i(e)},u.ajax(e)},setRequestHeaders:function(n,t,e){var i=hapyak.auth(),r=i.partner,a=this.context&&this.context.apiKey||this.get("apiKey");d.config().csrfToken&&n.setRequestHeader("X-Hapyak-CSRF-Token",o.encodeHttpHeaderValue(d.config().csrfToken)),0<e.indexOf("hapyak.com/api/reports/")?n.setRequestHeader("X-Hapyak-API-Key",this.get("reportingKey")):a&&n.setRequestHeader("X-Hapyak-API-Key",a),t&&Object.keys(t).forEach(function(e){n.setRequestHeader(e,t[e])}),f.isEmpty(r)?i.userId&&n.setRequestHeader("X-Hapyak-User",o.encodeHttpHeaderValue(i.userId)):f.each(k,function(e,t){r[e]&&n.setRequestHeader(t,o.encodeHttpHeaderValue(r[e]))})},setupAjaxRequest:function(t,e,n,i){var r=this,a={url:t,timeout:m.dotget(s,"portal.connectionTimeout"),context:this};return e=e||"GET",-1!==t.indexOf("?callback=?")?(a.dataType="jsonp",a.async=!1):(a.type=e,a.contentType="application/json; charset=utf-8",a.dataType="json",a.beforeSend=function(e){r.setRequestHeaders(e,i,t)},a.error=function(e){this.set("isCommitting",!1),-1<[0,403].indexOf(e.status)&&this.sdown")&&(a.async=!1),n&&(a.success=function(){"function"==typeof n&&n()})),a},upload:function(e,n){var i,t=new XMLHttpRequest,r=new FormData||{},a=this.setupAjaxRequest(e.url);e.url?(r.append("file",e.file),r.append("name",e.name),t.onreadystatechange=function(e){var t;if(4===this.readyState&&200===this.status&&!i){h.info("xhr upload complete",e),i=!0;try{t=JSON.parse(this.response)}catch(e){h.captureException("Dao - Upload: There was something wrong with the response from the server."+t)}n(t)}},t.open("post",e.url,!0),t.setRequestHeader("Accept","application/json"),a.beforeSend(t),t.send(r)):h.captureException("Dao-Upload: No upload URL found. Please try again"+e.url)},isConnectionError:Ember.computed(function(){return"connection-error"===this.get("status")}).property("status"),isCommitStatusRequeue:Ember.computed(function(){return"requeue"===this.get("commitStatus")}).property("commitStatus")}).create({}),C=Ember.ArrayProxy.extend(Ember.Evented,Ember.DeferredMixin,{isLoaded:!1,onLoad:function(e){return this.get("isLoaded")?e(this):this.one("didLoad",this,function(){e(this)}),this}}),_=C.extend({type:null,filterFunction:null,init:function(){this.updateContent(),r.addObserver("records",this,"updateContent")},updateContent:function(){var n=Ember.A([]);r.records.get(this.get("type")).forEach(function(e,t){t.get("isDeleted")||this.get("filterFunction")&&!this.get("filterFunction")(t)||n.pushObject(t)},this),this.set("content",n),this.set("isLoaded",!0),this.trigger("didLoad"),this.resolve(this)},willDestroy:function(){r.removeObserver("records",this,"updateContent")}}),t=Ember.Object.extend({type:null}),n=Ember.Object.extend(Ember.Evented,Ember.DeferredMixin,{isLoaded:!1,params:{},init:function(){this.get("endpoint")&&this.getJSON(this.get("endpoint"),this.get("params"))},getJSON:function(e,t){var n=this;n.set("loading",!0),r.getJSON(null,"/api"+e,t,function(e){n.load(e),n.set("loading",!1),n.set("isLoaded",!0),n.trigger("didLoad"),n.resolve(n)})},onLoad:function(e,t){return this.get("isLoaded")?t.apply(e):this.one("didLoad",this,function(){t.apply(e)}),this},load:function(e){return f.each(e,function(e,t){-1!==t.indexOf(".")&&(t=t.replace(".","_")),null!==e&&(e instanceof Array?this.set(t,Ember.A(f.map(e,function(e){return"object"==typeof e?n.create({}).load(e):e},this))):"object"==typeof e?this.set(t,n.crea.reopenClass({find:function(e,t){return n.create({endpoint:e,params:t})}}),{store:r,RecordArray:C,ListOf:t,DataRecord:n}}),define("configAPI",["logging","promise!configuration","utils.embed"],function(n,i,r){"use strict";return i.isProvisioned=function(e,t){return void 0===this.constants.PROVISIONING[e]&&n.error("Invalid provisioning constant: "+e),r.dotget(this,(t?"direct":"resolved")+".PROVISIONING."+e)},i.getProperty=function(e,t){return void 0===this.constants.CONFIGURATION[e]&&n.error("Invalid configuration constant: "+e),r.dotget(this,(t?"direct":"resolved")+".CONFIGURATION."+e)},i.anySubPropIsProvisioned=function(e){var t,n=r.dotget(i,"provisioning."+e);if(!n)return!1;for(t in n)if(n.hasOwnProperty(t)&&n[t])return!0},i}),define("analytics.integration",["logging","lodash.noconflict"],function(e,i){"use strict";function r(){this.identify=function(){},this.track=function(){throw new Error('HapyakAnalyticsIntegration requires "track" function: (eventName, properties, options, callback)')},r.eventMatchesFilter=function(e,t,n){return!0===e||(!0===(e=e[t])||i.isObject(e)&&i.isEqual(e,i.pick(n,i.keys(e))))},r.shouldTrack=function(e,t,n){if(e){if(e.include&&!r.eventMatchesFilter(e.include,t,n))return!1;if(e.exclude&&r.eventMatchesFilter(e.exclude,t,n))return!1}return!0}}return r}),define("analytics",["require","module","promise!configuration","utils.embed","lodash.noconflict","logging","analytics.integration"],function(e,t,n,i,s,r,l){"use strict";var c=i.dotget(n,"analytics.modules")||["analytics.mixpanel"],i=t.config(),d=(n.analytics||{}).localDebug,u=i.iframed;return function(e){var a={};function o(){var t,n=Array.prototype.slice.call(arguments,0);n.length&&s.isString(n[0])&&(t=n[0],s.each(c,function(e){irequire([e],function(e){e instanceof l&&s.isFunction(e[t])&&e[t].apply(e,n.slice(1))})}),d&&this.debug(d,n))}this.id=e,this.first_flags={},r.debug("[interactivity.analytics] HapyakAnalytics Created, id="+e),this.debug=function(e,t){var n=t[0]||"n/a",i=t[1]||"n/a",t=t[2]||{};1===e?r.info("[interactivity.analytics#"+n+"]: [instance="+t.instanceId+"] [e="+i+":"+t.Type+":"+t.Action+"]",t):2===e?r.info("[interactivity.analytics#"+n+"]: [instance="+t.instanceId+"] [t="+t["Project Title"]+"] [v="+t["Video Source ID"]+"] [e="+i+":"+t.Type+":"+t.Action+"] [ps="+t["Play Session"]+"]",t):3===e&&r.info("[interactivity.analytics#"+n+"]: [instance="+t.instanceId+"] "+JSON.stringify({name:i,properties:t},null,2))},this.register=function(e){s.extend(a,e)},this.unregister=function(e){a=s.omit(a,[e])},this.getRegisteredProperty=function(e){return a[e]},this.getRegisteredProperties=function(){return a},this.identify=function(e,t,n,i){o.call(this,"identify",e,t,n,i),s.isFunction(i)&&i()},this.is_annotation_action=function(e){return"Annotation Action"===e},this.=this.first_flags[e]},this.set_first=function(e){this.first_flags[e]=!0},this.first=function(e){return this.is_first(e)?(this.set_first(e),!0):null},this.firsts=function(e,t){return{is_first_action:t?this.first_action(e,t):null,is_first_action_by_type:t?this.first_action_by_type(e,t):null,is_first_action_by_id:t?this.first_action_by_id(e,t):null}},this.first_action=function(e,t){var n=e+":*";return this.is_annotation_action(e)?this.first(n):null},this.first_action_by_type=function(e,t){t=e+":"+t.Type;return this.is_annotation_action(e)&&t?this.first(t):null},this.first_action_by_id=function(e,t){t=e+":"+t["Annotation ID"];return this.is_annotation_action(e)&&t?this.first(t):null},this.track=function(e,t,n,i){var r=u?window.parent:window,t=s.extend({},t,this.firsts(e,t),a);t["Hapyak Version"]=hapyak.VERSION,o.call(this,"track",e,t,n,i),r&&s.isFunction(r.postMessage)&&r.postMessage(JSON.stringify({context:"hapyak-tracking",event:e,properties:t}),"*"),s.isFunction(i)&&i()},this.on=function(e,t){r.logMethod("on",e),s.isFunction(t)&&t()},this.ready=function(e){r.logMethod("ready"),s.isFunction(e)&&e()}}}),define("tracking",["require","module","configAPI","cookie","utils.uuid","utils.omitinvalid","lodash.noconflict","analytics","analytics.distinctids","logging","utils.embed"],function(e,t,n,a,o,s,d,i,r,l,c){"use strict";function u(e){l.debug("[hapyak.tracking] Tracking Created, id="+e),this.instanceId=e,this.eventOrder=1,this.currentVideo=null,this.currentTrack=null,this.videoDuration=null,this.player=null,this.reportTimeEvery=0,this.lastTimeReport=0,this.nextTimeReport=0,this.sessionTimeout=null,this.streamStarted=!1,this.lastTrackingEvent,this.lastTrackingData,this.lastTrackingTime=0,this.analytics=new i(e),this.distinctIdProvider=null,this.queue=[],this.queueEvents=!0,this.microserviceAccessToken=null,this.progressInterval=+n.getProperty("ANALYTICS__PROGRESS_INTERVAL")||10,this.init()}u.prototype={init:function(){var n=this;this.updateAuthTracking(hapyak.auth()),hapyak.addEventListener("auth",function(e){n.updateAuthTracking(e)}),this.register({instanceId:this.instanceId}),this.distinctIdProvider=r.getInstance(),this.distinctIdProvider.getIdInfo(function(e,t){l.debug("[tracking] in callback from distinctids getIdInfo",e,t),e&&n.track("Custom Action","System",e.code||"unknown",null,{}),t&&t.uid?n.onDisinctId(t):l.error("Unexpected empty tracking info")})},onDisinctId:function(e){this.register({user:{id:e.uid,returned:e.ru,interacted:e.iu}}),this.flushEventQueue(),this.queueEvents=!1},flushEventQueue:function(){var e;for(l.debug("[hapyak.tracking] flushEventQueue, length="+this.queue.length);void 0!==(e=this.queue.shift());)this.trackAnalyticsEvent(e.name,e.properties,e.callback,e.eventData)},identify:function(e){this.analytics.identify(e)},register:function(e){this.analytics.register(e)},registerPartnerProperties:function(e,n){var i,r,a=this;e&&(r={},i={excludeKeys:[],"Partner Data":[]},n=n||"Partner / ",d.each(e,function(e,t){"Response Data"!=t&&e&&"cdn"!==t&&"tracking"!==t&&"context"!==t&&(d.isObject(e)?a.registerPartnerProperties(e,n+t+"."):(r[n+t]=e,i.excludeKeys.push(n+t),i["Partner Data"].push({key:String(t),value:Striion(e){if(this.analytics)return this.analytics.getRegisteredProperty(e)},unregister:function(e){this.analytics.unregister(e)},setSessionTimeout:function(){var e=this;this.sessionTimeout=setTimeout(function(){e.startContext({"Play Session":o().replace(/\-/g,"")})},Math.min(5*(this.videoDuration||18e6),18e6))},clearSessionTimeout:function(){clearTimeout(this.sessionTimeout)},updateAuthTracking:function(e){e=e.partner;d.isEmpty(e)||this.register({"Partner User ID":e.userId,"Partner Username":e.username,"Partner Email":e.email})},restartEventOrder:function(){this.es.register(e)},startPageContext:function(e){this.startContext({Page:e})},endPageContext:function(){this.endContext(["Page"])},startUserContext:function(e){this.startContext({"User ID":e.get("id"),Username:e.get("username")})},startLTIContext:function(e){var n=null,i=null;d.forEach(e,function(e,t){0===t.indexOf("lti_")&&((n=n||{})[t.replace(/^lti_/,"")]=e),0===t.indexOf("custom_")&&((i=i||{})[t.replace(/^custom_/,"")]=e)}),n&&this.startContext({"LTI Context":n}),i&&this.registerPartnerProperties(i),(e.lti_req_user_id||e.lis_person_name_full||e.lis_person_contact_email_primary)&&this.updateAuthTracking({partner:{userId:e.lti_req_user_id||null,username:e.lis_person_name_full||null,email:e.lis_person_contact_email_primary||null}})},endLTIContext:function(){this.endContext(["LTI Context"])},startExperienceContext:function(e){var t="hapyak_evid",n=a.get(t),t=(n&&!e.generateExperienceViewId||(n=o().replace(/\-/g,"")),a.set(t,n,1/48),{Experience:{view_id:n,title:c.dotget(e,"experience.title",null)},Playlist:{name:c.dotget(e,"playlist.name",null)},Layout:{name:c.dotget(e,"layout.name",null),type_id:c.dotget(e,"layout.type_id",null),type_name:c.dotget(e,"layout.type_name",null)},"Experience UUID":c.dotget(e,"experience.id",null),"Playlist UUID":c.dotget(e,"playlist.id",null),"Layout UUID":c.dotget(e,"layout.id",null)});this.startContext(t)},endExperienceContext:function(){this.endContext(["Experience","Playlist","Layout","Experience UUID"])},startProjectContext:function(e){var t={"Project UUID":e.get("id"),"Project Title":e.get("title")},n=e.get("tags"),e=e.get("templates");n&&(t["Project Tags"]=n),e&&(t.Templates=e),this.startContext(t)},endProjectContext:function(){this.endContext(["Project UUID","Project Title"])},startVideoContext:function(e,t){this.currentVideo=e,this.lastTimeReport=0,this.nextTimeReport=0,this.reportTimeEvery=0,this.streamStarted=!1,this.videoDuration=1e3*e.get("duration"),this.restartEventOrder(),this.startContext({"Play Session":o().replace(/\-/g,""),"Player Type":t&&t.playerType||e.get("source"),"Video ID":e.get("id"),"Video Title":e.get("title"),"Video Category":e.get("source_category"),"Video Source":e.get("source"),"Video Source ID":e.get("source_id"),"Video Offset":0,"Video Accrued":0,"Video Percent Complete":0})},endVideoContext:function(){this.endContext(["Video ID","Video Title","Video Category","Video Source","Video Source ID","Video Offset","Video Accrued","Video Percent Complete"]),this.currentVideo=null},startTrackContext:function(e,t){t={"Track UUID":(this.currentTrack=e).get("id"),"Num Annotations":t?t.length:e.get("num_annotations"),"Annotation Types":e.get("num_annotations_by_type")},e=e.get("templates");e&&(t.Templates=e),this.startContext(t)},endTrackContext:function(){this.endContext(["Track UUID"]),this.currentTrack=null},startAnnotationContext:function(e){e&&this.startContext({"Annotation U)},endAnnotationContext:function(){this.endContext(["Annotation UUID"])},startCategoryContext:function(e){this.startContext({"Category ID":e.get("id"),"Category Title":e.get("label")})},endCategoryContext:function(){this.endContext(["Category ID","Category Title"])},startVisitUserContext:function(e){this.startContext({"Visited Usernametext:function(){this.endContext(["Visited Username","Visited User ID"])},startPlayerContext:function(e,t){this.startContext({"Playlist ID":t.playlistId,"Playlist Name":t.playlistName,"Video Title":t.videoTitle}),this.player=e},endPlayerContext:function(){this.endContext(["PndContext:function(e){var t=this;d.each(e,function(e){t.unregister(e)})},trackAnalyticsEvent:function(e,t,n){var i=null;this.getRegisteredProperty("Session")&&(i=this.getRegisteredProperty("Session")===a.get("hapyak_psid")?1:0);var r=(r=this.getRegisteredProperty("Session")||a.get("hapyak_psid"))||o().replace(/\-/g,"");a.set("hapyak_psid",r,1/48),this.register({Session:r}),this.register({"Cookie State":i}),this.clearSessionTimeout(),this.setSessionTimeout(),this.analytics.track(e,t,void 0,n),"Custom Action"!==e&&"Annotation Action"!==e||this.distinctIdProvider.setActivatedUser()},enQueueAnalyticsEvent:function(e,t,n,i){this.queue.push({name:e,properties:t,callback:n,eventData:i}),l.debug("[hapyak.tracking] events queued "+this.queue.length)},track:function(e,t,n,i,r){"Load"!==e&&(i=d.extend({Type:t},i),n&&(i.Action=n),i["Event Order"]=this.eventOrder++,r&&(i=d.extend({"Custom Event Data":r},i)),this.queueEvents?this.enQueueAnalyticsEvent(e,i,null):this.trackAnalyticsEvent(e,i,null),"Progress"!==n&&(e===this.lastTrackingEvent&&d.isEqual(i,this.lastTrackingData)&&(new Date).getTime()-this.lastTrackingTime<150&&l.warn("Duplicate analytics tracking detected, event="+e+", type="+t+", action="+n),this.lastTrackingEvent=e,this.lastTrackingData=i,this.lastTrackingTime=(new Date).getTime()))},resolveAnnotationType:function(e,t){var n=e.get("properties.popcorn.customWidget"),e=e.get("type"),e=n&&"iframe"===e?"widget":e;return"type"===t?e:"subtype"===t?n:void l.warn("Ue")},customAction:function(e,t,n,i){this.track("Custom Action",e,t,n,i)},pageView:function(e,t){this.track("Page View",e,null,t),this.startPageContext(e)on",e,t,n)},pnull,t)},playerAction:function(e,t,n){this.track("Player Action",e,t,n)},setupAnnotationEvent:function(e,t){var n,i,r,a,o,s,l,c;if(e)return l=this.resolveAnnotationType(e,"type"),c=this.resolveAnnotationType(e,"subtype"),s=e.get("start_time"),n=e.get("duration"),o=!!e.get("properties.popcorn.pause"),r=e.get("properties.popcorn.gate"),a=e.get("properties.popcorn.src"),i=this.player.annotationPosition(e),void 0===n&&(n=3),t=d.extend({"Annotation UUID":e.get("id"),"Annotation Type":l,"Annotation Start Time":s,"Annotation Duration":n,Pausing:o,Gating:r,"Extension Source":a,"Annotation Position":i[0],"Annotation Coordinates":i[1]},t),c&&(t["Annotation Subtype"]=c),"pop"!==l&&"image"!==l&&"hotlink"!==l||(s=e.get("properties.popcorn.onClick.gotoLink")||e.get("properties.popcorn.link"),t.Rollup=t.Rollup||[],s&&(t.Target=s,t.Rollup.push("link")),e.get("properties.popcorn.onClick.gotoTrack")&&t.Rollup.push("navigation")),"quiz"===l&&(t.Rollup=t.Rollup||[],t.Rollup.push("response")),"pop"===l?e.get("properties.popcorn.text")&&(t.Text=e.get("properties.popcorn.text")):"bookmark"===l&&e.get("properties.popcorn.text")&&(t.Text=e.get("properties.popcorn.text")),t=this.setupOnTimeAnnotationEvent(e,t)},setupOnTimeAnnotationEvent:function(e,t){return"ontime"===e.get("type")&&(t.annotation_subtype=e.get("properties.popcorn.addonTypeId"),t.annotation_addon_command=e.get("properties.popcorn.addonCommand"),t.annotation_addon_command_json=JSON.stringify(e.get("properties.popcorn.addonCommandData"))),t},annotationView:function(e,t){var n;!e||this.player&&this.player.editMode()||(n=this.resolveAnnotationType(e,"type"),t=this.setupAnnotationEvent(e,t),this.updateVideoPlayback(!0),this.track("Annotation View",n,null,t))},annotationEnded:function(e,t){var n;!e||this.player&&this.player.editMode()||(n=this.resolveAnnotationType(e,"type"),t=this.setupAnnotationEvent(e,t),this.track("Annotation Ended",n,null,t))},annotationAction:function(e,t,n){var i;!e||this.player&&this.player.editMode()||(i=this.resolveAnnotationType(e,"type"),this.updateVideoPlayback(!0),this.track("Annotation Action",i,t,d.extend({"Annotation UUID":e.get("id"),"Annotation Type":i},n)))},annotationActionById:function(e,t,n,i,r){var a,o;!e||-1<e.toString().indexOf("_")||this.player&&this.player.editMode()||(a=irequire("model"),o=irequire("dao"),(o=a&&o&&o.store.find(a.Comment,e))&&o.get("id")&&(i=this.setupAnnotationEvent(o,i),t=this.resolveAnnotationType(o,"type")),this.updateVideoPlayback(!0),this.track("Annotation Action",t="toc"===t?"contents":t,n,d.extend({"Annotation UUID":e,"Annotation Type":t},i),r))},updateVideoPlayback:function(e){var t,n,i,r,a,o,s,l=this.player;l&&(t=Math.round(l.currentTime()),n=Math.round(l.elapsedTime()),i=Math.round(100*l.playTime())/100,r=Math.round(l.duration()),a="live"===l.mediaType(),s=null,o=this.reportTimeEvery,s={"Play Time Accrued":i,"Video Accrued":n,"Live Video":a},!a&&t<=r&&d.extend(s,{"Video Offset":t,"Video Duration":r,"Video Percent Complete":Math.round(t/r*100)}),this.register(s),a&&!o?o=30:!o&&r&&(o=this.progressInterval),0<i&&(this.streamStarted||(this.track("Player Action","Video","Play"),this.streamStarted=!0),this.lastTimeReport!==i&&(i>=this.nextTimeReport||e)&&(this.track("Player Action","Video","Progress",{"Video Elapsed Difference":i-this.lastTimeReport,"Video Slice Play Time Accrued":l.slicePlayTime(!1),"Progress Interval":o}),this.lastTimeReport=i,this.nextTimeReport=i+o)))}};var p={_instances:{},_register:function(e,t){this._instances[e]=t},getInstance:function(e,t){var n=this._instances[e=null==e?1:e];return n&&!t||(n=new u(e),this._register(e,n)),n}};return window.hapyak.tracking||(window.hapyak.tracking=p),p}),define("model",["module","jquery.noconflict","ember.noconflict","dao","configAPI","utils.embed","tracking","lodash.noconflict"],function(e,n,s,l,i,r,t,c){"use strict";var a=t.getInstance(null),t=s.Object.extenange:!0,init:funchange:function(){return!this.get("isTransient")&&!this.get("isDeleted")},onLoad:function(e){return this.get("isLoaded")?e(this):this.one("didLoad",this,function(){e(this)}),this},onSave:function(e){return this.one("didSave",this,function(){e(this)}),this},onDelete:fus.get("isDeleted")?e(th){e(this)}),this},unknownProperty:function(e){return s.get(this.data,e)},setUnknownProperty:function(e,t){var n;this.get(e)!==t&&((n="id"!==e&&this.fireChange&&this.shouldFireChange())&&l.store.beforeUpdate(this,e,t),this.propertyWillChange(e),s.set(this.data,e,t),this.propertyDidChange(e),n&&l.store.didUpdate(this,e,t))},set:function(e,t,n){var i=this.get(e),r=t,a=this.fireChange;if(!(c.isNumber(t)&&c.isNumber(i)&&Math.abs(t-i)<1e-8||null==t&&null==i||(r instanceof s.Object&&(r=r.get("id")),i instanceof s.Object&&(i=i.get("id")),c.isEqual(i,r)))){this.fireChange=!1!==n;try{this._super(e,t)}finally{this.fireChange=a}}return this},setProperties:function(e){var t,n;if("object"==typeof e)for(t in e)e.hasOwnProperty(t)&&(n=e[t],this.set(t,n));return this},setCustomProperty:function(e,t,n){var i=this.get("properties"),r=(i||this.set("properties",i={},!1),s.get(i,e));return c.isNumber(t)&&c.isNumber(r)&&Math.abs(t-r)<1e-8||null==t&&null==r||c.isEqual(r,t)||((n=!1!==n&&this.shouldFireChange())&&l.store.beforeUpdate(this,"properties."+e,t),s.set(i,e,t),n&&l.store.didUpdate(this,"properties."+e,t)),this},setNestedCustomProperty:function(e,t,n){var i,r=this.get("properties"),a=e.split(".");if(r||this.set("properties",r={},!1),i=r,this.getCustomProperty(e)){if(e=s.get(r,e),c.isNumber(t)&&c.isNumber(e)&&Math.abs(t-e)<1e-8)return this;if(null==t&&null==e)return this;if(c.isEqual(e,t))return this}for(var o=0;o<a.length-1;o++)i[a[o]]||(i[a[o]]={}),i=i[a[o]];return i[a[a.length-1]]=t,(n=!1!==n&&this.shouldFireChange())&&l.store.beforeUpdate(this,"properties",r),s.set(this,"propertir),this},getCustomProperty:function(e){return this.get("properties."+e)},deleteCustomProperty:function(e,t){var n,i,r=this.get("properties");if(void 0!==e.split(".").reduce(function(e,t){return i=t,(n=e)?e[t]:void 0},r))return delete n[i],(t=!1!==t&&this.shouldFireChange())&&l.store.beforeUpdate(this,"properties",r),s.set(this,"properties",r),t&&l.store.didUpdate(this,"properties",r),this;console.warn("The property",e,"doesn't exist or part of it's path doesn't exist, nothing to delete here ")},deleteRecord:function(){var e;this.get("isDeleted")||(e=this.shouldFireChange(),this.set("isDeleted",!0,!1),e&&l.store.didDelete(this))},hasPermission:function(e){var t;return!this.get("isDeleted")&&((t=this.getete:this.get("hasDeletePermission") this.constructor.ownerField?this.get(this.constructor.ownerField):null},isOwner:s.computed(function(){if(this.constructor.ownerField){var e=this.getOwner();if(e)return window.HapyakApp&&e&&e.get("id")===window.HapyakApp.get("currentUser.id")}return!1}).property().cacheable(!1),hasEditPermission:s.computed(function(){var e,t=window.HapyakApp&&window.HapyakApp.get("currentUser");if(t){if(this.get("isOwner")||"admin"===t.get("role"))return!0;if((e=this.get("group"))&&"admin"===t.get("membership."+e))return!0}return!1}).property().cacheable(!1),hasDeletePermission:s.computed(function(){return this.get("hasEditPermission")}).property().cacheable(!1),hasViewPermission:s.computed(function(){return!this.constructor.ownerField||this.get("hasEditPermission")}).property().cacheable(!1),trigger:function(e){s.tryInvoke(this,e,[].slice.call(arguments,1)),this._super.apply(this,arguments)},isEqual:function(e){return this.constructor===e.constructor&&this.get("id")===e.get("id")},didLoad:s.K,didSave:s.K,didCreate:s.K,didUpdate:s.K,didDelete:s.K}),o=(t.reopenClass({ownerField:"user",fields:{created:Date,modified:Date},references:{},suppore.find(store.filter(this,e,t)},findOne:function(e,t){l.store.findOne(this,e,t)},createRecord:function(e,t){var n=this.create();return n.set("isLoaded",!0,!1),!0===t?n.set("isTransient",!0,!1):l.store.didCreate(n),e&&c.each(e,function(e,t){n.set(t,e)}),n.trigger("didCreate"),n.resolve(n),n},getPropertyType:function(e){var t=this.references[e];return t=(t=t||this.fields[e])instanceof l.ListOf?t.get("type"):t},getEndpoint:function(){retuypeName).toLowerCase()+"s"},toString:function(){return"."+this.typeName}}),{}),d=(o.User=t.extend({full_name:s.computed(function(){var e=this.get("first_name"),t=this.get("last_name");return e&&t?e+" "+t:e||this.get("username")}).property("first_name","last_name","username"),avatarImageUrl:s.computed(function(){return this.get("image")}).property("image"),permissions:s.computed(function(){var e=this._super();return e.create_named_tracks=s.A(["admin","producer","editor"]).contains(this.get("role")),e.create_official_tracks=s.A(["admin","producer","editor"]).contains(this.get("role")),e.create_featured_videos=s.A(["admin","editor","partner_admin","partner_editor"]).contains(this.get("role")),e}).property().cacheable(!1),isOwner:s.computed(function(){return window.HapyakApp&&window.HapyakApp.get("currentUser.id")===this.get("id")}).property().cacheable(!1),hasViewPermission:s.computed(function(){return!0}).property().cacheable(!1),hasDeletePermission:s.computed(function(){return!1}).property().cacheable(!1),accountAssociations:s.computed(function(){var n=s.Object.create({allConnected:!1,isLoaded:!1});return l.store.find(o.AccountAssociation,{username:this.get("username")}).onLoad(function(e){var t=e.findProperty("service","facebook"),e=e.findProperty("service","google");n.set("facebook",t),n.set("google",e),t&&e&&n.set("allConnected",!0),n.set("isLoaded",!0)}),n}).property()})ted(function(){return o.VideoCategory.find(this.get("source_category"))}).property("content","content.isLoaded"),hasEditPermission:s.computed(function(){if(this._super())return!0;var e,t=window.HapyakApp&&window.HapyakApp.get("currentUser");if(t){if(e=this.get("group"))return"editor"===t.get("membership."+e);if("editor"===t.get("role}),o.Track=t.extend({init:function(){this._super(),this.data.numLikes=0},didCreate:function(){this._super(),this.onSave(function(){a.playerAction("Track","Create",{"Track ID":this.get("id")})}.bind(this))},didUpdate:function(){this._super(),a.playerAction("Track","Update",{"Track ID":this.get("id")})},didDelete:function(){this._super(),a.playerA},official:s.computed(function(){return"official"===this.get("privacy")}).property("privacy"),permissions:s.computed(function(){var e=this._super();return e.add_annotations=this.get("hasEditPermission"),e}).property().cacheable(!1),hasAddAnnotationsPermission:s.computed(function(){return this.get("hasEditPermission")}).property().cacheable(!1),hasEditPermission:s.computed(function(){if(this._super())return!0;var e,t=window.HapyakApp&&window.HapyakApp.get("currentUser");if(t){if(e=this.get("group"))return"editor"===t.get("membership."+e);if("editor"===t.get("role"))return!0}return!1}).property().cacheable(!1),hasViewPermission:s.computed(function(){return!!this._super()||"private"!==this.get("privacy")}).property().cacheable(!1),copiedFromUser:s.computed(function(){var e=this.get("copied_from_user");if(e)return o.User.find(e)}).property("copied_from_user")}),o.Comment=t.extend({didCreate:function(){this._super(),this.onSave(function(){a.playerAction("Annotation","Create",{"Annotation UUID":this.get("id"),"Annotation Type":this.get("type")})}.bind(this))},isValid:function(){return this.hasContent()},hasContent:function(){return"pop"===this.get("type")?!s.isNone(this.get("properties.content"))&&!s.isEmpty(n.trim(this.get("properties.content"))):"drawing"===this.get("type")?!s.isNone(this.get("properties.drawing"))&&!s.isEmpty(n.trim(this.get("properties.drawing"))):"audio-note"===this.get("type")&&!s.empty(this.get("properties.audio_src"))},setDrawing:function(e){this.setCustomProperty("drawing",e)},getDrawing:function(){return this.get("properties.drawing")},hasEditPermission:s.computed(function(){if(this._super())return!0;var e,t=window.HapyakApp&&window.HapyakApp.get("currentUser");if(t){if(e=this.get("group"))return"editor"===t.get("membership."+e);if("editor"===t.get("role"))return!0}return!1}).property().cacheable(!1),hasViewPermission:s.computed(function(){return!!this._super()||"private"!==this.get("privacy")}).property().cacheable(!1)}),o.TrackRating=t.extend({hasViewPermission:s.computed(function(){return!0}).property().cacheable(!1)}),o.TrackReaction=t.extend({hasViewPermission:s.computed(function(){return!0}).property().cacheable(!1)}),o.Follow=t.extend({}),o.UserVideo=t.extend({}),o.FeaturedVideo=t.extend({}),o.Related=t.extend({}),o.ViewerSetup=t.extend({}),o.Config=t.extend({}),o.Group=t.extend({}),o.GroupMember=t.extend({}),o.Project=t.extend({}),o.Code=t.extend({}),o.Experience=t.extend({}),o.Layout=t.extend({}),o.LayoutType=t.extend({}),o.Playlist=t.extend({}),o.PlaylistToProject=t.extend({}),o.Addon=t.extend({}),o.AddonType=t.extend({}),o.Widget=s.Object.extend({default_configuration:null,name:null,details:null,src:null,id:null}),o.Workflow=t.extend({}),o.WorkflowState=t.extend({}),o.Workflow.reopenClass({typeName:"Workflow"}),o.WorkflowState.reopenClass({typeName:"WorkflowState"}),o.Widget.reopenClass({typeName:"Widget",find:function(){return{onLoad:function(e){e({get:e=>"content"==e?d:void 0})}}}}),s.A((i.provisioning&&i.provisioning.widgetLibrary||[]).map(function(e){return o.Widget.create(e)}))),u=(o.Addon.reopenClass({typeName:"Addon",references:{layout:o.Layout,addon_type:o.AddonType}}),o.AddonType.reopenClass({typeName:"AddonType"}),o.Experience.reopenClass({typeName:"Experience",references:{layout:o.Layout,playlist:o.Playlist}}),o.Layout.reopenClass({typeName:"Layout",references:{layout_type:o.LayoutType}}),o.LayoutType.reopenClass({typeName:"LayoutType"}),o.Playlist.reopenClass({typeName:"Playlist"}),o.PlaylistToProject.reopenClass({typeName:"PlaylistToProject",references:{playlist:o.Playlist,project:o.Project}}),o.AccountAssociation.reopenClass({typeName:"AccountAssociation"}),o.User.reopenClass({typeName:"User",fields:{created:Date,modified:Date,last_import_start:Date,last_import_finish:Date}}),o.Group.reopenClass({typeName:"Group",references:{parent:o.Group}}),o.GroupMember.reopenClass({typeName:"GroupMember",references:{user:o.User,group:o.Group},allParentGroupUrl+"/api/group_members_enabled",function(e){"function"==typeof t&&t(e)})}}),o.Video.reopenClass({typeName:"Video",references:{tracks:l.ListOf.create({type:o.Track})}}),o.Track.reopenClass({ownerField:"owner",typeName:"Track",fields:{created:Date,modified:Date,annotation_modified:Date},references:{owner:o.User,video:o.Video}}),o.Comment.reopenClass({typeName:"Comment",references:{user:o.User,track:o.Track}}),o.TrackRating.reopenClass({typeName:"TrackRating",references:{user:o.User,track:o.Track}}),o.TrackReaction.reopenClass({typeName:"TrackReaction",references:{user:o.User,track:o.Track}}),o.UserVideo.reopenClass({typeName:"UserVideo",references:{user:o.User,video:o.Video,tracks:l.ListOf.create({type:o.Track})}}),o.FeaturedVideo.reopenClass({typeName:"FeaturedVideo",references:{owner:o.User,video:o.Video,track:o.Track}}),o.Follow.reopenClass({typeName:"Follow",references:{user:o.User,follow:o.User}}),o.Related.reopenClass({typeName:"Related",references:{videos:l.ListOf.create({type:o.Video}),tracks:l.ListOf.create({type:o.Track})},getEndpoint:function(){return"/api/related"}}),o.Project.reopenClass({typeName:"Project",references:{owner:o.User,video:o.Video,track:o.Track,group:o.Group},tryBcUpload:function(e,t,n){t&&e&&r.dotget(i,"provisioning.hosting.video.brightcove")&&l.store.postJSON(hapyak.microserviceHost+"/api/brightcoveUpload/notify_project",{projectId:e,groupId:t.group,userId:t.owner,writeKey:n},function(e){l.store.postJSON(hapyak.microserviceHost+"/api/brightcoveUpload/video/ingest",{url:t.input,apiKey:l.store.get("apiKey"),sessionKey:e.sessionKey})})}}),o.Code.reopenClass({typeName:"Code"}),o.ViewerSetup.reopenClass({supportsCdnAccess:!0,typeName:"ViewerSetup",references:{project:o.Project,video:o.Video,track:o.Track,comments:l.ListOf.create({type:o.Comment})},getEndpoint:function(){var e=0===window.location.pathname.indexOf("/portal/");return i.isProvisioned("EMBED_WHITELIST")&&!e?"/r/api/viewer/setup":"/api/viewer/setup"}}),o.Config.reopenClass({typeName:"Config"}),o.VideoCategory=s.Object.deoCategory.reopenClass({find:function(e){return u.findProperty("id",e)},findAll:function(){return u}}),s.A([o.VideoCategory.create({label:"All",id:"All"}),o.VideoCategory.create({label:"Animals",id:"Animals"}),o.VideoCategory.create({label:"Autos",id:"Autos",hidden:!0}),o.VideoCategory.create({label:"Comedy",id:"Comedy"}),o.VideoCategory.create({label:"Education",id:"Education"}),o.VideoCategory.create({label:"Entertainment",id:"Entertainment"}),o.VideoCategory.create({label:"Film",id:"Film"}),o.VideoCategory.create({label:"Games",id:"Games"}),o.VideoCategory.create({label:"How To",id:"Howto"}),o.VideoCategory.create({label:"Music",id:"Music"}),o.VideoCategory.create({label:"News",id:"News"}),o.VideoCategory.create({label:"Nonprofit",id:"Nonprofit",hidden:!0}),o.VideoCategory.create({label:"People",id:"People",hidden:!0}),o.VideoCategory.create({label:"Shows",id:"Shows",hidden:!0}),o.VideoCategory.create({label:"Sports",id:"Sports"}),o.VideoCategory.create({label:"Tech",id:"Tech"}),o.VideoCategory.create({label:"Trailers",id:"Trailers",hidden:!0}),o.VideoCategory.create({label:"Travel",id:"Travel"})]));return l.store.set("model",o),o}),define("utils.sanitizeparams",["lodash.noconflict"],function(n){"use strict";var i=["apiKey","createdTrack","csrfToken","element","environment","external","groupId","loadData","logLevel","aspectRatio","keepAnnotationAspectRatio","safestream","messages","nls","onLoad","player","plugins","queryCache","rootUrl","trackId","projectId","workflow","projectName","user","userId","username","version","videoId","videoType","videoUrl","hideCtrlbarSkipfwd","hideCtrlbarTimeline","hideCtrlbarLogo","hideCtrlbarAnnotationMarkers"],r=["annotationSources","duration","autoplay","captions","contentTracks","controls","controlStyle","cuePoints","height","hideEndAnnotations","hidePlayerUIWhenInteracting","isEditable","minimalRootCss","minHeight","minWidth","muted","playerParameters","playerType","playlistId","playlistName","projectId","remotes","resetVariables","signature","time","trackInfo","variables","videoTitle","width","forceUpdateDimensionsOnResize"].concat(i),a=["aspectRatio","annotationBlacklist","autoEditDialog","contentTracks","controlBarHeight","disableInlineTextEdit","edit","embed","enableAltControls","hostWindow","isTemplate","nativeControls","nls","placeholderSrc","signature","startInEditMode"].concat(r),i=i.sort(),r=r.sort(),a=a.sort();return{config:function(e,t){e=n.pick(n.extend({},e,t),i);return n.omit(e,function(e){return void 0===e})},viewer:function(e,t){e=n.pick(n.extend({},e,t),r);return n.omit(e,function(e){return void 0===e})},embed:function(e,t){e=n.pick(n.exteration","gate","precondition","displayedName","projectId","isEditable"]}}}),define("utils.samedomain",[],function(){"use strict";return{test:function(e){var t,n;return!hapyak.iframed&&("string"==typeof e&&(!!(n=1<(n=(t=location.host.split(".")).length)?t[n-2]+"."+t[n-1]:t[0])&&-1!==(e=(t=/(?:https?:)?\/\/([^/]+)/i.exec(e))&&t[1]?t[1]:e).indexOf(n)))}}}),define("utils.validatelink",["promise!configuration","logging"],function(t,n){"use strict";var i,r,a=!0;return function(e){if(a){if(t.player){if(t.player.linkBlacklist&&t.player.linkBlacklist.length)try{i=new RegExp(t.player.linkBlacklist.join("|"),"i")}catch(e){n.warn("Invalid regular expression: "+t.player.linkBlacklist)}if(t.player.linkWhitelist&&t.player.linkWhitelist.length)try{r=new RegExp(t.player.linkWhitelist.join("|"),"i")}catch(e){n.warn("Invalid regular expression: "+t.player.linkWhitelist)}}a=!1}return!(r&&!r.test(e))&&(!i||!i.test(e))}}),!function(e,t){"use strict";"function"==typeof define&&define.amd?define("utils",["promise!configuration","dao","module","utils.samedomain","utils.validatelink","logging","jquery.noconflict","utils.embed","lodash.noconflict"],t):e.hapyakUtils=t(e)}(this,function(e,t,n,r,i,a,o,s,l){"use strict";var c,d,u,p,h,n=n.config(),f=(e&&e.player).localLinks||n.localLinks||!1;function m(e){return e?(e=e.match(/([A-Z0-9_-]{1,}\.(?:png|jpg|gif|jpeg|svg))/i))&&e[0]?e[0]:"Image URL has no filetype.":""}return d=void 0!==document&&documene.classList.remove(t)},function(e,t){return!!e&&e.classList.contains(t)}):(c=function(e,t){var n;e&&((n=(n=e.getAttribute("class")||"").split(" ")).indexOf(t)<0&&n.push(t),e.setAttribute("class",n.join(" ")))},u=function(e,t){var n;e&&(0<=(t=(n=(n=e.getAttribute("class")||"").split(" ")).indexOf(t))&&n.splice(t,1),e.setAttribute("class",n.join(" ")))},function(e,t){return!!e&&-1<(e.getAttribute("class")||"").split(" ").indexOf(t)}),{binarySearchByKey:function(e,t,n){var i,r,a,o=e&&e.length-1,s=0;if(isNaN(o)||o<0)return-1;if(n<(i=e[0][t]))return-1;if(i===n)return 0;if(e[o][t]<=n)return o;for(;s<o;)if(n<(r=e[a=s+(o-s)/2>>>0][t])){if(e[o=a-1][t]<=n)return o}else{if(r===n||s===a)return a;s=a}return s},getCloudfrontUrlForS3Resource:function(e,t,n,i,r,a){var o,s;if((i=""===(i=-1<e.indexOf("dev")?"dev":i)?"production":i)!==n&&a)console.log("The resource you are trying to alter was not created in the current environment. You are not allowed to overwrite it.");else if(!a)return"dev"===i?(s="dev.",o="_dev_"):"feature"!==n&&"staging"!==n&&"production"!==i||(s="",o="_"),e.replace)},isValidJson:function(e){try{JSON.parse(e)}catch(e){return!1}return!0},copyToClipboardById:function(e){try{var t=document.getElementById(e),n=document.createElement("input"),i=(n.style.position="absolute",n.style.opacity="0",n.value=t.textContent,document.body.appendChild(n),n.select(),document.execCommand("copy"));document.body.removeChild(n),i||a.captureMessage("Copy was unsuccessful, please try manually selecting and copying to your clipboard.")}catch(e){a.captureException(e)}},dispatchEvent:function(t){var n;try{n=new Event(t),window.dispatchEvent(n)}catch(e){(n=document.createEvent("Event")).initEvent(t,!0,!0)}},observeOneTime:function(t,n,i,r){var e,a;r||(r=i,i=null),!(e=t.get(n))||i&&!i(e)?t.addObserver(n,a=function(){var e=t.get(n);!e||i&&!i(e)||(t.removeObserver(n,a),r(e))}):r(t.get(n))},getPagerText:function(e,t,n){var i=t.get("total"),t=t.get("page")*n,n=t-(n-1),t=Math.min(t,i);return 1==n&&1===t?"One "+e+" found":n===t?"Last of "+i+" "+e+"s found":n+" to "+t+" of "+i+" "+e+"s found"},instanceOfElement:function(e,t){if(!e||"object"!=typeof e&&"function"!=typeof e)return!1;if(t){if("string"!=typeof t)return e instanceof t}else t="Element";return e instanceof window[t]||!(!e.ownerDocument||!e.ownerDocument.defaultView)&&(e instanceof e.ownerDocument.defaultView[t]||e instanceof e.ownerDoprototype.startsWith||function(e){return this.substring(0,e.length)===e},listenForPostMessage:function(e){var t=window.addEventListener?"addEventListener":"attachEvent";(0,window[t])("addEventListener"==t?"message":"onmessage",e)},removePostMessageListener:function(e){var t=window.removeEventListener?"removeEventListener":"detachEvent";(0,window[t])("removeEventListener"==t?"message":"onmessage",e)},measurePopText:function(e,t){var n,i,r=document.createElement("canvas"),a=e.container,o=r.getContext("2d"),s=0,r=window.getComputedStyle&&window.getComputedStyle(a.firstChild||a);return r?(o.font=(r.getPropertyValue("font-size")||"18px")+" "+(r.getPropertyValue("font-family")||"Open Sans"),(n=r.getPropertyValue("font-weight"))&&"normal"!==n&&(o.font=n+" "+o.font),(n=r.getPropertyValue("font-style"))&&"normal"!==n&&(o.font=n+" "+o.font)):o.font="18px Open Sans",r=(r=e.text||"").split("\n"),i=e.link||e.onClick&&e.onClick.gotoLink,Popcorn.forEach(r,function(e){s=Math.max(s,o.measureText(e).width+2+(i?28:0))}),s+=a.offsetWidth-a.firstChild.offsetWidth,s=Math.min(s,450*t/800)},regex:{escape:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},patterns:{subdomain:"(?:[a-z]\\.|[a-z][a-z0-9-]{0,61}[a-z0-9]\\.)*?"},cssRegex:/^[\-\w]+$/,linkRegex:/^[\t ]*(((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,6}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))|mailto:|tel:)/i,onClickVariables:/(?:,|;|^)\s*([a-z_\$]+[a-z_\$0-9]*)(?:(\+\+|\-\-)|\(([0-9]*)\)|(?:\s*=\s*(?:(true|false|undefined|null)|'((?:[^'\\]|\\.)*)'|"((?:[^"\\]|\\.)*)"|([-+]?[0-9]*\.?[0-9]+))))\s*/gi,validEmail:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,validDomain:/((?:[a-z]\.|[a-z][a-z0-9-]{0,61}[a-z0-9]\.)*(?:[a-z]|[a-z][a-z0-9-]{0,61}[a-z0-9])(?:\.[a-z]{2,63}))/gi,validDomainFilter:/((?:\*\.|[a-z0-9]\.|[a-z0-9][a-z0-9-]{0,61}[a-z0-9]\.)*(?:[a-z0-9]|[a-z0-9][a-z0-9-]{0,61}[a-z0-9])(?:\.[a-z0-9]{2,63}))/gi,timeRegex:/^(?:([0-9]+):)?([0-9]+(?:\.[0-9]+)?)$/,trackRegex:/^\d+$/,templateVarsRegex:function(){return/\{\{([a-zA-Z_][a-zA-Z0-9_\.]*)(?:\|([^\}]*))?\}\}/g}},getTrackTime:function(e){var t;if(e&&Popcorn.isArray(e))return t=(t=e[3])&&t.replace("id=",""),{time:60*parseInt(e[2]||0,10)+parseFloat(e[3]),annotationId:t||void 0,track:parseInt(e[1],10)}},validateOnClick:function(r){var e,a=this.regex,t=!0;function n(){var e=d(r.timeInput,"hide")?r.timeInputSelect:r.timeInput,t="SELECT"===e.nodeName&&"default"===e.options[e.selectedIndex].value,n=("SELECT"===e.nodeName?e.options[e.selectedIndex]:e).value,i=a.timeRegex.exec(n);return!n||t||i&&(void 0===i[1]||parseFloat(i[2])<60)||-1<n.indexOf("id=")?(c(e,"valid"),!0):(u(e,"valid"),!1)}return void 0!==r.linkInput&&(t=(t=(e=r.linkInput.value).length&&!a.linkRegex.test(e)||e&&!i(e)?(u(r.linkInput,"valid"),!1):(c(r.linkInput,"valid"),!0))||a.templateVarsRegex().test(r.linkInput.value)),void 0!==r.trackInput&&(t=(!r.trackInput.value||a.trackRegex.test(r.trackInput.value)?(c(r.trackInput,"valid"),!0):(u(r.trackInput,"valid"),!1))&&t),void 0!==r.cssInput&&(t=(!r.cssInput.value||a.cssRegex.test(r.cssInput.value)?(c(r.cssInput,"valid"),!0):(u(r.cssInput,"valid"),!1))&&t),void 0!==r.varInput&&c(r.varInput,"valid"),void 0!==r.branchTimeInput?(r.branchTimeInput,(e=r.branchInputSelect)[e.selectedIndex].value,t=!!e&&t):(void 0!==r.timeInputSelect&&(t=n()&&t),void 0!==r.timeInput&&(t=n()&&t)),t},navigateToUrl:function(e,t){var n,i;return"string"==typeof e&&e.length&&(this.startsWith.call(e,"mailto:")?((n=document.createElent.body.appendChild(n),n.src=e,setTimeout(function(){document.body.removeChild(n)},0)):(t?i=window.open(e,t):f&&r.test(e)?window.location.href=e:i=window.open(e,"_blank"),i&&i.focus())),!1},microTemplate:function e(t,n,i){var r,a,o,s;if(t=t||document.createDocumentFragment(),i=i||{},Array.isArray(n)){for(a=0;a<n.length;a++)e(t,n[a],i);return i}if("object"==typeof n){for(a in r=document.createElement(n[""]||"div"),n)if(n.hasOwnProperty(a)&&a&&"#"!==a&&">"!==a){if(o=n[a],"@"===(a="."===a?"class":a)&&(a="placeholder"),"function"==typeof o){if(s=/^on([a-z]+)/i.exec(a)){r.addEventListener(s[1].toLowerCase(),function(t,n,i){return function(e){t.call(n,e,i)}}(o,r,n),!1);continue}o=o.call(r,n)}"string"!=typeof o&&!o.toString||r.setAttribute(a,k-"+n["#"].replace(/([a-z])([A-Z])/g,function(e,t,n){return t+"-"+n.toLowerCase()})),i[n["#"]]=r),n[">"]&&e(r,n[">"],i),t.appendChild(r),i}if("string"==typeof n){for((r=document.createElement("div")).innerHTML=n;r.childNodes.length;)t.appendChild(r.firstChild);return i}},addClass:c,hasClass:d,removeClass:u,inputPlaceholder:function(e,t){var n,i;return e?(void 0===p&&(p="placeholder"in document.createElement(e.tagName)),e.placeholder&&p||(t=t||"#AAA",n=e.style.color,i=e.getAttribute("placeholder"),""!==e.value&&e.value!==i||(e.value=i,e.style.color=t,e.setAttribute("data-placeholder-visible","true")),e.addEventListener("focus",function(){e.style.color=n,e.getAttribute("data-placeholder-visible")&&(e.setAttribute("data-placeholder-visible",""),e.value===i&&(e.value=""))},!1),e.addEventListener("blur",function(){""===e.value?(e.setAttribute("data-placeholder-visible","true"),e.value=i,e.style.color=t):(e.style.color=n,e.setAttribute("data-placeholder-visible",""))},!1),e.form&&e.form.addEventListener("submit",function(){e.getAttribute("data-placeholder-visible")&&e.value===i&&(e.value="")},!1)),e):null},sendEmail:function(e,i){var r=0;t.store.postJSON("/api/send_mail",e,function(e,t){"function"==typeof i&&(200!==e.status?i(e.status,e.code):i(e))},function(e,t,n){a.error(n),"timeout"===t&&r<1?(a.info("Error: Connection timeout. Trying again."),r++,o.ajax(this)):"function"==typeof i&&i("Error",n)})},getImageName:m,getAnnotationMessage:(h={},function(e,t,n,i){var r,a,o={basic360:function(){var e="360 "+i.inputType.toUpperCase(),t="image"===i.inputType?i.preview||m&&(e+=" - "+t),e},iframe:function(){return i.displayedName||i.customWidget||i.src},contents:function(){return i.title},quiz:function(){var e=s.dotget(i,"quiz.tent&&e.content[0],e=e&&e.text;return e||"Quiz"},image:function(){return m(i.url)},response:function(){var e=n&&n.pollData||i&&i.pollData;return e?e.questionSection.question||e.answerSection.answerType:"Response"},social:function(){var e;return i?(e=s.dotget(i,"twitter.url"))?"Twitter: "+e:(e=s.dotget(i,"facebook.url"))?"Facebook: "+e:(e=s.dotget(i,"linkedin.url"))?"Linkedin: "+e:"":""},ontime:function(){var e="";return i&&(e=(e+=i.addonTypeId?i.addonTypeId+" ":"")+(i.addonCommand?"- "+i.addonCommand+" ":""),i.addonTypeId&&"slidesync"===i.addonTypeId&&(e=(e+=i.addonCommandData.page?"- "+i.addonCommandData.page+" ":"")+(i.addonCommandData.asset?"- "+i.addonCommandData.asset+" ":""))),e||"On Time Event"}};return h[e]=h[e]||0,h[e]++,a=e.charAt(0).toUpperCase()+e.slice(1)+" - ",r=(r=o[e]?o[e]():r)||(t?i.text||h[e]:i.text||""),-1<["pop","hotlink","bookmark"].indexOf(e)&&(r=!(o=""+r)||o.length<=90?o||"":o.slice(0,90)+"..."),t?a+r:r}),uploadToS3:function(e,t,n){for(var i,r=new FormData,n=n||"unspecified",a=0;a<e.length;a++)i=e[a],r.append("file",i);r.append("folder",n);var o=new XMLHttpRequest;o.open("POST",hapyak.microserviceHost+"/api/upload/s3"),o.onload=function(){var e;200===o.status&&(e=JSON.parse(o.responseText),"function"==typeof t&&t(e.paths[0]))},o.send(r)}}}),define("player.wrappers",["utils","jquery.noconflict"],function(t,n){"use strict";var i={dailymotion:/dailymotion\.com\/(embed\/)?video\/([a-z0-9]+)/i,dailymotioninternal:/dmcdn\.net([a-zA-Z0-9\/\-]+\.swf)/,brightcoveVideo:/bctid=([0-9]+)/,brightcovePlayer:/bcpid([0-9]+)/,vimeo1:/player.vimeo.com\/video\/\d+/,vimeo2:/vimeo.com\/\d+/,wistia:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/(medias|embed)\/.*/,youtube:/^(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/,youtubeEmbed:/^https?:\/\/(?:www\.)?youtube\.com\/embed\/([A-Z0-9\-]+)($|\?.*)/i,vzaar:/^https?:\/\/(\w[\w_\-]*\.)*vzaar\.com\/videos\/(\d+)\/?[^\?]*(\?[^#]*)?/i,ustream:/^https?:\/\/(\w[\w_\-]*\.)*ustream\.tv\/embed\/recorded\/(\d+)/i,limelightv2:/LVPPlayerStandard/i},l=["videojs","vjs","_V_","VideoJS"],r={brightcove:function(e){var t=window.brightcove;return t&&t.experiences&&e&&e.experience&&t.experiences[e.experience.id]?e:!(!i.brightcoveVideo.test(e)||!i.brightcovePlayer.test(e))&&((t=document.createElement("a")).href=e,"link.brightcove.com"===t.hostname)},dailymotion:function(e){var t,n=window.DM;if(n&&n.Player&&n.Player._INSTANCES)for(t in n.Player._INSTANCES)if(n.Player._INSTANCES[t]===e)return e;return window.DailymotionPlayer&&e instanceof window.DailymotionPlayer||window.DailymotionPlayerFlash&&e instanceof window.DailymotionPlayerFlash||window.DailymotionPlayerHTML&&e instanceof window.DailymotionPlayerHTML||i.dailymotion.test(e)},dailymotioninternal:function(e){var t=window.Pg_Video;return t&&t.videoPlayer&&t.videoPlayer===e||e&&"OBJECT"===e.tagName&&e.getAttribute&&(t=e.getAttribute("data"))&&i.dailymotioninternName&&e.playVideo&&"maybe"},dailymotionv5:function(e,t){return"dailymotionv5"===t},flowplayer:function(e){return!!(window.flowplayer&&e&&e.conf&&e.video&&e.video.url)&&e},jplayer:function(e){var t;if("string"!=typeof e){if(!(t=n).jPlayer)return!1;if((e=t(e)).data&&e.data("jPlayer")&&t.jPlayer.prototype.instances[e.data("jPlayer").internal.instance])return e}return!1},mediaelement:function(e){var t,n=window.MediaElement,i=window.mejs;if(n&&i&&i.players)for(t in i.players)if(i.players[t]===e)return e;return!1},skeleton:function(e){return e},ustream:function(e){return(window.UstreamEmbed&&"http://ustream.tv"===e.host||!!i.ustream.test(e))&&e},videojs:function(e){var t,n,i,r,a,o,s;if(!e)return!1;for(i=0;i<l.length;i++)if(n=l[i],window[n]&&"function"==typeof window[n].Player){if(e instanceof(t=window[n]).Player)return e;break}if(t){if(a=(r="string"==typeof e)?e:"function"==typeof e.id?e.id():e.id,(s=(o=t.players)?o[a]:s)&&(r||e===s))return s;if("object"==typeof e&&(t.Player&&e instanceof t.Player)&&o)for(a in o)if(o.hasOwnProperty(a)&&o[a]===e)return e;return!1}},vimeo:function(e){return!(!i.vimeo1.test(e)&&!i.vimeo2.test(e))&&e},vzaar:function(e){return(window.vzPlayer&&e instanceof window.vzPlayer||!!i.vzaar.test(e))&&e},wistia:function(e){var t=window.Wistia;return t&&t._data&&t._data.video&&t._data.video[e.uuid]?e:"string"==typeof e&&(!!i.wistia.test(e)&&e)},youtube:function(e){return t.instanceOfElement(e,"HTMLIFrameElement")&&e.src&&i.youtubeEmbed.test(e.src)?e:!!(window.YT&&e&&window.YT.Player)&&(e instanceof window.YT.Player&&e)},limelightv2:function(e){return i.limelightv2.test(e)},vrviewer:function(e){return/mp4$/.test(e)}};function e(){}return e.prototype.detect=function(e,t){var n,i=t&&r[t]&&r[t](e,t);if(i)return t;for(n in r)if(r.hasOwnProperty(n)&&(!0===(i=r[n](e))||"probably"===i))return n;return!1},new e}),!function(l,c){if(c.addEventListener){function g(e,t){return new g.p.init(e,t||null)}for(var e,t=Array.prototype,n=Object.prototype,a=t.forEach,u=t.slice,p=n.hasOwnProperty,o=n.toString,i=l.Popcorn,r=[],d=!1,h={events:{hash:{},apis:{}}},f=l.requestAnimationFrame||l.webkitRequestAnimationFrameequestAnimationFrame||l.msRequestAnimationFrame||functions={put:function(t){Object.getOwnPropertyNames(t).forEach(function(e){this[e]=t[e]},this)}},m=(g.version="@VERSION",g.isSupported=!0,g.instances=[],(g.p=g.prototype={init:function(t,e){var n,i,s=this;if("function"==typeof t)return"complete"===c.readyState?void t(c,g):(r.push(t),void(d||(d=!0,i=function(){c.removeEventListener("DOMContentLoaded",i,!1);for(var e=0,t=r.length;e<t;e++)r[e].call(c,g);r=null},c.addEventListener("DOMContentLoaded",i,!1))));if("string"==typeof t)try{n=c.querySelector(t)}catch(e){throw new Error("Popcorn.js Error: Invalid media element selector: "+t)}if(this.media=n||t,n=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video",this[n]=this.media,this.options=e||{},this.id=this.options.id||g.guid(n),g.byId(this.id))throw new Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=!1,this.data={running:{cue:[]},timeUpdate:g.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new T},g.instances.push(this);var l=function(){var e,i,r,a,o;s.media.currentTime<0&&(s.media.currentTime=0),s.media.removeEventListener("loadedmetadata",l,!1),e=(e=s.media.duration)!=e?Number.MAX_VALUE:e+1,g.addTrackEvent(s,{start:e,end:e}),s.options.frameAnimation?(s.data.timeUpdate=function(){g.timeUpdate(s,{}),g.forEach(g.manifest,function(e,t){if(i=s.data.running[t]){a=i.length;for(var n=0;n<a;n++)r=i[n],(o=r._natives)&&o.frame&&o.frame.call(s,{},r,s.currentTime())}}),s.emit("timeupdate"),s.isDestroyed||f(s.data.timeUpdate)},s.isDestroyed||f(s.data.timeUpdate)):(s.data.timeUpdate=function(e){g.timeUpdate(s,e)},s.isDestroyed||s.media.addEventListener("timeupdate",s.data.timeUpdate,!1))};return Object.defineProperty(this,"error",{get:function(){return s.media.error}}),1<=s.media.readyState?l():s.media.addEventListener("loadedmetadata",l,!1),this}}).init.prototype=g.p,g.byId=function(e){for(var t=g.instances,n=t.length,i=0;i<n;i++)if(t[i].id===e)return t[i];return null},g.forEach=function(e,t,n){if(!e||!t)return{};var i,r;if(n=n||this,a&&e.forEach===a)return e.forEach(t,n);if("[object NodeList]"===o.call(e))for(i=0,r=e.length;i<r;i++)t.call(n,e[i],i,e);else for(i in e)p.call(e,i)&&t.call(n,e[i],i,en=e,t=u.call(argumeor(varflict:function(e){return e&&(l.Popcorn=i),g},error:function(e){throw new Error(e)},g+(+new Date+g.guid.counter)},sizeOf:function(e){var t,n=0;for(t in e)n++;return n},isArray:Array.isArray||function(e){return"[object Array]"===o.call(e)},nop:function(){},position:function(e){var t,n=e.getBoundingClientRect(),i={},e=(e.ownerDocument,c.documentElement),r=c.body,a=e.clientTop||r.clientTop||0,o=e.clientLeft||r.clientLeft||0,s=l.pageYOffset&&e.scrollTop||r.scrollTop,e=l.pageXOffset&&e.scrollLeft||r.scrollLeft,r=Math.ceil(n.top+s-a),s=Math.ceil(n.left+e-o);for(t in n)i[t]=Math.round(n[t]);return g.extend({},i,{top:r,left:s})},disable:function(e,t){if(!e.data.disabled[t]){if(e.data.disabled[t]=!0,t in g.registryByName&&e.data.running[t])for(var n,i=e.data.running[t].length-1;0<=i;i--)(n=e.data.running[t][i])._natives.end.call(e,null,n),e.emit("trackend",g.extend({},n,{plugin:n.type,type:"trackend",track:n}));return e}},enable:function(e,t){if(e.data.disabled[t]){if(e.data.disabled[t]=!1,t in g.registryByName&&e.data.running[t])for(var n,i=e.data.running[t].length-1;0<=i;i--)(n=e.data.running[t][i])._natives.start.call(e,null,n),e.emit("trackstart",g.extend({},n,{plugin:n.type,type:"trackstart",track:n}));return e}},destroy:function(e){var t,n,i,r,a=e.data.events,o=e.data.trackEvents;for(n in a){for(i in t=a[n])delete t[i];a[n]=null}for(r in g.registryByName)g.removePlugin(e,r);o.byStart.length=0,o.byEnd.length=0,e.isDestroyed||(e.data.timeUpdate&&e.media.removeEventListener("timeupdate",e.data.timeUpdate,!1),e.isDestroyed=!0),g.instances.splice(g.instances.indexOf(e),1)}}),g.guid.counter=1,g.extend(g.p,(e={},g.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(n){e[n]=function(e){var t;return"function"==typeof this.media[n]?(null!=e&&/play|pause/.test(n)&&(this.media.currentTime=g.util.toSeconds(e)),this.media[n](),this):null!=e?((t=this.media[n])!==(this.media[n]=e)&&this.emit("attrchange",{attribute:n,previousValue:t,currentValue:e}),tch("enable disable".split()}}),g.extend(g.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(e,t,n){var i,r,a=arguments.length;try{r=g.util.toSeconds(e)}catch(e){}if("number"==typeof(e="number"==typeof r?r:e)&&2===a)n=t,t=e,e=g.guid("cue");else if(1===a)t=-1;else if(i=this.getTrackEvent(e))"string"==typeof e&&2===a&&("number"==typeof t&&(n=i._natives.start),"function"==typeof t&&(n=t,t=i.start));else if(2<=a){if("string"==typeof t){try{r=g.util.toSeconds(t)}catch(e){}t=r}"number"==typeof t&&(n=n||g.nop()),"function"==typeof t&&(n=t,t=-1)}return g.addTrackEvent(this,{id:e,start:t,end:t+1,_running:!1,_natives:{start:n||g.nop,end:g.nop,type:"cue"}}),this},mute:function(e){e=null==e||!0===e?"muted":"unmuted";return"unmuted"==e&&(this.media.muted=!1,this.media.volume=this.data.state.volume),"muted"==e&&(this.data.state.volume=this.media.volume,this.media.muted{return this.mute(null!=e&&!e)},position:function(){return g.position(this.media)},toggle:function(e){return g[this.data.disabled[e]?"{return g.isArray(e)?g.forEach(e,function(e){for(var t in e)this.defaults(t,e[t])},this):(this.options.defaults||(this.options.defaults={}),this.options.defaults[e]||(this.options.defaults[e]={}),g.extend(this.options.defaults[e],t)),this}}),(g.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"}).Natives=g.Events.UIEvents+" "+g.Events.MouseEvents+" "+g.Events.Events,h.events.apiTypes=["UIEvents","MouseEvents","Events"],g.Events),v=h.events,t=h.events.apiTypes,y=m.Natives.split(/\s+/g),b=0,w=y.length;b<w;b++)v.hash[y[b]]=!0;t.forEach(function(e,t){v.apis[e]={};for(var n;r++)v.apis[e][n[r]]=!0}),g.events={isNative:function(e){return!!h.events.hash[e]},getInterface:function(e){if(!g.events.isNative(e))return!1;for(var t,n,i=h.events,r=i.apiTypes,a=i.apis,o=0,s=r.length;o<s;o++)if(a[n=r[o]][e]){t=n;break}return t},all:g.Events.Natives.split(/\s+/g),fn:{trigger:function(e,t){var n,i,r=this.data.events[e];if(r){if(n=g.events.getInterface(e))return(n=c.createEvent(n)).initEvent(e,!0,!0,l,1),this.media.dispatchEvent(n),this;for(i=r.slice();i.length;)i.shift().call(this,t)}return this},listen:function(t,e){var n,i,r=this,a=!0,o=g.events.hooks[t];if("function"!=typeof e)throw new Error("Popcorn.js Error: Listener is not a function");return this.data.events[t]||(a=!(this.data.evthis,{},e),o.bind&&(t=o.bind),o.handler&&(i=e,e=function(e){o.handler.call(r,e,i)}),a=!0,this.data.events[t]||(a=!(this.data.events[t]=[]))),this.data.events[t].push(e),!a&&-1<g.events.all.indexOf(t)&&this.media.addEventListener(t,function(e){if(r.data.events[t])for(n=r.data.events[t].slice();n.length;)n.shift().call(r,e)},!1),this},unlisten:function(e,t){var n,i=this.data.events[e];if(i){if("string"==typeof t)for(var r=0;r<i.length;r++)i[r].name===t&&i.splice(r--,1);else if("function"==typeof t)for(;-1!==n;)-1!==(n=i.indexOf(t))&&i.splice(n,1);else this.data.events[e]=null;return this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(e,t){var n=!1;this.media.readyState&&(t.call(this,e),n=!0),this.data.hooks.canplayall={fired:n}},handler:function(e,t){this.data.hooks.canplayall.fired||(t.call(this,e),this.data.hooks.canplayall.fired=!0)}}}},g.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(e){g.p[e[0]]=g.p[e[1]]=g.events.fn[e[0]]}),(g.addTrackEvent=function(e,t){var n,i,r;(n=(r=(t=new _(t)).id||t._id)?e.getTrackEvent(r):n)&&(i=!0,t=g.extend({},n,t),e.removeTrackEvent(r)),(t=t&&t._natives&&t._natives.type&&e.options.defaults&&e.options.defaults[t._natives.type]?g.extend({},e.options.defaults[t._natives.type],t):t)._natives&&(t._id=t.id||t._id||g.guid(t._natives.type),t._natives._setup&&(t._natives._setup.call(e,t),e.emit("tracksetup",g.extend({},t,{plugin:t._natives.type,type:"tracksetup",track:t})))),S(e,t),this.timeUpdate(e,null,!0),t._id&&g.addTrackEvent.ref(e,t),i?(r="cue"===t._natives.type?"cuechange":"trackchange",e.emit(r,{id:t.id,previousValue:{time:n.start,fn:n._natives.start},currentValue:{time:t.start,fn:t._natives.start},track:t})):t._natives&&e.emit("trackadded",g.extend({},t,{plugin:t._natives.type,type:"trackadded",track:t}))}).ref=function(e,t){return e.data.trackRefs[t._id]=t,e},g.removeTrackEvent=function(e,t){var n=e.getTrackEvent(t);n&&(n._natives._teardown&&n._natives._teardown.call(e,n),A(e,t),runningPlugins=e.data.running[n._natives.type],0<=(index=runningPlugins.indexOf(n))&&(n._running=!1,runningPlugins.splice(index,1),e.data.disabled[n._natives.type]||(n._natives.end.call(e,null,n),e.emit("trackend",g.extend({},n,{plugin:n.type,type:"trackend",track:n})))))},(g.addTrackEvent=function(e,t){var n,i,r;(n=(r=(t=new _(t)).id||t._id)?e.getTrackEvent(r):n)&&(i=!0,t=g.extend({},n,t),e.removeTrackEvent(r)),(t=t&&t._natives&&t._natives.type&&e.options.defaults&&e.options.defaults[t._natives.type]?g.extend({},e.options.defaults[t._natives.type],t):t)._natives&&(t._id=t.id||t._id||g.guid(t._natives.type),t._natives._setup&&(t._natives._setup.call(e,t),e.emit("tracksetup",g.extend({},t,{plugin:t._natives.type,type:"tracksetup",track:t})))),S(e,t),this.timeUpdate(e,null,!0),t._id&&g.addTrackEvent.ref(e,t),i?(r="cue"===t._natives.type?"cuechange":"trackchange",e.emit(r,{id:t.id,previousValue:{time:n.start,fn:n._natives.start},currentValue:{time:t.start,fn:t._natives.start},track:t})):t._natives&&e.emit("trackadded",g.extend({},t,{plugin:t._natives.type,type:"trackadded",track:t}))}).ref=function(e,t){return e.data.trackRefs[t._id]=t,e},(g.removeTrackEvent=function(e,t){var n=e.getTrackEvent(t);n&&(n._natives._teardown&&n._natives._teardown.call(e,n),A(e,t),g.removeTrackEvent.ref(e,t),n._natives&&e.emit("trackremoved",g.extend({},n,{plugin:n._natives.type,type:"trackremoved"})))}).ref=function(e,t){return delete e.data.trackRefs[t],e},(g.getTrackEvents=function(e){for(var t,n=[],i=e.data<r;a++)(t=i[a])._id&&n.push(t);return n}).ref=function(e){return e.data.trackRefs},(g.getTrackEvent=function(e,t){return e.data.,g.getLastTrackEventId=function(e){return e.data.history[e.data.history.length-1]},g.timeUpdate=function(e,t){var n,i,r,a,o,s=e.media.currentTime,l=e.data.trackEvents.previousUpdateTime,c=e.data.trackEvents,d=c.endIndex,u=c.startIndex,p=c.byStart.length,h=c.byEnd.length,f=g.registryByName,m="trackstart",v="trackend";if(l<=s){for(;c.byEnd[d]&&c.byEnd[d].end<=s;){if(a=(r=(n=c.byEnd[d])._natives)&&r.type,r&&!f[a]&&!e[a])return void g.removeTrackEvent(e,n._id);!0===n._running&&(n._running=!1,(o=e.data.running[a]).splice(o.indexOf(n),1),e.data.disabled[a]||(r.end.call(e,t,n),e.emit(v,g.extend({},n,{plugin:a,type:v,track:n})))),d++}for(;c.byStart[u]&&c.byStart[u].start<=s;){if(a=(r=(i=c.byStart[u])._natives)&&r.type,r&&!f[a]&&!e[a])return void g.removeTrackEvent(e,i._id);i.end>s&&!1===i._running&&(i._running=!0,e.data.running[a].push(i),e.data.disabled[a]||(r.start.call(e,t,i),e.emit(m,g.extend({},i,{plugin:a,type:m,track:i})))),u++}}else if(s<l){for(;c.byStart[u]&&c.byStart[u].start>s;){if(a=(r=(i=c.byStart[u])._natives)&&r.type,r&&!f[a]&&!e[a])return void g.removeTrackEvent(e,i._id);!0===i._running&&(i._running=!1,(o=e.data.running[a]).splice(o.indexOf(i),1),e.data.disabled[a]||(r.end.call(e,t,i),e.emit(v,g.extend({},i,{plugin:a,type:v,track:n})))),u--}for(;c.byEnd[d]&&c.byEnd[d].end>s;){if(a=(r=(n=c.byEnd[d])._natives)&&r.type,r&&!f[a]&&!e[a])return void g.removeTrackEvent(e,n._id);n.start<=s&&!1===n._running&&(n._running=!0,e.data.running[a].push(n),e.data.disabled[a]||(r.start.call(e,t,n),e.emit(m,g.extend({},n,{plugin:a,type:m,track:n})))),d--}}c.endIndex=d,c.startIndex=u,c.previousUpdateTime=s,c.byStart.length<p&&c.startIndex--,c.byEnd.length<h&&c.endIndex--},g.extend(g.p,{getTrackEvents:function(){return g.getTrackEvents.call(null,this)},getTrs,e)},getLastTrackEventId:function(){return g.getLastTrackEventId.call(null,this)},removeTrackEvent:function(e){return g.removeTrackEvent.call(null,this,e),this},removePlugin:function(e){return g.removePlugin.call(null,this,e),this},timeUpdate:function(e){return g.timeUpdate.call(null,this,e),this},destroy:function(){return g.destroy.call(null,this),this}}),g.manifest={},g.registry=[],g.registryByName={},(g.plugin=function(a,r,o){var s,l,c,e,d,t;if(!(0<=g.protect.natives.indexOf(a.toLowerCase())))return s="function"==typeof r,l=["start","end","type","manifest"],c=["_setup","_teardown","start","end","frame"],e={},d=function(e,t){return e=e||g.nop,t=t||g.nop,function(){e.apply(this,arguments),t.apply(this,arguments)}},g.manifest[a]=o=o||r.manifest||{},c.forEach(function(e){var t,n;r[e]=(t=r[e]||g.nop,n=a,function(){if(g.plugin.debug)return t.apply(this,arguments);try{return t.apply(this,arguments)}catch(e){g.plugin.errors.push({plugin:n,thrown:e,source:t.toString()}),this.emit("pluginerror",g.plugin.errors)}})}),g.p[a]=e[a]=function(e,t){var n,i;if(e&&!t)t=e,e=null;else{if(i=this.getTrackEvent(e))return i._natives._update?(t.hasOwnProperty("start")&&(i.start=t.start),t.hasOwnProperty("end")&&(i.end=t.end),i._natives._update.call(this,i,t),A(this,i._id),S(this,i),n="cue"===i._natives.type?"cuechange":"trackchange",this.emit(n,{id:i.id||i._id,previousValue:{time:i.start,fn:i._natives.start},currentValue:{time:i.start,fn:i._natives.start},track:i})):(t=g.extend({},i,t),g.addTrackEvent(this,t)),this;t.id=e}return this.data.running[a]=this.data.running[a]||[],n=this.options.defaults&&this.options.defaults[a]||{},i=g.extend({},n,t),function(e,n){var i,t,r;return n&&(n.ranges&&g.isArray(n.ranges)?g.forEach(n.ranges,function(e){e=g.extend({},n,e);delete e.ranges,this[a](e)},this):(i=n._natives={},t="",g.extend(i,e),n._natives.tyi.end=i.end||i.out,n.once&&(i.end=d(i.end,function(){this.removeTrackEvent(n._id)})),i._teardown=d(function(){var e=u.call(arguments),t=this.data.running[i.type];e.unshift(null),e[1]._running&&t.splice(t.indexOf(n),1)&&i.end.apply(this,e)},i._teardown),i._teardown=d(i._teardown,function(){this.emit("trackteardown",g.extend({},n,{plugin:a,type:"trackteardown"}))}),n.compose=n.compose&&n.compose.split(" ")||[],n.effect=n.effect&&n.effect.split(" ")||[],n.compose=n.composrEach(function(e){t=g.compositions[e]||{},c.forEach(function(e){i[e]=d(i[e],t[e])})}),n._natives.manifest=o,"start"in n||(n.start=n.in||0),n.end||0===n.end||(n.end=n.out||Number.MAX_VALUE),p.call(n,"toString")||(n.toString=function(){var e=["start: "+n.start,"end: "+n.end,"id: "+(n.id||n._id)];return null!=n.target&&e.push("target: "+n.target),a+" ( "+e.join(", ")+" )"}),n.target||(r="options"in o&&o.options,n.target=r&&"target"in r&&r.target),n._natives&&(n._id=g.guid(n._natives.type)),g.addTrackEvent(this,n),g.forEach(e,function(e,t){-1===l.indexOf(t)&&this.on(t,e)},this))),this}.call(this,s?r.call(this,i):r,i)},o&&g.extend(r,{manifest:o}),g.registry.push(g.extend(e,t={fn:e[a],definition:r,base:r,parents:[],name:a},{type:a})),g.registryByName[a]=t,e;g.error("'"+a+"' is a protected function name")}).errors=[],g.plugin.debug="@VERSION"===g.version,g.removePlugin=function(e,t){if(!t){if(t=e,e=g.p,0<=g.protect.natives.indexOf(t.toLowerCase()))return void g.error("'"+t+"' is a protected function name");for(var n=g.registry.length,i=0;i<n;i++)if(g.registry[i].name===t)return g.registry.splice(i,1),delete g.registryByName[t],delete g.manifest[t],void delete e[t]}for(var r=e.data.trackEvents.byStart,a=e.data.trackEvents.byEnd,o=e.data.trackEvents.animating,s=0,l=r.length;s<l;s++)r[s]&&r[s]._natives&&r[s]._natives.type===t&&(r[s]._natives._teardown&&r[s]._natives._teardown.call(e,r[s]),r.splice(s,1),l--,e.data.trackEvents.startIndex<=--s&&(e.data.trackEvents.startIndex--,e.data.trackEvents.endIndex--)),a[s]&&a[s]._natives&&a[s]._natives.type===t&&a.splice(s,1);for(s=0,l=o.length;s<l;s++)o[s]&&o[s]._natives&&o[s]._natives.type===t&&(o.splice(s,1),s--,l--)},g.compositions={},g.plugin.effect=g.effect=g.compose=function(e,t,n){g.manifest[e]=n=n||t.manifest||{},g.compositions[e]=t};var E=/^(?:\.|#|\[)/,k=(g.dom={debug:!1,find:function(e,t){var n=null;if(t=t||c,e){if(!E.test(e)&&null!==(n=c.getElementById(e)))return n;try{n=t.querySelector(e)}catch(e){if(g.dom.debug)throw new Error(e)}}ree:"",success:g.nop,type:"GET",async:!0,xhr:function(){return new l.XMLHttpRequest}};(g.xhr=function(e){var t;if(e.dataType=e.dataType&&e.dataType.toLowerCase()||null,!e.dataType||"jsonp"!==e.dataType&&"script"!==e.dataType)return(t=g.extend({},x,e)).ajax=t.xhr(),t.ajax?("GET"===t.type&&t.data&&(t.url+=(k.test(t.url)?"&":"?")+t.data,t.data=null),t.ajax.open(t.type,t.url,t.async),t.ajax.send(t.data||null),g.xhr.httpData(t)):void 0;g.xhr.getJSONP(e.url,e.success,"script"===e.dataType)}).httpData=function(e){var t,n,i=null,r=null;return e.ajax.onreadystatechange=function(){if(4===e.ajax.readyState){try{i=JSON.parse(e.ajax.responseText)}catch(e){}if(!(t={xml:e.ajax.responseXML,text:e.ajax.responseText,json:i}).xml||!t.xml.documentElement){t.xml=null;try{n=new DOMParser,(r=n.parseFromString(e.ajax.responseText,"text/xml")).getElementsByTagName("parsererror").length||(t.xml=r)}catch(e){}}e.dataType&&(t=t[e.dataType]),e.success.call(e.ajax,t)}},t},g.xhr.getJSONP=function(e,t,n){var i,r,a=c.head||c.getElementsByTagName("head")[0]||c.documentElement,o=c.createElement("script"),s=!1,l=/(=)\?(?=&|$)|\?\?/;n||(null!==(r=e.match(/(callback=[^&]*)/))&&r.length?(r=r[1].split("=")[1],i=g.guid(r="?"===r?"jsonp":r),e=e.replace(/(callback=[^&]*)/,"callback="+i)):(i=g.guid("jsonp"),e=(r=(e=l.test(e)?e.replace(l,")[0]+"?",r[1]&&(e+=r[1]+"&"),e+="callback="+i),window[i]=function(e){t&&t(e),s=!0}),o.addEventListener("load",function(){n&&t&&t(),s&&delete window[i],a.removeChild(o)},!1),o.src=e,a.i.getJSONP,g.getScript=g.xhr.getScript=function(e,t){return g.xhr.getJSONP(e,t,!0)},g.util={toSeconds:function(e,t){var n,i,r;return"number"==typeof e?e:("string"!=typeof e||/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/.test(e)||g.error("Invalid time format"),-1<(i=(e=e.split(":"))[n=e.length-1]).indexOf(";")&&(i=i.split(";"),r=0,t&&"number"==typeof t&&(r=parseFloat(i[1],10)/t),e[n]=parseInt(i[0],10)+r),t=e[0],{1:parseFloat(t,10),2:60*parseInt(t,10)+parseFloat(e[1],10),3:3600*parseInt(t,10)+60*parseInt(e[1],10)+parseFloat(e[2],10)}[e.length||1])}},g.p.cue=g.p.exec,g.protect={natives:function(e){if(Object.keys)return Object.keys(e);var t,n=e,i=[];for(t in n)p.call(n,t)&&i.push(t);return i}(g.p).map(function(e){return e.toLowerCase()})},g.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(e,t){var n=g.p[t];g.p[t]=function(){return"undefined"!=typeof console&&console.warn&&(console.warn("Deprecated method '"+t+"', "+(null==e?"do not use.":"use '"+e+"' instead.")),g.p[t]=n),g.p[e].apply(this,[].slice.call(arguments))}}),l.Popcorn=g}else{l.Popcorn={isSupported:!1};for(var C="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effecs+/);C.length;)l.Popcorn[C.shift()]=function(){}}function _(e){s.put.call(this,e)}function T(){this.byStart=[{start:-1,end:-1}],this.byEnd=[{start:-1,end:-1}],this.animating=[],this.startIndex=0,this.endIndex=0,this.previousUpdateTime=-1}function S(e,t){var n,i,r=e.data.trackEvents.byStart,a=e.data.trackEvents.byEnd;for(t&&t._id&&e.data.history.push(t._id),t.start=g.util.toSeconds(t.start,e.options.framerate),t.end=g.util.toSeconds(t.end,e.options.framerate),n=r.length-1;0<=n;n--)if(t.start>=r[n].start){r.splice(n+1,0,t);break}for(i=a.length-1;0<=i;i--)if(t.end>a[i].end){a.splice(i+1,0,t);break}n<=e.data.trackEvents.startIndex&&t.start<=e.data.trackEvents.previousUpdateTime&&e.data.trackEvents.startIndex++,i<=e.data.trackEvents.endIndex&&t.end<e.data.trackEvents.previousUpdateTime&&e.data.trackEvents.endIndex++,t.end>e.media.currentTime&&t.start<=e.media.currentTime&&(t._running=!0,e.data.running[t._natives.type].push(t),e.data.disabled[t._natives.type]||(t._natives.start.call(e,null,t),e.emit("trackstart",g.extend({},t,{plugin:t._natives.type,type:"trackstart",track:t}))))}function A(e,t){for(var n,i,r,a,o,s=e.data.trackEvents.byStart.length,l=0,c=0,d=[],u=[],p=[],h=[];-1<--s;)n=e.data.trackEvents.byStart[l],i=e.data.trackEvents.byEnd[l],n._id||(d.push(n),u.push(i)),n._id&&(n._id!==t&&d.push(n),i._id!==t&&u.push(i),n._id===t&&(c=l,a=n)),l++;if((a=e.getTrackEvent(t))&&-1<(l=(o=e.data.running[a._natives.type]).indexOf(a))&&o.splice(l,1),l=0,s=e.data.trackEvents.animating.length)for(;-1<--s;)(r=e.data.trackEvents.animating[l])._id||p.push(r),r._id&&r._id!==t&&p.push(r),l++;c<=e.data.trackEvents.startIndex&&e.data.trackEvents.startIndex--,c<=e.data.trackEvents.endIndex&&e.data.trackEvents.endIndex--,e.data.trackEvents.byStart=d,e.data.trackEvents.byEnd=u,e.data.trackEvents.animating=p;for(var f=e.data.history.length,m=0;m<f;m++)e.data.history[m]!==t&&h.push(e.data.history[m]);e.data.history=h}}(window,window.document),define("popcorn",function(e){return function(){return e.Popcorn}}(this)),define("utils.accruedTime",["module","utils.embed","lodash.noconflict"],function(e,t,n,i){"use strict";var r=Date.now(),e=e.config(),a=t.dotget(e,"enabled");return{post:function(e){var t;!e||!a||Date.now()-r<500||"function"!=typeof e.slicePlayTime||"function"!=typeof e.duration||((t=window.self!==window.top?window.parent:window)&&n.isFunction(t.postMessage)&&t.postMessage(JSON.stringify({context:"hapyak-timing",event:"Accrued Time",properties:{"Video Duration":e.duration(),"Video Slice Play Time Accrued":e.slicePlayTime(!1)}}),"*"),r=Date.now())}}}),definewhit|witr(0,4))?!0:t.match(/iPad/i)}.abs(window.orientation)},setElementStyles:function(e,t){Object.assign(e.style,t)},initFullscreenChange:function(e,t){s=!s,this.resize(e,t)},resize:function(e,t){e.videoWidth()||e.width(),e.videoHeight()||e.height();var n,i,r=document.querySelectorAll(".hapyak-annotation-container"),a=t.querySelector("video"),o=this;if(a&&(r&&(this.mobileCheck()||this.isIpad())))for(n in r){if("object"!=typeof(t=r[+n]))return;(s&&this.isLandscape()||!s)&&(this.setElementStyles(a,{top:"0",height:"100%",width:""}),this.setElementStyles(t,{top:"0",left:"auto"})),s&&(this.isLandscape(),this.isLandscape()&&(o.setElementStyles(a,{left:"0",top:"0",height:"100%"}),document.querySelector("div.hapyak-player")&&(i=document.querySelector("div.hapyak-player"),o.setElementStyles(i,{padding:"0px"}))))}}}}),define("utils.externalContentManager",[],function(){function i(e){this.element=e,this.x=0,this.y=0,this.top=0,this.bottom=0,this.left=0,this.right=0,this.width=0,this.height=0,this.updatePosition=function(){var e=this.element.getBoundingClientRect();this.x=e.x,this.y=e.y,this.top=e.top,this.bottom=e.bottom,this.left=e.left,this.right=e.right,this.width=e.width,this.height=e.height},this.updatePosition()}function e(){var e=[];this.elements=function(){return e},this.update()}return e.prototype.getCumulativeOffsets=function(e){var n=e.getBoundingClientRect(),e=this.elements();return this.update(),e.reduce(function(e,t){return t.updatePosition(),t.x<n.x&&(e.left+=n.x-t.x),t.x+t.width>n.x+n.width&&(e.right+=t.x+t.width-(n.x+n.width)),t.y<n.y&&(e.top+=n.y-t.y),t.y+t.height>n.y+n.height&&(e.bottom+=t.y+t.height-(n.y+n.height)),e},{top:0,bottom:0,left:0,right:0})},e.prototype.update=function(){var e=document.querySelectorAll(".hapyak-external-content"),n=this;Array.prototype.forEach.call(e,function(e){var t=n.findContentObject(e);t?t.updatePosition():n.elements().push(new i(e))})},e.prototype.findContentObject=function(n){var e=this.elements();if(idx=-1,e.some(function(e,t){if(e.element===n)return idx=t,!0}),-1!==idx)return e[idx]},new e}),define("touch",[],function(){"use strict";return function(n,r,a,t,e){var o=0,s=e||{};function l(e){var t,n=isNaN(e.pageX)?(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.clientY+document.body.scrollTop+document.documentElement.scrollTop):(t=e.pageX,e.pageY);a(e||window.event,t,n)}function c(e){o=0,t&&t(e||window.event),document.removeEventListener("mousemove",l,!1),document.removeEventListener("mouseup",c,!1),document.removeEventListener("mouseenter",c,!1)}function i(e){var t,n,i=o;if(!s.rightClick&&(3===e.which||2===e.button||e.ctrlKey))return!1;if(1===e.button&&!s.middleClick)return!1;if(o=1,r){if(e=e||window.event,n=isNaN(e.pageX)?(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.clientY+document.body.scrollTop+document.documentElement.scrollTop):(t=e.pageX,e.pageY),!(t=r(e||window.event,t,n))&&void 0!==t||!e.preventDefault)return void(o=i);e.preventDefault()}a&&document.addEventListener("mousemove",l,!1),document.addEventListener("mouseup",c,!1),document.addEventListener("mouseenter",c,!1)}function d(e){e=e.changedtouches&&e.changedtouches.length&&e.changedtouches[0]||e.touches&&e.touches.length&&e.touches[0]||e||window.event;return a(e,e.pageX,e.pageY),!1}function u(e){o=0,t&&t(e&&e.changedtouches?e.changedtouches[0]:e),document.removeEventListener("touchmove",d,!1),document.removeEventListener("touchend",u,!1)}function p(e){var t;if(o=2,e.preventDefault&&e.preventDefault(),n.removeEventListener("mousedown",i,!1),r){if(t=e.touches[0],!(t=r(t||window.event,t.pageX,t.pageY))&&void 0!==t||!e.preventDefault)return;e.preventDefault()}a&&document.addEventListener("touchmove",d,!1),document.addEventListener("touchend",u,!1)}n.addEventListener("mousedown",i,!0),n.addEventListener("touchstart",p,!1),this.remove=function(){n.removeEventListener("mousedown",i,!1),n.removeEventListener("touchstart",p,!1),1<o?u():o&&c()},this.target=function(){return n}}}),define("environment",["lodash","logging"],function(f,m){"use strict";function v(){m.warn("This Environment scope has been destroyed. Don't use it anymore.")}function e(e,t){var a,d=t||{},u=d.storage||{},p=!1,h=[];a=new function s(e,r,t){var l,n,i,o=!0;function c(n,i,r,t){var e=n.values[i];!t&&e&&e!==r&&e.owner===n||(r?n.values[i]=r:n.values.hasOwnProperty(i)&&(n.values[i]=void 0),n.keys=null,f.each(n.children,function(e){c(e,i,r,t)}),f.each(n.observers,function(e,t){t!==i&&0!==t.indexOf(i+".")||f.each(f.clone(e),function(e){e(n.obj,i,r&&r.value)})}),i&&n.observers.hasOwnProperty("")&&f.each(f.clone(n.observers[""]),function(e){e(n.obj,i,r&&r.value)}))}if(l={obj:this,parent:r,children:{},values:{},observers:{},methods:{},frozen:!1,name:e,keys:null},r.children[e]=l,f.extend(l.values,r.values),f.extend(l.methods,r.methods),this.name=function(){return l.name},this.set=function(e,t,n){var i,r,a;if(e){if(!(1<(r="[object Array]"===Object.prototype.toString.call(e)?e:e.split("/")).length)){if(!l.frozen){if(e=(a=r[0].split("."))[0],a=a[1],(i=l.values[e])&&i.owner===l){if(void 0!==a){if("object"!=typeof i.value)return void m.error('Environment cannot set property "'+a+'" on non-object "'+e+'"');if(i.value[a]===t)return;i.value[a]=t}else{if(i.value===t)return;i.value=t}void 0!==n&&(i.temp=!!n)}else i={name:e,owner:l,value:t,temp:!!n},void 0!==a&&(i.value={},i.value[a]=t);i.temp||(o=!0),c(l,e,i),p||n||!d.autosave||(Array.isArray(d.autosave)?this.save.apply(this,d.autosave):this.save(d.autosave))}return this}a=(r=r.slice(0)).shift(),this.scope(a).set(r,t)}},this.get=function(e){var t,n,i,r;if(e){if(1<(n="[object Array]"===Object.prototype.toString.call(e)?e:e.split("/")).length)return i=n.shift(),l.children[i]?l.children[i].obj.get(n):void 0;if(e=(r=n[0].split(".")).shift(),t=l.values[e],r.length&&t){for(t=t.value;r.length&&t&&"object"==typeof t;)t=t[e=r.shift()];return t}return t&&t.value}},this.clear=function(e,t){var n,i;e&&(e=(i=e.split("."))[0],i=i[1],(n=l.values[e])&&n.owner===l&&(void 0!==i&&"object"==typeof n.value&&delete n.value[i],o=!0,c(l,e,r.values&&r.values[e],!0)),d.autosave&&!t&&(Array.isArray(d.autosave)?this.save.apply(this,d.ausave)))},this.freeze=function(){l.frozen=!0},this.unfreeze=function(){l.frozen=!1},this.frozen=function(){return l.frozen},this.observe=function(e,t){if(e=void 0===t?(t=e,""):e||"","function"!=typeof t)throw new Error("Environment observe callback must a function.");if(l.observers[e]){if(0<=l.observers[e].indexOf(t))return this}else l.observers[e]=[];return l.observers[e].push(t),this},this.unobserve=function(e,t){if(l.observers[e])return 0<=(t=l.observers[e].indexOf(t))&&l.observers[e].splice(t,1),this},this.notify=function(e){var t;if(l.observers.hasOwnProperty(e))for(t=l.observers[e],i=0;i<t.length;i++)t[i](l.obj);return this},this.register=function(e,t){var n;if((n=l.methods[e])&&n.owner===l){if(n.method===t)return;n.method=t}else n={name:e,owner:l,method:t};return function e(t,n,i,r){var a,o=t.methods[n];if(r||!o||o===i||o.owner!==t)for(a in i?t.methods[n]=i:delete t.methods[n],t.children)t.children.hasOwnProperty(a)&&e(t.children[a],n,i,r)}(l,e,n),this},this.execute=function(e){var t=Array.prototype.slice.call(arguments,0),e=l.methods[e];if(e)return t[0]=this,e.method.apply(this,t)},this.scope=function(e,t,n){var i,r,a,o;if(e){if(1<(r="[object Array]"===Object.prototype.toString.call(e)?e:e.split("/")).length&&(r=r.slice(0),a=this.scope(r.shift()),r.length))return a.scope(r,t);if(e=r[0],i=l.children[e]){if(t)for(o in t)t.hasOwnProperty(o)&&i.obj.set(o,t[o]);return i.obj}return n?void 0:i=new s(e,l,t)}},this.rename=function(e){var t;if(l.name!==e)return t=l.name,l.name=e,r.children[e]=l,delete r.children[t],d.autosave?Array.isArray(d.autosave)?this.clear.apply(this,d.autosave):this.clear(d.autosave):h.push({name:t,parent:r}),this},this.destroy=function(){var e,t;for(e in o=!0,l.children)l.children.hasOwnProperty(e)&&(l.children[e].obj.destroy(),delete l.children[e]);for(e in l.values)l.values.hasOwnProperty(e)&&this.clear(e,!0);for(e in l.observers)if(l.observers.hasOwnProperty(e))for(t=l.observers[e];t.length;)this.unobserve(e,t[0]);for(e in d.autosave?Array.isArray(d.autosave)?this.save.apply(this,d.autosave):this.save(d.autosave):h.push({name:name,parent:r}),this)this.hasOwnProperty(e)&&"function"==typeof this[e]&&(this[e]=v);delete r.children[l.name]},this.save=function(){var e,t=Array.prototype.slice.call(arguments,0);if(o){for(e in u.save&&(t.unshift(l),u.save.apply(this,t)),o=!1,l.children)l.children.hasOwnProperty(e)&&l.children[e].obj.save.apply(l.children[e].obj,arguments);if(!l.parent&&u.clear)for(;h.length;)Array.isArray(d.autosave)?this.clear.apply(this,d.autosave):this.clear(d.autosave)}return this},this.load=function(){var e;if(u.load)return p=!0,e=u.load.apply(this,arguments),function e(t,n){var i,r;for(i in n)n.hasOwnProperty(i)&&((r=n[i])&&"object"==typeof r?e(t.scope(i),r):void 0!==r&&t.set(i,r))}(a,e),p=o=!1,this},this.keys=function(e){if(!l.keys)for(var t in l.keys=[],l.values)l.values.hasOwnProperty(t)&&void 0!==l.values[t]&&l.keys.push(t);return void 0===e?l.keys.slice(0):l.keys[e]},this.children=function(e){return l.scopeKeys||(l.scopeKeys=Object.keys(l.children)),void 0===e?l.scopeKeys.slice(0):l.scopeKeys[e]},Object.defineProperty(this.keys,"count",{get:function(){return l.keys||(l.keys=Object.keys(l.values)),l.keys.length}}),Object.defineProperty(this.children,"count",{get:function(){return l.scopeKeys||(l.scopeKeys=Object.keys(l.children)),l.scopeKeys.length}}),t)for(n in t)t.hasOwnProperty(n)&&this.set(n,t[n])}("",{children:{}},e),this.name=function(){return""},this.set=function(e,t,n){return a.set(e,t,n),this},this.get=function(e){return a.get(e)},this.clear=function(e,t){a.clear(e,t)},this.scope=function(e,t,n){return a.scope(e,t,n)},this.freeze=function(){return a.freeze()},this.unfreeze=function(){return a.unfreeze()},this.frozen=function(){a.frozen()},this.observe=function(e,t){return a.observe(e,t)},this.unobserve=function(e,t){return a.unobserve(e,t)},this.notify=function(e){return a.notify(e)},this.register=function(e,t){return a.register(e,t)},this.execute=function(){return a.execute.apply(a,arguments)},this.rename=function(){m.warn("Cannot rename top-level Environment scope.")},this.destroy=function(){a.destroy()},this.save=function(){return a.save.apply(a,arguments)},this.load=function(){return a.load.apply(a,arguments)},this.keys=function(e){return a.keys(e)},this.children=function(e){return a.children(e)},Object.defineProperty(this.keys,"count",{get:function(){return a.keys.count}}),d.migrate&&d.storage&&d.storage.migrate.call(this,"string"==typeof d.migrate?d.migrate:d.autosave)}return e.localStorage={move:function(e,t){var n,i,r,a,o=[];try{for(n=0;n<localStorage.length;n++)i=localStorage.key(n),e.test(i)&&o.push(i);for(n=0;n<o.length;n++)i=o[n],r=localStorage.getItem(o[n]),a=i.replace(e,t),localStorage.hasOwnProperty(a)||(localStorage.setItem(a,r),localStorage.removeItem(i))}catch(e){}},migrate:function(e){var t,n,i,r,a=0,o=e+".",s=o.length,l=[];try{a=parseFloat(localStorage.getItem((e||"localStorage")+"-version"))}catch(e){return}if(!a){for(t=0;t<localStorage.length;t++)(n=localStorage.key(t)).length>s&&n.substr(0,s)===o&&l.push(n);for(r=/\./g,t=0;t<l.length;t++){n=l[t];try{i=localStorage.getItem(n),localStorage.setItem(n.replace(r,"/"),i),localStorage.removeItem(n)}catch(e){}}try{localStorage.setItem((e||"localStorage")+"-version",1)}catch(e){}}},clear:function(e,t){for(var n=e;n&&n.name;)(void 0).unshift(n.name),n=n.parent;(void 0).unshift(t),e=(void 0).join("/");try{localStorage.removeItem(e)}catch(e){}},save:function(e,t){var n,i,r,a={},o=[],s=!0;for(i in e.values)if(e.values.hasOwnProperty(i)&&(n=e.values[i])&&!n.temp&&n.owner===e&&void 0!==n.value)try{"object"==typeof n.value&&JSON.stringify(n.value),a[i]=n.value,s=!1}catch(e){}for(r=e;r&&r.name;)o.unshift(r.name),r=r.parent;o.unshift(t),i=o.join("/");try{s?localStorage.removeItem(i):(localStorage.setItem(i,JSON.stringify(a)),localStorage.setItem((t||"localStorage")+"-version",1))}catch(e){}},load:function(e,t,n){var i,r,a=this,o=e+(n||"/"),s=o.length;function l(e,t){var n,i,r;try{n=localStorage.getItem(e)}catch(e){return}if(n&&"{}"!==n)try{if(i=JSON.parse(n),t)a.scope(t,i);else for(r in i)i.hasOwnProperty(r)&&a.set(r,i[r])}catch(e){}}if(n=n||"/",void 0!==t)l(e+(t?n+t:""),t);else for(l(e,""),i=0;i<localStorage.length;i++)(r=localStorage.key(i)).length>s&&r.substr(0,s)===o&&l(r,r.substr(s))}},window.addEventListener("storage",function(e){},!1),e}),define("hapyak.player.timer",["logging","promise!configuration","module"],function(a,t,e){"use strict";var n=.5,r=function(e){for(var t={},n=0,i=e.length;n<i;n++)void 0===t[e[n]]?t[e[n]]=e[n]:a.error("duplicate name ("+e[n]+") in enum");return t}(["INDETERMINATE","PLAYING","PAUSED","SEEK_FORWARD","SEEK_BACKWARD"]),e=e.config();function i(e){this._running=!1,this._timerId=null,this._runIntervalMs=1e3*(t.player&&t.player.runInterval||n),this._previousTimeData={clock:null,playhead:null},this._playTime=0,this._slicePlayTime=this._resetSlicePlayTime(),this._currentPlayState=r.INDETERMINATE,this._previousPlayState=r.INDETERMINATE,this._timeDataProvider=null,this._duration=null,this._sliceSize=null,a.dev("Timer Created")}return e.ltiContext&&"student"===e.ltiContext.resolved_role&&(n=.25),i.prototype={setTimeDataProvider:function(e){if("function"==typeof e)return this._timeDataProvider=e,this;a.error("timeDataProvider must be a function")},setDuration:function(e){e&&!isNaN(e)&&"number"==typeof e?(a.dev("timer: duration="+e),this._duration=e,this._sliceSize=this._getSliceSize(e)):(this._duration=e=1/0,this._sliceSize=this._getSliceSize(e),a.warn("invalid duration passed to timer"))},start:function(){return a.dev("starting hapyak.player.timer, interval ("+this._runIntervalMs+"ms)"),this._running=!0,this._run(),this},stop:function(){return this._running=!1,this._timerId&&window.clearInterval(this._timerId),this},getPlayTime:function(){return this._playTime},getSlicePlayTime:function(e){var t,n={};for(t in this._slicePlayTime)n[t]=this._slicePlayTime[t];return e&&this._resetSlicePlayTime(),n},getPlayState:function(){return this._currentPlayState},dispose:function(){this.stop()},_run:function(){var e=this;e._running&&(0<e._duration&&e._update(),e._timerId=window.setTimeout(function(){e._run()},e._runIntervalMs))},_update:function(){var e=this._getCurrentTimeData(),t=this._previousTimeData,n=e.playhead-t.playhead,i=e.clock-t.clock;null!==t&&(.5+i<n?this._setState(r.SEEK_FORWARD):0<n?(this._setState(r.PLAYING),this._updatePlayTime(e.playhead,t.playhead)):0==n?this._setState(r.PAUSED):n<-.25?this._setState(r.SEEK_BACKWARD):this._setState(r.INDETERMINATE)),this._previousTimeData=e},_updatePlayTime:function(e,t){var n=e-t,i=this._getSliceForTime(e,this._sliceSize),r=this._getSliceForTime(t,this._sliceSize);isNaN(i)||isNaN(r)?a.captureException(new TypeError("currentSlice or previousSlice is NaN. currentTime:"+e+", previousTime:"+t+", sliceSize:"+this._sliceSize+".")):(this._playTime+=n,i===r?this._slicePlayTime["s"+i]=Math.ceil(100*(this._slicePlayTime["s"+i]+n))/100:(a.dev("before update current slice ("+i+") = ("+this._slicePlayTime["s"+i]+")"),a.dev("before update previous slice ("+r+") = ("+this._slicePlayTime["s"+r]+")"),n=this._getTimeForSlice(r),this._slicePlayTime["s"+i]=Math.ceil(100*(this._slicePlayTime["s"+i]+e-n))/100,this._slicePlayTime["s"+r]=Math.ceil(100*(this._slicePlayTime["s"+r]+n-t))/100,a.dev("currentTime="+e+", previousTime="+t+", boundaryTime="+n+", sliceSize="+this._sliceSize),a.dev("   current slice ("+i+") = ("+this._slicePlayTime["s"+i]+") previous slice ("+r+") = ("+this._slicePlayTime["s"+r]+")")))},_setState:function(e){e!=this._previousPlayState&&(r[e]||a.error("Unknown state ("+e+")"),this._currentPlayState=e,a.dev("State change: previous ("+this._previousPlayState+"), new ("+this._currentPlayState+")")),this._previousPlayState=this._currentPlayState},_getCurrentTimeData:function(){var t;try{t=this._timeDataPr(e),t={clock:null,playhead:null}}return t},_getSliceSize:function(e){return e/10},_get.min(Math.floor(e/t)+1,10)},_getTimeForSlice:function(e){return e*this._sliceSize},_resetSlicePlayTime:function(){a.dev("[ Reset begin"),this._slicePlayTime={};for(var e=1;e<=10;e++)this._slicePlayTime["s"+e]=0;return a.dev("] Reset end"),this._slicePlayTime}},i}),!function(){"use strict";var g=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;function y(e,t,n,i,r,a){t[e]&&(n.push(e),!0!==t[e]&&1!==t[e]||i.push(r+e+"/"+a))}function b(e,t,n,i,r){i=i+t+"/"+r;require._fileExists(e.toUrl(i+".js"))&&n.push(i)}function w(e,t,n){for(var i in t)!t.hasOwnProperty(i)||e.hasOwnProperty(i)&&!n?"object"==typeof t[i]&&(e[i]||(e[i]={}),w(e[i],t[i],n)):e[i]=t[i]}define("vendor/i18n",["module","promise!configuration"],function(e,m){var v=e.config?e.config():{};return{version:"2.0.3",load:function(e,o,s,t){(t=t||{}).locale&&(v.locale=t.locale);var l,n,i,r=g.exec(e),c=r[1],a=r[4],d=r[5],u=a.split("-"),p=[],h={},f="";if(r[5]?(c=r[1],l=c+d):(l=e,d=r[4],a=(a=v.locale)||(v.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),u=a.split("-")),t.isBuild){for(p.push(l),b(o,"root",p,c,d),n=0;n<u.length;n++)i=u[n],b(o,f+=(f?"-":"")+i,p,c,d);o(p,function(){s()})}else o([l],function(r){var e,a=[];for(y("root",r,a,p,c,d),n=0;n<u.length;n++)e=u[n],y(f+=(f?"-":"")+e,r,a,p,c,d);"nls/ui"===l&&m&&m.nls&&p.push(m.nls),o(p,function(){for(var e,t,n,i=a.length-1;-1<i&&a[i];i--)!0!==(e=r[t=a[i]])&&1!==e||(e=o(c+t+"/"+d)),w(h,e);"nls/ui"===l&&m&&m.nls&&(w(n=o(m.nls)||{},h),h=n),s(h)})})}}})}(),define("nls/ui",{root:{annotation:{quiz:{actions:{thanks:"Thank you message",link:"Load URL",time:"Jump to video time",track:"Load track ID"},button:{cancel:"Cancel",back:"Back",next:"Next",done:"Done",submit:"Submit",save:"Save",new_choice:"Choice",new_input:"Input",previous_page:"Prev",next_page:"Next",show_answer:"Show Answer",retry:"Retry"},menu:{new_item:{new_question:"Question"},set_option:{menu_label:"Options",randomizeAnswers:"Randomize choices",cancel:"Show cancel button",passFail:"Pass/Fail actions",question:"Answer types",reviewScreen:"Review screen"}},text:{label:{answer:"Correct answer",page:"Page",of:"of",out_of:"out of",correct:"correct",incorrect:"Incorrect"},placeholder:{new_question:"Enter Question",new_choice:"Enter Answer",new_input:"Enter Correct Text Answer"},title:{thanks:"Enter Thank You Text"},warning:{delete_page:"Are you sure you want to delete the current page?"}},dialog:{passFail:{actions:{link:"Load URL",threshold:"Set custom pass/fail threshold",time:"Jump to video time",branch:"Branch to video",branchtime:"Time",branchtimewarning:"This field is used in an experience can only be edited there.",track:"Load track ID",passingMark:"Passing score",reset:"Reset questions",pause:"Pause video on click",javascript:"JavaScript"},tabs:{fail:"On Fail",pass:"On Pass"},title:"Pass/Fail Actions"},onSubmit:{actions:{retry:"Allow retry",show_answer:"Allow viewer to see correct answer(s)",thanks:"Message",review:"Show review screen"},thankYouText:"Review your answers",reviewScreenMessage:"Review screen message",title:"Review Screen"},questions:{actions:{multipleAnswers:"Allow multiple correct choices per question",multipleRequired:"Require all correct answers to be chosen"},title:"Answer Types"}}}},overlay:{common:{button:{cancel:"Cancel",ok:"OK",submit:"Submit"}},action:{chapter_text:{title:"Text"},comment_text:{title:"Text"},delete_annotation:{title:"Delete Annotation",message:"Are you sure you want to delete this annotation?"},set_duration:{title:"Set Duration",text:{label:{maxDuration:"Until the end of the video",infiniteDuration:"Until action",hours:"Hours",minutes:"Minutes",seconds:"Seconds"}},["jquery.noconflict"],function(o){"use strict";function n(e){return e<10?"0"+e:e}var i={fromSeconds:function(e){var t=0,n=0,i=0,r=0,a=!1;return o.isNumeric(e)&&(e<0&&(a=!0,e=Math.abs(e)),(n=(e-(i=(e-(r=e%1))%60)-r)/60)%60==0?n=0:60<n&&(n-=60*Math.floor(e/3600)),t=(e-60*n-i-r)/3600,r=Math.floor(Math.round(1e3*r))),{negative:a,hours:t,minutes:n,seconds:i,milliseconds:r}},toSeconds:function(e){var t;return o.isNumeric(e)?+e:"object"==typeof e&&e?(t=3600*(o.isNumeric(e.hours)&&+e.hours||0)+60*(o.isNumeric(e.minutes)&&+e.minutes||0)+(o.isNumeric(e.seconds)&&+e.seconds||0)+(o.isNumeric(e.milliseconds)&&+e.milliseconds/1e3||0),e.negative?-t:t):0},toString:function(e,t=!0){return((e=o.isNumeric(e)?i.fromSeconds(e):e).negative?"-":"")+(e.hours?n(e.hours)+":":"")+n(e.minutes)+":"+n(e.seconds)+(t?"."+(t=e.milliseconds,t=Math.abs(t)%1e3,"000".substring((t=""+t).length)+t):"")},fromString:function(e){var t,n,i=["hours","minutes","seconds"],r={};for(0===e.indexOf("-")&&(e=e.substring(1),r.negative=!0),n=(t=e.split(/[.:]/)).length,-1<e.indexOf(".")&&i.push("milliseconds");0<n;n--)r[i.pop()]=t.pop();return r.milliseconds&&(r.milliseconds=1e3*("0."+r.milliseconds)),r}};return i}),!function(e){"function"==typeof define&&define.amd?def.data("bs.modal",t=new o(this,n)),"string"==typeof i?t[i](r):n.show&&t.show(r)})w:!0},o.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},o.prototype.show=function(n){var i=this,e=a.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&i.$element.hasClass("fade"),t=(i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),e&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus(),a.Event("shown.bs.m-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(t)}).emuionEnd",a.proxy(this.hidearget||this.$elemench&&this.hide()},this).$element.hide(),this.backdveBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},o.prototype.backdrop=function(e){var t,n=this,i=this.$element.hasClass("fade")?"fade":"";this.isShown&&this.options.backdrop?(t=a.support.transition&&i,this.$backdrop=a('<div class="modal-backdrop ions.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),t&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e&&(t?this.$backdrop.one("bsTransitionEnd",e).emulateTransitibackdrop?(this.$backdrop.removeClass("in"),i=function(){n.removeBackdrop(),e&&e()},a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTow.innerWidth||(this.scro|0,10);this.scrollbarWidth&rWidth)},o.prototype.resetScrbody.append(e),e.offsetWidth-e.clientWidth);return this.$body[0].removeChild(e),t};var e=a.fn.modal;a.fn.modal=r,a.fn.modal.Constructor=o,a.fn.modal.noConflict=function(){return aen.bs.modal",function(){t.is(":visible")&&t.trigger("focus")})}),r.call(i,n,this)})}),define("hapyak.overlay",["jquery.noconflict","lodash","vendor/i18n!nls/ui","utils.hms","logging","bootstrap.modal"],function(o,s,e,l,c){"use strict";var d,r,u,a,i,p=e.overlay,h=p.action.set_duration,f=o('<div class="hapyak-overlay-modal modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button></div><div class="modal-body" /><div class="modal-footer"><a href="#" data-dismiss="modal" class="btn modal-failure bcov-button-flat">'+s.escape(p.common.button.cancel)+'</a><a href="#" class="btn btn-primary modal-success bcov-button">'+s.escape(p.common.button.ok)+"</a></div></div></div></div>"),m={backdrop:"static",show:!0},n={};function v(){s.forEach([r,u,a,i],function(e){e=e?e.el:void 0;e&&e.hasClass("in")&&(window.innerHeight<=600&&(e.outerHeight()&&e.css("margin-top","-"+e.outerHeight()/2+"px"),e.outerWidth()&&e.css("margin-left","-"+e.outerWidth()/2+"px")),e.outerHeight()>window.innerHeight?e.css("overflow-y","scroll"):e.css("overflow-y","visible"))})}return{setup:function(e,t){if(!(e instanceof HTMLElement))throw new Error("First argument in setup() must be an HTML element");if(d=o(e),"object"==typeof t)o.extend(n,t);else if(void 0!==t)throw new Error("Second argument in setup() must be an object");c.debug("hapyak.overlay: Setup"),d.on("click",function(e){e.stopPropagation()}),o(window).on("resize",v)},center:v,confirm:function(e){var t,n,i;d&&(t=e.body,n=e.message||"",i=e.title,r?(c.debug("hapyak.overlay [confirm]: Reuse built modal",e),r.dismissed=!0,r.title.text(i),r.message.text(n),r.body&&(r.body.empty(),t&&t.callbacks&&"function"==typeof t.callbacks.didInsertElement&&t.callbacks.didInsertElement(r.el)),r.callbacks=e.callbacks,r.el.modal(m)):(c.debug("hapyak.overlay [confirm]: Create new modal",e),(r={dismissed:!0,callbacks:e.callbacks}).el=f.clone().addClass("hapyak-overlay-confirm"),r.title=o('<h3 class="modal-title" />').text(i).appendTo(r.el.find(".modal-header:first")),t&&(r.body=o('<section class="active"/>').appendTo(r.el.find(".modal-body:first")),t.callbacks&&"function"==typeof t.callbacks.didInsertElement&&t.callbacks.didInsertElement(r.el)),r.message=o('<p class="modal-message" />').text(n).appendTo(r.el.find(".modal-body:first")),r.success=r.el.find(".modal-footer .modal-success:last").click(function(e){e.preventDefault(),c.debug("hapyak.overlay [confirm]: Confirmed"),r.dismissed=!1,r.callbacks&&"function"==typeof r.callbacks.success&&r.callbacks.success(),r.el.modal("hide")}),r.el.on("hide",function(){r.dismissed&&(c.debug("hapyak.overlay [confirm]: Aborted"),r.callbacks&&"function"==typeof r.callbacks.failure&&r.callbacks.failure(),r.el.remove())}),r.el.modal(m),r.el.appendTo(d)),v())},duration:function(e){var t,n,i,r,a;d&&(t="string"==typeof e.title&&e.title||h.title,a="function"==typeof e.value?e.value():e.value,n="function"==typeof e.format?e.format():e.format,r="function"==typeof e.maxValue?e.maxValue():e.maxValue,i="function"==typeof e.isPause?e.isPause():e.isPause,a=o.isNumeric(a)&&0<a&&+a||0,r=o.isNumeric(r)&&0<r&&+r||Number.MAX_VALUE,a=l.fromSeconds(a),u?(c.debug("hapyak.overlay [duration]: Reuse built modal",e),u.dismissed=!0,u.title.text(t),u.maxDuration.prop("checked",-1<["percent","infinite"].indexOf(n)),u.hours.val(a.hours),u.minutes.val(a.minutes),u.seconds.val(a.seconds+a.milliseconds/1e3),u.maxDuration.parent().contents().get(0).nodeValue=s.escape(i?h.text.label.infiniteDuration:h.text.label.maxDuration),-1<["percent","infinite"].indexOf(n)?u.hoursMinutesSecondsSection.hide():u.hoursMinutesSecondsSection.show(),u.callbacks=e.callbacks,u.el.modal(m)):(c.debug("hapyak.overlay [duration]: Create new modal",e),(u={dismissed:!0,callbacks:e.callbacks}).el=f.clone().addClass("hapyak-overlay-duration"),u.title=o('<h3 class="modal-title" />').text(t).appendTo(u.el.find(".modal-header:first")),u.modalBody=u.el.find(".modal-body:first"),u.maxDuration=o('<input type="checkbox" class="modal-checkbox-max"/> ').prop("checked",-1<["percent","infinite"].indexOf(n)).appendTo(u.modalBody).change(function(){u.hoursMinutesSecondsSection.toggle()}),u.hoursMinutesSecondsSection=o('<div class="hours-minutes-seconds-section"></div>').appendTo(u.modalBody),u.hours=o('<input class="modal-input-time" />').val(a.hours).appendTo(u.hoursMinutesSecondsSection),u.minutes=o('<input class="modal-input-time" />').val(a.minutes).appendTo(u.hoursMinutesSecondsSection),u.seconds=o('<input class="modal-input-time" />').val(a.seconds+a.milliseconds/1e3).appendTo(u.hoursMinutesSecondsSection),u.maxDuration.wrap("<div><label>"+s.escape(i?h.text.label.infiniteDuration:h.text.label.maxDuration)+"</label></div>"),u.hours.wrap("<label>"+s.escape(h.text.label.hours)+"</label>"),u.minutes.wrap("<label>"+s.escape(h.text.label.minutes)+"</label>"),u.seconds.wrap("<label>"+s.escape(h.text.label.seconds)+"</label>"),-1<["percent","infinite"].indexOf(n)&&u.hoursMinutesSecondsSection.hide(),u.success=u.el.find(".modal-footer .modal-success:last").text(p.common.button.submit).click(function(e){e.preventDefault();var t,e=u.maxDuration.parent().contents().get(0).nodeValue===h.text.label.infiniteDuration,e=u.maxDuration.is(":checked")?(t=e?-1:100,e?"infinite":"percent"):(t=Math.min(l.toSeconds({hours:+u.hours.val(),minutes:+u.minutes.val(),seconds:+u.seconds.val()}),r),"seconds");c.debug("hapyak.overlay [duration]: Confirmed",t,e),u.dismissed=!1,u.callbacks&&"function"==typeof u.callbacks.success&&u.callbacks.success(t,e),u.el.modal("hide")}),u.el.on("hide",function(){u.dismissed&&(c.debug("hapyak.overlay [duration]: Aborted"),u.callbacks&&"function"==typeof u.callbacks.failure&&u.callbacks.failure(),u.el.remove())}),u.el.modal(m),u.el.appendTo(d)),v())},tabs:function(t){var e;d&&(e="string"==typeof t.title&&t.title||"",c.debug("hapyak.overlay [tabs] Create new modal",t),(a={dismissed:!0,callbacks:t.callbacks}).el=f.clone().addClass("hapyak-overlay-tabs"),a.body=a.el.find(".modal-body:first"),a.title=o('<h3 class="modal-title" />').text(e).appendTo(a.el.find(".modal-header:first")),a.tabs=o('<ul class="nav nav-tabs" />').appendTo(a.body),s.each(t.tabs,function(e,t){var n=o("<section />").appendTo(a.body),i=o('<li class="hapyak-tab"><a><span>'+e.title+"</span></a></li>").appendTo(a.tabs);0===t&&(i.addClass("active"),n.addClass("active")),i.on("click",function(){o("li",a.tabs).removeClass("active"),i.addClass("active"),o("section",a.body).removeClass("active"),n.addClass("active"),v()}),e.callbacks&&"function"==typeof e.callbacks.didInsertElement&&e.callbacks.didInsertElement(a.el)}),a.success=a.el.find(".modal-footer .modal-success:last").text("Submit").click(function(e){e.preventDefault(),s.each(t.tabs,function(e){e.callbacks&&"function"==typeof e.callbacks.success&&e.callbacks.success()}),a.callbacks&&"function"==typeof a.callbacks.success&&a.callbacks.success(),a.dismissed=!1,a.el.modal("hide")}),a.el.on("hide",function(){a.dismissed&&(c.debug("hapyak.overlay [tabs]: Aborted"),a.callbacks&&"function"==typeof a.callbacks.failure&&a.callbacks.failure(),a.el.remove())}),a.el.modal(m),a.el.appendTo(d),v())},textInput:function(e){var t,n;d&&(t="string"==typeof e.title&&e.title||"Update Text",n="string"==typeof(n="function"==typeof e.value?e.value():e.value)&&n||"",i?(c.debug("hapyak.overlay [textInput]: Reuse built modal",e),i.dismissed=!0,i.title.text(t),i.input.val(n),i.callbacks=e.callbacks,i.el.modal(m)):(c.debug("hapyak.overlay [textInput]: Create new modal",e),(i={dismissed:!0,callbacks:e.callbacks}).el=f.clone().addClass("hapyak-overlay-textinput"),i.title=o('<h3 class="modal-title" />').text(t).appendTo(i.el.find(".modal-header:first")),i.input=o('<textarea class="modal-input" />').val(n).appendTo(i.el.find(".modal-body:first")),i.success=i.el.find(".modal-footer .modal-success:last").text("Submit").click(function(e){e.preventDefault(),c.debug("hapyak.overlay [textInput]: Confirmed",i.input.val()),i.dismissed=!1,i.callbacks&&"function"==typeof i.callbacks.success&&i.callbacks.success(i.input.val()),i.el.modal("hide")}),i.el.on("hide",function(){i.dismissed&&(c.debug("hapyak.overlay [textInput]: Aborted"),i.callbacks&&"function"==typeof i.callbacks.failureports=t():"function"==typeof telistnew ReferenceError("this hasn't been initialised - super() hasnn"==typeof Symbolnturn r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},r={type:"logger",log:function(e){this.output("log",e)},warn:ft=0,n=Array(e.lengis.prefix=t.prefix||"i18next:",this.logger=e||r,this.options=t,this.debug=t.debug},N.prototype.setDebug=function(e){this.debug=e},N.prototype.log=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)},N.prototype.warn=function(){for(var e=arguments.length,t=Array(e),n=length,t=Array(e),n=0;n<e;n++)t[n]=argumen?null:("string"==tyction(e){return new N(this.logger,E({pre").forEach(function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})},M.prototype.off=function(t,n){var i=this;this.observers[t]&&this.observers[t].forEach(function(){var e;n?-1<(e=i.observers[t].indexOf(n))&&i.observers[t].splice(e,1):delete i.observers[t]})},M.prototype.emit=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i.observers[t]&&[].concat(this.observers[t]).forEach(function(e){e.apply(void 0,n)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(e){e.apply(e,(e=[t]).concat.apply(e,n))})},M),x={"&":"&amp;","<":"&lt;",">":"e.addNamespaces=function(e){tspaces=function(e){e=this.options.ns.indexOf(e);-1<e&&this.options.ns.splice(e,1)},O.prototype.getResource=function(e,t,n){var i=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).keySeparator||this.options.keySeparator,t=(void 0===i&&(i="."),[e,t]);return n&&"string"!=typeof n&&(t=t.concat(n)),n&&"string"==typeof n&&(t=t.concat(i?n.split()[1]),this.addNamespaces(t),l(this.data,o,i),r.silent||this.emit("added",e,t,n,i)},O.prototype.addResources=function(e,t,n){var i,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(i in n)"string"==typeof n[i]&&this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)},O.prototype.addResourceBundle=function(e,t,n,i,r){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[e,t],s=(-1<e.indexOf(".")&&(i=n,n=t,t=(o=e.split("."))[1]),this.addNamespaces(t),d(this.data,o)||{});i?function e(t,n,i){for(var r in n)r in t?"string"==typeof t[r]||t[r]instanceof String||"string"==typeof n[r]||n[r]instanceof String?i&&(t[r]=n[r]):e(t[r],n[r],i):t[r]=n[r]}(s,n,r):s=E({},s,n),l(tle(e,t)&&delete this.data[e][tO.prototype.hasResourceBundle===this.options.compatibilityAPI?E({},this.getResource(e,t)):this.getResource(e,t)},O..data},n e.forEach(function(e){a.processors[e]&r))}),t}},_=(e(D,g=k),D.prototype.changeLanguage=function(e){e&&(this.language=e)},D.prototype.exists=function(e){e=this.resolve(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{interpolation:{}});return e&&void 0!==e.res},D.prototype.extractFromKey=function(e,t){var n,i=t.nsSeparator||this.options.nsSeparator,r=t.keySeparator||this.options.keySeparator||".",t=t.ns||this.options.defaultNS;return(i=void 0===i?":":i)&&-1<e.indexOf(i)&&(n=e.split(i),(i!==r||i===r&&-1<this.options.ns.indexOf(n[0]))&&(t=n.shift()),e=n.join(r)),{key:e,namespaces:t="string"==typeof t?[t]:t}},D.prototype.translate=function(e,n){var i=this;if(n=(n="object"!==(void 0===n?"undefined":w(n))&&this.options.overloadTranslationOptionHandler?this.options.overloadTranslationOptionHandler(arguments):n)||{},null==e||""===e)return"";"number"==typeof e&&(e=String(e));var t=n.keySeparator||this.options.keySeparator||".",r=this.extractFromKey((e="string"==typeof e?[e]:e)[e.length-1],n),a=r.key,o=r.namespaces,s=o[o.length-1],r=n.lng||this.language,l=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(r&&"cimode"===r.toLowerCase())return l?(l=n.nsSeparator||this.options.nsSeparator,s+l+a):a;var l=this.resolve(e,n),c=l&&l.res,d=l&&l.usedKey||a,l=Object.prototype.toString.apply(c),u=(void 0!==n.joinArrays?n:this.options).joinArrays;if(c&&("string"!=typeof c&&"boolean"!=typeof c&&"number"!=typeof c)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(l)<0&&(!u||"[object Array]"!==l)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,c,n):"key '"+a+" ("+this.language+")' returned an object instead of string.";if(n.keySeparator||this.options.keySeparator){var p,h,f="[object Array]"===l?[]:{};for(p in c)Object.prototype.hasOwnProperty.call(c,p)&&(f[p]=this.translate(h=""+d+t+p,E({},n,{joinArrays:!1,ns:o})),f[p]===h&&(f[p]=c[p]));c=f}}else if(u&&"[object Array]"===l)c=(c=c.join(u))&&this.extendTranslation(c,e,n);else{var l=!1,u=!1,m=(this.isValidLookup(c)||void 0===n.defaultValue||(l=!0,c=n.defaultValue),this.isValidLookup(c)||(u=!0,c=a),n.defaultValue&&n.defaultValue!==c&&this.options.updateMissing);if(u||l||m){this.logger.log(m?"updateKey":"missingKey",r,s,a,m?n.defaultValue:c);var v=[],g=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&g&&g[0])for(var y=0;y<g.length;y++)v.push(g[y]);else"all"===this.options.saveMissingTo?v=this.languagdConnector.saveMissing(e,s,t,m?n.defaultValue:c,m,n),i.emit("missingKey",e,s,t){i.pluralResolver.getPluralFormsOfKey(t,a).forEach(function(e){return b([t],e)})}):b(v,a))}c=this.extendTranslation(c,e,n),u&&c===a&&this.options.appendNamespaceToMissingKey&&(c=s+":"+a),u&&this.options.parseMissingKeyHandler&&(c=this.options.parseMissingKeyHandler(c))}return c},D.prototype.extendTranslation=function(e,t,n){var i=this,r=(n.interpolation&&this.interpolator.init(E({},n,{interpolation:E({},this.options.interpolation,n.interpolation)})),n.replace&&"string"!=typeof n.replace?n.replace:n),r=(this.options.interpolation.defaultVariables&&(r=E({},this.options.interpolation.defaultVariables,r)),e=this.interpolator.interpolate(e,r,n.lng||this.language),!1!==n.nest&&(e=this.interpolator.nest(e,function(){return i.translate.apply(i,arguments)},n)),n.interpolation&&this.interpolator.reset(),n.postProcess||this.options.postProcess),r="string"==typeof r?[r]:r;return e=null!=e&&r&&r.length&&!1!==n.applyPostProcessor?C.handle(r,e,t,n,this):e},D.prototype.resolve=function(e){var c=this,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},u=void 0,n=void 0;return(e="string"==typeof e?[e]:e).forEach(function(e){var o,s,l,t;c.isValidLookup(u)||(e=c.extractFromKey(e,d),o=e.key,n=o,e=e.namespaces,c.options.fallbackNS&&(e=e.concat(c.options.fallbackNS)),s=void 0!==d.count&&"string"!=typeof d.count,l=void 0!==d.context&&"string"==typeof d.context&&""!==d.context,t=d.lngs||c.languageUtils.toResolveHierarchy(d.lng||c.language),e.forEach(function(a){c.isValidLookup(u)||t.forEach(function(e){if(!c.isValidLookup(u)){var t=o,n=[t],i=void 0;s&&(i=c.pluralResolver.getSuffix(e,d.count)),s&&l&&n.push(t+i),l&&n.push(t+=""+c.options.contextSeparator+d.context),s&&n.push(t+=i);for(var r;r=n.pop();)c.isValidLookup(u==e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)},D.prototype.getResource=function(e,t,n){return this.resourceStore.getResource(e,t,n,3<arguments.length&&void 0!==arguments[3]?arguments[3]:{})},D),V=(L.prototype.getScriptPartFromCode=function(e){return!e||e.indexOf("-")<0||2===(e=e.split("-")).length?null:(on(e){return!e||e.indexOf("-")<0?e:(e=e.split("-"),this.formatLanguageCode(e[0]))},L.prototype.formatLanguageCode=function(e){var t,n;return"string"==typeof e&&-1<e.indexOf("-")?(t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-"),this.options.lowerCaseLng?n=n.map(function(e){return e.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),-1<t.indexOf(n[1].toLowerCase())&&(n[1]=i(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),-1<t.indexOf(n[1].toLowerCase())&&(n[1]=i(n[1].toLowerCase())),-1<t.indexOf(n[2].toLowerCase())&&(n[2]=i(n[2].toLowerCase()))),n.join("-")):this.optionsromCode(e)),!this.whitelist||!this.whitelist.length||-1<this.whitelist.indexOf(e)},L.prototype.getFallbackCodes=function(e,t){return e?("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e)?e:t?e[t]||e[this.getScriptPartFromCode(t)]||e[this.formauageCode(e)),t.forEach(function(e){r.indexOf(e)<0&&n(i.formatLanguageCode(e))}),r},L),j=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:,23](e){ct0&},0<){r){r<11?0:uncionunc10|(e%){rnct&e%?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]},I.prototype.needsPlural=function(e){e=this.getRule(e);return e&&1<e.numbers.length},I.prototype.getPluralFormsOfKey=function(t,n){var i=this,r=[],e=this.getRule(t);return e&&e.numbers.forEach(function(e){e=i.getSuffix(t,e);r.push(""+n+e)}),r},I.prototype.getSuffix=function(e,t){var n,i,r=this,a=this.getRule(e);return a?(t=a.noAbs?a.plurals(t):a.plurals(Math.abs(t)),n=a.numbers[t],this.options.simplifyPluraleturn r.options.prepend&&n.toString()?r.options.prepend+n.toString():n.toString()},"v1"===this.options.compatibilityJSON?1===n?"":"number"==typeof n?"_plural_"+n.toString():i():"v2"===this.options.compatibilityJSON||2===a.numbers.length&&1===a.numbers[0]||2===a.numbers.length&&1===a.numbers[0]?i():this.options.prepend&&t.toString()?this.options.prepend+t.toString():t.toString()):(this.logger.warn("no plural rule found for: "+e),"")},I),z=(P.prototype.init=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=(arguments[1]&&(this.options=e,this.format=e.interpolation&&e.interpolation.format||function(e){return e},this.escape=e.interpolation&&e.interpolation.escape||n),e.interpolation||(e.interpolation={escapeValue:!0}),e.interpolation);this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.prefix=e.prefix?t(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?t(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator||e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=!this.unescapePrefix&&e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?t(e.nestingPrefix):e.nestingPrefixEscaped||t("$t("),this.nestingSuffix=e.nestingSuffix?t(e.nestingSuffix):e.nestingSuffixEscapedresetRegExp()},P.prototype.reset=function(){this.options&&this.init(this.options)},P.prototype.resetRegExp=function(){var e=this.prefix+"(.+?)"+this.suffix,e=(this.regexp=new RegExp(e,"g"),""+this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix),e=(this.regexpUnescape=new RegExp(e,"g"),this.nestingPrefix+"(.+?)"+this.nestingSuffix);this.nestingRegexp=new RegExp(e,"g")},P.prototype.interpolate=function(e,n,i){function t(e){var t;return e.indexOf(a.formatSeparator)<0?d(n,e):(t=(e=e.split(a.formatSeparator)).shift().trim(),e=e.join(a.formatSeparator).trim(),a.format(d(n,t),e,i))}var r,a=this,o=void 0,s=void 0,l=void 0;for(this.resetRegExp(),l=0;(o=this.regexpUnescape.exec(e))&&(s=t(o[1].trim()),e=e.replace(o[0],s),this.regexpUnescape.lastIndex=0,!(++l>=this.maxReplaces)););for(l=0;o=this.regexp.exec(e);)if((s="string"!=typeof(s=t(o[1].trim()))?c(s):s)||(s="function"==typeof this.options.missingInterpolationHandler?"string"==typeof(r=this.options.missingInterpolationHandler(e,o))?r:"":(this.logger.warn("missed to pass in variable "+o[1]+" for interpolating "+e),"")),s=(this.escapeValue?this.escape(s):s).replace(/\$/g,"$$$$"),e=e.replace(o[0],s),this.regexp.lastIndex=0,++l>=this.maxReplaces)break;return e},P.prototype.nest=function(e,t){function n(e,t){if(!(e.indexOf(",")<0)){var n=e.split(","),n=(e=n.shift(),n.join(","));n=(n=this.interpolate(n,a)).replace(/'/g,'"');try{a=JSON.parse(n),t&&(a=E({},t,a))}catch(t){this.logger.error("failed parsing options string in nesting for key "+e,t)}}return e}var i=void 0,r=void 0,a=E({},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});for(a.applyPostProcessor=!1;i=this.nestingRegexp.exec(e);){if((r=t(n.call(this,i[1].trim(),a),a))&&i[0]===e&&"string"!=typeof r)return r;(r="string"!=typeof r?c(r):r)||(this.logger.warn("missed to resolve "+i[1]+" for nesting "+e),r=""),e=e.repl,errors:[],callback:n}),{toLoad:a,pending:o,toLoadLanguages:s,toLoadNamespaces:l}},A.prototype.loaded=function(l,c,e){var d=this,t=l.split("|"),t=f(t,2),u=t[0],p=t[1];c&&this.emit("failedLoading",u,p,c),e&&this.store.addResourceBundle(u,p,e),this.state[l]=c?-1:2,this.queue.forEach(function(e){t=e.loaded,i=p,n=(t=h(t,n=[u],Object)).obj,t=t.k,n[t]=n[t]||[],r&&(n[t]=n[t].concat(i)),r||n[t].push(i);for(var t,n,i,r,a=e.pending,o=l,s=a.indexOf(o);-1!==s;)a.splice(s,1),s=a.indexOf(o);c&&e.errors.push(c),0!==e.pending.length||e.done||(d.emit("loaded",e.loaded),e.done=!0,e.errors.length?e.callback(e.errors):e.callback())}),this.queue=this.queue.filter(function(e){return!e.done})},A.prototype.read=function(n,i,r){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,o=this,s=4<arguments.length&&void 0!&t&&a<5?void setTimeout(function(){o.read.call(o,n,i,r,a+1,2*s,l)},s):void l(e,t)}):l(null,{})},A.prototype.load=function(e,t,n){var i,o,s=this;return this.backend?(i=E({},this.backend.options,this.options.backend),"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),(o=this.queueLoad(e,t="string"==typeof t?[t]:t,n)).toLoad.length?void(i.allowMultiLoading&&this.backend.readMulti?this.read(o.toLoadLanguages,o.toLoadNamespaces,"readMulti",null,null,function(r,a){r&&s.logger.warn("loading namespaces "+o.toLoadNamespaces.join(", ")+" for languages "+o.toLoadLanguages.join(", ")+" via multiloading failed",r),!r&&a&&s.logger.log("successfully loaded namespaces "+o.toLoadNamespaces.join(", ")+" for languages "+o.toLoadLanguages.join(", ")+" via multiloading",a),o.toLoad.forEach(function(e){var t=e.split("|"),t=f(t,2),n=t[0],t=t[1],i=d(a,[n,t]);i?s.loaded(e,r,i):(s.loaded(e,i="loading namespace "+t+" for language "+n+" via multiloading failed"),s.logger.error(i))})}):o.toLoad.forEach(function(e){s.loadOne(e)})):(o.pending.length||n(),null)):(this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n())},A.prototype.reload=function(e,a){var o=this,t=(this.backend||this.logger.warn("No backend was added via i18next.use. Will not load resources."),E({},this.backend.options,this.options.backend));"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof a&&(a=[a]),t.allowMultiLoading&&this.backend.readMulti?this.read(e,a,"readMulti",null,null,function(i,r){i&&o.logger.warn("reloading namespaces "+a.join(", ")+" for languages "+e.join(", ")+" via multiloading failed",i),!i&&r&&o.logger.log("successfully reloaded namespaces "+a.join(", ")+" for languages "+e.join(", ")+" via multiloading",r),e.forEach(function(n){a.forEach(function(e){var t=d(r,[n,e]);t?o.loaded(n+"|"+e,i,t):(o.loaded(n+"|"+e,t="reloading namespace "+er(t))})})}):e.forEach(function(t){a.forEach(function(e){o.loadOne(t+"|"+e,"re")})})},A.prototype.loadOne=function(n){var i=this,r=1<arguments.length&&void 0!==arguments[1]?ar!e&&t&&i.logger.log(r+"loaded namespace "+o+" for language "+a,t),i.loaded(n,e,t)})},A.prototype.saveMissing=function(e,t,n,i,r){this.backend&&this.backend.create&&this.backend.create(e,t,n,i,null,E({},5<arguments.length&&void 0!==arguments[5]?arguments[5]:{},{isUpdate:r})),e&&e[0]&&this.store.addResource(e[0],t,n,i)},A),B=(e(S,m=k),S.prototype.load=function(e,t,a){var o=this;if(!this.cache)return a&&a();var n=E({},this.cache.options,this.options.cache),s="string"==typeof e?this.services.languageUtils.toResolveHierarchy(e):e;n.enabled?this.cache.load(s,function(e,t){if(e&&o.logger.error("loading languages "+s.join(", ")+" from cache failed",e),t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))for(var i in t[n]){var r;!Object.prototype.hasOwnProperty.call(t[n],i)||"i18nStamp"===&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},S);function T(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i=(a(this,T),u(this,p.call(this)));if(i.options=o(t),i.services={},i.logger=b,i.modules={external:[]},n&&!i.isInitialized&&!t.isClone){if(!i.options.initImmediate)return e=i.init(t,n),u(i,e);setTimeout(function(){i.init(t,n)},0)}return i}function S(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=(a(this,S),u(this,m.call(this)));return r.cache=e,r.store=t,r.services=n,r.options=i,r.logger=b.create("cacheConnector"),r.cache&&r.cache.init&&r.cache.init(n,i.cache,i),r}function A(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=(a(this,A),u(this,v.call(this)));return r.backend=e,r.store=t,r.languageUtils=n.languageUtils,r.options=i,r.logger=b.create("backendConnector"),r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(n,i.backend,i),r}function P(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a(this,P),this.logger=b.create("interpolator"),this.init(e,!0)}function I(e){var n,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};a(this,I),this.languageUtils=Eache,this.whitelist=this.options.whitelist||!1,this.logger=b.create("languageUtils")}function D(e){var t,n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=(a(this,D),u(this,g.call(this)));return t=e,n=r,["resourceesolver","interpolator","backendConnector"].forEach(function(e){t[e]&&(n[e]=t[e])}),r.options=i,r.logger=b.create("translator"),r}function O(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"arguments.length&&void 0!==arguments[1]?arrototype.init=function(){function e(e){retud=!0,r.logger.log("initialized",r.options),r.emit("initialized",r.options),a(e,t)})}var n,r=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1];"function"==typeof i&&(a=i,i={}),this.options=E({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNation(e){var t={};return e[1]&&(t.defaescription=e[2]),t},interpolation:{escapeValue:!0,format:function(e,t,n){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}},this.options,o(i)),this.format=this.options.interpolation.format,a=a||s,this.options.isClone||(this.modules.logger?b.init(e(this.modules.logger),this.options):b.init(null,this.options),i=new V(this.options),this.store=new R(this.options.resources,this.options),(n=thiis.store,n.resourceStore.on("added removed",function(e,t){n.cacheConnector.save()}),n.languageUtils=i,n.pluralResolver=new q(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),n.interpolator=new z(this.options),n.backendConnector=new F(e(this.modules.backend),n.resourceStore,n,this.options),n.backendConnector.on("*",function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)].concat(n))}),n.backendConnector.on("loaded",function(e){n.cacheConnector.save()}),n.cacheConnector=new B(e(this.modules.cache),n.resourceStore,n,this.options),n.cacheConnector.on("*",function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.emit.apply(r,[e].concat(n))}),this.modules.languageDetector&&(n.languageDetector=e(this.modules.languageDetector),n.languageDetector.init(n,this.options.detection,this.options)),this.translator=new _(this.services,this.options),this.translator.on("*",function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.emit.apply(r,[e].concat(n))}),this.modules.external.forEach(function(e){e.init&&e.init(r)})),["getResource","addResource","addResources","addResouorEach(function(t){r[t]=function(){var e;return(e=r.store)[t].apply(e,arguments)}});return this.options.resources||!this.options.initImmediate?t():setTimeout(t,0),this},T.prototype.loadResources=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s;if(this.options.resources)e(null);enguageUtils.toResolveHierarchy(e).forEach(function(e){n.indexOf(e)<0&&n.push(e)})};this.language?i(this.language):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(i),this.options.preload&&td(n,this.options.ns,function(){t.services.backendConnector.load(n,t.options.ns,e)})}},T.prototype.reloadResources=function(e,t){e=e||this.languagepe&&C.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this},T.prototype.changeLanguage=function(e,i){function t(n){n&&(r.language=n,r.languages=r.services.languageUtils.toResolveHierarchy(n),r.translator.language||r.translator.changeLanguage(n),r.services.languageDetector&&r.services.languageDetector.cacheUserLanguage(n)),r.loadResources(function(e){var t;e=e,t=n,r.translator.changeLan.logger.log("languageChanged",t)),i&&i(e,function(){return r.t.apply(r,arguments)})})}var r=this;e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(t):t(e):t(this.services.languageDetector.detect())},T.prototype.getFixedT=function(e,t){function o(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=E({},t);return(a="object"!==(void 0===t?"undefined":w(t))?s.options.overloadTranslationOptionHandler([e,t].concat(i)):a).lng=a.lng||o.lng,a.lngs=a.lngs||o.lngs,a.ns=a.ns||o.ns,s.t(e,a)}var s=this;return"string"==typeof e?o.lng=e:o.lngs=e,o.ns=t,o},T.prototype.t=function(){var e;return thiion(){var e;return this.translat,arguments)},T.prototype.setDefaultNamespace=function(e){this.options.defaultNS=e},T.prototype.loadNamespaces=funpeof e?[e]:e).forEach(function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)}),void this.loadResources(t)):t&&t()},T.prototype.loadLanguages=eload||[],e=(e="string"==typeof e?[e]:e).filter(function(e){return n.indexOf(e)<0});return e.length?(this.options.preload=n.concat(e),void this.loadResources(t)):t()},T.prototype.dir=function(e){return!(e=e||(this.languages&&0<this.languages.length?this.languages[0]:this.language))||0<=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.servicesurn new T(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])},T.prototype.cloneInstance=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:s,e=E({},thi}),r=new T(e);return["store","services","language"].forEach(fu,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.emit.apply(r,[e].concat(n))}),r.init(e,n),r.translator.options=r.options,r},new T}),define("i18.en",[],function(){return{srclang:"en",resources:{annotation:{}}}}),define("i18.zh",[],function(){return{srclang:"zh",resources:{annotation:{quiz:{button:{cancel:"",back:"",next:"",done:"",submit:"",show_answer:"",retry:"",save:"",new_choice:"",new_input:"",previous_page:"",next_page:""},text:{label:{answer:"",page:"",of:"of",out_of:"out of",correct:""}}}}}}}),define("i18.pt",[],function(){return{srclang:"pt",resources:{annotation:{quiz:{actions:{thanks:"Obrigado pela sua mensagem",link:"Carregue URL",time:"Pule para o tempo do vdeo",track:"Carregar faixa ID"},button:{cancel:"Cancelar",back:"Voltar",next:"Prximo",done:"Fim",submit:"Submeter",save:"Salvar",new_choice:"Escolha",new_input:"Input",previous_page:"Prev",next_page:"Prximo",show_answer:"Mostrar resposta",retry:"Tente novamente "},menu:{new_item:{new_question:"Pergunta"},set_option:{menu_label:"Opes",cancel:"Mostrar o boto de cancelar",passFail:"Passar/Falhou aes",submit:"Submeter",question:"Tipos de Resposta",reviewScreen:"Revisar tela"}},text:{label:{answer:"Resposta",page:"Pgina",of:"de",out_of:"fora de",correct:"correto",incorrect:"incorreto"},placeholder:{new_question:"Insira Pergunta",new_choice:"Insira Resposta",new_input:"Insira Texto Resposta Correto"},title:{thanks:"Insiro Texto de Agradecimento"},warning:{delete_page:"Tem certeza que quer deletar a pgina atual?"}},dialog:{passFail:{actions:{link:"Carregar URL",threshold:"Definir limite passar/falhou customizado",time:"Pule para o tempo do vdeo",track:"Carregar faixa ID",passingMark:"Passando ponto",reset:"Resetar perguntas",pause:"Pausar video ao clicar",javascript:"JavaScript"},tabs:{fail:"Falhou",pass:"Ao Passar"},title:"Passar/falhou Aes"},onSubmit:{actions:{retry:"Permitir tentar novamente",show_answer:"Permitir espectador ver resposta(s) correta",thanks:"Mensagem",review:"Mostrar tela de reviso"},title:"Reviso tela"},questions:{actions:{multipleAnswers:"Permitir mltiplas opes coreretas por pergunta",multipleRequired:"Requisitar que todas as respostas corretas sejam escolhidas"},thankYouText:"Revise suas respostas",reviewScreenMessage:"Revise mensagem da tela",title:"Revise tela"}}}},overlay:{common:{button:{cancel:"Cancelar",ok:"OK",submit:"Submeter"}},action:{chapter_text:{title:"Texto"},comment_text:{title:"Texto"},delete_annotation:{title:"Deletar Anotao",message:"Tem certeza que quer deletar esta anotao?"},set_duration:{title:"Set Duration",text:{label:{maxDuration:"Mantenham-se ativo at o final do vdeo",hours:"Horas",minutes:"Minutos",seconds:"Segundos"}}}}}}}}),define("language.manager",["i18next","i18.en","i18.zh","i18.pt"],function(n){var e=Array.prototype.slice.call(arguments,1);return function(){var t={};this.changeLanguage=function(e){n.changeLanguage(e)},this.get=function(e,t){e=n.t(e+":"+t);return t===e?"":e},e.forEach(function(e){t[e.srclang]=e.resources}),n.init({returnObjects:!0,resources:t})}}),define("annotation.variable.config",["lodash.noconflict","language.manager"],function(i,n){var t=[];function r(e){var a={},o={},s={},t=new n,l=e;function c(n,e){i.forEach(e,function(e,t){e!==a[t]&&(l.setData(t,e),l.unwatchData(t,o[n]),l.watchData(t,o[n]))}),i.merge(a,e)}this.register=function(e,t){e&&t&&(s[e]||(s[e]=t))},this.add=function(e,t,i){var n,r;e&&t&&i&&(r=(r=t.annotationId)||t.id,(e=s[e])&&(n=e(r,t)),o[r]||(o[r]=function(e,t,n){n&&a[t]&&(i(e,t,n),l.setData("hapyak-internal-variable-update",!0,!0))}),c(r,n))},this.update=function(e,t){var n,i,r;e&&t&&(i=t.annotationId,r=t.id,i&&!o[i]&&o[r]&&(o[i]=o[r],delete o[r],this.remove(r)),o[i=i||r]&&c(i,n=(r=s[e])?r(i,t):n))},this.remove=function(n){var e=i.map(a,function(e,t){if(-1<t.indexOf(n))return t});delete o[n],i.forEach(e,function(e){e&&(delete a[e],l.unwatcata(e))})},this.load=function(e){function n(e,t){i.isEqual(a[t],e)||(l.setData(t,e),a[t]=e)}i.chain(e).pick(function(e,t){return-1<t.indexOf("Bookmark")}).forEach(function(e,t){n(e,t)}),i.forEach(e,function(e,t){-1===t.indexOf("Bookmark")&&n(e,t)})},Object.defineProperty(this,"config",{get:function(){return a}}),Object.defineProperty(this,"languageManager",{get:function(){return t}})}function e(e){e=new r(e);return t.push(e),e}return e.prototype=r,e.instances=t,e}),define("content.track.container",[],function(){function t(e){var t,n,i,r,a;e=e||{},Object.defineProperty(this,"kind",{get:function(){return t},set:function(e){t=-1===["annotation"].indexOf(e)?"":e}}),Object.defineProperty(this,"src",{get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"srclang",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"label",{get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"default",{get:function(){return a},set:function(e){a=e}}),this.kind=e.kind||"",this.src=e.src||"",this.srclang=e.srclang||"",this.label=e.label||"",this.default=e.default||!1,this.data=e.variables||{},this.active=!1}return function(){this.tracks=[],this.add=function(e){e=new t(e);return this.tracks.push(e),e},this.remove=function(){}}}),!function(e,t,a){"use strict";var o=e.console||{log:function(){},error:function(){},warn:function(){}};t.p.setData=function(e,t,n,i){var r=this.options.environment;if(r)return n!==a&&"string"==typeof t||(n=t,t=e,e=a),(this.options.getScope&&this.options.getScope(e)||r).set(t,n,i),this;o.warn("No environment loaded for Popcorn.data")},t.p.clearData=function(e,t){var n=this.options.environment;if(n)return"string"!=typeof t&&(t=e,e=a),(this.options.getScope&&this.options.getScope(e)||n).clear(t),this;o.warn("No environment loaded for Popcorn.data")},t.p.resetData=function(e){var t,n,i=this.options.environment;function r(e){for(var t=e.keys(),n=0;n<t.length;n++)e.clear(t[n])}if(i){for(r(t=this.options.getScope&&this.options.getScope(e)||i),n=t.children.count-1;0<=n;n--)r(t.scope(t.children(n)));return this}o.warn("No environment loaded for Popcorn.data")},t.p.getData=function(e,t){var n=this.options.environment;if(n)return t!==a&&"string"==typeof t||(t=e,e=a),(this.options.getScope&&this.options.getScope(e)||n).get(t);o.warn("No environment loaded for Popcorn.data")},t.p.watchData=function(e,t,n){var i=this.options.environment;if(i)return n!==a&&"string"==typeof t||(n=t,t=e,e=a),(this.options.getScope&&this.options.getScope(e)||i).observe(t,n),this;o.warn("No environment loaded for Popcorn.data")},t.p.unwatchData=function(e,t,n){var i=this.options.environment;if(i)return n!==a&&"string"==typeof t||(t=e,e=a),(this.options.getScope&&this.options.getScope(e)||i).unobserve(t,n),this;o.warn("No environment loaded for Popcorn.data")},t.p.notifyData=function(e,t){var n=this.options.environment;if(n)return t!==a&&"string"==typeof t||(t=e,e=a),(this.options.getScope&&this.options.getScope(e)||n).notify(t),this;o.warn("No environment loaded for Popcorn.data")},t.p.dataMethod=function(e){var t=this.options.environment;if(t)return e=this.options.getScope&&this.options.getScope(e)||t,t=Array.prototype.slice.call(arguments,1),e.execute.apply(e,t);o.warn("No environment loaded for Popcorn.data")},t.p.dataKeys=function(e){var t=this.options.environment;if(t)return(this.options.getScope&&this.options.getScope(e)||t).keys();o.warn("No environment loaded for Popcorn.data")}}(this,this.Popcorn),define("popcorn.data",["popcorn"],function(e){return function(){return e.Popcorn.data}}(this)),!function(e,t){"use strict";"object"==typeof exports?module.exports=t(irequire("popcorn")):"function"==typeof define&&define.amd?define("popcorn.filter",["popcorn"],t):t(e.Popcorn)}(this,function(g,y){"use strict";var b={},l={},n={},w={"":[],"*":[]},i=g.plugin,E=g.getTrackEvent,e=g.getTrackEvents,k=g.removeTrackEvent,x=g.events.fn.trigger,c={trackadded:!0,tracksetup:!0,trackstart:!0,trackend:!0,trackremoved:!0,trackchange:!0,trackteardown:!0},C=/^(_(natives|id|running)|id|target|effect|compose|toString)$/;function _(n,i){var e;g.forEach(n.children,function(e,t){e.destroyed=!0,_(e,i),delete n.children[t]}),n.popcornId&&(k(i,n.popcornId),0<=(e=n.actualTrackEvents.indexOf(n.popcornId))&&n.actualTrackEvents.splice(e,1),delete l[i.id].trackEventsByChildId[n.popcornId]),n.teardown&&n.teardown.call(i,n),n.routeObj&&delete n.routeObj.nodes[n.uid]}function d(h,f,e,m){var v,t,n,i=!1;if(e&&!m)e=(m=e).id||m._id||null;else if(!m)return;(v=l[h.id])?e&&v.children[e]||(i=!0):(v=l[h.id]={popcorn:h,contextOptions:h.options.context||{},history:[],children:{},trackEventsByChildId:{}},i=!0),i?e&&(m._id=e):n=g.extend({},v.children[e].options),(e=function l(c,d,u,p){return function(e,t,n){var i,r,a,o,s;if("object"==typeof e&&(n=t,t=e,e=""),n=n||u.route,p=p&&n===f&&(!u.virtualEventId||""===e),i=u.children[e]){if(i.destroyed)return null;if(d||(i.updatingFromPopcorn=!0),!t)return _(i,h),delete u.children[e],(a=v&&v.children[i.virtualEventId])&&!a.updatingFromPopcorn&&(x.call(h,"trackchange",g.extend({},{id:a.id,type:"trackchange",track:a.fakeTrackEvent,previousValue:a.options,currentValue:a.options})),delete a.fakeTrackEvent.container),null;for(r in t)t.hasOwnProperty(r)&&!C.test(r)&&(i.options[r]=t[r])}else{if(!t)return null;(i={id:"string"==typeof e?e:g.guid(n),uid:g.guid(n)+"-"+d,popcornId:null,options:t||u.options,teardown:null,route:n,routeObj:null,children:{},destroyed:!1,actualTrackEvents:u.actualTrackEvents||[],virtualEventId:u.virtualEventId,fakeTrackEvent:u.fakeTrackEvent,updatingFromPopcorn:!d}).virtualEventId||(i.virtualEventId=i.id,e=h.options.defaults&&h.options.defaults[f]||{},i.options=g.extend({},e,t||u.options||m)),i.options.start||0===i.options.start||(i.options.start=(u.options||m).start,i.options.start===y&&delete i.options.start),i.options.end||0===i.options.end||(i.options.end=(u.options||m).end,i.options.end===y&&delete i.options.end),u.children[i.id]=i}return n!==u.route&&(i.route=n,c=w[i.route]?w[""].concat(w[i.route],w["*"]):w[""].concat(w["*"]),d=Math.min(d,w[""].length)),i.fakeTrackEvent||!c.length&&p||(i.fakeTrackEvent={_id:i.virtualEventId,id:i.virtualEventId,_natives:{plugin:f,type:f,start:g.nop,end:g.nop,_teardown:g.nop,mainfest:{}},_running:!1,effect:[],compose:[]},g.extend(i.fake.nodes[i.uid]=i),p=!1,n=e.fn.call(h,i.route,i.options,l(c,d+1,i,p),i),i.teardown=(o=n,s=i.routeObj&&i.routeObj.teardown,o?s?function(){o.apply(this,arguments),s.apply(this,arguments)}:o:s)):(e=b[i.route])&&(i.popcornId?(i.options.id=i.popcornId,i.options._id=i.popcornId,i.trackEvent&&i.trackEvent._natives&&i.trackEvent._natives._update||k(h,i.popcornId)):(i.popcornId=p?i.virtualEventId:g.guid(i.route),i.options.id=i.popcornId,i.options._id=i.popcornId,i.actualTrackEvents.push(i.popcornId),v.trackEventsByChildId[i.popcornId]=v.children[i.virtualEventId]),e.call(h,i.popcornId,i.options),n=E(h,i.popcornId),i.trackEvent=n,i.fakeTrackEvent?!p&&i.fakeTrackEvent.container||(i.fakeTrackEvent.container=n&&n.container):i.fakeTrackEvent=n,(a=v&&v.children[i.virtualEventId])&&!a.updatingFromPopcorn&&x.call(h,"trackchange",g.extend({},{id:a.id,type:"trackchange",track:a.fakeTrackEvent,previousValue:a.options,currentValue:a.options}))),i}}(void 0,0,v,!0)(e||!1,m,f))&&(t=h.getTrackEvent(e.id),e.updatingFromPopcorn=!1,i?(v.history.push(e.id),x.call(h,"tracksetup",g.extend({},t,{plugin:f,type:"tracksetup",track:t})),x.call(h,"trackadded",g.extend({},t,{plugin:f,type:"trackadded",track:t}))):x.call(h,"trackchange",g.extend({},{id:e.id,type:"trackchange",track:t,previousValue:n,currentValue:v.children[e.id].options})))}g.filterRoutes={},g.filter=function(t,e,i,r,a){var o,s=[];"function"==typeof e?(a=r,r=i,i=e,e=t,t=null):t&&(n&&g.removeFilter(t),o=[],n[t]=o),g.isArray(e)?1<e.length&&0<=e.indexOf("*")&&(e=["*"]):e=[e],g.forEach(e,function(n)s.indexOf(n)||(w[n]|name:t,route:n,fn:i,nodes:{},teardown:a},o&&o.push(e),r?w[n].unshift(e):w[n].push(e),g.filterRoutes[n]=!0,g.p[n]||(g.p[n]=function(e,t){d(this,n,e,t)}))})},g.removeFilter=function(e){},g.plugin=function(n,e,t){i(n,e,t),b[n]=g.p[n],g.p[n]=function(e,t){return d(this,n,e,t),this}},g.plugin.effect=g.effect=g.compose,g.getLastTrackEventId=function(e){e=l[e.id];if(e&&e.history.length)return e.history[e.history.length-1]},g.getTrackEvent=function(e,t){var n=l[e.id],n=n&&n.children[t];return n?n.fakeTrackEvrackEvents=function(n){var e,t,i,r=[],a=l[n.id],o=n.options.context&&n.options.context.listAllEvents;for(a&&a.children&&g.forEach(a.children,function(e,t){r.push(g.g)!(i=t[e])._id||!(o||i._natives&&"cue"===i._natives.type)||a&&a.children&&a.children[i._id]||r.push(i);return r.sort(function(e,t){return e.start===t.start?e.end-t.end:e.start-t.start}),r},g.getTrackEvents.ref=e.ref,g.removeTrackEvent=function(e,t){var n,i,r,a=l[e.id],o=a&&a.children[t];o?(i=(n=a.popcorn).getTrackEvent(o.id),r=o.route,_(o,a.popcorn),delete a.children[t],0<=(o=a.history.indexOf(t))&&a.history.splice(o,1),a=g.extend({},i,{plugin:r,type:"trackteardown",track:i}),x.call(n,"trackteardown",a),a=g.extend({},i,{plugin:r,type:"trackremoved",track:i}),x.call(n,"trackremoved",a)):(i=e.data.trackRefs[t])&&k(e,t)},g.removeTrackEvent.ref=k.ref,g.events.fn.trigger=function(e,t){var n,i,r,a,o,s=!1;if(!c[e]||!l[this.id])return x.call(this,e,t);if(r=(n=l[this.id]).children[t.id]||n.trackEventsByChildId[t.id],"trackstart"===e||"trackend"===e||"trackremoved"===e||"trackteardown"===e){if(r)if(i=n.popcorn,"trackstart"===e)r.fakeTrackEvent&&(r.fakeTrackEvent._running=!0),r.started||(s=r.started=!0);else if(r.fakeTrackEvent&&(r.fakeTrackEvent._running=!1),r.started)for(r.started=!(s=!0),o=0;o<r.actualTrackEvents.length;o++)if((a=E(i,r.actualTrackEvents[o]))&&a._running){r.started=!(s=!1);break}if(s)return a=i.getTrackEvent(r.id)||t.track||t,"trackstart"===e&&E(i,r.id)!==a&&r.fakeTrackEvent&&(r.fakeTrackEvent.container=t.track.container),void x.call(i,"trackstart"===e?e:"trackend",g.extend({},a,{plugin:r.route,type:e,track:a}))x.call(this,e,t):this},g.p.emit=g.events.fn.trigger,g.p.trigger=g.events.fn.trigger,g.forEach(g.registryByName,function(e,n){b[n]=g.p[n],g.p[n]=function(e,t){return d(this,n,e,t),this}})}),!function(e,t){"use strict";var n;"object"==typeof exports?(n=irequire("popcorn"),irequire("popcorn.filter"),module.exports=t(n)):"function"==typeof define&&define.amd?define("popcorn.classes",["popcorn","popcorn.filter"],t):t(e.Popcorn)}(this,function(l,e,t){"use strict";var c={};l.filter("classes","",function(e,t,n,i){var r,a,o=l.basePlugin.addClass,s=l.basePlugin.removeClass;if(n(t),(r=i.fakeTrackEvent.container)&&r.parentNode&&t.hasOwnProperty("customClasses")){if(n=c[i.uid]){if(n.customClasses===t.customClasses)return;a=n.originals,l.forEach(n.customClasses.split(" "),function(e){a.indexOf(e)<0&&s(r,e)}),a=r.className.split(" "),n.customCla.className.split(" "),c[i.uid]={customClasses:t.customClasses,originals:a};n=t.customClasses.split(" "),n=a.concat(n),l.forEach(n,function(e){o(r,e)})}},!1,function(e){delete c[e.uid]})}),!function(e,t){"use strict";var n;"object"==typeof exports?(n=irequire("popcorn"),irequire("popcorn.filter"),module.exports=t(n)):"function"==typeof define&&define.amd?define("popcorn.datafilter",["popcorn","popcorn.filter"],t):t(e.Popcorn)}(this,function(u,e){"use strict";var p={},h={};return u.dataFilter=function(e,t,n,c,i,r){var d,a,o,s;if(u.isArray(e))if(1===e.length)d=[e[0]];else for(a={},d=[],o=0;o<e.length;o++)s=e[o],a.hasOwnProperty(s)||(a[s]=!0,d.push(s));else d=[e];u.filter(t,n,function(e,t,i,n){var o,r,a,s,l=this;if(l.getData)return(o=p[n.uid])?o.dirty=!0:o=p[n.uid]={uid:n.uid,node:n,fields:{},dataFilters:{},dirty:!0,name:e,options:t,next:!1,wrapper:function(e,t,n,i){var r,a;if(o.dirty){for(o.dirty=!1,a=[e,t,n,i],r=0;r<d.length;r++)a.push(l.getData(i.virtualEventId,d[r]));return c.apply(l,a)}}},u.forEach(d,function(e){(r=h[e+"/"+n.virtualEventId])?r.nodes.indexOf(o)<0&&(r.nodes.push(o),o.dataFilters[e]=r):(r=h[e+"/"+n.virtualEventId]={field:e,id:n.virtualEventId,nodes:[o],observer:function(){for(var e,t=0;t<r.nodes.length;t++)r.nodes[t++)(e=r.nodes[t]).wrapper(e.name,e.options,e.next,e.node)}},l.watchData(n.virtualEventId,e,r.observer),o.dataFilters[e]=r)}),a=(a=o.next)||(o.next=function(e,t,n){o.dirty=!1,i(e,t,n)}),o.name=e,o.options=t,s=o.wrapper(e,t,a,n),function(n){var e=p[n.uid];e&&(u.forEach(e.dataFilters,function(e){var t;e&&(0<=(t=e.nodes.indexOf(o))&&e.nodes.splice(t,1),e.nodes.length||(l.unwatchData(n.virtualEventId,e.field,e.observer),delete h[e.field+"/"+e.id]))}),delete p[n.uid],o.deleted=!1,s&&s(n))};c(e,t,i,n)},i,r)},u.dataFilter}),define("player.playereval",["popcorn","lodash.noconflict","logging"],function(a,l,c){"use strict";return{TemplateEvaluator:function(n,i){var r=[];this.watchTemplateVars=function(e,t){n.getData&&(a.forEach(r,function(e){n.unwatchData(i.dataId||i.id,e,t)}),e&&(r=n.dataMethod(i.dataId||i.id,"templateVars",e)||e,a.forEach(r,function(e){n.watchData(i.dataId||i.id,e,t)})))},this.evaluate=function(e,t){return e=e&&n.dataMethod&&!n.getData(i.dataId||i.id,"hapyak-editing")?n.dataMethod(i.dataId||i.id,"render",e,t)||e:e}},playereval:function(i,e,t){function n(){}var r,a,o={},t=i.getTrackEvent(t),s={back:n,isFirst:n,isLast:n,first:n,last:n,next:n,pause:n,play:n,previous:n,viewer:n,volume:n};"object"==typeof hapyak.playlist&&"function"==typeof hapyak.playlist.get?(r=i.getData("playerType"),a=i.getData("playlistId"),c.dev("[playereval] Look up playlist",r,a),r&&a&&(s=hapyak.playlist.get(r+"_"+a)||s)):-1!==e.indexOf("playlist")&&c.dev("[playereval] HapYak Playlist API not available: "+e),e=e.replace(/([\w_\$]+\s?=\s?['"]?[\w_\$/]+['"]?)/g,"scope.$1").replace(/([\w_\$]+)\+\+/g,'scope.$1 = player.getData("$1") + 1'),new Function("window","self","top","document","_","scope","player","playlist","resetVariables","resetCondition","resetQuiz","annotation",'"use strict"; '+e)(void 0,void 0,vn(){i.resetData()},function(e){i.setData(null,"event-"+e+var t=i.dataKeys(),n="quiz_"+e+"_";l.each(t,function(e){e.substr(0,n.length)===n&&i.clearData(e)}),i.setData(null,"event-"+e+"/condition",!1)},t),l.each(o,function(e,t){i.setData(t,e)})}}}),define("playlist.addon",[],function(){"use strict";var r,t;function n(e,t){hapyak.message.send(window,"playlistItemsChanged",{playlistItems:e,currentVideo:t})}return hapyak.addon("getPlaylist",{init:function(){},setup:function(e){r=e.data.playlistItems,t=e.data.currentVideo},add:function(e){r=e.data.playlistItems,t=e.data.currentVideo,n(r,t)},remove:function(e){r=e.data.playlistItems,t=e.data.currentVideo,n(r,t)},move:function(e){r=e.data.playlistItems,t=e.data.currentVideo,n(r,t)},goTo:function(e){rr,t)}}),{getVideos:function(){return r},currentVideo:function(){return t},goTo:function(n,e,t){var i=-1;n=n.split("id=")[1]||"",r&&(r.some(function(e,t){if(e.data.id===n)return i=t,!0}),0<=i&&hapyak.message.send(window.parent,"goTo",{index:i,customContext:"playlist",autoplay:e,seekTime:t}))}}}),define("popcorn.onclick",["module","popcorn","dao","lodash.noconflict","utils","utils.embed","utils.samedomain","utils.validatelink","configAPI","popcorn.datafilter","popcorn.data","player.playereval","playlist.addon"],function(e,R,V,j,H,q,z,F,t,n,i,B,U){"use strict";var W,$,e=e.config(),r=t&&t.player,Y=t.isProvisioned("API__ANNOTATION"),G="hapyak-filter-onclick",K=r.localLinks||e.localLinks||!1,a={};function Q(e,t,n){e.addEventListener("click",t,n),e.addEventListener("keypress",function(e){"Enter"===e.key&&t(e)},n)}function X(e,t,n){return null!=n?(a[e]||(a[e]={}),a[e][t]=n):Z(e,t),n}function J(e,t){if(a[e])return void 0!==t?a[e][t]:a[e]}function Z(e,t){a[e]&&(void 0!==t?deletperty("onClick")&&e.onClick&&void 0!==(e=e.onClick[t])?e:void 0}function te(e){W(e.target.parentNode,"hapyak-link-focused")}function ne(e){$(e.target.parentNode,"hapyak-link-focused")}return R.dataFilter(["hapyak-editing","hapyak-internal-variable-update"],"onclick",["image","pop","hotlink","basic360"],function(a,o,e,s,t){var r,n,l,i,c,d,u,p,h,f,m,v,g,y,b,w=!1,E=J(s.uid,"linkHandler"),k=J(s.uid,"trackHandler"),x=J(s.uid,"cssHandler"),C=J(s.uid,"varHandler"),_=(J(s.uid,"addonHandler"),J(s.uid,"loopbackHandler")),T=J(s.uid,"releaseGateHandler"),S=J(s.uid,"trackingHandler"),A=(J(s.uid,"b,"gateHandler"),I=new B.TemplateEvaluator(this,o),L={},D=this,O=this.options.loadTrackTime,M=o.onClick&&o.onClick.rotateToAnnotation;function N(){D.emit("clearactivepauses"),D.pause()}W=R.basePlugin.addClass,$=R.basePlugin.removeClass,r=t||!1,s.actualTrackEvents.length,e(o),X(s.uid,"pause",ee(o,"pause")),X(s.uid,"releaseGate",ee(o,"releaseGate")),X(s.uid,"gate",o.gate),"object"==typeof s.fakeTrackEvent.container&&(n=s.fakeTrackEvent.container,A||(A=X(s.uid,"pauseHandler",(y=s.uid,function(e){e.preventDefault(),r||J(y,"pause")&&N()})),Q(n,A,!1)),T||(T=X(s.uid,"releaseGateHandler",(g=s.uid,function(e){var t=g||this.dataset&&this.dataset.popcornId;e.preventDefault(),!r&&t&&(J(g,"releaseGate")&&D.setData(t,"condition",!0),J(g,"pause")&&N())})),Q(n,T,!1)),J(s.uid,"gate")&&(w=!0,P||(P=X(s.uid,"gateHandler",(v=s.uid,function(e){e&&e.preventDefault&&e.preventDefault(),A&&n.removeEventListener("click",A,!1),J(v,"gate")&&D.setData(o.dataId||o.id,"condition",!0)})),Q(n,P,!0))),S||(S=X(s.uid,"trackingHandler",(m=s.uid,function(e){var t,n=J(m,"link"),i=H.getTrackTime(J(m,"trackTime")),r=ee(o,"setVariables");!e||e.target instanceof HTMLAnchorElement||!e.preventDefault||e.preventDefault(),s.options.annotationId&&(e={Remaining:D.duration()-D.currentTime(),Rollup:[]},n&&(n=I.evaluate(n,!0),e.Target=n,e.Rollup.push("link")),i&&(e.Rollup.push("navigation"),0<=+i.time&&(e["Target Time"]=i.time),0<=+i.track&&(e["Target Track"]=i.track),0<=+i.annotationId&&isNaN(i.time)&&(t=V.store.model,t=V.store.find(t.Comment,i.annotationId),e["Target Annotation"]=i.annotationId,e["Target Time"]=t.get("start_time"))),r&&(e["Target Expression"]=r),s.options.text&&(e.Text=s.options.text),D.options.hapyakPlayer.tracking.annotationActionById(s.options.annotationId,a,n?"External Click":"Click",e))})),Q(n,S,!1)),E&&n.removeEventListener("click",E),(t=(t=X(s.uid,"link",ee(o,"gotoLink")||o.link))&&!F(t)?null:t)?(t=I.evaluate(t,!0),n.setAttribute("title",t),W(n,"hapyak-linked"),"a"===n.nodeName.toLowerCase()&&(n.setAttribute("href",t),(l=X(s.uid,"linkTarget",ee(o,"gotoLinkTarget")||o.target))?n.setAttribute("target",l):K&&z.test(t)||n.setAttribute("target","_new")),w=!0,E=function(e){var t,n=s&&q.dotget(s,"options.annotationId"),i=s&&q.dotget(s,"options.annotationVariableConfig.config")||{};Object.keys(i).forEach(function(e){i[e.replace(/\D/g,"")]=i[e]}),n=i&&i[n]&&i[n].link||f,t=H.regex.templateVarsRegex().test(n),e.preventDefault(),n=I.evaluate(n,!0),!r&&n&&(t&&(n=decodeURIComponent(n)),H.navigateToUrl(n,l))})),Q(n,E),n.addEventListener("mouseover",te,!0),n.addEventListener("mouseout",ne,!0)):($(n,"hapyak-linked"),n.removeAttribute("title"),n.removeEventListener("mouseover",te,!0),n.removeEventListener("mouseout",ne,!0)),(e=J(s.uid,"branchingHandler"))&&n.removeEventListener("click",e),(i=X(s.uid,"goToVideo",ee(o,"goToVideo")))?(w=!0,e=X(s.uid,"branchingHandler",(h=s.uid,function(e){var t=X(s.uid,"track",ee(o,"branchTimeInput")||ee(o,"gotoTrack")),n=0;t?n=o.branchTimeInput?t:t.substr(1):Z(s.uid,"track"),r||J(h,"goToVideo")&&U.goTo(i,!0,n)})),Q(n,e,!1)):Z(s.uid,"goToVideo"),k&&n.removeEventListener("click",k),T=X(s.uid,"track",ee(o,"gotoTrack")),M&&(w=!0,Q(n,function(){var e=D.video.parentNode.getElementsByTagName("VIDEO")[0],e=hapyak.Css360.getSphereByContainerId(q.dotget(e,"dataset.videoId")),t="recenter"===M?null:D.options.hapyakPlayer.annotations.get(M),t=null===t?"[0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1]":q.dotget(t,"properties.transform"),t=t&&JSON.parse(t);e&&"function"==typeof e.setRotation&&t&&e.setRotation(-t[0],t[1],t[2],!0)})),O&&T?X(s.uid,"trackTime",/^([0-9]+)?(?:#(?:([0-9]+):)?([0-9a-fA-Fid\=]+(?:\.[0-9]+)?))?$/.exec(T))&&(w=!0,k=X(s.uid,"trackHandler",(u=s.uid,p=H.getTrackTime(J(u,"trackTime")),function(e){e.preventDefault(),!r&&p&&(D.on("seeked",function e(){D.off("seeked",e),J(u,"pause")||D.play()}),O(p.track,p.time,p.annotationId,null))})),o.goToVideo&&"-"!==o.goToVideo||Q(n,k)):Z(s.uid,"trackTime"),x&&n.removeEventListener("click",x),X(s.uid,"cssClass",ee(o,"addClasses"))&&(w=!0,x=X(s.uid,"cssHandler",(d=J(s.uid,"cssClass"),function(e){e.preventDefault(),r||W(n,d)})),Q(n,x)),C&&n.removeEventListener("click",C),X(s.uid,"expression",ee(o,"setVariables"))&&Y&&(w=!0,C=X(s.uid,"varHandler",(c=s,function(e){e.preventDefault(),r||(e=J(c.uid,"expression"),B.playereval(D,e,c.options.id))})),Q(n,C)),L.addonCommand=X(s.uid,"addonCommand",o.addonCommand),L.addonTypeId=X(s.uid,"addonTypeId",o.addonTypeId),L.addonCommandData=X(s.uid,"addonCommandData",o.addonCommandData),L.addonC=X(s.uid,"addonHandler",(s.uid,function(e){e.preventDefault();var n={customContext:L.addonTypeId,addonCommand:L.addonCommand};j.forEach(L.addonCommandData,function(e,t){n[t]||(n[t]=e)}),hapyak.message.send(parent.window,L.addonCommand,n)})),Q(n,P),n.addEventListener("mouseover",te,!0),n.addEventListener("mouseout",ne,!0))),"loop"===X(s.uid,"loopback",ee(o,"loopback"))?_||(_=X(s.uid,"loopbackHandler",(b=!1,{trackEnd:function(e){var t;e.id!==s.fakeTrackEvent._id||b||(t=D.currentTime(),Math.abs(t-e.end)<1&&D.currentTime(e.start)),b=!1},click:function(){b=!0}})),Q(n,_.click),D.on("trackend",_.trackEnd)):_&&(D.off("trackend",_.trackEnd),n.removeEventListener("click",_.click),Z(s.uid,"loopbackHandler")),(w?W:$)(n,G)},!1,function(e){var t=e.uid,n=J(t),e=e.fakeTrackEvent.container;e&&n&&(n.trackingHandler&&e.removeEventListener("click",n.trackingHandler,!1),n.linkHandler&&(e.removeEventListener("click",n.linkHandler),e.removeEventListener("mouseover",te,!0),e.removeEventListener("mouseout",ne,!0)),n.trackHandler&&e.removeEventListener("click",n.trackHandler),n.cssHandler&&e.removeEventListener("click",n.cssHandler),n.varHandler&&e.removeEventListener("click",n.varHandler),n.loopbackHandler&&(this.off("trackend",n.loopbackHandler.trackEnd),e.removeEventListener("click",n.loopbackHandler.click)),n.pauseHandler&&e.removeEventListener("click",n.pauseHandler),n.goToVideo&&e.removeEventListener("click",n.branchingHandler),n.addonHandler&&(e.removeEventListener("click",n.addonHandler),e.removeEventListener("mouseover",te,!0),e.removeEventListener("mouseout",ne,!0)),$(e,G),$(e,"hapyak-linked"),n.cssClass&&$(e,n.cssClass),Z(t))}),!0}),!function(e,t){"use strict";var n;"object"==typeof exports?(n=irequire("popcorn"),irequire("popcorn.datafilter"),module.exports=t(n)):"function"==typeof define&&define.amd?define("popcorn.precondition",["popcorn","popcorn.datafilter"],t):t(e.Popcorn)}(this,function(e,t,n){"use strict";var v={},g=/\b[a-z_$][a-z_$0-9]*\b/gim,y=/^(break|case|catch|const|continue|debugger|default|delete|do|else|false|finally|for|function|if|in|instanceof|new|return|switch|this|throw|try|typeof|var|void|while|with|class|enum|export|extends|import|super|implements|interface|let|package|private|protected|public|static|yield|Infinity|Intl|JSON|Math|NaN|undefined|null|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|true|uneval|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|Intl|ArrayBuffer|DataView|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|ParallelArray)$/;e.dataFilter(["editMode","condition"],"precondition","",function(e,r,a,o,t,n){var i,s,l,c,d,u,p=this,h={},f={},m=!0;if(!t&&!0===r.precondition&&n)a(null);else{if(l="string"==typeof r.precondition?r.precondition:"",s=v[o.uid])(m=s.expr!==l)&&(s.expr=l,f=s.fields,s.fields=h);else if(!l)return void a(r);if(m){for(c=g.exec(l);c;)i=c[0],y.test(i)||(h[i]=!0),c=g.exec(l);for(i in f)f.hasOwnProperty(i)&&!h.hasOwnProperty(i)&&p.unwatchData(o.virtualEventId,i,s.observer)}if(l){if(s=s||(v[o.uid]={expr:l,fields:h,params:null,evalFn:null,observer:function(){for(var e,t=[],n=!0,i=0;i<s.params.length;i++)e=s.params[i],t.push(p.getData(o.virtualEventId,e));try{n=s.evach(e){n=!0}a(n?r:null)}}),m){try{s.params=Object.keys(h),s.evalFn=(d=s.params,u="return !!("+l+")",(d=d.slice(0)).push(u),Function.apply(null,d))}catch(e){s.evalFn=function(){return!0}}for(i in h)h.hasOwnProperty(i)&&!f.hasOwnProperty(i)&&p.watchData(o.virtualEventId,i,s.observer);s.params=Object.keys(h)}t?a(r):s.observer()}else a(r)}},!0,function(e){var t,n=v[e.uid];if(n){for(t in n.fields)n.fields.hasOwnProperty(t)&&this.unwatchData(e.virtualEventId,t,n.observer);delete v[e.uid]}})}),!function(e,t){"use strict";var n;"object"==typeof exports?(n=irequire("popcorn"),irequire("popcorn.filter"),module.exports=t(n)):"function"==typeof define&&define.amd?define("popcorn.transitions",["popcorn","popcorn.filter"],t):t(e.Popcorn)}(this,function(s,e,t){"use strict";var l=["pop","image"];s.filter("transitions",l,function(e,t,n,i){var r,a=s.basePlugin.addClass,o=s.basePlugin.removeClass;t.transitionClass=t.transition||t.transitionClass||"hapyak-transition-none",delete t.transition,n(t),r=i.fakeTrackEvent.container,-1<l.indexOf(i.fakeTrackEvent._natives.type)&&-1<i.actualTrackEvents.indexOf(i.options.id)&&r&&r.parentNode&&(s.forEach(["hapyak-transition-none","hapyak-transition-fade","hapyak-transition-pop","hapyak-transition-slide-up"],function(e){o(r,e)}),a(r,t.transitionClass))},!1)}),!function(e,o,s){"use strict";var a,i,t,n,r=e.document,l={},c={};function d(e,t,n){t=e.data.fallbacks&&(e.data.fallbacks[t]||e.data.fallbacks[""])||c[t]||c[""]||i;return t="function"==typeof t?t.call(e,n):t}aend:function(){}},o.plugin=function(i,r,e){var t,n=e&&e.incompatible||r.incompatible;if("function"==typeof n){if(l[i]=n(),!l[i])return void a(i,t=r,e);t=function(e){return d(this,i,e)}}else t="function"!=typeof r?r:function(e){var t=r.call(this,e),n=l[i];return n===s&&"function"==typeof t.incompatible&&(n=t.incompatible.call(this,e),(l[i]=n)&&t._teardown&&t._teardown.call(this,e)),n?d(this,i,e):t};a(i,t,e)},o.incompatible=function(e){return e?l[e]||!1:(t=t===s?!r.addEventListener:t)?"Obsolete browser: No support for addEventListener":(n===s&&(n=!1,o._MediaElementProto||(e=r.createElement("video"))&&e.canPlayType||(n=!0)),!!n&&"Obsolete browser: No support for HTML5 video")},o.prototype.incompatible=function(e){var t,n,i,r,a=0,e=o.incompatible(e);if(e)return e;for(t={},i=this.data.trackEvents.byStart,n=0;n<i.length&&a<o.registry.length;n++)(r=(r=i[n])._natives&&r._natives.type)&&t[r]===s&&(t[r]=o.incompatible(r),a++);return!!a&&t},o.fallback=function(e,t){"object"!=typeof e&&"function"!=typeof e||(t=e,e=""),c[e]=t},o.prototype.fallback=function(e,t){this.data.fallbacks||(this.data.fallbacks={"":i}),"object"!=typeof e&&"function"!=typeof e||(t=e,e=""),this.data.fallbacks[e]=t}}(this,this.Popcorn),define("popcorn.compatible",["popcorn"],function(){}),!function(C,_){"use strict";var T,i,a,S,A=C.document,P=C.console,r={},I=[],L=/[\-+]?[0-9]*\.?[0-9]+/g,D=/\-([a-z])/g,O=/^\-\*\-([a-z\-]+)/,M=["","-moz-","-webkit-","-o-","-ms-"],N=/#(([0-9a-fA-F]{3,8}))/g,R=/(rgba?)\(\s*([0-9]*\.?[0-9]+)\s*,\s*([0-9]*\.?[0-9]+)\s*,\s*([0-9]*\.?[0-9]+)\s*(,([0-9]*\.?[0-9]+))?\)/gi,V=/^([A-Za-z\-]+)(+]?[0-9]*\.?[0-9]+))*)\))?$/,j=/^(_(natives|id|running)|id|target|effect|compose|toString|container)$/;C.a11yListener=function(e,t){return e.keypress(function(e){"Enter"===e.key&&t(e)}),e.click(t),e},P=P||{log:function(){}},(T=function(e){if(C===this||!(this instanceof T))return T.fe,this.id=_.guid(),r[this.id]=this}).find=function(e){var t,n;for(t in r)if(r.hasOwnProperty(t)&&(n=r[t])&&n.popcorn===e)return n},T.plugins={},T.register=function(e,t){T.pn(e,t,n){var i,r=this;this.name=e,this.pluginFn=t,this.events={},i=function(e){return new a(this,r,e).definition()},_.forEach(t,function(e,t){i[t]=e}),_.forEach(t,function(e,t){i[t]=e}),_.plugin(e,i,n),T.register(e,this)},(a=function(l,r,m){var t,c,a,i,o,n,s,d,u,p,e,h=!1,v=this,f=T(l),g={},y=[],b=[];function w(t,e){if((t=t&&"string"==typeof t?C[t]:t)&&"function"==typeof t)try{t.call(v,m,e)}catch(e){(t=e)&&P.log(t.stack||t.stacktrace||t.message||t)}}function E(e){function t(e,t){for(var n=[],i=0;i<e.length;i++)n.push(t[i]),n.push(e[i]);return n.push(t[i]),n.join("")}function n(e,t,n,i,r,a,o){for(var s=[n,i,r],l=0;l<3;l++)s[l]=Math.round(parseFloat(s[l]));return a&&s.push(o),t+"("+s.join(",")+")"}var i,r,a,o,s,l,c,d,u;for(i in g)if(g.hasOwnProperty(i)){if(l=function(e,t){var n;if(e.length){if(e[0].t>t)return-1;for(n=1;n<e.length;n++)if(e[n].t>=t)return n-1;return n-1}}((o=g[i]).keyframes,e),c=o.keyframes[l+1],l=(l=o.keyframes[l])||c,c&&l!==c){for(d=c.t-l.t,a=(l.timing||o.timing)((e-l.t)/d),l=l.val,c=c.val,u=[],r=0;r<l.length;r++)u.push(l[r]+(c[r]-l[r])*a);s=o.str?(s=t(u,o.str)).replace(R,n):u[0]}else s=o.str?t(l.val,o.str):l.val[0];v.options[i]=s,o.callback&&o.callback.call(v,s)}}function k(){var e,t,n=null;if(u)for(e=u.length-1;0<=e&&!((t=u[e])===v||t.options.start<v.options.start||t.options.start===v.options.start&&t.options.end<v.options.end);e--)t.container&&t.container.parentNode===v.target&&(n=t.container);"basic360"!==v.pluginName&&v.target.insertBefore(v.container,n)}function x(e){var t,n,i;for(d?0<=(n=d.indexOf(v))&&d.splice(n,1):d=r.events[s],n=d.length-1;0<=n&&!((t=d[n].options).start<=m.start||t.start===m.start&&t.end<=m.end);n--);if(d.splice(n+1,0,v),v.allEvents=d,void 0!==e){if(e instanceof C.Element||e instanceof C.HTMLElement||(e=null),u&&0<=(n=u.indexOf(v))&&u.splice(n),!e)return void delete v.target;if(e!==v.target){for(v.target=e,n=0;n<I.length;n++)if((i=I[n]).target===v.target){u=i.events;break}if(!u)return u=[v],void I.push({target:v.target,events:u})}}if(u){for(n=u.length-1;0<=n&&!((t=u[n].options).start<m.start||t.start===m.start&&t.end<=m.end);n--);u.splice(n+1,0,v)}}for(e in this.popcorn=l,this.pluginName=r.name,"string"==typeof m.start&&(m.start=_.util.toSeconds(m.start,l.options.framerate)),m.start||0===m.start||(m.start=m.in||0),"string"==typeof m.end&&(m.end=_.util.toSeconds(m.end,l.options.framerate)),m.end||0===m.end||(m.end=m.out||l.duration()||Number.MAX_VALUE),this.options={},m)m.hasOwnProperty(e)&&(this.options[e]=m[e]);s=f.id,r.events[s]||(r.events[s]=[]),x("string"==typeof m.target?A.getElementById(m.target):m.target),this.definition=function(){return p},this.makeContainer=function(e,t){void 0===t&&(t=!0);e=A.createElement(e=e||"div");return this.container=e,this.addClass(e,"popcorn-"+this.pluginName),e.ariaModal="true",t&&this.target&&k(),e},this.animate=function(e,t){var n,i,f,r=!1,c={};function d(e,t){function n(e){return"string"!=typeof e?e:e.replace(N,function(e){var t,n,i=e.length;if(4===i||5===i)for(t=e.match(/[0-9A-Fa-f]/g),n=0;n<t.length;n++)t[n]=parseInt(t[n]+t[n],16);else if(7===i||9===i)for(t=e.match(/[0-9A-Fa-f]{2}/g),n=0;n<t.length;n++)t[n]=parseInt(t[n],16);return 3<t.length?(t[3]/=255,"rgba("+t.join(",")+")"):"rgb("+t.join(",")+")"},"g")}function i(e){var t,n,i=[];if(!e)return S.linear();if("function"==typeof e)return e;if(!(n=V.exec(e)))return S.linear();if(!(e=S[n[1]]))return S.linear();for(n[3]&&(i=n[3].split(",")),t=0;t<i.length;t++)i[t]=parseFloat(i[t]);return"function"==typeof(n=e.apply(null,i))?n:e}var r,a,o,s,l,c,d,u,p=1,h=[];if(!e||!m[e])return!1;if("object"!=typeof(a=m[e]))return v.options[e]=a,!1;for(o in r={name:e,keyframes:h,timing:i(a.timing)},a)if(a.hasOwnProperty(o)&&(u=a[o],o="from"===o&&void 0===a[0]?0:"to"===o&&void 0===a[1]?1:parseFloat(o),d="object"==typeof u&&(d=u[1]||u.timing,u=void 0===u[0]?u.val:u[0],d===a.timing?r.timingFn:i(d)),"string"==typeof u?l=(u=n(u)).match(L):"number"==typeof u&&(l=[u]),l&&!isNaN(o)&&(c||"string"!=typeof u||(c=u.split(L),p=l.length,c.length<p&&c.push("")),l.length===p))){for(s=0;s<l.length;s++)l[s]=parseFloat(l[s],10);u={t:o,val:l},d&&d!==r.timing&&(u.timing=d),h.push(u)}return h.length?1===h.length?(v.options[e]=h[0].val,!1):(r.str=c,h.sort(function(e,t){return e.t-t.t}),"function"==typeof t&&(r.callback=t),g[e]=r,f.props.push(e),!0):(v.options[e]=a,!1)}function a(e,t){function n(e,t){var n;return"src"!==t&&"toString"!==t&&"function"!=typeof e.style[t]&&(e.style.hasOwnPC.getComputedStyle(e))&&!(e=C.getComputedStyle(A.body)))&&(n=t.toLowerCase(),e.hasOwnProperty(t)||void 0!==e[t]||e.getPropertyValue(t)?t.replace(D,function(e,t){return t.toUpperCase()})||!1:e.hasOwnProperty(n)||void 0!==e[n]||e.getPropertyValue(n)?n:void 0):void 0)}var i,r,a,o,s,l=O.exec(e);if(l){for(l=+)if(a=n(t,o=M[s]+l),c[a]||a&&o!==e&&m[o])return!1}else a=n(t,e);return!!a&&("top"!==e&&"left"!==e&&"right"!==e&&"bottom"!==e||(t.style.position="absolute"),i=function(e){t.style[a]=e},c[a]=!0,r={e:t,name:a},(i=d(e,i))||(r.val=m[e]),y.push(r),i)}for(e||this.container&&(e=this.container),e=e||"",i=b.length-1;0<=i;i--)if((f=b[i]).name===e){for(;f.props.length;)delete g[f.props.pop()];b.splice(i,1);break}if(f={name:e,opts:t,props:[]},b.push(f),e instanceof C.HTMLElement){for(i in m)m.hasOwnProperty(i)&&(r=a(i,e)||r);return r}return t instanceof C.HTMLElement?a(e,t):d(e,n="function"!=typeof t&&"object"!=typeof t?n:t)},p=r.pluginFn.call(l,m,this),t=(p=p||{})._setup,p._setup=function(e){"function"==typeof t&&t.call(v,e),w(e.onSetup)},a=p.start,p.start=function(e,t){var n,i;if(!h)for(n=0;n<y.length;n++)(i=y[n]).backup=i.e.style[i.name],i.e.style[i.name]=i.val;h=!0,E.call(v,0),"function"==typeof a&&a.call(v,e,t),w(t.onStart),p.frame(e,t,l.currentTime())},i=p.frame,p.frame=function(e,t,n){h&&(E.call(v,(n-v.options.start)/(v.options.end-v.options.start)),"function"==typeof i&&i.call(v,e,t,n),w(t.onFrame,n))},(c=p._update)&&(p._update=function(e,t){var n,i,r,a,o=!1,s=[];for(i in void 0===t.start?t.start=m.start:t.start=_.util.toSeconds(t.start,l.options.framerate),void 0===t.end?t.end=m.end:t.end=_.util.toSeconds(t.end,l.options.framerate),t.start===m.start&&t.end===m.end||(o=!0,m.start=t.start,m.end=t.end,v.options.start=m.start,v.options.end=m.end),(o=t.hasOwnProperty("target")&&(a=(a=t.target)&&"string"==typeof a?A.getElementById(a):a)!==v.target?!0:o)&&(x(a),v.container&&k()),"function"==typeof c&&c.call(v,m,t),t)t.hasOwnProperty(i)&&!j.test(i)&&(v.options[i]=t[i],m[i]=t[i],e[i]=t[i]);for(;y.length;)(r=y.shift()).e.style[r.name]=r.backup||"";for(n=0;n<b.length;n++)s.push(b[n]);for(n=0;n<b.length;n++)v.animate(b[n].name,b[n].opts);if(e._running)for(n=0;n<y.length;n++)(r=y[n]).backup=r.e.style[r.name],r.e.style[r.name]=r.val;w(e.onUpdate)}),o=p.end,p.end=function(e,t){if(h){var n,i;for(E.call(v,1),w(t.onEnd),"function"==typeof o&&o.call(v,e,t),n=0;n<y.length;n++)(i=y[n]).e.style[i.name]=i.backup;h=!1}0},n=p._teardown,p._teardown=function(e){w(e.onTeardown),"function"==typeof n&&n.call(v,e),v.container&&((e=v.container.parentNode)&&e.removeChild(v.container),delete v.container),0<=(e=d.indexOf(v))&&d.splice(e,1)}}).prototype.toArray=function(t,e){var n;if(void 0===t)return[];if("[object Array]"===Object.prototype.toString.call(t))return t;try{n=JSON.parse(t),"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n])}catch(e){n=t}if(e&&"string"==typeof n)try{n=n.split(e)}catch(e){}return null!=n&&"[object Array]"!==Object.prototype.toString.call(n)?[n]:n},a.prototype.toObject=function(t){if("object"==typeof t)return t;try{return JSON.parse(t)}catch(e){return t}},void 0===A||A.createElement("a").classList?(a.prototype.hasClass=function(e,t){var n;if(e&&e.classList){for(n=0;n<e.classList.length;n++)if(e.classList[n]===t)return!0;return!1}},a.prototype.addClass=function(e,t){var n,i;if(e&&e.classList)for(n=a.prototype.toArray(t,/[\s\t\r\n ]+/),i=0;i<n.length;i++)try{e.classList.add(n[i])}catch(e){}},a.prototype.removeClass=function(e,t){var n,i;if(e&&e.classList)for(n=a.prototype.toArray(t,/[\s\t\r\n ]+/),i=0;i<n.length;i++)try{e.classList.remove(n[i])}catch(e){}}):(a.prototype.hasClass=function(e,t){var n,i;if(t&&e&&e.getAttribute){for(n=(n=e.getAttribute("class")||"").split(/[\s\t\r\n ]+/),i=0;i<n.length;i++)if(n[i]===t)return!0;return!1}},a.prototype.addClass=function(e,t){var n,i;if(t&&e&&e.getAttribute){for(t=a.prototype.toArray(t,/[\s\t\r\n ]+/),n=(n=e.getAttribute("class")||"").split(/[\s\t\r\n ]+/),i=0;i<t.length;i++)n.indexOf(t[i])<0&&n.push(t[i]);e.setAttribute("class",n.join(" "))}},a.prototype.removeClass=function(e,t){var n,i,r;if(t&&e&&e.getAttribute){for(t=a.prototype.toArray(t,/[\s\t\r\n ]+/),n=(n=e.ge(/[\s\t\r\n ]+/),i=0;i<t.length;i++)0<=(r=n.indexOf(t[i]))&&n.splice(r,1);e.setAttribute("class",n.join(" "))}}),a.prototype.nop=function(){},_.basePlugin=function(e,t,n){new i(e,t,n)},_.basePlugin.toArray=a.prototype.toArray,_.basePlugin.toObject=a.prototype.toObject,_.basePlugin.addClass=a.prototype.addClass.removeCt<1?S.linear():function(e){return Math.floor(e*t)/t}},"step-end":function(t){return t<1?S.linear():function(e){return Math.ceil(e*t)/t}},linear:function(){return function(e){return e}},"cubic-bezier":function(e,t,n,i){var r,a,o,s,l,c;function d(e){for(var t,n=e,i=0;i<10&&(t=n*(r+n*(a+n*o))-e,!(Math.abs(t)<1e-4));)n-=t/(r+n*(2*a+3*o+n)),i++;return n}return isNaN(e)&&(e=.25),isNaN(t)&&(t=.1),isNaN(n)&&(n=.25),isNaN(i)&&(i=1),t=Math.min(Math.max(t,0),1),i=Math.min(Math.max(i,0),1),o=1-(r=3*e)-(a=3*(n-e)-r),c=1-(s=3*t)-(l=3*(i-t)-s),function(e){return(e=d(e))*(s+e*(l+e*c))}},ease:function(){return S["cubic-bezier"](.25,.1,.25,1)},"ease-in":function(){return S["cubic-bezier"](.42,0,1,1)},"ease-in-out":function(){return S["cubic-bezier"](.42,0,.58,1)},"ease-out":function(){return S["cubic-bezier"](0,0,.58,1)},"ease-in-power":function(t){return isNaN(t)||t<0?S.linear():function(e){return Math.pow(e,t)}},"ease-in-out-power":function(t){return isNaN(t)||t<0?S.linear():function(e){return e<.5?.5*Math.pow(2*e,t):-.5*(Math.pow(Math.abs(2*e-2),t)-2)}},"ease-out-power":function(t){return isNaN(t)||t<0?S.linear():function(e){return 1-Math.pow(Math.abs(e-1),t)}},"ease-in-quad":function(){return S["ease-in-power"](2)},"ease-in-out-quad":function(){return S["ease-in-out-power"](2)},"ease-out-quad":function(){return S["ease-out-power"](2)},"ease-in-cubic":function(){return S["ease-in-power"](3)},"ease-in-out-cubic":function(){return S["ease-in-out-power"](3)},"ease-out-cubic":function(){return S["ease-out-power"](3)},"ease-in-quart":function(){return S["ease-in-power"](4)},"ease-in-out-quart":function(){return S["ease-in-out-power"](4)},"ease-out-qua4)},"ease-in-qut":function(){return S["ease-in-out-p["ease-out-power"](5)},"ease-in-sinMath.cos(e*Math.PI/2)}},"ease-in-n-.5*(Math.cos(Math.PI*e)-1)}},"ease-out-sine":function(){return function(e){return Math.sin(e*Math.PI/2)}},"ease-in-exp":function(){return function(e){return e?Math){return functio-Math.pow(2,-10*(2*e-1))):0}},"eas===e?1:1-Math.pow(2,-10*e)}},"ease-in-circ":function(){return function(e){return 1-Math.sqrt(1-e*e)}},"ease-out-circ":function(){return function(e){return Math.sqrt(1-Math.pow(e-1,2))}},"ease-in-out-circ":function(){return function(e){return e<.5?-.5*(Math.sqrt(1-Math.pow(2*e,2))-1):.5*(Math.sqrt(1-Math.pow(2*e-2,2))+1)}},bounce:function(r,e){var a,t,n,i;for((!r||r<=0)&&(r=39.2),(isNaN(e)||e<0)&&(e=.5625),n=(a=[{t0:0,h:1,t:Math.sqrt(2/r),x0:0}])[0],i=t=1;t<15&&.005<i;t++)i=(n={t0:n.t,h:n.h*e,t:n.t+2*Math.sqrt(2*e*n.h/r)}).t-n.t0,n.x0=(n.t+n.t0)/2,a.push(n);return function(e){for(var t,n,i=0;i<a.length&&!(e}).step=S["step-start"],_.basePlugin.timing=S}(window,window.Popcorn),define("popcorn.base",["popcorn","popcorn.compatible"],function(e){return function(){return e.Popcorn.basePlugin}}(this)),!function(e,t){"use strict";var n;"object"==typeof exports?(n=irequire("popcorn"),irequire("popcorn.filter"),irequire("popcorn.data"),irequire("popcorn.datafilter"),module.exports=t(n)):"function"==typeof define&&define.amd?define("popcorn.gates",["popcorn","popcorn.filter","popcorn.data","popcorn.datafilter"],t):t(e.Popcorn)}(this,function(o,e,t){"use strict";var s={};function l(i,e){var r=i.popcorn,t="hapyak-is-gated",n=r.options&&r.options.hapyakPlayer;function a(){return.4<=r.currentTime()-i.minGate}if(e&&(i.minGate=1/0,o.forEach(r.getTrackEvents(),function(e){var t=e.gateAtEnd?e.end-.5:e.start,n=e.onClick&&"loop"===e.onClick.loopback;e&&e.gate&&!r.getData(e._id,"condition")&&(t<i.minGate?(i.loopback=!!n,i.startTime=e.start,i.minGate=t):t===i.minGate&&(i.loopback?i.startTime=Math.min(i.start,e.start):(i.loopback=!!n,i.startTime=e.start)))})),i.editMode)n&&n.removeClass(t);else{if(r.currentTime()>=i.minGate)return n&&n.addClass(t),i.gateLocked=!0,i.loopback?a()&&r.currentTime(i.startTime):(r.pause(),a()&&r.currentTime(i.minGate)),!0;i.gateLocked&&(n&&n.removeClass(t),i.gateLocked=!1,r.play())}return!1}o.dataFilter(["editMode","condition"],"gates","",function(e,t,n,i,r){var a=s[this.id];a?a.editMode=r:(a={popcorn:this,minGate:1/0,gateLocked:!1,editMode:r,timeupdate:function(){l(a)}},s[this.id]=a,this.on("timeupdate",a.timeupdate)),n(t),l(a,!0)},!0,function(){var e=s[this.id];e&&(this.data.trackEvents.byStart.length<2||2===this.data.trackEvents.byStart.length&&!this.data.trackEvents.byStart[1]._natives?(this.off("timeupdate",e.timeupdate),l(e,!0),delete s[this.id]):l(e,!0))}),o.p.checkGates=function(e){var t=s[this.id];return!!t&&l(t,e)}}),define("popcorn.pop",["module","popcorn","promise!configuration","player.playereval","utils","utils.samedomain","popcorn.base","popcorn.gates"],function(e,t,x,C,_,T){"use strict";var e=e.config(),n=x&&x.player,S=/(\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?])))|(([0-9]+):([0-9]{2}(\.[0-9]+)?))/gi,A=/^https?:\/\//i,P=[],I=!1,L=n.localLinks||e.localLinks||!1,D=0,O={};function M(e,t,n,i){var r=e.parentNode.parentNode,a=e.getContext("2d");a.clearRect(0,0,e.width,e.height),i?r.style.borderColor=i:a.strokeStyle=n&&I?"#1892BF":"#000000",a.save(),a.translate(2,10),a.beginPath(),a.moveTo(13.5,7),a.bezierCurveTo(13.5,10.6,10.6,13.5,7,13.5),a.bezierCurveTo(3.4,13.5,.5,10.6,.5,7),a.bezierCurveTo(.5,3.4,3.4,.5,7,.5),a.bezierCurveTo(10.6,.5,13.5,3.4,13.5,7),a.closePath(),a.fillStyle=i||window.getComputedStyle(r).backgroundColor,a.fill(),i||(a.lineWidth=t,a.stroke()),a.beginPath(),a.moveTo(17.5,23.8),a.bezierCurveTo(17.5,26.1,15.6,28,13.2,28),a.bezierCurveTo(10.9,28,9,26.1,9,23.8),a.bezierCurveTo(9,21.4,10.9,19.5,13.2,19.5),a.bezierCurveTo(15.6,19.5,17.5,21.4,17.5,23.8),a.closePath(),a.fill(),i||(a.lineWidth=t,a.stroke()),a.beginPath(),a.moveTo(27.5,31.8),a.bezierCurveTo(27.5,33.5,26,35,24.2,35),a.bezierCurveTo(22.5,35,21,33.5,21,31.8),a.bezierCurveTo(21,30,22.5,28.5,24.2,28.5),a.bezierCurveTo(26,28.5,27.5,30,27.5,31.8),a.closePath(),a.fill(),i||(a.lineWidth=t,a.stroke()),a.restore()}function N(e,t,n,i){var r=e.parentNode.parentNode,a=e.getContext("2d");i?(r.style.borderColor=i,e.style.borderTopColor=i):a.strokeStyle=n&&I?"#1892BF":"#000000",a.clearRect(0,0,e.width,e.height),a.save(),a.beginPath(),a.moveTo(0,0),a.bezierCurveTo(0,0,10.8,26.3,35,41.9),a.bezierCurveTo(35,41.9,19.2,26.3,23.4,0),a.fillStyle=i||window.getComputedStyle(r).backgroundColor,a.fill(),i||(a.lineWidth=t,a.stroke()),a.restore()}t.basePlugin("pop",function(s,n){var i,r,a,l,o,c,d,u,p=this,t=!1,h=new C.TemplateEvaluator(this,s),f={thought:{drawFn:M,className:"popcorn-pop-thought"},speech:{drawFn:N,className:"popcorn-pop-speech"},outline:{className:"popcorn-pop-outline"},black:{className:"hapyak-theme-black"},white:{className:"hapyak-theme-white"},pop:{className:"hapyak-theme-pop"}};function e(){I=!0,g(f[s.mode].drawFn,n.hasClass(r,"hapyak-linked"))}function m(){I=!1,g(f[s.mode].drawFn,n.hasClass(r,"hapyak-linked"))}function v(){n.hasClass(r,"hapyak-linked")&&-1<["speech","thought"].indexOf(s.mode)?(r.addEventListener("mouseover",e,!0),r.addEventListener("mouseout",m,!0)):(r.removeEventListener("mouseover",e,!0),r.removeEventListener("mouseout",m,!0))}function g(e,t){e?(c||((c=document.createElement("canvas")).width=40,c.height=60,a.appendChild(c)),s.arrow&&0<=s.arrow.indexOf("right")?n.addClass(c.parentNode,"right"):n.removeClass(c.parentNode,"right"),s.arrow&&0<=s.arrow.indexOf("top")?n.addClass(c.parentNode,"top")op"),s.flipTail?n.addClass(c.parentNode,"flip"):n.removeClass(c.parentNode,"flip"),e(c,2,t,s.backgroundColor)):c&&(c.parentNode&&c.parentNode.removeChild(c),c=null)}function y(){p.media.pause()}function b(){var e,t,n,i,r,a,o=h.evaluate(s.text);for(o=o.split(/[\n\r]/),l.innerHTML="",l.setAttribute("tabindex","0"),e=0;e<o.length;e++){for(e&&l.appendChild(document.createElement("br")),n=o[e],S.lastIndex=t=0,r=S.exec(n);r;)l.appendChild(document.createTextNode(n.substr(t,r.index-t))),r[1]?(A.test(r[1])||(r[1]="http://"+r[1]),!u||u(r[1])?((i=document.createElement("a")).className="popcorn-pop-link",L&&T.test(r[1])||i.setAttribute("target","_blank"),i.setAttribute("href",r[1]),i.setAttribute("data-hapyak-log",!0),a=r[0],d&&20<(a=a.replace(A,"")).length&&(a=a.substr(0,17)+"..."),i.appendChild(document.createTextNode(a)),i.addEventListener("click",y,!0),l.appendChild(i)):3===l.lastChild.nodeType?l.lastChild.nodeValue+=r[0]:l.appendChild(document.createTextNode(r[0]))):r[7]&&((i=document.createElement("a")).setAttribute("href","#"),i.appendChild(document.createTextNode(r[0])),i.addEventListener("click",function(t){return function(e){e.preventDefault(),0<=t&&t<p.duration()&&p.currentTime(t)}}(60*(parseFloat(r[8])||0)+(parseFloat(r[9])||0)),!0),l.appendChild(i)),t=S.lastIndex,r=S.exec(n),i&&i.setAttribute("title",i.href),i=null;t<n.length&&l.appendChild(document.createTextNode(n.substr(t)))}}function w(){p.getData(s.dataId||s.id,"hapyak-editing")||b()}function E(){var e,t;for(e in f)e!==s.mode&&f[e].className?n.removeClass(r,f[e].className):(t=f[e].drawFn,f[e].className&&n.addClass(r,f[e].className));v(),"outline"===s.mode?""===document.createElement("div").style.webkitTextStroke?n.addClass(r,"popcorn-pop-outline-stroke"):""===document.createElement("div").style.textShadow?n.addClass(r,"popcorn-pop-outline-shadow"):n.addClass(r,"popcorn-pop-outline-fallback"):(n.removeClass(r,"popcorn-pop-outline-stroke"),n.removeClass(r,"popcorn-pop-outline-shadow"),n.removeClass(r,"popcorn-pop-outline-fallback")),g(t)}function k(){n.addClass(r,"hide"),t||r&&(n.removeClass(r,"hide"),"function"==typeof s.onLoad&&s.onLoad(s),p.emit("resized"))}return void 0===(d=p.options&&p.options.shortenUrls)&&(d=!0),u=p.options&&p.options.validateLink,n.target=n.target||s.target,n.target?(s.mode||(s.mode="pop"),s.text||(s.text=""),i=p.media,n.target,r=n.makeContainer(),s.container=r,a=document.createElement("div"),r.appendChild(a),n.animate(),s.baseWidth,s.textContainer?a.appendChild(s.textContainer):(l=document.createElement("div"),a.appendChild(l),b()),E(),k(&(!0===s.sound?s.sound="/sounds/mouthpop.ogg":s.sound instanceof window.HTMLMediaElement&&(o=s.sound,s.sound=o.currentSrc),o||(o=function(e){var t,n,i,r,a;function o(){a.currentTime=0,a.pause()}if(O[e]){for(i=(a=O[e][0]).duration?Math.min(a.duration,2):2,r=O[e].slice(0),t=0;t<P.length;t++)(n=P[t]).sound===s.sound&&n.start<=s.start+i&&n.start+i>=s.start&&0<=(n=r.indexOf(n.audio))&&r.splice(n,1);r.length?a=r[0]:((a=O[e][0].cloneNode(!0)).id="popcorn-pop-sound-"+D,D++,a.removeEventListener("ended",o,!1),a.addEventListener("ended",o,!1),document.body.appendChild(a),O[e].push(a))}else(a=document.createElement("audio")).src=e,a.id="popcorn-pop-sound-"+D,D++,a.preload=!0,a.style.display="none",a.addEventListener("ended",o,!1),document.body.appendChild(a),O[e]=[a];return a}(s.sound),s.audio=o),P.push(s)),s.annotationVariableConfig.add("pop",s,function(e,t,n){n.link&&"string"==typeof n.link&&s.onClick&&(s.onClick.gotoLink=n.link),n.text&&(s.text=n.text),b()}),{start:function(e(),o&&o.duration&&!i.paused&&i.currentTime-1<t.start&&(o.volume=i.volume,o.muted=i.muted,o.play(),(!o.duration||isNaN(o.duration)||2<o.duration)&&setTimeout(function(){o.currentTime=0,o.pause()},2))},end:function(){n.removeClass(n.container,"active")},_update:function(e,t){var n;l.innerHTML="",s.text=t.text||"",h.watchTemplateVars(s.text,w),b(),(void 0!==t.pause&&s.pause!==t.pause||t.end!==s.end||t.start!==s.start)&&(s.pause=t.pause),e.width&&/[0-9\.]+px/i.test(e.width)||(n=x.player.baseWidth||1200,e=_.measurePopText(e,n),s.width=e/n*100+"%",r.style.width=s.width),(t.hasOwnProperty("mode")&&t.mode!==s.mode||t.hasOwnProperty("arrow")&&s.arrow!==t.arrow||t.hasOwnProperty("flipTail")&&t.flipTail!==s.flipTail||t.hasOwnProperty("backgroundColor")&&s.backgroundColor!==t.backgroundColor)&&(s.mode=t.mode,s.arrow=t.arrow,s.flipTail=t.flipTail,s.backgroundColor=t.backgroundColor,r.style.backgroundColor=s.backgroundColor,E()),(t.hasOwnProperty("fontFamily")&&s.fontFamily!==t.fontFamily||t.hasOwnProperty("fontProvider")&&s.fontProvider!==t.fontProvider)&&(s.fontFamily=t.fontFamily,s.fontProvider=t.fontProvider,k()),s.annotationVariableConfig.update("pop",s)},_teardown:function(){var e;t=!0,0<=(e=P.indexOf(s))&&P.splice(e,1),s.annotationVariableConfig.remove(s.annotationId)}}):{_update:function(){}}},{about:{name:"Popcorn Pop Plugin",version:.2,author:"Hapyak",website:"http://www.hapyak.com"},options:{start:{elem:"input",type:"number",label:"Start",units:"seconds"},end:{elem:"input",type:"number",label:"End",units:"seconds"},text:{elem:"input",type:"text",label:"Text"},link:{elem:"input",type:"url",label:"Link URL"},linkTarget:{elem:"input",type:"text",label:"Link Target"}}})}),define("player.normalizeonclick",["popcorn","utils","utils.validatelink"],function(l,i,r,c){"use strict";var a=/^(https?:\/\/|mailto:)/i,d=/^([0-9]+)?(?:#((([0-9]+):)?([0-9]+(?:\.[0-9]+)?)))?$/,n=/^[\-\w]+$/,o=i.regex.onClickVariables,s={gotoLink:function(e,t){var n;return e||((n=l.extend({},t&&t.onClick)).gotoLink=null),i.regex.validDomain.test(e.replace(/(?:(mailto|https?):)?\/\//,""))&&r(e)&&(n=l.extend({},t&&t.onClick),a.test(e)?n.gotoLink=e:n.gotoLink="http://"+e),i.regex.validDomain.lastIndex=0,a.lastIndex=0,!!n&&{onClick:n}},gotoTrack:function(e,t,n){var i,r,a,o=this;function s(){var e=l.util.toSeconds(i[2]),e=Math.min(r,e);return a.gotoTrack=(i[1]||"")+"#"+e,{onClick:a}}return e?(i=d.exec(e))?(a=l.extend({},t&&t.onClick),i[2]?(r=o.duration())?s():(o.on("durationchange",function(){r=o.duration(),n(s())}),c):(a.trackTime=e,{onClick:a})):(d.lastIndex=0,!1):((a=l.extend({},t&&t.onClick)).gotoTrack=null,{onClick:a})},addClasses:function(e,t){return!e||n.test(e)?((t=l.extend({},t&&t.onClick)).addClasses=e||null,{onClick:t}):(n.lastIndex=0,!1)},setVariables:function(e,t){return o.test(""),!e||o.test(e)?((t=l.extend({},t&&t.onClick)).setVariables=e||null,{onClick:t}):(o.lastIndex=0,!1)},onClick:function(e,t,n){var i,r={};if(e.gotoLink){if(!1===(i=s.gotoLink.call(this,e.gotoLink,t,n)))return!1;r.gotoLink=i.onClick.gotoLink}if(e.addClasses){if(!1===(i=s.addClasses.call(this,e.addClasses,t,n)))return!1;r.addClasses=i.onClick.addClasses}if(e.setVariables){if(!1===(i=s.setVariables.call(this,e.setVariables,t,n)))return!1;r.setVariables=i.onClick.setVariables}return e.gotoTrack?!1!==(i=s.gotoTrack.call(this,e.gotoTrack,t,function(e){!1===e?n(!1):(r.gotoTrack=e.onClick.gotoTrack,n({onClick:r}))}))&&(i!==c?(r.gotoTrack=i.onClick.gotoTrack,{onClick:r}):void 0):{onClick:r}}};return s}),define("player.normalizetransition",[],function(e){"use strict";var t=/^hapyak-transition-(none|fade|pop|slide-up)$/;return function(e){return e?!!t.test(e)&&e:"hapyak-transition-none"}}),define("utils.parsecolor",[],function(){"use strict";var r,a=/^rgba?\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(,\s*(\d+(\.\d*)?)\s*)?\)/i,o=/^#([0-9a-fA-F]{3,6})/,s=/^hsla?\(\s*(\d+(?:\.\d*)?)\s*,\s*(\d+)%?\s*,\s*(\d+)%?\s*(?:,\s*(\d+(?:\.\d*)?)\s*)?\)/i,l=/^[a-zA-Z]+/,c={transparent:{r:0,g:0,b:0,a:0},black:{r:0,g:0,b:0,a:1},red:{r:255,g:0,b:0,a:1},green:{r:0,g:128,b:0,a:1},blue:{r:0,g:0,b:255,a:1},white:{r:255,g:255,b:255,a:1},silver:{r:192,g:192,b:192,a:1},gray:{r:128,g:128,b:128,a:1},maroon:{r:128,g:0,b:0,a:1},purple:{r:128,g:0,b:128,a:1},fuchsia:{r:255,g:0,b:255,a:1},lime:{r:0,g:255,b:0,a:1},olive:{r:128,g:128,b:0,a:1},yellow:{r:255,g:255,b:0,a:1},navy:{r:0,g:0,b:128,a:1},teal:{r:0,g:128,b:128,a:1},aqua:{r:0,g:255,b:255,a:1},orange:{r:255,g:165,b:0,a:1}};function d(e){var t,n,i,e=s.exec(e);if(e&&e.length)return t=parseFloat(e[1])/360,n=parseFloat(e[2])/100,i=parseFloat(e[3])/100,e=e[4]&&parseFloat(e[4]),t=t,n=n,e=e,i=2*(i=i)-(n=i<.5?i*(n+1):i+n-i*n),{r:Math.floor(255*r(i,n,t+1/3)),g:Math.floor(255*r(i,n,t)),b:Math.floor(255*r(i,n,t-1/3)),a:void 0===e?1:e};function r(e,t,n){return(n-=Math.floor(n))<1/6?e+(t-e)*n*6:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}}function u(e){var t,n,i;return!!e&&(t=e,((t=!!((t=o.exec(t))&&2<=t.length)&&((t=t[1]).length<6?{r:255*parseInt(t[0],16)/15,g:255*parseInt(t[1],16)/15,b:255*parseInt(t[2],16)/15,a:1}:{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:1}))||(n=e,(t=!(!(n=a.exec(n))||!n.length)&&(i={r:Math.round(parseFloat(n[1])*(n[2]?2.55:1)),g:Math.round(parseFloat(n[3])*(n[4]?2.55:1)),b:Math.round(parseFloat(n[5])*(n[6]?2.55:1))},n[8]?i.a=parseFloat(n[8]):i.a=1,i))||(t=d(e))||!!(t=function(e){var t;if(l.test(e)){if(e=e.toLowerCase(),t=c[e])return{r:t.r,g:t.g,b:t.b,a:t.a};if((r=r||document.createElement("a")).style.backgroundColor="",r.style.backgroundColor=e,(t=(t=window.getComputedStyle(r)).getPropertyValue("background-color")||t.getPropertyValue("backgroundColor")||r.style.backgroundColor)&&t!==e)return c[e]=u(t),c[e]}return!1}(e))))&&t)}return u}),define("player.normalizecolor",["utils.parsecolor"],function(n){"use strict";return function(e){e=n(e);function t(e){e=Math.round(e).toString(16).toUpperCase();return e=1===e.length?"0"+e:e}return!!e&&(e.a?1===e.a?"#"+t(e.r)+t(e.g)+t(e.b):"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+e.a+")":"rgba(0, 0, 0, 0)")}}),define("popcorn.profile.pop",["utils","popcorn","player.normalizeonclick","player.normalizetransition","player.normalizecolor","promise!configuration","popcorn.pop"],function(i,r,e,t,n,a){"use strict";var o={"":"textarea","#":"popText",".":"disabled",placeholder:"write pop comment here",title:"Any text you enter in the box below will show up as popup comment synchronized to the video."},s=/^(thought|speech|outline|black|white|pop)$/;function l(){var t,n=i.microTemplate(null,o);function e(e){!t||13!==e.keyCode||e.shiftKey||e.ctrlKey||(tthis.width=1xt",this.element=n.popText,this.activate=function(){n.popText.addEventListener("keyup",e,!1)},this.deactivate=function(){n.popText.removeEventListener("keyup",e,!1)},this.editor=function(e){t=e}}return{id:"pop",icon:'<span class="interactivity-icon-annotation-text"></span>',sortIndex:4,enableAltControls:!1,title:"text overlay link","data-test-name":"editor-add-text-overlay-button",editor:["popcorn.quickedit.pop"],zIndex:7,normalize:{"onClick.gotoLink":e.gotoLink,"onClick.gotoTrack":e.gotoTrack,"onClick.addClasses":e.addClasses,"onClick.setVariables":e.setVariables,onClick:e.onClick,mode:function(e){return e?!!s.test(e)&&e:""},backgroundColor:n,"background-color":n,color:n,transitionClass:t},variables:{populateConfig:function(e,t){var n={},i={},e="Pop_"+e;return t.text&&(i.text=t.text),t.onClick&&t.onClick.gotoLink&&(i.link=t.onClick.gotoLink),n[e]=i,n}},defaults:{text:"",onLoad:function(e){var t,n;e&&e.container&&i.removeClass(e.container,"hide"),e._natives?(e._natives._loaded=!0,!e.text||e.width&&/[0-9\.]+(?:px|%)/i.test(e.width)||(t=a.player.baseWidth||1200,n=i.measurePopText(e,t),e.width=n/t*100+"%",e.container.style.width=e.width)):(delete e.onLoad,deletnction(e){return[new l]},filter:function(e,t){var n,i;if(isNaN(e.start)||e._duration||!e.content&&!e.text||(i=e.content||e.text,n=0,r.forEach(i.split(/[\n\r\s\t ]+/),function(e){2<e.length&&n++}),e.pause?(-1!==e.pause&&(e.pause=Math.min(6,Math.max(2,.5*n))),e.end=.5):e.end||(e.end=e.start+Math.min(10,Math.max(3,.5*n)))),!e.text&&e.content&&(e.text=e.content),!e.text)return!1;delete e.content,delete e.maxWidth,delete e["max-width"],"outline"===e.mode&&e.fontFamily&&((i=r.extend({},t.getCustomProperty("meta"))).fontFamily=e.fontFamily,t.setCustomProperty("meta",i)),(void 0===e.left||parseFloat(e.left)<0)&&(e.left="0px"),(void 0===e.top||parseFloat(e.top)<0)&&(e.top="0px"),(t=/([\-+]?[0-9]*\.?[0-9]*)px/.exec(e.width))&&(e.width=parseFloat(t[1])/800*100+"%")},create:function(e,t,n,i){n.setting(e,"textInput",i&&i[0].element),i&&i[0].editor(n)}}}),!function(e,t){"use strict";"function"==typeof define&&define.amd?define("popcorn.captions",["popcorn","popcorn.filter","dao","utils","promise!configuration","popcorn.pop","popcorn.profile.pop"],t):t(e.Popcorn)}(this,function(o,e,s,l,c,t){"use strict";var d={},u=!1,p=["jplayer","mediaelement","videojs","wistia"];function h(){var e,t=d.video;this.off("canplay",h),(t=t||this.media.parentNode.querySelector("video"))&&((e=document.createElement("track")).setAttribute("kind","subtitles"),e.setAttribute("label","English subtitles"),e.setAttribute("srclang","en"),e.setAttribute("default","default"),e.setAttribute("src","/api/srt?url="+options.src+"&format=vtt"),t.appendChild(e))}o.dataFilter(["annotationsLoaded"],"closedcaptions","closedcaptions",function(e,r,n,a,t){var i;u||o.getTrackEvent(this,a.options.id)&&t&&a.options.src&&(u=!0,(i=d[this.id]||(d[this.id]={})).captionAnnotationId===r._id&&i.src===r.src||(i.captionAnnotationId=r._id,i.subtitlesLoaded=!1),i.src=r.src,!i.subtitlesLoaded&&r.src&&(t=navigator.userAgent||navigator.vendor||window.opera,!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))||this.media._util&&p.indexOf(this.media._util.type)<0?s.store.getJSON(null,"/api/srt/",{url:r.src},function(e){var t=0;e&&"object"==typeof e&&o.forEach(e.data,function(e){n(t,o.extend({annotationVariableConfig:r.annotationVariableConfig,mode:"black",isSubtitle:!0,onLoad:function(e){var t,n=e.container,i=n.parentNode;n.style.position="absolute",e&&e.container&&l.removeClass(e.container,"hide"),t=r.popTop||(i.offsetHeight/2-n.firstChild.offsetHeight/2)/i.offsetHeight*100+25+"%",n.style.top=e.top=t,t=r.popLeft||(i.offsetWidth/2-n.firstChild.offsetWidth/2)/i.offsetWidth*100+"%",n.style.left=e.left=t,e.width||(i=c.player.baseWidth||1200,t=l.measurePopText(e,i),e.width=t/i*100+"%",n.style.width=e.width),a.options.captionsActiveByDefault||l.addClass(e.container,"hide"),e._natives?e._natives._loaded=!0:(delete e.onLoad,delete e.onStart)}},e),"pop"),t++}),r.subtitles=a.fakeTrackEvent.subtitles=null,i.subtitlesLoaded=!0}):(i.video=this.media.parentNode.querySelector("video"),i.video?h.call(this):this.on("canplay",h)))),n(r)},!1,function(){var e=d[this.id];u=!1,this.off("canplay",h),e&&(e.subtitlesLoaded=!1,e.captionAnnotationId=t,e.src=t,e.video=t)})}),define("popcorn.skip",["utils","popcorn","logging"],function(a,e){"use strict";e.prototype.next=function(){var e,t,n=this.data.trackEvents.byStart,i=n.length,r=this.currentTime();if(this.duration()){for(t=a.binarySearchByKey(n,"start",r);t<i&&!((e=n[t]).start>r);)t++;!e||e.start<=r||e.start>=this.duration()||this.currentTime(e.start+.01)}},e.prototype.prev=function(){var n,i,r=this.data.trackEvents.byStart,e=this.currentTime();this.duration()&&((i=a.binarySearchByKey(r,"start",e))?(n=(n=r[i])._running?function(e){var t=n;for(n=r[e=0<e?e:0];-1<e&&t.start===n.start;)t=r[i--],n=r[e--];return n}(i-1):n,this.currentTime(Math.max(.01,n.start))):this.currentTime(.01))}}),define("popcorn.persist",["popcorn","cookie","utils.embed","promise!configuration","module"],function(e,t,n,i,r){"use strict";var a=r.config().trackId,o=t.get("cookieTime_"+a);Object.defineProperty(e.p,"persistTime",{configurable:!1,enumerable:!0,get:function(){return+o},set:function(e){t.set("cookieTime_"+a,e,10)}})}),define("popcorn.pause",["utils","popcorn"],function(e,t){"use strict";var n,i=0;function r(e){clearTimeout(n),i=0}t.prototr,t.prototype.annotationPause=function(e){var e=e.pause,t=(this.options.hapyakPlayer.instanceId,this);-1===e||!0===e?(r(),i=1/0,this.pause()):e<=i||(r(),i=e,n=setTimeout(function(){r(),t.play()},1e3*e),this.pause())}}),define("hapyak.player",["require","module","promise!configuration","player.wrappers","popcorn","dao","model","logging","utils","utils.accruedTime","utils.embed","utils.uuid","utils.validatelink","utils.mobile","utils.externalContentManager","touch","environment","lodash.noconflict","hapyak.player.timer","hapyak.overlay","annotation.variable.config","content.track.container","popcorn.data","popcorn.classes","popcorn.onclick","popcorn.precondition","popcorn.transitions","popcorn.captions","popcorn.compatible","popcorn.skip","popcorn.persist","popcorn.filter","popcorn.datafilter","popcorn.pause"],function(t,e,wn,En,kn,xn,Cn,_n,Tn,Xn,Sn,Jn,Zn,An,ei,ti,Pn,In,ni,ii,ri,ai){"use strict";function Ln(e){return Nn.fullScreen||Nn.webkitIsFullScreen||Nn.mozFullScreen||Nn.msFullscreenElement||e}var Dn,oi,On,Mn,a,n,o,s,r,Nn=window.document,Rn=e.config(),Vn=wn.player,jn=!1,si=!0,li=!1,ci=Rn.debug||hapyak.debug,Hn=wn.provisioning&&wn.provisioning.annotationTypes||{},qn=!(Vn&&Vn.fullScreenDisabled)&&hapyak.supports.fullscreen(),zn=navigator.userAgent.match(/iP(od|ad|hone)/),e=hapyak.auth(),Fn=!(!An.mobileCheck()&&!An.isIpad()),di="csrf="+Rn.csrfToken+(Rn.apiKey?"&key="+Rn.apiKey:"")+(e.partner.groupId?"&partner_group="+e.partner.groupId:"")+(e.partner.groupToken?"&partner_group_token="+e.partner.groupToken:"")+(e.partner.userId?"&partner_user="+e.partner.userId:"")+(e.partner.username?"&partner_username="+e.partner.username:"")+(e.partner.userToken?"&partner_user_token="+e.partner.userToken:""),Bn=Tn.addClass,Un=Tn.removeClass,Wn=Tn.instanceOfElement,$n=[{"#":"annotationContainer",".":"hapyak-annotation-container hapyak-root",">":[{"#":"contentsContainer"}]},{"#":"annotationNoscaleContainer",".":"hapyak-annotation-container hapyak-annotation-noscale-container hapyak-root"},{"#":"topLeftContainer",".":"hapyak-top-left-container hapyak-root",">":[{"#":"basic360EditContainer"},{"#":"audioNoteContainer"},{"#":"drawingEditContainer"},{"#":"ontimeEditContainer"}]},{"#":"editorContainer",".":"hapyak-editor-container hapyak-root"},{"#":"overlayContainer",".":"hapyak-overlay-container hapyak-root"}],ui=[{"#":"rootBox",".":"hapyak-root-box",">":[$n]}],pi={"#":"controlBar",".":"hapyak-control-bar hapyak-root",">":[{"":"canvas","#":"timeline",style:!1,height:6},{"#":"controls",">":[{"#":"groupStandard",".":"hapyak-group-standard group",">":[{">":{"":"span","#":"playButton",".":"hapyak-play-button ss-icon ss-standard",">":"&#x25B6;",tabindex:"0",role:"button",onkeydown:function(e){"Enter"!==e.key&&" "!==e.key||this.dispatchEvent(new Event("click"))},"data-test-name":"editor-play-button"}},{"#":"annotationSkipContainer",">":[{"":"span","#":"prevButton",".":"ss-skipback",title:"Skip back to previous annotation",tabindex:"0",onkeydown:function(e){"Enter"!==e.key&&" "!==e.key||this.dispatchEvent(new Event("click"))},role:"button","data-test-name":"editor-previous-comment-button"},{"":"span","#":"nextButton",".":"ss-skipforward",title:"Skip to next annotation",tabindex:"0",onkeydown:function(e){"Enter"!==e.key&&" "!==e.key||this.dispatchEvent(new Event("click"))},role:"button","data-test-name":"editor-next-comment-button",style:!1}]},{"#":"volumeContainer",">":[{"":"span","#":"volume",".":"hapyak-volume ss-volumehigh",tabindex:"0",onkeydown:function(e){"Enter"!==e.key&&" "!==e.key||this.dispatchEvent(new Event("click"))},role:"button","data-test-name":"editor-volume-button"},{"#":"volumeSliderContainer",".":"hapyak-volume hapyak-volume-slider-container",tabindex:"0",">":[{"":"canvas","#":"volumeSlider","data-test-name":"editor-volume-slider",tabindex:"0",onkeydown:function(e){"Enter"!==e.key&&" "!==e.key||this.dispatchEvent(new Event("click"))},role:"button",width:8,height:100}]}]}]},{"#":"groupCreate",".":"hapyak-group-create group loading",">":[{"#":"editControls",".":"hapyak-edit-controls",">":[{"#":"moreIcon",".":"hapyak-more-icon",">":['<div class="ss-icon">&hellip;</div>',{"#":"editMoreIcons",".":"hapyak-edit-more-icons dropdown-menu"}]},{"#":"modeSwitch",">":[{"#":"hideAnnotations","":"span",">":"hide"},{"#":"showAnnotations","":"span",">":"show"},{"#":"editAnnotations","":"span",">":"edit",style:"display: none;"}]}]}]},{"#":"groupInfo",".":"hapyak-group-info hapyak-group",">":[{">":[{"":"span","#":"timeCode",">":"00:00","data-test-name":"editor-time-current"},{"":"div","#":"durationContainer",">":[{"":"span",">":"&nbsp;/&nbsp;"},{"":"span","#":"duration",">":"00:00","data-test-name":"editor-time-duration"}]}],"#":"timeCodeContainer"},{"#":"fullScreen",".":"hapyak-full-screen ss-expand",tabindex:"0",onkeydown:function(e){"Enter"!==e.key&&" "!==e.key||this.dispatchEvent(new Event("click"))},role:"button","data-test-name":"editor-full-screen"}]}]}]},hi=[{"#":"playBox",".":"hapyak-play-box hapyak-root",">":[{"#":"videoContainer"},$n,{"#":"trackInfo",">":{">":[{"":"img","#":"ownerProfileImage"},{"#":"trackInfoClose",".":"ss-delete"},{"#":"trackInfoDetails",">":[{">":[{"#":"ownerName","":"span"},"'s Commentary"]},{"#":"trackTitle"},{"#":"trackDescription"},{"#":"trackRating"},{"#":"trackDetails",">":[{"#":"trackMessage"},{"":"button","#":"trackReplayButton",style:"display: none;"}]}]}]}},{"#":"trackCapContent"},{"#":"warning"}]},pi],fi=[{"#":"playBox",".":"hapyak-play-box hapyak-root",">":[{"#":"videoContainer"},$n,{"#":"warning"}]},pi],mi={start:function(n,i,e){var r,t=this;function a(){var e,t={};try{t.start=kn.util.toSeconds(n,30)}catch(e){return!1}return t.start=Math.min(t.start,r),t.start=Math.max(t.start,0),0<i.end&&(e=parseFloat(i.start)||0,i.end>i.start)?(t._duration=Math.max(i.end-e,.5),t.end=t.start+t._duration,r<t.end&&(t.end=r,t._duration=t.end-t.start),t):.5<i._duration?(t.end=t.start+t._duration,t):(t._duration=3,void(t.end=t.start+3))}if(e="function"==typeof e&&e,r=this.duration())return a();e&&this.on("durationchange",function(){r=t.duration(),e(a())})},end:function(n,i,e){var r,t=this;function a(){var e={},t=parseFloat(i.start)||0;try{e.end=kn.util.toSeconds(n,30)}catch(e){return!1}return!(e.end<t)&&(e.start=t,e.end=Math.max(t+.5,e.end),e.end=Math.min(e.end,r),e._duration=e.end-e.start,e)}if(e="function"==typeof e&&e,r=this.duration())return a();e&&this.on("durationchange",function(){r=t.duration(),e(a())})},pause:function(e,t){var n;return e||t.pause?(n=t.start||0,e?!((e=parseFloat(e))<0)&&{pause:e=isNaN(e)?2:Math.max(e,.5),start:n,end:n+.5}:{pause:!1,start:n,end:.5<t._duration?n+t._duration:n+3}):{pause:!1}}},vi={_id:1,_natives:1,_running:1,addClass:1,removeClass:1,startTimeValue:1,startTimeFormat:1,durationValue:1,durationFormat:1,hapyakPlayer:1,compose:1,effect:1,pluginData:1,id:1,toString:1,type:1,plugin:1,target:1,container:1,annotationId:1,annotationVariableConfig:1,customConfig:1,onResize:1},gi={small:240,medium:360,large:480,hd720:720,hd1080:1080,highres:1280},yi={},Yn={"audio-note":"audio",toc:"contents",pearsonLearningStudioQuizSubmit:"pearsonlssubmit"},bi=0,Gn=Vn.baseWidth||1200,wi=Vn.minHeight||200,Ei=Vn.minWidth||300,ki=null!==Vn.controlBarHeight&&0<=Vn.controlBarHeight?parseInt(Vn.controlBarHeight,10):59,xi=/^(?:([0-9]+):)?([0-9]+(?:\.[0-9]+)?)$/;function Kn(){var e=Array.prototype.slice.call(arguments,0);throw e.unshift("HapyakPlayer:"),new Error(e.join(" "))}function Ci(e){var t;return t=((e=Math.floor(e))-(e=e%60))/60,e<10&&(e="0"+e),59<t?Math.floor(t/60)+":"+(t=(t%=60)<10?"0"+t:t)+":"+e:(t=t<10?"0"+t:t)+":"+e}function _i(e,t){if(e.firstChild){if(3===e.firstChild.nodeType)return void(e.firstChild.nodeValue=t||"");e.innerHTML=""}e.appendChild(Nn.createTextNode(t||""))}function Qn(e,t,n).toUpperCase()});e["webkit"+i]=n,e["khtml"+i]=n,e["moz"+i]=n,e["ms"+i]=n,e["o"+i]=n,e[t]=n}return a=kn.p.currentTime,n=kn.p.play,kn.p.play=function(e){this.clearAnnotationPause(),n.call(this,e)},kn.p.currentTime=function(t){var n,i=1,e=this.media,r=this;if(In.isNaN(t)||!In.isNumber(t)||t<0)return a.call(this);this.clearAnnotationPause(),e&&e._util&&-1<["vidyard","wistia"].indexOf(e._util.type)||(o&&clearTimeout(o),s&&this.off("seeked",s),s=function(){clearTimeout(o);var e=r.currentTime();e<1||e-i<1||e<=t+.25?(n||jn||r.play(),r.off("seeked",s)):(o=setTimeout(function(){s()},1e3),a.call(r,t-i),i++)},o=setTimeout(function(){s()},1e3),n=this.paused(),this.pause(),this.on("seeked",s)),a.call(this,t)},kn.filter("dataId","",function(e,t,n,i){t.dataId=i.virtualEventId,n(t)}),kn.plugin.debug=ci,kn.dom.debug=ci,r=0,oi=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){var t,n,i;return t=(new Date).getTime(),n=Math.max(0,16-(t-r)),i=window.setTimeout(function(){e(t+n)},n),r=t+n,i},void 0!==Nn.hidden?(On="hidden",Mn="visibilitychange"):void 0!==Nn.webkitHidden?(On="webkitHidden",Mn="webkitvisibilitychange"):void 0!==Nn.mozHidden?(On="mozHidden",Mn="mozvisibilitychange"):void 0!==Nn.msHidden&&(On="msHidden",Mn="msvisibilitychange"),kn.forEach(Yn,function(e,t){Hn[t]?Hn[e]=!0:Hn[e]&&(Hn[t]=!0)}),function(g,y,G,e,t){this.instanceId=e,this.tracking=t,_n.debug("[hapyak.player] HapyakPlayer Created, id="+this.instanceId);var b,w,E,K,Q,X,J,Z,k,a,x,C,ee,te,o,v,ne,s,l,c,n,_,T,S,ie,re,ae,oe,se,d,p,le,f,ce,de,ue,pe,he,fe,A,P,h,me,ve,ge,ye,I=this,L=0,be=!1,D=G||{},we=-1,Ee=!0,O=!1,ke=!0,xe=0,e=D.annotationBlacklist||[],Ce=!1,_e=-1,M=!1,Te=!1,Se=D.nativeControls,N=!1,Ae=!1,Pe=!1,Ie=!1,Le=[],i=[{start:0,end:0}],r=i[0],De=0,Oe=0,R={start:0,end:0},Me={},Ne=1,Re=!1,Ve=Nn[On]||0,je=Math.max(0,parseFloat(D.minWidth))||Ei,He=Math.max(0,parseFloat(D.minHeight))||wi,qe=null!==D.controlBarHeight&&0<=D.controlBarHeight?parseInt(D.controlBarHeight,10):Sn.controlStyle()||ki,ze=(void 0===D.hideEndAnnotations?Vn:D).hideEndAnnotations,Fe=kn.extend(Vn.annotationSources||{},D.annotationSources),t=Sn.dotget(wn,"player.defaults.playerbar")||!1,Be=D.hideCtrlbarSkipfwd||t.hideSkipAnnotationBtn||!1,Ue=D.hideCtrlbarTimeline||t.hideTimeline||!1,We=(D.hideCtrlbarLogo||t.hideLogo,D.hideCtrlbarAnnotationMarkers||t.hideAnnotationMarkers||!1),$e=Fn?function(){An.initFullscreenChange(I,g)}:Ht,Ye=[],Ge=!1,Ke=!1,Qe=[],Xe=0,V=new Pn(null,{storage:Pn.localStorage,autosave:"hapyak-env",migrate:!0}),j=V,H=V,Je={},Ze=0,et={},tt=null,nt=null,it=null,rt=null,q=!1,at=!1,ot=!1,st=(void 0===D.autoResize?Vn:D).autoResize,z={},lt={},ct=[],dt={},F={},ut={},pt={},ht={},ft={},B={},mt={},vt={},gt={},U={},yt={},u=[],bt={},w!1,Ct=(new ni).setTimeDataProvider(function(){return{clock:(new Date).getTime()/1e3,playhead:fn()}}).start();if(D.controls=!!D.edit||D.controls,Dn=D.edit,e.forEach(function(e){Hn[e]&&(Hn[e]=!1)}),"[object OperaMini]"!==Object.prototype.toString.call(window.operamini))if(this.annotationPosition=function(e){var t,n,i,r,a,o,s,e=B[e.get("id")],e=E.getTrackEvent(e);return e&&Sn.dotget(e,"container.parentNode")?(r=e.container,e=e.container.parentNode,s=r.offsetHeight,a=r.offsetWidth,i=e.offsetHeight,e=e.offsetWidth,o=r.offsetTop/i*100,e={x:(r=r.offsetLeft/e*100)+(a=a/e*100),y:o},i={x:r,y:o+(s=s/i*100)},o=(t=[1/3*100,2/3*100]).indexOf(t.concat((a={x:((n={x:r,y:o}).x+(r={x:r+a,y:o+s}).x)/2,y:(n.y+r.y)/2}).x).sort()[1]),[(-1===(s=t.indexOf(t.concat(a.y).sort()[1]))?"center":["top","bottom"][s])+"-"+(-1===o?"center":["left","right"][o]),{top_left:n,top_right:e,bottom_left:i,bottom_right:r,center:a}]):[void 0,void 0]},D=D||{},I.tracking.startPlayerContext(this,D),!(g="string"==typeof g?Nn.querySelector(g):g)||"object"!=typeof g&&!Wn(g))Kn("Missing container element");else if(y)if(K=y.get("source")){if(!(Q=y.get("source_id"))){if(!G.placeholderSrc)return void Kn("Missing source_id");Q=G.placeholderSrc,J=G.placeholderSrc,X=!0}bi++,L=y.get("duration"),Ae=D.edit,V.register("render",function(i,e,r){return e.replace(Tn.regex.tt(t)||n||"";return t=r&&t?encodeURIComponent(t):t})}),V.register("templateVars",function(e,t,n){var i=n||[];return t.replace(Tn.regex.templateVarsRegex(),function(e,t){i.indexOf(t)<0&&i.push(t)}),i});try{(ve=parseInt(window.localStorage.hapyakUserId,10)||0)!==(ge=window.HapyakApp.currentUser&&window.HapyakApp.currentUser.get("id")||0)&&(kn.forEach(window.localStorage,function(e,t){Tn.startsWith.call(t,"hapyak-env")&&window.localStorage.removeItem(t)}),ge?window.localStorage.setItem("hapyakUserId",ge):ve&&window.localStorage.removeItem("hapyakUserId"))}catch(e){}Pn.localStorage.move(/^hapyak-env\/track-([0-9]+)($|\/)/,"hapyak-env/track-$1-system/track-$1"),V.load("hapyak-env",""),V.set("playerId",Jn(),!0),V.set("tracking",Rn.tracking||{},!0),V.set("context",Rn.context||{},!0),V.set("configuratSRFToken",Rn.csrfToken,!0),V.set("hapyakAPIKey",Rn.apiKey,!0),bn(hapyn),this.play=function(){E?E.play():Ge=!0},this.pause=function(){E?E.pause():Ge=!1},this.playTime=function(){return Ct.getPlay.getSlicePlayTime(e)},this.currentTime=function(t){var n=this;function i(){E.off("play",i),G.autoplay?E.currentTime(t):(E.on("pause",e),E.pause())}function e(){E.off("pause",e),E.currentTime(t)}return E?void 0===t||t>E.duration()||t<0?E.currentTime():E.currentTime(t):(t&&this.on("loadedmetadata",fuE.on("play",i).elapsedTime=function(){return E?Oe+Math.max(E.currentTime(),R.end)-R.start:0},this.mediaType=function(){return E&&E.media&&E.media.mediaType},this.duration=function(){return E?E.duration():NaN},this.paused=function(){return E?E.paused():!Ge},this.aspectRatio=function(e){return e&&0<e&&(D.aspectRatio=e),"widescreen"===D.aspectRatio?16/9:0<(e=parseFloat(D.aspectRatio))?e:b&&b.videoHeight?b.videoWidth/b.videoHeight:"widescreen"===Vn.aspectRatioOverride||"widescreen"===y.get("aspect_ratio")?16/9:0<(e=parseFloat(y.get("aspect_ratio")))?e:4/3},this.width=function(){return b.width},this.height=function(){return b.height},this.videoWidth=function(){return b.videtion(){return b.videoHeight},this.pluginData=function(){return b.pluginData},this.volume=function(e){return void 0!==e?E.volume(e):E.muted()?0:E.volume()},this.muted=function(){return E.muted()},this.mute=function(e){E.mute(e=!(!e&&void 0!==e))},this.loop=function(e){return Ie=-1<[void 0,null].indexOf(e)?Ie:e},this.seekAnnotation=function(e,i){function t(e){var t,n;e instanceof Cn.Comment&&(o=(t=e.get("properties"))&&E?(t.popcorn&&t.popcorn.start&&(n=t.popcorn.start,i&&(n-=i),E.duration()>n?E.currentTime(n):E.on("durationchange",function e(){n<E.duration()&&E.currentTime(n),E.off("durationchange",e)})),null):e)}if("object"==typeof e)return t(e);for(var n in F)F.hasOwnProperty(n)&&F[n].get("id")===e&&t(F[n])},this.fullscreen=function(e){if(!b)return Ke=void 0!==e?e:Ke;if(void 0===e)return Ln();if(e)qn&&(g.requestFullScreen?g.requestFullScreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.msRequestFullscreen?g.msRequestFullscreen():g.webkitRequestFullScreen&&(/chrome/i.test(navigator.userAgent)||!/safari/i.test(navigator.userAgent)?g.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):g.webkitRequestFullScreen())),Ht(0,!0);else{if(qn){if(Nn.cancelFullScreen)return void Nn.cancelFullScreen();if(Nn.mozCancelFullScreen)return void Nn.mozCancelFullScreen();if(Nn.webkitCancelFullScreen)return void Nn.webkitCancelFullScreen();if(Nn.msExitFullscreen)return void Nn.msExitFullscreen()}Ht()}},this.resize=jt,this.controls=function(e){if(b)return void 0!==e&&$("controlVisibilityChange",!1,e),N?(void 0!==e&&T.controlBar&&(e&&!x&&St(),x=e,T.groupCreate.style.display="play"===x||"viewer"===x?"none":"",T.controlBar.style.display=e?"":"none",jt(),Ut()),x):(void 0!==e&&(b.controls=e),b.controls);x=e&&"play"!==x?"edit":e},this.showCapContent=function(e,t){T&&T.trackCapContent&&(Wn((e)?(T.trackCapContent.innerHTML="",T.trackCapContent.appendChild(e)):e&&(T.trackCapContent.innerHTML=e),Bn(T.trackCapContent,"visible"),t&&setTimeout(function(){Un(T.trackCapContent,"visible")},t))},this.loadTrack=function(t,n){function e(e){t&&A===t&&(s=e,c=n,b&&mn())}A===t?n&&n.callback&&n.callback():(zt(),Sn.dotget(wn,"provisioning.pauseOnWindowBlur")&&Nn.addEventListener(Mn,function(){li=!li,Mt.apply(this)}.bind(this),!1),t?(_n.info("player: loading track #"+t.get("id")),A=t,(j=V.scope("track-"+t.get("id")+"-system")).set("environment",hapyak.environment,!0),j.set("playerType",D.playerType,!0),j.set("playlistId",D.playlistId,!0),j.set("projectId",D.projectId,!0),D.workflow&&j.set("workflow",D.workflow,!0),j.set("projectName",D.projectName,!0),j.set("trackId",t.get("id"),!0),j.set("trackEditPermission",A.hasPermission("edit"),!0),j.set("annotationsLoaded",!1,!0),V.load("hapyak-env","track-"+t.get("id")+"-system/track-"+t.get("id")),(H=j.scope("track-"+t.get("id"))).observe(yn),yn(),hn(),E&&(E.options.sharing.url=pn()),n&&n.comments?(_n.info("loading comments from passed in options"),e(n.comments)):(_n.info("querying server for comments for track "+t.get("id")),Cn.Comment.find({track:t.get("id"),limit:500}).onLoad(e))):(hn(),A&&$("changeTrack",!1,t)))},this.createTrack=function(e,t){return window.HapyakApp.currentUser?(Ft("createTrack"),e=((e=e)&&"object"==typeof e||{}).title||"",zt(),e=Cn.Track.createRecord({owner:window.HapyakApp.currentUser,video:y,title:e,created:new Date,modified:new Date,privacy:"public"}),xn.store.commit(),$("createTrack",!1,A=e),Bt("createTrack"),I.editMode(!0),"function"==typeof t&&t.call(I,e),e):($("createError",!1,"no-user"),Kn("Do not have permission to create new track"),!1)},this.editTrack=function(e,t){var n=this,i=!1;return window.HapyakApp.currentUser?A?("string"==typeof e.title&&(A.set("title",e.title),i=!0),"string"==typeof e.description&&(A.set("description",e.description),i=!0),i&&(A.onSave(function(){$("editTrack",!1,A),"function"==typeof t&&t.call(n,A)}),xn.store.commit()),A):($("createError",!1,"no-active-track"),Kn("There is no active track to edit"),!1):($("createError",!1,"no-user"),Kn("Do not have permission to edit track"),!1)},this.copyTrack=function(e){var t,n=this;return window.HapyakApp.currentUser?A?((t=Cn.Track.createRecord({copied_from:A.get("id")})).onSave(function(){$("createTrack",!1,t),n.loadTrack(t),Bt("copyTrack"),n.editMode(!0),"function"==typeof e&&e.call(n,t)}),xn.store.commit(),Ft("copyTrack"),t):($("createError",!1,"no-active-track"),Kn("There is no active track to copy from"),!1):($("createError",!1,"no-user"),Kn("Do not have permission to create new track"),!1)},this.deleteTrack=function(e){var t,n=this;return window.HapyakApp.currentUser?A?(t=A.get("id"),Ft("deleteTrack"),A.onDelete(function(){$("deleteTrack",!1,t),zt(),Bt("deleteTrack"),n.editMode(!1),"function"==typeof e&&e.call(n,t)}),A.deleteRecord(),xn.store.commit(),t):($("createError",!1,"no-active-track"),Kn("There is no active track to dser"),Kn("Do not have permission to delete track"),!1)},this.annotations=function(){var t=[];return kn.forEach(F,function(e){t.push(e)}),t.sort(function(e,t){function n(e,t){return isNaN(e)?t:e}var i,r,a=e.get("properties.popcorn")||e.get("properties");return(a=n(a&&n(a.start,a.start_time),e.get("start_time")))===(i=n((i=t.get("properties.popcorn")||t.get("properties"))&&n(i.start,i.start_time),t.get("start_time")))?n((r=e.get("properties.popcorn")||e.get("properties"))&&n(r.end,r.end_time),e.get("end_time"))-n((r=t.get("properties.popcorn")||t.get("properties"))&&n(r.end,r.end_time),t.get("end_time")):a-i}),t},this.annotations.get=function(e){var t,n,i,r=z[e],a=B[e];return r&&a?(t=r.get("custom_configuration"),i=(n=kn.extend({},r.getCustomProperty("popcorn")||r.get("properties")))&&n.start,"percent"===r.get("start_time_format")&&(i=(r.get("start_time")||0)/100*E.duration()),e={annotationId:e,trackId:r.get("track.id"),properties:n,type:r.get("type"),created:r.get("created").valueOf(),modified:r.get("modified").valueOf(),writable:!ut[a],startTime:i},("type")||(n=I.annotations.get(t))&&i.push(n));return i.sort(function(e,t){return e.properties.start===t.properties.start?e.properties.end-t.properties.end:e.properties.start-t.properties.start}),i},this.annotations.create=function(e,t,n){if(Hn[e])return delete t.dataId,delete t.id,delete t._id,delete t.annotationId,t.end&&(t._duration=t.end-t.start),tn(e,function(){Yt(U[e],t,function(e,t){"function"==typeof n&&n(I.annotations.get(t.get("id")))})}),t;throw new Error("annotations.create: Unsupported plugin type "+e)},this.annotations.update=function(e,t,n){var i,r,a=B[e];if(!e)throw new Error("annotations.update: Annotation ID required");if(!a)throw new Error("annotations.update: Annotation '"+e+"' not found");if(!ut[a])return t?(r=z[e],i=E.getTrackEvent(a),delete t.dataId,delete t.id,deleartTimeValue&&t.start&&(t.startTimeValue=t.start),!t.durationValue&&t._duration&&(t.durationValue=t._duration),kn.extend(i,t),"function"==typeof n&&setTimeout(function(){n(I.annotations.get(e))},100),E[r.get("type")](a,i),r=I.annotations.get(e)):(r=I.annotations.get(e),"function"==typeof n&&n(r)),r;throw new Error("annotations.update: Unable to modify annotation "+e)},this.annotations.remove=function(e,t){var n=B[e],i=z[e];if(!e)throw new Error("annotations.remove: Annotation ID required");if(!n||!i)throw new Error("annotations.remove: Annotation '"+e+"' not found");if(!ut[n])return"function"==typeof t&&i.onDelete(function(){t(e)}),E.removeTrackEvent(n),e;throw new Error("annotations.remove: Unable to remove annotation "+e)},this.annotations.types=function(r){var a={},o=Object.keys(U).length;r&&kn.forEach(U,function(e,i){Hn[i]?tn(i,function(){var e,t=U[i],n={id:i,icon:t.icon||"",title:t.title||i,enabled:!!Hn[i],defaults:{}};if(t.defaults)for(e in t.defaults)!t.defaults.hasOwnProperty(e)||"function"==typeof t.defaults[e]||t.defaults[e]instanceof Element||(n.defaults[e]=t.defaults[e],n.defaults[e]===1/0?n.defaults[e]=Number.MAX_VALUE:n.defaults[e]===-1/0&&(n.defaults[e]=-Number.MAX_VALUE));a[i]=n,--o||r(a)}):o--})},this.annotations.normalize=function(e,t,n,i,r){var a,o,s,l=z[e];return e&&"function"==typeof r&&(l?(l=B[e],l=E.getTrackEvent(l),a=(o=U[l._natives.type])&&kn.extend({},l,i)):Hn[e]&&(o=U[e],a=i),o?(o.normalize[t]||o.normalizeAny)&&(o.normalize[t]?null!=(s=o.normalize[t].call(I,n,a,r))&&r(s):null!=(s=o.normalizeAny.call(I,t,n,a,r))&&r(s)):r(!1)),null},this.annotations.focus=function(e,t){var n,i=B[e];if(e){if(!i)throw new Error("annotations.focus: Annotation '"+e+"' not found");if(!!ut[i])throw new Error("annotations.focus: Unable to edit annotation "+e);if(!I.editMode(!0))throw new Error("annotations.focus: Do not have permission to edit");if(!(n=(n=E.getTrackEvent(i))&&n._natives&&n._natives.type)||!Hn[n])throw new Error("annotations.focus: Unable to edit annotation "+e);an(function(){P.edit(i),"function"=s.blur=function(e){e=B[e];P&&P.done(e||null)},this.showTrackInfo=function(){dn()&&(Bn(T.trackInfo,"visible"),ee&&clearTimeout(ee),ee=setTimeout(function(){T.trackInfo&&Un(T.trackInfo,"visible")},2e3))},this.editMode=function(e){return void 0!==e&&(!(e=!!e)||A&&window.HapyakApp&&A.hasPermission("edit")||(e=!1),N!==e&&(N=e,Ae=Ae&&e,this.resetVariables(),V.set("editMode",N,!0),N?(a?W():this.showAnnotations(!0),an(function(){P.activate(),Bn(T.annotationContainer,"hapyak-editing"),Bn(T.annotationNoscaleContainer,"hapyak-editing")})):P&&(P.done(),P.deactivate(),Un(T.annotationContainer,"hapyak-editing"),Un(T.annotationNoscaleContainer,"hapyak-editing"),W()),T.watermark&&(T.watermark.style.display=N?"none":"block"),on())),N},this.showAnnotations=function(t,s,e){var l,n;return e?(e=B[e],n="hapyak-annotation-list-hide",Nn.querySelectorAll('[data-popcorn-id="'+e+'"]').forEach(function(e){(t?Un:Bn)(e,n)}),a):void 0===t?a:a!==(t=!!t)?((a=t)||"ontime"===s||I.editMode(!1),l=t?"enable":"disable",kn.forEach(kn.registryByName,function(e,t){if(!s||s===t){var n,i,r=0,a=E.currentTime(),o=E.data.running[t];if("disable"==l&&E.emit("clearactivepauses"),W(s),o)for(n=o.length;r<n;r++)(a>=(i=o[r]).start&&a<=i.end&&"enable"==l?Bn:Un)(i.container,"active")}}),on(),a):void 0},this.updateTrackEvent("id")];i&&(n=E.getTrackEvent(i),t=e.getCustomProperty("popcorn"),kn.extend(n,t),E[e.get("type")](i,n))},this.videoViewed=function(){var t=0;return L?(kn.fod-e.start}),t/L):0},this.videoViewedFromStart=function(){var e;return L&&i.length?((e=i[0]).end-e.start)/L:0},this.resetVariables=function(){A&&H&&(kn.forEach(H.keys(),function(e){H.clear(e,!0)}),H.save("hapyak-env"),kn.forEach(F,function(e,t){for(var n=_t(t),i=n.keys(),r=0;r<i.length;r++)n.clear(i[r],!0);n.save("hapyak-env")}))},this.getData=function(e){var t,n,i,r;if(e)return H.get(e);for(t={},n=0,i=H.keys.couclone(H.get(r));return t},this.setData=function(e,t){e&&"object"==typeof e&&(t=e,e=null),e?void 0===t?V.clear(e,!0):V.set(e,t,!0):t&&"object"==typeof t&&kn.forEach(t,function(e,t){V.set(t,e,!0)})},this.lockEditor=Ft,this.unlockEditor=Bt,this.addClass=function(e){g&&"string"==typeof e&&e.length&&Bn(g,0===e.indexOf("hapyak-")?e:"hapyak-"+e)},this.removeClass=function(e){g&&"string"==typeof e&&e.length&&Un(g,0===e.indexOf("hapyak-")?e:"hapyak-"+e)},this.on=function(e,t){var n;"string"==typeof e&&"function"==typeof t&&(n=(n=lt[e])||(lt[e]=[])).indexOf(t)<0&&n.push(t)},this.off=function(typeof e&&"function"==typeof t&&(e=lt[e])&&0<=(t=e.indexOf(t))&&e.splice(t,1)},this.setRemotes=function(e){Et=e,P&&P.setting("remote","remotes",Et||[])},this.destroy=function(e,t){function n(){}function i(){for(var e,t,n=["controlBar","playBox","annotationContainer","annotationNoscaleContainer","topLeftContainer","editorContainer","overlayContainer","watermark","rootBox"];n.length;)e=n.shift(),(t=T[e])&&t.parentNode&&t.parentNode.removeChild(t);for(e in T)T.hasOwnProperty(e)&&delete T[e]}for(var r in M=!0,Ct.stop(),Ct=null,I.tracking.endPlayerContext(),hapyak.removeEventListener("auth",bn),ct.splice(0),(-1<["play","viewer"].indexOf(x)||P)&&I.fullscreen(!1),P&&(e&&P.done(),P.destroy()),clearTimeout(ce),ue&&clearInterval(ue),window.removeEventListener("resize",jt,!1),window.removeEventListener("orientationchange",Nt,!1),window.removeEventListener("message",Vt,!1),window.removeEventListener("orientationchange",jt,!1),window.removeEventListener("message",Rt,!1),Nn.removeEventListener(Mn,Ot,!1),Nn.removeEventListener(Mn,Mt,!1),qn&&(Nn.removeEventListener("fullscreenchange",$e,!1),Nn.removeEventListener("mozfullscreenchange",$e,!1),Nn.removeEventListener("webkitfullscreenchange",$e,!1),Nn.removeEventListener("MSFullscreenChange",$e,!1)),zt(),g.style&&(Un(g,"hapyak-player"),Un(g,"hapyak-embed"),Un(g,"hapyak-remote"),Un(g,"hapyak-"+(D.edit?"edit":"view")+"-mode")),this)this.hasOwnProperty(r)&&"function"==typeof this[r]&&(this[r]=n);if(bi=Math.max(0,bi-1),E&&(Sn.dotget(E,"media._util.destroy")&&E.media._util.destroy(),E.destroy()),ae&&ae.remove(),re&&re.remove(),T&&(T.videoContainer||T.rootBox)){e=function(){T.videoContainer&&T.videoContainer.firstChild&&"IFRAME"===T.videoContainer.firstChild.tagName?(T.videoContainer.firstChild.src="",setTimeout(function(){T.videoContainer.innerHTML="",i(),t&&t()},10)):(b&&(b._util&&b._util.destroy?b._util.destroy():(b.srner.innerHTML=""),i(),t&&t())};if(ci)e();else try{e()}catch(e){_n.error(e),_n.captureException(e)}}else T&&i(),t&&t()},this.outerContainer=function(){if(E&&E.media)return E.media.outerContainer},this.dispatchSkeletonEvent=function(e,t){Sn.dotget(E,"media._util.events."+e)&&E.media._util.events[e](t)},this.contentTracks=(ye=new ai,I.tracking.register({loc:{lang:"en-us"}}),window.addEventListener("message",function(e){var t,n;(e=e&&e.data&&function(e){try{JSON.parse(e)}catch(e){return}return 1}(e.data)?e&&e.data&&JSON.parse(e.data)||{}:e)&&e.data&&"content-track"===e.event&&(e=e.data,t=E&&Sn.dotget(E,"options.hapyakPlayer.contentTracks"),n={load:t&&"function"==typeof tn"==typeof t.add&&t.add},"load"===e.action&&e.lang?n.load&&n.load(e.lang):"add"===e.action&&e.src&&irequire([e.src],function(){Array.prototype.forEach.call(arguments,function(e){n.add&&n.add(e)})}))},!1),{add:function(e){var t;"string"==typeof e?irequire([e],function(){Array.prototype.forEach.call(arguments,function(e){(t=ye.add(e))&&t.default&&t.data&&_.load(t.data)})}):"object"==typeof e&&(t=ye.add(e)),t&&t.default&&t.data&&_.load(t.data)},load:function(t){ye.tracks.some(function(e){if(t===e.srclang)return I.tracking.register({loc:{lang:t}}),I.tracking.playerAction("Language","Change"),_.languageManager.changeLanguage(t),_.load(e.data),!0})},tracks:function(){return ye.tracks},annotationVariableConfig:function(){return _}}),Nn.addEven(k=En.detect(g,D.playerType||K)||D.playerType||K)&&k.toLowerCase())||En[k]||"html5"===k?gn():irequire(["player.profile."+k],gn,function(e){_n.captureException(e),Kn("Unable to load player: "+k)})}else Kn("Missing source");else Kn("Missing video");function _t(e){return e?Je[e]||H.scope("tmp-event-"+e):H}function W(t){L&&0<Ye.length&&(kn.forEach(Ye,function(e){nn(e)}),Ye=[]),!a||wn.provisioning.waitForCanplay&&E.readyState()<3||Pe&&ze&&!N||Te?kn.forEach(kn.registry,function(e){t!==e.name&&t||E.disable(e.name)}):kn.forEach(kn.registry,function(e){t!==e.name&&t||E.enable(e.name)})}function Tt(){var e,t;T.volumeSlider&&(e=T.volumeSlider.width,t=T.volumeSlider.height,ie.strokeStyle="#bbb",ie.lineWidth=t,ie.clearRect(0,0,e,t),C&&!E.muted()&&(ie.beginPath(),ie.moveTo(e/2,100),ie.lineTo(e/2,(1-C)*t),ie.stroke()))}function St(){var t,n,e,i,r,a,o,s;function l(e){e=e/L*t;S.beginPath(),S.moveTo(0,n/2),S.lineTo(e,n/2),S.stroke()}if(!M&&x){if(e=E.currentTime(),we!==e&&L){if(we=e,t=T.timeline.width,n=T.timeline.height,S.clearRect(0,0,t,n),S.lineWidth=n,S.strokeStyle="rgba(255, 255, 255, 0.3)",i=E.buffered())for(r=0,a=i.length;r<a;r++)o=i.start(r),s=i.end(r),(o=L<o||o<0?0:o)<s&&l(s);else l(L);e&&(S.strokeStyle="rgba(9, 45, 189, 1)",l(e)),T.timeCode.firstChild.nodeValue=Ci(e),T.duration.firstChild.nodeValue=Ci(L)}oi(St)}}function At(e,t){var n,i,r=T.timeline;for(Ee=Ee&&E.paused(),n=t-r.clientLeft-r.offsetLeft,i=r.offsetParent;i&&"BODY"!==i.nodeName;)n-=i.clientLeft+i.offsetLeft,i=i.offsetParent;return 0<=(t=n/T.timeline.offsetWidth)&&t<=1&&(t*=L,L&&E.currentTime(t)),E.pause(),!0}function Pt(e,t,n){for(var i=T.volumeSlider,r=n-i.clientTop-i.offsetTop,a=i.offsetParent;a&&"BODY"!==a.nodeName;)r-=a.clientTop+a.offsetTop,a=a.offsetParent;r/i.offsetHeight),1),E.volume(1 $(t,e){var n=Array.prototype.slice.call(arguments,2);function i(){var e=lt[t];e&&kn.forEach(e,function(e){e.apply(this,n)})}t&&(e?(ct.length||setTimeout(function(){for(;ct.length;)ct.shift()()},0),ct.push(i)):i())}function It(e){var e=T[e]&&window.getComputedStyle(T[e]),t=0;return t=e?(t=(t=(t+=Math.round(parseFloat(e.getPropertyValue("padding-left"))||0))+Math.round(parseFloat(e.getPropertyValue("padding-right"))||0))+Math.round(parseFloat(e.getPropertyValue("border-left-width"))||0))+Math.round(parseFloat(e.getPropertyValue("border-right-width"))||0):t}function Lt(e){var e=T[e]&&window.getComputedStyle(T[e]),t=0;return t=e?Math.round(parseFloat(e.getPropertyValue("width"))||0):t}function Dt(){var t,e,n,i,r,a,o=0,s=u.length-1,l=!1;function c(){var e=hapyak.browser;return e&&-1<["MSIE","Trident"].indexOf(e.name)}function d(e){!t&&e.width+a<=i?(t=e).element.style.display="":e.element.style.display="none"}if(x&&T.controlBar)if(T.controls.style.display="",T.timeline.width=T.timeline.offsetWidth,i=Lt("controlBar"),a=It("controls")+It("groupCreate")+It("editControls")+Lt("groupStandard")+Lt("groupInfo")+10,c()&&(a+=It("groupStandard")+It("groupInfo")),-1<["play","viewer"].indexOf(x))T.groupCreate.style.display="none";else if(T.groupCreate.style.display="",T.moreIcon.style.display="",a+=Lt("modeSwitch")+Lt("moreIcon"),i<a)T.groupCreate.style.display="none";else{for(;o<=s;){if(n=u[o],e=T[n.id]){if(t=null,m[n.alt]&&kn.forEach(m[n.alt],d),t?(e.style.display="none",e=t.element):e.style.display="",T.editControls.insertBefore(e,T.moreIcon),r=t?t.width:Lt(n.id),c()&&(r+=It(n.id)),!(a+r<=i))break;a+=r}o++}if(o<s)for(s++;o<s;)n=u[o],(e=T[n.id])&&(T.editMoreIcons.appendChild(e),l=!0),o++;else o<u.length&&(n=u[o],(e=T[n.id])&&T.editControls.insertBefore(e,T.moreIcon));l||(T.moreIcon.style.display="none")}}function Ot(){var e,t;if(Nn[On])Ve=Ve||Date.now();else{if(Ve)for(t in e=Date.now()-Ve,ht)ht.hasOwnProperty(t)&&ht[t]&&(ht[t]+=e);Ve=0}}function Mt(){li?(si=this.paused(),this.pause()):si||this.play()}function Nt(e){(Fn||q)&&(Fn&&zn?An.resize(I,g):Ht(0,!0))}function Rt(e){if(e&&e.data)try{if("hapyak"!==JSON.parse(e.data).context)return}catch(e){}Fn&&zn&&$(q?"addstyles":"removestyles",!1)}function Vt(e){var t;try{t=JSON.parse(e.data)}catch(e){return}"hapyak-tracking"===t.context&&$("customtrackingevent",!1,t)}function jt(e,t,n){function i(){var e,n,i,t,r,a,o,s=D.maxWidth||1/0,l=D.maxHeight||1/0,c=T.annotationContainer,d=T.annotationNoscaleContainer,u=ei.getCumulativeOffsets(d),p=!be,h=0;b&&(r="play"===x&&b.pluginData?b.pluginData.height:0,a=+I.aspectRatio(),o=+((b.videoWidth||0)/(b.videoHeight||0)||0),(p&&!(hapyak&&hapyak.iframed&&Ln())||(se=b.offsetHeight||b.height||b.videoHeight,oe=b.offsetWidth||b.width||b.videoWidth,Ln()||D.embed||se&&oe))&&(hapyak&&hapyak.iframed&&!Ln()&&hapyak.videoExperienceViewer&&!D.embed&&(se=b.videoHeight,oe=b.videoWidth),0<se?(n=se,e=0<oe?oe:g.offsetWidth||n*a):(e=0<oe?oe:g.offsetWidth||640,n=e/a),e=Math.round(e),n=Math.round(n),Ln()||D.embed?(s=window.innerWidth-(u.left+u.right),l=window.innerHeight-(u.top+u.bottom),l=x?l-qe:l):(s=Math.min(s,e),l=Math.min(l-(x?qe:0),n),p&&(g.style.width=Math.round(s)+"px")),n/l<e/s?(n=Math.round(s*n/e),e=s):(e=Math.round(l*e/n),n=l),e===pe&&n+r===he&&fe===o?(E.emit("showAnnotationContainer"),at=!0):(pe=e,he=n,fe=o,x&&"viewer"!==x&&q&&n/l<e/s?(u=window.innerHeight-(n+(x?qe:0)),f.style.padding=u/2+"px 0"):x&&"viewer"!==x&&q&&(f.style.padding=0),(p||G.forceUpdateDimensionsOnResize)&&(b.width=e,b.height=n),T.playBox&&(T.playBox.style.width=e+"px",T.playBox.style.height=n+r+"px"),Z&&zn&&!Ln(q)&&"viewer"===D.controls&&(g.style.width=e+"px",g.style.height=n+r+"px"),zn&&!Ln(q)&&1===fe&&n<e/o&&(fe=o=+(e/n||0)),Ne=e/Gn,c.style.width=Gn+"px",o&&D.keepAnnotationAspectRatio?(a=e/n)<o?(t=(n-(l=e/o))/2,c.style.margin=t+"px 0",nt=c.style.margin,c.style.height=Gn*l/e+"px",d.style.margin=t+"px 0",d.style.height=l+"px"):o<a?(Ne=(s=o*n)/Gn,c.style.margin="0 "+(t=(e-s)/2)+"px",nt=c.style.margin,c.style.height=Gn*n/s+"px",d.style.margin="0 "+t+"px",d.style.height=n+"px"):(c.style.height=Gn*n/e+"px",c.style.margin="0 auto",nt=c.style.margin,d.style.height=n+"px",d.style.margin="0 auto"):(c.style.height=Gn*n/e+"px",d.style.width=e+"px",d.style.height=n+"px"),Sn.dotget(b,"_utils.resize")&&b._utils.resize(T,Ne,D),Qn(T.annotationContainer,"transform","scale("+Ne+")"),kn.forEach(T.annotationContainer.querySelectorAll(".popcorn-quickedit-edit"),function(e){Qn(e,"transform","scale("+1/Ne+")")}),"youtube"===y.get("source")&&(i=gi[v]||0,v&&i===n||kn.forEach(gi,function(e,t){e<=n&&h<e&&i<e&&(h=e,v=t)})),Dt(),e<je||n<He?(Te=!0,Re||(_n.log("Player size ("+e+" x "+n+") is too small to show annotations. Minimum size is "+je+" x "+He),Re=!0)):(Te=!1,Re&&(_n.log("Player is big enough. Resuming annotations."),Re=!1)),W(),P&&P.resize(),E.emit("resized"),$("resized",!0,{width:I.width(),height:I.height(),videoWidth:I.videoWidth(),videoHeight:I.videoHeight()}),de=Date.now(),clearTimeout(ce))))}"limelightv2"===k&&Ln()&&!ot||(e&&"object"!=typeof e&&(e=parseFloat(e),oe=0<e&&e,t=parseFloat(t),se=0<t&&t),n||!de||100<Date.now()-de?i():(clearTimeout(ce),ce=setTimeout(i,100)))}function Ht(e,t){var n,i,r,a=I.aspectRatio().toFixed(2),o=Nn.querySelector(".hapyak-play-box");function s(){return(n.width/(x?n.height-qe:n.height)).toFixed(2)}f=f||Nn.fullscreenElement||Nn.webkitFullscreenElement||Nn.mozFullScreenElement||Nn.msFullscreenElement||g,t||Ln()?(t=hapyak.browser,r=window.screen,n={width:t=zn||"MSIE"===t.name&&t.version<=10?(i=window.innerHeight,window.innerWidth):(i=r.height,r.width),height:i},p=o&&!d?(d=o.offsetWidth||"",o.offsetHeight||""):(d=f.style.width||"",f.style.height||""),null===nt&&(nt=T.annotationContainer.style.margin||""),null===it&&(it=f.style.position||""),null===rt&&(rt=f.style.padding||""),null===tt&&(tt=f.style.backgroundColor||""),q||(q=!0,Bn(g,"fullscreen"),Bn(Nn.body,"hapyak-fullscreen"),T.fullScreen&&(Bn(T.fullScreen,"ss-contract"),Un(T.fullScreen,"ss-expand")),f.style.width="100%",f.style.height="100%",f.style.backgroundColor="black",zn&&Z&&(f.style.position="fixed")),x&&"viewer"!==x||s()===a||le||(r=Math.abs(((n.height-(x?qe:0))*a-n.width)/2),t=Math.abs((n.height-n.width/a)/2),+s()<+a?r=0:t=0,"viewer"===x&&E&&E.media&&(E.media.width=n.width-2*r,E.media.height=n.height-(x?qe:0)-2*t),T.annotationContainer.style.margin=T.annotationNoscaleContainer.style.margin=t+"px "+r+"px",Sn.dotget(E,"media._util.fullscreenChange")&&E.media._util.fullscreenChange(T.annotationContainer.style.margin)),ot=!0):q&&(Un(g,"fullscreen"),Un(Nn.body,"hapyak-fullscreen"),T.fullScreen&&(Un(T.fullScreen,"ss-contract"),Bn(T.fullScreen,"ss-expand")),null!==nt&&(T.annotationContainer.style.margin=T.annotationNoscaleContainer.style.margin=nt,nt=null),null!==rt&&(f.style.padding=rt,rt=null),null!==it&&(f.style.position=it,it=null),null!==tt&&(f.style.backgroundColor=tt,tt=null),Sn.dotget(E,"media._util.fullscreenChange")&&E.media._util.fullscreenChange(T.annotationContainer.style.margin),null!==d&&(f.style.width=d,f.style.height=p,"viewer"===x&&E&&E.media&&(E.media.width=f.offsetWidth,E.media.height=f.offsetHeight-(x?qe:0)),d=p=null),f=null,ot=q=!1),jt()}function qt(){kn.forEach(F,function(e,t){d(wt[t]),delete wt[t]),delete F[t],E.removeTrackEvent(t)})}function zt(){A&&(c=l=s=null,_n.debug("player: unloading track #"+A.get("id")),P&&P.done(),kn.forEach(vt,function(e,t){vt[t].splice(0)}),qt(),A=null,xe=0,T&&!M&&(T.editAnnotations&&(T.editAnnotations.style.display="none",Dt()),dn()),H.unobserve(yn),H=j=V)}function Ft(e){dt[e||""]=!0,!O&&T&&T.controlBar&&(u.forEach(function(e){e=T[e.id];e&&(Bn(e,"disabled"),e.disabled=!0)}),Bn(T.moreIcon,"disabled"),Bn(T.modeSwitch,"disabled"),O=!0)}function Bt(e){if(delete dt[e||""],O&&T&&T.controlBar){for(var t in dt)if(dt.hasOwnProperty(t)&&dt[t])return;u.forEach(function(e){e=T[e.id];e&&(Un(e,"disabled"),e.disabled=!1)}),Un(T.moreIcon,"disabled"),Un(T.modeSwitch,"disabled"),O=!1}}function Ut(e){if((Dn||!Ue&&!We)&&(L&&T.controlBar))if(e)n(e);else for(var t in F)F.hasOwnProperty(t)&&n(t);function n(e){var t=wt[e],n=E.getTrackEvent(e);t||((t=Nn.createElement("div")).className="hapyak-marker marker-"+Sn.dotget(n,"_natives.type"),wt[e]=t,T.controlBar.appendChild(t)),t.style.left=100*n.start/L+"%"}}function Wt(e){var t,n=0,i=e.plugin||e.id,r=ft[i],a=e.maxAllowed;if(a&&r)for(t in r)if(r.hasOwnProperty(t)&&a<=++n)return 1}function $t(e,t){N&&t&&(t=Nn.querySelector(".hapyak-new-"+t),(e?Un:Bn)(t,"disabled"))}function Yt(r,e,a){var o,t,n;if(!O)if(E.pause(),I.editMode(!0))if(o=r.plugin||r.id,Wt(r))$t(!1,o);else if("function"==typeof e&&(a=e,e=null),yt[r.id]){if(n={},r.defaults)for(t in r.defaults)r.defaults.hasOwnProperty(t)&&("function"!=typeof r.defaults[t]||Tn.startsWith.call(t,"on")?n[t]=r.defaults[t]:n[t]=r.defaults[t].call(null,y,E,n,T));kn.extend(n,e);var i,s,l="function"==typeof a?(s=function(e,t,n,i){r.create&&r.create(e,t,n,i),Wt(r)&&$t(!1,o),a(e,t)},!0):(s=function(e,t,n,i){r.create&&r.create(e,t,n,i),Wt(r)&&$t(!1,o)},r.commit),c=o,d=n,u=s,p=l,h=r.id;function f(e){var t;e&&(P.edit(e),t=F[e],"function"==typeof u?p?(t.onSave(function(){Xt(e,t),u(e,t,P,m[h])}),xn.store.commit()):u(e,null,P,m[h]):p&&xn.store.commit())}A&&window.HapyakApp&&A.hasPermission("add_annotations")?(d=d||{},isNaN(d.start)&&(s=fn(),(!(l=d._duration)||l<0)&&(l="ontime"===c?.5:Vn.duration||3,void 0===d._duration&&(d._duration=l)),d.start=s,d.end=s+l),d.end=Math.min(d.end,E.duration()),an(function(){var e=U[c];Sn.dotget(e,"variables.populateConfig")&&_.register(c,U[VariableConfig=_,i=P.create(c,d,f),_n.log("Created editor, id is",i,d),f(i)})):$("requestCreateTrack")}else Le.push([r,e,a]);else $("requestCreateTrack")}function Gt(e,t){return e.index-t.index}function Kt(){var n;function t(e){E.off("resized",t),E.off("showAnnotationContainer",t),Bn(T.annotationContainer,"active"),Bn(T.annotationNoscaleContainer,"active")}j.seesized",t),E.on("showAnnotationContainer",t)),ke=!0,E.emit("annotationsloaded"),$("annotationsloaded"),n=In.map(D.contentTracks||{},function(e,t){return e.replace(/\\/g,"").replace("u002D","-")}),irequire(n,function(){Array.prototype.forEach.call(arguments,function(e,t){I.contentTracks.add(In.merge(e,{src:n[t]}))})}),Ut(),$("changeTrack",!1,A)}function Qt(e){return e.hasPermission("edit")&&e.get("track.id")===A.get("id")}function Xt(e,i){var t,n=i.id||i.get("id"),r=["created","duration","duration_format","id","isDeleted","isLoaded","isSaved","modified","properties","ratings_avg","start_time","start_time_format","track","type"],a={track:"track.id"};if(Je[e]){if(z[n]&&B[n])return;t=Je[e]}else t=H.scope("tmp-event-"+e,null,!0);t?t.rename("event-"+n):(V.load("hapyak-env",j.name()+"/"+H.name()+"/event-"+n),t=H.scope("event-"+n)),j.set("annotationIds."+n,!0,!0),Je[e]=t,z[n]=i,B[n]=e,j.set("projectAnnotations."+n,r.reduce(function(e,t){var n=a[t];return e[t]=i&&i.get("data."+[n||t]),e},{}),!0)}function Jt(e,t){var n=e.get(t),i=e.get("properties.popcorn._duration"),e=e.get(t+"_format");return"duration"===t&&-1===i?i:"percent"===e?n&&L?(t=L*(Math.abs(n)/100),n<0?L-t:t):0:n<0?L?L+n:0:n}function Zt(e,t){var n,i,r=t.get("type"),a=e.plugin||r;if(E.on("durationchange",function(){n&&("percent"===n.durationFormat&&100===n.durationValue?n.end=E.duration():n.end=Math.min(n.end,E.duration()))}),!L){if("percent"===t.get("start_time_format")||t.get("start_time")<0)return void Ye.push(t);if("percent"===t.get("duration_format"))return void Ye.push(t)}if(r=Yn[r]||r,kn.registryByName[a]||kn.filterRoutes[a])if((n=kn.extend({},t.getCustomProperty("popcorn")||t.get("properties")||{})).start=Jt(t,"start_time"),Math.abs(n.start-L)<.5&&(n.start=Math.max(L-.5,0)),n.environment=hapyak.environment,Sn.dotget(e,"variables.populateConfig")&&_.register(r,e.variables.populateConfig),n.annotationVariableConfig=_,n.startTimeValue=t.get("start_time"),n.startTimeFormat=t.get("start_time_format"),n.customConfig=t.get("custom_configuration"),n._duration=Jt(t,"duration"),n.durationValue=t.get("duration"),n.durationFormat=t.get("duration_format"),e.filter&&!1===e.filter(n,t))_n.log("Empty or invalid event "+t.get("id"));else{if(r=t.id||t.get("id"),n.annotationId=r,n._duration&&(n.end=n.start+n._duration),n.pause&&(Vn&&Vn.pauseDuration?n.end=n.start+Vn.pauseDuration:n.end=n.start+.5),(!n.end||n.end<n.start)&&(n.end=n.start+3),i=Math.max(y.get("duration")||0,E.duration()),In.isFinite(i)&&0<i&&(n.start=Math.min(n.start,i),"percent"===n.durationFormat&&100===n.durationValue?n.end=i:n.end=Math.min(n.end,i)),n.noscale&&(n.dragContainer=n.editorContainer=n.target=n.topContainer=T.annotationNoscaleContainer),Xt(i=kn.guid(a),F[i]=t),E[a](i,n),i!==E.getLastTrackEventId())return _n.warn("Error loading annotation "+t.get("id"),n),delete F[i],void delete z[r];P&&e.create&&e.create(i,t,P,m[e.id]),!P||window.HapyakApp&&Qt(t)||P.disable(i),cn(E.getTrackEvent(i),t)}else _n.warn("Cannot load annotation. Unknown type: "+a);--xe||Kt()}function en(n){var i;(i=U[n=Yn[n]||n])?P&&!yt.hasOwnProperty(n)&&(yt[n]=!1,irequire(i.editor,function(){var e,t=0;for(yt[n]=!0;t<Le.length;)(e=Le[t])[0]===i?(E.paused()&&Yt.apply(I,e),Le.splice(t,1)):t++},function(e){delete yt[n],_n.warn("Failed to load editor",e),_n.captureException(e)})):tn(n)}function tn(l,c){var e;function d(){--Xe||(W(),T.editControls&&"edit"===x&&(Un(T.groupCreate,"loading"),Dt()),$("setupannotations"))}e="popcorn.profile."+(l=Yn[l]||l),U.hasOwnProperty(l)?c&&(U[l]?c():(gt[l]||(gt[l]=[]),gt[l].push(c))):(e=[e],Vn.pluginDependencies&&kn.isArray(Vn.pluginDependencies[l])&&e.push.apply(e,Vn.pction(n){var e,t,i,r,a,o,s=vt[l];if(U[l]||("function"==typeof n&&(n=n({uploadAuth:di,rootUrl:Rn.rootUrl})),kn.forEach(Vn.profiles&&Vn.profiles[l],function(e,t){"function"!=typeof n[t]&&(n[t]=e)}),t=n.id,o=n.plugin||t,U[l]=n,!kn.incompatible(o)&&(n.defaults||(n.defaults={}),Vn.defaults&&Vn.defaults[o]&&kn.extend(n.defaults,Vn.defaults[o]),a=kn.extend(n.defaults,{target:T[n.target]||T.annotationContainer}),E.defaults(o,a),n.normalize||(n.normalize={}),kn.forEach(mi,function(e,t){mi.hasOwnProperty(t)&&"function"!=typeof n.normalize[t]&&(n.normalize[t]=e)}),a="basic360"!==t||-1!==["videojsvr"].indexOf(k),T.editControls&&(Hn[o]||Hn[l])&&a&&(o={"#":t,".":("response"===t?"fa":"ss-icon")+" disabled hapyak-new-"+t+" hapyak-annotation-tooltip",">":n.icon,title:"Add "+n.title,tabindex:"0",role:"button",onkeydown:function(e){"Enter"!==e.key&&" "!==e.key||this.dispatchEvent(new Event("click"))},"data-annotation-tooltip":"Add "+n.title},(a=n["data-test-nam["data-test-name"]=a),a=Tn.microTemplate(T.editControls,o),n.button=a[t],T["new-"+t]=n.button,u.push({index:n.sortIndex,id:"new-"+t,alt:t}),u.sort(Gt),yi[t]=n.zIndex,Y(n.button,function(){Yt(n)}),O||Un(n.button,"disabled"),!1!==n.enableAltControls&&!1!==D.enableAltControls&&(o=(r=n).id,r.altControls&&!m[o]&&(a=r.altControls(),m[o]=a,kn.forEach(a,function(n){var e=n.deactivate,t=n.activate;function i(){var e,t;if(P)for(e=P.editing(),h=0;h<e.length;h++)if(((t=e[h])._natives&&t._natives.type||t.plugin)===r.plugin)return;Yt(r),n.element.focus()}u.push({index:r.sortIndex,id:n.id}),n.activate=function(){t.call(this),n.element.removeEventListener("focus",i,!1)},n.deactivate=function(){e.call(this),n.element.addEventListener("focus",i,!1)},n.deactivate()}),u.sort(Gt)),P&&kn.forEach(m[o],function(e){e.editor(P)})),en(l))),d()),s){for(;s.length;)e=s.shift(),Zt(n,e);Ut()}if("function"==typeof c&&c(),i=gt[l])for(;i.length;)i.shift()()},function(e){var t=vt[l];t&&(xe-=t.length,t.length=0),d(),_n.warn("Failed to load plugin "+l,e),_n.captureException(e),xe||Kt()}))}function nn(e){var t=e.get("type");U[t=Yn[t]||t]?Zt(U[t],e):(vt[t]||(vt[t]=[]),vt[t].push(e),tn(t))}function rn(e){var t,n,i,r,a=[],o=null;if(E&&!((i=E.data.trackEvents.byStart).length<=2)){for(t=1;t<i.length;t++)if((n=i[t]).container&&-1!==[T.annotationContainer,T.annotationNoscaleContainer].indexOf(n.container.parentNode)){if(n.start>e){o=n.container;break}n.start!==e||n.noSort||a.push(n)}if(!(a.length<=1))for(a.sort(function(e,t){var n=yi[e._natives.type],i=yi[t._natives.type];return(n=void 0===n?-1:n)-(i=void 0===i?-1:i)||t.end-e.end}),t=0;t<a.length;t++)r=(n=a[t]).noscale?T.annotationNoscaleContainer:T.annotationContainer,n.dragContainer=n.editorContainer=n.target=n.topContainer=r,o&&o.parentNode!==n.container.parentNode&&(o=null),r.insertBefore(n.container,o)}}function an(e){P?e&&e():(Ft("loadEditor"),n=!0,e&&Qe.push(e),!P&&T&&n&&irequire(["popcorn.quickedit"],function(){for((P=kn.quickEdit(E,{permission:function(e,t){var n;ifindow.HapyakApp&&A.hasPermission("edit");if("edit"===e&&ut[t])return!1;t=F[t];try{n=!t||("edit"===e?Qt(t):t.hasPermission(e))}catch(e){n=!1}return n},getAnnotationObject:function(e){return F[e]},dialogContainer:T.editorContainer,dragContainer:T.annotationContainer,topContainer:T.annotationContainer,baseWidth:Gn})).setting("basic360","editorContainer",T.basic360EditContainer),P.setting("drawing","editorContainer",T.drawingEditContainer),P.setting("ontime","editorContainer",T.ontimeEditContainer),P.setting("remote","editorContainer",T.topLeftContainer),P.setting("remote","remotes",Et||[]),P.on("activate",function(e,t){t.editContainer.parentNode!==T.annotationContainer&&t.editContainer.parentNode!==T.contentsContainer||Qn(t.editContainer,"transform","scale("+1/Ne+")"),t.setting("annotation",F[e.id])}),P.on("edit",function(e){var t,n,i=e._id,r=e.container,a=r&&r.parentNode||e.target,o=a&&a.querySelectorAll('div[data-popcorn-id="'+i+'"].popcorn-quickedit-edit')[0],e=e.plugin||e._natives&&e._natives.type;I.pause(),E.setData(i,"hapyak-editing",!0,!0),n=(t=F[i])&&t.get("type")||e,n=Yn[n]||n,r&&(Bn(r,"hapyak-editing-"+e),(r.parentNode!==a||a.lastElementChild!==r&&a.lastElementChild!==o)&&a.appendChild(r)),o&&o.parentNode&&a.appendChild(o),m[n]&&kn.forEach(m[n],function(e){e.activate()}),t&&t.get("isSaved")&&(e=U[n])&&e.create&&e.create(i,t,P,m[e.id]),$("annotationFocus",!1,t.get("id"))},!0),P.on("done",function(a){var o,s,l=P&&P.editing();E.setData(a._id,"hapyak-editing",!1,!0),$("annotationBlur",!1,(o=F[a._id]).get("id")),kn.forEach(kn.registryByName,function(e,t){for(var n,i=!0,r=l.length-1;0<=r;r--)(n=l[r])&&(n.plugin||n._natives&&n._natives.tyr,1));i&&(a.container&&Un(a.container,"hapyak-editing-"+t),o=F[a._id],s=o&&o.get("type")||t,m[s=Yn[s]||s]&&kn.forEach(m[s],function(e){e.deactivate()}))})}),kn.forction(e,t){var n=e.get("type");(n=U[Yn[n]||n])&&n.create&&n.create(t,e,P,m[n.id])}),Bt("loadEditor"),W();Qe.length;)Qe.shift()()}))}function on(){function e(e){E.emit("editModeChange",{mode:e})}T.controlBar&&(N?(Bn(T.editAnnotations,"active"),Un(T.showAnnotations,"active"),Un(T.hideAnnotations,"active"),e("editAnnotations")):a?(Un(T.editAnnotations,"active"),Bn(T.showAnnotations,"active"),Un(T.hideAnnotations,"active"),kn.forEach(E.data.trackEvents.byStart.slice(1,E.data.trackEvents.byStart.length-2),function(e){Un(e.container,"hapyak-editing-"+e._natives.type)}),e("showAnnotations")):(Un(T.editAnnotations,"active"),Un(T.showAnnotations,"active"),Bn(T.hideAnnotations,"active"),e("hideAnnotations")))}function sn(){var t=Date.now(),n=0;kn.forEach(Me,function(e){e.expire<=t?(T.warning.removeChild(e.element),delete Me[e]):n++}),n?(T.warning.style.display="block",T.warning.style.marginTop=-T.warning.offsetHeight+"px",setTimeout(sn,100)):T.warning.style.marginTop=""}function ln(e){var t,n=E.currentTime();if(e||!E.paused()){for(;n<r.start&&0<=De;)r=i[--De];if(!(n<r.end)){for(t=i[De+1];t&&t.start<=n;)r=i[++De],t=i[De+1];r&&(!e&&n-r.end<5||n-r.end<1)?(r.end=n,De<i.length-1&&t.start-n<1&&(r.end=t.end,i.splice(De+1,1))):(r={start:n,end:n},De++,i.splice(De,0,r))}}}function Y(t,n){t&&(t.style.webkitTouchCallout="none",Qn(t,"userSelect","none"),t.setAttribute("unselectable","on"),t.addEventListener("click",function(e){if(3===e.which||2===e.button||e.ctrlKey)return!1;e.preventDefault(),t!==T.moreIcon&&Un(T.moreIcon,"hover"),n.call(this,e)},!1))}function cn(e,t){var n=e.container;n&&(n.gorn-id",e._id),t&&!n.getAttribute("data-hapyak-id")&&(t.get("isSaved")&&t.get("id")?n.setAttribute("data-hapyak-id",t.get("id")):t.onSave(function(){n.setAttribute("data-hapyak-id",t.get("id"))})))}function dn(){var e,t,n,i;return T.trackInfo&&!Rn.hideTrackInfo&&((t=(e=A&&A.get("owner"))&&e.get("image"))?(T.ownerProfileImage.src=t,T.ownerProfileImage.style.display=""):T.ownerProfileImage.style.display="none",(t=e&&e.get("full_name"))?(_i(T.ownerName,t),T.ownerName.parentNode.style.display=""):T.ownerName.parentNode.style.display="none",A?(n=A.get("title"),i=A.get("description"),A.get("ratings_avg"),(n||i)&&0):n=y&&y.get("title"),_i(T.trackTitle,n),_i(T.trackDescription,i),1)}function un(e){var t,n,i,r,a,o,s=e.track,l={},c=!1,d=/^(bottom|end|height|left|right|start|top|width)$/,u=s;function p(e){var t,e=e.currentTarget;e&&e.href&&(t=F[u._id],I.tracking.annotationAction(t,"External Click",{Target:e.href,Text:t.getCustomProperty("popcorn.text"),Remaining:E.duration()-E.currentTime()}))}if(u&&u.container)for(r=u.container.querySelectorAll("a"),a=0;a<r.length;a++)(o=r[a]).removeEventListener("click",p,!1),o.hasAttribute("data-hapyak-log")&&o.addEventListener("click",p,!1);i=s._id,(!P||P.editing().length<=0)&&rn(s.start),s._natives&&(ft[s._natives.type]||(ft[s._natives.type]={}),ft[s._natives.type][i]=s,ke&&(Ut(i),bt[i]||(n=F[i],kn.forEach(s,function(e,t){if(!vi[t]&&void 0!==e&&"function"!=typeof e&&null!==e&&!(Wn(e)||e instanceof window.Popcorn)){try{if(!JSON.stringify(e))return}catch(e){return}"object"!=typeof e||kn.isArray(e)?(e===1/0?e=Number.MAX_VALUE:e===-1/0&&(e=-Number.MAX_VALUE),l[t]=e):l[t]=kn.extend({},e),d.test(t)||(c=!0)}}),s._duration=s._duration||0,0<(e=E.duration())&&(s.start=Math.min(s.start||0,e),s.end=Math.min(s.end||s.start,e)),n?(mt[i]&&delete mt[i],c&&Qt(n)&&(n.set("start_time",s.startTimeValue),n.set("start_time_format",s.startTimeFormat),n.set("custom_configuration",s.customConfig),n.set("duration",s.durationValue),n.set("duration_format",s.durationFormat),n.setCustomProperty("target",null),n.setCustomProperty("popcorn",l),n.onSave(function(){P&&P.emit("commit",!1,i,n),$("updateTrackEventSaved",!1,n)}),xn.store.commit(),$("updateTrackEvent",!1,n))):(s._isTransient&&(ut[i]=s),e=ut[i],s.startTimeValue=s.start,s.startTimeFormat="seconds",s.durationValue=s._duration,s.durationFormat="seconds",n=Cn.Comment.createRecord(null,!!e),e&&n.setCustomProperty("externalId",e.id),t=s.plugin||s._natives&&s._natives.type,n.set("type",t),n.set("track",A),n.set("start_time",s.startTimeValue),n.set("start_time_format",s.startTimeFormat),n.set("custom_configuration",s.customConfig),n.set("duration",s.durationValue),n.set("duration_format",s.durationFormat),window.HapyakApp&&n.set("user",window.HapyakApp.currentUser),n.set("privacy","public"),n.setCustomProperty("popcorn",l),l._duration&&n.set("duration",l._duration),n.onSave(function(){Xt(i,n),||n.get("id"),bt[i]=!0,E[t](s),delete bt[i],$("createTrackEventSaved",!1,n)}),F[s._id]=n,e||xn.store.commit(),$("createTrackEvent",!1,n)),cn(s,n))))}function pn(){return"http://corp.hapyak.com"}function hn(){E&&(E.options.sharing.url=pn())}function fn(){return E&&Math.max(E.currentTime(),0)||0}function mn(){var e,t,n=!1,i=!1;s&&!M&&(E.getTrackEvents().length&&(qt(),i=!0),l&&l.length||(e=s,t=c,c=s=null,window.HapyakApp&&!A.hasPermission("edit")&&(T.editAnnotations&&(T.editAnnotations.style.display="none"),I.editMode(!1)),_n.debug("player: "+e.get("length")+" annotation(s) found, "+e),(xe=e.get("length"))?(ke=!1,e.forEach(function(e){"basic360"===e.get("type")&&-1===["videojsvr"].indexOf(k)||(e.hasPermission("view")?nn(e):_n.warn("Do not have permission to view annotation "+e.get("id")))})):(ke=n=!0,Ut(),j.set("annotationsLoaded",!0,!0),i&&vn(),E.emit("annotationsloaded"),Bn(T.annotationContainer,"active")),!Rn.hideTrackInfo&&T.trackInfo&&(!D.hasOwnProperty("trackInfo")||D.trackInfo?I.showTrackInfo():dn()),Ae?I.editMode(!0):I.showAnnotations(!0),window.HapyakApp&&A.hasPermission("edit")&&(T.editAnnotations&&(T.editAnnotations.style.display=""),Dt()),E.checkGates&&E.checkGates(!0)||!t||!t.autoplay||ne||P&&P.editing().length||(o&&I.seekAnnotation(o),I.play()),n&&$("changeTrack",!1,A),t&&t.callback&&t.callback()))}function vn(){l=[],kn.forEach(Fe,function(e,n){e&&(l.push(n),irequire([n],function(e){var t=l.indexOf(n);l.splice(t,1),e.call(this,g,y,G,b,function(e,t){var n={};!M&&e&&(E.getTrackEvents().forEach(function(e){n[e._natives.type]=n[e._natives.type]||0,n[e._natives.type]++}),kn.forEach(e,function(i){var e,r=i.plugin,a=i.popcorn;if((e=U&&U[r]?U[r].maxAllowed:e)&&0<e&&e<=n[r])return!0;tn(r,function(){var e=U&&r&&U[r],t=new ri(E),n=kn.guid(r);ut[n]=i,!a.annotationVariableConfig&&r&&e&&(Sn.dotget(e,"variables.populateConfig")&&t.register(r,e.variables.populateConfig),a.annotationVariableConfig=t),a._duration&&(a.end=a.start+a._duration),a.pause&&(a.end=a.start+.5),(!a.end||a.end<a.start)&&(a.end=a.start+3),E[r](n,a)})}))}),l.length||mn()},function(e){_n.captureException(e),Kn("Unable to load annotation source: "+n)}))})}function gn(){var n,e,t,i,r,a,o,l,c,d;function s(){var e,t;(L=E.duration()||L||y.get("duration"))!==_e&&((_e=L)&&1<Math.abs((y.get("duration")||0)-L)&&y.hasPermission("edit")&&y.set("duration",L),Ut(),St(),n&&"durationchange"===n.showControlsEvent&&Bt("player"),"string"==typeof D.time?(e=xi.exec(D.time))&&(t=60*parseFloat(e[1]||0)+parseFloat(e[2]||0)):D.time&&(t=D.time),!isNaN(t)&&0<t&&t<L&&E.currentTime(t),Ct&&Ct.setDuration&&"function"==typeof Ct.setDuration&&Ct.setDuration(L),$("durationchange",!0))}function u(){var e=Nn.querySelectorAll(".vjs-subs-caps-button"),t=0;if(L=E.duration(),"viewer"===x&&(n&&"function"==typeof n.forceIpadControls&&n.forceIpadControls(w),T.controlBar.style.display=""),!Vn.showClosedCaptioningButton&&n&&"hapyakhostedplayer"===n.id)for(t=0;t<e.length;++t)e[t].style.display="none";L&&s(),Ce||(Ce=!0,n&&"loadedmetadata"===n.showControlsEvent&&Bt("player"),I.resize(),Ut(),St(),ee&&T.trackInfo&&(clearTimeout(ee),ee=setTimeout(function(){T.trackInfo&&Un(T.trackInfo,"visible")},2e3)),$("loadedmetadata",!0,{controlBarHeight:qe,videoWidth:I.videoWidth(),videoHeight:I.videoHeight(),pluginData:I.pluginData()}))}function p(){var e,t;wn.p&&0<(e=Nn.getElementsByTagName("video")).length&&Array.prototype.forEach.call(e,function(e){e.setAttribute("webkit-playsinline","webkit-playsinline"),e.setAttribute("playsinline","playsinline")}),E.off("canplay",p),Bt("player"),W(),$("canplay",!0,{controlBarHeight:qe,videoWidth:I.videoWidth(),videoHeight:I.videoHeight(),pluginData:I.pluginData()}),e=(e=I.outerContainer())&&"fn"===e.addEventListener?e:Sn.dotget(T,"annotationContainer.parentNode"),G.embed&&(t=E.media.outerContainer)&&["annotationContainer","annotationNoscaleContainer","topLeftContainer","editorContainer","overlayContainer"].forEach(function(e){t.appendChild(T[e])}),e.addEventListener("mouseleave",function(){E.emit("playerHover",!1)},!1),e.addEventListener("mouseenter",function(){E.emit("playerHover",!0)},!1),kn.forEach(U,function(e){e&&(e=e.plugin||e.id,Wt(U[e])&&$t(!1,e))})}if(window.addEventListener("message",Vt,!1),!M){if(e=k&&En[k],!(n=e&&kn[e.fn]&&kn[e.fn]._canPlaySrc(g)?e:n))for(t in En)if(En.hasOwnProperty(t)&&(e=En[t],!0===(i=kn[e.fn]&&kn[e.fn]._canPlaySrc(g))||"probably"===i)){n=e;break}if(n){if(n.isDuplicate&&n.isDuplicate(g))return;b=n.args?(D.playerParameters=kn.extend({duration:D.duration,minimalRootCss:D.minimalRootCss,videoSourceId:Sn.dotget(y,"data.source_id")},D.playerParameters),(r=n.args(y,kn.extend({isIOS:zn},D))).unshift(g),kn[n.fn].apply(kn,r)):kn[n.fn](g,r),w=g,g=n.container(g,b)||g}if(Wn(g)||Kn("Missing container element"),Z=zn&&(!n||!n.preventIOSControls),b)be=!0,a="skeleton"===D.playerType&&Sn.dotget(D,"player.minimalRootCss")?ui:$n,T=Tn.microTemplate(g,a),n.setupAnnotationContainer&&n.setupAnnotationContainer(T,D),x=!!(Z&&void 0===D.controls&&n.forceIpadControls&&zn||"viewer"===D.controls)&&("function"==typeof n.forceIpadControls&&n.forceIpadControls(w,T),Sn.controlStyle(!0,!0),T.controlBar=g.appendChild(Nn.createElement("div")),T.controlBar.className="hapyak-viewer-control-bar",kn.extend(T,Tn.microTemplate(T.controlBar,pi)),T.controlBar.style.paddingBottom="0",T.controlBar.style.bottom="-4px",T.controlBar.style.position="absolute",T.controlBar.style.width="100%",(a=T.groupStandard).style.marginTop="0",a.firstChild.style.border="none",a.firstChild.style.boxShadow="none",T.groupCreate.style.display="none",T.modeSwitch.style.display="none","viewer"),n&&n.modify&&n.modify(T,g),b.autoplay=D.autoplay,Se=!1,b.controls=!x,Bn(g,"hapyak-remote");else{if(T=Tn.microTemplate(g,D.embed?fi:hi),!Dn&&Be&&T.annotationSkipContainer&&(T.annotationSkipContainer.style.display="none"),!Dn&&Ue&&T.timeline&&(T.timeline.style.display="none"),void 0===D.controls?x="edit":("play"===(x=void 0===x?D.controls:x)?T.groupCreate.style.display="none":x=x&&"edit",T.controlBar.style.display=x?"":"none"),void 0===Se&&(Se=!x),n=En[K]||D.playerType&&En[D.playerType])w=n.src?n.src(y,D):(n.pre||"")+encodeURIComponent(Q)+(n.post||""),b=n.args?(D.playerParameters=kn.extend({forceReadyState:"edit"===x,isViewer:"viewer"===x,isUsingDefaultSrc:X,placeholderSrc:J},D.playerParameters),(r=n.args(y,D)).unshift(T.videoContainer),kn[n.fn].apply(kn,r)):kn[n.fn](T.videoContainer);else if("html5"===K){var h,f,m=!1,v=y.getCustomProperty("sources");if(v&&v.length){for(w=[],b=Nn.createElement("video"),t=0;t<v.length;t++)h=(f=v[t]).mime_type,w.push({src:f.url,type:h}),h&&b.canPlayType(h)&&(m=!0);if(m){f)).setAttribute("src",w[t].src),f.setAttribute("type",w[t].type||""),b.appendChild(f);T.videoContainer.appendChild(b),b.addEventListener("error",function(){M||_n.error("Unable to play video",v)},!1),w=null}else(b=kn.HTMLVideojsVideoElement(T.videoContainer)).preload="auto"}else Kn("No video sources found")}else Kn("Unknown source: "+y.get("source"));b.controls=!Dn&&Se,b.autoplay=D.autoplay,Bn(T.playBox,y.get("source"))}b||Kn("Unable to create video element"),("skeleton"===D.playerType&&Sn.dotget(D,"player.minimalRootCss")||D.minimalRootCss)&&Bn(g,"hapyak-minimal-css"),Bn(g,"hapyak-player"),S=T.timeline&&T.timeline.getContext("2d"),le=n&&n.preserveFullscreenStyles,kn.forEach(Vn.styles,function(e,t){var n=T[t];n&&kn.forEach(e,function(e,t){n.style[t]=e})}),"edit"===x&&kn.forEach(Hn,function(e,t){e&&tn(t)}),D.embed&&(Bnemote"),hn(),qn||Vn.fullScreenPopOut||(T.fullScreen.style.display="none")),Bn(g,"hapyak-"+(D.edit?"edit":"view")+"-mode"),T.timeline&&(ae=new ti(T.timeline,At,At,function(){Ee||(E.play(),Ee=!0)})),Z&&T.volumeContainer&&(zn||navigator.userAgent.match(/Android/))&&(T.volumeContainer.style.display="none",T.annotationSkipContainer.style.display="none"),T.volumeSliderContainer&&(re=new ti(T.volumeSliderContainer,function(e,t,n){Bn(T.volumeContainer,"active"),Pt(0,0,n)},Pt,function(){Un(T.volumeContainer,"active")}),ie=T.volumeSlider.getContext("2d")),C=1,wn.provisioning.watermark&&(T.watermark=Nn.createElement("a"),T.watermark.style.cssText=["position: absolute","width: 100%","top: 0","left: 0","display: block","visibility: visible","opacity: 0.3","margin: 10% 0 0 0","padding: 20px","color: white","background-color: black","text-align: center","font-size: 30px","line-height: 30px","font-weight: bold","box-sizing: border-box;","z-index: auto"].join(";"),Ae&&(T.watermark.style.display="none"),T.watermark.className="hapyak-watermark",T.watermark.setAttribute("target","_new"),T.watermark.innerHTML='<img src="'+hapyak.assets+'/img/yak-blue.png"/>',T.watermark.appendChild(Nn.createTextNode(Vn.watermarkText||"Contact HapYak to purchase API Keys")),T.watermark.setAttribute("href",Vn.contactUrl||"http://corp.hapyak.com"),T.watermark.addEventListener("click",function(){E&&E.pause()},!1),T.annotationContainer.parentNode.insertBefore(T.watermark,T.annotationContainer.nextSibling)),a={environment:H,hapyakPlayer:I,getScope:_t,frameAnimation:!0,sharing:{image:y.get("image"),title:y.get("title"),url:pn()},shortenUrls:Vn.shortenUrls,validateLink:Zn,hostWindow:D.hostWindow||window,disableInlineTextEdit:(void 0===Rn.disableInlineTextEdit?Vn:Rn).disableInlineTextEdit,autoEditDialog:(void 0===Rn.autoEditDialog?Vn:Rn).autoEditDialog},kn.extend(a,Vn.popcornOptions),E=kn(b,a),_=new ri(E),be&&n.setupAnnotationContainer&&(3<=E.readyState()?n.setupAnnotationContainer(T,D):E.on("canplay",function(){Sn.dotget(E,"media._utils.getPlayerInstance")&&n.setupAnnotationContainer(T,{player:E.media._utils.getPlayerInstance()})})),n&&n.annotationBlacklist&&n.annotationBlacklist.forEach(function(e){Hn[e]=!1}),W(),E.options.loadTrackTime=function(e,t,n,i){var r,n=z[n];"string"==typeof t&&(t=kn.util.toSeconds(tes.popcorn.start")+.3:t,!isNaN(t)&&0<=t&&[null,void 0].indexOf(t)<0&&t<E.duration()&&E.currentTime(t),e?(Akeys(),function(e){"trackId"!==e&&H.clear(e,!0)}),kn.forEach(Je,function(t){kn.forEach(t.keys(),function(e){t.clear(e,!0)})})),(r=Cn.Track.find(e)).onLoad(function(){I.loadTrack(r,{callback:i})})):i&&i()},E.on("pluginerror",function(e){_n.captureException(e)}),kn.forEach(kn.registryByName,function(e,t){E.defaults(t,{target:T.annotationContainer})}),T.trackReplayButton&&(T.trackReplayButton.innerHTML="Replay",T.trackReplayButton.addEventListener("click",function(e){if(3===e.which||2===e.button||e.ctrlKey)return!1;Un(T.annotationContainer,"hapyak-player-overlay"),Un(T.annotationNoscaleContainer,"hapyak-player-overlay"),Un(T.trackInfo,"visible"),Un(T.trackMessage,"visible"),T.trackReplayButton.style.display="none",E.play(0)},!1)),c=T.trackMessage,d=E.currentTime(),T.trackInfo&&!Rn.hideTrackInfo&&(E.on("seeking",function(){clearTimeout(o),clearTimeout(l),T.trackCapContent&&Un(T.trackCapContent,"visible"),o=setTimeout(function(){var e,t,n,i,r,a=parseInt(E.currentTime()/60,10),o=E.buffered(),s=!1;if(!(Math.abs(d-E.currentTime())<1)){for(i=0,r=o.length;i<r&&!s;i++)t=o.end(i),n=o.start(i),(E.currentTime()<n||E.currentTime()>t)&&(s=!0);s&&(d=E.currentTime(),1<=a?10<=a?a+=":":a="0"+a+":":a="00:",(e=parseInt(E.currentTime()%60,10))<10&&(e="0"+e),Bn(T.trackInfo,"visible"),Bn(T.trackMessage,"visible"),T.trackReplayButton.style.display="none",c.innerHTML="Seeking to: "+a+e,l=setTimeout(function(){T.trackInfo&&Un(T.trackInfo,"visible"),c&&(c.innerHTML="")},3e3))}},250)}),E.on("ended",function(){clearTimeout(o),clearTimeout(l),c.innerHTML="",Un(T.annotationContainer,"hapyak-player-overlay"),Un(T.annotationNoscaleContainer,"hapyak-player-overlay"),T.trackReplayButton.style.display="",Bn(T.trackInfo,"visible"),Bn(T.trackMessage,"visible"),Ie&&(E.currentTime(0),E.play())}),E.on("seeked",function(){clearTimeout(l),Un(T.trackInfo,"visible"),c.innerHTML=""})),Y(T.playButton,function(){P&&P.done(),I.paused()?(I.play(),I.tracking.playerAction("Controls","Play")):(I.pause(),I.tracking.playerAction("Controls","Pause"))}),Y(T.volume,function(){var e=E.muted();E.muted(!e),e&&!E.volume()&&E.volume(1)}),Y(T.moreIcon,function(e){e.target!==T.moreIcon&&e.target!==T.moreIcon.firstChild||(clearTimeout(te),Bn(T.moreIcon,"hover"),te=setTimeout(function(){Un(T.moreIcon,"hover")},5e3))}),M||"function"!=typeof ii.setup||ii.setup(T.overlayContainer,{}),qn&&(Nn.addEventListener("fullscreenchange",$e,!1),Nn.addEventListener("mozfullscreenchange",$e,!1),Nn.addEventListener("webkitfullscreenchange",$e,!1),Nn.addEventListener("MSFullscreenChange",$e,!1)),T.fullScreen&&(!D.embed||qn?Y(T.fullScreen,function(){I.fullscreen(!Ln(q)),I.tracking.playerAction("Controls","Fullscreen"),Fn&&(D.embed||An.initFullscreenChange(I,g),Rt())}):Vn.fullScreenPopOut&&(T.fullScreen.setAttribute("title","Open video at full size in new window"),Y(T.fullScreen,function(){var e,t,n,i=y.get("id")+"hapyak",r=window.location;if(A&&(i+=A.get("id")),e=[Rn.rootUrl+r.pathname],r.search&&1<r.search.length)for(t=r.search.substr(1).split("&"),n=0;n<t.length;n++)Tn.startsWith.call(t[n],"time=")&&(t.splice(n,1),n--);else t=[];E&&(t.push("time="+E.currentTime()),e.push(t.join("&"))),I.tracking.playerAction("Controls","Fullscreen"),I.pause(),me&&!me.closed?me.focus():me=window.open(e.join("?"),i)}))),T.showAnnotations&&Y(T.showAnnotations,function(){O||(I.editMode(!1),I.showAnnotations(!0),I.tracking.playerAction("Controls","Show Annotations"))}),T.hideAnnotations&&Y(T.hideAnnotations,function(){O||(I.showAnnotations(!1),I.tracking.playerAction("Controls","Hide Annotations"))}),T.editAnnotations&&Y(T.editAnnotations,function(){O||(I.editMode(!0),I.tracking.playerAction("Controls","Edit Annotations"))}),E.prev&&T.prevButton&&Y(T.prevButton,function(){N&&E.pause(),P&&P.done(),E.prev(),I.tracking.playerAction("Controls","Skip Backward")}),E.next&&T.nextButton&&Y(T.nextButton,function(){N&&E.pause(),P&&P.done(),E.next(),I.tracking.playerAction("Controls","Skip Forward")}),T.createTrack&&(window.HapyakApp&&window.HapyakApp.currentUser?Y(T.createTrack,function(){O||(P&&P.done(),window.HapyakApp.currentUser?(I.editMode(!0),I.createTrack()):_n.info("No permission to create track"))}):T.createTrack.display="none"),T.trackInfoClose&&Y(T.trackInfoClose,function(){Un(T.trackInfo,"visible")}),window.addEventListener("resize",jt,!1),window.addEventListener("orientationchange",Nt,!1),window.addEventListener("orien1),window.addEventListener("message",Rt,!1),st&&(ue=setInterval(jt,500)),E.on("resize",function(){I.resize()}),E.on("loadedmetadata",u),E.on("durationchange",s),E.on("progress",function(){we=-1}),E.on("volumechange",function(){var e=E.muted();e||(C=E.volume()),T.volume&&(T.volume.className=!C||e?"hapyak-volume ss-volume":C<.5?"hapyak-volume ss-volumelow":"hapyak-volume ss-volumehigh"),Tt()}),E.on("trackadded",un),E.on("trackchange",un),E.on("trackremoved",functiot[n._id]).get("id"),window.HapyakApp&&e.hasPermission("delete")?(_n.info("delete event "+n._id),delete mt[n._id],$("removeTrackEvent",!1,e),e.onDelete(function(){$("removeTrackEventSaved",!1,e)}),e.deleteRecord(),xn.store.commit(),delete F[n._id],E.removeTrackEvent(n._id),A&&(j.set("annotationIds."+t,!1,!0),j.set("projectAnnotations."+t,!1,!0),_t(n._id).destroy()),delete Je[n._id],delete B[t],delete z[t],wt[n._id]&&(T.controlBar&&T.controlBar.removeChild(wt[n._id]),delete wt[n._id]),Wt(U[i])||$t(!0,i)):_n.warn("Do not have permission to delete track "+e.get("id")))}var i=n._natives&&n._natives.type||"",t=ft[i];t&&delete t[n._id],F[n._id]&&(mt[n._id]=F[n._id],M&&e(),setTimeout(e,10))}),E.on("trackstart",function(e){var t,n,i,r,a;if(!pt[e.id]){if((t=F[e._id])&&!I.editMode()){if(e.container&&"pop"===t.get("type"))for(a={},n=e.container.querySelectorAll("a"),r=0;r<n.length;r++)i=n[r],a["Target"+(r+1)]=i.href;I.tracking.annotationView(t,a),ht[e.id]=Date.now()}e&&e.container&&(e.gate&&Bn(e.container,"hapyak-action-gate"),e.pause&&(E.annotationPause(e),jn=!0,Bn(e.container,"hapyak-action-pause"))),cn(e.track,t),$("trackEventViewed",!1,t,e)}}),E.on("trackend",function(e){var t,n=ht[e._id];n&&(t=F[e._id])&&I.tracking.annotationEnded(t,{Elapsed:(Date.now()-n)/1e3,Paused:!!e.pause}),e&&e.container&&(Un(e.container,"hapyak-action-gate"),Un(e.container,"hapyak-action-pause")),delete ht[e._id],delete pt[e.id]}),E.on("timeupdate",function(){var e=fn();kn.p.hasOwnProperty("persistTime")&&wn.provisioning.persistTime&&!Dn&&(E.persistTime=e),e<L&&(Pe?(Pe=!1,W()):Pe=!1),E.checkGates&&E.checkGates()||((e<R.start||5<=e-R.end)&&(Oe+=R.end-R.start,R.start=e),R.end=e,Xn.post(Sn.dotget(E,"options.hapyakPlayer")),ln(),$("timeupdate",!1,E.currentTime()),I.tracking.updateVideoPlayback())}),E.on("seeking",function(){var e=E.currentTime();Oe+=R.end-R.start,R.start=e,R.end=e}),E.on("seeked",function(){ln(!0),$("seeked",!1,E.currentTime()),I.tracking.updateVideoPlayback(),kt<=50?(I.tracking.playerAction("Video","Seeked"),kt+=1):xt||(xt=!0,I.tracking.customAction("System","Seek Flood",null,{}))}),E.on("ended",function(){var e;Pe=!0,ze&&W(),$("ended",!1,E.currentTime()),e=L<Oe?"End-over":L-Oe<.5?"End-complete":"End-under",Ie&&(E.currentTime(0),E.play()),I.tracking.playerAction("Video",e)}),E.on("play",function(){I.playTime()<=0&&D&&D.player&&D.player.options_&&!D.player.options_.autoplay&&window.dispatchEvent(new Event("resize")),ne=!0,Bn(g,"playing"),T.playButton&&(T.playButton.innerHTML="&#xE8A0;"),T.trackInfo&&(Un(T.trackInfo,"visible"),Un(T.trackCapContent,"visible")),jn=!1,D.hidePlayerUIWhenInteracting&&this.media._utils.updatePlayerUI(this.media.parentNode,!0),$Video","Resume")}),E.on("pause",function(){var t;Ee&&(Un(g,"playing"),T.playButton&&(T.playButton.innerHTML="&#x25B6;")),(t=E.data.running)&&Object.keys(t).some(function(e){return 0<t[e].length})&&D.hidePlayerUIWhenInteracting&&this.media._utils.updatePlayerUI(this.media.parentNode,!1),$("pause"),I.tracking.playerAction("Video","Pause")}),E.on("disable",function(){I.showAnnotations(!1)}),E.fallback({start:function(e,t){var n,t=t&&t._natives&&t._natives.type,t=E.incompatible(t);(n=Me[t=t])||((n={element:Nn.createElement("div")}).element.appendChild(Nn.createTextNode(t)),T.warning.appendChild(n.element),Me[t]=n),n.expire=Date.now()+5e3,sn()}}),$("loadedplayer",!0,b),jt(D.width,D.height),w&&(b.src=w),Rn.tracking&&b._util&&b._util.trackView&&b._util.trackView(JSON.stringify(Rn.tracking)),b._utils&&b._utils.addConversionListener&&b._utils.addConversionListener(function(e,t){var n,i,r=hapyak.auth().partner;"string"==typeof t.email&&-1===t.email.indexOf("{")&&(n=r.email||t.email,i=r.username||t.username||n,r=r.userId||t.userId||i,hapyak.auth({partner:{userId:r,username:i,email:n}})),$("conversion",!1,e,t)}),Rn.muted&&E.muted(!0),Tt(),I.showAnnotations(!0),Ft("player"),dn(),E.duration()&&(s(),(void 0===b.videoWidth?b.width&&b.height:b.videoWidth&&b.videoHeight)&&u()),3<=b.readyState?p():E.on("canplay",p),mn(),vn(),hn(),Ge&&I.play(),Ke&&I.fullscreen(Ke)}}function yn(){Ze=Ze||setTimeout(function(){var e,t,n,i,r,a,o=!1;if(Ze=0,!M&&lt.data&&A){for(a in e={},t={},n={},et)et.hasOwnProperty(a)&&(n[a]=!(t[a]=void 0));for(r=0;r<H.keys.count;r++)a=H.keys(r),i=H.get(a),et[a]===(e[a]=i)?delete t[a]:(et[a]=i,t[a]=i,o=!0),delete n[a];if(o){for(a in n)n.hasOwnProperty(a)&&delete et[a];$("data",!1,e,t)}}},0)}function bn(e){var t=e.partner;In.isEmpty(t)||(V.set("hapyakPartnerAuth",t,!0),In.each(["userId","username","email"],function(e){t[e]&&V.set(e,t[e],!0)})),E&&E.emit("authchange",{partner:t}),$("authchange",!0,t)}}}),define("viewer",["require","module","promise!configuration","model","dao","utils.embed","utils.sanitizeparams","hapyak.player","cookie","logging","tracking","lodash.noconflict","ember.noconflict"],function(b,e,w,d,u,t,E,k,n,x,C,p){"use strict";var i,r,_,a,o,h,s=e.config(),T={authchange:!0,data:!0,durationchange:!0,load:!0,loadannotations:!0,setupannotations:!0,loadedmetadata:!0,customtrackingevent:!0,pause:!0,play:!0,resized:!0,conversion:!0},S=t.dotget,l=hapyak.auth(),c=[];try{window.top&&window.top.location&&(o=window.top.location.host,i=window.top.location.href,a=window.top.location.search)}catch(e){}function f(e,t,i,r,n){this.instanceId=e.instanceId,x.debug("[hapyak.viewer] HapyakViewer Created, id="+this.instanceId,e,t,i,r,n),this.tracking=C.getInstance(this.instanceId,!0),this.init(),t&&(this.tracking.startProjectContext(t),S(w,"analytics.customFields.enabled")&&this.tracking.registerPartnerProperties(S(e,"player.mediainfo.customFields"))),this.tracking.startVideoContext(i),r&&this.tracking.startTrackContext(r,n);var a,o=new k(e.player,i,E.viewer(e,{annotationSources:e.plugins&&e.plugins.annotationSources,projectName:t?t.get("title"):"",keepAnnotationAspectRatio:!!t&&t.get("keepAnnotationAspectRatio"),contentTracks:t?t.get("contentTracks"):[],projectId:t?t.get("id"):null,workflow:t?t.get("workflow"):null,remotes:e.plugins&&e.plugins.remote&&e.plugins.remote.items}),this.instanceId,this.tracking),s=this,l=[],c={},d=[],u=[];function p(){l.length&&l.shift()()}function h(n){var i=Array.prototype.slice.call(arguments,1);l.push(function(){var e,t=c[n];if(t)for(e=0;e<t.length;e++)t[e].apply(s,i)}),setTimeout(p,0)}function f(e,t,n){o.on(e,function(){var e=Array.prototype.slice.call(arguments,0);n&&e.push(n),e.unshift(t),h.apply(null,e)})}function m(e,t,n){e=new _.HapyakRemote(e,t,n);return u.push(e),e}function v(t){b(["remote"],function(e){for(_=e;d.length;)_.registerItem(d.shift());"function"==typeof t&&t()})}function g(e,t){e&&"string"==typeof e&&"function"==typeof t&&(e=e.toLowerCase(),T[e]&&(c[e]||(c[e]=[])).push(t))}function y(e){try{var t=JSON.parse(e.data);if("hapyak"===t.context)switch(t.event){case"notifyResize":o.resize(t.width,t.height,t.sync);break;case"pause":o&&"function"==typeof o.pause&&o.pause();break;case"play":o&&"function"==typeof o.play&&(0<o.playTime()?o:(document.getElementsByTagName("video")[0].muted=!0,document.getElementsByTagName("video")[0])).play()}}catch(e){}}for(a in f("changeTrack","loadannotations",r),f("data","data",r),e.resetVariables&&o.on("changeTrack",function(){o.resetVariables()}),h("load",this),o.loadTrack(r,{comments:Ember.A(n),autoplay:e.autoplay}),this.tracking.playerView("Load"),o.duration()?(h("durationchange"),h("loadedmetadata")):f("loadedmetadata","loadedmetadata"),f("authchange","authchange"),f("durationchange","durationchange"),f("play","play",r),f("pause","pause",r),f("conversion","conversion"),f("resized","resized"),f("customtrackingevent","customtrackingevent"),e)e.hasOwnProperty(a)&&"on"===a.substring(0,2)&&g(a.substring(2),e[a]);e.plugins&&e.plugins.remote&&e.plugins.remote.items&&(e.plugins.r{_?_.registete.scan&&v(function(){for(var e=_.scan();e.length;)u.push(e.s.getTrackId=function(){return r.get("id")},this.resize=function(e,t,n){return o.resize(e,t,n),this},this.trackList=function(t,n){b(["widget.controls.tracklist"],function(e){e.trackList(t,n,o,i)})},this.resetVariables=function(){o.resetVariables()},this.destroy=function(){var n=this;for(r&&this.tracking.endTrackContext(),this.tracking.endVideoContext(),e.projectId&&this.tracking.endProjectContext(),l.splice(0);u.length;)u.pop().destroy();window.removeEventListener("message",y,!1),o.destroy(),hapyak.instances.viewer.some(function(e,t){if(e.instanceId===n.instanceId)return hapyak.instances.viewer.splice(t,1),!0})},this.addEventListener=g,this.removeEventListener=function(e,t){e&&"string"==typeof e&&"function"==typeof t&&(e=e.toLowerCase(),T[e]&&(e=c[e])&&0<=(t=e.indexOf(t))&&e.splice(t,1))},this.remote=function(e,t,n,i){"function"==typeof n&&(i=n,n=null),_?i(m(e,t)):v(function(){i(m(e,t))})},this.getData=function(e){return o.getData(e)},this.setData=function(e,t){return o.setData(e,t)},this.dispatchEvent=function(e,t){o.dispatchSkeletonEvent(e,t)},this.play=function(){o.play()},this.pause=function(){o.pause()},this.fullscreen=function(e){o.fullscreen(e=void 0===e?!0:e)},this.disableAnnotations=function(){o.showAnnotations(!1)},this.enableAnnotations=function(){o.showAnnotations(!0)},Object.defineProperty(this,"currentTime",{configurable:!1,enumerable:!0,get:function(){return o.currentTime()},set:function(e){o.currentTime(e)}}),Object.defineProperty(this,"duration",{configurable:!1,enumerable:!0,get:function(){return o.duration()}}),Object.defineProperty(this,"paused",{configurable:!1,enumerable:!0,get:function(){return o.paused()}}),Object.defineProperty(this,"outerContainer",{configurable:!1,enumerable:!0,get:function(){return o.outerContainer()}}),Object.defineProperty(this,"contentTracks",{configurable:!1,enumerable:!0,get:function(){return o.contentTracks}}),window.addEventListener("message",y,!1)}i||(i=(e=document.createElement("a")).href=parent!==window?document.referrer:window.location.host,o=e.host,a=e.search),h=t.getQueryParams(a,"hapyak_"),r={Embedded:!0,Context:"Viewer",Host:o,Href:i},e=l.partner.userId,a=l.partner.username,o=(o=l.partner.email)||S(s,S(w,"auth.email"))||h.email,a=a||S(s,S(w,"auth.username"))||h.username||o,e=e||S(s,S(w,"auth.userId"))||h.userId||a,l=hapyak.auth({partner:{userId:e,username:a,email:o}}),w.group&&(r["Group ID"]=w.group.id,w.group.name&&(r["Group Name"]=w.group.name),w.group.parent&&(r["Group Parent ID"]=w.group.parent),w.group.customer&&(r.Customer=w.group.customer,r.Affiliate=w.group.affiliate)),t.controlStyle(!0,!0),f.prototype.toString=function(){return"[object HapyakViewer]"},f.prototype.init=function(){var t,n=this;function e(e){(t=window.HapyakApp.get("currentUser"))||window.HapyakApp.set("currentUser",e),n.tracking.startUserContext(e),"function"==typeof window.postMessage&&window.parent&&window.parent.postMessage(JSON.stringify({context:"hapyak",callback:"loadcurrentuser",userId:e.get("id"),username:e.get("username")}),"*"),e=e,c.length&&(callback=c.shift())&&"function"==typeof callback&&callback(e)}this.tracking.register(r),this.tracking.registerPartnerProperties(s.tracking),this.tracking.registerPartnerProperties(s.plugins),this.tracking.registerPartnerProperties(h),l.user&&(window.HapyakApp?(t=window.HapyakApp.get("currentUser"))?e(t):c.push(e):(window.HapyakApp=Ember.Object.create(),u.store.load(d.User,l.user),u.store.find(d.User,l.user.id).onLoad(e)))};return{load:function(e,t){w.accountCSS&&hapyak.asset.css(w.accountCSS),e.css&&hapyak.asset.css(e.css),e.plugins&&(void 0===e.variables&&(e.variables={}),e.variables.plugins=e.plugins),e.controls&&(e.controls="viewer");var n=e.loadData;if(n&&e.projectId&&e.trackId&&e.videoId){for(va=n[l];u.store.load(ectId),o=u.store.find(d.Video,e.videoId),a=u.store.find(d.Track,e.trackId),s=(s=(s=n.find(function(e){return"Comment"==e.type}))&&s.data||[]).map(function(e){return u.store.find(d.Comment,e.id)}),r&&r.get("css")&&hapyak.asset.css(r.get("css")),r&&-1!=[null,void 0].indexOf(e.resetVariables)&&(e.resetVariables=r.get("resetVariables")),r&&r.get("width")&&r.get("height")&&(e.aspectRatio=r.get("width")/r.get("height")),e.ondata&&(i=e.ondata),e.ondata=function(e){hapyak.message.receiveData(e),i&&"function"==typeof i&&i(e)},(s=new f(e,r,o,a,s)).setData("projectConfig",{css:e&&e.css||"",title:r&&r.get("title"),image:o&&o.get("image")}),hapyak.instances.viewer.push(s),p.isEmpty(h)||(s.setData(h),(e=h.autoplay)&&"true"===e&&s.play(),h.seek&&(s.currentTime=parseInt(h.seek,10))),o&&a||x.info("no annotations found"),"function"==typeof t&&t(s)}else x.error("Unable to create viewer. Add projectId, trackId, videoId, and loadData parameters.")}}}),define("base64",[],function(){"use strict";function t(e){var t,n,i,r,a,o,s="",l=0;for(e=function(e){var t,n,i="";for(e=e.replace(/\r\n/g,"\n"),n=0;n<e.length;n++)(t=e.charCodeAt(n))<128?i+=String.fromCharCode(t):i=127<t&&t<2048?(i+=String.fromCharCode(t>>6|192))+String.fromCharCode(63&t|128):(i=(i+=String.fromCharCode(t>>12|224))+String.fromCharCode(t>>6&63|128))+String.fromCharCode(63&t|128);return i}(e);l<e.length;)i=(t=e.charCodeAt(l++))>>2,r=(3&t)<<4|(t=e.charCodeAt(l++))>>4,a=(15&t)<<2|(n=e.charCodeAt(l++))>>6,o=63&n,isNaN(t)?a=o=64:isNaN(n)&&(o=64),s=(s=(s=(s+=m.charAt(i))+m.charAt(r))+m.charAt(a))+m.charAt(o);return s}function r(e){var t,n,i,r,a,o,s="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)i=m.indexOf(e.charAt(l++)),t=(15&(r=m.indexOf(e.charAt(l++))))<<4|(a=m.indexOf(e.charAt(l++)))>>2,n=(3&a)<<6|(o=m.indexOf(e.charAt(l++))),s+=String.fromCharCode(i<<2|r>>4),64!==a&&(s+=String.fromCharCode(t)),64!==o&&(s+=String.fromCharCode(n));for(var c,d,u=s,p="",h=0,f=0;h<u.length;)(c=u.charCodeAt(h))<128?(p+=String.fromCharCode(c),h++):191<c&&c<224?(f=u.charCodeAt(h+1),p+=String.fromCharCode((31&c)<<6|63&f),h+=2):(f=u.charCodeAt(h+1),d=u.charCodeAt(h+2),p+=String.fromCharCode((15&c)<<12|(63&f)<<6|63&d),h+=3);return p}var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijkg(16);return n},encodeFromHex:function(e){return t(function(e){var t,n="";for(0<e.length%2&&(e="0"+e),t=0;t<e.length;t+=2)n+=String.fromCharCode(parseInt(e.charAt(t)+e.charAt(t+1),16));return n}(e))}}}()),define("analytics.bigquery",["module","promise!configuration","analytics.integration","base64","jquery.noconflict","lodash.noconflict","logging","utils.embed","utils.omitinvalid"],function(e,a,o,s,n,l,c,d,i,t){"use strict";var u=a.analytics&&a.analytics.bigquery||{},p=e.config().environment||"production",h=(u.localAnalytics,u.localDebug),f=10,m=n.browser.msie&&n.browser.version<10,r=/\/\/([^/]+)/i.exec(document.referrer),v=u.whitelistedPlugins?l.pick(e.config().plugins||{},l.keys(u.whitelistedPlugins)):{};function g(){var e=this;c.debug("[bigquery.js] BigQueryIntegration Created "),this.queue=[],this.hasRateLimits=!1,this.rateLimitRemaining=0,this.rateLimitReset=0,this.sendDelay=0,this.finalEventProperties=null,this.finalEventEnabled=u.finalEvent,this.propertiesToParams=function(e,t){var n=(new Date).toUTCString();return(t=this.transformData(t))["Event Time"]||(t["Event Time"]=n),(t=!t.Action||"Response-Poll"!=t.Action&&"Response-Information"!=t.Action?t:this.mergeResponseData(t))["Custom Event Data"]&&(t["Custom Event Data"]=this.transformEventData(t["Custom Event Data"])),c.logMethod("bigquery.track",e,t),t=this.filterProperties(e,t),h&&console.log({event:e,properties:t}),n={api_key:d.dotget(a,"analytics.bigquery.api_key"),data:s.encode(JSON.stringify({name:e,properties:t,plugins:v})),attempt:0},m&&(n.hapyak_analytics_uid=this.hapyak_analytics_uid,n.hapyak_analytics_sid=this.hapyak_analytics_sid),"production"!==p?n.dataset=p+"_client_event_stream":101===t["Group ID"]&&(n.dataset="dailymotion_client_event_stream",n.queue="dailymotion-analytics:events"),u.dataset&&(n.dataset=u.dataset),n},this.finalEvent=function(e){var t,n;this.finalEventProperties&&(t=this.getAnalyticsEndpointUrl(),n=l.extend(this.finalEventProperties,{Action:"Final",Type:"Video"}),n=JSON.stringify(this.propertiesToParams("Player Action",n)),navigator.sendBeacon?navigator.sendBeacon(t,n):window.fetch&&fetch(t,{method:"POST",body:n,mode:"cors",keepalive:!0}))},this.finalEventEnabled&&window.addEventListener("unload",function(){e.finalEvent()}),this.capturePropertiesForFinalEvent=function(e){this.finalEventProperties=e},this.getAnalyticsEndpointUrl=function(){return hapyak.metricsUrl},this.track=function(e,t,n,i){var r=(new Date).toUTCString();101===t["Group ID"]&&"Player Action"===e&&t&&"Video"===t.Type&&("Resume"===t.Action||"Pause"===t.Action||"Seeked"===t.Action)||(this.finalEventEnabled&&"Player Action"==e&&t.Type&&"Video"==t.Type&&t.Action&&("Progress"==t.Action||"Play"==t.Action)&&this.capturePropertiesForFinalEvent(t),o.shouldTrack({include:u.include,exclude:u.exclude},e,t)&&((t=this.transformData(t))["Event Time"]||(t["Event Time"]=r),(t=!t.Action||"Response-Poll"!=t.Action&&"Response-Information"!=t.Action?t:this.mergeResponseData(t))["Custom Event Data"]&&(t["Custom Event Data"]=this.transformEventData(t["Custom Event Data"])),c.logMethod("bigquery.track",e,t),t=this.filterProperties(e,t),h&&console.log({event:e,properties:t}),r={api_key:d.dotget(a,"analytics.bigquery.api_key"),data:s.encode(JSON.stringify({name:e,properties:t,plugins:v})),attempt:0},m&&(r.hapyak_analytics_uid=this.hapyak_analytics_uid,r.hapyak_analytics_sid=this.hapyak_analytics_sid),"production"!==p?r.dataset=p+"_client_event_stream":101===t["Group ID"]&&(r.dataset="dailymotion_client_event_stream",r.queue="dailymotion-analytics:events"),u.dataset&&(r.dataset=u.dataset),this.queue.push(r),this.sendRequest()))},this.filterProperties=function(e,t){var n=[],i=(t=t||{}).Type,r=t.Action;return"Player Action"===e&&"Video"===i&&"Progress"===r&&n.push("Partner Data","Href","Project Title","Group Name","Project Tags","Quiz","Templates"),n.length?l.omit(t,n):t},this.transformEventData=function(e){var t,n=[],i=e.responseData;for(t in i&&l.isArray(i)&&this.mergeResponseData(null,i,eturn n},this.mergeResponseData=function(e,t,i){t=t||e["Response Data"],i=i||e["Partner Data"];if(t)i=i||[],l.each(t,function(e){l.each(e,function(e,t,n){i.push({key:String(t),value:String(e)})})});else try{console.warn("mergeResponseData: invalid source")}catch(e){}return e},this.sendRequest=function(){var e,t,r=this;function a(e){var t=e.getResponseHeader("X-RateLimit-Remaining"),e=e.getResponseHeader("X-RateLimit-Reset");null!==t&&(r.rateLimitRemaining=+t),null!==e&&(r.rateLimitReset=1e3*e),r.hasRateLimits=null!==t&&null!==e}for(;0<this.queue.length;)setTimeout(function(i){return function(){var e;i.attempt+=1,i.attempt>f?c.debug("[analytics.bigquery] Runaway requests detected! Aborting."):(e=r.getAnalyticsEndpointUrl(),n.ajax(m?{type:"GET",url:e,data:i,dataType:"jsonp"}:{type:"POST",url:e,data:i,xhrFields:{withCredentials:!0}}).done(function(e,t,n){a(n),r.rateLimitRemaining&&(r.sendDelay=0),r.rateLimitRemaining<100&&c.dev("[analytics.bigquery] Remaining: "+r.rateLimitRemaining+", Reset: "+r.rateLimitReset+" (SUCCESS)"),m&&(r.hapyak_analytics_uid=n.responseJSON.hapyak_analytics_uid,r.hapyak_analytics_sid=n.responseJSON.hapyak_analytics_sid)}).fail(function(e,t,n){a(e),r.queue.unshift(i),r.hasRateLimits?0===r.rateLimitRemaining&&(r.sendDelay+=50):r.sendDelay+=500,r.sendRequest()}))}}(this.queue.pop()),(t=e=void 0,t=r.sendDelay,r.hasRateLimits&&0===r.rateLimitRemaining&&(e=(e=new Date).getTime()+6e4*e.getTimezoneOffset(),t=Math.max(0,(r.rateLimitReset||0)-e+r.sendDelay)),t))},this.transformData=function(e){var t=["Answers","Correct","excludeKeys","Num Answered","Num Correct","Num Questions","Pass","Questions","Submit","Summary","Target","Target Time","Text","Target Expression","Video Elapsed Difference"].concat(e.excludeKeys),t=l.omit(e,t),n=i({answer:e.Answer,correct:e.Correct,num_answered:e["Num Answered"],num_correct:e["Num Correct"],num_questions:e["Num Questions"],passed:e.Pass,question:e.Question,submit:"Submit"===e.Action,summary:e.Summary});return t["Annotation Dwell Time"]=e["Video Elapsed Difference"],t["Annotation Text"]=e.Text,l.isFinite(e.Target)||(t["Link Url"]=e.Target),t["Link Time"]=e["Target Time"],t["Link Code"]=e["Target Expression"],(t.Quiz=n).answer&&(t.Rollup=(t.Rollup||[]).concat("response")),t.Rollup=l.uniq(t.Rollup),t.Referrer=document.referrer,t["Referring Domain"]=r&&r[1],t["Video Dwell Time"]=e["Video Accrued"],t.Templates&&"function"==typeof t.Templates.forEach&&t.Templates.forEach(function(e,t,n){null===e.tags&&(e.tags=[])}),i(t)}}return m&&(this.hapyak_analytics_uid=null,this.hapyak_analytics_sid=null),g.prototype=new o,new g}),define("analytics.ganalytics",["module","promise!configuration","analytics.integration","dao","base64","lodash.noconflict","logging"],function(e,t,n,i,r,a,o,s){"use strict";var l=null,c=t.analytics&&t.analytics.google||{};c.localDebug;function d(){this._state={},this._trackingIds=[],this.initialize(c),o.debug("[ganalytics.js] GoogleAnalyticsIntegration Created ")}function u(e,t,n){this.trackingId=e,this.trackerName=t||nullis.queueName="hapyak_ga_queue",this._createQueue(),this._createTracke&&a.each(e.setup,function(e){t._addTrackingId(e[1])})},l._addTrackingId=function(e){this._trackingIds.push(e)},l.setState=function(e,t,n){this._state[e]||(this._state[e]={}),this._state[e][t]=n},l.getState=function(e,t){return this._state[e]?this._state[e][t]:null},l.willTrack=function(e,t){var n,i;t&&"Embedded Editor"!==t.Context&&(t.instanceId?(n=" ("+t["Project ID"]+") "+(t["Project Title"]||""),t["Annotation Start Time"],i=(i=(i=t["Custom Event Data"])&&i.image)&&i.split&&i.split("_").join&&i.split("_").join(" "),"Player Action"===e&&"Controls"!==t.Type?this._push(t,n,t.Action):"Annotation Action"===e&&(t["Target Time"]||"contents"===t.Type&&t.Target!==t["Annotation ID"]?(this._push(t,n,"Navigation-Info","Chapter: "+t.Text),this._push(t,n,"Navigation")):t["Target Link"]||"External Click"===t.Action?(this._push(t,n,"Link-Info",t["Target Link"]||t.Target),this._push(t,n,"Link")):"Answer"===t.Action?(this._push(t,n,"Quiz-Info",t.Question+(t.Correct?" - (Correct)":" - (Incorrect)")),this._push(t,n,"Quiz")):"widget-user-sentiment"===t["Annotation Subtype"]&&i&&this._push(t,n,"User-Sentiment-Info",i))):o.error("Instance id missing from event properties"))},l.track=function(e,t){t=this.transformData(t),n.shouldTrack({include:c.include,exclude:c.exclude},e,t)&&this.willTrack(e,t)},l.transformData=function(e){var t=a.omit(e,["Annotation Types","Annotation Position","Annotation Coordinates","Partner Data","Gating","Pausing","Summary","Extension Source","Player Type","Rollup","Templates","excludeKeys"]);return t["Template IDs"]=a.pluck(e.Templates,"id"),t},l._initializeGA=function(e){var t=e["Project Title"],n=e["Video Source"],i=e["Video Source ID"],r=e["User ID"],a=e.Username,o=new u(this._trackingIds[0],"hapyak_ga_analytics_"+e.instanceId,c.localDebug);this.setState(e.instanceId,"gahlper",o),t&&o.set("Project",t),n&&o.set("Video Source",n),i&&o.set("Video Source ID",i),r&&o.set("User ID",r),a&&o.set("Username",a)},l._push=function(e,t,n,i,r){var a=this.getState(e.instanceId,"gahlper");a||this._initializeGA(e),150<(t="HapYak - "+t).length&&(t=t.substring(0,150)),n&&500<n.length&&(n=n.substring(0,500)),(i=i&&!isNaN(i)?"_"+i:i)&&500<i.length&&(i=i.substring(0,500)),r="number"==typeof r?Math.round(r):"string"==typeof r?parseInt(r,10):null,"Progress"!==e.Action&&(a=this.getState(e.instanceId,"gahlper"),e={hitType:"event",eventCategory:t,eventAction:n},i&&(e.eventLabel=i),r&&(e.eventValue=r),a.send(e))},u.prototype={_createQueue:function(){var e,t,n,i,r=this.debugGA?"https://wps://www.google-analytics.com/analytics.js";window[this.queueName]||(e=window,i=document,r=r,t=this.queueName,e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=+new Date,n=i.createElement("script"),i=i.getElementsByTagName("script")[0],n.async=1,n.src=r,i.parentNode.insertBefore(n,i))},_createTracker:function(){var e={cookieDomain:"auto",name:this.trackerName};window.parent!==window&&0!==(document.referrer||"").indexOf(window.location.origin)&&(e.cookieFlags="SameSite=None; Secure"),window[this.queueName]("create",this.trackingId,e)},_enqueue:function(e,t){window[this.queueName](e,t)},_buildCommand:function(e){return this.trackerName?[this.trackerName,e].join("."):e},send:function(e){var t=this._buildCommand("send");this.debug&&o.info("[h[instance="+this.trackerName+"] "+JSON.stringify(e,null,1)),this._enqueue(t,e)},set:function(e,t){var n=this._buildCommand("set"),i={};i[e]=t,this._enqueue(n,i)},toString:function(){return this}},new d}),define("utils.date",[],function(){"use strict";return{normalize:function(e,t){var n,i;if(e)return i=(e=e instanceof Date?e:new Date(e)).getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear(),t&&(12===t.timeFormat?i+=" "+(e.getHours()%12||12)+":"+((n=e.getMinutes())<10?"0"+n:n)+" "+(e.getHours()<12?"AM":"PM"):24===t.timeFormat&&(i+=" "+e.getHours()+":"+e.getMinutes())),i}}}),define("ember.hapyak",["lodash.extended.noconflict","logging","utils.date","ember.noconflict"],function(r,n,i,a,e){"use strict";var o=a.get,s=[].slice;function t(e,n){a.Hapyak.computed[e]=function(){var e=s.call(arguments),t=a.computed(function(){return n.apply(this,[function(e,t){for(var n={},i=0;i<t.length;i++)n[t[i]]=o(e,t[i]);return n}(this,e)])});return t.property.apply(t,e)}}return a.Hapyak||(a.Hapyak={}),a.Hapyak.Mixin||(a.Hapyak.Mixin={}),a.Hapyak.View||(a.Hapyak.View={}),a.Hapyak.computed||(a.Hapyak.computed={}),a.View&&!a.View.prototype.afterRenderEvent&&a.View.reopen({didInsertElement:function(){this._super(),a.run.scheduleOnce("afterRender",this,function(){this.get("isDestroying")||this.get("isDestroyed")||this.afterRenderEvent()})},afterRenderEvent:function(){}}),a.Handlebars.registerHelper("group",function(e){var t=e.data,n=e.fn,e=t.view,t=e.createChildView(a._MetamorphView,{context:o(e,"context"),template:function(e,t){return t.data.insideGroup=!0,n(e,t)}});e.appendChild(t)}),a.Handlebars.registerBoundHelper("join",function(e,t){t=t.hash.delimiter||", ";if((e&&e.length||0)&&"function"==typeof e.join)return e.join(t)}),a.Handlebars.registerBoundHelper("shortDate",function(e,t){var n;return void 0!==t.hash.time12?n=12:void 0!==t.hash.time24&&(n=24),i.normalize(e,{timeFormat:n})}),a.Handlebars.registerBoundHelper("pluralize",function(e,t){var n="other",i="others";return e=r.isNaN(+e)?0:+e,void 0!==t.hash.single&&t.hash.single&&(n=t.hash.single,i=void 0!==t.hash.plural&&t.hash.plural?t.hash.plural:n+"s"),1===e?new a.Handlebars.SafeString('<span class="number">'+e+"</span> "+n):new a.Handlebars.SafeString('<span class="number">'+e+"</span> "+i)}),a.Handlebars.registerHelper("formatNumber",function(e,t){e=a.Handlebars.get(this,e,t);return e=e&&e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),a.Handlebars.registerBoundHelper("userGrade",function(e){var e=e.get("tracks"),t=0,n=0;return e.forEach(function(e){e.get("questions").forEach(function(e){t+=+e.correct,n++})}),Math.round(t/n*100)+"% ("+t+"/"+n+")"}),a.Handlebars.registerBoundHelper("trackGrade",function(e){vart,n++}),Math.round(t/n*100)+"% ("+t+"/"+n+")"}),a.Hapyak.Mixin.TogglePropertyAction=a.Mixin.create({actionsnction(this.toggleProperty)&&this.toggleProperty(e)}}}),a.Hapyak.Mixin.Focusable=a.Mixin.create({focused:!1,focusIn:function(){this.set("focused",!0)},focusOut:function(){this.set("focused",!1)}}),a.Hapyak.Mixin.Validable=a.Mixin.create({classNameBindings:["isValidClass"],attributeBindings:["label"],isReady:!1,validator:null,destObject:null,object:null,property:null,isValidating:!1,isValidated:!1,isValid:!0,message:"",value:"",required:!1,skip:!1,isValidClass:a.computed(function(){var e=this.get("invalidClass")||"has-error",t=this.get("validClass")||null;return this.get("isValid")?t:e}).property("isValid"),didInsertElement:function(){this._super();var e=this.get("validator.validations");this.bindProperty(),e&&e.pushObject(this),this.set("isReady",!0),this.get("required")&&this.onValueChange()},willDestroyElement:function(){var t=this,e=this.get("validator.validations");this.set("isReady",!1),e&&e.length&&this.set("validator.validations",a.A(a.A(e).reject(function(e){return t===e}))),this.unbindProperty()},didUpdatePropertyValue:function(e){this.updaget("destObject")||this.get("object"),t=this.get("property"),n=this,e=e||this;t&&(this.didUpdatePropertyValue(e.get(t)),this.objectPropertyObserver=function(){n.didUpdatePropertyValue(e.get(t))},e.addObserver(t,this.objectPropertyObserver))},unbindProperty:function(){var e=this.get("destObject")||this.get("object"),t=this.get("property"),e=e||this;t&&this.objectPropertyObserver&&e.removeObserver(t,this.objectPropertyObserver)},onFocusedChange:a.observer(function(){var e=this.get("focused");this.get("isReady")?(this.set("isValidating",e),e||this.onValueChange()):this.set("isValidating",!1)},"focused"),beforePropertyChange:a.beforeObserver(function(){this.unbindProperty()},"property"),onPropertyChange:a.observer(function(){this.bindProperty()},"property"),onValueChange:a.observer(function(){var n,i;this.get("isReady")&&(i=this.get("value"),i=(n=this).willValidate(i),this.validate(i,function(e,t){n.isDestroyed||(n.set("isValidated",!r.isEmpty(i)),i===n.get("value")&&(n.set("isValid",e),n.set("message",!e&&t||"")))}))},"value"),willValidate:function(e){return e},validate:function(e,t){var n;this.get("isReady")&&(n=r.str.isBlank(e),!this.get("skip")&&this.get("required")&&n?t(!1,this.get("label")+" is required"):t(!n||""===e),this.didValidate(e))},didValidate:function(e){var t,n=this.get("property");n&&((t=this.get("object")||this).get(n)!==e?t.set(n,e):t.notifyPropertyChange(n))},updateValue:function(e){var t;this.get("isDestroying")||this.get("isDestroyed")||(t=this.get("value"),(r.isNumber(t)||r.isString(t))&&(t=t.toString()),r.str.isBlank(t)&&(t=""),(r.isNumber(e)||r.isString(e))&&(e=e.toString()),t!==(e=r.str.isBlank(e)?"":e)?(n.dev('Value for "'+this.get("property")+'" updated'),this.set("value",e)):r.str.isBlank(e)&&this.set("value",""))}}),a.Hapyak.Mixin.Validator=a.Mixin.create({isValidating:!1,validations:a.A(),isValid:a.computed(function(){var e=this.get("validations");return!e||!e.get("length")||e.every(function(e){return e.get("isValid")})}).property("validations.@each.isValid"),isValidated:a.computed(function(){var e=this.get("validations");return!e||!e.get("length")||e.every(function(e){return e.get("isValidated")})}).property("validations.@each.isValidated")}),a.Hapyak.View.ButtonView=a.View.extend({tagNamvar t,n;for(t in e)if(e.hasOwnProperty(t)&&(n=e[t],!r.isString(n)||!r.str.trim(n).length))return!1;return!0}),t("obj",function(e){var t,n={};for(t in e)e.hasOwnProperty(t,F,c,s,B,d,u,U,W,p,$,h,Y,G,e,f,K,m,v,Q,X,g,J,Z,y,b,ee,w,te,ne,ie,re,E,ae,k,oe,se,x,C,le,ce,de,_,ue,pe,T,he,fe,me,ve,S,ge,ye;function A(e){return function(){return this[e].apply(this,arguments)}}e=Ember.Namespace.create({VERSION:"1.0.0-beta.5"}),"undefined"!=typeof window&&(window.DS=e),Ember.libraries&&Ember.libraries.registerCoreLibrary("Ember Data",e.VERSION),a=Ember.get,Ember.set,R=Ember.isNone,DS.JSONSerializer=Ember.Object.extend({primaryKey:"id",applyTransforms:function(e,n){return e.eachTransformedAttribute(function(e,t){t=this.transformFor(t);n[e]=t.deserialize(n&this.applyTransforms(e,tibute(function(e,t){this.serializeAttribute(n,i,e,t)},this),n.eachRelationship(function(e,t){"belongsTo"===t.kind?this.serializeBelongsTo(n,i,t):"hasMany"===t.kind&&this.serializeHasMany(n,i,t)},this),i},serializeAttribute:function(e,t,n,i){var r=a(this,"attrs"),e=a(e,n),i=i.type;i&&(e=this.transformFor(i).serialize(e)),t[n=r&&r[n]||(this.keyForAttribute?this.keyForAttribute(n):n)]=e},serializeBelongsTo:function(e,t,n){var i=n.key,r=a(e,i),i=this.keyForRelationship?this.keyForRelationship(i,"belongsTo"):i;R(r)?t[i]=r:t[i]=a(r,"id"),n.options.polymorphic&&this.serializePolymorphicType(e,t,n)},serializeHasMany:funcany"!==n||(t[i]=a(e,i).mapBy("id"))},serializePolymorphicType:Ember.K,extract:function(e,t,n,i,r){return this.extractMeta(e,t,n),this["extract"+r.charAt(0).toUpperCase()+r.substr(1)](e,t,n,i,r)},extractFindAll:A("extractArray"),extractFindQuery:A("extractArray"),extractFindMany:A("extractArray"),extractFindHasMany:A("extractArray"),extractCreateRecord:A("extractSave"),extractUpdateRecord:A("extractSave"),extractDeleteReSingle"),extextractSingle:function(e,t,n){return this.normalize(t,n)},extractArray:function(e,t,n){return this.normalize(t,n)},extractMeta:function(e,t,n){n&&n.meta&&(e.metaForType(t,n.meta),delete n.meta)},transformFor:function(e,t){var n=this.container.lookup("transform:"+e);retur.Stringapter.extend({ge:function(eturn o(e,"attributes"e){return this.getattributeLimit)return!on(e){i.push(e)w:e.get("isNew"),isModified:e.get("isDirty")&&!e.get("isNew"),isClean:!e.get("isDirty")}},getRecordColor:function(e){var t="black";return e.get("isNet="blue"),t},observeRecord:func.A(["id","ion(e){t.push(e)}),t.forEach(function(e){function t(){i(a.wrapRecord(n))}Ember.addObserver(n,e,t),r.push(function(){Ember.removeObserver(n,e,t)})});return function(){r.forEach(function(e){e()})}}}),DS.Transform=Ember.Object.extend({serialize:Ember.required(),deserialize:Ember.required()}),DS.BooleanTransform=DS.Transform.extend({deserialize:function(e){var t=typeof e;return"boolean"==t?e:"string"==t?null!==e.match(/^true$|^t$|^1$/i):"number"==t&&1===e},serialize:function(e){return Boolean(e)}}),DS.DateTransform=DS.Transform.extend({ e;return"string"==t?new Date(Ember.Date.parse(e)):"number"==t?new Date(e):null==e?e:null},serialize:function(e){var t,n,i,r,a,o,s;return e instanceof Date?(t=function(e){return e<10?"0"+e:""+e},n=e.getUTCFullYear(),i=e.getUTCMonth(),r=e.getUTCDate(),a=e.getUTCDay(),o=e.getUTCHours(),s=e.getUTCMinutes(),e=e.getUTCSeconds(),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a]+", "+t(r)+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][i]+" "+n+" "+t(o)+":"+t(s)+":"+t(e)+" GMT"):null}}),n=Ember.isEmpty,DS.NumberTransform=DS.Transform.extend({deserialize:function(e){retion(e){return n(e)?null:Number(e)}}),i=Ember.isNone,DS.StringTransform=DS.Transform.extend({deserialize:function(e){return i(e)?null:String(e)},serialize:function(e){return i(e)?null:String(e)}}),Ember.set,Ember.onLoad("Ember.Application",function(e){e.initializer({name:"store",initialize:function(e,t){t.register("store:main",t.Store||DS.Store),t.register("serializer:_default",DS.JSONSerializer),t.register("serializer:_rest",DS.RESTSerializer),t.register("adapter:_rest",DS.RESTAdapter),e.lookup("store:main")}}),e.initializer({name:"transforms",before:"store",initialize:function(e,t){t.register("transform:boolean",DS.BooleanTransform),t.register("trDS.NumberTransform),t.register("transform:string",DS.StringTransform)}}),e.initializer({name:"dataAdapter",before:"store",initialize:function(e,t){t.register("dataAdapter:main",DS.DebugAdapter)}}),e.initializer({name:"injectStore",before:"store",initialize:function(e,t){t.inject("controller","store","store:main"),t.inject("rout];++a)n[r]=+n[r]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,"Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])}else t=H?H(e):NaN;return t},!0!==Ember.EXTEND_PROTOTYPES&&!Ember.EXTEND_PROTOTYPES.Date||(Date.parse=Ember.Date.parse);var P=Ember.get,be=(Ember.set,DS.RecordArray=Ember.ArrayProxy.extend(Ember.Evented,{type:null,content:null,isLoaded:!1,isUpdating:!1,store:null,objectAtContent:function(e){return P(this,"t;P(this,"isUpdating")||(e=P(this,"store"),t=P(this,"type"),e.fetchAll(t,this))},addRecord:function(e){P(this,"content").addObject(e)},removeRecord:function(e){P(this,"content").removeObject(e)},save:function(){var e="DS: RecordArray#save "+P(this,"type"),e=Ember.RSVP.all(this.invoke("save"),e).then(function(e){return Ember.A(e)},null,"DS: RecordArray#save apply Ember.NativeArray");return DS.PromiseArray.create({promise:e})}}),r=Ember.get,DS.FilteredRecordArray=DS.RecordArray.exterow new Error("The result of a le.")},updateFilter:Ember.observer(function(){r(this,"manager").updateFilter(this,r(this,"type"),r(this,"filterFunction"))},"filterFunction")}),Ember.get);function I(e){return null==e?null:e+""}function we(c,e,d,u){return e.eachRelationship(function(e,t){if(d.links&&d.links[e])u&&t.options.async&&(u._relationships[e]=null);else{var n=t.kind,i=d[e];if(null!=i)if("belongsTo"===n)Ee(c,d,e,t,i);else if("hasMany"===n){for(var r=c,a=t,o=i,s=0,l=o.length;s<l;s++)Ee(r,o,s,a,o[s]);n=e,t=i,(e=u)&&t.pushObjects(e.get(n).filterBy("isNew"))}}}),d}function Ee(e,t,n,i,r){var a,o;d(r)||r in?(a=n,o=t,o=(i=i).options.polymorphic?o[a+"Type"]:i.type,t[n]=e.recordForId(o,r)):"object"==typeof r&&(t[n]=e.recordForId(r.type,r.id)))}function L(e){return DS.PromiseArray.create({promise:e})}function ke(e,t,n){return e.lookup("serializer:"+t)||e.lookup("serializer:application")||e.lookup("serializer:"+n)||e.lookup("serializer:_default")}function D(e,t){var n=e.serializer,i=e.defaultSerializer,e=e.container;return n=null==(n=e&&void 0===n?ke(e,t.typeKey,i):n)?{extract:function(e,t,n){return n}}:n}function xe(e,t,n,i){var r=e.find(t,n,i),a=D(e,n);return p(r,"DS: Handle Adapter#find of "+n+" with id: "+i).then(function(e){return Ember.assert("You made a request for a "+n.typeKalue?(delete e._attributes[t.name],e.send("propertyWasReset",t.name)):t.value!==t.oldValue&&e.send("becomeDirty"),e.updateRecordArraysLater()}function Ce(e,t){for(var n in t)e[n]=t[n];return e}function _e(e){return Ce(function e(t){var n,i,r={};for(i in t)n=t[i],r[i]=n&&"object"==typeof n?e(n):n;return r}(G),e)}function M(e){return"object"==typeof e&&(!e.then||"function"!=typeof e.then)}function Te(e,t,n,i){var r,a,o=e._relationships;return o[t]||(r=ne(e,"data"),a=ne(e,"store"),o=o[t]=i.call(e,a,r),re(o,{owner:e,name:t,isPolymorphic:n.polymorphic}))}function Se(e,t){var a,o,r={type:e,isRelationship:!0,options:t=t||{},kind:"hasMany"};return t.async?(a=t,o=r,Ember.computed(function(i,e){var r,t=this._relationships[i],n=(t||(r=Ember.RSVP.defer("DS: Async hasMany "+this+" : "+i),t=Te(this,i,a,function(e,t){var n=t.links&&t.links[i],n=n?e.findHasMany(this,n,o,r):e.findMany(this,t[i],o.type,r);return ie(n,"promise",r.promise),n})),t.get("promise").then(function(){return t},null,"DS: Async hasMany records received"));return DS.PromiseArray.create({promise:n})}).property("data").meta(o)):Ember.computed(function(i,e){return Te(this,i,t,function(e,t){var n=t[i];return Ember.assert("You looked up the '"+i+"' relationship on '"+this+"' but some of the associated records were not loaded. Either make sure they are all loaded together with the parent record, or specify that the relationship is async (`DS.hasMany({ asynset,DS.AdapterPopulatedRecordArray=DS.RecordArray.extend({query:null,replace:function(){var e=be(this,"type").toString();throw new Error("The result of a server query (on "+e+") is immutable.")},load:function(e){var t=be(this,"store"),n=be(this,"type"),e=t.pushMany(n,e),t=t.metadataFor(n);thLoad")}}),l=Ember.get,z=Ember.set,F=Ember.EnumerableUtils.map,DS.ManyArray=DS.RecordArray.extend({init:function(){this._super.apply(this,arguments),this._changesToSync=Ember.OrderedSet.create()},name:null,owner:null,isPolymorphic:!1,isLoaded:!1,promise:null,loadingRecordsCount:function(e){this.loadingRecordsCount=e},loadedRecord:function(){this.loadingRecordsCount--,0===this.loadingRecordsCount&&(z(this,"isLoaded",!0),this.trigger("didLoad"))},fetch:function(){var e=l(this,"content"),t=l(this,"store"),n=l(this,"owner"),i=Ember.RSVP.defer("DS: ManyArray#fetch "+l(this,"type")),e=e.filterProperty("isEmpty",!0);t.fetchMany(e,n,i)},replaceContent:function(e,t,n){n=F(n,function(e){return Ember.assert("You cands to this relationship (only '"+this.type.typeKey+"' allowed)",!this.type||e instanceof this.type),e},this),this._super(e,t,n)},arrangedContentDidChange:function(){Ember.run.once(this,"fetch")},arrayContentWillChange:function(e,t,n){var i=l(this,"owner"),r=l(this,"name");if(!i._suspendedRelationships)for(var a=e;a<e+t;a++){var o=l(this,"content").objectAt(a),o=DS.RelationshipChange.createChange(i,o,l(this,"store"),{parentType:i.constructor,changeType:"remove",kind:"hasMany",key:r});this._changesToSync.add(o)}return this._super.apply(this,arguments)},arrayContentDidChange:function(e,t,n){this._super.apply(this,arguments);var i=l(this,"owner"),r=l(this,"name"),a=l(this,"store");if(!i._suspendedRelationships){for(var o=e;o<e+n;o++){var s=l(this,"content").objectAt(o),s=DS.RelationshipChange.createChange(i,s,a,{parentType:i.constructor,changeType:"add",kind:"hasMany",key:r});s.hasManyName=r,this._changesToSync.add(s)}this._changesToSync.forEach(function(e){e.sync()}),this._changesToSync.clear()}},createRecord:function(e){var t=l(this,"owner"),t=l(t,"store"),n=l(this,"type");return Ember.assert("You cannot add '"+n.typeKey+"' records to this polymorphic relationship.",!l(this,"isPolymorphic")),t=t.createRecord.call(t,n,e),this.pushObject(t),t}}),c=Ember.get,s=Ember.set,B=Ember.run.once,d=Ember.isNone,u=Ember.EnumerableUtils.forEach,U=Ember.EnumerableUtils.indexOf,W=Ember.EnumerableUtils.map,p=Ember.RSVP.resolve,$=Ember.copy,DS.Store=Ember.Object.extend({init:function(){this.typeMaps={},this.recordArrayManager=DS.RecordArrayManager.create({store:this}),this._relationshipChanges={},this._pendingSave=[]},adapter:"_rest",serialize:function(e,t){return this.serializerFor(e.constructor.typeKey).serialize(e,t)},defaultAdapter:Ember.computed("adapter",function(){var e=c(this,"adapter");return Ember.assert("You tried to set `adapter` property to an instance of `DS.Adapter`, where it should be a name or a factory",!(e instanceof DS.Adapter)),"string"==typeof e&&(e=this.container.lookup("adapter:"+e)||this.container.lookup("adapter:application")||this.container.lookup("adapter:_rest")),e=DS.Adapter.detect(e)?e.create({container:this.container}):e}),createRecord:function(e,t){e=this.modelFor(e),t=$(t)||{},d(t.id)&&(t.id=this._generateId(e)),t.id=I(t.id);e=this.buildRecord(e,t.id);return e.loadedData(),e.setProperties(t),e},_generateId:function(e){e=this.adapterFor(e);return e&&e.generateIdForRecord?e.generateIdForRecord(this):null},deleteRecord:function(e){e.deleteRecord()},unloadRecord:function(e){e.unloadRecord()},find:function(e,t){return void 0===t?this.findAll(e):"object"===Ember.typeOf(t)?this.findQuery(e,t):this.findById(e,I(t)omiseObject.create({promise:n})},findByIds:function(t,e){var n=this;return L(Ember.RSVP.all(W(e,function(e){return n.findById(t,e)})).then(Ember.A,null,"DS: Store#findByIds of "+t+" complete"))},fetchRecord:function(e){var t,n,i;return d(e)?null:e._loadingPromise||(c(e,"isEmpty")?(t=e.constructor,n=c(e,"id"),i=this.adapterFor(t),Ember.assert("You tried to find a record bucord but your adapter (for "+t+") does not implement 'find'",i.find),i=xe(i,this,t,n),e.loadingData(i),i):null)},getById:function(e,t){return this.hasRecordForId(e,t)?this.recordForId(e,t):null},reloadRecord:function(e){var t=e.constructor,n=this.adapterFor(t),e=c(e,"id");return Ember.assert("You cannot reload a record without an ID",e),Ember.assert("You tried to reload a record but you have no adapter (for "+t+")",n),Ember.assert("You tried to reload a refind`",n.find),xe(n,this,t,e)},fetchMany:function(e,o,s){var t;e.length&&(t=Ember.MapWithDefault.create({defaultValue:function(){return Ember.A()}}),u(e,function(e){t.get(e.constructor).push(e)}),u(t,function(e,t){var n,i,r,t=t.mapProperty("id"),a=this.adapterFor(e);Ember.assert("You tried to load many records but you have no adapter (for "+e+")",a),Ember.assert("You tried to load many records but your adapter does not implement `findMany`",a.findMany),s.resolve((n=this,i=e,e=t,e=(a=a).findMany(n,i,t,o),r=D(a,i),p(e,"DS: Handle Adapter#findMany of "+i).then(function(e){e=r.extract(n,i,e,null,"findMany"),Ember.assert("The response from a findMany must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e)),n.pushMany(i,e)},null,"DS: Extract payload of "+i)))},this))},hasRecordForId:function(e,t){return t=I(t),e=this.modelFor(e),!!this.typeMapFor(e).idToRecord[t]},recordForId:function(e,t){return e=this.modelFor(e),t=I(t),this.typeMapFor(e).idToRecord[t]||this.buildRecord(e,t)},findMany:function(e,t,n,i){n=this.recordArrayManager.createManyArray(n,t);return u(r,function(e){e.loadingData()}),a.loadingRecordsCount=r.length,r.length?(u(r,function(e){this.recordArrayManager.registerWaitingRecordArray(e,a)},this),this.fetchMany(r,e,i)):(i&&i.resolve(),a.set("isLoaded",!0),Ember.run.once(a,"trigger","didLoad")),a},findHasMany:function(e,t,n,i){var r,a,o,s,l=this.adapterFor(e.constructor),c=(Ember.assert("You tried to load a hasMany relationship but you have no adapter (for "+e.constructor+")",l),Ember.assert("You tried to load a hasMany relationship from a specified `link` in the original payload but your adapter does not implement `findHasMany`",l.findHasMany),this.recordArrayManager.createManyArray(n.type,Ember.A([])));return i.resolve((r=this,a=e,i=t,o=n,i=(e=l).findHasMany(r,a,t,o),s=D(e,o.type),p(i,"DS: Handle Adapter#findHasMany of "+a+" : "+o.type).then(function(e){e=s.extract(r,o.type,e,null,"findHasMany"),Ember.assert("The response from a findHasMany must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e));e=r.pushMany(o.type,e);a.updateHasMany(o.key,e)},null,"DS: Extract payload of "+a+" : hasMany "+o.type))),c},findBelongsTo:function(e,t,n,i){var r,a,o,s=this.adapterFor(e.constructor);Ember.assert("You tried to load a belongsTo relationship but you have no adapter (for "+e.constructor+")",s),Ember.assert("You tried to load a belongsTo relationship from a specified `link` in the original payload but your adapter does not implement `findBelongsTo`",s.findBelongsTo),i.resolve((r=this,i=e,e=t,a=n,e=(n=s).findBelongsTo(r,i,t,a),o=D(n,a.type),p(e,"DS: Handle Adapter#findBelongsTo of "+i+" : "+a.type).then(function(e){e=o.extract(r,a.type,e,null,"findBelongsTo");e=r.push(a.type,e);return e.updateBelongsTo(a.key,e),e},null,"DS: Extract payload of "+i+" : "+a.type)))},findQuery:function(e,t){e=this.modelFor(e);var n,i,r,a,o=this.recordArrayManager.createAdapterPopulatedRecordArray(e,t),s=this.adapterFor(e),l=Ember.RSVP.defer("DS: Store#findQuery "+e);return Ember.assert("You tried to load a query but you have no adapter (for "+e+")",s),Ember.assert("You tried to load a query but your adapter does not implement `findQuery`",s.findQuery),l.resolve((n=this,i=e,e=t,r=o,e=(o=s).findQuery(n,i,t,r),a=D(o,i),p(e,"DS: Handle Adapter#findQuery of "+i).then(function(e){return e=a.extract(n,i,e,null,"findQuery"),Ember.assert("The response from a findQuery must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e)),r.load(e),r},null,"DS: Extract payload of findQuery "+i))),L(l.promise)},findAll:function(e){return e=this.modelFor(e),this.fetchAll(e,this.all(e))},fetchAll:function(e,t){var n,i,r,a=this.adapterFor(e),o=this.typeMapFor(e).metadata.since;return s(t,"isUpdating",!0),Ember.assert("You tried to load all records but you have no adapter (for "+e+")",a),Ember.assert("You tried to load all records but your adapter does not implement `findAll`",a.findAll),L((n=this,i=e,t=o,t=(e=a).findAll(n,i,o),r=D(e,i),p(t,"DS: Handle Adapter#findAll of "+i).then(function(e){return e=r.extract(n,i,e,null,"findAll"),Ember.assert("The response from a findAll must be an Array, not "+Ember.inspect(e),"array"===Ember.typeOf(e)),n.pushMany(i,e),n.didUpdateAll(i),n.all(i)},null,"DS: Extract payload of findAll "+i)))},didUpdateAll:function(e){e=this.typeMapFor(e).findAllCache;s(e,"isUpdating",!1)},all:function(e){e=this.modelFor(e);var t=this.typeMapFor(e),n=t.findAllCache;return n||(n=this.recordArrayManager.createRecordArray(e),t.findAllCache=n)},unloadAll:function(e){e=this.modelFor(e);for(var t,e=this.typeMapFor(e),n=e.records;t=n.pop();)t.unloadRecord();e.findAllCache=null},filter:function(e,t,n){3===arguments.length?r=this.findQuery(e,t):2===argucordArray(e,ilter of "+e))}e,t)&&!c(thisr(e).metadata},dataWasUpdated:function(e,t){this.recordArrayManager.recordDidChange(t)},scheduleSave:function(e,t){e.adapterWillCommit(),this._pendingSave.push([e,t]),B(this,"flushPendingSave")},flushPendingSave:function(){var e=this._pendingSave.slice();this._pendingSave=[],u(e,function(e){var t,n,i,r,a,o=e[0],e=e[1],s=this.adapterFor(o.constructor),l=c(o,"isNew")?"createRecord":c(o,"isD(e=s,t=this,n=l,r=(i=o).constructor,s=e[n](t,r,i),a=D(e,r),Ember.assert("Your adapter's '"+n+"' method must return a promise, but it returned "+s,function(e){return e&&"function"==typeof e.then}(s)),s.then(function(e){return e=e&&a.extract(t,r,e,c(i,"id"),n),t.didSaveRecord(i,e),i},function(e){throw e instanceof DS.InvalidError?t.recordWasInvalid(i,e.errors):t.recordWasError(i,e),e},"DS: Extract and notify about "+n+" completion of "+i)))},this)},didSaveRecord:function(e,t){t&&(t=we(this,e.constructor,t,e),this.updateId(e,t)),e.adapterDidCommit(t)},recordWasInvalid:function(e,t){e.adapterDidInvalidate(t)},recordWasError:function(e){e.adapterDidError()},updateId:function(e,t){var n=c(e,"id"),t=I(t.id);Ember.assert("An adapter cannot assign a new id to a record that already has an id. "+e+" had id: "+n+" and you tried to update it with "+t+". This likely happened because your server returned data in response to a find or update that had a different id than the one you sent.",null===n||t===n),this.typeMapFor(e.constructor).idToRecord[t]=e,s(e,"id",t)},typeMapFor:function(e){var t=c(this,"typeMaps"),e=Ember.guidFor(e),n=t[e];return n||(t[e]=n={idToRecord:{},records:[],metadata:{}}),n},_load:function(e,t,n){var i=I(t.id),e=this.recordForId(e,i);return e.setupData(t,n),this.recordArrayManager.recordDidChange(e),e},modelFor:function(e){if("string"==typeof e){var t,n=this.container.normalize("model:"+e);if(!(t=this.container.lookupFactory(n)))throw new Ember.Error("No model was found for '"+e+"'");t.typeKey=n.split(":",2)[1]}else t=e;return t.store=this,t},push:function(e,t,n){return Ember.assert("You must include an `id` in a hash passed to `push`",null!=t.id),e=this.modelFor(e),t=we(this,e,t),this._load(e,t,n),this.recordForId(e,t.id)},pushPayload:function(e,t){var n;t?n=this.serializerFor(e):(t=e,n=(e=this.container).lookup("serializer:application")||e.lookup("serializer:_default"),Ember.assert("You cannot use `store#pushPayload` without a type unless your default serializer defines `pushPayload`",n.pushPayload)),n.pushPayload(this,t)},update:function(e,t){return Ember.assert("You must include an `id` in a hash passed to `update`",null!=t.id),this.push(e,t,!0)},pushMany:function(t,e){return W(e,function(e){return this.push(t,e)},this)},metaForType:function(e,t){e=this.modelFor(e),Ember.merge(this.typeMapFor(e).metadata,t)},buildRecord:function(e,t,n){var i=this.typeMapFor(e),r=i.idToRecord,e=(Ember.assert("The id "+t+" has already been used with another record of type "+e.toString()+".",!t||!r[t]),e._create({id:t,store:this,container:this.container}));return n&&e.setupData(n),t&&(r[t]=e),i.records.push(e),e},dematerializeRecord:function(e){var t=e.constructor,t=this.typeMapFor(t),n=c(e,"id"),n=(e.updateRecordArrays(),n&&delete t.idToRecord[n],U(t.records,e));t.records.splice(n,1)},addRelationshipChangeFor:function(e,t,n,i,r){e=e.clientId,t+=i,i=this._relationshipChanges;e in i||(i[e]={}),n in i[e]||(i[e][n]={}),t in i[e][n]||(i[e][n][t]={}),i[e][n][t][r.changeType]=r},removeRelationshipChangeFor:function(e,t,n,i,r){var e=e.clientId,n=n&&n.clientId,a=this._relationshipChanges,t=t+i;e in a&&n in a[e]&&t in a[e][n]&&delete a[e][n][t][r]},relationshipChangePairsFor:function(e){var t=[];if(e){var n,i=this._relationshipChanges[e.clientId];for(n in i)if(i.hasOwnProperty(n))for(var r in i[n])i[n].hasOwnProperty(r)&&t.push(i[n][r])}return t},adapterFor:function(e){var t,n=this.container;return(t=n?n.lookup("adapter:"+e.typeKey)||n.lookup("adapter:application"):t)||c(this,"defaultAdapter")},serializerFor:function(e){e=this.modelFor(e);var t=this.adapterFor(e);return ke(this.container,e.typeKey,t&&t.defaultSerializer)}}),DS.PromiseArray=Ember.ArrayProxy.extend(Ember.PromiseProxyMixin),DS.PromiseObject=Ember.ObjectProxy.extend(Ember.PromiseProxyMixin),h=Ember.get,Y=Ember.set,G={initialState:"uncommitted",isDirty:!0,uncommitted:{didSetProperty:O,propertyWasReset:function(e,t){var n,i=!1;for(n in e._attributes){i=!0;break}i||e.send("rolledBack")},pushedData:Ember.K,becomeDirty:Ember.K,willCommit:function(e){e.transitionTo("inFlight")},reloadRecord:function(e,t){t(h(e,"store").reloadRecord(e))},rolledBack:function(e){e.transitionTo("loaded.saved")},bSaving:!0,didSetProperty:O,becomeDirty:Ember.K,pushedData:Ember.K,willCommit:Ember.K,didCommit:function(e){var t=h(this,"dirtyType");e.transitionTo("saved"),e.send("invokeLifecycleCallbacks",t)},becameInvalid:function(e){e.transitionTo("invalid"),e.send("invokeLifecycleCallbacks")},becameError:funer("becameError",e)}},invalid:{isValid:!1,deleteRecord:function(e){e.transitionTo("deleted.uncommitted"),e.clearRelationships()},didSetProperty:function(e,t){h(e,"errors").remove(t.name),O(e,t)},becomeDirty:Ember.K,rolledBack:function(e){h(e,"errors").clear()},becameValid:function(e){e.transitionTo("uncommitted")},invokeLifecycleCallbacks:function(e){e.triggerLater("becameInvalid",e)}}},(e=_e({dirtyType:"created",isNew:!0})).uncommitted.rolledB.deleteRecord=function(e){e.clearRelationships(),e.transitionTo("deleted.saved")},e.uncommitted.rollback=function(e){G.uncommitted.rollback.apply(this,arguments),e.transitionTo("deleted.saved")},e=function e(t,n,i){for(var r in(t=Ce(n?Ember.create(n):{},t)).parentState=n,t.stateName=i,t)t.hasOwnProperty(r)&&"parentState"!==r&&"stateName"!==r&&"object"==typeof t[r]&&(t[r]=e(t[r],t,i+"."+r));return t}({isEmpty:!(g.uncommitted.deleteRecord=function(e){e.transitionTo("deleted:!1,isDirty:!1,isSaving:!1,isDeleted:!1,isNew:!1,isValid:!0,rolledBack:Ember.K,propertyWasReset:Ember.K,empty:{isEmpty:!0,loadingData:function(e,t){e._loadingPromise=t,e.transitionTo("loading")},loadedData:function(e){e.transitionTo("loaded.created.uncovers(function(){e.notifyPropertyChange("data")})},pushedData:function(e){e.transitionTo("loaded.saved"),e.triggerLater("didLoad")}},loading:{isLoading:!0,exit:function(e){e._loadingPromise=null},pushedData:function(e){e.transitionTo("loaded.saved"),e.triggerLater("didLoad"),Y(e,"isError",!1)},becameError:function(e){e.triggerLater("becameError",e)},notFound:function(e){e.transitionTo("empty")}},loaded:{initialState:"saved",isLoaded:!0,saved:{setup:function(e){var t,n=e._attributes,i=!1;for(t in n)if(n.hasOwnProperty(t)){i=!0;break}Data:Ember.K,function(e){e"store").rommitted"),e.clearRelationships()},unloadRecord:function(e){e.clearRelationships(),e.transitionTo("deleted.saved")},didCommit:function(e){e.send("invokeLifecycleCallbacks",h(e,"lastDirtyType"))},notFound:Ember.K},created:e,updated:g},deleted:{initialState:"uncommitted",dirtyType:"deleted",isDeleted:!0,isLoaded:!0,isDirty:!0,setup:function(e){e.updateRecordArrays()},uncommitted:{willCommit:function(e){e.transitionTo("eRecord:Embeing:!0,willCommit:Ember.Ksend("invokeLifecycleCallater("becameError",e)}},saver("didDelete",e),e.triggerLater("didCommit",e)}}},invokeLifecycleCallbacks:function(e,t){"created"===t?e.triggerLater("didCreate",e):e.DS.RootState=e,f=Ember.get,K=Ember.isEmpty,DS.Errors=Ember.Object.extend(Ember.Enumerable,Ember.Evented,{registerHandlers:function(e,t,n){this.on("becameInvalid",e,t),this.on("becameValid",e,n)},errorsByAttributeName:Ember.reduceComputed(ult.create({tion(e,t){return e.get(t.attribute).pushObject(t),e},removedItem:function(e,t){return e.get(t.attribute).removeObject(t),e}}),errorsFor:function(e){return f(this,"errorsByAttributeNamessage"),content:Ember.computed(function(){return Ember.A()}),unknownProperty:function(e){e=this.errorsFor(e);,"isEmpty");t=this._findOrCreateMessages(e,t),f(this,"content").addObjects(t),this.notifyPpty")&&this.trigger("becameInvalid")},_findOrCreateMessages:function(t,e){var n=this.errorsFor(t);return Ember.makeArray(e).map(function(e){return n.findBy("message",e)||{attribute:t,message:e}})},remove:function(e){var t;f(this,"isEmpty")||Contigger("becameValid"))},clear:function(){f(this,"isEmpty")||(f(this,"content").clear(),this.enumerableContentDidChange(),this.trigger("becameValid"))},has:function(e){return!K(this.errorsFor(e))}}),m=Ember.get,v=Ember.set,Q=Ember.merge,X=Ember.run.once,g=Ember.computed("currentState",function(e,t){return m(m(this,"currentState"),e)}).readOnly(),DS.Model=Ember.Object.extend(Ember.Evented,{isEmptted:g,isNew:g,isValid:g,dirtyType:g,isError:!1,isReloading:!1,clientId:null,id:null,transaction:null,currentState:null,errors:null,serialize:function(e){return m(this,"store").serialize(this,e)},toJSON:function(e){return DS.JSONSeis,e)},didLoad:Ember.K,didUpdate:Ember.K,didCreate:Ember.K,didDelete:Ember.K,becameInvalid:Ember.K,becameError:Ember.K,data:Ember.computed(function(){return this._data=this._data||{},this._data}).property(),_data:null,init:function(){v(this,"currentState",DS.RootState.empty);var e=DS.Errors.create();e.registerHandlers(this,function(){this.send("becameInvalid")},function(){this.send("becameValid")}),v(this,"errrs=[],this._data={},this._attributes={},this._inFlightAttributes={},this._relationships={}},send:function(e,t){var n=m(this,"currentState");return n[e]||this._unhandledEvent(n,e,t),n[e](this,t)},transitionTo:function(e){for(var t=e.split(".",1),n=m(this,"currentState");n.exit&&n.exit(this),!(n=n.parentState).hasOwnProperty(t););for(var i=e.split("."),r=[],a=[],o=0,s=i.length;o<s;o++)(n=n[i[o]]).enter&&a.push(n),n.setup&&r.push(n);for(o=0,s=a.length;o<s;o++)a[o].enter(this);for(v(this,"currentState",n),o=0,s=r.length;o<s;o++)r[o].setup(this);this.updateRecordArraysLater()},_unhandledEvent:function(e,t,n){t+String(thishrow void 0!==n&&(t+="Called with "+Ember.inspect(n)+"."),new Ember.Error(t)},withTransaction:function(e){var t=m(this,"transaction");t&&e(t)},loadingData:function(e){this.send("loadingData",e)},loadedDnction(){this.send("notFound")},pushedData:function(){this.send("pushedData")},deleteRecord:function(){this.send("deleteRecord")},destroyRecord:function(){return this.deleteRecord(),this.save()},unloadRecord:function(){Ember.assert("You can only unload a loaded, non-dirty record.",!m(this,"isDirty")),this.send("unloadRecord")},clearRelationships:function(){this.eachRelationship(function(e,t){"belongsTo"===trdArrays:function(){m(this,"store").dataWasUpdated(this.constructor,this)},changedAttributes:function(){var e,t=m(this,"_data"),n=m(this,"_attributes"),i={};for(e in n)i[e]=[t[e],n[e]];return i},adapterWillCommit:function(){this.send("willCommit")},adapterDidCommit:function(e){v(this,"isError",!1),e?this._data=e:Ember.mixin(this._data,this._inFlightupdateRecordArraysLater(),e&&this.suspendRelationshipObservers(function(){this.notifyPropertyChange("data")})},adapterDidDirty:function(){this.send("becomeDirty"),this.updateRecordArraysLater()},dataDidChange:Ember.observer(function(){this.reloadHasManys()},"data"),reloadHasManys:function(){var e=m(this.constructor,"relationshipsByName");this.updateRecordArraysLater(),e.forEach(function(e,t){this._data.links&&this._data.links[e]||"hasMany"===t.kind&&this.hasManyDidChis._relationships[e];t&&(e=this._data[e]||[],v(t,"content",Ember.A(e)),v(t,"isLoaded",!0),t.trigger("didLoad"))},updateRecordArraysLater:function(){Ember.run.once(this,this.updateRecordArrays)},setupData:function(n,e){e?Ember.merge(this._data,n):this._data=n;var i=this._relationships;this.eachRlinks&&n.links[e]||t.options.async&&(i[e]=null)}),n&&this.pushedData(),this.suspendRelationshipObservers(function(){this.notifyPropertyChange("data")})},materializeId:function(e){v(this,"id",e)ass a hash of attributes to materializeAttributes",!!e),Q(this._data,e)},materializeAttribute:function(e,t){this._data[e]=t},updateHasMany:function(e,t){this._data[e]=t,this.hasManyDidChange(e)},updateBelongsTo:function(e,t){this._data[e]=t},rollback:function(){this._attributes={},m(this,"isError")&&(this._inFlightAttributes={},Valid")||(this._inFlightAttributes={}),this.send("rolledBack"),this.suspendRelationshipObservers(function(){this.notifyPropertyChange("data")})},toStringExtension:function(){return m(this,"id")},suspendRelationshipObservers:function(e,t){var n=m(this.constructor,"rela,i=this;try{this._suspendedRelationships=!0,Ember._suspendObservers(i,n,null,"belongsToDidChange",function(){Ember._suspendBeforeObservers(i,n,null,"belongsToWillChange",function(){e.call(t||i)})})}finally{this._suspendedRelationships=!1}},save:function(){var e=Ember.RSVP.defer("DS: Model#save "+this);return this.get("store").scheduleSave(_attributes,this._attributes={},DS.PromiseObject.create({promise:e.promise})},reload:function(){v(tber.RSVP.Promise(function(e){t.send("reloadRecord",e)},"DS: Model#reload of "+this).then(function(){return t.set("isReloading",!1),t.set("isError",!1),t},function(e){throw t.set("isError",!0),e},"DS: Model#reload complete, update flags");return DS.PromiseObject.create({promise:e})},adapterDidUpdateAttribute:function(e,t){void 0!==t?(this._data[e]=t,this.notifyPropertyChange(e)):this._data[e]=this._inFlightAttributes[e],this.updateRecordArraysLater()},adapterDidInvalidate:function(t){var n=m(this,"errors");function e(e){t[e]&&n.add(e,t[e])}this.eachAttribute(e),this.eachRelationship(e)},adapterDidError:function(){this.send("becameError"),v(this,"isError",!0)},trigger:function(e){Ember.tryInvoke(this,e,[].slice.call(arguments,1)),this._super.apply(this,arguments)},triggerLater:function(){this._deferredTriggers.push(arguments),X(this,"_triggerDeferredTriggers")},_triggerDeferredTriggers:fnClass({_create:DS.Model.create,create:function(){throw new Ember.Error("You should not call `create` on a model. Instead, call `store.createRecord` with the attributes you would like to set.")}}),J=Ember.get,DS.Model.reopenClass({attributes:Ember.computed(function(){var n=Ember.Map.create();return this.eachComputedProperty(function(e,t){t.isAttribute&&(Ember.assert("You may not set `id` as an attribute on your model. Please remove any lines thatm "+this.toString()unction(){var n=Ember.Map.create();return this.eachAttribute(function(e,t){t.type&&n.set(e,t.type)}),n}),eachAttribute:function(n,i){J(this,"attributes").forEach(function(e,t){n.call(i,e,t)},i)},eachTransformedAttribute:function(n,i){J(this,"transformedAttributes").forEach(function(e,t){n.call(i,e,t)})}}),DS.Model.reopen({eachAttribute:function(e,t){this.constructor.eachAttribute(e,t)}}),DS.attr=function(e,a){e={type:e,isAttribute:!0,options:a=a||{}};return Ember.computed(function(e,t){var n,i,r;return 1<arguments.length?(Ember.assert("You may not set `id` as an attribute on your model. Please remove any lines that look like: `id: DS.attr('<type>')` from "+this.constructor.toString(),"id"!==e),r=this._attributes[e]||this._inFlightAttributes[e]||this._data[e],this.send("didSetProperty",{name:e,oldValue:r,originalValue:this._data[e],value:t}),this._attributes[e]=t):(r=e,(i=this)._attributes.hasOwnProperty(r)||i._inFlightAttributes.hasOwnProperty(r)||i._data.hasOwnProperty(r)?(i=e,((n=this)._attributes.hasOwnProperty(i)?n._attributes:defaultValue()data").meta(e)},(Z=DS.AttributeChange=function(e){this.record=e.record,this.store=e.store,this.name=e.name,this.value=e.value,this.oldValue=e.oldValue}).nc:function(){this.value!==this.oldValue&&(this.record.send("becomeDirty"),this.record.updateRecordArraysLater()),this.destroy()},destroy:function(){delete this.record._changesToSync[this.name]}},y=Ember.get,b=Ember.set,ee=Ember.EnumerableUtils.forEach,DS.RelationshipChange=function(e){this.parentRecord=e.parentRecord,this.childRecord=e.childRecord,this.firstRecord=e.firstRecord,this.firstRecordKind=e.firstRecordKind,this.firstRecordName=e.firstRecordName,this.secondRecord=e.secondRecord,this.secondRecordKind=e.secondRecordKind,this.secondRecngeType,this.store=e.store,this.committed={}},DS.RelationshipChangeAdd=function(e){DS.RelationshipChange.call(this,e)},DS.RelationshipChangeRemove=function(e){DS.RelationshipChange.call(this,e)},DS.RelationshipChange.create=function(e){return new DS.RelationshipChange(e)},DS.RelationshipChangeAdd.create=function(e){return new DS.RelationshipChangeAdd(e)},DS.RelationshipChangeRemove.create=function(e){return new DS.RelationshipChangeRemove(e)},DS.OneToManyChange={},DS.OneToNoneChange={},DS.ManyToNoneChange={},DS.OneToOneChange={},DS.ManyToManyChange={},DS.RelationshipChange._createChange=function(e){return"add"===e.changeType?DS.RelationshipChangeAdd.create(e):"remove"===e.changeType?DS.RelationshipChangeRemove.create(e):void 0},DS.RelationshipChange.determineRelationshipType=function(e,t){var n,i=t.key,t=t.kind,e=e.inverseFor(i);return e&&(e.name,n=e.kind),e?"belongsTo"===n?"belongsTo"===t?"oneToOne":"manyToOne":"belongsTo"===t?"oneToMany":"manyToMany":"belongsTo"===t?"oneToNone":"manyToNone"},DS.RelationshipChange.createChange=function(e,t,n,i){var r=e.constructor,r=DS.RelationshipChange.determineRelationshipType(r,i);return"oneToMany"===r?DS.OneToManyChange.createChange(e,t,n,i):"manyToOne"===r?DS.OneToManyChange.createChange(t,e,n,i):"oneToNone"===r?DS.OneToNoneChange.createChange(e,t,n,i):"manyToNone"===r?DS.ManyToNoneChange.createChange(e,t,n,i):"oneToOne"===r?DS.OneToOneChange.createChange(e,t,n,i):"manyToMany"===r?DS.ManyToManyChange.createChange(e,t,n,i):void 0},DS.OneToNoneChange.createChange=function(e,t,n,i){var r=i.key,i=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,store:n,changeType:i.changeType,firstRecordName:r,firstRecordKind:"belongsTo"});return n.addRelationshipChangeFor(e,r,t,null,i),i},DS.ManyToNoneChange.createChange=function(e,t,n,i){var r=i.key,i=DS.RelationshipChange._createChange({parentRecord:e,childRecord:t,secondRecord:e,store:n,changeType:i.changeType,secondRecordName:i.key,secondRecordKind:"hasMany"});return n.addRelationshipChangeFor(e,r,t,null,i),i},DS.ManyToManyChange.createChange=function(e,t,n,i){var r=i.key,i=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:"hasMany",secondRecordKind:"hasMany",store:n,changeType:i.changeType,firstRecordName:r});return n.addRelationshipChangeFor(e,r,t,null,i),i},DS.OneToOneChange.createChange=function(e,t,n,i){i.parentType?r=i.parentType.inverseFor(i.key).name:i.key?r=i.key:Ember.assert("You must pass either a parentType or belongsToName option to OneToManyChange.forChildAndParent",!1);var r,i=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:"belongsTo",secondRecordKind:"belongsTo",store:n,changeType:i.changeType,firstRecordName:r});return n.addRelationshipChangeFor(e,r,t,null,i),i},DS.OneToOneChange.maintainInvariant=function(e,t,n,i){var r;"add"===e.changeType&&t.recordIsMaterialized(n)&&(r=y(n,i))&&(r=DS.OneToOneChange.createChange(n,r,t,{parentType:e.parentType,hasManyName:e.hasManyName,changeType:"remove",key:e.key}),t.addRelationshipChangeFor(n,i,e.parentRecord,null,r),r.sync())},DS.OneToManyChange.createChange=function(e,t,n,i){i.parentType?(r=i.parentType.inverseFor(i.key).name,DS.OneToManyChange.maintainInvariant(i,n,e,r)):i.key?r=i.key:Ember.assert("You must pass either a parentType or belongsToName option to OneToManyChange.forChildAndParent",!1);var r,i=DS.RelationshipChange._createChange({parentRecord:t,childRecord:e,firstRecord:e,secondRecord:t,firstRecordKind:"belongsTo",secondRecordKind:"hasMany",store:n,changeType:i.changeType,firstRecordName:r});return n.addRelationshipChangeFor(e,r,t,i.getSecondRecordName(),i),i},DS.OneToManyChange.maintainInvariant=function(e,t,n,i){var r;"add"===e.changeType&&n&&(r=y(n,i))&&(r=DS.OneToManyChange.createChange(n,r,t,{parentType:e.parentType,hasManyName:e.hasManyName,changeType:"remove",key:e.key}),t.addRelationshipChangeFor(n,i,e.parentRecord,r.getSecondRecordName(),r),r.sync())},DS.RelationshipChange.prototype={getSecondRecordName:function(){if(!this.secondRecordName){if(!this.secondRecord)return;var e=this.firstRecord.constructor.inverseFor(this.firstRecordName);this.secondRecordName=e.name}return this.secondRecordName},getFirstRecordName:function(){return this.firstRecordName},destroy:function(){var e=this.childRecord,t=this.getFirstRecordName(),n=this.getSecondRecordName();this.store.removeRelationshipChangeFor(e,t,this.parentRecord,n,this.changeType)},getSecondRecord:function(){return this.secondRecord},getFirstRecord:function(){return this.firstRecord},coalesce:function(){var e=this.store.relationshipChangePairsFor(this.firstRecord);ee(e,function(e){var t=e.add,e=e.remove;t&&e&&(t.destroy(),e.destroy())})}},DS.RelationshipChangeAdd.prototype=Ember.create(DS.RelationshipChange.create({})),DS.RelationshipChangeRemove.prototype=Ember.create(DS.RelationshipChange.create({})),DS.RelationshipChangeAdd.prototype.changeType="add",DS.RelationshipChangeAdd.prototype.sync=function(){var t=this.getSecondRecordName(),n=this.getFirstRecordName(),i=this.getFirstRecord(),r=this.getSecondRecord();r instanceof DS.Model&&i instanceof DS.Model&&("belongsTo"===this.secondRecordKind?r.suspendRelationshipObservers(function(){b(r,t,i)}):"hasMany"===this.secondRecordKind&&r.suspend(function(){var e=y(r,t);M(e)&&e.addObject(i)})),i instanceof DS.Model&&r instanceof DS.Model&&y(i,n)!==r&&("belongsTo"===this.firstRecordKind?i.suspendRelationshipObservers(function(){b(i,n,r)}):"hasMany"===this.firstRecordKind&&i.suspendRelationshipObservers(function(){var e=y(i,n);M(e)&&e.addObject(r)})),this.coalesce()},DS.RelationshipChangeRemove.prototype.changeType="remove",DS.RelationshipChangeRemove.prototype.sync=function(){var t=this.getSecondRecordName(),n=this.getFirstRecordName(),i=this.getFirstRecord(),r=this.getSecondRecord();r instanceof DS.Model&&i instanceof DS.Model&&("belongsTo"===this.secondRecordKind?r.suspendRelationshipObservers(function(){b(r,t,null)}):"hasMany"===this.secRelationshipObservers(function(){var e=y(r,t);M(e)&&e.removeObject(i)})),i instanceof DS.Model&&y(i,n)&&("belongsTo"===this.firstRecordKind?i.suspendRelationshipObservers(function(){b(i,n,null)}):"hasMany"===this.firstRecordKind&&i.suspendRelationshipObservers(function(){var e=y(i,n);M(e)&&e.removeObject(r)})),this.coalesce()},w=Ember.get,Ember.set,te=Ember.isNone,DS.belongsTo=function(a,e){"object"==typeof a?(e=a,a=void 0):Ember.assert("The first argument DS.belongsTo must be a model type or string, like DS.belongsTo(App.Person)",!!a&&("string"==typeof a||DS.Model.detect(a)));var s,l,t={type:a,isRelationship:!0,options:e=e||{},kind:"belongsTo"};return e.async?(s=a,l=t,Ember.computed(function(e,t){var n,i,r=w(this,"data"),a=w(this,"store"),o="DS: Async belongsTo "+this+" : "+e;return 2===arguments.length?(Ember.assert("You can only add a '"+s+"' record to this relationship",!t||t instanceof a.modelFor(s)),void 0===t?null:DS.PromiseObject.create({promise:Ember.RSVP.resolve(t,o)})):(i=r.links&&r.links[e],r=r[e],te(r)?i?(n=Ember.RSVP.defer("DS: Async belongsTo (link) "+this+" : "+e),a.findBelongsTo(this,i,l,n),DS.PromiseObject.create({promise:n.promise})):null:(i=a.fetchRecord(r)||Ember.RSVP.resolve(r,o),DS.PromiseObject.create({promise:i})))}).property("data").meta(l)):Ember.computed(function(e,t){var n=w(this,"data"),i=w(this,"store"),r="string"==typeof a?i.modelFor(a):a;return 2===arguments.length?(Ember.assert("You can only add a '"+a+"' record to this relationship",!t||t instanceof r),void 0===t?null:t):(r=n[e],te(r)?null:(i.fetchRecord(r),r))}).property("data").meta(t)},DS.Model.reopen({belongsToWillChange:Ember.beforeObserver(function(e,t){var n,i;w(e,"isLoaded")&&(n=w(e,t))&&(i=w(e,"store"),(e=DS.RelationshipChange.createChange(e,n,i,{key:t,kind:"belongsTo",changeType:"remove"})).sync(),this._changesToSync[t]=e)}),belongsToDidChange:Ember.immediateObserver(function(e,t){var n,i;w(e,"isLoaded")&&(n=w(e,t))&&(i=w(e,"store"),DS.RelationshipChange.createChange(e,n,i,{key:t,kind:"belongsTo",changeber.setProperties,DS.hasMany=function(e,t){return"object"==typeof e&&(t=e,e=void 0),Se(e,t)};var N=Ember.get;function Ae(e,t){for(var n=0,i=t.length;n<i;n++)e.uncountable[t[n].toLowerCase()]=!0}function Pe(e,t){for(var n,i=0,r=t.length;i<r;i++)n=t[i],e.irregular[n[0].toLowerCase()]=n[1],e.irregularInverse[n[1].toLowerCase()]=n[0]}function Ie(e){(e=e||{}).uncountable=e.uncountable||{},e.irregularPairs=e.irregularPairs||{};var t=this.rules={plurals:e.plurals||[],singular:e.singular||[],irregular:{},irregularInverse:{},uncountable:{}};Ae(t,e.uncountable),Pe(t,e.irregularPairs)}function Le(s,e,t,l,c){var d=S(e,"attrs");d&&t.eachRelationship(function(e,n){var i,r,t=d[e],a=s.serializerFor(n.type.typeKey),o=S(a,"primaryKey");"hasMany"!==n.kind||!t||"always"!==t.embedded&&"load"!==t.embedded||(i="_"+Ember.String.pluralize(n.type.typeKey),t=this.keyForRelationship(e,n.kind),e=this.keyForAttribute(e),r=[],l[e]&&(c[i]=c[i]||[],ge(l[e],function(e){var t=s.modelFor(n.type.typeKey);Le(s,a,t,e,c),r.push(e[o]),c[i].push(e)}),l[t]=r,delete l[e]))},e)}Ember.set,DS.Model.reopen({didDefineProperty:function(e,t,n){n instanceof Ember.Descriptor&&((n=n.meta()).isRelationship&&"belongsTo"===n.kind&&(Ember.addObserver(e,t,null,"belongsToDidChange"),Ember.addBeforeObserver(e,t,null,"belongsToWillChange")),n.parentType=e.constructor)}}),DS.Model.reopenClass({typeForRelationship:function(e){e=N(this,"relationshipsByName").get(e);return e&&e.type},inverseFor:function(e){var t=this.typeForRelationship(e);if(!t)return null;var n,i,r=this.metaForProperty(e).options;if(null===r.inverse)return null;if(r.inverse)n=r.inverse,i=Ember.get(t,"relationshipsByName").get(n).kind;else{r=function e(t,n,i){i=i||[];var r=N(n,"relationships");if(!r)return;var a=r.get(t);a&&i.push.apply(i,r.get(t));t.superclass&&e(t.superclass,n,i);return i}(this,t);if(0===r.length)return null;Ember.assert("You defined the '"+e+"' relationship on "+this+", but multiple possible inverse relationships of type "+this+" were found on "+t+". Look at http://emberjs.com/guides/models/defining-models/#toc_explicit-inverses for how to explicitly specify inverses",1===r.length),n=r[0].name,i=r[0].kind}return{type:t,name:n,kind:i}},relationships:Ember.computed(function(){var n=new Ember.MapWithDefault({defaultValue:function(){return[]}});return this.eah({name:e,kind:t.kind}))}),n}),relationshipNames:Ember.computed(function(){var n={hasMany:[],belongsTo:[]};return this.eachComputedProperty(function(e,t){t.isRelationship&&n[t.kind].push(e)}),n}),relatedTypes:Ember.computed(function(){var n,i=Ember.A();return this.eachComputedProperty(function(e,t){t.isRelationship&&("string"==typeof(n=t.type)&&(n=N(this,n,!1)||this.store.modelFor(n)),Ember.assert("You specified a hasMany ("+t.type+") on "+t.parentType+" but "+t.type+" was not found.",n),i.contains(n)||(Ember.assert("Trying to sideload "+e+" on "+this.toString()+" but the type doesn't exist.",!!n),i.push(n)))}),i}),relationshipsByName:Ember.computed(function(){var n,i=Ember.Map.create();return this.eachComputedProperty(function(e,t){t.isRelationship&&(t.key=e,"string"==typeof(n=(n=t.type)||),i.set(e,t))}),i}),fiperty(function(e}),n}),eachRelationship:function(n,in.call(i,e,t)})},eachRelatedType:function(t,n){N(this,"relatedTypes").forEach(function(e){t.call(n,e)})}}),DS.Model.reopen({eachRelationship:function(e,t){this.constructor.eachRelationship(e,t)}}),E=EmEmber.run.once,k=Ember.EnumerableUtils.forEach,DS.RecordArrayManager=Ember.Object.extend({init:function(){this.filteredRecordArrays=Ember.MapWithDefault.create({defaultValue:function(){return[]}}),this.changedRecords=[]},recordDidChange:function(e){this.changedRecords.push(e),ae(this,=e._recordArrays||Ember.OrderedSet.create(),e._recordArrays},updateRecordArrays:function(){k(this.changedRecords,function(e){E(e,"isDeleted")?this._recordWasDeleted(e):this._recordWasChanged(e)},this),this.changedRecunction(e){e.removeRecord(t)})},_recordWasChanged:function(t){var n,i=t.constructor,e=this.filteredRecordArrays.get(i),r=(k(e,function(e){n=E(e,"filterFunction"),this.updateRecordArray(e,n,i,t)},this),t._loadingRecordArrays);if(r){for(var a=0,o=r.length;a<o;a++)r[a].loadedRecord();t._loadingRecordArrays=[]}},updateRecordArray:function(e,t,n,i){var t=!t||t(i),r=this.recordArraysForRecord(i);t?(r.add(e),e.addRecord(i)):(r.remove(e),e.removeRecord(i))},updateFilter:function(e,t,n){for(var i,r=this.store.typeMapFor(t).records,a=0,o=mpty")||this.updateRecordArray(e,n,t,i)},createManyArray:function(e,t){var n=DS.ManyArray.create({type:e,content:t,store:this.store});return k(t,function(e){this.recordArraysForRecord(e).add(n)},this),n},createRecordArray:function(e){var t=DS.RecordArray.create({type:e,content:Ember.A(),store:this.store,isLoaded:!0});return this.registerFilteredRecordArray(t,e),t},createFilteredRecordArray:function(e,t){var n=DS.FilteredRecordArray.create({type:e,content:Ember.A(),store:this.store,manager:this,filterFunction:t});return this.registerFilteredReerPopulatedRecordArray.creay:function(e,t,n){this.filteredRecordArrays.get(t).push(e),this.updateFilter(e,t,n)},registerWaitingRecordArray:function(e,t){var n=e._loadingRecordArrays||[];n.push(t),e._loadingRecordArrays=n}}),oe=Ember.get,Ember.set,se=Ember.ArrayPolyfills.map,x=["description","fileName","lineNumber","message","name","number","stack"],DS.InvalidError=function(e){var t=Error.prototype.constructor.call(this,"The backend rejected the commit because it was invalid: "+Ember.inspect(e));this.errors=e;for(var n=0,i=x.length;n<i;n++)this[x[n]]=t[x[n]]},DS.InvalidError.prototype=Ember.create(Error.prototype),DS.Adapter=Ember.Object.extend({find:Ember.required(Function),findAll:null,findQuery:null,generateIdForRecord:null,serialize:function(e,t){return oe(e,"store").serializerFor(e.constructor.typeKey).serialize(e,t)},createRecord:Ember.required(Function),updateRecord:Ember.required(Function),deleteRecord:Ember.required(Function),findMany:function(t,n,e){e=se.call(e,function(e){return this.find(t,n,e)},this);return Ember.RSVP.all(e)}}),C=Ember.get,le=Ember.String.fmt,ce=Ember.EnumerableUtils.indexOf,de=0,DS.FixtureAdapter=DS.Adapter.extend({serializer:null,simulateRemoteResponse:!0,latency:50,fixturesForType:function(e){return e.FIXTURES?Ember.A(e.FIXTURES).map(funreturn e.id=e.i.FixtureAdapter::queryFixtures method to support querying the fixture store.")},updateFixtures:funct);var n=e.FIXTURES;this.deleteLoadedFixture(e,t),n.push(t)},mockJSON:function(e,t,n){return e.serializerFor(t).serialize(n,{includeId:!0})},generateIdForRecord:function(e){return"fixture-"+de++},find:function(e,t,n){var i,r=this.fixturesForType(t);if(Ember.assert("Unable to find fixtures for model type "+t.toString(),r),i=r?Ember.A(r).findProperty("id",n):i)return return i},this)},findMany:function(e,t,n){var i=this.fixturesForType(t);if(Ember.assert("Unable to find fixtures for model type "+t.toString(),i),i=i&&i.filter(function(e){return-1!==ce(n,e.id)}))return this.simulateRemoteCall(function(){return i},this)},findAll:function(e,t){var n=this.fixturesForType(t);return Ember.assert("Unable to find fixtures for model type "+t.toString(),n),this.simulateRemoteCall(function(){return n},this)},findQuery:function(e,t,n,i){var r=this.fixturesForType(t);if(Ember.assert("Unable to find fixtures for model type "+t.toString(),r),r=this.queryFixtures(r,n,t))return this.simuli),this.simulateRemoteCall(function(){return i},this)},updateRecord:function(e,t,n){var i=this.mockJSON(e,t,n);return this.updateFixtures(t,i),this.simulateRemoteCall(function(){return i},this)},deleteRecord:function(e,t,n){e=this.mockJSON(e,t,n);return this.deleteLoadedFixture(t,e),this.simulateRemoteCall(function(){return null})},deleteLoadedFixture:function(e,t){var t=this.findExistiExistingFixture:function(e,t){e=this.fixturesForType(e),t=C(t,"id");return this.findFixtureById(e,t)},findFixtureById:function(e,t){return Ember.A(e).find(function(e){return""+C(e,"id")==""+t})},simulateRemoi=this;return new Ember.RSVP.Promise(function(e){C(i,"simulateRemoteResponse")?Ember.run.later(function(){e(t.call(n))},C(i,"latency")):Ember.run.schedule("actions",null,function(){e(t.call(n))})},"DS: FixtureAdapter#simulateRemoteCall")}}),_=Ember.get,Ember.set,ue=Ember.ArrayPolyfills.forEach,pe=Ember.ArrayPolyfills.map,DS.RESTSerializer=DS.JSONSerializer.extend({normalize:function(e,t,n){return this.normalizeId(t),this.normalizrmalizeRelatthis.normalizeHash[n]&&this.normalizeHash[n](t),this._super(e,t,n)},normalizePayload:function(e,t){return t},normalizeId:function(e){var t=_(this,"primaryKey");"id"!==t&&(e.id=e[t],delete e[t])},normalizeUsingDeclaredMapping:function(e,t){var n,i,r=_(this,"attrs");if(r)for(i in r)"string"==typeof(n=(n=r[i])&&n.key?n.key:n)&&(t[i]=t[n],delete t[n])},normalizeAttributes:function(e,t){var n;this.keyForAttribute&&e.eachAttribute(function(e){e!==(n=this.keyForAttribute(e))&&(t[e]=t[n],delete t[n])},this)},normalizeRelationships:function(e,n){var i;this.keyForRelationship&&e.eachRelationship(function(e,t){e!==(i=this.keyForRelationship(e,t.kind))&&(n[e]=n[i],delete n[i])},this)},extractSingle:function(r,e,t,a,n){t=this.normalizePayload(e,t);var o,s,i=e.typeKey;for(s in t){var l=this.typeForRoot(s),c=l===i;c&&"array"!==Ember.typeOf(t[s])?o=this.normalize(e,t[s],s):(r.modelFor(l),ue.call(t[s],function(e){var t=this.typeForRoot(s),n=r.modelFor(t),i=r.serializerFor(n),i=(e=i.normalize(n,e,s),c&&!a&&!o),n=c&&(null==(n=e.id)?null:n+"")===a;i||n?o=e:r.push(t,e)},this))}return o},extractArray:function(e,t,n){n=this.ey;for(r in n){var o=r,s=!1,o=("_"===r.charAt(0)&&(s=!0,o=r.substr(1)),this.typeForRoot(o)),l=e.modelFor(o),c=e.serializerFor(l),s=!s&&o===a,d=pe.call(n[r],function(e){return c.normalize(l,e,r)},this);s?i=d:e.pushMany(o,d)}return i},pushPayload:function(e,t){for(var n in t=this.normalizePayload(null,t)){var i=this.type]),function(e){retypeForRoot:function(e){return Ember.String.singularize(e)},serialize:function(e,t){return this._super.apply(this,arguments)},serializeIntoHash:function(e,t,n,i){e[t.typeKey]=this.serialize(n,i)},serializePolymorphicType:function(e,t,n){n=n.key,e=_(e,n);t[(this.keyForAttribute?this.keyForAttribute(n):n)+"Type"]=e.constructor.typeKey}}),T=Ember.get,Ember.set,he=Ember.ArrayPolyfills.forEach,DS.RESTAdapter=DS.Adapter.extend({defaultSerializer:"_rest",find:function(e,t,n){return this.ajax(this.buildURL(t.typeKey,n),"GET")},findAll:function(e,t,n){var i;return n&&(i={since:n}),this.ajax(this.buildURL(t.typeKey),"GET",{data:i})},findQuery:function(e,t,n){return this.ajax(this.buildURL(t.typeKey),"GET",{data:n})},findMany:function(e,t,n){return this.ajax(this.buildURL(t.typeKey),"GET",{data:{ids:n}})},findHasMany:function(e,t,n){var i=T(this,"host"),r=T(t,"id"),t=t.constructor.typeKey;return i&&"/"===n.charAt(0)&&"/"!==n.charAt(1)&&(n=i+n),this.ajax(this.urlPrefix(n,this.buildURL(t,r)),"GET")},findBelongsTo:function(e,t,n){var i=T(t,"id"),t=t.constructor.typeKey;return this.ajax(this.urlPrefix(n,this.buildURL(t,i)),"GET")},createRecord:function(e,t,n){var i={};return e.serializerFor(t.typeKey).serializeIntoHash(i,t,n,{includeId:!0}),this.ajax(this.buildURL(t.typeKey),"POST",{data:i})},updateRecord:function(e,t,n){var i={},e=(e.serializerFor(t.typeKey).serializeIntoHash(i,t,n),T(n,"id"));return this.ajax(this.buildURL(t.typeKey,e),"PUT",{data:i})},deleteRecord:function(e,t,n){n=T(n,"id");return this.ajax(this.buildURL(t.typeKey,n),"DELETE")},buildURL:function(e,t){var n=[],i=T(this,"host"),r=this.urlPrefix();return e&&n.push(this.pathForType(e)),t&&n.push(t),r&&n.unshift(r),n=n.join("/"),n=!i&&n?"/"+n:n},urlPrefix:function(e,t){var n=T(this,"host"),i=T(this,"namespace"),r=[];return e?"/"===e.charAt(0)?n&&(e=e.slice(1),r.push(n)):/^http(s)?:\/\//.test(e)||r.push(t):(n&&r.push(n),i&&r.push(i)),e&&r.push(e),r.join("/")},pathForType:function(e)},ajaxError:function(e){return e&&(e.then=null),e},ajax:function(e,n,r){var a=this;return new Ember.RSVP.Promise(function(t,i){(r=a.ajaxOptions(e,n,r)).success=function(e){Ember.run(null,t,e)},r.error=function(e,t,n){Ember.run(null,i,a.ajaxError(e))},Ember.$.ajax(r)},"DS: RestAdapter#ajax "+n+" to "+e)},ajaxOptions:function(e,t,n){var i;return(n=n||{}).url=e="application/json; charset=utf-8elongsTo,expand:!0},{name:"Has Many",properties:i.hasMany,expand:!0},{name:"Flags",properties:["isLoaded","isexpensiveProperties:r}}}}),Ember.String.pluralize=function(e){return Ember.Inflector.inflector.pluralize(e)},Ember.String.singularize=function(e){return Ember.Inflector.inflector.singularize(e)},fe=/^\s*$/,Ie.prototype={plural:function(e,t){this.rules.plurals.push([e,t.toLowerCase()])},singular:function(e,t){this.rules.singular.push([e,t.toLowerCase()])},uncountabes,[[e,t]])},pluralize:function(e){return this.inflect(e,this.rules.plurals,this.rules.irregular)},singularize:function(e){return this.inflect(e,this.rules.singular,this.rules.irregularInverse)},inflect:function(e,t,n){var i,r,a;if(fe.test(e))return e;if(r=e.toLowerCase(),this.rules.uncountable[r])return e;if(n=n&&n[r])return n;for(var o=t.length;0<o&&!(a=(i=t[o-1])[0]).test(e);o--);return a=(i=i||[])[0],r=i[1],e.replace(a,r)}},Ember.Inflector=Ie,Ember.Inflector.defaultRules={plurals:[[/$/,"s"],[/s$/i,"s"],[/^(ax|test)is$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(octop|vir)i$/i,"$1i"],[/(alias|status)$/i,"$1es"],[/(bu)s$/i,"$1ses"],[/(buffal|tomat)o$/i,"$1oes"],[/([ti])um$/i,"$1a"],[/([ti])a$/i,"$1a"],[/sis$/i,"ses"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/(hive)$/i,"$1s"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(x|ch|ss|sh)$/i,"$1es"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/^(m|l)ouse$/i,"$1ice"],[/^(m|l)ice$/i,"$1ice"],[/^(ox)$/i,"$1en"],[/^(oxen)$/i,"$1"],[/(quiz)$/i,"$1zes"]],singular:[[/s$/i,""],[/(ss)$/i,"$1"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"],[/(^analy)(sis|ses)$/i,"$1sis"],[/([^f])ves$/i,"$1fe"],[/(hive)s$/i,"$1"],[/(tive)s$/i,"$1"],[/([lr])ves$/i,"$1f"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/(x|ch|ss|sh)es$/i,"$1"],[/^(m|l)ice$/i,"$1ouse"],[/(bus)(es)?$/i,"$1"],[/(o)es$/i,"$1"],[/(shoe)s$/i,"$1"],[/(cris|test)(is|es)$/i,"$1is"],[/^(a)x[ie]s$/i,"$1xis"],[/(octop|vir)(us|i)$/i,"$1us"],[/(alias|status)(es)?$/i,"$1"],[/^(ox)en/i,"$1"],[/(vert|ind)ices$/i,"$1ex"],[/(matr)ices$/i,"$1ix"],[/(quiz)zes$/i,"$1"],[/(database)s$/i,"$1"]],irregularPairs:[["person","people"],["man","men"],["child","children"],["sex","sexes"],["move","moves"],["cow","kine"],["zombie","zombies"]],uncountable:["equipment","information","rice","money","species","series","fish",TYPES&&!Ember.EXTEND_PROTOTYPES.String||(String.prototype.pluralize=function(){return Ember.String.pluralize(this)},String.prototype.singularize=function(){return Ember.String.singularize(thctor(Ember.Inflector.defaultRules),me=Ember.get,ve=Ember.EnumerableUtils.forEach,DS.ActiveModelSerializer=DS.RESTSerializer.extend({keyForAttribute:function(e){return Ember.String.decamelize(e)},keyForRelationship:function(e,t){return e=Ember.String.decamelize(e),"belongsTo"===t?e+"_id":"hasMany"===t?Ember.String.singularize(e)+"_ids":e},serializeHasMany:Ember.K,serializeIntoHash:function(e,t,n,i){e[Ember.String.decamelize(t.typeKey)]=this.serialize(n,i)},serializePolymorphicType:function(e,t,n){n=nitalize(e.constructor.typeKey)},typeForRoot:function(e){e=Ember.String.camelize(e);return Ember.String.singularize(e)},normalize:function(e,t,n){return this.normalizeLinks(t),this._super(e,t,n)},normalizeLinks:function(e){if(e.links){var t,n=e.links;for(t in n){var i=Ember.String.camelize(t);i!==t&&(n[i]=n[t],delete n[t])}}},normalizeRelationships:function(e,i){var r,a;thiunction(e,t){var n;t.options.polymorphic?(r=this.keyForAttribute(e),(a=i[r])&&a.type?a.type=this.typeForRoot(a.type):a&&"hasMany"===t.kind&&(n=this,ve(a,function(e){e.type=n.typeForRoot(e.type)}))):(r=this.keyForRelationship(e,t.kind),a=i[r]),i[e]=a,e!==r&&delete i[r]},this)}}),S=Ember.get,ge=Ember.EnumerableUtils.forEach,DS.EmbeddedRecordsMixin=Ember.Mixin.create({serializeHasMany:function(e,t,n){var n=n.key,i=S(this,"attrs");i&&i[n]&&"always"===i[n].embedded&&(t[this.keyForAttribute(n)]=S(e,n).map(function(e){var t=e.serialize(),n=S(this,"primaryKey");return t[n]=S(e,n),t},this))},extractSingle:function(e,t,n,i,r){var a=this.keyForAttribute(t.typeKey);return Le(e,this,t,n[a],n),this._super(e,t,n,i,r)},extractArray:function(t,n,i){var e=this.keyForAttribute(n.typeKey),e=i[Ember.String.plur)}}),ye=Ember.EnumerableUtils.forEach,DS.ActiveModelAdapter=DS.RESTAdapter.extend({defaultSerializer:"_ams",pathForType:function(e){e=Emberalize(e)},ajaxError:function(e){var t,n,i=this._super(e);return e&&422===e.status?(t=Ember.$.parseJSON(e.responseText).errors,pplication",function(e){e.initializer({name:"activeModelAdapter",initialize:function(e,t){t.register("serializer:_ams",DS.ActiveModelSerializer),t.register("adapter:_ams",DS.ActiveModelAdapter)}})})}(),define("ember.data",["ember.noconflict"],function(e){return function(){return e.DS}}(this)),define("portal/models",["lodash.noconflict","logging","ember.hapyak","ember.data","model","dao"],function(r,e,a,n,i,o,t){"use strict";var s=a.get,l=a.isNone,c=a.ArrayPolyfills.map,d={attributes:a.computed(function(){var n=a.Map.create();return this.eachComputedProperty(function(e,t){t.isAttribute&&(a.assert("You may not set `id` as an attribute on your model. Please remove any lines that look like: `id: DS.attr('<type>')` from "+this.toString(),"id"!==e),t.name=e,n.set(e,t))}),n}),transformedAttributes:a.computed(function(){var n=a.Map.create();return this.eachAttribute(function(e,t){t.type&&n.set(e,t.type)}),n}),eachAttribute:function(n,i){s(this,"attributes").forEach(function(e,t){n.call(i,e,t)},i)},eachTransformedAttribute:function(n,i){s(this,"transformedAttributes").forEach(function(e,t){n.call(i,e,t)})}},u={eachAttribute:function(e,t){this.constructor.eachAttribute(e,t)}};return window&&(window.HapyakDao=o),{attachTo:function(e){for(var t in i)i.hasOwnProperty(t)&&(i[t].reopenClass(d),i[t].reopen(u),e[t]=i[t]);e.HapyakDaoAdapter=n.Adapter.extend({serializer:n.JSONSerializer.create({extractArray:function(e,t,n){if(n)return(n=n.get("content"))&&n.mapProperty&&n.mapProperty("data")},extractMeta:function(e,t,n){!n||(n={page:n.page,pages:n.pages,total:n.total}).total&&e.metaForType(t,n)}}),find:function(e,t,n){var i;if(r.isObject(n)?i=o.store.find(t,n):r.isNaN(+n)||(i=o.store.findById(t,+n)),i)return i.get("created")?i:new a.RSVP.Promise(function(t,n){i.onLoad(function(e){(e?t:n)(e)})})},findAll:function(e,t,n){var i={};return n&&(i.since=n),this.findQuery(e,t,i)},findQuery:function(t,n){o.sn)(e)})})},serialize:function(e,t){return s(this,"serializer").serialize(e,t)},createRecord:function(e,t,n){return t.createRecord(n)},deleteRecord:function(e,t,n){return o.store.deleteRecord(n)},findMany:function(t,n,e,i){e=c.call(e,function(e){return this.find(t,n,e)},this);return a.RSVP.all(e)}}),e.Store=n.Store.extend({adapter:e.HapyakDaoAdapter,fetchRecord:function(e){var t,n;return l(e)?null:(t=e.constructor,n=this.adapterFor(t),a.assert("You tried to find a record but you have no adapter (for "+t+")",n),a.assert("You tried to find a record but your adapter (for "+t+") does not implement 'find'",n.find),n.find(this,t,s(e,"id")))},recordForId:function(e,t){var n=this.adapterFor(e);return e=r.isString(e)?this.modelFor(e):e,a.assert("You tried to find a record but you have no adapter (for "+e+")",n),a.assert("You tried to find a record but your adapter (for "+e+") does not implement 'find'",n.find),n.find(this,e,t)||this.buildRecord(e,t)},push:function(e,t){return o.store.load(this.modelFor(e),t),this.recordForId(e,t.id)},buildRecord:function(e,t,n){return n&&!n.id&&(n.id=t),e.createRecord(n||{id:t})},createRecord:function(e,t){var n=this.adapterFor(e);return e=r.isString(e)?this.modelFor(e):e,a.assert("You tried to find a record but you have no adapter (for "+e+")",n),a.assert("Yoor "+e+") does not implement 'createRecord'",n.createRecord),n.createRecord(this,e,t)}})}}}),define("facebookSDK",[],function(){var i="facebook-jssdk";function r(e){e&&"function"==typeof e&&e()}return{load:function(e){var t,n=document.getElementsByTagName("script")[0];document.getElementById(i)?r(e):((t=document.createElement("script")).id=i,t.src="//connect.facebook.net/en_US/sdk.js"sharing",["promise!configuration","popcorn","utils","utils.embed","facebookSDK"],function(o,e,a,s,l,t){"use strict";function c(e,t){return e.options&&e.options.sharing&&e.options.sharing[t]||""}function d(e){return c(e,"url")||window.location.href}function u(e){var t=parseInt(screen.availWidth/2-200,10),n=parseInt(screen.availHeight/2-150,10);return window.open(e,"popcornSharing","toolbar=no,menubar=no,status=no,location=no,resizable=yes,width=580,height=400,left="+t+",top="+n)}function n(e,t){u("https://twitter.com/intent/tweet/?"+("text="+encodeURIComponent(t))+("&url="+encodeURI(e||"http://corp.hapyak.com")))}function i(e,t,n,i,r){var a=r||s.dotget(o,"player.facebook.appId");a?l.load(function(){window.FB.init({appId:a,status:!0,xfbml:!0,version:"v2.7"}),window.FB.ui({method:"feed",link:e||"http://corp.hapyak.com",description:t,redirect_uri:hapyak.rootUrl+"/static/close.html",display:"popup"})}):console.warn("Facebook sharing requires an app_id!")}function r(e,t,n,i){u("https://www.linkedin.com/shareArticle?mini=true"+("&summary="+encodeURIComponent(t))+("&url="+encodeURI(e||"http://corp.hapyak.com"))+(n="&title="+(n||encodeURIComponent("Brightcove Interactivity Video")))+(i="&source="+(i||encodeURIComponent("HapYak"))))}return e.p.shareFacebook=function(e,t){var n,i;function r(e){"hapyak.close-window"===e.data&&(i.close(),a.removePostMessageListener(r))}l.load(function(){e=e||encodeURIComponent(d(this)),t=t||c(this,"title"),n="https://www.facebook.com/dialog/feed?app_id="+o.facebook.appId+"&link="+e+"&name="+encodeURIComponent(t)+"&caption="+encodeURIComponent("Check out this video on HapYak")+"&picture="+encodeURIComponent(c(this,"image"))+"&display=popup&redirect_uri="+hapyak.rootUrl+"/static/close.html",i=u(n),a.listenForPostMessage(r)})},e.p.shareTwitter=function(e,t){e=e||encodeURIComponent(d(this)),t=t||"Check out this video on HapYak",u("https://twitter.com/share?hashtags=hapyak&text="+encodeURIComponent(t)+"&url="+e)},e.p.shareGoogle=function(e){u("https://plus.google.com/share?url="+(e=e||encodeURIComponent(d(this))))},{twitter:e.p.twitter=n,facebook:e.p.facebook=i,linkedin:e.p.linkedin=r,email:function(e,t,n,i){u("mailto:"+("?Subject="+encodeURIComponent(n))+("&Body="+encodeURIComponent(t+" "+e)))}}}),define("utils.hapyakEnv",[],function(){return{cdnUrl:function(e){switch(window.hapyak&&window.hapyak.environment||"dev"){case"staging":return"//player.interactivity.stage.brightcove.com"+e;case"production":return"//player.interactivity.brightcove.com"+e;default:return"//player.interactivity.qa.brightcove.com"+e}}}}),define("portal/controllers/experience",["logging","lodash.noconflict","configAPI","ember.hapyak","dao","module","model","utils.uuid","cookie","popcorn.sharing","jquery.noconflict","utils.embed","utils","utils.hapyakEnv"],function(a,o,e,t,s,n,l,i,r,c,d,u,p,h,f){"use strict";var m=n.config();return t.ObjectController.extend({init:function(){m.viewerMode||this.set("needs",["currentGroup","currentUser","application"])},needs:["application"],application:t.computed.alias("controllers.application"),currentUser:t.computed.alias("controllers.currentUser"),name:null,id:null,playlist:null,layout:null,landingPageCode:null,embeddedExperience:t.computed(function(){return"true"===u.getQueryParams(m.originalUrl).embed_experience}),embeddedExperienceId:t.computed(function(){return"interactivity_embedded_experience_"+this.get("id")}),embeddedExperienceQueryParams:{},embeddedExperienceQueryParamsObs:t.observer("moduleConfig.originalUrl",function(){this.set("embeddedExperienceQueryParams",u.getQueryParams(m.originalUrl))}),branding:m.branding,logo:h.cdnUrl("/css/images/logo-ha:m.access_gate,ltiAuthorSetup:!1,returnLink:null,isLti:!1,isSlidesync:!1,isOffVideoChapters:!1,useLegacyStyles:t.computed(function(){return"true"===u.getQueryParams(m.originalUrl).legacy_styles}),isLive:!1,liveSlidesFolderPath:"",streamButtonLabel:"STREAM",requestSetStreamData:!1,requestSrmVersion:m.scormVersion,haasExternalContent:!1,projectScores:{},hrefTarget:t.computed(function(){return hapyak.iframed?"":"_blank"}),previewBtnText:t.computed(function(){return this.get("isLti")?"VIEW AS STUDENT":"VIEW"}).property("isLti"),layoutSpecificAddons:t.A(),experienceTemplate:null,experienceLayoutView:null,useNativeControls:!0,reportsDisabled:!0,configDisabled:!1,previewDisabled:!0,uploaded:null,isSaving:!1,needsRender:!1,currentProjectTitle:"",currentProjectId:"",currentProjectIndex:"",projectsInPlaylist:[],templateType:t.computed(function(){return this.get("content.layout.layout_type.name")}),experienceConfig:t.computed("model.configuration",function(){return this.get("model.configuration")}),hidePlaylist:!1,facebookId:u.dotget(e,"facebook.appId"),transitionImageUrl:m.transitionImageUrl||h.cdnUrl("/img/hurn this.get("access_gate.reg_redirect_url")?this.get("access_gate.reg_redirect_url"):""}),securityType:t.computed(function(){return this.get("access_gate.type")?this.get("access_gate.type"):""}),vBED_WHITELIST")?"/r":"")+"/experience/viewer/"+this.get("landingPageCode")}).property("landingPageCode"),projectLink:t.computed(function(){return"/portal/projects/"+this.get("currentProjectId")}).property("currentProjectId"),unload:function(){this.setProperties({name:null,id:null,playlist:null,layout:null,needsRender:!1,landingPageCode:null,reportsDisabled:!0,configDisabled:!1,previewDisabled:!0,uploaded:null,isSaving:!1,currentProjectTitle:"",currentProjectId:"",hidePlaylist:!1,isLti:!1,isSlidesync:!1,isLive:!1,isOffVideoChapters:!1})},load:function(e){var t,n,i,r=m.viewerMode;!o.isUndefined(e)&&e instanceof l.Experience||(e=s.store.load(l.Experience,e),!o.isUndefined(e)&&e instanceof l.Experience)?(this.unload(),a.dev("Restore state from experience #"+e.get("id")),t=e.get("playlist"),n=e.get("layout").get("id"),i=e.get("configuration.useNativeControls"),"live"===e.get("layout.layout_type.name")&&(this.set("isLive",!0),i=!0),i=i===f||i,this.set("playlist",t),this.set("layout",n),this.set("useNativeControls",i),n&&t?(this.beginPropertyChanges(),this.set("name",e.get("title")),this.set("id",e.get("id")),this.set("landingPageCode",e.get("landing_page_code")),-1!==["slidesync","slidesync_external_chapters","slidesync_full_width_playlist","slidesync_video_only"].indexOf(e.get("layout.template"))&&this.set("isSlidesync",!0),-1!==["off_video_chapters","slidesync_external_chapters"].indexOf(e.get("layout.tem,!0),"off_video_chapters"==e.get("layout.template")&&this.set("isOffVideoChapters",!0),i=(i=(i=e.get("layout.layout_type.name")).replace(/((\s\w)|(\_\w))/g,function(e){return e[1].toUpperCase()})).charAt(0).toUpperCase()+i.slice(1),n=window.HapyakPortalApp["Experience"+(r?"View":"Edit")+i+"View"],i="experience/"+(r?"view_":"edit_")+e.get("layout.template"),this.set("model",e),this.set("experienceLayoutView",n),this.set("experienceTemplate",i),this.endPropertyChanges(),t&&this.set("needsRender",!0)):this.send("open","errorModal")):console.warn("The experience you are trying to reach is undefined or not an instance of model.Experience")},facebookActive:!0,linkedinActive:!0,emailActive:!0,twitterActive:!0,cookieBanner:!1,brandingEnabled:t.computed(function(){return this.get("experienceProvisioning.branding")}),brandingHeader:t.computed(function(){return unescape(this.get("model.configuration.branding_header")||this.get("branding.header")||"")}),brandingFooter:t.computed(function(){return unescape(this.get("model.configuration.branding_footer")||this.get("branding.footer")||"")}),brandingBackground:t.computed(function(){return"background: #f6f6f6 url("+(this.get("model.configuration.branding_background")||this.get("branding.background")||h.cdnUrl("/img/experience-background.png"))+"); background-size: cover;"}),socialMediaBodyCopy:t.computed(function(){return this.get("configuration.socialShareMsg")||"Watch "+this.get("name")+", a Brightcove Interactivity Video experience."}),twitterUrl:t.computed(function(){return"https://twitter.com/intent/tweet/?"+("text="+encodeURIComponent(this.get("socialMediaBodyCopy")))+("&url="+encodeURI(window.location))+("&via="+encodeURIComponent("hapyakvideo"))}),facebookUrl:t.computed(function(){return"https://www.facebook.com/sharer/sharer.php?"+("u="+encodeURI(window.location))}),linkedInUrl:t.computed(function(){return"https://www.linkedin.com/shareArticle?mini=true"+("&summary="+encodeURIComponent(this.get("socialMediaBodyCopy")))+("&url="+encodeURI(window.location))+("&title="+encodeURIComponent("SlideSync Presentation"))+("&source="+encodeURIComponent("HapYak"))}),emailUrl:t.computed(function(){return"mailto:"+("?Subject="+encodeURIComponent("SlideSync Presentation"))+("&Body="+encodeURIComponent(this.get("socialMediaBodyCopy")+" "+window.location))}),hasSocial:t.computed(function(){var n=this.get("configuration"),i=!1;return!(1!=o.size(n)||!this.get("experienceProvisioning.socialShare"))||(["facebookActive","linkedinActive","emailActive","twitterActive"].forEach(function(e){var t=n[e];this.set(e,t),t&&(i=!==this.get("experienceProvisioning.cookieComplianceBanner")&&!r.get("hapyak_ack_cookie_policy")}),setupExternalContent:function(e,t){this.set("viewerPlaylist",e),this.set("playlistInstance",t)},actions:{save:function(){var e;this.")}),(e=o.clone(this.get("model.configuration"),!0)).useNativeControls=this.get("useNativeControls"),this.send("updateConfig",e)},updateExperience:function(e){this.get("model").setProperties(e)},updateCurrentProject:function(e,t,n){this.set("currentProjectTitle",e),this.set("currentProjectId",t),this.set("currentProjectIndex",n),p.dispatchEvent("resize")},startVideoChange:function(n){var i=document.getElementById("transition-screen"),r=document.getElementById("transition-image"),a=Date.now();i&&r?(i.style.display="block",function e(){var t=Date.now()-a;i.style.opacity<1?(i.style.opacity=Math.max(0,Math.min(1,t/600)),requestAnimationFrame(e)):r.style.opacity<1?(r.style.opacity=Math.max(0,Math.min(1,(t-600)/600)),requestAnimationFrame(e)):"function"==typeof n&&n()}()):"function"==typeof n&&n()},endVideoChange:function(){var n=document.getElementById("transition-screen"),i=document.getElementById("transition-image"),r=Date.now();n&&i&&!function e(){var t=Date.now()-r;0<i.style.opacity?(i.style.opacity=Math.max(0,Math.min(1,1-t/600)),requestAnimationFrame(e)):0<n.style.opacity?(n.style.opacity=Math.max(0,Math.min(1,1-(t-600)/600)),requestAnimationFrame(e)):n.style.display="none"}()},updateConfig:function(e,n){function i(e,t){var n,i;for(i in e.get("configuration")||e.set("configuration",{}),n=e.get("configuration"),e.set("configuration",{"":""}),t)t[i]!==f&&(n[i",n),s.store.commit()}var t,r=this.get("model"),a=this.get("layoutSpecificAddons");r&&r.data&&(tne(e,!0),s.store.findOne(l.Experience,{id:t},function(e){i(e,r.options)}),n&&a.forEach(function(t){n.some(function(e){if(e.name===t.name)return e.valuesToUpdate.forEach(function(e){i(t.addon,e)}),!0})}))},clone:function(e){var t=this.get("model"),n=this;(e=o.isUndefined(e)&&t?t.get("id"):e)&&s.DataRecord.find("/experiences/"+e+"/copy").then(function(){a.dev("Experience #"+e+" has been cloned"),n.notifyPropertyChange("dtStateChanged")})},remove:function(eleted")&&(this.unload(),this.set("isSaving",!0),this.transitionToRoute("experience"),t.deleteRecord(),s.store.commit().then(function(){a.dev("Experience has been deleted"),n.set("isSaving",!1)})):d.ajax(s.store.setupAjaxRequest("/api/experiences/"+e+"/","DELETE",function(){this.notifyPropertyChange("dtStateChanged")}.bind(n)))},openSocial:function(e){e&&c[e.replace("Url","").toLowerCase()](encodeURI(window.location),decodeURIComponent(this.get("socialMediaBodyCopy")),"SlideSync Presentation","HapYak",this.get("facebookId"))},dismissComplianceBanner:function(e){var t=r.get("hapyak_psid");this.set("cookieComplianceBanner",!1),t||i().replace(/\-/g,""),r.set("hapyak_ack_cookie_policy",1,30)},shouldHidePlaylist:function(e){var t=this.get("experienceConfig")||{};this.set("hidePlaylist",!t.alwaysShowPlaylist&&(e||t.hidePlaylist||"branching"===this.get("templateType")||"experience/view_slidesync_video_only"===this.get("experienceTemplate")))}}})}),define("portal/controllers/application_experience",["ember.hapyak"],function(e,t){"use strict";return e.Controller.extend({queryParams:["hapyak_project","hapyak_start_time","hapyak_asset_url","modal_text","modal_confirm","modal_title","download_text","eventState"],needs:["experience"],experience:e.computed.alias("controllers.experience"),layout:e.computed.alias("experience.layout"),actions:{open:function(e,t,n){if(e)return this.set("modalOpen",!rtal/controllers/experience","portal/controllers/application_experience"],function(t,n,i,e){"use strict";return{attachTo:function(e){t.extend(e,{ExperienceController:n,ApplicationController:i})}}}),define("portal/routesExperience",["lodash.noconflict","ember.hapyak","module"],function(a,e,t){"use strict";var i=t.config().experienceInstance,n={ApplicationRoute:e.Route.extend({renderTemplate:function(){this.render()}}),ExperienceViewRoute:e.Route.extend({setupController:function(e,t){var n=this.controllerFor("experience");i&&n.load(i)},actions:{open:function(e,t,n,i){var r;e&&(r={into:"application",outlet:"modal"},"objec&(r.controller=t),"function"==typeof n&&n(),this.render(e,r))}}}),RestrictedExperienceViewRoute:e.Route.extend({setupController:function(e,t){var n=this.controllerFor("experience");i&&n.load(i)},actions:{open:function(e,t,n,i){var r;e&&(r={into:"application",outlet:"modal"},"object"==typeof i&&(this.controllerFor(t).modalOptions=i),a.isString(t)&&(r.controll(e){a.extend(e,n)}}}),define("portal/routerExperience",["logging","lodash.noconflict"],function(t,n,e){"use strict";function i(){this.route("experienceView",{path:"/experience/:experience_id"})}return{attachTo:function(e){e=e.Router;n.isUndefined(e)?t.debug("App.Router is undefined"):e.map(i)}}}),define("portal/components/external-content",["ember.hapyak","utils.hms"],function(a,t,e){"use strict";var i,o,s=0;return a.Component.extend({classNames:["hapyak-component-external-content"],viewerPlaylist:null,currentProjectIndex:0,sectionsArray:a.A([]),sections:{},didInsertElement:function(){var e=this.get("viewerPlaylist"),t=e&&e.currentPlayer;"function"==typeof t&&(i=t())&&(this.set("player",i),this.set("sectionsArray",a.A([])),i.addEventListener("timeupdate",this.highlightCurrentChapter.bind(this)),this.createExternalPlaylist(e.all()),i.annotations&&i.annotations.all("bookmark",this.createExternalChapters.bind(this)))},highlightCurrentChapter:function(){var e,t,n=i.currentTime;.5<Math.abs(n-s)&&(s=n,(e=this.get("sections.chapters.content"))&&(e.forEach(function(e){e.properties.start<=n&&(t=e.annotationId)}),t&&t!==o&&(o&&a.$("#"+o).toggleClass("selected",!1),a.$("#"+t).toggleClass("selected",!0),o=t)))},createExternalPlaylist:function(e){var n=this;e&&e.length&&(e.forEach(function(e,t){a.set(e,"current",n.get("currentProjectIndex")===t)}),e={selected:!1,name:"playlbject(e),this.set("sections.playlist",e),this.send("selectSection","playlist"))},createExternalChapters:function(e){e&&0!==e.length&&(e.forEach(function(e){e.time=t.toString(e.properties.start)}),e={selected:!1,name:"chapters",content:a.A(e)},this.get("sectionsArray").addObject(e),this.set("sections.chapters",e),this.send("selectSection","chapters"))},actions:{goToChapter:function(e){var t=this.get("player");t&&(t.currentTime=e.properties.start)},goToProject:function(e){var t=this.get("sections.playlist.content"),n=this.get("playlistInstance.actions.goTo"),t=t.indexOf(e);t!==this.get("currentProjectIndex")&&"function"==typeof n&&n({data:{index:t}})},selectSection:function(t){var n,e=this,i=this.get("sectionsArray"),r=this.get("sections");i.forEach(function(e){n=e.name===t,a.set(e,"selected",n),a.set(r,e.name,e)}),requestAnimationFrame(function(){s=-1,o=null,e.highlightCurrentChapter()})}}})}),define("portal/components/off-video-external-chapters",["ember.hapyak","utils","utils.hms"],function(a,n,t,e){"use strict";var i,o,r,s,l,c=0;return a.Component.extend({elementId:"sideBarContainer",classNames:["hapyak-component-off-video-external-chapters"],viewerPlaylist:null,currentProjectIndex:0,currentProjectTitle:null,useLegacyStyles:!1,sectionsArray:a.A([]),sections:{},didInsertElement:function(){n.dispatchEvent("resize");var e=this.get("viewerPlaylist"),t=e&&e.currentPlayer;"function"==typeof t&&(i=t())&&(this.set("player",i),this.set("sectionsArray",a.A([])),i.addEventListener("timeupdate",this.highlightCurrentChapter.bind(this)),this.createExternalPlaylist(e.all()),i.annotations&&i.annotations.all("bookmark",this.createExternalChapters.bind(this)),i.getControlState(function(e){r=e}),i.addEventListener("controlvisibilitychange",e=>{(r=e)&&s&&l!==s.annotationId?(i.currentTime=s.startTime,s=null):r&&s&&l===s.annotationId&&(s=null)}))},highlightCurrentChapter:function(){var e,t=i.currentTime,n=this.get("useLegacyStyles")?"active":"selected";.5<Math.abs(t-c)&&(c=t,(e=this.get("sections.chapters.content"))&&(e.forEach(function(e){e.properties.start<=t&&(l=e.annotationId)}),l&&l!==o&&(o&&a.$("#"+o).toggleClass(n,!1),a.$("#"+l).toggleClass(n,!0),o=l)))},createExternalPlaylist:function(e){var n=this;e&&e.length&&(e.forEach(function(e,t){a.set(e,"current",n.get("currentProjectIndex")===t)}),e={selected:!1,name:"playlist",content:a.A(e)},this.get("sectionsArray").addObject(e),this.set("sections.playlist",e),this.send("selectSection","playlist"))},createExternalChapters:function(e){e&&0!==e.length&&(e.forEach(function(e){e.time=t.toString(e.startTime,!1)}),e={selected:!1,name:"chapters",content:a.A(e)},this.get("sectionsArray").addObject(e),this.set("sections.chapters",e),this.send("selectSection","chapters"))},actions:{goToChapter:function(e){var t=this.get("player");t&&(t.getControlState(function(e){r=e}),r?t.currentTime=e.startTime:s=e,t.play())},goToProject:function(e){var t=this.get("sections.playlist.content"),n=this.get("playlistInstance.actions.goTo"),t=t.indexOf(e);t!==this.get("currentProjectIndex")&&"function"==typeof n&&n({data:{index:.get("sectionsArray"),r=this.get("sections");i.forEach(function(e){n=e.name===t,a.set(e,"selected",n),a.set(r,e.name,e)}),requestAnimationFrame(function(){c,define("gradingAlgorithms/percentWatched",[],function(){"use strict";var s,n;return{id:"percentWatched",name:"Percent Watched",editor:null,completed:function(){return 1===this.calculateGrade()},setup:function(e,t){e&&e.addon&&"function"==typeof e.getCompletionPercent&&(s=[],this.completionPercent=e.getCompletionPercent(e.addon)/100,this.passFail=e.getPassFail(e.addon),n=t)},listen:function(e){var t;e&&e.data&&(e="string"==typeof e.data?JSON.parse(e.data):e.data,t=n.get("setProjectScore"),e&&e.properties&&("hapyak-timing"===e.context&&"Accrued Time"===e.event||"hapyak-tracking"===e.context&&"Player Action"===e.event&&"End-under"===e.properties.Action)&&(s.push(e),e=this.calculateGrade(),"function"==typeof t&&t(e,e)))},calculateGrade:function(){var e,t,n=s[s.length-1];if(n){var n=n.properties,i=n["Video Slice Play Time Accrued"],n=+n["Video Duration"],r=n/10,a=this.passFail?this.completionPercent||.7:1,o=0;if(n){for(e in i)o+=t=r<(t=+i[e])?r:t;return n=Math.round(100*(o/(n*a)))/100,a=Math.min(1,Math.max(0,n)),this.passFail?Math.floor(a):a}}},getDivisor:function(){return n.get("controller.projectsInPlaylist").length}}}),define("gradingAlgorithms/gateUntilWatched",[],function(){"use strict";var o,n;return{id:"gateUntilWatched",name:"Gate Until Watched",editor:null,completed:function(){return this.calculateGrade()},setup:function(e,t){e&&e.addon&&"function"==typeof e.getCompletionPercent&&(o=[],this.completionPercent=e.getCompletionPercent(e.addon)/100,n=t)},listen:function(e){var t;e&&e.data&&(e="string"==typeof e.data?JSON.parse(e.data):e.data,t=n.get("setProjectScore"),e&&eet("tooltip",""),"function"==typeof t&&t(1,1))))},afterCheckedGrade:function(){n.set("tooltip","You cannot submit your grade until you have completed the assignment."),n.set("enableGrading",!1)},calculateGrade:function(){var e,t,n=o[o.length-1];if(n){var n=n.properties,i=n["Video Slice Pla i)a+=t=r<(t=+i[e])?r:t;return n=Math.abs(a/(n*this.completionPercent)-1)<=.1,Math.floor(Math.min(1,Math.max(0,n)))}}},getDivisor:function(){return n.get("controller.projectsInPlaylgAlgorithms/quizResults",["module","utils.embed"],function(e,t,n){"use strict";var r,a,o,s=0,l=[];return{id:"quizResults",name:"Quiz Results",editor:null,completed:function(){return r>=a.length},setup:function(e,t){o=t,r=s=0,a={},this.editor.annotations.all(function(e){!e&&0<e.length||(e.forEach(function(e){e&&"quiz"===e.type&&(s+=e.properties.quiz.pages.length,a[e.id]=0)}),0===s&&(t.set("tooltip","You cannot submit a grade because there are no quizzes to grade."),t.set("disableGrading",!0),t.get("controller").send("open","viewerModal","experience",null,{title:"No Quizzes.",message:"This assignment is graded based on the results of quiz submissions, but there are no quizzes. You cannot submit a grade but you can still view the material. Please contact your Instructor and let them know the assignment is not fully setup."})))})},listen:function(e){var t,n,i;e&&e.data&&(e="string"==typeof e.data?JSON.parse(e.data):e.data,t=o.get("setProjectScore"),n=0,e&&e.properties&&(i=e.properties,"hapyak-tracking"===e.context&&"quiz"===i["Annotation Type"]&&"Answer"===i.Action&&i.hasOwnProperty("Page")&&(n=i.Page,l[n]?l[n].response+=", "+i.Answer:l[n]={identifier:i["Annotation ID"]+"_"+n,description:"Question: "+i.Question,response:"Answer: "+i.Answer,grade:i.Correct?1:0},l[n].id=l[n].response.replace(/\s/g,"_")),"hapyak-tracking"===e.context&&"quiz"===i["Annotation Type"]&&"Submit"===i.Action&&(a[i["Ann(),"function"==typeof t&&t(n,n/s,{quizSummary:l}),l=[])))},calculateGrade:function(){var e,t=0;for(e in a)t+=a[e]||0;return t},getDivisor:function(){return e.config().totalNumberOfQuizQuestions}}}),define("eLearningStandards.ltiCommunication",["jquery.noconflict","logging"],function(a,o){"use strict";var e={standard:"lti",getGrade:function(n,i){var r=0;a.ajax({type:"GET",url:hapyak.ltiHost+"/api/lti/getGrade",xhrFields:{withCredentials:!0},success:function(e,t){(e=JSON.parse(e))&&"function"==typeof n&&n(e.grade)},error:function(e,t,n){o.error(n),"timeout"===t&&r<1?(o.info("Error: Connection timeout. Trying again."),r++,a.ajax(this)):"function"==typeof i&&i()}})},setGrade:function(e,t,i){var r=0;a.ajax({type:"POST",url:hapyak.ltiHost+"/api/lti/grade",data:{grade:e},xhrFields:{withCredentials:!0},success:function(e,t){"function"==typeof i&&i(!0)},error:function(e,t,n){o.error(n),"timeout"===t&&r<1?(o.info("Error: Connection timeout. Trying again."),r++,a.ajax(this)):"function"==typeof i&&i(!1)}})}};return{setup:function(){return e}}}),define("eLearningStandards.scormCommunication",["module"],function(e){"use strict";var r,a,o,s={},t=0,l=0,c=0,n={standard:"scorm",getGrade:function(e,t){d("get","cmi.score.scaled",null,e)},setGrade:function(e,t,n){for(var i in r=e,a=n,t)t.hasOwnProperty(i)&&t[i].questions&&0<t[i].length&&(l+=t[i].questions.length),l+=1;if(t&&0<Object.keys(t).length&&"2004"===o)for(i in t)t.hasOwnProperty(i)&&!function e(t){var n="cmi.objectives."+c;var i;d("set",n+".id",t.id,function(){d("set",n+".description",t.description,function(){d("set",n+".score.raw",100*t.grade,function(){d("set",n+".score.max","100",function(){d("set",n+".completion_status","completed",function(){if(t.questions)for(i in t.questions)e(t.questions[i]);else t.response&&u(t),p()})})})})})}(t[i]);else h()}};function d(e,t,n,i){var r=Math.random()+"";s[r]=i,window.parent.postMessage(JSON.stringify({msg:"hapyak_scorm_request",data:{id:r,type:e,key:(i=t,r={"cmi.success_status":"cmi.core.lesson_status","cmi.completion_status":"cmi.core.lesson_status","cmi.score.raw":"cmi.core.score.raw","cmi.score.scaled":"cmi.core.score.raw"},"2004"!==o&&r[i]||i),value:n}}),"*")}function u(e){var t="cmi.interactions."+c;d("set",t+".id",e.id,function(){d("set",t+".description",e.description,function(){d("set",t+".objectives."+c+".id",e.id,function(){d("set",t+".learner_response",e.response,function(){p()})})})})}function p(){c++,l<=++t&&h()}function h(){d("set","cmi.score.raw",100*r,function(e){d("set","cmi.success_status","passed",function(){d("set","cmi.completion_status","completed",function(){window.parent.postMessage(JSON.stringify({msg:"hapyak_scorm_command",data:{commands:["save","quit"]}}),"*"),"function"==typeof a&&a(e)})})})}return{setup:function(e){if(o=e)return win){e=JSON.parse(e.data).data;e&&s[e.id]&&(s[e.id](e),dlistener",[],function(){"use strict";var i={};return{addEventListener:function(e,t){(i[e]||(i[e]=[])).push(t)},removeEventListener:function(e,t){(e=i[e])&&e.filter(function(e){if(e!==t)return e})},emit:function(e){var t,n=i[e];e&&n&&(t=Array.prototype.slice.call(arguments).slice(1),n.forEach(function(e){e.apply(window,t)}))}}}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("velocity",t):e.Velocity=t()}(this,function(){"use strict";var z="function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||table=!0),Object.defineProperty(e,i.key,i)}}function A(e){return!0===e||!1===e}function P(e){return"[object Function]"===Object.prototype.toString.call(e)}function D(e){return!(!e||!e.nodeType)}function ee(e){return"number"==typeof e}function te(e){return!(!e||"object"!==(void 0===e?"undefined":z(e))||e.ect)}function ne(e){return"string"==typeof e}functiid 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.nenow||function(){return(new Date).getTime()};function v(e,t){e instanceof Element&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(\\s|$)","gi")," "))}var L={};function t(e,t){var n,i=e[0],e=e[1];ne(i)?P(e)?L[i]&&(n=L,!Object.prototype.propertyIsEnumerable.call(n,i))?console.warn("VelocityJS: Trying to override internal 'registerAction' callback",i):!0===t?I(L,i,e):L[i]=e:console.warn("VelocityJS: Trying to set 'registerActioinvalid value:",t,e):console.warn("VelocityJS: Trying to set 'registerEasing' name to an invalid value:",t)}function Q(e,t,n,i){return t+e*(n-t)}function _(e){return Math.min(Math.max(e,0),1)}function b(e,t){return 1-3*t+3*e}function T(e,t,n){return((b(t,n)*e+(3*n-6*t))*e+3*t)*e}function S(e,t,n){return 3*b(t,n)*e*e+2*(3*n-6*t)*e+3*t}function r(){for(var v=4,g=.001,y=1e-7,b=10,w=11,E=1/(w-1),e=("Float32Array"in window),t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];if(4===n.length){for(var r=0;r<4;++r)if("number"!=typeof n[r]||isNaN(n[r])||!isFinite(n[r]))return;var k=_(n[0]),a=n[1],x=_(n[2]),o=n[3],C=new(e?Float32Array:Array)(w),s=!1,l="generateBezier("+[k,a,x,o]+")",e=function(e,t,n,i){if(!s&&(s=!0,k!==a||x!==o))for(var r=0;r<w;++r)C[r]=T(r*E,k,x);return 0===e?t:1===e?n:k===a&&x===o?t+e*(n-t):t+T(function(e){for(var t=w-1,n=0,i=1;i!==t&&C[i]<=e;++i)n+=E;var r=n+(e-C[--i])/(C[i+1]-C[i])*E,a=S(r,k,x);if(g<=a){for(var o=e,s=r,l=0;l<v;++l){var c=S(s,k,x);if(0===c)return s;s-=(T(s,k,x)-o)/c}return s}if(0===a)return r;for(var d=e,u=n,p=n+E,h=void 0,f=void 0,m=0;0<(h=T(f=u+(p-u)/2,k,x)-d)?p=f:u=f,Math.absPoints=functioisterEasing",n],!0),n(["linear",Q]),n(["swing",functi),a=r(0,0,.58,1),o=r(.42,0,.58,1);function w(e){return-e.tension*e.x-e.friction*e.v}function E(e,t,n){n={x:e.x+n.dx*t,v:e.v+n.dv*t,tension:e.tension,friction:e.friction};return{dx:n.v,dv:w(n)}}n(["ease",r(.25,.1,.25,1)]),n(["easeIn",i]),n(["ease-in",i]),n(["easeOut",a]),n(["ease-out",a]),n(["easeInOut",o]),n(["ease-in-out",o]),n(["easeInSine",r(.47,0,.745,.715)]),n(["easeOutSine",r(.39,.575,.565,1)]),n(["easeInOutSine",r(.445,.05,.55,.95)]),n(["easeInQuad",r(.55,.085,.68,.53)]),n(["easeOutQuad",r(.25,.46,.45,.94)]),n(["easeInOutQuad",r(.455,.03,.515,.955)]),n(["easeInCubic",r(.55,.055,.675,.19)]),n(["easeOutCubic",r(.215,.61,.355,1)]),n(["easeInOutCubic",r(.645,.045,.355,1)]),n(["easeInQuart",r(.895,.03,.685,.22)]),n(["easeOutQuart",r(.165,.84,.44,1)]),n(["easeInOutQuart",r(.77,0,.175,1)]),n(["easeInQuint",r(.755,.05,.855,.06)]),n(["easeOutQuint",r(.23,1,.32,1)]),n(["easeInOutQuint",r(.86,0,.07,1)]),n(["easeInExpo",r(.95,.05,.795,.035)5,.82,.165,1)]),n(["easeInOutCirc",r(.785,.135,.15,.86)]);var k={};function x(e,t){return ee(e)?e:ne(e)?y[e.toLowerCase()]||parseFloat(e.replace("ms","").replace("s","000")):null==t?void 0:x(t)}function C(e){if(A(e))return e;"VelocityJS: Trying to set 'complete' to an invalid value:",e)}function V(e){var t=x(e);if(!isNaN(t))return t;null!=e&&console.error("VelocityJS: Trying to set 'delay' to an invalid value:",e)}function ae(e,t){var n=x(e);if(!isNaN(n)&&0<=n)return n;null==e||t||co",e)}function ie(e,t,n){if(ne(e))return g[e];if(P(e))return e;if(Array.isArray(e)){if(1===e.length)return i=e[0],k[i]||(k[i]=function(e,t,n){return 0===e?t:1===e?n:t+Math.round(e*i)*(1/i)*(n-t)});if(2===e.length)return function e(t,n,i){for(var r,a,o,s,l,c,d,u={x:-1,v:0,tension:parseFloat(t)||500,friction:parseFloat(n)||20},p=[0],t=null!=i,h=0,f=void 0,m=t?(h=e(u.tension,u.friction))/i*.016:.016;a=m,o=d=c=l=s=o=void 0,o={dx:(r=f||u).v,dv:w(r)},s=E(r,*(s.dv+l.dv)+c.dv),r.x=r.x+d*a,r.v=r.v+o*a,f=r,p.push(1+f.x),h+=16,1e-4<Math.abs(f.x)&&1e-4<Math.abs(f.v););return t?function(e,t,n){return 0===e?t:1===e?n:t+p[Math.floor(e*(p.length-1))]*(n-t)}:h}(e[0],e[1],t);if(4===e.length)return r.apply(null,e)||!1}var i;null==e||n||console.error("VelocityJS: Trying to set 'easing' to an invalid value:",e)}function X(e){var t;return!1===e?0:(t=parseInt(e,10),!isNaN(t)&&0<=t?Math.min(t,60):void(null!=e&&console.warn("VelocityJS: Trying to set 'fpsLimit' to an invalid value:",e)))le.warn("VelocityJS: Trying to set 'loop' to an invalid value:",e)}function Z(e,t){if(!1===e||ne(e))return e;null==e||t||console.warn("VelocityJS: Trying to set 'queue' to an invalid value:",e)}function oe(e){switch(e){case!1:return 0;case!0:return!0;default:var t=parseInt(e,10);if(!isNaN(t)&&0<=t)return t}nulll!=e&&console.error("VelocityJS: Trying to set 'speed' to an invalid value:",e)}function le(e){if(A(e))return e;null!=e&&console.error("VelocityJS: Trying to set 'sync' to an invalid value:",e)}var ce=void 0,de=void 0,ue=void 0,pe=void 0,he=void 0,fe=void 0,me=void 0,ve=void 0,ge=void 0,ye=void 0,be=void 0,we=void 0,Ee=void 0,ke=void 0,xe=void 0,Ce=void 0,j=(e(_e,null,[{key:"reset",value:function(){ce=!0,ue=de=void 0,pe=0,fe=ie("swing",he=400),ye=980/(me=60),we=be=!(ve=0),Ee="",xe=1,Ce=!(ke=0)}},{key:"cache",get:function(){return ce},set:function(e){void 0!==(e=C(e))&&(ce=e)}},{key:"begin",get:function(){return de},set:function(e){void 0!==(e=N(e))&&(de=e)}},{key:"complete",get:function(){return ue},set:function(e){void 0!==(e=R(e))&&(ue=e)}},{key:"delay",get:fu==(e=V(e))&&(pe=e)}},{key:"duration",get:function(){return he},set:function(e){void 0!==(e=ae(e))&&(he=e)}},{key:"easing",get:function(){return fe},set:function(e){void 0!==(e=ie(e,he))&&(fe=e)}},{key:"fpsLimit",get:function(e){void 0!==(e=X(e))&&(ye=980/(me=e))}},{key:"loop",get:function(){return ve},set:function(e){void 0!==(e=J(e))&&(ve=e)}},{key:"mobileHA",get:function(){return ge},set:function(e){A(e)&&(ge=e)}},{key:"minFrameTime",get:function(){return ye}},{key:"promise",get:function(){return be},set:function(e){var t;void 0!==(e=A(t=e)?t:void(null!=t&&console.warn("VelocityJS: Trying to set 'promise' to an invalid value:",t)))&&(be=e)}},{key:"promiseRejectEmpty",get:function(){return we},set:function(e){var t;void 0!==(e=A(t=e)?t:void(null!=t&&console.warn("VelocityJS: Trying to set 'promiseRejectEmpty' to an invalid value:",t)))&&(we=e)}},{key:"queue",get:function(){return Ee},set:function(e){void 0!==(e=Z(e))&&(Ee=e)}},{key:"repeat",get:function(){return ke},set:function(e){void 0",get:f(xe=e)}},{key:"sync",get:function(){return Ce},set:function(e){void 0!==(e=le(e))&&(Ce=e)}}]),_e);function _e(){if(!(this instanceof _e))throw new TypeError("Cannot call a class as a function")}Object.freeze(j),j.reset();var Te=[],Se={},Ae=new Set,l=[],Pe=new Map,Ie="velocityData";function H(e){var t=e[Ie];if(t)return t;for(var n=e.ownerDocument.defaultView,i=0,r=0;r<l.length;r++){var a=l[r];ne(a)?e instanceof n[a]&&(i|=1<<r):e instanceof a&&(i|=1<<r)}t={types:i,count:0,computedStyle:null,cache:{},queueList:{},lastAnimationList:{},lastFinishList:{},window:n};return Object.defineProperty(e,Ie,{value:t}),t}var i=window&&window===window.window,a=i&&void 0!==window.pageYOffset,q={isClient:i,isMobile:i&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isGingerbread:i&&/Android 2\.3\.[3-7]/i.test(navigator.userAgent),prefixElement:i&&document.createElement("div"),windowScrollAnchor:a,scrollAnchor:a?window:!i||document.documentElement||document.body.parentNode||document.body,scrollPropertyLeft:a?"pageXOffset":"scrollLeft",scrollPropertyTop:a?"pageYOffset":"scrollTop",className:"velocity-animating",isTicking:!1,first:void 0,last:void 0,firstNew:void 0};function Le(e){var t=q.last,t=(e._prev=t,e._next=void 0,t?t._next=e:q.first=e,q.last=e,q.firstNew||(q.firstNew=e),e.element);H(t).count++||(e=t,t=q.className,e instanceof Element&&(e.classList?e.classList.add(t):(v(e,t),e.className+=(e.className.length?" ":"")+t)))}function De(e){var t=e._next,n=e._prev,i=(null==e.queue?e.options:e).queue;q.firstNew===e&&(q.firstNew=t),q.first===e?q.first=t:n&&(n._next=t),q.last===e?q.last=n:t&&(t._prev=n),i&&H(e.element)&&(e._next=e._prev=void 0)}var re={};function Oe(e){var t=e.options,n=O(e.queue,t.queue),i=O(e.loop,t.loop,j.loop),r=O(e.repeat,t.repeat,j.repeat),a=8&e._flags;if(a||!i&&!r){var o=e.element,s=H(o);if(--s.count||a||v(o,q.className),t&&++t._completed===t._total){if(!a&&t.complete){{var l=e;var c=l.complete||l.options.complete;if(c)try{var d=l.elements;c.call(d,d,l)}catch(l){setTimeout(function(){throw l},1)}}t.complete=null}c=t._resolver;c&&(c(e.elements),delete t._resolver)}!1!==n&&(a||(s.lastFinishList[n]=e.timeStart+O(e.duration,t.duration,j.duration)),!1!==(d=n)&&(ne(d)||(d=""),(s=(a=H(o)).queueList[d])?(a.queueList[d]=s._next||null,Le(s)):null===s&&delete a.queueList[d])),De(e)}else r&&!0!==r?e.repeat=r-1:i&&!0!==i&&(e.loop=i-1,e.repeat=O(e.repeatAgain,t.repeatAgain,j.repeatAgain)),i&&(e._flags^=64),!1!==n&&(H(e.element).lastFinishList[n]=e.timeStart+O(e.duration,t.duration,j.duration)),e.timeStart=e.ellapsedTime=e.percentComplete=0,e._flags&=-5}function s(e){var t=e[0],n=e[1],i=e[2];if((!ne(t)||window[t]instanceof Object)&&(ne(t)||t instanceof Object))if(ne(n))if(P(i)){var r,a=l.indexOf(t),o=3;if(a<0&&!ne(t))if(Pe.has(t))a=l.indexOf(Pe.get(t));else for(var s in window)if(window[s]===t){(a=l.indexOf(s))<0&&(a=l.push(s)-1,Te[a]={},Pe.set(t,s));break}a<0&&(a=l.push(t)-1,Te[a]={}),Te[a][n]=i,ne(e[o])&&(r=e[o++],(Se[r]||(Se[r]=[])).push(i)),!1===e[o]&&Ae.add(n)}else console.warn("VelocityJS: Trying to set 'registerNormalization' callback to an invalid value:",n,i);else console.warn("VelocityJS: Trying to set 'registerNormalization' name to an invalid value:",n);else console.warn("VelocityJS: Trying to set 'registerNormalization' constructor to an invalid value:",t)}function Me(e){var t=e[0],e=e[1],n=l.indexOf(t);if(n<0&&!ne(t))if(Pe.has(t))n=l.indexOf(Pe.get(t));else for(var i in window)if(window[i]===t){n=l.indexOf(i);break}return 0<=n&&Te[n].hasOwnProperty(e)}function Ne(e,t){for(var e=H(e),n=void 0,i=l.length-1,r=e.types;!n&&0<=i;i--)r&1<<i&&(n=Te[i][t]);return n}function B(e,t,n,i){var r=Ae.has(t),a=!r&&H(e);(r||a&&a.cache[t]!==n)&&(r||(a.cache[t]=n||void 0),(i=i||Ne(e,t))&&i(e,n),2<=G.debug&&console.info('Set "'+t+'": "'+n+'"',e))}t(["registerNormalization",s]),t(["hasNormalization",Me]);var Re={};function Ve(e){return Re[e]||(Re[e]=e.replace(/-([a-z])/g,functtion(e,t,n,i){return Ue(0,t+t,n+n,i+i)}).replace(qe,function(e,t,n){return Be[n]?(t||"rgba(")+Be[n]+(t?"":",1)"):e}).replace(ze,function(e,t,n){return"rgba("+n.replace(Fe,"")+(t?"":",1")+")"})}function We(e,t,n){if("border-box"===W(e,"boxSizing").toString().toLowerCase()!==n)return 0;var t="width"===t?["Left","Right"]:["Top","Bottom"],t=["padding"+t[0],"padding"+t[1],"border"+t[0]+"Width","border"+t[1]+"Width"],i=0,r=!0,a=!1,o=void 0;try{for(var s,lseFloat(W(e,c));isNaN(d)||(i+=d)}}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n?-i:i}function $e(e,t){return e.getBoundingClientRect()[t]+We(e,t,!0)+"px"}function Ye(e,t){var n=H(e),i=n.computedStyle||n.window.getComputedStyle(e,null),r=0;if(n.computedStyle||(n.computedStyle=i),"none"===i.display)switch(t){case"width":case"height":return B(e,"display","auto"),r=$e(e,t),B(e,"display","none"),String(r)}if("auto"===(r=(r=i[t])?r:e.style[t]))switch(t){case"width":case"height":r=$e(e,t);break;case"top":case"left":case"right":case"bottom":var a=W(e,"position");if("fixed"===a||"absolute"===a){r=e.getBoundingClientRect[t]+"px";break}default:r="0px"}return r?String(r):""}function W(e,t,n,i){var r=H(e),a=void 0;retur]:(n=n|1,2}$/i,Ke={functioh,r)},number:function(e,t,n,i,r,a){return String(e)+function(e){for(var t in Se)if(Se[t].includes(e))return t;return""}(a.fn)},string:U,undefined:function(e,t,n,i,r,a){return U(W(t,r,a.fn)||"")}};function Qe(e,t){var n,i=e.tweens=Object.create(null),r=e.elements,a=e.element,o=r.indexOf(a),s=H(a),l=O(e.queue,e.options.queue),c=O(e.options.duration,j.duration);for(n in t)if(t.hasOwnProperty(n)){var d=Ve(n),u=Ne(a,d),p=t[n];if(!u&&"tween"!==d){G.debug&&console.log('Skipping "'+n+'" due to a lack of browser support.');continue}if(null==p){G.debug&&console.log('Skipping "'+n+'" due to no value supplied.');continue}var h,f=i[d]={},m=void 0,v=void 0;f.fn=u,P(p)&&(p=p.call(a,o,r.length,r)),Array.isArray(p)?(u=p[1],h=p[2],m=p[0],v=ne(u)&&(/^[\d-]/.test(u)||Ge.test(u))||P(u)||ee(u)?u:ne(u)&&g[u]||Array.isArray(u)?(f.easing=ie(u,c),h):u||h):m=p,f.end=Ke[void 0===m?"undefined":z(m)](m,a,r,o,d,f),null==v&&!1!==l&&void 0!==s.queueList[l]||(f.start=Ke[void 0===v?"undefined":z(v)](v,a,r,o,d,f),et(d,f))}}var Xe=/((?:[+\-*/]=)?(?:[+-]?\d*\.\d+|[+-]?\d+)[a-z%]*|(?:.(?!$|[+-]?\d|[+\-*/]=[+-]?\d))+.|.)/g,Je=/^([+\-*/]=)?([+-]?\d*\.\d+|[+-]?\d+]=[""]:e[n]=K(r[n].match(Xe)),t[n]=0,s=s||1<e[n].length}for(var l=[],c=l.pattern=[],i=function(e){if(ne(c[c.length-1]))c[c.length-1]+=e;else if(e){c.push(e);for(var t=0;t<o;t++)l[t].push(null)}},d=function(){if(!(s||1<c.length)){for(var e="display"===a,t="visibility"===a,n=0;n<o;n++){var i=r[n];l[n][0]=i,l[n].easing=ie(e&&"none"===i||t&&"hidden"===i||!e&&!t?"at-end":"at-start",400)}return c[0]=!1,l}},u=!0,p=0;p<o;p++)l[p]=[];for(;u;){for(var h=[],f=[],m=void 0,v=!1,g=!1,y=0;y<o;y++){var b=t[y]++,b=e[y][b];if(!b){if(y)return;for(;y<o;y++){var R=t[y]++;if(e[y][R])return d()}u=!1;break}var w=b.match(Je);if(w){if(m)return d();var E=parseFloat(w[2]),k=w[3],w=w[1]?w[1][0]+k:void 0,x=w||k;E&&!f.includes(x)&&f.push(x),k||(E?g=!0:v=!0),h[y]=w?[E,x,!0]:[E,x]}else{if(h.length)return d();if(m){if(m!==b)return d()}else m=b}}if(m)i(m);else if(f.length)if(2===f.length&&v&&!g&&f.splice(f[0]?1:0,1),1===f.length){var C=f[0];switch(C[0]){case"+":case"-":case"*":case"/":return void(a&&console.error('Velocity: The first property must not contain a relative function "'+a+'":',r))}c.push(!1);for(var _=0;_<o;_++)l[_].push(h[_][0]);i(C)}else{i("calc(");for(var V=c.length-1,T=0;T<f.length;T++){var S=f[T],A=S[0],P="*"===A||"/"===A,I=P||"+"===A||"-"===A;P&&(c[V]+="(",i(")")),T&&i(" "+(I?A:"+")+" "),c.push(!1);for(var L=0;L<o;L++){var D=h[L],D=D[1]===S?D[0]:3===D.length?l[L-1][l[L-1].length-1]:P?1:0;l[L].push(D)}i(I?S.substring(1):S)}i(")")}}for(var O=0,M=0;O<c.length;O++){var N=c[O];ne(N)?M&&0<=N.indexOf(",")?M++:0<=N.indexOf("rgb")&&(M=1):M&&(nction et(e,t,n,i){var r=t.start,a=t.end;if(ne(a)&&ne(r)){var o,s,l,c=Ze([r,a],e);if(!c&&i&&(o=r.match(/\d\.?\d*/g)||["0"],s=o.length,l=0,c=Ze([a.replace(/\d+\.?\d*/g,function(){return o[l++%s]}),a],e)),c)switch(G.debug&&console.log("Velocity: Sequence found:",c),c[0].percent=0,c[1].percent=1,t.sequence=c,t.easing){case g["at-start"]:case g.during:case g["at-end"]:c[0].easing=c[1].easing=t.easing}}}function tt(e){if(q.firstNew===e&&(q.firstNew=e._next),!(1&e._flags)){var t,n=e.element,i=e.tweens;for(t in O(e.options.duration,j.duration),i){var r,a=i[t];nulg('tweensContainer "'+t+'": '+JSON.stringify(a),n)}e._flags|=1}}function nt(e){var t=e.begin||e.options.begin;if(t)try{var n=e.elements;t.call(n,n,e)}catch(e){setTimeout(function(){throw e},1)}}function it(){var e=!0,t=!1,n=void 0;try{for(var i,r=st[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){d=c=l=s=o=a=void 0;var a=i.value,o=a.progress||a.options.progress;if(o)try{var s=a.elements,l=a.percentComplete,c=a.options,d=a.tween;o.call(s,s,l,Math.max(0,a.timeStart+(null!=a.duration?a:null!=c.duration?c:j).duration-Y),void 0!==d?d:String(100*l),a)}catch(a){setTimeout(function(){throw a},1)}}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}st.clear();var u=!0,t=!1,n=void 0;try{for(var p,h=ot[Symbol.iterator]();!(u=(p=h.next()).done);u=!0)Oe(p.value)}catch(e){t=!0,n=e}finally{try{!u&&h.return&&h.return()}finally{if(t)throw n}}ot.clear()}function rt(e){return setTimeo.now()-Y)))}var at,ot=new Set,st=new Set,lt=("function"!=typeof(o=window.performance||{}).now&&(at=o.timing&&o.timing.navigationStart?o.timing.navigationStart:m(),o.now=function(){return m()-at}),o),ct=window.requestAnimationFrame||rt,dt=void 0,$=void 0,Y=0;try{($=new Worker(URL.createObjectURL(new Blob(["("+function(){var t=this,n=void 0;this.onmessage=function(e){switch(e.data){case!0:n=n||setInterval(function(){t.postMessage(!0)},1e3/30);break;case!1:n&&(clear")()"])))).onmessage=function(e){(!0===e.data?ut:it)()},q.isMobile||void 0===document.hidden||document.addEventListener("visibilitychange",function(){$.postMessage(q.isTicking&&document.hidden)})}catch(z){}function ut(e){if(!dt){if(!(dt=!0)!==e){var t=lt.now(),n=Y?t-Y:1e3/60,i=j.speed,r=j.easing,a=j.duration,o=void 0,s=void 0;if(n>=j.minFrameTime||!Y){for(Y=t;q.firstNew;)tt(q.firstNew);for(o=q.first;o&&o!==q.firstNew;o=o._next){var l,c,d,u=o.element,p=H(u);u.parentNode&&p?(u=o.options,l=o._flags,(d=o.timeStart)||(d=t-n,!1!==(c=(null!=o.queue?o:u).queue)&&(d=Math.max(d,p.lastFinishList[c]||0)),o.timeStart=d),16&l?o.timeStart+=n:2&l||(o._flags|=2,u._ready++)):De(o)}for(o=q.first;o&&o!==q.firstNew;o=s){var h=o._flags,s=o._next;if(2&h&&!(16&h)){var f=o.options;if(32&h&&f._ready<f._total)o.timeStart+=n;else{var m=null!=o.speed?o.speed:null!=f.speed?f.speed:i,v=o.timeStart;if(!(4&h)){var g=(null!=o.delay?o:f).delay;if(g){if(t<v+g/m)continue;o.timeStart=v+=g/(0<g?m:1)}o._flags|=4,0==f._started++&&(f._first=o,f.begin&&(nt(o),f.begin=void 0))}1!==m&&(o.timeStart=v+=Math.min(n,t-v)*(1-m));var y,b=null!=o.easing?o.easing:null!=f.easing?f.easing:r,g=o.ellapsedTime=t-v,m=null!=o.duration?o.duration:null!=f.duration?f.duration:a,w=o.percentComplete=G.mock?1:Math.min(g/m,1),E=o.tweens,k=64&h;for(y in(o.progress||f._first===o&&f.progress)&&st.add(o),1===w&&ot.add(o),E){var x=E[y],C=x.sequence,_=C.pattern,T="",S=0;if(_){for(var A=(x.easing||b)(w,0,1,y),P=0,I=0;I<C.length-1;I++)C[I].percent<A&&(P=I);for(var L=C[P],D=C[P+1]||L,O=(w-L.percent)/(D.percent-L.percent),R=k?1-O:O,V=D.easing||b||Q;S<_.length;S++){var M,N=L[S];null==N?T+=_[S]:N===(M=D[S])?T+=N:(N=V(R,N,M,y),T+=!0!==_[S]?N:Math.round(N))}"tween"!==y?(1===w&&(T=function(e){if(0<=e.indexOf("calc(")){for(var t=e.split(/([\(\)])/),n=0,i=0;i<t.length;i++){var r=t[i];switch(r){case"(":n++;break;case")":n--;break;default:n&&"0"===r[0]&&(t[i]=r.replace(/^0[a-z%]+ \+ /,""))}}return t.join("").replace(/(?:calc)?\(([0-9\.]+[a-z%]+)\)/g,"$1")}return e}(T)),B(o.element,y,T,x.fn)):o.tween=T}else console.warn("VelocityJS: Missing pattern:",y,JSON.stringify(x[y])),delete E[y]}}}}(st.size||ot.size)&&(document.hidden?$?$.postMessage(""):setTimeout(it,1):it())}}q.first?(q.isTicking=!0,document.hidden?$?!1===e&&$.postMessage(!0):rt(ut):ct(ut)):(q.isTicking=!1,Y=0,document.hidden&&$&&$.postMessage(!1)),dt=!1}}function pt(e,t,n){if(tt(e),void 0===t||t===O(e.queue,e.options.queue,n)){for(var i in 4&e._flags||(0==(t=e.options)._started++&&(t._first=e,t.begin&&(nt(e),t.begin=voidq.firstNew);for(var u,p=q.first;p&&(a||p!==q.firstNew);p=u||q.firstNew)u=p._next,t&&!t.includes(,!0);var ht={isExpanded:1,isReady:2,isStarted:4,isStopped:8,isPaused:16,isSync:32,isReverse:64};function ft(e,t,n,i){void 0!==t&&t!==O(e.queue,e.options.queue,n)||(i?e._flags|=16:e._flags&=-17)}function mt(e,t,n,i){var r=0===i.indexOf("pause"),a="false"!==(0<=i.indexOf(".")?i.replace(/^.*\./,""):void 0)&&Z(e[0]),o=j.queue;if(F(t)&&t.velocity.animations){var s=!0,i=!1,l=void 0;try{for(var c,d=t.velocity.animations[Symbol.iterator]();!(s=(c=d.next()).done);s=!0)ft(c.value,a,o,r)}catch(e){i=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(i)throw l}}}else for(var u=q.first;u;)t&&!t.includes(u.element)||ft(u,a,o,r),u=u._next;n&&(F(t)&&t.velocity.animations&&t.then?t.then(n._resolver):n._resolver(t))}function vt(t,e,n,R){var i=t[0],r=t[1];if(!i)return console.warn("VelocityJS: Cannot access a non-existant property!"),null;if(void 0===r&&!te(i)){if(Array.isArray(i)){if(1===e.length){var a={},o=!0,t=!1,s=void 0;try{for(var l,c=i[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value;a[d]=U(W(e[0],d))}}catch(e){t=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(t)throw s}}return a}var u=[],p=!0,t=!1,s=void 0;try{for(var h,f=e[Symbol.iterator]();!(p=(h=f.next()).done);p=!0){var V=h.value,m={},v=!0,g=!1,y=void 0;try{for(var b,w=i[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var E=b.value;m[E]=U(W(V,E))}}catch(e){g=!0,y=e}finally{try{!v&&w.return&&w.return()}finally{if(g)throw y}}u.push(m)}}catch(e){t=!0,s=e}finally{try{!p&&f.return&&f.return()}finally{if(t)throw s}}return u}if(1===e.length)return U(W(e[0],i));var k=[],x=!0,t=!1,s=void 0;try{for(var C,_=e[Symbol.iterator]();!(x=(C=_.next()).done);x=!0){var j=C.value;k.push(U(W(j,i)))}}catch(e){t=!0,s=e}finally{try{!x&&_.return&&_.return()}finally{if(t)throw s}}return k}var T=[];if(te(i)){for(var S in i)if(i.hasOwnProperty(S)){var A=!0,P=!1,I=void 0;try{for(var L,D=e[Symbol.iterator]();!(A=(L=D.next()).done);A=!0){var H=L.value,O=i[S];ne(O)||ee(O)?B(H,S,i[S]):(T.push('Cannot set a property "'+S+'" to an unknown type: '+(void 0===O?"undefined":z(O))),console.warn('VelocityJS: Cannot set a property "'+S+'" to an unknown type:',O))}}catch(e){P=!0,I=e}finally{try{!A&&D.return&&D.return()}finally{if(P)throw I}}}}else if(ne(r)||ee(r)){var M=!0,t=!1,s=void 0;try{for(var q,N=e[Symbol.iterator]();!(M=(q=N.next()).done);M=!0)B(q.value,i,String(r))}catch(e){t=!0,s=e}finally{try{!M&&N.return&&N.return()}finally{if(t)throw s}}}else T.push('Cannot set a property "'+i+'" to an unknown type: '+(void 0===r?"undefined":z(rngth?n._rejecter(T.join(", ")):F(e)&&e.velocity.animations&&e.then?e.then(n._resolver):n._resolver(e))}function gt(e,t,n){tt(e),void 0!==t&&t!==O(e.queue,e.options.queue,n)||(e._flags|=8,Oe(e))}t(["option",function(e,t,n,i){var r=e[0],i=0<=i.indexOf(".")?i.replace(/^.*\./,""):void 0,a="false"!==i&&Z(i,!0),o=void 0,s=e[1];if(!r)return console.warn("VelocityJS: Cannot access a non-existant key!"),null;if(F(t)&&t.velocity.animations)o=t.velocity.animations;else{for(var o=[],l=q.first;l;l=l._next)0<=t.indexOf(l.element)&&O(l.queue,l.options.queue)===a&&o.push(l);if(1<t.length&&1<o.length){for(var c=1,d=o[0].options;c<o.length;)if(o[c++].options!==d){d=null;break}d&&(o=[o[0]])}}if(void 0===s){var u=[],p=ht[r],h=!0,i=!1,f=void 0;try{for(var m,v=o[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var g=m.value;u.push(void 0===p?O(g[r],g.options[r]):0==(g._flags&p))}}catch(e){i=!0,f=e}finally{try{!h&&v.return&&v.return()}finally{if(i)throw f}}return 1===t.length&&1===o.length?u[0]:u}var y=void 0;switch(r){case"cache":s=C(s);break;case"begin":s=N(s);break;case"complete":s=R(s);break;case"delay":s=V(s);break;case"duration":s=ae(s);break;case"fpsLimit":s=X(s);break;case"loop":s=J(s);break;case"percentComplete":y=!0,s=parseFloat(s);break;case"repeat":case"repeatAgain":s=oe(s);break;default:if("_"!==r[0]){var b=parseFloat(s);s===String(b)&&(s=b);break}case"queue":case"promise":case"promiseRejectEmpty":case"easing":case"started":return void console.warn("VelocityJS: Trying to set a read-only key:",r)}if(void 0===s||s!=s)return console.warn("VelocityJS: Trying to set an invalid value:"+r+"="+s+" ("+e[1]+")"),null;var w=!0,i=!1,f=void 0;try{for(var E,k=o[Symbol.iterator]();!(w=(E=k.next()).done);w=!0){var x=E.value;y?x.timeStart=Y-O(x.duration,x.options.duration,j.duration)*s:x[r]=s}}catch(e){i=!0,f=e}finally{try{!w&&k.reresolver(t))}],q.firstNew);for(var p,h=q.first;h&&(o||h!==q.firstNew);h=p||q.firstNew)p=h._next,t&&!t.includes(h.element)||gt(h,r,a)}n&&(F(t)&&t.velocity.animations&&t.then?t.then(n._resolver):n._resolver(t))}],!0),t(["style",vt],!0),t(["tween",function(e,t,n,i){var r=void 0;if(t){if(1!==t.length)throw new Error("VelocityJS: Cannot tween more than one element!")}else{if(!e.length)return console.info('Velocity(<element>, "tween", percentComplete, property, end | [end, <easing>, <start>], <easing>) => value\nVelocity(<element>, "tween", percentComplete, {property: end | [end, <easing>, <start>], ...}, <easing>) => {property: value, ...}'),null;t=[document.body],r=!0}var a,o,s,l=e[0],c={elements:t,element:t[0],queue:!1,options:{duration:1e3},tweens:null},d={},u=e[1],t=void 0,p=void 0,h=e[2],f=0;if(ne(e[1])?h=re&&re[e[1]]?(p=re[e[1]],u={},e[2]):(t=!0,a={},o=e[1],s=e[2],o in a?Object.defineProperty(a,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[o]=s,u=a,e[3]):Array.isArray(e[1])&&(t=!0,u={tween:e[1]},h=e[2]),!ee(l)||l<0||1<l)throw new Error("VelocityJS: Must tween a percentage from 0 to 1!");if(!te(u))throw new Error("VelocityJS: Cannot tween an invalid property!");if(r)for(var m in u)if(u.hasOwnProperty(m)&&(!Array.isArray(u[m])||u[m].length<2))throw new Error("VelocityJS: When not supplying an element you must force-feed values: "+m);var v,g=ie(O(h,j.easing),400);for(v in p?qt(c,p):Qe(c,u),c.tweens){var y=c.tweens[v],b=y.sequence,w=b.pattern,E="",k=0;if(f++,w){for(var x=(y.easing||g)(l,0,1,v),C=0,_=0;_<b.length-1;_++)b[_].percent<x&&(C=_);for(var T=b[C],S=b[C+1]||T,A=(l-T.percent)/(S.percent-T.percent),P=S.easing||Q;k<w.length;k++){var I,L=T[k];null==L?E+=w[k]:L===(I=S[k])?E+=L:(L=P(A,L,I,v),E+=!0===w[k]?Math.round(L):L)}d[v]=E}}if(t&&1===f)for(var D in d)if(d.hasOwnProperty(D))return d[D];return d}],!0);var yt,bt,wt,Et={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:1+bt%256);function kt(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function xt(e){return 1-kt(1-e)}n(["easeInBack",function(e,t,n){return 0===e?t:1===e?n:Math.pow(e,2)*(2.7*e-1.7)*(n-t)}]),n(["easeOutBack",function(e,t,n){return 0===e?t:1===e?n:(Math.pow(--e,2)*(2.7*e+1.7)+1)*(n-t)}]),wt=1.7,wt*=1.525,n(["easeInOutBack",function(e,t,n){returne-wt):Math.pow(e-2,2)*(==e?n:xt(e)*(n-t)}{return 0===e?t:1===e?n:(e<.5?.5*xt(2*e):.5*kt(2*e-1)+.5)*(n-t)}]);var c=2*Math.PI;function Ct(n,i){return function(e,t){if(void 0===t)return We(e,n,i)+"px";B(e,n,parseFloat(t)-We(e,n,i)+"px")}}n(["easeInElastic",function(e,t,n){return 0===e?t:1===e?n:-1*Math.pow(2,10*--e)*Math.sin((e-.3/c*Math.asin(1))*c/.3)*(n-t)}]),n(["easeOutElastic",function(e,t,n){return 0===e?t:1===e?n:(+Math.pow(2,-10*e)*Math.sin((e-.3/c*Math.asin(1))*c/.3)+1)*(n-t)}]),n(["easeInOutElastic",function(e,t,n){var i;return 0===e?t:1===e?n:(i=.3*1.5/c*Mathath.sin((e-i)**Math.sin((e-i)*c/(.3*1.5))*.5+1)*(n-t))}]),n(["at-start",function(e,t,n){return 0===e?t:n}]),n(["during",function(e,t,n){return 0===e||1===e?t:n}]),n(["at-end",function(e,t,n){return 1===e?n:t}]),s(["Element","innerWidth",Ct("width",!0)]),s(["Element","innerHeight",Ct("height",!0)]),s(["Element","outerWidth",Ct("width",!1)]),s(["Element","outerHeight",Ct("height",!1)]);var _t=/^(b|big|i|small|tparseFloat(t);switch(t.replace(String(n),"")){case"":case"px":e["scroll"+o]=n;break;case"%":var i=parseFloat(W(e,"client"+a)),r=parseFloat(W(e,"scroll"+a));e["scroll"+o]=Math.max(0,r-i)*n/100}}}s(["Element","display",function(e,t){var n,i=e.style;if(void 0===t)return Ye(e,"display");"auto"===t&&(n=e&&e.nodeName,e=H(e),t=_t.test(n)?"inline":Tt.test(n)?"list-item":St.test(n)?"table-row":At.test(n)?"table":Pt.test(n)?"table-row-group":"block",e.cache.display=t),i.display=t}]),s(["HTMLElement","scroll",It("Height","Top"),!1]),s(["HTMLElement","scrollTop",It("Height","Top"),!1]),s(["HTMLElement","scrollLeft",It("Width","Left"),!1]),s(["HTMLElement","scrollWidth",function(e,t){if(null==t)return e.scrollWidth+"px"}]),s(["HTMLE e.clientWidth+"px"}]),s(["HTMLElement","scrollHeight",function(e,t){if(null==t)return e.scrollHeight+"px"}]),s(["HTMLElement","clientHeight",function(e,t){if(null==t)return e.clientHeight+"px"}]);var Lt=/^(b(lockSize|o(rder(Bottom(LeftRadius|RightRadius|Width)|Image(Outset|Width)|LeftWidth|R(adius|ightWidth)|Spacing|Top(LeftRadius|RightRadius|Width)|Width)|ttom))|column(Gap|RuleWidth|Width)|f(lexBasis|ontSize)|grid(ColumnGap|Gap|RowGap)|height|inlineSize|le(ft|tterSpacing)|m(a(rgin(Bottom|Left|Right|Top)|x(BlockSize|Height|InlineSize|Width))|in(BlockSize|Height|InlineSize|Width))|o(bjectPosition|utline(Offset|Width))|p(adding(Bottom|Left|Right|Top)|erspective)|right|s(hapeMargin|troke(Dashoffset|Width))|t(extIndent|op|ransformOrigin)|w(idth|ordSpacing))$/yle)Ot.test(d)?s(["Element",Dt=d.replace(/^[a-z]+([A-Z])/,function(e,t){return t.toLow=t)return Ye(e,n)||Ye(e,i);e.style[n]=e.style[i]=t}}(d,Dt),Lt.test(Dt)?"px":void 0]):Me(["Element",d])r Mt=document.createElement("div"),Nt=/^SVG(.*)Element$/,Rt=/Element$/;function Vt(n){return function(e,t){if(void 0===t)try{return e.getBBox()[n]+"px"}catch(e){return"0px"}e.setAttribute(n,t)}}Object.getOwnPropertyNames(window).forEach(function(e){var t=Nt.exec(e);if(t&&"SVG"!==t[1])try{var n,i=t[1]?document.createElementNS("http://www.w3.org/200 i){var r=i[n];!ne(n)||"o"===n[0]&&"n"===n[1]||n===n.toUpperCase()||Rt.test(n)||n in Mt||P(r)||s([e,n,function(n){return function(e,t){if(void 0===t)return e.getAttribute(n);e.setAttribute(n,t)}}(n)])}}car when trying to identify SVG attributes on "+e+".",t)}}),s(["SVGElement","width",Vt("width")]),s(["SVGElement","height",Vt("height")]),s(["Element","tween",function(e,t){if(void 0===t)return""}]);var u,G=Ut;if((i=u=u||{}).Actions=L,i.Easings=g,i.Sequences=re,i.State=q,i.defaults=j,i.patch=p,i.debug=!1,i.mock=!1,i.version="2.0.6",i.Velocity=Ut,function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e}}()<=8)throw new Error("VelocityJS cannot run on Internet Explorer 8 or earlier");window&&(a=window.jQuery,o=window.Zepto,p(window,!0),p(Element&&Element.prototype),p(NodeList&&NodeList.prototype),p(HTMLCollection&&HTMLCollection.prototype),p(a,!0),p(a&&a.fn),p(o,!0),p(o&&o.fn));for(var jt in u)!function(t){if(u.hasOwnProperty(t))switch(void 0===t?"undefined":z(t)){case"number":case"boolean":I(G,t,{get:function(){return u[t]},set:function(e){u[t]=e}},!0);break;default:I(G,t,u[t],!0)}}(jt);Object.freeze(G);var Ht=/(\d*\.\d+|\d+\.?|from|to)/g;function qt(e,t){var n,i=e.tweens=Object.create(null),r=e.element;for(n in t.tweens)if(t.tweens.hasOwnProperty(n)){var a=Ne(r,n);if(!a&&"tween"!==n){G.debug&&console.log("Skipping ["+n+"] due to a lack of browser support.");continue}i[n]={fn:a,sequence:t.tweens[n]}}}t(["registerSequence",function e(t){if(te(t[0]))for(var n in t[0])t[0].hasOwnProperty(n)&&e([n,t[0][n]]);else if(ne(t[0])){var i=t[0],r=t[1];if(ne(i))if(te(r)){re[i]&&console.warn("VelocityJS: Replacing named sequence:",i);var a,o={},R=new Array(100),s=[],l=re[i]={},c=ae(r.duration);for(a in l.tweens={},ee(c)&&(l.duration=c),r)if(r.hasOwnProperty(a)){var d=String(a).match(Ht);if(d){var u=!0,p=!1,h=void 0;try{for(var f,m=d[Symbol.iterator]();!(u=(f=m.next()).done);u=!0){var v=f.value,g="from"===v?0:"to"===v?100:parseFloat(v);if(g<0||100<g)console.warn("VelocityJS: Trying to use an invalid value as a percentage (0 <= n <= 100):",i,g);else if(isNaN(g))console.warn("VelocityJS: Trying to use an invalid number as a percentage:",i,a,v);else for(varludes(y)||s.pu{try{!u&&m.return&&m.return()}finally{if(p)throw h}}}}var b=Object.keys(o).sort(function(e,t){e=parseFloat(e),t=parseFloat(t);return t<e?1:e<t?-1:0}),w=(b.forEach(function(e){R.push.apply(o[e])}),!0),c=!1,E=void 0;try{for(var V,k=s[Symbol.iterator]();!(w=(V=k.next()).done);w=!0){var j=V.value,x=[],C=Ve(j),_=!0,H=!1,q=void 0;try{for(var z,T=b[Symbol.iterator]();!(_=(z=T.next()).done);_=!0){var F=z.value,S=!0,B=!1,U=void 0;try{for(var W,A=o[F][Symbol.iterator]();!(S=(W=A.next()).done);S=!0){var P=r[W.value];P[C]&&x.push(ne(P[C])?P[C]:P[C][0])}}catch(e){B=!0,U=e}finally{try{!S&&A.return&&A.return()}finally{if(B)throw U}}}}catch(e){H=!0,q=e}finally{try{!_&&T.return&&T.return()}finally{if(H)throw q}}if(x.length){var I=Ze(x,C),$=0;if(I){var L=!0,Y=!1,G=void 0;try{for(var K,D=b[Symbol.iterator]();!(L=(K=D.next()).done);L=!0){var Q=K.value,O=!0,X=!1,J=void 0;try{for(var Z,M=o[Q][Symbol.iterator]();!(O=(Z=M.next()).done);O=!0){var N=r[Z.value][C];N&&(Array.isArray(N)&&1<N.length&&(ne(N[1])||Array.isArray(N[1]))&&(I[$].easing=ie(N[1],l.duration||400)),I[$++].percent=parseFloat(Q)/100)}}catch(e){X=!0,J=e}finally{try{!O&&M.return&&M.return()}finally{if(X)throw J}}}}catch(e){Y=!0,G=e}finally{try{!L&&D.return&&D.return()}finally{if(Y)throw G}}l.tweens[C]=I}}}}catch(e){c=!0,E=e}finally{try{!w&&k.return&&k.return()}finally{if(c)throw E}}}else console.warn("VelocityJS: Trying to set 'registerSequence' sequence to an invalid value:",i,r);else console.warn("VelocityJliberate then pass `promiseRejectEmpty:false` as an option";function Bt(e,t){I(t,"promise",e),I(t,"then",e.then.bind(e)),I(t,"catch",e.catch.bind(e)),e.finally&&I(t,"finally",e.finally.bind(e))}function Ut(){var e=j,t=arguments.length<=0?void 0:arguments[0],n=te(t)&&(t.p||te(t.properties)&&!t.properties.names||ne(t.properties)),i=0,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,c=void 0,d=void 0,u=(D(this)?r=[this]:M(this)?(r=K(this),F(this)&&(s=this.velocity.animations)):n?(r=K(t.elements||t.e),i++):D(t)?(r=K([t]),i++):M(t)&&(r=K(t),i++),r&&(I(r,"velocity",Ut.bind(r)),s&&I(r.velocity,"animations",s)),"reverse"===(a=n?O(t.properties,t:arguments[i];if(te(t)&&(o=t),zt&&O(o&&o.promise,e.promise)&&(l=new zt(function(t,e){d=e,c=function(e){F(e)&&e.promise?(delete e.then,delete e.catch,delete e.finally,t(e),Bt(e.promise,e)):t(e)}}),r&&Bt(l,r)),l&&(v=O(t=o&&o.promiseRejectEmpty,e.promiseRejectEmpty),r||p?a||(v?d("Velocity: No properties supplied"+(A(t)?"":Ft)+". Aborting."):c()):v?d("Velocity: No elements supplied"+(A(t)?"":Ft)+". Aborting."):c()),!r&&!p||!a)return l;if(p){for(var f,m=[],v=l&&{_promise:l,_resolver:c,_rejecter:d};i<arguments.length;)m.push((f=i++,arguments.length<=f?void 0:arguments[f]));t=a.replace(/\..*$/,""),p=L[t];if(p)return void 0!==(t=p(m,r,v,a))?t:r||l;if(!h)return void console.error("VelocityJS: First argument ("+a+") was not a property map, a known action, or a registered redirect. Aborting.")}p=void 0;if(te(a)||u||h){var g,y,b={},v=e.sync;if(l&&(I(b,"_promise",l),I(b,"_rejecter",d),I(b,"_resolver",c)),I(b,"_ready",0),I(b,"_started",0),I(b,"_completed",0),I(b,"_total",0),te(o)?(p=void 0!==(t=ae(o.duration)),b.duration=O(t,e.duration),b.delay=O(V(o.delay),e.delay),b.easing=ie(O(o.easing,e.easing),b.duration)||ie(e.easing,b.duration),b.loop=O(J(o.loop),e.loop),b.repeat=b.repeatAgain=O(oe(o.repeat),e.repeat),null!=o.speed&&(b.speed=O(se(o.speed),1)),A(o.promise)&&(b.promise=o.promise),b.queue=O(Z(o.queue),e.queue),o.mobileHA&&!q.isGingerbread&&(b.mobileHA=!0),!0===o.drag&&(b.drag=!0),(ee(o.stagger)||P(o.stagger))&&(b.stagger=o.stagger),u||(null!=o.display&&(a.display=o.display,console.error('Deprecated "options.display" used, this is now a property:',o.display)),null!=o.visibility&&(a.visibility=o.visibility,console.error('Deprecated "options.visibility" used, this is now a property:',o.visibility))),t=N(o.begin),g=R(o.complete),y=P(y=o.progress)?y:void(null!=y&&console.warn("VelocityJS: Trying to set 'progress' to an invalid value:",y)),o=le(o.sync),null!=t&&(b.begin=t),null!=g&&(b.complete=g),null!=y&&(b.progress=y),null!=o&&(v=o)):n||(t=0,b.duration=ae(arguments.length<=i?void 0:arguments[i],!0),void 0===b.duration?b.duration=e.duration:(p=!0,t++),P(arguments.length<=i+t?void 0:arguments[i+t])||void 0!==(g=ie(arguments.length<=i+t?void 0:arguments[i+t],O(b&&ae(b.duration),e.duration),!0))&&(t++,b.easing=g),void 0!==(y=R(arguments.length<=i+t?void 0:arguments[i+t],!0))&&(b.complete=y),b.delay=e.delay,b.loop=e.loop,b.repeat=b.repeatAgain=e.repeat),u&&!1===b.queue)throw new Error("VelocityJS: Cannot reverse a queue:false animation.");!p&&h&&h.duration&&(b.duration=h.duration);for(var w={options:b,elements:r,_prev:void 0,_next:void 0,_flags:v?32:0,percentComplete:0,ellapsedTime:0,timeStart:0},s=[],E=0;E<r.length;E++){var k=r[E],x=0;if(D(k)){if(u){var C=H(k).lastAnimationList[b.queue];if(!(a=C&&C.tweens)){console.error("VelocityJS: Attempting to reverse an animation on an element with no previous animation:",k);continue}x|=64&~(64&C._flags)}var C=Object.assign({},w,{element:k,_flags:w._flags|x}),x=(b._total++,s.push(C),b.stagger&&(P(b.stagger)?ee(x=function(e,t,n,i,r,a){try{return e.call(t,n,i,r,a)}catch(e){console.error("VelocityJS: Exception when calling '"+a+"' callback:",e)}}(b.stagger,k,E,r.length,r,"stagger"))&&(C.delay=b.delay+x):C.delay=b.delay+b.stagger*E),b.drag&&(C.duration=b.duration-b.duration*Math.max(1-(E+1)/r.length,.75)),h?qt(C,h):u?C.tweens=a:(C.tweens=Object.create(null),Qe(C,a)),S=x=T=_=x=void 0,k),_=C,T=b.queue;if(x=H(x),!1!==T&&(x.lastAnimationList[T]=_),!1===T)Le(_);else{ne(T)||(T="");var S=1===q.isTicking&&ut(!1),s&&I(r.velocity,"animations",s)}return r||l}function p(e,t){try{I(e,(t?"V":"v")+"elocity",Ut)}catch(e){console.warn("VelocityJS: Error when trying to add prototype.",e)}}var h,Wt=Ut;if((e=h=h||{}).Actions=L,e.Easings=g,e.Sequences=re,e.State=q,e.defaults=j,e.patch=p,e.debug=!1,e.mock=!1,e.version="2.0.6",e.Velocity=Ut,function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e}}()<=8)throw new Error("VelocityJS cannot run on Internet Explorer 8 or earlier");window&&(i=window.jQfunction(t){if(h.hasOwnProperty(t))switch(void 0===t?"undefined":z(t)){case"number":case"boolean":I(Wt,t,{get:function(){return h[t]},set:function(e){h[t]=e}},!0);break;default:I(Wt,t,h[t],!0)}}($t);return Object.freeze(Wt),Wt}),define("materialize",["jquery","velocity"],function(n,R){for(var c=n,e=((T=window).Package?Materialize={}:TAnimatiotionFrame"];function r(){return Math.floor(65536*(1+Math.random())).toString(16).sub;return setTimeout(funcme=t,e.cancelAnimationFrame=i,Mater(/(:|\.|\[|\]|,|=)/g,"\\$1")},Materialize.elementOrParentIsFixed=function(e){var e=n(e),e=e.add(e.parents()),t=!1;return e.each(function(){if("fixed"===n(thi};return function(){var e=J(),t=(d||!1!==r.leading||(d=e),i-(e-d));return o=this,s=arguments,t<=0?(clearTimeout(c),c=null,d=e,l=n.apply(o,s),o=s.Velocity:Velocity,define("global",["jquery"],(X=this,function(){return X.Materialize})),c.extend(c.easing,{easeInOutMaterial:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t+n:i/4*((t-=2)*t*t+2)+n}}),define("animation",["jquery"],function(){}),(D=c)(document).ready(function(){D.fn.reverse=[].reverse,D(document).on("mouseenter.fixedActilick-to-toggle):not(.toolbar)",function(e){var t=D(this);Y(t)}),D(document).on("mouseleave.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(e){var t=D(this);G(t)}),D(document).on("click-to-toggle > a",function(e){var t=D(this).parent();(t.hasClass("active")?G:Y)(t)}),D(document).on("click.fabToolbar",".fixed-action-btn.toolbar > a",function(e){var t=D(this).parent();K(t)})}),D.fn.extend({openFAB:function(){Y(D(this))},closeFAB:function(){G(D(this))},openToolbar:function(){K(D(this))},closeToolbar:function(){Q(D(this))}}),Y=function(e){var t,n,i;!1===e.hasClass("active")&&(!0===e.hasClass("horizoneX:n+"px"},{duration:0}),i=0,e.find("ul .btn-floating").reverse().each(function(){D(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:"0"},{duration:80,delay:i}),i+=40}))},G=function(e){var t,n;!0===e.hasClass("horizontal")?n=40:t=40,e.removeClass("active"),e.find("ul .btn-floating").velocity("stop",!0),e.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:t+"px",translateX:n+"px"},{duration:80})},K=function(t){var e,n,i,r,a,o,s,l,c;"true"!==t.attr("data-open")&&(i=window.innerWidth,r=window.innerHeight,a=t[0].getBoundingClientRect(),o=t.find("> a").first(),s=t.find("> ul").first(),l=D('<div class="fab-backdrop"></div>'),c=o.css("background-color"),o.append(l),e=a.left-i/2+a.width/2,r=r-a.bottom,n=i/l.width(),t.attr("data-origin-bottom",a.bottom),t.attr("data-origin-left",a.left),t.attr("data-origin-width",a.width),t.addClass("active"),t.attr("data-open",!0),t.css({"text-alioolbarClose")}),D(document).on("click.fabToolbarClose",function(e){D(e.target).closest(s).length||(Q(t),D(window).off("scroll.fabToolbarClose"),D(document).off("click.fabToolbarClose"))})},100)},0))},Q=function(e){var t,n,i,r,a,o,s,l,c,d,u;"true"===e.attr("data-open")&&(t=window.innerWidth,n=window.innerHeight,i=e.attr("data-origin-width"),r=e.attr("data-origin-bottom"),a=e.attr("data-origin-left"),o=e.find("> .btn-floating").first(),s=e.find("> ul").first(),l=e.find(".fab-backdrop"),c=o.css("background-color"),d=a-t/2+i/2,u=n-r,l.width(),e.removeClass("active"),e.attr("data-out(function(){e.css({transform:"translate3d(0,0,0)",transition:"transfoosest(".card").css("overflow","hidden"),L(this).find(".card-reveal").css({display:"block"}).velocity("stop",!1).velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeInOutQuad"})))})}),define("cards",["jquery"],function(){}),(I=c).fn.characterCounter=function(){return this.each(function(){var e,t=I(this);t.parent().find('span[class="character-counter"]').length||t.attr("data-length")!==R&&(t.on("input",le),t.on("focus",le),t.on("blur",ce),(t=t).parent().find('span[class="character-counter"]').length||(e=I("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),t.parent().append(e)))})},I(document).ready(function(){I("input, textarea").characterCounter()}),define("character_counter",["jquery"],function(){}),(P=c).fn.collapsible=function(s){return s=P.extend({accordion:R,onOpen:R,onClose:R},s),this.each(function(){function t(e){var t;s.accordion||"accordion"===o||o===R?(t=e,a=r.find("> li > .collapsible-header"),t.hasClass("active")?t.parent().addClass("active"):t.parent().removeClass("active"),t.parent().hasClass("active")?t.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){P(this).css("height","")}}):t.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"eas).each(function(){P(this).is(":visible")&&P(this).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){P(this).css("height",""),n(P(this).siblings(".collapsible-header"))}})})):((t=e).hasClass("active")?t.parent().addClass("active"):t.parent().removeClass("active"),t.parent().hasClass("active")?t.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,comps("active")?"function"==typeof s.onOpen&&s.onOpen.call(this,e.parent()):"function"==typeof s.onClose&&s.onClose.call(this,e.parent())}function i(e){return e.closest("li > .collapsible-header")}var r=P(this),a=P(this).find("> li > .collapsible-header"),o=r.data("collapsible");r.off("click.collapse","> li > .collapsible-header"),a.off("click.collapse"),r.on("click.collapse","> li > .collapsible-header",function(e){e=P(e.target);(e=0<i(e).length?i(e):e).toggleClass("active"),t(e)}),s.accordion||"accordion"===o||o===R?t(a.filter(".acllapsible").collapsible()}),define("collapsible",["jquery"],function(){}),(A=c).fn.scrollTo=function(e){return A(this).scrollTop(A(this).scrollTop()-A(this).offset().top+A(e).offset().top),this},A.fn.dropdown=function(e){var i={inDuration:300,outDuration:225,constrainWidth:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1};return"open"===e?(this.each(function(){A(this).trigger("open")}),!1):"close"===e?(this.each(function(){A(this).trigger("close")}),!1):void this.each(function(){function u(){h.data("induration")!==R&&(f.inDuration=h.data("induration")),h.data("outduration")!==R&&(f.outDuration=h.data("outduration")),h.data("constrainwidth")!==R&&(f.constrainWidth=h.data("constrainwidth")),h.data("hover")!==R&&(f.hover=h.data("hover")),h.data("gutter")!==R&&(f.gutter=h.data("gutter")),h.data("beloworigin")!==R&&(f.belowOrigin=h.data("beloworigin")),h.data("alignment")!==R&&(f.alignment=h.data("alignment")),h.data("stoppropagation")!==R&&(f.stopPropagation=h.data("stoppropagation"))}function n(e){"focus"===e&&(m=!0),u(),v.addClass("active"),h.addClass("active"),!0===f.constrainWidth?v.css("width",h.outerWidth()):v.css("white-space","nowrap");var e=window.innerHeight,t=h.innerHeight(),n=h.offset().left,i=h.offset().top-A(window).scrollTop(),r=f.alignment,a=0,o=0,s=0,l=(!0===f.belowOrigin&&(s=t),0),c=0,d=h.parent();d.is("body")||(d[0].scrollHeight>d[0].clientHeight&&(l=d[0].scrollTop),d[0].scrollWidth>d[0].clientWidth&&(c=d[0].scrollLeft)),n+v.innerWidth()>A(window).width()?r="right":n-v.innerWidth()+h.innerWidth()<0&&(r="left"),i+v.innerHeight()>e&&(i+t-v.innerHeight()<0?v.css("max-height",e-i-s):(s||(s+=t),s-=v.innerHeight())),"left"===r?(a=f.gutter,o=h.position().left+a):"right"===r&&(o=h.position().left+h.outerWidth()-v.sition:"absolute",top:h.position().top+s+l,left:o+c}),v.stop(!0,!0).css("opacity",0).slideDown({queue:!1,duration:f.inDuration,easing:"easeOutCuclick."+v.attr("id")+" touchstart."+v.attr("id"),function(e){v.is(e.target)||h.is(e.target)||h.find(e.target).length||(p(),A(document).unbind("click."+v.attr("id")+" touchstart."+v.attr("id")))})}function p(){m=!1,v.fadeOut(f.outDuration),v.removeClass("active"),h.removeClass("active"),A(document).unbind("click."+v.attr("id")+" touchstart."+v.attr("id")),setTimeout(functionDuration)}var t,h=A(this),f=A.extend({},i,e),m=!1,v=A("#"+h.attr("data-activates"));u(),h.after(v),f.hover?(t=!1,h.unbind("click."+h.attr("id")),h.on("mouseenter",function(e){!1===t&&(n(),t=!0)}),h.on("mouseleave",function(e){e=e.toElement||e.relatedTarget;A(e).closest(".dropdown-content").is(v)||(v.stop(!0,!0),p(),t=!1)}),v.on("mouseleave",function(e){e=e.toElement||e.relatedTarget;A(e).closest(".dropdown-button").is(h)||(v.stop(!0,!0),p(),t=!1)})):(h.unbind("click."+h.attr("id")),h.bind("click."+h.attr("id"),function(e){m||(h[0]!=e.currentTarget||h.hasClass("active")||0!==A(e.target).closest(".dropdown-content("active")&&(p(),A(document).unbind("click."+v.attr("id")+" touchstart."+v.attr("id"))):(e.preventDefault(),f.stopPropagation&&e.stopPropagation(),n("click")))})),h.on("open",function(e,t){n(t)}),h.on("close",p)})},A(document).ready(function(){A(".dropdown-button").dropdown()}),define("dropdown",["jquery"],function(){}),(S=c)(document).ready(function(){function t(e){var t=e.css("font-family"),n=e.css("font-size"),i=e.css("line-height"),n=(n&&r.css("font-size",n),t&&r.css("font-family",t),i&&r.css("line-height",i),"off"===e.attr("wrap")&&r.css("overflow-wrap","normal").css("white-space","pre"),r.text(e.val()+"\n"),r.html().replace(/\n/g,"<br>"));r.html(n),e.is(":visible")?r.css("width",e.width()):r.css("width",S(window).width()/2),e.css("height",r.height())}Materialize.updateTextFields=function(){S("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea").each(function(e,t){var n=S(this);0<S(t).val().length||t.autofocus||n.attr("placeholder")!==R?n.siblings("label").addClass("active"):S(t)[0].validity?n.siblings("label").toggleClass("active",!0===S(t)[0].validity.badInput):n.siblings("label").removeClass("active")})};var n="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea",r=(S(document).on("change",n,function(){0===S(this).val().letr("value")&&S(this).siblieach(function(){var e=t.find("option[selected]").text();t.siblings("input.select-dropdown").val(e)}))}),S(document).on("focus",n,function(){S(this).siblings("label, .prefix").addClass("active")}),S(document).on("blur",n,function(){var e=S(this),t=".prefix";0===e.val().length&&!0!==e[0].validity.badInput&&e.attr("placeholder")===R&&(t+=", label"),e.siblings(t).removeClass("active"),validate_field(e)}),window.validate_field=function(e){var t=e.attr("data-length")!==R,n=parseInt(e.attr("data-length")),i=e.val().length;0===e.val().length&&!1===e[0].validity.badInput?e.hasClass("validate")&&(e.removeClass("valid"),e.removeClass("invalid")):e.hasClass("validate")&&(e.is(":valid")&&t&&i<=n||e.is(":valid")&&!t?(e.removeClass("invalid"),e.addClass("valid"lid")))},S(document).on("keyup.radio","input[type=radio], input[type=checkbox]",function(e){9===e.which&&(S(this).addClass("tabbed"),S(this).ond")}))}),S(".hiddendiv").first()),e=(r.lengiddendiv common"></div>'),S("body").append(r)),".materialiut[type="file"]',function(){for(var e=S(this).c(t[i].name);e.val(n.join(", ")),e.trigger("('<span class="thumb"><span class="value"></span></span>');S(this).after(e)}),".range-field");S(document).on("change",a,function(e){S(this).siblings(".thumb").find(".value").html(S(this).val())}),S(document).on("input mousedown touchstart",a,function(e){var t=S(this).siblings(".thumb"),n=S(this).outerWidth();t.length<=0&&(t=S('<span class="thumb"><span class="value"></span></span>'),S(this).after(t)),t.find(".value").html(S(this).val()),o=!0,S(this).addClass("active"),t.hasClass("active")||t.animate({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"}),"input"!==e.type&&((i=e.pageX===R||null===e.pageX?e.originalEvent.touhis).offset().left)<0?i=0:n<i&&(i=n),t.addClass("active").css("left",i)),t.find(".value").html(S(this).val())}),S(document).on("mouseup touchend",e,function(){o=!1,S(this).removeClass("active")}),S(document).on("mousemove touchmove",e,function(e){var t,n=S(this).children(".thumb");o&&(n.hasClass("active")||n.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"}),e=e.pageX===R||null===e.pageX?e.originalEvent.touches[0].pageX-S(this).offset().left:e.pageX-S(this).offset().left,t=S(this).outerWidth(),e<0?e=0:t<e&&(e=t),n.addClass("active").css("left",e),n.find(".value").html(n.siblings(a).val()))}),S(document).on("mouseout touchleave",e,function(){var e;o||((e=S(this).children(".thumb")).hasClass("active")&&e.velocity({height:"0",width:"0",top:"10px",marginLeft:"-6px"},{duration:100}),e.removeClass("active"))}),S.fn.autocomplete=function(h){return h=S.extend({data:{},limit:1/0,onAutocomplete:null},h),this.each(function(){var s,e,l,c,d=S(this),u=h.data,p=0,a=0,t=d.closest(".input-field");S.isEmptyObject(u)||(l=S('<ul class="autocomplete-content dropdown-content"></ul>'),t.length?(e=t.children(".autocomplete-content.dropdown-content").first()).length||t.append(l):(e=d.next(".autocomplete-content.dropdown-content")).length||d.after(l),e.length&&(l=e),c=function(){a=0,l.find(".active").removeClass("active")},d.off("keyup.autocomplete").on("keyup.autocomplete",function(e){if(p=0,13!==e.which&&38!==e.which&&40!==e.which){var t=d.val().toLowerCase();if(s!==t&&(l.empty(),c(),""!==t))for(var n in u)if(u.hasOwnProperty(n)&&-1!==n.toLowerCase().indexOf(t)&&n.toLowerCase()!==t){if(p>=h.limit)break;var i=S("<li></li>");u[n]?i.append('<img src="'+u[n]+'" class="right circle"><span>'+n+"</span>"):i.append("<span>"+n+"</span>"),l.append(i),n=t,a=o=a=r=void 0,r=(i=i).find("img"),n=(a=i.text().toLowerCase().indexOf(""+n.toLowerCase()))+n.length-1,o=i.text().slice(0,a),a=i.text().slice(a,1+n),n=i.text().slice(1+n),i.html("<span>"+o+"<span class='highlight'>"+a+"</span>"+n+"</span>"),r.length&&i.prepend(r),p++}s=t}var r,a,o}),d.off("keydown.autocomplete").on("keydown.autocomplete",function(e){var t,n=e.which,i=l.children("li").length,r=l.children(".active").first();return 13===n?void((t=l.children("li").eq(a)).length&&(t.click(),e.preventDefault())):void(38!==n&&40!==n||(e.preventDefault(),38===n&&0<a&&a--,40===n&&a<i-1&&r.length&&a++,r.removeClass("active"),l.children("li").eq(a).addClass("active")))}),l.on("click","li",function(){var e=S(this).text().trim();d.val(e),d.trigger("change"),l.empty(),c(),"function"==typeof h.onAutocomplete&&h.onAutocomplete.call(this,e)}))})}}),S.fn.material_select=function(h){function f(e,t,n){for(var i=e.indexOf(t),r=-1===i,a=(r?e.push(t):e.splice(i,1),n.siblings("ul.dropdown-content").find("li").eq(t).toggleClass("active"),n.find("option").eq(t).prop("selected",r),e),o=n,s="",l=0,c=a.length;l<c;l++){var d=o.find("option").eq(a[l]).text();s+=0===l?d:", "+d}return""===s&&(s=o.find("option:disabled").eq(0).text()),o.siblings("input.select-dropdown").val(s),r}S(this).each(function(){var r,e,s,i,t,n,a,o,l,c,d,u,p=S(this);p.hasClass("browser-default")||(r=!!p.attr("multiple"),(e=p.data("select-id"))&&(p.parent().find("span.caret").remove(),p.parent().find("input").remove(),p.unwrap(),S("ul#select-options-"+e).remove()),"destroy"===h?p.data("select-id",null).removeClass("initialized"):(e=Materialize.guid(),p.data("select-id",e),(l=S('<div class="select-wrapper"></div>')).addClass(p.attr("class")),s=S('<ul id="select-options-'+e+'" class="dropdown-content select-dropdown '+(r?"multiple-select-dropdown":"")+'"></ul>'),o=p.children("option, optgroup"),t=!(i=[]),n=p.find("option:selected").html()||p.find("option:first").html()||"",a=function(e,t,n){var i=t.is(":disabled")?"disabled ":"",r="optgroup-option"===n?"optgroup-option ":"",a=t.data("icon"),o=t.attr("class");if(a)return o=o?' class="'+o+'"':"","multiple"===n?s.append(S('<li class="'+i+'"><img alt="" src="'+a+'"'+o+'><span><input type="checkbox"'+i+"/><label></label>"+t.html()+"</span></li>")):s.append(S('<li class="'+i+r+'"><img alt="" src="'+a+'"'+o+"><span>"+t.html()+"</span></li>")),!0;"multiple"===n?s.append(S('<li class="'+i+'"><span><input type="checkbox"'+i+"/><label></label>"+t.html()+"</span></li>")):s.append(S('<li class="'+i+r+'"><span>'+t.html()+"</span></li>"))},o.length&&o.each(function(){var e;S(this0,S(this)):S(this).is("optgroup")&&(e=S(this).children("option"),s.append(S('<li class="optgroup"><span>'+S(this).attr("label")+"</span></li>")),e.each(function(){a(0,S(this),"optgroup-option")}))})p)").each(function(n){S(this).click(function(e){var t;S(this).hasClass("disabled")||S(this).hasClass("optgroup")||(t=!0,r?(S('input[type="checkbox"]',this).prop("checked",function(e,t){return!t}),t=f(i,S(this).index(),p),c.trigger("focus")):(s.find("li").removeClass("active"),S(this).toggleClass("active"),c.val(S(this).text())),d(s,S(this)),p.find("option").eq(n).prop("selected",t),p.trigger("change"),void 0!==h&&h()),e.stopPropagation()})}),p.wrap(l),o=S('<span class="caret">&#9660;</span>'),p.is(":disabled")&&o.addClass("disabled"),l=n.replace(/"/g,"&quot;"),c=S('<input type="text" class="select-dropdown" readonly="true" '+(p.is(":disabled")?"disabled":"")+' data-activates="select-options-'+e+'" value="'+l+'"/>'),p.before(c),c.before(o),c.after(s),p.is(":disabled")||c.dropdown({hover:!1,closeOnClick:!1}),p.attr("tabindex")&&S(c[0]).attr("tabindex",p.attr("tabindex")),p.addClass("initialized"),c.on({focus:function(){var e,t;S("ul.select-dropdown").not(s[0](":visible")||(S(this).trigger("open",["focus"]),e=S(this).val(),r&&0text().toLowerCase()===e.toLowerCase()})[0],d(s,t,!0))},click:function(e){e.stopPropagation()}}),c.on("blur",function(){r||S(this).trigger("close"),s.fin{click:function(){!r||t||c.trigger("close")}}),r&&p.find("option:selected:not(:disabled)").each(function(){var e=S(this).index();f(i,e,p),s.find("li").eq(e).find(":checkbox").prop("checked",!0)}),d=function(e,t,n){t&&(e.find("li.selected").removeClass("selected"),(e=S(t)).addClass("selected"),r&&!n||s.scrollTo(e))},u=[],c.on("keydown",function(e){var t,n,i;9==e.which?c.trigger("close"):40!=e.which||s.is(":v=String.fromCharCode(e.which).toLowerCase())&&-1===[9,13,27,38,40].indexOf(e.which)&&(u.push(i),t=u.join(""),(n=s.find("li").filter(function(){return 0===S(this).text().toLowerCase().indexOf(t)})[0])&&d(s,n)),13==e.which&&(i=s.find("li.selected:not(.disabled)")[0])&&(S(i).trigger("click"),r||c.trigger("close")),40==e.which&&(n=(s.find("li.selected").length?s.find("li.si:not(.disabled)"):s.find("li:not(.disabled)"))[0],d(s,n)),27==e.which&&c.trigger("close"),38==e.which&&(n=s.&(r(e,n[t],n),1)}function r(e,t,n){if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==y)for(i=0;i<e.leonstructor=e,i._super=t,n&&a(i,n)}function H(e,t){return funce.indexOf(t)}function l(e){return e.trim().splitction u(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){q(t.options.enable,[t])&&n.handler(e)},this.init()}function $(e,t,n){var i,r,a,o,s,l,c=n.pointers.length,d=n.changedPointers.length,u=t&w&&0==c-d,c=t&(E|k)&&0==c-d,p=(n.isFirst=!!u,n.isFinal=!!c,u&&(e.session={}),n.eventType=t,d=n,u=(c=e).session,t=d.pointers,r=t.length,u.firstInput||(u.firstInput=Y(d)),1<r&&!u.firstMultiple?u.firstMultiple=Y(d):1===r&&(u.firstMultiple=!1),r=u.firstInput,a=u.firstMultiple,p=(a||r).center,h=d.center=G(t),d.timeStamp=ge(),d.deltaTime=d.timeStamp-r.timeStamp,d.angle=X(p,h),d.distance=Q(p,h),u),h=d,f=h.center,m=p.offsetDelta||{},v=p.prevDelta||{},g=p.prevInput||{},g=(h.eventTypy:g.deltaY||0},m=p.offsetDeltf.y-m.y),d.offsetDirection=K(d.deltaX,d.deltaY),d.scale=a?function(e,t){return Q(t[0],t[1],Te)/Q(e[0],e[1],Te)}(a.pointers,t):1,d.rotation=a?function(e(a.pointers,t):0,u),p=d,h=g.lastInterval||p,v=p.timeStamp-h.timeStamp;p.eventType!=k&&(ke<v||h.velocity===y)?(i=h.deltaX-p.deltaX,f=h.deltaY-p.deltaY,v=function(e,t,n){return{x:t/e||0,y:n/e||0}}(v,i,f),s=v.x,l=v.y,o=b(v.x)>b(v.y)?v.x:v.y,i=K(i,f),g.lastInterval=p):(o=h.velocity,s=h.velocityX,l=h.velocityY,i=h.die,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function re(e){return e==_?"down":e==C?"up":e==g?"left":e==x?"rigply(this,arguments)}function oe(){h.ap.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function f(e,t){return(t=t||{}).recognizers=z(t.recognizers,f.defaults.preset),new pe(e,t)}function pe(e,t){this.options=j(t=t||{},f.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.sessie:J))(var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function he(e,n){var i=e.element;r(e.options.cssProps,function(e,t){i.style[U(i.style,t)]=n?e:""})}var fe=["","webkit","moz","MS","ms","o"],me=R.createElement("div"),ve="function",m=Math.round,b=Math.abs,ge=Date.now,ye=1,be="ontouchstart"in e,we=U(e,"PointerEvent")!==y,Ee=be&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),v="touch",ke=25,w=1,E=4,k=8,xe=1,g=2,x=4,C=8,_=16,T=g|x,S=C|_,Ce=T|S,_e=["x","y"],Te=["clientX","clientY"],Se=(u.prototype={handler:function(){},ir)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(W(this.element),this.evWin,this.domHandler)}},{mousedown:w,mousemove:2,mouseup:E}),Ae=(t(J,u,{handler:function(e){var t=Se[e.type];t&w&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=E),this.pressed&&this.allow&&(t&E&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}}),{pointerdown:w,pointermove:2,pointerup:E,pointercancel:k,pointerout:k}),Pe={2:rId");i&w&&(0===e.button||a)?o<0&&(t.push(e),o=t.length-1):i&(E|k)&&(n=!0),o<0||(t[o]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e]e,u,{handler:function(e){var t,n=De[e.type];n===w&&(this.started=!0),this.started&&(t=function(e,t){var n=d(e.touches),e=d(e.changedTouches);return[n=t&(E|k)?B(n.concat(e),"identifier",!0):n,e]}.call(this,e,n),n&(E|k)&&0==t[0].length-t[1].e i[a[r].identifier],r++;return o.length?[B(l.concat(o),"identifier",!0),o]:void 0}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:v,srcEvent:e})}}),t(ne,u,se"==n.pointerType;if(i)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;t&(E|k)&&(this.mouse.allow=!0),this.callback(e,t,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}}),U(me.style,"touchAction")),Ne=Me!==y,Rtotype={set:function(e){"compute"==e&&(e=this.compute()),Ne&&(this.m:function(){this.set(this.manager.options.touchAction)},compute:function(){var e,t,n,i=[];return r(this.manager.recognizers,function(e){q(e.options.enable,[e])&&(i=i.concat(e.getTouchAction()))}),s(e=i.join(" "),A)?A:(t=s(e,P),n=s(e,I),t&&n?P+" "+I:t||n?t?P:I:s(e,Re)?Re:"auto")},preventDefaults:function(e){if(!Ne){var t,ented)return t=s(i=this.actions,A),n=s(i,I),i=s(i,this.manager.session.prevented=!0,e.preventDefault()}},2),D=4,O=8,M=O,N=16;p.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manages.simultaneous),this),delete this.))&&(t.push(e),e.refunction(e){returs),-1<(e=c(this.requireFail,e))&&this.requireFail.splice(e,1)),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneoent+(e?(},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=32)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){e=a({},e);return q(this.options.enable,[this,e])?(this.state&(M|N|32)&&(this.state=1),this.state=this.proctate=32)ar t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){v|e?n&E?t|O:t&LY;return this.e&L||!(this.state&L)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=rnt:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[A]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&L)},emit:function(e){var s,e),1!=input=e,!i||!n||e.eventType&(E|k)&&!r)this.reset(out(this._timer)},emit:function(e){this.state===M&&(e&&e.eventType&E?this.manager.emit(this.options.event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[A]},attrTest:function(e){return ths.optionsreturce>this.options.threshold&&b(t)>this.options.velocity&&e.eventType&E},emit:function(e){var t=re(e.direction);t&&thisons.event+t,e),this.manager.emit(this.options.event,e)}}),t(ue,p,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Re]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&w&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=E)return this.failTimeout();i=!this.pTime||e.timeStamp-this.pTime<t.interval,r=!this.pCenter||Q(this.ppTime=e.timeStamp,this.pCenter=e.center,r&&i?es()?(this.2},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==M&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),f.VERSION="2.0.4",f.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ce,{enable:!1}],[se,{enable:!1},["rotate"]],[de,{direction:T}],[oe,{direction:T},["swipe"]],[ue],[ue,{event:"d)"}};his.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!rize(nt==e)return t[n];return null},add:function(e){var t;return n(e,"add",this)?this:((t=this.get(e.options.event))&&this.remove(t),this.recognizve",t){vat.dispatunction(){t.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](t),o++}},destroy:function(){this.element&&he(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(f,{INPUT_START:w,INPUT_MOVE:2,INPUT_END:E,INPUT_CANCEL:k,STATE_POSSIBLE:1,STATE_BEGAN:L,STATE_CHANGED:D,STATE_ENDED:O,STATE_RECOGNIZED:M,STATE_CANCELLED:N,STATE_FAILED:32,DIRECTION_NONE:xe,DIRECTION_LEFT:g,DIRECTION_RIGHT:x,DIRECTION_UP:C,DIRECTION_DOWN:_,DIRECTION_HORIZONTAL:T,DIRECTION_VERTICAL:S,DIRECTION_ALL:Ce,Manager:pe,Input:u,TouchAction:ie,TouchInput:te,MouseInput:J,PointerEventInput:Z,TouchMouseInput:ne,SingleTouchInput:ee,Recognizer:p,AttrRecognizer:h,Tap:ue,Pan:oe,Swipe:de,Pinch:se,Rotate:ce,Press:le,on:i,off:o,each:r,merge:j,extend:a,inherit:t,bindFn:H,prefixed:U}),typeof define==ve&&define.amd?define("hamdule.exportument),c.easdef:"easeOutQu)},easeInQuaeaseOutQuad:fOutQuad:functioic:function(c:function(e,c:function(e,t,on(e,t,n,i,rn(e,t,n,i,r){n(e,t,n,i,r){ren,i,r){return i*((t=t/rn(t/=r/2)<1?i/e,t,n,i,r){,t,n,i,r){rei,r){return-i/xpo:functioeaseInOutExp/2*Math.pow(2,/=r)*t)-1)+n},unction(e,t,n,i:function(e,t,n,io||r*(.3*1.5),a=s<Math.abs(i)?(s=i,o/4):o/(2*Math.PI)*Math.asin(i/s),t<1?s*Math.pow(2,10*--t)*Math.sin((t*r-a)*(2*Math.PI)/o)*-.5+n:s*Math.pow(2,-10*--t)*Math.sin((t*r-a)*(2*Math.PI)/o)*.5*((t=t/r-1)*t,a){return a==utBounce:functio2.75)*t+.9375)+n:i*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,i,r){return t<r/2?.5*c.easing.easeInBounce(e,2*t,0,i,r)+n:.5*c.easing.easeOutBounce(e,2*t-r,0,i,r)+.5*i+n}}),define("jquery.easing",["jquery"],function(){}),function(n){"use strict";function s(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n+=t+":"+e[t]+";");return n}function t(e){var t=function(e){if(!1===o.allowEvent(e))return null;for(var t=null,n=e.target||e.srcElement;null!==n.parentElement;){if(!(n instanceof SVGElement||-1===n.className.indexOf("waves-effect"))){t=n;break}if(n.classList.contains("waves-effect")){t=n;break}n=n.parentElement}return t}(e);null!==t&&(l.show(e,t),"ontouchstart"in n&&(t.addEventListener("touchend",l.hide,!1),t.addEventListener("touchcancel",l.hide,!1)),t.addEventListener("mouseup",l.hide,!1),t.addEventListener("mouseleave",l.hide,!1))}var e={},i=document.querySelectorAll.bind(document),l={duration:750,show:function(e,t){if(2===e.button)return!1;var t=t||this,n=document.createElement("div"),i=(n.className="waves-ripple",t.appendChild(n),r={top:0,left:0},a=(i=t)&&i.ownerDocument,o=a.documentElement,typeof i.getBoundingClientRect!=typeof R&&(r=i.getBoundingClientRect()),a=null!==(a=i=a)&&a===a.window?i:9===i.nodeType&&i.defaultView,{top:r.top+a.pageYOffset-o.clientTop,left:r.left+a.pageXOffset-o.clientLeft}),r=e.pageY-i.top,a=e.pageX-i.left,o="scale("+t.clientWidth/100*10+")",t=("touches"in e&&(r=e.touches[0].pageY-i.top,a=e.touches[0].pageX-i.left),n.setAttribute("data-hold",Date.now()),n.setAttribute("data-scale",o),n.setAttribute("data-x",a),n.setAttribute("data-y",r),{top:r+"px",left:a+"px"});n.className=n.className+" waves-notransition",n.setAttribute("style",s(t)),n.className=n.className.replace("waves-notransition",""),t["-webkit-transform"]=o,t["-moz-transform"]=o,t["-ms-transform"]=o,t["-o-transform"]=o,t.transform=o,t.opacity="1",t["-webkit-transition-duration"]=l.duration+"ms",t["-moz-transition-duration"]=l.duration+"ms",t["-o-transition-duration"]=l.duration+"ms",t["transition-duration"]=l.duration+"ms",t["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",t["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0ebkit-transform":a,"-moz-transform":a,"-ms-transform":a,"-o-transform":a,transform:a};n.setAttribute("style",s(e)),setTimeout(function(){try{t.removeChild(n)}catch(e){return!1}},l.duration)},e)},wrapInput:function(e){for(var t=0;t<e.length;t++){var n,i,r,a=e[t];"input"!==a.tagName.toLowerCase()||"i"===(n=a.parentNode).tagName.toLowerCase()&&-1!==n.className.indexOf("waves-effect")||((i=document.createElement("i")).className=a.className+" waves-inpute){var t=!0;return"touchstart"===e.type?o.touches+=1:"ation"in(,!1)},e.attach=function(e){"input"===e.tagName.toLowerCase()&&(l.wrapInput([e]),e=e.parentElement),"ontouchstart"in n&&e.addEventListener("touchstart",t(e=i(e=this)).data("hammer")||e.data("hammer",new r(e[0],t))})},r.Manager.prototype.emit=(n=r.Manager.prototype.emit,function(e,t){n.call(this,e,t),i(this.element).trigger({type:e,gesture:t})})},"function"==typeof define&&define.amd?define("jquery.hammer",["jquery","hammerjs"],T):"object"==typeof exports?T(require("jquery"),require("hammerjs")):T(c,Hammer),T=function(d){function n(){var e=function(e){{var t;(e=d(e)).data("timeago")||(e.data("timeago",{datetime:a.datetime(e)}),t=d.trim(e.text()),a.settings.localeTitle?e.attr("title",e.data("timeago").datetime.toLocaleString()):!(0<t.length)||a.isTimn isNaN(nction r(e){return(new Date).getTime()-e.getTime()}d.timeago=function(e){return i(e instanceof Date?e:"string"==typeof e?d.timeago.parse(e):"number"==typeof e?new Date(e):d.timeago.datetime(e))};var a=d.timeago,o=(d.extend(d.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(n){function e(e,t){e=d.isFunction(e)?e(t,n):e,t=i.numbers&&i.numbers[t]||t;return e.replace(/%d/i,t)}var i,t,r,a,o,s,l,c;if(this.settings.allowPast||this.settings.allowFuture)return t=(i=this.settings.strings).prefixAgo,r=i.suffixAgo,this.settings.allowFuture&&n<0&&(t=i.prefixFromNow,r=i.suffixFromNow),!this.settings.allowPast&&0<=n?this.settings.strings.inPast:(s=(o=(a=(c=(l=Math.abs(n)/1e3)/60)/60)/24)/365,l=l<45&&e(i.seconds,Math.round(l))||l<90&&e(i.minute,1)||c<45&&e(i.minutes,Math.round(c))||c<90&&e(i.hour,1)||a<24&&e(i.hours,Math.round(a))||a<42&&e(i.day,1)||o<30&&e(i.days,Math.round(o))||o<45&&e(i.month,1)||o<365&&e(i.months,Math.round(o/30))||s<1.5&&e(i.year,1)||e(i.years,Math.round(s)),c=i.wordSeparator||"",void 0===i.wordSeparator&&(c=" "),d.trim([t,l,r].join(c)));throw"timeago allowPast and allowFuture settings can not both be set to false."},parse:function(e){e=d.trim(e);return e=(e=(e=(e=(e=e.replace(/\.\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replaace(/([\+\-]\d\d)$/," $100"),new Date(e)},datetime:function(e){e=d(e).attr(a.isTime(e)?"datetime":"title");return a.parse(e)},isTime:function(e){return"time"===d(e).get(0).tagName.toLowerCase()}}),{init:function(){var e=d.proxy(n,this),t=(e(),a.settings);0<t.refreshMillis&&(this._timeagoInterval=setInterval(e,t.refreshMillis))},update:function(e){e=a.parse(e);d(this).data("timeago",{datetime:e}),a.settings.localeTitle&&dtime:a.parse(d(this).attr(a.isTime(this)?"datetime":"title"))}),n.applythis._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}});d.fn.timeago=function(e,t){var n=e?o[e]:o.init;if(n)return this.each(function(){n.call(this,t)}),this;throw new Error("Unknown function name '"+e+"' for timeago")},document.createElement("abbr"),document.createElement("time")},"function"==typeof define&&define.amd?define("jquery.timeago",["jquery"],T):T(c),(_=c).fn.materialbox=function(){return this.each(function(){function c(){h=!1;var e=f.parent(".material-placeholder"),t=(window.innerWidth,window.innerHeight,f.data("width")),n=f.data("height");f.velocity("stop"ocity("stop",!0),_(".materialbox-caption").velocity("stop",!0),_("#materialbox-overlay").velocity({opacity:0},{duration:i,queue:!1,easing:"easeOutQuad",complete:function(){p=!1,_(this).remove()}}),f.velocity({width:t,height:n,left:0,top:0},{duration:i,queue:!1,easing:"easeOutQuad"}),_(".materialbox-caption").velocity({opacity:0},{duration:i,queue:!1,easing:"easeOutQuad",complete:function(){e.css({height:"",width:"",position:"",top:"",left:""}),f.css({height:"",top:"",left:"",width:"","max-width":"",position:"","z-index":"","will-change":""}),f.removeClass("active"),h=!0,_(this).remove(),d&&d.css("overflow","")}})}var d,u,p,h,i,f,e;_(this).hasClass("initialized")||(_(this).addClass("initialized"),h=!(p=!1),i=200,f=_(this),e=_("<div></div>").addClass("material-placeholder"),f.wrap(e),f.on("click",function(){var e=f.parent(".material-placeholder"),t=window.innerWidth,n=window.innerHeight,i=f.width(),r=f.height();if(!1===h)return c(),!1;if(p&&!0===h)return c(),!1;for(h=!1,f.addClass("active"),p=!0,e.css({width:e[0].getBoundingClientRect().width,height:e[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),d=R,u=e[0].parentNode;null!==u&&!_(u).is(document);){var a=_(u);"visible"!==a.css("overflow")&&(a.css("overflow","visible"),d=d===R?a:d.add(a)),u=u.pareabsolute","z-index":1e3,"will-change":"left, top, width, height"}).data("width",i).data("height",r);var e=_('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){!0===h&&c()}),o=(f.before(e),e[0].getBoundingClientRect()),s=(e.css({width:t,height:n,left:-1*o.left,top:-1*o.top}),e.velocity({opacity:1},{duration:275,queue:!1,easing:"easeOutQuad"}),""!==f.data("caption")&&((o=_('<div class="materialbox-caption"></div>')).text(f.data("caption")),_("body").append(o),o.css({display:"inline"}),o.velocity({opacity:1erial-placeholder").offset().left-s/2,top:_(document).scrollTop()+n/2-f.parent(".material-placeholder").offset().top-l/2},{duration:275,queue:!1,easing:"easeOutQuad",complete:function(){h=!0}})}}):f.css("left",0).css("top",0).velocity({height:l,width:s,left:_(document).scrollLeft()+t/2-f.parent(".material-placeholder").offset().left-s/2,top:_(document).scr").offset().top-l/2},{duration:275,queue:!1,easing:"easeOutQuad",complete:function(){h=!0}})}),_(window).scroll(function(){p&&c()}),_(document).keyup(function(e){27===e.keyCode&&!0===h&&p&&c()}))})},_(document).ready(function(){_(".materialboxed").materialbox()}),define("materialbox",["jquery"],function(){}),(C=c).fn.parallax=function(){var c=C(window).width();return this.each(function(e){function t(e){var t=c<601?(0<l.height()?l:l.children("img")).height():0<l.height()?l.height():500,n=l.children("img").first(),i=n.height()-t,r=l.offset().top+t,a=l.offset().top,o=C(window).scrollTop(),s=window.innerd(i*((+s&&n.css("transform","translate3D(-50%,"+i+"px, 0)")}var l=C(this);l.addC("load",function(){t(!0)}).each(function(){this"parallax",["jquery"],function()n||!c.open&&h.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?h.clear().close():h.open()))}function s(e){e.stopPropagation(),"focus"==e.type&&h.$root.addCld,u,p,h;return i?(l=!1,c={id:i.id||"P"+Math.abs(~~(Math.random()*new Date))},d=r?f.extend(!0,{},r.defaults,e):e||{},u=f.extend({},m.klasses(),d.klass),p=f(i),h=(e=function(){return this.start()}).prototype={constructor:e,$node:p,start:function(){return c&&c.start?h:(c.methods={},c.start=!0,c.open=!1,c.type=i.type,i.autofocus=i==g(),i.rt"),h.component=nek":function(e){var t=e.target;t!=h.$root.children(n"!=e.type||f(t).is("input, select, textarea, button, option")||(e.preventDefault(),h.$root.eq(0).focus()))}}).on({focus:function(){p.addClass(u.target)},blur:function(){p.removeClass(u.target)}}).on("focus.toOpen",s).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var e=f(this),t=e.data(),e=e.hasClass(u.navDisabled)||e.hasClass(u.disabled),n=(n=g())&&(n.type||n.href);(e||n&&!f.contains(h.$root[0],n))&&h.$root.eq(0).focus(),!e&&t.nav?h.set("highlight",h.component.item.highlight,{nav:t.nav}):!e&&"pick"in t?h.set("select",t.pick):t.clear?h.clear().close(!0):t.close&&h.close(!0)}),v(h.$root[0],"hidden",!0),d.formatSubmit&&(!0===d.hiddenName?(t=i.name,i.name=""):t=(t=["string"==typeof d.hiddenPrefix?d.hiddenPrefix:"","string"==typeof d.hiddenSuffhidden name="'+t+'"'+(p.data("value")||i.value?' value="'+h.get("select",d.formatSubmit)+'"':"")+">")[0],p.on("change."+c.id,function(){h._hidden.value=i.value?h.get("select",d.formatSubmit):""}),d.container?f(d.conth).addClass(u.input).attr("tabindex",-1).val(p.data("value")?h.get("select",d.format):i.value),d.editable||p.on("focus."+c.id+" click."+c.id,function(e){e.preventDefault(),h.$root.eq(0).focus()}).on("keydown."+c.id,o),v(i,{haspopup:!0,expanded:!1,readonly:!1,owns:i.id+"_root"}),d.container?f(d.container).append(h.$root):p.after(h.$root),h.on({start:h.component.onStart,render:h.component.onRender,stop:h.component.onStop,open:h.component.onOpen,close:h.component.onClose,set:h.component.onSet}).on({start:d.onStart,render:d.onRender,stop:d.onStop,open:d.onOpen,close:d.onClose,set:d.onSet}),(t=h.$root.childr=e,i.e.rementDefunctioused),v(h.$root[0],"hidden",!0)},0),c.open?(c.open=!1,l&&b.css("overflow","").css("padding-right","-="+t()),y.off("."+c.id),h.trigger("close")):h},clear:function(e){return h.set("clear",null,e)},set:function(e,t,n){var i,r,a=f.isPlainObject(e),o=a?e:{};if(n=a&&f.isPlainObject(t)?t:n||{},e){for(i in a||(o[e]=t),o)r=o[i],i ie="":h.i),c.metength;n<nav(e,t,n){if(f.isPlainObject(t))for(var i in t)r(e,i,t[i]);else r(e,t,n)}f||"picker",+"__wtrigg,t[0],t[ class=Array(t(e,t,n){rern/\d/.test(e[1])?2:1},isDate:function(e){return-1<{}.toString.call(e).indexOf("Date")&&this.isInteger(e.getDate())},isInteger:function(e){return-1<{}.toStrif.fn[i]=function(e,t){var n=this.dat(this,i,r,e)})},f.fn[i].defaults=r.defaults},m}),T=function(e,f){function t(t,n){function e(){return a.currentStyle?"rtl"==a.currentStyle.direction:"rtl"==getComputedStyle(t.$root[0]).direction}var i,r=this,a=t.$node[0],o=a.value,s=t.$node.data("value"),o=s||o,s=s?n.formatSubmit:n.format;r.settings=n,r.$node=t.$node,r.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},r.item={},r.item.clear=null,r.item.disable=(n.disable||[]).slice(0),r.item.ena)[0n.m0:7,38:-7,39:fud("."+n.klass+n.klass.selecdisabled(r.get(t.find("buttone.highlight,i):t.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&r.disabled(e.select)&&r.set("select",e.select,i),e.highlight&&r.disabled(e.highlight)&&r.set("highlight",e.highlight,i))),r},t.prototype.get=function(e){return this.item[e]},t.prototype.create=function(e,t,n){var i;return(t=t===R?e:t)==-1/0||t==1/0?i=t:t=f.isPlainObject(t)&&v.isInteger(t.pick)?t.obj:f.isArray(t)?(t=new Date(t[0],t[1],t[2]),v.isDate(t)?t:this.create().obj):v.isInteger(t)||v.integer(e)||(e=n(e)),v.iser(t)&&f.isPlainObject(e)&s=function(e,t){om)||this.withinRange=+t[0],r=+t[1],+t[2]),nth),i=(o=new Date(irmalize=function(e){tion(e,t){return t?"string"==typeof t?t=this.parse(e,t):v.isInteger(t)&&(t=this.now(e,t,{rel:t})):t="min"==e?-1/0:1/0,t},t.prototype.viewset=function(e,t){return t?t.interval:1,d=-1===s.item.enable,u=s.item.min,p=s.item.max,h=d&&s.item.disable.filter(function(e){var t;return f.isArray(e)&&((t=s.create(e).pick)<n.pick?i=!0:t>n.pick&&(r=!0)),v.isInteger(e)}).length;if((!t||!t.nav)&&(!d&&s.disabled(n)||d&&s.disabled(n)&&(h||i||r)||!d&&(n.pick<=u.pick||n.pick>=p.pick)))for(d&&!h&&(!r&&0<c||!i&&c<0)&&(c*=-1);s.disabled(n)&&(1<Math.abs(c)&&(n.month<l.month||n.month>l.month)&&(n=l,c=0<c?1:-1),n.pick<=u.pick?(a=!0,c=1,n=s.create([u.year,u.month,u.d 0})).length&&!e.ormats.toArray(t.formattri;t&&(a[e]=i.substr(0,n)),i=i.substr(n)}),[a.yyyy||a.yy,+(a.mm||a.m)-1,a.ditd(t.settings.weekdaysShort[t.day]},dddd:function(e,t){return e?r(e):this.settings.weekdae,tt){vaurn e?i(onthsFulleturn e.split(/(d{1,4}|m{)||f.isArray(e))&&(v.isDat|f.isArray(t))?(e=e%7+nray(e))?(t=t%7+n)===thile(-1),r=[]):t.map(fu"]);break}}if(t)for(r=0;r<s;r+r<=f.year&&p.month<=f.month?" "+c.klass.navDisabled:""),"data-nav="+(e||-1)+" "+v.ariaAttr({role:"button",controls:l.$node[0].id+"_table"})+' title="'+(e?c.labelMonthNext:c.labelMonthPrev)+ode("select",v.group({min:0,max:11,i:1,node:"option",item:function(e){return[t[e],0,"value="+e+(p.month==e?" selected":"")+(p.year==f.year&&e<f.month||p.year==m.year&&e>m.month?" disabled":"")]}}),c.klass.selectMonth+" browser-default",(s?"":"disabled")+" "+v.ariaAttr({controls:l.$node[0].id+"_table"})+' title="'+c.labelMonthSelect+'"'):"short_months"==e?null!=d?v.node("div",t[d.month]):v.node("div",t[p.month]):v.node("div",t[p.month],c.klass.month)}function n(e){var t=p.year;if(o=!0===c.selectYears?5:~~(ci&&(o+=i-a,a=i),r<o&&(a-=(n=o-r)<(i=a-i)?n:i,o=r),c.selectYears&&e==R)return v.node("select",v.group({min:a,max:o,i:1,node:"option",item:function(e){return[e,0,"value="+e+(t==e?" selected":"")]}}),c.klass.selectYear+" browser-default",(s?"":"disabled")+" "+v.ariaAttr({controls:l.$node[0].id+"_table"})+' title="'+c.labelYearSelect+'"')}return"raw"==e?v.node("div",t):v.node("div",t,c.klass.year)}var i,r,l=this,c=l.settings,a=l.item,o=a.now,d=a.select,u=a.highlight,p=a.view,h=a.disable,f=a.min,m=a.max,a=(i=(c.showWeece(0),c.firstDay&&(i.push(i0,max:6,i:1,node:"th",item:function(e){return[i[e],c.klass.weekdays,'scope=col title="'+r[e]+'"']}}))));return createDayLabel=function(){return null!=d?v.node("div",d.date):v.node("div",o.date)},createWeekdayLabel=function(){var e=(null!=d?d:o).day;return c.weekdaysFull[e]},v.node("div",v.node("div",createWeekdayLabel(),"picker__weekday-display")+v.node("div",t("short_months"),c.klass.month_display)+v.node("div",createDayLabel(),c.klass.day_display)+v.node("div",n("ra)),"data-pick="+e.pick+" "+v.ariaAttr({role:"gridcell",label:a,selected:!(!n||l.$node.val()!==a)||null,activedescendant:!!i||null,disabled:!!r||null})),"",v.ariaAttr({role:"presentation"})]}})]}})),c.klass.table,'id="'+l.$node[0].id+'_table" '+v.ariaAttr({role:"grid",controls:l.$node[0].id,readonly:!0})),c.klass.calendar_container)+v.node("div",v.node("button",c.today,"btn-flat picker__today","type=button data-pick="+o.pick+(s&&!l.disabled(o)?"":" disabled")+" "+v.ariaAttr({controls:l.$node[0].id}))+v.node("button",c.clear,"btn-flat picker__clear","type=button data-clear=1"+(s?"":" disabled")+" "+v.ariaAttr({controls:l.$node[0].id}))+v.node("button",c.close,"btn-flat picker__close","type=button data-close=true "+(s?"":" disabled")+" "+v.ariaAttr({controls:l.$node[0].id})),c.klass.footer)},t.defaults={labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:(n=e.klasses().picker+"__")+"table",header:n+"header",date_display:n+"date-display",day_display:n+"day-display",month_display:n+"month-display",year_display:n+"year-display",calendar_container:n+"calendar-container",navPrev:n+"nav--prev",navNext:n+"nav--next",navDisabled:n+"nav--disabled",month:n+"month",year:n+"year",selectMonth:n+"select--month",selectYear:n+"select--year",weekdays:n+"weekday",day:n+"day",disabled:n+"day--disabled",selected:n+"day--selected",highlighted:n+"day--highlighted",now:n+"day--today",infocus:n+"day--infocus",outfocus:n+"day--outfocus",footer:n+"footer",buttonClear:n+"button--clear",buttonToday:n+"button--today",buttonClose:n+"button--close"}},e.extend("pickadate",t)},"function"==typeof define&&define.amd?defirn"remove"===a?(this.each(function(){(id=x(this).data("pushpin-id")r e=Materialize.guid(),i=x(this),r=x(this).offset().top;x(this).data("pushpin-id",e),t(i,x(window).scrollTop()),x(window).on("scroll."+e,function(){var e=x(window).scrollTop()+a.offset;t(i,e)})}))},define("pushpin",["jquery"],function(){}),W=!1,Materialize.scrollFire=function(o){var e=Materialize.throttle(function(){!function(){for(var e=window.pageYOffset+window.innerHeight,t=0;t<o.length;t++){var n=o[t],i=n.selector,r=n.offset,a=n.callback,i=document.querySelector(i);null!==i&&i.getBoundingClientRect().top+window.pageYOffset+r<e&&!0!==n.done&&("function"==typeof a?a.call(this,i):"string"==typeof a&&new Function(a)(i),n.done=!0)}}()},o.throttle||100);W||(window.addEventListener("scroll",e),window.addEimeout(e,0)},define("scrollFire",["jquery","global"],function(){}),w=(v=c)(window),F=[],U=!(B=[]),k={top:E=0,right:0,bottom:0,left:0},v.scrollSpy=function(e,n){function t(){v(document).ready(r)}n=v.extend({throttle:100,scrollOffset:200},n);var i=[],r=((e=v(e)).each(function(e,t){F.push(v(t)),v(t).data("scrollSpy:id",e),v('a[href="#'+v(t).attr("id")+'"]').click(function(e){e.preventDefault();e=v(Materialize.escapeHash(this.hash)).offset().top+1;v("html, body").animate({sation:400,queue:!1,easing:"easeOutCubic"})})}),k.top=n.offsetTop||0,k.right=n.offsetRight||0,k.bottom=n.offsetBottom||0,k.left=n.offsetLeft||0,Materialize.throttle(function(){oe(n.scrollOffset)},n.throttle||100));return U||(w.on("scroll",t),w.on("resize",t),U=!0),setTimeout(t,0),e.on("scrollSpy:enter",function(){i=v.grep(i,function(e){return 0!=e.height()});var e=v(this);i[0]&&(v('a[href="#'+i[0].attr("id")+'"]').removeClass("active"("scrollSpy:id"))?i.unshift(v(this)):i.push(v(this)),v('a[href="#'+i[0].attr("id")+'"]'nction(){var t;(i=v.grep(i,function(e){return 0!=e.height()}))[0]&&(v('a[href="#="#'+i[0].attr(izeSpy=function(e){return v.winSizeSpy=function(){return w},e=e||{throttle:100},w.on("resize",Materialize.throttle(se,e.throttle||100))},v.fn.scrollSpy=function(e){return v.scrollSpy(v(this),e)},define("scrollspy",["jquery"],function(){}),m={init:function(l){l=f.extend({menuWidth:300,edge:"left",closeOnClick:!1,draggable:!0},l),f(this).each(function(){var e=f(this),t=e.attr("data-activates"),r=f("#"+t),a=(300!=l.menuWidth&&r.css("width",l.menuWidth),f('.drag-target[data-sidenav="'+t+'"]')),o=(l.draggable?(a.length&&a.remove(),a=f('<div class="drag-target"></div>').attr("data-sidenav",t),f("body").append(a)):a=f(),"left"==l.edge?(r.css("transform","translateX(-100%)"),a.css({left:0})):(r.addClass("right-aligned").css("transform","translateX(100%)"),a.css({right:0})),r.hasClass("fixed")&&992<window.innerWidth&&r.css("transform","translateX(0)"),r.hasClass("fixed")&&f(window).resize(function(){992<window.innerWidth?0!==f("#sidenav-overlay").length&&s?o(!0):r.css("transform","translateX(0%)"):!1===s&&("left"===l.edge?r.css("transform","translateX(-100%)"):r.css("transform","translateX(100%)"))}),!0===l.closeOnClick&&r.on("click.itemclick","a:not(.collapsible-header)",function(){o()}),function(e){s=!1,f("body").css({overflow:"",width:""}),f("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){f(this).remove()}}),"left"===l.edge?(a.css({width:"",right:"",left:"0"}),r.velocity({translateX:"-100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:f):(a.css({width:"",right:"0",left:""}),r.velocity({translateX:"100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===e&&(r.removeAttr("style"),r.css("width",l.menuWidth))}}))}),s=!1;l.draggable&&(a.on("click",function(){s&&o()}),a.hammer({prevent_default:!1}).bind("pan",function(e){var t,n,i;"touch"==e.gesture.pointerType&&(e.gesture.direction,t=e.gesture.center.x,e.gesture.centelocityX,e=f("body"),n=f("#sidenav-overlay"),i=e.innerWidth(),e.css("overflow","hidden"),e.width(i),0===n.length&&((n=f('<div id="sidenav-overlay"></div>')).css("opacity",0).click(function(){o()}),f("body").append(n)),"left"===l.edge&&(t>l.menuWidth?t=l.menuWidth:t<0&&(t=0)),"left"===l.edge?(t<l.menuWidth/2?s=!1:t>=l.menuWidth/2&&(s=!0),r.css("transform","translateX("+(t-l.menuWidth)+"px)")):(t<window.innerWidth-l.menuWidth/2?s=!0:t>=window.innerWidth-l.menuWidth/2&&(s=!1),e=t-l.menuWidth/2,r.css("transform","translateX("+(e=e<0?0:e)+"px)")),i="left"===l.edge?t/l.menuWidth:Math.abs((t-window.innerWidth)/l.menuWidth),n.velocity({opacity:i},{duration:10,queue:!1,easing:"easeOutQuad"}))}).bind("panend",function(e){var t,n,i;"touch"==e.gesture.pointerType&&(t=f('<div id="sidenav-overlay"></div>'),n=e.gesture.velocityX,0<(i=(e=e.gesture.center.x)-l.menuWidth)&&(i=0),(e=e-l.menuWidth/2)<0&&(e=0),"left"===l.edge?s&&n<=.3||n<-.5?(0!==i&&r.velocity({translateX:[0,i]},{duration:300,queue:!1,easing:"easeOutQuad"}),t.animate({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),a.css({width:"50%",right:0,left:""}),s=!0):(!s||.3<n)&&(f("body").css({overflow:"",width:""}),r.velocity({translateX:[-1*l.menuWidth-10,i]},{duration:200,queue:!1,easing:"easeOutQuad"}),t.animate({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){f(this).remove()}}),a.css({width:"10px",right:"",left:0})):s&&-.3<=n||.5<n?(0!==e&&r.velocity({translateX:[0,e]},{duration:300,queue:!1,easing:"easeOutQuad"}),t.animate({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),a.css({width:"50%",right:"",left:0}),s=!0):(!s||n<-.3)&&(f("body").css({overflow:"",width:""}),r.velocity({translateX:[l.menuWidth+10,e]},{duration:200,queue:!1,easing:"easeOutQuad"}),t.animate({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){f(this).remove()}}),a.css({width:"10px",right:0,left:""})))})),e.off("click.sidenav").on("click.sidenav",function(){var e,t,n;return!0===s?(s=!1,o()):(e=f("body"),t=f('<div id="sidenav-overlay"></div>'),n=e.innerWidth(),e.css("overflow","hidden"),e.width(n),f("body").append(a),"left"===l.edge?(a.css({width:"50%",right:0,left:""}),r.velocity({translateX:[0,-1*l.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})):(a.css({width:"50%",right:"",left:0}),r.velocity({duration:300,queue:!1,easing:"easeOutQuad"})),t.css("opacity",0).click(function(){s=!1,o(),t.animate({opacity:0},{duration:300,queue:!10}}))f("#sf(this).attr("data-activates")+'"]');e.trigger("click"),t.remove(),f(this).off("click"),e.remove()},show:function(){this.trigger("click")},hide:function(){f("#sidenav-overlay").trigger("click")}},(f=c).fn.sideNav=function(e){return m[e]?m[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void f.error("Method "+e+" does not exist on jQuery.side").velocity({opacity:1,translateX:0,translateY:0},{duration:p.transition,delay:p.transition,queue:!1,easing:"easeOutQuad"}),l.eq(e).addClass("active"),p.indicators&&r.eq(e).addClass("active"))}var i,r,a,o=h(this),s=o.find("ul.slides").firstind(".active").indexta:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAA;t.click(function(){n(s.parent().find(h(this)).index()),clearInterval(a),a=setInterval(function(){c=s.find(".active").index(),l.length==c+1?c=0:c+=1,n(c)},p.transition+p.interval)}),r.append(t)}),o.append(r),r=o.find("ul.indicators").find("li.indicator-item",p.indicators&&r.eq(c).addClass("active")),i.find("img").each(function(){i.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:p.transition,queue:!1,easing:"easeOutQuad"})}),a=setInterval(function(){n((c=s.find(".active").index())+1)},p.transition+p.interval),!1),u=!1;o.hammer({prevent_default:!1}).bind("pan",function(e){var t,n,i,r;"touch"===e.gesture.pointerType&&(clearInterval(a),t=e.gesture.direction,n=e.gesture.deltaX,i=e.gesture.velocityX,e=e.gesture.velocityY,$curr_slide=s.find(".active"),Math.abs(i)>Math.abs(e)&&$curr_slide.velocity({translateX:n},{duration:50,queue:!1,easing:"easeOutQuad"}),4===t&&(n>o.innerWidth()/2||i<-.65)?u=!0:2===t&&(n<-1*o.innerWidth()/2||.65<i)&&(d=!0),d&&(r=0===(r=$curr_slide.next()).length?l.first():r).velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}),u&&(r=0===(r=$curr_slide.prev()).length?l.last():r).velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}))}).bind("panend",function(e){"touch"===e.gesture.pointerType&&($curr_slide=s.find(".active"),curr_index=s.find(".active").index(),!u&&!d||l.length<=1?$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:"easeOutQuad"}):d?(n(curr_index+1),$curr_slide.velocity({translateX:-1*o.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){rr_index-1),$curr_slide.velocity({translateX:o.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})),u=d=!1,derPause",function(n(){clearInterval(aindex(),l.length==c+1?c=0:c+=1,n(c)},p.transition+p.interval)}),o.on("sliderNext",function(){n((c=s.find(".active").index())+1)}),o.on("sliderPrev",functi)},pause:function(){h(this).trigger("sliderPause")},start:function(){h(this).trigger("sliderStart")},next:function(){h(this).trigger("sliderNext")},prev:function(){h(this).trigger("sliderPrev")}},(h=c).fn.slider=function(e){return p[e]?p[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void h.error("Method "+e+" does not exist on jQuery.tooltip"):p.init.apply(this,arguments)},define("slider",["jquery"],function(){}),u={init:function(v){return v=b.extend({onShow:null,swipeable:!1,responsiveThreshold:1/0},v),this.each(function(){function n(e){0<=u-e?(t.animate({right:f(i)},{duration:h,queue:!1,easing:"easeOutQuad"}),t.animate({left:m(i)},{duration:h,queue:!1,easing:"easeOutQuad",delay:90})):(t.animate({left:m(i)},{duration:h,queue:!1,easing:"easeOutQuad"}),t.animate({right:f(i)},{duratiob(),d=Math.max(l,o[0].scrollWidth)/s.length,u=prev_index=0,p=!1,h=300,f=function(e){return l-e.position().left-e.outerWidth()-o.scrollLeft()},m=function(e){return e.position().left+o.scrollLeft()};v.swipeable&&e>v.responsiveThreshold&&(v.swipeable=!1),(i=0===(i=0===(i=b(s.filter('[href="'+location.hash+'"]'))).length?b(this).find("li.tab a.active").first():i).length?b(this).find("li.tab a").first():i).addClass("active"),(u=s.indexactive"),o.find(".inon(){t.css({right:f(ith)/s.length,u<0&&(u=0),0!==d&&0!==l&&(t.css({right:f(i)}),t.css({left:m(i)}))}),v.swipeable?(s.each(function(){var e=b(Materialize.escapeHash(this.hash));e.addClass("carousel-item"),c=c.add(e)}),a=c.wrapAll('<div class="tabs-content.carousel").carousel({fullWidth:!0,noWrap:!0,onCycleTo:function(e){var t;p||(t=u,u=a.index(e),i=s.eq(u),n(t))}})):s.not(i).each(function(){b(Materialize.escapeHash(this.hash)).hide()}),o.on("click","a",function(e){var t;b(this).parent().hasClass("disabled")?e.preventDefault():b(this).attr("target")||(p=!0,l=o.width(),d=Math.max(l,o[0].scrollWidth)/s.length,i.removeClass("active"),t=r,i=b(this),r=b(Materialize.escapeHash(this.hash)),s=o.find("li.tab a"),i.position(),i.addClass("active"),prev_index=u,(u=s.index(b(this)))<0&&(u=0),vth&&c.carousel("set",u):(r!==R&&(r.show(),r.addClass(),t===R||t.is(rbs=function(e){retrototype.slice.call(arguments,1)):"object"!=typeof e&&e?void b.error("Method "+e+" does not exist on jQuery.tabs"):u.init.apply(this,arguments)},b(document).ready(function(){b("ul.tabs").tabs()}),definudes Velocitye.length,ndow(e)&){return new O.fn.init(e,e&&e==e.window},sWindow==(i=t.apply(e[r],n));r++);else for(r in e)if(i=t.apply(e[r],n),!1===i)break}else if(o)for(;r<a&&!1!==(i=t.call(e[r],r,e[r]));r++);else for(r in e)if(i=t.call(e[r],r,e[r]),!1===i)break;return e},O.data=functioi[t]:void 0):void 0!==t?(r=e[O.expando]||(e[O.expando]=++O.uuid),M[r]=M[r]||{},M[r][t]=n):void 0},O.removeData=function(e,t){var e=e[O.expando],n=e&&M[e];n&&O.each(t,function(e,t){delete n[t]})},O.extend=function(){var e,t,n,i,r,a=arguments[0]||{},o=1,s=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[o]||{},o++),"object"!=typeof a&&"function"!==O.type(a)&&(a={}),o===s&&(a=this,o--);o<s;o++)if(null!=(i=arguments[o]))for(n in i)r=a[n],t=i[n],a!==t&&(l&&t&&(O.isPlainObject(t)||(e=O.isArray(t)))?(r=e?(e=!1,r&&O.isArray(r)?r:[]):r&&O.isPlainObject(r)?r:{},a[n]=O.extend(l,r,t)):void 0!==t&&(a[n]=t));return a},O.queue=function(e,t,n){var i;if(e)return i=O.data(e,t=(t||"fx")+"queue"),n?(!i||O.isArray(n)?i=O.data(e,t,function(e,t){if(t=t||[],null!=e)if(ee(Object(e))){for(var n(e,r){O.each(e.nodeTypeshift()BoundingCrginTop)||0,n.left-=parseFloat(t.style.marginLeft)||0,e.style&&(i.top+=parseFloat(e.style.borderTopWidth)||0,i.left+=parseFloat(e.style.borderLeftWidth)||0),{top:n.top-i.top,left:n.left-i.left}}};var M={};O.expando="velocity"+(new Date).getTime(),O.uuid=0;for(var te={},ne=te.hasOwnProperty,ie=te.toString,re="Boolean Number String Function Array Date RegExp Object Error".split(" "),ae=0;ae<rjQuery||window.Zepocity");return null===e?V:e}function i(v,t,g,n){function i(e,t){return 1-3*t+3*e}function y(e,t,n){return((i(t,n)*e+(3*n-6*t))*e+3*t)*e}function b(e,t,n){return 3*i(t,n)*e*e+2*(3*n-6*t)*e+3*t}function r(e){for(var t=0,n=1,i=C-1;n!=i&&T[n]<=e;++n)t+=_;var r=t+(e-T[--n])/(T[n+1]-T[n])*_,a=b(r,v,g);if(E<=a){for(var o=e,s=r,l=0;l<w;++l){var c=b(s,v,g);if(0===c)return s;s-=(y(s,v,g)-o)/c}return s}if(0==a)return r;for(var d,u,p=e,h=t,f=t+_,m=0;0<(d=y(u=h+(f-h)/2,v,g)-p)?f=u:h=u,Math.abs(d)>k&&++m<x;);return u}function a(){if(l=!0,v!=t||g!=n)for(var e=0;e<C;++e)T[e]=y(e*_,v,g)}var w=4,E=.001,k=1e-7,x=10,C=11,_=1/(C-1),e="Float32Array"in N;if(4!==arg[o]||isNaN(arguments[o])||!isFinite(arguments[o]))return!1;v=(v,0),g=Math.max(g,0);function s(e){return l||a(),v:1und(e*t)*(1/t)}}.apply(null,e):U.isArray(e)&&2===e.length?o.apply(null,e.concat([t])):!(!U.ults.easing:a:n}function q(e){if(e){var t=(new Date).getTime(),n=B.State.calls.length;1e4<n&&(B.State.calls=function(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i}(B.State.calls));for(var i=0;i<n;i++)if(B.State.calls[i]){for(var r=B.State.calls[i],a=r[0],o=r[2],s=!!(c=r[3]),l=null,c=c||(B.State.calls[i][3]=t-16),d=Math.min((t-c)/o.duration,1),u=0,p=a.length;u<pfor(m in o.display!==V&&null!==o.display&&"none"!==o.display&&("flex"===o.display&&z.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],function(e,t){F.setPropertyValue(f,"display",t)}),F.setPropertyValue(f,"display",o.display)),o.visibility!==V&&"hidden"!==o.visibility&&F.setPropertyValue(f,"visibility",o.visibility),h)if("element"!==m){var g,y=h[m],b=U.isString(y.easing)?B.Easings[y.easing]:y.easing;if(1===d)E=y.endValue;else{var w=y.endValue-y.startValue,E=y.startValue+w*b(d,o,w);if(!s&&E===y.currentValue)continue}y.currentValue=E,"tween"===m?l=E:(F.Hooks.registered[m]&&(g=F.Hooks.getRoot(m),(b=j(f).rootPropertyValueCache[g])&&(y.rootPropertyValue=b)),w=F.setPropertyValue(f,m,y.currentValue+(0===parseFloat(E)?"":y.unitType),y.rootPropertyValue,y.scrollData),F.Hooks.registered[m]&&(j(f).rootPropertyValueCache[g]=F.Normalizations.registered[g]?F.Normalizations.registered[g]("extract",null,w[1]):w[1]),"transform"===w[0]&&(v=!0))}o.mobileHA&&j(f).transformCache.translate3d===V&&(j(f).transformCache.translate3d="(0px, 0px, 0px)",v=!0),v&&F.flushTransformCache(f)}}o.display!==V&&"none"!==o.display&&(B.State.calls[i][2].display=!1),o.visibility!==V&&"hidden"!==o.visibility&&(B.State.calls[i][2].visibility=!1),o.progress&&o.progress.call(r[1],r[1],d,Math.max(0,c+o.duration-t),c,l),1===d&&k(i)}}B.State.isTicking&&x(q)}function k(e,t){if(B.State.calls[e]){for(var n=B.State.calls[e][0],i=B.State.calls[e][1],r=B.State.calls[e][2],a=B.State.calls[e][4],o=!1,s=0,l=n.length;s<l;s++){var c,d=n[s].element;if(t||r.loop||("none"===r.display&&F.setPropertyValue(d,"display",r.display),"hidden"===r.visibility&&F.setPropertyValue(d,"visibeach(F.Lists.transforms3D,function(e,t){var n=/^scale/.test(t)?1:0,i=j(d).transformCache[t];j(d).transformCache[t]!==V&&new RegExp("^\\("+n+"[^.]").test(i)&&(c=!0,delete j(d).transformCache[t])}),r.mobileHA&&(c=formCache.translate3d),c&&F.flushTransformCache(d),F.Values.removeClass(d,"v){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),B(d,"reverse",{loop:!0,delay:r.delay})),!1!==r.queue&&z.dequeue(d,r.queu.documentMode;for(var e=7;4<e;e--){var t=R.createElement("div");if(t=null,e}returFrame||N.mozRequestAnimationFrame||function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-r));return r=g"==tyption(e){retnction(e){ect)\]===e.length||"object"==typeof e[0]&&0<e[0].nodeType)},isWrapped:function(e){return e&&(e.jquery||N.Zepto&&N.Zepto.zepto.isZ(e))},isSVG:function(e){return N.SVGElement&&e instanceof N.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},n=!1;if(e.fn&&e.fn.jquery?(z=e,n=!0):z=N.Velocity.Utilities,l<=8&&!n)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(l<=7))return a="swing",B={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:N.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:R.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utildelay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){z.data(e,"velocity",{isSVG:U.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1},N.pageYOffset!==V?(B.State.scrollAnchor=N,B.State.scrollPropertyLeft="pageXOffset",B.State.scrollPropertyTop="pageYOffset"):(B.State.scrollAnchor=R.documentElement||R.body.parentNode||R.body,B.State.scrollPropertyLeft="scrollLeft",B.State.scrollPropertyTop="scrollTop"),o=function e(t,n,i){var r,a,o,s,l,c,d,u,p,h,f={x:-1,v:0,tension:null,friction:null},m=[0],v=0;for(t=parseFloat(t)||500,n=parseFloat(n)||20,i=i||null,f.tension=t,f.friction=n,a=(r=null!==i)?(v=e(t,n))/i*.016:.016;l=a,c=h=p=u=d=c=void 0,c={dx:(s=o||f).v,dv:g(s)},d=y(s,c.dx+2*(d.dx+u.dx)+p.dx),c=1/6*(c.dv+2*(d.dv+u.dv)+p.dv),s.x=s.x+h*l,s.v=s.v+c*l,o=s,m.push(1+o.x),von(e){return m[e*(m.length-1)|0]}:v},B.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},z.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["ea,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){B.Easings[t[0]]=i.apply(null,t[1])}),(F=B.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0pxa.push(a}for(e in F.Hooks.templegistered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return F.RegEx.valueUnwrap.test(t)&&(t=t.match(F.RegEx.valueUnwrap)[1]),t=F.Values.isCSSNullValue(t)?F.Hooks.templates[e][1]:t},extractValue:function(e,t){var n,e=F.Hooks.registered[e];return e?(n=e[0],e=e[1],(t=F.Hooks.cleanRootPropertyValue(n,t)).toString().match(F.RegEx.valueSplit)[e]):t},injectValue:function(e,rn"clip";case"extract":var i=!F.RegEx.wrappedValueAlreadyExtracted.test(n)&&(i=n.toString().match(F.RegEx.valueUnwrap))?i[1].replace(/,(\s+)?/g," "):n;return i;case"inject":return"rect("+n+")"}},blur:function(e,t,n){switch(e){case"name":return B.State.isFirefox?"filter":1]/100:1;ceturn l<=8?4===n.sgth&&(n+=" 1"UpperCase()},n=0,i=t.length;n</^#?([a-f\d])([2})([a-f\d]{},getUnitType:fp|button|test(e)?"tabassName.length?" ":"")+t},removeClass:function(e,t){e.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,t,n,o){function s(e,t){function n(){a&&F.setPropertyValue(e,"display","none")}var i=0;if(l<=8)i=z.css(e,t);else{var r,a=!1;if(/^(width|height)$/.test(t)&&0===F.getPropertyValue(e,"display")&&(a=!0,F.setPropertyValue(e,"display",F.Values.getDisplayType(e))),!o){if("height"===t&&"border-box"!==F.getPropertyValue(e,"boxSizing").toString().toLowerCase())return r=e.offsetHeight-(parseFloat(F.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(F.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(F.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(F.getPropertyValue(e,"paddingBottom"))||0),n(),r;if("width"===t&&"border-box"!==F.getPropertyValue(e,"boxSizing").toString().toLowerCase())return r=e.offsetWidth-(parseFloat(F.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(F.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(F.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(F.getPropertyValue(e,"paddingRight"))||0),n(),r}r=j(e)===V?N.getComputedStyle(e,null):j(e).computedStyle?j(e).computedStyle:j(e).computedStyle=N.getComputedStyle(e,null),"borderColor"===t&&(t="borderTopColor"),""!==(i=9===l&&"filter"===t?r.getPropertyValue(t):r[t])&&null!==i||(i=e.style[t]),n()}return i="auto"===i&&/^(top|right|bottom|left)$/i.test(t)&&("fixed"===(r=s(e,"position"))||"absolute"===r&&/top|left/i.test(t))?z(e).position()[t]+"px":i}var i,r,a;if(F.Hooks.registered[t]?(i=F.Hooks.getRoot(a=t),n===V&&(n=F.getPropertyValue(e,F.Names.prefixCheck(i)[0])),F.Normalizations.registered[i]&&(n=F.Normalizations.registered[i]("extract",e,n)),i=F.Hooks.extractValue(a,n)):F.Normalizations.registered[t]&&("transform"!==(a=F.Normalizations.registered[t]("name",e))&&(r=s(e,F.Names.prefixCheck(a)[0]),F.Values.isCSSNullValue(r)&&F.Hooks.templates[t]&&(r=F.Hooks.templates[t][1])),i=F.Normalizations.registered[t]("extract",e,r)),!/^[\d-]/.test(i))if(j(e)&&j(e).isSVG&&F.Names.SVGAttribute(t))if(/^(height|width)$/i.test(t))try{.log("Browser does nion(e){return i=j(t).transformCache[e],"transformPerspn e=m(e),z.each(e,functio==V&&(a=B.CSS.getPropertyValue(t,i)):("transform"===(n=B.CSS.setPropertyValue(t,i,r))[0]&&B.CSS.flushTransformCache(t),a=n)}),a},(B=z.extend(v=function(){function e(){return t?D.promise||null:i}function n(){function n(e){function c(e,t){var n=V,i=V,r=V;return U.isArray(e)?(n=e[0],!U.isArray(e[1])&&/^[\d-]/.test(e[1])||U.isFunction(e[1])||F.RegEx.isHex.test(e[1])?r=e[1]:(U.isString(e[1])&&x,P,A):n)||0,i,r=U.isFunction(r)?r.call(x,P,A):r]}function t(e,t){var t=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return n=e,""}),n=n||F.Values.getUnitType(e);return[t,n]}if(C.begin&&0===P)try{C.begin.call(T,T)}catch(e){setTimeout(function(){throw e},1)}if("scroll"===L){var n,i,r,a=/^x$/i.test(C.axis)?"Left":"Top",o=parseFloat(C.offset)||0;C.container?U.isWrapped(C.container)||U.isNode(C.container)?(C.container=C.container[0]||C.container,r=(n=C.container["scroll"+a])+z(x).position()[a.toLowerCase()]+o):C.container=null:(n=B.State.scrollAnchor[B.State["scrollProperty"+a]],i=B.State.scrollAnchor[B.State["scrollProperty"+("Left"===a?"Top":"Left")]],r=z(x).offset()[a.toLowerCase()]+o),_={scroll:{rootPropertyValue:!1,startValue:n,currentValue:n,endValue:r,unitType:"",easing:C.easing,scrollData:{container:C.container,direction:a,alternateValue:i}},element:x},B.debug&&console.log("tweensContainer (scroll): ",_.scroll,x)}else if("reverse"===L){if(!j(x).tweensContainer)return void z.dequeue(x,C.queue);var s,l;for(s in"none"===j(x).opts.display&&(j(x).opts.display="auto"),"hidden"===j(x).opts.visibility&&(j(x).opts.visibility="visible"),j(x).opts.loop=!1,j(x).opts.begin=null,j(x).opts.complete=null,I.easing||delete C.easing,I.duration||delete C.duration,C=z.extend({},j(x).opts,C),d=z.extend(!0,{},j(x).tweensContainer))"element"!==s&&(l=d[s].startValue,d[s].startValue=d[s].currentValue=d[s].endValue,d[s].endValue=l,U.isEmptyObject(I)||(d[s].easing=C.easing),B.debugEx.isHex.test(n)){for(var r=["Red","Green","Blue"],a=F.Values.hexToRgb(n),o=t?F.Values.hexToRgb(t):V,s=0;s<r.length;s++){var l=[a[s]];i&&l.push(i),o!==V&&l.push(o[s]),S[e+r[s]]=l}delete S[e]}}}),S){var u=c(S[m]),p=u[0],h=u[1],f=u[2],m=F.Names.camelCase(m),u=F.Hooks.getRoot(m),v=!1;if(j(x).isSVG||"tween"===u||!1!==F.Names.prefixCheck(u)[1]||F.Normalizations.registered[u]!==V){(C.display!==V&&null!==C.display&&"none"!==C.display||C.visibility!==V&&"hidden"!==C.visibility)&&/opacity|filter/.test(m)&&!f&&0!==p&&(f=0),C._cacheValues&&d&&d[m]?(f===V&&(f=d[m].endValue+d[m].unitType),v=j(x).rootPropertyValueCache[u]):F.Hooks.registered[m(x,u),f=F.getPropertyValue(x,m,v)):v=F.Hooks.templates[u][1]:f===V&&(f=F.getPropertyValue(x,m));var g=!1,y=t(m,f),f=y[0],b=y[1],p=(y=t(m,p))[0].replace(/^([+-\/*])=/,function(e,t){return g=t,""}),w=y[1];if(f=parseFloat(f)||0,p=parseFloat(p)||0,"%"===w&&(/^(fontSize|lineHeight)$/.test(m)?(p/=100,w="em"):/^scale/.test(m)?(p/=100,w=""):/(Red|Green|Blue)$/i.test(m)&&(p=p/100*255,w="")),/[\/*]/.test(g))w=b;else if(b!==w&&0!==f)if(0===p)w=b;else{k=k||function(){var n,e={myParent:x.parentNode||R.body,position:F.getPropertyValue(x,"position"),fontSize:F.getPropertyValue(x,"fontSize")},t=e.position===O.lastPosition&&e.myParent===O.lastParent,i=e.fontSize===O.lastFontSize,r=(O.lastParent=e.myParent,O.lastPosition=e.position,O.lastFontSize=e.fontSize,{});return i&&t?(r.emToPx=O.lastEmToPx,r.percentToPxWidth=O.lastPercentToPxWidth,r.percentToPxHeight=O.lastPercentToPxHeight):(n=j(x).isSVG?R.createElementNS("http://www.w3.org/2000/svg","rect"):R.createElement("div"),B.init(n),e.myParent.appendChild(n),z.each(["overflow","overflowX","overflowY"],function(e,t){B.CSS.setPropertyValue(n,t,"hidden")}),B.CSS.setPropertyValue(n,ontSize",e.fontSize),B.CSS.setPropertyValue(n,"boxSizing","content-box"),z.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){B.CSS.setPropertyValue(n,t,"100%")}),B.CSS.setPropertyValue(n,"paddingLeft","100em"),r.percentToPxWidth=O.lastPercentToPxWidth=(parseFloat(F.getPropertyValue(n,"width",null,!0))||1)/100,r.percentToPxHeight=O.lastPercentToPxHeight=(parseFloat(F.getPropertyValue(n,"height",null,!0))||1)/100,r.emToPx=O.lastEmToPx=(parseFloat(F.getPropertyValue(n,"paddingLeft"))||1)/100,e.myParent.removeChild(n)),null===O.remToPx&&(O.remToPx=parseFloat(F.getPropertyValue(R.body,"fontSize"))||16),null===O.vwToPx&&(O.vwToPx=parseFloat(N.innerWidth)/100,O.vhToPx=parseFloat(N.innerHeight)/100),r.remToPx=O.remToPx,r.vwToPx=O.vwToPx,r.vhToPx=O.vhToPx,1<=B.debug&&console.log("Unit ratios: "+JSON.stringify(r),x),r}();var E=/margin|padding|left|right|width|text|word|letter/i.test(m)||/X$/.test(m)||"x"===m?"x":"y";switch(b){case"%":f*="x"==E?k.percentToPxWidth:k.percentToPxHeight;break;case"px":break;default:f*=k[b+"ToPx"]}switch(w){case"%":f*=1/("x"==E?k.percentToPxWidth:k.percentToPxHeight);break;case"px":break;default:f*=1/k[w+"ToPx"]}}switch(g){case"+":p=f+p;break;case"-":p=f-p;break;case"*":p*=f;break;case"/":p=f/p}_[m]={rootPropertyValue:v,startValue:f,currentValue:f,endValue:p,unitType:w,easing:h},B.debug&&console.log("tweensContainer ("+m+"): "+JSON.stringify(_[m]),x)}else B.debug&&console.log("Skipping ["+u+"] due to a lack of browser support.")}_.element=x}_.element&&(F.Values.addClass(x,"velocity-animating"),M.push(_),""===C.queue&&(j(x).tweensContainer=_,j(x).opts=C),j(x).isAnimating=!0,P===A-1?(B.State.calls.push([M,T,C,null,D={};switch(j(x)===V&&B.init(x),parseFloat(C.delay)&&!1!==C.queue&&z.queue(x,C.queue,function(e){B.velocityQueueEntryFlag=!0,j(x).delayTimer={setTimeout:setTimeout(e,parseFloat(C.delay)),next:e}}),C.duration.toString().toLowerCase()){case"fast":C.duration=200;break;case"normal":C.duration=400;break;case"slow":C.duration=600;break;default:C.duration=parseFloat(C.duration)||1}!1!==B.mock&&(!0===B.mock?C.duration=C.delay=1:(C.duration*=parseFloat(B.mock)||1,C.delay*=parseFloat(B.mock)||1)),C.easing=H(C.easing,C.duration),C.begin&&!U.isFunction(C.begin)&&(C.begin=null),C.progress&&!U.isFunction(C.progress)&&(C.progress=null),C.complete&&!U.isFunction(C.complete)&&(C.complete=null),C.display!==V&&null!==C.display&&(C.display=C.display.toString().toLowerCase(),"auto"===C.display&&(C.display=B.CSS.Values.getDisplayType(x))),C.visibility!==V&&null!==CsMobile&&!B.State.isGingerbread,!1===C.queue?C.delay?setTimeout(n,C.delay):n():z.queue(x,C.queue,function(e,t){return!0===t?(D.promise&&D.resolver(T),!0):(B.velocityQueueEntryFlag=!0,void n(e))}),""!==C.queue&&"fx"!==C.queue||"inprogress"===z.queue(x)[0]||z.dequeue(x)}var t,i,r,T,S,a=arguments[0]&&(arguments[0].p||z.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||U.isString(arguments[0].properties));if(U.isWrapped(this)?(t=!1,r=0,i=T=this):(t=!0,r=1,T=a?arguments[0].elements||arguments[0].e:arguments[0]),T=m(T)){I=a?(S=arguments[0].properties||arguments[0].p,arguments[0].options||arguments[0].o):(S=arguments[r],arguments[r+1]);var A=T.length,P=0;if(!/^(stop|finish)$/i.test(S)&&!z.isPlainObject(I))for(var I={},o=r+1;o<arguments.length;o++)U.isArray(arguments[o])||!/^(fast|normal|slow)$/i.test(arguments[o])&&!/^\d/.test(arguments[o])?U.isString(arguments[o])||U.isArray(arguments[o])?I.easing=arguments[o]:U.isFunction(arguments[o])&&(I.complete=arguments[o]):I.duration=arguments[o];var L,s,l,c,D={promise:null,resolver:null,rejecteverse";break;case"finish":case"stop":ze(t,U.isString(I)?I:"",j(t).tweensContainer&&!1!==i&&z.each(j(t).tweensContainer,function(e,t){t.endValue=t.currentValue}),d.push(r)):"finish"===S&&(a[2].duration=1))})})}),"stop"===S&&(z.each(d,function(e,t){k(t,!0)}),D.promise&&D.resolver(T)),ation=parseFloat(s)||(/^(callout|transition)/.test(S)?1e3:400),p.duration=Math.max(p.duration*(p.backwards?1-e/A:(e+1)/A),.75*p.duration,200)),B.Redirects[S].call(t,t,p||{},e,A,T,D.promise?D:V)})):(c="Velocity: First argument ("+S+") was not a property map, a known action, or a registered redirect. Aborting.",D.promise?D.rejecter(new Error(c)):console.log(c)),e();L=tPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},M=[];if(z.each(T,function(e,t){U.isNode(t)&&n.call(t)}),(p=z.extend({},B.defaults,I)).loop=parseInt(p.loop),u=2*p.loop-1,p.loop)for(var h=0;h<u;h++){var f={delay:p.delay,progress:p.progress};h===u-1&&(f.display=p.displationFrame||t,B.State.isMobile||R.hidden===V||R.addEventListener("visibilitychange",function()ertyValue(n,e);l[e]="t=z.extend({},t),o={opacity:"In"===l?1:0},s=t.complete;t.complete=n!==i-1?t.begin=null:function(){s&&s.call(r,r),a&&a.resolver(r)},t.display===V&&(t.display="In"===l?"auto":"none"),B(this,o,t)}}),B;function g(e){return-e.tension*e.x-e.friction*e.v}function y(e,t,n){n={x:e.x+n.dx*t,v:e.v+n.dv*t,tension:e.tension,friction:e.friction};return{dx:n.v,dv:g(n)}}c.fn.velocity=c.fn.animate},"object"==typeof module&&"object"==typeof module.exports?module.exports=T():"function"==typeof define&&define.amd?define("velocity",T):T()}function oe(e){++E;var o,s,l,c,d,t=w.scrollTop(),n=w.scrollLeft(),i=n+w.width(),r=t+w.height(),t=(o=t+k.top+e||200,s=i+k.)+t.width(llSpy:enter"),t.data("scrollSpy:ticks",E)}),v.each(B,function(e,t){var n=t.data("scrollSpy:ticks");"number"==typeof n&&n!==E&&(t.triggerHandler("scrollSpy:exit"),t.data("scrollSpy:ticks",null))}),B=t}function se(){w.trigger("scrollSpy:winSize")}function le(){var e=+I(this).attr("data-length"),t=+I(this).val().length,n=t<(this),n=e.hasClass("invalid"),t&&n?e.removeClass("invalid"):t||n||(e.removeClass("valid"),e.addClass("invalid"))}function ce(){I(this).parent().find('span[class="character-counter"]').html("")}Materialize.toast=function(e,t,a,o){a=a||"";var n=document.getElementById("toast-container"),i=(null===n&&((n=document.createElement("div")).id="toast-container",document.body.appendChild(n)),function(e){var n=document.createElement("div");if(n.classList.add("toast"),a)for(var t=a.split(" "),i=0,r=t.length;i<r;i++)n.classList.add(t[i]);return("object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)?n.appendChild(e):e instanceof c?n.appendChild(e[0]):n.innerHTML=e,(e=new Hammer(n,{prevent_default:!1})).on("pan",function(e){var e=e.deltaX,t=(n.classList.contains("panning")||n.classList.add("panning"),1-Math.abs(e/80));l(n,{left:e,e.on("panend",function(e){e=e.deltaX;80<Math.abs(e)?l(n,{marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof o&&o(),n.parentNode.removeChild(n)}}):(n.classList.remove("panning"),l(n,{left:0,opacity:1},{duration:300,e&(l(i,{opacity:0,marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof o&&o(),this[0].parentNode.removeChild(this[0])}}),window.clearInterval(r))},20))},define(.apply(z,arguments)})),(s=c).fn.tooltip=function(o){return"remove"===o?(this.each(function(){s("#"+s(this).attr("data-tooltip-id")).remove(),s(this).off("mouseenter.tooltip mouseleave.tooltip")}),!1):(o=s.extend({delay:350,tooltip:"",position:"bottom",html:!1},o),this.each(function(){var e=Materialize.guid(),u=s(this);u.attr("data-tooltip-id")&&s("#"+u.attr("data-tooltip-id")).remove(),u.attr("data-tooltip-id",e);function p(){t=u.attr("data-html")?"true"===u.attr("data-html"):o.html,n=(n=u.attr("data-delay"))===R||""===n?o.delay:n,h=(h=u.attr("data-position"))===R||""===h?o.position:h,i=(i=u.attr("data-tooltip"))===R||""===i?o.tooltip:i}var t,n,h,i,f,m,r;p();r=s('<div class="material-tooltip"></div>'),i=t?s("<span></span>").html(i):s("<span></span>").text(i),r.append(i).appendTo(s("body")).attr("id",e),(m=s('<div class="backdrop"></div>')).appendTo(r),f=r,u.off("mouseenter.tooltip mouseleave.tooltip");var a,v=!1;u.on({"mouseenter.tooltip":function(e){a=setTimeout(function(){p(),v=!0,f.velocity("stop"),m.velocity("stop"),f.css({visibility:"visible",left:"0px",top:"0px"});var e,t,n,i=u.outerWidth(),r=u.outerHeight(),a=f.outerHeight(),o=f.outerWidth(),s="0px",l="0px",c=m[0].offsetWidth,d=m[0].offsetHeight;"top"===h?(e=u.offset().top-a-5,n=u.offset().left+i/2-o/2,t=g(n,e,o,a),s="-10px",m.css({bottom:0,left:0,borderRadius:"14px 14px 0 0",transformOrigin:"50% 100%",marginTop:a,marginLeft:o/2-c/2})):"left"===h?(e=u.offset().top+r/2-a/2,n=u.offset().left-o-5,t=g(n,e,o,a),l="-10px",m.css({top:"-7px",right:0,width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:a/2,marginLeft:o})):"right"===h?(e=u.offset().top+r/2-a/2,n=u.offset().left+i+5,t=g(n,e,o,a),l="+10px",m.css({top:"-7px",left:0,width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:a/2,marginLeft:"0px"})):(e=u.offset().top+u.outerHeight()+5,n=u.offset().left+i/2-o/2,t=g(n,e,o,a),s="+10px",m.css({top:0,left:0,marginLeft:o/2-c/2})),f.css({top:t.y,left:t.x}),r=Math.SQRT2*o/parseInt(c),i=Math.SQRT2*a/parseInt(d),n=Math.max(r,i),f.velocity({translateY:s,translateX:l},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1})anslateX:0},{duration:225,queue:!1}),m.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:!1,complete:function(){m.css({visibility:"hidden"}),f.css({visibility:"hidden"}),v=!1}}))},225)}})}))},g=function(e,t,n,i){return e<0?e=4:e+n>window.innerWidth&&(e-=e+n-window.innerWidth),t<0?t=4:t+i>window.innerHeight+s(window).scrollTop&&(t-=t+i-window.innerHeight),{x:e,y:t}},s(document).ready(function(){s(".tooltipped").tooltip()}),define("tooltip",["jquery"],function(){}),o=c,Materialize.fadeInImage=function(e){var t;if("string"==typeof e)t=o(e);else{if("object"!=typeof e)return;t=e}t.css({opacity:0}),o(t).velocity({opacity:1},{duration:650,queue:!1,easing:"easeOutSine"}),o(t).velocity({opacity:1},{duration:1300,queue:!1,easing:"swing",step:function(e,t){var t=e/(t.sta;t=e}var n=0;t.find("li").velocity({translateX:"-100px"},{duration:0}),t.find("li").each(function(){o(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:n,easing:[60,10]}),n+=120})},o(document).ready(function(){var r=!1,a=!1;o(".dismissable").each(function(){o(this).hammer({prevent_default:!1}).bind("pan",function(e){var t,n,i;"touch"===e.gesture.pointerType&&(t=o(this),n=e.gesture.direction,i=e.gesture.deltaX,e=e.gesture.velocityX,t.velocity({translateX:i},{duration:50,queue:!1,easing:"easeOutQuad"}),4===n&&(i>t.innerWidth()/2||e<-.75)&&(r=!0),2===n&&(i<-1*t.innerWidth()/2||.75<e)&&(a=!0))}).bind("panend",function(e){var t;Math.abs(e.gesture.deltaX)<o(thration:100,queue:!1,easing:"easeOutQuad",complete:function(){t.css("border","none"),t.velocity({height:0,padding:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){t.remove()}})}})):t.velocity({translateX:0},{duration:100,queue:!1,easing:"easeOutQuad"}),a=r=!1)})})}),define("transitions",["jquery","scrollFire"],function(){}),a={init:function(N){return N=V.extend({duration:200,dist:-100,shift:0,padding:0,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},N),this.each(function(){function i(e){return(e.targetTouches&&1<=e.targetTouches.length?e.targetTouches[0]:e).clientX}function r(e){return(e.targetTouches&&1<=e.targetTouches.length?e.targetTouches[0]:e).clientY}function d(e){return b<=e?e%b:e<0?d(b+e%b):e}function a(e){var t,n,i,r,a,o,s,l,c=m;for(f="number"==typeof e?e:f,m=Math.floor((f+g/2)/g),a=-(r=(i=f-m*g)<0?1:-1)*i*2/g,n=b>>1,N.fullWidth?s="translateX(0)":(s="translateX("+(O[0].clientWidth-p)/2+"px) ",s+="translateY("+(O[0].clientHeight-h)/2+"px)"),M&&(e=m%b,(l=D.find(".indicator-item.active")).index()!==e&&(l.removeClass("active"),D.find(".indicator-item").eq(e).addClass("active"))),(!N.noWrap||0<=m&&m<b)&&(o=u[d(m)],V(o).hasClass("active")||(O.find(".carousel-item").removeClass("active"),V(o).addClass("active")),o.style[_]=s+" translateX("+-i/2+"px) translateX("+r*N.shift*a*t+"px) translateZ("+N.dist*a+"px)",o.style.zIndex=0,tweenedOpacity=N.fullWidth?1:1-.2*a,o.style.opacity=tweenedOpacity,o.style.display="block"),t=1;t<=n;++t)tweenedOpacity=N.fullWidth?(zTranslation=N.dist,t===n&&i<0?1-a:1):(zTranslation=N.dist*(2*t+a*r),1-.2*(2*t+a*r)),(!N.noWrap||m+t<b)&&((o=u[d(m+t)]).style[_]=s+" translateX("+(N.shift+(g*t-i)/2)+"px) translateZ("+zTranslation+"px)",o.style.zIndex=-t,o.style.opacity=tweenedOpacity,o.style.display="block"),tweenedOpacity=N.fullWidth?(zTranslation=N.dist,t===n&&0<i?1-a:1):(zTranslation=N.dist*(2*t-a*r),1-.2*(2*t-a*r)),(!N.noWrap||0<=m-t)&&((o=u[d(m-t)]).style[_]=s+" translateX("+(-N.shift+(-g*t-i)/2)+"px) translateZ("+zTranslation+"px)",o.style.zIndex=-t,o.style.opacity=tweenedOpacity,o.style.display="block");(!N.noWrap||0<=m&&m<b)&&((o=u[d(m)]).style[_]=s+" translateX("+-i/2+"px) translateX("+r*N.shift*a+"px) translateZ("+N.dist*a+"px)",o.style.zIndex=0,tweenedOpacity=N.fullWidth?1:1-.2*a,o.style.opacity=tweenedOpacity,o.style.display="block"),c!==m&&"function"==typeof N.onCycleTo&&(l=O.find(".carousel-item").eq(d(m)),N.onCycleTo.call(this,l,P))}function t(){var e=Date.now(),t=e-S;S=e,e=f-T,T=f,C=.8*(1e3*e/(1+t))+.2*C}function n(){var e;k&&(e=Date.now()-S,2<(e=k*Math.exp(-e/N.duration))||e<-2?(a(x-e),requestAnimationFrame(n)):a(x))}function e(e){if(P)return e.preventDefault(),e.stopPropagation(),!1;var t;N.fullWidth||(t=V(e.target).closest(".carousel-item").index(),0!=m%b-t&&(e.preventDefault(),e.stopPropagation()),o(t))}function o(e){e=m%b-e;N.noWrap||(e<0?Math.abs(e+b)<Math.abs(e)&&(e+=b):0<e&&Math.abs(e-b)<e&&(e-=b)),e<0?O.trigger("carouselNext",[Math.abs(e)]):0<e&&O.trigger("carouselPrev",[e])}function s(e){I=P=!(v=!0),w=i(e),E=r(e),C=k=0,T=f,S=Date.now(),clearInterval(A),A=setInterval(t,100)}function l(e){var t,n;if(v)if(t=i(e),y=r(e),n=w-t,Math.abs(E-y)<30&&!I)(2<n||n<-2)&&(P=!0,w=t,a(f+n));else{if(P)return e.preventDefault(),e.stopPropagation(),!1;I=!0}if(P)return e.preventDefault(),e.stopPropagation(),!1}function c(e){if(v)return v=!1,clearInterval(A),x=f,(10<C||C<-10)&&(x=f+(k=.9*C)),x=Math.round(x/g)*g,N.noWrap&&(g*(b-1)<=x?x=g*(b-1):x<0&&(x=0)),k=x-f,S=Date.now(),requestAnimationFrame(n),P&&(e.preventDefault(),e.stopPropagation()),!1}var u,p,h,f,m,v,g,b,w,E,k,x,C,_,T,S,A,P,I,L,D=V('<ul class="indicators"></ul>'),O=V(this),M=O.attr("data-indiczed"))return V(this).trigger("carouselNext",[1e-6]),!0;N.fullWidth&&(N.dist=0,(L=O.find(".carousel-item img").first()).length?imageHeight=L.on("load",function(){O.css("height",V(this).height())}):(imageHeight=O.find(".carousel-item").first().height(),O.css("height",imageHeight)),M&&O.find(".carousel-fixed-item").addClass("with-indicators")),O.addClass("initialized"),v=!1,f=x=0,u=[],p=O.find(".carousel-item").first().innerWidth(),h=O.find(".carousnd(".carousel-item").each(function(e){var t;u.push(V(this)[0]),M&&(t=V('<li class="indicator-item"></li>'),0===e&&t.addClass("active"),t.click(function(e){e.stopPropagation(),o(V(this).index())}),D.append(t))}),M&&O.append(D),b=u.length,_="transform",["webkit","Moz","O","ms"].every(function(e){e+="Transform";return void 0===document.body.style[e]||(_=e,!1)}),V(window).on("resize.carousel",function(){N.fullWidth?(p=O.find(".carousel-item").first().innerWidth(),h=O.find(".carousel-item").first().innerHeight(),g=2*p+N.padding,x=f=2*m*p):a()}),void 0!==window.ontouchstart&&(O[0].addEventListener("touchstart",s),O[0].addEventListener("touchmove",l),O[0].addEventListener("touchend",c)),O[0].addEventListener("mousedown",s),O[0].addEventListener("mousemove",l),O[0].addEventListener("mouseup",c),O[0].addEventListener("mouseleave",c),O[0].addEventListener("click",e),a(f),V(this).on("carouselNext",function(e,t){t===R&&(t=1),x=g*Math.round(f/g)+g*t,f!==x&&(k=x-f,S=Date.now(),requestAnimationFrame(n))}),V(this).on("carouselPrev",function(e,t){t===R&&(t=1),x=g*Math.round(f/g)-g*t,f!==x&&(k=x-f,S=Date.now(),requ,function(e,t){o(t=t===R?0:t)})})},next:function(e){V(this).trigger("carouselNext",[e])},prev:function(e){V(this).trigger("carouselPrev",[e])},set:function(e){V(this).trigger("carouselSet",[e])}},(V=c).fn.carousel=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void V.error("Method "+e+" does not exist on jQuery.caroautocompleteLimit:1/0},(d=c)(document).ready(function(){d(document).on("click",".chip .close",function(e){d(this).closest(".chips").attr("data-initialized")||d(this).closest(".chip").remove()})}),d.fn.material_chip=function(e){var s=this;if(this.$el=d(this),this.$document=d(document),this.SELS={CHIPS:".chips",CHIP:".chip",hipId=t,a.data&&a.data instanceof Array||(a.data=[]),e.data("chips",a.data),e.attr("data-index",n),e.attr("data-initia("chips"),s.chips(e,t),n++})},this.handleEvents=function(){var o=s.SELS;s.$document.off("click.chips-focus",o.CHIPS).on("click.chips-focus",o.CHIPS,function(e){d(e.target).find(o.INPUT).focus()}),s.$document.off("click.chips-select",o.CHIP).on("click.chips-select",o.CHIP,function(e){var t,n,e=d(e.target);e.length&&(t=e.hasClass("selected"),n=e.closest(o.CHIPS),d(o.CHIP).removeClass("selected"),t||s.selectChip(e.index(),n))}),s.$document.off("keydown.chips").on("keydown.chips",function(e){var t,n,i,r,a;d(e.target).is("input, textarea")||(i=(n=s.$document.find(o.CHIP+o.SELECTED_CHIP)).closest(o.CHIPS),r=n.siblings(o.CHIP).length,n.length&&(8===e.which||46===e.which?(e.preventDefault(),t=n.index(),s.deleteChip(t,i),a=null,t+1<r?a=t:t!==r&&t+1!==r||(a=r-1),null!==(a=a<0?null:a)&&s.selectChip(a,i),r||i.find("input").focus()):37===e.which?(t=n.index()-1)<0||(d(o.CHIP).removeClass("selected"),s.selectChip(t,i)):39===e.which&&(t=n.index()+1,d(o.CHIP).removeClass("selected"),r<t?i.find("input").focus():s.selectChip(t,i))))}),s.$document.off("focusin.chips",o.CHIPS+" "+o.INPUT).on("focusin.chips",o.CHIPS+" "+o.INPUT,function(e){e=d(e.target).closest(o.CHIPS);e.addClass("focus"),e.siblings("label, .prefix").addClass("active"),d(o.CHIP).removeClass("selected")}),s.$document.off("focusout.chips",o.CHIPS+" "+o.INPUT).on("focusout.chips",o.CHIPS+" "+o.INPUT,function(e){e=d(e.target).closest(o.CHIPS);e.removeClass("focus"),e.data("chips").length||e.siblings("label").removeClass("active"),e.siblings(".prefix").removeClass("active")}),s.$document.off("keydown.chips-add",o.CHIPS+" "+o.INPUT).on("keydown.chips-add",o.CHIPS+" "+o.INPUT,function(e){var t=d(e.target),n=t.closest(o.CHIPS),i=n.children(o.CHIP).length;if(13===e.which)return s.hasAutocomplete&&n.find(".autocomplete-content.dropdown-content").length&&n.find(".autocomplete-content.dropdown-content").children().length?void 0:(e.preventDefault(),s.addChip({tag:t.val()},n),void t.val(""));8!==e.keyCDELETE).on("click.chips-delete",o.CHIPS+" "+o.DELETE,function(eo.CHIPS),t=t.closest(o.CHIP);e.stopPropagation(),s.deleteChip(t.index(),n),n.find("input").focus()})},this.chips=function(t,e){var n="",i=(t.data("chips").forEach(function(e){n+=s.renderChip(e)}),n+='<input id="'+e+'" class="input" placeholder="">',t.html(n),s.setPlaceholder(t),t.next(".length&&i.addClass("active")),d("#"+e));s.hasAutocomplete&&r.autocomplete({data:a.autocompleteData,limit:a.autocompleteLimit,onAutocomplete:function(e){s.addChip({tag:e},t),r.val(""),r.focus()}})},this.data("chips").length&&a.placeholder?e.find("input").prop("placeholder",a.placeholder):!e.data("chips").length&&a.secondaryPlaceholder&&e.find("input").prop("placeholder",a.secondaryPlaceholder)},this.isValid=function(e,t){for(var n=e.data("chips"),e=!1,i=0;i<n.length;i++)if(n[i].tag===t.tag)return;return""!==t.tag&&!e},this.addChip=function(e,t){if(s.isValid(t,e)){for(var n=st){var n=t.data(ip.delete",n),s.setPlfunction(e,t){var n=t.find(".chip").eq(e);n&&!1===n.hasClass("selected")&&(n.addClass("selected"),t.trigger("chip.select",t.data("chips")[e]))},this.getChipsElement=function(e,t){return t.eq(e)},this.init(),this.handleEvents()},define("chips",["jquery"],function(){}),define("materialize",["global","waves","animation","buttons","cards","character_counter","collapsible","dropdown","forms","hammerjs","jquery.easing","jquery.hammer","jquery.timeago","materialbox","parallax","picker","picker.date","pushpin","scrollFire","scrollspy","sideNav","slider","tabs","toasts","tooltip","transitions","velocity","autocomplete","hammer","scrollTo","dropdown","carousel","carousel","chips"],function(e,t){return e.Waves=t,e.Waves.displayEffect(),e})}),define("portal/components/grading-addon",["ember.hapyak","utils.embed","vendor/i18n!nls/ui","gradingAlgorithms/percentWatched","gradingAlgorithms/gateUntilWatched","gradingAlgorithms/quizResults","eLearningStandards.ltiCommunication","eLearningStandards.scormCommunication","listener","model","dao","logging","materialize"],function(e,t,n,i,r,a,o,s,l,c,d,u,p,h){"use strict";var f,m,v=t.dotget(n,"experience.lesson",{}),g="You have already submitted this assignment. You cannot submit it again.";function y(i,r){u.dev("[Addon=grading] - Finding addon layout="+i),c.Addon.find({layout:i,name:"grading"}).onLoad(function(e){var t,n,e=e.get("content");u.dev("[Addon=grading] - Found addon layout="+i),e.length||f?r&&"function"==typeof r&&r(e[0]):(t=i,n=function(e){r&&"function"==typeof r&&r(e)},c.AddonType.find({name:"grading"}).onLoad(function(e){e=e.get("content");e.length?(u.dev("[Addon=grading] - Creating addon addon_type="+e[0].get("id")+" layout="+t),c.Addon.createRecord({addon_type:e[0].get("id"),layout:t,name:"grading",configuration:{}}).onSave(function(e){e&&n&&"function"==typeof n&&y(t,n)})):u.warn("[AddonType=grading] - does not exist!")}))})}function b(e,t,i){this.instance=hapyak.addon("grading",{init:function(e){e.algorithm=t}}),this.getGrade=function(t){f&&i.getGrade(function(e){"function"==typeof t&&t(e)},function(){m.sendAction("openModal","viewerModal","experience",null,{title:"Error Checking Grade",message:"There was an error checking your grade. Please return to your LMS and relaunch this Lesson. If the issue persists, your LMS may not be configured to accept grades for this Lesson."})})},this.sendGrade=function(e,t,n){f&&"number"==typeof e&&i.setGrade(e,t,function(e){var t={title:"Success!",message:v.success_modal_content||"Grade successfully recorded"};null!==e&&e!==h||(t.title="Error Grading",t.message="There was an error grading. Your grade may not have been recorded."),m.sendAction("openModal","viewerModal","experience",functlassNames:"hapyak-grading-addon-container",submitGradeButtonText:v.submit_grade_button_text||"Submit Grade",isReady:e.computed(function(){return this.get("editorReady")||this.get("playerReady")}).property("editorReady","playerReady"),algorithms:{percentWatched:i,gateUntilWatched:r,quizResults:a},getStandard:function(){return this.get("controller.scormVersion")?s.setup(this.get("controller.scormVersion")):this.get("controller.lti_context")?o.setup():void 0},showSubmitGradeButton:!1,enableGrading:!1,addonReady:!1,tooltip:v.submit_grade_button_hint_already_graded||g,selectedAlgorithm:"percentWatched",init:function(){(m=this).get("isReady")&&this.get("onEditorReady").call(this)},onEditorReady:e.observer(function(){var a=this,o=this.get("editorIframe");o&&(f=this.get("viewerMode"),this.get("previewMode")?(this.set("enableGrading",!1),this.set("tooltip",v.submit_grade_button_hint_preview||"You cannot submit a grade from assignment preview.")):y(this.get("layoutId"),function(e){var t=a.get("algorithms"),n={addon:e,getSelectedAlgorithm:a.getSelectedAlgorithm,getCompletionPercent:a.getCompletionPercent,getPassFail:a.getPassFail},i=n.getSelectedAlgorithm(e),r=a.getStandard();f&&!r||(t[i].editor=o,f&&t[i].editor&&t[i].setup&&t[i].setup(n,a),a.set("gradingViewer",new b(0,t[i],r)Object({name:"grading",addon:e,addonOptions:n,algorithmsList:t}),a.set("gradingAddonReady",!0),f&&a.get("gradingViewer").getGrade(function(e){a.set("showSubmitGradeButton",!0),a.checkedGrade(e)}))}))},"isReady"),getCompletionPercent:function(e){return e&&(e.get("configuration.completionPercent")||e.get("addon_type.default_configuration.completionPercent"))||70},getSelectedAlgorithm:function(e){return e&&(e.get("configuration.algorithm")||e.get("addon_type.default_configuration.algorithm"))||"percentWatched"},getPassFail:function(e){var t=e.get("configuration.passFail"),e=e.get("addon_type.default_configuration.passFail");return!1!==t&&(t||!1!==e&&(e||!0))},checkedGrade:function(e){var t=this.get("algorithms")[this.get("selectedAlgorithm")];this.set("showSubmitGradeButton",!0),"number"==typeof e?this.sendAction("openModal","viewerModal","experience",null,{title:v.already_graded_modal_title||"Already Graded",message:v.already_graded_modal_content||"This assignment has already been graded. You cannot resubmit another grade but you can still view the material."}):(window.addEventListener("message",function(e){t.listen(e)}),this.set("enableGrading",!0),this.set("tooltip",""),"function"==typeof t.afterCheckedGrade&&t.afterCheckedGrade())},setProjectScore:function(e,t,n){var i=m.get("controller.projectScores"),r=m.get("controller.currentProjectId"),a=m.get("controller.currentProjectTitle"),o=i[r]||{},s=o.questions||{};o.id="id_"+r,o.name=a,o.description=a+" ("+r+")",o.score=e,o.grade=t,n&&n.quizSummary&&(n.quizSummary.forEach(function(e){s[e.identifier]=e}),o.questions=s),i[r]=o,m.set("controller.projectScores",i)},willDestroyElement:function(){var e=this.get("algorithms")[this.get("selectedAlgorithm")];e&&e.listen&&window.removeEventListener("message",e.listen)},calculateFinalGrade:function(e){var t,n=this.get("controller.projectScores"),i=0;for(t in n)i+=n[t].score||0;return i/e.getDivisor()},actions:{submitGrade:function(){var e,t,n,i;this.get("enableGrading")&&(e=this.get("algorithms")[this.get("selectedAlgorithm")],t=this.calculateFinalGrade(e),n=this,i=v.submit_grade_modal_content||"Are you sure you want to submit this assignment? You cannot resubmit your grade once submitted.",e&&this.sendAction("openModal","viewerModal","experience",function(){var e=n.get("editorIframe");e&&e.pause()},{title:v.submit_grade_modal_title||"Submit Grade",message:i,confirm:"Submit",confirmCallback:function(){n.get("gradingViewer").sendGrade(t||0,n.get("controller.projectScores"),function(){n.set("enableGrading",!1),n.set("tooltip",v.submit_grade_button_hint_already_graded||g)})}}))}}})}),define("portal/components/preloader-component",["ember.hapyak"],function(e){"use strict";return e.Component.extend({classNames:["hapyak-component-preloader-component"]})}),define("portal/components/viewer-playlist-item",["ember.hapyak","utils.hms","model","utils.hapyakEnv"],function(e,t,i,n,r){"use strict";return e.Component.extend({classNames:["play,attributeBindings:["style"],style:null,playButton:n.cdnUrl("/img/thumbnail-play-button.svg"),currentlyPlaying:e.computed(function(){return this.get("currentProjectId")===this.get("project.id")}).property("currentProjectId"),indexPlusOne:e.computed(function(){return+this.get("index")+1}).property("index"),duration:e.computed(function(){var e=t.fromSeconds(this.get("project.video.duration"));return(0<e.hours?e.hours+":"+(e.minutes<10?"0":""):"")+e.minutes+":"+(e.seconds<10?"0":"")+e.seconds}).property("index"),init:function(){function e(e){t.set("style","background-image: url("+(e.get("image")||"/img/thumbnail-placeholder.png")+")")}this._super();var t=this,n=this.get("project.video");if(!n)return!1;n instanceof i.Video?e(n):i.Video.find(n).onLoad(e)},actions:{goTo:function(){this.get("parentView").send("goTo",this.get("index"))}}})}),define("portal/componentsExperience",["lodash.extended.noconflict","portal/components/external-content","portal/components/off-video-external-chapters","portal/components/grading-addon","portal/components/preloader-component","portal/components/viewer-playlist-item"],function(t,e,n,i,r,a){"use strict";var o={ExternalContentComponent:e,OffVideoExternalChaptersComponent:n,GradingAddonComponent:i,PreloaderComponentComponent:r,ViewerPlaylistItemComponent:a};return{attachTo:function(e){t.extend(e,o)}}}),define("portal/views/modal",["ember.hapyak","bootstrap.modal","materialize"],function(n,e,t,i){"use strict";return n.View.extend({classNameBindings:["activeClassNames"],activeClassNames:n.computed(function(){return this.get("isLtiRoute")?[""]:["modal fade"]}).property("isLtiRoute"),init:function(){this._super(),this.set("isLtiRoute",-1<window.location.pathname.indexOf("/lti/new"))},layoutName:"modal",title:"Modal",button:{dismiss:"Cancel",confirm:"Submit"},allRequired:!1,showBackdrop:"static",showButtons:!0,dismissed:!0,isLtiRoute:null,afterRenderet("isLtiRoute")&&e.on("shown.bs.modal",function(){n.$(".modal-backdrop").remove(),n.$(this).find(".modal-header .fa").hide()}),e.on("shown.bs.modal",function(){var e=n.$("ul.tabs");e&&e.tabs()}),e.on("hidden.bs.modal",function(){n.run(function(){try{t.set("controller.controllers.application.modalCallbacks",null)}catch(e){t.set("controller.modalCallbacks",null)}t.isDestroyed||t.isDestroying||(n.$(".modal-backdrop").remove(),t.destroy(),t.get("dismissed")&&t.didDismiss())})}),e.modal({backdrop:this.get("showBackdrop"),show:!0}),this.focusFirstInput()},focusFirstInput:function(){var t=this;requestAnimationFrame(function(){var e=n.$(".modal:not(.hapyak-modal-link-generator) input"),e=e?e[0]:null;e&&(e.focus(),e!==document.activeElement&&t.focusFirstInput())})},didDismiss:n.K,actions:{close:function(){var t;try{t=this.get("controller.controllers.application.modalCallbacks.close")}catch(e){t=this.get("controller.modalCallbacks.close")}"function"==typeof t&&t(),this.$().modal("hide")},confirm:function(){var t;try{t=this.get("controller.controllers.application.modalCallbacks.confirm")}catch(e){t=this.get("controller.modalCallbacks.confirm")}this.set("dismissed",!1),"function"==typeof t&&t(),this.$().modal("hide")}},isDisabled:n.computed(function(){return!1})})}),define("portal/views/userlink",["ember.hapyak","jquery.noconflict"],function(t,n,e){"use strict";return t.View.extend(t.Hapyak.Mixin.TogglePropertyAction,{classNames:["hapyak-userlink"],templateName:"userlink",isExpanded:!1,handleOutsideClick:function(e){var t=this.$();n(e.target).closest(t).length?this.toggleProperty("isExpanded"):this.set("isExpanded",!1)},didInsertElement:function(){var e=this.get("handleOutsideClick").bind(this);return t.$(document).on("click",e)},willDestroyElement:function(){var e=this.get("handleOutsideClick").bind(this);return t.$(document).off("click",e)}})}),define("portal/views/grouplink",["ember.hapyak","jquery.noconflict"],function(t,n,e){"use strict";return t.View.extend(t.Hapyak.Mixin.TogglePropertyAction,{classNames:["hapyak-grouplink"],templateName:"grouplink",isExpanded:!1,handleOutsideClick:function(e){var t=this.$();n(e.target).closest(t).length?this.toggleProperty("isExpanded"):this.set("isExpanded",!1)},didInsertElement:function(){var e=this.get("handleOutsideClick").bind(this);return t.$(document).on("click",e)},willDestroyElement:function(){var e=this.get("handleOutsideClick").bind(this);return t.$(document).off("click",e)}})}),define("portal/views/application_experience",["ember.hapyak","portal/views/modal","portal/views/userlink","portal/views/grouplink","module"],function(e,t,n,i,r,a){"use strict";return e.View.extend({ModalView:t,UserlinkView:n,GrouplinkView:i,assetUrl:e.computed(function(){var e=r.config().frepParams;return e?e.hapyak_asset_url:this.get("controller.hapyak_asset_url")}),modalTitle:e.computed(function(){var e=r.config().frepParams;return e?e.modal_title:this.get("controller.modal_title")}),modalText:e.computed(function(){var e=r.config().frepParams;return e?e.modal_text:this.get("controller.modal_text")}),downloadText:e.computed(function(){var e=r.config().frepParams;return e?e.hapyak_download_text:this.get("controller.download_text")}),modalConfirm:e.computed(function(){var e=r.config().frepParams;return e?e.modal_confirm:this.get("controller.modal_confirm")||"VIEW"}),didInsertElement:function(){(this.get("assetUrl")||this.get("modalText"))&&this.get("controller").send("open","remoteAssetModal","experience")}})}),define("portal/views/viewer_playlist",["lodash.noconflict","logging","dao","configAPI","module","ember.hapyak"],function(e,l,t,n,i,c){"use strict";var d=c.$;return c.View.extend({viewName:"viewerPlaylist",classNames:["hapyak-editor-iframe"],firstLoad:!0,hapyak_project:c.computed.alias("parentView.hapyak_project"),hapyak_start_time:c.computed.alias("parentView.hapyak_start_time"),hapyak_asset_url:c.computed.alias("parentView.hapyak_asset_url"),currentlyTransitioning:!1,useNativeControls:c.computed.alias("controller.useNativeControls"),willInsertElement:function(){var e=this;this.onWindowResizeHandler=function(){e.updateHeight()},d(window).bind("resize",this.onWindowResizeHandler)},didInsertElement:function(){this.get("controller.needsRender")&&this.onNeedsRender()},willDestroyElement:function(){d(window).unbind("resize",this.onWindowResizeHandler)},onNeedsRender:c.observer(function(){var e,t=this.get("controller"),n=this.get("editorIframe"),i=this.get("controller.data.configuration.autoplay"),r=t&&t.get("embeddedExperienceQueryParams"),a=this,o={};function s(){var e;a.isDestroyed||(e={apiHost:hapyak.viewerApiHost,playerUrl:hapyak.playerUrl,accountId:t.get("group"),listId:t.get("playlist.id")||t.get("playlist"),elementId:a.get("element.id"),autoProgress:!0,autoplay:i,nativeControls:!0,edit:!1,onLoad:function(e){a.set("controller.projectsInPlaylist",e.all()),a.set("playlist",e),a.set("parentView.playlist",e)},hyExperienceParams:o,onLoadTrack:function(e){c.beginPropertyChanges(),t.set("needsRender",!1),c.endPropertyChanges(),a.set("parentView.editorIframe",null),a.set("parentView.playerReady",!1),a.get("controller.isOffVideoChapters")||c.$("#experience-video-sizing-container").height(a.$().width()/1.77777+"px"),d(".hapyak-embed").height(a.$().width()/1.77777+"px"),t.send("updateCurrentProject",e.projectTitle,e.projectId,a.playlist.currentIndex())},onCanPlay:function(){var e,t=a.get("playlist").currentPlayer();t&&(e=a.getPlayerSize(t).aspectRatio,a.get("controller.isOffVideoChapters")?(a.set("parentView.playerReady",!0),a.updateHeight(),a.showViewer()):(parent.postMessage(JSON.stringify({name:"interactivity_embedded_experience_aspect_ratio_available",id:a.get("controller.embeddedExperienceId"),aspectRatio:+e,nativeControls:a.get("useNativeControls")}),"*"),a.changeSizingContainerHeight(e,function(){a.set("parentView.playerReady",!0),a.updateHeight(),a.get("playlist").element().width="100%",a.showViewer()})),t.addEventListener("resized",function e(){t.removeEventListener("resized",e),a.updateHeight(),a.get("playlist").element().width="100%",a.showViewer()}),t.aspectRatio=e,a.updateHeight(),a.get("playlist").element().width="100%",a.showViewer())},onLoadAnnotations:function(e){var t=a.get("playlist").currentPlayer(),n=a.get("playlist");a.set("editor",t),a.get("parentView.editorIframe")||a.set("parentView.editorIframe",t),t.resize("100%"),a.set("parentView.annotationsReady",!0),n.currentPlayer().addEventListener("ended",function e(){var t=a.get("controller.data.configuration.autoProgress")||!1;(n=a.get("playlist")).currentPlayer().removeEventListener("ended",e),!1===t?n.pause():(a.set("parentView.playerReady",!1),n.next()||n.goTo(0))}),n.currentPlayer().addEventListener("play",function e(){var t=n&&n.currentPlayer();a.get("parentView.parentView.controller.modalOpen")&&(a.set("parentView.parentView.controller.play",n.play),n.pause()),t&&"function"==typeof t.removeEventListener&&t.removeEventListener("play",e)}),i&&n.play()}},l.dev("Render portal viewer",e),a.get("firstLoad")&&(e.firstProject=a.get("hapyak_project"),e.startTime=a.get("hapyak_start_time"),a.set("firstLoad",!1)),hapyak.list(e))}if(r&&Object.keys(r).length)for(e in r)r.hasOwnProperty(e)&&-1<e.indexOf("hapyak_")&&(o[e.replace("hapyak_","")]=r[e]);this.$()&&t.get("needsRender")&&(n&&(n.destroy(),this.$().empty()),s())},"controller.needsRender"),onEverythingReady:c.observer(function(){var e=this.get("playlist"),t=document.getElementById("hapyak-editois.get("playlist").element().width="100%",this.showViewer())},"parentView.everythingReady"),showViewer:function(){var e=document.getElementById("hapyak-editor-iframe");e&&(e.className="active")},getPlayerSize:function(e){var t=e&&e.videoWidth,n=e&&e.videoHeight,i=t/n;return!e||t&&n||(t=e.width,n=e.height),{width:t,height:n,aspectRatio:i}},updateHeight:function(){var e,t,n,i,r,a,o;this.isDestroyed||this.isDestroying||(e=this.get("editor"),t=this.get("playlist"),a=this.getPlayerSize(e),n=document.getElementById("external-content"),i=document.getElementById("sizing-container"),r=document.getElementById("experience-video-sizing-container"),t&&e&&r&&(o=(this.get("useNativeControls")?0:36)+(a=r.offsetWidth/a.aspectRatio),this.get("currentlyTransitioning")||this.get("controller.isOffVideoChapters")||(r.style.height=o+"px"),n&&i&&(i.style.height=window.innerHeight-i.getBoundingClientRect().top+"px",n.style.height=window.innerHeight-n.getBoundingClientRect().top+"px"),this.$().height(""+o),this.$().width(""+r.offsetWidth),t.element()&&(t.element().height=a),a&&d(".hapyak-embed").height(o),e.resize(r.offsetWidth,a)))},changeSizingContainerHeight:function(e,r){var a,t,o=document.getElementById("experience-video-sizing-container"),s=this,l=Date.now(),c=600;o&&e?(t=this.get("useNativeControls")?0:36,a=o.offsetWidth/e+t,this.set("currentlyTransitioning",!0),function e(){var t=Date.now()-l,n=+o.style.height.split("px")[0],i=a-n;if(1<Math.abs(i))return n+=i*t/c,o.style.height=n+"px",void requestAnimationFrame(e);s.set("currentlyTransitioning",!1);s.get("controller").send("endVideoChange");"function"==typeof r&&r()}()):"function"==typeof r&&r()}})}),define("portal/views/annotationList",["ember.hapyak","utils.embed","utils.hms","model","dao","jquery.noconflict"],function(t,r,l,e,n,u){"use strict";var c={};return t.View.extend({tagName:"table",viewName:"annotationList",model:e,needsUpdate:0,annotations:{},annotationListCreated:!1,currentTime:null,classNames:["table","table-bordered","hapyak-component-datatable"],viewOnly:!1,init:function(){this.set("boundKeydownMultiRowEditing",this.get("keydownMultiRowEditing").bind(this)),this.set("boundKeyupMultiRowEditing",this.get("keyupMultiRowEditing").bind(this))},didInsertElement:function(){var e=this.get("editor");this.send("setupAnnotationList"),e.addEventListener("timeupdate",this.handleAnnotationVisibility.bind(this)),document.addEventListener("keydown",this.get("boundKeydownMultiRowEditing"),!1),document.addEventListener("keyup",this.get("boundKeyupMultiRowEditing"),!1)},willDestroyElement:function(){var e=this.get("editor");this.set("multiRowsSelected",t.A([])),e&&e.removeEventListener("timeupdate",this.handleAnnotationVisibility.bind(this)),document.removeEventListener("keydown",this.get("boundKeydownMultiRowEditing")),document.removeEventListener("keyup",this.get("boundKeyupMultiRowEditing"))},needsUpdateObserver:t.observer("needsUpdate",function(){var e,t=this.annotations",t),t(e in this.set("currentTime",n),t)t.hasOwnProperty(e)&&this.addRow(t[e])}),clear:function(){var e=this.get("table");e&&e.fnClearTable()},isMultiSelectKey:function(e){return-1<[91,17].indexOf(e)},keydownMultiRowEditing:function(){this.isMultiSelectKey(event.which)&&(this.set("multiRowEditing",!0),this.$().toggleClass("multi-row-editing",!0))},keyupMultiRowEditing:function(){var e=this.get("multiRowsSelected");this.set("multiRowEditing",!1),this.$().toggleClass("multi-row-editing",!1),this.isMultiSelectKey(event.which)&&0<e.length&&this.get("parentView.parentView.controller").send("open","annotationEditModal",null,{multiRows:e,editor:this.get("editor"),annotationListRef:this})},handleAnnotationVisibility:function(){var e=this.get("editor"),t=e&&e.currentTime;e.annotations.all(function(e){e.forEach(function(e){u('.dt-prop-display-toggle > div[data-annotation-id="'+e.annotationId+'"]').toggleClass("disabled",e.properties.start>t||e.properties.end<t)})})},getAnnotationIdFromEvent:function(e){var e=e.target,t="data-annotation-id";return e.getAttribute(t)||e.parentNode.getAttribute(t)},tryToAddToSelected:function(e){var n,t=this.get("editor"),i=u(e).closest("tr"),e=u(e.closest("tr.annotation-row")).hasClass("disabled"),r=i.data("annotationId"),a=this.get("annotations")[r],o=a&&a.type,s=this.get("multiRowsSelected");!e&&a&&t&&"number"==typeof t.duration&&(e={annotationId:r,startTime:i.find(".dt-start").text(),endTime:i.find(".dt-end").text(),contentPrev:i.find(".prev-text").text(),contentIcon:a.icon,type:o,editor:t,textIsEditable:"basic360"].indexOf(o),disableEndTimeInput:-1<["contents","closedcaptions"].indexOf(o),disableStartTimeInput:"closedcaptions"===o},n=null,s.any(function(e,t){if(e.annotationId===r)return n=t,!0})||s.push(e),u(i).toggleClass("multi-row-select"),"number"==typeof n&&s.splice(n,1))},onRowClick:function(e){var t=this.get("table").fnGetData(e.currentTarget)[1];this.get("multiRowEditing")?this.tryToAddToSelected(e.target):this.get("editor").currentTime=t+.1},onEditClick:function(e){u(e.target.closest("tr.annotation-row")).hasClass("disabled")||this.get("multiRowEditing")||(e.stopPropagation(),e=this.getAnnotationIdFromEvent(e),this.setAnnotationHidden(e,!1),this.get("parentView").send("focusAnnotation",this.get("annotations")[e]))},onCopyClick:function(e){u(e.target.closest("tr.annotation-row")).hasClass("disabled")||this.get("multiRowEditing")||(e.stopPropagation(),this.get("parentView").send("copyAnnotation",this.getAnnotationIdFromEvent(e)))},onDeleteClick:function(e){u(e.target.closest("tr.annotation-row")).hasClass("disabled")||this.get("multiRowEditing")||(e.stopPropagation(),this.get("parentView").send("confirmDeleteAnnotation",this.getAnnotationIdFromEvent(e)))},onToggleDisplayClick:function(e){var t=this.getAnnotationIdFromEvent(e),n=c[t];this.get("multiRowEditing")||(e.stopPropagation(),this.setAnnotationHidden(t,!n))},setAnnotationHidden:function(e,t){var n=this.get("editor");n&&(c[e]=t,u('td.dt-prop-display-toggle > div[data-annotation-id="'+e+'"]').toggleClass("overlay-disabled",t),this.get("parentView").send("updateAnnotationVisibility",e,t),t&&this.get("parentView").send("blurAnnotation",e),n.showAnnotations(!t,null,e))},onQuickEditClick:function(e){var t=this.get("editor"),n=u(e.target).closest("tr"),e=u(e.target.closest("tr.annotation-row")).hasClass("disabled"),i=n.data("annotationId"),r=this.get("annotations")[i],a=r&&r.type;!e&&r&&t&&"number"==typeof t.duration&&!this.get("multiRowEditing")&&(t.annotations.blur(i),t.pause(),e={annotationId:i,startTime:n.find(".dt-start").text(),endTime:n.find(".dt-end").text(),topPosition:r.properties.top,leftPosition:r.properties.left,contentPrev:n.find(".prev-text").text(),contentIcon:r.icon,type:a,editor:t,textIsEditable:-1<["pop","bookmark","hotlink","contents","social","basic360"].indexOf(a),disableEndTimeInput:-1<["contents","closedcaptions"].indexOf(a),disableStartTimeInput:"closedcaptions"===a},this.get("parentView.parentView.controller").send("open","annotationEditModal",null,e))},updateCellListeners:function(e){var t=u('td > div[data-annotation-id="'+e+'"]').closest("tr"),n='td > div[data-annotation-id="'+e+'"] > span.dt-delete',i='td > div[data-annotation-id="'+e+'"] > span.dt-copy',r='td > div[data-annotation-id="'+e+'"] > span.dt-edit',e='td.dt-prop-display-toggle > div[data-annotation-id="'+e+'"]',a=this.onRowClick.bind(this),o=this.onQuickEditClick.bind(this),s=this.onDeleteClick.bind(this),l=this.onEditClick.bind(this),c=this.onCopyClick.bind(this),d=this.onToggleDisplayClick.bind(this);this.get("table").fnSort([1,"asc"]),this.$(t).off("click",a).on("click",a),this.$(n).off("click",s).on("click",s),this.$(r).off("click",l).on("click",l),this.$(i).off("click",c).on("click",c),this.$(e).on("click",d),t.children(".dt-start, .dt-end, .dt-preview").off("click").on("click",o)},multiRowEditing:!1,multiRowsSelected:t.A([]),structureRowData:function(e){var t=e.properties,n=t.onClick||{},i=e.icon||"",i='<div class="type '+e.type+'">'+i+'</div><div class="prev-text">'+e.preview+"</div>";return e.template&&(i+='<div class="prev-text from-template">TEMPLATE</div>'),[i,t.start||!!t.start,t.end||!!t.end,!!t.pause,!!t.gate,!!t.precondition,!!(n.gotoLink||n.gotoTrack||n.setVariables||t.addonCommand&&t.addonTypeId),{annotationId:e.annotationId,type:e.type,template:e.template,disableCopy:e.maxAllowed<=1,disableEdit:r.dotget(e,"customConfig.disableAnnotationListEdit.value")}]},addRow:function(e){var t=e.annotationId;e&&t&&e.properties&&(this.get("table").fnAddData(this.structureRowData(e)),this.updateCellListeners(t))},actions:{setupAnnotationList:function(e){var t,a=this,o=this.get("viewOnly");function s(e){var e=l.fromSeconds(e),t=e.hours,n=e.minutes,i=e.seconds,e=e.milliseconds;return(+(t=10<=t?t:"0"+t)?t+":":"")+(10<=n?n:"0"+n)+":"+(10<=i?i:"0"+i)+"."+(e=2<=(""+e).length?""+e:e+"0").slice(0,2)}function i(e,t,n,i){var r="boolean"==typeof e?e:e.val;return'<div data-annotation-id="'+e.id+'" class="'+((i||"")+(r?" active":""))+'"></div>'}this.get("annotationListCreated")||(t=this.$().dataTable({paging:!1,deferRender:!0,order:[[1,"asc"]],createdRow:function(e,t){var n=7<=t.length&&t[7].annotationId,t=7<=t.length&&t[7].template;n&&(u(e).data("annotation-id",n),u(e).addClass("annotation-row"),(a.get("viewOnly")||t)&&u(e).addClass("disabled"))},columns:[{class:"dt-preview",name:"preview",title:'Content <div id="content-search"><i class="material-icons">search</i><input id="content-search-input"></div>',type:"string",searchable:!0,orderable:!1,width:"45%"},{class:"dt-start",name:"start",title:"Start Time",render:function(e,t,n,i){return"display"===t?s(t=!(t=e)||t>=Number.MAX_VALUE||t<0?0:t):e},type:"number",searchable:!1,width:"10%"},{class:"dt-end",name:"end",title:"End Time",render:function(e,t,n,i){return"display"===t?(t=e,r=a.get("editor.editor.duration")||a.get("context.video.duration"),s(t=r?t<Number.MAX_VALUE?t:r:t)):e;var r},type:"number",searchable:!1,width:"10%"},{title:"Pause",name:"pause",class:"dt-prop-pause",type:"boolean",mRender:function(e,t,n){return i(e,0,0,"fa-pause")},searchable:!1,orderable:!1,width:"5%"},{title:"Gate",name:"gate",class:"dt-prop-gate",type:"boolean",mRender:function(e,t,n){return i(e,0,0,"fa-minus-circle")},searchable:!1,orderable:!1,width:"5%"},{title:"Display</br>Rule",name:"display rule",class:"dtction(e,t,n){return i(e,0,0,"fa-code")},searchable:!1,orderable:!1,width:"5%"},{title:"More",name:"more",class:"dt-prop-more",type:"boolean",mRender:function(e,t,n){return i(e,0,0,"fa-sliders")},searchable:!1,orderable:!1,width:"5%"},{title:"Actions",class:"dt-actions",name:"actions",type:"string",mRender:function(e,t,n){var n=(e=e||n[5]).template,i=e.disableCopy,r=!0===e.disableEdit;return'<div data-annotation-id="'+(e.annotationId||"")+'"><span title="Edit" class="dt-edit '+(o||n||r?"disabled":"")+'"></span><span title="Copy" class="dt-copy '+(o||n||i?"disabled":"")+'"></span><span title="Delete" class="dt-delete '+(o||n?"disabled":"")+'"></span></div>'},searchable:!1,orderable:!1,width:"10%"},{title:"Toggle Visibility",name:"display rule",class:"dt-prop-display-toggle",type:"string",mRender:function(e,t,n){return'<div data-annotation-id="'+(n=(n=n)[7]&&n[7].annotationId)+'" class="'+(c[n]?"overlay-disabled":"")+'"></div>'},searchable:!1,orderable:!1,width:"5%"}]}),this.set("table",t),this.$().width("98%"),this.set("annotationListCreated",!0),u("#content-search-input").keyup(function(){t.DataTable().search(u(this).val()).draw()}),"function"==typeof e&&e())}}})}),!function(e){if("function"==typeof define&&define.amd)define("slider",["jquery"],e);else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){var t;try{t=irequire("jquery")}catch(e){t=null}module.exports=e(t)}else window&&(window.Slider=e(window.jQuery))}(function(t){var e,E,n,i,k;function r(e,t){this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof e?this.element=document.querySelector(e):e instanceof HTMLElement&&(this.element=e),t=t||{};for(var n=Object.keys(this.defaultOptions),i=0;i<n.length;i++){var r=n[i],a=t[r];a=null!==(a=void 0!==a?a:function(t,e){e="data-slider-"+e.replace(/_/g,"-"),t=t.getAttribute(e);try{return JSON.parse(t)}catch(e){return t}}(this.element,r))?a:this.defaultOptions[r],this.options||(this.options={}),this.options[r]=a}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var o,s,l,c,d,e=this.element.style.width,u=!1,p=this.element.parentNode;if(this.sliderElem)u=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var h=document.createElement("div"),f=(h.className="slider-track",(s=document.createElement("div")).className="slider-track-low",(o=document.createElement("div")).className="slider-selection",(l=document.createElement("div")).className="slider-track-high",(c=document.createElement("div")).className="slider-handle min-slider-handle",c.setAttribute("role","slider"),c.setAttribute("aria-valuemin",this.options.min),c.setAttribute("aria-valuemax",this.options.max),(d=document.createElement("div")).className="slider-handle max-slider-handle",d.setAttribute("role","slider"),d.setAttribute("aria-valuemin",this.options.min),d.setAttribute("aria-valuemax",this.options.max),h.appendChild(s),h.appendChild(o),h.appendChild(l),Array.isArray(this.options.labelledby));if(f&&this.options.labelledby[0]&&c.setAttribute("aria-labelledby",this.options.labelledby[0]),f&&this.options.labelledby[1]&&d.setAttribute("aria-labelledby",this.options.labelledby[1]),!f&&this.options.labelledby&&(c.setAttribute("aria-labelledby",this.options.labelledby),d.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&0<this.options.ticks.length){for(i=0;i<this.options.ticks.length;i++){var m=document.createElement("div");m.className="slider-tick",this.ticks.push(m),h.appendChild(m)}o.className+=" tick-slider-selection"}if(h.appendChild(c),h.appendChild(d),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&0<this.options.ticks_labels.length)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",i=0;i<this.options.ticks_labels.length;i++){var v=document.createElement("div"),g=0===this.options.ticks_positions.length,g=this.options.reversed&&g?this.options.ticks_labels.length-(i+1):i;v.className="slider-tick-label",v.innerHTML=this.options.ticks_labels[g],this.tickLabels.push(v),this.tickLabelContainer.appendChild(v)}function y(e){var t=document.createElement("div"),n=(t.className="tooltip-arrow",document.createElement("div"));n.className="tooltip-inner",e.appendChild(t),e.appendChild(n)}var f=document.createElement("div"),b=(f.className="tooltip tooltip-main",f.setAttribute("role","presentation"),y(f),document.createElement("div")),w=(b.className="tooltip tooltip-min",b.setAttribute("role","presentation"),y(b),document.createElement("div"));w.className="tooltip tooltip-max",w.setAttribute("role","presentation"),y(w),this.sliderElem.appendChild(h),this.sliderElem.appendChild(f),this.sliderElem.appendChild(b),this.sliderElem.appendChild(w),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),p.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(E&&(this.$element=E(this.element),this.$sliderElem=E(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),k[this.options.scale]&&(this.options.scale=k[this.options.scale]),!0===u&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this..tooltip_max,"hide"),["left","top","width"_removeProperty(this.trackSelection,e),this._removeProperty(thi){this._removeProperty(e,"left"),this._removeProperty(e,"top"),this._removeProperty(e,"margin-left"),this._removeProperty(e,"margin-top"),this._removeClass(e,"right"),this._removeClass(e,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=e,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&0<this.options.ticks.length&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=s||this.trackLow,this.trackSelection=o||this.trackSelection,this.trackHigh=l||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=c||this.handle1,this.handle2=d||this.handle2,!0===u)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),i=0;i<this.ticks.length;i++)this._removeClass(this.ticks[i],"round triangle hide");if(-1!==["round","triangle","custom"].indexOf(this.options.handle))for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),i=0;i<this.ticks.length;i++)this._addClass(this.ticks[i],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.touchstart,!1),this.sliderElem.addEventListener("touchmove",this.touchmove,!1)),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}return function(){"use strict" console?e:function(e){console.error(e)},c.bridget=function(e,t){var n,s,l;(ions,e))}),s=e,l=t,c.fn[s]=function(t){var e;if("string"!=typeof t)return!(e=this.map(function(){var e=c.data(this,s);return e?(e.option(t),e._init()):(e=new l(this,t),c.data(this,s,e)),c(this)}))||1<e.length?e:e[0];for(var n=u.call(arguments,1),i=0,r=this.length;i<r;i++){var a=this[i],a=c.data(a,s);if(a)if(c.isFunction(a[t])&&"_"!==t.charAt(0)){var o=a[t].apply(a,n);if(void 0!==o&&o!==a)return o}else d("no such method '"+t+"' for "+s+" instance");else d("cannot call methods on "+s+" prior to initialization; attempted to call '"+t+"'")}return this}},c.bridget)}(),E=t,i=function(e){return"Invalid input value '"+e+"' passed in"},k={linear:{toValue:function(e){var t=e/100*(this.options.max-this.options.min),n=!0;if(0<this.options.ticks_positions.length){for(var i,r,a,o=0,s=1;s<this.options.ticks_positions.length;s++)if(e<=this.options.ticks_positions[s]){i=this.options.ticks[s-1],a=this.options.ticks_positions[s-1],r=this.options.ticks[s],o=this.options.ticks_positions[s];break}t=i+(e-a)/(o-a)*(r-i),n=!1}n=(n?this.options.min:0)+Math.round(t/this.options.step)*this.options.step;return n<this.options.min?this.options.min:n>this.options.max?this.options.max:n},toPercentage:function(e){if(this.options.max===this.options.min)return 0;if(0<this.options.ticks_positions.length){for(var t,n,i,r=0,a=0;a<this.options.ticks.length;a++)if(e<=this.options.ticks[a]){t=0<a?this.options.ticks[a-1]:0,i=0<a?this.options.ticks_positions[a-1]:0,n=this.options.ticks[a],r=this.options.ticks_positions[a];break}if(0<a)return i+(e-t)/(n-t)*(r-i)}return 100*(e-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(e){var t=0===this.options.min?0:Math.log(this.options.min),n=Math.log(this.options.max),n=Math.exp(t+(n-t)*e/100);return(n=this.options.min+Math.round((n-this.options.min)/this.options.step)*this.options.step)<this.options.min?this.options.min:n>this.options.max?this.options.max:n},toPercen.max===this.options.min?0:(t=Math.log(this.options.max),n=0===this.options.min?0:Math.log(this.options.min),100*((0===e?0:Math.log(e))-n)/(t-n))}}},(e=function(e,t){return r.call(this,e,t),this}).prototype={_init:function(){},constructor:e,rientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(e){return Array.isArray(e)?e[0]+" : "+e[1]:e},natural_ascale:"linear",focus:!1,tooltip_position:null,labelledby:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(e,t,n){e=e||0;var i=this.getValue(),e=(this._state.value=this._validateInputValue(e),this._applyPrecision.bind(this)),e=(this.options.range?(this._state.value[0]=e(this._state.value[0]),this._state.value[1]=e(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=e(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout(),tld(this.rn thisrn thisetAttribute("tabindex",0),this._removeClass(this.slitoggis._state.enantHandler(e,tf(e,t),tribute:fuction(){return this._removeSliderEventHandlers(),r.call(this,this.element,this.options),E&&E.data(this.element,"slider",this),this},relayout:function(){return this._resize(),this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.redow.removeEventListener("res[e]=[]),this.eventToCallbalength;i++)ifn.style.displ1===this._state.inDrag&&!0!==this.alwaysShowTooltip&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var e,t,n=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]];if(this.handle1.style[this.stylePos]=n[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),this.handle2.style[this.stylePos]=n[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),Array.isArray(this.options.ticks)&&0<this.options.ticks.length){var i="vertical"===this.options.orientation?"height":"width",r="vertical"===this.options.orientation?"marginTop":"marginLeft",a=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var o=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[r]=-a/2+"px"),o=this.tickLabelContainer.offsetHeight;else for(s=0;s<this.tickLabelContainer.childNodes.length;s++)this.tickLabelContainer.childNodes[s].offsetHeight>o&&(o=this.tickLabelContainer.childNodes[s].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=o+"px")}for(var s=0;s<this.options.ticks.length;s++){var l=this.options.ticks_positions[s]||this._toPercentage(this.options.ticks[s]);this.options.reversed&&(l=100-l),this.ticks[s].style[this.stylePos]=l+"%",this._removeClass(this.ticks[s],"in-selection"),this.options.range?l>=n[0]&&l<=n[1]&&this._addClass(this.ticks[s],"in-selection"):("after"===this.options.selection&&l>=n[0]||"before"===this.options.selection&&l<=n[0])&&this._addClass(this.ticks[s],"in-selection"),this.tickLabels[s]&&(this.tickLabels[s].style[i]=a+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[s]?(this.tickLabels[s].style.position="absolute",this.tickLabels[s].style[this.stylePos]=l+"%",this.tickLabels[s].style[r]=-a/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[s].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"))}}this.options.range?(t=this.options.formatter(this._state.value),this._setText(this.tooltipInner,t),this.tooltip.style[this.stylePos]=(n[1]+n[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),e=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner_min,e),e=this.options.formatter(this._state.value[1]),this._setText(this.tooltipInner_max,e),this.tooltip_min.style[this.stylePos]=n[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=n[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")):(t=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,t),this.tooltip.style[this.stylePos]=n[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px")),"vertical"===this.options.orientation?(this.trackLow.style.top="0",this.trackLow.style.height=Math.min(n[0],n[1])+"%",this.trackSelection.style.top=Math.min(n[0],n[1])+"%",this.trackSelection.style.height=Math.abs(n[0]-n[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(n[0],n[1])-Math.abs(n[0]-n[1])+"%"):(this.trackLow.style.left="0",this.trackLow.style.width=Math.min(n[0],n[1])+"%",this.trackSelection.style.left=Math.min(n[0],n[1])+"%",this.trackSelection.style.width=Math.abs(n[0]-n[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(n[0],n[1])-Math.abs(n[0]-n[1])+"%",e=this.tooltip_min.getBoundingClientRect(),t=this.tooltip_max.getBoundingClientRect(),"bottom"===this.options.tooltip_position?e.right>t.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):e.right>t.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,top"),this.toolt_offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)},_mousedown:function(e){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var t,n=this._getPercentage(e),i=(this.options.range?(i=Math.abs(this._state.percentage[0]-n),t=Math.abs(this._state.percentage[1]-n),this._state.dragged=i<t?0:1):this._state.dragged=0,this._state.percentage[this._state.dragged]=n,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0,this._calculateValue());return this._trigger("slideStart",i),this._setDataVal(i),this.setValue(i,!1,!0),this._pauseEvent(e),this.options.focus&&this._trigger===e.changedTouches?this._mousedown(e):(e=e.changedTouches[0],this.touchX=e.pageX,this.touchY=e.pageY)},_triggerFocusOnHandle:function(e){0===e&&this.handle1.focus(),1===e&&this.handle2.focus()},_keydown:function(e,t){if(!this._state.enabled)return!1;var n,i,r;switch(t.keyCode){case 37:case 40:n=-1;break;case 39:case 38:n=1}return n?(this.options.natural_arrow_keys&&(r="vertical"===this.options.orientation&&!this.options.reversed,i="horizontal"===this.options.orientation&&this.options.reversed,(r||i)&&(n=-n)),r=this._state.value[e]+n*this.options.step,this.options.range&&(r=[e?this._state.value[0]:r,e?r:this._staideStop",r),this._layout(),this._pauseEvent(t),!1):void 0},_pauseEvent:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1},_mousemove:function(e){return this._state.enabled&&(e=this._getPercentage(e),this._adjustPercentageForRangeSliders(e),this._state.percentage[this._state.dragged]=e,this._layout(),e=this._calculateValue(!0),this.setValue(e,!0,!0)),!1},_touchmove:function(e){var t,n;void 0!==e.changedTouches&&(t=(n=e.changedTouches[0]).pageX-this.touchX,n=n.pageY-this.touchY,this._state.inDrag||("vertical"===this.options.orientation&&t<=5&&-5<=t&&(15<=n||n<=-15)||n<=5&&-5<=n&&(15<=t||t<=-15))&&this._mousedown(e))},_adjustPercentageForRangeSliders:function(e){var t;this.options.range&&(t=this._getNumDigitsAfterDecimalPlace(e),e=this._applyToFixedAndParseFloat(e,t=t?t-1:0),0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],t)<e?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],t)>e&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0))},_mouseup:function(){var e;return this._state.enabled&&(this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseupor(var n=[t,1/0]ks_snap_bounds)return n[0]}return t},_applyPrecision:function(e){var t=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParon(e){e=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},_applyToFixedAndParseFloat:function(e,t){e=e.toFixed(t);return parseFloat(e)},_getPercentage:function(e){e=((e=!this.touchCapable||"touchstart"!==e.type&&"touchmove"!==e.type?e:e.touches[0])[this.mousePos]-this._state.offset[this.stylePos])/this._state.size*100,e=Math.round(e/this._state.percentage[2])*this._state.percentage[2];return this.options.reverseeturn e;if(A.length;talue",e),this.element.value=e},_trigger:function(e,t){t=t||0===t?t:void 0;var n=this.eventToCallbackMap[e];if(n&&n.length)for(var i=0;i<n.length;i++)(0,n[i])(t);E&&this._triggerJQueryEvent(e,t)},_trtrigger(e)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(e,t){void 0!==e.textContent?e.textContent=t:void 0!==e.innerText&&(e.inne;e.classNamet(" "),i=e.tion(e){ t=e.offsetTop;(e=e.offsetParent)&&!isNaN(e.offsetTop);)t+=e.offsetTop,"BODY"!==e.tagName&&(t-=e.scrollTop);return t},_offset:function(e){return{left:this._offsetLeft(e),top:this._offsetTop(e)}},_css:function(e,t,n){E?E.style(e,t{return t.toUpperCase()}),e.style[t]=n)},_toValue:function(e){return this.options.scale.toValue.apply(this,[e])},_toPercentage:function(e){return this.options.scale.toPercentage.apply(this,[e])},_setTooltipPotip_min,this.tooltip_max];"vertical"===this.options.orientation?ht":"left",e.forEach(fons.tooltip_position?e.forEach(function(e){this._addClass(e,"bottom"),e.style.top="22px"}.bind(this)):e.forEach(function(e){this._addClass(e,"top"),e.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},E&&(n=E.fn.slider?"bootstrapSlider":"slider",E.bridget(n,e),E(function(){E("input[data-provide=slider]")[n]()})),e}),define("portal/views/addons/slider",["ember.hapyak","model","dao","logging","slider","utils"],function(e,o,s,l,a,n){"use strict";var c,r,d,u,p,h,f,m,v,g,y,b,i,w,E,k=500,x=100,t="padding-top 0.1s linear";function C(r,a){l.dev("[Addon=slider] - Finding addon layout="+r),o.Addon.find({layout:r,name:"slider"}).onLoad(function(e){var t,n,i,e=e.get("content");e.length||c?a&&"function"==typeof a&&a(e[0]):(t=r,n=function(e){a&&"function"==typeof a&&a(e)},(i=o.AddonType.find({name:"slider"})).onLoad(function(){var e=i.get("content");e.length?(l.dev("[Addon=slider] - Creating addon addon_type="+e[0].get("id")+" layout="+t),o.Addon.createRecord({addon_type:e[0].get("id"),layout:t,name:"slider",configuration:{}}).onSave(function(e){e&&n&&"function"==typeof n&&n(s.store.load(o.Addon,e))})):l.warn("[AddonType=slider] - does not exist!")}))})}function _(e){v&&f&&(e?(v.classList.remove("dragging"),f.classList.remove("dragging"),T(t)):(v.classList.add("dragging"),f.classList.add("dragging"),T("")))}function T(e){parent.postMessage(JSON.stringify({name:"interactivity_embedded_experience_enable_transition",id:u,transition:e}),"*")}function S(){var i=Date.now();y||!function e(){var t,n;p&&h&&(f.style.height=Math.max(p.getBoundingClientRect().height,h.getBoundingClientRect().height)+"px",Date.now()-i<x?requestAnimationFrame(e):c&&r&&(n=m?m.clientHeight:0,f&&p&&h&&(n=b&&f.clientWidth<k?(A(50),(t=h.getBoundingClientRect()).top+t.height+n):(A(w),(t=p.getBoundingClientRect()).top+Math.max(t.height,h.getBoundingClientRect().height)+n),isNaN(n)||0===t.height||parent.postMessage(JSON.stringify({name:"interactivity_embedded_experience_aspect_ratio_available",id:u,aspectRatio:f.clientWidth/n,nativeControls:E}),"*"))))}()}function A(e){p.style.transform="translateZ(0) scale("+e/100*2+")",h.style.transform="translateZ(0) scale("+2*(1-e/100)+")"}function P(r){this.instance=hapyak.addon("slider",{init:function(t){var e=r.get("addon_type.default_configuration")||{},n=+(r.get("configuration.min")||e.min||20),i=+(r.giguration.position")||eaddon-slider",{tooltip:"hide",value:g,min:n,max:i,step:.001,id:"hy-slider",formatter:function(e){return"Current value: "+Math.round(e)}}),t.s(e){t.actions.change({},e)}),(v=documame("slider-track")[0]).addEventListener("mousedown",function(){d=!0}),document.addEventListener("mousemove",function(){!0===d&&_(!1)}),document.addEventListener("mouseup",function(){_(!0),d=!1}),window.addEventListener("resizeRequested",function(){S()},!1),window.addEventListener("resize",function(){S()}),l.dev("[Addon=slider] - init complete"),t.actions.change({},{newValue:g})},change:function(e,t){y||(e.data&&(t=e.data),this.slider&&this.slider.setValue(+t.newValue),p&&h&&(c?(w=t.newValue,A(t.newValue),S()):(p.style.width=t.newValue-1+"%",h.style.width=99-t.newValue+"%",S(),n.dispatchEvent("endResize"))))}})}return e.View.extend({templateName:"addons/slider",viewName:"slider",didInsertElement:function(){var t=this;u=this.get("controller.embeddedExperienceId"),b=this.get("controller.isLive"),i=this.get("controller.isSlidesync"),c=this.get("viewerMode"),E=this.get("controller.useNativeControls")||!b||!i,p=document.getElementById("sizing-container-left-side"),h=document.getElementById("sizing-container-right-side"),f=document.getElementById("sizing-container"),"experience/view_slidesync_external_chapters"===this.get("controller.experienceTemplate")?y=!0:"experience/view_slidesync_full_width_playlist"===this.get("controller.experienceTemplate")&&(m=document.getElementById("hy-playlist")),C(this.get("parentView.controller.layout"),function(e){new P(e);t.set("parentView.sliderReady",!0),e.initialPosition=g,t.get("controller.layoutSpecificAddons").pushObject({name:"slider",adrentView.sliderReady",!1),window.removeEventListener("resizeRequested",function(){S()},!1)},isLoading:e.observer("parentView.everythingReady",function(){r=this.get("parentView.everythingReady"wer",["ember.hapyak","listener","model","dao","logging","jquery.noconflict","utils.embed","utils"],function(e,r,o,s,l,t,c,n,i){"use strict";var d;function u(){n.dispatchEvent("resizeRequested")}function a(r,a){l.dev("[Addon=slidesync] - Finding addon layout="+r),o.Addon.find({layout:r,name:"slidesync"}).onLoad(function(e){var t,n,i,e=e.get("content");e.length||d?a&&"function"==typeof a&&a(e[0]):(t=r,n=function(e){a&&"function"==typeof a&&a(e)},(i=o.AddonType.find({name:"slidesync"})).onLoad(function(){var e=i.get("content");e.length?(l.dev("[Addon=slidesync] - Creating addon addon_type="+e[0].get("id")+" layout="+t),o.Addon.createRecord({addon_type:e[0].get("id"),layout:t,name:"slidesync",configuration:{}}).onSave(function(e){e&&n&&"function"==typeof n&&n(s.store.load(o.Addon,e))})):l.warn("[AddonType=slidesync] - does not exist!")}))})}function p(e){function n(e,t){o.isLoading||(e<=0||e>o.numPages?console.warn("SlideSync - Page out of range."):(i.currentPage=e,u(),r.emit("changePage",i.currentPage),t&&"function"==typeof t&&t(e)))}this.currentPage=0,this.instance=hapyak.addon("slidesync",{init:function(e){e.element=document.getElementById("slidesync-addon"),e.isLoading=!1,e.isReadyCallbacks=[],e.id=Date.now()},changePage:function(e){var r=e.data;function a(){n(+r.page)}r.addonId&&r.addonId!=i.instance.addonId||(o.currentAssetArray&&o.assetUrl===r.asset?a():t.ajax({url:r.asset+"/legend.json"}).done(function(e,t,n){var i;o.assetUrl=r.asset,o.aso.isLoading?o.isReadyCallbacks.push(i)ssetArray=e),o.isLoading=!1,o.isReadyCallbacks.forEach(function(e){e&&"funct"==typeof i&&i.log("No legend found for",r.asset)}))}}),thivar o=this.instance,i=this;this.next=function(e){n(i.currentPage+1,e)},this.previous=function(e){n(i.currentPage-1,e)},this.goTo=function(e,t){n(e,t)},this.destroy=function(){o.destroy(),o=null}}return e.View.extend({templateName:"addons/slidesync_viewer",viewName:"slidesync_viewer",classNames:"slidesync_viewer",currentImageUrl:"",currentImageAsDiv:!1,didInsertElement:function(){var o,s=this;d=this.get("viewerMode"),this.set("currentImageUrl",""),this.set("parentView.noSlides",!0),a(this.get("parentView.controller.layout"),function(e){var i=new p(e);s.set("viewer",i),s.get("parentView").set("slidesyncViewer",i),s.get("parentView.editorIframe").annotations.all("ontime",function(e){var t=c.dotget(i,"instance.addonId"),n=!1;i&&t&&(console.warn("Viewer or addonId not defined."),0===e.length&&s.set("parentView.slidesyncReady",!0),e.some(function(e){return!("slidesync"!==c.dotget(e,"properties.addonTypeId")||!c.dotget(e,"properties.addonCommandData.asset")||c.dotget(e,"properties.addonCommandData.addonId")&&c.dotget(e,"properties.addonCommandData.addonId")!=t)&&(s.set("parentView.noSlides",!1),hapyak.message.send(window,"changePage",{asset:e.properties.addonCommandData.asset,page:c.dotget(e,"properties.addonCommandData.page")||1,addonId:e.properties.addonCommandData.addonId,customContext:"slidesync"}),n=!0)}),e&&!n&&s.set("parentView.slidesyncReady",!0))}),u()}),this.handleChangePage=function(i){var r=s.get("viewer");function a(e){"experience/view_slidesync_external_chapters"===s.get("controller.experienceTemplate")?(s.set("currentImageUrl",e?"background-image: url("+e+");":""),s.set("currentImageAsDiv",!0)):s.set("currentImageUrl",e),u()}o&&clearTimeout(o),c.dotget(r,"instance.currentAssetArray")&&s&&!s.isDestroyed&&function e(){var t=c.dotget(r,"instance.currentAssetArray")[i-1],n=new Image;n.onerror=function(){a("/img/convertingSlide.svg"),o=setTimeout(e,2e3)},n.onload=function(){a(t),clearTimeout(o),s.set("parentView.slidesyncReady",!0)},n.src=t}()},r.addEventListener("changePage",s.handleChangePage)},willDestroyElement:function(){r.removeEventListener("changePage",this.handleChangePage),this.get("parentView.slidesyncViewer").destroy(),this.set("parentView.slidesyncViewer",null),this.set("parentView.slidesyncReady",!1)}})}),define("portal/views/addons/playlist_addon",["ember.hapyak","listener","model","dao","jquery","logging","utils.hms","utils.hapyakEnv","materialize"],function(e,t,a,o,l,c,d,n,i,r){"use strict";var s,u;function p(i layout="+i),a.Addon.find({layout:i,name:"playlist"}).onLoad(function(e){var t,n,e=e.get("content");e.length||s?r&&"function"==typeof r&&r(e[0]):(t=i,n=function(e){r&&"function"==typeof r&&r(e)},a.AddonType.find({name:"playlist"}).onLoad(function(e){e=e.get("content");e.length?(c.dev("[Addon=playlist] - Creating addon addon_type="+e[0].get("id")+" layout="+t),a.Addon.createRecord({addon_type:e[0].get("id"),layout:t,name:"playlist",configuration:{}}).onSave(function(e){e&&n&&"function"==typeof n&&n(o.store.load(a.Addon,e))})):c.warn("[AddonType=playlist] - does not exist!")}))})}return e.View.extend({templateName:"addons/playlist_addon",viewName:"playlist_addon",isSetup:!1,playlistId:null,projects:null,pages:null,leftArrowImg:n.cdnUrl("/img/slidesync-left-arrow-inactive.svg"),rightArrowImg:n.cdnUrl("/img/slidesync-right-arrow-inactive.svg"),currentPage:0,hasOnePage:!1,firstPage:!1,lastPage:!1,rerenderPlaylist:!1,hidePlaylist:!1,playlistChanges:0,didInsertElement:function(){s=this.get("viewerMode"),this.set("projects",e.A([])),this.set("pages",e.A([])),this.ready()},onPlaylistAvailable:e.observer(function(){this.ready(),a.PlaylistToProject.find({playlist:this.get("parentView.playlist.id")}).onLoad(function(e){e.get("content").length||this.setupEmptyExperience()}.bind(this))},"parentView.playlist"),ready:function(){var o=this,s=this.get("controller");function e(){p(this.get("parentView.controller.layout"),function(e){e=new t(0,o.);o.set("parentView.playlistViewer",e),o.set("parentView.playlistReady",!0),o.set("viewer",e),o.updateUI()})}function t(e,t){this.instance=hapyak.addon("playlist",{init:function(e){e.playlist=t},next:function(){a&&a.playlist&&s.send("startVideoChange",function(){a.playlist.next()})},previous:function(){a&&a.playlist&&s.send("startVideoChange",function(){a.playlist.previous()})},goTo:function(e){var t,n,i,r;a&&a.playlist&&e.data&&(t=e.data.index,n=e.data.seekTime,l.isNumeric(+t)&&(+t>=a.playlist.all().length?c.warn("Index out of range! No video exists at that index."):(o.set("parentView.playlistReady",!1),s.send("startVideoChange",function(){window.scrollTo(0,0),a.playlist.goTo(+t,function(){r=a.playlist.currentPlayer(),i=e.data.autoplay,o.set("parentView.playlistReady",!0),r.addEventListener("loadedmetadata",function(){var e=n&&"string"==typeof n?d.fromString(n):n;n=(e=e||"")?d.toSeconds(e):"",l.isNumeric(n)&&(n>r.duration?c.warn("You cannot seek to a time greater than aylist.play()})}))))},add:function(e){a&&a.playlist&&(a.playlist.add(e,o.updateUI),omove:function(e){a&&a.playlist&&a.playlist.remove(e,o.updateUI)},move:function(e,t){a&&a.playlist&&(e<t&&t--,a.playlist.move(e,t,o.updateUI))},pause:function(){a&&a.playlist&&a.playlist.pause()}});var a=this.instance;this.all=function(){if(a&&a.playlist)return a.playlist.all()},this.currentVideo=function(){if(a&&a.playlist)return a.playlist.currentPlayer()},this.currentProjectIndex=function(){if(a&&a.playlist)return a.playlist.currentProjectIndex()}}function n(){u&&clearTimeout(u),u=setTimeout(o.updateUI,200)}this.updateUI=function(){var e=o.get("viewer"),t=o.get("projects");e&&t&&"function"==typeof e.all&&((e=e.all())&&e.length&&(t.setObjects(e),(t=o.get("controller"))&&(t.send("shouldHidePlaylist",e.length<2),o.send("managePages"))),o.get("rerenderPlaylist")&&(o.set("rerenderPlaylist",!1),o.get("viewer.instance.playlist").goTo(0),o.get("parentView").rerender()))},this.setupEmptyExperience=function(){var e=l("#new-playlist-item"),t=l("#sizing-container-left-side .experience-asset.show-asset"),t=[l("#sizing-container-right-side.experience-asset.show-asset"),t].filter(function(e){return!!e.length});t.length||t.push(l(".experience-asset .hapyak-editor-iframe")),t.forEach(function(e){var t="sizing-container-right-side"===e.attr("id")?'"/img/slide-sync-placeholder.svg"':'"/img/no-video-placeholder.svg"';e.prepend('<img id="empty-placeholder" src='+t+" />"),e.removeClass("inactive")}),e&&e.click(),[l("#experience-preloader-holder"),l(".hapyak-new-modal .modal-footer .btn-default")].forEach(function(e){e&&e.hide()})},(this.get("viewerMode")||this.get("isSetup"))&&(this.set("isSetup",!0),e.apply(this)),this.get("view.bind("resize",n),l(window).bind("endResize",n)},everythingReady:e.observer("parentView.parentView.everythingReady",function(){this.get("parentView.parentView.everythingReady")&&this.updateUI()}),updatePlaylistPage:e.observer("playlistChanges",function(){var e=document.getElementById("hy-playlist-items"),t=Math.min(Math.max(0,this.get("currentPage")),this.get("numPlaylistPages")-1),n=this.get("pages"),i=n.objectAt(t);n.setEach("active",!1),n.replace(t,1,[{projectsOnPage:i.projectsOnPage,active:!0}]),this.set("firstPage",0===t),this.set("lastPage",t===n.length-1),e.style.transform="translateX("+-(t*(this.get("playlistWidth")-20))+"px)"}),willDestroyElement:function(){l(window).unbind("resize",this.updateUI),l(window).unbind("endResize",this.updateUI),this.set("parentView.playlistReady",!1)},actions:{goTo:function(e){var t=this.get("viewer.instance.playlist");t&&t.all()[e].get("id")!==t.currentProject().get("id")&&this.get("viewer.instance.actions").goTo({data:{index:e}})},remove:function(e,t){var n=this.get("viewer.instance.playlist"),i=n.all();return 1===i.length?alert("Please add another video before deleting this final video."):confirm("Are you sure you want to delete this project from the playlist?")&&(thict().data.id)?i[0].data.id===e?this.get("viewer.instance.actions").next():this.get("viewer.instance.actions").previous():void 0},move:function(e,t){this.get("viewer.instance.actions").move(e,t)},openNewPlaylistProjectModal:function(){var t=this.get("viewer.instance"),n=t.actions;n&&n.pause(),this.get("controller").send(on(e){t.playlist.all().length||this.set("rerenderPlaylist",!0),n.add(e.get("id"))}.bind(this)})},goToPlaylistPage:function(e){this.set("currentPage",e),this.incrementProperty("playlistChanges")},changePlaylistPage:function(e){var t=this.get("currentPage")+1;t+e<1||t+e>this.get("numPlaylistPages")||(this.set("currentPage",t-1+e),this.incrementProperty("playlistChanges"))},managePages:function(){var e=document.getElementById("hy-playlist-sized-container"),t=document.getElementById("hy-playlist-limit-container"),n=this.get("projects").length,i=this.get("pages"),r=Math.max(0,Math.floor(e.clientWidth/216)),e=Math.ceil(n/r),a=this.get("currentPage"),o=216*r+20;for(i.clear();0<n;n-=r||1)i.addObject({projectsOnPage:r<n?r:n,active:a===i.length});t.style.width=o+"px",this.set("numPlaylistPages",e),this.set("playlistWidth",o),this.set("hasOnePage",1===e),this.incrementProperty("playlistChanges")}}})}),define("portal/views/experience/view_slidesync",["ember.hapyak","portal/views/viewer_playlist","portal/views/annotationList","portal/views/addons/slider","portal/views/addons/slidesync_viewer","portal/views/addons/playlist_addon","utils"],function(e,t,n,i,r,a,o){"use strict";return e.View.extend({layoutName:"experience/view_experience_layout",templateName:e.computed(function(){return this.get("experienceTemplate")}),ViewerPlaylistView:t,AnnotationListView:n,SliderView:i,SlidesyncViewerView:r,PlaylistAddonView:a,annotationsReady:!1,playlist:null,assetTitle:"",playlistReady:!1,playerReady:!1,sliderReady:!1,slidesyncReady:!1,hapyak_project:e.computed.alias("parentView.controller.hapyak_project"),hapyak_start_time:e.computed.alias("parentView.controller.hapyak_start_time"),hapyak_asset_url:e.computed.alias("parentView.controller.hapyak_asset_url"),firstLoad:!0,noSlides:!1,playlistLoaded:e.computed("playlistReady","controller.hidePlaylist",function(){return!!this.get("controller.hidePlaylist")||this.get("playlistReady")}),everythingReady:e.computed("slidesyncReady","playerReady","sliderReady","playlistLoaded",function(){var e=!this.get("firstLoad")||this.get("slidesyncReady")&&this.get("playerReady")&&this.get("sliderReady")&&this.get("playlistLoaded");if("experience/view_slidesync_external_chapters"===this.get("templateName")&&this.get("playlistLoaded")&&this.get("playerReady")&&this.get("controller").setupExternalContent(this.get("playlist"),this.get("playlistViewer.instance")),o.dispatchEvent("resize"),e)return this.set("firstLoad",!1),!0}),willInsertElement:function(){var e,t=this.get("controller.content.data.configuration");for(e in t)"facebookActive"===e?this.set(e,!(!t[e]||!this.get("controller.facebookId"))):this.set(e,t[e])},didInsertElement:function(){var e=document.getElementById("experience-top-row"),t=document.getElementById("social-media-buttons-container"),n=t&&t.getElementsByClassName("social-media-button");if(n&&e){for(;n.length;)e.appendChild(n[n.length-1]);t.parentNode.removeChild(t)}}})}),define("portal/views/experience/view_video_only",["ember.hapyak","portal/views/viewer_playlist","portal/views/annotationList","portal/views/addons/playlist_addon"],function(e,t,n,i,r){"use strict";return e.View.extend({layoutName:"experience/view_experience_layout",templateName:e.computed(function(){return this.get("experienceTemplate")}),ViewerPlaylistView:t,AnnotationListView:n,PlaylistAddonView:i,annotationsReady:!1,playlist:null,assetTitle:"",playlistReady:!1,playerReady:!1,hapyak_project:e.computed.alias("parentView.controller.hapyak_project"),hapyak_start_time:e.computed.alias("parentView.controller.hapyak_start_time"),hapyak_asset_url:e.computed.alias("parentView.controller.hapyak_asset_url"),firstLoad:!0,playlistLoaded:e.computed("playlistReady","controller.hidePlaylist",function(){return!!this.get("controller.hidePlaylist")||this.get("playlistReady")}),everythingReady:e.computed("playerReady","playlistLoaded",function(){if(!this.get("firstLoad")||this.get("playerReady")&&this.get("playlistLoaded"))return this.set("firstLoad",!1),!0}),willInsertElement:function(){var e,t=this.get("controller.content.data.configuration");for(e in t)this.set(e,t[e])}})}),define("portal/views/experience/view_lesson",["ember.hapyak","portal/views/experience/view_video_only"],function(e,t,n){"use strict";return t.extend({playerReady:!1,willInsertElement:function(){this._super(),-1<document.referrer.indexOf("/portal/experiences/")&&(this.set("controller.ltiAuthorSetup",!0),hapyak.iframed&&this.set("controller.returnLink",document.referrer))},gradeRecorded:e.observer("controller.gradeRecorded",function(){return this.get("controller.gradeRecorded")})})}),!function(c){var f,R,e,i="undefined"!=typeof global?global:this,d=Math.round,m=0,v=1,g=2,y=3,b=4,w=5,E=6,n={},a=[],V="undefined"!=typeof module&&module.exports,j=/^\/?Date\((\-?\d+)/i,H=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,q=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,z=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,r=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,F=/\d\d?/,B=/\d{1,3}/,U=/\d{1,4}/,W=/[+\-]?\d{1,6}/,$=/\d+/,Y=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,k=/Z|[\+\-]\d\d:?\d\d/gi,G=/T/i,K=/[\+\-]?\d+(\.\d{1,3})?/,Q=/\d{1,2}/,X=/\d/,J=/\d\d/,Z=/\d{3}/,ee=/\d{4}/,te=/[+-]?\d{6}/,ne=/[+-]?\d+/,ie=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,o=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],s=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],re=/([\+\-]|\d\d)/gi,ae=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),oe={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},se={dayofyear:"dayOfYek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},l={},u={s:45,m:45,h:22,d:26,M:11},le="DDD w W M D d".split(" "),ce="M D H h m s w W".split(" "),x={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:funis.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:functction(){return A(this.year()%100,2)},YYYY:function(){return A(this.year(),4)},YYYYY:function(){return A(this.year(),5)},YYYYYY:function(){vare),6)},gg:function(){return A(this.weekYear()%100,2)},gggg:function(){return A(this.weekYear(),4)},ggggg:function(){return A(this.weekYear(),5)},GG:function(){return A(this.isoWeekYear()%100,2)},GGGG:function(){return A(this.isoWeekYear(),4)},GGGGG:functnction(){return this.isoWeekday()},aridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:f this.hours()%12||12},m:function(){return this.minuteun},S),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+A(L(e/60),2)+":"+A(L(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+A(L(e/60),2)+A(L(e)%60,2)},z:function(){return this.rn("Deprecation warning: "+e)}fnts)},t)}function he(t,n){return function(e){return A(t.call(this,e)Date(Date.UTC(e,t+1,0)).getUTCDate()}function Ee(e,t,n){return M(f([e,11,31+t-n]),t,n).week}function ke(e){return xe(e)?366:365}function xe(e){return e%4==0&&e%100!=0||e%400==0}function Ce(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[v]<0||11<e._a[v]?v:e._a[g]lace("_","-")}function Se(e){var t;if(!n[e]&&V)try{t=f.locale(),irequire("./locale/"+e),f.locale(t)}catch(e){}return n[e]}function O(e,t){return t._isUTC?f(e).zone(t._offset||0):f(e).local()}function Ae(e,t){return e.isValid()?(t=Pr]]?i[r]=x[i[r]]:i[r]=(e=i[r]).match(/\[[\s=r,r=a,a=n,o=Ve(n=t,0,1).getUTCDay(),o={year:0<(s=7*(s-1)+((i=null!=i?i:a)-a)+(a-(o=0===o?7:o)+(r<o?7:0)-(o<a?7:0))+1)?n:n-1,dayOfYear:0<s?s:ke(n-1)+s},e._a[m]=o.year,e._dayOfYear=o.dayOfYear}function De(e){var t,n,i,r,a=[];if(!e._d){for(i=e,r=new Date,n=i._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()],e._w&&null==e._a[g]&&null==e._a[v]&&Le(e),e._dayOfYear&&(i=p(e._a[m],n[m]),e._dayOfYear>ke(i)&&(e._pf._overflowDayOfYear=!0),r=Ve(i,0,e._dayOfYear),e._a[v]=r.getUTCMonth(),e._a[g]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=n[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];e._d=(e._useUTC?Ve:Re).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function Oe(e){if(e._f===f.ISO_8601)Me(e);else{e._a=[],e._pf.empty=!0;for(var t,n,i,r=""+e._i,a=r.length,o=0,s=Pe(e._f,e._locale).match(z)||[],l=0;l<s.length;l++)if(n=s[l],(t=(r.match(function(e,t){var n=t._strict;switch(e){case"Q":return X;case"DDDD":return Z;case"YYYY":case"GGGG":case"gggg":return n?ee:U;case"Y":case"G":case"g":return ne;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?te:W;case"S":if(n)return X;case"SS":if(n)return J;case"SSS":if(n)return Z;case"DDD":return B;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Y;case"a":case"A":return t._locale._meridiemParse;case"X":return K;case"Z":case"ZZ":return k;case"T":return G;case"SSSS":return $;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?J:F;case"M":casse"s":case"w":case"W":case"e":case"E":return F;case"Do":return Q;default:return new RegExp(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))}}(n,e))||[])[0])&&(0<(i=r.substr(0,r.indexOf(t))).length&&e._pf.unusedInput.push(i),r=r.slice(r.indexOf(t)+t.length),o+=t.length),x[n]){t?e._pf.empty=!1:e._pf.unusedTokens.push(n),h=c=p=u=d=void 0;var c,d=n,u=t,p=e,h=p._a;switch(d){case"Q":null!=u&&(h[v]=3*(L(u)-1));break;case"M":case"MM":null!=u&&(h[v]=L(u)-1);break;case"MMM":case"MMMM":null!=(c=p._locale.monthsParse(u))?h[v]=c:p._pf.invalidMonth=u;break;case"D":case"DD":null!=u&&(h[g]=L(u));break;case"Do":null!=u&&(h[g]=L(parseInt(u,10)));break;case"DDD":case"DDDD":null!=u&&(p._dayOfYear=L(u));break;case"YY":h[m]=f.parseTwoDigitYear(u);break;case"YYYY":case"YYYYY":case"YYYYYY":h[m]=L(u);break;case"a":case"A":p._isPm=p._locale.isPM(u);break;case"H":case"HH":case"h":case"hh":h[y]=L(u);break;case"m":case"mm":h[b]=L(u);break;case"s":case"ss":h[w]=L(u);break;case"S":case"SS":case"SSS":case"SSSS":h[E]=L(1e3*("0."+u));break;case"X":p._d=new Date(1e3*parseFloat(u));break;case"Z":case"ZZ":p._useUTC=!0,p._tzm=Ie(u);break;case"dd":case"ddd":case"dddd":null!=(c=p._locale.weekdaysParse(u))?(p._w=p._w||{},p._w.d=c):p._pf.invalidWeekday=u;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":d=d.substr(0,1);case"gggg":case"GGGG":case"GGGGG":d=d.substr(0,2),u&&(p._w=p._w||{},p._w[d]=L(u));break;case"gg":case"GG":p._w=p._w||{},p._w[d]=f.parseTwoDigitYear(u)}}el=!0,t=0,n=o.length;t<n;t++)if(o[t][1].exec(i)){e._f=o[t][0]+(r[6]||" ");break}for(t=0,n=s.length;t<n;t++)if(s[t][1].exec(i)){e._f+=s[t][0];break}i.match(k)&&(e._f+="Z"),Oe(e)}else e._isValid=!1}function Ne(e){var t,n,i=e._i;i===c?e._d=new Date:(n=i,"[object Date]"===Object.prototype.toString.call(n)||n instanceof Date?e._d=new Date(+i):null!==(n=j.exec(i))?e._d=new Date(+n[1]):"string"==typeof i?(Me(n=e),!1===n._isValid&&(delete n._isValid,f.createFromInputFallback(n))):P(i)?(e._a=i.slck(e))}function Re(e,t,n,i,r,a,o){t=new Date(e,t,n,i,r,a,o);return e<1970&&t.setFullYear(e),t}function Ve(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function je(e,t,n){var i=f.duration(e).abs(),r=d(i.as("s")),a=d(i.as("m")),o=d(i.as("h")),s=d(i.as("d")),l=d(i.as("M")),i=d(i.as("y")),rh"]||o<u.h&&,i,r){return r.relativeTime(t||1,!!n,e,i)}.apply({},r)}function M(e,t,n){var t=n-t,n=n-e.day();return t<n&&(n-=7),n<t-7&&(n+=7),t=f(e).add(n,"d"),{week:Math.ceil(t.dayOfYear()/7),year:t.year()}}function He(e){var t=e._i,n=e._f;if(e._locale=e._locale||f.localeData(e._l),null===t||n===c&&""===t)return f.invalid({nullInput:!0});if("string"==typeof t&&(e._i=t=e._locale.preparse(t)),f.isMoment(t))return new C(t,!0);if(n)if(P(n)){var i,r,a,o,s,l=e;if(0===l._f.length)l._pf.invalidFormat=!0,l._d=new Date(NaN);else{for(o=0;o<l._f.length;o++)s=0=i));T(l,r||i)}}else Oe(e);else Ne(e);retuturn f();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}for(x.DDDD=he(x.DDD,3),T(fe.prototype,{set:function(e){var t,n;for(n in e)"function"==typeof(t=e[n])?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n;for(this._monthsParse||(this._monthsParse=[]),t=0;t<12;t++)if(this._monthsParse[t]||(n=f.utc([2e3,t]),n="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._wed_Thu_Fri_Sat",1]).day(t),n="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExpngDat)]&&(t=this._longDateFormat[e.toUpperCasslice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){e=this._calendar[e];return"function"==typeof e?e.apply(t):e},_relativeTi",d:"a day"._relatireplace(/%d/i,e)},pastFuture:function(e,t){e=this._relativeTime[0<e?"future":"past"l:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postfdDate:function(){return this._invalidDate}}),(f=function(e,t,n,i){var r;return"boolean"==typeof n&&(i=n,n=c),(r={_isAMomentObject:!0})._i=e,r._f=t,r._l=n,r._strict=i,r._isUTC=!1,r._pf=h(),He(r)}).suppressDeprecationWarnings=!1,f.createFromInputFall back to js Date. This is discouraged and will be removed in upcoming majoissues.slice.ction(e,t,n,i){var r;return"boolean"==typeof n&&(i=n,n=c),(r={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0})._l=n,r._i=e,r._f=t,r._strict=i,r._pf=h(),He(r).utc()},f.unix=function(e){return f(1e3*e)},f.duration=function(e,t){var n,i,r,a=e;return f.isDuration(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"==t[1]?-1:1,a={y:0,d:L(t[g])*n,h:L(t[y])*n,m:L(t[b])*n,s:L(t[w])*n,ms:L(t[E])*n}):(t=q.exec(e))?(n="-"===t[1]?-1:1,a={y:(i=function(e){e=e&&parseFloat(e.replace(",","."));return(isNaN(e)?0:e)*n})(t[2]),M:i(t[3]),d:i(t[4]),h:i(t[5]),m:i(t[6]),s:i(t[7]),w:i(t[8])}):"object"==typeof a&&("from"in a||"to"in a)&&(i=f(a.from),t=O(t=f(a.to),i),i.isBefore(t)?r=ve(i,t):((r=ve(t,i)).milliseconds=-r.milliseconds,r.months=-r.months),t=r,(a={}).ms=t.milliseconds,a.M=t.months),r=new _(a),f.isDuration(e)&&e.hasOwnPrope",f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.ISO_8601=function(){},function()oment.locale in):f.localeData(e))&&(f.duration._locale=f._locale=t),f._locale._abbr},f.defineLocale=function(e,t){return null!==t?(t.abbr=e,n[;s<o.lengthf(r=Se(a.sliclength>=n&&be(a,i,!0)>=nt,e){va:"")+t]()}function Be(e,t,n){"MTC?"UTC":"")+t](n)}function N(t,n){ret)}}function*e/400}for(e in f.no.utc(NaN);return null!=e?T(t._pf,e):t._pf.userInvalidated=!0,umention(e){reOf:funcon(){return rn this.-MM-DD[TYYY-MM-DD[T]His.seconds(),tion(){return _e(this)},isDSTShifted:function(){ret(this.nction(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(e){e=Ae(this,e||f.defaultFormat);return this.localeData().postformat(e)},add:ge(1,"add"),subtract:ge(-1,"subtract"),diff:function(e,t,n){var i,r,e=O(e,this),a=6e4*(this.zone()-e.zone());return"year"===(t=I(t))||"month"===t?(i=432e5*(this.daysInMonth()+e.daysInMonth()),r=12*(this.year()-e.year())+(this.month()-e.month()),r=(r+=(this-f(this).startOf("month")-(e-f(e).startOf("month")))/i)-6e4*(this.zone()-f(this).startOf("month").zone()-(t?i/1e3:"day"===t?(i-a)/864e5:"week"===t?(i-a)/6048e5:i),n?r:S(r)},from:function(e,t){return f.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(f(),e)},calendar:function(e){e=O(e||f(),this).startOf("day")ameElsmat(eturn null!=e?(e=function(e,0);cas0):"isoWdOf:functfunctiof(t)},isBefore:function(e,t){return t=void 0!==t?t:"millisecond",+this.clone().startOf(t)<+f(e).startOf(ttOf(t)==+O(e,this).startOf(t)},min:t("moment().min is deprecated, use moment.min instead. https://github.cull,arguments))<this?this:e}),max:t("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return this<(e=f.apply(null,arguments))?this:e}),zone:function(e,t){var n,i=this._offset||0;return null==e?this._isUTC?i:this._d.getTimezoneOffset():("string"==typeof e&&(e=Ie(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(n=this._d.getTimezoneOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==e&&(!t||this._changeInProgress?ye(this,fnProgress=TC?"UTC":""},zoneName""},parseZonzm):"strin)-e)%60=(f(this).h.ceil((this{var :this.ad:this.add")},isoWee"d")},weekday:faleData()._wnull()%7Year:function(e){return this[e=I(e)]()},set:function(e,t){return"function"==typeofbr:(this._locale=f.localeData(e),this)},lang:t("moment().lang() is deprecated. Use moment().localeData() instead.",function(e){return e===c?this.localeData():(this._locale=f.localeData(e),this)}),localeData:function(){return this._locale}}),f.fn.millisecond=f.fn.milliseconds=N("Milliseconds",!1),f.fn.second=f.fn.seconds=N("Seconds",!1),f.fn.minute=f.fn.minutes=N("Minutes",!1),f.fn.hour=f.fn.hours=N("Hours",!0),f.fn.date=N("Date",!0),f.fn.dates=t("dates accessor is deprecated. Use date instead.",N("Date",!0)),f.fn.year=N("FullYear",!0),f.fn.years=t("years accessor is deprecated. Use year instead.",N("Ful;i.mconds)ata.minu.years=Mas+thtFuture(+,thitioturn t/7;case"day":return t;case"hour":return 24*t;case"minute":return 24*t*60;case"second":return 24*t*60*60;case"millisecond":return 24*t*60*60*1e3;default:throw new Error("Unknown uns.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSe||r||a?"T":"")+(i(e.toLowerCase());function $e(e){"undefined"==typeof ender&&(R=i.moment,i.moment=e?t("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",f):f)}f.duration.fn.asMilliseconds=function(){return this.as("ms")},f.duration.fn.asSeconds=function(){return this.as("s")},f.duration.fn.asMinutes=function(){return this.as("m")},f.duration.fn.asHours=function(){return this.as("h")},f.duration.fn.asDays=function(){return this.as("ion(){return this.as("M")},f.duration.fn.asYears=function(){return this.as("y")},f.locale("en",{ordinal:fun}),V?module.exports=f:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&!0===n.config().noGlobal&&(i.moment=R),f}),$e(!0)):$e()}.call(this),define("portal/views/experience/view_live",["ember.hapyak","portal/views/addons/slider","portal/views/viewer_playlist","moment","utils.embed","utils","require"],function(r,e,t,a,o,n,i){"use strict";var s;return r.View.extend({layoutName:"experience/view_experience_layout",ViewerPlaylistView:t,SliderView:e,playerReady:!1,sliderReady:!1,editorIframe:null,beforeEvent:!0,duringEvent:!1,afterEvent:!1,beforeEventMessage:"Live vation has ended",date:"",countdown:null,templateName:r.computed(function(){return this.get("experienceTemplate")}),resize:function(){requestAnimationFrame(function(){n.dispatchEvent("resize")})},everythingReady:r.computed("eventState","playerReady","sliderReady",function(){return this.resize(),this.set("playerReady",!0),"during"!==this.get("eventState")||this.get("playerReady")&&this.get("sliderReady")}),onEditorIframeLoaded:r.observer("editorIframe","duringEvent",function(){var e=this.get("editorIframe"),t=this.get("duringEvent");e&&(t?e.play():e.pause(),this.set("playerReady",t)),this.resize()}),noSlides:!0,currentSlide:{},willInsertElement:function(){this._super(),-1<document.referrer.indexOf("/portal/experiences/")&&this.set("editorPreview",!0)},didInsertElement:function(){var e=this.get("controller.content.data.configuration.liveEventProperties")||{},t=o.getQueryParams(location.href),n=document.getElementById("experience-preloader-holder"),r=this;function i(e){var t,n,i;e&&(n=e,i=(i=hapyak.instances.playlist[0])&&i.currentPlayer(),n=n.videoSlots,t={},i&&n&&(n.forEach(function(e){e.content&&(t["slot_"+e.index]={type:e.content.isUrl?"iframe":e.content.isText?"text":"image",url:e.content.url,link:e.content.link})}),i.setData("slots",t)),i=0<=(n=e).currentSlide,r.set("noSlides",!i),n.slides&&n.slides.length&&i&&r.set("currentSlide",n.slides[n.currentSlide]),r.resize())}s||irequire([hapyak.hyrtmHost+"/dist/hyrtm.js","https://d1ye8dyxedsepm.cloudfront.net/dist/hyrtm.js"],function(e){(s=new e(this.get("controller.id"),{environment:hapyak.environment||"production"})).senion(e){i(e.payload),s.on("set",function(e){e=e.payload||{};e.eventState&&r.changeState(e.eventState)}),s.on("realtime_event",function(e){i(e.payload)}),s.on("id3_event",function(e){i(e.payload)})})}.bind(this)),this.changeState(t.eventState||e.eventState||"before"),e.beforeEventMessage&&this.set("beforeEventMessage",e.beforeEventMessage),e.afterEventMessage&&this.set("afterEventMessage",e.afterEventMessage),n&&(n.style.transition="none"),this.setupCountdown(e.eventDate,e.eventTime)},setupCountdown:function(e,t){var n,i;e&&t&&(n=a(e+" "+t),(i=this).set("date",n.format("LL")+" at "+n.format("LT")),function e(){var t=a.duration(n.diff());t._milliseconds<0&&i.set("date",null),i.set("countdown",r.A([{key:"days",value:t.days()},{key:"hours",value:t.hours()},{key:"minutes",value:t.minutes()},{key:"seconds",value:t.seconds()}])),setTimeout(e,1e3)}())},changeState:function(t){var n=this;["before","during","after"].forEach(function(e){n.set(e+"Event",t===e)}),t!==this.get("eventState")&&(this.set("eventState",t),this.set("controller.needsRender",!0)),this.resize()},actions:{changeState:function(e){this.changeState(e)}}})}),define("portal/views/experience/view_branching",["ember.hapyak","portal/views/viewer_playlist","portal/views/annotationList","portal/views/addons/playlist_addon"],function(e,t,n,i,r){"use strict";return e.View.extend({layoutName:"experience/view_experience_layout",templateName:e.computed(function(){return this.get("experienceTemplate")}),ViewerPlaylistView:t,AnnotationListView:n,PlaylistAddonView:i,annotationsReady:!1,playlist:null,assetTitle:"",playlistReady:!1,playerReady:!1,hapyak_project:e.computed.alias("parentView.controller.hapyak_project"),hapyak_start_time:e.computed.alias("parentView.controller.hapyak_start_time"),hapyak_asset_url:e.computed.alias("parentView.controller.hapyak_asset_url"),firstLoad:!0,playlistLoaded:e.computed("playlistReady","controller.hidePlaylist",function(){return!!this.get("controller.hidePlaylist")||this.get("playlistReady")}),everythingReady:e.computed("playerReady","playlistLoaded",function(){if(!this.get("firstLoad")||this.get("playerReady")&&this.get("playlistLoaded"))return this.set("firstLoad",!1),!0}),willInsertElement:function(){var e,t=this.get("controller.content.data.configuration");for(e in t)this.set(e,t[e])}})}),define("portal/views/experience/view_single_video_landing_page",["ember.hapyak","portal/views/viewer_playlist","portal/views/annotationList","portal/views/addons/playlist_addon"],function(e,t,n,i,r){"use strict";return e.View.extend({layoutName:"experience/view_experience_layout",templateName:e.computed(function(){return this.get("experienceTemplate")}),ViewerPlaylistView:t,AnnotationListView:n,PlaylistAddonView:i,annotationsReady:!1,playlist:null,assetTitle:"",playlistReady:!1,playerReady:!1,hapyak_project:e.computed.alias("parentView.controller.hapyak_project"),hapyak_start_time:e.computed.alias("parentView.controller.hapyak_start_time"),hapyak_asset_url:e.computed.alias("parentView.controller.hapyak_asset_url"),firstLoad:!0,playlistLoaded:e.computed("playlistReady","controller.hidePlaylist",function(){return!!this.get("controller.hidePlaylist")||this.get("playlistReady")}),everythingReady:e.computed("playerReady","playlistLoaded",function(){if(!this.get("firstLoad")||this.get("playerReady")&&this.get("playlistLoaded"))return this.set("firstLoad",!1),!0}),willInsertElement:function(){var e,t=this.get("controller.content.data.configuration");for(e in t)this.set(e,t[e])}})}),define("portal/views/experience/view_off_video_chapters",["ember.hapyak","portal/views/viewer_playlist","portal/views/annotationList","portal/views/addons/playlist_addon","utils"],function(e,t,n,i,r,a){"use strict";return e.View.extend({layoutName:"experience/view_experience_layout",templateName:e.computed(function(){return this.get("experienceTemplate")}),ViewerPlaylistView:t,AnnotationListView:n,PlaylistAddonView:i,annotationsReady:!1,playlist:null,assetTitle:"",playlistReady:!1,playerReady:!1,hapyak_project:e.computed.alias("parentView.controller.hapyak_project"),hapyak_start_time:e.computed.alias("parentView.controller.hapyak_start_time"),hapyak_asset_url:e.computed.alias("parentView.controller.hapyak_asset_url"),firstLoad:!0,playlistLoaded:e.computed("playlistReady","controller.hidePlaylist",function(){return!!this.get("controller.hidePlaylist")||this.get("playlistReady")}),everythingReady:e.computed("playerReady","playlistLoaded",function(){var e=!this.get("firstLoad")||this.get("playerReady")&&this.get("playlistLoaded");if(this.get("playlistLoaded")&&this.get("playerReady")&&this.get("controller").setupExternalContent(this.get("playlist"),this.get("playlistViewer.instance")),r.dispatchEvent("resize"),e)return this.set("firstLoad",!1),!0}),willInsertElement:function(){var e,t=this.get("controller.content.data.configuration"),n=window.matchMedia("(max-width: 600px)"),i=this;for(e in t)i.set(e,t[e]);this.onWindowResizeHandler=function(){var e;"true"!==document.documentElement.dataset.fs&&(e=document.getElementById("sideBarContainer"))&&(e=e.offsetHeight*(n.matches?2:1),parent.postMessage(JSON.stringet("controller.embeddedExperienceId"),height:e}),"*"))},$(window).bind("resize",this.onWindowResizeHandler)},willDestroyElement:function(){$(window).unbind("resize",this.onWindowResizeHandler)}})}),define("portal/views/experience/view_review",["ember.hapyak","portal/views/viewer_playlisons/playlist_addon"],function(e,t,n,i){"use strict";return e.View.extend({layoutName:"experience/view_experience_layout",templateName:e.computed(function(){return this.get("experienceTemplate")}),ViewerPlaylistView:t,AnnotationListView:n,PlaylistAddonView:i,annotationsReady:!1,playlist:null,assetTitle:"",playlistReady:!1,playerReady:!1,hapyak_project:e.computed.alias("parentView.controller.hapyak_project"),hapyak_start_time:e.computed.alias("parentView.controller.hapyak_start_time"),hapyak_asset_url:e.computed.alias("parentView.controller.hapyak_asset_url"),firstLoad:!0,playlistLoaded:e.computed("playlistReady","controller.hidePlaylist",function(){return!!this.get("controller.hidePlaylist")||this.get("playlistReady")}),everythingReady:e.computed("playerReady","playlistLoaded",function(){if(!this.get("firstLoad")||this.get("playerReady")&&this.get("playlistLoaded"))return this.set("firstLoad",!1),this.setupCommentingSection(),!0}),willInsertElement:function(){var e,t=this.get("controller.content.data.configuration");for(e in t)this.set(e,t[e])},setupCommentingSection:function(){var e,t;window.disqus_config=function(){this.page&&(this.page.url=location.href)},e=document,(t=e.createElement("script")).src="https://hapyak-1.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}})}),define("portal/views/remote_asset_modal",["lodash.noconflict","logging","ember.hapyak","bootstrap.modal","portal/views/modal"],function(e,t,n,i,r,a){"use strict";return r.extend({classNames:["hapyak-new-modal remote-asset-modal"],templateName:"remoteAssetModal",title:n.computed.alias("parentView.modalTitle"),assetUrl:n.computed.alias("parentView.assetUrl"),downloadText:n.computed.alias("parentView.downloadText"),modalText:n.computed.alias("parentView.modalText"),button:n.computed(function(){return{confirm:this.get("parentView.modalConfirm")||"VIEW"}}),actions:{confirm:function(){var e=this.get("parentView.controller.play");this.$().modal("hide"),this.set("parentView.controller.modalOpen",!1),e&&"function"==typeof e&&e()},download:function(){window.open(this.get("assetUrl")),this.$().modal("hide"),this.set("parentView.controller.modalOpen",!1)}},isDisabled:!1})}),define("portal/views/viewer_modal",["lodash.noconflict","logging","ember.hapyak","bootstrap.modal","portal/views/modal"],function(e,t,n,i,r,a){"use{return this.get("controller.modalOptions.title")||"Error"}),message:n.computed(function(){return this.get("controller.modalOptions.message")||"An Error Occurred. Please refresh and try again."}),button:n.computed(function(){return{confirm:this.get("controller.modalOptions.confirm")||"OK"}}),actions:{confirm:function(){"function"==typeof this.get("controller.modalOptions.confirmCallback")&&this.get("controller.modalOptions.confirmCallback")(),n.$(".modal-backdrop").remove(),this.$().modal("hide"),this.destroy()}}})}),define("portal/views/acknowledge_cookie_modal",["ember.hapyak","bootstrap.modal","portal/views/modal"],function(e,t,n,i){"use strict";return n.extend({classNames:["hapyak-new-modal acknowledge-cookie-modal"],templateName:"acknowledgeCookieModal",title:"PLEASE ENABLred to view this slide sync experience. Please enable cookies on your browser and reload the page.",modalIcon:"/img/warning-icon-blue.svg",actions:{confirm:function(){window.location.reload(!0)}},isDisabled:!1,button:{confirm:"RELOAD"}})}),define("portal/viewsExperience",["lodash.noconflict","portal/views/application_experience","portal/views/experience/view_slidesync","portal/views/experience/view_video_only","portal/views/experience/view_lesson","portal/views/experience/view_live","portal/views/experience/view_branching","portal/views/experience/view_single_video_landing_page","portal/views/experience/view_off_video_chapters","portal/views/experience/view_review","portal/views/addons/slider","portal/views/addons/slidesync_viewer","portal/views/addons/playlist_addon","portal/views/remote_asset_modal","portal/views/viewer_modal","portal/views/acknowledge_cookie_modal"],function(t,n,i,r,a,o,s,l,c,d,u,p,h,f,m,v,e){"use strict";return{attachTo:function(e){t.extend(e,{ApplicationView:n,ExperienceViewSlidesyncView:i,ExperienceViewVideoOnlyView:r,ExperienceViewLessonView:a,ExperienceViewLiveView:o,ExperienceViewBranchingView:s,ExperienceViewSingleVideoLandingPageView:l,ExperienceViewOffVideoChaptersView:c,ExperienceViewReviewView:d,AddonsSliderView:u,AddonsSlidesyncViewerView:p,AddonsPlaylistAddonView:h,RemoteAssetModalView:f,ViewerModalView:m,AcknowledgeCookieModalView:v})}}}),define("vendor/text",["module"],function(e){"use strict";var r,a,o,s,i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeo:/,""),u=['\\])/g,"\\$1").replac,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=i[t];try{e=new ActiveXObject(n)}catch(e){}if(e){i=[n];break}}return e},parseName:function(e){var t,n,i=!1,r=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!a||1<r)?(t=e.substring(0,r),n=e.substring(r+1)):t=e,-1!==(r=(a=n||t).indexOf("!"))&&(i="strip"===a.substring(r+1),a=a.substring(0,r),n?n=a:t=a),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^);ret==a.inon(e){m.fi,a=e.ext?"."+e.ext:"",o=e.moduleName+a,s=t.toUrl(e.moduleName+a)+".js";m.load(o,t,function(e){function t(e){return i(s,e)}t.asModule=function(e,t){return i.asModule(e,s,t)},m.write(n,o,t,r)},r)}};return"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(r=require.nodeRequire("fs"),m.get=function(e,t,n){try{var i=r.readFileSync(e,"utf8");t(i="\ufeff"===i[0]?i.substring(1):i)}catch(e){n&&n(e)}}):"xhr"===f.env||!f.env&&m.createXhr()?m.get=function(n,i,r,e){var t,a=m.createXhr();if(a.open("GET",n,!0),e)for(t in e)e.hasOwnProperty(t)&&a.setRequestHeader(t.toLowerCase(),e[t]);f.onXhr&&f.onXhr(a,n),a.onreadystatechange=function(e){var t;4===a.readyState&&(399<(t=a.status||0)&&t<600?((t=new Error(ngBuffer,null!==(i=(i=a.readLine())&&i.length()&&65279===i.charAt(0)?i.substring(1):i)&&n.append(i);null!==(i=a.readLine());)n.append(r),n.append(i);e=String(n.toString())}finally{a.close()}t(e)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Componentt(n,"utf-8",n.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),i.readString(n.available(),r),i.close(),n.close(),e(r.value)}catch(e){throw new Error((t&&t.path||"")+": "+e)}}),m}),define("vendor/text!portal/templates/components/viewer-playlist-item.hbs",[],function(){return'<div class="video-info" {{action "goTo"}}>\n    {{#if currentlyPlaying}}\n        <div class="currentlyPlaying">\n            Now Playing\n            <i class="fa fa-play"></i>\n        </div>\n    {{/if}}\n\n    {{#unless currentlyPlaying}}\n        <div class="hover-info">\n            <div class="project-title">\n                {{project.title}}\n            </div>\n\n            <img class="outline-play-button" {{bind-attr src=playButton }}alt="Play playlist item.">\n\n            <div class="index-over-total">\n                {{indexPlusOne}}/{{numProjects}}\n            </div>\n            <div class="video-duration">\n                {{duration}}\n            </div>\n        </div>\n    {{/unless}}\n</div>\n'}),define("vendor/text!portal/templates/components/external-content.hbs",[],function(){return'<div id="external-content">\n    <div id="external-content-sections">\n        {{#each section in sectionsArray}}\n            <div {{bind-attr class=":external-content-section section.selected:selected"}} {{action selectSection section.name}}>{{section.name}}</div>\n        {{/each}}\n    </div>\n\n    <div id="external-content-content">\n        {{#if sections.chapters}}\n            {{#if sections.chapters.selected}}\n                <div id="external-content-list">\n                    {{#each chapter in sections.chapters.content}}\n                        <div {{bind-attr id="chapter.annotationId"}} class="external-content-item" {{action goToChapter chapter}}>\n                            <span class="external-content-item-left">{{chapter.properties.text}}</span>\n                            <span class="external-content-item-right">{{chapter.time}}</span>\n                        </div>\n                    {{/each}}\n                </div>\n            {{/if}}\n        {{/if}}\n\n        {{#if sections.playlist}}\n            {{#if sections.playlist.selected}}\n                <div id="external-content-list">\n                    {{#each project in sections.playlist.content}}\n                        <div {{bind-attr class=":external-content-item :large project.current:selected"}} {{action goToProject project}}>\n                            <span class="external-content-item-left">{{project.data.title}}</span>\n                            {{#if project.video.image}}\n                                <img class="external-content-item-right" {{bind-attr src="project.video.image"}}>\n                            {{/if}}\n                            {{#unless project.video.image}}\n                                <img class="external-content-item-right" src="/img/video-placeholder.jpg">\n                            {{/unless}}\n                        </div>\n                    {{/each}}\n                </div>\n            {{/if}}\n        {{/if}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/components/off-video-external-chapters.hbs",[],function(){return'        {{#if sections.chapters}}\n            {{#if sections.chapters.selected}}\n                <div id="chapterMenuImage">\n                    <h1 id="chapter-title">{{currentProjectTitle}}</h1>\n                </div>\n                <ul id="chapter-container">\n                {{#each chapter in sections.chapters.content}}\n                    <li {{bind-attr id="chapter.annotationId"}} class="chapter" {{action goToChapter chapter}}>\n                        <div class="chapter-cell">{{chapter.properties.text}}</div>\n                        <div class="chapter-cell-time">{{chapter.time}}</div>\n                    </li>\n                {{/each}}\n                </ul>\n            {{/if}}\n        {{/if}}\n'}),define("vendor/text!portal/templates/components/grading-addon.hbs",[],function(){return'\n<div id="hy-grading-addon" data-tooltip-position="top" {{bind-attr data-tooltip-content="view.tooltip"}} {{action "submitGrade" target=view}} {{bind-attr class="view.enableGrading view.viewerMode:showButton"}}>\n    <div id="submit-grade-button">{{view.submitGradeButtonText}}</div>\n</div>\n'}),define("vendor/text!portal/templates/experience.hbs",[],function(){return"\n{{outlet}}\n"}),define("vendor/text!portal/templates/experience/view_experience_layout.hbs",[],function(){return'<div id="landing-page-container" {{bind-attr style="brandingBackground"}} {{bind-attr class="ltiAuthorSetup:lti embeddedExperience:embeddedExperience"}}>\n    <div id="experience-preloader-holder" {{bind-attr class="view.everythingReady:inactive:active"}}>\n        <div id="experience-preloader" class="materialize">\n            {{preloader-component}}\n        </div>\n    </div>\n\n    {{#if cookieComplianceBanner}}\n        <div id="cookie-banner" {{bind-attr class="cookieComplianceBanner:active:inactive"}}>\n            <div class="cookie-banner-text">\n                This page requires the use of cookies.  By continuing to view this page, you are agreeing to our use of cookies.\n            </div>\n            <div id="dismiss-cookie-banner" {{action "dismissComplianceBanner" "cookieBanner"}}>\n                <a href="#"> Dismiss </a> X\n            </div>\n        </div>\n    {{/if}}\n\n    {{#if brandingEnabled}}\n        <div id="branding-header-container">\n            {{{brandingHeader}}}\n        </div>\n    {{/if}}\n    \n    <div id="social-media-buttons-container">\n        {{#if hasSocial}}\n            <div class="social-media-buttons">\n                <h2>Share this:</h2>\n                {{#if twitterActive}}\n                    <div class="social-media-button twitter" {{action "openSocial" "twitterUrl"}}><i class="fa fa-twitter" aria-hidden="true"></i></div>\n                {{/if}}\n                {{#if facebookActive}}\n                    <div class="social-media-button facebook" {{action "openSocial" "facebookUrl"}}><i class="fa fa-facebook" aria-hidden="true"></i></div>\n                {{/if}}\n                {{#if linkedinActive}}\n                    <div class="social-media-button linkedin" {{action "openSocial" "linkedInUrl"}}><i class="fa fa-linkedin" aria-hidden="true"></i></div>\n                {{/if}}\n                {{#if emailActive}}\n                    <div class="social-media-button email" {{action "openSocial" "emailUrl"}}><i class="fa fa-envelope" aria-hidden="true"></i></div>\n                {{/if}}\n            </div>\n        {{/if}}\n    </div>\n\n    {{#if ltiAuthorSetup}}\n        {{#if returnLink}}\n            <a {{bind-attr href=returnLink}} class="return-btn">\n                BACK\n            </a>\n        {{/if}}\n    {{/if}}\n\n    {{yield}}\n\n    {{#if brandingEnabled}}\n        <div id="branding-footer-container">\n            {{{brandingFooter}}}\n        </div>\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/experience/view_slidesync.hbs",[],function(){return'\n<div id="hapyak-page">\n    <div {{bind-attr class=":experience-layout view.noSlides:no-slides"}}>\n        <div class="row">\n            <div id="slider-addon">\n                {{view view.SliderView viewerMode=true everythingReady=view.everythingReady}}\n            </div>\n        </div>\n\n        <div class="row">\n            <div id="current-project-title">\n                {{currentProjectTitle}}\n            </div>\n        </div>\n\n        <div id="sizing-container">\n            <div id="sizing-container-left-side" class="sizing-container-left-side hapyak-editor">\n                <div id="experience-video-sizing-container">\n                    {{view view.ViewerPlaylistView id="hapyak-editor-iframe"}}\n                </div>\n\n                <div id="hapyak-experience-playlist-container" class="slidesync-playlist" {{bind-attr class=":row hidePlaylist:hidePlaylist"}}>\n                    {{view view.PlaylistAddonView viewerMode=true id="hy-playlist-container" class="hy-playlist-viewer"}}\n                </div>\n            </div>\n            <div id="sizing-container-right-side" class="sizing-container-right-side slidesync-addon">\n                {{#if view.playerReady}}\n                    {{#if view.playlistLoaded}}\n                        {{view view.SlidesyncViewerView viewerMode=true}}\n                    {{/if}}\n                {{/if}}\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/experience/view_slidesync_external_chapters.hbs",[],function(){return'\n<div id="hapyak-page" class="no-margin">\n    <div class="experience-layout slidesync-external-chapters">\n        <div id="slider-addon" class="hidden">\n            {{view view.SliderView viewerMode=true}}\n        </div>\n\n        <div id="experience-top-row">\n            <img id="experience-top-row-logo" {{bind-attr src=logo}}/>\n            <div id="experience-top-row-experience-name">\n                {{name}}\n            </div>\n            <div id="experience-top-row-project-title">\n                {{currentProjectTitle}}\n            </div>\n        </div>\n\n        <div id="sizing-container">\n            <div id="sizing-container-left-side" class="sizing-container-left-side hapyak-editor">\n                <div id="experience-video-sizing-container">\n                    {{view view.ViewerPlaylistView id="hapyak-editor-iframe"}}\n                    <div id="transition-screen">\n                        <img id="transition-image" {{bind-attr src="transitionImageUrl"}}>\n                    </div>\n                </div>\n\n                {{#if hasExternalContent}}\n                    {{#if viewerPlaylist}}\n                        {{#if playlistInstance}}\n                            {{#if view.playerReady}}\n                                {{#if view.playlistLoaded}}\n                                    {{external-content viewerPlaylist=viewerPlaylist playlistInstance=playlistInstance currentProjectIndex=currentProjectIndex}}\n                                {{/if}}\n                            {{/if}}\n                        {{/if}}\n                    {{/if}}\n                {{/if}}\n            </div>\n            <div id="sizing-container-right-side" class="sizing-container-right-side slidesync-addon">\n                {{#if view.playerReady}}\n                    {{#if view.playlistLoaded}}\n                        {{view view.SlidesyncViewerView viewerMode=true}}\n                    {{/if}}\n                {{/if}}\n            </div>\n        </div>\n\n        <div id="hapyak-experience-playlist-container" {{bind-attr class=":hidden hidePlaylist:hidePlaylist"}}>\n            {{view view.PlaylistAddonView viewerMode=true id="hy-playlist-container" class="hy-playlist-viewer"}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/experience/view_slidesync_full_width_playlist.hbs",[],function(){return'\n<div id="hapyak-page">\n    <div {{bind-attr class=":experience-layout view.noSlides:no-slides"}}>\n\n        <div class="row">\n            <div id="slider-addon">\n                {{view view.SliderView viewerMode=true}}\n            </div>\n        </div>\n\n        <div class="row">\n            <div id="current-project-title">\n                {{currentProjectTitle}}\n            </div>\n        </div>\n\n        <div id="sizing-container">\n            <div id="sizing-container-left-side" class="sizing-container-left-side hapyak-editor">\n                <div id="experience-video-sizing-container">\n                    {{view view.ViewerPlaylistView id="hapyak-editor-iframe"}}\n                </div>\n            </div>\n            <div id="sizing-container-right-side" class="sizing-container-right-side slidesync-addon">\n                {{#if view.playerReady}}\n                    {{#if view.playlistLoaded}}\n                        {{view view.SlidesyncViewerView viewerMode=true }}\n                    {{/if}}\n                {{/if}}\n            </div>\n        </div>\n\n        <div id="hapyak-experience-playlist-container" class="slidesync-playlist" {{bind-attr class=":row hidePlaylist:hidePlaylist"}}>\n            {{view view.PlaylistAddonView viewerMode=true id="hy-playlist-container" class="hy-playlist-viewer"}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/experience/view_slidesync_video_only.hbs",[],function(){return'\n<div id="hapyak-page">\n    <div {{bind-attr class=":experience-layout view.noSlides:no-slides"}}>\n\n        <div class="row">\n            <div id="slider-addon">\n                {{view view.SliderView viewerMode=true}}\n            </div>\n        </div>\n\n        <div class="row">\n            <div id="current-project-title">\n                {{currentProjectTitle}}\n            </div>\n        </div>\n\n        <div id="sizing-container">\n            <div id="sizing-container-left-side" class="sizing-container-left-side hapyak-editor">\n                <div id="experience-video-sizing-container">\n                    {{view view.ViewerPlaylistView id="hapyak-editor-iframe"}}\n                </div>\n            </div>\n            <div id="sizing-container-right-side" class="sizing-container-right-side slidesync-addon">\n                {{#if view.playerReady}}\n                    {{#if view.playlistLoaded}}\n                        {{view view.SlidesyncViewerView viewerMode=true }}\n                    {{/if}}\n                {{/if}}\n            </div>\n        </div>\n\n        <div id="hapyak-experience-playlist-container" class="slidesync-playlist" {{bind-attr class=":row hidePlaylist:hidePlaylist"}}>\n            {{view view.PlaylistAddonView viewerMode=true id="hy-playlist-container" class="hy-playlist-viewer"}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/experience/view_video_only.hbs",[],function(){return'<div id="hapyak-page">\n    <div class="experience-layout landing-page-sizing-container">\n        <div class="row">\n            <div id="current-project-title">\n                {{currentProjectTitle}}\n            </div>\n        </div>\n\n        <div id="experience-video-sizing-container">\n            {{view view.ViewerPlaylistView id="hapyak-editor-iframe"}}\n            <div id="transition-screen">\n                <img id="transition-image" {{bind-attr src="transitionImageUrl"}}>\n            </div>\n        </div>\n\n        <div id="hapyak-experience-playlist-container" {{bind-attr class=":row hidePlaylist:hidePlaylist"}}>\n            {{view view.PlaylistAddonView viewerMode=true id="hy-playlist-container" class="hy-playlist-viewer"}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/experience/view_lesson.hbs",[],function(){return'<div id="hapyak-page">\n\n    <div class="experience-layout">\n        {{#if view.editorIframe}}\n            <div class="row lesson-title-area">\n                <div id="experience-title" class="col-sm-10 no-padding">\n                    {{name}}\n                </div>\n                {{grading-addon\n                    class="col-sm-2 no-padding"\n                    viewerMode=true\n                    editorReady=view.editorReady\n                    playerReady=view.playerReady\n                    editorIframe=view.editorIframe\n                    layoutId=layout\n                    layoutSpecificAddons=layoutSpecificAddons\n                    gradingAddonReady=gradingAddonReady\n                    openModal=\'open\'\n                    previewMode=ltiAuthorSetup\n                }}\n            </div>\n        {{/if}}\n\n        <div id="experience-video-sizing-container">\n            {{#view view.ViewerPlaylistView id="hapyak-editor-iframe"}}{{/view}}\n        </div>\n\n        <div id="hapyak-experience-playlist-container" {{bind-attr class=":row hidePlaylist:hidePlaylist"}}>\n            {{view view.PlaylistAddonView viewerMode=true id="hy-playlist-container" class="hy-playlist-viewer"}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/experience/view_live.hbs",[],function(){return'\n<div id="hapyak-page">\n    <div {{bind-attr class=":experience-layout :viewer :live-slidesync view.noSlides:no-slides"}}>\n        {{#if view.editorPreview}}\n            <div id="live-layout-editor-preview-controls" class="materialize">\n                <div>Preview Event State:</div>\n                <btn {{bind-attr class=":btn-flat view.beforeEvent: active"}} {{action "changeState" "before" target=view}}>Before</btn>\n                <btn {{bind-attr class=":btn-flat view.duringEvent: active"}} {{action "changeState" "during" target=view}}>During</btn>\n                <btn {{bind-attr class=":btn-flat view.afterEvent: active"}} {{action "changeState" "after" target=view}}>After</btn>\n            </div>\n        {{/if}}\n\n        {{#if view.duringEvent}}\n            <div id="during-event-container" {{bind-attr class="view.duringEvent:active"}}>\n                <div id="slider-addon">\n                    {{view view.SliderView viewerMode=true}}\n                </div>\n\n                <div id="sizing-container">\n                    <div id="sizing-container-left-side" class="sizing-container-left-side hapyak-editor">\n                        <div id="experience-video-sizing-container" class="no-max-width">\n                            {{view view.ViewerPlaylistView id="hapyak-editor-iframe"}}\n                        </div>\n                    </div>\n\n                    <div id="sizing-container-right-side" class="sizing-container-right-side live-slides-viewer">\n                        {{#unless view.noSlides}}\n                            {{#unless view.currentSlide.isUrl}}\n                                {{#unless view.currentSlide.link}}\n                                    <img {{bind-attr src=view.currentSlide.url}} width="100%">\n                                {{/unless}}\n                                {{#if view.currentSlide.link}}\n                                    <a {{bind-attr href=view.currentSlide.link}} target="_blank">\n                                        <img {{bind-attr src=view.currentSlide.url}} width="100%">\n                                    </a>\n                                {{/if}}\n                            {{/unless}}\n                            {{#if view.currentSlide.isUrl}}\n                                <iframe id="live-iframe" {{bind-attr src="view.currentSlide.url"}} frameborder="0"></iframe>\n                            {{/if}}\n                        {{/unless}}\n                    </div>\n                </div>\n            </div>\n        {{/if}}\n\n        {{#unless view.duringEvent}}\n            {{#unless view.afterEvent}}\n                {{#if view.date}}\n                    {{#if view.countdown}}\n                        <div class="live-countdown">\n                            {{#each time in view.countdown}}\n                                <div class="time-unit">\n                                    <div class="time-value">{{time.value}}</div>\n                                    <div class="time-key">{{time.key}}</div>\n                                </div>\n                            {{/each}}\n                        </div>\n                    {{/if}}\n                    <div class="live-date">{{view.date}}</div>\n                {{/if}}\n                <div class="live-message">{{view.beforeEventMessage}}</div>\n            {{/unless}}\n        {{/unless}}\n\n        {{#if view.afterEvent}}\n            <div class="live-message">{{view.afterEventMessage}}</div>\n        {{/if}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/experience/view_branching.hbs",[],function(){return'<div id="hapyak-page">\n    <div class="experience-layout landing-page-sizing-container">\n        <div class="row">\n            <div id="current-project-title">\n                {{currentProjectTitle}}\n            </div>\n        </div>\n\n        <div id="experience-video-sizing-container">\n            {{view view.ViewerPlaylistView id="hapyak-editor-iframe"}}\n            <div id="transition-screen">\n                <img id="transition-image" {{bind-attr src="transitionImageUrl"}}>\n            </div>\n        </div>\n\n        <div id="hapyak-experience-playlist-container" {{bind-attr class=":row hidePlaylist:hidePlaylist"}}>\n            {{view view.PlaylistAddonView viewerMode=true id="hy-playlist-container" class="hy-playlist-viewer"}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/experience/view_single_video_landing_page.hbs",[],function(){return'<div id="hapyak-page">\n    <div class="experience-layout landing-page-sizing-container">\n        <div class="row">\n            <div id="current-project-title" class="title-sizing-container">\n                {{currentProjectTitle}}\n            </div>\n        </div>\n\n        <div>\n            <div id="sizing-container-left-side" class="sizing-container-left-side">\n                    {{#if hasExternalContent}}\n                        {{#if viewerPlaylist}}\n                            {{#if playlistInstance}}\n                                {{#if view.playerReady}}\n                                    {{#if view.playlistLoaded}}\n                                        <div>PlayList loaded</div>\n                                    {{/if}}\n                                {{/if}}\n                            {{/if}}\n                        {{/if}}\n                    {{/if}}\n            </div>\n\n            <div id="experience-video-sizing-container">\n                {{view view.ViewerPlaylistView id="hapyak-editor-iframe"}}\n                <div id="transition-screen">\n                    <img id="transition-image" {{bind-attr src="transitionImageUrl"}}>\n                </div>\n            </div>\n        </div>\n\n        <div id="hapyak-experience-playlist-container" class="row hidePlaylist playlist-sizing-container">\n            {{view view.PlaylistAddonView viewerMode=true id="hy-playlist-container" class="hy-playlist-viewer"}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/experience/view_off_video_chapters.hbs",[],function(){return'<div id="hapyak-page">\n    <div class="experience-layout landing-page-sizing-container">\n        <div {{bind-attr class=":wrapper-intrinsic-ratio :hapyak-external-chapters useLegacyStyles:legacy:new"}}>\n             <div id="widgetContainer">\n                <aside id="videoChapterContainer">\n                    {{#if hasExternalContent}}\n                        {{#if viewerPlaylist}}\n                            {{#if playlistInstance}}\n                                {{#if view.playerReady}}\n                                    {{#if view.playlistLoaded}}\n                                        {{off-video-external-chapters viewerPlaylist=viewerPlaylist playlistInstance=playlistInstance currentProjectIndex=currentProjectIndex currentProjectTitle=currentProjectTitle useLegacyStyles=useLegacyStyles}}\n                                    {{/if}}\n                                {{/if}}\n                            {{/if}}\n                        {{/if}}\n                    {{/if}}\n                    <div id="experience-video-sizing-container">\n                        {{view view.ViewerPlaylistView id="hapyak-editor-iframe"}}\n                    </div>\n                </aside>\n            </div>\n        </div>\n\n        <div id="hapyak-experience-playlist-container" class="row hidePlaylist playlist-sizing-container">\n            {{view view.PlaylistAddonView viewerMode=true id="hy-playlist-container" class="hy-playlist-viewer"}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/experience/view_review.hbs",[],function(){return'<div id="hapyak-page">\n    <div class="experience-layout">\n        <div class="row">\n            <div id="current-project-title">\n                {{currentProjectTitle}}\n            </div>\n        </div>\n\n        <div id="experience-video-sizing-container">\n            {{view view.ViewerPlaylistView id="hapyak-editor-iframe"}}\n            <div id="transition-screen">\n                <img id="transition-image" {{bind-attr src="transitionImageUrl"}}>\n            </div>\n        </div>\n\n        <div id="hapyak-experience-playlist-container" class="row hidePlaylist">\n            {{view view.PlaylistAddonView viewerMode=true id="hy-playlist-container" class="hy-playlist-viewer"}}\n        </div>\n\n        <div id="hapyak-commenting-section">\n            <div id="disqus_thread"></div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/addons/slider.hbs",[],function(){return'<link href="/css/vendor/bootstrap-slider.css" rel="stylesheet" type="text/css" />\n<div id="slider-container">\n  <input id="addon-slider" type="text" />\n</div>\n'}),define("vendor/text!portal/templates/addons/slidesync_viewer.hbs",[],function(){return'\n{{#unless view.currentImageAsDiv}}\n    {{#if view.currentImageUrl}}\n        <img {{bind-attr src=view.currentImageUrl}} id="slidesync-viewer-image" />\n    {{/if}}\n    {{#unless view.viewerMode}}\n        {{#unless view.currentImageUrl}}\n            <div id="slidesync-viewer-image-placeholder"></div>\n        {{/unless}}\n    {{/unless}}\n{{/unless}}\n\n{{#if view.currentImageAsDiv}}\n    {{#if view.currentImageUrl}}\n        <div {{bind-attr style=view.currentImageUrl}} id="slidesync-viewer-image-div"></div>\n    {{/if}}\n    {{#unless view.currentImageUrl}}\n        <div id="slidesync-viewer-image-placeholder"></div>\n    {{/unless}}\n{{/if}}\n'}),define("vendor/text!portal/templates/addons/playlist_addon_viewer.hbs",[],function(){return'<div id="hy-playlist">\n    <div id="prev-page" {{action "changePlaylistPage" -1 target="view"}}>\n        <img {{bind-attr src=view.leftArrowImg }} alt="Previous Page Arrow"/>\n    </div>\n\n    <div id="hy-playlist-item-container">\n        <div id="hy-playlist-sized-container">\n            <div id="hy-playlist-limit-container">\n                <div id="hy-playlist-items-outer">\n                    <div id="hy-playlist-items">\n                        {{#each project in view.projects}}{{!-- comments necessary to prevent spaces from entering DOM\n                         --}}{{viewer-playlist-item project=project index=_view.contentIndex currentProjectId=currentProjectId numProjects=view.projects.length}}{{!--\n                     --}}{{/each}}\n                    </div>\n                </div>\n            </div>\n            <div id="page-select-container" {{bind-attr class=":page-nav-container view.hasOnePage:inactive"}}>\n                {{#each page in view.pages}}\n                    <div {{bind-attr class=":page page.active:active"}} {{action "goToPlaylistPage" _view.contentIndex target="view"}}></div>\n                {{/each}}\n            </div>\n        </div>\n    </div>\n\n    <div id="next-page" {{action "changePlaylistPage" 1 target="view"}}>\n        <img {{bind-attr src=view.rightArrowImg }} alt="Next Page Arrow"/>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/application_experience.hbs",[],function(){return"\n{{#if experience.experienceLayoutView}}\n    {{#if experience.experienceTemplate}}\n        {{view experience.experienceLayoutView experienceTemplate=experience.experienceTemplate controller=experience}}\n    {{/if}}\n{{/if}}\n\n{{outlet modal}}\n"}),define("vendor/text!portal/templates/modal.hbs",[],function(){return'<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            {{#unless showPreloader}}\n                <button {{action "close" target="view"}} type="button" class="close" aria-hidden="true">\n                    <i class="material-icons" aria-hidden="true">close</i>\n                </button>\n            {{/unless}}\n            <h4 class="modal-title">{{view.title}}</h4>\n        </div>\n        <div class="modal-body">\n            {{#if showPreloader}}\n                <div class="materialize">{{preloader-component}}</div>\n            {{else}}\n                {{yield}}\n            {{/if}}\n        </div>\n        {{#if view.showButtons}}\n            <div class="modal-footer materialize">\n                {{#if view.allRequired}}\n                    <p class="text-muted pull-left">* All fields are required</p>\n                {{/if}}\n                {{#unless showPreloader}}\n                    {{#if view.button.dismiss}}\n                        <button {{action "close" target="view"}} type="button" class="waves-effect waves-light btn-flat">{{view.button.dismiss}}</button>\n                    {{/if}}\n                    <button {{action "confirm" target="view"}} type="button" class="waves-effect waves-light btn" {{bind-attr disabled="view.isDisabled"}}>{{view.button.confirm}}</button>\n                {{/unless}}\n            </div>\n        {{/if}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/remote_asset_modal.hbs",[],function(){return'<div class="modal-content">\n    {{#if view.modalText}}\n        <div class="new-modal-row modal-text">{{view.modalText}}</div>\n    {{/if}}\n    {{#if view.assetUrl}}\n        <div class="new-modal-row remote-asset">\n            <a {{action "download" target="view"}}>{{view.downloadText}}</a>\n        </div>\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/viewer_modal.hbs",[],function(){return"{{view.message}}\n"}),define("vendor/text!portal/templates/acknowledge_cookie_modal.hbs",[],function(){return'<div class="modal-content">\n    {{#if view.modalIcon}}\n        <div class="new-modal-row icon-row">\n            <img class="" {{bind-attr src=view.modalIcon}}></img>\n        </div>\n    {{/if}}\n    {{#if view.modalText}}\n        <div class="new-modal-row">{{view.modalText}}</div>\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/components/preloader-component.hbs",[],function(){return'<div class="preloader-wrapper big active">\n    <div class="spinner-layer spinner-blue">\n        <div class="circle-clipper left">\n            <div class="circle"></div>\n        </div><div class="gap-patch">\n            <div class="circle"></div>\n        </div><div class="circle-clipper right">\n            <div class="circle"></div>\n        </div>\n    </div>\n\n    <div class="spinner-layer spinner-red">\n        <div class="circle-clipper left">\n            <div class="circle"></div>\n        </div><div class="gap-patch">\n            <div class="circle"></div>\n        </div><div class="circle-clipper right">\n            <div class="circle"></div>\n        </div>\n    </div>\n\n    <div class="spinner-layer spinner-yellow">\n        <div class="circle-clipper left">\n            <div class="circle"></div>\n        </div><div class="gap-patch">\n            <div class="circle"></div>\n        </div><div class="circle-clipper right">\n            <div class="circle"></div>\n        </div>\n    </div>\n\n    <div class="spinner-layer spinner-green">\n        <div class="circle-clipper left">\n            <div class="circle"></div>\n        </div><div class="gap-patch">\n            <div class="circle"></div>\n        </div><div class="circle-clipper right">\n            <div class="circle"></div>\n        </div>\n    </div>\n</div>'}),define("portal/templatesExperience",["vendor/text!portal/templates/components/viewer-playlist-item.hbs","vendor/text!portal/templates/components/external-content.hbs","vendor/text!portal/templates/components/off-video-external-chapters.hbs","vendor/text!portal/templates/components/grading-addon.hbs","vendor/text!portal/templates/experience.hbs","vendor/text!portal/templates/experience/view_experience_layout.hbs","vendor/text!portal/templates/experience/view_slidesync.hbs","vendor/text!portal/templates/experience/view_slidesync_external_chapters.hbs","vendor/text!portal/templates/experience/view_slidesync_full_width_playlist.hbs","vendor/text!portal/templates/experience/view_slidesync_video_only.hbs","vendor/text!portal/templates/experience/view_video_only.hbs","vendor/text!portal/templates/experience/view_lesson.hbs","vendor/text!portal/templates/experience/view_live.hbs","vendor/text!portal/templates/experience/view_branching.hbs","vendor/text!portal/templates/experience/view_single_video_landing_page.hbs","vendor/text!portal/templates/experience/view_off_video_chapters.hbs","vendor/text!portal/templates/experience/view_review.hbs","vendor/text!portal/templates/addons/slider.hbs","vendor/text!portal/templates/addons/slidesync_viewer.hbs","vendor/text!portal/templates/addons/playlist_addon_viewer.hbs","vendor/text!portal/templates/application_experience.hbs","vendor/text!portal/templates/modal.hbs","vendor/text!portal/templates/remote_asset_modal.hbs","vendor/text!portal/templates/viewer_modal.hbs","vendor/text!portal/templates/acknowledge_cookie_modal.hbs","vendor/text!portal/templates/components/preloader-component.hbs","ember.hapyak"],function(e,t,n,i,r,a,o,s,l,c,d,u,p,h,f,m,v,g,y,b,w,E,k,x,C,_,T,S){"use strict";return T.TEMPLATES["components/viewer-playlist-item"]=T.Handlebars.compile(e),T.TEMPLATES["components/external-content"]=T.Handlebars.compile(t),T.TEMPLATES["components/off-video-external-chapters"]=T.Handlebars.compile(n),T.TEMPLATES["components/grading-addon"]=T.Handlebars.compile(i),T.TEMPLATES.experience=T.Handlebars.compile(r),T.TEMPLATES["experience/view_experience_layout"]=T.Handlebars.compile(a),T.TEMPLATES["experience/view_slidesync"]=T.Handlebars.compile(o),T.TEMPLATES["experience/view_slidesync_external_chapters"]=T.Handlebars.compile(s),T.TEMPLATES["experience/view_slidesync_full_width_playlist"]=T.Handlebars.compile(l),T.TEMPLATES["experience/view_slidesync_video_only"]=T.Handlebars.compile(c),T.TEMPLATES["experience/view_video_only"]=T.Handlebars.compile(d),T.TEMPLATES["experience/view_lesson"]=T.Handlebars.compile(u),T.TEMPLATES["experience/view_live"]=T.Handlebars.compile(p),T.TEMPLATES["experience/view_branching"]=T.Handlebars.compile(h),T.TEMPLATES["experience/view_single_video_landing_page"]=T.Handlebars.compile(f),T.TEMPLATES["experience/view_off_video_chapters"]=T.Handlebars.compile(m),T.TEMPLATES["experience/view_review"]=T.Handlebars.compile(v),T.TEMPLATES["addons/slider"]=T.Handlebars.compile(g),T.TEMPLATES["addons/slidesync_viewer"]=T.Handlebars.compile(y),T.TEMPLATES["addons/playlist_addon"]=T.Handlebars.compile(b),T.TEMPLATES.application=T.Handlebars.compile(w),T.TEMPLATES.modal=T.Handlebars.compile(E),T.TEMPLATES.remote_asset_modal=T.Handlebars.compile(k),T.TEMPLATES.viewer_modal=T.Handlebars.compile(x),T.TEMPLATES.acknowledge_cookie_modal=T.Handlebars.compile(C),T.TEMPLATES["components/preloader-component"]=T.Handlebars.compile(_),T}),window&&(window.HAPYAK_ASSETS=hapyak.assets,window.HAPYAK_ENV=hapyak.environment,window.HAPYAK_SRC_FILE=window.HAPYAK_ASSETS+"/js/hapyak"),define("app.portalExperience",["module","promise!configuration","lodash.noconflict","dao","ember.hapyak","portal/models","portal/controllersExperience","portal/routesExperience","portal/routerExperience","portal/componentsExperience","portal/viewsExperience","portal/templatesExperience"],function(e,t,n,i,r,a,o,s,l,c,d){var u,e=e.config(),p=e.rootUrl||"/portal";function h(){i.store.set("shutdown",!0),i.store.commit()}return window&&(window.HAPYAK_VERSION=e.version),(u=window.HapyakPortalApp=r.Application.create({LOG_TRANSITIONS:!!e.isDevEnv,ready:function(){this.inject("controller","isDevEnv","hapyak:dev"),this.inject("controller","provisioning","hapyak:provisioning"),this.inject("view","provisioning","hapyak:provisioning")}})).register("hapyak:dev",!!e.isDevEnv,{instantiate:!1,singleton:!0}),u.register("hapyak:provisioning",r.Object.create(t.provisioning),{instantiate:!1,singleton:!0}),a.attachTo(u),o.attachTo(u),s.attachTo(u),u.ApplicationRoute=u.ApplicationRoute.reopen({}),l.attachTo(u),u.Router.reopen({location:e.usePushState?"history":"hash",rootURL:p}),c.attachTo(u),d.attachTo(u),u.getController=function(e){return this.__container__.lookup("controller:"+r.String.decamelize(e))},u._=n,"onbeforeunload"in window?window.onbeforeunload=h:window.onunload=h,u}),window.CodeMirror=function(){"use strict";var i,b=/gecko\/\d/i.test(navigator.userAgent),x=/MSIE \d/.test(navigator.userAgent),U=x&&(null==document.documentMode||document.documentMode<8),W=x&&(null==document.documentMode||document.documentMode<9),k=/WebKit\//.test(navigator.userAgent),r=k&&/Qt\/\d+\.\d+/.test(navigator.userAgent),a=/Chrome\//.test(navigator.userAgent),u=/Opera\//.test(navigator.userAgent),$=/Apple Computer/.test(navigator.vendor),Y=/KHTML\//.test(navigator.userAgent),o=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),s=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),G=/PhantomJS/.test(navigator.userAgent),K=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Q=K||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),X=K||/Mac/.test(navigator.platform),l=/windows/i.test(navigator.platform),c=(c=u&&navigator.userAgent.match(/Version\/(\d*\.\d*)/))&&Number(c[1]),J=X&&(r||u&&(null==c||c<12.11)),Z=b||x&&!W,ee=!1,te=!1;function p(e,n){if(!(this instanceof p))return new p(e,n);for(var t in this.options=n=n||{},Vt)!n.hasOwnProperty(t)&&Vt.hasOwnProperty(t)&&(n[t]=Vt[t]);de(n);var i,r="string"==typeof n.value?0:n.value.first,e=this.display=function(e,t){var n={},i=n.input=z("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");k?i.style.width="1000px":i.setAttribute("wrap","off");K&&(i.style.border="1px solid black");i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),n.inputDiv=z("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=z("div",[z("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=z("div",[z("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=z("div",null,"CodeMirror-scrollbar-filler"),n.lineDiv=z("div"),n.selectionDiv=z("div",null,null,"position: relative; z-index: 1"),n.cursor=z("div","","CodeMirror-cursor"),n.otherCursor=z("div","","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=z("div",null,"CodeMirror-measure"),n.lineSpace=z("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=z("div",[z("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=z("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=z("div",null,null,"position: absolute; height: "+ti+"px; width: 1px;"),n.gutters=z("div",null,"CodeMirror-gutters"),n.lineGutter=null;var r=z("div",[n.sizer,n.heightForcer,n.gutters],null,"position: relative; min-height: 100%");n.scroller=z("div",[r],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=z("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.scroller],"CodeMirror"),U&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0);e.appendChild?e.appendChild(n.wrapper):e(n.wrapper);K&&(i.style.width="0px");k||(n.scroller.draggable=!0);Y?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):U&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px");return n.viewOffset=n.lastSizeC=0,n.showingFrom=n.showingTo=t,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new ii,n.draggingText=!1,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n}(e,r),r=(se(e.wrapper.CodeMirror=this),n.autofocus&&!Q&&_(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new ii},ae(t+=" CodeMirror-wrap"),n.value),a=(w(this,Dn)(this,r="string"==typeof r?new m(n.value,n.mode):r),x&&setTimeout(q(h,this,!0),20),this),o=a.display;function s(){a.state.focused&&setTimeout(q(_,a),0)}function l(){o.cachedCharWidth=o.cachedTextHeight=null,Pe(a),Fe(a,q(E,a))}function c(e){a.options.onDragEvent&&a.options.onDragEvent(a,$n(e))||Gn(e)}function d(){o.inaccurateSelection&&(o.prevInput="",o.inaccurateSelection=!1,o.input.value=a.getSelection(),si(o.input))}R(o.scroller,roller,"dblclick",x?w(a,function(e){var t=Ge(a,e);!t||Xe(a,e)||Ye(a.display)||N(e)}),Z||R(o.scroller,"contextmenu",function(e){pt(a,e)}),R(o.scroller,"scroll",function(){o.scroller.clientHeig"scroll",a))}),R(o.scrollbarV,"scroll",function(){o.scroller.clientHeight&&Je(a,o.scrollbarV.scrollTop)}),R(o.scrollbarH,"scroll",function(){o.scroller.clientHeight&&Ze(a,o.scrollbart(a,e)}),R(o.scroller,"DOMMouseScroll",function(e){nt(a,e)}),R(o.scrollbarH,"mousedown",s),R(o.scrollbarV,"mousedown",s),R(o.wrapper,"scroll",function(){o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),R(window,"resize",l),setTimeout(function e(){for(var t=o.wrapper.parentNode;t&&t!=document.body;t=t.parentNode);t?setTimeout(e,5e3):V(window,"resize",l)},5e3),R(o.input,"keyup",w(a,function(e){a.options.onKeyEvent&&a.options.onKeyEvent(a,$n(e))||16==e.keyCode&&(a.doc.sel.shift=!1)})),R(o.input,"input",q(Ue,a)),R(o.input,"keydown",w(a,lt)),R(o.input,"keypress",w(a,ct)),R(o.input,"focus",q(dt,a)),R(o.input,"blur",q(ut,a)),a.options.dragDrop&&(R(o.scroller,"dragstart",function(e){var t,n;e=e,Ye((t=a).display,e)||(n=t.getSelection(),e.dataTransfer.setData("Text",n),e.dataTransfer.setDragImage&&(n=z("img",null,null,"position: fixed; left: 0; top: 0;"),u&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),$&&(t.display.dragImg?n=t.display.dragImg:((t.display.dragImg=n).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",t.display.wrapper.appendChild(n))),e.dataTransfer.setDragImage(n,0,0roller,"dragenter",c),R(o.scroller,"dragover",c),R(o.scroller,"drop",w(a,Qe))),R(o.scroller,"paste",function(e){Ye(o,e)||(_(a),Ue(a))}),R(o.input,"paste",function(){a.state.pasteIncoming=!0,Ue(a)}),R(o.input,"cut",d),R(o.input,"copy",d),Y&&R(o.sizer,"mouseup",function(){document.activeElement==o.input&&o.input.blur(),_(a)});try{i=document.activeElement==e.input}catch(e){}i||n.autofocus&&!Q?setTimeout(q(dt,this),20):ut(this),w(th,jt);for(var t=0;t<Ft.length;++t)Ft[t](this)})()}function ne(e){e.doc.mode=p.getMode(e.options,e.doc.modeOption),e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Ee(e,100),e.state.modeGen++,e.curOp&&E(e)}functiheight&&D(e,t)})}function ae(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Pe(e)}function oe(e){se(e),E(e)}function se(e){var t=e.display.gutters,n=e.options.gutters;fi(t);for(var i=0;i<n.length;++i){var r=n[i],a=t.appendChild(z("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&((e.display.lineGutter=a).style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=i?"":"none"}function le(e,t){if(0==t.height)return 0;for(var n,i=t.text.length,r=t;n=an(r);){r=L(e,(a=n.find()).from.line);i+=a.from.ch-a.to.ch}for(r=t;n=on(r);)var a=n.find(),i=(i-=r.text.length-a.from.ch)+((r=L(e,a.to.line)).text.length-a.to.ch);return i}function ce(e){var n=e.display,i=e.doc;n.maxLine=L(i,i.first),n.maxLineLength=le(i,n.maxLine),n.maxLineChanged=!0,i.iter(function(e){var t=le(i,e);t>n.maxLineLength&&(n.maxLineLength=t,n.maxLine=e)})}function de(e){for(var t=!1,n=0;n<e.gutters.length;++n)"CodeMirror-linenumbers"==e.gutters[n]&&(e.lineNumbers?t=!0:e.gutters.splice(n--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function ue(e,t){var t=t+_e(e),t=(e.sizer.style.minHeight=e.heightForcer.style.top=t+"px",Math.max(t,e.scroller.scrollHeight)),n=e.scroller.scrollWidth>e.scroller.clientWidth,i=t>e.scroller.clientHeight;i?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=n?wi(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=t-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",n?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=i?wi(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",n&&i?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=wi(e.measure)+"px"):e.scrollbarFiller.style.display="",o&&0===wi(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=s?"18px":"12px")}function pe(e,t,n){var i=e.scroller.scrollTop,r=e.wrapper.clientHeight,n=("number"==typeof n?i=n:n&&(i=n.top,r=n.bottom-n.top),i=Math.floor(i-Ce(e)),Math.ceil(i+r));return{from:Nn(t,i),to:Nn(t,n)}}function he(e){var t=e.display;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=me(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutnable)for(var o=0,s=a.alignable;o<s.length;++o)s[o].style.left=r;e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function fe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function me(e){return B(e.scroller).left-B(e.sizer).left}function ve(e,t,n){for(var i,r=e.display.showingFrom,a=e.display.showingTo,o=pe(e.display,e.doc,n);function(e,t,n){var i=e.display,r=e.doc;if(i.wrapper.clientWidth){if(!(0==t.length&&n.from>i.showingFrom&&n.to<i.showingTo)){!function(e){var t,n,i;if(e.options.lineNumbers)return t=e.doc,t=fe(e.options,t.first+t.size-1),e=e.display,t.length!=e.lineNumChars?(n=(i=e.measure.appendChild(z("div",[z("div",t)],"CodeMirror-linenumber CodeMirror-gutter-elt"))).firstChild.offsetWidth,i=i.offsetWidth-n,e.lineGutter.style.width="",e.lineNumInnerWidth=Math.max(n,e.lineGutter.offsetWidth-i),e.lineNumWidth=e.lineNumInnerWidth+i,e.lineNumChars=e.lineNumInnerWidth?t.length:-1,e.lineGutter.style.width=e.lineNumWidth+"px",1):void 0}(e)||(t=[{from:r.first,to:r.first+r.size}]);var a=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px",o=(i.scrollbarH.style.left=e.options.fixedGutter?a:"0",1/0);if(e.options.lineNumbers)for(var s=0;s<t.length;++s)if(t[s].diff){o=t[s].from;break}var l=r.first+r.size,c=Math.max(n.from-e.options.viewportMargin,r.first),d=Math.min(l,n.to+e.options.viewportMargin);if(i.showingFrom<c&&c-i.showingFrom<20&&(c=Math.max(r.first,i.showingFrom)),i.showingTo>d&&i.showingTo-d<20&&(d=Math.min(l,i.showingTo)),te)for(c=O(sn(r,L(r,c)));d<l&&ln(r,L(r,d));)++d;var u=[{from:Math.max(i.showingFrom,r.first),to:Math.min(i.showingTo,l)}];if(u=u[0].from>=u[0].to?[]:function(e,t){for(var n=0,i=t.length||0;n<i;++n){for(var r=t[n],a=[],o=r.diff||0,s=0,l=e.length;s<l;++s){var c=e[s];r.to<=c.from&&r.diff?a.push({from:c.from+o,to:c.to+o}):r.to<=c.from||r.from>=c.to?a.push(c):(r.from>c.from&&a.push({from:c.from,to:r.from}),r.to<c.to&&a.push({from:r.to+o,to:c.to+o}))}e=a}return e}(u,t),te)for(s=0;s<u.length;++s)for(var p=u[s];h=on(L(r,p.to-1));){var h=h.find().from.line;if(!(h>p.from)){u.sp,s=0;s<u.length;++s)(p=u[s]).from<c&&(p.from=c),p.to>d&&(p.to=d),p.from>=p.to?u.splice(s--,1):f+=p.to-p.from;if(f!=d-c||c!=i.showingFrom||d!=i.showingTo){u.sort(function(e,t){return e.from-t.from});try{var m=document.activeElement}catch(e){}f<.7*(d-c)&&(i.lineDiv.style.display="none"),!function(l,e,t,c,d){var u=function(e){for(var t=e.display,n={},i={},r=t.gutters.firstChild,a=0;r;r=r.nextSibling,++a)n[e.options.gutters[a]]=r.offsetLeft,i[e.options.gutters[a]]=r.offsetWidth;return{fixedPos:me(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}(l),n=l.display,p=l.options.lineNumbers;c.length||k&&l.display.currentWheelTarget||fi(n.lineDiv);var h=n.lineDiv,f=h.firstChild;function m(e){var t=e.nextSibling;return k&&X&&l.display.currentWheelTarget==e?(e.style.display="none",e.lineObj=null):e.parentNode.removeChild(e),t}var v=c.shift(),g=e;l.doc.iter(e,t,function(e){if(v&&v.to==g&&(v=c.shift()),ln(l.doc,e)){if(0!=e.height&&D(e,0),e.widgets&&f.previousSibling)for(var t=0;t<e.widgets.length;++t){var n,i;e.widgets[t].showIfHidden&&(n=f.previousSibling,/pre/i.test(n.nodeName)&&(i=z("div",null,null,"position: relative"),n.parentNode.replaceChild(i,n),i.appendChild(n),n=i),i=n.appendChild(z("div",[e.widgets[t].node],"CodeMirror-linewidget")),ye(e.widgets[t],i,n,u))}}else if(v&&v.from<=g&&v.to>g){for(;f.lineObj!=e;)f=m(f);p&&d<=g&&f.lineNumber&&mi(f.lineNumber,fe(l.options,g)),f=f.nextSibling}else{if(e.widgets)for(var r,a=0,o=f;o&&a<20;++a,o=o.nextSibling)if(o.lineObj==e&&/div/i.test(o.nodeName)){r=o;break}var s=function(e,t,n,i,r){var a,o=wn(e,t),s=t.gutterMarkers,l=e.display;if(!(e.options.lineNumbers||s||t.bgClass||t.wrapClass||t.widgets))return o;if(r){for(var c,d=!(r.alignable=null),u=0,p=r.firstChild;p;p=c)if(c=p.nextSibling,/\bCodeMirror-linewidget\b/.test(p.className)){for(var h=0,f=!0;h<t.widgets.length;++h){var m=t.widgets[h],v=!1;if(m.above||(v=f,f=!1),m.node==p.firstChild){ye(m,p,r,i),++u,v&&r.insertBefore(o,p);break}}if(h==t.widgets.length){d=!1;break}}else r.removeChild(p);d&&u==t.widgets.length&&((a=r).className=t.wrapClass||"")}a||(a=z("div",null,t.wrapClass,"position: relative")).appendChild(o);t.bgClass&&a.insertBefore(z("div",null,t.bgClass+" CodeMirror-linebackground"),a.firstChild);if(e.options.lineNumbers||s){var g=a.insertBefore(z("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),a.firstChild);if(e.options.fixedGutter&&(a.alignable||(a.alignable=[])).push(g),!e.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(a.lineNumber=g.appendChild(z("div",fe(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.lineNumInnerWidth+"px"))),s)for(var y=0;y<e.options.gutters.length;++y){var b=e.options.gutters[y],w=s.hasOwnProperty(b)&&s[b];w&&g.appendChild(z("div",[w],"CodeMirror-gutter-elt","left: "+i.gutterLeft[b]+"px; width: "+i.gutterWidth[b]+"px"))}}U&&(a.style.zIndex=2);if(t.widgets&&a!=r)for(var h=0,E=t.widgets;h<E.length;++h){var k=z("div",[(m=E[h]).node],"CodeMirror-linewidget");ye(m,k,a,i),m.above?a.insertBefore(k,e.options.lineNumbers&&0!=t.height?g:o):a.appendChild(k),j(m,"redraw")}return a}(l,e,g,u,r);if(s!=r)h.insertBefore(s,f);else{for(;f!=r;)f=m(f);f=f.nextSibling}s.lineObj=e}++g});for(;f;)f=m(f)}(e,c,d,u,o),i.lineDiv.style.display="",m&&document.activeElement!=m&&m.offsetHeight&&m.focus();(c!=i.showingFrom||d!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight)&&(i.lastSizeC=i.wrapper.clientHeight),i.showingFrom=c,i.showingTo=d,Ee(e,100);for(var v,g=i.lineDiv.offsetTop,y=i.lineDiv.firstChild;y;y=y.nextSibling)if(y.lineObj){U?(b=y.offsetTop+y.offsetHeight,v=b-g,g=b):(b=B(y),v=b.bottom-b.top);var b,w=y.lineObj.height-v;if(v<2&&(v=Me(i)),.001<w||w<-.001){D(y.lineObj,v);var E=y.lineObj.widgets;if(E)for(s=0;s<E.length;++s)E[s].height=E[s].node.offsetHeight}}return ge(e),1}ge(e)}}else i.showingFrom=i.showingTo=r.first,i.viewOffset=0}(e,t,o)&&(i=!0,j(e,"update",e),e.display.showingFrom==r&&e.display.showingTo==a||j(e,"viewportChange",e,e.display.showingFrom,e.display.showingTo),be(e),ue(e.display,e.doc.height),n=n&&Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,"number"==typeof n?n:n.top),!((o=pe(e.display,e.doc,n)).from>=e.display.showingFrom&&o.to<=e.display.showingTo));)t=[];return i}function ge(e){var t=e.display.viewOffset=Rn(e,L(e.doc,e.display.showingFrom));e.display.mover.style.top=t+"px"}function ye(e,t,n,i){e.noHScroll&&((n.alignable||(n.alignable=[])).push(t),n=i.wrapperWidth,t.style.left=i.fixedPos+"px",e.coverGutter||(n-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=n+"px"),e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function be(e){var t,n=e.display,i=S(e.doc.sel.from,e.doc.sel.to);if(i||e.options.showCursorWhenSelecting?(b=(a=e).display,u=C(a,a.doc.sel.head,"div"),b.cursor.style.left=u.left+"px",b.cursor.style.top=u.top+"px",b.cursor.style.height=Math.max(0,u.bottom-u.top)*a.options.cursorHeight+"px",b.cursor.style.display="",u.other?(b.otherCursor.style.display="",b.otherCursor.style.left=u.other.left+"px",b.otherCursor.style.top=u.other.top+"px",b.otherCursor.style.height=.85*(u.other.bottom-u.other.top)+"px"):b.otherCursor.style.display="none"):n.cursor.style.display=n.otherCursor.style.display="none",i)n.selectionDiv.style.display="none";else{var r=e,a=r.display,o=r.doc,s=r.doc.sel,l=document.createDocumentFragment(),h=a.lineSpace.offsetWidth,f=function(e){return F(e.measure,z("pre",null,null,"text-align: left")).appendChild(z("span","x")).offsetLeft}(r.display);function m(e,t,n,i){l.appendChild(z("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+(t=t<0?0:t)+"px; width: "+(null==n?h-e:n)+"px; height: "+(i-t)+"px"))}function c(t,s,l,c){var n=L(o,t),d=n.text.length,u=c?1/0:-1/0;function p(e){return Le(r,T(t,e),"div",n)}return function(e,t,n,i){if(!e)return i(t,n,"ltr");for(var r=0;r<e.length;++r){var a=e[r];(a.from<n&&a.to>t||t==n&&a.to==t)&&i(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr")}}(M(n),s||0,null==l?d:l,function(e,t,n){var i,r,a,o=p(e);e==t?i=r=(a=o).left:(a=p(t-1),"rtl"==n&&(n=o,o=a,a=n),i=o.left,r=a.right),3<a.top-o.top&&(m(i,o.top,null,o.bottom),i=f,o.bottom<a.top&&m(i,o.bottom,null,a.top)),null==l&&t==d&&(r=h),null==s&&0==e&&(i=f),u=c?Math.min(a.top,u):Math.max(a.bottom,u),m(i=i<f+1?f:i,a.top,r-i,a.bottom)}),u}if(s.from.line==s.to.line)c(s.from.line,s.from.ch,s.to.ch);else{for(var d,u=L(o,s.from.line),p=u,v=[s.from.line,s.from.ch];g=on(p);){var g=g.find();if(v.push(g.from.ch,g.to.line,g.to.ch),g.to.line==s.to.line){v.push(s.to.ch),d=!0;break}p=L(o,g.to.line)}if(d)for(var y=0;y<v.length;y+=3)c(v[y],v[y+1],v[y+2]);else{var b=L(o,s.to.line);u=s.from.ch?c(s.from.line,s.from.ch,null,!1):Rn(r,u)-a.viewOffset,b=s.to.ch?c(s.to.line,an(b)?null:0,s.to.ch,!0):Rn(r,b)-a.viewOffset,u<b&&m(f,u,null,b)}}F(a.selectionDiv,l),a.selectionDiv.style.display=""}e.options.moveInputWithCursor&&(i=C(e,e.doc.sel.head,"div"),e=B(n.wrapper),t=B(n.lineDiv),n.inputDiv.style.top=Math.max(0,Math.min(n.wrapper.clientHeight-10,i.top+t.top-e.top))+"px",n.inputDiv.style.left=Math.max(0,Math.min(n.wrapper.clientWidth-10,i.left+t.left-e.left))+"px")}function we(e){var t,n;e.state.focused&&(t=e.display,clearInterval(t.blinker),n=!0,tibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate))}function Ee(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.showingTo&&e.state.highlight.set(t,q(ke,e))}function ke(r){var a,o,s,l,c=r.doc;c.frontier<c.first&&(c.frontier=c.first),c.frontier>=r.display.showingTo||(a=+new Date+r.options.workTime,o=Bt(c.mode,xe(r,c.frontier)),s=[],c.iter(c.frontier,Math.min(c.first+c.size,r.display.showingTo+500),function(e){if(c.frontier>=r.display.showingFrom){for(var t=e.styles,n=(e.styles=vn(r,e,o),!t||t.length!=e.styles.length),i=0;!n&&i<t.length;++i)n=t[i]!=e.styles[i];n&&(l&&l.end==c.frontier?l.end++:s.push(l={start:c.frontier,end:c.frontier+1})),e.stateAfter=Bt(c.mode,o)}else gn(r,e,o),e.stateAfter=c.frontier%5==0?Bt(c.mode,o):null;if(++c.frontier,+new Date>a)return Ee(r,r.options.workDelay),!0}),s.length&&w(r,function(){for(var e=0;e<s.length;++e)E(this,s[e].start,s[e].end)})())}function xe(n,i){var r,a,o=n.doc,s=n.display;return!o.mode.startState||(r=function(e,t){for(var n,i,r=e.doc,a=t,o=t-100;o<a;--a){if(a<=r.first)return r.first;var s=L(r,a-1);if(s.stateAfter)return a;s=ri(s.text,null,e.options.tabSize);(null==i||s<n)&&(i=a-1,n=s)}return i|r%5==0||r>=s.showingFrom&&r<s.showingTo;e.stateAfter=t?Bt(o.mode,a):null,++r}),a)}function Ce(e){return e.lineSpace.offsetTop}function _e(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Te(e,t,n,i){var r=-1;i=i||Ae(e,t);for(var a=n;;a+=r){var o=i[a];if(o)break;r<0&&0==a&&(r=1)}return{left:a<n?o.right:o.left,right:n<a?o.left:o.right,top:o.top,bottom:o.bottom}}function Se(e,t){for(var n=e.display.measureLineCache,i=0;i<n.length;++i){var r=n[i];if(r.text==t.text&&r.markedSpans==t.markedSpans&&e.display.scroller.clientWidth==r.width&&r.classes==t.textClass+"|"+t.bgClass+"|"+t.wrapClass)return r.measure}}function Ae(e,t){var n,i=Se(e,t);return i||(i=function(e,t){var n=e.display,i=ci(t.text.length),r=wn(e,t,i);if(x&&!U&&!e.options.lineWrapping&&100<r.childNodes.length){for(var a=document.createDocumentFragment(),o=r.childNodes.length,s=0,l=Math.ceil(o/10);s<l;++s){for(var c=z("div",null,null,"display: inline-block"),d=0;d<10&&o;++d)c.appendChild(r.firstChild),--o;a.appendChild(c)}r.appendChild(a)}F(n.measure,r);var u=B(n.lineDiv),p=[],h=ci(t.text.length),f=r.offsetHeight;W&&n.measure.first!=r&&F(n.measure,r);for(s=0;s<i.length;++s)if(E=i[s]){for(var m=B(E),v=Math.max(0,m.top-u.top),g=Math.min(m.bottom-u.top,f),d=0;d<p.length;d+=2){var y=p[d],b=p[d+1];if(!(g<y||b<v)&&(y<=v&&g<=b||v<=y&&b<=g||Math.min(g,b)-Math.max(v,y)>=g-v>>1)){p[d]=Math.min(v,y),p[d+1]=Math.max(g,b);break}}d==p.length&&p.push(v,g);var w=m.right;E.measureRight&&(w=B(E.measureRight).left),h[s]={left:m.left-u.left,right:w-u.left,top:d}}for(var E,s=0;s<h.length;++s){var k;(E=h[s])&&(k=E.top,E.top=p[k],E.bottom=p[k+1])}return h}(e,t),n=e.display.measureLineCache,t={text:t.text,width:e.display.scroller.clientWidth,markedSpans:t.markedSpans,measure:i,classes:t.textClass+"|"+t.bgClass+"|"+t.wrapClass},16==n.length?n[++e.display.measureLineCachePos%16]=t:n.push(t)),i}function Pe(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Ie(e,t,n,i){if(t.widgets)for(var r=0;r<t.widgets.length;++r){var a;t.widgets[r].above&&(a=hn(t.widgets[r]),n.top+=a,n.bottom+=a)}var o;return"line"!=i&&(i=i||"local",o=Rn(e,t),"local"!=i&&(o-=e.display.viewOffset),"page"==i&&(o+=(i=B(e.display.lineSpace)).top+(window.pageYOffset||(document.documentElement||document.body).scrollTop),e=i.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft),n.left+=e,n.right+=e),n.top+=o,n.bottom+=o),n}function Le(e,t,n,i){return Ie(e,i=i||L(e.doc,t.line),Te(e,i,t.ch),n)}function C(n,e,i,r,a){function t(e,t){e=Te(n,r,e,a);return t?e.left=e.right:e.right=e.left,Ie(n,r,e,i)}r=r||L(n.doc,e.line),a=a||Ae(n,r);var o=M(r),s=e.ch;if(!o)return t(s);for(var l,c,d=o[0].level,u=0;u<o.length;++u){var p,h=o[u],f=h.level%2;if(h.from<s&&h.to>s)return t(s,f);var m,v=f?h.to:h.from,g=f?h.from:h.to;v==s?(p=u&&h.level<(m=o[u-1]).level?t(m.level%2?m.from:m.to-1,!0):t(f&&h.from!=h.to?s-1:s),f==d?l=p:c=p):g==s&&(m=u<o.length-1&&o[u+1],!f&&m&&m.from==m.to||(p=m&&h.level<m.level?t(m.level%2?m.to-1:m.from):t(f?s:s-1,!0),f==d?l=p:c=p))}return d&&!s&&(c=t(o[0].to-1)),l?(c&&(l.other=c),l):c}function De(e,t,n){e=new T(e,t);return n&&(e.outside=!0),e}function Oe(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return De(i.first,0,!0);var r=Nn(i,n),a=i.first+i.size-1;if(a<r)return De(i.first+i.size-1,L(i,a).text.length,!0);for(t<0&&(t=0);;){var o=L(i,r),s=function(t,n,i,e,r){var a=r-Rn(t,n),o=!1,s=2*t.display.wrapper.clientWidth,l=Ae(t,n);function c(e){e=C(t,T(i,e),"line",n,l);return o=!0,a>e.bottom?e.left-s:a<e.top?e.left+s:(o=!1,e.left)}var d=M(n),u=n.text.length,p=Ai(n),h=Pi(n),f=c(p),m=o,v=c(h),g=o;if(v<e)return De(i,h,g);for(;;){if(d?h==p||h==Li(n,p,1):h-p<=1){for(var y=e-f<v-e,b=y?p:h;hi.test(n.text.charAt(b));)++b;var w=De(i,b,y?m:g);return w.after=y,w}var E=Math.ceil(u/2),k=p+E;if(d){k=p;for(var x=0;x<E;++x)k=Li(n,k,1)}y=c(k);e<y?(h=k,v=y,(g=o)&&(v+=1e3),u=E):(p=k,f=y,m=o,u-=E)}}(e,o,r,t,n),o=on(o),l=o&&o.find();if(!(o&&s.ch>=l.from.ch))return s;r=l.to.line}}function Me(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==i){i=z("pre");for(var t=0;t<49;++t)i.appendChild(document.createTextNode("x")),i.appendChild(z("br"));i.appendChild(document.createTextNode("x"))}F(e.measure,i);var n=i.offsetHeight/50;return 3<n&&(e.cachedTextHeight=n),fi(e.measure),n||1}function Ne(e){var t,n;return null!=e.cachedCharWidth?e.cachedCharWidth:(t=z("span","x"),n=z("pre",[t]),F(e.measure,n),2<(n=t.offsetWidth)&&(e.cachedCharWidth=n),n||10)}var Re,Ve,je=0;function He(e){e.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++je},Jn++||(Xn=[])}function qe(e){var t,n,i,r,a=e.curOp,o=e.doc,s=e.display,l=(e.curOp=null,a.updateMaxLine&&ce(e),s.maxLineChanged&&!e.options.lineWrapping&&s.maxLine&&(t=function(e,t){var n=!1;if(t.markedSpans)for(var i=0;i<t.markedSpans;++i){var r=t.markedSpans[i];!r.collapsed||null!=r.to&&r.to!=t.text.length||(n=!0)}var a,o=!n&&Se(e,t);return o?Te(e,t,t.text.length,o).right:(a=(o=wn(e,t)).appendChild(Ei(e.display.measure)),F(e.display.measure,o),B(a).right-B(e.display.lineDiv).left)}(e,s.maxLine),s.sizer.style.minWidth=Math.max(0,t+3+ti)+"px",s.maxLineChanged=!1,(t=Math.max(0,s.sizer.offsetLeft+s.sizer.offsetWidth-s.scroller.clientWidth))<o.scrollLeft&&!a.updateScrollPos&&Ze(e,Math.min(s.scroller.scrollLeft,t),!0)),a.updateScrollPos?n=a.updateScrollPos:a.selectionChanged&&s.scroller.clientHeight&&(n=At(e,(t=C(e,o.sel.head)).left,t.top,t.left,t.bottom)),(a.changes.length||n&&null!=n.scrollTop)&&(i=ve(e,a.changes,n&&n.scrollTop),e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop)),!i&&a.selectionChanged&&be(e),a.updateScrollPos?(s.scroller.scrollTop=s.scrollbarV.scrollTop=o.scrollTop=n.scrollTop,s.scroller.scrollLeft=s.scrollbarH.scrollLeft=o.scrollLeft=n.scrollLeft,he(e),a.scrollToPos&&St(e,P(e.doc,a.scrollToPos),a.scrollToPosMargin)):n&&(i=St(t=e,t.doc.sel.head),t.state.focused&&(s=t.display,o=B(s.sizer),n=null,t=Ce(t.display),i.top+t+o.top<0?n=!0:i.bottom+t+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null==n||G||((t="none"==s.cursor.style.display)&&(s.cursor.style.display="",s.cursor.style.left=i.left+"px",s.cursor.style.top=i.top-s.viewOffset+"px"),s.cursor.scrollIntoView(n),t&&(s.cursor.style.display="none")))),a.selectionChanged&&we(e),e.state.focused&&a.updateInput&&h(e,a.userSelChange),a.maybeHiddenMarkers),c=a.maybeUnhiddenMarkers;if(l)for(var d=0;d<l.length;++d)l[d].lines.length||v(l[d],"hide");if(c)for(d=0;d<c.length;++d)c[d].lines.length&&v(c[d],"unhide");if(--Jn||(r=Xn,Xn=null),a.textChanged&&v(e,"change",e,a.textChanged),a.cursorActivity&&v(e,"cursorActivity",e),r)for(d=0;d<r.length;++d)r[d]()}function w(i,r){return function(){var e=i||this,t=!e.curOp;t&&He(e);try{var n=r.apply(e,arguments)}finally{t&&qe(e)}return n}}function ze(n){return function(){var e,t=this.cm&&!this.cm.curOp;t&&He(this.cm);try{e=n.apply(this,arguments)}finally{t&&qe(this.cm)}return e}}functi=n&&(n=e.doc.first+e.doc.size),e.curOp.changes.push({from:t,to:n,diff:i})}function Be(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){We(e),e.state.focused&&Be(e)})}function Ue(t){var n=!1;t.display.pollingFast=!0,t.display.poll.set(20,function e(){We(t)||n?(t.display.pollingFast=!1,Be(t)):(n=!0,t.display.poll.set(60,e))})}function We(e){var t=e.display.input,n=e.display.prevInput,i=e.doc,r=i.sel;if(!e.state.focused||xi(t)||$e(e))return!1;var a=t.value;if(a==n&&S(r.from,r.to))return!1;if(x&&a&&0===t.selectionStart)return h(e,!0),!1;for(var o=!e.curOp,s=(o&&He(e),r.shift=!1,0),l=Math.min(n.length,a.length);s<l&&n[s]==a[s];)++s;var c=r.from,r=r.to,i=(s<n.length?c=T(c.line,c.ch-(n.length-s)):e.state.overwrite&&S(c,r)&&!e.state.pasteIncoming&&(r=T(r.line,Math.min(L(i,r.line).text.length,r.ch+(a.length-s)))),e.curOp.updateInput);return vt(e.doc,{from:c,to:r,text:ki(a.slice(s)),origin:e.state.pasteIncoming?"paste":"+input"},"end"),e.curOp.updateInput=i,1e3<a.length||-1<a.indexOf("\n")?t.value=e.display.prevInput="":e.display.prevInput=a,o&&qe(e),!(e.state.pasteIncoming=!1)}function h(e,t){var n,i,r=e.doc;S(r.sel.from,r.sel.to)?t&&(e.display.prevInput=e.display.input.value=""):(e.display.prevInput="",n=Ci&&(100<r.sel.to.line-r.sel.from.line||1e3<(i=e.getSelection()).length),e.display.input.value=n?"-":i||e.geay.inaccurateSelection=n}function _(e){"nocursor"==e.options.readOnly||Q&&document.activeElement==e.display.input||e.display.input.focus()}function $e(e){return e.options.readOnly||e.doc.cantEdit}function Ye(e,t){for(var n=Kn(t);n!=e.wrapper;n=n.parentNode){if(!n)return 1;if(/\bCodeMirror-(?:line)?widget\b/.test(n.className)||n.parentNode==e.sizer&&n!=e.mover)return 1}}function Ge(e,t,n){var i=e.display;if(!n){n=Kn(t);if(n==i.scrollbarH||n==i.scrollbarH.firstChild||n==i.scrollbarV||n==i.scrollbarV.firstChild||n==i.scrollbarFiller)return null}var r,a,n=B(i.lineSpace);try{rrn null}return Oe(e,r-n.left,a-n.top)}function Ke(t){var o=this,s=o.display,l=o.doc,e=l.sel;if(e.shift=t.shiftKey,Ye(s,t))k||(s.scroller.draggable=!1,setTimeout(function(){s.scroller.draggable=!0},100));else if(!Xe(o,t)){var n,i,r,a,c,d,u,p,h,f,m,v,g=Ge(o,t);switch(Qn(t)){case 3:return void(Z&&pt.call(o,o,t));case 2:return g&&I(o.doc,g),setTimeout(q(_,o),20),void N(t)}g?(o.state.focused||dt(o),n=+new Date,i="single",Ve&&Ve.time>n-400&&S(Ve.pos,g)?(i="triple",N(t),setTimeout(q(_,o),20),r=o,a=g.line,I(r.doc,T(a,0),P(r.doc,T(a+1,0)))):Re&&Re.time>n-400&&S(Re.pos,g)?(i="double",Ve={time:n,pos:g},N(t),r=Nt(L(l,g.line).text,g),I(o.doc,r.from,r.to)):Re={time:n,pos:g},c=g,!o.options.dragDrop||!yi||$e(o)||S(e.from,e.to)||A(g,e.from)||A(e.to,g)||"single"!=i?(N(t),"single"==if=0,m=w(o,function(e){(x||Qn(e)?function e(t){var n,i,r=++f,a=Ge(o,t,!0);a&&(S(a,c)?(n=t.cliY>h.bottom?20:0)&&setTimeout(w(o,function(){f==r&&(s.scroller.scrollTop+=n,e(t))}),50):(o.state.focused||dt(o),y(c=a),i=pe(s,l),(a.line>=i.to||a.line<i.from)&&setTimeout(w(o,function(){f==r&&e(t)}),150)))}:b)(e)}),v=w(o,b),R(document,"mousemove",m),R(document,"mouseup",v)):(d=w(o,function(e){k&&(s.scroller.draggable=!1),o.state.draggingText=!1,V(document,"mouseup",d),V(s.scroller,"drop",d),Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)<10&&(N(e),I(o.doc,g),_(o))}),k&&(s.scroller.draggable=!0),o.state.draggingText=d,s.scroller.dragDrop&&s.scroller.dragDrop(),R(document,"mouseup",d),R(s.scroller,"drop",d))):Kn(t)==s.scroller&&N(t)}function y(e){var t;"single"==i?I(o.doc,P(l,g),e):(u=P(l,u),p=P(l,p),"double"==i?(t=Nt(L(l,e.line).text,e),A(e,u)?I(o.doc,t.from,p):I(o.doc,u,t.to)):"triple"==i&&(A(e,u)?I(o.doc,p,P(l,T(e.line,0))):I(o.doc,u,P(l,T(e.line+1,0)))))}function b(e){f=1/0;var t=Ge(o,e);t&&y(t),N(e),_(o),V(document,"mousemove",m),V(document,"mouseup",v)}}function Qe(e){var i=this;if(!(Ye(i.display,e)||i.options.onDragEvent&&i.options.onDragEvent(i,$n(e)))){N(e);var t,n,r=Ge(i,e,!0),a=e.dataTransfer.files;if(r&&!$e(i))if(a&&a.length&&window.FileReader&&window.File)for(var o=a.length,s=Array(o),l=0,c=0;c<o;++c)!function(e,t){var n=new FileReader;n.onload=function(){s[t]=n.result,++l==o&&(r=P(i.doc,r),vt(i.doc,{from:r,to:r,text:ki(s.join("\n")),origin:"paste"},"around"))},n.readAsText(e)}(a[c],c);else if(!i.state.draggingText||A(r,i.doc.sel.from)||A(i.doc.sel.to,r))try{(s=e.dataTransfer.getData("Text"))&&(t=i.doc.sel.from,n=i.doc.sel.to,y(i.doc,r,r),i.state.draggingText&&f(i.doc,"",t,n,"paste"),i.replaceSelection(s,null,"paste"),_(i),dt(i))}catch(e){}else i.state.draggingText(e),setTimeout(q(_,i),20)}}function Xe(e,t){var n=e.display;try{var i=t.clientX,r=t.clientY}catch(t){return}if(!(i>=Math.floor(B(n.gutters).right))){if(N(t),ei(e,"gutterClick")){var a=B(n.lineDiv);if(!(r>a.bottom)){r-=a.top-n.viewOffset;for(var o=0;o<e.options.gutters.length;++o){var s=n.gutters.childNodes[o];if(s&&B(s).right>=i){j(e,"gutterClick",e,Nn(e.doc,r),e.options.gutters[o],t);break}}}}return 1}}function Je(e,t){Math.abs(e.doc.sdisplay.scroller.clientWidth),e.doc.scrollLeft=t,he(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}var et,tt=0,d=null;function nt(e,t){var n,i,r,a=t.wheelDeltaX,o=t.wheelDeltaY,s=(null==a&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(a=t.detail),null==o&&t.detail&&t.axis==t.VERTICAL_AXIS?o=t.detail:null==o&&(o=t.wheelDelta),e.display),l=s.scroller;if(a&&l.scrollWidth>l.clientWidth||o&&l.scrollHeight>l.clientHeight){if(o&&X&&k)for(var c=t.target;c!=l;c=c.parentNode)if(c.lineObj){e.display.currentWheelTarget=c;break}!a||b||u||null==d?(o&&null!=d&&(n=o*d,r=(i=e.doc.scrollTop)+s.wrapper.clientHeight,n<0?i=Math.max(0,i+n-50):r=Math.min(e.doc.height,r+n+50),ve(e,[],{top:i,bottom:r})),tt<20&&(null==s.wheelStartX?(s.wheelStartX=l.scrollLeft,s.wheelStartY=l.scrollTop,s.wheelDX=a,s.wheelDY=o,setTimeout(function(){var e,t;null!=s.wheelStartX&&(e=l.scrollLeft-s.wheelStartX,t=(t=l.scrollTop-s.wheelStartY)&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX,s.wheelStartX=s.wheelStartY=null,t&&(d=(d*tt+t)/(tt+1),++tt))},200)):(s.wheelDX+=a,s.wheelDY+=o))):(o&&Je(e,Math.max(0,Math.min(l.scrollTop+o*d,l.scrollHeight-l.clientHeight))),Ze(e,Math.max(0,Math.min(l.scrollLeft+a*d,l.scrollWidth-l.clientWidth))),N(t),s.wheelStartX=null)}}function it(e,t,n){if("string"==typeof t&&!(t=Wt[t]))return!1;e.display.pollina=t(e)!=ni}finally{i.sel.shift=r,e.state.suppressEdits=!1}return a}function rt(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function at(t,e){var n,i=$t(t.options.keyMap),r=i.auto,a=(clearTimeout(et),r&&!Gt(e)&&(et=setTimeout(function(){$t(t.options.keyMap)==i&&(t.options.keyMap=r.call?r.call(null,t):r)}!a&&(n=rt(t),(o="stop"==(o=e.shiftKey?Yt("Shift-"+a,n,function(e){return it(t,e,!0)})||Yt(a,n,function(e){return"string"==typeof e&&/^go[A-Z]/.test(e)&&it(t,e)}):Yt(a,n,function(e){return it(t,e)}))?!1:o)&&(N(e),we(t),W&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),o)}x?d=-.53:b?d=15:a?d=-.7:$&&(d=-1/3);var ot,st=null;function lt(e){var t,n;this.state.focused||dt(this),x&&27==e.keyCode&&(e.returnValue=!1),this.options.onKeyEvent&&this.options.onKeyEvent(this,$n(e))||(t=e.keyCode,this.doc.sel.shift=16==t||e.shiftKey,n=at(this,e),u&&(st=n?t:null,!n&&88==t&&!Ci&&(X?e.metaKey:e.ctrlKey)&&this.replaceSelection("")))}function ct(e){var t,n,i,r=this;r.options.onKeyEvent&&r.options.onKeyEvent(r,$n(e))||(t=e.keyCode,i=e.charCode,u&&t==st?(st=null,N(e)):(u&&(!e.which||e.which<10)||Y)&&at(r,e)||(t=String.fromCharCode(null==i?t:i),this.options.electricChars&&this.docns.smartIndent&&!$e(this)&&-1<this.doc.mode.electricChars.indexOf(t)&&setTimeout(w(r,function(){Lt(r,r.doc.sel.to.line,"smart")}),75),i=e,(e=Yt("'"+(e=t)+"'",rt(n=r),function(e){return it(n,e,!0)}))&&(N(i),we(n)),e||Ue(r)))}function dt(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(v(e,"focus",e),e.state.focused=!0,-1==e.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(e.display.wrapper.className+=" CodeMirror-focused"),h(e,!0)),Be(e),we(e))}function ut(e){e.state.focused&&(v(e,"blur",e),e.state.focused=!1,e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.doc.sel.shift=!1)},150)}function pt(i,e){var t,r,a,n,o=i.display,s=i.doc.sel;function l(){var e,t,n;o.inputDiv.style.position="relative",o.input.style.cssText=a,W&&(o.scrollbarV.scrollTop=o.scroller.scrollTop=r),Be(i),null==o.input.selectionStart||x&&!W||(clearTimeout(ot),e=o.input.value=" "+(S(s.from,s.to)?"":o.input.value),t=0,o.prevInput=" ",o.input.selectionStart=1,o.input.selectionEnd=e.length,n=function(){" "==o.prevInput&&0==o.input.selectionStart?w(i,Wt.selectAll)(i):t++<10?ot=setTimeout(n,500):h(i)},ot=setTimeout(n,200))}Ye(o,e)||(t=Ge(i,e),r=o.scroller.scrollTop,t&&!u&&(!S(s.from,s.to)&&!A(t,s.from)&&A(t,s.to)||w(i,y)(i.doc,t,t),a=o.input.style.cssText,o.inputDiv.style.position="absolute",o.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: whiterflow: hidden; opacity: .05; -ms-opacity: {V(window,"mouseup",n),setTimeout(l,20)},R(window,"mouseup",n)):setTimeout(l,50)))}function ht(e){return e.text?T(e.from.line+e.text.length-1,H(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function ft(e,t,n){var i,r,a;return A(t.from,n)?(i=t.text.length-1-(t.to.line-t.from.line),n.line>t.to.line+i?(r=n.line-i,(a=e.first+e.size-1)<r?T(a,L(e,a).text.length):xt(n,L(e,r).text.length)):n.line==t.to.line+i?xt(n,H(t.text).length+(1==t.text.length?t.from.ch:0)+L(e,t.to.line).text.length-t.to.ch):(a=n.line-t.from.line,xt(n,t.text[a].length+(a?0:t.from.ch)))):P(e,n)}function mt(e,i,t){var r;return t&&"object"==typeof t?{anchor:ft(e,i,t.anchor),head:ft(e,i,t.head)}:"start"==t?{anchor:i.from,head:i.from}:(r=ht(i),"around"==t?{anchor:i.from,head:r}:"end"==t?{anchor:r,head:r}:{anchor:(t=function(e){var t,n;return A(e,i.from)?e:A(i.to,e)?(t=e.line+i.text.length-(i.to.line-i.from.line)-1,n=e.ch,e.line==i.to.line&&(n+=r.ch-i.to.ch),T(t,n)):r})(e.sel.anchor),head:t(e.sel.head)})}function vt(e,t,n,i){if(e.cm){if(!e.cm.curOp)reteChange:(a=t).from,to:a.to,text:a.text,origin:a.origin,update:function(e,t,n,i){e&&(this.from=P(r,e)),t&&(this.to=P(r,t)),n&&(this.text=n),void 0!==i&&(this.origin=i)},cancel:function(){this.canceled=!0}},v(r,"beforeChange",r,a),r.cm&&v(r.cm,"beforeChange",r.cm,a),t=a.canceled?null:{from:a.from,to:a.to,text:a.text,origin:a.origin})){var r,a,o=ee&&!i&&function(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=g(i,n)||(i=i||[]).push(n)}}),!i)return null;for(var r=[{from:t,to:n}],a=0;a<i.length;++a)for(var o=i[a],s=o.find(),l=0;l<r.length;++l){var c,d=r[l];A(d.to,s.from)||A(s.to,d.from)||(c=[l,1],(A(d.from,s.from)||!o.inclusiveLeft&&S(d.from,s.from))&&c.push({from:d.from,to:s.from}),(A(s.to,d.to)||!o.inclusiveRight&&S(d.to,s.to))&&c.push({from:s.to,to:d.to}),r.splice.apply(r,c),l+=c.length-1)}return r}(e,t.from,t.to);if(o){for(var s=o.length-1;1<=s;--s)gt(e,{from:o[s].from,to:o[s].to,text:[""]});o.length&&gt(e,{from:o[0].from,to:o[0].to,text:t.text},n)}else gt(e,t,n)}}function gt(e,n,t){var t=mt(e,n,t),i=(qn(e,n,t,e.cm?e.cm.curOp.id:NaN),wt(e,n,t,tn(e,n)),[]);Ln(e,function(e,t){t||-1!=g(i,e.history)||(Un(e.history,n),i.push(e.history)),wt(e,n,null,tn(e,n))})}function yt(e,t){if(!e.cm||!e.cm.state.suppressEdits){var n=e.history,i=("undo"==t?n.done:n.undone).pop();if(i){n.dirtyCounter+="undo"==t?-1:1;var r={changes:[],anchorBefore:i.anchorAfter,headBefore:i.headAfter,anchorAfter:i.anchorBefore,headAfter:i.headBefore};("undo"==t?n.undone:n.dpush(Hn(e,o)),a?mt(e,o,null):{anchor:i.anchorBefore,head:i.headBefore}),l=(wt(e,o,s,nn(e,o)),[]);Ln(e,function(e,t){t||-1!=g(l,e.history)||(Un(e.history,o),l.push(e.history)),wt(e,o,null,nn(e,o))})}}}}function bt(e,t){function n(e){return T(e.line+t,e.ch)}e.first+=t,e.cm&&E(e.cm,e.first,e.first,t),e.sel.head=n(e.sel.head),e.sel.anchor=n(e.sel.anchor),e.sel.from=n(e.sel.from),e.sel.to=n(e.sel.to)}function wt(e,t,n,i){if(e.cm&&!e.cm.curOp)return w(e.cm,wt)(e,t,n,i);if(t.to.line<e.first)bt(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){t.from.line<e.first&&(bt(e,r=t.text.length-1-(e.first-t.from.line)),t={from:T(e.first,0),to:T(t.to.line+r,t.to.ch),text:[H(t.text)],origin:t.origin});var r=e.lastLine();if((t=t.to.line>r?{from:t.from,to:T(r,L(e,r).text.length),text:[t.text[0]],origin:t.origin}:t).removed=On(e,t.from,t.to),n=n||mt(e,t,null),e.cm){var r=e.cm,a=t,o=i,s=n,l=r.doc,c=r.display,d=a.from,u=a.to,p=!1,h=d.line;if(r.options.lineWrapping||(h=O(sn(l,L(l,d.line))),l.iter(h,u.line+1,function(e){if(e==c.maxLine)return p=!0})),A(l.sel.head,a.from)||A(a.to,l.sel.head)||(r.curOp.cursorActivity=!0),_n(l,a,o,s,ie(r)),r.options.lineWrapping||(l.iter(h,d.line+a.text.length,function(e){var t=le(l,e);t>c.maxLineLength&&(c.maxLine=e,c.maxLineLength=t,c.maxLineChanged=!0,p=!1)}),p&&(r.curOp.updateMaxLine=!0)),l.frontier=Math.min(l.frontier,d.line),Ee(r,400),o=a.text.length-(u.line-d.line)-1,E(r,d.line,u.line+1,o),ei(r,"change")){s={from:d,to:u,text:a.text,removed:a.removed,origin:a.origin};if(r.curOp.textChanged){for(var f=r.curOp.textChange=t.line&&e.ch==t.ch}function A(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Et(e){return T(e.line,e.ch)}function kt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function P(e,t){var n;,t.line>n?T(n,L(e,n).text.length):xt(t,L(e,t.line).text.length))}function xt(e,t){var n=e.ch;return null==n||t<n?T(e.line,t):n<0?T(e.line,0):e}function Ct(e,t){return t>=e.first&&t<e.first+e.size}function I(e,t,n,i){var r,a;e.sel.shift||e.sel.extend?(r=e.sel.anchor,n&&((a=A(t,r))!=A(n,r)?(r=t,t=n):a!=A(t,n)&&(t=n)),y(e,r,t,i)):y(e,t,n||t,i),e.cm&&(e.cm.curOp.userSelChange=!0)}function y(e,t,n,i,r){(!r&&ei(e,"beforeSelectionChange")||e.cm&&ei(e.cm,"beforeSelectionChange"))&&(v(a=e,"beforeSelectionChange",a,o={anchor:o=t,head:n}),a.cm&&v(a.cm,"beforeSelectionChange",a.cm,o),o.anchor=P(a,o.anchor),o.head=P(a,o.head),n=(a=o).head,t=a.anchor);var a,o=e.sel;o.goalColumn=null,!r&&S(t,o.anchor)||(t=Tt(e,t,i,"push"!=r)),!r&&S(n,o.head)||(n=Tt(e,n,i,"push"!=r)),S(o.anchor,t)&&S(o.head,n)||(o.anchor=t,a=A(o.head=n,t),o.from=a?n:t,o.to=a?t:n,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=e.cm.curOp.cursorActivity=!0),j(e,"cursorActivity",e))}function _t(e){y(e.doc,e.doc.sel.from,e.doc.sel.to,null,"push")}function Tt(e,t,n,i){var r=!1,a=t,o=n||1;e.cantEdit=!1;e:for(;;){var s=L(e,a.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var c=s.markedSpans[l],d=c.marker;if((null==c.from||(d.inclusiveLeft?c.from<=a.ch:c.from<a.ch))&&(null==c.to||(d.inclusiveRight?c.to>=a.ch:c.to>a.ch))){if(i&&(v(d,"beforeCursorEnter"),d.explicitlyCleared)){if(s.markedSpans){--l;continue}break}if(d.atomic){c=d.find()[o<0?"from":"to"];if(S(c,a)&&(c.ch+=o,c.ch<0?c=c.line>e.first?P(e,T(c.line-1)):null:c.ch>s.text.length&&(c=c.line<e.first+e.size-1?T(c.line+1,0):null),!c)){if(r)return i?(e.cantEdit=!0,T(e.first,0)):Tt(e,t,n,!0);r=!0,c=t,o=-o}a=c;continue e}}}return a}}function St(e,t,n){for(null==n&&(n=0);;){var i=!1,r=C(e,t),a=At(e,r.left,r.top-n,r.left,r.bottom+n),o=e.doc.scrollTop,s=e.doc.scrollLeft;if(null!=a.scrollTop&&(Je(e,a.scrollTop),1<Math.abs(e.doc.scrollTop-o)&&(i=!0)),null!=a.scrollLeft&&(Ze(e,a.scrollLeft),1<Math.abs(e.doc.scrollLeft-s)&&(i=!0)),!i)return r}}function At(e,t,n,i,r){var a=e.display,o=Ce(a),s=a.scroller.clientHeight-ti,l=a.scroller.scrollTop,c={},e=e.doc.height+_e(a),d=e-10<(r+=o)+o,n=((n=(n+=o)<0?0:n)<l?c.scrollTop=n<o+10?0:n:l+s<r&&((o=Math.min(n,(d?e:r)-s))!=l&&(c.scrollTop=o)),a.scroller.clientWidth-ti),d=a.scroller.scrollLeft,e=(t+=a.gutters.offsetWidth,i+=a.gutters.offsetWidth,a.gutters.offsetWidth),r=t<e+10;return t<d+e||r?(r&&(t=0),c.scrollLeft=Math.max(0,t-10-e)):n+d-3<i&&(c.scrollLeft=i+10-n),c}function Pt(e,t,n){e.curOp.updateScrollPos={scrollLeft:null==t?e.doc.scrollLeft:t,scrollTop:null==n?e.doc.scrollTop:n}}function It(e,t,n){var i=e.curOp.updateScrollPos||(e.curOp.updateScrollPos={scrollLeft:e.doc.scrollLeft,scrollTop:e.doc.scrollTop}),e=e.display.scroller;i.scrollTop=Math.max(0,Math.min(e.scrollHeight-e.clientHeight,i.scrollTop+n)),i.scrollLeft=Math.max(0,Math.min(e.scrollWidth-e.clientWidth,i.scrollLeft+t))}function Lt(e,t,n,i){var r,a=e.doc,o=("smart"==(n=n||"add")&&(e.doc.mode.indent?r=xe(e,t):n="prev"),e.options.tabSize),s=L(a,t),l=ri(s.text,null,o),c=s.text.match(/^\s*/)[0];if("smart"==n&&(d=e.doc.mode.indent(r,s.text.slice(c.length),s.text))==ni){if(!i)return;n="prev"}"prev"==n?d=t>a.first?ri(L(a,t-1).text,null,o):0:"add"==n?d=l+e.options.indentUnit:"subtract"==n&&(d=l-e.options.indentUnit);var d=Math.max(0,d),u="",p=0;if(e.options.indentWithTabs)for(var h=Math.floor(d/o);h;--h)p+=o,u+="\t";p<d&&(u+=oi(d-p)),u!=c&&f(e.doc,u,T(t,0),T(t,c.length),"+input"),s.stateAfter=null}function Dt(e,t,n){var i=t,r=t,a=e.doc;return"number"==typeof t?r=L(a,kt(a,t)):i=O(t),null!=i&&n(r,i)?(E(e,i,i+1),r):null}function Ot(n,e,i,t,r){var a=e.line,o=e.ch,s=L(n,a),l=!0;function c(e){var t=(r?Li:Di)(s,o,i,!0);if(null==t){if(e||!((e=a+i)<n.first||e>=n.first+n.size?l=!1:s=L(n,a=e)))return l=!1;o=r?(i<0?Pi:Ai)(s):i<0?s.text.length:0}else o=t;return 1}if("char"==t)c();else if("column"==t)c(!0);else if("word"==t||"group"==t)for(var d=null,u="group"==t,p=!0;!(i<0)||c(!p);p=!1){var h=s.text.charAt(o)||"\n",h=ui(h)?"w":!u||/\s/.test(h)?null:"p";if(d&&d!=h){i<0&&(i=1,c());break}if(h&&(d=h),0<i&&!c(!p))break}e=Tt(n,T(a,o),i,!0);return l||(e.hitSide=!0),e}function Mt(e,t,n,i){var r,a,o=e.doc,s=t.left;for("page"==i?(r=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),a=t.top+n*(r-(n<0?1.5:.5)*Me(e.display))):"line"==i&&(a=0<n?t.bottom+3:t.top-3);;){var l=Oe(e,s,a);if(! l}function Nt(e,t){var n=t.ch,i=t.ch;if(e){!1===t.after||i==e.length?--n:++i;for(var r=e.charAt(n),a=ui(r)?ui:/\s/.test(r)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ui(e.prototypethis),dfunction(e,Rt.hasOwnProperty(e)&&w(this,Rt[e])(this,t,i))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this=e.token?e:p.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,E(this)}),removeOverlay:w(null,function(e){for(var t=this.state.overlays,n=0;n<t.length;++n)if(t[n].modeSpec==e)return t.splice(n,1),this.state.modeGen++,void E(this)}),indentLine:w(null,function(e,t,n){"string"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Ct(this.doc,e)&&Lt(this,e,t,n)}),indentSelection:w(null,function(e){var t=this.doc.sel;if(S(t.from,t.to))return Lt(this,t.from.line,e);for(var n=t.to.line-(t.to.ch?0:1),i=t.from.line;i<=n;++i)Lt(this,i,e)}),getTokenAt:function(e){for(var t=this.doc,n=xe(this,(e=P(t,e)).line),i=this.doc.mode,r=new Qt(L(t,e.line).text,this.options.tabSize);r.pos<e.ch&&!r.eol();){r.start=r.pos;var a=i.token(r,n)}return{start:r.start,end:r.pos,string:r.current(),className:a||null,type:a||null,state:n}},getStateAfter:function(e){var t=this.doc;return xoords:function(e,t){var n=this.doc.sel,e=null==e?n.head:"object"==typeof e?P(this.doc,e):e?n.from:n.to;return C(this,e,t||"page")},charCoords:function(e,t){return Le(this,P(this.doc,e),t||"page")},coordsChar:function(e,t){var n,i,r,a;return i=e,Oe(n=this,(e="div"==(t=t||"page")?i:(r=i.left,i=i.top,"page"==t&&(r-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,i-=window.pageYOffset||(document.documentElement||document.body).scrollTop),r-=(a=B,"local"!=t&&t||(r+=(a=B(n.display.wrapper)).left,i+=a.top),{left:r,top:i})).left,e.top)},defaultTextHeight:function(){return Me(this.display)},defaultCharWidth:function(){return Ne(this.display)},setGutterMarker:w(null,function(e,n,i){return Dt(this,e,function(e){var t=e.gutterMarkers||(e.gutterMarkers={});return!(t[n]=i)&&pi(t)&&(e.gutterMarkers=null),1})}),clearGutter:w(null,function(t){var n=this,e=n.doc,i=e.first;e.iter(function(e){e.gutterMarkers&&e.gutterMarkers[t]&&(e.gutterMarkers[t]=null,E(n,i,i+1),pi(e.gutterMarkers)&&(e.gutterMarkers=null)),++i})}),addLineClass:w(null,function(e,n,i){return Dt(this,e,function(e){var t="text"==n?"textClass":"background"==n?"bgClass":"wrapClass";if(e[t]){if(new RegExp("\\b"+i+"\\b").test(e[t]))return;e[t]+=" "+i}else e[t]=i;return 1})}),removeLineClass:w(null,function(e,r,a){return Dt(this,e,function(e){var t="text"==r?"textClass":"background"==r?"bgClass":"wrapClass",n=e[t];if(n){if(null==a)e[t]=null;else{var i=n.replace(new RegExp("^"+a+"\\b\\s*|\\s*\\b"+a+"\\b"),"");if(i==n)return;e[t]=i||null}return 1}})}),addLineWidget:w(null,function(e,t,n){var i=this,r=new un(i,t,n);return r.noHScroll&&(i.display.alignWidgets=!0),Dt(i,e,functionets||(e.widgets=[])).push(r),r.line=e,ln(i.doc,e)&&!r.showIfHidden||(t=Rn(i,e)<i.display.scroller.scrollTop,D(e,e.height+hn(r)),t&&It(i,0,r.height)),1}),r}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!Ct(this.doc,e))return null;var t=e;if(!(e=L(this.doc,e)))return nuterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,i,r){var a,o,s=this.display,l=(e=C(this,P(this.doc,e))).bottom,c=e.left;t.style.position="absolute",s.sizer.appendChild(t),"over"==i?l=e.top:"above"!=i&&"near"!=i||(a=Math.max(s.wrapper.clientHeight,this.doc.height),o=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth),("above"==i||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(l=e.bottom),c+t.offsetWidth>o&&(c=o-t.offsetWidth)),t.style.top=l+Ce(s)+"px",t.style.left=t.style.right="","right"==r?(c=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?c=0:"middle"==r&&(c=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=coffsetWidKeyDown:w(null,lt),execCommand:function(e){return Wt[e](this)},findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var a=0,o=P(this.doc,e);a<t&&!(o=Ot(this.doc,o,r,n,i)).hitSide;++a);return o},moveH:w(null,function(e,t){var n=this.doc.sel,t=n.shift||n.extend||S(n.from,n.to)?Ot(this.doc,n.head,e,t,this.options.rtlMoveVisually):e<0?n.from:n.to;I(this.doc,t,t,e)}),dange=!0}),findPosV:function(e,t,n,i){var r=1,a=i;t<0&&(r=-1,t=-t);for(var o=0,s=P(this.doc,e);o<t;++o){var l=C(this,s,"div");if(null==a?a=l.left:l.left=a,(s=Mt(this,l,r,n)).hitSide)break}return s},moveV:w(null,function(e,t){var n=this.doc.sel,i=C(this,n.head,"div"),r=(null!=n.goalColumn&&(i.left=n.goalColumn),Mt(this,i,e,t));"page"==t&&It(this,0,Le(this,r,"div").top-i.top),I(this.doc,r,r,e),n.goalColumn=i.left}),toggleOverwrite:function(){(this.stais.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:w(null,function(e,t){Pt(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-ti,width:e.scrollWidth-ti,clientHeight:e.clientHeight-ti,clientWidth:e.clientWidth-ti}},scrollIntoView:w(null,function(e,t){t=t||0;var n=e="number"==typeof e?T(e,0):e,e=(e&&null==e.line||(this.curOp.scrollToPos=e?P(.curOp.scrollToPos)),At(this,n.left,n.top-t,n.right,n.bottom+t));Pt(this,e.scrollLeft,e.scrollTop)}),setSize:function(e,t){function n(e){return"numb(String(e))?e+"px":e}null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.refresh()},on:function(e,t){R(this,e,t)},off:function(e,t){V(this,e,t)},operation:function(e){return Fe(this,e)},refresh:w(null,function(){Pe(this),Pt(this,this.doc.scrollLeft,this.doc.scrollTop),E(this)}),swapDoc:w(null,function(e){var t=this.doc;return t.cm=null,Dn(this,e),Pe(this),h(this,!0),Pt(this,e.scrollLeft,e.scrollTop),t}),getInputField:function(){return this.display.input},getWrapperElement:functscroller},getGutterElement:function(){return this.display.gutters}};var Rt=p.optionHandlers={},Vt=p.defaults={};function e(etion(e,t,n){n!=jt&&i(e,t,n)}:i)}var jt=p.Init={toString:function(){return"CodeMirror.ion(e,t){e.setValue(t)},!0),e("mode",null,function(e,t){e.doc.modeOptiUnit",2,ne,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,function(e){ne(e),Pe(e),E(e)},!0),e("electricChars",!0),e("rtlMoveVisually",!l),e("theme","default",function(e){ae(e),oe(e)},!0),e("keyMap","default",function(e){var t=n[e.options.keyMap].style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}),e("extraKeys",null),e("onKeyEvent",null),e("onDragEvent",null),e("lineWrapping",!1,function(e){e.options.lineWrapping?(e.displaye.display.sizer.style.minWidth=""):(e.display.wrapper.className=e.display.wrappertion(){ue(e.display,e.d,[],function(e){de(e.options),oe(e)},!0),e("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?me(e.display)+"px":"0",e.refresh()},!0),e("lineNumbers",!1,function(e){de(e.options),oe(e)},!0),e("firstLineNumber",1,oe,!0),e("lineNumberFormatter",function(e){return e},oe,!0),e("showCursorWhenSelecting",!1,be,!0),e("readOnly",!1,function(e,t){"nocursor"==t?(ut(e),e.display.input.blur()):t||h(e,!0)}),e("dragDrop",!0),e("cursorBlinkRate",530),e("cursorHeight",1),e("workTime",100),e("workDelay",100),e("flatten),e("undoDepth",40,function(e,tnction(e){e.refresh{ne(e),e.refresh()},!0),e("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),e("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),e("autofocus",null),p.modes={}),qt=p.mimeModes={},zt=(p.defineMode=function(e,t){if(p.defaults.mode||"null"==e||(p.defaults.mode=e),2<arguments.length){t.dependencies=[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}Ht[e]=t},p.defineMIME=function(e,t){qt[e]=t},p.resolveMode=function(e){if("string"==typeof e&&qt.hasOwnProperty(e))e=qt[e];else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return p.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},p.getMode=function(e,t){t=p.resolveMode(t);var n=Ht[t.name];if(!n)return p.getMode(e,"texvar r,a=zt[t.name];for(r in a)a.hasOwnProperty(r)&&(i.hasOwnProperty(r)&&neMode("null",function(){return{token:function(e){e.skipToEnd()}}}),p.defineMIME("text/plain","null"),p.modeExtensions={}),Ft=(p.extendMode=function(e,t){li(t,zt.hasOwnProperty(e)?zt[e]:zt[e]={})},p.defineExtension=function(e,t){p.prototype[e]=t},p.defineDocExtension=function(e,t){m.===t)return t;if(e.copyState)return e.copyState(t);var n,i={};for(n in t){var r=t[n];r instanceof Array&&(r=r.concat([])),i[n]=r}return i}function Ut(e,t,n){return!e.startState||e.startState(t,n)}p.defineInitHook=function(e){Ft.push(e)},p.copyState=Bt,p.startState=Ut,p.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}};var Wt=p.commands={selectAll:function(e){e.setSelection(T(e.firstLine(),0),T(e.lastLine()))},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),i=!S(t,n);i||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,i?n:T(t.line),"+delete"):e.ree:functioT(t,0),T(t),"+delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection(T(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(T(e.lastLine()))},goLineStart:function(e){e.extendSelection(Ii(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),n=Ii(e,t.line),i=e.getLineHandle(n.line),r=M(i);r&&0!=r[0].level?e.extendSelection(n):(r=Math.max(0,i.text.search(/\S/)),i=t.line==n.line&&t.ch<=r&&t.ch,e.extendSelection(T(n.line,i?0:r)))},goLineEnd:function(e){e.extendSelection(function(e,t){var n,i;for(;n=on(i=L(e.doc,t));)t=n.find().to.line;var r=M(i),r=r?(r[0].level%2?Ai:Pi)(i):i.text.length;return T(t,r)}(e,e.getCursor().line))},goLineRight:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:t},"div"))},goLineLeft:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:0,top:t},"div"))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delChahar")},delCharr")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:fe){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t","end","+input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("\t","end","+input")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);0<t.ch&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),T(t.line,t.ch-1),T(t.line,t.ch+1).replaceSelection("\n","end","+input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},n=p.keyMap={};function $t(e){return"string"==typeof e?n[e]:e}function Yt(s,e,l){for(var t=0;t<e.length;++t){var n=function e(t){var n=(t=$t(t))[s];if(!1===n)return"stop";if(null!=n&&l(n))return!0;if(t.nofallthrough)return"stop";var i=t.fallthrough;if(null!=i){if("[object Array]"!=Object.prototype.toString.call(i))return e(i);for(var r=0,a=i.length;r<a;++r){var o=e(i[r]);if(o)return o}}return!1}(e[t]);if(n)return n}}function Gt(e){e=_i[e.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Kt(e,t){var n;return(!u||34!=e.keyCode||!e.char)&&(null!=(n=_i[e.keyCode])&&!e.altGraphKey&&(e.altKey&&(n="Alt-"+n),(J?e.metaKey:e.ctrlKey)t&&e.shiftKey?"Shift-"+n:n))}function Qt(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastCJt(a,o,s,l,c)],u=d[0],p=l.replacedWith,Ln(a,function(e){p&&(l.replacedWith=p.cloneNode(!0)),d.push(Jt(e,P(e,o),P(e,s),l,c));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;u=H(d)}),new Zt(d,u);var a,o,s,l,c,d,u,p;if(n.cm&&!n.cm.curOp)return w(n.cm,Jt)(n,i,r,e,t);var h=new Xt(n,t);if("range"!=t||A(i,r)){e&&li(e,h),h.replacedWith&&(h.collapsed=!0,h.replacedWith=z("span",[h.replacedWith],"CodeMirror-widget")),h.collapsed&&(te=!0),h.addToHistory&&qn(n,{from:i,to:r,origin:"markText"},{head:n.sel.head,anchor:n.sel.anchor},NaN);var f,m,v,g=i.line,y=0,b=n.cm;if(n.iter(g,r.line+1,function(e){b&&h.collapsed&&!b.options.lineWrapping&&sn(n,e)==b.display.maxLine&&(v=!0);var t={from:null,to:null,marker:h};y+=e.text.length,g==i.line&&(t.from=i.ch,y-=i.ch),g==r.line&&(t.to=r.ch,y-=e.text.length-r.ch),h.col.ch)),g==i.line?f=rn(e,i.ch):D(e,0)),t=t,(e=e).markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e),++g}),h.collapsed&&n.iter(i.line,r.line+1,function(e){ln(n,e)&&D(e,0)}),h.clearOnEnter&&R(h,"beforeCursorEnter",function(){h.clear()}),h.readOnly&&(ee=!0,(n.history.done.length||n.history.undone.length)&&n.clearHistory()),h.collapsed){if(f!=m)throw new Error("Inserting collapsed marker overlapping an existing one");h.size=y,h.atomic=!0}b&&(v&&(b.curOp.updateMaxLine=!0),(h.className||h.startStyle||h.endStyle||ers=e,this.primary=t;for(var n=0,i=this;n<e.length;++n)e[n].parent=this,R(e[n],"clear",function(){i.clear()})}function en(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function tn(e,t){var n=Ct(e,t.from.line)&&L(e,t.from.line).markedSpans,e=Ct(e,t.to.line)&&L(e,t.to.line).markedSpans;if(!n&&!e)return null;var i=t.from.ch,r=t.to.ch,a=S(t.from,t.to),o=function(e,t,n){if(e)for(var i,r=0;r<e.length;++r){var a,o=e[r],s=o.marker;!(null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t))&&("bookmark"!=s.type||o.from!=t||n&&o.marker.insertLeft)||(a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t),(i=i||[]).push({from:o.from,to:a?null:o.to,marker:s}))}return i}(n,i,a),s=function(e,t,n){if(e)for(var i,r=0;r<e.length;++r){var a,o=e[r],s=o.marker;!(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t))&&("bookmark"!=s.type||o.from!=t||n&&!o.marker.insertLeft)||(a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t),(i=i||[]).push({from:a?null:o.from-t,to:null==o.to?null:o.to-t,marker:s}))}return i}(e,r,a),l=1==t.text.length,c=H(t.text).length+(l?i:0);if(o)for(var d=0;d<o.length;++d)null==(u=o[d]).to&&((p=en(s,u.marker))?l&&(u.to=null==p.to?null:p.to+c):u.to=i);if(s)for(var u,p,d=0;d<s.length;++d)null!=(u=s[d]).to&&(u.to+=c),null==u.from?(p=en(o,u.marker))||(u.from=c,l&&(o=o||[]).push(u)):(u.from+=c,l&&(o=o||[]).push(u));var h=[o];if(!l){var f,m=t.text.length-2;if(0<m&&o)for(d=0;d<o.length;++d)null==o[d].to&&(f=f||[]).push({from:null,to:null,marker:o[d].marker});for(d=0;d<m;++d)h.push(f);h.push(s)}return h}function nn(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=0,r=[];i<t.text.length;++i)r.push(function(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t=t||e.slice(0,n):t&&t.push(e[n]);return t?t.length?t:null:e}(n[i]));return r}(e,t),i=tn(e,t);if(!n)return i;if(i)for(var r=0;r<n.length;++r){var a=n[r],o=i[r];if(a&&o)e:for(var s=0;s<o.length;++s){for(var l=o[s],c=0;c<a.length;++c)if(a[c].marker==l.marker)continue e;a.push(l)}else o&&(n[r]=o)}return n}functioans;if(i)for(var r,a=0;a<i.length;++a)(r=i[a]).marker.collapsed&&(null==r.from||r.from<t)&&(null==r.to||r.to>t)&&(!n||n.width<r.marker.width)&&(n=r.marker);return n}function an(e){return rn(e,-1)}function on(e){return rn(e,e.text.length+1)}function sn(e,t){for(var n;n=an(t);)t=L(e,n.find().from.line);return t}function ln(e,t){var n=te&&t.markedSpans;if(n)for(var i,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return 1;if(0==i.from&&i.marker.inclusiveLeft&&function e(t,n,i){{var r;if(null==i.to)return r=i.marker.find().to,r=L(t,r.line),e(t,r,en(r.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==n.text.lene){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function dn(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}n.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},n.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},n.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},n.default=X?n.macDefault:n.pcDefault,n.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},p.lookupKey=Yt,p.isModifierKey=Gt,p.keyName=Kt,p.fromTextArea=function(t,e){if((e=e||{}).value=t.value,!e.tabindex&&t.tabindex&&(e.tabindex=t.tabindex),!e.placehold.placeholder),null==e.autofocus){var n=document.body;try{n=document.activeElement}catch(e){}e.autofocusment.body}function i(){t.value=s.getValue(lone)){var r=t.form,a=r.submit;try{var o=r.submit=function(){i(),r.ction(){return t},s.td(s.splayorm.sstri){if(thisat:functios,t},eatW.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this;)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){e=this.string.indexOf(e,this.pos);if(-1<e)return this.pos=e,!0},backUp:function(e){this.pos-=e},column:function(){return ti(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:functionze)},match:function(e,t,n){var i;return"string"!=typeof e?(i=this.string.slice(this.pos).match(e(i=function(e){return n?e.toLowerCase():e})(this.string.substr(this.pos,e.length))==i(e)?(!1!==t&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},p.StringStream=Qt,(p.TextMarker=Xt).prototype.clear=function(){if(!this.explicitlyCleared){for(var e=this.doc.cm,t=e&&!e.curOp,n=(t&&He(e),null),i=null,r=0;r<this.lines.length;++r){var a=this.lines[r],o=en(a.markedSpans,this);null!=o.to&&(i=O(a)),a.markedSpans=function(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n=n||[]).push(e[i]);return n}(a.markedSpans,o),null!=o.from?n=O(a):this.collapsed&&!ln(this.doc,a)&&e&&D(a,Me(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(r=0;r<this.lines.length;++r){var s=sn(e.doc,this.lines[r]),l=le(e.doc,s);l>e.display.maxLineLength&&(e.display.maxLine=s,e.display.maxLineLength=l,e.display.maxLineChanged=!0)}null!=n&&e&&E(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&_t(e)),t&&qe(e),j(this,"clear")}},Xt.prototype.find=function(){for(var e,t,n=0;n<this.lines.length;++n){var i=this.lines[n],r=en(i.markedSpans,this);null==r.from&&null==r.to||(i=O(i),null!=r.from&&(e=T(i,r.from)),null!=r.to&&(t=T(i,r.to)))}return"bookmark"==this.type?e:e&&{from:e,to:t}},Xt.prototype.getOptions=function(e){var t=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,replacedWith:e?t&&t.cloneNode(!0):t,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}},Xt.prototype.attachLine=function(e){var t;this.lines.length||!this.doc.cm||(t=this.doc.cm.curOp).maybeHiddenMarkers&&-1!=g(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this),this.lines.push(e)},Xt.prototype.detachLine=functiopush(this)},(p.SharedTextMarker=Zt).prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();j(this,"clear")}},Zt.prototype.find=function(){return this.primary.find()},Zt.prototype.getOptions=function(e){e=this.primary.getOptions(e);return e.shared=!0,e};var un=p.LineWidget=function(e,t,n){for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.cm=e,this.node=t};function pn(n){return function(){var e=!this.cm.curOp;e&&He(this.cm);try{var t=n.apply(this,arguments)}finally{e&&qe(this.cm)}return t}}function hn(e){return null!=e.height?e.height:(e.node.parentNode&&1==e.node.parentNode.nodeType||F(e.cm.display.measure,z("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function fn(e,t,n){e={text:e};return dn(e,t),e.height=n?n(e):1,e}function mn(e,t,n,i,r){var a=n.flattenSpans,o=(null==a&&(a=e.options.flattenSpans),""),s=null,l=new Qt(t,e.options.tabSize);for(""==t&&n.blankLine&&n.blankLine(i);!l.eol();){var c=l.pos>e.options.maxHighlightLength?(a=!1,l.pos=Math.min(t.length,l.start+5e4),null):n.token(l,i),d=l.current();l.start=l.pos,a&&s==c?o+=d:(o&&r(o,s),o=d,s=c)}o&&r(o,s)}function vn(e,t,n){var o=[e.state.modeGen];mn(e,t.text,e.doc.mode,n,function(e,t){o.push(e,t)});for(var i=0;i<e.state.overlays.length;++i){var s=e.state.overlays[i],l=1;mn(e,t.text,s.mode,!0,function(e,t){for(var n=l,i=e.length;i;){var r=(a=o[l]).length;r<=i?i-=r:(o.splice(l,1,a.slice(0,i),o[l+1],a.slice(i)),i=0),l+=2}if(t)if(s.opaque)o.splice(n,l-n,e,t),l=n+2;else for(;n<l;n+=2){var a=o[n+1];o[n+1]=a?a+" "+t:t}})}return o}function gn(e,t,n){var i=e.doc.mode,r=new Qt(t.text,e.options.tabSize);for(""==t.text&&i.blankLine&&i.blankLine(n);!r.eol()&&r.pos<=e.options.maxHighlightLength;)i.token(r,n),r.start=r.pos}un.prototype.clear=pn(function(){var e=this.line.widgets,t=O(this.line);if(null!=t&&e){for(var n=0;n<e.length;++n)e[n]==this&&e.splice(n--,1);e.length||(this.line.widgets=null),D(this.line,Math.max(0,this.line.height-hn(this))),E(this.cm,t,t+1)}}),un.prototype.changed=pn(function(){var e=this.height,e=(this.height=null,hn(this)-e);e&&(D(this.line,this.line.height+e),e=O(this.line),E(this.cm,e,e+1))});var yn={};function bn(e){return e?yn[e]||(yn[e]="cm-"+e.replace(/ +/g," cm-")):null}function wn(e,t,n){for(var i,r,a=t,o=!0;i=an(a);)o=!1,a=L(e.doc,i.find().from.line),r=r||a;var s,l,c,d,u={pre:z("pre"),col:0,pos:0,displ;do{u.measure=a==t&&n,u.pos=0,u.addToken=u.measure?xn:kn,(x||k)&&e.getOption("lineWrapping")&&(u.addToken=function(a){function o(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":"";return t+=" "}return function(e,t,n,i,r){return a(e,t.replace(/ {3,}/,o),n,i,r)}}(u.addToken)),n&&h&&a!=t&&!u.addedOne&&(n[0]=u.pre.appendChild(Ei(e.display.measure)),u.addedOne=!0);var p=function(e,t,n){var i=e.markedSpans;if(i)for(var r,a,o,s,l,c=e.text.length,d=0,u=1,p="",h=0;;){if(h==d){a=o=s="",h=1/0;for(var f=l=null,m=0;m<i.length;++m){var v=i[m],g=v.marker;v.from<=d&&(null==v.to||v.to>d)?(null!=v.to&&h>v.to&&(h=v.to,o=""),g.className&&(a+=" "+g.className),g.startStyle&&v.from==d&&(s+=" "+g.startStyle),g.endStyle&&v.to==h&&(o+=" "+g.endStyle),g.collapsed&&(!l||l.marker.width<g.width)&&(l=v)):v.from>d&&h>v.from&&(h=v.from),"bookmark"==g.type&&v.from==d&&g.replacedWith&&(f=g.replacedWith)}if(l&&(l.from||0)==d&&(Cn(t,(null==l.to?c:l.to)-d,null!=l.from&&l.marker.replacedWith),null==l.to))return l.marker.find();f&&!l&&Cn(t,0,f)}if(c<=d)break;for(var y=Math.min(c,h);;){if(p){var b,w=d+p.length;if(l||(b=y<w?p.slice(0,y-d):p,t.addToken(t,b,r?r+a:a,s,d+b.length==h?o:"")),y<=w){p=p.slice(y-d),d=y;break}d=w,s=""}p=n[u++],r=bn(n[u++])}}else for(var u=1;u<n.length;u+=2)t.addToken(t,n[u],bn(n[u+1]))}(a,u,(p=e,(s=a).styles&&s.styles[0]==p.state.modeGen||(s.styles=vn(p,s,s.stateAfter=xe(p,O(s)))),s.styles)),h=a==r}while(p&&(a=L(e.doc,p.to.line),o=!1),p);return n&&!u.addedOne&&(n[0]=u.pre.appendChild(o?z("span",""):Ei(e.display.measure))),u.pre.firstChild||ln(e.doc,t)||u.pre.appendChild(document.createTextNode("")),n&&x&&(c=M(a))&&(c[d=c.length-1].from==c[d].to&&--d,l=c[d],c=c[d-1],l.from+1==l.to&&c&&l.level<c.level&&((d=n[u.pos-1])&&d.parentNode.insertBefore(d.measureRight=Ei(e.display.measure),d.nextSibling))),v(e,"renderLine",e,t,u.pre),u.pre}var En=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;function kn(e,t,n,i,r){if(t){if(En.test(t))for(var a=document.createDocumentFragment(),o=0;;){En.lastIndex=o;var s=En.exec(t),l=s?s.index-o:t.length-o;if(l&&(a.appendChild(document.createTextNode(t.slice(o,o+l))),e.col+=l),!s)break;o+=1+l,"\t"==s[0]?(l=(l=e.cm.options.tabSize)-e.col%l,a.appendChild(z("span",oi(l),"cm-tab")),e.col+=l):((l=z("span","","cm-invalidchar")).title="\\u"+s[0].charCodeAt(0).toString(16),a.appendChild(l),e.col+=1)}else{e.col+=t.length;var a=document.createTextNode(t)}if(n||i||r||e.measure)return n=n||"",i&&(n+=i),r&&(n+=r),e.pre.appendChild(z("span",[a],n));e.pre.appendChild(a)}}function xn(e,t,n,i,r){for(var a=e.cm.options.lineWrapping,o=0;o<t.length;++o){var s=t.charAt(o),l=0==o,l=("\ud800"<=s&&s<"\udbff"&&o<t.length-1?(s=t.slice(o,o+2),++o):o&&a&&bi.test(t.slice(o-1,o+1))&&e.pre.appendChild(z("wbr")),e.measure[e.pos]=kn(e,s,n,l&&i,o==t.length-1&&r));x&&a&&" "==s&&o&&!/\s/.test(t.charAt(o-1))&&o<t.length-1&&!/\s/.test(t.charAt(o+1))&&(l.style.whiteSpace="normaldedOne=!0)}function Cn(e,t,n){n&&(e.display||(n=n.cloneNode(!0)),e.pre.appendChild(n),e.measure&&t&&(e.measure[e.pos]=n,e.addedOne=!0)),e.pos+=t}function _n(e,a,t,n,o){function i(e){return t?t[e]:null}function r(e,t,n){var i,r;t=t,n=n,r=o,(i=e).text=t,i.stateAfter&&(i.stateAfter=null),i.styles&&(i.styles=null),null!=i.order&&(i.order=null),cn(i),dn(i,n),(t=r?r(i):1)!=i.height&&D(i,t),j(e,"change",e,a)}var s=a.from,l=a.to,c=a.text,d=L(e,s.line),u=L(e,l.line),p=H(c),h=i(c.length-1),f=l.line-s.line;if(0==s.ch&&0==l.ch&&""==p){for(var m=0,v=c.length-1,g=[];m<v;++m)g.push(fn(c[m],i(m),o));r(u,u.text,h),f&&e.remove(s.line,f),g.length&&e.insert(s.line,g)}else if(d==u)if(1==c.length)r(d,d.text.slice(0,s.ch)+p+d.text.slice(l.ch),h);else{for(g=[],m=1,v=c.length-1;m<v;++m)g.push(fn(c[m],i(m),o));g.push(fn(p+d.text.slice(l.ch),h,o)),r(d,d.text.slice(0,s.ch)+c[0],i(0)),e.insert(s.line+1,g)}else if(1==c.length)r(d,d.text.slice(0,s.ch)+c[0]+u.text.slice(l.ch),i(0)),e.remove(s.line+1,f);else{r(d,d.text.slice(0,s.ch)+c[0],i(0)),r(u,p+u.text.slice(l.ch),h);for(m=1,v=c.length-1,g=[];m<v;++m)g.push(fn(c[m],i(m),o));1<f&&e.remove(s.line+1,f-1),e.insert(s.line+1,g)}j(e,"change",e,a),y(e,n.anchor,n.head,null,!0)}function Tn(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,i=0;t<n;++t)e[t].parent=this,i+=e[t].height;this.height=i}function Sn(e){for(var t=0,n=0,i=0,r=(this.children=e).length;i<r;++i){var a=e[i];t+=a.chunkSize(),n+=a.height,a.parent=this}this.size=t,this.height=n,this.parent=null}Tn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n,i=e,r=e+t;i<r;++i){var a=this.lines[i];this.height-=a.height,(n=a).parent=null,cn(n),j(a,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[ight+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0,r=t.length;i<r;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},Sn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n,i=0;i<this.children.length;++i){var r=this.children[i],a=r.chunkSize();if(e<a){var o=Math.min(t,a-e),s=r.height;if(r.removeInner(e,o),this.e=0}else e-=a}this.size-t<25&&(this.collapse(n=[]),this.children=[new Tn(n)],this.children[0].parent=this)},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0,r=this.children.length;i<r;++i){var a=this.children[i],o=a.chunkSize();if(e<=o){if(a.insertInner(e,t,n),a.lines&&50<a.lines.length){for(;50<a.lines.length;){var s=new Tn(a.lines.splice(a.lines.length-25,25));a.height-=s.height,this.children.splice(i+1,0,s),s.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t,n=new Sn(e.children.splice(e.children.length-5,5))}while(e.parent?(e.size-=n.size,e.height-=n.height,t=g(e.parent.children,e),e.parent.children.splice(t+1,0,n)):(((t=new Sn(e.children)).parent=e).children=[t,n],e=t),n.parent=e.parent,10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0,r=this.children.length;i<r;++i){var a=this.children[i],o=a.chunkSize();if(e<o){var s=Math.min(t,o-e);if(a.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var An,Pn=0,m=p.Doc=function(e,t,n){if(!(this instanceof m))return new m(e,t,n);null==n&&(n=0),Sn.call(this,[new Tn([fn("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=Vn(),this.frontier=n;n=T(n,0);this.sel={from:n,to:n,head:n,anchor:n,shift:!1,extend:!1,goalColumn:null},this.id=++Pn,thiIn=(m.prototype=function(e,t){function n(){}n.prototype=e;e=new n;t&&li(t,e);return e}(Sn.prototype,{iter:functionerN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0,r=t.length;i<r;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Mn(this,this.first,this.first+this.size);return!1==st,0),n=this.first+this.size-1;vt(this,{from:t,to:T(n,L(this,n).text.length),text:ki(e),origin:"n(e,t,n,i){f(this,e,t=P(this,t),n=n?P(this,n):t,i)},getRange:function(e,t,n){e=On(this,P(this,e),P(this,t));return!1===n?e:e.join(n||"\n")},getLine:function(e){e=this.getLineHant){Ct(this,e)&&f(this,t,T(e,0),P(this,T(e)))},removeLine:function(e){e?f(this,"",P(this,T(e-1)),P(this,TtLineHandle:function(e){if(Ct(this,e))return L(this,e)},getLineNumber:O,lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return P(this,e)},getCursor:function(e){var t=this.sel,e=null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||!1===e?t.to:t.from;return Et(e)},somethingSelected:function(){return!S(this.sel.head,this.sel.anchor)},setCursor:ze(function(e,t,n){t=P(this,"number"==typeof e?T(e,t||0):e);n?I(this,t):y(this,t,t)}),setSelection:ze(function(e,t){y(this,P(this,e),P(this,t||e))}),extendSelection:ze(function(e,t){I(this,P(this,e),t&&P(this,t))}),getSelection:function(e){returm,this.sel.to,e)},replaceSelection:function(e,t,n){vt(thi(function(){yion(){yt(this,"redo")}),setExtending:function(e){this.sel.extend=e},historySize:function(){var e=this.histoh}},clearHinter=0,this.history.lastOp=this.history.lastOrigin=null},isClean:function(){return 0==this.history.dirtyCoundone:zn(this.history.undone)}},setHistory:function(e){var t=this.history=Vn();t.done=e.done.slice(0),t.undone=e.undone.slice(0)},markText:function(e,t,n){retution(e){var )&&t.push(r.marker.parent||r.marker)}return t},getAllMarks:function(){var i=[];return this.iter(function(e){var t=e.markedSpans;if(t)for(var n=0;n<t.lenth+1;if(t<e)return n=t,!0;t-=e,++i}),P(this,T(i,n))},indexFromPos:function(e){var t=(e=P(this,e)).ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new m(Mn(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){var t=this.first,n=this.first+this.size,n=(null!=(e=e||{}).from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to),new m(Mn(this,t,n),e.mode||this.modeOption,t));return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],n},unlinkDoc:function(e){if(e instanceof p&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc==e){this.linked.splice(t,1),e.unlinkDoc(tory==this.history&&(i=[e.id],Ln(e,function(e){i.push(e.id)},!0),e.history=Vn(),e.history.done=zn(this.history.done,i),e.history.undone=zn(this.history.undone,i))},iterLinkedDocs:function(e){Ln(this,e)},getMode:function(){return this.mode},getEditer,"iter insert remove copy getEditor".split(" "));for(An in m.prototype)m.prototype.hasOwnProperty(An)&&g(In,An)<0&&(p.prototype[An]=function(e){return function(){return e.apply(this.doc,arguments)}}(m.prototype[An]));function Ln(e,s,l){!function e(t,n,i){if(t.linked)for(var r=0;r<t.linked.length;++r){var a,o=t.linked[r];o.doc!=n&&(a=i&&o.sharedHist,l&&!a||(s(o.doc,a),e(o.doc,t,a)))}}(e,null,!0)}function Dn(e,t){if(t.cm)throw new Error("This document is already in use.");re((e.doc=t).cm=e),ne(e),e.options.lineWrapping||ce(e),e.options.mode=t.modeOption,E(e)}function L(e,t){for(t-=e.first;!e.lines;)for(var n=0;;++n){var i=e.children[n],r=i.chunkSize();if(t<n e.iter(t.line,n.line+1,function(e){e=e.text;r==n.line&&(e=e.slice(0,n.ch)),r==t.line&&(e=e.slice(t.ch)),i.push(e),++r}),i}function Mn(e,t,n){var i=[];return e.iter(t,n,function(e){i.push(e.text)}),i}function D(e,t){for(var n=t-e.height,i=e;i;i=i.parent)i.height+=n}function O(e){if(null==e.parent)return null;for(var t=e.parent,n=g(t.lines,e),i=t.parent;i;i=(t=i).parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function Nn(e,t){var n=e.first;e:do{for(var i=0,r=e.children.length;i<r;++i){var a=e.children[i],o=a.height;if(t<o){e=a;continue e}t-=o,n+=a.chunkSize()}return n}while(!e.lines);for(i=0,r=e.lines.length;i<r;++i){var s=e.lines[i].height;if(t<s)break;t-=s}return n+i}function Rn(e,t){for(var n=0,i=(t=sn(e.doc,t)).parent,r=0;r<i.lines.length;++r){var a=i.lines[r];if(a==t)break;n+=a.height}for(var o=i.parent;o;o=(i=o).parent)for(r=0;r<o.children.length;++r){var s=o.children[r];if(s==i)break;n+=s.height}return n}function M(e){var t=e.order;return t=null==t?e.order=ji(e.text):t}function Vn(){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function jn(t,n,e,i){var r=n["spans_"+t.id],a=0;t.iter(Math.max(t.first,e),Math.min(t.first+t."spans_"+t.id]={}))[a]=e.markedSpans),++a})}function Hn(e,t){var n={from:t.from,to:ht(t),text:On(e,t.from,t.to)};return jn(e,n,t.from.line,t.to.line+1),Ln(e,function(e){jn(e,n,t.from.line,t.to.line+1)},!0),n}function qn(e,t,n,i){var r=e.history,a=(r.undone.length=0,+new Date),o=H(r.done);if(o&&(r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&r.lastTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))){var s=H(o.changes);S(t.from,t.to)&&S(t.from,s.to)?s.to=ht(t):o.changes.push(Hn(e,t)),o.anchorAfter=n.anchor,o.headAfter=n.head}else{for(o={changes:[Hn(e,t)],anchorBefore:e.sel.anchor,headBefore:e.sel.head,anchorAfter:n.anchor,headAfter:n.head},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift();r.dirtyCounter<0?r.dirtyCounter=NaN:r.dirtyCounter++}r.lastTime=a,r.lastOp=i,r.lastOrigin=t.origin}function zn(e,t){for(var n=0,i=[];n<e.length;++n){var r=e[n],a=r.changes,o=[];i.push({changes:o,anchorBefore:r.anchorBefore,headBefore:r.headBefore,anchorAfter:r.anchorAfter,headAfter:r.hefrom,to:c.to,text:c.text}),t)for(var d in c)(l=d.match(/^spans_(\d+)$/))&&-1<g(t,Number(l[1]))&&(H(o)[d]=c[d],delete c[d])}}return i}function Fn(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function Bn(e,t,n,i){for(var r=0;r<e.length;++r){for(var a=e[r],o=!0,s=0;s<a.changes.length;++s){var l=a.changes[s];if(a.copied||(l.from=Et(l.from),l.to=Et(l.to)),n<l.from.line)l.from.line+=i,l.to.line+=i;else if(t<=l.to.line){o=!1;break}}a.copied||(a.anchorBefore=Et(a.anchorBeforeheadBefore),Fn(a.anchorAfter),Fn(a.headAfter)):(e.splice(0,r+1),r=0)}}function Un(e,t){var n=t.from.line,i=t.tion Wn(){Gn(this)}functi N(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Yn(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Gn(e){N(e),Yn(e)}function Kn(e){return e.target||e.srcElement}function Qn(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),t=X&&e.ctrlKey&&1==t?3:t}function R(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):((e=e._handlers||(e._handlers={}))[t]||(e[t]=[])).push(n)}function V(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers&&e._handlers[t];if(i)for(var r=0;r<i.length;++r)if(i[r]==n){i.splice(r,1);break}}}function v(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}p.e_stop=Gn,p.e_preventDefault=N,p.e_ar n=e._handlers&&e._handlers[t];if(n){var i=Array.prototype.slice.call(arguments,2);Xn||(++Jn,Xn=[],setTimeout(Zn,0));for(var r=0;r<n.length;++r)Xn.push(function(e){return function(){e.apply(null,i)}}(n[r]))}}function Zn(){--Jn;var e=Xn;Xh;++t)e[t]()}function ei(e,t){e=e._handlers&&e._handlers[t];return e&&0<e.length}p.on=R,p.off=V,p.signal=v;var ti=30,ni=p.Pass={toString:function(){return"CodeMirrorll==t&&-1==(t=e.search(/[^\s\upe={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},p.countColumn=ri;var ai=[""];function oi(e){for(;ai.length<=e;)ai.push(H(ai)+" ");return ai[e]}function H(e){return e[e.length-1]}function si(e){K?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function g(e,t){if(e.indexOf)return e.indexOf(t);for(nProperty(n)&&(t[n]=e[n]);return t}function ci(e){for(var t=[],n=0;n<e;++n)t.push(void 0);return t}function q(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}var di=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/;function ui(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||di.test(e))}function pi(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return;return 1}var hi=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;function z(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&);else if(t)for(var a=0;a<t.length;++a)r.appendChild(t[a]);return r}function fi(e){for(var t=tChild);return e}function F(e,t){return fi(e).appendChild(t)}function mi(e,t){W?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function B(e){return e.getBoundingClientRect()}p.replaceGetRect=function(e){B=e};var vi,gi,yi=!W&&("draggable"in(r=z("div"))||"dragDrop"in r),bi=/^$/;function wi(e){return null!=vi?vi:(F(e,e=z("div",null,null,"width: 50px; height: 50px; overflow-x: scroll")),(vi=e.offsetWidth?e.offsetHeight-e.clientHeight:vi)||0)}function Ei(e){var t;return null==gi&&(t=z("span",""),F(e,z("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(gi=t.offsetWidth<=1&&2<t.offsetHeight&&!U)),gi?z("span",""):z("span","",null,"display: inline-block; width: 1px; margin-right: -1px")}b?bi=/$'/:$&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?bi=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:k&&(bi=/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.]|\?[\w~`@#$%\^&*(_=+{[|><]/);var ki=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t),a=(-1==r&&(r=e.y{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)}),Ci="oncopy"in(c=z("div"))||(c.setAttribute("oncopy","return;"),"function"==typeof c.oncopy),_i={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",0;t++)_i[t+48]=String(t);for(t=65;t<=90;t=_i[t+63235]="F"+t;function Ti(e){return e.level%2?e.to:e.from}function Si(e){return e.level%2?e.from:e.to}function Ai(e){e=M(e);return e?Ti(e[0]):0}function Pi(e){var t=M(e);return t?Si(H(t)):e.text.length}function Ii(e,t){var n=L(e.doc,t),e=sn(eM(e));return T(t,n?(n[0].level%2?Pi:Ai)(e):0)}function Li(n,e,t,i){var r=M(n);if(!r)return Di(n,e,t,i);for(var a=i?function(e,t){for(;0<(e+=t)&&hi.test(n.text.charAt(e)););return e}:function(e,t){return e+t},o=r[0].level,s=0;s<r.length;++s){var l=r[s],c=l.level%2==o;if(l.from<e&&l.to>e||c&&(l.from==e||l.to==e))break}for(var d=a(e,l.level%2?-t:t);null!=d;)if(l.level%2==o){if(!(d<l.from||d>l.to))break;d=(l=r[s+=t])&&(0<t==l.level%2?a(l.to,-1):a(l.from,1))}else if(d==Ti(l))d=(l=r[--s])&&Si(l);else{if(d!=Si(l))break;d=(l=r[++s])&&Ti(l)}return d<0||d>n.text.length?null:d}function Di(e,t,n,i){var r=t+n;if(i)for(;0<r&&hi.test(e.text.charAt(r));)r+=n;return r<0||r>e.text.length?null:r}Oi=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Mi=/[stwN]/,Ni=/[LRr]/,Ri=/[Lb1n]/,Vi=/[1n]/;var Oi,Mi,Ni,Ri,Vi,ji=function(e){if(!Oi.test(e))return!1;for(var t,n=e.length,i=[],r=0;r<n;++r)i.push(d=(t=e.charCodeAt(r))<=255?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL".charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1791?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr".charAt(t-1536):1792<=t&&t<=2220?"r":"L");for(var r=0,a="L";r<n;++r)"m"==(d=i[r])?i[r]=a:a=d;for(var r=0,o="L";r<n;++r)"1"==(d=i[r])&&"r"==o?i[r]="n":Ni.test(d)&&"r"==(o=d)&&(i[r]="R");for(r=1,a=i[0];r<n-1;++r)"+"==(d=i[r])&&"1"==a&&"1"==i[r+1]?i[r]="1":","!=d||a!=i[r+1]||"1"!=a&&"n"!=a||(i[r]=a),a=d;for(r=0;r<n;++r)if(","==(d=i[r]))i[r]="N";else if("%"==d){for(var s=r+1;s<n&&"%"==i[s];++s);for(var l=r&&"!"==i[r-1]||s<n-1&&"1"==i[s]?"1":"N",c=r;c<s;++c)i[c]=l;r=s-1}for(r=0,o="L";r<n;++r){var d=i[r];"L"==o&&"1"==d?i[r]="L":Ni.test(d)&&(o=d)}for(r=0;r<n;++r)if(Mi.test(i[r])){for(s=r+1;s<n&&Mi.test(i[s]);++s);for(l="L"==(r?i[r-1]:"L")||"L"==(s<n-1?i[s]:"L")?"L":"R",c=r;c<s;++c)i[c]=l;r=s-1}for(var u,p=[],r=0;r<n;)if(Ri.test(i[r])){var h=r;for(++r;r<n&&Ri.test(i[r]);++r);p.push({from:h,to:r,level:0})}else{var f=r,m=p.length;for(++r;r<n&&"L"!=i[r];++r);for(c=f;c<r;)if(Vi.test(i[c])){f<c&&p.splice(m,0,{from:f,to:c,level:1});var v=c;for(++c;c<r&&Vi.test(i[c]);++c);p.splice(m,0,{from:v,to:c,level:2}),f=c}else++c;f<r&&p.splice(m,0,{from:f,to:r,level:1})}return 1==p[0].level&&(u=e.match(/^\s+/))&&(p[0].from=u[0].length,p.unshift({from:0,to:u[0].length,level:0})),1==H(p).level&&(u=e.match(/\s+$/))&&(H(p).to-=u[0].length,p.push({from:n-u[0].length,to:n,level:0})),p[0].level!=H(p).level&&p.push({from:n,to:n,level:p[0].level}),p};return p.version="3.11 +",p}(),define("codemirror",function(e){return function(){return e.CodeMirror}}(this)),CodeMirror.defineMode("css",function(e){return CodeMirror.getMode(e,"text/css")}),CodeMirror.defineMode("crict";var i=e.indentUnit,r=t.hooks||{},a=t.atMediaTypes||{},o=t.atMediaFeatures||{},s=t.propertyKeywords||{},l=t.colorKeywords||{},c=t.valueKeywords||{},d=!!t.allowNested,u=null;function p(e,t){return u=t,e}function h(e,t){var n=e.next();if(r[n]){var i=r[n](e,t);if(!1!==i)return i}return"@"==n?(e.eatWhile(/[\w\\\-]/),p("def",e.current())):"="!=n?"~"!=n&&"|"!=n||!e.eat("=")?'"'==n||"'"==n?(t.tokenize=f(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),u="hash","atom"):"!"==n?(e.match(/^\s*\w*/),u="important","keyword"):/\d/.test(n)?(e.eatWhile(/[\w.%]/),u="unit","number"):"-"===n?/\d/.test(e.peek())?(e.eatWhile(/[\w.%]/),u="unit","number"):e.match(/^[^-]+-/)?u="meta":void 0:/[,+>*\/]/.test(n)?(u="select-op",null):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?u="qualifier":":"==n?p("operator",n):/[;{}\[\]\(\)]/.test(n)?p(null,n):(u=("u"==n&&e.match("rl(")?(e.backUp(1),t.tokenize=m):e.eatWhile(/[\w\\\-]/),"variable"),"property"):(u="compare",null):void(u="compare")}function f(r,a){return function(e,t){for(var n,i=!1;null!=(n=e.next())&&(n!=r||i);)i=!i&&"\\"==n;return i||(a&&e.backUp(1),t.tokenize=h),u="string"}}function m(e,t){return e.next(),e.match(/\s*[\"\']/,!1)?t.tokenize=h:t.tokenize=f(")",!0),u="(",null}return{startState:function(e){return{tokenize:h,baseIndent:e||0,stack:[]}},token:function(e,t){var n,i;return t.tokenize=t.tokenize||h,t.tokenize==h&&e.eatSpace()?null:((n=t.tokenize(e,t))&&"string"!=typeof n&&(n=p(n[0],n[1])),i=t.stack[t.stack.length-1],"variable"==n?("variable-definition"==u&&t.stack.push("propertyValue"),"variable-2"):("property"==n?"propertyValue"==i?n=c[e.current()]?"string-2":l[e.current()]?"keyword":"variable-2":"rule"==i?s[e.current()]||(n+=" error"):"block"==i?n=s[e.current()]?"property":l[e.current()]?"keyword":c[e.current()]?"string-2":"tag":i&&"@media{"!=i?"@media"==i?n=a[e.current()]?"attribute":/^(only|not)$/i.test(e.current())?"keyword":"and"==e.current().toLowerCase()||o[e.current()]?"error":"attribute error":"@mediaType"==i?n=a[e.current()]?"attribute":"and"==e.current().toLowerCase()?"operator":(/^(only|not)$/i.test(e.current())||o[e.current()],"error"):"@mediaType("==i?s[e.current()]||(a[e.current()]?n="error":"and"==e.current().toLowerCase()?n="operator":/^(only|not)$/i.test(e.current())?n="error":n+=" error"):n="error":n="tag":"atom"==n?i&&"@media{"!=i&&"block"!=i?"propertyValue"==i?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e.current())||(n+=" error"):n="error":n="builtin":"@media"==i&&"{"==u&&(n="error"),"{"==u?"@media"==i||"@mediaType"==i?(t.stack.pop(),t.stack[t.stack.length-1]="@media{"):t.stack.push(d?"block":"rule"):"}"==u?("interpolation"==t.stack[t.stack.length-1]&&(n="operator"),t.stack.pop(),"propertyValue"==i&&t.stack.pop()):"interpolation"==u?t.stack.push("interpolation"):"@media"==u?t.stack.push("@media"):"@media"==i&&/\b(keyword|attribute)\b/.test(n)?t.stack.push("@mediaType"):"@mediaType"==i&&","==e.current()?t.stack.pop():"@mediaType"==i&&"("==u?t.stack.push("@mediaType("):"@mediaType("==i&&")"==u?t.stack.pop():"rule"!=i&&"block"!=i||":"!=u?"propertyValue"==i&&";"==u&&t.stackn=e.stack.length;return/^\}/.test(t)&&(n-="propertyValue"==e.stack[e.stack.length-1]?2:1),e.baseIndent+n*i},electricChars:"}"}}),!function(){function e(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=!0;return t}var t=e(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),n=e(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),i=e(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),r=e(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),a=e(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","dow","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"]);function o(e,t){for(var n,i=!1;null!=(n=e.next());){if(i&&"/"==n){t.tokenize=null;break}i="*"==n}return["comment","comment"]}CodeMirror.defineMIME("text/css",{atMediaTypes:t,atMediaFeatures:n,propertyKeywords:i,colorKeywords:r,valueKeywords:a,hooks:{"<":function(e,t){function n(e,t){for(var n,i=0;null!=(n=e.next());){if(2<=i&&">"==n){t.tokenize=null;break}i="-"==n?i+1:0}return["comment","comment"]}if(e.eat("!"))return(t.tokenize=n)(e,t)},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=o)(e,t)}},name:"css-base"}),CodeMirror.defineMIME("text/x-scss",{atMediaTypes:t,atMediaFeatures:n,propertyKeywords:i,colorKeywords:r,valueKeywords:a,allowNested:!0,hooks:{$:function(e){return e.match(/^[\w-]+/),":"==e.peek()?["variable","variable-definition"]:["variable","variable"]},"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=o)(e,t):["operator","operator"]},"#":function(e){return e.eat("{")?["operator","interpolation"]:(e.eatWhile(/[\w\\\-]/),["atom","hash"])}},name:"css-base"})}(),define("codemirror.css",["codemirror"],function(){}),CodeMirror.defineMode("xml",function(e,t){var a,o,r,s,l,c=e.indentUnit,d=t.multilineTagIndentFactor||1,u=t.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},p=t.alignCDATA;function h(t,n){function e(e){return(n.tokenize=e)(t,n)}var i=t.next();if("<"!=i)return"&"==i?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null);if(t.eat("!"))return t.eat("[")?t.match("CDATA[")?e(m("atom","]]>")):null:t.match("--")?e(m("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),e(function i(r){return function(e,t){for(var n;null!=(n=e.next());){if("<"==n)return t.tokenize=i(r+1),t.tokenize(e,t);if(">"==n){if(1!=r)return t.tokenize=i(r-1),t.tokenize(e,t);t.tokenize=h;break}}return"meta"}}(1))):null;if(t.eat("?"))return t.eatWhile(/[\w\._\-]/),n.tokenize=m("meta","?>"),"meta";var r,i=t.eat("/");for(a="";r=t.eat(/[^\s\u00a0=<>\"\'\/?]/);)a+=r;return a?(o=i?"closeTag":"openTag"=i&&e.eat(">")?(t.tokenize=h,o=">"==i?"endTag":"selfcloseTag)==n){t.tokenize=f;break}return"string"}),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function m(n,i){return function(e,t){for(;!e.eol();){if(e.match(i)){t.tokenize=h;break}e.next()}return n}}function n(){for(var e=arguments.length-1;0<=e;e--)r.cc.push(arguments[e])}function v(){return n.apply(null,arguments),!0}function g(){r.context&&(r.context=r.context.prev)}function i(e){var t,i;return"openTag"==e?(r.tagName=a,r.tagStart=s.column(),v(b,(i=r.startOfLine,function(e){var t,n=r.tagName;return r.tagName=r.tagStart=null,"selfcloseTag"==e||"endTag"==e&&u.autoSelfClosers.hasOwnProperty(n.toLowerCase())?y(n.toLowerCase()):"endTag"==e&&(y(n.toLowerCase()),e=n,n=i,t=u.doNotIndent.hasOwnProperty(e)||r.context&&r.context.noIndent,r.context={prev:r.context,tagName:e,indent:r.indented,startOfLine:n,noIndent:t}),v()}))):"closeTag"==e?(e=!1,r.context?r.context.tagName!=a&&(u.implicitlyClosed.hasOwnProperty(r.context.tagName.toLowerCase())&&g(),e=!r.context||r.context.tagName!=a):e=!0,e&&(l="error"),v((t=e,function(e){return t&&(l="error"),"endTag"==e?(g(),v()):(l="error",v(arguments.callee))}))):v()}function y(e){for(var t;;){if(!r.context)return;if(t=r.context.tagName.toLowerCase(),!u.contextGrabbers.hasOwnProperty(t)||!u.contextGrabbers[t].hasOwnProperty(e))return;g()}}function b(e){return"word"==e?(l="attribute",v(w,b)):"endTag"==e||"selfcloseTag"==e?n():(l="error",v(b))}function w(e){return"equals"==e?v(E,b):(u.allowMissing?"word"==e&&(l="attribute"):l="error",("endTag"==e||"selfcloseTag"==e?n:v)())}function E(e){return"string"==e?v(k):("word"==e&&u.allowUnquoted?(l="string",v):(l="error","endTag"==e||"selfCloseTag"==e?n:v))()}function k(e){return"string"==e?v(k):n()}return{startState:function(){return{tokenize:h,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.startOfLine=!0,t.indented=e.indentation()),e.eatSpace())return null;l=o=a=null;var n=t.tokenize(e,t);if(t.type=o,(n||o)&&"comment"!=n)for(r=t,s=e;;)if((t.cc.pop()||i)(o||n))break;return t.startOfLine=!1,l||n},indent:function(e,t,n){var i=e.context;if(e.tokenize!=f&&e.tokenize!=h||i&&i.noIndent)return n?n.match(/^(\s*)/)[0].length:0;if(e.tagName)return e.tagStart+c*d;if(p&&/<!\[CDATA\[/.test(t))return 0;for(i&&/^<\//.test(t)&&(i=i.prev);i&&!i.startOfLine;)i=i.prev;return i?i.indent+c:0},electricChars:"/",configuration:t.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),define("codemirror.xml",["codemirror"],function(){}),CodeMirror.defineMode("htmlmixed",function(e,t){var s=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),l=CodeMirror.getMode(e,"css"),c=[],n=t&&t.scriptTypes;if(c.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:CodeMirror.getMode(e,"javascript")}),n)for(var i=0;i<n.length;++i){var r=n[i];c.push({matches:r.matches,mode:r.mode&&CodeMirror.getMode(e,r.mode)})}function a(e,t){var n=t.htmlState.tagName,i=s.token(e,t.htmlState);if("script"==n&&/\btag\b/.test(i)&&">"==e.current()){var r=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);(r=r?r[1]:"")&&/[\"\']/.test(r.charAt(0))&&(r=r.slice(1,r.length-1));for(var a=0;a<c.length;++a){var o=c[a];if("string"==typeof o.matches?r==o.matches:o.matches.test(r)){o.mode&&(t.token=d,t.localMode=o.mode,t.localState=o.mode.startState&&o.mode.startState(s.indent(t.htmlState,"")));break}}}else"style"==n&&/\btag\b/.test(i)&&">"==e.current()&&(t.token=u,t.localMode=l,t.loca,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function u(e,t){return e/<\/\s*style\s*>/,l.token(e,t.localState))}return c.push({matches:/./,mode:CodeMirror.getMode(e,"text/plain")}),{startState:function(){return{token:a,localMode:null,localState:null,htmlState:s.startState()}},copyState:function(e){var t;return e.lhtmlState)}},token:function(e,t.test(t)?s.indent(e.htmlState,t):e.localMode.indent?e.localMode.indent(e.localState,t):CodeMirror.Pass},electricChars:"/{}:",innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}},"xml","javascript","css"),CodeMirror.defineMIME("tmixed",["codemirror","codemirror.xml"],function(){}),CodeMirror.defineMode("javascript",function(e,o){var i,r,s=e.indentUnit,l=o.json,c=o.typescript,a=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("operator"),a={type:"atom",style:"atom"},o={if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:i,delete:i,throw:i,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:r,typeof:r,instanceof:r,true:a,false:a,null:a,undefined:a,NaN:a,Infinity:a,this:e("this")};if(c){var s,t={type:"variable",style:"variable-3"},l={interface:e("interface"),class:e("class"),extends:e("extends"),constructor:e("constructor"),public:e("public"),private:e("private"),protected:e("protected"),static:e("static"),super:e("super"),string:t,number:}return o}(),d=/[+\-*&%=<>!?|~^]/;function u(e,t,n){return(t.tokenize=n)(e,t)}function p(e,t){for(var n,i=!1;null!=(n=e.next());){if(n==t&&!i)return;i=!i&&"\\"==n}return i}function h(e,t,n){return i=e,r=n,t}function f(e,t){var n,i=e.next();return'"'==i||"'"==i?u(e,t,(n=i,function(e,t){return p(e,n)||(t.tokenize=f),h("string","string")})):/[\[\]{}\(\),;\:\.]/.test(i)?h(i):"0"==i&&e.eat(/x/i)?(e.eatWhile(/[\da-f]/i),h("number","number")):/\d/.test(i)||"-"==i&&e.eat(/\d/)?(e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),h("number","number")):"/"==i?e.eat("*")?u(e,t,m):e.eat("/")?(e.skipToEnd(),h("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(p(e,"/"),e.eatWhile(/[gimy]/),h("regexp","string-2")):(e.eatWhile(d),h("operator",null,e.current())):"#"==i?(e.skipToEnd(),h("errortyIsEnumerable(i)&&a[i])&&"."!=t.lastType?h(e.type,e.style,i):h(urn h("comment","comment")}var n={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0};function v(e,t,n,i,r,a){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=a,null!=i&&(this.align=i)}function V(e,t,n,i,r){var a=e.cc;for(g.state=e,g.stream=r,g.marked=null,g.cc=a,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((a.length?a.pop():l?S:T)(n,i)){for(;a.length&&a[a.length-1].lex;)a.pop()();return g.marked?g.marked:"variable"==n&&function(=t)return 1}(e,i)?"variable-2":t}}var g={state:null,column:null,marked:null,cc:null};function y(){for(var e=arguments.length-1;0<=e;e--)g.cc.push(arguments[e])}function b(){return y.apply(null,arguments),!0}function w(n){function e(e){for(var t=e;t;t=t.next)if(t.name==n)rt:{name:"arguments"}};function E(){g.state.context={prev:g.state.context,vars:g.state.localVars},g.state.localVars=j}functio;e.lexical=new v(e.indented,g.stream.column(),t,null,e.lexical,n)}return e.lex=!0,e}function C(){var e=g.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function _(t){return function(e){return e==t?b():";"==t?y():b(arguments.callee)}}function T(e){var n;return"var"==e?b(x("vardef"),O,_(";"),C):"keyword a"==e?b(x("form"),S,T,C):"keyword b"==e?b(x("form"),T,C):"{"==e?b(x("}"),D,C):";"==e?b():"if"==e?b(x("form"),S,T,C,(n=g.state.indented,function(e,t){return"keyword b"==e&&"else"==t?(g.state.lexical=new v(n,0,"form",null,g.state.lexical),b(T,C)):y()})):"function"==e?b(R):"for"==e?b(x("form"),_("("),x(")"),$,_(")"),C,T,C):"variable"==e?b(x("stat"),q):"switch"==e?b(x("form"),S,x("}","switch"),_("{"),D,C,C):"case"==e?b(S,_(":")):"default"==e?b(_(":")):"catch"==e?b(x("form"),E,_("("),K,_(")"),T,C,k):y(x("stat"),S,_(";"),C)}function S(e){return t(e,P)}function A(e){returnt):"function"==e?b(R):"keyword c"==e?b(H):"("==e?b(x(")"),H,_(")"),C,t):"operator"==e?b(S):"["==e?b(x("]"),L(A,"]"),C,t):"{"==e?b(x("}"),L(F,"}"),C,t):b()}function H(e){return e.match(/[;\}\)\],]/)?y():y(S)}function P(e,t){return","==e?b(S?"("==e?b(x(")","call"),L(A,")"),C,n):"."==e?b(z,n):"["==e?b(x("]"),S,_("]"),C,n):void 0:void 0}function q(e){return":"==e?b(C,T):y(P,_(";"),C)}function z(e){if("variable"==e)return g.marked="property",b()}function F(e,t){if("variable"==e){if(g.marked="property","get"==t||"set"==t)return b(B)}else"number"!=e&&"string"!=e||(g.marked=e+" property");if(n.hasOwnProperty(e))return b(_(":"),A)}function B(e){tion L(n,i){function r(e){var t;return","==e?("call"==(t=g.state.lexical).info&&(t.pos=(t.pos||0)+1),b(n,r)):e==i?b():b(_(i))}return function(e){return e==i?b():y(n,r)}}function D(e){return"}"==e?b():y(T,D)}function U()}function O(e,t){return"variable"==e?(w(t),c?b(U,M):b(M)):y()}function M(e,t){return"="==t?b(A,M):",e){return"var"==e?b(O,_(";"),N):";"==e?b(N):"variable"==e?b(Y):y(S,_(";"),N)}function Y(e,t){return"in"==t?b(S):b(P,N)}function N(e,t){return";"==e?b(G):"in"==t?b(S):y(S,_(";"),G)}function G(e){")"!=e&&b(S)}function R(e,t){return"variable"==e?(w(t),b(R)):"("==e?b(x(")"),E,L(K,")"),C,T,k):void 0}function K(e,t){if("variable"==e)return w(t),c?b(U):b()}return C.lex=!0,{startState:function(e){return{tokenize:f,lastType:null,cc:[],lexical:new v((e||0)-s,0,"block",!1),localVars:o.localVars,globalVars:o.globalVars,context:o.localVars&&{vars:o.localVars},indented:0}},token:function(e,t){var n;return e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),t.tokenize!=m&&e.eatSpace()?null:(n=t.tokenize(e,t),"comment"==i?n:(t.lastType=i,V(t,n,i,r,e)))},indent:function(e,t){var n,i,r,a;return e.tokenize==m?CodeMirror.Pass:e.tokenize!=f?0:(a=(n=t&&t.charAt(0))==(r=(i="stat"==(i=e.lexical).type&&"}"==n?i.prev:i).type),null!=o.statementIndent&&"stat"==(i=")"==r&&i.prev&&"stat"==i.prev.type?i.prev:i).type?i.indented+o.statementIndent:"vardef"==r?i.indented+("operator"==e.lastType||","==e.lastType?4:0):"form"==r&&"{"==n?i.indented:"form"==r?i.indented+s:"stat"==r?i.indented+("operator"==e.lastType||","==e.lastType?s:0):"switch"!=i.info||a?i.align?i.column+(a?0:1):i.indented+(a?0:s):i.indented+(/^(?:case|default)\b/.test(t)?s:2*s))},electricChars:":{}",jsonMode:l}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("applicscript:!0}),define("codemirror.javascriptunction(e){return n(e,window,document)}):"object"==typeof nction p(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(e)?t:null}function l(e,t,n){var i="strin<o;a++)r.push(e[t[a]][n]);re=0,n=e)nction E();return t}var e?ut(this[f.iApiIndex]):thd(e);return t!==M&ng=function(eings()[0],i=n.oScunction(e){this.api(!0).row(e).child.hide()},this.fnDeleteRow=fu=i.rows(e),r=es.fnDestroy=funn,i,a),o.draw()}se():"",t!==M||"td"().flatten().t!0),n=e.nodecell(e).index()).r{return this.api(!0).show().child()[s.api(!0).paumnVis=function(e,t,columns.adjustction(e,t,n){this.api(!0).order.listener(e,t,n)},this.fnUpdate=function(e,t,n,i,r){var a=this.api(!0);return(n===M||null===n?a.row(t):a.cell(t,n)).data(e),r!==M&&!r||a.columns.adjust(),i!==M&&!i||a.draw(),0},this.fnVersionCheck=f.fnVersionCheck;var e,w=this,E=b===M,k=this.length;for(e in E&&(b={}),this.oApi=this.internal=f.internal,x.ext.internal)e&&(this[e]=Mt(e));return this.each(function(){var i=1<k?pt({},b,!0):b,r=0,e=this.getAttribute("id"),a=!1,t=x.defaults,o=O(this);if("table"!=this.nodeName.toLowerCase())q(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{X(t),J(t.column),C(t,t,!0),C(t.column,t.column,!0),C(t,O.extend(i,o.data()));for(var n=x.settings,r=0,s=n.length;r<s;r++){var l=n[r];if(l.nTable==this||l.nTHead&&l.nTHead.parentNode==this||l.nTFoot&&l.nTFoot.parentNode==this){var c=(i.bRetrieve!==M?i:t).bRetrieve,d=(i.bDestroy!==M?i:t).bDestroy;if(E||c)return l.oInstance;if(d){l.oInstance.fnDestroy();break}return void q(l,0,"Cannot reinitialise DataTable",3)}if(l.sTableId==this.id){n.splice(r,1);break}}null!==e&&""!==e||(e="DataTables_Table_"+x.ext._unique++,this.id=e);var u,p,h=O.extend(!0,{},x.models.oSettings,{sDestroyWidth:o[0].style.width,sInstance:e,sTableId:e}),f=(h.nTable=this,h.oApi=w.internal,h.oInit=i,n.push(h),h.oInstance=1===w.length?w:o.dataTable(),X(i),Q(i.oLanguage),i.aLengthMenu&&!i.iDisplayLength&&(i.iDisplayLength=(O.isArray(i.aLengthMenu[0])?i.aLengthMenu[0]:i.aLengthMenu)[0]),i=pt(O.extend(!0,{},t),i),P(h.oFeatures,i,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),P(h,i,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),P(h.oScroll,i,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),P(h.oLanguage,i,"fnInfoCallback"),I(h,"aoDrawCallback",i.fnDrawCallback,"user"),I(h,"aoServerParams",i.fnServerParams,"user"),I(h,"aoStateSaveParams",i.fnStateSaveParams,"user"),I(h,"aoStateLoadParams",i.fnStateLoadParams,"user"),I(h,"aoStateLoaded",i.fnStateLoaded,"user"),I(h,"aoRowCallback",i.fnRowCallback,"user"),I(h,"aoRowCreatedCallback",i.fnCreatedRow,"user"),I(h,"aoHeaderCallback",i.fnHeaderCallback,"user"),I(h,"aoFooterCallback",i.fnFooterCallback,"user"),I(h,"aoInitComplete",i.fnInitComplete,"user"),I(h,"aoPreDrawCallback",i.fnPreDrawCallback,"user"),h.rowIdFn=S(i.rowId),Z(h),h.oClasses),m=(O.extend(f,x.ext.classes,i.oClasses),o.addClass(f.sTable),h.iInitDisplayStart===M&&(h.iInitDisplayStart=i.iDisplayStart,h._iDisplayStart=i.iDisplayStart),null!==i.iDeferLoading&&(h.bDeferLoading=!0,e=O.isArray(i.iDeferLoadingh._iRecordsTotal=e?i.iDeferLoading[1]:i.iDeferLoading),h.oLanguage),e=(O.extend(!0,m,i.oLanguage),m.sUrl&&(O.ajax({dataType:"json",url:m.sUrl,success:function(e){Q(e),C(t.oLanguage,e),O.extend(!0,m,e),Fe(h)},error:function(){Fe(h)}}),a=!0),null===i.asStripeClasses&&(h.asStripeClasses=[f.sStripeOdd,f.sStripeEven]),h.asStripeClasses),v=o.children("tbody").find("tr").eq(0),g=(-1!==O.inArray(!0,O.map(e,function(e,t){return v.hasClass(e)}))&&(O("tbody tr",this).removeClass(e.join(" ")),h.asDestroyStripes=e.slice()),[]),e=this.getElementsByTagName("thead");if(0!==e.length&&(we(h.aoHear<s;r++)u.push(null);else u=i.aon=p(t,"sort")||p(t,"orr,h.nTFoot)),i.aaData)for(r=0;r<i.aaData.length;r++)T(h,i.aaData[r]);else!h.bDeferLoading&&"dom"!=D(h)||oe(h,O(h.nTBody).children("tr"));h.aiDisplay=h.aiDisplayMaster.slice(),!(h.bInitialised=!0)===a&&Fe(h)};i.bStateSave?(y.bStateSave=!0,I(h,"aoDrawCallback",ct,"state_save"),dt(h,0,e)):e()}}),w=null,this},i={},k=/[\r\n]/g,B=/<.*?>/g,U=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d2}ri++ngarianMap=a}function C(n,i,r){var a;n._hungarianMap||o(n),O.each(i,function(e,t){(a=n._hungarianMap[e])===M||!r&&i[a]!==M||("o"===a.charAt(0)?(i[a]||(i[a]={}),O.extend(!0,i[a],i[e]),C(n[a],i[a],r)):i[a]=i[e])})}function Q(e){var t,n=x.defaults.oLanguage,i=n.sDecimal;i&&Dt(i),e&&(t=e.sZeroRecords,!e.sEmptyTable&&t&&"No data available in table"===n.sEmptyTable&&P(e,e,"sZeroReco&i!==t&&Dt(t))}x.util={throttle:function(i,e){var r,a,o=e!=reateElement("t||[i],mData:n.mData||i,idx:i}),n=(e.aoColumns.push(n),e.aoPreSearchCols);n[i]=O.extend({},x.models.oSearch,n[i]),ne(e,i,O(t).data())}function ne(e,t,n){function i(e){return"string"==typeof e&&-1!==e.indexOf("@")}var t=e.aoColumns[t],r=e.oClasses,a=O(t.nTh),o=(t.sWidthOrig||(t.sWidthOrig=a.attr("width")||null,(c=(a.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/))&&(t.sWidthOrig=c[1])),n!==M&&null!==n&&(J(n),C(x.defaults.column,n),n.mDataProp===M||n.mData||(n.mData=n.mDataProp),n.sType&&(t._sManualType=n.sType),n.className&&!n.sClass&&(n.sClass=n.className),n.sClass&&a.addClass(n.sClass),O.extend(t,n),P(t,n,"sWidth","sWidthOrataSort")),ter):null,c=(t._bAttrSrc=O.isPlainObject(o)&&(i(o.sort)||i(o.type)||i(o.filter)),t._setter=null,t.fnGetData=function(e,t,n){var i=s(e,t,M,n);return l&&t?l(i,t,e,n):i},t.fnSetData=function(e,t,n){return v(o)(e,t,n)},"number"!=typeof o&&(e._rowReadObject=!0),e.oFeatures.bSort||(t.bSortable=!1,a.addClass(r.sSortableNone)),-1!==O.inArray("asc",t.asSorting)),n=-1!==O.inArray("desc",t.asSorting);t.bSortable&&(c||n)?c&&!n?(t.sSortingClass=r.sSortableAsc,t.sSortingClassJUI=r.sSo;else if(!a.sType){for(t=0,n=d.length;t<n;t++){for(i=0,r=c.length;i<r&&(s[i]===M&&(s[i]=b(e,i,u,"type")),(o=d[t](s[i],e))||t===d.length-1)&&"html"!==o;i++);if(o){a.sType=o;break}}a.sType||(a.sType="string")}}function ae(e,t,n,i){var r,a,o,s,l=e.aoColumns;if(t)for(r=t.length-1;0<=r;r--)for(var c,d=(c=t[r]).targets!==M?c.targets:c.aTargets,u=0,p=(d=O.isArray(d)?d:[d]).length;u<p;u++)if("number"==typeof d[u]&&0<=d[u]){for(;l.length<=d[u];)te(e);i(l||null===s||i===M){if("r r=e.aoColumns[n],a=e.aoData[t]._aData;r.fnSetData(a,i,{setti.\.])+/g)||[""],function(e){return e.replace(/\\\./g,"isPlainObject(r)?(a={},O.each(r,function(e,t){t&&(a[e]=S(t))}),function(e,t,n,i){var r=a[t]||a._;return r!==M?r((var c=0,d=e.length;c<d;c++)r.push(p(e[c],t,a));var u=u[0].substring(1,u[0].length-1);e=""===u?r:r.join(u);break}if(i)o[s]=o[s].f(null===e||e[o[s]]===M)return M;e=e[o[s]]}}return e},function(e,t){return p(e,t,r)})}function v(i){var p;return O.isPlainObject(i)?v(i._):null===i?function(){}:"function"==typeof i?function(e,t,n){i(e,"set",t,n)}:"string"!=typeof i||-1===i.indexOf(".")&&-1===i.indexOf("[")&&-1===i.indexOf("(")?function(e,t){e[i]=t}:(p=function(e,t,n){for(var i,r,a,o,s=ce(n),n=s[s.length-1],l=0,c=s.length-1;l<c;l++){if(i=s[l].match(le),r=s[l].match(h),i){if(s[l]=s[l].replace(le,""),e[s[l]]=[],(i=s.slice()).splice(0,l+1),o=i.join("."),O.isArray(t))for(var d=0,u=t.leng].length;a<o;a++)rnction a(e){n!==M&&n!==u||(s=p[u],l=O.trim(e.innerHTML),s&&s._bAttrSrc?(v(s.mData._)(i,l),r(s.mData.sort,e),r(s.mData.type,e),r(s.mData.filter,e)):h?(s._setter||(s._setter=v(s.mData)),s._setter(i,l)):i[u]=l),u++}var o,s,l,c=[],d=t.firstChild,u=0,p=e.aoColumns,h=e._rowReadObject;i=i!==M?i:h?{}:[];if(d)for(;d;)"TD"!=(o=d.nodeNs&&(e=i.DT_RowClass.split(" "),t.__rowc=t.__rowc?K(t.__rowc.concat(e)):e,O(n).removeClass(t.__rowc.join(" ")).addClass(i.DT_RowClass)),i.DT_RowAttr&&O(n).attr(i.DT_RowAttr),i.DT_RowData&&O(n).data(i.DT_RowData))}function ge(e){var t,n,i,r=e.nTHead,a=e.nTFoot,o=0===O("th, td",r).length,s=e.oClasses,l=e.aoColumns;for(o&&(n=O("<tr/>").appendTo(r)),d=0,u=l.length;d<u;d++)i=l[d],t=O(i.nTh).addClass(i.sClass),o&&t.appendTo(n),e.oFeatures.bSort&&(t.addClass(i.sSortingClass),!1!==i.bSortable&&(t.attr("tabindex",e.iTabIndex).attr("aria-controls",e.sTableId),ot(e,i.nTh,d))),i.sTitle!=t[0].innerHTML&&t.html(i.sTitle),mt(e,"header")(e,t,i,s);if(o&&we(e.aoHeader,r),O(r).find(">tr").attr("role","row"),O(rell),h[i][a]=1;p[i+d]!==M&&p[i][a].cell==p[i+d][a].cell;)h[i+d][a]=1,d++;for(;p[i][a+u]!==M&&p[i][a].cell==p[i][a+u].cell;){for(s=0;s<d;s++)h[i+s][a+u]=1;u++}O(p[i][a].cell).attr("rowspan",d).attr("colspan",u)}}}}function m(e){var t=L(e,"aoPreDrawCallback","preDraw",[e]);if(-1!==O.inArray(!1,t))w(e,!1);else{var n=[],i=0,r=e.asStripeClasses,a=r.length,t=(e.aoOpenRows.length,e.oLanguage),o=e.iInitDisplayStart,s="ssp"==D(e),l=e.aiDisplay,o=(e.bDrawing=!0,o!==M&&-1!==o&&(e._iDisplayStart=!s&&o>=e.fnRecordsDisplay()?0:o,e.iInitDisplayStart=-1),e._iDisplayStart),c=e.fnDisplayEnd();if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++,w(e,!1);else if(s){if(!e.bDestroying&&!xe(e))return}else e.iDraw++;if(0!==l.length)for(var d=s?e.aoData.length:c,u=s?0:o;u<d;u++){var p,h=l[u],f=e.aoData[h],m=(null===f.nTr&&me(e,h),f.nTr);0!==a&&(p=r[i%a],f._sRowStripe!=p&&(O(m).removeClass(f._sRowStripe).addClass(p),f._sRowStripe=p)),L(e,"aoRowCallback",null,[m,f._aData,i,u,h]),n.push(m),i++}else{s=t.sZeroRecords;1==e.iDraw&&"ajax"==D(e)?s=t.sLoadingRecords:t.sEmptyTable&&0===e.fnRecordsTotal()&&(s=t.sEmptyTable),n[0]=O("<tr/>",{class:a?r[0]:""}).append(O("<td />",{valign:"top",colSpan:_(e),class:e.oClasses.sRowEmpty}).html(s))[0]}L(e,"aoHeaderCallback","header",[O(e.nTHead).children("tr")[0],de(e=i.nextSibling}e(n=[],t));for(var r=0,a=n.length;r<a;r++)for(var o=0,s=n[r].length;o<s;o++)!n[r][o].unxhr",[r,e,r.jqXHR]),t(e)}L(r,"aoServerParams","serverParams",[e]),e&&O.isArray(e)&&(i={},a=/(.*?)\[\]$/,O.each(e,function(e,t){var n=t.name.match(a);n?(n=n[0],i[n]||(i[n]=[]),i[n].push(t.ce,c=(O.isPlainObject(s)&&s.data&&(c="function"==typcache:!1,type:r.sServerMethod,error:function(e,t,n){var i=L(r,null,"xhr",[r,null,r.jqXHR]);-1===O.inInvalid JSON response",1):4===e.readyState&&q(r,0,"Ajax error",7)),w(r,!1)}});r.oAjaxData=e,L(r,null,"preXhr",[r,e]),r.fnServerData?r.fnServerData.call(l,r.sAjaxSource,O.map(e,fx)),o.bSort&&(Ot.col,dir:t.dir}),h("iSortCol_"+e,t.col),h("sSortDir_"+e,t.dir)}),h("iSortingCols",d.length));u=x.ext.legacy.ajax;return null===u?e.sAjaxSource?c:f:u?c:f}function _e(e,n){function t(e,t){return n[e]!==M?n[e]:n[t]}var i=Te(e,n),r=t("sEcho","draw"),a=t("iTotalRecords","recordsTotal"),o=t("iTotalDisplayRecords","recordsFiltered");if(r){if(+r<e.iDraw)return;e.iDraw=+r}ue(e),e._iReaxDataGet=!1,m(e),e._bInitComplete||Be(e,n),e.bAjaxDataGet=!0,w(e,!1)}function Te(e,t){e=O.isPlainObject(e.ajax)&&e.ajax.dataSrc!==M?e.ajax.dataSrc:e.sAjaxDataProp;return"data"===e?t.aaData||t[e]:""!==e?S(e)(t):t}function Se(n){function e(){o.f;var e=this.value||"";e!=a.sSearch&&(Ae(n,{sSearch:e,bRegex:a.bRegex,bSmart:a.bSmart,bCaseInsensitive:a.bCaseInsensitive}),n._iDisplayStart=0,m(n))}var t=n.oClasses,i=n.sTableId,r=n.oLanguage,a=n.oPreviousSearch,o=n.aanFeatures,s='<input type="search" class="'+t.sFilterInput+'"/>',l=(l=r.sSearch).match(/_INPUT_/)?l.replace("_INPUT_",s):l+s,s=O("<div/>",{id:o.f?null:i+"_filter",class:t.sFilter}).append(O("<label/>").appDelay:"ssp"===D(n)?400:0,c=O("input",s).val(a.sSearch).attr("pT",t?Za,l)&&s.push(n);r.length=0,O.merge(r,s)}}function Ie(e,t,n,i,r,a){if(""!==t){for(var o,s=[],l=e.aiDisplay,c=De(t,i,r,a),d=0;d<l.length;d++)o=e.aoData[l[d]]._aFilterData[n],c.test(o)&&s.push(l[d]);e.aiDisplay=s}}function Le(e,t,n,i,r,a){var o,s,l=De(t,i,r,a),i=e.oPreviousSearch.sSearch,r=e.aiDisplayMaster,c=[];if(0!==x.ext.search.length&&(n=!0),a=Re(e),t.lengrn e=t?e:Oe(e),n&&(e="^(?=.*?"+O.map(e.match(/"[^"]+"|[^ ]+/g)||&(a=a.toString())):a="",a.indexOf&&-1!==a.indexOf("&")&&(Me.innerHTML=a,a=Ne?Me.textContent:Me.innerTextDisplayLength,i=e.fnRecordsDisplay(),r=-1===n,a=r?0:Math.ceil(t/n),o=r?1:Math.ceil(i/n),s=u(a,o),l=0,c=h.p.length;l<c;l++)mt(e,"pageButton")(e,h.p[l],l,s,a,o);else u.fnUpdate(e,d)},sName:"pagination"})),t}function Ye(e,t,n){var i=e._iDisplayStart,r=e._iDisplayLength,a=e.fnRecordsDisplay(),a=(0===a||-1===r?i=0:"number"==typeof t?a<(i=t*r)&&(i=0):"first"==t?i=0:"prng",class:e.oClasses.sProcessing}).html(e.oLanguage.sProcessing).insertBefore(e.nTable)[0]}function w(e,t){e.oFeatures.bProcessing&&O(e.aanFeatures.r).css("display",t?"block":"none"),L(e,null,"processing",[e,t])}function Ke(e){var t,n,i,r,a,o,s,l,c,d,u,p,h=O(e.nT.oScroll);return""===f.sX&&""===f.sY?e.nTable:(t=f.sX,n=f.sY,i=e.oClasses,a=(r=h.children("caption")).length?r[0]._captionSide:null,l=O(h[0].cloneNode(!1)),o=O(h[0].cloneNode(!1)),c=function(e){return e?H(e):null},(s=h.children("tfoot")).length||(s=null),l=O(u="<div/>",{class:i.sScrollWrapper}).append(O(u,{class:i.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:t?c(t):"100%"}).append(O(u,{class:i.sScrollHeadInner}).css({"box-sizing":"content-box",width:f.sXInner||"100%"}).append(l.removeAttr("id").css("margin-left",0).append("top"===a?r:null).append(h.children("thead"))))).append(O(u,{class:i.sScrollBody}).css({position:"relative",overflow:"auto",width:c(t)}).append(h)),s&&l.append(O(u,{class:i.sScrollFoot}).css({overflow:"hidden",border:0,width:t?c(t):"100%"s("margin-left",0).append("bottom"===a?r:null).append(h.children("tfoot"))))),c=l.children(),d=c[0],u=c[1],p=s?c[2]:null,t&&O(u).on("scroll.DT",function(e){var t=this.sollBody=u,e.nScrollFoot=p,e.aoDrawCallback.push({fn:Qe,sName:"scrolling"}),l[0])}function Qe(n){function e(e){(e=e.style).paddingTop="0",e.paddingBottom="0",e.borderTopWidth="0",e.borderBottomWidth="0",e.height=0}var t,i,r,a,o,s=n.oScroll,l=s.sX,c=s.sXInner,d=s.sY,s=s.iBarWidth,u=O(n.nScrollHead),p=u[0].style,h=u.children("div"),f=h[0].style,h=h.children("table"),m=n.nScrollBody,v=O(m),g=m.style,y=O(n.nScrollFoot).children("div"),b=y.children("table"),w=O(n.nTHead),E=O(n.nTable),k=E[0],x=k.style,C=n.nTFoot?O(n.nTFoot):null,_=n.oBrowser,T=_.bScrollOversize,S=N(n.aoColumns,"nTh"),A=[],P=[],I=[],L=[],D=m.scrollHeight>m.clientHeight;n.scrollBarVis!==D&&n.scrollBarVis!==M?(n.scrollBarVis=D,R(n)):(n.scrollBarVis=D,E.children("thead, tfoot").remove(),D=w.clr"),t=D.find("tr"),D.find("th, td").removeAttr("tabindex"),l||(g.width="100%",u[0].style.width="100%"),O.each(Ee(n,D),function(e,t){r=V(n,e),t.style.width=n.aoColumns[r].sWidth}),C&&j(function(e){e.style.width=""},i),u=E.outerWidth(),""===l?(x.width="100%",T&&(E.find("tbody").height(h=H(E.outerWidth()-s)),u=E.outection(e).css("width")))},t),j(function(e,t){-1!==O.inArray(e,S)&&(e.style.width=A[t])},w),O(t).height(0),C&&(j(e,i),j(function(e){L.push(e.innerHTML),P.push(H(O(e).css("width")))},i),j(function(e,t){e..overflow="hidden",e.style.width=A[t]},t),C&&j(function(e,t){e.innerHTML='<div class="dataTables_sizing">'+L[t]+"</div>",e.childNodes[0].style.height="0",e.childNodes[0].style.overflow="hidden",e.style.width=P[t]},i),E.outerWidth()<u?(a=m.scrollHeight>m.offsetHeight||"scroll"==v.css("overflow-y")?u+s:u,T&&(m.scrollHeight>m.offsetHeight||"scroll"==v.css("overflow-y"))&&(x.width=H(a-s)),""!==l&&""===c||q(n,1,"Possible column misalignment",6)):a="100%",g.width=H(a),p.width=H(a),C&&(n.nScrollFoot.style.width=H(a)),d||T&&(g.height=H(k.offsetHeight+s)),D=E.outerWidth(),h[0].style.width=H(D),f.width=H(D),w=E.height()>m.clientHeight||"scroll"==v.css("overflow-y"),f[o="padding"+(_.bScrollbarLeft?"Left":"Right")]=w?swHold||(m.scrol();w+=k,r[c[E]].sWidth,r,a=d.length,o=p[e]._aSortData,s=p[t]._aSortData,l=0;l<a;l++)if(n=o[(r=d[l]).col],i=s[r.col],0!==(r=(c[r.type+"-"+r.dir]||c["string-"+r.dir])(n,i)))return r;return(n=u[e])<(i=u[t])?-1:i<n?1:0})}e.bSorted=!0}function rt(e){for(var t=e.aoColumns,n=A(e),i=e.oLanguage.oAria,r=0,a=t.length;r<a;r++){var o=t[r],s=o.asSorting,l=o.sTitle.replace(/<.*?>/g,""),c=o.nTh;c.removeAttribute("aria-sort"),oumns:O.map(n.aoColumns,function(e,t){return{visible:e.bVisible,search:Ve(n.aoPreSearchCols[t])}})},L(n,"aoStateSaveParams","stateSaveParams",[n,e]),n.oSavedState=e,n.fnStateSaveCallback.call(n.oInstance,n,e))}function dt(i,e,r){function t(e){if(e&&e.time){var t=L(i,"aoStateLoadParams","stateLoadParams",[i,e]);if(-1===O.inArray(!1,t)){t=i.iStateDuration;if(!(0<t&&e.time<+new Date-1e3*t||e.columns&&s.lengte.start!==M&&(i._iDisplayStart=e.start,i.iInitDisplayStart=e.start),e.length!==M&&(i._iDisplayLength=e.length),e.order!==M&&(i.aaSorting=[],O.each(e.order,function(e,t){i.aaSorting.push(t[0]>=s.length?[0,t[1]]:t)})),e.search!==M&&O.extend(i.oPreviousSearch,je(e.search)),e.columns)for(a=0,o=e.columns.length;a<o;a++){var n=e.columns[a];n.visible!==M&&(s[a].bVisible=n.visible),e("draw",function(){e(t.ajax.json())}),"ssp"==D(r)?c(r,a):(w(r,!0),(n=r.jqXHR)&&4!==n.readyState&&n.abort(),ke(r,[],function(e){ue(r);for(var t=Te(r,e),n=0,i=t.length;n<i;n++)T(r,t[n]);c(r,a),w(r,!1)}))}function gt(e,t,n,i,r){for(var a,o,s,l,c=[],d=typeof t,u=0,p=(t=t&&"string"!=d&&"function"!=d&&t.length!==M?t:[t]).length;u<p;u++)for(s=0,l=(o=t[u]&&t[u].split&&!t[u].msh(e):(n=O("<tr><td/></tr>").addClass(t),O("td",n).addClass(t).html(e)[0].colSpan=_(a),s.push(n[0]))}var s=[];o(t,n),e._details&&e._details.detach(),e._details=O(s),e._detailsShow&&e._details.insertAfter(e.nTr)}function Et(e,t){if((n=e.context).length&&e.length){e=n[0].aoData[e[0]];if(e._details){(e._detailsShoy"+t,c=if(t._der r,an]").attr("colspan",a)}});r.on(t,function(e,t){if(l!==t)return;for(var n=0,i=c.length;n<i;n++)if(c[n]._details)_t(r,n)})}}}}function kt(e,t,n,i,r){for(var a=[],o=0,s=r.length;o<s;o++)a.push(b(e,r[o],t));return a}var xt=[],s=Array.prototype,z=function(e,t){if(!(this instanceof z))return new z(e,t);function n(e){var t,n,i,r;e=e,i=x.settings,r=O.map(i,function(e,t){return e.nTable}),(e=e?e.nerCase()?-1!==(t=O.inArray(e,r))?[i[t]]:null:e&&"function"==typeof e.settings?e.settings().toArray():("string"==typeof e?n=O(e):e instanceof O&&(n=e),n?n.map(function(e){return-1!==(t=O.inArray(this,r))?i[t]:null}).toArray():void 0):[])&&(a=a.concat(e))}var alength;i<r;i++)n(e[i]);else n(e);.seletotnt:functh>e?newis,e,this);else for(var n=0,i=ttext,t)},u=d[s],(r="cell"===t?n.call.length||i?((xOf.apction(e){var t=[];if(s.map)t=s.map.call+)t.push(e.call(this,this[neturn this.map(function(e){return e[t]})},pop:s.pop,eturn ee(this,e,t,0,this.length,1)},reduceRight:s.reduceRight||function(e,t){return ee(this,e,t,this.length-1,-1,-1)},reverse:s.reverse,selector:nulhis.context,this)},sort:s.sor=typeof i.vallength;n<i;n++)if(et:d.propExt}},z.registerPlural=e=function(e,t,n){z.register(e,n),z.register(t,function(){var e=n.==this?this:e instan[0]):e[0]:M:e})},t("tables()",function(e)ction(e,t){return e.nTable}),O(i).filter(e).map(function(e){var t=O.inArray(this,i);return n[t]}).toArray()))):this;var n,i}),t("table()",function(e){var e=this.tables(e),t=e.context;return t.length?new z(t[0]):e}),e("tables().nodes()","table().node()",function(){return this.iterator("table",function(e){return e.nTable},1)}),e("tables().body()","table().body()",function(){return this.iterator("table",function(e){return e.nTBody},1)}),e("tables().header()","table().header()",function(){return this.).footer()",unction(){reeturn this.iteratDisplayLength:-1sTotal:t.fnRecordsTotal(),recordsDisplay:r,serverSide:"ssp"===D(t)})}),t("page.len()",function(t){h:M:this.iterator("table",function(e){Ue(e,t)})}),t("ajax.json()",function(){var e=this.context;if(0<e.lengt",function(t){var e=thixap(a,function(e){return l.hasOwnProperty(e)?null:e})}}else if("index"==s||"original"==s)for(c=0,d=e.aoData.length;c<d;c++)("none"==o||-1===(n=O.inArray(c,r))&&"removed"==o||0<=n&&"applied"==o)&&i.push(c);return i}),_t=(t("rows()",function(t,n){t===M?t="":O.isPlainObject(t)&&(n=t,t=""),n=yt(n);var e=this.iterator("table",functiof(null!==e&&!a)return[e];if(o=o||Ct(r,a),null!==e&&-1!==O.inArray(e,o))return[e];if(null===n||n===M||""===n)return o;if("function"==typeof n)return O.map(o,function(e){var t=i[e];return n(e,t._aData,t.nTr)?e:null});if(n.nodeName)return e=n._DT_RowIndex,t=n._DT_CellIndex,e!==M?i[e]&&i[e].nTr===n?[e]:[]:t?i[t.row]&&i[t.row].nTr===n?[t.row]:[]:(e=O(n).closest("*[data-dt-row]")).length?[e.data("dt-row")]:[];if("string"==typeof n&&"#"===n.charAt(0)){var t=r.aIds[n.replace(/^#/,"")n(){return this._DT),t("rows().nodes()",function(){retu!0,"rows",function(e,t){return g(e.aoData,t,"_n this.iterator("row",function(e,t){e=("rows().invalidate()","row().i()","row().id()",function(e){for(var ty,t),pe(u[n],t,!s.iterator("table",function(e){for(var t,n=[],i=0,r=a.length;i<r;i++)(t=a[i]).nodeName&&"TR"===t.nodeName.toUpperCase()?n.push(oe(e,t)[0]):n.push(T(e,t));return n},1),t=this.rows(-1);return t.pop(),O.merge(t,e),t}),t("row()",function(e,t){return bt(this.rows(e,t))}),t("row().data()",function(e){var t,ata[this[0]])._i&&"TR"===t.nodeName.toUpperCase()?oe(et=(t(St,function(e,t){var n=thi.length?n[0].aoData[this[0]]._d1===e?_t(this):n.length&&this.lengt,t),this)}),t([Tt+"(){return Et(this,!1),this}),t([Tt+".remove()",St+".re(function(){return O.inArray(this,d)}).toArray()).length||!n.nodeName?e:(e=O(n).closest("*[data-dt-column]")).length?[e.data("dt-column")]:[]},o,s);var o,t,s,l,c,d},1);return e.(e,t){return this.iterator("column",func).footer()","column().footer()",function(e,t){.data()","column().data()",function(){retut){return e.aoColumns[t].mData},1)}),e("coeturn g(e.aoData,r,"search"===a?"_aFilterData":"_aSortData",t)},1)}),e("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(e,t,n,i,r){return g(e.aoData,r,"anCells",t)},1)}),e("columns().visible()","column().visible()",function(u,n){var e=this.iterator("column",function(e,t){if(u===M)return e.aoColumns[t].bVisible;var n,i,r=t,t=u,a=e.aoColumns,o=a[r],s=e.aoData;if(t===M)o.bVisible;else if(o.bVisible!==t){if(t)for(var l=O.inArray(!0,N(a,"bVisible"),r+1),c=0,d=s.length;c<d;c++)i=s[c].nTr,n=s[c].anCells,i&&i.insertBefore(n[r],n[l]||le=t,ye(e,e.aoHeader),ye(e,e.aoFooter),e.aiDisplay.length||O(e.nTBody).find("td[co{L(e,null,"column-visicolumns().indexes()"rator("table",nction(e,t){var n;if(0!==this.context.length)return n=this.context[0],"fromVisible"===e||"toData"===e?V(n,t):"fromData"===e||"toVisible"===e?d(n,t):void 0}),t("column()",function(e,t){return bt(this.columns(e,t))}),t("cells()",function(m,e,v){var n,i,r,a,o,s,l,t;return O.isPlainObject(m)&&(m.row===M?(v=m,m=null):(v=e,e=nu.map(function(e,t){return{row:t._DT_CellIndex.row,column:t._DT_CellIndex.column}}).toArray()).l},i,t);var i,t,r,a,o,s,l,c,d,u,p,n,h,f}):(n=this.columns(e),i=this.rows(m),this.iterator("table",function(),t=this.cells(r,v),.node()",function(){return this.iterator("cell",function(e,t,n){return b(e,t,n"_aFilterData":"_aSortData",this.iteratoi){return this.iterator("cell",function(e,t,n){r){return thi,column:n,columnVisells(e,t,n))}is.context;return t===!O.isArray(t[0])&&(tion(e){ot(e,t,n,i)})}),t("order.fixed()",fuingFixed:M,O.igth?e[0].oPreviousSearch.sSearch:M:this.iternction(e,t){var n=e.aoPreSearchCols;if(i===M)return n[t].sSearch;e.oFeatures.bFilter&&(O.extend(n[t],{sSch,1))})}),t("state(}),t("state.clear()",function(){return this.iterator("table",function(e){e.fnStateSaveCallback.call(e.oInstance,unction(e){ct(e)})}),x.versionet(0),a=!1;return e ==r&&i!==r||(a=!0)}),a)},x.tae){if(!t||O(e.nTable).is(":n){t(n+"()",f=O.map(e[0].split"}).join(" "clear()",funew z(this.context,this.context)}),t("init()",function(){var e=this.context;return e.length?e[0].oInit:null}),t("data()",function(){return this.iterator("table",function(e){return N(e.aoData,"_aData")}).flatten()}),t("destroy()",function(u){return u=u||!1,this.iterator("table",function(t){var n,e=t.nTableWrapper.parentNode,i=t.oClasses,r=t.nTable,a=t.nTBody,o=t.nTHead,s=t.nTFoot,l=O(r),a=O(a),c=O(t.nTableWrapper),d=O.map(t.aoData,function(e){return e.nTr}),s=(t.bDestroying=!0,L(t,"aoDestroyCallback","destroy",[t]),u||new z(t).columns().visible(!0),c.off(".DT").find(":not(tbody *)").off(".DT"),O(F).off(".DT-"+t.sInstance),r!=o.parentNode&&(l.children("thead").detach(),l.append(o)),s&&r!=s.parentNode&&(l.children("tfoot").detach(),l.append(s)),t.aaSorting=[],t.aaSortingFixed=[],st(t),O(d).removeClass(t.asStripeClasses.join(" ")),O("th, td",o).removeClass(i.sSortable+" "+i.sSortableAsc+" "+i.sSortableDesc+" "+i.sSortableNone),a.childre,c[s](),!u&&e&&(e.insertBefore(r,t.nTableReinsertBefore),l.css("width",t.sDestroyWidth).remov})}),O.each(call(s[l](t,"cell"===l?n:o,"cell"===l?o:M),t,n,i,r)})})}),t("i18n()",function(e,t,n){var i=this.context[0],e=S(e)(i.oLanguage);return e===M&&(e=t),(e=n!==M&&O.isPlainObject(e)?e[n]!==M?e[n]:e._:e).replace("%d",n)}),x.version="1.10.18",x.settings=[],x.models={},x.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},x.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},x.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},x.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginbSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){return e.toString().replace(fnServerData:null,fnServerParams:null,fnStateLoadCallback:functeLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(e,t){try{(-1===e.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+e.sInstance+"_"+location.pathname,JSON.stringify(t))}catch(e){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:O.extend({},x.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},o(x.defaults),x.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},o(x.defaults.column),x.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:M,oAjaxData:M,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iReco,aoDestroyCaltion(){var e=this._iDisplayLength,t=this._iDisplayStart,n=t+e,i=this.aiDisplay.length,r=this.oFeatures,a=r.bPaginate;return r.bServerSide?!1===a||-1===e?t+i:Math.min(t+e,this._iRecordsDisplay):!a||i<n||-1===e?i:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},x.ext=f={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:x.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:x.version},O.extend(f,{afnFiltering:f.search,aTypes:f.type.detect,ofnSearch:f.type.search,oSort:f.type.order,afnSortData:f.order,aoFeatures:f.feature,oApi:f.internal,oStdClasses:f.classes,oPagination:f.pager}),O.extend(x.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"datr(i/2);return t<=i?s"),n).push("ce(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}O.extend(Pt,{simple:funcfirst","previous","(e,t)]},simple_numbers:function(e,t){return["previous",It(e,t),"next"]},full_numbers:function(eht(O("<a>",{class:f.sPageButton+" "+h,"aria-controls":s.sTableId,"aria-label":v[n],"data-dt-idx":g,tabindex:s.iTabIndex,id:0===l&&"string"==typeof n?s.sTableId+"_"+n:null}).html(p).appendTo(e),{action:n},i),g++)}}var p,h,n,f=s.oClasses,m=s.oLanguage.oPaginate,v=s.oLanguage.oAria.paginate||{},g=0;try{n=O),O.extend(x.ext.type.detect,[function(e,t){t=t.oLanguage.sDecimal;retur{t=t.oLanguage.sDecimal;return n(e,l-num-fe.){return Lt(e,n,$)},"html-num":f(e){return pe.search[e+nrn isNaN(e)?-r(e)?"":e.reple():e+""},"string-pre":function(e){return r(e)?n(r,a,o,s"+s/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e}function Mt(t){return function(){var e=[ut(this[x.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return x.ext.internal[t].apply(this,e)}}return x.render={number:function(i,r,a,o,s){return{display:function(e){if("number"!=typeof e&&"string"!=typeof e)return e;var t=e<0?"-))return Ot(e);n=n.toFixed(a),e=Math.abs(n);n=parseInt(e,10),e=a?r+(e-n).toFixed(a).substring(2):"";return t+(o||"")+n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,i)+e+(s||"")}}},text:function(){return{display:Ot}}},O.extend(x.ext.internal,{_fnExternApiFunc:Mt,_fnBuildAjax:ke,_fnAjaxUpdate:xe,_fnAjaxParameters:Ce,_fnAjaxUpdateDraw:_e,_fnAjaxDataSrc:Te,_fnAddColumn:te,_fnColumnOptions:ne,_fnAdjustColumnSizing:R,_fnVisibleToColumnIndex:V,_fnColumnInypes:re,_fnApplyColumageCompat:Q,_fnBrowserDetect:Z,_fnAddData:T,_fnAddTr:oe,_fnNodeToDataIndex:function(e,t){return t._DT_RowIndex!==M?t._DT_RowIndex:null},_fnNodeToColumnIndex:function(e,t,n){return O.inArray(n,e.aoData[t].anCells)},_fnGetCellData:b,_fnSetCellData:se,_fnSplitObjNotation:ce,_fnGetObjectDataFn:S,_fnSetObjectDataFn:v,_fnGetDataMaster:de,_fnClearTable:ue,_fnDeleteIndex:pe,_fnInvalidate:he,_fnGetRowElements:fe,_fnCreateTr:me,_fnBuildHead:ge,_fnDrawHead:ye,_fnDraw:m,_fnReDraw:c,_fnAddOptionsHtml:be,_fnDetectHeader:we,_fnGetUniqueThs:Ee,_fnFeatureHtmlFilter:Se,_fnFilterComplete:Ae,_fnFilterCustom:Pe,_fnFilterColumn:Ie,_fnFilter:Le,_fnFilterCreateSearch:De,_fnEscapeRegex:Oe,_fnFilterData:Re,_fnFeatureHtmlInfo:He,_fnUpdateInfo:qe,_fnInfoMacros:ze,_fnInitialise:Fe,_fnInitComplete:Be,_fnLengthChange:Ue,_fnFeatureHtmlLength:We,_fnFeatureHtmlPaginate:$e,_fnPageChange:Ye,_fnFeatureHtmlProcessing:Ge,_fnProcessingDisplay:w,_fnFeatureHtmlTable:Ke,_fnScrollDraw:Qe,_fnApplyToChildren:j,_fnCalculateColumnWidths:Je,_fnThrottle:Ze,_fnConvertToWidth:et,_fnGetWidestNode:tt,_fnGetMaxLenString:nt,_fnStringToCss:H,_fnSortFlatten:A,_fnSort:it,_fnSortAria:rt,_fnSortListener:at,_fnSortAttachListener:ot,_fnSortingClasses:st,_fnSortData:lt,_fnSaveState:ct,_fnLoadState:dt,_fnSettingsFromNode:ut,_fnLog:q,_fnMap:P,_fnBindAction:ht,_fnCallbackReg:I,_fnCallbackFire:urce:D,_falculateEnd:function(){}}),((O.fn.dataTable=x).$=O).fn.dataTableSettings=x.settings,O.fn.dataTableExt=x.ext,O.fn.DataTable=function(e){return O(this).dataTable(e).api()},O.each(x,function(e,t){O.fn.DataTable[e]=t}),O.fn.dataTable}),define("hapyak.list",["module","model","dao","promise!configuration","utils.embed",void 0],function(e,a,f,m,v){"use strict";return function(s){var l,c,o,d,u=[],p=this;function h(e){hapyak.message.send(c,e,{playlistItems:o,currentVideo:o[d],customContext:"getPlaylist"})}function r(e,t){var n,i,r,a,o;e&&(s.edit&&v.dotget(m,"player.viewer.controlBarHeight"),i=p.moduleConfig.frepParams,n=i?+i.hapyak_start_time:+s.startTime,i=e.operties")||{},r={},o=v.dotget(m,"experiencePlayer")||"default",a=s.hyExperienceParams,(o||s.playerUrl)&&(r={accountId:s.accountId,bcEmbed:"default",bcPlayer:o,bcURL:s.playerUrl}),o={fetchAuthHeaderCallback:()=>{},accountId:s.accountId,apiHost:s.apiHost,edit:s.edit,projectId:e.get("id"),elementId:s.elementId,autoplay:s.autoplay,nativeControls:s.nativeControls,playerParameters:r,userId:s.userId,isExperience:s.isExperience,resetVariables:i.reset_variables,onLoad:function(e){e&&(c=e),h("setup"),c&&t&&"function"==typeof t&&t(p)},controls:!s.nativeControls,onCanPlay:function(){n&&!p.firstLoad&&(p.firstLoad=!0,l.currentTime=n),s.onCanPlay&&"function"==typeof s.onCanPlay&&s.onCanPlay.call(this,arguments)},onLoadTrack:s.onLoadTrack,onLoadAnnotations:s.onLoadAnnotations,experienceDataGraph:p.moduleConfig.experienceDataGraph||s.experienceData,registrationData:p.moduleConfig.registrationData,frepParams:p.moduleConfig.frepParams},s.edit&&(o.controlBarHeight=void 0),a&&((o.variables=a).userId&&(o.userId=a.userId),a.username&&(o.username=a.username)),l=hapyak.iframe(o))}function i(t){v.dotget(l,"destroy")&&(window.innerHeight===screen.height&&(document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()),function e(){window.innerHeight!==screen.height?(l.destroy(),document.getElementById(s.elementId).innerHTML="",c=l=null,t&&"function"==typeof t&&t()):setTimeout(function(){e()},100)}())}this.moduleConfig=e.config(),console.debug("[hapyak.list] HapYak playlist embedded",s),hapyak.message.addEventListener("getPlaylistExternal",function(){hapyak.message.send(c,"gotPlaylistExternal",{playlistItems:function(){var e=o&&JSON.parse(JSON.stringify(o)),t=[],n=0;for(n=0;n<e.length;n++)t.push(function(t){vrack:"replace",video:"replace",owner:"replace",created:"delete",modified:"delete"},i=v.dotget(t,"data.project.data"),r={replace:function(e){i[e]=v.dotget(t,"data.project."+e+".id")},delete:function(e){delete i[e]}};i.hasOwnProperty("image")||(i.image=v.dotget(t,"data.project.data.video.data.image"));for(e in i)n[e]&&r[n[e]](e);return i}(e[n]));return t}(),customContext:"getPlaylist"})}),a.PlaylistToProject.find({playlist:s.listId}).onLoad(function(e){var i=s.startAt||0;(o=e.get("content")).length?(o.forEach(function(e,t){var e=e.get("project"),n=p.moduleConfig.frepParams,n=n?+n.hapyak_project:+s.firstProject;e&&(n===(n=e.get("id"))&&(i=t),u.push(n))}),r(o[d=i=u.length-1<i?0:i].get("project"),s.onLoad)):console.cted playlist!")}),this.id=s.listId,this.firstLoad=!1,this.pid="hapyak_"+this.id,this.element=function(){return c},this.currentPlayer=function(){return l},this.currentProject=function(){return o[d].get("project")},this.next=function(t){var e=d+1,n=this;if(u[e])return i(function(){hapyak.triggerListeners("playlist.change",n,[d]),r(o[e].get("project"),function(e){d++,t&&"function"==typeof t&&t(e)})}),!0;console.warn("[hapyak.list] Already at last item in playlist!")},this.previous=function(t){var e=d-1,n=this;if(u[e])return i(function(){hapyak.triggerListeners("playlist.change",n,[d]),r(o[e].get("project"),function(e){d--,t&&"function"==typeof t&&t(e)})}),!0;console.warn("[hapyak.list] Already at first item in ar i,r=u.length-1,a=u[d];if(s.edit){if(!(e<0||t<0))return e=Math.min(e,r),t=Math.min(t,r),r=u[e],i=o[e],u.splice(e,1),u.splice(t,0,r),o.splice(e,1),o.splice(t,0,i),o.forEach(function(e,t){e.set("display_order",t)}),f.store.commit(function(){d=u.indexOf(a),h("move"),n&&"function"==typeof n&&n()}),!0;console.warn("[hapyak.list] Invalid from or to index.")}else console.warn("[hapyak.list] Can't move item in playlist when not in edit mode!")},this.add=function(e,n){if(e&&s.edit)return a.PlaylistToProject.createRecord({playlist:s.listId,project:e}).onSave(function(t){a.Project.find(e).onLoad(function(e){t.data.project=e,o.push(t),u.push(e.get("id")),h("add"),n&&"function"==typeof n&&n()})}),!0;console.warn("[hapyak.list] Can't add item to playlist when not in edit mode!")},this.remove=function(e,t){var n;if(e&&s.edit){if(-1!==(n=u.indexOf(e))&&o[n])return o[n].deleteRecord(),f.store.commit(function(){u.splice(n,1),o.splice(n,1),h("remove"),t&&"function"==typeof t&&t()}),!0}else console.warn("[hapyak.list] Can't remove item from playlist when not in edit mode!")},this.all=function(){if(o)return o.map(function(e){return e.get("project")})},this.goTo=function(t,n){var e=this;if(u[t])return i(function(){hapyak.triggerListeners("playlist.change",e,[d]),r(o[t].g){d=t,h("goTo"),n&&"function"==typeof n&&n(e)})}),!0;console.warn("[hapyak.list] No video at index="+t)},this.currentIndex=function(){return d},this.pause=function(){l&&l.pause()},this.play=function(){l&&l.play()}}}),!function(p,o,h){var f,m,v=p.SVGAngle||o.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",g=15,y=['<div class="picker-wrapper">','<div class="picker"></div>','<div class="picker-indicator"></div>',"</div>",'<div class="slide-wrapper">','<div class="slide"></div>','<div class="slide-indicator"></div>',"</div>"].join("");function b(e,t){var n,i=isNaN(e.pageX)?(r=e.clientX+o.body.scrollLeft+o.documentElement.scrollLeft,e.clientY+o.body.scrollTop+o.documentElement.scrollTop):(r=e.pageX,e.pageY),r=r-t.clientLeft-t.offsetLeft;for(i=i-t.clientTop-t.offsetTop,n=t.offsetParent;n&&"BODY"!==n.nodeName;)r-=n.clientLeft+n.offsetLeft,i-=n.clientTop+n.offsetTop,n=n.offsetParent;return{x:r,y:i}}function e(e,t,n){for(var i in e=o.createElementNS("http://www.w3.org/2000/svg",e),t)e.setAttribute(i,t[i]);for(var r=0,a=(n="[object Array]"!=Object.prototype.toString.call(n)?[n]:n)[0]&&n.length||0;r<a;r++)e.appendChild(n[r]);return e}function w(e){var t,n=e.h%360/60,i=e.v*e.s,r=i*(1-Math.abs(n%2-1)),a=t=e=e.v-i,i=(a+=[i,r,0,0,r,i][n=~~n],t+=[r,i,i,r,0,0][n],e+=[0,0,r,i,i,r][n],Math.floor(255*a)),r=Math.floor(255*t),n=Math.floor(255*e);return{r:i,g:r,b:n,hex:"#"+(16777216|n|r<<8|i<<16).toString(16).slice(1)}}function t(e){var t,n=e.r,i=e.g,r=e.b;return(1<e.r||1<e.g||1<e.b)&&(n/=255,i/=255,r/=255),{h:(0==(t=(e=Math.max(n,i,r))-Math.min(n,i,r))?3:e==n?(i-r)/t+(i<r?6:0):e==i?(r-n)/t+2:(n-i)/t+4)%6*60,s:0==t?0:t/e,v:e}}"SVG"==v?(m=e("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[e("defs",{},e("linearGradient",{id:"gradient-hsv",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[e("stop",{offset:"0%","stop-color":"#FF0000","stop-opacity":"1"}),e("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),e("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),e("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),e("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),e("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),e("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),e("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),e("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})])),e("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-hsv)"})]),f=e("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[e("defs",{},[e("linearGradient",{id:"gradient-black",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[e("stop",{offset:"0%","stop-color":"#000000","stop-opacity":"1"}),e("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})]),e("linearGradient",{id:"gradient-white",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},[e("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"}),e("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})])]),e("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-white)"}),e("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-black)"})])):"VML"==v&&(m=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></v:fill>',"</v:rect>","</DIV>"].join(""),f=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; left: -1px; top: -1px; width: 101%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>",'<v:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>","</DIV>"].join(""),o.namespaces.v||o.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"));var E=0;function k(e,a,t){if(!(this instanceof k))return new k(e,a,t);var o,s,n,i,r,l,c,d,u;this.h=0,this.s=1,this.v=1,t?(this.callback=t,this.pickerElement=a,this.slideElement=e):((t=e).innerHTML=y,this.slideElement=t.getElementsByClassName("slide")[0],this.pickerElement=t.getElementsByClassName("picker")[0],o=t.getElementsByClassName("slide-indicator")[0],s=t.getElementsByClassName("picker-indicator")[0],k.fixIndicators(o,s),this.callback=function(e,t,n,i,r){k.positionIndicators(o,s,r,i),a(e,t,n)}),"SVG"==v?(e=m.cloneNode(!0),t=f.cloneNode(!0),i=e.querySelector("#gradient-hsv"),n=e.getElementsByTagName("rect")[0],i.id="gradient-hsv-"+E,n.setAttribute("fill","url(#"+i.id+")"),n=[t.querySelector("#gradient-black"),t.querySelector("#gradient-white")],i=t.getElementsByTagName("rect"),n[0].id="gradient-black-"+E,n[1].id="gradient-white-"+E,i[0].setAttribute("fill","url(#"+n[1].id+")"),i[1].setAttribute("fill","url(#"+n[0].id+")"),this.slideElement.appendChild(e),this.pickerElement.appendChild(t),E++):(this.slideElement.innerHTML=m,this.pickerElement.innerHTML=f),x(0,this.slideElement,(l=(r=this).slideElement,c=this.pickerElement,function(e){var e=b(e=e||p.event,l),t=(e.x=Math.min(l.offsetWidth,Math.max(0,e.x)),e.y=Math.min(l.offsetHeight,Math.max(0,e.y)),r.h=e.y/l.offsetHeight*360+g,w({h:r.h,s:r.s,v:r.v})),n=w({h:r.h,s:1,v:1});c.style.backgroundColor=n.hex,r.callback&&r.callback(t.hex,{h:r.h-g,s:r.s,v:r.v},{r:t.r,g:t.g,b:t.b},h,e)})),x(0,this.pickerElement,(u=(d=this).pickerElement,function(e){var e=b(e=e||p.event,u),t=u.offsetWidth,n=u.offsetHeight,t=(e.x=Math.min(t,Math.max(0,e.x)),e.y=Math.min(n,Math.max(0,e.}function a(e,t,ntachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,!1)}function s(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener&&e.removeEventListener(t,n,!1)}function x(e,t,n){function i(e){n(e)}function r(e){s(o,"mousemove",i),s(o,"mouseup",r)}a(t,"mousedown",function(e){a(o,"mousemove",i),a(o,"mouseup",r),n(e),e.preventDefault&&e.preventDefault()})}function n(e,t,n,i){e.h=t.h%360,e.s=t.s,e.v=t.v;var t=w(e),r={y:e.h*e.slideElement.offsetHeight/360,x:0},a=e.pickerElement.offsetHeight,a={x:e.s*e.pickerElement.offsetWidth,y:a-e.v*ae.backgroundColor=w({h.callback(.r,g:t.g,b:t.b},a,r),e}k.hsv2rgb=function(e){e=w(e);return delete e.hex,e},k.hsv2hex=function(e){return w(e).hex},k.rgb2hsv=t,k.rgb2hex=function(e){return w(t(e)).hex},k.hex2hsv=function(e){return t(k.hex2rgb(e))},k.hex2rgb=function(e){return{r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)}},k.prototype.setHsv=function(e){return n(this,e)},k.prototype.setRgb=function(e){return n(this,t(e),e)},k.prototype.setHex=function(e)n&&(e.style.top=n.y-e.offsetHeight/2+"px"),i&&(t.style.top=i.y-t.offsetHeight/2+"px",t.style.left=i.x-t.offsetWidth/2+"px")},k.fixIndicators=function(e,t){t.style.pointere"},p.ColorPicker=k}(window,window.document),define("player.colorpicker",function(e){return function(){return e.ColorPicker}}(this)),define("ember-rsvp",["ember.noconflict"],function(e){"use strict";return e.RSVP}),define("base.adapter",["promise!configuration","lodash.noconflict","require","ember"],function(e,t,n,i){var r=i.get(e,"provisioning.experiences.layoutTypes.live");function a(t,n){var i=this;this.supports=["realtime"],this.techOrder=["realtime"],this.currentTech="realtime",r&&irequire(["hyrtm.client"],function(e){i.hyrtm=new e(t,{environment:n||"production"}),i.hyrtm.sendRemyload||{};"realtime"===e.streamTech&&i.realtime(e)})})})}return a.prototype={realtime:function(e){var t,n=this;e&&(t=1e3*(e.slideDelay||3),setTimeout(function(){n.hyrtm.sendLocal(window.parent,"realtime_event",e)},t))}},a}),define("adapters",["require","base.adapter","utils.embed"],function(e,a,o){var s={videojs4:"brightcove-v2.adapter",videojsvr:"brightcove-v2.adapter"};return{load:function(e,t){if(e){var n,i,e=s[e],r=o.getQueryParams(window.location.href);t=t||function(){};try{n=JSON.parse(r.experience_data),i=n.experience.id}catch(e){return void t()}n&&n.layout&&"live"===n.layout.type_name?e?irequire([e],function(e){t(new e(i,hapyak.environment||"production"))}):t(new a(i,hapyak.environment||"production")):t()}else console.warn("Can't load an adapter without a playerType")}}}),define("virtualmediaelement",["lodash.noconflict","ember-rsvp","adapters"],function(H,q,z){"use strict";function F(e){return t++,(e=e||"")+(Date.now()+t)}var B={},t=0,U={},n=[],W=F("VirtualMediaElement"),$=requirejs.config({context:W}),Y={mimeStart:/^video\/x-/i,http:/^https?:/i},G={none:1,current:2,future:3,enough:4},K={volume:!1,currentTime:!1,outerContainer:!1,ended:!1,muted:!1,paused:!1,width:!1,height:!1,offsetWidth:!1,offsetHeight:!1,videoWidth:!1,videoHeight:!1,p!0,play:!0,addEventListener:!0,removeEventListener:!0},Q=(e.MEDIA_ERR_NONE_ACTIVE=0,e.MEDIA_ERR_ABORTED=1,e.MEDIA_ERR_NETWORK=2,e.MEDIA_ERR_DECODE=3,e.MEDIA_ERR_NONE_SUPPORTED=4,e);function e(ion X(e,t,n){var i=t||{};return e&&"string"==typeof e&&("?"===e[0]&&(e=e.substring(1)),H.forEach(e.split("&"),function(e){var e=e.split("="),t=e[0],e=e[1];""===e||n&&t in i||(i[t]=e)})),i}function i(){n.shift()()}function J(e){"function"==typeof e&&(n.push(e),setTimeout(i,0))}function o(i,R,e,V){var r,t,s,a,o,n,l,c,d,u,p,h,f,m=V||{},v=this,g=U[i],y={},b={},w={},E=[],k=0,x={},C=-1,_=0,T=!1,S=!1,A={error:function(){E.length&&E.shift()}};function P(e){e=new Q(e);l.error=e,E.push(e),v.disp=e,v.dispatchEvent("progress"))}function L(e){var t=Date.now();(e||200<t-_)&&l.currentTime!==n&&(v.dispatchEvent("timeupdate"),n=l.currentTime,S=!1,_=t)}function D(){return l.duration&&l.videoWidth&&l.videoHeight}function O(e){var t;e!==l.readyState&&D()&&(e>v.HAVE_METADATA&&!l.readyState&&O(v.HAVE_METADATA),t=l.readyState,l.readyState=e,t===v.HAVE_NOTHING&&e===v.HAVE_METADATA&&v.dispatchEvent("loadedmetadata"),t===v.HAVE_METADATA&&e>=v.HAVE_CURRENT_DATA&&!T&&v.dispatchEvent("loadeddata"),t>=v.HAVE_FUTURE_DATA&&e<=v.HAVE_CURRENT_DATA&&(L(),v.dispatchEvent("waiting")),t<=v.HAVE_CURRENT_DATA&&e===v.HAVE_FUTURE_DATA&&(v.dispatchEvent("canplay"),l.paused||v.dispatchEvent("playing")),e===v.HAVE_ENOUGH_DATA&&(t<=v.HAVE_CURRENT_DATA&&v.dispatchEvent("canplay"),l.paused?l.autoplay&&v.play():v.dispatchEvent("playing"),v.dispatchEvent("canplaythrough")))}function M(){D()?l.readyState||O(v.HAVE_METADATA):O(v.HAVE_NOTHING)}function N(){y.playerReady&&(o&&o(),o=a=null,delete y.playerReady),"function"==typeof r.destroy&&(v.WasteManagement.takeOutTheTrash(),r.destroy.call(v,l)),H.forEach(b,function(e,t){delete b[t]}),delete l.player,l.readyState=v.HAVE_NOTHING,l.networkState!==v.NETWORK_EMPTY&&(l.networkState!==v.NETWORK_LOADING&&l.networkState!==v.NETWORK_IDLE||v.dispatchEvent("abort"),v.dispatchEvent("emptied")),T=!(C=-1),M()}function j(){var e=l.src,n=k;function t(e,t){H.isNumber(e)&&(t=e),k===n&&(l.networkState=v.NETWORK_NO_SOURCE,P(t||Q.MEDIA_ERR_NETWORK))}l.currentSrc!==e&&(l.networkState!==v.NETWORK_EMPTY&&(l.networkState!==v.NETWORK_LOADING&&l.networkState!==v.NETWORK_IDLE||v.dispatchEvent("abort"),v.dispatchEvent("emptied")),N(),l.paused=!0,l.seeking=!1,l.currentTime=0,l.duration=NaN,l.playBackRate=1,l.error=null,l.videoWidth=0,l.videoHeight=0,l.ended=!1,E.length=0,e&&(v._canPlaySrc(e)?(l.currentSrc=e,l.networkState=v.NETWORK_LOADING,v.dispatchEvent("loadstart"),H.forEach(r.apiRequires,function(r,a){var o,e=window.location.protocol;"file:"===e&&(e="http:"),"string"==typeof(r="function"==typeof r?r(m):r)?r=r.replace(Y.http,e):"object"==typeof r&&r.isPath?o=r=r.path:r=r&&r[e.slice(0,-1)],r&&(g[r+a]?]=new q.Promise(function(t,e){var n,i={};o&&(i[a]=o,r=null),window[a]?s:a}),$=requirejs.config({context:W,shim:n,paths:i}),n=Object.keys(i),r&&n.push(r),$(n,function(e){I(),t(e)},e))}))}),"function"!=typeof B[i].loadApi||g[""]||(g[""]=new q.Promise(function(e,t){B[i].loadApi($,e,t)})),y.playerReady=new q.Promise(function(t,e){a=function(e){e&&"object"==typeof e&&(l.player=e),l.player&&"object"==typeof l.player?t(l.player):o()},o=e}),q.hash(g).then(function(t){I(),"function"===typeof B[i].findExisting&&(l.existingPlayer=B[i].findExisting(l.src)),e&&(t.adapter=e),l.player=r.player(t,a,o),r.events&&(v._util.events=r.events),H.forEach(K,function(e,t){"function"==typeof r[t]&&(b[t]=r[t])}),l.player&&"object"==typeof l.player&&n(function(i){H.forEach(K,function(e,t){var n=r[t]||t;"function"==typeof n?b[t]=n:"string"==typeof n&&n&&("function"==typeof i[n]?b[t]=function(e){return i[n](e)}:n in i&&(b[t]=e?function(){return i[n](arguments)}:function(e){return void 0===e?i[n]:i[n]=e}))}),l.autoplay&&b.play()},t)):(P(Q.MEDIA_ERR_SRC_NOT_SUPPORTED),l.networkState=v.NETWORK_NO_SRC)))}t="string"==typeof e?document.querySelector(e):e,s=F("VirtualMediaElement")+"::",l={existingPlayer:null,player:null,src:"",currentSrc:"",networkState:v.NETWORK_EMPTY,readyState:v.HAVE_NOTHING,seeking:!1,autoplay:!1,preload:"",controls:!1,loop:!1,poster:"",volume:1,muted:!1,currentTime:0,duration:NaN,ended:!1,paused:!0,playing:!1,width:void 0,height:void 0,error:null,progressAmount:null,videoHeight:0,videoWidth:0,haveMetadata:D,setDuration:function(e){l.duration!==e&&(l.duration=e,v.dispatchEvent("durationchange"),M())},setDimensions:function(e,t){l.videoHeight===t&&l.videoWidth===e||(l.videoHeight=t,l.videoWidth=e,v.dispatchEvent("resize"),M())},setReadyState:function(e){"string"==typeof e&&(e=G[e]),H.isNumber(l.readyState)&&1<=e&&e<=4&&O(e)},setCurrentTime:function(e){H.isNaN(e)&&void 0===(e=b.currentTime&&b.currentTime())||0<=(e=+e.toFixed(3))&&e<=l.duration&&l.currention(e){0<=e&&e<=1&&l.volume!==e&&(l.volume=e,v.dispatchEvent("volumechange"))},setMuted:function(e){e!=nction(){l.paused=!1,v.dispatchEvent("play")},setPaused:function(){l.currentTime>=l.duration?S=!0:(l.paused=!0,v.dispatchEvent("pause"))},setSeeking:function(){l.seeking||(l.seeking=!0,v.dispatchEvent("seeking"))},setSeeked:function(){l.setSeeking(),L(!0),l.seeking=!1,v.dispatchEvent("seeked")},setEnded:function(){function e(){l.currentTime>=l.duration&&(l.ended=!0,S&&(l.paused=!0,v.dispatchEvent("pause"),S=!1),v.dispatchEvent("ended"))}var t=Date.now();n&&l.currentTime>n&&_<t?(setTimeout(function(){L()},201),setTimeout(e,401)):setTimeout(e,201)}},this.play=function(){b.play&&b.play()},this.pause=function(){b.pause&&b.pause()},this.load=function(){l.src!=ventListener=function(e,t,n){var i,r,a;if("function"==typeof t){for(r=(i=(x[e]||(x[e]=[[],[]]))[n?1:0]).length-1;0<=r;r--)if(i[r].listener===t)return;r<0&&(a={listener:t,callback:function(e){a.loadCount===k&&t(e)},loadCount:k},i.push(a),document.addEventListener(s+e,a.callback,n))}},this.removeEventListener=function(e,t,n){var i,r,a,o;if("function"==typeof t&&(i=x[e]))for(a=(r=i[n?1:0]).length-1;0<=a;a--)if((o=r[a]).listener===t)return document.removeEventListener(s+e,o.callback,n),void r.splice(a,1)},this.dispatchEvent=function(t){var n,i={type:t,target:this.parentNode,data:null};t&&t.type&&(t=t.type);try{(n=document.createEvent("CustomEvent")).initCustomEvent(s+t,!1,!1,i)}catch(e){(n=document.createEvent("HTMLEvents")).initEvent(s+t,!1,!1),n.type=t,n.target=i.target}w[t]?w[t]++:w[t]=1,J(function(){w[t]--,document.dispatchEvent(n),A[t]&&A[t](n)})},this._util={type:i,destroy:function(){H.forEach(x,function(e,n){H.forEach(e,function(e,t){H.forEach(e,function(e){document.removeEventListener(s+n,e.callback,!!t)})}),delete x[n]}),N()},guid:F,parseQueryString:X,nextTick:J},this.canPlayType=function(e){var t;if(!e||"string"!=typeof e)return"";if("function"==typeof r.canPlayType){if(t=r.canPlayType(e))return t}else if(r.canPlayType instanceof RegExp){if(r.canPlayType.test(e))return"probably"}else if("string"==typeof r.canPlayType&&e===r.canPlayType)return"probably";return Y.mimeStart.test(e)&&e.toLowerCase().substr(8)===i.toLowerCase()?"probably":""},this.WasteManagement=(h=!1,f={},{takeOutTheTrash:function(){c&&"function"!==(c[u],!1)&&p&&(Object.keys(f).forEach(function(n){f[n].forEach(function(e,t){c[u](n,e),t===f[n].length-1&&delete f[n]})}),c[d]=p)},toggleOpenEnrollment:function(e){h=e},getEventListeners:function(){return f},setup:function(e,t,n){c=e,d=t,u=n,h=!0,p||(p=c[d],c[d]=function(e,t){h&&(f[e]||(f[e]=[]),f[e].push(t)),p.apply(this,arguments)})}}),Object.deft:function(){return l.src},set:function(e){l.src!==e&&(l.src=e),k||j()}},autoplay:{get:function(){return l.autoplay},set:function(e){l.autoplay=!!e}},loop:{get:function(){return l.loop},set:function(e){l.loop=!!e}},controls:{get:function(){return l.controls},set:function(e){l.controls=!!e,b.conurn void 0===l.width?0:l.width},set:function(e){return e=parseInt(e,10),(isNaN(e)||e<0)&&(e=0),l.width=e,b.width&&b.width(e),void 0===l.width?0:l.width}},height:{get:function(){return void 0===l.height?0:l.height},set:function(e){return e=parseInt(e,10),(isNaN(e)||e<0)&&(e=0),l.height=e,b.height&&b.height(e),void 0===l.height?0:l.height}},currentTime:{get:function(){var e;return b.currentTime&&void 0!==(e=b.currenf(l.readyState<v.HAVE_METADATA)throw new Error("Cannot seek without metadata");return b.currentTime&&b.currentTime(e),l.currentTime}},outerContainer:{get:function(){return b.outerContainer?b.outerContanction(){var e;return void 0!==(e=b.volume?b.volume():e)&&(l.volume=e),l.muted?0:l.volume},set:function(e){return e=Math.min(Math.max(e,0),1),b.volume&&b.volume(e),l.volume}},muted:{get:function(){return!!l.muted},set:function(e){return b.muted&&b.muted(!!e),b.volumet:function(){return l.currentSrc}},duration:{get:function(){return l.duration}},ended:{get:function(){return l.ended}},paused:{get:function(){return l.paused}},seeking:{get:function(){return!!w.see}},networkState:{get:function(){return l.networkState}},videoWidth:{get:function(){returht:{get:function(){return b.videoHeight?b.videoHeight():l.videoHeight}},rn b.offsetWidth()}},offsetHeight:{get:function(){if(b.offsetHeight)return b.offsetHeight()}},error:{get:function(){return E.length&&E[0]||l.error}},parentNode:{get:function(){return b.parentNode?b.parentNode():t}}}),r=R.calDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,getBoundingClientRect:function(){return this.parentNode.getBoundingClientRect()}},o.register=function(n,i,e){var r,a=e||{};if(n)return(o[n]=r=function(e,t){e=new o(n,i,e,t);return e._canPlaySrc=r._canPlaySrc,e._utils=r._utils,e})._canPlaySrc=function(e){var t;if("function"==typeof a.findExisting&&(t=a.findExisting(e)))return t="string"!=typeof t?"probably":t;if("function"==typeof a.canPlaySrc){if(t=a.canPlaySrc(e))return t="string"!=typeof t?"probably":t}else if(a.canPlaySrc instanceof RegExp&&a.canPlaySrc.test(e))return"probably";return""},H.isObject(a.utils)&&(r._utils=a.utils),B[n]={wrapper:r,definition:i,findExisting:a.findExisting,canPlaySrc:a.canPlaySrc,loadApi:a.loadApi},U[n]={},r},o}),define("player.videojs4",["logging","virtualmediaelement","lodash.noconflict","jquery.noconflict","utils.embed","promise!configuration","require","dao"],function(u,e,A,P,I,L,t,D){"use strict";return e.register("videojs4",function(h,f,m){var v,g,s,l=m.accountId,c=m.bcPlayer,d=m.bcEmbed,e=m.bcURL||"https://players.brightcove.net",y=m.bcVideoSources,b=!!m.accountId,w=!!m.isUsingDefaultSrc,E=m.placeholderSrc,n=m.isLive,k=h.isHapyakHostedPlayer=m.isHapyakHostedPlayer,t=m.is360,x=k||_(h)?hapyak.api+"/js/vendor/videojs/6.11.0/video-jsjs.css",i={},C=this,o=L.player||{};function r(e){var t;return v&&v.mediainfo&&v.mediainfo.rawSources_&&-1!==["width","height"].indexOf(e)?0===(t=v.mediainfo.rawSources_.filter(function(e){return e.width&&e.height})).length?1:t[0][e]:0}function a(e){var t={width:0,height:0};return e&&("function"==typeof e.width&&"function"==typeof e.height&&(t.width=e.width(),t.height=e.height()),t.width||t.height||!e.el_||(t.width=e.el_.offsetWidth||0,t.height=e.el_.offsetHeight||0)),t}function _(e){e=e&&e.src&&e.src[0]&&e.src[0].src;return(e=e||m.videoSourceId)&&-1<e.indexOf(".m3u8")}function T(i){var r=o.stream_retry_count||5,a=o.stream_retry_interval||250;i.on("error",function(e){var t=i.error(),n=o.stream_error_list||[4];t&&-1<A.indexOf(n,t.code)&&0<r&&(setTimeout(function(){h&&!1===h.playing&&i.src(i.currentSource())},a),r--,u.warn("Video Load failed retries: "+r))})}i[t?"videojsvr":b?"bc":"videojs"]=function(){return _(h)||k?hapyak.api+"/js/vendor/videojs/6.11.0/video.min.js":t?hapyak.css360Host+"/css360AMD.js":b?{isPath:!0,path:e+("/"==e.slice(-1)?"":"/")+l+"/"+c+"_"+d+"/index"}:"//vjs.zencdn.net/4.8/video.js"};var S={apiRequires:i,player:function(u,p){var e=u.bc,n=Popcorn.guid("hapyak-videojs4-container"),i=u.videojs,a={},o=i&&i.browser&&i.browser.IS_SAFARI&&!i.browser.IS_IOS;function t(){function t(){var t,e=(v=this).eb||v.techName,n=!1,i=(g=v.el())?g.querySelector("Hls"].indexOf(e)&&m.forceReadyState||i&&"none"===i.preload?(v.on("timeupdate",function e(){n&&&&(v.off("timeupdate",e),v.pause(),r(v)))}),t=setInterval(function(){v.play(),n=!0},1e3)):r(v)}function r(e){var t,n,i,r,a,o=g?g.querySelector("video"):null,s=(t=v,n=h,{onSeeking:function(){r=!0,i=t.currentTime()},isCaughtUp:function(){return 0<t.currentTime()-i},onTimeUpdate:function(){r?(n.setCurrentTime(i),this.isCaughtUp()&&(r=!1,n.setCurrentTime(t.currentTime()),n.setSeeked())):n.setCurrentTime(t.currentTime())}}),l=(o&&(v.usingNativeControls(!1),o.controls=!1),C.WasteManagement.setup(e,"on","off"),!1);function c(){var e=S.videoHeight(),t=S.videoWidth(),n=f.offsetWidth||S.offsetWidth(),i=f.offsetHeight||S.offsetHeight(),r=I.dotget(v,"mediainfo.duration")||v.duration();t&&e&rceReadyState&&v.poster(""),i&&n&&(m.forceReadyState||!1===m.isViewer)&&(v.width(n),v.height(i)),r&&(h.setDuration(r),C._util.nextTick(function(){h.setReadyState(C.HAVE_ENOUGH_DATA)}))}function d(){l||(l=!0,p(v))}u.adapter&&u.adapter.setupPlayer&&u.adapter.setupPlayer(v),k&&m.videoSourrc:m.videoSourceId,type:-1<m.videoSourceId.indexOf(".m3u8")?"application/x-mpegURL":"video/mp4",withCredentials:m.workflow&&m.workflow.rules&&m.workflow.rules.is_secure})),e.on("loaded"durationchange",function(){h.setDuration(I.dotget(v,"mediainfo.duration")||v.duration()),C._util.nextTick(function(){h.setReadyState(C.HAVE_ENOUGH_DATA)})}),e.on("volumechange",function(){h.setVolume(v.volume())}),e.on("timeupdate",function(){"Flash"===v.techName_?s.onTimeUpdate():h.setCurrentTime(v.currentTime(d(!0)}),e.on("muted",function(){h.setMuted(!!v.muted())}),e.on("pause",function(){h.setPaused()}),e.on("play",function(){h.setPlay()}),e.on("seeking",function(){h.setSeeking(),"Flash"===v.techName_&&s.onSeeking()}),e.on("seeked",function(){"Flash"!==v.techName_&&(h.setCurrentTime(v.currentTime()),h.setSeeked())}),C.WasteManagement.toggleOpenEnrollment(!1),(C._util.player=v).controls(h.controls),e.paused()||h.setPlay(),o=g&&g.querySelector("video"),e=g&&g.querySelector("object"),o&&1<=o.readyState?(c(),d()):e&&(a=setInterval(function(){var e=C.videoWidth,t=C.videoHeight,n=v.duration();e&&t&&n&&(clearInterval(a),h.setDuration(n),h.setDimensions(e,t),C._util.nextTick(function(){h.setReadyState(C.HAVE_ENOUGH_DATA)}),d())},250))}window.videojs&&u.adapteisioning.hiveStream&&!0===L.provisioning.hiveStream&&irequire(["hive-stream"],function(e){new e(window.videojs,u.adapter.hyrtm)}),h.existingPlayer?(v=h.src,h.controls=!!h.controls,v.ready(function(){g=v.el(),r(v)})):(hapyak.pVideo||P("<link/>",{rel:"stylesheet",type:"text/css",href:x}).appendTo(window.document.head),hapyak.pVideo?(n=hapyakysinline",css:{width:"100%",height:"100%"},on:{loadedmetadata:function(){h.setDimensions(s.prop("videoWidth"),s.prop("videoHeight"))},canplay:function(){h.setDimensions(s.prop("videoWidth"),s.prop("videoHeight"))}}}),A.isArray(h.src)?A.forEach(h.src,function(e){var t=decodeURIComponent(e.src||e.url);P("<source/>",{type:e.type||e.mime_type,src:t}).appendTo(s)}):"string"!=typeof h.src||b||(h.src=decodeURIComponent(h.src),s.attr("src",h.src)),s.addClass("video-js"),b?(s.attr("data-account",l),s.attr("data-player",c),s.attr("data-embed",d),w||y||s.attr("data-video-id",h.src),s.attr("controls","")):(s.addClass("vjs-controls-enabled"),s.addClass("vjs-default-skin"))),P(f).append(s),u&&u.videojsvr&&u.videojsvr.Css360?(s.attr("crossorigin","anonymous"),hapyak.Css360=u.videojs].parentNode,{video:s[0],id:s[0].dataset.videoId,radar:"true",editMode:"true"===I.dotget(I.getQueryParams(location.href),"edit"),analytics:!1,disableHistoryControllers:!0,callback:function(e){e.vjsPlayer.ready(t)}})):b?(e(document.querySelectorAll("video")[0]),i=window.videojs,v=i.players[n],y?v.catalog.load(v.catalog.transformVideoResponse({sources:y})):w&&v.src(E),v.ready(t)):(m.workflow&&m.workflow.rules&&m.workflow.rules.is_secure&&(a={html5:{hls:{withCredentials:!0}}},o&&(a.html5.hls.overrideNative=!0,a.html5.nativeVideoTracks=!1,a.html5.nativeAudioTracks=!1,a.html5.nativeTextTracks=!1)),k?T(v=i(s.attr("id"),a,t)):i(s.attr("id"),a,t)))}_(h)?(window.videojs=i,irequire([hapyak.api+"/js/vendor/videojs/videojs-contrib-hls/5.15.0/contrib-hls.min.js"],function(){var e;m.workflow&&m.workflow.rules&&m.workflow.rules.is_secure&&(e=(e=m.signature)["Virtual-Manifest"]+e["CloudFront-Query-String"],h.src[0]?h.src[0].src=encodeURIComponent(e):m.videoSourceId=e),(e=h)&&e.currentSrc&&e.currentSrc[0]&&e.currentSrc[0].src&&1==e.currentSrc.length&&-1<e.currentSrc[0].src.indexOf("safestream")&&(i.Hls.xhr.beforeRequest=function(e){e.beforeSend=function(e){D.store.setRequestHeaders(e,{"x-hapyak-project":m.projectId})},i.Hls.xhr.beforeRequest=null}),t()})):t()},outerContainer:function(){return g},currentTime:function(e){void 0!==e&&v&&v.currentTime(e)},volume:function(e){void 0!==e&&v&&(h.setVolume(e),v.volume(e))},muted:function(e){v&&(h.setMuted(!!e),v.muted(!!e))},controls:function(e){v&&(v.controlBar&&e?v.controlBar.show():v.controlBar.hide())},destroy:function&&v.dispose(),v=null},width:function(e){void 0!==e&&v&&v.width(e)},height:function(e){void 0!==e&&v&&v.height(e)},offsetWidth:function(){return g?g.offsetWidth:0},offsetHeight:function(){return g?g.offsetHeight:0},videoWidth:function(){var e=P("video",g),t=(t=e?e.prop("videoWidth"):t)||r("width");return(t=!n&&!k||t?t:a(v).width)||0},videoHeight:function(){var e=P("v);return(t=!n&&!k||t?t:a(v).height)||0}};return S},{findExisting:function(e){return e&&"function"==typeof e.id&&"function"==typeof e.el?"probably":""},canPlaySrc:function(e){return"string"==typeof e||A.isArray(e)}})}),define("player.profile.brightcove-v2",["popco,n){"use strict";return e.HTMLVideojs4VideoElement=n,t["Brightcove V2",fn:"HTMLVideojs4VideoElement",forceIpadControls:function(e,t){e.controlBar.el_.style.display="none"},preserveFullscreenStyles:!0,preventIOSControls:!0,args:function(e,t){return[t.playerParameters]},container:function(e){return e="function"==typeof e.el?e.el():e.el},modify:function(e,t){var n=t.querySelector(".vjs-resize-manager");n?t.insertBefore(e.annotationContainer,n.nextSibling):t.insertBefore(e.annotationContainer,t.querySelector(".vjs-text-track-display")||t.querySelector(".vjs-loading-spinner")||t.querySelector(".vjs-big-play-button")||t.querySelector(".vjs-controls")||e.controlBar||null)}},t["brightcove-v2"]}),define("utils.linkifiedtext",["promise!configuration","module","utils.samedomain","utils.validatelink"],function(e,t,l,c){"use strict";var d=/(\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?])))/gi,u=/^https?:\/\//i,t=t.config(),p=(e&&e.player).localLinks||t.localLinks||!1;return function(e,t){var n,i,r,a,o,s=t.split("\n");for(e.innerHTML="",n=0;n<s.length;n++){for(n&&e.appendChild(document.createElement("br")),i=s[n],d.lastIndex=r=0,(o=d.exec(i))&&!c(o[0])&&(o=null);o;)e.appendChild(document.createTextNode(i.substr(r,o.index-r))),o[1]&&(u.test(o[1])||(o[1]="http://"+o[1]),a=document.createElement("a"),p&&l.test(o[1])||a.setAttribute("target","_blank"),a.setAttribute("href",o[1]),a.setAttribute("data-hapyak-log",!0),a.appendChild(document.createTextNode(o[0])),e.appendChild(a)),r=d.lastIndex,o=d.exec(i);a&&a.setAttribute("title",a.href),r<i.length&&e.appendChild(document.createTextNode(i.substr(r)))}}}),define("quiz",["module","dao","jquery.noconflict","lodash","vendor/i18n!nls/ui","base64","utils.linkifiedtext","promise!configuration","utils.embed","tracking","language.manager"],function(q,z,F,B,e,U,W,$,Y,n,t){"use strict";var G=0,i=e.annotation.quiz,K=Y.dotget($,"provisioning.randomizedQuiz");return function(e){var t,f,m,c,v,g,y,b,w,E,k,d=e&&e.session||null,x=n.getInstance(e.trackingId),C=[],_={},T={}rn B.escape(c.get("annotation",e)||Y.dotget(i,t))}function A(){t&&"function"==typeof t&&t()}function P(s){var t,e,n,i=F(s.element),o={numPages:0,currentPage:0},l=1,c=s.enable||{};function d(e){F(".delete-page",t).toggle(e)}function r(){1<o.numPages&&(o.numPages--,o.currentPage=0,d(1<o.numPages),I(i,o))}function a(e){var t,n,i,r,a;if(o.numPages++,n=o.numPages-1,a=1<o.numPages,r=F('<li class="page hide"'+(s.viewer?' page="'+n+'"':"")+">"+(s.viewer?'<span class="failure-label label label-important">'+S("quiz.text.label.incorrect")+"</span>":"")+'<ol class="questions"></ol></li>'),e&&e.content){for(t=0;t<e.content.length;t++)"question"===(i=e.content[t]).type&&void 0!==i.id&&i.id>=l&&(l=i.id+1);for(t=0;t<e.content.length;t++)"question"===(i=e.content[t]).type?(void 0===i.id&&(i.id=l++),F(".questions",r).append(u(i))):"heading"===i.type&&F(".questions",r).append(h(i))}else s.editor&&F(".questions",r).append(u());return d(a),r}function u(t){var e,n,i,r=t?t.id:l++,a=!1!==c.textChoice,o=F('<li class="question" question-id="'+r+'">'+(s.editor?j("delete-question"):"")+'<form class="question-form"><fieldset>'+(s.editor?R(S("quiz.text.placeholder.new_question"),"question-text input-xlarge"):'<h4 class="question-text"></h4>')+'<ol class="answers"></ol></fieldset></form>'+t">'+N("&#x002B; "+S("quiz.button.new_choice"),"new-choice")+(a?N("&#x002B; "+S("quiz.button.new_input"),"new-text-choice"):"")+"</div>":"")+"</li>");if(F(".question-form",o).submit(function(e){return e.preventDefault(),!1}),s.editor&&(F(".new-choice",o).click(function(){var e=p(t,{id:F(".answers",o).children().length});F(".answers",o).append(e),F('input[type="text"]',e).focus(),F('input[type="text"]',e).click(function(e){e.stopPropagation()})}),F(".new-text-choice",o).click(function(){var e=p(t,{id:F(".answers",o).children().length},!0);F(".answers",o).append(e),F("textarea",e).focus(),F("textarea",e).click(function(e){e.stopPropagation()})}),H(o,{selector:".delete-question"})),t){if(t.text&&(s.editor?F(".question-text",o).val(t.text):F(".question-text",o).text(t.text)),n=t.answers)for(K&&!s.isEditMode&&Y.dotget(s,"data.randomizeAnswers")&&(n=function(i){if(i||!Array.isArray(i)){var e,t,n,r=[],a=[],o=[];for(i.forEach(function(e){"choice"===e.type?(r.push(e.text),e.text,e):a.push(e)}),e=r.length;0!==e;)n=Math.floor(Math.random()*e),t=r[--e],r[e]=r[n],r[n]=t;return r.forEach(function(e,t){for(var n in i)if(i[n].text===e){o.push(i[n]);break}}),o.concat(a)}}(n)),e=0;e<n.length;e++)i="text-choice"===(i=n[e]).type?p(t,i,!0):p(t,i),F(".answers",o).append(i)}else s.editor&&F(".answers",o).append(p(t,{id:F(".answers",o).children().length}));return o}function p(e,t,n){var i=G++,r=!1;a=t.id;var a=H(F('<li class="answer '+(n?"text-":"")+'choice-answer">'+('<input id="hapyak-label-'+i+'" '+(v?"":'name="choice"')+' type="'+y+'" value="'+a+'" tabindex="-1">')+'<label tabindex="0" role="listitem" class="radio '+(s.editor?"inline":"")+'" for="hapyak-label-'+i+'"><div class="hapyak-select"> &nbsp; </div>'+(s.viewer?n?V(S("quiz.text.placeholder.new_choice"),"answer-text"):'<div+"</label>"+(s.editor?n?V(S("quiz.text.placeholder.new_input"),"answer-text"):R(S("quiz.text.placeholder.new_choice"),"answer-text"):"")+(s.editor?j():"")+"</li>"));return e&&(r=e.answers.some(function(e){return!!e.correct})),e=F('input[type="'+y+'"]',a),s.editor?(e.dblclick(function(){F(this).removeAttr("checked")}),t&&(t.text&&("choice"===t.type?F('input[type="text"]',a):F("textarea",a)).val(t.text),t.correct&&(e.attr("checked",!0),C.push("hapyak-label-"+i),t.text&&(_["hapyak-label-"+i]=t.text)))):t&&(t.text&&!n&&(F(".label-text",a).text(t.text),(e=a[0].getElementsByTagName("label")).length&&(e[0].ariaLabel="Option - "+t.text)),!t.correct&&r||(C.push("hapyak-label-"+i),t.text&&(_["hapyak-label-"+i]=t.text))),a}function h(e){var t=H(F('<li class="heading">'+(s.editor?R("Enter Heading","heading-text input-xlarge"):"<h3></h3>")+(s.editor?j("delete-heading"):"")+"</li>"),{selector:".delete-heading"});return s.editor?e&&e.text&&F('input[type="text"]',t).val(e.text):e&&e.text&&F("h3",t).text(e.text),t}if(C=[],_={},T={},t=H(F('<div class="hapyak-quiz-builder clearfix">'+(s.editor?'<div class="thank-you-text hide"></div><div class="btn-toolbar clearfix"><div class="btn-group pull-left"><a class="btn btn-large new-question bcov-flat-btn">&#x002B; '+S("quiz.menu.new_item.new_question")+'</a></div><div class="options-menu btn-group pull-right"><a class="btn btn-large dropdown-toggle bcov-flat-btn" data-toggle="dropdown" href="#">'+S("quiz.menu.set_option.menu_label")+' <span class="caret"></span></a><ul class="dropdown-menu" style="width:293px;"><li><a class="show-skip"><input type="checkbox"><label><div class="hapyak-select"> &nbsp; </div> '+S("quiz.menu.set_option.cancel")+"</a></li>"+(K?'<li><a class="randomize-answers"><input type="checkbox"><label><div class="hapyak-select"> &nbsp; </div> '+S("quiz.menu.set_option.randomizeAnswers")+"</a></li>":"")+'<li><a class="edit-on-submit-actions"><p>'+S("quiz.menu.set_option.reviewScreen")+'</p></a></li><li><a class="edit-pass-fail-actions"><p>'+S("quiz.menu.set_option.passFail")+'</p></a></li><li><a class="edit-questions-actions"><p>'+S("quiz.menu.set_option.question")+"</p></a></li></ul></div></div>":"")+(s.editor?j("delete-page"):"")+'<ul class="pages clearfix"></ul><span class="page-number pull-left"></span><div class="pagination pagination-small pull-right"><ul><li class="previous-page"><a class="bcov-flat-btn"> '+S("quiz.button.previous_page")+'</a></li><li class="next-page"><a class="bcov-flat-btn">'+S("quiz.button.next_page")+" </a></li></ul></div></div>"),{paging:o,verifyDelete:s.verifyDelete?function(e){s.verifyDelete(function(){e&&e(F(".page:not(.hide)")),r()})}:null}),i.append(t),A(),s.editor&&(s.verifyDelete||F(".delete-page",t).click(r),F(".next-page",t).click(function(e){F(this).hasClass("disabled")||D(i,o),e.stopPropagation()}),F(".previous-page",t).click(function(e){F(this).hasClass("disabled")||L(i,o),e.stopPropagation()}),F(".new-question",t).click(function(e){F(".pages",t).append(a()),o.currentPage=o.numPages-1,I(i,o)}),F(".edit-on-submit-actions",t).click(function(){s.onSubmitDialog(function(e){k=e.quiz.showRetry,E=e.quiz.showReview,w=e.quiz.showResultsfunction(){s.actionsDialog(function(e){m=e.quiz.passingMark||"50",b=e.quiz.setPassThreshold})}),F(".edit-questions-actions",t).click(function(){s.questionsDialog(function(e){v=e.quiz.multipleAnswers,g=e.quiz.multipleRequired})}),F(".new-heading",t).click(function(){var e=h();F(".questions",M(o.currentPage,t)).append(e),F('input[type="text"]',e).focus(),A()}),F(".options-menu li",t).click(function(e){var t=F("input",F(this));0<t.length&&(t.prop("checked",!t.prop("checked")),e.stopPropagation())}),F(".options-menu li input",t).click(function(e){e.stopPropagation()}),Y.dotget(s,"data.randomizeAnswers")&&F(".randomize-answers input",t).prop("checked",!0),(n=void 0===(n=void 0===(n=s.data&&s.data.showSkip)?s.showSkip:n)?!0:n)&&F(".show-skip input",t).prop("checked",!0)),s.data&&s.data.pages)for(e=0;e<s.data.pages.length;e++)F(".pages",t).append(a(s.data.pages[e]));else s.editor&&F(".pages",t).append(a());return I(i,o),{element:t,paging:o,gotoPage:function(e){O(i,o,e)},nextPage:function(){D(i,o)},previousPage:function(){L(i,o)},destroy:function(){t.remove()}}}function I(e,t){for(var n=F(".previous-page",e),i=F(".next-page",e),r=0;r<t.numPages;r++)M(r,e).toggleClass("hide",r!==t.currentPage);F(".page-number",e).toggleClass("one-page",t.numPages<=1),n.toggleClass("disabled",0===t.currentPage),i.toggleClass("disabled",t.currentPage+1>=t.numPages),F(".page-number",e).text(S("quiz.text.label.page")+" "+(t.currentPage+1)+" "+S("quiz.text.label.of")+" "+t.numPages),A()}function L(e,t){O(e,t,t.currentPage-1)}function D(e,t){O(e,t,t.currentPage+1)}function O(e,t,n){t.currentPage=n,I(e="button" class="'+t+' btn btn-large">'+e+"</button>"}function R(e,t){return'<input type="text" class="'+t+'" placeholder="'+e+'">'}function V(e,t){return'<textarea type="text" class="'+t+'" placfunction j(e){return'<a class="delete '+(e=e||"")+'"><i class="ss-icon ss-symbolicons-block icon-color">&#xE0D0;</i></a>'}function H(n,e){var t=(e=e||{}).selector||".delete",i=e.verifyDelete||null;function r(){n.remove(),A()}return F(t,n).click(function(e){i?i(function(e){var t=n;n=e,r(),n=t}):r(),e.stopPropagation()}),n}this.viewer=function(u){var t,e,n=$&&$.provisioning&&$.provisioning.singleClickQuiz,p=(u=F.extend({viewer:!0},u),c=u.annotationVariableConfig.languageManager,v=u.data.multipleAnswers,g=u.data.multipleRequired,y=v?"checkbox":"radio",d.annotationId=d.annotationId||u.id,P(u));function i(){var e=this&&this.value,e=e&&""!==e.replace(/\s/g,"");F('input[type="'+y+'"]',F(this).closest("li")).prop("checked",!0),e?r():t.addClass("disabled")}function r(){var e=h(o());t.toggleClass("disabled",e.numQuestions!==e.numAnswered),t.text(p.paging.currentPage+1<p.paging.numPages?S("quiz.button.next"):S("quiz.button.submit"))}p.element.addClass("viewer"),p.element.append(F('<div class="submit-back-buttons pull-right"><button type="button" class="btn btn-large skip hide" tabindex="0" role="button">'+S("quiz.button.cancel")+'</button><button type="button" class="btn btn-large go-back hide" tabindex="0" role="button">'+S("quiz.button.back")+'</button><button type="button" class="btn btn-large btn-primary submit-answers disabled" tabindex="0" role="button">'+S("quiz:button.submit")+"</button></div>")),t=F(".submit-answers",p.element),e=F(".skip",p.element),n&&t.addClass("hide"),r();var a=F(".answer",p.element);function o(){return F(F(".pages",p.element).children()[p.paging.currentPage])}function h(e){e=e||p.element;var o,s={numQuestions:0,numAnswered:0,numCorrect:0,answers:[]};return T={},F(".question",e).each(function(){s.numQuestions++;var i=F(this),e=F(".answer input:checked",i),r=parseInt(i.parents("li.page").attr("page"),10),a=!1;F(e).each(function(){var t,n={questionId:parseInt(i.attr("question-id"),10),question:F(".question-text",i).text(),page:r,elementId:F(this).attr("id")},e=F(this);T[n.questionId]=T[n.questionId]||[],s.answers.push(n),0===e.length?n.correct=!1:(a||s.numAnswered++,e=F(e[0]),n.answer=e.siblings("label").children(".label-text").text(),0<(t=e.siblings("label").children(".answer-text")).length&&(n.answer=t.val()),n.answer?(F(".answers",i).children().each(function(){var e;-1<(o=C.indexOf(F('input[type="'+y+'"]',F(this)).attr("id")))&&(a||T[n.questionId].push(_[C[o]]),0<t.length&&(n.correct=!((e=_[C[o]])&&(!v||n.answer.trim()))||e.trim().toLowerCase()===n.answer.trim().toLowerCase()))}),(!C.length||-1<(o=C.indexOf(e.attr("id")))&&t.length<=0)&&(n.correct=!0),!n.correct||g&&a||s.numCorrect++,a=!0):(n.correct=!1,s.answers.pop()))})}),B.forEach(s.answers,function(e){var t=T[e.questionId];t&&(e.correctAnswer=t.join(", "))}),s}function s(){var s,e,t,l=h(p.element),o=[],n={numPages:+l.numQuestions,currentPage:0},c=[],d=[],i=[];p.paging.currentPage+1<p.paging.numPages?(p.nextPage(),F(".go-back",p.element).toggleClass("hide",0===p.paging.currentPage),r()):(p.element.children().hide(),s=F('<ul class="clearfix"><li class="page"><div class="summary"><div class="questions"><h4 class="thank-you hide"></h4><ol class="question-list pages"></ol><div class="hapyak-share"><a class="zocial facebook icon">&nbsp;</a><a class="zocial twitter icon">&nbsp;</a></div></div></div></li></ul><div class="view-num-correct hide"><span class="num-correct">'+l.numCorrect+"</span> "+S("quiz.text.label.out_of")+' <span class="num-questions">'+l.numQuestions+"</span> "+S("quiz.text.label.correct")+'</div><div class="ok-retry-buttons pull-right"><button type="button" class="btn btn-large btn-primary ok">'+S("quiz.button.done")+"</button></div>"+(1<l.numQuestions?'<div class="pagination pagination-small review-screen pull-right"><ul><li class="previous-page disabled"><a> '+S("quiz.button.previous_page")+'</a></li><li class="next-page"><a>'+S("quiz.button.next_page")+" </a></li></ul>":"")+"</div>"),p.element.append(s),F(".next-page",s).click(function(e){F(this).hasClass("disabled")||D(s,n),e.stopPropagation()}),F(".previous-page",s).click(function(e){F(this).hasClass("disabled")||L(s,n).children(".view-num-correct").removeClass("hide"),F(".zocial.facebook",p.element).click(function(e){u.facebookShare(),e.stopPropagation()}),F(".zocial.twitter",p.element).click(function(e){u.twitterShare(),e.stopPropagation()}),v&&(i=B.clone(C),B.forEach(l.answers,function(e){var t=i.indexOf(e.elementId),n=e.questionId;-1<t&&i.splice(t,1),n&&!e.correct&&-1===d.indexOf(n)&&d.push(n)}),l.answers.length>l.numQuestions&&(l.numCorrect=l.numQuestions-d.length),l.numCorrect=Math.max(l.numCorrect,0),F(".num-correct",s).text(l.numCorrect),i.length!==C.length&&B.forEach(i,function(e){var t=F("#"+e),n=parseInt(t.closest(".page").attr("page"),10),i=t.closest(".question"),r=parseInt(i.attr("question-id"),10),a=T[r].join(", "),o={questionId:r,question:F(".question-text",i).text(),elementId:e,page:n,correct:!1,unanswered:!0,answer:t.siblings("label").children(".label-text").text(),correctAnswer:a};B.forEach(l.answers,function(e,t){if(o.questionId===e.questionId&&-1===d.indexOf(r)&&e.correct)return l.numCorrect&&-1===c.indexOf(r)&&(c.push(r),g&&(l.numCorumCorrect)),l.answers.splice(t+1,0,o),!1})})),(t=u.getThankYouText(l))&&(e=F(".thank-you",p.element),W(e[0],t),"function"==typeof u.externalClick&&e.find("a[data-hapyak-log]").click(function(e){u.externalClick(e.currentTarget)}),e.removeClass("hide")),F.each(l.answers,function(t,r){var e=F('<li class="question clearfix page hide"></li>'),a=F('<ul><li><h4 class="question-text"></h4><div class="incorrect'+(r.unanswered?" unanswered":"")+'"><a tabindex="0" class="show-answer '+(g?"hide":"")+'">'+S("quiz.button.show_answer")+'</a><div class="correct-answer hide">Correct Answers<ul id="correct-answer-'+t+'"></ul></div><a tabindex="0" class="retry">'+S("quiz.button.retry")+'</a></div><div class="answer">'+(C.length?r.correct?'<span style="color:green" class="ss-icon ss-check"></span>':'<span style="color:red" class="ss-icon ss-delete"></span>':"")+'<pre class="answer-text"></pre></div></li></ul>'),n=d.indexOf(r.questionId),i=-1<o.indexOf(r.questionId);o.push(r.questionId),F(".retry",a).hide(),F(".incorrect",a).hide(),!d.length&&(v||r.correct)||(-1<n&&d.splice(n,1),F(".incorrect",a).show(),u.data.showRetry&&((n=F(".retry",a)).show(),a11yListener(n,function(){s.remove(),p.element.children(":not(.pagination):not(.delete)").show(),p.gotoPage(r.page),u.retry&&u.retry()})),a11yListener(F(".show-answer",a),function(){var n,i,e=u&&u.data&&u.data.pages&&u.data.pages[r&&r.page],e=e&&Y.dotget(e,"content.0.answers");F(this).hide(),v?(e=e,n=document.getElementById("correct-answer-"+t),i=0,n&&e&&(n.innerHTML="",Array.prototype.forEach.call(e,function(e){var t=document.createElement("li");e&&e.correct&&e.text&&(i+=1,t.innerHTML=i+". "+e.text,t.classList.add("correct-answer"),n.appendChild(t))}),n.classList.add("correct-answer-list"))):F(".correct-answer",a).text(S("quiz.text.label.answer")+": "+r.correctAnswer),F(".correct-answer",a).removeClass("hide"),F(".retry",a).hide()})),F(".show-answer",a)[u.data.showResults?"show":"hide"](),F(".question-text",a).text(r.question),i?(F(".incorrect",a).remove(),F(".question-text",a).remove(),u.data.showRetry&&(!l.answers[t+1]||g&&l.answers[t+1].questionId!==r.questionId&&!r.correct)&&F(".retry",a).show(),F(".question-list",s).children().last().append(a)):(e.append(a),F(".question-list",s).append(e),u.data.showRetry&&F(".retry",a).show()),F(".answer-text",a).text(r.answer)}),I(s,n),F(".question-list > .question > .incorrect",s).each(function(){!F(this).hasClass("unanswered")&&F(this).is(":visible")&&u.data.showResults&&F(".show-answer",F(this)).show()}),a11yListener(F(".ok",s),function(){f(l)}))}function l(){var e=o(),s=h(e),l=[],c=[],i=[];u.data.showRetry&&s.numQuestions!==s.numCorrect?u.data.showRetry&&(t.removeClass("btn-primary btn-success"),t.addClass("btn-danger"),e.addClass("failure")):(t.removeClass("btn-primary btn-danger disabled"),t.addClass("btn-success"),e.removeClass("failure"),p.paging.currentPage+1<p.paging.numPages?(p.nextPage(),F(".go-back",p.element).toggleClass("hide",0===p.paging.currentPage),r()):(s=h(p.element),v&&(i=B.clone(C),B.forEach(s.answers,function(e){var t=i.indexOf(e.elementId),n=e.questionId;-1<t&&i.splice(t,1),n&&!e.correct&&-1===l.indexOf(n)&&l.push(n)}),s.answers.length>s.numQuestions&&(s.numCorrect=s.numQuestions-l.length),s.numCorrect=Math.max(s.numCorrect,0),i.length!==C.length&&B.forEach(i,function(e){var t=F("#"+e),n=parseInt(t.closest(".page").attr("page"),10),i=t.closest(".question"),r=parseInt(i.attr("question-id"),10),a=T[r].join(", "),o={questionId:r,question:F(".question-text",i).text(),elementId:e,page:n,correct:!1,unanswered:!0,answer:t.siblings("label").children(".label-text").text(),correctAnswer:a};B.forEach(s.answers,function(e,t){if(o.questionId===e.questionId&&-1===l.indexOf(r)&&e.correct)return s.numCorrect&&-1=umCorrect--),s.answers.splice(t+1,0,o),!1})})),f(s)))}function f(e){var t={},n=(x&&(q.config().tracking||x.getRegisteredProperty("Partner Data"))&&(B.forEach(x.getRegisteredProperty("Partner Data"),function(e){t[e.key]=e.value}),e.partnerData=t),e.annotation_id=d.annotationId,e.project_id=d.projectId,e.submitted_at=Date().toString(),F.extend({data:U.encode(JSON.stringify(e)),key:q.config().apiKey},d)),i=q.config().tracking;n.tracking=U.encode(JSON.stringify(i)||""),z.store.sendQuizSubmission(e),u.success&&u.success(e)}return a11yListener(a,function(e){"keypress"===e.type&&(e=e.currentTarget.querySelectorAll('input[type="'+y+'"]')).length&&(e[0].checked="radio"===y||!e[0].checked),r(),n&&(u.data.showReview?s:l)()}),a.dblclick(function(){F('input[type="'+y+'"]',F(this).closest("li")).prop("checked",!1),r()}),Y.dotget($,"provisioning.quiz.requireInputText")?F("textarea").keyup(i).focus(i):F("textarea",p.element).e="'+y+'"]',F(this).closest("li")).prop("checked",!0),r()}),t.click(function(){F(this).hasClass("disabled")||(u.data.showReview?s:l)()}),u.data.showSkip&&u.data.pages&&(e.removeClass("hide"),e.click(function(){u.skip&&u.skip()})),F(".go-back",p.element).click(function(){0<p.paging.currentPage&&(p.previousPage(),F(".go-back",p.element).toggleClass("hide",0===p.paging.currentPage),r())}),{destroy:function(){p.destroy()}}},this.editor=function(e){e=F.extend({editor:!0},e),c=e.annotationVariableConfig.languageManager,e.isEditMode=!0,v=e.data.multipleAnswers,g=e.data.multipleRequired,y=v?"checkbox":"radio";var n=P(e);return e.data&&(f=e.data.thankYouText||S("quiz.dialog.onSubmit.thankYouText"),m=e.data.passingMark,e.data.randomizeAnswers,b=e.data.setPassThreshold,k=e.data.showRetry,w=e.data.showResults,E=e.data.showReview),void 0===k&&(k=!0),void 0===w&&(w=!0),void 0===E&&(E=!0),n.element.addClass("editor"),t=e.onDataChange,{save:function(){var t={id:e.id,pages:[],passingMark:m,randomizeAnswers:F(".randomize-answers input",n.element).prop("checked"),setPassThreshold:b,showSkip:F(".show-skip input",n.element).prop("checked"),showRetry:k,showResults:w,showReview:E,multipleAnswers:v,multipleRequired:g,showHints:!0,thankYouText:f},r=this;return t.thankYouText===S("quiz.dialog.onSubmit.thankYouText")&&(t.thankYouText=""),r.isEmpty=!0,F(".pages",n.element).children().each(function(e){var i={id:e+1,content:[]};t.pages.push(i),F(".questions",this).children().each(function(){var e=F(this),n={};n.text=F('input[type="text"]',e).val(),n.text&&(r.isEmpty=!1,e.hasClass("heading")?n.type="heading":(n.id=parseInt(e.attr("question-id"),10),n.type="question",n.answers=[],F(".answers",e).children().each(function(){var e=F(this),t={};n.answers.push(t),t.text=F('textarea, input[type="text"]',e).val().trim(),(e.hasClass("choice-answer")||e.hasClass("text-choice-answer"))&&(t.type=e.hasClass("choice-answer")?"choice":"text-choice",-1===i.content.indexOf(n)&&i.content.push(n),("text-choice"===t.type||t.text)&&F('input[type="'+y+'"]',e).prop("checked")&&(t.correct=!0))})))})}),r.isEmpty&&(t.pages=null),t},destroy:function(){n.destroy()},isEmpty:!0}}}}),define("popcorn.quiz",["jquery.noconflict","lodash.noconflict","popcorn","player.playereval","quiz","cookie","utils","vendor/i18n!nls/ui","logging","playlist.addon","popcorn.base","popcorn.sharing"],function(h,S,A,P,I,e,L,D,t,O){"use strict";A.basePlugin("quiz",function(f,e){var t,i,r,n,m,v,g=this,y=f.container=e.makeContainer(),a=!0,o=null,s=!1,l=!1,b=!1,w=!1,c={},E=new P.TemplateEvaluator(this,f),k=g.options.hapyakPlayer.tracking,d=D.annotation.quiz;function x(){if(f&&f.annotationId)return f.annotationId}function u(){b&&!w&&C(),l&&y.addClass("active")}function C(){var n,e;for(e in c)c.hasOwnProperty(e)&&(g.unwatchData(f.dataId||f.id,"condition",u),delete c[e]);function h(e,t){g.emit("hapyak-quiz-done",f.dataId||f.id),a=!1,y.removeClass("active"),y.off("click",_),y.off("mouseover",_),y.off("mouseout",T),e&&g.setData(f.dataId||f.id,"condition",!0),t||g.playviewer({id:n,element:t,data:f.quiz,getThankYouText:function(e){var t,n,i=0,r=f.quiz&&f.quiz.setPassThreshold&&f.quiz.passingMark||51;return f.quiz&&f.quiz.multipleRequired&&(n=!0),A.forEach(e.answers,function(e){e.correct&&i++}),n=(n?e.numCorrect/e.numQuestions:i/e.answers.length)>=r/100,f.pass&&n?t=f.pass.thankYou:f.fail&&!n&&(t=f.fail.thankYou),t=t||f.quiz.thankYouText||S.escape(d.dialog.onSubmit.thankYouText),y.addClass("hapyak-review-screen").css({top:0,left:"auto"}),t},success:function(e){var t,n,i,r,a,o,s={},l=x(),c=!0,d=0,u=!1,p=!1;n=f.quiz&&f.quiz.setPassThreshold&&f.quiz.passingMark||51,l&&(w=!0,A.forEach(e.answers,function(e){k.annotationActionById(l,"quiz","Answer",{Question:e.question,Page:e.page,Answer:e.answer,Correct:!0===e.correct,Multiple:f.quiz.multipleAnswers}),e.correct&&d++,g.setData("quiz_"+l+"_"+e.questionId,e.answer),g.setData("quiz_"+l+"_"+e.questionId+"_correct",e.correct),g.setData("quiz_"+l+"_"+e.questionId+"_info",{question:e.question,time:f.start,answer:e.answer,correct:e.correct})}),w=!1,u=n/100<=(f.quiz.multipleRequired?e.numCorrect/e.numQuestions:d/e.answers.length)?(t=f.pass,!0):(t=f.fail,!1)),y.removeClass("hapyak-review-screen").css({top:m||50,left:v||50}),g.setData("quiz_"+l+"_pass",u),t&&(t.gotoLink&&(n=E.evaluate(t.gotoLink,!0),g.emit("clearactivepauses"),L.navigateToUrl(n),s["Target Link"]=n,p=!!t.pause),t.gotoTrack&&((r=L.getTrackTime(/^([0-9]+)?(?:#(?:([0-9]+):)?([0-9a-fid\=]+(?:\.[0-9]+)?))?$/.exec(t.gotoTrack))).time&&(g.on("seeked",function e(){g.off("seeked",e),g.play()}),s["Target Time"]=r.time),r.track&&(s["Target Track"]=r.track),t.goToVideo&&"-"!==t.goToVideo||g.options.loadTrackTime(r.track,r.time,r.annotationId)),t.goToVideo&&(n=0,i=t.branchVideoTime,o=t.gotoTrack,(i||o)&&(r=i||L.getTrackTime(/^([0-9]+)?(?:#(?:([0-9]+):)?([0-9a-fid\=]+(?:\.[0-9]+)?))?$/.exec(o)),n=i?r:r.time),O.goTo(t.goToVideo,!0,n)),t.resetVariables&&(C(),c=!1),t.setVariables&&(P.playereval(g,t.setVariables),-1<t.setVariables.indexOf("resetVariables(ionById(l,"quiz","Submit",A.extend({"Num Questions":e.numQuestions,"Num Answered":e.numAnswered,"Num Correct":e.numCorrect,Multiple:f.quiz.multipleAnswers,Pass:u,Summary:(a={},o=e.answers.filter(function(e){return!e.unanswered}),S.forEach(o,function(e){a[e.questionId]||(a[e.questionId]={question:e.question,answers:[],correct_answer:e.correctAnswer}),a[e.questionId].answers.push(e.answer)}),S.values(a))},s)),b=!0,h(c,p)},retry:function(){var e=x();e&&k.annotationActionById(e,"quiz","Retry"),b=!0},skip:function(){var e=x();e&&k.annotationActionById(e,"quiz","Skip"),h(!1),b=!0},annotationVariableConfig:f.annotationVariableConfig,facebookShare:function(){g.shareFacebook()},twitterShare:function(){g.shareTwitter()},externalClick:function(e){var t=x();t&&k.annotationActionById(t,"quiz","External Click",{Target:e.href,Text:e.text,Remaining:g.duration()-g.currentTime()})}}),f.quiz&&f.quiz.pages&&n&&A.forEach(f.quiz.pages,function(e){A.forEach(e.content,function(e){var t="quiz_"+n+"_"+e.id;c[t]||(g.watchData(f.dataId||f.id,t,u),c[t]=!0),g.setData(t+"_info",{question:e.text,time:f.start})})})}function p(){y.hasClass("hapyak-review-screen")||y.css({width:n,left:v||50,top:m||50})}function _(){a&&(f.target.classList.contains("hapyak-editing")||s||(o=null,o=g.paused(),s=!0),g.pause())}function T(){f.target.classList.contains("hapyak-editing")||f&&f.pause?g.pause():a&&!y.is(":hover")&&(o?g.pause():g.play(),s=!1)}return y.setAttribute("role","form"),y=h(y),i=new I({trackingId:g.options.hapyakPlayer.instanceId,session:{playId:g.getData("playerId"),projectId:g.getData("projectId"),trackId:g.getData("trackId"),annotationId:x()}}),n=f.width||"960px",m=f.top||"12%",v=f.left||"4%",p(),t=h('<div class="hapyak-quiz-container quiz-viewer" tabindex="0"></div>'),y.append(t),f.quiz&&C(),f.annotationVariableConfig.add("quiz",f,function(e,t,n){var i=n.pass,r=n.fail,a=n.questions;n.default_review_message&&(f.quiz.thankYouText=n.default_review_message),i&&(i.review_message&&(f.pass.thankYou=n.pass.review_message),i.link&&(f.pass.gotoLink=i.link)),r&&(r.review_message&&(f.fail.thankYou=n.fail.review_message),r.link&&(f.fail.gotoLink=r.link)),f.quiz.pages&&f.quiz.pages.forEach(function(e,i){e=e.content;e&&e.forEach(function(e,n){e=a[e.id];e&&(e.question&&(f.quiz.pages[i].content[n].text=e.question),e.answers&&e.answers.forEach(function(e,t){f.quiz.pages[i].content[n].answers[t].text=e}))})}),C()}),{start:function(){l=!0,f.pause&&g.pause(),a&&(y.on("click",_),y.on("mouseover",_),y.on("mouseout",T),y.addClass("active"))},_update:function(e,t){!t.hasOwnProperty("quiz")||S.isEqual(e.quiz,t.quiz)&&!t.pluginData.recreateViewer||(e.quiz=t.quiz,delete t.pluginData.recreateViewer,C()),t.hasOwnProperty("width")&&t.width!==n&&(n=t.width),t.hasOwnProperty("top")&&t.top!==m&&(m=t.top),t.hasOwnProperty("left")&&t.left!==v&&(v=t.left),p(),f.annotationVariableConfig.update("quiz",f)},end:function(){a=!(l=!1),y.off("click",_),y.off("mouseover",_),y.off("mouseout",T),y.removeClass("active"),o=null,s=!1},getExportedVariables:function(){var t=x(),n=[];return f.quiz&&A.forEach(f.quiz.pages,function(e){A.forEach(e.content,function(e){"question"===e.type&&n.push({title:e.text,name:"quiz_"+t+"_"+e.id})})}),n},_teardown:function(){for(var e in y.off("click",_),y.off("mouseover",_),y.off("mouseout",T),r&&r.destroy(),t&&0<t.children().size()&&t.empty(),c)c.hasOwnProperty(e)&&(g.unwatchData(f.dataId||f.id,"condition",u),delete c[e]);f.annotationVariableConfig.remove(f.annotationId)}}},{about:{name:"Quiz Plugin",version:"0.1",author:"Jason Horman, @jhorman",website:"https://github.com/hapyak"},options:{start:{elem:"input",type:"number",label:"Start",units:"seconds"},end:{elem:"input",type:"number",label:"End",units:"seconds"}}})}),define("popcorn.profile.quiz",["popcorn.gates","popcorn.quiz"],function(){"use strict";return function(e){var r=e.uploadAuth;return{id:"quiz",icon:'<span class="interactivity-icon-annotation-question"></span>',sortIndex:3,title:"a quiz","data-test-name":"editor-add-quiz-button",editor:["popcorn.quickedit.quiz"],zIndex:7,variables:{populateConfig:function(e,t){var n={},i={questions:{}},e="Quiz_"+e,r=t.pass,a=t.fail,t=t.quiz;return r&&(i.pass={},r.gotoLink&&(i.pass.link=r.gotoLink),r.thankYou&&(i.pass.review_message=r.thankYou)),a&&(i.fail={},a.gotoLink&&(i.fail.link=a.gotoLink),a.thankYou&&(i.fail.review_message=a.thankYou)),t&hankYouText),t&&t.pages&&t.pages.length&&t.pages.forEach(function(e){e=e.content;e&&e.forEach(function(e){var n={answers:[]};e.text&&(n.question=e.text),e.answers&&e.answers.forEach(function(e,t){e.text&&n.answers.push(e.text)}),i.questions[e.id]=n})}),n[e]=i,n}},commit:!0,defaults:{precondition:!0,pluginData:{}},filter:function(e,t){if(!e.quiz)return!1;e.quiz.id||(e.quiz.id=t.get("id"))},create:function(e,t,n){var i;n&&(i=t.get("id"),t=t.get("track.id"),n.setting(e,"annotationId",i),n.setting(e,"csvExport","/api/quiz/report?track_id="+t+"&"+r))}}}}),define("popcorn.basic360",["dao","utils.embed","utils.parsecolor","popcorn","popcorn.base"],function(e,l,r,t){"use strict";function c(e){var t="image"===e.inputType,n=document.createElement(t?"img":"div"),i=e.opacity||0;return"hotspot"!==e.inputType&&(n[t?"src":"innerHTML"]=e.text),n.classList.add("basic360-"+e.inputType+"-standard"),e.color&&(n.style.color=e.color),e["background-color"]&&(t=r(e["background-color"]),n.style.backgroundColor="rgba("+t.r+","+t.g+","+t.b+","+i+")"),n}t.basePlugin("basic360",function(n,e){var i,r,a,o=this;function s(t){var e=o.video.parentNode.getElementsByTagName("VIDEO")[0];a=hapyak.Css360&&hapyak.Css360.getSphereByContainerId(l.dotget(e,"dataset.videoId")),this.addedToSphere||a&&(r=a.add({id:t.dataId,transform:t.transform&&JSON.parse(t.transform)||[0,0,0,0,0,0,0,0,0,1,1,1],saveCallback:function(e){o.options.hapyakPlayer.annotations.update(t.annotationId,{transform:e})}},i),this.addedToSphere=!0),r&&"function"==typeof r.show&&r.show(),"true"!==l.dotget(l.getQueryParams(location.href),"edit")&&t.rotateOnStart&&r&&"function"==typeof r.rotateToMe&&r.rotateToMe(!0),i.style.display="block"}return e.target=e.target||n.target,n.inputType||(n.inputType="hotspot"),n.text||(n.text=""),n"[0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1]"),i=e.makeContainer(),(n.container=i).appendChild(c(n)),i.style.display="none",{start:function(e,t){var n=this;4===o.video.readyState?s.bind(this)(t):o.on("canplay",function(){s.bind(n)(t)})},end:function(){r&&"function"==typeof r.hide&&r.hide(),i.style.display="none"},_update:function(e,t){(void 0!==t.pause&&n.pause!==t.pause||t.end!==n.end||t.start!==n.start)&&(n.pause=t.pause),n.inputType=t.inputType||"hotspot",n.text=t.text||"",n["background-color"]=t["background-color"]||"",n.color=t.color||"",n.opacity=t.opacity||"",i.innerHTML="",i.appendChild(c(orm||"[0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1]",r&&"function"==typeof r.setPositionFromString&&r.setPositionFromString(n.transform))},_teardown:function(){requestAnimationFrame(function(){r&&"function"==typeof r.remove&&r.remove()})}}})}),define("popcorn.profile.basic360",["player.normalizeonclick","popcorn.basic360"],function(e){"use strict";return{id:"basic360",title:"Basic 360",icon:"&#x1F310",editor:["popcorn.quickedit.basic360"],sortIndex:20,zIndex:7,defaults:{text:"",inputType:"hotspot","background-color":"#000000",color:"#ffffff",opacity:"0.3",transform:"[0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1]"},normalize:{"onClick.gotoLink":e.gotoLink,"onClick.gotoTrack":e.gotoTrack,"onClick.addClasses":e.addClasses,"onClick.setVariables":e.setVariables,onClick:e.onClick}}}),define("popcorn.bookmark",["popcorn","player.playereval","promise!configuration","popcorn.base","popcorn.sharing"],function(e,R,t){"use strict";var V=window.document,j=t.player&&!0===t.player.sharing;e.basePlugin("bookmark",function(i,t){var r,n,e,a,o,s,l,c,d,u,p,h,f,m,v,g,y,b,w,E,k,x=new R.TemplateEvaluator(this,i),C={bookmark:{drawFn:function(){var e,t=window.getComputedStyle(n);(o=V.createElement("canvas")).width=n.offsetWidth||300,o.height=80,n.appendChild(o),(e=o.getContext("2d")).fillStyle=t.getPropertyValue("background-color"),e.moveTo(0,0),e.lineTo(0,o.height),e.lineTo(o.width/2,0),e.lineTo(o.width,o.height),e.lineTo(o.width,0),e.fill()},className:"popcorn-bookmark-bookmark"},title:{className:"popcorn-bookmark-title"},invisible:{className:"popcorn-bookmark-invisible"},minimal:{className:"popcorn-bookmark-minimal"}};function _(){var e,t,n,i;if(s){for(g=v=null,e=(n=(i=r.data.trackEvents.byStart).indexOf(s))-1;0<e;e--)if((t=i[e])._natives&&"bookmark"===t._natives.type){g=t;break}for(y.style.display=g?"":"none",e=n+1;e<i.length;e++)if((t=i[e])._natives&&"bookmark"===t._natives.type){v=t;break}b.style.display=v?"":"none"}}functionmark"===e._natives.type&&_()}function S(e){e._id!==E&&e._natives&&"bookmark"===e._natives.type&&_()}function A(e){e._id!==E&&e._natives&&"bookmark"===e._natives.type&&_()}function P(){return"Check out "+i.text+" in this video"}function I(){r.pause(),r.shareTwitter(i.url,P())}function L(){r.pause(),r.shareFacebook(i.url,P())}function D(){r.pause(),r.shareGoogle(i.url,P())}function O(){j&&i.url?(l||((c=V.createElement("span")).innerHTML="Share this",(l=V.createElement("div")).className="popcorn-bookmark-share",(d=V.createElement("a")).className="popcorn-bookmark-share-facebook",d.appendChild(V.createTextNode("Facebook")),d.onclick=L,(u=V.createElement("a")).className="popcorn-bookmark-share-twitter",u.appendChild(V.createTextNode("Twitter")),u.onclick=I,(p=V.createElement("a")).className="popcorn-bookmark-share-google",p.appendChild(V.createTextNode("Google Plus")),p.onclick=D,(h=V.createElement("span")).className="popcorn-bookmark-share-link",h.innerHTML="Link",h.addEventListener("click",function(){r.pause(),l.className.split(" ").inded"):t.removeClass(l,"expanded")},!1),(f=V.createElement("div")).className="popcorn-bookmark-share-section",(m=V.createElement("input")).className="popcorn-bookmark-share-text",m.onclick=function(){this.focus(),this.select()},l.appendChild(c),l.appendChild(d),l.appendChild(u),l.appendChild(p),l.appendChild(h),f.appendChild(m),l.appendChild(f),l.appendChild(f),e.appendChild(l)),encodeURIComponent(i.url),m.setAttribute("value",i.url)):l&&(e.removeChild(l),u=d=m=l=null)}function M(){for(var e in C)e!==i.mode&&C[e].className?t.removeClass(n,C[e].className):(k=C[e].drawFn,C[e].className&&t.addClass(n,C[e].className));o&&o.parentNode&&o.parentNode.removeChild(o),k?k():o=null}function N(){var e,t=x.evaluate(i.text);if(a.innerHTML="",t)for(t=t.split("\n"),e=0;e<t.length;e++)e&&a.appendChild(V.createElement("br")),a.appendChild(V.createTextNode(t[e]))}return t.target=t.target||i.target,t.target?(r=this,n=t.makeContainer(),i.container=n,i.mode||(i.mode="bookmark"),e=V.createElement("div"),n.appendChild(e),a=V.createElement("div"),N(),x.watchTemplateVars(i.text,N),e.appendChild(a),(y=V.createElement("div")).className="popcorn-bookmark-previous",y.inistener("click",function(){g&&r.currentTime(g.start)},!1),e.appendChild(y),(b=V.createElement("div")).className="popcorn-bookmark-next",b.innerHTML="Next Chapter",b.addEventListener("click",function(){v&&r.currentTime(v.start)},!1),e.appendChild(b),n.style.cssText=i.style||"",t.animate(t.container),M(),O(),(w=V.createElement("div")).className="popcorn-bookmark-close",w.innerHTML="<span>x</span>",w.addEventListener("click",function(){t.removeClass(t.container,"active")},!1),e.appendChild(w),r.on("trackchange",T),r.on("trackaddedionVariableCi,fun.text,N()}),{start:function(){t.addClass(t.container,"active"),s||((s=r.getTrackEvent(E))?_():setTimeout(function(){s=r.getTrackEvent(E),_()},0))},_setup:function(e){E=e._id},end:function(){t.removeClass(t.container,"active")},_update:function(e,t){void 0!==t.text&&t.text!==i.text&&(i.text=t.text||"",x.watchTemplateVars(i.text,N),N()),t.hasOwnProperty("mode")&&t.mode!==i.mode&&(i.mode=t.mode,M()),(void 0!==t.pause&&i.pause!==t.pause||t.end!==i.end||t.start!==i.start)&&(i.pause=t.pause),t.url!==i.url&&(i.url=t.url,O()),void 0!==t.style&&(n.style.cssText=t.style),s=s||r.getTrackEvent(E),_(),i.annotationVariableConfig.update("bookmark",i)},_teardown:function(){r.on("trackchange",T),r.on("trackadded",A),r.on("trackremoved",S),i.annotationVariableConfig.remove(i.annotationId)}}):{_update:function(){}}})}),define("popcorn.profile.bookmark",["popcorn.bookmark"],function(){"use strict";return function(e){var a=e.rootUrl;return{id:"bookmark",icon:'<span class="interactivity-icon-annotation-chaptermarker"></span>',sortIndex:2,title:"a chapter marker","data-test-name":"editor-add-chapter-marker-button",editor:["popcorn.quickedit.bookmark"],zIndex:5,variables:{populateConfig:function(e,t){var n={},i={},e="Bookmark_"+e;return t.text&&(i.text=t.text),n[e]=i,n}},commit:!0,create:function(e,t,n){var i=t.get("track"),r=i&&i.get("video");r&&i&&(r=a+"/videos/"+r.get("id")+"/tracks/"+i.get("id"),n.setting(e,"bookmarkUrl",r+"/annotations/"+t.get("id")))}}}}),define("popcorn.contents",["require","jquery.noconflict","lodash.noconflict","utils","popcorn","player.playereval","utils.embed","logging"],function(e,N,R,V,t,j,H,q){"use strict";t.basePlugin("contents",function(c,r){var n,t,e,i,a,o,d,u=this,s={},p={},h=[],l=!1,f=!1,m=!0,v=!0,g=!0,y=u.options.hapyakPlayer.tracking,b=new j.TemplateEvaluator(this,c);function w(){c.title||""===c.title||(c.title="Chapters"),e=c.position||"top-left",i=c.expandedState||"collapsed",a=3<c.duration?c.duration:c.duration?3:10,q.info("TOC  setOptions",R.clone(c))}function E(){s[n]&&"function"==typeof s[n].update&&s[n].update()}function k(){g||(s[n]&&"function"==typeof s[n].reflow&&s[n].reflow(),m=!1)}function x(){s[n]&&"function"==typeof s[n].teardown&&(s[n].teardown(),m=v=g=!(l=!1))}function C(){r.removeClass(r.container,"visible"),r.removeClass(r.container,"expanded"),r.addClass(r.container,"collapsed"),f&&(q.info("TOC  hideContainer"),clearTimeout(t),s[n]&&"function"==typeof s[n].hide&&s[n].hide(),f=!1,T())}function _(){r.addClass(r.container,"visible"),r.addClass(r.container,"expanded"),r.removeClass(r.container,"collapsed"),m&&k(),f||(q.info("TOC - showContainer"),S(),s[n]&&"function"==typeof s[n].show&&s[n].show(),f=!0),T()}function T(){var e,t,n,i=u.getTrackEvent(c._id)||c;if(i.onResize)for(q.info("TOC - Resize edit controls"),e=r.toArray(i.onResize),t=0;t<e.length;t++)"function"==typeof(n=e[t])&&n();v=!1}function S(){clearTimeout(t),t=window.setTimeout(function(){r.hasClass(r.container,"editing")||C()},1e3*a)}function A(e,t){var n,i,r,a,o,s,l;if(e&&!t?t=e._id:e=e||u.getTrackEvent(t),e._natives&&"bookmark"===e._natives.type)if(e.container&&e.container.parentNode){if((l=p[t])?(o=l.li,e.text===l.text&&(e.text||e.start===l.trackEvent.st.end||(m=i=!0,0<=(r=h.indexOf(l))&&h.splice(r,1))):(o=N('<li tabindex="0" role="listitem" />'),a11yListener(o,function(){var e=Math.abs(l.start-u.currentTime());C(),u.paused()&&u.on("seeked",function e(){u.off("seeked",e),u.play()}),u.currentTime(l.start),c.annotationId?y.annotationActionById(c.annotationId,"contents","Click",{Target:l.trackEvent.annotationId,"Target Time":l.start,Text:l.trackEvent.text,Skipped:e}):q.warn("Failed to track TOC chapter click",c)}),s=N('<span class="popcorn-contents-label" />').prependTo(o),n=N('<time class="popcorn-contents-time" />').appendTo(o),p[t]=l={li:o,label:s,time:n,start:e.start,end:e.end},m=i=!0),l.trackEvent=e,l.start=e.start,l.end=e.end,l.text=e.text,l.text&&l.label&&l.label.text(b.evaluate(l.text)),[null,void 0,NaN].indexOf(l.start)&&l.time&&l.time.text((t=e.start,s=((t=Math.floor(t))-(t=t%60))/60,t<10&&(t="0"+(t=Math.max(0,t))),59<s?Math.floor(s/60)+":"+(s=(s%=60)<10?"0"+(s=Math.max(0,s)):s)+":"+t:(s=s<10?"0"+(s=Math.max(0,s)):s)+":"+t)),d&&i){for(r=h.length-1;0<=r&&!((a=h[r]).start<=l.start||a.end<l.end);r--);h.splice(Math.max(0,r+1),0,l),d.append(o)}}else I(e)}function P(e){A(null,e.id),m&&f&&k()}function I(e,t){(t=t||e._id)?e=e||u.getTrackEvent(t):(t=e._id,m=!0),e&&e._natives&&"bookmark"===e._natives.type&&(e=p[t])&&(e.li&&(e.li.remove(),m=!0),delete p[t],0<=(t=h.indexOf(e))&&h.splice(t,1),m&&f&&k())}function L(){for(vakEvents(),r=[],a=0;a<i.length;a++)(t=i[a])._natives&&"bookmark"===t._natives.type&&r.push(t);for(e=R.clone(p),p={},a=0;a<r.length;a++)n=(t=r[a])._id,e[n]&&(p[n]=e[n],delete e[n]),A(t,n),b.watchTemplateVars(t.text,function(){A(t,n)});for(n in e)e.hasOwnProperty(n)&&I(null,n);m=!0,q.info("TOC - updateContents")}function D(e){var t,n,i,r,a,o;if(void 0!==e){if("trackstart"===e.type&&"bookmark"===e._natives.type)r=e;else for(i=u.currentTime(),t=u.getTrackEvents(),o=V.binarySearchByKey(t,"start",i);0<=o;){if((n=t[o]).start<=i+.5&&"bookmark"===n._natives.type){r=n;break}o--}for(o=0;o<h.length;o++)a=h[o],r&&a.start===r.start?a.li.addClass("active"):a.li.removeClass("active")}}function O(){w(),function(){var e,t;if(n){if(n===c.mode)return;x()}for(e in n=c.mode||"legacy",q.info("TOC - setupMode: "+n),s)e!==n&&s[e].className?r.removeClass(r.container,s[e].className):(t=s[e].setup,s[e].className&&r.addClass(r.container,s[e].className));"function"==typeof t&&t(),l=!0}(),g=!1,r.animate(),(l&&Object.keys(p).length&&"expanded"===i?(f&&(m=!0),_):(f&&k(),T(),C))()}function M(t){t=t||"legacy";var e=H.getQueryParams(window.location.href);"off_video_chapters"===((e=e&&e.experience_data&&JSON.parse(e.experience_data))&&e.layout&&e.layout.type_name)?r.addClass(r.container,"hidden"):s&&s[t]?s&&s[t]&&(q.info("TOC - loadMode: "+t),O()):(q.info("TOC - lpcorn.contenon(e){c.tracking=y,s[t]=e(c,p,h,N(r.container),o,d,_,C),O()}))}return w(),r.makeContainer(),c.container=r.container,r.addClass(r.container,e),N(r.container).mouseover(function(){t&&f&&clearTimeout(t)}).mouseleave(function(){f&&S()}),o=N('<div class="popcorn-contents-inner" />').appendTo(r.container),d=N('<ul class="popcorn-contents-hidden" />').appendTo(o),L(),M(c.mode),u.on("trackchange",P),u.on("trackadded",A),u.on("trackremoved",I),u.on("trackstart",D),u.on("seeked",D0,f&&(q.info("TOC - Player was resized"),k())}),u.on("annotationsloaded",function e(){l&&Object.keys(p).length&&"expanded"===i&&_(),u.off("annotationsloachTemplateVars(c.title,function(e,t,n){c.title=n,E()}),c.title=b.evaluate(c.title),c.annotationVariableConfig.add("contents",c,function(e,t,n){var i=u.data.trackEvents.byStart;c.title=n.text,E(),R.forEach(p,function(e,t){I(null,t)}),i.forEach(function(e){e&&e._natives&&"bookmark"===e._natives.type&&A(e)}),k()}),{start:function(){r.addClass(r.container,"active"),"expanded"===i&&(f?S:_)()},_update:function(e,t){e.annotationId!==t.annotationId&&(e.annotationId=t.annotationId),e.mode!==t.mode&&(e.mode=t.mode,g=!0),e.title!==t.title&&(void 0===t.title?e.title="Chapters":e.title=t.title,c.annotationVariableConfig.update("contents",c),E()),e.position!==t.position&&(r.removeClass(e.container,e.position||"top-left"),r.addClass(e.container,t.position),e.position=t.position),e.expandedState!==t.expandedState&&(e.expandedState=t.expandedState),e.duration!==t.duration&&(e.duration=t.duration),e.onResize!==t.onResize&&(e.onResize=t.onResize,v=!0),L(),g?M(e.mode):(w(),v&&T())},end:function(){clearTimeout(t),r.removeClass(r.container,"active")},_teardown:function(){for(var e in clearTimeout(t),x(),u.off("trackchange",P),u.off("trackadded",A),u.off("trackremoved",I),u.off("trackstart",D),u.off("seeked",D),p)p.hasOwnProperty(e)&&I(null,e);c.annotationVariableConfig.remove(c.annotationId)}}})}),define("popcorn.contents.mode.legacy",["jquery.noconflict","lodash.noconflict","logging"],function(k,x,C){"use strict";return function(l,t,c,d,u,e,n,i){var p,h,f,m,v,r,a=[k('<li class="no-hover popcorn-contents-help">Add items in your Table of Contents by adding chapters <span class="ss-icon" style="color: #9CF">&#x1F516;</span> to the video.</li>'),k('<li class="no-hover popcorn-contents-help">Click the <span class="ss-icon" style="color: #9CF">&#x1F516;</span> chapter icon on the tool bar as you watch the video.</li>')],g={total:1},o=l.tracking,y=1;function b(){var e=p&&p.text(),t=l.title;e!==t&&(C.info("TOC: LEGACY (annotationId:"+l.annotationId+")  updateTitle: "+t),p=p||k('<h3 class="popcorn-contents-title" />').click(function(){o.annotationActionById(l.annotationId,"contents","Expand",{Target:l.annotationId}),n()}).prependTo(u),t&&""!==t?p.removeClass("show-icon"):p.addClass("show-icon"),k(p).text(t))}function s(e){e<1?e=1:e>g.total&&(e=g.total),y!==e&&(y=e,E())}function w(){if(m&&v&&e){for(g.total=1;m.children().length;)e.append(m.children().last());for(;v.children().length;)e.append(v.children().last());x.each(a,function(e){Object.keys(t).length?e.parentNode&&e.remove():m.append(e)})}}function E(){var e,t,n,i,r,a,o=1,s=!1;if(m&&v){for(w(),b(),i=u.height(),i=(i-=p.outerHeight(!0))-+m.css("marginTop").replace("px",""),a=m,C.info("TOC: LEGACY (annotationId:"+l.annotationId+") - Available height: "+(r=i)),e=0;e<c.length;e++)(t=c[e]).text||t.li.find("span:first").text("Chapter "+(c.indexOf(t)+1)),n=t.li.outerHeight(!0),a===m&&r-n<0&&(a=v,r=i),0<=r-n?(o!==y||s||a.append(t.li),r-=n,"array"!=typeof g[o]&&(g[o]=[]),g[o].push(t)):a===v&&(o<y?(g.total=o+=1,s=!1,a=m,r=i,--e):(g.total+=1,s=!0));a===m?(C.info("TOC: LEGACY (annotationId:"+l.annotationId+") - Show one column",m.children().length,v.children().length),m.css("width","100%"),m.css("paddingRight",0),v.css("display","none")):(C.info("TOC: LEGACY (annotationId:"+l.annotationId+") - Show two columns",m.children().length,v.children().length),m.removeAttr("style"),v.removeAttr("style")),d.hasClass("expanded")&&1<g.total?(1===y?f.addClass("inactive"):f.removeClass("inactive"),y===g.total?h.addClass("inactive"):h.removeClass("inactive"),f.removeClass("hidden"),h.removeClass("hidden")):(f.addClass("hidden"),h.addClass("hidden"))}}return{className:"hapyak-contents-legacy",setup:function(){C.info("TOC: LEGACY (annotationId:"+l.annotationId+")  setup"),h=k('<a href="#next-page" class="popcorn-contents-next">Next</a>').click(function(e){return l.annotationId?o.annotationActionById(l.annotationId,"contents","Next"):C.warn("Failed to track TOC next page click",l),s(y+1),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}).appendTo(u),f=k('<a href="#previous-page" class="popcorn-contents-previous">Previous</a>').click(function(e){return l.annotationId?o.annotationActionById(l.annotationId,"contents","Prev"):C.warn("Failed to track TOC next page click",l),s(y-1),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}).appendTo(u),m=k("<ul />").appendTo(u),v=k("<ul />").appendTo(u),r=k('<div class="popcorn-contents-close"><span>x</span></div>').click(function(){o.annotationActionById(l.annotationId,"contents","Collapse",{Target:l.annotationId}),i()}).appendTo(u),b()},update:function(){C.info("TOC: LEGACY (annotationId:"+l.annotationId+")  update"),b()},reflow:function(){C.info("TOC: LEGACY (annotationId:"+l.annotationId+")  reflow"),E()},teardown:function(){(p||h||f||m||v||r)&&(C.info("TOC: LEGACY (annotationId:"+l.annotationId+")  teardown"),p&&p.remove(),h&&h.remove(),f&&f.remove(),m&&(w(),m.re(),p=h=f=m=v=r=null)}}}}),define("popcorn.contents.mode.column1",["jquery.noconflict","lodash.noconflict","logging"],function(y,e,b){"use strict";return function(i,e,r,a,o,t,n,s){var l,c,d,u,p,h,f=i.tracking;function m(){return r&&r.length}function v(){if(c&&t)for(;c.children().length;)t.append(c.children().last())}function g(){var e=l&&l.text(),t=i.title;e!==t&&(b.info("TOC: COLUMN1 (annotationId:"+i.annotationId+")  updateTitle: "+t),l||(l=y('<h3 class="popcorn-contents-title" tabindex="0" aria-label="Chapter Menu" role="navigation" />'),a11yListener(l,function(){a.hasClass("expanded")||(f.annotationActionById(i.annotationId,"contents","Expand",{Target:i.annotationId}),n())}).prependTo(a)),t&&""!==t?l.removeClass("show-icon"):l.addClass("show-icon"),l.text(t))}return{className:"hapyak-contents-column1",setup:function(){b.info("TOC: COLUMN1 (annotationId:"+i.annotationId+")  setup"),c=y('<ul class="popcorn-contents-list" />').appendTo(o),d=y('<div class="popcorn-contents-help"><p>Add items in your Table of Contents by adding chapters <span class="ss-icon" style="color: #9CF">&#x1F516;</span> to the video.</p><p>Click the <span class="ss-icon" style="color: #9CF">&#x1F516;</span> chapter icon on the tool bar as you watch the video.</p></div>');u=y('<div class="popcorn-contents-more" tabindex="0" aria-label="Show More" role="button"><div class="arrow-wide-down" /></div>'),a11yListener(u,function(){m()&&c.animate({scrollTop:c.scrollTop()+h},400)}).appendTo(a),p=y('<dutton">&times;</div>'),a11yListener(p,function(){f.annotationActionById(i.annotationId,"contents","Collapse",{Target:i.annotationId}),s()}).appendTo(a),g()},update:function(){b.info("TOC: COLUMN1 (annotationId:"+i.annotationId+")  update"),g()},reflow:function(){var e,t,n=0;if(g(),c)if(v(),b.info("TOC: COLUMN1 (annotationId:"+i.annotationId+") - reflow"),m()){for(d&&d.remove(),e=0;e<r.length;e++)(t=r[e]).text||t.li.find("span:first").text("Chapter "+(r.indexOf(t)+1)),c.append(t.li),n+=t.li.outerHeight(!0);(h=o.height())<n?a.addClass("show-more"):a.removeClass("show-more")}else d.prependTo(o)},teardown:function(){(l||c||d||u||p)&&(b.info("TOC: COLUMN1 (annotationId:"+i.annotationId+")  teardown"),l&&l.remove(),c&&(v(),c.remove()),d&&d.remove(),u&&u.remove(),p&&p.remove(),l=c=d=u=p=null)}}}}),define("popcorn.profile.contents",["popcorn.contents","popcorn.contents.mode.legacy","popcorn.contents.mode.column1"],function(){"use strict";return{id:"contents",icon:'<span class="interactivity-icon-annotation-chaptersmenu"></span>',sortIndex:1,title:"a chapter menu","data-test-name":"editor-add-chapter-menu-button",editor:["popcorn.quickedit.contents"],zIndex:100,maxAllowed:1,variables:{populateConfig:function(e,t){var n={},i={},e="Contents_"+e;return t.title&&(i.text=t.title),n[e]=i,n}},target:"contentsContainer",defaults:{start:0,end:1/0,columns:2,duration:10},filter:function(e){e.end=e.end||1/0,e.duration||(am0;t<n.length&&!y;++t)y=r[n[t]+"RequestAnimationFrame"],b=r[n[t]+"CancelRequestAnimationFrame"];y&&b||(y=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-a)),i=r.setTimeout(function(){e(t+n)},n);return a=t+n,i},b=function(e){clearTimeout(e)}),e.basePlugin("drawing",function(n,i){var r,e,t,h,f,a,o,s,l,c=!1,d=0;function u(e,t){var n,i,r,a,o,s=h.width,l=h.height,c=e.width||h.width,d=e.height||h.height,u=1,p=e.paths;for(f.clearRect(0,0,h.width,h.height),p&&p.length&&(a=p[p.length-1].points)&&a.length&&(u=a[a.length-1].t||1),n=0;n<p.length;n++)if(1<(a=(r=p[n]).points).length){if((o=a[0]).t/u>t)break;for(f.strokeStyle=r.color||e.color||"white",f.lineWidth=Math.max(1,(r.lineWidth||e.stroke||5)*s/c),f.dowOffsetX,f.shadowOffsetY=r.shadowOffsetY,f.shadowBlur=r.shadowBlur,f.shadowColor=r.shadowColor,f.beginPath(),f.moveTo(o.x*s/c,o.y*l/d),i=1;i<a.length&&!((o=a[i]).t/u>t);i++)f.lineTo(o.x*s/c,o.y*l/d);f.stroke()}}function p(){c=!0}function m(){c=!1}function v(){var e;d=d||(new Date).getTime(),e=(new Date).getTime(),n.pause||l||u(n.drawing,Math.min(1,(e-d)/1e3/a)),s=y(v)}function g(){h.width=e.videoWidth||e.width||e.offsetWidth,h.height=e.videoHeight||e.height||e.offsetHeight,u(n.drawing,1),r.off("canplay",g)}return i.target=i.target||n.target,i.target?(h=document.createElement("canvas"))&&(f=h.getContext("2d"))?(e=(r=this).media,a=Math.min((n.end-n.start)/2,.5),t=i.makeContainer(),(n.container=t).style.cssText="position: absolute; width: 100%; height: 100%;",h.style.cssText="width: 100%; height: 100%;",n.drawing||(n.drawing={paths:[]}),g(),t.appendChild(h),r.on("canplay",g),r.on("resized",g),{start:function(e,t){o=!0,f.clearRect(0,0,h.width,h.height),i.addClass(i.container,"active"),(t.pause||c||r.paused())&&(l=!0,u(t.drawing,1)),d=null,s=y(v)},end:function(){l=o=!1,i.removeClass(i.container,"active"),b(s)},_update:function(e,t){a=Math.min((n.end-n.start)/2,.5),void 0!==t.drt.hasOwnProperty("pause")&&t.pause||e.pause)&&u(n.drawing,1),(void 0!==t.pause&&n.pause!==t.pausend||t.start!==n.start)&&(n.pause=t.pause)},_teardown:function(){r.off("seeking",p),r.off("seeked",m),r.off("canplay",g),r.off("resized",g)}}):void 0:{_update:function(){}}})}(this,this.Popcorn),define("popcorn.drawing",["popcorn.base"],function(){}),define("popcorn.profile.drawing",["popcorn","popcorn.drawing"],function(n){"use strict";return{id:"drawing",icon:'<span class="interactivity-icon-annotation-drawing"></span>',sortIndex:8,title:"a drawing",editor:["popcorn.quickedit.drawing"],"data-test-name":"editor-add-drawing-button",zIndex:3,filter:function(e){if(Array.isArray(e.drawing))e.drawing=(t=e.drawing,r={paths:[],width:640,height:390},a=0,n.forEach(t,function(e){var t,n,i=0;if(e.path&&e.path.length){n=e.path[0];do{for(t={color:e.stroke,stroke:e["stroke-width"],points:[]};"M"!==n[0]&&"L"!==n[0]||(t.points.push({x:n[1],y:n[2],t:a}),a++),(n=e.path[++i])&&"L"===n[0];);}while(1<t.points.length&&r.paths.push(t),i<e.path.length)}}),r);else if(!e.drawing)return!1;var t,r,a}}}),define("popcorn.hotlink",["popcorn","player.playereval","popcorn.base","popcorn.gates"],function(e,t){"use strict";e.basePlugin("hotlink",function(i,n){var r,a,e=document.createElement("img"),o=new t.TemplateEvaluator(this,i);function s(){r.style.width=i.width=i.width||"40%",r.style.height=i.height=i.height||"40%",r.style.top=i.top=i.top||"10%",r.style.left=i.left=i.left||"10%"}function l(){var e,t=o.evaluate(i.text);if(t){for(a?a.innerHTML="":(a=document.createElement("div"),r.appendChild(a)),t=String(t).split(/[\n\r]/),e=0;e<t.length;e++)e&&a.appendChild(document.createElement("br")),t[e]&&a.appendChild(document.createTextNode(t[e]));a.className="popcorn-hotlink-text",a.setAttribute("tabindex","0"),n.addClass(a,i.textPosition),a.style.color=i.color}else a&&(r.removeChild(a),a=null)}return r=n.makeContainer(),i.container=r,s(),r.style.opacity=i.opacity||"",r.style.backgroundColor=i.backgroundColor||"",r.style.borderColor=i.borderColor||"",r.style.borderRadius=i.borderRadius||"",i.borderWidth&&0<i.borderWidth.replace("px","")&&(r.style.borderStyle="solid",r.style.borderWidth=i.borderWidth),e.style.width="100%",e.style.height="100%",e.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",r.appendt,l),i.annotationVariableConfig.add("hotlink",i,function(e,t,n){n.link&&"string"==typeof n.link&&i.onClick&&(i.onClick.gotoLink=n.link),n.text&&(i.text=n.text),l()}),{start:function(){n.addClass(r,"active")},end:function(){n.removeClass(r,"active")},_update:function(e,t){var n=!1;o.watchTemplateVars(i.text,l),t.hasOwnProperty("opacity")&&t.opacity!==i.opacity&&(i.opacity=t.opacity,r.style.opacity=i.opacity||""),t.hasOwnProperty("text")&&t.text!==i.text&&(i.text||(n=!0),i.text=t.text,n=!0),t.hasOwnProperty("textPosition")&&t.textPosition!==i.textPosition&&(i.textPosition=t.textPosition,n=!0),t.hasOwnProperty("color")&&t.color!==i.color&&(i.color=t.color,n=!0),n&&l(),t.hasOwnProperty("backgroundColor")&&t.backgroundColor!==i.backgroundColor&&(i.backgroundColor=t.backgroundColor,r.style.backgroundColor=i.backgroundColor||""),t.hasOwnProperty("borderColor")&&t.borderColor!==i.borderColor&&(i.borderColor=t.borderColor,r.style.borderColor=i.borderColor||""),t.hasOwnProperty("borderRadius")&&t.borderRadius!==i.borderRadius&&(i.borderRadius=t.borderRadius,r.style.borderRadius=i.borderRadius||""),t.hasOwnProperty("borderWidth")&&t.borderWidth!==i.borderWidth&&(i.borderWidth=t.borderWidth,i.borderWidth&&0<i.borderWidth.replace("px","")&&(r.style.borderStyle="solid",r.style.borderWidth=i.borderWidth)),t.hasOwnProperty("top")&&t.top!==i.top&&(i.top=t.top),t.hasOwnProperty("left")&&t.left!==i.left&&(i.left=t.left),t.hasOwnPhasOwnProperty("width")&&t.width!==i.width&&(i.width=t.width),t.hasOwnProperty("pause")&&t.pause!==i.pause&&(i.pause=t.pause),s(),i.annotationVariableConfig.update("hotlink",i)},_teardown:function(){i.annotationVariableConfig.remove(i.annotationid)}}})}),define("popcorn.profile.hotlink",["utils.parsecolor","player.normalizeonclick","player.normalizecolor","popcorn.hotlink"],function(n,e,t){"use strict";return{id:"hotlink",icon:'<span class="interactivity-icon-annotation-hotspot"></span>',sortIndex:5,title:"transparent overlay link",editor:["popcorn.quickedit.hotlink"],"data-test-name":"editor-add-hotlink-button",variables:{populateConfig:function(e,t){var n={},i={},e="Hotlink_"+e;return t.text&&(i.text=t.text),t.onClick&&t.onClick.gotoLink&&(i.link=t.onClick.gotoLink),n[e]=i,n}},zIndex:6,normalize:{"onClick.gotoLink":e.gotoLink,"onClick.gotoTrack":e.gotoTrack,"onClick.addClasses":e.addClasses,"onClick.setVariables":e.setVariables,onClick:e.onClick,textPosition:function(e){return e?("top"===e||"middle"===e||"bottom"===e)&&e:"middle"},backgroundColor:t,"background-color":t,color:t},filter:function(e){var t;return!e.backgroundColor||isNaN(e.opacity)||1<=e.opacity||(t=n(e.backgroundColor))&&void 0===t.a&&(e.backgroundColor="rgba("+t.r+", "+t.g+", "+t.b+", "+e.opacity+")",delete e.opacity),e}}}),define("popcorn.iframe",["popcorn","player.playereval","logging","lodash.noconflict","configAPI","utils.embed","popcorn.base","popcorn.gates"],function(x,C,_,T,S,A){"use strict";var P=/^https?:\/\/(?:[a-z]+\.)*brightcove\.com|\//i,I=/(?:\?|&)([^&=]*)=?([^&]*)/g,L=/(\d+(?:\.\d*)?)(px|%)?/i;x.basePlugin("iframe",function(f,m){var o,e,s,l=!1,v=this,n=!1,r=v.options.hapyakPlayer.tracking,g=0,c=new C.TemplateEvaluator(this,f);function i(){function e(t){function e(e){return t&&-1<t.indexOf(e)}var n,i=A.dotget(S,"hosting.widgetHost");return t&&i&&(e("hapyak_dev_uploads")?(i=i.replace("hapyak-hosted","dev.hapyak-hosted"),n="hapyak_dev_uploads"):e("hapyak_uploads")&&(n="hapyak_uploads"),t=t.replace(n+".s3.amazonaws.com",i)),t}var t,n,i,r,a=A.dotget(v,"options.hapyakPlayer.editMode");if("function"!=typeof a||a()||(f.src=e(f.src)),f.src){if(f.src=f.src+(((a=f.src)&&-1<a.indexOf("?")?"&luate(f.src,!0),P.test(t)){for(I.test("");null!==(r=I.exec(t));)if(n=!0,"v"===r[1]){i=!0;break}i||(a=hapyak&&hapyak.version||1,t+=n?"&v="+a:"?v="+a)}o.src!==t&&(window.chrome?(clearTimeout(s),s=setTimeout(function(){o&&(o.src=decodeURIComponent(t))},20)):o.src=t)}else o.src="about:blank";l=!0}function a(){l=!1,f.defer&&!n?o.src="about:blank":i()}function t(e){var t,n,i;if(e.source===o.contentWindow){try{t=JSON.parse(e.data)}catch(e){return}t&&"hapyak"===t.context&&("getPlaylist"===t.event&&(t.event="getPlaylistExternal",parent.postMessage(JSON.stringify(t),"*")),"setData"===t.event?t.key&&"string"==typeof t.key&&("track"!==t.mode&&(n=f.dataId||f.id),v.setData(n,t.key,t.value,t.temp)):"clearData"===t.event?t.key&&"string"==typeof t.key&&v.clearData(t.key):"gotoTrack"===t.event?v.options.loadTrackTime&&v.options.loadTrackTime(t.track,t.time):("addClasses"===t.event&&t.classes&&(t.selector?(i=document.querySelecto.call(i,function(e){m.addClass(e,t.classes)})):(i=m.container,m.addClass(i,t.classes))),"removeClasses"===t.event&&t.classes&&(t.selector?(i=document.querySelectorAll(t.selector),Array.prototype.forEach.call(i,function(e){m.removeClass(e,t.classes)})):(i=m.container,m.removeClass(i,t.classes))),"play"===t.event?v.play():"pause"===t.event?v.pause():"mute"===t.event?v.mute():"unmute"===t.event?v.unmute():"contentTrackMsg"===t.event?("change"===t.action&&,"change"===t.action&&t.src&&("object"==typeof t.src&&v.options.hapyakPlayer.contentTracks.add(t.src),"string"==typeof t.src&&irequire([t.src],function(){Array.prototype.forEach.call(arguments,function(e){v.options.hapyakPlayer.contentTracks.add(e)})}))):"auth"===t.event?hapyak.auth({partner:t.auth}):"volume"===t.event?v.volume(t.volume):("trackAction"===t.event&&t.action&&(t.data=t.data||{},r.registerPartnerProperties(t.data),r.annotationActionById(f.annotationId,"iframe",t.action,x.extend({ExternalContext:o.src},t.data))),"trackWidgetAction"===t.event&&t.action&&(t.data=t.data||{},r.annotationActionById(f.annotationId,"iframe",t.action,x.extend({ExternalContext:o.src}),t.data)))))}else{try{t=JSON.parse(e.data)}catch(e){return}"gotPlaylistExternal"===t.event&&u("gotPlaylist",t.data)}}function y(){var e,t,n,i,r,a;if(o&&o.src&&"about:blank"!==o.src&&o.contentWindow){for(t={context:"hapyak",event:"data",values:{}},i=f.dataId||f.id,e=v.dataKeys(i),r=0;r<e.length;r++)a=e[r],t.values[a]=v.getData(i,a);try{n=JSON.stringify(t)}catch(e){return}o.contentWindow.postMessage(n,"*"),g=0}}function d(){var e,t;if(f.variables)for(e in t=f.dataId||f.id,f.variables)f.variables.haa(t,e,f.variables[e],!0)}function u(e,t){if(o&&o.src&&"abo{context:"hapyak",event:e},t);try{o.contentWindow.postMessage(JSON.stringify(e),"*")}catch(e){}}}function p(){u("play")}function h(){u("pause")}function b(){u("timeupdate",{currentTime:v.currentTime()})}function w(e){u("playerHover",{isHovering:e})}function E(e){e&&u("authchange",{auth:e.partner})}function k(){u("loadedmetadata",{duration:v.duration(),currentTime:v.currentTime(),paused:v.paused(),volume:v.volume(),width:v.media.width,height:v.media.height})}return f.container=m.makeContainer(),e=document.createElement("div"),f.container.appendChild(e),(o=document.createElement("iframe")).setAttribute("allowtransparency",!0),e.appendChild(o),o.addEventListener("load",function(){var e=A.dotget(v,"options.hapyakPlayer.getData"),t=v.getData(f.dataId,"projectAnnotations");f.projectTrackId=e&&e("trackId"),f.annotationTrackId=t&&t[f.annotationId],f.projectConfig=e&&e("projectConfig"),f.groupConfig=S&&S.player,f.configAPI=S,f.projectId=e&&e("projectId"),u("annotationload",{data:(t=f,(t=T.clone(t=t||{})).container={},t.target={},t),volume:v.volume(),editMode:v.options.hapyakPlayer.editMode()}),n&&u("iframeshow",{editMode:v.options.hapyakPlayer.editMode()}),E(hapyak.auth()),(v.duration()&&v.media&&v.media.isHapyakHosted&&v.media.width||v.media&&v.duration()&&!v.media.isHapyakH("loadedmetadata",k),v..on("resized",function(){u("resized",{width:v.media.width,height:v.media.height})}),v.on("play",p),v.on("pause",h),v.on("volumechange",function(){u("volumechange",{volume:v.volume()})}),v.on("editModeChange",function(e){u("editModeChange",{mode:e})}),d(),v.watchData(f.dataId||f.id,"",function(){function e(e,t){(e=t&&e&&L.exec(e))&&(m.container.style[t]=e[1]+(e[2]||"px"))}var t,n,i,r,a,o,s=f.dataId||f.id,l=v.getData(s,"hapyakIframeWidth"),c=v.getData(s,"hapyakIframeHeight"),d=v.getData(s,"hapyakIframeLeft"),u=v.getData(s,"hapyakIframeTop"),p=v.getData(s,"hapyakIframeEditButton"),h={hyEditor:{class:"editor",value:v.getData(s,"hyQuickEditEditor")},hyNudge:{class:"nudge",value:v.getData(s,"hyQuickEditNudge")},hyMore:{class:"more",value:v.getData(s,"hyQuickEditMore")},hyPreview:{class:"preview",value:v.getData(s,"hyQuickEditPreview")},hyDone:{class:"done",value:v.getData(s,"hyQuickEditDone")},hyDelete:{class:"delete",value:v.getData(s,"hyQuickEditDelete")},hyDuration:{class:"duration",value:v.getData(s,"hyQuickEditDuration")},hyStartTime:{class:"start",value:v.getData(s,"hyQuickEditStartTime")},hyPause:{class:"pause",value:v.getData(s,"hyQuickEditPause")},hyDisplayRule:{class:"precondition",value:v.getData(s,"hyQuickEditDisplayRule")},hyAddClass:{class:"class",value:v.getData(s,"hyQuickEditAddClass")},hyGate:{class:"gate",value:v.getData(s,"hyQuickEditGate")},hyScale:{class:"scale",value:v.getData(s,"hyQuickEditScale")}};if(m.container&&(e(l,"width"),e(c,"height"),e(d,"left"),e(u,"top"),n=A.dotget(m,"container.nextSibling"),"boolean"==typeof p&&(n&&n.classList.contains("popcorn-quickedit-edit")&&A.dotget(n,"dataset.popcornId")===A.dotget(m,"container.dataset.popcornId")?n.style.display=p?"block":"none":(s=document.getElementsByClassName("popcorn-quickedit-edit"),t=A.dotget(m,"container.dataset.popcornId"),Array.prototype.some.call(s,function(e){if(e.dataset.popcornId===t)return e.style.display=p?"block":"none",!0}))),n))for(i in h)o=(a=n.getElementsByClassName("hapyak-quickedit-"+(r=h[i]).class))&&a[0]||[],a.length&&(!1===r.value&&-1===o.className.indexOf("disabled")?o.className+=" disabled":!0===r.value&&(o.className=o.className.replace(/disabled/g,"")));g=g||setTimeout(y,0)}),f.width?isNaN(f.width)||(o.width=f.width):o.width="100%",f.height?isNaN(f.height)||(o.height=f.height):o.height="100%",f.id&&"string"==typeof f.id&&(o.id=f.id),a(),c.watchTemplateVars(f.src,i),m.animate("width",function(e){isNaN(e)?o.style.width=e:o.width=e}),m.animate("height",function(e){isNaN(e)?o.style.height=e:o.height=e}),m.animate(m.container),m.animate("scroll",function(e){var t;if(!m.popcorn.paused())try{t=o.contentDocument.documentElement.scrollHeight||o.contentDocument.body.scrollHeight,o.contentWindow.scrollTo(0,e*t)}catch(e){}}),window.addEventListener("message",t,!1),f.noscale&&m.addClass(m.container,"noscale"),{start:function(){n||u("iframeshow",{editMode:v.options.hapyakPlayer.editMode()}),n=!0,m.addClass(m.container,"active"),l||i()},_update:function(e,t){c.watchTemplateVars(f.src,i),t.hasOwnProperty("variables")&&(e.variables=t.variables,d()),t.hasOwnProperty("defer")&&(f.defer=t.defer),(t.hasOwnProperty("src")&&f.src!==t.src||t.hasOwnProperty("html")&&f.html!==t.html)&&(f.src=t.src,f.html=t.html,a()),(t.hasOwnProperty("pause")&&f.pause!==t.pause||t.end!==f.end||t.start!==f.start)&&(f.pause=t.pause),e.noscale!==t.noscale&&(t.noscale?_.debug("[popcorn.iframe] Move to unscaled container"):_.debug("[popcorn.iframe] Move to scaled container"))},end:function(){n&&u("iframehide"),n=!1,m.removeClass(m.container,"active")},_teardown:function(){o=null,v.off("authchange",E),v.off("loadedmetadata",k),v.off("timeupdate",b),v.off("playerHover",w),v.off("play",p),v.off("pause",h),window.removeEventListener("message",t,!1)}}},{about:{name:"Popcorn iframe Plugin",version:"0.1",author:"Brian Chirls, @bchirls",website:"http://github.com/brianchirls"}})}),define("popcorn.profile.iframe",["popcorn.iframe"],function(){"use strict";return{id:"iframe",icon:'<span class="interactivity-icon-annotation-widget"></span>',sortIndex:6,title:"from the widget library","data-test-name":"editor-widget-library-button",editor:["popcorn.quickedit.iframe"],zIndex:1,defaults:{top:"20%",left:"20%",width:"60%",height:"60%"}}}),define("popcorn.image",["promise!configuration","utils","popcorn","player.playereval","popcorn.base","popcorn.gates"],function(u,p,e,h,t){"use str&&u.group.id,s=new h.TemplateEvaluator(this,i);function l(){t.style.width?r.style.width="100%":r.style.width="",t.style.height?r.style.height="100%":r.style.height=""}function c(e,t,n){r.src=n}function d(e){return decodeURIComponent(s.evaluate(e))}if(e.target=e.target||i.target,e.target)return this.media,t=e.makeContainer(),i.container=t,r=f.createElement("img"),n=i.creationEnvironment||"",a=thioudfrontUrlForS3Resource(i.url,=d(o),r.removeAttribute("width"),r.removeAttribute("height"),r.addEventListener("load",function(){"function"==typeof i.onLoad&&i.onLoad(i)},!0),r.addEventListener("error",function(){r.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},!1),e.animate(),t.appendChild(r),i.annotationVariableConfig.add("image",i,function(e,t,n){n.link&&"string"==typeof n.link&&i.onClick&&(i.onClick.gotoLink=n.link),n.src&&(i.url=n.src,r.src=d(i.url))}),{start:function(){e.options.url&&(e.addClass(e.container,"active"),l())},_update:function(e,t){t.hasOwnProperty("url")&&t.url!==i.url&&(s.watchTemplateVars(t.url,c),r.src=d(t.url)),(t.hasOwnProperty("pause")&&i.pause!==t.pause||t.end!==i.end||t.start!==i.start)&&(i.pause=t.pause),l(),i.annotationVariableConfig.update("image",i)},end:function(){e.removeClass(e.container,"active")},_teardown:function(){i.annotationVariableConfig.remove(i.annotationId)}}},{about:{name:"Popcorn Image Plugin",version:"0.1",author:"Hapyak",website:"http://www.hapyak.com"},options:{start:{elem:"input",type:"number",label:"Start",units:"seconds"},end:{elem:"input",type:"number",label:"End",units:"seconds"},url:{elem:"input",type:"url",label:"Source URL"},width:{elem:"input",type:"number",label:"Width",default:100,units:"%",hidden:!0},height:{elem:"input",type:"number",label:"Height",default:100,units:"%",hidden:!0},top:{elem:"input",type:"number",label:"Top",default:0,units:"%",hidden:!0},left:{elem:"input",type:"number",label:"Left",default:0,units:"%",hidden:!0},link:{elem:"input",type:"url",label:"Link URL"},linkTarget:{elem:"input",type:"text",label:"Link Target"}}})}),define("popcorn.profile.image",["player.normalizeonclick","player.normalizetransition","popcorn.image"],function(t,n){"use strict";return function(e){var i=e.uploadAuth;return{id:"image",icon:'<span class="interactivity-icon-annotation-image"></span>',sortIndex:7,title:"image overlay link","data-test-name":"editor-image-overlay-button",editor:["popcorn.quickedit.image"],zIndex:3,variables:{populateConfig:function(e,t){var n={},i={},e="Image_"+e;return t.url&&(i.src=t.url),t.onClick&&t.onClictoLink),n[e]=i,n}},commit:!0,normalize:{"onClick.gotoLink":t.gotoLink,"onClick.gotoTrack":t.gotoTrack,"onClick.addClasses":t.addClasses,"onClick.setVariables":t.setVariables,onClick:t.onClick,transitionClass:n},filter:function(e){if(!e.url)return!1},create:function(e,t,n){t=t.get("id");i&&n.setting(e,"uploadUrl","/api/comments/"+t+"/uploads?"+i)}}}}),define("popcorn.ontime",["popcorn","popcorn.base","lodash.noconflict","utils.embed","player.playereval","playlist.addon"],function(e,t,g,y,b,w,n){"use strict";e.basePlugin("ontime",function(e,p){var h=p.makeContainer(),f=this.options.loadTrackTime,m=e.rotateToAnnotation,v=this;return e.container=h,{start:function(n){var e,t,i,r=p.options,a=r.gotoTrack,o=r.branchTimeInput,s=r.goToVideo,l=(r.onTime,r.addonTypeId),c=r.addonCommand,d=r.addonCommandData,u=0;!p.popcorn.options.hapyakPlayer.editMode()&&a&&(e=a.substr(1),(i=a.match(/id\=([0-9a-fA-F]+)/))&&(t=i[1])),p.addClass(h,"active"),!p.popcorn.options.hapyakPlayer.editMode()&&s&&((o||a)&&(u=o||a.substr(1)),w.goTo(s,!0,u)),a&&(t&&(e=null),s&&"-"!==s||f(null,e,t)),m&&(i=v.video.parentNode.getElementsByTagName("VIDEO")[0],o=hapyak.Css360.getSphereByContainerId(y.dotget(i,"dataset.videoId")),s=(a=null===(u="recenter"===m?null:v.options.hapyakPlayer.annotations.get(m))?"[0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1]":y.dotget(u,"properties.transform"))&&JSON.parse(a),o&&"function"==typeof o.setRotation&&s&&o.setRotation(-s[0],s[1],s[2],!0)),r.setVariables&&b.playereval(this.popcorn,r.setVariables),l&&c&&(n={customContext:l,addonCommand:c},g.forEach(d,function(e,t){n[t]||(n[t]=e)}),hapyak.message.send(parent.window,c,n))},end:function(){p.removeClass(h,"active")}}})}),define("popcorn.profile.ontime",["popcorn.ontime"],function(){"use strict";return{id:"ontime",icon:'<span class="interactivity-icon-annotation-timetrigger"></span>',sortIndex:9,title:"time triggered action","data-test-name":"editor-timed-action-button",editor:["popcorn.quickedit.ontime"],zIndex:6,filter:function(e){return e}}}),define("utils.hytime",["jquery.noconflict","utils.hms"],function(r,o,e){"use strict";return{getTime:function(e){return e.replace("%","")},getFormat:function(e){if(e)return-1!==e.indexOf("%")?"percent":"seconds"},isValidAnnotationDuration:function(e,t,n,i){return e+n<=i},isValidStartEnd:function(e,t,n){if([e,t,n].every(function(e){return!isNaN(parseFloat(e))&&isFinite(e)&&0<=e}))return e<n&&e<t&&t<=n},getTimeInSeconds:function(e,t){if(e&&t){var n,i=this.getTime(t);if("percent"===this.getFormat(t)){if(!r.isNumeric(i))throw new Error("invalid");n=Math.abs(+i)/100*e,0===i.indexOf("-")&&(n=Math.max(e-n,0))}else{if(!r.isNumeric(i)&&!/^\-?\d+(:?:\d+){0,}(:?\.\d+)?$/.test(i))throw new Error("invalid");(n=o.toSeconds(o.fromString(i)))<0&&(n=Math.max(e+n,0))}if(e<n)throw new Error("high");return n}},getStartEnd:function(e,t,n,i,r,a){if(a)return t=100===i&&"percent"===r?a:t+n,(e+=n)<0?(t-=e,e=0):Math.abs(e-a)<.5&&(e=a-.5,t=a),{start:e,end:t}},onTextInputChange:function(t,n,e,i){if(t&&n&&i){var r,a=this.getFormat(i);"function"==typeof t.removeAttribute?t.removeAttribute("disabled"):t.set("isDisabled",!1);try{return r=this.getTimeInSeconds(e,i),n="("+o.toString(r)+")",r}catch(e){"low"===e.message?((void 0).startTimeInput.value="0"+("percent"===a?"%":""),this.onTextInputChange(t,n,i)):"function"==typeof t.setAttribute?t.setAttribute("disabled","disabled"):t.set("isDisabled",!0)}}}}}),define("utils.choiceParser",[],function(){"use strict";function n(e){if(e&&e.indexOf(!1))return e.split("; ").pop()}return{choiceExists:n,setChoice:function(e,t){return(e=n(e))?'choice:"'+t+'"; '+e:'choice:"'+t+'"; '}}}),define("popcorn.variables",["popcorn"],function(n){"use strict";n.p.getExportedVariables=function(){var t=[];return n.forEach(this.data.trackEvents.byStart,function(e){e._natives&&e._natives.getExportedVariables&&n.forEach(e._natives.getExportedVariables(),function(e){t.push(e)})}),t}}),define("popcorn.quickedit",["popcorn","utils","touch","configAPI","vendor/i18n!nls/ui","hapyak.overlay","utils.hms","utils.hytime","utils.embed","utils.choiceParser","jquery.noconflict","playlist.addon","popcorn.filter","popcorn.variables","materialize"],function(w,E,k,x,e,r,C,o,_,T,S,a){"use strict";var A,P=window.document,g={},y={},b=[],m={"":"div","#":"quickEditDialog",".":"modal",">":[{"":"div",".":"modal-header",">":[{"":"h1","#":"quickEditDialogTitle",">":""}]},{"":"div","#":"quickEditMain",".":"modal-body"},{"":"div","#":"quickEditProgress",">":"Please wait&hellip;"},{"":"div","#":"quickEditButtonContainer",".":"modal-footer",">":[{"":"button","#":"dialogCancelButton",".":"btn btn-flat waves-effect waves-light bcov-button-flat",">":"Cancel"},{"":"button","#":"dialogSubmitButton",".":"btn waves-effect waves-light bcov-button",">":"Save"}]}]},W=/^(https?:\/\/|mailto:|tel:)/i,s=e.overlay.action.delete_annotation;function I(e){var r={},i=this;this.on=function(e,t,n){var i;"string"==typeof e&&"function"==typeof t&&(i=(i=r[e])||(r[e]={before:[],after:[]}),(i=n?i.before:i.after).indexOf(t)<0&&i.push(t))},this.off=function(e,t,n){"string"==typeof e&&"function"==typeof t&&(e=r[e])&&0<=(n=(e=n?e.before:e.after).indexOf(t))&&e.splice(n,1)},this.emit=funpe.slice.call(arguments,2);e&&(e=r[e])&&(e=t?e.before:e.after,w.forEach(e,function(e){e.apply(this,n)},this))},this.destroy=function(){w.forEach(r,function(e,t){delete r[t]})},e&&(e.on=function(e,t,n){i.on(e,t,n)},e.off=function(e,t,n){i.off(e,t,n)},e.emit=function(){i.emit.apply(this,arguments)})}function l(e,t){var n,i,r,a=e.left,o=e.top,s=e.width+a,l=e.height+o,c=window.getComputedStyle(t),d=c.getPropertyValue("transform")||c.getPropertyValue("-moz-transform")||c.getPropertyValue("-ms-transform")||c.getPropertyValue("-o-transform")||c.getPropertyValue("-webkit-transform");if("none"!==d&&(d=/matrix\(([0-9\., ]+)\)/.exec(d))){for(d=d[1].split(","),n=0;n<6;n++)d[n]=parseFloat(d[n])||0;c=c.getPropertyValue("transform-origin")||c.getPropertyValue("-moz-transform-origin")||c.getPropertyValue("-ms-transform-origin")||c.getPropertyValue("-o-transform-origin")||c.getPropertyValue("-webkit-transform-origin"),(c=/(\d+)px (\d+)px/.exec(c))?(i=parseFloat(c[1]),r=parseFloat(c[2])):(r=t.offsetWidth/2,i=t.offsetHeight/2),c=d[0]*(a-=r)+d[1]*(o-=i)+d[4],t=d[2]*a+d[3]*o+d[5],a=d[0]*(s-=r)+d[1]*(l-=i)+d[4],o=d[2]*s+d[3]*l+d[5],e.left=Math.min(c,a)+r,e.top=Math.min(t,o)+i,e.width=Math.abs(a-c),e.height=Math.abs(o-t)}}function L(e,t){var n,i={left:0,top:0,width:e.offsetWidth,height:e.offsetHeight};if(l(i,e),i.left+=e.offsetLeft,i.top+=e.offsetTop,t&&e.parentNode)for(w.isArray(t)||(t=[t]),n=e.parentNode;n&&"BODY"!==n.tagName&&n.style&&t.indexOf(n)<0;)l(i,n),n=n.parentNode;return i}function D(e,t,n,i){var a=this;a.eventHandler=new I(this),this.editing=!1,this.settings=w.extend({},n),this.quickEditor=i,this.popcorn=t,this.trackEvent=t.getTrackEvent(e._id)||e,this.type=e._natives.type,i=g[this.type],this.container=e.container,this.editorContainer=n.editorContainer||this.container&&this.container.parentNode,this.dialogContainer=n.dialogContainer||n.editorContainer,this.editElements={},this.editContainer=P.createElement("div"),this.editContainer.setAttribute("data-popcorn-id",e._id),this.editContainer.className="popcorn-quickedit-edit popcorn-quickedit-"+this.type,this.editContainer.style.zIndex=_.dotget(x,"provisioning.editor.quickEditMenu.zIndex")||1e3,this.editButton=P.createElement("div"),this.editButton.innerHTML="Edit",this.editButton.className="popcorn-quickedit-editbutton",this.editButton.addEventListener("click",function(){a.edit()},!1),this.editContainer.appendChild(this.editButton),this.nudgeButton=P.createElement("div"),this.nudgeButton.className="hapyak-quickedit-nudge",this.nudgeBack=P.createElement("span"),this.nudgeBack.className="hapyak-quickedit-nudgeback",this.nudgeBack.innerHTML="&larr;",this.nudgeButton.appendChild(this.nudgeBack),this.nudgeBack.addEventListener("click",function(){a.adjustTime(-1,!0)},!0),this.editTimer=P.createElement("span"),this.nudgeButton.appendChorward=P.createElement("span"),this.nudgeForward.className="hapyak-quickedit-nudgeforward",this.nudgeForward.innerHTML="&rarr;",this.nudgeButton.appendChild(this.nudgeForward),this.nudgeForward.addEventListener("click",function(){a.adjustTime(1,!0)},!0),this.editContainer.appendChild(this.nudgeButton),this.startTimeButton=P.createElement("div"),this.startTimeButton.className="hapyak-quickedit-start",this.startTimeButton.innerHTML="Start Time",this.startTimeButton.addEventListener("click",function(){function e(){o.onTextInputChange(a.dialogElements.dialogSubmitButton,i.startTimeInput.value,r,i.startTimeInput.value)}var i,r=a.popcorn.duration(),t=P.createElement("div");a.createDialog({target:a.dialogContainer,success:function(){var e=o.getFormat(i.startTimeInput.value),t=o.getTime(i.startTimeInput.value),n=o.getTimeInSeconds(r,i.startTimeInput.value);a.trackEvent.startTimeValue="percent"===e?+t:C.toSeconds(C.fromString(t)),a.trackEvent.startTimeFormat=e,(t=(n=Math.abs(n-r)<.5?r-.5:n)-a.trackEvent.start)&&a.adjustTime(t)}}),a.dialogElements.quickEditDialogTitle.innerHTML="Set Start Time",(i=E.microTemplate(t,[{"#":"startTimeContainer",">":[{"":"label",".":"pull-left",">":"Start time:&nbsp;"},{"":"input","#":"startTimeInput",type:"text"},{"":"span","#":"startTimeInSeconds",".":"pull-right"},{"#":"instructions",">":"Enter start time in seconds, as a percentage (10%) or in time format hours:minutes:seconds.milliseconds"}]}])).startTimeInput.addEventListener("change",e,!1),i.startTimeInput.addEventListener("input",e,!1),"percent"===a.trackEvent.startTimeFormat?i.startTimeInput.value=a.trackEvent.startTimeValue+"%":i.startTimeInput.value=C.toString(a.trackEvent.startTimeValue),a.dialogElements.quickEditMain.appendChild(t),e(),a.centerDialog()},!1),this.editContainer.appendChild(this.startTimeButton),x.provisioning.customClasses&&(this.cickedit-class",this.cssButton.innerHTML="Add Class",this.cssButton.addEventListener("click",function(){var e,t=P.createElement("div");a.createDialog({target:a.dialogContainer,success:function(){a.trackEvent.customClasses=e.classInput.value,a.save()}}),a.dialogElements.quickEditDialogTitle.innerHTML="CSS classes",(e=E.microTemplate(t,[{"#":"classContainer",">":[{"":"label",".":"pull-left",">":"Classes&nbsp;"},{"":"input","#":"classInput",type:"text"}]}])).classInput.value=a.trackEvent.customClasses||"",a.dialogElements.quickEditMain.appendChild(t),a.centerDialog()},!1),this.editContainer.appendChild(this.cssButton)),0<=["pop","image"].indexOf(a.type)&&x.provisioning.transitions&&(this.transitionContainer=P.createElement("div"),this.transitionContainer.className="hapyak-mode-buttons",(t=E.microTemplate(this.transitionContainer,[{"":"section",">":[{"":"label","#":"transitionsLabel",">":"Transitions"},{"":"select","#":"transitionDropDown",">":[{"":"option",value:"hapyak-transition-none",">":"None",selected:"true"},{"":"option",value:"hapyak-transition-fade",">":"Fade"},{"":"option",value:"hapyak-transition-pop",">":"Pop"},{"":"option",value:"hapyak-transition-slide-up",">":"Slide Up"}]}]}])).transitionDropDown.addEventListener("change",function(){a.trackEvent.transitionClass=this.value,a.save()},!1),w.forEach(t.transitionDropDown.childNodes,function(e){e.value===a.trackEvent.transitionClass&&e.setAttribute("selected",!0)}),this.editContainer.appendChild(this.transitionContainer)),this.durationButton=P.createElement("div"),this.durationButton.className="hapyak-quickedit-duration",n=E.microTemplate(this.durationButton,[{"#":"display",">":['<span class="ss-clock"></span> ',{"":"span","#":"duration"}]}]),this.durationDisplay=n.display,this.editContainer.appendChild(this.durationButton),this.durationButton.addEventListener("click",function(){e,title:!use",value:function(){return a.trackEvent._duration||a.trackEvent.duration||a.trackEvent.pause||a.trackEvent.end-a.trackEvent.start||3},format:function(){return a.trackEvent.durationFormat||"seconds"},maxValue:function(){return a.popcorn.duration()},callbacks:{success:function(e,t){a.trackEvent.durationValue=e,"percent"===(a.trackEvent.durationFormat=t)?a.setDuration(e/100*a.popcorn.duration()):a.setDuration(e),a.save()}}}):window.alert("Not ready, video duration not available yet")},!1),this.pauseButton=P.createElement("div"),this.pauseButton.className="hapyak-quickedit-pause",this.pauseButton.innerHTML=e.pause?"Pause: Y":"Pause: N",this.pauseButton.addEventListener("click",function(){a.trackEvent.pause=!a.trackEvent.pause&&(a.trackEvent._duration||!0),a.trackEvent.pause?(a.setDuration(-1),a.trackEvent.durationFormat="infinite"):a.trackEvent._duration<=0&&(a.trackEvent._duration=3,a.trackEvent.durationFormat="seconds"),a.trackEvent.end=a.trackEvent.start+(a.trackEvent.pause?.5:a.trackEvent._duration||3),a.pauseButton.ie: N",a.trackEvent.pause?a.addClass(a.trackEvent.container,"hapyak-action-pause"):a.removeClass(a.trackEvent.container,"hapyak-action-pause"),a.popcorn.currentTime()>a.trackEvent.end?(a.popcorn.on("seeked",function e(){a.save(),this.off("seeked",e)}),a.popcorn.currentTime(a.trackEvent.start)):a.save()},!1),this.editContainer.appendChild(this.pauseButton),x.isProvisioned("API__ANNOTATION")&&(this.preconditionButton=P.createElement("div"),this.preconditionButton.className="hapyak-quickedit-precondition",this.preconditionButton.innerHTML="Display Rule",this.preconditionButton.addEventListener("click",function(){var n,e;a.createDialog({target:a.dialogContainer,success:function(){var e=n.expression.value.trim();a.trackEvent.precondition="!condition"===e||("true"!==e&&e||""),a.save()}}),e=P.createElement("div"),a.dialogElements.quickEditDialogTitle.innerHTML="Set Display Rule",a.dialogElements.quickEditMain.appendChild(e),n=E.microTemplate(e,[{"":"label",".":"pull-left",">":"JS Expression: "},{"":"input","#":"expression",type:"text"},{">":{"":"select","#":"variableList",">":{"":"option",value:"",">":"ion?n.expression.value=a.trackEvent.precondition:!0===a.trackEvent.precondition?n.expression.value="!condition":n.expression.value="",(e=a.popcorn.getExportedVariables())&&e.length?(e.sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}),w.forEach(e,function(e){var t=P.createElement("option");t.appendChild(P.createTextNode(e.title)),t.value=e.name,n.variableList.appendChild(t)}),n.variableList.addEventListener("change",function(){var e=n.expression.value;n.variableList.value&&(" "!==e.charAt(e.length-1)&&(e+=" "),n.expression.value=e+n.variableList.value),n.variableList.selectedIndex=0})):n.variableList.style.display="none",a.centerDialog()},!1),this.editContainer.appendChild(this.preconditionButton)),this.moreButtonsContainer=P.createElement("div"),this.moreButtonsContainer.className="more-buttons",this.editContainer.appendChild(this.moreButtonsContainer),this.previewButton=P.createElement("div"),this.previewButton.className="hapyak-quickedit-preview",this.previewButton.innerHTML='<i class="ss-icon ss-standard">&#x21BA;</i> Preview',this.previewButton.addEventListener("click",function(){a.done(),a.popcorn.currentTime(Math.max(0,a.trackEvent.start-1)),a.popcorn.play()},!1),this.editContainer.appendChild(this.previewButton),this.doneButton=P.createElement("div"),this.doneButton.className="hapyak-quickedit-done",this.doneButton.innerHTML='<i class="ss-icon ss-standard">&#x2713;</i> Done',this.doneButton.addEventListener("click",function(){a.done()},!1),this.editContainer.appendChild(this.doneButton),this.deleteButton=P.createElement("div"),this.deleteButton.className="hapyak-quickedit-delete",this.deleteButton.innerHTML='<i class="ss-icon ss-standard">&#xE0D0;</i> Delete',this.deleteButton.addEventListener("click",function(){r.confirm({title:s.title,message:s.message,callbacks:{success:function(){a.remove()}}})},!1),this.editContainer.appendCion"==typeof i&&(i=i.call(this,e)),this.editor=i,this.buttons=[],this.focusedControls=[],this.timeUpdate(),this.clickToEdit=function(e){e.srcElement!==a.trackEvent.container||a.editing||a.edit()},w.forEach(this.settings,function(e,t){a.emit(t,!1,e)})}D.prototype.moreButtons=function(t,e){var n,i=this;for(w.isArray(t)||(t=[t]),w.forEach([this.cssButton,this.preconditionButton,this.pauseButton],function(e){e&&(t=t.slice(0)).unshift(e)}),t=0<=(n=t.indexOf(this.transitionContainer))?t.slice(n,n+1):t,this.transitionContainer&&t.push(this.transitionContainer),this.moreButtonsContainer.innerHTML="",1===t.length&&!e||!t.length?(this.moreButton&&this.moreButton.parentNode&&this.moreButtonutton):(this.moreButton||(this.moreButton=P.createElement("div"),this.moreButton.className="hapyak-quickedit-more",this.moreButton.innerHTML="More...",this.moreButton.addEventListener("click",function(){i.addClass(i.editContainer,"more"),i.resize()},!1)),this.moreButtonsContainer.appendChild(this.moreButton)),n=0;n<t.length;n++)this.moreButtonsContainer.appendChild(t[n]);this.editing&&i.resize()},D.prototype.setting=function(e,t){this.settings[e]=t,this.emit(e,!1,t)},D.prototype.timeUpdate=function(){var e,t,n;this.editTimer.innerHTML=(e=this.trackEvent.start,t="",(n=Math.floor(e/3600))&&(t=n+":"),(n=Math.floor(e/60))<10&&(t+="0"),t+=n+":",(n=Math.floor(e%60))<10&&(t+="0"),t+=n,(n=Math.round(10*(e-Math.floor(e))))&&(t+="."+n),t),e=this.trackEvent.pause?this.trackEvent._duration||parseFloat(this.trackEvent.pause)||3:this.trackEvent._duration||this.trackEvent.end-this.trackEvent.start,e=Math.round(10*e)/10,this.durationDisplay.lastChild.innerHTML=(-1===e?"&infin;":e)+" s"},D.prototype.adjustTime=function(e,t){var n=this.trackEvent,i=this.popcorn.duration(),e=o.getStartEnd(n.start,n.end,e,n.durationValue,n.durationFormat,i);0!==e.start&&!e.start||0!==e.end&&!e.end||(this.trackEvent.start=e.start,this.trackEvent.end=e.end,t&&("percent"===this.trackEvent.startTimeFormat?this.trackEvent.startTimeValue=Math.round(e.start/i*100*100)/100:this.trackEvent.startTimeValue=e.start),this.timeUpdate(),this.save(),this.popcorn.currentTime(e.start))},D.prototype.setDuration=function(e){var t=this.trackEvent.start,n=!1;e=parseFloat(e),isNaN(e)?this.timeUpdate():(e!==this.trackEvent._duration&&(n=!0),this.trackEvent.start=t,this.trackEvent._duration=e,this.trackEvent.pause?(this.trackEvent.pause=e,this.trackEvent.end=t+.5):this.trackEvent.end=t+e,this.trackEvent.end<this.popcorn.currentTime()&&this.popcorn.currentTime(this.trackEvent.end-.1),n&&this.timeUpdate(),this.save())},D.prototype.resize=function(){!1!==(this.editor.resize&&this.editor.resize.call(this))&&this.trackEvent.container&&this.editContainer&&this.editContainer.parentNode&&this._resize()},D.prototype._resize=function(){var e,t=0,n=this.trackEvent.container,n=L(n,[n.parentNode,this.trackEvent.topContainer||this.settings.topContainer||n.parentNode,this.trackEvent.editorContainer||this.settings.editorContainer]),i=L(this.editContainer,[this.editContainer.parentNode,this.trackEvent.topContainer||this.settings.topContainer||this.editContainer.parentNode,this.trackEvent.editorContainer||this.settings.editorContainer]),r=this.trackEvent.topContainer&&this.trackEvent.topContainer.offsetWidth||this.settings.topContainer.offsetWidth,a=this.trackEvent.topContainer&&this.trackEvent.topContainer.offsetHeight||this.settings.topContainer.offsetHeight;this.dragger&&this.editing&&(t=3,n.top-=13,n.left-=21,n.width+=36,n.height+=24,this.dragger.style.top=100*n.top/a+"%",this.dragger.style.left=100*(n.left+8)/r+"%",this.dragger.style.width=100*(n.width-12)/r+"%",this.dragger.style.height=100*n.height/a+"%"),(e=n.left+n.width)+i.width<r?this.editContainer.style.left=100*(e+t)/r+"%":this.editContainer.style.left=100*Math.max(0,n.left-i.width+t)/r+"%",e=a-(n.top+i.height),e=Math.min(e,0),this.dragger&&this.editing?this.editContainer.style.top=100*Math.max(0,n.top+e)/a+"%":this.editContainer.style.top=this.trackEvent.top||100*Math.max(0,n.top+e)/a+"%"},D.prototype.activate=function(){var e;this.quickEditor.emit("activate",!0,this.trackEvent,this),this.timeUpdate(),this.active=!0,this.editorContainer||(this.container=this.trackEvent.container,this.container&&(this.editorContainer=this.settings.editorContainer||this.container.parentNode)),!1!==(this.editor.activate&&this.editor.activate.call(this,this.trackEvent))&&(e=this.trackEvent.container,this.editContainer&&this.editorContainer&&(this.editorContainer===e.parentNode?this.editorContainer.insertBefore(this.editContainer,e.nextSibling||null):this.editorContainer.appendChild(this.editContainer)),e&&e.addEventListener("click",this.clickToEdit,!1),this.resize()),this.editing&&"function"==typeof this.editor.start&&this.editor.start.call(this,this.trackEvent),this.quickEditor.emit("activate",!1,this.trackEvent,this)},D.prototype.deactivate=function(e){var t;if(this.active){if(this.quickEditor.emit("deactivate",!0,this.trackEvent,this),this.containerTouch&&(this.containerTouch.remove(),this.containerTouch=null),t=this.editor.deactivate&&this.editor.deactivate.call(this,e),e||!1!==t)return this.trackEvent.container&&this.trackEvent.container.removeEventListener("click",this.clickToEdit),this.done(!!this.deleted),this.active=!1,this.editContainer&&this.editContainer.parentNode&&this.editContainer.parentNode.removeChild(this.editContainer),this.quickEditor.emit("deactivate",!1,this.trackEvent,this),!0;this.quickEditor.emit("deactivate",!1,this.trackEvent,this)}return!1},D.prototype.edit=function(){var e=this.trackEvent.container,t=this.gateButton,n=this.scaleButton;this.timeUpdate(),this.quickEditor.emit("edit",!0,this.trackEvent,this),this.paused=this.popcorn.paused(),this.popcorn.pause(),this.editing=!0,this.pauseButton.innerHTML=this.trackEvent.pause?"Pause: Y":"Pause: N",t&&(t.innerHTML="Gate: "+(!0===this.trackEvent.gate?"Y":"N")),n&&(n.innerHTML="Scale: "+(!0===this.trackEvent.noscale?"N":"Y")),this.addClass(this.editContainer,"editing"),"function"==typeof this.editor.start&&this.editor.start.call(this,this.trackEvent),this.dragger&&this.dragContainer&&(e&&e.parentNode===this.dragContainer?e.parentNode.insertBefore(this.dragger,e||null):this.dragContainer.appendChild(this.dragger)),this.resize(),this.quickEditor.emit("edit",!1,this.trackEvent,this)},D.prototype.done=function(e){this.editing&&(this.blurControls(),this.quickEditor.emit("done",!0,this.trackEvent,this),this.editing=!1,this.removeClass(this.editContainer,"editing"),this.removeClass(this.editContainer,"more"),this.removeClass(this.durationButton,"editing"),this.dragger&&this.dragger.parentNode&&this.dragger.parentNode.removeChild(this.dragger),"function"==typeof this.editoitor.tryMakeValid||this.editor.tryMakeValid()?(this.save(),this.resize()):this.remove()),this.quickEditor.emit("done",!1,this.trackEvent,this))},D.prototype.blurControls=function(){for(;this.focusedControls.length;)this.focusedControls.pop().blur()},D.prototype.draggable=function(v){this.trackEvent;var a,o,s,l,c,d,u,g,r,y=this,b=1;function w(){return+y.dragContainer.style.transform.match(/[0-9 , \.]+/g)}function e(i,r){var e,a,o,s,l,c,d,u,p,h,f,m,t=["quickedit-handle"],n=P.createElement("div");r<0?t.push("top"):0<r&&t.push("bottom"),i<0?t.push("left"):0<i&&t.push("right"),n.className="quickedit-handle "+t.join("-"),y.dragger.appendChild(n),A||((t=P.createElement("div")).className="quickedit-handle-inner",n.appendChild(t)),e=new k(n,function(e,t,n){var i=y.trackEvent.container;y.blurControls(),c=t/y.dragContainer.offsetWidth*100,d=n/y.dragContainer.offsetHeight*100,p=u=0,y.dragContainer&&y.dragContainer.offsetWidth&&(v.ignorePlayerScale||(b=1/w()||1),t=L(i,[i.parentNode,y.trackEvent.topContainer||y.settings.topContainer||i.parentNode,y.trackEvent.editorContainer||y.settings.editorContainer]),u=t.left/y.dragContainer.offsetWidth*100||0,p=t.top/y.dragContainer.offsetHeight*100||0,f=t.width/y.dragContainer.offsetWidth*100||60,h=t.height/y.dragContainer.offsetHeight*100||60,o=u,a=p,m=(s=f)/(l=h)),e.cancelBubble=!0},function(e,t,n){t=t/y.dragContainer.offsetWidth*100,n=n/y.dragContainer.offsetHeight*100,i<0?(o=Math.max(0,u+t-c),(s=f+u-o)<5&&(o-=5-s,s=5)):i&&(s=Math.max(f+t-c,5),s=Math.min(s,100-o)),r<0?(a=Math.max(0,p+n-d),(l=h+p-a)<5&&(a-=5-l,l=5)):r&&(l=Math.max(h+n-d,5),l=Math.min(l,100-a)),v.lockAspect&&(t=s/l,(!i||r&&m<t)&&(s=l*f/h,i<0&&(o=u+f-s)),(!r||i&&t<m)&&(l=s*h/f,r<0&&(a=p+h-l))),100<o+s&&(l=(s=100-o)*h/f,r<0&&(a=p+h-l)),100<a+l&&(s=(l=100-a)*f/h,i<0&&(o=u+f-s)),g(o,a,s,l)}),this.remove=function(){e.remove()}}function t(e,t,n){var i=y.trackEvent.container;if(!y.active||!y.editing||e.target!==e.currentTarget&&e.target!==r)return!1;y.blurControls(),y.popcorn.pause(),v.ignorePlayerScale||(b=1/w()||1),u=L(i,[i.parentNode,y.trackEvent.topContainer||y.settings.topContainer||i.parentNode,y.trackEvent.editorContainer||y.settings.editorContainer]),a=t*b,o=n*b,l=u.left,s=u.top}function n(e,t,n){var i,r=y.trackEvent.container;d=s+(n*=b)-o,(c=l+(t*=b)-a)<0?c=0:(i=y.dragContainer.offsetWidth-u.width)<c&&(c=i),d<0?d=0:(i=y.dragContainer.offsetHeight-u.height)<d&&(d=i),c=100*c/y.dragContainer.offsetWidth,d=100*d/y.dragContainer.offsetHeight,"function"==typeof v.move&&(n=v.move(c,d))&&(c=isNaN(n[0])?c:n[0],d=isNaN(n[1])?d:n[1]),r.style.left=c+"%",r.style.top=d+"%",y.resize()}function i(){var e;void 0!==c&&("function"==typeof v.move&&(e=v.move(c,d))&&(c=isNaN(e[0])?c:e[0],d=isNaN(e[1])?d:e[1]),y.trackEvent.left=c+"%",y.trackEvent.top=d+"%",y.save()),y.trackEvent}v=v||{},this.dragger||(y.dragger=P.createElement("span"),y.dragger.className="popcorn-quickedit-draggable",this.touch=new k(this.dragger,t,n,i),"function"==typeof v.scale&&(g=v.scale,!(this.scaleResizers=[])!==v.scaleWidth&&(!1!==v.scaleHeight&&(this.scaleResizers=[new e(-1,-1),new e(-1,1),new e(1,-1),new e(1,1)]),this.scaleResizers.push(new e(-1,0)),this.scaleResizers.push(new e(1,0))),!1!==v.scaleHeight&&(this.scaleResizers.push(new e(0,-1)),this.scaleResizers.push(new e(0,1)))),A||((r=P.createElement("div")).className="popcorn-quickedit-draggable-inner",y.dragger.appendChild(r))),y.trackEvent.container&&v.dragContainer&&(this.containerTouch&&this.containerTouch.remove(),this.containerTouch=new k("object"==typeof v.dragContainer?v.dragContainer:y.trackEvent.container,t,n,i)),this.dragContainer=y.trackEvent.dragContainer||this.settings.dragContainer||y.trackEvent.container&&y.trackEvent.container.parentNode,this.editing&&this.dragContainer&&(y.trackEvent.container&&this.dragContainer===y.trackEvent.container.parentNode?y.trackEvent.container.teDialog()}function d(e){27===e.keyCode&&l.cancelCreateDialog()}function u(){window.removeEventListener("click",r,!1),window.removeEventListener("mouseup",r,!1)}function p(){window.addEventListener("click",r,!1)}function h(e){e.stopPropagation()}function f(){l.dialogElements&&(l.dialogElements.quickEditDialog.parentNode&&l.dialogElements.quickEditDialog.parentNode.removeChild(l.dialogElements.quickEditDialog),delete l.dialogElements)}this.isDone=!1,e=i.target||P.createElement("div"),this.cancelCreateDialog(),this.dialogElements=a=s(e,m),E.addClass(a.quickEditDialog,l.type),i.tabs&&(t=P.createDocumentFragment(),w.extend(a,s(t,{"":"div","#":"quickEditTabs",".":"row",">":[{"":"ul","#":"quickEditTabs",".":"nav nav-tabs row"}]})),a.quickEditMain.appendChild(t),a.tabs={},w.forEach(i.tabs,function(n,e){var i,r=[];"string"==typeof n&&(n={title:n,id:isNaN(e)&&e||n}),i=n.id||e,n.icon&&r.push({"":"span",".":n.icon}),r.push({"":"span",">":n.title||i}),r=s(a.quickEditTabs,{"#":"tab","":"li",">":[{"":"a",">":r}]}),a.tabs[i]=r.tab,t=P.createDocumentFragment(),w.extend(a,s(t,{"#":i,"":"section",">":n.template})),a.quickEditMain.appendChild(t),c[e]=function(){var e,t;if(o!==i){for(e in a.tabs)a.tabs.hasOwnProperty(e)&&e!==i&&(E.removeClass(a.quickEditDialog,e),E.removeClass(a[e],"active"),E.removeClass(a.tabs[e],"active"),(t=a.tabs[e].querySelectorAll("a")).length&&E.removeClass(t[0],"active"));E.addClass(a.quickEditDialog,i),E.addClass(r.tab,"active"),E.addClass(a[i],"active"),o=i,n.callback&&n.callback()}l.centerDialog()},e!==i&&(c[i]=c[e]),r.tab.addEventListener("click",c[e],!1)})),this.selectDialogTab=function(e){e=c[e];e&&e()},this.cancelCreateDialog=function(){this.isDone||(l.dialogElements&&("function"==typeof i.cancel&&i.cancel(),f()),window.removeEventListener("click",r,!1),window.removeEventListener("mouseup",r,!1),n.removeEventListener("mouseout",p,!1),n.removeEventListener("mouseover",u,!1),n.removeEventListener("click",h,!1),window.removeEventListener("keyup",d,!1))},(n=a.quickEditDialog).addEventListener("mouseover",u,!1),n.addEventListener("mouseout",p,!1),n.addEventListener("click",h,!1),window.addEventListener("mouseup",r,!1),window.addEventListener("keyup",d,!1),a.dialogCancelButton.addEventListener("click",r,!1),this.submitCreateDialog=function(){var e=!0;this.isDone||a.dialogSubmitButton.hasAttribute("disabled")||(l.dialogElements?!(e="function"==typeof i.success?i.success(f):e)&&void 0!==e||(this.isDone=!0,f()):this.isDone=!0)},a.dialogSubmitButton.addEventListener("click",this.submitCreateDialog,!1),this.selectDialogTab(0)},D.prototype.centerDialog=function(){var e,t;this.container&&this.container.classList.contains("hapyak-editing-iframe")||(e=this.dialogElements&&this.dialogElements.quickEditDialog,t=0<(t=(t=P.querySelectorAll(".hapyak-control-bar")).length&&t[0].offsetHeight||0)&&t/2||0,e&&window.innerHeight<=600&&(e.offsetHeight&&S(e).animate({marginTop:"-"+e.offsetHeight/2-t+"px"},200),e.offsetWidth&&(e.style.marginLeft="-"+e.offsetWidth/2+"px")))},D.prototype.submitCreateDialog=functialogTab=function(){this.centerDialog()},D.prototype.createTextButton=function(e){var t=P.createElement("div");return t.innerHTML=e.buttonLabel||"Editor",t.className="popcorn-quickedit-textbutton",t.addEventListener("click",function(){r.textInput(e)},!1),t},D.prototype.createOnClickButton=function(e){var u,p,h=this,f=P.createElement("option");function m(e){var t=E.validateOnClick(p);return t?h.dialogElements.dialogSubmitButton.removeAttribute("disabled"):h.dialogElements.dialogSubmitButton.setAttribute("disabled","disabled"),e&&e.target===p.linkInput&&b(),t}function v(e){var t=p.timeInputSelect;"customtimeInput,"hide"):(h.addClass(p.timeInput,"hide"),p.timeInput.value="",m(e))}function g(e){p.pauseInput.checked=!p.pauseInput.checked}function y(e){p.releaseGate.checked=!p.releaseGate.checked}function b(){E.validateOnClick({linkInput:p.linkInput})}return void 0!==e&&"function"==typeof e.resize&&(u=e.resize),(e=P.createElement("div")).className="hapyak-quickedit-onclick",e.innerHTML="Link",e.addEventListener("click",function(){function s(e){if(x&&e)return _.dotget(x,"provisioning."+e)}var e,t,n,i;function r(e,t,n){e.addEventListener("change",m),e.previousSibling.addEventListener("click",t),e.checked=!!h.trackEvent.onClick&&h.trackEvent.onClick[n]}if(h.createDialog({target:h.dialogContainer,success:function(){var e,t,n=w.extend({},h.trackEvent.onClick),i=(h.trackEvent,""),r="",a="",o="";if(!m())return!1;p.linkInput&&p.linkInput.value&&(e=p.linkInput.value,W.test(e)||E.regex.templateVarsRegex().test(e)||(e="http://"+e)),t=p.rotateInputSelect,e?n.gotoLink=e:delete n.gotoLink,p.timeInput&&p.timeInput.value?i+="#"+p.timeInput.value:p.timeInputSelect&&p.timeInputSelect.value&&-1===["default","customTime"].indexOf(p.timeInputSelect.value)&&(i+="#"+p.timeInputSelect.value),t&&t.value&&"default"!==t.value&&(a=t.value),i?n.gotoTrack=i:delete n.gotoTrack,a?n.rotateToAnnotation=a:delete n.rotateToAnnotation,p.varInput&&p.varInput.value?n.setVariables=p.varInput.value:delete n.setVariables,p.branchInputSelect&&p.branchInputSelect.value&&(r=p.branchInputSelect.value,e=p.branchInputSelect.selectedIndex,t=p.branchInputSelect.options[e].innerHTML,o=p.branchTimeInput.value,n.setVariables=T.setChoice(n.setVariables,t),h.trackEvent.goToVideo=r,h.trackEvent.branchTimeInput=o),p.branchTimeInput&&p.branchTimeInput.value&&(n.branchTimeInput=o),r&&"-"!==r?n.goToVideo=r:(delete n.goToVideo,n.setVariables=T.choiceExists(n.setVariables)),p.cssInput&&p.cssInput.value?n.addClasses=p.cssInput.value:delete n.addClasses,p.loopbackInput&&p.loopbackInput.value?n.loopback=p.loopbackInput.value:delete n.loopback,n.pause=p.pauseInput.checked,n.releaseGate=p.releaseGate.checked,["experiences.enabled","addons.enabled"].some(s)&&(h.trackEvent=O(p,h.trackEvent)),h.trackEvent.onClick=n,"function"==typeof u&&u(),h.save()}}),e=P.createElement("div"),h.addClass(e,"modal-onclick"),h.addClass(h.dialogElements.quickEditDialog,"modal-onclick-container"),h.dialogElements.quickEditDialogTitle.innerHTML="On Click Event",h.dialogElements.quickEditMain.appendChild(e),c=[{"":"label",".":"pull-left","#":"onclickLink",">":"URL"},{"":"input","#":"linkInput",type:"text"},{"":"label","#":"onClickTime",".":"pull-left",">":"Jump to video time: "},{"":"select","#":"timeInputSelect",">":[{"":"option",selected:"true",value:"default",">":"-"}]},{"":"input","#":"timeInput",".":"hide",type:"text"},{"":"div","#":"branchTimeWarning",".":"hide branch-time-warning",">":"This field is used in an experience and can only be edited there."}],n=[{"":"label","#":"onclickPause",".":"pull-left nudge-right",">":"Pause video on click"},{"":"input","#":"pauseInput",type:"checkbox"},{"":"label","#":"onclickReleaseGate",".":"pull-left",">":"Release gate on click"},{"":"input","#":"releaseGate",type:"checkbox"},{"":"label",".":"pull-left","#":"onClickLoopback",">":"Action to take if the viewer doesn't click"},{"":"select","#":"loopbackInput",">":[{"":"option",selected:"true",value:"continue",">":"Continue video"},{"":"option",value:"loop",">":"Loop back"}]}],i=[],x.provisioning.clickSetCss&&i.push({"":"div","#":"onclickCss",">":[{"":"label",".":"pull-left",">":"Add CSS class: "},{"":"input","#":"cssInput",type:"text"}]}),x.isProvisioned("API__ANNOTATION")&&i.push({"":"label","#":"onclickVar",".":"pull-left",">":"JavaScript: "},{"":"input","#":"varInput",type:"text"}),z()&&!F()&&c.push(R),hapyak.Css360&&c.push(j),t=[{"":"li",".":"tab col s4",">":[{"":"a",href:"#onclick-actions",">":"Actions"}]},{"":"li",".":"tab col s4",">":[{"":"a",href:"#onclick-behaviors",">":"Behavior"}]}],i.length&&t.push({"":"li",".":"tab col s4",">":[{"":"a",href:"#onclick-advanced",">":"Advanced"}]}),t=[{"":"div",".":"materialize",">":[{"":"div",".":"row","#":"onClickTabs",">":[{"":"div",".":"col s12",">":[{"":"ul",".":"tabs",">":t}]}]}]},{"":"div",".":"col s12","#":"actions",id:"onclick-actions",">":[{"":"div",">":c}]},{"":"div",".":"col s12","#":"behaviors",id:"onclick-behaviors",">":[{"":"div",">":n}]}],["experiences.enabled","addons.enabled"].some(s)&&x.isProvisioned("API__ANNOTATION")&&i.push(M),i.length&&t.push({"":"div",".":"col s12","#":"advanced",id:"onclick-advanced",">":[{"":"div",">":i}]}),(p=E.microTemplate(e,t)).linkInput.addEventListener("change",m),p.linkInput.addEventListener("keyup",m),p.linkInput.addEventListener("keypress",m),S("ul.tabs",p.onClickTabs).tabs(),p.rotateInputSelect&&((f=P.createElement("option")).innerHTML="Recenter",f.value="recenter",p.rotateInputSelect.appendChild(f)),w.forEach(h.popcorn.data.trackEvents.byStart,function(e){var t;if(!e._natives||e.annotationId===h.trackEvent.annotationId)return!1;(t=P.createElement("option")).innerHTML=C.toString(e.start)+" - "+E.getAnnotationMessage(e._natives.type,!0,e.customConfig,e),t.value="id="+e.annotationId,p.timeInputSelect.appendChild(t),p.rotateInputSelect&&e.transform&&((t=P.createElement("option")).innerHTML=E.getAnnotationMessage(e._natives.type,!0,e.customConfig,e),t.value=e.annotationId,p.rotateInputSelect.appendChild(t))}),(f=P.createElement("option")).innerHTML="Custom time",f.value="customTime",p.timeInputSelect.appendChild(f),p.timeInputSelect.addEventListener("change",v),z()&&!F()&&p.branchInputSelect.addEventListener("change",function(){q(p,h.trackEvent),B(p)}),p.timeInput.addEventListener("change",m),p.timeInput.addEventListener("keyup",m),p.timeInput.addEventListener("keypress",m),p.cssInput&&(p.cssInput.addEventListener("change",m),p.cssInput.addEventListener("keyup",m),p.cssInput.addEventListener("keypress",m),p.cssInput.value=h.trackEvent.onClick&&h.trackEvent.onClick.addClasses||""),p.varInput&&(p.varInput.addEventListener("change",m),p.varInput.addEventListener("keyup",m),p.varInput.addEventListener("keypress",m),p.varInput.value=T.choiceExists(h.trackEvent.onClick&&h.trackEvent.onClick.setVariables)||""),r(p.pauseInput,g,"pause"),r(p.releaseGate,y,"releaseGate"),p.rotateInputSelect&&h.trackEvent.onClick&&h.trackEvent.onClick.rotateToAnnotation)for(var a=0,o=h.trackEvent.onClick.rotateToAnnotation;a<p.rotateInputSelect.options.length;a++)if(p.rotateInputSelect.options[a].value===o){p.rotateInputSelect.options[a].selected=!0;break}if(h.trackEvent.onClick){p.linkInput.value=h.trackEvent.onClick.gotoLink||"";for(var l=0,c=["default","customTime"],d=h.trackEvent.onClick.gotoTrack&&h.trackEvent.onClick.gotoTrack.split("#")[1]||"";l<p.timeInputSelect.options.length;l++)if(p.timeInputSelect.options[l].value===d){p.timeInputSelect.options[l].selected=!0;break}-1<c.indexOf(p.timeInputSelect.value)&&(p.timeInputSelect.value=d?"customTime":"default",d&&(-1===c.indexOf(d)?(p.timeInput.value=d,h.removeClass(p.timeInput,"hide")):p.timeInputSelect.firstChild.selected=!0))}z()&&!F()&&V(p,h.trackEvent),z()&&!F()&&h.trackEvent.goToVideo&&(p.branchInputSelect.value=h.trackEvent.goToVideo||"",H(h,p)),p.linkInput.value||(p.linkInput.value=h.trackEvent.link||""),p.loopbackInput.value&&(p.loopbackInput.value=h.trackEvent.onClick&&h.trackEvent.onClick.loopback||"continue"),["experiences.enabled","addons.enabled"].some(s)&&N(p,h.trackEvent),!z()&&h.trackEvent.goToVideo&&U(p),m(),b(),hapyak.message.addEventListener("playlistItemsChanged",function(){V(p)}),h.centerDialog()},!1),e},D.prototype.createOnTimeButton=function(e){var c,d,u=this;function s(e){var t=d.timeInputSelect;"customTime"===t.options[t.selectedIndex].value?u.removeClass(d.timeInput,"hide"):(u.addClass(d.timeInput,"hide"),d.timeInput.value="")}return void 0!==e&&"function"==typeof e.resize&&(c=e.resize),(e=P.createElement("div")).className="hapyak-quickedit-ontime",e.innerHTML="On Time Event",e.addEventListener("click",function(){var e,t=P.createElement("option");if(u.createDialog({target:u.dialogContainer,success:function(){var e=u.trackEvent,t=d.timeInput,n=d.timeInputSelect,i=d.rotateInputSelect,r=d.branchInputSelect,a=d.branchTimeInput,o=d.onTimeJavascriptInput,s="",l="";o&&o.value?e.setVariables=o.value:delete e.setVariables,t&&t.value?(s=0<=t.value.indexOf("#")?t.value:"#"+t.value,e.gotoTrack=s):n&&n.value&&-1===["default","customTime"].indexOf(n.value)&&(s+="#"+n.value,e.gotoTrack=s),i&&i.value&&"default"!==i.value&&(l=i.value),r&&r.value&&(o=r.value,e.goToVideo=o),a&&a.value?e.branchTimeInput=a.value:delete e.branchTimeInput,s?e.gotoTrack=s:delete e.gotoTrack,l?e.rotateToAnnotation=l:delete e.rotateToAnnotation,e=O(d,e),"function"==typeof c&&c(),u.trackEvent=e,u.save()}}),a=P.createElement("div"),u.addClass(a,"modal-ontime"),u.dialogElements.quickEditDialogTitle.innerHTML="On Time Event",u.dialogElements.quickEditMain.appendChild(a),e=[],x.isProvisioned("API__ANNOTATION")&&e.push({"":"div","#":"onTimeJavascript",">":[{"":"label",".":"pull-left",">":"JavaScript: "},{"":"input","#":"onTimeJavascriptInput",type:"text"}]}),e.push({"":"div","#":"onClickTime",">":[{"":"label",".":"pull-left",">":"Jump to video time: "},{"":"select","#":"timeInputSelect",">":[{"":"option",">":"-",selected:"true",value:"default"}]},{"":"input","#":"timeInput",".":"hide",type:"text"},{"":"div","#":"branchTimeWarning",".":"hide branch-time-warning",">":"This field is used in an experience and can only be edited there."}]}),z()&&!F()&&e.push(R),hapyak.Css360&&e.push(j),x.isProvisioned("API__ANNOTATION")&&e.push(M),(d=E.microTemplate(a,e)).rotateInputSelect&&((t=P.createElement("option")).innerHTML="Recenter",t.value="recenter",d.rotateInputSelect.appendChild(t)),w.forEach(u.popcorn.data.trackEvents.byStart,function(e){var t;if(!e._natives||e.annotationId===u.trackEvent.annotationId)return!1;(t=P.createElement("option")).innerHTML=C.toString(e.start)+" - "+E.getAnnotationMessage(e._natives.type,!0,e.customConfig,e),t.value="id="+e.annotationId,d.timeInputSelect.appendChild(t),d.rotateInputSelect&&e&&e.transform&&((t=P.createElement("option")).innerHTML=E.getAnnotationMessage(e._natives.type,!0,e.customConfig,e),t.value=e.annotationId,}),(t=P.createElement("option")).innerHTML="Custom time",t.value="customTime",d.timeInputSelect.appendChild(t),d.timeInputSelect.addEventListener("change",s),z()&&!F()&&d.branchInputSelect.addEventListener("change",function(){q(d,u.trackEvent),B(d)}),d.rotateInputSelect&&u.trackEvent&&u.trackEvent.rotateToAnnotation)for(var n=0,i=u.trackEvent.rotateToAnnotation;n<d.rotateInputSelect.options.length;n++)if(d.rotateInputSelect.options[n].value===i){d.rotateInputSelect.options[n].selected=!0;break}if(u.trackEvent.gotoTrack){d.timeInput.value=u.trackEvent.gotoTrack||"";for(var r=0,a=["default","customTime"],o=u.trackEvent.gotoTrack&&u.trackEvent.gotoTrack.split("#")[1]||"";r<d.timeInputSelect.options.length;r++)if(d.timeInputSelect.options[r].value===o){d.timeInputSelect.options[r].selected=!0;break}-1<a.indexOf(d.timeInputSelect.value)&&(d.timeInputSelect.value=o?"customTime":"default",o&&(-1===a.indexOf(o)?(d.timeInput.value=o,u.removeClass(d.timeInput,"hide")):d.timeInputSelect.firstChild.selected=!0))}z()&&!F()&&V(d,u.trackEvent),z()&&!F()&&u.trackEvent.goToVideo&&H(u,d),d.timeInputSelect.timeInput&&(d.timeInput.value=u.trackEvent.gotoTrack||""),d.onTimeJavascriptInput&&(d.onTimeJavascriptInput.value=u.trackEvent.onTime&&u.trackEvent.onTime.setVariables||"",d.onTimeJavascriptInput.value||(d.onTimeJavascriptInput.value=u.trackEvent.setVariables||"")),!z()&&u.trackEvent.goToVideo&&U(d),N(d,u.trackEvent),hapyak.message.addEventListener("playlistItemsChanged",function(){V(d)}),u.centerDialog()},!1),e};var t,n,O=function(e,t){return t.addonCommandData={},e.addonTypeInput&&e.addonTypeInput.value?t.addonTypeId=e.addonTypeInput.value:delete t.addonTypeId,e.commandInput&&e.commandInput.value?t.addonCommand=e.commandInput.value:delete t.addonCommand,e.addonCommandData&&w.forEach(e.addonCommandData.children,function(e){e.children[0]&&e.children[0].value&&e.children[1]&&e.children[1].value?t.addonCommandData[e.children[0].value]=e.children[1].value:e.children[1]&&e.children[1].value&&delete t.addonCommandData[e.children[0].value]}),t},M={"":"div",">":[{"":"label",".":"pull-left",">":"Addon Type"},{"":"input","#":"addonTypeInput",type:"text"},{"":"label",".":"pull-left",">":"Command"},{"":"input","#":"commandInput",type:"text"},{"":"label",".":"pull-left",">":"Command Data"},{"":"div","#":"addonCommandData",">":[]}]},N=function(e,t){if(e.addonTypeInput&&(e.addonTypeInput.value=t.addonTypeId||""),e.commandInput&&(e.commandInput.value=t.addonCommand||""),e.addonCommandData){for(var n in t.addonCommandData)e.addonCommandData.appendChild(c(n,t.addonCommandData[n]));e.addonCommandData.appendChild((i=e,r=P.createElement("div"),a=P.createElement("a"),r.setAttribute("class","materialize"),a.setAttribute("class","newPropertyButton waves-effect btn-flat bcov-button-flat"),a.innerHTML="Add new key/value pair",a.addEventListener("click",function(){i.addonCommandData.insertBefore(c("",""),r)}),r.appendChild(a),r))}var i,r,a},R={"":"div","#":"onclickBranch",">":[{"":"label",".":"pull-left",">":"Branch to video "},{"":"select","#":"branchInputSelect",">":[{"":"option",">":"-",selected:"true",value:"default"}]},{"":"div",".":"hapyak-branchtime-label hide",">":[{"":"label",".":"pull-left",">":"Time: "},{"":"input","#":"branchTimeInput",type:"text"}]}]},V=function(i){var e=a.getVideos(),t=P.createElement("option");i.branchInputSelect.innerHTML="",t.innerHTML="-",i.branchInputSelect.appendChild(t),e.forEach(function(e,t){var n;e.data.id!==a.currentVideo().data.id&&((n=P.createElement("option")).innerHTML=t+1+". "+e.data.project.data.title,n.value="id="+e.data.id,i.branchInputSelect.appendChild(n))})},j={"":"div","#":"rotateToAnnotationInput",">":[{"":"label","#":"onClickRotate",".":"pull-left",">":"Rotate to annotation: "},{"":"select","#":"rotateInputSelect",".":"pull-left",">":[{"":"option",selected:"true",value:"default",">":"-"}]}]};function H(e,t){for(var n=e.trackEvent.goToVideo||"",e=(e.trackEvent.gotoTrack,e.trackEvent.branchTimeInput),i=t.branchTimeInput,r=t.branchInputSelect,a=0;a<r.options.length;a++)if(r.options[a].value===n){r.options[a].selected=!0;break}"-"===r.options[a].value?(i.value="",i.parentNode.classList.add("hide")):(i.value=e||"",i.parentNode.classList.remove("hide")),B(t)}function q(e){var t=e.branchTimeInput;t.value="",e.branchInputSelect&&"-"!==e.branchInputSelect.value?t.parentNode.classList.remove("hide"):(t.parentNode.classList.add("hide"),B(e))}function z(){return _.getQueryParams(window.location.href).is_experience}function F(){var e=_.getQueryParams(window.location.href).experience_data;return"single video landing page"===JSON.parse(e).layout.type_name}function B(e){"-"===e.branchInputSelect.value?(e.timeInputSelect.value&&"customTime"===e.timeInputSelect.value&&e.timeInput.classList.remove("hide"),e.onClickTime.classList.remove("hide"),e.timeInputSelect.classList.remove("hide")):(e.onClickTime.classList.add("hide"),e.timeInput.classList.add("hide"),e.timeInputSelect.classList.add("hide"))}function U(e){e.branchTimeWarning.classList.remove("hide"),e.timeInputSelect.setAttribute("disabled",!0),e.timeInput.setAttribute("disabled",!0)}function c(e,t){var n=P.createElement("div"),i=(n.setAttribute("class","addonProperty"),P.createElement("input")),e=(i.setAttribute("class","addonPropertyKey"),i.setAttribute("type","text"),i.setAttribute("placeholder","Key"),i.setAttribute("value",e||""),P.createElement("input"));return e.setAttribute("class","addonPropertyValue"),e.setAttribute("type","text"),e.setAttribute("placeholder","Value"),e.setAttribute("value",t||""),n.appendChild(i),n.appendChild(e),n}function i(s,l){var n,c,r,d=!1,u=!1,p={},h={},a={},f=this,m={};function o(t){var n,i,r,e,a=t&&t._natives&&t._natives.type;function o(){var e=s.getTrackEvent(n)||t;i&&e._running&&d&&i.resize(),"function"==typeof r&&r(e)}a&&g[a]&&!u&&(n=t._id,c("edit",n)&&(t.compose&&"string"!=typeof t.compose&&delete t.compose,t.effect&&"string"!=typeof t.effect&&delete t.effect,(i=p[n])?i.container=t.container:(e=w.extend({},l),m[a]&&w.extend(e,m[a]),i=p[n]=new D(t,s,e,f),t._running&&d&&(h[n]=i).activate(),"function"==typeof i.editor._setup&&i.editor._setup.call(i,t)),(t=s.getTrackEvent(t._id)||i.trackEvent||t).onLoad!==o&&(r=t.onLoad,t.onLoad=o)))}function i(){s&&w.forEach(s.getTrackEvents(),o)}function v(n,e){var i,r;n.container&&n.container.parentNode&&(r=n._id,(i=L(n.container,[n.topContainer||l.topContainer||n.container.parentNode,n.editorContainer||l.editorContainer]))&&i.width&&i.height&&(i.right=i.left+i.width,i.bottom=i.top+i.height,w.forEach(e,function(e){var t;e.trackEvent._id!==r&&e.editContainer&&e.editContainer.offsetWidthorContainer,n.topContainer||l.topContainer||e.container.parentNode]),i.left<t.left+t.width&&i.right>t.left&&i.top<t.top+t.height&&i.bottom>t.top&&(e.editContainer.style.display="none"))})))}function e(){w.forEach(h,function(e){e.editing&&e.done()})}this.popcorn=s,this.exitAllQuickEditors=e,c="function"==typeof l.permission?l.permission:function(){return!0},(r=P.createElement("img")).src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",r.id="hapyak-quickedit-click-off-image",r.addEventListener("click",e,!1),s.on("trackadded",function(e){o(e.track)}),s.on("trackremoved",function(e){var t=e._id&&p[e._id];t&&!t.updating&&(t.teardown(),delete p[e._id])}),s.on("trackchange",function(e){e=e.id&&p[e.id];e&&e.resize()}),s.on("trackstart",function(e){var t,n,i,r=e.track,e=e._id;if(e&&(o(r),t=p[e]))if(c("edit",e)&&((h[e]=t).trackEvent=r,t.container=r.container,d&&t.activate()),t.editing){for(i in h)h.hasOwnProperty(i)&&(n=h[i]).editContainer&&(n.editContainer.style.display="");v(t.trackEvent,h)}else for(i in a)a.hasOwnProperty(i)&&v((n=a[i]).trackEvent,[t])}),s.on("trackend",function(e){var t,e=e._id;e&&((t=h[e])&&!t.updating&&t.deactivate()&&delete h[e],t&&t.editContainer&&(t.editContainer.style.display=""))}),this.activate=function(){var t=s.,function(e){e.trackEvent&&e.trackEvent._running&&t>=e.trackEvent.start&&t<e.trackEvent.end&&(h[e.trackEvent._id]=e).activate()})},this.deactivate=function(){d=!1,r&&r.parentNode&&r.parentNode.removeChild(r),w.forEach(p,function(e){e.deactivate(!0)})},this.disable=function(e){var t=p[e];t&&!t.updating&&(t.teardown(),delete p[e])},this.enable=function(e){p[e]||(e=s.getTrackEvent(e))&&o(e)},this.edit=function(e){e=p[e];if(!e)returnackEvent.start||s.currentTime()>=e.trackEvent.end)&&s.currentTime(e.trackEvene]&&p[e].editing&&(p[e].done(),p[e].cancelCreateDialog()):w.forEach(p,function(e){e.editing&&(e.done(g=function(e){var t=[];return e?p[e]&&p[e].editing:(w.forEach(p,function(e){e.editing&&t.push(e.trackEvent)}),t)},this.setting=function(t,n,i){var e=p[t];e?e.setting(n,i):(m[t]||(m[t]={}),m[t][n]=i,w.forEach(p,function(e){e.type===t&&e.setting(n,i)}))},this.preview=function(e,t){e=p[e];return!!e&&e.preview(t)},this.create=function(e,t,n){var i;return e&&(w.registryByName[e]||w.filterRoutes[e])&&c("create")&&((t=t?pyak.environment),isNaN(t.start)&&(t.start=0),(isNaN(t.end)||t.end<t.start)&&(t.end=t.start+3),(!(i=g[e])||!i.create||!1!==i.create.call(this,t,n))&&(s[e](t),s.getLastTrackEventId()))||!1},this.resize=function(){w.forEach(h,function(e){e.resize()})},s.on("resized",this.resize),this.destroy=function(){var e,t;for(e in f.done(),p)p.hasOwnProperty(e)&&f.disable(e);for(e in u=!0,0<=(t=b.indexOf(i))&&b.splice(t,1),delete y[s.id],n.destroy(),f)f.hasOwnProperty(e)&&"function"==typeof f[e]&&(f[e]=w.nop)},n=new I(this),this.on("edit",function(n,e){var t=s.media.parentNode,i=s.media.nextSibling||t.children[0];w.forEach(p,function(e,t){t!==n._id&&e.editing&&e.done()}),s.emit("clearactivepauses"),a[n._id]=e,v(n,h),"basic360"===e.type?r.style.display="none":(r.style.display="",r!==i&&t.insertBefore(r,i&&i.parentNode===t?i:null))},!0),this.on("save",function(){w.forEach(h,function(e){e.container&&e.container.parentNode&&(e.editContainer&&e.container.parentNode===e.editContainer.parentNode&&e.container.parentNode.insertBefore(e.editContainer,e.container.nextSibling||null),e.dragger&&e.dragContainer===e.container.par,e.container))})}),this.on("commit",function(e,t){e=p[e];e&&e.emit("commit",!1,t)}),this.on("done",function(e){delete a[e._id],r&&r.parentNode&&r.parentNode.removeChild(r),w.forEach(h,function(e){e.editContainer&&(e.editContainer.style.display="")})}),i(),b.push(i)}return D.prototype.cancelCreateDialog=function(){},D.prototype.editElement=function(e,t){this.editElements[t]=e},D.prototype.teardown=function(){this.deactivate(!0),this.editor._teardown&&this.editor._teardown.call(this,this.trackEvent),this.editContainer&&this.editContainer.parentNode&&this.editContainer.parentNode.removeChild(this.editContainer),this.eventHandler&&this.eventHandler.destroy(),this.touch&&(this.touch.remove(),delete this.touch),this.containerTouch&&(this.containerTouch.remove(),delete this.containerTouch),this.scaleResizers&&(w.forEach(this.scaleResizers,function(e){e.remove()}),delete this.scaleResizers),this.cancelCreateDialog(),delete this.dragger,delete this.editContainer},D.prototype.save=function(){this.popcorn.getTrackEvent(this.trackEvent._id)&&(this.quickEditor.emit("save",!0,this.trackEvent,this),this.updating=!0,"function"==typeof this.editor.save&&this.editor.save.call(this,this.trackEvent),this.popcorn[this.type](this.trackEvent._id,this.trackEvent),this.container=this.trackEvent.container,this.timeUpdate(),this.updating=!1,this.quickEditor.emit("save",!1,this.trackEvent,this))},D.prototype.remove=function(){this.deleted||(this.deleted=!0,this.popcorn.removeTrackEvent(this.trackEvent._id))},D.prototype.preview=function(e){e=this.editor.preview&&this.editor.preview.call(this,e)||this.container&&this.container.cloneNode&&this.container.cloneNode(!0);return e.style.position="",e.style.top="",e.style.left="",e.style.bottom="",e.style.right="",e.style.webkitTransform="",e.style.MozTransform="",e.style.oTransform="",e.style.transform="",e.style.webkitTransformOrigin="",e.style.MozTransformOrigin="",e.style.oTransformOrigin="",e.style.transformOrigin="",e},D.prototype.Touch=k,D.prototype.addClass=E.addClass,D.prototype.removeClass=E.removeClass,D.prototype.hasClass=E.hasClass,D.prototype.elementDimensions=L,D.prototype.translateDimensions=l,w.quickEdit=function(e,t){return!!e&&(y[e.id]||(y[e.id]=new i(e,t)),y[e.id])},w.quickEdit.Touch=k,w.quickEdit.addClass=D.prototype.addClass,w.quickEdit.removeClass=D.prototype.removeClass,w.quickEditor=function(e,t,n){(w.registryByName[e]||w.filterRoutes[e])&&(g[e]=e=t,"function"==typeof n&&(e.create=n),w.forEach(b,function(e){e()}))},e=P.createElement("x"),n=P.documentElement,A=!!e.style.hasOwnProperty("pointerEvents")&&(e.style.pointerEvents="auto",e.style.pointerEvents="x",n.appendChild(e),t=window.getComputedStyle&&"auto"===window.getComputedStyle(e,"").pointerEvents,n.removeChild(e),!!t),w.quickEdit,"lodash.noconflict","popcorn","popcorn.quickedit","popcorn.basic360"],function(h,f,e,t){"use strict";t.quickEditor("basic360",function(){var n,r,i,s=this,e=document.createElement("img");function a(e){e.stopImmediatePropagation(),e.preventDefault()}function o(){s.edit()}function t(e,t){var n=document.createElement("div");return n.innerHTML=e,n.className="popcorn-quickedit-textbutton","function"==typeof t&&n.addEventListener("click",t,!1),n}e.className="icon",e.width="25",e.style.display="block",e.src="/img/360_icon.png",this.editButton.appendChild(e),this.focus=function(){r&&"function"==typeof r.rotateToMe&&r.rotateToMe(!0)},e=[{label:"Undo Transform Change",direction:-1},{label:"Redo Transform Change",direction:1},{label:"Reset Transform",direction:1,reset:"reset"},{label:"Zero Transform",direction:1,reset:"zero"}],this.editContainer.insertBefore(t("360 Transform",function(){var e=JSON.parse(s.trackEvent.transform),t=document.createElement("div"),n=document.createElement("label"),i=document.createElement("input"),o=[],e=[{name:"Global Coordinates",values:[e[0],e[1],e[2]]},{name:"Local Position",values:[e[3],e[4],e[5]]},{name:"Local Rotation",values:[e[6],e[7],e[8]]},{name:"Local Scale",values:[e[9],e[10],e[11]]}];s.createDialog({target:s.dialogContainer,success:function(){var t=[];o.forEach(function(e){t.push(+e.value)}),s.trackEvent.rotateOnStart=i.checked,s.trackEvent.transform=JSON.stringify(t),s.save(),r&&"function"==typeof r.rotateToMe&&r.rotateToMe(!0)}}),e.forEach(function(r){var a=document.createElement("div"),e=document.createElement("strong");e.innerHTML=r.name,a.classList.add("hapyak-basic360-quickedit-transform-row"),a.appendChild(e),r.values.forEach(function(e,t){var n=document.createElement("label"),i=document.createElement("input");n.innerHTML=["x","y","z"][t]+":",i.value=e?Math.round(10*e)/10:0,i.type="number",i.step="0.1",2===t&&"Local Rotation"!==r.name&&(i.disabled="disabled",n.style.visibility="hidden"),o.push(i),n.appendChild(i),a.appendChild(n)}),t.appendChild(a)}),n.innerHTML="Rotate to me on start:",n.id="rotateOnStart",i.type="checkbox",i.checked=s.trackEvent.rotateOnStart,n.appendChild(i),t.appendChild(n),s.dialogElements.quickEditMain.appendChild(t),s.dialogElements.quickEditDialogTitle.innerHTML="360 Transform Values",s.centerDialog()}),this.pauseButton),this.editContainer.insertBefore(t("Content",function(){var i=document.createElement("div"),r=document.createElement("ul"),e=[{name:"hotspot",inputs:[{title:"Background Color",type:"color",prop:"background-color",default:"#000000"},{title:"Background Opacity",type:"range",attributes:{min:0,max:1,step:.01},prop:"opacity",default:.3}]},{name:"text",inputs:[{title:"Text",type:"text",prop:"text",default:"360 Text Annotation"},{title:"Background Color",type:"color",prop:"background-color",default:"#000000"},{title:"Background Opacity",type:"range",attributes:{min:0,max:1,step:.01},prop:"opacity",default:.3},{title:"Text Color",type:"color",prop:"color",default:"#ffffff"}]},{name:"image",inputs:[{title:"Upload",type:"file"},{title:"URL",type:"input",prop:"text"}]}];i.classList.add("materialize"),r.classList.add("tabs"),s.hotspotInputHandler=function(e,t){"function"==typeof t&&t({text:"","background-color":e[0].value,opacity:+e[1].value,color:""})},s.textInputHandler=function(e,t){"function"==typeof t&&t({text:e[0].value,"background-color":e[1].value,opacity:+e[2].value,color:e[3].value})},s.imageInputHandler=function(t,n){function i(e){"function"==typeof n&&n({text:e,preview:f.getImageName(e),"background-color":"",opacity:"",color:""})}0<t[0].files.length?f.uploadToS3(t[0].files,function(e){i(t[1].value=e)},"basic360"):i(t[1].value)},s.createDialog({target:s.dialogContainer,success:function(){var t,n,i;e.forEach(function(e){td("basic-360-input-"+e.name))&&(i=n.getElementsByTagName("input")),t.children[0].classList.contains("active")&&(s.trackEvent.inputType=e.name,s[e.name+"InputHandler"](i,function(e){for(var t in e)e.hasOwnProperty(t)&&(s.trackEvent[t]=e[t]);s.save()}))})}}),e.forEach(function(a){var e=document.createElement("li"),t=document.createElement("a"),o=document.createElement("div"),n="basic-360-input-"+a.name;e.className="tab col s3",e.id="tab-"+n,t.innerHTML=a.name,t.href="#"+n,o.id=n,o.className="basic-360-input-content-tab col s12",a.inputs.forEach(function(e){var t,n=document.createElement("label"),i=document.createElement("input"),r=e.prop;if(n.innerHTML=e.title,n.className="col s12",i.type=e.type,e.attributes)for(t in e.attributes)e.attributes.hasOwnProperty(t)&&i.setAttribute(t,e.attributes[t]);e.default&&(i.value=e.default),r&&s.trackEvent[r]&&("text"!==r||s.trackEvent.inputType===a.name)&&(i.value=r&&s.trackEvent[r]),n.appendChild(i),o.appendChild(n)}),s.trackEvent.inputType===a.name&&(t.classList.add("active"),o.classList.add("active")),e.appendChild(t),r.appendChild(e),i.appendChild(o)}),i.insertBefore(r,i.children[0]),s.dialogElements.quickEditMain.appendChild(i),s.dialogElements.quickEditDialogTitle.innerHTML="Content",$("ul.tabs").tabs()}),this.pauseButton);var l=s.createrentElement.parentElement.children,i=e.parentElement.children,r=0;r<n.length;r++)n[r]!==e.parentElement&&(n[r].style.display=t?"":"none");for(r=0;r<i.length;r++)i[r]!==e&&(i[r].style.display=t?"":"none")}function d(e){s.mouseDown=!0,s.mouseMoved=!1}function u(e){s.mouseDown&&(s.mouseMoved=!0),s.mouseDown=!1}function p(){s.mouseDown=!1,s.mouseMoved||s.quickEditor.exitAllQuickEditors()}return s.editContainer.insertBefore(l,s.pauseButton),e.forEach(function(e){s.editContainer.insertBefore(t(e.label,function(){r&&"function"==typeof r.setPositionFromHistory&&(r.setPositionFromHistory(e.direction,e.reset),r&&"function"==typeof r.rotateToMe&&r.rotateToMe(!0))}),s.pauseButton)}),this.editContainer.style.position="static",{activate:function(e){e.container&&(e.container.addEventListener("dblclick",o,!1),e.container.addEventListener("click",a,!1))},deactivate:function(){s.container&&(s.container.removeEventListener("dblclick",o,!1),s.container.removeEventListener("click",a,!1))},start:function(e){var t;if(!n||!r){if(t=s.popcorn.video.parentNode.getElementsByTagName("VIDEO")[0],!(n=hapyak.Css360&&hapyak.Css360.getSphereByContainerId(h.dotget(t,"dataset.videoId"))))return;r=n.addedDOMElementsById[e.id],i=h.dotget(n,"renderer.context.canvas")}i&&(s.mouseMoved=!1,s.mouseDown=!1,i.addEventListener("mousedown",d,!1),i.addEventListener("mousemove",u,!1),i.addEventListener("click",p,!1)),r&&"function"==typeof r.toggleControllers&&r.toggleControllers(!0),e.container&&(e.container.removeEventListener("dblclick",o,!1),e.container.removeEventListener("click",a,!1)),s.focus(),c(s.editContainer,!1)},end:function(e){r&&"function"==typeof r.toggleControllers&&r.toggleControllers(!1),i&&(i.removeEventListener("mousedown",d,!1),i.removeEventListener("mousemove",u,!1),i.removeEventListener("click",p,!1)),e.container&&(e.container.addEventListener("dblclick",o,!1),e.container.addEventListener("click",a,!1)),c(s.editContainer,!0)}}})}),define("popcorn.quickedit.contents",["jquery.noconflict","utils","popcorn","popcorn.quickedit","popcorn.contents"],function(f,m,v){"use strict";var g=window.document,y=[{"":"section",">":[{"":"label",">":"Styles","#":"stylesLabel"},{"":"select","#":"styles",">":[{"":"option",value:"legacy",">":"Fullscreen"},{"":"option",value:"column1",">":"Column"}]},{"":"label",">":"Initial State","#":"stateslabel"},{"":"select","#":"states",">":[{"":"option",value:"expanded",">":"expanded"},{"":"option",value:"collapsed",">":"collapsed"}]},{"":"label",">":"Position","#":"positionLabel"},{"":"select","#":"position",">":[{"":"option",value:"top-left",">":"top-left"},{"":"option",value:"top-right",">":"top-right"},{"":"option",value:"bottom-left",">":"bottom-left"},{"":"option",value:"bottom-right",">":"bottom-right"}]}]}];v.quickEditor("contents",function(){var t,n,e,i,r,o,s=this,a=g.createElement("div");function l(){s.resize()}function c(){var e,t=o;t&&(t.blur(),""===(e=(e=""===(e=s.trackEvent.title)||e?e:"Chapters").trim())&&s.addClass(t,"show-icon"),e!==t.textContent.trim()&&(s.trackEvent.title=t.textContent,t.innerHTML="",s.save()))}function d(e){var t=o,n=t.textContent.trim(),i=n.length,r=!1,a="";window.getSelection?a=window.getSelection().toString():g.selection&&"Text"===g.selection.type&&(a=g.selection.createRange().text),t&&(-1===[16,17,18,20].indexOf(e.keyCode)&&(-1===[46,8].indexOf(e.keyCode)?i++:(n.length===a.length&&(r=!0),i--)),0<i&&!r?s.removeClass(t,"show-icon"):s.addClass(t,"show-icon"),a.length&&(i-=a.length),13===e.keyCode&&(e.preventDefault(),c.call(t)),30<i&&-1===[46,8,16,17,18,20,37,38,39,40].indexOf(e.keyCode)&&e.preventDefault())}function u(e){s.hasClass(s.trackEvent.container,"expanded")||(e.preventDefaation())}function p(e){var t=e?"addEventListener":"removeEventListener";(o=f(s.trackEvent.container).find(".popcorn-contents-title:first").get(0))&&(o.contentEditable=e,o[t]("blur",c,!1),o[t]("mousedown",u,!1),o[t]("keydown",d,!1))}function h(){l()}return this.nudgeButton.style.display="none",this.pauseButton.style.display="none",this.previewButton.style.display="none",this.setDuration=function(e){var t=!1;e=parseFloat(e),(isNaN(e)||e<.5||(e!==this.trackEvent.duration&&(t=!0),this.trackEvent.duration=e,t))&&this.timeUpdate()},this.timeUpdate=function(){var e=this.trackEvent.duration,e=Math.round(10*e)/10;this.durationDisplay.lastChild.innerHTML=e+" s"},a.className="hapyak-mode-buttons",r=m.microTemplate(a,y),n=r.styles,e=r.position,i=r.states,v.forEach(e.childNodes,function(e){e.value===s.trackEvent.position&&e.setAttribute("selected",!0)}),s.trackEvent.expandedState||(s.trackEvent.expandedState="collapsed"),v.forEach(n.childNodes,function(e){e.value===s.trackEvent.mode&&e.setAttribute("selected",!0)}),n.addEventListener("change",function(){var e=n.value;s.trackEvent.mode!==e&&(s.trackEvent.mode=e,s.save(),l())},!1),v.forEach(i.childNodes,function(e){e.value===s.trackEvent.expandedState&&e.setAttribute("selected",!0)}),i.addEventListener("change",function(){s.trackEvent.expandedState=i.value,s.save(),l()},!1),e.addEventListener("change",function(){s.trackEvent.position=e.value,s.save(),l()},!1),s.moreButtons(a,!0),{activate:function(e){s.trackEvent.onResize||(s.trackEvent.onResize=[]),-1===s.trackEvent.onResize.indexOf(l)&&s.trackEvent.onResize.push(l),e.container&&(t||(t=e.container.querySelector(".popcorn-bookmark-close"))&&t.addEventListener("click",function(){s.editContainer.style.display="none",s.done()},!1),s.editContainer.style.display=""),s.trackEvent.container.addEventListener("click",h,!1)},resize:function(){var e;if(this.editContainer){if(p(s.hasClass(s.trackEvent.container,"editing")),e=this.editContainer.style,s.hasClass(s.trackEvent.container,"expanded"))return s.hasClass(s.trackEvent.container,"hapyak-contents-legacy")?(e.webkitTransformOrigin=e.mozTransformOrigin=e.khtmlTransformOrigin=e.msTransformOrigin=e.oTransformOrigin=e.transformOrigin="top right",e.left="",e.right="25px",e.top="100px"):s.hasClass(s.trackEvent.container,"hapyak-contents-column1")&&(s.trackEvent.position&&"top-left"!==s.trackEvent.position&&"bottom-left"!==s.trackEvent.position?"top-right"!==s.trackEvent.position&&"bottom-right"!==s.trackEvent.position||(e.webkitTransformOrigin=e.mozTransformOrigin=e.khtmlTransformOrigin=e.msTransformOrigin=e.oTransformOrigin=e.transformOrigin="top right",e.left="",e.right="34%"):(e.webkitTransformOrigin=e.mozTransformOrigin=e.khtmlTransformOrigin=e.msTransformOrigin=e.oTransformOrigin=e.transformOrigin="",e.left="34%",e.right=""),e.top="64px"),!1;e.webkitTransformOrigin=e.mozTransformOrigin=e.khtmlTransformOrigin=e.msTransformOrigin=e.oTransformOrigin=e.transformOrigin="",e.left=e.right=e.top=""}},start:function(){var e,t,n;s.addClass(s.trackEvent.container,"editing"),p(!0),s.hasClass(s.trackEvent.container,"expanded")&&(n=o)&&(g.body.createTextRange?((e=g.body.createTextRange()).moveToElementText(n),e.select()):window.getSelection&&(t=window.getSelection(),(e=g.createRange()).selectNodeContents(n),t.removeAllRanges(),t.addRange(e)))},end:function(){s.removeClass(s.trackEvent.container,"editing"),p(!1)},deactivate:function(){var e;s.trackEvent.onResize&&0<=(e=s.trackEvent.onResize.indexOf(l))&&s.trackEvent.onResize.splice(e,1),o&&c.call(o),s.trackEvent.container.removeEventListener("click",h,!1)}}})}),define("utils.gettext",[],function(){"use strict";var s={noscript:"noscript",script:"script"};return function e(t){for(var n,i,r=[],a=t.childNodes,o=0;o<a.length;o++)1!==(n=a[o]).nodeType||s[n.tagName.toLowerCase()]?3===n.nodeType&&r.push(n.nodeValue):"none"===(i=(i=window.getComputedStyle(n,null))&&i.getPropertyValue("display"))||n.hidden||(("BR"===n.tagName||"block"===i&&r.length&&"\n"!==r[r.length-1])&&r.push("\n"),"A"===n.tagName&&/^https?:\/\//i.test(n.getAttribute("href"))?r.push(n.getAttribute("href")):r.push(e(n)),"block"===i&&r.length&&"\n"!==r[r.length-1]&&r.push("\n"));return r.join("")}}),define("popcorn.quickedit.bookmark",["utils","utils.gettext","vendor/i18n!nls/ui","popcorn","popcorn.quickedit","popcorn.bookmark","logging"],function(r,d,e,u){"use strict";var p=window.document,h=[{"":"section",">":[{"":"label",">":"Styles","#":"stylesLabel"},{"":"select","#":"styles",">":[{"":"option",value:"bookmark",">":"Bookmark"},{"":"option",value:"title",">":"Title Card"},{"":"option",value:"minimal",">":"Minimal"},{"":"option",value:"invisible",">":"Invisible"}]}]}],f=e.overlay.action.chapter_text;u.quickEditor("bookmark",function(){var a,e,o,t,n=this;function i(e){var t,n;if(a.innerHTML="",e)for(t=e.split(/[\n\r]/),n=0;n<t.length;n++)n&&a.appendChild(p.createElement("br")),a.appendChild(p.createTextNode(t[n]))}function s(){!a.firstChild||3===a.firstChild.nodeType&&1===a.childNodes.length||(n.trackEvent.text=d(a),i(n.trackEvent.text),n.resize())}function l(e){27!==e.which&&(e.shiftKey||10!==e.which&&13!==e.which)||(e.cancelBubble=!0,e.preventDefault(),n.done())}function c(){n.edit()}return(e=p.createElement("div")).className="hapyak-pop-mode-buttons",(o=r.microTemplate(e,h)).styles.id=u.guid("styles"),o.stylesLabel.setAttribute("for",o.styles.id),o.styles.addEventListener("change",function(){var e=o.styles.value;n.trackEvent.mode!==e&&(n.trackEvent.mode=e,n.save(),n.resize())},!1),n.moreButtons([e],!0),n.editContainer.insertBefore(n.createTextButton({title:f.title,value:function(){return n.trackEvent.text},callbacks:{success:functmoreButtonsContainer),{activate:function(e){e.container&&(e.container.addEventListener("dblclick",c,!1),t||(t=e.container.querySelector(".popcorn-bookmark-close"))&&t.addEventListener("click",function(){n.editContainer.style.display="none",n.done()},!1),n.editContainer.style.display="")},start:function(t){var e,n,i=this;function r(e){e&&(t.url=e,i.save())}if(u.forEach(i.popcorn.data.running.bookmark,function(e){e.dataId!==i.trackEvent.id&&i.removeClass(e.container,"active")}),t.container){t.container.removeEventListener("dblclick",c,!1),a=t.container.firstChild.firstChild;try{a.contentEditable="plaintext-only"}catch(e){}"plaintext-only"!==a.contentEditable&&(a.contentEditable=!0),a.addEventListener("keypress",l,!0),a.addEventListener("blur",s,!1),a.focus(),(e=p.createRange()).selectNodeContents(a),(n=window.getSelection()).removeAllRanges(),n.addRange(e),this.settings.boomarkUrl?r(this.settings.boomarkUrl):this.on("bookmarkUrl",r),o.styles.value=i.trackEvent.mode,o.styles.selectedIndex<0&&(o.styles.value="bookmark")}},resize:function(){var e,t=this.trackEvent,n=this.editContainer.style;if("title"===t.mode)return e=this.editContainer.parentNode,n.webkitTransformOrigin="top right",n.mozTransformOrigin="top right",n.khtmlTransformOrigin="top right",n.msTransformOrigin="top right",n.oTransformOrigin="top right",n.transformOrigin="top right",n.left="auto",n.right="25px",n.top="100px",e&&(t.container.nextSibling?e.insertBefore(this.editContainer,t.container.nextSibling):e.appendChild(this.editzTransformOrigin="",n.khtmlTransformOrigin="",n.msTransformOrigin="",n.oTransformOrigin="",n.transformOrigin="",n.right=""},end:function(e){var t=0;e.container&&(u.forEach(n.popcorn.data.running.bookmark,function(e){n.addClass(e.container,"active")}),(a=this.container.firstChild.firstChild).contentEditable=!1,a.removeEventListener("keypress",l,!0),a.removeEventListener("blur",s,!1),e.text=d(a).trim(),u.forEach(e.text.split(/[\n\r\s\t ]+/),function(e){2<e.length&&t++}),e._duration||(e.end=e.start+Math.min(10,Math.max(3,.5*t))),e.container.addEventListener("dblclick",c,!1))},deactivate:function(){n.container&&n.container.removeEventListener("dblclick",c,!1)}}})}),define("popcorn.quickedit.drawing",["popcorn","popcorn.quickedit","popcorn.drawing","logging"],function(C){"use strict";var _,T=window.document;function S(e,t,n){var i,r,a,o,s,l=e.canvas.width,c=e.canvas.height,d=t.width||e.canvas.width,u=t.height||e.canvas.height,p=1,h=0,f=t.paths;for(e.clearRect(0,0,e.canvas.width,e.canvas.height),f&&f.length&&(o=f[f.length-1].points)&&o.length&&(p=o[o.length-1].t||1),i=0;i<f.length;i++)if(1<(o=(a=f[i]).points).length){if(((s=o[0]).t<h||!s.t)&&(s.t=h),h=s.t,p=Math.max(p,h),s.t/p>n)break;for(e.strokeStyle=a.color||t.color||"white",e.lineWidth=Math.max(1,(a.lineWidth||t.stroke||5)*l/d),e.shadowOffsetX=a.shadowOffsetX,e.shadowOffsetY=a.shadowOffsetY,e.shadowBlur=a.shadowBlur,e.shadowColor=a.shadowColor,e.beginPath(),e.moveTo(s.x*l/d,s.y*c/u),r=1;r<o.length&&(((s=o[r]).t<h||!s.t)&&(s.t=h),h=s.t,p=Math.max(p,h),!(s.t/p>n));r++)e.lineTo(s.x*l/d,s.y*c/u);e.stroke()}}function A(e,t){return e.trackEvent.start===t.trackEvent.start?e.trackEvent.end-t.trackEvent.end:e.trackEvent.start-t.trackEvent.start}C.quickEditor("drawing",function(l){var t,e,n,c,i,r,a,o,d=this,u=0,p="#3996f0",h=3,f="#FFFFFF",m=0,v=0,g=0;function y(){S(i,l.drawing,1),d.trackEvckEvent.drawing.paths&&d.trackEvent.drawing.paths.length?(d.removeClass(d.undoButton,"disabled"),d.removeClass(d.clearButton,"disabled")):(d.addClass(d.undoButton,"disabled"),d.addClass(d.clearButton,"disabled"))}function s(){var o;function s(){u++}d.addClass(c,"drawing"),a=a||new d.Touch(c,function(e,t,n){var i,r,a;for(s(),i=t-c.clientLeft-c.offsetLeft,r=n-c.clientTop-c.offsetTop,a=c.offsetParent;a&&"BODY"!==a.nodeName;)i-=a.clientLeft+a.offsetLeft,r-=a.clientTop+a.offsetTop,a=a.offsetParent;t=d.elementDimensions(c,d.settings.editorContainer||d.container.parentNode),i*=(n=d.trackEvent.drawing).width/(t.width||c.width),r*=n.height/(t.height||c.height),o={color:p,lineWidth:h,shadowColor:f,shadowBlur:m,shadowOffsetY:v,shadowOffsetX:g,points:[{x:i,y:r,t:u}]},l.drawing.paths.push(o),y()},function(e,t,n){var i,r,a;for(s(),i=t-c.clientLeft-c.offsetLeft,r=n-c.clientTop-c.offsetTop,a=c.offsetParent;a&&"BODY"!==a.nodeName;)i-=a.clientLeft+a.offsetLeft,r-=a.clienrent;t=d.elementDimensions(c,d.settings.editorContainer||d.container.parentNode),i*=(n=d.trackEvent.drawing).width/(t.width||c.width),r*=n.height/(t.height||c.height),o.points.push({x:i,y:r,t:u}),l.drawing.maxTime=u,y()},function(){S(n,l.drawing,1)})}function b(e){var t=T.getElementById(e),n=d.colorButton.children,i=d.penButton.querySelector("span > img.selected").id||"hapyak-pen-thin";C.forEach(n,w),d.addClass(t,"selected"),p="hapyak-pen-highlight"===i?e+"80":e}function w(e){d.removeClass(e,"selected")}function E(e){var t=T.getElementById("hapyak-pen-"+e),n=d.penButton.querySelectorAll("span > img"),i={thin:{lineWidth:3,shadowColor:"#FFFFFF",shadowBlur:0},thick:{lineWidth:10,shadowColor:"#FFFFFF",:"#FFFFFF",shadowBlur:20},highlight:{lineWidth:30,shadowColor:"#FFFFFF",shadowBlur:0}}[e];i&&(C.forEach(n,k),d.addClass(t,"selected"),p="highlight"===e?p+"80":p,h=i.lineWidth,f=i.shadowColor,m=i.shadowBlur)}function k(e){d.removeClass(e,"selected")}function x(){!r&&d.trackEvent.container&&(r=l.container.firstChild,l.drawing.width&&l.drawing.height||(l.drawing.width=960,l.drawing.height=960*r.height/r.width),c.width=r.width,c.height=r.height,e.height=60*r.height/r.width,S(n=e.getContext("2d"),l.drawing,1))}if(l.target&&l.target.tagName?t=l.target:l.container&&l.container.parentNode&&(t=l.container.parentNode),t&&(c=T.createElement("canvas"))&&(i=c.getContext("2d")))return _?(_.push(this),_.sort(A)):_=[this],this.editContainer.style.position="static",this.addClass(c,"pqe-drawing-editing"),l.drawing||(l.drawing={paths:[]}),c.style.cssText="width: 100%; position: absolute; top: 0; left: 0;",(e=T.createElement("canvas")).width=60,this.editButton.appendChild(e),x(),this.penButton=T.createElement("div"),this.addClass(this.penButton,"popcorn-quickedit-drawing-penbutton"),C.forEach(["thin","thick","glow","highlight"],function(e){var t=T.createElement("span"),n=T.createElement("img");n.src="/img/"+e+".png",n.style.cssText="width: 100%; height: 100%; display: inline-block;",n.id="hapyak-pen-"+e,t.addEventListener("click",function(){E(e)},!1),t.appendChild(n),d.penButton.appendChild(t)}),this.colorButton=T.createElement("div"),this.addClass(this.colorButton,"popcorn-quickedit-drawing-colorbutton"),C.forEach(["#3996f0","#6fc04f","#fdcc5c","#fd8d32","#ed4956","#d10768","#a305ba","#000000"],function(e){var t=T.createElement("span"),n=T.createElement("img");t.style.backgroundColor=e,t.addEventListener("click",function(){b(e)},!1),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",n.style.cssText="width: 100%; height: 100%; display: inline-block;",t.setAttribute("id",e),t.appendChild(n),d.colorButton.appendChild(t)}),this.undoButton=T.createElement("div"),this.undoButton.innerHTML="Undo",this.undoButton.addEventListener("click",function(){var e,t=l.drawing&&l.drawing.paths;if(t&&t.length){for(;t.pop(),(e=t[t.length-1])&&e.points.length<2;);u=t.length?e.points[e.points.length-1].t:0,l.drawing.maxTime=u,y()}},!1),this.clearButton=T.createElement("div"),this.clearButton.innerHTML="Clear",this.clearButton.addEventListener("click",function(){var e=l.drawing&&l.drawing.paths;e&&e.length&&(e.splice(0),u=0,l.drawing.maxTime=u,y())},!1),d.preconditionButton&&d.moreButtons([],!0),o=this.moreButtonsContainer||this.previewButton,this.editContainer.insertBefore(this.penButton,o),this.edsertBefore(this.colorButton,o),this.editContainer.insertBefore(this.undoButton,o),this.editContainer.insertBefore(this.clearButton,o),d.moreButtons([],!0),{_setup:function(e){(e=this.popcorn.getTrackEvent(e._id)||e).onStart||(e.onStart=function(){0})},activate:function(){var e,t;for(l=this.trackEvent,e=0;e<_.length;e++)(t=_[e]).active&&t.settings.editorContainer.appendChild(t.editContainer);return x(),E("thin"),b("#3996f0"),!1},start:function(e){this.trackEvent,s(),this.addClass(t,"popcorn-quickedit-drawing-active"),this.addClass(this.editContainer,"pqe-drawing-editing"),r.style.display="none",t.insertBefore(c,this.container),y()},end:function(e){d.removeClass(c,"drawing"),a&&(a.remove(),a=null),this.removeClass(t,"popcorn-quickedit-drawing-active"),this.removeClass(this.editContainer,"pqe-drawing-editing"),r.style.display="",c.parentNode&&c.parentNode.removeChild(c),e._duration||(e.end=e.start+(e.pause?.5:3))},_teardown:function(){var e=_.indexOf(this);_.splice(e,1)},preview:function(){},resize:!1}})}),define("popcorn.quickedit.hotlink",["require","promise!configuration","logging","utils","utils.parsecolor","popcorn","popcorn.quickedit","popcorn.hotlink"],function(e,f,t,m,v,n){"use strict";n.quickEditor("hotlink",function(t){var i,e,n,r,a,o,s,l=this,c=document.createElement("div"),d=document.createElement("div"),u=[];function p(){var e=i.opacityInput.value,t=i.opacityErrorElement;e<0||1<e?(l.dialogElements.dialogSubmitButton.setAttribute("disabled",!0),m.removeClass(t,"hide-quickedit-error"),m.addClass(t,"show-quickedit-error")):(l.dialogElements.dialogSubmitButton.removeAttribute("disabled"),l.dialogElements.dialogSubmitButton.disabled="",m.addClass(t,"hide-quickedit-error"),m.removeClass(t,"show-quickedit-error"),i.colorPreview.style.opacity=e)}function h(){r&&(a?r.setRgb(a):r.setHsv({h:220,s:1,v:1}))}return(s=document.createElement("input")).setAttribute("type","range"),s=s.type,i=m.microTemplate(c,[{"#":"colorPickerContainer",">":[{"#":"colorPreviewContainer",">":{"#":"colorPreview"}},{"":"label",".":"push-left",">":"Color:&nbsp;"},{"#":"colorPicker",".":"push-left"},{"":"label",".":"push-left",">":"Opacity:&nbsp;",style:"clear: left"},{"":"span","#":"opacityErrorElement",">":"Opacity must be between 0 and 1.",".":"hapyak-quickedit-error hide-quickedit-error"},{"":"input","#":"opacityInput",min:"0",max:"1",step:"0.01",type:s}]}]),l.addClass(d,"modal-hotlinktext"),e=m.microTemplate(d,[{"":"div","#":"hotlinkText",">":[{"":"label",".":"pull-left",">":"Text: "},{"":"textarea","#":"textInput",rows:2}]},{"":"div","#":"hotlinkPosition",">":[{"":"label",".":"pull-left",">":"Position: "},{"":"select","#":"textPosition",">":[{"":"option",value:"top",">":"Above"},{"":"option",value:"middle",">":"Center"},{"":"option",value:"bottom",">":"Below"}]}]},{"":"div","#":"hotlinkColor",">":[{"":"label",".":"pull-left",">":"Color: "},{"":"select","#":"textColor",">":[{"":"option",value:"black",">":"Black"},{"":"option",value:"white",">":"White"}]}]}]),(s=document.createElement("div")).innerHTML="Styles",s.addEventListener("click",function(){r?h():irequire(["player.colorpicker"],function(e){r=new e(i.colorPicker,function(e,t,n){i.colorPreview.style.backgroundColor=e,a=n}),h()}),l.createDialog({target:l.dialogContainer,success:function(){a&&(a.a=parseFloat(i.opacityInput.value),l.trackEvent.backgroundColor="rgba("+a.r+", "+a.g+", "+a.b+", "+a.a+")"),l.editContainer.style.display="",l.dragger&&(l.dragger.style.display=""),l.save()}}),l.dialogElements.quickEditDialogTitle.innerHTML="HotLink Color",d.parentNode===l.dialogElements.quickEditMain&&l.dialogElements.quickEditMain.removeChild(d),l.dialogElements.quickEditMain.appendChild(c),i.opacityInput.value=a&&!isNaN(a.a)?a.a:1,p(),l.centerDialog()},!1),u.push(s),(s=document.createElement("div")).innerHTML="Editor",s.addEventListener("click",function(){l.createDialog({target:l.dialogContainer,success:function(){l.trackEvent.text=e.textInput.value||void 0,l.trackEvent.textPosition=e.textPosition.value,l.trackEvent.color=e.textColor.value,l.save()}}),l.dialogElements.quickEditDialogTitle.innerHTML="Text",c.parentNode===l.dialogElements.quickEditMain&&l.dialogElements.quickEditMain.removeChild(c),l.dialogElements.quickEditMain.appendChild(d),e.textInput.value=l.trackEvent.text||"",e.textPosition.value=l.trackEvent.textPosition||"middle",e.textColor.value=l.trackEvent.color||"black",l.centerDialog()},!1),n=l.createOnClickButton(),a=v(l.trackEvent.backgroundColor),i.opacityInput.addEventListener("change",p,!1),i.opacityInput.addEventListener("input",p,!1),f.player.gates&&((o=document.createElement("div")).innerHTML=l.trackEvent.gate?"Gate: Y":"Gate: N",o.addEventListener("click",function(){l.trackEvent.gate=!l.trackEvent.gate,l.trackEvent.gateAtEnd=!0,o.innerHTML=l.trackEvent.gate?"Gate: Y":"Gate: N",l.trackEvent.gate?l.addClass(l.trackEvent.container,"hapyak-action-gate"):l.removeClass(l.trackEvent.container,"hapyak-action-gate"),l.save()},!1),u.push(o)),l.moreButtons(u,!0),l.editContainer.insertBefore(s,l.moreButtonsContainer),l.editContainer.insertBefore(n,l.moreButtonsContainer),{activate:function(e){this.draggable({dragContainer:!0,scale:function(e,t,n,i){var r=0;!l.trackEvent.text||"top"!==l.trackEvent.textPosition&&"bottom"!==l.trackEvent.textPosition||(r=100*l.trackEvent.container.querySelector(".popcorn-hotlink-text").offsetHeight/l.trackEvent.container.parentNode.offsetHeight),i=t+i-(t=Math.max("top"===l.trackEvent.textPosition?r:0,t)),i=Math.min(100-t-("bottom"===l.trackEvent.textPosition?r:0),i),l.trackEvent.width=n+"%",l.trackEvent.height=i+"%",l.trackEvent.top=t+"%",l.trackEvent.left=e+"%",l.trackEvent.container.style.width=l.trackEvent.width,l.trackEvent.container.style.height=i+"%",l.trackEvent.container.style.left=e+"%",l.trackEvent.container.style.top=t+"%",l.resize()},move:function(e,t){var n,i=l.trackEvent.container.parentNode;if(l.trackEvent.text&&("top"===l.trackEvent.textPosition||"bottom"===l.trackEvent.textPosition))return n=100*l.trackEvent.container.querySelector(".popcorn-hotlink-text").offsetHeight/i.offsetHeight,"top"===l.trackEvent.textPosition?t=Math.max(n,t):"bottom"===l.trackEvent.textPosition&&(i=100*l.trackEvent.container.offsetHeight/i.offsetHeight,t=Math.min(t,100-n-i)),[e,t]}})},start:function(){var e;l.resize(),t.onClick||!1===l.popcorn.options.autoEditDialog||((e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,0,0ne("popcorn.quickedit.image",["promise!configuration","logging","utils","popcorn","popcorn.quickedit","popcorn.image"],function(C,_,T,e){"use strict";var t,S=window.document,n=window.Blob,i=n&&function(){try{return Boolean(new n)}catch(e){return!1}}(),r=(i&&window.Uint8Array&&function(){try{new n([new Uint8Array(100)]).size}catch(e){return}}(),window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder),A=((t=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype).toBlob||t.mozGetAsFile||(i||r)&&window.atob&&window.ArrayBuffer&&window.Uint8Array,window.FileReader?{"":"input","#":"fileInput",type:"file",accept:"image/*"}:[{"":"form","#":"fileInputForm",method:"post",enctype:"multipart/form-data",target:"file-input-iframe",">":[{"":"input","#":"fileInput",type:"file",name:"file",accept:"image/*"}]},{"":"iframe","#":"fileInputIframe",name:"file-input-iframe",style:"display: none;"}]);e.quickEditor("image",function(e){var l,n,t,b=this,w=0,E=[],i=[],k=b.settings.baseWidth,x=k*b.container.parentNode.offsetHeight/b.container.parentNode.offsetWidth;function r(){b.edit()}function a(){var o,s,l,n,i,r,a,c,d,u={},p={},e=[{id:"url",title:"URL",icon:"ss-link",template:[{"":"label",".":"pull-left",">":"URL: "},{"":"input","#":"urlInput",type:"text"},"&nbsp;",{"":"button",">":"Show","#":"showButton",".":"hapyak-show-button btn"},{"":"span","#":"errorMessage",".":"hapyak-quickedit-error hide-quickedit-error",">":"</br>It looks like we can't load this image, please try different one."}],callback:function(){var e=a;a="url",s=b.dialogElements.urlInput.value,b.dialogElements.dialogSubmitButton.style.display="none","url"!==e&&v(s)}},{id:"preview",title:"Preview",template:[{"#":"quickEditPreviewContainer"},{"#":"previewRightPanel",".":"hapyak-right-panel"}],callback:function(){b.dialogElements.tabs.pElements.dialogSubmitButton.style.display=""}}];function t(e,t){var n;(i=window.URL||window.webKitURL)&&i.createObjectURL?(n=i.createObjectURL(e),t(n||!1),E.push(n)):window.FileReader?((i=new window.FileReader).onload=function(e){t(e.target.result)},i.readAsDataURL(e)):t(!1)}function h(){for(;E.length;)window.URL?window.URL.revokeObjectURL(E.pop()):window.webkitURL&&window.webkitURL.revokeObjectURL(E.pop())}function f(){var e=b.dialogElements.quickEditPreviewContainer,t=e.firstChild;l=!1,delete u.width,delete u.height,b.dialogElements.dialogSubmitButton.disabled=!0,b.dialogElements.tabs.preview.style.display="none",t&&"IMG"===t.tagName&&e.removeChild(t),c="",b.dialogElements.quickEditImagePreview=null,b.selectDialogTab(a)}function m(i,r){var a;async function t(e){var t={folder:"overlay_images",make_unique:!0},n=`${hapyak.dataURI}/v1/accounts/${hapyak.accountId}/presigned_urls`;return t.filename=function(){if(i.file&&i.file.name)return i.file.name.replace(/[^a-zA-Z0-9.]/g,"_")}(),(await(await fetch(n,{method:"POST",headers:e,body:JSON.stringify(t)})).json()).result.data.url}d&&(w++,hapyak.fetchAuthHeader().then(e=>{if(e){const n={"Content-Type":"application/json"};e.forEach((e,t)=>{n[""+t]=e}),t(n).then(t=>{d=t,async function(e,t){return await fetch(t,{method:"PUT",headers:{"Content-Type":""+e.type},body:e})}(i.file,t).then(e=>{200!==e.status||a||(_.info("Put image pr("?")[0],width:u.width,height:u.height}},r(e))}).catch(e=>{console.log("Error while putting the image on s3")})}).catch(e=>{console.log("Error while obtaining s3 pre-signed URL")})}}).catch(e=>{console.log("Error while obtaining auth token header")}))}function v(t,i){var r,e;function n(){var e,t,n;(p[r.src]=r).src===c&&(e=r,t=b.dialogElements.quickEditPreviewContainer,(n=t.firstChild)&&"IMG"===n.tagName&&t.removeChild(n),t.insertBefore(e,t.firstChild),b.dialogElements.quickEditImagePreview=e,l=!0,d&&(o.dialogSubmitButton.disabled=!1),u.width=r.naturalWidth,u.height=r.naturalHeight,b.dialogElements.quickEditImagePreview.style.display="","function"==typeof i&&i(s,u),b.centerDialog(),b.resize())}function a(e){T.removeClass(o.errorMessage,"hide-quickedit-error"),_.error("Error loading preview for image: ",e),f()}c!==t&&(f(),t?(r=p[c=t])||(o=b.dialogElements,r=S.createElement("img"),t.match(/^https?:\/\//)&&(r.crossOrigin="anonymous"),r.src=t,r.naturalWidth)?(o.tabs.preview.style.display="",n()):-1<(e=t).indexOf("{{")&&-1<e.indexOf("}}")?(l=!0,n()):(r.addEventListener("load",n,!1),r.addEventListener("error",function(e){if(r.crossOrigin)return(r=S.createElement("img")).src=t,r.naturalWidth?void n():(r.addEventListener("load",n,!1),void r.addEventListener("error",a,!1));a(e)},!1)):c="")}function g(e){(d=e)&&b.dialogElements&&(n&&l&&(b.dialogElements.dialogSubmitButton.disabled=!1),b.dialogElements.fileInputForm&&b.dialogElements.fileInputForm.setAttribute("action",d))}function y(){var e,t,n,i=u;i&&i.width?(i.width/k>=i.height/x?t=(e=Math.max(.2*k,Math.min(i.width*k/800,.8*k)))*i.height/i.width:e=(t=Math.max(.2*x,Math.min(i.height*k/800,.8*x)))*i.width/i.height,e*=100/k,t*=100/x):(e=50,t=60),b.trackEvent.top=(parseFloat(b.trackEvent.top)||(100-t)/2)+"%",i=parseFloat(b.trackEvent.height),n=parseFloat(b.trackEvent.width),i<=100&&0<i?e=Math.min(e*i/t,100):n<=100&&0<n&&(e=n),b.trackEvent.width=e+"%",delete b.trackEvent.height,i=b.trackEvent.left&&parseFloat(b.trackEvent.left),b.trackEvent.left=i?Math.min(i,100-e)+"%":(100-e)/2+"%",b.save(),h(),b.editContainer.style.display="",b.dragger&&(b.dragger.style.display=""),b.resize()}C.isProvisioned("HOSTING__ASSET_UPLOAD")&&e.unshift({id:"file",title:"Upload File",icon:"ss-upload",template:A,callback:function(){var e=a;a="file",b.dialogElements.dialogSubmitButton.style.display="none",n?(s="","file"!==e&&t(n,function(e){v(e)})):f()}}),b.dialogElements||(b.createDialog({target:b.dialogContainer,tabs:e,cancel:function(){b.trackEvent.url||b.remove(),h(),0},success:function(e){function t(){w||(T.removeClass(b.dialogElements.quickEditDialog,"hapyak-progress"),y(),e())}if(l)if(s&&"url"===a)b.trackEvent.url=s,y();else if((n||r)&&d)return b.dialogElements.dialogSubmitButton.disabled=!0,T.addClass(b.dialogElements.quickEditDialog,"hapyak-progress"),r?(b.trackEvent.original=r.attachment.url,u.width=parseFloat(r.attachment.width)||u.width,u.height=parseFloat(r.attachment.height)||u.height,b.trackEvent.url=b.trackEvent.original,t()):m({file:n,name:"image"},function(e){e&&e.attachment&&e.attachment.url?(b.trackEvent.original=e.attachment.url,u.width=parseFloat(e.attachment.width)||u.width,u.height=parseFloat(e.attachment.height)||u.height,b.trackEvent.url=b.trackEvent.original,b.trackEvent.creationEnvironment=hapyak.environment,t()):_.error("Image upload failed to return proper response")}),!1;0}}),b.settings.uploadUrl?g(b.settings.uploadUrl):b.on("uploadUrl",g),(o=b.dialogElements).quickEditDialogTitle.innerHTML="Create Image",o.urlInput.addEventListener("change",function(){v(s=o.urlInput.value),s&&b.selectDialogTab("preview")},!1),o.urlInput.addEventListener("focus",function(){T.addClass(o.errorMessage,"hide-quickedit-error")},!1),o.showButton.addEventListener("click",function(){v(s=o.urlInput.value),s&&b.selectDialogTab("preview")},!1),o.fileInputForm?(o.fileInput.addEventListener("change",function(){o.fileInputForm.submit()},!1),o.fileInputIframe.addEventListener("load",function(){var e=this.contentDocument.body.innerHTML;e&&(r=e=JSON.parse(e),v(e.attachment.url),b.selectDialogTab("preview"),o.fileInputIframe.src="")},!1)):o.fileInput&&o.fileInput.addEventListener("change",function(e){e=e.target.files;e&&e.length?(s="",t(n=e[0],function(e){e&&(v(e,function(){b.selectDialogTab("preview")}),b.selectDialogTab("preview"))})):f()},!1),b.centerDialog()),f(),(s=b.trackEvent.original||b.trackEvent.url)?(v(b.dialogElements.urlInput.value=s),b.selectDialogTab("preview")):b.dialogElements.urlInput.value=""}return this.pickButton=S.createElement("div"),this.pickButton.innerHTML="Editor",this.pickButton.addEventListener("click",a,!1),C.player.gates&&((t=S.createElement("div")).innerHTML=b.trackEvent.gate?"Gate: Y":"Gate: N",t.addEventListener("click",function(){b.trackEvent.gate=!b.trackEvent.gate,b.trackEvent.gateAtEnd=!0,t.innerHTML=b.trackEvent.gate?"Gate: Y":"Gate: N",b.trackEvent.gate?b.addClass(b.trackEvent.container,"hapyak-action-gate"):b.removeClass(b.trackEvent.container,"hapyak-action-gate"),b.save()},!1),i.push(t)),b.moreButtons(i,!0),this.editContainer.insertBefore(this.pickButton,this.moreButtonsContainer||b.previewContainer),b.editContainer.insertBefore(b.createOnClickButton(),b.moreButtonsContainer||b.previewButton),{activate:function(e){e.container&&(e.container.addEventListener("dblclick",r,!1),(l=e.container.querySelector("img"))&&(n&&l.removeEventListener("load",n,!1),!1!==l.loaded&&l.naturalWidth||(n=function(){var e,t=this.parentNode;n=!1,t&&(e=this.nextSibling||null,t.removeChild(this),t.insertBefore(this,e),b.resize())},l.addEventListener("load",n,!1)))),this.draggable({dragContainer:l||!0,lockAspect:!0,scale:function(e,t,n,i){var r=b.container,a=r.parentNode,o=b.dragContainer,s=.01*n*o.offsetWidth,o=.01*i*o.offsetHeight;b.trackEvent.height="",l.naturalWidth/s>l.naturalHeight/o?o=(s=n*a.offsetWidth/100)*l.naturalHeight/l.naturalWidth:s=(o=i*a.offsetHeight/100)*l.naturalWidth/l.naturalHeight,b.trackEvent.width=n+"%",b.trackEvent.height=i+"%",b.trackEvent.top=t+"%",b.trackEvent.left=e+"%",r.style.left=e+"%",r.style.top=t+"%",r.style.height=i+"%",r.style.width=n+"%",l.style.width="100%",l.style.height="100%",b.resize()}}),b.trackEvent.url?(b.editContainer.style.display="",b.dragger&&(b.dragger.style.display="")):(b.editContainer.style.display="none",b.dragger&&(b.dragger.style.display="none")),w&&this.edit()},deactivate:function(){l&&n&&l.removeEventListener("load",n,!1),n=!1},resize:function(){var e,t=b.dialogElement||b.diaxHeight=Math.max(Math.min(.4*e,350),150)+"px")},start:function(e){e.url||w||!1!==b.popcorn.options.autoEditDialog&&a()},end:function(){w||this.cancelCreateDialog()},_teardown:function(){e.container&&e.container.removeEventListener("dblclick",r,!1)}}})}),define("popcorn.quickedit.iframe",["require","utils","logging","dao","model","module","configAPI","utils.hytime","utils.sanitizeparams","popcorn","popcorn.iframe","utils.embed","materialize","popcorn.quickedit"],function(e,w,t,E,n,i,k,x,d,u,r,p){"use strict";var C,a,_=window.document,T=/^(((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/|\/\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?])))|(([0-9]+):([0-9]{2}(\.[0-9]+)?))/i,o=hapyak.assets+"/latest/interactivity-iframe.js",S=(i.config().rootUrl,i.config().version),A='<!doctype html>\n<html>\n\t<head>\n\t\t<title></title>\n\t\t<meta charset="utf-8"/>\n\t\t<style type="text/css">\n\t\t\thtml, body { margin: 0; padding: 0 }\n\t\t</style>\n\t</head>\n\t<body>\n\t\t\x3c!-- HTML code goes here --\x3e\n\n\t\t<script type="text/javascript" src="'+o+'"><\/script>\n\t\t<script type="text/javascript" src="'+hapyak.assets+'/latest/interactivity.api.js"><\/script>\n\t\t<script type="text/javascript">\n\t\t\t(function () {\n\t\t\t\t/*\n\t\t\t\tWrite your script code here\n\t\t\t\t*/\n\n\t\t\t\thapyak.context.addEventListener(\'data\', function (variables) {\n\t\t\t\t\t/*\n\t\t\t\t\tAccess Environment variables here\n\t\t\t\t\t*/\n\t\t\t\t});\n\t\t\t}());\n\t\t<\/script>\n\t</body>\n</html>',P=[],s=[],I=[{"":"div",".":"col s12 widget-library-container","#":"widgetLibraryContainer",">":[{"":"div",".":"row hide inactive",id:"widget-detail-view","#":"widgetDetailContainer",">":[{"":"div",".":"row widget-return-row","#":"widgetDetailReturn",">":"Back to library"},{"":"div",".":"row widget-detail-row",">":[{"":"div",".":"col s12 widget-detail-container",">":[{"":"div",".":"row",">":[{"":"div",".":"col s2","#":"widgetInfoImgContainer"},{"":"div",".":"col s8 widget-title",">":[{"":"div",".":"row","#":"widgetInfoTitle",">":""},{"":"div",".":"row sub-title",">":"Brightcove Interactivity Video"}]},{"":"div",".":"col s2 widget-price","#":"widgetInfoPrice",">":""}]},{"":"div",".":"row description-container",">":[{"":"div",".":"row widget-description-title",">":"DESCRIPTION"},{"":"div",".":"row widget-description","#":"widgetInfoDescription",">":""}]}]}]}]},{"":"div",".":"row",id:"widget-library-index","#":"widgetLibraryContainer",">":[s]}]}];(a=p.dotget(k,"provisioning.annotationLibrary"))&&n.Widget&&n.Widget.find({}).onLoad(function(e){var e=e.get("content"),r=a&&Object.keys(a);e&&e.length&&r&&e.forEach(function(e){var t=e.get("details"),n=e.get("name"),i=t&&t.price||"";n&&-1!==r.indexOf(n)&&t&&t.prevImg&&t.displayedName&&(P.push(e),s.push({"":"div",".":"col s3",">":[{"":"div",".":"",">":[{"":"div",".":"prev-container",id:n,">":[{"":"div",".":"row no-bottom img-container",">":[{"":"img",".":"widget-preview",id:"widget-preview-"+e.get("id"),src:t.prevImg}]},{"":"div",".":"row title-container",">":t.displayedName},{"":"div",".":"row no-bottom info-container",">":i}]}]}]}))})}),u.quickEditor("iframe",function(){var e,i,h,f,r,m,v=this,t=[],n=!1,a=v.container.querySelector("iframe");function g(e){h=e,v.settings.annotation=h,v.trackEvent.noSort||(v.trackEvent.noSort=!0,n=!0),(n||h&&f)&&((e=h.getCustomProperty("html_key"))?v.trackEvent.src="//"+k.uploads.host+"/"+e:h.setCustomProperty("html",f),v.save())}function o(e){!h&&e&&h&&f&&!v.trackEvent.src&&h.setCustomProperty("html",f)}function y(){if(v.dialogElements.linkInput){if(T.test(v.dialogElements.linkInput.value))return v.removeClass(v.dialogElements.linkInput,"invalid"),v.addClass(v.dialogElements.linkInput,"valid"),v.removeClass(v.dialogElements.dialogSubmitButton,"disabled"),v.dialogElements.dialogSubmitButton.removeAttribute("disabled"),!0;v.removeClass(v.dialogElements.linkInput,"valid"),""!==v.dialogElements.linkInput.value&&v.addClass(v.dialogElements.linkInput,"invalid"),v.addClass(v.dialogElements.dialogSubmitButton,"disabled"),v.dialogElements.dialogSubmitButton.setAttribute("disabled","")}return!1}function s(e){var t,n=v.settings.annotation;if(a=v.container.querySelector("iframe"),atch(e){return}if(r&&"hapyak"===r.context)if(e=r.event,i=r.data,"editAnnotation"===e)v.edit();else if("doneAnnotation"===e)v.done();else if("widgetUpdate"===e&&(t=function(e,t,n){if(e&&t&&n){var i,r,a={},o=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},s=function(e,t,n){a.start=e,a.startTimeValue=e,a.end=t,a.startTimeFormat="seconds",a._duration=n,a.durationValue=n,a.durationFormat="seconds"},l=function(e,t){var n;return"percentage"===e?(n=-1<t.indexOf("%")&&t.replace("%",""))&&o(n)&&parseFloat(n)<=100&&0<=parseFloat(n):"boolean"===e?"boolean"==typeof r||-1<["true","false"].indexOf(t):void 0},c=e.hasOwnProperty("start"),d=e.hasOwnProperty("end"),u=e.hasOwnProperty("durationValue"),p=void 0!==e.start?+e.start:+t.start,h=void 0!==e.end?+e.end:+t.end,t=+e.durationValue||t.durationValue,n=n.duration(),f=x.isValidAnnotationDuration(p,h,t,n);for(i in e)r=e[i],"pause"===i?l("boolean",r)?a[i]=r:o(r)&&(a[i]=+r):-1<["height","width","left","top"].indexOf(i)&&l("percentage",r)?a[i]=r:"gate"===i||"noscale"===i&&l("boolean",r)?("string"==typeof r&&(r="true"===r),a[i]=r):-1<["displayedName","customClasses","precondition","customConfig"].indexOf(i)&&(a[i]=r);return u&&!c&&!d&&f?s(p,p+t,t):c&&d&&x.isValidStartEnd(p,h,n)||c&&!d&&!u&&x.isValidStartEnd(p,h,n)||!c&&d&&!u&&x.isValidStartEnd(p,h,n)?s(p,h,h-p):c&&u&&f&&s(p,p+t,t),a}}(i,v.trackEvent,v.popcorn),d.iframeApi().forEach(function(e){t.hasOwnProperty(e)&&(v.trackEvent[e]=t[e])})),i=p.dotget(t,"customConfig"),"receiveAnnotationConfigMessage"!==e&&"widgetSave"!==e&&!i||(v.trackEvent.customConfig=i||r.data),"save"!==r.action&&"widgetUpdate"!==e||(n.onSave(function(){g(n)}),v.timeUpdate()),"receiveAnnotationConfigMessage"===e||"widgetSave"===e||"save"===r.action||"widgetUpdate"===e){v.save(),E.store.commit();var i="annotationUpdated",r=v.trackEvent,e=v.trackEvent.container.getElementsByTagName("iframe")[0],i={context:"hapyak",event:i};u.extend(i,r);try{e.contentWindow.postMessage(JSON.stringify(i),"*")}catch(e){}v.popcorn.currentTime(v.trackEvent.start)}}}function l(e,t){e.style.webkitTransform=e.style.msTransform=e.style.MozTransform=e.style.oTransform=e.style.transform=t||""}function b(){function e(t,n,e){t&&n&&e&&e.length&&e.forEach(function(e){t.addClass(n,e)})}var t=p.dotget(v,"dialogElements.quickEditTabs"),n=t&&t.querySelectorAll(".hapyak-tab"),i=n&&n.length,r=v.tracks6",r=v.dialogContainer&&v.dialogContainer.querySelectorAll(".modal-footer .btn"),i=v.dialogElements.dialogCancelButton,o=v.dialogElements.dialogSubmitButton;t&&t.className&&(t.className+=" tabs"),n&&n.length&&n.forEach(function(e){e.className+=" tab col "+a}),r&&r.length&&(e(v,i,["btn-flat","waves-effect","waves-light"]),e(v,o,["waves-effect","waves-light"]),v.removeClass(i,"btn"),v.removeClass(v.dialogElements.submitBtn,"btn-primary")),Ember.$("ul.tabs").tabs()}function c(){var c,d,t,u=!1,p=!1,e=v&&v.trackEvent,n=[];function i(e,t){var n,i,r,a,o,s,l=this&&this.id||t&&e||void 0,c=v&&v.dialogElements;function d(){v.addClass(c.widgetLibraryContainer,"hide"),v.removeClass(c.widgetDetailContainer,"hide"),v.addClass(c.quickEditTabs,"hide"),i=_.getElementById(n.get("name")),r=n.get("details"),r&&r.prevImg,v.removeClass(c.dialogSubmitButton,"disabled"),v.dialogElements.dialogSubmitButton.removeAttribute("disabled"),Ember.$(".prev-container").removeClass("active"),i&&(i.classList+=" actiML=r.infoTitle||"Widget",c.widgetInfoPrice.innerHTML=r.price||"",c.widgetInfoDescription.innerHTML=r.description||""),c.widgetDetailContainer.classList.remove("inactive"),v.centerDialog()}l&&P&&P.length&&(P.some(function(e){if(e.get("name")===l)return n=e,!0}),n&&((e=_.getElementById("widget-preview-"+n.get("id")))&&(a=e.getBoundingClientRect(),o=e.cloneNode(),(e=_.getElementsByClassName("modal-body")[0])&&(s=e.getBoundingClientRect(),o.id="widgetInfoImg",o.style.position="absolute",o.style.top="0",o.style.left="0",e.appendChild(o),o.dataset.transform="translateX("+(a.left-s.left)+"px) translateY("+(a.top-s.top)+"px)",o.style.transform=o.dataset.transform,o.style.width=a.width+"px",o.style.maxWidth=a.width+"px",o.style.height=a.height+"px")),v.addClass(c.widgetLibraryContainer,"inactive"),t?(v.addClass(c.dialogSubmitButton,"hide"),v.addClass(c.widgetDetailReturn,"hide"),c.dialogCancelButton.innerText="OKAY",o.style.transform="translateX(32px) translateY(18px)",o.style.width="50px",o.style.height="50px",d()):c.widgetLibraryContainer.addEventListener("transitionend",function e(t){c.widgetLibrtransition="transform 0.6s ease, width 0.6s ease, height 0.6s ease",o.style.transform="translateX(32px) translateY(70px)",o.style.width="50px",o.style.height="50px",o.addEventListener("transitionend",function e(t){o.removeEventListener("transitionend",e),d()},!1)},!1)))}k.provisioning.annotationLibrary&&n.push({id:"library",title:"LIBRARY",template:I,callback:function(){m?(v.removeClass(v.dialogElements.dialogSubmitButton,"disabled"),v.dialogElements.dialogSubmitButton.removeAttribute("disabled")):(v.addClass(v.dialogElements.dialogSubmitButton,"disabled"),v.dialogElements.dialogSubmitButton.setAttribute("disabled","")),v.dialogElements.dialogSubmitButton.innerText="ADD"}}),k.isProvisioned("ANNOTATIONS__IFRAME__HTML_TAB")&&n.push({id:"html",title:"HTML",template:[{"":"div","#":"htmlContent"},{"":"div","#":"expandButton"}],callback:function(){u=!0,v.dialogElements.dialogSubmitButton.innerText="SUBMIT",v.addClass(v.dialogElements.dialogSubmitButton,"disabled"),v.dialogElements.dialogSubmitButton.setAttribute("disabled",""),irequire(["codemirror","codemirror.htmlmixed","codemirror.css","codemirror.javascript"],function(e){v.removeClass(v.dialogElements.dialogSubmitButton,"disabled"),v.dialogElements.dialogSubmitButton.removeAttribute("disabled"),c?c.doc.setValue(f||A):c=new e(v.dialogElements.htmlContent,{value:f||A,mode:"htmlmixed",lineNumbers:!0,smartIndent:!0,indentWithTabs:!0,tabSize:4,indentUnit:4}),v.centerDialog()})}}),k.isProvisioned("ANNOTATIONS__IFRAME__URL_TAB")&&n.push({id:"url",title:"URL",template:[{"":"div",".":"row",">":[{"":"div",".":"input-field col s12",">":[{"":"input","#":"linkInput",type:"text",".":"validate"},{"":"label",for:"linkInput","data-error":"invalid link address","#":"invalidUrlAddress",">":"Custom Iframe URL"}]}]}],callback:function(){var e=v.dialogElements.quickEditDialog,t=e&&e.className;v.dialogElements.dialogSubmitButton.innerText="SUBMIT",t&&-1<t.indexOf("expanded")&&(e.className=t.replace("expanded","")),c&&u&&(f=c.doc.getValue()||f||""),u=!1,y()}}),v.dialogElements||v.createDialog({target:v.dialogContainer,tabs:n,success:function(r){var e,t,n,i,a,o,s=v.popcorn.currentTime(),l=v.popcorn.duration();if(v.dialogElements.dialogSubmitButton.hasAttribute("ation"),!(n=m&&m.get("src")))return;t&&(["top","left","width","height","start","precondition","customConfig","pause","durationFormat","startTimeValue","_duration","gate","scale","customClasses"].forEach(function(e){t.hasOwnProperty(e)&&(v.trackEvent[e]=t[e])}),(t.start||t._duration)&&(t.durationFormat=t.durationFormat||"seconds",t._duration="number"==typeof t._duration?t._duration:3,t.start="number"==typeof t.start?t.start:s,a=v.trackEvent.start,v.trackEvent.durationValue=i=v.trackEvent._duration,v.trackEvent.durationFormat=t.durationFormat,v.setDuration(t._duration),o="percent"===t.durationFormat?a+.01*i*l:a+(v.trackEvent.pause?.5:i||3),v.trackEvent.end=o,i=100===i&&"percent"===v.trackEvent.durationFormat,v.trackEvent._duration=i?l:o-a,(s<(v.trackEvent.startTimeValue=a)||o<s)&&v.popcorn.currentTime(a+.2)),v.save(),E.store.commit(),t.closeQuickeditMenuOnStart&&v.done()),v.trackEvent.src=n,v.trackEvent.customWidget=m.get("name")}else{if(u){if(!c)return;if(f=c.doc.getValue()||"",h){let t={folder:"widget_html",make_unique:!1};t.filename=h.data.id+".html",w.addClass(v.dialogElements.quickEditDialog,"hapyak-progress"),v.addClass(v.dialogElements.dialogCancelButton,"disabled"),v.dialogElements.dialogSubmitButton.setAttribute("disabled",""),h.setCustomProperty("html",f),v.trackEvent.src=void 0,h.onSave(function(){g(h)}),hapyak.fetchAuthHeader().then(e=>{if(e){const i={"Content-Type":"application/json"};e.forEach((e,t)=>{i[""+t]=e}),!async function(e,t){var n=`${hapyak.dataURI}/v1/accounts/${hapyak.accountId}/presigned_urls`;return(await(await fetch(n,{method:"POST",headers:t,body:JSON.stringify(e)})).json()).result.data.url}(t,i).then(n=>{!async function(e,t){return await fetch(t,{method:"PUT",headers:{"Content-Type":"text/html; charset=utf-8"},body:e})}(f,n).then(e=>{if(200===e.status){const t=n.split("?")[0].replace("https:","");!async function(e,t,n){return t=`${hapyak.dataURI}/v1/accounts/${hapyak.accountId}/projects/${hapyak.projectId}/annotations/`+t,n={method:"PATCH",headers:n,body:JSON.stringify({properties:{src:e}})},await fetch(t,n)}(t,h.data.id,i).then(e=>{v.trackEvent.src=t,E.store.commit().then(function(){r()}),v.save()})}})})}})}else v.trackEvent.src=void 0,d&&v.removeClass(d,"valid"),v.addClass(v.dialogElements.dialogSubmitButton,"disabled"),v.dialogElements.dialogSubmitButton.setAttribute("disabled","");return!1}if(y())v.addClass(v.dialogElements.dialogCancelButton,"disabled"),v.dialogElements.dialogSubmitButton.setAttribute("disabled",""),f=void 0,e=d&&v.dialogElements.linkInput.value,/^https?:\/\/|^\/\//.test(e)||(e="//"+e),v.trackEvent.src=e;else{if(e)return;v.trackEvent.src=void 0}}v.save(),v.removeClass(v.dialogElements.dialogCancelButton,"disabled"),v.dialogElements.dialogSubmitButton.removeAttribute("disabled")}}),v.dialogElements.quickEditDialogTitle.innerHTML="WIDGET LIBRARY",(d=v.dialogElements.linkInput)&&(d.addEventListener("change",y,!1),d.addEventListener("focus",y,!1),d.addEventListener("keyup",y,!1),d.addEventListener("keypress",y,!1)),k.isProvisioned("ANNOTATIONS__IFRAME__HTML_TAB")&&v.dialogElements.expandButton.addEventListener("click",function(){var e=this.dialogElements.quickEditDialog;e&&(this.hasClass(e,"expanded")?this.removeClass(e,"expanded"):this.addClass(e,"expanded"),"function"==typeof this.centerDialog&&this.centerDialog())}.bind(v),!1),v.dialogElements.widgetDetailReturn&&v.dialogElements.widgetDetailReturn.addEventListener("click",function(){var e=_.getElementById("widgetInfoImg");m=null,Ember.$(".prev-container").removeClass("active"),v.addClass(v.dialogElements.widgetDetailContainer,"inactive"),v.addClass(v.dialogElements.widgetDetailContainer,"hide"),v.addClass(v.dialogElements.dialogSubmitButton,"disabled"),v.dialogElements.dialogSubmitButhide"),e.parentNode.removeChild(e),v.addClass(v.dialogElements.widgetLibraryContainer,"inactive"),v.removeClass(v.dialogElements.widgetLibraryContainer,"hide"),requestAnimationFrame(function(){v.removeClass(v.dialogElements.widgetLibraryContainer,"inactive")}),v.centerDialog()},!1),P&&P.length&&P.forEach(function(e){e=_.getElementById(e.get("name"));e&&e.addEventListener("click",i,!1)}),h=h||v.settings.annotation,v.dialogElements.quickEditDialog.className+=" materialize",(f=h?h.getCustomProperty("html"):f)?v.selectDialogTab("html"):d&&(d.value=v.trackEvent.src||"",y()),f?t="html":e.src&&(t=e.customWidget?"library":"url"),t?(["library","url","html"].forEach(function(e){t!==e?(v.addClass(v.dialogElements.tabs[e],"hide"),v.removeClass(v.dialogElements[e],"active")):(v.addClass(v.dialogElements[e],"active"),v.dialogElements.quickEditDialog.className+=" "+e)}),v.selectDialogTab(t),"library"===t&&e.customWidget?i(e.customWidget,!0):"url"===t&&v.addClass(v.dialogElements.invalidUrlAddress,"active")):b(),v.centerDialog()}return r={ignorePlayerScale:!!v.trackEvent.noscale,scale:function(e,t,n,i){var r=v.container,a=v.dragContainer;a.offsetWidth,a.offsetHeight;v.trackEvent.width=n+"%",v.trackEvent.height=i+"%",v.trackEvent.top=t+"%",v.trackEvent.left=e+"%",r.style.left=e+"%",r.style.top=t+"%",r.style.height=i+"%",r.style.width=n+"%",v.resize()}},C||((C=_.createElement("link")).type="text/css",C.rel="stylesheet",C.href="/css/generated/codemirror.css?v="+S,_.head.appendChild(C)),this.pickButton=_.createElement("div"),this.pickButton.className="hapyak-quickedit-editor",this.pickButton.innerHTML="Editor",this.pickButton.addEventListener("click",c,!1),k.player.gates&&((e=_.createElement("div")).className="hapyak-quickedit-gate",e.innerHTML=v.trackEvent.gate?"Gate: Y":"Gate: N",e.addEventListener("click",function(){v.trackEvent.gate=!v.trackEvent.gate,e.innerHTML=v.trackEvent.gate?"Gate: Y":"Gate: N",v.trackEvent.gate?v.addClass(v.trackEvent.container,"hapyak-action-gate"):v.removeClass(v.trackEvent.container,"hapyak-action-gate"),v.save()},!1),this.gateButton=e,t.push(e)),k.player.noscale&&((i=_.createElement("div")).className="hapyak-quickedit-scale",i.innerHTML=v.trackEvent.noscale?"Scale: N":"Scale: Y",i.addEventListener("click",function(){var e,t=v.trackEvent,n=v.popcorn.media.width/v.settings.baseWidth;t.noscale=!t.noscale,i.innerHTML=t.noscale?"Scale: N":"Scale: Y",t.noscale?(e=_.querySelectorAll(".hapyak-annotation-noscale-container")[0],t.dragContainer=t.editorContainer=t.target=t.topContainer=e,t.container.parentNode.removeChild(t.container),v.editContainer.parentNode.removeChild(v.editContainer),e.appendChild(v.editContainer),e.appendChild(t.container),v.addClass(t.container,"hapyak-action-noscale"),l(v.editContainer)):(v.removeClass(t.container,"hapyak-action-noscale"),e=_.querySelectorAll(".hapyak-annotation-container:not(.hapyak-annotation-noscale-container)")[0],t.dragContainer=t.editorContainer=t.target=t.topContainer=e,t.container.parentNode.removeChild(t.container),v.editContainer.parentNode.removeChild(v.editContainer),e.appendChild(v.editContainer),e.appendChild(t.container),v.addClass(t.container,"hapyak-action-noscale"),l(v.editContainer,"scale("+1/n+")")),v.draggable(r),v.save()},!1),this.scaleButton=i,t.push(i)),t.length&&v.moreButtons(t,!0),this.editContainer.insertBefore(this.pickButton,this.moreButtonsContainer||this.previewButton),{activate:function(){v.addClass(v.container,"edit"),this.draggable(r),this.on("commit",g),this.on("annotation",o),window.addEventListener("message",s,!1)},deactivate:function(){v.removeClass(v.container,"edit"),this.off("commit",g),this.off("annotation",o),window.removeEventListenerer.style.display="",v.dragger&&(v.dragger.style.display=""),v.resize()},start:function(){v.container.style.pointerEvents="none",v.trackEvent.src||v.trackEvent.html||!1===v.popcorn.options.autoEditDialog||c()},end:function(){v.container.style.pointerEvents=""}}})}),define("utils.oninput",[],function(){"use strict";var o,r=9===document.documentMode,a="oninput"in document.createElement("input");return o=[],{on:function(e,t,n){var i;!a||r||document.documentMode&&e.contentEditable?(i=function(n,i){for(var r,a,e=0;e<o.length;e++)if((r=o[e]).origeturn r.callback;return a="value"in n?function(e){return e.value}:function(e){return e.innerHTML},r={original:i,element:n,value:a(n),enabled:!0,callback:function(e){var t;if(r.enabled&&(t=a(n),r.value!==t))return r.value=t,i(e)},focus:function(){r.value=a(n)}},o.push(r),n.addEventListener("focus",r.focus,!1),r.callback}(e,t),e.addEventListener(a?"input":"propertychange",i,n),e.addEventListener("selectionchange",i,n),e.addEventListener("keyup",i,n),e.addEventListener("keydown",i,n)):e.addEventListener("input",t,n)},off:function(e,t,n){var i;!a||r||document.documentMode&&e.contentEditable?(i=function(e,t){for(var n,i=0;i<o.length;i++)if((n=o[i]).original===t&&n.element===e)return n.enabled=!1,o.splice(i,1),e.removeEventListener("focus",n.focus,!1),n}(e,t),e.removeEventListener(a?"input":"propertychange",i,n),e.removeEventListener("selectionchange",i,n),e.removeEventListener("keyup",i,n),e.removeEventListener("keydown",i,n)):e.removeEventListener("input",t,n)}}}),define("popcorn.quickedit.pop",["require","utils","utils.parsecolor","utils.gettext","utils.oninput","popcorn","configAPI","vendor/i18n!nls/ui","popcorn.quickedit","popcorn.pop","logging","popcorn.variables"],function(e,A,P,I,L,D,O,t){"use strict";var M,N=window.document,R=O.isProvisioned("API__ANNOTATION"),n=O.provisioning.customClassNames||{},V=[{"":"section",">":[{"":"label",">":"Theme","#":"stylesLabel"},{"":"select","#":"styles",">":[{"":"option",value:"pop",">":n.Pop||"Pop"},{"":"option",value:"black",">":n.Black||"Black"},{"":"option",value:"white",">":n.White||"White"},{"":"option",value:"outline",">":n.Impact||"Impact"},{"":"option",value:"speech",">":n.Speech||"Speech"},{"":"option",value:"thought",">":n.Thought||"Thought"}]}]},{"":"section","#":"tailSection",">":[{"":"label",">":"Tail Position","#":"tailPositionLabel"},{"":"select","#":"tailPosition",">":[{"":"option",value:"bottom left",">":"Bottom Left"},{"":"option",value:"bottom right",">":"Bottom Right"},{"":"option",value:"top left",">":"Top Left"},{"":"option",value:"top right",">":"Top Right"}]},{"":"div",">":[{"":"input","#":"flipTail",".":"tail-flip",type:"checkbox",value:!0},{"":"section",".":"tail-flip",">":"&nbsp;Flip tail"}]}]}],j=[{"":"section",">":[{"":"label",">":"Variables","#":"variablesLabel"},{"":"select","#":"variables",">":[]}]}],H=[{"#":"colorPickerContainer",">":[{"#":"colorPreviewContainer",">":{"#":"colorPreview"}},{"":"label",".":"push-left",">":"Color:&nbsp;"},{"#":"colorPicker",".":"push-left"},{"":"label",".":"push-left",">":"Opacity:&nbsp;",style:"clear: left"},{"":"span","#":"opacityErrorElement",">":"Opacity must be between 0 and 1.",".":"hapyak-quickedit-error hide-quickedit-error"},{"":"input","#":"opacityInput",min:"0",max:"1",step:"0.01",type:((n=N.createElement("input")).setAttribute("type","range"),"range"!==n.type&&n.setAttribute("type","number"),n.type)}]}],q=t.overlay.action.comment_text;function z(e){e=e.firstChild;return e.querySelector("a, div")||e}D.quickEditor("pop",function(){var r,i,t,a,o,s,n,e,l,c,d,u,p,h,f=this,m=[],v=f.settings.baseWidth;function g(){var e,t=f.trackEvent,n=t.container,i=n.parentNode;n.offsetHeight>=i.offsetHeight?n.style.overflowY="auto":n.style.overflowY="visible",(!a||a<10)&&(a=0,e=A.measurePopText(t,v),t.width=e/v*100+"%",n.style.width=t.width),e=n.offsetLeft*v/i.offsetWidth,v-(e+n.offsetWidth)<0&&(t.left=100*(v-n.offsetWidth)/v+"%",n.style.left=t.left),e=n.offsetTop*h/i.offsetHeight,h-(e+n.offsetHeight)<0&&(t.top=100*(h-n.offsetHeight)/h+"%",n.style.top=t.top),f.resize()}function y(){f.trackEvent.text=I(i),t&&(t.value=f.trackEvent.text),g()}function b(e){var t,n;if(i.innerHTML="",e)for(t=e.split(/[\n\r]/),n=0;n<t.length;n++)n&&i.appendChild(N.createElement("br")),i.appendChild(N.createTextNode(t[n]))}function w(){!i.firstChild||3===i.firstChild.nodeType&&1===i.childNodes.length||(f.trackEvent.text=I(i),b(f.trackEvent.text),t&&(t.value=f.trackEvent.text),g())}function E(e){27!==e.which&&(e.shiftKey||10!==e.which&&13!==e.which)||(e.cancelBubble=!0,e.preventDefault(),f.done())}function k(){f.trackEvent.text=t.value||"",b(f.trackEvent.text),g()}function x(){f.edit()}function C(){return M!==f&&t&&(M=f,t.value=f.trackEvent.text,L.on(t,k,!1),t.addEventListener("keypress",E,!0),t.focus(),1)}function _(){(t="string"==typeof f.settings.textInput?N.querySelector(f.settings.textInput):f.settings.textInput)instanceof window.HTMLInputElement||t instanceof window.HTMLTextAreaElement?f.editing&&C():t=!1}function T(){var e=s.opacityInput.value,t=s.opacityErrorElement;e<0||1<e?(f.dialogElements.dialogSubmitButton.setAttribute("disabled",!0),A.removeClass(t,"hide-quickedit-error"),A.addClass(t,"show-quickedit-error")):(f.dialogElements.dialogSubmitButton.removeAttribute("disabled"),f.dialogElements.dialogSubmitButton.disabled="",A.addClass(t,"hide-quickedit-error"),A.removeClass(t,"show-quickedit-error"),s.colorPreview.style.opacity=e)}function S(){n&&(/^#([a-f0-9]{6})/i.test(f.trackEvent.backgroundColor)?n.setHex(f.trackEvent.backgroundColor):c?n.setRgb(c):n.setRgb({r:255,g:255,b:255}))}return e=f.container&&f.container.parentNode?f.container.parentNode:f.trackEvent.target,h=v*e.offsetHeight/e.offsetWidth,_(),f.on("textInput",_),(e=N.createElement("div")).innerHTML="Styles",e.addEventListener("click",function(){s||(s=A.microTemplate(null,H),c=P(f.trackEvent.backgroundColor),irequire(["player.colorpicker"],function(e){n=new e(s.colorPicker,function(e,t,n){s.colorPreview.style.backgroundColor=e,c=n}),S(),f.centerDialog()}),s.opacityInput.addEventListener("change",T,!1),s.opacityInput.addEventListener("input",T,!1)),f.createDialog({target:f.dialogContainer,success:function(){c&&(c.a=parseFloat(s.opacityInput.value),f.trackEvent.backgroundColor="rgba("+c.r+", "+c.g+", "+c.b+", "+c.a+")"),f.save()}}),f.dialogElements.quickEditDialogTitle.innerHTML="Background Color",f.dialogElements.quickEditMain.appendChild(s.colorPickerContainer),S(),s.opacityInput.value=c&&!isNaN(c.a)?c.a:1,T(),f.centerDialog()},!1),m.push(e),(e=N.createElement("div")).className="hapyak-mode-buttons",(o=A.microTemplate(e,V)).styles.id=D.guid("styles"),o.stylesLabel.setAttribute("for",o.styles.id),o.styles.addEventListener("change",function(){var e,t,n=o.styles.value;o.tailSection.style.display="speech"===n||"thought"===n?"":"none",f.trackEvent.mode!==n&&(f.trackEvent.mode=n,f.settings.getAnnotationObject&&(e=f.settings.getAnnotationObject(f.trackEvent.id))&&(t=D.extend({},e.getCustomProperty("meta")),"outline"===n?t.fontFamily="Impact":delete t.fontFamily,e.setCustomProperty("meta",t)),f.save(),g())},!1),o.tailPosition.id=D.guid("styles"),o.tailPositionLabel.setAttribute("for",o.tailPosition.id),o.tailPosition.addEventListener("change",function(){var e=o.tailPosition.value;f.trackEvent.arrow!==e&&(f.trackEvent.arrow=e,f.save(),g())},!1),o.flipTail.checked=f.trackEvent.flipTail,o.flipTail.addEventListener("change",function(){f.trackEvent.flipTail=this.checked,f.save()},!1),R&&((u=N.createElement("div")).className="hapyak-mode-buttons",(d=A.microTemplate(u,j)).variables.id=D.guid("variables"),d.variablesLabel.setAttribute("for",d.variables.id),d.variables.addEventListener("change",function(){var e=" {{"+d.variables.value+"}}";w(),i.appendChild(N.createTextNode(e)),d.variables.selectedIndex=0},!1),m.push(u)),O.player.gates&&((l=N.createElement("div")).innerHTML=f.trackEvent.gate?"Gate: Y":"Gate: N",l.addEventListener("click",function(){f.trackEvent.gate=!f.trackEvent.gate,f.trackEvent.gateAtEnd=!0,l.innerHTML=f.trackEvent.gate?"Gate: Y":"Gate: N",f.trackEvent.gate?f.addClass(f.trackEvent.container,"hapyak-action-gate"):f.removeClass(f.trackEvent.container,"hapyak-action-gate"),f.save()},!1),m.push(l)),m.push(e),f.moreButtons(m,!0),f.editContainer.insertBefore(f.createTextButton({title:q.title,value:function(){return f.trackEvent.text},callbacks:{success:function(e){b(e),f.trackEvent.text=e,f.save(),g(),t&&M===f&&(t.value=e)}}}),f.moreButtonsContainer),f.editContainer.insertBefore(f.createOnClickButton({resize:g}),f.moreButtonsContainer),{activate:function(e){this.draggable({scaleHeight:!1,scale:function(e,t,n){var i=r&&r.parentNode||this.trackEvent.target;a=n,f.trackEvent.width=a+"%",f.trackEvent.top=t+"%",f.trackEvent.left=e+"%",f.trackEvent.container.style.width=f.trackEvent.width,f.trackEvent.container.style.left=e+"%",f.trackEvent.container.style.top=t+"%",n=r.offsetTop*h/i.offsetHeight,h-(n+r.offsetHeight)<0&&(f.trackEvent.top=100*(h-r.offsetHeight)/h+"%",r.style.top=f.trackEvent.top),f.resize()}}),A.removeClass(e.container,"hide"),e.container&&e.container.addEventListener("dblclick",x,!1),f.resize()},start:function(e){var t;if(e.container){if(a=(a=/([0-9\.]+)(px|%)/i.exec(e.width))&&("px"===a[2]?(t=e.container&&e.container.parentNode||this.trackEvent.target,parseFloat(a[1])/t.offsetWidth*100):parseFloat(a[1])),p=e.text,e.container.removeEventListener("dblclick",x,!1),r=e.container,i=z(r),b(e.text),!this.popcorn.options.disableInlineTextEdit){try{i.contentEditable="plaintext-only"}catch(e){}"plaintext-only"!==i.contentEditable&&(i.contentEditable=!0),L.on(i,y,!1),i.addEventListener("keypress",E,!0),i.addEventListener("blur",w,!1),C()||i.focus(),i.focus(),(t=N.createRange()).selectNodeContents(i),t.collapse(!1),(e=window.getSelection()).removeAllRanges(),e.addRange(t)}o.styles.value=f.trackEvent.mode,o.styles.selectedIndex<0&&(o.styles.value="pop"),o.tailPosition.selectedIndex<0&&(o.tailPosition.selectedIndex=0),o.tailPosition.value=f.trackEvent.arrow,"speech"===f.trackEvent.mode||"thought"===f.trackEvent.mode?o.tailSection.style.display="":o.tailSection.style.display="none",R&&(0<(e=f.popcorn.getExportedVariables()).length?(d.variables.innerHTML="",(t=N.createElement("option")).value="select-one",t.innerHTML="Select variable",d.variables.appendChild(t),D.forEach(e,function(e){var t=N.createElement("option");t.value=e.name,t.appendChild(N.createTextNode(e.title)),d.variables.appendChild(t)}),u.style.display=""):u.style.display="none")}},tryMakeValid:function(){i=z(r);var e=I(i).trim();return!e&&p&&(b(e=p),y()),!!e},save:function(e){var t=0;e.container&&(i=z(r),e.text=I(i).trim(),e._duration||(D.forEach(e.text.split(/[\n\r\s\t ]+/),function(e){2<e.length&&t++}),e.pause?(e.pause=Math.min(6,Math.max(2,.5*t)),e.end=e.start+.5):e.end=e.start+Math.min(10,Math.max(3,.5*t))))},end:function(e){this.container&&(i.contentEditable=!1,L.off(i,y,!1),i.removeEventListener("keypress",E,!0),i.removeEventListener("blur",w,!1),t&&M===f&&(M=!1,t.value="",t.blur(),L.off(t,k,!1),t.removeEventListener("keypress",E,!0)),e.container.addEventListener("dblclick",x,!1))},deactivate:function(){f.container&&f.container.removeEventListener("dblclick",x,!1),t&&t.blur()}}},function(e){e.left||(e.left="50%"),e.top||(e.top="50%"),e.text||(e.text="")})}),define("popcorn.quickedit.ontime",["require","promise!configuration","logging","utils","popcorn","popcorn.quickedit","popcorn.ontime"],function(e,t,n,i,r){"use strict";r.quickEditor("ontime",function(e){var t=this,n=t.createOnTimeButton(),i=document.createElement("img");function r(e,t){for(var n=e.parentElement.parentElement.children,i=e.parentElement.children,r=0;r<n.length;r++)n[r]!==e.parentElement&&(n[r].style.display=t?"":"none");for(r=0;r<i.length;r++)i[r]!==e&&(i[r].style.display=t?"":"none")}return i.className="timerIcon",i.width="25",i.style.display="block",i.src="/img/stopwatch6.svg",this.editButton.appendChild(i),this.editContainer.insertBefore(n,this.pauseButton),this.editContainer.style.position="static",{start:function(){var e;t.resize(),this.trackEvent.gotoTrack&&this.setTypeId&&this.trackEvent.addonCommand&&this.trackEvent.addonCommandData||((e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(e)),r(t.editContainer,!1)},end:function(){r(t.editContainer,!0)}}})}),define("actions.quiz",["jquery.noconflict","hapyak.overlay","lodash.noconflict","vendor/i18n!nls/ui","utils","playlist.addon","configAPI","utils.embed","utils.hms"],function(C,i,r,e,_,T,S,t,A){"use strict";var P=e.annotation.quiz.dialog.passFail,I=t.getQueryParams(window.location.href).is_experience||!1,e=t.getQueryParams(window.location.href),L=e.experience_data?JSON.parse(e.experience_data):"",D='<div class="modal-onclick">   <div>       <label class="pull-left">'+r.escape(P.actions.link)+':</label>       <input type="text" class="hapyak-link-input" />   </div>   <div class="hapyak-onclick-pause">       <input type="checkbox" class="pull-left hapyak-pause-input" />       <label>'+r.escape(P.actions.pause)+'</label>   </div>   <div>       <label class="pull-left">'+r.escape(P.actions.time)+':</label>       <select class="hapyak-time-input-select">           <option selected="true" value="default">-</option>       </select>       <input type="text" class="hide hapyak-time-input" />   </div>'+(I&&"single video landing page"!==L.layout.type_name?'   <div>       <label class="pull-left">'+r.escape(P.actions.branch)+':</label>       <select class="hapyak-branch-input-select">           <option selected="true" value="default">-</option>       </select><div class="hapyak-branchtime-label hide">'+r.escape(P.actions.branchtime)+': <input type="text" class="hapyak-branchtime-input" /></div>   </div>':"")+'<div class="hapyak-branchtime-warning quiz hide">'+r.escape(P.actions.branchtimewarning)+'</div>   <div>       <label class="pull-left">'+r.escape(P.actions.track)+'#:</label>       <input type="text" class="hapyak-track-input" />   </div>'+(S.isProvisioned("API__ANNOTATION")?'   <div>       <label class="pull-left">'+r.escape(P.actions.javascript)+':</label>       <input type="text" class="hapyak-var-input" />   </div>':"")+'   <div>       <textarea class="hapyak-message-textarea"/>   </div>   <div class="hapyak-threshold-toggle">       <input type="checkbox" class="pull-left hapyak-threshold-input" />       <label>'+r.escape(P.actions.threshold)+'</label>   </div>   <div class="hapyak-threshold-setting">       <div class="hapyak-passing-mark">           <label>'+r.escape(P.actions.passingMark)+':</label>           <select class="hapyak-passing-mark-input" />       </div>   </div>   <div class="hide hapyak-reset-toggle">       <input type="checkbox" class="pull-left hapyak-reset-input" />       <label>'+r.escape(P.actions.reset)+"</label>   </div></div>";return function(o,t,e){var s,a,l,c,d=/^(https?:\/\/|mailto:|tel:)/i;function u(e){e=_.validateOnClick(e)||!!e.branchInputSelect&&"-"!==e.branchInputSelect.value;return e?c.removeAttribute("disabled"):c.setAttribute("disabled","disabled"),e}function p(e){e=e.currentTarget;"customTime"===e.options[e.selectedIndex].value?C(".hapyak-time-input:first",e.parentNode).removeClass("hide"):(C(".hapyak-time-input:first",e.parentNode).addClass("hide").val(""),u(l.timeInputSelect===e?l:s)),i.center()}function h(e){"-"!==e.branchInputSelect.value?(e.branchVideoTime.parentNode.classList.remove("hide"),e.branchVideoTime&&e.branchVideoTime.value&&(e.timeInput.classList.add("hide"),e.timeInput.firstElementSibling.classList.add("hide"))):(e.branchVideoTime.parentNode.classList.add("hide"),e.branchVideoTime.value="",f(e)),i.center()}function f(e){e.branchInputSelect.value&&"-"===e.branchInputSelect.value?(e.timeInput.value&&"customTime"===e.timeInputSelect.value&&e.timeInput.classList.remove("hide"),e.timeInputSelect.classList.remove("hide"),e.timeInputSelect.previousElementSibling.classList.remove("hide")):(e.timeInput.classList.add("hide"),e.timeInputSelect.classList.add("hide"),e.timeInputSelect.previousElementSibling.classList.add("hide"))}function m(e){e.branchTimeWarning.classList.remove("hide"),e.timeInputSelect.setAttribute("disabled",!0),e.timeInput.disabled=!0}function v(i){r.each(i,function(t,n){t&&"INPUT"===t.tagName&&"text"===t.type&&-1===["thresholdInput","messageInput"].indexOf(n)&&r.each(["change","keyup","keypress"],function(e){t.addEventListener(e,function(){u(i),"linkInput"===n&&(_.validateOnClick({linkInput:i.linkInput})&&""!==i.linkInput.value?C(i.pauseInput.parentNode).show():C(i.pauseInput.parentNode).hide())},!1)})})}function g(n){var e=document.createElement("option");Popcorn.forEach(t.data.trackEvents.byStart,function(e){var t;if(!e._natives||e.annotationId===o.annotationId)return!1;(t=document.createElement("option")).innerHTML=A.toString(e.start)+" - "+_.getAnnotationMessage(e._natives.type,!0,e.customConfig,e),t.value="id="+e.annotationId,n.appendChild(t)}),e.innerHTML="Custom time",e.value="customTime",n.appendChild(e)}function y(e,t,n){var i,r=T.getVideos(),a=document.createElement("option"),o=e.branchInputSelect,s=e.timeInputSelect.previousElementSibling,l=e.timeInputSelect,c=e.timeInput;for(o.innerHTML="",a.innerHTML="-",o.appendChild(a),r.forEach(function(e,t){var n;e.data.id!==T.currentVideo().data.id&&((n=document.createElement("option")).innerHTML=t+1+". "+e.data.project.data.title,n.value="id="+e.data.id,o.appendChild(n))}),i=0;i<o.options.length;i++)if(o.options[i].value===t){o.options[i].selected=!0;break}t.length&&"-"!==t?(n&&(C(".hapyak-branchtime-input").innerHTML=n,l.classList.add("hide"),s.classList.add("hide"),c.classList.add("hide")),o.classList.remove("hide"),o.nextElementSibling.classList.remove("hide"),o.previousElementSibling.classList.remove("hide")):o.nextElementSibling.classList.add("hide"),f(e)}function b(e){C(e).on("change",function(e){e.currentTarget===l.passingMarkInput?s.passingMarkInput.value=e.currentTarget.value:l.passingMarkInput.value=e.currentTarget.value})}function w(e){var t=l.passingMarkInput.parentNode,n=s.passingMarkInput.parentNode;e.checked?(C(t).show(),C(n).show()):(C(t).hide(),C(n).hide()),i.center()}function E(e){var t=l.thresholdInput,e=e.target;e===t?s.thresholdInput.checked=e.checked:e&&(t.checked=e.checked),w(e)}function k(e){for(var t=1;t<=100;t++)C('<option value="'+t+'">'+t+"%</option>").appendTo(e)}function n(e){e=e.target.parentNode.querySelector("input");e.checked=!e.checked,-1<[l.thresholdInput,s.thresholdInput].indexOf(e)&&E({target:e})}function x(e){[e.pauseInput,e.thresholdInput,e.resetInput].forEach(function(e){C("label",e.parentNode).on("click",n)})}i.tabs({title:r.escape(P.title),tabs:[{title:r.escape(P.tabs.pass),callbacks:{didInsertElement:function(e){var t,n,i=0,r=C(D).appendTo(C(".modal-body:first > section:last",e)[0]);for(a=e,l={linkInput:C(".hapyak-link-input:first",r)[0],timeInput:C(".hapyak-time-input:first",r)[0],timeInputSelect:C(".hapyak-time-input-select:first",r)[0],branchTimeWarning:C(".hapyak-branchtime-warning:first",r)[0],branchInputSelect:C(".hapyak-branch-input-select:first",r)[0],branchVideoTime:C(".hapyak-branchtime-input:first",r)[0],trackInput:C(".hapyak-track-input:first",r)[0],varInput:C(".hapyak-var-input:first",r)[0],thresholdInput:C(".hapyak-threshold-input:first",r)[0],passingMarkInput:C(".hapyak-passing-mark-input:first",r)[0],messageInput:C(".hapyak-message-textarea:first",r)[0],resetInput:C(".hapyak-reset-input:first",r)[0],pauseInput:C(".hapyak-pause-input:first",r)[0]},e=o.pass&&o.pass.gotoTrack?o.pass.gotoTrack.split("#"):[],r=o.pass&&o.pass.goToVideo?o.pass.goToVideo:[],t=o.pass&&o.pass.branchVideoTime?o.pass.branchVideoTime:[],C(l.resetInput.parentNode).addClass("hide"),l.linkInput.value=o.pass&&o.pass.gotoLink?o.pass.gotoLink:"",l.trackInput.value=e[0]||"",S.isProvisioned("API__ANNOTATION")&&(l.varInput.value=o.pass&&o.pass.setVariables?o.pass.setVariables:""),l.messageInput.value=o.pass&&o.pass.thankYou?o.pass.thankYou:"",l.messageInput.setAttribute("placeholder","Alternate message on pass"),l.thresholdInput.checked=!(!o.quiz||!o.quiz.setPassThreshold)&&o.quiz.setPassThreshold,k(l.passingMarkInput),l.passingMarkInput.value=o.quiz&&o.quiz.passingMark?o.quiz.passingMark:"51",l.pauseInput.checked=!o.pass||void 0===o.pass.pause||o.pass.pause,n=e[1]||"",g(l.timeInputSelect);i<l.timeInputSelect.options.length;i++)if(l.timeInputSelect.options[i].value===n){l.timeInputSelect.options[i].selected=!0;break}-1<["default","customTime"].indexOf(l.timeInputSelect.value)?(l.timeInputSelect.value=n?"customTime":"default",n&&(-1===["default","customTime"].indexOf(n)?(C(l.timeInput).val(n),C(l.timeInput).removeClass("hide")):(C("option:first",l.timeInputSelect).selected=!0,C(l.timeInputSelect).val("")))):C(l.timeInputSelect).val(n),I&&"single video landing page"!==L.layout.type_name&&(e=r,l.branchVideoTime.value=t||"",y(l,e,t)),v(l),l.timeInputSelect.addEventListener("change",p),I&&l.branchInputSelect.addEventListener("change",function(){h(l),f(l)}),l.thresholdInput.addEventListener("change",E,!1),hapyak.message.addEventListener("playlistItemsChanged",function(){y(l)}),(c=a.find(".modal-footer .modal-success:last")[0]).setAttribute("disabled","disabled"),b(l.passingMarkInput),x(l),u(l),_.validateOnClick({linkInput:l.linkInput})&&""!==l.linkInput.value?C(l.pauseInput.parentNode).show():C(l.pauseInput.parentNode).hide(),!I&&r&&r.length&&m(l)},success:function(){var e,t,n=Popcorn.extend({},o.pass||{}),i=Popcorn.extend({},o.quiz||{}),r="",a="";if(!u(l))return!1;l.linkInput&&l.linkInput.value&&(e=l.linkInput.value,d.test(e)||(e="http://"+e)),e?n.gotoLink=e:delete n.gotoLink,l.trackInput&&l.trackInput.value&&(r=l.trackInput.value),l.timeInput&&l.timeInput.value?r+="#"+l.timeInput.value:l.timeInputSelect&&l.timeInputSelect.value&&-1===["default","customTime"].indexOf(l.timeInputSelect.value)&&(r+="#"+l.timeInputSelect.value),l.branchInputSelect&&l.branchInputSelect.value&&(a=l.branchInputSelect.value),l.branchVideoTime&&l.branchVideoTime.value&&(t=l.branchVideoTime.value),r?n.gotoTrack=r:delete n.gotoTrack,a?n.goToVideo=a:delete n.goToVideo,t?n.branchVideoTime=t:delete n.branchVideoTime,l.varInput&&l.varInput.value?n.setVariables=l.varInput.value:delete n.setVariables,l.messageInput&&l.messageInput.value?n.thankYou=l.messageInput.value:delete n.thankYou,i.setPassThreshold=l.thresholdInput&&l.thresholdInput.checked,n.pause=l.pauseInput&&l.pauseInput.checked,l.passingMarkInput&&l.passingMarkInput.value?i.passingMark=l.passingMarkInput.value:delete i.passingMark,o.pass=n,o.quiz=i}}},{title:r.escape(P.tabs.fail),callbacks:{didInsertElement:function(e){var t,n,i,e=C(D).appendTo(C(".modal-body:first > section:last",e)[0]),r=0,a=["default","customTime"];for(s={linkInput:C(".hapyak-link-input:first",e)[0],timeInput:C(".hapyak-time-input:first",e)[0],timeInputSelect:C(".hapyak-time-input-select:first",e)[0],branchInputSelect:C(".hapyak-branch-input-select:first",e)[0],branchVideoTime:C(".hapyak-branchtime-input:first",e)[0],branchTimeWarning:C(".hapyak-branchtime-warning:first",e)[0],trackInput:C(".hapyak-track-input:first",e)[0],varInput:C(".hapyak-var-input:first",e)[0],thresholdInput:C(".hapyak-threshold-input:first",e)[0],passingMarkInput:C(".hapyak-passing-mark-input:first",e)[0],messageInput:C(".hapyak-message-textarea:first",e)[0],resetInput:C(".hapyak-reset-input:first",e)[0],pauseInput:C(".hapyak-pause-input:first",e)[0]},e=o.fail&&o.fail.gotoTrack?o.fail.gotoTrack.split("#"):[],t=o.fail&&o.fail.goToVideo?o.fail.goToVideo:[],n=o.fail&&o.fail.branchVideoTime?o.fail.branchVideoTime:[],s.linkInput.value=o.fail&&o.fail.gotoLink?o.fail.gotoLink:"",s.trackInput.value=e[0]||"",S.isProvisioned("API__ANNOTATION")&&(s.varInput.value=o.fail&&o.fail.setVariables?o.fail.setVariables:""),s.messageInput.value=o.fail&&o.fail.thankYou?o.fail.thankYou:"",s.messageInput.setAttribute("placeholder","Alternate message on fail"),!I&&t&&t.length&&m(s),s.thresholdInput.checked=!(!o.quiz||!o.quiz.setPassThreshold)&&o.quiz.setPassThreshold,k(s.passingMarkInput),s.passingMarkInput.value=o.quiz&&o.quiz.passingMark?o.quiz.passingMark:"51",C(s.resetInput.parentNode).removeClass("hide"),s.resetInput.checked=!o.fail||void 0===o.fail.resetVariables||o.fail.resetVariables,s.pauseInput.checked=!o.fail||void 0===o.fail.pause||o.fail.pause,i=e[1]||"",g(s.timeInputSelect);r<s.timeInputSelect.options.length;r++)if(s.timeInputSelect.options[r].value===i){s.timeInputSelect.options[r].selected=!0;break}-1<a.indexOf(s.timeInputSelect.value)?(s.timeInputSelect.value=i?"customTime":"default",i&&(-1===a.indexOf(i)?(C(s.timeInput).val(i),C(s.timeInput).removeClass("hide")):(C(s.timeInputSelect).val(""),C("option:first",s.timeInputSelect).selected=!0))):C(s.timeInputSel video landing page"!==L.layout.type_name&&(e=t,s.branchVideoTime.value=n||"",y(s,e,n)),s.thresholdInput.addEventListener("change",E,!1),v(s),s.timeInputSelect.addEventListener("change",p),I&&s.branchInputSelect.addEventListener("change",function(){h(s),f(s)}),b(s.passingMarkInput),w(l.thresholdInput),x(s),hapyak.message.addEventListener("playlistItemsChanged",function(){y(s)}),u(s),_.validateOnClick({linkInput:s.linkInput})&&""!==s.linkInput.value?C(s.pauseInput.parentNode).show():C(s.pauseInput.parentNode).hide()},success:function(){var e,t,n=Popcorn.extend({},o.fail||{}),i=Popcorn.extend({},o.quiz||{}),r="",a="";if(!u(s))return!1;s.linkInput&&s.linkInput.value&&(e=s.linkInput.value,d.test(e)||(e="http://"+e)),e?n.gotoLink=e:delete n.gotoLink,s.trackInput&&s.trackInput.value&&(r=s.trackInput.value),s.timeInput&&s.timeInput.value?r+="#"+s.timeInput.value:s.timeInputSelect&&s.timeInputSelect.value&&-1===["default","customTime"].indexOf(s.timeInputSelect.value)&&(r+="#"+s.timeInputSelect.value),s.branchInputSelect&&s.branchInputSelect.value&&(a=s.branchInputSelect.value),s.branchVideoTime&&s.branchVideoTime.value&&(t=s.branchVideoTime.value),r?n.gotoTrack=r:delete n.gotoTrack,a?n.goToVideo=a:delete n.goToVideo,t?n.branchVideoTime=t:delete n.branchVideoTime,s.varInput&&s.varInput.value?n.setVariables=s.varInput.value:delete n.setVariables,s.messageInput&&s.messageInput.value?n.thankYou=s.messageInput.value:delete n.thankYou,i.setPassThreshold=s.thresholdInput&&s.thresholdInput.checked,n.resetVariables=s.resetInput&&s.resetInput.checked,n.pause=s.pauseInput&&s.pauseInput.checked,s.passingMarkInput&&s.passingMarkInput.value?i.passingMark=s.passingMarkInput.value:delete i.passingMark,o.fail=n,o.quiz=i}}}],callbacks:{success:function(){e&&"function"==typeof e.success&&e.success({pass:o.pass,fail:o.fail,quiz:o.quiz})}}})}}),define("onsubmit.quiz",["jquery.noconflict","hapyak.overlay","lodash.noconflict","vendor/i18n!nls/ui"],function(s,t,l,e){"use strict";var c=e.annotation.quiz.dialog.onSubmit,d='<div class="hapyak-on-submit">   <div>       <input type="checkbox" class="pull-left hapyak-review-input" />       <label>'+l.escape(c.actions.review)+'</label>       <input type="checkbox" class="pull-left hapyak-retry-input" />       <label>'+l.escape(c.actions.retry)+'</label>       <input type="checkbox" class="pull-left hapyak-show-answer-input" />       <label>'+l.escape(c.actions.show_answer)+'</label>       <hr/>       <label class="hapyak-message-textarea-label">'+l.escape(c.reviewScreenMessage)+'</label>       <textarea type="text" class="hapyak-message-textarea" placeholder="Message"/>   </div></div>';return function(i,e){var r;function a(e){!r.reviewInput.checked&&e.currentTarget.checked&&(r.reviewInput.checked=!0),r.retryInput.checked||r.showAnswerInput.checked||r.messageTextArea.value||(r.reviewInput.checked=!1)}function o(e){e.currentTarget.checked||(r.retryInput.checked=r.showAnswerInput.checked=!1)}t.tabs({title:l.escape(c.title),tabs:[{callbacks:{didInsertElement:function(e){var t=s(d).appendTo(s(".modal-body:first > section:last",e)[0]),n=i.quiz;s(".modal-body:first > .nav-tabs:first",e).addClass("hide-tabs"),(r={reviewInput:s(".hapyak-review-input:first",t)[0],retryInput:s(".hapyak-retry-input:first",t)[0],showAnswerInput:s(".hapyak-show-answer-input:first",t)[0],messageTextArea:s(".hapyak-message-textarea:first",t)[0]}).reviewInput.checked=!n||void 0===n.showReview||n.showReview,r.retryInput.checked=!n||void 0===n.showRetry||n.showRetry,r.showAnswerInput.checked=!n||void 0===n.showResults||n.showResults,r.messageTextArea.value=n&&n.thankYouText?n.thankYouText:l.escape(c.thankYouText),s(r.reviewInput).on("change",o),l.each(["change","keyup"],function(e){s(r.messageTextArea).on(e,function(){r.messageTextArea.value?r.reviewInput.checked=!0:r.retryInput.checked||r.showAnswerInput.checked||(r.reviewInput.checked=!1)})}),s(".hapyak-retry-input:first, .hapyak-show-answer-input:first",t).on("change",a)},success:function(){var e=Popcorn.extend({},i.quiz||{});e.showReview=r.reviewInput&&r.reviewInput.checked,e.showRetry=r.retryInput&&r.retryInput.checked,e.showResults=r.showAnswerInput&&r.showAnswerInput.checked,r.messageTextArea&&r.messageTextArea.value?e.thankYouText=r.messageTextArea.value:delete e.thankYouText,i.quiz=e}}}],callbacks:{success:function(){e&&"function"==typeof e.success&&e.success({quiz:i.quiz})}}})}}),define("questions.quiz",["jquery.noconflict","hapyak.overlay","lodash.noconflict","vendor/i18n!nls/ui"],function(o,e,s,t){var l=t.annotation.quiz.dialog.questions,c='<div class="hapyak-on-submit">   <div>       <div class="alert alert-warning alert-dismissible" role="alert">           <strong>Warning!</strong> This change will be applied to all questions in this annotation.       </div>       <input type="checkbox" class="pull-left hapyak-multiple-answers-input" />       <label>'+s.escape(l.actions.multipleAnswers)+'</label>       <div>           <div>               <input type="checkbox" class="pull-left hapyak-multiple-required-input" />               <label>'+s.escape(l.actions.multipleRequired)+"</label>           </div>       </div>   </div></div>";return function(n,t){var i;function r(e){!i.multipleAnswersInput.checked&&e.currentTarget.checked&&(i.multipleAnswersInput.checked=!0)}function a(e){e.currentTarget.checked||(i.multipleRequiredInput.checked=!1)}e.confirm({title:s.escape(l.title),body:{callbacks:{didInsertElement:function(e){var e=o(c).appendTo(o(".modal-body:first > section:last",e)[0]),t=n.quiz;(i={multipleAnswersInput:o(".hapyak-multiple-answers-input:first",e)[0],multipleRequiredInput:o(".hapyak-multiple-required-input:first",e)[0]}).multipleAnswersInput.checked=t.multipleAnswers,i.multipleRequiredInput.checked=t.multipleRequired,o(i.multipleAnswersInput).on("change",a),o(i.multipleRequiredInput).on("change",r)}}},callbacks:{success:function(){tipleRequired=i.multipleR&&"function"==typeof t.success&&.dropdown",t)),n.isDefaultPreventedgth&&r('<div class="dropdown-backdrop"/>').insertAfter(r(this)).on("click",o);i={relatedTarget:this};if(n.trigger(e=r.Event("show.bs.dropdown",i)),e.isDefaultPrevented())return;t.trigger("focus"),n.toggleClass("open").trigger("shown.bs.dropdown",i)}return!1}},i.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var t=r(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var n=s(t),i=n.hasClass("open");if(!i||27==e.keyCode)return 27==e.which&&n.find(a).trigger("focus"),t.trigger(n--,40==e.keyCode&&n<t.length-1&&n++,t.eq(n=~n?n:0).tr.fn.dropdown=function(n){return this.each(function(){var e=r(this),t=e.data("bs.dropdown");t||e.data("bs.dropdown",t=new i(this)),"string"==typeof n&&t[n].call(e)})},r.fn.dropdown.Constructor=i,r.fn.dropdown.noConflict=function(){return r.fn.dropdown=e,this},r(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,i.prototype.toggle).on("keydown.bs.dropdown.data-api",a+', [role="menu"], [role="listbox"]',i.prototype.keydown)}),define("popcorn.quickedit.quiz",["jquery.noconflict","vendor/i18n!nls/ui","utils","quiz","promise!configuration","popcorn","actions.quiz","onsubmit.quiz","questions.quiz","popcorn.quickedit","popcorn.quiz","bootstrap.dropdg,y,b,w){"use strict";var E=window.document,k=v.provisioning.annotationTypes.quiz||{},x=e.annotation.quiz;g.quickEditor("quiz",function(){var n,i,r,e,t,a,o,s=this,l=new m({trackingId:this.popcorn.options.hapyakPlayer.instanceId}),c=!1;function d(){s.resize()}function u(e){e===s.trackEvent._id&&(s.quickEditor.done(),s.editContainer.style.display="none")}function p(){if(o!==s.settings.annotationId)return(o=parseInt(s.settings.annotationId,10))&&!s.trackEvent.quiz&&s.active&&h(),o}function h(e){if(c&&!0!==e)c=!1,r.hide(),i.show(),s.trackEvent.quiz=n.save(),s.save(),t.innerHTML="Edit Mode";else{if(!o)return;c=!0,t.innerHTML="View Mode",n||(s.trackEvent.quiz=g.extend({showResults:s.trackEvent.showResults,showRetry:s.trackEvent.showRetry,showSkip:s.trackEvent.showSkip,showReview:s.trackEvent.showReview,multipleAnswers:s.trackEvent.multipleAnswers,multipleRequired:s.trackEvent.multipleRequired},s.trackEvent.quiz||{}),n=l.editor({id:o,enable:{textChoice:!1!==k.textChoice},element:r,data:s.trackEvent.quiz,onDataChange:function(){s.resize()},verifyDelete:function(e){var t=E.createElement("div");s.createDialog({target:s.dialogContainer,success:e=e||function(){}}),t.textContent=x.text.warning.delete_page,s.dialogElements.quickEditMain.insertBefore(t,s.dialogElements.quickEditMain.firstChild),s.dialogElements.dialogSubmitButton.innerHTML="Yes",s.dialogElements.dialogCancelButton.innerHTML="No",s.dialogElements.dialogSubmitButton.disabled=!1,s.centerDialog()},onSubmitDialog:function(t){b(s.trackEvent,{success:function(e){t&&"function"==typeof t&&t(e),s.save()}})},actionsDialog:function(t){y(s.trackEvent,s.popcorn,{success:function(e){s.trackEvent.pass=e.pass,s.trackEvent.fail=e.fail,t&&"function"==typeof t&&t(e),s.save()}})},questionsDialog:function(t){w(s.trackEvent,{success:function(e){t&&"function"==typeof t&&t(e),s.trackEvent.quiz=n.save(),n.destroy(),h(!(n=!1)),s.save()}})},textDialog:function(e,t,n){var i=E.createElement("div");n=n||function(){},s.createDialog({target:s.dialogContainer,success:function(){n(f("input",i).val())}}),i.innerHTML="<input type='text'>",t&&f("input",i).val(t),s.dialogElements.quickEditMain.insertBefore(i,s.dialogElements.quickEditMain.firstChild),s.dialogElements.quickEditDialogTitle.innerHTML=e,s.dialogElements.dialogSubmitButton.innerHTML="Save",s.dialogElements.dialogCancelButton.innerHTML="Cancel",s.dialogElements.dialogSubmitButton.disabled=!1,s.centerDialog()},annotationVariableConfig:s.trackEvent.annotationVariableConfig})),r[0].parentNode!==s.trackEvent.container&&s.trackEvent.container.appendChild(r[0]),r.show(),i.hide()}s.resize()}return s.popcorn.on("hapyak-quiz-done",u),r=r||f('<div class="hapyak-quiz-container quiz-editor" style="display:none"></div>'),(t=E.createElement("div")).innerHTML="Edit Mode",t.addEventListener("click",h,!1),a=[],p()||s.on("annotationId",p),v.player.gates&&((e=E.createElement("div")).innerHTML=s.trackEvent.gate?"Gate: Y":"Gate: N",e.addEventListener("click",function(){s.trackEvent.gate=!s.trackEvent.gate,e.innerHTML=s.trackEvent.gate?"Gate: Y":"Gate: N",s.trackEvent.gate?s.addClass(s.trackEvent.container,"hapyak-action-gate"):s.removeClass(s.trackEvent.container,"hapyak-action-gate"),s.save()},!1),a.splice(0,0,e)),s.moreButtons(a,!0),this.editContainer.insertBefore(t,this.moreButtonsContainer||this.previewButton),{activate:function(e){i=f(".quiz-viewer",s.trackEvent.container),s.editContainer.style.display="",s.trackEvent.quiz||h(),this.draggable({dragContainer:!1,scaleHeight:!1,scale:function(e,t,n,i){s.trackEvent.width=n+"%",s.trackEvent.top=t+"%",s.trackEvent.left=e+"%",s.trackEvent.container.style.width=s.trackEvent.width,s.trackEvent.container.style.left=e+"%",s.trackEvent.container.style.top=t+"%",s.resize()}}),s.resize(),s.trackEvent.container.removeEventListener("click",d,!1),s.trackEvent.container.addEventListener("click",d,!1)},resize:function(){var e,t=s.trackEvent.container,n=r.is(":visible")?r:i;t&&t.parentNode&&n&&(e=t.parentNode,n.css({"max-height":e.offsetTop+e.offsetHeight-t.offsetTop+"px","overflow-y":"auto"}))},start:function(){f(s.trackEvent.container).removeClass("hapyak-review-screen").css({top:s.trackEvent.top,left:s.trackEvent.left}),h(!0)},save:function(){n&&(s.trackEvent.quiz=n.save(),s.trackEvent.pluginData.recreateViewer=!0)},end:function(){r&&r.hide(),i.show(),s.removeClass(s.trackEvent.container,"editing")},_teardown:function(){s.trackEvent.container.removeEventListener("click",d,!1),s.popcorn.off("hapyak-quiz-done",u)}}})}),define("vendor/text!portal/templates/components/animated-button.hbs",[],function(){return'\n<script type="text/template" id="circle-loading">\n    <svg width="120px" height="120px">\n        <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n        <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n        <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n        <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n        <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n    </svg>\n<\/script>\n\n<div {{bind-attr class=":btn-large :loading-button :circular-loading :btn :align-left view.disabled:disabled" }} {{action "pressButton"}}>{{view.initialText}}</div>\n'}),define("vendor/text!portal/templates/components/brightcove-live.hbs",[],function(){return'{{#if joiningExisting}}\n    <div class="option">\n        <label class="control-label col-xs-6" for="live-stream-modal-brightcove-jobid">\n            <div class="text-left">Brightcove Live Job ID</div>\n        </label>\n\n        <div class="col-xs-6">\n            {{input type=\'text\' id="live-stream-modal-brightcove-jobid" value=jobId}}\n        </div>\n    </div>\n{{else}}\n    {{#if configValid}}\n        <div class="option">\n            <label class="control-label col-xs-6" for="live-stream-modal-region">\n                <div class="text-left">Region</div>\n            </label>\n\n            <div class="col-xs-6">\n                {{view Ember.Select id="live-stream-modal-region" class="browser-default" contentBinding="regions" optionLabelPath="content.label" optionValuePath="content.value" valueBinding="region" selection="region"}}\n            </div>\n        </div>\n\n        <div class="option">\n            <label class="control-label col-xs-6" for="live-stream-modal-quality">\n                <div class="text-left">Max Quality (affects hours used)</div>\n            </label>\n\n            <div class="col-xs-6">\n                {{view Ember.Select id="live-stream-modal-quality" class="browser-default" contentBinding="qualities" optionLabelPath="content.label" optionValuePath="content.value" valueBinding="quality" selection="quality"}}\n            </div>\n        </div>\n\n        <div class="option">\n            <label class="control-label col-xs-8" for="live-stream-modal-bc-player">\n                <div class="text-left">Brightcove Player</div>\n            </label>\n\n            <div class="col-xs-4">\n                {{input-text inputType="text" valueBinding="bcPlayer" settingId="bcPlayer"}}\n            </div>\n        </div>\n\n        <div class="option">\n            <label class="control-label col-xs-6" for="live-stream-modal-create-vod">\n                <div class="text-left">Create VOD in Brightcove Videocloud</div>\n            </label>\n\n            <div class="col-xs-6">\n                <div class="switch right">\n                    <label>\n                        No\n                        {{input id="live-stream-modal-create-vod" type="checkbox" checked=createVOD}}\n                        <span class="lever" ></span>\n                        Yes\n                    </label>\n                </div>\n            </div>\n        </div>\n\n        <div id="section-toggle" {{action "toggleAdvancedOptions"}}>{{#if showAdvancedOptions}}Hide{{else}}Show{{/if}} Advanced Options</div>\n\n        {{#if showAdvancedOptions}}\n            <div class="option no-bottom push-up">\n                <label class="control-label" for="live-stream-payload-input">\n                    <div class="text-left">Stream Payload</div>\n                </label>\n\n                {{textarea id="live-stream-payload-input" cols="80" rows="10" valueBinding="payload"}}\n            </div>\n        {{/if}}\n    {{/if}}\n    {{#unless configValid}}\n        <div class="form-group alert alert-info">Your group is not configured to use Brightcove live streaming.</div>\n    {{/unless}}\n{{/if}}\n'}),define("vendor/text!portal/templates/components/live-stream-modal.hbs",[],function(){return'<div class="materialize">\n    {{#if view.showPreloader}}\n        {{preloader-component}}\n    {{else}}\n        {{#if view.streamIsLive}}\n            {{#if view.streamMetadataArray}}\n                {{#if view.streamMetadata.stream_url}}\n                    <div class="form-group alert alert-info">Copy-and-paste the <b>STREAM URL</b> and <b>STREAM NAME</b> into your encoding software to connect your video stream.</div>\n                {{/if}}\n\n                {{#each prop in view.streamMetadataArray}}\n                    <div class="copyable-field row">\n                        <div class="field-title">{{prop.key}}</div>\n                        <div class="row">\n                            <div {{bind-attr id="prop.id"}} class="field-value col s11">{{prop.value}}</div>\n                        </div>\n                        <i class="material-icons copy-icon" {{action copyToClipboard prop.id target=view}}>content_copy</i>\n                    </div>\n                {{/each}}\n            {{/if}}\n        {{/if}}\n\n        {{#unless view.streamIsLive}}\n            <div class="alert alert-info">Ensure all information is correct before clicking save. After saving, stream configuration <strong>cannot</strong> be edited.</div>\n\n            {{#tab-control active=view.activeTab}}\n                <div class="materialize row">\n                    <div class="col s6 offset-s3">\n                        <ul class="tabs">\n                            {{#view view.TabSelect name="newStream" className="active" href="#tab0"}}<div>Create New</div>{{/view}}\n                            {{#view view.TabSelect name="existingStream" href="#tab1"}}<div>Join Existing</div>{{/view}}\n                        </ul>\n                    </div>\n                </div>\n\n                <div class="tab-content">\n                    {{#view view.TabContainer name="newStream"}}\n                        <div class="option">\n                            <label class="control-label col-xs-6" for="live-stream-player-type">\n                                <div class="text-left">Player Type</div>\n                            </label>\n\n                            <div class="col-xs-6">\n                                {{view Ember.Select id="live-stream-player-type" class="browser-default" contentBinding="streamPlayerTypes" optionLabelPath="content" optionValuePath="content" valueBinding="embedType" selection="embedType"}}\n                            </div>\n                        </div>\n\n                        {{#if isBrightcove}}\n                            {{brightcove-live newStreamProvider=newStreamProvider activeTab=active experience=experience}}\n                        {{/if}}\n                    {{/view}}\n\n                    {{#view view.TabContainer name="existingStream"}}\n                        <div class="option">\n                            <label class="control-label col-xs-6" for="live-stream-modal-existing-type">\n                                <div class="text-left">Type</div>\n                            </label>\n                            <div class="col-xs-6">\n                                {{view Ember.Select id="live-stream-modal-existing-type" classNames="form-control" contentBinding="joinExistingOptions" optionValuePath="content" optionLabelPath="content" valueBinding="joinExistingType"}}\n                            </div>\n                        </div>\n\n                        {{#if isBrightcoveExisting}}\n                            {{brightcove-live existingStreamProvider=existingStreamProvider activeTab=active experience=experience joiningExisting=true}}\n                        {{/if}}\n                        {{#unless isBrightcoveExisting}}\n                            <div class="option no-bottom">\n                                <label class="control-label" for="live-stream-modal-input">\n                                    <div class="text-left">Embed Code Or URL</div>\n                                </label>\n\n                                {{textarea id="live-stream-modal-input" cols="80" rows="10" valueBinding="input"}}\n                            </div>\n                        {{/unless}}\n                    {{/view}}\n                </div>\n            {{/tab-control}}\n\n            <div class="row last-button">\n                <button {{action "confirm"}} {{bind-attr class=":waves-effect :waves-light :btn-small :btn :right isDisabled:disabled"}}>{{confirmButton}}</button>\n            </div>\n        {{/unless}}\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/components/data-table.hbs",[],function(){return"<thead>\n    <tr>\n{{#each columns}}\n        <th>{{label}}</th>\n{{/each}}\n    </tr>\n</thead>\n<tbody>\n</tbody>\n"}),define("vendor/text!portal/templates/components/extended-editor.hbs",[],function(){return'\n{{#if isReady}}\n    <div id="extended-editor-menu-bar" {{bind-attr class="visual::list-view"}}>\n        {{#if canUseVisualTimelineEditor}}\n            <span class="toggle" {{action \'toggleView\'}}>{{#if visual}}Switch to List View{{else}}Switch to Visual View{{/if}}</span>\n        {{/if}}\n\n        {{#if visual}}\n            <div class="beta-label">\n                <span data-tooltip-position="bottom" data-tooltip-content="This is a beta feature. You may encounter performance issues on Projects with a large number of annotations.">BETA</span>\n            </div>\n        {{/if}}\n\n        <span class="hint">{{#unless visual}}Select multiple with CMD/CTRL{{/unless}}</span>\n    </div>\n\n    {{#if canUseVisualTimelineEditor}}\n        {{vte-container\n            viewOnly=viewOnly\n            needsUpdate=needsUpdate\n            segmentLeftPosition=segmentLeftPosition\n            segmentRightPosition=segmentRightPosition\n            segmentScale=segmentScale\n            annotations=annotations\n            editor=editor\n            visual=visual\n        }}\n    {{/if}}\n\n    <div {{bind-attr class="visual:hide"}}>\n        {{view view.AnnotationListView id="hapyak-annotation-list" editor=editor viewOnly=viewOnly needsUpdate=needsUpdate}}\n    </div>\n{{else}}\n    <div class="materialize">\n        {{preloader-component}}\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/components/x-editable.hbs",[],function(){return'<p class="form-control-static editable">{{#if content}}{{content}}{{else}}&nbsp;{{/if}}</p>\n'}),define("vendor/text!portal/templates/components/card-input.hbs",[],function(){return'\n<div {{action \'edit\' content}} {{bind-attr class=":card-field currentlyEditing:editing"}}>\n    {{#if image}}\n        <div class="card-field-icon-container">\n            <div class="card-field-icon" {{bind-attr style=image}} ></div>\n        </div>\n    {{/if}}\n\n    <div class="card-field-content-container">\n        <div {{bind-attr class=":card-field-content-placeholder content:has-content"}}>{{type}}</div>\n        <div class="card-field-content">{{content}}</div>\n    </div>\n\n    <div class="card-input-container">\n        <i class="card-input-icons card-input-edit-button fa fa-pencil"></i>\n        {{#if inputType}}\n            {{textarea focus-out="focusOutInput" class="card-input" value=content}}\n        {{else}}\n            {{input focus-out="focusOutInput" class="card-input" value=content}}\n        {{/if}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/components/real-time-stats.hbs",[],function(){return'<div {{bind-attr class=":materialize :real-time-stats :text-center isHome:home:reports"}}>\n    <div class="row title">\n        <div class="col s12 m3 data-box">\n            Right now <span class="new badge">beta</span>\n        </div>\n        <div class="col s12 m7 data-box">\n            Over the last 7 days\n        </div>\n    </div>\n    <div class="row stat-boxes">\n        <div {{bind-attr class=":col :s12 :m2 :l2 :data-box haveRealTimeData:active"}}>\n            <div {{bind-attr class=":number :active-sessions :sessions sessionsEnabled:active:disabled"}}>{{currentSessions}}</div>\n            <div class="label sessions">active sessions</div>\n        </div>\n        <div {{bind-attr class=":col :s12 :m2 :l2 :data-box :interaction-rate haveRealTimeData:active"}}>\n            <div {{bind-attr class=":number :emphasis interactionRateEnabled:active:disabled"}} class="number emphasis"><div class="rate">{{interactionRate}}</div>\n                {{#if interactionRateEnabled}}\n                    <div class="percent">%</div>\n                {{/if}}\n            </div>\n            <div class="label">interaction rate</div>\n        </div>\n        <div {{bind-attr class=":col :s12 :m2 :l2 :data-box haveRealTimeData:active"}}>\n            <div {{bind-attr class=":number playCountEnabled:active:disabled"}}>{{playCount}}</div>\n            <div class="label">plays</div>\n        </div>\n        <div {{bind-attr class=":col :s12 :m2 :l2 :data-box haveRealTimeData:active"}}>\n            <div {{bind-attr class=":number interactionsEnabled:active:disabled"}}>{{interactions}}</div>\n            <div class="label">plays with interaction</div>\n        </div>\n        <div {{bind-attr class=":col :s12 :m2 :l2 :data-box haveRealTimeData:active"}}>\n            <div {{bind-attr class=":number peopleEnabled:active:disabled"}}>{{uniquePeople}}</div>\n            <div class="label">people</div>\n        </div>\n        <div class="col s12 m2 l2">\n            {{#link-to "reports"}}\n                <div class="btn">\n                    <i class="material-icons">multiline_chart</i> VIEW REPORTS\n                </div>\n            {{/link-to}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/components/real-time-active-sessions.hbs",[],function(){return"<div>\n    {{data-table\n        data=rows\n        columns=columns\n        processing=processing\n        serverSide=serverSide\n        pageLength=pageLength\n        target=this}}\n</div>\n"}),define("vendor/text!portal/templates/components/radio-button.hbs",[],function(){return'<input type="radio" {{bind-attr name="name"}} {{bind-attr id="inputId"}} {{bind-attr checked="checked"}} {{bind-attr disabled="disabled"}}/>\n<label {{bind-attr for="inputId"}}>{{label}}</label>\n'}),define("vendor/text!portal/templates/components/mail-to.hbs",[],function(){return'\n{{#if to}}\n    {{#if text}}\n        {{yield}}\n        <span class="mail-to-text">{{text}}</span>\n    {{/if}}\n{{/if}}\n'}),define("vendor/text!portal/templates/components/quick-start-card.hbs",[],function(){return'<div class="col s12">\n    <div class="card">\n        <div class="card-image" {{action "startButtonClick"}}>\n            {{#if data.mp4}}\n                <video class="card-image-inner" muted loop>\n                    <source  {{bind-attr src="data.mp4"}} type="video/mp4">\n                </video>\n            {{/if}}\n            <div {{bind-attr class=":card-image-background data.create"}}>\n                {{#if data.icon}}\n                    <i class="material-icons card-image-icon">{{data.icon}}</i>\n                {{/if}}\n                {{#unless data.icon}}\n                    <span class="card-image-icon">{{data.id}}</span>\n                {{/unless}}\n            </div>\n        </div>\n        <div class="card-content">\n            <span class="card-title">{{data.name}}</span>\n            <p>{{data.description}}</p>\n        </div>\n        <div class="card-action right-align">\n            {{#if data.guideUrl}}\n                {{quick-start-guide-btn application=application guideId=data.id text="Learn"}}\n            {{/if}}\n            <button class="waves-effect waves-light btn" {{action "startButtonClick"}}>\n                {{#if data.guideUrl}}Start{{/if}}\n                {{#unless data.guideUrl}}Create{{/unless}}\n            </button>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/components/quick-start-guide.hbs",[],function(){return'\n{{#slide-in showSlider=application.showQuickStartGuide title="Guides" closeAction=closeAction}}\n    <div id="quick-start-slide-in-body" {{bind-attr class=":slide-in-body data:chosen"}}>\n        <ul {{bind-attr class=":collection data:chosen"}}>\n            {{#each guide in guides}}\n                <li {{bind-attr class=":collection-item guide.state"}} {{action "loadGuide" guide.id}}>\n                    <i class="material-icons quick-start-guide-back-arrow" {{action "back" bubbles=false}}>arrow_back</i>\n                    <div class="title-container">\n                        <i class="material-icons">{{guide.icon}}</i>\n                        <span class="title">{{guide.name}}</span>\n                    </div>\n                    <i class="material-icons right-arrow">keyboard_arrow_right</i>\n                    {{#unless edit}}\n                        <a class="waves-effect waves-light btn start-button" {{action "startButtonClick"}}>Start</a>\n                    {{/unless}}\n                </li>\n            {{/each}}\n        </ul>\n\n        <div {{bind-attr class=":guide-content data:chosen"}}>\n            {{#if data}}\n                {{#if data.guideUrl}}\n                    <iframe {{bind-attr src="data.guideUrl"}} class="guide-iframe" frameborder="0"></iframe>\n                {{/if}}\n                {{#unless data.guideUrl}}\n                    <div class="row">\n                        {{data.description}}\n                    </div>\n                {{/unless}}\n            {{/if}}\n        </div>\n    </div>\n{{/slide-in}}\n'}),define("vendor/text!portal/templates/components/quick-start-guide-btn.hbs",[],function(){return'{{#if side}}\n    <span>{{text}}</span>\n    <i class="material-icons">help</i>\n{{/if}}\n{{#unless side}}\n    {{text}}\n{{/unless}}\n'}),define("vendor/text!portal/templates/components/send-email.hbs",[],function(){return'{{#unless emailSent}}\n    <button class="waves-effect waves-light btn hapyak-blue" {{action "send" target="view"}}>{{text}}</button>\n{{/unless}}\n{{#if emailSent}}\n    <button disabled {{bind-attr class="emailSent :sent :waves-effect :waves-light :btn"}}>{{sentText}}</button>\n{{/if}}\n'}),define("vendor/text!portal/templates/components/send-email-form.hbs",[],function(){return'{{#unless emailSent}}\n    {{input-text-area label=label placeholder=placeholder value=body}}\n\n    {{#if includeContactEmail}}\n        {{input-email label="Contact Email" placeholder="Contact Email" value=from}}\n    {{/if}}\n{{/unless}}\n\n{{#if emailSent}}\n    <div class="card-option">\n        <b {{bind-attr class="emailSent :option-description"}}>{{sentText}}</b>\n    </div>\n{{/if}}\n{{send-email to=to from=from cc=cc bcc=bcc subject=subject bodyPrefix=bodyPrefix body=body text=text}}\n'}),define("vendor/text!portal/templates/components/slide-in.hbs",[],function(){return'<div class="hapyak-slide-in">\n    <div class="slide-in-header">\n        <div>\n            <div class="slide-in-close" {{action "close"}}><i class="material-icons">close</i></div>\n            <div class="slide-in-title">{{title}}</div>\n        </div>\n    </div>\n    {{yield}}\n</div>\n<div id="hapyak-slide-in-background" class="slide-in-background"></div>\n'}),define("vendor/text!portal/templates/components/slide-in-nav.hbs",[],function(){return'\n<div class="hapyak-slide-in-nav-background"></div>\n\n<div class="hapyak-slide-in-nav-header">\n    <div id="hapyak-slide-in-nav-background-image"></div>\n    <div id="hapyak-slide-in-nav-menu-icon" title="toggle menu" {{action "toggle"}}><i class="material-icons">{{icon}}</i></div>\n</div>\n\n<div class="hapyak-slide-in-nav-body">\n    {{slide-in-nav-sections application=application}}\n</div>\n'}),define("vendor/text!portal/templates/components/slide-in-nav-sections.hbs",[],function(){return'{{#unless isReporter}}\n    <div class="hapyak-slide-in-nav-section">\n        <div class="hapyak-slide-in-nav-icons">\n            {{#view view.ActiveLinkView}}\n                {{#link-to "index"}}\n                    <div class="icon-holder" title="Create">\n                        <i class="material-icons">add_to_queue</i>\n                        <p class="nav-link" {{action "navAction" "index"}}>CREATE</p>\n                    </div>\n                {{/link-to}}\n            {{/view}}\n            {{#view view.ActiveLinkView}}\n                {{#link-to application.lastManageRoute}}\n                    <div class="icon-holder" title="Manage">\n                        <i class="material-icons">dvr</i>\n                        <p class="nav-link" {{action "navAction" "index"}}>MANAGE</p>\n                    </div>\n                {{/link-to}}\n            {{/view}}\n        </div>\n    </div>\n    {{#if isAdmin}}\n        <div class="hapyak-slide-in-nav-section">\n            <div class="hapyak-slide-in-nav-section-header">Settings</div>\n            <div class="hapyak-slide-in-nav-icons">\n                {{#view view.ActiveLinkView}}\n                    {{#link-to "settings.style"}}\n                        <div class="icon-holder" title="Style">\n                            <i class="material-icons">style</i>\n                            <p class="nav-link" {{action "navAction" "style"}}>STYLE</p>\n                        </div>\n                    {{/link-to}}\n                {{/view}}\n                {{#view view.ActiveLinkView}}\n                    {{#link-to "settings.integrations"}}\n                        <div class="icon-holder" title="Integrations">\n                            <i class="material-icons">settings_input_component</i>\n                            <p class="nav-link" {{action "navAction" "integrations"}}>INTEGRATIONS</p>\n                        </div>\n                    {{/link-to}}\n                {{/view}}\n                {{#view view.ActiveLinkView}}\n                    {{#link-to "settings.defaults"}}\n                        <div class="icon-holder" title="Defaults">\n                            <i class="material-icons">settings</i>\n                           <p class="nav-link" {{action "navAction" "defaults"}}>DEFAULTS</p>\n                        </div>\n                    {{/link-to}}\n                {{/view}}\n                {{#view view.ActiveLinkView}}\n                    {{#link-to "settings.admin"}}\n                        <div class="icon-holder" title="Admin">\n                            <i class="material-icons">security</i>\n                            <p class="nav-link" {{action "navAction" "admin"}}>ADMIN</p>\n                        </div>\n                    {{/link-to}}\n                {{/view}}\n            </div>\n        </div>\n    {{/if}}\n{{/unless}}\n\n<div class="hapyak-slide-in-nav-section">\n    <div class="hapyak-slide-in-nav-section-header" {{bind-attr class="isReporter:no-top-border"}}>Reports</div>\n    <div class="hapyak-slide-in-nav-icons">\n        {{#view view.ActiveLinkView}}\n            {{#link-to "reports.index"}}\n                <div class="icon-holder" title="Heartbeat">\n                    <i class="material-icons">favorite</i>\n                    <p class="nav-link">HEARTBEAT</p>\n                </div>\n            {{/link-to}}\n        {{/view}}\n        {{#view view.ActiveLinkView}}\n            {{#link-to "coreReports" (query-params record=false detail=false)}}\n                <div class="icon-holder" title="Core Reports">\n                    <i class="material-icons">assessment</i>\n                    <p class="nav-link">CORE REPORTS</p>\n                </div>\n            {{/link-to}}\n        {{/view}}\n        {{#if configuration.provisioning.reports.custom}}\n            {{#view view.ActiveLinkView}}\n                {{#link-to "customReports" (query-params record=false detail=false)}}\n                    <div class="icon-holder" title="Custom Reports">\n                        <i class="material-icons">description</i>\n                        <p class="nav-link">CUSTOM REPORTS</p>\n                    </div>\n                {{/link-to}}\n            {{/view}}\n        {{/if}}\n        {{#view view.ActiveLinkView}}\n            {{#link-to "reports.questions" (query-params record=false)}}\n                <div class="icon-holder" title="Question Report">\n                    <i class="material-icons">message</i>\n                    <p class="nav-link">QUESTION REPORT</p>\n                </div>\n            {{/link-to}}\n        {{/view}}\n        {{#view view.ActiveLinkView}}\n            {{#link-to "reports.grades" (query-params record=false detail=false username=false)}}\n                <div class="icon-holder" title="Gradebook">\n                    <i class="material-icons">import_contacts</i>\n                    <p class="nav-link">GRADEBOOK</p>\n                </div>\n            {{/link-to}}\n        {{/view}}\n    </div>\n</div>\n\n<div class="hapyak-slide-in-nav-section">\n    <div class="hapyak-slide-in-nav-section-header">Help</div>\n    <div class="hapyak-slide-in-nav-icons">\n        <a href="http://academy.hapyak.com" target="_blank">\n            <div class="icon-holder" title="HapYak Academy">\n                <i class="external-link material-icons">launch</i>\n                <i class="material-icons">school</i>\n                <p class="nav-link">ACADEMY</p>\n            </div>\n        </a>\n        <a href="http://kb.hapyak.com/" target="_blank">\n            <div class="icon-holder" title="Knowledge Base">\n                <i class="external-link material-icons">launch</i>\n                <i class="material-icons">class</i>\n                <p class="nav-link">KNOWLEDGE BASE</p>\n            </div>\n        </a>\n        {{#if configuration.provisioning.api.annotation}}\n            <a href="http://www.hapyak.com/docs/" target="_blank">\n                <div class="icon-holder" title="API Documentation">\n                    <i class="external-link material-icons">launch</i>\n                    <i class="material-icons">developer_board</i>\n                    <p class="nav-link">API DOCS</p>\n                </div>\n            </a>\n        {{/if}}\n    </div>\n</div>\n\n<div class="hapyak-slide-in-nav-section">\n    <div class="hapyak-slide-in-nav-section-header"></div>\n    <div class="hapyak-slide-in-nav-icons">\n        <div class="privacy-holder">\n            <p class="nav-link privacy">By using HapYak you agree to the <a target="_blank" title="Privacy Policy" href="https://corp.hapyak.com/privacy-policy/">Privacy Policy</a> and <a target="_blank" title="Terms & Conditions" href="https://corp.hapyak.com/terms-and-conditions/">Terms & Conditions</a>.</p>\n        </div>\n    </div>\n</div>'}),define("vendor/text!portal/templates/components/share-modal.hbs",[],function(){return'<div class="hapyak-share-modal-section">\n    <div class="hapyak-share-modal-section-header">Share Type{{#if projectController.behavior.disable_can_edit}}<i class="material-icons margin-left">lock</i>{{/if}}</div>\n\n    <div class="hapyak-share-modal-subsection">\n        <div class="hapyak-share-modal-subsection-header">{{#if chosenType}}CHOSEN TYPE{{else}}CHOOSE A TYPE{{/if}}</div>\n        <div class="hapyak-share-modal-subsection-content">\n            {{#each type in allowedEmbedTypes}}\n                <div {{bind-attr class=":hapyak-share-modal-type type.chosen:chosen"}}>\n                    <div class="hapyak-share-modal-type-left">\n                        <img class="hapyak-share-modal-type-image" {{bind-attr src="type.image"}}>\n                    </div>\n\n                    <div class="hapyak-share-modal-type-right">\n                        {{#if showCloseButton}}\n                            <i class="material-icons hapyak-slide-in-subsection-close" {{action setChosenType null}}>close</i>\n                        {{/if}}\n\n                        <div class="hapyak-share-modal-type-name">{{type.name}}</div>\n                    </div>\n\n                    <div class="hapyak-share-modal-type-description">{{{type.description}}}</div>\n\n                    {{#unless type.chosen}}\n                        <div class="hapyak-share-modal-type-click-area" {{action setChosenType type}}></div>\n                    {{/unless}}\n                </div>\n            {{/each}}\n        </div>\n    </div>\n\n    {{#if chosenType}}\n        {{view chosenType.view modal=this projectController=projectController experienceController=experienceController}}\n    {{/if}}\n\n    <div {{bind-attr class=":hapyak-share-modal-subsection chosenType::hide-section"}}>\n        <div class="hapyak-share-modal-subsection-header key">EMBED CODE OR LINK</div>\n        {{#if testPreviewPage}}\n            <div class="hapyak-share-modal-subsection-header value option-toggle">\n                <span {{action showPreviewLink false}} {{bind-attr class=":option-toggle-choice showingPreviewLink::chosen"}}>EMBED CODE</span>\n                <span class="light"> | </span>\n                <span {{action showPreviewLink true}} {{bind-attr class=":option-toggle-choice showingPreviewLink:chosen"}}>PREVIEW LINK</span>\n            </div>\n        {{/if}}\n\n        <div class="hapyak-share-modal-embed-code-wrapper">\n            {{#if isWorkflowPrerelease}}\n                <div class="alert-bar">PRE-RELEASE  DO NOT USE THIS EMBED CODE IN A PRODUCTION ENVIRONMENT</div>\n            {{/if}}\n\n            <div {{bind-attr class=":hapyak-share-modal-embed-code chosenType:available"}}>{{!--\n            These weird comments are necessary due to automatic insertion of spaces into DOM when using display: inline elements\n            --}}{{#if loading}}{{!--\n                --}}<div class="progress"><div class="indeterminate"></div></div>{{!--\n            --}}{{/if}}{{!--\n            --}}{{#unless loading}}{{!--\n                --}}{{#unless dropdownInfo}}{{!--\n                    --}}<div id="hapyak-share-modal-embed-code-text-node" {{action \'selectText\' on=\'mouseDown\'}}>{{!--\n                        --}}{{displayedCode}}{{!--\n                    --}}</div>{{!--\n                --}}{{/unless}}{{!--\n                --}}{{#if dropdownInfo}}{{!--\n                    --}}<label>{{dropdownInfo.label}}</label>{{!--\n                    --}}<select id="hapyak-share-modal-embed-code-select" class="browser-default" {{action \'changedSelection\' on=\'change\'}}>{{!--\n                        --}}<option value="" disabled selected>{{dropdownInfo.label}}</option>{{!--\n                        --}}{{#each option in dropdownInfo.options}}{{!--\n                            --}}<option {{bind-attr value="option.value"}} {{bind-attr data-view="option.view"}} {{bind-attr data-edit="option.edit"}}>{{option.label}}</option>{{!--\n                        --}}{{/each}}{{!--\n                    --}}</select>{{!--\n                --}}{{/if}}{{!--\n                --}}{{textarea value=displayedCode class="hide-on-page" id="hapyak-share-modal-embed-code-textarea"}}{{!--\n            --}}{{/unless}}{{!--\n        --}}</div>\n\n            {{#if scormVersion}}\n                <div class="info-text" {{bind-attr class="dropdownInfo:above-dropdown"}}>Version {{scormVersion}}</div>\n            {{/if}}\n        </div>\n        <button type="button" {{bind-attr class=":waves-effect :waves-light :btn disableButton:disabled"}} {{action "buttonClicked"}}>{{buttonText}}</button>\n        {{#if chosenType.secondaryButtonAction}}\n            <button type="button" class="waves-effect waves-light btn right margin-left" {{action "secondaryButtonClicked"}}>{{chosenType.secondaryButton}}</button>\n        {{/if}}\n\n        {{#if testPreviewPage}}\n            <a class="btn waves-effect waves-light right margin-left" target="_blank" {{bind-attr href="testPreviewPage"}}>Preview</a>\n        {{/if}}\n        {{#if chosenType}}\n            {{#if experienceViewUrl}}\n                <a class="btn waves-effect waves-light right margin-left" target="_blank" {{bind-attr href="experienceViewUrl"}}>View</a>\n            {{/if}}\n        {{/if}}\n        {{#if chosenType}}\n            {{#if experienceEditUrl}}\n                <a class="btn-flat waves-effect waves-light right margin-left" {{bind-attr href="experienceEditUrl"}}>Edit</a>\n            {{/if}}\n        {{/if}}\n    </div>\n</div>\n\n{{#if workflowState}}\n    <div class="hapyak-share-modal-section">\n        <div class="hapyak-share-modal-section-header">{{workflowState.workflow.display_name}} Workflow</div>\n\n        {{#if releaseToBrightcove}}\n            <div class="hapyak-share-modal-subsection">\n                <div class="hapyak-share-modal-subsection-header key">BRIGHTCOVE RELEASE INFORMATION</div>\n\n                <div id="QA_workflow-state-release-to-brightcove-description" class="hapyak-share-modal-option-description">\n                    Your Group is configured to release to Brightcove. <b>During the approval process your Project will only be accessible through the HapYak Player.</b> Upon release your Project will be available in the <a target="_blank" href="https://studio.brightcove.com/products/videocloud/media">Brightcove Studio</a> via the <a target="_blank" href="https://kb.hapyak.com/integrations/hapyak-plugin-for-brightcove">HapYak Plugin</a>. The Share Type will be switched to Brightcove Native Player.\n                </div>\n            </div>\n        {{/if}}\n\n        <div class="hapyak-share-modal-subsection">\n            <div class="hapyak-share-modal-subsection-header key">CURRENT STATE</div>\n            <span class="hapyak-share-modal-subsection-header value" {{bind-attr style=workflowState.style}}>\n                <i class="material-icons">{{workflowState.properties.material_icon}}</i>\n                <span>{{workflowState.display_name}}</span>\n            </span>\n\n            {{#if workflowState.properties.description}}\n                <div id="QA_workflow-state-description" class="hapyak-share-modal-option-description">{{workflowState.properties.description}}</div>\n            {{/if}}\n        </div>\n\n        {{#if workflowTransitions}}\n            <div class="hapyak-share-modal-subsection">\n                <div class="hapyak-share-modal-subsection-header key">NEXT STEP</div>\n\n                {{#unless chosenType}}\n                    <div class="hapyak-share-modal-option-description">Choose a Share Type above.</div>\n                {{/unless}}\n\n                {{#if workflowState.properties.next_step_text}}\n                    <div class="hapyak-share-modal-option-description">{{workflowState.properties.next_step_text}}</div>\n                {{/if}}\n\n                {{#if chosenType}}\n                    <div class="hapyak-share-modal-option right-align">\n                        {{#if workflowState.properties.transitions.previous.button}}\n                            <button type="button" class="waves-effect waves-light btn" {{action "handleWorkflowTransition" workflowState.properties.transitions.previous true}}>{{workflowState.properties.transitions.previous.button}}</button>\n                        {{/if}}\n                        {{#if workflowState.properties.transitions.next.button}}\n                            <button type="button" class="waves-effect waves-light btn margin-left" {{action "handleWorkflowTransition" workflowState.properties.transitions.next}}>{{workflowState.properties.transitions.next.button}}</button>\n                        {{/if}}\n                    </div>\n                {{/if}}\n            </div>\n        {{/if}}\n\n        {{#if projectController.workflowStateHistory}}\n            <div class="hapyak-share-modal-subsection no-padding-left">\n                <div class="hapyak-share-modal-subsection-header">AUDIT LOG</div>\n\n                <div class="hapyak-share-modal-list-overflow">\n                    {{#each change in projectController.workflowStateHistory}}\n                        <div>{{change.user_description}} changed state to {{change.change_summary.new_state}} on {{change.time}}.</div>\n                    {{/each}}\n                </div>\n            </div>\n        {{/if}}\n    </div>\n{{/if}}\n\n'}),define("vendor/text!portal/templates/components/studio-home.hbs",[],function(){return'\n<div class="create-buttons">\n    {{createButtons}}\n\n    <button class="waves-effect waves-light btn-large btn-secondary" {{action "open" "newProjectModal" target="application"}}>\n        New Project\n    </button>\n\n    {{#if application.provisioning.templates.enabled}}\n        <button class="waves-effect waves-light btn-large btn-secondary" {{action "open" "newTemplateModal" target="application"}}>\n            New Template\n        </button>\n    {{/if}}\n\n    {{#if application.provisioning.experiences.enabled}}\n        <button class="waves-effect waves-light btn-large btn-secondary" {{action "open" "newExperienceModal" target="application"}}>\n            New Experience\n        </button>\n    {{/if}}\n</div>\n\n{{#each cardGroup in cardGroups}}\n    <div class="row">\n        <div class="col title">{{cardGroup.name}}</div>\n    </div>\n\n    <div class="row">\n        {{#each card in cardGroup.cards}}\n            {{quick-start-card application=application data=card}}\n        {{/each}}\n    </div>\n{{/each}}\n\n{{quick-start-guide application=application}}\n'}),define("vendor/text!portal/templates/components/toggle-input.hbs",[],function(){return'<span>{{label}}</span>\n<div class="switch right">\n    <label>\n        No\n        {{input type="checkbox" checked=value disabled=disabled}}\n        <span class="lever"></span>\n        Yes\n    </label>\n</div>\n'}),define("vendor/text!portal/templates/components/portal-text-input.hbs",[],function(){return'{{#if inputTypeOverride}}\n    {{textarea type=inputType id=settingId value=settingValue class=inputClass focusOut=focusOutInput maxlength=maxLength size=maxLength min=min max=max}}\n{{else}}\n    {{input type=inputType id=settingId value=settingValue class=inputClass focusOut=focusOutInput maxlength=maxLength size=maxLength min=min max=max}}\n{{/if}}\n\n<label {{bind-attr for="settingId" class=labelClassName}}>{{settingLabel}}</label>\n{{#if maxLength}}\n    <div class="row no-margin">\n        <span class="char-count">{{length}}/{{maxLength}}</span>\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/components/customer-unpaid.hbs",[],function(){return'\n<div class="materialize">\n    {{#if needEmailValidation}}\n        <div class="header">Email Not Validated</div>\n        <p>Please check your inbox for an email with the subject "Validate your email" and click the validation link in it.</p>\n        <p>Click below to resend the validation email:</p>\n        <button {{action "postRequest" "/api/users/send_validation_email"}} class="waves-effect waves-light btn hapyak-blue">Resend Validation Email</button>\n    {{/if}}\n\n    {{#unless needEmailValidation}}\n        {{#if canceled}}\n            <div class="header">Subscription Canceled</div>\n            <p>Your subscription was canceled, would you like to reactivate?</p>\n            <button {{action "redirectToReturnedUrl" "/chargify/reactivate_subscription"}} class="waves-effect waves-light btn hapyak-blue">Reactivate My Account</button>\n        {{/if}}\n\n        {{#unless canceled}}\n            {{#if trialEnded}}\n                <div class="header">Trial Ended</div>\n                <p>Your Free Trial has ended. Sign up for HapYak GO today to continue creating!</p>\n                <button {{action "redirectToReturnedUrl" "/chargify/get_signup_link"}} class="waves-effect waves-light btn hapyak-blue">Get HapYak GO!</button>\n                <a href="https://corp.hapyak.com/plans/ ">Click here to see enterprise pricing options.</a>\n            {{/if}}\n\n            {{#unless trialEnded}}\n                <div class="header">Billing Issue</div>\n                <p>There\'s something wrong with your billing method.</p>\n                <button {{action "redirectToReturnedUrl" "/chargify/get_billing_portal_management_link"}} class="waves-effect waves-light btn hapyak-blue">Update Billing Info</button>\n            {{/unless}}\n        {{/unless}}\n    {{/unless}}\n</div>\n'}),define("vendor/text!portal/templates/components/drag-switch.hbs",[],function(){return'<div class="drag-switch">\n    <i {{bind-attr class=":material-icons :handle enabled:enabled"}}>drag_handle</i>\n    {{text}}\n</div>\n'}),define("vendor/text!portal/templates/components/draggable-playlist-item.hbs",[],function(){return'<div class="edit-video">\n    <div class="playlist-edit-state" {{action "goTo"}}>\n        <div class="icon"></div>\n    </div>\n    <div class="playlist-edit-move">\n        <div class="icon"></div>\n    </div>\n    <div class="playlist-edit-remove" {{action "remove"}}>\n        <i class="fa fa-trash-o"></i>\n    </div>\n</div>'}),define("vendor/text!portal/templates/components/upload-component.hbs",[],function(){return'\n<label class="portal-text-input-label">{{settingLabel}}</label>\n<div class="file-field input-field">\n    <div {{bind-attr class=":btn application.provisioning.assetUpload::disabled"}}>\n        <span>{{buttonText}}</span>\n        {{#if multiple}}\n            <input {{bind-attr id="fileId"}} type="file" {{bind-attr accept="accept"}} multiple>\n        {{/if}}\n        {{#unless multiple}}\n            <input {{bind-attr id="fileId"}} type="file" {{bind-attr accept="accept"}}>\n        {{/unless}}\n    </div>\n    <div class="file-path-wrapper">\n        <input class="file-path validate" {{bind-attr id="textId"}} {{bind-attr value="value"}} {{bind-attr placeholder="placeholder"}}>\n    </div>\n</div>\n\n<div {{bind-attr class=":progress :loader uploading:loading"}}>\n    <div class="indeterminate"></div>\n</div>\n'}),define("vendor/text!portal/templates/components/multi-select-input.hbs",[],function(){return'<div class="filter-container">\n    {{input\n            id=id\n            class="multi-select-input"\n            type=type\n            value=inputVal\n            enter="addChip"\n            placeholder=placeholder}}\n    <button class="btn run-report waves-effect waves-light run" {{action "addChip" inputVal}}>ADD</button>\n    {{#if filterMessage}}\n        <span class="filterMessage">{{filterMessage}}</span>\n    {{/if}}\n    {{#if inputArray}}\n        <div class="chip-container">\n            {{#each inputItem in inputArray}}\n                <span class="chip filter" {{action "removeChip" inputItem}}>{{filterTitle}}: {{inputItem}}<i class="material-icons">close</i></span>\n            {{/each}}\n        </div>\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/components/vte-container.hbs",[],function(){return'\n<div class="timeline-seconds">\n    <span id="left-seconds">{{segmentLeftHMS}}</span>\n    <span id="right-seconds">{{segmentRightHMS}}</span>\n</div>\n\n{{vte-workspace\n    viewOnly=viewOnly\n    needsUpdate=needsUpdate\n    segmentLeftPosition=segmentLeftPosition\n    scrubberPosition=scrubberPosition\n    segmentScale=segmentScale\n    annotationRows=annotationRows\n    editor=editor\n    visual=visual\n    initialWidth=initialWidth\n    actualWidth=actualWidth\n}}\n\n<div class="hapyak-component-vte-scale">\n    {{vte-scale\n        needsUpdate=needsUpdate\n        segmentScale=segmentScale\n        initialWidth=initialWidth\n        actualWidth=actualWidth\n        segmentLeftPosition=segmentLeftPosition\n        segmentRightPosition=segmentRightPosition\n        scrubberPosition=scrubberPosition\n    }}\n    {{vte-mini-timeline needsUpdate=needsUpdate annotationRows=annotationRows duration=duration}}\n</div>\n'}),define("vendor/text!portal/templates/components/vte-workspace.hbs",[],function(){return'<div class="annotation-rows">\n    {{#each row in annotationRows}}\n        <div class="annotation-row">\n            {{#each annotation in row}}\n                {{vte-annotation data=annotation editor=editor readOnly=viewOnly actualWidth=actualWidth}}\n            {{/each}}\n        </div>\n    {{/each}}\n</div>\n\n{{vte-scrubber editor=editor scrubberPosition=scrubberPosition actualWidth=actualWidth}}\n\n<div id="timeline-markers"></div>\n'}),define("vendor/text!portal/templates/components/vte-annotation.hbs",[],function(){return'\n{{#unless viewOnly}}\n    {{vte-annotation-handle editor=editor onFinish="save" moved="startChange" stateChanged="stateChanged"}}\n{{/unless}}\n<div {{bind-attr class=":content data.type"}}>\n    <span {{bind-attr class=":type data.type"}}>{{data.icon}}</span>\n    <span class="prev-text">{{data.preview}}</span>\n</div>\n{{#if editingTags}}\n    <div class="editing-tags">\n        {{#each tag in editingTags}}\n            <span>{{tag.display}}</span>\n        {{/each}}\n    </div>\n{{/if}}\n{{#unless viewOnly}}\n    {{vte-annotation-handle editor=editor onFinish="save" moved="endChange" stateChanged="stateChanged" class="end"}}\n{{/unless}}\n'}),define("vendor/text!portal/templates/components/vte-annotation-handle.hbs",[],function(){return'<div class="line"></div>'}),define("vendor/text!portal/templates/components/vte-mini-annotation.hbs",[],function(){return""}),define("vendor/text!portal/templates/components/vte-mini-timeline.hbs",[],function(){return'{{#each row in annotationRows}}\n    <div class="mini-annotation-row">\n        {{#each annotation in row}}\n            {{vte-mini-annotation data=annotation duration=duration}}\n        {{/each}}\n    </div>\n{{/each}}\n'}),define("vendor/text!portal/templates/components/vte-scrubber.hbs",[],function(){return'<div class="line"></div>'}),define("vendor/text!portal/templates/components/vte-scale.hbs",[],function(){return'{{vte-annotation-handle property=\'start\' editor=editor moved="startChange" class="start"}}\n<div class="background">\n    <div class="line line-top"></div>\n    <div class="line"></div>\n</div>\n{{vte-annotation-handle property=\'end\' editor=editor moved="endChange" class="end"}}\n'}),define("vendor/text!portal/templates/components/expandable-share-option.hbs",[],function(){return'<i class="material-icons collapsed-arrow">keyboard_arrow_right</i>\n<i class="material-icons expanded-arrow">keyboard_arrow_down</i>\n<div class="option-title">{{ title }}</div>\n<div class="option-summary">{{ summaryDisplay }}</div>\n<div class="option-body">{{ yield }}</div>'}),define("vendor/text!portal/templates/embed-types/hapyak-player.hbs",[],function(){return'\n<div class="hapyak-share-modal-subsection">\n    <div class="hapyak-share-modal-subsection-header">OPTIONS</div>\n\n    <div class="hapyak-share-modal-option">\n        <div class="hapyak-share-modal-option-key">SIZE</div>\n\n        <div class="hapyak-share-modal-option-description">\n            {{radio-button property=view.hapyakResponsive value=true disabled=view.disabled name="hapyak-option-size" label="Responsive"}}\n        </div>\n        <div class="hapyak-share-modal-option-description">\n            {{radio-button class="inline" property=view.hapyakResponsive value=false disabled=view.disabled name="hapyak-option-size" label="Fixed Size"}}\n\n            {{#if projectController.config.dimensions}}\n                <div class="hapyak-share-modal-option-right">\n                    {{input class="hapyak-share-modal-option-text-input" disabled=view.fixedInputsDisabled value=view.width targetObject=view on="focus-out" action="updateEmbedCode"}}\n                    {{view view.AspectLock disabled=view.fixedInputsDisabled}}\n                    {{input class="hapyak-share-modal-option-text-input" disabled=view.fixedInputsDisabled value=view.height targetObject=view on="focus-out" action="updateEmbedCode"}}\n                </div>\n            {{/if}}\n        </div>\n    </div>\n\n    {{#if view.showNativeControlsOption}} {{!-- Hiding entire OPTIONS section like this since it has only the one option for now --}}\n        {{#if projectController.config.nativeControls}}\n        <div class="hapyak-share-modal-option">\n            <div class="hapyak-share-modal-option-key">CONTROLS</div>\n\n            <div class="hapyak-share-modal-option-description">\n                {{toggle-input label=view.nativePlayerLabel value=view.nativeControls disabled=view.disabled}}\n            </div>\n        </div>\n        {{/if}}\n    {{/if}}\n\n    {{#if config.https}} {{!-- Hiding entire OPTIONS section like this since it has only the one option for now --}}\n        <div class="hapyak-share-modal-option">\n            <div class="hapyak-share-modal-option-key">HTTPS</div>\n\n            {{toggle-input class="hapyak-share-modal-option-value" label="HTTPS Embed" value=view.secure}}\n        </div>\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/embed-types/experience-hapyak-player.hbs",[],function(){return'\n{{#if view.isExperience}}\n    <div class="hapyak-share-modal-subsection">\n        <div class="hapyak-share-modal-subsection-header">OPTIONS</div>\n\n        {{#if view.showNativeControlsOption}}\n            <div class="hapyak-share-modal-option">\n                <div class="hapyak-share-modal-option-key">CONTROLS</div>\n\n                <div class="hapyak-share-modal-option-description">\n                    {{toggle-input label=view.nativePlayerLabel value=view.useNativeControls targetObject=view on="focus-out" action="updateNativeControls"}}\n                </div>\n            </div>\n        {{/if}}\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/embed-types/native-player.hbs",[],function(){return'\n<div class="hapyak-share-modal-subsection">\n    <div class="hapyak-share-modal-subsection-header">OPTIONS</div>\n\n    {{#unless view.embedCode.hideDomId}}\n        <div class="hapyak-share-modal-option">\n            <div class="hapyak-share-modal-option-key">DOM ELEMENT ID</div>\n\n            <div class="hapyak-share-modal-option-value">\n                {{input class="hapyak-share-modal-option-text-input extra-long" value=view.domId disabled=view.disabled}}\n            </div>\n        </div>\n    {{/unless}}\n\n    <div class="hapyak-share-modal-option">\n        <div class="hapyak-share-modal-option-key full-width">\n            {{toggle-input label="USE HAPYAK CONTROLS" value=view.hapyakControls disabled=view.disabled}}\n        </div>\n    </div>\n    </div>\n'}),define("vendor/text!portal/templates/embed-types/landing-page.hbs",[],function(){return'\n{{#if view.isExperience}}\n    <div class="hapyak-share-modal-subsection">\n        <div class="hapyak-share-modal-subsection-header">OPTIONS</div>\n\n        {{#if view.showNativeControlsOption}}\n            <div class="hapyak-share-modal-option">\n                <div class="hapyak-share-modal-option-key">CONTROLS</div>\n\n                <div class="hapyak-share-modal-option-description">\n                    {{toggle-input label=view.nativePlayerLabel value=view.useNativeControls targetObject=view on="focus-out" action="updateNativeControls"}}\n                </div>\n            </div>\n        {{/if}}\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/embed-types/embedly.hbs",[],function(){return""}),define("vendor/text!portal/templates/embed-types/external-chapters.hbs",[],function(){return'\n<div class="hapyak-share-modal-subsection">\n    <div class="hapyak-share-modal-subsection-header">OPTIONS</div>\n\n    <div class="hapyak-share-modal-option">\n        <div class="hapyak-share-modal-option-key">Mandated Watch Duration</div>\n        <div class="hapyak-share-modal-option-value">\n            {{input type="number" class="hapyak-share-modal-option-text-input" disabled=view.disabled value=view.enforcedWatchDuration targetObject=view on="focus-out" action="updateEmbedCode"}}\n        </div>\n        <div class="hapyak-share-modal-option-description">Time in seconds from the start of the video to prevent skipping ahead</div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/embed-types/vrviewer.hbs",[],function(){return'<div class="hapyak-share-modal-subsection">\n    {{#expandable-share-option disabled=view.disabled title="SCREEN TEXT" intro_text=view.intro_text loading_text=view.loading_text pause_text=view.pause_text end_text=view.end_text}}\n        <ul>\n            <li>\n                {{#expandable-share-option title="Introduction Text" disabled=view.disabled summaryValue=view.intro_text intro_text=view.intro_text}}\n                    {{textarea id="vrIntroText" valueBinding="view.intro_text" disabled=view.disabled}}\n                {{/expandable-share-option}}\n            </li>\n\n            <li>\n                {{#expandable-share-option title="Loading Text" disabled=view.disabled summaryValue=view.loading_text loading_text=view.loading_text}}\n                    {{textarea valueBinding="view.loading_text" disabled=view.disabled}}\n                {{/expandable-share-option}}\n            </li>\n\n            <li>\n                {{#expandable-share-option title="Pause Text" disabled=view.disabled summaryValue=view.pause_text pause_text=view.pause_text}}\n                    {{textarea valueBinding="view.pause_text" disabled=view.disabled}}\n                {{/expandable-share-option}}\n            </li>\n\n            <li>\n                {{#expandable-share-option title="End Screen Text" disabled=view.disabled summaryValue=view.end_text end_text=view.end_text}}\n                    {{textarea valueBinding="view.end_text" disabled=view.disabled}}\n                {{/expandable-share-option}}\n            </li>\n        </ul>\n    {{/expandable-share-option}}\n</div>\n\n<div class="hapyak-share-modal-subsection">\n    {{#expandable-share-option title="DISPLAY SETTINGS" disabled=view.disabled global_styles=view.global_styles}}\n        <div class="hapyak-share-modal-option">\n            <div class="hapyak-share-modal-option-key">Background Color</div>\n            <div class="hapyak-share-modal-option-value">\n                {{input type="color" valueBinding="view.global_styles.background" class="hapyak-share-modal-option-text-input" disabled=view.disabled}}\n            </div>\n        </div>\n        <div class="hapyak-share-modal-option">\n            <div class="hapyak-share-modal-option-key">Text Color</div>\n            <div class="hapyak-share-modal-option-value">\n                {{input type="color" valueBinding="view.global_styles.text_color" class="hapyak-share-modal-option-text-input" disabled=view.disabled}}\n            </div>\n        </div>\n        <div class="hapyak-share-modal-option">\n            <div class="hapyak-share-modal-option-key">Font Size</div>\n            <div class="hapyak-share-modal-option-value">\n                {{input type="text" valueBinding="view.global_styles.text_size" class="hapyak-share-modal-option-text-input" disabled=view.disabled}}\n            </div>\n        </div>\n    {{/expandable-share-option}}\n</div>'}),define("vendor/text!portal/templates/embed-types/hapyak-hosted-player.hbs",[],function(){return""}),define("vendor/text!portal/templates/embed-types/scorm.hbs",[],function(){return'\n{{#if view.showOptions}}\n    <div class="hapyak-share-modal-subsection">\n        <div class="hapyak-share-modal-subsection-header">OPTIONS</div>\n\n        <div class="hapyak-share-modal-option">\n            <div class="hapyak-share-modal-option-key">SCORM VERSION</div>\n            <div class="hapyak-share-modal-option-description">\n                <input name="hapyak-option-scorm-version" type="radio" id="hapyak-option-scorm-version-1-2" {{bind-attr disabled="view.disabled"}} {{action "setVersion" on="change" target=view}}/>\n                <label for="hapyak-option-scorm-version-1-2">SCORM 1.2</label>\n            </div>\n            <div class="hapyak-share-modal-option-description">\n                <input name="hapyak-option-scorm-version" type="radio" id="hapyak-option-scorm-version-2004" checked="checked" {{bind-attr disabled="view.disabled"}} {{action "setVersion" on="change" target=view}}/>\n                <label for="hapyak-option-scorm-version-2004">SCORM 2004 (latest)</label>\n            </div>\n        </div>\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/config_modal/common.hbs",[],function(){return'{{#with project}}\n    {{#unless view.showVideoSection}}\n        <div class="settings-group">\n            <div class="settings-group-header">\n                <h2>Video</h2>\n            </div>\n            <div class="settings-content no-bottom">\n                <div class="form-group row">\n                    <label for="hapyak-config-modal-tags" class="col-sm-4 control-label">Video Source</label>\n                    <div class="col-sm-8">\n                        <p id="hapyak-video-source" class="form-control-static">\n                            <a {{action "changeSrc" target="view"}} href="#" class="editable-click">\n                                {{#if view.videoSrcUrl}}\n                                    {{deprotocolizer view.videoSrcUrl}}\n                                {{else}}\n                                    <em>Embed code</em>\n                                {{/if}}\n                            </a>\n                        </p>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label for="hapyak-config-modal-tags" class="col-sm-4 control-label">Dimensions</label>\n                    <div class="col-sm-8">\n                        <a href="#" class="form-control-static" {{action "open" "sizingModal"}}>Adjust video size</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    {{/unless}}\n\n    <div class="settings-group">\n        <div class="settings-group-header">\n            <h2>Project</h2>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group row">\n                <label for="hapyak-config-modal-tags" class="col-sm-4 control-label">Tags</label>\n                <div class="col-sm-8">\n                    {{x-editable id="hapyak-config-modal-tags" content=view.tagsStr}}\n                </div>\n            </div>\n            {{#if view.templatesEnabled}}\n                <div class="form-group row">\n                    <label for="hapyak-config-modal-template-ids" class="col-sm-4 control-label">Templates\n                        Applied</label>\n                    <div class="col-sm-8">\n                        <p {{action "changeTemplate" target="view"}}\n                                class="form-control-static editable editable-click">\n                            {{join view.templateProjectNames}}\n                        </p>\n                    </div>\n                </div>\n            {{/if}}\n            {{#if controller.currentUser.isAdmin}}\n                <div class="form-group row">\n                    <label for="hapyak-config-modal-track-id" class="col-sm-4 control-label">Track ID</label>\n                    <div class="col-sm-6">\n                        {{x-editable id="hapyak-config-modal-track-id" content=view.trackId}}\n                    </div>\n                    <div class="col-sm-2 control-label">\n                        {{#if view.trackFound}}\n                            Track valid\n                        {{/if}}\n                        {{#unless view.trackFound}}\n                            Not found\n                        {{/unless}}\n                    </div>\n                </div>\n            {{/if}}\n\n            {{#unless isTemplate}}\n                {{#if config.reset}}\n                    <div class="form-group row">\n                        <label class="col-sm-4 control-label">Show questions</label>\n                        <div class="col-sm-8">\n                            <div class="btn-group" data-toggle="buttons-radio">\n                                {{view view.KeepQuestionsView}}\n                                {{view view.ResetQuestionsView}}\n                            </div>\n                        </div>\n                    </div>\n                {{/if}}\n            {{/unless}}\n        </div>\n    </div>\n\n    {{#unless isTemplate}}\n        {{#if view.customCssEnabled}}\n            <div class="settings-group">\n                <div class="settings-group-header">\n                    <h2>CUSTOM CSS</h2>\n                </div>\n                <div class="settings-content no-bottom">\n                    {{#if config.css}}\n                        <div class="form-group">\n                            {{upload-component placeholder="Upload or Paste in CSS URL" application=controllers.application folder="uploaded_project_css" settingLabel="Custom Annotation CSS (URL)" value=view.css  accept="text/css"}}\n                        </div>\n                    {{/if}}\n\n                    {{#if config.controlStyle}}\n                        <div class="form-group">\n                            {{upload-component placeholder="Upload or Paste in CSS URL" application=controllers.application folder="uploaded_project_css" settingLabel="Custom Control CSS (URL)" value=view.controlStyle  accept="text/css"}}\n                        </div>\n                    {{/if}}\n                </div>\n            </div>\n        {{/if}}\n        {{#if view.showLanguageSection}}\n            <div class="settings-group">\n                <div class="settings-group-header">\n                    <h2>Language</h2>\n                </div>\n                <div class="settings-content no-bottom">\n                    <div class="form-group row">\n                        <label for="hapyak-config-modal-nls" class="col-sm-4 control-label">String Resource URL\n                            <small class="text-muted">&#185</small>\n                        </label>\n                        <div class="col-sm-8">\n                            {{input id="hapyak-config-modal-nls" type="text" value=view.nls classNames="form-control"}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        {{/if}}\n\n        {{#if view.showIntegrationsSection}}\n            <div class="settings-group">\n                <div class="settings-group-header">\n                    <h2>Integrations</h2>\n                </div>\n                <div class="settings-content no-bottom">\n                    {{#if view.showPublished}}\n                        <div class="form-group row">\n                            <div class="col-sm-6">\n                                {{input type="checkbox" class="filled-in" id="hapyak-config-modal-published" checked=view.isPublished}}\n                                <label class="checkbox-label" for="hapyak-config-modal-published">Published</label>\n                            </div>\n                        </div>\n                    {{/if}}\n\n                    {{#if config.cuePoints}}\n                        <div class="form-group row">\n                            <div class="col-sm-6">\n                                {{input type="checkbox" class="filled-in" id="hapyak-config-modal-cuePoints" checked=view.cuePoints}}\n                                <label class="checkbox-label" for="hapyak-config-modal-cuePoints">Import Cue Points?</label>\n                            </div>\n                        </div>\n                    {{/if}}\n                </div>\n            </div>\n        {{/if}}\n\n        {{#if provisioning.configPlayerbar.project}}\n            <div class="settings-group">\n                <div class="settings-group-header">\n                    <h2>Control Bar Style</h2>\n                </div>\n                <div class="settings-content no-bottom">\n                    <div class="form-group row">\n                        <div class="col-sm-6">\n                            {{input type="checkbox" class="filled-in" id="hapyak-config-modal-skipAnnotationBtn"\n                                    checked=view.skipAnnotationBtn}}\n                            <label class="checkbox-label" for="hapyak-config-modal-skipAnnotationBtn">Hide Skip Buttons\n                                <small class="text-muted">&#185</small>\n                            </label>\n                        </div>\n                        <div class="col-sm-6">\n                            {{input type="checkbox" class="filled-in" id="hapyak-config-modal-timeline" checked=view.timeline}}\n                            <label class="checkbox-label" for="hapyak-config-modal-timeline">Hide Timeline\n                                <small class="text-muted">&#185</small>\n                            </label>\n                        </div>\n                    </div>\n\n                    <div class="form-group row">\n                        <div class="col-sm-6">\n                            {{input type="checkbox" class="filled-in" id="hapyak-config-modal-logo" checked=view.logo}}\n                            <label class="checkbox-label" for="hapyak-config-modal-logo">Hide Logo\n                                <small class="text-muted">&#185</small>\n                            </label>\n                        </div>\n                        <div class="col-sm-6">\n                            {{input type="checkbox" class="filled-in" id="hapyak-config-modal-annotationMarkers" checked=view.annotationMarkers}}\n                            <label class="checkbox-label" for="hapyak-config-modal-annotationMarkers">Hide Annotation Markers\n                                <small class="text-muted">&#185</small>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        {{/if}}\n\n        {{#if provisioning.experiences.enabled}}\n            <div class="row settings-group">\n                <div class="settings-group-header">\n                    <h2>Images</h2>\n                </div>\n                <div class="settings-content no-bottom">\n                    {{#if config.css}}\n                        <div class="form-group">\n                            {{upload-component placeholder="Upload or Paste in JPEG or PNG URL" application=controllers.application folder="uploaded_thumbnails" settingLabel="Thumbnail Image" value=view.videoImgThumbnail  accept="image/jpeg, image/png"}}\n                        </div>\n                    {{/if}}\n                </div>\n            </div>\n        {{/if}}\n\n        {{#unless view.showConvertToTemplatesOption}}\n            {{#if view.templatesEnabled}}\n                <div class="form-group row">\n                    <label class="col-sm-4 control-label">\n                        <small class="text-muted">&#185 optional</small>\n                    </label>\n                    <div class="col-sm-8">\n                        {{input type="checkbox" class="filled-in" id="hapyak-config-modal-project-istemplate" checked=view.isTemplate}}\n                        <label for="hapyak-config-modal-project-istemplate">Convert project to template</label>\n                    </div>\n                </div>\n            {{/if}}\n        {{/unless}}\n    {{/unless}}\n{{/with}}\n'}),define("vendor/text!portal/templates/config_modal/vrviewer.hbs",[],function(){return'{{#with project}}\n    {{#unless view.approvalWorkflowsEnabled}}\n        <div class="settings-group">\n            <div class="settings-group-header">\n                <h2>Video</h2>\n            </div>\n            <div class="settings-content no-bottom">\n                <div class="form-group row">\n                    <label for="hapyak-config-modal-tags" class="col-sm-4 control-label">Video Source</label>\n                    <div class="col-sm-8">\n                        <p id="hapyak-video-source" class="form-control-static">\n                            <a {{action "changeSrc" target="view"}} href="#" class="editable-click">\n                                {{#if view.videoSrcUrl}}\n                                    {{deprotocolizer view.videoSrcUrl}}\n                                {{else}}\n                                    <em>Embed code</em>\n                                {{/if}}\n                            </a>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    {{/unless}}\n\n    <div class="settings-group">\n        <div class="settings-group-header">\n            <h2>Project</h2>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group row">\n                <label for="hapyak-config-modal-tags" class="col-sm-4 control-label">Tags</label>\n                <div class="col-sm-8">\n                    {{x-editable id="hapyak-config-modal-tags" content=view.tagsStr}}\n                </div>\n            </div>\n        </div>\n    </div>\n{{/with}}\n'}),define("vendor/text!portal/templates/config_modal/salesforce.hbs",[],function(){return'{{#with project}}\n<div class="form-group row">\n    <label class="col-sm-4 control-label">Salesforce</label>\n    <div class="col-sm-8">\n        <div class="btn-group" data-toggle="buttons-radio">\n            {{#view view.SalesforceEnabledView}}Enabled{{/view}}\n            {{#view view.SalesforceDisabledView}}Disabled{{/view}}\n        </div>\n    </div>\n</div>\n\n{{#if view.isSalesforceEnabled}}\n    {{#if view.isCampaignIntegration}}\n    <div class="well">\n        <div class="form-group row">\n            <label class="col-sm-4 control-label">Campaign ID</label>\n            <div class="col-sm-8">\n                {{view Ember.Select id="hapyak-config-modal-salesforceid"\n                                classNames="form-control"\n                                contentBinding="view.salesforceCampaigns.records"\n                                valueBinding="view.salesforceId"\n                                optionValuePath="content.Id"\n                                optionLabelPath="content.Name"\n                                prompt="- new -"}}\n            </div>\n        </div>\n        {{#unless view.salesforceId}}\n            <div class="form-group row">\n                <label class="col-sm-4 control-label">Campaign Type</label>\n                <div class="col-sm-8">\n                    {{view Ember.Select id="hapyak-config-modal-salesforcetype"\n                                    classNames="form-control"\n                                    contentBinding="view.salesforceTypes"\n                                    valueBinding="view.salesforceType"\n                                    optionValuePath="content"\n                                    optionLabelPath="content"}}\n                </div>\n            </div>\n            <div class="form-group row">\n                <label class="col-sm-4 control-label">Campaign Name</label>\n                <div class="col-sm-8">\n                    {{input id="hapyak-config-modal-salesforcename" type="text" value=view.salesforceName classNames="form-control"}}\n                </div>\n            </div>\n            <div class="form-group row">\n                <label class="col-sm-4 control-label">Campaign Owner</label>\n                <div class="col-sm-8">\n                    {{view Ember.Select id="hapyak-config-modal-salesforceowner"\n                                    classNames="form-control"\n                                    contentBinding="view.salesforceUsers.records"\n                                    valueBinding="view.salesforceOwnerId"\n                                    optionValuePath="content.Id"\n                                    optionLabelPath="content.Email"\n                                    prompt="- default -"}}\n                </div>\n            </div>\n        {{/unless}}\n    </div>\n    {{/if}}\n{{/if}}\n{{/with}}\n'}),define("vendor/text!portal/templates/project/edit.hbs",[],function(){return'{{#unless view.isReadonly}}\n    {{view view.ReadwriteEditView}}\n{{/unless}}\n{{#if view.isReadonly}}\n    {{view view.ReadonlyEditView}}\n{{/if}}\n\n{{#slide-in showSlider=controller.application.showSlider title="Share"}}\n    <div class="slide-in-body">\n        {{#share-modal projectController=controller visible=controller.application.showSlider}}{{/share-modal}}\n    </div>\n{{/slide-in}}\n'}),define("vendor/text!portal/templates/project/readonly.hbs",[],function(){return'\n<div id="hapyak-project-top-bar" {{bind-attr class="workflowState:in-workflow"}}>\n    <div id="hapyak-project-icons" class="flex-col">\n        <div class="workflow-state-icons">\n            <div class="icon-hover-container">\n                <div class="state-icon-container always-show" data-tooltip-position="right" {{bind-attr data-tooltip-content=workflowState.display_name}}>\n                    <i {{bind-attr class=":material-icons workflowState.properties.poll:spin"}} {{bind-attr style=workflowState.style}}>{{workflowState.properties.material_icon}}</i>\n                </div>\n\n                <div class="state-icon-container" data-tooltip-position="right" data-tooltip-content="Locked">\n                    <i class="material-icons">lock</i>\n                </div>\n                {{#if behavior.is_secure}}\n                    <div class="state-icon-container" data-tooltip-position="right" data-tooltip-content="Secure">\n                        <i class="material-icons">fingerprint</i>\n                    </div>\n                {{/if}}\n                {{#if behavior.is_watermarked}}\n                    <div class="state-icon-container" data-tooltip-position="right" data-tooltip-content="Watermarked">\n                        <i class="material-icons">format_paint</i>\n                    </div>\n                {{/if}}\n            </div>\n        </div>\n    </div>\n\n    <div id="hapyak-project-title" class="flex-col">\n        <h3>\n            {{#if title}}\n                {{title}}\n            {{else}}\n                <span class="text-muted">Project name</span>\n            {{/if}}\n        </h3>\n    </div>\n    <div id="hapyak-project-editor" class="flex-col">\n        <div class="btn-toolbar pull-right">\n            <div class="materialize">\n                {{#if view.safestreamApprovedData.email}}\n                    <div id="safestream-approved-by">\n                        <div>\n                            APPROVED BY {{view.safestreamApprovedData.email}}\n                        </div>\n                        <div>\n                            ON {{view.safestreamApprovedData.time}}\n                        </div>\n                    </div>\n                {{/if}}\n                <button {{action openSlider}} class="waves-effect waves-light btn-large">SHARE</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n{{#if embedCode}}\n    <div class="row">\n        <div id="hapyak-editor-canvas" class="col-md-12">\n            {{view view.EditorIframeView id="hapyak-editor-iframe" viewOnly=true}}\n        </div>\n    </div>\n{{/if}}\n\n{{#if view.shouldDisplayAnnotationList}}\n    {{extended-editor viewOnly=true parentController=this currentProject=view.playlist.currentProject editor=view.editorIframe.editor}}\n{{/if}}\n\n<div class="materialize">\n    {{quick-start-guide-btn application=application side=true}}\n</div>\n\n{{quick-start-guide application=application edit=true}}\n'}),define("vendor/text!portal/templates/project/readwrite.hbs",[],function(){return'\n<div id="hapyak-project-top-bar" {{bind-attr class="workflowState:in-workflow"}}>\n    <div id="hapyak-project-icons" class="flex-col">\n        <div class="workflow-state-icons">\n            <div class="icon-hover-container">\n                <div class="state-icon-container always-show" data-tooltip-position="right" {{bind-attr data-tooltip-content=workflowState.display_name}}>\n                    <i {{bind-attr class=":material-icons workflowState.properties.poll:spin"}} {{bind-attr style=workflowState.style}}>{{workflowState.properties.material_icon}}</i>\n                </div>\n\n                <div class="state-icon-container" data-tooltip-position="right" data-tooltip-content="Unlocked">\n                    <i class="material-icons">lock_open</i>\n                </div>\n                {{#if behavior.is_secure}}\n                    <div class="state-icon-container" data-tooltip-position="right" data-tooltip-content="Secure">\n                        <i class="material-icons">fingerprint</i>\n                    </div>\n                {{/if}}\n                {{#if behavior.is_watermarked}}\n                    <div class="state-icon-container" data-tooltip-position="right" data-tooltip-content="Watermarked">\n                        <i class="material-icons">format_paint</i>\n                    </div>\n                {{/if}}\n            </div>\n        </div>\n    </div>\n\n    <div id="hapyak-project-title" class="flex-col">\n        <h3 class="editable">\n            {{#if title}}\n                {{title}}\n            {{else}}\n                <span class="text-muted">Project name</span>\n            {{/if}}\n        </h3>\n    </div>\n\n    <div id="hapyak-project-editor" class="flex-col">\n        {{#if isTemplate}}\n            <div class="btn-toolbar pull-right">\n                <div class="btn-group">\n                    <button {{action "open" "configModal"}} class="btn btn-default" {{bind-attr disabled="isDisabled"}}><span class="glyphicon glyphicon-cog"></span>Configure</button>\n                </div>\n            </div>\n        {{else}}\n            <div class="btn-toolbar pull-right">\n                <div class="materialize">\n                    <button {{action "open" "configModal"}} class="waves-effect waves-light btn-large btn-flat" {{bind-attr disabled="isDisabled"}}>SETTINGS</button>\n\n                    {{#if view.useEmbossWorkflow}}\n                        {{animated-button initialText="EMBOSS" loadingText="EMBOSSING" callback=view.emboss}}\n                    {{/if}}\n\n                    {{#if view.useApprovalWorkflow}}\n                        <button {{action "sendApprove" target=view}} class="waves-effect waves-light btn-large" {{bind-attr disabled="isDisabled"}}>APPROVE</button>\n                    {{else}}\n                        <button {{action openSlider}} class="waves-effect waves-light btn-large">SHARE</button>\n                    {{/if}}\n                </div>\n            </div>\n        {{/if}}\n    </div>\n</div>\n\n{{#if embedCode}}\n    <div class="row">\n        <div id="hapyak-editor-canvas" class="col-md-12">\n            {{view view.EditorIframeView id="hapyak-editor-iframe"}}\n        </div>\n    </div>\n{{/if}}\n\n{{#if view.shouldDisplayAnnotationList}}\n    {{extended-editor parentController=this currentProject=view.playlist.currentProject editor=view.editorIframe.editor}}\n{{/if}}\n\n<div class="materialize">\n    {{quick-start-guide-btn application=application side=true}}\n</div>\n\n{{quick-start-guide application=application edit=true}}\n'}),define("vendor/text!portal/templates/experience/edit.hbs",[],function(){return'\n<div id="experience-preloader-holder" {{bind-attr class="view.everythingReady:inactive:active"}}>\n    <div id="experience-preloader" class="materialize">\n        {{preloader-component}}\n    </div>\n</div>\n{{#if view.showHeaderMsg}}\n    <div id="lti-linked-lesson-banner" {{bind-attr class="isLti:lti view.everythingReady:active:inactive"}}>\n        <div class="message-container">\n            <div class="message-content">\n                <div class="message-text capitalize">Linked {{view.layoutType}} </div>\n                {{#if view.userNameFormatted}}\n                    <div class="message-text"> | Created By </div>\n                    <div class="message-text"> {{view.userNameFormatted}} </div>\n                {{/if}}\n            </div>\n        </div>\n    </div>\n{{/if}}\n\n<div id="hapyak-project-top-bar" {{bind-attr class=":row isLti:lti"}}>\n    <div id="hapyak-experience-title" class="flex-col">\n        <h3 class="editable">\n            {{#if title}}\n                {{title}}\n            {{else}}\n                <span class="text-muted">Experience Name</span>\n            {{/if}}\n        </h3>\n    </div>\n\n    <div id="hapyak-project-editor" class="flex-col">\n        <div class="btn-toolbar pull-right">\n            <div class="materialize">\n                {{#if isLive}}\n                    <button {{action "openLiveStreamModal" target="view"}} class="waves-effect waves-light btn-large btn-flat"><i class="material-icons">cast_connected</i><span>{{streamButtonLabel}}</span></button>\n                {{/if}}\n                {{#if isSlidesync}}\n                    <button {{action "open"  "reportModal" "experience" }} class="waves-effect waves-light btn-large btn-flat" {{bind-attr disabled="configDisabled"}}>REPORTS</button>\n                {{/if}}\n                <button {{action "open" "configModalExperience"}} class="waves-effect waves-light btn-large btn-flat" {{bind-attr disabled="configDisabled"}}>SETTINGS</button>\n                {{#if isSlidesync}}\n                    {{#if provisioning.experiences.linkMenu}}\n                        <button {{action "open" "modalLinkGenerator"}} class="waves-effect waves-light btn-large btn-flat link-btn">LINK</button>\n                    {{/if}}\n                {{/if}}\n                {{#if isLti}}\n                    <a {{bind-attr href="viewerUrl" target=hrefTarget}}>\n                        <button {{bind-attr class=":waves-effect :waves-light :btn-large :btn-flat isLti:lti"}}>{{previewBtnText}}</button>\n                    </a>\n                {{/if}}\n                {{#unless isLti}}\n                    <button {{action openSlider}} class="waves-effect waves-light btn-large">Share</button>\n                {{/unless}}\n            </div>\n        </div>\n    </div>\n</div>\n\n{{#if experienceLayoutView}}\n    {{#if experienceTemplate}}\n        {{view experienceLayoutView experienceTemplate=experienceTemplate}}\n    {{/if}}\n{{/if}}\n\n{{#slide-in showSlider=controller.application.showSlider title="Share"}}\n    <div class="slide-in-body">\n        {{#share-modal experienceController=controller}}{{/share-modal}}\n    </div>\n{{/slide-in}}\n\n{{#unless is_live}}\n    <div class="materialize">\n        {{quick-start-guide-btn application=application side=true}}\n    </div>\n{{/unless}}\n\n{{quick-start-guide application=application edit=true}}\n'}),define("vendor/text!portal/templates/reports/grades.hbs",[],function(){return'<div id="dt-active-wrapper" {{bind-attr class="canShow:active"}}>\n    {{#unless userId}}\n        <div class="row search-download-container">\n            <div class="col-sm-6">\n                <div id="dt-search-box">\n                </div>\n            </div>\n            <div class="col-sm-6 text-right extra-btn-padding">\n                {{view view.ActionsView recordBinding="userAnswersData"}}\n            </div>\n        </div>\n        {{#if summaryData.isLoaded}}\n            {{#if summaryTable}}\n                {{data-table\n                        id=\'summaryDataTable\'\n                        data=summaryTable.rows\n                        columns=summaryTable.columns\n                        serverSide=false\n                        processing=false\n                        target=this\n                }}\n            {{/if}}\n        {{/if}}\n    {{else}}\n        <div>\n            {{#if userAnswersData.isLoaded}}\n                {{#each user in userAnswersData.users}}\n                    <div class="row">\n                        <div class="col-sm-6">\n                            <div id="dt-search-box">\n                            </div>\n                        </div>\n                        <div class="col-sm-6 text-right extra-btn-padding">\n                            {{view view.ActionsView recordBinding="userAnswersData"}}\n                        </div>\n                    </div>\n                    {{#each track in user.tracks}}\n                        <div class="hapyak-gradebook-answer-group">\n                            {{#if track.title }}\n                                <div class="project-title-row"><span class="project-title">Project:</span>\n                                    {{#link-to \'reports.questions\' (query-params record=track.id)}}\n                                        {{track.title}}\n                                    {{/link-to}}\n                                    <span class="project-score">{{trackGrade track}}</span>\n                                </div>\n                            {{else}}\n                                <div class="project-title-row"><span class="project-title">Project:</span>\n                                    {{#link-to \'reports.questions\' (query-params record=track.id)}}\n                                        {{track.id}}\n                                    {{/link-to}}\n                                    <span class="project-score">{{trackGrade track}}</span>\n                                </div>\n                            {{/if}}\n                            {{#each question in track.questions}}\n                                <div class="project-question"><span>Q:</span> {{question.question}}</div>\n                                <table class="table hapyak-gradebook-answers">\n                                    <tbody>\n                                    <tr>\n                                        <td class="updated-gradebook-answers">\n                                            {{#if question.correct}}\n                                                <i class="material-icons">check</i>\n                                            {{else}}\n                                                <i class="material-icons tomato">close</i>\n                                            {{/if}}\n                                            <span class="answer-text">{{question.answer}}</span>\n                                        </td>\n                                        <td align="right">{{question.date}} UTC</td>\n                                    </tr>\n                                    </tbody>\n                                </table>\n                            {{/each}}\n                        </div>\n                    {{/each}}\n                {{/each}}\n            {{/if}}\n        </div>\n    {{/unless}}\n</div>\n\n<img {{bind-attr class=":reports-preloader loading:active"}} src="/img/grades-report-preloader.svg" alt="">\n'}),define("vendor/text!portal/templates/custom_reports.hbs",[],function(){return'{{#if errorMsg}}\n    {{errorMsg}}\n{{/if}}\n\n{{#if reportReady}}\n    <div class="row">\n        <div class="col-sm-6">\n            <div id="dt-search-box">\n            </div>\n        </div>\n        <div class="col-sm-6 text-right extra-btn-padding">\n            {{#if csvReady}}\n                <a class="btn btn-flat" {{bind-attr download="downloadName"}} {{bind-attr href="downloadLink"}}>\n                    <i class="material-icons">file_download</i>\n                </a>\n            {{/if}}\n        </div>\n    </div>\n\n    {{#if showDataTable}}\n        {{data-table\n        data=data\n        columns=columns\n        processing=processing\n        serverSide=serverSide\n        target=this}}\n    {{/if}}\n{{/if}}\n\n<img {{bind-attr class=":reports-preloader reportReady::active"}} src="/img/custom-report-preloader.svg" alt="">\n'}),define("vendor/text!portal/templates/core_reports.hbs",[],function(){return'{{#if errorMsg}}\n    {{errorMsg}}\n{{/if}}\n\n{{#if reportReady}}\n    <div class="row search-download-container">\n        <div class="col-sm-6">\n            <div id="dt-search-box">\n            </div>\n        </div>\n        <div class="col-sm-6 text-right extra-btn-padding">\n            {{#if csvReady}}\n                <a class="btn btn-flat" {{bind-attr download="downloadName"}} {{bind-attr href="downloadLink"}}>\n                    <i class="material-icons">file_download</i>\n                </a>\n            {{/if}}\n        </div>\n    </div>\n    {{#if showDataTable}}\n        {{data-table\n                data=data\n                columns=columns\n                processing=processing\n                serverSide=false\n                target=this}}\n    {{/if}}\n{{/if}}\n\n<img {{bind-attr class=":reports-preloader reportReady::active"}} src="/img/core-report-preloader.svg" alt="">\n'}),define("vendor/text!portal/templates/reports/index.hbs",[],function(){return'<div class="row hapyak-page-index-reports">\n    <div class="no-margin">\n        <div class="hapyak-dashboard-hero-container">\n            {{real-time-stats target=view.controller customClass=\'reports\'}}\n        </div>\n        <h1 class="section-title">REAL TIME STREAM</h1>\n        <div class="indicator"></div>\n        {{real-time-active-sessions target=view.controller application=application}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/reports/questions.hbs",[],function(){return'<div id="dt-active-wrapper" {{bind-attr class="canShow:active"}}>\n    {{#unless trackId}}\n        <div class="row search-download-container">\n            <div class="col-sm-6">\n                <div id="dt-search-box">\n                </div>\n            </div>\n            {{view view.ActionsView recordBinding="projectActionsData"}}\n        </div>\n        {{#if projectActionsData.isLoaded}}\n            {{#if projectActionsTable}}\n                {{data-table\n                    id="projectActionsDataTable"\n                    data=projectActionsTable.rows\n                    columns=projectActionsTable.columns\n                    serverSide=false\n                    processing=false\n                    target=this\n                }}\n            {{/if}}\n        {{/if}}\n    {{else}}\n        <div class="col-sm-6">\n            <div id="dt-search-box">\n            </div>\n        </div>\n        {{#if quizSummaryData.isLoaded}}\n                <div class="col-sm-6 download-questions">\n                    {{view view.ActionsView recordBinding="quizSummaryData"}}</br></br>\n                </div>\n            {{#if quizSummaryData.data.length}}\n                {{#each quizSummaryData.data}}\n                <div class="hapyak-answers-group">\n                    <h4><span>Q.</span> {{unbound question}}</h4>\n                    <div class="hapyak-answers-stats">\n                        <div>Responses: {{unbound num_responses}}</div>\n                        <div>Correct: {{unbound num_correct}}</div>\n                    </div>\n                    <div class="hapyak-answers">\n                        {{#each answers}}\n                            <div class="progress">\n                                {{view view.ProgressBarView percentBinding="percent" correct=correct}}\n                                <div class="hapyak-answer">\n                                    {{#if correct}}\n                                        <span class="material-icons">check</span>\n                                    {{else}}\n                                        <span class="material-icons">close</span>\n                                    {{/if}}\n                                    {{unbound answer}}\n                                </div>\n                                <div class="hapyak-answer-percent">\n                                    {{unbound num_responses}} ({{percent}}%)\n                                </div>\n                            </div>\n                        {{/each}}\n                    </div>\n                </div>\n                {{/each}}\n            {{/if}}\n        {{else}}\n            {{loading-spinner}}\n        {{/if}}\n    {{/unless}}\n</div>\n\n<img {{bind-attr class=":reports-preloader loading:active"}} src="/img/questions-report-preloader.svg" alt="">\n'}),define("vendor/text!portal/templates/reports/stats.hbs",[],function(){return'<h3>Annotation types created between {{reports.start}} and {{reports.end}}</h3>\n\n<table class="table table-striped">\n    <thead>\n        <tr>\n            <th>Type</th>\n            <th>Count</th>\n        </tr>\n    </thead>\n    <tbody>\n        {{#if usageData.isLoaded}}\n            {{#if usageData.counts.length}}\n                {{#each usageData.counts}}\n                    <tr>\n                        <td>{{type}}</td>\n                        <td>{{formatNumber count}}</td>\n                    </tr>\n                {{/each}}\n            {{else}}\n                <tr class="disabled"><td colspan="2"><span class="text-muted">Not enough data to generate reports</span></td></tr>\n            {{/if}}\n        {{else}}\n            <tr><td colspan="2">{{loading-spinner}}</td></tr>\n        {{/if}}\n    </tbody>\n</table>\n'}),define("vendor/text!portal/templates/reports/actions.hbs",[],function(){return'<div class="extra-btn-padding">\n    <a class="btn btn-flat" download="true" {{bind-attr href="view.record.csv"}}>\n        <i class="material-icons">file_download</i>\n    </a>\n</div>\n'}),define("vendor/text!portal/templates/_input-text.hbs",[],function(){return'{{#if view.label}}\n    <label class="control-label" {{bind-attr for="view.inputField.elementId"}}>\n        {{view.label}}\n    </label>\n{{/if}}\n\n{{input typeBinding="view.type" class="form-control"\n    viewName="inputField"\n    placeholder=view.placeholder\n    value=view.value}}\n\n{{#if view.message}}\n    <span class="help-block">{{view.message}}</span>\n{{/if}}\n'}),define("vendor/text!portal/templates/_input-textarea.hbs",[],function(){return'{{#if view.label}}\n    <label class="control-label" {{bind-attr for="view.inputField.elementId"}}>\n        {{view.label}}\n    </label>\n{{/if}}\n\n{{textarea value=name rows="6" class="form-control"\n    viewName="inputField"\n    placeholder=view.placeholder\n    value=view.value}}\n\n{{#if view.message}}\n    <span class="help-block">{{view.message}}</span>\n{{/if}}\n'}),define("vendor/text!portal/templates/account_media.hbs",[],function(){return'    <div class="well">\n      {{view Ember.Select\n        id="hapyak-account-media"\n          classNames="form-control"\n          contentBinding="view.mediaData"\n          selectionBinding="view.selected"\n          optionValuePath="content.id"\n          optionLabelPath="content.title"\n          prompt="Select Media"\n        }}\n    </div>\n'}),define("vendor/text!portal/templates/application.hbs",[],function(){return'{{{ customPortalCss }}}\n<a href="#hapyak-page" class="sr-only">Skip to content</a>\n<div id="hapyak-message">\n    {{#if message}}\n        <div class="alert-container">\n            <div class="portal-alert" role="alert">\n                {{{ message }}}\n            </div>\n        </div>\n    {{/if}}\n    {{#if reportingMessage}}\n        <div class="alert alert-warning" role="alert">\n            <a href="https://reporting.hapyak.com">{{{ reportingMessage }}}</a>\n        </div>\n    {{/if}}\n</div>\n{{#if trialDaysLeftMessage}}\n    <div class="alert-container">\n        <div class="portal-alert" role="alert">\n            {{trialDaysLeftMessage}}\n        </div>\n    </div>\n{{/if}}\n<div id="hapyak-page-container" {{bind-attr class="openSliderNav:push-right lti_context:lti"}}>\n    {{#unless lti_context}}\n        {{slide-in-nav openSliderNav=openSliderNav application=this}}\n    {{/unless}}\n\n    <div id="hapyak-nav" {{bind-attr class=":row"}}>\n        <div class="col-lg-5 col-md-5 col-xs-5 header-item-container">\n            <div class="materialize">\n                {{#if liveEventActive}}\n                    {{#unless multipleLiveEvents}}\n                        <a class=\'live-button btn red pulse\' {{bind-attr href="liveEvents.firstObject.url"}}>Live</a>\n                    {{/unless}}\n\n                    {{#if multipleLiveEvents}}\n                        <a class=\'dropdown-button live-button btn red pulse\' href=\'#\' data-activates=\'live-events-dropdown\'>Live<span class="dropdown-length">{{liveEvents.length}}</span></a>\n\n                        <ul id=\'live-events-dropdown\' class=\'dropdown-content\'>\n                            {{#each event in liveEvents}}\n                                <li><a {{bind-attr href="event.url"}}>{{event.name}}</a></li>\n                            {{/each}}\n                        </ul>\n                    {{/if}}\n                {{/if}}\n            </div>\n        </div>\n        <div class="col-sm-2 col-xs-2 hapyak-header-logo-container header-item-container">\n            <div id="hapyak-header-logo-image-container" {{bind-attr class="lti_context:lti"}}>\n                {{#if lti_context}}\n                    <div class="hapyak-header-logo">\n                        <div id="hapyak-header-logo-image"></div>\n                    </div>\n                {{/if}}\n\n                {{#unless lti_context}}\n                    {{#link-to \'index\' classNames="hapyak-header-logo"}}\n                        <div id="hapyak-header-logo-image"></div>\n                    {{/link-to}}\n                {{/unless}}\n            </div>\n        </div>\n        <div class="col-lg-5  col-md-5 col-xs-5 header-item-container">\n            \x3c!-- LTI users do not have visible access to group or user --\x3e\n            {{#unless lti_context}}\n                <div {{bind-attr class=":profile-container lti_context:lti"}}>\n                    {{view view.UserlinkView}}\n                </div>\n                <div class="profile-container" {{action "openGroupSearch"}}>\n                    {{view view.GrouplinkView}}\n                </div>\n            {{/unless}}\n        </div>\n    </div>\n    <div {{bind-attr class="settingsRoute:settings-route experienceRoute:experience-route"}}>\n        {{#if inactiveState}}\n            {{customer-unpaid groupId=currentGroup.id inactiveState=inactiveState}}\n        {{/if}}\n        {{#unless inactiveState}}\n            <div id="hapyak-page" {{bind-attr class="customClass"}}>\n                {{outlet}}\n            </div>\n        {{/unless}}\n    </div>\n</div>\n{{outlet modal}}\n{{outlet warning}}\n'}),define("vendor/text!portal/templates/asset_upload.hbs",[],function(){return'<div id="asset-upload-container" class="materialize">\n    <input id="fileupload" type="file" name="file" accept="application/pdf" />\n\n    <div id="asset-upload-status" {{bind-attr class="view.hide:hide"}}>\n\n        {{#if view.isFileAdded}}\n            <div id="asset-filename">{{view.filename}}</div>\n\n            {{#if view.isUploading}}\n                <i class="uploading-status-icon fa fa-times" {{action "cancel" target="view"}}></i>\n                <div class="uploading-status">Uploading</div>\n            {{/if}}\n\n            {{#if view.isUploaded}}\n                <i class="uploading-status-icon fa fa-check"></i>\n                <div class="uploading-status">Converting PDF</div>\n                {{preloader-component}}\n            {{/if}}\n\n            {{#if view.isCancelled}}\n                <div class="uploading-status-icon" {{action "upload" target="view"}}> Restart Upload</div>\n                <div class="uploading-status">Cancelled</div>\n            {{/if}}\n\n            {{#if view.isError}}\n                <div class="uploading-status-icon" {{action "upload" target="view"}}> Restart Upload</div>\n                <div class="uploading-status">Error</div>\n            {{/if}}\n\n            {{#unless view.isUploaded}}\n                <div class="progress active">\n                    <div class="progress-bar progress-bar-success" role="progressbar"></div>\n                </div>\n            {{/unless}}\n        {{/if}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/userlink.hbs",[],function(){return'{{#if currentUser.isLoggedIn}}\n    <div class="button-name">\n        <div class="profile-name-text" {{bind-attr data-user-id=currentUser.id}} {{bind-attr data-user-username=currentUser.username}}>{{currentUser.first_name}} {{currentUser.last_name}}</div>\n    </div>\n    <div class="img-container">\n        <i class="icon material-icons">person</i>\n    </div>\n\n    {{#unless lti_context}}\n        {{#if view.isExpanded}}\n            <div id="triangle"></div>\n            <div class="dropdown-menu pull-right show userlink">\n                {{#link-to "profile"}}<p {{action "navAction" "profile"}}><i class="icon material-icons">person</i>Profile</p>{{/link-to}}\n                <a><p {{action "navAction" "logout"}}><i class="icon material-icons">exit_to_app</i>Log Out</p></a>\n            </div>\n        {{/if}}\n    {{/unless}}\n{{/if}}\n'}),define("vendor/text!portal/templates/supportlink.hbs",[],function(){return'{{#if currentUser.isLoggedIn}}\n    <div class="row">\n        <div class="button-name">\n            <div class="profile-name-text">Help</div>\n        </div>\n        <div class="img-container">\n            <i class="icon material-icons">help</i>\n        </div>\n\n        {{#if view.isExpanded}}\n            <div id="triangle"></div>\n            <div class="dropdown-menu pull-right show supportlink">\n                {{#unless lti_context}}\n                    <a href="http://kb.hapyak.com/" target="_blank"><i class="icon material-icons">class</i><span>Knowledge Base</span></a>\n                    <a href="http://academy.hapyak.com" target="_blank"><i class="icon material-icons">school</i><span>Academy</span></a>\n                {{/unless}}\n                {{#if lti_context}}\n                    {{#report-issue}}\n                        <span class="icon hy-edit"></span>\n                    {{/report-issue}}\n                {{/if}}\n            </div>\n        {{/if}}\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/grouplink.hbs",[],function(){return'{{log currentGroup}}\n\n{{#if currentUser.isLoggedIn}}\n    {{#if currentUser.openGroupModal}}\n        <div class="button-name">\n            <div class="profile-name-text" {{bind-attr data-group-id=currentGroup.id}} {{bind-attr data-group-name=currentGroup.name}}>{{currentGroup.name}}</div>\n        </div>\n        <div class="img-container">\n            <i class="icon material-icons">domain</i>\n        </div>\n    {{else}}\n        <div class="button-name">\n            <div class="profile-name-text" {{bind-attr data-group-id=currentGroup.id}} {{bind-attr data-group-name=currentGroup.name}}>{{currentGroup.name}}</div>\n        </div>\n        <div class="img-container">\n            <i class="icon material-icons">domain</i>\n        </div>\n    {{/if}}\n{{/if}}\n\n'}),define("vendor/text!portal/templates/cards.hbs",[],function(){return'<div {{bind-attr class=":col-xs-s12 application.openSliderNav:col-sm-12:col-sm-6 application.openSliderNav:col-md-6:col-md-4 application.openSliderNav:col-lg-4:col-lg-3 application.openSliderNav:col-xl-3:col-xl-2"}}>\n  <div class="settings-card">\n    {{#if view.cardPicture}}\n      <div class="card-picture-container">\n        <img class="card-picture" {{bind-attr src=\'view.cardPicture\'}}/>\n      </div>\n    {{/if}}\n    {{yield}}\n  </div>\n</div>\n'}),define("vendor/text!portal/templates/card_access_gate.hbs",[],function(){return'  <div id="access-gate-card">\n    <script type="text/template" id="circle-loading">\n        <svg width="120px" height="120px">\n            <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n            <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n            <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n            <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n            <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n            <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n            <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n        </svg>\n    <\/script>\n    {{currentGroup.groupConfigurations}}\n    <div class="card-with-inputs">\n        <div class="card-title">{{view.cardTitle}}</div>\n            <div class="card-options-container sm-bottom-padding">\n                <div class="card-option">\n                    <div class="row">\n                        <div class="option-title">Access Gate</div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="option-description">{{view.cardDescription}}</div>\n                </div>\n                <div class="card-option">\n                    <div class="row">\n                        <div class="option-title">Use Default</div>\n                        <div class="option-toggle" {{action toggleExperienceRedirectUrlRequired}}>\n                            <div {{bind-attr class=":option-toggle-switch useDefaultAccessGate.value:toggle-on useDefaultAccessGate.inherited:inherited"}} {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.change.card-access-gate.useDefaultAccessGate"}}></div>\n                        </div>\n                    </div>\n                    {{#unless useDefaultAccessGate.value}}\n                    <div class="row">\n                        <div id="hapyak-user-input-security-redirecturl" class="row redirecturl" {{bind-attr class=":redirecturl useDefaultAccessGate.value:hideUrl"}}>\n                            {{portal-text-input inputType="text" settingValue=access_gate.reg_redirect_url.value settingId="redirectUrl" settingLabel="Redirect URL" savePath="access_gate.reg_redirect_url" }}\n                        </div>\n                    </div>\n                    {{/unless}}\n                </div>\n            </div>\n        <div class="materialize card-button-container">\n            <div class="reset-btn loading-button circular-loading left card-button btn-flat" {{action resetProperties view.configProperties target="view"}}>Reset</div>\n            <div {{bind-attr class=":save-btn :loading-button :circular-loading :card-button :btn :right view.saveDisabled:disabled"}} {{action save view.configProperties target="view"}}>Save</div>\n        </div>\n    </div>\n  </div>\n'}),define("vendor/text!portal/templates/card_brightcove.hbs",[],function(){return'<div id="hapyak-brightcove-card">\n    <script type="text/template" id="circle-loading">\n        <svg width="120px" height="120px">\n            <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n            <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n            <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n            <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n            <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n            <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n            <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n        </svg>\n    <\/script>\n\n    <div class="card-with-inputs">\n        <div class="card-title">\n            {{view.cardTitle}}\n        </div>\n        <div class="card-options-container">\n            <div class="card-option">\n                <div class="materialize row">\n                    <div class="option-description">{{view.description}}</div>\n                </div>\n            </div>\n        </div>\n\n        <div class="card-field no-bottom-border">\n            <div id="brightcove-plugin-link-btn" class="materialize center-align">\n                <a class="waves-effect waves-light btn pink" target="_blank" href="http://kb.hapyak.com/getting-set-up/hapyak-plugin-for-brightcove">\n                    Setup Plugin\n                </a>\n            </div>\n        </div>\n        {{#if provisioning.hosting.video.brightcove}}\n            <div class="card-options-container">\n                <div class="card-option">\n                    <div class="row">\n                        <div class="option-title">Enable</div>\n                        <div class="option-toggle" {{action toggleBrightcoveIntegrationEnabled}}>\n                            <div {{bind-attr class=":option-toggle-switch brightcoveIntegrationEnabled:toggle-on"}} {{action "sendInteraction" "configUi" "click" "portal.settings.integrations.card-brightcove.change"}}></div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="option-description">{{view.cardDescription}}</div>\n                    </div>\n                    <div {{bind-attr class=":card-input-fields brightcoveIntegrationEnabled:enabled"}}>\n                        <div {{bind-attr class=":card-field-wrapper brightcoveIntegrationEnabled:enabled"}}>\n                            {{portal-text-input inputType="text" settingValue=brightcove.clientId.value settingId="brightcoveClientId" settingLabel="Client Id" savePath="brightcove.clientId" }}\n                        </div>\n\n                        <div {{bind-attr class=":card-field-wrapper brightcoveIntegrationEnabled:enabled"}}>\n                            {{portal-text-input inputType="text" settingValue=brightcove.clientSecret.value settingId="brightcoveClientSecret"settingLabel="Client Secret" savePath="brightcove.clientSecret" }}\n                        </div>\n                        <div {{bind-attr class=":card-field-wrapper brightcoveIntegrationEnabled:enabled"}}>\n                            {{portal-text-input inputType="text" settingValue=brightcove.accountId.value settingId="brightcoveAccountId"settingLabel="Account Id" savePath="brightcove.accountId" }}\n                        </div>\n                        <div {{bind-attr class=":card-field-wrapper brightcoveIntegrationEnabled:enabled"}}>\n                            {{portal-text-input inputType="text" settingValue=brightcove.bcPlayer.value settingId="brightcoveBcPlayer"settingLabel="Brightcove Player" savePath="brightcove.bcPlayer" }}\n                        </div>\n                        <div {{bind-attr class=":card-field-wrapper brightcoveIntegrationEnabled:enabled"}}>\n                            <div class="description">Optional. If left blank the default player for your account will be used.</div>\n                        </div>\n\n                        <div {{bind-attr class=":card-field-wrapper brightcoveIntegrationEnabled:enabled"}}>\n                            {{portal-text-input inputType="text" settingValue=brightcove.xapikey.value settingId="brightcoveXapikey"settingLabel="Default Live XAPIKEY" savePath="brightcove.xapikey" }}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            {{#if view.brightcoveIntegrationEnabled}}\n                {{#if view.canCreatePlayer}}\n                    <div class="card-options-container section">\n                        <div class="row">\n                            <div class="card-title brightcove">\n                                Create Brightcove Player\n                            </div>\n                        </div>\n                        <div class="card-option">\n                            <div class="row">\n                                {{portal-text-input inputType="text" settingValue=view.customPlayerName settingId="customPlayerName" settingLabel="Player Name"}}\n                            </div>\n                            <div class="row">\n                                <div class="row center-align">\n                                    <div class="waves-effect waves-light btn create-player-btn"{{action createPlayer target="view"}}>\n                                        Create\n                                    </div>\n                                    {{#if view.playerCreatedStatus}}\n                                        <div class="job-details">\n                                            {{view.playerCreatedStatus}}\n                                        </div>\n                                    {{/if}}\n                                    {{#if view.playerCreatedId}}\n                                        <div class="job-details">\n                                            {{view.playerCreatedId}}\n                                        </div>\n                                    {{/if}}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                {{/if}}\n                {{#if view.canSync}}\n                    <div class="card-title brightcove">\n                        {{view.syncTitle}}\n                    </div>\n                    <div class="card-options-container">\n                        <div class="card-option">\n                            <div class="materialize row">\n                                <div class="option-description">{{view.syncDescription}}<a href="//kb.hapyak.com/integrations/brightcove-sync" target="blank" class="sync-link">Read More</a></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="card-options-container">\n                        <div class="card-option">\n                            <div class="row">\n                                <div class="option-title">Enable</div>\n                                <div id=\'brightcove-save\' class="option-toggle" {{action toggleBrightcoveSyncEnabled}}>\n                                    <div {{bind-attr class=":option-toggle-switch brightcoveSyncEnabled:toggle-on"}} {{action "sendInteraction" "configUi" "click" "portal.settings.integrations.card-brightcove.change"}}></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div {{bind-attr class=":sync-section brightcoveSyncEnabled:enabled"}}>\n                        <div class="card-options-container section">\n                            <div class="card-option">\n                                <div class="row">\n                                    <div class="row center-align sync-row">\n                                        <div class="sync-btn waves-effect waves-light btn" {{action brightcoveSync target="view"}}>\n                                            {{view.jobStatus}}\n                                        </div>\n                                        <div class=\'sync-status\'>\n                                            {{#if view.syncErrorMsg}}\n                                                <div class="job-details">\n                                                    {{view.syncErrorMsg}}\n                                                </div>\n                                            {{/if}}\n                                            <div class="job-details">\n                                                {{view.timeStart}}\n                                            </div>\n                                            <div class="job-details">\n                                                {{view.recordsProcessed}}\n                                            </div>\n                                            <div class="job-details">\n                                                {{view.recordsUpdated}}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                {{/if}}\n            {{/if}}\n        {{/if}}\n        <div class="row btn-row">\n            <div class="materialize card-button-container">\n                <div {{bind-attr class=":reset-btn :loading-button :circular-loading :btn-flat :card-button :left brightcoveIntegrationEnabled:enabled"}} {{action resetProperties view.configProperties "serverIntegrationsConfig" view.resetButton "brightcove" targetObject="view"}}>Reset</div>\n                <div {{bind-attr class=":save-btn :loading-button :circular-loading :btn :card-button :right brightcoveIntegrationEnabled:enabled view.saveDisabled:disabled"}} {{action save view.configProperties "serverIntegrationsConfig" view.saveButton targetObject="view"}}>Save</div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_google.hbs",[],function(){return'<script type="text/template" id="circle-loading">\n    <svg width="120px" height="120px">\n        <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n        <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n        <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n        <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n        <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n    </svg>\n<\/script>\n{{currentGroup.groupConfigurations}}\n<div id="google-analytics-card">\n    <div class="card-with-inputs">\n        <div class="card-title">{{view.cardTitle}}</div>\n        <div class="card-options-container">\n            <div class="card-option">\n                <div class="row">\n                    <div class="option-title">Enabled</div>\n                    {{#if currentGroup.hasGroupConfigurations}}\n                        <div class="option-toggle" {{action toggleGoogleAnalyticsEnabled}}>\n                            <div {{bind-attr class=":option-toggle-switch controller.googleAnalyticsEnabled:toggle-on"}} {{action "sendInteraction" "configUi" "click" "portal.settings.integrations.change.card-google"}}></div>\n                        </div>\n                    {{/if}}\n                </div>\n                <div class="row">\n                    <div class="option-description">{{view.cardDescription}}</div></br>\n                    <div class="card-field no-bottom-border">\n                        <div class="materialize">\n                            <div id="brightcove-plugin-link-btn" class="card-btn btn">\n                                <a target="_blank" class="card-google" href="https://docs.google.com/document/d/1QobjonB3CWFR8Lf8EG42WenWAPQlbqj0ZfZgtDRJn3g/edit?usp=sharing">\n                                    Google Analytics Plugin Info\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div {{bind-attr class=":card-input-fields controller.googleAnalyticsEnabled:enabled"}}>\n\n            {{#if currentGroup.hasGroupConfigurations}}\n                {{#if currentGroup.hasAnalyticsConfig}}\n                    <div {{bind-attr class=":card-field-wrapper controller.googleAnalyticsEnabled:enabled"}} >\n                        {{portal-text-input inputType="text" settingValue=googleId settingId="googleId" settingLabel="Google ID" savePath="google.setup" }}\n                    </div>\n                {{/if}}\n            {{/if}}\n            <div class="materialize">\n                <div {{bind-attr class=":save-btn :loading-button :card-button :btn :circular-loading :right controller.googleAnalyticsEnabled:enabled view.saveDisabled:disabled"}} {{action save view.configProperties "analyticsConfig" target="view"}}>Save</div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_domain_white_list.hbs",[],function(){return'<script type="text/template" id="circle-loading">\n    <svg width="120px" height="120px">\n        <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n        <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n        <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n        <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n        <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n    </svg>\n<\/script>\n{{currentGroup.groupConfigurations}}\n<div id="domain-white-list-card">\n    <div class="card-with-inputs">\n        <div class="card-title">{{view.cardTitle}}</div>\n        <div class="card-options-container">\n            <div class="card-option">\n                <div class="row">\n                    <div class="option-description">{{view.cardDescription}}</div></br>\n                </div>\n            </div>\n        </div>\n        <div class="card-input-fields">\n                <div class="card-field-wrapper ">\n                    {{portal-text-input inputTypeOverride="textarea" inputType="text" settingValue=whiteListDomainList settingId="whiteListDomainList" settingLabel="whiteListDomainList" savePath="serverWhiteListDomainList.whiteListDomainList" targetController="_parentView.controller.integrations"}}\n                </div>\n            <div class="reset-btn loading-button circular-loading left" {{action resetProperties view.configProperties "hapyakHostedServerConfig" "security_strategy.domain_restriction.whitelists.PRE_RELEASE_DEFAULT" target="view"}}>Clear</div>\n            <div class="save-btn loading-button circular-loading left" {{action save view.configProperties "hapyakHostedServerConfig" "security_strategy.domain_restriction.whitelists.PRE_RELEASE_DEFAULT" target="view"}}>Save</div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_facebook.hbs",[],function(){return'<script type="text/template" id="circle-loading">\n    <svg width="120px" height="120px">\n        <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n        <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n        <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n        <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n        <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n    </svg>\n<\/script>\n<div id="facebook-card">\n    <div class="card-with-inputs">\n        <div class="card-title">{{view.cardTitle}}</div>\n        <div class="card-options-container">\n            <div class="card-option">\n                <div class="row">\n                    <div class="option-description">{{view.cardDescription}}</div>\n                </div>\n            </div>\n        </div>\n\n        <div class="card-input-fields">\n            {{#if provisioning.annotationTypes.social}}\n                <div class="card-field-wrapper ">\n                    {{portal-text-input inputType="text" settingValue=appId settingId="appId" settingLabel="App ID" savePath="facebook.appId" }}\n                </div>\n            {{/if}}\n            <div class="materialize card-button-container">\n                <div class="reset-btn loading-button card-button btn-flat circular-loading enabled left" {{action resetProperties view.configProperties "playerConfig" target="view"}}>Reset</div>\n                <div {{bind-attr class=":save-btn :loading-button :card-button :btn :circular-loading view.saveDisabled:disabled :right"}} {{action save view.configProperties "playerConfig" target="view"}}>Save</div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_group_members.hbs",[],function(){return'<div class="card-title">{{view.cardTitle}}</div>\n<div class="card-options-container">\n  {{#each option in view.options}}\n    <div class="card-option">\n      <div class="row">\n        <div class="option-title">{{option.title}}</div>\n        <div class="option-toggle">\n          <div class="option-toggle-switch"></div>\n        </div>\n      </div>\n      <div class="row">\n        <div class="option-description">{{option.description}}</div>\n      </div>\n    </div>\n  {{/each}}\n</div>'}),define("vendor/text!portal/templates/card_subgroup.hbs",[],function(){return'<div class="card-with-inputs">\n    <div class="card-title">{{view.cardTitle}}</div>\n\n    <div class="card-options-container">\n        <div class="card-option">\n            <div class="row">\n                <div class="option-description">\n                    {{view.description}}\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="card-field">\n        <div class="card-btn manage-users-btn btn" {{action "sendInteraction" "configUi" "click" "portal.settings.group.click.card-manage-users.invite"}}>\n            <a {{action "open" "subgroupListModal" "currentGroup"}}>\n                {{view.btnCta}}\n            </a>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_automated_email.hbs",[],function(){return'<div class="card-with-inputs">\n    <div class="card-title">{{view.cardTitle}}</div>\n\n    <div class="card-options-container">\n        <div class="card-option">\n            <div class="row">\n                <div class="option-description">\n                    {{view.cardDescription}}\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="card-field">\n        <div class="card-btn btn"}}>\n            <a {{action "open" "subscribeToAutomatedReportModal" "currentGroup"}}>\n                Edit Subscriptions\n            </a>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_embed_whitelist.hbs",[],function(){return'<div class="card-with-inputs">\n    <div class="card-title">{{view.cardTitle}}</div>\n\n    <div class="card-options-container">\n        <div class="card-option">\n            <div class="row">\n                <div class="option-description">\n                    {{view.cardDescription}}\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="card-field">\n        <div class="card-btn btn"}}>\n            <a {{action "open" "embedWhitelistModal" "currentGroup"}}>\n                Edit Whitelist\n            </a>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_hapyak_api.hbs",[],function(){return'<div id="hapyak-api-card">\n    <div class="card-with-inputs">\n        <div class="card-title">{{view.cardTitle}}</div>\n        <div class="card-options-container">\n            <div class="card-option">\n                <div class="row">\n                    <div class="option-description">\n                        HapYak API read and write keys are only available to an administrator and are used to access your account. Do not share them with anyone.\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        {{#if view.hapyakReadKey}}\n            <div class="card-field">\n                <div class="card-field-content-container">\n                    <div {{bind-attr class=":card-field-content-placeholder content:has-content"}}>API Read Key</div>\n                    <div class="card-field-content">{{readKey}}</div>\n                </div>\n            </div>\n        {{/if}}\n\n        {{#if view.hapyakWriteKey}}\n            <div class="card-field">\n                <div class="card-field-content-container">\n                    <div {{bind-attr class=":card-field-content-placeholder content:has-content"}}>API Write Key</div>\n                    <div class="card-field-content">{{writeKey}}</div>\n                </div>\n            </div>\n        {{/if}}\n\n        {{#if view.hapyakReportingKey}}\n            <div class="card-field">\n                <div class="card-field-content-container">\n                    <div {{bind-attr class=":card-field-content-placeholder content:has-content"}}>API Reporting Key</div>\n                    <div class="card-field-content">{{reportingKey}}</div>\n                </div>\n            </div>\n        {{/if}}\n    </div>\n</div>'}),define("vendor/text!portal/templates/card_experience_branding.hbs",[],function(){return'<div class="col col-xs-12 col-md-6">\n  <div class="settings-card experience-branding">\n    <script type="text/template" id="circle-loading">\n        <svg width="120px" height="120px">\n            <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n            <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n            <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n            <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n            <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n            <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n            <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n        </svg>\n    <\/script>\n    {{currentGroup.groupConfigurations}}\n    <div id="experience-branding-card">\n        <div class="card-with-inputs">\n            <div class="card-title">{{view.cardTitle}}</div>\n            <div class="card-options-container sm-bottom-padding">\n                <div class="card-option">\n                    <div class="row">\n                        <div class="option-title">Group Branding</div>\n                    </div>\n                </div>\n                <div class="card-input-fields">\n                    <div class="card-option">\n                        {{portal-text-input inputType="text" settingValue=branding.header.value settingId="brandingHeader" settingLabel="Landing Page Header <HTML/>" savePath="branding.header" }}\n                    </div>\n\n                    <div class="card-option">\n                        {{portal-text-input inputType="text" settingValue=branding.footer.value settingId="brandingFooter" settingLabel="Landing Page Footer <HTML/>" savePath="branding.footer" }}\n                    </div>\n\n                    <div class="card-option">\n                        {{portal-text-input inputType="text" settingValue=branding.background.value settingId="brandingBackground" settingLabel="Background Image URL" savePath="branding.background" }}\n                    </div>\n                </div>\n            </div>\n            <div class="materialize card-button-container">\n                <div class="reset-btn loading-button circular-loading card-button btn-flat left" {{action resetProperties view.configProperties target="view"}}>Reset</div>\n                <div {{bind-attr class=":save-btn :loading-button :circular-loading :card-button :btn :right view.saveDisabled:disabled"}} {{action save view.configProperties target="view"}}>Save</div>\n            </div>\n        </div>\n    </div>\n  </div>\n</div>\n'}),define("vendor/text!portal/templates/card_manage_users.hbs",[],function(){return'<div class="card-with-inputs">\n    <div class="card-title">{{view.cardTitle}}</div>\n\n    <div class="card-options-container">\n        <div class="card-option">\n            <div class="row">\n                <div class="option-description">\n                    Manage current group member and invite new members to your group.\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="card-field">\n        <div class="card-btn manage-users-btn btn" {{action "sendInteraction" "configUi" "click" "portal.settings.group.click.card-manage-users.invite"}}>\n            <a {{action "open" "usersModal" "currentGroup"}}>\n                Manage Members\n            </a>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_organization.hbs",[],function(){return'<div class="card-with-inputs">\n    <div class="card-options-container">\n        <div class="card-option">\n            <div class="row">\n                <div class="option-description">{{view.cardDescription}}</div>\n            </div>\n        </div>\n    </div>\n    <div class="card-input-fields">\n        <div class="card-field-wrapper">\n            {{portal-text-input inputType="text" settingValue=name settingId="groupName" settingLabel="Group Name" }}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_player.hbs",[],function(){return'<script type="text/template" id="circle-loading">\n    <svg width="120px" height="120px">\n        <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n        <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n        <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n        <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n        <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n    </svg>\n<\/script>\n<div class="card-title">{{view.cardTitle}}</div>\n<div class="card-options-container">\n  <div class="card-option">\n    <div class="row">\n      <div class="option-title">Minimum Video Size</div>\n        <div class="option-toggle" {{action togglePlayerMinimumSizeEnabled}}>\n          <div {{bind-attr class=":option-toggle-switch playerMinimumSizeEnabled:toggle-on minWidth.inherited:inherited minHeight.inherited:inherited"}} {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.card-player.change.minimumVideoSize"}}></div>\n        </div>\n    </div>\n    <div class="row">\n      <div class="option-description">The minimum height or minimum width at which annotations are displayed (in pixels).</div>\n    </div>\n    <div id="player-minimum-size-fields" {{bind-attr class="playerMinimumSizeEnabled"}}>\n      <div class="player-minimum-width">\n        <label>\n          <div {{bind-attr class=":placeholder minWidth.value:open"}}>Width</div>\n          {{input class="player-minimum-size-input" id="player-minimum-width" type="number" value=minWidth.value focus-in="movePlaceholder" focus-out="setMinimumSizeConfig"}}\n        </label>\n      </div>\n      <div class="player-minimum-height">\n        <label>\n          <div {{bind-attr class=":placeholder minHeight.value:open"}}>Height</div>\n          {{input class="player-minimum-size-input" id="player-minimum-height" type="number" value=minHeight.value focus-in="movePlaceholder" focus-out="setMinimumSizeConfig"}}\n        </label>\n      </div>\n    </div>\n  </div>\n  <div class="card-option">\n    <div class="row">\n      <div class="option-title">Full-Screen Pop Out</div>\n      <div class="option-toggle" {{action getFullScreenPopOut}}>\n        <div {{bind-attr class=":option-toggle-switch fullScreenPopOut.value:toggle-on fullScreenPopOut.inherited:inherited"}} {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.card-player.change.full-screen-popout"}}></div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="option-description">Opens video in new window when full-screen is not available due to browser incompatibility</div>\n    </div>\n  </div>\n</div>\n<div class="materialize card-button-container">\n  <div class="reset-btn loading-button circular-loading card-button btn-flat left" {{action resetProperties view.configProperties target="view"}}>Reset</div>\n  <div {{bind-attr class=":save-btn :loading-button :circular-loading :card-button :btn :right view.saveDisabled:disabled" }} {{action save view.configProperties target="view"}}>Save</div>\n</div>\n'}),define("vendor/text!portal/templates/card_plan.hbs",[],function(){return'<div class="card-title">{{view.currentPlan.name}}</div>\n<div class="card-with-inputs">\n    <div class="card-options-container">\n        <div class="card-option">\n            <div class="option-description">{{view.currentPlan.upgradeDescription}}</div>\n        </div>\n\n        {{#if view.currentPlan.signup}}\n            <div class="card-option materialize center-align">\n                <button {{action "goToReturnedUrl" "/chargify/get_signup_link" target=view}} class="waves-effect waves-light btn hapyak-blue">Upgrade</button>\n            </div>\n\n            <div class="card-option materialize center-align pad-bottom">\n                <a href="https://corp.hapyak.com/plans/">Click here to see other pricing options.</a>\n            </div>\n        {{/if}}\n\n        {{#if view.currentPlan.manage}}\n            <div class="card-option materialize center-align">\n                <button {{action "goToReturnedUrl" "/chargify/get_billing_portal_management_link" target=view}} class="waves-effect waves-light btn hapyak-blue">Manage</button>\n            </div>\n        {{/if}}\n\n        {{#if view.currentPlan.contact}}\n            {{send-email-form\n                to=view.recipient\n                from=view.userEmail\n                subject=view.currentPlan.subject\n                bodyPrefix=view.currentPlan.bodyPrefix\n                placeholder=""\n                label="Questions / Comments"\n                text="Upgrade"\n            }}\n        {{/if}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_quiz.hbs",[],function(){return'<script type="text/template" id="circle-loading">\n    <svg width="120px" height="120px">\n        <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n        <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n        <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n        <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n        <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n    </svg>\n<\/script>\n<div class="card-title">{{view.cardTitle}}</div>\n<div class="card-options-container">\n  <div class="card-option">\n    <div class="row">\n      <div class="option-title">Show Results</div>\n        <div class="option-toggle" {{action updateQuizConfigObject \'Results\'}}>\n          <div {{bind-attr class=":option-toggle-switch defaults.quiz.showResults.value:toggle-on defaults.quiz.showResults.inherited:inherited"}} {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.change.card-quiz.results"}}></div>\n        </div>\n    </div>\n    <div class="row">\n      <div class="option-description">Allow the user to see the right answer after they have submitted their response.</div>\n    </div>\n  </div>\n\n  <div class="card-option">\n    <div class="row">\n      <div class="option-title">Show Retry</div>\n      <div class="option-toggle" {{action updateQuizConfigObject \'Retry\'}}>\n        <div {{bind-attr class=":option-toggle-switch defaults.quiz.showRetry.value:toggle-on defaults.quiz.showRetry.inherited:inherited"}} {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.change.card-quiz.retry"}}></div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="option-description">Allow the user to retry any questions marked as incorrect.</div>\n    </div>\n  </div>\n\n  <div class="card-option">\n    <div class="row">\n      <div class="option-title">Show Skip</div>\n      <div class="option-toggle" {{action updateQuizConfigObject \'Skip\'}}>\n        <div {{bind-attr class=":option-toggle-switch defaults.quiz.showSkip.value:toggle-on defaults.quiz.showSkip.inherited:inherited"}} {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.change.card-quiz.skip"}}></div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="option-description">Allow the user to skip a question without submitting an answer.</div>\n    </div>\n  </div>\n</div>\n<div class="materialize card-button-container">\n  <div class="reset-btn loading-button circular-loading card-button btn-flat left" {{action resetProperties view.configProperties target="view"}}>Reset</div>\n  <div {{bind-attr class=":save-btn :loading-button :circular-loading :card-button :btn :right view.saveDisabled:disabled"}} {{action save view.configProperties target="view"}}>Save</div>\n</div>\n'}),define("vendor/text!portal/templates/card_playerbar.hbs",[],function(){return'<script type="text/template" id="circle-loading">\n    <svg width="120px" height="120px">\n        <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n        <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n        <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n        <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n        <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n    </svg>\n<\/script>\n<div class="card-title">{{view.cardTitle}}</div>\n<div class="card-options-container">\n  <div class="card-option">\n    <div class="row">\n      <div class="option-title">Hide Annotation Markers</div>\n        <div class="option-toggle" {{action updatePlayerbarConfigObject \'hidectrlbarAnnotationMarkers\'}}>\n          <div {{bind-attr class=":option-toggle-switch defaults.playerbar.hideAnnotationMarkers.value:toggle-on defaults.playerbar.hideAnnotationMarkers.inherited:inherited"}} {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.change.card-playerbar.results"}}></div>\n        </div>\n    </div>\n    <div class="row">\n      <div class="option-description">hide users where annotations appear on the timeline.</div>\n    </div>\n  </div>\n\n  <div class="card-option">\n    <div class="row">\n      <div class="option-title">Hide Skip Buttons</div>\n      <div class="option-toggle" {{action updatePlayerbarConfigObject \'hidectrlbarSkipAnnotationBtn\'}}>\n        <div {{bind-attr class=":option-toggle-switch defaults.playerbar.hideSkipAnnotationBtn.value:toggle-on defaults.playerbar.hideSkipAnnotationBtn.inherited:inherited"}} {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.change.card-playerbar.retry"}}></div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="option-description">hide annotation navigation buttons.</div>\n    </div>\n  </div>\n\n  <div class="card-option">\n    <div class="row">\n      <div class="option-title">Hide Timeline</div>\n      <div class="option-toggle" {{action updatePlayerbarConfigObject \'hidectrlbarTimeline\'}}>\n        <div {{bind-attr class=":option-toggle-switch defaults.playerbar.hideTimeline.value:toggle-on defaults.playerbar.hideTimeline.inherited:inherited"}} {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.change.card-playerbar.timeline"}}></div>\n      </div>\n    </div>\n  </div>\n\n  <div class="card-option">\n    <div class="row">\n      <div class="option-title">Hide Logo</div>\n      <div class="option-toggle" {{action updatePlayerbarConfigObject \'hidectrlbarLogo\'}}>\n        <div {{bind-attr class=":option-toggle-switch defaults.playerbar.hideLogo.value:toggle-on defaults.playerbar.hideLogo.inherited:inherited"}} {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.change.card-playerbar.logo"}}></div>\n      </div>\n    </div>\n  </div>\n</div>\n  <div class="materialize card-button-container">\n    <div class="reset-btn loading-button circular-loading card-button btn-flat left" {{action resetProperties view.configProperties target="view"}}>Reset</div>\n    <div class="save-btn loading-button circular-loading card-button btn right" {{action save view.configProperties target="view"}}>Save</div>\n  </div>\n'}),define("vendor/text!portal/templates/card_salesforce.hbs",[],function(){return'<script type="text/template" id="circle-loading">\n    <svg width="120px" height="120px">\n        <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n        <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n        <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n        <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n        <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n    </svg>\n<\/script>\n\n<div id="hapyak-salesforce-card">\n    <div class="card-with-inputs">\n        <div class="card-title">{{view.cardTitle}}</div>\n\n        <div class="card-options-container">\n            <div class="card-option">\n                <div class="row">\n                    <div class="option-title">Enabled</div>\n                    <div class="option-toggle" {{action toggleSalesforceIntegrationEnabled}}>\n                      <div {{bind-attr class=":option-toggle-switch salesforceIntegrationEnabled:toggle-on"}} {{action "sendInteraction" "configUi" "click" "portal.settings.integrations.card-salesforce.change"}}></div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="option-description">{{view.cardDescription}}</div>\n                </div>\n            </div>\n        </div>\n\n        <div {{bind-attr class=":card-input-fields salesforceIntegrationEnabled:enabled"}}>\n            <div {{bind-attr class=":card-field-wrapper salesforceIntegrationEnabled:enabled"}}>\n                {{portal-text-input inputType="text" settingValue=salesforce.username.value settingId="salesforceUsername" settingLabel="Username" savePath="salesforce.username" }}\n            </div>\n            <div {{bind-attr class=":card-field-wrapper salesforceIntegrationEnabled:enabled"}}>\n                {{portal-text-input inputType="text" settingValue=salesforce.securityToken.value settingId="salesforceToken"settingLabel="Security Token" savePath="salesforce.securityToken" }}\n            </div>\n\n            <div {{bind-attr class=":card-field :card-password-field view.isUpdatingPassword:editing salesforceIntegrationEnabled:enabled"}}>\n                <div class="card-field-icon-container">\n                    <div class="card-field-icon" style="background-image: url(\'/css/images/password-icon.svg\')" ></div>\n                </div>\n                <div class="card-field-content-container">\n                    <div {{bind-attr class=":card-field-content-placeholder view.isUpdatingPassword:has-content"}}></div>\n                    <div class="password-permanent-placeholder">Password</div>\n                    <div class="confirm-password-permanent-placeholder">Confirm Password</div>\n                </div>\n                <div class="card-input-container">\n                    <i {{action "showPassword" target="view"}} class="card-input-icons card-input-edit-button fa fa-pencil"></i>\n\n                    {{#if view.isUpdatingPassword}}\n                        <div class="card-input card-password-input">\n                            {{input-password id="hapyak-salesforce-input-password1"\n                                label=""\n                                placeholder="Enter password"\n                                value=view.password1\n                                validator=view\n                                skip=true}}\n                        </div>\n                        <div class="card-input card-match-input">\n                            {{input-match id="hapyak-salesforce-input-password2"\n                                label=""\n                                placeholder="Re-enter password"\n                                failure="Passwords do not match"\n                                type="password"\n                                target=view.password1\n                                value=view.password2\n                                validator=view}}\n                        </div>\n                    {{/if}}\n                    <div class="card-password-buttons">\n                        {{#view view.SavePassword passwordBinding="view.password"}}\n                            <img src="/css/images/confirm-change-icon.svg" class="card-input-icons confirmChange">\n                        {{/view}}\n                        <img {{action "hidePassword" target="view"}} src="/css/images/cancel-change-icon.svg" class="card-input-icons cancelChange">\n                    </div>\n                </div>\n            </div>\n            <div {{bind-attr class=":card-options-container salesforceIntegrationEnabled:enabled"}}>\n                <div class="card-option">\n                    <div class="row">\n                        <div class="option-title">Sandbox</div>\n                        <div class="option-toggle" {{action toggleSandbox}}>\n                            <div {{bind-attr class=":option-toggle-switch salesforce.sandbox.value:toggle-on salesforce.sandbox.inherited:inherited"}} {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.change.card-salesforce.sandbox"}}></div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="option-description">Is this a sandbox environment?</div>\n                    </div>\n                </div>\n                <div class="card-option">\n                    <div class="row">\n                        <div class="option-title">Integration Type</div>\n                        <div {{bind-attr class=":two-choice-config-toggle-wrapper salesforceTypeCustom:first_choice:second_choice"}}>\n                            <div class="two-choice-config-toggle" {{action "sendInteraction" "configUi" "click" "portal.settings.defaults.card-salesforce.change.integration-type"}}>\n                                <div id="two-choice-config-first" {{action setSalesforceType "custom"}}>Custom Objs</div>\n                                <div id="two-choice-config-second" {{action setSalesforceType "campaign"}}>Campaign</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="materialize card-button-container">\n                <div {{bind-attr class=":reset-btn :loading-button :card-button :circular-loading :btn-flat :left salesforceIntegrationEnabled:enabled"}} {{action resetProperties view.configProperties "serverIntegrationsConfig" target="view"}}>Reset</div>\n                <div {{bind-attr class=":save-btn :loading-button :card-button :btn :circular-loading :right view.saveDisabled:enabled"}} {{action save view.configProperties "serverIntegrationsConfig" target="view"}}>Save</div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_storage.hbs",[],function(){return'\n<div class="storage-used">{{videoStorageSize}}</div>\n<div class="card-title">{{view.cardTitle}}</div>\n<div class="card-options-container">\n    <div class="card-option">\n        <div class="row">\n            <div class="option-description">\n                The amount of storage used in the HapYak cloud. Storage includes all assets uploaded to the platform.\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_user.hbs",[],function(){return'<div class="card-with-inputs">\n\n    <div {{bind-attr class=":card-field"}}>\n        <div class="first-name-field">\n            {{input class="name-fields" placeholder="First" value=first_name}}\n        </div>\n        <div class="last-name-field">\n            {{input class="name-fields" placeholder="Last" value=last_name}}\n        </div>\n    </div>\n\n    <div class="avatars-wrapper">\n        <div class="user-avatar-container">\n            <div class="avatars-background">\n                <img class="avatars user-avatar" src="/css/images/user-placeholder.svg"/>\n            </div>\n        </div>\n    </div>\n\n    <div class="card-field">\n        <div class="card-field-icon-container">\n            <div class="card-field-icon" style="background-image: url(\'/css/images/role-icon.svg\')" ></div>\n        </div>\n        <div class="card-field-content-container">\n            <div class="card-field-content-placeholder has-content">Role</div>\n            <div class="card-field-content">{{role}}</div>\n        </div>\n    </div>\n\n    <div class="card-field">\n        <div class="card-field-icon-container">\n            <div class="card-field-icon" style="background-image: url(\'/css/images/email-icon.svg\')" ></div>\n        </div>\n        <div class="card-field-content-container">\n            <div class="card-field-content-placeholder has-content">Email</div>\n            <div class="card-field-content">{{email}}</div>\n        </div>\n    </div>\n\n    <div class="card-field">\n        <div class="card-field-icon-container">\n            <div class="card-field-icon" style="background-image: url(\'/css/images/username-icon.svg\')" ></div>\n        </div>\n        <div class="card-field-content-container">\n            <div class="card-field-content-placeholder has-content">Username</div>\n            <div class="card-field-content">{{username}}</div>\n        </div>\n    </div>\n\n    <div {{bind-attr class=":card-field :card-password-field view.isUpdatingPassword:editing"}}>\n        <div class="card-field-icon-container">\n            <div class="card-field-icon" style="background-image: url(\'/css/images/password-icon.svg\')" ></div>\n        </div>\n        <div class="card-field-content-container">\n            <div {{bind-attr class=":card-field-content-placeholder view.isUpdatingPassword:has-content"}}></div>\n            <div class="password-permanent-placeholder">Password</div>\n            <div class="confirm-password-permanent-placeholder">Confirm Password</div>\n        </div>\n        <div class="card-btn card-change-password">\n            <a {{bind-attr href="changePasswordUrl"}} {{action "warnPasswordChange"}}>Change Password</a>\n        </div>\n    </div>\n\n    <div {{bind-attr class=":card-field :card-google-field accountAssociations.google:account-loaded"}}>\n        <div class="card-field-icon-container">\n            <div class="card-field-icon" style="background-image: url(\'/css/images/google-account-icon.svg\')" ></div>\n        </div>\n        {{#if accountAssociations.isLoaded}}\n            {{#if accountAssociations.google}}\n                <div class="card-field-content-container">\n                    <div class="card-field-content">\n                        {{accountAssociations.google.properties.email}}\n                    </div>\n                </div>\n\n                <div class="card-btn disconnect-google-btn">\n                    <a {{action "disconnectAssociation" "google"}}>Disconnect</a>\n                </div>\n                {{#if accountAssociations.google.service_token_expired}}\n                    <div class="card-btn update-token-google-btn">\n                        <a {{bind-attr href="connectGoogleUrl"}} {{action "sendInteraction" "configUi" "click" "portal.settings.card-user.connect-google-account"}}>Update Token</a>\n                    </div>\n                {{/if}}\n            {{else}}\n                <div class="card-btn connect-google-btn">\n                    <a {{bind-attr href="connectGoogleUrl"}}>Connect Google Account</a>\n                </div>\n            {{/if}}\n        {{/if}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_wistia.hbs",[],function(){return'<script type="text/template" id="circle-loading">\n    <svg width="120px" height="120px">\n        <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n        <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n        <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n        <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n        <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n    </svg>\n<\/script>\n<div id="hapyak-wistia-card">\n    <div class="card-with-inputs">\n        <div class="card-title">{{view.cardTitle}}</div>\n        <div class="card-options-container">\n            <div class="card-option">\n                <div class="row">\n                    <div class="option-title">Enabled</div>\n                    <div class="option-toggle" {{action toggleWistiaIntegrationEnabled}}>\n                      <div {{bind-attr class=":option-toggle-switch wistiaIntegrationEnabled:toggle-on"}} {{action "sendInteraction" "configUi" "click" "portal.settings.integrations.card-wistia.change"}}></div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="option-description">{{view.cardDescription}}</div>\n                </div>\n            </div>\n        </div>\n        <div {{bind-attr class=":card-input-fields wistiaIntegrationEnabled:enabled"}}>\n\n            <div {{bind-attr class=":card-field-wrapper wistiaIntegrationEnabled:enabled"}}>\n                {{portal-text-input inputType="text" settingValue=wistia.token.value settingId="wistiaToken"settingLabel="Token" savePath="wistia.token" }}\n            </div>\n            <div class="materialize card-button-container">\n                <div {{bind-attr class=":reset-btn :loading-button :card-button :btn-flat :circular-loading :left wistiaIntegrationEnabled:enabled"}} {{action resetProperties view.configProperties "clientIntegrationsConfig" target="view"}}>Reset</div>\n                <div {{bind-attr class=":save-btn :loading-button :card-button :btn :circular-loading :right wistiaIntegrationEnabled:enabled view.saveDisabled:disabled"}} {{action save view.configProperties "clientIntegrationsConfig" target="view"}}>Save</div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/card_workflows.hbs",[],function(){return'<script type="text/template" id="circle-loading">\n    <svg width="120px" height="120px">\n        <circle r="50" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <circle r="30" cx="60" cy="60" fill="none" stroke="rgba(255, 255, 255, 0.3)"></circle>\n        <path class="outer-path" stroke="#fff" d="M 60 60 m 0 -50 a 50 50 0 1 1 0 100 a 50 50 0 1 1 0 -100"></path>\n        <path class="inner-path" stroke="#fff" d="M 60 60 m 0 -30 a 30 30 0 1 1 0 60 a 30 30 0 1 1 0 -60"></path>\n        <path class="success-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 16 36  L 45 65 L 55 75 L 75 45"></path>\n        <path class="error-path" stroke="#fff" d="M 60 10 A 50 50 0 0 0 25 95 L 75 45"></path>\n        <path class="error-path2" stroke="#fff" d="M 60 30 A 30 30 0 0 1 81 81 L 45 45"></path>\n    </svg>\n<\/script>\n<div class="card-title">{{view.cardTitle}}</div>\n<div class="card-options-container">\n    <div class="card-option">\n        <div class="option-title">Access Security Watermark</div>\n        <div class="card-field-wrapper">\n            {{upload-component application=controllers.application folder="watermarks" value=workflows.watermark.value accept="image/png, image/bmp" s3Format=true}}\n        </div>\n        <div class="card-field">\n            <div class="option-description">Must be an Amazon S3 protocol url. Must be .png or .tga. For best results use a 16x9 image. If none is provided a default watermark will be applied.</div>\n        </div>\n    </div>\n</div>\n<div class="materialize card-button-container">\n    <div class="reset-btn loading-button circular-loading card-button btn-flat left" {{action resetProperties view.configProperties "hapyakHostingConfig" target="view"}}>Reset</div>\n    <div {{bind-attr class=":save-btn :loading-button :circular-loading :card-button :btn :right view.saveDisabled:disabled"}} {{action save view.configProperties "hapyakHostingConfig" target="view"}}>Save</div>\n</div>\n'}),define("vendor/text!portal/templates/card_support.hbs",[],function(){return'<div class="card-with-inputs">\n    <div class="card-title">{{view.cardTitle}}</div>\n    <div class="card-options-container">\n        <div class="card-option">\n            <div class="row">\n                <div class="option-description">\n                    {{view.cardDescription}}\n                </div>\n            </div>\n        </div>\n        <div class="card-field no-bottom-border">\n            <div class="card-btn btn update-payment-btn ">\n                <a {{bind-attr href="view.btnLink"}}>\n                    {{view.btnText}}\n                </a>\n            </div>\n        </div>\n\n        {{#if provisioning.api.annotation}}\n            <div class="card-field no-bottom-border">\n                <div class="card-btn btn update-payment-btn ">\n                    <a href="//www.hapyak.com/docs">\n                        Docs\n                    </a>\n                </div>\n            </div>\n        {{/if}}\n\n        <div class="card-field no-bottom-border">\n            <div class="card-btn btn update-payment-btn ">\n                <a {{bind-attr href=view.linkTo}} target="_blank">\n                    {{view.contactCTA}}\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/subscribe_to_automated_report_modal.hbs",[],function(){return'<div class="row">\n    {{view.description}}\n</div>\n<div class="row no-bottom">\n    {{input id="subscribed-email-input" value=view.subscribedEmails}}\n</div>\n'}),define("vendor/text!portal/templates/embed_whitelist_modal.hbs",[],function(){return'<div class="row">\n    {{view.description}}\n</div>\n<div class="row no-bottom">\n    {{input id="whitelist-domain-input" value=view.whitelistedDomains}}\n</div>\n'}),define("vendor/text!portal/templates/report_modal.hbs",[],function(){return'<div class="row">\n    <div {{bind-attr class=":date-row view.customMessage:hide view.inprocess:disabled"}}>\n        <div class="col-sm-7">\n            <div class="modal-text text-right date-text">\n                Select Date Range:\n            </div>\n        </div>\n        <div class="col-sm-5">\n            <div class="text-right">\n                <div id="hapyak-reports-filter-daterange">\n                    <div class="row">\n                        <div class="col-sm-2">\n                            <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>&nbsp;\n                        </div>\n                        <div class="col-sm-10">\n                            <span>{{view.start}} - {{view.end}}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n{{#unless view.success}}\n    <div class="row">\n        <div {{bind-attr class=":main-message view.pickerEnabled:enlarged"}}>\n            {{#unless view.polling}}\n                <div {{bind-attr class=":custom-msg-lrg view.pickerEnabled:disabled"}}>\n                    <div class="row">\n                        {{#if view.customMessage}}\n                            <div class="row">\n                                <div class="alert alert-danger modal-text-smaller" role="alert">\n                                    <strong class="alert-box">{{view.strongText}}</strong>{{view.customMessage}}\n                                </div>\n                                <a class="btn btn-primary-large" {{action "restartReport" target="view"}}>Retry</a>\n                            </div>\n                        {{/if}}\n                        {{#unless view.customMessage}}\n                            <div class="btn btn-primary-large" {{action "retrieveReport" target="view"}}>\n                                Get Report\n                            </div>\n                        {{/unless}}\n                    </div>\n                </div>\n            {{/unless}}\n            {{#if view.polling}}\n                <div class="row">\n                    <div class="modal-text">\n                        Your report is being prepared. Please wait.\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="materialize preload-container">\n                        {{preloader-component}}\n                    </div>\n                </div>\n            {{/if}}\n        </div>\n    </div>\n{{/unless}}\n{{#if view.success}}\n    <div class="row main-message">\n        <div class="col-sm-5">\n            <img class="csv-custom-icon" src="/img/csv-icon.svg"/ {{action "downloadCsv" target="view"}}>\n        </div>\n        <div class="col-sm-7">\n            <div class="row modal-success-text">\n                Your report is ready!\n            </div>\n            <div class="row modal-success-text-secondary">\n                Click the icon or the button below to download your report\n            </div>\n            <div class="row">\n                <div class="col-sm-12">\n                    <button class="btn btn-primary" {{action "downloadCsv" target="view"}}>\n                        Download\n                    </button>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-sm-12">\n                    <button class="btn btn-default" {{action "reset" target="view"}}>\n                        Create New\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n{{/if}}'}),define("vendor/text!portal/templates/config_modal.hbs",[],function(){return'{{#tab-control active="common"}}\n    {{#if provisioning.integrations.salesforce}}\n        <ul class="nav nav-tabs nav-justified">\n            {{#view view.TabSelect name="common"}}\n                Common\n            {{/view}}\n            {{#view view.TabSelect name="salesforce"}}\n                Salesforce\n            {{/view}}\n        </ul>\n    {{/if}}\n\n    <div class="form-horizontal">\n        <div class="tab-content">\n            {{#view view.TabContainer name="common"}}\n                {{view view.parentView.parentView.CommonView}}\n            {{/view}}\n\n            {{#if provisioning.integrations.salesforce}}\n                {{#view view.TabContainer name="salesforce"}}\n                    {{view view.parentView.parentView.SalesforceView}}\n                {{/view}}\n            {{/if}}\n        </div>\n    </div>\n{{/tab-control}}\n'}),define("vendor/text!portal/templates/config_modal_experience.hbs",[],function(){return'<div class="settings-group">\n    <div class="settings-group-header">\n        <h2>Experience</h2>\n    </div>\n    {{#unless controllers.application.lti_context}}\n        {{#unless view.liveEvent}}\n            <div class="settings-content no-bottom">\n                <div class="form-group row">\n                    <label class="col-sm-4 setting-label">Auto Progress</label>\n                    <div class="col-sm-8">\n                        <div class="switch pull-right">\n                            <label>\n                                Off\n                                {{input type="checkbox" checked=view.autoProgress}}\n                                <span class="lever" ></span>\n                                On\n                            </label>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        {{/unless}}\n    {{/unless}}\n\n    {{#unless view.liveEvent}}\n        <div class="settings-content no-bottom">\n            <div class="form-group row">\n                    <label class="col-sm-4 setting-label">Auto Play</label>\n                <div class="col-sm-8">\n                    <div class="switch pull-right">\n                        <label>\n                            Off\n                            {{input type="checkbox" checked=view.autoplay}}\n                            <span class="lever" ></span>\n                            On\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </div>\n    {{/unless}}\n\n    {{#if view.showSlider}}\n        <div class="settings-content no-bottom">\n            <div class="form-group row">\n                <label class="col-sm-4 setting-label">Default Zoom</label>\n                <div class="col-sm-1">\n                    <div class="slider-value pull-right">\n                        {{view.positionVal}}\n                    </div>\n                </div>\n                <div class="col-sm-7">\n                    <div class="range-field slider">\n                        {{input targetObject=view type="range" value=view.position min="20" max="80" step="1"}}\n                    </div>\n                </div>\n            </div>\n        </div>\n    {{/if}}\n\n    <div class="settings-content no-bottom">\n        {{#if view.customCssEnabled}}\n            <div class="form-group">\n                {{upload-component placeholder="Upload or Paste in CSS URL" application=controllers.application folder="uploaded_experience_css" settingLabel="Custom CSS (URL)" value=view.customExperienceCss  accept="text/css"}}\n            </div>\n        {{/if}}\n        {{#unless controllers.application.lti_context}}\n            <div class="form-group">\n                {{portal-text-input inputType="text" settingValue=view.tagsStr settingId="tagsStr" settingLabel="Tags"}}\n            </div>\n        {{/unless}}\n    </div>\n</div>\n\n\n<div class="settings-group">\n    <div class="settings-group-header">\n        <h2>Social Sharing</h2>\n    </div>\n    <div class="settings-content no-bottom">\n        <div class="form-group row">\n            <div id="social-share-options">\n                {{#each option in view.socialMediaOptions}}\n                <div class="social-media" {{action "setActive" option.name target="view"}}>\n                    {{input type="checkbox" checked=option.active id=option.name}}\n                    <label class="option-name" >\n                        {{option.capName}}\n                    </label>\n                </div>\n                {{/each}}\n            </div>\n        </div>\n    </div>\n    <div class="settings-content no-bottom">\n        <div class="form-group">\n            {{portal-text-input inputType="text" settingValue=view.socialShareMsg settingId="socialShareMsg" settingLabel="Message" maxLength="140"}}\n        </div>\n    </div>\n</div>\n\n{{#if provisioning.experiences.branding}}\n    <div class="settings-group">\n        <div class="settings-group-header">\n            <h2>Branding</h2>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{portal-text-input inputType="text" settingValue=view.branding_header settingId="brandingHeader" settingLabel="Landing Page Header <HTML/>"}}\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{portal-text-input inputType="text" settingValue=view.branding_footer settingId="brandingFooter" settingLabel="Landing Page Footer <HTML/>"}}\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{upload-component placeholder="Upload or Paste in Image URL" application=controllers.application folder="branding" settingLabel="Background Image" value=view.branding_background accept="image/*"}}\n            </div>\n        </div>\n    </div>\n{{/if}}\n\n{{#if provisioning.experiences.access_gate}}\n    <div class="settings-group">\n        <div class="settings-group-header">\n            <h2>Access Gate</h2>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group row">\n                <label class="col-sm-4 setting-label">Use Default</label>\n                <div class="col-sm-8">\n                    <div class="switch pull-right">\n                        <label>\n                            Off\n                            {{input type="checkbox" checked=view.useDefaultAccessGate}}\n                            <span class="lever" ></span>\n                            On\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </div>\n        {{#unless view.useDefaultAccessGate}}\n        <div class="settings-content no-bottom" id="access-gate-form">\n            <div class="form-group">\n                {{portal-text-input inputType="url" inputClass="validate" settingValue=view.reg_redirect_url settingId="registrationUrl" settingLabel="Redirect URL"}}\n            </div>\n        </div>\n        {{/unless}}\n    </div>\n{{/if}}\n\n{{#if view.showGrading}}\n    <div class="settings-group">\n        <div class="settings-group-header">\n            <h2>Scoring</h2>\n        </div>\n\n        <div class="settings-content no-bottom">\n            <div class="form-group alert alert-info">Changing the grading algorithm after any students have submitted results is <strong>not</strong> recommended.</div>\n            <div class="form-group row">\n                <div class="col-sm-4">\n                    <label for="selected-algorithm" class="portal-text-input-label">Select Grading Algorithm</label>\n                </div>\n                <div class="col-sm-8">\n                    {{view Ember.Select contentBinding="view.algorithmsList" optionLabelPath="content.name" optionValuePath="content.id" valueBinding="view.gradingAlgorithm" selection="view.gradingAlgorithm"}}\n                </div>\n            </div>\n            {{#if view.isGateUntilWatchedAlgorithm}}\n                <div class="form-group row">\n                    <div class="row">\n                        <div class="col-sm-12 settings-description">\n                            Student will receive 100% for watching at least the Completion Percent Threshold and cannot submit their grade before they have watched this amount. Use this algorithm along with assignment settings in your LMS to gate a student\'s progress until after watching this video lesson.\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    {{portal-text-input inputType="number" min="0" max="100" settingValue=view.completionPercent settingId="completionPercent" settingLabel="Completion Percent Threshold"}}\n                    <div class="settings-description">Percentage of video (0 - 100) a student must watch to complete the assignment.</div>\n                </div>\n            {{/if}}\n            {{#if view.isPercentWatchedAlgorithm}}\n                <div class="form-group row">\n                    <div class="row">\n                        <div class="col-sm-4">\n                            <label class="setting-label">Pass/Fail Grading</label>\n                        </div>\n                        <div class="col-sm-8">\n                            <div class="switch pull-right">\n                                <label>\n                                    Off\n                                    {{input type="checkbox" checked=view.passFail}}\n                                    <span class="lever" ></span>\n                                    On\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="col-sm-12 settings-description">\n                            {{#if view.passFail}}\n                                Student will receive 100% for watching at least the Completion Percent Threshold and 0% for anything less.\n                            {{/if}}\n                            {{#unless view.passFail}}\n                                Student will receive a percentage grade ranging from 0-100% for any amount of video watched.\n                            {{/unless}}\n                        </div>\n                    </div>\n                </div>\n                {{#if view.passFail}}\n                    <div class="form-group row">\n                        {{portal-text-input inputType="number" min="0" max="100" settingValue=view.completionPercent settingId="completionPercent" settingLabel="Completion Percent Threshold"}}\n                        <div class="settings-description">Percentage of video (0 - 100) a student must watch to receive a grade of 100%. The student will not receive any extra credit for watching more than the specified percentage.</div>\n                    </div>\n                {{/if}}\n            {{/if}}\n        </div>\n    </div>\n{{/if}}\n\n{{#if view.liveEvent}}\n    <div class="settings-group">\n        <div class="settings-group-header">\n            <h2>Live</h2>\n        </div>\n        {{#if view.streamTechs}}\n            <div class="settings-content no-bottom materialize">\n                <div class="form-group">\n                    <div class="row">\n                        <div class="col s6">\n                            {{view Ember.Select id="hapyak-experience-config-modal-live-stream-tech" classNames="form-control" contentBinding="view.streamTechs" valueBinding="view.liveEventProperties.streamTech" optionValuePath="content" optionLabelPath="content"}}\n                        </div>\n                        <div class="col s6">\n                            {{#if view.showLiveEventDelay}}\n                                {{portal-text-input inputType="number" settingValue=view.liveEventProperties.slideDelay settingId="slideDelay" settingLabel="Delay" min=0}}\n                            {{/if}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        {{/if}}\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{portal-text-input inputType="text" settingValue=view.liveEventProperties.beforeEventMessage settingId="beforeEventMessage" settingLabel="Pre Event Message" maxLength="250"}}\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{portal-text-input inputType="text" settingValue=view.liveEventProperties.afterEventMessage settingId="afterEventMessage" settingLabel="Post Event Message" maxLength="250"}}\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{input type="date" value=view.liveEventProperties.eventDate}}\n                {{#if view.liveEventProperties.eventDate}}\n                    {{input type="time" value=view.liveEventProperties.eventTime}}\n                {{/if}}\n            </div>\n        </div>\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/modal_link_generator.hbs",[],function(){return'<div class="modal-body-content">\n    <div class="settings-group">\n        <div class="settings-group-header">\n            <h2>Link to Slidesync</h2>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                <div class="static-text">\n                    {{view.viewerUrl}}\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="settings-group">\n        <div class="settings-group-header">\n            <h2>Create Custom Link with Parameters</h2>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                <div class="row">\n                    <div class="col-sm-5">\n                        <label for="selected-project" class="portal-text-input-label">Select Initial Video</label>\n                    </div>\n                    <div class="col-sm-7">\n                        <select {{action "updateCurrentVideoSelection" "selected-project" on="change" target="view"}} {{action "generatedUrl" on="focus-out" target="view"}} id="selected-project">\n                            {{#each video in view.projectList}}\n                                <option {{bind-attr value=video.id}} {{bind-attr selected="video.selected"}}>{{video.title}}</option>\n                            {{/each}}\n                        </select>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{portal-text-input inputType="number" settingValue=view.startTime settingId="startTime" settingLabel="Initial Video Start Time" focus-out=view.generateUrl}}\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{portal-text-input inputType="text" settingValue=view.modalTitle settingId="modalTitle" settingLabel="Modal Title" focus-out=view.generateUrl}}\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{portal-text-input inputType="text" settingValue=view.preExperienceModalText settingId="preExperienceModalText" settingLabel="Modal Body Text" focus-out=view.generateUrl}}\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{portal-text-input inputType="text" settingValue=view.downloadAssetUrl settingId="downloadAssetUrl" settingLabel="Featured Asset URL" focus-out=view.generateUrl}}\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{portal-text-input inputType="text" settingValue=view.downloadText settingId="downloadText" settingLabel="Featured Asset Text" focus-out=view.generateUrl}}\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{portal-text-input inputType="text" settingValue=view.modalConfirm settingId="modalConfirm" settingLabel="Close Button Text" focus-out=view.generateUrl}}\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                {{portal-text-input inputType="text" settingValue=view.trackingId settingId="trackingId" settingLabel="Tracking ID" focus-out=view.generateUrl}}\n            </div>\n        </div>\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                <div class="button-group">\n                    <a class="primary-btn" target="_blank" {{bind-attr href="view.generatedUrl"}}>\n                        Preview\n                    </a>\n                    <div class="primary-btn" id="copy-generated-url-img">\n                        <i class="copy fa fa-clipboard" data-copytarget="#generated-input" aria-hidden="true"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="settings-content no-bottom">\n            <div class="form-group">\n                <div class="static-text generated">\n                    {{textarea value=view.generatedUrl id="generated-input"}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/confirm_modal.hbs",[],function(){return'{{#if view.message}}\n    <p>{{view.message}}</p>\n{{else}}\n    <p></p>\n{{/if}}\n\n{{#if view.link}}\n    <div class="materialize">\n        <div class="center-align">\n            <a {{bind-attr href="view.link"}} class="btn btn-large waves-effect" target="_blank">DOWNLOAD</a>\n        </div>\n    </div>\n{{/if}}'}),define("vendor/text!portal/templates/new_project_modal.hbs",[],function(){return'{{#if showChooseWorkflowSection}}\n    <div class="materialize">\n        <div class="row icon-button-container no-bottom">\n            {{#each workflow in availableWorkflows}}\n                <div class="col s6 icon-button-wrapper">\n                    <div class="icon-button" {{action "chooseWorkflow" workflow}}>\n                        {{#if workflow.icon}}\n                            <img {{bind-attr src=workflow.icon}}>\n                        {{/if}}\n                        <div {{bind-attr class=":icon-button-name workflow.icon::center-vertically"}}>{{workflow.display_name}}</div>\n                        {{#if workflow.description}}\n                            <div class="icon-button-description">{{workflow.description}}</div>\n                        {{/if}}\n                    </div>\n                </div>\n            {{/each}}\n        </div>\n    </div>\n{{else}}\n    {{#tab-control active=activeTab customWidth="533"}}\n        <div {{bind-attr class=":materialize :row hideTabs:hide"}}>\n            <div class="col s12">\n                <ul class="tabs">\n                    {{#if tabs.sample}}\n                        {{#view view.TabSelect name="sample" className="active" id="sampleTab" href="#tab0"}}\n                            <div>SAMPLE VIDEO</div>\n                        {{/view}}\n                    {{/if}}\n                    {{#if tabs.url}}\n                        {{#view view.TabSelect name="url" className="active" href="#tab1"}}\n                            <div>URL OR EMBED CODE</div>\n                        {{/view}}\n                    {{/if}}\n                    {{#if tabs.upload}}\n                        {{#view view.TabSelect name="upload" href="#tab2"}}\n                            <div>UPLOAD</div>\n                        {{/view}}\n                    {{/if}}\n                    {{#if tabs.browseMedia}}\n                        {{#view view.TabSelect name="browse" href="#tab3"}}\n                            <div>BROWSE MEDIA</div>\n                        {{/view}}\n                    {{/if}}\n                    {{#if tabs.chooseExisting}}\n                        {{#view view.TabSelect name="chooseExisting" href="#tab3"}}\n                            <div>CHOOSE EXISTING</div>\n                        {{/view}}\n                    {{/if}}\n                </ul>\n            </div>\n        </div>\n\n        {{#unless hideTitle}}\n            <div class="section-header">Title</div>\n            {{#view ProjectTitleView}}\n                {{boxed-input inputType="text" value=projectTitle settingId="projectTitle" settingLabel="Project Title" placeholder="Name your Project"}}\n            {{/view}}\n        {{/unless}}\n\n        <div class="tab-content">\n            {{#if tabs.sample}}\n                {{#view view.TabContainer name="sample"}}\n                    <div class="section-header">Preview</div>\n\n                    <iframe\n                            id="hapyak-player-157199-8825"\n                            marginwidth="0"\n                            marginheight="0"\n                            frameborder="no"\n                            scrolling="no"\n                            allowfullscreen=""\n                            webkitallowfullscreen=""\n                            mozallowfullscreen=""\n                        {{bind-attr src="sampleProjectSrc"}}\n                            width="548"\n                            height="353"\n                            class="hapyak-embed hapyak-responsive"\n                    ></iframe>\n                {{/view}}\n            {{/if}}\n\n            {{#if tabs.url}}\n                {{#view view.TabContainer name="url"}}\n                    <div class="section-header">Embed Code Or URL</div>\n\n                    {{#view InputView}}\n                        {{textarea id="hapyak-new-modal-input" cols="80" rows="10"\n                                   valueBinding="input"}}\n                    {{/view}}\n\n                    {{#if embedTypesDetected}}\n                        <p>Support detected for: {{embedTypesDetected}}</p>\n                    {{/if}}\n\n                    {{#if isSmallEmbed}}\n                        <div class="panel panel-warning">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Width too small</h3>\n                            </div>\n                            <div class="panel-body">\n                                <p>\n                                    The video embed code you have provided specifies a small size, which may make elements\n                                    difficult for users to interact with. We strongly recommend using an embed code that\n                                    specifies a width of 600 pixels or greater.\n                                </p>\n                                <p>\n                                    For assistance, please contact\n                                    <a href="mailto:info@hapyak.com?subject=New project embed size issue" target="_new">\n                                        HapYak Support\n                                    </a>\n                                </p>\n                            </div>\n                        </div>\n                    {{/if}}\n\n                    {{#if isOverridden}}\n                        <div class="panel panel-warning">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Potential player mismatch</h3>\n                            </div>\n                            <div class="panel-body">\n                                <p>You have selected a player type that might be incompatible with your video source.</p>\n                                <p>Please check your inputs an try again.</p>\n                            </div>\n                        </div>\n                    {{/if}}\n\n                    {{#if isUnsupported}}\n                        <div class="panel panel-warning">\n                            <div class="panel-heading">\n                                <h3 class="panel-title">Unrecognized video source</h3>\n                            </div>\n                            <div class="panel-body">\n                                <p>We were unable to match your video source to a supported player type.</p>\n                                <p>Please check your inputs an try again.</p>\n                            </div>\n                        </div>\n                    {{/if}}\n\n                    {{#view EmbedTypeView}}\n                        <div class="no-bottom row">\n                            <label class="control-label col-xs-2" for="hapyak-new-modal-embed-type">\n                                <div class="text-left">Embed type</div>\n                            </label>\n                            <div class="col-xs-10">\n                                {{view Ember.Select id="hapyak-new-modal-embed-type" classNames="form-control"\n                                       contentBinding="embedTypes" optionValuePath="content.embedType" optionLabelPath="content.embedName"\n                                       valueBinding="embedType" prompt="(auto-detect)"}}\n                            </div>\n                        </div>\n                    {{/view}}\n                {{/view}}\n            {{/if}}\n\n            {{#if tabs.upload}}\n                {{#view view.TabContainer name="upload"}}\n                    <div class="section-header">Upload</div>\n                    {{view VideoUploadView workflow=chosenWorkflow allowSafestreamApproval=true addingToExperience=addingToExperience}}\n                {{/view}}\n            {{/if}}\n\n            {{#if tabs.browseMedia}}\n                {{#view view.TabContainer name="browse"}}\n                    <div class="section-header">Choose From Your Library</div>\n                    {{view AccountMediaView}}\n                {{/view}}\n            {{/if}}\n\n            {{#if tabs.chooseExisting}}\n                {{#view view.TabContainer name="chooseExisting"}}\n                    <div class="section-header">Choose An Existing Project</div>\n                    {{view ChooseExistingProjectView}}\n                {{/view}}\n            {{/if}}\n\n            {{#if showIs360VideoCheckbox}}\n                <div class="row no-bottom top-margin">\n                    {{input type="checkbox" class="filled-in" id="hapyak-new-modal-is-360-video" checked=is360Video disabled=embedTypeIs360}}\n                    <label for="hapyak-new-modal-is-360-video">This is a "360 Video" (Only check this if you are sure you know what it means)</label>\n                </div>\n            {{/if}}\n\n            {{#if chosenWorkflow.icon}}\n                <div class="row using-service-message">\n                    Using {{chosenWorkflow.display_name}} Workflow <img class="using-service-message-image" {{bind-attr src=chosenWorkflow.icon}}>\n                </div>\n            {{/if}}\n        </div>\n    {{/tab-control}}\n{{/if}}\n'}),define("vendor/text!portal/templates/studio.hbs",[],function(){return'<div class="materialize">\n    {{studio-home application=application}}\n</div>\n'}),define("vendor/text!portal/templates/index.hbs",[],function(){return'<div class="row hapyak-heading">\n    <div class="col-sm-3 new-of-type-button">\n        {{#each tab in tabs}}\n            {{#if tab.active}}\n                <button {{action "open" tab.modal}} class="btn btn-primary">New {{tab.upper}}</button>\n            {{/if}}\n        {{/each}}\n    </div>\n    <div class="col-sm-6 tab-row-container">\n        <div class="btn-group tab-row" data-toggle="buttons-radio">\n            {{#each tab in tabs}}\n                <button {{bind-attr class=":btn :btn-default tab.plural: tab.active:active"}} {{action \'transition\' tab.lower}}>{{tab.upper}}s</button>\n            {{/each}}\n        </div>\n    </div>\n    {{#unless view.isPlaylistView}}\n        <div id="hy-search" class="col-sm-3"><i class="material-icons">search</i><input id="hy-search-input"></div>\n        {{#if view.tagFilter}}\n            <div class="col-sm-3 pull-right">\n                <div>Filter:</div>\n                {{#each tag in tags}}\n                    <span class="materialize">\n                        <span class="chip filter" {{action \'removeTag\' tag}}>{{tag}}<i class="material-icons">close</i></span>\n                    </span>\n                {{/each}}\n            </div>\n        {{/if}}\n    {{/unless}}\n</div>\n\n{{yield}}\n'}),define("vendor/text!portal/templates/project/index.hbs",[],function(){return'\n<div class="row hapyak-page-index-projects">\n    <div class="col-sm-12">\n        {{data-table\n            ajax=view.ajax\n            didInit=view.didInit\n            location="portalIndex"\n            columns=view.columns\n            dom="<\'dataTables_actions\'>rtlp"\n            initComplete=view.initComplete\n            language=view.language\n            order=view.order\n            pagingType="full_numbers"\n            searchCols=view.searchCols\n            target=view.controller}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/experience/index.hbs",[],function(){return'{{#if application.provisioning.experiences.enabled}}\n    <div class="row hapyak-page-index-projects">\n        <div class="col-sm-12">\n            {{data-table\n                    ajax=view.ajax\n                    didInit=view.didInit\n                    location="portalIndex"\n                    columns=view.columns\n                    dom="<\'dataTables_actions\'>rtlp"\n                    initComplete=view.initComplete\n                    language=view.language\n                    order=view.order\n                    pagingType="full_numbers"\n                    searchCols=view.searchCols\n                    target=view.controller}}\n        </div>\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/template/index.hbs",[],function(){return'\n<div class="row hapyak-page-index-projects">\n    <div class="col-sm-12">\n        {{data-table\n            ajax=view.ajax\n            didInit=view.didInit\n            location="portalIndex"\n            columns=view.columns\n            dom="<\'dataTables_actions\'>rtlp"\n            initComplete=view.initComplete\n            language=view.language\n            order=view.order\n            pagingType="full_numbers"\n            searchCols=view.searchCols\n            target=view.controller}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/playlist/index.hbs",[],function(){return""}),define("vendor/text!portal/templates/missing_404.hbs",[],function(){return'\n<div class="missing-page">\n    <div class="missing-header">404</div>\n    <div class="missing-description">Page not found</div>\n</div>\n'}),define("vendor/text!portal/templates/new_experience_modal.hbs",[],function(){return'\n<div class="modal-body-content">\n    {{#if editingMeta}}\n        {{boxed-input inputType="text" value=experienceTitle settingId="experienceTitle" settingLabel="Experience Title"}}\n        {{#if prefillMsg}}\n            <div class="prefill-msg">\n                {{prefillMsg}}\n            </div>\n        {{/if}}\n\n        <div class="materialize">\n            {{#unless hideOthers}}\n                <div class="section-header">Choose an Experience:</div>\n                <div class="collection layout-types-wrapper">\n                    {{#each layout in availableLayouts}}\n                        <div  {{bind-attr class=":collection-item :layout-type layout.chosen:active"}} {{action \'chooseLayoutType\' layout}}>\n                            <i class="material-icons secondary-content">{{layout.icon}}</i>\n                            <span class="title">{{layout.name}}</span>\n                            <div class="description">{{layout.description}}</div>\n                        </div>\n                    {{/each}}\n                </div>\n            {{/unless}}\n\n            <div {{bind-attr class=":templates chosenLayout.multipleTemplates:show"}}>\n                <div class="section-header">Choose a Layout:</div>\n                <div class="collection layout-types-wrapper">\n                    {{#each template in chosenLayout.templates}}\n                        <div  {{bind-attr class=":collection-item :template-type template.chosen:active"}} {{action \'chooseTemplateType\' template}}>\n                            <i class="material-icons secondary-content">{{template.icon}}</i>\n                            <span class="title">{{template.name}}</span>\n                        </div>\n                    {{/each}}\n                </div>\n            </div>\n        </div>\n    {{/if}}\n    {{#unless editingMeta}}\n        <div class="border-group materialize">\n            <i class="material-icons edit-icon" {{action "editMeta"}}>mode_edit</i>\n\n            <div class="item-pair">\n                <div class="key">EXPERIENCE NAME</div>\n                <div class="value">{{experienceTitle}}</div>\n            </div>\n            <div class="item-pair">\n                <div class="key">EXPERIENCE TYPE</div>\n                <div class="value">{{chosenLayout.name}}</div>\n            </div>\n            <div class="item-pair">\n                <div class="key">EXPERIENCE LAYOUT</div>\n                <div class="value">{{chosenTemplate.name}}</div>\n            </div>\n        </div>\n        <div class="border-group materialize">\n            <div class="item-pair">\n                <div class="key">PROJECT(S)</div>\n            </div>\n            {{#each project in addedProjects}}\n                <div class="projectWrapper">\n                    <div class="projectIcon"><img class="project-icon" src="/img/project-icon.svg" alt="project icon" /></div>\n                    <div class="projectTitle">{{project.title}}</div>\n                    <div class="removeProject" {{action "removeProject" project}}><i class="fa fa-times" aria-hidden="true"></i></div>\n                </div>\n            {{/each}}\n            {{#unless singleVideo}}\n                <div class="add-more-button-container">\n                    <a class="add-more-button center-align waves-effect waves-light btn-flat"  {{action "openAddProjectModal"}}>ADD MORE</a>\n                </div>\n            {{/unless}}\n        </div>\n    {{/unless}}\n    {{#if addingVideo}}\n        <div {{bind-attr class=":new-modal-row :choose-project projectChosen:filled"}}>\n            {{#tab-control active="upload"}}\n                <ul class="nav nav-tabs nav-justified hapyak-tabs">\n                    {{#view view.TabSelect name="url"}}\n                        URL or EMBED CODE\n                    {{/view}}\n                    {{#view view.TabSelect name="upload"}}\n                        UPLOAD VIDEO\n                    {{/view}}\n                    {{#view view.TabSelect name="chooseExisting"}}\n                        CHOOSE EXISTING\n                    {{/view}}\n                </ul>\n\n                <div class="tab-content">\n                    {{#view view.TabContainer name="upload"}}\n                        {{view view.parentView.parentView.VideoUploadView}}\n                    {{/view}}\n                    {{#view view.TabContainer name="chooseExisting"}}\n                        {{view view.parentView.parentView.ChooseExistingProjectView}}\n                    {{/view}}\n                </div>\n            {{/tab-control}}\n        </div>\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/experience/edit_slidesync.hbs",[],function(){return'\n<div class="experience-layout show-layout">\n    <div class="row">\n        <div id="slider-addon">\n            {{view view.SliderView}}\n        </div>\n    </div>\n\n    <div class="row">\n        <div class="col-md-6 col-sm-12">\n            <div id="project-title">\n                <a {{bind-attr href="projectLink"}}>\n                    {{currentProjectTitle}}\n                </a>\n            </div>\n        </div>\n        <div class="col-md-6 col-sm-12">\n            <div class="asset-title slidesync">\n                <div class="experience-asset show-asset">\n                    {{view.assetTitle}}\n                </div>\n            </div>\n        </div>\n    </div>\n    <div id="sizing-container">\n        <div id="sizing-container-left-side" class="sizing-container-left-side hapyak-editor">\n            <div class="experience-asset show-asset">\n                {{view view.EditorPlaylistView id="hapyak-editor-iframe" class="inactive"}}\n            </div>\n\n            <div class="row" class="show-asset">\n                {{view view.PlaylistAddonView id="hy-playlist-container"}}\n            </div>\n        </div>\n        <div id="sizing-container-right-side" class="experience-asset show-asset sizing-container-right-side slidesync-addon">\n            {{#if view.editorReady}}\n                {{#if view.annotationsReady}}\n                    {{view view.SlidesyncViewerView}}\n                {{/if}}\n\n                {{#if view.everythingReady}}\n                    {{#if view.slidesyncViewer}}\n                        {{view view.SlidesyncEditorView viewer=view.slidesyncViewer editor=view.editorIframe}}\n                    {{/if}}\n                {{/if}}\n            {{/if}}\n        </div>\n    </div>\n\n    {{#if provisioning.annotationList}}\n        {{extended-editor parentController=this currentProject=view.playlist.currentProject editor=view.editorPlaylist.editor}}\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/experience/edit_slidesync_external_chapters.hbs",[],function(){return'\n<div class="experience-layout show-layout">\n    <br>\n\n    <div id="slider-addon" class="hidden">\n        {{view view.SliderView}}\n    </div>\n\n    <div class="row">\n        <div class="col-md-6 col-sm-12">\n            <div id="project-title">\n                <a {{bind-attr href="projectLink"}}>\n                    {{currentProjectTitle}}\n                </a>\n            </div>\n        </div>\n        <div class="col-md-6 col-sm-12">\n            <div class="asset-title slidesync">\n                <div class="experience-asset show-asset">\n                    {{view.assetTitle}}\n                </div>\n            </div>\n        </div>\n    </div>\n    <div id="sizing-container">\n        <div id="sizing-container-left-side" class="sizing-container-left-side hapyak-editor">\n            <div class="experience-asset show-asset">\n                {{view view.EditorPlaylistView id="hapyak-editor-iframe" class="inactive"}}\n            </div>\n\n            <div class="row" class="show-asset">\n                {{view view.PlaylistAddonView id="hy-playlist-container"}}\n            </div>\n        </div>\n        <div id="sizing-container-right-side" class="experience-asset show-asset sizing-container-right-side slidesync-addon">\n            {{#if view.editorReady}}\n                {{#if view.annotationsReady}}\n                    {{view view.SlidesyncViewerView}}\n                {{/if}}\n\n                {{#if view.everythingReady}}\n                    {{#if view.slidesyncViewer}}\n                        {{view view.SlidesyncEditorView viewer=view.slidesyncViewer editor=view.editorIframe}}\n                    {{/if}}\n                {{/if}}\n            {{/if}}\n        </div>\n    </div>\n\n    {{#if provisioning.annotationList}}\n        {{extended-editor parentController=this currentProject=view.playlist.currentProject editor=view.editorPlaylist.editor}}\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/experience/edit_slidesync_full_width_playlist.hbs",[],function(){return'\n<div class="experience-layout show-layout">\n    <div class="row">\n        <div id="slider-addon">\n            {{view view.SliderView}}\n        </div>\n    </div>\n\n    <div class="row">\n        <div class="col-md-6 col-sm-12">\n            <div id="project-title">\n                <a {{bind-attr href="projectLink"}}>\n                    {{currentProjectTitle}}\n                </a>\n            </div>\n        </div>\n        <div class="col-md-6 col-sm-12">\n            <div class="asset-title slidesync">\n                <div class="experience-asset show-asset">\n                    {{view.assetTitle}}\n                </div>\n            </div>\n        </div>\n    </div>\n    <div id="sizing-container">\n        <div id="sizing-container-left-side" class="sizing-container-left-side hapyak-editor">\n            <div class="experience-asset show-asset">\n                {{view view.EditorPlaylistView id="hapyak-editor-iframe" class="inactive"}}\n            </div>\n        </div>\n        <div id="sizing-container-right-side" class="experience-asset show-asset sizing-container-right-side slidesync-addon">\n            {{#if view.editorReady}}\n                {{#if view.annotationsReady}}\n                    {{view view.SlidesyncViewerView}}\n                {{/if}}\n\n                {{#if view.everythingReady}}\n                    {{#if view.slidesyncViewer}}\n                        {{view view.SlidesyncEditorView viewer=view.slidesyncViewer editor=view.editorIframe}}\n                    {{/if}}\n                {{/if}}\n            {{/if}}\n        </div>\n    </div>\n\n    <div class="row" class="show-asset">\n        {{view view.PlaylistAddonView id="hy-playlist-container"}}\n    </div>\n\n    {{#if provisioning.annotationList}}\n        {{extended-editor parentController=this currentProject=view.playlist.currentProject editor=view.editorPlaylist.editor}}\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/experience/edit_video_only.hbs",[],function(){return'\n{{#if provisioning.experiences.enabled}}\n    <div class="experience-layout show-layout">\n        <div class="row project-title-container">\n            <div class="col-md-6 col-sm-12">\n                <div id="project-title">\n                    <a {{bind-attr href="projectLink"}}>\n                        {{currentProjectTitle}}\n                    </a>\n                </div>\n            </div>\n        </div>\n\n        <div class="experience-asset show-asset">\n            {{view view.EditorPlaylistView id="hapyak-editor-iframe" class="inactive"}}\n        </div>\n\n        <div class="row" class="show-asset">\n            {{view view.PlaylistAddonView id="hy-playlist-container"}}\n        </div>\n\n        {{#if provisioning.annotationList}}\n            {{extended-editor parentController=this currentProject=view.playlist.currentProject editor=view.editorPlaylist.editor}}\n        {{/if}}\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/experience/edit_lesson.hbs",[],function(){return'<div class="experience-layout show-layout">\n    {{#unless application.lti_context}}\n        <div class="row project-title-container">\n            <div class="col-md-6 col-sm-12">\n                <div id="project-title">\n                    <a {{bind-attr href="projectLink"}}>\n                        {{currentProjectTitle}}\n                    </a>\n                </div>\n            </div>\n        </div>\n    {{/unless}}\n    <div class="experience-asset show-asset lti">\n        {{view view.EditorPlaylistView id="hapyak-editor-iframe" class="inactive"}}\n    </div>\n\n    <div class="row" class="show-asset">\n        {{view view.PlaylistAddonView id="hy-playlist-container"}}\n    </div>\n    \n    {{grading-addon\n        viewerMode=false\n        editorReady=view.editorReady\n        playerReady=view.parentView.playerReady\n        editorIframe=view.parentView.editorIframe\n        layoutId=layout\n        layoutSpecificAddons=layoutSpecificAddons\n        gradingAddonReady=gradingAddonReady\n        openModal=\'open\'\n    }}\n\n    {{#if provisioning.annotationList}}\n        {{extended-editor parentController=this currentProject=view.playlist.currentProject editor=view.editorPlaylist.editor}}\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/experience/edit_live.hbs",[],function(){return'{{#if provisioning.experiences.enabled}}\n    <div class="experience-layout show-layout materialize live-layout">\n        <div id="slider-addon" class="hidden">\n            {{view view.SliderView}}\n        </div>\n\n        {{#if view.eventEnded}}\n            This event has ended. To start a new event, create a new live experience.\n        {{/if}}\n\n        {{#unless view.eventEnded}}\n            <div class="live-event-row">\n                \x3c!-- right col --\x3e\n                <div {{bind-attr class=":live-right-column-fixed view.videoTabActive:video-tab-active"}}>\n                    <div class="start-live-event-dragger">\n                        {{#unless view.eventCanBeStarted}}\n                            <div class="hapyak-drag-switch">\n                                <div class="drag-switch">ADD A STREAM TO START</div>\n                            </div>\n                        {{/unless}}\n                        {{#if view.eventCanBeStarted}}\n                            {{#unless view.eventStarted}}\n                                {{drag-switch property=view.eventStarted text="DRAG TO START EVENT" rightCallback=view.startEvent enabled=true}}\n                            {{/unless}}\n                            {{#if view.eventStarted}}\n                                <button class="waves-effect waves-light btn-large right red lighten-1" {{action "endEvent" target=view}}>END EVENT</button>\n                            {{/if}}\n                        {{/if}}\n                    </div>\n\n                    <div class="active-content on_page">\n                        <div class="infobox-header">\n                            <h3>\n                                <span class="left">PAGE CONTENT</span>\n                                {{#if view.activeContent}}\n                                    <button class="waves-effect waves-light btn red darken-4 right" {{action "sendSlide" -1 target=view}}>REMOVE</button>\n                                {{/if}}\n                            </h3>\n                        </div>\n                        <div {{bind-attr class=":infobox-body view.activeContent:active"}} id="slidePreview">\n                            {{#unless view.currentSlide.isUrl}}\n                                <img {{bind-attr src=view.currentSlide.url}} style="width:100%"/>\n                            {{/unless}}\n                            {{#if view.currentSlide.isUrl}}\n                                <div>Showing page at: <a {{bind-attr href="view.currentSlide.url"}} target="_blank">{{view.currentSlide.url}}</a></div>\n                            {{/if}}\n                            {{#unless view.activeContent}}\n                                <div>NO ACTIVE CONTENT</div>\n                            {{/unless}}\n                        </div>\n                        <div class="disabled-screen"></div>\n                    </div>\n\n                    <div class="active-content on_video">\n                        <div class="infobox-header">\n                            <h3>\n                                <span class="left">VIDEO CONTENT</span>\n                            </h3>\n                        </div>\n                        <div id="on-video-content-editor">\n                            {{#each slot in view.videoSlots}}\n                                <div {{bind-attr class=":on-video-content slot.active:active"}}>\n                                    <div class="content" {{action "selectSlot" slot target="view"}}>\n                                        {{#unless slot.content.isUrl}}\n                                            {{#unless slot.content.isText}}\n                                                {{#if slot.content.url}}\n                                                    <img height="93" {{bind-attr src="slot.content.url"}} {{action "updateImages" target=view.parentView.parentView}}>\n                                                {{/if}}\n                                            {{/unless}}\n                                        {{/unless}}\n                                        {{#if slot.content.isUrl}}\n                                            <a {{bind-attr href="slot.content.url"}} target="_blank">{{slot.content.url}}</a>\n                                        {{/if}}\n                                        {{#if slot.content.isText}}\n                                            <span>{{slot.content.url}}</span>\n                                        {{/if}}\n                                    </div>\n                                    {{#if slot.content}}\n                                        {{#if slot.content.url}}\n                                            <i class="material-icons clear-slot" {{action "clearSlot" slot target="view"}}>clear</i>\n                                        {{/if}}\n                                    {{/if}}\n                                </div>\n                            {{/each}}\n                        </div>\n                        <div class="disabled-screen"></div>\n                    </div>\n                </div>\n                \x3c!-- end right col --\x3e\n\n                \x3c!-- left col --\x3e\n                {{#tab-control active=view.activeTab class="live-left-column-responsive"}}\n                    <div {{bind-attr class=":form-group :alert :alert-info view.parentView.helpMessageContent::hide-alert"}}>\n                        <i class="material-icons">info</i> {{view.parentView.helpMessageContent}}\n                    </div>\n                    \n                    <div class="row">\n                        <ul class="tabs col l12 live-tabs">\n                            {{#view view.TabSelect name="on_page" href="#tab1"}}ON PAGE{{/view}}\n                            {{#view view.TabSelect name="on_video" href="#tab2"}}ON VIDEO{{/view}}\n                        </ul>\n                    </div>\n\n                    <div class="tab-content">\n                        {{#view view.TabContainer name="on_page"}}\n                            {{#if view.parentView.parentView.slidesEmberArray}}\n                                <div class="row quick-jump-buttons no-bottom">\n                                    <div class="col s3">\n                                        <button class="waves-effect waves-light btn-large primary-color left" {{action "jumpToSlide" \'-1\' target=view.parentView.parentView}}>PREV</button>\n                                    </div>\n                                    <div class="col s3 offset-s6">\n                                        <button class="waves-effect waves-light btn-large primary-color right" {{action "jumpToSlide" \'1\' target=view.parentView.parentView}}>NEXT</button>\n                                    </div>\n                                </div>\n\n                                <div class="slide-container">\n                                    <ul class="slideList">\n                                        {{#each slide in view.parentView.parentView.slidesEmberArray}}\n                                            <li {{bind-attr class=":slide-item :row slide.active:active"}}>\n                                                <div class="col s1 slide-item-reorganize">\n                                                    <i class="material-icons arrow arrow-up" {{action "moveSlide" "slides" _view.contentIndex -1 target=view.parentView.parentView}}>arrow_upward</i>\n                                                    <i class="material-icons arrow arrow-down" {{action "moveSlide" "slides" _view.contentIndex 1 target=view.parentView.parentView}}>arrow_downward</i>\n                                                </div>\n                                                <div class="col s3 slide-item-left">\n                                                    {{#unless slide.isUrl}}\n                                                        <img {{bind-attr src="slide.url"}} alt="Image not available yet. Click to refresh." {{action "updateImages" target=view.parentView.parentView}}>\n                                                    {{/unless}}\n                                                    {{#if slide.isUrl}}\n                                                        <div class="slide-item-left-url">\n                                                            <a {{bind-attr href="slide.url"}} target="_blank">{{slide.url}}</a>\n                                                        </div>\n                                                    {{/if}}\n                                                </div>\n                                                <div class="col s8 slide-item-right">\n                                                    <div class="buttons">\n                                                        <button {{action "deleteSlide" _view.contentIndex "slides" target=view.parentView.parentView}} class="waves-effect waves-light btn-large modal-trigger red">DELETE</button>\n                                                        <button {{action "openInputModal" _view.contentIndex "slides" target=view.parentView.parentView}} class="waves-effect waves-light btn-large btn-flat modal-trigger">Replace</button>\n                                                        <button {{action "sendSlide" _view.contentIndex target=view.parentView.parentView}} class="waves-effect waves-light btn-large primary-color"><i class="material-icons right">send</i>PUSH</button>\n                                                    </div>\n                                                </div>\n                                            </li>\n                                        {{/each}}\n                                    </ul>\n                                </div>\n                            {{/if}}\n\n                            <div class="live-event-add-new-content">\n                                <div class="row buttons">\n                                    {{#if view.parentView.parentView.assetUploadProvisioned}}\n                                        {{#if view.parentView.parentView.loading}}\n                                            <div class="row center">\n                                                {{loading-spinner}}\n                                            </div>\n                                        {{/if}}\n                                        <button {{action "openAddPdfModal" target=view.parentView.parentView}} class="waves-effect waves-light btn-large pdf"><i class="material-icons">picture_as_pdf</i>ADD PDF</button>\n                                        <button {{action "openAddImageModal" null "slides" target=view.parentView.parentView}} class="waves-effect waves-light btn-large image"><i class="material-icons">panorama</i>ADD IMAGE</button>\n                                    {{/if}}\n                                    <button {{action "openAddIframeModal" null "slides" target=view.parentView.parentView}} class="waves-effect waves-light btn-large iframe"><i class="material-icons">web</i>ADD IFRAME</button>\n                                </div>\n                            </div>\n                        {{/view}}\n                        {{#view view.TabContainer name="on_video"}}\n                            {{#if view.parentView.parentView.onVideoContentEmberArray}}\n                                <div class="slide-container">\n                                    <ul class="slideList">\n                                        {{#each content in view.parentView.parentView.onVideoContentEmberArray}}\n                                            <li class="slide-item row">\n                                                <div class="col s1 slide-item-reorganize">\n                                                    <i class="material-icons arrow arrow-up" {{action "moveSlide" "onVideoContent" _view.contentIndex -1 target=view.parentView.parentView}}>arrow_upward</i>\n                                                    <i class="material-icons arrow arrow-down" {{action "moveSlide" "onVideoContent" _view.contentIndex 1 target=view.parentView.parentView}}>arrow_downward</i>\n                                                </div>\n                                                <div class="col s5 slide-item-left">\n                                                    {{#unless content.isUrl}}\n                                                        {{#unless content.isText}}\n                                                            <img height="150" {{bind-attr src="content.url"}} alt="Image not available yet. Click to refresh." {{action "updateImages" target=view.parentView.parentView}}>\n                                                        {{/unless}}\n                                                    {{/unless}}\n                                                    {{#if content.isUrl}}\n                                                        <div class="slide-item-left-url">\n                                                            <a {{bind-attr href="content.url"}} target="_blank">{{content.url}}</a>\n                                                        </div>\n                                                    {{/if}}\n                                                    {{#if content.isText}}\n                                                        <div class="slide-item-left-url">\n                                                            {{content.url}}\n                                                        </div>\n                                                    {{/if}}\n                                                </div>\n                                                <div class="col s6 slide-item-right">\n                                                    <div class="buttons">\n                                                        <button {{action "deleteSlide" _view.contentIndex "onVideoContent" target=view.parentView.parentView}} class="waves-effect waves-light btn-large modal-trigger red">DELETE</button>\n                                                        <button {{action "openInputModal" _view.contentIndex "onVideoContent" target=view.parentView.parentView}} class="waves-effect waves-light btn-large btn-flat modal-trigger">Replace</button>\n                                                        <button {{action "sendVideoContent" _view.contentIndex target=view.parentView.parentView}} class="waves-effect waves-light btn-large primary-color"><i class="material-icons right">send</i>PUSH</button>\n                                                    </div>\n                                                </div>\n                                            </li>\n                                        {{/each}}\n                                    </ul>\n                                </div>\n                            {{/if}}\n\n                            <div class="live-event-add-new-content">\n                                <div class="row buttons">\n                                    {{#if view.parentView.parentView.assetUploadProvisioned}}\n                                        <button {{action "openAddTextModal" null "onVideoContent" target=view.parentView.parentView}} class="waves-effect waves-light btn-large text"><i class="material-icons">text_fields</i>ADD TEXT</button>\n                                        <button {{action "openAddImageModal" null "onVideoContent" target=view.parentView.parentView}} class="waves-effect waves-light btn-large image"><i class="material-icons">panorama</i>ADD IMAGE</button>\n                                    {{/if}}\n                                    <button {{action "openAddIframeModal" null "onVideoContent" target=view.parentView.parentView}} class="waves-effect waves-light btn-large iframe"><i class="material-icons">web</i>ADD IFRAME</button>\n                                </div>\n                            </div>\n                        {{/view}}\n                    </div>\n                {{/tab-control}}\n                \x3c!-- end left col --\x3e\n            </div>\n        {{/unless}}\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/experience/edit_branching.hbs",[],function(){return'{{#if provisioning.experiences.enabled}}\n    <div class="experience-layout show-layout">\n        <div class="row project-title-container">\n            <div class="col-md-6 col-sm-12">\n                <div id="project-title">\n                    <a {{bind-attr href="projectLink"}}>\n                        {{currentProjectTitle}}\n                    </a>\n                </div>\n            </div>\n        </div>\n\n        <div class="experience-asset show-asset">\n            {{view view.EditorPlaylistView id="hapyak-editor-iframe" class="inactive"}}\n        </div>\n\n        <div class="row" class="show-asset">\n            {{view view.PlaylistAddonView id="hy-playlist-container"}}\n        </div>\n\n        {{#if provisioning.annotationList}}\n            {{extended-editor parentController=this currentProject=view.playlist.currentProject editor=view.editorPlaylist.editor}}\n        {{/if}}\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/experience/edit_single_video_landing_page.hbs",[],function(){return'{{#if provisioning.experiences.enabled}}\n    <div class="experience-layout show-layout">\n        <div class="row project-title-container">\n            <div class="col-md-6 col-sm-12">\n                <div id="project-title">\n                    <a {{bind-attr href="projectLink"}}>\n                        {{currentProjectTitle}}\n                    </a>\n                </div>\n            </div>\n        </div>\n\n        <div class="experience-asset show-asset">\n            {{view view.EditorPlaylistView id="hapyak-editor-iframe" class="inactive"}}\n        </div>\n\n        <div id="hapyak-experience-playlist-container" class="hidePlaylist">\n            {{view view.PlaylistAddonView id="hy-playlist-container"}}\n        </div>\n\n        {{#if provisioning.annotationList}}\n            {{extended-editor parentController=this currentProject=view.playlist.currentProject editor=view.editorPlaylist.editor}}\n        {{/if}}\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/experience/edit_review.hbs",[],function(){return'{{#if provisioning.experiences.enabled}}\n    <div class="experience-layout show-layout">\n        <div class="row project-title-container">\n            <div class="col-md-6 col-sm-12">\n                <div id="project-title">\n                    <a {{bind-attr href="projectLink"}}>\n                        {{currentProjectTitle}}\n                    </a>\n                </div>\n            </div>\n        </div>\n\n        <div class="experience-asset show-asset">\n            {{view view.EditorPlaylistView id="hapyak-editor-iframe" class="inactive"}}\n        </div>\n\n        <div id="hapyak-experience-playlist-container" class="hidePlaylist">\n            {{view view.PlaylistAddonView id="hy-playlist-container"}}\n        </div>\n\n        {{#if provisioning.annotationList}}\n            {{extended-editor parentController=this currentProject=view.playlist.currentProject editor=view.editorPlaylist.editor}}\n        {{/if}}\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/addons/slidesync_editor.hbs",[],function(){return'\n{{#unless view.assetLoaded}}\n    <div id="no-asset-loaded">\n        {{#unless view.currentlyUploading}}\n            <div id="asset-upload-message">\n                {{#if view.assetUploadProvisioned}}\n                    <div class="pdflogo"></div>\n                    <div class="big-text">Drag & Drop</div>\n                    <div class="small-text">or click here to upload a pdf.</div>\n                {{else}}\n                    <div class="small-text">Asset upload disabled.</div>\n                {{/if}}\n            </div>\n        {{/unless}}\n        {{#if view.assetUploadProvisioned}}\n            {{view view.AssetUploadView}}\n        {{/if}}\n    </div>\n{{/unless}}\n\n{{#if view.assetLoaded}}\n    <div id="slidesync-addon-toolbar">\n        <div class="slidesync-addon-toolbar-inner">\n            <div id="sync-button-container" {{bind-attr class="view.synced:synced"}} {{action "sync" target=view}}>\n                <div class="ss-icon hapyak-ss-stopwatch inline">&#x23F1;</div>\n                {{#if view.synced}}\n                    <div class=\'sync-button\'>Synced</div>\n                    <div id="sync-time" class="inline"> @ {{view.syncTime}}</div>\n                {{else}}\n                    <div class=\'sync-button\'>Sync</div>\n                {{/if}}\n            </div>\n\n            <div {{bind-attr class=":start-time-controls view.synced:synced"}}>\n                <i class="fa fa-caret-left" {{action "updateStartTime" "subtract" target=view}}></i>\n\n                {{input id="slide-start-time" class="inline" value=view.slideStartTime enter="updateStartTime" focus-out="updateStartTime" targetObject=view}}\n\n                <i class="fa fa-caret-right" {{action "updateStartTime" "add" target=view}}></i>\n            </div>\n\n            <div id="divider"></div>\n\n            <div class="browsing-controls">\n                <i class="fa fa-caret-left" {{action "previous" target=view}}></i>\n\n                {{input id="page-number" class="inline" value=view.currentPage enter="goTo" focus-out="goTo" targetObject=view}}\n\n                <div class="inline divider"> / </div>\n\n                <div id="total-slides" class="inline">{{view.numPages}}</div>\n\n                <i class="fa fa-caret-right" {{action "next" target=view}}></i>\n            </div>\n\n            <label id="gear-icon" for="fileupload">\n                <i class="fa fa-cog"></i>\n            </label>\n            {{view view.AssetUploadView}}\n        </div>\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/addons/playlist_addon.hbs",[],function(){return'<div id="new-playlist-item" class="materialize add-video-btn">\n    <a class="waves-effect waves-light btn" {{action "openNewPlaylistProjectModal" target="view"}}>ADD PROJECT</a>\n</div>\n\n<div id="hy-playlist">\n    <div id="prev-page" {{action "changePlaylistPage" -1 target="view"}}{{bind-attr class="view.firstPage:hide"}}>\n        <div class="arrow-shape">\n            <i class="material-icons" alt="Next Page Arrow">navigate_before</i>\n            {{drop-zone type="changePlaylistPage" direction="-1"}}\n        </div>\n    </div>\n    <div id="hy-playlist-item-container">\n        <div id="hy-playlist-sized-container">\n            <div id="hy-playlist-limit-container">\n                <div id="hy-playlist-items-outer">\n                    <div id="hy-playlist-items">\n                        {{#each project in view.projects}}{{!-- comments necessary to prevent spaces from entering DOM\n                         --}}{{drop-zone playlistWidth=view.playlistWidth index=_view.contentIndex}}{{!--\n                         --}}{{view.currentProjectId}}<div class="list-playlist-item">{{!--\n                         --}}{{draggable-playlist-item project=project index=_view.contentIndex currentProjectId=currentProjectId}}{{!--\n                         --}}<p class="hy-playlist-item-name">{{project.title}}</p></div>{{!--\n                     --}}{{/each}}{{!--\n                     --}}{{drop-zone playlistWidth=view.playlistWidth index=view.projects.length}}{{!--\n                --}}</div>\n                </div>\n            </div>\n            <div id="page-select-container" class="page-nav-container" {{bind-attr class=":page-nav-container view.hasOnePage:inactive"}}>\n                {{#each page in view.pages}}\n                    <div {{bind-attr class=":page page.active:active"}} {{action "goToPlaylistPage" _view.contentIndex target="view"}}></div>\n                {{/each}}\n            </div>\n        </div>\n    </div>\n    <div id="next-page" {{action "changePlaylistPage" 1 target="view"}}{{bind-attr class="view.lastPage:hide"}}>\n        <div class="arrow-shape">\n            <i class="material-icons" alt="Next Page Arrow">navigate_next</i>\n            {{drop-zone type="changePlaylistPage" direction="1"}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/new_template_modal.hbs",[],function(){return'\n<div class="form-group">\n    <div class="form-horizontal row">\n        <label class="control-label col-xs-2" for="hapyak-new-template-modal-title">\n            <div class="text-left">Title</div>\n        </label>\n        <div class="col-xs-10">\n            {{input id="hapyak-new-template-modal-title" classNames="form-control"\n                    valueBinding="view.projectTitle"}}\n        </div>\n    </div>\n    <div class="form-horizontal row">\n        <div class="col-xs-12">\n            <div class="panel panel-info">\n                <div class="panel-heading">\n                    <h3 class="panel-title">{{view.helpTitle}}</h3>\n                </div>\n                <div class="panel-body">\n                    {{{view.helpBody}}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/new_playlist_modal.hbs",[],function(){return'{{#if provisioning.integrations.salesforce}}\r\n<div class="form-group row">\r\n    <div class="col-sm-12">\r\n        <label class="control-label">\r\n            <div class="text-left">Playlist name</div>\r\n        </label>\r\n    </div>\r\n    <div class="col-sm-12">\r\n        {{input id="hapyak-playlist-name-input" classNames="form-control"\r\n                valueBinding="view.playlistName"}}\r\n    </div>\r\n    <div class="col-sm-12">\r\n        <label class="control-label">\r\n            <div class="text-left">Salesforce</div>\r\n        </label>\r\n    </div>\r\n    <div class="col-sm-12">\r\n        <div class="btn-group" data-toggle="buttons-radio">\r\n            {{#view view.SalesforceEnabledView}}Enabled{{/view}}\r\n            {{#view view.SalesforceDisabledView}}Disabled{{/view}}\r\n        </div>\r\n    </div>\r\n</div>\r\n{{/if}}\r\n<div class="form-group">\r\n    <div class="form-horizontal row">\r\n        <div class="col-xs-12">\r\n            <label class="control-label">\r\n                <div class="text-left">Playlist embed code</div>\r\n            </label>\r\n        </div>\r\n        <div class="col-xs-12">\r\n            {{textarea id="hapyak-new-playlist-input" cols="80" rows="10" classNames="form-control"\r\n                    valueBinding="input"}}\r\n        </div>\r\n    </div>\r\n    <div class="form-horizontal row">\r\n        <div class="col-xs-12">\r\n            <label class="control-label">\r\n                <div class="text-left">Output</div>\r\n            </label>\r\n        </div>\r\n        <div class="col-xs-12">\r\n            {{textarea id="hapyak-generated-playlist-input" cols="80" rows="10" classNames="form-control"\r\n                    valueBinding="view.generatedInput"}}\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("vendor/text!portal/templates/pagination.hbs",[],function(){return'{{#if view.hasPages}}\n    {{#view view.PreviousView}}\n        {{#view view.LinkView}}&laquo;{{/view}}\n    {{/view}}\n\n    {{#each page in view.pages}}\n        {{#view view.ItemView pageBinding="page"}}{{view view.LinkView pageBinding="page"}}{{/view}}\n    {{/each}}\n\n    {{#view view.NextView}}\n        {{#view view.LinkView}}&raquo;{{/view}}\n    {{/view}}\n{{/if}}\n'}),define("vendor/text!portal/templates/profile.hbs",[],function(){return'<div class="settings-subsection row">\n    {{view "card_user"}}\n</div>\n'}),define("vendor/text!portal/templates/project.hbs",[],function(){return"{{outlet}}\n"}),define("vendor/text!portal/templates/reports.hbs",[],function(){return'<div id="hapyak-reports" class="row materialize full-width">\n    <div class="no-margin align-report side-report">\n        {{#if icon}}\n            <i class="material-icons hapyak-reports-background">{{icon}}</i>\n        {{/if}}\n        <div {{bind-attr class=":report-main view.isIndexRoute:inactive"}}>\n            <div class="row no-bottom">\n                <div id="hapyak-reports-filter" class="row">\n                    <div class="col-sm-12 hapyak-reports-filter-container">\n                        {{#if drilldownRoute}}\n                            <div class="form-inline drilldown">\n                                {{#link-to drilldownRoute (query-params record=false username=false)}}\n                                    <div id="drilldown-back" class="material-icons" alt="Previous Page Arrow">arrow_back</div>\n                                {{/link-to}}\n\n                                {{#if isQuestionReport}}\n                                    <div id="drilldown-user">Project: {{drilldown.trackTitle}}</div>\n                                {{else}}\n                                    <div id="drilldown-user">\n                                        User:&nbsp;\n                                        {{#if username}}\n                                            {{username}} ({{userId}})\n                                        {{else}}\n                                            ({{userId}}) <div class="label label-default">anonymous</div>\n                                        {{/if}}\n                                    </div>\n                                {{/if}}\n                            </div>\n                        {{else}}\n                            <div {{bind-attr class=":form-inline reportRunning:disabled showFilters:expanded"}}>\n                                {{#if showRunButton}}\n                                    <button class="btn run-report waves-effect waves-light run pulse" {{action "getSummaryData"}}>Run</button>\n                                {{/if}}\n                                <label>\n                                    Select Date Range:\n                                </label>\n                                <label for="hapyak-reports-filter-daterange">\n                                    <span class="glyphicon glyphicon-calendar"></span>\n                                </label>\n                                <input id="hapyak-reports-filter-daterange" type="text" class="form-control" />\n                                {{#if isCustomReport}}\n                                    <label class="hapyak-report-filter-label" for="hapyak-report-filter">Reports:</label>\n\n                                    {{view Ember.Select id="hapyak-report-filter"\n                                        contentBinding="availableReports"\n                                        optionLabelPath="content.title"\n                                        optionValuePath="content.endpoint"\n                                        valueBinding="endpoint"\n                                        prompt="Select Report"\n                                        classNames="form-control custom-report-select"}}\n\n                                    <button {{bind-attr class=":btn :run-report :waves-effect :waves-light :run runBtnDisabled:disabled:pulse"}} {{action "runCustomReport"}}>Run</button>\n                                {{else}}\n                                    {{#if isCoreReport}}\n                                        <label class="hapyak-report-filter-label" for="hapyak-report-filter">Reports:</label>\n                                        {{view Ember.Select id="hapyak-report-filter"\n                                            contentBinding="coreReports"\n                                            optionLabelPath="content.title"\n                                            optionValuePath="content.endpoint"\n                                            valueBinding="endpoint"\n                                            prompt="Select Core Report"\n                                            classNames="form-control core-report-select"}}\n                                        <button {{bind-attr class=":btn :run-report :waves-effect :waves-light :run runBtnDisabled:disabled:pulse"}} {{action "runCoreReport"}}>Run</button>\n                                        {{#if showReportFilters}}\n                                            <span {{bind-attr class=":filters runBtnDisabled:hide"}} {{action toggleFilters}}><i class="material-icons filter-icon">{{filterIcon}}</i>Advanced</span>\n                                        {{/if}}\n                                        {{#if showFilters}}\n                                            {{#if showProjectFilter}}\n                                                {{multi-select-input\n                                                        id="project"\n                                                        filterTitle="Project"\n                                                        inputArray=projectFilters\n                                                        placeholder="Enter Project ID(s) comma seperated"\n                                                        filterMessage=""\n                                                        type="text"}}\n                                            {{/if}}\n                                            {{#if showExperienceFilter }}\n                                                {{multi-select-input\n                                                        id="experience"\n                                                        filterTitle="Experience"\n                                                        inputArray=experienceFilters\n                                                        placeholder="Enter Experience ID(s) comma seperated"\n                                                        filterMessage=""\n                                                        type="text"}}\n                                            {{/if}}\n                                        {{/if}}\n                                    {{/if}}\n                                {{/if}}\n                                <div {{bind-attr class=":project-filter isGradebookReport:active isCoreReport:hide"}}>\n                                    <select id="hapyak-project-filter" class="form-control question-report-select browser-default" />\n                                    </select>\n                                </div>\n                            </div>\n                        {{/if}}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div {{bind-attr class=":row :error-msg :no-bottom hasMoreData:active"}}>\n            <div class="alert alert-info" role="alert">\n                <div class="main-msg msg">\n                    Showing Limited Results\n                </div>\n                <div {{bind-attr class=":secondary-msg :msg sentDataEmailRequest:sent sentComplete:complete"}} class="secondary-msg msg">\n                    {{#unless sentDataEmailRequest}}\n                        Too much data to display. <div class="msg msg-link" {{action sendDataEmailRequest}}> Click here </div> to have the entire data set emailed to you.\n                    {{else}}\n                        Request Recieved.  Email should arrive within a few hours.\n                    {{/unless}}\n                </div>\n            </div>\n        </div>\n        <div class="row position-relative">\n            {{outlet}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/sizing_modal.hbs",[],function(){return'<p>\n    Sometimes, the width and height values communicated by video players or service APIs are wrong.\n    The tools below will allow you to correct these errors manually.\n</p>\n\n<p>Click on <strong>16:9</strong> or <strong>4:3</strong>, then hit <strong>Apply</strong> to see if it corrects the issue. You may also adjust the aspect ratio by modifying your embed dimensions.</p>\n\n<p>If you need additional help, please contact <a href="mailto:info@hapyak.com" target="_new">HapYak Support</a>.</p>\n\n<hr />\n\n{{#with project}}\n    <div class="form-horizontal">\n\n        <div class="form-group row">\n            <label for="hapyak-sizing-modal-ratio" class="col-sm-4 control-label">Aspect Ratio</label>\n            <div class="col-sm-3">\n                <button class="btn btn-info btn-small btn-block" {{action "setAspect" "1.7777" target="view"}}>16:9 <small>Widescreen</small></button>\n            </div>\n            <div class="col-sm-3">\n                <button class="btn btn-info btn-small btn-block" {{action "setAspect" "1.3333" target="view"}}>4:3 <small>Standard</small></button>\n            </div>\n            <div class="col-sm-2">\n                <p class="form-control-static text-right">{{view.aspectRatio}}</p>\n            </div>\n        </div>\n\n        <div class="form-group row">\n            <div class="col-sm-4"></div>\n            <div class="col-sm-3">\n                <button id="hapyak-sizing-auto-detect" class="btn btn-info btn-small btn-block" {{action "setAspect" target="view"}} {{bind-attr disabled="view.cannotAutoDetect"}}>Auto-detect</button>\n            </div>\n        </div>\n\n        <div class="form-group row">\n            <label for="hapyak-sizing-modal-dimensions" class="col-sm-4 control-label">Embed Dimensions</label>\n            <div class="col-sm-8 form-inline hapyak-sizing-modal-dimensions">\n                {{input id="hapyak-sizing-modal-dimensions" type="text" value=view.width classNames="form-control"}}<div class="hapyak-sizing-modal-dimensions-by">&times;</div>{{input type="text" value=view.height classNames="form-control"}}\n            </div>\n        </div>\n\n        <div class="form-group row">\n            <div class="col-sm-8 col-sm-offset-4">\n                <button {{action "apply" target="view"}} class="btn btn-primary">Apply</button>\n            </div>\n        </div>\n    </div>\n{{/with}}\n'}),define("vendor/text!portal/templates/template_modal.hbs",[],function(){return'<div class="row">\n    <div class="col-xs-12">\n        <div class="well">\n            {{#if view.templateNames.length}}\n                {{#each view.templateNames}}\n                    {{#view view.TemplateIdView content=this}}\n                        <button type="button" class="btn btn-default disabled">{{view.content.id}}  {{view.content.title}}</button>\n                        {{#view view.RemoveView}}<span class="glyphicon glyphicon-remove"></span>{{/view}}\n                    {{/view}}\n                {{/each}}\n            {{else}}\n                <p>Select a template for this project below</p>\n            {{/if}}\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        {{data-table\n            ajax=view.ajax\n            columns=view.columns\n            dom="rtp"\n            initComplete=view.initComplete\n            language=view.language\n            order=view.order\n            pageLength=5\n            pagingType="full_numbers"\n            searchCols=view.searchCols\n            target=view}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/users_modal.hbs",[],function(){return'<table class="table table-striped table-hover">\n    <thead>\n        <th class="hapyak-member-username">Username</th>\n        <th class="hapyak-member-firstname">First name</th>\n        <th class="hapyak-member-lastname">Last name</th>\n        <th class="hapyak-member-role">Role</th>\n        <th class="hapyak-member-created">Added</th>\n        <th class="hapyak-member-actions">&nbsp;</th>\n    </thead>\n    <tbody>\n    {{#if groupMembers.isLoaded}}\n        {{#each member in groupMembers}}\n            {{#view view.GroupMemberRowView contentBinding="this"}}\n                {{#with view.content}}\n                    <td class="hapyak-member-username">{{member.user.username}}{{dev-view tagName="span" contentBinding="this"}}</td>\n                    <td class="hapyak-member-firstname">{{member.user.first_name}}</td>\n                    <td class="hapyak-member-lastname">{{member.user.last_name}}</td>\n                    <td class="hapyak-member-role">\n                        {{#if controller.currentUser.isAdmin}}\n                            {{view Ember.Select\n                                   contentBinding="view.parentView.availableRoles"\n                                   optionLabelPath="content.role"\n                                   optionValuePath="content.role"\n                                   valueBinding="member.role"\n                                   value=member.role}}\n\n                        {{else}}\n                            {{member.role}}\n                        {{/if}}\n                        <div class="preloader-wrapper small">\n                            <div class="spinner-layer spinner-green-only">\n                                <div class="circle-clipper left">\n                                    <div class="circle"></div>\n                                </div>\n                                <div class="gap-patch">\n                                    <div class="circle"></div>\n                                </div>\n                                <div class="circle-clipper right">\n                                    <div class="circle"></div>\n                                </div>\n                            </div>\n                        </div>\n                        <i class="large material-icons hide">done</i>\n                    </td>\n                    <td class="hapyak-member-created">{{shortDate member.created}}</td>\n                    <td class="hapyak-member-actions">{{#if controller.currentUser.isAdmin}}<span {{action "deactivate" member target="view"}} class="glyphicon glyphicon-trash"></span>{{else}}&nbsp;{{/if}}</td>\n                {{/with}}\n            {{/view}}\n        {{/each}}\n    {{else}}\n        <tr><td colspan="5">{{loading-spinner}}</td></tr>\n    {{/if}}\n    </tbody>\n    <tfoot>\n        <td colspan="6" class="table-records-found">{{pluralize groupMembers.total single="member"}} found</td>\n    </tfoot>\n</table>\n\n<div class="text-center">\n    {{view view.PaginationView contentBinding="groupMembers"}}\n</div>\n\n<h5>Invites</h5>\n\n{{#view view.InviteView classNames="row invites"}}\n    <div class="col-sm-8">\n        {{input-email id="hapyak-users-modal-invite"\n            label=""\n            placeholder="Organization member email address"\n            value=view.email\n            validator=view}}\n    </div>\n    <div class="col-sm-2">\n        {{view Ember.Select contentBinding="view.parentView.availableRoles" optionLabelPath="content.role" optionValuePath="content.role" valueBinding="view.role"}}\n    </div>\n    <div class="col-sm-2">\n        {{#unless view.isInviting}}\n            <button {{action "invite" target="view"}} class="btn btn-primary" {{bind-attr disabled="view.isDisabled"}}>Invite</button>\n        {{else}}\n            {{loading-spinner style="btn"}}\n        {{/unless}}\n    </div>\n{{/view}}\n\n<table class="table table-striped table-hover">\n    <thead>\n        <th class="hapyak-invite-email">Email</th>\n        <th class="hapyak-invite-created">Invited</th>\n        <th class="hapyak-invite-actions">&nbsp;</th>\n    </thead>\n    <tbody>\n    {{#if invites.isLoaded}}\n        {{#each invites}}\n            {{#view view.GroupInviteRowView contentBinding="this"}}\n                {{#with view.content}}\n                    <td class="hapyak-invite-email">{{properties.email}}{{dev-view tagName="span" contentBinding="this"}}</td>\n                    <td class="hapyak-invite-created">{{shortDate created}}</td>\n                    <td class="hapyak-invite-actions">{{#if controller.currentUser.isAdmin}}<span {{action "uninvite" this target="view"}} class="glyphicon glyphicon-trash"></span>{{else}}&nbsp;{{/if}}</td>\n                {{/with}}\n            {{/view}}\n        {{/each}}\n    {{else}}\n        <tr><td colspan="3">{{loading-spinner}}</td></tr>\n    {{/if}}\n    </tbody>\n    <tfoot>\n        <td colspan="3" class="table-records-found">{{pluralize invites.length single="invite"}} found</td>\n    </tfoot>\n</table>\n\n<div class="text-center">\n    {{view view.PaginationView contentBinding="invites"}}\n</div>\n'}),define("vendor/text!portal/templates/subgroup_list_modal.hbs",[],function(){return'\n{{#view view.DropdownView id="subgroup-list-dropdown"}}\n    <div class="list-group-item active">\n        {{currentGroup.name}}{{dev-view}}\n    </div>\n    {{view view.parentView.SubgroupDatatableView}}\n{{/view}}\n<button class="btn btn-primary sub-group-btn" {{action "open" "subgroupCreationModal" "currentGroup"}}>\n    Create Sub-Group\n</button>\n'}),define("vendor/text!portal/templates/subgroup_creation_modal.hbs",[],function(){return'<div class="modal-body-content">\n    <div {{bind-attr class=":new-modal-row view.filledTitle:filled"}}>\n        <div class="row">\n            <label class="col-xs-2 hapyak-new-modal-label" for="hapyak-new-modal-title">\n                <div>Name</div>\n            </label>\n            <div class="col-xs-10">\n                {{input id="hapyak-new-modal-title" classNames="title-input" value=view.newGroupTitle}}\n            </div>\n            <i class="fa fa-check-circle" aria-hidden="true"></i>\n        </div>\n        <div class="row" id="form-error-container">\n            {{#if view.showError}}\n                Name Required\n            {{/if}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/annotation_edit_modal.hbs",[],function(){return'<div class="modal-body-content">\n    <div>\n        <div class="row text-center">\n            <div {{bind-attr class=":material-icons :content-prev-icon view.type"}}>\n                {{{view.contentIcon}}}\n            </div>\n        </div>\n        <div class="section">\n            <div class="row input-row">\n                <label class="col-xs-2">\n                    <div class="input-label">Content Text</div>\n                </label>\n                <div class="col-xs-10">\n                    {{input id="hapyak-content-input"  classNames="input" value=view.contentPrev disabled=view.disableContentInput}}\n                    {{#if view.disableContentInput}}\n                        <i class="material-icons">not_interested</i>\n                    {{/if}}\n                    {{#if view.multiAnnotationPrev}}\n                        <div class="row multi-preview">\n                            {{#each annotation in view.multiAnnotations}}\n                                <div class="col-xs-4 annotation-preview-container">\n                                    <div class="annotation-preview">\n                                        <div class="row">\n                                            <div {{bind-attr class=":material-icons :content-prev-icon annotation.type"}}>\n                                                {{{annotation.contentIcon}}}\n                                            </div>\n                                        </div>\n                                        <div class="row preview-text">\n                                            {{annotation.contentPrev}}\n                                        </div>\n                                    </div>\n                                </div>\n                            {{/each}}\n                        </div>\n                    {{/if}}\n                </div>\n            </div>\n        </div>\n        {{#if view.multiAnnotations}}\n            <div class="section materialize text-center">\n                <div class="row">\n                    <div class="input-label">Action</div>\n                </div>\n                <div class="action-buttons row">\n                    <div class="col-xs-4">\n                        <input name="group1" data-action="update" type="radio" id="radio-update" checked="checked"/>\n                        <label for="radio-update">Update All</label>\n                    </div>\n                    <div class="col-xs-4">\n                        <input name="group1" data-action="copy" type="radio" id="radio-copy" />\n                        <label for="radio-copy">Copy All</label>\n                    </div>\n                    <div class="col-xs-4">\n                        <input name="group1" data-action="delete" type="radio" id="radio-delete"  />\n                        <label for="radio-delete">Delete All</label>\n                    </div>\n                </div>\n            </div>\n        {{/if}}\n\n        {{#if view.deleteSelected}}\n            <div class="form-group alert alert-warning text-center">\n                {{view.warningMessage}}\n            </div>\n        {{/if}}\n\n        <div id="update-section" {{bind-attr class=":section view.notUpdate:inactive"}}>\n            <div class="row">\n                <div class="col-xs-6">\n                    <div class="row input-row">\n                        <label class="col-xs-6">\n                            <div class="input-label">Start Time</div>\n                        </label>\n                        <div class="col-xs-6">\n                            {{input class="hapyak-time-input" id="hapyak-start-time-input" classNames="input" value=view.startTime disabled=view.disableStartTimeInput}}\n                        </div>\n                    </div>\n                    <div class="row input-row">\n                        <label class="col-xs-6">\n                            <div class="input-label">End Time</div>\n                        </label>\n                        <div class="col-xs-6">\n                            {{input class="hapyak-time-input" id="hapyak-end-time-input" classNames="input" value=view.endTime disabled=view.disableEndTimeInput}}\n                        </div>\n                    </div>\n                </div>\n                {{#if view.timeError}}\n                    <div class="col-xs-6">\n                        <div class="error-container active">{{view.timeError}}</div>\n                    </div>\n                {{/if}}\n            </div>\n            <div class="row section-note">\n                Enter start time in seconds, as a percentage (10%) or in time format HH:MM:SS.MS (hours : minutes : seconds . milliseconds)\n            </div>\n            {{#if view.timeMessage}}\n                <div class="form-group alert alert-danger text-center">\n                    {{view.timeMessage}}\n                </div>\n            {{/if}}\n        </div>\n\n        <div id="update-section" {{bind-attr class=":section view.notUpdate:inactive"}}>\n            <div class="row">\n                <div class="col-xs-6">\n                    <div class="row input-row position-percent-input">\n                        <label class="col-xs-6">\n                            <div class="input-label">Top Position</div>\n                        </label>\n                        <div class="col-xs-6">\n                            {{input type="number" class="hapyak-time-input" id="hapyak-top-position-input" classNames="input" value=view.topPosition disabled=view.disablePositionChange}}\n                            <span class="position-percent-sign">%</span>\n                        </div>\n                    </div>\n                    <div class="row input-row position-percent-input">\n                        <label class="col-xs-6">\n                            <div class="input-label">Left Position</div>\n                        </label>\n                        <div class="col-xs-6">\n                            {{input type="number" class="hapyak-time-input" id="hapyak-left-position-input" classNames="input" value=view.leftPosition disabled=view.disablePositionChange}}\n                            <span class="position-percent-sign">%</span>\n                        </div>\n                    </div>\n                </div>\n                {{#if view.positionError}}\n                    <div class="col-xs-6">\n                        <div class="error-container active">{{view.positionError}}</div>\n                    </div>\n                {{/if}}\n            </div>\n            <div class="row section-note">\n                Enter top and/or left position as percentages.\n            </div>\n            {{#if view.disablePositionChange}}\n                <div class="form-group alert alert-warning text-center">\n                    Position change is not supported for <span class="position-disabled-annotation-type">{{view.warningDisplayType}}</span> annotations.\n                </div>\n            {{/if}}\n            {{#if view.showPositionChangeWarning}}\n                <div class="form-group alert alert-warning text-center">\n                    Position change will only affect Pop, Hotspot, Image, Quiz, custom Iframe annotations.\n                </div>\n            {{/if}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/video_upload.hbs",[],function(){return'{{#if view.ready}}\n    {{#unless view.isUploaded}}\n        <div {{bind-attr class=":drop-zone view.chosenHost::hidden"}}>\n            <input id="fileupload" type="file" name="file" accept="video/mp4" />\n        </div>\n    {{/unless}}\n\n    {{#if view.isFileAdded}}\n        {{#if view.isUploading}}\n            <div class="progress progress-striped active">\n                <div class="progress-bar progress-bar-success" role="progressbar"></div>\n            </div>\n            <button {{action "cancel" target="view"}}>Cancel</button>\n        {{/if}}\n\n        {{#if view.isUploaded}}\n            <div class="alert alert-success">\n                Successfully uploaded {{view.filename}} to {{view.chosenHost.displayName}}\n            </div>\n        {{/if}}\n\n        {{#if view.isCancelled}}\n            <div class="alert alert-warning">\n                Cancelled upload of {{view.filename}}\n            </div>\n        {{/if}}\n\n        {{#if view.isError}}\n            <div class="alert alert-danger">\n                Failed to upload {{view.filename}} to {{view.chosenHost.displayName}}\n            </div>\n        {{/if}}\n    {{/if}}\n\n    {{#if view.chosenHost}}\n        <div class="row using-service-message">\n            Uploading to {{view.chosenHost.displayName}} <img class="using-service-message-image" {{bind-attr src=view.chosenHost.logo}}>\n        </div>\n    {{/if}}\n\n    {{#unless view.chosenHost}}\n        <div class="row icon-button-container">\n            {{#if view.availableHosts}}\n                {{#each host in view.availableHosts}}\n                    <div class="col s6 icon-button-wrapper">\n                        <div class="icon-button" {{action "chooseUploadType" host target=view}}>\n                            {{#if host.logo}}\n                                <img {{bind-attr src=host.logo}}>\n                            {{/if}}\n                            <div class="icon-button-description">{{host.description}}</div>\n                        </div>\n                    </div>\n                {{/each}}\n            {{else}}\n                <div class="panel panel-warning">\n                    <div class="panel-heading">\n                        <h3 class="panel-title">NO UPLOAD HOSTS AVAILABLE</h3>\n                    </div>\n                    <div class="panel-body">\n                        <p>Your group does not have any upload hosts that are allowed to upload in this context.</p>\n                    </div>\n                </div>\n            {{/if}}\n        </div>\n    {{/unless}}\n{{/if}}\n'}),define("vendor/text!portal/templates/offline_modal.hbs",[],function(){return'<div class="modal fade in" style="display: block;">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h4 class="modal-title">Session Expired</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                Your session has expired. Please login again.\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button {{action "login"}} type="button" class="btn btn-primary">Login</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-backdrop fade in"></div>'}),define("vendor/text!portal/templates/lti.hbs",[],function(){return'<div id="hapyak-lti-main">\n    {{outlet}}\n</div>\n'}),define("vendor/text!portal/templates/settings.hbs",[],function(){return'<div id="portal-settings">\n    <div class="col-sm-12">\n        {{outlet}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/settings/style.hbs",[],function(){return'\n{{#if portalActive}}\n    <div class="row" id="secondary-nav">\n        <div class="col-sm-1">\n            {{#view view.transitionBackToSettings}}\n                <img id="color-wizard-exit-arrow" src="/img/back_arrow.svg"/>\n            {{/view}}\n        </div>\n        <div class="col-sm-10">\n            STYLE BUILDER\n        </div>\n    </div>\n{{/if}}\n\n<div id="style-settings">\n    {{#unless portalActive}}\n        <div id="choice-path" class="row materialize">\n            <div class="row title">Group CSS</div>\n            <p>Group CSS is accessible from all Projects, Templates, and Experiences. You can use our Style Builder to generate a CSS file or provide your own.</p>\n\n            {{#if currentCustomCss}}\n                <div class="sub-title">\n                    Current Group CSS:\n                    {{#if currentCustomCss}}<span class="access-method">{{#if hasHapyakCustomCssEnabled}}Generated by Style Builder{{else}}From file{{/if}}</span>{{/if}}\n                </div>\n                <div class="row">\n                    <p class="file-url">{{cssURL}}</p>\n                    {{#unless cssDownloadDisabled}}<a {{bind-attr href=currentCustomCss}} download target="_blank" class="btn right">Download</a>{{/unless}}\n                </div>\n            {{/if}}\n\n            <div class="sub-title">\n                Change Group CSS:\n            </div>\n            {{#if customCssEnabled}}\n                <div class="right-align">\n                    <div {{action "openStyleUploadModal"}} class="btn margin-bottom">Use CSS File</div>\n                </div>\n            {{/if}}\n            <div class="right-align">\n                <div class="btn">{{#view view.activateColorWizard}}{{createOrEditCss}}{{/view}}</div>\n            </div>\n\n            {{#if customCssLinkError}}\n                <div class="row">\n                    <div class="alert alert-info" role="alert">\n                        {{#if cssErrorMessage}}\n                            <strong>{{cssErrorMessage}}</strong>\n                        {{/if}}\n                    </div>\n                </div>\n            {{/if}}\n        </div>\n    {{/unless}}\n\n    <div id="color-wizard" {{bind-attr style=portalStatus}}>\n        <div class="row" id="title-row">\n            <div class="col-xs-4" id="active-annotation">\n                <div class="row">\n                    <div class="col-xs-3" id="current-state-icon">\n                        <img {{bind-attr src=currentAnnotationIcon}} height="20" width="20">\n                    </div>\n                    <div class="col-xs-9" id="current-state-title">\n                        {{currentAnnotation}}\n                    </div>\n                </div>\n            </div>\n            <div class="col-xs-8" id="title-block">\n                <div id="left-triangle">\n                </div>\n                LIVE PREVIEW\n            </div>\n        </div>\n\n        <div class="row">\n            <div class="col-md-4">\n                <div class="row">\n                    <div class="row color-form">\n                        <div id="style-forms">\n                            <form id="chapter-colors"  {{action "validate" "chapter-colors"\n                                                                "chapterExColorBackground chapterExTitleColorBackground chapterExTitleColorFont chapterExBackgroundTransparency chapterExTitleBackgroundTransparency chapterExListElColorFont chapterExListElHoverColorFont"\n                                                                "chapter-colors" on="submit"}}>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-title-background"\n                                               class="control-label pull-left">Title Background Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-1"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code"\n                                                value=chapterExTitleColorBackground focus-in="hideErrorStateImage"\n                                                focus-out="errorChapterExTitleColorBackground"}}\n                                        <img {{bind-attr src=errorChapterExTitleColorBackgroundImage}} alt=""\n                                                                                                       height="20"\n                                                                                                       width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-title-background"\n                                               class="control-label pull-left">Title Opacity</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <div class="data-type">0.0 - 1.0</div> {{input type="text"\n                                                                                       class="text-box val-decimal"\n                                                                                       value=chapterExTitleBackgroundTransparency\n                                                                                       focus-out="errorChapterExTitleBackgroundTransparency"\n                                                                                       focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorChapterExTitleBackgroundTransparencyImage}} alt=""\n                                                                                                              height="20"\n                                                                                                              width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-title-background hex-code"\n                                               class="control-label pull-left">Title Font Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-2"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=chapterExTitleColorFont\n                                                focus-out="errorChapterExTitleColorFont"focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorChapterExTitleColorFontImage}} alt="" height="20"\n                                                                                                 width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Body\n                                            Background Color: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-3"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=chapterExColorBackground\n                                                focus-out="errorChapterExColorBackground"\n                                                focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorChapterExColorBackgroundImage}} height="20"\n                                                                                                  width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-title-font-color"\n                                               class="control-label pull-left">Body Opacity</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <div class="data-type">0.0 - 1.0</div> {{input type="text"\n                                                                                       class="text-box val-decimal"\n                                                                                       value=chapterExBackgroundTransparency\n                                                                                       focus-out="errorChapterExBackgroundTransparency"\n                                                                                       focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorChapterExBackgroundTransparencyImage}} alt=""\n                                                                                                         height="20"\n                                                                                                         width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-title-font-color"\n                                               class="control-label pull-left">Body Font Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-4"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=chapterExListElColorFont\n                                                focus-out="errorChapterExListElColorFont"\n                                                focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorChapterExListElColorFontImage}} alt="" height="20"\n                                                                                                  width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-title-background"\n                                               class="control-label pull-left">Body Hover Font Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-5"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code"\n                                                value=chapterExListElHoverColorFont\n                                                focus-out="errorChapterExListElHoverColorFont"\n                                                focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorChapterExListElHoverColorFontImage}} alt=""\n                                                                                                       height="20"\n                                                                                                       width="20">\n                                    </div>\n                                </div>\n                                <div class="section-buffer"></div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-12">\n                                        <label for="hapyak-user-input-quiz-title-background"\n                                               class="control-label pull-left">Initial Menu State</label>\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="option-bar-style-container">\n                                        <div class="option-bar-style">\n                                            <div class="option" {{action toggleInitialStateOfChMenuCollapsed\n                                                                         "expanded"}}>Expanded\n                                            </div>\n                                            <div class="option" {{action toggleInitialStateOfChMenuCollapsed\n                                                                         "collapsed"}}>Collapsed\n                                            </div>\n                                        </div>\n                                        <div {{bind-attr\n                                                class=":option-toggle-switch initialStateOfChMenuCollapsed:toggle-on"}}></div>\n                                    </div>\n                                </div>\n                                <div class="section-buffer"></div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-12">\n                                        <label for="hapyak-user-input-quiz-title-background"\n                                               class="control-label pull-left">Chapter Menu</label>\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="option-bar-style-container">\n                                        <div class="option-bar-style">\n                                            <div class="option" {{action toggleChapterMenuExpanded "column"}}  >Column\n                                            </div>\n                                            <div class="option" {{action toggleChapterMenuExpanded "legacy"}}  >Full\n                                                Screen\n                                            </div>\n                                        </div>\n                                        <div {{bind-attr\n                                                class=":option-toggle-switch chapterMenuExpanded:toggle-on"}}></div>\n                                    </div>\n                                </div>\n                                {{#if chaptercolorsErrorHexValidation}}\n                                    <div class="chError" {{bind-attr style=chaptercolorsError}}>\n                                        <ul>\n                                            <li>Non valid HEX detected (must be 6 characters)</li>\n                                        </ul>\n                                    </div>\n                                {{/if}}\n\n                                {{#if chaptercolorsErrorDecValidation}}\n                                    <div class="chaptercolorsError" {{bind-attr style=chaptercolorsErrorDecValidation}}>\n                                        <ul>\n                                            <li>Non valid Dec detected</li>\n                                        </ul>\n                                    </div>\n                                {{/if}}\n                                <div class="row option-row">\n                                    <div class="col-xs-4 btn btn-prev">\n                                        {{#view view.deactivatePortal}}\n                                            BACK\n                                        {{/view}}\n                                    </div>\n                                    <div class="col-xs-3 btn btn-reset">\n                                        {{#view view.resetCurrentForm}}\n                                            RESET\n                                        {{/view}}\n                                    </div>\n                                    <div class="col-xs-5 btn btn-save" {{bind-attr style=canSubmitForm}}>\n                                        <button>SAVE / NEXT</button>\n                                    </div>\n                                </div>\n                            </form>\n\n                            <form id="pop-colors"  {{action "validate" "pop-colors"\n                                                            "popBackgroundColor popBackgroundTransparency popFontColor popBorderColorLeft popBorderThicknessLeft popBorderColorRight popBorderThicknessRight popBorderColorBottom popBorderThicknessBottom popBorderColorTop popBorderThicknessTop"\n                                                            on="submit"}}>\n\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Opacity: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <div class="data-type">0.0 - 1.0</div> {{input type="text"\n                                                                                       class="text-box val-decimal"\n                                                                                       value=popBackgroundTransparency\n                                                                                       focus-out="errorPopBackgroundTransparency"\n                                                                                       focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorPopBackgroundTransparencyImage}} alt="" height="20"\n                                                                                                   width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Background\n                                            Color: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-16"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=popBackgroundColor\n                                                focus-out="errorPopBackgroundColor" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorPopBackgroundColorImage}} alt="" height="20"\n                                                                                            width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Font\n                                            Color: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-17"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=popFontColor\n                                                focus-out="errorPopFontColor" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorPopFontColorImage}} alt="" height="20" width="20">\n                                    </div>\n                                </div>\n\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Border\n                                            Color Left: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-18"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=popBorderColorLeft\n                                                focus-out="errorPopBorderColorLeft" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorPopBorderColorLeftImage}} alt="" height="20"\n                                                                                            width="20">\n                                    </div>\n                                </div>\n\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Border\n                                            Thickness Left: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <div class="data-type"> 0 - 100</div> {{input type="text"\n                                                                                      class="text-box val-int"\n                                                                                      value=popBorderThicknessLeft\n                                                                                      focus-out="errorPopBorderThicknessLeft"\n                                                                                      focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorPopBorderThicknessLeftImage}} alt="" height="20"\n                                                                                                width="20">\n                                    </div>\n                                </div>\n\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Border\n                                            Color Right: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-19"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=popBorderColorRight\n                                                focus-out="errorPopBorderColorRight" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorPopBorderColorRightImage}} alt="" height="20"\n                                                                                             width="20">\n                                    </div>\n                                </div>\n\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Border\n                                            Thickness Right: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <div class="data-type"> 0 - 100</div> {{input type="text"\n                                                                                      class="text-box val-int"\n                                                                                      value=popBorderThicknessRight\n                                                                                      focus-out="errorPopBorderThicknessRight"\n                                                                                      focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorPopBorderThicknessRightImage}} alt="" height="20"\n                                                                                                 width="20">\n                                    </div>\n                                </div>\n\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Border\n                                            Color Bottom: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-20"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=popBorderColorBottom\n                                                focus-out="errorPopBorderColorBottom" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorPopBorderColorBottomImage}} alt="" height="20"\n                                                                                              width="20">\n                                    </div>\n                                </div>\n\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Border\n                                            Thickness Bottom: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <div class="data-type"> 0 - 100</div> {{input type="text"\n                                                                                      class="text-box val-int"\n                                                                                      value=popBorderThicknessBottom\n                                                                                      focus-out="errorPopBorderThicknessBottom"\n                                                                                      focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorPopBorderThicknessBottomImage}} alt="" height="20"\n                                                                                                  width="20">\n                                    </div>\n                                </div>\n\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Border\n                                            Color Top: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-21"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=popBorderColorTop\n                                                focus-out="errorPopBorderColorTop" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorPopBorderColorTopImage}} alt="" height="20"\n                                                                                           width="20">\n                                    </div>\n                                </div>\n\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Border\n                                            Thickness Top: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <div class="data-type">0 - 100</div> {{input type="text"class="text-box val-int"\n                                                                                     value=popBorderThicknessTop\n                                                                                     focus-out="errorPopBorderThicknessTop"\n                                                                                     focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorPopBorderThicknessTopImage}} alt="" height="20"\n                                                                                               width="20">\n                                    </div>\n                                </div>\n\n                                {{#if popcolorsErrorHexValidation}}\n                                    <div class="chError" {{bind-attr style=popcolorsError}}>\n                                        <ul>\n                                            <li>Non valid HEX detected (must be 6 characters)</li>\n                                        </ul>\n                                    </div>\n                                {{/if}}\n\n                                {{#if popcolorsErrorDecValidation}}\n                                    <div class="popError" {{bind-attr style=popcolorsErrorDecValidation}}>\n                                        <ul>\n                                            <li>Non valid Dec detected</li>\n                                        </ul>\n                                    </div>\n                                {{/if}}\n                                <div class="row option-row">\n                                    <div class="col-xs-4 btn btn-prev" {{action "goBackOneForm"}}>\n                                        PREVIOUS\n                                    </div>\n                                    <div class="col-xs-3 btn btn-reset">\n                                        {{#view view.resetCurrentForm}}\n                                            RESET\n                                        {{/view}}\n                                    </div>\n                                    <div class="col-xs-5 btn btn-save" {{bind-attr style=canSubmitForm}}>\n                                        <button>SAVE / NEXT</button>\n                                    </div>\n                                </div>\n                            </form>\n\n                            <form id="hot-link-colors"  {{action "validate" "hot-link-colors"\n                                                                 "hotLinkBackgroundColor hotLinkBackgroundTransparency hotLinkBackgroundHoverColor hotLinkFontHoverColor"\n                                                                 on="submit"}}>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Opacity: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <div class="data-type">0.0 - 1.0</div> {{input type="text"\n                                                                                       class="text-box val-decimal"\n                                                                                       value=hotLinkBackgroundTransparency\n                                                                                       focus-out="errorhotLinkBackgroundTransparency"\n                                                                                       focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorhotLinkBackgroundTransparencyImage}} alt=""\n                                                                                                       height="20"\n                                                                                                       width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-background-color" class="control-label pull-left">Background\n                                            Color: </label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-22"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=hotLinkBackgroundColor\n                                                focus-out="errorhotLinkBackgroundColor" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorhotLinkBackgroundColorImage}} alt="" height="20"\n                                                                                                width="20">\n                                    </div>\n                                </div>\n                                {{#if hotLinkcolorsErrorHexValidation}}\n                                    <div class="chError" {{bind-attr style=hotLinkcolorsError}}>\n                                        <ul>\n                                            <li>Non valid HEX detected (must be 6 characters)</li>\n                                        </ul>\n                                    </div>\n                                {{/if}}\n                                {{#if hotLinkcolorsErrorDecValidation}}\n                                    <div class="hotLinkError" {{bind-attr style=hotLinkcolorsErrorDecValidation}}>\n                                        <ul>\n                                            <li>Non valid Dec detected</li>\n                                        </ul>\n                                    </div>\n                                {{/if}}\n                                <div class="row option-row">\n                                    <div class="col-xs-4 btn btn-prev" {{action "goBackOneForm"}}>\n                                        PREVIOUS\n                                    </div>\n                                    <div class="col-xs-3 btn btn-reset">\n                                        {{#view view.resetCurrentForm}}\n                                            RESET\n                                        {{/view}}\n                                    </div>\n                                    <div class="col-xs-5 btn btn-save" {{bind-attr style=canSubmitForm}}>\n                                        <button>SAVE / NEXT</button>\n                                    </div>\n                                </div>\n                            </form>\n\n                            <form id="quiz-colors"  {{action "validate" "quiz-colors"\n                                                             "quizBorderRadius quizBorderColor quizBorderThickness quizBackgroundTitleColor quizTitleColorFont quizMainColorFont quizMainBackgroundColor quizSubmitBtnBackgroundColor quizSubmitBtnFontColor quizCancelBtnBackgroundColor quizCancelBtnFontColor quizBtnBorderColor quizBackgroundTransparency"\n                                                             on="submit"}}>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-main-background hex-code"\n                                               class="control-label pull-left">Quiz Opacity</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <div class="data-type">0.0 - 1.0</div> {{input type="text"\n                                                                                       class="text-box val-decimal"\n                                                                                       value=quizBackgroundTransparency\n                                                                                       focus-out="errorQuizBackgroundTransparency"\n                                                                                       focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizBackgroundTransparencyImage}} alt="" height="20"\n                                                                                                    width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-title-font-color"\n                                               class="control-label pull-left">Title Background Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-6"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=quizBackgroundTitleColor\n                                                focus-out="errorQuizBackgroundTitleColor"\n                                                focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizBackgroundTitleColorImage}} alt="" height="20"\n                                                                                                  width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-title-background hex-code"\n                                               class="control-label pull-left">Title Font Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-7"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=quizTitleColorFont\n                                                focus-out="errorQuizTitleColorFont" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizTitleColorFontImage}} alt="" height="20"\n                                                                                            width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-main-background hex-code"\n                                               class="control-label pull-left">Main Background Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-8"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=quizMainBackgroundColor\n                                                focus-out="errorQuizMainBackgroundColor"focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizMainBackgroundColorImage}} alt="" height="20"\n                                                                                                 width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-main-background hex-code"\n                                               class="control-label pull-left">Main Font Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-9"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=quizMainColorFont\n                                                focus-out="errorQuizMainColorFont" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizMainColorFontImage}} alt="" height="20"\n                                                                                           width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-main-background hex-code"\n                                               class="control-label pull-left">Submit Button Font Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-10"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=quizSubmitBtnFontColor\n                                                focus-out="errorQuizSubmitBtnFontColor" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizSubmitBtnFontColorImage}} alt="" height="20"\n                                                                                                width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-main-background hex-code"\n                                               class="control-label pull-left">Submit Button Background Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-11"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code"\n                                                value=quizSubmitBtnBackgroundColor\n                                                focus-out="errorQuizSubmitBtnBackgroundColor"\n                                                focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizSubmitBtnBackgroundColorImage}} alt="" height="20"\n                                                                                                      width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-main-background hex-code"\n                                               class="control-label pull-left">Cancel Button Background Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-12"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code"\n                                                value=quizCancelBtnBackgroundColor\n                                                focus-out="errorQuizCancelBtnBackgroundColor"\n                                                focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizCancelBtnBackgroundColorImage}} alt="" height="20"\n                                                                                                      width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-main-background hex-code"\n                                               class="control-label pull-left">Cancel Button Font Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-13"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=quizCancelBtnFontColor\n                                                focus-out="errorQuizCancelBtnFontColor" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizCancelBtnFontColorImage}} alt="" height="20"\n                                                                                                width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-main-background hex-code"\n                                               class="control-label pull-left">Button Border Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-14"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=quizBtnBorderColor\n                                                focus-out="errorQuizBtnBorderColor" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizBtnBorderColorImage}} alt="" height="20"\n                                                                                            width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-title-font-color"\n                                               class="control-label pull-left">Border Radius</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <div class="data-type">1 - 100</div> {{input type="text"class="text-box val-int"\n                                                                                     value=quizBorderRadius\n                                                                                     focus-out="errorQuizBorderRadius"\n                                                                                     focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizBorderRadiusImage}} alt="" height="20" width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-title-font-color"\n                                               class="control-label pull-left">Border Color</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <span class="input-group-addon color-pick color-pick-15"><i></i></span>\n                                        <div class="data-type">#</div>\n                                        {{input type="text" class="text-box val-hex-code" value=quizBorderColor\n                                                focus-out="errorQuizBorderColor" focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizBorderColorImage}} alt="" height="20" width="20">\n                                    </div>\n                                </div>\n                                <div class="row annotation-settings">\n                                    <div class="col-xs-6">\n                                        <label for="hapyak-user-input-quiz-title-font-color"\n                                               class="control-label pull-left">Border Thickness</label>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <div class="data-type">1 - 100</div> {{input type="text"class="text-box val-int"\n                                                                                     value=quizBorderThickness\n                                                                                     focus-out="errorQuizBorderThickness"\n                                                                                     focus-in="hideErrorStateImage"}}\n                                        <img {{bind-attr src=errorQuizBorderThicknessImage}} alt="" height="20"\n                                                                                             width="20">\n                                    </div>\n                                </div>\n\n                                {{#if chaptercolorsErrorHexValidation}}\n                                    <div class="chError" {{bind-attr style=chaptercolorsError}}>\n                                        <ul>\n                                            <li>Non valid HEX detected (must be 6 characters)</li>\n                                        </ul>\n                                    </div>\n                                {{/if}}\n\n                                {{#if chaptercolorsErrorDecValidation}}\n                                    <div class="chaptercolorsError" {{bind-attr style=chaptercolorsErrorDecValidation}}>\n                                        <ul>\n                                            <li>Non valid Dec detected</li>\n                                        </ul>\n                                    </div>\n                                {{/if}}\n\n                                {{#if provisioning.settings.style.nls}}\n                                    <div class="row annotation-settings">\n                                        <div class="current-language">\n                                            <div class="col-xs-5">\n                                                <label for="hapyak-user-input-quiz-title-font-color"\n                                                       class="control-label pull-left">Quiz Language</label>\n                                            </div>\n                                            <div class="col-xs-2">\n                                                <img class="flag-img" {{bind-attr src=activeLanguageFlag}}></img>\n                                            </div>\n                                            <div class="col-xs-3 language-name">\n                                                {{activeLanguageName}}\n                                            </div>\n                                            <div class="col-xs-2">\n                                                <div {{bind-attr class=languageDropdownEnabled}} {{action\n                                                        "showLanguages"}}>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        {{#if showLanguageDropdown}}\n                                            <div id="language-options" class="row language-option-container">\n                                                {{#each language in view.languages}}\n                                                    <div class="language-option" {{action "setGroupLanguage"\n                                                                                          language.name}}>\n                                                        <div class="language-flag">\n                                                            <img class="flag-img" {{bind-attr\n                                                                    src=language.flagImage}}></img>\n                                                        </div>\n                                                        <div class="language-name">\n                                                            {{language.name}}\n                                                        </div>\n                                                    </div>\n                                                {{/each}}\n                                            </div>\n                                        {{/if}}\n                                    </div>\n                                {{/if}}\n                                <div class="row option-row">\n                                    <div class="col-xs-4 btn btn-prev" {{action "goBackOneForm"}}>\n                                        PREVIOUS\n                                    </div>\n                                    <div class="col-xs-3 btn btn-reset">\n                                        {{#view view.resetCurrentForm}}\n                                            RESET\n                                        {{/view}}\n                                    </div>\n                                    <div class="col-xs-5 btn btn-save" {{bind-attr style=canSubmitForm}}>\n                                        <button>SAVE / NEXT</button>\n                                    </div>\n                                </div>\n                            </form>\n\n                            <form id="completed-form-add-css">\n                                <div class="message-block">\n                                    {{#unless appliedNewCss}}\n                                        <div class="row title">\n                                            All done styling! <br/>\n                                            Click below to apply your new custom CSS.\n                                        </div>\n                                        <div class="row sub-title">\n                                            Previous custom styles will be overwritten.\n                                        </div>\n                                    {{/unless}}\n\n                                    {{#if appliedNewCss}}\n                                        <div class="row title">\n                                            Your custom style is now applied! <br/>\n                                            Click below to return to the portal\n                                        </div>\n                                    {{/if}}\n                                </div>\n\n                                <div class="row">\n                                    <img {{bind-attr src=appliedCssState}}>\n                                </div>\n                                <div class="height-control" id="apply-css" {{bind-attr style=applyCssState}} {{action\n                                        "applyCss" "confirmFirst"}}>\n                                    {{#if appliedNewCss}}\n                                        UPDATED STYLE\n                                    {{/if}}\n                                    {{#unless appliedNewCss}}\n                                        PUBLISH\n                                    {{/unless}}\n                                </div>\n                                <div class="red-link height-control" {{bind-attr style=returnMessage}}>\n                                    {{#view view.removeCss}}\n                                        REMOVE\n                                    {{/view}}\n                                </div>\n                                <div class="row center-text btn" {{action "activePortal"}}>\n                                    EXIT\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="col-md-8">\n                <div class="annotation-preview-column">\n                    <div class="annotation-settings-section">\n                        <div class="annotation-preview-area">\n                            <div id="chapter-menu-preview" class="annotation-preview">\n                                {{#if chapterMenuExpanded}}\n                                    <div id="expanded-chapter-menu">\n                                        <div class="popcorn-contents-title" {{bind-attr\n                                                style=chapterExTitleColorBackgroundStyle}}>\n                                            <div class="popcorn-contents-main-title inline">\n                                                Chapters\n                                            </div>\n                                            <div class="popcorn-contents-close inline">\n                                                X\n                                            </div>\n                                        </div>\n                                        <div id="chapter-menu-list" {{bind-attr style=chapterExBackgroundMainBody}}>\n                                            <ul class="chapter-list">\n                                                <li class="chapter-list-item" id="ch1" {{action "changeLiColor" "ch1"\n                                                                                                on="mouseEnter"}} {{bind-attr\n                                                        style=chapterExListElColorFontStyle}}>\n                                                    <div class="title">\n                                                        Ch 1\n                                                    </div>\n                                                    <div class="time">\n                                                        00:30.5\n                                                    </div>\n                                                </li>\n                                                <li class="chapter-list-item" id="ch2" {{action "changeLiColor" "ch2"\n                                                                                                on="mouseEnter"}} {{bind-attr\n                                                        style=chapterExListElColorFontStyle}}>\n                                                    <div class="title">\n                                                        Ch 2\n                                                    </div>\n                                                    <div class="time">\n                                                        01:10.0\n                                                    </div>\n                                                </li>\n                                                <li class="chapter-list-item" id="ch3" {{action "changeLiColor" "ch3"\n                                                                                                on="mouseEnter"}} {{bind-attr\n                                                        style=chapterExListElColorFontStyle}}>\n                                                    <div class="title">\n                                                        Ch 3\n                                                    </div>\n                                                    <div class="time">\n                                                        01:50.0\n                                                    </div>\n                                                </li>\n                                                <li class="chapter-list-item" id="ch4" {{action "changeLiColor" "ch4"\n                                                                                                on="mouseEnter"}} {{bind-attr\n                                                        style=chapterExListElColorFontStyle}}>\n                                                    <div class="title">\n                                                        Ch 4\n                                                    </div>\n                                                    <div class="time">\n                                                        03:00.0\n                                                    </div>\n                                                </li>\n                                                <li class="chapter-list-item" id="ch5" {{action "changeLiColor" "ch5"\n                                                                                                on="mouseEnter"}} {{bind-attr\n                                                        style=chapterExListElColorFontStyle}}>\n                                                    <div class="title">\n                                                        Ch 5\n                                                    </div>\n                                                    <div class="time">\n                                                        04:21.0\n                                                    </div>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                {{/if}}\n                                {{#unless chapterMenuExpanded}}\n                                    <div id="default-chapter-menu">\n                                        <div class="popcorn-contents-title" {{bind-attr\n                                                style=chapterExTitleColorBackgroundStyle}}>\n                                            <div class="popcorn-contents-main-title inline">\n                                                Chapters\n                                            </div>\n                                            <div class="popcorn-contents-close inline">\n                                                X\n                                            </div>\n                                        </div>\n                                        <div id="chapter-menu-list" {{bind-attr style=chapterExBackgroundMainBody}}>\n                                            <ul class="chapter-list">\n                                                <li class="chapter-list-item" id="ch1" {{action "changeLiColor" "ch1"\n                                                                                                on="mouseEnter"}} {{bind-attr\n                                                        style=chapterExListElColorFontStyle}}>Ch 1\n                                                </li>\n                                                <li class="chapter-list-item" id="ch2" {{action "changeLiColor" "ch2"\n                                                                                                on="mouseEnter"}} {{bind-attr\n                                                        style=chapterExListElColorFontStyle}}>Ch 2\n                                                </li>\n                                                <li class="chapter-list-item" id="ch3" {{action "changeLiColor" "ch3"\n                                                                                                on="mouseEnter"}} {{bind-attr\n                                                        style=chapterExListElColorFontStyle}}>Ch 3\n                                                </li>\n                                                <li class="chapter-list-item" id="ch4" {{action "changeLiColor" "ch4"\n                                                                                                on="mouseEnter"}} {{bind-attr\n                                                        style=chapterExListElColorFontStyle}}>Ch 4\n                                                </li>\n                                                <li class="chapter-list-item" id="ch5" {{action "changeLiColor" "ch5"\n                                                                                                on="mouseEnter"}} {{bind-attr\n                                                        style=chapterExListElColorFontStyle}}>Ch 5\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                {{/unless}}\n                            </div>\n\n                            <div id="quiz-preview" class="annotation-preview">\n                                <div id="container" {{bind-attr style=quizBorderSettings}}>\n                                    <div id="quiz-title" {{bind-attr style=quizTitleSettings}}>\n                                        Lorem ipsum dolor sit amet?\n                                    </div>\n                                    <div id="quiz-choices" {{bind-attr style=quizBodySettings}}>\n                                        <form>\n                                            <label {{bind-attr style=quizBodyListSettings}}>\n                                                <input type="radio" name="sex" value="one">Phasellus sit amet\n                                            </label>\n                                            <br>\n                                            <label {{bind-attr style=quizBodyListSettings}}>\n                                                <input type="radio" name="sex" value="two">blandit purus\n                                            </label>\n                                            <br>\n                                            <label {{bind-attr style=quizBodyListSettings}}>\n                                                <input type="radio" name="sex" value="three">In sit amet tincidunt\n                                            </label>\n                                            <br>\n                                            <label {{bind-attr style=quizBodyListSettings}}>\n                                                <input type="radio" name="sex" value="four">libero\n                                            </label>\n                                        </form>\n                                        <div class="button-holder">\n                                            <div class="btn" id="submit" {{bind-attr style=quizSubmitBtn}}>\n                                                Submit\n                                            </div>\n                                            <div class="btn" id="cancel" {{bind-attr style=quizCancelBtn}}>\n                                                Cancel\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div id="default-pop-preview" class="annotation-preview">\n                                <div id="pop" {{bind-attr style=popDefaultStyle}}>\n                                    Pop comment\n                                </div>\n                            </div>\n\n                            <div id="default-hot-link-preview" class="annotation-preview">\n                                <div id="pop" {{bind-attr style=hotLinkDefaultStyle}}>\n                                    HotSpot\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="col-xs-2">\n                            <div {{bind-attr class=":icon-box chapterColorsActive:active-box"}} {{action goToForm\n                                                                                                         \'chapter-colors\'}} {{bind-attr\n                                    style=chapterColorsCompleted}}>\n                                <div class="row">\n                                    <img class="icon" {{bind-attr src=chapterColorsCompleteImage}}>\n                                </div>\n                                <div class="row">\n                                    CHAPTER MENU\n                                </div>\n                            </div>\n                        </div>\n                        <div class="col-xs-2">\n                            <div {{bind-attr class=":icon-box popColorsActive:active-box"}} {{action goToForm\n                                                                                                     \'pop-colors\'}} {{bind-attr\n                                    style=popColorsCompleted}}>\n                                <div class="row">\n                                    <img class="icon" {{bind-attr src=popColorsCompleteImage}}>\n                                </div>\n                                <div class="row">\n                                    OVERLAY\n                                </div>\n                            </div>\n                        </div>\n                        <div class="col-xs-2">\n                            <div {{bind-attr class=":icon-box hotlinkColorsActive:active-box"}} {{action goToForm\n                                                                                                         \'hot-link-colors\'}} {{bind-attr\n                                    style=hotLinkColorsCompleted}}>\n                                <div class="row">\n                                    <img class="icon" {{bind-attr src=hotLinkColorsCompleteImage}}>\n                                </div>\n                                <div class="row">\n                                    HotSpot\n                                </div>\n                            </div>\n                        </div>\n                        <div class="col-xs-2">\n                            <div {{bind-attr class=":icon-box quizColorsActive:active-box"}} {{action goToForm\n                                                                                                      \'quiz-colors\'}} {{bind-attr\n                                    style=quizColorsCompleted}}>\n                                <div class="row">\n                                    <img class="icon" {{bind-attr src=quizColorsCompleteImage}}>\n                                </div>\n                                <div class="row">\n                                    QUIZ\n                                </div>\n                            </div>\n                        </div>\n                        {{#unless publishActive}}\n                            <div class="col-xs-4">\n                                {{#view view.applyAndExit}}\n                                    <div class="row center-text btn">\n                                        PREVIEW & PUBLISH\n                                    </div>\n                                {{/view}}\n                            </div>\n                        {{/unless}}\n                    </div>\n                    <div class="row" {{bind-attr style=validationError}}>\n                        <div class="row error">\n                            <div class="col-xs-1">\n                            </div>\n                            <div class="col-xs-11">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/settings/defaults.hbs",[],function(){return'<div class="materialize settings-defaults">\n    {{#view}}\n        <div class="settings-subsection row">\n            {{view "card_player"}}\n            {{view "card_quiz"}}\n            {{#if provisioning.experiences.enabled}}\n                {{#if provisioning.experiences.branding}}\n                    {{view "card_experience_branding"}}\n                {{/if}}\n                {{#if provisioning.experiences.access_gate}}\n                    {{view "card_access_gate"}}\n                {{/if}}\n            {{/if}}\n            {{#if provisioning.configPlayerbar.group}}\n                {{view "card_playerbar"}}\n            {{/if}}\n            {{#if provisioning.workflows}}\n                {{view "card_workflows"}}\n            {{/if}}\n        </div>\n    {{/view}}\n</div>\n'}),define("vendor/text!portal/templates/settings/integrations.hbs",[],function(){return'<div class="materialize settings-integrations">\n    <div class="settings-subsection row">\n        {{#if hapyakApiKeysProvisioned}}\n            {{#with currentGroup}}\n                {{view "card_hapyak_api"}}\n            {{/with}}\n        {{/if}}\n\n        {{#if brightcoveProvisioned}}\n            {{view "card_brightcove"}}\n        {{/if}}\n\n        {{#if provisioning.integrations.salesforce}}\n            {{view "card_salesforce"}}\n        {{/if}}\n\n        {{#if wistiaProvisioned}}\n            {{view "card_wistia"}}\n        {{/if}}\n\n        {{#if provisioning.analytics.google}}\n            {{view "card_google"}}\n        {{/if}}\n\n        {{#if provisioning.annotationTypes.social}}\n            {{view "card_facebook"}}\n        {{/if}}\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/settings/admin.hbs",[],function(){return'<div class="materialize settings-admin">\n    <div class="settings-subsection row">\n        {{#with currentGroup}}\n            {{#if currentUser.isAdmin}}\n                {{view "card_organization"}}\n                {{#if showPlanCard}}\n                    {{view "card_plan"}}\n                {{/if}}\n                {{#if inviteEnabled}}\n                    {{view "card_manage_users"}}\n                {{/if}}\n                {{#if provisioning.reports.automated.weekly}}\n                    {{view "card_automated_email"}}\n                {{/if}}\n                {{#if provisioning.embed_whitelist}}\n                    {{view "card_embed_whitelist"}}\n                {{/if}}\n\n                {{#if provisioning.subgroupCreation.enabled}}\n                    {{view "card_subgroup"}}\n                {{/if}}\n            {{/if}}\n            {{#if provisioning.hosting.video.enabled}}\n                {{#if videoStorageSize}}\n                    {{view "card_storage"}}\n                {{/if}}\n            {{/if}}\n        {{/with}}\n        {{#if currentUser.isAdmin}}\n            {{#with integrations}}\n                {{#if whiteListDomainsProvisioned}}\n                    {{view "card_domain_white_list"}}\n                {{/if}}\n            {{/with}}\n        {{/if}}\n\n        {{#if provisioning.support}}\n            {{view "card_support"}}\n        {{/if}}\n    </div>\n</div>\n\n'}),define("vendor/text!portal/templates/error_saving_modal.hbs",[],function(){return'<div class="error-modal">\n    <div class="form-group">\n        <div class="form-horizontal row">\n            <div class="col-xs-12">\n                <div class="panel panel-info">\n                    <div class="panel-error-img">\n                        <img src="//hapyak_demos.s3.amazonaws.com/img/warning_icon.svg">\n                    </div>\n                    <div class="panel-body">\n                        {{view.helpBody}}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/error_modal.hbs",[],function(){return'<div class="error-modal">\n    <div class="form-group">\n        <div class="form-horizontal row">\n            <div class="col-xs-12">\n                <div class="panel panel-info">\n                    <div class="panel-error-img">\n                        <img {{bind-attr src=view.modalIcon style=view.modalIconStyle}}/>\n                    </div>\n                    <div class="panel-body">\n                        {{view.body}}\n\n                        {{#if view.bodyHTML}}\n                            {{{view.bodyHTML}}}\n                        {{/if}}\n\n                        {{#if view.message}}\n                            <div class="row">\n                                <div>{{view.message}}</div>\n                            </div>\n                        {{/if}}\n                        {{#if view.customMessage}}\n                            <div class="row">\n                                <a {{bind-attr href="view.mailToLink" target="_blank"}}>{{view.customMessage}}</a>\n                                <img {{bind-attr src="view.transparentImgSrc"}}/>\n                            </div>\n                        {{/if}}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/html_modal.hbs",[],function(){return'<div class="html-modal">\n    {{#if view.bodyHTML}}\n        {{{view.bodyHTML}}}\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/live_stream_modal.hbs",[],function(){return"\n{{live-stream-modal experience=experience}}\n"}),define("vendor/text!portal/templates/error_overwrite_modal.hbs",[],function(){return'<div class="error-modal">\n    <div class="form-group">\n        <div class="form-horizontal row">\n            <div class="col-xs-12">\n                <div class="panel panel-info">\n                    <div class="panel-error-img">\n                        <img src="//hapyak_demos.s3.amazonaws.com/img/warning_icon.svg">\n                    </div>\n                    <div class="panel-body">\n                        {{view.helpBody}}\n                    </div>\n                    <div class="panel-body">\n                        {{view.secondaryMessage}}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/leaving_stylebuilder_modal.hbs",[],function(){return'<div class="error-modal">\n    <div class="form-group">\n        <div class="form-horizontal row">\n            <div class="col-xs-12">\n                <div class="panel panel-info">\n                    <div class="panel-error-img">\n                        <img src="//hapyak_demos.s3.amazonaws.com/img/warning_icon.svg">\n                    </div>\n                    <div class="panel-body">\n                        Your changes are saved but will not be active until completing the builder.\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/group_search_modal.hbs",[],function(){return'<div id="group-search-modal-body">\n    <div class="row">\n        <div class="col-xs-12">\n            {{#view view.DropdownView}}\n                <div class="list-group">\n                    <div class="list-group-item active">\n                        {{currentGroup.name}}{{dev-view}}\n                    </div>\n                    {{#if currentUser.isSuperAdmin}}\n                        {{data-table\n                            ajax=view.ajax\n                            columns=view.columns\n                            dom="frtp"\n                            initComplete=view.initComplete\n                            language=view.language\n                            order=view.order\n                            pageLength=8\n                            pagingType="full_numbers"\n                            searchCols=view.searchCols\n                            target=project}}\n                    {{else}}\n                        {{#each group in currentUser.otherGroups}}\n                            <a href="#" {{action "changeGroup" group}} class="list-group-item">\n                                {{group.name}}\n                            </a>\n                        {{/each}}\n                    {{/if}}\n                </div>\n            {{/view}}\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/input_modal.hbs",[],function(){return'\n<div class="form-group">\n    {{portal-text-input inputType=view.type settingValue=view.value settingId="input_value" settingLabel=view.settingLabel}}\n\n    {{#if view.hasLink}}\n        {{portal-text-input inputType="text" settingValue=view.link settingId="link_value" settingLabel="Link"}}\n    {{/if}}\n</div>\n'}),define("vendor/text!portal/templates/upload_modal.hbs",[],function(){return'\n{{upload-component\n        application=controllers.application\n        folder=view.folder\n        settingLabel=view.settingLabel\n        value=view.value\n        accept=view.accept\n        multiple=view.multiple\n        buttonText=view.buttonText\n        callback=view.callback\n}}\n\n{{#if view.hasLink}}\n    <div class="form-group">\n        {{portal-text-input inputType="text" settingValue=view.link settingId="link_value" settingLabel="Link"}}\n    </div>\n{{/if}}\n'}),define("vendor/text!portal/templates/warning_overwrite_css_form_portal_modal.hbs",[],function(){return'<div class="error-modal">\n    <div class="form-group">\n        <div class="form-horizontal row">\n            <div class="col-xs-12">\n                <div class="panel panel-info">\n                    <div class="panel-error-img">\n                        <img src="//hapyak_demos.s3.amazonaws.com/img/warning_icon.svg">\n                    </div>\n                    <div class="panel-body">\n                        This will reset the listed styles to HapYak default settings\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("vendor/text!portal/templates/session_expiring_modal.hbs",[],function(){return'<div class="error-modal">\n    <div class="form-group">\n        <div class="form-horizontal row">\n            <div class="col-xs-12">\n                <div class="panel panel-info">\n                    <div class="panel-error-img">\n                        <img {{bind-attr src=view.modalIcon style=view.modalIconStyle}}></img>\n                    </div>\n                    <div class="panel-body">\n                        {{view.body}}\n\n                        {{#if view.bodyHTML}}\n                            {{{view.bodyHTML}}}\n                        {{/if}}\n\n                        {{#if view.message}}\n                            <div class="row">\n                                <div>{{vi      <div class="row">\n                                <div>{{view.message}}</div>\n                            </div>\n                        {{/if}}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),define("portal.v2.templates",["vendor/text!portal/templates/components/animated-button.hbs","vendor/text!portal/templates/components/brightcove-live.hbs","vendor/text!portal/templates/components/live-stream-modal.hbs","vendor/text!portal/templates/components/data-table.hbs","vendor/text!portal/templates/components/extended-editor.hbs","vendor/text!portal/templates/components/external-content.hbs","vendor/text!portal/templates/components/off-video-external-chapters.hbs","vendor/text!portal/templates/components/grading-addon.hbs","vendor/text!portal/templates/components/x-editable.hbs","vendor/text!portal/templates/components/card-input.hbs","vendor/text!portal/templates/components/real-time-stats.hbs","vendor/text!portal/templates/components/real-time-active-sessions.hbs","vendor/text!portal/templates/components/radio-button.hbs","vendor/text!portal/templates/components/mail-to.hbs","vendor/text!portal/templates/components/quick-start-card.hbs","vendor/text!portal/templates/components/quick-start-guide.hbs","vendor/text!portal/templates/components/quick-start-guide-btn.hbs","vendor/text!portal/templates/components/send-email.hbs","vendor/text!portal/templates/components/send-email-form.hbs","vendor/text!portal/templates/components/slide-in.hbs","vendor/text!portal/templates/components/slide-in-nav.hbs","vendor/text!portal/templates/components/slide-in-nav-sections.hbs","vendor/text!portal/templates/components/share-modal.hbs","vendor/text!portal/templates/components/studio-home.hbs","vendor/text!portal/templates/components/toggle-input.hbs","vendor/text!portal/templates/components/portal-text-input.hbs","vendor/text!portal/templates/components/preloader-component.hbs","vendor/text!portal/templates/components/customer-unpaid.hbs","vendor/text!portal/templates/components/drag-switch.hbs","vendor/text!portal/templates/components/draggable-playlist-item.hbs","vendor/text!portal/templates/components/upload-component.hbs","vendor/text!portal/templates/components/multi-select-input.hbs","vendor/text!portal/templates/components/vte-container.hbs","vendor/text!portal/templates/components/vte-workspace.hbs","vendor/text!portal/templates/components/vte-annotation.hbs","vendor/text!portal/templates/components/vte-annotation-handle.hbs","vendor/text!portal/templates/components/vte-mini-annotation.hbs","vendor/text!portal/templates/components/vte-mini-timeline.hbs","vendor/text!portal/templates/components/vte-scrubber.hbs","vendor/text!portal/templates/components/vte-scale.hbs","vendor/text!portal/templates/components/expandable-share-option.hbs","vendor/text!portal/templates/embed-types/hapyak-player.hbs","vendor/text!portal/templates/embed-types/experience-hapyak-player.hbs","vendor/text!portal/templates/embed-types/native-player.hbs","vendor/text!portal/templates/embed-types/landing-page.hbs","vendor/text!portal/templates/embed-types/embedly.hbs","vendor/text!portal/templates/embed-types/external-chapters.hbs","vendor/text!portal/templates/embed-types/vrviewer.hbs","vendor/text!portal/templates/embed-types/hapyak-hosted-player.hbs","vendor/text!portal/templates/embed-types/scorm.hbs","vendor/text!portal/templates/config_modal/common.hbs","vendor/text!portal/templates/config_modal/vrviewer.hbs","vendor/text!portal/templates/config_modal/salesforce.hbs","vendor/text!portal/templates/project/edit.hbs","vendor/text!portal/templates/project/readonly.hbs","vendor/text!portal/templates/project/readwrite.hbs","vendor/text!portal/templates/experience/edit.hbs","vendor/text!portal/templates/reports/grades.hbs","vendor/text!portal/templates/custom_reports.hbs","vendor/text!portal/templates/core_reports.hbs","vendor/text!portal/templates/reports/index.hbs","vendor/text!portal/templates/reports/questions.hbs","vendor/text!portal/templates/reports/stats.hbs","vendor/text!portal/templates/reports/actions.hbs","vendor/text!portal/templates/_input-text.hbs","vendor/text!portal/templates/_input-textarea.hbs","vendor/text!portal/templates/account_media.hbs","vendor/text!portal/templates/application.hbs","vendor/text!portal/templates/asset_upload.hbs","vendor/text!portal/templates/userlink.hbs","vendor/text!portal/templates/supportlink.hbs","vendor/text!portal/templates/grouplink.hbs","vendor/text!portal/templates/cards.hbs","vendor/text!portal/templates/card_access_gate.hbs","vendor/text!portal/templates/card_brightcove.hbs","vendor/text!portal/templates/card_google.hbs","vendor/text!portal/templates/card_domain_white_list.hbs","vendor/text!portal/templates/card_facebook.hbs","vendor/text!portal/templates/card_group_members.hbs","vendor/text!portal/templates/card_subgroup.hbs","vendor/text!portal/templates/card_automated_email.hbs","vendor/text!portal/templates/card_embed_whitelist.hbs","vendor/text!portal/templates/card_hapyak_api.hbs","vendor/text!portal/templates/card_experience_branding.hbs","vendor/text!portal/templates/card_manage_users.hbs","vendor/text!portal/templates/card_organization.hbs","vendor/text!portal/templates/card_player.hbs","vendor/text!portal/templates/card_plan.hbs","vendor/text!portal/templates/card_quiz.hbs","vendor/text!portal/templates/card_playerbar.hbs","vendor/text!portal/templates/card_salesforce.hbs","vendor/text!portal/templates/card_storage.hbs","vendor/text!portal/templates/card_user.hbs","vendor/text!portal/templates/card_wistia.hbs","vendor/text!portal/templates/card_workflows.hbs","vendor/text!portal/templates/card_support.hbs","vendor/text!portal/templates/subscribe_to_automated_report_modal.hbs","vendor/text!portal/templates/embed_whitelist_modal.hbs","vendor/text!portal/templates/report_modal.hbs","vendor/text!portal/templates/config_modal.hbs","vendor/text!portal/templates/config_modal_experience.hbs","vendor/text!portal/templates/modal_link_generator.hbs","vendor/text!portal/templates/confirm_modal.hbs","vendor/text!portal/templates/modal.hbs","vendor/text!portal/templates/new_project_modal.hbs","vendor/text!portal/templates/studio.hbs","vendor/text!portal/templates/index.hbs","vendor/text!portal/templates/project/index.hbs","vendor/text!portal/templates/experience/index.hbs","vendor/text!portal/templates/template/index.hbs","vendor/text!portal/templates/playlist/index.hbs","vendor/text!portal/templates/missing_404.hbs","vendor/text!portal/templates/new_experience_modal.hbs","vendor/text!portal/templates/experience/edit_slidesync.hbs","vendor/text!portal/templates/experience/edit_slidesync_external_chapters.hbs","vendor/text!portal/templates/experience/edit_slidesync_full_width_playlist.hbs","vendor/text!portal/templates/experience/edit_video_only.hbs","vendor/text!portal/templates/experience/edit_lesson.hbs","vendor/text!portal/templates/experience/edit_live.hbs","vendor/text!portal/templates/experience/edit_branching.hbs","vendor/text!portal/templates/experience/edit_single_video_landing_page.hbs","vendor/text!portal/templates/experience/edit_review.hbs","vendor/text!portal/templates/addons/slider.hbs","vendor/text!portal/templates/addons/slidesync_editor.hbs","vendor/text!portal/templates/addons/slidesync_viewer.hbs","vendor/text!portal/templates/addons/playlist_addon.hbs","vendor/text!portal/templates/new_template_modal.hbs","vendor/text!portal/templates/new_playlist_modal.hbs","vendor/text!portal/templates/pagination.hbs","vendor/text!portal/templates/profile.hbs","vendor/text!portal/templates/project.hbs","vendor/text!portal/templates/experience.hbs","vendor/text!portal/templates/reports.hbs","vendor/text!portal/templates/sizing_modal.hbs","vendor/text!portal/templates/template_modal.hbs","vendor/text!portal/templates/users_modal.hbs","vendor/text!portal/templates/subgroup_list_modal.hbs","vendor/text!portal/templates/subgroup_creation_modal.hbs","vendor/text!portal/templates/annotation_edit_modal.hbs","vendor/text!portal/templates/video_upload.hbs","vendor/text!portal/templates/offline_modal.hbs","vendor/text!portal/templates/lti.hbs","vendor/text!portal/templates/settings.hbs","vendor/text!portal/templates/settings/style.hbs","vendor/text!portal/templates/settings/defaults.hbs","vendor/text!portal/templates/settings/integrations.hbs","vendor/text!portal/templates/settings/admin.hbs","vendor/text!portal/templates/error_saving_modal.hbs","vendor/text!portal/templates/error_modal.hbs","vendor/text!portal/templates/html_modal.hbs","vendor/text!portal/templates/live_stream_modal.hbs","vendor/text!portal/templates/error_overwrite_modal.hbs","vendor/text!portal/templates/leaving_stylebuilder_modal.hbs","vendor/text!portal/templates/group_search_modal.hbs","vendor/text!portal/templates/input_modal.hbs","vendor/text!portal/templates/upload_modal.hbs","vendor/text!portal/templates/warning_overwrite_css_form_portal_modal.hbs","vendor/text!portal/templates/session_expiring_modal.hbs","vendor/text!portal/templates/group_changed_modal.hbs","ember.hapyak"],function(e,t,n,i,r,a,o,s,l,c,d,u,p,h,f,m,v,g,y,b,w,E,k,x,C,_,T,S,A,P,I,L,D,O,M,R,V,j,H,q,z,F,B,U,W,$,Y,G,K,Q,X,J,Z,ee,te,ne,ie,re,ae,oe,se,le,ce,de,ue,pe,he,fe,me,ve,ge,ye,be,we,Ee,ke,xe,Ce,_e,Te,Se,Ae,Pe,Ie,Le,De,Oe,Me,Ne,Re,Ve,je,He,qe,ze,Fe,Be,Ue,We,$e,Ye,Ge,Ke,Qe,Xe,Je,Ze,et,tt,nt,it,rt,at,ot,st,lt,ct,dt,ut,pt,ht,ft,mt,vt,gt,yt,bt,wt,Et,kt,xt,Ct,_t,Tt,St,At,Pt,It,Lt,Dt,Ot,Mt,Nt,Rt,Vt,jt,Ht,qt,zt,Ft,Bt,Ut,Wt,$t,Yt,Gt,Kt,Qt,Xt,N){"use strict";return N.TEMPLATES["components/animated-button"]=N.Handlebars.compile(e),N.TEMPLATES["components/brightcove-live"]=N.Handlebars.compile(t),N.TEMPLATES["components/live-stream-modal"]=N.Handlebars.compile(n),N.TEMPLATES["components/data-table"]=N.Handlebars.compile(i),N.TEMPLATES["components/extended-editor"]=N.Handlebars.compile(r),N.TEMPLATES["components/external-content"]=N.Handlebars.compile(a),N.TEMPLATES["components/off-video-external-chapters"]=N.Handlebars.compile(o),N.TEMPLATES["components/grading-addon"]=N.Handlebars.compile(s),N.TEMPLATES["components/x-editable"]=N.Handlebars.compile(l),N.TEMPLATES["components/card-input"]=N.Handlebars.compile(c),N.TEMPLATES["components/real-time-stats"]=N.Handlebars.compile(d),N.TEMPLATES["components/real-time-active-sessions"]=N.Handlebars.compile(u),N.TEMPLATES["components/radio-button"]=N.Handlebars.compile(p),N.TEMPLATES["components/mail-to"]=N.Handlebars.compile(h),N.TEMPLATES["components/quick-start-card"]=N.Handlebars.compile(f),N.TEMPLATES["components/quick-start-guide"]=N.Handlebars.compile(m),N.TEMPLATES["components/quick-start-guide-btn"]=N.Handlebars.compile(v),N.TEMPLATES["components/send-email"]=N.Handlebars.compile(g),N.TEMPLATES["components/send-email-form"]=N.Handlebars.compile(y),N.TEMPLATES["components/slide-in"]=N.Handlebars.compile(b),N.TEMPLATES["components/slide-in-nav"]=N.Handlebars.compile(w),N.TEMPLATES["components/slide-in-nav-sections"]=N.Handlebars.compile(E),N.TEMPLATES["components/share-modal"]=N.Handlebars.compile(k),N.TEMPLATES["components/studio-home"]=N.Handlebars.compile(x),N.TEMPLATES["components/toggle-input"]=N.Handlebars.compile(C),N.TEMPLATES["components/portal-text-input"]=N.Handlebars.compile(_),N.TEMPLATES["components/preloader-component"]=N.Handlebars.compile(T),N.TEMPLATES["components/customer-unpaid"]=N.Handlebars.compile(S),N.TEMPLATES["components/drag-switch"]=N.Handlebars.compile(A),N.TEMPLATES["components/draggable-playlist-item"]=N.Handlebars.compile(P),N.TEMPLATES["components/upload-component"]=N.Handlebars.compile(I),N.TEMPLATES["components/multi-select-input"]=N.Handlebars.compile(L),N.TEMPLATES["components/vte-container"]=N.Handlebars.compile(D),N.TEMPLATES["components/vte-workspace"]=N.Handlebars.compile(O),N.TEMPLATES["components/vte-annotation"]=N.Handlebars.compile(M),N.TEMPLATES["components/vte-annotation-handle"]=N.Handlebars.compile(R),N.TEMPLATES["components/vte-mini-annotation"]=N.Handlebars.compile(V),N.TEMPLATES["components/vte-mini-timeline"]=N.Handlebars.compile(j),N.TEMPLATES["components/vte-scrubber"]=N.Handlebars.compile(H),N.TEMPLATES["components/vte-scale"]=N.Handlebars.compile(q),N.TEMPLATES["components/expandable-share-option"]=N.Handlebars.compile(z),N.TEMPLATES["embed-types/hapyak-player"]=N.Handlebars.compile(F),N.TEMPLATES["embed-types/experience-hapyak-player"]=N.Handlebars.compile(B),N.TEMPLATES["embed-types/native-player"]=N.Handlebars.compile(U),N.TEMPLATES["embed-types/landing-page"]=N.Handlebars.compile(W),N.TEMPLATES["embed-types/embedly"]=N.Handlebars.compile($),N.TEMPLATES["embed-types/external-chapters"]=N.Handlebars.compile(Y),N.TEMPLATES["embed-types/vrviewer"]=N.Handlebars.compile(G),N.TEMPLATES["embed-types/hapyak-hosted-player"]=N.Handlebars.compile(K),N.TEMPLATES["embed-types/scorm"]=N.Handlebars.compile(Q),N.TEMPLATES["config_modal/common"]=N.Handlebars.compile(X),N.TEMPLATES["config_modal/vrviewer"]=N.Handlebars.compile(J),N.TEMPLATES["config_modal/salesforce"]=N.Handlebars.compile(Z),N.TEMPLATES["project/edit"]=N.Handlebars.compile(ee),N.TEMPLATES["project/readonly"]=N.Handlebars.compile(te),N.TEMPLATES["project/readwrite"]=N.Handlebars.compile(ne),N.TEMPLATES["experience/edit"]=N.Handlebars.compile(ie),N.TEMPLATES["reports/grades"]=N.Handlebars.compile(re),N.TEMPLATES.custom_reports=N.Handlebars.compile(ae),N.TEMPLATES.core_reports=N.Handlebars.compile(oe),N.TEMPLATES["reports/index"]=N.Handlebars.compile(se),N.TEMPLATES["reports/questions"]=N.Handlebars.compile(le),N.TEMPLATES["reports/stats"]=N.Handlebars.compile(ce),N.TEMPLATES["reports/actions"]=N.Handlebars.compile(de),N.TEMPLATES["_input-text"]=N.Handlebars.compile(ue),N.TEMPLATES["_input-textarea"]=N.Handlebars.compile(pe),N.TEMPLATES.account_media=N.Handlebars.compile(he),N.TEMPLATES.application=N.Handlebars.compile(fe),N.TEMPLATES.asset_upload=N.Handlebars.compile(me),N.TEMPLATES.userlink=N.Handlebars.compile(ve),N.TEMPLATES.supportlink=N.Handlebars.compile(ge),N.TEMPLATES.grouplink=N.Handlebars.compile(ye),N.TEMPLATES.cards=N.Handlebars.compile(be),N.TEMPLATES.card_access_gate=N.Handlebars.compile(we),N.TEMPLATES.card_brightcove=N.Handlebars.compile(Ee),N.TEMPLATES.card_google=N.Handlebars.compile(ke),N.TEMPLATES.card_domain_white_list=N.Handlebars.compile(xe),N.TEMPLATES.card_facebook=N.Handlebars.compile(Ce),N.TEMPLATES.card_group_members=N.Handlebars.compile(_e),N.TEMPLATES.card_subgroup=N.Handlebars.compile(Te),N.TEMPLATES.card_automated_email=N.Handlebars.compile(Se),N.TEMPLATES.card_embed_whitelist=N.Handlebars.compile(Ae),N.TEMPLATES.card_hapyak_api=N.Handlebars.compile(Pe),N.TEMPLATES.card_experience_branding=N.Handlebars.compile(Ie),N.TEMPLATES.card_manage_users=N.Handlebars.compile(Le),N.TEMPLATES.card_organization=N.Handlebars.compile(De),N.TEMPLATES.card_player=N.Handlebars.compile(Oe),N.TEMPLATES.card_plan=N.Handlebars.compile(Me),N.TEMPLATES.card_quiz=N.Handlebars.compile(Ne),N.TEMPLATES.card_playerbar=N.Handlebars.compile(Re),N.TEMPLATES.card_salesforce=N.Handlebars.compile(Ve),N.TEMPLATES.card_storage=N.Handlebars.compile(je),N.TEMPLATES.card_user=N.Handlebars.compile(He),N.TEMPLATES.card_wistia=N.Handlebars.compile(qe),N.TEMPLATES.card_workflows=N.Handlebars.compile(ze),N.TEMPLATES.card_support=N.Handlebars.compile(Fe),N.TEMPLATES.subscribe_to_automated_report_modal=N.Handlebars.compile(Be),N.TEMPLATES.embed_whitelist_modal=N.Handlebars.compile(Ue),N.TEMPLATES.report_modal=N.Handlebars.compile(We),N.TEMPLATES.config_modal=N.Handlebars.compile($e),N.TEMPLATES.config_modal_experience=N.Handlebars.compile(Ye),N.TEMPLATES.modal_link_generator=N.Handlebars.compile(Ge),N.TEMPLATES.confirm_modal=N.Handlebars.compile(Ke),N.TEMPLATES.modal=N.Handlebars.compile(Qe),N.TEMPLATES.new_project_modal=N.Handlebars.compile(Xe),N.TEMPLATES.studio=N.Handlebars.compile(Je),N.TEMPLATES.index=N.Handlebars.compile(Ze),N.TEMPLATES["project/index"]=N.Handlebars.compile(et),N.TEMPLATES["experience/index"]=N.Handlebars.compile(tt),N.TEMPLATES["template/index"]=N.Handlebars.compile(nt),N.TEMPLATES["playlist/index"]=N.Handlebars.compile(it),N.TEMPLATES.missing_404=N.Handlebars.compile(rt),N.TEMPLATES.new_experience_modal=N.Handlebars.compile(at),N.TEMPLATES["experience/edit_slidesync"]=N.Handlebars.compile(ot),N.TEMPLATES["experience/edit_slidesync_external_chapters"]=N.Handlebars.compile(st),N.TEMPLATES["experience/edit_slidesync_full_width_playlist"]=N.Handlebars.compile(lt),N.TEMPLATES["experience/edit_video_only"]=N.Handlebars.compile(ct),N.TEMPLATES["experience/edit_lesson"]=N.Handlebars.compile(dt),N.TEMPLATES["experience/edit_live"]=N.Handlebars.compile(ut),N.TEMPLATES["experience/edit_branching"]=N.Handlebars.compile(pt),N.TEMPLATES["experience/edit_single_video_landing_page"]=N.Handlebars.compile(ht),N.TEMPLATES["experience/edit_review"]=N.Handlebars.compile(ft),N.TEMPLATES["addons/slider"]=N.Handlebars.compile(mt),N.TEMPLATES["addons/slidesync_editor"]=N.Handlebars.compile(vt),N.TEMPLATES["addons/slidesync_viewer"]=N.Handlebars.compile(gt),N.TEMPLATES["addons/playlist_addon"]=N.Handlebars.compile(yt),N.TEMPLATES.new_template_modal=N.Handlebars.compile(bt),N.TEMPLATES.new_playlist_modal=N.Handlebars.compile(wt),N.TEMPLATES.pagination=N.Handlebars.compile(Et),N.TEMPLATES.profile=N.Handlebars.compile(kt),N.TEMPLATES.project=N.Handlebars.compile(xt),N.TEMPLATES.experience=N.Handlebars.compile(Ct),N.TEMPLATES.reports=N.Handlebars.compile(_t),N.TEMPLATES.sizing_modal=N.Handlebars.compile(Tt),N.TEMPLATES.template_modal=N.Handlebars.compile(St),N.TEMPLATES.users_modal=N.Handlebars.compile(At),N.TEMPLATES.subgroup_list_modal=N.Handlebars.compile(Pt),N.TEMPLATES.subgroup_creation_modal=N.Handlebars.compile(It),N.TEMPLATES.annotationEditModal=N.Handlebars.compile(Lt),N.TEMPLATES.video_upload=N.Handlebars.compile(Dt),N.TEMPLATES.offline_modal=N.Handlebars.compile(Ot),N.TEMPLATES.lti=N.Handlebars.compile(Mt),N.TEMPLATES.settings=N.Handlebars.compile(Nt),N.TEMPLATES["settings/style"]=N.Handlebars.compile(Rt),N.TEMPLATES["settings/defaults"]=N.Handlebars.compile(Vt),N.TEMPLATES["settings/integrations"]=N.Handlebars.compile(jt),N.TEMPLATES["settings/admin"]=N.Handlebars.compile(Ht),N.TEMPLATES.error_saving_modal=N.Handlebars.compile(qt),N.TEMPLATES.error_modal=N.Handlebars.compile(zt),N.TEMPLATES.html_modal=N.Handlebars.compile(Ft),N.TEMPLATES.live_stream_modal=N.Handlebars.compile(Bt),N.TEMPLATES.session_expiring_modal=N.Handlebars.compile(Qt),N.TEMPLATES.group_changed_modal=N.Handlebars.compile(Xt),N.TEMPLATES.error_overwrite_modal=N.Handlebars.compile(Ut),N.TEMPLATES.leaving_stylebuilder_modal=N.Handlebars.compile(Wt),N.TEMPLATES.group_search_modal=N.Handlebars.compile($t),N.TEMPLATES.input_modal=N.Handlebars.compile(Yt),N.TEMPLATES.upload_modal=N.Handlebars.compile(Gt),N.TEMPLATES.wa):e.Spinner=t()}(this,function(){"use strict";var f,a=["webkit","Moz","ms","O"],u={};function m(e,t){vaents.length;t++){var n,i=arguments[t];for(n in i)void 0===e[n]&&(e[n]=i[n])}return e}function g(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;r,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function r(e){if(void 0===this)return new r(e);this.opts=t(e||{},r.defaults,n)}r.defaults={},t(r.prototype,{spin:function(e){this.stop();var t,n,i,r,a,o,s,l,c,d=this,u=d.opts,p=d.el=v(m(0,{className:u.className}),{position:u.position,width:0,zIndex:u.zIndex}),h=u.radius+u.length+u.width;return e&&(e.insertBefore(p,e.firstChild||null),n=g(e),t=g(p),v(p,{left:("auto"==u.left?n.x-t.x+(e.offsetWidth>>1):(i=0,r=(u.ls;t++)y:"+t+"}h.cssRules.length),u[o]=1),o+" "+1/n.speed+"s linear 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].sth>>1,filter:n}),c("flradius=2,makeshadow=1,shadowopacity=.3)");for(n=1;n<=i.lines;n++)l(n);return p(e,s)},r.prototype.opacity=function(e,t,n,i){e=e.firstChild;i=i.shadow&&i.lines||0,e&&t+i<e.childNodes.length&&(e=(e=(e=e.childNodes[t+i])&&e.firstChild)&&e.firstChild)&&(e.opacity=n)}):f=i(e,"animation"),r}),define("remote",["require","promise!configuration","logging","lodash.noconflict"],function(e,t,c,d){"use strict";var u={},p={},h=0,f={};function l(i,e,t){var r,n=!1,a=u[i],o=this;function s(e){n||(r="function"==typeof e?e.call(o,t):e).create&&r.create.call(o,t)}function l(e){var t,n,e=e.data;if(e.startsWith?e.startsWith("hapyak"):"hapyak"===e.substr(0,6))try{t=JSON.parse(e.substr(6))}catch(e){return}if(t&&"remote"===t.event&&t.id===i&&t.state){for(n in t.state)t.state.hasOwnProperty(n)&&(void 0===t.state[n]?delete o.state[n]:o.state[n]=t.state[n]);r.update&&r.update.call(o,t.annotationId)}}this.id=++h,this.state=d.extend({},a),this.item=a,f[a.type]||(f[a.type]={}),f[a.type][this.id]=this,"string"==typeof e&&(e=docustener("message",l,!1),this.destroy=function(){n=!0,window.removeEventListener("message",l,!1),r.destroy&&r.destroy.call(this),delete f[a.type][this.id]},p[a.type]?s(p[a.type]):irequire(["remote."+a.type],s,function(e){c.error("Unable to load remote: "+a.type,e)})}return{HapyakRemote:l,registerItem:function(e){u[e.id]=e},scan:function(){for(var e,t,n,i,r,a=[],o=document.querySelectorAll("[data-hapyak-remote]"),s=0;s<o.length;s++)if(i=(n=o[s]).getAttribute("data-hapyak-remote")){if(!(r=u[i])){for(r={id:i},e=0;e<n.attributes.length;e++)((t=n.attributes[e]).name.startsWith?t.name.startsWith("data-hapyak-remote-"):"data-hapyak-remote-"===t.name.substr(0,19))&&(r[t.name.substr(19)]=t.value);u[i]=r}r&&r.type&&a.push(new l(i,n))}return a}}}),define("widget.controls.track",["jquery.noconflict","logging","bootstrap.modal"],function(o,s){"use strict";function t(e,t){e={context:"hapyak",event:e};"object"==typeof t&&(e.update=t),c.postMessage(JSON.stringify(e),"*")}var l,c,d,n,u={embedTrack:!1,newTrack:!0,copyTrack:!0,featureTrack:!1,editTrack:!1,deleteTrack:!0,order:["embedTrack","newTrack","copyTrack","featureTrack","editTrack","deleteTrack"]},p={embedTrack:{label:"Embed"},newTrack:{label:"New",classes:"hapyak-button-track-new",onClick:function(){s.info("Track controls: Create new track"),t("newTrack")}},copyTrack:{label:"Copy",classes:"hapyak-button-track-copy",onClick:function(){s.info("Track controls: Copy loaded track"),t("copyTrack")}},featureTrack:{label:"Feature"},editTrack:{label:"Edit",onClick:function(){"function"!=typeof o.fn.modal?s.warn("Track controls: Bootstrap Modal JS unavailable, cannot open edit dialog"):d&&(n||((n=o('<div class="hapyak-controls-track-modal-edit modal hide"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3>Edit Track</h3></div><div class="modal-body"><label for="hapyak-controls-track-title">Title</label><input id="hapyak-controls-track-title" name="title" type="text" /><label for="hapyak-controls-track-description">Description</label><textarea id="hapyak-controls-track-description" name="description" /></div><div class="modal-footer"><a href="#" data-dismiss="modal" class="btn">Cancel</a><a href="#" class="btn btn-primary">Update</a></div></div>').appendTo(d)).find("a.btn-primary:last"scription:n.find("#hapyak-controls-track-description").val()}),n.modal("hide")}),e()),n.modal("show"))}},deleteTrack:{label:"Delete",classes:"hapyak-button-track-delete btn-danger",onClick:function(){s.info("Track controls: Delete loaded track"),t("deleteTrack")}}};function e(e){"object"==typeof e?(s.info("Track controls: Edit loaded track",e),t("editTrack",e)):t("editTrack")}return{trackControls:function(e,t,n){var i,r,a;if(!(e instanceof HTMLElement))throw new Error("First argument in trackControls() must be an HTML element");if(l=o(e),"object"==typeof t)u=o.extend(u,t);else if(void 0!==t)throw new Error("Second argument in trackControls() must be an object");if("object"==typeof n&&"function"==typeof n.postMessage?c=n:s.debug("Third argument in trackControls() is missing postMessage method"),!u.hasOwnProperty("order")||!o.isArray(u.order))throw new Error('Option "order" for trackControls() must be an array');for(i in l.html(""),d=window.tContainer=o('<div class="hapyak-controls-track hapyak-root" />').appendTo(l),u.order)u.hasOwnProperty(u.order[i])&&(r=u.order[i],u[r]&&(a=void 0,a=p[r=r],d&&a&&"function"==typeof a.onClick&&((r=a.instance=o('<button class="'+["hapyak-controls-track-button","btn"].join(" ")+(a.classes?" "+a.classes:"")+'">'+p[r].label+"</button>").appendTo(d)).click(a.oackTitle),n.find("#hapyak-controls-track-description").val(e.trackDescription))}}});var Channel=function(){"use strict";var h=Math.floor(1000001*Math.random()),f={};function k(e){return Array.isArray?Array.isArray(e):-1!=e.constructor.toString().indexOf("Array")}function e(e){try{var t=JSON.parse(e.data);if("object"!=typeof t||null===t)throw"malformed"}catch(e){return}var n,i,r,a,o=e.source,s=e.origin;if("string"==typeof t.method&&(a=2==(r=t.method.split("::")).length?(n=r[0],r[1]):t.method),void 0!==t.id&&(i=t.id),"string"==typeof a){var l=!1;if(f[s]&&f[s][n])for(var c=0;c<f[s][n].length;c++)if(f[s][n][c].win===o){f[s][n][c].handler(s,a,t),l=!0;break}if(!l&&f["*"]&&f["*"][n])for(c=0;c<f["*"][n].length;c++)if(f["*"][n][c].win===o){f["*"][n][c].handler(s,a,t);break}}else void 0!==i&&x[i]&&x[i](s,a,t)}var x={};return window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e),{build:function(v){function g(e){if(v.debugOutput&&window.console&&window.console.log){try{"string"!=typeof e&&(e=JSON.stringify(e))}catch(e){}console.log("["+a+"] "+e)}}if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if("object"!=typeof v)throw"Channel build invoked without a proper object argument";if(!v.window||!v.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===v.window)throw"target window is same as present window -- not allowed";var e=!1;if("string"==typeof v.origin&&("*"===v.origin?e=!0:null!==(t=v.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))&&(v.origin=t[0].toLowerCase(),e=!0)),!e)throw"Channel.build() called with an invalid origin";if(void 0!==v.scope){if("string"!=typeof v.scope)throw"scope, when specified, must be a string";if(1<v.scope.split("::").length)throw"scope may not co=!1;vaor(var n=callback:e,params:t})},error:function(e,t){if(m=!0,!w[p])throw"error called for nonexistent message: "+p;delete w[p],E({id:p,error:e,message:t})},complete:function(e){if(m=!0,!w[p])throw"complete called for nonexistent message: "+p;delete w[p],E({id:p,result:e})},delayReturn:function(e){return f="boolean"==typeof e?!0===e:f},completed:funct)&&0<n.callbacks.length)for(var r=0;r<n.callbacks.length;r++){for(var a=n.callbacks[r],o=n.params,s=a.split("/"),l=0;l<s.length-1;l++){var c=s[l];"object"!=typeof o[c]&&(o[c]={}),o=o[c]}o[s[s.length-1]]=function(){var t=a;return function(e){return i.invoke(t,e)}}()}var d=y[t](i,n.params);i.delayReturn()||i.completed()||i.complete(d)}catch(t){var d="runtime_error",u=null;if("string"==typeof t?u=t:"object"==typeof t&&(t&&k(t)&&2==t.length?(d=t[0],u=t[1]):"string"==typeof t.error&&(d=t.error,t.message?"string"==typeof t.message?u=t.message:t=t.message:u="")),null===u)try{void 0===(u=JSON.stringify(t))&&(u=t.toString())}catch(e){u=t.toString()}i.error(d,u)}}}else n.id&&n.callback?b[n.id]&&b[n.id].callbacks&&b[n.id].callbacks[n.callback]?b[n.id].callbacks[n.callback](n.params):g("ignoring invalid callback, id:"+n.id+" ("+n.cte x[n.id]):g("ignoring invalid response: "+n.id):t&&y[t]&&y[t]({origin:e},n.params);var p,LMNOPQRSTUVWXYZ0123456789",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}(),y={},b={},w={},o=!1,s=[],n=v.window,t=v.origin,i="string"==typeof v.scope?v.scope:"",e=c;function r(e){for(var t=0;t<e.length;t++)if(e[t].win===n)return!0;return!1}var l=!1;if("*"===t){for(var d in f)if(f.hasOwnProperty(d)&&"*"!==d&&"object"==typeof f[d][i]&&(l=r(f[d][i])))break}else!(l=f["*"]&&f["*"][i]?r(f["*"][i]):l)&&f[t]&&f[t][i]&&(l=r(f[t][i]));if(l)throw"A channel is already bound to the same window which overlaps with origin '"+t+"' and has scope '"+i+"'";"object"!=typeof f[t]&&(f[t]={}),"object"!=typeof f[t][i]&&(f[t][i]=[]),f[t][i].push({win:n,handler:e});function u(e){return e="string"==typeof v.scope&&v.scope.length?[v.scope,e].join("::"):e}var E=function(e,t){if(!e)throw"postMessage called with null message";if(g((o?"post  ":"queue ")+" message: "+JSON.stringify(e)),t||o){if("function"==typeof v.postMessageObserver)try{v.postMan't delete method: "+e}return!1},bind:function(e,t){if(!e||"string"!=typeof e)throw"'method' argument to bind must be string";if(!t||"function"!=typeof t)throw"callback missing from bind params";if(y[e])throw"method '"+e+"' is already bound!";return y[e]=t,this},call:function(e){if(!e)throw"missing arguments to call function";if(!e.method||"string"!=typeof e.method)throw"'method' argument to call must be string";if(!e.success||"function"!=typeof e.success)throw"'success' callback missing from call";function r(e,t){if(0<=s.indexOf(t))throw"params cannot be a recursive data structure";if(s.push(t),"object"==typeof t)for(var n in t){var i;t.hasOwnProperty(n)&&(i=e+(e.length?"/":"")+n,"function"==typeof t[n]?(a[i]=t[n],o.push(i),delete t[n]):null!==t[n]&&"object"==typeof t[n]&&r(i,t[n]))}}var t,n,i,a={},o=[],s=[],l=(r("",e.params),{id:h,method:u(e.method),params:e.params});o.length&&(l.callbacks=o={callbacks:a,error:e.error,success:e.success},x[h]=c,h++,E(l)},notify:function(e){if(!e)throw"missing arguments to notify function";if(!e.method||"string"!=typeof e.method)throw"'method' argument to notify must be string";E({method:u(e.method),params:e.params})},destroy:function(){for(var e=v.window,t=v.origin,n="string"==typeof v.scope?v.scope:"",i=f[t][n],r=0;r<i.length;r++)i[r].win===e&&i.splice(r,1);0===f[t][n].length&&delete f[t][n],window.removeEventListener?window.removeEventListener("message",c,!1):window.detachEvent&&window.detachEvent("onmessage",c),o=!1,y={},w={},b={},v.origin=null,s=[],g("channel destroyed"),a=""}};return p.bind("__ready",function(e,t){if(g("ready msg received"),o)throw"received ready message while in ready state.  help!";for(a+="ping"===t?"-R":"-L",p.unbind("__ready"),o=!0,g("ready msg accepted."),"ping"===t&&p.notify({method:"__ready",params:"pong"});s.length;)E(s.pop());"function"==typeof v.onReady&&v.onReady(p)}),setTimeout(function(){E({method:u("__ready"),params:"ping"},!0)},0),p}}}();define("jschannel",function(e){return function(){return e.Channel}}(this)),!function(i,r){"use strict";var a={};(i.playerjs=a).DEBUG=!1,a.POST_MESSAGE=!!i.postMessage,a.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},a.EVENTS.all=function(){var e,t=[];for(e in a.EVENTS)a.has(a.EVENTS,e)&&a.isString(a.EVENTS[e])&&t.push(a.EVENTS[e]);return t},a.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEvenh(a.MEn(e,t,n){e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)},a.log=function(){a.log.history=a.log.history||[],a.log.history.push(arguments),i.console&&a.DEBUG&&i.console.log(Array.prototype.slice.call(argumentreturnt=functio.call(e)},abject Array]"===Object.pros.isReady=!1,this.origin=a.origin(r.referrer),this.methods={},this.supported={events:e||a.EVENTS.all(),methods:t||a.METHODS.all()},this.eventListeners={},this.reject=!(i.self!==i.top&&a.POST_MESSAGE),this.reject||a.addEvent(i,"message",function(e){n.receive(e)})},a.Receiver.prototype.receive=function(e){if(e.origin!==this.origin)return!1;var t,n={};if(a.isObject(e.data))n=e.data;else try{n=i.JSON.parse(e.data)}catch(e){a.log("JSON Parse Error",e)}return a.log("Receiver.receive",e,n),!!n.method&&(-1===a.METHODS.all().indexOf(n.method)?(this.emit("error",{code:2,msg:'Invalid Method "'+n.method+'"'}),!1):(e=a.isNone(n.listener)?null:n.listener,void("addEventListener"===n.method?(this.eventListeners.hasOwnProperty(n.value)?-1===this.eventListeners[n.value].indexOf(e)&&this.eventListeners[n.value].push(e):this.eventListeners[n.value]=[e],"ready"===n.value&&this.isReady&&this.ready()):"removeEventListener"===n.method?this.ev)))},a.Receiver.prototypif(!this.methods.hasOwnProperty(t))return this.emit("error",{code:3,msg:'Method Not Supported"'+t+'"'}),!1;var r=this.methods[t];"get"===t.substr(0,3)?r.call(this,function(e){i.send(t,e,n)}):r.call(this,e)},a.Receiver.prototype.on=function(e,t){this.methods[e]=t},a.Receiver.prototype.send=function(e,:this.origin)},a.Receiver.peventListeners[e][n];this.send(e,t,i)}return!ceiver.ready"),this.isReady=!0;var e={src:i.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",e)||this.send("ready",e)}}(window,document),define("playerjs.receiver",function(e){return function(){return e.playerjs}}(this)),define("embed",["module","promise!configuration","model","dao","utils.embed","utils.sanitizeparams","hapyak.player","logging","tracking","lodash.noconflict","jschannel","playerjs.receiver","jquery.noconflict"],function(e,r,l,c,d,u,R,p,V,h,j,H,q,f){"use strict";var t,n=hapyak.auth(),m=e.config(),e=window.location.search,v=d.getQueryParams(e,"hapyak_");try{window.top&&window.top.location&&(o=window.top.location.host,L=window.top.location.href,a=window.top.location.search)}catch(e){}L||(L=(t=document.createElement("a")).href=parent!==window?document.referrer:window.location.host,o=t.host,a=t.search),a!==e&&h.assign(v,d.getQueryParams(a,"hapyak_")),t=n.partner.userId,e=n.partner.username,a=(a=n.partner.email)||d.dotget(m,d.dotget(r,"auth.email"))||v.email,e=e||d.dotget(m,d.dotget(r,"auth.username"))||v.username||a,t=t||d.dotget(m,d.dotget(r,"auth.userId"))||v.userId||e,n=hapyak.auth({partner:{userId:t,username:e,email:a}}),t={Embedded:!0,Context:"Embedded "+(m.edit?"Editor":"Viewer"),"Logged In":!!m.user,Host:o,Href:L},r.group&&(t["Group ID"]=r.group.id,t["bc-account_id"]=r.group.id,r.group.name&&(t["Group Name"]=r.group.name),r.group.parent&&(t["Group Parent ID"]=r.group.parent),r.group.customer&&(t.Customer=r.group.customer,t.Affiliate=r.group.affiliate)),r.accountCSS&&hapyak.asset.css(r.accountCSS),m.css&&hapyak.asset.css(m.css),m.experienceData&&m.experienceData.css&&hapyak.asset.css(m.experienceData.css),m.external&&q("html").addClass("hapyak-external");var g=V.getInstance(null,!0);function y(e){!e.instanceId&&m&&(e.instanceId=m.instanceId),"function"==typeof window.postMessage&&window.parent&&window.parent.posfy(e),"*")}function b(e){x&&h.each(e,function(e){x.updateTrackEvent(e)})}g.microserviceAccessToken=m.mat,g.register(t),g.registerPartnerProperties(m.tracking),g.registerPartnerProperties(m.plugins),g.registerPartnerProperties(v),Ember.onerror=function(e){throw e};function i(e,t){var n,i=m.controls,r=t!==f,a=(a=m&&m.css)&&1<a.length?m.css[1]:"",o={context:"hapyak"};function s(){return E&&(o.videoId=E.get("id")),k&&(o.trackId=k.get("id"),o.trackTitle=k.get("title")),w&&(o.projectTitle=w.get("title"),o.projectId=w.get("id")),o}E=e,k=t,!0===i&&(i=!!(m.edit&&t&&t.get("hasEditPermission"))||"play"),m.projectId&&c.store.find(l.Project,O).onLoad(function(e){e&&(w=e,g.startProjectContext(e))}),m.ltiContext&&(g.endLTIContext(),g.startLTIContext(m.ltiContext)),m.experienceData&&(g.endExperienceContext(),g.startExperienceContext(m.experienceData)),g.startVideoContext(E,m),m.plugins&&m.plugins.remote&&h.forEach(m.plugins.remote.items,function(e){T[e.id]=e}),(x=new R(C,E,u.embed(m,{embed:!0,controlBarHeight:d.controlStyle(!0),edit:m.edit&&m.startInEditMode,contentTracks:m.contentTracks,controls:i,projectName:w?w.get("title"):"",trackInfo:!1,annotationSources:m.plugins&&m.plugins.annotationSources,keepAnnotationAspectRatio:m.keepAnnotationAspectRatio,hostWindow:window.parent,annotationBlacklist:m.annotationBlacklist,remotes:T}),m.instanceId,g)).setData("projectConfig",{css:a,title:k&&k.get("title"),image:E&&E.get("image")}),m.resetVariables&&x.on("changeTrack",function(){x.resetVariables()}),h.isEmpty(v)||(x.setData(v),(e=v.autoplay)&&"true"===e&&x.play(),v.seek&&x.currentTime(parseInt(v.seek,10))),r&&(n=[],(t=m.loadData[3])&&"Comment"===t.type&&t.data?n=t.data:p.warn("No annotations found for this track."),g.startTrackContext(k,n)),"function"==typeof window.postMessage&&(s(),y(h.extend({callback:"load"},o)),r&&(y(h.extend({callback:"loadtrack",videoTitle:E.get("title")},o)),m.createdTrack&&y(h.extend({callback:"newtrack"},o))),c.store.on("committed",function(){y(h.extend({callback:"save",status:"success"},s()))}),x.on("changeTrack",function(){var t={};s(),x.annotations().forEach(function(e){t[e.get("id")]=e.get("properties").popcorn}),o.annotations=t,y(h.extend({callback:"loadannotations"},o))}),x.on("setupannotations",function(){y(h.extend({callback:"setupannotations"},s()))}),x.on("durationchange",function(){y(h.extend({callback:"durationchange",duration:x.duration()},s()))}),x.on("authchange",function(e){y(h.extend({callback:"authchange",auth:e},o))}),x.duration()?(y(h.extend({callback:"durationchange",duration:x.duration()},o)),y(h.extend({callback:"loadedmetadata"},o))):x.on("loadedmetadata",function(e){y(h.extend({callback:"loadedmetadata",controlBarHeight:e.controlBarHeight,videoWidth:e.videoWidth,videoHeight:e.videoHeight},s()))}),x.on("canplay",function(e){y(h.extend({callback:"canplay",controlBarHeight:e.controlBarHeight,videoWidth:e.videoWidth,videoHeight:e.videoHeight,pluginData:e.pluginData},s())),window.dispatchEvent(new Event("resize")),S.ready()}),x.on("timeupdate",function(){var e=x.currentTime(),t=x.duration();y(h.extend({callback:"timeupdate",currentTime:e},o)),S.emit("timeupdate",{seconds:e,duration:t})}),x.on("play",function(){y(h.extend({callback:"play"},o)),S.emit("play")}),x.on("pause",function(){y(h.extend({callback:"pause"},o)),S.emit("pause")}),x.on("seeked",function(){y(h.extend({callback:"seeked",currentTime:x.currentTime()},o(){y(h.extend({callended")}),x.on("addstyles",function(){y(h.extend({callback:"addstyles"},o))}),x.on("removestyles",function(){y(h.extend({callback:"removestyles"},o))}),x.on("data",function(e,t){var n=h.pick(t,function(e){return e!==f}),t=h.keys(h.pick(t,function(e){return e===f}));y(h.extend({callback:"data",data:e,changes:n,removes:t},s()))}),x.on("createTrackEventSaved",function(e){y(h.extend({callback:"annotationcreated",annotation:x.annotations.get(e.get("id"))},o))}),x.on("updateTrackEvent",function(e){e=e.get("id");e&&!String(e).startsWith("_")&&y(h.extend({callback:"annotationupdated",annotation:x.annotations.get(e)},o))}),x.on("removeTrackEvent",function(e){y(h.extend({callback:"annotationremoved",annotationId:e.get("id")},o))}),x.on("annotationFocus",function(e){y(h.extend({callback:"annotationfocus",annotationId:e},o))}),x.on("annotationBlur",function(e){y(h.extend({callback:"annotationblur",annotationId:e},o))}),x.on("resized",function(e){y(h.extend({callback:"resized",width:e.width,height:e.height,videoWidth:e.videoWidth,videoHeight:e.videoHeight},o))}),x.on("conversion",function(e,t){y(h.extend({callback:"conversion",type:e,data:t},o))}),x.on("controlVisibilityChange",function(e){y(h.extend({callback:"controlvisibilitychange",visible:e},o))}),S.on("play",function(){x.){x.pause()}),S.onpaused())}),S.on("getCurrentTime",function(e){e(x"setCurrentTime",function(e){x.currentTime(e)}),S.on("getDuuration())}),S.on("getVolume",function(e){e(100*x.volume())}),S.on("setVolume",function(e){x.volume(e/100)}),S.on("mute",function(){x.mute()}),S.on("unmute",function(){x.mud",function(e){e(x.muted())}),S.on("getLoop",function(e){e(x.loop())}),S.on("setLoop",function(e){x.loop(e)})),r?(n=c.store.filter(l.Comment),x.loadTrack(k,{autoplay:m.autoplay,comments:n})):m.autoplay&&x.play(),g.playerView("Load"),h.each(_,function(e){e(x,E,k)}),c.store.on("aborted",b)}var w=null,E=null,k=null,x=null,e=window.addEventListener?"addEventListener":"attachEvent",a=window[e],o="addEventListener"==e?"message":"onmessage",C=window.document.createElement("div"),_=[],T={},S=new H.Receiver;function s(){c.store.off("aborted",b),c.store.set("shutdown",!0),c.store.commit(),x.destroy()}if(window.HapyakApp=Ember.Object.create(),n.user&&(c.store.load(l.User,n.user),c.store.find(l.User,n.user.id).onLoad(function(e){window.HapyakApp.set("currentUser",e),g.startUserContext(e),y({context:"hapyak",callback:"loadcurrentuser",userId:e.get("id"),username:e.get("username")})})),"onbeforeunload"in window?window.dow.onunload=s,m.loadData)for(var A=m.loadData,P=0;P<A.length;P++){var I=A[P];c.store.load(l[I.type],I.data)}var L,D,O=m.projectId,z=m.videoId,M=m.trackId;function N(){c.store.find(l.Video,z).onLoad(function(t){M?c.store.find(l.Track,M).onLoad(function(e){i(t,e)}):i(t)})}return O?c.store.find(l.Project,O).onLoad(function(e){m.workflow=e.get("workflow"),N()}):N(),a.call(window,o,function(e){var n,t,i=k instanceof l.Track?k.get("id"):m.trackId;try{if("hapyak"!==(n=JSON.parse(e.data)).context)return}catch(e){return}"saveTrack"===n.event?c.store.commit(function(){var e={context:"hapyak",callback:"save",status:"success",trackId:i};n.callbackIndex&&(e.callbackIndex=n.callbackIndex),y(e)}):"newTrack"===n.event||"copyTrack"===n.event?r.provisioning.multitrack?(e=function(e){var t="newTrack"===n.event?e.createTrack():e.copyTrack();t.onSave(function(){var e={context:"hapyak",callback:"newtrack",status:"success",trackId:t.get("id")};k=t,n.callbackIndex&&(e.callbackIndex=n.callbackIndex),y(e),g.endTrackContext(),g.startTrackContext(t),g.playerView("Load")})},x?e(x,E,k):_.push(e)):p.warn('Missing "multitrack" provisioning to create & copy tracks'):"editTrack"===n.event?r.provisioning.multitrack?(t={context:"hapyak",callback:"edittrack",status:"success"},"object"==typeof n.update?x.editTrack(n.update).onSave(function(e){n.callbackIndex&&(t.callbackIndex=n.callbackIndex),t.trackId=e.get("id"),t.trackTitle=e.get("title"),t.trackDescription=e.get("description"),y(t)}):(t.trackId=k.get("id"),t.trackTitle=k.get("title"),t.trackDescription=k.get("description"),y(t))):p.warn('Missing "multitrack" provisioning to edit tracks'):"deleteTrack"===n.event?r.provisioning.multitrack?x.deleteTrack(function(e){e={context:"harack",status:"success",trackId:e};n.callbackIndex&&(e.callbackIndex=n.callbackIndex),y(e),g.endTrackContext()}):p.warn('Missing "multitrack" provisioning to delete tracks'):"destroy"===n.event?s():"setRemotes"===n.event?(h.forEach(n.remotes,function(e){T[e.id]=e}),x.setRemotes(T)):"resize"===n.event?x.resize(n.width,n.height,n.sync):"resetVariables"===n.event?x.resetVariables():"setData"===n.event?x.setData(n.data):"play"===n.event?x.play():"pause"===n.event?x.pause():"currentTime"===n.event?x.currentTime(n.currentTime):"aspectRatio"===n.event?x.aspectRatio(n.aspectRatio):"annotations.remove"===n.event?n.id&&x.annotations.remove(n.id,n.properties,function(e){y({context:"hapyak",callback:"annotations.remove",callbackIndex:n.callbackIndex,trackId:i,annotationId:e})}):"shoions(n.show,n.annotationTy&&((L=j.build({window:window.parent,origin:"*",scope:"hapyak"})).bind("annotations.all",function(e,t){return x.annotations.all(t)}),L.bind("controls.status",function(e){e.complete(x.controls())}),L.bind("annotations.get",function(e,t){return x.annotations.get(t)}),L.bind("transaction.start",function(e,t){p.debug("starting transaction"),D=c.store.startTransaction()}),L.bind("transaction.c.debug("committing transaction"),D.commit(function(){e.complete()})):(p.debug("committing transaction [skipped]"),e.complete()),D=null,e.delayReturn(!0)}),L.bind("transaction.abort",function(e,t){D?(p.debug("aborting transaction"),D.abort(function(){e.complete()})):(p.debug("aborting transaction [skipped]"),e.complete()),D=null,e.delayReturn(!0)}),L.bind("annotations.create",function(t,e){x.annotations.create(e.type,e.properties,function(e){t.complete(e)}),t.delayReturn(!0)}),L.bind("annotations.update",function(t,e){x.annotations.update(e.id,e.properties,function(e){t.complete(e)}),t.delayReturn(!0)}),L.bind("annotations.remove",function(t,e){x.annotations.remove(e,function(e){t.complete(e)}),t.delayReturn(!0)}),L.bind("annotations.types",function(t){x.annotations.types(function(e){t.complete(e)}),t.delayReturn(!0)}),L.bind("annotations.normalize",function(t,e){x.annotationlue,e.dictionary,function(e){t.complete(e)}),t.delayReturn(!0)}),L.bind("annotations.focus",function(t,e){x.annotations.focus(e,function(e){t.complete(e)}),t.delayReturn(!0)}),L.bind("annotations.blur",function(t,e){x.annotations.blur(e,function(e){t.complete(e)}),t.delayReturn(!0)})),C});