"use strict";(window.webpackChunkNRBA=window.webpackChunkNRBA||[]).push([[860],{3860:(t,e,n)=>{n.d(e,{IK:()=>g,wO:()=>b,$s:()=>E});var r=n(4402),i=n(50),s=n(4351),o=n(2177);class a{constructor(t,e){if(!t.onEnd)throw new Error("onEnd handler is required");if(!e)throw new Error("ms duration is required");this.onEnd=t.onEnd,this.initialMs=e,this.startTimestamp=Date.now(),this.timer=this.create(this.onEnd,e)}create(t,e){return this.timer&&this.clear(),setTimeout((()=>t?t():this.onEnd()),e||this.initialMs)}clear(){clearTimeout(this.timer),this.timer=null}end(){this.clear(),this.onEnd()}isValid(){return this.initialMs-(Date.now()-this.startTimestamp)>0}}var c=n(385),u=n(7056),h=n(7956),l=n(7872);class f extends a{constructor(t,e){super(t,e),this.onPause="function"==typeof t.onPause?t.onPause:()=>{},this.onRefresh="function"==typeof t.onRefresh?t.onRefresh:()=>{},this.onResume="function"==typeof t.onResume?t.onResume:()=>{},this.remainingMs=void 0,t.refreshEvents||(t.refreshEvents=["click","keydown","scroll"]);try{this.abortController=new AbortController}catch(t){}if(c.il&&t.ee){if(t.ee){const e=(0,l.D)(this.refresh.bind(this),500,{leading:!0});t.ee.on("fn-end",(n=>{t.refreshEvents.includes(n?.[0]?.type)&&e()}))}(0,h.N)((t=>{"hidden"===t?this.pause():(this.refresh(),this.onResume())}),!1,!1,this.abortController?.signal)}}abort(){this.clear(),this.abortController?.abort()}pause(){this.onPause(),clearTimeout(this.timer),this.remainingMs=this.initialMs-(Date.now()-this.startTimestamp)}refresh(t,e){this.clear(),this.timer=this.create(t,e),this.startTimestamp=Date.now(),this.remainingMs=void 0,this.onRefresh()}}var d=n(1214),p=n(9567),m=n(5546),v=n(3081),y=n(3325);const g={OFF:0,FULL:1,ERROR:2},w={value:"",inactiveAt:0,expiresAt:0,updatedAt:Date.now(),sessionReplay:g.OFF,sessionTraceMode:g.OFF,custom:{}},b={PAUSE:"session-pause",RESET:"session-reset",RESUME:"session-resume"};class E{constructor(t){this.setup(t)}setup(t){let{agentIdentifier:e,key:n,storage:i,value:s=(0,r.ky)(16),expiresMs:c=u.oD,inactiveMs:h=u.Hb}=t;if(!e||!n||!i)throw new Error("Missing required field(s):".concat(e?"":" agentID").concat(n?"":" key").concat(i?"":" storage"));this.agentIdentifier=e,this.storage=i,this.state={},this.sync(w),this.key=n,this.state.value=s,this.expiresMs=c,this.inactiveMs=h,this.ee=o.ee.get(e),(0,d.em)(this.ee);const l=this.read();c?(this.state.expiresAt=l?.expiresAt||this.getFutureTimestamp(c),this.expiresTimer=new a({onEnd:()=>{this.collectSM("expired",this),this.collectSM("duration",this),this.reset()}},this.state.expiresAt-Date.now())):this.state.expiresAt=1/0,h?(this.state.inactiveAt=l?.inactiveAt||this.getFutureTimestamp(h),this.inactiveTimer=new f({onEnd:()=>{this.collectSM("inactive",this),this.collectSM("duration",this),this.reset()},onRefresh:this.refresh.bind(this),onResume:()=>{this.ee.emit(b.RESUME)},onPause:()=>{this.initialized&&this.ee.emit(b.PAUSE),this.write((0,p.D)(this.state,w))},ee:this.ee,refreshEvents:["click","keydown","scroll"]},this.state.inactiveAt-Date.now())):this.state.inactiveAt=1/0,void 0===this.isNew&&(this.isNew=!Object.keys(l).length),this.isNew?this.write((0,p.D)(this.state,w),!0):this.sync(l),this.initialized=!0}get lookupKey(){return"".concat(u.Bq,"_").concat(this.key)}sync(t){Object.assign(this.state,t)}read(){try{const t=this.storage.get(this.lookupKey);if(!t)return{};const e="string"==typeof t?JSON.parse(t):t;return this.isInvalid(e)?{}:this.isExpired(e.expiresAt)?(this.collectSM("expired",this),this.collectSM("duration",e,!0),this.reset()):this.isExpired(e.inactiveAt)?(this.collectSM("inactive",this),this.collectSM("duration",e,!0),this.reset()):e}catch(t){return(0,i.Z)("Failed to read from storage API",t),{}}}write(t){try{if(!t||"object"!=typeof t)return;return t.updatedAt=Date.now(),this.sync(t),this.storage.set(this.lookupKey,(0,s.P)(this.state)),t}catch(t){return(0,i.Z)("Failed to write to the storage API",t),null}}reset(){try{return this.initialized&&this.ee.emit(b.RESET),this.storage.remove(this.lookupKey),this.inactiveTimer?.abort?.(),this.expiresTimer?.clear?.(),delete this.isNew,this.setup({agentIdentifier:this.agentIdentifier,key:this.key,storage:this.storage,expiresMs:this.expiresMs,inactiveMs:this.inactiveMs}),this.read()}catch(t){return{}}}refresh(){const t=this.read();this.write({...t,inactiveAt:this.getFutureTimestamp(this.inactiveMs)})}isExpired(t){return Date.now()>t}isInvalid(t){return!Object.keys(w).every((e=>Object.keys(t).includes(e)))}collectSM(t,e,n){let r,i;if("duration"===t){const t=e.expiresAt-e.expiresMs;r=(n?e.updatedAt:Date.now())-t,i="Session/Duration/Ms"}"expired"===t&&(i="Session/Expired/Seen"),"inactive"===t&&(i="Session/Inactive/Seen"),i&&(0,m.p)(v.xS,[i,r],void 0,y.D.metrics,this.ee)}getFutureTimestamp(t){return Date.now()+t}syncCustomAttribute(t,e){if(c.il)if(null===e){const e=this.read();e.custom&&(delete e.custom[t],this.write({...e}))}else{const n=this.read();this.custom={...n?.custom||{},[t]:e},this.write({...n,custom:this.custom})}}}},7872:(t,e,n)=>{function r(t){var e=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=r?.leading||!1;let s;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];i&&void 0===s&&(t.apply(e,o),s=setTimeout((()=>s=clearTimeout(s)),n)),i||(clearTimeout(s),s=setTimeout((()=>{t.apply(e,o)}),n))}}function i(t){var e=this;let n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];t.apply(e,i)}}}n.d(e,{D:()=>r,Z:()=>i})},1214:(t,e,n)=>{n.d(e,{em:()=>y,u5:()=>j,QU:()=>O,_L:()=>L,Gm:()=>$,Lg:()=>_,gy:()=>H,BV:()=>V,Kf:()=>tt});var r=n(2177);const i="nr@original";var s=Object.prototype.hasOwnProperty,o=!1;function a(t,e){return t||(t=r.ee),n.inPlace=function(t,e,r,i,s){r||(r="");var o,a,c,u="-"===r.charAt(0);for(c=0;c<e.length;c++)h(o=t[a=e[c]])||(t[a]=n(o,u?a+r:r,i,a,s))},n.flag=i,n;function n(e,n,r,o,a){return h(e)?e:(n||(n=""),nrWrapper[i]=e,u(e,nrWrapper,t),nrWrapper);function nrWrapper(){var i,u,h,l;try{u=this,i=[...arguments],h="function"==typeof r?r(i,u):r||{}}catch(e){c([e,"",[i,u,o],h],t)}s(n+"start",[i,u,o],h,a);try{return l=e.apply(u,i)}catch(t){throw s(n+"err",[i,u,t],h,a),t}finally{s(n+"end",[i,u,l],h,a)}}}function s(n,r,i,s){if(!o||e){var a=o;o=!0;try{t.emit(n,r,i,e,s)}catch(e){c([e,n,r,i],t)}o=a}}}function c(t,e){e||(e=r.ee);try{e.emit("internal-error",t)}catch(t){}}function u(t,e,n){if(Object.defineProperty&&Object.keys)try{return Object.keys(t).forEach((function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})})),e}catch(t){c([t],n)}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return e}function h(t){return!(t&&t instanceof Function&&t.apply&&!t[i])}var l=n(2210),f=n(385);const d={},p=XMLHttpRequest,m="addEventListener",v="removeEventListener";function y(t){var e=function(t){return(t||r.ee).get("events")}(t);if(d[e.debugId]++)return e;d[e.debugId]=1;var n=a(e,!0);function i(t){n.inPlace(t,[m,v],"-",s)}function s(t,e){return t[1]}return"getPrototypeOf"in Object&&(f.il&&g(document,i),g(f._A,i),g(p.prototype,i)),e.on(m+"-start",(function(t,e){var r=t[1];if(null!==r&&("function"==typeof r||"object"==typeof r)){var i=(0,l.X)(r,"nr@wrapped",(function(){var t={object:function(){if("function"!=typeof r.handleEvent)return;return r.handleEvent.apply(r,arguments)},function:r}[typeof r];return t?n(t,"fn-",null,t.name||"anonymous"):r}));this.wrapped=t[1]=i}})),e.on(v+"-start",(function(t){t[1]=this.wrapped||t[1]})),e}function g(t,e){let n=t;for(;"object"==typeof n&&!Object.prototype.hasOwnProperty.call(n,m);)n=Object.getPrototypeOf(n);for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];n&&e(n,...i)}var w="fetch-",b=w+"body-",E=/^(352|6)$/.test(n.j)?null:["arrayBuffer","blob","json","text","formData"],x=f._A.Request,A=f._A.Response,M="prototype",P="nr@context";const I={};function j(t){const e=function(t){return(t||r.ee).get("fetch")}(t);if(!(x&&A&&f._A.fetch))return e;if(I[e.debugId]++)return e;function n(t,n,r){var i=t[n];"function"==typeof i&&(t[n]=function(){var t,n=[...arguments],s={};e.emit(r+"before-start",[n],s),s[P]&&s[P].dt&&(t=s[P].dt);var o=i.apply(this,n);return e.emit(r+"start",[n,t],o),o.then((function(t){return e.emit(r+"end",[null,t],o),t}),(function(t){throw e.emit(r+"end",[t],o),t}))})}return I[e.debugId]=1,E.forEach((t=>{n(x[M],t,b),n(A[M],t,b)})),n(f._A,"fetch",w),e.on(w+"end",(function(t,n){var r=this;if(n){var i=n.headers.get("content-length");null!==i&&(r.rxSize=i),e.emit(w+"done",[null,n],r)}else e.emit(w+"done",[t],r)})),e}const R={},k=/^(352|6)$/.test(n.j)?null:["pushState","replaceState"];function O(t){const e=function(t){return(t||r.ee).get("history")}(t);return!f.il||R[e.debugId]++||(R[e.debugId]=1,a(e).inPlace(window.history,k,"-")),e}var S=n(3239);const T={},D=/^(364|953)$/.test(n.j)?["appendChild","insertBefore","replaceChild"]:null;function L(t){const e=function(t){return(t||r.ee).get("jsonp")}(t);if(!f.il||T[e.debugId])return e;T[e.debugId]=!0;var n=a(e),i=/[?&](?:callback|cb)=([^&#]+)/,s=/(.*)\.([^.]+)/,o=/^(\w+)(\.|$)(.*)$/;function c(t,e){var n=t.match(o),r=n[1],i=n[3];return i?c(i,e[r]):e[r]}return n.inPlace(Node.prototype,D,"dom-"),e.on("dom-start",(function(t){!function(t){if(!t||"string"!=typeof t.nodeName||"script"!==t.nodeName.toLowerCase())return;if("function"!=typeof t.addEventListener)return;var r=(o=t.src,a=o.match(i),a?a[1]:null);var o,a;if(!r)return;var u=function(t){var e=t.match(s);if(e&&e.length>=3)return{key:e[2],parent:c(e[1],window)};return{key:t,parent:window}}(r);if("function"!=typeof u.parent[u.key])return;var h={};function l(){e.emit("jsonp-end",[],h),t.removeEventListener("load",l,(0,S.m$)(!1)),t.removeEventListener("error",f,(0,S.m$)(!1))}function f(){e.emit("jsonp-error",[],h),e.emit("jsonp-end",[],h),t.removeEventListener("load",l,(0,S.m$)(!1)),t.removeEventListener("error",f,(0,S.m$)(!1))}n.inPlace(u.parent,[u.key],"cb-",h),t.addEventListener("load",l,(0,S.m$)(!1)),t.addEventListener("error",f,(0,S.m$)(!1)),e.emit("new-jsonp",[t.src],h)}(t[0])})),e}var C=n(5763);const F={};function $(t){const e=function(t){return(t||r.ee).get("mutation")}(t);if(!f.il||F[e.debugId])return e;F[e.debugId]=!0;var n=a(e),i=C.Yu.MO;return i&&(window.MutationObserver=function(t){return this instanceof i?new i(n(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype),e}const N={};function _(t){const e=function(t){return(t||r.ee).get("promise")}(t);if(N[e.debugId])return e;N[e.debugId]=!0;var n=r.c,s=a(e),o=C.Yu.PR;return o&&function(){function t(n){var r=e.context(),i=s(n,"executor-",r,null,!1);const a=Reflect.construct(o,[i],t);return e.context(a).getCtx=function(){return r},a}f._A.Promise=t,Object.defineProperty(t,"name",{value:"Promise"}),t.toString=function(){return o.toString()},Object.setPrototypeOf(t,o),["all","race"].forEach((function(n){const r=o[n];t[n]=function(t){let i=!1;[...t||[]].forEach((t=>{this.resolve(t).then(o("all"===n),o(!1))}));const s=r.apply(this,arguments);return s;function o(t){return function(){e.emit("propagate",[null,!i],s,!1,!1),i=i||!t}}}})),["resolve","reject"].forEach((function(n){const r=o[n];t[n]=function(t){const n=r.apply(this,arguments);return t!==n&&e.emit("propagate",[t,!0],n,!1,!1),n}})),t.prototype=o.prototype;const r=o.prototype.then;o.prototype.then=function(){var t=this,i=n(t);i.promise=t;for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];a[0]=s(a[0],"cb-",i,null,!1),a[1]=s(a[1],"cb-",i,null,!1);const u=r.apply(this,a);return i.nextPromise=u,e.emit("propagate",[t,!0],u,!1,!1),u},o.prototype.then[i]=r,e.on("executor-start",(function(t){t[0]=s(t[0],"resolve-",this,null,!1),t[1]=s(t[1],"resolve-",this,null,!1)})),e.on("executor-err",(function(t,e,n){t[1](n)})),e.on("cb-end",(function(t,n,r){e.emit("propagate",[r,!0],this.nextPromise,!1,!1)})),e.on("propagate",(function(t,n,r){this.getCtx&&!n||(this.getCtx=function(){if(t instanceof Promise)var n=e.context(t);return n&&n.getCtx?n.getCtx():this})}))}(),e}const q={},B="requestAnimationFrame";function H(t){const e=function(t){return(t||r.ee).get("raf")}(t);if(!f.il||q[e.debugId]++)return e;q[e.debugId]=1;var n=a(e);return n.inPlace(window,[B],"raf-"),e.on("raf-start",(function(t){t[0]=n(t[0],"fn-")})),e}const K={},U="setTimeout",X="setInterval",Y="clearTimeout",z="-start",W="-",Z=[U,"setImmediate",X,Y,"clearImmediate"];function V(t){const e=function(t){return(t||r.ee).get("timer")}(t);if(K[e.debugId]++)return e;K[e.debugId]=1;var n=a(e);return n.inPlace(f._A,Z.slice(0,2),U+W),n.inPlace(f._A,Z.slice(2,3),X+W),n.inPlace(f._A,Z.slice(3),Y+W),e.on(X+z,(function(t,e,r){t[0]=n(t[0],"fn-",null,r)})),e.on(U+z,(function(t,e,r){this.method=r,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=n(t[0],"fn-",this,r)})),e}if(!/^(352|6)$/.test(n.j))var G=n(50);const J={},Q=/^(352|6)$/.test(n.j)?null:["open","send"];function tt(t){var e=t||r.ee;const n=function(t){return(t||r.ee).get("xhr")}(e);if(J[n.debugId]++)return n;J[n.debugId]=1,y(e);var i=a(n),s=C.Yu.XHR,o=C.Yu.MO,c=C.Yu.PR,u=C.Yu.SI,h="readystatechange",l=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],d=[],p=f._A.XMLHttpRequest.listeners,m=f._A.XMLHttpRequest=function(t){var e=new s(t);function r(){try{n.emit("new-xhr",[e],e),e.addEventListener(h,g,(0,S.m$)(!1))}catch(t){(0,G.Z)("An error occured while intercepting XHR",t);try{n.emit("internal-error",[t])}catch(t){}}}return this.listeners=p?[...p,r]:[r],this.listeners.forEach((t=>t())),e};function v(t,e){i.inPlace(e,["onreadystatechange"],"fn-",A)}function g(){var t=this,e=n.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,n.emit("xhr-resolved",[],t)),i.inPlace(t,l,"fn-",A)}if(function(t,e){for(var n in t)e[n]=t[n]}(s,m),m.prototype=s.prototype,i.inPlace(m.prototype,Q,"-xhr-",A),n.on("send-xhr-start",(function(t,e){v(t,e),function(t){d.push(t),o&&(w?w.then(x):u?u(x):(b=-b,E.data=b))}(e)})),n.on("open-xhr-start",v),o){var w=c&&c.resolve();if(!u&&!c){var b=1,E=document.createTextNode(b);new o(x).observe(E,{characterData:!0})}}else e.on("fn-end",(function(t){t[0]&&t[0].type===h||x()}));function x(){for(var t=0;t<d.length;t++)v(0,d[t]);d.length&&(d=[])}function A(t,e){return e}return n}}}]);