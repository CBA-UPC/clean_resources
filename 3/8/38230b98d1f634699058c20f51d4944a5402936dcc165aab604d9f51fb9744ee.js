;
(self.AMP=self.AMP||[]).push({m:0,v:"2312191621000",n:"amp-audio",ev:"0.1",l:!0,f:function(t,n){!function(){o=Array.isArray;r f=Object.prototype,c=(f.hasOwnProperty,f.toString);ar l,h="nodisplay";=["Webkit","webkit","Moz","moz","ms","O","o"];var w=function j(t,n){var r,i=(r=new Promise(());return i.catch((),i}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var g=self.__AMP_LOG;tion M(t,n,r,i){return function(t,n,r,i){var e=t,o=r,u=a=),f=!(null==i||!i.capture);return e.addEventListener(n,u,a?i:f),(t,n,r,i)}var N,Y,D={"title":"","artist":"","album":"","artwork":[{"src":""}]},F=);function J(t){return"https:"==(t=function(t){return"string"==typeof t?function(t,n){return N||(N=self.document.createElement("a"),Y=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new F(100))),N,t,Y)}(t):t}(t)).protocol||"localhost"==t.hostname||"127.0.0.1"==t.hostname||(r=".localhost",(i=(n=t.hostname).length-r.length)>=0&&n.indexOf(r,i)==i);var n,r,i}ar W=function(t){!f,t);var i,u,a=(i=f,u=),;function f(t){var n;return(n=a.call(this,t)).ty=null,n.ny=D,n.isPlaying=!1,n}var d=f.prototype;return d.isLayoutSupported=function(t){return t)||"container"==t},d.buildCallback=function(){this.getLayout()===h&&(this.element.removeAttribute("autoplay"),this.buildAudioElement()),this.element.classList.add("i-amphtml-media-component"),this.registerAction("play",this.iy.bind(this)),this.registerAction("pause",this.ey.bind(this))},d.mutatedAttributesCallback=function(t){if(this.ty){var n=t.src,r=t.controlsList,i=t.loop;void 0===n&&void 0===r&&void 0===i||(void 0!==n&&U(n,this.element),v(["src","loop","controlsList"],this.element,this.ty));var e=t.artist,o=t.title,u=t.album,a=t.artwork;void 0===e&&void 0===o&&void 0===u&&void 0===a||this.oy()}},d.buildAudioElement=function(){var t,n=this,r=this.element.querySelector("audio");if(r||(r=this.element.ownerDocument.createElement("audio"),this.element.appendChild(r)),r.play){r.controls=!0,function(t,n,r,i,e){var o=t.style,n,e);if(o){var u,a=i?r+i:r;t.style.setProperty((u=o.replace(/[A-Z]/g,(),m.some(()?"-".concat(u):u),a)}}(r,"width","100%");var i=this.uy("src");i&&U(i,this.element),v(["src","preload","autoplay","muted","loop","aria-label","aria-describedby","aria-labelledby","controlsList"],this.element,r),r.classList.add("i-amphtml-fill-content"),(t=this.element,function(t,n){for(var r=[],i=t.firstChild;i;i=i.nextSibling)u=void 0,a=void 0,"string"==typeof(o=e=i)?u=o:1==(null==(a=o)?void 0:a.nodeType)&&(u=o.tagName),!(u&&u.toLowerCase().startsWith("i-")||e.nodeType===Node.ELEMENT_NODE&&(e.hasAttribute("placeholder")||e.hasAttribute("fallback")||e.hasAttribute("overflow")))&&r.push(i);var e,o,u,a;return r}(t)).forEach((function(t){t!==r&&(t.getAttribute&&t.getAttribute("src")&&U(t.getAttribute("src"),t),r.appendChild(t))})),this.ty=r,M(this.ty,"playing",(),M(this.ty,"play",(function(){return C(n.element,"audio-play")})),M(this.ty,"pause",()}else this.toggleFallback(!0)},d.layoutCallback=function(){return this.getLayout()!==h&&this.buildAudioElement(),this.oy(),"none"===this.element.getAttribute("preload")?this.ty:this.loadPromise(this.ty)},d.oy=function(){var t,n,r,i=this.getAmpDoc().win.document,e=this.uy("artist")||"",o=this.uy("title")||this.uy("aria-label")||i.title||"",u=this.uy("album")||"",a=this.uy("artwork")||function(t){var n=t.querySelector('script[type="application/ld+json"]');if(n){var r=n.textContent);if(r&&r.image)return"string"==typeof r.image?r.image:r.image["@list"]&&"string"==typeof r.image["@list"][0]?r.image["@list"][0]:"string"==typeof r.image.url?r.image.url:"string"==typeof r.image[0]?r.image[0]:void 0}}(i)||((t=i.querySelector('meta[property="og:image"]'))?t.getAttribute("content"):void 0)||((r=(n=i).querySelector('link[rel="shortcut icon"]')||n.querySelector('link[rel="icon"]'))?r.getAttribute("href"):void 0)||"";this.ny={title:o,artist:e,album:u,artwork:[{src:a}]}},d.renderOutsideViewport=d.uy=d.pauseCallback=d.hy=d.ey=function(){this.hy()&&(this.ty.pause(),this.ly(!1))},d.iy=function(){this.hy()&&(j(this.ty),this.ly(!0))},d.ly=d.sy=function(){var t,n,r,i=this;(function(t,n){var r=function(t){return T(n=x(R(t)),"url")?P(n,"url"):null;var n}(t);if(n&&n.artwork){var i=n.artwork;S(o(i)),i.forEach(()}})(this.element,this.ny),t=this.win,n=this.ny,"mediaSession"in(r=t.navigator)&&t.MediaMetadata&&(r.mediaSession.metadata=new t.MediaMetadata(D),r.mediaSession.metadata=new t.MediaMetadata(n),r.mediaSession.setActionHandler("play",(),r.mediaSession.setActionHandler("pause",())},f}(t.BaseElement);t.registerElement("amp-audio",W)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-audio-0.1.js.map