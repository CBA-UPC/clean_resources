(self.webpackChunkrelap_widgets=self.webpackChunkrelap_widgets||[]).push([[42945],{96751:(e,t,i)=>{var n=i(32747);function r(e){return n.createElement("svg",e,n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.75592 1.18399C4.59351 -0.249082 6.18053 0.00381261 6.93228 1.68978C8.43577 4.72451 9.52162 6.24188 8.43577 7.42206C6.43111 8.77083 5.01115 9.44522 5.7629 10.8783C7.26639 14.5031 10.1898 17.6221 13.698 19.4767C15.0344 20.3197 15.7862 18.8866 17.2897 17.0321C18.5426 16.0205 19.9625 17.1164 22.886 18.8866C24.473 19.8139 24.5565 21.3313 23.053 23.1015C14.2827 33.0487 -7.68499 9.36092 2.75592 1.18399Z",fill:"currentColor"}))}r.defaultProps={width:"25",height:"26",viewBox:"0 0 25 26",fill:"none"},e.exports=r,r.default=r},17014:(e,t,i)=>{var n=i(32747);function r(e){return n.createElement("svg",e,[n.createElement("defs",{key:0},n.createElement("style",null,".relap-logo-small-icon{fill:currentColor;}")),n.createElement("title",{key:1}),n.createElement("path",{className:"relap-logo-small-icon",d:"M32,28.9a3.08,3.08,0,0,1-6.054.822H6.054a3.079,3.079,0,1,1-3.786-3.783V6.062a3.09,3.09,0,1,1,1.644,0V24.771L11.076,7.487a3.506,3.506,0,1,1,1.52.626L5.428,25.4,18.67,12.17a3.05,3.05,0,0,1-.412-1.514,3.126,3.126,0,1,1,1.577,2.675L6.59,26.562l17.3-7.16a3.039,3.039,0,0,1-.038-.375,3.12,3.12,0,1,1,.666,1.892l-17.3,7.159H25.946A3.08,3.08,0,0,1,32,28.9Z",key:2})])}r.defaultProps={viewBox:"0 0 32 32",width:"11",height:"16"},e.exports=r,r.default=r},93588:(e,t,i)=>{var n=i(32747);function r(e){return n.createElement("svg",e,n.createElement("circle",{cx:"44",cy:"44",r:"20.2",fill:"none",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round"}))}r.defaultProps={viewBox:"22 22 44 44"},e.exports=r,r.default=r},47189:(e,t,i)=>{var n=i(32747);function r(e){return n.createElement("svg",e,[n.createElement("defs",{key:0},n.createElement("style",null,".no-img-a{fill:#fff;}.no-img-b{fill:#e7eaea;}")),n.createElement("title",{key:1},"no_img"),n.createElement("path",{className:"no-img-a",d:"M3.926,5.042A1.081,1.081,0,0,1,5.045,3.929q24.456.011,48.911.006a1.018,1.018,0,0,1,1.082.774,1.114,1.114,0,0,1,.018.24c-.035,0-.063-.013-.1-.013q-24.456,0-48.911-.006A1.081,1.081,0,0,0,4.926,6.042s.008,27.172.009,37.092c0,.042.006.082.007.124a1,1,0,0,1-.987-.788,1.608,1.608,0,0,1-.02-.336C3.934,32.214,3.945,7.485,3.926,5.042ZM60,6.039c0-.075,0-.151,0-.226a4.794,4.794,0,0,0-1.94-3.789,4.893,4.893,0,0,1,.94,2.789c0,.075,0,.15,0,.226Q59,23.6,59,42.165a4.881,4.881,0,0,1-1.238,3.364,4.828,4.828,0,0,1-3.6,1.67H4.973a4.972,4.972,0,0,1-3-.994,4.925,4.925,0,0,0,4,1.994H55.16a4.828,4.828,0,0,0,3.6-1.67A4.881,4.881,0,0,0,60,43.165Q59.993,24.6,60,6.039ZM52.13,40.329s0-9.135,0-13.625a.367.367,0,0,0-.1-.234l-1-1a.367.367,0,0,1,.1.234l0,13.625H7.866l1,1ZM13.758,19.67A5.881,5.881,0,0,1,10.127,18.4,5.893,5.893,0,1,0,18.41,10.14a5.845,5.845,0,0,1,1.255,3.647A5.912,5.912,0,0,1,13.758,19.67Z",key:2}),n.createElement("path",{className:"no-img-b",d:"M53.921,0a4.908,4.908,0,0,1,2.714.724,4.84,4.84,0,0,1,2.36,4.089c0,.075,0,.15,0,.226Q59,23.6,59,42.165a4.879,4.879,0,0,1-1.237,3.364,4.828,4.828,0,0,1-3.6,1.67c-.043,0-.086,0-.129,0H4.973A4.925,4.925,0,0,1,.247,43.819,4.58,4.58,0,0,1,0,42.413c0-.075,0-.15,0-.226Q0,23.6,0,5.013a4.845,4.845,0,0,1,1.7-3.8A4.908,4.908,0,0,1,5.072,0Zm.041,43.266a1.475,1.475,0,0,0,.288-.018,1.012,1.012,0,0,0,.815-1.063V5.06a1.535,1.535,0,0,0-.026-.352,1.018,1.018,0,0,0-1.082-.774q-24.456,0-48.911-.006A1.081,1.081,0,0,0,3.926,5.042l.009,37.092a1.623,1.623,0,0,0,.02.336,1.013,1.013,0,0,0,1.047.8ZM51.126,25.7a.367.367,0,0,0-.1-.234L38.348,12.791,22.61,28.526l-4.915-4.915-9.715,9.7a.36.36,0,0,0-.116.281l0,5.736H51.13ZM19.665,13.787a5.9,5.9,0,1,0-5.907,5.883A5.9,5.9,0,0,0,19.665,13.787Z",key:3})])}r.defaultProps={viewBox:"0 0 60 48.2"},e.exports=r,r.default=r},68788:(e,t,i)=>{var n=i(32747);function r(e){return n.createElement("svg",e,n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29289 16.7071C6.90237 16.3166 6.90237 15.6834 7.29289 15.2929L10.5858 12L7.29289 8.70711C6.90237 8.31658 6.90237 7.68342 7.29289 7.29289C7.68342 6.90237 8.31658 6.90237 8.70711 7.29289L12 10.5858L15.2929 7.29289C15.6834 6.90237 16.3166 6.90237 16.7071 7.29289C17.0976 7.68342 17.0976 8.31658 16.7071 8.70711L13.4142 12L16.7071 15.2929C17.0976 15.6834 17.0976 16.3166 16.7071 16.7071C16.3166 17.0976 15.6834 17.0976 15.2929 16.7071L12 13.4142L8.70711 16.7071C8.31658 17.0976 7.68342 17.0976 7.29289 16.7071Z",fill:"currentColor"}))}r.defaultProps={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e.exports=r,r.default=r},74618:(e,t,i)=>{var n=i(32747);function r(e){return n.createElement("svg",e,[n.createElement("defs",{key:0},n.createElement("style",null,".collapse-a{opacity:0.3;}.collapse-b{fill:#fff;}")),n.createElement("title",{key:1},"collapse"),n.createElement("path",{className:"collapse-a",d:"M2.361.232.238,2.353,4.879,7,.232,11.64l2.121,2.121L7,9.121l4.64,4.646,2.123-2.12L9.121,7,13.768,2.36,11.647.239,7,4.879,2.361.232Z",key:2}),n.createElement("polyline",{className:"collapse-b",points:"2.36 1.646 7 6.293 11.646 1.652 12.354 2.359 7.707 7.001 12.348 11.646 11.64 12.354 7 7.707 2.354 12.348 1.646 11.641 6.293 7 1.652 2.354 2.36 1.646",key:3})])}r.defaultProps={viewBox:"0 0 14 14"},e.exports=r,r.default=r},58732:(e,t,i)=>{"use strict";i.d(t,{B:()=>n,W:()=>r});const n="SET_CUSTOM_DATA";function r(e){return{type:n,data:e}}},70769:(e,t,i)=>{"use strict";i.d(t,{C:()=>r,V:()=>n});const n="ADD_DEBUG";function r(e){return{type:n,debug:e}}},82590:(e,t,i)=>{"use strict";i.d(t,{$Z:()=>S,Ao:()=>o,Db:()=>c,F:()=>s,G9:()=>r,L1:()=>y,Ph:()=>a,Qe:()=>R,Qm:()=>m,Ub:()=>p,i_:()=>l,kJ:()=>h,ln:()=>u,ue:()=>d,yW:()=>v});var n=i(28299);const r="SET_AD_BLOCK_PLUS_PARAMS",o="SET_AD_BLOCK_PLUS_PROMISE",s="SET_CONSTANT_EXT_PARAMS_SRCS",l="SET_CONSTANT_EXT_PARAMS",a="SET_CONSTANT_EXT_PARAMS_PROMISE",c="SET_REINITABLE_EXT_PARAMS_SRCS",d="SET_REINITABLE_EXT_PARAMS",u="SET_REINITABLE_EXT_PARAMS_STATUS",h="SET_REINITABLE_EXT_PARAMS_PROMISE";function p(e){return t=>{t({type:o,promise:e}),e.then((e=>{t({type:r,params:{results:[e]}})}))}}function m(e){return{type:s,cfgs:e}}function g(e){return{type:l,params:e}}function f(e){let{dispatch:t,promise:i,actionType:r,settingParamsAction:o,settingUnresolvedStatusAction:s,settingResolvedStatusAction:l}=e;t({type:r,promise:i}),s&&t(s()),i.then((e=>{let{results:i,errors:r}=e;t(o({results:i,errors:r})),l&&t(l()),r.forEach((e=>{t((0,n.SZ)(e))}))}))}function y(e){return t=>{f({dispatch:t,promise:e,actionType:a,settingParamsAction:g})}}function v(e){return{type:c,cfgs:e}}function b(e){return{type:d,params:e}}function w(e){return{type:u,status:e}}function I(){return e=>{e(w("fresh"))}}function C(){return e=>{e(w("pending"))}}function R(){return e=>{e(w("stale"))}}function S(e){return t=>{f({dispatch:t,promise:e,actionType:h,settingParamsAction:b,settingUnresolvedStatusAction:C,settingResolvedStatusAction:I})}}},89443:(e,t,i)=>{"use strict";i.d(t,{JP:()=>r,S8:()=>n,mK:()=>o,pi:()=>s});const n="SET_CURRENT_FLYROLL_ID",r="REMOVE_CURRENT_FLYROLL_ID";function o(e){return{type:n,instanceId:e}}function s(){return{type:r}}},3711:(e,t,i)=>{"use strict";i.d(t,{p:()=>n});const n="SET_IS_V6_COMPAT"},37232:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ADD_PERF_DATA_ITEM:()=>n,addPerfDataItem:()=>r});const n="ADD_PERF_DATA_ITEM";function r(e){return{type:n,dataItem:e}}},96579:(e,t,i)=>{"use strict";i.d(t,{yA:()=>T,K2:()=>C,P4:()=>E,Xt:()=>k,SZ:()=>_,IG:()=>P,s7:()=>R,Mx:()=>x,$G:()=>W,zr:()=>S,Xz:()=>z,En:()=>J,cJ:()=>ie,CQ:()=>Q,oA:()=>te,S5:()=>X,CR:()=>U,BQ:()=>G,$D:()=>Z,ft:()=>Y,An:()=>j,v0:()=>H,r9:()=>K});var n=i(23493),r=i.n(n),o=i(13311),s=i.n(o),l=i(99560),a=i.n(l),c=i(25940),d=i(57239),u=i(85196),h=i(70769),p=i(91966),m=i(20132),g=i(63079);var f=i(53205),y=i(86624),v=i(39381),b=i(9652),w=i(49849),I=i(33130);const C="ADD_RECS",R="REMOVE_RECS",S="SET_SLOTS_IN_INSTANCE",E="APPEND_SLOTS_IN_INSTANCE",x="REMOVE_SLOT_IN_INSTANCE_BY_REC_ID",W="SET_REC_IN_INSTANCE_SLOT",T="ADD_BG_REC_IN_INSTANCE_SLOT",P="REMOVE_BG_REC_IN_INSTANCE_SLOT",_="REMOVE_BG_RECS_IN_INSTANCE_SLOT",k="MARK_SLOT_FOR_SWAPPING_REC",L=["types","filters","exchangeDomains"];function O(e){return a()(`${e}@${Math.random()}`,v.PF)}function j(e){return{...e,filters:e.filters.filter((e=>!w.il.includes(e)))}}const A=e=>"string"==typeof e?null==e?void 0:e.trim():null==e?void 0:e.toString(),M=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L;i.forEach((i=>{[e[i],t[i]]=[t[i],e[i]]}))},D=e=>{const t=[...e];for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));M(t[e],t[i])}return t};function N(e){let{grid:t,instanceId:i,additionalParams:n={},vastErrorCount:r,swappingRecCtx:o}=e;function s(e){let{slot:t,instanceId:i,additionalParams:n,vastErrorCount:r,swappingRecCtx:o}=e;const s={...t,recCtx:o,type:"slot",slotId:O(i),...n};return r>1?j(s):s}const{shuffle:l=!1}=t;switch(t.type){case"simple":const e=t.simple.schema.reduce(((e,t)=>{const r=s({slot:t,instanceId:i,additionalParams:n,swappingRecCtx:o});return r&&e.push(r),e}),[]);return l?D(e):e;case"composite":return t.composite.schema.reduce(((e,t)=>{switch(t.type){case"slot":const l=s({slot:t.slot,instanceId:i,additionalParams:{...n,colsWidth:t.colsWidth,rowsHeight:t.rowsHeight,media:t.media},vastErrorCount:r,swappingRecCtx:o});l&&e.push(l);break;case"grid":e.push({...t,slotId:O(i),slots:N({grid:t.grid,instanceId:i,additionalParams:{...n,colsWidth:t.colsWidth,rowsHeight:t.rowsHeight,media:t.media},vastErrorCount:r,swappingRecCtx:o})})}return l?D(e):e}),[]);default:return[]}}function z(e){let{payload:{grid:t,fallbackPayloads:i=[]},instanceId:n,additionalParams:r,vastErrorCount:o,swappingRecCtx:s}=e;return[N({grid:t,instanceId:n,additionalParams:r,vastErrorCount:o,swappingRecCtx:s}),...i.map((e=>{let{grid:t}=e;return N({grid:t,instanceId:n,additionalParams:r,vastErrorCount:o,swappingRecCtx:s})}))]}const F=e=>{let{advertiserInfo:{fields:t=[],aboutUrl:i=""}={}}=e;if(i&&(0,I.j)(i))return i;return`//ads.vk.com/adv_info?data=${window.btoa(window.unescape(encodeURIComponent(JSON.stringify({fields:[...t,{name:"Объект рекламы",value:""}]}))))}`};function V(e){let{respRecsGroup:t,dispatch:i,getState:n}=e;return t.map((e=>e.tiles.map((t=>t.map((t=>function(e){var t,i,n;let{rec:r,recGroupCtx:o}=e;const s="%24%7Brelap_rec_ctx%7D",l=encodeURIComponent(r.recCtx);return{...r,id:(0,v.dB)(r.recCtx),href:r.href.replace(s,l),...null!==(t=r.video)&&void 0!==t&&t.vast?{video:{...r.video,vast:r.video.vast.replace(s,l)}}:{},recGroupCtx:o,title:A(r.title),description:A(r.description),disclaimer:A(r.disclaimer),...(0,I.c)(r)&&null!==(i=r.advertiserInfo)&&void 0!==i&&null!==(n=i.fields)&&void 0!==n&&n.length?{advertiserInfoUrl:F(r)}:{}}}({rec:t,recGroupCtx:e.recGroupCtx,dispatch:i,getState:n})))))))}function B(e){return{type:C,recsGroup:e}}function $(e){return{type:R,recIds:e}}function q(e){let{slots:t,instanceId:i}=e;return{type:S,slots:t,id:i}}function Z(e){let{recId:t,instanceId:i,removedBy:n="widget"}=e;return{type:x,recId:t,id:i,removedBy:n}}function H(e){let{id:t,recId:i,slotId:n}=e;return{type:W,id:t,recId:i,slotId:n}}function U(e){let{id:t,recId:i,slotId:n}=e;return{type:P,id:t,recId:i,slotId:n}}function G(e){let{id:t,slotId:i}=e;return{type:_,id:t,slotId:i}}function Q(e){let{resp:t,instances:i,widgetRecsSchemas:n,dispatch:r,getState:o}=e;const{seed:l}=o(),a=function(e){let{resp:t,dispatch:i,getState:n,seed:r}=e;const{seed:o="",recsGroup:s}=t;r!==o&&i((0,u.P)(o));const l=V({respRecsGroup:s,dispatch:i,getState:n});return l.length&&i(B(l)),l}({resp:t,dispatch:r,getState:o,seed:l});t.debug&&r((0,h.C)({debug:t.debug,time:new Date})),a.forEach(((e,t)=>{var l;const{widgetConfigs:a,widgetInstances:c,recs:u}=o(),h=i[t],w=(null===(l=n[t])||void 0===l?void 0:l.isInitialFetch)||!1;if(h)if(r((0,b.Cb)({instanceId:h,widgetRecsSchemas:n,widgetGroup:e})),w){let i=null;if(!c[h])return;const{cfgId:l}=c[h],{widgetMaxInstancesCount:u}=o(),{visibleInstancesUsed:w=[],maxVisibleInstances:I}=u[l]||{};if(c[h]&&(0,d.N_)({id:"fetch recs",instanceId:h,cfgId:l}),I&&w.length&&!w.includes(h)&&w.length>I)return r((0,p.RT)({id:h,status:"complete"})),void r((0,p.RI)({id:h}));if(I&&r((0,m.z4)({cfgId:l,id:h})),e.forEach(((e,d)=>{let u=e;if(!u.length||null!==i)return;i=d;let m=function(e){let{cfg:t,payloadIndex:i=0}=e;if(0===i)return t.payload;const n=t.payload.fallbackPayloads?t.payload.fallbackPayloads[i-1]:{};return(0,g.Y)(t.payload,n)}({cfg:a[l],payloadIndex:i});r((0,p.H_)({id:h,index:i})),r((0,b.lG)({instanceId:h,rec:u[0]}));let f=n[t].tiles[d];const{handledRecs:w,handledInstanceCfg:I,handledInstanceSchemaTiles:C}=(0,y.WN)({dispatch:r,getState:o,addRecs:B,removeRecs:$,instanceCfg:m,instanceSchemaTiles:f,recs:u});m=I||m,f=C||f,u=w||u,r((0,p.ZL)({id:h,cfg:m})),localStorage.setItem(`${l}_lastMountTime`,`${Date.now()}`),u.forEach((e=>{e.customRec&&window.loadCustomRec(e.customRec.name)}));const R=(0,v.db)(f,(e=>{var t;const i=(null===(t=s()(u,{slotId:e.slotId}))||void 0===t?void 0:t.id)||null;return{...e,recCtx:void 0,recId:i}}));c[h]&&r(q({slots:R,instanceId:h}))})),null===i){const e=(0,v.db)(n[t].tiles[0],(e=>({...e,recCtx:void 0,recId:null})));r(q({slots:e,instanceId:h}))}(0,f.Z)(r,o,h).then((()=>{r((0,p.RT)({id:h,status:"complete"}))}))}else e[0].forEach((e=>{c[h]&&(r(H({id:h,recId:e.id,slotId:e.slotId})),r((0,b.lG)({instanceId:h,rec:e})),e.customRec&&window.loadCustomRec(e.customRec.name))}));else e[0].forEach((e=>{if((0,v.sw)(e)){const{slot:t,instanceId:i}=(0,v.a$)({widgetInstances:c,recs:u});t&&i&&r(function(e){let{id:t,recId:i,slotId:n}=e;return{type:T,id:t,recId:i,slotId:n}}({id:i,recId:e.id,slotId:t.slotId}))}e.customRec&&window.loadCustomRec(e.customRec.name)}))}))}function J(e){let{instances:t=[],extParams:i=[],fetchPromise:n=null}=e;return(e,r)=>{const{widgetConfigs:o,widgetInstances:s,url:l,seed:a,subPublisher:u,vastErrorCount:h}=r(),m=t.reduce(((t,i)=>{var n,r,l,a,c;const u=s[i];(0,d.pV)({id:"fetch recs",instanceId:i,cfgId:u.cfgId});const m=z({payload:o[u.cfgId].payload,instanceId:i,additionalParams:u.additionalParams,vastErrorCount:h});return!m.length||m.every((e=>!e.length))?(e((0,p.RT)({id:i,status:"complete"})),t):(e((0,b.ib)({instanceId:i,widgetCfgId:u.cfgId})),t.push({widgetCfgId:u.cfgId,widgetInstanceId:i,isForm:u.isForm,tiles:m,excludeVideo:!(0,w.aJ)(m),doNotRepeatAds:(null===(n=o[u.cfgId])||void 0===n||null===(r=n.payload)||void 0===r||null===(l=r.recsLackBehaviour)||void 0===l?void 0:l.disableClonning)||void 0,isInitialFetch:!0,abTestId:null===(a=o[u.cfgId])||void 0===a||null===(c=a.abTest)||void 0===c?void 0:c.id}),t)}),[]);m.length&&(n||c.Z.Recs.getRecs({recsPayload:{url:l||window.parent.location.href,referer:window.parent.location.href,recsSchemaGroup:{seed:a,widgetRecsSchemas:m},extData:i.length?i:void 0,subPublisher:u}})).then((i=>{Q({resp:i,instances:t,widgetRecsSchemas:m,dispatch:e,getState:r})})).catch((i=>{console.log(i),t.forEach((t=>{e((0,p.RT)({id:t,status:"complete"}))}))}))}}function X(e){let{id:t,slotId:i}=e;return{type:k,id:t,slotId:i}}function Y(){return(e,t)=>{const{recs:i,widgetInstances:n}=t(),r=Object.values(i).reduce(((e,t)=>((0,v.UF)({id:t.id,widgetInstances:n})||e.push(t.id),e)),[]);r.length&&e($(r))}}function K(e){let{id:t,instanceId:i,removeAnyway:n,reason:r="complete"}=e;return(e,o)=>{var s;const l=(0,v.pD)((null===(s=o().widgetInstances[i])||void 0===s?void 0:s.slots)||[],{recId:t});if(!l)return;const{slotId:a}=l;e(X({id:i,slotId:a})),e((0,b.ZX)({instanceId:i,status:"error"===r?b.O_.errorSwap:b.O_.swap})),(0,f.Z)(e,o,i).then((()=>{var r;(0,v.pD)((null===(r=o().widgetInstances[i])||void 0===r?void 0:r.slots)||[],{slotId:a})&&(n&&e(Z({recId:t,instanceId:i,removedBy:"widget"})),e(Y()))}))}}const ee=r()((e=>{let{dispatch:t,getState:i,instanceId:n}=e;const{widgetInstances:r}=i();r[n]&&(0,f.Z)(t,i,n).then((()=>{t((0,p.WT)(n))}))}),5e3);function te(e){let{instanceId:t,cfgId:i,slotId:n}=e;return(e,r)=>{const{widgetInstances:o,widgetConfigs:s,vastErrorCount:l}=r(),a=o[t],c=s[i];if(!a||!c)return;const d=z({payload:c.payload,instanceId:t,additionalParams:a.additionalParams,vastErrorCount:l}),{payloadIndex:u=0}=a,h=d[u];if(!h||!h.length)return;(0,v.j1)((0,v.HU)({instance:a})).length<=h.length&&e(function(e){let{slotId:t,slots:i,instanceId:n}=e;return{type:E,slotId:t,slots:i,id:n}}({slotId:n,slots:h,instanceId:t})),e((0,p.v3)(t)),e((0,b.ZX)({instanceId:t,status:b.O_.moreRecsLoad})),ee({dispatch:e,getState:r,instanceId:t})}}function ie(e){let{id:t,inNewTab:i,cfgId:n,instanceId:r}=e;return(e,o)=>{const{recs:s,widgetConfigs:l,widgetInstances:a}=o(),c=s[t],{payload:d}=l[n]||{},{customWidgetData:{utm:u}={}}=a[r]||{};if(!c||!d)return;const h=(0,v.Hn)({href:c.href,recType:c.type,cfg:d,additionalUtm:u});i?(0,v.RB)(h):window.global.location.href=h}}},49953:(e,t,i)=>{"use strict";i.d(t,{Co:()=>p,Dk:()=>n,GX:()=>l,Ii:()=>g,Jc:()=>a,MK:()=>h,QZ:()=>u,SU:()=>s,T0:()=>c,UO:()=>f,WO:()=>m,hv:()=>d,wl:()=>o,xs:()=>r});const n="MARK_REC_LOADED",r="MARK_REC_CLICKED",o="MARK_REC_SHOWED",s="MARK_REC_VIDEO_LOADED",l="MARK_FORM_LOADED",a="MARK_FORM_SHOWED",c="MARK_FORM_COMPLETE";function d(e){return{type:n,id:e}}function u(e){return{type:r,id:e}}function h(e){return{type:o,id:e}}function p(e){return{type:s,id:e}}function m(e){return{type:l,id:e}}function g(e){return{type:a,id:e}}function f(e){return{type:c,id:e}}},50938:(e,t,i)=>{"use strict";i.d(t,{g:()=>r,l:()=>n});const n="SET_RIGHTS";function r(e){return{type:n,rights:e}}},85196:(e,t,i)=>{"use strict";i.d(t,{P:()=>r,X:()=>n});const n="SET_SEED";function r(e){return{type:n,seed:e}}},89374:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n="SET_SESSION_SECRET"},28299:(e,t,i)=>{"use strict";i.d(t,{$y:()=>T,EV:()=>z,FU:()=>N,Fz:()=>E,GA:()=>P,GC:()=>k,It:()=>R,JG:()=>O,Jr:()=>f,KM:()=>M,Pi:()=>w,R0:()=>_,SZ:()=>C,Sx:()=>D,T7:()=>L,VQ:()=>A,Vh:()=>I,bd:()=>S,dN:()=>x,fY:()=>y,gY:()=>j,n3:()=>W});var n=i(13311),r=i.n(n),o=i(84238),s=i.n(o),l=i(23279),a=i.n(l),c=i(25940),d=i(39381);if(66458==i.j)var u=i(49953);if(66458==i.j)var h=i(60463);var p=i(91966),m=i(2575);const g=()=>({referer:window.global.location.href,sessionId:localStorage.relapSessionId}),f="ADD_STAT_EVENT_TO_QUEUE",y="EMPTY_STAT_EVENT_QUEUE";const v=a()(((e,t,i)=>{const{sessionSecret:n,statEvents:r}=i();r.length?(c.Z.Stat.sendStat({statPayload:{sessionSecret:n,events:r}}).then((()=>{e()})).catch((t=>{console.error(new m.Z("Process Stat Event Queue - rejected",t)),e()})),t({type:y})):e()}),500);function b(e){let{flush:t=!1,callback:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(n,r)=>{n({type:f,event:e}),v(i,n,r),t&&v.flush()}}function w(){return(e,t)=>{const{token:i,url:n}=t();e(b({type:"page_hit",token:i,url:n||window.global.location.href,...g()}))}}function I(e){let{pageMeta:t={}}=e;return(e,i)=>{if(!s()(t))return;const{url:n}=i();e(b({type:"page_meta",pageMeta:t,url:n||window.global.location.href,...g()}))}}function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,i)=>{if(!s()(e))return;const{url:n}=i();t(b({type:"page_ext_cfg_error",userAgent:window.navigator.userAgent,errorType:e.errorType,errorText:e.errorText,errorCode:e.errorCode,errorStage:e.errorStage,errorDescription:e.errorDescription,extCfgId:e.extCfgId,url:n||window.global.location.href,...g()}))}}function R(e){let{recId:t,cfgId:i}=e;return(e,n)=>{var r,o;const{recs:s,recsStat:l,url:a,widgetConfigs:c}=n(),d=l[t],h=c[i],p=s[t];h&&p&&(d&&d.loaded||(e(b({type:"rec_load",widgetCfgId:i,abTestId:null===(r=h.abTest)||void 0===r?void 0:r.id,recCtx:p.recCtx,recGroupCtx:p.recGroupCtx,project:(null==p||null===(o=p.customRec)||void 0===o?void 0:o.name)||void 0,url:a||window.global.location.href,...g()})),e((0,u.hv)(t))))}}function S(e){let{instanceId:t,cfgId:i}=e;return(e,n)=>{var r;const{url:o,widgetConfigs:s,widgetInstances:l,widgetInstancesStat:a}=n(),c=s[i],d=l[t];if(!c||!d)return;const u=a[t];u&&u.loaded||(e(b({type:"widget_load",widgetCfgId:i,abTestId:null===(r=c.abTest)||void 0===r?void 0:r.id,url:o||window.global.location.href,...g()})),e((0,h.Up)(t)))}}function E(e){let{instanceId:t,cfgId:i,recGroupCtx:n}=e;return(e,r)=>{var o;const{url:s,widgetConfigs:l,widgetInstances:a}=r(),c=l[i],d=a[t];c&&d&&!d.ready&&(e(b({type:"widget_ready",widgetCfgId:i,abTestId:null===(o=c.abTest)||void 0===o?void 0:o.id,recGroupCtx:n,url:s||window.global.location.href,...g()})),e((0,p.FC)(t)))}}function x(e){let{recId:t,cfgId:i}=e;return(e,n)=>{var o;const{recs:s,widgetConfigs:l,widgetInstances:a,widgetInstancesStat:c,url:u}=n(),p=l[i],m=s[t];if(!p||!m)return;const f=r()(a,(e=>(0,d._e)(e.slots,(e=>e.recId===t))));if(!f)return;const y=c[f.id];y&&y.showed||(e(b({type:"widget_show",widgetCfgId:i,abTestId:null===(o=p.abTest)||void 0===o?void 0:o.id,recCtx:m.recCtx,recGroupCtx:m.recGroupCtx,url:u||window.global.location.href,...g()})),e((0,h.zX)(f.id)))}}function W(e){let{recId:t,cfgId:i}=e;return(e,n)=>{var r,o;const{recs:s,recsStat:l,url:a,widgetConfigs:c}=n(),d=l[t],h=c[i],p=s[t];h&&p&&(d&&d.showed||(e(b({type:"rec_show",widgetCfgId:i,abTestId:null===(r=h.abTest)||void 0===r?void 0:r.id,recCtx:p.recCtx,recGroupCtx:p.recGroupCtx,project:(null==p||null===(o=p.customRec)||void 0===o?void 0:o.name)||void 0,url:a||window.global.location.href,...g()})),e((0,u.MK)(t))))}}function T(e){let{recId:t,cfgId:i}=e;return(e,n)=>{const{recs:r,recsStat:o,url:s,widgetConfigs:l}=n(),a=o[t],c=l[i],d=r[t];if(!c)return Promise.reject(new m.Z("No widgetCfg found"));if(!d)return Promise.reject(new m.Z("No recs found"));if(a&&a.clicked)return Promise.reject(new m.Z("Rec stat clicked"));const h=new Promise((t=>{var n,r;e(b({type:"rec_click",widgetCfgId:i,abTestId:null===(n=c.abTest)||void 0===n?void 0:n.id,recCtx:d.recCtx,recGroupCtx:d.recGroupCtx,project:(null==d||null===(r=d.customRec)||void 0===r?void 0:r.name)||void 0,url:s||window.global.location.href,...g()},{flush:!0,callback:()=>{t()}}))}));return e((0,u.QZ)(t)),h}}function P(e){let{recId:t,cfgId:i,vastDomain:n}=e;return(e,r)=>{var o;const{recs:s,recsStat:l,url:a,widgetConfigs:c}=r(),d=c[i],h=l[t],p=s[t];!d||!p||null!=h&&h.videoLoaded||(e(b({type:"rec_video_load",vastDomain:n,widgetCfgId:i,abTestId:null===(o=d.abTest)||void 0===o?void 0:o.id,recCtx:p.recCtx,recGroupCtx:p.recGroupCtx,url:a||window.global.location.href,...g()})),e((0,u.Co)(t)))}}function _(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,i)=>{var n;const{recs:r,url:o,widgetConfigs:l}=i(),a=l[e.cfgId],c=r[e.recId];a&&c&&s()(e)&&t(b({type:"rec_video_error",userAgent:window.navigator.userAgent,errorType:e.errorType,errorText:e.errorText,errorCode:e.errorCode,errorStage:e.errorStage,errorDescription:e.errorDescription,widgetCfgId:e.cfgId,abTestId:null===(n=a.abTest)||void 0===n?void 0:n.id,recCtx:c.recCtx,recGroupCtx:c.recGroupCtx,url:o||window.global.location.href,...g()}))}}function k(e){let{cfgId:t,recId:i,project:n,category:r,action:o,userInput:s,tags:l}=e;return(e,a)=>{var c;const{recs:d,url:u,widgetConfigs:h}=a(),p=h[t],m=d[i];p&&m&&e(b({type:"rec_custom",widgetCfgId:t,abTestId:null===(c=p.abTest)||void 0===c?void 0:c.id,recCtx:m.recCtx,recGroupCtx:m.recGroupCtx,project:n,category:r,action:o,userInput:s,tags:l,url:u||window.global.location.href,...g()}))}}function L(e){let{recId:t,formId:i,sequenceId:n}=e;return(e,r)=>{var o;const{recs:s,recsStat:l,url:a}=r(),c=l[t],d=s[t];d&&(c&&c.formLoaded||(e(b({type:"form_load",sequenceId:n,formId:i,recCtx:d.recCtx,recGroupCtx:d.recGroupCtx,project:(null==d||null===(o=d.customRec)||void 0===o?void 0:o.name)||void 0,url:a||window.global.location.href,...g()})),e((0,u.WO)(t))))}}function O(e){let{formId:t,sequenceId:i,questionId:n,answerId:r,isCorrect:o}=e;return(e,s)=>{const{url:l}=s();e(b({type:"form_result",sequenceId:i,formId:t,questionId:n,answerId:r,isCorrect:o,url:l||window.global.location.href,...g()}))}}function j(e){let{formId:t,sequenceId:i,sessionTickInterval:n}=e;return(e,r)=>{const{url:o}=r();e(b({type:"form_session_active",sequenceId:i,sessionTickInterval:n,formId:t,url:o||window.global.location.href,...g()}))}}function A(e){let{formId:t,sequenceId:i,sessionTickInterval:n}=e;return(e,r)=>{const{url:o}=r();e(b({type:"form_session_inactive",sequenceId:i,sessionTickInterval:n,formId:t,url:o||window.global.location.href,...g()}))}}function M(e){let{recId:t,formId:i,sequenceId:n}=e;return(e,r)=>{const{recs:o,recsStat:s,url:l}=r(),a=s[t],c=o[t];c&&(a&&a.formShowed||(e(b({type:"form_show",formId:i,sequenceId:n,recCtx:c.recCtx,recGroupCtx:c.recGroupCtx,url:l||window.global.location.href,...g()})),e((0,u.Ii)(t))))}}function D(e){let{recId:t,formId:i,sequenceId:n}=e;return(e,r)=>{const{recs:o,recsStat:s,url:l}=r(),a=s[t];o[t]&&(a&&a.formCompleted||(e(b({type:"form_completed",formId:i,sequenceId:n,url:l||window.global.location.href,...g()})),e((0,u.UO)(t))))}}const N=e=>(t,i)=>{const{url:n}=i();t(b({type:"correct_relap_script_installation",url:n||window.global.location.href,...e}))},z=e=>(t,i)=>{var n;const{url:r,widgetConfigs:o}=i(),s=o[e.widgetCfgId];s&&t(b({type:"widget_filled",url:r||window.global.location.href,abTestId:null===(n=s.abTest)||void 0===n?void 0:n.id,...e,...g()}))}},62313:(e,t,i)=>{"use strict";i.d(t,{K:()=>n});const n="SET_SUB_PUBLISHER"},45401:(e,t,i)=>{"use strict";i.d(t,{L:()=>n});const n="SET_TOKEN"},20006:(e,t,i)=>{"use strict";i.d(t,{$:()=>n,j:()=>r});const n="SET_URL";function r(e){return{type:n,url:e}}},32023:(e,t,i)=>{"use strict";i.d(t,{I:()=>r,c:()=>n});const n="INCREASE_VAST_ERROR_COUNT";function r(e){return{type:n,count:e}}},60463:(e,t,i)=>{"use strict";i.d(t,{LM:()=>r,Up:()=>o,fg:()=>n,zX:()=>s});const n="MARK_WIDGET_INSTANCE_LOADED",r="MARK_WIDGET_INSTANCE_SHOWED";function o(e){return{type:n,id:e}}function s(e){return{type:r,id:e}}},25603:(e,t,i)=>{"use strict";i.d(t,{AE:()=>c,D1:()=>l,R_:()=>o,rq:()=>a,xN:()=>s});var n=i(96579),r=i(19006);const o="ADD_WIDGET_INSTANCE_WAITING_FOR_RECS_TO_QUEUE",s="REMOVE_WIDGET_INSTANCES_WAITING_FOR_RECS_FROM_QUEUE",l="EMPTY_WAITING_FOR_RECS_QUEUE";function a(e){return{type:o,id:e}}function c(){return(e,t)=>{const{extParams:i}=t();(0,r.yB)(i).then((i=>{const{widgetInstancesWaitingForRecs:r}=t();r.length&&(e((0,n.En)({instances:r,extParams:i})),e({type:l}))}))}}},20132:(e,t,i)=>{"use strict";i.d(t,{WL:()=>o,jL:()=>l,o_:()=>s,rH:()=>a,sy:()=>n,t5:()=>r,u8:()=>d,z4:()=>c});const n="SET_VISIBLE_INSTANCES_USED",r="SET_MAX_VISIBLE_INSTANCES",o="SET_MAX_INSTANCES",s="REMOVE_VISIBLE_INSTANCES_USED";function l(e){let{cfgId:t,count:i}=e;return{type:r,count:i,cfgId:t}}function a(e){let{cfgId:t,count:i}=e;return{type:o,count:i,cfgId:t}}function c(e){let{cfgId:t,id:i}=e;return{type:n,id:i,cfgId:t}}function d(e){let{cfgId:t,id:i}=e;return{type:s,id:i,cfgId:t}}},91966:(e,t,i)=>{"use strict";i.d(t,{Cs:()=>S,DQ:()=>x,FC:()=>j,H_:()=>F,Lk:()=>k,Mp:()=>w,PB:()=>g,RI:()=>V,RT:()=>z,TH:()=>v,TJ:()=>b,WT:()=>N,ZL:()=>O,Zs:()=>T,aE:()=>R,hX:()=>E,jd:()=>A,kO:()=>W,kW:()=>_,kg:()=>B,lG:()=>C,ly:()=>I,n5:()=>M,p3:()=>L,v3:()=>D,xT:()=>f,xu:()=>y});var n=i(97398),r=i.n(n),o=i(85564),s=i.n(o),l=i(13311),a=i.n(l),c=i(33676),d=i(57239),u=i(39381),h=i(25603),p=i(96579);if(24866!=i.j)var m=i(20132);const g="ADD_WIDGET_CFG",f="ADD_WIDGET_INSTANCE",y="REGISTER_WIDGET_INSTANCE",v="ADD_WIDGET_INSTANCE_CFG",b="MARK_WIDGET_INSTANCE_READY",w="MARK_WIDGET_INSTANCE_VISIBLE",I="MARK_WIDGET_INSTANCE_HIDDEN",C="MARK_WIDGET_INSTANCE_LOAD_MORE_IN_PROGRESS",R="MARK_WIDGET_INSTANCE_LOAD_MORE_FINISHED",S="SET_WIDGET_INSTANCE_INITIAL_FETCH_STATUS",E="SET_WIDGET_INSTANCE_PAYLOAD_INDEX",x="REGISTER_WIDGET_REMOVE_CALLBACK",W="REMOVE_WIDGET_INSTANCE";function T(e){return{type:g,cfg:e}}function P(e){let{widgetInstances:t,anchorEl:i,position:n,cfgId:r}=e;const o=Object.values(t).filter((e=>e.cfgId===r));return a()(o,{positioning:{anchorEl:i,position:n}})}function _(e){let{cfgId:t,anchorEl:i,customWidgetData:n,position:r="before",grouped:o=!1,additionalParams:s,isForm:l,onLoad:a=(()=>{}),onReady:c=(()=>{})}=e;return(e,d)=>{const{widgetConfigs:p}=d();if(!p[t])return;const{widgetMaxInstancesCount:m,widgetInstances:g}=d(),{maxInstances:y}=m[t]||{};if(y){if(Object.keys(g).filter((e=>{var i;return t===(null===(i=g[e])||void 0===i?void 0:i.cfgId)})).length>=y)return}const v=(0,u.f6)(t);e({type:f,cfgId:t,id:v,positioning:{anchorEl:i,position:r},isForm:l,customWidgetData:n,additionalParams:s,onLoad:a,onReady:c}),e((0,h.rq)(v)),o||e((0,h.AE)())}}function k(){let{cfgId:e,withWindowMinMaxWidth:t=!1,onLoad:i=(()=>{}),onReady:n=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(o,l)=>{const{widgetConfigs:a,widgetInstances:u,isV6Compat:p}=l();if(e&&!a[e])return void console.warn(`Can't add widget instance: cfg with id ${e} does not exist`);let m=e?[e]:Object.keys(a).filter((e=>!a[e].individualInstall));t&&(m=m.filter((e=>{var t,i,n,o,s,l;const c=window.global.innerWidth,d=null===(t=a[e])||void 0===t||null===(i=t.payload)||void 0===i||null===(n=i.positioning)||void 0===n?void 0:n.windowMaxWidth,u=null===(o=a[e])||void 0===o||null===(s=o.payload)||void 0===s||null===(l=s.positioning)||void 0===l?void 0:l.windowMinWidth;return!(r()(d)&&c>d||r()(u)&&c<u)})));const g=s()(m.map((e=>{(0,d.g)({id:"find place",groupId:`widget ${e}`});const t=a[e];return(0,c.Z)(t,p).filter((e=>e.anchorEl)).filter((t=>{let{anchorEl:i,position:n}=t;return!(P({widgetInstances:u,anchorEl:i,position:n,cfgId:e})||i.dataset.relapMountedWidgetsCfgs&&i.dataset.relapMountedWidgetsCfgs.includes(e))}))})));if(!g.length)return void n();const f=[],y=[];g.forEach((e=>{let t,i,{anchorEl:n,position:r,cfgId:s,additionalParams:l={},customWidgetData:a}=e;(0,d.Ix)({id:"find place",groupId:`widget ${s}`}),f.push(new Promise((e=>{t=e}))),y.push(new Promise((e=>{i=e})));const c=!!Array(...n.classList).includes("js-relap-form-anchor")||void 0;n.dataset.relapMountedWidgetsCfgs?n.dataset.relapMountedWidgetsCfgs+=` || ${s}`:n.dataset.relapMountedWidgetsCfgs=s,o(_({cfgId:s,anchorEl:n,position:r,grouped:!0,additionalParams:l,customWidgetData:a,isForm:c,onLoad:t,onReady:i}))})),Promise.all(f).then(i),Promise.all(y).then(n),o((0,h.AE)())}}function L(e){let{el:t,local:i,id:n}=e;return(e,r)=>{const{widgetInstances:o}=r();o[n]&&!o[n].el&&e({type:y,el:t,local:i,id:n})}}function O(e){let{id:t,cfg:i}=e;return(e,n)=>{const{widgetInstances:r}=n();r[t]&&e({type:v,id:t,cfg:i})}}function j(e){return(t,i)=>{var n;const{widgetInstances:r}=i();null!==(n=r[e])&&void 0!==n&&n.ready||t({type:b,id:e})}}function A(e){return(t,i)=>{var n;const{widgetInstances:r}=i();null!==(n=r[e])&&void 0!==n&&n.visible||t({type:w,id:e})}}function M(e){return(t,i)=>{var n;const{widgetInstances:r}=i();null!==(n=r[e])&&void 0!==n&&n.visible&&t({type:I,id:e})}}function D(e){return{type:C,id:e}}function N(e){return{type:R,id:e}}function z(e){let{id:t,status:i}=e;return{type:S,id:t,status:i}}function F(e){let{id:t,index:i}=e;return(e,n)=>{const{widgetInstances:r}=n();r[t]&&e({type:E,id:t,index:i})}}function V(e){let{id:t,onRemove:i=(()=>{})}=e;return(e,n)=>{const{widgetInstances:r,widgetMaxInstancesCount:o}=n();if(!r[t]||!r[t].el)return;const{cfgId:s}=r[t],{maxInstances:l,maxVisibleInstances:a}=o[s]||{};e({type:x,id:t,onRemove:i}),a&&e((0,m.u8)({cfgId:s,id:t})),l&&e((0,m.rH)({cfgId:s,count:l-1})),e({type:W,id:t}),e((0,p.ft)())}}function B(e){let{cfgId:t,onRemove:i=(()=>{})}=e;return(e,n)=>{const{widgetInstances:r}=n(),o=[];Object.values(r).filter((e=>e.cfgId===t)).forEach((t=>{let i,{id:n}=t;o.push(new Promise((e=>{i=e}))),e(V({id:n,onRemove:i}))})),Promise.all(o).then(i)}}},61560:(e,t,i)=>{"use strict";i.r(t);var n=i(27923),r=i(64487),o=i(69906),s=i(28499),l=i(88661),a=i(57239),c=i(13513),d=i(2575);var u=i(76081),h=i(39381);const p=()=>Promise.all([i.e(42945),i.e(54736),i.e(32747),i.e(44556),i.e(61321)]).then(i.bind(i,94249)),m=()=>Promise.all([i.e(42945),i.e(54736),i.e(32747),i.e(46791)]).then(i.bind(i,36470)),g=()=>Promise.all([i.e(42945),i.e(54736),i.e(32747),i.e(63790)]).then(i.bind(i,67642)),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;function i(){e.forEach((e=>{t(...e)})),e.splice(0,e.length),e.push=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];[].push.apply(e,n),i()}}return i(),e};{const{dsn:e,environment:t,allowUrls:i,tracesSampleRate:o,ignoreErrors:s,release:l,networkErrorMessageRegex:a}=u.Z;n.S({dsn:(0,h.jk)(e),environment:t,allowUrls:i,tracesSampleRate:o,ignoreErrors:s,release:l,beforeSend:(e,t)=>{const i=e.tags["originalException.message"];if(t||i){let e;if(i)e=i;else{const i=t.originalException;"string"==typeof i?e=i:i instanceof Error&&(e=i.message)}if(e&&a.test(e))return null}return e.contexts=e.contexts||{},e.tags=e.tags||{},e.contexts.location={url:window.global.location.toString()},e.tags.origin=window.global.location.origin,e}}),window.sentryExceptions=f(window.sentryExceptions,r.Tb)}if(window.metricsQueue=f(window.metricsQueue,o.o),window.fetch&&HTMLElement.prototype.attachShadow&&window.ResizeObserver&&window.MutationObserver&&window.IntersectionObserver)(function(e){let{loadTheme:t,loadCustomRec:i,loadCore:n,loadVideoComponent:r,loadFormComponent:o}=e;if("relapAssetLoader"!==window.frameType)return Promise.reject(new d.Z("frameType is not relapAssetLoader"));const{fetchInitDataPromise:s,resolvePreInit:l,isV6Compat:u,initOpt:h,isManualInit:p}=window.preinitScope;let m,g;window.loadTheme=t,window.loadCustomRec=i,window.loadVideoComponent=r,window.loadFormComponent=o,(0,a.g)({id:"load core",groupId:"init"});const f=new Promise(((e,t)=>{m=e,g=t}));return n().then((e=>{let{publicAPI:t}=e;(0,a.Ix)({id:"load core",groupId:"init"}),window.perfTiming=window.perfTiming||{};const{perfTiming:i}=window;function n(e){(0,a.Gn)({id:"browser_DOMContentLoaded",groupId:"\0",value:e})}function r(e){(0,a.Gn)({id:"browser_load",groupId:"\0",value:e})}i.onDocParsed=n,i.onDocLoad=r,i.docParsed&&n(i.docParsed),i.docLoad&&r(i.docLoad);const o=(d=t.init,function(e){return function(t){return d(e,t)}})({fetchInitDataPromise:s,isV6Compat:u,resolvePreInit:l});var d;const f={...t,init:o};if(!h.token)return(0,c.T9)(f),void m();(0,a.g)({id:"init public api",groupId:"init"}),f.init(h).then((e=>{(0,a.Ix)({id:"init public api",groupId:"init"}),(0,c.T9)(e),p||e.addWidgets(),m()})).catch((e=>{g(e)}))})),f})({loadTheme:s.Z,loadCustomRec:l.Z,loadCore:p,loadVideoComponent:m,loadFormComponent:g}).catch((e=>{console.error(new d.Z("Loading assets failed",e))}));else{const e="Browser does not support modern features",{onRelapAPIError:t}=window.global;if("function"==typeof t)try{t({type:"unsupported_browser"})}catch(e){console.error(new d.Z("Unsupported browser",e))}(0,o.o)({rootPath:"health",path:"events.perform.debug.modern_features.fail"}),console.error(new d.Z(e)),window.global.document.querySelectorAll("script[data-relap-token]").forEach((e=>e.remove())),window.global.document.querySelectorAll(".relap-runtime-iframe").forEach((e=>e.remove()))}},29737:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(39381);function a(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.PureComponent{constructor(){super(...arguments),a(this,"handleClick",(e=>{const{target:t,onClick:i,onSameTabOpen:n,onNewTabOpen:r}=this.props,o=0===e.button,s=1===e.button,l=e.ctrlKey||e.metaKey;if(o||s){if(o&&!l&&"_blank"!==t)return e.preventDefault(),i(e),void n();i(e),r()}})),a(this,"handlePreviewClick",(e=>{e.preventDefault()}))}componentDidMount(){this._el.addEventListener("auxclick",this.handleClick)}componentWillUnmount(){this._el.removeEventListener("auxclick",this.handleClick)}render(){const{isPreview:e,children:t,target:i,className:n,style:o,dataTest:s,onContextMenu:a,onDoubleClick:c,onMouseDown:d,onMouseEnter:u,onMouseLeave:h,onMouseMove:p,onMouseOut:m,onMouseOver:g,onMouseUp:f,onFocus:y,onBlur:v,title:b,href:w,utm:I}=this.props;return e?r().createElement("a",{ref:e=>{this._el=e},title:b,href:(0,l.n$)(w,I),className:n,style:o,onClick:this.handlePreviewClick,onContextMenu:this.handlePreviewClick},t):r().createElement("a",{ref:e=>{this._el=e},title:b,href:(0,l.n$)(w,I),target:i,rel:"_blank"===i?"noopener noreferrer":void 0,className:n,style:o,onClick:this.handleClick,onContextMenu:a,onDoubleClick:c,onMouseDown:d,onMouseEnter:u,onMouseLeave:h,onMouseMove:p,onMouseOut:m,onMouseOver:g,onMouseUp:f,onFocus:y,onBlur:v},t)}}a(c,"propTypes",{isPreview:s().bool,children:s().node,href:s().string,utm:s().shape({string:s().string,type:s().oneOf(["search","anchor"])}),target:s().oneOf(["_blank","_self","_parent","_top"]),className:s().string,style:s().object,dataTest:s().string,onClick:s().func,onNewTabOpen:s().func,onSameTabOpen:s().func,onContextMenu:s().func,onDoubleClick:s().func,onMouseDown:s().func,onMouseEnter:s().func,onMouseLeave:s().func,onMouseMove:s().func,onMouseOut:s().func,onMouseOver:s().func,onMouseUp:s().func,onFocus:s().func,onBlur:s().func,title:s().string}),a(c,"defaultProps",{isPreview:!1,children:null,href:"#",utm:{string:"",type:"search"},target:"_self",className:"",style:{},dataTest:"",onClick:()=>{},onNewTabOpen:()=>{},onSameTabOpen:()=>{},onContextMenu:()=>{},onDoubleClick:()=>{},onMouseDown:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseMove:()=>{},onMouseOut:()=>{},onMouseOver:()=>{},onMouseUp:()=>{},onFocus:()=>{},onBlur:()=>{},title:""})},85213:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(94184),a=i.n(l),c=i(68788),d=i.n(c),u=i(28060);const h={itemWrapper:{position:"relative",padding:"6px 8px",borderRadius:"4px","&:hover":{background:"rgba(137, 148, 153, 0.12)"},"&:active":{background:"rgba(137, 148, 153, 0.24)"}},itemText:{fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,fontSize:"14px",lineHeight:"20px",color:"#000000",userSelect:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},p=(e,t)=>{let{text:i=null,overlay:n=null,type:o=null,item:s=null,onClick:l=(()=>{})}=e,{local:a}=t;const{classes:c}=(0,u.Z)({global:void 0,local:a,stylesSrc:h,data:{}});return i||s?"customItem"===o?r().createElement("div",{className:c.itemWrapper,onClick:l},s):r().createElement("div",{className:c.itemWrapper},r().createElement("div",{className:c.itemText},i),r().createElement("div",{onClick:l},n)):null};p.contextTypes={local:s().object.isRequired};const m=(0,n.memo)(p),g={menuWrapper:{position:"absolute",zIndex:1e5,top:0,right:0,maxWidth:"100%"},menuOpenControl:{display:"flex",cursor:"pointer",width:"25px",height:"40px",backgroundRepeat:"no-repeat",backgroundSize:"100%",backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='25' height='40' viewBox='0 0 25 40' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg filter='url(%23a)'%3E%3Cmask id='b' maskUnits='userSpaceOnUse' x='10' y='11' width='5' height='17' fill='%23000'%3E%3Cpath fill='%23fff' d='M10 11h5v17h-5z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M14 13.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM12.5 27a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z'/%3E%3C/mask%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M14 13.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM12.5 27a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z' fill='%23fff' shape-rendering='crispEdges'/%3E%3Cpath d='M12.5 16a2.5 2.5 0 0 0 2.5-2.5h-2a.5.5 0 0 1-.5.5v2ZM10 13.5a2.5 2.5 0 0 0 2.5 2.5v-2a.5.5 0 0 1-.5-.5h-2Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h2c0-.28.22-.5.5-.5v-2Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v2c.28 0 .5.22.5.5h2ZM12.5 22a2.5 2.5 0 0 0 2.5-2.5h-2a.5.5 0 0 1-.5.5v2ZM10 19.5a2.5 2.5 0 0 0 2.5 2.5v-2a.5.5 0 0 1-.5-.5h-2Zm2.5-2.5a2.5 2.5 0 0 0-2.5 2.5h2c0-.28.22-.5.5-.5v-2Zm2.5 2.5a2.5 2.5 0 0 0-2.5-2.5v2c.28 0 .5.22.5.5h2Zm-2 6a.5.5 0 0 1-.5.5v2a2.5 2.5 0 0 0 2.5-2.5h-2Zm-.5-.5c.28 0 .5.22.5.5h2a2.5 2.5 0 0 0-2.5-2.5v2Zm-.5.5c0-.28.22-.5.5-.5v-2a2.5 2.5 0 0 0-2.5 2.5h2Zm.5.5a.5.5 0 0 1-.5-.5h-2a2.5 2.5 0 0 0 2.5 2.5v-2Z' fill='%23000' fill-opacity='.15' mask='url(%23b)'/%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='a' x='8' y='9' width='9' height='21' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0' result='hardAlpha'/%3E%3CfeOffset/%3E%3CfeGaussianBlur stdDeviation='1'/%3E%3CfeComposite in2='hardAlpha' operator='out'/%3E%3CfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0'/%3E%3CfeBlend in2='BackgroundImageFix' result='effect1_dropShadow_1315_6532'/%3E%3CfeBlend in='SourceGraphic' in2='effect1_dropShadow_1315_6532' result='shape'/%3E%3C/filter%3E%3C/defs%3E%3C/svg%3E\")"},menuPopover:{background:"#FFFFFF",boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.1), 0px 8px 32px rgba(0, 0, 0, 0.1)",borderRadius:"8px",display:"flex",margin:"4px"},menuCloseControl:{minWidth:"24px",cursor:"pointer",color:"#BFC4C8","&:hover":{color:"#899299"},"&:active":{color:"#65717A"}},menuList:{display:"flex",flexDirection:"column",padding:"4px 0 4px 4px",gap:"4px",maxWidth:"calc(100% - 24px)"}};function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},f.apply(this,arguments)}const y=(e,t)=>{let{items:i=[],styles:o={classes:{}}}=e,{local:s}=t;const{classes:l}=(0,u.Z)({global:void 0,local:s,stylesSrc:g,data:{}}),[c,h]=(0,n.useState)(!1);if(!i.length)return null;const p=()=>{h(!1)},y=c?r().createElement("div",{className:l.menuPopover},r().createElement("div",{className:l.menuList},i.map((e=>r().createElement(m,f({key:e.id},e,{onClick:p}))))),r().createElement(d(),{className:l.menuCloseControl,onClick:p})):r().createElement("div",{className:l.menuOpenControl,onClick:()=>{h(!0)}}),v=a()(l.menuWrapper,o.classes.menuWrapper);return r().createElement("div",{className:v},y)};y.contextTypes={local:s().object.isRequired};const v=(0,n.memo)(y)},60226:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(94184),a=i.n(l),c=i(28060);const d={ageRestrictionWrapper:{"--adchoice-transform":"translate(0, 35px)",position:"absolute",zIndex:1e4,top:0,right:0,padding:5,maxWidth:"100%","pointer-events":"none"},label:{"font-family":"Arial, Helvetica, sans-serif","font-size":20,color:"#fff","text-shadow":"-1px 1px 2px #000, 1px 1px 2px #000, 1px -1px 0 #000, -1px -1px 0 #000"}},u=(e,t)=>{let{ageRestriction:i=null,adChoiceRendered:n=!1,styles:o={classes:{}}}=e,{local:s}=t;const{classes:l}=(0,c.Z)({global:void 0,local:s,stylesSrc:d,data:{}});if(null===i)return null;const u=a()(l.ageRestrictionWrapper,o.classes.ageRestrictionWrapper);return r().createElement("div",{className:u,style:{transform:n?"var(--adchoice-transform)":""}},r().createElement("span",{className:l.label},i,"+"))};u.contextTypes={local:s().object.isRequired};const h=(0,n.memo)(u)},48166:(e,t,i)=>{"use strict";i.d(t,{Z:()=>I});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(94184),a=i.n(l),c=i(28060);const d={display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%"},u={position:"absolute",background:"#FFF",flexShrink:0,opacity:0,transition:"opacity 0.5s ease-in"},h=e=>`${e}px`,p=48,m="1.5s",g="2s ease-in infinite",f=120,y={callButtonPosition:{position:"absolute",right:"2px",zIndex:1e4,width:"120px",height:"120px","-webkit-tap-highlight-color":"transparent"},callButtonWrapper:{...d,position:"absolute",bottom:"-12px",right:"-12px",width:"120px",height:"120px"},callButton:{...d,width:h(p),height:h(p),position:"absolute"},callButtonInnerClass:{...d,background:"#FFF",color:"#00A15C",width:h(p),height:h(p),position:"absolute",zIndex:100,transition:"all 0.3s ease","&:hover":{background:"#00A15C",color:"#FFF"}},"@keyframes layer3animation":{0:{opacity:0},"40%":{opacity:"0"},"50%":{opacity:"0.1"},"60%":{opacity:"0.1"},"80%":{opacity:0}},"@keyframes layer2animation":{0:{opacity:0},"20%":{opacity:0},"30%":{opacity:"0.2"},"60%":{opacity:"0.2"},"80%":{opacity:0}},"@keyframes layer1animation":{0:{opacity:0},"10%":{opacity:"0.3"},"60%":{opacity:"0.3"},"80%":{opacity:0}},callButtonLayer3:{...d,width:h(120),height:h(120),...u,"$callButton:not(:hover) &":{animation:`$layer3animation ${g}`,animationDelay:m}},callButtonLayer2:{...d,width:h(96),height:h(96),...u,"$callButton:not(:hover) &":{animation:`$layer2animation ${g}`,animationDelay:m}},callButtonLayer1:{...d,width:h(72),height:h(72),...u,"$callButton:not(:hover) &":{animation:`$layer1animation ${g}`,animationDelay:m}}};var v=i(96751),b=i.n(v);const w=(e,t)=>{let{isPreview:i,phone:o,widgetStyles:s,onClick:l,mediaSizeHolder:d}=e,{local:u}=t;const{classes:h}=(0,c.Z)({local:u,stylesSrc:y}),[p,m]=(0,n.useState)(-9999),[g,v]=(0,n.useState)(0);if((0,n.useEffect)((()=>{const e=new window.ResizeObserver((()=>{const{offsetHeight:e}=d;v(e)}));return d&&e.observe(d),()=>{e.disconnect()}}),[d]),(0,n.useEffect)((()=>{if(g){const e=g-f;e!==p&&m(e)}}),[p,g]),!g||g<f)return null;const{classes:w}=s,I=a()(h.callButtonPosition,w.callButtonPosition),C=a()(h.callButtonWrapper,w.callButtonWrapper),R=a()(h.callButtonLayer1,w.callButtonLayer1),S=a()(h.callButtonLayer2,w.callButtonLayer2),E=a()(h.callButtonLayer3,w.callButtonLayer3),x=a()(h.callButton,w.callButton),W=a()(h.callButtonInnerClass,w.callButtonInnerClass);return r().createElement("a",{className:I,href:i?"/":`tel:${o}`,style:{top:`${p}px`},onClick:e=>{i?e.preventDefault():l()}},r().createElement("div",{className:C},r().createElement("div",{className:x},r().createElement("div",{className:W},r().createElement(b(),null)),r().createElement("div",{className:R}),r().createElement("div",{className:E}),r().createElement("div",{className:S}))))};w.propTypes={isPreview:s().bool,phone:s().string.isRequired,widgetStyles:s().object,onClick:s().func,mediaSizeHolder:s().shape({offsetHeight:s().number})},w.defaultProps={isPreview:!1,widgetStyles:{classes:{}},mediaSizeHolder:{offsetHeight:null},onClick:()=>{}},w.contextTypes={local:s().object.isRequired};const I=w},85149:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var n=i(23493),r=i.n(n),o=i(51463),s=i.n(o),l=i(32747),a=i.n(l),c=i(45697),d=i.n(c),u=i(82897),h=i(3798);const p={ellipsizer:{"max-height":0,overflow:"hidden","word-break":"break-word"}};function m(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const g={},f=new u.gq;class y extends l.PureComponent{constructor(e){super(e),m(this,"applyCss",(()=>{const{local:e}=this.context,{maxLines:t,overflow:i}=this.props,n=parseFloat(getComputedStyle(this._rootEl).lineHeight);e.jss.createRule({"max-height":t!==1/0&&t?n*t:"none",overflow:i}).applyTo(this._rootEl),this.handleEllipsizerReady()})),m(this,"handleEllipsizerReady",(()=>{const{onReady:e}=this.props;e()})),m(this,"handleWindowResize",(()=>{this.applyCss()})),m(this,"renderContent",(()=>{const{widgetStyles:{classes:e},text:t,children:i}=this.props,n=i||t;return e.ellipsizerInnerSpan?a().createElement("span",{className:e.ellipsizerInnerSpan},n):n})),this.handleEllipsizerReady=s()(this.handleEllipsizerReady),this.handleWindowResize=r()(this.handleWindowResize,300)}componentWillMount(){const{local:e}=this.context;(0,h.fu)({jss:e.jss,stylesSrc:p,styleSheetsDict:g,widgetId:e.id,sheetsManager:f})}componentDidMount(){const{local:e}=this.context;e.innerWrapperEl.addEventListener("resize",this.handleWindowResize),this.applyCss()}componentDidUpdate(){this.applyCss()}componentWillUnmount(){const{local:e}=this.context;(0,h.Yl)({widgetId:e.id,styleSheetsDict:g,sheetsManager:f}),e.innerWrapperEl.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()}render(){const{local:e}=this.context,t=g[e.id].sheet;return a().createElement("div",{ref:e=>{this._rootEl=e},className:t.classes.ellipsizer},this.renderContent())}}m(y,"propTypes",{maxLines:d().number,text:d().string,children:d().node,widgetStyles:d().object,onReady:d().func,overflow:d().string}),m(y,"defaultProps",{maxLines:1/0,text:"",overflow:"hidden",children:null,widgetStyles:{classes:{}},onReady:()=>{}}),m(y,"contextTypes",{local:d().object.isRequired})},30104:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>h});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(39381),a=i(3766),c=i(74186);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},d.apply(this,arguments)}function u(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class h extends n.PureComponent{constructor(e){super(e),u(this,"sendIsInViewport",(()=>{const{rec:{id:e},isInViewport:t}=this.props;this._source.postMessage(JSON.stringify({recId:e,payload:{type:"inViewportChange",isInViewport:t}}),"*")})),u(this,"checkOrigin",(e=>new URL(window.relapScriptSrc).hostname===new URL(e).hostname)),u(this,"handlePostMessage",(e=>{var t;const{global:i}=this.context,{adLabel:n,rec:r,isInViewport:o,onReady:s,onError:l,onComplete:a,onCustomEvent:c,onRecFollow:d}=this.props,{id:u}=r;if(!this.checkOrigin(e.origin)||"string"!=typeof e.data)return;let h;try{h=JSON.parse(e.data)}catch(e){console.log(e)}if(!h||u!==h.recId)return;this._source=e.source;const{payload:p}=h,{extCfgsDataStorage:m={}}=window;switch(p.type){case"initialized":this._source.postMessage(JSON.stringify({recId:u,payload:{type:"initialParams",rec:r,isInViewport:o,extCfgsDataStorage:m,adLabel:n,referer:(null==i||null===(t=i.location)||void 0===t?void 0:t.href)||null}}),"*");break;case"heightChange":this.setState({height:p.height});break;case"ready":s(),this.setState({isReady:!0});break;case"error":l();break;case"complete":a();break;case"customEvent":c(p.event);break;case"recFollow":d(p.options)}})),u(this,"handleIframeLoad",(()=>{const{rec:{id:e}}=this.props;this._iframeEl.contentWindow.postMessage(JSON.stringify({recId:e,payload:{type:"handshakeFromParentScript"}}),"*")})),this.state={height:0,isReady:!1}}componentWillMount(){window.addEventListener("message",this.handlePostMessage)}componentDidUpdate(e){const{isInViewport:t}=this.props;e.isInViewport!==t&&this._source&&this.sendIsInViewport()}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage)}render(){const{rec:{id:e,customRec:{name:t}}}=this.props,{height:i,isReady:n}=this.state;return r().createElement("div",{style:{width:"100%",position:"relative"}},r().createElement(c.Z,null),r().createElement(a.Z,d({},this.props,{isReady:n})),r().createElement("iframe",{ref:e=>{this._iframeEl=e},title:"Custom rec",src:`${(0,l.jk)("https://relap.mail.ru/v7/")}external_recs/${t}/index.html?id=${e}`,frameBorder:"no",scrolling:"no",style:{width:"100%",height:`${i}px`},onLoad:this.handleIframeLoad}))}}u(h,"propTypes",{adLabel:s().string,rec:s().shape({id:s().string.isRequired,customRec:s().shape({name:s().string.isRequired}).isRequired}).isRequired,isInViewport:s().bool,onRecFollow:s().func,onReady:s().func,onError:s().func,onComplete:s().func,onCustomEvent:s().func}),u(h,"contextTypes",{local:s().object.isRequired,global:s().object.isRequired}),u(h,"defaultProps",{adLabel:"",isInViewport:!1,onRecFollow:()=>{},onReady:()=>{},onError:()=>{},onComplete:()=>{},onCustomEvent:()=>{}})},78793:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(67368),a=i(36416),c=i(39381),d=i(57557),u=i.n(d),h=i(3766);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},p.apply(this,arguments)}function m(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends n.PureComponent{constructor(e){var t;super(e),t=this,m(this,"handleReady",(function(){const{onReady:e}=t.props;e(...arguments),t.setState({isReady:!0})})),this.state={isReady:!1}}getChildContext(){const{local:e,global:t}=this.props;return{local:e,global:t}}render(){const{Content:e,noAdChoice:t}=this.props,{isReady:i}=this.state,n=u()(this.props,["Content","local","global"]);return r().createElement("div",{style:{width:"100%",position:"relative"}},!t&&r().createElement(h.Z,p({},this.props,{isReady:i})),r().createElement(e,p({},n,{onReady:this.handleReady})))}}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},f.apply(this,arguments)}m(g,"propTypes",{Content:s().oneOfType([s().func,s().object]).isRequired,local:s().object.isRequired,global:s().object.isRequired,noAdChoice:s().bool,onReady:s().func}),m(g,"defaultProps",{noAdChoice:!1,onReady:()=>{}}),m(g,"childContextTypes",{local:s().object.isRequired,global:s().object.isRequired});const y=(e,t)=>{let{local:i,global:o}=t;const{noAdChoice:s=!1}=e,d=(0,n.useRef)(null),u=(0,n.useRef)({}),h=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const{el:e,shadowRootEl:t}=(0,l.Z)({anchorEl:d.current,position:"append",frameType:"relapCustomRec",wrapped:!1});return u.current=t.contentWindow,u.current.el=e,u.current.shadowRootEl=t,u.current.shadowRootElArr=[...i.shadowRootElArr||[],t],u.current.id=`${i.id}_module_${(0,c.dB)(i.id)}`,h.current=(0,a.L)(t.contentWindow,o),()=>{window.requestAnimationFrame((()=>{(0,a.k)({local:u.current})}))}}),[i,o]),(0,n.useEffect)((()=>{h.current&&h.current.render(r().createElement(g,f({},e,{local:u.current,global:o,noAdChoice:s})))}),[e,o,s]),r().createElement("div",{ref:d,style:{width:"100%"}})};y.contextTypes={local:s().object.isRequired,global:s().object.isRequired,noAdChoice:s().bool},y.propTypes={noAdChoice:s().bool};const v=y},88667:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var n=i(32747),r=i.n(n),o=i(28060),s=i(45697),l=i.n(s);const a={wrapper:{cursor:"pointer"},text:{overflow:"hidden",fontFamily:"Helvetica, Arial, sans-serif",lineHeight:"1.3",userSelect:"none",whiteSpace:"nowrap",textOverflow:"ellipsis"},primaryText:{extend:"text",fontSize:"14px"},secondaryText:{extend:"text",color:"#999",fontSize:"12px"}},c=(e,t)=>{let{ordToken:i}=e,{local:n,global:s}=t;const{classes:l}=(0,o.Z)({local:n,stylesSrc:a});if(!i)return null;return r().createElement("div",{onClick:async()=>{await s.navigator.clipboard.writeText(i)},className:l.wrapper},r().createElement("div",{className:l.primaryText},"Скопировать ID объявления"),r().createElement("div",{className:l.secondaryText},"ID: ",i))};c.contextTypes={local:l().object.isRequired,global:l().object.isRequired};const d=(0,n.memo)(c)},68705:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(82897),a=i(94184),c=i.n(a),d=i(29737),u=i(3798);const h={root:{position:"absolute",top:0,left:0,right:0,bottom:0}};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},p.apply(this,arguments)}function m(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const g={},f=new l.gq;class y extends n.PureComponent{componentWillMount(){const{local:e}=this.context;(0,u.fu)({jss:e.jss,stylesSrc:h,styleSheetsDict:g,widgetId:e.id,sheetsManager:f})}componentWillUnmount(){const{local:e}=this.context;(0,u.Yl)({widgetId:e.id,styleSheetsDict:g,sheetsManager:f})}render(){const{local:e}=this.context,{className:t,zIndex:i,onClick:n,title:o}=this.props,s=g[e.id].sheet,l=c()(s.classes.root,t);return r().createElement(d.Z,p({},this.props,{className:l,onClick:n,style:{zIndex:i},title:o}))}}m(y,"propTypes",{className:s().string,zIndex:s().oneOfType([s().number,s().string]),onClick:s().func,title:s().string}),m(y,"contextTypes",{local:s().object.isRequired}),m(y,"defaultProps",{className:"",zIndex:"auto",onClick:()=>{},title:""})},20592:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var n=i(23493),r=i.n(n),o=i(32747),s=i.n(o),l=i(45697),a=i.n(l),c=i(94184),d=i.n(c),u=i(28060);const h=e=>{const t=(0,o.useRef)();return(0,o.useEffect)((()=>{t.current=e}),[e]),t.current},p={root:{width:"100%",overflow:"hidden"},content:{position:"relative","&$contentBlock":{display:"block",width:"100%"},"&$contentInline":{display:"inline-block",width:"auto"}},contentBlock:{},contentInline:{}},m=(e,t)=>{let{children:i,percent:n=100,display:l="block",updateOnContentResize:a=!1,onScale:c}=e,{local:m}=t;const g=(0,o.useRef)(null),f=(0,o.useRef)(null),y=(0,o.useRef)(null),v=(0,o.useRef)(0),b=(0,o.useRef)(0),w=h(n),{classes:I}=(0,u.Z)({global:void 0,local:m,stylesSrc:p,data:{}}),C=(0,o.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=100!==n,i=g.current,r=f.current,o=y.current,s=o.offsetWidth,l=o.offsetHeight;if(!e&&v.current===s&&b.current===l)return;const a=n/100,d=s*a,u=l*a,h=(d-s)/2,p=(u-l)/2;Object.assign(i.style,t?{width:`${d}px`,height:`${u}px`}:{width:"",height:""}),Object.assign(r.style,t?{transform:`scale(${a})`,position:"absolute",left:`${h}px`,top:`${p}px`,width:`${s}px`}:{transform:"",position:"",left:"",top:"",width:""}),v.current=s,b.current=l,null==c||c({scaledWidth:d,scaledHeight:u,contentWidth:s,contentHeight:l})}),[n,c]);(0,o.useEffect)((()=>{C(n!==w)}),[n,w,C]),(0,o.useEffect)((()=>{if(a){const e=r()((()=>{C()}),200),t=new ResizeObserver(e);return t.observe(y.current),()=>{e.cancel(),t.disconnect()}}return()=>{}}),[a,C]);const R=d()(I.content,{[I.contentBlock]:"block"===l,[I.contentInline]:"inline"===l});return s().createElement("div",{ref:g,className:I.root},s().createElement("div",{ref:f},s().createElement("div",{ref:y,className:R},i)))};m.contextTypes={local:a().object.isRequired};const g=(0,o.memo)(m)},31911:(e,t,i)=>{"use strict";i.d(t,{Z:()=>B});var n=i(22762),r=i.n(n),o=i(10928),s=i.n(o),l=i(13311),a=i.n(l),c=i(45578),d=i.n(c),u=i(51463),h=i.n(u),p=i(23493),m=i.n(p),g=i(32747),f=i.n(g),y=i(45697),v=i.n(y),b=i(82897),w=i(94184),I=i.n(w),C=i(3798);const R={imgCroppedWrapper:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",overflow:"hidden","font-size":0},imgCropped:{display:"block","max-width":"none",width:"100%",height:"100%",objectFit:"cover"},imgFittedWrapper:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",position:"relative"},imgFitted:{width:"100%",height:"100%",objectFit:"contain",display:"block",position:"relative",zIndex:5},wrapperBlurBackground:{position:"absolute",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",fontSize:0,zIndex:1},wrapperBlurShade:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba( 0, 0, 0, 0.05)",zIndex:2}},S=["fit","fit-no-stretch"],E=["auto","auto-no-stretch"],x=["fit-no-stretch","auto-no-stretch"];function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},W.apply(this,arguments)}function T(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const P={},_=new b.gq;class k extends g.PureComponent{constructor(){super(...arguments),T(this,"hideImg",(()=>{const e=this._img;e.style.position="absolute",e.style.visibility="hidden"})),T(this,"handleImgLoad",(e=>{const{onLoad:t,onPreload:i,onImageSize:n}=this.props,r=this._img;if(!r)return;const{naturalWidth:o,naturalHeight:s}=r;o&&s&&(r.style.position="",r.style.visibility="",n({naturalWidth:o,naturalHeight:s,src:r.currentSrc}),i(),t(e))})),T(this,"getIsFitted",(()=>{const{imgInscribeType:e}=this.props;return S.includes(e)})),T(this,"getIsNoStretch",(()=>{const{imgInscribeType:e}=this.props;return x.includes(e)})),T(this,"getIsAnimated",(()=>{const{recType:e,isInViewportAnimation:t}=this.props;return"ad"===e&&t}))}componentWillMount(){const{local:e}=this.context;(0,C.fu)({jss:e.jss,stylesSrc:R,styleSheetsDict:P,widgetId:e.id,sheetsManager:_})}componentDidMount(){this.handleImgLoad()}componentWillReceiveProps(e){const{src:t}=this.props;t!==e.src&&this.hideImg()}componentDidUpdate(){const{naturalAR:e}=this.props;null===e&&this.hideImg()}componentWillUnmount(){const{local:e}=this.context;(0,C.Yl)({widgetId:e.id,styleSheetsDict:P,sheetsManager:_})}render(){const{local:e}=this.context,{src:t,crossOrigin:i,blurControl:n,isInViewport:r,isInViewportAnimation:o,recIndex:s,recType:l,blurRadius:a,onError:c,srcSet:d,sizes:u,blurSrc:h}=this.props,p=P[e.id].sheet,m=i?{crossOrigin:i}:{},g="no-blur"===n,y=this.getIsFitted(),v=this.getIsAnimated(),b=I()(y&&!v?p.classes.imgFittedWrapper:p.classes.imgCroppedWrapper),w=I()(y&&!v?p.classes.imgFitted:p.classes.imgCropped);let C={};if(this._img){const{naturalWidth:e,naturalHeight:t}=this._img;C=this.getIsNoStretch()&&y?{maxWidth:e,maxHeight:t}:{maxWidth:"initial",maxHeight:"initial"}}o&&(C.animationDelay=.6*s+1+"s");const R={backgroundImage:`url(${h})`,top:`-${2*a}px`,left:`-${2*a}px`,right:`-${2*a}px`,bottom:`-${2*a}px`,filter:`blur(${a}px)`};return f().createElement("div",{className:b},y&&!g&&!v&&f().createElement("div",{className:p.classes.wrapperBlurBackground,style:R}),f().createElement("img",W({className:w,src:t,srcSet:d,sizes:u,ref:e=>{this._img=e},onLoad:this.handleImgLoad,onError:c,alt:""},m,{style:C,"data-is-in-viewport":r,"data-rec-type":l})),y&&!g&&!v&&f().createElement("div",{className:p.classes.wrapperBlurShade}))}}T(k,"propTypes",{src:v().string.isRequired,srcSet:v().string.isRequired,sizes:v().string.isRequired,blurSrc:v().string.isRequired,aspectRatio:v().number,naturalAR:v().number,crossOrigin:v().oneOf(["anonymous","use-credentials",""]),imgInscribeType:v().oneOf(["crop","fit","fit-no-stretch"]),blurControl:v().oneOf(["no-blur","auto"]),isInViewport:v().bool,isInViewportAnimation:v().bool,recIndex:v().number,recType:v().string,onLoad:v().func,onError:v().func,onImageSize:v().func,onPreload:v().func,blurRadius:v().number}),T(k,"contextTypes",{local:v().object.isRequired}),T(k,"defaultProps",{aspectRatio:null,crossOrigin:null,naturalAR:null,imgInscribeType:"crop",blurControl:"auto",blurRadius:10,isInViewport:!1,isInViewportAnimation:!1,recIndex:0,recType:"",onLoad:()=>{},onPreload:()=>{},onImageSize:()=>{},onError:()=>{}});var L=i(39381),O=i(3808);const j={thumbnailWrapper:{position:"relative",display:"block",width:"100%",overflow:"hidden","font-size":0,zIndex:0},thumbnailLoaderWrapper:{position:"absolute",top:0,right:0,left:0,bottom:0,display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"100%",background:"#f0f2f2",zIndex:500},thumbnailLoader:{"border-radius":"50%",animation:"1s ease-in-out 0s normal none infinite $rotate","&$size0":{display:"none"},"&$size1":{width:"20px",height:"20px",border:"2px solid","border-color":"#e7eaea","border-bottom-color":"transparent"},"&$size2":{width:"40px",height:"40px",border:"4px solid","border-color":"#e7eaea","border-bottom-color":"transparent"}},fallbackWrapper:{extend:"thumbnailLoaderWrapper"},fallbackWider:{position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:500,"& > svg":{width:"100%",height:"100%",visibility:"hidden"}},fallback:{"& > svg":{width:"100%",height:"100%"},"&$size0":{display:"none"},"&$size1":{width:`${O.n}px`,height:`${O.k}px`},"&$size2":{width:2*O.n+"px",height:2*O.k+"px"}},size0:{},size1:{},size2:{},"@keyframes rotate":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}};var A=i(47189),M=i.n(A);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},D.apply(this,arguments)}function N(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const z={},F=new b.gq,V=(e,t)=>{var i;const n=(e=>d()(e,"width").sort(((e,t)=>e.width-t.width)))(e);return(null===(i=a()(n,(e=>e.width>t(e)))||s()(n))||void 0===i?void 0:i.src)||null};class B extends g.PureComponent{constructor(e){var t;super(e),t=this,N(this,"prepareSrc",(()=>{const e=this._wrapper.clientWidth,{src:t}=this.props;var i,n;this.setState({srcSet:t.map((e=>{let{src:t,width:i}=e;return`${t} ${i}w`})).join(", "),fallbackSrc:V(t,(t=>{const{aspectRatio:i}=this.props,n=t.width/t.height;return null===i||i>=n?e:n/i*e})),blurSrc:(i=t,(null===(n=r()(i,"width"))||void 0===n?void 0:n.src)||null)})})),N(this,"handlePreload",(()=>{const{onPreload:e}=this.props;e()})),N(this,"handleNaturalImageSize",(e=>{let{naturalWidth:t,naturalHeight:i,src:n}=e;const{onImageSizeGet:r}=this.props;this.setState({naturalWidth:t,naturalHeight:i},(()=>{this.updateWrapperHeight(),r({width:t,height:i,src:n})}))})),N(this,"calcWrapperHeight",(()=>{const{aspectRatio:e,aspectRatioFallback:t}=this.props,{naturalWidth:i,naturalHeight:n}=this.state,r=this._wrapper.clientWidth;if(i&&n&&!e){return r/(i/n)}return r/(null===e?t:e)})),N(this,"setImgInscribeType",(e=>{this.setState({imgInscribeType:e})})),N(this,"updateWrapperHeight",(()=>{if(!this._wrapper)return;const{aspectRatioApplyToRecs:e,aspectRatioApplyToRecTypes:t,recSize:i,recType:n,fitControl:r,onUpdateWrapperHeight:o}=this.props,{naturalWidth:s,naturalHeight:l,imgInscribeType:a}=this.state,c=this.calcWrapperHeight();this._wrapper.style.height=`${c}px`,o();const{fallbackSrc:d}=this.state;if(!E.includes(r))return void this.setImgInscribeType(r);if(!(d&&e.includes(i)&&t.includes(n)&&s&&l))return void(S.includes(a)&&this.setImgInscribeType("crop"));const u=this._wrapper.clientWidth,h=u/c,p=s/l;let m=0;const g="wide"===i?15:20;if(p>h){const e=l/(s/u);m=100*Math.abs(1-e/c)}if(p<h){const e=s/(l/c);m=100*Math.abs(1-e/u)}const f=x.includes(r)?"-no-stretch":"";this.setImgInscribeType(m>g?`fit${f}`:"crop")})),N(this,"updateWidthSize",(()=>{this._wrapper&&this.setState({size:(0,L.bV)(this._wrapper)})})),N(this,"handleWidgetResize",(()=>{this.updateWrapperHeight(),this.updateWidthSize()})),N(this,"handleImgLoadError",(()=>{this.setState({status:"failed"},this.handlePreload)})),N(this,"handleImgLoad",(function(){let{target:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onLoad:i}=t.props;t.setState({status:"complete"}),i({imgEl:e})})),N(this,"renderLoader",(()=>{const{local:e}=this.context,{status:t,size:i}=this.state;if("loading"!==t)return null;const n=z[e.id].sheet,r=I()(n.classes.thumbnailLoader,n.classes[`size${i}`]);return f().createElement("div",{className:n.classes.thumbnailLoaderWrapper},f().createElement("div",{className:r}),";")})),N(this,"renderFallback",(()=>{const{local:e}=this.context,{status:t,size:i}=this.state;if("failed"!==t)return null;const n=z[e.id].sheet,r=I()(n.classes.fallback,n.classes[`size${i}`]);return f().createElement("div",{className:n.classes.fallbackWider},f().createElement(M(),null),f().createElement("div",{className:n.classes.fallbackWrapper},f().createElement("div",{className:r},f().createElement(M(),null))))})),N(this,"renderImgCropped",(()=>{const{aspectRatio:e,crossOrigin:t,onPreload:i,blurControl:n,blurRadius:r,recType:o,isInViewport:s,isInViewportAnimation:l,recIndex:a}=this.props,{fallbackSrc:c,imgInscribeType:d,naturalWidth:u,naturalHeight:h,srcSet:p,blurSrc:m}=this.state,{local:g}=this.context;if(!c)return null;const y=t?{crossOrigin:t}:{},v=u&&h?u/h:null,b=this._wrapper.clientWidth,w=b/g.el.clientWidth*100,I=10*Math.round(w/10)+"vw",C=50*Math.round(b/50)+"px",R=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return f().createElement(k,D({},y,{sizes:R?C:I,src:c,blurSrc:m,srcSet:p,aspectRatio:e,naturalAR:v,imgInscribeType:d,blurControl:n,blurRadius:r,isInViewport:s,isInViewportAnimation:l,recIndex:a,recType:o,onImageSize:this.handleNaturalImageSize,onPreload:i,onLoad:this.handleImgLoad,onError:this.handleImgLoadError}))})),this.state={status:e.src.length?"loading":"failed",size:2,imgInscribeType:"crop"},this.handlePreload=h()(this.handlePreload),this.originalHandleWidgetResize=this.handleWidgetResize,this.handleWidgetResize=m()(this.handleWidgetResize,300)}componentWillMount(){const{local:e}=this.context;(0,C.fu)({jss:e.jss,stylesSrc:j,styleSheetsDict:z,widgetId:e.id,sheetsManager:F})}componentDidMount(){const{local:e}=this.context,{setThumbItem:t}=this.props;e.innerWrapperEl.addEventListener("resize",this.handleWidgetResize),this.originalHandleWidgetResize(),this.updateWrapperHeight(),this.updateWidthSize(),this.handlePreload(),t(this._wrapper),this.prepareSrc()}componentDidUpdate(){const{setThumbItem:e,src:t}=this.props,{srcSet:i}=this.state;i.length!==t.length&&this.prepareSrc(),this.originalHandleWidgetResize(),e(this._wrapper)}componentWillUnmount(){const{local:e}=this.context;(0,C.Yl)({widgetId:e.id,styleSheetsDict:z,sheetsManager:F}),e.innerWrapperEl.removeEventListener("resize",this.handleWidgetResize),this.handleWidgetResize.cancel(),this.tempImg&&(this.tempImg.src="")}render(){const{local:e}=this.context,t=z[e.id].sheet;return f().createElement("div",{className:t.classes.thumbnailWrapper,ref:e=>{this._wrapper=e},style:{minHeight:"1px"}},this.renderImgCropped(),this.renderLoader(),this.renderFallback())}}N(B,"propTypes",{src:v().arrayOf(v().shape({width:v().number.isRequired,height:v().number.isRequired,src:v().string.isRequired})),aspectRatio:v().number,aspectRatioApplyToRecs:v().array,aspectRatioApplyToRecTypes:v().array,recSize:v().string,recType:v().string,aspectRatioFallback:v().number,crossOrigin:v().oneOf(["anonymous","use-credentials",""]),blurControl:v().oneOf(["blur","no-blur","auto"]),fitControl:v().oneOf(["fit","fit-no-stretch","crop","auto-no-stretch","auto"]),blurRadius:v().number,isInViewport:v().bool,isInViewportAnimation:v().bool,recIndex:v().number,onPreload:v().func,onLoad:v().func,onUpdateWrapperHeight:v().func,onImageSizeGet:v().func,setThumbItem:v().func}),N(B,"contextTypes",{local:v().object.isRequired}),N(B,"defaultProps",{src:[],aspectRatio:null,aspectRatioFallback:21/16,aspectRatioApplyToRecs:["normal"],aspectRatioApplyToRecTypes:["ad"],recSize:"",recType:"",crossOrigin:null,blurControl:"auto",fitControl:"auto",blurRadius:10,isInViewport:!1,isInViewportAnimation:!1,recIndex:0,onPreload:()=>{},onLoad:()=>{},onUpdateWrapperHeight:()=>{},onImageSizeGet:()=>{},setThumbItem:()=>{}})},51682:(e,t,i)=>{"use strict";i.d(t,{FP:()=>n,NA:()=>o,c2:()=>s,j_:()=>r});const n={INIT:"init",SHOW:"show",CLICK:"click",CLICK_CLOSE:"click_close",TIMER_CLOSE:"timer_close",getTimerTickEvent:e=>`timer_tick_${e}`},r=!0,o=10,s=3},84078:(e,t,i)=>{"use strict";i.d(t,{H:()=>o});var n=i(45697),r=i.n(n);const o={local:r().object.isRequired,global:r().object.isRequired,isPreview:r().bool}},19775:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(28499),a=i(88661),c=i(67368),d=i(36416),u=i(39381);function h(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p=()=>Promise.all([i.e(42945),i.e(54736),i.e(32747),i.e(46791)]).then(i.bind(i,36470)),m=()=>Promise.all([i.e(42945),i.e(54736),i.e(32747),i.e(63790)]).then(i.bind(i,67642));class g extends n.Component{constructor(){super(...arguments),h(this,"initWidget",(e=>{let{previewCfg:t,cfgId:i,cfg:n,recs:r,loadMoreInProgress:o,onReady:s,onLoadMoreButtonClick:l,onInfiniteScrollIntersect:a}=e;const h="imgOverlay"===n.preset,p=h?this._rootEl.parentElement.parentElement.querySelector("img"):this._rootEl,m=(0,u.f6)(i),g=h?"img_overlay":"append",{el:f,shadowRootEl:y}=(0,c.Z)({anchorEl:p,position:g,frameType:"relapWidget",instanceId:m,cfgId:i,wrapped:!0,globalObj:{id:m},additionalWidgetClassNames:null==n?void 0:n.additionalWidgetClassNames});y.contentWindow.el=f,y.contentWindow.shadowRootEl=y,this._local=y.contentWindow,this._id=m,this._iframePromise=new Promise((e=>{this._widgetReactRoot=(0,d.L)(y.contentWindow,window.global),e()})),this._iframePromise.then((()=>{this.handleWidgetRender({previewCfg:t,cfg:n,cfgId:i,recs:r,loadMoreInProgress:o,onReady:s,onLoadMoreButtonClick:l,onInfiniteScrollIntersect:a})}))})),h(this,"destroyWidget",(()=>{(0,d.k)({local:this._local}),delete this._widgetReactRoot,this._rootEl.innerHTML=""})),h(this,"getRecsAndSlotsFromRecsSrc",(e=>({recs:e.reduce(((e,t)=>(e[t.id]=t,e)),{}),slots:e.map((e=>{let{id:t,type:i,size:n}=e;return{slotId:t,recId:t,types:[i],type:"slot",size:n,filters:[]}}))}))),h(this,"handleWidgetRender",(e=>{const{cfg:t,cfgId:i,recs:n,loadMoreInProgress:o,previewCfg:s,onReady:c,onLoadMoreButtonClick:d,onInfiniteScrollIntersect:u}=e,{theme:h}=t;this._widgetReactRoot&&Promise.all([(0,l.Z)(h),this._iframePromise]).then((e=>{const l=e[0],{recs:h,slots:g}=this.getRecsAndSlotsFromRecsSrc(n);this._widgetReactRoot.render(r().createElement(l,{isPreview:!0,id:this._id,local:this._local,global:window.global,loadCustomRec:a.Z,loadVideoComponent:p,loadFormComponent:m,cfgId:i,previewCfg:s,cfg:t,recs:h,slots:g,ready:!0,visible:!0,initialFetchStatus:"complete",loadMoreInProgress:o,onWidgetReady:c,onLoadMoreButtonClick:d,onInfiniteScrollIntersect:u}))}))})),h(this,"refRoot",(e=>{this._rootEl=e}))}componentDidMount(){this.initWidget(this.props)}componentWillReceiveProps(e){const{previewCfg:t,cfg:i,cfgId:n,recs:r,loadMoreInProgress:o,onReady:s,onLoadMoreButtonClick:l,onInfiniteScrollIntersect:a}=e,{cfg:c}=this.props;c.theme!==i.theme?(this.destroyWidget(),this.initWidget(e)):this._iframePromise.then((()=>{this.handleWidgetRender({previewCfg:t,cfg:i,cfgId:n,recs:r,loadMoreInProgress:o,onReady:s,onLoadMoreButtonClick:l,onInfiniteScrollIntersect:a})}))}shouldComponentUpdate(){return!1}componentWillUnmount(){this.destroyWidget()}render(){return r().createElement("div",{ref:this.refRoot})}}h(g,"propTypes",{cfgId:s().string,cfg:s().shape({theme:s().string.isRequired}).isRequired,recs:s().arrayOf(s().shape({id:s().string.isRequired,recCtx:s().string.isRequired,href:s().string.isRequired,thumbnails:s().arrayOf(s().shape({width:s().number.isRequired,height:s().number.isRequired,src:s().string.isRequired})),title:s().string,description:s().string,disclaimer:s().string,type:s().oneOf(["normal","ad","promo","exchange"])})).isRequired,previewCfg:s().object,loadMoreInProgress:s().bool,onReady:s().func,onLoadMoreButtonClick:s().func,onInfiniteScrollIntersect:s().func}),h(g,"defaultProps",{previewCfg:{},cfgId:"widget_preview_cfg_id",loadMoreInProgress:!1,onReady:()=>{},onLoadMoreButtonClick:()=>{},onInfiniteScrollIntersect:()=>{}})},42049:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var n=i(51463),r=i.n(n),o=i(32747),s=i.n(o),l=i(45697),a=i.n(l),c=i(94184),d=i.n(c),u=i(82897),h=i(3798);const p={moveForward:{"animation-name":"$moveForward"},moveBack:{"animation-name":"$moveBack"},"@keyframes moveForward":{from:{transform:"translateX(var(--mws))"},to:{transform:"translateX(var(--mwf))"}},"@keyframes moveBack":{from:{transform:"translateX(var(--mws))"},to:{transform:"translateX(var(--mwf))"}}};function m(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const g={},f=new u.gq;class y extends o.PureComponent{constructor(e){super(e),m(this,"handleDisclaimerReady",(()=>{const{onReady:e}=this.props;e()})),m(this,"getTranslateX",(()=>Math.abs(+getComputedStyle(this._text).transform.match(/([^)]+)\((.*)\)/)[2].split(",")[4]))),m(this,"moveForward",(()=>{const{local:e}=this.context,{clientWidth:t}=this._text,i=this._text.parentNode.clientWidth,n=i-t,r=this.getTranslateX(),o={"animation-duration":(t-i-r)/50+"s","--mws":`-${r}px`,"--mwf":`${n<0?n:0}px`};this.setState({animation:"forward"},(()=>{e.jss.createRule(o).applyTo(this._text)}))})),m(this,"moveBack",(()=>{const{local:e}=this.context,t=this.getTranslateX(),i={"animation-duration":t/50+"s","--mws":`-${t}px`,"--mwf":"0px"};this.setState({animation:"back"},(()=>{e.jss.createRule(i).applyTo(this._text)}))})),this.state={animation:"none"},this.handleDisclaimerReady=r()(this.handleDisclaimerReady)}componentWillMount(){const{local:e}=this.context;(0,h.fu)({jss:e.jss,stylesSrc:p,styleSheetsDict:g,widgetId:e.id,sheetsManager:f})}componentDidMount(){const{local:e}=this.context;e.jss.createRule({"animation-fill-mode":"forwards","animation-direction":"normal","animation-delay":"0s","animation-iteration-count":1,"animation-timing-function":"linear","animation-duration":"var(--ms)"}).applyTo(this._text),this.handleDisclaimerReady()}componentWillUnmount(){const{local:e}=this.context;(0,h.Yl)({widgetId:e.id,styleSheetsDict:g,sheetsManager:f})}render(){const{local:e}=this.context,{disclaimer:t,styles:i}=this.props,{animation:n}=this.state,r=d()(i.classes.disclaimerText,{[g[e.id].sheet.classes.moveForward]:"forward"===n,[g[e.id].sheet.classes.moveBack]:"back"===n});return s().createElement("div",{onFocus:this.moveForward,onMouseOver:this.moveForward,onMouseLeave:this.moveBack,ref:e=>{this._text=e},className:r},t)}}m(y,"propTypes",{styles:a().object,type:a().oneOf(["normal","ad","promo","exchange"]),size:a().oneOf(["normal","wide"]),title:a().string,titleCfg:a().shape({maxLines:a().number}),description:a().string,descriptionCfg:a().shape({maxLines:a().number}),disclaimer:a().string,label:a().string,category:a().string,categoryUrl:a().string,pubDate:a().string,meta:a().object,onReady:a().func}),m(y,"contextTypes",{local:a().object.isRequired}),m(y,"defaultProps",{styles:{classes:{}},type:"normal",size:"normal",title:"",titleCfg:{},description:"",descriptionCfg:{},disclaimer:"",label:"",category:"",categoryUrl:"",pubDate:"",meta:{},onReady:()=>{}})},4348:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var n=i(32747),r=i.n(n),o=i(84078),s=i(16804),l=i(4251),a=i(28060),c=i(81504);const d={...i(72584).Z,bar:{alignItems:"center",position:"absolute",top:0,left:0,zIndex:10203,display:"flex",width:"100%",height:"24px",background:"#000"},progress:{position:"absolute",zIndex:-1,top:0,left:0,width:"100%",height:"100%",background:"#65717A",transformOrigin:"left center",transition:"transform 1s linear"},text:{position:"relative",zIndex:1,display:"flex",justifyContent:"center",width:"100%",fontFamily:"Arial",fontWeight:"400",fontSize:"11px",lineHeight:"16px",color:"#BFC4C8"},closeButton:{position:"absolute",top:0,right:0,zIndex:2,display:"flex",flexShrink:0,width:"24px",height:"24px",cursor:"pointer","&:hover":{background:"rgba(255, 255, 255, 0.2)"},"&:focus, &:active":{background:"linear-gradient(0deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.3)), rgba(255, 255, 255, 0.2)"}},closeButtonIcon:{margin:"auto",width:"10px",height:"10px",fill:"#BFC4C8","$closeButton:focus &, $closeButton:active &":{fill:"#FFFFFF"}},"@media (min-width: 0px)":{bar:{height:"32px"},text:{fontSize:"12px"},closeButton:{width:"32px",height:"32px"},closeButtonIcon:{width:"14px",height:"14px"}}},u=(e,t)=>{let{onCloseClick:i,onTimerTick:o,adLabel:u,duration:h=0}=e,{local:p,global:m}=t;const{classes:g}=(0,a.Z)({local:p,global:m,stylesSrc:d,data:{}}),f=Math.max(h,0),y=Boolean(f),v=(0,l.Z)(m.document),{countdown:b,firstTick:w}=(0,s.Z)(f,!v);return(0,n.useEffect)((()=>{null==o||o(b)}),[b,o]),r().createElement("div",{className:g.bar},y&&r().createElement("div",{key:f,className:g.progress,style:{transform:`scaleX(${(w?b:Math.max(0,b-1))/f})`}}),r().createElement("div",{className:g.text},u," ",y&&`${b} ${(0,c.Z)(b,["секунда","секунды","секунд"])}`),r().createElement("div",{className:g.closeButton},r().createElement("svg",{onClick:e=>{e.stopPropagation(),i()},width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:g.closeButtonIcon},r().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7L0.292893 1.70711C-0.0976316 1.31658 -0.0976316 0.683418 0.292893 0.292894C0.683417 -0.0976305 1.31658 -0.0976306 1.70711 0.292894L7 5.58579L12.2929 0.292894C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292894C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683417 14.0976 0.292893 13.7071Z"}))))};u.contextTypes=o.H;const h=(0,n.memo)(u)},78612:(e,t,i)=>{"use strict";i.d(t,{e:()=>n});const n=32},78794:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(82897),a=i(94184),c=i.n(a),d=i(3798);const u={recLayoutRoot:{width:"100%"},thumbnailWrapper:{position:"relative"},textContent:{position:"relative","z-index":100}};function h(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p={},m=new l.gq;class g extends n.PureComponent{componentWillMount(){const{local:e}=this.context;(0,d.fu)({jss:e.jss,stylesSrc:u,styleSheetsDict:p,widgetId:e.id,sheetsManager:m})}componentWillUnmount(){const{local:e}=this.context;(0,d.Yl)({widgetId:e.id,styleSheetsDict:p,sheetsManager:m})}render(){const{local:e}=this.context,{styles:t,size:i,linkOverlay:n,closeButton:o,video:s,thumbnail:l,title:a,description:d,disclaimer:u,label:h,callButton:m,adChoice:g,ageRestriction:f}=this.props,y=p[e.id].sheet,v=c()(y.classes.recLayoutRoot,t.classes.recLayoutRoot,{[t.classes.recLayoutNormalSize]:"normal"===i,[t.classes.recLayoutWideSize]:"wide"===i}),b=c()(y.classes.textContent,t.classes.textContent),w=c()(y.classes.thumbnailWrapper,t.classes.thumbnailWrapper);return r().createElement("div",{className:v},m,n,o,s,g,f,r().createElement("div",{className:w},l,u),r().createElement("div",{className:b},a,d,h))}}h(g,"propTypes",{styles:s().object,type:s().oneOf(["normal","ad","promo","exchange"]),size:s().oneOf(["normal","wide"]),linkOverlay:s().node,closeButton:s().node,video:s().node,thumbnail:s().node,title:s().node,description:s().node,disclaimer:s().node,label:s().node,callButton:s().node,adChoice:s().node,ageRestriction:s().node,category:s().node,meta:s().object}),h(g,"contextTypes",{local:s().object.isRequired}),h(g,"defaultProps",{styles:{classes:{}},type:"normal",size:"normal",linkOverlay:null,closeButton:null,video:null,thumbnail:null,title:null,description:null,disclaimer:null,label:null,category:null,callButton:null,adChoice:null,ageRestriction:null,meta:{}})},92255:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(94184),a=i.n(l),c=i(20745);function d(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends n.PureComponent{componentWillMount(){const{local:{el:e}}=this.context,{exposedSliderStyles:t}=this.props,i=document.createElement("div");i.className=a()(t.classes.actionButtonWrapper,"js-relap-action-button"),e.appendChild(i),this._reactRoot=(0,c.s)(i)}componentDidMount(){const{children:e}=this.props;this._reactRoot.render(e)}componentDidUpdate(){const{children:e}=this.props;this._reactRoot.render(e)}componentWillUnmount(){this._reactRoot.unmount()}render(){return null}}d(u,"propTypes",{exposedSliderStyles:s().object,children:s().node.isRequired}),d(u,"defaultProps",{exposedSliderStyles:{classes:{}}}),d(u,"contextTypes",{local:s().object.isRequired});var h=i(74618),p=i.n(h);function m(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends n.PureComponent{render(){const{exposedSliderStyles:e,widgetStyles:t,isCollapsed:i,widgetBase:n,onActionButtonClick:o,isSpecialSlider:s}=this.props,l=a()({[e.classes.actionButton]:!0,[e.classes.actionButtonCollapsed]:i}),c=a()({[t.classes.sliderLayout]:!s,[t.classes.sliderLayoutTransparent]:s});return r().createElement("div",{className:c},!s&&r().createElement(u,{exposedSliderStyles:e},r().createElement("div",{className:l,onClick:o},r().createElement(p(),null))),n)}}m(g,"propTypes",{widgetStyles:s().object,exposedSliderStyles:s().object,isCollapsed:s().bool,widgetBase:s().node.isRequired,isSpecialSlider:s().bool,onActionButtonClick:s().func}),m(g,"defaultProps",{widgetStyles:{classes:{}},exposedSliderStyles:{classes:{}},isCollapsed:!1,isSpecialSlider:!1,onActionButtonClick:()=>{}})},66005:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(94184),a=i.n(l);function c(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends n.PureComponent{constructor(){super(...arguments),c(this,"renderLoadMoreButton",(()=>{const{widgetStyles:e,loadMoreButtonOverlay:t,loadMoreButtonLabel:i,loadMoreInProgress:n}=this.props;if(!t&&!n)return null;const o=a()(e.classes.loadMoreButton,{[e.classes.loadMoreButtonInProgress]:n}),s=n?r().createElement("div",{className:e.classes.loadMoreButtonLoader}):null,l=t?r().createElement("div",{className:e.classes.loadMoreButtonContent},i):null;return r().createElement("div",{className:e.classes.loadMoreButtonWrapper},r().createElement("div",{className:o},n?null:t,s,l))}))}render(){const{GridLayout:e,widgetStyles:t,mainTitle:i,gridItems:n,grid:o,logo:s,isFlyrolled:l,slots:c,onMoreRecsLoad:d,loadMoreInProgress:u,positioningAlign:h,onGridOverflow:p,onRecsSizeChange:m,onGridVisibleItemsChange:g,onRowWidthChange:f}=this.props,y=a()(t.classes.widgetBaseLayout,{[t.classes.widgetBaseLayoutFlyrolled]:l});return r().createElement("div",{className:y},r().createElement(e,{widgetStyles:t,mainTitle:i,items:n,cfg:o,loadMoreButton:this.renderLoadMoreButton(),logo:s,slots:c,loadMoreInProgress:u,positioningAlign:h,onOverflow:p,onRecsSizeChange:m,onVisibleItemsChange:g,onMoreRecsLoad:d,onRowWidthChange:f}))}}c(d,"propTypes",{GridLayout:s().func.isRequired,widgetStyles:s().object,mainTitle:s().node,gridItems:s().array,grid:s().object.isRequired,loadMoreButtonOverlay:s().node,loadMoreButtonLabel:s().string,loadMoreInProgress:s().bool,logo:s().node,isFlyrolled:s().bool,slots:s().array,positioningAlign:s().string,onGridOverflow:s().func,onRecsSizeChange:s().func,onGridVisibleItemsChange:s().func,onMoreRecsLoad:s().func,onRowWidthChange:s().func}),c(d,"defaultProps",{widgetStyles:{classes:{}},mainTitle:null,gridItems:[],loadMoreButtonOverlay:null,loadMoreButtonLabel:"",loadMoreInProgress:!1,logo:null,isFlyrolled:!1,slots:[],positioningAlign:"center",onGridOverflow:()=>{},onRecsSizeChange:()=>{},onGridVisibleItemsChange:()=>{},onMoreRecsLoad:()=>{},onRowWidthChange:()=>{}})},85019:(e,t,i)=>{"use strict";function n(e){let t={};try{t=new URL(e)}catch(e){return!1}const{protocol:i}=t;return"http:"===i||"https:"===i}i.d(t,{W:()=>n})},63248:(e,t,i)=>{"use strict";function n(e){let{positionId:t,v6CompatCfgId:i,isV6Compat:n}=e;const r=[];return r.getV7AnchorCandidates=function(){const e=document.querySelectorAll.apply(window.global.document,[[`.js-relap-anchor[data-relap-id="${t}"]`,`.js-relap-form-anchor[data-relap-id="${t}"]`]]);for(let t=0;t<e.length;t++)this.push({anchorEl:e[t],version:"v7"})},r.getV6AnchorCandidate=function(){const e=window.global.document.getElementById(i);e&&this.push({anchorEl:e,version:"v6"})},r.getV6MultiAnchorCandidates=function(){const e=window.global.document.querySelectorAll(`.js-relap-multi-anchor[data-id="${i}"]`);for(let t=0;t<e.length;t++)this.push({anchorEl:e[t],version:"v6"})},r.getV7AnchorCandidates(),n&&(r.getV6AnchorCandidate(),r.getV6MultiAnchorCandidates()),r.slice()}i.d(t,{a:()=>n})},69422:(e,t,i)=>{"use strict";if(i.d(t,{T:()=>r}),66458==i.j)var n=i(1557);function r(e,t){if("img_overlay"!==e)return;if("IMG"===t.tagName)return(0,n.V)(t);const i=t.querySelector("img")||t.parentElement.querySelector("img");return(0,n.V)(i)}},1557:(e,t,i)=>{"use strict";if(i.d(t,{V:()=>r}),66458==i.j)var n=i(85019);const r=e=>{if(!e||"IMG"!==e.tagName)return;const{dataset:{src:t,lazySrc:i}={},src:r}=e;let o="";try{o=window.top.location.origin}catch(e){console.log(e)}return[r,t,i].map((e=>/^\/[\w\d]+/.test(e)?`${o}${e}`:e)).find((e=>e&&(0,n.W)(e)))}},33676:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c,V:()=>a.V});var n=i(39381);if(66458==i.j)var r=i(33249);if(66458==i.j)var o=i(47850);if(66458==i.j)var s=i(92113);var l=i(44527);if(66458==i.j)var a=i(1557);const c=66458==i.j?function(e,t){var i;const{payload:{positioning:a}}=e;if(!(0,n.LA)(e))return[];let c;switch(a.positionBy){case"byAnchorEl":const n=a.byAnchorEl||{};c=(0,r.P)({position:n.position,positionId:null!==(i=n.id)&&void 0!==i?i:e.id,cfg:e,multiInstance:a.multiInstance,isV6Compat:t});break;case"byAnchorCss":c=(0,o.l)({position:a.byAnchorCss.position,selector:a.byAnchorCss.selector,cfg:e,multiInstance:a.multiInstance});break;case"byArticleCss":c=(0,s.W)({arcticleSelector:a.byArticleCss.arcticleSelector,paragraphSelector:a.byArticleCss.paragraphSelector,paragraphNum:a.byArticleCss.paragraphNum,forbiddenElemSelector:a.byArticleCss.forbiddenElemSelector,position:a.byArticleCss.position,cfg:e,multiInstance:a.multiInstance});break;default:c=[]}return c.length&&(0,l.q)(e)?c:[]}:null},47850:(e,t,i)=>{"use strict";if(i.d(t,{l:()=>r}),66458==i.j)var n=i(69422);function r(e){let{selector:t,position:i="before",cfg:r,multiInstance:o}=e,s=[];if(o)s=window.global.document.querySelectorAll(t);else{const e=window.global.document.querySelector(t);e&&s.push(e)}return[].map.call(s,(e=>({anchorEl:e,position:i,cfgId:r.id,additionalParams:{imgOverlaySrc:(0,n.T)(i,e)}})))}},33249:(e,t,i)=>{"use strict";if(i.d(t,{P:()=>o}),66458==i.j)var n=i(69422);if(66458==i.j)var r=i(63248);function o(e){var t;let{position:i="before",positionId:o,cfg:s,multiInstance:l,isV6Compat:a}=e;const c=(0,r.a)({positionId:o,v6CompatCfgId:(null===(t=s.payload.v6Compat)||void 0===t?void 0:t.widgetCfgId)||"",isV6Compat:a});return(l?c:c.slice(0,1)).map((e=>{let{anchorEl:t,version:r}=e;return{anchorEl:t,position:"v7"===r?i:"before",cfgId:s.id,additionalParams:{imgOverlaySrc:(0,n.T)(i,t.parentElement)},customWidgetData:{utm:t.dataset.relapUtm}}}))}},92113:(e,t,i)=>{"use strict";if(i.d(t,{W:()=>o}),66458==i.j)var n=i(13844);if(66458==i.j)var r=i(69422);function o(e){let{arcticleSelector:t,paragraphSelector:i,paragraphNum:o,forbiddenElemSelector:s=null,position:l="before",cfg:a,multiInstance:c}=e,d=[];if(c)d=window.global.document.querySelectorAll(t),s&&(d=[].filter.call(d,(e=>!e.querySelector(s))));else{let e=window.global.document.querySelector(t);s&&e&&e.querySelector(s)&&(e=null),e&&d.push(e)}return[].map.call(d,(e=>{const t=e.querySelectorAll(i);if(o>t.length+1)return(0,n.Z)(`No paragraph found for id: ${a.id}`),{};if(o===t.length+1&&"img_overlay"!==l){return{anchorEl:t[t.length-1],position:"after",cfgId:a.id}}const s=t[o-1];return s?{anchorEl:s,position:"img_overlay"===l?l:"before",cfgId:a.id,additionalParams:{imgOverlaySrc:(0,r.T)(l,s)}}:((0,n.Z)(`No paragraph found for id: ${a.id}`),{})}))}},43402:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});class n{constructor(e){this.finalCallback=e,this.promises=[],this.dict={},this.finalized=!1}createCb(e){const{dict:t}=this;if(t[e])return t[e];if(this.finalized)return()=>{};let i;const n=new Promise((e=>{i=e}));return this.promises.push(n),t[e]=i,i}finalize(){this.finalized||(this.finalized=!0,Promise.all(this.promises).then(this.finalCallback))}}},48192:(e,t,i)=>{"use strict";function n(e,t){const i={};return Object.keys(t).forEach((n=>{e[n]?i[n]=[...e[n],t[n]]:i[n]=[t[n]]})),{...e,...i}}i.d(t,{Z:()=>n})},67368:(e,t,i)=>{"use strict";function n(e){let{anchorEl:t,position:i,frameType:n,cfgId:r="",instanceId:o="",globalObj:s,wrapped:l=!1,isFlyRollable:a,additionalWidgetClassNames:c=""}=e;const d=document.createElement("div");switch(d.contentWindow={shadowRoot:d.attachShadow({mode:"closed"}),initialized:!0,frameType:n},s&&Object.keys(s).forEach((e=>{d.contentWindow[e]=s[e]})),n){case"relapWidget":d.style.position="relative",d.style.zIndex="0",d.style.width="100%",d.className=c?`js-relap-widget ${c}`:"js-relap-widget",d.setAttribute("data-relap-widget-cfg-id",r),d.setAttribute("data-relap-widget-instance-id",o);break;case"relapAdmin":case"relapCustomRec":break;default:d.style.position="absolute",d.style.visibility="hidden",d.style.left="-9999px",d.style.top="-9999px"}let u,h;if(l){if(h=document.createElement("div"),h.className="js-relap-widget-wrapper",h.style.visibility="hidden",h.style.flexGrow="1",a){const e=document.createElement("div");e.className="js-relap-widget-inner";const t=document.createElement("div");t.className="js-relap-widget-placeholder",e.appendChild(d),t.appendChild(e),h.appendChild(t)}else if("img_overlay"===i){const e=document.createElement("div");e.style.position="absolute",e.style.zIndex="5",e.className="js-relap-widget-inner-wrapper",h.style.position="relative",h.appendChild(e),e.appendChild(d)}else h.appendChild(d);u=h}else u=d;if(t)switch(i){case"img_overlay":if("IMG"===t.tagName)t.parentNode.insertBefore(u,t);else{const{firstChild:e}=t;e?t.insertBefore(u,e):t.appendChild(u)}break;case"prepend":const{firstChild:e}=t;e?t.insertBefore(u,e):t.appendChild(u);break;case"append":t.appendChild(u);break;case"after":const i=t.parentNode,n=t.nextSibling;n?i.insertBefore(u,n):i.appendChild(u);break;default:t.parentNode.insertBefore(u,t)}else window.global.document.body.appendChild(u);if(h){const e=h.offsetWidth;h.style.width=`${e}px`,h.style.position="absolute"}return{el:u,shadowRootEl:d}}i.d(t,{Z:()=>n})},8661:(e,t,i)=>{"use strict";i.d(t,{Z:()=>Pi});var n=i(32747),r=i.n(n),o=i(45697),s=i.n(o),l=i(23493),a=i.n(l),c=i(86624),d=i(57239),u=i(11697),h=i(51463),p=i.n(h),m=i(44892),g=i(69906),f=i(68299);const y=/\.|\s|-|:/g,v=e=>e.replace(y,"_"),b=e=>{let t="";try{t=window.top.location.href}catch(e){}let i="unknown_domain";try{i=v(new URL(t||e).host)}catch(e){}return i},w=p()((()=>{const{perfData:e,url:t}=(0,m.Z)().getState(),i=`render_sequence.${(0,f.d)()}.${b(t)}.fetch_init_data`,n=(r=e.filter((e=>{let{groupId:t}=e;return"init"===t})),o=i,r.reduce(((e,t)=>{let{processId:i,start:n,end:r}=t;return e.push({type:"avg",path:`${o}.${v(i)}_start`,value:n}),e.push({type:"avg",path:`${o}.${v(i)}_stop`,value:r}),e}),[]));var r,o;(0,g.o)(n)})),I=e=>{const{perfData:t,rights:i,url:n}=(0,m.Z)().getState(),r=(0,f.d)();if(i.includes("admin")||!r)return;const o=`render_sequence.${r}.${b(n)}.widget_load.${e}`,s=t.filter((t=>{let{groupId:i}=t;return i===`widget ${e}`})).reduce(((e,t)=>{let{processId:i,start:n,end:r}=t;const s=/load.+theme/gi.test(i)?"load_theme":v(i);return e.push({type:"avg",path:`${o}.${s}_start`,value:n}),e.push({type:"avg",path:`${o}.${s}_stop`,value:r}),e}),[]);w(),(0,g.o)(s)};var C=i(39381),R=i(26337),S=i(28060),E=i(81149),x=i(48191),W=i(20592),T=i(84078),P=i(44228),_=i(4348),k=i(78612);const L={fullscreenLayout:{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"#FFFFFF"},fullscreenContainer:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:`${k.e}px`},fullscreenContent:{position:"relative",zIndex:1,width:"100%"}},O=(e,t)=>{let{local:i,global:n}=t;const{children:o,adLabel:s,duration:l,isReady:a,onCloseClick:c,onTimerTick:d}=e,u=(0,P.Z)(n.visualViewport),{classes:h}=(0,S.Z)({local:i,global:n,stylesSrc:L,isDynamic:!0,data:{}});return r().createElement("div",{className:h.fullscreenLayout,style:{display:a?"":"none"}},r().createElement(W.Z,{percent:100/n.visualViewport.scale,display:"inline",updateOnContentResize:!0},r().createElement("div",{className:h.fullscreenContainer,style:u},r().createElement(_.Z,{adLabel:""!==s?s:"Реклама",onCloseClick:c,onTimerTick:d,duration:l}),r().createElement("div",{className:h.fullscreenContent},o))))};O.contextTypes=T.H;const j=(0,n.memo)(O);var A=i(97398),M=i.n(A),D=i(22222),N=i(13002),z=i(66005),F=i(94184),V=i.n(F),B=i(82897),$=i(3798);const q={simpleGrid:{margin:"0 auto",display:"flex","flex-direction":"column","align-items":e=>{let{positioningAlign:t}=e;return(e=>{switch(e){case"left":return"flex-start";case"right":return"flex-end";default:return"center"}})(t)},padding:e=>(e=>{let{cfg:{gutter:t},float:i}=e;return"left"===i?`0 ${t/2}px ${t/2}px 0`:"right"===i?`0 0 ${t/2}px ${t/2}px`:""})(e)},mainTitleWrapper:{width:"100%"},itemsContainerWrapper:{extend:"mainTitleWrapper"},row:{display:"flex","flex-wrap":"wrap","justify-content":"flex-start","&$rowWithAlignStart":{"align-items":"flex-start"},"&$rowWithAlignEnd":{"align-items":"flex-end"},"&$rowWithAlignCenter":{"align-items":"center"},"&$rowWithAlignStretch":{"align-items":"stretch"}},rowWithAlignStart:{},rowWithAlignEnd:{},rowWithAlignCenter:{},rowWithAlignStretch:{},rowItem:{display:"flex","& > *":{display:"flex",width:"100%"}},logoWrapper:{extend:"mainTitleWrapper"},loadMoreButtonWrapper:{extend:"mainTitleWrapper"}};function Z(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const H={},U=new B.gq,G=e=>{let{itemsLength:t}=e;return t},Q=e=>{let{cols:t}=e;return t},J=e=>{let{rows:t}=e;return t},X=e=>{let{preserveRowsQuantity:t}=e;return t};class Y extends n.PureComponent{constructor(e){super(e),Z(this,"calcVisibleItems",(e=>{const{items:t,cfg:{rows:i,preserveRowsQuantity:n}}=this.props;return this.memoizedCalcVisibleItems({itemsLength:t.length,cols:e,rows:i,preserveRowsQuantity:n})})),Z(this,"updateStyles",(e=>{const{local:t}=this.context;H[t.id].sheet.update(e)})),Z(this,"handleVisibleItems",(e=>{const{onVisibleItemsChange:t}=this.props;this._visibleItems!==e&&(this._visibleItems=e,t(e))})),Z(this,"handlePositionFloat",(()=>{const{local:{shadowRootEl:e}}=this.context,{cfg:{gutter:t},float:i}=this.props;if(e&&("left"===i||"right"===i)){const i=this.calcMinRowWidth()+t/2;e.style.width=`${i}px`}})),Z(this,"handleOverflow",(()=>{const{onOverflow:e}=this.props,t=this._wrapper,i=this._itemsWrapper.offsetWidth-t.offsetWidth;this._overflowedBy!==i&&(this._overflowedBy=i,e(i))})),Z(this,"handleElWidthExceeding",(e=>{let{slotId:t,elWidthExceeding:i}=e;const{local:{el:n}}=this.context;if(!n)return;const r=i&&!t?i/2:0;n.style.marginLeft=`-${r}px`,n.style.marginRight=`-${r}px`})),Z(this,"updateItemsSizes",(()=>{const{onRecsSizeChange:e}=this.props,{itemsSizes:t,itemElems:i}=Object.entries(this.itemElems).filter((e=>{let[t,i]=e;return t&&i})).reduce(((e,t)=>{let[i,n]=t;const{width:r,height:o}=n.getBoundingClientRect();return e.itemsSizes[i]={width:r,height:o},e.itemElems[i]=n,e}),{itemsSizes:{},itemElems:{}});this.itemElems=i,e(t)})),Z(this,"handleWindowResize",(()=>{const{cfg:e}=this.props;this.updateItemsSizes(),this.setState({cols:this.calcCols(e)},this.handleOverflow)})),Z(this,"handleRowWidthChange",(()=>{const{onRowWidthChange:e}=this.props;e(this.calcMinRowWidth(),this.calcMaxRowWidth())})),Z(this,"calcCols",(e=>{let{minColWidth:t,gutter:i,cols:n}=e;const{cols:r}=this.state,o=this._wrapper;if(!o)return r;const s=o.clientWidth;let l=1;for(let e=n;e>0;e--){if(e*t+e*i<=s){l=e;break}}return l})),Z(this,"calcMinRowWidth",(()=>{const{cfg:{minColWidth:e,gutter:t}}=this.props,{cols:i}=this.state;return i*e+i*t})),Z(this,"calcMaxRowWidth",(()=>{const{cfg:{maxColWidth:e,gutter:t}}=this.props,{cols:i}=this.state;return i*e+i*t})),this.state={cols:1},this._overflowedBy=0,this.itemElems={},this._visibleItems=[],this.memoizedCalcVisibleItems=(0,D.P1)([G,Q,J,X],((e,t,i,n)=>{const r=[];for(let o=0;o<e;o++)n&&o>=t*i||r.push(o);return r})),this.handleWindowResize=a()(this.handleWindowResize,300)}componentWillMount(){const{local:e}=this.context;(0,$.fu)({jss:e.jss,stylesSrc:q,styleSheetsDict:H,widgetId:e.id,sheetsManager:U,createStyleSheetOptions:{link:!0}}),this.updateStyles(this.props)}componentDidMount(){const{local:e}=this.context,{slotId:t,elWidthExceeding:i,cfg:n}=this.props;this.handleElWidthExceeding({slotId:t,elWidthExceeding:i});const r=this.calcCols(n),o=this.calcVisibleItems(r);this.setState({cols:r},(()=>{this.handlePositionFloat(),this.handleOverflow(),this.handleVisibleItems(o),this.handleRowWidthChange()})),e.innerWrapperEl.addEventListener("resize",this.handleWindowResize)}componentWillReceiveProps(e){this.handleElWidthExceeding({slotId:e.slotId,elWidthExceeding:e.elWidthExceeding}),this.updateStyles(e);const t=this.calcCols(e.cfg),i=this.calcVisibleItems(t);this.setState({cols:t},(()=>{this.handleVisibleItems(i)}))}componentDidUpdate(){const{cfg:e}=this.props,{cols:t}=this.state,i=this.calcCols(e),n=this.calcVisibleItems(i);i!==t?this.setState({cols:i},(()=>{this.handlePositionFloat(),this.handleOverflow(),this.handleVisibleItems(n)})):(this.handlePositionFloat(),this.handleOverflow(),this.handleVisibleItems(n),this.handleRowWidthChange())}componentWillUnmount(){const{local:e}=this.context;(0,$.Yl)({widgetId:e.id,styleSheetsDict:H,sheetsManager:U}),e.innerWrapperEl.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()}renderMainTitle(){const{local:e}=this.context,{mainTitle:t}=this.props,i=H[e.id].sheet,n=this.calcMaxRowWidth(),o=this.calcMinRowWidth();return t?r().createElement("div",{className:i.classes.mainTitleWrapper,style:{maxWidth:`${n}px`,minWidth:`${o}px`}},t):null}renderItems(){const{items:e,cfg:{maxColWidth:t,gutter:i,rows:n,preserveRowsQuantity:o}}=this.props,{local:s}=this.context,{cols:l}=this.state,a=H[s.id].sheet;return e.map(((e,s)=>{let{id:c,item:d}=e;const u=o&&s>=l*n;return r().createElement("div",{key:c,ref:e=>{this.itemElems[c]=e},className:a.classes.rowItem,style:{position:u?"absolute":"",visibility:u?"hidden":"",top:u?"-9999px":"",left:u?"-9999px":"",width:100/l+"%",maxWidth:`${t+i}px`,padding:i/2+"px"}},d)}))}renderLoadMoreButton(){const{local:e}=this.context,{loadMoreButton:t}=this.props,i=H[e.id].sheet,n=this.calcMaxRowWidth(),o=this.calcMinRowWidth();return t?r().createElement("div",{className:i.classes.loadMoreButtonWrapper,style:{maxWidth:`${n}px`,minWidth:`${o}px`}},t):null}renderLogo(){const{local:e}=this.context,{logo:t}=this.props,i=H[e.id].sheet,n=this.calcMaxRowWidth(),o=this.calcMinRowWidth();return t?r().createElement("div",{className:i.classes.logoWrapper,style:{maxWidth:`${n}px`,minWidth:`${o}px`}},t):null}render(){const{local:e}=this.context,{widgetStyles:t,cfg:{gutter:i,verticalAlign:n="stretch"}}=this.props,o=H[e.id].sheet;let s;switch(n){case"top":s="rowWithAlignStart";break;case"center":s="rowWithAlignCenter";break;case"bottom":s="rowWithAlignEnd";break;default:s="rowWithAlignStretch"}const l=V()(o.classes.row,o.classes[s]),a=this.calcMaxRowWidth(),c=this.calcMinRowWidth();return r().createElement("div",{ref:e=>{this._wrapper=e},className:o.classes.simpleGrid},this.renderMainTitle(),r().createElement("div",{ref:e=>{this._itemsWrapper=e},className:o.classes.itemsContainerWrapper,style:{maxWidth:`${a}px`,minWidth:`${c}px`}},r().createElement("div",{className:t.classes.itemsContainer},r().createElement("div",{className:l,style:{marginTop:`-${i/2}px`,marginLeft:`-${i/2}px`,marginRight:`-${i/2}px`,marginBottom:`-${i/2}px`}},this.renderItems()))),this.renderLoadMoreButton(),this.renderLogo())}}Z(Y,"propTypes",{slotId:s().string,widgetStyles:s().object,mainTitle:s().node,items:s().arrayOf(s().shape({id:s().string.isRequired,item:s().node.isRequired})),loadMoreButton:s().node,logo:s().node,cfg:s().shape({minColWidth:s().number.isRequired,maxColWidth:s().number.isRequired,gutter:s().number.isRequired,verticalAlign:s().oneOf(["top","center","bottom","stretch"]),cols:s().number.isRequired,rows:s().number.isRequired,preserveRowsQuantity:s().bool}).isRequired,float:s().oneOf(["left","right","none",""]),elWidthExceeding:s().number,onOverflow:s().func,onRecsSizeChange:s().func.isRequired,onVisibleItemsChange:s().func,onRowWidthChange:s().func}),Z(Y,"contextTypes",{local:s().object.isRequired}),Z(Y,"defaultProps",{slotId:null,widgetStyles:{classes:{}},mainTitle:null,items:[],loadMoreButton:null,logo:null,elWidthExceeding:0,float:"",onOverflow:()=>{},onVisibleItemsChange:()=>{},onRowWidthChange:()=>{}});var K=i(23279),ee=i.n(K),te=i(93588),ie=i.n(te);const ne={svg:{width:"40px",height:"40px",color:"rgba(191, 196, 200, 0.5)",animation:"1s linear 0s normal none infinite rotate","& circle":{animation:"$circularDash 1.4s ease-in-out infinite","stroke-dasharray":"80px, 200px","stroke-dashoffset":"0px"}},"@keyframes circularDash":{"0%":{"stroke-dasharray":"1px, 200px","stroke-dashoffset":"0px"},"50%":{"stroke-dasharray":"100px, 200px","stroke-dashoffset":"-15px"},"100%":{"stroke-dasharray":"100px, 200px","stroke-dashoffset":"-125px"}}};function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},re.apply(this,arguments)}function oe(e,t){const{local:i}=t,{classes:n}=(0,S.Z)({local:i,stylesSrc:ne});return r().createElement(ie(),re({className:n.svg},e))}oe.contextTypes={local:s().object.isRequired};const se=(0,n.memo)(oe),le={simpleGrid:{margin:"0 auto",display:"flex","flex-direction":"column","align-items":"center",padding:e=>(e=>{let{cfg:{gutter:t},float:i}=e;return"left"===i?`0 ${t/2}px ${t/2}px 0`:"right"===i?`0 0 ${t/2}px ${t/2}px`:""})(e)},mainTitleWrapper:{width:"100%"},mainTitleWrapperEl:{maxWidth:"100%",minWidth:"100%"},maxminWidth:{maxWidth:"100%",minWidth:"100%"},itemsContainer:{display:"grid",gridTemplateColumns:"1fr",margin:0,overflow:"hidden"},itemScrollWrapperContainer:{position:"relative",overflow:"hidden"},itemsContainerWrapper:{extend:"mainTitleWrapper"},itemScrollWrapper:{overflowX:"scroll",overflowY:"hidden",marginBottom:"1px",scrollSnapType:"x proximity",scrollPaddingLeft:"35px",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},row:{display:"flex",paddingBottom:"0.1px","flex-wrap":"nowrap","justify-content":"flex-start","align-items":"flex-start","&$rowWithAlignStart":{"align-items":"flex-start"},"&$rowWithAlignEnd":{"align-items":"flex-end"},"&$rowWithAlignCenter":{"align-items":"center"},"&$rowWithAlignStretch":{"align-items":"stretch"},"&::-webkit-scrollbar":{display:"none"}},rowWithAlignStart:{},rowWithAlignEnd:{},rowWithAlignCenter:{},rowWithAlignStretch:{},rowItem:{display:"flex",scrollSnapAlign:"start","& > *":{display:"flex",width:"100%"}},logoWrapper:{extend:"mainTitleWrapper"},loadMoreButtonWrapper:{extend:"mainTitleWrapper"},carouselLoaderWrapper:{display:"flex",alignItems:"center",justifyContent:"center"}},ae=e=>{let{children:t,...i}=e;return r().createElement("div",i,t)},ce=(e,t)=>{let{local:i,global:n}=t;const{items:o,cfg:{maxColWidth:s,minColWidth:l,gutter:a}}=e,{classes:c}=(0,S.Z)({local:i,global:n,stylesSrc:le,data:{}}),d={minWidth:`${l+a}px`,maxWidth:`${s+a}px`,padding:a/2+"px"};return o.map((e=>{let{id:t,recId:i,item:n}=e;return r().createElement(ae,{key:t,className:i?c.rowItem:void 0,style:i?d:void 0},n)}))};ce.contextTypes={local:s().object.isRequired,global:s().object.isRequired};const de=(e,t)=>{let{local:i,global:n}=t;const{label:o}=e,{classes:s}=(0,S.Z)({local:i,global:n,stylesSrc:le,data:{}});return r().createElement("div",{className:V()(s.mainTitleWrapper,s.mainTitleWrapperEl)},o)};de.contextTypes={local:s().object.isRequired,global:s().object.isRequired};const ue=de,he=(e,t)=>{let{local:i,global:n}=t;const{logo:o}=e,{classes:s}=(0,S.Z)({local:i,global:n,stylesSrc:le,data:{}});return r().createElement("div",{className:V()(s.logoWrapper,s.maxminWidth)},o)};he.contextTypes={local:s().object.isRequired,global:s().object.isRequired};const pe=he;function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},me.apply(this,arguments)}const ge=(0,n.forwardRef)(((e,t)=>{const{type:i,widgetStyles:n,...o}=e,s="prev"===i,l=s?"&lt;":"&gt;",a=s?"Назад":"Вперед",c=s?{left:0}:{right:0};return r().createElement("div",{role:"button","aria-label":a,className:n.classes.sideButtonWrapper,style:c},r().createElement("div",me({ref:t},o),l))}));ge.displayName="ScrollButton";const fe=ge,ye="never",ve="ontouchstart"in window,be=(e,t)=>{let{local:i,global:o}=t;const{loadMoreInProgress:s=!1,slotId:l=null,widgetStyles:a={classes:{}},mainTitle:c=null,items:d=[],logo:u=null,elWidthExceeding:h=0,cfg:p}=e,{carousel:{buttons:{leftButtonHide:m}},gutter:g,verticalAlign:f="stretch"}=p,y=(0,n.useRef)(Promise.resolve()),v=(0,n.useRef)(-1),b=(0,n.useRef)(null),w=(0,n.useRef)(null),I=(0,n.useRef)(0),C=(0,n.useRef)(null),R=(0,n.useRef)(null),E=(0,n.useRef)(null),x=(0,n.useRef)(null),{classes:W}=(0,S.Z)({local:i,global:o,stylesSrc:le,data:{}}),T=(0,n.useMemo)((()=>ee()((()=>{x.current.style.scrollSnapType=null,x.current.removeEventListener("scroll",T)}),200)),[]),P=()=>{v.current=Math.floor(C.current.offsetWidth/C.current.childNodes[1].offsetWidth)},_=()=>{P()},k=(()=>{const{cfg:{carousel:{buttons:{showIfMouse:t,showIfTouch:i}}}}=e;return ve?i:t})()===ye,L=()=>{if(!m)return;const e=[W.sideButtonLeftHideAtStart,a.classes.sideButtonLeftHideAtStart];0===x.current.scrollLeft?R.current.classList.add(...e):R.current.classList.remove(...e)};(0,n.useEffect)((()=>{const e=i.innerWrapperEl,t=x.current;return e.addEventListener("resize",_),P(),()=>{t.removeEventListener("scroll",L),e.removeEventListener("resize",_)}}),[]),(0,n.useLayoutEffect)((()=>{const{onMoreRecsLoad:t,items:{length:i}}=e;v.current>=i-4&&t(),k||m&&x.current.addEventListener("scroll",L,{passive:!0}),(()=>{const{slotId:t,onMoreRecsLoad:i}=e,n=C.current.childNodes,r={root:x.current,threshold:0};b.current=new IntersectionObserver(((e,r)=>{e.forEach((e=>{if(e.intersectionRatio>0){if(e.target===n[n.length-v.current-4]||e.target===n[n.length-3]||e.target===w.current&&!s){const e=x.current;e.style.scrollSnapType||"hidden"===e.style.overflow||e.addEventListener("scroll",T,{passive:!0}),e.style.scrollSnapType="none",y.current.then((()=>{i({slotId:t})}))}e.target!==w.current&&r.unobserve(e.target)}}))}),r)})()}),[]),(0,n.useEffect)((()=>{P(),I.current!==d.length&&((t=>{if(!C.current)return;const i=C.current.childNodes;for(let e=t;e<i.length;e++)i.item(e).dataset.indexInCollection=e,b.current.observe(i[e]);const{items:{length:n}}=e;I.current=n})(I.current),T())}),[d.length]);const O=t=>{let i=null;y.current=new Promise((e=>{i=e}));const n=(t=>{let{direction:i,isCorrecting:n}=t;const{cfg:{gutter:r}}=e,o=C.current.childNodes[1].clientWidth,s=x.current.scrollLeft,l=x.current.offsetWidth;if(0===s&&-1===i)return 0;let a;const c=Math.ceil(s/o);if(n)a=c*o-1.5*r;else{const e=s+l-c*o+r,t=Math.floor(e/o),n=c+t-1;a=(i>0?n+1:c-t)*o-1.5*r}return a<0&&(a=0),s-a})({direction:t}),r=x.current;if(r){const e=ee()((()=>{r.removeEventListener("scroll",e),i()}),150);try{r.addEventListener("scroll",e),r.scrollTo({behavior:"smooth",left:r.scrollLeft-n})}catch(e){r.style.overflow="",r.scrollLeft-=n}}};let j;switch((0,n.useLayoutEffect)((()=>{const{el:e}=i;if(!e)return;const t=h&&!l?h/2:0;e.style.marginLeft=`-${t}px`,e.style.marginRight=`-${t}px`})),f){case"top":j="rowWithAlignStart";break;case"center":j="rowWithAlignCenter";break;case"bottom":j="rowWithAlignEnd";break;default:j="rowWithAlignStretch"}const A=V()(W.animate,a.classes.animate,W.row,W[j]),M=V()(W.itemsContainer,W.itemsContainerWrapper),D=V()(W.itemScrollWrapper,a.classes.itemScrollWrapper),N=V()(a.classes.itemsContentWrapper),z=V()(W.carouselLoaderWrapper,a.classes.carouselLoaderWrapper),F=V()(a.classes.sideButtonInner,a.classes.sideButtonRight,a.classes.sideButtonRightHideEffect),B=V()(a.classes.sideButtonInner,a.classes.sideButtonLeft,a.classes.sideButtonLeftHideEffect,{[a.classes.sideButtonLeftHideAtStart]:m});return r().createElement("div",{className:W.simpleGrid},c&&r().createElement(ue,{label:c}),r().createElement("div",{className:M},r().createElement("div",{className:W.itemScrollWrapperContainer},r().createElement("div",{ref:x,className:D},r().createElement("div",{className:N},!k&&r().createElement(fe,{widgetStyles:a,ref:R,onClick:()=>O(-1),className:B,type:"prev"}),r().createElement("div",{ref:C,style:{marginTop:`-${g/2}px`,transform:`translateX(-${g/2}px)`,marginBottom:`-${g/2}px`},className:A},r().createElement(ce,e),r().createElement("div",{className:z,ref:w},r().createElement(se,null))),!k&&r().createElement(fe,{widgetStyles:a,ref:E,onClick:()=>O(1),className:F,type:"next"}))))),u&&r().createElement(pe,{logo:u}))};be.contextTypes={local:s().object.isRequired,global:s().object.isRequired};const we=be;var Ie=i(13311),Ce=i.n(Ie);const Re={itemsContainer:{display:"grid",gap:e=>`${function(e){var t,i;let{cfg:n}=e;return`${(null===(t=n.composite)||void 0===t?void 0:t.rowGutter)||0}${(null===(i=n.composite)||void 0===i?void 0:i.rowGutterUnit)||"px"}`}(e)} ${function(e){var t,i;let{cfg:n}=e;return`${(null===(t=n.composite)||void 0===t?void 0:t.colGutter)||0}${(null===(i=n.composite)||void 0===i?void 0:i.colGutterUnit)||"px"}`}(e)}`,"align-items":e=>function(e){var t;let{cfg:i}=e;return{top:"start",center:"center",bottom:"end",stretch:"stretch"}[null===(t=i.composite)||void 0===t?void 0:t.verticalAlign]||"stretch"}(e),"grid-auto-flow":"row dense"}};function Se(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ee={},xe=new B.gq;class We extends n.PureComponent{constructor(e){super(e),Se(this,"handleWindowResize",(()=>{const e=this._rootEl;e&&this.setState({rootElWidth:e.clientWidth})})),Se(this,"updateStyles",(e=>{const{local:t}=this.context;Ee[t.id].sheet.update(e)})),Se(this,"handleElWidthExceeding",(e=>{let{slotId:t,elWidthExceeding:i}=e;const{local:{el:n}}=this.context;if(!n)return;const r=i&&!t?i/2:0;n.style.marginLeft=`-${r}px`,n.style.marginRight=`-${r}px`})),Se(this,"renderSlots",(()=>{const{widgetStyles:e,slots:t,items:i,GridLayout:n,onOverflow:o,onRecsSizeChange:s,onVisibleItemsChange:l,onMoreRecsLoad:a}=this.props,{rootElWidth:c}=this.state;return t.reduce(((t,d)=>{let{slotId:u,recId:h,type:p,colsWidth:m,rowsHeight:g,media:f,slots:y,grid:v}=d;const b=(e=>{let{width:t,defaultValue:i=1,media:n=[]}=e;if(!Number.isFinite(t)||!n.length)return i;const r=[...n].sort(((e,t)=>e.parentMaxWidth-t.parentMaxWidth)),o=Ce()(r,(e=>{let{parentMaxWidth:i}=e;return i>t}));return o?o.colsWidth:i})({width:c,defaultValue:m,media:f}),w={gridColumnEnd:b>1?`span ${b}`:"",gridRowEnd:g?`span ${g}`:""};switch(p){case"slot":const{item:c}=Ce()(i,{recId:h})||{};if(!c||!h)return t;t.push(r().createElement("div",{key:h,style:w},c));break;case"grid":const d=(0,C.j1)(y).reduce(((e,t)=>{let{recId:n}=t;const r=Ce()(i,{recId:n});return r&&e.push(r),e}),[]);if(!d.length||!v||!h)return t;t.push(r().createElement("div",{key:h,style:w},r().createElement(n,{slotId:u,widgetStyles:e,items:d,slots:y,cfg:v,onOverflow:o,onVisibleItemsChange:l,onRecsSizeChange:s,onMoreRecsLoad:a})))}return t}),[])})),this.state={rootElWidth:1/0},this.handleWindowResize=a()(this.handleWindowResize,300)}componentWillMount(){const{local:e}=this.context;(0,$.fu)({jss:e.jss,stylesSrc:Re,styleSheetsDict:Ee,widgetId:e.id,sheetsManager:xe,createStyleSheetOptions:{link:!0}}),this.updateStyles(this.props)}componentDidMount(){const{local:e}=this.context,{slotId:t,elWidthExceeding:i}=this.props;this.handleElWidthExceeding({slotId:t,elWidthExceeding:i}),e.innerWrapperEl.addEventListener("resize",this.handleWindowResize),this.handleWindowResize()}componentWillReceiveProps(e){this.handleElWidthExceeding({slotId:e.slotId,elWidthExceeding:e.elWidthExceeding}),this.updateStyles(e)}componentWillUnmount(){const{local:e}=this.context;(0,$.Yl)({widgetId:e.id,styleSheetsDict:Ee,sheetsManager:xe}),e.innerWrapperEl.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()}render(){const{local:e}=this.context,{widgetStyles:t,mainTitle:i,logo:n,loadMoreButton:o,cfg:{composite:{maxWidth:s}}}=this.props,{classes:l}=Ee[e.id].sheet;return r().createElement("div",{ref:e=>{this._rootEl=e},style:{maxWidth:s}},i,r().createElement("div",{className:t.classes.compositeGridItemsContainer},r().createElement("div",{className:l.itemsContainer,style:{gridTemplateColumns:"repeat(12, 1fr)"}},this.renderSlots())),r().createElement("div",null,o),n)}}function Te(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Se(We,"propTypes",{slotId:s().string,widgetStyles:s().object,mainTitle:s().node,items:s().arrayOf(s().shape({id:s().string.isRequired,recId:s().string,item:s().node.isRequired})),slots:s().arrayOf(s().shape({recId:s().string,type:s().oneOf(["slot","grid"]).isRequired,slots:s().array})),loadMoreButton:s().node,logo:s().node,cfg:s().shape({composite:s().shape({maxWidth:s().number,colGutter:s().number.isRequired,colGutterUnit:s().oneOf(["px","%"]),verticalAlign:s().oneOf(["top","center","bottom","stretch"]),itemsPositioning:s().shape({type:s().oneOf(["auto"])}).isRequired,schema:s().arrayOf(s().shape({grid:s().object}))}).isRequired}).isRequired,elWidthExceeding:s().number,GridLayout:s().func.isRequired,onOverflow:s().func,onRecsSizeChange:s().func,onVisibleItemsChange:s().func,onMoreRecsLoad:s().func}),Se(We,"contextTypes",{local:s().object.isRequired}),Se(We,"defaultProps",{slotId:null,widgetStyles:{classes:{}},mainTitle:null,items:[],slots:[],loadMoreButton:null,logo:null,elWidthExceeding:0,onOverflow:()=>{},onRecsSizeChange:()=>{},onVisibleItemsChange:()=>{},onMoreRecsLoad:()=>{}});class Pe extends n.PureComponent{render(){const{slotId:e,widgetStyles:t,mainTitle:i,items:n,cfg:o,loadMoreButton:s,loadMoreInProgress:l,logo:a,slots:c,positioningAlign:d,onOverflow:u,onRecsSizeChange:h,onVisibleItemsChange:p,onRowWidthChange:m,onMoreRecsLoad:g}=this.props,{type:f,elWidthExceeding:y,float:v,simple:b}=o;switch(f){case"simple":switch(b.subtype||"simple"){case"simple":return r().createElement(Y,{slotId:e,widgetStyles:t,mainTitle:i,items:n,loadMoreButton:s,logo:a,cfg:b,float:v,elWidthExceeding:y,onOverflow:u,onVisibleItemsChange:p,onRecsSizeChange:h,onRowWidthChange:m,positioningAlign:d});case"carousel":return r().createElement(we,{slotId:e,widgetStyles:t,mainTitle:i,items:n,loadMoreInProgress:l,logo:a,cfg:b,float:v,elWidthExceeding:y,onOverflow:u,onVisibleItemsChange:p,onMoreRecsLoad:g});default:return null}case"composite":return r().createElement(We,{slotId:e,widgetStyles:t,mainTitle:i,items:n,slots:c,loadMoreButton:s,logo:a,cfg:o,GridLayout:Pe,elWidthExceeding:y,onOverflow:u,onVisibleItemsChange:p,onRecsSizeChange:h,onMoreRecsLoad:g});default:return null}}}function _e(e){const{CustomRec:t,...i}=e;return r().createElement(t,i)}Te(Pe,"propTypes",{slotId:s().string,widgetStyles:s().object,mainTitle:s().node,items:s().arrayOf(s().shape({id:s().string.isRequired,item:s().node.isRequired})),cfg:s().shape({elWidthExceeding:s().number,type:s().oneOf(["simple","composite"]).isRequired,float:s().string,simple:s().object}).isRequired,loadMoreButton:s().node,loadMoreInProgress:s().bool,logo:s().node,slots:s().array,positioningAlign:s().string,onOverflow:s().func,onRecsSizeChange:s().func,onVisibleItemsChange:s().func,onMoreRecsLoad:s().func,onRowWidthChange:s().func}),Te(Pe,"defaultProps",{slotId:null,widgetStyles:{classes:{}},mainTitle:null,items:[],loadMoreButton:null,loadMoreInProgress:!1,logo:null,slots:[],positioningAlign:"center",onOverflow:()=>{},onRecsSizeChange:()=>{},onVisibleItemsChange:()=>{},onMoreRecsLoad:()=>{},onRowWidthChange:()=>{}}),_e.propTypes={CustomRec:s().oneOfType([s().func,s().object]).isRequired},_e.defaultProps={},_e.contextTypes={global:s().object.isRequired,local:s().object.isRequired};const ke=(0,n.memo)(_e);var Le=i(85213),Oe=i(60226);const je={recItemInner:{position:"relative"},closeButton:{display:"none","z-index":1e4,"&$visible":{display:"block"}},visible:{},video:{position:"relative","z-index":1e3},thumbnail:{position:"relative","z-index":100}};function Ae(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Me={},De=new B.gq;class Ne extends n.PureComponent{constructor(){super(...arguments),Ae(this,"getAdChoiceItems",(()=>{const{advertiserInfoOverlay:e,closeButtonOverlay:t,ordTokenItem:i}=this.props;return[{id:"closeButton",text:"Скрыть объявление",overlay:t},{id:"advertiserInfo",text:"О рекламодателе",overlay:e},{id:"ordToken",type:"customItem",item:i}].filter((e=>{let{overlay:t,item:i}=e;return Boolean(t||i)}))})),Ae(this,"renderAdChoice",(()=>{const{styles:e}=this.props,t=this.getAdChoiceItems();return Ne.shouldAdChoiceRender(t)?r().createElement(Le.Z,{items:t,styles:e}):null})),Ae(this,"renderAgeRestriction",(()=>{const{ageRestriction:e,styles:t}=this.props;if(null===e)return null;const i=this.getAdChoiceItems(),n=Ne.shouldAdChoiceRender(i);return r().createElement(Oe.Z,{ageRestriction:e,adChoiceRendered:n,styles:t})})),Ae(this,"renderVideo",(()=>{const{local:e}=this.context,{styles:t,recComposition:i,video:n}=this.props;if(!n)return null;const o=Me[e.id].sheet,s=V()(o.classes.video,t.classes.video);switch(i){case"normalPlate":case"normalList":case"fullPlate":case"fullList":return r().createElement("div",{className:s},n);default:return null}})),Ae(this,"renderThumbnail",(()=>{const{local:e}=this.context,{styles:t,recComposition:i,renderLink:n,thumbnail:o}=this.props;if(!o)return null;const s=Me[e.id].sheet,l=V()(s.classes.thumbnail,t.classes.thumbnail);switch(i){case"normalPlate":case"normalList":return n({children:o,className:l});case"fullPlate":case"fullList":return r().createElement("div",{className:l},o);default:return null}})),Ae(this,"renderTitle",(()=>{const{styles:e,recComposition:t,renderLink:i,title:n}=this.props;if(!n)return null;switch(t){case"normalPlate":case"normalList":return i({children:n,className:e.classes.title});case"fullPlate":case"fullList":return r().createElement("div",{className:e.classes.title},n);default:return null}})),Ae(this,"renderDescription",(()=>{const{styles:e,description:t}=this.props;return t?r().createElement("div",{className:e.classes.description},t):null})),Ae(this,"renderDisclaimer",(()=>{const{styles:e,disclaimer:t}=this.props;return t?r().createElement("div",{className:e.classes.disclaimer},t):null})),Ae(this,"renderLabel",(()=>{const{styles:e,type:t,label:i}=this.props;if(!i)return null;switch(t){case"ad":const t=V()(e.classes.label,e.classes.adLabel);return r().createElement("div",{className:t},i);case"promo":const n=V()(e.classes.label,e.classes.promoLabel);return r().createElement("div",{className:n},i);case"exchange":const o=V()(e.classes.label,e.classes.exchangeLabel);return r().createElement("div",{className:o},i);default:return null}})),Ae(this,"renderCategory",(()=>{const{styles:e,category:t,categoryUrl:i}=this.props;if(!t)return null;if(t&&i){const n=V()(e.classes.recCategory,e.classes.recCategoryWithLink);return r().createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:n},t)}return r().createElement("div",{className:e.classes.recCategory},t)}))}componentWillMount(){const{local:e}=this.context;(0,$.fu)({jss:e.jss,stylesSrc:je,styleSheetsDict:Me,widgetId:e.id,sheetsManager:De})}componentWillUnmount(){const{local:e}=this.context;(0,$.Yl)({widgetId:e.id,styleSheetsDict:Me,sheetsManager:De})}static shouldAdChoiceRender(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).length>0}render(){const{local:e}=this.context,{styles:t,RecLayout:i,type:n,size:o,renderLinkOverlay:s,recComposition:l,meta:a,pubDate:c,callButton:d}=this.props,u=Me[e.id].sheet,h=V()(u.classes.recItemInner,t.classes.recItemInner),p="fullPlate"===l||"fullList"===l?s({zIndex:200}):null;return r().createElement("div",{className:h},r().createElement(i,{styles:t,type:n,size:o,linkOverlay:p,adChoice:this.renderAdChoice(),ageRestriction:this.renderAgeRestriction(),video:this.renderVideo(),thumbnail:this.renderThumbnail(),title:this.renderTitle(),description:this.renderDescription(),disclaimer:this.renderDisclaimer(),label:this.renderLabel(),category:this.renderCategory(),pubDate:c,meta:a,callButton:d}))}}Ae(Ne,"propTypes",{styles:s().object,RecLayout:s().oneOfType([s().func,s().object]).isRequired,recComposition:s().string.isRequired,type:s().oneOf(["normal","ad","promo","exchange"]),size:s().oneOf(["normal","wide"]),renderLink:s().func,renderLinkOverlay:s().func,closeButtonOverlay:s().node,advertiserInfoOverlay:s().node,ordTokenItem:s().node,video:s().node,thumbnail:s().node,title:s().node,description:s().node,disclaimer:s().node,label:s().node,callButton:s().node,ageRestriction:s().number,category:s().string,categoryUrl:s().string,pubDate:s().string,meta:s().object}),Ae(Ne,"contextTypes",{local:s().object.isRequired}),Ae(Ne,"defaultProps",{styles:{classes:{}},type:"normal",size:"normal",renderLink:()=>{},renderLinkOverlay:()=>{},closeButtonOverlay:null,advertiserInfoOverlay:null,ordTokenItem:null,video:null,thumbnail:null,title:null,description:null,disclaimer:null,label:null,callButton:null,ageRestriction:null,category:"",categoryUrl:"",pubDate:"",meta:{}});var ze=i(78794),Fe=i(85149);function Ve(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Be extends n.PureComponent{render(){const{title:e,titleCfg:t,onReady:i}=this.props;return r().createElement(Fe.Z,{maxLines:t.maxLines,text:e,onReady:i})}}function $e(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Ve(Be,"propTypes",{styles:s().object,type:s().oneOf(["normal","ad","promo","exchange"]),size:s().oneOf(["normal","wide"]),title:s().string,titleCfg:s().shape({maxLines:s().number}),description:s().string,descriptionCfg:s().shape({maxLines:s().number}),label:s().string,category:s().string,categoryUrl:s().string,pubDate:s().string,meta:s().object,onReady:s().func}),Ve(Be,"defaultProps",{styles:{classes:{}},type:"normal",size:"normal",title:"",titleCfg:{},description:"",descriptionCfg:{},label:"",category:"",categoryUrl:"",pubDate:"",meta:{},onReady:()=>{}});class qe extends n.PureComponent{render(){const{description:e,descriptionCfg:t,onReady:i}=this.props;return r().createElement(Fe.Z,{maxLines:t.maxLines,text:e,onReady:i})}}$e(qe,"propTypes",{styles:s().object,type:s().oneOf(["normal","ad","promo","exchange"]),size:s().oneOf(["normal","wide"]),title:s().string,titleCfg:s().shape({maxLines:s().number}),description:s().string,descriptionCfg:s().shape({maxLines:s().number}),label:s().string,category:s().string,categoryUrl:s().string,pubDate:s().string,meta:s().object,onReady:s().func}),$e(qe,"defaultProps",{styles:{classes:{}},type:"normal",size:"normal",title:"",titleCfg:{},description:"",descriptionCfg:{},label:"",category:"",categoryUrl:"",pubDate:"",meta:{},onReady:()=>{}});var Ze=i(42049);function He(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ue extends n.PureComponent{render(){const{mainTitle:e,styles:t}=this.props;return e.label?r().createElement("div",{className:t.classes.mainTitle},e.label):null}}He(Ue,"propTypes",{styles:s().object,mainTitle:s().shape({label:s().string})}),He(Ue,"defaultProps",{styles:{classes:{}},mainTitle:{}});var Ge=i(31911);function Qe(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Je extends n.PureComponent{render(){const{recIndex:e,src:t,aspectRatio:i,aspectRatioFallback:n,onPreload:o,onLoad:s,setThumbItem:l,aspectRatioApplyToRecs:a,aspectRatioApplyToRecTypes:c,recSize:d,recType:u,isInViewport:h,isInViewportAnimation:p}=this.props;return r().createElement(Ge.Z,{src:t,aspectRatio:i,aspectRatioFallback:n,aspectRatioApplyToRecs:a,aspectRatioApplyToRecTypes:c,recSize:d,recType:u,isInViewport:h,recIndex:e,isInViewportAnimation:p,onPreload:o,onLoad:s,setThumbItem:l})}}Qe(Je,"propTypes",{src:s().arrayOf(s().shape({width:s().number.isRequired,height:s().number.isRequired,src:s().string.isRequired})),aspectRatio:s().number,aspectRatioFallback:s().number,aspectRatioApplyToRecs:s().array,aspectRatioApplyToRecTypes:s().array,recSize:s().string,recType:s().string,isInViewport:s().bool,isInViewportAnimation:s().bool,recIndex:s().number,onPreload:s().func,onLoad:s().func,setThumbItem:s().func}),Qe(Je,"defaultProps",{src:[],aspectRatio:null,aspectRatioFallback:21/16,aspectRatioApplyToRecs:["normal"],aspectRatioApplyToRecTypes:["ad"],recSize:"",recType:"",isInViewport:!1,isInViewportAnimation:!1,recIndex:0,onPreload:()=>{},onLoad:()=>{},setThumbItem:()=>{}});var Xe=i(68705),Ye=i(44908),Ke=i.n(Ye),et=i(57557),tt=i.n(et),it=i(98612),nt=i.n(it),rt=i(99560),ot=i.n(rt),st=i(53322),lt=i(43402);const at="img",ct="ext_scripts",dt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return new Promise((i=>{const n=e.map((e=>new Promise((i=>{switch(e.type){case at:const n=window.global.document.createElement("img");n.onload=i,n.onerror=i,n.src=e.src,setTimeout(i,t);break;case ct:const r=window.global.document.createElement("script");r.onload=i,r.onerror=i,r.src=e.src,r.type="text/javascript",r.async=!0,window.global.document.body.append(r),setTimeout(i,t)}}))));Promise.all(n).then(i)}))};var ut=i(69724),ht=i(29737),pt=i(48166),mt=i(88667),gt=i(2575),ft=i(33130);const yt={customRecWrapper:{display:"flex"}};function vt(){return vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},vt.apply(this,arguments)}function bt(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const wt={},It=new B.gq,Ct=1e3,Rt=1e3,St=1e3,Et=1e3,xt={position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden"};class Wt extends n.PureComponent{constructor(e){var t;super(e),t=this,bt(this,"isAtLeastOneVisibleField",(()=>{const{rec:e,cfg:t}=this.props;if(e.customRec)return;const i=["recTitle","recDescription","recThumbnail","recVideo"],n=["title","description","thumbnails","video"],r=i.reduce(((e,t,i)=>({...e,[t]:n[i]})),{}),o=i.reduce(((e,i)=>{var n;return{...e,[i]:null===(n=t[i])||void 0===n?void 0:n.visible}}),{}),s=n.reduce(((t,i)=>({...t,[i]:nt()(e[i])?!!e[i]&&e[i].length>0:!!e[i]})),{}),l=i.reduce(((e,t)=>({...e,[t]:o[t]&&s[r[t]]})),{});Object.values(l).some((e=>!0===e))||this.handleRecError({id:e.id,errorType:"empty_rec"})})),bt(this,"checkRecHrefHasSameOrigin",(()=>{const{global:{location:{origin:e=""}={}}={}}=this.context,{rec:{href:t}}=this.props;return e===new URL(t).origin})),bt(this,"getTarget",(()=>{const{rec:{type:e},cfg:{recOpenInNewTab:t=!1}}=this.props;return!this.checkRecHrefHasSameOrigin()||["ad","exchange"].includes(e)||t?"_blank":void 0})),bt(this,"checkIsImgOverlay",(()=>{const{rec:{filter:e}}=this.props;return"img_overlay"===e})),bt(this,"checkIsWideInline",(()=>{const{cfg:{preset:e},rec:{size:t}}=this.props;return"inlineWidePlates"===e&&"wide"===t})),bt(this,"checkIsCriteoHbCustom",(()=>{const{rec:{customRec:e={}}}=this.props;return"criteo_hb"===e.name})),bt(this,"checkIsWideInlineLocalAd",(()=>{const{rec:{adOrigin:e="",size:t,type:i}}=this.props;return"local"===e&&"wide"===t&&"ad"===i})),bt(this,"checkIsFullscreen",(()=>{const{rec:{filter:e}}=this.props;return"fullscreen"===e||"fullscreen_native"===e})),bt(this,"checkIsTargetMailRuInreadSpec",(()=>{const{rec:{adOrigin:e=""}}=this.props;return"target_mail_ru_inread_spec"===e})),bt(this,"getVisibilityThreshold",(()=>{this.checkIsImgOverlay();return 50})),bt(this,"removeExternalEventListeners",(()=>{const{global:e}=this.context;this._intersectionObserver&&this._intersectionObserver.disconnect(),e.document.removeEventListener("visibilitychange",this.handlePageVisibilityChange)})),bt(this,"handleOnLoadEvents",(()=>{const{rec:{onLoad:e}}=this.props;return dt(e)})),bt(this,"handleOnShowEvents",(()=>{const{rec:{onShow:e}}=this.props;return dt(e)})),bt(this,"handleOnClickEvents",(()=>{const{rec:{onClick:e}}=this.props;return dt(e)})),bt(this,"handleCustomRecComponent",(e=>{let{rec:{id:t,customRec:i}}=e;const{loadCustomRec:n}=this.context,{instanceId:r,cfgId:o}=this.props,{CustomRec:s}=this.state;i&&!s&&(i.name?((0,d.pV)({id:`load ${i.name} custom rec`,instanceId:r,cfgId:o}),n(i.name).then((e=>{if((0,d.N_)({id:`load ${i.name} custom rec`,instanceId:r,cfgId:o}),e){const t=e[Symbol.for("types")];if(t)try{const{rec:i}=this.props;(0,st.hu)(i,t),this._isMounted&&this.setState({CustomRec:e})}catch(e){this.handleCustomRecError(),(0,ut.L)("Failed rec structure",e,null,{rec:{name:i.name}})}else this._isMounted&&this.setState({CustomRec:e})}})).catch((e=>{console.error(new gt.Z("Custom Rec Fetch Fail",e)),this.handleRecError({id:t,errorType:"custom_rec_fetch_fail"})}))):this.handleRecError({id:t,errorType:"custom_rec_no_name"}))})),bt(this,"handleVideoComponent",(e=>{let{rec:{video:t}}=e;const{loadVideoComponent:i}=this.context,{Video:n}=this.state;t&&!n&&((0,d.g)({id:"load video chunk",groupId:"init"}),i().then((e=>{const t=e.default;(0,d.Ix)({id:"load video chunk",groupId:"init"}),this._isMounted&&this.setState({Video:t})})))})),bt(this,"handleRecInViewport",(()=>{const{rec:{id:e},onRecInViewport:t}=this.props;t(e)})),bt(this,"handleRecOutOfViewport",(()=>{const{rec:{id:e},onRecOutOfViewport:t}=this.props;t(e)})),bt(this,"handleRecShow",(()=>{const{rec:{id:e},onRecShow:t}=this.props;this.handleOnShowEvents(),t(e)})),bt(this,"getRequiredTimeInViewport",(()=>{const e=this.checkIsImgOverlay(),t=this.checkIsCriteoHbCustom(),i=this.checkIsWideInlineLocalAd(),n=this.checkIsTargetMailRuInreadSpec();return e?Rt:t?Ct:i?St:n?Et:0})),bt(this,"checkShouldRecShowBeDelayed",(()=>{if(this.checkIsFullscreen())return!1;return[this.checkIsImgOverlay(),this.checkIsCriteoHbCustom(),this.checkIsWideInlineLocalAd(),this.checkIsTargetMailRuInreadSpec()].some((e=>e))})),bt(this,"delayedRecShowStart",(()=>{this.delayedRecShowSent||this.inViewportInterval||(this.inViewportTimeStart=new Date,this.inViewportInterval=setInterval((()=>{new Date-this.inViewportTimeStart>=this.getRequiredTimeInViewport()&&(this.handleRecShow(),this.delayedRecShowSent=!0,clearInterval(this.inViewportInterval),this.inViewportInterval=null)}),100))})),bt(this,"inlineInViewportRecShowStart",(()=>{this.inlineShowEvents.every((e=>{let{isSent:t}=e;return t}))||this.inlineInViewportIntervalId||(this.inlineInViewportTimeStart=new Date,this.inlineInViewportIntervalId=setInterval((()=>{this.inlineShowEvents.forEach((e=>{const{time:t,pixel:i}=e;new Date-this.inlineInViewportTimeStart>=t&&!e.isSent&&((0,g.o)({rootPath:"health",path:`events.perform.debug.${i}`}),e.isSent=!0)})),this.inlineShowEvents.every((e=>{let{isSent:t}=e;return t}))&&(clearInterval(this.inlineInViewportIntervalId),this.inlineInViewportIntervalId=null)}),100))})),bt(this,"inlineInViewportRecShowStop",(()=>{clearInterval(this.inlineInViewportIntervalId),this.inlineInViewportIntervalId=null,this.inlineInViewportTimeStart=1/0})),bt(this,"delayedRecShowStop",(()=>{clearInterval(this.inViewportInterval),this.inViewportInterval=null,this.inViewportTimeStart=1/0})),bt(this,"intersectionObserverCallback",(e=>{const{global:t}=this.context;e.forEach((e=>{const i=this.checkShouldRecShowBeDelayed(),n="visible"===t.document.visibilityState;e.isIntersecting&&n?(this.handleRecInViewport(),i?this.delayedRecShowStart():this.handleRecShow(),this.checkIsWideInline()&&this.inlineInViewportRecShowStart(),this.setState({isInViewport:!0,isVideoPaused:!1})):(this.handleRecOutOfViewport(),i&&!this.delayedRecShowSent&&this.delayedRecShowStop(),this.checkIsWideInline()&&this.inlineInViewportRecShowStop(),this.setState({isInViewport:!1,isVideoPaused:!0}))}))})),bt(this,"handleRecError",(e=>{const{onRecError:t}=this.props;t(e)})),bt(this,"handlePageVisibilityChange",(()=>{const{global:e}=this.context,{isInViewport:t}=this.state;"visible"!==e.document.visibilityState&&t&&this.setState({isInViewport:!1}),this._recEl&&(this._intersectionObserver.unobserve(this._recEl),this._intersectionObserver.observe(this._recEl))})),bt(this,"handleNewTabOpen",(()=>{const{onNewTabOpen:e,rec:{id:t,type:i}}=this.props;this.handleOnClickEvents(),e({id:t,type:i,clickOrigin:"banner"})})),bt(this,"handleSameTabOpen",(()=>{this.handleRecHrefFollow({follow:!0,clickOrigin:"banner"})})),bt(this,"handleVideoComplete",(()=>{const{rec:{id:e},onRecClose:t,onRecComplete:i,isFlyrolled:n}=this.props;i({id:e}),n&&t({id:e})})),bt(this,"handleRecHrefFollow",(function(){let{follow:e=!0,clickOrigin:i="banner"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onSameTabOpen:n,onNewTabOpen:r,rec:{id:o,type:s},cfg:{recOpenInNewTab:l=!1},onRecClose:a,isFlyrolled:c}=t.props;if(l||"ad"===s)return t.handleOnClickEvents(),void r({id:o,type:s,manually:e,clickOrigin:i});n({id:o,recPromise:t.handleOnClickEvents()}),c&&a({id:o})})),bt(this,"handleVideoError",(e=>{let{errorType:t,errorText:i,errorCode:n,errorStage:r,errorDescription:o}=e;const{rec:{id:s},slot:{slotId:l}}=this.props;this.handleRecError({id:s,errorType:t,errorGroup:"video",errorText:i,errorCode:n,errorStage:r,errorDescription:o,slotId:l})})),bt(this,"handleVideoPlayToggle",(e=>{let{paused:t}=e;this.setState({isVideoPaused:t})})),bt(this,"handleVideoVastResponse",(()=>{const{rec:{id:e,video:{vastDomain:t}},slot:{slotId:i},onRecVideoVastResponse:n}=this.props;n({recId:e,vastDomain:t,slotId:i})})),bt(this,"handleVideoCanPlay",(()=>{const{slot:{slotId:e},onRecVideoCanPlay:t}=this.props;t({slotId:e})})),bt(this,"handleVideoStart",(()=>{const{rec:{video:{vastDomain:e}},onRecVideoStart:t,slot:{slotId:i}}=this.props;t({vastDomain:e,slotId:i})})),bt(this,"handleRecClose",(()=>{const{rec:{id:e},onRecClose:t}=this.props;t({id:e})})),bt(this,"handleCustomRecError",(()=>{const{rec:{id:e}}=this.props;this.handleRecError({id:e,errorType:"custom_rec",errorGroup:"customRec"})})),bt(this,"handleCustomRecComplete",(()=>{const{rec:{id:e},onRecComplete:t}=this.props;t({id:e})})),bt(this,"handleCustomRecEvent",(e=>{let{category:t,action:i,userInput:n,tags:r}=e;const{rec:{id:o,customRec:{name:s}},onRecCustomEvent:l}=this.props;l({id:o,project:s,category:t,action:i,userInput:n,tags:r})})),bt(this,"renderLink",(e=>{let{children:t,className:i}=e;const{isPreview:n}=this.context,{rec:{href:o,type:s,title:l},cfg:a,customWidgetData:c}=this.props,d=this.getTarget(),{utm:u}=c||null;return r().createElement(ht.Z,{isPreview:n,href:(0,C.Hn)({href:o,recType:s,cfg:a,additionalUtm:u}),target:d,className:i,onNewTabOpen:this.handleNewTabOpen,onSameTabOpen:this.handleSameTabOpen,title:l,dataTest:"rec-link"},t)})),bt(this,"renderLinkOverlay",(e=>{let{zIndex:t}=e;const{isPreview:i}=this.context,{rec:{href:n,type:o,title:s},cfg:l,customWidgetData:a}=this.props,c=this.getTarget(),{utm:d}=a||null;return r().createElement(Xe.Z,{isPreview:i,href:(0,C.Hn)({href:n,recType:o,cfg:l,additionalUtm:d}),target:c,zIndex:t,onNewTabOpen:this.handleNewTabOpen,onSameTabOpen:this.handleSameTabOpen,title:s,dataTest:"rec-link"})})),bt(this,"renderCloseButtonOverlay",(()=>{const{widgetStyles:e,cfg:{recClose:{visible:t}={}},isFlyrolled:i}=this.props;return t||i?r().createElement(Xe.Z,{className:e.classes.closeButtonOverlay,zIndex:1e5,dataTest:"rec-close-button",onClick:this.handleRecClose}):null})),bt(this,"renderAdvertiserInfoOverlay",(()=>{const{isPreview:e}=this.context,{widgetStyles:t,rec:{advertiserInfoUrl:i}}=this.props;return i?r().createElement(Xe.Z,{href:i,isPreview:e,target:"_blank",className:t.classes.advertiserInfoOverlay}):null})),bt(this,"renderOrdToken",(()=>{const{rec:{advertiserInfo:{ordToken:e}={},type:t,adMark:i}}=this.props;return e&&(0,ft.c)({adMark:i,type:t})?r().createElement(mt.Z,{ordToken:e}):null})),bt(this,"renderVideo",(()=>{const{cfg:{recVideo:{visible:e,sizingType:t,aspectRatioWidth:i,aspectRatioHeight:n,lastFrameControls:o}={}},rec:{video:s,size:l}}=this.props,{isInViewport:a,isVideoPaused:c,Video:d}=this.state,{isPreview:u}=this.context;if(!s||!e)return null;const{vast:h,vastDomain:p}=s,m=this.callbackPromisizer.createCb("video");if(!d)return null;const g="wide"===l?16:i,f="wide"===l?9:n;return r().createElement(d,{vastString:h,vastDomain:p,sizingType:t,aspectRatioWidth:g,aspectRatioHeight:f,lastFrameControls:o,paused:c,isInViewport:a,onSetVideo:this.setVideoItem,onReady:m,onError:this.handleVideoError,onStart:this.handleVideoStart,onVastResponse:this.handleVideoVastResponse,onCanPlay:this.handleVideoCanPlay,onPlayToggle:this.handleVideoPlayToggle,onClickThrough:this.handleRecHrefFollow,onComplete:this.handleVideoComplete,isPreview:u})})),bt(this,"setThumbItem",(e=>{this.setState({thumbItem:e})})),bt(this,"setVideoItem",(e=>{this.setState({videoItem:e})})),bt(this,"setLabelEl",(e=>{this.setState({labelEl:e})})),bt(this,"renderThumbnail",(()=>{const{rec:{thumbnails:e,size:t,type:i,title:n},recIndex:o,cfg:{recThumbnail:{visible:s,aspectRatioWidth:l=4,aspectRatioHeight:a=3,aspectRatioApplyToRecs:c=["normal"],aspectRatioApplyToRecTypes:d=["ad"],isInViewportAnimation:u=!1}={}},ThumbnailLayout:h}=this.props,{isInViewport:p}=this.state;if(!s||!e||!e.length)return null;const m=l/a,g="wide"!==t||c.includes("wide")?m:(0,C.gZ)(e),f=this.callbackPromisizer.createCb("thumbnail"),y=ot()(n,e[0].src);return r().createElement(h,{key:y,src:e,aspectRatio:g,aspectRatioFallback:m,aspectRatioApplyToRecs:c,aspectRatioApplyToRecTypes:d,recSize:t,recType:i,recIndex:o,isInViewportAnimation:u,isInViewport:p,onPreload:f,setThumbItem:this.setThumbItem})})),bt(this,"checkIsMobile",(()=>{const{global:e}=this.context,{clientWidth:t,clientHeight:i}=e.document.documentElement;return Math.min(t,i)<500})),bt(this,"renderCallButton",(()=>{const{isPreview:e}=this.context,{rec:{id:t,meta:{phone:i}={}},widgetStyles:n,onRecCustomEvent:o}=this.props,{thumbItem:s,videoItem:l}=this.state,a=!!i,c=this.checkIsMobile();return a&&(e||c)?r().createElement(pt.Z,{mediaSizeHolder:s||l,phone:i,widgetStyles:n,onClick:e?e=>{e.preventDefault()}:()=>{this.setState({isVideoPaused:!0}),o({id:t,project:"call_button_click_stat",category:"button",action:"click"})}}):null})),bt(this,"renderTitle",(()=>{const{widgetStyles:e,rec:t,cfg:{recTitle:i={},recDescription:n={},recAd:o={},recItem:s={},recThumbnail:{visible:l=!1}},TitleLayout:a}=this.props,{thumbItem:c,labelEl:d}=this.state,{cutTextUntilThumbnailBottom:u}=s;if(!i.visible||!t.title)return null;const h=this.callbackPromisizer.createCb("title");return r().createElement(a,{styles:e,type:t.type,size:t.size,title:t.title,titleCfg:i,description:t.description,descriptionCfg:n,label:o.label,category:t.category,categoryUrl:t.categoryUrl,pubDate:t.pubDate,meta:t.meta,onReady:h,cutTextUntilThumbnailBottom:u&&l,cutUntilEl:c,labelEl:d})})),bt(this,"renderDescription",(()=>{const{widgetStyles:e,rec:t,cfg:{recTitle:i={},recDescription:n={},recAd:o={},recItem:s={},recThumbnail:{visible:l=!1}},DescriptionLayout:a}=this.props,{thumbItem:c,labelEl:d}=this.state,{cutTextUntilThumbnailBottom:u}=s;if(!n.visible||!t.description)return null;const h=this.callbackPromisizer.createCb("description");return r().createElement(a,{styles:e,type:t.type,size:t.size,title:t.title,titleCfg:i,description:t.description,descriptionCfg:n,label:o.label,category:t.category,categoryUrl:t.categoryUrl,pubDate:t.pubDate,meta:t.meta,onReady:h,cutTextUntilThumbnailBottom:u&&l,cutUntilEl:c,labelEl:d})})),bt(this,"renderDisclaimer",(()=>{const{widgetStyles:e,rec:t,cfg:{recTitle:i={},recDescription:n={},recAd:o={}},DisclaimerLayout:s}=this.props;if(!t.disclaimer)return null;const l=this.callbackPromisizer.createCb("disclaimer");return r().createElement(s,{styles:e,type:t.type,size:t.size,title:t.title,titleCfg:i,description:t.description,descriptionCfg:n,disclaimer:t.disclaimer,label:o.label,category:t.category,categoryUrl:t.categoryUrl,pubDate:t.pubDate,meta:t.meta,onReady:l})})),bt(this,"renderLabel",(()=>{var e;const{rec:t,cfg:{recExchange:i={},recAd:n={}},isAdLabelInsideRec:r}=this.props;if(!r)return null;const o=null===(e=i.label)||void 0===e?void 0:e.visible;switch(t.type){case"ad":return n.label?this.getAdLabel():null;case"promo":return"show"===t.adMark?this.getAdLabel():null;case"exchange":return o?t.exchangeDomain:null;default:return null}})),bt(this,"getAdLabel",(()=>{const{rec:{adMark:e,adLabel:t},cfg:{recAd:{label:i}={}},isAdLabelInsideRec:n}=this.props;return n&&"hide"!==e?this.checkIsImgOverlay()?i||null:void 0!==t?t:i||null:null})),bt(this,"handleRootElRef",(e=>{this._recEl=e,this._intersectionObserver&&e&&this._intersectionObserver.observe(e)})),bt(this,"renderCustomRec",(()=>{const{local:e,isPreview:t}=this.context,{CustomRecLayout:i,previewCfg:n,isHidden:o,widgetStyles:s,onSpecialSliderContentSizeChange:l}=this.props,{CustomRec:a,isInViewport:c}=this.state,d=this.callbackPromisizer.createCb("customRec");if(this._cpShouldBeFinalized=!0,!a)return null;const u=wt[e.id].sheet,h=V()(s.classes.customRecWrapper,u.classes.customRecWrapper),p=tt()(this.props,["onRecMount","onRecLoad","onRecShow","onRecInViewport","onRecOutOfViewport","onRecUnmount","onNewTabOpen","onSameTabOpen","onRecVideoVastResponse","onRecVideoCanPlay","onRecVideoStart","onRecError","onRecComplete","onRecClose","onRecCustomEvent"]),m=this.getAdLabel();return r().createElement("div",{className:h,ref:this.handleRootElRef,style:o?xt:void 0},r().createElement(i,vt({},p,{CustomRec:a,isInViewport:c,isPreview:t,previewCfg:n,adLabel:m,onSpecialSliderContentSizeChange:l,onReady:d,onError:this.handleCustomRecError,onComplete:this.handleCustomRecComplete,onRecFollow:this.handleRecHrefFollow,onCustomEvent:this.handleCustomRecEvent,onRecClose:this.handleRecClose})))})),this.state={CustomRec:null,Video:null,isInViewport:!1,isVideoPaused:!0,thumbItem:null,videoItem:null,labelEl:null},this.inViewportInterval=null,this.delayedRecShowSent=!1,this.inViewportTimeStart=1/0,this._intersectionObserver=new IntersectionObserver(this.intersectionObserverCallback,{threshold:this.getVisibilityThreshold()/100}),this.inlineInViewportTimeStart=1/0,this.inlineInViewportIntervalId=null,this.inlineShowEvents=[{time:1e3,pixel:"1_sec_inline_viewport",isSent:!1},{time:2e3,pixel:"2_sec_inline_viewport",isSent:!1}],this.handleOnLoadEvents=p()(this.handleOnLoadEvents),this.handleOnShowEvents=p()(this.handleOnShowEvents),this.handleOnClickEvents=p()(this.handleOnClickEvents),this.handleRecShow=p()(this.handleRecShow),this.handleRecError=p()(this.handleRecError)}componentWillMount(){const{local:e}=this.context,{onRecLoad:t,rec:{id:i}}=this.props;(0,$.fu)({jss:e.jss,stylesSrc:yt,styleSheetsDict:wt,widgetId:e.id,sheetsManager:It}),this.callbackPromisizer=new lt.Z((()=>{this.handleOnLoadEvents(),t({id:i})})),this.handleCustomRecComponent(this.props),this.handleVideoComponent(this.props)}componentDidMount(){const{global:e}=this.context,{onRecMount:t,rec:{id:i}}=this.props;this._isMounted=!0,e.document.addEventListener("visibilitychange",this.handlePageVisibilityChange),this._cpShouldBeFinalized&&this.callbackPromisizer.finalize(),t({id:i,recEl:this._recEl}),this.isAtLeastOneVisibleField()}componentWillReceiveProps(e){this.handleCustomRecComponent(e),this.handleVideoComponent(e)}componentDidUpdate(){this._cpShouldBeFinalized&&this.callbackPromisizer.finalize()}componentWillUnmount(){const{local:e}=this.context,{onRecUnmount:t,rec:{id:i}}=this.props;this._isMounted=!1,(0,$.Yl)({widgetId:e.id,styleSheetsDict:wt,sheetsManager:It}),this.removeExternalEventListeners(),t(i)}render(){const{isHidden:e,rec:t,slot:i,recComposition:n,recIndex:o,recsLength:s,recsSizes:l,widgetStyles:a,RecPreLayout:c,RecLayout:d,cfg:{flyRoll:u},isFlyrolled:h}=this.props,p=l[i.slotId],{classes:m}=a;if(t.customRec)return this.renderCustomRec();let g;this._cpShouldBeFinalized=!0;const f={[m.recItemNormalSize]:"normal"===t.size,[m.recItemWideSize]:"wide"===t.size};switch(n){case"normalPlate":case"normalList":g=V()({...f,[m.recItemNormalPlate]:"normalPlate"===n,[m.recItemNormalList]:"normalList"===n});break;default:g=V()({...f,[m.recItemFullPlate]:"fullPlate"===n,[m.recItemFullList]:"fullList"===n})}return r().createElement("div",{ref:this.handleRootElRef,style:e?xt:void 0,className:g,"data-index":o,"data-is-first-child":0===o,"data-is-last-child":o===s-1,"data-is-odd-child":!!((o+1)%2),"data-is-even-child":!((o+1)%2),"data-grid-cols-width":i.colsWidth},r().createElement(c,{styles:a,recSizes:p,flyRollCfg:u,isFlyrolled:h,RecLayout:d,recComposition:n,type:t.type,size:t.size,renderLink:this.renderLink,renderLinkOverlay:this.renderLinkOverlay,closeButtonOverlay:this.renderCloseButtonOverlay(),advertiserInfoOverlay:this.renderAdvertiserInfoOverlay(),ordTokenItem:this.renderOrdToken(),video:this.renderVideo(),thumbnail:this.renderThumbnail(),title:this.renderTitle(),callButton:this.renderCallButton(),description:this.renderDescription(),disclaimer:this.renderDisclaimer(),label:this.renderLabel(),ageRestriction:t.ageRestriction,category:t.category,categoryUrl:t.categoryUrl,pubDate:t.pubDate,meta:t.meta,setLabelEl:this.setLabelEl}))}}function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Tt.apply(this,arguments)}function Pt(e){const{widgetRecs:t,slot:{recId:i,bgRecs:n=[]}}=e,o=e=>t.find((t=>{let{id:i}=t;return i===e}));return i?Ke()([i,...n]).map(((t,i)=>r().createElement(Wt,Tt({key:t},e,{isHidden:0!==i,rec:o(t)})))):null}bt(Wt,"propTypes",{widgetStyles:s().object,widgetStylesSrc:s().object.isRequired,isHidden:s().bool,CustomRecLayout:s().oneOfType([s().func,s().object]).isRequired,RecPreLayout:s().func.isRequired,RecLayout:s().oneOfType([s().func,s().object]).isRequired,TitleLayout:s().func.isRequired,DescriptionLayout:s().func.isRequired,DisclaimerLayout:s().oneOfType([s().func,s().object]).isRequired,ThumbnailLayout:s().oneOfType([s().func,s().object]).isRequired,instanceId:s().string.isRequired,cfgId:s().string.isRequired,previewCfg:s().object,customWidgetData:s().object,cfg:s().shape({recClose:s().shape({visible:s().bool}),recThumbnail:s().shape({visible:s().bool,aspectRatioWidth:s().number,aspectRatioHeight:s().number,aspectRatioApplyToRecs:s().array,aspectRatioApplyToRecTypes:s().array}),recVideo:s().shape({visible:s().bool,sizingType:s().oneOf(["contain","crop"]),aspectRatioWidth:s().number,aspectRatioHeight:s().number,lastFrameControls:s().bool}),recTitle:s().shape({visible:s().bool,maxLines:s().number}),recItem:s().shape({cutTextUntilThumbnailBottom:s().bool}),recDescription:s().shape({visible:s().bool,maxLines:s().number}),recAd:s().shape({label:s().string}),recPromo:s().shape({label:s().string}),recOpenInNewTab:s().bool,flyRoll:s().object,recExchange:s().object,preset:s().string}).isRequired,isAdLabelInsideRec:s().bool,rec:s().shape({id:s().string.isRequired,href:s().string.isRequired,customRec:s().shape({name:s().string}),filter:s().string,thumbnails:s().arrayOf(s().shape({width:s().number.isRequired,height:s().number.isRequired,src:s().string.isRequired})),video:s().shape({vastDomain:s().string,vast:s().string}),title:s().string,description:s().string,disclaimer:s().string,adLabel:s().string,adMark:s().oneOf(["show","hide",null]),ageRestriction:s().number,type:s().oneOf(["normal","ad","promo","exchange"]).isRequired,size:s().oneOf(["normal","wide"]).isRequired,category:s().string,categoryUrl:s().string,pubDate:s().string,onLoad:s().arrayOf(s().shape({type:s().oneOf([at,ct]),src:s().string})),onShow:s().arrayOf(s().shape({type:s().oneOf([at]),src:s().string})),onClick:s().arrayOf(s().shape({type:s().oneOf([at]),src:s().string})),meta:s().object,exchangeDomain:s().string,adOrigin:s().string,advertiserInfoUrl:s().string,advertiserInfo:s().shape({ordToken:s().string}).isRequired}).isRequired,recComposition:s().oneOf(["normalPlate","fullPlate","normalList","fullList"]),slot:s().shape({slotId:s().string.isRequired,colsWidth:s().number}).isRequired,recsSizes:s().object,recIndex:s().number.isRequired,recsLength:s().number.isRequired,isFlyrolled:s().bool,onRecMount:s().func,onRecLoad:s().func,onRecInViewport:s().func,onRecOutOfViewport:s().func,onRecShow:s().func,onRecUnmount:s().func,onNewTabOpen:s().func,onSameTabOpen:s().func,onRecVideoVastResponse:s().func,onRecVideoCanPlay:s().func,onRecVideoStart:s().func,onRecError:s().func,onRecComplete:s().func,onRecClose:s().func,onRecCustomEvent:s().func,onSpecialSliderContentSizeChange:s().func}),bt(Wt,"contextTypes",{local:s().object.isRequired,global:s().object.isRequired,isPreview:s().bool,loadCustomRec:s().func.isRequired,loadVideoComponent:s().func.isRequired}),bt(Wt,"defaultProps",{isAdLabelInsideRec:!0,widgetStyles:{classes:{}},isHidden:!1,recComposition:"normalPlate",isFlyrolled:!1,recsSizes:{},previewCfg:{},customWidgetData:{},onRecMount:()=>{},onRecLoad:()=>{},onRecInViewport:()=>{},onRecOutOfViewport:()=>{},onRecShow:()=>{},onRecUnmount:()=>{},onNewTabOpen:()=>{},onSameTabOpen:()=>{},onRecVideoVastResponse:()=>{},onRecVideoCanPlay:()=>{},onRecVideoStart:()=>{},onRecError:()=>{},onRecComplete:()=>{},onRecClose:()=>{},onRecCustomEvent:()=>{},onSpecialSliderContentSizeChange:()=>{}}),Pt.propTypes={slot:s().shape({recId:s().string,bgRecs:s().arrayOf(s().string)}).isRequired,widgetRecs:s().array},Pt.defaultProps={widgetRecs:[]};const _t=(0,n.memo)(Pt),kt={logo:{"font-family":"Verdana, Arial, Helvetica, sans-serif","font-size":"13px",color:"#bfc4c8","&$logoWithLink:hover":{color:"#78d8de"}},logoWithLink:{},logoAligner:{display:"inline-flex","align-items":"center"},logoText:{position:"relative",top:"1px","margin-left":"0.35em"}};var Lt=i(17014),Ot=i.n(Lt);function jt(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const At={},Mt=new B.gq;class Dt extends n.PureComponent{constructor(){super(...arguments),jt(this,"renderLabelWithRelap",(()=>{const{label:e,labelPosition:t}=this.props;return"right"===t?r().createElement("span",null,"Relap ",e):r().createElement("span",null,e," Relap")})),jt(this,"renderContent",(()=>{const{local:e}=this.context,{label:t,onlyLabel:i,widgetStyles:n}=this.props,o=At[e.id].sheet;return i?r().createElement("div",{className:n.classes.logoTextWithOnlyLabel},t):r().createElement("div",{className:o.classes.logoAligner},r().createElement(Ot(),null),r().createElement("div",{className:o.classes.logoText},this.renderLabelWithRelap()))}))}componentWillMount(){const{local:e}=this.context;(0,$.fu)({jss:e.jss,stylesSrc:kt,styleSheetsDict:At,widgetId:e.id,sheetsManager:Mt})}componentWillUnmount(){const{local:e}=this.context;(0,$.Yl)({widgetId:e.id,styleSheetsDict:At,sheetsManager:Mt})}render(){const{local:e}=this.context,{linkless:t,onlyLabel:i}=this.props,n=At[e.id].sheet,o=V()(n.classes.logo,{[n.classes.logoWithLink]:!t&&!i});return t||i?r().createElement("div",{className:o},this.renderContent()):r().createElement("a",{href:"https://relap.mail.ru/?utm_source=publishers_ad&utm_medium=widget&utm_content=promo_ad_link&utm_campaign=From%20widget",className:o,target:"_blank",rel:"noopener noreferrer"},this.renderContent())}}function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Nt.apply(this,arguments)}function zt(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}jt(Dt,"propTypes",{linkless:s().bool,label:s().string,labelPosition:s().oneOf(["left","right"]),onlyLabel:s().bool,widgetStyles:s().object}),jt(Dt,"contextTypes",{local:s().object.isRequired}),jt(Dt,"defaultProps",{linkless:!1,label:null,labelPosition:"left",onlyLabel:!1,widgetStyles:{classes:{}}});const Ft=e=>{let{float:t}=e;return t},Vt=e=>{let{grid:t}=e;return t},Bt=e=>e[e.type].schema;class $t extends n.PureComponent{constructor(e){var t;super(e),t=this,zt(this,"assignRecReadyPromises",(e=>{const t=this._recReadyPromises||{};return e.reduce(((e,i)=>{if(t[i.id])return e[i.id]=t[i.id],e;let n,r;const o=new Promise(((e,t)=>{n=e,r=t}));return e[i.id]={id:i.id,resolve:n,reject:r,promise:o},e}),{})})),zt(this,"handleWidgetVisibility",(e=>{let{id:t,ready:i,cfg:{positioning:{windowMinWidth:n,windowMaxWidth:r}},onWidgetShouldBeVisible:o,onWidgetShouldBeHidden:s}=e;const{global:l,isPreview:a}=this.context;if(a||!i)return;const c=l.innerWidth;M()(r)&&c>r||M()(n)&&c<n?s(t):o(t)})),zt(this,"handleWindowResize",(()=>{this.handleWidgetVisibility(this.props)})),zt(this,"checkReadyToW8ForRecsLoad",(()=>{const{cfg:{recsLackBehaviour:{destroyOnLack:e=!1}={}},slots:t}=this.props;if(!e)return!0;const i=(0,C.j1)(t);return i.length&&i.every((e=>{let{recId:t}=e;return t}))})),zt(this,"handleReadyPromises",(()=>{const{initialized:e}=this.state;if(!this.checkReadyToW8ForRecsLoad())return;const t=Object.values(this._recReadyPromises).map((e=>e.promise));t.length&&(t.push(this._externalFontsPromise),Promise.all(t).then((()=>{e||this.setState({initialized:!0})})).catch((e=>{console.error(new gt.Z("Handle Ready Promises - rejected",e))})))})),zt(this,"handleWidgetReady",(()=>{const{id:e,cfgId:t,slots:i,recs:n,onWidgetReady:r}=this.props,{local:{el:o}}=this.context,{recGroupCtx:s}=(0,C.Vk)(i,n).find((e=>{let{recGroupCtx:t}=e;return Boolean(t)}))||{};r({el:o,instanceId:e,cfgId:t,recGroupCtx:s})})),zt(this,"handleNoRecsLeft",(()=>{const{id:e,cfgId:t,onNoRecsLeft:i}=this.props,{local:{el:n}}=this.context;i({el:n,instanceId:e,cfgId:t})})),zt(this,"handleWidgetCloseByUser",(()=>{const{id:e,cfgId:t,onWidgetCloseByUser:i}=this.props,{local:{el:n}}=this.context;i({el:n,instanceId:e,cfgId:t})})),zt(this,"handleRemoval",(()=>{const{initialFetchStatus:e,recs:t,cfg:{recsLackBehaviour:{destroyOnLack:i=!1}={}},slots:n,lastSlotRemovedBy:r}=this.props;if("complete"!==e)return;const o=()=>{if("user"===r)this.handleWidgetCloseByUser();else this.handleNoRecsLeft()},s=(0,C.Vk)(n,t);i&&(()=>{const e=(0,C.j1)(n);return!e.length||e.some((e=>{let{recId:t}=e;return!t}))})()?o():s.length||o()})),zt(this,"handleInit",(()=>{const{initialized:e}=this.state;e&&this.handleWidgetReady()})),zt(this,"handleWidgetInViewport",(()=>{const{id:e,cfgId:t,onWidgetShow:i}=this.props,{local:{el:n}}=this.context;i({el:n,instanceId:e,cfgId:t})})),zt(this,"handleRecLoad",(e=>{let{id:t}=e;const{id:i,cfgId:n,onRecLoad:r}=this.props,o=this._recReadyPromises;o[t]?(o[t].resolve(),o[t].promise.then((()=>{r({instanceId:i,cfgId:n,recId:t})})).catch((e=>{console.error(new gt.Z("Rec Ready Promises at handleRecLoad - rejected",e))}))):r({instanceId:i,cfgId:n,recId:t})})),zt(this,"handleFormLoad",(e=>{let{recId:t,sequenceId:i,formId:n}=e;const{onFormLoad:r}=this.props,o=this._recReadyPromises;o[t]&&(o[t].resolve(),o[t].promise.then((()=>{r({formId:n,recId:t,sequenceId:i})})).catch((e=>{console.error(new gt.Z("Rec Ready Promises at handleFormLoad - rejected",e))})))})),zt(this,"handleRecShow",(e=>{const{cfgId:t,onRecShow:i}=this.props;i({cfgId:t,recId:e}),this.handleWidgetInViewport()})),zt(this,"handleFormShow",(e=>{let{formId:t,sequenceId:i,recId:n}=e;const{onFormShow:r}=this.props;r({formId:t,sequenceId:i,recId:n})})),zt(this,"handleFormAnswer",(e=>{const{onFormAnswer:t,id:i,cfgId:n}=this.props;t({...e,cfgId:n,instanceId:i})})),zt(this,"handleFormQuestionComplete",(e=>{const{onFormQuestionComplete:t,id:i,cfgId:n}=this.props;t({cfgId:n,instanceId:i,questionIndex:e})})),zt(this,"handleFormComplete",(e=>{let{formId:t,sequenceId:i,recId:n}=e;const{onFormComplete:r,id:o,cfgId:s}=this.props;r({formId:t,sequenceId:i,recId:n,cfgId:s,instanceId:o})})),zt(this,"handleFormGreetingComplete",(()=>{const{onFormGreetingComplete:e,id:t,cfgId:i}=this.props;e({instanceId:t,cfgId:i})})),zt(this,"handleFormRestart",(()=>{const{onFormRestart:e,id:t,cfgId:i}=this.props;e({instanceId:t,cfgId:i})})),zt(this,"handleFormResultShow",(()=>{const{onFormResultShow:e,id:t,cfgId:i}=this.props;e({instanceId:t,cfgId:i})})),zt(this,"handleFormSessionActive",(e=>{let{sequenceId:t,sessionTickInterval:i,formId:n}=e;const{onFormSessionActive:r}=this.props;r({formId:n,sequenceId:t,sessionTickInterval:i})})),zt(this,"handleFormSessionInactive",(e=>{let{formId:t,sequenceId:i}=e;const{onFormSessionInactive:n}=this.props;n({formId:t,sequenceId:i})})),zt(this,"handleFormSwapRequest",(()=>{const{onFormSwapRequest:e,id:t,cfgId:i}=this.props;e({instanceId:t,cfgId:i})})),zt(this,"handleRecUnmount",(e=>{var t;const{onRecUnmount:i}=this.props;null===(t=this._recReadyPromises[e])||void 0===t||t.reject(),i(e)})),zt(this,"handleNewTabOpen",(e=>{let{id:t,type:i,manually:n,clickOrigin:r}=e;const{id:o,cfgId:s,onNewTabOpen:l,cfg:{preset:a}}=this.props,{local:{el:c}}=this.context;l({instanceId:o,el:c,cfgId:s,recId:t,recType:i,manually:n,clickOrigin:r,preset:a})})),zt(this,"handleSameTabOpen",(e=>{let{id:t,recPromise:i}=e;const{id:n,cfgId:r,onSameTabOpen:o}=this.props,{local:{el:s}}=this.context;o({instanceId:n,el:s,cfgId:r,recId:t,recPromise:i})})),zt(this,"handleVideoVastResponse",(e=>{const{cfgId:t,id:i,onRecVideoVastResponse:n}=this.props;n({...e,instanceId:i,cfgId:t})})),zt(this,"handleVideoCanPlay",(e=>{const{id:t,onRecVideoCanPlay:i}=this.props;i({...e,instanceId:t})})),zt(this,"handleVideoStart",(e=>{let{vastDomain:t,slotId:i}=e;const{onRecVideoStart:n,id:r}=this.props;n({vastDomain:t,slotId:i,instanceId:r})})),zt(this,"handleRecError",(e=>{let{id:t,errorType:i,errorGroup:n,errorText:r,errorCode:o,errorStage:s,errorDescription:l,slotId:a}=e;const{id:c,cfgId:d,onRecError:u}=this.props;u({recId:t,instanceId:c,cfgId:d,slotId:a,errorType:i,errorGroup:n,errorText:r,errorCode:o,errorStage:s,errorDescription:l})})),zt(this,"handleRecComplete",(e=>{let{id:t}=e;const{id:i,cfgId:n,onRecComplete:r}=this.props;r({recId:t,instanceId:i,cfgId:n})})),zt(this,"handleRecClose",(e=>{let{id:t}=e;const{id:i,onRecClose:n}=this.props;n({instanceId:i,recId:t})})),zt(this,"handleRecSize",(e=>{this.setState({recsSizes:e})})),zt(this,"handleCustomRecEvent",(e=>{let{id:t,project:i,category:n,action:r,userInput:o,tags:s}=e;const{cfgId:l,onRecCustomEvent:a}=this.props;a({cfgId:l,recId:t,project:i,category:n,action:r,userInput:o,tags:s})})),zt(this,"handleLoadMoreButtonClick",(()=>{const{id:e,cfgId:t,onLoadMoreButtonClick:i}=this.props;i({instanceId:e,cfgId:t})})),zt(this,"handleMoreRecsLoad",(function(){let{slotId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:i,cfgId:n,onInfiniteScrollIntersect:r}=t.props;r({instanceId:i,cfgId:n,slotId:e})})),zt(this,"observeIntersection",(()=>{var e;const{local:{el:t}}=this.context;this._bottomEl||(this._bottomEl=document.createElement("div"),t.appendChild(this._bottomEl)),null===(e=this._intersectionObserver)||void 0===e||e.observe(this._bottomEl)})),zt(this,"handleInfiniteScrollIntersect",(e=>{let[{isIntersecting:t}]=e;const{id:i,cfgId:n,onInfiniteScrollIntersect:r}=this.props;t&&r({instanceId:i,cfgId:n})})),zt(this,"createIntersectionObserver",(()=>{if(this._intersectionObserver)return;const{cfg:{infiniteRecs:{scroll:{marginBottom:e=0}}},slots:t,recs:i}=this.props;this._intersectionObserver=new IntersectionObserver(this.handleInfiniteScrollIntersect,{root:null,rootMargin:`0px 0px ${e}px 0px`,threshold:1});(0,C.Vk)(t,i).length&&this.observeIntersection()})),zt(this,"handleGridVisibleItemsChange",(e=>{this.setState({gridVisibleItems:e})})),zt(this,"checkAdLabelInsideRec",(()=>{var e;const{slots:t,recs:i,cfg:{infiniteRecs:n,logo:r={},grid:o,recAd:{adLabelInsideRec:s=!1}={}}}=this.props,{gridVisibleItems:l}=this.state;if("carousel"===(null===(e=o.simple)||void 0===e?void 0:e.subtype)&&!this.checkOnlyAdsInGridSchema(o)||"scroll"===(null==n?void 0:n.type)||"composite"===o.type||s)return!0;const a=(0,C.Vk)(t,i);return a.filter(((e,t)=>l.includes(t))).some((e=>"ad"!==e.type||void 0!==e.adLabel))||1===a.length&&!1===r.visible})),zt(this,"renderWidgetLogo",(e=>{var t;let{isAdLabelInsideRec:i}=e;const{cfg:{recAd:n,logo:o={}},isTrashDomain:s,widgetStyles:l,recs:a}=this.props,c=s||!o.visible;if(c&&i)return null;const d=Object.values(a),u=1===d.length&&(null===(t=d[0])||void 0===t?void 0:t.adMark),h=i||"hide"===u?null:n.label;return r().createElement("div",{className:l.classes.logo},r().createElement(Dt,{linkless:o.linkless,label:h,onlyLabel:c,widgetStyles:l}))})),zt(this,"handleFormComponent",(e=>{let{form:t}=e;const{loadFormComponent:i}=this.context;t&&((0,d.g)({id:"load form chunk",groupId:"init"}),i().then((e=>{const t=e.default;(0,d.Ix)({id:"load form chunk",groupId:"init"}),this.setState({FormComponent:t})})))})),this.state={initialized:!1,gridVisibleItems:[],recsSizes:{},FormComponent:null},this.handleWidgetReady=p()(this.handleWidgetReady),this.handleNoRecsLeft=p()(this.handleNoRecsLeft),this.handleWidgetCloseByUser=p()(this.handleWidgetCloseByUser),this.handleWidgetInViewport=p()(this.handleWidgetInViewport),this.handleWindowResize=a()(this.handleWindowResize,300),this.getGridCfg=(0,D.P1)([Ft,Vt],((e,t)=>({...t,float:e}))),this.checkOnlyAdsInGridSchema=(0,D.P1)([Bt],(e=>e.every((e=>{let{types:t}=e;return 1===t.length&&"ad"===t[0]}))))}componentWillMount(){const{global:e}=this.context,{id:t,cfgId:i,cfg:{externalFonts:n},slots:r,recs:o}=this.props,s=(0,C.Vk)(r,o);this._recReadyPromises=this.assignRecReadyPromises(s),this._externalFontsPromise=(0,N.Z)({externalFonts:n,context:e}),(0,d.pV)({id:"load fonts",instanceId:t,cfgId:i}),this._externalFontsPromise.then((e=>{this.unloadCustomFonts=e,(0,d.N_)({id:"load fonts",instanceId:t,cfgId:i})})),this.handleReadyPromises(),s.length&&"form"===s[0].type&&this.handleFormComponent(s[0])}componentDidMount(){var e,t;const{global:i,local:{el:n},isPreview:r}=this.context,{onWidgetLoad:o,cfgId:s,id:l,ready:a,cfg:c,onWidgetShouldBeVisible:u,onWidgetShouldBeHidden:h}=this.props;r||((0,d.N_)({id:"mount",instanceId:l,cfgId:s}),(0,d.pV)({id:"ready",instanceId:l,cfgId:s})),"scroll"===(null===(e=c.infiniteRecs)||void 0===e?void 0:e.type)&&this.createIntersectionObserver(),"scroll"!==(null===(t=c.infiniteRecs)||void 0===t?void 0:t.type)&&this._intersectionObserver&&(this._intersectionObserver.disconnect(),this._intersectionObserver=null),o({instanceId:l,cfgId:s,el:n}),this.handleWidgetVisibility({id:l,ready:a,cfg:c,onWidgetShouldBeVisible:u,onWidgetShouldBeHidden:h}),this.handleRemoval(),this.handleInit(),i.addEventListener("resize",this.handleWindowResize)}componentWillReceiveProps(e){const{global:t}=this.context,{cfg:{externalFonts:i},slots:n}=this.props,r=(0,C.Vk)(e.slots,e.recs);var o,s;i===e.cfg.externalFonts&&n===e.slots||(i!==e.cfg.externalFonts&&(this._externalFontsPromise=(0,N.Z)({externalFonts:e.cfg.externalFonts,context:t})),n!==e.slots&&(this._recReadyPromises=this.assignRecReadyPromises(r)),"scroll"===(null===(o=e.cfg.infiniteRecs)||void 0===o?void 0:o.type)&&this.createIntersectionObserver(),"scroll"!==(null===(s=e.cfg.infiniteRecs)||void 0===s?void 0:s.type)&&this._intersectionObserver&&(this._intersectionObserver.disconnect(),this._intersectionObserver=null),this.handleReadyPromises());this.handleWidgetVisibility(e),r.length&&"form"===r[0].type&&this.handleFormComponent(r[0])}componentDidUpdate(){var e,t;const{slots:i,recs:n,cfg:r}=this.props;this.handleRemoval(),this.handleInit();const o=(0,C.Vk)(i,n);"scroll"===(null===(e=r.infiniteRecs)||void 0===e?void 0:e.type)&&o.length&&(this._intersectionObserver?this.observeIntersection():this.createIntersectionObserver()),"scroll"!==(null===(t=r.infiniteRecs)||void 0===t?void 0:t.type)&&this._intersectionObserver&&(this._intersectionObserver.disconnect(),this._intersectionObserver=null)}componentWillUnmount(){const{global:e}=this.context;e.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel(),this._intersectionObserver&&this._intersectionObserver.disconnect(),this.unloadCustomFonts&&this.unloadCustomFonts()}render(){var e,t;const{id:i,cfgId:n,recs:o,previewCfg:s,cfg:l,customWidgetData:a,loadMoreInProgress:c,isFlyrolled:d,overlayImgSize:u,widgetStyles:h,widgetStylesSrc:p,slots:m,WidgetBaseLayout:g,GridLayout:f,CustomRecLayout:y,RecPreLayout:v,RecLayout:b,TitleLayout:w,DescriptionLayout:I,DisclaimerLayout:R,MainTitleLayout:S,ThumbnailLayout:E,onSpecialSliderContentSizeChange:x,onRecMount:W,onGridOverflow:T,onRowWidthChange:P}=this.props,{positioning:{float:_,align:k},mainTitle:L={},recComposition:O,grid:j,infiniteRecs:A}=l,{recsSizes:M,FormComponent:D}=this.state,N=(0,C.Bv)(m,o),z=(0,C.Vk)(m,o);if(!N.length)return null;if("form"===(null===(e=z[0])||void 0===e?void 0:e.type))return D?r().createElement(D,Nt({},this.props,{formData:z[0],onRecMount:W,onFormLoad:this.handleFormLoad,onFormShow:this.handleFormShow,onFormAnswer:this.handleFormAnswer,onFormComplete:this.handleFormComplete,onFormGreetingComplete:this.handleFormGreetingComplete,onFormQuestionComplete:this.handleFormQuestionComplete,onFormRestart:this.handleFormRestart,onFormResultShow:this.handleFormResultShow,onFormSessionActive:this.handleFormSessionActive,onFormSessionInactive:this.handleFormSessionInactive,onFormSwapRequest:this.handleFormSwapRequest})):null;const F=r().createElement(S,{styles:h,mainTitle:L}),V=this.checkAdLabelInsideRec(),B=m.reduce(((e,t,o)=>t.recId?[...e,{id:t.slotId,recId:t.recId,item:r().createElement(_t,{key:t.slotId,instanceId:i,cfgId:n,cfg:l,customWidgetData:a,previewCfg:s,isAdLabelInsideRec:V,recComposition:O,widgetStyles:h,widgetStylesSrc:p,slot:t,widgetRecs:N,recIndex:o,recsSizes:M,recsLength:m.length,CustomRecLayout:y,RecPreLayout:v,RecLayout:b,TitleLayout:w,DescriptionLayout:I,DisclaimerLayout:R,ThumbnailLayout:E,isFlyrolled:d,overlayImgSize:u,onSpecialSliderContentSizeChange:x,onRecMount:W,onRecLoad:this.handleRecLoad,onRecShow:this.handleRecShow,onRecUnmount:this.handleRecUnmount,onNewTabOpen:this.handleNewTabOpen,onSameTabOpen:this.handleSameTabOpen,onRecVideoVastResponse:this.handleVideoVastResponse,onRecVideoCanPlay:this.handleVideoCanPlay,onRecVideoStart:this.handleVideoStart,onRecError:this.handleRecError,onRecComplete:this.handleRecComplete,onRecClose:this.handleRecClose,onRecCustomEvent:this.handleCustomRecEvent})}]:e),[]),$=(null==A?void 0:A.type)||"none",q=(null==A||null===(t=A.button)||void 0===t?void 0:t.label)||"",Z="button"===$?r().createElement(Xe.Z,{className:h.classes.loadMoreButtonOverlay,zIndex:1e5,onClick:this.handleLoadMoreButtonClick}):null;return r().createElement(g,{GridLayout:f,widgetStyles:h,mainTitle:F,gridItems:B,grid:this.getGridCfg({grid:j,float:_}),slots:m,loadMoreButtonOverlay:Z,loadMoreButtonLabel:q,loadMoreInProgress:c,logo:this.renderWidgetLogo({isAdLabelInsideRec:V}),isFlyrolled:d,positioningAlign:k,onRowWidthChange:P,onGridOverflow:T,onRecsSizeChange:this.handleRecSize,onGridVisibleItemsChange:this.handleGridVisibleItemsChange,onMoreRecsLoad:this.handleMoreRecsLoad})}}zt($t,"propTypes",{id:s().string.isRequired,cfgId:s().string.isRequired,previewCfg:s().object,cfg:s().shape({type:s().oneOf(["standard","slider","overlay","fullscreen"]).isRequired,positioning:s().shape({float:s().oneOf(["left","right","none"]),windowMinWidth:s().number,windowMaxWidth:s().number,align:s().string}).isRequired,preset:s().string,recsLackBehaviour:s().shape({destroyOnLack:s().bool}),externalFonts:s().object,recComposition:s().string,mainTitle:s().shape({label:s().string}),recClose:s().object,recThumbnail:s().object,recVideo:s().object,recTitle:s().object,recDescription:s().object,recAd:s().object,recPromo:s().object,recOpenInNewTab:s().bool,infiniteRecs:s().shape({type:s().oneOf(["none","button","scroll"]),button:s().shape({label:s().string}),scroll:s().shape({marginBottom:s().number})}),grid:s().shape({type:s().oneOf(["simple","composite"]).isRequired,simple:s().object}).isRequired,logo:s().shape({visible:s().bool,linkless:s().bool}),adLabel:s().string}).isRequired,widgetStylesSrc:s().object.isRequired,recs:s().object,initialFetchStatus:s().oneOf(["pending","complete"]),widgetStyles:s().object.isRequired,WidgetBaseLayout:s().func,GridLayout:s().func,CustomRecLayout:s().oneOfType([s().func,s().object]),RecPreLayout:s().func,RecLayout:s().oneOfType([s().func,s().object]),TitleLayout:s().func,DescriptionLayout:s().func,DisclaimerLayout:s().oneOfType([s().func,s().object]),MainTitleLayout:s().func,ThumbnailLayout:s().oneOfType([s().func,s().object]),FormLayout:s().oneOfType([s().object,s().func]),ready:s().bool,loadMoreInProgress:s().bool,overlayImgSize:s().object,isFlyrolled:s().bool,slots:s().array,lastSlotRemovedBy:s().oneOf(["widget","user"]),customWidgetData:s().object,isTrashDomain:s().bool,onSpecialSliderContentSizeChange:s().func,onRecMount:s().func,onRecLoad:s().func,onFormLoad:s().func,onRecShow:s().func,onFormShow:s().func,onFormAnswer:s().func,onFormComplete:s().func,onFormGreetingComplete:s().func,onFormQuestionComplete:s().func,onFormRestart:s().func,onFormResultShow:s().func,onFormSessionActive:s().func,onFormSessionInactive:s().func,onFormSwapRequest:s().func,onRecUnmount:s().func,onNewTabOpen:s().func,onSameTabOpen:s().func,onRecVideoVastResponse:s().func,onRecVideoCanPlay:s().func,onRecVideoStart:s().func,onRecError:s().func,onRecComplete:s().func,onRecClose:s().func,onRecCustomEvent:s().func,onNoRecsLeft:s().func,onLoadMoreButtonClick:s().func,onInfiniteScrollIntersect:s().func,onWidgetCloseByUser:s().func,onWidgetLoad:s().func,onWidgetReady:s().func,onWidgetShow:s().func,onWidgetShouldBeVisible:s().func,onWidgetShouldBeHidden:s().func,onGridOverflow:s().func,onRowWidthChange:s().func}),zt($t,"contextTypes",{global:s().object.isRequired,local:s().object.isRequired,isPreview:s().bool,loadFormComponent:s().func.isRequired}),zt($t,"defaultProps",{recs:{},initialFetchStatus:"pending",WidgetBaseLayout:z.Z,GridLayout:Pe,CustomRecLayout:ke,RecPreLayout:Ne,RecLayout:ze.Z,TitleLayout:Be,DescriptionLayout:qe,DisclaimerLayout:Ze.Z,MainTitleLayout:Ue,ThumbnailLayout:Je,FormLayout:()=>null,ready:!1,loadMoreInProgress:!1,isFlyrolled:!1,slots:[],lastSlotRemovedBy:null,overlayImgSize:{},previewCfg:{},customWidgetData:{},isTrashDomain:!1,onSpecialSliderContentSizeChange:()=>{},onRecMount:()=>{},onRecLoad:()=>{},onFormLoad:()=>{},onRecShow:()=>{},onFormShow:()=>{},onFormAnswer:()=>{},onFormComplete:()=>{},onFormGreetingComplete:()=>{},onFormQuestionComplete:()=>{},onFormRestart:()=>{},onFormResultShow:()=>{},onFormSessionActive:()=>{},onFormSessionInactive:()=>{},onFormSwapRequest:()=>{},onRecUnmount:()=>{},onNewTabOpen:()=>{},onSameTabOpen:()=>{},onRecVideoVastResponse:()=>{},onRecVideoCanPlay:()=>{},onRecVideoStart:()=>{},onRecError:()=>{},onRecComplete:()=>{},onRecClose:()=>{},onRecCustomEvent:()=>{},onLoadMoreButtonClick:()=>{},onInfiniteScrollIntersect:()=>{},onNoRecsLeft:()=>{},onWidgetCloseByUser:()=>{},onWidgetLoad:()=>{},onWidgetReady:()=>{},onWidgetShow:()=>{},onWidgetShouldBeVisible:()=>{},onWidgetShouldBeHidden:()=>{},onGridOverflow:()=>{},onRowWidthChange:()=>{}});const qt={simpleGrid:{margin:"0 auto",display:"flex","flex-direction":"column","align-items":e=>{let{positioningAlign:t}=e;return(e=>{switch(e){case"left":return"flex-start";case"right":return"flex-end";default:return"center"}})(t)},padding:e=>(e=>{let{cfg:{gutter:t},float:i}=e;return"left"===i?`0 ${t/2}px ${t/2}px 0`:"right"===i?`0 0 ${t/2}px ${t/2}px`:""})(e)},mainTitleWrapper:{width:"100%"},itemsContainerWrapper:{extend:"mainTitleWrapper"},row:{display:"flex","flex-wrap":"wrap","justify-content":"flex-start","&$rowWithAlignStart":{"align-items":"flex-start"},"&$rowWithAlignEnd":{"align-items":"flex-end"},"&$rowWithAlignCenter":{"align-items":"center"},"&$rowWithAlignStretch":{"align-items":"stretch"}},rowWithAlignStart:{},rowWithAlignEnd:{},rowWithAlignCenter:{},rowWithAlignStretch:{},rowItem:{display:"flex","& > *":{display:"flex",width:"100%"}},logoWrapper:{extend:"mainTitleWrapper"},loadMoreButtonWrapper:{extend:"mainTitleWrapper"}};function Zt(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ht={},Ut=new B.gq;class Gt extends n.PureComponent{constructor(e){super(e),Zt(this,"updateStyles",(e=>{const{local:t}=this.context;Ht[t.id].sheet.update(e)})),Zt(this,"handleVisibleItems",(e=>{const{onVisibleItemsChange:t}=this.props;this._visibleItems!==e&&(this._visibleItems=e,t(e))})),Zt(this,"updateItemsSizes",(()=>{const{onRecsSizeChange:e}=this.props,{itemsSizes:t,itemElems:i}=Object.entries(this.itemElems).filter((e=>{let[t,i]=e;return t&&i})).reduce(((e,t)=>{let[i,n]=t;const{width:r,height:o}=n.getBoundingClientRect();return e.itemsSizes[i]={width:r,height:o},e.itemElems[i]=n,e}),{itemsSizes:{},itemElems:{}});this.itemElems=i,e(t)})),Zt(this,"handleWindowResize",(()=>{const{global:{innerWidth:e,innerHeight:t}}=this.context;this.updateItemsSizes();const i=e<t-k.e?"portrait":"landscape";this.setState({orientation:i})})),this.state={orientation:"portrait"},this.itemElems={},this._visibleItems=[],this.handleWindowResize=a()(this.handleWindowResize,200)}componentWillMount(){const{local:e}=this.context;(0,$.fu)({jss:e.jss,stylesSrc:qt,styleSheetsDict:Ht,widgetId:e.id,sheetsManager:Ut,createStyleSheetOptions:{link:!0}}),this.updateStyles(this.props)}componentDidMount(){const{local:e,global:t}=this.context,{items:i,onVisibleItemsChange:n}=this.props;n(i.map(((e,t)=>t))),e.innerWrapperEl.addEventListener("resize",this.handleWindowResize),t.addEventListener("resize",this.handleWindowResize),this.handleWindowResize()}componentWillReceiveProps(e){this.updateStyles(e)}componentWillUnmount(){const{local:e}=this.context;(0,$.Yl)({widgetId:e.id,styleSheetsDict:Ht,sheetsManager:Ut}),e.innerWrapperEl.removeEventListener("resize",this.handleWindowResize),i.g.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()}renderItems(){const{items:e}=this.props,{local:t}=this.context,{orientation:i}=this.state,n=Ht[t.id].sheet;return e.map((e=>{let{id:t,item:o}=e;return r().createElement("div",{key:t,ref:e=>{this.itemElems[t]=e},className:n.classes.rowItem,style:{width:("portrait"===i?100:50)+"%",maxWidth:"100%"}},o)}))}render(){const{local:e}=this.context,t=Ht[e.id].sheet;return r().createElement("div",{ref:e=>{this._wrapper=e},className:t.classes.simpleGrid},r().createElement("div",{ref:e=>{this._itemsWrapper=e}},r().createElement("div",{className:t.classes.row},this.renderItems())))}}Zt(Gt,"propTypes",{items:s().arrayOf(s().shape({id:s().string.isRequired,item:s().node.isRequired})),onRecsSizeChange:s().func.isRequired,onVisibleItemsChange:s().func}),Zt(Gt,"contextTypes",{local:s().object.isRequired,global:s().object.isRequired}),Zt(Gt,"defaultProps",{items:[],onVisibleItemsChange:()=>{}});var Qt=i(51682);function Jt(){return Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Jt.apply(this,arguments)}const Xt=e=>{var t,i;return(null===(t=Object.values(e)[0])||void 0===t||null===(i=t.customRec)||void 0===i?void 0:i.name)||""},Yt=(0,C.$V)();function Kt(e,t){const{FullscreenLayout:i=j,cfg:o,widgetStylesSrc:s,id:l,cfgId:h,visible:p=!1,customData:m={},platform:g,recs:f,onNewTabOpen:y,onRecLoad:v,onRecShow:b,onSameTabOpen:w,onWidgetCloseByUser:W,onWidgetReady:T}=e,{recAd:{label:P}}=o,{local:_,global:k,isPreview:L=!1}=t,{el:O}=_,A="desktop"===g,[{minWidth:M,maxWidth:D},N]=(0,n.useState)({minWidth:0,maxWidth:0}),z=(0,E.Z)((()=>{L||((0,d.N_)({id:"ready",instanceId:l,cfgId:h}),I(h))})),F=(0,n.useCallback)((()=>{if(!O)return;O.style.height="1px";const e=O.offsetWidth;O.style.position="absolute",O.style.left="-9999px",O.style.width=`${e}px`,O.style.visibility="hidden"}),[O]),V=(0,n.useCallback)((()=>{O&&(z(),O.style.width="",O.style.height="",O.style.position="relative",O.style.left="",O.style.visibility="",O.style.zIndex=1e7)}),[O]),[B,$]=(0,n.useState)(!1);(0,R.Z)(k,!B);const[q,Z]=(0,n.useState)(Yt(...(0,C.Ai)(o,k)));(0,n.useEffect)((()=>{p?V():F()}),[F,p,V]),(0,x.Z)((()=>{F()}));const H=(0,S.Z)({global:k,local:_,stylesSrc:s,isDynamic:!0,data:{cfg:q,customData:m}}),U=(0,n.useCallback)((e=>{$(!0),T(e)}),[$,T]);(0,n.useEffect)((()=>{const e=a()((()=>{Z(Yt(...(0,C.Ai)(o,k)))}),300);return k.addEventListener("resize",e,!1),()=>k.removeEventListener("resize",e)}),[o,k]);const G=(0,n.useCallback)((e=>{(0,u.S)({type:e,customRecName:A?c.mf:Xt(f)})}),[f,A]),Q=(0,n.useCallback)((function(){G(Qt.FP.INIT),v(...arguments)}),[v,G]),J=(0,n.useCallback)((function(){G(Qt.FP.SHOW),b(...arguments)}),[b,G]),X=(0,n.useCallback)((function(){G(Qt.FP.CLICK),y(...arguments)}),[y,G]),Y=(0,n.useCallback)((function(){G(Qt.FP.CLICK),w(...arguments)}),[w,G]),K=(0,n.useMemo)((()=>(e=>{let{recClose:{enableCountdown:t=Qt.j_,countdownDuration:i=Qt.NA}={}}=e;return t?i:0})(o)),[o]),ee=(0,n.useCallback)((()=>W({el:O,instanceId:l,cfgId:h})),[h,O,l,W]),te=(0,n.useCallback)((()=>{G(Qt.FP.CLICK_CLOSE)}),[G]),ie=(0,n.useCallback)((()=>{G(Qt.FP.TIMER_CLOSE)}),[G]),ne=(0,n.useCallback)((e=>{const t=K-e;!t||t%Qt.c2||G(Qt.FP.getTimerTickEvent(t))}),[K,G]),re=(0,n.useCallback)((e=>{if(0===e&&K>0)return ie(),void ee();ne(e)}),[K,ee,ie,ne]),oe=(0,n.useCallback)((()=>{te(),ee()}),[ee,te]),se=(0,n.useCallback)(((e,t)=>{N({minWidth:e,maxWidth:t})}),[]);return r().createElement(i,{isReady:B,rowMinWidth:M,rowMaxWidth:D,duration:K,adLabel:P,onCloseClick:oe,onTimerTick:re},r().createElement($t,Jt({},e,{cfg:q,widgetStyles:H,GridLayout:A?void 0:Gt,onRecLoad:Q,onRecShow:J,onNewTabOpen:X,onSameTabOpen:Y,onWidgetReady:U,onRowWidthChange:se})))}Kt.contextTypes=T.H;const ei=(0,n.memo)(Kt);function ti(){return ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},ti.apply(this,arguments)}const ii={},ni=new B.gq;function ri(e,t){const{global:i,local:o}=t,{exposedFlyRollStyleSrc:s,cfg:l,customData:a,id:c,recs:d,slots:u,isFlyrolled:h,onFlyrollChange:p}=e,[m,g]=(0,n.useState)(!1),[f,y]=(0,n.useState)(9999),[v,b]=(0,n.useState)(9999),[w,I]=(0,n.useState)(100),R=(0,n.useRef)(null),S=(0,n.useRef)(null),E=(0,n.useRef)(null),T=(0,n.useRef)(null),P=e=>{var t,n;let{cfg:r,customData:s}=e;if(!i||!o)return;const l={width:i.innerWidth,height:i.innerHeight},a={width:(null===(t=T.current)||void 0===t?void 0:t.clientWidth)||0,height:(null===(n=T.current)||void 0===n?void 0:n.clientHeight)||0};ii[o.id].sheet.update({globalWindow:l,widget:a,cfg:r,customData:s})},_=()=>{if(!i)return!1;const{innerWidth:e,innerHeight:t}=i;return e<t},k=()=>{if(!i)return 0;const{flyRoll:{width:e}}=l,t=i.document.documentElement.clientWidth,n=_()?t:t*C.i6/100;return Math.min(n,e)},L=()=>{P({cfg:l,customData:a}),y(k()),b(k()),I(100)},O=()=>{L()};let j=()=>{!h&&S.current&&(S.current.style.height="")};j=(0,n.useCallback)(ee()(j,300),[]);const A=e=>{let{contentWidth:t,contentHeight:n}=e,r=t,o=n;const s=(()=>{if(!i)return 0;const e=i.document.documentElement.clientHeight;return _()?e*C.i6/100:e})();o>s&&(r=t*s/n,o=s);const l=k();return r>l&&(o=n*l/t,r=l),r/t*100},M=()=>{(0,$.Yl)({widgetId:o.id,styleSheetsDict:ii,sheetsManager:ni}),j.cancel(),R.current&&(R.current.style.width=""),S.current&&(S.current.style.height=""),i.removeEventListener("resize",O),E.current&&E.current.disconnect()};return(0,x.Z)((()=>((0,$.fu)({jss:o.exposedJss,stylesSrc:s,styleSheetsDict:ii,widgetId:o.id,sheetsManager:ni,createStyleSheetOptions:{link:!0}}),P({cfg:l,customData:a}),M))),(0,n.useEffect)((()=>{const{el:e}=o,[t]=e.getElementsByClassName("js-relap-widget-inner"),[n]=e.getElementsByClassName("js-relap-widget-placeholder");i.addEventListener("resize",O),t&&n&&(R.current=t,S.current=n,y(k()),b(k()))}),[]),(0,n.useEffect)(O,[f,v]),(0,n.useEffect)((()=>{const e=S.current,t=R.current;if(!e||!t)return;const i=e.clientHeight;e.style.height=`${Math.max(i,T.current.clientHeight)}px`,t.className=V()({[ii[o.id].sheet.classes.fly]:h}),t.style.width=h?`${f}px`:"",h||j(),P({cfg:l,customData:a})}),[h]),(0,n.useEffect)((()=>{P({cfg:l,customData:a})}),[l,a]),(0,n.useEffect)((()=>{var e;u.length&&d[null===(e=u[0])||void 0===e?void 0:e.recId]&&S.current&&(E.current&&(E.current.disconnect(),E.current=null),E.current=new IntersectionObserver((e=>{!0===e[0].isIntersecting&&(L(),g(!0),p({instanceId:c,isFlyrolled:!1})),!1===e[0].isIntersecting&&(()=>{var e;const{video:t,customRec:i}=d[null===(e=u[0])||void 0===e?void 0:e.recId]||{},n=!!t||"videocap"===(null==i?void 0:i.name);m&&n?p({instanceId:c,isFlyrolled:!0}):h&&p({instanceId:c,isFlyrolled:!1})})()})),E.current.observe(S.current))}),[u,d,S,E,m]),r().createElement("div",{ref:T},r().createElement(W.Z,{percent:w,display:h?"inline":"block",updateOnContentResize:!0,onScale:e=>{let{scaledWidth:t,contentWidth:i,contentHeight:n}=e;if(!h)return;const r=A({contentWidth:i,contentHeight:n});I(r),y(t)}},r().createElement("div",{style:{width:h?`${v}px`:""}},r().createElement($t,ti({},e,{isFlyrolled:h,onGridOverflow:e=>{h&&b(v+e)}})))))}ri.propTypes={id:s().string.isRequired,cfg:s().object.isRequired,customData:s().object,recs:s().object.isRequired,slots:s().array,exposedFlyRollStyleSrc:s().object,isFlyrolled:s().bool,onFlyrollChange:s().func},ri.defaultProps={customData:{},slots:[],exposedFlyRollStyleSrc:{},isFlyrolled:!1,onFlyrollChange:()=>{}},ri.contextTypes={local:s().object.isRequired,global:s().object.isRequired};const oi=(0,n.memo)(ri);function si(){return si=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},si.apply(this,arguments)}function li(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ai={},ci=new B.gq;class di extends n.PureComponent{constructor(e){var t;super(e),t=this,li(this,"updateStyles",(e=>{let{cfg:t,customData:i,formData:n}=e;const{local:r,global:o}=this.context,s={width:o.innerWidth,height:o.innerHeight},l={width:r.innerWrapperEl.offsetWidth,height:r.innerWrapperEl.offsetHeight},a=(0,C.Ai)(t,o),c=this.calcMediaCfg(...a);this.setState({mediaCfg:c},(()=>{ai[r.id].sheet.update({globalWindow:s,localWindow:l,cfg:c,customData:i,formData:n})}))})),li(this,"getFormData",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.props;const{recs:i,slots:n}=e,r=(0,C.Vk)(n,i);return r.length&&"form"===r[0].type?r[0].form:void 0})),li(this,"handleWindowResize",(()=>{const{cfg:e,customData:t}=this.props,i=this.getFormData();this.updateStyles({cfg:e,customData:t,formData:i})})),li(this,"handleFloat",(e=>{let{positioning:{float:t}}=e;const{local:{el:i}}=this.context;i&&(i.style.float="left"===t||"right"===t?t:"")})),li(this,"handleWidgetVisibility",(e=>{let{visible:t}=e;t?this.showWidget():this.hideWidget()})),li(this,"hideWidget",(()=>{const{local:{el:e}}=this.context;if(!e)return;e.style.height="1px";const t=e.offsetWidth;e.style.position="absolute",e.style.left="-9999px",e.style.width=`${t}px`,e.style.visibility="hidden"})),li(this,"markWidgetShownTimeEvent",(()=>{const{isPreview:e}=this.context,{id:t,cfgId:i}=this.props;e||((0,d.N_)({id:"ready",instanceId:t,cfgId:i}),I(i))})),li(this,"showWidget",(()=>{const{local:{el:e}}=this.context;e&&(this.markWidgetShownTimeEvent(),e.style.left="",e.style.width="",e.style.height="",e.style.position="",e.style.visibility="")})),this.state={mediaCfg:e.cfg},this.markWidgetShownTimeEvent=p()(this.markWidgetShownTimeEvent),this.handleWindowResize=ee()(this.handleWindowResize,300),this.calcMediaCfg=(0,C.$V)()}componentWillMount(){const{local:e}=this.context,{widgetStylesSrc:t,cfg:i,customData:n}=this.props,r=this.getFormData();this.handleFloat(i),this.hideWidget(),(0,$.fu)({jss:e.jss,stylesSrc:t,styleSheetsDict:ai,widgetId:e.id,sheetsManager:ci,createStyleSheetOptions:{link:!0}}),this.updateStyles({cfg:i,customData:n,formData:r})}componentDidMount(){const{global:e,local:t}=this.context;this.handleWidgetVisibility(this.props),e.addEventListener("resize",this.handleWindowResize),t.innerWrapperEl.addEventListener("resize",this.handleWindowResize)}componentWillReceiveProps(e){const{cfg:t,customData:i}=e,n=this.getFormData(e);this.handleFloat(t),this.handleWidgetVisibility(e),this.updateStyles({cfg:t,customData:i,formData:n})}componentWillUnmount(){const{local:e,global:t}=this.context;(0,$.Yl)({widgetId:e.id,styleSheetsDict:ai,sheetsManager:ci}),t.removeEventListener("resize",this.handleWindowResize),e.innerWrapperEl.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()}render(){const{local:e}=this.context,{exposedFlyRollStyleSrc:t}=this.props,{mediaCfg:i}=this.state,n=ai[e.id].sheet;return(0,C.xh)(i)?r().createElement(oi,si({},this.props,{cfg:i,exposedFlyRollStyleSrc:t,widgetStyles:n})):r().createElement($t,si({},this.props,{cfg:i,widgetStyles:n}))}}li(di,"propTypes",{id:s().string.isRequired,cfgId:s().string.isRequired,cfg:s().object.isRequired,customData:s().object,widgetStylesSrc:s().object.isRequired,exposedFlyRollStyleSrc:s().object,visible:s().bool}),li(di,"contextTypes",{local:s().object.isRequired,global:s().object.isRequired,isPreview:s().bool}),li(di,"defaultProps",{customData:{},visible:!1,exposedFlyRollStyleSrc:{}});var ui=i(92255);function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},hi.apply(this,arguments)}function pi(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const mi={},gi=new B.gq,fi={},yi=new B.gq,vi=2147483647,bi=9e5;class wi extends n.PureComponent{constructor(e){super(e),pi(this,"checkIsButton",(()=>{const{cfg:{preset:e}}=this.props;return"sliderButtonWidePlates"===e})),pi(this,"checkIsFullscreen",(()=>{const{cfg:{preset:e}}=this.props;return"sliderFullscreenWidePlates"===e})),pi(this,"checkIsSpecialSlider",(()=>this.checkIsButton()||this.checkIsFullscreen())),pi(this,"updateStyles",(e=>{let{cfg:t,customData:i}=e;const{local:n,global:r}=this.context,o={width:r.innerWidth,height:r.innerHeight},s={width:n.innerWrapperEl.offsetWidth,height:n.innerWrapperEl.offsetHeight},l=(0,C.Ai)(t,r),a=this.calcMediaCfg(...l);this.setState({mediaCfg:a},(()=>{fi[n.id].sheet.update({globalWindow:o,localWindow:s,cfg:a,customData:i}),mi[n.id].sheet.update({globalWindow:o,localWindow:s,cfg:a,customData:i})}))})),pi(this,"getSliderDimensions",(e=>{var t;let{contentWidth:i,contentHeight:n}=e;const r=this._contentEl.getBoundingClientRect(),o=(null===(t=this._actionButtonEl)||void 0===t?void 0:t.getBoundingClientRect())||0,s=o?r.top-o.top:0;return{fullWidth:i,fullHeight:s>0?n+s:n}})),pi(this,"getDocScrollHeight",(()=>{const{global:e}=this.context,{documentElement:t,body:i}=e.document;return Math.max(i.scrollHeight,t.scrollHeight,i.offsetHeight,t.offsetHeight,i.clientHeight,t.clientHeight)})),pi(this,"getMaxHeight",(()=>{const{global:e}=this.context,t=e.document.documentElement.clientHeight,i=e.document.documentElement.clientWidth,n=this.getMaxWidth(),r=t*i*C.i6/100;return Math.min(r/n,t)})),pi(this,"getMaxWidth",(()=>{const{global:e}=this.context,{cfg:{slider:{width:t,widthUnit:i="px"}}}=this.props,{changedContentWidth:n}=this.state;if(n)return n;const r=e.document.documentElement.clientWidth,o=this.checkIsPortraitMode()?r:r*C.i6/100;return"px"===i?Math.min(o,t):r*t/100})),pi(this,"checkIsPortraitMode",(()=>{const{global:{innerWidth:e,innerHeight:t}}=this.context;return e<t})),pi(this,"handleWidgetReady",(e=>{const{onWidgetReady:t}=this.props;this.prepareWidgetForBaseReady(),this.setState({isReady:!0},(()=>{this.handleScroll(),t(e)}))})),pi(this,"prepareWidgetForLoad",(()=>{const{local:{el:e},global:{visualViewport:t}}=this.context,{cfg:{slider:{width:i,widthUnit:n="px"}}}=this.props,{changedContentWidth:r}=this.state,o=r||i,s=this.checkIsSpecialSlider(),l=this.checkIsFullscreen();e.style.backgroundColor=s?"transparent":"#FFF",e.style.position="absolute",e.style.left="-9999px",e.style.bottom=0,e.style.zIndex=s?vi:bi,e.style.height="1px",e.style.width=l?`${t.width}px`:`${o}${n}`,e.style.fontSize=0})),pi(this,"prepareWidgetForBaseReady",(()=>{const{local:{el:e},isPreview:t}=this.context;e.style.position=t?"absolute":"fixed",e.style.height=""})),pi(this,"handleWidgetVisibility",(e=>{let{visible:t}=e;t?this.showWidget():this.hideWidget()})),pi(this,"hideWidget",(()=>{const{local:e}=this.context,{el:t}=e;t.style.visibility="hidden",t.style.left="-9999px",t.style.right="",t.classList.remove(mi[e.id].sheet.classes.sliderTopElVisible)})),pi(this,"markWidgetShownTimeEvent",(()=>{const{isPreview:e}=this.context,{id:t,cfgId:i}=this.props;e||((0,d.N_)({id:"ready",instanceId:t,cfgId:i}),I(i))})),pi(this,"updateSpecialSliderStyles",(()=>{const{local:{el:e},global:{visualViewport:t}}=this.context,i=this.checkIsFullscreen(),{changedContentWidth:n,changedContentHeight:r,buttonTopCornerOffset:o,buttonLeftCornerOffset:s,zIndex:l}=this.state,{offsetTop:a,offsetLeft:c}=t;if(i)return e.style.left=c-1+"px",e.style.top=a-1+"px",e.style.right="",void(e.style.zIndex=l);e.style.right=s?s-n+"px":0,e.style.bottom=o?o-r+"px":0,e.style.left=""})),pi(this,"showWidget",(()=>{const{local:{el:e,id:t}}=this.context,{cfg:{grid:{elWidthExceeding:i},slider:{horizontalPosition:n}}}=this.props,{changedContentWidth:r,changedContentHeight:o}=this.state;if(!e)return;this.checkIsSpecialSlider()&&r&&o?this.updateSpecialSliderStyles():(e.style.right="right"===n?i/2||0:"",e.style.left="left"===n?i/2||0:""),e.style.visibility="",e.classList.add(mi[t].sheet.classes.sliderTopElVisible),this.markWidgetShownTimeEvent()})),pi(this,"handleSpecialSliderPosition",(()=>{const{visible:e}=this.props;this.checkIsSpecialSlider()&&e&&this.updateSpecialSliderStyles()})),pi(this,"handleScroll",(()=>{const{global:e}=this.context,{cfg:{slider:{showAtDocPercent:t}}}=this.props,{isReady:i,isScrolledTo:n}=this.state;if(!i||n)return;e.pageYOffset>=(this.getDocScrollHeight()-e.document.documentElement.clientHeight)*t/100&&(e.removeEventListener("resize",this.handleScroll,!1),this.setState({isScrolledTo:!0}))})),pi(this,"handleActionButtonClick",(()=>{const{isCollapsed:e}=this.state;this.setState({isCollapsed:!e})})),pi(this,"dropState",(()=>{const{cfg:e,customData:t}=this.props,{contentWidth:i,contentHeight:n}=this.state,r=this.calcSliderScale({contentWidth:i,contentHeight:n});this.updateStyles({cfg:e,customData:t}),this.setState({iframeWidth:this.getMaxWidth(),unscaledContentWidth:this.getMaxWidth(),scalingPercent:r})})),pi(this,"handleWindowResize",(()=>{this.dropState()})),pi(this,"handleWidgetResize",(()=>{const{cfg:e,customData:t}=this.props;this.updateStyles({cfg:e,customData:t})})),pi(this,"calcSliderScale",(e=>{let{contentWidth:t,contentHeight:i}=e;const{fullWidth:n,fullHeight:r}=this.getSliderDimensions({contentWidth:t,contentHeight:i}),o=n-t,s=r-i;let l=t,a=i;const c=this.getMaxHeight()-s;a>c&&(l=t*c/i,a=c);const d=this.getMaxWidth()-o;return l>d&&(a=i*d/t,l=d),l/t*100})),pi(this,"setIframeWidth",(()=>{const{local:{el:e},global:{visualViewport:t}}=this.context,{iframeWidth:i}=this.state,n=this.checkIsFullscreen();e.style.width=`${n?t.width:i}px`})),pi(this,"setIsCollapsedStyles",(()=>{const{local:{el:e}}=this.context,{isCollapsed:t}=this.state;e.style.transform=t?`translate(0, ${this._contentEl.offsetHeight}px)`:""})),pi(this,"handleGridOverflow",(e=>{const{unscaledContentWidth:t}=this.state;this.setState({unscaledContentWidth:t+e})})),pi(this,"handleScale",(e=>{let{scaledWidth:t,contentWidth:i,contentHeight:n}=e;const r=this.calcSliderScale({contentWidth:i,contentHeight:n});this.setState({contentWidth:i,contentHeight:n,scalingPercent:r,iframeWidth:t})})),pi(this,"handleWidgetBaseVisible",(()=>{const{isBaseVisible:e}=this.state;e||this.setState({isBaseVisible:!0})})),pi(this,"handleWidgetBaseHidden",(()=>{const{isBaseVisible:e}=this.state;e&&this.setState({isBaseVisible:!1})})),pi(this,"handleSpecialSliderContentSizeChange",(e=>{let{width:t=null,height:i=null,buttonTopCornerOffset:n=0,buttonLeftCornerOffset:r=0,zIndex:o=vi}=e;this.setState({changedContentWidth:t,changedContentHeight:i,buttonTopCornerOffset:n,buttonLeftCornerOffset:r,zIndex:o},(()=>{this.handleWindowResize(),this.handleSpecialSliderPosition()}))})),pi(this,"getScalingPercent",(()=>{const{global:e}=this.context,{scalingPercent:t}=this.state;return this.checkIsButton()?100:this.checkIsFullscreen()?100/e.visualViewport.scale:t})),this.state={isReady:!1,isCollapsed:!1,isScrolledTo:!1,isBaseVisible:!1,iframeWidth:9999,unscaledContentWidth:9999,contentWidth:9999,contentHeight:9999,scalingPercent:100,mediaCfg:e.cfg,changedContentWidth:null,changedContentHeight:null,buttonTopCornerOffset:0,buttonLeftCornerOffset:0,zIndex:bi},this.markWidgetShownTimeEvent=p()(this.markWidgetShownTimeEvent),this.calcMediaCfg=(0,C.$V)(),this.handleWidgetResize=ee()(this.handleWidgetResize,300),this.handleScroll=a()(this.handleScroll,300),this.prepareWidgetForBaseReady=p()(this.prepareWidgetForBaseReady)}componentWillMount(){const{local:e}=this.context,{exposedSliderStylesSrc:t,widgetStylesSrc:i,cfg:n,customData:r}=this.props,{el:o}=e;this.prepareWidgetForLoad(),(0,$.fu)({jss:e.jss,stylesSrc:i,styleSheetsDict:fi,widgetId:e.id,sheetsManager:yi,createStyleSheetOptions:{link:!0}}),(0,$.fu)({jss:e.exposedJss,stylesSrc:t,styleSheetsDict:mi,widgetId:e.id,sheetsManager:gi,createStyleSheetOptions:{link:!0}}),this.updateStyles({cfg:n,customData:r});const s=this.checkIsSpecialSlider();o.className=V()(o.className,{[mi[e.id].sheet.classes.sliderTopEl]:!s,[mi[e.id].sheet.classes.sliderTopElTransparent]:s});const[l]=o.getElementsByClassName("js-relap-widget");this._contentEl=l}componentDidMount(){const{local:e,global:t}=this.context,{el:i}=e,[n]=i.getElementsByClassName("js-relap-action-button");this._actionButtonEl=n,t.addEventListener("resize",this.handleWindowResize,!1),t.addEventListener("resize",this.handleScroll,!1),t.addEventListener("scroll",this.handleScroll,!1),e.innerWrapperEl.addEventListener("resize",this.handleWidgetResize,!1),e.innerWrapperEl.addEventListener("resize",this.setIsCollapsedStyles,!1),this.setState({iframeWidth:this.getMaxWidth(),unscaledContentWidth:this.getMaxWidth()},(()=>{this.setIframeWidth(),this.handleWindowResize(),this.handleScroll(),this.handleWidgetVisibility(this.props),this.setIsCollapsedStyles()}))}componentWillReceiveProps(e){const{cfg:t,widgetStylesSrc:i,exposedSliderStylesSrc:n,SliderLayout:r}=this.props;e.cfg===t&&e.widgetStylesSrc===i&&e.exposedSliderStylesSrc===n&&e.SliderLayout===r||this.dropState(),this.updateStyles({cfg:e.cfg,customData:e.customData}),this.handleWidgetVisibility(e)}componentDidUpdate(){const{id:e,cfg:{slider:{maxScaleBy:t}},visible:i,onWidgetShouldBeVisible:n,onWidgetShouldBeHidden:r}=this.props,{isReady:o,isScrolledTo:s,isBaseVisible:l,scalingPercent:a}=this.state;if(this.setIframeWidth(),this.setIsCollapsedStyles(),!o||!s)return;100-a>t||!l?i&&r(e):i||n(e)}componentWillUnmount(){const{local:e,global:t}=this.context;(0,$.Yl)({widgetId:e.id,styleSheetsDict:fi,sheetsManager:yi}),(0,$.Yl)({widgetId:e.id,styleSheetsDict:mi,sheetsManager:gi}),this.handleScroll.cancel(),this.handleWidgetResize.cancel(),t.removeEventListener("resize",this.handleWindowResize,!1),t.removeEventListener("resize",this.handleScroll,!1),t.removeEventListener("scroll",this.handleScroll,!1),e.innerWrapperEl.removeEventListener("resize",this.handleWidgetResize,!1),e.innerWrapperEl.removeEventListener("resize",this.setIsCollapsedStyles,!1)}render(){const{local:e}=this.context,{SliderLayout:t}=this.props,{isCollapsed:i,unscaledContentWidth:n,mediaCfg:o}=this.state,s=fi[e.id].sheet,l=mi[e.id].sheet,a=this.checkIsSpecialSlider(),c=this.getScalingPercent(),d=r().createElement($t,hi({},this.props,{cfg:o,widgetStyles:s,onWidgetReady:this.handleWidgetReady,onGridOverflow:this.handleGridOverflow,onWidgetShouldBeVisible:this.handleWidgetBaseVisible,onWidgetShouldBeHidden:this.handleWidgetBaseHidden,onSpecialSliderContentSizeChange:this.handleSpecialSliderContentSizeChange}));return r().createElement("div",null,r().createElement(W.Z,{percent:c,display:a?"block":"inline",updateOnContentResize:!0,onScale:this.handleScale},r().createElement("div",{style:{width:`${n}px`}},r().createElement(t,{widgetStyles:s,exposedSliderStyles:l,isCollapsed:i,widgetBase:d,isSpecialSlider:a,onActionButtonClick:this.handleActionButtonClick}))))}}function Ii(){return Ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Ii.apply(this,arguments)}function Ci(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}pi(wi,"propTypes",{id:s().string.isRequired,cfgId:s().string.isRequired,customData:s().object,previewCfg:s().object,cfg:s().shape({slider:s().shape({width:s().number.isRequired,widthUnit:s().oneOf(["px","%"]),horizontalPosition:s().oneOf(["left","right"]),showAtDocPercent:s().number.isRequired,maxScaleBy:s().number.isRequired}).isRequired,grid:s().shape({elWidthExceeding:s().number,type:s().oneOf(["simple"]).isRequired}).isRequired,preset:s().string.isRequired}).isRequired,widgetStylesSrc:s().object.isRequired,exposedSliderStylesSrc:s().object.isRequired,SliderLayout:s().func,visible:s().bool,onWidgetReady:s().func,onWidgetShouldBeVisible:s().func,onWidgetShouldBeHidden:s().func}),pi(wi,"contextTypes",{local:s().object.isRequired,global:s().object.isRequired,isPreview:s().bool,previewCfg:s().object}),pi(wi,"defaultProps",{SliderLayout:ui.Z,visible:!1,customData:{},previewCfg:{},onWidgetReady:()=>{},onWidgetShouldBeVisible:()=>{},onWidgetShouldBeHidden:()=>{}});const Ri={},Si=new B.gq;class Ei extends n.PureComponent{constructor(e){super(e),Ci(this,"updateStyles",(e=>{let{cfg:t,customData:i}=e;const{local:n,global:r}=this.context,o={width:r.innerWidth,height:r.innerHeight},s={width:n.innerWrapperEl.offsetWidth,height:n.innerWrapperEl.offsetHeight},l=(0,C.Ai)(t,r),a=this.calcMediaCfg(...l);this.setState({mediaCfg:a},(()=>{Ri[n.id].sheet.update({globalWindow:o,localWindow:s,cfg:a,customData:i})}))})),Ci(this,"handleWindowResize",(()=>{const{cfg:e,customData:t}=this.props;this.updateOverlayPosition(),this.updateStyles({cfg:e,customData:t})})),Ci(this,"handleFloat",(e=>{let{positioning:{float:t}}=e;const{local:{el:i}}=this.context;i&&(i.style.float="left"===t||"right"===t?t:"")})),Ci(this,"handleWidgetVisibility",(e=>{let{visible:t}=e;t?this.showWidget():this.hideWidget()})),Ci(this,"hideWidget",(()=>{const{local:{el:e}}=this.context;if(!e)return;e.style.height="1px";const t=e.offsetWidth;e.style.position="absolute",e.style.left="-9999px",e.style.width=`${t}px`,e.style.visibility="hidden"})),Ci(this,"markWidgetShownTimeEvent",(()=>{const{isPreview:e}=this.context,{id:t,cfgId:i}=this.props;e||((0,d.N_)({id:"ready",instanceId:t,cfgId:i}),I(i))})),Ci(this,"updateOverlayPosition",(()=>{const{local:{el:e}}=this.context,{cfg:{positioning:{positionBy:t}},additionalParams:{imgOverlaySrc:i}}=this.props;if(!e||!this._imgTarget)return;const n="byAnchorEl"===t?e.parentElement.parentElement.querySelectorAll("img"):e.parentElement.querySelectorAll("img"),r=i?[...n].find((e=>e.src===i)):n[0],o=e.querySelector("div.js-relap-widget-inner-wrapper");if(!r||!o)return;const s=()=>{const t=r.getBoundingClientRect(),i=e.getBoundingClientRect();o.style.zIndex="1000",o.style.position="absolute",o.style.visibility="",o.style.width=`${t.width}px`,o.style.height=`${t.height}px`,o.style.left=t.left-i.left+"px",o.style.top=t.top-i.top+"px",o.style.display="flex",o.style.alignItems="flex-end",this.setState({overlayImageSize:{width:t.width,height:t.height}})},l=()=>{s(),r.removeEventListener("load",l)};r.complete?s():r.addEventListener("load",l)})),Ci(this,"showWidget",(()=>{const{local:{el:e}}=this.context,{cfg:{positioning:{positionBy:t}}}=this.props;if(!e)return;("byAnchorEl"===t?e.parentElement.parentElement.querySelector("img"):e.parentElement.querySelector("img"))&&(this.markWidgetShownTimeEvent(),e.style.position="relative",e.style.left="0",e.style.width="auto",e.style.height="0",e.style.visibility="",this.updateOverlayPosition())})),this.state={mediaCfg:e.cfg,overlayImageSize:{}},this.markWidgetShownTimeEvent=p()(this.markWidgetShownTimeEvent),this.handleWindowResize=a()(this.handleWindowResize,300),this.calcMediaCfg=(0,C.$V)(),this._imgTarget=null}componentWillMount(){const{local:e,global:t,local:{el:i}}=this.context,{widgetStylesSrc:n,cfg:r,cfg:{positioning:{positionBy:o}},customData:s}=this.props;this.handleFloat(r),this.hideWidget(),(0,$.fu)({jss:e.jss,stylesSrc:n,styleSheetsDict:Ri,widgetId:e.id,sheetsManager:Si,createStyleSheetOptions:{link:!0}}),this._imgTarget="byAnchorEl"===o?i.parentElement.parentElement.querySelector("img"):i.parentElement.querySelector("img"),this._resizeObserver=new t.ResizeObserver(this.handleWindowResize),this._imgTarget&&this._resizeObserver.observe(this._imgTarget),e.innerWrapperEl.addEventListener("resize",this.handleWindowResize,!1),this.updateStyles({cfg:r,customData:s})}componentDidMount(){this.handleWidgetVisibility(this.props)}componentWillReceiveProps(e){const{cfg:t,customData:i}=e;this.handleFloat(t),this.handleWidgetVisibility(e),this.updateStyles({cfg:t,customData:i})}componentWillUnmount(){const{local:e}=this.context;(0,$.Yl)({widgetId:e.id,styleSheetsDict:Ri,sheetsManager:Si}),this._resizeObserver.disconnect(),e.innerWrapperEl.removeEventListener("resize",this.handleWindowResize,!1),this.handleWindowResize.cancel()}render(){const{local:e}=this.context,{onWidgetReady:t}=this.props,{mediaCfg:i,overlayImageSize:n}=this.state,o=Ri[e.id].sheet;return r().createElement($t,Ii({},this.props,{cfg:i,widgetStyles:o,overlayImgSize:n,onWidgetReady:t}))}}function xi(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Ci(Ei,"propTypes",{id:s().string.isRequired,cfgId:s().string.isRequired,cfg:s().object.isRequired,customData:s().object,widgetStylesSrc:s().object.isRequired,visible:s().bool,additionalParams:s().object,onWidgetReady:s().func}),Ci(Ei,"contextTypes",{local:s().object.isRequired,global:s().object.isRequired,isPreview:s().bool}),Ci(Ei,"defaultProps",{customData:{},additionalParams:{},visible:!1,onWidgetReady:()=>{}});class Wi extends n.PureComponent{getChildContext(){const{local:e,global:t,isPreview:i,previewCfg:n,loadCustomRec:r,loadVideoComponent:o,loadFormComponent:s}=this.props;return{local:e,global:t,isPreview:i,previewCfg:n,loadCustomRec:r,loadVideoComponent:o,loadFormComponent:s}}render(){const{cfg:{type:e}={}}=this.props;if(!e)return null;switch(e){case"fullscreen":return r().createElement(ei,this.props);case"slider":return r().createElement(wi,this.props);case"overlay":return r().createElement(Ei,this.props);default:return r().createElement(di,this.props)}}}function Ti(){return Ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Ti.apply(this,arguments)}function Pi(e){return function(t){return r().createElement(Wi,Ti({},t,e))}}xi(Wi,"propTypes",{local:s().object.isRequired,global:s().object.isRequired,isPreview:s().bool,previewCfg:s().object,cfg:s().shape({type:s().oneOf(["standard","slider","overlay","fullscreen"])}).isRequired,loadCustomRec:s().func.isRequired,loadVideoComponent:s().func.isRequired,loadFormComponent:s().func.isRequired}),xi(Wi,"childContextTypes",{local:s().object.isRequired,global:s().object.isRequired,isPreview:s().bool,previewCfg:s().object,loadCustomRec:s().func.isRequired,loadVideoComponent:s().func.isRequired,loadFormComponent:s().func.isRequired}),xi(Wi,"defaultProps",{isPreview:!1,previewCfg:{}})},86624:(e,t,i)=>{"use strict";i.d(t,{M0:()=>S,U5:()=>E,WN:()=>C,mf:()=>u,nC:()=>R,rh:()=>m});var n=i(82492),r=i.n(n),o=i(90290);if(24866!=i.j)var s=i(68299);var l=i(69906),a=i(82288);const c="slider_fullscreen_target_mail_ru_mobile",d="slider_fullscreen_target_mail_ru_desktop",u="slider_fullscreen_target_mail_ru_desktop_double",h=e=>{let{type:t,value:i}=e;const n=(0,s.d)();(0,l.o)({path:`${n}.events.fullscreen.${t}`,value:i})},p=e=>"slider_fullscreen_target_mail_ru_mobile_html"===e.customRec.name,m=e=>a.Z.sliderFullscreenWidePlates.payload.preset===e,g=e=>[d,c].includes(e.customRec.name),f=e=>{let{width:t,height:i}=e;return t>i},y=e=>{let{customRec:{data:{images:t}}}=e;return t.some(f)},v=e=>p(e)||g(e),b=e=>{const t=e.filter(v);if(t.length<2)return t;const[i]=t;if(p(i))return[i];const n=((e,t)=>t.find((t=>{return g(t)&&(n=t,!((i=e).title===n.title&&i.description===n.description));var i,n})))(i,t);return n?[i,n]:[i]},w=e=>{let{instanceCfg:t,recs:i}=e,n=i,s=t;var l;return p(i[0])?h({type:"render.desktop_native"}):(n=[(l=i[0],{...l,domainName:l.customRec.data.domainName,thumbnails:l.customRec.data.images,customRec:void 0})],s=((e,t)=>{const i={type:"fullscreen",grid:{simple:{cols:t}}};return r()({},e,o.default.defaults,i)})(t,1),h({type:"render.desktop_single"})),{handledRecs:n,handledInstanceCfg:s}},I=e=>{let{instanceCfg:t,recs:i}=e,n=i,o=t;if(1===i.length&&(p(i[0])?h({type:"render.mobile_native"}):h({type:"render.mobile_single"})),2===i.length){s=t,o=r()({},s,{type:"fullscreen"});const e=(e=>e.some(y)?"wide":"normal")(i);n=((e,t)=>e.map((e=>({...e,size:t,customRec:{...e.customRec,name:"slider_fullscreen_target_mail_ru_double"}}))))(i,e),h({type:"render.mobile_double"})}var s;return{handledRecs:n,handledInstanceCfg:o}},C=e=>{let{getState:t,dispatch:i,addRecs:n,removeRecs:r,instanceCfg:o,instanceSchemaTiles:s,recs:l}=e,a={};if(m(o.preset)){const{platform:e}=t();h({type:"request",value:"desktop"===e?1:2}),h({type:"response",value:l.length});const c=b(l);if(!c)return a;const d=((e,t)=>{const i=e.map((e=>{let{slotId:t}=e;return t}));return t.filter((e=>{let{slotId:t}=e;return i.includes(t)}))})(c,s),u=((e,t)=>({...e,grid:{...e.grid,simple:{...e.grid.simple,schema:new Array(t).fill(e.grid.simple.schema[0])}}}))(o,c.length);return"desktop"===e&&(a={...w({instanceCfg:u,recs:c}),handledInstanceSchemaTiles:d}),"mobile"===e&&(a={...I({instanceCfg:u,recs:c}),handledInstanceSchemaTiles:d}),a.handledRecs&&(i(r(l.map((e=>{let{id:t}=e;return t})))),i(n((e=>[[e]])(a.handledRecs)))),a}return a},R=e=>e.slots.every((e=>{let{filters:t}=e;return t.includes("fullscreen")})),S=(e,t)=>{if("mobile"===t){const t=e.grid.simple.schema[0];e.grid.simple.schema=new Array(2).fill(t)}e.recsSwapOnTabInactivityTimeout={enabled:!1},"desktop"===t&&(e.theme="double_fullscreen_desktop")},E=e=>["iphone","android_phone"].includes(e)?"mobile":"desktop"},26163:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});class n{constructor(e){let{keys:t=[],onComplete:i=(()=>{})}=e;this.onComplete=i,this.isFinalized=!1,this.dict=t.reduce(((e,t)=>(e[t]={complete:!1,timedout:!1},e)),{}),this._tryToFinalize()}_tryToFinalize(){if(this.isFinalized)return;if(this.isFinalized=Object.values(this.dict).every((e=>e.complete||e.timedout)),!this.isFinalized)return;const e=Object.keys(this.dict).reduce(((e,t)=>{const{value:i}=this.dict[t];return i&&e.push(i),e}),[]);this.onComplete(e,this.dict)}setValue(e){let{id:t,value:i}=e;this.isFinalized||!this.dict[t]||this.dict[t].complete||(this.dict[t]={...this.dict[t],value:i,complete:!0},this._tryToFinalize())}timeOut(e){!this.isFinalized&&this.dict[e]&&(this.dict[e].timedout=!0,this._tryToFinalize())}}},19006:(e,t,i)=>{"use strict";i.d(t,{tI:()=>k,yB:()=>_,XP:()=>P});var n=i(57043),r=i.n(n),o=i(57239),s=i(26163);const l=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/i),a=!!navigator.userAgent.match(/(Android)/i),c=!!navigator.userAgent.match(/(Firefox)/i);var d=i(13844);function u(e){let{cbRegistry:t,scriptEl:i,cbName:n}=e;delete t[n],i.parentNode&&i.parentNode.removeChild(i)}const h=[],p=[];function m(e){let{id:t,cpm:i,nativePayload:n=null,displayUrl:r=null,width:o=null,height:s=null}=e;return r?{value:{id:t,cpm:i,displayUrl:r,sizes:{width:o,height:s}},ecpm:i/3}:{value:{id:t,cpm:i,creative:n.products[0],client:{domain:n.advertiser.domain},privacy:n.privacy,imps:n.impression_pixels.map((e=>e.url))},ecpm:i/3}}function g(e){let t,{subid:i,zoneId:n}=e;window.global.Criteo=window.global.Criteo||{},window.global.Criteo.events=window.global.Criteo.events||[];const r=new Promise((e=>{t=e}));return window.global.Criteo.events.push((()=>{window.global.Criteo.RequestBids({placements:[{slotid:"dummy",zoneid:n,publishersubid:i,nativeCallback(){}}]},(e=>{!function(e){let{bids:t,resolve:i,zoneId:n}=e;try{var r,o;let e=t.filter((e=>((null==e?void 0:e.nativePayload)||(null==e?void 0:e.displayUrl))&&!h.includes(e.id)&&e.zoneId===n));if(null!==(r=e[0])&&void 0!==r&&r.nativePayload?e=e.find((e=>{let{nativePayload:{products:[{title:t}]}}=e;return!p.includes(t)})):[e]=e,!e)return void i(null);const s=m(e);h.push(s.value.id),null!==(o=s.value)&&void 0!==o&&o.creative&&p.push(s.value.creative.title),i(m(e))}catch(e){console.log(e),i(null)}}({bids:e,resolve:t,zoneId:n})}),1e4)})),r}var f=i(78718),y=i.n(f),v=i(2575),b=i(47037),w=i.n(b),I=i(13218),C=i.n(I);function R(e){let{url:t,postParams:i,timeout:n=1e4,contentType:r="application/x-www-form-urlencoded",onSuccess:o=(()=>{}),onError:s=(()=>{})}=e;if(!t)return;const l=new XMLHttpRequest,a=e=>{"error"!==e.type&&"timeout"!==e.type&&200===e.target.status?o(l.responseText):s()};if(l.addEventListener("load",a),l.addEventListener("error",a),l.addEventListener("timeout",a),l.withCredentials=!0,i){let e;if(C()(i))e=Object.keys(i).map((e=>{const t=`${encodeURIComponent(e)}=${encodeURIComponent(i[e])}`;return"application/x-www-form-urlencoded"===r?t.replace(/%20/,"+","g"):t})).join("&");else{if(!w()(i))return(0,d.Z)("Unsupported params type"),void s();e=i}l.open("POST",t),l.timeout=n,l.setRequestHeader("Content-Type",r),l.send(e)}else l.open("GET",t),l.timeout=n,l.send()}const S={rtbhouse:{sizes:[[300,250]],bids:[{bidder:"rtbhouse",params:{region:"prebid-eu",publisherId:"ictYIc4iROlsEQZd59Ra"}},{bidder:"rtbhouse",params:{region:"prebid-eu",publisherId:"ictYIc4iROlsEQZd59Ra"}}]}};function E(e){let{id:t,adCount:i=1,bidder:n,bidCfg:{sizes:r,bids:o},resolve:s,reject:l}=e;const{pbjs:a}=window,c={};for(let e=0;e<i;e++)c[`code${e}`]={code:`code${e}`,sizes:r,bids:o};a.que.push((()=>{a.addAdUnits(Object.values(c)),a.requestBids({bidsBackHandler(e){const i=Object.keys(e).reduce(((t,i)=>c[i]?t.concat(e[i].bids):t),[]).reduce(((e,t)=>{const i=function(e){let{bid:t,bidder:i}=e;return"rtbhouse"===i?function(e){let{ad:t}=e;const n=document.createElement("p");n.innerHTML=t;const r=n.querySelector("iframe"),o=n.querySelector("img");return r&&o?{iframe:r.getAttribute("src"),nurl:o.getAttribute("src")}:((0,d.Z)(`PHB: cannot parse ${i} bid: `,t),null)}(t):((0,d.Z)(`PHB: no parse logic for ${i}`),null)}({bid:t,bidder:n});return i?(e.push({...i,currency:t.currency,cpm:t.cpm}),e):e}),[]);i.length?s({result:{name:`ext_json_${t}`,value:JSON.stringify(i)}}):l({error:{errorType:"phb_no_bids",extCfgId:t}})},timeout:1e4})}))}function x(e){let{id:t,type:i}=e;(0,o.Ix)({id:`${i}_${t}`,groupId:"calc ext params"})}function W(e){let{extParams:t,id:i,type:n}=e;x({id:i,type:n}),t.timeOut(i)}const T={token:function(e){let{name:t,value:i}=e;return Promise.resolve({result:{name:t,value:i}})},img:function(e){let t,i,{id:n,src:r}=e;const o=new Promise(((e,n)=>{t=e,i=n})),s=new Image;return s.onload=()=>{t()},s.onerror=()=>{i({error:{errorType:"img_fetch_failed",extCfgId:n}})},s.src=r,o},jsonp:function(e,t){let i,n,{id:r,src:o,callbackParamName:s}=e;const l=new Promise(((e,t)=>{i=e,n=t}));t.relapCbRegistry||(t.relapCbRegistry={});const a=t.relapCbRegistry,c=`relapCb${String(Math.random()).slice(-10)}`;a[c]=function(e){let t;try{t=JSON.stringify(e)}catch(t){(0,d.Z)("JSON stringify failed for: ",e,t)}t?i({result:{name:`ext_json_${r}`,value:t}}):n({error:{errorType:"jsonp_fetch_failed",extCfgId:r}})};const h=document.createElement("script");return setTimeout((()=>{u({cbRegistry:a,scriptEl:h,cbName:c})}),2e4),h.onerror=()=>{u({cbRegistry:a,scriptEl:h,cbName:c}),n({error:{errorType:"jsonp_fetch_failed",extCfgId:r}})},h.src=`${o}${o.includes("?")?"&":"?"}${s}=window.relapCbRegistry.${c}`,t.document.head.appendChild(h),l},chb:function(e){let{id:t,adCount:i,subid:n,zoneId:r}=e;return new Promise((e=>{var o;const s=[];for(let e=0;e<i;e++)s.push(g({subid:n,zoneId:r}));if(null===(o=window.global.Criteo)||void 0===o||!o.RequestBids){const e=document.createElement("script");e.src="https://static.criteo.net/js/ld/publishertag.js",window.global.document.head.appendChild(e)}Promise.all(s).then((i=>{e({result:{name:`ext_json_${t}`,value:JSON.stringify(i.filter((e=>e)).map((e=>e.value)))}})}))}))},iframe:function(e){let t,i,{id:n,src:r}=e;const o=new Promise(((e,n)=>{t=e,i=n})),s=document.createElement("iframe");return s.src=r,s.style.width="1px",s.style.height="1px",s.style.position="absolute",s.style.left="-9999px",s.style.visibility="hidden",s.onload=()=>{t()},s.onerror=()=>{i({error:{errorType:"iframe_fetch_failed",extCfgId:n}})},document.body.appendChild(s),o},json:function(e){let t,i,{id:n,src:r,provider:o}=e;const s=new Promise(((e,n)=>{t=e,i=n}));return function(e){let{src:t,timeout:i}=e;return new Promise(((e,n)=>{R({url:t,timeout:i,onSuccess:e,onError:n})}))}({src:r}).then((e=>{var r;let s;try{s=JSON.parse(e)}catch(e){return void i({error:{errorType:"json_parse_failed",extCfgId:n}})}switch(o){case"freakout":const e=((null===(r=s)||void 0===r?void 0:r.items)||[]).map((e=>y()(e,["title","creative_url","imp_url","click_url"])));t({result:{name:`ext_json_${n}`,value:JSON.stringify(e)}});break;case"target_mail_ru_carousel":case"target_mail_ru_carousel_tgb":try{const{cards:e}=s[0].json.targetBlock.banners[0];if(Array.isArray(e)&&e.length){const e=`extCfg_${n}_Data`,t={...s[0].json.targetBlock.banners[0]};window.extCfgsDataStorage=window.extCfgsDataStorage||{},window.extCfgsDataStorage[e]=t,s[0].json.targetBlock.banners[0].cards=e}else s[0].json.targetBlock.banners[0].cards=null}catch(e){s=[]}t({result:{name:`ext_json_${n}`,value:JSON.stringify(s)}});break;default:t({result:{name:`ext_json_${n}`,value:JSON.stringify(s)}})}})).catch((e=>{console.error(new v.Z("Json Fetch Failed",e)),i({error:{errorType:"json_fetch_failed",extCfgId:n}})})),s},mhb:function(e,t){const{id:i,adCount:n,mailHbId:r,src:o}=e;let s,l;const a=new Promise(((e,t)=>{s=e,l=t})),c=r.splice(0,n);return c.length||s(),function(e){let{src:t,params:i,timeout:n}=e;return new Promise(((e,r)=>{R({url:t,postParams:i,timeout:n,onSuccess:e,onError:r})}))}({src:o,params:JSON.stringify({places:c.map(((e,t)=>({id:`dummy${t}`,placementId:`${e}`,sizes:[[240,400]]}))),settings:{currency:"RUB",windowSize:{width:t.document.documentElement.clientWidth,height:t.document.documentElement.clientHeight}}})}).then((e=>{let t;try{t=JSON.parse(e)}catch(e){return void l({error:{errorType:"mhb_parse_failed",extCfgId:i}})}const{bids:n=[]}=t,r=n.map((e=>y()(e,["cpm","currency","displayUrl"])));s({result:{name:`ext_json_${i}`,value:JSON.stringify(r)}})})).catch((e=>{console.error(new v.Z("MHB ajaxPost - rejected",e)),l({error:{errorType:"mhb_fetch_failed",extCfgId:i}})})),a},phb:function(e){let t,n,{id:r,adCount:o,bidder:s}=e;const l=new Promise(((e,i)=>{t=e,n=i})),a=S[s];return a?(window.pbjs?E({id:r,adCount:o,bidder:s,bidCfg:a,resolve:t,reject:n}):i.e(19598).then(i.t.bind(i,45226,23)).then((()=>{E({id:r,adCount:o,bidder:s,bidCfg:a,resolve:t,reject:n})})),l):(n({error:{errorType:"phb_unknown_bidder",extCfgId:r}}),l)}},P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(((e,t)=>{switch(t.type){case"token":case"jsonp":case"chb":case"json":case"mhb":case"phb":t.nonReinitable?e.constant.push(t):e.reinitable.push(t);break;default:e.constant.push(t)}return e}),{constant:[],reinitable:[]})},_=e=>{let{adBlockPlusPromise:t,constantPromise:i,reinitablePromise:n}=e;return new Promise((e=>{Promise.all([t,i,n]).then((t=>{const i=t.reduce(((e,t)=>r()(e,(null==t?void 0:t.results)||[])),[]);e(i)}))}))},k=e=>{let{cfgs:t=[],global:i}=e;return new Promise((e=>{t.length||e({results:[],errors:[]});const n=new s.Z({keys:t.map((e=>e.id)),onComplete(t){e({results:t.filter((e=>!(null==e||!e.result))).map((e=>e.result)),errors:t.filter((e=>!(null==e||!e.error))).map((e=>e.error))})}});t.forEach((e=>{const{id:t,type:r,timeout:s=500}=e;switch(function(e){let{id:t,type:i}=e;(0,o.g)({id:`${i}_${t}`,groupId:"calc ext params"})}({id:t,type:r}),setTimeout((()=>{W({extParams:n,id:t,type:r})}),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;const t=c?e+1e3:e,i=l||a?2*e:e,n=Math.max(t,i);return Math.min(n,3e3)}(s)),r){case"token":case"img":case"jsonp":case"chb":case"iframe":case"json":case"mhb":case"phb":const o=e=>{x({id:t,type:r}),n.setValue({id:t,value:e})};T[r](e,i).then(o,o);break;default:W({extParams:n,id:t,type:r})}}))}))}},53205:(e,t,i)=>{"use strict";i.d(t,{Z:()=>w});var n=i(70735),r=i.n(n),o=i(96579),s=i(82590),l=i(86624),a=i(25940),c=i(19006),d=i(39381),u=i(2575),h=i(9652);if(24866!=i.j)var p=i(49849);const m=24866!=i.j?[]:null;function g(e,t){return 1===e.slots.length&&1===t.length||(0,l.nC)(e)}const f=e=>{let{instance:t,payload:i,slots:n,recs:r,vastErrorCount:s}=e;var l,a;return g(t,n)?(0,o.Xz)({payload:i,instanceId:t.id,additionalParams:t.additionalParams,vastErrorCount:s,swappingRecCtx:null===(l=r[null===(a=n[0])||void 0===a?void 0:a.recId])||void 0===l?void 0:l.recCtx}):[function e(t){let{slots:i,vastErrorCount:n}=t;return i.reduce(((t,i)=>{switch(i.type){case"slot":t.push(function(e){let{slot:t,vastErrorCount:i}=e;const n=i>1?(0,o.An)(t):t;return n.swapping&&r[n.recId]&&(n.recCtx=r[n.recId].recCtx),n}({slot:i,vastErrorCount:n}));break;case"grid":if(!i.slots.length)return t;t.push({...i,slots:e({slots:i.slots,vastErrorCount:n})})}return t}),[])}({slots:n,vastErrorCount:s})]},y=()=>{m[0]&&m[0]()},v=(e,t,i)=>{const{widgetInstances:n}=t();i.useCount++;if((0,d.Br)({widgetInstances:n})&&(e((0,s.Qe)()),i.useCount<2))return void y();m.shift();const{instanceId:r}=i;r&&e((0,h.MG)(r)),y(),i.resolve()},b=e=>{let{dispatch:t,getState:i,task:n,widgetRecsSchemas:r,instances:s}=e;(0,c.yB)(i().extParams).then((e=>{const{url:l,seed:c,subPublisher:d}=i();a.Z.Recs.getRecs({recsPayload:{url:l||window.parent.location.href,referer:window.parent.location.href,recsSchemaGroup:{seed:c,widgetRecsSchemas:r},extData:e.length?e:void 0,subPublisher:d}}).then((e=>{(0,o.CQ)({resp:e,instances:s,widgetRecsSchemas:r,dispatch:t,getState:i}),v(t,i,n)})).catch((e=>{console.error(new u.Z("Fill Empty Slot - rejected",e)),v(t,i,n)}))}))};function w(e,t,i){return new Promise((n=>{m.push((e=>{let{dispatch:t,getState:i,task:n}=e;return()=>{const{widgetConfigs:e,widgetInstances:o,recs:l,extParams:h,token:m,url:y,vastErrorCount:w}=i(),I=(0,d.x3)({widgetInstances:o}),C=I.map((e=>{let{instanceId:t}=e;return t})),R=I.map((t=>{var i,n,r,s,a;let{instanceId:c,slots:d}=t;const u=f({instance:o[c],payload:e[o[c].cfgId].payload,slots:d,recs:l,vastErrorCount:w}),h=!(0,p.aJ)(u);return{widgetCfgId:o[c].cfgId,widgetInstanceId:c,tiles:u,excludeVideo:h,doNotRepeatAds:(null===(i=e[o[c].cfgId])||void 0===i||null===(n=i.payload)||void 0===n||null===(r=n.recsLackBehaviour)||void 0===r?void 0:r.disableClonning)||void 0,isInitialFetch:g(o[c],d),abTestId:null===(s=e[o[c].cfgId])||void 0===s||null===(a=s.abTest)||void 0===a?void 0:a.id}}));R.length?"stale"===h.reinitableParamsStatus?a.Z.Widgets.extCfgs({token:m,url:y}).then((e=>{let{extCfgs:o}=e;const{reinitable:l}=(0,c.XP)(o),a=r()(h.reinitableSrcs,l,"id"),d=[...l,...a];t((0,s.yW)(d));const u=(0,c.tI)({cfgs:d,global:window.global});t((0,s.$Z)(u)),b({dispatch:t,getState:i,task:n,widgetRecsSchemas:R,instances:C})})).catch((e=>{console.error(new u.Z("External Configs ReInit - failed",e))})):b({dispatch:t,getState:i,task:n,widgetRecsSchemas:R,instances:C}):v(t,i,n)}})({dispatch:e,getState:t,task:{resolve:n,useCount:0,instanceId:i}})),1===m.length&&y()}))}},44527:(e,t,i)=>{"use strict";i.d(t,{q:()=>o});var n=i(69906);if(66458==i.j)var r=i(68299);const o=e=>{var t;let{payload:{preset:i=""}}=e;if("sliderFullscreenWidePlates"!==i)return!0;const o=`${(0,r.d)()}.metrics.fullscreen.screen.width`;if(null===(t=window.global)||void 0===t||!t.visualViewport)return(0,n.o)({path:`${o}.noVisualViewport`}),!1;const{visualViewport:{width:s,scale:l}}=window.global,a=Math.floor(s*l);return(0,n.o)({path:`${o}.${a}`}),a>=200}},14554:(e,t,i)=>{"use strict";function n(e){let t,{scope:i,funcName:n,args:r,onSuccess:o=(()=>{}),onError:s=(()=>{}),onComplete:l=(()=>{}),interval:a=500,timeout:c=6e3}=e,d=!1;const u=()=>{if(i[n]&&"function"==typeof i[n]&&(clearInterval(t),!d)){d=!0;try{i[n].apply(this,r),o(),l()}catch(e){console.log(e)}}};u(),d||(t=setInterval(u,a)),setTimeout((()=>{if(!d){try{s(),l()}catch(e){console.log(e)}clearInterval(t)}}),c)}i.d(t,{Z:()=>n})},25940:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var n=i(56869),r=i.n(n),o=i(45161),s=i.n(o),l=i(69724),a=i(71818),c=i(44596),d=i(13513);const u=(0,d.r9)();function h(e){function t(e){return e.reduce(((e,i)=>{switch(i.type){case"slot":e.push({...i,type:void 0,recId:void 0,swapping:void 0,colsWidth:void 0,rowsHeight:void 0,media:void 0});break;case"grid":e.push(...t(i.slots))}return e}),[])}return{recsPayload:{...e.recsPayload,recsSchemaGroup:{...e.recsPayload.recsSchemaGroup,widgetRecsSchemas:e.recsPayload.recsSchemaGroup.widgetRecsSchemas.map((function(e){return{...e,tiles:e.tiles.map((e=>t(e)))}}))}}}}const p=(e,t)=>new Promise((async(i,n)=>{const o=new URL(`${u}${e}`),s=JSON.stringify(t),l=await(async()=>{const e=await(0,a.N)(),t=await(0,d.yY)(),i={"X-Relap-UUID":e};return{...t,headers:{...t.headers,...i}}})(),h=await fetch(o,{...l,method:"POST",body:s});await c.f.set(h);try{const e=await h.json();i(r()(e))}catch(e){n(e)}})),m={Widgets:{init:d._h,extCfgs:e=>new Promise((async(t,i)=>{try{t(await(0,d.RB)(e))}catch(e){i(e)}}))},Recs:{getRecs:e=>new Promise((async(t,i)=>{try{var n;const i=s()(h(e)),r=await p("recs",i.recs_payload),o=r;"invalid request"===(null==o?void 0:o.error)&&null!=o&&o.details&&Array.isArray(null==o?void 0:o.details)&&/Expected object - got null/gi.test(null==o||null===(n=o.details[0])||void 0===n?void 0:n.message)&&(0,l.L)("Debug ext data",new Error("debug"),{"fetch.fail.method":"POST"},{},i.recs_payload.ext_data),t(r)}catch(t){(0,l.L)("Failed at Get Recs Request",t,{"fetch.fail.method":"POST"},{RequestPayload:e}),i(t)}}))},Stat:{sendStat:e=>new Promise((async(t,i)=>{try{const i=s()(e);if("object"!=typeof i||!i||!i.stat_payload)throw new Error("sendStat: Empty payload");t(await p("stat",i.stat_payload))}catch(t){(0,l.L)("Failed at Send Stat Request",t,{"fetch.fail.method":"POST"},{RequestPayload:e}),i(t)}}))}},g=24866!=i.j?m:null},48878:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(2575);if(24866!=i.j)var r=i(48192);const o=e=>{let{callback:t,callbackName:i,args:r}=e;try{t.apply(window.global,r)}catch(e){console.error(new n.Z(`Error occurred while executing ${i} handler`,e))}};class s{constructor(){this.createEmptyDicts()}createEmptyDicts(){this.globalDict={},this.cfgDict={},this.instanceDict={}}registerGlobalCallbacks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.globalDict=(0,r.Z)(this.globalDict,e)}registerCfgCallbacks(e){let{cbObj:t={},cfgId:i}=e;this.cfgDict[i]||(this.cfgDict[i]={}),this.cfgDict[i]=(0,r.Z)(this.cfgDict[i],t)}registerInstanceCallbacks(e){let{cbObj:t={},instanceId:i}=e;this.instanceDict[i]||(this.instanceDict[i]={}),this.instanceDict[i]=(0,r.Z)(this.instanceDict[i],t)}hasGlobalCallback(e){return!!this.globalDict[e]}hasCfgCallback(e){let{callbackName:t,cfgId:i}=e;return!(!this.cfgDict[i]||!this.cfgDict[i][t])}hasInstanceCallback(e){let{callbackName:t,instanceId:i}=e;return!(!this.instanceDict[i]||!this.instanceDict[i][t])}hasCallback(e){let{callbackName:t,cfgId:i,instanceId:n}=e;return!!this.hasGlobalCallback(t)||(!!this.hasCfgCallback({callbackName:t,cfgId:i})||!!this.hasInstanceCallback({callbackName:t,instanceId:n}))}triggerGlobalCallback(e){let{callbackName:t,args:i}=e;this.hasGlobalCallback(t)&&this.globalDict[t].forEach((e=>{o({callback:e,callbackName:t,args:i})}))}triggerCfgCallback(e){let{callbackName:t,cfgId:i,args:n}=e;this.hasCfgCallback({callbackName:t,cfgId:i})&&this.cfgDict[i][t].forEach((e=>{o({callback:e,callbackName:t,args:n})}))}triggerInstanceCallback(e){let{callbackName:t,instanceId:i,args:n}=e;this.hasInstanceCallback({callbackName:t,instanceId:i})&&this.instanceDict[i][t].forEach((e=>{o({callback:e,callbackName:t,args:n})}))}triggerCallback(e){let{callbackName:t,args:i,cfgId:n,instanceId:r}=e;this.triggerInstanceCallback({callbackName:t,args:i,instanceId:r}),this.triggerCfgCallback({callbackName:t,cfgId:n,args:i}),this.triggerGlobalCallback({callbackName:t,args:i})}removeGlobalCallback(e){let{callbackName:t}=e;this.hasGlobalCallback(t)&&delete this.globalDict[t]}removeCfgCallback(e){let{callbackName:t,cfgId:i}=e;this.hasCfgCallback({callbackName:t,cfgId:i})&&delete this.cfgDict[i][t]}removeInstanceCallback(e){let{callbackName:t,instanceId:i}=e;this.hasInstanceCallback({callbackName:t,instanceId:i})&&delete this.instanceDict[i][t]}removeAllInstanceCallbacks(e){this.instanceDict[e]={}}removeAllCfgCallbacks(e){this.cfgDict[e]={}}removeAllGlobalCallbacks(){this.globalDict={}}removeAllCallbacks(){this.createEmptyDicts()}}let l;function a(){return l||(l=new s,l)}},44892:(e,t,i)=>{"use strict";i.d(t,{Z:()=>V});var n=i(53894),r=i(14890),o=i(9652),s=i(3711);var l=i(20006);var a=i(58732);var c=i(45401);var d=i(85196);var u=i(89374);var h=i(62313);var p=i(37232);var m=i(82590);const g=(0,r.UY)({adBlockPlus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===m.G9?t.params:e},constant:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===m.i_?t.params:e},reinitable:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===m.ue?t.params:e}}),f=(0,r.UY)({adBlockPlusPromise:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===m.Ao?t.promise:e},constantPromise:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===m.Ph?t.promise:e},reinitablePromise:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===m.kJ?t.promise:e},reinitableParamsStatus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stale",t=arguments.length>1?arguments[1]:void 0;return t.type===m.ln?t.status:e},constantSrcs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===m.F?t.cfgs:e},reinitableSrcs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===m.Db?t.cfgs:e},values:g});var y=i(44908),v=i.n(y),b=i(57557),w=i.n(b),I=i(91966),C=i(96579),R=i(39381);var S=i(85564),E=i.n(S);var x=i(49953);var W=i(60463);var T=i(25603);var P=i(28299);var _=i(32023);var k=i(20132);var L=i(89443);var O=i(70769);var j=i(50938);const A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e},M=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desktop";return e},N=(0,r.UY)({isV6Compat:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===s.p?t.isV6Compat:e},url:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===l.$?t.url:e},customData:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===a.B?{...e,...t.data}:e},token:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===c.L?t.token:e},seed:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===d.X?t.seed:e},sessionSecret:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===u.Z?t.sessionSecret:e},subPublisher:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===h.K?t.subPublisher:e},perfData:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===p.ADD_PERF_DATA_ITEM?[...e,t.dataItem]:e},extParams:f,widgetConfigs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===I.PB?{...e,[t.cfg.id]:t.cfg}:e},widgetInstances:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.xT:return{...e,[t.id]:{id:t.id,cfgId:t.cfgId,positioning:t.positioning,additionalParams:t.additionalParams,onReady:t.onReady,onLoad:t.onLoad,isForm:t.isForm,customWidgetData:t.customWidgetData,slots:[],initialFetchStatus:"pending",lastSlotRemovedBy:null}};case I.xu:return e[t.id]?{...e,[t.id]:{...e[t.id],el:t.el,local:t.local}}:e;case I.TH:return e[t.id]?{...e,[t.id]:{...e[t.id],cfg:t.cfg}}:e;case I.TJ:return e[t.id]?{...e,[t.id]:{...e[t.id],ready:!0}}:e;case I.Mp:return e[t.id]?{...e,[t.id]:{...e[t.id],visible:!0}}:e;case I.ly:return e[t.id]?{...e,[t.id]:{...e[t.id],visible:!1}}:e;case I.lG:return e[t.id]?{...e,[t.id]:{...e[t.id],loadMoreInProgress:!0}}:e;case I.aE:return e[t.id]?{...e,[t.id]:{...e[t.id],loadMoreInProgress:!1}}:e;case I.Cs:return e[t.id]?{...e,[t.id]:{...e[t.id],initialFetchStatus:t.status}}:e;case I.hX:return e[t.id]?{...e,[t.id]:{...e[t.id],payloadIndex:t.index}}:e;case I.DQ:return e[t.id]?{...e,[t.id]:{...e[t.id],onRemove:t.onRemove}}:e;case I.kO:return w()(e,t.id);case C.zr:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:t.slots}}:e;case C.P4:if(!e[t.id])return e;const i=t.slotId?(0,R.Jb)(e[t.id].slots,(e=>"grid"!==e.type||e.slotId!==t.slotId?e:{...e,slots:[...e.slots,...t.slots]})):[...e[t.id].slots,...t.slots];return{...e,[t.id]:{...e[t.id],slots:i}};case C.Mx:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:(0,R.qS)(e[t.id].slots,(e=>{let{recId:i}=e;return i!==t.recId})),lastSlotRemovedBy:t.removedBy}}:e;case C.$G:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:(0,R.db)(e[t.id].slots,(e=>{if(e.slotId!==t.slotId)return e;const i={...e,recId:t.recId};return delete i.swapping,i}))}}:e;case C.yA:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:(0,R.db)(e[t.id].slots,(e=>{if(e.slotId!==t.slotId)return e;const i=e.bgRecs||[];return{...e,bgRecs:v()([...i,t.recId])}}))}}:e;case C.IG:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:(0,R.db)(e[t.id].slots,(e=>{if(e.slotId!==t.slotId)return e;const i=e.bgRecs||[];return{...e,bgRecs:i.filter((e=>e!==t.recId))}}))}}:e;case C.SZ:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:(0,R.db)(e[t.id].slots,(e=>{if(e.slotId!==t.slotId)return e;const i=e.bgRecs||[];return{...e,bgRecs:i.filter((t=>t===e.recId))}}))}}:e;case C.Xt:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:(0,R.db)(e[t.id].slots,(e=>e.slotId!==t.slotId?e:{...e,swapping:!0}))}}:e;default:return e}},recs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.K2:const i=E()(E()(t.recsGroup)).reduce(((e,t)=>({...e,[t.id]:{...t,slotId:void 0}})),{});return{...e,...i};case C.s7:return w()(e,t.recIds);default:return e}},recsStat:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.Dk:return{...e,[t.id]:{...e[t.id],loaded:!0}};case x.wl:return{...e,[t.id]:{...e[t.id],showed:!0}};case x.xs:return{...e,[t.id]:{...e[t.id],clicked:!0}};case x.SU:return{...e,[t.id]:{...e[t.id],videoLoaded:!0}};case x.GX:return{...e,[t.id]:{...e[t.id],formLoaded:!0}};case x.Jc:return{...e,[t.id]:{...e[t.id],formShowed:!0}};case x.T0:return{...e,[t.id]:{...e[t.id],formComplete:!0}};case C.s7:return w()(e,t.recIds);default:return e}},widgetInstancesStat:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.fg:return{...e,[t.id]:{...e[t.id],loaded:!0}};case W.LM:return{...e,[t.id]:{...e[t.id],showed:!0}};case I.kO:return w()(e,t.id);default:return e}},widgetInstancesWaitingForRecs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.R_:return[...e,t.id];case T.xN:return e.filter((e=>!t.ids.includes(e)));case T.D1:return[];default:return e}},statEvents:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.Jr:return[...e,t.event];case P.fY:return[];default:return e}},vastErrorCount:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return t.type===_.c?e+t.count:e},widgetMaxInstancesCount:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.WL:return{...e,[t.cfgId]:{...e[t.cfgId],maxInstances:t.count}};case k.t5:return{...e,[t.cfgId]:{...e[t.cfgId],maxVisibleInstances:t.count}};case k.sy:const{visibleInstancesUsed:i=[]}=e[t.cfgId]||{};return i.length&&i.includes(t.id)?e:{...e,[t.cfgId]:{...e[t.cfgId],visibleInstancesUsed:[...i,t.id]}};case k.o_:return{...e,[t.cfgId]:{...e[t.cfgId],visibleInstancesUsed:e[t.cfgId].visibleInstancesUsed.filter((e=>e!==t.id)),maxVisibleInstances:e[t.cfgId].maxVisibleInstances-1}};default:return e}},currentFlyroll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L.S8:return t.instanceId;case L.JP:return null;default:return e}},debug:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===O.V?[...e,t.debug]:e},rights:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===j.l?t.rights:e},userIp:A,isTrashDomain:M,fillRate:o.Uz,platform:D});let z;const F=e=>e&&"object"==typeof window.global&&window.global.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.global.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:"Relap v7"}):r.qC;function V(){let e,{initialState:t={},withReduxDevtools:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return z||(e=(0,r.md)(n.Z),z=(0,r.MT)(N,t,F(i)(e)),z)}},36416:(e,t,i)=>{"use strict";i.d(t,{L:()=>l,k:()=>a});var n=i(20745),r=i(3798);const o=24866!=i.j?["blur","focus","focusin","focusout","click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseover","wheel","beforeinput","input","keydown","keyup"]:null;function s(e){e.stopPropagation()}function l(e,t){if(!e)return console.warn("no local window found"),null;const i=document.createComment("style-insertion-point");e.shadowRoot.appendChild(i),e.jss=(0,r.ef)({insertionPoint:i,id:e.id}),e.exposedJss=(0,r.ef)({insertionPoint:e.shadowRootEl,id:e.id});const l=document.createElement("div");l.style.position="relative",o.forEach((e=>{l.addEventListener(e,s)}));const a=document.createElement("div");a.id="root",l.appendChild(a),e.shadowRoot.appendChild(l),e.innerWrapperEl=l;const c=(0,n.s)(a);return e.reactRoot=c,function(e,t,i,n){i.resizeObserver=new n.ResizeObserver((()=>{t(e)})),i.resizeObserver.observe(e)}(l,function(e){return t=>{const i=t.offsetHeight,n=t.offsetWidth,r=new CustomEvent("resize",{detail:{width:n,height:i},bubbles:!1,composed:!1});e.innerWrapperEl.dispatchEvent(r)}}(e),e,t),c}function a(e){var t;let{local:i={}}=e;const{reactRoot:n,innerWrapperEl:r}=i;n&&r&&(o.forEach((e=>{r.removeEventListener(e,s)})),delete i.jss,delete i.exposedJss,delete i.el,delete i.shadowRootEl,delete i.reactRoot,delete i.resizeObserver,null===(t=i.resizeObserver)||void 0===t||t.disconnect(),n.unmount())}},13513:(e,t,i)=>{"use strict";i.d(t,{T9:()=>v,RB:()=>C,_h:()=>R,r9:()=>g,yY:()=>b,Fv:()=>S});var n=i(56869),r=i.n(n),o=i(45161),s=i.n(o),l=i(24678),a=i(69724),c=i(2575);function d(){const{relapScriptEl:e,relapScriptSrc:t}=window,i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null;if(!e.includes("?"))return t;try{const i=e.split("?")[1].split("&").reduce(((e,t)=>{const[i,n]=t.split("=");return e[i]=n,e}),{}),{token:n,url:r}=i;t={token:n,url:r,isV6Compat:!!i.token}}catch(e){console.error(new c.Z("Start Config Error",e))}return t}(t);return i||(e&&e.getAttribute("data-relap-token")?{token:e.getAttribute("data-relap-token"),url:e.getAttribute("data-relap-url"),subPublisher:e.getAttribute("data-relap-sub-publisher")||"",widgetCfgId:e.getAttribute("data-relap-widget-cfg-id")||null}:{})}var u=i(14554),h=i(57239),p=i(44596),m=i(39381);const g=()=>(0,m.jk)("https://relap.mail.ru/api/v7/"),f=window;f.preinitScope=f.preinitScope||{fetchInitDataPromise:null,preInitPromise:null,resolvePreInit:null,isV6Compat:!1,initOpt:{},isManualInit:!1};const y=f.preinitScope,v=(()=>{let e=!0;return t=>{window.global.relapAPI=window.global.relapAPI||{},Object.entries(t).forEach((e=>{let[t,i]=e;window.global.relapAPI[t]=i})),window.global.relapTasks=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;function i(){e.forEach((e=>{e(t)})),e.splice(0,e.length),e.push=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return[].push.apply(e,n),i(),e.length+n.length}}return i(),e}(window.global.relapTasks,window.global.relapAPI),e&&((0,u.Z)({scope:window.global,funcName:"onRelapAPIReady",args:[t]}),(0,u.Z)({scope:window.global,funcName:"onRelapLocalDevAPIReady",args:[t]}),e=!1)}})(),b=async()=>{const e=await p.f.get(),t={"Content-Type":"application/json"};return e&&(t[p.d]=e),{headers:t,credentials:"include",mode:"cors",cache:"default"}},w=(e,t,i)=>new Promise((async(n,o)=>{const l=Object.entries(s()(t)).map((e=>{let[t,i]=e;return`${t}=${encodeURIComponent(i)}`})).join("&"),a=`${g()}${e}?${l}`,c=i||await b(),d=await fetch(a,{...c,method:"GET"});await p.f.set(d);try{const e=await d.json();n(r()(e))}catch(e){o(e)}}));function I(e){(0,h.g)({id:"fetch init data",groupId:"init"});const t=(i="init",n=w("init",e),new Promise((e=>{try{const t=(0,l.MT)("rdb_cache","responses"),r=n.then((e=>((0,l.t8)(i,e,t),e)));(0,l.U2)(i,t).then((t=>e(t||r))).catch((()=>{e(n),(0,a.L)("Web Storage Error",new Error("can't get init cache from idb"),{"webstorage.error":"idb"})}))}catch(t){(0,a.L)("Web Storage Error",new Error("can't access to IndexedDB"),{"webstorage.error":"idb"}),e(n)}})));var i,n;return t.then((()=>{(0,h.Ix)({id:"fetch init data",groupId:"init"})})).catch((t=>{(0,a.L)("Failed at Init Request",t,{"fetch.fail.method":"GET"},{RequestPayload:e})})),t}async function C(e){const t=await function(){const e=g().replace("relap.io","relap.mail.ru");return(0,h.g)({id:"fetch vid_cookie",groupId:"init"}),fetch(`${e}get_vid`,{credentials:"include"}).then((e=>e.json())).catch((e=>((0,a.L)("Failed at VID cookie Request",e,{"fetch.fail.method":"GET"}),{}))).finally((()=>{(0,h.Ix)({id:"fetch vid_cookie",groupId:"init"})}))}();(0,h.g)({id:"fetch ext_cfgs data",groupId:"init"});const i=w("ext_cfgs",{...e,...t});return i.then((()=>{(0,h.Ix)({id:"fetch ext_cfgs data",groupId:"init"})})).catch((e=>{(0,a.L)("Failed at External Configs Request",e,{"fetch.fail.method":"GET"})})),i}const R=e=>new Promise((async(t,i)=>{try{const[i,n]=await Promise.all([I(e),C(e)]);t({...i,...n})}catch(e){i(e)}})),S=()=>{let e;const t=new Promise((t=>{e=t})),i=d();y.isV6Compat=!!i.isV6Compat,y.initOpt=i;const n={init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y.preInitPromise||(t.token&&(y.isManualInit=!0),y.preInitPromise=new Promise((n=>{y.initOpt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{token:e.token||i.token,url:e.url||i.url||window.global.location.href,subPublisher:e.subPublisher||i.subPublisher,widgetCfgId:e.widgetCfgId||i.widgetCfgId,isV6Compat:i.isV6Compat}}(t),y.fetchInitDataPromise=(e=>{let{token:t,url:i,widgetCfgId:n}=e;if(!t)return null;(0,h.g)({id:"fetch init data",groupId:"init"});const r={token:t,url:i,widgetCfgId:n};return n||delete r.widgetCfgId,R(r)})(y.initOpt).catch((e=>{console.error(new c.Z("PreInit Promise - rejected",e))})).finally(e),y.resolvePreInit=n}))),y.preInitPromise}};return i.token?(n.init(),t):(v(n),Promise.resolve())}},94249:(e,t,i)=>{"use strict";i.r(t),i.d(t,{markProcessEnd:()=>j.Ix,publicAPI:()=>Ue,setPerfPoint:()=>j.Gn,setProcessStart:()=>j.lN});var n=i(23493),r=i.n(n),o=i(99560),s=i.n(o),l=i(44892),a=i(48878),c=i(25940),d=i(13513),u=i(32747),h=i.n(u),p=i(20745),m=i(85656),g=i(45697),f=i.n(g),y=i(17014),v=i.n(y),b=i(22222),w=i(67368),I=i(36416);function C(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const R=(0,b.P1)([function(e){return[...e].sort(((e,t)=>e.start-t.start)).sort((e=>"browser_load"===e.processId?-1:1)).sort((e=>"browser_DOMContentLoaded"===e.processId?-1:1))}],(e=>e));class S extends u.Component{constructor(){super(...arguments),C(this,"handlePopupRender",(e=>{let{global:t,perfData:n,debug:r}=e;this._widgetReactRoot&&Promise.all([Promise.all([i.e(54736),i.e(1614)]).then(i.bind(i,62286)),this._iframePromise]).then((e=>{const i=e[0].default;this._widgetReactRoot.render(h().createElement(i,{perfData:n,global:t,local:this._local,debug:r}))}))})),C(this,"refRoot",(e=>{this._rootEl=e}))}componentDidMount(){const e=this._rootEl,t="admin-popup",i=`${Date.now()}@${t}`,{el:n,shadowRootEl:r}=(0,w.Z)({anchorEl:e,position:"append",frameType:"relapAdmin",instanceId:i,cfgId:t,globalObj:{id:i}});r.contentWindow.el=n,r.contentWindow.shadowRootEl=r,this._local=r.contentWindow,this._iframePromise=new Promise((e=>{const{global:t}=this.props;this._widgetReactRoot=(0,I.L)(r.contentWindow,t),e()})),this._iframePromise.then((()=>{const{global:e,perfData:t,debug:i}=this.props;this.handlePopupRender({global:e,perfData:t,debug:i})}))}componentWillReceiveProps(e){let{global:t,perfData:i,debug:n}=e;this._iframePromise.then((()=>{this.handlePopupRender({global:t,perfData:i,debug:n})}))}shouldComponentUpdate(){return!1}componentWillUnmount(){this._iframePromise.then((()=>{(0,I.k)({local:this._local})}))}render(){return h().createElement("div",{style:{position:"fixed",overflow:"scroll",top:0,right:0,left:0,bottom:0,zIndex:1000001,background:"#fff"},ref:this.refRoot})}}C(S,"propTypes",{global:f().object.isRequired,perfData:f().array,debug:f().array}),C(S,"defaultProps",{perfData:[],debug:[]});const E=(0,m.$j)(((e,t)=>({global:t.global,perfData:R(e.perfData),debug:e.debug})))(S);function x(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class W extends u.PureComponent{constructor(e){super(e),x(this,"handleClick",(()=>{const{isPopupVisible:e}=this.state;this.setState({isPopupRendered:!0,isPopupVisible:!e})})),x(this,"handleMouseEnter",(()=>{this.setState({isHovered:!0})})),x(this,"handleMouseLeave",(()=>{this.setState({isHovered:!1})})),this.state={isPopupRendered:!1,isPopupVisible:!1,isHovered:!1}}render(){const{global:e}=this.props,{isPopupRendered:t,isPopupVisible:i,isHovered:n}=this.state,r=t?h().createElement(E,{global:e}):null;return h().createElement("div",null,h().createElement("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1000002,width:"20px",height:"20px",padding:"8px",background:n?"#06b7c2":"#fff",borderRadius:"40px",border:"1px solid #06b7c2",color:n?"#fff":"#06b7c2",cursor:"pointer",transition:"all 300ms ease 0s",boxSizing:"content-box"},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick},h().createElement(v(),{style:{width:"100%",height:"100%"}})),h().createElement("div",{style:{display:i?"":"none"}},r))}}let T;function P(e,t){if(!T){const e=t.document.createElement("div");e.id="relap-admin-button",t.document.body.appendChild(e),T=(0,p.s)(e)}T.render(h().createElement(m.zt,{store:e},h().createElement(W,{global:t})))}function _(e){let{func:t,global:i}=e;const n=()=>{t(),i.removeEventListener("DOMContentLoaded",n)};switch(i.document.readyState){case"interactive":case"complete":n();break;default:i.addEventListener("DOMContentLoaded",n,!1)}}x(W,"propTypes",{global:f().object.isRequired});var k=i(3674),L=i.n(k);function O(e){const t=window.global.document;return L()(e).reduce(((i,n)=>{const r=e[n];for(let e=0;e<r.length;e++){const o=t.querySelector(r[e].selector);if(!o)continue;const s=r[e].attribute?o.getAttribute(r[e].attribute):o.textContent;if(s){i[n]=s;break}}return i}),{})}var j=i(57239),A=i(69906),M=i(39381);const D="relap_abpCache";function N(e){let{checkIndex:t,random:i}=e;(0,j.g)({id:`adb_${t}`,groupId:"calc ext params"});const n=new Promise((e=>{const n=new Image;n.onload=function(){e({check:!0})},n.onerror=function(){e({check:!1})},setTimeout((()=>{e({timedout:!0})}),1e3),n.src=(0,M.jk)(`https://relap.mail.ru/abp.gif?ch=${t}&rn=${i}`)}));return n.then((()=>{(0,j.Ix)({id:`adb_${t}`,groupId:"calc ext params"})})),n}function z(){return new Promise((e=>{const t=11*Math.random(),i={results:[{name:"_wlabp",value:"1",isTgb:1,isWide:1}]},n=(e=>{const t=localStorage.getItem(D),i=Date.now();let n=!1,r=!1;if(t)try{const o=JSON.parse(t),{updateTime:s,current:l}=o;n=l,r=s&&i-s<864e5,r&&e()}catch(e){console.error("Ошибка при чтении поля relap_abpCache в localStorage")}return{isValid:r,save:t=>{try{t!==n&&(0,A.o)({rootPath:"health",path:"events.perform.debug.adblock.change."+(t?"enable":"disable")}),localStorage.setItem(D,JSON.stringify({updateTime:Date.now(),current:t}))}catch(t){e()}}}})((()=>e(i)));n.isValid||Promise.all([N({checkIndex:1,random:t}),N({checkIndex:2,random:t})]).then((t=>{!0===t[0].check&&!1===t[1].check?(e(i),n.save(!0)):(n.save(!1),e())}))}))}var F=i(19006),V=i(14554),B=i(33676);const $=()=>{(new Image).src="https://top-fwz1.mail.ru/counter?id=3136989"};var q=i(86624),Z=i(82590),H=i(28299),U=i(20006),G=i(58732),Q=i(91966),J=i(20132),X=i(50938),Y=i(29823),K=i.n(Y),ee=i(2575),te=i(14890),ie=i(24975),ne=i(96579),re=i(32023),oe=i(89443),se=i(9652);const le=e=>{let{state:t}=e;return t.isTrashDomain},ae=e=>{let{state:t}=e;return t.recs},ce=e=>{let{state:t}=e;return t.widgetConfigs},de=e=>{let{state:t}=e;return t.customData},ue=e=>{let{state:t,id:i}=e;return t.widgetInstances[i]},he=e=>{var t;let{state:i,id:n}=e;return(null===(t=ue({state:i,id:n}))||void 0===t?void 0:t.slots)||[]},pe=e=>{var t;let{state:i,id:n}=e;return(null===(t=ue({state:i,id:n}))||void 0===t?void 0:t.lastSlotRemovedBy)||"widget"},me=e=>{var t;let{state:i,id:n}=e;return(null===(t=ue({state:i,id:n}))||void 0===t?void 0:t.additionalParams)||{}},ge=e=>{var t;let{state:i,id:n}=e;return(null===(t=ue({state:i,id:n}))||void 0===t?void 0:t.customWidgetData)||{}},fe=e=>{let{instanceId:t,slotId:i}=e;const{fillRate:n={}}=(0,l.Z)().getState(),{vastPromiseResolves:r={}}=n[t]||{};return r[i]||(()=>{})},ye=["sliderFullscreenWidePlates","fullscreenNativePlates"];function ve(e){let{WidgetComponent:t,id:i,local:n,global:r,onLoad:o,onReady:s}=e;const c=(0,b.P1)([ue],(e=>e&&e.cfgId||"")),d=(0,b.P1)([ce,ue],((e,t)=>{var i;return null!=t&&t.cfg?null==t?void 0:t.cfg:(null===(i=e[null==t?void 0:t.cfgId])||void 0===i?void 0:i.payload)||{}})),u=(0,b.P1)([ue],(e=>!!e&&e.initialFetchStatus)),h=(0,b.P1)([ue],(e=>!!e&&e.ready)),p=(0,b.P1)([ue],(e=>!!e&&e.visible)),g=(0,b.P1)([ue],(e=>!!e&&e.loadMoreInProgress)),f=e=>{let{dispatch:t,getState:i,recId:n,instanceId:r,cfgId:o,reason:s="complete"}=e;const l=i(),a=ae({state:l}),c=he({state:l,id:r}),d=(0,M.Bv)(c,a);if((0,M.tj)({recId:n,instance:ue({state:l,id:r})})){const e=(0,M.En)({recId:n,instance:ue({state:l,id:r})})||{};e.slotId&&t((0,ne.CR)({id:r,recId:n,slotId:e.slotId})),e.recId===n&&t((0,ne.r9)({id:n,instanceId:r,cfgId:o,removeAnyway:1===d.length,reason:s})),t((0,ne.ft)())}else t((0,ne.r9)({id:n,instanceId:r,cfgId:o,removeAnyway:1===d.length,reason:s}))},y=(0,te.qC)((e=>ie.Pf(e,{})),(0,m.$j)((e=>({id:i,local:n,global:r,platform:e.platform,additionalParams:me({state:e,id:i}),customData:de({state:e}),cfgId:c({state:e,id:i}),cfg:d({state:e,id:i}),customWidgetData:ge({state:e,id:i}),recs:ae({state:e}),initialFetchStatus:u({state:e,id:i}),ready:h({state:e,id:i}),visible:p({state:e,id:i}),loadMoreInProgress:g({state:e,id:i}),isFlyrolled:i===e.currentFlyroll,slots:he({state:e,id:i}),lastSlotRemovedBy:pe({state:e,id:i}),isTrashDomain:le({state:e}),loadCustomRec:window.loadCustomRec,loadVideoComponent:window.loadVideoComponent,loadFormComponent:window.loadFormComponent})),(e=>({onRecLoad:t=>{const{instanceId:i,recId:n}=t,{widgetInstances:r}=(0,l.Z)().getState();if((0,M.RX)({recId:n,instance:r[i]})){const{slotId:t}=(0,M.En)({recId:n,instance:r[i]})||{};t&&(e((0,ne.v0)({id:i,recId:n,slotId:t})),e((0,ne.BQ)({id:i,slotId:t})),e((0,ne.ft)()))}e((0,H.It)(t))},onFormLoad:t=>{e((0,H.T7)(t))},onRecShow:t=>{e((0,H.dN)(t)),e((0,H.n3)(t))},onFormShow:t=>{e((0,H.KM)(t))},onFormSessionActive:t=>{e((0,H.gY)(t))},onFormSessionInactive:t=>{e((0,H.VQ)(t))},onFormAnswer:t=>{e((0,H.JG)(t)),(0,a.Z)().triggerCallback({callbackName:"onFormAnswer",args:[t],cfgId:t.cfgId,instanceId:t.instanceId})},onFormComplete:t=>{e((0,H.Sx)(t)),(0,a.Z)().triggerCallback({callbackName:"onFormComplete",args:[t],cfgId:t.cfgId,instanceId:t.instanceId})},onFormGreetingComplete:e=>{(0,a.Z)().triggerCallback({callbackName:"onFormGreetingComplete",args:[e],cfgId:e.cfgId,instanceId:e.instanceId})},onFormQuestionComplete:e=>{(0,a.Z)().triggerCallback({callbackName:"onFormQuestionComplete",args:[e],cfgId:e.cfgId,instanceId:e.instanceId})},onFormRestart:e=>{(0,a.Z)().triggerCallback({callbackName:"onFormRestart",args:[e],cfgId:e.cfgId,instanceId:e.instanceId})},onFormResultShow:e=>{(0,a.Z)().triggerCallback({callbackName:"onFormResultShow",args:[e],cfgId:e.cfgId,instanceId:e.instanceId})},onFormSwapRequest:e=>{(0,a.Z)().triggerCallback({callbackName:"onFormSwapRequest",args:[e],cfgId:e.cfgId,instanceId:e.instanceId})},onNewTabOpen:t=>{const{recId:i,cfgId:n,instanceId:r,manually:o,preset:s}=t,c=(0,l.Z)().getState(),d=ae({state:c}),u=he({state:c,id:r}),h=(0,M.Bv)(u,d);(0,a.Z)().triggerCallback({callbackName:"onFollow",args:[{...t,linkHref:d[i].href,done:()=>{}}],instanceId:r,cfgId:n}),e((0,H.$y)(t)).catch((e=>{console.error(new ee.Z("addRecClickStatEventToQueue - rejected",e))})).finally((()=>{if(o&&e((0,ne.cJ)({id:i,inNewTab:o,cfgId:n,instanceId:r})),"ad"===t.recType&&"banner"===t.clickOrigin){if(ye.includes(s))return void setTimeout((()=>{e((0,Q.RI)({id:t.instanceId}))}),0);e((0,ne.r9)({id:i,instanceId:r,cfgId:n,removeAnyway:1===h.length}))}}))},onSameTabOpen:t=>{const i=(0,a.Z)(),n=1e3,r=[t.recPromise],o=(0,l.Z)().getState(),s=ae({state:o});i.hasInstanceCallback({callbackName:"onFollow",instanceId:t.instanceId})&&r.push(new Promise((e=>{i.triggerInstanceCallback({callbackName:"onFollow",args:[{...t,linkHref:s[t.recId].href,done:e}],instanceId:t.instanceId}),setTimeout(e,n)}))),i.hasCfgCallback({callbackName:"onFollow",cfgId:t.cfgId})&&r.push(new Promise((e=>{i.triggerCfgCallback({callbackName:"onFollow",args:[{...t,linkHref:s[t.recId].href,done:e}],cfgId:t.cfgId}),setTimeout(e,n)}))),i.hasGlobalCallback("onFollow")&&r.push(new Promise((e=>{i.triggerGlobalCallback({callbackName:"onFollow",args:[{...t,linkHref:s[t.recId].href,done:e}]}),setTimeout(e,n)}))),r.push(e((0,H.$y)(t))),Promise.all(r.map((e=>e.catch((e=>e))))).then((()=>{e((0,ne.cJ)({id:t.recId,cfgId:t.cfgId,instanceId:t.instanceId}))})).catch((i=>{console.error(new ee.Z("On Same Tab Open - rejected",i)),e((0,ne.cJ)({id:t.recId,cfgId:t.cfgId,instanceId:t.instanceId}))}))},onRecVideoVastResponse:t=>{e((0,H.GA)(t))},onRecVideoCanPlay:e=>{const{instanceId:t,slotId:i}=e;(fe({instanceId:t,slotId:i})||(()=>{}))({slotId:i,status:se.vj.filled})},onRecVideoStart:()=>{},onRecError:t=>{if("video"===t.errorGroup){const{instanceId:i,slotId:n}=t;fe({instanceId:i,slotId:n})({slotId:n,status:se.vj.vast}),"video_timeout"===t.errorType&&e((0,re.I)(3)),"IMA_ad_error"===t.errorType&&e((0,re.I)(1)),e((0,H.R0)(t))}f({dispatch:e,getState:(0,l.Z)().getState,recId:t.recId,instanceId:t.instanceId,cfgId:t.cfgId,reason:"error"})},onRecComplete:t=>{f({dispatch:e,getState:(0,l.Z)().getState,recId:t.recId,instanceId:t.instanceId,cfgId:t.cfgId})},onRecClose:t=>{e((0,ne.$D)({...t,removedBy:"user"})),e((0,ne.ft)())},onRecCustomEvent:t=>{e((0,H.GC)(t))},onNoRecsLeft:t=>{(0,a.Z)().triggerCallback({callbackName:"onNoContent",args:[t],cfgId:t.cfgId,instanceId:t.instanceId}),e((0,se.MG)(t.instanceId,!0)),setTimeout((()=>{e((0,Q.RI)({id:t.instanceId}))}),0)},onWidgetCloseByUser:t=>{(0,a.Z)().triggerCallback({callbackName:"onClose",args:[t],cfgId:t.cfgId,instanceId:t.instanceId}),setTimeout((()=>{e((0,Q.RI)({id:t.instanceId}))}),0)},onLoadMoreButtonClick:t=>{e((0,ne.oA)(t))},onInfiniteScrollIntersect:t=>{e((0,ne.oA)(t))},onFlyrollChange:t=>{const{currentFlyroll:i}=(0,l.Z)().getState();!i&&t.isFlyrolled&&e((0,oe.mK)(t.instanceId)),i!==t.instanceId||t.isFlyrolled||e((0,oe.pi)())},onWidgetLoad:t=>{o(t),(0,a.Z)().triggerCallback({callbackName:"onLoad",args:[t],cfgId:t.cfgId,instanceId:t.instanceId}),e((0,H.bd)(t))},onWidgetReady:t=>{s(t),(0,a.Z)().triggerCallback({callbackName:"onReady",args:[t],cfgId:t.cfgId,instanceId:t.instanceId}),e((0,H.Fz)(t))},onWidgetShouldBeVisible:t=>{e((0,Q.jd)(t))},onWidgetShouldBeHidden:t=>{e((0,Q.n5)(t))},onWidgetShow:e=>{(0,a.Z)().triggerCallback({callbackName:"onShow",args:[e],cfgId:e.cfgId,instanceId:e.instanceId})}}))));return y(t)}function be(e,t){const i=Object.keys(t);for(let n=0;n<i.length;n++)if(t[i[n]].cfgId===e)return!0;return!1}let we;function Ie(){if(we)return we;let e;return we=()=>{const t=(0,l.Z)(),{widgetInstances:i,widgetConfigs:n}=t.getState();Object.values(i).filter((e=>!e.el)).forEach((e=>{var i;const{anchorEl:r,position:o}=e.positioning,s=n[e.cfgId],l=(0,M.xh)(null==s?void 0:s.payload),{el:a,shadowRootEl:c}=(0,w.Z)({anchorEl:r,position:o,frameType:"relapWidget",instanceId:e.id,cfgId:e.cfgId,wrapped:!0,globalObj:{id:e.id},isFlyRollable:l,additionalWidgetClassNames:null==s||null===(i=s.payload)||void 0===i?void 0:i.additionalWidgetClassNames});return c.contentWindow.el=a,c.contentWindow.shadowRootEl=c,t.dispatch((0,Q.p3)({el:a,local:c.contentWindow,id:e.id})),s?((0,j.g)({id:`load ${s.payload.theme} theme`,groupId:`widget ${e.cfgId}`}),window.loadTheme(s.payload.theme).then((i=>{const r=n[e.cfgId];return r?c.contentWindow?((0,j.Ix)({id:`load ${r.payload.theme} theme`,groupId:`widget ${e.cfgId}`}),(0,j.pV)({id:"mount",instanceId:e.id,cfgId:e.cfgId}),function(e){let{WidgetComponent:t,id:i,local:n,global:r,store:o,onLoad:s,onReady:l}=e;const a=(0,I.L)(n,r);if(!a)return;const c=ve({WidgetComponent:t,id:i,local:n,global:r,onLoad:s,onReady:l});a.render(h().createElement(m.zt,{store:o},h().createElement(c,null)))}({id:e.id,WidgetComponent:i,local:c.contentWindow,global:window.global,store:t,onLoad:e.onLoad,onReady:e.onReady}),Promise.resolve(null)):Promise.reject(new ee.Z("No shadow root element found")):Promise.reject(new ee.Z("No widget cfg found"))})).catch((t=>{console.warn(`adding widget failed for widget id: ${e.id}`),console.log(t)}))):Promise.reject(Error("No widgetCfg"))})),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Object.keys(e),n=Object.keys(t);i.length<=n.length||K()(i,n).forEach((i=>{if(!e[i]||!e[i].el.parentNode)return;const{el:n,local:r}=e[i];(0,a.Z)().removeAllInstanceCallbacks(i),be(e[i].cfgId,t)||(0,a.Z)().removeAllCfgCallbacks(e[i].cfgId),(0,I.k)({local:r}),n.parentNode.removeChild(n),e[i].onRemove()}))}(e,i),e=t.getState().widgetInstances},we}var Ce=i(53205);let Re,Se=null,Ee=null;function xe(){clearInterval(Ee),Ee=null,Se=null}function We(e,t){if(null===Se)return;Date.now()-Se<3e4||(!function(e,t){const{widgetConfigs:i,widgetInstances:n,recsStat:r,recs:o}=e(),s=Object.values(n).reduce(((e,t)=>{var n;let{id:s,cfg:l,cfgId:a,slots:c=[]}=t;const d=l||(null===(n=i[a])||void 0===n?void 0:n.payload);if(!d)return e;const{recsSwapOnTabInactivityTimeout:{enabled:u=!0}={}}=d;if(!u)return e;const h=c.filter((e=>{var t,i;let{recId:n}=e;return!0===(null===(t=r[n])||void 0===t?void 0:t.showed)&&"ad"===(null===(i=o[n])||void 0===i?void 0:i.type)})).map((e=>({instanceId:s,slot:e})));return e.concat(h)}),[]);s.length&&(s.forEach((e=>{let{instanceId:i,slot:{slotId:n}}=e;t((0,se.ZX)({instanceId:i,status:se.O_.swap})),t((0,ne.S5)({id:i,slotId:n}))})),(0,Ce.Z)(t,e))}(e,t),xe())}function Te(e){let{getState:t,dispatch:i}=e;return function(){switch(window.global.document.visibilityState){case"visible":!function(e,t){null!==Ee&&null!==Se&&(We(e,t),xe())}(t,i);break;case"hidden":!function(e,t){Ee&&xe(),Se=Date.now(),Ee=setInterval((()=>{We(e,t)}),3e3)}(t,i)}}}function Pe(e){Re||(Re=Te(e)),window.global.document.addEventListener("visibilitychange",Re),Re()}var _e=i(44527);const ke=()=>{try{const e=document.createElement("script");e.defer=!0,e.src="https://ad.mail.ru/static/research_c.js",window.global.document.body.append(e)}catch(e){console.warn("MT script set failed: ",e)}};var Le=i(71818);let Oe,je,Ae,Me;let De,Ne,ze;const Fe=r()((function(){let{onReady:e=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};De.then((()=>{Oe.dispatch((0,Q.Lk)({withWindowMinMaxWidth:!0,onReady:e}))}))}),300),Ve=()=>{Fe()},Be=e=>{let{token:t,url:i}=e;window.global.onRelapLocalDevAPIReady=e=>{e.init({token:t,url:i}).then((()=>e.addWidgets()))},window.global.relapLocalDevMode=!0;const n=document.createElement("script");n.src="http://localhost:3010/dist/relap.js",window.global.document.body.appendChild(n)},$e=e=>{localStorage.relapSessionId=s()(`${e}_${Math.random()}_${new Date}`,Math.random()),localStorage.relapSessionIdStart=new Date},qe=()=>{if(!localStorage.relapSessionId)return!0;const e=new Date-new Date(localStorage.relapSessionIdStart),t=/^[a-fA-F0-9]{32}$/.test(localStorage.relapSessionId);return Number.isNaN(e)||e<0||!t||e>=18e5},Ze=(e,t,i)=>{const n=r()((()=>{const{widgetInstances:e}=t.getState();Object.values(e).forEach((e=>{let{el:t,id:n}=e;t&&t.isConnected||i.removeWidget({instanceId:n})}))}),300),o=new MutationObserver(n);return o.observe(e,{subtree:!0,childList:!0}),()=>{n.cancel(),o.disconnect()}},He={init:function(e){let{fetchInitDataPromise:t,isV6Compat:i,resolvePreInit:n=(()=>{})}=e,{token:r,url:o,subPublisher:s,widgetCfgId:a,events:u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.initialized)return console.log("relapAPI is already initialized"),De;ke();const h=o||window.global.location.href;if(!r)return Promise.reject(new ee.Z("Public API Error: No token provided"));qe()&&$e(h),window.initialized=!0;const p=new FormData;p.append("session_id",localStorage.relapSessionId),p.append("type","page_closed"),p.append("url",h),p.append("referer",window.global.location.href),p.append("domain_name",window.global.location.host),(0,Le.N)().then((e=>{p.set("front_uuid",e)}));const m=[window.global.document.visibilityState],g={current:0,updateAt:"visible"===window.global.document.visibilityState?Date.now():0},f=()=>Math.max(g.updateAt>0?g.current+Date.now()-g.updateAt:g.current,0);return ze=e=>{const t=Date.now();m.push(e.target.visibilityState),"visible"===e.target.visibilityState?g.updateAt=t:g.updateAt>0&&(g.current+=t-g.updateAt,g.updateAt=0)},Ne=()=>{const e=Math.round(f()/1e3);e<=0||(p.set("time_spent",e),p.has("url")&&navigator.sendBeacon(`${(0,d.r9)()}page_close`,p))},window.global.document.addEventListener("visibilitychange",ze),window.global.addEventListener("beforeunload",Ne),De=new Promise(((e,o)=>{const d=z(),p={token:r,url:h,widgetCfgId:a};a||delete p.widgetCfgId,(t||c.Z.Widgets.init(p)).then((async t=>{var o;let{widgetCfgs:a,pageMeta:c,extCfgs:p,rights:m=[],sessionSecret:g,checkCorrectRelapScriptInstallation:f=0,isTrash:y=!1,device:v="other"}=t;const b=(0,q.U5)(v);if(Oe=(0,l.Z)({initialState:{isV6Compat:i,url:h,token:r,subPublisher:s,sessionSecret:g,isTrashDomain:y,platform:b},withReduxDevtools:m.includes("admin")}),je||(je=Oe.subscribe(Ie())),Pe(Oe),(0,M.GB)(window.global.location)&&!window.global.relapLocalDevMode)return He.destroy(),void Be({token:r,url:h});(0,j.c6)(Oe),m.includes("admin")&&P(Oe,window.global),Oe.dispatch((0,H.Pi)()),f&&Oe.dispatch((0,H.FU)((0,M.rw)())),Oe.dispatch((0,Z.Ub)(d)),Oe.dispatch((0,X.g)(m));const{constant:w,reinitable:I}=(0,F.XP)(p);Oe.dispatch((0,Z.Qm)(w)),Oe.dispatch((0,Z.yW)(I)),(0,j.g)({id:"calc ext params",groupId:"init"});const C=(0,F.tI)({cfgs:w,global:window.global});Oe.dispatch((0,Z.L1)(C));const R=(0,F.tI)({cfgs:I,global:window.global});Oe.dispatch((0,Z.$Z)(R)),Promise.all([d,C,R]).then((()=>{(0,j.Ix)({id:"calc ext params",groupId:"init"})})),_({func:()=>{Oe.dispatch((0,H.Vh)({pageMeta:O(c)}))},global:window.global}),(0,M.PE)(a).forEach((e=>{(0,q.rh)(e.payload.preset)&&(0,q.M0)(e.payload,b),Oe.dispatch((0,Q.Zs)(e));const{id:t,payload:{positioning:{maxInstances:i,maxVisibleInstances:n}}}=e;i&&Oe.dispatch((0,J.rH)({cfgId:t,count:i})),n&&Oe.dispatch((0,J.jL)({cfgId:t,count:n}))})),$(),Me=He,Me.isReady=!0,Ae||(Ae=Ze(window.global.document.body,Oe,Me)),u&&Me.addGlobalEventListeners(u),i&&"function"!=typeof(null===(o=window.global.relap)||void 0===o?void 0:o.loadMore)&&(window.global.relap={loadMore:Me.addWidgets,ar(){}}),(0,V.Z)({scope:window.global,funcName:"onRelapAPIInit",args:[Me]}),window.global.addEventListener("resize",Ve),e(Me),n(Me)})).catch((e=>{o(new ee.Z("Public Api Error: Init data fetch failed",e)),He.destroy()}))})),De},destroy:()=>He.removeWidgets().then((()=>(T&&T.unmount(),xe(),window.global.document.removeEventListener("visibilitychange",Re),je&&(je(),je=null),Ae&&(Ae(),Ae=null),delete window.global.relapAPI,(0,a.Z)().removeAllCallbacks(),window.global.removeEventListener("resize",Ve),window.global.removeEventListener("beforeunload",Ne),window.global.document.removeEventListener("visibilitychange",ze),Fe.cancel(),window.global.document.querySelectorAll("script[data-relap-token]").forEach((e=>e.remove())),window.global.document.querySelectorAll(".relap-runtime-iframe").forEach((e=>e.remove())),Promise.resolve()))),setURL:e=>{const{url:t}=Oe.getState();return e===t?(console.log(`Setting the same url as current: ${e}`),Promise.resolve(Me)):(Oe.dispatch((0,U.j)(e)),Oe.dispatch((0,H.Pi)()),Promise.resolve(Me))},setCustomData:r()((function(){let{data:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"object"==typeof e?Oe.dispatch((0,G.W)(e)):console.error(new ee.Z("Public Api Error: relapAPI.setCustomData Type Error",new TypeError("data is not an object"))),Promise.resolve(Me)}),500),addGlobalEventListeners:e=>{(0,a.Z)().registerGlobalCallbacks(e)},addWidgets:function(){let e,{events:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,j.g)({id:"addWidgets",groupId:"init"}),t&&Me.addGlobalEventListeners(t);const i=new Promise((t=>{e=t}));i.then((()=>{(0,j.Ix)({id:"addWidgets",groupId:"init"})}));let n=15;const o=r()(((t,i)=>{Fe({onReady:e}),n--,n||i.disconnect()}),300),s=new MutationObserver(o),l=()=>{Fe({onReady:e}),s.disconnect(),window.global.removeEventListener("DOMContentLoaded",l,!1),window.global.removeEventListener("load",l,!1)};switch(window.global.document.readyState){case"interactive":case"complete":l();break;default:window.global.addEventListener("load",l,!1),window.global.addEventListener("DOMContentLoaded",l,!1),s.observe(window.global.document.body,{childList:!0,subtree:!0})}return i},addWidget:function(){let{cfgId:e,anchorEl:t,position:i,events:n,customWidgetData:r,isForm:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{widgetConfigs:s}=Oe.getState()||{};let l,c;const d=new Promise(((e,t)=>{l=e,c=t}));if(!e)return c(new ee.Z("Public Api Error: Can't add widget, cfgId value is empty")),d;const u=s[e];if(!u)return c(new ee.Z(`Public Api Error: Can't add widget, cfg with id ${e} does not exist`)),d;if(!(0,M.LA)(u))return c(`${e} mount interval is not over`),d;if(!(0,_e.q)(u))return c(`${e} screen is too narrow for fullscreen`),d;if(t){const{payload:{preset:s,embeddedBy:c}}=u;let h;const p="imgOverlay"===s,m=null!=o?o:"form"===c;if(p){const e=t.parentElement.querySelector("img");h={imgOverlaySrc:(0,B.V)(e)}}return Oe.dispatch((0,Q.kW)({cfgId:e,anchorEl:t,customWidgetData:r,position:p?"img_overlay":i,additionalParams:h,isForm:m,onLoad:e=>{n&&(0,a.Z)().registerInstanceCallbacks({cbObj:n,instanceId:e.instanceId})},onReady:e=>{l(e)}})),d}return Oe.dispatch((0,Q.Lk)({cfgId:e,onLoad:()=>{n&&(0,a.Z)().registerCfgCallbacks({cbObj:n,cfgId:e})},onReady:e=>{l(e)}})),d},removeWidgets:()=>{const{widgetInstances:e}=Oe.getState();let t;const i=new Promise((e=>{t=e})),n=[];return Object.values(e).forEach((e=>{let t,{id:i}=e;n.push(new Promise((e=>{t=e}))),Oe.dispatch((0,Q.RI)({id:i,onRemove:t}))})),Promise.all(n).then(t),i},removeWidget:function(){let e,{cfgId:t,instanceId:i,el:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=new Promise((t=>{e=t})),o=e=>(Oe.dispatch((0,Q.kg)({cfgId:e.cfgId,onRemove:e.onRemove})),e.promise),s=e=>(Oe.dispatch((0,Q.RI)({id:e.instanceId,onRemove:e.onRemove})),e.promise);if(t)return o({cfgId:t,onRemove:e,promise:r});if(i)return s({instanceId:i,onRemove:e,promise:r});if(n instanceof HTMLElement){let t;if(n.classList.contains("js-relap-widget-wrapper")){const e=n.querySelector(".js-relap-widget");e&&(t=e.getAttribute("data-relap-widget-instance-id"))}if(n.classList.contains("js-relap-widget")&&(t=n.getAttribute("data-relap-widget-instance-id")),t)return s({instanceId:t,onRemove:e,promise:r})}return Promise.reject(new ee.Z("Public Api Error: Can't remove widget instance"))}},Ue=He},88661:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});const n=(e,t)=>{const i=(e=>{const t=e.split("/");if("."===t[0])return null;let i=1;"_demo"===t[1]&&(i=2);const n=t[i],r=t[i+1];return"external"!==n&&"internal"!==n?null:{customType:n,customName:r,path:e}})(t);return null===i||e.push(i),e},r=e=>e.keys().reduce(n,[]).reduce(((t,i)=>{let{customName:n,customType:r,path:o}=i;return"internal"!==r||(t[n]={name:n,type:r,loader:()=>e(o)}),t}),{}),o=i(16779),s=i(98983),l=r(o),a=r(s),c=i(88825).keys().reduce(n,[]).reduce(((e,t)=>{let{customName:i,customType:n}=t;return"external"!==n||(e[i]={name:i,type:n}),e}),{}),d={...l,...a,...c};var u=i(2575);const h=()=>Promise.all([i.e(42945),i.e(54736),i.e(32747),i.e(99111)]).then(i.bind(i,30104)),p=Symbol.for("types"),m={};function g(e){if(m[e])return m[e];let t;const{type:i,loader:n}=d[e]||{};switch(i){case"internal":t=n;break;case"external":t=h}return function(e){let{loader:t,recName:i}=e;const n=new Promise(((e,i)=>{t?t().then((t=>{let{default:i,types:n}=t;i[p]=n,e(i)})):i(new u.Z("No loader found"))}));return m[i]=n,n}({loader:t,recName:e})}},13002:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(75933),r=i.n(n);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return null;const t={100:"100","100italic":"100i",200:"200","200italic":"200i",300:"300","300italic":"300i",400:"400","400italic":"400i",regular:"400",italic:"400i",500:"500","500italic":"500i",600:"600","600italic":"600i",700:"700","700italic":"700i",800:"800","800italic":"800i",900:"900","900italic":"900i"},i=e=>e.map((e=>t[e])).join(","),n=e=>e.join(",");return{families:e.map((e=>`${e.family}:${i(e.variants)}${e.subsets&&e.subsets.length?`:${n(e.subsets)}`:""}`))}}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return null;const t={100:"1",200:"2",300:"3",400:"4",normal:"4",500:"5",600:"6",700:"7",bold:"7",800:"8",900:"9"};return{families:e.map((e=>{let{family:i,style:n="normal",weight:r="normal"}=e;return`${i}:${n[0]}${t[r]}`}))}}function l(e){return e.map((e=>{const t=`font-family:'${e.family}';`,i=e.weight?`font-weight:${e.weight};`:"",n=e.style?`font-style:${e.style};`:"",r=[];e.woff2&&r.push(`url('${e.woff2}') format('woff2')`),e.woff&&r.push(`url('${e.woff}') format('woff')`),e.ttf&&r.push(`url('${e.ttf}') format('truetype')`);return`@font-face{${t}${i}${n}${`src:${r.join(",")};`}}`})).join("")}function a(e){let{externalFonts:{google:t,custom:i,timeout:n=0}={},context:a}=e;return t||i?new Promise((e=>{const c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return()=>{};const i=document.createElement("style");return i.textContent=l(e),t.document.head.appendChild(i),()=>{i.remove()}}(i,a);setTimeout((()=>{e(c)}),n);const d={google:o(t),custom:s(i),classes:!1,context:a,timeout:n,active:()=>{e(c)},inactive:()=>{e(c)}};d.google||delete d.google,d.custom||delete d.custom,r().load(d)})):Promise.resolve()}},28499:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});const n=i(15162),r=n.keys().reduce(((e,t)=>{const i=t.split("/"),r=i[1];return e[r]||3!==i.length||"_common"===r||(e[r]=()=>n(t)),e}),{}),o={};function s(e){let{themeLoader:t,themeName:i}=e;const n=new Promise((e=>{t().then((t=>{let{default:i}=t;e(i)}))}));return o[i]=n,n}function l(e){if(o[e])return o[e];const t=r[e];return t?s({themeLoader:t,themeName:e}):o.default?o.default:s({themeLoader:r.default,themeName:"default"})}},13844:(e,t,i)=>{"use strict";function n(){console.log(...arguments)}i.d(t,{Z:()=>n})},3798:(e,t,i)=>{"use strict";if(i.d(t,{Yl:()=>u,ef:()=>c,fu:()=>d}),24866!=i.j)var n=i(82897);if(24866!=i.j)var r=i(90176);var o=i(99560),s=i.n(o),l=i(39381);const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"relap",t=+`${Math.random()}`.slice(-3);return()=>i=>`relap-${s()(i.key+e,l.PF)}${t++}`};function c(){let{insertionPoint:e,id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=(0,n.Ue)((0,r.Z)());return i.setup({createGenerateClassName:a(t),insertionPoint:e}),i}function d(e){let{jss:t,stylesSrc:i,styleSheetsDict:n,widgetId:r,sheetsManager:o,createStyleSheetOptions:s}=e;const l=function(e){let{jss:t,stylesSrc:i,styleSheetsDict:n,widgetId:r,sheetsManager:o,createStyleSheetOptions:s}=e;return n[r]||(n[r]={sheet:t.createStyleSheet(i,s)},o.add(n[r],n[r].sheet)),n[r]}({jss:t,stylesSrc:i,styleSheetsDict:n,widgetId:r,sheetsManager:o,createStyleSheetOptions:s});o.manage(l)}function u(e){let{widgetId:t,styleSheetsDict:i,sheetsManager:n}=e;n.unmanage(i[t])}},63079:(e,t,i)=>{"use strict";i.d(t,{Y:()=>c,t:()=>l});var n=i(50361),r=i.n(n),o=i(30236),s=i.n(o);function l(e){let{schema:t,cols:i,rows:n}=e;const o=i*n;if(t.length===o)return t;if(t.length>o)return t.slice(0,o);if(t.length<o){const e=[];for(let i=0;i<o;i++)e.push(r()(t[i%t.length]));return e}}const a=24866!=i.j?["schema","fallbackPayloads","allowedPlatforms"]:null;function c(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=s()({},...t,((e,t,i)=>{if(a.includes(i))return t}));return n&&n.grid&&n.grid.simple&&n.grid.simple.schema?{...n,grid:{...n.grid,simple:{...n.grid.simple,schema:l(n.grid.simple)}}}:n}},57239:(e,t,i)=>{"use strict";i.d(t,{Gn:()=>g,Ix:()=>c,N_:()=>p,c6:()=>f,g:()=>a,lN:()=>m,pV:()=>h});window.perfTiming=window.perfTiming||{},window.perfTiming.shared=window.perfTiming.shared||{eventDict:{},eventQueue:[],store:null,addPerfDataItem:null};const n=()=>window.perfTiming.shared,r=e=>{window.perfTiming.shared={...window.perfTiming.shared,...e}};function o(){const{store:e,eventQueue:t,addPerfDataItem:i}=n();e&&(t.forEach((t=>{e.dispatch(i(t))})),r({eventQueue:[]}))}function s(e){var t;let{phase:i,processId:r,groupId:s,value:l}=e;const{eventDict:a}=n(),c=function(e){let{processId:t,groupId:i}=e;return`${t}@${i}`}({processId:r,groupId:s});switch(function(e){let{processId:t,groupId:i,eventId:r}=e;const{eventDict:o}=n();o[r]||(o[r]={processId:t,groupId:i})}({processId:r,groupId:s,eventId:c}),i){case"start":case"end":if(a[c][i])return;a[c][i]=l-((null===(t=window.perfTiming)||void 0===t?void 0:t.assetLoaderStart)||0);break;default:const e=l-window.perfTiming.assetLoaderStart;a[c].start=e,a[c].end=e}!function(e){let{eventId:t}=e;const{eventDict:i,eventQueue:r}=n();i[t].start&&i[t].end&&(r.push(i[t]),o())}({eventId:c})}function l(e){let{phase:t,processId:i,groupId:n}=e;s({phase:t,processId:i,groupId:n,value:Date.now()})}function a(e){let{id:t,groupId:i}=e;l({phase:"start",processId:t,groupId:i})}function c(e){let{id:t,groupId:i}=e;l({phase:"end",processId:t,groupId:i})}function d(e){let{phase:t,processId:i,instanceId:n,cfgId:r,value:o}=e;s({phase:t,processId:i,groupId:n,value:o}),s({phase:t,processId:i,groupId:`widget ${r}`,value:o})}function u(e){let{phase:t,processId:i,instanceId:n,cfgId:r}=e;d({phase:t,processId:i,instanceId:n,cfgId:r,value:Date.now()})}function h(e){let{id:t,instanceId:i,cfgId:n}=e;u({phase:"start",processId:t,instanceId:i,cfgId:n})}function p(e){let{id:t,instanceId:i,cfgId:n}=e;u({phase:"end",processId:t,instanceId:i,cfgId:n})}function m(e){let{id:t,groupId:i,value:n}=e;s({phase:"start",processId:t,groupId:i,value:n})}function g(e){let{id:t,groupId:i,value:n}=e;s({phase:"point",processId:t,groupId:i,value:n})}async function f(e){const t=await i.e(42945).then(i.bind(i,37232));r({addPerfDataItem:t.addPerfDataItem,store:e}),o()}},44277:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s,g:()=>o});var n=i(44892),r=i(48878);function o(e){const{widgetConfigs:t}=(0,n.Z)().getState();if(!t[e].payload.v6Compat)return e;const{v6Compat:{widgetCfgId:i}}=t[e].payload;return i}function s(e,t){const{isV6Compat:i,widgetConfigs:o}=(0,n.Z)().getState();i&&Object.keys(o).filter((e=>o[e].payload.theme===t)).forEach((t=>{(0,r.Z)().registerCfgCallbacks({cbObj:e,cfgId:t})}))}},44596:(e,t,i)=>{"use strict";i.d(t,{d:()=>o,f:()=>s});var n=i(96358);const r="rcid",o="x-relap-cookie",s={get:async()=>n.w.get({key:r}),set:async e=>{const t=e.headers.get(o);if(t)try{await n.w.set({key:r,value:t})}catch(e){console.log("error with setup rcid",e)}}}},11697:(e,t,i)=>{"use strict";i.d(t,{S:()=>o});var n=i(69906);if(24866!=i.j)var r=i(68299);const o=e=>{let{type:t,customRecName:i}=e;const o=(0,r.d)();(0,n.o)({path:`${o}.events.fullscreen.${i}.${t}`})}},3808:(e,t,i)=>{"use strict";i.d(t,{k:()=>r,n:()=>n});const n=30,r=24},83300:(e,t,i)=>{"use strict";i.d(t,{d:()=>n});const n={"&:after":{content:'"."',display:"block",height:0,clear:"both",visibility:"hidden"}}},72584:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={"@global":{"#root":{all:"initial",display:"block",position:"relative","line-height":1,overflow:"hidden",width:"100%"},"body, dy, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video, button":{margin:0,padding:0,border:0,"font-size":"100%",font:"inherit","vertical-align":"baseline"},"article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section":{display:"block"},body:{"line-height":1,overflow:"hidden"},"ol, ul":{"list-style":"none"},"blockquote, q":{quotes:"none"},"blockquote:before, blockquote:after, q:before, q:after":{content:"none",fallbacks:{content:""}},table:{"border-collapse":"collapse","border-spacing":0},"a, button":{color:"inherit"},a:{"text-decoration":"none"},":focus":{outline:0},"*, :before, :after":{"box-sizing":"border-box"}}}},71818:(e,t,i)=>{"use strict";if(i.d(t,{N:()=>s}),24866!=i.j)var n=i(72045);var r=i(96358);const o=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(e),s=()=>{const e=(0,n.Z)();return r.w.get({key:"ruuid",validate:o,fallbackValue:"ffffffff-ffff-ffff-ffff-ffffffffffff",valueIfNotExist:e})}},39381:(e,t,i)=>{"use strict";i.d(t,{$V:()=>m,Ai:()=>g,Br:()=>k,Bv:()=>V,En:()=>q,Fj:()=>Q,GB:()=>y,HU:()=>P,Hn:()=>O,Jb:()=>S,LA:()=>Y,PE:()=>p,PF:()=>w,RB:()=>b,RX:()=>z,UF:()=>N,Vk:()=>B,_e:()=>W,a$:()=>Z,bB:()=>H,bV:()=>f,dB:()=>I,db:()=>R,f6:()=>K,gZ:()=>v,i6:()=>h,j1:()=>E,jk:()=>X,n$:()=>L,pD:()=>x,qS:()=>T,rG:()=>U,rw:()=>J,sw:()=>A,tj:()=>M,x3:()=>_,xh:()=>C});var n=i(13311),r=i.n(n),o=i(84753),s=i.n(o);if(24866!=i.j)var l=i(22222);var a=i(99560),c=i.n(a);if(24866!=i.j)var d=i(3808);var u=i(63079);const h=49,p=e=>{const t=e.filter((e=>Boolean(e.abTest))),i=e.filter((e=>{var i;return e.id!==(null===(i=e.abTest)||void 0===i?void 0:i.widgetId)&&t.some((t=>t.abTest.widgetId===e.id))}));return e.reduce(((e,t)=>{var n;if(i.some((e=>e.id===t.id)))return e;if(!t.abTest||t.id===(null===(n=t.abTest)||void 0===n?void 0:n.widgetId))return e.push(t),e;const r=i.find((e=>e.id===t.abTest.widgetId));return r?(e.push({...r,abTest:{id:t.abTest.id},payload:{...r.payload,positioning:(o=t,"byAnchorEl"!==o.payload.positioning.positionBy?o.payload.positioning:{...o.payload.positioning,byAnchorEl:{...o.payload.positioning.byAnchorEl,id:o.id}})}}),e):(e.push({...t,abTest:void 0}),e);var o}),[])};function m(){return(0,l.P1)((function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t}),(function(e){return u.Y.apply(this,e)}))}function g(e,t){const i=t.innerWidth,n=t.innerHeight;return(e.mediaPayloads||[]).reduce(((e,t)=>{var r,o,s,l;const a=(null==t||null===(r=t.globalWindow)||void 0===r?void 0:r.maxWidth)||1/0,c=(null==t||null===(o=t.globalWindow)||void 0===o?void 0:o.minWidth)||0,d=(null==t||null===(s=t.globalWindow)||void 0===s?void 0:s.maxHeight)||1/0,u=(null==t||null===(l=t.globalWindow)||void 0===l?void 0:l.minHeight)||0;return i<=a&&i>=c&&n<=d&&n>=u&&e.push(t.payload),e}),[e])}function f(e){let t=0;const i=e.clientWidth,n=e.clientHeight,r=.7*d.n*2,o=.7*d.k*2;return i>r&&n>o&&(t=1),i>2*r&&n>2*o&&(t=2),t}function y(e){const{searchParams:t}=new URL(e);return!!t.get("relap_debug")}function v(e){const{width:t,height:i}=s()(e,(e=>e.width));return t&&9999!==t&&i&&9999!==i?t/i:null}function b(e){const t=window.global.open();t.opener=null,t.location=e,t.target="_blank"}const w=c()(Math.random(),Math.random());function I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"some_hash";return c()(`${e}-${Math.random()}`,w)}function C(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(null===(e=t.flyRoll)||void 0===e||!e.enable)}function R(e,t){return e.reduce(((e,i)=>{switch(i.type){case"slot":e.push(t(i));break;case"grid":e.push({...i,slots:R(i.slots,t)})}return e}),[])}function S(e,t){return e.reduce(((e,i)=>{switch(i.type){case"slot":e.push(t(i));break;case"grid":e.push(t({...i,slots:S(i.slots,t)}))}return e}),[])}function E(e){return e.reduce(((e,t)=>{switch(t.type){case"slot":e.push(t);break;case"grid":e.push(...E(t.slots))}return e}),[])}function x(e,t){return r()(E(e),t)}function W(e,t){return E(e).some(t)}function T(e,t){return e.reduce(((e,i)=>{switch(i.type){case"slot":t(i)&&e.push(i);break;case"grid":e.push({...i,slots:T(i.slots,t)})}return e}),[])}const P=e=>{let{instance:{slots:t=[]}={}}=e;return T(t,(e=>!(e.recId&&!e.swapping)))},_=e=>{let{widgetInstances:t}=e;return Object.values(t).reduce(((e,t)=>{const i=P({instance:t});return E(i).length?(e.push({instanceId:t.id,slots:i}),e):e}),[])},k=e=>{let{widgetInstances:t}=e;return _({widgetInstances:t}).some((e=>{let{slots:t}=e;return W(t,(e=>{let{types:t}=e;return t.includes("ad")}))}))};function L(e){let{string:t="",type:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return e;const n=e.split("#")[0];if("anchor"===i)return`${n}#${new URLSearchParams(t)}`;{const i=new URL(e);return new URLSearchParams(t).forEach(((e,t)=>{i.searchParams.set(t,e)})),`${i}`}}function O(e){let{href:t,recType:i,cfg:{utm:n={}}={},additionalUtm:r=null}=e;if("ad"===i)return t;const{type:o,string:s=""}=n;return L(t,{type:o,string:new URLSearchParams(r?`${s}&${r}`:s).toString()})}function j(e){let{size:t,filters:i=[],recId:n,bgRecs:r=[]}=e;return"normal"===t&&i.includes("video_custom")&&!r.includes(n)}function A(e){let{customRec:{name:t}={}}=e;return"videocap"===t}function M(e){let{recId:t,instance:{slots:i=[]}}=e;return W(i,(e=>{let{bgRecs:i=[]}=e;return i.includes(t)}))}function D(e){return E(e).reduce(((e,t)=>{let{recId:i,bgRecs:n=[]}=t;return i&&e.push(i),n.forEach((t=>{e.push(t)})),e}),[])}function N(e){let{id:t,widgetInstances:i}=e;return Object.values(i).some((e=>D(e.slots).includes(t)))}function z(e){let{recId:t,instance:{slots:i=[]}}=e;return W(i,(e=>{let{recId:i,bgRecs:n=[]}=e;return t!==i&&n.includes(t)}))}function F(e,t){return e.reduce(((e,i)=>(t[i]&&e.push(t[i]),e)),[])}function V(e,t){return F(D(e),t)}function B(e,t){const i=function(e){return E(e).reduce(((e,t)=>{let{recId:i}=t;return i&&e.push(i),e}),[])}(e);return F(i,t)}function $(e){let{instance:{slots:t},recs:i}=e;return V(t,i).some(A)?null:x(t,j)||null}function q(e){let{recId:t,instance:{slots:i}}=e;return x(i,(e=>{let{bgRecs:i=[]}=e;return i.includes(t)}))}function Z(e){let{widgetInstances:t,recs:i}=e;const n=Object.values(t);for(let e=0;e<n.length;e++){const t=$({instance:n[e],recs:i});if(t)return{slot:t,instanceId:n[e].id}}return{}}const H=(e,t)=>{let{width:i,height:n}=e;const r=(e=>e.endsWith("vw")?"vw":e.endsWith("vh")?"vh":e.endsWith("vmin")?"vmin":e.endsWith("vmax")?"vmax":null)(t),o=parseFloat(t);switch(r){case"vw":return.01*o*i+"px";case"vh":return.01*o*n+"px";case"vmin":return.01*o*Math.min(i,n)+"px";case"vmax":return.01*o*Math.max(i,n)+"px";default:return t}},U=e=>{let{localWindow:t,vwBase:i,args:n}=e;return n.reduce(((e,n)=>`${e}${H(t,100*n/i+"vw")} `),"").trim()},G=e=>{let{localWindow:{width:t},baseWidth:i,args:n}=e;return n.reduce(((e,n)=>`${e}${n*t/i}px `),"").trim()},Q=e=>function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return t=>{let{localWindow:n}=t;return G({args:i,localWindow:n,baseWidth:e})}},J=()=>{const e=window.global.relapCorrectScriptInstallation||null;return e?e.isAsync||e.isDefer?{isCorrect:!1,errorText:"Installation script loads without iframe"}:{isCorrect:!1,errorText:"Installation script loads synchronously and without iframe"}:{isCorrect:!0}},X=e=>window.relapAppIndexSrc.match("relap.io")?e.replace("relap.mail.ru","relap.io"):e,Y=e=>{const{payload:{positioning:{mountInterval:t}},id:i}=e,n=localStorage.getItem(`${i}_lastMountTime`);if(!t||!n)return!0;return Number(new Date)>Number(n)+60*t*1e3},K=e=>`${I(Date.now())}_${e}`},59594:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(32747);if(24866!=i.j)var r=i(43402);const o=24866!=i.j?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const t=(0,n.useRef)(new r.Z(e));return t.current}:null},16804:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(32747);const r=24866!=i.j?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[i,r]=(0,n.useState)(e),[o,s]=(0,n.useState)(!0);return(0,n.useMemo)((()=>{r(e),s(!0)}),[e]),(0,n.useEffect)((()=>{if(e&&!t&&i>0){s(!1);const e=setTimeout((()=>{r(i-1)}),1e3);return()=>{clearTimeout(e)}}return()=>{}}),[i,e,t]),{countdown:i,firstTick:o}}:null},699:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(32747),r=i(13002),o=i(48191);const s=24866!=i.j?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};const i=(0,n.useRef)((()=>{}));(0,o.Z)((()=>((0,r.Z)(e).then((e=>{i.current=e,t()})),()=>{i.current()})))}:null},16778:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(23279),r=i.n(n),o=i(23493),s=i.n(o),l=i(32747);const a=24866!=i.j?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{leading:i=!0,trailing:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"throttle",a=e=>(e.cancel=()=>{},e);null!==t&&(a="throttle"===o?s():r());const c=(0,l.useRef)(e),d=(0,l.useRef)(t),u=()=>a((function(){return c.current(...arguments)}),d.current,{leading:i,trailing:n}),h=(0,l.useRef)(u());return c.current!==e&&(c.current=e,h.current.cancel(),h.current=u()),d.current!==t&&(d.current=t,h.current.cancel(),h.current=u()),h.current}:null},16585:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(32747),r=i(44474);const o="desktop",s=24866!=i.j?e=>{let{local:{innerWrapperEl:t},global:{document:{documentElement:i}}}=e;const[s,l]=(0,n.useState)(o),{width:a}=(0,r.Z)(t);return(0,n.useEffect)((()=>{l(i.clientWidth<=500?"mobile":o)}),[a,i]),s}:null},26337:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(32747);const r=24866!=i.j?["wheel","touchmove"]:null,o={capture:!0,passive:!1},s=24866!=i.j?function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=(0,n.useCallback)((e=>{e.preventDefault()}),[]);(0,n.useEffect)((()=>!e||t?()=>{}:(r.forEach((t=>{e.document.body.addEventListener(t,i,o)})),()=>{r.forEach((t=>{e.document.body.removeEventListener(t,i,o)}))})),[e.document.body,i,t])}:null},22480:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=i(32747),r=i(38103),o=i(16778);const s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[n,r,{leading:s=!1,trailing:l=!0}={}]=t;return(0,o.Z)(n,r,{leading:s,trailing:l},"debounce")},l=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"throttle";const[a,c]=(0,n.useState)(i(e)),d=(0,n.useCallback)((t=>{c(i(e,t))}),[e,i]),u="throttle"===l?r.Z:s,h=u(d,o);return(0,n.useEffect)((()=>(null==e||e.addEventListener(t,h),h(),()=>{h.cancel(),null==e||e.removeEventListener(t,h)})),[e,t,h]),a}},28060:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var n=i(23493),r=i.n(n),o=i(32747),s=i(3798);if(24866!=i.j)var l=i(82897);var a=i(48191);const c=24866!=i.j?e=>{let{global:t,local:i,stylesSrc:n,isDynamic:c=!1,isExposed:d=!1,data:u}=e;const{current:h}=(0,o.useRef)({}),{current:p}=(0,o.useRef)(new l.gq),m=(0,o.useCallback)((()=>u),[u]),g=(0,o.useRef)(r()((()=>{var e,n;const{sheet:r}=h[i.id],o=m();r.update({...o,globalWindow:{width:(null==t?void 0:t.innerWidth)||null,height:(null==t?void 0:t.innerHeight)||null},localWindow:{width:(null===(e=i.innerWrapperEl)||void 0===e?void 0:e.offsetWidth)||null,height:(null===(n=i.innerWrapperEl)||void 0===n?void 0:n.offsetHeight)||null}})}),300));(0,a.Z)((()=>{var e;((0,s.fu)({jss:d?i.exposedJss:i.jss,stylesSrc:n,styleSheetsDict:h,widgetId:i.id,sheetsManager:p,createStyleSheetOptions:{link:c}}),c)&&(null==i||null===(e=i.innerWrapperEl)||void 0===e||e.addEventListener("resize",g.current),null==t||t.addEventListener("resize",g.current),g.current());return()=>{var e;(0,s.Yl)({styleSheetsDict:h,widgetId:i.id,sheetsManager:p}),g.current.cancel(),null==i||null===(e=i.innerWrapperEl)||void 0===e||e.removeEventListener("resize",g.current),null==t||t.removeEventListener("resize",g.current)}}));const f=m();return(0,o.useEffect)((()=>{c&&g.current()}),[c,f]),h[i.id].sheet}:null},81149:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(32747);function r(e){const t=(0,n.useRef)(!1),i=(0,n.useRef)();return i.current||(i.current=()=>{t.current||(t.current=!0,e())}),i.current}},4251:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(32747),r=i(22480);const o=24866!=i.j?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const[i,o]=(0,n.useState)("visible"===e.visibilityState),s=(0,n.useCallback)((()=>{const t="visible"===e.visibilityState;i!==t&&o(t)}),[e.visibilityState,i]);return(0,r.Z)(e,"visibilitychange",s,t),i}:null},44474:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(22480);const r=(e,t)=>{if(null!==e)return e.document?e.document.documentElement[t]:e[t]},o=e=>({width:r(e,"clientWidth"),height:r(e,"clientHeight")}),s=24866!=i.j?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return(0,n.Z)(e,"resize",o,t)}:null},38103:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(16778);const r=24866!=i.j?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r,o,{leading:s=!0,trailing:l=!0}={}]=t;return(0,n.Z)(r,o,{leading:s,trailing:l},"throttle")}:null},44228:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(22480);const r=e=>({width:e.width*e.scale,height:e.height*e.scale}),o=24866!=i.j?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return(0,n.Z)(e,"resize",r,t)}:null},48191:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(32747);const r=24866!=i.j?e=>{const t=(0,n.useRef)(!0);let i;t.current&&(i=e()||(()=>{})),t.current=!1,(0,n.useEffect)((()=>i),[])}:null},76081:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const n="de87b3f4168749e8889e7f7049c29c5d",r={dsn:`https://${n}@s.relap.mail.ru/8`,envelopeEndpoint:`https://s.relap.io/api/8/envelope/?sentry_key=${n}&sentry_version=7`,environment:"production",release:"RLP-10487",tracesSampleRate:.5,allowUrls:[...["161.ru","29.ru","45.ru","59.ru","63.ru","72.ru","74.ru","76.ru","avtovzglyad.ru","baby.ru","calendar.fontanka.ru","ctnews.ru","doctorpiter.ru","e1.ru","echo.msk.ru","elle.ru","elledecoration.ru","ellegirl.ru","fbm.ru","femmie.ru","fishki.net","m.fishki.net","fontanka.ru","forbes.ru","gismeteo.ru","kino-teatr.ru","km.ru","knijky.ru","kolesa.ru","kp.ru","kulturologia.ru","marieclaire.ru","maximonline.ru","mk.ru","new-magazine.ru","ngs.ru","ngs24.ru","ngs55.ru","nn.ru","novayagazeta.ru","ohotniki.ru","parents.ru","psychologies.ru","rg.ru","ria.ru","russian.rt.com","snob.ru","sntch.com","sport-express.ru","m.sport-express.ru","starhit.ru","svpressa.ru","tass.ru","ufa1.ru","v1.ru","vokrugsveta.ru","wday.ru","woman.ru","womanhit.ru","zr.ru"].map((e=>{const t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`(.*)?${t}`,"i")})),/https?:\/\/(.*\.)?relap\.io/i],ignoreErrors:[/Web Storage Error/,/Public Api Error/,"top.GLOBALS","originalCreateNotification","canvas.contentDocument","MyApp_RemoveAllHighlights","http://tt.epicplay.com","Can't find variable: ZiteReader","jigsaw is not defined","ComboSearch is not defined","http://loading.retry.widdit.com/","atomicFindClose","fb_xd_fragment","bmi_SafeAddOnload","EBCallBackMessageReceived","conduitPage",/mc\.yandex\.ru/],networkErrorMessageRegex:/.*(Failed to fetch|Load failed|отменено|NetworkError when attempting to fetch resource|The operation was aborted|cancelled|Сетевое соединение потеряно|не удается произвести анализ ответа|Превышен лимит времени на запрос|FetchEvent\.respondWith received an error|Abgebrochen|Fetch event is destroyed|WebKit столкнулся с внутренней ошибкой|соединение с интернетом прервано).*/gi}},9652:(e,t,i)=>{"use strict";i.d(t,{O_:()=>u,vj:()=>h,Uz:()=>S,lG:()=>R,ib:()=>y,MG:()=>I,ZX:()=>v,Cb:()=>C});var n=i(28299),r=i(69906);const o="@fillRate INIT_STAT",s="@fillRate UPDATE_ATTEMPT",l="@fillRate SET_RESPONSE_DATA",a="@fillRate SET_VAST_PROMISES",c="@fillRate SET_FILLRATE_STATUS",d="@fillRate SET_FILLRATE_CLEAR",u={init:"init",swap:"swap",errorSwap:"errorSwap",moreRecsLoad:"moreRecsLoad",done:"done"},h={empty:"empty",filled:"filled",vast:"vast"},p={status:u.init,schemaFetchCount:1,attempts:[],vastMetricsData:[],adSlotsInProcess:[],adSlotsCompleted:[],vastPromiseResolves:{}},m=e=>{const t=e.reduce(((e,t)=>{let{vastDomain:i,filled:n}=t;return e[i]?(e[i].requested+=1,e[i].filled+=n,e):{...e,[i]:{requested:1,filled:n}}}),{});return Object.keys(t).reduce(((e,i)=>{const{requested:n,filled:r}=t[i];return e.push({rootPath:"events",path:`fill_rate.vast.${i}.request`,value:n}),r&&e.push({rootPath:"events",path:`fill_rate.vast.${i}.filled`,value:r}),e}),[])},g=async e=>{let{dispatch:t,instanceId:i,vastAttempts:n,slotResultsTmp:r}=e;if(!Object.values(r).some((e=>e===h.vast)))return{slotResultsWithVastResolved:r,vastMetricsData:[]};const o=Object.keys(r).reduce(((e,t)=>(r[t]===h.vast&&e.push(t),e)),[]),s=[],l=o.reduce(((e,t)=>{let i;const n=new Promise((e=>{i=e}));return s.push(n),e[t]=i,e}),{});t({type:a,payload:{instanceId:i,vastPromiseResolves:l}});const c=await Promise.allSettled(s),d={...r};c.forEach((e=>{let{value:{slotId:t,status:i}}=e;d[t]&&(d[t]=i)}));const u=n.map((e=>{let{vastDomain:t,slotId:i}=e;return{vastDomain:t,filled:Number(d[i]===h.filled)}}));return{slotResultsWithVastResolved:d,vastMetricsData:u}},f={},y=e=>({type:o,payload:e}),v=e=>({type:c,payload:e}),b=e=>({type:d,payload:e}),w=e=>[u.done,u.swap].includes(e),I=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async(i,o)=>{await f[e];const{fillRate:s,widgetInstances:l}=o(),{widgetCfgId:a,recGroupCtx:c,schemaFetchCount:d,attempts:u,status:p,vastMetricsData:g=[],adSlotsInProcess:y=[]}=s[e]||{};if(!y.length||!a||!u||!u.length||w(p))return;const{slots:v=[]}=l[e]||{},I=v.filter((e=>{let{type:t}=e;return"slot"===t})).map((e=>{let{slotId:t}=e;return t})),C={...y.find((e=>Object.keys(e).some((e=>I.includes(e)))))};Object.keys(C).forEach((e=>{I.includes(e)||delete C[e]}));const R=Object.values(C).some((e=>e===h.vast));if(!t&&(R||!Object.keys(C).length))return;const S=y.reduce(((e,t)=>[...e,...Object.keys(t)]),[]).filter((e=>I.includes(e)));i(b({instanceId:e,adSlotsCompleted:S}));const E=Object.keys(C),x={widgetCfgId:a,recGroupCtx:c,schemaFetchCount:d,fillRate:{attempts:u,total:{adAvailable:E.length||u[u.length-1].adAvailable,adUtilized:E.filter((e=>C[e]===h.filled)).length}}};g.length&&(0,r.o)(m(g)),i((0,n.EV)(x))}},C=e=>{let{instanceId:t,widgetRecsSchemas:i,widgetGroup:n}=e;return async(e,r)=>{let o;f[t]=new Promise((e=>{o=e}));const{fillRate:l}=r(),{adSlotsInProcess:a,adSlotsCompleted:c,status:d}=l[t];if(w(d))return;let u=0;const p=[],m=e=>{let{slotId:t}=e;return!c.includes(t)},{tiles:y}=i.find((e=>{let{widgetInstanceId:i}=e;return i===t}))||[];if(!y.length)return;const v=a.length?a.map((e=>Object.keys(e).reduce(((t,i)=>{const n=e[i];return{...t,[i]:n===h.vast?h.empty:n}}),{}))):y.map((()=>({}))),b=y.map((e=>e.filter((e=>{let{types:t}=e;return t.includes("ad")})).filter(m).reduce(((e,t)=>{let{slotId:i}=t;return{...e,[i]:h.empty}}),{}))).reduce(((e,t,i)=>(e.push({...v[i],...t}),e)),[]),I=y.map((e=>e.filter((e=>{let{types:t}=e;return t.includes("ad")})).filter(m).map((e=>{let{slotId:t}=e;return t})))),C=n.map(((e,t)=>{e.length&&(u=t);const i=e.filter((e=>{let{type:t}=e;return"ad"===t}));return i.forEach((e=>{let{slotId:i,video:n}=e;b[t][i]&&(b[t][i]=h.filled,n&&(b[t][i]=h.vast,p.push({vastDomain:n.vastDomain,slotId:i})))})),i.map((e=>{let{slotId:t}=e;return t}))})),{slotResultsWithVastResolved:R,vastMetricsData:S}=await g({dispatch:e,instanceId:t,vastAttempts:p,slotResultsTmp:b[u]});b[u]=R;const E=C[u].reduce(((e,t)=>e+(R[t]===h.filled?1:0)),0),x={adAvailable:I[u].length,adUtilized:E};e({type:s,payload:{instanceId:t,attempt:x,vastMetricsData:S,adSlotsInProcess:b}}),o()}},R=e=>{let{instanceId:t,rec:i}=e;return(e,n)=>{const{fillRate:r}=n(),{recGroupCtx:o}=r[t],{recGroupCtx:s}=i||{};e({type:l,payload:{instanceId:t,recGroupCtx:o||s}})}},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:i}=arguments.length>1?arguments[1]:void 0;const{instanceId:n}=i||{};switch(t){case o:return{...e,[n]:{...p,widgetCfgId:i.widgetCfgId}};case s:return{...e,[n]:{...e[n],vastMetricsData:[...e[n].vastMetricsData,...i.vastMetricsData],attempts:[...e[n].attempts,i.attempt],adSlotsInProcess:i.adSlotsInProcess}};case l:return{...e,[n]:{...e[i.instanceId],recGroupCtx:i.recGroupCtx}};case a:return{...e,[n]:{...e[n],vastPromiseResolves:i.vastPromiseResolves}};case c:return{...e,[n]:{...e[n],status:i.status}};case d:return{...e,[n]:{...e[n],...p,recGroupCtx:void 0,status:u.done,schemaFetchCount:e[n].schemaFetchCount+1,adSlotsCompleted:[...e[n].adSlotsCompleted,...i.adSlotsCompleted]}};default:return e}}},90290:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n={defaults:{externalFonts:{google:[{family:"Roboto",variants:["400","500"],subsets:["cyrillic"]}]},mainTitle:{label:""},recThumbnail:{aspectRatioWidth:550,aspectRatioHeight:280,aspectRatioApplyToRecTypes:["ad","normal"],aspectRatioApplyToRecs:["normal","wide"],visible:!0},recTitle:{visible:!0,maxLines:2},recDescription:{visible:!0,maxLines:2},recAd:{label:"Реклама"},logo:{visible:!1},grid:{elWidthExceeding:0,simple:{preserveRowsQuantity:!0,minColWidth:350,maxColWidth:900,gutter:40}},mediaPayloads:[{globalWindow:{maxHeight:750},payload:{grid:{simple:{maxColWidth:500}}}},{globalWindow:{maxHeight:530},payload:{grid:{simple:{minColWidth:100,maxColWidth:350}}}}]},editableFields:{},presetSettings:{sliderFullscreenWidePlates:{defaults:{},editableFields:{}}}}},75206:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n={themeLabel:"double fullscreen desktop",domains:[],availablePresets:["sliderFullscreenWidePlates"]}},89003:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>z});var n=i(8661),r=i(32747),o=i.n(r);const s=e=>{const{disclaimer:t="",styles:i={classes:{}},onReady:n=(()=>{})}=e;return(0,r.useEffect)((()=>{n()}),[]),o().createElement("div",{className:i.classes.disclaimerText},t)},l=(0,r.memo)(s);var a=i(84078),c=i(28060),d=i(16804),u=i(4251),h=i(81504),p=i(72584);const m={...p.Z,widgetCloseContainer:{position:"relative",marginBottom:"-3px"},text:{position:"relative",zIndex:1,display:"flex",justifyContent:"center",width:"100%",fontFamily:"Roboto, sans-serif",fontWeight:"400",fontSize:"16px",lineHeight:"24px",color:"#BFC4C8"},closeButton:{position:"absolute",top:"-4px",right:"2px",zIndex:2,display:"flex",flexShrink:0,width:"32px",height:"32px",cursor:"pointer",borderRadius:"16px","&:hover":{background:"rgba(255, 255, 255, 0.2)"},"&:focus, &:active":{background:"rgba(255, 255, 255, 0.3)"}},closeButtonIcon:{margin:"auto",width:"14px",height:"14px",fill:"#BFC4C8","$closeButton:focus &, $closeButton:active &":{fill:"#FFFFFF"}}},g=(e,t)=>{let{onCloseClick:i,onTimerTick:n,adLabel:s,duration:l=0}=e,{local:a,global:p}=t;const{classes:g}=(0,c.Z)({local:a,global:p,stylesSrc:m,data:{}}),f=Math.max(l,0),y=Boolean(f),v=(0,u.Z)(p.document),{countdown:b}=(0,d.Z)(f,!v);return(0,r.useEffect)((()=>{null==n||n(b)}),[b,n]),o().createElement("div",{className:g.widgetCloseContainer},o().createElement("div",{className:g.text},s," ",y&&`${b||1} ${(0,h.Z)(b||1,["секунда","секунды","секунд"])}`),o().createElement("div",{className:g.closeButton,onClick:e=>{e.stopPropagation(),i()}},o().createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:g.closeButtonIcon},o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7L0.292893 1.70711C-0.0976316 1.31658 -0.0976316 0.683418 0.292893 0.292894C0.683417 -0.0976305 1.31658 -0.0976306 1.70711 0.292894L7 5.58579L12.2929 0.292894C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292894C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683417 14.0976 0.292893 13.7071Z"}))))};g.contextTypes=a.H;const f=(0,r.memo)(g),y={fullscreenLayout:{position:"fixed",top:0,right:0,bottom:0,left:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.8)"},fullscreenCloseContainer:{width:"100%"},fullscreenContainer:{position:"relative",zIndex:1,width:"100%"}},v=(e,t)=>{let{local:i,global:n}=t;const{children:r,adLabel:s,duration:l,isReady:a,rowMinWidth:d,rowMaxWidth:u,onCloseClick:h,onTimerTick:p}=e,{classes:m}=(0,c.Z)({local:i,global:n,stylesSrc:y,isDynamic:!0,data:{}});return o().createElement("div",{className:m.fullscreenLayout,style:{display:a?"":"none"}},o().createElement("div",{className:m.fullscreenCloseContainer,style:{minWidth:`${d}px`,maxWidth:`${u}px`}},o().createElement(f,{adLabel:""!==s?s:"Реклама",onCloseClick:h,onTimerTick:p,duration:l})),o().createElement("div",{className:m.fullscreenContainer},r))};v.contextTypes=a.H;const b=(0,r.memo)(v);var w=i(45697),I=i.n(w),C=i(82897),R=i(94184),S=i.n(R),E=i(85213),x=i(60226),W=i(3798);const T={recItemInner:{position:"relative"},closeButton:{display:"none","z-index":1e4,"&$visible":{display:"block"}},visible:{},video:{position:"relative","z-index":1e3},thumbnail:{position:"relative","z-index":100}};function P(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _={},k=new C.gq;class L extends r.PureComponent{constructor(){super(...arguments),P(this,"getAdChoiceItems",(()=>{const{advertiserInfoOverlay:e,ordTokenItem:t}=this.props;return[{id:"advertiserInfo",text:"О рекламодателе",overlay:e},{id:"ordToken",type:"customItem",item:t}].filter((e=>{let{overlay:t,item:i}=e;return Boolean(t||i)}))})),P(this,"renderAdChoice",(()=>{const{styles:e}=this.props,t=this.getAdChoiceItems();return L.shouldAdChoiceRender(t)?o().createElement(E.Z,{items:t,styles:e}):null})),P(this,"renderAgeRestriction",(()=>{const{ageRestriction:e,styles:t}=this.props;if(null===e)return null;const i=this.getAdChoiceItems(),n=L.shouldAdChoiceRender(i);return o().createElement(x.Z,{ageRestriction:e,adChoiceRendered:n,styles:t})})),P(this,"renderVideo",(()=>{const{local:e}=this.context,{styles:t,recComposition:i,video:n}=this.props;if(!n)return null;const r=_[e.id].sheet,s=S()(r.classes.video,t.classes.video);switch(i){case"normalPlate":case"normalList":case"fullPlate":case"fullList":return o().createElement("div",{className:s},n);default:return null}})),P(this,"renderThumbnail",(()=>{const{local:e}=this.context,{styles:t,recComposition:i,renderLink:n,thumbnail:r}=this.props;if(!r)return null;const s=_[e.id].sheet,l=S()(s.classes.thumbnail,t.classes.thumbnail);switch(i){case"normalPlate":case"normalList":return n({children:r,className:l});case"fullPlate":case"fullList":return o().createElement("div",{className:l},r);default:return null}})),P(this,"renderTitle",(()=>{const{styles:e,recComposition:t,renderLink:i,title:n}=this.props;if(!n)return null;switch(t){case"normalPlate":case"normalList":return i({children:n,className:e.classes.title});case"fullPlate":case"fullList":return o().createElement("div",{className:e.classes.title},n);default:return null}})),P(this,"renderDescription",(()=>{const{styles:e,description:t}=this.props;return t?o().createElement("div",{className:e.classes.description},t):null})),P(this,"renderDisclaimer",(()=>{const{styles:e,disclaimer:t}=this.props;return t?o().createElement("div",{className:e.classes.disclaimer},t):null})),P(this,"renderLabel",(()=>{const{styles:e,type:t,label:i}=this.props;if(!i)return null;switch(t){case"ad":const t=S()(e.classes.label,e.classes.adLabel);return o().createElement("div",{ref:e=>{this._labelEl=e},className:t},i);case"promo":const n=S()(e.classes.label,e.classes.promoLabel);return o().createElement("div",{ref:e=>{this._labelEl=e},className:n},i);case"exchange":const r=S()(e.classes.label,e.classes.exchangeLabel);return o().createElement("div",{ref:e=>{this._labelEl=e},className:r},i);default:return null}})),P(this,"renderCategory",(()=>{const{styles:e,category:t,categoryUrl:i}=this.props;if(!t)return null;if(t&&i){const n=S()(e.classes.recCategory,e.classes.recCategoryWithLink);return o().createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:n},t)}return o().createElement("div",{className:e.classes.recCategory},t)}))}componentWillMount(){const{local:e}=this.context;(0,W.fu)({jss:e.jss,stylesSrc:T,styleSheetsDict:_,widgetId:e.id,sheetsManager:k})}componentDidMount(){const{setLabelEl:e}=this.props;e(this._labelEl)}componentDidUpdate(){const{setLabelEl:e}=this.props;e(this._labelEl)}componentWillUnmount(){const{local:e}=this.context;(0,W.Yl)({widgetId:e.id,styleSheetsDict:_,sheetsManager:k})}static shouldAdChoiceRender(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).length>0}render(){const{local:e}=this.context,{styles:t,RecLayout:i,type:n,size:r,renderLinkOverlay:s,recComposition:l,meta:a,pubDate:c,callButton:d}=this.props,u=_[e.id].sheet,h=S()(u.classes.recItemInner,t.classes.recItemInner),p="fullPlate"===l||"fullList"===l?s({zIndex:200}):null;return o().createElement("div",{className:h},o().createElement(i,{styles:t,type:n,size:r,linkOverlay:p,adChoice:this.renderAdChoice(),ageRestriction:this.renderAgeRestriction(),closeButton:null,video:this.renderVideo(),thumbnail:this.renderThumbnail(),title:this.renderTitle(),description:this.renderDescription(),disclaimer:this.renderDisclaimer(),label:this.renderLabel(),category:this.renderCategory(),pubDate:c,meta:a,callButton:d}))}}P(L,"propTypes",{styles:I().object,RecLayout:I().oneOfType([I().func,I().object]).isRequired,recComposition:I().string.isRequired,type:I().oneOf(["normal","ad","promo","exchange"]),size:I().oneOf(["normal","wide"]),renderLink:I().func,renderLinkOverlay:I().func,advertiserInfoOverlay:I().node,ordTokenItem:I().node,video:I().node,thumbnail:I().node,title:I().node,description:I().node,disclaimer:I().node,label:I().node,callButton:I().node,ageRestriction:I().number,category:I().string,categoryUrl:I().string,pubDate:I().string,meta:I().object,setLabelEl:I().func}),P(L,"contextTypes",{local:I().object.isRequired}),P(L,"defaultProps",{styles:{classes:{}},type:"normal",size:"normal",renderLink:()=>{},renderLinkOverlay:()=>{},advertiserInfoOverlay:null,ordTokenItem:null,video:null,thumbnail:null,title:null,description:null,disclaimer:null,label:null,callButton:null,ageRestriction:null,category:"",categoryUrl:"",pubDate:"",meta:{},setLabelEl:()=>{}});const O={recLayoutRoot:{width:"100%"},thumbnailWrapper:{position:"relative"},textContent:{position:"relative","z-index":100}},j=(e,t)=>{const{local:i}=t,{styles:n={classes:{}},size:r="normal",linkOverlay:s=null,thumbnail:l=null,title:a=null,description:d=null,disclaimer:u=null,domainName:h="Перейти",adChoice:p=null,ageRestriction:m=null}=e,g=(0,c.Z)({global:void 0,local:i,stylesSrc:O,data:{}}),f=S()(g.classes.recLayoutRoot,n.classes.recLayoutRoot,{[n.classes.recLayoutNormalSize]:"normal"===r,[n.classes.recLayoutWideSize]:"wide"===r}),y=S()(g.classes.textContent,n.classes.textContent),v=S()(g.classes.thumbnailWrapper,n.classes.thumbnailWrapper);return o().createElement("div",{className:f},s,p,m,o().createElement("div",{className:v},l),o().createElement("div",{className:y},a,d,o().createElement("div",{className:n.classes.callToActionButtonWrapper},s,o().createElement("div",{className:n.classes.callToActionButtonText},h)),u))};j.contextTypes={local:I().object.isRequired};const A=(0,r.memo)(j),M=e=>"simple"===e.cfg.grid.type?e.cfg.grid.simple.gutter:0,D={disclaimer:{fontFamily:"Arial",fontWeight:400,fontSize:"12px",lineHeight:"16px",color:"#BFC4C8",position:"relative",zIndex:202,height:"32px",marginTop:"20px",overflow:"hidden","&:hover":{overflow:"visible"}},disclaimerText:{position:"absolute",width:"100%",top:0,left:0,background:"#fff","$disclaimer:hover &":{top:"auto",bottom:0,paddingTop:"20px"}},mainTitle:{},recItemInner:{display:"flex",width:e=>`calc(100% + ${M(e)}px)`,margin:e=>{const t=M(e);return t?`-${t/2}px`:(e=>e.cfg.recItem||{})(e).margin||0},padding:e=>M(e)/2+"px"},menuWrapper:{"&&":{position:"absolute",top:24,right:24}},ageRestrictionWrapper:{"&&":{"--adchoice-transform":"translate(0, 35px)",position:"absolute",top:24,right:24}},textContent:{position:"static !important"},title:{fontSize:"24px",lineHeight:"32px",color:"#000000",fontFamily:"Roboto, sans-serif",fontWeight:500,marginBottom:"12px"},description:{fontSize:"16px",lineHeight:"24px",color:"#000000",fontFamily:"Roboto, sans-serif",fontWeight:400,marginBottom:"20px"},thumbnail:{width:"100%",marginBottom:"20px"},recItemFullPlate:{},label:{display:"none"},promoLabel:{},logo:{display:"none"},recLayoutRoot:{position:"relative",width:"100%",background:"#fff",borderRadius:"16px",padding:"24px"},callToActionButtonWrapper:{position:"relative",zIndex:201,display:"flex",alignItems:"center",justifyContent:"center",minWidth:0,maxWidth:"100%",height:"48px",marginTop:"auto",padding:"12px",borderRadius:"8px",fontSize:"20px",lineHeight:"32px",color:"#000000",background:"rgba(137, 148, 153, 0.12)",fontFamily:"Arial","&:hover":{background:"rgba(137, 148, 153, 0.2)"},"&:active":{background:"rgba(137, 148, 153, 0.4)"}},callToActionButtonText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},itemsContainer:{margin:e=>M(e)/2+"px"},customRecWrapper:{},recItemNormalPlate:{},recItemNormalList:{},recItemFullList:{}},N={...p.Z,...D},z=(0,n.Z)({DisclaimerLayout:l,FullscreenLayout:b,RecLayout:A,RecPreLayout:L,widgetStylesSrc:N,exposedSliderStylesSrc:{}})},52223:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(82492),r=i.n(n);const o={base:{},type:{},preset:{}};o.base={theme:"default_beta",allowedPlatforms:["mobile","desktop"],individualInstall:!1,mediaPayloads:[],fallbackPayloads:[],positioning:{positionBy:"byAnchorEl",byAnchorEl:{position:"before"},byAnchorCss:{position:"before"},byArticleCss:{paragraphNum:1},multiInstance:!1,windowMinWidth:null,windowMaxWidth:null,align:"center",maxInstances:20,mountInterval:0},externalFonts:{timeout:1e3},logo:{visible:!0,linkless:!1},recAd:{label:"Реклама"},recPromo:{label:"Промо",urls:[]},recExchange:{domains:[],label:{visible:!0}},recsLackBehaviour:{disableClonning:!1,destroyOnLack:!1},recsSwapOnTabInactivityTimeout:{enabled:!0},scope:"common",additionalWidgetClassNames:""};const s={grid:{type:"simple",simple:{subtype:"simple",verticalAlign:"stretch",preserveRowsQuantity:!1,carousel:{buttons:{leftButtonHide:!0,animationDuration:.5,showIfMouse:"always",showIfTouch:"never"}}}}},l={mainTitle:{label:"Читайте также:"},recComposition:"fullPlate",recClose:{visible:!1},recThumbnail:{visible:!0,aspectRatioWidth:4,aspectRatioHeight:3,aspectRatioApplyToRecs:["normal"],aspectRatioApplyToRecTypes:["ad"]},recVideo:{visible:!0,sizingType:"contain",aspectRatioWidth:21,aspectRatioHeight:16,lastFrameControls:!1},recTitle:{visible:!0,maxLines:4},recDescription:{visible:!0,maxLines:4},recOpenInNewTab:!1,utm:{string:"",type:"search"}};o.type.standard=r()({},l,{type:"standard",positioning:{positionBy:"byAnchorEl",byAnchorEl:{position:"before"},multiInstance:!1},infiniteRecs:{type:"none",button:{label:"Показать еще..."},scroll:{marginBottom:100}}}),o.type.slider={type:"slider",positioning:{positionBy:"byAnchorCss",byAnchorCss:{selector:"body",position:"append"},byAnchorEl:{position:"append"},multiInstance:!1},slider:{showAtDocPercent:30,maxScaleBy:30},mainTitle:{label:""},grid:{elWidthExceeding:0}},o.type.fullscreen={type:"fullscreen",positioning:{positionBy:"byAnchorCss",byAnchorCss:{selector:"body",position:"append"},byAnchorEl:{position:"append"},multiInstance:!1},mainTitle:{label:""},grid:{elWidthExceeding:0}},o.type.layout={},o.preset.footerPlates=r()({},s,{recComposition:"fullPlate",grid:{type:"simple",elWidthExceeding:0,simple:{minColWidth:170,maxColWidth:290,gutter:30,cols:3,rows:2,schema:[{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]}]}}}),o.preset.footerStrings=r()({},s,{recComposition:"fullList",grid:{type:"simple",elWidthExceeding:0,simple:{minColWidth:330,maxColWidth:730,gutter:30,cols:2,rows:2,schema:[{types:["ad","normal"],size:"normal",filters:["normal_rec"]},{types:["ad","normal"],size:"normal",filters:["normal_rec"]},{types:["normal"],size:"normal",filters:["normal_rec"]},{types:["normal"],size:"normal",filters:["normal_rec"]}]}}}),o.preset.sidePlates=r()({},s,{recComposition:"fullPlate",grid:{type:"simple",elWidthExceeding:0,simple:{minColWidth:170,maxColWidth:290,gutter:30,cols:1,rows:4,schema:[{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]}]}}}),o.preset.side300x250Plates=r()({},s,{recComposition:"fullPlate",grid:{type:"simple",elWidthExceeding:0,simple:{minColWidth:300,maxColWidth:300,gutter:0,cols:1,rows:1,schema:[{types:["ad","normal"],size:"normal",filters:["normal_rec","normal_custom"]}]}},mainTitle:{label:""},logo:{visible:!1}}),o.preset.sideStrings=r()({},s,{recComposition:"fullList",grid:{type:"simple",elWidthExceeding:0,simple:{minColWidth:330,maxColWidth:730,gutter:30,cols:1,rows:4,schema:[{types:["ad","normal"],size:"normal",filters:["normal_rec"]},{types:["normal"],size:"normal",filters:["normal_rec"]},{types:["normal"],size:"normal",filters:["normal_rec"]},{types:["normal"],size:"normal",filters:["normal_rec"]}]}}}),o.preset.sliderPlates=r()({},l,s,{recComposition:"fullPlate",grid:{type:"simple",simple:{minColWidth:170,maxColWidth:290,gutter:30,cols:2,rows:1,preserveRowsQuantity:!0,schema:[{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]}]}},slider:{width:600,widthUnit:"px",horizontalPosition:"right"},recDescription:{visible:!1}}),o.preset.sliderStrings=r()({},l,s,{recComposition:"fullList",grid:{type:"simple",simple:{minColWidth:330,maxColWidth:730,gutter:30,cols:1,rows:1,preserveRowsQuantity:!0,schema:[{types:["ad","normal"],size:"normal",filters:["normal_rec"]}]}},slider:{width:600,widthUnit:"px",horizontalPosition:"right"}}),o.preset.sliderWidePlates=r()({},l,s,{recComposition:"normalPlate",grid:{type:"simple",elWidthExceeding:0,simple:{minColWidth:300,maxColWidth:700,gutter:10,cols:1,rows:1,preserveRowsQuantity:!0,schema:[{types:["ad"],size:"wide",filters:["normal_rec","video_thumbnail","normal_custom"]}]}},slider:{width:600,widthUnit:"px",horizontalPosition:"right"},recDescription:{visible:!1}}),o.preset.sliderButtonWidePlates={recComposition:"fullPlate",grid:{type:"simple",elWidthExceeding:0,simple:{subtype:"simple",verticalAlign:"stretch",preserveRowsQuantity:!1,minColWidth:0,maxColWidth:500,gutter:0,cols:1,rows:1,schema:[{types:["ad"],size:"wide",filters:["slider_button"]}]}},slider:{width:0,widthUnit:"px",horizontalPosition:"right",maxScaleBy:100},logo:{visible:!1},recAd:{label:""}},o.preset.sliderHorizontalPlates=r()({},s,{recComposition:"fullPlate",grid:{type:"simple",elWidthExceeding:0,simple:{minColWidth:210,maxColWidth:210,gutter:18,cols:10,rows:1,subtype:"carousel",carousel:{buttons:{animationDuration:.5},colsPerStep:0,colsShow:0},schema:[{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]},{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]}]}},slider:{width:100,widthUnit:"%",horizontalPosition:"right"},infiniteRecs:{type:"none",button:{label:""},scroll:{marginBottom:100}},recDescription:{visible:!1}}),o.preset.sliderFullscreenWidePlates={recComposition:"fullPlate",positioning:{mountInterval:30},grid:{type:"simple",elWidthExceeding:0,simple:{subtype:"simple",verticalAlign:"stretch",preserveRowsQuantity:!1,minColWidth:0,maxColWidth:5e3,gutter:0,cols:1,rows:1,schema:[{types:["ad"],size:"wide",filters:["fullscreen"]}]}},slider:{width:0,horizontalPosition:"right",showAtDocPercent:0,maxScaleBy:100},logo:{visible:!1},recAd:{label:"Реклама"},recTitle:{maxLines:2,visible:!0},recDescription:{maxLines:2,visible:!0},recThumbnail:{aspectRatioWidth:4,aspectRatioHeight:3},recClose:{visible:!0,enableCountdown:!0,countdownDuration:10}},o.preset.fullscreenNativePlates={recComposition:"fullPlate",grid:{type:"composite",elWidthExceeding:0,composite:{maxWidth:5e3,colGutter:24,rowGutter:0,colGutterUnit:"px",verticalAlign:"stretch",itemsPositioning:{type:"auto"},schema:[{type:"slot",colsWidth:6,slot:{types:["ad"],size:"wide",filters:["fullscreen_native"]}},{type:"slot",colsWidth:6,slot:{types:["ad"],size:"wide",filters:["fullscreen_native"]}}]}},logo:{visible:!1},recAd:{label:""},recTitle:{maxLines:3,visible:!0},recDescription:{maxLines:4,visible:!0},recThumbnail:{aspectRatioWidth:4,aspectRatioHeight:3},recClose:{visible:!0,enableCountdown:!0,countdownDuration:10}},o.preset.inlinePlates=r()({},s,{positioning:{positionBy:"byArticleCss",float:"right"},recComposition:"fullPlate",grid:{type:"simple",elWidthExceeding:0,simple:{minColWidth:290,maxColWidth:290,gutter:30,cols:1,rows:1,schema:[{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]}]}},mainTitle:{label:""}}),o.preset.imgOverlay=r()({},s,{positioning:{positionBy:"byAnchorCss",byAnchorEl:{position:"img_overlay"},byAnchorCss:{position:"img_overlay"},byArticleCss:{position:"img_overlay"},multiInstance:!1,maxVisibleInstances:1},recComposition:"fullPlate",grid:{simple:{cols:1,rows:1,minColWidth:1,maxColWidth:6e3,gutter:0,schema:[{types:["ad"],size:"wide",filters:["img_overlay"]}]}},recClose:{visible:!0},recAd:{label:"Реклама"},logo:{visible:!1}}),o.preset.inlineStrings=r()({},s,{positioning:{positionBy:"byArticleCss",float:"none"},recComposition:"normalList",grid:{type:"simple",elWidthExceeding:0,simple:{gutter:0,minColWidth:330,maxColWidth:9999,cols:1,rows:1,schema:[{types:["ad","normal"],size:"normal",filters:["normal_rec"]}]}},mainTitle:{label:""}}),o.preset.inlineWidePlates=r()({},s,{positioning:{positionBy:"byAnchorEl",float:"none"},recComposition:"normalPlate",flyRoll:{enable:!1,width:500,horizontalPosition:"right"},recThumbnail:{aspectRatioWidth:16,aspectRatioHeight:9,aspectRatioApplyToRecs:["normal","wide"]},recVideo:{aspectRatioWidth:16,aspectRatioHeight:9},grid:{type:"simple",elWidthExceeding:0,simple:{minColWidth:300,maxColWidth:700,gutter:0,cols:1,rows:1,schema:[{types:["ad"],size:"wide",filters:["normal_rec","video_thumbnail","normal_custom"]}]}},mainTitle:{label:""}}),o.preset.formWidePlates=r()({},s,{embeddedBy:"form",positioning:{positionBy:"byAnchorEl",float:"none"},recComposition:"normalPlate",flyRoll:{enable:!1,width:500,horizontalPosition:"right"},grid:{type:"simple",elWidthExceeding:24,simple:{minColWidth:300,maxColWidth:700,gutter:0,cols:1,rows:1,schema:[{types:["ad","form"],size:"wide",filters:["normal_rec","video_thumbnail","normal_custom","form"]}]}},mainTitle:{label:""},logo:{visible:!1},recThumbnail:{aspectRatioWidth:16,aspectRatioHeight:9,aspectRatioApplyToRecs:["normal","wide"]},recVideo:{aspectRatioWidth:16,aspectRatioHeight:9},recTitle:{maxLines:2},recDescription:{maxLines:4},recAd:{label:""}}),o.preset.compositeFooterPlates={recComposition:"fullPlate",grid:{type:"composite",elWidthExceeding:0,composite:{maxWidth:1300,colGutter:30,colGutterUnit:"px",rowGutter:30,rowGutterUnit:"px",verticalAlign:"stretch",cols:3,itemsPositioning:{type:"auto"},schema:[{type:"slot",slot:{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]}},{type:"slot",slot:{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]}},{type:"slot",slot:{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]}}]},simple:{minColWidth:170,maxColWidth:290,gutter:30,cols:1,rows:1,schema:[{types:["ad","normal"],size:"normal",filters:["normal_rec","video_thumbnail","normal_custom"]}]}}};const a=53222==i.j?o:null},68299:(e,t,i)=>{"use strict";i.d(t,{d:()=>n});const n=()=>{const{NODE_ENV:e,IS_PRE:t,IS_TESTING:i}={NODE_ENV:"production",SERVER:"production",IS_PRE:void 0,IS_TESTING:void 0,NO_EVENTS:void 0,OPEN_API_URL:"https://relap.mail.ru/api/v7/",PUBLIC_PATH:"https://relap.mail.ru/v7/",VIDEO_IMA_FILE_NAME:"video_ima220305.js",VIDEO_IMA_CLIENT_FILE_NAME:"client_ima220305.js",VIDEO_IMA_OMWEB_FILE_NAME:"omweb_ima220305.js",VIDEO_IMA_INTEGRATION_FILE_NAME:"not_found.",VIDEO_IMA_BRIDGE_FILE_NAME:"bridge_ima220305.html",SENTRY_RELEASE:"RLP-10487"};return i?"testing":t?"pre":"production"===e?"production":"dev"}},73592:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=53222==i.j?[{family:"Alegreya",variants:["regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"]},{family:"Alegreya SC",variants:["regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"]},{family:"Alegreya Sans",variants:["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"]},{family:"Alegreya Sans SC",variants:["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"]},{family:"Alice",variants:["regular"]},{family:"Amatic SC",variants:["regular","700"]},{family:"Andika",variants:["regular"]},{family:"Anonymous Pro",variants:["regular","italic","700","700italic"]},{family:"Arimo",variants:["regular","italic","700","700italic"]},{family:"Arsenal",variants:["regular","italic","700","700italic"]},{family:"Bad Script",variants:["regular"]},{family:"Caveat",variants:["regular","700"]},{family:"Comfortaa",variants:["300","regular","500","600","700"]},{family:"Cormorant",variants:["300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Cormorant Garamond",variants:["300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Cormorant Infant",variants:["300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Cormorant SC",variants:["300","regular","500","600","700"]},{family:"Cormorant Unicase",variants:["300","regular","500","600","700"]},{family:"Cousine",variants:["regular","italic","700","700italic"]},{family:"Cuprum",variants:["regular","italic","700","700italic"]},{family:"Didact Gothic",variants:["regular"]},{family:"EB Garamond",variants:["regular","500","600","700","800","italic","500italic","600italic","700italic","800italic"]},{family:"El Messiri",variants:["regular","500","600","700"]},{family:"Exo 2",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Fira Code",variants:["300","regular","500","600","700"]},{family:"Fira Mono",variants:["regular","500","700"]},{family:"Fira Sans",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Fira Sans Condensed",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Fira Sans Extra Condensed",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Forum",variants:["regular"]},{family:"Gabriela",variants:["regular"]},{family:"IBM Plex Mono",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"IBM Plex Sans",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"IBM Plex Serif",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Istok Web",variants:["regular","italic","700","700italic"]},{family:"Jura",variants:["300","regular","500","600","700"]},{family:"Kelly Slab",variants:["regular"]},{family:"Kosugi",variants:["regular"]},{family:"Kosugi Maru",variants:["regular"]},{family:"Kurale",variants:["regular"]},{family:"Ledger",variants:["regular"]},{family:"Literata",variants:["regular","500","600","700","italic","500italic","600italic","700italic"]},{family:"Lobster",variants:["regular"]},{family:"Lora",variants:["regular","italic","700","700italic"]},{family:"M PLUS 1p",variants:["100","300","regular","500","700","800","900"]},{family:"M PLUS Rounded 1c",variants:["100","300","regular","500","700","800","900"]},{family:"Marck Script",variants:["regular"]},{family:"Marmelad",variants:["regular"]},{family:"Merriweather",variants:["300","300italic","regular","italic","700","700italic","900","900italic"]},{family:"Montserrat",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Montserrat Alternates",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Neucha",variants:["regular"]},{family:"Noto Sans",variants:["regular","italic","700","700italic"]},{family:"Noto Sans SC",variants:["100","300","regular","500","700","900"]},{family:"Noto Serif",variants:["regular","italic","700","700italic"]},{family:"Noto Serif SC",variants:["200","300","regular","500","600","700","900"]},{family:"Noto Serif TC",variants:["200","300","regular","500","600","700","900"]},{family:"Nunito",variants:["200","200italic","300","300italic","regular","italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Old Standard TT",variants:["regular","italic","700"]},{family:"Open Sans",variants:["300","300italic","regular","italic","600","600italic","700","700italic","800","800italic"]},{family:"Open Sans Condensed",variants:["300","300italic","700"]},{family:"Oranienbaum",variants:["regular"]},{family:"Oswald",variants:["200","300","regular","500","600","700"]},{family:"PT Mono",variants:["regular"]},{family:"PT Sans",variants:["regular","italic","700","700italic"]},{family:"PT Sans Caption",variants:["regular","700"]},{family:"PT Sans Narrow",variants:["regular","700"]},{family:"PT Serif",variants:["regular","italic","700","700italic"]},{family:"PT Serif Caption",variants:["regular","italic"]},{family:"Pacifico",variants:["regular"]},{family:"Pangolin",variants:["regular"]},{family:"Pattaya",variants:["regular"]},{family:"Philosopher",variants:["regular","italic","700","700italic"]},{family:"Play",variants:["regular","700"]},{family:"Playfair Display",variants:["regular","italic","700","700italic","900","900italic"]},{family:"Playfair Display SC",variants:["regular","italic","700","700italic","900","900italic"]},{family:"Podkova",variants:["regular","500","600","700","800"]},{family:"Poiret One",variants:["regular"]},{family:"Prata",variants:["regular"]},{family:"Press Start 2P",variants:["regular"]},{family:"Prosto One",variants:["regular"]},{family:"Roboto",variants:["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic","900","900italic"]},{family:"Roboto Condensed",variants:["300","300italic","regular","italic","700","700italic"]},{family:"Roboto Mono",variants:["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic"]},{family:"Roboto Slab",variants:["100","200","300","regular","500","600","700","800","900"]},{family:"Rubik",variants:["300","300italic","regular","italic","500","500italic","700","700italic","900","900italic"]},{family:"Rubik Mono One",variants:["regular"]},{family:"Ruslan Display",variants:["regular"]},{family:"Russo One",variants:["regular"]},{family:"Sawarabi Gothic",variants:["regular"]},{family:"Scada",variants:["regular","italic","700","700italic"]},{family:"Seymour One",variants:["regular"]},{family:"Source Code Pro",variants:["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","900","900italic"]},{family:"Source Sans Pro",variants:["200","200italic","300","300italic","regular","italic","600","600italic","700","700italic","900","900italic"]},{family:"Spectral",variants:["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"]},{family:"Spectral SC",variants:["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"]},{family:"Stalinist One",variants:["regular"]},{family:"Tenor Sans",variants:["regular"]},{family:"Tinos",variants:["regular","italic","700","700italic"]},{family:"Ubuntu",variants:["300","300italic","regular","italic","500","500italic","700","700italic"]},{family:"Ubuntu Condensed",variants:["regular"]},{family:"Ubuntu Mono",variants:["regular","italic","700","700italic"]},{family:"Underdog",variants:["regular"]},{family:"Vollkorn",variants:["regular","italic","600","600italic","700","700italic","900","900italic"]},{family:"Vollkorn SC",variants:["regular","600","700","900"]},{family:"Yanone Kaffeesatz",variants:["200","300","regular","700"]},{family:"Yeseva One",variants:["regular"]}]:null},33130:(e,t,i)=>{"use strict";i.d(t,{c:()=>r,j:()=>n});const n=e=>/^(https?:)?\/\/.+\..{2,}/i.test(e),r=e=>{let{adMark:t,type:i}=e;return"show"===t||"hide"!==t&&"promo"!==i}},6678:(e,t,i)=>{"use strict";i.d(t,{O:()=>n});const n=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);let i=parseInt(t[1],16),n=parseInt(t[2],16),r=parseInt(t[3],16);i/=255,n/=255,r/=255;const o=Math.max(i,n,r),s=Math.min(i,n,r);let l,a,c=(o+s)/2;if(o===s)l=0,a=0;else{const e=o-s;switch(a=c>.5?e/(2-o-s):e/(o+s),o){case i:l=(n-r)/e+(n<r?6:0);break;case n:l=(r-i)/e+2;break;case r:l=(i-n)/e+4}l/=6}return a*=100,a=Math.round(a),c*=100,c=Math.round(c),l=Math.round(360*l),{h:l,s:a,l:c}}},34308:(e,t,i)=>{"use strict";if(i.d(t,{Ml:()=>l,fM:()=>s,t4:()=>o}),24866!=i.j)var n=i(13844);function r(e){return new Promise(((t,i)=>{const r=document.createElement("img");r.crossOrigin="anonymous",r.onload=function(){t(r)},r.onerror=function(t){(0,n.Z)("Image loading error: ",e,t),i(r)},r.src=function(e){try{const t=new URL(e);return t.searchParams.set("relap_colorized_plates",`${Date.now()}`),t.toString()}catch(e){return null}}(e)||e}))}function o(e){return r(e).then((e=>{try{const t=function(e){const t=document.createElement("canvas"),i=t.getContext&&t.getContext("2d");return i?(t.height=e.naturalHeight||e.offsetHeight||e.height,t.width=e.naturalWidth||e.offsetWidth||e.width,i.drawImage(e,0,0),i.getImageData(0,0,t.width,t.height).data):null}(e);return t?function(e){const{length:t}=e;let i=0,n=0,r=0,o=0;for(let s=0;s<t;s+=16)++o,i+=e[s],n+=e[s+1],r+=e[s+2];return i=Math.floor(i/o),n=Math.floor(n/o),r=Math.floor(r/o),{r:i,g:n,b:r}}(t):null}catch(e){return(0,n.Z)(e),null}}))}function s(e,t){let{r:i,g:n,b:r}=e;return"number"==typeof t?`rgb(${i}, ${n}, ${r}, ${t})`:`rgb(${i}, ${n}, ${r})`}function l(e){let{r:t,g:i,b:n}=e;return Math.round((299*t+587*i+114*n)/1e3)>128?"light":"dark"}},21714:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(30236),r=i.n(n);function o(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r()(...t,((e,t,i)=>{if("conditionals"===i)return(e||[]).concat(t)}))}},81504:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=24866!=i.j?(e,t)=>e>9&&e<20||e%10>4||e%10==0?t[2]:e%10>1&&e%10<5?t[1]:t[0]:null},69906:(e,t,i)=>{"use strict";i.d(t,{o:()=>s});var n=i(69724),r=i(39381);const o=24866!=i.j?"https://relap.mail.ru/api/v7/metrics":null,s=e=>{const t=(Array.isArray(e)?e:[e]).reduce(((e,t)=>{let{rootPath:i="frontend",type:n="count",path:r,value:o=1}=t;return{...e,[`${n}.${i}.${r}`]:o}}),{});fetch((0,r.jk)(o),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch((e=>{(0,n.L)("Failed at Send metrics to Graphite",e,{"fetch.fail.method":"POST"},{RequestPayload:t})}))}},69724:(e,t,i)=>{"use strict";i.d(t,{L:()=>s});var n=i(76081);const r=/[^.,?!\\+\-a-zA-Z0-9 _\\"}\]{[:]/gi,o=(e,t)=>`{"event_id":"${t}"}\n{"type":"attachment","length":${e.length},"filename":"ext_data.json"}\n${e}`,s=(e,t,i,s,l)=>{const a=window;a.sentryExceptions=a.sentryExceptions||[],a.sentryExceptions.push([new Error(e),a=>{var c;return l&&a.addEventProcessor((c=l,e=>(fetch(n.Z.envelopeEndpoint,{method:"POST",body:o(JSON.stringify(c).replace(r,""),e.event_id)}).catch((()=>{})),e))),a.setTags({...i,"originalException.name":t.name,"originalException.message":t.message}),Object.entries(s).forEach((e=>{let[t,i]=e;a.setContext(t,i)})),a.setFingerprint(["{{ default }}",e]),a}])}},49849:(e,t,i)=>{"use strict";i.d(t,{aJ:()=>r,il:()=>n});const n=24866!=i.j?["video_thumbnail","video_custom"]:null,r=e=>((e,t)=>e.flat().some((e=>{return i=e.filters,n=t,i.some((e=>n.includes(e)));var i,n})))(e,n)},96358:(e,t,i)=>{"use strict";i.d(t,{w:()=>d});var n=i(24678),r=i(69724);window.relapSendStorageAvailability=window.relapSendStorageAvailability||(e=>{let t,i=!1;return function(){return i||(t=e(...arguments),i=!0),t}})((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];window.metricsQueue=window.metricsQueue||[],window.metricsQueue.push([{rootPath:"health",path:"events.perform.debug.frontend_storage."+(e?"success":"fail")}])}));const o=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];clearTimeout(e),window.relapSendStorageAvailability(t)},s=(e,t)=>setTimeout((()=>{window.relapSendStorageAvailability(!1),(0,r.L)("Web Storage Error",new Error("timeout access to storages"),{"webstorage.error":"all"}),e(t)}),500),l=e=>{let{key:t,accessTimeoutID:i,returnFunc:n=(()=>{}),returnValue:s}=e;(0,r.L)("Web Storage Error",new Error(`${t} value not stored in IndexedDB and localStorage`),{"webstorage.error":"all"}),o(i,!1),n(s)};let a;function c(){return a||(a=(0,n.MT)("rdb","cache")),a}const d={get:e=>{let{key:t,valueIfNotExist:i,fallbackValue:a,validate:d=(()=>!0)}=e;const u=e=>(!e||!d(e))&&i;return new Promise((e=>{const d=s(e,a);try{const n=localStorage.getItem(t);u(n)?(localStorage.setItem(t,i),e(i)):e(n),o(d)}catch(s){o(d,!1),(0,r.L)("Web Storage Error",new Error(`${t} value not stored in localStorage`),{"webstorage.error":"localstorage"});const h=c();(0,n.U2)(t,h).then((r=>{u(r)&&(0,n.t8)(t,i),e(r||i)})).catch((()=>{l({key:t,accessTimeoutID:d,returnFunc:e,returnValue:a})}))}}))},set:e=>{let{key:t,value:i}=e;return new Promise(((e,a)=>{const d=s(a);try{localStorage.setItem(t,i),o(d),e()}catch(o){(0,r.L)("Web Storage Error",new Error(`${t} value not stored in localStorage`),{"webstorage.error":"localstorage"});const s=c();(0,n.t8)(t,i,s).then((()=>{e()})).catch((()=>{l({key:t,accessTimeoutID:d,returnFunc:a})}))}}))}}},2575:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});class n extends Error{constructor(e,t){super(e),this.name="RelapWidgetError",this.message=e,t&&t instanceof Error&&(this.message+=`\nOriginal Error Name: ${t.name}`,this.message+=`\nOriginal Error Message: ${t.message}`)}}const r=n},82288:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={footerPlates:{id:"footer_plates",role:"normal",payload:{name:"Стандартный",type:"standard",preset:"footerPlates"}},footerStrings:{id:"footer_strings",role:"normal",payload:{name:"Виджет-список",type:"standard",preset:"footerStrings"}},sidePlates:{id:"side_plates",role:"normal",payload:{name:"Боковой",type:"standard",preset:"sidePlates"}},side300x250Plates:{id:"side300x250_plates",role:"normal",payload:{name:"Боковой 300х250",type:"standard",preset:"side300x250Plates"}},sideStrings:{id:"side_strings",role:"normal",payload:{name:"Боковой список",type:"standard",preset:"sideStrings"}},sliderPlates:{id:"slider_plates",role:"normal",payload:{name:"Слайдер",type:"slider",preset:"sliderPlates"}},sliderStrings:{id:"slider_strings",role:"normal",payload:{name:"Слайдер-список",type:"slider",preset:"sliderStrings"}},sliderWidePlates:{id:"slider_wide_plates",role:"normal",payload:{name:"Широкий слайдер",type:"slider",preset:"sliderWidePlates"}},sliderFullscreenWidePlates:{id:"slider_fullscreen_wide_plates",role:"normal",payload:{name:"Fullscreen",type:"slider",preset:"sliderFullscreenWidePlates"}},inlinePlates:{id:"inline_plates",role:"normal",payload:{name:"Инлайн",type:"standard",preset:"inlinePlates"}},inlineStrings:{id:"inline_strings",role:"normal",payload:{name:"Инлайн-список",type:"standard",preset:"inlineStrings"}},inlineWidePlates:{id:"inline_wide_plates",role:"normal",payload:{name:"Широкий инлайн",type:"standard",preset:"inlineWidePlates"}},formWidePlates:{id:"form_wide_plates",role:"form",payload:{name:"Широкий инлайн",type:"standard",preset:"formWidePlates"}},imgOverlay:{id:"img_overlay",role:"normal",payload:{name:"Поверх картинки",type:"overlay",preset:"imgOverlay"},allowOnlyWithRights:"admin"},compositeFooterPlates:{id:"composite_footer_plates",role:"normal",payload:{name:"Композитный",type:"standard",preset:"compositeFooterPlates"},allowOnlyWithRights:"admin"}}}}]);