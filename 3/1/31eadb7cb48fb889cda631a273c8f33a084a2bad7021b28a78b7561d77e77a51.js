
var StringTool;
(function(p){p.escapeHtml=var q;(function(f){f.encodeToUtf8=
f.encodeToUtf8Bytes=function(d){if(void 0===d||null===d)return[];d=d.replace(/\r\n/g,"\n");for(var c=[],b=0;b<d.length;b++){var a=d.charCodeAt(b);if(55296<=a&&56319>=a){var e=d.charCodeAt(b+1);56320<=e&&57343>=e&&(a=((a&1023)<<10)+(e&1023)+65536,b++)}128>a?c.push(a):(2048>a?c.push(a>>6|192):(65536>a?c.push(a>>12|224):(2097152>a?c.push(a>>18|240):(67108864>a?c.push(a>>24|248):(c.push(a>>30|252),c.push(a>>24&63|128)),c.push(a>>18&63|128)),c.push(a>>12&63|128)),c.push(a>>6&63|128)),c.push(a&63|128))}return c};
f.decodeFromUtf8Bytes=function(d){var c="",b=0;var a="fromCodePoint"in String?String.fromCodePoint:String.fromCharCode;for(;b<d.length;){var e=d[b++];if(128>e)c+=String.fromCharCode(e);else if(192===(e&224)){var l=d[b++];c+=String.fromCharCode((e&31)<<6|l&63)}else if(224===(e&240)){l=d[b++];var g=d[b++];c+=String.fromCharCode((e&15)<<12|(l&63)<<6|g&63)}else if(240===(e&248)){l=d[b++];g=d[b++];var m=d[b++];c+=a((e&7)<<18|(l&63)<<12|(g&63)<<6|m&63)}else if(248===(e&252)){l=d[b++];g=d[b++];m=d[b++];
var h=d[b++];c+=String.fromCharCode((e&3)<<24|(l&63)<<18|(g&63)<<12|(m&63)<<6|h&63)}else if(252===(e&254)){l=d[b++];g=d[b++];m=d[b++];h=d[b++];var n=d[b++];c+=String.fromCharCode((e&1)<<30|(l&63)<<24|(g&63)<<18|(m&63)<<12|(h&63)<<6|n&63)}}return c};f.decodeFromUtf8=function(d){for(var c="",b=0,a,e,l,g;b<d.length;)a=d.charCodeAt(b),128>a?(c+=String.fromCharCode(a),b++):192===(a&224)?(e=d.charCodeAt(b+1),c+=String.fromCharCode((a&31)<<6|e&63),b+=2):224===(a&240)?(e=d.charCodeAt(b+1),l=d.charCodeAt(b+
2),c+=String.fromCharCode((a&15)<<12|(e&63)<<6|l&63),b+=3):(e=d.charCodeAt(b+1),l=d.charCodeAt(b+2),g=d.charCodeAt(b+3),c+=String.fromCharCode((a&7)<<18|(e&63)<<12|(l&63)<<6|g&63),b+=4);return c}})(q=p.Utf8||(p.Utf8={}));(function(f){function d(a){if(96===(a&96))return a-71;if(64===(a&64))return a-65;if(61===a)return 64;if(48===(a&48))return a+4;if(43===a)return 62;if(47===a)return 63;throw Error("Charcode invalid: "+a);}function c(a){for(var d="",b,c,m,h,n,k,f=0;f<a.length;)b=a[f++],c=a[f++],m=a[f++],
h=b>>2,b=(b&3)<<4|c>>4,n=(c&15)<<2|m>>6,k=m&63,void 0===c?n=k=64:void 0===m&&(k=64),d=d+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k);return d}function b(a){for(var b=[],c,g,m,h,f,k=0;k<a.length;)c=d(a.charCodeAt(k++)),g=d(a.charCodeAt(k++)),
h=d(a.charCodeAt(k++)),f=d(a.charCodeAt(k++)),c=c<<2|g>>4,g=(g&15)<<4|h>>2,m=(h&3)<<6|f,b.push(c),64!=h&&b.push(g),64!=f&&b.push(m);return b}f.encodeToBase64Bytes=c;f.encodeToBase64=function(a,d){var b="";d||(a=q.encodeToUtf8(a));for(var c=0;c<a.length;){var e=a.charCodeAt(c++);var f=a.charCodeAt(c++);var n=a.charCodeAt(c++);var k=e>>2;e=(e&3)<<4|f>>4;var p=(f&15)<<2|n>>6;var r=n&63;isNaN(f)?p=r=64:isNaN(n)&&(r=64);b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r)}return b};f.decodeFromBase64Byte=b;f.decodeFromBase64=function(a,b){var c="",e=0;for(a=a.replace(/[^A-Za-z0-9\+\/=]/g,"");e<a.length;){var f=d(a.charCodeAt(e++));var h=d(a.charCodeAt(e++));var n=d(a.charCodeAt(e++));var k=d(a.charCodeAt(e++));f=f<<2|h>>4;h=(h&15)<<4|
n>>2;var p=(n&3)<<6|k;c+=String.fromCharCode(f);64!=n&&(c+=String.fromCharCode(h));64!=k&&(c+=String.fromCharCode(p))}return b?c:q.decodeFromUtf8(c)};f.encodeToBase64Raw=function(a){return void 0===a||null===a?a:c(q.encodeToUtf8Bytes(a))};f.decodeFromBase64Raw=function(a){return void 0===a||null===a?a:q.decodeFromUtf8Bytes(b(a))}})(p.Base64||(p.Base64={}))})(StringTool||(StringTool={}));
var Core;
(function(e){function h(c){if(null==c||"object"!=typeof c)return c;if(c instanceof Date){var d=new Date;d.setTime(c.getTime());return d}if(c instanceof Array){d=[];for(var b=0,a=c.length;b<a;b++)d[b]=h(c[b]);return d}if(c instanceof Object){d={};for(b in c)c.hasOwnProperty(b)&&(d[b]=h(c[b]));return d}throw Error("Unable to copy obj! Its type isn't supported.");}e.MSG_INTERNAL_ERROR="Internal error";(function(c){function d(b){if("content"in b)return{code:0,msg:"No error found"};if(!b)return{code:1,msg:e.MSG_INTERNAL_ERROR};
if(!("error"in b))return{code:2,msg:e.MSG_INTERNAL_ERROR};b=b.error;var a={code:3,msg:e.MSG_INTERNAL_ERROR};b&&("code"in b&&(a.code=b.code),"msg"in b&&(a.msg=b.msg),"extra"in b&&(a.extra=b.extra));return a}c.dateLastSuccess=new Date;c.post=function(b,a,k){void 0===a&&(a=null);void 0===k&&(k=!0);a&&"object"===typeof a&&(a.csrfProtectionToken=ToolApp.getCsrfProtectionToken(),ToolApp.userInfo&&"authPayload"in ToolApp.userInfo&&ToolApp.userInfo.authPayload&&(a.authPayload=ToolApp.userInfo.authPayload));
200>b.length&&1<b.indexOf("?")&&(b=b+"&x-windowId="+encodeURIComponent(ToolBroadcast.windowIdGet()));var f=0===b.indexOf("/err0r/")?b:0===b.indexOf("/performerAction/filterStats")?b:Application.Config.url.root+b;a=$.ajax({type:"post",dataType:"json",data:a,url:f});var h=new Date;f=a.then(function(a){if(!(a&&"content"in a)){var g=$.Deferred();g.reject(d(a));return g}c.dateLastSuccess=new Date;g=c.dateLastSuccess.getTime()-h.getTime();if(k&&1500<g&&"onerror"in window&&"JSON"in window&&(g={durationMs:g,
isAjax:1,path:b},null!==window.onerror))window.onerror("[debugOnlyNotCritical][RUM] "+JSON.stringify(g));return a.content},function(a){var c=a.getResponseHeader("content-type"),d=(new Date).getTime()-h.getTime();if(k&&1E3<d&&"onerror"in window&&"JSON"in window&&(d={isError:1,durationMs:d,path:b,isAjax:1,httpCode:a.status,contentType:c,statusText:a.statusText},null!==window.onerror))window.onerror("[debugOnlyNotCritical][RUM] "+JSON.stringify(d));if(("application/json"===c||"text/json"===c)&&"JSON"in
window)try{var f=JSON.parse(a.responseText);if("error"in f&&f.error){var l=f.error;if("code"in l&&0<l.code){var m=$.Deferred();m.reject(l);return m}}}catch(n){a={code:9,msg:e.MSG_INTERNAL_ERROR};if(n&&"onerror"in window&&window.onerror)window.onerror("AjaxError: "+n.toString(),document.location.href,1,1);c=$.Deferred();c.reject(a);return c}c={code:0,msg:e.MSG_INTERNAL_ERROR};c.code=500==a.status?4:200==a.status?5:"abort"==a.statusText?7:500<a.status&&600>a.status?8:6;a=$.Deferred();a.reject(c);return a});
f.jqXHR=a;return f}})(e.Ajax||(e.Ajax={}));e.clone=h;e.bootstrap=function(){ToolApp.mainBefore();var c=!1;if("onDocumentReady"in Application){for(var d=Application.onDocumentReady,b=d.split(/\./),a=window,e=void 0;e=b.shift();){if(void 0===a){if(window.onerror)window.onerror("Failed to load bootstrap: "+d);break}if(e in a)a=a[e];else{a=null;break}}"function"===typeof a&&(window.setTimeout(1),c=!0)}c||ToolApp.mainAfter()}})(Core||(Core={}));
var Core;
(function(h){var k=function(){function b(a){this.eventListBefore={};this.eventListAfter={};this.eventList={};this.eventListened={};this.logIdStr=""}b.prototype.logEvent=function(a,d){};b.prototype.logSetId=b.prototype.log=function(a){};b.prototype.notice=function(a){};b.prototype.warn=function(a){};b.prototype.error=function(a){};b.prototype.destroy=b.prototype.observerClearAll=function(){this.fireListener&&this.fireListener.removeAllContext(this);
this.fireListener=void 0;this.eventListBefore={};this.eventListAfter={};this.eventList={}};b.prototype.removeAllContext=function(a){this.removeContextFromList(a,this.eventListBefore);this.removeContextFromList(a,this.eventList);this.removeContextFromList(a,this.eventListAfter)};b.prototype.removeContextFromList=function(a,d){for(var b in d)for(var c=d[b].length;c--;)d[b][c][1]===a&&this.eventList[b].splice(c,1)};b.prototype.fire=function(a){for(var b=1;b<arguments.length;b++);if(this.fireListener)return 1<
arguments.length?(b=Array.prototype.slice.call(arguments,0),this.fireListener.fire.apply(this.fireListener,b)):this.fireListener.fire(a);b=a in this.eventList;var f=a in this.eventListBefore,c=a in this.eventListAfter;if(b||f||c){this.logEvent(a,"fire");var e=Array.prototype.slice.call(arguments,1);e.unshift(this);f&&this.forward(this.eventListBefore[a],e)||b&&this.forward(this.eventList[a],e)||c&&this.forward(this.eventListAfter[a],e)}};b.prototype.forward=function(a,b){for(var d=a.length,c=!1;d--;){var e=
0,g=a[d];g[2]&&("delay"in g[2]&&(e=g[2].delay),"once"in g[2]&&a.splice(d,1));g[1]?e?window.setTimeout(function(){},e):c=g[0].apply(g[1],b):e?window.setTimeout(function(){},e):c=g[0].apply(this,b);if(c)return c}return!1};b.prototype.registerEventName=function(a,d,f,c,e){d=[d,f,c];switch(e){case b.EVENT_BEFORE:a in this.eventListBefore||(this.eventListBefore[a]=[]);this.eventListBefore[a].push(d);break;case b.EVENT_AFTER:a in this.eventListAfter||(this.eventListAfter[a]=[]);this.eventListAfter[a].push(d);
break;default:a in this.eventList||(this.eventList[a]=[]),this.eventList[a].push(d)}this.eventListened[a]=!0};b.prototype.on=b.prototype.onBefore=function(a,d,f,c){this.registerEventName(a,d,f,c,b.EVENT_BEFORE)};b.prototype.onAfter=function(a,d,f,c){this.registerEventName(a,d,f,c,b.EVENT_AFTER)};b.EVENT_BEFORE=1;b.EVENT_AFTER=2;return b}();h.Listener=k})(Core||(Core={}));

var __extends=this&&this.__extends||function(){var h=function(g,d){h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(b[f]=c[f])};return h(g,d)};return function(g,d){function b(){this.constructor=g}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");h(g,d);g.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}}(),
VrApi;
(function(h){var g=function(d){function b(){return d.call(this)||this}__extends(b,d);b.prototype.performerList=function(c,f,e,a,b){return new Promise(function(k,l){return ModuleOnline.Ajax.onlineList(c,f,e,a,b).then(function(a){k(a)},function(a){l(a)})})};b.prototype.chatRoom=function(c){return new Promise(function(f,e){return ModuleChat.Ajax.roomRtmp(c,5).then(function(a){f(a)},function(a){e(a)})})};b.prototype.tip=function(c,f,e,a){void 0===e&&(e=0);void 0===a&&(a=0);return new Promise(function(b,d){return ToolPerformer.Ajax.tip(c,
f,e,a).then(function(a){b(a)},function(a){d(a)})})};b.prototype.tipActionPanel=function(c,f,b,a,d){void 0===a&&(a=0);void 0===d&&(d=0);return new Promise(function(e,k){return ToolPerformer.Ajax.tipActionPanel(c,f,a,b,d).then(function(a){e(a)},function(a){k(a)})})};b.prototype.love=function(c){return new Promise(function(b,e){return ToolPerformer.Ajax.loveAdd(c).then(function(a){b(a)},function(a){e(a)})})};b.prototype.favoriteAdd=function(b){return new Promise(function(c,e){return ToolPerformer.Ajax.favoriteAdd(b).then(function(a){c(a)},
function(a){e(a)})})};b.prototype.favoriteRemove=function(b){return new Promise(function(c,e){return ToolPerformer.Ajax.favoriteRemove(b).then(function(a){c(a)},function(a){e(a)})})};b.prototype.showRating=function(b,f,e,a){return new Promise(function(c,d){ToolPerformer.Ajax.showRating(b,f,e,a).then(function(a){c(a)},function(a){d(a)})})};b.prototype.speechToTextPredict=function(b,d){return new Promise(function(c,a){ToolPerformer.Ajax.speechToTextPredict(b,d).then(function(a){c(a)},function(b){a(b)})})};
b.prototype.amountWithCurrencyRender=function(b){return new Promise(function(c,d){ToolMisc.Ajax.amountWithCurrencyRender(b).then(function(a){c(a)},function(a){d(a)})})};b.prototype.messageOffensiveCheck=function(b,d,e,a,g){return new Promise(function(c,f){ToolChat.Ajax.messageOffensiveCheck(b,d,e,a,g).then(function(a){c(a)},function(a){f(a)})})};return b}(Core.Listener);h.XLoveCam=g})(VrApi||(VrApi={}));
var Translation;
(function(a){function e(b,f,c){if(!(b in g))return b;b=g[b];if(f&&"object"==typeof f){c=c&&"escape"in c?c.escape:!0;for(var d in f)if(f.hasOwnProperty(d)){var a=f[d];c&&(a=StringTool.escapeHtml(a));d=d.match(/^[a-zA-Z]/)?"#"+d+"#":""+d;b="undefined"!==typeof b.replaceAll?b.replaceAll(""+d,a):b.split(""+d).join(a)}}return b}var g={};a.load=function(b){if(b)for(var a in b)b.hasOwnProperty(a)&&(g[a]=b[a])};a.tr=e;a.trNumber=function(a,f,c,d){void 0===c&&(c={});c["#NUMBER#"]=f;return e(a,c,d)}})(Translation||
(Translation={}));(function(){var a=document.getElementById("translation-data");if(a){if("textContent"in a)var e=a.textContent;else(e=jQuery(a).text())||(e=jQuery(a).html());e&&("jQuery"in window?Translation.load(jQuery.parseJSON(e)):Translation.load(JSON.parse(e)))}})();
var __extends=this&&this.__extends||function(){var f=function(d,c){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])};return f(d,c)};return function(d,c){function a(){this.constructor=d}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");f(d,c);d.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)}}(),
ModuleMenu;
(function(f){var d=function(c){function a(b,e){var a=c.call(this)||this;a.domId=b;a.jDomId=$("#"+b);a.domIdOverlay=e;a.groupCollapseOnClick=!0;a.alwaysVisible=!1;a.setupEvent();return a}__extends(a,c);a.prototype.groupCollapse=function(b){var a=this;if(0!=b.length){var c=function(b){var e=$(".action-switch",b);!e.length||b.hasClass("item-accordeon-always-expanded")&&a.alwaysVisible||(b.removeClass("is-visible"),e.html("+"))};if(1==b.length)c(b);else for(var d=0;d<b.length;d++){var g=$(b.get(d));c(g)}}};
a.prototype.groupExpand=function(b){b.addClass("is-visible");$(".action-switch",b).html("\u2212")};a.prototype.groupCollapseAll=function(){var b=this;$("#"+this.domId+" > ul.group-accordeon li.item-accordeon").each(function(a){a=$(this);b.groupCollapse(a)})};a.prototype.setupEvent=function(){var b=this;this.domIdOverlay&&$("#"+this.domIdOverlay).bind("click",function(){b.hide()});$("#"+this.domId+" > ul.group-accordeon").bind("click",function(a){if(a.target){var e=$(this),c=$(a.target),d=c.closest(".item-accordeon");
d.length&&(d.hasClass("is-visible")?b.groupCollapseOnClick?b.groupCollapse($(".item-accordeon",e)):0==c.closest(".jq-accordeon-content").length&&b.groupCollapse($(".item-accordeon",e)):(b.groupCollapse($(".item-accordeon",e)),b.groupExpand(d)),a.preventDefault(),a.stopPropagation(),b.fire("click",{target:c,item:void 0,group:d}))}});$("#"+this.domId+" li.item-solo").bind("click",function(a){if(a.target){var c=$(a.target);b.fire("click",{target:c,item:$(this),group:void 0});a.preventDefault();a.stopPropagation()}});
$(".js-action-menu-vip-credit-explain",this.jDomId).bind("click",;$("#"+this.domId).on("click",function(){b.hide()})};a.prototype.isOpen=a.prototype.toggle=function(){var a=$("#"+this.domId);a.toggleClass("is-visible");var c;this.domIdOverlay&&(c=$("#"+this.domIdOverlay));a.hasClass("is-visible")?(this.fire("open"),c&&c.show(),ToolMenu.setBackgroundScrollState(!1)):(this.fire("close"),
c&&c.hide(),ToolMenu.setBackgroundScrollState(!0))};a.prototype.element=function(){return this.jDomId};a.prototype.show=function(){$("#"+this.domId).addClass("is-visible");ToolMenu.setBackgroundScrollState(!1);this.domIdOverlay&&$("#"+this.domIdOverlay).show();this.fire("open")};a.prototype.hide=function(){this.alwaysVisible||($("#"+this.domId).removeClass("is-visible"),ToolMenu.setBackgroundScrollState(!0),this.domIdOverlay&&$("#"+this.domIdOverlay).hide(),this.fire("close"))};return a}(Core.Listener);
f.MenuManager=d})(ModuleMenu||(ModuleMenu={}));
var __extends=this&&this.__extends||function(){var c=function(e,d){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c])};return c(e,d)};return function(e,d){function b(){this.constructor=e}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");c(e,d);e.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}}(),
ModuleChatMenu;
(function(c){c.EVENT_ACTION="clickAction";c.LOVE="love";c.FAVORITE_ADD="favoriteAdd";c.FAVORITE_REMOVE="favoriteRemove";c.MESSAGING="messaging";c.TIP="tip";c.REPORT="report";c.GO_TO_LIST_ONLINE="goToListOnline";c.GO_TO_PROFILE="goToProfile";var e=function(d){function b(a){a=d.call(this,a)||this;a.performerId=0;a.nickname="";a.setupMenuEvent();return a}__extends(b,d);b.prototype.performerSetInfo=function(a,b){this.performerId=a;this.nickname=b;$(".js-performer-nickname",this.jDomId).html(b)};b.prototype.loveHide=
function(){$('li[data-action="love"]',this.jDomId).hide()};b.prototype.loveShow=function(){$('li[data-action="love"]',this.jDomId).show()};b.prototype.tipHide=function(){$('li[data-action="tip"]',this.jDomId).hide()};b.prototype.reportHide=function(){$('li[data-action="report"]',this.jDomId).hide()};b.prototype.performerGetInfo=b.prototype.favoriteSetCanAdd=function(a){a?($(".action-performer-favorite-add",this.jDomId).show(),
$(".action-performer-favorite-remove",this.jDomId).hide()):($(".action-performer-favorite-add",this.jDomId).hide(),$(".action-performer-favorite-remove",this.jDomId).show())};b.prototype.videoSetQuantity=function(a){var b=$(".action-performer-video-vip",this.jDomId);0<a.vip?b.show():b.hide()};b.prototype.videoSetUrl=function(a){a||(a="#no-url");$(".action-performer-video-vip a",this.jDomId).attr("href",a)};b.prototype.photoAndVideoSetUrl=function(a){a||(a="#no-url");$(".action-performer-photo-and-video a",
this.jDomId).attr("href",a)};b.prototype.reviewSetUrl=function(a){a||(a="#no-url");$(".action-performer-reviews a",this.jDomId).attr("href",a)};b.prototype.scheduleSetUrl=function(a){a||(a="#no-url");$(".action-performer-schedule a",this.jDomId).attr("href",a)};b.prototype.toggleScheduleLinkDisplay=function(a){a?$(".action-performer-schedule a",this.jDomId).show():$(".action-performer-schedule a",this.jDomId).hide()};b.prototype.profileSetUrl=function(a){$(".action-performer-profile a",this.jDomId).attr("href",
a)};b.prototype.setupMenuEvent=function(){var a=this;this.on("click",function(b,d){if(d.item){var e=d.item,f=e.attr("data-action");f&&(f===c.GO_TO_PROFILE?(e=e.find("a:first-child").attr("href"),a.fire(c.EVENT_ACTION,f,e)):a.fire(c.EVENT_ACTION,f))}})};return b}(ModuleMenu.MenuManager);c.ChatMenuManager=e})(ModuleChatMenu||(ModuleChatMenu={}));
var __extends=this&&this.__extends||function(){var c=function(e,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c])};return c(e,b)};return function(e,b){function d(){this.constructor=e}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");c(e,b);e.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}(),
ModuleChatBioMenu;
(function(c){c.EVENT_ACTION="clickAction";c.SCROLL_INTERVAL=500;c.SCROLL_INTERVAL_SIZE_ADJUSTMENT=3E3;var e=function(b){_extends(d,b);d.prototype.setupScheduleScrollEvent=function(){var a=$("#scheduleContentList").parent();if(a.length){var b=$(".js-link-schedule"),d=$("html"),e=$(".l-header").height(),f=a.offset().top,g=e+15;b.on("click",function(a){a.preventDefault();ToolMenu.hideAll();AppPerformerProfile.setupAnimateEvent(d,f,
g,c.SCROLL_INTERVAL,c.SCROLL_INTERVAL_SIZE_ADJUSTMENT);return!1});a=window.location;if(a.hash&&a.hash.length)switch(a.hash){case "#schedule":AppPerformerProfile.setupAnimateEvent(d,f,g,c.SCROLL_INTERVAL,c.SCROLL_INTERVAL_SIZE_ADJUSTMENT)}}};d.prototype.setupMenuTop=function(){var a=$(".breadcrumb");a.length&&(a=parseInt(a.css("min-height")),$(".jq-menu.bio-page",this.jDomId).css({"margin-top":a+"px"}));this.menuMarginTop=$(".jq-menu.bio-page",this.jDomId).css("margin-top")};d.prototype.getMenuMarginTop=
function(){return this.menuMarginTop};return d}(ModuleChatMenu.ChatMenuManager);c.ChatBioMenuManager=e})(ModuleChatBioMenu||(ModuleChatBioMenu={}));
var __extends=this&&this.__extends||function(){var e=function(f,b){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])};return e(f,b)};return function(f,b){function a(){this.constructor=f}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");e(f,b);f.prototype=null===b?Object.create(b):(a.prototype=b.prototype,new a)}}(),
ModuleFilterOnlineMobile;
(function(e){e.EVENT_ITEM_CHANGED="itemChanged";e.EVENT_DISPLAYED="eventDisplayed";var f=function(b){function a(a){var c=b.call(this)||this;c.filterSelected={};c.jElement=$(a);c.jLayoutOnline=$("#l-online");c.jLayoutHeader=$(".l-header");c._isOpen=!1;return c}__extends(a,b);a.prototype.resetFilterData=function(){this.filterSelected={}};a.prototype.setupEvent=function(){var a=this;this.jElement.unbind("click").bind("click",function(c){if(c.target){var d=$(c.target);if(d.hasClass("filter-reset"))a.fire(e.EVENT_ITEM_CHANGED,null);
else{d=d.closest("button");var b=d.attr("data-id");if(b){var g=b.match(/^([0-9]+)-([0-9]+)$/);if(g){b=parseInt(g[1],10);g=parseInt(g[2],10);if(0<b&&0<g)a.onButtonRemovedClicked(b,g,d);c.stopPropagation();c.preventDefault()}}}}})};a.prototype.refreshUiButtonSelected=function(){$(".button-filter-remove",this.jElement).html("");for(var a in this.filterSelected)this.uiButtonRemoveFilterAdd(a,this.filterSelected[a]);this.refreshUiButtonVisibility()};a.prototype.refreshUiButtonVisibility=function(){ToolBrowser.isMobile()&&
(this.isCountFilterEnabledGreaterThanZero()?this._isOpen||this.show():this.hide())};a.prototype.isCountFilterEnabledGreaterThanZero=function(){return 0<Object.keys(this.filterSelected).length};a.prototype.uiButtonRemoveFilterAdd=function(a,c){var d=$(".button-filter-remove",this.jElement);$("button[data-id="+a+"]",d).length||d.append('<button class="button" data-id="'+a+'">'+c+' <span class="remove-item">&times;</span></button> ')};a.prototype.init=function(){this.setupEvent();ToolBrowser.isMobile()?
this.refreshUiButtonSelected():this.isOpen()&&this.hide()};a.prototype.hide=function(){this._isOpen=!1;this.jElement.hasClass("isHidden")||(this.jElement.addClass("isHidden"),this.reset())};a.prototype.show=function(){this._isOpen=!0;this.jElement.removeClass("isHidden");this.resize();this.fire(e.EVENT_DISPLAYED)};a.prototype.reset=a.prototype.resize=function(){var a=this.jLayoutHeader.outerHeight(),c=this.jElement.outerHeight();
this.jLayoutOnline.css("padding-top",a+c)};a.prototype.isOpen=function(){return this._isOpen};a.prototype.fadeIn=function(){this.jElement.removeClass("state-hidden")};a.prototype.fadeOut=function(){this.jElement.addClass("state-hidden")};a.prototype.filterClear=a.prototype.onButtonRemovedClicked=function(a,c,b){b.remove();this.refreshUiButtonVisibility();this.fire(e.EVENT_ITEM_CHANGED,{filterId:a,itemId:c})};a.prototype.importFilterSelected=
function(a){if(0===Object.keys(a).length)this.filterClear();else{var c={},b;for(b in a)if(a.hasOwnProperty(b)){var d=a[b];if(0<d.length)for(var e=0;e<d.length;e++){var f=d[e],h=ToolMenu.online.getItemInfoFromId(parseInt(b),f);h&&(c[b+"-"+f]=h.title)}}this.filterSelected=c;this.refreshUiButtonSelected()}};return a}(Core.Listener);e.FilterManager=f})(ModuleFilterOnlineMobile||(ModuleFilterOnlineMobile={}));
var ModuleHeaderUi;
(function(e){function d(){c||(c=!0,b&&(clearTimeout(b),b=0),a.css("visibility","visible"),a.removeClass("state-hidden"),ToolApp.event.fire(ToolApp.EVENT_HEADER_DISPLAYED))}function f(){ToolMenu.hasOneMenuOpen()?d():c&&(c=!1,a.addClass("state-hidden"),b=setTimeout(1E3),ToolApp.event.fire(ToolApp.EVENT_HEADER_HIDDEN))}var a,c=!0,b=0;e.init=function(){$(".l-header-wrap").on("click",function(){ToolMenu.hasOneMenuOpen()&&ToolMenu.hideAll()});if(ToolBrowser.isMobile()&&
!a){c=!0;a=$(".l-header");var b=0;$(window).bind("scroll",function(a){a=$(window).scrollTop();a>b?150<a&&f():d();b=a})}}})(ModuleHeaderUi||(ModuleHeaderUi={}));
var __extends=this&&this.__extends||function(){var f=function(e,b){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c])};return f(e,b)};return function(e,b){function d(){this.constructor=e}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");f(e,b);e.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}(),
ModuleMediaMenu;
(function(f){var e=function(b){function d(a){a=b.call(this,a)||this;a.hasEnteredMenu=!1;a.closeTimeout=0;a.setupMenuEvent();return a}__extends(d,b);d.prototype.resize=function(){};d.prototype.calculateOffset=function(){var a=$(".action-media");if(a.length){for(var c=void 0,b=0;b<a.length&&!(c=a.get(b).getBoundingClientRect(),0<c.left);b++);!c||0>=c.left||(a=ToolBrowser.viewPortSize(),document.documentElement&&"clientWidth"in document.documentElement&&0<document.documentElement.clientWidth&&(a.width=
document.documentElement.clientWidth),c=Math.ceil(c.left),c+310>=a.width&&(c=Math.ceil(a.width-311)),$(this.jDomId).css("margin-left",c+"px"))}};d.prototype.setupMenuEvent=function(){var a=this,b=$(".action-media");if(b.length){var d=$("ul.jq-menu",this.jDomId);d.bind("mouseenter",function(){a.hasEnteredMenu=!0;a.closeTimeout&&(clearTimeout(a.closeTimeout),a.closeTimeout=0)});d.bind("mouseleave",;b.bind("mouseenter",function(b){a.isOpen()?a.closeTimeout&&(clearTimeout(a.closeTimeout),a.closeTimeout=0):(b.preventDefault(),b.stopPropagation())});b.bind("mouseleave",function(b){a.isOpen()&&(a.closeTimeout&&clearTimeout(a.closeTimeout),a.closeTimeout=setTimeout(function(){a.hide()},12E4))});b.bind("click",function(b){a.isOpen()?(a.closeTimeout&&clearTimeout(a.closeTimeout),a.hide()):a.show();b.preventDefault();b.stopPropagation()});$(window).on("resize",function(){var b=a.isOpen();b&&
a.calculateOffset();b&&992>window.innerWidth&&(a.closeTimeout&&clearTimeout(a.closeTimeout),a.hide())});$(window).on("mousedown",function(b){b.target&&0===$(b.target).parents("#sidebar-media").length&&a.isOpen()&&a.hide()})}};d.prototype.show=function(){var a=this;this.hasEnteredMenu=!1;var c=[ToolMenu.user,ToolMenu.online,ToolMenu.chat,ToolMenu.chatBio];ToolMenu.hasOneMenuOpen()&&c.forEach(function(a){a&&a.isOpen()&&a.hide()});this.closeTimeout&&clearTimeout(this.closeTimeout);this.closeTimeout=
setTimeout(12E4);this.calculateOffset();b.prototype.show.call(this)};return d}(ModuleMenu.MenuManager);f.MediaMenuManager=e})(ModuleMediaMenu||(ModuleMediaMenu={}));
var __extends=this&&this.__extends||function(){var e=function(k,g){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,c){e.__proto__=c}||function(e,c){for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a])};return e(k,g)};return function(k,g){function h(){this.constructor=k}if("function"!==typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");e(k,g);k.prototype=null===g?Object.create(g):(h.prototype=g.prototype,new h)}}(),
ModuleOnlineMenu;
(function(e){e.EVENT_ITEM_CHANGED="itemChanged";e.EVENT_PREVISUALISATION_SWITCH="previsualisationClick";e.EVENT_GRID_DISPLAY_SIZE="gridDisplaySizeClick";var k=function(h){function c(a,b,d,c,l,e,g){var f=h.call(this,a)||this;f.filterData=b;f.filterStatLastUpdate=new Date;f.filterStatLastUpdate.setFullYear(2015);f.filterStatUpdateLock=0;d.constructor===Array&&(d={});f.filterSelected=d;f.filterSelectedBackupData={};f.sortData=c;f.sortSelected=l;f.configOnlyOneItemPerFilter=!1;f.configClickForceAddInsteadOfToggle=!1;
f.configFilterOnlyOneItem=[903];f.jButtonRemoveGroup=$("#"+a+" .button-filter-remove");f.buttonGroupRemoveUsed=!0;f.nicknameSearchLastContent="";f.favoritePageEnabled=e;f.recentPageEnabled=g;f.vipSubscriptionPageEnabled=!1;f.onlineListCurrentCellSize={height:320,width:240};f.onlineListNbCellPerLine=2;f.onlineListWidth=480;return f}__extends(c,h);c.prototype.setupEventAndUi=c.prototype.setupMoreFilter=
function(){var a=$("#"+this.domId+" li.js-more-filter-item");if(0==a.length)this.filterDisplayAll();else for(var b=0;b<a.length;b++)if($(a[b]).attr("data-id")in this.filterSelected){this.filterDisplayAll();break}};c.prototype.nicknameLoaderShow=function(){$("#"+this.domId+" .nickname-state .not-found").hide();$("#"+this.domId+" .nickname-state").show();$("#"+this.domId+" .nickname-state .loading").show()};c.prototype.hide=c.prototype.groupCollapse=
function(a){h.prototype.groupCollapse.call(this,a);this.alwaysVisible&&this.resizeMenu()};c.prototype.groupExpand=function(a){h.prototype.groupExpand.call(this,a);this.alwaysVisible&&this.resizeMenu()};c.prototype.groupExpandById=function(a){this.groupCollapseAll();a=$("li.item-accordeon[data-id="+a.toString(10)+"]");this.groupExpand(a)};c.prototype.nicknameInfoHide=c.prototype.nicknameNoResult=function(){$("#"+this.domId+" .nickname-state .loading").hide();
$("#"+this.domId+" .nickname-state").show();$("#"+this.domId+" .nickname-state .not-found").show()};c.prototype.filterStatShouldBeUpdated=function(){return 18E4<=(new Date).getTime()-this.filterStatLastUpdate.getTime()};c.prototype.setStateLiveCamPreview=function(a){a?($(".action-previsualisation-show").hide(),$(".action-previsualisation-hide").show()):($(".action-previsualisation-show").show(),$(".action-previsualisation-hide").hide())};c.prototype.cellSizeSet=function(a,b,d){0>=a.width||(this.onlineListCurrentCellSize=
a,this.onlineListNbCellPerLine=b,this.onlineListWidth=d,this.resizeMenu())};c.prototype.displayAlwaysVisible=function(){if(!this.alwaysVisible){var a=document.getElementById("online-list-menu-inline"),b=document.getElementById("sidebar-online");if(b&&a){this.hide();this.alwaysVisible=!0;for($("#"+this.domId+" .js-action-more-filter").show();0<b.childNodes.length;)a.appendChild(b.childNodes[0]);a.style.display="";this.domChangeId("online-list-menu-inline");this.groupCollapseOnClick=!1;this.resizeMenu();
$(".action-visibility-switch-sidebar-online").hide();$("li.item-accordeon-always-expanded").addClass("is-visible")}}};c.prototype.displaySizeSelect=function(a,b){if(b)b.siblings().removeClass("selected"),b.addClass("selected");else{var d=$("#"+this.domId);$('[data-display-size="'+a+'"]',d).addClass("selected")}};c.prototype.menuItemSortHide=function(){$("#"+this.domId).find(".sort-list").addClass("is-hidden")};c.prototype.menuItemSortShow=function(){$("#"+this.domId).find(".sort-list").removeClass("is-hidden")};
c.prototype.displayOnButtonClick=function(){if(this.alwaysVisible){var a=document.getElementById("online-list-menu-inline"),b=document.getElementById("sidebar-online");if(b&&a){for(;0<a.childNodes.length;)b.appendChild(a.childNodes[0]);a.style.display="none";b.style.width="";b.style.minHeight="";this.domChangeId("sidebar-online");this.groupCollapseOnClick=!0;this.alwaysVisible=!1;this.groupCollapseAll();$("#"+this.domId+" .js-action-more-filter").hide();$(".action-visibility-switch-sidebar-online").show()}}};
c.prototype.resizeMenu=function(){var a=2===ToolPreference.getItemInt(45);if(a||this.alwaysVisible){if(250>this.onlineListCurrentCellSize.width){var b=2*this.onlineListCurrentCellSize.width;var d=2}else b=this.onlineListCurrentCellSize.width,d=1;var f=$("#"+this.domId);if(a)if(900<=this.onlineListWidth){if(1<d&&4>=this.onlineListNbCellPerLine){this.displayOnButtonClick();return}this.displayAlwaysVisible()}else if(1==d)this.displayAlwaysVisible();else{this.displayOnButtonClick();return}a=document.getElementById(this.domId);
var c=document.getElementById("mod-online-list");d=0;a&&c&&(d=c.getBoundingClientRect(),a=a.getBoundingClientRect(),d=d.y-a.y);f.css({minHeight:"0px"});a=Math.ceil((f.height()-d)/this.onlineListCurrentCellSize.height);f.css({width:b+"px",minHeight:a*this.onlineListCurrentCellSize.height-1+d+"px"})}};c.prototype.filterStatUpdateProcess=function(a){this.filterStatLastUpdate=new Date;$(".performer-stat-total").html(a.total.toString());for(var b in a.filter)if(a.filter.hasOwnProperty(b)){var d=a.filter[b],
f;for(f in d)d.hasOwnProperty(f)&&$("#filter-stats-"+b+"-"+f).html(d[f].toString())}};c.prototype.filterStatUpdateCheckAndProcess=function(){if(this.filterStatShouldBeUpdated()&&!this.filterStatUpdateLock){this.filterStatUpdateLock=1;var a=this;g.filterStat(this.filterStatLastUpdate.getTime()).done(function(b){a.filterStatUpdateProcess(b)}).fail(function(a){}).always(}};c.prototype.onSortClicked=function(a,b){var d=this.getSortInfoById(a);if(d&&this.sortSelected!==
a){var f=b.closest("ul");f.hasClass("jq-accordeon-content")&&(this.sortSelected=a,this.uiSortUpdateSelected(f,d),this.fire(e.EVENT_ITEM_CHANGED,{sortId:a}))}};c.prototype.uiSortUpdateSelected=function(a,b){var d=this;if(!b&&(b=this.getSortInfoById(this.sortSelected),!b))return;a||(a=$("#"+this.domId+" .sort-list .jq-accordeon-content"));$("#"+this.domId+" .sort-list .sort-text").html(" "+Translation.tr("labelOrderBy")+" : "+b.title);$("li",a).each(function(){var a=$(this),b=parseInt(a.attr("data-id"),
10);0<b&&(b==d.sortSelected?a.addClass("selected"):a.removeClass("selected"))})};c.prototype.onItemClicked=function(a,b,d){d=d.closest("ul");if(d.hasClass("jq-accordeon-content")){a in this.filterSelected||(this.filterSelected[a]=[]);var c=this.configClickForceAddInsteadOfToggle?!0:0>this.filterSelected[a].indexOf(b);this.filterEditNoUiUpdate(a,b,c);this.buttonGroupRemoveUsed||(0<this.filterSelected[a].length?d.addClass("has-item-selected"):d.removeClass("has-item-selected"));var l=this;$("li",d).each(function(){var b=
$(this),d=parseInt(b.attr("data-id"),10);0<d&&(0>l.filterSelected[a].indexOf(d)?(b.removeClass("selected"),l.uiButtonRemoveFilterHide(a,d)):(b.addClass("selected"),l.uiButtonRemoveFilterShow(a,d)))});if(this.favoritePageEnabled||this.recentPageEnabled||this.vipSubscriptionPageEnabled)this.vipSubscriptionPageEnabled=this.recentPageEnabled=this.favoritePageEnabled=!1,this.refreshFavoriteAndRecentUi();this.refreshUiButtonVisibility();this.refreshUiAllModelsWithoutFilter();this.resetFilterByNicknameContent();
this.fire(e.EVENT_ITEM_CHANGED,{filterId:a,itemId:b})}};c.prototype.onFavoriteClicked=function(){this.resetFilterByNicknameContent();this.favoritePageSetStatus(!this.favoritePageEnabled)};c.prototype.onAboVipClicked=c.prototype.vipSubsciptionPageSetStatus=function(a,b){void 0===b&&(b=!0);this.vipSubscriptionPageEnabled!=a&&((this.vipSubscriptionPageEnabled=a)?this.filterSelectedBackup():b&&this.filterSelectedRestore(),
this.recentPageEnabled&&(this.recentPageEnabled=!1),this.favoritePageEnabled&&(this.favoritePageEnabled=!1),this.refreshUiSelected(),b&&this.fire(e.EVENT_ITEM_CHANGED,{vip:this.vipSubscriptionPageEnabled}))};c.prototype.favoritePageSetStatus=function(a,b){void 0===b&&(b=!0);this.favoritePageEnabled!=a&&((this.favoritePageEnabled=a)?this.filterSelectedBackup():b&&this.filterSelectedRestore(),this.recentPageEnabled&&(this.recentPageEnabled=!1),this.vipSubscriptionPageEnabled&&(this.vipSubscriptionPageEnabled=
!1),this.refreshUiSelected(),b&&this.fire(e.EVENT_ITEM_CHANGED,{favorite:this.favoritePageEnabled}))};c.prototype.filterSelectedBackup=function(){this.filterSelectedBackupData=this.filterSelected;this.filterSelected={}};c.prototype.filterSelectedRestore=c.prototype.onRecentClicked=function(){this.resetFilterByNicknameContent();this.onRecentSetStatus(!this.recentPageEnabled,!0)};c.prototype.onRecentSetStatus=function(a,b){a!=this.recentPageEnabled&&
(a?this.filterSelectedBackup():b&&this.filterSelectedRestore(),this.recentPageEnabled=!this.recentPageEnabled,this.favoritePageEnabled&&(this.favoritePageEnabled=!1),this.vipSubscriptionPageEnabled&&(this.vipSubscriptionPageEnabled=!1),this.refreshUiSelected(),b&&this.fire(e.EVENT_ITEM_CHANGED,{recent:this.recentPageEnabled}))};c.prototype.getSortInfoById=function(a){for(var b in this.sortData)if(this.sortData.hasOwnProperty(b)){var d=this.sortData[b];if(d.id===a)return d}};c.prototype.getFilterInfoById=
function(a){for(var b in this.filterData)if(this.filterData.hasOwnProperty(b)){var d=this.filterData[b];if(d.id===a)return d}};c.prototype.getItemInfoFromList=function(a,b){for(var d in a)if(a.hasOwnProperty(d)){var c=a[d];if(c.id===b)return c}};c.prototype.getItemInfoFromId=function(a,b){var d=this.getFilterInfoById(a);if(d&&"itemList"in d)return this.getItemInfoFromList(d.itemList,b)};c.prototype.uiButtonRemoveFilterShow=function(a,b){if(this.buttonGroupRemoveUsed){var d=this.getItemInfoFromId(a,
b);if(d){var c=a+"-"+b;$("button[data-id="+c+"]",this.jButtonRemoveGroup).length||this.jButtonRemoveGroup.append('<button class="button" data-id="'+c+'">'+d.title+' <span class="remove-item">&times;</span></button> ')}}};c.prototype.uiButtonRemoveFilterHide=function(a,b){var d=$("button[data-id="+(a+"-"+b)+"]",this.jButtonRemoveGroup);d.length&&d.remove()};c.prototype.onButtonRemovedClicked=function(a,b,d){d?d.remove():(d=$("button[data-id="+(a+"-"+b)+"]",this.jButtonRemoveGroup),d.length&&d.remove());
a in this.filterSelected&&(d=this.filterSelected[a].indexOf(b),0>d||(this.filterSelected[a].splice(d,1),this.refreshUiSelected(),this.fire(e.EVENT_ITEM_CHANGED,{filterId:a,itemId:b})))};c.prototype.isCountFilterEnabledGreaterThanZero=function(){for(var a in this.filterSelected)if(this.filterSelected.hasOwnProperty(a)&&0<this.filterSelected[a].length)return!0;return!1};c.prototype.filterEditAndUpdateUi=c.prototype.filterEditNoUiUpdate=
function(a,b,d){if(this.configOnlyOneItemPerFilter||0<=this.configFilterOnlyOneItem.indexOf(a))this.filterSelected[a]=d?[b]:[];else{a in this.filterSelected||(this.filterSelected[a]=[]);var c=this.filterSelected[a].indexOf(b);d?0>c&&this.filterSelected[a].push(b):0<=c&&this.filterSelected[a].splice(c,1)}};c.prototype.filterClear=function(a){void 0===a&&(a=!1);var b=this.resetFilterByNicknameContent()?!0:this.isCountFilterEnabledGreaterThanZero();this.favoritePageEnabled&&(b=!0,this.favoritePageSetStatus(!1,
!1));this.vipSubscriptionPageEnabled&&(b=!0,this.vipSubscriptionPageEnabled=!1);this.recentPageEnabled&&(b=!0,this.recentPageEnabled=!1);this.filterSelected={};this.refreshUiSelected();b?this.fire(e.EVENT_ITEM_CHANGED,null):a&&this.hide()};c.prototype.filterClearUiOnly=function(){this.vipSubscriptionPageEnabled=this.favoritePageEnabled=this.recentPageEnabled=!1;this.refreshFavoriteAndRecentUi();this.refreshUiAllModelsWithoutFilter()};c.prototype.getFilterByNicknameContent=function(a){var b=$.trim($("#"+
this.domId+" input.filter-text-content").val());a&&(this.nicknameSearchLastContent=b);return b};c.prototype.resetFilterByNicknameContent=function(){var a=$("#"+this.domId+" input.filter-text-content"),b=this.nicknameSearchLastContent;a.val("");return 0<b.length};c.prototype.onNicknameSearchChanged=function(){var a=this.getFilterByNicknameContent();a!==this.nicknameSearchLastContent&&(a.length&&(this.filterSelected={},this.refreshUiSelected()),this.fire(e.EVENT_ITEM_CHANGED,{nickname:a}))};c.prototype.domChangeId=
function(a){this.domId=a;this.jButtonRemoveGroup=$("#"+a+" .button-filter-remove");this.setupMenuEventDom()};c.prototype.filterDisplayAll=function(){$("#"+this.domId+" .js-action-more-filter").remove();$("#"+this.domId+" .js-more-filter-item").removeClass("js-more-filter-item")};c.prototype.setupMenuEventDom=function(){var a=this;$("#"+this.domId+" .js-action-more-filter").unbind("click").bind("click",function(b){a.filterDisplayAll();b.preventDefault();b.stopPropagation()});$("#"+this.domId+" .filter-reset").unbind("click").bind("click",
function(b){a.filterClear(!0);b.preventDefault();b.stopPropagation()});$("#"+this.domId+" input").unbind("click").bind("click",function(b){$(this).hasClass("action-filter-text-reset")&&a.resetFilterByNicknameContent()&&a.fire(e.EVENT_ITEM_CHANGED,null);b.preventDefault();b.stopPropagation()});$("#"+this.domId+" form.filter-text").unbind("submit").bind("submit",function(b){a.onNicknameSearchChanged();b.preventDefault()});$("#"+this.domId+" input.filter-text-content").on("input",Foundation.util.throttle(function(b){if(!ToolBrowser.isMobile())a.onNicknameSearchChanged()},
400));this.jButtonRemoveGroup.unbind("click").bind("click",function(b){if(b.target){var d=$(b.target).closest("button"),c=d.attr("data-id");if(c){var e=c.match(/^([0-9]+)-([0-9]+)$/);if(e){c=parseInt(e[1],10);e=parseInt(e[2],10);if(0<c&&0<e)a.onButtonRemovedClicked(c,e,d);b.stopPropagation();b.preventDefault()}}}});$("#"+this.domId+" .favorite-link").unbind("click").bind("click",function(b){if(Application.Config.isUserConnected)a.onFavoriteClicked();else Application.Config.wl.signUpSignIsAsLayer?
ToolRegister.loginWebauthOrRegister(11):ToolApp.redirectToLoginIfNotConnected();b.stopPropagation();b.preventDefault()});$("#"+this.domId+" .js-vip-subscription-link").unbind("click").bind("click",function(b){if(Application.Config.isUserConnected)a.onAboVipClicked();else Application.Config.wl.signUpSignIsAsLayer?ToolRegister.loginWebauthOrRegister(11):ToolApp.redirectToLoginIfNotConnected();b.stopPropagation();b.preventDefault()});$("#"+this.domId+" .recent-link").unbind("click").bind("click",;$("#"+this.domId+" .action-previsualisation-show").unbind("click").bind("click",function(b){a.fire(e.EVENT_PREVISUALISATION_SWITCH,!0);b.stopPropagation();b.preventDefault()});$("#"+this.domId+" .action-previsualisation-hide").unbind("click").bind("click",function(b){a.fire(e.EVENT_PREVISUALISATION_SWITCH,!1);b.stopPropagation();b.preventDefault()});$("#"+this.domId+" .action-grid-size").unbind("click").bind("click",function(b){a.fire(e.EVENT_GRID_DISPLAY_SIZE,
$(this));b.stopPropagation();b.preventDefault()})};c.prototype.setupMenuEvent=function(){var a=this;this.on("open",function(){a.filterStatUpdateCheckAndProcess()});this.on("close",function(){a.groupCollapseAll()});this.on("click",function(b,d){var c=d.group;if(c&&(c=c.attr("data-id"))){if("sort"===c)c=0;else if(c=parseInt(c,10),isNaN(c)||0>=c)return;var e=d.target.closest("li");if(e.length){var g=e.attr("data-id");if(g&&(g=parseInt(g,10),!(isNaN(g)||0>=g)))if(0<c)a.onItemClicked(c,g,e);else a.onSortClicked(g,
e)}}})};c.prototype.refreshFavoriteAndRecentUi=function(){var a=$("#"+this.domId+" .favorite-link").parent();this.favoritePageEnabled?a.addClass("selected"):a.removeClass("selected");a=$("#"+this.domId+" .recent-link").parent();this.recentPageEnabled?a.addClass("selected"):a.removeClass("selected");a=$("#"+this.domId+" .js-vip-subscription-link").parent();this.vipSubscriptionPageEnabled?a.addClass("selected"):a.removeClass("selected")};c.prototype.refreshUiSelected=c.prototype.refreshUiButtonSelected=function(){this.jButtonRemoveGroup.html("");if(this.buttonGroupRemoveUsed){for(var a in this.filterSelected)if(this.filterSelected.hasOwnProperty(a))for(var b=this.filterSelected[a],c=0;c<b.length;c++){var f=b[c];this.uiButtonRemoveFilterShow(parseInt(a,10),f)}this.refreshUiButtonVisibility()}else this.jButtonRemoveGroup.hide()};c.prototype.refreshUiButtonVisibility=
function(){this.buttonGroupRemoveUsed?(!this.isCountFilterEnabledGreaterThanZero()||this.recentPageEnabled||this.favoritePageEnabled||this.vipSubscriptionPageEnabled?this.jButtonRemoveGroup.hide():this.jButtonRemoveGroup.show(),this.alwaysVisible&&this.resizeMenu()):this.jButtonRemoveGroup.hide()};c.prototype.refreshUiListSelected=function(){var a=this;$("#"+this.domId+" li.item-accordeon").each(function(){var b=$(this),c=parseInt(b.attr("data-id"),10);if(!(0>=c)){if(!a.buttonGroupRemoveUsed){var f=
$("ul.jq-menu-header-sub",b);c in a.filterSelected&&0<a.filterSelected[c].length?f.addClass("has-item-selected"):f.removeClass("has-item-selected")}$("ul.jq-accordeon-content > li",b).each(function(){var b=$(this),d=parseInt(b.attr("data-id"),10);0<d&&(0>(c in a.filterSelected?a.filterSelected[c].indexOf(d):-1)?b.removeClass("selected"):b.addClass("selected"))})}})};c.prototype.refreshUiAllModelsWithoutFilter=function(){var a=$("#"+this.domId+" li.filter-all-model");this.isCountFilterEnabledGreaterThanZero()||
this.recentPageEnabled||this.favoritePageEnabled||this.vipSubscriptionPageEnabled?a.removeClass("selected"):a.addClass("selected")};c.prototype.getFilterAndSortData=function(){var a=this.getFilterByNicknameContent(!0),b={},c;for(c in this.filterSelected)if(this.filterSelected.hasOwnProperty(c)){var f=this.filterSelected[c];0<f.length&&(b[c]=f)}return{nickname:a,filter:b,favorite:this.favoritePageEnabled?1:0,recent:this.recentPageEnabled?1:0,vip:this.vipSubscriptionPageEnabled?1:0,sort:{id:this.sortSelected}}};
return c}(ModuleMenu.MenuManager);e.OnlineMenuManager=k;var g;(function(e){e.filterStat=function(c){return Core.Ajax.post("/performerAction/filterStats/",{lastUpdateTsMs:c})}})(g=e.Ajax||(e.Ajax={}))})(ModuleOnlineMenu||(ModuleOnlineMenu={}));
var __extends=this&&this.__extends||function(){var e=function(a,b){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(b[a]=c[a])};return e(a,b)};return function(a,b){function f(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");e(a,b);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)}}(),
ModuleUserMenu;
(function(e){var a=function(b){_extends(a,b);a.prototype.setupMenuEvent=function(){var a=this;this.on("click",function(a,b){if(b.group){var c=b.target,d=c.children("a").attr("href");if(void 0===d||!d.length)if(d=c.closest("a").attr("href"),void 0===d||!d.length)return;"#"!==d&&ToolBrowser.redirectToUrl(d)}});this.on("close",function(){a.onClose()})};a.prototype.onClose=function(){var a=this.element();a.hasClass("is-mobile-landscape-chat-page")&&a.removeClass("is-mobile-landscape-chat-page");
this.groupCollapseAll()};return a}(ModuleMenu.MenuManager);e.UserMenuManager=a})(ModuleUserMenu||(ModuleUserMenu={}));
var __extends=this&&this.__extends||function(){var d=function(a,b){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c])};return d(a,b)};return function(a,b){function c(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}(),
ModuleChat;(function(d){var a=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}__extends(a,b);a.EVENT_ACTION="action";a.configImagePreview={visiblePage:!0,multipleImg:!0,serverId:0,maxExecTimeSeconds:1,backupAutoOnStart:!0,mustSeeSoftContentOnlyBecauseOfAgeVerification:0};return a}(Core.Listener);d.ChatSwipe=a})(ModuleChat||(ModuleChat={}));
var __extends=this&&this.__extends||function(){var k=function(h,f){k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])};return k(h,f)};return function(h,f){function c(){this.constructor=h}if("function"!==typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");k(h,f);h.prototype=null===f?Object.create(f):(c.prototype=f.prototype,new c)}}(),
ModuleActionPanel;
(function(k){k.EVENT_ITEM_CLICKED="itemClick";var h=function(f){function c(a,b){var e=f.call(this,b)||this;e.domId=a;e.data={};e.isPerformerMale=!1;e.categoryListOrder=[];return e}__extends(c,f);c.prototype.getDatabaseAll=function(){return Application.actionPanel};c.prototype.getItemById=function(a){if(a in Application.actionPanel.item)return Application.actionPanel.item[a]};c.prototype.getCategoryById=function(a){if(a in Application.actionPanel.category)return Application.actionPanel.category[a]};c.prototype.setupEvent=
function(a){var b=this;a.unbind("click.ap").bind("click.ap",function(a){if(a.target){var d=$(a.target).closest(".action-panel-item");if(d.length){var e=d.attr("data-iid");e=parseInt(e,10);0<e&&(d=d.attr("data-amount"))&&(d=parseFloat(d),0<d&&b.fire(k.EVENT_ITEM_CLICKED,e,d));a.stopPropagation()}}})};c.prototype.setData=function(a,b){void 0===b&&(b=!1);this.data=a;this.isPerformerMale=b};c.prototype.isEmpty=function(){var a=this.getDatabaseAll(),b;for(b in this.data)if(this.data.hasOwnProperty(b)&&
b in a.category)for(var e in this.data[b])if(this.data[b].hasOwnProperty(e))return!1;return!0};c.prototype.setupCategoryPosition=function(){if(!(0<this.categoryListOrder.length)){var a=this.getDatabaseAll(),b=[],e;for(e in a.category)b.push([a.category[e].position,parseInt(e,10)]);for(b.sort(;b.length;)(a=b.shift())&&this.categoryListOrder.push(a[1])}};c.prototype.renderGetBuffer=function(){this.setupCategoryPosition();var a=this.getDatabaseAll(),b=
{};for(g in this.data)if(this.data.hasOwnProperty(g)&&g in a.category){var e=a.category[g].translationFemale;this.isPerformerMale&&(e=a.category[g].translationMale);var d=[];d.push('<div class="item-accordeon" data-sid="'.concat(g,'">'));d.push('<div class="accordeon-data-header">');d.push('<span class="action-switch" aria-hidden="true">+</span>');d.push('<a href="#">');d.push(e);d.push("</a>");d.push("</div>");d.push('<div class="accordeon-data-content">');for(var c in this.data[g])if(this.data[g].hasOwnProperty(c)){e=
this.data[g][c];var f='<svg role="img"><use class="'+e.keyId+'" xlink:href="'+ToolApp.IMAGE_ACTION_PANEL_SVG+"#"+e.keyId+'" href="'+ToolApp.IMAGE_ACTION_PANEL_SVG+"#"+e.keyId+'"></use></svg>',h=a.item[c].descriptionFemale;this.isPerformerMale&&(h=a.item[c].descriptionMale);d.push('<div class="action-panel-item" data-iid="'.concat(c,'" data-amount="').concat(e.amount,'" title="').concat(h,'">'));d.push(f);d.push('<div class="action-panel-price">');d.push(e.amountCurrency);d.push("</div>");d.push("</div>")}d.push("</div>");
d.push("</div>");b[g]=d.join("")}a="";d=this.categoryListOrder.length;for(c=0;c<d;c++){var g=this.categoryListOrder[c];g in b&&(a+=b[g])}return a};c.prototype.render=function(){$("#"+this.domId).html(this.renderGetBuffer())};return c}(Core.Listener);k.Manager=h})(ModuleActionPanel||(ModuleActionPanel={}));
var __extends=this&&this.__extends||function(){var f=function(p,h){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(f[a]=c[a])};return f(p,h)};return function(p,h){function n(){this.constructor=p}if("function"!==typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");f(p,h);p.prototype=null===h?Object.create(h):(n.prototype=h.prototype,new n)}}(),
ModuleChat;
(function(f){f.PLAYER_LIGHT_CONFIG={controlBarEnabled:!1};f.EVENT_MODEL_STATE="modelState";f.HISTORY_PAGE_ID="chat";var p=function(n){function c(a){var b=n.call(this)||this;b.inputMessagePlaceholderContent="";b.creditTooLowNoticeDisplayed=!1;b.preparePlayerStatCalled=0;b.openCommonStatCalled=0;b.config=a;b.fromAction=1;b.chatInitialState={enterFullscreen:0,enterPrivateShow:0,showTypeCurrent:2,actionPanelOpen:0};b.historyNbMessageDisplayed=0;b.streamPlayer=StreamPlayerLogic.getInstance();b.videoJsPlayer=
void 0;b.isVisibleState=!1;b.menu=void 0;b.resizeTimer=0;b.scrollTopLock=!1;b.interfaceOverVideoDisplayed=!0;b.virtualKeyBoardScrollTop=-1;b.browserHistoryMethod=1;b.showId=0;b.currentLayoutIsPortrait=!0;b.orientationTimer=0;b.fontSizeBtnTimer=0;b.focusOutTimeout=0;b.focusOnInputChat=!1;b.playerHeight=0;b.playerWidth=0;b.performerIsMale=!1;b.domId="";b.videoDomId="";b.modelInfo={nickname:"",id:0,event:!1,hlsPlaylist:"",liveG2:"",liveImg:"",profileImg:"",profileImgAlt:"",showType:0};b.modelInfoRoom=
{isMale:!1};b.applicationRestriction=0;b.chatNickname="";b.isInFavorite=0;b.isLoveAdded=0;b.sexToyType="";b.messagingDefault={sessionMessagingId:0,content:"",subject:"",performerNickname:"",performerProfileImg:"",performerId:0};b.messagingNoCreditDefault={performerNickname:""};b.cam2camState=1;b.streamPlayerLoadTimeout=0;b.streamPlayerInitTimeout=0;b.dailyTop5Timeout=0;b.actionPanelIconAnimationTimeout=0;b.lastChatMsg=[];b.lastChatSender="";b.lastChatSenderType="";b.historyLoaded=!1;b.eventConnectTriggered=
!1;b.eventConnectTriggeredShowType="";b.autoScrollDown=!0;b.tipDefaultAmount=5;b.sneakpeekAlreadyDone=!1;b.modeFullscreenEnabledSetting=0<ToolPreference.getItemInt(18);b.modeFullscreen=b.modeFullscreenEnabledSetting;b.modeFullscreenViaF11=ToolBrowser.isViewPortSizeInFullscreen(ToolBrowser.viewPortSize());b.headerIsVisible=!0;b.streamPlayerInitCb=function(){};b.videoJsPlayerEventPlayDone=!1;b.videoJsPlayerEventErrorDone=!1;b.videoJsPlayerHlsPlaylistIsEmpty=!1;b.orientationInfoLayout=NaN;b.viewPortHeight=
-1;b.onlineList=void 0;b.chatRedisplayMessage=void 0;b.iosTopSafeHeight=0;"streaming"in b.config&&b.config.streaming&&b.streamPlayer.cam2camSetIceConfig(b.config.streaming.lg4.ice);b.headerHiddenBecauseOfPrivateShow=!1;b.swipeSupposedToBeEnabled=!1;b.swipeTemporaryDisabled=0;b.emojiManager=new EmojiTool.Manager;ToolPreference.getItemInt(50)?b.messageGuestDisplay=!0:b.messageGuestDisplay=!1;b.isDesktopNoTouch=!1===ToolBrowser.isTouch()&&!1===ToolBrowser.isMobile();b.performerInPrivateChatHistoryMessageAlreadyDisplayed=
!1;b.ratingButtonObj=new f.RatingButton;return b}__extends(c,n);c.prototype.onlineListSet=function(a){var b=this;if(this.onlineList)throw Error("ListOnline already set");this.onlineList=a;this.onlineList.on(ModuleOnline.EVENT_LIST_FIRST_LOAD,function(){b.isVisibleState&&(b.swipeInitCurrent(),b.videoDragInitCurrent())})};c.prototype.init=function(a,b){(ToolBrowser.isVirtualRealitySupported()||this.config.isVirtualRealitySupported)&&ToolApp.redirectToVRAlternative();!this.modeFullscreen&&this.chatInitialState&&
this.chatInitialState.enterFullscreen&&(this.modeFullscreen=!0,this.chatInitialState.enterFullscreen=0);this.domId=a;this.jDomId=$("#"+a);this.ratingButtonObj.chatJDomSet(this.jDomId);ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&(this.modeFullscreen=!1,this.jDomId.find(".action-fullscreen").hide());this.chatRedisplayMessage=new ModuleChatRedisplayMessage.ChatRedisplayMessage(this.jDomId);this.chatRedisplayMessage.init();this.videoDomId=a+"-video";var e=a+"-action-pannel";this.jDomId.find(".stream-video").attr("id",
this.videoDomId);this.jDomId.find(".action-panel").attr("id",e);this.actionPanel=new ModuleActionPanel.Manager(e);this.config.gyroscopeEnabled&&ToolPreference.getItemInt(23)&&f.ChatGyroscope.isReadyToBeInit()&&(this.gyroscopeManager=new f.ChatGyroscope({element:this.jDomId.find(".stream-video-section")[0],videoElement:this.jDomId.find(".stream-video")[0]}));this.config.videoDragToResizeEnabled&&ToolPreference.getItemInt(43)&&f.ChatVideoDrag.isReadyToBeInit()&&(this.chatVideoDragManager=new f.ChatVideoDrag(this.jDomId));
this.setupEvent();this.preparePlayer();this.setChatFontSize();this.prepareFullscreenModeDesktop();this.displayChatFontSizeBtn(!0);this.actionToggleFullscreen(this.modeFullscreen)};c.prototype.setMenu=function(a){this.menu=a};c.prototype.getInternalState=function(){return{module:"chat",currentLayoutIsPortrait:this.currentLayoutIsPortrait,isVisibleState:this.isVisibleState,layerLastOpenExists:this.layerLastOpen?1:0,interfaceOverVideoDisplayed:this.interfaceOverVideoDisplayed?1:0,swipeManagerExists:this.swipeManager?
1:0,modelInfo:this.modelInfo,preparePlayerStatCalled:this.preparePlayerStatCalled,openCommonStatCalled:this.openCommonStatCalled}};c.prototype.setInitialState=function(a){this.chatInitialState=a};c.prototype.getCam2CamState=function(){return this.cam2camState};c.prototype.ratingIsSatisfactionLowRateWarning=function(){return this.modelInfoRoom&&"ratingSatisfactionLowRateWarning"in this.modelInfoRoom&&this.modelInfoRoom.ratingSatisfactionLowRateWarning?this.modelInfoRoom.ratingSatisfactionLowRateWarning:
!1};c.prototype.inputBoxOptimizeVisibility=function(){if(this.currentLayoutIsPortrait&&!this.scrollTopLock){this.scrollTopLock=!0;var a=0,b=$(window).scrollTop(),e=this,d=function(){var d=e.jDomId.find(".message-content");if(d.length)var c=d.get(0),g=window.setInterval(function(){if(20<b&&ToolBrowser.isElementInViewportFull(c))a++,b-=20,$(window).scrollTop(b);else if(window.clearInterval(g),e.scrollTopLock=!1,0<a)if(ToolBrowser.isElementInViewportFull(c))ToolBrowser.viewPortSize(),c.getBoundingClientRect();
else{var d=b+20;$(window).scrollTop(d);e.virtualKeyBoardScrollTop=d}},11)};20>b?ToolUi.waitUntilScroll(function(a,c){a?e.scrollTopLock=!1:(b=c,d())},20,900):window.setTimeout(function(){d()},200)}};c.prototype.showStop=function(a,b){void 0===a&&(a=51018);this.isVisibleState&&(this.nonFreeShowStartDate?(this.streamPlayer.stopShowPrivate(a,!0),this.onShowOverAnyType()):this.streamPlayer.showStop(a,!0),ToolToy.toyPanelClose(),b?ToolBrowser.redirectToUrl(b):this.showOverRatingOrGoToOnlineList())};c.prototype.showOverRatingOpen=
function(a){if(!this.isVisibleState)return!1;if(Layer.ShowRating.isOpen())return!0;if(this.nonFreeShowStartDate){var b=(new Date).getTime()-this.nonFreeShowStartDate.getTime(),e=this.streamPlayer.getShowIdConnexion();if(b>this.config.ratingLayerShowDurationMs&&0<e){var d=new Layer.ShowRating,l=this;this.fire(Layer.EVENT_ONLINE_LIST_PRE_REFRESH);this.emojiManager.destroy();d.on(Layer.EVENT_CLOSE_AND_GOTO_ONLINE_LIST,function(b){l.goToOnlinelist()});d.on(Layer.EVENT_SUBMIT,function(b,a){d.getNote()&&
(b.close(),ToolPerformer.Ajax.showRating(a.performerId,e,a.note,a.message).done(function(b){}).fail(function(b){}).always(function(){}))});b=void 0;this.modelInfoRoom.ratingNote&&this.modelInfoRoom.ratingNbVote&&3<this.modelInfoRoom.ratingNbVote&&(b=this.modelInfoRoom.ratingNote);d.open({performerId:this.modelInfo.id,performerNickname:this.modelInfo.nickname,message:"",note:-1,noteAverage:b,creditNoMoreAvailable:a,layoutId:1});this.layerHasBeenOpen(d);return!0}}return!1};c.prototype.showOverRatingOrGoToOnlineList=
function(){this.isVisibleState&&(this.showOverRatingOpen(!1)||this.goToOnlinelist())};c.prototype.setupEvent=function(){var a=this,b=this;if(ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification)ToolApp.event.on(215,function(){$(".block-avs-notice").remove();a.jDomId.find(".action-fullscreen").show();b.prepareFullscreenModeDesktop();if(a.isVisible()){a.swipeInitCurrent();if(a.onlineList)a.onlineList.on(ModuleOnline.EVENT_LIST_LOAD_END,function(){a.swipeInitCurrent()},void 0,{once:!0});a.streamPlayer.showStop(51126,
!0);a.streamPlayerInitAsyncAjax(!0)}});ToolApp.event.on(8,function(b,e){a.layerHasBeenOpen(e.layerObj)});ToolApp.event.on(12,function(){if(a.isVisible()&&a.streamPlayerInitCb){var b=a.streamPlayerInitCb;a.streamPlayerInitCb=void 0;b()}});b.on(f.GYROSCOPE_START,;b.on(f.GYROSCOPE_END,;ToolApp.event.on(205,;
this.jDomId.find(".action-submit-form-message").unbind("submit").bind("submit",function(b){b.preventDefault()});this.jDomId.find(".action-send-message").unbind("click").bind("click",function(){b.onActionSendMessage()});this.jDomId.find(".action-get-credit").unbind("click").bind("click",function(b){ToolBrowser.isMobile()&&(b.preventDefault(),b.stopPropagation())});this.jDomId.find(".action-video-private-start").unbind("click").bind("click",function(){if(b.streamPlayer.showTypeCurrentIsPrivateClassic())b.onActionGoToPrivateThatIsAlreadyStarted();
else if(b.streamPlayer.showTypeCurrentIsPrivateXclusive())b.onActionGoToXclusiveThatIsAlreadyStarted();else!b.streamPlayer.payingShowAreEnabled()&&b.showPrice&&ToolApp.userHasCredit(b.showPrice.nonfree)&&b.streamPlayer.userInterfaceAction(1),b.onActionGoToPrivate()});this.jDomId.find(".action-open-toy-controller").unbind("click").bind("click",function(){if(!1===b.streamPlayer.showTypeCurrentIsPaid())b.onActionGoToPrivateToyConnected()});this.jDomId.find(".action-video-close").unbind("click").bind("click",
function(a){b.streamPlayer.showTypeCurrentIsPaid()?b.displayConfirmExitPrivate(51019,b.nonFreeShowStartDate):(b.goToOnlinelist(51131),a.stopPropagation(),a.preventDefault())});this.streamPlayer.on(13,function(){b.focusOnInputChat&&b.interfaceOverVideoDisplayed||b.actionToggleVideoButtonBar();b.virtualKeyBoardHide()});this.streamPlayer.on(16,function(a,e){if(e)b.actionSoundMutedHideControl();else{var d=a.muteGetState();void 0===d&&(d=!1);b.actionSoundSetMuted(d,!0);d=b.streamPlayer.volumeGetState();
b.actionSoundSetVolume(d,!0)}});this.ratingButtonObj.onClick(function(){b.actionRatingShowFree()});this.jDomId.find(".action-display-action-panel").unbind("click").bind("click",function(){b.onActionPanelOpen()});this.setupStreamPlayerEvent();this.jDomId.find(".action-cam2cam-share-start").unbind("click").bind("click",;this.jDomId.find(".action-cam2cam-share-video-start").unbind("click").bind("click",function(){b.cam2camOnClickVideoStart()});
this.jDomId.find(".action-cam2cam-share-video-stop").unbind("click").bind("click",function(){b.cam2camOnClickVideoStop()});this.jDomId.find(".action-cam2cam-share-audio-start").unbind("click").bind("click",function(){b.cam2camOnClickAudioStart()});this.jDomId.find(".action-cam2cam-share-audio-stop").unbind("click").bind("click",function(){b.cam2camOnClickAudioStop()});this.jDomId.find(".action-send-love").unbind("click").bind("click",function(){b.actionLoveAdd()});this.jDomId.find(".action-add-favorite").unbind("click").bind("click",
function(){b.actionFavoriteAdd()});this.jDomId.find(".action-remove-favorite").unbind("click").bind("click",function(){b.actionFavoriteRemove()});this.jDomId.find(".stream-video").unbind("click").bind("click",function(){b.focusOnInputChat&&b.interfaceOverVideoDisplayed||b.actionToggleVideoButtonBar();b.virtualKeyBoardHide()});this.jDomId.find(".action-font-size").unbind("click").bind("click",function(){b.actionChatFontSize()});this.jDomId.find(".action-scroll-down").unbind("click").bind("click",function(){b.actionChatScrollDownBtn()});
this.jDomId.find(".chat-content").unbind("scroll").bind("scroll",function(){b.isVisibleState&&(b.displayChatFontSizeBtn(),2==b.config.displayVersion&&b.historyLoaded&&b.displayChatScrollDownBtn())});this.jDomId.find(".action-fullscreen").unbind("click").bind("click",function(){b.virtualKeyBoardHide();ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&$(".block-avs-notice").length?b.avsStartVerification():window.setTimeout(function(){b.actionToggleFullscreen()},200)});this.jDomId.find(".action-only-toggle-theater-mode").unbind("click").bind("click",
function(){b.actionToggleFullscreen()});this.jDomId.find(".action-only-toggle-fullscreen-mode").unbind("click").bind("click",function(){b.actionToggleFullscreenModeOnDesktop()});this.jDomId.find(".action-sound").unbind("click").bind("click",function(){b.actionSoundSetMuted(!0)});this.jDomId.find(".action-mute").unbind("click").bind("click",function(){b.actionSoundSetMuted(!1)});this.jDomId.find(".action-volume").unbind("mouseenter").bind("mouseenter",function(a){b.swipeDisableTemporary()});this.jDomId.find(".action-volume").unbind("mouseout").bind("mouseout",
function(a){b.swipeEnableTemporary()});this.jDomId.find(".action-volume").unbind("input").bind("input",function(a){a.target&&b.actionSoundSetVolume($(a.target).val(),!1)});this.jDomId.find(".action-volume").unbind("change").bind("change",function(a){a.target&&b.actionSoundSetVolume($(a.target).val(),!1)});this.jDomId.find(".action-vr-mode").unbind("click").bind("click",function(){b.actionEnableModeVR()});this.jDomId.find(".chat-content, .block-chat-content").unbind("click").bind("click",function(a){if(a.target){var e=
function(a){if(a.hasClass("js-actionPanel")){if(a.data("action")&&a.data("action").length&&"tip"===a.data("action"))return b.onActionPanelOpen(4),!0;if((a=a.attr("class").match(/js-actionPanel-category-(\d)/))&&a.length)return a=parseInt(a[1]),b.onActionPanelOpen(a),!0;b.onActionPanelOpen();return!0}return a.hasClass("js-tip")?(b.actionTip(),!0):a.hasClass("js-love")?(b.actionLoveAdd(),!0):a.hasClass("js-chat-rating-free")?(b.actionRatingShowFree(),!0):!1};a=$(a.target);e(a)||(a=a.closest(".chat-event"),
a.length&&e(a))}});this.actionPanel.on(ModuleActionPanel.EVENT_ITEM_CLICKED,function(a,e,d){b.actionPanelLayerHide();Application.Config.isUserConnected?ToolPerformer.Ajax.tipActionPanel(b.modelInfo.id,d,b.showId,e,ToolApp.userInterfaceType()).done(function(a){var d=void 0;"chatNotification"in a&&(d=a.chatNotification);b.streamPlayer.tipSent(a.showId,a.connexionShowId,a.ui.content,e,d);ToolApp.userInfo.isAuth&&2>ToolApp.userInfo.creditAmount&&b.chatDisplayLowCreditMessage();b.onTipResult(a)}).fail(.always(function(){}):b.layerRegisterSuggestion({cancelButton:!0,messageIdToUse:3,backToOnlineListButton:!1},!1)});var e=this.jDomId.find(".message-content");e.unbind("keyup").bind("keyup",function(a){a=a.keyCode?a.keyCode:a.which;if(13==a||10==a)b.onActionSendMessage();4==a&&b.virtualKeyBoardHide();b.currentLayoutIsPortrait&&(a=$(window).scrollTop(),0<a&&(b.virtualKeyBoardScrollTop=a))});ToolBrowser.isMobile()?(e.unbind("focus").bind("focus",function(){b.focusOnInputChat=
!0;b.currentLayoutIsPortrait&&(b.focusOutTimeout&&window.clearTimeout(b.focusOutTimeout),b.config.videoDragToResizeEnabled&&b.chatVideoDragManager&&b.chatVideoDragManager.reset(),2==b.config.displayVersion&&window.setTimeout(function(){b.actionFullscreenInputMode(!0)}),ToolBrowser.isMobileiOS()&&window.setTimeout(function(){ToolBrowser.isIPhoneIos15()&&b.currentLayoutIsPortrait?0<b.virtualKeyBoardScrollTop?$(window).scrollTop(b.virtualKeyBoardScrollTop):$(window).scrollTop(45):$(window).scrollTop(0);
b.resizeLogic()},250))}),e.unbind("focusout").bind("focusout",function(){b.focusOutTimeout=window.setTimeout(function(){2==b.config.displayVersion&&b.actionFullscreenInputMode(!1);b.focusOnInputChat=!1;ToolBrowser.isIPhoneIos15()&&$(window).scrollTop(0);b.resizeLogic()},150)})):ToolPreference.getItemInt(8)&&ToolBrowser.isMobile()&&e.unbind("focus").bind("focus",function(){b.currentLayoutIsPortrait&&(b.modeFullscreen||b.currentLayoutIsPortrait&&(0>b.virtualKeyBoardScrollTop&&ToolBrowser.isAndroid()?
b.inputBoxOptimizeVisibility():window.setTimeout(function(){0<=b.virtualKeyBoardScrollTop&&$(window).scrollTop(b.virtualKeyBoardScrollTop)},450)))});if(this.config.swipeEnabled&&ToolPreference.getItemInt(10))if(ToolBrowser.isMobile()||ToolBrowser.isTouch()&&ToolBrowser.isMacOsX()){$(".block-mouseSwipe",this.jDomId).hide();var d=function(){var e=new f.ChatTouchSwipe;a.chatVideoDragManager&&(e.videoDragToResizeEnabled=!0);e.init(a.jDomId);var d=e.getHammerInstance();d&&(d=new f.ChatTouchSwipeDelegated(d),
d.createDelegateTarget($("#popupRegisterSuggestion").parent()[0]),d.createDelegateTarget($("#popupGoToPrivateOrXclusive").parent()[0]),d.createDelegateTarget($("#popupNotOnline").parent()[0]));a.swipeManager=e;a.swipeManager.on(f.ChatSwipe.EVENT_ACTION,function(a,e){b.gyroscopeManager&&b.gyroscopeManager.isCollectingData()&&b.gyroscopeManager.disable();b.streamPlayer.showStop(51023,!0);b.fire(ModuleOnline.EVENT_PERFORMER_SELECTION,e)});a.isVisible()&&(a.resizeLogic(),a.swipeInitCurrent(),a.swipeSupposedToBeEnabled&&
a.helpShowSwipe())};if(f.ChatTouchSwipe.isReadyToBeInit())d();else ToolApp.event.on(14,function(){d()})}else this.swipeManager=new f.ChatMouseSwipe,this.swipeManager.init(this.jDomId),this.swipeManager.on(f.ChatSwipe.EVENT_ACTION,function(a,e){b.streamPlayer.showStop(51123,!0);b.fire(ModuleOnline.EVENT_PERFORMER_SELECTION,e)}),this.isVisible()&&this.swipeInitCurrent();else $(".block-mouseSwipe",this.jDomId).hide();this.gyroscopeManager&&(this.gyroscopeManager.on(f.GYROSCOPE_START,function(){b.fire(f.GYROSCOPE_START);
b.gyroscopeManager&&!b.gyroscopeManager.isSwipeAllowed()&&b.swipeDisableTemporary()}),this.gyroscopeManager.on(f.GYROSCOPE_END,function(){b.fire(f.GYROSCOPE_END);b.swipeEnableTemporary()}));e=ToolBrowserFullscreen.getInstance();e.on(ToolBrowserFullscreen.EVENT_CHANGE,function(b,e){a.resizeLogic();window.setTimeout(function(){a.resizeLogic()},300)});e.on(ToolBrowserFullscreen.EVENT_ERROR,function(){a.resizeLogic()});this.jDomId.find(".action-speech-to-text-chat-area").unbind("click").bind("click",
function(b){a.speechToTextManager&&(a.speechToTextManager.isRecording()?($(b.currentTarget).attr("title",Translation.tr("helpChatSpeechToTextDictateStart")),$(b.currentTarget).removeClass("layout-recording"),a.speechToTextManager.stopRecording()):($(b.currentTarget).attr("title",Translation.tr("helpChatSpeechToTextDictateStop")),$(b.currentTarget).addClass("layout-recording"),a.speechToTextManager.startRecording()))})};c.prototype.onActionPanelOpen=function(a){var b=new Layer.ActionPanelAndBonus;
this.layerHasBeenOpen(b);this.actionTipSetupEventHandler(b);b.open(this.actionPanel,{amount:this.tipDefaultAmount,performerId:this.modelInfo.id,performerNickname:this.modelInfo.nickname,userInterface:1},a)};c.prototype.showSwitchToNonFree=c.prototype.onActionGoToXclusiveThatIsAlreadyStarted=c.prototype.avsStartVerification=function(){var a=
this;this.streamPlayer.showStop(51114,!0);this.displayPerformerOffline();ToolAvs.startVerification(function(b){b&&($(".block-avs-notice").remove(),$(".stream-video",a.jDomId).removeClass("hard-censored"));a.fire(ModuleOnline.EVENT_PERFORMER_SELECTION,{modelInfo:a.modelInfo,spImageSoloObj:void 0})})};c.prototype.onActionGoToPrivateThatIsAlreadyStarted=function(){if(Application.Config.isUserConnected&&this.showPrice){var a=new ChatVideoLayer.PrivateShow,b=void 0;b=this.eventConnectTriggered?this.streamPlayer.cam2camIsAvailable():
!0;var e=new Layer.GoToPrivateOnly;b={performerNickname:this.modelInfo.nickname,clientCreditAmountWithCurrency:ToolApp.userInfo.creditAmountWithCurrency,pricePrivateAmountWithCurrency:this.showPrice.nonfreeWithCurrency,priceXclusiveAmountWithCurrency:this.showPrice.xclusiveWithCurrency,priceSneakPeekAmountWithCurrency:this.showPrice.sneakPeekWithCurrency,enoughCredit:ToolApp.userHasCredit(this.showPrice.nonfree),isCam2CamAvailable:b,xclusiveEnabled:this.showPrice.xclusiveEnabled,sneakPeekEnabled:this.showPrice.sneakPeekEnabled&&
!this.sneakpeekAlreadyDone,payingShowEnabled:!0,satisfactionLowRateWarning:this.ratingIsSatisfactionLowRateWarning()};var d=this;e.on(Layer.EVENT_GOTO_PRIVATE,function(){e.close();e.destroy();d.layerLastOpen&&(d.layerLastOpen=void 0);d.streamPlayer.enterPrivate()});e.on(Layer.EVENT_GOTO_SNEAKPEEK,function(){e.close();e.destroy();d.layerLastOpen&&(d.layerLastOpen=void 0);d.streamPlayer.enterSneakPeek()});e.on(Layer.EVENT_CLOSE_AND_GOTO_ONLINE_LIST,function(b){d.goToOnlinelist()});e.on(Layer.EVENT_CLOSE,
function(){d.chatDisable();a.on(ChatVideoLayer.EVENT_CLOSE_OPEN_LAYER_PRIVATE,;a.open();d.interfaceOverVideoDisplayed||d.actionToggleVideoButtonBar()});a.close();this.layerLastOpen&&(this.layerLastOpen=void 0);e.open(b);this.layerHasBeenOpen(e);this.performerInPrivateChatHistoryMessageAlreadyDisplayed||(this.performerInPrivateChatHistoryMessageAlreadyDisplayed=!0,this.historyChatSystemMessage(Translation.tr("infoPerformerGoInShow",
{"#pseudo#":this.modelInfo.nickname})))}else{if(this.layerLastOpen){b=this.layerLastOpen.layerId();if(2==b||1==b)return;this.layerLastOpen.close();this.layerLastOpen=void 0}this.fire(Layer.EVENT_ONLINE_LIST_PRE_REFRESH);this.layerRegisterSuggestion({cancelButton:!0,messageIdToUse:10,backToOnlineListButton:!0},!0,!0)}};c.prototype.onActionGoToPrivate=function(a){void 0===a&&(a=0);if(!Application.Config.isUserConnected)this.layerRegisterSuggestion({cancelButton:!0,messageIdToUse:2,backToOnlineListButton:!1},
!1);else if(this.showPrice){var b=this.showPrice.nonfree;var e=this.eventConnectTriggered?this.streamPlayer.cam2camIsAvailable():!0;if(this.showPrice.xclusiveEnabled||1!==a){b={performerNickname:this.modelInfo.nickname,clientCreditAmountWithCurrency:ToolApp.userInfo.creditAmountWithCurrency,pricePrivateAmountWithCurrency:this.showPrice.nonfreeWithCurrency,priceXclusiveAmountWithCurrency:this.showPrice.xclusiveWithCurrency,priceSneakPeekAmountWithCurrency:this.showPrice.sneakPeekWithCurrency,enoughCredit:ToolApp.userHasCredit(b),
isCam2CamAvailable:e,payingShowEnabled:this.streamPlayer.payingShowAreEnabled(),xclusiveEnabled:this.showPrice.xclusiveEnabled,sneakPeekEnabled:this.showPrice.sneakPeekEnabled,satisfactionLowRateWarning:this.ratingIsSatisfactionLowRateWarning(),toyName:""};var d=this;if(1===a){b.toyName=ToolToy.getConnectedToyType();b.toyName!==this.sexToyType&&(b.toyName=this.sexToyType);var c=new Layer.GoToXclusiveOnly}else(a=ToolToy.getConnectedToyType())&&a.length&&(b.toyName=a),c=new Layer.GoToPrivateOrXclusive;
c.on(Layer.EVENT_GOTO_PRIVATE,function(){c.close();c.destroy();d.layerLastOpen&&(d.layerLastOpen=void 0);d.streamPlayer.enterPrivate()});c.on(Layer.EVENT_GOTO_XCLUSIVE,function(){c.close();c.destroy();d.layerLastOpen&&(d.layerLastOpen=void 0);d.streamPlayer.enterXClusive()});c.on(Layer.EVENT_GOTO_SNEAKPEEK,function(){c.close();c.destroy();d.layerLastOpen&&(d.layerLastOpen=void 0);d.streamPlayer.enterSneakPeek()});c.open(b);this.layerHasBeenOpen(c)}else a=new Layer.GenericWithTitle,b=Translation.tr("titleModelToyController"),
e=Translation.tr("infoMediaActionNotAvailable",{"#NICK#":'<span class="js-performer-nickname performer-nickname-hl">'+this.modelInfo.nickname+"</span>"},{escape:!1}),a.open(b,e),this.layerHasBeenOpen(a)}};c.prototype.swipeDisableTemporary=function(){this.swipeTemporaryDisabled++;this.swipeManager&&this.swipeManager.disable()};c.prototype.swipeEnableTemporary=function(){this.swipeTemporaryDisabled--;0>=this.swipeTemporaryDisabled&&(0>this.swipeTemporaryDisabled&&(this.swipeTemporaryDisabled=0),this.swipeManager&&
this.swipeSupposedToBeEnabled&&this.swipeManager.enable())};c.prototype.swipeDisable=c.prototype.swipeEnable=function(){this.swipeSupposedToBeEnabled=!0;this.swipeManager&&0>=this.swipeTemporaryDisabled&&this.swipeManager.enable()};c.prototype.layerUserMutedBecauseOfNoCredit=function(){if(Application.Config.isUserConnected){var a=new Layer.MuteUserWithoutCredit;a.open({performerNickname:this.modelInfo.nickname});
this.layerHasBeenOpen(a)}};c.prototype.redirectIfRestricted=function(){if(this.applicationRestriction&32){if(ToolApp.redirectToLoginIfNotConnected())return!0;(new Layer.Loader).open(Translation.tr("errorUserNotEnoughCredit"));ToolBrowser.redirectToUrl(ToolApp.Url.getCredit());return!0}return!1};c.prototype.onActionSendMessage=function(){if(this.config.displayRegisterSuggestionToChat)this.layerRegisterSuggestion({cancelButton:!0,messageIdToUse:9,backToOnlineListButton:!1},!1);else if(this.config.displayEmailValidationToChat)this.chatDisplaySystemEmailValidationMessage();
else if(!this.redirectIfRestricted()){var a=this.jDomId.find(".message-content"),b=a.val();b=jQuery.trim(b);a.val("");if(b.length){if(b=this.convertOldSmileyToUtf8(b),this.sendMessageWithOffensiveCheck(b),this.interfaceOverVideoDisplayed||this.actionToggleVideoButtonBar(),a=ToolApp.userInfo.nickname,""===this.chatNickname||ToolApp.userInfo.isAuth||(a=this.chatNickname),this.historyAddTextInDiv("<span class='nickname'>"+StringTool.escapeHtml(a)+'</span><span class="content">'+StringTool.escapeHtml(b)+
"</span>","text-customer current",StringTool.escapeHtml(a)),b=!1,this.currentLayoutIsPortrait?ToolPreference.getItemInt(6)&&(b=!0):ToolPreference.getItemInt(7)&&(b=!0),b){var e=this;window.setTimeout(function(){e.virtualKeyBoardHide()},50)}}else a.focus()}};c.prototype.sendMessageWithOffensiveCheck=function(a){var b=this,e=this.streamPlayer.showTypeCurrentIsPaid()?1:0;this.streamPlayer.messageFilterOffensiveGetLevel()&&!e&&0===this.streamPlayer.userMutedReason()?ToolChat.Ajax.messageOffensiveCheck(this.showId,
this.modelInfo.id,this.chatNickname,e,a).then(function(e){e.success&&e.isOffensive?"chatNotification"in e&&e.chatNotification&&b.streamPlayer.messageBlocked(a,e.chatNotification):b.streamPlayer.sendMessage(a)},:this.streamPlayer.sendMessage(a)};c.prototype.chatDisplaySystemEmailValidationMessage=function(){if(!document.getElementById("resendConfirmationPlaceholder")){var a="";this.config.emailCanBeChanged&&(a='<span><a href="'+Application.Config.url.root+
'/user/emailchange/">'+Translation.tr("actionCustomerChangeEmail")+"</a><br /></span>");a=['<span class="content" id="resendConfirmationPlaceholder">',"   <span>"+Translation.tr("infoCustomerVerifiedEmailRequiredToChat")+"</span>",'   <span id="resendConfirmation">',"       <span>"+Translation.tr("textCustomerEmailAddressConfirmationResend")+"</span>","   </span>","   "+a,"</span>"].join("<br>");this.historyAddTextInDiv(a,"text-customer current",StringTool.escapeHtml(ToolApp.userInfo.nickname));(new ModuleSuggest.EmailResentConfirmationLink("resendConfirmation")).init()}};
c.prototype.goToOnlinelist=function(a){void 0===a&&(a=51017);this.isVisibleState&&(this.nonFreeShowStartDate?this.streamPlayer.stopShowPrivate(a,!0):this.streamPlayer.showStop(a,!0),this.fire(Layer.EVENT_CLOSE_AND_GOTO_ONLINE_LIST))};c.prototype.layerGoToOnlineList=function(a){if(this.isVisibleState)if(this.showOverRatingOpen(!1))this.displayPerformerOffline();else if(2==a.messageIdToUse&&this.fire(f.EVENT_MODEL_STATE,{performerId:this.modelInfo.id,state:1}),this.fire(Layer.EVENT_ONLINE_LIST_PRE_REFRESH),
3==a.messageIdToUse){var b=new Layer.GoToOnlineWithMessage,e=this;b.on(Layer.EVENT_CLOSE_AND_GOTO_ONLINE_LIST,function(b){e.goToOnlinelist()});b.on(Layer.EVENT_CLOSE,function(b){var a=new ChatVideoLayer.ExclusiveShow;a.on(ChatVideoLayer.EVENT_CLOSE_AND_GOTO_ONLINE_LIST,function(b){a.close();e.goToOnlinelist()});a.open()});b.open(a);this.layerHasBeenOpen(b)}else this.displayPerformerOffline()};c.prototype.layerRegisterSuggestion=function(a,b,e){void 0===e&&(e=!1);var d=new Layer.RegisterSuggestion,
c=this;d.on(Layer.EVENT_CLOSE_AND_GOTO_ONLINE_LIST,function(b){c.goToOnlinelist()});b&&(d.on(Layer.EVENT_CLOSE,function(b){e?(c.chatDisable(),c.historyChatSystemMessage(Translation.tr("infoPerformerGoInShow",{"#pseudo#":c.modelInfo.nickname}))):(c.uiButtonGoToPrivateDisable(),c.chatDisable())}),ToolToy.toyPanelForceClose());if(Application.Config.wl.signUpSignIsAsLayer){if(b=ToolRegister.loginWebauthOrRegister(a.messageIdToUse),this.layerHasBeenOpen(b),1===a.messageIdToUse)b.on(3,function(){c.goToOnlinelist()})}else d.open(a),
this.layerHasBeenOpen(d)};c.prototype.chatEnable=c.prototype.uiButtonGoToPrivateDisable=c.prototype.uiButtonGoToPrivateEnable=c.prototype.chatDisable=function(){var a=this.jDomId.find(".message-content");a.attr("disabled",
"disabled");a.val("");this.jDomId.find(".action-send-message").addClass("disabled");this.jDomId.find(".action-open-emoji-chat-area").hide();this.emojiManager.destroy()};c.prototype.layerCreditNotEnough=function(){var a=new Layer.CreditNotEnoughDuringShow,b=this;a.on(Layer.EVENT_CLOSE_AND_GOTO_ONLINE_LIST,function(a){b.goToOnlinelist()});a.open();this.layerHasBeenOpen(a)};c.prototype.historyClassNameUid=c.prototype.historyChatCustomer=function(a,b,e,d){if(this.messageGuestDisplay||
0!==a.indexOf("Guest ")){var c="text-customer";d&&(c+=" "+this.historyClassNameUid(d));this.historyAddTextInDiv("<span class='nickname'>"+a+'</span><span class="content">'+this.convertOldSmileyToUtf8(b)+"</span>",c,a,e)}};c.prototype.historyChatPerformer=function(a,b){if(0===a.indexOf(this.chatNickname+": ")){var e=a.substring(this.chatNickname.length+1);a="<strong class='hl-you'>"+StringTool.escapeHtml(this.chatNickname)+":</strong>"+e}this.historyAddTextInDiv("<span class='nickname'>"+this.modelInfo.nickname+
'</span><span class="content">'+this.convertOldSmileyToUtf8(a)+"</span>","text-performer",this.modelInfo.nickname,b)};c.prototype.historyChatActionPanel=function(a,b,e,d){var c='<div class="img-action-panel"><svg role="img" class="svgTip"><use class="'+b.keyId+'" xlink:href="'+ToolApp.IMAGE_ACTION_PANEL_SVG+"#"+b.keyId+'" href="'+ToolApp.IMAGE_ACTION_PANEL_SVG+"#"+b.keyId+'"></use></svg></div>';c+='<div class="text-action-panel">'+e.translationAction.replace("#client#","<strong>"+a+"</strong>")+" : <strong>"+
b.title+"</strong></div>";this.historyChatSystemMessage(c,"js-actionPanel js-actionPanel-category-"+b.categoryId+" cursor-pointer",d)};c.prototype.historyChatBonusAmount=function(a,b,e,d){var c='<div class="img-action"><svg role="img" class="svgBonus"><use class="bonusWithBorder" xlink:href="'+ToolApp.imageIconSvgGetUrl()+'#bonusWithBorder" href="'+ToolApp.imageIconSvgGetUrl()+'#bonusWithBorder"></use></svg></div>',k=b;d&&"Intl"in window&&(k=String(b).replace(/[^\d\\.,]/g,""),k=k.split(",").join("."),
k=(new Intl.NumberFormat(Application.Config.url.root.substring(1))).format(Number(k)));c+='<div class="text-action">';c=Application.Config.isUserConnected&&Application.user.nickname===a?c+Translation.tr("infoUserTipSentByCurrentUser",{"#NICK#":"<strong>"+this.modelInfo.nickname+"</strong>","#NUMBER#":'<span class="amount">'+k+"</span>"},{escape:!1}):c+Translation.tr("infoUserTipSentBy",{"#NICK#":"<strong>"+a+"</strong>",$$:'<span class="amount">'+k+"</span>"},{escape:!1});this.historyChatSystemMessage(c+
"</div>","js-tip cursor-pointer",e)};c.prototype.historyChatLove=function(a){var b='<div class="img-action"><svg role="img" class="svgLove"><use class="heartWithBorder" xlink:href="'+ToolApp.imageIconSvgGetUrl()+'#heartWithBorder" href="'+ToolApp.imageIconSvgGetUrl()+'#heartWithBorder"></use></svg></div>';b=b+'<div class="text-action">'+Translation.tr("infoPerformerLoveAddedChatByClient",{"#CLIENT#":"<strong>"+a+"</strong>","#MODEL#":"<strong>"+this.modelInfo.nickname+"</strong>"},{escape:!1});this.historyChatSystemMessage(b+
"</div>","js-love cursor-pointer")};c.prototype.historyChatFavoriteAdded=function(a){var b='<div class="img-action"><svg role="img" class="svgFav"><use class="favWithBorder" xlink:href="'+ToolApp.imageIconSvgGetUrl()+'#favWithBorder" href="'+ToolApp.imageIconSvgGetUrl()+'#favWithBorder"></use></svg></div>';b=b+'<div class="text-action">'+Translation.tr("infoUserAddModelFavoriteList",{"#NICK#":"<strong>"+a+"</strong>","#MODEL#":"<strong>"+this.modelInfo.nickname+"</strong>"},{escape:!1});this.historyChatSystemMessage(b+
"</div>","js-favorite cursor-pointer")};c.prototype.historyChatSystemMessage=function(a,b,e){var d="chat-event";b&&(d+=" "+b);this.historyAddTextInDiv(a,d,"event",e)};c.prototype.onShowOverAnyType=function(){this.headerHiddenBecauseOfPrivateShow&&(this.layoutHeaderShow(),this.resizeLogic(),this.headerHiddenBecauseOfPrivateShow=!1);this.swipeEnable();this.jDomId.find(".mode-show.js-mode-show-private").hide();this.jDomId.find(".mode-show.js-mode-show-xclusive").hide();this.jDomId.find(".mode-show.js-mode-show-sneak-peek").hide()};
c.prototype.chatSystemPerformerOfflineMsg=function(){this.historyChatSystemMessage(Translation.tr(this.performerIsMale?"infoModelDisconnectedNicknameMale":"infoModelDisconnectedNicknameFemale",{"#NICK#":"<strong>"+StringTool.escapeHtml(this.modelInfo.nickname)+"</strong>"},{escape:!1}))};c.prototype.onActionPanelItemSentAddVideoAnimation=function(a){var b=this.jDomId.find(".stream-video-section").find(".block-action-panel-animated-icon");this.actionPanelIconAnimationTimeout&&(clearTimeout(this.actionPanelIconAnimationTimeout),
this.actionPanelIconAnimationTimeout=0);b.empty();a=ToolChat.createActionPanelSvgIconMarkup(a.keyId);b.html(a);b.removeClass("isHidden");b.find("svg").addClass("animated");this.actionPanelIconAnimationTimeout=setTimeout(function(){b.empty();b.addClass("isHidden")},3E3)};c.prototype.setupStreamPlayerEvent=function(){var a=this.streamPlayer,b=this;a.on(4,function(a,d){d.nickname===b.modelInfo.nickname?b.historyChatPerformer(d.contentHtml):b.historyChatCustomer(d.nickname,d.contentHtml,void 0,d.uniqueUserId)});
a.on(15,;a.on(2,function(e,d,c){b.eventConnectTriggered=!0;c&&"pseudo"in c&&(b.chatNickname=c.pseudo);b.eventConnectTriggeredShowType=d;b.gyroscopeManager&&b.gyroscopeManager.setupInitialPosition();b.chatVideoDragManager&&b.chatVideoDragManager.initStreamPlayerElements();c=!0;if(e.showTypeIsPaid(d)){b.showSwitchToNonFree();e=b.jDomId.find(".action-video-close");switch(d){case "prive":e.attr("title",Translation.tr("actionChatLeavePrivateShow"));break;
case "xclusive":e.attr("title",Translation.tr("actionChatLeaveXclusiveShow"));break;case "sneak_peek":e.attr("title",Translation.tr("actionChatLeaveSneakPeek"))}var l=e=!0,g=!1;b.headerIsVisible&&(b.layoutHeaderHide(),b.resizeLogic(),b.headerHiddenBecauseOfPrivateShow=!0);switch(d){case StreamPlayerXCl.showState.XCLUSIVE:b.historyChatSystemMessage(Translation.tr("infoMediaXclusiveShowNotice",{"#NICKNAME#":"<strong>"+StringTool.escapeHtml(b.modelInfo.nickname)+"</strong>"},{escape:!1}));b.jDomId.find(".mode-show.js-mode-show-xclusive").fadeIn();
break;case StreamPlayerXCl.showState.PRIVE:b.historyChatSystemMessage(Translation.tr("infoMediaPrivateShowNotice",{"#NICKNAME#":"<strong>"+StringTool.escapeHtml(b.modelInfo.nickname)+"</strong>"},{escape:!1}));b.jDomId.find(".mode-show.js-mode-show-private").fadeIn();break;case StreamPlayerXCl.showState.SNEAK_PEEK:b.historyChatSystemMessage(Translation.tr("infoUserCannotChatInSneakPeek",{"#MODEL#":"<strong>"+StringTool.escapeHtml(b.modelInfo.nickname)+"</strong>"},{escape:!1})),b.jDomId.find(".mode-show.js-mode-show-private").hide(),
b.jDomId.find(".mode-show.js-mode-show-xclusive").hide(),b.jDomId.find(".mode-show.js-mode-show-sneak-peek").fadeIn(),l=e=c=!1,g=!0,b.sneakpeekAlreadyDone=!0}b.swipeDisable();b.nonFreeShowStartDate=l||g?new Date:void 0;ToolApp.sessionKeepInitThresholdIntervalMsSet(36E3);e&&a.cam2camIsAvailable()&&b.cam2camCanBeVisible();b.sneakpeekAlreadyDone&&ToolToy.toyButtonHide()}else b.swipeEnable(),b.nonFreeShowStartDate=void 0,ToolApp.sessionKeepInitThresholdIntervalMsSet(36E4),b.onlineList&&!b.onlineList.hasBeenInitialized()&&
b.onlineList.preloadIfRequired();c?b.chatEnable():b.chatDisable();b.spImageSolo&&(b.spImageSolo.destroy(),b.spImageSolo=void 0);b.fire(f.EVENT_MODEL_STATE,{performerId:b.modelInfo.id,state:d===StreamPlayerXCl.showState.FREE?2:3});b.actionPanelLayerHide();ToolApp.isToyControllerLoaded()&&b.streamPlayer.toyControllerOnRun()});a.on(14,function(a,d){b.jDomId.find(".action-cam2cam-share-start").show();d&&"errorException"in d&&d.errorException&&"errorMsg"in d&&d.errorMsg&&b.historyChatSystemMessage(d.errorMsg);
b.historyChatSystemMessage(Translation.tr("errorMediaWebcamCannotBeShared"))});a.on(18,function(a,d){d&&"false"!==d?(b.jDomId.find(".action-cam2cam-share-video-stop").show(),b.jDomId.find(".action-cam2cam-share-audio-stop").show(),b.historyChatSystemMessage(Translation.tr("successMediaWebcamShareToModel")),b.historyChatSystemMessage(Translation.tr("infoMediaAudioSharedYes")),b.resizeLogic(),b.cam2camState=2,b.feedbackVideoResize=new ToolCam2camFeedback.Manager(".feedbackVideoClient",b.jDomId),b.feedbackVideoResize.init(),
ToolApp.isToyControllerLoaded()&&ToolToy.toyPanelResize()):(b.jDomId.find(".action-cam2cam-share-start").show(),b.historyChatSystemMessage(Translation.tr("errorMediaWebcamCannotBeShared")))});a.on(17,function(a){a=a.muteGetState();void 0!==a&&b.actionSoundSetMuted(a,!0);(a=b.streamPlayer.volumeGetState())&&b.actionSoundSetVolume(a,!0)});a.on(35,function(a,d){ToolApp.isToyControllerLoaded()&&b.streamPlayer.toyControllerStatusToyChanged()});a.on(36,function(b,a){ToolApp.isToyControllerLoaded()&&ToolToy.handleToyStreamPlayerEvent(a.type,
a.info)});a.on(8,function(a,d){b.historyChatLove(d.sender.nickname)});a.on(9,;a.on(30,;a.on(33,function(a,d){"disabled"===d.reason?b.historyChatSystemMessage("Private show temporary disabled by the performer."):"creditNotEnough"===d.reason&&"creditAmount"in d&&d.creditAmount&&ToolApp.userCreditAmountOnlyUpdateUi(d.creditAmount).then(function(){b.onActionGoToPrivate()})});
a.on(32,function(b,a){});a.on(31,;a.on(34,function(a,d){var e=b.performerIsMale?"Male":"Female";d.state?b.historyChatSystemMessage(Translation.tr("infoUserShowPayingEventNowEnabled"+e,{"#NICK#":StringTool.escapeHtml(b.modelInfo.nickname)})):b.historyChatSystemMessage(Translation.tr("infoUserShowPayingEventNowDisabled"+e,{"#NICK#":StringTool.escapeHtml(b.modelInfo.nickname)}))});a.on(10,function(a,d){if(d&&d.removeMsg&&"uid"in d&&
"0"!=d.uid){var e=b.historyClassNameUid(d.uid);$("."+e).remove()}});a.on(6,function(a,d){b.historyChatBonusAmount(d.sender.nickname,d.ui.content,0,!0)});a.on(37,;a.on(7,function(e,d){var c=b.actionPanel.getItemById(d.ui.itemId);if(c){var k=b.actionPanel.getCategoryById(c.categoryId);if(k){if(b.historyChatActionPanel(d.sender.nickname,c,k),Application.user&&Application.user.isAuth&&Application.user.nickname===d.sender.nickname)b.onActionPanelItemSentAddVideoAnimation(c)}else a.fire(6,
d)}else a.fire(6,d)});a.on(19,function(a,d){b.chatSystemPerformerOfflineMsg();b.onShowOverAnyType();b.layerGoToOnlineList({messageIdToUse:1})});a.on(20,function(a){b.chatSystemPerformerOfflineMsg();b.onShowOverAnyType();b.layerGoToOnlineList({messageIdToUse:2})});a.on(21,function(a){b.chatSystemPerformerOfflineMsg();b.onShowOverAnyType();ToolToy.toyButtonHide();b.layerGoToOnlineList({messageIdToUse:2})});a.on(22,function(a){b.onShowOverAnyType();b.onActionGoToPrivateThatIsAlreadyStarted();ToolToy.toyButtonHide();
b.fire(f.EVENT_MODEL_STATE,{performerId:b.modelInfo.id,state:3})});a.on(23,function(a){b.onShowOverAnyType();b.onActionGoToXclusiveThatIsAlreadyStarted();b.fire(f.EVENT_MODEL_STATE,{performerId:b.modelInfo.id,state:3})});a.on(24,function(a){b.onShowOverAnyType();b.uiButtonGoToPrivateEnable();a=b.jDomId.find(".action-video-close");a.length&&a.attr("title",Translation.tr("actionChatLeaveFreeShow"));b.onActionGoToPrivateThatIsAlreadyStarted()});a.on(25,function(a,d){b.onShowOverAnyType();b.chatSystemPerformerOfflineMsg();
b.layerGoToOnlineList({messageIdToUse:2})});a.on(26,function(a){b.historyChatSystemMessage(Translation.tr("infoGenericRegisterToContinueToChat"));b.onShowOverAnyType();b.layerRegisterSuggestion({cancelButton:!0,messageIdToUse:1,backToOnlineListButton:!0},!0)});a.on(27,function(a){b.onShowOverAnyType();b.showOverRatingOpen(!0)||b.layerCreditNotEnough()});a.on(28,function(a){b.onShowOverAnyType();b.showOverRatingOrGoToOnlineList()});a.on(29,function(a){b.chatSystemPerformerOfflineMsg();b.onShowOverAnyType();
b.layerGoToOnlineList({messageIdToUse:2})})};c.prototype.historyAddHtml=function(a){this.historyNbMessageDisplayed++;var b=this.jDomId.find(".inner-chat-content");if(2==this.config.displayVersion){b.append(a);if(260<this.historyNbMessageDisplayed&&0<b.length&&b[0]){for(a=b[0];250<a.children.length;)a.firstChild&&a.removeChild(a.firstChild);this.historyNbMessageDisplayed=250}this.autoScrollDown&&$(".chat-content").stop(!1,!1).animate({scrollTop:$(".inner-chat-content").height()},300)}else if(b.prepend(a),
$(".chat-content").scrollTop(0),260<this.historyNbMessageDisplayed&&0<b.length&&b[0]){for(a=b[0];250<a.children.length;)a.lastChild&&a.removeChild(a.lastChild);this.historyNbMessageDisplayed=250}};c.prototype.historyAddHtmlFullscreen=function(a){if(this.modeFullscreen){var b=$(a);this.jDomId.find(".block-chat-content").append(b);window.setTimeout(7E3)}};c.prototype.historyAddTextInDiv=function(a,b,e,d){var c="";void 0==d&&(d=0);var k="";if(b){var g='<div class="'+
b+'">';if(0<=b.indexOf("text-customer")||0<=b.indexOf("text-performer"))k='<div class="br"></div>';c=0<=b.indexOf("text-customer")?"customer":0<=b.indexOf("text-performer")?"performer":""}else g="<div>";this.lastChatSender==e&&"event"!=e&&(2==this.config.displayVersion?(g=g.replace("text-customer","text-customer hideNickname"),g=g.replace("text-performer","text-performer hideNickname")):this.jDomId.find(".inner-chat-content div").first().addClass("hideNickname"));2==this.config.displayVersion&&("customer"==
c&&"performer"==this.lastChatSenderType||"performer"==c&&"customer"==this.lastChatSenderType)&&(g=g.replace("text-customer","text-customer negativeMargin"),g=g.replace("text-performer","text-performer negativeMargin"));this.lastChatSenderType=c;this.historyAddHtml(g+""+a+"</div>");this.lastChatMsg=this.lastChatMsg.slice(-7);this.lastChatMsg.push(k+g+""+a+"</div>");this.modeFullscreen&&"greeting"!=b&&8>d&&(this.lastChatSender==e&&"event"!=e&&(g=g.replace("text-customer","text-customer hideNickname"),
g=g.replace("text-performer","text-performer hideNickname")),this.historyAddHtmlFullscreen(k+g+""+a+"</div>"));this.lastChatSender=e?e:""};c.prototype.debugLog=function(a){};c.prototype.favoriteSetState=function(a){this.menu&&this.menu.favoriteSetCanAdd(!a);a?($(".action-add-favorite").hide(),$(".action-remove-favorite").fadeIn()):($(".action-add-favorite").fadeIn(),$(".action-remove-favorite").hide());$(".action-display-fan-count").delay(50).fadeIn();this.isInFavorite=a};c.prototype.streamPlayerInitCheck=
c.prototype.streamPlayerInit=function(a){this.streamPlayerInitCb=function(){};this.eventConnectTriggered=!1;this.eventConnectTriggeredShowType="";if(this.isVisibleState){var b={server:a.performer.serverId,width:100<this.playerWidth?this.playerWidth:320,height:100<this.playerHeight?this.playerHeight:240,flashEnabled:!1,swf_timeout:!0,swf_url:"",swf_bgcolor:"",hlsEnabled:!0,liveG1Enabled:!1,liveG2Enabled:!1,liveG4Enabled:!1,hls5Enabled:!1,videoBtn:"action-video-mode-hls",
connexionDelay:0,infos:{device:"mobile",utype:"visiteur"},uiTypeId:0,xcoreAppId:70,checkPageHidden:!0,hls5DailyEnabled:!1,hls5VideoJsDmEnabled:!1,preserveHtml5VideoTag:!0,chat2InfoWs:void 0,initModeMustBe:ToolPreference.getItemInt(19)?"img":void 0,playerLightConfig:f.PLAYER_LIGHT_CONFIG};this.videoJsPlayerEventErrorDone&&(b.initModeMustBe="img");b.hls5DailyEnabled=!1;b.hls5VideoJsDmEnabled=!0;b.hls5Enabled=!0;switch(ToolPreference.getItemInt(24)){case 2:b.liveG1Enabled=!0;break;case 3:b.liveG2Enabled=
!0}0<ToolPreference.getItemInt(38)&&(b.liveG4Enabled=!0);"rtmpWs"in a.performer&&a.performer.rtmpWs&&(b.chat2InfoWs=a.performer.rtmpWs);b.uiTypeId=ToolApp.userInterfaceType();ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&(b.liveG1Enabled=!1,b.liveG2Enabled=!1,b.liveG4Enabled=!1,"hlsPlaylistFreeMandatory"in a.performer&&a.performer.hlsPlaylistFreeMandatory&&a.performer.hlsPlaylistFree?b.hlsPlaylistVideoForced=a.performer.hlsPlaylistFree:(b.hlsEnabled=!1,b.hls5Enabled=!1,b.initModeMustBe=
"img"));a.performer.cam2cam&&a.performer.cam2cam.ice&&this.streamPlayer.cam2camSetIceConfig(a.performer.cam2cam.ice);ToolApp.isToyControllerLoaded()&&!this.streamPlayer.toyControllerIsActivated()&&(ToolToy.init(this),this.streamPlayer.toyControllerActivate());this.streamPlayer.init(this.modelInfo.id,a.performer.rtmp,this.videoDomId,b)}};c.prototype.historyMessageRender=function(a){var b=this,e=a.length,d=e;if(e){e=this.autoScrollDown;for(this.autoScrollDown=!1;a.length;){var c=a.shift();if(!c)break;
"msgType"in c||(c.msgType="txt");switch(c.msgType){case "txt":if(null===c.texte||void 0===c.texte)continue;switch(c.type){case "Anim":this.historyChatPerformer(c.texte,d);d--;break;case "Cust":this.historyChatCustomer(c.pseudo,c.texte,d),d--}break;case "actionPanel":if("tipItemId"in c&&c.tipItemId){var k=this.actionPanel.getItemById(c.tipItemId);if(k){var g=this.actionPanel.getCategoryById(k.categoryId);g&&(this.historyChatActionPanel(c.pseudo,k,g,d),d--)}}break;case "bonus":this.historyChatBonusAmount(c.pseudo,
c.texte,d);d--;break;case "favorite_added":this.historyChatFavoriteAdded(c.pseudo),d--}}if(this.autoScrollDown=e)2==this.config.displayVersion?($(".chat-content").stop(!1,!1).animate({scrollTop:$(".inner-chat-content").height()},300),window.setTimeout(function(){b.historyLoaded=!0},700)):($(".chat-content").scrollTop(0),this.historyLoaded=!0)}};c.prototype.playerPlay=function(a){var b=this;this.videoJsPlayerEventErrorDone=this.videoJsPlayerEventPlayDone=!1;this.spImageSolo=a.spImageSoloObj;var e=
void 0;this.spImageSolo?(e=this.spImageSolo.getLastImageUrl(),this.spImageSolo.destroy(),this.spImageSolo=void 0):e=a.modelInfo.liveImg;if(ToolPreference.getItemInt(19))$("#action-video-mode-hls").show();else if(!ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification||"hlsPlaylist"in this.modelInfo&&this.modelInfo.hlsPlaylist)if(StreamPlayerLogic.isTechReady()){$("#action-video-mode-hls").hide();"SP_VIDEO_PLAYER_EXTERN_ALREADY_PLAYED"in window&&SP_VIDEO_PLAYER_EXTERN_ALREADY_PLAYED&&(this.videoJsPlayer=
SP_VIDEO_PLAYER_EXTERN_ALREADY_PLAYED);var c=ToolPreference.getItemInt(24);2===c&&Html5XLiveG1.playerAudioOnClickEvent();SP_PlayerSetupOnClickEvent();this.videoJsPlayerHlsPlaylistIsEmpty=!1;this.videoJsPlayer?a.modelInfo.hlsPlaylist?(e?this.videoJsPlayer.setPosterImage(e):this.videoJsPlayer.setPosterImage(this.modelInfo.profileImg),SP_VIDEO_DIV&&SP_VIDEO_DIV.show(),this.videoJsPlayer.on("play",function(){b.videoJsPlayerEventPlayDone=!0}),this.videoJsPlayer.on("error",function(a){1===a.contentTypeGet()&&
(b.videoJsPlayerEventErrorDone=!0);b.streamPlayerInitCb&&b.streamPlayerInitCb()}),e=!1,0<ToolPreference.getItemInt(38)&&a.modelInfo.liveG4&&StreamPlayerXCl.supportLg4()&&(this.videoJsPlayer.play(a.modelInfo.liveG4,5),e=!0),!e&&3===c&&a.modelInfo.liveG2&&StreamPlayerXCl.supportLg2()?this.videoJsPlayer.play(a.modelInfo.liveG2,2):e||this.videoJsPlayer.play(a.modelInfo.hlsPlaylist,1),this.videoJsPlayer=void 0):(this.videoJsPlayer.pluginDestroyAll(),this.videoJsPlayer.setPosterImage(this.modelInfo.profileImg),
this.debugLog("playerPlay: no playlist found in modelInfo"),this.videoJsPlayerHlsPlaylistIsEmpty=!0):this.debugLog("playerPlay: this.videoJsPlayer: undefined")}else $("#action-video-mode-hls").show()};c.prototype.preparePlayer=function(){!ToolPreference.getItemInt(19)&&StreamPlayerLogic.isTechReady()&&(2===ToolPreference.getItemInt(24)&&Html5XLiveG1.playerAudioOnClickPrepare(),this.videoJsPlayer=SP_initHLS_VideoJsDmPrepareBeforeConnection(this.videoDomId),this.preparePlayerStatCalled++,this.videoJsPlayer.attach(void 0,
{volumePercentage:-1}))};c.prototype.initFromRoomInfo=function(a,b){var e=this;if(a.performer.id===this.modelInfo.id){this.applicationRestriction=a.performer.applicationRestriction;ToolBrowser.History.update(this.browserHistoryMethod,{performer:this.modelInfo,page:f.HISTORY_PAGE_ID},a.document.title,a.document.uri);2===this.browserHistoryMethod&&ToolBrowser.isMobileiOS()&&ToolApp.urlCanonicalRemove();ToolBrowser.isStorageSupportMinSizeSession()&&ToolStorage.performerInfoSetLastSeen({uri:a.document.uri,
id:this.modelInfo.id,nickname:this.modelInfo.nickname});2===this.browserHistoryMethod&&ToolApp.trackingPageChanged();(this.performerIsMale=a.performer.info.isMale)?($(".text-female").hide(),$(".text-male").show()):($(".text-female").show(),$(".text-male").hide());this.modelInfoRoom=a.performer.info;this.jDomId.find(".action-display-profile").delay(50).fadeIn();this.favoriteSetState(a.performer.isInFavorite);(ToolBrowser.isVirtualRealitySupported()||this.config.isVirtualRealitySupported)&&this.jDomId.find(".action-vr-mode").fadeIn();
this.setHeaderPerformerProfileImage(this.modelInfo.profileImg);this.menu&&(this.menu.videoSetQuantity(a.performer.videoOnDemand.total),this.menu.videoSetUrl(a.performer.videoOnDemand.vipUri),this.menu.profileSetUrl(a.performer.profileUri),this.menu.photoAndVideoSetUrl(a.performer.mediaUri),this.menu.reviewSetUrl(a.performer.reviewUri),this.menu.scheduleSetUrl(a.performer.scheduleUri),this.menu.toggleScheduleLinkDisplay(a.performer.scheduleUri),this.menu.loveShow());this.jDomId.find(".action-display-profile").attr("href",
a.performer.profileUri);this.jDomId.find(".action-display-note").delay(100).fadeIn();this.jDomId.find(".action-display-category").delay(150).fadeIn();this.jDomId.find(".detail-area-performer-profile-img").delay(150).fadeIn();this.jDomId.find(".action-visibility-switch-sidebar-model-tools-chat").delay(150).fadeIn();var c=this.jDomId.find(".action-open-toy-controller");!0===this.isDesktopNoTouch&&(1===a.performer.sexToyConnected&&null!==a.performer.sexToyType&&(this.sexToyType=a.performer.sexToyType,
c.removeClass("isHidden"),c.attr("title",Translation.tr("titleUserToyControllerAvailable",{"#TOY_NAME#":a.performer.sexToyType,"#NICK#":this.modelInfo.nickname}))),0===a.performer.sexToyConnected&&null===a.performer.sexToyType&&(this.sexToyType="",c.addClass("isHidden"),c.removeAttr("title")));this.config.canUseCredit?(this.actionPanel.setData(a.performer.actionPanelTipItem,a.performer.info.isMale),this.jDomId.find(".action-panel-item-switch").show(),ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification||
this.jDomId.find(".action-fullscreen").fadeIn(),this.jDomId.find(".action-send-love").delay(50).fadeIn(),this.jDomId.find(".action-display-action-panel").delay(100).fadeIn(),this.jDomId.find(".action-video-private-start").delay(150).fadeIn()):(this.actionPanel.setData({}),this.jDomId.find(".action-panel-item-switch").hide(),this.jDomId.find(".action-display-action-panel").hide(),this.jDomId.find(".action-send-love").fadeIn());1!==this.fromAction&&ToolToy.toyStatusReset();ToolChat.performerInfoUpdateUi(this.jDomId,
a.performer.nickname,a.performer.info);ToolChat.performerInfoUpdateUi($("#sidebar-performer"),a.performer.nickname,a.performer.info);ToolChat.performerInfoUpdateUi($("#popupGoToPrivateOrXclusive"),a.performer.nickname,a.performer.info,this.modelInfo.profileImg);ToolChat.performerInfoUpdateUi($("#popupGoToPrivateOnly"),a.performer.nickname,a.performer.info,this.modelInfo.profileImg);ToolApp.userInfoUpdateUi(a.user);"showAction"in a.performer?this.ratingButtonObj.stateSetInitial(a.performer.showAction.rating):
this.ratingButtonObj.stateSetInitial(void 0);if(a.performer.online){this.showPrice=a.performer.showPrice;this.showId=a.performer.showId;this.imgSoloToken=a.performer.imgSoloToken;2==this.config.displayVersion?(this.historyAddTextInDiv(a.performer.message.greeting,"greeting","event"),"historyList"in a.performer.message&&this.historyMessageRender(a.performer.message.historyList)):("historyList"in a.performer.message&&this.historyMessageRender(a.performer.message.historyList),this.historyAddTextInDiv(a.performer.message.greeting,
"greeting","event"));if(a.performer.dailyTop5||a.performer.dailyTop5NewPerformer)this.dailyTop5Timeout&&clearTimeout(this.dailyTop5Timeout),this.dailyTop5Timeout=setTimeout(function(){if(a.performer.dailyTop5NewPerformer&&a.performer.dailyTop5){if(a.performer.dailyTop5.position<a.performer.dailyTop5NewPerformer.position){var b=a.performer.dailyTop5;b.type=0}else a.performer.dailyTop5.position>a.performer.dailyTop5NewPerformer.position?(b=a.performer.dailyTop5NewPerformer,b.type=1):(b=a.performer.dailyTop5,
b.type=0);e.chatDisplayDailyTop5Message(b)}else a.performer.dailyTop5NewPerformer&&!a.performer.dailyTop5?(a.performer.dailyTop5NewPerformer.type=1,e.chatDisplayDailyTop5Message(a.performer.dailyTop5NewPerformer)):!a.performer.dailyTop5NewPerformer&&a.performer.dailyTop5&&(a.performer.dailyTop5.type=0,e.chatDisplayDailyTop5Message(a.performer.dailyTop5))},5E3);c=this.videoJsPlayerEventPlayDone&&!1;this.streamPlayerInitTimeout&&window.clearTimeout(this.streamPlayerInitTimeout);StreamPlayerLogic.isTechReady()?
1<b&&!this.videoJsPlayerEventErrorDone&&!c&&!this.videoJsPlayerHlsPlaylistIsEmpty?(this.streamPlayerInitCb=function(){e.streamPlayerInitTimeout&&(window.clearTimeout(e.streamPlayerInitTimeout),e.streamPlayerInitTimeout=0);e.streamPlayerInitCheck(a)},this.streamPlayerInitTimeout=window.setTimeout(b)):(this.streamPlayerInitCheck(a),this.streamPlayerInitCb=void 0):this.streamPlayerInitCb=function(){e.streamPlayerInitCheck(a)};
this.swipeManager&&(this.helpShowSwipe(),this.imgSoloToken&&this.imgSoloToken.length&&this.swipeManager.useImgSoloToken(this.imgSoloToken));this.chatInitialState&&this.chatInitialState.enterPrivateShow&&this.chatInitialState.showTypeCurrent&&1===this.chatInitialState.showTypeCurrent&&(this.chatInitialState.enterPrivateShow=0,setTimeout(function(){return e.onActionGoToPrivate()},500));this.chatInitialState&&this.chatInitialState.actionPanelOpen&&(this.chatInitialState.actionPanelOpen=0,setTimeout(function(){return e.onActionPanelOpen()},
1E3));!1===this.interfaceOverVideoDisplayed&&this.actionToggleVideoButtonBar();this.fromPageOnlineListType&&3===this.fromPageOnlineListType&&this.fire(Layer.EVENT_ONLINE_LIST_PRE_REFRESH)}else this.fire(f.EVENT_MODEL_STATE,{performerId:a.performer.id,state:1}),this.displayPerformerOffline(),this.fire(Layer.EVENT_ONLINE_LIST_PRE_REFRESH),$(".help-swipe").hide(),this.chatVideoDragManager&&this.chatVideoDragManager.disable(),this.streamPlayer.showStop(51056,!0);"undefined"!==typeof this.chatRedisplayMessage&&
this.chatRedisplayMessage.start()}};c.prototype.chatDisplayDailyTop5Message=function(a){if(!document.getElementById("messageDailyTopPlaceholder")){var b=this.performerIsMale?"Male":"Female";var e="";1<a.position&&"next"in a&&a.next&&(e="<span>"+Translation.tr("infoUserDailytop5ModelNextPosition"+b,{"#MODELNAME#":this.modelInfo.nickname,"#POSITION#":a.next.positionStr,"#AMOUNT#":a.next.tipRequiredAmountWithCurrency})+"</span>");var c=Translation.tr("infoUserDailytop5ModelPosition"+b,{"#MODELNAME#":this.modelInfo.nickname,
"#POSITION#":a.positionStr,"#AMOUNT#":a.tipSumAmountWithCurrency});b=Translation.tr("infoUserDailytop5GiveBonus"+b,{"#MODELNAME#":this.modelInfo.nickname});var l=Translation.tr("actionUserSendTip",{"#pseudo#":this.modelInfo.nickname}),k="",g="";switch(a.type){case 0:k=Translation.tr("titleUserDailyTop5");Application.user&&Application.user.isAuth&&(g='<span><a href="'+ToolApp.Url.getDailyTop5Classic()+'" target="_blank">'+Translation.tr("textUserSeeDailyTop5")+"</a></span>");break;case 1:k=Translation.tr("titleUserDailyTop5NewPerformer"),
Application.user&&Application.user.isAuth&&(g='<span><a href="'+ToolApp.Url.getDailyTop5NewPerformer()+'" target="_blank">'+Translation.tr("textUserSeeDailyTop5NewPerformer")+"</a></span>")}a=['<span id="messageDailyTopPlaceholder">',"   <span>"+['<div class="img-daily-top5">\n   <svg role="img">','      <use xlink:href="'+ToolApp.svgMainGetUrl()+'#dailyTop5" href="'+ToolApp.svgMainGetUrl()+'#dailyTop5"></use>','   </svg>\n</div>\n<div class="title-daily-top5">',"   <strong>"+k+"</strong>","</div>"].join("\n")+
"</span>","   <span>"+c+"</span>","   "+e,"   <span>"+b+"</span>",'   <button class="button expanded js-actionPanel" data-action="tip">'+l+"</button>","   "+g,"</span>"].join("\n");this.historyAddTextInDiv(a,"chat-event daily-top5")}};c.prototype.historyChatRating=function(a,b){var e='<div class="img-action-credit"><svg role="img"><use xlink:href="'+ToolApp.svgMainGetUrl()+'#ratingReview3" href="'+ToolApp.svgMainGetUrl()+'#ratingReview3"></use></svg></div>',c=5*Math.round(10*b/5);e=e+'<div class="text-action">'+
Translation.tr("infoUserFeedbackRatingDoneToPerformer",{"#NICK_USER#":"<strong>"+StringTool.escapeHtml(a)+"</strong>","#NICK_PERFORMER#":"<strong>"+StringTool.escapeHtml(this.modelInfo.nickname)+"</strong>"},{escape:!1});this.historyChatSystemMessage(e+"</div>"+("<span class='star16x star"+c+"'></span>"),"js-chat-rating-free chat-rating-free cursor-pointer")};c.prototype.chatDisplayLowCreditMessage=function(){if(!this.creditTooLowNoticeDisplayed){this.creditTooLowNoticeDisplayed=!0;var a=["<span>"+
Translation.tr("infoUserLowCredit")+"</span>",'<a href="'+Application.Config.url.root+'/credit/" class="button expanded credits">'+Translation.tr("actionUserGetCredit")+"</a>"].join("\n");this.historyAddTextInDiv(a,"chat-event low-credit")}};c.prototype.helpShowSwipe=function(){if(ToolBrowser.isMobile()){var a=$(".help-swipe");if(a.length){var b=a.attr("data-src");if(b){var e=this,c=a[0],l=document.createElement("img");l.onload=function(){a.show();a.unbind("click").bind("click",function(){e.actionRemoveHelpSwipe(a)});
window.setTimeout(function(){e.actionRemoveHelpSwipe(a)},3E3)};l.setAttribute("src",b);c.childNodes[0].insertBefore(l,c.childNodes[0].firstChild)}}}};c.prototype.streamPlayerInitAsyncAjax=function(a){var b=this,e=new Date;this.promiseRoomInfo=h.roomRtmp(this.modelInfo.id,this.fromAction);var c=this;this.streamPlayerLoadTimeout=0;this.promiseRoomInfo.done(function(b){var d=(new Date).getTime()-e.getTime();d=3600-d;1>d&&(d=1);a&&(d=1);c.initFromRoomInfo(b,d)}).fail(function(a){SP_removeStream();$(".text-female").show();
$(".text-male").hide();c.layerGoToOnlineList({messageIdToUse:1})}).always(};c.prototype.messagingInitEmpty=function(){this.messagingDefault={performerId:this.modelInfo.id,performerNickname:this.modelInfo.nickname,performerProfileImg:this.modelInfo.profileImg,subject:"",content:"",sessionMessagingId:0};this.messagingNoCreditDefault={performerNickname:this.modelInfo.nickname};this.lastChatMsg=[]};c.prototype.openBeforeInit=function(a){this.modelInfo={id:a.performer.id,
profileImg:a.performer.profileImg,liveImg:"",nickname:a.performer.nickname,hlsPlaylist:a.performer.hlsPlaylistFree};this.performerIsMale=a.performer.info.isMale;this.openCommon()};c.prototype.actionPanelLayerHide=function(){};c.prototype.openCommon=function(a){var b=this;this.openCommonStatCalled++;this.performerInPrivateChatHistoryMessageAlreadyDisplayed=this.creditTooLowNoticeDisplayed=this.eventConnectTriggered=this.historyLoaded=!1;this.eventConnectTriggeredShowType="";this.virtualKeyBoardHide();
var e=this.jDomId.find(".chat-content");e.empty();e.prepend('<div class="inner-chat-content"></div>');this.menu&&this.menu.performerSetInfo(this.modelInfo.id,this.modelInfo.nickname);this.jDomId.find(".block-chat-content").empty();this.messagingInitEmpty();$(".js-performer-nickname").text(this.modelInfo.nickname);this.tooltipInitCurrent();ToolBrowser.isStorageSupportMinSizeSession()&&ToolStorage.performerRecentAppend(this.modelInfo.id);if(this.layerLastOpen){if("onerror"in window&&window.onerror)window.onerror("[debugOnlyNotCritical] Chat: openCommon: layerLastOpen is not undefined");
this.layerLastOpen.destroy();this.layerLastOpen=void 0}ChatVideoLayer.dispose();this.jDomId.find(".action-panel-item-switch").hide();this.jDomId.find(".action-display-action-panel").hide();this.jDomId.find(".action-send-love").hide();this.jDomId.find(".action-video-private-start").hide();this.jDomId.find(".mode-show").hide();this.jDomId.find(".mode-show.js-mode-show-private").hide();this.jDomId.find(".mode-show.js-mode-show-xclusive").hide();this.jDomId.find(".mode-show.js-mode-show-sneak-peek").hide();
this.jDomId.find(".action-sound").hide();this.jDomId.find(".action-mute").hide();this.jDomId.find(".action-volume").hide();this.headerIsVisible&&!ToolBrowser.isMobile()&&(e=this.jDomId.find(".action-video-close"),e.is(":hidden")&&e.show());this.jDomId.find(".action-scroll-down").hide();this.jDomId.find(".action-get-credit").hide();this.jDomId.find(".action-vr-mode").hide();this.jDomId.find(".block-offline").hide();this.chatEnable();this.showPrice=void 0;this.showId=0;this.nonFreeShowStartDate=void 0;
ToolApp.sessionKeepInitThresholdIntervalMsSet(36E4);this.orientationTimer&&window.clearTimeout(this.orientationTimer);this.playerWidth=this.playerHeight=this.orientationTimer=0;a?this.setStreamVideoBackgroundImage(a):this.modelInfo.liveImg?this.setStreamVideoBackgroundImage(this.modelInfo.liveImg):this.modelInfo.profileImg?this.setStreamVideoBackgroundImage(this.modelInfo.profileImg):this.setStreamVideoBackgroundImage(void 0);this.cam2camReset();this.sneakpeekAlreadyDone=!1;!this.config.canUseCredit&&
this.menu&&this.menu.tipHide();ToolApp.RedirectToCreditPage.timerReset();this.swipeSupposedToBeEnabled=!0;this.swipeInitCurrent();this.swipeManager&&this.swipeManager.highlightStop();this.videoDragInitCurrent();this.emojiInitCurrent();this.initFullscreenActionOnDesktop();ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&($(".stream-video",this.jDomId).addClass("hard-censored"),a=$(".block-avs-notice"),a.show(),a.unbind("click").bind("click",function(){b.avsStartVerification()}));ToolBrowser.loadSvgUseListFromSelector(".action-send-message use");
ToolBrowser.loadSvgUseListFromSelector(".action-speech-to-text-chat-area use");this.config.speechToTextIsEnabled&&!ToolBrowser.isMobile()&&($(".action-speech-to-text-chat-area").removeClass("isHidden").attr("title",Translation.tr("helpChatSpeechToTextDictateStart")),$(".message-content").addClass("isSpeechToTextVisible"))};c.prototype.setStreamVideoBackgroundImage=function(a){a?(this.jDomId.find(".stream-video").css({"background-size":"cover","background-image":"url("+a+")"}),StreamPlayerLogic.isReady()&&
SP_modeIMG_updateContent(a)):this.jDomId.find(".stream-video").css({"background-image":"none"})};c.prototype.setHeaderPerformerProfileImage=function(a){ToolChat.performerIconSVGToImg(a)};c.prototype.swipeInitCurrent=function(){if(this.config.swipeEnabled&&this.swipeManager&&this.onlineList&&ToolPreference.getItemInt(10)){var a=this.onlineList.performerGetNext(this.modelInfo.id),b=this.onlineList.performerGetPrevious(this.modelInfo.id),e=0;a&&a.id!==this.modelInfo.id&&e++;b&&b.id!==this.modelInfo.id&&
e++;0<e?(this.swipeManager.setupPerformer(a,b),this.swipeSupposedToBeEnabled&&this.swipeManager.enable()):(this.swipeSupposedToBeEnabled=!1,this.swipeManager.disable())}};c.prototype.videoDragInitCurrent=function(){this.config.videoDragToResizeEnabled&&this.chatVideoDragManager&&ToolPreference.getItemInt(43)&&this.chatVideoDragManager.enable()};c.prototype.prepareFullscreenModeDesktop=function(){if(!ToolBrowser.isMobile()){var a=this;if(ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification)this.toggleFullscreenActionVisibility(".action-only-toggle-theater-mode",
!1),this.toggleFullscreenActionVisibility(".action-only-toggle-fullscreen-mode",!1);else{var b=ToolBrowser.viewPortSize();$(window).keydown(function(b){if("F11"===b.key||122===b.keyCode||122===b.which)a.toggleFullscreenActionVisibility(".action-only-toggle-theater-mode",!0),a.toggleFullscreenActionVisibility(".action-only-toggle-fullscreen-mode",!1),a.modeFullscreenViaF11=!0,a.actionGoToTheaterMode()});$(window).resize(function(){b=ToolBrowser.viewPortSize();ToolBrowser.isViewPortSizeInFullscreen(b)||
(a.toggleFullscreenActionVisibility(".action-only-toggle-theater-mode",!1),a.toggleFullscreenActionVisibility(".action-only-toggle-fullscreen-mode",!0),a.modeFullscreenViaF11=!1)});this.initFullscreenActionOnDesktop()}}};c.prototype.initFullscreenActionOnDesktop=function(){ToolBrowser.isMobile()||(ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification?(this.toggleFullscreenActionVisibility(".action-only-toggle-theater-mode",!1),this.toggleFullscreenActionVisibility(".action-only-toggle-fullscreen-mode",
!1)):this.modeFullscreenViaF11?(this.toggleFullscreenActionVisibility(".action-only-toggle-theater-mode",!0),this.toggleFullscreenActionVisibility(".action-only-toggle-fullscreen-mode",!1)):(this.toggleFullscreenActionVisibility(".action-only-toggle-theater-mode",!1),this.toggleFullscreenActionVisibility(".action-only-toggle-fullscreen-mode",!0)))};c.prototype.toggleFullscreenActionVisibility=function(a,b){var e=this.jDomId.find(a);b?e.show():e.hide()};c.prototype.tooltipInitCurrent=function(){this.jDomId.find(".action-video-private-start").attr("title",
Translation.tr("actionChatStartPrivateShow",{"#pseudo#":this.modelInfo.nickname}));this.jDomId.find(".action-send-love").attr("title",Translation.tr("titleLoveAdd",{"#pseudo#":this.modelInfo.nickname}));var a=Translation.tr("actionFavoriteAdd",{"#MODEL#":this.modelInfo.nickname});Application.user&&!Application.user.isAuth&&(a=[a,Translation.tr("infoUserActionSignup")].join("\n"));this.jDomId.find(".action-add-favorite").attr("title",a);this.jDomId.find(".action-remove-favorite").attr("title",Translation.tr("actionFavoriteRemove",
{"#MODEL#":this.modelInfo.nickname}));this.jDomId.find(".action-display-action-panel").attr("title",Translation.tr("actionUserSendTip",{"#pseudo#":this.modelInfo.nickname}));this.jDomId.find(".action-rating-free-show").attr("title",Translation.tr("titleUserFeedbackProvideShowOf",{"#NICK#":this.modelInfo.nickname}))};c.prototype.emojiInitCurrent=function(){var a=this;if(EmojiTool.isSupported()){var b={emojiCategoryList:{},mainContainerSelector:"#unicodeEmojiChatArea",textareaSelector:".message-content",
emojiCategoryLabelList:EmojiTool.getCategoryLabelList(),triggerButtonConfig:{enabled:!0,selector:".action-open-emoji-chat-area",autoPosition:UnicodeEmojiV2.Library.AUTO_POSITION_TOP,autoPositionMargin:5}};"undefined"!==typeof window.smileyConfig&&(b.emojiCategoryList=window.smileyConfig);1==this.config.displayVersion&&(b.triggerButtonConfig.autoPosition=UnicodeEmojiV2.Library.AUTO_POSITION_BOTTOM,this.jDomId.find(b.mainContainerSelector).addClass("auto-position-"+UnicodeEmojiV2.Library.AUTO_POSITION_BOTTOM));
this.emojiManager.init(b);this.emojiManager.on(200,function(){a.swipeDisableTemporary()});this.emojiManager.on(201,function(){a.swipeEnableTemporary()});ToolBrowser.loadSvgUseListFromSelector(".action-open-emoji-chat-area use");$(".message-content").addClass("emojiIsVisible");$(".action-open-emoji-chat-area").show()}else $(".message-content").removeClass("emojiIsVisible"),$(".action-open-emoji-chat-area").hide()};c.prototype.speechToTextInit=function(){var a=this;this.config.speechToTextIsEnabled&&
!ToolBrowser.isMobile()&&(this.speechToTextManager=new SpeechToTextTool.Manager({}),this.speechToTextManager.setPredictionLanguage(ToolPreference.getItem(49)),this.speechToTextManager.on(3,function(b,e){var c=a.jDomId.find(".message-content");c.val(c.val()+(0<c.val().length?" ":"")+e).focus()}))};c.prototype.cam2camCanBeVisible=function(){this.jDomId.find(".action-cam2cam-share-start").show();var a=$(".action-cam2cam-share-start span.txt",this.jDomId);a.show();window.setTimeout(function(){a.fadeOut()},
6E3)};c.prototype.cam2camReset=function(){this.jDomId.find(".action-cam2cam-share-start").hide();this.jDomId.find(".action-cam2cam-share-video-start").hide();this.jDomId.find(".action-cam2cam-share-video-stop").hide();this.jDomId.find(".action-cam2cam-share-audio-start").hide();this.jDomId.find(".action-cam2cam-share-audio-stop").hide();this.cam2camState=1};c.prototype.cam2camOnClickStart=function(){this.jDomId.find(".action-cam2cam-share-start").hide();ToolToy.toyPanelForceClose();switch(this.cam2camState){case 1:this.streamPlayer.cam2camIsAvailable()?
(this.streamPlayer.cam2camSetVideoFacingMode(ToolPreference.getItemInt(44)),this.streamPlayer.cam2camStart()?this.historyChatSystemMessage(Translation.tr("infoMediaWebcamShareInProgress")):this.historyChatSystemMessage(Translation.tr("errorMediaWebcamCannotBeShared"))):this.historyChatSystemMessage(Translation.tr("errorMediaWebcamCannotBeShared"))}};c.prototype.cam2camOnClickAudioStart=function(){switch(this.cam2camState){case 1:break;case 3:this.cam2camState=2;break;case 5:this.cam2camState=4;break;
default:return}this.jDomId.find(".action-cam2cam-share-audio-stop").show();this.jDomId.find(".action-cam2cam-share-audio-start").hide();this.streamPlayer.cam2camAudioSetState(!0);this.historyChatSystemMessage(Translation.tr("infoMediaAudioSharedYes"))};c.prototype.cam2camOnClickAudioStop=function(){switch(this.cam2camState){case 1:break;case 2:this.cam2camState=3;break;case 4:this.cam2camState=5;break;default:return}this.jDomId.find(".action-cam2cam-share-audio-stop").hide();this.jDomId.find(".action-cam2cam-share-audio-start").show();
this.streamPlayer.cam2camAudioSetState(!1);this.historyChatSystemMessage(Translation.tr("infoMediaAudioSharedNoMore"))};c.prototype.cam2camOnClickVideoStart=function(){switch(this.cam2camState){case 1:break;case 4:this.cam2camState=2;break;case 5:this.cam2camState=3;break;default:return}this.jDomId.find(".action-cam2cam-share-video-start").hide();this.jDomId.find(".action-cam2cam-share-video-stop").show();this.streamPlayer.cam2camVideoSetState(!0);this.resizeLogic();this.feedbackVideoResize instanceof
ToolCam2camFeedback.Manager&&this.feedbackVideoResize.setDimensionsTimeout(0);ToolApp.isToyControllerLoaded()&&ToolToy.toyPanelResize()};c.prototype.cam2camOnClickVideoStop=function(){switch(this.cam2camState){case 1:break;case 2:this.cam2camState=4;break;case 3:this.cam2camState=5;break;default:return}this.jDomId.find(".action-cam2cam-share-video-stop").hide();this.jDomId.find(".action-cam2cam-share-video-start").show();this.streamPlayer.cam2camVideoSetState(!1);ToolApp.isToyControllerLoaded()&&
ToolToy.toyPanelResize()};c.prototype.userCreditAmountWithCurrencyUpdateUi=function(a){a.creditAmount<=c.LOW_CREDIT_AMOUNT_THRESHOLD&&this.jDomId.find(".action-get-credit").addClass("low-credit")};c.prototype.openBefore=function(a){this.modelInfo=a.modelInfo;var b=void 0;a.spImageSoloObj&&(b=a.spImageSoloObj.getLastImageUrl());this.openCommon(b);this.playerPlay(a);var c=this;this.menu&&this.menu.favoriteSetCanAdd(!0);this.streamPlayerLoadTimeout=window.setTimeout(
1)};c.prototype.openAfterInit=function(a,b){this.isVisibleState=!0;this.browserHistoryMethod=b;this.resizeLogic();this.initFromRoomInfo(a,0)};c.prototype.openAfter=function(a){this.isVisibleState=!0;this.browserHistoryMethod=a;this.spImageSolo&&SP_IMG_STREAM&&SP_IMG_STREAM.length&&this.spImageSolo.setRenderDom(SP_IMG_STREAM[0]);this.setHeaderPerformerProfileImage(this.modelInfo.profileImg);this.resizeLogic();$(window).scrollTop();2===ToolPreference.getItemInt(18)&&this.actionToggleFullscreen()};c.prototype.canHandleHistoryPop=
c.prototype.closeBefore=c.prototype.close=function(a){void 0===a&&(a=51016);this.streamPlayer.showStop(a,!0);this.spImageSolo&&(this.spImageSolo.destroy(),this.spImageSolo=void 0);this.promiseRoomInfo&&(this.promiseRoomInfo.jqXHR.abort(),this.promiseRoomInfo=void 0);this.chatNickname="";"SP_VIDEO_PLAYER_EXTERN_ALREADY_PLAYED"in window&&SP_VIDEO_PLAYER_EXTERN_ALREADY_PLAYED||this.preparePlayer();this.eventConnectTriggered=
this.videoJsPlayerEventPlayDone=this.videoJsPlayerEventErrorDone=!1;this.eventConnectTriggeredShowType="";this.streamPlayerInitCb=function(){};this.dailyTop5Timeout&&(clearTimeout(this.dailyTop5Timeout),this.dailyTop5Timeout=0);this.isVisibleState=!1;this.isLoveAdded=0;this.sexToyType="";this.streamPlayerLoadTimeout&&(window.clearTimeout(this.streamPlayerLoadTimeout),this.streamPlayerLoadTimeout=0);this.streamPlayerInitTimeout&&(window.clearTimeout(this.streamPlayerInitTimeout),this.streamPlayerInitTimeout=
0);this.layerLastOpen&&(this.layerLastOpen.close(),this.layerLastOpen=void 0);this.cam2camReset();this.swipeDisable();this.gyroscopeManager&&this.gyroscopeManager.isCollectingData()&&this.gyroscopeManager.disable();this.chatVideoDragManager&&(this.chatVideoDragManager.reset(),this.chatVideoDragManager.disable());this.nonFreeShowStartDate=void 0;ToolApp.sessionKeepInitThresholdIntervalMsSet(36E4);"undefined"!==typeof this.chatRedisplayMessage&&this.chatRedisplayMessage.stop();this.emojiManager.destroy();
ToolToy.toyButtonHide();ToolToy.toyPanelClose()};c.prototype.virtualKeyBoardHide=function(){if(ToolBrowser.isMobile()){try{document.activeElement&&document.activeElement.blur(),this.jDomId.find(".message-content").blur()}catch(a){}this.jDomId.focus()}};c.prototype.resizeIfOrientationChanged=function(){if(ToolBrowser.Orientation.getValue()===this.orientationInfoLayout)ToolBrowser.viewPortSize().height!==this.viewPortHeight&&(this.orientationTimer&&(window.clearTimeout(this.orientationTimer),this.orientationTimer=
0),this.resizeLogic());else{this.orientationTimer&&window.clearTimeout(this.orientationTimer);this.gyroscopeManager&&(this.gyroscopeManager.isCollectingData()&&this.gyroscopeManager.disable(),this.gyroscopeManager.orientationChanged());this.virtualKeyBoardHide();var a=this;this.orientationTimer=window.setTimeout(function(){ToolBrowser.Orientation.getValue();a.resizeLogic();a.orientationTimer=0},750)}};c.prototype.orientationChanged=c.prototype.browserInStandaloneMode=
function(){return"undefined"!==typeof window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches};c.prototype.getIosTopSafeHeight=function(){if(0<this.iosTopSafeHeight)return this.iosTopSafeHeight;if(this.browserInStandaloneMode()){$('<div id="'+c.IOS_SAFE_AREA_ID_SELECTOR+'"></div>').css({position:"absolute",display:"none",padding:0,margin:0}).appendTo("body");var a=$("#"+c.IOS_SAFE_AREA_ID_SELECTOR);this.iosTopSafeHeight=a.innerHeight()-5;a.remove()}return this.iosTopSafeHeight};
c.prototype.resizeOnOrientationChangedDetected=c.prototype.avsNoticeImageSetVisibility=function(a){var b=$(".block-avs-notice");b=$("img.lock18yo",b);a?(b.show(),400>ToolBrowser.viewPortSize().height?b.css({height:"60px"}):b.css({height:"auto"})):b.hide()};c.prototype.resizeLogic=function(a){void 0===a&&(a=0);this.jDomId.height();var b=document.getElementById("l-chat");b&&"style"in b&&"overflow"in b.style?b.style.overflow="hidden":b=
null;var c=ToolBrowser.viewPortSize(),d=this.currentLayoutIsPortrait;this.currentLayoutIsPortrait=c.height>c.width;this.viewPortHeight=c.height;d!==this.currentLayoutIsPortrait&&this.resizeOnOrientationChangedDetected();d=$(".stream-video",this.jDomId);var l=$(".feedbackVideoClient",this.jDomId),k=$(".stream-video-section",this.jDomId),g=$(".stream-chat",this.jDomId),f=$("#l-chat"),h=$("#l-chat-sidebar-swipe"),q=4/3,n=46;this.headerIsVisible||(n=0);var m=c.height+a;a=c.width+a;this.jDomId.offset();
m-=n;n=50;var p=10;var r=this.getIosTopSafeHeight();m-=r;460>c.width&&(this.currentLayoutIsPortrait=!0);if(this.currentLayoutIsPortrait){f.addClass("portrait");h.addClass("portrait");f.removeClass("landscape");h.removeClass("landscape");c=Math.floor(a/q);var t=a;var u=m-c;120>u&&(c=m-120,u=m-c);f=a;var v=c;var A=0;var w=c;var x=f;r=h=0;var y="relative";this.modeFullscreen&&(c=m,f=Math.round(c*q),v=c-40,x=a,w=m,h=Math.round((x-f)/2),y="absolute",p=Math.abs(h)+10,n=Math.abs(r)+85);q=Math.round(a/5);
var z=Math.round(q/(4/3));ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&this.avsNoticeImageSetVisibility(this.modeFullscreen)}else f.addClass("landscape"),h.addClass("landscape"),f.removeClass("portrait"),h.removeClass("portrait"),c=m,f=Math.floor(c*q),u=m,t=a-f,250>t&&(t=250,f=a-t),v=0,A=f,w=m,x=f,r=h=0,y="relative",this.modeFullscreen&&(f=a,c=Math.floor(f/q),v=m-40,t=250,A=a-t,x=a,w=m,h=0,r=Math.round((w-c)/2),y="absolute",n=Math.abs(r)+45),z=Math.round(m/5),q=Math.round(4/3*
z),ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&this.avsNoticeImageSetVisibility(!0);if(100>q||75>z)q=100,z=75;$(".chat-content",this.jDomId).css({height:u-40+"px"});this.jDomId.css({width:a+"px",height:m+"px"});g.css({top:v+"px",left:A+"px",width:t+"px",height:u+"px"});k.css({width:x+"px",height:w+"px"});this.playerHeight=c;this.playerWidth=f;this.orientationInfoLayout=ToolBrowser.Orientation.getValue();d.css({left:h+"px",top:r+"px",position:y});l.length&&l.css({right:p+"px",
bottom:n+"px",width:q+"px",height:z+"px"});this.streamPlayer.resize(f,c);this.config.swipeEnabled&&this.swipeManager&&(this.swipeManager.resizeLayout(r,f,c,v,u),this.swipeManager.resize());this.config.videoDragToResizeEnabled&&this.chatVideoDragManager&&this.chatVideoDragManager.update(this.modeFullscreen,{videoWidth:x,videoHeight:w,playerWidth:f,playerHeight:c,playerTop:r,playerLeft:h,playerPosition:y,chatHeight:u,chatWidth:t,chatContentHeight:u-40,chatTop:v,chatLeft:A});this.feedbackVideoResize&&
(this.feedbackVideoResize.updateInitialWidth(l.width()),this.feedbackVideoResize.updateInitialHeight(l.height()),this.feedbackVideoResize.setDimensionsTimeout(0));b&&(b.style.overflow="")};c.prototype.resize=function(){if(ToolBrowser.isMobile()&&!ToolBrowser.isModePortraitFromViewPort()&&ToolMenu.user.isOpen()){var a=ToolMenu.user.element();a.hasClass("is-mobile-landscape-chat-page")||a.addClass("is-mobile-landscape-chat-page")}if(2===this.config.displayVersion)this.resizeLogic();else{this.resizeTimer&&
window.clearTimeout(this.resizeTimer);var b=this;ToolBrowser.isMobile()?this.resizeTimer=window.setTimeout(function(){b.resizeIfOrientationChanged();b.resizeTimer=0;b.config.swipeEnabled&&b.swipeManager&&b.swipeManager.resize()},250):this.resizeTimer=window.setTimeout(function(){b.resizeLogic();b.resizeTimer=0;b.config.swipeEnabled&&b.swipeManager&&b.swipeManager.resize()},100)}};c.prototype.scroll=function(){};c.prototype.isVisible=function(){return this.isVisibleState};c.prototype.actionFavoriteAdd=
function(){var a=this;Application.Config.isUserConnected?ToolPerformer.Ajax.favoriteAdd(this.modelInfo.id).done(function(b){a.favoriteSetState(1);if(NotificationTool.canShowPopup(40)){var c=new Layer.FavoriteNotification;c.open({performerNickname:a.modelInfo.nickname,performerThumbnail:a.modelInfo.profileImg});a.layerHasBeenOpen(c)}else{var d=new Layer.InfoNoTitle;d.open(Translation.tr("infoPerformerFavoriteAdded",{"#NICK#":'<span class="js-performer-nickname">'+a.modelInfo.nickname+"</span>"},{escape:!1}));
a.layerHasBeenOpen(d);setTimeout(function(){d.close()},3E3)}0==b.flood?(c=void 0,"chatNotification"in b&&(c=b.chatNotification),a.streamPlayer.favoriteAdded(c)):a.historyChatFavoriteAdded(Application.user.nickname)}).fail(function(a){Layer.openErrorAjax(a)}).always(function(){}):a.layerRegisterSuggestion({cancelButton:!0,messageIdToUse:4,backToOnlineListButton:!1},!1)};c.prototype.actionFavoriteRemove=function(){var a=this;ToolPerformer.Ajax.favoriteRemove(this.modelInfo.id).done(function(b){a.favoriteSetState(0);
var c=new Layer.InfoNoTitle;c.open(Translation.tr("infoPerformerFavoriteRemoved",{"#NICK#":'<span class="js-performer-nickname">'+a.modelInfo.nickname+"</span>"},{escape:!1}));a.layerHasBeenOpen(c);setTimeout(function(){c.close()},3E3)}).fail(function(a){Layer.openErrorAjax(a)}).always(function(){})};c.prototype.actionGoToListOnline=function(a){void 0===a&&(a=51020);this.nonFreeShowStartDate&&!this.streamPlayer.stateConnectionIsDisconnectedOrError()?this.displayConfirmExitPrivate(a,this.nonFreeShowStartDate):
this.showStop(a)};c.prototype.actionGoToProfile=function(a,b){void 0===b&&(b=51125);void 0===this.nonFreeShowStartDate?ToolBrowser.redirectToUrl(a):this.nonFreeShowStartDate&&!this.streamPlayer.stateConnectionIsDisconnectedOrError()?this.displayConfirmExitPrivate(b,this.nonFreeShowStartDate,a):this.showStop(b,a)};c.prototype.actionMessagingSend=function(){if(Application.Config.isUserConnected)if(Application.Config.messagingAllowed==AppPerformerProfile.MESSAGING_ALLOWED_YES){var a=new Layer.MessageSend,
b=this;a.on(Layer.EVENT_SUBMIT,function(c,e){c.loaderShow();b.messagingDefault=e;ToolPerformer.Ajax.messageSend(e.performerId,e.subject,e.content,e.sessionMessagingId).done(function(a){c.close();b.messagingInitEmpty();NotificationTool.canShowPopup(42)&&(a=new Layer.MessagingNotification,a.open({performerNickname:e.performerNickname,performerProfileImg:e.performerProfileImg}),b.layerHasBeenOpen(a))}).fail(function(b){a.errorDisplay(b)}).always(function(){c.loaderHide()})});a.open(this.messagingDefault);
this.layerHasBeenOpen(a)}else{var c=new Layer.MessageSendNoCredit;c.open(this.messagingNoCreditDefault);this.layerHasBeenOpen(c)}else this.layerRegisterSuggestion({cancelButton:!0,messageIdToUse:9,backToOnlineListButton:!1},!1)};c.prototype.actionReportAbuse=c.prototype.actionGoToTheaterMode=function(){this.fullscreenLayoutChange(!0,!1);this.resizeLogic()};c.prototype.actionTipSetupEventHandler=function(a){var b=this;a.on(Layer.EVENT_TIP,function(a,
c){if(Application.Config.isUserConnected){a.loaderShow();var e=ToolPerformer.Ajax.tip(c.performerId,c.amount,b.showId,ToolApp.userInterfaceType());b.tipDefaultAmount=c.amount;e.done(function(c){a.close();var e=void 0;"chatNotification"in c&&(e=c.chatNotification);b.streamPlayer.tipSent(c.showId,c.connexionShowId,c.ui.content,0,e);ToolApp.userInfo.isAuth&&2>ToolApp.userInfo.creditAmount&&b.chatDisplayLowCreditMessage();b.onTipResult(c)}).fail(function(c){a.close();c=Layer.openErrorAjax(c);b.layerHasBeenOpen(c)}).always(function(){a.loaderHide()})}else b.layerRegisterSuggestion({cancelButton:!0,
messageIdToUse:6,backToOnlineListButton:!1},!1)})};c.prototype.onTipResult=function(a){this.ratingButtonObj.onTipResult(a)};c.prototype.actionTip=function(){if(Application.Config.isUserConnected){var a=new Layer.Tips;this.actionTipSetupEventHandler(a);a.open({amount:this.tipDefaultAmount,performerId:this.modelInfo.id,performerNickname:this.modelInfo.nickname,userInterface:1});this.layerHasBeenOpen(a)}else this.layerRegisterSuggestion({cancelButton:!0,messageIdToUse:6,backToOnlineListButton:!1},!1)};
c.prototype.layerHasBeenOpen=function(a){this.layerLastOpen=a;var b=this;this.layerLastOpen.on(Layer.EVENT_CLOSE,function(){b.layerLastOpen&&(b.layerLastOpen.destroy(),b.layerLastOpen=void 0)});this.layerLastOpen.on(2,function(){b.layerLastOpen&&(b.layerLastOpen.destroy(),b.layerLastOpen=void 0)});this.layerLastOpen.on(Layer.EVENT_CLOSE_AND_GOTO_ONLINE_LIST,function(){b.layerLastOpen&&(b.layerLastOpen.destroy(),b.layerLastOpen=void 0)});this.layerLastOpen.on(Layer.EVENT_CLOSE_AND_GOTO_PERFORMER_PROFILE,
;ToolMenu.hideAll()};c.prototype.actionRatingShowFree=function(){var a=this;if(!ToolApp.redirectToLoginIfNotConnected()&&!this.promiseRoomInfo)switch(this.ratingButtonObj.stateGet()){case 1:var b=this.ratingButtonObj.creditInfoGet(),c=new Layer.Tips;this.actionTipSetupEventHandler(c);c.open({userInterface:2,amount:b.remainingAmount,amountWithCurrency:b.remainingAmountWithCurrency,performerNickname:this.getPerformerNickname(),
performerId:this.modelInfo.id});this.layerHasBeenOpen(c);break;case 2:var d=new Layer.ShowRating;d.open({layoutId:2,creditNoMoreAvailable:!1,performerNickname:this.getPerformerNickname(),performerId:this.modelInfo.id,note:0,noteAverage:void 0,message:""});this.layerHasBeenOpen(d);var f=this.streamPlayer.getShowIdConnexion();d.on(Layer.EVENT_SUBMIT,function(b,c){d.getNote()&&(b.close(),a.ratingButtonObj.updateRatingData({status:3,remainingAmountWithCurrency:"",remainingAmountEur:0,remainingAmount:0}),
ToolPerformer.Ajax.showRatingTip(c.performerId,0,f,c.note,c.message).done(function(b){b&&("rating"in b&&b.rating&&a.ratingButtonObj.updateRatingData(b.rating),"chatNotification"in b&&b.chatNotification&&a.streamPlayer.ratingDone(b.chatNotification))}).fail(function(a){}).always(function(){}))});break;case 3:c=new Layer.InfoWithTitle,c.open(Translation.tr("titleUserFeedbackProvideShowOf",{"#NICK#":'<span class="js-performer-nickname">'+StringTool.escapeHtml(this.getPerformerNickname())+"</span>"},
{escape:!1}),Translation.tr("infoUserFeedbackAlreadyProvidedRecently")),this.layerHasBeenOpen(c)}};c.prototype.actionLoveAdd=function(){if(!this.redirectIfRestricted()){var a=new Layer.InfoNoTitle;if(0<this.isLoveAdded){var b=Translation.tr("infoUserLoveAlreadySendToModel",{"#MODEL#":'<span class="js-performer-nickname">'+this.modelInfo.nickname+"</span>"},{escape:!1});a.open(b);this.layerHasBeenOpen(a)}else{this.isLoveAdded=1;b=ToolPerformer.Ajax.loveAdd(this.modelInfo.id);var c=this,d=this.jDomId.find(".action-send-love");
b.done(function(b){if("success"in b&&b.success){if(b.ignored){var e=Translation.tr("infoUserLoveAlreadySendToModel",{"#MODEL#":'<span class="js-performer-nickname">'+c.modelInfo.nickname+"</span>"},{escape:!1});a.open(e)}else e=Translation.tr("infoUserSendLoveToModelName",{"#MODEL#":'<span class="js-performer-nickname">'+c.modelInfo.nickname+"</span>"},{escape:!1}),a.open(e),c.streamPlayer.loveSent(b.chatNotification);setTimeout(function(){a.close()},3E3)}else a.open(Translation.tr("infoPerformerLoveAddedAlready"));
d.attr("title",Translation.tr("infoLoveAddedAlready"));c.layerHasBeenOpen(a)}).fail(function(a){Layer.openErrorAjax(a)}).always(function(){})}}};c.prototype.actionToggleVideoButtonBar=function(){if(!this.swipeManager||!this.swipeManager.hasBeDoneRecently(200))if(!this.gyroscopeManager||!this.gyroscopeManager.stoppedRecently(200)){var a=$(".block-performer-detail-area, .block-actions, .block-chat-content, .block-exit, .block-cam2cam, .block-sound, .block-hls-sound, .block-vr");if(this.interfaceOverVideoDisplayed){if(this.streamPlayer.isShowInProgress()||
ToolBrowser.isMobile())a.fadeOut(250),this.interfaceOverVideoDisplayed=!1,this.streamPlayer.controlBarVisibilitySet(!1),ToolToy.toyPanelForceClose(),a=$(".message-content"),this.inputMessagePlaceholderContent||(this.inputMessagePlaceholderContent=a.attr("placeholder")),a.attr("placeholder","")}else a.fadeIn(250),this.interfaceOverVideoDisplayed=!0,this.streamPlayer.controlBarVisibilitySet(!0),this.inputMessagePlaceholderContent&&(a=$(".message-content"),a.attr("placeholder",this.inputMessagePlaceholderContent));
ToolMenu.media&&ToolMenu.media.isOpen()&&ToolMenu.media.hide();this.virtualKeyBoardHide()}};c.prototype.actionRemoveHelpSwipe=c.prototype.actionChatFontSize=function(){var a=ToolPreference.getItemInt(17);a++;4<a&&(a=1);this.setChatFontSize(a);this.displayChatFontSizeBtn();var b=ToolPreference.getInstance();b.setItem(17,a);b.save({category:"Settings",action:"FontChange",name:"Size"+a.toString(10)})};c.prototype.setChatFontSize=function(a){void 0==
a&&(a=ToolPreference.getItemInt(17),1>a?a=1:4<a&&(a=4));var b=$(".chat-content");b.removeClass("textSize1 textSize2 textSize3 textSize4");b.addClass("textSize"+a);b=$(".block-chat-content");b.removeClass("textSize1 textSize2 textSize3 textSize4");b.addClass("textSize"+a)};c.prototype.displayChatFontSizeBtn=function(a){void 0===a&&(a=!1);var b=$("#l-chat .action-font-size");if(a)b.show(),this.fontSizeBtnTimer=setTimeout(function(){b.stop();b.fadeOut(600)},5E3);else{var c=this;b.stop();b.fadeIn(300,
function(){0<c.fontSizeBtnTimer&&clearTimeout(c.fontSizeBtnTimer);c.fontSizeBtnTimer=setTimeout(5E3)})}};c.prototype.actionChatScrollDownBtn=function(){var a=$("#l-chat .action-scroll-down");$(".chat-content").animate({scrollTop:$(".inner-chat-content").height()},300);a.fadeOut()};c.prototype.displayChatScrollDownBtn=function(){var a=$("#l-chat .action-scroll-down"),b=$(".chat-content"),c=b.scrollTop();b=b.height();150<$(".inner-chat-content").height()-b-c?(this.autoScrollDown=
!1,a.is(":hidden")&&a.fadeIn()):(this.autoScrollDown=!0,a.is(":visible")&&a.fadeOut())};c.prototype.displayConfirmExitPrivate=function(a,b,c){var e=this;void 0===a&&(a=51024);var f=new Layer.ConfirmExitPrivate;f.on(Layer.EVENT_CONFIRM,;f.open(this.eventConnectTriggeredShowType,b);this.layerHasBeenOpen(f)};c.prototype.fullscreenLayoutChange=function(a,b){var c=$("#l-chat-sidebar-swipe .chat-sidebar-chat .input"),d=$("#l-chat-sidebar-swipe"),f=$("#l-chat"),
k=$(".action-fullscreen",f),g=ToolBrowser.isMobile(),h=this.getIosTopSafeHeight();if(a){if(this.headerHiddenBecauseOfPrivateShow||(g?this.layoutHeaderHide():this.layoutHeaderShow()),f.addClass("fullscreen"),d.addClass("fullscreen"),g?k.attr("title",Translation.tr("infoMediaExitFullscreen")):k.attr("title",Translation.tr("infoMediaDefaultView")),0<h&&d.css({position:"absolute","margin-top":h,height:"+="+h+5}),c.css("visibility","hidden"),$("#l-chat .action-font-size").hide(),b)for(c=0;c<this.lastChatMsg.length;c++)this.lastChatMsg[c]&&
this.historyAddHtmlFullscreen(this.lastChatMsg[c])}else $(".block-chat-content").html(""),f.removeClass("fullscreen"),d.removeClass("fullscreen"),0<h?d.css({position:"fixed","margin-top":h,height:"+="+h+5}):d.css({position:"fixed"}),c.css("visibility","visible"),g?k.attr("title",Translation.tr("infoMediaEnterFullscreen")):k.attr("title",Translation.tr("infoMediaTheaterMode")),this.headerHiddenBecauseOfPrivateShow||(g?this.currentLayoutIsPortrait?this.layoutHeaderShow():this.layoutHeaderHide():this.layoutHeaderShow()),
2==this.config.displayVersion&&$(".chat-content").animate({scrollTop:$(".inner-chat-content").height()},300);this.modeFullscreen=a};c.prototype.actionToggleFullscreen=function(a){if(!this.redirectIfRestricted()){var b=!this.modeFullscreen,c=!1;if(!0===a||!1===a)b=a,c=!0;else{a=ToolPreference.getInstance();var d=b?1:0;a.setItem(18,d);a.save({category:"Settings",action:"VideoFullScreen",name:0<d?"Yes":"No"})}d=0;c||!ToolBrowser.isMobile()||ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification||
(d=ToolPreference.getItemInt(21));a=!1;d&&(d=ToolBrowserFullscreen.getInstance(),b&&!1===d.isFullscreenEnabled()&&(d.enter(),a=!0),b||!0!==d.isFullscreenEnabled()||(d.exit(),a=!0));this.fullscreenLayoutChange(b,!c);this.modeFullscreenEnabledSetting=this.modeFullscreen;this.isVisibleState&&(a?this.virtualKeyBoardHide():this.resizeLogic())}};c.prototype.actionToggleFullscreenModeOnDesktop=function(){if(!this.redirectIfRestricted()){var a=ToolBrowserFullscreen.getInstance();a.isFullscreenEnabled()&&
(a.exit(),this.fullscreenLayoutChange(!1,!1));a.isFullscreenEnabled()||(a.enter(),this.fullscreenLayoutChange(!0,!1));this.resizeLogic()}};c.prototype.actionFullscreenInputMode=function(a){a?this.modeFullscreen||this.fullscreenLayoutChange(!0,!0):this.modeFullscreenEnabledSetting||this.fullscreenLayoutChange(!1,!0);this.resizeLogic()};c.prototype.layoutHeaderHide=function(){this.headerIsVisible=!1;var a=$("#l-chat"),b=$("#l-chat-sidebar-swipe"),c=$("#sidebar-performer");b.addClass("header-hidden");
a.addClass("header-hidden");c.addClass("sidebar-top");this.jDomId.find(".action-video-close").show()};c.prototype.layoutHeaderShow=function(){this.headerIsVisible=!0;var a=$("#l-chat"),b=$("#l-chat-sidebar-swipe"),c=$("#sidebar-performer");b.removeClass("header-hidden");a.removeClass("header-hidden");c.removeClass("sidebar-top");ToolBrowser.isMobile()&&this.jDomId.find(".action-video-close").hide()};c.prototype.actionSoundMutedHideControl=c.prototype.actionSoundSetMuted=function(a,b){if(!0===a)this.jDomId.find(".action-mute").show(),this.jDomId.find(".action-sound").hide(),this.jDomId.find(".action-volume").hide(),b||this.streamPlayer.muteSetState(!0);else if(!1===a){if(this.jDomId.find(".action-mute").hide(),this.jDomId.find(".action-sound").show(),b||this.streamPlayer.muteSetState(!1),!0===this.isDesktopNoTouch){var c=this.jDomId.find(".action-volume");c.show();var d=this.streamPlayer.volumeGetState();
d||(d=StreamPlayerXCl.volumePercentRestore(-1));d&&c.val(d.toString(10))}}else this.actionSoundMutedHideControl()};c.prototype.actionSoundSetVolume=function(a,b){!this.streamPlayer.muteGetState()&&a&&(this.streamPlayer.volumeSetState(a),b&&this.jDomId.find(".action-volume").val(a.toString(10)))};c.prototype.actionEnableModeVR=function(){var a=this;if(this.streamPlayer.showTypeCurrentIsPaid()){var b=new Layer.ConfirmExitPrivate;b.on(Layer.EVENT_CONFIRM,function(){a.actionEnableModeVRRedirect()});b.open(this.eventConnectTriggeredShowType,
this.nonFreeShowStartDate);this.layerHasBeenOpen(b)}else this.actionEnableModeVRRedirect()};c.prototype.actionEnableModeVRRedirect=function(){var a=ToolPerformer.urlToChatPage(this.modelInfo.nickname);ToolBrowser.redirectToUrl(a+"?vr=1")};c.prototype.displayPerformerOffline=function(){this.chatDisable();this.uiButtonGoToPrivateDisable();this.setHeaderPerformerProfileImage(this.modelInfo.profileImg);this.modeFullscreen&&(this.jDomId.find(".chat-content").empty(),this.jDomId.find(".block-chat-content").empty());
this.headerIsVisible?this.jDomId.find(".action-video-close").hide():this.jDomId.find(".action-video-close").show();this.jDomId.find(".action-send-love").clearQueue().hide();this.jDomId.find(".action-open-toy-controller").addClass("isHidden");this.jDomId.find(".mode-show").clearQueue().hide();this.jDomId.find(".action-fullscreen").clearQueue().hide();this.jDomId.find(".action-sound").clearQueue().hide();this.jDomId.find(".action-mute").clearQueue().hide();this.jDomId.find(".action-volume").clearQueue().hide();
this.jDomId.find(".action-video-mode-hls").clearQueue().hide();this.jDomId.find(".action-display-action-panel").clearQueue().hide();this.jDomId.find(".action-open-emoji-chat-area").clearQueue().hide();this.jDomId.find(".action-get-credit").clearQueue().hide();this.jDomId.find(".action-display-profile-btn").clearQueue().hide();this.jDomId.find(".action-vr-mode").hide();this.jDomId.find(".block-avs-notice").hide();this.jDomId.find(".action-only-toggle-theater-mode").clearQueue().hide();this.jDomId.find(".action-only-toggle-fullscreen-mode").clearQueue().hide();
this.menu&&this.menu.loveHide();this.cam2camReset();this.emojiManager.destroy();$(".js-performer-nickname").text(this.modelInfo.nickname);this.jDomId.find(".block-offline").fadeIn();this.swipeManager&&this.swipeManager.highlightStart();ToolToy.toyPanelClose();ToolToy.toyButtonHide()};c.prototype.convertOldSmileyToUtf8=function(a){if("smiley"in Application.chat){var b=Application.chat.smiley.list;try{for(var c=0;c<b.length;c++){var d=b[c],f=d.r.split("/"),h=f.pop();f.shift();var g=new RegExp(f.join(),
h);a=a.replace(g,d.c)}}catch(B){}}return a};c.prototype.onActionGoToPrivateToyConnected=function(){this.onActionGoToPrivate(1)};c.prototype.isShowInProgress=c.prototype.getStreamPlayerProxy=function(){return this.streamPlayer};c.prototype.getPerformerNickname=function(){return this.modelInfo.nickname};c.IOS_SAFE_AREA_ID_SELECTOR="iosSafeArea";c.LOW_CREDIT_AMOUNT_THRESHOLD=5;return c}(Core.Listener);f.ChatManager=p;var h;(function(f){f.roomRtmp=
function(c,a){var b=ToolApp.startDateGetDurationSeconds(),e={performerId:c},d=ToolBrowser.featureSupportedGetIfNotAlreadySent();d&&(e.featureSupported=d);return Core.Ajax.post("/performerAction/getPerformerRoom/?durationSeconds="+b.toString()+"&from="+a.toString(),e)};f.getDailyTop5Position=function(c){return Core.Ajax.post("/performerRoom/getDailyTop5Position/",{performerId:c})}})(h=f.Ajax||(f.Ajax={}))})(ModuleChat||(ModuleChat={}));
var __extends=this&&this.__extends||function(){var e=function(f,d){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return e(f,d)};return function(f,d){function a(){this.constructor=f}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");e(f,d);f.prototype=null===d?Object.create(d):(a.prototype=d.prototype,new a)}}(),
ModuleChat;
(function(e){e.GYROSCOPE_START="gyroOnStart";e.GYROSCOPE_END="gyroOnEnd";var f=function(d){function a(b){var c=d.call(this)||this;c.isTracking=!1;c.isDragging=!1;c.options={element:b.element,videoElement:b.videoElement,allowSwipeWhileTilting:b.allowSwipeWhileTilting||a.ALLOW_SWIPE_WHILE_TILTING,touchDelayTime:b.touchDelayTime||a.TOUCH_DELAY_TIME,fps:b.fps||a.FPS,tiltSpeed:b.tiltSpeed||a.TILT_SPEED};c.$videoTilt=$(".block-tilt",c.options.element);c.$videoDrag=$(".block-drag",c.options.element);c.rawGyroscopeData=
{alpha:0,gamma:0,beta:0};c.gyroDataListenerCallback=c.intervalFn=0;c.gyroDirection=0;c.activeFeature=1;c.lastDateDone=new Date;c.initialVideoLeft=NaN;c.setup();return c}__extends(a,d);a.prototype.setupInitialPosition=function(){this.options.videoElement.style.left&&isNaN(this.initialVideoLeft)&&(this.initialVideoLeft=parseInt(this.options.videoElement.style.left,10))};a.prototype.setup=function(){this.determineFeature();
this.initVideoTouch()};a.prototype.determineFeature=function(){ToolBrowser.Orientation.hasSupportEvent()&&(this.activeFeature=0)};a.isReadyToBeInit=function(){return ToolApp.hammerIsLoaded("ChatGyroscope")};a.prototype.initVideoTouch=function(){var b=this;if(this.options.element){var a=new Hammer(this.options.element);a.get("press").set({time:this.options.touchDelayTime});a.get("pan").set({pointers:0,threshold:0,direction:Hammer.DIRECTION_ALL});a.on("press",function(){return b.handleTracking()});
a.on("pressup",function(){return b.stopTracking()});a.on("panend",function(){return b.stopTracking()});a.on("tap",function(){return b.stopTracking()});a.on("swipe",function(){return b.stopTracking()});this.hammerManager=a}};a.prototype.handleTracking=function(){if(this.isFullscreen()&&this.isPortraitMode()&&!this.isDragging&&!this.isTracking)switch(this.activeFeature){case 0:this.initDeviceOrientationListener();this.startTracking();break;case 1:this.startDragging()}};a.prototype.initDeviceOrientationListener=
a.prototype.startDragging=function(){var b=this;this.$videoDrag.fadeIn(250);this.fire(e.GYROSCOPE_START);this.isDragging=!0;if(this.hammerManager)this.hammerManager.on("panmove",};a.prototype.handleVideoDrag=function(b){if(this.isDragging){var a=b.aditionalEvent;"panup"!==a&&"pandown"!==a&&(a=(this.options.videoElement.clientWidth-this.options.element.clientWidth)/2,b=
this.initialVideoLeft-2.5*b.deltaX,b<this.initialVideoLeft&&(b=this.initialVideoLeft),b>a&&(b=a),this.options.videoElement.style.transition="left .2s ease-in",this.options.videoElement.style.transform="translateX(".concat(b,"px)"))}};a.prototype.startTracking=function(){var b=this,c=this.options.fps?1E3/this.options.fps:1E3/a.FPS,d=$("#tilt-phone");this.$videoTilt.fadeIn(250);this.fire(e.GYROSCOPE_START);this.intervalFn=window.setInterval(function(){if(b.$videoTilt.is(":hidden")&&b.isCollectingData())b.stopTracking();
else{b.isTracking=!0;b.setGyroDirection();var c=(b.options.videoElement.clientWidth-b.options.element.clientWidth)/2,e=Math.floor(b.rawGyroscopeData.gamma)*a.TILT_SPEED,f=b.initialVideoLeft-e;b.isGimbalLock()||(1===b.gyroDirection?b.options.videoElement.style.left=-c<e?f+"px":"0":2===b.gyroDirection&&(b.options.videoElement.style.left=c>e?f+"px":-(2*c)+"px"),b.tilt(d))}},c)};a.prototype.isGimbalLock=function(){return 80<this.rawGyroscopeData.beta&&120>this.rawGyroscopeData.beta||-80<this.rawGyroscopeData.beta&&
-120>this.rawGyroscopeData.beta||-50>Math.floor(this.rawGyroscopeData.gamma)||50<Math.floor(this.rawGyroscopeData.gamma)};a.prototype.tilt=function(a){0===Math.abs(this.rawGyroscopeData.gamma)?a.css("left","40px"):(50<=Math.round(this.rawGyroscopeData.gamma)||50>=Math.round(this.rawGyroscopeData.gamma))&&a.css("transform","translateX("+Math.floor(this.rawGyroscopeData.gamma)+"px)")};a.prototype.setGyroDirection=function(){this.gyroDirection=0<Math.floor(this.rawGyroscopeData.gamma)?2:1};a.prototype.centerVideo=
function(){0===this.activeFeature?this.options.videoElement.style.left=this.initialVideoLeft+"px":(this.options.videoElement.style.transition="left .2s ease-in",this.options.videoElement.style.transform="translateX(".concat(this.initialVideoLeft,"px)"))};a.prototype.stopTracking=function(){if(this.isTracking||this.isDragging)switch(this.fire(e.GYROSCOPE_END),this.intervalFn&&clearInterval(this.intervalFn),this.lastDateDone=new Date,this.activeFeature){case 0:this.$videoTilt.hide();this.isTracking=
!1;this.centerVideo();window.removeEventListener("deviceorientation",this.gyroDataListenerCallback,!1);break;case 1:this.$videoDrag.hide(),this.isDragging=!1}};a.prototype.stoppedRecently=function(a){return this.lastDateDone?(new Date).getTime()-this.lastDateDone.getTime()<=a:!1};a.prototype.isFullscreen=a.prototype.isPortraitMode=a.prototype.isCollectingData=a.prototype.orientationChanged=a.prototype.disable=a.prototype.isSwipeAllowed=a.ALLOW_SWIPE_WHILE_TILTING=!1;a.TOUCH_DELAY_TIME=300;a.FPS=30;a.TILT_SPEED=4;return a}(Core.Listener);e.ChatGyroscope=f})(ModuleChat||(ModuleChat={}));
var ModuleChat;
(function(e){var f=function(){function b(){this.currentState=0;this.creditStat={status:this.currentState,remainingAmountEur:0,remainingAmount:0,remainingAmountWithCurrency:""};this.$button=void 0}b.prototype.stateGet=function(){return this.currentState};b.prototype.creditInfoGet=function(){return this.creditStat};b.prototype.onClick=function(a){this.$button&&this.$button.unbind("click").bind("click",a)};b.prototype.chatJDomSet=b.prototype.stateSetInitial=
function(a){if(null===a||void 0==a)this.currentState=1,a={status:0,remainingAmountEur:5,remainingAmount:0,remainingAmountWithCurrency:""};this.creditStat=a;this.stateSet(a.status)};b.prototype.stateSet=function(a){if(a!==this.currentState&&void 0!==a&&null!==a){var b=this.currentState;this.currentState=a;a="";var c={cannot:"free-rating-cannot",can:"free-rating-can",already:"free-rating-already",unknown:"free-rating-unk"};switch(this.currentState){case 1:a=c.cannot;break;case 2:a=c.can;break;case 3:a=
c.already;break;case 0:a=c.unknown;break;default:this.currentState=b}if(this.$button&&a){var d=void 0;for(d in c)this.$button.removeClass(c[d]);this.$button.addClass(a);0===this.currentState?this.$button.hide():this.$button.show()}return{previous:b,current:this.currentState}}};b.prototype.updateRatingData=function(a){var b=this.stateSet(a.status);this.creditStat=a;return b};b.prototype.onTipResult=function(a){if("showAction"in a&&a.showAction&&"rating"in a.showAction&&a.showAction.rating)return this.updateRatingData(a.showAction.rating)};
return b}();e.RatingButton=f})(ModuleChat||(ModuleChat={}));
var ModuleChatRedisplayMessage;
(function(d){var e=function(){function c(a){this.jDomId=a.find(".block-chat-content");this.actionRedisplayMessageList=a.find(".action-redisplay-message-list");this.messageLimit=18;this.messageMin=4;this.cleanupInterval=this.checkInterval=0}c.prototype.init=c.prototype.start=function(){var a=this;this.checkInterval=setInterval(function(){var b=a.getMessageCount();b.visible<=a.messageMin&&0<b.total?
a.actionRedisplayMessageList.fadeIn(void 0,:a.actionRedisplayMessageList.fadeOut()},300);this.cleanupInterval=setInterval(function(){a.cleanup()},3E4)};c.prototype.stop=c.prototype.cleanup=function(){var a=this,b=0;$(this.jDomId.children(".text-customer, .text-performer, .chat-event, .br").get().reverse()).each(function(){b>=a.messageLimit&&$(this).remove();
b++})};c.prototype.redisplayMessageList=function(){var a=this,b=0;$(this.jDomId.children(".text-customer, .text-performer, .chat-event, .br").get().reverse()).each(function(){var c=$(this);b<a.messageLimit&&(window.setTimeout(100*b),window.setTimeout(function(){c.fadeOut(1500)},7E3-100*b));b++})};c.prototype.getMessageCount=function(){var a=this.jDomId.children(".text-customer, .text-performer, .chat-event"),b=a.length;a=a.filter(":visible").length;return{total:b,
visible:a}};return c}();d.ChatRedisplayMessage=e})(ModuleChatRedisplayMessage||(ModuleChatRedisplayMessage={}));
var __extends=this&&this.__extends||function(){var e=function(f,d){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c])};return e(f,d)};return function(f,d){function b(){this.constructor=f}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");e(f,d);f.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)}}(),
ModuleChat;
(function(e){var f=function(d){function b(a){void 0===a&&(a=!0);var c=d.call(this)||this;c.isEnabled=!1;c.videoDragToResizeEnabled=!1;c.swipePreviewEnabled=a;c.highlightTimeout=0;c.clickLastDirection=0;c.imagePreviewMode=2;c.imagePreloadedDate=void 0;c.imagePreloadedId=0;return c}__extends(b,d);b.prototype.initSwipePreview=b.prototype.initSpImageOnlyStream=
function(){var a=this;if("SpImageOnly"in window){var c=e.ChatSwipe.configImagePreview;c.serverId=99999;c.maxExecTimeSeconds=180;c.backupAutoOnStart=!1;c.mustSeeSoftContentOnlyBecauseOfAgeVerification=ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification?1:0;c.maxFps=ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification?4:SpImageOnly.FPS_MAX;this.spImageOnlyStream=new SpImageOnly(c);ToolApp.event.on(215,function(){c.maxFps=SpImageOnly.FPS_MAX;c.mustSeeSoftContentOnlyBecauseOfAgeVerification=
0;var b=a.spImageOnlyStream;a.spImageOnlyStream=new SpImageOnly(c);a.spImageOnlyStreamBindEvent();b&&a.imageSoloDestroyProperly(b)});this.spImageOnlyStreamBindEvent()}else ToolApp.event.on(23,function(){a.initSpImageOnlyStream()})};b.prototype.imageSoloDestroyProperly=function(a){a.observerClearAll();var c=new Image(320,240),b=a.getLastImageUrl();b||(b="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=");c.src=b;a.setRenderDom(c);a.stop(!0)};b.prototype.spImageOnlyStreamBindEvent=
function(){var a=this;this.spImageOnlyStream&&(this.spImageOnlyStream.on("error",,this.spImageOnlyStream.on("firstFrame",)};b.prototype.triggerPerformerPreview=function(a){this.imagePreloaded&&(this.swipePreviewTemplateRender(a),0===this.imagePreviewMode&&this.spImageOnlyStreamStart(a))};b.prototype.setupEvent=function(){this.pager&&(this.pager.click(this.onClick.bind(this)),this.pager.find(".swipe").bind("mouseenter",
this.onMouseEnter.bind(this)),this.pager.find(".swipe").bind("mouseleave",this.onMouseLeave.bind(this)))};b.prototype.imagePreload=function(a,c){var b=this;void 0===c&&(c=!0);var d=new Date;!c&&this.imagePreloadedDate&&a.id===this.imagePreloadedId&&!this.swipePreviewEnabled&&5E3>d.getTime()-this.imagePreloadedDate.getTime()||(this.imagePreloadedId=a.id,this.imagePreloadedDate=d,a.liveImg?(this.imagePreloaded=new Image,this.imagePreloaded.src=a.liveImg,this.imagePreviewMode=0,this.imagePreloaded.addEventListener("error",
function(){b.imagePreloaded=new Image;b.imagePreloaded.src=a.profileImg;b.imagePreviewMode=1}),this.swipePreviewEnabled&&this.imagePreloaded.addEventListener("load",this.triggerPerformerPreview.bind(this,a),!1)):a.profileImg?(this.imagePreloaded=new Image,this.imagePreloaded.src=a.profileImg,this.imagePreviewMode=1,this.swipePreviewEnabled&&this.imagePreloaded.addEventListener("load",this.triggerPerformerPreview.bind(this,a),!1)):this.imagePreloaded=void 0)};b.prototype.onMouseLeave=function(a){this.swipePreviewEnabled&&
this.swipePreviewClear();this.clickLastDirection=0;this.imagePreviewMode=2};b.prototype.onMouseEnter=function(a){this.isEnabled&&a.target&&(a=$(a.target).closest("div.swipe"),a.hasClass("next")?(this.clickLastDirection=2,this.performerNext&&(a.attr("title",this.performerNext.nickname),this.imagePreload(this.performerNext,!1))):a.hasClass("prev")&&(this.clickLastDirection=1,this.performerPrevious&&(a.attr("title",this.performerPrevious.nickname),this.imagePreload(this.performerPrevious,!1))))};b.prototype.onClick=
function(a){if(!this.hasBeDoneRecently(500)&&(this.highlightStop(),this.swipePreviewEnabled&&this.swipePreviewClear(),this.isEnabled&&a.target&&!ToolMenu.hasOneMenuOpen())){var c=$(a.target).closest("div.swipe");if(this.imagePreloaded){e.ChatSwipe.configImagePreview.mustSeeSoftContentOnlyBecauseOfAgeVerification=ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification?1:0;e.ChatSwipe.configImagePreview.maxFps=ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification?4:SpImageOnly.FPS_MAX;
var b=new SpImageOnly(e.ChatSwipe.configImagePreview);b.setRenderDom(this.imagePreloaded)}c.hasClass("next")?(this.lastDateDone=new Date,this.performerNext&&(this.clickLastDirection=2,this.fire(e.ChatSwipe.EVENT_ACTION,{modelInfo:this.performerNext,spImageSoloObj:b})),a.stopPropagation()):c.hasClass("prev")&&(this.lastDateDone=new Date,this.performerPrevious&&(this.clickLastDirection=1,this.fire(e.ChatSwipe.EVENT_ACTION,{modelInfo:this.performerPrevious,spImageSoloObj:b})),a.stopPropagation())}};
b.prototype.swipePreviewClear=function(){switch(this.clickLastDirection){case 2:$(".js-performer-preview-next",this.pager).removeClass("slide-in-fade-in-next").empty();break;case 1:$(".js-performer-preview-prev",this.pager).removeClass("slide-in-fade-in-prev").empty()}this.spImageOnlyStreamStop()};b.prototype.hide=function(){this.pager&&this.pager.hide()};b.prototype.show=function(){this.pager&&this.pager.show()};b.prototype.spImageOnlyStreamStart=function(a){if(this.spImageOnlyStream)if("flag"in
a&&a.flag)this.performerPreviewStateSet(2);else if(1==a.showType){var c="";0!=this.clickLastDirection&&(c=2==this.clickLastDirection?".js-performer-preview-next":".js-performer-preview-prev");c=$(c,this.pager).find("img");c.length&&this.spImageOnlyStream.startDomElement(c[0],{modelId:a.id,base64:this.imgSoloToken})}};b.prototype.spImageOnlyStreamStop=b.prototype.performerPreviewStateSet=function(a){var c;2==this.clickLastDirection?
c=$(".js-performer-preview-next",this.pager):1==this.clickLastDirection&&(c=$(".js-performer-preview-prev",this.pager));if(c&&c.length){var b=c.find(".performer-state-area");c=c.find("img");1!==a&&(this.spImageOnlyStreamStop(),c.length&&c.data("src")&&c.attr("src",c.data("src")));switch(a){case 1:b.hide();break;case 2:b.text(Translation.tr("labelGenericInPrivate")).show();break;case 3:b.text("offline").show()}}};b.prototype.onPerformerPreviewError=function(a,c){c==SpImageOnly.ERROR_OFFLINE?this.performerPreviewStateSet(3):
c==SpImageOnly.ERROR_NON_FREE&&this.performerPreviewStateSet(2)};b.prototype.onPerformerPreviewSuccess=function(a,c){c.showState==SpImageOnly.SHOW_STATE_PRIVATE?this.performerPreviewStateSet(2):this.performerPreviewStateSet(1)};b.prototype.swipePreviewTemplateRender=function(a){if(this.imagePreloaded){a='\n\t\t\t\t\t<div class="preview-container">\n\t\t\t\t\t\t<img src="'.concat(a.profileImg,'" data-src="').concat(a.profileImg,'" alt="').concat(a.nickname,'" >\n\t\t\t\t\t\t<div class="performer-nickname-area">\n\t\t\t\t\t\t\t<span>').concat(a.nickname,
'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="performer-state-area">Offline</div>\n\t\t\t\t\t</div>');switch(this.clickLastDirection){case 2:$(".js-performer-preview-next",this.pager).append(a).addClass("slide-in-fade-in-next");break;case 1:$(".js-performer-preview-prev",this.pager).append(a).addClass("slide-in-fade-in-prev")}ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&$(".preview-container img").addClass("hard-censored")}};b.prototype.init=function(a){a&&(this.pager=
$(".block-mouseSwipe",a),this.swipePreviewEnabled&&this.initSwipePreview(),this.setupEvent(),this.isEnabled&&this.performerNext&&this.performerPrevious?this.show():this.hide())};b.prototype.useImgSoloToken=function(a){this.imgSoloToken=a};b.prototype.enable=function(){if(!this.isEnabled&&(this.isEnabled=!0,this.performerNext&&this.performerPrevious))switch(this.show(),this.clickLastDirection){case 2:this.imagePreload(this.performerNext);break;case 1:this.imagePreload(this.performerPrevious)}};b.prototype.disable=
b.prototype.setupPerformer=function(a,c){this.spImageOnlyStream||this.initSpImageOnlyStream();var b=!this.performerNext&&!this.performerPrevious;this.performerNext=a;this.performerPrevious=c;this.imagePreloaded=void 0;this.isEnabled&&(a&&c?b&&this.show():this.hide())};b.prototype.hasBeDoneRecently=function(a){return this.lastDateDone?(new Date).getTime()-this.lastDateDone.getTime()<=a:!1};b.prototype.resize=function(){};b.prototype.resizeLayout=b.prototype.highlightStop=function(){0<this.highlightTimeout&&(clearTimeout(this.highlightTimeout),this.highlightTimeout=0,this.pager&&this.pager.removeClass("highlight"))};b.prototype.highlightStart=function(){var a=this;this.pager&&this.isEnabled&&(this.pager.addClass("highlight"),0<this.highlightTimeout&&clearTimeout(this.highlightTimeout),this.highlightTimeout=setTimeout(function(){a.highlightTimeout=0;a.pager&&a.pager.removeClass("highlight")},6E4))};b.MODULE_NAMESPACE_LOG="DevLogChatMouseSwipe";
return b}(e.ChatSwipe);e.ChatMouseSwipe=f})(ModuleChat||(ModuleChat={}));
var __extends=this&&this.__extends||function(){var g=function(h,e){g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(d[a]=b[a])};return g(h,e)};return function(h,e){function d(){this.constructor=h}if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");g(h,e);h.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}(),
ModuleChat;
(function(g){ar e=function(d){function b(){var a=d.call(this)||this;a.isEnabled=!1;a.previewLoaded=!1;a.windowWidth=0;a.$sidebar=$("#l-chat-sidebar-swipe");a.$sidebar.hide();a.rootHammerInstance=void 0;return a}__extends(b,d);b.prototype.resize=function(){var a=$(window).width();this.windowWidth!=a&&(this.windowWidth=a,this.hide())};b.prototype.resizeLayout=function(a,c,b,d,f){$(".chat-sidebar-video",this.$sidebar).css({top:a+"px",
width:c+"px",height:b+"px"});$(".chat-sidebar-chat",this.$sidebar).css({top:d+"px",height:f+"px"})};b.prototype.hide=function(){this.$sidebar.hide();this.$sidebar.removeClass("from-left");this.$sidebar.removeClass("from-right")};b.prototype.enable=function(){this.isEnabled=!0};b.prototype.disable=b.prototype.hasBeDoneRecently=function(a){return this.lastDateDone?(new Date).getTime()-this.lastDateDone.getTime()<=a:!1};b.prototype.setupPerformer=b.isReadyToBeInit=function(){return ToolApp.hammerIsLoaded("ChatTouchSwipe")};b.prototype.highlightStart=function(){};b.prototype.highlightStop=b.prototype.init=function(a){var c=this;if(a){$("img.preview",this.$sidebar).bind("load",;this.rootHammerInstance=a=new Hammer(a.get(0));a.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL,threshold:this.videoDragToResizeEnabled?0:b.POINTER_DIRECTION_THRESHOLD});
var d=this.$sidebar.outerWidth(),e=Math.round(2*d/3);this.resize();var f=1,l=!1,k=!1;a.on("panmove",function(a){1===f||c.$sidebar.is(":hidden")||(3===f?(a=a.deltaX,a>d&&(a=d),l=a>e,c.$sidebar.css({transform:"translateX("+(a-d)+"px)"})):2===f&&(a=-a.deltaX,a>d&&(a=d),l=a>e,c.$sidebar.css({transform:"translateX("+(c.windowWidth-a)+"px)"})),l?k||(c.$sidebar.addClass("action-ok"),k=!0):k&&(c.$sidebar.removeClass("action-ok"),k=!1))});a.on("panend pancancel",function(a){var b=c.$sidebar,e=function(){b.hide();
b.removeClass("from-left");b.removeClass("from-right");document.body.removeEventListener("touchstart",h)};c.lastDateDone=new Date;if(l){e();a=g.ChatSwipe.configImagePreview;var m=void 0;c.previewLoaded&&(a.mustSeeSoftContentOnlyBecauseOfAgeVerification=ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification?1:0,a.maxFps=ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification?4:SpImageOnly.FPS_MAX,m=new SpImageOnly(a),m.setRenderDom($("img.preview",c.$sidebar).get(0)));2==f?c.performerNext&&
c.fire(g.ChatSwipe.EVENT_ACTION,{modelInfo:c.performerNext,spImageSoloObj:m}):3==f&&c.performerPrevious&&c.fire(g.ChatSwipe.EVENT_ACTION,{modelInfo:c.performerPrevious,spImageSoloObj:m})}else!ToolBrowser.isIpad()&&"anime"in window&&"Float32Array"in window?(3===f?anime({targets:"#l-chat-sidebar-swipe",translateX:-d,duration:200,easing:"linear"}):2===f&&anime({targets:"#l-chat-sidebar-swipe",translateX:c.windowWidth,duration:200,easing:"linear"}),setTimeout(function(){e()},210)):e();f=1});a.on("panstart",
function(a){if(c.isEnabled){c.lastDateDone=new Date;k=!1;c.$sidebar.removeClass("action-ok");if("panleft"===a.additionalEvent){if(!c.performerNext)return;f=2}else if("panright"===a.additionalEvent){if(!c.performerPrevious)return;f=3}else return;if(c.videoDragToResizeEnabled){a=a.center.x;var e=c.windowWidth-a;3==f&&(e=a);if(e>b.POINTER_DIRECTION_THRESHOLD)return}a=c.$sidebar;2==f?(a.css({transform:"translateX("+c.windowWidth+"px)"}),c.setupNext()):3==f&&(a.css({transform:"translateX("+(0-d)+"px)"}),
c.setupPrevious());a.show();document.body.addEventListener("touchstart",h,{passive:!1})}})}};b.prototype.useImgSoloToken=function(a){};b.prototype.getHammerInstance=function(){return this.rootHammerInstance};b.prototype.setupNext=function(){$(".chat-sidebar-position",this.$sidebar).html(Translation.tr("actionGenericItemNext"));this.$sidebar.addClass("from-right");this.performerNext&&this.renderPerformer(this.performerNext)};b.prototype.renderPerformer=function(a){this.previewLoaded=!1;a&&($("img.preview",
this.$sidebar).attr("src",a.liveImg),$("img.profile",this.$sidebar).attr("src",a.profileImg),$(".chat-sidebar-nickname",this.$sidebar).html(a.nickname))};b.prototype.setupPrevious=function(){$(".chat-sidebar-position",this.$sidebar).html(Translation.tr("actionGenericItemPrevious"));this.$sidebar.addClass("from-left");this.performerPrevious&&this.renderPerformer(this.performerPrevious)};b.POINTER_DIRECTION_THRESHOLD=20;return b}(g.ChatSwipe);g.ChatTouchSwipe=e})(ModuleChat||(ModuleChat={}));
var __extends=this&&this.__extends||function(){var f=function(b,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])};return f(b,a)};return function(b,a){function e(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(b,a);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),
ModuleChat;
(function(f){var b=function(a){_extends(e,a);e.prototype.createDelegateTarget=function(a,d){var b=this;void 0===d&&(d=e.DEFAULT_Z_INDEX);var c=new Hammer(a),f=d;c.on("panmove",function(a){b.rootHammerInstance.emit(a.type,a)});c.on("panend",function(a){b.rootHammerInstance.emit(a.type,a)});c.on("panstart",;a.style.zIndex=f.toString()};e.DEFAULT_Z_INDEX=1005;return e}(Core.Listener);f.ChatTouchSwipeDelegated=
b})(ModuleChat||(ModuleChat={}));
var __extends=this&&this.__extends||function(){var e=function(g,d){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,a){d.__proto__=a}||function(d,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c])};return e(g,d)};return function(g,d){function f(){this.constructor=g}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");e(g,d);g.prototype=null===d?Object.create(d):(f.prototype=d.prototype,new f)}}(),
ChatToyControllerModule;
(function(e){var g;e.debug=e.loadStreamPlayerProxy=(function(d){var f=function(){function a(c){this.jElement=$(c||a.PLACEHOLDER_CSS_SELECTOR);this.registeredCommandList=[];this.isRenderedState=this.isFullWidthState=this.isDisabledState=this.isOpenState=!1}a.prototype.registerCommand=a.prototype.renderCommand=function(c,a){var d=this.jElement.find(a);d.length&&d[0].appendChild(c)};
a.prototype.open=function(){this.jElement.removeClass("isHidden");this.isOpenState=!0};a.prototype.close=function(){this.jElement.addClass("isHidden");this.isOpenState=!1};a.prototype.toggleFullWidth=function(){!1!==this.isOpenState&&($(".toy-container",this.jElement).toggleClass("fullWidth"),this.isFullWidthState=!this.isFullWidthState)};a.prototype.enable=function(){$(".toy-container",this.jElement).removeClass("isDisabled");this.isDisabledState=!1};a.prototype.disable=function(){$(".toy-container",
this.jElement).addClass("isDisabled");this.isDisabledState=!0};a.prototype.toggleEnableDisable=function(){$(".toy-container",this.jElement).toggleClass("isDisabled");this.isDisabledState=!this.isDisabledState};a.prototype.setDisconnected=function(){var c=this;$(".header",this.jElement).addClass("isHidden");$(".content-command-list",this.jElement).addClass("isHidden");$(".toyStatus",this.jElement).removeClass("isHidden");var a=setTimeout(function(){c.isOpen()&&!1===c.isTesting&&g.toyControllerVisibilityToggle();
c.destroy();clearTimeout(a)},2500)};a.prototype.isOpen=function(){return this.isOpenState};a.prototype.isDisabled=function(){return this.isDisabledState};a.prototype.isFullWidth=function(){return this.isFullWidthState};a.prototype.isRendered=function(){return this.isRenderedState};a.prototype.destroy=function(){this.isFullWidthState=this.isDisabledState=this.isOpenState=!1;"undefined"!==typeof this.isTesting&&(this.isTesting=void 0);"undefined"!==typeof this.toyType&&(this.toyType=void 0);this.removeCommandAll();
this.enable();this.jElement.addClass("isHidden").removeAttr("style")};a.prototype.init=function(){if(!this.isRenderedState){this.isRenderedState=!0;var c='\n\t\t\t\t\t\t<div class="toy-container">\n\t\t\t\t\t\t\t<div class="header">\n\t\t\t\t\t\t\t\t<div class="content-command-list-header"></div>\n\t\t\t\t\n\t\t\t\t\t\t\t\t<span class="toyTitle"></span>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="content-command-list"></div>\n\t\t\t\t\t\n\t\t\t\t\t\t\t<div class="toyStatus isHidden">\n\t\t\t\t\t\t\t\t<span>'.concat(Translation.tr("infoModelToyHasBeenDisconnected"),
"</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>");this.jElement.html(c);this.isTesting&&this.jElement.addClass("isTesting")}};a.prototype.build=function(c){this.isRenderedState&&(this.toyType=c.type,$(".toyTitle",this.jElement).text(c.type),$(".header",this.jElement).removeClass("isHidden"),$(".content-command-list",this.jElement).removeClass("isHidden"),$(".toyStatus",this.jElement).addClass("isHidden"))};a.prototype.removeCommandAll=function(){if(this.registeredCommandList.length){for(var c=
0;c<this.registeredCommandList.length;c++)this.registeredCommandList[c].destroy();this.registeredCommandList=[]}};a.prototype.attachCommand=function(c,a){"range"===c.command.param?0==$('[data-toy-command-wrapper="'.concat(c.command.name,'"]'),this.jElement).length?this.renderCommand(c.build(),a):this.enableCommand(c.command.name):this.renderCommand(c.build(),a);this.registerCommand(c)};a.prototype.enableCommand=function(c){c=$('[data-toy-command-wrapper="'.concat(c,'"]'),this.jElement);c.length&&
c.removeClass("isHidden")};a.prototype.commandCount=function(){return this.registeredCommandList.length};a.prototype.bindVendorEvent=function(){var c=$(".slider",this.jElement);c.length&&c.foundation()};a.prototype.reFlow=function(){var c=$(".slider",this.jElement);c.length&&c.foundation("_reflow")};a.prototype.resize=function(c){var a=c.videoActionHeight;0<c.actionCam2CamHeight&&(a+=c.actionCam2CamHeight);0<c.videoCam2CamHeight&&(a+=c.videoCam2CamHeight);a===c.videoActionHeight?a+=20:a===c.videoActionHeight+
c.actionCam2CamHeight&&(a+=30);this.jElement.css("bottom",a)};a.PLACEHOLDER_CSS_SELECTOR="#toy-controller-panel";return a}();d.ToyPanel=f;f=function(){function a(c){this.jElement=$(c||a.CSS_SELECTOR);this.isVisibleState=!1;this.setupEvent()}a.prototype.setupEvent=function(){this.jElement.on("click",function(){g.toyControllerVisibilityToggle()})};a.prototype.isVisible=function(){return this.isVisibleState};a.prototype.setTitle=a.prototype.show=function(){this.jElement.removeClass("isHidden");
this.isVisibleState=!0};a.prototype.hide=a.CSS_SELECTOR=".action-open-toy-controller";return a}();d.ToyButton=f})(e.UI||(e.UI={}));(function(d){d.EVENT_TOY_STATUS_UPDATE="eventToyStatusUpdate";var f={connected:!1,type:"",commands:[]},a=function(a){function c(c){void 0===c&&(c=f);var d=a.call(this)||this;d.status=c;return d}__extends(c,a);c.prototype.filterVisibleCommandList=function(){var a=this;this.status.commands=this.status.commands.filter(};c.prototype.get=function(){return this.status};c.prototype.set=function(a){a?(this.status=a,this.filterVisibleCommandList(),this.fire(d.EVENT_TOY_STATUS_UPDATE,this.status)):this.reset()};c.prototype.reset=c.prototype.getVisibleCommandList=function(){return this.status.commands};return c}(Core.Listener);d.Status=a})(e.Toy||(e.Toy={}));(function(d){var f={Vibrate:{param:"range",label:Translation.tr("labelModelToyVibrationPower")},Rotate:{param:"range",label:Translation.tr("labelModelToyRotationSpeed")},
RotateAntiClockwise:{param:"range",label:"Rotate AntiClockwise"},RotateClockwise:{param:"range",label:"Rotate Clockwise"},RotateChange:{param:"click",label:Translation.tr("labelModelToyRotationChange")},AirAuto:{param:"range",label:Translation.tr("labelModelToyMalePumpPower")},AirIn:{param:"click",label:"Air In"},AirOut:{param:"click",label:"Air Out"},Preset:{param:"range",label:"Preset"},FullPower:{param:"click",label:Translation.tr("actionModelToyFullPower")},FullPowerOff:{param:"click",label:Translation.tr("actionModelToyDisable")}},
a=function(){function a(){this.step=this.value=0;this.isTesting=!1;this.command={from:0,to:0,name:"none",param:"none"}}a.prototype.detachCommand=function(){var b=$('[data-toy-command-wrapper="'.concat(this.command.name,'"]'));b&&b.length&&("range"!==this.command.param?b.remove():($("#command-".concat(this.command.name," input"),b).val("0").trigger("change"),b.addClass("isHidden")))};a.prototype.resetState=function(){this.value=0;this.label=this.isTesting=void 0;this.command={from:0,to:0,name:"none",
param:"none"}};a.prototype.createTemplate=function(){var b=document.createDocumentFragment(),a=document.createElement("template");a.innerHTML=this.getTemplate();b.appendChild(a.content);return b};a.prototype.sendCommand=function(a,c,h){void 0===h&&(h=0);"plus"===a||"minus"===a?g.toyControllerSendCommand(c,h):"action"===a&&g.toyControllerSendCommand(c,0)};a.prototype.init=a.prototype.build=a.prototype.getName=a.prototype.getLabel=function(){var a=f[this.command.name];return a&&a.label?a.label:""};a.prototype.destroy=return a}();d.BaseToyCommand=a;var c=function(a){function b(){var b=a.call(this)||this;b.step=5;return b}__extends(b,a);b.prototype.processCommand=function(a,b,c){!1===this.isTesting&&this.sendCommand(a,b,c)};b.prototype.setupEvent=function(a){var b=this;$(document).on("changed.zf.slider",
"#command-".concat(this.command.name),function(a){if(a.currentTarget){a=parseInt($("#command-".concat(b.command.name," input")).val());isNaN(a)&&(a=0);var c=a>b.value?"plus":"minus";a!==b.value&&b.processCommand(c,b.command.name,a);b.value=a}});ToolApp.event.on(213,function(a,c){"full"===c?$("#command-".concat(b.command.name," input")).val("".concat(b.command.to)).trigger("change"):"off"===c&&$("#command-".concat(b.command.name," input")).val("".concat(b.command.from)).trigger("change")})};b.prototype.getTemplate=
function(){return'\n\t\t\t\t\t<div class="toyControllerAction toyControllerAction--range" data-toy-command-wrapper="'.concat(this.command.name,'">\n\t\t\t\t\t\t<div class="slider" id="command-').concat(this.command.name,'" data-slider data-initial-start="').concat(this.value,'" data-start="').concat(this.command.from,'" data-end="').concat(this.command.to,'" data-step="').concat(this.step,'">\n\t\t\t\t\t\t\t<span class="slider-handle" data-slider-handle role="slider" tabindex="1">\n\t\t\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t\t\t<use xlink:href="')+
ToolApp.svgMainGetUrl()+'#toyVibrate" href="'+ToolApp.svgMainGetUrl()+'#toyVibrate"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="slider-fill" data-slider-fill></span>\n\t\t\t\t\t\t\t<input type="hidden">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="label">'.concat(this.label,"</span>\n\t\t\t\t\t</div>")};b.getInstance=function(){b.instance||(b.instance=new b);return b.instance};return b}(a),e=function(a){function b(){var b=a.call(this)||this;b.step=5;return b}
__extends(b,a);b.prototype.processCommand=function(a,b,c){!1===this.isTesting&&this.sendCommand(a,b,c)};b.prototype.setupEvent=function(a){var b=this;$(document).on("changed.zf.slider","#command-".concat(this.command.name),function(a){if(a.currentTarget){a=parseInt($("#command-".concat(b.command.name," input")).val());isNaN(a)&&(a=0);var c=a>b.value?"plus":"minus";a!==b.value&&b.processCommand(c,b.command.name,a);b.value=a}});ToolApp.event.on(213,function(a,c){"full"===c?$("#command-".concat(b.command.name,
" input")).val("".concat(b.command.to)).trigger("change"):"off"===c&&$("#command-".concat(b.command.name," input")).val("".concat(b.command.from)).trigger("change")})};b.prototype.getTemplate=function(){return'\n\t\t\t\t<div class="toyControllerAction toyControllerAction--range" data-toy-command-wrapper="'.concat(this.command.name,'">\n\t\t\t\t\t<div class="slider" id="command-').concat(this.command.name,'" data-slider data-initial-start="').concat(this.value,'" data-start="').concat(this.command.from,
'" data-end="').concat(this.command.to,'" data-step="').concat(this.step,'">\n\t\t\t\t\t\t<span class="slider-handle" data-slider-handle role="slider" tabindex="1">\n\t\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t\t<use xlink:href="')+ToolApp.svgMainGetUrl()+'#toyRotate" href="'+ToolApp.svgMainGetUrl()+'#toyRotate"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="slider-fill" data-slider-fill></span>\n\t\t\t\t\t\t<input type="hidden">\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class="label">'.concat(this.label,
"</span>\n\t\t\t\t</div>")};b.getInstance=function(){b.instance||(b.instance=new b);return b.instance};return b}(a),k=function(a){_extends(b,a);b.prototype.processCommand=function(a,b,c){!1===this.isTesting&&this.sendCommand(a,b,c)};b.prototype.setupEvent=function(a){var b=this;$(document).on("changed.zf.slider","#command-".concat(this.command.name),function(a){if(a.currentTarget){a=parseInt($("#command-".concat(b.command.name," input")).val());
isNaN(a)&&(a=0);var c=a>b.value?"plus":"minus";a!==b.value&&b.processCommand(c,b.command.name,a);b.value=a}});ToolApp.event.on(213,function(a,c){"full"===c?$("#command-".concat(b.command.name," input")).val("".concat(b.command.to)).trigger("change"):"off"===c&&$("#command-".concat(b.command.name," input")).val("".concat(b.command.from)).trigger("change")})};b.prototype.getTemplate=function(){return'\n\t\t\t\t<div class="toyControllerAction toyControllerAction--range" data-toy-command-wrapper="'.concat(this.command.name,
'">\n\t\t\t\t\t<div class="slider" id="command-').concat(this.command.name,'" data-slider data-initial-start="').concat(this.value,'" data-start="').concat(this.command.from,'" data-end="').concat(this.command.to,'" data-step="').concat(this.step,'">\n\t\t\t\t\t\t<span class="slider-handle" data-slider-handle role="slider" tabindex="1">\n\t\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t\t<use xlink:href="')+ToolApp.svgMainGetUrl()+'#toyAirAuto" href="'+ToolApp.svgMainGetUrl()+'#toyAirAuto"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="slider-fill" data-slider-fill></span>\n\t\t\t\t\t\t<input type="hidden">\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class="label">'.concat(this.label,
"</span>\n\t\t\t\t</div>")};b.getInstance=function(){b.instance||(b.instance=new b);return b.instance};return b}(a),l=function(a){function b(){return a.call(this)||this}__extends(b,a);b.prototype.processCommand=function(a,b){void 0===b&&(b=this.command.name);"plus"===a?b="RotateClockwise":"minus"===a&&(b="RotateAntiClockwise");var c=e.getInstance();c=c.value/c.step;!1===this.isTesting&&this.sendCommand(a,b,c)};b.prototype.onClick=function(a){a.dataset.action&&(ToolApp.event.fire(214,a),this.processCommand(a.dataset.action))};
b.prototype.setupEvent=function(a){var b=this;if((a=a.querySelectorAll("[data-action]"))&&a.length)for(var c=0;c<a.length;c++)a[c].addEventListener("click",function(a){a.stopPropagation();if(a.currentTarget)b.onClick(a.currentTarget)},!1)};b.prototype.getTemplate=function(){return'\n\t\t\t\t<div class="toyControllerAction toyControllerAction--click" data-toy-command-wrapper="'.concat(this.command.name,'">\n\t\t\t\t\t<div class="actionList">\n\t\t\t\t\t\t<a href="#" data-action="').concat("minus",
'">\n\t\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t\t<use xlink:href="')+ToolApp.svgMainGetUrl()+'#arrowLeftLong" href="'+ToolApp.svgMainGetUrl()+'#arrowLeftLong"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<a href="#" data-action="'.concat("plus",'">\n\t\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t\t<use xlink:href="')+ToolApp.svgMainGetUrl()+'#arrowRightLong" href="'+ToolApp.svgMainGetUrl()+'#arrowRightLong"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class="label">'.concat(this.label,
"</span>\n\t\t\t\t</div>")};b.getInstance=function(){b.instance||(b.instance=new b);return b.instance};return b}(a),m=function(a){function b(){return a.call(this)||this}__extends(b,a);b.prototype.setupEvent=function(a){(a=a.querySelector("#toy-generic-command-full-power-on"))&&a.addEventListener("click",function(a){a.preventDefault();ToolApp.event.fire(213,"full")},!1)};b.prototype.getTemplate=function(){return'\n\t\t\t\t<div class="toyControllerAction toyControllerAction--fullPower" data-toy-command-wrapper="'.concat(this.command.name,
'">\n\t\t\t\t\t<div class="actionList">\n\t\t\t\t\t\t<a href="#" id="toy-generic-command-full-power-on">\n\t\t\t\t\t\t\t<svg>\n\t\t\t\t\t\t\t\t<use xlink:href="')+ToolApp.svgMainGetUrl()+'#bolt" href="'+ToolApp.svgMainGetUrl()+'#bolt"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\n\t\t\t\t\t<span class="label">'.concat(this.label,"</span>\n\t\t\t\t</div>")};b.getInstance=function(){b.instance||(b.instance=new b);return b.instance};return b}(a),n=function(a){_extends(b,a);b.prototype.setupEvent=function(a){(a=a.querySelector("#toy-generic-command-full-power-off"))&&a.addEventListener("click",function(a){a.preventDefault();ToolApp.event.fire(213,"off")},!1)};b.prototype.getTemplate=function(){return'\n\t\t\t\t<a href="#" id="toy-generic-command-full-power-off" title="'.concat(Translation.tr("actionModelToyDisable"),'" data-toy-command-wrapper="').concat(this.command.name,'">\n\t\t\t\t\t<svg>\n\t\t\t\t\t\t<use xlink:href="')+ToolApp.svgMainGetUrl()+
'#power" href="'+ToolApp.svgMainGetUrl()+'#power"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>'};b.getInstance=return b}(a);d.getCommandFromMap=d.create=function(a){var b=f[a.name];if(b){var d;"range"===b.param?"Vibrate"===a.name?d=c.getInstance():"Rotate"===a.name?d=e.getInstance():"AirAuto"===a.name&&(d=k.getInstance()):"click"===b.param&&("FullPower"===a.name?d=m.getInstance():"FullPowerOff"===a.name?d=n.getInstance():
"RotateChange"===a.name&&(d=l.getInstance()));if(d)return d.init(a),d}}})(e.Command||(e.Command={}))})(ChatToyControllerModule||(ChatToyControllerModule={}));
var __extends=this&&this.__extends||function(){var f=function(e,d){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return f(e,d)};return function(e,d){function a(){this.constructor=e}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(e,d);e.prototype=null===d?Object.create(d):(a.prototype=d.prototype,new a)}}(),
ModuleChat;
(function(f){var e=function(d){function a(b){var a=d.call(this)||this;a.wrapper=b;a.isDragging=!1;a.isEnabled=!1;a.videoIsRendered=!1;a.isFullScreen=!1;a.maxHeightDragUp=0;a.maxHeightDragDown=0;a.maxDragX=0;a.cacheLastPosY=0;a.cacheLastPosX=0;a.cacheOriginalY=0;a.geometryData={videoWidth:0,videoHeight:0,playerWidth:0,playerHeight:0,playerTop:0,playerLeft:0,playerPosition:"relative",chatHeight:0,chatWidth:0,chatContentHeight:0,chatTop:0,chatLeft:0};a.elementCacheList={videoPlayer:$(".stream-video",b),
blockVideo:$(".stream-video-section",b),blockChat:$(".stream-chat",b),chatContent:$(".chat-content",b)};a.init();return a}__extends(a,d);a.isReadyToBeInit=a.prototype.init=function(){var a=new Hammer(this.elementCacheList.blockVideo.get(0));a.get("pan").set({pointers:0,threshold:0,direction:Hammer.DIRECTION_ALL});a.on("panstart",this.start.bind(this));a.on("panend",this.stop.bind(this));this.hammerManager=a};a.prototype.dragLogic=function(a){switch(a.direction){case Hammer.DIRECTION_UP:this.dragUp();
break;case Hammer.DIRECTION_DOWN:this.dragDown();break;case Hammer.DIRECTION_LEFT:this.dragLeft(-a.deltaX);break;case Hammer.DIRECTION_RIGHT:this.dragRight(a.deltaX)}};a.prototype.calcMaxY=function(){this.maxHeightDragUp=Math.round(this.geometryData.videoHeight/3);this.maxHeightDragDown=this.isFullScreen?this.wrapper.height():Math.round(2*this.geometryData.videoHeight)};a.prototype.calcMaxX=function(){var a=this.elementCacheList.video.outerWidth()-this.wrapper.outerWidth();this.maxDragX=0>a?-a:a};
a.prototype.updateGeometryData=a.prototype.dragUp=function(){this.cacheLastPosY-=a.PIXEL_STEP_VERTICAL_DRAG;this.cacheLastPosY<this.maxHeightDragUp&&(this.cacheLastPosY=this.maxHeightDragUp);this.cacheLastPosY>this.maxHeightDragUp&&(this.resize(),this.calcMaxX())};a.prototype.dragDown=function(){this.cacheLastPosY+=a.PIXEL_STEP_VERTICAL_DRAG;this.cacheLastPosY>this.maxHeightDragDown&&(this.cacheLastPosY=this.maxHeightDragDown);this.cacheLastPosY<this.maxHeightDragDown&&
(this.resize(),this.calcMaxX())};a.prototype.dragLeft=function(b){b<this.cacheLastPosX&&(b=this.cacheLastPosX+a.PIXEL_STEP_HORIZONTAL_DRAG);b>this.maxDragX&&(b=this.maxDragX);this.isFullScreen?this.elementCacheList.videoPlayer.css("left","-".concat(b,"px")):this.elementCacheList.video.css("transform","translateX(-".concat(b,"px)"));this.cacheLastPosX=b};a.prototype.dragRight=function(b){b=this.maxDragX-b;0>b&&(b=0);b>this.cacheLastPosX&&(b=this.cacheLastPosX-a.PIXEL_STEP_HORIZONTAL_DRAG);this.isFullScreen?
this.elementCacheList.videoPlayer.css("left","-".concat(b,"px")):this.elementCacheList.video.css("transform","translateX(-".concat(b,"px)"));this.cacheLastPosX=b};a.prototype.resize=function(){this.elementCacheList.blockSpVideo.is(":hidden")&&this.initStreamPlayerElements();var b=this.cacheLastPosY,c=Math.round(b*a.VIDEO_RATIO);c<this.wrapper.width()&&(c="100%");this.isFullScreen?(this.elementCacheList.videoPlayer.css({width:c,height:b,left:0}),this.elementCacheList.blockSpVideo.css({width:c,height:b}),
this.elementCacheList.video.css({width:c,height:b})):(this.elementCacheList.blockVideo.css("height",b),this.elementCacheList.videoPlayer.css("height",b),this.elementCacheList.blockSpVideo.css({width:c,height:b}),this.elementCacheList.video.css({width:c,height:b,objectFit:"cover",transform:""}),this.elementCacheList.blockChat.css({top:b,height:this.wrapper.height()-b}),this.elementCacheList.chatContent.css({height:this.elementCacheList.blockChat.height()-a.CHAT_INPUT_HEIGHT+"px"}),this.elementCacheList.chatContent.scrollTop($(".inner-chat-content").height()))};
a.prototype.unbindListeners=a.prototype.start=function(b){if(this.videoIsRendered&&this.isEnabled&&!1!==ToolBrowser.isModePortraitFromViewPort()&&(0==this.cacheLastPosY&&(this.cacheLastPosY=this.elementCacheList.blockVideo.outerHeight()),0==this.cacheOriginalY&&(this.cacheOriginalY=this.cacheLastPosY),0<this.geometryData.videoHeight&&(this.cacheOriginalY=this.geometryData.videoHeight),this.calcMaxY(),this.calcMaxX(),
this.isDragging=!0,this.wrapper.addClass(a.CSS_SCREEN_RESIZING_TRACKING_CLASS),this.hammerManager))this.hammerManager.on("panmove",this.dragLogic.bind(this))};a.prototype.stop=function(){this.isDragging&&(this.isDragging=!1,this.wrapper.removeClass(a.CSS_SCREEN_RESIZING_TRACKING_CLASS));this.unbindListeners()};a.prototype.enable=function(){this.isEnabled=!0};a.prototype.disable=a.prototype.reset=function(){this.elementCacheList.blockVideo.css({width:this.geometryData.videoWidth,
height:this.geometryData.videoHeight});this.elementCacheList.videoPlayer.css({width:this.geometryData.playerWidth,height:this.geometryData.playerHeight,top:this.geometryData.playerTop,left:this.geometryData.playerLeft,position:this.geometryData.playerPosition});this.elementCacheList.video&&this.elementCacheList.video.css({transform:""});this.elementCacheList.blockChat.css({height:this.geometryData.chatHeight,width:this.geometryData.chatWidth,top:this.geometryData.chatTop,left:this.geometryData.chatLeft});
this.elementCacheList.chatContent.css("height",this.geometryData.chatContentHeight);this.resetCoordinateCache()};a.prototype.resetCoordinateCache=a.prototype.dragging=a.prototype.update=function(a,c){this.isFullScreen=a;this.updateGeometryData(c);this.initStreamPlayerElements();this.reset();this.calcMaxY();this.calcMaxX();this.isFullScreen&&(this.cacheLastPosX=this.maxDragX/2)};
a.prototype.initStreamPlayerElements=function(){SP_VIDEO_DIV.length&&!SP_VIDEO_DIV.is(":hidden")&&(this.elementCacheList.blockSpVideo=SP_VIDEO_DIV,this.elementCacheList.video=$("video",SP_VIDEO_DIV));SP_IMG_DIV.length&&!SP_IMG_DIV.is(":hidden")&&(this.elementCacheList.blockSpVideo=SP_IMG_DIV,this.elementCacheList.video=$("img",SP_IMG_DIV));this.elementCacheList.blockSpVideo&&this.elementCacheList.video&&(this.videoIsRendered=!0)};a.CHAT_INPUT_HEIGHT=40;a.PIXEL_STEP_VERTICAL_DRAG=15;a.PIXEL_STEP_HORIZONTAL_DRAG=
10;a.VIDEO_RATIO=4/3;a.CSS_SCREEN_RESIZING_TRACKING_CLASS="screenIsResizing";a.MODULE_NAMESPACE="ChatVideoDrag";return a}(Core.Listener);f.ChatVideoDrag=e})(ModuleChat||(ModuleChat={}));
var ModuleCredit;
(function(k){function h(c){if(!c)return[];c=c.split(/\n/);for(var b=[],a;c.length;)if(a=c.shift())a=$.trim(a),2<a.length&&b.push(a);return b}var l=function(){function c(b,a){this.systemId=b;this.config=a;this.codeListAlertLastLength=0;this.isMultiLine=!1;this.$form=void 0}c.prototype.init=function(){var b=this,a=$("div.item-accordeon[data-sid="+this.systemId+"]");a.length&&(this.$form=$("form",a),this.$form.on("submit",function(a){b.actionSubmit();a.preventDefault();a.stopPropagation()}),$("a[href='#multipleCode']",
this.$form).bind("click",function(a){b.actionSwitchToMultiline();a.preventDefault();a.stopPropagation()}))};c.prototype.refreshCodeCounter=function(){var b=$("#code-multiple-"+this.systemId);b=h(b.val());$("#info-code-count-"+this.systemId).html(Translation.tr("infoCreditInputCodeCountProgress",{"#NUMBER#":b.length.toString(),"#NUMBER_MAX#":this.config.codeMax.toString()}));b.length>this.config.codeMax?(b.length>this.codeListAlertLastLength&&(new Layer.InfoWithTitle).open(Translation.tr("titleGenericInformation"),
Translation.tr("errorCreditTooManyInputCode",{"#NUMBER#":this.config.codeMax.toString()})),this.codeListAlertLastLength=b.length):this.codeListAlertLastLength=0};c.prototype.actionSwitchToMultiline=function(){var b=this;$(".credit-pack-text-input-one",this.$form).hide();$(".credit-pack-text-input-multiple",this.$form).show();var a=$("#code-multiple-"+this.systemId),e=$("#code-one-"+this.systemId);e.attr("name","");a.attr("name","userData");a.val(e.val());this.refreshCodeCounter();a.on("keyup",function(a){b.refreshCodeCounter()});
this.isMultiLine=!0};c.prototype.actionSubmit=function(){var b=this;if(this.$form&&!ToolApp.redirectToLoginIfNotConnected()){var a=this.isMultiLine?$("#code-multiple-"+this.systemId):$("#code-one-"+this.systemId);var e=a.val();e=h(e);var c=ToolMisc.arrayStringUnique(e);a.val(c.join("\n"));if(e.length>c.length)a=new Layer.InfoWithTitle,a.open(Translation.tr("titleGenericInformation"),Translation.tr("errorCreditCodeDuplicateFound"));else if(0===e.length)a=new Layer.InfoWithTitle,a.open(Translation.tr("titleGenericInformation"),
Translation.tr("errorCreditCodeNotValid"));else if(a=ToolMisc.jQuerySerializedAsArrayToObject(this.$form.serializeArray()),a.userData=$.trim(a.userData),a.asJson=1,""===a.userData)a=new Layer.InfoWithTitle,a.open(Translation.tr("titleGenericInformation"),Translation.tr("errorCreditCodeNotValid"));else{e=this.$form.attr("action");0===e.indexOf(Application.Config.url.root)&&(e=e.substr(Application.Config.url.root.length));var d=new Layer.Loader;d.open();Core.Ajax.post(e,a).done(function(a){b.handleAjaxResponse(a)}).fail(function(a){Layer.openErrorAjax(a)}).always(function(){d.close()})}}};
c.prototype.handleAjaxResponse=function(b){var a=0,e=0;if("codeList"in b){b=b.codeList;for(var c=b.length,d=[],f=0;f<c;f++){var g=b[f];1<g.state?e++:a++}if(0<a){1<a?d.push(Translation.tr("successCreditCodeValidPlural")):d.push(Translation.tr("successCreditCodeValidSingular"));d.push('<ul class="code-success">');for(f=0;f<c;f++)g=b[f],1<g.state||(d.push("<li>"),d.push(StringTool.escapeHtml(g.code)),d.push("</li>"));d.push("</ul>")}if(0<e){1<e?d.push(Translation.tr("errorCreditCodeInvalidPlural")):
d.push(Translation.tr("errorCreditCodeNotValid"));d.push('<ul class="code-failed">');for(f=0;f<c;f++)g=b[f],1<g.state&&(d.push("<li>"),d.push(StringTool.escapeHtml(g.code)),d.push("</li>"));d.push("</ul>")}(new Layer.InfoWithTitle).open(Translation.tr("titleGenericInformation"),d.join(""))}else Layer.openError(Translation.tr("errorGenericFailed"),11025)};return c}();k.CodeList=l})(ModuleCredit||(ModuleCredit={}));
var ModuleCredit;
(function(e){var f=function(){function d(c,b){this.systemId=c;this.config=b;this.ajaxRequestSuccess=0;this.$bloc=void 0}d.prototype.init=function(){var c=this;this.$bloc=$("div.item-accordeon[data-sid="+this.systemId+"]");if(this.$bloc.length&&this.config.decroche){var b=this.config.decroche.progress.url;0===b.indexOf(Application.Config.url.root)&&(this.config.decroche.progress.url=b.substr(Application.Config.url.root.length));var a=function(){window.setTimeout(function(){var b=c.progressionCheck();b&&
b.done(function(){a()})},5E3)};a()}};d.prototype.progressionCheck=function(){var c=this;if(this.config.decroche){var b=jQuery.Deferred();Core.Ajax.post(this.config.decroche.progress.url,{asJson:1,userData:this.config.decroche.progress.data}).done(function(a){$(".decroche-cumulatedCreditAmountCurrency",c.$bloc).html(a.credit.addedCurrency);$(".js-client-amount-with-currency").html(a.credit.amountCurrency);$(".decroche-state-str",c.$bloc).html(a.call.stateStr);$(".decroche-progress",c.$bloc).html(a.call.durationPercent+
"%");c.ajaxRequestSuccess++;3===a.call.stateId?$(".decroche-get-new-code",c.$bloc).show():b.resolve(a)}).fail(function(a){var b=Translation.tr("titleGenericErrorNumber",{"#NUMBER#":a.code.toString()});$(".decroche-error",c.$bloc).html(b+": "+a.msg);a=Layer.openErrorAjax(a);if(0==c.ajaxRequestSuccess)a.on(Layer.EVENT_CLOSE,function(){ToolApp.redirectToCreditPage()})});return b}};return d}();e.Decroche=f})(ModuleCredit||(ModuleCredit={}));
var DropzoneMessaging;
(function(f){var g=function(){function b(a){if(0==a.length)throw Error("sectionParent empty");this.dropzoneElId=a+"Dropzone";this.sectionElId=a;this.sessionMessagingId=Math.round(1E6*Math.random());a="<form action='"+Application.Config.url.root+'/messaging/saveFileTmp\' class="dropzone" id='+this.dropzoneElId+">";a=a+'<div class="dz-message" data-dz-message>'+("<span>"+Translation.tr("infoMediaClicOrDropPictureHere")+"</span>");a=a+"</div>"+("<input id='sessionMessagingId' type='hidden' value='"+this.sessionMessagingId+
"'>");a+="</form>";var b=$(".areaDropzone","#"+this.sectionElId);b.html(a);b.show();var c=this;this.dropzone=new Dropzone("#"+this.dropzoneElId,{url:Application.Config.url.root+"/messaging/saveFileTmp/",paramName:"file",maxFilesize:Application.fileConfig.imageSizeBytesMax/1048576,maxFiles:Application.fileConfig.imageQuantityMax,method:"post",resizeWidth:1920,createImageThumbnails:!0,acceptedFiles:"image/jpeg,image/jpg",addRemoveLinks:!0,dictRemoveFile:Translation.tr("actionGenericRemove"),dictCancelUpload:Translation.tr("actionGenericCancel"),
dictCancelUploadConfirmation:Translation.tr("questionMediaCancelUploadConfirm"),dictRemoveFileConfirmation:Translation.tr("questionMediaRemoveFileConfirm"),accept:function(e,d){$(".message-error","#"+c.sectionElId).hide();var a=e.name.replace(/\.[^/.]+$/,"");$(".dropzoneSend","#"+c.sectionElId).attr("disabled","disabled");a?(0<this.files.length&&$(".dz-message","#"+c.dropzoneElId).hide(),a=Math.round(1E6*Math.random()),$(".dz-details",e.previewElement).append("<span class='fileId'>"+a+"</span>"),
d()):d("Filename extension error")},sending:function(a,d,c){d=$("#sessionMessagingId").val();a=$(".fileId",a.previewElement).html();c.append("sessionMessagingId",d);c.append("fileId",a)},removedfile:function(a){var d=$(".fileId",a.previewElement).html();c.removeFileSession(d);0==this.files.length?$(".dz-message","#"+c.dropzoneElId).show():$(".dz-message","#"+c.dropzoneElId).hide();var b;null!=(b=a.previewElement)&&null!=b.parentNode&&b.parentNode.removeChild(a.previewElement);c.showMaxFileInfo()},
init:function(){this.on("complete",function(){c.showMaxFileInfo();0==this.getQueuedFiles().length&&0==this.getUploadingFiles().length&&c.showButton()});this.on("success",function(a,d){if("object"==typeof d.error){var b=Translation.tr("titleGenericErrorNumber",{"#NUMBER#":d.error.code.toString()})+" : "+d.error.msg;$(".fileGenericErrorWithCode","#"+c.sectionElId).html(b);$(".fileGenericErrorWithCode","#"+c.sectionElId).show();this.removeFile(a)}});this.on("error",function(a,b){c.showButton();-1<b.indexOf("Max filesize")?
$(".fileTooBig","#"+c.sectionElId).show():-1<b.indexOf("You can't upload files of this type.")?$(".fileExtensionNotAllowed").show():-1<b.indexOf("Upload canceled")||$(".fileGenericError","#"+c.sectionElId).show();this.removeFile(a)})}})}b.prototype.showButton=function(){0==this.dropzone.getUploadingFiles().length&&$(".dropzoneSend","#"+this.sectionElId).removeAttr("disabled")};b.prototype.showMaxFileInfo=function(){$(".dz-image-preview","#"+this.sectionElId).length>=Application.fileConfig.imageQuantityMax?
$(".fileMaxExceeded","#"+this.sectionElId).show():$(".fileMaxExceeded","#"+this.sectionElId).hide()};b.prototype.removeFileSession=function(a){this.isEmpty()||Core.Ajax.post("/messaging/removeFileSession/",{sessionMessagingId:this.sessionMessagingId,fileId:a})};b.prototype.isEmpty=function(){return 1>=$("#"+this.dropzoneElId).children().length};b.prototype.destroy=function(){this.dropzone.destroy();$(".message-error","#"+this.sectionElId).hide()};return b}();f.Loader=g})(DropzoneMessaging||(DropzoneMessaging=
{}));
var DropzoneMessaging2;
(function(k){var g,m=function(){function d(d,a){void 0===a&&(a=!1);if(0==d.length)throw Error("sectionParent empty");this.dropzoneElId=d+"Dropzone";this.sectionElId=d;this.sessionMessagingId=Math.round(1E6*Math.random());var f="<form action='"+Application.Config.url.root+'/messaging/saveFileTmp\' class="dropzone" id='+this.dropzoneElId+">";a||(f=f+'<div class="dz-message" data-dz-message>'+("<span>"+Translation.tr("infoMediaClicOrDropPictureHere")+"</span>"),f+="</div>");f+="<input id='sessionMessagingId' type='hidden' value='"+
this.sessionMessagingId+"'>";f+="</form>";var l=$(".areaDropzone","#"+this.sectionElId);l.html(f);l.show();var b=this;this.dropzone=new Dropzone("#"+this.dropzoneElId,{url:Application.Config.url.root+"/messaging/saveFileTmp/",paramName:"file",maxFilesize:Application.fileConfig.imageSizeBytesMax/1048576,maxFiles:Application.fileConfig.imageQuantityMax,method:"post",resizeWidth:1920,createImageThumbnails:!0,acceptedFiles:"image/jpeg,image/jpg",addRemoveLinks:!0,parallelUploads:1,dictRemoveFile:Translation.tr("actionGenericRemove"),
dictCancelUpload:Translation.tr("actionGenericCancel"),dictCancelUploadConfirmation:Translation.tr("questionMediaCancelUploadConfirm"),dictRemoveFileConfirmation:Translation.tr("questionMediaRemoveFileConfirm"),accept:function(e,a){g=[];$(".message-error","#"+b.sectionElId).hide();var c=e.name.replace(/\.[^/.]+$/,"");$(".dropzoneSend","#"+b.sectionElId).attr("disabled","disabled");c?(0<this.files.length&&$(".dz-message","#"+b.dropzoneElId).hide(),c=Math.round(1E6*Math.random()),$(".dz-details",e.previewElement).append("<span class='fileId'>"+
c+"</span>"),a()):a("Filename extension error")},sending:function(a,b,c){b=$("#sessionMessagingId").val();a=$(".fileId",a.previewElement).html();c.append("sessionMessagingId",b);c.append("fileId",a)},removedfile:function(e){var h=$(".fileId",e.previewElement).html();b.removeFileSession(h);0==this.files.length?a||$(".dz-message","#"+b.dropzoneElId).show():$(".dz-message","#"+b.dropzoneElId).hide();var c;null!=(c=e.previewElement)&&null!=c.parentNode&&c.parentNode.removeChild(e.previewElement);a||b.showMaxFileInfo()},
init:function(){this.on("complete",function(){a||b.showMaxFileInfo();0==this.getQueuedFiles().length&&0==this.getUploadingFiles().length&&(a||b.showButton())});this.on("success",function(e,h){a&&$(".reply-file"+e.size).hide(500).remove();if("object"==typeof h.error){var c=Translation.tr("titleGenericErrorNumber",{"#NUMBER#":h.error.code.toString()})+" : "+h.error.msg;a?((new Layer.InfoNoTitle).open(c),b.dropzone.destroy(),new k.Loader("reply-image",a)):($(".fileGenericErrorWithCode","#"+b.sectionElId).html(c),
$(".fileGenericErrorWithCode","#"+b.sectionElId).show());this.removeFile(e)}else{var d=this;a&&(g.push(e.previewElement.children[0].innerHTML),setTimeout(function(){if(0==$(".progress-info").length){var a=new Layer.MessagingSendImageConfirmation;a.on(Layer.EVENT_CANCEL,function(){d.removeAllFiles()});a.on(Layer.EVENT_CONFIRM_YES,function(){0==$(".reply-file").length&&AppUserMessaging2.Action.send(function(){var a=+$(".thread-info").attr("data-id");AppUserMessaging2.Action.view(a)})});var b={image:g[0],
image2:""};g[1]&&(b.image2=g[1]);a.open(b)}},501))}});this.on("maxfilesexceeded",function(){a&&(b.dropzone.removeAllFiles(),(new Layer.InfoNoTitle).open($(".fileMaxExceeded","#"+b.sectionElId).html()))});this.on("error",function(e,d){a?(b.dropzone.destroy(),new k.Loader("reply-image",a),$(".reply-file").remove()):b.showButton();if(-1<d.indexOf("Max filesize"))if(a){var c=new Layer.InfoNoTitle;c.open($(".fileTooBig","#"+b.sectionElId).html())}else $(".fileTooBig","#"+b.sectionElId).show();else-1<d.indexOf("You can't upload files of this type.")?
a?(c=new Layer.InfoNoTitle,c.open($(".fileExtensionNotAllowed","#"+b.sectionElId).html())):$(".fileExtensionNotAllowed").show():-1<d.indexOf("Upload canceled")||(a?(c=new Layer.InfoNoTitle,c.open($(".fileGenericError","#"+b.sectionElId).html())):$(".fileGenericError","#"+b.sectionElId).show());this.removeFile(e)});a&&(this.on("processing",,
this.on("uploadprogress",function(a,b){var c=".reply-file"+a.size,d=Math.round(b);$(c+" .percent").text(d);$(c+" .progress-bar span").animate({width:d+"%"},200)}))}})}d.prototype.showButton=function(){0==this.dropzone.getUploadingFiles().length&&$(".dropzoneSend","#"+this.sectionElId).removeAttr("disabled")};d.prototype.showMaxFileInfo=function(){$(".dzimagepreview","#"+this.sectionElId).length>=Application.fileConfig.imageQuantityMax?$(".fileMaxExceeded","#"+this.sectionElId).show():$(".fileMaxExceeded",
"#"+this.sectionElId).hide()};d.prototype.removeFileSession=function(d){this.isEmpty()||Core.Ajax.post("/messaging/removeFileSession/",{sessionMessagingId:this.sessionMessagingId,fileId:d})};d.prototype.isEmpty=function(){return 1>=$("#"+this.dropzoneElId).children().length};d.prototype.destroy=function(){this.dropzone.destroy();$(".message-error","#"+this.sectionElId).hide()};return d}();k.Loader=m})(DropzoneMessaging2||(DropzoneMessaging2={}));
var __extends=this&&this.__extends||function(){var f=function(c,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e])};return f(c,a)};return function(c,a){function b(){this.constructor=c}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(c,a);c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}(),
ModuleAccordionFooter;
(function(f){var c=function(a){function b(c,e){var d=a.call(this)||this;d.element=c;d.config=$.extend({allowMultiExpand:b.CONFIG_DEFAULT_ALLOW_MULTI_EXPAND,isDisabled:!0},e||{});return d}__extends(b,a);b.prototype.init=b.prototype.setup=function(){if(!this.config.isDisabled){var a=this;$(".item-accordion",this.element).removeClass("is-disabled");this.element.bind("click",function(e){if(e.target){var d=$(e.target);if(!(0>=d.closest(".accordion-data-header").length)){var c=$(this);
d=d.closest(".item-accordion");var f=$(".action-switch",d);f.removeClass("".concat(b.CSS_CLASS_SWITCH_ARROW_UP," ").concat(b.CSS_CLASS_SWITCH_ARROW_DOWN)).addClass(b.CSS_CLASS_SWITCH_ARROW_DOWN);d.hasClass("is-visible")?(d.removeClass("is-visible"),!1===a.config.allowMultiExpand&&$(".item-accordion",c).removeClass("is-visible")):(!1===a.config.allowMultiExpand&&$(".item-accordion",c).removeClass("is-visible"),d.addClass("is-visible"),f.removeClass("".concat(b.CSS_CLASS_SWITCH_ARROW_UP," ").concat(b.CSS_CLASS_SWITCH_ARROW_DOWN)).addClass(b.CSS_CLASS_SWITCH_ARROW_UP));
e.preventDefault();e.stopPropagation();a.fire(209)}}})}};b.CONFIG_DEFAULT_ALLOW_MULTI_EXPAND=!1;b.CSS_CLASS_SWITCH_ARROW_UP="action-switch--up";b.CSS_CLASS_SWITCH_ARROW_DOWN="action-switch--down";return b}(Core.Listener);f.Manager=c})(ModuleAccordionFooter||(ModuleAccordionFooter={}));
var __extends=this&&this.__extends||function(){var g=function(h,f){g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e])};return g(h,f)};return function(h,f){function b(){this.constructor=h}if("function"!==typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");g(h,f);h.prototype=null===f?Object.create(f):(b.prototype=f.prototype,new b)}}(),
MediaListModule;
(function(g){g.EVENT_NO_MORE_ITEM="noMore";g.EVENT_VIDEO_CLICK="videoClick";g.EVENT_PHOTO_CLICK_VIP="photoClickVip";var h=function(f){function b(){var a=f.call(this)||this;a.requestPromise=void 0;a.ajaxLock=0;a.state={access:0,type:0,next:void 0,nextAvailable:!1,sort:0};a.noMoreItem=!1;a.performerId=0;a.performerNickname="";a.paginationEnabled=!1;a.paginationType=1;a.lastMediaElement=void 0;a.userIsAboVipSubscribed=!1;a.ajaxLastDate=void 0;a.ajaxLastDateStart=void 0;a.fancyboxLoadSetup=!1;a.mediaVideoIdList=
[];a.blurVipVideoThumbnail=!1;return a}__extends(b,f);b.prototype.performerSetInfo=b.prototype.setupPhotoGallery=function(){var a=$('[data-fancybox="photo-gallery"]');$(document).off("click.fb-start");a.fancybox({loop:!0,buttons:["close"],hash:!1,clickOutside:"close",arrows:!1,mobile:{clickSlide:"close"},beforeShow:function(a,c){a.$refs&&a.$refs.container&&a.$refs.container.css("z-index",1004)},afterShow:function(a,
c){if(c.opts&&c.opts.$thumb){var e=MediaRatingModule.Manager.getInstance(),d=c.opts.$thumb;e.mediaType=1;e.register(a,d)}},beforeClose:function(){MediaRatingModule.Manager.getInstance().destroy()},baseTpl:'<div class="fancybox-container photo-gallery-skin" role="dialog" tabindex="-1"><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>/<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div></div><div class="fancybox-bg"></div></div>'})};
b.prototype.init=function(a,e){this.jDom=$("#"+a);this.state=e;if(this.mediaVideoIdList.length)for(var c=0,b=this.mediaVideoIdList.length;c<b;c++){var d=this.mediaVideoIdList[c];!1!==ToolStorage.videoPlayedIs(d)&&this.uiVideoStateSet(d,"state-played")}this.renderPostOperation(!1,0,!1);var f=this;this.jDom.unbind("click").bind("click",function(a){if(a.target){var c=$(a.target).closest(".thumb"),e=0,b=0;if(!f.userIsAboVipSubscribed){var d=c.attr("data-vip");d&&(e=parseInt(d,10));(d=c.attr("data-gift"))&&
(b=parseInt(d,10))}c=c.attr("data-vid");a.preventDefault();a.stopPropagation();c?(a=parseInt(c,10))&&f.fire(g.EVENT_VIDEO_CLICK,{videoId:a,isGift:b,isVip:e}):e&&f.fire(g.EVENT_PHOTO_CLICK_VIP)}});this.paginationEnabled&&1===this.paginationType&&this.scroll()};b.prototype.uiVideoStateSet=function(a,e,c){void 0===c&&(c=!0);a=$('a.thumb[data-vid="'+a+'"]');a.length&&(a=a.find(".vodListPlay"),a.length&&(c?a.addClass(e):a.removeClass(e)))};b.prototype.loaderShow=function(a){var e='<div class="js-loader layer-loader layer-loader-large">\n<img src="'+
Application.Config.url.static1+'/img/loader/124x124.gif" width="48" height="48" alt="xxx" />\n</div>';a?this.jDom.html(e):this.jDom.append(e)};b.prototype.loaderHide=function(){this.jDom.find(".js-loader").remove()};b.prototype.renderPostOperation=function(a,e,c){var b=this,d=this.jDom.find("a.thumb").last();d.length?(this.lastMediaElement=d[0],ToolApp.fancyboxIsLoaded()?this.setupPhotoGallery():0==this.fancyboxLoadSetup&&(this.fancyboxLoadSetup=!0,ToolApp.event.on(17,)):this.lastMediaElement=void 0;if((a||!(1>e))&&c){var f=this;window.setTimeout(function(){f.ajaxLoadMoreIfNeed("postop")},100)}};b.prototype.ajaxLoadMoreIfNeed=function(a){1===this.paginationType&&(this.ajaxLastDate&&100>(new Date).getTime()-this.ajaxLastDate.getTime()||ToolBrowser.isElementInViewportPartial(this.lastMediaElement,600)&&this.loadMore(a+"-eol"))};b.prototype.scroll=
b.prototype.renderList=function(a){for(var e=[];a.length;){var c=a.shift();if(c){var b="image";var d="";c.isVip&&(d=' data-vip="1"');var f="";c.isLoved&&(f+=' data-loved="1"');if(c.isVideo)c.isVipGift=c.isVipGift&&c.isVip,!c.isVip||this.userIsAboVipSubscribed||c.isVipGift||(this.blurVipVideoThumbnail&&(b+=" thumb-vip"),ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&(b+=" hard-censored")),c.isVipGift&&(d+=' data-gift="1"'),b='<a class="thumb"'+d+f+' data-vid="'+c.id+'" data-love="'+
c.loves+'" data-mediaType="2"> <div class="wrapper">  <img loading="lazy" width="320" height="240" class="'+b+'" src="'+c.thumbnail+'" alt="'+c.id+'" />  <div class="vodDuration">'+c.duration+"</div>",c.isVip&&(c.isVipGift?b+=' <div class="vodVip"><span class="iconVipGift"></span></div>':(d="",c.isVip&&this.userIsAboVipSubscribed&&(d+=" isSubscribed"),b+=' <div class="vodVip"><span class="iconVip small'+d+'"></span></div>')),d="",ToolStorage.videoPlayedIs(c.id)&&(d=" state-played"),c.isVip&&this.userIsAboVipSubscribed&&
(d+=" isSubscribed"),b+='  <div class="vodListPlay'+d+'"></div> </div></a>';else{var g="";if(!c.isVip||this.userIsAboVipSubscribed)g=' data-fancybox="photo-gallery" href="'+c.url+'"';c.isVip&&!this.userIsAboVipSubscribed&&(b+=" thumb-vip hard-censored");b='<a class="thumb" data-pid="'+c.id+'" data-love="'+c.loves+'" data-mediaType="1"'+d+f+g+'> <div class="wrapper">  <img loading="lazy" class="'+b+'" src="'+c.thumbnail+'" alt="'+c.title+'" />';c.isVip&&(d="",c.isVip&&this.userIsAboVipSubscribed&&
(d+=" isSubscribed"),b+=' <div class="vodVip"><span class="iconVip small'+d+'"></span></div>');b+=" </div></a>"}e.push(b)}}return e.join("")};b.prototype.videoIsNowAGift=function(a){try{var b=document.querySelector('[data-vid="'+a.toString(10)+'"] div.vodVip span');b&&(b.className="iconVipGift")}catch(c){}};b.prototype.displayEmptyMsg=function(){var a=Translation.tr("infoGenericNoDataFound");this.jDom&&this.jDom.html('<p class="no-data-available">'.concat(a,"</p>"))};b.prototype.ajaxRequest=function(a){if(this.ajaxLock){if(this.requestPromise)return this.requestPromise;
throw Error("11084: lock fail");}this.ajaxLock=1;this.ajaxLastDate=this.ajaxLastDateStart=new Date;this.requestPromise=Core.Ajax.post("/performerRoom/getMediaList/",{performerId:this.performerId,config:this.state,origin:a});var b=this;this.loaderShow(void 0===this.state.next);this.requestPromise.done(function(a){var c=a.list.length,d=0===c;if(d||!a.nextAvailable)b.noMoreItem=!0,b.fire(g.EVENT_NO_MORE_ITEM);var e=b.renderList(a.list),f=void 0===b.state.next;void 0===b.state.next?d?b.displayEmptyMsg():
b.jDom.html(e):b.jDom.append(e);b.renderPostOperation(f,c,a.nextAvailable);b.state.next=a.next}).fail(function(a){Layer.openErrorAjax(a)}).always(function(a){b.ajaxLock=0;b.requestPromise=void 0;b.loaderHide();b.ajaxLastDate=new Date;b.ajaxLastDateStart=void 0});return this.requestPromise};b.prototype.reloadConfigChanged=function(a){this.noMoreItem=!1;this.state=a;this.state.next=void 0;a="reload-config";this.requestPromise&&(this.requestPromise.jqXHR.abort(),this.ajaxLock=0,a+="-aborted");return this.ajaxRequest(a)};
b.prototype.loadMore=function(a){void 0===a&&(a="load-more");if(!this.noMoreItem)return this.ajaxRequest(a)};return b}(Core.Listener);g.Manager=h})(MediaListModule||(MediaListModule={}));
var __extends=this&&this.__extends||function(){var f=function(d,g){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,b){f.__proto__=b}||function(f,b){for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(f[a]=b[a])};return f(d,g)};return function(d,g){function h(){this.constructor=d}if("function"!==typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");f(d,g);d.prototype=null===g?Object.create(g):(h.prototype=g.prototype,new h)}}(),
MediaRatingModule;
(function(f){f.EVENT_MEDIA_RATED="mediaRated";f.MODULE_CSS_SELECTOR=".media-rating";var d=function(d){function b(){var a=d.call(this)||this;a.requestPromise=void 0;a.registered=!1;a.ajaxLock=0;return a}__extends(b,d);b.getInstance=function(){this.instance||(this.instance=new b);return this.instance};b.templateCompile=function(a){var b="media-rating-inner";a.isLoved&&(b+=" media-rated");var e=a.loveCounter;if(isNaN(e))return"";1>parseInt(String(e),10)&&(e="");return['<div class="'+b+'">','   <a href="#">\n       <svg role="img">',
'           <use xlink:href="'+ToolApp.imageIconSvgGetUrl()+'#heartMediaRating" href="'+ToolApp.imageIconSvgGetUrl()+'#heartMediaRating"></use>',"       </svg>",'       <span class="rating-counter">'+e+"</span>",'       <span class="rating-text">'+a.loveText+"</span>","   </a>\n</div>"].join("\n")};b.templateGet=function(a){a=a&&a.length?$(a,f.MODULE_CSS_SELECTOR):$(f.MODULE_CSS_SELECTOR);return a.length?a:!1};b.prototype.attach=function(a,b){var e=1===this.mediaType,c=e?"media-type-photo":"media-type-video";
c=[f.MODULE_CSS_SELECTOR.substr(1),c].join("\n");c=$("<div />").addClass(c).html(a);e?c.appendTo(b):(e=b.position(),c.css({bottom:e.top-10,transform:"translateX(-".concat(e.left+10,"px)")}),c.insertAfter(b))};b.layerRegister=b.prototype.isRegistered=function(){return this.registered};b.prototype.generateRequestPayload=function(){var a=parseInt(this.thumb.attr("data-mediaType")),
b=1===a?parseInt(this.thumb.attr("data-pid")):parseInt(this.thumb.attr("data-vid"));return{mediaType:a,mediaId:b}};b.prototype.setupEvent=function(){var a=this,c=b.templateGet();if(c)c.on("click","a",function(c){c.preventDefault();Application.Config.isUserConnected?a.thumb.attr("data-loved")||(a.slide=$(c.currentTarget),a.ajaxRequest()):b.layerRegister()})};b.prototype.ajaxRequest=function(){var a=this;if(this.ajaxLock){if(this.requestPromise)return this.requestPromise;throw Error("10091: lock fail");
}this.ajaxLock=1;this.requestPromise=g.requestRateMedia(this.generateRequestPayload());this.requestPromise.done(function(c){c.success&&((c=b.templateGet())&&c.off("click"),a.rated())}).fail(function(a){$.fancybox.close();Layer.openErrorAjax(a)}).always(function(){a.ajaxLock=0;a.requestPromise=void 0});return this.requestPromise};b.prototype.rated=function(){var a=b.templateGet(".media-rating-inner");a&&a.addClass("media-rated");a=parseInt(this.thumb.attr("data-love"));this.thumb.attr("data-love",
a+1);this.thumb.attr("data-loved",1);a=$(".rating-counter",this.slide);var c=$(".rating-text",this.slide),e=a.text();""===e&&(e="0");a.text(parseInt(e)+1);this.thumb.attr("data-loved",1);1===parseInt(a.text())?c.text("Love"):c.text("Loves");this.fire(f.EVENT_MEDIA_RATED,this.thumb)};b.prototype.resize=function(){if(!1!==this.isRegistered()&&2===this.mediaType){var a=$(".fancybox-content"),c=b.templateGet();c&&(c.hide(),setTimeout(function(){var b=a.position();c.css({bottom:b.top-10,transform:"translateX(-".concat(b.left+
10,"px)")});c.show()},500))}};b.prototype.register=function(a,c){var e=a.current.$content,g=0===$(f.MODULE_CSS_SELECTOR,e).length,d=c.closest("a.thumb");if(d){this.thumb=d;var h=parseInt(d.attr("data-love"),10),k="Loves";1===h&&(k="Love");e&&g&&(g={loveCounter:h,loveText:k},d.attr("data-loved")&&(g.isLoved=parseInt(d.attr("data-loved"),10)),d=b.templateCompile(g),this.templateTargetCssSelector&&a.$refs&&a.$refs.container&&a.$refs.container.length&&(e=$(this.templateTargetCssSelector,a.$refs.container)),
this.attach(d,e),this.setupEvent(),this.registered=!0)}};b.prototype.destroy=function(){this.registered=!1;this.thumb=this.slide=void 0;var a=b.templateGet();a&&a.remove()};b.prototype.fancyBoxIntersectionFix=function(){var a=$(".fancybox-content",".fancybox-slide--current");a&&setTimeout(function(){var b=$(".fancybox-caption"),e=$(".media-rating > .media-rating-inner",".fancybox-slide--current").outerWidth(),d=a.innerWidth();b&&(0<e&&b.css({"max-width":d-e-5+"px"}),b.appendTo(a))},500)};return b}(Core.Listener);
f.Manager=d;var g;(function(d){d.requestRateMedia=function(b){return Core.Ajax.post("/performerRoom/rateMedia/",b)}})(g=f.Ajax||(f.Ajax={}))})(MediaRatingModule||(MediaRatingModule={}));
var __extends=this&&this.__extends||function(){var e=function(d,a){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return e(d,a)};return function(d,a){function g(){this.constructor=d}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");e(d,a);d.prototype=null===a?Object.create(a):(g.prototype=a.prototype,new g)}}(),
MediaRatingModule2;
(function(e){e.MODULE_CSS_SELECTOR=".media-rating";var d=function(d){function c(){var b=d.call(this)||this;b.requestPromise=void 0;b.registered=!1;b.ajaxLock=0;b.mediaInfo={id:0,nickname:"",photoId:0,srcHd:"",srcThumb:"",thumbImgAlt:"",vip:0,love:0,isLoved:!1};return b}__extends(c,d);c.getInstance=function(){this.instance||(this.instance=new c);return this.instance};c.templateCompile=function(b){var c="media-rating-inner";b.isLoved&&(c+=" media-rated");var f=b.loveCounter;if(isNaN(f))return"";1>parseInt(String(f),
10)&&(f="");return['<div class="'+c+'">','   <a href="#">\n       <svg role="img">','           <use xlink:href="'+ToolApp.imageIconSvgGetUrl()+'#heartMediaRating" href="'+ToolApp.imageIconSvgGetUrl()+'#heartMediaRating"></use>',"       </svg>",'       <span class="rating-counter">'+f+"</span>",'       <span class="rating-text">'+b.loveText+"</span>","   </a>\n</div>"].join("\n")};c.templateGet=function(b){b=b&&b.length?$(b,e.MODULE_CSS_SELECTOR):$(e.MODULE_CSS_SELECTOR);return b.length?b:!1};c.prototype.attach=
function(b,c){var f=1===this.mediaType,a=f?"media-type-photo":"media-type-video";a=[e.MODULE_CSS_SELECTOR.substr(1),a].join("\n");a=$("<div />").addClass(a).html(b);f?a.appendTo(c):(f=c.position(),a.css({bottom:f.top-10,transform:"translateX(-".concat(f.left+10,"px)")}),a.insertAfter(c))};c.layerRegister=function(){ToolApp.fancyboxIsLoaded()&&$.fancybox.close();Application.Config.wl.signUpSignIsAsLayer?ToolRegister.loginWebauthOrRegister():ToolApp.redirectToLoginIfNotConnected()};c.prototype.isRegistered=
function(){return this.registered};c.prototype.generateRequestPayload=function(){if("photoId"in this.mediaInfo&&0<this.mediaInfo.photoId)return{mediaType:1,mediaId:this.mediaInfo.photoId};if("videoId"in this.mediaInfo&&0<this.mediaInfo.videoId)return{mediaType:2,mediaId:this.mediaInfo.videoId}};c.prototype.setupEvent=function(){var b=this,a=c.templateGet();if(a)a.on("click","a",function(a){a.preventDefault();Application.Config.isUserConnected?b.mediaInfo.isLoved||(b.slide=$(a.currentTarget),b.ajaxRequest()):
c.layerRegister()})};c.prototype.ajaxRequest=function(){var b=this;if(this.ajaxLock){if(this.requestPromise)return this.requestPromise;throw Error("11202: lock fail");}var e=this.generateRequestPayload();if(!e)throw Error("11203: bad request data");this.ajaxLock=1;this.requestPromise=a.requestRateMedia(e);this.requestPromise.done(function(a){a.success&&((a=c.templateGet())&&a.off("click"),b.onLoved())}).fail(.always(function(){b.ajaxLock=0;b.requestPromise=
void 0});return this.requestPromise};c.prototype.onLoved=function(){var b=c.templateGet(".media-rating-inner");b&&b.addClass("media-rated");this.mediaInfo.love++;this.mediaInfo.isLoved=!0;$(".rating-counter",this.slide).text(this.mediaInfo.love);$(".rating-text",this.slide).text(1==this.mediaInfo.love?"Love":"Loves");this.fire(204,this.mediaInfo)};c.prototype.resize=function(){if(!1!==this.isRegistered()&&2===this.mediaType){var b=$(".fancybox-content"),a=c.templateGet();a&&(a.hide(),setTimeout(function(){var c=
b.position();a.css({bottom:c.top-10,transform:"translateX(-".concat(c.left+10,"px)")});a.show()},500))}};c.prototype.register=function(b,a){this.mediaInfo=a;var f=b.current.$content,d=0===$(e.MODULE_CSS_SELECTOR,f).length,g=a.love,h="Loves";1===g&&(h="Love");f&&d&&(d={loveCounter:g,loveText:h},d.isLoved=a.isLoved?1:0,d=c.templateCompile(d),this.templateTargetCssSelector&&b.$refs&&b.$refs.container&&b.$refs.container.length&&(f=$(this.templateTargetCssSelector,b.$refs.container)),this.attach(d,f),
this.setupEvent(),this.registered=!0)};c.prototype.destroy=function(){this.registered=!1;this.slide=void 0;var b=c.templateGet();b&&b.remove()};return c}(Core.Listener);e.Manager=d;var a;(function(a){a.requestRateMedia=function(a){return Core.Ajax.post("/performerRoom/rateMedia/",a)}})(a=e.Ajax||(e.Ajax={}))})(MediaRatingModule2||(MediaRatingModule2={}));
var ModuleMessagingUnread;(function(b){var c=-1;b.update=function(a){if("undefined"!==typeof a&&a!=c){var b=$(".messaging-unread-badge-number"),d=$(".messaging-unread-badge"),e=$(".message-count-new");if(a){var f=99<a?"99":a.toString(10);e.text(f);e.show();b.text(f);0>=c&&d.show()}else e.hide(),d.length&&d.hide();c=a}}})(ModuleMessagingUnread||(ModuleMessagingUnread={}));
var __extends=this&&this.__extends||function(){var h=function(q,l){h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,l){h.__proto__=l}||function(h,l){for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(h[n]=l[n])};return h(q,l)};return function(q,l){function p(){this.constructor=q}if("function"!==typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");h(q,l);q.prototype=null===l?Object.create(l):(p.prototype=l.prototype,new p)}}(),
ModuleOnline;
(function(h){function q(h,d){var a=d?"\u2764\ufe0f":"\ud83e\udd0d";return h.toString(10)+" "+a}h.EVENT_PERFORMER_SELECTION="performerChat";h.EVENT_LIST_EMPTY="listEmpty";h.EVENT_RECENT_LIST_MAYBE_EMPTY="recentListMaybeEmpty";h.EVENT_LIST_END="listEnd";h.EVENT_LIST_FIRST_LOAD="listFirstLoad";h.EVENT_LIST_LOAD_START="loadStart";h.EVENT_LIST_LOAD_END="loadEnd";h.HISTORY_PAGE_ID="online";var l=0,p=function(n){function d(a){var b=n.call(this)||this;a.footerEnabled=!1;b.config=a;b.firstLoadDone=!1;b.performerDatabaseById=
{};b.mediaDatabaseById={};b.itemIdList=[];b.imageResolution={width:320,height:240};b.isVisibleState=!1;b.resizeLastContainerWidth=-1;b.currentCellSize={width:320,height:240};b.refreshListOnClose=!1;b.scrollModelId=0;Application.Config.isUserConnected||Application.online.config.liveCamByDefault?(b.displayLiveCam=0<ToolPreference.getItemInt(1),ToolApp.userInfo&&"mustSeeSoftContentOnlyBecauseOfAgeVerification"in ToolApp.userInfo&&ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&(b.displayLiveCam=
!1)):b.displayLiveCam=!1;b.spImageOnlyStream=b.factorySpImageOnly();b.ajaxOrUiLastDate=void 0;b.ajaxLock=0;b.refreshTotalRequestSinceLastUiInteraction=0;4===b.config.paginationType&&ToolStorage.onlineListIsPaginationInfiniteScrollingButtonClicked()&&(b.config.paginationType=1);b.paginationNbItem=2===b.config.paginationType||3===b.config.paginationType||4===b.config.paginationType?120:35;b.paginationOffset=0;b.performerStatDownloaded=!1;if(3==b.config.pageId||4==b.config.pageId)b.performerStatDownloaded=
!0;b.loadMoreQueryData=null;b.requestPromise=void 0;b.menuFilter=void 0;b.requestAborted=!1;b.scrollTopLastPosition=0;b.pageOpenDate=new Date;b.domId="";b.lastModelId=0;b.imageSoloToken="";b.currentFilterInfo={filter:{},nickname:"",favorite:0,recent:0,vip:0,sort:{}};b.filterUrl="";Application.online&&Application.online.document&&Application.online.document.uri&&(a=Application.online.document.uri.indexOf("?"),b.filterUrl=0<a?Application.online.document.uri.substring(0,a):Application.online.document.uri);
b.intersectionObserver=void 0;b.jFooterDomCurrent=void 0;b.adSupport=null!==Application.online.advertisingList;b.adEnabled=!0;b.adLastRowGap=0;b.advertisingData=void 0;b.moreItemAvailable=!0;b.avsBannerClosed=!1;ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&b.initWidgetBannerAvs();return b}__extends(d,n);d.prototype.init=function(a){this.domId=a;(ToolBrowser.isVirtualRealitySupported()||this.config.isVirtualRealitySupported)&&ToolApp.redirectToVRAlternative();this.jDomId=$("#"+
this.domId);this.setupEvent();this.initBackToVrButton()};d.prototype.getInternalState=function(){return{module:"online",refreshTotalRequestSinceLastUiInteraction:this.refreshTotalRequestSinceLastUiInteraction,pageOpenDateMs:this.pageOpenDate.getTime(),currentFilterInfo:this.currentFilterInfo,ajaxLock:this.ajaxLock,firstLoadDone:this.firstLoadDone?1:0,isVisibleState:this.isVisibleState?1:0,currentCellSize:this.currentCellSize}};d.prototype.setMenuFilter=function(a){this.menuFilter=a};d.prototype.getMenuFilter=
function(){return this.menuFilter};d.prototype.setFilterMobile=function(a){this.filterMobile=a};d.prototype.getFilterMobile=function(){return this.filterMobile};d.prototype.isVisible=function(){return this.isVisibleState};d.prototype.mediaInfoById=d.prototype.itemIdListGet=function(){return this.itemIdList};d.prototype.hasFilter=function(){if(this.currentFilterInfo.nickname||this.currentFilterInfo.favorite||this.currentFilterInfo.recent||
this.currentFilterInfo.vip)return!0;for(var a in this.currentFilterInfo.filter){if(this.currentFilterInfo.filter.hasOwnProperty(a))return!0;break}return!1};d.prototype.ajaxRefreshCleanAll=function(a,b){window.scrollTo(0,0);this.ajaxRequestAbortCurrent();return this.ajaxRequest(!0,a,b)};d.prototype.ajaxLoadMore=d.prototype.ajaxRequestAbortCurrent=function(){if(this.requestPromise){this.requestAborted=!0;this.requestPromise.jqXHR.abort();var a=new Date;this.ajaxLastDateStart&&
(a.getTime(),this.ajaxLastDateStart.getTime());return!0}return!1};d.prototype.footerLoaderShow=function(a){this.jFooterDomCurrent=this.jFooterDom.appendTo(this.jDomId);0==this.lastModelId?this.jFooterDomCurrent.addClass("list-empty"):this.jFooterDomCurrent.removeClass("list-empty");a?this.jFooterDomCurrent.css({position:"absolute",top:a.position().top,left:a.position().left+a.width()/2-10}):this.jFooterDomCurrent.css("position","static");a=$(".loader",this.jFooterDomCurrent);for(var b=a.find("img"),
c=0;c<b.length;c++){var g=b[0],f=g.getAttribute("data-src");f&&(g.setAttribute("src",f),g.removeAttribute("data-src"))}a.show()};d.prototype.footerLoaderHide=function(a){this.jFooterDomCurrent&&(a&&this.config.footerEnabled?$(".loader",this.jFooterDomCurrent).hide():this.jFooterDomCurrent.remove())};d.prototype.ajaxRequest=function(a,b,c){if(0<this.ajaxLock){if(this.requestPromise)return this.requestPromise;throw Error("10070: lock fail");}this.ajaxLock=1;a&&(this.loadMoreQueryData=null,this.scrollTopLastPosition=
this.paginationOffset=0);var g={from:this.paginationOffset,length:this.paginationNbItem},f=!0;c&&(f=c.statEnabled);"performerIdListAsStr"in this.currentFilterInfo&&delete this.currentFilterInfo.performerIdListAsStr;this.currentFilterInfo.recent&&ToolBrowser.isStorageSupportMinSizeSession()&&(c=ToolStorage.performerRecentGetList(),c.length&&(c.reverse(),this.currentFilterInfo.performerIdListAsStr=c.join(",")));if("online"in Application&&"performerList"in Application.online&&Application.online.performerList){if(this.requestPromise=
$.Deferred(),this.requestPromise.jqXHR={abort:function(){}},this.requestPromise.resolve(Application.online.performerList),delete Application.online.performerList,!ToolApp.eventLoadPageFired)ToolApp.event.on(16,function(){e.performerStatDownloaded||0!==e.ajaxLock||e.ajaxRequest(!1,"fetch-stat-on-load")})}else this.requestPromise=3==this.config.pageId||4==this.config.pageId?r.mediaList(this.config.pageId,this.currentFilterInfo,g,this.loadMoreQueryData,b,!this.performerStatDownloaded&&f):r.onlineList(this.currentFilterInfo,
g,this.loadMoreQueryData,b,!this.performerStatDownloaded&&f),"btn-more"===b?(b=$(".pagination-online-load-more"),b.length&&b.hasClass("isRaised")?this.footerLoaderShow(b):this.footerLoaderShow()):this.footerLoaderShow();var e=this;this.ajaxLastDate||this.setupEventAfterFirstAjaxRequest();this.ajaxLastDate=this.ajaxLastDateStart=new Date;this.requestAborted=!1;this.fire(h.EVENT_LIST_LOAD_START);this.requestPromise.done(function(b){e.imageSoloToken=b.imageSoloToken;e.ajaxOrUiLastDate=new Date;var c,
g=!0;if(null!==b.performerList&&void 0!==b.performerList){if(e.config.performerCanBeHidden&&StreamPlayerLogic.isReady()&&(c=StreamPlayerXCl.roomStateGetList())&&c.length&&b.performerList.length){for(var d=[],t=0;t<b.performerList.length;t++){var l=b.performerList[t];l&&"id"in l&&l.id&&!(0<=c.indexOf(l.id))&&d.push(l)}b.performerList=d}a?(c=e.renderListClear(b.performerList),b.performerList.length)?b.moreItemAvailable||(e.fire(h.EVENT_LIST_END,b),g=!1):(e.currentFilterInfo.performerIdListAsStr&&e.currentFilterInfo.performerIdListAsStr.length?
e.fire(h.EVENT_RECENT_LIST_MAYBE_EMPTY):e.fire(h.EVENT_LIST_EMPTY,b),g=!1):(c=e.renderListAppend(b.performerList),b.moreItemAvailable&&c||(e.fire(h.EVENT_LIST_END,b),g=!1));e.renderPostOperation(a,c,b.moreItemAvailable);e.loadMoreQueryData=b.nextQuery;e.paginationOffset+=b.performerList.length;if(e.firstLoadDone&&a&&e.isVisibleState&&null!==b.filterUrl&&void 0!==b.filterUrl&&b.filterUrl!==e.filterUrl){e.filterUrl=b.filterUrl;Application.online.document.uri=e.filterUrl;0>Application.online.document.uri.indexOf("?")&&
window.location.search&&(Application.online.document.uri+=window.location.search);if("document"in b&&b.document&&("title"in b.document&&b.document.title&&(Application.online.document.title=b.document.title),"seo"in b.document&&b.document.seo)){if(d=document.getElementById("wl-text-header"))d.innerHTML=b.document.seo.pageTopHtml?b.document.seo.pageTopHtml:"";if(d=document.getElementById("wl-text-footer"))d.innerHTML=b.document.seo.pageBottomHtml?b.document.seo.pageBottomHtml:""}e.urlHistoryUpdate(3);
ToolBrowser.isMobileiOS()&&ToolApp.urlCanonicalRemove();ToolApp.trackingPageChanged()}e.firstLoadDone||(f&&(e.firstLoadDone=!0,window.setTimeout(function(){if(ToolApp.hammerIsLoaded("onlineListFirst"))e.setupSwipe(),e.displayHelpSwipePreview();else ToolApp.event.on(14,},200)),e.fire(h.EVENT_LIST_FIRST_LOAD))}e.footerLoaderHide(!a&&!c);"user"in b&&b.user&&ToolApp.userInfoUpdateUi(b.user);"performerStat"in b&&b.performerStat&&e.menuFilter?(e.performerStatDownloaded=
!0,e.menuFilter.filterStatUpdateProcess(b.performerStat)):!e.performerStatDownloaded&&ToolApp.eventLoadPageFired&&setTimeout(50);e.fire(h.EVENT_LIST_LOAD_END,{morePerformerAvailable:g});e.moreItemAvailable=g}).fail(function(a){e.footerLoaderHide(!1);e.isDatabasePerformerEmpty()&&!e.requestAborted&&e.isVisibleState&&Layer.openErrorAjax(a)}).always(function(){e.ajaxLock=0;e.requestPromise=void 0;e.ajaxLastDate=new Date;e.ajaxLastDateStart=void 0});
return this.requestPromise};d.prototype.onFilterChanged=function(a,b){void 0===b&&(b=!1);if(!a&&(a=this.menuFilter,!a))return;this.currentFilterInfo=a.getFilterAndSortData();this.filterMobile&&this.filterMobile.isOpen()&&this.filterMobile.resize();if(!b)return this.refreshTotalRequestSinceLastUiInteraction=0,this.ajaxRefreshCleanAll("filter-chg")};d.prototype.factorySpImageOnly=function(){if("SpImageOnly"in window){var a={visiblePage:!0,multipleImg:!0,serverId:this.config.serverId,maxExecTimeSeconds:180,
mustSeeSoftContentOnlyBecauseOfAgeVerification:ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification?1:0,maxFps:SpImageOnly.FPS_MAX,backupAutoOnStart:!0};ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&(a.maxFps=4);a=new SpImageOnly(a);var b=this;a.on("error",;a.on("firstFrame",function(a,g){var c=$(a.getDomElement()).parent();if(ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification){var e=a.getDomElement();$(e).addClass("hard-censored");
c.find(".avs-model-disclaimer").remove();e=$("#avs-model-disclaimer-template").clone().children();c.append(e);c.removeClass("private")}b.modelStateRemove(c);e=(e=c.attr("data-mid"))?parseInt(e,10):0;g.showState==SpImageOnly.SHOW_STATE_PRIVATE?(b.modelStateSetPrivate(c),0<e&&e in b.performerDatabaseById&&(b.performerDatabaseById[e].showType=2)):0<e&&e in b.performerDatabaseById&&(b.performerDatabaseById[e].showType=1)});return a}};d.displayLayerRegisterSuggestion=function(a){void 0===a&&(a=1);(new Layer.RegisterSuggestion).open({cancelButton:!0,
messageIdToUse:a,backToOnlineListButton:!1})};d.prototype.isVisitorRequiredToSignupBeforeEnteringChat=d.prototype.setupEventAfterFirstAjaxRequest=function(){var a=this;window.setInterval(function(){a.ajaxCheckIfNeedToCleanAllAndDo()},2500);this.jDomId.unbind("click").bind("click",function(b){if(b.target){if(!Application.user.isAuth&&a.isVisitorRequiredToSignupBeforeEnteringChat())return d.displayLayerRegisterSuggestion(),!1;var c=$(b.target),
f=c.closest(".modelDisplay"),e=c.closest(".modelContainer"),t=e.hasClass("advertisingContainer");if(0<f.length){var k=parseInt(f.attr("data-mid"),10);if(0<k)if(b.preventDefault(),b.stopPropagation(),c.hasClass("modelPreview"))a.onClickModelPreviewStart(k,f);else if(c.hasClass("js-action-favorite-remove"))a.onClickModelRemoveFavorite(k,f);else if(c.hasClass("js-action-favorite-toggle"))a.onClickModelFavoriteToggle(k,f);else if(c.hasClass("js-action-love-add"))a.onClickModelLove(k,f);else{if(!c.hasClass("love-counter")){if(3===
a.config.pageId){b=parseInt(f.attr("data-vid"),10);if(0<b)a.onClickMedia(k,b,e);return!1}if(4===a.config.pageId){b=parseInt(f.attr("data-pid"),10);if(0<b)a.onClickMedia(k,b,e);return!1}a.onClickModel(k)}}else if(t&&(e=f.attr("href"))&&"#"!==e){b.preventDefault();if(k=f.data("adid"))if(k=parseInt(k,10),0<k&&(b=a.advertisingFindById(k))){ToolApp.trackingClick("onlineAds","XA"+k.toString(10));if(3===b.linkId&&Application.Config.wl.signUpSignIsAsLayer){ToolRegister.layerOpen();return}e=atob(b.link);ToolBrowser.redirectToUrl(e);
return}ToolBrowser.redirectToUrl(e);return}}return!1}});0!==this.config.liveCamOnHoverEnabled&&1==this.config.pageId&&(this.jDomId.on("mouseenter",".modelDisplay",function(b){b=$(this);var c=parseInt(b.attr("data-mid"),10);if(0<c)a.onClickModelPreviewStart(c,b)}),this.jDomId.on("mouseleave",".modelDisplay",function(b){b=$(this);b=parseInt(b.attr("data-mid"),10);if(0<b)a.onClickModelPreviewStop(b)}));var b=Application.Config.isUserConnected;"IntersectionObserver"in window&&b&&(this.intersectionObserver=
new IntersectionObserver(function(b){b.forEach(function(b){b.isIntersecting&&(a.intersectionObserver.unobserve(b.target),b=b.target,b.dataset&&b.dataset.src&&(b.src=b.dataset.src),b.classList.remove("lazy"))})},{rootMargin:"150px 0px",threshold:0}));$("#btnScrollUp").bind("click",function(a){$("#btnScrollUp").fadeOut();$("html, body").animate({scrollTop:0},300)})};d.prototype.setupEvent=function(){var a=this;this.jFooterDom=$(".online-list-footer",this.jDomId).detach();var b=function(b){var c=Widget.BannerAvs.getInstanceExisting();
c&&c.close();a.avsBannerClosed=!0;a.config.liveCamOnHoverEnabled=1;ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification=!1;c=a.spImageOnlyStream;a.spImageOnlyStream=a.factorySpImageOnly();c&&a.imageSoloDestroyProperly(c);b&&(a.ajaxRequestAbortCurrent(),a.ajaxRefreshCleanAll("avsCompleted",{statEnabled:!1}))};if(ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification)ToolApp.event.on(215,function(){b(!0)});else 2===this.config.liveCamOnHoverEnabled&&b(!1);3!==this.config.pageId&&
4!==this.config.pageId&&window.setInterval(function(){a.ajaxCheckIfNeedToCleanAllAndDo()},2500)};d.prototype.initBackToVrButton=function(){if(ToolBrowser.isVirtualRealitySupported()||this.config.isVirtualRealitySupported)$(".back-to-vr-button").removeClass("isHidden"),$(".back-to-vr-button-divider").removeClass("isHidden")};d.prototype.setupSwipe=function(){var a=this;if(ToolApp.hammerIsLoaded("onlineList")){var b=document.getElementById("mod-online-list");b&&(b=new Hammer(b),b.get("swipe").set({threshold:3}),
b.on("swipe",function(b){b=$(b.target).closest(".modelDisplay");if(0<b.length){var c=parseInt(b.attr("data-mid"),10);if(0<c)a.onClickModelPreviewStart(c,b)}}))}};d.prototype.paginationTypeSet=d.prototype.ajaxCheckIfNeedToCleanAllAndDo=function(){!this.isVisibleState||ToolBrowser.isPageHidden()||3===this.config.pageId||4===this.config.pageId||!this.ajaxOrUiLastDate||45E3>(new Date).getTime()-this.ajaxOrUiLastDate.getTime()||Layer.isOneVisible()||(this.refreshTotalRequestSinceLastUiInteraction++,
this.ajaxOrUiLastDate=new Date,this.ajaxRequestAbortCurrent(),this.ajaxRefreshCleanAll("timer"))};d.prototype.liveCamAsProfileIsEnabled=function(){return this.displayLiveCam};d.prototype.liveCamAsProfileSetState=function(a){this.displayLiveCam!=a&&(this.spImageOnlyStream&&(this.spImageOnlyStream.stop(),this.displayLiveCam||this.modelPreviewBackupRestore(this.spImageOnlyStream)),this.displayLiveCam=a,this.ajaxRefreshCleanAll("livecam-"+(a?1:0)))};d.prototype.lazyImageProcess=function(a){a.dataset&&
a.dataset.src&&(a.src=a.dataset.src);a.classList.remove("lazy")};d.prototype.onClickModelRemoveFavorite=function(a,b){var c=this;if(!ToolApp.redirectToLoginIfNotConnected()){var g=0;if(!(0<g)){g=1;var f=a.toString();var e=f in this.performerDatabaseById?this.performerDatabaseById[f].nickname:b.find(".modelPseudo .nickname").text();f=ToolPerformer.Ajax.favoriteRemove(a);var d=b.find(".remove-favorite-icon");f.done(function(){var a=new Layer.InfoNoTitle;a.open(Translation.tr("infoPerformerFavoriteRemoved",
{"#NICK#":e}));setTimeout(function(){a.close()},3E3);d.remove();c.refreshListOnClose=!0}).fail(function(a){d.show();Layer.openErrorAjax(a)}).always(function(){g=0});d.hide();this.ajaxOrUiLastDate=new Date;this.refreshTotalRequestSinceLastUiInteraction=0}}};d.prototype.onClickModelLove=function(a,b){ToolStorage.performerLovedAppend(a);ToolPerformer.Ajax.loveAdd(a);var c=b.find(".love-counter");c.removeClass("js-action-love-add");var g=1,f=a.toString();f in this.performerDatabaseById?(f=this.performerDatabaseById[f],
"love"in f?(f.love?f.love++:f.love=1,g=f.love):f.love=1,f=Translation.tr("infoLoveAdded",{"#pseudo#":f.nickname}),c.attr("title",f)):c.removeAttr("title");c.html(q(g,!0))};d.prototype.onClickModelFavoriteToggle=function(a,b){var c=this;if(!(ToolApp.redirectToLoginIfNotConnected()||0<l)){l=1;var g=!1,f=a.toString(),e=b.find(".js-action-favorite-toggle"),d=b.find(".performer-in-favorite"),k=b.find(".modelPseudo");if(f in this.performerDatabaseById){var h=this.performerDatabaseById[f];g="favorite"in
h&&h.favorite?!1:!0;e.removeClass("iconxl-add-favorite-w");e.removeClass("iconxl-remove-favorite-w")}else if(e.hasClass("iconxl-add-favorite-w"))e.removeClass("iconxl-add-favorite-w"),g=!0;else if(e.hasClass("iconxl-remove-favorite-w"))e.removeClass("iconxl-remove-favorite-w"),g=!1;else return;f=g?ToolPerformer.Ajax.favoriteAdd(a):ToolPerformer.Ajax.favoriteRemove(a);e.addClass("loading");f.done(function(){g?(e.addClass("iconxl-remove-favorite-w"),!d.length&&k.length&&$('<span class="performer-in-favorite iconxl-favorite-gold" />').appendTo(k),
h?e.attr("title",Translation.tr("actionFavoriteRemove",{"#MODEL#":h.nickname})):e.removeAttr("title")):(e.addClass("iconxl-add-favorite-w"),d.length&&d.remove(),h?e.attr("title",Translation.tr("actionFavoriteAdd",{"#MODEL#":h.nickname})):e.removeAttr("title"));h&&(h.favorite=g?1:0);c.refreshListOnClose=!0}).fail(function(a){Layer.openErrorAjax(a)}).always(;this.ajaxOrUiLastDate=new Date;this.refreshTotalRequestSinceLastUiInteraction=0}};d.prototype.onClickModelPreviewStart=
function(a,b){if(this.spImageOnlyStream){var c=!1;"rtmp"in this.spImageOnlyStream&&this.spImageOnlyStream.rtmp&&"modelId"in this.spImageOnlyStream.rtmp&&this.spImageOnlyStream.rtmp.modelId&&(c=this.spImageOnlyStream.rtmp.modelId===a);c||(this.spImageOnlyStream.stop(),this.liveCamAsProfileIsEnabled()||this.modelPreviewBackupRestore(this.spImageOnlyStream))}else if(this.spImageOnlyStream=this.factorySpImageOnly(),!this.spImageOnlyStream)return;var g;a in this.performerDatabaseById&&this.performerDatabaseById.hasOwnProperty(a.toString())&&
(g=this.performerDatabaseById[a]);g&&"flag"in g&&g.flag||(c=b.find("img"),0!==c.length&&(c.hasClass("lazy")&&this.lazyImageProcess(c[0]),this.jDomId.find(".modelDisplay").removeClass("previewEnabled"),b.addClass("previewEnabled"),this.spImageOnlyStream.startDomElement(c[0],{modelId:a,base64:this.imageSoloToken}),this.ajaxOrUiLastDate=new Date,this.refreshTotalRequestSinceLastUiInteraction=0))};d.prototype.onModelPreviewError=function(a,b,c){this.liveCamAsProfileIsEnabled()||this.modelPreviewBackupRestore(a);
a=$(a.getDomElement()).parent();c=(c=a.attr("data-mid"))?parseInt(c,10):0;b==SpImageOnly.ERROR_OFFLINE?(a.addClass("isOffline"),this.modelStateSetOffline(a),0<c&&c in this.performerDatabaseById&&(this.performerDatabaseById[c].showType=3)):b==SpImageOnly.ERROR_NON_FREE&&(a.hasClass("isOffline")&&a.removeClass("isOffline"),this.modelStateSetPrivate(a),0<c&&c in this.performerDatabaseById&&(this.performerDatabaseById[c].showType=2))};d.prototype.modelPreviewBackupRestore=function(a){a.backupRestore();
if(ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification){var b=a.getDomElement();setTimeout(function(){if(a&&a.isRunning){var c=a.getDomElement();if(b==c)return}b&&(b.classList.remove("hard-censored"),(c=b.parentElement)&&c.querySelectorAll(".avs-model-disclaimer").forEach()},100)}};d.prototype.onClickModelPreviewStop=function(a){this.spImageOnlyStream&&(a=this.liveCamAsProfileIsEnabled(),this.spImageOnlyStream.stop(),a||this.modelPreviewBackupRestore(this.spImageOnlyStream),
this.jDomId.find(".modelDisplay").removeClass("previewEnabled"))};d.prototype.onClickMedia=function(a,b,c){ToolUi.isEventToFast(this.pageOpenDate)||b in this.mediaDatabaseById&&this.fire(202,{performerId:a,mediaId:b,mediaInfo:this.mediaDatabaseById[b],divContainer:c})};d.prototype.videoLoaderState=function(a,b){var c=a.divContainer.find(".vodListPlay");b?c.addClass("state-loading"):c.removeClass("state-loading")};d.prototype.onLoveDataChanged=function(a){var b=a.divContainer.find(".vod-love"),c="\ud83e\udd0d";
a.mediaInfo.isLoved&&(b.html("\u2764\ufe0f \ud83e\udde1 \ud83d\udc9b \ud83d\udc9a \ud83d\udc99 \ud83d\udc9c \ud83d\udda4"),c="\u2764\ufe0f");a=a.mediaInfo.love.toString(10)+""+c;b.html(a)};d.prototype.onLoveDataChangedNoEventSource=function(a){if("photoId"in a&&0<a.photoId){var b=$('[data-pid="'+a.photoId+'"]').parent();this.onLoveDataChanged({mediaInfo:a,divContainer:b,mediaId:a.photoId,performerId:a.id})}};d.prototype.onVideoPlayed=function(a,b){a.divContainer.find(".vodListPlay").addClass("state-played");
b&&a.divContainer.find(".iconVip ").addClass("iconVipGift")};d.prototype.imageSoloDestroyProperly=function(a){a.observerClearAll();var b=this.liveCamAsProfileIsEnabled(),c=new Image(320,240),g=a.getLastImageUrl();g||(g="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=");c.src=g;b||this.modelPreviewBackupRestore(a);a.setRenderDom(c);a.stop(!0)};d.prototype.onClickModel=function(a){if(a in this.performerDatabaseById&&!ToolUi.isEventToFast(this.pageOpenDate)&&(a=this.performerDatabaseById[a],
!("flag"in a&&a.flag))){var b=this.spImageOnlyStream;this.spImageOnlyStream=this.factorySpImageOnly();b&&this.imageSoloDestroyProperly(b);SurveyTool.hide();this.fire(h.EVENT_PERFORMER_SELECTION,{modelInfo:a,spImageSoloObj:b});ToolPreference.getItemInt(20)&&ToolBrowserFullscreen.getInstance().enter()}};d.prototype.performerGetSequenceItem=function(a,b){var c=this.itemIdList.indexOf(a);if(0<=c){var g=b?1:-1,f=5,e=!1;this.ajaxOrUiLastDate&&15E3>(new Date).getTime()-this.ajaxOrUiLastDate.getTime()&&(e=
!0);var d=void 0;f>this.itemIdList.length&&(f=this.itemIdList.length);for(;0<f--;){c+=g;this.itemIdList.length===c?c=0:0>c&&(c=this.itemIdList.length-1);var k=this.itemIdList.length-c;b&&3>=k&&!e&&(this.ajaxLoadMore("sequence-swipe"),e=!0);k=this.itemIdList[c];if(k in this.performerDatabaseById){k=this.performerDatabaseById[k];var h=0<("flag"in k&&k.flag?k.flag:0);switch(k.showType){case 1:if(!h)return k;d||(d=k);break;case 2:d?3==d.showType&&(d=k):d=k;break;case 3:d||(d=k)}}}return d}if(!this.isDatabasePerformerEmpty())for(g in f=
0,this.performerDatabaseById)if(this.performerDatabaseById.hasOwnProperty(g)&&(f++,!b||1<f))return this.performerDatabaseById[g]};d.prototype.performerGetNext=function(a){return this.performerGetSequenceItem(a,!0)};d.prototype.performerGetPrevious=d.prototype.resizeOnlineListIcon=function(){if(1===this.config.pageId){var a=ToolPreference.getItemInt(46),b=$("#"+this.domId).find(".modelContainer");5==b.eq(0).find(".itemIcon").length&&(1===a?b.find(".itemIcon:last").addClass("is-hidden"):
b.find(".itemIcon:last").removeClass("is-hidden"))}};d.prototype.renderListToHtml=function(a){var b=[],c=0,g=!1;3===this.config.pageId?$("#"+this.domId).addClass("modelVideo"):4===this.config.pageId?$("#"+this.domId).addClass("modelPhoto"):$("#"+this.domId).addClass("modelOnline");1===ToolPreference.getItemInt(46)&&($("#"+this.domId).addClass("sizeSmall"),g=!0);for(var f=0;f<a.length;f++){if(3===this.config.pageId){var e=a[f];b.push(this.renderModelVideo(e));c++;this.mediaDatabaseById[e.videoId]=
e;this.itemIdList.push(e.videoId)}4===this.config.pageId?(e=a[f],b.push(this.renderModelPhoto(e)),c++,this.mediaDatabaseById[e.photoId]=e,this.itemIdList.push(e.photoId)):(e=a[f],e.id in this.performerDatabaseById?this.performerDatabaseById[e.id]=e:(this.performerDatabaseById[e.id]=e,this.itemIdList.push(e.id),c++,b.push(this.renderModel(e,g))))}return{content:b.join(""),performerQuantityAdded:c}};d.prototype.renderPostOperation=function(a,b,c){this.resizeCell();var g=$("#"+this.domId+" div.modelContainer").last();
this.lastModelId=0;if(g.length){if(this.lastModelElement=g[0],g=$(".modelDisplay",this.lastModelElement).attr("data-mid"))this.lastModelId=parseInt(g,10)}else this.lastModelElement=void 0;if(a||!(1>b)){if(a)this.onClickModelPreviewStop(0);if(c){var f=this;window.setTimeout(110)}}};d.prototype.renderListAppend=function(a){a=this.renderListToHtml(a);this.enhanceAdvertising(a);$("#"+this.domId).append(a.content);this.imageLazyLoadAddNewItem();return a.performerQuantityAdded};
d.prototype.imageLazyLoadAddNewItem=function(){if(this.intersectionObserver)for(var a=document.querySelectorAll("#"+this.domId+" img.lazy"),b=a.length;b--;)this.intersectionObserver.observe(a[b])};d.prototype.renderListClear=function(a){this.performerDatabaseById={};this.mediaDatabaseById={};this.itemIdList=[];a=this.renderListToHtml(a);this.enhanceAdvertising(a,!0);this.intersectionObserver&&this.intersectionObserver.disconnect();$("#"+this.domId).html(a.content);this.imageLazyLoadAddNewItem();"scrollY"in
window&&300<window.scrollY&&window.scrollTo(0,0);return a.performerQuantityAdded};d.prototype.isDatabasePerformerEmpty=function(){if(3==this.config.pageId||4==this.config.pageId)for(var a in this.mediaDatabaseById)if(this.mediaDatabaseById.hasOwnProperty(a))return!1;for(a in this.performerDatabaseById)if(this.performerDatabaseById.hasOwnProperty(a))return!1;return!0};d.prototype.modelStateRemove=d.prototype.modelStateSetPrivate=function(a){this.modelStateSetContent(a,
Translation.tr("labelGenericInPrivate"))};d.prototype.modelStateSetOffline=d.prototype.modelStateSetContent=function(a,b){if(b){var c=a.find(".modelState");c.length?c.text(b):a.append('<div class="modelState">'+b+"</div>")}else this.modelStateRemove(a)};d.prototype.renderModelPhoto=function(a){if(!("nickname"in a))return"";var b=[];b.push('<div class="modelContainer">');var c="";this.currentCellSize&&(c=' style="width: '+this.currentCellSize.width+
"px; height: "+this.currentCellSize.height+'px"');var g=Application.Config.url.root+"/model/"+a.nickname.toLowerCase()+"/";b.push('<a href="'+g+'" data-mid="'+a.id+'" data-pid="'+a.photoId+'" class="modelDisplay"'+c+">");c="";g="vip"in a&&a.vip&&0<a.vip;var f="srcHd"in a&&a.srcHd&&null!==a.srcHd;g&&!f&&(c="thumb-vip",ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&(c+=" hard-censored"));var e=this.intersectionObserver?'class="lazy'+(c?" "+c:"")+'" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src':
(c?'class="'+c+'" ':"")+'loading="lazy" intrinsicsize="320x240" src';var d=f=StringTool.escapeHtml(a.nickname);f='<span class="nickname">'+f+"</span>";a.thumbImgAlt&&(d=a.thumbImgAlt);b.push("<img "+e+'="'+a.srcThumb+'"'+c+' alt="'+d+'"/>');g&&(c="",0<=Application.performerIdVipAccessList.indexOf(a.id)&&(c=" isSubscribed"),b.push('<div class="iconVip vodList'+c+'"></div>'));"love"in a&&a.love&&0<a.love&&(c="\ud83e\udd0d",a.isLoved&&(c="\u2764"),f="<span class='vod-love'>"+a.love+c+"\ufe0f</span>"+
f);b.push('<div class="modelPseudo">'+f+"</div>");this.currentFilterInfo.favorite&&b.push('<div class="remove-favorite-icon js-action-favorite-remove"><span class="button js-action-favorite-remove"><span class="iconxl-remove-favorite-w js-action-favorite-remove"></span></span></div>');b.push("</a>");b.push("</div>");return b.join("")};d.prototype.renderModelVideo=function(a){if(!("nickname"in a))return"";var b=[];b.push('<div class="modelContainer">');var c="";this.currentCellSize&&(c=' style="width: '+
this.currentCellSize.width+"px; height: "+this.currentCellSize.height+'px"');var g=Application.Config.url.root+"/model/"+a.nickname.toLowerCase()+"/";b.push('<a href="'+g+'" data-mid="'+a.id+'" data-vid="'+a.videoId+'" class="modelDisplay"'+c+">");if(this.intersectionObserver){g='src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src';var f="lazy"}else g='loading="lazy" intrinsicsize="320x240" src';c=0<=Application.performerIdVipAccessList.indexOf(a.id);
"vip"in a&&a.vip&&0<a.vip&&!c&&(Application.blurVipVideoThumbnail&&(f=f&&f.length?f+" thumb-vip":"thumb-vip"),ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&(f+=" hard-censored"));var e=c=StringTool.escapeHtml(a.nickname);c='<span class="nickname">'+c+"</span>";a.thumbImgAlt&&(e=a.thumbImgAlt);b.push('<img class="'+f+'" '+g+'="'+a.thumbImg+'" alt="'+e+'"/>');f="";ToolStorage.videoPlayedIs(a.videoId)&&(f=" state-played");"vip"in a&&a.vip&&0<a.vip&&!("isVipGift"in a&&a.isVipGift)&&
0<=Application.performerIdVipAccessList.indexOf(a.id)&&(f+=" isSubscribed");b.push('<div class="vodListPlay'+f+'"></div>');"vip"in a&&a.vip&&0<a.vip&&(f="","isVipGift"in a&&a.isVipGift?f=" iconVipGift":0<=Application.performerIdVipAccessList.indexOf(a.id)&&(f=" isSubscribed"),b.push('<div class="iconVip vodList'+f+'"></div>'));"love"in a&&a.love&&0<a.love&&(f="\ud83e\udd0d",a.isLoved&&(f="\u2764"),c="<span class='vod-love'>"+a.love+f+"\ufe0f</span>"+c);"durationStr"in a&&a.durationStr&&(c+="<span class='vod-duration'>"+
a.durationStr+"</span>");b.push('<div class="modelPseudo">'+c+"</div>");this.currentFilterInfo.favorite&&b.push('<div class="remove-favorite-icon js-action-favorite-remove"><span class="button js-action-favorite-remove"><span class="iconxl-remove-favorite-w js-action-favorite-remove"></span></span></div>');b.push("</a>");b.push("</div>");return b.join("")};d.prototype.renderModel=function(a,b){void 0===b&&(b=!1);if(!("nickname"in a&&"showType"in a))return"";var c="flag"in a?a.flag:0,g=[];g.push('<div class="modelContainer">');
var f="";this.currentCellSize&&(f=' style="width: '+this.currentCellSize.width+"px; height: "+this.currentCellSize.height+'px"');var e=Application.Config.url.root+"/model/"+a.nickname.toLowerCase()+"/",d="modelDisplay";3===a.showType&&(d+=" isOffline");g.push('<a href="'+e+'" data-mid="'+a.id+'" class="'+d+'"'+f+">");e=this.liveCamAsProfileIsEnabled();d=this.intersectionObserver?'class="lazy" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src':'loading="lazy" intrinsicsize="320x240" src';
var k=f=StringTool.escapeHtml(a.nickname);a.profileImgAlt&&(k=a.profileImgAlt);e&&1===a.showType&&0===c?g.push("<img "+d+'="'+a.liveImg+'" alt="'+k+'"/>'):g.push("<img "+d+'="'+a.profileImg+'" alt="'+k+'"/>');e=a.showType;var h="";d="";if(!ToolBrowser.isMobile()){h=0;"love"in a&&a.love&&(h=a.love);d="iconxl-add-favorite-w";k=void 0;"favorite"in a&&a.favorite?(d="iconxl-remove-favorite-w",k=Translation.tr("actionFavoriteRemove",{"#MODEL#":a.nickname})):k=Translation.tr("actionFavoriteAdd",{"#MODEL#":a.nickname});
var l=void 0;if(3===e)h='<span class="love-counter">&nbsp;</span>';else{var n=ToolStorage.performerIsLoved(a.id),v="";n?(l=Translation.tr("infoLoveAdded",{"#pseudo#":a.nickname}),h++):(v=" js-action-love-add",l=Translation.tr("titleLoveAdd",{"#pseudo#":a.nickname}));h='<span class="love-counter'+v+'" title="'+l+'">'+q(h,n)+"</span>"}d='<span class="action-favorite-switch js-action-favorite-toggle '+d+'" title="'+k+'"></span>';"favorite"in a&&a.favorite&&(d+='<span class="performer-in-favorite iconxl-favorite-gold"></span>')}g.push('<div class="modelPseudo vFlex">'+
h+"<span class='nickname'>"+f+"</span>"+d+"</div>");c&&1===e&&(e=2);switch(e){case 2:g.push('<div class="modelState">'+Translation.tr("labelGenericInPrivate")+"</div>");break;case 3:g.push('<div class="modelState">Offline</div>');break;case 1:1===this.config.liveCamOnHoverEnabled&&ToolBrowser.isMobile()&&g.push('<div class="modelPreview"></div>')}var m,p,r,w;if(this.currentFilterInfo.favorite&&ToolBrowser.isMobile())g.push('<div class="remove-favorite-icon js-action-favorite-remove">   <span class="button js-action-favorite-remove">       <span class="iconxl-remove-favorite-w js-action-favorite-remove"></span>   </span></div>');
else if("eventId"in a&&a.eventId&&a.eventId==this.config.event.id)if(this.config.event.svgIcon){c=ToolApp.imageIconSvgGetUrl()+"#"+this.config.event.svgIcon;var u='<div class="itemIcon iconSvg-'+this.config.event.icon+'">'+('<svg><use xlink:href="'+c+'" href="'+c+'"></use></svg>')+"</div>"}else"lollipop"===this.config.event.icon||"toplessHalloween"===this.config.event.icon||"toplessValentineDay"===this.config.event.icon||"toplessCarnival"===this.config.event.icon||"toplessXmas"===this.config.event.icon?
(c=this.config.event.icon,"toplessValentineDay"===this.config.event.icon&&(c="toplessValentineDay"),u='<div class="itemIcon iconPng-'+c+'"></div>'):u='<div class="itemText">'+StringTool.escapeHtml(this.config.event.title)+"</div>";a.isNew&&(m='<div class="itemIcon iconPng-new"></div>');a.liveG4b&&a.liveG4b.length&&(p='<div class="itemIcon iconPng-vr"></div>');a.toyConnected&&(r='<div class="itemIcon iconPng-sexToy"></div>');a.justChatting&&(w='<div class="itemIcon iconPng-justChatting"></div>');m=
[u,m,p,r,w].filter(;(b||ToolBrowser.isMobile())&&5==m.length?(p=m[m.length-1])&&(m[m.length-1]=p.replace("itemIcon","itemIcon is-hidden")):m.map(;m=m.join("\n");m.length&&(m='<div class="containerIconWrapper'+(this.currentFilterInfo.favorite&&ToolBrowser.isMobile()?" pageFavoriteMobile":"")+'">'+m+"</div>",g.push(m));g.push("</a>");g.push("</div>");return g.join("")};d.prototype.resizeCell=function(a){void 0===a&&(a=!1);
var b=Math.floor(this.jDomId[0].getBoundingClientRect().width);if(a||b!==this.resizeLastContainerWidth){this.resizeLastContainerWidth=b;0>=b&&(b=ToolBrowser.viewPortSize().width);var c=this.imageResolution.width;a=481>b?2:700>b?3:1280>b?4:ToolBrowser.isMobile()?Math.floor(b/c):Math.ceil(b/c);if(992<b)switch(ToolPreference.getItemInt(46)){case 1:a*=2;this.jDomId.addClass("sizeSmall");a=Math.round(.8*a);break;case 3:this.jDomId.removeClass("sizeSmall"),a=Math.round(.78*a)}var d=c+Math.floor((b-a*c)/
a);c=Math.round(d/c*this.imageResolution.height);var f=Math.max(document.documentElement.clientHeight,window.innerHeight||0);100<f&&(f=a*Math.floor(f/c),35<f?(this.paginationNbItem=f,100<this.paginationNbItem&&(this.paginationNbItem=100,2===this.config.paginationType&&(this.paginationNbItem+=40))):this.paginationNbItem=2===this.config.paginationType?70:35);this.currentCellSize={width:d,height:c};this.menuFilter&&this.menuFilter.cellSizeSet(this.currentCellSize,a,b);$(".modelDisplay").css({width:d+
"px",height:c+"px"})}};d.prototype.resizeLoadMoreButton=function(){var a=$(".pagination-online-load-more");if(ToolBrowser.isMobile())a.removeClass("isRaised"),a.css({top:0,left:0});else if(ToolMenu.online&&ToolMenu.online.alwaysVisible){var b=$("#online-list-menu-inline");if(a.length&&a.is(":visible")){var c=this.getPerformerContainerGeometryLast();c=Math.round(c.top+c.height);var d=b.width();b=b.height();c>b?a.removeClass("isRaised").css({top:0,left:"50%"}):a.addClass("isRaised").css({top:c+"px",
left:"calc(50% + ".concat(d/2,"px)")})}}};d.prototype.getPerformerContainerGeometryLast=function(){var a=this.jDomId.find(".modelContainer"),b={top:0,height:this.currentCellSize.height};a.length&&(a=a.last(),b.top=a.position().top);return b};d.prototype.openBefore=function(){this.refreshTotalRequestSinceLastUiInteraction=0;ToolApp.RedirectToCreditPage.timerReset()};d.prototype.prepare=function(a){void 0===a&&(a=!1);if(this.isDatabasePerformerEmpty())this.onFilterChanged(void 0,a)};d.prototype.openAfter=
function(a){this.isVisibleState=!0;this.urlHistoryUpdate(a);2===a&&ToolBrowser.isMobileiOS()&&ToolApp.urlCanonicalRemove();2===a&&ToolApp.trackingPageChanged();this.prepare();this.pageOpenDate=new Date;this.resize();if(0<this.scrollTopLastPosition){$(window).scrollTop(this.scrollTopLastPosition);var b=this.scrollTopLastPosition;window.setTimeout(1)}ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&!this.avsBannerClosed&&Widget.BannerAvs.getInstance().open()};
d.prototype.urlHistoryUpdate=function(a){ToolBrowser.isStorageSupportMinSizeSession()&&ToolStorage.pageInfoSetLastSeen({uri:Application.online.document.uri});ToolBrowser.History.update(a,{page:h.HISTORY_PAGE_ID},Application.online.document.title,Application.online.document.uri)};d.prototype.canHandleHistoryPop=d.prototype.closeBefore=d.prototype.close=function(){this.isVisibleState=!1;this.onClickModelPreviewStop(0);
this.refreshListOnClose&&this.ajaxRefreshCleanAll("on-close");var a=Widget.BannerAvs.getInstanceExisting();a&&a.close()};d.prototype.resize=function(a){this.resizeCell();a&&1===a&&this.resizeLoadMoreButton();this.ajaxLoadMoreIfNeed("resize")};d.prototype.orientationChanged=function(){};d.prototype.performerStateChanged=function(a){var b=$("#"+this.domId+" div[data-mid="+a.performerId+"]");switch(a.state){case 1:var c=3;b.length&&this.modelStateSetOffline(b);break;case 3:c=2;b.length&&this.modelStateSetPrivate(b);
break;case 2:c=1,b.length&&this.modelStateRemove(b)}c&&a.performerId in this.performerDatabaseById&&(this.performerDatabaseById[a.performerId].showType=c)};d.prototype.hasBeenInitialized=function(){return this.firstLoadDone};d.prototype.preloadIfRequired=function(){this.ajaxOrUiLastDate?15E3>(new Date).getTime()-this.ajaxOrUiLastDate.getTime()||(this.ajaxOrUiLastDate=new Date,this.ajaxRequestAbortCurrent(),this.ajaxRefreshCleanAll("preload2",{statEnabled:!1})):(this.ajaxOrUiLastDate=new Date,this.prepare(!0),
this.ajaxRequestAbortCurrent(),this.ajaxRefreshCleanAll("preload1",{statEnabled:!1}))};d.prototype.preloadRequired=function(){this.ajaxOrUiLastDate=new Date;this.ajaxRequestAbortCurrent();this.ajaxRefreshCleanAll("preload3",{statEnabled:!1})};d.prototype.displayBtnScrollUp=function(a){var b=$("#btnScrollUp");a&&b.is(":hidden")&&b.fadeIn();!a&&b.is(":visible")&&b.fadeOut()};d.prototype.ajaxLoadMoreIfNeed=function(a){if(this.isVisibleState&&1===this.config.paginationType&&(this.moreItemAvailable||4!==
this.config.pageId&&3!==this.config.pageId)){if(this.ajaxLastDate){var b=(new Date).getTime()-this.ajaxLastDate.getTime(),c=100;this.scrollModelId==this.lastModelId&&3!==this.config.pageId&&4!==this.config.pageId&&(c=5E3);if(b<c)return}b=ToolBrowser.viewPortSize();b=ToolBrowser.isMobile()?2*b.height:b.height;ToolBrowser.isElementInViewportOrAbove(this.lastModelElement,b)&&(this.scrollModelId=this.lastModelId,this.ajaxLoadMore(a+"-eol"))}};d.prototype.scroll=function(){var a=1E3<$(window).scrollTop()?
!0:!1;this.displayBtnScrollUp(a);1===this.config.paginationType&&this.ajaxLoadMoreIfNeed("scroll")};d.prototype.displayHelpSwipePreview=function(){var a=$(".help-swipePreview"),b=this;if(a.length)if(ToolBrowser.isMobile()){var c=a.attr("data-src");if(c){var d=a[0],f=document.createElement("img");f.onload=function(){a.prependTo($(".modelContainer").first());a.unbind("click").bind("click",function(){b.actionRemoveHelpSwipePreview(a)});window.setTimeout(function(){b.actionRemoveHelpSwipePreview(a)},
4E3)};f.setAttribute("src",c);d.childNodes[0].insertBefore(f,d.childNodes[0].firstChild)}}else a.remove()};d.prototype.actionRemoveHelpSwipePreview=function(a){a.fadeOut(500,function(){a.remove()})};d.prototype.advertisingEnable=function(){this.adEnabled=!0};d.prototype.advertisingDisable=function(){this.adEnabled=!1};d.prototype.advertisingFindById=function(a){if(this.advertisingData)for(var b=0,c=this.advertisingData;b<c.length;b++){var d=c[b];if(d.id===a)return d}};d.prototype.getRandomAdvertising=
function(){if(this.advertisingData){for(var a=[],b=0,c=this.advertisingData;b<c.length;b++){var d=c[b];0===d.displayCount%d.displayRate&&a.push(d);d.displayCount++}return a[Math.floor(Math.random()*a.length)]}};d.prototype.getAdvertisingElement=function(a){var b=a.fileUrlList,c=document.createElement("div"),d=document.createElement("a"),f=document.createElement("img");"#"!==a.link?(d.href="#id",d.setAttribute("data-adid",a.id.toString(10))):d.href="#";d.classList.add("modelDisplay");this.currentCellSize&&
(d.style.height=this.currentCellSize.height+"px",d.style.width=this.currentCellSize.width+"px");f.src=b[3];a.labelTranslation&&(f.alt=a.labelTranslation);d.appendChild(f);c.appendChild(d);c.classList.add("modelContainer","advertisingContainer");return c};d.prototype.injectAdvertisingElement=function(a,b,c){if(!a.item(c))return a;for(var d=document.createElement("div"),f=0;f<a.length;f++)f===c&&d.appendChild(b),d.appendChild(a[f]);a=d.querySelectorAll("div.modelContainer");d.remove();return a};d.prototype.getViewPortAdvertisingData=
function(){var a=document.documentElement,b=Math.max(a.clientWidth,window.innerWidth||0);a=Math.max(a.clientHeight,window.innerHeight||0);var c=this.imageResolution.width,d=this.imageResolution.height;var f=420>b?2:700>b?3:1280>b?4:Math.floor(b/c);return{nbCellPerLine:f,nbCellInViewport:f*Math.floor(a/Math.round((c+Math.floor((b-f*c)/f))/c*d))}};d.prototype.enhanceAdvertising=function(a,b){void 0===b&&(b=!1);if(!this.adSupport||!this.adEnabled)return a;var c=!1;if(b){c=!0;this.adLastRowGap=0;var d=
Application.online.advertisingList;if(!d)return a;for(var f=0;f<d.length;f++)d[f].displayCount=0;this.advertisingData=d}d=document.createElement("div");d.innerHTML=a.content;d=d.querySelectorAll("div.modelContainer");if(!d||0===d.length)return a;var e=this.getViewPortAdvertisingData();f=e.nbCellPerLine;e=e.nbCellInViewport;for(var h=Math.round(d.length/e),k=Math.floor(e/f),l=Math.floor(d.length/f),n,p=0-this.adLastRowGap,q=0;q<=h;q++){c?(c=Math.floor(.6*(k-1)),Math.floor(c*e)>d.length-1&&(c=Math.ceil((d.length-
1)/e)),n=Math.floor(Math.random()*(c-1)+1),c=!1):(n=p+k+1,this.adLastRowGap=0);var m=n*f;m=Math.floor(Math.random()*(m+f-m)+m);if(m>d.length-1)break;p=n;if(n=this.getRandomAdvertising())n=this.getAdvertisingElement(n),d=this.injectAdvertisingElement(d,n,m)}this.adLastRowGap=l-p;c="";for(f=0;f<d.length;f++)e=d.item(f),c+=e.outerHTML;a.content=c;return a};d.prototype.initWidgetBannerAvs=function(){var a=this,b=Widget.BannerAvs.getInstance();b.on(211,function(a){ToolAvs.startVerification(function(a){a&&
b.close()})});b.on(212,function(b,d){1===d.how&&(a.avsBannerClosed=!0)});b.open()};return d}(Core.Listener);h.OnlineManager=p;var r;(function(h){var d=0;h.mediaList=function(a,b,c,g,f,e){b={config:b,offset:c,origin:"void",stat:e?1:0};g&&(b.data=g);f&&(b.origin=f);if(g=ToolBrowser.featureSupportedGetIfNotAlreadySent())b.featureSupported=g;d++;switch(a){case 4:return Core.Ajax.post("/photo/fetchList/?x-req="+d+"&x-off-s="+c.from,b);case 3:return Core.Ajax.post("/video/fetchList/?x-req="+d+"&x-off-s="+
c.from,b)}return Core.Ajax.post("/err0r/404?mediaList=1")};h.onlineList=function(a,b,c,g,f){a={config:a,offset:b,origin:"void",stat:f?1:0};c&&(a.data=c);g&&(a.origin=g);if(c=ToolBrowser.featureSupportedGetIfNotAlreadySent())a.featureSupported=c;d++;c="";200<d&&(c=ToolBrowser.viewPortSize(),c="&x-vp="+c.width+"x"+c.height+"&x-version="+encodeURIComponent(Application.Config.versionId));return Core.Ajax.post("/performerAction/onlineList/?x-req="+d+"&x-off-s="+b.from+c,a)}})(r=h.Ajax||(h.Ajax={}))})(ModuleOnline||
(ModuleOnline={}));
var ModulePwaInstallBanner;
(function(c){var d=function(){.init=function(b){a.setting=ToolPreference.getInstance();a.pwaConfig=b;a.createPwaInstance()};a.createPwaInstance=function(){if(void 0==window.Pwa||void 0==a.pwaConfig)return!1;a.pwaInstance=new Pwa.Library({defaultDialogAddToHomeScreen:a.pwaConfig.translation.helpCustomerAddToHomescreen,defaultDialogIosTutorial:a.pwaConfig.translation.helpCustomerAddToHomescreenIos,defaultDialogFirefoxTutorial:a.pwaConfig.translation.helpCustomerAddToHomescreenFirefox,defaultDialogOperaTutorial:a.pwaConfig.translation.helpCustomerAddToHomescreenOpera,
defaultDialogClose:"#ICONCLOSE# "+a.pwaConfig.translation.linkClose,defaultDialogDontShow:"#ICONDONTSHOW# "+a.pwaConfig.translation.linkDontShow,onDontShow:function(){a.saveHiddenState()},onBrowserInStandaloneMode:function(){a.saveHiddenState()}});return!0};a.saveLastTsState=function(b){a.setting.setItem(29,b);a.setting.save()};a.saveHiddenState=a.show=function(){void 0!==a.pwaInstance?(a.pwaInstance.showInstallDialog(),a.saveLastTsState(a.pwaConfig.config.internal.pwaCurrentTimestamp)):
a.createPwaInstance()&&a.show()};a.hide=return a}();c.Manager=d})(ModulePwaInstallBanner||(ModulePwaInstallBanner={}));
var __extends=this&&this.__extends||function(){var f=function(d,c){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(b[g]=a[g])};return f(d,c)};return function(d,c){function b(){this.constructor=d}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");f(d,c);d.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)}}(),
ReviewModule;
(function(f){f.EVENT_NO_MORE_ITEM="noMore";var d=function(c){function b(){var a=c.call(this)||this;a.requestPromise=void 0;a.ajaxLock=0;a.state={accurate:1,order:1,next:void 0,nextAvailable:!1};a.noMoreItem=!1;a.performerId=0;a.performerNickname="";return a}__extends(b,c);b.prototype.performerSetInfo=function(a,b){this.performerId=a;this.performerNickname=b};b.prototype.init=function(a){this.jDom=$("#"+a)};b.prototype.stateSet=function(a){this.state=a};b.prototype.loaderShow=function(a){var b='<div class="js-loader layer-loader">\n<img src="'+
Application.Config.url.static1+'/img/loader/124x124.gif" width="48" height="48" alt="xxx" />\n</div>';a?this.jDom.html(b):this.jDom.append(b)};b.prototype.loaderHide=function(){this.jDom.find(".js-loader").remove()};b.prototype.renderList=function(a){for(var b=[];a.length;){var e=a.shift();if(e){var c="";""!=e.answer&&(c='<div class="ratingReply"><div class="ratingReplyTitle"><span class="ratingReplyModelName">'+this.performerNickname+'</span><span class="ratingReplyDate">'+StringTool.escapeHtml(e.answerDateCreated)+
'</span></div><div class="ratingReplyMessage">'+StringTool.escapeHtml(e.answer)+"</div></div> ");e='<div class="review-item"><div class="client">'+StringTool.escapeHtml(e.nickname)+'</div><span class="star16x star'+e.noteX10+' note"></span><span class="date">'+StringTool.escapeHtml(e.dateStr)+'</span><div class="msg">'+StringTool.escapeHtml(e.msg)+"</div>"+c+"</div>";b.push(e)}}return b.join("")};b.prototype.displayEmptyMsg=function(){var a=Translation.tr("infoPerformerNoReview",{MODEL:this.performerNickname});
this.jDom&&this.jDom.html('<p class="no-data-available">'.concat(a,"</p>"))};b.prototype.ajaxRequest=function(){if(this.ajaxLock){if(this.requestPromise)return this.requestPromise;throw Error("10084: lock fail");}this.ajaxLock=1;this.requestPromise=Core.Ajax.post("/performerRoom/getReviewList/",{performerId:this.performerId,config:this.state});var a=this;this.loaderShow(void 0===this.state.next);this.requestPromise.done(function(b){var c=0===b.list.length;if(c||!b.nextAvailable)a.noMoreItem=!0,a.fire(f.EVENT_NO_MORE_ITEM);
var d=a.renderList(b.list);void 0===a.state.next?c?a.displayEmptyMsg():a.jDom.html(d):a.jDom.append(d);a.state.next=b.next}).fail(function(a){Layer.openErrorAjax(a)}).always(function(b){a.ajaxLock=0;a.requestPromise=void 0;a.loaderHide()});return this.requestPromise};b.prototype.reloadConfigChanged=function(a){this.noMoreItem=!1;this.state=a;this.state.next=void 0;this.requestPromise&&(this.requestPromise.jqXHR.abort(),this.ajaxLock=0);return this.ajaxRequest()};b.prototype.loadMore=function(){if(!this.noMoreItem)return this.ajaxRequest()};
return b}(Core.Listener);f.Manager=d})(ReviewModule||(ReviewModule={}));
var ModuleSuggest;
(function(c){var d=function(){.prototype.init=function(){var b=this;$("#"+this.domId+" a").on("click",function(a){a.preventDefault();b.resendConfirmation()});$("#"+this.domId+" img").on("click",function(){b.hide()})};a.prototype.setContent=function(b){$("#"+this.domId+" span").html(b)};a.prototype.hide=a.prototype.resendConfirmation=function(){var b=this;this.ajaxInProgress||(this.ajaxInProgress=!0,this.setContent(Translation.tr("infoGenericRequestLoading")),
ToolApp.Ajax.emailResendConfirmationLink().done(.fail(.always(function(){b.ajaxInProgress=!1}))};return a}();c.EmailResentConfirmationLink=d})(ModuleSuggest||(ModuleSuggest={}));
var __extends=this&&this.__extends||function(){var h=function(k,e){h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,g){e.__proto__=g}||function(e,g){for(var c in g)Object.prototype.hasOwnProperty.call(g,c)&&(e[c]=g[c])};return h(k,e)};return function(k,e){function l(){this.constructor=k}if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");h(k,e);k.prototype=null===e?Object.create(e):(l.prototype=e.prototype,new l)}}(),
TimelineModule;
(function(h){h.EVENT_VIP_SUBSCRIPTION_CLICK="subscriptionVipClick";h.EVENT_VIDEO_CLICK="videoClick";h.EVENT_MEDIA_RATING_CLICK="mediaRatingClick";var k=function(g){function c(){var a=g.call(this)||this;a.noMoreItem=!1;a.ajaxLock=0;a.state={hasMore:!1,offset:0};a.scrollInfiniteEnabled=!1;a.ajaxLastDate=void 0;a.ajaxLastDateStart=void 0;a.requestPromise=void 0;a.lastTimelineElement=void 0;return a}__extends(c,g);c.getInstance=function(){this.instance||(this.instance=new c);return this.instance};c.prototype.initFancybox=
function(){var a=$('[data-fancybox="timeline-photo"]');$(document).off("click.fb-start");a.fancybox({loop:!0,buttons:["close"],hash:!1,clickOutside:"close",arrows:!1,mobile:{clickSlide:"close"},beforeShow:function(a){a.$refs&&a.$refs.container&&a.$refs.container.css("z-index",1004)},afterShow:function(a,c){if(c.opts&&c.opts.$thumb){var b=c.opts.$thumb;b=b.closest("a.thumb");if(b.length&&3!==b.data("mediatype")){var f=b.closest(".timeline-item");b={id:0,photoId:b.data("pid"),srcHd:b.attr("href"),srcThumb:b.find("img").attr("src"),
thumbImgAlt:"",nickname:f.data("performer-nickname"),love:b.data("love"),isLoved:b.data("loved")||!1,vip:b.data("vip")||0};f=MediaRatingModule2.Manager.getInstance();f.mediaType=1;f.register(a,b)}}},beforeClose:baseTpl:'<div class="fancybox-container photo-gallery-skin" role="dialog" tabindex="-1"><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>/<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div></div><div class="fancybox-bg"></div></div>'})};
c.prototype.init=function(a){this.jDom=$(a);this.setupEvent();this.renderPostOperation(0,!1);this.scrollInfiniteEnabled&&this.scroll()};c.prototype.stateSet=function(a){this.state=a};c.prototype.scroll=c.prototype.loadMore=c.prototype.delegateEvent=c.prototype.renderMessage=function(a){var b=a.media,c='\n\t\t\t\t<div class="timeline-item--header'.concat(a.performer.online?
" performerIsOnline":"",'">\n\t\t\t\t\t<div class="header-image">\n\t\t\t\t\t\t<a href="').concat(a.performer.online?a.performer.chatUrl:a.performer.profileUrl,'" target="_blank">\n\t\t\t\t\t\t\t<img src="').concat(a.performer.profilePic,'">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="header-meta">\n\t\t\t\t\t\t<a href="').concat(a.performer.online?a.performer.chatUrl:a.performer.profileUrl,'" target="_blank">\n\t\t\t\t\t\t\t<span class="nickname">').concat(a.performer.nickname,"</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t").concat(a.performer.online?
'<span class="online">Online</span>':"",'\n\t\t\t\t\t\t\n\t\t\t\t\t\t<span class="date">').concat(a.dateISO8601,"</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>"),d=[];if(b.attachmentList&&b.attachmentList.length)for(var f=0,e=b.attachmentList.length;f<e;f++){var g=b.attachmentList[f];g='\n\t\t\t\t\t\t<a href="'.concat(g.regular,'" class="thumb" data-fancybox="timeline-photo" data-mediaType="').concat(3,'">\n\t\t\t\t\t\t\t<img src="').concat(g.thumb,'" loading="lazy">\n\t\t\t\t\t\t</a>');d.push(g)}d='\n\t\t\t\t<div class="timeline-item--body">\n\t\t\t\t\t<div class="section-message">\n\t\t\t\t\t\t<p>'.concat(b.text,
"</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t").concat(d.length?'<div class="attachmentList">'+d.join("\n")+"</div>":"","\n\t\t\t\t</div>\n\t\t\t");return'\n\t\t\t\t<div class="timeline-item" data-item-id="'.concat(b.id,'" data-performer-id="').concat(a.performer.id,'" data-performer-nickname="').concat(a.performer.nickname,'">\n\t\t\t\t\t').concat(c,"\n\t\t\t\t\t").concat(d,"\t\t\n\t\t\t\t</div>")};c.prototype.renderMedia=function(a){var b=a.media,c='<img loading="lazy" src="'.concat(b.content.previewUrl,
'">'),d=null;1==b.type?(d='<a class="thumb" href="'.concat(b.content.url,'" data-fancybox="timeline-photo" \n\t\t\t\tdata-pid="').concat(b.id,'" data-mediaType="1" data-love="').concat(b.content.loveCount,'"'),b.content.isLoved&&(d+=' data-loved="1"'),d+=">".concat(c,"</a>"),b.isVip&&!a.client.isVipSubscribed&&(d='<a href="#" data-action="'.concat(1==a.performer.vipAccess?"vip-subscription":"vip-access",'" \n\t\t\t\t\tdata-price-vip="').concat(a.performer.priceVip,'" \n\t\t\t\t\tdata-video-nb-free="').concat(a.performer.videoCount.free,
'" \n\t\t\t\t\tdata-video-nb-vip="').concat(a.performer.videoCount.vip,'" \n\t\t\t\t\tdata-video-nb-second="').concat(a.performer.videoTotalSecond,'" \n\t\t\t\t\tdata-video-nb-minute="').concat(a.performer.videoTotalMinute,'" \n\t\t\t\t\tdata-photo-nb-vip="').concat(a.performer.photoNbVip,'">').concat(c,"</a>"))):2==b.type&&(d='<a href="#" class="thumb" data-vid="'.concat(a.media.id,'" data-action="play-video" data-mediaType="2" data-love="').concat(b.content.loveCount,'"'),b.content.isLoved&&(d+=
' data-loved="1"'),b.isVip&&a.client.isVipSubscribed&&(d+=' data-client-vip="1" data-vip="1"',b.isVipGift&&(d+=' data-gift="1"')),d+=">#itemCover#</a>",b.isVip&&!a.client.isVipSubscribed&&(d='<a href="#" class="thumb" data-action="play-video" data-vid="'.concat(b.id,'" data-mediaType="').concat(2,'" data-love="').concat(b.content.loveCount,'" data-vip="1" \n\t\t\t\t\tdata-price-vip="').concat(a.performer.priceVip,'" \n\t\t\t\t\tdata-video-nb-free="').concat(a.performer.videoCount.free,'" \n\t\t\t\t\tdata-video-nb-vip="').concat(a.performer.videoCount.vip,
'" \n\t\t\t\t\tdata-video-nb-second="').concat(a.performer.videoTotalSecond,'" \n\t\t\t\t\tdata-video-nb-minute="').concat(a.performer.videoTotalMinute,'" \n\t\t\t\t\tdata-photo-nb-vip="').concat(a.performer.photoNbVip,'"'),b.isVipGift&&(d+=' data-gift="1"'),d+=">#itemCover#</a>"),c="".concat(c,' <div class="vodPlay"></div>'),d=d.replace("#itemCover#",c),d="\n\t\t\t\t\t".concat(d,'\n\t\t\t\t\t\n\t\t\t\t\t<div class="videoFooter">\n\t\t\t\t\t\t<div class="play"><i class="fi-play"></i></div>\n\t\t\t\t\t\t<div class="duration">').concat(b.content.duration,
"</div>\n\t\t\t\t\t</div>"));c='\n\t\t\t\t<div class="timeline-item--header'.concat(a.performer.online?" performerIsOnline":"",'">\n\t\t\t\t\t<div class="header-image">\n\t\t\t\t\t\t<a href="').concat(a.performer.online?a.performer.chatUrl:a.performer.profileUrl,'" target="_blank">\n\t\t\t\t\t\t\t<img src="').concat(a.performer.profilePic,'">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="header-meta">\n\t\t\t\t\t\t<a href="').concat(a.performer.online?a.performer.chatUrl:a.performer.profileUrl,
'" target="_blank">\n\t\t\t\t\t\t\t<span class="nickname">').concat(a.performer.nickname,"</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t").concat(a.performer.online?'<span class="online">Online</span>':"",'\n\t\t\t\t\t\t\n\t\t\t\t\t\t<span class="date">').concat(a.dateISO8601,"</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>");var f=d;b.isVip&&(a.client.isVipSubscribed||(f='\n\t\t\t\t\t\t<div class="thumb-vip'.concat(2===b.type&&b.isVipGift?" thumb-vip-gift":"",'">\n\t\t\t\t\t\t\t').concat(d,"\n\t\t\t\t\t\t</div>")),
b.isVipGift||(f+='\n\t\t\t\t\t\t<div class="vip-icon">\n\t\t\t\t\t\t\t<img src="'.concat(Application.Config.url.static1,'/img/icon/logo_vip.png">\n\t\t\t\t\t\t</div>')));d='\n\t\t\t\t<div class="timeline-item--media">\n\t\t\t\t\t'.concat(f,"\t\t\t\t\t\n\t\t\t\t</div>");f="";b.isVip&&!a.client.isVipSubscribed&&(f="<strong>".concat(Translation.tr("infoModelNameVipSubscriptionExplain",{"#MODELNAME#":a.performer.nickname}),"</strong>"),f='\n\t\t\t\t\t<div class="section-vip-subscription">\n\t\t\t\t\t\t<span class="title">'.concat(Translation.tr("titleCustomerVipSubscription"),
'</span>\n\t\t\t\t\t\t<span class="sub-title">\n\t\t\t\t\t\t\t').concat(f,": ").concat(a.performer.priceVip,'\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<a class="button button-cta" data-action="').concat(1==a.performer.vipAccess?"vip-subscription":"vip-access",'" \n\t\t\t\t\t\tdata-price-vip="').concat(a.performer.priceVip,'" \n\t\t\t\t\t\tdata-video-nb-free="').concat(a.performer.videoCount.free,'" \n\t\t\t\t\t\tdata-video-nb-vip="').concat(a.performer.videoCount.vip,'" \n\t\t\t\t\t\tdata-video-nb-second="').concat(a.performer.videoTotalSecond,
'" \n\t\t\t\t\t\tdata-video-nb-minute="').concat(a.performer.videoTotalMinute,'" \n\t\t\t\t\t\tdata-photo-nb-vip="').concat(a.performer.photoNbVip,'">').concat(Translation.tr("titleButtonCustomerVipSubscription"),"</a>\n\t\t\t\t\t</div>"));var e="rate-media";b.isVip&&!a.client.isVipSubscribed&&(e=1==a.performer.vipAccess?"vip-subscription":"vip-access");b='\n\t\t\t\t<div class="timeline-item--body">\n\t\t\t\t\t<div class="section-actions">\n\t\t\t\t\t\t<div class="action-rate-media">\n\t\t\t\t\t\t\t<div class="media-rating-inner'.concat(b.content.isLoved?
" media-rated":"",'">\n\t\t\t\t\t\t\t\t<a href="#" data-media-id="').concat(b.id,'" data-media-type="').concat(b.type,'" data-action="').concat(e,'" ').concat(b.isVip&&!a.client.isVipSubscribed?'data-price-vip="'+a.performer.priceVip+'" data-video-nb-free="'+a.performer.videoCount.free+'" data-video-nb-vip="'+a.performer.videoCount.vip+'" data-video-nb-second="'+a.performer.videoTotalSecond+'" data-video-nb-minute="'+a.performer.videoTotalMinute+'" data-photo-nb-vip="'+a.performer.photoNbVip+'"':
"",'>\n\t\t\t\t\t\t\t\t\t<svg role="img">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href="').concat(ToolApp.imageIconSvgGetUrl(),'#heartMediaRating" href="').concat(ToolApp.imageIconSvgGetUrl(),'#heartMediaRating"></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<span class="rating-counter ').concat(0===b.content.loveCount?"isHidden":"",'">').concat(b.content.loveCount,'</span>\n\t\t\t\t\t\t\t\t\t<span class="rating-text">').concat(b.content.loveText,"</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t").concat(f,
"\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t");return'\n\t\t\t\t<div class="timeline-item" data-item-id="'.concat(a.media.id,'" data-performer-id="').concat(a.performer.id,'" data-performer-nickname="').concat(a.performer.nickname,'">\n\t\t\t\t\t').concat(c,"\n\t\t\t\t\t").concat(d,"\n\t\t\t\t\t").concat(b,"\t\t\n\t\t\t\t</div>")};c.prototype.render=function(a){return 3===a.media.type?this.renderMessage(a):this.renderMedia(a)};c.prototype.renderList=function(a){var b=this;void 0===a&&(a=[]);return a.map(function(a){return b.render(a)})};
c.prototype.setupEvent=function(){var a={sender:this};$(this.jDom).on("click","[data-action]",a,};c.prototype.ajaxLoadMoreIfNeed=function(){this.ajaxLastDate&&100>(new Date).getTime()-this.ajaxLastDate.getTime()||ToolBrowser.isElementInViewportPartial(this.lastTimelineElement)&&this.loadMore()};c.prototype.renderPostOperation=function(a,b){var c=this,d=this.jDom.find("div.timeline-item").last();d.length?(this.lastTimelineElement=d[0],this.initFancybox()):
this.lastTimelineElement=void 0;1>a||b&&window.setTimeout(100)};c.prototype.ajaxRequest=function(){var a=this;if(this.ajaxLock){if(this.requestPromise)return this.requestPromise;throw Error("10091: lock fail");}this.ajaxLock=1;this.ajaxLastDate=this.ajaxLastDateStart=new Date;this.requestPromise=e.getList(this.state);this.loaderShow();this.requestPromise.done(function(b){var c=b.timelineList.length,d=0===c,f=b.hasMore;if(d||!f)a.noMoreItem=!0;d||(d=a.renderList(b.timelineList),
a.jDom.find("#timeline-section-container").append(d));f&&(a.state.offset=b.offset);a.renderPostOperation(c,f)}).fail(function(a){Layer.openErrorAjax(a)}).always(function(){a.ajaxLock=0;a.requestPromise=void 0;a.ajaxLastDate=new Date;a.ajaxLastDateStart=void 0;a.loaderHide()});return this.requestPromise};c.prototype.loaderShow=function(){this.jDom.find(".loader").css("visibility","visible")};c.prototype.loaderHide=return c}(Core.Listener);
h.Manager=k;var e;(function(e){e.getList=)(e||(e={}));var l;(function(e){e.dispatch=function(c){var a=$(c.currentTarget),b=a.closest(".timeline-item");switch(a.data("action")){case "page-navigate-favorite-models":ToolBrowser.redirectToUrl(Application.Config.url.root+"/favorites/");break;case "page-navigate-online-list":ToolBrowser.redirectToUrl(Application.Config.url.root+"/");break;case "play-video":a.hasClass("videoFooter")&&
(a=$(".thumb",b));var e=0,d=0,f=0,g=a.data("vip");g&&(e=parseInt(g,10));(g=a.data("gift"))&&(d=parseInt(g,10));(g=a.data("client-vip"))&&(f=parseInt(g,10));a={video:{id:parseInt(a.data("vid"),10),isVip:e,isGift:d},performer:{id:parseInt(b.data("performer-id"),10),nickname:b.data("performer-nickname"),price:{vodVipWithCurrencyOnly:a.data("price-vip")},videoCount:{vip:a.data("video-nb-vip"),free:a.data("video-nb-free")},videoTotalSecond:a.data("video-nb-second"),videoTotalMinute:a.data("video-nb-minute"),
photoNbVip:a.data("photo-nb-vip"),vipVideoGiftIsEnabled:a.data("vip-video-gift-enabled")},client:{isVip:f}};c.data.sender.delegateEvent(h.EVENT_VIDEO_CLICK,a);break;case "vip-subscription":a={id:parseInt(b.data("performer-id"),10),nickname:b.data("performer-nickname"),price:{vodVipWithCurrencyOnly:a.data("price-vip")},videoCount:{vip:a.data("video-nb-vip"),free:a.data("video-nb-free")},videoTotalSecond:a.data("video-nb-second"),videoTotalMinute:a.data("video-nb-minute"),photoNbVip:a.data("photo-nb-vip"),
vipVideoGiftIsEnabled:a.data("vip-video-gift-enabled")};c.data.sender.delegateEvent(h.EVENT_VIP_SUBSCRIPTION_CLICK,a);break;case "vip-access":(new Layer.VipDisabled).open();break;case "rate-media":a.closest(".media-rating-inner").hasClass("media-rated")||(a=a.closest("a"),a={mediaId:a.data("media-id"),mediaType:a.data("media-type"),target:a},c.data.sender.delegateEvent(h.EVENT_MEDIA_RATING_CLICK,a))}}})(l||(l={}))})(TimelineModule||(TimelineModule={}));
var __extends=this&&this.__extends||function(){var c=function(d,e){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(b[f]=a[f])};return c(d,e)};return function(d,e){function b(){this.constructor=d}if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");c(d,e);d.prototype=null===e?Object.create(e):(b.prototype=e.prototype,new b)}}(),
ChatVideoLayer;
(function(c){c.EVENT_CLOSE_OPEN_LAYER_PRIVATE="closeOpenLayerPrivate";c.EVENT_CLOSE_AND_GOTO_ONLINE_LIST="closeGotoOnlinelist";c.dispose=var d=function(b){function a(){var a=b.call(this)||this;a.$layerContainer=$(".block-layer-on-video");return a}__extends(a,b);a.prototype.closeAll=a.prototype.close=function(){this.$layerContainer.addClass("is-hidden")};a.prototype.open=
return a}(Core.Listener);c.VideoLayer=d;var e=function(b){function a(){var a=b.call(this)||this;a.$layer=$("#chat-video-layer-type-private-show",a.$layerContainer);return a}__extends(a,b);a.prototype.setupEvent=function(){var a=this;$(".button",this.$layer).unbind("click").bind("click",function(b){a.fire(c.EVENT_CLOSE_OPEN_LAYER_PRIVATE);b.preventDefault()})};a.prototype.open=function(){b.prototype.open.call(this);this.$layer.removeClass("is-hidden");
this.setupEvent()};a.prototype.close=function(){b.prototype.close.call(this);this.$layer.addClass("is-hidden")};return a}(d);c.PrivateShow=e;d=function(b){function a(){var a=b.call(this)||this;a.$layer=$("#chat-video-layer-type-exclusive-show",a.$layerContainer);return a}__extends(a,b);a.prototype.setupEvent=function(){var a=this;$(".button",this.$layer).unbind("click").bind("click",};a.prototype.open=function(){b.prototype.open.call(this);
this.$layer.removeClass("is-hidden");this.setupEvent()};a.prototype.close=function(){b.prototype.close.call(this);this.$layer.addClass("is-hidden")};return a}(d);c.ExclusiveShow=d})(ChatVideoLayer||(ChatVideoLayer={}));
var __extends=this&&this.__extends||function(){var f=function(e,d){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])};return f(e,d)};return function(e,d){function c(){this.constructor=e}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(e,d);e.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}(),
ModuleVideoPlayer;
(function(f){var e=function(d){function c(a){a=d.call(this)||this;a.eventPlayDone=!1;a.eventTimeupdateDone=!1;a.eventLoadedMetaData=!1;a.playSuccess=!1;a.playError=!1;a.playerLoadSpinRemoved=!1;a.jDomId=$("#l-video-player");a.currentVideo={durationStr:"",id:0,love:0,nickname:"",thumbImgAlt:"",src:"",thumbImg:"",videoId:0,vip:0};a.isVisibleState=!1;a.openDate=new Date;a.setupEvent();return a}__extends(c,d);c.prototype.isVisible=function(){return this.isVisibleState};c.prototype.setupEvent=function(){var a=
this;this.jDomId.find(".action-close").unbind("click").bind("click",;this.jDomId.unbind("click").bind("click",function(b){!ToolUi.isEventToFast(a.openDate,250)&&b.target&&(b=$(b.target),b.closest("#player-vod-video").length||b.closest("a").length||a.fire(2))});this.jDomId.find(".js-action-love").unbind("click").bind("click",function(b){b.stopPropagation();b.preventDefault();if(!Application.Config.isUserConnected){a.videojsPlayer&&a.videojsPlayer.pause();
if(Application.Config.wl.signUpSignIsAsLayer){b=ToolRegister.loginWebauthOrRegister(11);var c=!0;b.on(7,function(){c=!1});b.on(6,function(){c=!1});b.on(2,;return}if(ToolApp.redirectToLoginIfNotConnected())return}a.currentVideo.isLoved||(a.currentVideo.isLoved=!0,a.currentVideo.love++,a.uiLoveUpdate(!0),MediaRatingModule.Ajax.requestRateMedia({mediaType:2,mediaId:a.currentVideo.videoId}),a.fire(204,a.currentVideo))});if("videojs"in window)this.preparePlayer();
else ToolApp.event.on(12,};c.prototype.uiLoveUpdate=function(a){var b=this.jDomId.find(".vod-love-info");!a||this.playError?b.hide():(b.find(".love-count").text(this.currentVideo.love),this.currentVideo.isLoved?b.addClass("loved"):b.removeClass("loved"),b.show())};c.prototype.canHandleHistoryPop=c.prototype.close=function(){this.isVisibleState=!1};c.prototype.closeBefore=function(){if(this.videojsPlayer){this.videojsPlayer.pause();
this.videojsPlayer.playbackRate(1);try{this.videojsPlayer.tech_.sourceHandler_.hls.stopLoad()}catch(a){}}this.playerReset()};c.prototype.playerReset=c.prototype.getInternalState=c.prototype.openAfter=function(a){this.openDate=new Date;this.isVisibleState=!0};c.prototype.startPlay=function(){this.videojsPlayer&&($(".js-player-container").show(),this.jDomId.find("video").show(),
$("#player-vod-video").show(),this.jDomId.find(".js-play-error").hide(),this.playerLoadSpinRemoved||(this.jDomId.find(".js-player-load").remove(),this.playerLoadSpinRemoved=!0),this.videojsPlayer.poster(this.currentVideo.thumbImg),this.videojsPlayer.src(this.currentVideo.src),this.playerReset(),"vttSrc"in this.currentVideo&&this.currentVideo.vttSrc&&this.vttSet(this.currentVideo.vttSrc),this.videojsPlayer.play())};c.prototype.vttSet=function(a){this.videojsPlayer&&"vttThumbnails"in this.videojsPlayer&&
("function"===typeof this.videojsPlayer.vttThumbnails?this.videojsPlayer.vttThumbnails({src:a}):"src"in this.videojsPlayer.vttThumbnails&&"function"===typeof this.videojsPlayer.vttThumbnails.src&&this.videojsPlayer.vttThumbnails.src(a))};c.prototype.onVideoMoreInfo=function(a){this.playError||a.id===this.currentVideo.id&&"vttSrc"in a&&a.vttSrc&&this.vttSet(a.vttSrc)};c.prototype.openBefore=function(a){this.currentVideo=a.mediaInfo;this.uiLoveUpdate(!1);if(this.videojsPlayer)this.startPlay();else{$(".js-player-container").hide();
a=this.jDomId.find(".js-player-load");for(var b=a.find("img"),c=0;c<b.length;c++){var d=b[0],e=d.getAttribute("data-src");e&&d.setAttribute("src",e)}a.show()}this.resize();$(".js-performer-nickname").text(this.currentVideo.nickname);this.jDomId.find(".js-bio-page-link").attr("href",Application.Config.url.root+"/model/"+this.currentVideo.nickname.toLowerCase()+"/")};c.prototype.orientationChanged=function(){};c.prototype.resize=function(){var a=ToolBrowser.viewPortSize();this.jDomId.height(a.height);
var b=$("#player-vod"),c=b.offset();b.height(Math.floor(a.height-c.top));if(this.videojsPlayer){b=this.jDomId.find(".vod-love-info");a.height>a.width?b.addClass("portrait"):b.removeClass("portrait");b=this.videojsPlayer.videoWidth();var d=this.videojsPlayer.videoHeight();0<b&&(c=a.height-c.top,a=a.width,d=b/d,ToolBrowser.isMobile()?b=a:(b=Math.round(2.5*b),b>a&&(b=a)),a=Math.floor(b/d),a>c&&(a=c),c=$("#player-vod-video"),c.height(a),c.width(b),this.videojsPlayer.width(b),this.videojsPlayer.height(a))}};
c.prototype.scroll=function(){};c.prototype.preparePlayer=function(){var a=this;this.videojsPlayer=videojs("player-vod-video",{controls:!0,autoHeight:!0,playsinline:!0,autoplay:!1,nativeControlsForTouch:!0,playbackRates:[1,1.5,1.75,2],textTrackSettings:!1,html5:{nativeTextTracks:!1,hlsjsConfig:{maxBufferLength:15,maxMaxBufferLength:24,maxBufferSize:7E6,startLevel:ToolBrowser.isMobile()?0:1}},children:["mediaLoader","posterImage","bigPlayButton","controlBar"]});this.videojsPlayer.on("play",function(){a.eventPlayDone=
!0;a.checkPlayDone()});this.videojsPlayer.on("timeupdate",function(){a.eventTimeupdateDone=!0;a.checkPlayDone()});this.videojsPlayer.on("error",function(){a.onPlayerError()});"Hls"in window&&Hls&&(this.videojsPlayer.tech_.on(Hls.Events.ERROR,,this.videojsPlayer.tech_.on(Hls.Events.LEVEL_SWITCHED,function(b,c){a.resize();a.videojsPlayer&&"level"in c&&(a.videojsPlayer.tech_.sourceHandler_.hls.config.startLevel=c.level)}));this.videojsPlayer.on("loadedmetadata",function(){a.eventLoadedMetaData=
!0;a.checkPlayDone()});if("undefined"!==typeof StreamPlayerXCl){var b=StreamPlayerXCl.volumePercentRestore();void 0===b&&(b=50);this.videojsPlayer.volume(b/100);(b=StreamPlayerXCl.mutedRestore(!1))&&this.videojsPlayer.muted(b)}this.videojsPlayer.on("volumechange",function(){if(a.videojsPlayer){var b=Math.round(100*a.videojsPlayer.volume()),c=a.videojsPlayer.muted();"undefined"!==typeof StreamPlayerXCl&&(StreamPlayerXCl.volumePercentSave(b),StreamPlayerXCl.mutedSave(c))}})};c.prototype.onPlayerError=
function(){this.playError||this.playSuccess||(this.playError=!0,$("#player-vod-video").hide(),this.jDomId.find(".js-play-error").show(),this.uiLoveUpdate(!1))};c.prototype.checkPlayDone=function(){this.eventPlayDone&&this.eventTimeupdateDone&&this.eventLoadedMetaData&&!this.playSuccess&&(this.playSuccess=!0,this.fire(203,this.currentVideo),this.resize(),this.uiLoveUpdate(!0))};return c}(Core.Listener);f.VideoPlayerManager=e})(ModuleVideoPlayer||(ModuleVideoPlayer={}));
var ModuleVipCredit;
(function(c){var d=-1;c.update=function(a){var e=$(".js-action-vip-credit-explain"),f=$("#js-tip-nb-video"),b=$("#popupVipCreditNumberParagraph");if(!a||0>=a)e.length&&(e.hide(),$(".top-vip-credit-spacing").hide()),f.length&&f.hide(),b.length&&b.hide();else if(a!=d){b=$(".vip-credit-badge-number");var c=$("#popupVipCreditNumber");var g=99<a?"99":a.toString(10);b.text(g);0>=d&&(e.show(),$(".top-vip-credit-spacing").show());f.text(a.toString(10));c.text(a.toString(10));d=a}}})(ModuleVipCredit||(ModuleVipCredit=
{}));
var ModuleVirtualReality;
(function(d){function c(b){var a=$("#app-loader");b?a.show():a.hide()}d.init=function(){c(!0);ToolApp.event.on(18,function(){c(!1);(new e).init()})};d.setLoaderVisibility=c;var e=function(){function b(){this.vrPlayerInstance=new Vr.Player(new VrApi.XLoveCam,StreamPlayerLogic.getInstance(),{autoEnterVr:Application.vrConfig.autoEnterVr,showUserPanelOnlyInImmersiveMode:Application.vrConfig.showUserPanelOnlyInImmersiveMode,svgIconPath:Application.vrConfig.svgIconPath,audioFilePath:Application.vrConfig.audioFilePath,cacheBuster:Application.vrConfig.cacheBuster,
performerUrlTemplate:Application.vrConfig.performerUrlTemplate,wavEncoderPath:Application.vrConfig.wavEncoderPath});this.vrPageUi=$('<div id="vrPageUi"></div>');this.enterVrButton=$('<button class="enterVrButton">'+Translation.tr("actionChatEnterVr")+"</button>");this.leaveVrButton=$('<a class="leaveVrButton">'+Translation.tr("actionChatLeaveVrVersion")+"</a>");this.vrEngineCanvas=$("#"+Vr.Player.ENGINE_CANVAS_ELEMENT_SELECTOR_ID);this.vrPageUi.append(this.enterVrButton,this.leaveVrButton);this.vrNotSupportedLayer=
new Layer.VrNotSupported}b.prototype.initEventListener=function(){var a=this;this.vrEngineCanvas.on("click",;this.enterVrButton.on("click",function(){a.enterVr()});this.leaveVrButton.on("click",;this.vrPlayerInstance.on(Vr.Library.EPlayerEvent.ON_EXIT_VR,function(){a.vrPlayerInstance.setRenderCanvasVisibility(!1);a.setVrPageUiVisibility(!1);c(!0)})};b.prototype.enterVr=
function(){var a=this;this.vrPlayerInstance.enterVr().then(function(){a.logVrStart()},};b.prototype.setVrPageUiVisibility=b.prototype.logVrStart=function(){"undefined"!==typeof gtag&&gtag("event","VR_start")};b.prototype.logVrStartFail=function(){"undefined"!==typeof gtag&&gtag("event","VR_start_fail")};b.prototype.init=function(){$("body").append(this.vrPageUi);this.initEventListener();
switch(Application.renderVrInterfaceForPageId){case 1:this.vrNotSupportedLayer.setTemplateOnlineList();this.vrNotSupportedLayer.setSiteName(window.location.hostname);this.vrPlayerInstance.initOnlineListDisabled();break;case 2:this.vrNotSupportedLayer.setTemplateChat();this.vrNotSupportedLayer.setSiteName(window.location.hostname);if(Application.chat.performerInfo&&Application.chat.performerInfo.performer.id)this.vrNotSupportedLayer.setPerformerName(Application.chat.performerInfo.performer.nickname),
this.vrPlayerInstance.initPerformer(Application.chat.performerInfo.performer.id);else throw Error("Invalid vr performer id");break;default:throw Error("Invalid renderVrInterfaceForPageId");}};return b}()})(ModuleVirtualReality||(ModuleVirtualReality={}));
"jQuery"in window||setTimeout(function(){var b="/err0r/js/?img=1&message=Problem+loading&appState="+("jQuery"in window?"jQuery-delayed-ok":"jQuery-delayed-failed"),h=document.createElement("img");h.src=b;document.body.appendChild(h)},3500);
function appGetInternalState(){var b={};"SP_GetInternalState"in window&&(b.sp=SP_GetInternalState());b.spReady=StreamPlayerLogic.isReady()?1:0;b.spTechReady=StreamPlayerLogic.isTechReady()?1:0;"ToolBrowser"in window&&(b.isPageHidden=ToolBrowser.isPageHidden()?1:0);b.hasFoundation="Foundation"in window?1:0;"Layer"in window&&(b.disclaimerIdExists=Layer.disclaimerIdExists()?1:0);"Application"in window&&(b.versionConfigId=Application.Config.versionId);b.versionJsId=ToolApp.REVISION_ID;if("jQuery"in window)try{b.scrollTop=
jQuery(window).scrollTop()}catch(u){b.scrollTop="error"}ToolApp.foundationHasBeenSetup||(b.foundationHasBeenSetup=0);ToolApp.foundationInitialized||(b.foundationInitialized=0);"ToolApp"in window&&"asyncLoadErrorList"in ToolApp&&ToolApp.asyncLoadErrorList&&ToolApp.asyncLoadErrorList.length&&(b.asyncLoadErrorList=ToolApp.asyncLoadErrorList);if("ToolApp"in window&&"pageList"in ToolApp&&"object"===typeof ToolApp.pageList){b.toolAppPageList=1;var h=ToolApp.pageList.length;try{for(var m=0;m<h;m++){var l=
ToolApp.pageList[m].getInternalState(),p=void 0;p="module"in l?l.module:"mod"+m.toString();b[p]=l}}catch(u){b.toolAppPageListException=1}}else b.toolAppPageList=0;return b}function validMajeurAction(){Core.Ajax.post("/home/majeur/",{dateUnixTs:Math.round((new Date).getTime()/1E3)})}var ToolApp;
(function(b){function h(a,b){return"gtag"in window&&gtag&&Application.Config.google&&Application.Config.google.analytics?(gtag("event","click",{event_category:a,event_label:b,send_to:Application.Config.google.analytics}),!0):!1}function m(a){void 0===a&&(a="");a||(a=location.pathname);"gtag"in window&&gtag&&Application.Config.google&&Application.Config.google.analytics?gtag("event","page_view",{page_path:a,send_to:Application.Config.google.analytics}):"ga"in window&&ga&&ga("send","pageview",a)}function l(a){if("onerror"in
window&&window.onerror)window.onerror(a)}function p(a){for(var b=["google-analytics.com/",".bing.com/","traffic.acwebconnecting.com/",".googletagmanager.com/"],c=0;c<b.length;c++)if(0<=a.indexOf(b[c]))return!0;return!1}function u(a){return function(){var e="operation"in a&&a.operation?a.operation:0,c={alwaysResolve:!0},d=void 0;switch(e){case 1:window.acwebCoStatAsyn=!0;window.acwebCoStatSwfObject=!1;break;case 2:case 4:case 12:case 13:case 8:case 14:case 18:case 7:case 16:case 15:case 20:case 21:case 22:case 23:case 25:c.crossOriginAnonymous=
!0;break;case 17:d=ToolBrowser.loadAsyncImageCached(a.url)}void 0===d&&(d=ToolBrowser.loadAsyncScriptJsCached(a.url,c));d.done(function(c){c||(b.asyncLoadErrorList.push(a.url),p(a.url)||l("Unable to load (!success): "+a.url))});d.fail(function(){l("Unable to load (fail): "+a.url);p(a.url)||b.asyncLoadErrorList.push(a.url)});switch(e){case 1:d=d.done(function(a){a&&"acwebconnecting_traffic"in window&&acwebconnecting_traffic&&"loadAsyncWithJq"in acwebconnecting_traffic&&"function"==typeof acwebconnecting_traffic.loadAsyncWithJq&&
acwebconnecting_traffic.loadAsyncWithJq(Application.Config.stat.siteName,Application.Config.stat.xcoreService,Application.Config.stat.xcoreApp)});break;case 8:d=d.done(;break;case 9:d=d.done(function(a){a&&Application.Config.bing&&Application.Config.bing.analytics&&(a={ti:Application.Config.bing.analytics,q:window.uetq},"UET"in window&&(window.uetq=new UET(a),window.uetq.push("pageLoad")))});break;case 13:d=d.done(function(a){b.event.fire(10)});break;case 21:d=d.done(function(a){a&&
b.event.fire(11)});break;case 22:d=d.done(;break;case 23:d=d.done(;break;case 14:ToolBrowser.isMobile()||(d=d.done(function(a){a&&b.event.fire(13)}));break;case 19:d=d.done(function(a){a&&b.event.fire(15)});break;case 15:setTimeout(function(){NotificationTool.init()},100);break;case 16:d=d.done(function(a){a&&b.event.fire(14)});break;case 20:d=d.done(function(a){a&&!b.foundationHasBeenSetup&&(b.foundationHasBeenSetup=
!0,$(document).foundation(),setTimeout(function(){v()},10))});break;case 24:d=d.done(function(a){a&&b.event.fire(18)});break;case 25:d=d.done(function(a){a&&(b.event.fire(19),ToolUi.qrCodeSetupAuto())});break;case 26:d=d.done(function(a){a&&b.event.fire(21)});break;case 5:d=d.done(function(a){a&&b.event.fire(22)});break;case 27:d=d.done(function(a){a&&b.event.fire(23)});break;case 28:d=d.done(}return d}}function A(a,b){switch("operation"in a&&a.operation?a.operation:
0){case 2:if(!("Float32Array"in window))return;break;case 3:ToolBrowser.loadAsyncStyleCssCached(a.url);return;case 17:ToolBrowser.loadAsyncImageCached(a.url);return}return b.then(u(a))}function B(){return 0>document.location.pathname.indexOf("/logout")?!1:!0}function K(){if(!document.location.pathname.match(/support\/contact/)){for(var a=document.body,b="domain.not.found",c=0;c<a.children.length;c++)if("SCRIPT"===a.children[c].tagName){var d=a.children[c].getAttribute("src");if(d&&d.match(/\/jquery/i)){b=
d;b=(c=b.match(/\/\/(.*?)\//))&&2<=c.length?c[1]:b;break}}if(window.onerror)window.onerror("Reload: "+b,document.location.href,1,1);var f=document.createElement("div");f.setAttribute("id","boxAlertError");f.innerHTML=Translation.tr("errorGenericFailed")+"\n"+Translation.tr("errorGenericReloadPage")+"<br/><a class='error' href='"+Application.Config.url.root+"/support/contact/'>Contact us</a>";var g=new Date;b=document.createElement("div");c=document.createElement("button");c.innerHTML="OK";c.setAttribute("class",
"button error");c.addEventListener("click",function(){ToolUi.isEventToFast(g,700)||a.removeChild(f)});b.appendChild(c);f.appendChild(b);a.insertBefore(f,a.firstChild)}}function v(){for(b.foundationInitialized=!0;w.length;){var a=w.shift();a&&a()}}function L(a){if(a.status){C=!0;b.userInfo&&(b.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification=!1);for(var e=document.querySelectorAll(".hard-censored"),c=0;c<e.length;c++){var d=e[c];"classList"in d&&"remove"in d.classList&&d.classList.remove("hard-censored")}Core.Ajax.post("/user/ageVerified/",
{isVerified:1,payload:a.payload}).done(function(a){a.userInfo&&(x(a.userInfo),b.event.fire(215))});"gtag"in window&&gtag&&gtag("event","ageVerification",{event_category:"unknown",event_timeout:11E3,event_callback:function(){}})}}function M(){if("ageVerificationSystem"in Application&&Application.ageVerificationSystem){var a=ToolAvs.getInstance(Application.ageVerificationSystem);if(a)if(a.on(206,function(e,c){c&&c.status&&(a&&(a.destroy(),a=void 0),L(c),b.event.fire(206,c))}),a.isReady())a.requestAgeVerificationStatus();
else a.on(207,}}function N(){$("a[data-url]").on("click",function(a){a.preventDefault();a=$(this);var b=a.data("url");b=atob(b);"_blank"==a.attr("target")?(a=window.open(b,"_blank"))&&a.focus():ToolBrowser.redirectToUrl(b)})}function O(){t.webauthBrowserData().done(function(a){a&&0<a.method&&a.payload&&WebAuthTool.methodAuthSet({payload:a.payload,method:a.method,nickname:a.nickname})})}unction P(a){if(Application.Config.google&&Application.Config.google.analytics&&"registerStatAuthMethod"in a&&!(0<n)){n=1;var b=a.authPayload;if(!ToolStorage.registerStatGet(b)){var c=new Date;gtag("event","sign_up2",{method:"m"+a.registerStatAuthMethod,event_timeout:11E3,event_callback:function(){var a=(new Date).getTime()-c.getTime();ToolStorage.registerStatSet(b,!0);1===n&&(n=2,t.registeredStatDone(a))}})}}}function Q(a){if("creditTrackStat"in a&&Application.Config.google&&Application.Config.google.analytics&&
a.isAuth){var b=ToolSecurity.strToHash(a.nickname),c=a.creditTrackStat;if(a=ToolStorage.creditStatGet(b)){if(!(c===a.creditId||c<a.creditId)&&"gtag"in window&&gtag){var d="old";"0"===a.creditId&&(d="new");gtag("event","purchase",{client_type:d,transaction_id:c,event_timeout:11E3,event_callback:function(){var a=ToolStorage.creditStatSet(b,{creditId:c});if(0<a&&"onerror"in window&&window.onerror)window.onerror("[debugOnlyNotCritical] CREDIT cb: save error: "+a+" cid "+c)}});h("credit","1."+d)}}else if(a=
ToolStorage.creditStatSet(b,{creditId:c}),0<a&&"onerror"in window&&window.onerror)window.onerror("[debugOnlyNotCritical] CREDIT init: save error: "+a+" cid "+c)}}function R(a){window.setTimeout(function(){Q(a)},10);"registerStatAuthMethod"in a&&window.setTimeout(10)}function x(a){a&&R(a);b.userInfo=a;b.userInfo.updateDateUnixTsMs=Date.now();C&&(b.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification=!1);D(a.creditAmountWithCurrency);"videoVipGiftedRemaining"in a&&E(a.videoVipGiftedRemaining);
if("isAuth"in a){if(!Application.Config.isUserConnected&&a.isAuth){document.location.reload();return}a.isAuth?"messageNonRead"in a&&ModuleMessagingUnread.update(a.messageNonRead):Application.Config.isUserConnected=0}b.event&&b.event.fire(205,a)}function y(a,b,c){void 0===b&&(b=0);void 0===c&&(c=0);var d=new Date;F++;var e="";0<c&&(e="&x-deltaMs="+c.toString(10));a=Core.Ajax.post("/user/info/?from="+encodeURIComponent(a)+"&x-request-count="+F.toString(10)+e,{time:Math.round(d.getTime()/1E3),reasonId:b});
var g=$.Deferred();a.done(function(a){a.userInfo?(x(a.userInfo),g.resolve({success:1})):g.reject({code:11250,msg:"Internal error"})}).fail(function(a){g.reject(a)});return g}b.REVISION_ID="4510628";b.IMAGE_ACTION_PANEL_SVG="/static-vendor/internal/iconxl/v2/svg/actionpanel.svg?3";b.EVENT_HEADER_DISPLAYED="headerDisplayed";b.EVENT_HEADER_HIDDEN="headerHidden";var C=!1,n=0,G;b.pageList=[];b.foundationInitialized=!1;b.foundationHasBeenSetup=!1;var w=[],k,H=!1;b.eventLoadPageFired=!1;b.temporaryObjectStorage=
{};var r,I;b.userHasCredit=function(a){void 0===a&&(a=.01);return b.userInfo.creditAmount>a};b.imageIconSvgGetUrl=function(){return"/static-vendor/internal/iconxl/v2/svg/main.svg?"+Application.Config.versionIdVendor};b.svgMainGetUrl=b.trackCreditInc=function(a){window.setTimeout(function(){var b="unk";!0===a?b="new":!1===a&&(b="old");h("credit","1."+b);"gtag"in window&&gtag&&Application.Config.google&&
Application.Config.google.analytics&&gtag("event","purchase",{client_type:b});if(0>document.location.pathname.indexOf("paymentend/ok")&&(m(Application.Config.url.root+"/paymentend/ok/?js=1"),window.onerror))window.onerror("[debugOnlyNotCritical][credit] credit increased but not from paymentend")},100)};b.trackingClick=h;b.trackingPageChanged=m;b.trackEvent=function(a){"trackEnabled"in Application.Config.stat&&Application.Config.stat.trackEnabled&&Core.Ajax.post("/user/lovely/",{event:a})};b.fancyboxIsLoaded=
function(){return"fancybox"in jQuery};b.hammerIsLoaded=function(a){if("Hammer"in window)return!0;if(H)return!1;H=!0;for(var b=document.querySelectorAll("script"),c="",d=0;d<b.length;d++){var f=b[d].getAttribute("src");if(f&&f.match(/hammer\.min\.js/)){c=f;break}}if("onerror"in window&&window.onerror&&c){var g=new Date,z=function(){var b=(new Date).getTime()-g.getTime(),c=0,d="(none)";if("performance"in window&&window.performance&&"getEntriesByType"in window.performance){var e=window.performance.getEntriesByType("navigation");
0<e.length&&(e=e[0],c=e.domComplete,d="domComplete",0==c&&(c=e.domContentLoadedEventEnd,d="domContentLoadedEventEnd"),0==c&&(c=e.domContentLoadedEventStart,d="domContentLoadedEventStart"),0==c&&(c=e.domInteractive,d="domInteractive"),c=Math.round(c))}return"[debugOnlyNotCritical][LoadError] Hammer not loaded: "+a+" Duration: "+b.toString(10)+"ms, "+d+": "+c+"ms "};b=ToolBrowser.loadAsyncScriptJsCached(c,{crossOriginAnonymous:!0});var h=setTimeout(function(){l(z()+" Test Timeout. URL: "+c)},5E3);b.done(function(a){h&&
(clearTimeout(h),h=0);l(z()+" Test "+(a?"OK":"Error")+". URL: "+c)});b.fail(function(){h&&(clearTimeout(h),h=0);l(z()+" Test failed. URL: "+c)})}return!1};b.asyncLoadLateProcess=function(){if("jQuery"in window){for(var a=jQuery.Deferred(),b=a;Application.asyncLoadLate.length;){var c=Application.asyncLoadLate.shift();c&&(c=A(c,b))&&(b=c)}setTimeout(function(){a.resolve()},100);return b}};b.isCurrentPageIsLogout=B;b.broadcastOnLogin=function(){Application.user&&Application.user.isAuth||B()||b.reloadPageWithReason(3,
"broadcast-login")};b.broadcastOnLogout=function(){Application.user&&Application.user.isAuth&&b.reloadPageWithReason(2,"broadcast-logout")};b.broadcastOnHello=function(a,b){if(k&&Application.user&&Application.user.isAuth!=b.userInfo.isAuth){var c=(new Date).getTime()-k.getTime();Application.user.isAuth&&"loginDoPosteriorOperation"in Application&&Application.loginDoPosteriorOperation&&45E3>c&&ToolBroadcast.broadcastRefresh(a,Application.user)}};b.mainBefore=function(){ToolBrowser.init();r=36E4;b.event=
new Core.Listener;Application.Config.google&&Application.Config.google.analytics&&setTimeout(function(){window.dataLayer=window.dataLayer||[];"gtag"in window||(window.gtag=;gtag("js",new Date);"optimizeId"in Application.Config.google?gtag("config",Application.Config.google.analytics,{optimize_id:Application.Config.google.optimizeId,linker:{accept_incoming:!0}}):gtag("config",Application.Config.google.analytics,{linker:{accept_incoming:!0}})},1);k=new Date;
b.asyncLoadErrorList=[];"user"in Application&&Application.user&&(b.userInfo=Application.user,b.userInfo.updateDateUnixTsMs=Date.now());ToolBroadcast.setup();"loginDoPosteriorOperation"in Application&&Application.loginDoPosteriorOperation&&window.setTimeout(function(){ToolLogin.posteriorOperation()},10);if("jQuery"in window){for(var a=jQuery.Deferred(),e=a;Application.asyncLoad.length;){var c=Application.asyncLoad.shift();c&&(c=A(c,e))&&(e=c)}setTimeout(function(){a.resolve()},100)}else K()};b.startDateGetUnixTs=
function(){k||(k=new Date);return Math.round(k.getTime()/1E3)};b.startDateGetDurationSeconds=function(){k||(k=new Date);var a=(new Date).getTime()-k.getTime();return Math.round(a/1E3)};b.getCsrfProtectionToken=function(){return"csrfProtectionToken"in Application.Config?Application.Config.csrfProtectionToken:""};b.runOnFoundationInitialized=b.foundationLoaded=v;b.mainAfter=function(){if("jQuery"in window){ToolMenu.init();ModuleHeaderUi.init();"Foundation"in
window&&!b.foundationHasBeenSetup&&(b.foundationHasBeenSetup=!0,$(document).foundation(),setTimeout(function(){v()}));var a=Translation.tr("errorGenericFailed");"errorGenericFailed"!==a&&(Core.MSG_INTERNAL_ERROR=a);window!==window.top&&setTimeout(function(){if(window!=window.top){var a={app_screenWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||-1),app_screenHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||-1),app_referrer:document.referrer.toString()};
try{window.top&&(a.app_parentUrl=window.top.location.toString())}catch(d){a.app_parentUrl="error"}Core.Ajax.post("/err0r/iframe/",a)}},100);ChromeSuggestTool.init();"user"in Application&&Application.user&&b.userInfoUpdateUi(Application.user);(a=WebAuthTool.methodAuthGet())&&99===a.method&&O();if(Application.Config.wl.signUpSignIsAsLayer&&($(".sidebar-right .register, .l-header .action-register, .l-footer-content .action-register").bind("click",function(a){var c=ToolRegister.layerOpen();a.preventDefault();
a.stopPropagation();ToolMenu.hideAll();b.event.fire(8,{layerObj:c});c.on(2,function(){c.resetLayerHeight()})}),$(".sidebar-right .login, .l-header .action-login, .l-footer-content .action-login, .block-avs-notice .action-anchor a").bind("click",function(a){var c=ToolLogin.layerOpen();a.preventDefault();a.stopPropagation();ToolMenu.hideAll();b.event.fire(8,{layerObj:c})}),a=$('a[target="login"]'),a.bind("click",function(a){var c=ToolRegister.loginWebauthOrRegister();a.preventDefault();a.stopPropagation();
ToolMenu.hideAll();b.event.fire(8,{layerObj:c})}),a.removeAttr("target"),!Application.Config.isUserConnected&&"registerForm"in Application&&Application.registerForm&&"registerShowAsLayerOnLoad"in Application.registerForm&&Application.registerForm.registerShowAsLayerOnLoad&&!Layer.disclaimerIdExists())){var e=Application.registerForm.registerShowAsLayerOnLoad&4;setTimeout(function(){ToolRegister.loginWebauthOrRegister(11,{canBeClosed:!e})},1E3)}Application.Config.isUserConnected||(a=$('a[data-access="registered"]'),
a.bind("click",);ToolBrowser.passwordCredentialSupported()&&navigator.credentials&&navigator.credentials.preventSilentAccess&&$(".js-action-logout").bind("click",function(a){var b=navigator.credentials.preventSilentAccess(),c=function(){ToolBrowser.redirectToUrl(Application.Config.url.root+"/user/logout/")};b.then(function(){c()});b["catch"](function(){c()});a.preventDefault();a.stopPropagation()});b.runOnFoundationInitialized(function(){var a=
b.disclaimerDisplayIfNeed();if(a)a.on(Layer.EVENT_CLOSE,});window.setTimeout(function(){var a=!1;"loginDoPosteriorOperation"in Application&&Application.loginDoPosteriorOperation&&(a=!0);ToolBroadcast.broadcastHello(Application.user,a)},1);N();ToolFooter.init();M();$(".js-action-vip-credit-explain").bind("click",function(a){(new Layer.InfoDomId(Layer.DOM_ID_CREDIT_EXPLAIN)).open();a.preventDefault();a.stopPropagation()});0>document.location.search.indexOf(J.PARAM_RELOAD_REQUESTED)||
(b.reloadCleanParameterWithoutReloading(),I=!0);ToolTemplate.isThemeXmas()&&ToolTemplate.initXmasLogo()}};b.performanceLoadCheck=function(){if("performance"in window&&window.performance&&"getEntriesByType"in window.performance&&"rum"in Application.Config.stat&&Application.Config.stat.rum){var a=window.performance.getEntriesByType("navigation");if(0!=a.length){var b=a[0];if("toJSON"in b){var c=b.domContentLoadedEventEnd;0==c&&(c=b.domContentLoadedEventStart);c=Math.round(c);a=document.location.href;
0===a.indexOf(document.location.origin)&&(a=a.substring(document.location.origin.length));0===a.indexOf(Application.Config.url.root)&&(a=a.substring(Application.Config.url.root.length));var d=a,f=d.indexOf("?");0<f&&(d=d.substring(0,f));f=ToolStorage.rumGetDone();var g=ToolBrowser.isStorageSupported();f&&(g=36E3<Math.round((new Date).getTime()/1E3)-f.unixTs);if(2E3<c||"/"==d||g){d=window.performance.getEntriesByType("paint");c={};for(f=0;f<d.length;f++)g=d[f],c[g.name]=g.startTime;g=window.performance.getEntriesByType("resource");
d=void 0;if(0<g.length){var h={},l=-1;for(f=0;f<g.length;f++){var k=g[f],m=k.domainLookupEnd-k.domainLookupStart,p=k.connectEnd-k.connectStart;if(1<=m&&1<=p){var q=new URL(k.name);if(q.hostname in h){var n=g[h[q.hostname]],r=n.connectEnd-n.connectStart;m>=n.domainLookupEnd-n.domainLookupStart&&p>=r&&(h[q.hostname]=f)}else h[q.hostname]=f}0<k.name.indexOf("/common.js")&&(l=f)}0<=l&&(f=g[l],d=f.toJSON(),delete d.serverTiming,delete d.workerTiming,q=new URL(f.name),q.hostname in h&&h[q.hostname]!==l?
(f=g[h[q.hostname]],g=f.toJSON(),d.domainLookupStart=g.domainLookupStart,d.domainLookupEnd=g.domainLookupEnd,d.connectStart=g.connectStart,d.connectEnd=g.connectEnd,d.connectName=f.name):d.connectName="self")}b=b.toJSON();delete b.serverTiming;delete b.workerTiming;t.rumSave({payload:JSON.stringify({navigation:b,paint:c,cdn:d,path:a})});ToolStorage.rumSetDone()}}}}};b.loaderShow=function(){$("#app-loader").show()};b.loaderHide=b.creditPageTargetShouldBeBlank=
b.userCreditAmountOnlyUpdateUi=function(a){a=Core.Ajax.post("/user/amountWithCurrencyRender",{amount:a});a.then(function(a){a&&"amountWithCurrency"in a&&("amount"in a&&(b.userInfo.creditAmount=a.amount,b.userInfo.creditAmountWithCurrency=a.amountWithCurrency),D(a.amountWithCurrency))});return a};b.userVideoVipGiftedUpdateUi=E;b.userInfoUpdateUi=x;b.disclaimerAccepted=function(){var a=Core.Ajax.post("/home/disclaimerAccepted/",{time:Math.round((new Date).getTime()/1E3)});a.fail(function(){ToolBrowser.Cookie.setItem("isValidMajeur",
"1",Infinity,"/")});return a};b.sessionKeepOpenInit=function(){Application.Config.isUserConnected&&(G||(G=setInterval(function(){a:if(Application.Config.isUserConnected){var a=(new Date).getTime();if(b.userInfo&&"updateDateUnixTsMs"in b.userInfo&&0<b.userInfo.updateDateUnixTsMs){var e=a-b.userInfo.updateDateUnixTsMs;if(28100<=e){b.userInfo.updateDateUnixTsMs=a;y("creditRefresh-"+(28100).toString(10),1,e);break a}}a-=Core.Ajax.dateLastSuccess.getTime();a>=r&&y("keepOpen-"+r.toString(10),2,a)}},2E3)))};
var F=0;b.userInfoRefreshFromDatabase=y;b.disclaimerMustBeDisplayed=function(){return Layer.disclaimerIdExists()};b.disclaimerMustBeDark=function(){return"disclaimerOpacitySettingEnabled"in Application&&Application.disclaimerOpacitySettingEnabled?0<Application.disclaimerOpacitySettingEnabled&&Layer.disclaimerIdExists():!1};b.disclaimerDisplayIfNeed=function(){if(Layer.disclaimerIdExists()){var a=new Layer.PopupDisclaimer;a.on(Layer.EVENT_CLOSE,function(){delete b.temporaryObjectStorage.layerDisclaimer;
a.broadcastEvent&&ToolBroadcast.broadcastDisclaimerAccepted();var e=b.disclaimerAccepted();"promo"in Application&&Application.promo&&"popunderUrl"in Application.promo&&(window.open(Application.promo.currentUrl),e.always()});a.open({overlayDark:!!Application.disclaimerOpacitySettingEnabled});return b.temporaryObjectStorage.layerDisclaimer=a}};b.redirectToLoginIfNotConnected=function(){if(Application.Config.isUserConnected)return!1;
if(Application.Config.wl.signUpSignIsAsLayer){var a=ToolRegister.loginWebauthOrRegister();ToolMenu.hideAll();b.event.fire(8,{layerObj:a});return!0}a=b.Url.getLogin();ToolBrowser.redirectToUrl(a);return!0};b.redirectToOnlineList=b.redirectToCreditPage=function(){var a=b.Url.getCredit();ToolBrowser.redirectToUrl(a);(new Layer.Loader).open()};b.sessionKeepInitThresholdIntervalMsSet=function(a){r=a};b.isToyControllerLoaded=function(){return ToolBrowser.isMobile()?
!1:"ToyController"in window};b.jQueryNiceScrollPluginLoaded=b.reloadCleanParameterWithoutReloading=function(){var a=new URL(document.location.href);b.Url.reloadCleanParameter(a)&&ToolBrowser.History.update(3,{},document.title,a.href)};b.userInterfaceType=b.reloadPageWithReason=function(a,e,c){void 0===e&&(e="");void 0===c&&(c=!0);var d=new URL(document.location.href);if(c&&10>b.startDateGetDurationSeconds()&&
I)return!1;a=b.Url.PARAM_RELOAD_REQUESTED+"="+a;e&&(a+="&"+b.Url.PARAM_RELOAD_REASON_STR+"="+encodeURIComponent(e));e=new Date;a+="&"+b.Url.PARAM_RELOAD_DATE+"="+encodeURIComponent(e.getTime()+"-"+e.getUTCHours()+"."+e.getUTCMinutes()+"."+e.getUTCSeconds());d.search=""==d.search?"?"+a:d.search+("&"+a);(new Layer.Loader).open();ToolBrowser.redirectToUrl(d.href);return!0};b.redirectToVRAlternative=function(){if(!ToolStorage.redirectToVrGetDone()){var a=new URL(window.location.href);"1"!=a.searchParams.get("vr")&&
(a.searchParams.set("vr","1"),ToolStorage.redirectToVrSetDone(),ToolBrowser.redirectToUrl(a.href))}};b.urlCanonicalRemove=var J;(function(a){function b(a,b){var c=Application.Config.url.root+"/";if("home"!==a||"index"!==b)c+=a+"/","index"!==b&&(c+=b+"/?from=js");return c}a.PARAM_RELOAD_REQUESTED="reloadRequested";a.PARAM_RELOAD_REASON_STR="reloadReasonStr";a.PARAM_RELOAD_DATE="reloadDate";a.reloadCleanParameter=function(b){if(0>b.search.indexOf(a.PARAM_RELOAD_REQUESTED))return!1;
var c=b.search.substring(1),e=[a.PARAM_RELOAD_REQUESTED,a.PARAM_RELOAD_DATE,a.PARAM_RELOAD_REASON_STR];c=c.split("&");for(var g=c.length-1;0<=g;g--){var h=c[g].split("=")[0];0>e.indexOf(h)||c.splice(g,1)}c=0<c.length?"?"+c.join("&"):"";b.search=c;return!0};a.getAction=b;a.getLogin=function(){return b("login","index")};a.getOnlineList=function(){return b("home","index")};a.getCredit=function(){return b("credit","index")};a.getDailyTop5NewPerformer=function(){return b("stat","contest/daily/top5NewPerformer")};
a.getDailyTop5Classic=)(J=b.Url||(b.Url={}));(function(a){function e(){Application.Config.feature.applicationRestriction&16&&b.userInfo.isAuth&&.1>b.userInfo.creditAmount&&(c=setTimeout(function(){(new Layer.Loader).open(Translation.tr("errorUserNotEnoughCredit"));ToolBrowser.redirectToUrl(b.Url.getCredit());c=0},3E4))}var c;a.timerReset=a.timerSetup=e})(b.RedirectToCreditPage||(b.RedirectToCreditPage={}));var t;
(function(a){a.emailResendConfirmationLink=function(){return Core.Ajax.post("/user/resendConfirmation/")};a.webauthBrowserData=a.rumSave=a.registeredStatDone=function(a){a="?x-windowId="+encodeURIComponent(ToolBroadcast.windowIdGet())+"&x-requestMs="+a.toString(10);if(k){var c=(new Date).getTime()-k.getTime();a+="&x-pageMs="+c.toString(10)}ToolBrowser.isExtraBrowser()&&(a+="&isextra=1");
b.userInfo&&(a+="&x-nickname="+encodeURIComponent(b.userInfo.nickname));return Core.Ajax.post("/user/registeredStatDone/"+a,{success:1},!1)};a.payingUser=function(){return Core.Ajax.post("/user/payingUser/",{success:1},!1)};a.payingUser2=function(){return Core.Ajax.post("/user/payingUser2/",{success:1},!1)}})(t=b.Ajax||(b.Ajax={}))})(ToolApp||(ToolApp={}));
"addEventListener"in window&&window.addEventListener("load",function(b){ToolApp.event&&(ToolApp.event.fire(16),ToolApp.eventLoadPageFired=!0);window.setTimeout(function(){if(!ToolApp.foundationHasBeenSetup&&"Foundation"in window){if("onerror"in window&&window.onerror)window.onerror("[debugOnlyNotCritical] Foundation not loaded properly");$(document).foundation();ToolApp.foundationHasBeenSetup=!0;setTimeout(function(){ToolApp.foundationLoaded()})}var b=function(){ToolApp.performanceLoadCheck();var b=
ToolAvs.getInstance(void 0);b&&b.notifyCanStartToPreload()},m=ToolApp.asyncLoadLateProcess();m?m.then(function(){b()}):b();ToolApp.eventLoadPageFired||(ToolApp.event.fire(16),ToolApp.eventLoadPageFired=!0)},200)});
var __extends=this&&this.__extends||function(){var e=function(g,d){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])};return e(g,d)};return function(g,d){function a(){this.constructor=g}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");e(g,d);g.prototype=null===d?Object.create(d):(a.prototype=d.prototype,new a)}}(),
ToolAvs;
(function(e){function g(f){try{return 1>f.isValid?localStorage.removeItem(k):(f.whenUnixTs=Math.round((new Date).getTime()/1E3),localStorage.setItem(k,JSON.stringify(f))),!0}catch(n){return!1}}function d(f){if("ageVerificationSystem"in Application&&void 0!==Application.ageVerificationSystem){var d=new URL(Application.ageVerificationSystem.url,document.location.toString());if(f.origin===d.origin&&a)a.onMessage(f.data)}}var a,c,h,m=function(f){function a(a){var b=f.call(this)||this;b.config=a;a:{try{var l=
localStorage.getItem(k);if(l){var c=JSON.parse(l);if(c&&"isValid"in c&&"whenUnixTs"in c){var g=Math.round((new Date).getTime()/1E3);var e=c.whenUnixTs+2592E3<g?void 0:c;break a}}}catch(p){}e=void 0}b.isAlreaydValidPayload="";e&&"isValid"in e&&e.isValid?(b.isReadyState=!0,b.isAlreadyValid=!0,e.payload&&(b.isAlreaydValidPayload=e.payload)):(b.isAlreadyValid=!1,b.iframeCreate(),b.isReadyState=!1,h||(h=!0,window.addEventListener("message",d,!1)));return b}__extends(a,f);a.prototype.destroy=function(){f.prototype.destroy.call(this);
h&&(window.removeEventListener("message",d),h=!1);if(this.iframeDom){var a=this.iframeDom;this.iframeDom=void 0;document.body.removeChild(a)}};a.prototype.iframeCreate=function(){var a=this,b=document.createElement("iframe");this.config.url&&(b.src=this.config.url);b.setAttribute("frameborder","0");b.setAttribute("allowtransparency","true");b.style.opacity="0.94";b.style.zIndex="10000";b.allow="camera";b.id="avsIframe";this.iframeHide(b);b.onload=function(){b.onload=null;a.isReadyState=!0;a.fire(207)};
document.body.appendChild(b);this.iframeDom=b};a.prototype.isReady=function(){return this.isReadyState};a.prototype.iframeHide=a.prototype.iframePostMessage=function(a){this.iframeDom&&this.iframeDom.contentWindow&&this.isReadyState&&this.iframeDom.contentWindow.postMessage(a,"*")};a.prototype.notifyCanStartToPreload=
a.prototype.requestAgeVerificationStatus=function(){this.isAlreadyValid?this.fire(206,{status:!0,payload:this.isAlreaydValidPayload}):this.iframePostMessage({name:"avs.statusRequest"})};a.prototype.requestStartVerification=function(){this.isAlreadyValid?this.fire(206,{status:!0,payload:this.isAlreaydValidPayload}):(this.iframePostMessage({name:"avs.verificationStart"}),this.iframeDom&&(this.iframeDom.style.width="100%",this.iframeDom.style.height="100%",this.iframeDom.style.position="fixed"))};a.prototype.onMessage=
function(a){if(a&&"object"===typeof a&&"name"in a&&"avs.onVerificationDone"===a.name)if(this.iframeDom&&this.iframeHide(this.iframeDom),a.data&&a.data.status){var b={isValid:1};"payload"in a.data&&(this.isAlreaydValidPayload=b.payload=a.data.payload);g(b);this.isAlreadyValid=!0;this.fire(206,a.data);c&&(c(!0),c=void 0)}else this.fire(206,void 0),c&&(c(!1),c=void 0)};return a}(Core.Listener),k="avs";e.storageSave=g;e.getInstance=function(f){!a&&f&&("alreadyDone"in f?g({isValid:1}):"url"in f&&(a=new m(f)));
return a};e.startVerification=function(a){c=a?a:void 0;(a=e.getInstance(void 0))&&a.requestStartVerification()};e.fakeAgeVerified=function(c){void 0===c&&(c=!0);if(a)a.onMessage({name:"avs.onVerificationDone",data:{status:c,payload:"fake-payload"}});else alert("No avs instance found")}})(ToolAvs||(ToolAvs={}));
var ToolBroadcast;
(function(a){function e(){b||(b=(new Date).getTime().toString(36)+"."+Math.round(1E7*Math.random()).toString(36));return b}function c(d,a,c){f&&(d={eventId:d,payload:a,fromWindowId:b},c&&(d.toWindowId=c),f.postMessage(d))}var f,b;a.windowIdGet=e;a.setup=a.broadcastDisclaimerAccepted=function(){c(1,{when:Date.now()})};a.broadcastHello=function(a,b){a&&c(2,{userInfo:a,loginDoPosteriorOperation:b})};a.broadcastLogout=function(){c(4,{when:Date.now()})};a.broadcastLogin=a.broadcastRefresh=)(ToolBroadcast||(ToolBroadcast={}));
var ToolBrowser;
(function(a){function p(){return/mobile/i.test(navigator.userAgent)}function q(){return/iphone/i.test(navigator.userAgent)}unction t(){return{sessionStorageLarge:l("sessionStorage"),localStorage:m()}}function l(b){if(b in k)return k[b];k[b]=!1;var d=m(b);if(!d)return!1;for(var c=[],a=0;995>a;a++)c.push("a");try{var f=window[b];if("1"===f.getItem("app-lb"))return k[b]=!0;var u=c.join("");for(a=0;5>a;a++){var h=a.toString();f.setItem("bchk"+h,h+u+
h)}for(a=0;5>a;a++)if(h=a.toString(),f.getItem("bchk"+h)!==h+u+h){d=!1;break}for(a=0;5>a;a++)f.removeItem("bchk"+a.toString());f.setItem("app-lb",d?"1":"0")}catch(w){return!1}return k[b]=d}function m(b){if(!("JSON"in window))return!1;b=b||"localStorage";if(!(b in window))return!1;try{var a=window[b];a.setItem("__storage_test__","__storage_test__xxxx yyyyy ");var c=a.getItem("__storage_test__");a.removeItem("__storage_test__");return"__storage_test__xxxx yyyyy "===c?!0:!1}catch(e){return!1}}ar n=!1;a.vrIsSupportedImmersiveOnly=!1;a.vrIsSupportedLegacyVrDisplay=!1;a.userAgentDataFull=void 0;var v=!1,k={};a.init=function(){"getVRDisplays"in navigator&&navigator.getVRDisplays&&navigator.getVRDisplays().then(function(b){0<b.length&&(n=a.vrIsSupportedLegacyVrDisplay=!0)});if("xr"in window.navigator&&window.navigator.xr&&"isSessionSupported"in window.navigator.xr){var b=window.navigator.xr.isSessionSupported("immersive-vr");
b.then(function(b){b&&(a.vrIsSupportedImmersiveOnly=b,/ VR/i.test(navigator.userAgent)&&(n=!0))});b["catch"](function(){})}};a.getTimezoneOffset=a.userAgentDataInit=function(){a.userAgentDataFull||"userAgentData"in navigator&&navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues(["platformVersion","model","fullVersionList","architecture"]).then(};a.getLanguage=function(){if(navigator.language)return navigator.language.toLowerCase().substring(0,
2);if("userLanguage"in navigator&&navigator.userLanguage)return navigator.userLanguage.toLowerCase().substring(0,2);if(-1!=navigator.userAgent.indexOf("[")){var b=navigator.userAgent.indexOf("["),a=navigator.userAgent.indexOf("]");return navigator.userAgent.substring(b+1,a).toLowerCase()}return""};a.isMobile=p;a.isMacOsX=function(){return/Mac\s+OS\s+X/i.test(navigator.userAgent)};a.isVirtualRealitySupported=function(){return n};a.isExtraBrowser=function(){return"webdriver"in navigator&&navigator.webdriver?
!0:!1};a.isVirtualRealitySupportedJsOnly=a.isIPhone=q;a.isIPhoneIos15=function(){return/iphone.*os\s*15/i.test(navigator.userAgent)};a.isAndroid=function(){return/android/i.test(navigator.userAgent)};a.isIpad=r;a.isMobileiOS=function(){return p()&&(q()||r())};a.isTouch=function(){if("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)return!0;var b="(".concat(["-webkit-","-moz-","-o-","-ms-"].join("touch-enabled),("),
"touch-enabled)");return window.matchMedia(b).matches};a.performanceNow=function(){return"performance"in window?performance.now():(new Date).getTime()};a.featureSupportedGetIfNotAlreadySent=a.featureSupportedGet=t;a.isStorageSupportMinSizeSession=a.isStorageSupportMinSize=l;a.isStorageSupported=m;a.isUaMobile=a.redirectToUrl=a.reloadPage=
function(b){void 0===b&&(b=!1);document.location.reload(b)};a.isPageHidden=function(){if("undefined"!==typeof document.hidden)var b="hidden";else if("undefined"!==typeof document.mozHidden)b="mozHidden";else if("undefined"!==typeof document.msHidden)b="msHidden";else if("undefined"!==typeof document.webkitHidden)b="webkitHidden";else return!1;return document[b]};a.isModePortraitFromViewPort=function(){var b=g();return b.height>b.width};a.passwordCredentialSupported=function(){if(!("PasswordCredential"in
window&&window.PasswordCredential))return!1;var b=navigator.userAgent.match(/Chrome\/([0-9.]+)/i);b=b?parseInt(b[1],10):void 0;return void 0===b||75>b?!1:!0};a.viewPortSizeSurface=function(){var b=g();return{width:b.width,height:b.height,surface:b.width*b.height}};a.viewPortSize=g;a.isViewPortSizeInFullscreen=function(b){return window.screen.width==b.width&&window.screen.height==b.height};a.isElementInViewportFull=function(b){if(!b)return!1;b=b.getBoundingClientRect();var a=g();return 0<=b.top&&0<=
b.left&&b.bottom<=a.height&&b.right<=a.width};a.isElementInViewportOrAbove=function(b,a){void 0===a&&(a=0);if(!b)return!1;var c=b.getBoundingClientRect(),d=g();return 0<=c.right&&c.bottom<=d.height+a&&c.right<=d.width};a.isElementInViewportPartial=function(b,a){void 0===a&&(a=0);if(!b)return!1;var c=b.getBoundingClientRect(),d=g();return 0<=c.top&&0<=c.left&&c.top<=d.height&&c.left<=d.width?!0:0<=c.bottom&&0<=c.right&&c.bottom<=d.height+a&&c.right<=d.width};a.getElementPixelVisibleWithinViewport=
function(b){if(!b)return-1;var a=b.getBoundingClientRect(),c=g();return a.top>=c.height?0:0>=a.top?Math.min(Math.max(a.top+b.offsetHeight,0),c.height):Math.min(c.height-a.top,b.offsetHeight)};a.loadSvgUseListFromSelector=function(b){if(b=document.querySelectorAll(b))for(var a=0;a<b.length;a++){var c=b[a],e=c.getAttribute("data-href");e&&(c.setAttribute("href",e),c.setAttributeNS("http://www.w3.org/1999/xlink","href",e),c.removeAttribute("data-href"))}};a.loadAsyncImageCached=function(a){var b=$.Deferred(),
c=new Image;c.onload=function(){b.resolve()};c.onerror=function(){b.reject()};c.src=a;return b};a.loadAsyncStyleCssCached=function(a){var b=$.Deferred(),c=document.createElement("link");c.type="text/css";c.href=a;(function(){var a=c.relList;return!!(a&&a.supports&&a.supports("preload"))})()?(c.rel="preload",c.as="style",c.media="all",c.onload=function(){c.onload=null;c.rel="stylesheet";b.resolve()}):(c.rel="stylesheet",c.media="only x",c.onload=;
c.onerror=function(){b.reject()};document.head.appendChild(c);return b};a.loadAsyncScriptJsCached=function(a,d){var b=$.Deferred(),e=document.createElement("script");d&&"crossOriginAnonymous"in d&&d.crossOriginAnonymous&&e.setAttribute("crossorigin","anonymous");e.onload=e.onerror=function(a){d&&"alwaysResolve"in d&&d.alwaysResolve?b.resolve(!1):b.reject()};e.src=a;document.head.appendChild(e);return b};(function(b){function d(){return"orientation"in window}
function c(){return d()?window.orientation:a.isModePortraitFromViewPort()?0:90}var e={};b.hasSupport=d;b.hasSupportEvent=b.getValue=c;b.saveCurrentSize=function(){var b=c(),d=a.viewPortSizeSurface();if(b in e&&e[b].surface>d.surface)return!1;e[b]=d;return!0}})(a.Orientation||(a.Orientation={}));(function(a){a.setItem=function(a,b,e,f,g,h){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))throw Error("Invalid key name: "+a);e=Infinity===
e?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+e;document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+e+(g?"; domain="+g:"")+(f?"; path="+f:"")+(h?"; secure":"");return!0};a.getItem=)(a.Cookie||(a.Cookie={}));(function(a){a.update=function(a,b,e,f){1!==a&&"history"in window&&history&&(2===
a?history.pushState(b,e,f):3===a&&history.replaceState(b,e,f),document.title=e)}})(a.History||(a.History={}))})(ToolBrowser||(ToolBrowser={}));
var __extends=this&&this.__extends||function(){var f=function(e,a){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,d){b.__proto__=d}||function(b,d){for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&(b[a]=d[a])};return f(e,a)};return function(e,a){function b(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");f(e,a);e.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}(),
ToolCam2camFeedback;
(function(f){var e=function(a){function b(d,b){var c=a.call(this)||this;c.maxStepLimit=3;c.currentStep=ToolPreference.getItemInt(48);c.stepCount=c.currentStep;c.initialWidth=0;c.initialHeight=0;c.referenceWidth=0;c.referenceHeight=0;c.feedbackVideoPlayer=$(d,b);return c}__extends(b,a);b.prototype.init=function(){var d=this;this.feedbackVideoPlayer.length&&(this.initialWidth=Math.round(this.feedbackVideoPlayer.width()),this.initialHeight=Math.round(this.feedbackVideoPlayer.height()),this.referenceWidth=
100,this.referenceHeight=75,ToolBrowser.isMobile()&&(this.referenceWidth=50,this.referenceHeight=37.5),this.setDimensionsTimeout(0),this.feedbackVideoPlayer.unbind("click").bind("click",)};b.prototype.updateInitialWidth=function(a){this.initialWidth=a};b.prototype.updateInitialHeight=function(a){this.initialHeight=a};b.prototype.setDimensionsTimeout=function(a){this.feedbackVideoPlayer.animate({width:this.initialWidth+Math.round(this.referenceWidth*
this.currentStep)+"px",height:this.initialHeight+Math.round(this.referenceHeight*this.currentStep)+"px"},a,};b.prototype.cam2camFeedbackResize=function(){this.currentStep=this.stepCount%this.maxStepLimit+1;this.setDimensionsTimeout(400);var a=ToolPreference.getInstance();a.setItem(48,this.currentStep);a.save({category:"Settings",action:"SizeChanged",name:"Value"+this.currentStep});this.stepCount++};return b}(Core.Listener);f.Manager=
e})(ToolCam2camFeedback||(ToolCam2camFeedback={}));
var ToolChat;
(function(e){e.performerInfoUpdateUi=function(a,d,b,c){void 0===c&&(c="");a.length&&(a.find(".js-performer-nickname").text(d),b.categoryTitle&&a.find(".js-performer-category").text(b.categoryTitle),"undefined"!==typeof b.ratingNote&&"undefined"!==typeof b.ratingNbVote&&0<=b.ratingNbVote&&(a.find(".js-performer-rating-title").attr("title",Translation.tr("infoPerformerNoteReview")+" : "+b.ratingNote),a.find(".js-performer-rating-nb-star-value").removeClass("star0").removeClass("star05").removeClass("star10").removeClass("star15").removeClass("star20").removeClass("star25").removeClass("star30").removeClass("star35").removeClass("star40").removeClass("star45").removeClass("star50").addClass("star".concat(b.ratingNoteX10)),0!=
parseInt(b.ratingNote,10)?(a.find(".js-performer-rating-count > strong").text("".concat(b.ratingNbVote)),a.find(".js-performer-rating-count").removeClass("isHidden")):a.find(".js-performer-rating-count").addClass("isHidden")),b.age&&a.find(".js-performer-age > strong").text(b.age),"undefined"!==typeof b.fanCount&&a.find(".js-performer-fan-count > strong").text(b.fanCount),c&&c.length&&(a=a.find(".js-performer-profile-img"),a.length&&(a.attr("src",c),a.hasClass("is-hidden")&&a.removeClass("is-hidden"))))};
e.performerIconSVGToImg=function(a){var d=ToolApp.svgMainGetUrl()+"#profile";d='<svg class="iconxl3"><use xlink:href="'+d+'" href="'+d+'"></use></svg>';var b=$(".js-performer-profile-img");if(a){var c=b.find(".iconxl3");c.length?c.replaceWith('<img src="'+a+'">'):(c=b.find("img"),c.length?c.attr("src",a):b.html(d))}else b.html(d)};e.createActionPanelSvgIconMarkup=function(a){var d=ToolApp.IMAGE_ACTION_PANEL_SVG+"#"+a;return'<svg role="img"><use class="'+a+'" xlink:href="'+d+'" href="'+d+'"></use></svg>'};
(function(a){a.messageOffensiveCheck=function(a,b,c,e,f){return Core.Ajax.post("/performerAction/messageOffensiveCheck",{showId:a,performerId:b,userNickname:c,isPrivate:e,message:f})}})(e.Ajax||(e.Ajax={}))})(ToolChat||(ToolChat={}));
var ChromeSuggestTool;(function(a){a.init=function(){if("undefined"!==typeof ChromeSuggestManager){var a=new ChromeSuggestManager.ChromeSuggest,b={parentContainer:"body",delay:30,translation:{textUserChromeSuggest:Translation.tr("textUserChromeSuggest")}};a.init(b)}}})(ChromeSuggestTool||(ChromeSuggestTool={}));
var __extends=this&&this.__extends||function(){var d=function(c,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,e){b.__proto__=e}||function(b,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(b[a]=e[a])};return d(c,a)};return function(c,a){function b(){this.constructor=c}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(c,a);c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}(),
EmojiTool;
(function(d){var c=function(a){function b(){return a.call(this)||this}__extends(b,a);b.getInstance=b.prototype.init=function(a){this.handleInit(a);this.emojiLibrary=new UnicodeEmojiV2.Library(a);this.emojiLibrary.init()};b.prototype.handleInit=function(a){if("undefined"!==typeof window.UnicodeEmojiV2&&!$.isEmptyObject(a.emojiCategoryList)){var b=this;a.onEvent&&(a.onEvent=void 0);a.onEvent=function(a,c){a===UnicodeEmojiV2.Library.INTERNAL_EVENT_TOGGLE_CONTAINER_VISIBILITY&&(c.visible?
(b.onPanelVisible(),b.fire(200)):(b.onPanelHidden(),b.fire(201)))}}};b.prototype.onPanelHidden=function(){ToolApp.jQueryNiceScrollPluginLoaded()&&$(UnicodeEmojiV2.Library.TAB_CONTENT_CONTAINER_SELECTOR).getNiceScroll().remove()};b.prototype.onPanelVisible=function(){ToolApp.jQueryNiceScrollPluginLoaded()&&$(UnicodeEmojiV2.Library.TAB_CONTENT_CONTAINER_SELECTOR).niceScroll({cursorcolor:"#fff",cursorborder:"none",background:"none",horizrailenabled:!1})};b.prototype.destroy=return b}(Core.Listener);d.Manager=c;d.isSupported=function(){return"undefined"!==typeof window.UnicodeEmojiV2?UnicodeEmojiV2.Library.hasSupport():!1};d.getCategoryLabelList=function(){return{recentlyUsed:Translation.tr("helpGenericCategoryFrequentlyUsed"),people:Translation.tr("helpGenericCategoryPeople"),nature:Translation.tr("helpGenericCategoryNature"),food:Translation.tr("helpGenericCategoryFood"),travel:Translation.tr("helpGenericCategoryTravel"),
activity:Translation.tr("helpGenericCategoryActivity"),objects:Translation.tr("helpGenericCategoryObjects"),symbols:Translation.tr("helpGenericCategorySymbols")}}})(EmojiTool||(EmojiTool={}));
var ToolFooter;(function(a){var b;a.show=a.hide=var c=!1;a.init=function(){c||(b=new ModuleAccordionFooter.Manager($(".group-accordion-footer"),{allowMultiExpand:!0,isDisabled:!0}),b.init(),c=!0,ToolApp.event.fire(208))}})(ToolFooter||(ToolFooter={}));
var __extends=this&&this.__extends||function(){var d=function(c,b){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e])};return d(c,b)};return function(c,b){function f(){this.constructor=c}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(c,b);c.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)}}(),
ToolBrowserFullscreen;
(function(d){var c;d.EVENT_CHANGE="change";d.EVENT_ERROR="error";var b=function(b){function a(){var a=b.call(this)||this;a.enabled=!1;a.updateLoadedState();a.enabled&&(screenfull.on("change",function(){a.fire(d.EVENT_CHANGE,screenfull.isFullscreen)}),screenfull.on("error",);return a}__extends(a,b);a.prototype.isLoaded=function(){return"screenfull"in window&&"object"===typeof screenfull&&"on"in screenfull};a.prototype.updateLoadedState=a.prototype.canGoFullscreen=a.prototype.enter=function(a){this.canGoFullscreen()&&(a||(a=void 0),screenfull.request(a))};a.prototype.exit=a.prototype.isFullscreenEnabled=function(){if(this.canGoFullscreen())return screenfull.isFullscreen};return a}(Core.Listener);d.Manager=b;d.getInstance=function(){c||(c=new b,ToolApp.event.on(15,function(b){c.updateLoadedState()}));return c}})(ToolBrowserFullscreen||
(ToolBrowserFullscreen={}));
var ToolLogin;
(function(h){function n(){var c=ToolBrowser.isStorageSupportMinSizeSession();c={asJson:1,screen_w:screen.width,screen_h:screen.height,timezone:ToolBrowser.getTimezoneOffset(),browserLanguage:ToolBrowser.getLanguage(),saveNickname:1,pageLastSeenUri:"",abDetected:"advertisingJsLoaded"in window&&window.advertisingJsLoaded?0:1,browserSStorageLargeSupported:c?1:0,browserVrImmersiveSupported:ToolBrowser.vrIsSupportedImmersiveOnly?1:0,browserVrLegacyGetDeviceSupported:ToolBrowser.vrIsSupportedLegacyVrDisplay?1:
0,browserJsFullInfo:JSON.stringify(ToolBrowser.userAgentDataFull),grecaptchaLoaded:0,hashData:"",nickname:"",password:"",passwordEncoded:"",token:"",credentialApiToken:"",webauthSupport:-1,webauthPlatform:-1,stayConnected:0};"browserNoModuleSupported"in window&&window.browserNoModuleSupported&&(c.browserNoModuleSupported=1);"location"in document&&document.location&&"href"in document.location&&"origin"in document.location&&(c.pageLastSeenUri=document.location.href.substring(document.location.origin.length));
return c}function l(c){var b=WebAuthTool.methodAuthGet();if(b&&WebAuthTool.isSupportedAndEnabled()&&b&&"payload"in b&&b.payload&&"method"in b&&b.method){var d=b.method;if(4===d||3===d)if(b=AppUserLogin.loginStartPromise(b.payload,"x-layer",!1,!0,n())){b.fail(function(){c()});return}}c()}unction t(c,b){var d=Core.Ajax.post("/login/popup/",{layer:1}),k,h=function(a){return a?"google"in a&&a.google?(ToolBrowser.redirectToUrl(Application.Config.url.root+"/login/?from=ajax-prepare-captcha-google-required"),
!0):"equation"in a&&a.equation?(ToolBrowser.redirectToUrl(Application.Config.url.root+"/login/?from=ajax-prepare-captcha-eq-required"),!0):!1:!1};c.on(2,function(){if(d){var a=d;d=void 0;a.jqXHR.abort()}c.destroy()});c.on(7,function(a,c){a.close();ToolRegister.layerOpen(11,{nickname:c.nickname,password:c.password,canBeClosed:c.canBeClosed})});c.on(5,function(a,c){var b=AppUserLogin.loginStartPromise("",c.nickname,!0,!1,n());b&&(a.submitLock(),b.fail(function(){a.submitUnlock()}))});var m=-1,p=-1,
l=function(a,b){var g=n();g.nickname=b.nickname;g.password=b.password;g.token=k.loginForm.securityToken;g.credentialApiToken=b.credentialApiToken;g.webauthSupport=m;g.webauthPlatform=p;g.stayConnected=b.stayConnected?1:0;if("passwordKey"in k&&k.passwordKey&&"WebAuthnys"in window&&"encodeListKeyStr"in WebAuthnys&&b.password){var d=StringTool.Utf8.encodeToUtf8Bytes(b.password);d=WebAuthnys.encodeListKeyStr(d,k.passwordKey);g.passwordEncoded="b64:"+StringTool.Base64.encodeToBase64Bytes(d);g.password=
""}ToolBrowser.performanceNow();d=Core.Ajax.post("/login/submit/",g);d.fail(function(b){c.errorSystemDisplay(b.code,b.msg);a.submitUnlock()});d.done(function(e){ToolBrowser.performanceNow();if("success"in e&&e.success){var d=function(a){a&&WebAuthTool.methodAuthSet({payload:"none",method:1,nickname:g.nickname});ToolBroadcast.broadcastLogin();"url"in e&&e.url?(a=e.url.indexOf("#"),0<a&&(e.url=e.url.substring(0,a)),ToolBrowser.redirectToUrl(e.url)):(ToolApp.reloadCleanParameterWithoutReloading(),ToolApp.isCurrentPageIsLogout()?
ToolBrowser.redirectToUrl(ToolApp.Url.getOnlineList()):ToolBrowser.reloadPage(!0))};if(ToolBrowser.passwordCredentialSupported()&&""===b.credentialApiToken&&"credentialPassword"in e&&"hash"in e.credentialPassword){var u=new PasswordCredential({password:b.password,name:q(b.nickname,e.credentialPassword.hash),id:b.nickname});navigator.credentials.store(u).then(function(a){WebAuthTool.methodAuthSet({payload:e.credentialPassword.hash,method:1,nickname:g.nickname});d(!1)})["catch"](}else d(!0)}else"captcha"in
e.loginForm&&h(e.loginForm.captcha)||("securityToken"in e.loginForm&&e.loginForm.securityToken&&(k.loginForm.securityToken=e.loginForm.securityToken),"error"in e.loginForm&&e.loginForm.error?(a.submitUnlock(),4==e.loginForm.error.fieldId?c.errorSystemDisplay(11175,e.loginForm.error.msg):c.errorFieldDisplay(e.loginForm.error)):a.submitUnlock())})};c.on(1,function(a,b){a.submitLock();k?l(a,b):d?d.done(:ToolBrowser.redirectToUrl(Application.Config.url.root+"/login/?from=ajax-submit-error2")});
var f={nickname:"",password:"",stayConnected:!1,passwordVisible:!0,credentialApiToken:"",webauthVisible:!1,canBeClosed:!0};WebAuthTool.isSupportedAndEnabled()&&(3==Application.Config.wl.webauthSupport&&(f.webauthVisible=!0),WebAuthTool.isPlatformAuthenticatorAvailable().done(function(a){a&&1===Application.Config.wl.webauthSupport?c.webauthSetVisibility(!0):a||2!==Application.Config.wl.webauthSupport||c.webauthSetVisibility(!0)}));b&&(b.nickname&&!f.nickname&&(f.nickname=b.nickname),b.password&&(f.password=
b.password),"canBeClosed"in b&&void 0!==b.canBeClosed&&(f.canBeClosed=b.canBeClosed));c.open(f);d.done(function(a){d=void 0;"captcha"in a.loginForm&&h(a.loginForm.captcha)||(k=a,c.nicknameUpdateIfEmpty(a.loginForm.defaultNickname))});d.fail(function(a){if(d){var b="";a&&"code"in a&&(b="-"+a.code.toString(10));ToolBrowser.redirectToUrl(Application.Config.url.root+"/login/?from=ajax-prepare-error"+b)}});"WebAuthnys"in window?WebAuthnys.isSupported()?(m=1,"PublicKeyCredential"in window&&window.PublicKeyCredential&&
(f=PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable(),f.then(,f["catch"](function(){p=5}))):m=0:m=-2;if(ToolBrowser.passwordCredentialSupported()){var r=function(a){if(!c.submitIsLocked()&&a.name&&a.password){var b={nickname:a.name,password:a.password,webauthVisible:!1,passwordVisible:!1,stayConnected:!0,credentialApiToken:"",canBeClosed:!0};a=a.name;var d="",f=a.lastIndexOf("#pca1:");if(0<f){var e=a.substring(0,f);d=a.substring(f+6)}else e=a;b.credentialApiToken=
d;b.nickname=e;c.nicknameUpdate(b.nickname);c.fire(1,b)}};navigator.credentials.get({password:!0,mediation:"silent"}).then(function(a){a&&"password"==a.type&&(k?r(a):d&&d.done()})}}h.posteriorOperation=function(){var c={screen_w:screen.width,screen_h:screen.height,timezone:ToolBrowser.getTimezoneOffset(),browserLanguage:ToolBrowser.getLanguage()};Core.Ajax.post("/login/postOperation/",c);ToolBroadcast.broadcastLogin()};h.userLocalStoredNickname=function(){var c=WebAuthTool.methodAuthGet();
return c&&"nickname"in c&&c.nickname?c.nickname:""};h.webauthAutoStartIfSaved=l;h.layerOpen=function(c){ToolBrowser.userAgentDataInit();var b=new Layer.LoginForm;if(!Layer.isReady())return ToolBrowser.redirectToUrl(Application.Config.url.root+"/login/?from=layer-not-ready"),b;l(;return b};h.passwordCredentialGenName=q})(ToolLogin||(ToolLogin={}));
var ToolMenu;
(function(a){a.currentScrollTop=0;var g,h,k,l,f,c,e;a.hideAll=function(){a.user&&a.user.hide();a.online&&a.online.hide();a.chat&&a.chat.hide();a.chatBio&&a.chatBio.hide();a.media&&a.media.hide()};a.hasOneMenuOpen=function(){return a.user&&a.user.isOpen()||a.online&&a.online.isOpen()||a.chat&&a.chat.isOpen()||a.chatBio&&a.chatBio.isOpen()||a.media&&a.media.isOpen()?!0:!1};a.setBackgroundScrollState=function(d){if(!1!==ToolBrowser.isMobile()){var c=$("html");if(!c.hasClass("is-scroll-disabled")!==d){var b=
$("body");d?(c.removeClass("is-scroll-disabled"),b.removeClass("is-scroll-disabled"),ToolBrowser.isMobileiOS()?b.scrollTop(a.currentScrollTop):c.scrollTop(a.currentScrollTop)):(ToolBrowser.isMobileiOS()?a.currentScrollTop=b.scrollTop():a.currentScrollTop=c.scrollTop(),c.addClass("is-scroll-disabled"),b.addClass("is-scroll-disabled"),b.scrollTop(a.currentScrollTop))}}};a.pageHasJustChanged=a.init=function(){a.user=new ModuleUserMenu.UserMenuManager("sidebar-user");ToolBrowser.isMobile()||
(a.media=new ModuleMediaMenu.MediaMenuManager("sidebar-media"));g=new Date;h=new Date;k=new Date;l=new Date(1E6);e=c=f=0;var d=$(".action-visibility-switch-sidebar-user");d.bind("click",function(b){b.preventDefault();b.stopPropagation();a.online&&a.online.hide();a.chat&&a.chat.hide();a.chatBio&&a.chatBio.hide();a.media&&a.media.hide();ToolUi.isEventToFast(g,160)?g=new Date(1E6):(a.user.toggle(),!1===a.user.isOpen()&&f&&(clearTimeout(f),f=0))});d.bind("mouseenter",function(b){a.user.isOpen()||ToolUi.isEventToFast(l,
250)||(ToolBrowser.isMobile()?(g=new Date,a.user.show()):f=setTimeout(function(){g=new Date;a.user.show()},6E4),b.preventDefault(),b.stopPropagation())});d.bind("mouseleave",function(a){f&&(clearTimeout(f),f=0)});d=$(".action-visibility-switch-sidebar-model-tools-chat");d.bind("click",function(b){b.preventDefault();b.stopPropagation();ToolUi.isEventToFast(h,200)?h=new Date(1E6):(a.user.hide(),a.media&&a.media.hide(),a.chat.toggle(),!1===a.chat.isOpen()&&c&&(clearTimeout(c),c=0))});d.bind("mouseenter",
function(b){a.chat.isOpen()||(ToolBrowser.isMobile()?(h=new Date,c=setTimeout(function(){a.chat.show()},0)):c=setTimeout(function(){h=new Date;a.chat.show()},6E4),b.preventDefault(),b.stopPropagation())});d.bind("mouseleave",;d=$(".action-visibility-switch-sidebar-model-tools-bio-page");d.bind("click",function(b){b.preventDefault();b.stopPropagation();ToolUi.isEventToFast(k,200)?k=new Date(1E6):(a.user.hide(),a.media&&a.media.hide(),a.chatBio.toggle(),!1===a.chatBio.isOpen()&&
e&&(clearTimeout(e),e=0))});d.bind("mouseenter",function(b){a.chatBio.isOpen()||(ToolBrowser.isMobile()?(k=new Date,e=setTimeout(0)):e=setTimeout(function(){k=new Date;a.chatBio.show()},6E4),b.preventDefault(),b.stopPropagation())});d.bind("mouseleave",;var m=!1;$("div.group-accordeon").bind("click",function(a){if(a.target){var b=$(a.target),c=b.closest(".accordeon-data-header");if(!(0>=c.length||m)){m=!0;var d=$(this);b=b.closest(".item-accordeon");
$(".action-switch",d).html("+");b.hasClass("is-visible")?(b.removeClass("is-visible"),$(".item-accordeon",d).removeClass("is-visible")):($(".item-accordeon",d).removeClass("is-visible"),b.addClass("is-visible"),$(".action-switch",c).html("\u2212"));a.preventDefault();a.stopPropagation();m=!1}}})}})(ToolMenu||(ToolMenu={}));
var ToolMisc;(function(e){e.arrayStringUnique=function(a){for(var c={},b=[],d=0;d<a.length;d++)c[a[d]]||(c[a[d]]=!0,b.push(a[d]));return b};e.jQuerySerializedAsArrayToObject=function(a){for(var c={},b;b=a.shift();)c[b.name]=b.value;return c};(function(a){a.amountWithCurrencyRender=)(e.Ajax||(e.Ajax={}))})(ToolMisc||(ToolMisc={}));
var ToolPerformer;
(function(e){e.urlToBioPage=function(b){return Application.Config.url.root+"/model/"+b.toLowerCase()+"/"};e.urlToChatPage=function(b){return Application.Config.url.root+"/chat/"+b.toLowerCase()+"/"};e.infoUpdateUi=function(b,a,f,c){void 0===c&&(c="");ToolChat.performerInfoUpdateUi(b,a,f,c)};e.iconSVGToImg=function(b){ToolChat.performerIconSVGToImg(b)};(function(b){b.favoriteAdd=function(a){return Core.Ajax.post("/favorite/add/",{performerId:a,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.favoriteRemove=
function(a){return Core.Ajax.post("/favorite/remove/",{performerId:a,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.loveAdd=function(a){return Core.Ajax.post("/performerAction/love/",{performerId:a,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.messageSend=function(a,b,c,d){return Core.Ajax.post("/messaging/sendMessage/",{performerId:a,subject:b,content:c,sessionMessagingId:d,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.reportSend=function(a){return Core.Ajax.post("/performerAction/reportAbuse/",
{performerId:a.performerId,performerNickname:a.performerNickname,reasonId:a.reasonId,content:a.content,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.tip=function(a,b,c,d){a=Core.Ajax.post("/performerAction/tip/",{performerId:a,amount:b,showId:c,uiTypeId:d,csrfProtectionToken:ToolApp.getCsrfProtectionToken()});a.done(function(a){a&&"userInfo"in a&&ToolApp.userInfoUpdateUi(a.userInfo)});return a};b.tipActionPanel=function(a,b,c,d,e){a=Core.Ajax.post("/performerAction/tip/",{performerId:a,
amount:b,showId:c,itemId:d,uiTypeId:e,csrfProtectionToken:ToolApp.getCsrfProtectionToken()});a.done(function(a){a&&"userInfo"in a&&ToolApp.userInfoUpdateUi(a.userInfo)});return a};b.showRating=function(a,b,c,d){return Core.Ajax.post("/performerAction/showRating/",{performerId:a,userConnId:b,note:c,comment:d,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.showRatingTip=function(a,b,c,d,e){return Core.Ajax.post("/performerAction/showRatingTip/",{performerId:a,userConnId:c,showId:b,note:d,
comment:e,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.paidMessageRating=function(a,b,c,d){return Core.Ajax.post("/messaging/ratePurchaseMessage/",{performerId:a,paidMessageId:b,note:c,comment:d,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.vodVipSubscriptionAdd=function(a){return Core.Ajax.post("/video/vipSubscriptionAdd",{performerId:a,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.videoVipGiftedPlayed=function(){var a={csrfProtectionToken:ToolApp.getCsrfProtectionToken()};
return Core.Ajax.post("/user/videoVipGiftedPlayed/",a)};b.speechToTextPredict=function(a,b,c){void 0===c&&(c="");return Core.Ajax.post("/audio/speechToTextPredict/",{base64Audio:a,audioType:b,audioLanguage:c,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})}})(e.Ajax||(e.Ajax={}))})(ToolPerformer||(ToolPerformer={}));
var PIP;
(function(d){var c,e=function(){function a(b,a){this.jElement=$(b);this.playerLoaded=this.isPlayingState=!1;this.config=$.extend({videoWidth:320,videoHeight:240,position:{top:110,right:10}},a||{});this.initPlayerPosition()}a.prototype.createVideoLayerClick=a.prototype.setupVideoEvent=function(b){$(".layerClick",this.jElement).bind("click",};a.prototype.initPlayerPosition=function(){this.config.position&&
(this.config.position.top&&this.jElement.css("top",this.config.position.top),this.config.position.right&&this.jElement.css("right",this.config.position.right),this.config.position.bottom&&this.jElement.css("bottom",this.config.position.bottom),this.config.position.left&&this.jElement.css("left",this.config.position.left))};a.prototype.setupPlayerContainer=function(b){var a=b.profileImage||"";b.showStreamInfo&&b.isOnline&&(a=b.showStreamInfo.liveImg);a.length&&(this.jElement.html('<img src="'+a+'" width="'+
this.config.videoWidth+'" height="'+this.config.videoHeight+'" alt="'+b.nickname+'">'),b.showStreamInfo&&this.setupVideo(b.showStreamInfo))};a.prototype.setupVideo=function(b){var a=this;if(1===b.showType&&"hlsPlaylist"in b&&b.hlsPlaylist){var d='<video id="videoPlayerProfile" class="video-js position-abs" preload="auto" height="'+this.config.videoHeight+'" width="'+this.config.videoWidth+'" poster="'+b.liveImg+'"></video>';$("img",this.jElement).after(d);c=videojs("videoPlayerProfile",{controls:!1,
autoHeight:!0,playsinline:!0,autoplay:!0,nativeControlsForTouch:!1,width:this.config.videoWidth,height:this.config.videoHeight,muted:!0,errorDisplay:!1,textTrackSettings:!1,html5:{nativeTextTracks:!1},children:["mediaLoader","posterImage","bigPlayButton"]});this.createVideoLayerClick();this.setupVideoEvent(b.nickname);c.src(b.hlsPlaylist);b=c.play();if(void 0!==b)b.then(["catch"](function(){c&&c.muted(!0);a.isPlayingState=!1;a.hide()})}};a.prototype.show=function(){this.jElement.removeClass("isHidden")};
a.prototype.hide=a.prototype.isPlaying=function(){return this.isPlayingState};a.prototype.stop=function(){c&&(c.pause(),c.dispose());this.isPlayingState=!1};a.prototype.destroy=return a}();d.Manager=e})(PIP||(PIP={}));
var PollTool;(function(a){a.formToObject=function(a){var c={surveyId:0,rating:0,comment:""};a.serializeArray().forEach(function(b){var a=b.name.split("-")[0];b=b.value;"surveyId"===a&&(c.surveyId=parseInt(b,10));"rating"===a&&(c.rating=parseInt(b,10));"comment"===a&&(c.comment=b)});return c}})(PollTool||(PollTool={}));
var ToolPreference;
(function(e){ar h,f=[1,6,7,8,9,10,11,19,17,18,20,21,23,29,31,46],k=function(){function a(){this.defaultValue={};this.userValue={};this.loadFromApplicationConfig();this.loadFromBrowser();this.initDefaultValue()}a.prototype.initDefaultValue=function(){var c=ToolBrowser.isUaMobile();this.defaultValue[6]=c?0:1};a.prototype.save=a.prototype.loadFromApplicationConfig=function(){Application.Config.setting.userValue instanceof Array&&
(Application.Config.setting.userValue={});this.userValue=Application.Config.setting.userValue;this.defaultValue=Application.Config.setting.defaultValue};a.prototype.clearUserValue=a.prototype.hasCustomValue=a.prototype.loadFromBrowser=function(){if(ToolBrowser.isStorageSupported()&&!this.hasCustomValue()&&!Application.Config.isUserConnected){var c=localStorage.getItem("m3-preference1");
if(c&&(c=JSON.parse(c))){for(var a=0;a<f.length;a++){var b=f[a].toString();this.userValue[b]=c[b]}Application.Config.isUserConnected||19 in this.userValue&&delete this.userValue[19]}}};a.prototype.saveToServer=function(c){return Core.Ajax.post("/preference/submitAjax/",{pref:this.userValue,trackEvent:c})};a.prototype.saveToBrowser=function(){if(ToolBrowser.isStorageSupported()){for(var c={},a=0,b=0;b<f.length;b++){var e=f[b].toString();e in this.userValue&&(c[e]=this.userValue[e],a++)}0>=a?localStorage.removeItem("m3-preference1"):
localStorage.setItem("m3-preference1",JSON.stringify(c))}};a.prototype.getItemUser=function(a,d){var b=a.toString();return b in this.userValue&&null!==this.userValue[b]&&void 0!==this.userValue[b]?this.userValue[b]:d};a.prototype.getItem=function(a,d){var b=a.toString();return b in this.userValue&&null!==this.userValue[b]&&void 0!==this.userValue[b]?this.userValue[b]:b in this.defaultValue?this.defaultValue[b]:d};a.prototype.getItemInt=function(a,d){var b=this.getItem(a,void 0);if(void 0===b)return d;
b=parseInt(b,10);return isNaN(b)?d:b};a.prototype.setItem=function(a,d){var b=a.toString();null===d||void 0===d?b in this.userValue&&delete this.userValue[b]:this.userValue[b]=d};a.prototype.overwriteUserValue=function(a){this.userValue=a};return a}();e.Manager=k;e.getInstance=g;e.getItemInt=function(a){return g().getItemInt(a)};e.getItem=)(ToolPreference||(ToolPreference={}));
var ToolRegister;
(function(k){function l(b,c,d){void 0===c&&(c=11);var p=Application.Config.wl.layerLayoutId?Application.Config.wl.layerLayoutId:4;b.on(2,function(e,c){b.destroy();m=c.nickname;n=c.email});c={nickname:m,password:"",email:n,messageIdToUse:c,webauthVisible:!1,webauthDone:!1,cguAccepted:!1,layoutId:p,canBeClosed:!0};0!==Application.Config.wl.webauthSupport&&(3===Application.Config.wl.webauthSupport?c.webauthVisible=WebAuthTool.isSupportedAndEnabled():WebAuthTool.isSupportedAndEnabled()&&WebAuthTool.isPlatformAuthenticatorAvailable().done(function(e){e&&
1===Application.Config.wl.webauthSupport?b.webauthSetVisibility(!0):e||2!==Application.Config.wl.webauthSupport||b.webauthSetVisibility(!0)}));d&&(d.nickname&&(c.nickname=d.nickname),d.password&&(c.password=d.password),d.email&&(c.email=d.email),"canBeClosed"in d&&void 0!==d.canBeClosed&&(c.canBeClosed=d.canBeClosed));h="";b.open(c);b.on(2,;b.on(6,function(e,c){b.close();ToolLogin.layerOpen({nickname:c.nickname,password:c.password,canBeClosed:c.canBeClosed})});b.on(1,function(e,c){e.submitLock();
f&&(f.jqXHR.abort(),f=void 0);var b={asJson:1,csrfProtectionToken:ToolApp.getCsrfProtectionToken(),screen_w:screen.width,screen_h:screen.height,timezone:ToolBrowser.getTimezoneOffset(),browserLanguage:ToolBrowser.getLanguage(),nickname:c.nickname,password:c.password,email:c.email,confirm:c.cguAccepted?1:0,passwordEncoded:"",passwordEncodedId:"",keyIdB64u:h,isExtra:ToolBrowser.isExtraBrowser()?1:0,browserSStorageLargeSupported:ToolBrowser.isStorageSupportMinSizeSession()?1:0,performerIdLastSeen:0,
pageLastSeenUri:"pathname"in document.location?document.location.pathname:"",registerShowAsLayerOnLoad:0,webauthDataExt:void 0};"registerForm"in Application&&Application.registerForm&&"registerShowAsLayerOnLoad"in Application.registerForm&&Application.registerForm.registerShowAsLayerOnLoad&&(b.registerShowAsLayerOnLoad=Application.registerForm.registerShowAsLayerOnLoad);"WebAuthTool"in window&&(b.webauthDataExt=WebAuthTool.methodAuthGet());var a=ToolStorage.performerRecentGetLastSeen();a&&(b.performerIdLastSeen=
a);""!==b.keyIdB64u&&(b.password="");var d="";""!==b.password&&(a=q(b.password),void 0!==a&&(d=b.password,b.passwordEncoded=a.payload,b.passwordEncodedId=a.keyId,b.password=""));(a=$("#form-register input[name=cf-turnstile-response]"))&&0<a.length&&(b.captchaValue=a.val());(a=$("#form-register .g-recaptcha-response"))&&0<a.length&&(b.captchaValue=a.val());a=Core.Ajax.post("/register/submit/",b);a.done(function(a){if("success"in a&&a.success){"webAuth"in a&&a.webAuth&&"payload"in a.webAuth&&a.webAuth.payload?
WebAuthTool.methodAuthSet({payload:a.webAuth.payload,method:a.webAuth.authMethod,nickname:b.nickname}):h&&WebAuthTool.methodAuthSet({payload:"register",method:99,nickname:b.nickname});var c=function(){e.close();(new Layer.Loader).open();"url"in a&&a.url?ToolBrowser.redirectToUrl(a.url):ToolBrowser.reloadPage(!0)};if(ToolBrowser.passwordCredentialSupported()&&"credentialPassword"in a&&"hash"in a.credentialPassword){var f=new PasswordCredential({password:d,name:ToolLogin.passwordCredentialGenName(b.nickname,
a.credentialPassword.hash),id:b.nickname});navigator.credentials.store(f).then(["catch"](}else c()}else if("suggestNickname"in a&&a.suggestNickname&&"data"in a.suggestNickname&&0<a.suggestNickname.data.length)e.errorFieldDisplay(a),e.suggestedNicknameSet(a.suggestNickname),e.nicknameStateNotOk();else{if("errorfield"in a&&"object"===typeof a.errorfield)for(f in a.errorfield)if(a.errorfield.hasOwnProperty(f)){e.errorFieldDisplay(a);return}"successField"in a&&"nickname"in
a.successField&&a.successField.nickname&&e.nicknameStateOk();"errorCode"in a&&"errorMsg"in a&&a.errorMsg&&a.errorCode?e.errorSystemDisplay(a.errorCode,a.errorMsg):e.errorSystemDisplay(11180,"Unexpected error")}});a.fail(;a.always(function(){e.submitUnlock()})});b.on(5,function(b,c){b.submitLock();var e=WebAuthTool.configAuthTypeIntToString(Application.Config.wl.webauthSupport);(e=AppUserRegister.registerNewKey(e,c.nickname))?(e.done(function(a){if(a&&
"device"in a&&(a=a.device,"keyIdB64u"in a&&a.keyIdB64u)){h=a.keyIdB64u;b.webauthSetStatus(!0);return}b.errorSystemDisplay(11176,"Unexpected error")}).fail(function(a){b.errorSystemDisplay(a.code,a.msg);if("extra"in a&&a.extra&&(a=a.extra,"errorfield"in a&&"object"===typeof a.errorfield))for(var c in a.errorfield)if(a.errorfield.hasOwnProperty(c)){b.errorFieldDisplay(a);break}}),e.always(function(){b.submitUnlock()})):b.submitUnlock()});b.on(4,function(c,d,g){f&&(f.jqXHR.abort(),c.nicknameStateLoading(!0),
c.passwordStateLoading(!0),c.emailStateLoading(!0));switch(d.field){case "nickname":c.nicknameStateLoading();break;case "password":c.passwordStateLoading();break;case "email":c.emailStateLoading()}f=AppUserRegister.Ajax.validate(d);f.done(function(a){b.errorFieldDisplay(a);"suggestNickname"in a&&a.suggestNickname&&b.suggestedNicknameSet(a.suggestNickname)}).fail(;f.always(});AppUserRegister.Ajax.passwordKey().done(function(b){b&&
("targetUrl"in b&&b.targetUrl?ToolBrowser.redirectToUrl(b.targetUrl):"passwordKey"in b&&(g=b.passwordKey,ToolApp.sessionKeepOpenInit()))})}function q(b){if(g&&"WebAuthnys"in window&&"encodeListKeyStr"in WebAuthnys){b=StringTool.Utf8.encodeToUtf8Bytes(b);var c=g.indexOf("-");if(0<c){var d=g.substring(c+1,g.length);c=g.substring(0,c)}else d=g,c="";b=WebAuthnys.encodeListKeyStr(b,d);return{payload:"b64:"+StringTool.Base64.encodeToBase64Bytes(b),keyId:c}}}var f,g,h,m="",n="";k.loginWebauthOrRegister=
function(b,c){void 0===b&&(b=11);var d=ToolLogin.userLocalStoredNickname();if(d&&"string"==typeof d&&0<d.length)return ToolLogin.layerOpen(c);var f=new Layer.RegisterForm;ToolLogin.webauthAutoStartIfSaved(;return f};k.layerOpen=function(b,c){void 0===b&&(b=11);var d=new Layer.RegisterForm;if(!Layer.isReady())return ToolBrowser.redirectToUrl(Application.Config.url.root+"/register/?from=layer-not-ready"),d;l(d,b,c);return d}})(ToolRegister||(ToolRegister={}));
var ToolReportAbuse;(function(b){b.sendReport=function(a){if(!ToolApp.redirectToLoginIfNotConnected()){var c=new Layer.ReportAbuse;a={performerId:a.id,performerNickname:a.nickname,reasonId:0,content:""};c.on(Layer.EVENT_SUBMIT,function(a,b){a.loaderShow();ToolPerformer.Ajax.reportSend(b).done(.fail(.always(});ToolMenu.hideAll();c.open(a)}}})(ToolReportAbuse||(ToolReportAbuse={}));
var ToolSecurity;
(function(e){function g(d,a){void 0===a&&(a=0);if("imul"in Math){for(var b=3735928559^a,c=1103547991^a,e=0,f;e<d.length;e++)f=d.charCodeAt(e),b=Math.imul(b^f,2654435761),c=Math.imul(c^f,1597334677);b=Math.imul(b^b>>>16,2246822507);b^=Math.imul(c^c>>>13,3266489909);c=Math.imul(c^c>>>16,2246822507);c^=Math.imul(b^b>>>13,3266489909);return 4294967296*(2097151&c)+(b>>>0)}}e.fnv32a=function(d){for(var a=2166136261,b=0;b<d.length;b++)a^=d[b],a+=(a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24)&4294967295;return a>>>
0};e.cyrb53=g;e.strToHash=function(d){var a=g(d);if(void 0===a){a=0;var b;if(0!==d.length)for(b=0;b<d.length;b++){var c=d.charCodeAt(b);a=(a<<5)-a+c;a|=0}}return a.toString(36)}})(ToolSecurity||(ToolSecurity={}));
var __extends=this&&this.__extends||),
SpeechToTextTool;
(function(e){var d=function(b){function a(c){var a=b.call(this)||this;a.speechToTextLibrary=new SpeechToText.Library(c);a.predictionLanguage="";a.isCurrentlyRecording=!1;a.initEventListener();return a}__extends(a,b);a.prototype.initEventListener=function(){var c=this;this.speechToTextLibrary.on(1,;this.speechToTextLibrary.on(2,function(a,b){c.fire(2);c.isCurrentlyRecording=!1;ToolPerformer.Ajax.speechToTextPredict(b.base64Audio,b.audioType,c.predictionLanguage).then(function(a){a.success&&""!=
a.result.trim()&&c.fire(3,a.result)},})};a.prototype.isRecording=function(){return this.isCurrentlyRecording};a.prototype.setPredictionLanguage=function(a){"auto"==a&&(a="");this.predictionLanguage=a};a.prototype.startRecording=function(){var a=this;this.speechToTextLibrary.getMicrophonePermissionStatus(function(b){b==SpeechToText.EMicrophonePermission.Prompt?a.speechToTextLibrary.requestMicrophonePermission():b==SpeechToText.EMicrophonePermission.Granted&&(a.speechToTextLibrary.startRecording(),
a.isCurrentlyRecording=!0)})};a.prototype.stopRecording=return a}(Core.Listener);e.Manager=d})(SpeechToTextTool||(SpeechToTextTool={}));
var ToolStorage;
(function(d){function m(a,c){ToolBrowser.Cookie.setItem(a+"-10",c.creditId,Infinity,"/")}function n(a){a=ToolBrowser.Cookie.getItem(a+"-10");if(void 0!==a)return{creditId:a,whenUnixTs:Math.round((new Date).getTime()/1E3)}}function p(){var a=h();try{var c=window.localStorage.getItem("s.3");if(c){var b=JSON.parse(c);if(b&&"uri"in b&&"whenUnixTs"in b)return a&&a.whenUnixTs&&b.whenUnixTs&&a.whenUnixTs>b.whenUnixTs?a:b}}catch(f){}return a}function g(a,c){var b=0;try{if("localStorage"in window)window.localStorage.setItem(a,
JSON.stringify(c));else return 2}catch(f){b=1}return b}function h(){try{var a=window.localStorage.getItem("s.2");if(a){var c=JSON.parse(a);if(c&&"uri"in c&&"nickname"in c&&"id"in c&&0<c.id)return c}}catch(b){}}var q={},l={};d.videoPlayedIs=function(a){if(0>=a)return!1;a=a.toString(36);if(a in q)return!0;if(ToolBrowser.isMobile())return!1;var c="s.5."+a.slice(-1),b;try{return(b=window.localStorage.getItem(c))?0<=b.indexOf(","+a+","):!1}catch(f){return!1}};d.videoPlayedAppend=function(a){if(!(0>=a||
(a=a.toString(36),q[a]=!0,ToolBrowser.isMobile()))){var c="s.5."+a.slice(-1);try{var b=window.localStorage,f=b.getItem(c);if(null===f||void 0===f)f=",";var e=f.indexOf(","+a+",");if(0!==e){f=0<e?","+a+f.substring(0,e)+f.substring(e+a.length+1):","+a+f;if(256<f.length){f=f.substring(0,256);var d=f.lastIndexOf(",");f=f.substring(0,d+1)}b.setItem(c,f)}}catch(k){}}};d.performerIsLoved=function(a){var c=Math.round((new Date).getTime()/1E3),b=a.toString(36);if(b in l&&l[b]+3600>c)return!0;a="s.6."+a.toString(10).slice(-1);
try{var f=window.localStorage;var e=f.getItem(a);if(!e)return!1;var d=e.indexOf(","+b+"-");if(0>d)return!1;var k=e.indexOf(",",d+1);if(!(0>k)){var g=e.substring(d+1,k).split("-");if(2===g.length){var h=parseInt(g[1],36);if(h+3600>c)return l[b]=h,!0;e=e.substring(0,d)+e.substring(k);f.setItem(a,e)}}}catch(t){}return!1};d.performerLovedAppend=function(a){var c="s.6."+a.toString(10).slice(-1);a=a.toString(36);var b=Math.round((new Date).getTime()/1E3);l[a]=b;b=b.toString(36);try{var d=window.localStorage,
e=d.getItem(c);if(null===e||void 0===e)e=",";var g=e.indexOf(","+a+"-");if(0>g)e=","+a+"-"+b+e;else{var k=e.indexOf(",",g+1);0>k||(e=e.substring(0,g)+e.substring(k),e=","+a+"-"+b+e)}if(256<e.length){e=e.substring(0,256);var h=e.lastIndexOf(",");e=e.substring(0,h+1)}d.setItem(c,e)}catch(r){}};d.performerRecentAppend=function(a){try{var c=window.localStorage,b=c.getItem("s.1");if(null===b||void 0===b)b="";var d=""===b?[]:b.split(","),e=a.toString(36),g=d.indexOf(e);0<=g&&d.splice(g,1);for(d.push(e);40<
d.length;)d.shift();c.setItem("s.1",d.join(","))}catch(k){}};d.performerRecentListClear=d.performerRecentGetList=function(){try{var a=window.localStorage.getItem("s.1")}catch(f){a=null}if(null===a||void 0===a)return[];a=a.split(",");for(var c=[];a.length;){var b=a.shift();b&&(b=parseInt(b,36),isNaN(b)||c.push(b))}return c};d.performerRecentGetLastSeen=function(){try{var a=window.localStorage.getItem("s.1")}catch(c){a=null}if(null===
a||void 0===a){if(a=h())return a.id}else if(a=a.split(",").pop())return a=parseInt(a,36),isNaN(a)?void 0:a};d.registerStatSet=function(a,c){if(c){var b={whenUnixTs:Math.round((new Date).getTime()/1E3)};g("s.11-"+a,b)}};d.registerStatGet=function(a){try{var c=window.localStorage.getItem("s.11-"+a);if(c){var b=JSON.parse(c);if(b&&"whenUnixTs"in b)return b}}catch(f){}};d.creditStatCookieSet=m;d.creditStatCookieGet=n;d.creditStatSet=function(a,c){c.whenUnixTs=Math.round((new Date).getTime()/1E3);a=a.toLowerCase();
var b=g("s.10-"+a,c);0<b&&m(a,c);return b};d.creditStatGet=function(a){a=a.toLowerCase();try{var c=window.localStorage.getItem("s.10-"+a);if(c){var b=JSON.parse(c);if(b&&"creditId"in b&&"whenUnixTs"in b)return b}}catch(f){}return n(a)};d.pageInfoSetLastSeen=function(a){a.whenUnixTs=Math.round((new Date).getTime()/1E3);g("s.3",a)};d.rumSetDone=function(){var a={unixTs:Math.round((new Date).getTime()/1E3)};g("s.4",a)};d.rumGetDone=function(){try{var a=window.localStorage.getItem("s.4");if(a){var c=
JSON.parse(a);if(c&&"unixTs"in c)return c}}catch(b){}};d.pageInfoGetLastSeenUri=d.pageInfoGetLastSeen=p;d.performerInfoSetLastSeen=function(a){a.whenUnixTs=Math.round((new Date).getTime()/1E3);g("s.2",a)};d.performerInfoGetLastSeen=h;d.onlineListSetPaginationInfiniteScrollingButtonClicked=function(){try{window.localStorage.setItem("s.8","1")}catch(a){}};d.onlineListIsPaginationInfiniteScrollingButtonClicked=function(){try{return null!==window.localStorage.getItem("s.8")}catch(a){}return!1};
d.gallerySetPaginationInfiniteScrollingButtonClicked=d.galleryIsPaginationInfiniteScrollingButtonClicked=function(){try{return null!==window.localStorage.getItem("s.9")}catch(a){}return!1};d.redirectToVrSetDone=d.redirectToVrGetDone=function(){var a=!0;try{a="1"==sessionStorage.getItem("s.7")}catch(c){}return a}})(ToolStorage||(ToolStorage={}));
var AltRWC_Config,StreamPlayerLogic;
(function(b){ar e,f=!1;b.isReady=d;b.isTechReady=b.setTechIsReady=var g=function(b){_extends(a,b);a.prototype.showStop=function(c,a){void 0===c&&(c=51015);void 0===a&&(a=!1);d()&&SP_StopShow(c,a)};a.prototype.stopShowPrivate=function(c,a){void 0===c&&(c=51015);SP_stopShowPrive(c)};a.prototype.sendMessage=a.prototype.resize=
function(c,a){d()&&SP_resizePlayer(c,a)};a.prototype.showTypeCurrentIsPaid=function(){return d()?this.showTypeIsPaid(SP_STATUS):!1};a.prototype.showTypeCurrentIsPrivateClassic=a.prototype.showTypeCurrentIsPrivateXclusive=function(){return SP_STATUS===StreamPlayerXCl.showState.XCLUSIVE||"MODEL_XCLUSIVE"===SP_STATUS};a.prototype.showTypeIsPaid=function(c){return c===StreamPlayerXCl.showState.PRIVE||c===StreamPlayerXCl.showState.XCLUSIVE||
c===StreamPlayerXCl.showState.SNEAK_PEEK?!0:!1};a.prototype.userInterfaceAction=function(c,a){void 0===a&&(a=void 0);return SP_UserInterfaceAction(c,a)};a.prototype.messageFilterOffensiveGetLevel=function(){return SP_MessageFilterOffensiveGetLevel()};a.prototype.isShowInProgress=function(){return SP_STATE===StreamPlayerXCl.rtmpState.RUN||SP_STATE===StreamPlayerXCl.rtmpState.START?!0:!1};a.prototype.enterPrivate=function(){return SP_startShowPrive()};a.prototype.enterXClusive=function(){SP_startShowPriveXclusive()};
a.prototype.enterSneakPeek=function(){SP_startSneakPeek()};a.prototype.eventStart=function(){this.fire(1)};a.prototype.cam2camSetIceConfig=function(c){"undefined"===typeof AltRWC_Config&&(AltRWC_Config={});AltRWC_Config.iceServersInfos=c};a.prototype.cam2camSetVideoFacingMode=function(c){return SP_AltRWC_Set_Video_facing(c)};a.prototype.cam2camIsAvailable=function(){return SP_AltRWC_isAvailable()};a.prototype.cam2camStart=function(){return SP_AltRWC_Start()};a.prototype.cam2camStop=a.prototype.cam2camAudioSetState=function(c){SP_AltRWC_publishAudio(c)};a.prototype.cam2camVideoSetState=function(c){SP_AltRWC_publishVideo(c)};a.prototype.cam2camResume=a.prototype.cam2camOnResponse=function(c){this.fire(18,c)};a.prototype.muteSetState=function(c){SP_PlayerSetMuteState(c)};a.prototype.muteGetState=function(){return SP_PlayerGetMuteState()};a.prototype.userMutedReason=function(){return SP_userMutedReason()};
a.prototype.payingShowAreEnabled=function(){return SP_payingShowAreEnabled()};a.prototype.volumeSetState=a.prototype.volumeGetState=function(){return SP_PlayerVolumeGetState()};a.prototype.init=a.prototype.eventConnecting=function(){this.fire(3)};a.prototype.eventError=function(c){switch(c){case "MODEL_DECONNEXION":this.fire(21);break;case "MODEL_OFFLINE":this.fire(20);break;case "MODEL_USER_DECONNEXION":this.fire(25,
{banned:!1});break;case "MODEL_USER_BANN":this.fire(25,{banned:!0});break;case "VISITEUR_FIN_CHAT":this.fire(26);break;case "MODEL_PRIVE":case "MEMBRE_MODEL_PRIVE":case "VISITEUR_FIN_TEASING":case "MEMBRE_FIN_TEASING":this.fire(22);break;case "MEMBRE_FIN_SNEAK_PEEK":this.fire(24);break;case "MODEL_XCLUSIVE":case "MEMBRE_MODEL_XCLUSIVE":this.fire(23);break;case "MEMBRE_MAJ_NO_CREDIT":this.fire(27);break;case "client_not_enough_credit":case "xclusive_not_enough_credit":this.fire(27);break;case "STOP_SHOW_PRIVE":this.fire(28);
break;case "EJECT_NO_INFO":this.fire(29);break;default:this.fire(19,{id:c})}};a.prototype.eventChatMessage=a.prototype.eventShow=function(c,a){if("ontips"==c){var b={sender:{nickname:a.exped,id:a.idc},ui:{content:a.msg,language:a.spoken,itemId:0}};"itemId"in a&&0<a.itemId?(b.ui.itemId=a.itemId,this.fire(7,b)):this.fire(6,b)}else"onlove"==c?(b={sender:{nickname:a.exped,id:a.idc}},this.fire(8,b)):"favorite_added"==c?(b={sender:{nickname:a.exped,
id:a.idc}},this.fire(9,b)):"remove_customer"==c?(b={uid:a.uid,removeMsg:a.removeMsg},this.fire(10,b)):"creditInfo"===c&&"creditAmount"in a?(b={creditAmount:a.creditAmount},this.fire(30,b)):"cannotTalk"==c?this.fire(31,a):"muteChanged"==c?this.fire(32,a):"privateStartError"==c?this.fire(33,a):"payingShowEnabled"==c?this.fire(34,a):"ratingDone"==c?this.fire(37,{nickname:a.exped,ratingValue:a.ratingValue}):this.fire(5,{type:c,params:a})};a.prototype.eventExitChat=function(){this.fire(11)};a.prototype.eventGeneric=
function(a,b){"connectionSuccess"===a?this.fire(2,SP_STATUS,b):"buttonSwitchToVideoIsVisible"===a?this.fire(16,b):"mediaLoadedAndPlay"===a?this.fire(17,b):"statusToyChanged"===a?this.fire(35,b):this.fire(12,{type:a,info:b})};a.prototype.tipSent=function(a,b,d,e,f){void 0===e&&(e=0);SP_postShowEvent("ontips",{msg:d,idtc:b,idts:a,itemId:e},f)};a.prototype.loveSent=function(a){SP_postShowEvent("onlove",void 0,a)};a.prototype.ratingDone=function(a){SP_postShowEvent("ratingDone",void 0,a)};a.prototype.favoriteAdded=
function(a){SP_postShowEvent("favorite_added",void 0,a)};a.prototype.messageBlocked=function(a,b){SP_postShowEvent("msgBlocked",void 0,b)};a.prototype.getShowIdConnexion=function(){return SP_LIVE&&"idshow"in SP_LIVE?SP_LIVE.idshow:0};a.prototype.onClickVideo=function(){this.fire(13)};a.prototype.onUserMediaError=a.prototype.onShowStateChange=function(a){SP_STATE===StreamPlayerXCl.rtmpState.RUN&&this.fire(15,a)};a.prototype.onToyUiEvent=a.prototype.controlBarVisibilitySet=function(a){SP_interface_controlBarVisibilitySet(a)};a.prototype.setupUnload=function(){window.onunload=function(){"rtmpClearShowOnUnload"in window&&"function"===typeof rtmpClearShowOnUnload&&SP_STATE!==StreamPlayerXCl.rtmpState.DISC&&rtmpClearShowOnUnload()}};a.prototype.stateConnectionIsDisconnectedOrError=a.prototype.toyControllerOnRun=function(){ToyController.Event.onRun()};a.prototype.toyControllerStatusToyChanged=
function(){ToyController.Event.statusToyChanged()};a.prototype.toyControllerIsActivated=function(){return ToyController.activated};a.prototype.toyControllerActivate=function(){ToyController.activate()};a.prototype.toyControllerCommandClick=function(a){ToyController.Event.globalCommandClick(a)};a.prototype.toyControllerVisibilityToggle=function(){ToyController.Display.visibilityToggle()};a.prototype.toyControllerIsCommandVisible=a.prototype.toyControllerSendCommand=
return a}(Core.Listener);b.Proxy=g;b.getInstance=function(){e||(e=new g);return e}})(StreamPlayerLogic||(StreamPlayerLogic={}));function interface_set_start(){StreamPlayerLogic.getInstance().eventStart()}function interface_set_connect(){StreamPlayerLogic.getInstance().eventConnecting()}function interface_set_error(b){StreamPlayerLogic.getInstance().eventError(b)}
function interface_addMsg(b,d,e){StreamPlayerLogic.getInstance().eventChatMessage(b,d,e)}function interface_showEvent(b,d){StreamPlayerLogic.getInstance().eventShow(b,d)}function interface_exit_chat(){StreamPlayerLogic.getInstance().eventExitChat()}function interface_dispatch_event(b,d){StreamPlayerLogic.getInstance().eventGeneric(b,d)}function interface_AltRWC_Start_Response(b){StreamPlayerLogic.getInstance().cam2camOnResponse(b)}
unction interface_AltRWC_NoLocalStream(b){StreamPlayerLogic.getInstance().onUserMediaError(b)}var SurveyTool;(function(a){a.init=function(){if("undefined"!==typeof SurveyManager){var a=new SurveyManager.Survey,b=Application.Config.survey;Application.Config.isUserConnected&&(b.getEmailFromSession=!0);ToolBrowser.isMobile()&&ToolBrowser.isTouch()&&(b.isMobile=!0);a.init(b)}};a.hide=function(){"undefined"!==typeof SurveyManager&&(new SurveyManager.Survey).hide()}})(SurveyTool||(SurveyTool={}));
var ToolTemplate;(function(a){a.isThemeXmas=function(){return $("body").hasClass("theme-xmas")};a.initXmasLogo=function(){var b=new Image,a=$(".l-header").find(".logoSvg");if(a.length){var c=a.find("img");c.length&&(b.classList.add("xlovecam-logo"),b.src=c.data("src-svg"),b.addEventListener("load",function(){c.replaceWith(b)}))}}})(ToolTemplate||(ToolTemplate={}));
var ToolToy;
(function(e){function n(){f.on(ChatToyControllerModule.Toy.EVENT_TOY_STATUS_UPDATE,;ToolApp.event.on(213,function(d,b){"off"===b?a.isDisabled()&&(h.toyControllerCommandClick(b),a.enable()):"full"===b&&(h.toyControllerCommandClick(b),a.disable())});ToolApp.event.on(214,function(a,b){var c=$(b);c.length&&(c.siblings().removeClass("isSelected"),c.addClass("isSelected"))})}function l(){var d=$("#"+g.domId),b=$("#"+g.videoDomId),c=$(".feedbackVideoClient",b);
b=$(".block-cam2cam",d);d=$(".block-actions",d);c=c&&c.length?c.height():0;b=b&&b.length?b.height():0;d=d.height();if(1===g.getCam2CamState()||4===g.getCam2CamState()||5===g.getCam2CamState())c=0;a.resize({videoCam2CamHeight:c,actionCam2CamHeight:b,videoActionHeight:d})}var a,k,f,g,h,m=!1;e.init=function(d){m||(m=!0,a=new ChatToyControllerModule.UI.ToyPanel,k=new ChatToyControllerModule.UI.ToyButton,f=new ChatToyControllerModule.Toy.Status,g=d,h=d.getStreamPlayerProxy(),a.init(),ChatToyControllerModule.loadStreamPlayerProxy(h),
n())};e.handleToyStreamPlayerEvent=function(d,b){if(g&&(g.isShowInProgress()||"show-toy-button"!=d&&"show"!=d&&"display-commands"!=d))switch(d){case "show-toy-button":f.set(ToyController.status);var c=Translation.tr("titleUserToyControllerAvailable",{"#TOY_NAME#":ToyController.status.type,"#NICK#":g.getPerformerNickname()});k.setTitle(c);k.show();break;case "hide-toy-button":k.hide();f.set(ToyController.status);break;case "no-credits":case "xclusive":g.onActionGoToPrivateToyConnected();break;case "show":l();
a.open();a.reFlow();break;case "hide":a.close();break;case "display-commands":if("undefined"===typeof a)break;if(!a.isRendered())break;0<a.commandCount()&&a.removeCommandAll();c=f.getVisibleCommandList();for(var e=0;e<c.length;e++){var h=ChatToyControllerModule.Command.create(c[e]);h&&a.attachCommand(h,".content-command-list")}c=ChatToyControllerModule.Command.create({name:"FullPower"});e=ChatToyControllerModule.Command.create({name:"FullPowerOff"});c&&a.attachCommand(c,".content-command-list");e&&
a.attachCommand(e,".content-command-list-header");a.bindVendorEvent();break;case "toy-disconnected":f.get().connected&&(k.hide(),f.reset(),a.setDisconnected())}};e.toyPanelResize=l;e.toyPanelForceClose=function(){"undefined"!==typeof a&&a.isOpen()&&(a.close(),h.toyControllerVisibilityToggle())};e.toyPanelClose=function(){"undefined"!==typeof a&&a.close()};e.toyButtonHide=function(){"undefined"!==typeof k&&k.hide()};e.getConnectedToyType=function(){if("undefined"!==typeof f)return f.get().type};e.toyStatusReset=
)(ToolToy||(ToolToy={}));
var ToolUi;(function(c){c.waitUntilScroll=function(b,a,c){var d=0,f=window.setInterval(function(){var e=$(window).scrollTop();d+=100;d>c?(window.clearInterval(f),b(!0,-1)):e>=a&&(window.clearInterval(f),b(!1,e))},100)};c.isEventToFast=function(b,a){void 0===a&&(a=500);return(new Date).getTime()-b.getTime()<a?!0:!1};c.qrCodeSetupAuto=function(){$("div.js-qr-code-auto").each(function(){var b=$(this),a=b.attr("data-qr");a&&(a=qr.image({size:5,value:a}),b.append(a))})}})(ToolUi||(ToolUi={}));
var WebAuthTool;
(function(c){var d;c.isSupportedAndEnabled=function(){return!(0!=Application.Config.wl.webauthSupport&&"WebAuthnys"in window&&WebAuthnys.isSupported())||"location"in document&&"protocol"in document.location&&0!==document.location.protocol.indexOf("https")?!1:!0};c.isPlatformAuthenticatorAvailable=function(){var a=$.Deferred();if(void 0!==d)return a.resolve(d),a;if("PublicKeyCredential"in window&&window.PublicKeyCredential){var b=PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();b.then(;b["catch"](}return a};c.configAuthTypeIntToString=c.domErrorToAjaxError=function(a,b){if(!(a instanceof DOMException))return{code:11133,msg:"Unexpected error"};if("onerror"in window)window.onerror("[debugOnlyNotCritical] Webauth error: "+a.toString());return WebAuthnys.errorIsContraint(a)?{code:11132,msg:"Authenticator not supported"}:WebAuthnys.errorIsAbort(a)?{code:11134,msg:"Operation aborted"}:
WebAuthnys.errorIsInvalidState(a)?{code:11135,msg:"Error: Device is probably already registered."}:WebAuthnys.errorIsNotSupported(a)?{code:11177,msg:"Authenticator not supported"}:WebAuthnys.errorIsNotAllowed(a)?{code:11136,msg:"Verification canceled or timed out."}:WebAuthnys.errorIsSecurity(a)?{code:11137,msg:"Security check error."}:{code:11138,msg:"Unexpected error. "+a.toString()}};c.methodAuthSet=function(a){try{return 1>a.method?localStorage.removeItem("webAuthMethod"):localStorage.setItem("webAuthMethod",
JSON.stringify(a)),!0}catch(b){return!1}};c.methodAuthGet=function(){try{var a=localStorage.getItem("webAuthMethod");if(a){var b=JSON.parse(a);if(b&&"method"in b&&"payload"in b&&b.payload&&0<b.method)return b}}catch(e){}}})(WebAuthTool||(WebAuthTool={}));
var NotificationTool;(function(a){a.init=function(){"undefined"!==typeof NotificationManager&&(a.webpush=new NotificationManager.Webpush,a.webpush.init(Application.Config.webpush))};a.canShowPopup=function(b){var c=!1;if(a.webpush){b=ToolPreference.getItemInt(b);c=a.webpush.isSubscribed();var d=a.webpush.isDisabled();c="PushManager"in window&&0==d&&(0>b||1==b&&0==c)}return c}})(NotificationTool||(NotificationTool={}));

var AppCreditPaymentEnd;(function(d){d.main=function(){var a=ToolStorage.performerInfoGetLastSeen();if(a){var b=document.getElementById("performerLastSeen");if(b){var c=document.getElementById("performerLSNickname");c&&(c.innerHTML=a.nickname);$("#performerLastSeen a").attr("href",a.uri);b.removeAttribute("style")}}}})(AppCreditPaymentEnd||(AppCreditPaymentEnd={}));
var AppCreditRedirectForm;
(function(b){b.main=function(){if(window.performance&&"navigation"in window.performance&&2===window.performance.navigation.type)(new Layer.Loader).open(),document.location.replace(Application.Config.url.root+"/credit/");else{ToolBrowser.History.update(3,{},document.title,Application.Config.url.root+"/credit/");var a=$("#paymentAutoSubmit");a.length&&(a.submit(),ToolApp.runOnFoundationInitialized()}}})(AppCreditRedirectForm||(AppCreditRedirectForm={}));
var AppCreditSystemList;
(function(m){function n(b,c,d,a){var l=Application.systemList[b];if("dynamic"in l){var g=l.dynamic,h=c.find('input[type="range"]');$("#dynamicAmount"+b).bind("keyup",function(){var c=parseInt(d),g=parseInt(a);0===$("#dynamicAmount"+b).val().length?($("#dynamicAmountRange"+b).val(d),f="999999",e(d)):$("#dynamicAmount"+b).val()<c?($("#dynamicAmountRange"+b).val(d),f="999999",e(d)):$("#dynamicAmount"+b).val()>g?($("#dynamicAmountRange"+b).val(a),f="999999",e(a)):($("#dynamicAmountRange"+b).val($("#dynamicAmount"+
b).val()),e($("#dynamicAmountRange"+b).val()))});$("#dynamicAmount"+b).bind("change",function(){var c=parseInt(d),g=parseInt(a);0===$("#dynamicAmount"+b).val().length?($("#dynamicAmountRange"+b).val(d),f="999999",e(d)):$("#dynamicAmount"+b).val()<c?($("#dynamicAmountRange"+b).val(d),f="999999",e(d)):$("#dynamicAmount"+b).val()>g?($("#dynamicAmountRange"+b).val(a),f="999999",e(a)):($("#dynamicAmountRange"+b).val($("#dynamicAmount"+b).val()),e($("#dynamicAmountRange"+b).val()))});var k=c.find(".js-billing-price-amount"),
p=c.find(".js-ewallet-credit-amount"),q=c.find('input[name="userData"]'),f="",e=function(a){g&&f!==a&&(f=a,a=Math.round(100*parseFloat(a))/100,k.html(a.toString(10)),$("#dynamicAmount"+b).val(a.toString(10)),q.val(a.toString(10)),p.html((Math.floor(a*g.outputRatio*100)/100).toFixed(2)))};h.bind("mousemove",function(){e(h.val())});h.bind("change",;e(h.val());c.show()}}m.main=function(){$("a.js-link-with-loader").bind("click",function(a){if(a.currentTarget)if(ToolApp.redirectToLoginIfNotConnected())a.preventDefault(),
a.stopPropagation();else{var b=$(a.currentTarget),c=b.closest("div.item-accordeon").attr("data-sid");if(c in Application.systemList&&(c=Application.systemList[c],"personalInfoRequired"in c&&c.personalInfoRequired&&0<c.personalInfoRequired)){var d=new Layer.PersonalInfo;d.open({infoToRequest:c.personalInfoRequired,firstname:Application.personalInfoData.firstname,lastname:Application.personalInfoData.lastname,address:Application.personalInfoData.address,postalCode:Application.personalInfoData.postalCode,
city:Application.personalInfoData.city,countryIso2char:Application.personalInfoData.countryIso2char,billingInfo:""});d.on(1,function(a,c){var d=b.attr("href");(new Layer.Loader).open();k.personalInfo(c).done(function(a){0>d.indexOf("?")&&(d+="?linkError=1");d="id"in a&&a.id?d+"&personalInfoId="+encodeURIComponent(a.id):d+"&personalInfoId=0";ToolBrowser.redirectToUrl(d)}).fail(function(a){d=0<d.indexOf("?")?d+"&personalInfoId=0":d+"&personalInfoId=0&linkError=1";ToolBrowser.redirectToUrl(d)})});a.preventDefault();
a.stopPropagation();return}(new Layer.Loader).open()}});$("#js-credit-link-info").bind("click",function(){(new Layer.InfoDomId(Layer.DOM_ID_CREDIT_INFOS)).open()});$("#js-credit-link-transaction-https").bind("click",function(){(new Layer.InfoDomId(Layer.DOM_ID_CREDIT_TRANSACTION_SECURE)).open()});$("#mod-credit3 div.item-accordeon").bind("click",function(){var a=$(this);ToolBrowser.isMobile()&&!a.hasClass("is-visible")&&window.setTimeout(100)});$(".js-action-dynamic").bind("click",function(a){if(a.target){var b=$(a.target),c=b.closest("div.item-accordeon").attr("data-sid");c in Application.systemList&&(a=a.target,a.previousSibling&&(a=$(a.previousSibling),b.hide(),n(c,a,$("#dynamicAmountMin"+c).val(),$("#dynamicAmountMax"+c).val())))}});if(Application.systemList)for(var b in Application.systemList)if(Application.systemList.hasOwnProperty(b)){var c=Application.systemList[b];switch(c.renderMode){case 4:case 3:case 5:"decroche"in
c&&c.decroche?(new ModuleCredit.Decroche(parseInt(b,10),c)).init():0<c.codeMax&&(new ModuleCredit.CodeList(parseInt(b,10),c)).init()}}$("#mod-credit3 div.accordeon-data-header").bind("click",function(a){a.currentTarget&&(a=$(a.currentTarget).find("a").text().trim(),ToolApp.trackEvent({category:"Credit",action:"AccordeonShow",name:a}))});if("applicationRestriction"in Application&&Application.applicationRestriction&&Application.applicationRestriction&8){var d=function(){ToolApp.userInfoRefreshFromDatabase("appRestriction",
3).done(function(){0<ToolApp.userInfo.creditAmount?ToolBrowser.redirectToUrl(ToolApp.Url.getOnlineList()):(new Layer.InfoNoTitle).open(Translation.tr("errorUserNotEnoughCredit"))}).fail(};$(".action-home, div.l-header-logo, a.action-webcam-live, div.breadcrumb a, .js-footer-webcam-live").bind("click",}};var k;(function(b){b.personalInfo=function(b){b={info:b,csrfProtectionToken:ToolApp.getCsrfProtectionToken()};
return Core.Ajax.post("/user/personalInfoSubmit/",b)}})(k||(k={}))})(AppCreditSystemList||(AppCreditSystemList={}));
var AppEvent;
(function(b){var g=[];b.main=function(){$(".eventItem").each(function(){var a=$(this),d=a.data("id");g[d]=a.data("last-id")});$(".load-more-performer").on("click",function(a){a.preventDefault();a=$(this).closest(".eventItem").data("id");e.loadMore(a,g[a])})};var e;(function(a){a.loadMore=function(a,b){c.getPerformerList(a,b).done(function(b){for(var d="",c=b.performerList.length,h=0;h<c;h++){var f=b.performerList[h],e=Application.Config.url.root+"/model/"+f.nickname.toLowerCase()+"/";d+='<a href="'+
e+'"><img src="'+f.photoUrl+'" title="'+f.nickname+'" alt="'+f.nickname+'" /></a>'}$('.eventItem[data-id="'+a+'"] .performerList').append(d);g[a]=b.lastId;48>c&&$('.eventItem[data-id="'+a+'"]').find(".load-more-performer").remove()})}})(e=b.Action||(b.Action={}));var c;(function(a){a.getPerformerList=function(a,b){return Core.Ajax.post("/events/loadMore/",{eventId:a,lastId:b})}})(c||(c={}))})(AppEvent||(AppEvent={}));
var AppOnlineAndChat;
(function(t){function u(){k=new Date;m=new Date(1E6);ToolApp.RedirectToCreditPage.timerSetup()}function v(){ToolMenu.hideAll();ToolMenu.pageHasJustChanged();k=new Date;ToolMenu.online&&!ToolMenu.online.alwaysVisible&&($(".action-visibility-switch-sidebar-online").hide(),$(".online-list-home-button").css("display","table-cell"));var b=$(".favorite-header-teaser"),a="<h1 class='favorite-header'>"+Translation.tr("titleUserFavorite")+"</h1>";b.before(a);b.show();ToolMenu.online&&ToolMenu.online.resizeMenu()}
function w(){ToolMenu.hideAll();ToolMenu.pageHasJustChanged();k=new Date;ToolMenu.online&&!ToolMenu.online.alwaysVisible&&($(".action-visibility-switch-sidebar-online").css("display","table-cell"),$(".online-list-home-button").hide());$("h1.favorite-header").remove();$("div.favorite-header-teaser").hide();ToolMenu.online&&ToolMenu.online.resizeMenu()}function x(){ToolMenu.online&&!ToolMenu.online.alwaysVisible&&($(".action-visibility-switch-sidebar-online").hide(),$(".online-list-home-button").css("display",
"table-cell"));var b=$("#mod-online-list"),a="<h1 class='recent-header'>"+Translation.tr("titleGenericLastPerformerSeen")+"</h1>",c="<button class='button filter-recent-history-clear isHidden'>"+Translation.tr("actionUserChatHistoryClear")+"</button>";b.before(a);b.before(c);$(".filter-recent-history-clear").bind("click",y);ToolMenu.online&&(ToolMenu.online.menuItemSortHide(),ToolMenu.online.resizeMenu())}function z(){ToolMenu.pageHasJustChanged();k=new Date;ToolMenu.online&&!ToolMenu.online.alwaysVisible&&
($(".action-visibility-switch-sidebar-online").css("display","table-cell"),$(".online-list-home-button").hide());$("h1.recent-header").remove();$("button.filter-recent-history-clear").remove();ToolMenu.online&&(ToolMenu.online.menuItemSortShow(),ToolMenu.online.resizeMenu())}function y(){ToolStorage.performerRecentListClear();ToolApp.event.fire(ModuleOnline.EVENT_LIST_EMPTY)}function A(b){var a=new ModuleOnline.OnlineManager(b.config);a.init("mod-online-list");var c="favorite"in b.filter&&!!b.filter.favorite,
g="recent"in b.filter&&!!b.filter.recent,e=new ModuleOnlineMenu.OnlineMenuManager("sidebar-online",b.filter.data,b.filter.selected,b.sort.data,b.sort.selected,c,g);ToolMenu.online=e;a.setMenuFilter(e);var h=new ModuleFilterOnlineMobile.FilterManager("#mobileFilterDisplay");h.importFilterSelected(b.filter.selected);ToolMenu.onlineMobile=h;a.setFilterMobile(h);c?(v(),f=2):g?(a.advertisingDisable(),x(),f=3):f=1;b=$(".action-visibility-switch-sidebar-online");b.bind("click",function(a){a.preventDefault();
a.stopPropagation();ToolUi.isEventToFast(k)||(ToolUi.isEventToFast(m,200)?m=new Date(1E6):(ToolMenu.user.hide(),e.toggle()))});b.bind("mouseenter",function(a){ToolUi.isEventToFast(k,k.getTime())||e.isOpen()||(m=new Date,ToolMenu.user&&ToolMenu.user.hide(),e.show(),a.preventDefault(),a.stopPropagation())});e.groupCollapseOnClick=!0;e.alwaysVisible=!1;e.on(ModuleOnlineMenu.EVENT_ITEM_CHANGED,function(b,d){var p=b.getFilterAndSortData().filter;ToolMenu.onlineMobile.importFilterSelected(p);$(".filter-no-performer-found").hide();
$(".filter-suggest-to-reset").hide();$(".maintenance-no-performer-found").hide();2!==f&&$(".favorite-header-teaser").hide();$("#mod-online-list").show();p=a.onFilterChanged(b);var c=d&&"favorite"in d&&d.favorite,l=d&&"recent"in d&&d.recent,e=d&&"sortId"in d&&d.sortId;d&&"nickname"in d&&d.nickname&&1!==f&&b.filterClearUiOnly();c?(3==f&&(a.advertisingEnable(),z()),v(),f=2):2!==f||e||(w(),f=1);l?(2==f&&w(),a.advertisingDisable(),x(),f=3):3===f&&(a.advertisingEnable(),z(),f=1);d&&"nickname"in d&&p?(b.nicknameLoaderShow(),
p.done(.fail(function(a){b.hide()})):b.hide()});e.on(ModuleOnlineMenu.EVENT_PREVISUALISATION_SWITCH,function(b,d){if(!d||Application.Config.isUserConnected||Application.online.config.liveCamByDefault){if(ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&d)ToolAvs.startVerification(function(a){a&&e.fire(ModuleOnlineMenu.EVENT_PREVISUALISATION_SWITCH,!0)});else{var c=ToolPreference.getInstance();c.setItem(1,d?"1":"0");
c.save({category:"",action:"OnlinePrevisuLive",name:d?"Yes":"No"});a.liveCamAsProfileSetState(d);b.setStateLiveCamPreview(a.liveCamAsProfileIsEnabled())}b.hide()}else Application.Config.wl.signUpSignIsAsLayer?ToolRegister.layerOpen():ToolApp.redirectToLoginIfNotConnected()});e.on(ModuleOnlineMenu.EVENT_GRID_DISPLAY_SIZE,function(b,d){var c=ToolPreference.getItemInt(46);c!==d.data("display-size")&&(ToolMenu.online.displaySizeSelect(c,d),c=ToolPreference.getInstance(),c.setItem(46,d.data("display-size")),
c.save(),a.resizeCell(!0),a.resizeOnlineListIcon(),a.resizeLoadMoreButton())});h.on(ModuleFilterOnlineMobile.EVENT_ITEM_CHANGED,function(a,d){if(d)e.onButtonRemovedClicked(d.filterId,d.itemId);else e.filterClear()});h.on(ModuleFilterOnlineMobile.EVENT_DISPLAYED,function(a){e.filterStatUpdateCheckAndProcess()});if(2===Application.online.config.paginationType||3===Application.online.config.paginationType||4===Application.online.config.paginationType){var n=$(".pagination-online-load-more"),q=!0;a.on(ModuleOnline.EVENT_LIST_LOAD_START,
function(){n.hide()});a.on(ModuleOnline.EVENT_LIST_LOAD_END,function(b,d){q&&d.morePerformerAvailable&&(n.show(),a.resizeLoadMoreButton())});n.find("button").bind("click",function(){a.ajaxLoadMore("btn-more");if(3===Application.online.config.paginationType||4===Application.online.config.paginationType){q=!1;if(4===Application.online.config.paginationType)ToolStorage.onlineListSetPaginationInfiniteScrollingButtonClicked();a.paginationTypeSet(1)}});n.show()}a.on(ModuleOnline.EVENT_RECENT_LIST_MAYBE_EMPTY,
function(a,d){});a.on(ModuleOnline.EVENT_LIST_EMPTY,function(a,d){var b=$("#online-list-menu-inline");if(a.hasFilter()){var c=$(".filter-no-performer-found"),e=$(".favorite-header-teaser");c.show();if(d.isCategoryForbiddenInCountry)$(".country-forbidden",c).show(),$(".country-regular",c).hide();else{$(".country-forbidden",c).hide();var l=Translation.tr("infoOnlineListEmptyResult"),g=$(".country-regular",c);3===f&&(l=Translation.tr("infoUserChatHistoryEmpty"),$(".filter-recent-history-clear").remove());
g.text(l).show()}e.hide();b&&b.is(":visible")&&c.height(b.height())}else c=new Date,e=$(".maintenance-no-performer-found"),$("a",e).attr("href","?errorNoPerformer=1&ts="+c.getTime()),e.show(),b&&b.is(":visible")&&e.height(b.height());$("#mod-online-list").hide();d.performerStat?$(".performer-stat-total").html(d.performerStat.total.toString()):$(".performer-stat-total").html("-")});a.on(ModuleOnline.EVENT_LIST_END,function(a,d){d.performerList.length?(2==f?$(".favorite-header-teaser").show():$(".favorite-header-teaser").hide(),
3==f?$(".filter-recent-history-clear").removeClass("isHidden"):$(".filter-recent-history-clear").addClass("isHidden"),$(".filter-no-performer-found").hide(),$(".filter-suggest-to-reset").hide(),$(".maintenance-no-performer-found").hide(),$("#mod-online-list").show()):a.hasFilter()&&(3==f&&$(".filter-recent-history-clear").addClass("isHidden"),$(".filter-no-performer-found").length||$(".filter-suggest-to-reset").show())});$("#mod-online-list-footer-action .filter-reset").bind("click",function(a){$(".filter-no-performer-found").hide();
$(".filter-suggest-to-reset").hide();$(".maintenance-no-performer-found").hide();$(".favorite-header-teaser").hide();$("#mod-online-list").show();e.filterClear();a.stopPropagation();a.preventDefault()});$(".filter-recent-history-clear").bind("click",y);$(".online-list-home-button").click(function(a){a.preventDefault();ToolMenu.online.filterClear(!0)});var r=$("#mod-online-list-footer-text");if(r.length)$(".seeMore",r).on("click",function(a){a.preventDefault();a=$(".seo-text",r);a.hasClass("isCollapsed")?
(a.removeClass("isCollapsed"),$("span",this).show()):(a.addClass("isCollapsed"),$("span",this).hide())});ToolBrowser.isMobile()||1==ToolPreference.getItemInt(45)&&ToolMenu.online.displayAlwaysVisible();ToolBrowser.isMobile()||(h=ToolPreference.getItemInt(46),ToolMenu.online.displaySizeSelect(h));return a}function B(){var b=new ModuleChat.ChatManager(Application.chat.config);Application.chat.initialState&&b.setInitialState(Application.chat.initialState);b.init("mod-chat-content","l-chat");ToolApp.event.on(12,
function(){if(!b.isVisible()){if("SP_VIDEO_PLAYER_EXTERN_ALREADY_PLAYED"in window&&SP_VIDEO_PLAYER_EXTERN_ALREADY_PLAYED){if("pluginReload"in SP_VIDEO_PLAYER_EXTERN_ALREADY_PLAYED){SP_VIDEO_PLAYER_EXTERN_ALREADY_PLAYED.pluginReload();return}SP_VIDEO_PLAYER_EXTERN_ALREADY_PLAYED.destroy();SP_VIDEO_PLAYER_EXTERN_ALREADY_PLAYED=void 0}b.close(51128)}});var a=new ModuleChatMenu.ChatMenuManager("sidebar-performer");ToolMenu.chat=a;b.setMenu(a);a.on(ModuleChatMenu.EVENT_ACTION,function(a,f,e){switch(f){case ModuleChatMenu.LOVE:b.actionLoveAdd();
break;case ModuleChatMenu.FAVORITE_ADD:b.actionFavoriteAdd();break;case ModuleChatMenu.FAVORITE_REMOVE:b.actionFavoriteRemove();break;case ModuleChatMenu.MESSAGING:b.actionMessagingSend();break;case ModuleChatMenu.TIP:b.actionTip();break;case ModuleChatMenu.REPORT:b.actionReportAbuse();break;case ModuleChatMenu.GO_TO_LIST_ONLINE:b.actionGoToListOnline(51021);break;case ModuleChatMenu.GO_TO_PROFILE:b.actionGoToProfile(e)}});$("#l-chat .js-action-home").bind("click",function(a){b.actionGoToListOnline(51022);
ToolMenu.hideAll();a.preventDefault();a.stopPropagation()});return b}var g,f,k,m;t.init=u;t.main=function(){u();var b=!!Application.chat.performerInfo;"SP_PARAMS"in window&&SP_PARAMS||(window.SP_PARAMS={});SP_PARAMS.playerLightConfig=ModuleChat.PLAYER_LIGHT_CONFIG;var a=A(Application.online);ToolApp.pageList.push(a);var c=B();ToolApp.pageList.push(c);var m=a.getMenuFilter();m&&(m.setupEventAndUi(),m.setStateLiveCamPreview(a.liveCamAsProfileIsEnabled()));var e=a.getFilterMobile();e&&e.init();var h=
function(){b||(a.openBefore(),g=a,$("#l-online").show(),a.openAfter(3));b&&Application.chat.performerInfo&&(c.openBeforeInit(Application.chat.performerInfo),g=c,$("#l-chat").show(),c.openAfterInit(Application.chat.performerInfo,3))};b||(0<Application.asyncLoadLate.length?Application.asyncLoadLate.push({url:ToolApp.IMAGE_ACTION_PANEL_SVG,operation:17}):setTimeout(2E3));if(b&&Application.chat.performerInfo)ToolApp.event.on(13,function(){c.emojiInitCurrent()});
ToolApp.event.on(20,function(){c.speechToTextInit()});if(ToolApp.disclaimerMustBeDisplayed())ToolApp.event.on(210,function(){ToolApp.disclaimerMustBeDark()&&h();window.setTimeout(function(){a.resize()},10)});ToolApp.disclaimerMustBeDark()||(h(),a.resize());var n=function(d,b,e){var p=g===c&&c.isVisible();p?(c.closeBefore(),c.close(51130)):(k=new Date,a.closeBefore());c.openBefore(d);c.fromAction=e;g=c;c.fromPageOnlineListType=2===e?f:void 0;p||a.close();window.scrollTo(0,0);$("#l-online").hide();
$("#l-chat").show();c.openAfter(b)},q=function(b){ToolMenu.pageHasJustChanged();k=new Date;c.closeBefore();a.openBefore();g=a;c.close(51129);$("#l-chat").hide();$("#l-online").show();a.openAfter(b);ToolMenu.chat.hide()};a.on(ModuleOnline.EVENT_PERFORMER_SELECTION,function(a,b){3===b.modelInfo.showType?ToolBrowser.redirectToUrl(Application.Config.url.root+"/model/"+b.modelInfo.nickname.toLowerCase()+"/"):n(b,2,2)});c.on(ModuleOnline.EVENT_PERFORMER_SELECTION,function(a,b){c.closeBefore();c.close(51127);
n(b,2,3)});c.onlineListSet(a);c.on(Layer.EVENT_CLOSE_AND_GOTO_ONLINE_LIST,;c.on(Layer.EVENT_ONLINE_LIST_PRE_REFRESH,;c.on(ModuleChat.EVENT_MODEL_STATE,function(b,c){a.performerStateChanged(c)});$(".js-action-goto-favorites").bind("click",function(b){var d=a.getMenuFilter();d&&(d.favoritePageSetStatus(!0),b.preventDefault(),b.stopPropagation(),g===a&&a.isVisible()||q(2))});$(".js-action-webcam-live").bind("click",function(b){var d=
g===a&&a.isVisible(),c=a.getMenuFilter();c&&c.filterClear();d||q(2);ToolMenu.hideAll();b.preventDefault();b.stopPropagation()});window.onpopstate=function(b){if(b=b.state)ToolMenu.hideAll(),a.canHandleHistoryPop(b)?q(1):c.canHandleHistoryPop(b)&&b.performer&&n({modelInfo:b.performer,spImageSoloObj:void 0},1,4)};StreamPlayerLogic.getInstance().setupUnload();var r=!1;$(window).resize(function(){r||(r=!0,window.setTimeout(function(){r=!1;e&&(ToolBrowser.isMobile()?e.isOpen()?e.resize():e.refreshUiButtonVisibility():
e.hide())}),g&&g.resize(1),ToolMenu.media&&ToolMenu.media.resize())});ToolApp.runOnFoundationInitialized(function(){var a=!1;$(window).scroll(function(){a||(a=!0,window.setTimeout(function(){a=!1;g.scroll()},150))})});ToolApp.sessionKeepOpenInit();"addEventListener"in window&&window.addEventListener("orientationchange",function(){g.orientationChanged()},!1);setTimeout(function(){(new ModuleSuggest.EmailResentConfirmationLink("boxRequestEmailListOnline")).init();"pwa"in Application&&Application.pwa&&
(ModulePwaInstallBanner.Manager.init(Application.pwa),ModulePwaInstallBanner.Manager.show())},1E3);!b&&ToolMenu.online&&ToolMenu.online.resizeMenu();var l=a.getFilterMobile();ToolApp.event.on(ToolApp.EVENT_HEADER_DISPLAYED,function(){l&&l.fadeIn()});ToolApp.event.on(ToolApp.EVENT_HEADER_HIDDEN,function(){l&&l.fadeOut()});ToolApp.event.on(ModuleOnline.EVENT_LIST_EMPTY,function(){a.onFilterChanged()})};t.setupListOnline=A})(AppOnlineAndChat||(AppOnlineAndChat={}));
var AppLandingDisclaimer;(function(a){a.main=function(){ToolApp.event.on(210,function(){ToolBrowser.redirectToUrl(Application.urlContinue)})}})(AppLandingDisclaimer||(AppLandingDisclaimer={}));
var LatestNew;
(function(q){function p(){ToolApp.runOnFoundationInitialized(function(){var b=!1;$(window).scroll(function(){b||(b=!0,window.setTimeout(function(){b=!1;f.scroll()},150))})});setTimeout(function(){$(".explain").slideUp("slow")},1E4);r();t();$("#mod-latestnew .mediaItem").unbind("click").bind("click",function(b){if(b.target){var a=$(b.target).closest(".thumb"),g=a.attr("data-abo"),h=0,k=0;if(!g){var d=a.attr("data-vip");d&&(h=parseInt(d,10));(d=a.attr("data-gift"))&&(k=parseInt(d,10))}d=parseInt(a.attr("data-mod"),
10);var c=parseInt(a.attr("data-mediatype"),10);a=a.attr("data-vid");b.preventDefault();b.stopPropagation();a?(b=parseInt(a,10),d&&b&&(!h||h&&k?f.videoTumbClick(d,b):g||k||f.addVipSubscriptionLatestNew(d,c,b))):d&&h&&f.addVipSubscriptionLatestNew(d,c)}});$("#btnScrollUp").bind("click",function(a){$("#btnScrollUp").fadeOut();$("html, body").animate({scrollTop:0},300)});var a=MediaRatingModule.Manager.getInstance();$(window).resize(;
$(window).on("orientationchange",function(b){f.resizeThumb();a.resize();a.fancyBoxIntersectionFix()})}function r(){var a=$('[data-fancybox="photo-gallery"]');$(document).off("click.fb-start");a.fancybox({loop:!0,buttons:["close"],hash:!1,clickOutside:"close",arrows:!1,preventCaptionOverlap:!0,idleTime:0,mobile:{preventCaptionOverlap:!0,idleTime:0,clickSlide:"close"},baseTpl:'<div class="fancybox-container latestnew-gallery-skin" role="dialog" tabindex="-1"><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>/<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption fancybox-caption--separate">{{caption}}</div></div><div class="fancybox-bg"></div></div>',
beforeShow:function(a,e){a.$refs&&a.$refs.container&&a.$refs.container.css("z-index",1004)},afterShow:function(a,e){if(e.opts&&e.opts.$thumb){var b=MediaRatingModule.Manager.getInstance(),h=e.opts.$thumb;b.mediaType=1;b.register(a,h);a.current.$content&&a.$refs&&a.$refs.caption&&b.fancyBoxIntersectionFix()}},beforeClose:function(){MediaRatingModule.Manager.getInstance().destroy()}})}function t(){if(Application.mediaVideoIdList.length)for(var a=0,b=Application.mediaVideoIdList.length;a<b;a++){var e=
Application.mediaVideoIdList[a];!1!==ToolStorage.videoPlayedIs(e)&&m(e,"state-played")}}function m(a,b,e){void 0===e&&(e=!0);a=$('a.thumb[data-vid="'+a+'"]');a.length&&(a=a.find(".vodListPlay"),a.length&&(e?a.addClass(b):a.removeClass(b)))}var l=0;q.main=function(){if(ToolApp.disclaimerMustBeDisplayed())ToolApp.event.on(210,function(){ToolApp.disclaimerMustBeDark()&&($("#mod-latestnew").removeClass("is-hidden"),p())});ToolApp.disclaimerMustBeDark()||p()};var f;(function(a){function b(a){var b="vod-video-id"+
a.videoId.toString(),d='<video id="'+b+'" class="video-js vodLocked" preload="auto" height="'+a.height+'" width="'+a.width+'" style="" poster="'+a.thumbnail+'"></video>';if(g){try{g.dispose()}catch(c){}g=void 0}$.fancybox.open(d,{loop:!0,buttons:["close"],hash:!1,clickSlide:!1,arrows:!1,preventCaptionOverlap:!0,idleTime:0,mobile:{preventCaptionOverlap:!0,idleTime:0,clickSlide:!1},hideScrollbar:!0,baseTpl:'<div class="fancybox-container video-gallery-skin latestnew-gallery-skin" role="dialog" tabindex="-1"><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>/<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption fancybox-caption--separate">{{caption}}</div></div><div class="fancybox-bg"></div></div>',
beforeShow:function(c,b){c.$refs&&c.$refs.container&&c.$refs.container.css("z-index",1004);a.caption&&c.$refs&&c.$refs.caption&&c.$refs.caption.html(a.caption)},afterShow:function(c){if(a.caption){var d=$(".fancybox-caption");d.html(a.caption);d.css({opacity:1,visibility:"visible"})}g=videojs(b,{controls:!0,autoHeight:!0,playsinline:!0,autoplay:!1,nativeControlsForTouch:!0,width:a.width,height:a.height,aspectRatio:a.dar,textTrackSettings:!1,html5:{nativeTextTracks:!1,hlsjsConfig:{maxBufferLength:15,
maxMaxBufferLength:24,maxBufferSize:7E6}}});if(1===a.isGift){var h=!1,k=!1,f=!1,l=function(){h&&k&&!f&&0<ToolApp.userInfo.videoVipGiftedRemaining&&(f=!0,ToolApp.userInfo.videoVipGiftedRemaining--,ToolApp.userVideoVipGiftedUpdateUi(Application.nbVipVideoGifted),ToolApp.userInfoRefreshFromDatabase("latestNews-video-vip"),a.videoId&&e(a.videoId))};g.on("play",function(){h=!0;l()});g.on("timeupdate",function(){k=!0;l()})}g.src(a.url);g.play();m(a.videoId,"state-played");d=MediaRatingModule.Manager.getInstance();
var v=$('a.thumb[data-vid="'+a.videoId+'"]');d.mediaType=2;d.register(c,v);c.current.$content&&c.$refs&&c.$refs.caption&&d.fancyBoxIntersectionFix()},beforeClose:function(){if(g){try{g.pause();g.dispose();var a=document.getElementById(b);a&&document.body.appendChild(a)}catch(u){}g=void 0}MediaRatingModule.Manager.getInstance().destroy()}})}function e(a){try{var b=$('[data-vid="'+a.toString(10)+'"] div.vodVip span');b.length&&b.removeClass().addClass("iconVipGift");var d=$('[data-vid="'+a.toString(10)+
'"] img.thumb-vip');d&&d.removeClass("thumb-vip");var c=$(".giftVideoNb");c.length&&c.is(":visible")&&c.html(ToolApp.userInfo.videoVipGiftedRemaining.toString(10))}catch(u){}}var g=void 0;a.videoTumbClick=function(a,k){m(k,"state-loading");n.videoInfo(a,k).done(function(a){a.playable?(ToolStorage.videoPlayedAppend(a.videoId),b(a)):(new Layer.InfoNoTitle).open(Translation.tr("animMediaVideoStatusOk"))}).fail(function(a){Layer.openErrorAjax(a)}).always(function(){m(k,"state-loading",!1)})};a.addVipSubscriptionLatestNew=
function(b,k,d){if(!(0<l)){var c,e=new Layer.Loader;e.open();n.getPerformer(b).done(function(g){e.close();if(c=g)if(l=1,d&&2==k&&0<ToolApp.userInfo.videoVipGiftedRemaining&&c.vipVideoGiftIsEnabled){var h=new Layer.VipVideoFree;h.on(Layer.EVENT_USE_FREE_VIDEO_VIP,function(c,e){h.destroy();l=0;$('a.thumb[data-vid="'+d+'"]').attr("data-gift",1);a.videoTumbClick(b,d)});h.on(Layer.EVENT_CLOSE,function(){h.destroy();l=0});h.open({nbFreeVideoVip:ToolApp.userInfo.videoVipGiftedRemaining,performerId:b,performerNickname:c.nickname,
mediaId:d,displayActionGoToBioPage:!0,bioPageLink:ToolPerformer.urlToBioPage(c.nickname)})}else{var f=new Layer.VipSubscription;f.on(Layer.EVENT_CLOSE,function(){f.destroy();l=0});f.on(Layer.EVENT_SUBSCRIBE,function(a){f.close();l=0;if(!ToolApp.redirectToLoginIfNotConnected()){var b=new Layer.Loader;b.open();ToolPerformer.Ajax.vodVipSubscriptionAdd(c.id).done(function(a){b.close();a=new Layer.InfoNoTitle;a.open(Translation.tr("successCustomerVodVipSubscribed",{"#MODEL#":c.nickname}));a.on(Layer.EVENT_CLOSE,
function(){ToolBrowser.reloadPage()});$(".jsVipSubscription").hide()}).fail(function(a){b.close();Layer.openErrorAjax(a)}).always(function(a){b.close()})}});f.open({performerId:c.id,performerNickname:c.nickname,amountWithCurrency:c.price.vodVipWithCurrencyOnly,displayActionGoToBioPage:!1,vipFreeEnabled:2!==k||c.vipVideoGiftIsEnabled||0==ToolApp.userInfo.videoVipGiftedRemaining,bioPageLink:"",videoTotalSecond:c.videoTotalSecond,videoTotalMinute:c.videoTotalMinute,photoNb:c.photoNbVip,videoNb:c.videoCount.vip});
$(".js-performer-nickname").html(c.nickname)}}).fail(function(a){e.close();Layer.openErrorAjax(a)}).always(function(a){e.close()})}};a.videoIsNowAGift=e;a.scroll=function(){var a=1E3<$(window).scrollTop(),b=$("#btnScrollUp");a&&b.is(":hidden")&&b.fadeIn();!a&&b.is(":visible")&&b.fadeOut()};a.resizeThumb=function(){var a=$(".list a:first-child").width(),b=Math.round(3*a/4);$(".list a").each(}})(f||(f={}));var n;(function(a){a.videoInfo=function(a,e){return Core.Ajax.post("/video/getVideo/",
{performerId:a,videoId:e})};a.getPerformer=function(a){return Core.Ajax.post("/news/getPerformer",{performerId:a})}})(n||(n={}))})(LatestNew||(LatestNew={}));
var AppUserMessaging2;
(function(n){var y=0,z=0,C=0,I=0,A=0;n.showMoreMessageInfo={};var D,J,E=$("#l-page"),k=new PIP.Manager("#pip-container"),K=ToolBrowser.Orientation.getValue(),B=!1,F=1,h=$(".thread"),p=$(".thread2");n.main=function(){window.WebVTT=!0;e.initContainerClassName(E);f.addTableEvent();ToolApp.event.on(10,;var b=$(".reply-message");f.resizeTextarea(b);var r=ToolPreference.getItemInt(53);ToolBrowser.isMobile()&&(r=0);b.off("keyup.textarea").on("keyup.textarea",function(a){r&&
"Enter"==(a.key||a.keyCode)?a.shiftKey?f.resizeTextarea(b):$(".jsSend").trigger("click"):f.resizeTextarea(b)});$(".jsSend").on("click",function(a){a.preventDefault();b.css({height:"34px"});if(!f.checkIfAllowed())return f.openNotAllowedLayer(),!1;if(""==b.val().trim())return!1;f.send();return!1});$(".jsMoreConversation").click(function(a){a.preventDefault();a=$(".thread-info");var b=a.data("offset");b+=50;a.data("offset",b);e.loadingSpinShow();m.getList(b).done(function(a){w.renderTable(a);e.loadingSpinHide()})});
$("#mod-messaging").bind("click",function(a){if(a.target){var b=$(a.target).closest(".js-video-link");b&&0<b.length&&(f.videoPlayClick(b),a.preventDefault(),a.stopPropagation())}});$(window).resize(function(){e.initContainerClassName(E);e.isLayoutSmall()&&K!=ToolBrowser.Orientation.getValue()&&(K=ToolBrowser.Orientation.getValue(),f.scrollThread());f.resizeThreadDesktopOnly();f.resizeConversationList();f.resizeVideoIfPossible();f.determineMessageLayoutVerticalAlignment();e.calculateReplyTextareaWidth();
B&&e.isLayoutSmall()&&$(".conversationList").hide();B||e.isLayoutSmall()||(Application.nickname&&Application.nickname.length?e.openConversation():e.openFirstConversation())});$(".thread").on("click","#jsLoadMore",function(a){a.preventDefault();f.showMore(z)});w.renderTable(Application.conversationList);Application.nickname&&Application.nickname.length&&$(".jsView").each(function(){$(this).attr("data-nickname").toLowerCase()==Application.nickname&&$(this).trigger("click")});$(window).off("popstate").on("popstate",
function(a){a=a.originalEvent.state;$.isEmptyObject(a)?f.goInboxPage():f.view(a.modelId)});$(".searchBox input[name=search]").on("keyup",function(){var a=$(this).val().toLowerCase();e.removeConversationList();""==a?($(".conversation").show(),$(".searchCancel").hide()):($(".conversation").hide(),$(".searchCancel").show(),$(".conversation").each(function(){0!==$(this).data("nickname").toLowerCase().lastIndexOf(a,0)||$(this).hasClass("fromSearch")||e.copyMessage($(this))}),$(".conversation").each(function(){0<
$(this).data("nickname").toLowerCase().lastIndexOf(a)&&!$(this).hasClass("fromSearch")&&e.copyMessage($(this))}));e.resizeJQueryNiceScrollPlugin($(".conversationList"))});$(".searchCancel").on("click",function(a){a.preventDefault();e.cancelSearch()});$(".l-header").on("click",".deleteConversation",;$(".l-header").on("click",".jsPrevious",function(a){a.preventDefault();history.pushState({},"",Application.Config.url.root+
"/messaging/");f.goInboxPage();ToolFooter.show()});$(".thread").on("click",".deleteMessage",function(a){a.preventDefault();a=$(this).parent();var b=$(this).parent().prev();f.deleteMessage(a,b)});$(".thread").on("click",".unlockMessage",function(a){a.preventDefault();a=$(this).closest(".message");f.messagePurchase(a)});$(".thread").on("click",".unlockedMessage",;$(".thread").on("click",".showAllMedia",function(a){a.preventDefault();
a=$(this).closest(".message");$(".mediaList",a).addClass("showAll");e.resizeJQueryNiceScrollPlugin($(".thread"))});$(".deleteAllConversation").on("click",function(){f.deleteAllConversation()});h.on("scroll",function(){h.removeClass("scrolled-to-bottom");h.removeClass("scrolled-to-top");h.addClass("resizable-scroll");3>=Math.abs(h[0].scrollHeight-h[0].clientHeight-h[0].scrollTop)?(h.removeClass("resizable-scroll"),h.addClass("scrolled-to-bottom")):0===h[0].scrollTop&&(h.removeClass("resizable-scroll"),
h.addClass("scrolled-to-top"));e.processLazyImage()});if(EmojiTool.isSupported()){J=new EmojiTool.Manager;var c={emojiCategoryList:{},mainContainerSelector:"#unicodeEmojiPagePrivateMessageArea",textareaSelector:".reply-message",emojiCategoryLabelList:EmojiTool.getCategoryLabelList(),triggerButtonConfig:{enabled:!0,selector:".action-open-emoji-private-message-area",autoPosition:UnicodeEmojiV2.Library.AUTO_POSITION_TOP,autoPositionMargin:5}};"undefined"!==typeof window.smileyConfig&&(c.emojiCategoryList=
window.smileyConfig);J.init(c);$(".action-open-emoji-private-message-area").show()}else $(".action-open-emoji-private-message-area").hide()};var f;(function(b){function f(){if(!(0<l)){l=1;var a=m.getList(0);e.loadingSpinShow();a.done(function(a){e.emptyConversationList();null!=a&&w.renderTable(a);e.loadingSpinHide()}).fail(function(){}).always(function(){l=0;e.loadingSpinHide()})}}function c(b){b="<div class='message fromClient'>"+e.formatString(b);p.append(b+"</div>");p.outerHeight()>=h.outerHeight()&&
(p.removeClass("layout-message-list-bottom-top"),e.resizeJQueryNiceScrollPlugin(h));a()}function a(){var a=$(".thread"),b=a[0].scrollHeight;a.stop().animate({scrollTop:b},1)}var l=0,d=0,G=0,H=0;b.videoPlayClick=function(a){var b=a.attr("data-pvid");if(b&&(a=a.closest("div.message"))&&(a=a.attr("data-id"))&&(a=parseInt(a,10),!(1>a||(b=b.split("/"),2>b.length)))){var c=parseInt(b[0]),d=parseInt(b[1]);0<H||(H=d,AppPerformerProfile2.Action.uiVideoStateSet(d,"state-loading"),AppPerformerProfile2.Ajax.videoInfo(c,
d,{messageId:a}).done(function(a){a.playable?(document.exitPictureInPicture=null,AppPerformerProfile2.Action.videoPlay(a,void 0,void 0,!1)):(new Layer.InfoNoTitle).open(Translation.tr("animMediaVideoStatusOk"))}).fail(function(a){Layer.openErrorAjax(a)}).always(function(){AppPerformerProfile2.Action.uiVideoStateSet(d,"state-loading",!1);H=0}))}};b.deleteConversation=function(a){var c=new Layer.MessagingDeleteConversationConfirmation,d={nickname:$(".model-name").text()};c.on(Layer.EVENT_CONFIRM_YES,
function(){m.deleteConversation(a).done(function(){b.goInboxPage()}).fail(function(a){Layer.openError(Translation.tr("errorGenericErrorDetectedPleaseRetry"),a.code)})});c.open(d)};b.deleteAllConversation=function(){var a=new Layer.MessagingDeleteAllConversationConfirmation;a.on(Layer.EVENT_CONFIRM_YES,function(){m.deleteAllConversation().done(function(){$(".deleteAllConversation").remove();$(".searchBox").remove();$(".conversationList").remove();$(".no-message").show();b.goInboxPage()}).fail(function(a){Layer.openError(Translation.tr("errorGenericErrorDetectedPleaseRetry"),
a.code)})});a.open()};b.deleteMessage=function(a,c){var d=new Layer.MessagingDeleteMessageConfirmation;d.on(Layer.EVENT_CONFIRM_YES,function(){var c=a.data("id");m.deleteMessage(c).done(function(){$('.message[data-id="'+c+'"]').each(function(){var a=$(this).prev();a.hasClass("messageDate")&&a.remove();$(this).remove()});if(0==$(".thread .message").length)b.goInboxPage();else{var a=$(".thread"),d=$(".thread2");d.outerHeight()<=a.outerHeight()&&(d.addClass("layout-message-list-bottom-top"),e.resizeJQueryNiceScrollPlugin(a))}}).fail(function(a){Layer.openError(Translation.tr("errorGenericErrorDetectedPleaseRetry"),
a.code)})});d.open()};b.messagePurchase=function(a){var c=new Layer.MessagingPurchaseMessageConfirmation;c.on(Layer.EVENT_CONFIRM_YES,function(a,c){var d=new Layer.Loader;d.open();m.messagePurchase(c.messageId).done(function(){b.view(z)}).fail(function(a){Layer.openError(Translation.tr("errorGenericErrorDetectedPleaseRetry"),a.code)}).always(function(){d.close()})});var d=a.data("id"),g=a.data("price-raw");g&&(g=parseFloat(g),g=ToolApp.userInfo.creditAmount<g,a={performerNickname:$(".model-name-text").contents()[0].nodeValue,
mediaStatMessageHtml:a.data("content"),priceAmountWithCurrency:a.data("price"),messageId:parseInt(d,10),clientCreditAmountWithCurrency:ToolApp.userInfo.creditAmountWithCurrency,creditNoMoreAvailable:g},c.open(a))};b.messagePurchaseRate=function(a){var b="",c=$(".model-name").find(".model-name-text").contents()[0].nodeValue;null!==c&&(b=c);var d=new Layer.ShowRating;b={performerId:z,performerNickname:b,note:0,noteAverage:void 0,message:"",creditNoMoreAvailable:!1,layoutId:3};var g=parseInt(a.data("paid-id"));
d.on(Layer.EVENT_SUBMIT,function(b,c){if(d.getNote()){b.close();var e=new Layer.Loader;e.open();ToolPerformer.Ajax.paidMessageRating(c.performerId,g,c.note,c.message).done(.fail(function(a){Layer.openError(Translation.tr("errorGenericErrorDetectedPleaseRetry"),a.code)}).always(function(){e.close()})}});d.open(b)};b.loadList=f;b.addTableEvent=function(){$(".conversationList").off().on("click",".jsView",function(a){var c=parseInt($(this).attr("data-id"),
10),d=$(this).attr("data-nickname");history.pushState({modelId:c},"",Application.Config.url.root+"/messaging/model/"+d.toLowerCase()+"/");a.originalEvent&&(F=0);e.pipDestroy();z=c;b.view(c,this)})};b.view=function(a,c){n.showMoreMessageInfo={};$(".l-header").css("z-index",99);if(!(0<d)){d=1;void 0!==c&&(e.isLayoutSmall()?$(c).toggleClass("row-selected"):$(c).siblings().removeClass("row-selected"),$(c).removeClass("unread"));ToolFooter.hide();var g=m.getConversation(a);e.loadingSpinShow();"undefined"!=
typeof D&&D.destroy();b.checkIfAllowed()?D=new DropzoneMessaging2.Loader("reply-image",!0):$(".reply-image").click(b.openNotAllowedLayer);g.done(function(b){B=!0;n.showMoreMessageInfo=b.showMoreMessageInfo;e.isLayoutSmall()&&($(".conversationList").hide(),$(".searchBox").hide());$(".messagingThread").show();var d="";void 0!==c&&(d=$(c).find(".profileImg"),!b.model.isOnline&&d.hasClass("performerIsOnline")&&d.removeClass("performerIsOnline"),d=d.children("img").attr("src"));k&&b.model.showStreamInfo&&
(d.length&&(b.model.profileImage=d),k.playerLoaded?k.setupPlayerContainer(b.model):e.ensurePipManagerPlayerLoad(function(a){a&&a.length||k.setupPlayerContainer(b.model)}));99<b.unreadMessageCount&&(b.unreadMessageCount=99);$(".message-count-new").text(b.unreadMessageCount);w.renderMessageList(a,b,d)}).fail(function(a){Layer.openError(Translation.tr("errorGenericErrorDetectedPleaseRetry"),a.code);ToolFooter.show()}).always(function(){d=0;void 0!==c&&($(c).hasClass("row-selected")||$(c).addClass("row-selected"));
e.loadingSpinHide()})}};b.showMore=function(a){0<d||(d=1,m.getConversation(a).done(function(a){n.showMoreMessageInfo=a.showMoreMessageInfo;99<a.unreadMessageCount&&(a.unreadMessageCount=99);$(".message-count-new").text(a.unreadMessageCount);var c=0,d="";a.list.reverse();for(var e=0;e<a.list.length;e++){var g=a.list[e],l=!1;g.dateEnvoieTs-120>c&&(c=g.dateEnvoieTs,l=!0);d+=n.View.renderOneMessage(a.model.id,g,l)}c=$("#jsLoadMore");e=$(".thread2").height();$(d).insertAfter(c);g=$(".thread2").height();
b.initFancybox();d=0;a.showMoreMessageInfo.hasMore||($(c).remove(),d=43);a=g-e;c=$(".thread").scrollTop();$(".thread").scrollTop(c+a-d)}).fail(.always()};b.send=function(a){var b=$(".reply-message"),d=$(".thread-info"),e=parseInt(d.attr("data-id"),10);d=parseInt(d.attr("data-to"),10);var g=parseInt($("#sessionMessagingId").val(),10),l=b.val().trim();
0<e&&""!=l&&c(l);b.val("");0<G||(G=1,m.send(e,d,"hello",l,g).done(function(){if(NotificationTool.canShowPopup(42)){var b=new Layer.MessagingNotification,c={performerNickname:$(".model-name").text(),performerProfileImg:$(".model-name img").attr("src")};b.open(c)}void 0!==a&&a()}).fail(function(a){Layer.openErrorAjax(a)}).always(function(){G=0}))};b.addMessage=c;b.resizeThreadDesktopOnly=function(){if(!e.isLayoutSmall()){var a=$(window).height()-147;$(".thread").height(a)}};b.emptyThread=function(){$(".thread2").empty()};
b.scrollThread=a;b.goInboxPage=function(){$(".conversationList").show();$(".searchBox").show();$(".messagingThread").hide();$(".messaging-header2").remove();var a=$(".searchInput");a.length&&0==a.val().length&&f();e.pipDestroy();B=!1;$("h1").show()};b.initFancybox=function(){$('[data-fancybox="message-photo-gallery"]').fancybox({loop:!0,buttons:["close"],hash:!1,clickOutside:"close",arrows:!1,mobile:{clickOutside:"close"},baseTpl:'<div class="fancybox-container photo-gallery-skin" role="dialog" tabindex="-1"><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>/<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div></div><div class="fancybox-bg"></div></div>'})};
b.checkIfAllowed=function(){return Application.Config.messagingAllowed==AppPerformerProfile.MESSAGING_ALLOWED_YES};b.openNotAllowedLayer=function(){var a=new Layer.MessageSendNoCredit,b={performerNickname:$(".model-name").text()};a.open(b)};b.resizeTextarea=function(a){a.css({height:"34px"});var c=a[0].scrollHeight;131<c&&(c=131);131==c?a.css("overflow-y","auto"):a.css("overflow-y","hidden");0==c&&(c=34);a.height(c-14);""==a.val().trim()&&34<c&&(a.height(20),a.css("overflow-y","hidden"));b.resizeThreadDesktopOnly();
b.scrollThread()};b.resizeConversationList=function(){var a=$(".conversationList");e.isLayoutSmall()?(a.css("height","auto"),e.resizeJQueryNiceScrollPlugin(a)):(a.css("height","calc(100vh - 168px)"),e.initJQueryNiceScrollPlugin(a))};b.resizeVideoIfPossible=function(){$(".fancybox-is-open").length&&(AppPerformerProfile2.resizeFancyBoxVideoContainer("#vod-container"),"undefined"!==typeof MediaRatingModule2&&MediaRatingModule2.Manager.getInstance().resize())};b.determineMessageLayoutVerticalAlignment=
function(){p.outerHeight()<=h.outerHeight()?p.addClass("layout-message-list-bottom-top"):(p.removeClass("layout-message-list-bottom-top"),e.resizeJQueryNiceScrollPlugin(h),b.scrollThread())}})(f=n.Action||(n.Action={}));var w;(function(b){function r(c,a,l){var d="";a.idExpediteur==c&&(d+="fromModel");a.idDestinataire==c&&(d+="fromClient");var f="";0!=c&&(f="<a href='' class='deleteMessage'><svg role='img'><use xlink:href='"+ToolApp.imageIconSvgGetUrl()+"#trash' href='"+ToolApp.imageIconSvgGetUrl()+
"#trash'></use></svg></a>");var r="";l&&(r+="<div class='messageDate "+d+"Date'>"+a.dateEnvoie+"</div>");var g=l="",h="",n="",k="",m="",t=[],q=!1;if("priceInfo"in a&&a.priceInfo&&!a.isBought){if("mediaStat"in a&&a.mediaStat){m="paidMessage";q=[];k=a.priceInfo.amountWithCurrency;if("image"in a.mediaStat&&0<a.mediaStat.image){q.push(a.mediaStat.image+" "+Translation.tr("itemGenericPhotoCount"));var u;for(u=0;u<a.mediaStat.image;u++){var p=Math.floor(10*Math.random());var v='<a class="thumb unlockMessage"><div class="wrapper">';
v+='<i class="fi fi-lock"></i>';v+='<img class="image" src="'+Application.Config.url.static1+"/img/messaging/blur-img-"+p+'.jpg" alt="" />';v+="</div></a>";t.push(v)}}if("videoDurationSecondsList"in a.mediaStat&&0<a.mediaStat.videoDurationSecondsList.length)for(q.push(a.mediaStat.videoDurationSecondsList.length+" "+Translation.tr("itemGenericVideoCount")),u=0;u<a.mediaStat.videoDurationSecondsList.length;u++)p=Math.floor(10*Math.random()),v='<a class="thumb video unlockMessage"><div class="wrapper">',
v+='<i class="fi fi-lock"></i>',v+='<img class="image" src="'+Application.Config.url.static1+"/img/messaging/blur-img-"+p+'.jpg" alt="" />',"undefined"!=typeof a.mediaStat.videoDurationSecondsList[u]&&(v+='<div class="vodDuration">'+e.formatVideoDuration(a.mediaStat.videoDurationSecondsList[u])+"</div>"),v+='<div class="vodListPlay"></div>',v+="</div></a>",t.push(v);q=q.join(", ");k=' data-content="'+q+'" data-price="'+k+'" data-price-raw="'+a.priceInfo.amount+'"';g=g+('<div class="labelNbItem">'+
q+"</div>")+('<button class="button unlockMessage">'+Translation.tr("actionGenericPurchaseWithPriceIndicatedUnlock",{"#PRICE#":a.priceInfo.amountWithCurrency})+"</button>")}q=!0}if("undefined"!=typeof a.imageList&&0<a.imageList.length||"undefined"!=typeof a.videoList&&0<a.videoList.length){if("undefined"!=typeof a.imageList)for(var x in a.imageList)a.imageList.hasOwnProperty(x)&&(u=a.imageList[x],t.push(b.renderPicture(u.thumb,u.regular)));if("undefined"!=typeof a.videoList&&0<a.videoList.length)for(x=
0;x<a.videoList.length;x++)t.push(b.renderVideo(c,a.videoList[x],q))}0<t.length&&(l="<div class='mediaList'>",16<t.length&&t.splice(15,0,'<a class="thumb showAllMedia"><div class="wrapper">'+('<span class="plus">+ '+(t.length-15)+"</span>")+"</div></a>"),l+=t.join(""),l+="</div>");""!==a.message&&(n+='<div class="msg2-text">'+e.formatString(a.message)+"</div>");t="";a.isBought&&("mediaStat"in a&&a.mediaStat&&(q=[],"mediaStat"in a&&a.mediaStat&&q.push(a.mediaStat.image+" "+Translation.tr("itemGenericPhotoCount")),
"videoDurationSecondsList"in a.mediaStat&&0<a.mediaStat.videoDurationSecondsList.length&&q.push(a.mediaStat.videoDurationSecondsList.length+" "+Translation.tr("itemGenericVideoCount")),q=q.join(", "),t='data-paid-id="'+a.idPayingMessage+'"',m+="paidMessage isBought",h='<div class="labelNbItem">'+q+"</div>"+('<div class="labelPurchasedItem">'+Translation.tr("labelMediaYouPurchasedContent")+"</div>")),a.isRated||(h+='<button class="button unlockedMessage">'+Translation.tr("labelMediaGiveYourFeedback")+
"</button>"),f="");d="<div data-id='"+a.idMessage+"' class='message "+d+" "+m+"' "+k+t+">";d=d+l+g+h;d+=n;a.isBought||(d+=f);0!=a.lu&&a.idDestinataire==c&&(d+="<img class='messageRead' src='"+Application.Config.url.static1+"/img/icon/messageRead.png' alt='' />");d+="</div>";ToolBrowser.isTouch()||(d='<div class="message-wrap">'+d+"</div>");return r+=d}b.renderTable=function(c){for(var a="",b=0;b<c.length;b++){var d=c[b],r=d.profileImg,h=d.remoteParticipantNickname,g=d.remoteParticipantId,k="";1==
d.unread&&(k=" unread");0!=d.remoteParticipantId||r||(r="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");var n=d.lastMessageDate+"<br />\n\t\t\t\t\t"+d.lastMessageHour;d.today&&(n=d.lastMessageHour);var m="profileImg";d.isPerformerOnline&&(m+=" performerIsOnline");a+='\n\t\t\t\t\t<tr class="jsView conversation'+k+'" data-id="'+g+'" data-nickname="'+StringTool.escapeHtml(h)+'">\n\t\t\t\t\t\t<td class="'+m+'">\n\t\t\t\t\t\t\t<img src="'+r+'" alt="" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="ellipsis">\n\t\t\t\t\t\t\t<div class="sender">\n\t\t\t\t\t\t\t\t<span>'+
StringTool.escapeHtml(h)+'</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="lastMessage">\n\t\t\t\t\t\t\t\t<span>'+StringTool.escapeHtml(d.message)+'</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="sentDate">\n\t\t\t\t\t\t\t'+n+"\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t"}$(".conversationList table tbody").append(a);a=$(".deleteAllConversation");5<=c.length&&(a.removeClass("isHidden"),a.text(Translation.tr("actionMessagingDeleteAllDiscussion")+"("+c.length+")"));
f.addTableEvent();setTimeout(function(){f.resizeConversationList()},500);e.isLayoutSmall()||(F=1,Application.nickname&&Application.nickname.length?e.openConversation():e.openFirstConversation())};b.renderOneMessage=r;b.renderMessageList=function(b,a,l){clearTimeout(I);var c="";0!=a.model.id&&(c='\n\t\t\t\t\t<a class="button deleteConversation">\n\t\t\t\t\t\t<svg role="img" class="iconxl3">\n\t\t\t\t\t\t\t<use xlink:href="'.concat(ToolApp.imageIconSvgGetUrl(),'#cross" href="').concat(ToolApp.imageIconSvgGetUrl(),
'#trash"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t'));var h=$(".messaging-header2");c='\n\t\t\t\t<div class="messaging-header2">\n\t\t\t\t\t<div class="l-content-center">\n\t\t\t\t\t\t<div class="header-title">\n\t\t\t\t\t\t\t<svg role="img" class="iconxl3">\n\t\t\t\t\t\t\t\t<use xlink:href="'.concat(ToolApp.svgMainGetUrl(),'#messaging" href="').concat(ToolApp.svgMainGetUrl(),'#messaging"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span>').concat(Translation.tr("titleMessaging"),'</span>\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a class="button messaging-back jsPrevious">\n\t\t\t\t\t\t\t<svg role="img" class="iconxl3">\n\t\t\t\t\t\t\t\t<use xlink:href="').concat(ToolApp.imageIconSvgGetUrl(),
'#previous" href="').concat(ToolApp.imageIconSvgGetUrl(),'#previous"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="model-name"></div>\n\t\t\t\t\t\t')+c+"\n\t\t\t\t\t</div>\n\t\t\t\t</div>";e.isLayoutSmall()?$(".l-header").append(c):h.length||$(".l-header").append(c);f.resizeThreadDesktopOnly();f.emptyThread();c=$(".messaging-header2");var k=$(".thread");h=$(".thread2");k.getNiceScroll()&&k.getNiceScroll().remove();e.initJQueryNiceScrollPlugin(k);if(0==a.model.id)void 0===
a.model.nickname&&(a.model.nickname="Unknown"),$(".model-name",c).empty(),""!=l&&$(".model-name",c).append('<img src="'+l+'" />'),$(".model-name",c).append(a.model.nickname),$(".model-name",c).attr("data-performer-id",a.model.id),$(".replyBox").addClass("isHidden"),$(".thread").css("overflow-y","hidden"),k.height(k.height()+34);else{void 0===a.model.nickname&&(a.model.nickname="Unknown");$(".model-img",c).attr("src",a.model.profilImg);$(".model-img",c).height($(".model-img",c).width()/1.83);$(".model-name",
c).empty();var g=ToolPerformer.urlToBioPage(a.model.nickname);a.model.isOnline&&(g=ToolPerformer.urlToChatPage(a.model.nickname));""!=l&&$(".model-name",c).append('<a href="'+g+'" class="model-name-img"><img src="'+l+'" /></a>');$(".model-name",c).append('<a href="'+g+'" class="model-name-text">'+a.model.nickname+"</a>");$(".model-name",c).attr("data-performer-id",a.model.id);$(".model-name",c).removeClass("performerIsOnline");$(".model-name-text",c).find("span").remove();a.model.isOnline&&($(".model-name",
c).addClass("performerIsOnline"),$(".model-name-text",c).append("<span>online</span>"));$(".reply-message").attr("placeholder",Translation.tr("placeholderMessagingWriteToPerformer",{"#NICK#":a.model.nickname}));$(".replyBox").removeClass("isHidden");$(".thread").css("overflow-y","auto");f.resizeThreadDesktopOnly();f.emptyThread()}0!=a.model.id&&($(".replyBox").show(),e.calculateReplyTextareaWidth());l=0;a.showMoreMessageInfo.hasMore&&h.append('<a class="button actionViewMoreMessages" id="jsLoadMore">'+
Translation.tr("actionMediaMoreContent")+"</a>");for(c=y=0;c<a.list.length;c++){g=a.list[c];var n="",m=!1;g.dateEnvoieTs-120>l&&(l=g.dateEnvoieTs,m=!0);m=r(a.model.id,g,m);if("undefined"!=typeof g.imageList)for(var p in g.imageList)g.imageList.hasOwnProperty(p)&&y++;if("undefined"!=typeof g.videoList)for(var w in g.videoList)g.videoList.hasOwnProperty(w)&&y++;n+=m;h.append(n)}f.initFancybox();k.off("touchstart").on("touchstart",;k.off("touchmove").on("touchmove",
function(a){var c=a.originalEvent.touches[0].clientY,b=$(a.currentTarget).scrollTop(),d=0>C-c?"up":"down";0==b&&"up"==d?a.preventDefault():b>=a.currentTarget.scrollHeight-$(a.currentTarget).outerHeight()&&"down"==d&&a.preventDefault();C=c});f.determineMessageLayoutVerticalAlignment();0==y&&e.loadingSpinHide();I=setTimeout(e.loadingSpinHide,5E3);f.scrollThread();p=$(".thread-info");p.attr("data-id",b);p.attr("data-to",a.model.id);$("h1").hide();setTimeout(function(){e.resizeJQueryNiceScrollPlugin(k);
0===F&&k.removeClass("did-auto-scroll");0<y&&e.processLazyImage()},1E3)};b.renderVideo=function(c,a,b){var d="",l="";b||"undefined"==typeof a.videoId||(l="js-video-link",d='data-vid="'+a.videoId+'" data-pvid="'+c+"/"+a.videoId+'"');b&&(l="unlockMessage",a.thumb=Application.Config.url.static1+"/img/messaging/blur-img-"+Math.floor(10*Math.random())+".jpg");c='<a class="thumb video-image-loading video '+l+'" href="'+a.thumb+'" '+d+">";c+='<div class="wrapper">';b&&(c+='<i class="fi fi-lock"></i>');c+=
'<img class="image lazy" width="320" height="240" data-src="'+a.thumb+'" alt="" />';c+='<span class="image-loading-spinner"></span>';"undefined"!=typeof a.durationSeconds&&(a=e.formatVideoDuration(a.durationSeconds),c+='<div class="vodDuration">'+a+"</div>");return c+'<div class="vodListPlay"></div></div></a>'};b.renderPicture=function(c,a){var b='<a class="thumb image-loading" href="'+a+'" data-fancybox="message-photo-gallery">   <div class="wrapper">'+('       <img class="image lazy" data-src="'+
c+'" alt="" />');b+='       <span class="image-loading-spinner"></span>';b+="   </div>";return b+="</a>"}})(w=n.View||(n.View={}));var e;(function(b){function e(){A&&(clearTimeout(A),A=0);var c=$("img.lazy").get().filter(;c.length?A=setTimeout(function(){c.forEach(},50):(h.hasClass("resizable-scroll")&&b.resizeJQueryNiceScrollPlugin(h),h.hasClass("did-auto-scroll")||(h.addClass("did-auto-scroll"),
setTimeout(function(){f.scrollThread()},250)))}b.loadingSpinShow=function(){$("#app-loader").show();$(".messagingThread").css({opacity:.5})};b.loadingSpinHide=b.formatString=function(c){c=StringTool.escapeHtml(c);c=String(c).replace(/\r/g,"");c=c.replace(/\n\s*\n+/g,"\n\n");return c=c.replace(/\n/g,"<br/>")};b.emptyConversationList=function(){$(".conversationList table tbody").html("")};b.copyMessage=function(c){c=c.clone();
c.addClass("fromSearch").removeClass("active").show();var a=c.data("nickname");0==$('.fromSearch[data-nickname="'+a+'"]').length&&(0<$(".fromSearch").length?$(".fromSearch").last().after(c):$(".conversationList tbody").prepend(c))};b.removeConversationList=function(c){void 0===c&&(c="fromSearch");"fromSearch"===c&&$(".fromSearch").remove()};b.cancelSearch=b.initContainerClassName=function(c){c.removeClass("layout-small-screen");c.removeClass("layout-large-screen");
var a=ToolBrowser.viewPortSize();c.addClass(1024>a.width?"layout-small-screen":"layout-large-screen")};b.isLayoutSmall=function(){return E.hasClass("layout-small-screen")};b.openFirstConversation=b.openConversation=function(){$(".conversationList").find(".jsView").each(function(){$(this).attr("data-nickname").toLowerCase()==Application.nickname&&$(this).trigger("click")})};b.initJQueryNiceScrollPlugin=function(c){if(ToolApp.jQueryNiceScrollPluginLoaded())if(b.isLayoutSmall())try{c.getNiceScroll().remove()}catch(a){}else c.niceScroll({cursorcolor:"#fff",
cursorborder:"none",background:"none",horizrailenabled:!1})};b.resizeJQueryNiceScrollPlugin=function(c){ToolApp.jQueryNiceScrollPluginLoaded()&&(b.isLayoutSmall()||c.getNiceScroll().resize())};b.formatVideoDuration=function(c){var a=Math.floor(c/60);if(60<a){var b=Math.floor(a/60);a=b+":"+(10>a%60?"0":"")+a%60}else a=String(a);return a+(":"+(10>c%60?"0":"")+c%60)};b.processLazyImage=e;b.loadImage=function(c,a){if(c.dataset.src){var e=$(c);if(e.length){e.attr("src",c.dataset.src);e.removeAttr("data-src");
e.removeClass("lazy");var d=e.closest(".thumb");d.length&&(e.on("load",function(){d.removeClass("image-loading");d.removeClass("video-image-loading");d.addClass("image-loaded");b.resizeJQueryNiceScrollPlugin(h);a()}),e.on("error",function(){var a=d.closest(".message");a.length&&a.addClass("isHidden")}))}}};b.calculateReplyTextareaWidth=function(){var c=$(".replyBox"),a=c.find(".jsSend").outerWidth(),b=c.find(".jsReply").outerWidth(),d=35;ToolBrowser.isMobile()&&(d=0);a=Math.round(a+b+d)+5;c.find(".reply-message").attr("style",
"width: calc(100% - "+a+"px)")};b.pipDestroy=function(){k&&(k.isPlaying()&&k.stop(),k.hide(),k.destroy())};b.ensurePipManagerPlayerLoad=function(c){var a=5,b=!1,d=setInterval(function(){k.playerLoaded&&(b=!0);b?(clearInterval(d),c()):(0!=a||b||(clearInterval(d),c("Error: PIP's video player could not be loaded")),a--)},1E3)}})(e=n.Tool||(n.Tool={}));var m;(function(b){b.getList=function(b){return Core.Ajax.post("/messaging/getList/",{offset:b})};b.getConversation=function(b){return Core.Ajax.post("/messaging/view/",
{id:b,showMoreMessageInfo:n.showMoreMessageInfo})};b.send=function(b,c,a,e,d){return Core.Ajax.post("/messaging/sendMessage/",{idMessageParent:b,performerId:c,subject:a,content:e,sessionMessagingId:d,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.deleteConversation=function(b){return Core.Ajax.post("/messaging/deleteConversation/",{performerId:b,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.deleteAllConversation=function(){return Core.Ajax.post("/messaging/deleteAllConversation/",
{csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.deleteMessage=function(b){return Core.Ajax.post("/messaging/deleteMessage/",{messageId:b,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};b.messagePurchase=function(b){b=Core.Ajax.post("/messaging/purchaseMessage/",{messageId:b,csrfProtectionToken:ToolApp.getCsrfProtectionToken()});b.done(function(b){b&&"userInfo"in b&&ToolApp.userInfoUpdateUi(b.userInfo)});return b}})(m||(m={}))})(AppUserMessaging2||(AppUserMessaging2={}));
var AppPerformerProfile;
(function(e){function k(){$(".jsAddAsFavorite").on("click",function(a){a.preventDefault();c.favoriteAdd(Application.performer)});$(".jsRemoveAsFavorite").on("click",function(a){a.preventDefault();c.favoriteRemove(Application.performer)});$(".jsVipSubscription").on("click",function(a){a.preventDefault();c.addVipSubscription(Application.performer)});$(".jsSendMessageNew").on("click",function(a){a.preventDefault();Application.Config.messagingAllowed==e.MESSAGING_ALLOWED_YES?c.messageSend(Application.performer):c.messageSendNoCredit(Application.performer)});
$(".js-performer-nickname").html(Application.performer.nickname)}function l(){var a=new ModuleChatMenu.ChatMenuManager("sidebar-performer");a.performerSetInfo(Application.performer.id,Application.performer.nickname);a.loveHide();a.reportHide();a.favoriteSetCanAdd(0==Application.performer.isFavorite);a.videoSetQuantity(Application.performer.videoCount);a.videoSetUrl(Application.performer.link.vodVip);a.profileSetUrl(Application.performer.link.profile);a.on(ModuleChatMenu.EVENT_ACTION,function(d,b){switch(b){case ModuleChatMenu.FAVORITE_ADD:c.favoriteAdd(Application.performer);
break;case ModuleChatMenu.FAVORITE_REMOVE:c.favoriteRemove(Application.performer);break;case ModuleChatMenu.MESSAGING:Application.Config.messagingAllowed==e.MESSAGING_ALLOWED_YES?c.messageSend(Application.performer):c.messageSendNoCredit(Application.performer);break;case ModuleChatMenu.TIP:c.tip(Application.performer);break;case ModuleChatMenu.GO_TO_LIST_ONLINE:ToolApp.redirectToOnlineList()}});return ToolMenu.chat=a}function m(){var a=$(".gallery .thumb"),d=$(".more",".gallery"),b=$(".jsShowMorePhotos");
b.on("click",function(c){d.slideDown();b.slideUp();a.each(function(b,d){var a=$("img",d),c=a.attr("data-src");a.attr("src",c)});c.preventDefault()});$('[data-fancybox="photo-gallery"]').fancybox({loop:!0,buttons:["close"],hash:!1,clickOutside:"close",arrows:!1,mobile:{clickSlide:"close"},baseTpl:'<div class="fancybox-container photo-gallery-skin" role="dialog" tabindex="-1"><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>/<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div></div><div class="fancybox-bg"></div></div>'})}
function n(){Application.performer.isMale?($(".text-female").hide(),$(".text-male").show()):($(".text-female").show(),$(".text-male").hide());k();l()}var f=0,g=0,h=0;e.MESSAGING_ALLOWED_YES=1;e.setupEventButton=k;e.setupMenu=l;e.setupPhotoGallery=m;e.mainCommon=n;e.main=function(){n();m()};e.setupAnimateEvent=function(a,d,b,c,e){a.animate({scrollTop:d-b},c*Math.ceil(d/e),function(){a.animate({scrollTop:d-b-5},10)})};var c;(function(a){a.tip=function(a){ToolMenu.hideAll();if(!ToolApp.redirectToLoginIfNotConnected()){var b=
new Layer.Tips;b.on("tip",function(a,b){a.loaderShow();ToolPerformer.Ajax.tip(b.performerId,b.amount,0,ToolApp.userInterfaceType()).done(function(b){a.close()}).fail(function(b){a.close();Layer.openErrorAjax(b)}).always(function(){a.loaderHide()})});b.open({amount:5,performerId:a.id,performerNickname:a.nickname,userInterface:1})}};a.favoriteAdd=function(a){0<f||(f=1,ToolMenu.hideAll(),ToolApp.redirectToLoginIfNotConnected()||ToolPerformer.Ajax.favoriteAdd(a.id).done(function(b){NotificationTool.canShowPopup(40)?
(b=new Layer.FavoriteNotification,b.open({performerNickname:a.nickname,performerThumbnail:a.profileImg})):(b=new Layer.InfoNoTitle,b.open(Translation.tr("infoPerformerFavoriteAdded",{"#NICK#":a.nickname})));$(".jsAddAsFavorite").hide();$(".jsRemoveAsFavorite").show();ToolMenu.chat.favoriteSetCanAdd(!1)}).fail(function(a){Layer.openErrorAjax(a)}).always(function(a){f=0}))};a.favoriteRemove=function(a){0<g||(g=1,ToolMenu.hideAll(),ToolApp.redirectToLoginIfNotConnected()||ToolPerformer.Ajax.favoriteRemove(a.id).done(function(b){b=
new Layer.InfoNoTitle;$(".jsAddAsFavorite").show();$(".jsRemoveAsFavorite").hide();ToolMenu.chat.favoriteSetCanAdd(!0);b.open(Translation.tr("infoPerformerFavoriteRemoved",{"#NICK#":a.nickname}))}).fail(function(a){Layer.openErrorAjax(a)}).always(function(a){g=0}))};a.addVipSubscription=function(a){0<h||ToolApp.redirectToLoginIfNotConnected()||(h=1,ToolPerformer.Ajax.vodVipSubscriptionAdd(a.id).done(function(b){(new Layer.InfoNoTitle).open(Translation.tr("successCustomerVodVipSubscribed",{"#MODEL#":a.nickname}));
$(".js-vod-vip-already-subscribed").show();$(".js-vod-vip-subscribe-suggestion").hide()}).fail(function(a){Layer.openErrorAjax(a)}).always(function(a){h=0}))};a.messageSend=function(a){var b=new Layer.MessageSend;a={performerId:a.id,performerNickname:a.nickname,performerProfileImg:a.profileImg,subject:"",content:"",sessionMessagingId:0};var c=$("#popupMessageSend");b.on(Layer.EVENT_SUBMIT,function(a,d){$(".generic-error",c).html("");$(".generic-error",c).hide();a.loaderShow();ToolPerformer.Ajax.messageSend(d.performerId,
d.subject,d.content,d.sessionMessagingId).done(function(b){a.close();NotificationTool.canShowPopup(42)&&(new Layer.MessagingNotification).open({performerNickname:Application.performer.nickname,performerProfileImg:Application.performer.profileImg})}).fail(function(a){b.errorDisplay(a)}).always(function(){a.loaderHide()})});ToolMenu.hideAll();b.open(a)};a.messageSendNoCredit=function(a){var b=new Layer.MessageSendNoCredit;a={performerNickname:a.nickname};ToolMenu.hideAll();b.open(a)}})(c||(c={}))})(AppPerformerProfile||
(AppPerformerProfile={}));
var AppPerformerProfile2;
(function(h){function A(){$(".action-add-favorite").on("click",function(a){a.preventDefault();f.favoriteAdd(Application.performer)});$(".action-remove-favorite").on("click",function(a){a.preventDefault();f.favoriteRemove(Application.performer)});$(".jsSendMessageNew").on("click",function(a){a.preventDefault();Application.Config.messagingAllowed==h.MESSAGING_ALLOWED_YES?f.messageSend(Application.performer):f.messageSendNoCredit(Application.performer)});Application.Config.wl.signUpSignIsAsLayer&&($(".action-bio2-js-login-message").bind("click",
function(a){ToolMenu.hideAll();ToolRegister.loginWebauthOrRegister(9);a.preventDefault();a.stopPropagation()}),$(".action-bio2-js-login-private-start").bind("click",function(a){ToolRegister.loginWebauthOrRegister(2);a.preventDefault();a.stopPropagation()}),$(".action-bio2-js-login-favorite-add").bind("click",function(a){ToolRegister.loginWebauthOrRegister(4);a.preventDefault();a.stopPropagation()}),$(".action-bio2-js-login-bonus").bind("click",);$(".performer-menu-bio a").unbind("click").click(function(a){a.preventDefault()});$(".jsBtnBonus").unbind("click").click(;$(".js-performer-nickname").html(Application.performer.nickname)}function B(){var a=Application.performer,b=Application.performer.streamInfo,c=new ModuleChatBioMenu.ChatBioMenuManager("sidebar-performer-bio-page");c.performerSetInfo(Application.performer.id,Application.performer.nickname);c.videoSetQuantity(Application.performer.videoCount);
c.videoSetUrl(Application.performer.link.vodVip);c.profileSetUrl(Application.performer.link.profile);c.photoAndVideoSetUrl(Application.performer.link.media);c.reviewSetUrl(Application.performer.link.review);c.scheduleSetUrl(Application.performer.link.schedule);c.favoriteSetCanAdd(0==Application.performer.isFavorite);c.toggleScheduleLinkDisplay(Application.performer.link.schedule);c.setupScheduleScrollEvent();c.setupMenuTop();!b||"liveNotEmpty"in b||c.loveHide();c.on(ModuleChatBioMenu.EVENT_ACTION,
function(a,c){switch(c){case ModuleChatMenu.FAVORITE_ADD:f.favoriteAdd(Application.performer);break;case ModuleChatMenu.FAVORITE_REMOVE:f.favoriteRemove(Application.performer);break;case ModuleChatMenu.MESSAGING:ToolApp.redirectToLoginIfNotConnected()||(Application.Config.messagingAllowed==h.MESSAGING_ALLOWED_YES?f.messageSend(Application.performer):f.messageSendNoCredit(Application.performer));break;case ModuleChatMenu.TIP:if(Application.performer.isOnline){ToolBrowser.redirectToUrl(Application.performer.link.chat+
"?actionPanelOpen=1");break}$(".js-performer-nickname","#popupTipSend").html(Application.performer.nickname);f.tip(Application.performer);break;case ModuleChatMenu.LOVE:f.loveAdd(Application.performer);break;case ModuleChatMenu.GO_TO_LIST_ONLINE:ToolApp.redirectToOnlineList()}});ToolMenu.chatBio=c;ToolPerformer.infoUpdateUi($("#header-content-performer-bio-page"),Application.performer.nickname,a);ToolPerformer.infoUpdateUi($("#sidebar-performer-bio-page"),Application.performer.nickname,a);ToolPerformer.iconSVGToImg(Application.performer.profileImg);
return c}function n(){Application.performer.isMale?($(".text-female").hide(),$(".text-male").show()):($(".text-female").show(),$(".text-male").hide());A();B();ToolApp.event.on(10,function(){O()});$(".performer-schedule").length&&P();ToolApp.RedirectToCreditPage.timerSetup();if(ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification){var a=$(".performer-live-video video"),b=$(".block-avs-notice");b.bind("click",function(){g&&g.pause();ToolAvs.startVerification(function(c){g&&g.play();c&&($(".block-avs-notice").remove(),
a.removeClass("hard-censored"),a.removeClass("censored-darken"))})});Application.pageWithoutLivecam&&b.hide();Application.performer.isOnline||a.removeClass("hard-censored censored-darken")}Application.performer.isOnline&&(Application.pageWithoutLivecam&&(b='<div class="performer-livecam-preview-stats"><span>'+Application.performer.nickname+'</span><span class="online">'+Translation.tr("lien_online")+"</span></div>",$(".performer-live-video img").before(b)),$(".performer-live-video img").after('<div class="layerClick"></div>'),
$(".performer-live-video .layerClick").bind("click",,ToolApp.runOnFoundationInitialized(function(){Application.pageWithoutLivecam||$(window).scroll(function(){C()})}),ToolApp.event.on(ToolApp.EVENT_HEADER_DISPLAYED,function(){D(!0)}),ToolApp.event.on(ToolApp.EVENT_HEADER_HIDDEN,function(){D(!1)}),Application.pageWithoutLivecam||C());ToolBrowser.Orientation.hasSupport()&&window.addEventListener("orientationchange",function(){f.orientationChanged()},
!1);Application.pageWithoutLivecam&&($(".breadcrumb").length&&$(".block-performer-detail-area").addClass("with-breadcrumb").show(),$(window).scroll(function(){var a=$(".l-header"),d=$(".performer-live-video"),b=$(".performer-header-image"),l=$(".block-performer-detail-area"),m=$(window).scrollTop();b=b.height()-10;m>b&&l.addClass("background-transparent");m<b&&l.removeClass("background-transparent");a.hasClass("state-hidden")&&d.css("top","10px");!a.hasClass("state-hidden")&&0<m&&d.css("top","55px")}))}
function O(){if(Application.isVrEnabled)if("undefined"!==typeof WebXrPlayer)E(),u();else ToolApp.event.on(18,;else u(),Application.pageWithoutLivecam&&Application.performer.isOnline&&Application.performer.isInFreeShow&&Q()}function u(){if("streamInfo"in Application.performer&&Application.performer.streamInfo&&1===Application.performer.streamInfo.showType&&"hlsPlaylist"in Application.performer.streamInfo&&Application.performer.streamInfo.hlsPlaylist){var a='<video disablePictureInPicture="true" id="videoPlayerProfile" class="video-js position-abs" preload="auto" height="320" width="240" style="" poster="'+
Application.performer.streamInfo.liveImg+'"></video>';$(".performer-live-video img").after(a);g=videojs("videoPlayerProfile",{controls:!1,autoHeight:!0,playsinline:!0,autoplay:!0,nativeControlsForTouch:!1,width:320,height:240,errorDisplay:!1,textTrackSettings:!1,html5:{nativeTextTracks:!1},children:["mediaLoader","posterImage","bigPlayButton"]});a=!1;"undefined"!==typeof StreamPlayerXCl&&(a=StreamPlayerXCl.mutedRestore(a));"muted"in g&&g.muted(a);"src"in g&&g.src(Application.performer.streamInfo.hlsPlaylist);
a=void 0;"play"in g&&(a=g.play(),ToolApp.userInfo.mustSeeSoftContentOnlyBecauseOfAgeVerification&&$(".performer-live-video video").addClass("hard-censored"));if(void 0!==a)a.then(function(){F()})["catch"](function(a){g&&(g.muted(!0),a=g.play(),void 0!==a&&a.then(function(){F()}))})}}function E(){WebXrPlayer.Library.VR_WAS_INIT||(new WebXrPlayer.Library({videoContainerParentSelector:".performer-live-video",videoContainerSelector:"#videoPlayerProfile",vrCanvasSelector:"#vrCanvas",sourceVideoElementSelector:"#videoPlayerProfile video",
iconList:{audioOn:"/static/img/icon/vr/audioIcon.png",audioOff:"/static/img/icon/vr/audioIconOff.png",exitVr:"/static/img/icon/vr/closeIcon.png"}})).init(function(){})}function F(){var a=g;!1===(!1===ToolBrowser.isTouch()&&!1===ToolBrowser.isMobile())&&$(".action-volume").remove();a.muted()?($(".action-mute").addClass("isVisible"),$(".action-volume").removeClass("isVisible")):($(".action-sound").addClass("isVisible"),$(".action-volume").addClass("isVisible"));if("undefined"!==typeof StreamPlayerXCl){var b=
StreamPlayerXCl.volumePercentRestore();void 0===b&&(b=50);a.volume(b/100);$(".action-volume").val(b)}$(".block-sound").off("click").on("click","a",function(c){c.preventDefault();c=$(c.currentTarget);c.removeClass("isVisible");c.hasClass("action-mute")?($(".action-sound").addClass("isVisible"),$(".action-volume").addClass("isVisible"),c=!1):($(".action-mute").addClass("isVisible"),$(".action-volume").removeClass("isVisible"),c=!0);a.muted(c);"undefined"!==typeof StreamPlayerXCl&&StreamPlayerXCl.mutedSave(c)});
$(".action-volume").off("input").on("input",function(c){c=$(c.currentTarget).val();var d=0;0<c&&(d=c/100);a.volume(d);"undefined"!==typeof StreamPlayerXCl&&StreamPlayerXCl.volumePercentSave(c)})}function P(){$(".schedule").append('<div class="markers">\n   <div class="marker marker--vertical"></div>\n   <div class="marker marker--horizontal"></div>\n</div>');var a=$(".schedule"),b=$(".markers",a),c={y:$(".marker-y",a),x:$(".marker-x",a)},d={y:c.y.position(),x:c.x.position()};a=d.y.left+c.y.width()/
2;c=d.x.top+c.x.height()/2;$(".marker--vertical",b).css({top:0,left:a});$(".marker--horizontal",b).css({top:c,left:0});b.show()}function G(){v(R)}function S(){var a=$("html"),b=$(".js-link-about"),c=$(".performer2-status-info").parent(),d=$(".js-link-media"),k=$("#mediaList").parent().parent(),l=$(".js-link-review"),m=$("#reviewContentList").parent(),e=$(".l-header").height(),f=e+15,g=e+15,h=e+15;b.on("click",function(d){d.preventDefault();ToolMenu.hideAll();AppPerformerProfile.setupAnimateEvent(a,
c.offset().top,f,500,3E3);return!1});d.on("click",function(d){d.preventDefault();ToolMenu.hideAll();AppPerformerProfile.setupAnimateEvent(a,k.offset().top,g,500,3E3);return!1});l.on("click",function(d){d.preventDefault();ToolMenu.hideAll();AppPerformerProfile.setupAnimateEvent(a,m.offset().top,h,500,3E3);return!1});b=window.location;if(b.hash&&b.hash.length)switch(b.hash){case "#media":AppPerformerProfile.setupAnimateEvent(a,k.offset().top,g,500,3E3);break;case "#reviews":AppPerformerProfile.setupAnimateEvent(a,
m.offset().top,h,500,3E3)}}function R(){!1===r&&n();var a=new MediaListModule.Manager;a.paginationEnabled=!1;a.performerSetInfo(Application.performer.id,Application.performer.nickname,Application.performer.isAboVipSubscribed);a.init("mediaList",Application.mediaInfo);I(a);$(".js-action-change-profil").unbind("click").bind("click",function(){$(".js-action-change-profil").removeClass("selected");var a=$(this);a.addClass("selected");a=a.attr("data-indice");$(".ficheModel").hide();$('.ficheModel[data-indice="'+
a+'"]').show()});$(".jsVipSubscription").on("click",;$(".js-action-unsubscribe").unbind("click").bind("click",}function I(a){a.on(MediaListModule.EVENT_PHOTO_CLICK_VIP,function(a){f.addVipSubscription(Application.performer)});a.on(MediaListModule.EVENT_VIDEO_CLICK,function(a,c){if(!c.isVip||c.isGift||Application.performer.isAboVipSubscribed)f.videoTumbClick(Application.performer.id,
c.videoId);else if(0<ToolApp.userInfo.videoVipGiftedRemaining&&Application.performer.vipVideoGiftIsEnabled){var d=new Layer.VipVideoFree;d.on(Layer.EVENT_USE_FREE_VIDEO_VIP,;d.on(Layer.EVENT_CLOSE,function(){d.destroy()});d.open({nbFreeVideoVip:ToolApp.userInfo.videoVipGiftedRemaining,performerId:Application.performer.id,performerNickname:Application.performer.nickname,mediaId:c.videoId,displayActionGoToBioPage:!1,bioPageLink:""})}else f.addVipSubscription(Application.performer,
!0)});$(window).resize(function(){$(".fancybox-is-open").length&&(w("#vod-container"),"undefined"!==typeof MediaRatingModule2&&MediaRatingModule2.Manager.getInstance().resize())});x=a}function J(){v(T)}function T(){!1===r&&n();var a=new MediaListModule.Manager;a.paginationEnabled=!0;a.paginationType=Application.paginationType;4===Application.paginationType&&ToolStorage.galleryIsPaginationInfiniteScrollingButtonClicked()&&(a.paginationType=1);a.mediaVideoIdList=Application.mediaVideoIdList;a.blurVipVideoThumbnail=
Application.blurVipVideoThumbnail;a.performerSetInfo(Application.performer.id,Application.performer.nickname,Application.performer.isAboVipSubscribed);a.init("mediaList",Application.mediaInfo);var b=$(".js-action-load-more"),c=function(){b.hide();Application.mediaInfo.next=void 0;a.reloadConfigChanged(Application.mediaInfo).then(};if(2===a.paginationType||3===a.paginationType||4===a.paginationType)b.bind("click",function(){var d=a.loadMore("btn-more");
4===a.paginationType&&ToolStorage.gallerySetPaginationInfiniteScrollingButtonClicked();d&&(b.hide(),d.done(function(d){d.nextAvailable&&(3===a.paginationType||4===a.paginationType?a.paginationType=1:b.show())}))}),Application.mediaInfo.nextAvailable&&b.show();$("#mediaType").unbind("change").bind("change",function(){var a=$(this).val();a=parseInt(a,10);a!==Application.mediaInfo.type&&(Application.mediaInfo.type=a,c())});$("#mediaAccess").unbind("change").bind("change",function(){var a=$(this).val();
a=parseInt(a,10);a!==Application.mediaInfo.access&&(Application.mediaInfo.access=a,c())});$("#mediaSort").unbind("change").bind("change",function(){var a=$(this).val();a=parseInt(a,10);a!==Application.mediaInfo.sort&&(Application.mediaInfo.sort=a,c())});I(a);ToolApp.runOnFoundationInitialized(function(){var d=!1;$(window).scroll(function(){d||(d=!0,window.setTimeout(function(){d=!1;a.scroll()},150))})})}function v(a){if(ToolApp.disclaimerMustBeDisplayed())ToolApp.event.on(210,function(){ToolApp.disclaimerMustBeDark()&&
($(".performer-header2").removeClass("is-hidden"),$("#mod-performer-profile2").removeClass("is-hidden"),a())});ToolApp.disclaimerMustBeDark()||a()}unction U(){!1===r&&n();var a=new ReviewModule.Manager;a.init("reviewContentList");a.performerSetInfo(Application.performer.id,Application.performer.nickname);a.stateSet(Application.reviewInfo);a.on(ReviewModule.EVENT_NO_MORE_ITEM,function(){$("#action-review-load-more").hide()});var b=function(){Application.reviewInfo.next=void 0;a.reloadConfigChanged(Application.reviewInfo);
$("#action-review-load-more").show()};$("#reviewOrder").unbind("change").bind("change",function(){var a=$(this).val();a=parseInt(a,10);a!==Application.reviewInfo.order&&(Application.reviewInfo.order=a,b())});$("#reviewType").unbind("change").bind("change",function(){var a=$(this).val();a=parseInt(a,10);a!==Application.reviewInfo.accurate&&(Application.reviewInfo.accurate=a,b())});$("#action-review-load-more").unbind("click").bind("click",function(){a.loadMore()})}function Q(){var a=$(".performer-header-image"),
b=$(".performer-live-video");a.addClass("miniDisplay");b.addClass("bio-page-without-livecam");b.removeClass("is-hidden")}function C(){var a=$(".performer-header-image").height()+10,b=$(window).scrollTop();!p&&b>a&&L(!0);p&&b<a&&L(!1)}function w(a){var b=$(window),c=Math.ceil(.9*b.width());b=Math.ceil(b.height()-120);var d="undefined"!==typeof e?e.videoWidth():0,k="undefined"!==typeof e?e.videoHeight():0;0<d&&(d/=k,b*d>c?b=c/d:c=b*d);$(a).css({width:c+"px",height:b+"px"})}function L(a){var b=$(".performer-header-image"),
c=$(".performer-live-video");a?(a=b.height(),b.css({height:a+"px"}),c.css({top:"55px"}),p=1,b.addClass("miniDisplay")):(p=0,b.removeClass("miniDisplay"),b.css({height:"auto"}),c.css({top:"0px"}))}function D(a){if(p){var b=$(".performer-live-video");b.stop();a?b.animate({top:"55px"},200):b.animate({top:"10px"},400)}}var y=0,z=0,t=0,p=0,M=0,g,e,x,r=!1;h.MESSAGING_ALLOWED_YES=1;h.setupEventButton=A;h.setupMenu=B;h.mainCommon=n;h.mainBio=G;h.mainBioMerged=function(){r=!0;n();S();G();J();K()};h.mainMedia=
J;h.mainReview=K;h.resizeFancyBoxVideoContainer=w;var f;(function(a){function b(a,b,l,m){void 0===m&&(m=!0);var d="vod-video-id"+a.videoId.toString(),k='<div id="vod-container" style="height:90vh;"><video disablePictureInPicture="true" id="'+d+'" class="video-vod video-js vjs-styles-defaults vjs-big-play-centered vjs-show-big-play-button-on-pause " preload="auto" controls  style="" poster="'+a.thumbnail+'"></video></div>';if(e){try{e.dispose()}catch(V){}e=void 0}"videojs"in window&&$.fancybox.open(k,
{loop:!0,buttons:["close"],hash:!1,clickSlide:!1,arrows:!1,mobile:{clickSlide:!1},hideScrollbar:!0,baseTpl:'<div class="fancybox-container video-gallery-skin" role="dialog" tabindex="-1"><div class="fancybox-inner"><div class="fancybox-stage"></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div></div><div class="fancybox-bg"></div></div>',beforeClose:function(){if(e){try{e.pause();e.playbackRate(1);e.dispose();var a=document.getElementById(d);a&&document.body.appendChild(a)}catch(W){}e=
void 0}g&&g.play();MediaRatingModule2.Manager.getInstance().destroy()},afterClose:beforeShow:function(a){a.$refs&&a.$refs.container&&a.$refs.container.css("z-index",1004)},afterShow:function(k){e=videojs(d,{controls:!0,autoHeight:!0,playsinline:!0,autoplay:!0,nativeControlsForTouch:!1,poster:a.thumbnail,responsive:!0,fluid:!1,fill:!0,playbackRates:[1,1.5,1.75,2],textTrackSettings:!1,html5:{nativeTextTracks:!1,hlsjsConfig:{maxBufferLength:15,maxMaxBufferLength:24,
maxBufferSize:7E6}}});"vttThumbnails"in e&&e.vttThumbnails({src:a.thumbnail_vtt});if(1===a.isGift){var l=!1,H=!1,f=!1,h=function(){l&&H&&!f&&0<ToolApp.userInfo.videoVipGiftedRemaining&&(f=!0,ToolApp.userInfo.videoVipGiftedRemaining--,b&&"function"===typeof b?b(a.videoId):(ToolApp.userVideoVipGiftedUpdateUi(ToolApp.userInfo.videoVipGiftedRemaining),ToolApp.userInfoRefreshFromDatabase("bio-video-vip"),x&&x.videoIsNowAGift(a.videoId)))};"on"in e&&(e.on("play",function(){l=!0;h()}),e.on("timeupdate",
)}if("on"in e&&(e.on("loadeddata",function(){ToolBrowser.isMobileiOS()&&e&&0==e.currentTime()&&e.currentTime(0)}),ToolBrowser.isMobile()))e.on("touchstart",;g&&g.pause();"src"in e&&e.src(a.url);c(a.videoId,"state-played");var q;"play"in e&&(q=e.play());void 0!==q&&(new Promise(function(a){if(q)q.then(function(d){a()})["catch"](function(d){a()})})).then(function(){w("#vod-container");var d=MediaRatingModule2.Manager.getInstance();
d.mediaType=2;var b={id:0,videoId:a.videoId,thumbImgAlt:"",thumbImg:"",nickname:"",love:a.love,isLoved:a.isLoved,vip:0,durationStr:a.dar,src:""};m&&d.register(k,b)})}})}function c(a,b,c){void 0===c&&(c=!0);a=$('a.thumb[data-vid="'+a+'"]');a.length&&(a=a.find(".vodListPlay"),a.length&&(c?a.addClass(b):a.removeClass(b)))}a.unsubscribeVip=function(a,b){var d=new Layer.PopupConfirm;d.on(Layer.EVENT_CONFIRM_YES,function(){var d=new Layer.Loader;d.open();AppUserAccount.Ajax.removeVipSubscriptionPerformer(a).done(function(a){d.close();
a=new Layer.PopupConfirm;a.on(Layer.EVENT_CONFIRM_YES,function(){ToolBrowser.reloadPage()});a.open(Translation.tr("successGenericUnsubscriptionSucceeded",{"#MODEL#":b}),!0)}).fail(function(a){d.close();Layer.openErrorAjax(a)}).always(function(a){d.close()})});d.open(Translation.tr("cust_label_cancel_vip_subscription"))};a.orientationChanged=function(){var a=ToolBrowser.Orientation.getValue();if(e)if(0!=a)if(e.supportsFullScreen())try{e.requestFullscreen()}catch(k){}else try{e.enterFullWindow()}catch(k){}else if(e.supportsFullScreen())try{e.exitFullscreen()}catch(k){}else try{e.exitFullWindow()}catch(k){}MediaRatingModule2.Manager.getInstance().resize()};
a.videoPlay=b;a.uiVideoStateSet=c;a.videoTumbClick=function(a,k){c(k,"state-loading");N.videoInfo(a,k).done(function(a){a.playable?(ToolStorage.videoPlayedAppend(a.videoId),b(a)):(new Layer.InfoNoTitle).open(Translation.tr("animMediaVideoStatusOk"))}).fail(function(a){Layer.openErrorAjax(a)}).always(};a.tip=function(a){ToolMenu.hideAll();if(!Application.Config.isUserConnected&&Application.Config.wl.signUpSignIsAsLayer)ToolRegister.loginWebauthOrRegister(6);else if(!ToolApp.redirectToLoginIfNotConnected()){var d=
new Layer.Tips,b={amount:5,performerId:a.id,performerNickname:a.nickname,userInterface:1};Application.performer.isOnline||(b.withMessage=!0);d.open(b);d.on(Layer.EVENT_TIP,function(d,c){d.loaderShow();b.withMessage&&"undefined"!==typeof c.messageRaw&&c.messageRaw.length&&ToolPerformer.Ajax.messageSend(c.performerId,"",c.messageRaw,0);ToolPerformer.Ajax.tip(c.performerId,c.amount,0,ToolApp.userInterfaceType()).done(function(b){d.close();b={amountWithCurrency:b.ui.content,performerNickname:a.nickname};
(new Layer.TipSent).open(b)}).fail(function(a){d.close();Layer.openErrorAjax(a)}).always(function(){d.loaderHide()})})}};a.favoriteAdd=function(a){if(!(0<y))if(ToolMenu.hideAll(),!Application.Config.isUserConnected&&Application.Config.wl.signUpSignIsAsLayer)ToolRegister.loginWebauthOrRegister(4);else if(y=1,!ToolApp.redirectToLoginIfNotConnected()){var d=ToolPerformer.Ajax.favoriteAdd(a.id),b=new Layer.InfoNoTitle;d.done(function(d){$(".action-add-favorite").hide();$(".action-remove-favorite").show();
NotificationTool.canShowPopup(40)?(new Layer.FavoriteNotification).open({performerNickname:a.nickname,performerThumbnail:a.profileImg}):b.open(Translation.tr("infoPerformerFavoriteAdded",{"#NICK#":a.nickname}));ToolMenu.chatBio.favoriteSetCanAdd(!1)}).fail(function(a){Layer.openErrorAjax(a)}).always(function(a){y=0})}};a.favoriteRemove=function(a){0<z||(ToolMenu.hideAll(),ToolApp.redirectToLoginIfNotConnected()||(z=1,ToolPerformer.Ajax.favoriteRemove(a.id).done(function(d){d=new Layer.InfoNoTitle;
$(".action-add-favorite").fadeIn();$(".action-remove-favorite").hide();ToolMenu.chatBio.favoriteSetCanAdd(!0);d.open(Translation.tr("infoPerformerFavoriteRemoved",{"#NICK#":a.nickname}))}).fail(function(a){Layer.openErrorAjax(a)}).always(function(a){z=0})))};a.loveAdd=function(a){var d=new Layer.InfoNoTitle;ToolMenu.hideAll();if(0<M){var b=Translation.tr("infoUserLoveAlreadySendToModel",{"#MODEL#":'<span class="js-performer-nickname">'+a.nickname+"</span>"},{escape:!1});d.open(b)}else M=1,ToolPerformer.Ajax.loveAdd(a.id).done(function(b){if("success"in
b&&b.success)if(b.ignored){var c=Translation.tr("infoUserLoveAlreadySendToModel",{"#MODEL#":'<span class="js-performer-nickname">'+a.nickname+"</span>"},{escape:!1});d.open(c)}else c=Translation.tr("infoUserSendLoveToModelName",{"#MODEL#":'<span class="js-performer-nickname">'+a.nickname+"</span>"},{escape:!1}),d.open(c),StreamPlayerLogic.getInstance().loveSent(b.chatNotification);else d.open(Translation.tr("infoPerformerLoveAddedAlready"))}).fail(function(a){Layer.openErrorAjax(a)}).always(function(){})};
a.addVipSubscription=function(a,b){void 0===b&&(b=!1);if(!(0<t)){t=1;var d=new Layer.VipSubscription;d.on(Layer.EVENT_CLOSE,;d.on(Layer.EVENT_SUBSCRIBE,function(b){d.close();t=0;if(!Application.Config.isUserConnected&&Application.Config.wl.signUpSignIsAsLayer)ToolRegister.loginWebauthOrRegister(11);else if(!ToolApp.redirectToLoginIfNotConnected()){var c=new Layer.Loader;c.open();ToolPerformer.Ajax.vodVipSubscriptionAdd(a.id).done(function(b){c.close();b=new Layer.InfoNoTitle;
b.open(Translation.tr("successCustomerVodVipSubscribed",{"#MODEL#":a.nickname}));b.on(Layer.EVENT_CLOSE,function(){ToolBrowser.reloadPage()});$(".jsVipSubscription").hide()}).fail(function(a){c.close();Layer.openErrorAjax(a)}).always(function(a){c.close()})}});var c={performerId:a.id,performerNickname:a.nickname,amountWithCurrency:a.price.vodVipWithCurrencyOnly,videoTotalSecond:a.videoTotalSecond,videoTotalMinute:a.videoTotalMinute,photoNb:a.photoNbVip,videoNb:a.videoCount.vip,displayActionGoToBioPage:!1,
bioPageLink:"",vipFreeEnabled:!0};b&&(c.vipFreeEnabled=a.vipVideoGiftIsEnabled);d.open(c)}};a.messageSend=function(a){var b=new Layer.MessageSend;a={performerId:a.id,performerNickname:a.nickname,performerProfileImg:"",subject:"",content:"",sessionMessagingId:0};var c=$("#popupMessageSend");b.on(Layer.EVENT_SUBMIT,function(a,d){$(".generic-error",c).html("");$(".generic-error",c).hide();a.loaderShow();ToolPerformer.Ajax.messageSend(d.performerId,d.subject,d.content,d.sessionMessagingId).done(function(b){a.close();
NotificationTool.canShowPopup(42)&&(new Layer.MessagingNotification).open({performerNickname:Application.performer.nickname,performerProfileImg:Application.performer.profileImg})}).fail(function(a){b.errorDisplay(a)}).always(function(){a.loaderHide()})});ToolMenu.hideAll();b.open(a)};a.messageSendNoCredit=function(a){var b=new Layer.MessageSendNoCredit;a={performerNickname:a.nickname};ToolMenu.hideAll();b.open(a)}})(f=h.Action||(h.Action={}));var N;(function(a){a.videoInfo=function(a,c,d){void 0===
d&&(d=void 0);return Core.Ajax.post("/video/getVideo/",{performerId:a,videoId:c,optionList:d})};a.price=function(a,c){return Core.Ajax.post("/video/price/",{performerId:a,videoId:c})}})(N=h.Ajax||(h.Ajax={}))})(AppPerformerProfile2||(AppPerformerProfile2={}));
var AppPhotoList;
(function(m){function p(a,b){var c=$.Deferred();if(a in e)return e[a].videoId=b,c.resolve(e[a]),c;AppPerformerProfile2.Ajax.price(a,b).done(.fail(function(a){c.reject(a)});return c}var k,l,g,f=0,e={};m.main=function(){AppOnlineAndChat.init();var a=AppOnlineAndChat.setupListOnline(Application.media),b=a.getFilterMobile();b&&b.init();a.openBefore();if(ToolApp.disclaimerMustBeDisplayed())ToolApp.event.on(210,function(){ToolApp.disclaimerMustBeDark()&&$("#l-online").show();
window.setTimeout(function(){a.resize()},10)});ToolApp.disclaimerMustBeDark()||$("#l-online").show();a.openAfter(1);ToolApp.pageList.push(a);$(window).resize(function(){a.resize()});k=a;var c=a.getMenuFilter();c&&c.setupEventAndUi();var e=function(d,b){a.videoLoaderState(d,b);b&&(g&&a.videoLoaderState(g,!1),g=d)},m=function(a){if(f!==a.mediaId){f=a.mediaId;e(a,!0);var b=p(a.performerId,a.mediaId);b.done(function(b){if(b.videoId===f){f=0;var c=new Layer.VipSubscription;c.on(Layer.EVENT_CLOSE,function(){c.destroy()});
c.on(Layer.EVENT_SUBSCRIBE,function(b){c.close();if(!Application.Config.isUserConnected&&Application.Config.wl.signUpSignIsAsLayer)ToolRegister.loginWebauthOrRegister(11);else if(!ToolApp.redirectToLoginIfNotConnected()){var d=new Layer.Loader;d.open();ToolPerformer.Ajax.vodVipSubscriptionAdd(a.performerId).done(function(b){d.close();var c=new Layer.InfoNoTitle;c.open(Translation.tr("successCustomerVodVipSubscribed",{"#MODEL#":a.mediaInfo.nickname}));b&&"userInfo"in b&&ToolApp.userInfoUpdateUi(b.userInfo);
c.on(Layer.EVENT_CLOSE,}).fail(function(a){a&&62378===a.code?ToolBrowser.redirectToUrl(Application.Config.url.root+"/credit/"):(d.close(),Layer.openErrorAjax(a))})}});c.open({performerId:a.performerId,performerNickname:a.mediaInfo.nickname,amountWithCurrency:b.price.vodVipWithCurrencyOnly,displayActionGoToBioPage:!0,bioPageLink:b.profileLink,vipFreeEnabled:!0,videoTotalSecond:b.videoTotalSecond,videoTotalMinute:b.videoTotalMinute,
photoNb:b.photoNb,videoNb:b.videoNb})}}).fail(function(a){"abort"!==b.jqXHR.statusText&&(Layer.openErrorAjax(a),f=0)}).always(}};MediaRatingModule2.Manager.getInstance().on(204,function(b,c){if(l&&l.mediaId==c.photoId)l.mediaInfo=c,a.onLoveDataChanged(l);else a.onLoveDataChangedNoEventSource(c)});a.on(202,function(b,c){var d=c.mediaInfo;l=c;if(d.srcHd){for(var e=a.itemIdListGet(),f=[],g=-1,n=0;n<e.length;n++){var k=e[n],h=a.mediaInfoById(k);h.srcHd&&(f.push({src:h.srcHd,opts:{caption:'\n\t\t\t\t\t\t\t\t<div class="modelMediaNickname">\n\t\t\t\t\t\t\t\t\t<a href="'.concat(ToolPerformer.urlToBioPage(h.nickname),
'">').concat(h.nickname,'</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="modelMediaLove"></div>\n\t\t\t\t\t\t\t'),thumb:h.srcThumb,media:{id:k}}}),h.photoId===d.photoId&&(g=f.length-1))}d=$.fancybox.open(f,{loop:!1,beforeShow:function(a,b){a.$caption&&a.$caption.length&&a.$caption.addClass("fancybox-caption-custom");a.$refs&&a.$refs.container&&a.$refs.container.css("z-index",1004)},afterShow:function(b,c){if(c.opts&&c.opts.media){var d=c.opts.media.id,e=MediaRatingModule2.Manager.getInstance();
if(d=a.mediaInfoById(d))e.mediaType=1,e.templateTargetCssSelector=".fancybox-caption > .modelMediaLove",e.register(b,d)}}});0<=g&&d.jumpTo(g,0)}else ToolApp.userInfo.isAuth?0<=Application.performerIdVipAccessList.indexOf(c.performerId)||m(c):Application.Config.wl.signUpSignIsAsLayer?ToolRegister.loginWebauthOrRegister():ToolApp.redirectToLoginIfNotConnected()});ToolApp.runOnFoundationInitialized(function(){var b=!1;$(window).scroll(function(){b||(b=!0,window.setTimeout(function(){b=!1;a.scroll()},
150))})});$(window).resize(function(){k.resize();b&&(ToolBrowser.isMobile()?b.isOpen()?b.resize():b.refreshUiButtonVisibility():b.hide())});ToolApp.event.on(ToolApp.EVENT_HEADER_DISPLAYED,function(){b&&b.fadeIn()});ToolApp.event.on(ToolApp.EVENT_HEADER_HIDDEN,function(){b&&b.fadeOut()})}})(AppPhotoList||(AppPhotoList={}));
var AppUserPolling;
(function(g){g.main=function(){var e=$(".js-poll-change-answer"),b=$(".action-poll-submit");e.bind("click",function(d){var a=$(d.currentTarget),c=a.closest(".contentBlock");a=a.closest(".already-answered");c=c.find(".polling-content");c.length&&a.length&&(a.hide(),c.show(),d.preventDefault(),d.stopPropagation())});b.bind("click",function(d){var a=$(d.currentTarget),c=a.closest(".contentBlock").find(".already-answered"),b=a.closest(".polling-content");a=a.closest("form");if(b.length&&c.length&&a.length){a=
PollTool.formToObject(a);var e=$(".poll-count-new");0<a.surveyId&&(d.preventDefault(),d.stopPropagation(),1>a.rating?(new Layer.InfoNoTitle).open(Translation.tr("errorUserNoRatingSet")):(c.show(),b.hide(),f.save(a).done(function(a){e.text(a.pollNonAnswered);0===a.pollNonAnswered&&e.closest("li").hide()}).fail())}})};var f;(function(e){e.save=)(f||
(f={}))})(AppUserPolling||(AppUserPolling={}));
var AppPreferenceIndex;
(function(f){function g(){$("#preferenceForm select").bind("change",function(){e(!1)});$("#preferenceForm").bind("submit",;$("#action-reset").bind("click",function(){var b=ToolPreference.getInstance();b.clearUserValue();b.saveToBrowser()})}function h(){var b=ToolPreference.getInstance();$(".js-preference-item").each(function(){var c=$(this),a=c.attr("name");a=parseInt(a.substr(5,a.length-6),10);a=b.getItemUser(a,null);if(null===a||void 0===a)a="null";c.val(a)})}function k(){var b=
{};$(".js-preference-item").each(function(){var c=$(this),a=c.attr("name");a=a.substr(5,a.length-6);c=c.val();"null"!==c&&(b[a]=c)});return b}function e(b){var c=k(),a=ToolPreference.getInstance();a.overwriteUserValue(c);b?a.saveToBrowser():a.save({category:"",action:"SaveAll"})}f.main=function(){for(var b=ToolPreference.getInstance(),c=[6],a=0;a<c.length;a++){var d=c[a],e=b.getItemInt(d);d="#pref-"+d+" option[value=null]";e?$(d).text(Application.translationDefaultYes):$(d).text(Application.translationDefaultNo)}h();
g();b=$("#rowWebAuthNSetting");0!=b.length&&"WebAuthnys"in window&&WebAuthnys.isSupported()&&b.show()}})(AppPreferenceIndex||(AppPreferenceIndex={}));
var AppSupportContact;
(function(c){c.main=function(){var b=new a.Contact("#contactForm");window.grecaptchaOnSubmitCallback=function(){b.onGoogleCaptchaResponse()};window.grecaptchaOnLoadCallback=function(){b.onGoogleCaptchaLoaded()};$("#actionLayerRegister").bind("click",function(){ToolRegister.layerOpen()});$("#actionLayerLogin").bind("click",function(){ToolLogin.layerOpen()})};var a;(function(b){var a=function(){function a(a){this.jForm=$(a);this.isGoogleCaptchaLoaded=!1;this.sendLock=0;this.init()}a.prototype.init=
function(){var a=this;if(this.jForm.length)this.jForm.on("submit",function(b){a.isGoogleCaptchaLoaded?0<a.sendLock&&(b.preventDefault(),a.sendLock=1):0<a.sendLock?b.preventDefault():a.sendLock=1})};a.prototype.onGoogleCaptchaResponse=a.prototype.onGoogleCaptchaLoaded=function(){this.isGoogleCaptchaLoaded=!0};return a}();b.Contact=a})(a||(a={}))})(AppSupportContact||(AppSupportContact={}));
var AppSupportFeedback;(function(c){c.main=function(){var b=0;$(".star").on("click",function(){var a=$(this).data("rate");$(".star").each(function(){$(this).data("rate")<=a?$(this).addClass("selected"):$(this).removeClass("selected")});$(".rating").val(a)});$("#contactForm").on("submit",function(a){1>$(".rating").val()?((new Layer.InfoNoTitle).open(Translation.tr("errorUserNoRatingSet")),a.preventDefault()):0<b?a.preventDefault():b=1})}})(AppSupportFeedback||(AppSupportFeedback={}));
var AppSupportHelp;
(function(c){c.main=function(){$("a","#mod-support-help").on("click",function(){$(this).hasClass("linksectionabout")?b.displayHelp(2):$(this).hasClass("linksectionhowto")?b.displayHelp(4):$(this).hasClass("linksectionmediatest")?b.displayHelp(10):$(this).hasClass("linksectionewall")&&b.displayHelp(2)});var a=document.URL.indexOf("#sectionTitle");0<=a&&(a=document.URL.substr(a,16),a=$(a),a.length&&(a.click(),a[0].scrollIntoView()))};var b;(function(a){a.displayHelp=function(a){$(".item-accordeon","#mod-support-help").each(;
$("#sectionTitle_"+a,"#mod-support-help").click();$("html,body").animate({scrollTop:0},"slow")}})(b||(b={}))})(AppSupportHelp||(AppSupportHelp={}));
var AppSupportMorelang;(function(a){a.main=function(){var b=0;$("#button-previous").on("click",function(a){0<b?a.preventDefault():(window.history.go(-1),b=1)})}})(AppSupportMorelang||(AppSupportMorelang={}));
var AppSupportStreamTester;(function(a){a.main=function(){ToolApp.event.on(21,function(){new StreamTester.Library(window.Application.streamTester)})}})(AppSupportStreamTester||(AppSupportStreamTester={}));
var AppSupportTerms;(function(c){function d(){if(document.location.hash){var b=document.location.hash.substring(1),a=document.getElementById(b);a&&a.parentNode&&(b=$(a.parentNode),$(".accordeon-data-header > a",b).click(),window.setTimeout(100))}}c.main=)(AppSupportTerms||(AppSupportTerms={}));
var AppTimeline;
(function(k){function l(b,d){b.on(TimelineModule.EVENT_VIP_SUBSCRIPTION_CLICK,function(m,a){var e=$.extend({},a,{vipFreeEnabled:!0});AppPerformerProfile2.Action.addVipSubscription(e)});b.on(TimelineModule.EVENT_VIDEO_CLICK,function(m,a){if(!a.video.isVip||a.video.isGift||a.client.isVip)0<f||(f=1,c.videoThumbClick(a.performer.id,a.video.id));else if(0<ToolApp.userInfo.videoVipGiftedRemaining&&a.performer.vipVideoGiftIsEnabled){var e=new Layer.VipVideoFree;e.on(Layer.EVENT_USE_FREE_VIDEO_VIP,;e.on(Layer.EVENT_CLOSE,;e.open({nbFreeVideoVip:ToolApp.userInfo.videoVipGiftedRemaining,performerId:a.performer.id,performerNickname:a.performer.nickname,mediaId:a.video.id,displayActionGoToBioPage:!1,bioPageLink:""})}else{var b=$.extend({},a.performer,{vipFreeEnabled:!0});AppPerformerProfile2.Action.addVipSubscription(b,0<ToolApp.userInfo.videoVipGiftedRemaining&&!a.performer.vipVideoGiftIsEnabled)}});b.on(TimelineModule.EVENT_MEDIA_RATING_CLICK,
function(b,a){0<h||(h=1,c.rateMedia(a))});d.on(204,function(b,a){var e=1===b.mediaType?$('[data-pid="'+a.photoId+'"]'):$('[data-vid="'+a.videoId+'"]');c.mediaRated(e)});$(window).resize(function(){var b=$(window),a=Math.ceil(.9*b.width());b=Math.ceil(b.height()-50);a=1200<a?1200:a;b<a/4*3&&(a=Math.ceil(b/3*4));$("#vod-container").css({width:a+"px"})})}var f=0,h=0;k.main=function(){var b=TimelineModule.Manager.getInstance(),d=MediaRatingModule2.Manager.getInstance();b.init("#timeline-wrapper");b.scrollInfiniteEnabled=
!0;b.stateSet(Application.timelineInfo);l(b,d);ToolApp.runOnFoundationInitialized(function(){var d=!1;$(window).scroll(function(){d||(d=!0,window.setTimeout(150))})})};var c;(function(b){function d(a){f=0;ToolApp.userVideoVipGiftedUpdateUi(ToolApp.userInfo.videoVipGiftedRemaining);ToolApp.userInfoRefreshFromDatabase("timeline-video-vip");if(a=$('.timeline-item[data-item-id="'+a.toString(10)+'"]'))$(".thumb-vip",a).addClass("thumb-vip-gift"),$(".vip-icon",a)&&$(".vip-icon",
a).remove(),$("a.thumb",a).attr("data-gift",1)}unction a(a){var b=a.closest(".timeline-item"),d=$(".media-rating-inner",b),e=$(".rating-counter",b);a=$(".rating-text",b);b=$(".thumb",b);d.addClass("media-rated");var c=parseInt(e.text());isNaN(c)&&(c=0);c+=1;$("a",d).attr("data-love",c);e.text(c);e.is(":hidden")&&e.removeClass("isHidden");d="Loves";1===c&&(d="Love");a.text(d);b.attr("data-loved",1);b.attr("data-love",c)}b.videoThumbClick=function(a,b){g.videoInfo(a,b).done(function(a){a.playable?
AppPerformerProfile2.Action.videoPlay(a,d,c):(new Layer.InfoNoTitle).open(Translation.tr("animMediaVideoStatusOk"))}).fail(function(a){Layer.openErrorAjax(a)}).always(function(){f=0})};b.mediaRated=a;b.rateMedia=function(b){g.rateMedia(b).done(.fail(function(a){Layer.openErrorAjax(a)}).always(function(){h=0})}})(c||(c={}));var g;(function(b){b.videoInfo=b.rateMedia=)(g||(g={}))})(AppTimeline||(AppTimeline={}));
var AppUserAccount;
(function(b){var f=0,g=0,h=0;b.main=function(){$(".jsUnsubscribe").on("click",function(a){a.preventDefault();a=$(this);var l=parseInt(a.attr("data-id"),10),c=a.attr("data-nick");if(0<l&&c){var d=new Layer.PopupConfirm;d.on(Layer.EVENT_CONFIRM_YES,;d.on(Layer.EVENT_CLOSE,function(){d.destroy()});d.open(Translation.tr("cust_label_cancel_vip_subscription")+" ("+c+")")}});$(".jsShowEmail").on("click",function(a){a.preventDefault();e.getEmail()});
$(".resendConfirmation a:first-child").on("click",function(a){a.preventDefault();e.resendConfirmation()});$(".jsConfirmEmail").on("click",function(a){a.preventDefault();e.resendConfirmation()})};var e;(function(a){a.removeVipSubscription=function(a,c){0<f||(f=1,k.removeVipSubscription(a).done(function(a){a=new Layer.PopupConfirm;a.on(Layer.EVENT_CONFIRM_YES,function(){ToolBrowser.redirectToUrl(Application.Config.url.root+"/user/?from=abo-vip-cancel")});a.open(Translation.tr("successGenericUnsubscriptionSucceeded",
{"#MODEL#":c}),!0)}).fail(function(a){Layer.openErrorAjax(a)}).always(function(a){f=0}))};a.getEmail=function(){0<g||(g=1,k.getEmail().done(function(a){""!=a.email&&($(".emailValue").html(a.email),$(".jsShowEmail").remove(),$(".emailRow").show())}).fail(function(a){Layer.openErrorAjax(a)}).always()};a.resendConfirmation=function(){if(!(0<h)){h=1;var a=ToolApp.Ajax.emailResendConfirmationLink();$(".jsConfirmEmail").hide();a.done(.fail(.always(function(){h=0})}}})(e=b.Action||(b.Action={}));var k;(function(a){a.removeVipSubscription=function(a){return Core.Ajax.post("/video/vipSubscriptionRemove/",{idAbo:a,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};a.removeVipSubscriptionPerformer=function(a){return Core.Ajax.post("/video/vipSubscriptionRemove2/",{performerId:a,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})};a.getEmail=function(){return Core.Ajax.post("/user/getEmail/",{csrfProtectionToken:ToolApp.getCsrfProtectionToken()})}})(k=
b.Ajax||(b.Ajax={}))})(AppUserAccount||(AppUserAccount={}));
var AppUserAvs;(function(b){b.$qrContainer=$("#avs-qr-container");b.main=function(){a.generateQr()};var a;(function(a){a.generateQr=function(){var a=window.qr.image({size:10,value:Application.avsLoginLink});b.$qrContainer.html(a)}})(a||(a={}))})(AppUserAvs||(AppUserAvs={}));
var AppUserRegisterCaptcha;(function(a){a.main=function(){window.setTimeout(function(){$("#mod-user-register-catpcha .callout.alert").fadeOut()},1E4)}})(AppUserRegisterCaptcha||(AppUserRegisterCaptcha={}));
var AppUserCloseConfirm;(function(b){b.main=function(){$(".action-toggle-passwd").unbind("click").bind("click",function(){var a=$("#password");"password"==a.attr("type")?a.attr("type","text"):a.attr("type","password")})}})(AppUserCloseConfirm||(AppUserCloseConfirm={}));
var AppUserCredit;(function(a){a.main=function(){var a=$("#mod-user-credits--container table").DataTable({dom:"rt",order:[[0,"desc"]],drawCallback:function(){$(".transaction-load-more").toggle(this.api().page.hasMore())}});$(".transaction-load-more").on("click",function(){a.page.loadMore()})}})(AppUserCredit||(AppUserCredit={}));
var AppUserEmailChange;(function(a){a.main=function(){$("#form-emailChange").bind("submit",}})(AppUserEmailChange||(AppUserEmailChange={}));
var AppExpense;
(function(f){function g(){$(".buttonRatingOpen").on("click",function(a){a.preventDefault();a={performerId:$(this).data("performer-id"),performerNickname:$(this).data("performer-nickname"),message:"",note:-1,noteAverage:void 0,creditNoMoreAvailable:!1,layoutId:1};var c={element:$(this),showConnectionId:$(this).data("show-connection-id")};h(a,c)})}function h(a,c){if(!Layer.ShowRating.isOpen()){var e=new Layer.ShowRating;e.on(Layer.EVENT_SUBMIT,function(a,b){1>b.note||ToolPerformer.Ajax.showRating(b.performerId,c.showConnectionId,
b.note,b.message).done(function(d){a.close();d=b.message;d='\n\t\t\t<span class="star16x star'.concat(5*Math.round(10*b.note/5),' note"></span><br>\n\t\t\t<span>').concat(d,"</span>");c.element.replaceWith(d)}).fail(function(a){}).always(function(){})});e.open(a)}}f.main=function(){g()}})(AppExpense||(AppExpense={}));
var AppUserLogin;
(function(g){function n(){var a=$("#form-login");a.append($("<input/>",{type:"hidden",name:"screen_w",value:screen.width}));a.append($("<input/>",{type:"hidden",name:"screen_h",value:screen.height}));a.append($("<input/>",{type:"hidden",name:"timezone",value:ToolBrowser.getTimezoneOffset()}));a.append($("<input/>",{type:"hidden",name:"browserLanguage",value:ToolBrowser.getLanguage()}));a.append($("<input/>",{type:"hidden",name:"passwordEncoded",value:"",id:"passwordEncoded"}));"targetUrlEncrypted"in Application&&
Application.targetUrlEncrypted&&a.append($("<input/>",{type:"hidden",name:"targetUrl",value:Application.targetUrlEncrypted}));var b=ToolBrowser.isStorageSupportMinSizeSession();a.append($("<input/>",{type:"hidden",name:"browserSStorageLargeSupported",value:b?"1":"0"}));b&&(b=ToolStorage.pageInfoGetLastSeenUri())&&a.append($("<input/>",{type:"hidden",name:"pageLastSeenUri",value:b}));a.bind("submit",function(a){var h=$("input[name=nickname]").val();a=$("input[name=token]").val();$("#abDetected").val("advertisingJsLoaded"in
window&&window.advertisingJsLoaded?"0":"1");try{var b=new Date;a||(a="x");h||(h="x");var f=Math.floor(1E8*Math.random()),d=Math.floor(b.getTime()/1E3);var c={rnd:f,time:d,token:ToolSecurity.fnv32a(StringTool.Utf8.encodeToUtf8Bytes(a+":"+f+":\u20ac\u2716\u21aa:"+d+":"+h))};$("input[name=hashData]").val(JSON.stringify(c))}catch(r){$("input[name=hashData]").val("exception")}"passwordKey"in Application&&Application.passwordKey&&"WebAuthnys"in window&&"encodeListKeyStr"in WebAuthnys&&(c=$("input[name=password]"),
b=c.val())&&(b=StringTool.Utf8.encodeToUtf8Bytes(b),b=WebAuthnys.encodeListKeyStr(b,Application.passwordKey),$("input[name=passwordEncoded]").val("b64:"+StringTool.Base64.encodeToBase64Bytes(b)),c.val(""))});$(".action-toggle-passwd",a).unbind("click").bind("click",function(){var a=$("input[name=password]");"password"==a.attr("type")?a.attr("type","text"):a.attr("type","password")});var d=$("input[name=password]"),c=!0;d.bind("focus",function(){c&&(c=!1,""===d.val()&&d.attr("type","text"))});setTimeout(function(){p();
if(WebAuthnys.isSupported()&&(a.append($("<input/>",{type:"hidden",name:"webauthSupport",value:"1"})),"PublicKeyCredential"in window&&window.PublicKeyCredential)){var b=PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();b.then(function(b){b?a.append($("<input/>",{type:"hidden",name:"webauthPlatform",value:"1"})):a.append($("<input/>",{type:"hidden",name:"webauthPlatform",value:"0"}))});b["catch"](function(){a.append($("<input/>",{type:"hidden",name:"webauthPlatform",value:"5"}))})}},
10)}function p(){if(0!==Application.Config.wl.webauthSupport){var a=$("form[name=form-login] button.action-webauth");if(0!=a.length&&"WebAuthnys"in window&&WebAuthnys.isSupported()){var b=!1;q()?b=!0:3===Application.Config.wl.webauthSupport?b=!0:"PublicKeyCredential"in window&&window.PublicKeyCredential&&PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable().then(function(b){b?1==Application.Config.wl.webauthSupport&&l(a):2==Application.Config.wl.webauthSupport&&l(a)});b&&l(a)}}}function q(){var a=
WebAuthTool.methodAuthGet();if(!a)return!1;if(a&&"payload"in a&&a.payload&&"method"in a&&a.method){var b=a.method;if(4===b||3===b)return b=$("input[name=nickname]").val(),k(a.payload,b,!1,!0),!0}return!1}function l(a){a.show();a.bind("click",function(a){var b=$("input[name=nickname]").val();k("",b,!0);a.preventDefault()})}function k(a,b,d,c,f){void 0===c&&(c=!1);void 0===f&&(f=void 0);(a=m.loginStart(a,b,c,f))&&a.done(function(a){(new Layer.Loader).open();if(a&&("payload"in a&&a.payload&&"authMethod"in
a&&a.authMethod&&WebAuthTool.methodAuthSet({payload:a.payload,method:a.authMethod,nickname:b}),"url"in a&&a.url)){ToolBrowser.redirectToUrl(a.url);return}ToolBrowser.redirectToUrl(Application.Config.url.root+"/")}).fail(function(a){11136===a.code&&WebAuthTool.methodAuthSet({payload:"none",method:1,nickname:b});d&&Layer.openErrorAjax(a)});return a}g.main=g.mainDevice=function(){$("#jsActionVerifyDevice").bind("click",function(a){k("",
"",!0);a.preventDefault()});ToolApp.runOnFoundationInitialized(};g.loginStartPromise=k;var m;(function(a){var b=0;a.loginStart=function(a,f,h,g){if(!b){b=1;var c=$.Deferred();if(!WebAuthnys.isSupported())return window.setTimeout(function(){b=0;c.reject({code:11144,msg:"Your browser does not support this kind of authentication."})},10),c;a=d.loginPrepare(a,f,h);var e=new Layer.Loader;h||e.open();a.done(function(a){a=WebAuthnys.Data.loginChallengeToValidObj(a.option);var b=new AbortController;
a.signal=b.signal;a=navigator.credentials.get(a);e.setMessage("Waiting for you");h&&e.open();e.buttonCancelSetVisibility(!0);e.on(Layer.EVENT_CANCEL,function(){e.buttonCancelSetVisibility(!1);b.abort()});a.then(function(a){a=WebAuthnys.Data.convertCredentialSuccessResponseToBase64(a);e.resetMessage();d.loginData(a,g).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)})})["catch"](function(a){c.reject(WebAuthTool.domErrorToAjaxError(a,!1))})}).fail(function(a){c.reject(a)});c.always(function(){b=
0;e.close();e.destroy()});return c}};var d;(function(a){a.loginPrepare=function(a,b,c){return Core.Ajax.post("/login/deviceAuthChallenge/",{csrfProtectionToken:ToolApp.getCsrfProtectionToken(),payload:a,username:b,payloadOnly:c?"1":"0"})};a.loginData=function(a,b){void 0===b&&(b={});b.csrfProtectionToken=ToolApp.getCsrfProtectionToken();b.clientJsonData=a;return Core.Ajax.post("/login/deviceAuthCheck/",b)}})(d||(d={}))})(m=g.WebAuthN||(g.WebAuthN={}))})(AppUserLogin||(AppUserLogin={}));
var AppUserLogout;((AppUserLogout||(AppUserLogout={}));
var AppUserPassword;
(function(b){b.main=function(){$("#userChangePasswordButton").bind("click",};var a;(function(a){var c=0;a.sendRecoveryPassword=function(a,b){a.hide();if(!(0<c)){c=1;var e=d.sendRecoveryPassword(b);ToolApp.loaderShow();e.done(function(a){(new Layer.InfoNoTitle).open(a.message)}).fail(function(a){Layer.openErrorAjax(a)}).always(function(){c=0;ToolApp.loaderHide();a.show()})}}})(a||(a={}));var d;(function(a){a.sendRecoveryPassword=function(a){return Core.Ajax.post("/user/sendRecoveryPassword/",
{userId:a,csrfProtectionToken:ToolApp.getCsrfProtectionToken()})}})(d||(d={}))})(AppUserPassword||(AppUserPassword={}));
var AppUserRegister;
(function(c){function t(){if("WebAuthnys"in window&&WebAuthnys.isSupported()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&0!==Application.Config.wl.webauthSupport)if(3==Application.Config.wl.webauthSupport)m();else{var a=PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();a.then(function(a){a?1==Application.Config.wl.webauthSupport&&m():2==Application.Config.wl.webauthSupport&&m()});a["catch"](function(){})}}function m(){var a=$("form[name=form-register] button.action-webauth");if(a.length&&
"WebAuthnys"in window){var d=$("input[name=nickname]",c.$form),e=function(b){c.$form.append($("<input/>",{type:"hidden",name:"keyIdB64u",value:b,id:"keyIdB64u"}));$("#row-password-webauth").hide();$("#row-webauth-enabled").show();b=$("input[name=password]");b.val("");b.removeAttr("required");d.attr("readonly","readonly");WebAuthTool.methodAuthSet({payload:"register",method:99,nickname:d.val()})};Application.webauthKeyIdB64u?e(Application.webauthKeyIdB64u):(a.on("click",function(){var b=WebAuthTool.configAuthTypeIntToString(Application.Config.wl.webauthSupport);
(b=q(b,d.val()))&&b.done(function(b){if(b&&"device"in b&&(b=b.device,"keyIdB64u"in b&&b.keyIdB64u)){e(b.keyIdB64u);g.clear();return}Layer.openErrorAjax({code:11139,msg:"Unexpected error"})}).fail(function(b){Layer.openErrorAjax(b)})}),a.show())}}function q(a,d){if(!n){n=1;var e=new Layer.Loader;e.open();var b=$.Deferred();k.registerPrepare(a,d).done(function(a){a=WebAuthnys.Data.registerChallengeToValidObj(a.option);var d=new AbortController;a.signal=d.signal;e.setMessage("Waiting for you");e.buttonCancelSetVisibility(!0);
e.on(Layer.EVENT_CANCEL,;navigator.credentials.create(a).then(function(a){e.buttonCancelSetVisibility(!1);a=WebAuthnys.Data.convertCredentialSuccessResponseToBase64(a);a=k.registerClientData(a);e.resetMessage();a.done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)})})["catch"](}).fail(function(a){b.reject(a)});b.always(function(){n=0;e.close();e.destroy()});return b}}function r(a){if("passwordKey"in
Application&&Application.passwordKey&&"WebAuthnys"in window&&"encodeListKeyStr"in WebAuthnys){a=StringTool.Utf8.encodeToUtf8Bytes(a);var d=Application.passwordKey.indexOf("-");if(0<d){var e=Application.passwordKey.substring(d+1,Application.passwordKey.length);d=Application.passwordKey.substring(0,d)}else e=Application.passwordKey,d="";a=WebAuthnys.encodeListKeyStr(a,e);return{payload:"b64:"+StringTool.Base64.encodeToBase64Bytes(a),keyId:d}}}c.formFieldCache={nickname:"",password:"",email:""};var n=
0;c.$form=$("#form-register");var h;c.main=function(){ToolBrowser.loadSvgUseListFromSelector("#form-register use");c.$form.append($("<input/>",{type:"hidden",name:"screen_w",value:screen.width}));c.$form.append($("<input/>",{type:"hidden",name:"screen_h",value:screen.height}));c.$form.append($("<input/>",{type:"hidden",name:"timezone",value:ToolBrowser.getTimezoneOffset()}));c.$form.append($("<input/>",{type:"hidden",name:"browserLanguage",value:ToolBrowser.getLanguage()}));c.$form.append($("<input/>",
{type:"hidden",name:"passwordEncoded",value:"",id:"passwordEncoded"}));c.$form.append($("<input/>",{type:"hidden",name:"passwordEncodedId",value:"",id:"passwordEncodedId"}));var a=ToolBrowser.isStorageSupportMinSizeSession();c.$form.append($("<input/>",{type:"hidden",name:"browserSStorageLargeSupported",value:a?"1":"0"}));a&&((a=ToolStorage.performerRecentGetLastSeen())&&c.$form.append($("<input/>",{type:"hidden",name:"performerIdLastSeen",value:a.toString(10)})),(a=ToolStorage.pageInfoGetLastSeenUri())&&
c.$form.append($("<input/>",{type:"hidden",name:"pageLastSeenUri",value:a})));f.isErrorShown()&&f.initSuggestionListEvents();var d=$("input[name=password]",c.$form);c.formFieldCache.email=$("#registerEmail").val();c.formFieldCache.nickname=$("input[name=nickname]",c.$form).val();c.formFieldCache.password=d.val();var e=!0;d.bind("focus",function(){e&&(e=!1,""===d.val()&&d.attr("type","text"))});d.on("keyup",function(){f.clear();var b=g.passwordCheck(d.val());b&&g.handle(b)});d.on("focus",function(){$(".error.password").remove();
var b=g.passwordCheck(d.val());b&&g.handle(b)});c.$form.find(":input:not(:hidden)").on("blur",function(b){setTimeout(function(){if(!f.didSubmitRecently(200)){var a=$(b.target);a.hasClass("inline-validation")&&""!==a.val()&&l.validateField(a)}},50)});c.$form.bind("submit",function(){h&&(h.jqXHR.abort(),h=void 0);var a=$("input[name=password]",c.$form),e=a.val();""!==e&&(e=r(e),void 0!==e&&($("#passwordEncoded").val(e.payload),a.val(""),$("#passwordEncodedId").val(e.keyId)))});setInterval(18E4);window.setTimeout(function(){t()},10)};c.registerNewKey=q;var l;(function(a){function d(a){f.clearExcludePassword();h&&h.jqXHR.abort();h=k.validate(a);h.done(function(a){p.success(a)}).fail(function(a){11150===a.code&&ToolBrowser.reloadPage()});h.always(function(){h=void 0})}a.refreshPasswordKey=function(){k.passwordKey().done(function(a){a&&"passwordKey"in a&&(Application.passwordKey=a.passwordKey)})};a.suggestNickname=function(a){$("input[name=nickname]",c.$form).val(a);
c.formFieldCache.nickname=a;f.clear()};a.validateField=function(a){f.isFieldDirty(a)&&(a=f.generateInlinePayload(a),d(a))}})(l||(l={}));var p;(function(a){a.fail=function(a){};a.success=function(a){"redirectUrl"in a&&a.redirectUrl?ToolBrowser.redirectToUrl(a.redirectUrl):!1===a.success&&g.handle(a)}})(p||(p={}));var f;(function(a){function d(){a.isNicknameSuggestionShown()&&$(".".concat("nickname-suggestion-list")).remove()}a.isErrorShown=a.isNicknameSuggestionShown=
function(){return!!$(".".concat("nickname-suggestion-list")).length};a.buildNicknameSuggestionList=function(e,b){void 0===b&&(b="#form-group-nickname");var d=$(b),c=$('<p class="'.concat("nickname-suggestion-list",'" />')),f=e.data.map(function(a){return'<span class="suggestNick">'+a+"</span>"});c.append(f.join(""));c.prepend(e.message+" ");c.insertAfter($(".error",d));a.initSuggestionListEvents()};a.initSuggestionListEvents=function(){$(".suggestNick").unbind("click").bind("click",function(a){a.preventDefault();
(a=$(this).text())&&""!==a&&l.suggestNickname(a)})};a.clear=function(){g.clear();d()};a.clearExcludePassword=a.generateInlinePayload=function(a){a={field:a.prop("name"),value:a.val()};if("password"===a.field){var b=$("input[name=nickname]",c.$form).val();""!==b&&(a.extra=b);b=r(a.value);void 0!==b&&(a.encoded=b.payload,a.value="",a.keyId=b.keyId)}return a};a.didSubmitRecently=function(a){return c.formLastSubmissionDate?(new Date).getTime()-c.formLastSubmissionDate.getTime()<=
a:!1};a.isFieldDirty=function(a){var b=a.prop("name");if(""===c.formFieldCache[b])return c.formFieldCache[b]=a.val(),!0;var d=c.formFieldCache[b]!==a.val();d&&(c.formFieldCache[b]=a.val());return d}})(f||(f={}));var g;(function(a){function d(){$("#system-error").removeClass("hide").addClass("hide");$(".error.nickname").remove();$(".error.email").remove()}function c(){$("#system-error").removeClass("hide").addClass("hide");$(".error").remove()}a.passwordCheck=function(a,c){void 0===c&&(c="");if("registerForm"in
Application&&"config"in Application.registerForm){var b=[];a.length<Application.registerForm.config.passwordMinLength&&b.push(Translation.tr("errorUserPasswordRuleLength"));a.match(/[A-Z]/)||b.push(Translation.tr("errorUserPasswordRuleUppercase"));a.match(/[a-z]/)||b.push(Translation.tr("errorUserPasswordRuleLowercase"));a.match(/[0-9]/)||b.push(Translation.tr("errorUserPasswordRuleNumber"));var d="";c&&0<=a.toLowerCase().indexOf(c.toLowerCase())?d=Translation.tr("errorGenericPasswordContainNickname"):
0<b.length&&(d=Translation.tr("errorUserPasswordRuleTitle")+":\n- "+b.join("\n- "));if(d)return{success:!1,errorfield:{password:d},successField:{password:!1}}}};a.handle=function(b){b.errorfield&&Object.keys(b.errorfield).length&&a.input(b)};a.input=function(a){if(a.errorfield){var b=Object.keys(a.errorfield)[0],e=a.errorfield[b];"password"===b?c():d();""!==e&&(e=$('<div class="error '.concat(b,'" data-message="').concat(e,'" />')),b=$("#form-group-".concat(b)).find(".input-area"),e.insertAfter(b))}a.suggestNickname&&
a.suggestNickname.data&&a.suggestNickname.data.length&&f.buildNicknameSuggestionList(a.suggestNickname)};a.clearExcludePassword=d;a.clear=c})(g=c.FormError||(c.FormError={}));var k;(function(a){a.validate=a.passwordKey=a.registerPrepare=function(a,c){return Core.Ajax.post("/register/webauthChallenge/",{csrfProtectionToken:ToolApp.getCsrfProtectionToken(),authType:a,nickname:c})};
a.registerClientData=function(a){return Core.Ajax.post("/register/webauthClientData/",{csrfProtectionToken:ToolApp.getCsrfProtectionToken(),clientJsonData:a})}})(k=c.Ajax||(c.Ajax={}))})(AppUserRegister||(AppUserRegister={}));
var AppUserRegisterConfirm;
(function(a){a.main=var b;(function(a){a.confirmEmailProxyClickHandler=function(a){a.preventDefault();var b=this.href;if(null!==b.match(/#/))return!0;c.registerConfirmContinue(Application.confirmData).always(function(){ToolBrowser.redirectToUrl(b)});return!0}})(b=a.Action||(a.Action={}));var c;(function(a){a.registerConfirmContinue=function(a){a.csrfProtectionToken=ToolApp.getCsrfProtectionToken();return Core.Ajax.post("/register/confirmContinue/",a)}})(c||
(c={}))})(AppUserRegisterConfirm||(AppUserRegisterConfirm={}));
var AppUserRegisterSuccess;((AppUserRegisterSuccess||(AppUserRegisterSuccess={}));
var AppPerformerVodList;
(function(p){var h=!1,l,d={small:{cssClass:"img_s",size:104},medium:{cssClass:"img_m",size:184},large:{cssClass:"img_l",size:324}},e="small",k=!1,q=1,r;p.main=function(){AppPerformerProfile.mainCommon();$(window).scroll(g.onWindowScroll);$(window).resize(g.onWindowResize);l=0;0==Application.totalVideo?h=!0:(r=$("#sonde").get(0),f.runCheck(Application.performer.id,Application.filter),f.computeDimensions());if(Application.performer.isAboVipSubscribed)$(".jsUnsubscribe").on("click",function(c){c.preventDefault();
g.onUnsubscribe(Application.aboId,Application.performer.nickname)})};p.isListComplete=function(){return h};var f;(function(c){c.computeDimensions=function(){var a=$("#listVideo").width(),b=e;e=a<5*d.small.size?"small":a<5*d.medium.size?"medium":"large";b!=e&&($(".vodDisplay>img").removeClass(d.small.cssClass+" "+d.medium.cssClass+" "+d.large.cssClass+" ").addClass(d[e].cssClass),$(".iconVip").removeClass("small medium large ").addClass(e));b=d[e].size;a=Math.floor(a/b);$("#vodList").css("witdh",a*
b);$("#vodList").width(a*b)};c.runCheck=function(a,b){void 0===b&&(b="");k||(k=!0,ToolBrowser.isElementInViewportPartial(r)?h||m.getList(a,b).done(function(t){for(var d in t.list)n.addVideo(t.list[d]);q++;l>=Application.totalVideo?h=!0:c.runCheck(a,b)}).fail(function(a){Layer.openErrorAjax(a)}).always(:k=!1)};c.unsubscribe=function(a,b){var c=new Layer.PopupConfirm;c.on(Layer.EVENT_CONFIRM_YES,;c.on(Layer.EVENT_CLOSE,function(){c.destroy()});
c.open(Translation.tr("cust_label_cancel_vip_subscription"))}})(f||(f={}));var g;(function(c){c.onWindowScroll=c.onWindowResize=c.onUnsubscribe=function(a,b){f.unsubscribe(a,b)}})(g||(g={}));var m;(function(c){c.getList=function(a,b){void 0===b&&(b="");return Core.Ajax.post("/video/list/",{performerId:a,nlp:q,f:b})}})(m||(m={}));var n;(function(c){c.addVideo=
function(a){l++;var b=d[e];$("#vodList").append('<div class="vodContainer"><a href="'+a.link+'"><div id="video'+a.videoId+'" class="vodDisplay"><img src="'+a.img+'" alt="'+a.videoId+'" class="'+b.cssClass+'" ><div class="vodDuration">'+a.duration+"</div>"+(a.vip?'<div class="vodVip"><span class="iconVip '+e+'"></span></div>':"")+'<div class="vodPlay"></div></div></a></div>')}})(n||(n={}))})(AppPerformerVodList||(AppPerformerVodList={}));
var AppPerformerVodPlayer;
(function(g){var a=null,e=320,f=240;g.main=function(){AppPerformerProfile.mainCommon();Application.playable&&(f=Application.videoHeight,e=Application.videoWidth,$(window).resize(c.onWindowResize),b.src(Application.playlist,null))};var b;(function(d){d.src=function(d,b){null!==a&&a.dispose();a=videojs("vod-video",{controls:!0,autoHeight:!0,playsinline:!0,autoplay:!0,nativeControlsForTouch:!0,fluid:!0});a.src(d,b);a.on("hide",;c.onWindowResize()};d.dispose=function(){null!==
a&&a.dispose();a=null}})(b||(b={}));var c;(function(a){a.onWindowResize=function(){var a=$("#mProfile").width()*f/e;$("#vod-video").height(a)}})(c||(c={}))})(AppPerformerVodPlayer||(AppPerformerVodPlayer={}));
var AppVideoList;
(function(p){function t(b,e){var d=$.Deferred();if(b in h)return h[b].videoId=e,d.resolve(h[b]),d;AppPerformerProfile2.Ajax.price(b,e).done(function(f){h[b]=f;d.resolve(f)}).fail(function(b){d.reject(b)});return d}var l,g,k,d=0,h={};p.main=function(){AppOnlineAndChat.init();var b=AppOnlineAndChat.setupListOnline(Application.media),e=b.getFilterMobile();e&&e.init();b.openBefore();if(ToolApp.disclaimerMustBeDisplayed())ToolApp.event.on(210,function(){ToolApp.disclaimerMustBeDark()&&$("#l-online").show();
window.setTimeout(function(){b.resize()},10)});ToolApp.disclaimerMustBeDark()||$("#l-online").show();b.openAfter(1);ToolApp.pageList.push(b);$(window).resize(function(){b.resize()});l=b;var h=b.getMenuFilter();h&&h.setupEventAndUi();var f=new ModuleVideoPlayer.VideoPlayerManager({});ToolApp.pageList.push(f);f.on(2,function(c){f.closeBefore();b.openBefore();$("#l-online").show();$("#l-video-player").hide();ToolMenu.pageHasJustChanged();f.close();b.openAfter(1);l=b});f.on(203,function(c,a){if(g&&g.mediaId==
a.videoId){var q="isVipGift"in a&&1===a.isVipGift;b.onVideoPlayed(g,q);q&&0<ToolApp.userInfo.videoVipGiftedRemaining&&(ToolApp.userInfo.videoVipGiftedRemaining--,ToolApp.userVideoVipGiftedUpdateUi(ToolApp.userInfo.videoVipGiftedRemaining),ToolApp.userInfoRefreshFromDatabase("videoList-video-vip"))}});f.on(204,function(c,a){g&&g.mediaId==a.videoId&&(g.mediaInfo=a,b.onLoveDataChanged(g))});var r=function(c){d=0;b.closeBefore();f.openBefore(c);$("#l-online").hide();$("#l-video-player").show();ToolMenu.pageHasJustChanged();
g=c;ToolStorage.videoPlayedAppend(c.mediaId);b.close();f.openAfter(1);l=f;k&&(b.videoLoaderState(k,!1),k=void 0)},m=function(c,a){b.videoLoaderState(c,a);a&&(k&&b.videoLoaderState(k,!1),k=c)},n=function(c,b){if(d!==c.mediaId){d=c.mediaId;m(c,!0);var a=AppPerformerProfile2.Ajax.videoInfo(c.performerId,c.mediaId);a.done(function(a){if(a.playable)if(c.mediaInfo.src=a.url,c.mediaInfo.isVipGift=a.isGift,a.isLoved&&(c.mediaInfo.isLoved=a.isLoved),a.thumbnail_vtt&&(c.mediaInfo.vttSrc=a.thumbnail_vtt),b)f.onVideoMoreInfo(c.mediaInfo);
else a.videoId===d&&(r(c),d=0);else a.videoId===d&&((new Layer.InfoNoTitle).open(Translation.tr("animMediaVideoStatusOk")),d=0)}).fail(function(c){"abort"!==a.jqXHR.statusText&&(Layer.openErrorAjax(c),d=0)}).always(function(){m(c,!1)})}},p=function(c){if(d!==c.mediaId){d=c.mediaId;m(c,!0);var a=t(c.performerId,c.mediaId);a.done(function(a){if(a.videoId===d){d=0;var b=new Layer.VipSubscription;b.on(Layer.EVENT_CLOSE,function(){b.destroy()});b.on(Layer.EVENT_SUBSCRIBE,function(a){b.close();if(!Application.Config.isUserConnected&&
Application.Config.wl.signUpSignIsAsLayer)ToolRegister.loginWebauthOrRegister(11);else if(!ToolApp.redirectToLoginIfNotConnected()){var d=new Layer.Loader;d.open();ToolPerformer.Ajax.vodVipSubscriptionAdd(c.performerId).done(function(a){d.close();var b=new Layer.InfoNoTitle;b.open(Translation.tr("successCustomerVodVipSubscribed",{"#MODEL#":c.mediaInfo.nickname}));a&&"userInfo"in a&&ToolApp.userInfoUpdateUi(a.userInfo);b.on(Layer.EVENT_CLOSE,function(){Application.performerIdVipAccessList.push(c.performerId);
n(c,!1)})}).fail(function(a){a&&62378===a.code?ToolBrowser.redirectToUrl(Application.Config.url.root+"/credit/"):(d.close(),Layer.openErrorAjax(a))})}});b.open({performerId:c.performerId,performerNickname:c.mediaInfo.nickname,amountWithCurrency:a.price.vodVipWithCurrencyOnly,displayActionGoToBioPage:!0,bioPageLink:a.profileLink,vipFreeEnabled:a.vipVideoGiftIsEnabled||0==ToolApp.userInfo.videoVipGiftedRemaining,videoTotalSecond:a.videoTotalSecond,videoTotalMinute:a.videoTotalMinute,photoNb:a.photoNb,
videoNb:a.videoNb})}}).fail(function(c){"abort"!==a.jqXHR.statusText&&(Layer.openErrorAjax(c),d=0)}).always(function(){m(c,!1)})}};b.on(202,function(c,a){var b=a.mediaInfo;if(b.src)"vttSrc"in b&&b.vttSrc||n(a,!0),r(a);else if(ToolApp.userInfo.isAuth)if(0<=Application.performerIdVipAccessList.indexOf(a.performerId)||b.isVipGift)n(a,!1);else if(0<ToolApp.userInfo.videoVipGiftedRemaining&&"vipGiftEnabled"in b&&b.vipGiftEnabled){var d=new Layer.VipVideoFree;d.on(Layer.EVENT_USE_FREE_VIDEO_VIP,function(b,
c){d.destroy();n(a,!1)});d.on(Layer.EVENT_CLOSE,function(){d.destroy()});d.open({nbFreeVideoVip:ToolApp.userInfo.videoVipGiftedRemaining,performerId:a.performerId,performerNickname:a.mediaInfo.nickname,mediaId:a.mediaId,displayActionGoToBioPage:!0,bioPageLink:Application.Config.url.root+"/model/"+a.mediaInfo.nickname.toLowerCase()+"/"})}else p(a);else Application.Config.wl.signUpSignIsAsLayer?ToolRegister.loginWebauthOrRegister():ToolApp.redirectToLoginIfNotConnected()});ToolApp.runOnFoundationInitialized(function(){var c=
!1;$(window).scroll(function(){c||(c=!0,window.setTimeout(function(){c=!1;b.scroll()},150))})});$(window).resize(function(){l.resize();e&&(ToolBrowser.isMobile()?e.isOpen()?e.resize():e.refreshUiButtonVisibility():e.hide())});ToolApp.event.on(ToolApp.EVENT_HEADER_DISPLAYED,function(){e&&e.fadeIn()});ToolApp.event.on(ToolApp.EVENT_HEADER_HIDDEN,function(){e&&e.fadeOut()})}})(AppVideoList||(AppVideoList={}));
var __extends=this&&this.__extends||function(){var a=function(c,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return a(c,b)};return function(c,b){function d(){this.constructor=c}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}(),
Layer;
(function(a){unction b(){e&&(e.close(),e=void 0);for(;f.length;){var a=f.shift();a&&a()}}function d(g){c()?g():(e=new a.LoaderWaitingForRessource,e.open(),f.push(g),ToolApp.runOnFoundationInitialized(function(){b()}))}var e,f=[];a.CLICK_PRIVATE_THRESHOLD_MS=800;a.EVENT_CLOSE="close";a.EVENT_CANCEL="cancel";a.EVENT_CLOSE_AND_GOTO_ONLINE_LIST="closeGoToOnlineList";a.EVENT_CLOSE_AND_GOTO_PERFORMER_PROFILE="closeGoToPerformerProfile";a.EVENT_ONLINE_LIST_PRE_REFRESH="onlineListRefresh";
a.EVENT_SUBMIT="submit";a.EVENT_TIP="tip";var h=function(a){function b(){var b=a.call(this)||this;b.dateOpen=new Date;b.isOrWillBeOpen=!1;return b}__extends(b,a);b.prototype.close=function(){this.isOrWillBeOpen=!1};b.prototype.layerId=function(){return 0};b.prototype.openWhenReady=function(b){var a=this;this.isOrWillBeOpen=!0;d(};return b}(Core.Listener);a.Common=h;a.isReady=c;a.runOnFoundationReady=b;a.runIfReadyOrShowLoader=d;a.isOneVisible=function(){for(var b=
document.querySelectorAll("div.reveal-overlay"),a=0;a<b.length;a++)if("block"==b[a].style.display)return!0;return!1}})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(d,b){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(d[a]=c[a])};return e(d,b)};return function(d,b){function h(){this.constructor=d}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");e(d,b);d.prototype=null===b?Object.create(b):(h.prototype=b.prototype,new h)}}(),
Layer;
(function(e){var d,b=function(b){function c(){var a=b.call(this)||this;a.$layer=$("#popupActionPanel");d||(d=$("div[data-sid=tip]",a.$layer).detach());a.tipData={performerId:0,amount:0,performerNickname:"",userInterface:2};return a}__extends(c,b);c.prototype.close=function(){b.prototype.close.call(this);this.$layer.foundation("close")};c.prototype.onActionSendTip=function(){var a=$("input.js-amount",this.$layer).val();this.tipData.amount=parseFloat(a);this.fire(e.EVENT_TIP,this.tipData)};c.prototype.open=function(a,
d,b){var c=this;this.openWhenReady(function(){c.openReal(a,d,b)})};c.prototype.openReal=function(a,b,c){var e=this;this.tipData=b;var f=this.$layer.find(".action-panel-content");f.html(a.renderGetBuffer());a.setupEvent(f);a.on(ModuleActionPanel.EVENT_ITEM_CLICKED,function(){e.close()});var g=$(".item-accordeon[data-sid=3]",f);g.length?g.after(d.clone(!0)):(g=$(".item-accordeon:first",f),g.length?g.before(d.clone(!0)):f.append(d.clone(!0)));g=$(".slider",this.$layer);a=a.getDatabaseAll();1<=Object.keys(a.category).length&&
(a=void 0,a="undefined"===typeof c?a=f.find(".accordeon-data-header:first"):4===c?f.find('.item-accordeon[data-sid="tip"] > .accordeon-data-header'):f.find('.item-accordeon[data-sid="'+c+'"] > .accordeon-data-header'),a.trigger("click"));$("input.js-amount",this.$layer).val(b.amount.toString());$(".js-performer-nickname",this.$layer).text(b.performerNickname);new Foundation.Slider(g,{initialStart:b.amount});g.foundation("_reflow");$(".js-action-tip-submit",this.$layer).unbind("click").bind("click",
function(a){if(ToolUi.isEventToFast(e.dateOpen))a.preventDefault();else e.onActionSendTip();a.stopPropagation()});this.$layer.foundation("open")};c.prototype.loaderShow=function(){$(".js-loader",this.$layer).show();$(".js-action-button",this.$layer).hide()};c.prototype.loaderHide=function(){$(".js-loader",this.$layer).hide();$(".js-action-button",this.$layer).show()};return c}(e.Common);e.ActionPanelAndBonus=b})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var d=function(f,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return d(f,a)};return function(f,a){function e(){this.constructor=f}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(f,a);f.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),
Layer;
(function(d){d.EVENT_CONFIRM_YES="clickConfirmYes";var f=function(a){function e(){var b=a.call(this)||this;b.$layer=$("#popupConfirmLayer");return b}__extends(e,a);e.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};e.prototype.open=function(a,c){var b=this;void 0===c&&(c=!1);this.openWhenReady(function(){b.openReal(a,c)})};e.prototype.openReal=function(a,c){void 0===c&&(c=!1);var b=this;$(".m-title",this.$layer).html(a);c?$(".button-cancel",this.$layer).hide():$(".button-cancel",
this.$layer).unbind().bind("click",function(){b.close()});$(".button-yes",this.$layer).unbind().bind("click",function(){b.fire(d.EVENT_CONFIRM_YES);b.close()});this.$layer.foundation("open")};return e}(d.Common);d.PopupConfirm=f})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(f,a){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])};return c(f,a)};return function(f,a){function g(){this.constructor=f}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(f,a);f.prototype=null===a?Object.create(a):(g.prototype=a.prototype,new g)}}(),
Layer;
(function(c){function f(e,a,c){var b=20-Math.round(((new Date).getTime()-a.getTime())/1E3);0>=b||(g(e,b),d=setInterval(function(){0>b?(d&&(window.clearInterval(d),d=0),c&&c()):(g(e,b),b--)},1E3))}function a(a,b){$(".js-content",a).hide();$(".js-confirm",a).hide();switch(b){case "sneak_peek":$(".js-content-sneak-peek",a).show();$(".js-confirm-exit-sneak-peek",a).show();break;case "prive":$(".js-content-private",a).show();$(".js-confirm-exit-private",a).show();break;case "xclusive":$(".js-content-xclusive",a).show(),
$(".js-confirm-exit-xclusive",a).show()}}function g(a,b){$(".sneak-peek-countdown",a).text(b)}c.EVENT_CONFIRM="confirm";var d=0,h=function(e){function b(){var a=e.call(this)||this;a.$layer=$("#popupConfirmExitPrivate");return a}__extends(b,e);b.prototype.close=function(){e.prototype.close.call(this);d&&(window.clearInterval(d),d=0);this.$layer.foundation("close")};b.prototype.onConfirm=function(){this.fire(c.EVENT_CONFIRM)};b.prototype.open=function(a,b){var c=this;void 0===a&&(a="prive");this.openWhenReady(function(){c.openReal(a,
b)})};b.prototype.openReal=function(b,c){this.$layer.foundation("open");var e=this;if("sneak_peek"===b&&c){if(d)return;f(this.$layer,c,function(){})}a(this.$layer,b);$(".js-confirm-exit-sneak-peek",this.$layer).unbind("click").bind("click",function(a){e.onConfirm();e.close();a.stopPropagation()});$(".js-confirm-exit-private",this.$layer).unbind("click").bind("click",function(a){e.onConfirm();e.close();a.stopPropagation()});$(".js-confirm-exit-xclusive",this.$layer).unbind("click").bind("click",function(a){e.onConfirm();
e.close();a.stopPropagation()})};return b}(c.Common);c.ConfirmExitPrivate=h})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(d,a){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return e(d,a)};return function(d,a){function b(){this.constructor=d}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");e(d,a);d.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}(),
Layer;
(function(e){var d=function(a){function b(){var c=a.call(this)||this;c.$layer=$("#popupNoEnoughCreditDuringShow");return c}__extends(b,a);b.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};b.prototype.open=function(){var a=this;this.openWhenReady(function(){a.openReal()})};b.prototype.openReal=function(){this.$layer.foundation("open");var a=this;ToolApp.creditPageTargetShouldBeBlank()&&$("a.credits",this.$layer).attr("target","_blank");$(".js-layer-action-home",this.$layer).unbind("click").bind("click",
function(b){ToolUi.isEventToFast(a.dateOpen)?(b.preventDefault(),b.stopPropagation()):(a.$layer.foundation("close"),a.fire(e.EVENT_CLOSE_AND_GOTO_ONLINE_LIST),b.stopPropagation(),b.preventDefault())})};return b}(e.Common);e.CreditNotEnoughDuringShow=d})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var d=function(c,b){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(b,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(b[a]=e[a])};return d(c,b)};return function(c,b){function a(){this.constructor=c}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(c,b);c.prototype=null===b?Object.create(b):(a.prototype=b.prototype,new a)}}(),
Layer;
(function(d){d.disclaimerIdExists=var c=function(b){function a(){var a=b.call(this)||this;a.$layer=$("#popupDisclaimer");a.broadcastEvent=!0;return a}__extends(a,b);a.prototype.close=function(){b.prototype.close.call(this);this.$layer.foundation("close")};a.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};a.prototype.openReal=function(a){var b=this;this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(d.EVENT_CLOSE)});
var c=this.getLayerOverlay();a.overlayDark?c.css("background-color","rgba(0, 0, 0, .95)"):c.css("background-color","")};a.prototype.getLayerElement=function(){return this.$layer};a.prototype.getLayerOverlay=return a}(d.Common);d.PopupDisclaimer=c})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(d,a){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])};return e(d,a)};return function(d,a){function c(){this.constructor=d}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");e(d,a);d.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),
Layer;
(function(e){var d=function(a){function c(){var b=a.call(this)||this;b.$layer=$("#popupFavoriteNotification");b.data={performerNickname:"",performerThumbnail:""};return b}__extends(c,a);c.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};c.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};c.prototype.openReal=function(a){this.data=a;var b=this;$("h2 span",this.$layer).html(StringTool.escapeHtml(this.data.performerNickname));$(".performerThumbnail").remove();
$('<img class="performerThumbnail" src="'+this.data.performerThumbnail+'" />').insertAfter("#popupFavoriteNotification .title");$(".accept-notifications").off().on("click",function(){b.close()});$(".close-notifications").off().on("click",function(){b.close()});this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(e.EVENT_CLOSE)})};return c}(e.Common);e.FavoriteNotification=d})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(d,a){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return e(d,a)};return function(d,a){function b(){this.constructor=d}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");e(d,a);d.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}(),
Layer;
(function(e){var d=function(a){function b(){var c=a.call(this)||this;c.$layer=$("#popupGenericWithTitle");return c}__extends(b,a);b.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};b.prototype.open=function(a,b){var c=this;this.openWhenReady(function(){c.openReal(a,b)})};b.prototype.openReal=function(a,b){if(0!=a.length){$(".js-info-title",this.$layer).html(a);$(".js-info-content",this.$layer).html(b);this.$layer.foundation("open");var c=this;this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){c.fire(e.EVENT_CLOSE)})}};
return b}(e.Common);e.GenericWithTitle=d})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var b=function(c,a){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var b in e)Object.prototype.hasOwnProperty.call(e,b)&&(a[b]=e[b])};return b(c,a)};return function(c,a){function d(){this.constructor=c}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");b(c,a);c.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),
Layer;
(function(b){var c=function(a){function d(){var b=a.call(this)||this;b.$layer=$("#popupGoToOnlineWithMessage");return b}__extends(d,a);d.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};d.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};d.prototype.openReal=function(a){var d=this;this.$layer.foundation("open");var c=this;$(".js-layer-action-home",this.$layer).unbind("click").bind("click",function(a){ToolUi.isEventToFast(c.dateOpen)?(a.preventDefault(),
a.stopPropagation()):(c.close(),a.stopPropagation(),a.preventDefault(),c.fire(b.EVENT_CLOSE_AND_GOTO_ONLINE_LIST))});this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){d.fire(b.EVENT_CLOSE)});$("p.js-content",this.$layer).hide();switch(a.messageIdToUse){case 2:$("p.js-content.js-type-model-has-left",this.$layer).show();break;case 1:$("p.js-content.js-type-connection-error",this.$layer).show();break;case 3:$("p.js-content.js-type-model-is-in-xclusive",this.$layer).show()}};return d}(b.Common);
b.GoToOnlineWithMessage=c})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(e,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(c[f]=a[f])};return c(e,b)};return function(e,b){function d(){this.constructor=e}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");c(e,b);e.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}(),
Layer;
(function(c){var e=function(b){function d(){var a=b.call(this)||this;a.$layer=$("#popupGoToPrivateOnly");a.dateOpen=new Date;a.eventOnClose=c.EVENT_CLOSE;return a}__extends(d,b);d.prototype.close=function(){b.prototype.close.call(this);this.eventOnClose=c.EVENT_CLOSE;this.$layer.foundation("close")};d.prototype.onActionCloseAndGoToListOnline=function(){this.eventOnClose=c.EVENT_CLOSE_AND_GOTO_ONLINE_LIST;this.$layer.foundation("close")};d.prototype.onActionGoToPrivate=function(){this.eventOnClose=c.EVENT_GOTO_PRIVATE;
this.$layer.foundation("close")};d.prototype.onActionGoToSneakpeek=function(){this.eventOnClose=c.EVENT_GOTO_SNEAKPEEK;this.$layer.foundation("close")};d.prototype.open=function(a){var c=this;this.openWhenReady(function(){c.openReal(a)})};d.prototype.openReal=function(a){this.$layer.foundation("open");this.eventOnClose=c.EVENT_CLOSE;$(".js-performer-private-price",this.$layer).html(a.pricePrivateAmountWithCurrency);$(".js-performer-sneakpeek-price",this.$layer).html(a.priceSneakPeekAmountWithCurrency);
$(".js-performer-nickname",this.$layer).html(a.performerNickname);$("#help-content-sneakpeek").hide();a.sneakPeekEnabled&&a.enoughCredit?($(".info-sneakpeek-available").removeClass("is-hidden"),this.$layer.removeClass("xclusive-disabled")):($(".info-sneakpeek-available").addClass("is-hidden"),this.$layer.addClass("xclusive-disabled"));$("span.js-client-amount-with-currency",this.$layer).html(a.clientCreditAmountWithCurrency);var b=this,d=$(".js-action-go-to-private",this.$layer);d.unbind("click").bind("click",
function(a){if(ToolUi.isEventToFast(b.dateOpen,c.CLICK_PRIVATE_THRESHOLD_MS))a.preventDefault();else b.onActionGoToPrivate();a.stopPropagation()});$(".js-action-go-to-sneakpeek",this.$layer).unbind("click").bind("click",function(a){if(ToolUi.isEventToFast(b.dateOpen,c.CLICK_PRIVATE_THRESHOLD_MS))a.preventDefault();else b.onActionGoToSneakpeek();a.stopPropagation()});$(".js-layer-action-home",this.$layer).unbind("click").bind("click",function(a){ToolUi.isEventToFast(b.dateOpen,c.CLICK_PRIVATE_THRESHOLD_MS)?
(a.preventDefault(),a.stopPropagation()):(b.onActionCloseAndGoToListOnline(),a.stopPropagation(),a.preventDefault())});this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(b.eventOnClose)});var e=$(".satisfactionLowWarning",this.$layer);"satisfactionLowRateWarning"in a&&a.satisfactionLowRateWarning&&a.enoughCredit?e.show():e.hide();e=$(".js-action-get-credit",this.$layer);a.enoughCredit?(d.show(),e.hide()):(ToolApp.creditPageTargetShouldBeBlank()&&$("a.credits",e).attr("target",
"_blank"),d.hide(),e.show())};return d}(c.Common);c.GoToPrivateOnly=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(e,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])};return c(e,b)};return function(e,b){function d(){this.constructor=e}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");c(e,b);e.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}(),
Layer;
(function(c){c.EVENT_GOTO_XCLUSIVE="clickXclusive";c.EVENT_GOTO_PRIVATE="clickPrivate";c.EVENT_GOTO_SNEAKPEEK="clickSneakpeek";var e=function(b){function d(){var a=b.call(this)||this;a.$layer=$("#popupGoToPrivateOrXclusive");return a}__extends(d,b);d.prototype.close=function(){b.prototype.close.call(this);this.$layer.foundation("close");this.fire(c.EVENT_CLOSE)};d.prototype.onActionGoToPrivate=function(){this.fire(c.EVENT_GOTO_PRIVATE)};d.prototype.onActionGoToXclusive=function(){this.fire(c.EVENT_GOTO_XCLUSIVE)};d.prototype.open=
function(a){var c=this;this.openWhenReady(function(){c.openReal(a)})};d.prototype.openReal=function(a){$(".js-performer-private-price",this.$layer).html(a.pricePrivateAmountWithCurrency);$(".js-performer-xclusive-price",this.$layer).html(a.priceXclusiveAmountWithCurrency);$(".js-performer-nickname",this.$layer).html(a.performerNickname);ToolBrowser.isMobile()||(a.toyName&&a.toyName.length?($(".js-toy-name",this.$layer).html(a.toyName),$(".toy-content",this.$layer).show()):$(".toy-content",this.$layer).hide());
a.xclusiveEnabled&&a.enoughCredit?($(".info-xclusive-available",this.$layer).removeClass("is-hidden"),this.$layer.removeClass("xclusive-disabled")):($(".info-xclusive-available",this.$layer).addClass("is-hidden"),this.$layer.addClass("xclusive-disabled"));$("span.js-client-amount-with-currency",this.$layer).html(a.clientCreditAmountWithCurrency);var b=this,d=$(".js-action-go-to-private",this.$layer);d.unbind("click").bind("click",function(a){if(ToolUi.isEventToFast(b.dateOpen,c.CLICK_PRIVATE_THRESHOLD_MS))a.preventDefault();
else b.onActionGoToPrivate();a.stopPropagation()});var e=$(".js-action-go-to-xclusive",this.$layer);e.unbind("click").bind("click",function(a){if(ToolUi.isEventToFast(b.dateOpen,c.CLICK_PRIVATE_THRESHOLD_MS))a.preventDefault();else b.onActionGoToXclusive();a.stopPropagation()});this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(c.EVENT_CLOSE)});var f=$(".js-action-get-credit",this.$layer),h=$(".textGenericCam2camNotAvailable",this.$layer),g=!1;if(a.enoughCredit){if(a.payingShowEnabled)var k=
!0;else k=!1,g=!0;f.hide()}else k=!1,ToolApp.creditPageTargetShouldBeBlank()&&$("a.credits",f).attr("target","_blank"),f.show();f=$(".textPayingShowDisabled",this.$layer);var l=$(".explainCredits",this.$layer);g?(f.show(),l.hide(),this.$layer.addClass("paid-show-disabled-all")):(f.hide(),l.show(),this.$layer.removeClass("paid-show-disabled-all"));g=$(".satisfactionLowWarning",this.$layer);"satisfactionLowRateWarning"in a&&a.satisfactionLowRateWarning&&a.enoughCredit?g.show():g.hide();k?(e.show(),
d.show(),"undefined"===typeof a.isCam2CamAvailable||a.isCam2CamAvailable?h.hide():h.show()):(e.hide(),d.hide(),h.hide());this.$layer.foundation("open")};return d}(c.Common);c.GoToPrivateOrXclusive=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var b=function(e,a){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return b(e,a)};return function(e,a){function d(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");b(e,a);e.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),
Layer;
(function(b){var e=function(a){function d(){var c=a.call(this)||this;c.$layer=$("#popupGoToXclusiveOnly");return c}__extends(d,a);d.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close");this.fire(b.EVENT_CLOSE)};d.prototype.onActionGoToXclusiveOnly=d.prototype.open=function(c){var a=this;this.openWhenReady(function(){a.openReal(c)})};d.prototype.openReal=function(a){a.toyName&&a.toyName.length&&$(".js-toy-name",this.$layer).html(a.toyName);$(".js-performer-xclusive-price",
this.$layer).html(a.priceXclusiveAmountWithCurrency);$(".js-performer-nickname",this.$layer).html(a.performerNickname);$("span.js-client-amount-with-currency",this.$layer).html(a.clientCreditAmountWithCurrency);var c=this,d=$(".js-action-go-to-xclusive",this.$layer);d.unbind("click").bind("click",function(a){if(ToolUi.isEventToFast(c.dateOpen,b.CLICK_PRIVATE_THRESHOLD_MS))a.preventDefault();else c.onActionGoToXclusiveOnly();a.stopPropagation()});this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",
function(){c.fire(b.EVENT_CLOSE)});var e=$(".js-action-get-credit",this.$layer),f=$(".textGenericCam2camNotAvailable",this.$layer);a.enoughCredit?(d.show(),a.isCam2CamAvailable?f.hide():f.show(),e.hide()):(d.hide(),f.hide(),e.show());this.$layer.foundation("open")};return d}(b.Common);b.GoToXclusiveOnly=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var b=function(e,a){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return b(e,a)};return function(e,a){function d(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");b(e,a);e.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),
Layer;
(function(b){b.DOM_ID_CREDIT_INFOS="js-credit-infos";b.DOM_ID_CREDIT_TRANSACTION_SECURE="js-credit-transaction-https";var e=function(a){function d(b){var c=a.call(this)||this;c.$layer=$("#"+b);if(!c.$layer.length)throw Error("DomId not found: "+b);return c}__extends(d,a);d.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};d.prototype.open=function(){var a=this;this.openWhenReady(function(){a.openReal()})};d.prototype.openReal=function(){var a=this;this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",
function(){a.fire(b.EVENT_CLOSE)})};return d}(b.Common);b.InfoDomId=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var g=function(f,a){g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return g(f,a)};return function(f,a){function e(){this.constructor=f}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");g(f,a);f.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),
Layer;
(function(g){var f=function(a){function e(){var c=a.call(this)||this;c.$layer=$("#popupInfoNoTitle");return c}__extends(e,a);e.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};e.prototype.open=function(a,b,d){var c=this;void 0===b&&(b="");this.openWhenReady(function(){c.openReal(a,b,d)})};e.prototype.openReal=function(a,b,d){void 0===b&&(b="");$(".js-info-content",this.$layer).html(a);a=$(".js-action-get-credit",this.$layer);d&&d.credit?(a.show(),ToolApp.creditPageTargetShouldBeBlank()&&$("a.credits",
a).attr("target","_blank")):a.hide();d=$("p.footer",this.$layer);b&&b.length?(d.show(),d.html(b)):(d.hide(),d.html(""));this.$layer.foundation("open");var c=this;this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){c.fire(g.EVENT_CLOSE)})};return e}(g.Common);g.InfoNoTitle=f})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(f,b){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])};return e(f,b)};return function(f,b){function a(){this.constructor=f}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");e(f,b);f.prototype=null===b?Object.create(b):(a.prototype=b.prototype,new a)}}(),
Layer;
(function(e){function f(a,c,d){var b=new e.InfoNoTitle;c=d&&d.credit?"":Translation.tr("titleGenericErrorNumber",{"#NUMBER#":c.toString()});b.open(a,c,d);return b}var b=function(a){function c(){var d=a.call(this)||this;d.$layer=$("#popupInfoWithTitle");return d}__extends(c,a);c.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};c.prototype.open=c.prototype.openReal=function(a,c,b){if(0!=
a.length){$(".js-info-title",this.$layer).html(a);$(".js-info-content",this.$layer).html(c);a=$(".js-action-get-credit",this.$layer);b&&b.credit?a.show():a.hide();this.$layer.foundation("open");var d=this;this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){d.fire(e.EVENT_CLOSE)})}};return c}(e.Common);e.InfoWithTitle=b;e.openErrorAjax=e.openError=f})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var d=function(e,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,b){c.__proto__=b}||function(c,b){for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a])};return d(e,a)};return function(e,a){function c(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(e,a);e.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),
Layer;
(function(d){var e=function(a){function c(){var b=a.call(this)||this;b.$layer=$("#popupInputBox");b.config={title:"",label:"",inputContent:"",id:void 0};b.submitFired=!1;return b}__extends(c,a);c.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};c.prototype.submitHasBeenDone=function(){return this.submitFired};c.prototype.onSubmit=function(){var b=Core.clone(this.config);b.inputContent=this.$layer.find(".js-input-data").val();this.submitFired=!0;this.fire(d.EVENT_SUBMIT,b)};
c.prototype.open=function(b){var a=this;this.openWhenReady(function(){a.openReal(b)})};c.prototype.openReal=function(b){this.config=b;this.submitFired=!1;this.$layer.find(".title").html(b.title);this.$layer.find(".js-label").html(b.label);var a=this.$layer.find(".js-input-data");a.val(b.inputContent);var c=this;this.$layer.find(".js-input-box-submit").unbind("click").bind("click",function(){c.onSubmit()});this.$layer.foundation("open");setTimeout(function(){a.focus()},100);this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",
function(){c.fire(d.EVENT_CLOSE);c.$layer.unbind("closed.zf.reveal");c.$layer.find(".js-input-box-submit").unbind("click")})};return c}(d.Common);d.InputBox=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var d=function(b,a){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(b[e]=c[e])};return d(b,a)};return function(b,a){function f(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");d(b,a);b.prototype=null===a?Object.create(a):(f.prototype=a.prototype,new f)}}(),
Layer;
(function(d){var b="",a=function(a){function c(){var b=a.call(this)||this;b.$layer=$("#popupLoader");return b}__extends(c,a);c.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};c.prototype.open=function(b,a){var c=this;void 0===a&&(a=!1);this.openWhenReady(};c.prototype.openReal=function(a,c){var e=this;void 0===c&&(c=!1);a?this.setMessage(a):b&&this.setMessage(b);this.buttonCancelSetVisibility(c).unbind("click").bind("click",function(){e.fire(d.EVENT_CANCEL)});
this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){e.fire(d.EVENT_CLOSE);e.$layer.find(".js-action-cancel").unbind("click");e.$layer.unbind("closed.zf.reveal")})};c.prototype.buttonCancelSetVisibility=function(a){var b=this.$layer.find(".js-action-cancel");a?b.show():b.hide();return b};c.prototype.resetMessage=function(){""!=b&&this.setMessage(b)};c.prototype.setMessage=function(a){var c=$(".js-message",this.$layer);""==b&&(b=c.html());c.html(a)};
return c}(d.Common);d.Loader=a})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(a,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,e){b.__proto__=e}||function(b,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(b[a]=e[a])};return c(a,b)};return function(a,b){function d(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");c(a,b);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}(),
Layer;
(function(c){var a=function(b){function a(){var a=b.call(this)||this;a.$layer=$("#loaderForRessourceMissing");return a}__extends(a,b);a.prototype.close=function(){b.prototype.close.call(this);this.$layer.hide();this.overlay&&this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)};a.prototype.open=function(){this.overlay||(this.overlay=document.createElement("div"),this.overlay.id="loaderForRessourceMissingOverlay",document.body.insertBefore(this.overlay,document.body.firstChild));for(var a=
this.$layer.find("img"),b=0;b<a.length;b++){var c=a[b],d=c.getAttribute("data-src");d&&c.setAttribute("src",d)}this.$layer.show()};return a}(c.Common);c.LoaderWaitingForRessource=a})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var f=function(e,d){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])};return f(e,d)};return function(e,d){function c(){this.constructor=e}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(e,d);e.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}(),
Layer;
(function(f){var e=function(d){function c(){var a=d.call(this)||this;a.$layer=$("#popupLogin");if(!a.$layer.length&&"onerror"in window&&window.onerror)window.onerror("LoginLayer: DOM ID not found");a.$inputNickname=$("input[name=nickname]",a.$layer);a.$inputPassword=$("input[name=password]",a.$layer);a.$inputStayConnected=$("input[name=stayConnected]",a.$layer);a.submitLocked=!1;a.data={stayConnected:!1,nickname:"",password:"",passwordVisible:!0,webauthVisible:!1,credentialApiToken:"",canBeClosed:!0};a.passwordOnFocusChangeToText=
!1;return a}__extends(c,d);c.prototype.close=function(){d.prototype.close.call(this);this.$layer&&(this.$layer.foundation("close"),this.$inputPassword&&this.$inputPassword.attr("type","password"))};c.prototype.destroy=function(){d.prototype.destroy.call(this);this.$layer=this.$inputStayConnected=this.$inputPassword=this.$inputNickname=void 0};c.prototype.layerId=function(){return 2};c.prototype.syncView=function(){this.$inputNickname&&this.$inputPassword&&this.$inputStayConnected&&(this.data.nickname=
this.$inputNickname.val(),this.data.password=this.$inputPassword.val(),this.data.stayConnected=this.$inputStayConnected.prop("checked"))};c.prototype.errorSystemDisplay=function(a,b){$(".global-system-error .fi-alert",this.$layer).html(b);$(".global-system-error",this.$layer).removeClass("hide")};c.prototype.errorSystemHide=function(){$(".global-system-error",this.$layer).addClass("hide")};c.prototype.errorFieldDisplay=function(a){this.errorRemoveAll();var b=StringTool.escapeHtml(a.msg);b=$('<div class="error" data-message="'.concat(b,
'" />'));$("div[data-field="+a.fieldId+"]",this.$layer).append(b)};c.prototype.errorRemoveAll=function(){this.errorRemoveField();this.errorSystemHide()};c.prototype.errorRemoveField=function(){$("div.error",this.$layer).remove()};c.prototype.submitLock=function(){$("form[name=form-login]",this.$layer).attr("disabled","disabled");$(".login-row-submit",this.$layer).hide();$(".js-loader",this.$layer).show();this.submitLocked=!0};c.prototype.submitUnlock=function(){$("form[name=form-login]",this.$layer).removeAttr("disabled");
$(".js-loader",this.$layer).hide();$(".login-row-submit",this.$layer).show();this.submitLocked=!1};c.prototype.submitIsLocked=function(){return this.submitLocked};c.prototype.webauthSetVisibility=function(a){var b=$("button.action-webauth",this.$layer);this.data.webauthVisible=!0;a?b.show():b.hide()};c.prototype.nicknameUpdateIfEmpty=function(a){if(this.$inputNickname&&""!==a){var b=this.$inputNickname.val();b&&0<b.length||this.$inputNickname.val(a)}};c.prototype.nicknameUpdate=c.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};c.prototype.openReal=function(a){var b=this;ToolBrowser.loadSvgUseListFromSelector("#popupLogin use");this.data=a;if(this.$layer){this.submitUnlock();this.errorRemoveAll();var c=$("form[name=form-login]",this.$layer);this.webauthSetVisibility(a.webauthVisible);this.$layer.foundation("open");this.$inputNickname&&(this.$inputNickname.val(this.data.nickname),this.$inputNickname.on("blur",
function(){b.errorRemoveField()}));this.$inputPassword&&(this.$inputPassword.val(this.data.password),this.data.passwordVisible?""===this.data.password?(this.$inputPassword.attr("type","password"),this.passwordOnFocusChangeToText=!0):this.$inputPassword.attr("type","text"):this.$inputPassword.attr("type","password"),this.$inputPassword.on("blur",function(){b.errorRemoveField()}));this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(2)});c.unbind("submit").bind("submit",
function(a){a.stopPropagation();a.preventDefault();b.submitLocked||(b.syncView(),b.errorRemoveAll(),b.fire(1,b.data))});this.$inputPassword&&this.$inputPassword.unbind("focus").bind("focus",function(){b.passwordOnFocusChangeToText&&(b.passwordOnFocusChangeToText=!1,b.$inputPassword&&b.$inputPassword.attr("type","text"))});$(".action-toggle-passwd").unbind("click").bind("click",function(a){a.stopPropagation();a.preventDefault();b.$inputPassword&&("password"==b.$inputPassword.attr("type")?(b.$inputPassword.attr("type",
"text"),b.data.passwordVisible=!0):(b.$inputPassword.attr("type","password"),b.data.passwordVisible=!1))});$("button.action-webauth",this.$layer).unbind("click").bind("click",function(a){a.stopPropagation();a.preventDefault();b.submitLocked||(b.syncView(),b.fire(5,b.data))});$(".js-action-signup",this.$layer).unbind("click").bind("click",function(a){a.stopPropagation();a.preventDefault();b.syncView();b.fire(7,b.data)});this.data.canBeClosed?($(".close-button",this.$layer).show(),$(".js-password-lost",
this.$layer).show()):($(".close-button",this.$layer).hide(),$(".js-password-lost",this.$layer).hide());this.$inputNickname&&this.$inputNickname.focus()}};return c}(f.Common);f.LoginForm=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var f=function(e,c){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])};return f(e,c)};return function(e,c){function a(){this.constructor=e}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");f(e,c);e.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)}}(),
Layer;
(function(f){var e=function(c){function a(){var d=c.call(this)||this;d.$layer=$("#popupMessageSend");d.data={performerId:0,performerNickname:"",performerProfileImg:"",subject:"",content:"",sessionMessagingId:0};return d}__extends(a,c);a.prototype.close=function(){c.prototype.close.call(this);this.$layer.foundation("close")};a.prototype.onActionSend=function(){this.data.subject="hello";this.data.content=$("textarea.mp-content",this.$layer).val().trim();0<$("#sessionMessagingId",this.$layer).length?this.data.sessionMessagingId=
parseInt($("#sessionMessagingId",this.$layer).val(),10):this.data.sessionMessagingId=0;this.fire(f.EVENT_SUBMIT,this.data)};a.prototype.open=function(d){var b=this;this.openWhenReady(function(){b.openReal(d)})};a.prototype.openReal=function(d){this.data=d;var b=this;if(EmojiTool.isSupported()){ToolBrowser.loadSvgUseListFromSelector("#popupMessageSend use");var a=new EmojiTool.Manager;var c={emojiCategoryList:{},mainContainerSelector:"#unicodeEmojiPopupMessageSendArea",textareaSelector:".mp-content",
emojiCategoryLabelList:EmojiTool.getCategoryLabelList(),triggerButtonConfig:{enabled:!0,selector:".action-open-emoji-popup-message-area",autoPosition:UnicodeEmojiV2.Library.AUTO_POSITION_TOP,autoPositionMargin:5}};"undefined"!==typeof window.smileyConfig&&(c.emojiCategoryList=window.smileyConfig);a.init(c);$(".action-open-emoji-popup-message-area",this.$layer).show()}else $(".action-open-emoji-popup-message-area",this.$layer).hide();var e;$(".messaging-send-error",b.$layer).hide();"Dropzone"in window&&
(e=new DropzoneMessaging.Loader("popupMessageSend"));b.loaderHide();$("h2 span",b.$layer).html(StringTool.escapeHtml(d.performerNickname));$("input.mp-subject",b.$layer).val(d.subject);$("textarea.mp-content",b.$layer).val(d.content);b.$layer.foundation("open");b.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){e&&(e.destroy(),e=void 0);a&&(a.destroy(),a=void 0);b.fire(f.EVENT_CLOSE)});$(".js-action-submit",b.$layer).unbind("click").bind("click",function(a){if(ToolUi.isEventToFast(b.dateOpen))a.preventDefault(),
a.stopPropagation();else b.onActionSend()})};a.prototype.errorDisplay=function(a){$(".messaging-send-error",this.$layer).show();$(".messaging-send-error",this.$layer).html(Translation.tr("titleGenericErrorNumber",{"#NUMBER#":a.code.toString()})+": "+a.msg)};a.prototype.loaderShow=function(){$(".messaging-send-error",this.$layer).hide();$(".js-loader",this.$layer).show();$(".js-action-button",this.$layer).hide()};a.prototype.loaderHide=function(){$(".js-loader",this.$layer).hide();$(".js-action-button",
this.$layer).show()};return a}(f.Common);f.MessageSend=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(d,a){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return e(d,a)};return function(d,a){function b(){this.constructor=d}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");e(d,a);d.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}(),
Layer;
(function(e){var d=function(a){function b(){var c=a.call(this)||this;c.$layer=$("#popupMessageSendNoCredit");c.data={performerNickname:""};return c}__extends(b,a);b.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};b.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};b.prototype.openReal=function(a){this.data=a;$("h2 span",this.$layer).html(StringTool.escapeHtml(this.data.performerNickname));this.$layer.foundation("open")};return b}(e.Common);
e.MessageSendNoCredit=d})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var b=function(e,a){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])};return b(e,a)};return function(e,a){function c(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");b(e,a);e.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),
Layer;
(function(b){var e=function(a){function c(){var d=a.call(this)||this;d.$layer=$("#popupMessagingDeleteAllConversationConfirmation");return d}__extends(c,a);c.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};c.prototype.open=function(){var a=this;this.openWhenReady(function(){a.openReal()})};c.prototype.openReal=function(){var a=this;$(".deleteAllConversationButton",this.$layer).off().on("click",function(){a.fire(b.EVENT_CONFIRM_YES);a.close()});$(".close-button",this.$layer).off().on("click",
function(){a.close()});this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){a.fire(b.EVENT_CLOSE)})};return c}(b.Common);b.MessagingDeleteAllConversationConfirmation=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(e,a){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])};return c(e,a)};return function(e,a){function d(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(e,a);e.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),
Layer;
(function(c){var e=function(a){function d(){var b=a.call(this)||this;b.$layer=$("#popupMessagingDeleteConversationConfirmation");b.data={nickname:""};return b}__extends(d,a);d.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};d.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};d.prototype.openReal=function(a){this.data=a;var b=this;$(".popupMessagingDeleteConversationConfirmation .image").empty();"undefined"!==typeof this.data.nickname&&$(".popupMessagingDeleteConversationConfirmation .deleteConversationText1 span").html(this.data.nickname);
$(".deleteConversationButton",this.$layer).off().on("click",function(){b.fire(c.EVENT_CONFIRM_YES);b.close()});$(".close-button",this.$layer).off().on("click",function(){b.close()});this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(c.EVENT_CLOSE)})};return d}(c.Common);c.MessagingDeleteConversationConfirmation=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var b=function(e,a){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])};return b(e,a)};return function(e,a){function c(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");b(e,a);e.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),
Layer;
(function(b){var e=function(a){function c(){var d=a.call(this)||this;d.$layer=$("#popupMessagingDeleteMessageConfirmation");return d}__extends(c,a);c.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};c.prototype.open=function(){var a=this;this.openWhenReady(function(){a.openReal()})};c.prototype.openReal=function(){var a=this;$(".deleteMessageButton",this.$layer).off().on("click",function(){a.fire(b.EVENT_CONFIRM_YES);a.close()});$(".close-button",this.$layer).off().on("click",function(){a.close()});
this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){a.fire(b.EVENT_CLOSE)})};return c}(b.Common);b.MessagingDeleteMessageConfirmation=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(d,a){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])};return e(d,a)};return function(d,a){function c(){this.constructor=d}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");e(d,a);d.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),
Layer;
(function(e){var d=function(a){function c(){var b=a.call(this)||this;b.$layer=$("#popupMessagingNotification");b.data={performerNickname:"",performerProfileImg:""};return b}__extends(c,a);c.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};c.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};c.prototype.openReal=function(a){this.data=a;var b=this;$("h2 span",this.$layer).html(StringTool.escapeHtml(this.data.performerNickname));$("#popupMessagingNotification img").remove();
$('<img src="'+this.data.performerProfileImg+'" />').insertAfter("#popupMessagingNotification .title");$(".accept-notifications").off().on("click",function(){b.close()});$(".close-notifications").off().on("click",function(){b.close()});this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(e.EVENT_CLOSE)})};return c}(e.Common);e.MessagingNotification=d})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(e,a){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])};return c(e,a)};return function(e,a){function d(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(e,a);e.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),
Layer;
(function(c){var e=function(a){function d(){var b=a.call(this)||this;b.$layer=$("#popupMessagingUnlockMessageConfirmation");b.data={messageId:0,performerNickname:"",mediaStatMessageHtml:"",priceAmountWithCurrency:"",clientCreditAmountWithCurrency:"",creditNoMoreAvailable:!1};return b}__extends(d,a);d.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};d.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};d.prototype.openReal=function(a){var b=
this;this.data=a;$(".js-performer-nickname",this.$layer).html(this.data.performerNickname);$(".js-client-amount-with-currency",this.$layer).html(this.data.clientCreditAmountWithCurrency);$(".mediaContentStat span",this.$layer).html(this.data.mediaStatMessageHtml);$(".creditCostAmountWithCurrency",this.$layer).html(Translation.tr("labelCreditCost",{"#PRICE#":"<span>"+this.data.priceAmountWithCurrency+"</span>"},{escape:!1}));$(".actionPurchase",this.$layer).off().on("click",function(){b.close();b.fire(c.EVENT_CONFIRM_YES,
b.data)});$(".close-button",this.$layer).off().on("click",function(){b.close()});this.data.creditNoMoreAvailable?($(".creditAvailable",this.$layer).hide(),$(".creditNoMoreAvailable",this.$layer).show()):($(".creditAvailable",this.$layer).show(),$(".creditNoMoreAvailable",this.$layer).hide());this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(c.EVENT_CLOSE)})};return d}(c.Common);c.MessagingPurchaseMessageConfirmation=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(e,a){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])};return c(e,a)};return function(e,a){function d(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(e,a);e.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),
Layer;
(function(c){var e=function(a){function d(){var b=a.call(this)||this;b.$layer=$("#popupMessagingSendImageConfirmation");b.data={image:"",image2:""};return b}__extends(d,a);d.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};d.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};d.prototype.openReal=function(a){this.data=a;var b=this;$(".popupMessagingSendImageConfirmation .image").empty();"undefined"!==typeof this.data.image2&&""!==
this.data.image2?$(".popupMessagingSendImageConfirmation .image").html('<div class="half">'+this.data.image+'</div><div class="half">'+this.data.image2+'</div><div class="clear"></div>'):$(".popupMessagingSendImageConfirmation .image").html(this.data.image);$(".send",this.$layer).off().on("click",function(){b.fire(c.EVENT_CONFIRM_YES);b.close()});$(".close-button",this.$layer).off().on("click",;this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",
function(){b.fire(c.EVENT_CLOSE)})};return d}(c.Common);c.MessagingSendImageConfirmation=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(f,a){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])};return c(f,a)};return function(f,a){function e(){this.constructor=f}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(f,a);f.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),
Layer;
(function(c){var f=function(a){function e(){var d=a.call(this)||this;d.$layer=$("#popupNotOnline");d.eventOnClose=c.EVENT_CLOSE;return d}__extends(e,a);e.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};e.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};e.prototype.openReal=function(a){this.eventOnClose=c.EVENT_CLOSE;$(".js-action-performer-profile",this.$layer).unbind().bind("click",function(a){a.stopPropagation();a.preventDefault();
ToolUi.isEventToFast(b.dateOpen)||(b.eventOnClose=c.EVENT_CLOSE_AND_GOTO_PERFORMER_PROFILE,b.close())});$(".js-layer-action-home",this.$layer).unbind("click").bind("click",function(a){a.stopPropagation();a.preventDefault();ToolUi.isEventToFast(b.dateOpen)||(b.eventOnClose=c.EVENT_CLOSE_AND_GOTO_ONLINE_LIST,b.close())});this.$layer.foundation("open");var b=this;this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(b.eventOnClose)})};return e}(c.Common);c.InfoNotOnline=f})(Layer||
(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(d,b){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(b[f]=a[f])};return e(d,b)};return function(d,b){function c(){this.constructor=d}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");e(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}(),
Layer;
(function(e){var d=function(b){function c(){var a=b.call(this)||this;a.data={infoToRequest:0,firstname:"",lastname:"",address:"",postalCode:"",city:"",countryIso2char:"",billingInfo:""};a.hasBeenSubmit=!1;a.$layer=$("#popupCreditInfoPerso");a.$inputFirstname=$("input[name=personal\\[firstname\\]]",a.$layer);a.$inputLastname=$("input[name=personal\\[lastname\\]]",a.$layer);a.$inputAddrLine1=$("input[name=personal\\[addr1\\]]",a.$layer);a.$inputAddrLine2=$("input[name=personal\\[addr2\\]]",a.$layer);a.$inputPostalCode=
$("input[name=personal\\[postalCode\\]]",a.$layer);a.$inputCity=$("input[name=personal\\[city\\]]",a.$layer);a.$inputCountryIso2=$("select[name=personal\\[countryIso2char\\]]",a.$layer);return a}__extends(c,b);c.prototype.destroy=function(){b.prototype.destroy.call(this);this.$layer=void 0};c.prototype.close=function(){b.prototype.close.call(this);this.$layer&&this.$layer.foundation("close")};c.prototype.syncView=function(){if(this.$layer){this.data.firstname=this.$inputFirstname.val();this.data.lastname=
this.$inputLastname.val();this.data.address=this.$inputAddrLine1.val();var a=this.$inputAddrLine2.val();0<a.length&&(this.data.address+="\n"+a);this.data.postalCode=this.$inputPostalCode.val();this.data.city=this.$inputCity.val();this.data.countryIso2char=this.$inputCountryIso2.val()}};c.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};c.prototype.openReal=function(a){var b=this;if(this.$layer){this.data=a;var c=this.$layer.find(".js-info-name");0<(a.infoToRequest&
1)?(c.show(),this.$inputFirstname.val(a.firstname),this.$inputLastname.val(a.lastname)):c.hide();c=this.$layer.find(".js-info-address");0<(a.infoToRequest&2)?(c.show(),c=a.address.split("\n"),2>c.length&&c.push(""),this.$inputAddrLine1.val(c[0]),this.$inputAddrLine2.val(c[1]),this.$inputPostalCode.val(a.postalCode),this.$inputCity.val(a.city),this.$inputCountryIso2.val(a.countryIso2char)):c.hide();this.hasBeenSubmit=!1;this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",
function(){b.fire(2);b.hasBeenSubmit||b.fire(3)});$("button[type=submit]").unbind("click").bind("click",function(a){a.stopPropagation();a.preventDefault();b.syncView();b.hasBeenSubmit=!0;b.close();b.fire(1,b.data)})}};return c}(e.Common);e.PersonalInfo=d})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var g=function(f,e){g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])};return g(f,e)};return function(f,e){function c(){this.constructor=f}if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");g(f,e);f.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)}}(),
Layer;
(function(g){var f=function(e){function c(){var a=e.call(this)||this;a.$layer=$("#popupSignup");a.data={nickname:"",password:"",email:"",messageIdToUse:11,cguAccepted:!1,webauthVisible:!1,webauthDone:!1,layoutId:4,canBeClosed:!0};if(!a.$layer.length&&"onerror"in window&&window.onerror)window.onerror("RegisterLayer: DOM ID not found");a.dataLastValidated=a.data;a.blurTimeout=0;a.keyupTimeout=0;a.$inputNickname=$("input[name=nickname]",a.$layer);a.$inputEmail=$("input[name=email]",a.$layer);a.$inputPassword=$("input[name=password]",
a.$layer);a.submitLocked=!1;a.passwordOnKeyDownChangeToText=!1;a.isClosedByMethod=!1;return a}__extends(c,e);c.prototype.destroy=function(){e.prototype.destroy.call(this);this.$layer=this.$inputPassword=this.$inputEmail=this.$inputNickname=void 0;this.blurTimeout&&(clearTimeout(this.blurTimeout),this.blurTimeout=0);this.keyupTimeout&&(clearTimeout(this.keyupTimeout),this.keyupTimeout=0)};c.prototype.layerId=c.prototype.suggestedNicknameClear=c.prototype.errorRemoveAll=function(){$("div.error",this.$layer).remove();this.suggestedNicknameClear();this.errorSystemHide()};c.prototype.errorRemoveAllButPassword=function(){$("div.error.email",this.$layer).remove();$("div.error.nickname",this.$layer).remove();this.suggestedNicknameClear();this.errorSystemHide()};c.prototype.errorSystemDisplay=function(a,b){$(".global-system-error .fi-alert",this.$layer).html(b);$(".global-system-error",this.$layer).removeClass("hide")};
c.prototype.errorSystemHide=function(){$(".global-system-error",this.$layer).addClass("hide")};c.prototype.passwordCheckOnTyping=function(a,b){void 0===b&&(b=!0);var c="";this.$inputNickname&&(c=this.$inputNickname.val());c=AppUserRegister.FormError.passwordCheck(a,c);b?this.errorRemoveAll():$("div.error.password",this.$layer).remove();c?this.errorFieldDisplay(c,b):this.passwordStateOk()};c.prototype.passwordCheckIfFocus=function(){if(this.$inputPassword){var a=this.$inputPassword.val();this.$inputPassword.is(":focus")?
this.passwordCheckOnTyping(a):""==a&&this.errorRemoveAll()}};c.prototype.errorFieldDisplay=function(a,b){void 0===b&&(b=!0);"successField"in a&&("nickname"in a.successField&&(a.successField.nickname?this.nicknameStateOk():this.nicknameStateNotOk()),"password"in a.successField&&(a.successField.password?this.passwordStateOk():this.passwordStateNotOk()),"email"in a.successField&&(a.successField.email?this.emailStateOk():this.emailStateNotOk()));if(!("errorfield"in a))this.errorRemoveAllButPassword(),
this.passwordCheckIfFocus();else if(!a.errorfield)this.errorRemoveAllButPassword(),this.passwordCheckIfFocus();else if(a.errorfield)for(var c in a.errorfield)if(a.errorfield.hasOwnProperty(c)&&c){"password"===c?b&&this.errorRemoveAll():("nickname"===c?this.nicknameStateNotOk():"email"===c&&this.emailStateNotOk(),this.errorRemoveAllButPassword());var d=a.errorfield[c];""!==d&&(d=$('<div class="error '.concat(c,'" data-message="').concat(d,'" />')),c=$("#form-group-".concat(c),this.$layer).find(".input-area"),
d.insertAfter(c));break}};c.prototype.suggestedNicknameSet=function(a){var b=this;this.suggestedNicknameClear();if(!this.data.webauthDone){var c=$("#form-group-nickname"),d=$('<p class="nickname-suggestion-list" />'),h=a.data.map(;d.append("<div>"+h.join("")+"</div>");d.prepend(a.message+" ");d.insertAfter($(".error",c));$(".jsSuggestNick",this.$layer).unbind("click").bind("click",function(a){a.preventDefault();a.target&&(a=
$(a.target).text())&&""!==a&&(b.$inputNickname&&(b.dataLastValidated.nickname=a,b.$inputNickname.val(a),b.nicknameStateOk(),b.$inputPassword&&b.$inputPassword.focus()),b.errorRemoveAllButPassword())})}};c.prototype.syncView=function(){var a=$("input[name=confirm]",this.$layer);this.$inputNickname&&this.$inputEmail&&this.$inputPassword&&(this.data.nickname=this.$inputNickname.val(),this.data.password=this.$inputPassword.val(),this.data.email=this.$inputEmail.val(),this.data.cguAccepted=a.prop("checked"))};
c.prototype.submitLock=function(){$("form[name=form-register]",this.$layer).attr("disabled","disabled");$(".register-row-submit",this.$layer).hide();$(".js-loader",this.$layer).show();this.errorSystemHide();this.submitLocked=!0};c.prototype.submitUnlock=function(){$("form[name=form-register]",this.$layer).removeAttr("disabled");$(".js-loader",this.$layer).hide();$(".register-row-submit",this.$layer).show();this.submitLocked=!1};c.prototype.webauthSetStatus=function(a){(this.data.webauthDone=a)?($("#row-password-webauth").hide(),
$("#row-webauth-enabled").show(),this.$inputPassword&&this.$inputPassword.removeAttr("required"),this.$inputNickname&&this.$inputNickname.attr("readonly","readonly")):($("#row-password-webauth").show(),$("#row-webauth-enabled").hide(),this.$inputPassword&&this.$inputPassword.attr("required","required"),this.$inputNickname&&this.$inputNickname.removeAttr("readonly"))};c.prototype.webauthSetVisibility=function(a){var b=$("button.action-webauth",this.$layer);(this.data.webauthVisible=a)?b.show():b.hide()};
c.prototype.layoutClearClass=function(){this.$layer&&(this.$layer.removeClass("reveal-layout-".concat(3)),this.$layer.removeClass("reveal-layout-".concat(2)),this.$layer.removeClass("reveal-layout-".concat(5)),this.$layer.removeClass("reveal-layout-".concat(1)),this.$layer.removeClass("reveal-layout-".concat(4)))};c.prototype.layoutSetup=function(){this.layoutClearClass();this.$layer&&this.$layer.addClass("reveal-layout-".concat(this.data.layoutId));if(!(1024>=ToolBrowser.viewPortSize().width))switch(this.data.layoutId){case 3:$(".popup-splash--layout-image-only",
this.$layer).hide();$(".popup-splash--layout-benefits",this.$layer).show();break;case 2:$(".popup-splash--layout-image-only",this.$layer).show();$(".popup-splash--layout-benefits",this.$layer).hide();break;case 5:$(".popup-splash--layout-image-only",this.$layer).hide();$(".popup-splash--layout-benefits",this.$layer).hide();break;case 1:$(".popup-splash--layout-image-only",this.$layer).show();$(".popup-splash--layout-benefits",this.$layer).hide();break;case 4:$(".popup-splash--layout-image-only",this.$layer).hide(),
$(".popup-splash--layout-benefits",this.$layer).hide()}};c.prototype.layoutReset=function(){this.layoutClearClass();this.$layer&&this.$layer.addClass("reveal-layout-".concat(this.data.layoutId));$(".popup-splash--layout-benefits",this.$layer).hide();$(".popup-splash--layout-image-only",this.$layer).hide()};c.prototype.handleLayerHeight=function(){this.$layer&&this.$layer[0].offsetHeight>ToolBrowser.viewPortSize().height&&this.$layer.addClass("fixedTop")};c.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};
c.prototype.emailStateReset=function(){var a=$("#email-check");this.stateReset(a)};c.prototype.emailStateOk=function(){var a=$("#email-check");this.stateOk(a)};c.prototype.emailStateNotOk=function(){var a=$("#email-check");this.stateNotOk(a)};c.prototype.emailStateLoading=function(a){var b=$("#email-check");this.stateLoading(b,a)};c.prototype.passwordStateReset=function(){var a=$("#password-check");this.stateReset(a)};c.prototype.passwordStateOk=function(){var a=$("#password-check");this.stateOk(a)};
c.prototype.passwordStateNotOk=function(){var a=$("#password-check");this.stateNotOk(a)};c.prototype.passwordStateLoading=function(a){var b=$("#password-check");this.stateLoading(b,a)};c.prototype.stateReset=function(a){a.removeClass("state-loading");a.removeClass("state-ok");a.removeClass("state-nok")};c.prototype.stateNotOk=function(a){a.removeClass("state-loading");a.removeClass("state-ok");a.addClass("state-nok")};c.prototype.stateOk=c.prototype.stateIsOk=c.prototype.stateLoading=function(a,b){b?a.removeClass("state-loading"):(a.addClass("state-loading"),a.removeClass("state-ok"),a.removeClass("state-nok"))};c.prototype.nicknameStateReset=function(){var a=$("#nickname-check");this.stateReset(a)};c.prototype.nicknameStateOk=function(){var a=$("#nickname-check");this.stateOk(a)};c.prototype.nicknameStateIsOk=
c.prototype.nicknameStateNotOk=c.prototype.nicknameStateLoading=function(a){var b=$("#nickname-check");this.stateLoading(b,a)};c.prototype.nicknameKeyUpCheck=function(){var a=this;this.keyupTimeout&&clearTimeout(this.keyupTimeout);this.keyupTimeout=setTimeout(function(){a.keyupTimeout=0;if(a.$inputNickname){a.syncView();var b={field:"nickname",value:a.data.nickname};a.dataLastValidated.nickname=b.value;a.fire(4,b,a.data)}},500)};c.prototype.openReal=
function(a){var b=this;ToolBrowser.loadSvgUseListFromSelector("#popupSignup use");this.dataLastValidated=this.data=a;this.errorRemoveAll();this.submitUnlock();this.errorSystemHide();this.webauthSetVisibility(a.webauthVisible);this.webauthSetStatus(a.webauthDone);this.$layer&&g.messageDisplay(this.$layer,a.messageIdToUse);var c=$("form[name=form-register]",this.$layer),d=$("input[name=confirm]",this.$layer);if(this.$inputNickname&&this.$inputEmail&&this.$inputPassword&&this.$layer){this.$inputNickname.val(a.nickname);
this.$inputEmail.val(a.email);this.$inputPassword.val(a.password);this.passwordOnKeyDownChangeToText=!0;""==a.password&&this.passwordStateReset();""==a.nickname&&this.nicknameStateReset();""==a.email&&this.emailStateReset();this.$inputEmail.unbind("keyup").bind("keyup",;this.$inputNickname.unbind("keyup").bind("keyup",;this.$inputNickname.unbind("focus").bind("focus",function(){b.$inputNickname&&(""===b.$inputNickname.val()||b.nicknameStateIsOk()||b.nicknameKeyUpCheck())});this.$inputPassword.unbind("keydown").bind("keydown",function(){b.passwordOnKeyDownChangeToText&&b.$inputPassword&&(b.passwordOnKeyDownChangeToText=!1,b.$inputPassword.attr("type","text"))});this.$inputPassword.unbind("keyup").bind("keyup",;
this.$inputPassword.unbind("focus").bind("focus",function(){b.$inputPassword&&b.passwordCheckOnTyping(b.$inputPassword.val(),!1)});a.cguAccepted?d.attr("checked","checked"):d.removeAttr("checked");a=[this.$inputNickname,this.$inputEmail,this.$inputPassword];for(d=0;d<a.length;d++)a[d].unbind("blur").bind("blur",function(a){a=$(a.target);var c=a.prop("name"),d={field:c,value:a.val()};""!==d.value&&d.field in b.dataLastValidated&&b.dataLastValidated[c]!==d.value&&(b.blurTimeout&&clearTimeout(b.blurTimeout),
b.blurTimeout=setTimeout(function(){b.blurTimeout=0;b.syncView();b.dataLastValidated[c]=d.value;b.errorRemoveAllButPassword();b.fire(4,d,b.data)},75))});this.layoutSetup();this.$layer.foundation("open");this.handleLayerHeight();this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.syncView();b.isClosedByMethod||b.fire(3);b.fire(2,b.data)});c.unbind("submit").bind("submit",function(a){a.stopPropagation();a.preventDefault();b.submitLocked||(b.syncView(),b.fire(1,b.data))});$("button.action-webauth",
this.$layer).unbind("click").bind("click",function(a){a.stopPropagation();a.preventDefault();b.submitLocked||(b.syncView(),b.fire(5,b.data))});$(".js-action-login",this.$layer).unbind("click").bind("click",function(a){a.stopPropagation();a.preventDefault();b.syncView();b.fire(6,b.data)});$(".js-action-close",this.$layer).unbind("click").bind("click",function(a){b.close();b.fire(3);a.stopPropagation();a.preventDefault()});this.data.canBeClosed?($(".js-action-close",this.$layer).show(),$(".close-button",
this.$layer).show()):($(".js-action-close",this.$layer).hide(),$(".close-button",this.$layer).hide());this.$inputNickname.focus()}};c.prototype.resetLayerHeight=function(){this.$layer&&this.$layer.removeClass("fixedTop")};c.prototype.close=function(){e.prototype.close.call(this);this.$layer&&(this.isClosedByMethod=!0,this.layoutReset(),this.$layer.foundation("close"),this.$inputPassword&&this.$inputPassword.attr("type","password"))};return c}(g.Common);g.RegisterForm=f})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var d=function(f,c){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])};return d(f,c)};return function(f,c){function a(){this.constructor=f}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");d(f,c);f.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)}}(),
Layer;
(function(d){function f(a,b){$("p.js-content",a).hide();$("h1.js-content",a).hide();switch(b){case 1:$("p.js-content.js-type-duration-expired",a).show();break;case 10:$("p.js-content.js-type-performer-in-private-show",a).show();break;case 4:$("p.js-content.js-type-guest-add-favorite",a).show();break;case 2:$("p.js-content.js-type-guest-private-show",a).show();break;case 5:$("p.js-content.js-type-guest-active-sextoy",a).show();break;case 6:$("p.js-content.js-type-guest-send-tip",a).show();break;case 7:$("p.js-content.js-type-guest-send_gift",
a).show();break;case 9:$("p.js-content.js-type-guest-send-message",a).show();break;case 8:$("p.js-content.js-type-guest-ask_action",a).show();break;case 3:$("p.js-content.js-type-guest-generic-action",a).show();break;case 11:$(".js-content.js-type-no-reason",a).show()}}var c=function(a){function b(){var e=a.call(this)||this;e.$layer=$("#popupRegisterSuggestion");e.dateOpen=new Date;e.eventOnClose=d.EVENT_CLOSE;return e}__extends(b,a);b.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};
b.prototype.open=function(a){var e=this;this.openWhenReady(function(){e.openReal(a)})};b.prototype.openReal=function(a){this.$layer.foundation("open",{closeOnClick:a.cancelButton});var b=this;this.eventOnClose=a.cancelButton?d.EVENT_CLOSE:d.EVENT_CLOSE_AND_GOTO_ONLINE_LIST;a.cancelButton?($("div.js-suggestion-cancel",this.$layer).show(),$("button.close-button",this.$layer).show()):($("div.js-suggestion-cancel",this.$layer).hide(),$("button.close-button",this.$layer).hide());a.backToOnlineListButton?
$("div.js-suggestion-go-to-online",this.$layer).show():$("div.js-suggestion-go-to-online",this.$layer).hide();f(this.$layer,a.messageIdToUse);$(".js-layer-action-home",this.$layer).unbind("click").bind("click",function(a){ToolUi.isEventToFast(b.dateOpen)||(b.eventOnClose=d.EVENT_CLOSE_AND_GOTO_ONLINE_LIST,b.$layer.foundation("close"));a.preventDefault();a.stopPropagation()});this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(b.eventOnClose)})};return b}(d.Common);d.RegisterSuggestion=
c;d.messageDisplay=f})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(d,b){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,f){a.__proto__=f}||function(a,f){for(var c in f)Object.prototype.hasOwnProperty.call(f,c)&&(a[c]=f[c])};return e(d,b)};return function(d,b){function a(){this.constructor=d}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");e(d,b);d.prototype=null===b?Object.create(b):(a.prototype=b.prototype,new a)}}(),
Layer;
(function(e){var d=function(b){function a(){var a=b.call(this)||this;a.$layer=$("#popupReportSend");a.data={performerId:0,performerNickname:"",reasonId:0,content:""};return a}__extends(a,b);a.prototype.close=function(){b.prototype.close.call(this);this.$layer.foundation("close")};a.prototype.open=function(a){var c=this;this.openWhenReady(function(){c.openReal(a)})};a.prototype.openReal=function(b){var c=this;$(".report-performer-abuse",this.$layer).prop("selectedIndex",a.SELECT_ABUSE_OPTION_BLANK);$(".rp-content",
this.$layer).val(b.content);this.data=b;this.loaderHide();$(".js-cancel",this.$layer).unbind("click").bind("click",function(){c.close()});$(".js-action-submit",this.$layer).unbind("click").bind("click",function(a){ToolUi.isEventToFast(c.dateOpen)?(a.preventDefault(),a.stopPropagation()):(c.data.reasonId=$(".report-performer-abuse option:selected",c.$layer).val(),c.data.content=$(".rp-content",c.$layer).val().trim(),c.fire(e.EVENT_SUBMIT,c.data))});this.$layer.foundation("open")};a.prototype.errorDisplay=
function(a){$(".reporting-send-error-send-error",this.$layer).html(Translation.tr("titleGenericErrorNumber",{"#NUMBER#":a.code.toString()})+": "+a.msg);$(".reporting-send-error-send-error",this.$layer).show()};a.prototype.loaderShow=function(){$(".reporting-send-error",this.$layer).hide();$(".js-loader",this.$layer).show();$(".js-action-button",this.$layer).hide()};a.prototype.loaderHide=function(){$(".js-loader",this.$layer).hide();$(".js-action-button",this.$layer).show()};a.SELECT_ABUSE_OPTION_BLANK=
0;return a}(e.Common);e.ReportAbuse=d})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(f,b){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,a){d.__proto__=a}||function(d,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c])};return e(f,b)};return function(f,b){function d(){this.constructor=f}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");e(f,b);f.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}(),
Layer;
(function(e){var f=function(b){function d(){var a=b.call(this)||this;a.$layer=$("#popupShowRating");a.data={performerId:0,performerNickname:"",note:0,noteAverage:void 0,message:"",creditNoMoreAvailable:!1,layoutId:1};a.emojiManager=void 0;return a}__extends(d,b);d.isOpen=d.prototype.close=function(){b.prototype.close.call(this);this.emojiManager&&(this.emojiManager.destroy(),this.emojiManager=void 0);this.$layer.foundation("close")};d.prototype.open=function(a){var c=
this;this.openWhenReady(function(){c.openReal(a)})};d.prototype.onSubmit=function(){this.data.message=$("textarea[name=content]",this.$layer).val();var a=document.querySelector("#form-rating");if(null===a||0!=a.reportValidity())(a=this.getNote())?(this.data.note=parseInt(a,10),this.fire(e.EVENT_SUBMIT,this.data)):($(".ratingNote .form-error",this.$layer).show(),this.data.note=-1)};d.prototype.getNote=d.prototype.removeNoteClass=
function(a){for(var c=1;5>=c;c++)a.removeClass("note-"+c);$("input[type=radio]",a).removeAttr("checked")};d.prototype.openReal=function(a){this.data=a;var c=this;a=$("div.ratingNote",this.$layer);var d=$("textarea[name=content]",this.$layer),b=$("div.creditNoMoreAvailable",this.$layer);this.data.creditNoMoreAvailable?(ToolApp.creditPageTargetShouldBeBlank()&&$("a.credits",b).attr("target","_blank"),b.show()):b.hide();EmojiTool.isSupported()?(ToolBrowser.loadSvgUseListFromSelector("#popupShowRating use"),
this.emojiManager=new EmojiTool.Manager,b={emojiCategoryList:{},mainContainerSelector:"#unicodeEmojiPopupShowRatingArea",textareaSelector:".mp-content-rating",emojiCategoryLabelList:EmojiTool.getCategoryLabelList(),triggerButtonConfig:{enabled:!0,selector:".action-open-emoji-popup-rating-area",autoPosition:UnicodeEmojiV2.Library.AUTO_POSITION_TOP,autoPositionMargin:5}},"undefined"!==typeof window.smileyConfig&&(b.emojiCategoryList=window.smileyConfig),this.emojiManager.init(b),$(".action-open-emoji-popup-rating-area",
this.$layer).show()):$(".action-open-emoji-popup-rating-area",this.$layer).hide();$("textarea[name=content]",this.$layer).val(this.data.message);this.removeNoteClass(a);$(".form-error",this.$layer).hide();a.unbind("click").bind("click",function(a){if(a.target){$(".form-error",c.$layer).hide();a=$(a.target);var b=a[0].tagName;b=b.toUpperCase();"LABEL"===b&&(a=a.attr("data-value"),b=$(this),c.removeNoteClass(b),b.addClass("note-"+a))}});d.unbind("click").bind("click",function(a){a.target&&$(".messageArea .form-error",
c.$layer).hide()});$(".js-rating-submit",this.$layer).unbind("click").bind("click",function(a){if(ToolUi.isEventToFast(c.dateOpen))a.preventDefault(),a.stopPropagation();else c.onSubmit()});$(".js-performer-rating",this.$layer).parent().hide();this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){2===c.data.layoutId?c.fire(e.EVENT_CLOSE):c.fire(e.EVENT_CLOSE_AND_GOTO_ONLINE_LIST);c.emojiManager&&(c.emojiManager.destroy(),c.emojiManager=void 0)});switch(this.data.layoutId){case 3:$(".js-rate-show-label",
this.$layer).hide();$(".js-rate-paid-message-label",this.$layer).show();$(".js-back-to-online-list",this.$layer).hide();$(".js-cancel-container",this.$layer).hide();$(".rating-private-message",this.$layer).show();$("textarea",this.$layer).removeAttr("required");break;case 2:$(".js-back-to-online-list",this.$layer).hide();$(".js-cancel-container",this.$layer).show();$(".js-rate-show-label",this.$layer).show();$(".js-rate-paid-message-label",this.$layer).hide();$(".js-cancel-container",this.$layer).show();
$(".rating-private-message",this.$layer).hide();break;default:case 1:$(".js-back-to-online-list",this.$layer).show(),$(".js-cancel-container",this.$layer).hide(),$(".js-rate-show-label",this.$layer).show(),$(".js-rate-paid-message-label",this.$layer).hide()}this.$layer.foundation("open")};return d}(e.Common);e.ShowRating=f})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(e,a){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])};return c(e,a)};return function(e,a){function b(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(e,a);e.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}(),
Layer;
(function(c){var e=function(a){function b(){var d=a.call(this)||this;d.$layer=$("#popupTipSent");d.data=void 0;return d}__extends(b,a);b.prototype.onLayerOpen=function(){var a=$(".title",this.$layer),b=$(".js-client-amount-with-currency",this.$layer),c=$(".js-performer-nickname",this.$layer);a.html(a.text().replace(/\./,""));this.data&&(b.text(this.data.amountWithCurrency),c.text(this.data.performerNickname))};b.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};b.prototype.openReal=
function(a){this.data=a;this.$layer.foundation("open");var b=this;this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(c.EVENT_CLOSE)});this.onLayerOpen()};b.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close");this.fire(c.EVENT_CLOSE)};return b}(c.Common);c.TipSent=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var d=function(e,c){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])};return d(e,c)};return function(e,c){function a(){this.constructor=e}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");d(e,c);e.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)}}(),
Layer;
(function(d){var e=function(c){function a(){var b=c.call(this)||this;b.$layer=$("#popupTipSend");b.data={amount:5,performerId:0,performerNickname:"",userInterface:1};b.emojiManager=void 0;return b}__extends(a,c);a.prototype.open=function(b){var a=this;this.openWhenReady(function(){a.openReal(b)})};a.prototype.close=function(){c.prototype.close.call(this);this.emojiManager&&(this.emojiManager.destroy(),this.emojiManager=void 0);if(this.data.withMessage){this.data.messageRaw&&this.data.messageRaw.length&&(this.data.messageRaw=
void 0);this.data.withMessage=void 0;var b=$(".messageArea",this.$layer);$(".bonus-message",b).val("");b.is(":visible")&&b.hide()}this.$layer.foundation("close");this.fire(d.EVENT_CLOSE)};a.prototype.loaderShow=function(){$(".js-loader",this.$layer).show();$(".js-action-button",this.$layer).hide()};a.prototype.loaderHide=a.prototype.onActionSend=function(){var b=$("input.js-amount",this.$layer).val();this.data.amount=
parseFloat(b);this.data.withMessage&&(this.data.messageRaw=$(".bonus-message",this.$layer).val());this.fire(d.EVENT_TIP,this.data)};a.prototype.openReal=function(b){this.data=b;this.loaderHide();this.$layer.foundation("open");switch(b.userInterface){case 2:$(".rating",this.$layer).show();$(".classic",this.$layer).hide();b.amountWithCurrency?$(".js-credit-amount",this.$layer).text(b.amountWithCurrency):$(".js-credit-amount",this.$layer).text("-");break;default:$(".rating",this.$layer).hide(),$(".classic",
this.$layer).show()}if(this.data.withMessage){var a=$(".messageArea",this.$layer);a.length&&($(".bonus-message",a).val(""),a.show(),EmojiTool.isSupported()?(a="#"+this.$layer.attr("id")+" use",ToolBrowser.loadSvgUseListFromSelector(a),this.emojiManager=new EmojiTool.Manager,a={emojiCategoryList:{},mainContainerSelector:"#unicodeEmojiPopupTipSendArea",textareaSelector:".bonus-message",emojiCategoryLabelList:EmojiTool.getCategoryLabelList(),triggerButtonConfig:{enabled:!0,selector:".action-open-emoji-popup-tip-send-area",
autoPosition:UnicodeEmojiV2.Library.AUTO_POSITION_TOP,autoPositionMargin:5}},"undefined"!==typeof window.smileyConfig&&(a.emojiCategoryList=window.smileyConfig),this.emojiManager.init(a),$(".action-open-emoji-popup-tip-send-area",this.$layer).show()):$(".action-open-emoji-popup-tip-send-area",this.$layer).hide())}var c=this;this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){c.fire(d.EVENT_CLOSE);c.emojiManager&&(c.emojiManager.destroy(),c.emojiManager=void 0);$(".js-action-submit",
c.$layer).unbind("click")});$("input.js-amount",this.$layer).val(b.amount.toString());$(".slider",this.$layer).foundation("_reflow");$(".js-action-submit",this.$layer).unbind("click").bind("click",function(a){if(ToolUi.isEventToFast(c.dateOpen))a.preventDefault(),a.stopPropagation();else c.onActionSend()})};return a}(d.Common);d.Tips=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var b=function(e,a){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return b(e,a)};return function(e,a){function d(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");b(e,a);e.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),
Layer;
(function(b){var e=function(a){function d(){var c=a.call(this)||this;c.$layer=$("#popupMuteUserWithoutCredit");c.data={performerNickname:""};return c}__extends(d,a);d.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close");this.fire(b.EVENT_CLOSE)};d.prototype.open=function(a){var b=this;this.openWhenReady(function(){b.openReal(a)})};d.prototype.openReal=function(a){var c=this;this.data=a;$(".js-performer-nickname",this.$layer).html(StringTool.escapeHtml(this.data.performerNickname));this.$layer.foundation("open");
this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){c.fire(b.EVENT_CLOSE)})};return d}(b.Common);b.MuteUserWithoutCredit=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var b=function(e,a){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return b(e,a)};return function(e,a){function d(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");b(e,a);e.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),
Layer;
(function(b){b.DOM_ID_CREDIT_EXPLAIN="popupVipCreditExplain";var e=function(a){function d(){var c=a.call(this)||this;c.$layer=$("#"+b.DOM_ID_CREDIT_EXPLAIN);if(!c.$layer.length)throw Error("DomId not found: "+b.DOM_ID_CREDIT_EXPLAIN);return c}__extends(d,a);d.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};d.prototype.open=d.prototype.openReal=function(){var a=this;this.$layer.foundation("open");this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",
function(){a.fire(b.EVENT_CLOSE)})};return d}(b.Common);b.VipCreditExplain=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(a,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,d){b.__proto__=d}||function(b,d){for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&(b[a]=d[a])};return c(a,b)};return function(a,b){function e(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");c(a,b);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}}(),
Layer;
(function(c){var a=function(b){function a(){var a=b.call(this)||this;a.$layer=$("#popupVipDisabled");return a}__extends(a,b);a.prototype.close=function(){this.$layer.foundation("close")};a.prototype.open=function(){this.$layer.foundation("open");var a=this;this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){a.fire(c.EVENT_CLOSE)});this.$layer.find(".js-action-ok").unbind("click").bind("click",function(b){a.close()})};return a}(c.Common);c.VipDisabled=a})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(d,a){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])};return e(d,a)};return function(d,a){function c(){this.constructor=d}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");e(d,a);d.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}}(),
Layer;
(function(e){e.EVENT_SUBSCRIBE="subscribe";var d=function(a){function c(){var b=a.call(this)||this;b.$layer=$("#popupVipSubscription");b.dateOpen=new Date;b.data={performerId:0,performerNickname:"",amountWithCurrency:"",videoTotalSecond:0,videoTotalMinute:0,photoNb:0,videoNb:0,displayActionGoToBioPage:!1,bioPageLink:"",vipFreeEnabled:!0};return b}__extends(c,a);c.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};c.prototype.open=function(b){var a=this;this.openWhenReady(function(){a.openReal(b)})};
c.prototype.openReal=function(a){this.data=a;this.dateOpen=new Date;this.$layer.foundation("open");var b=Translation.tr("infoUserVipSubscriptionInfoPerks");b=b.replace("#NICK#","<span class='js-performer-nickname'>"+this.data.performerNickname+"</span>");b=b.replace("#PRICE#","<span class='js-performer-vip-price credit-call-to-action'>"+this.data.amountWithCurrency+"</span>");this.data.photoNb&&(b+="<br>"+Translation.tr("infoUserVipSubscriptionInfoPerks3",{"#NBPHOTO#":this.data.photoNb.toString()}));
if(this.data.videoNb){var c=void 0,d=void 0;120<this.data.videoTotalMinute?(d="infoUserVipSubscriptionInfoPerks2",c=Math.floor(this.data.videoTotalMinute/60)):(d="infoUserVipSubscriptionInfoPerks4",c=Math.floor(this.data.videoTotalSecond/60));b+="<br>"+Translation.tr(d,{"#NBVIDEO#":this.data.videoNb.toString(),"#DURATION#":c.toString()})}this.$layer.find(".info").html(b);this.data.performerNickname&&this.$layer.find(".js-performer-nickname").html(this.data.performerNickname);a.vipFreeEnabled?this.$layer.find(".js-free-vip-disabled").hide():
this.$layer.find(".js-free-vip-disabled").show();a=this.$layer.find(".js-button-bio");this.data.displayActionGoToBioPage&&this.data.bioPageLink?(a.show(),a.find("a").attr("href",this.data.bioPageLink)):a.hide();var g=this;this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){g.fire(e.EVENT_CLOSE)});this.$layer.find(".js-action-vip-subscribe").unbind("click").bind("click",function(a){ToolUi.isEventToFast(g.dateOpen)?(a.preventDefault(),a.stopPropagation()):g.fire(e.EVENT_SUBSCRIBE)})};
return c}(e.Common);e.VipSubscription=d})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(e,a){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])};return c(e,a)};return function(e,a){function d(){this.constructor=e}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");c(e,a);e.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),
Layer;
(function(c){c.EVENT_USE_FREE_VIDEO_VIP="freeVideoVip";var e=function(a){function d(){var b=a.call(this)||this;b.$layer=$("#popupVipVideoFree");b.data={nbFreeVideoVip:0,mediaId:0,performerId:0,performerNickname:"",displayActionGoToBioPage:!1,bioPageLink:""};return b}__extends(d,a);d.prototype.close=function(){a.prototype.close.call(this);this.$layer.foundation("close")};d.prototype.open=d.prototype.openReal=function(a){this.data=a;
this.dateOpen=new Date;this.$layer.foundation("open");this.$layer.find(".js-vip-free-available").html(this.data.nbFreeVideoVip.toString(10));this.data.performerNickname&&this.$layer.find(".js-performer-nickname").html(this.data.performerNickname);a=this.$layer.find(".js-button-bio");this.data.displayActionGoToBioPage&&this.data.bioPageLink?(a.show(),a.find("a").attr("href",this.data.bioPageLink)):a.hide();var b=this;this.$layer.unbind("closed.zf.reveal").bind("closed.zf.reveal",function(){b.fire(c.EVENT_CLOSE)});
this.$layer.find(".js-action-play").unbind("click").bind("click",function(a){ToolUi.isEventToFast(b.dateOpen)?(a.preventDefault(),a.stopPropagation()):(b.fire(c.EVENT_USE_FREE_VIDEO_VIP,b.data),b.close())})};return d}(c.Common);c.VipVideoFree=e})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var e=function(d,b){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])};return e(d,b)};return function(d,b){function c(){this.constructor=d}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");e(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}(),
Layer;
(function(e){var d=function(b){function c(){var a=b.call(this)||this;a.$layer=$("#popupVrNotSupported");a.$titleOnlineList=a.$layer.find(".titleOnlineList");a.$titleChat=a.$layer.find(".titleChat");a.$performerName=a.$layer.find(".js-performer-nickname");a.$siteName=a.$layer.find(".js-sitename");a.$vrHeadsetImage=a.$layer.find(".vrHeadsetImage");a.setTemplateOnlineList();return a}__extends(c,b);c.prototype.setSiteName=function(a){this.$siteName.text(a)};c.prototype.setPerformerName=c.prototype.setTemplateOnlineList=
function(){this.$titleOnlineList.removeClass("isHidden");this.$titleChat.addClass("isHidden")};c.prototype.setTemplateChat=c.prototype.close=c.prototype.open=function(){var a=this,b=this.$vrHeadsetImage.attr("data-src");b&&(this.$vrHeadsetImage.attr("src",b),this.$vrHeadsetImage.removeAttr("data-src"));this.openWhenReady(function(){a.openReal()})};
c.prototype.openReal=function(){this.$layer.foundation("open")};return c}(e.Common);e.VrNotSupported=d})(Layer||(Layer={}));
var __extends=this&&this.__extends||function(){var c=function(a,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,d){b.__proto__=d}||function(b,d){for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&(b[a]=d[a])};return c(a,b)};return function(a,b){function e(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");c(a,b);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}}(),
Widget;(function(c){c.WIDGET_BANNER="Banner";var a=function(b){function a(){var a=b.call(this)||this;a.dateOpen=new Date;return a}__extends(a,b);return a}(Core.Listener);c.Common=a})(Widget||(Widget={}));
var __extends=this&&this.__extends||function(){var d=function(c,b){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e])};return d(c,b)};return function(c,b){function f(){this.constructor=c}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(c,b);c.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)}}(),
Widget;
(function(d){var c,b=function(b){function a(){var a=b.call(this)||this,c=document.querySelector("#banner-avs");if(!c)throw Error("BannerAvs: root not found");a.domRoot=c;return a}__extends(a,b);a.getInstanceExisting=a.getInstance=a.prototype.open=function(){var b=this;this.domRoot.classList.remove("widget-banner-hide");var a=this.domRoot.querySelector(".widget-banner-close");a&&$(a).unbind("click").bind("click",function(){b.closeWithEventData(1)});(a=
this.domRoot.querySelector(".button.widget-banner-cta"))&&$(a).unbind("click").bind("click",function(){b.onCallToActionClick()})};a.prototype.onCallToActionClick=function(){this.fire(211)};a.prototype.closeWithEventData=function(a){this.domRoot.classList.add("widget-banner-hide");this.fire(212,{how:a})};a.prototype.close=return a}(d.Common);d.BannerAvs=b})(Widget||(Widget={}));
(function(){var a=document.getElementById("app-data");if(a){var b="";"textContent"in a?null!==a.textContent&&(b=a.textContent):(b=jQuery(a).text())||(b=jQuery(a).html());b&&("jQuery"in window?(window.Application=jQuery.parseJSON(b),jQuery(document).ready(function(){Core.bootstrap()})):(window.Application=JSON.parse(b),window.setTimeout(function(){Core.bootstrap()},200)))}})();
