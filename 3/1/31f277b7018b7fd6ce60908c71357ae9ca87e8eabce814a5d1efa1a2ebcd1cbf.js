/*! For license information please see auth.min.js.LICENSE.txt */
!function(){var t,n,e,r,o={19662:function(t,n,e){var r=e(60614),o=e(66330),i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not a function")}},39483:96077:51223:25787:19670:41318:42092:81194:9341:53671:50206:77475:65417:17072:84326:70648:99920:49920:76178:68880:79114:86135:47045:98052:13072:19781:4154:80317:7207:48324:98509:7871:83823:71528:6833:function(t,n,e){var r=e(88113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},35268:71036:88113:7392:80748:82109:47293:22104:49974:34374:46916:76530:75668:21470:1702:35005:71246:18554:58173:17854:92597:3501:function(t){t.exports={}},842:60490:64664:68361:42788:29909:97659:43157:60614:4411:54705:68554:70111:31913:52190:20408:99212:63061:51656:13383:97497:26244:56339:74758:95948:78523:21574:70030:36048:3070:31236:8006:25181:79518:47976:16324:81956:55296:27674:90288:92140:53887:12534:63702:2492:69478:80612:18572:22261:67066:52999:9441:38173:84488:96340:58003:6200:5465:72309:,36707,28710,36293,20261,51400,45656,19303,17466,47908,57593,34948,51694,41340,66330,69711,43307,3353,48053,94811,5112,92222,69826,66992,21249,85827,19601,41539,70821,94164,43401,88674,6027,60683,96294,74916,78783,33948,34155,52732:function(t){t.exports=function(){"use strict"var n="undefined"!=typeof window,e=n&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),r=n&&"IntersectionObserver"in window,o=n&&"classList"in document.createElement("p"),i=n&&window.devicePixelRatio>1,c={elements_selector:".lazy",container:e||n?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},a,u,s="src",f="srcset",l="sizes",p="poster",v="llOriginalAttrs",d="data",h="loading",g="loaded",y="applied",m="error",b="native",x,w=function(t){return x(t,"ll-status")},_,O,E,S=function(t){return w(t)===b},T=[h,g,y,m],j,C,I,k=function(t){return t.llTempImage},L,A,P,R,N,M,D=[s],F=[s,p],$=[s,f,l],G=[d],U=function(t){return!!t[v]},H=function(t){return t[v]},z,B,V,J,q,Y,W,X={IMG,IFRAME:function(t,n){B(t,D),Y(t,s,x(t,n.data_src))},VIDEO,OBJECT},K=["IMG","IFRAME","VIDEO","OBJECT"],Q,Z,tt,nt,et,rt,ot,it,ct,at,ut={IMG:at,IFRAME:function(t){V(t,D)},VIDEO,OBJECT},st=["IMG","IFRAME","VIDEO"],ft,lt,pt,vt,dt,ht;return ht.prototype={update,destroy,loadAll,restoreAll},ht.load,ht.resetStatus,n&(ht,window.lazyLoadOptions),ht}()},17061,18698,64687},i={}c.m=o,c.n,n=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},c.t,c.d,c.f={},c.e,c.u,c.miniCssF,c.g(),c.o,e={},r="redlights-static:",c.l,c.r,c.p=""(),function(){"use strict"222),c(69826),c(41539);var i=c(64687),a=c.n(i),u=(c(88674),c(74916),c(21249),c(85827),c(19601),c(52732)),s=c.n(u)function l(){return(l=o(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){Promise.all([c.e(6809),c.e(7020)]).then(c.t.bind(c,86809,23)).then((function(n){t(n.default)}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}c(66992),c(78783),c(33948);var p={config:null,get:function(t){if(!this.config){var n={};$(".content-meta").each((function(){var t=$(this).text();try{t=JSON.parse(t),n=Object.assign({},n,t)}catch(t){console.warn(t)}})),this.config=n}return t?this.config[t]:this.config}},v=function(){function t(){var n=this;e(this,"config",null),e(this,"socketChannels",{chat:null,getChat:function(){return new Promise(function(){var e=o(a().mark((function e(r,o){var i,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.chat){e.next=2;break}return e.abrupt("return",r(n.chat));case 2:return e.next=4,f();case 4:i=e.sent,(c=i(t.getConfig("CHAT_HOST"),{path:"/socket.io"})).on("connect",));case 7:case"end":return e.stop()}}),e)})));return}())}}),this.lazyLoadInstance=window.lazyLoadInstance=new(s())({callback_error}),/^\/chat/gi.test(location.pathname)&&localStorage.removeItem("chatUMC")}t.getConfig=function(t){return void 0===t&&(t=null),p.get(t)};var n=t.prototype;return n.getConfig,t.importSelect2=function(){return new Promise((function(n,e){var r=t.getConfig("STATIC_HOST")+"vendor/select2/css/select2.min.css";$("head link[rel='stylesheet']").last().after("<link rel='stylesheet' href='"+r+"' type='text/css'>"),$.getScript(t.getConfig("STATIC_HOST")+"vendor/select2/js/select2.min.js",(function(){n()}))}))},t.importHighMaps=function(){return new Promise((function(n,e){$.when($.getScript(t.getConfig("STATIC_HOST")+"vendor/proj4js/dist/proj4.js"),$.getScript(t.getConfig("STATIC_HOST")+"vendor/highmaps-9.1.0/code/highmaps.js"),$.Deferred())).done())}))},n.initChatNotificationsListener=function(){var n=o(a().mark((function n(){var e,r,o,i,c,u,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=9e4,r="chatUMC",o=(o=localStorage.getItem(r))?JSON.parse(o):{},i=t.getConfig("AUTH_USER_ID")){n.next=7;break}return n.abrupt("return",console.log("User not authenticated"));case 7:if(!o[i]){n.next=11;break}if(c=o[i],!(Date.now()-c.dateUpdated<=e)){n.next=11;break}return n.abrupt("return",document.dispatchEvent(new CustomEvent("chat-history-update",{detail:{unreadMsgCount:c.unreadMsgCount}})));case 11:return n.next=13,$.get(t.getConfig("ROUTES_AJAX_URL"),{userId:i,method:"get-profile-ids"});case 13:if((u=n.sent)&&(u=JSON.parse(u)),u.profiles){n.next=17;break}return n.abrupt("return",console.warn("This user does not have any profile."));case 17:return s=u.profiles.map()),n.next=20,this.socketChannels.getChat();case 20:n.sent.emit("unread-messages-request-detached",{profileIds:s},(function(t){var n;if(!t.participations)return console.warn("No participations for authenticated user!");var e=t.participations.reduce(),0);document.dispatchEvent(new CustomEvent("chat-history-update",{detail:{unreadMsgCount:e}})),localStorage.setItem(r,JSON.stringify(Object.assign({},o,((n={})[i]={unreadMsgCount:e,dateUpdated:Date.now()},n))))}));case 22:case"end":return n.stop()}}),n,this)})));return}(),t}(),d=function(n){var r,o;function i(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e(t=n.call.apply(n,[this].concat(o))||this),"eventHandlers",{onGeolocationClick:function(n){$(".geolocation .fa-map-marker").removeClass("fa-map-marker").addClass("fa-spinner fa-spin"),t.getLocation((function(n,e,r){e&&$.get(t.getConfig("MATCH_ME_SEARCH_CITY_URI"),{lat:n,long:e,d:5}).done((function(r){r[0]?($("input[name=q]").val(r[0].region4),$("input[name=latitude]").val(n),$("input[name=longitude]").val(e),$("input[name=postcode]").val(r[0].postcode),$("input[name=iso2]").val(r[0].iso2),$("input[name=city_id]").val(r[0].id),$(".gender").prop("checked")&&$("form").submit()):alert(t.getConfig("TXT_LOC_NOT_FOUND")),$(".geolocation .fa-spinner").removeClass("fa-spinner").removeClass("fa-spin").addClass("fa-map-marker")})),r&&alert(r)}))},onCityClick:function(t){var n=$(t.currentTarget);$("input[name=latitude]").val(n.attr("latitude")),$("input[name=longitude]").val(n.attr("longitude")),$("input[name=postcode]").val(n.attr("postcode")),$("input[name=iso2]").val(n.attr("iso2")),$("input[name=city_id]").val(n.attr("city_id"));var e=!1;$("input[type=checkbox]").each()),e&&$("button[type=submit]").click()},onGenderSelect:function(t){var n=$(t.currentTarget);n.find("input[type=checkbox]").is(":checked")?n.addClass("active"):n.removeClass("active")}}),t}o=n,(r=i).prototype=Object.create(o.prototype),r.prototype.constructor=r,t(r,o),i.getInstance;var c=i.prototype;return c.init,c.bindDOMEvents=function(){$(".geolocation").on("click",this.eventHandlers.onGeolocationClick),$(".city").on("click",this.eventHandlers.onCityClick),$(".gender-select").on("click",this.eventHandlers.onGenderSelect)},c.getLocation=function(t){navigator.geolocation.getCurrentPosition((function(n){var e=n.coords.latitude,r=n.coords.longitude;t(e,r)}),(function(n){n.code?t(null,null,this.getConfig("TXT_LOC_NO_PERMS")):t(null,null,this.getConfig("TXT_LOC_NOT_FOUND"))}))},i}(v);e(d,"instance_",void 0),$(document).ready())}()}();