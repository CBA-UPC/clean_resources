/*!
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */

/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */

// /*
//  * Viewport - jQuery selectors for finding elements in viewport
//  * Copyright (c) 2008-2009 Mika Tuupola
//  * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
//  * Project home: http://www.appelsiini.net/projects/viewport
// */

/*
 * Modified verion of uuid.js
 *
 * Copyright (c) 2010-2012 Robert Kieffer
 * MIT License - http://opensource.org/licenses/mit-license.php
 * Added to CBSSports.com for viewguid detailed here:
 * https://sites.google.com/a/cbsinteractive.com/data-services/definitions-translations/viewguid
 */

function getEl(e){return document.all?document.all[e]:document.getElementById(e)}function getElementsByClassName(e,t){var n=[],r=new RegExp("\\b"+e+"\\b"),i=t?t.getElementsByTagName("*"):document.getElementsByTagName("*");for(var s=0;s<i.length;s++){var o=i[s].className;r.test(o)&&n.push(i[s])}return n}function setCookie(e,t,n){n||(n=new Date),document.cookie=e+"="+t+"; expires="+n.toGMTString()+";domain=.cbssports.com; path=/"}function readCookie(e){if(document.cookie=="")return!1;var t,n,r=document.cookie;return e+="=",t=r.indexOf(e),t!=-1?(t+=e.length,n=r.indexOf(";",t),n==-1&&(n=r.length),unescape(r.substring(t,n))):!1}function killCookie(e,t,n){var r=readCookie(e);r&&(document.cookie=e+"="+r+"; expires=Fri, 13-Apr-1970 00:00:00 GMT"+(t?";path="+t:"")+(n?";domain="+n:""))}function getValue(e,t){cookieValue=readCookie(e),findString=t;if(!cookieValue)return!1;namePos=cookieValue.indexOf(findString,0);if(namePos==-1)return!1;valueStart=cookieValue.indexOf("&",namePos+1)+1,valueEnd=cookieValue.indexOf("&",valueStart+1),valueEnd==-1&&(valueEnd=cookieValue.length),valueIs=cookieValue.substring(valueStart,valueEnd);if(namePos!=null)return valueIs}function mTrack(e,t,n,r){if(arguments.length==2)var n="mediaTrack";var s=r?";expires="+r:"",o=!0;if(!readCookie(n))newCook=e+"|"+1,document.cookie=n+"="+newCook+";domain=.cbssports.com;path=/"+s;else if(readCookie(n)){oldCook=readCookie(n);var u=oldCook.indexOf(e);if(u==-1)newCook=oldCook+"|"+e+"|"+1,document.cookie=n+"="+newCook+";domain=.cbssports.com;path=/"+s;else{var a=oldCook.split("|"),f,l;for(i=0;i<a.length;i+=2)l=i+1,a[i]==e&&(f=parseInt(a[l])+1,a[l]=f,f>t&&(o=!1));newCook="";for(var c=0;c<a.length-1;c+=2)newCook+=a[c]+"|"+a[c+1],c+2<a.length&&(newCook+="|");document.cookie=n+"="+newCook+";domain=.cbssports.com;path=/"+s}}return o}function getHTTPObject(){var e=!1;if(window.XMLHttpRequest&&typeof XMLHttpRequest!="undefined")try{e=new XMLHttpRequest}catch(t){e=!1}else if(window.ActiveXObject){var n=["Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var r=0;r<n.length;r++){try{e=new ActiveXObject(n[r])}catch(t){e=!1}if(e)break}}return e}function parseQueryString(e){if(!e)return;var t={url:e};if(e.indexOf("?")<0)return t;var n=e.slice(e.indexOf("?")+1).split("&");for(var r=0;r<n.length;r++)hash=n[r].split("="),t[hash[0]]=unescape(hash[1]);return hash=n=null,t}function parse(e,t,n){var r=t&&n||0,i=0;t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,;while(i<16)t[r+i++]=0;return t}unction v1(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var s=e.clockseq!=null?e.clockseq:_clockseq,o=e.msecs!=null?e.msecs:(new Date).getTime(),u=e.nsecs!=null?e.nsecs:_lastNSecs+1,a=o-_lastMSecs+(u-_lastNSecs)/1e4;a<0&&e.clockseq==null&&(s=s+1&16383),(a<0||o>_lastMSecs)&&e.nsecs==null&&(u=0);if(u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=o,_lastNSecs=u,_clockseq=s,o+=122192928e5;var f=((o&268435455)*1e4+u)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var l=o/4294967296*1e4&268435455;i[r++]=l>>>8&255,i[r++]=l&255,i[r++]=l>>>24&15|16,i[r++]=l>>>16&255,i[r++]=s>>>8|128,i[r++]=s&255;var c=e.node||_nodeId;for(var h=0;h<6;h++)i[r+h]=c[h];return t?t:unparse(i)}function xfpFirstPageCookie(){if(e)return e;var e=readCookie("XFP_FIRSTPAGE");e?e==1&&(e=0):e=1;var t=new Date;return t.setTime(t.getTime()+xfpGetTimeToExpiration(.75)),document.cookie="XFP_FIRSTPAGE ="+e+";expires="+t.toUTCString()+";domain="+xfpDomain+";path=/;",e}function xfpGetTimeToExpiration(e,t){t=t||new Date;var n=5;isEDT(t)&&(n=4);var r=(e+n)%24,i=60*t.getUTCHours()+t.getUTCMinutes(),s=60*r-i;return s<0&&(s=1440+s),6e4*s}function isEDT(e){e=e||new Date;var t=e.getUTCMonth();if(t>2&&t<10)return!0;if(t<2||t>10)return!1;var n=e.getUTCDate(),r=e.getUTCDay();if(t==10)return n>7?!1:r==0?e.getUTCHours()<6?!0:!1:n>r?!1:!0;return n<8?!1:n>14?!0:r==0?e.getUTCHours()>6?!0:!1:n-r>7?!0:!1}function xfpGetArgs(){var e=new Object,t=location.search.substring(1),n=t.split("&");for(var r=0;r<n.length;r++){var i=n[r].indexOf("=");if(i==-1)continue;var s=n[r].substring(0,i),o=n[r].substring(i+1);o=decodeURIComponent(o);var u=s.match(/adTargeting_/);if(s=="env"||s=="session"||s=="subses"||s=="adRegion"||s=="ftag"||s=="ttag"||u){u&&(s=s.substring(12)),googletag.pubads().setTargeting(s,o);if(s=="ftag"||s=="ttag")document.cookie="xfpFtag="+o+";domain="+xfpDomain+";path=/",f=1;xfpObj+="~"+s+"="+o}}var a=readCookie("xfpFtag"),f=0;f==0&&a&&(googletag.pubads().setTargeting("ftag",a),xfpObj+="~ftag="+a)}function getTaboolaPlacements(){var e="";$("div[data-taboola-placement]").each(function(){$this=$(this),$this.data("taboola-placement")&&(e!=""&&(e+="|"),e+=$this.data("taboola-placement"))}),surround.taboola=e})})(window);if(typeof CBSi=="undefined"||!CBSi)var CBSi={};CBSi.namespace=function(){var e=arguments,t=null,n,r,i;for(n=0;n<e.length;n+=1){i=e[n].split("."),t=CBSi;for(r=i[0]=="CBSi"?1:0;r<i.length;r+=1)t[i[r]]=t[i[r]]||{},t=t[i[r]]}return t},CBSi.extend=function(e,t,n){if(!t||!e)throw new Error("extend failed, please check that all dependencies are included.");var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t);if(n)for(var i in n)n.hasOwnProperty(i)&&(e.prototype[i]=n[i])},CBSi.panel={overlayManager:undefined,create:function(e,t){this.overlayManager||(this.overlayManager=new YAHOO.widget.OverlayManager),t.strings||(t.strings={}),t.strings.close||(t.strings.close="");var n=new YAHOO.widget.Panel(e,t);return this.overlayManager.register(n),n}},CBSi.fireEvent=function(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");return n.initEvent(t,!0,!0),!e.dispatchEvent(n)}var n=document.createEventObject();return e.fireEvent("on"+t,n)},CBSi.log=function(){},window.console&&window.console.log?CBSi.log=function(){if(CBSi.debugmode==="")return;var e=[];for(var t=0;t<arguments.length;t++)e.push(arguments[t]);console.log(e)}:(window&&window.console?window.console.log=function(){}:(window.console={},window.console.log=function(){}),console?console.log=function(){}:(console={},console.log=function(){})),CBSi.jsRenvInit=function(e){for(var t in e)CBSi[t]=e[t];return},CBSi.jsRenvInit({takeoverIsBlank:0,httpHost:"http://www.cbssports.com",project:"media",mediaHttpServer:"https://www.cbssports.com",pref:{timezoneOffset:"4",timezoneAbbrev:"ET"},league_abbr:"",arena:"video",imageServer:"https://sports.cbsimg.net",requestUri:"/demo/topics",mycbsiplayerState:document.querySelector("#mycbsiplayer").dataset.state||""}),define("components/embed/CBSi",function(){});var ua=navigator.userAgent,IE=document.all?1:0,DOM=document.getElementById?1:0,MAC=navigator.appVersion.indexOf("PPC")>0||navigator.appVersion.indexOf("Mac")>0?1:0,OPERA=ua.indexOf("Opera")>0?1:0,SAF=navigator.appVersion.indexOf("Safari")>0?1:0,iPhone=ua.indexOf("iPhone")>0?1:0,isAndroid=ua.indexOf("android")>0?1:0;CBSi.namespace("injectJS"),CBSi.injectJS=function(e,t,n){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");n?i.setAttribute("type",n):"",i.setAttribute("src",e),i.setAttribute("id",t),document.getElementById(t)||r.appendChild(i)},CBSi.hasLocalStorage=function(e){e||(e="CBSiTesting");try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}},CBSi.namespace("util.DW.CookieTrack"),function(){var e="DWTrackClick";CBSi.util.DW.CookieTrack={setCookie:function(t){var n=t.tag;n=n.replace(/;/g,","),document.cookie=e+"="+n+";domain=.cbssports.com; path=/"},readCookie:function(){var t=readCookie(e);if(t!=0){var n=document.referrer;return n.match(/cbssports\.com/i)?t=t.replace(/,/g,";"):t=null,this.killCookie(),t}return null},killCook)}}}();var JSON;JSON||(JSON={)}();var _rng;if(window.crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);_r8}}if(!_rng){var _rnds=new Array(16);_rs}}var _byteToHex=[],_hexToByte={};for(var i=0;i<256;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;var _seedBytes=_rng(),_nodeId=[_seedBytes[0]|1,_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=(_seedBytes[6]<<8|_seedBytes[7])&16383,_lastMSecs=0,_lastNSecs=0,surround=new Object;surround.cat=["a","b","c","d","e","f"],surround.cookie=readCookie("surround");if(surround.cookie==0||surround.cookie==undefined)surround.pick=Math.floor(Math.random()*surround.cat.length),surround.subsession=Math.floor(Math.random()*4)+1,document.cookie="surround="+surround.cat[surround.pick]+"|"+surround.subsession+";domain=$COOKIE_DOMAIN;path=/",surround.cookie=readCookie("surround");surround.cookie&&(surround.sessions=surround.cookie.split("|")),surround.vguid=v1();var cbsiadGlobal={};typeof surround=="undefined"&&(surround={});var dwTag="&PGUID="+surround.vguid+"&cookiesOn="+cbsiadGlobal.cookiesOn;if(!random)var abc=Math.random()+"",random=abc.substring(2,abc.length);var switchXFP="on",adLookup="media/spln/video/reg/free/video_player",adNetwork="8264",xfpObj="vguid="+surround.vguid+"~user=named~sportsmktg=14FFB_ALL~env=prod~arena=video";xfpDomain=".cbssports.com",xfpSlot="/8264/aw-cbssports/video/media/video/video_player";var xfpFirstPage=0,xfpSession=surround.cookie?surround.sessions[0]:"off",xfpSubsession=surround.cookie?surround.sessions[1]:"off",googletag=googletag||{};googletag.cmd=googletag.cmd||[];var adSlots={};googletag.cmd.push(function(){adSlots.XFP_skybox_top=googletag.defineSlot("/8264/aw-cbssports/video/media/video/video_player",[5,5],"skybox_top").addService(googletag.pubads()).setTargeting("pos","top"),googletag.pubads().addEventListener("slotRenderEnded",function(e){var t=e.slot.getSlotElementId();if(t=="leader_plus_top"||t=="leader_top"){var n="#"+t;$(n).css("display")=="none"&&(CBSi.log("Collapse empty leaderboard."),$("#leaderboard-wrap").css({display:"none"}))}}),googletag.pubads().setTargeting("ptype","multimedia"),googletag.pubads().setTargeting("firstpg",""+xfpFirstPage),googletag.pubads().setTargeting("session",xfpSession),googletag.pubads().setTargeting("subses",""+xfpSubsession),typeof sp_abd!="undefined"&&sp_abd=="true"?googletag.pubads().setTargeting("st",["1"]):googletag.pubads().setTargeting("st",["0"]),googletag.pubads().setTargeting("vguid",surround.vguid),googletag.pubads().setTargeting("user","named"),googletag.pubads().setTargeting("sportsmktg","14FFB_ALL"),googletag.pubads().setTargeting("env","prod"),xfpGetArgs(),googletag.pubads().enableAsyncRendering(),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs();try{setMoatPrebidData()}catch(e){CBSi.log("setMoatPrebidData failed.")}googletag.enableServices()});var PR_UACT=0;xfpObj+="~ptype=multimedia~firstpg="+xfpFirstPage+"~session="+xfpSession+"~subses="+xfpSubsession+"",define("components/embed/global",function(){}),function(e){if(typeof exports=="object"&&typeof module!="undefined")module.exports=e();else if(typeof define=="function"&&define.amd&&define.amd.pako)define("components/embed/util/Pako",[],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.pako=e()}}(function(){var e,t,n;retue}()({1:[function(e,t,n){"use strict";function g(e){if(!(this instanceof g))return new g(e);this.options=i.assign({level:d,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(o[n]);t.header&&r.deflateSetHeader(this.strm,t.header);if(t.dictionary){var f;typeof t.dictionary=="string"?f=s.string2buf(t.dictionary):a.call(t.dictionary)==="[object ArrayBuffer]"?f=new Uint8Array(t.dictionary):f=t.dictionary,n=r.deflateSetDictionary(this.strm,f);if(n!==c)throw new Error(o[n]);this._dict_set=!0}}function y(e,t){var n=new g(t);n.push(e,!0);if(n.err)throw n.msg||o[n.err];return n.result}function b(e,t){return t=t||{},t.raw=!0,y(e,t)}function w(e,t){return t=t||{},t.gzip=!0,y(e,t)}var r=e("./zlib/deflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/messages"),u=e("./zlib/zstream"),a=Object.prototype.toString,f=0,l=4,c=0,h=1,p=2,d=-1,v=0,m=8;g.prototype.push=function(e,t){var n=this.strm,o=this.options.chunkSize,u,d;if(this.ended)return!1;d=t===~~t?t:t===!0?l:f,typeof e=="string"?n.input=s.string2buf(e):a.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{n.avail_out===0&&(n.output=new i.Buf8(o),n.next_out=0,n.avail_out=o),u=r.deflate(n,d);if(u!==h&&u!==c)return this.onEnd(u),this.ended=!0,!1;if(n.avail_out===0||n.avail_in===0&&(d===l||d===p))this.options.to==="string"?this.onData(s.buf2binstring(i.shrinkBuf(n.output,n.next_out))):this.onData(i.shrinkBuf(n.output,n.next_out))}while((n.avail_in>0||n.avail_out===0)&&u!==h);return d===l?(u=r.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===c):d===p?(this.onEnd(c),n.avail_out=0,!0):!0},g.prototype.onData=function(e){this.chunks.push(e)},g.prototype.onEnd=function(e){e===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=g,n.deflate=y,n.deflateRaw=b,n.gzip=w},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(e,t,n){"use strict";function c(e){if(!(this instanceof c))return new c(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&(!e||!e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(u[n]);this.header=new f,r.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new c(t);n.push(e,!0);if(n.err)throw n.msg||u[n.err];return n.resu)}var r=e("./zlib/inflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/constants"),u=e("./zlib/messages"),a=e("./zlib/zstream"),f=e("./zlib/gzheader"),l=Object.prototype.toString;c.prototype.push=function(e,t){var n=this.strm,u=this.options.chunkSize,a=this.options.dictionary,f,c,h,p,d,v,m=!1;if(this.ended)return!1;c=t===~~t?t:t===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof e=="string"?n.input=s.binstring2buf(e):l.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{n.avail_out===0&&(n.output=new i.Buf8(u),n.next_out=0,n.avail_out=u),f=r.inflate(n,o.Z_NO_FLUSH),f===o.Z_NEED_DICT&&a&&(typeof a=="string"?v=s.string2buf(a):l.call(a)==="[object ArrayBuffer]"?v=new Uint8Array(a):v=a,f=r.inflateSetDictionary(this.strm,v)),f===o.Z_BUF_ERROR&&m===!0&&(f=o.Z_OK,m=!1);if(f!==o.Z_STREAM_END&&f!==o.Z_OK)return this.onEnd(f),this.ended=!0,!1;n.next_out&&(n.avail_out===0||f===o.Z_STREAM_END||n.avail_in===0&&(c===o.Z_FINISH||c===o.Z_SYNC_FLUSH))&&(this.options.to==="string"?(h=s.utf8border(n.output,n.next_out),p=n.next_out-h,d=s.buf2string(n.output,h),n.next_out=p,n.avail_out=u-p,p&&i.arraySet(n.output,n.output,h,p,0),this.onData(d)):this.onData(i.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(m=!0)}while((n.avail_in>0||n.avail_out===0)&&f!==o.Z_STREAM_END);return f===o.Z_STREAM_END&&(c=o.Z_FINISH),c===o.Z_FINISH?(f=r.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===o.Z_OK):c===o.Z_SYNC_FLUSH?(this.onEnd(o.Z_OK),n.avail_out=0,!0):!0},c.prototype.onDa)},c.prototype.onEnd=function(e){e===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=c,n.inflate=h,n.inflateRaw=p,n.ungzip=h},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(e,t,n){"use stric)}var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";n.assign=function(e){var t=Array.prototype.slice.call(arguments,1);while(t.length){var n=t.shift();if(!n)continue;if(typeof n!="object")throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}return e},n.shrinkB)};var s={arrayS]},flattenChunks:function(e){var t,n,r,i,s,o;r=0;for(t=0,n=e.length;t<n;t++)r+=e[t].length;o=new Uint8Array(r),i=0;for(t=0,n=e.length;t<n;t++)s=e[t],o.set(s,i),i+=s.length;return o}},o={arrayS]},flattenChun)}};n.setTyp)},n.setTyped(r)},{}],4:[function(e,t,n){"use strict";function f(e,t){if(t<65534)if(e.subarray&&s||!e.subarray&&i)return String.fromCharCode.apply(null,r.shrinkBuf(e,t));var n="";for(var o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}var r=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(o){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(o){s=!1}var u=new r.Buf8(256);for(var a=0;a<256;a++)u[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;u[254]=u[254]=1,n.string2buf=function(e){var t,n,i,s,o,u=e.length,a=0;for(s=0;s<u;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<u&&(i=e.charCodeAt(s+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),s++)),a+=n<128?1:n<2048?2:n<65536?3:4;t=new r.Buf8(a);for(o=0,s=0;o<a;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<u&&(i=e.charCodeAt(s+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),s++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t},n.buf2binstri)},n.binstring2buf=function(e){var t=new r.Buf8(e.length);for(var n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,s,o=t||e.length,a=new Array(o*2);for(r=0,n=0;n<o;){i=e[n++];if(i<128){a[r++]=i;continue}s=u[i];if(s>4){a[r++]=65533,n+=s-1;continue}i&=s===2?31:s===3?15:7;while(s>1&&n<o)i=i<<6|e[n++]&63,s--;if(s>1){a[r++]=65533;continue}i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|i&1023)}return f(a,r)},n.utf8border=function(e,t){var n;t=t||e.length,t>e.length&&(t=e.length),n=t-1;while(n>=0&&(e[n]&192)===128)n--;return n<0?t:n===0?t:n+u[e[n]]>t?n:t}},{"./common":3}],5:[function(e,t,n){"use strict";function r(e,t,n,r){var i=e&65535|0,s=e>>>16&65535|0,o=0;while(n!==0){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}t.exports=r},{}],}},{}],7:[function(e,t,n){"use strict";function r(){var e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}function s(e,t,n,r){var s=i,o=r+n;e^=-1;for(var u=r;u<o;u++)e=e>>>8^s[(e^t[u])&255];return e^-1}var i=r();t.exports=s},{}],8:[function(e,t,n){"use stric}function et(e){var t=e.length;while(--t>=0)e[t]=0}function tt(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out);if(n===0)return;r.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=}function it(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function st(e,t,n,i){var u=e.avail_in;return u>i&&(u=i),u===0?0:(e.avail_in-=u,r.arraySet(t,e.input,e.next_in,u,n),e.state.wrap===1?e.adler=s(e.adler,t,u,n):e.state.wrap===2&&(e.adler=o(e.adler,t,u,n)),e.next_in+=u,e.total_in+=u,u)}function ot(e,t){var n=e.max_chain_length,r=e.strstart,i,s,o=e.prev_length,u=e.nice_match,a=e.strstart>e.w_size-F?e.strstart-(e.w_size-F):0,f=e.window,l=e.w_mask,c=e.prev,h=e.strstart+j,p=f[r+o-1],d=f[r+o];e.prev_length>=e.good_match&&(n>>=2),u>e.lookahead&&(u=e.lookahead);do{i=t;if(f[i+o]!==d||f[i+o-1]!==p||f[i]!==f[r]||f[++i]!==f[r+1])continue;r+=2,i++;do;while(f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&r<h);s=j-(h-r),r=h-j;if(s>o){e.match_start=t,o=s;if(s>=u)break;p=f[r+o-1],d=f[r+o]}}while((t=c[t&l])>a&&--n!==0);return o<=e.lookahead?o:e.lookahead}function ut(e){var t=e.w_size,n,i,s,o,u;do{o=e.window_size-e.lookahead-e.strstart;if(e.strstart>=t+(t-F)){r.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do s=e.head[--n],e.head[n]=s>=t?s-t:0;while(--i);i=t,n=i;do s=e.prev[--n],e.prev[n]=s>=t?s-t:0;while(--i);o+=t}if(e.strm.avail_in===0)break;i=st(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=i;if(e.lookahead+e.insert>=B){u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;while(e.insert){e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+B-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--;if(e.lookahead+e.insert<B)break}}}while(e.lookahead<F&&e.strm.avail_in!==0)}function at(e,t){var n=65535;n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);for(;;){if(e.lookahead<=1){ut(e);if(e.lookahead===0&&t===a)return $;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if(e.strstart===0||e.strstart>=r){e.lookahead=e.strstart-r,e.strstart=r,nt(e,!1);if(e.strm.avail_out===0)return $}if(e.strstart-e.block_start>=e.w_size-F){nt(e,!1);if(e.strm.avail_out===0)return $}}e.insert=0;if(t===c)return nt(e,!0),e.strm.avail_out===0?K:Q;if(e.strstart>e.block_start){nt(e,!1);if(e.strm.avail_out===0)return $}return $}function ft(e,t){var n,r;for(;;){if(e.lookahead<F){ut(e);if(e.lookahead<F&&t===a)return $;if(e.lookahead===0)break}n=0,e.lookahead>=B&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+B-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-F&&(e.match_length=ot(e,n));if(e.match_length>=B){r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-B),e.lookahead-=e.match_length;if(e.match_length<=e.max_lazy_match&&e.lookahead>=B){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+B-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask}else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r){nt(e,!1);if(e.strm.avail_out===0)return $}}e.insert=e.strstart<B-1?e.strstart:B-1;if(t===c)return nt(e,!0),e.strm.avail_out===0?K:Q;if(e.last_lit){nt(e,!1);if(e.strm.avail_out===0)return $}return J}function lt(e,t){var n,r,s;for(;;){if(e.lookahead<F){ut(e);if(e.lookahead<F&&t===a)return $;if(e.lookahead===0)break}n=0,e.lookahead>=B&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+B-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=B-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-F&&(e.match_length=ot(e,n),e.match_length<=5&&(e.strategy===b||e.match_length===B&&e.strstart-e.match_start>4096)&&(e.match_length=B-1));if(e.prev_length>=B&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-B,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-B),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+B-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);e.match_available=0,e.match_length=B-1,e.strstart++;if(r){nt(e,!1);if(e.strm.avail_out===0)return $}}else if(e.match_available){r=i._tr_tally(e,0,e.window[e.strstart-1]),r&&nt(e,!1),e.strstart++,e.lookahead--;if(e.strm.avail_out===0)return $}else e.match_available=1,e.strstart++,e.lookahead--}e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<B-1?e.strstart:B-1;if(t===c)return nt(e,!0),e.strm.avail_out===0?K:Q;if(e.last_lit){nt(e,!1);if(e.strm.avail_out===0)return $}return J}function ct(e,t){var n,r,s,o,u=e.window;for(;;){if(e.lookahead<=j){ut(e);if(e.lookahead<=j&&t===a)return $;if(e.lookahead===0)break}e.match_length=0;if(e.lookahead>=B&&e.strstart>0){s=e.strstart-1,r=u[s];if(r===u[++s]&&r===u[++s]&&r===u[++s]){o=e.strstart+j;do;while(r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&s<o);e.match_length=j-(o-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}}e.match_length>=B?(n=i._tr_tally(e,1,e.match_length-B),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++);if(n){nt(e,!1);if(e.strm.avail_out===0)return $}}e.insert=0;if(t===c)return nt(e,!0),e.strm.avail_out===0?K:Q;if(e.last_lit){nt(e,!1);if(e.strm.avail_out===0)return $}return J}function ht(e,t){var n;for(;;){if(e.lookahead===0){ut(e);if(e.lookahead===0){if(t===a)return $;break}}e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n){nt(e,!1);if(e.strm.avail_out===0)return $}}e.insert=0;if(t===c)return nt(e,!0),e.strm.avail_out===0?K:Q;if(e.last_lit){nt(e,!1);if(e.strm.avail_out===0)return $}return}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=N,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(P*2),this.dyn_dtree=new r.Buf16((2*_+1)*2),this.bl_tree=new r.Buf16((2*D+1)*2),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(H+1),this.heap=new r.Buf16(2*M+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*M+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gt(e){var t;return!e||!e.state?Y(e,v):(e.total_in=e.total_out=0,e.data_type=T,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?q:X,e.adler=t.wrap===2?0:1,t.last_flush=a,i._tr_init(t),t}function bt(e,t){return!e||!e.state?v:e.state.wrap!==2?v:(e.state.gzhead=t,p)}function wt(e,t,n,i,s,o){if(!e)return v;var u=1;t===y&&(t=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16);if(s<1||s>C||n!==N||i<8||i>15||t<0||t>9||o<0||o>S)return Y(e,v);i===8&&(i=9);var a=new mt;return e.state=a,a.strm=e,a.wrap=u,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+B-1)/B),a.window=new r.Buf8(a.w_size*2),a.head=new r.Buf16(a.hash_size),a.prev=new r.Buf16(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new r.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=n,yt()}function St(e,t){var n,r,s,u;if(!e||!e.state||t>h||t<0)return e?Y(e,v):v;r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===V&&t!==c)return Y(e,e.avail_out===0?g:v);r.strm=e,n=r.last_flush,r.last_flush=t;if(r.status===q)if(r.wrap===2)e.adler=0,rt(r,31),rt(r,139),rt(r,8),r.gzhead?(rt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),rt(r,r.gzhead.time&255),rt(r,r.gzhead.time>>8&255),rt(r,r.gzhead.time>>16&255),rt(r,r.gzhead.time>>24&255),rt(r,r.level===9?2:r.strategy>=w||r.level<2?4:0),rt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(rt(r,r.gzhead.extra.length&255),rt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=o(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=R):(rt(r,0),rt(r,0),rt(r,0),rt(r,0),rt(r,0),rt(r,r.level===9?2:r.strategy>=w||r.level<2?4:0),rt(r,G),r.status=X);else{var m=N+(r.w_bits-8<<4)<<8,y=-1;r.strategy>=w||r.level<2?y=0:r.level<6?y=1:r.level===6?y=2:y=3,m|=y<<6,r.strstart!==0&&(m|=I),m+=31-m%31,r.status=X,it(r,m),r.strstart!==0&&(it(r,e.adler>>>16),it(r,e.adler&65535)),e.adler=1}if(r.status===R)if(r.gzhead.extra){s=r.pending;while(r.gzindex<(r.gzhead.extra.length&65535)){if(r.pending===r.pending_buf_size){r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),tt(e),s=r.pending;if(r.pending===r.pending_buf_size)break}rt(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++}r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=U)}else r.status=U;if(r.status===U)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size){r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),tt(e),s=r.pending;if(r.pending===r.pending_buf_size){u=1;break}}r.gzindex<r.gzhead.name.length?u=r.gzhead.name.charCodeAt(r.gzindex++)&255:u=0,rt(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),u===0&&(r.gzindex=0,r.status=z)}else r.status=z;if(r.status===z)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size){r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),tt(e),s=r.pending;if(r.pending===r.pending_buf_size){u=1;break}}r.gzindex<r.gzhead.comment.length?u=r.gzhead.comment.charCodeAt(r.gzindex++)&255:u=0,rt(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),u===0&&(r.status=W)}else r.status=W;r.status===W&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&tt(e),r.pending+2<=r.pending_buf_size&&(rt(r,e.adler&255),rt(r,e.adler>>8&255),e.adler=0,r.status=X)):r.status=X);if(r.pending!==0){tt(e);if(e.avail_out===0)return r.last_flush=-1,p}else if(e.avail_in===0&&Z(t)<=Z(n)&&t!==c)return Y(e,g);if(r.status===V&&e.avail_in!==0)return Y(e,g);if(e.avail_in!==0||r.lookahead!==0||t!==a&&r.status!==V){var b=r.strategy===w?ht(r,t):r.strategy===E?ct(r,t):dt[r.level].func(r,t);if(b===K||b===Q)r.status=V;if(b===$||b===K)return e.avail_out===0&&(r.last_flush=-1),p;if(b===J){t===f?i._tr_align(r):t!==h&&(i._tr_stored_block(r,0,0,!1),t===l&&(et(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),tt(e);if(e.avail_out===0)return r.last_flush=-1,p}}return t!==c?p:r.wrap<=0?d:(r.wrap===2?(rt(r,e.adler&255),rt(r,e.adler>>8&255),rt(r,e.adler>>16&255),rt(r,e.adler>>24&255),rt(r,e.total_in&255),rt(r,e.total_in>>8&255),rt(r,e.total_in>>16&255),rt(r,e.total_in>>24&255)):(it(r,e.adler>>>16),it(r,e.adler&65535)),tt(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?p:d)}function xt(e){var t;return!e||!e.state?v:(t=e.state.status,t!==q&&t!==R&&t!==U&&t!==z&&t!==W&&t!==X&&t!==V?Y(e,v):(e.state=null,t===X?Y(e,m):p))}function Tt(e,t){var n=t.length,i,o,u,a,f,l,c,h;if(!e||!e.state)return v;i=e.state,a=i.wrap;if(a===2||a===1&&i.status!==q||i.lookahead)return v;a===1&&(e.adler=s(e.adler,t,n,0)),i.wrap=0,n>=i.w_size&&(a===0&&(et(i.head),i.strstart=0,i.block_start=0,i.insert=0),h=new r.Buf8(i.w_size),r.arraySet(h,t,n-i.w_size,i.w_size,0),t=h,n=i.w_size),f=e.avail_in,l=e.next_in,c=e.input,e.avail_in=n,e.next_in=0,e.input=t,ut(i);while(i.lookahead>=B){o=i.strstart,u=i.lookahead-(B-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[o+B-1])&i.hash_mask,i.prev[o&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=o,o++;while(--u);i.strstart=o,i.lookahead=B-1,ut(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=B-1,i.match_available=0,e.next_in=l,e.input=c,e.avail_in=f,i.wrap=a,p}var r=e("../utils/common"),i=e("./trees"),s=e("./adler32"),o=e("./crc32"),u=e("./messages"),a=0,f=1,l=3,c=4,h=5,p=0,d=1,v=-2,m=-3,g=-5,y=-1,b=1,w=2,E=3,S=4,x=0,T=2,N=8,C=9,k=15,L=8,A=29,O=256,M=O+1+A,_=30,D=19,P=2*M+1,H=15,B=3,j=258,F=j+B+1,I=32,q=42,R=69,U=73,z=91,W=103,X=113,V=666,$=1,J=2,K=3,Q=4,G=3,dt;dt=[new pt(0,0,0,0,at),new pt(4,4,8,4,ft),new pt(4,5,16,8,ft),new pt(4,6,32,32,ft),new pt(4,4,16,16,lt),new pt(8,16,32,32,lt),new pt(8,16,128,128,lt),new pt(8,32,128,256,lt),new pt(32,128,258,1024,lt),new pt(32,258,258,4096,lt)],n.deflateInit=Et,n.deflateInit2=wt,n.deflateReset=yt,n.deflateResetKeep=gt,n.deflateSetHeader=bt,n.deflate=St,n.deflateEnd=xt,n.deflateSetDictionary=Tt,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],r},{}],10:[function(e,t,n){"use strict";var r=30,i=12;t.exports=function(t,n){var s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;s=t.state,o=t.next_in,L=t.input,u=o+(t.avail_in-5),a=t.next_out,A=t.output,f=a-(n-t.avail_out),l=a+(t.avail_out-257),c=s.dmax,h=s.wsize,p=s.whave,d=s.wnext,v=s.window,m=s.hold,g=s.bits,y=s.lencode,b=s.distcode,w=(1<<s.lenbits)-1,E=(1<<s.distbits)-1;e:do{g<15&&(m+=L[o++]<<g,g+=8,m+=L[o++]<<g,g+=8),S=y[m&w];t:for(;;){x=S>>>24,m>>>=x,g-=x,x=S>>>16&255;if(x===0)A[a++]=S&65535;else{if(!(x&16)){if((x&64)===0){S=y[(S&65535)+(m&(1<<x)-1)];continue t}if(x&32){s.mode=i;break e}t.msg="invalid literal/length code",s.mode=r;break e}T=S&65535,x&=15,x&&(g<x&&(m+=L[o++]<<g,g+=8),T+=m&(1<<x)-1,m>>>=x,g-=x),g<15&&(m+=L[o++]<<g,g+=8,m+=L[o++]<<g,g+=8),S=b[m&E];n:for(;;){x=S>>>24,m>>>=x,g-=x,x=S>>>16&255;if(!(x&16)){if((x&64)===0){S=b[(S&65535)+(m&(1<<x)-1)];continue n}t.msg="invalid distance code",s.mode=r;break e}N=S&65535,x&=15,g<x&&(m+=L[o++]<<g,g+=8,g<x&&(m+=L[o++]<<g,g+=8)),N+=m&(1<<x)-1;if(N>c){t.msg="invalid distance too far back",s.mode=r;break e}m>>>=x,g-=x,x=a-f;if(N>x){x=N-x;if(x>p&&s.sane){t.msg="invalid distance too far back",s.mode=r;break e}C=0,k=v;if(d===0){C+=h-x;if(x<T){T-=x;do A[a++]=v[C++];while(--x);C=a-N,k=A}}else if(d<x){C+=h+d-x,x-=d;if(x<T){T-=x;do A[a++]=v[C++];while(--x);C=0;if(d<T){x=d,T-=x;do A[a++]=v[C++];while(--x);C=a-N,k=A}}}else{C+=d-x;if(x<T){T-=x;do A[a++]=v[C++];while(--x);C=a-N,k=A}}while(T>2)A[a++]=k[C++],A[a++]=k[C++],A[a++]=k[C++],T-=3;T&&(A[a++]=k[C++],T>1&&(A[a++]=k[C++]))}else{C=a-N;do A[a++]=A[C++],A[a++]=A[C++],A[a++]=A[C++],T-=3;while(T>2);T&&(A[a++]=A[C++],T>1&&(A[a++]=A[C++]))}break}}break}}while(o<u&&a<l);T=g>>3,o-=T,g-=T<<3,m&=(1<<g)-1,t.next_in=o,t.next_out=a,t.avail_in=o<u?5+(u-o):5-(o-u),t.avail_out=a<l?257+(l-a):257-(a-l),s.hold=m,s.bits=g;return}},{}],11:[function(e,t,n){"use stric}function ot(e){var t;return!e||!e.state?g:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=S,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(et),t.distcode=t.distdyn=new r.Buf32(tt),t.sane=1,t.back=-1,d)}function ut(e){var t;return!e||!e.state?g:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,ot(e))}function at(e,t){var n,r;return!e||!e.state?g:(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?g:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,ut(e)function vt(e,t,n,i){var s,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(s=o.wsize-o.wnext,s>i&&(s=i),r.arraySet(o.window,t,n-i,s,o.wnext),i-=s,i?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}function mt(e,t){var n,et,tt,nt,rt,st,ot,ut,at,ft,lt,ct,ht,pt,mt=0,gt,yt,bt,wt,Et,St,xt,Tt,Nt=new r.Buf8(4),Ct,kt,Lt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return g;n=e.state,n.mode===D&&(n.mode=P),rt=e.next_out,tt=e.output,ot=e.avail_out,nt=e.next_in,et=e.input,st=e.avail_in,ut=n.hold,at=n.bits,ft=st,lt=ot,Tt=d;e:for(;;)switch(n.mode){case S:if(n.wrap===0){n.mode=P;break}while(at<16){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if(n.wrap&2&&ut===35615){n.check=0,Nt[0]=ut&255,Nt[1]=ut>>>8&255,n.check=s(n.check,Nt,2,0),ut=0,at=0,n.mode=x;break}n.flags=0,n.head&&(n.head.done=!1);if(!(n.wrap&1)||(((ut&255)<<8)+(ut>>8))%31){e.msg="incorrect header check",n.mode=G;break}if((ut&15)!==E){e.msg="unknown compression method",n.mode=G;break}ut>>>=4,at-=4,xt=(ut&15)+8;if(n.wbits===0)n.wbits=xt;else if(xt>n.wbits){e.msg="invalid window size",n.mode=G;break}n.dmax=1<<xt,e.adler=n.check=1,n.mode=ut&512?M:D,ut=0,at=0;break;case x:while(at<16){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.flags=ut;if((n.flags&255)!==E){e.msg="unknown compression method",n.mode=G;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=G;break}n.head&&(n.head.text=ut>>8&1),n.flags&512&&(Nt[0]=ut&255,Nt[1]=ut>>>8&255,n.check=s(n.check,Nt,2,0)),ut=0,at=0,n.mode=T;case T:while(at<32){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.head&&(n.head.time=ut),n.flags&512&&(Nt[0]=ut&255,Nt[1]=ut>>>8&255,Nt[2]=ut>>>16&255,Nt[3]=ut>>>24&255,n.check=s(n.check,Nt,4,0)),ut=0,at=0,n.mode=N;case N:while(at<16){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.head&&(n.head.xflags=ut&255,n.head.os=ut>>8),n.flags&512&&(Nt[0]=ut&255,Nt[1]=ut>>>8&255,n.check=s(n.check,Nt,2,0)),ut=0,at=0,n.mode=C;case C:if(n.flags&1024){while(at<16){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.length=ut,n.head&&(n.head.extra_len=ut),n.flags&512&&(Nt[0]=ut&255,Nt[1]=ut>>>8&255,n.check=s(n.check,Nt,2,0)),ut=0,at=0}else n.head&&(n.head.extra=null);n.mode=k;case k:if(n.flags&1024){ct=n.length,ct>st&&(ct=st),ct&&(n.head&&(xt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,et,nt,ct,xt)),n.flags&512&&(n.check=s(n.check,et,ct,nt)),st-=ct,nt+=ct,n.length-=ct);if(n.length)break e}n.length=0,n.mode=L;case L:if(n.flags&2048){if(st===0)break e;ct=0;do xt=et[nt+ct++],n.head&&xt&&n.length<65536&&(n.head.name+=String.fromCharCode(xt));while(xt&&ct<st);n.flags&512&&(n.check=s(n.check,et,ct,nt)),st-=ct,nt+=ct;if(xt)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=A;case A:if(n.flags&4096){if(st===0)break e;ct=0;do xt=et[nt+ct++],n.head&&xt&&n.length<65536&&(n.head.comment+=String.fromCharCode(xt));while(xt&&ct<st);n.flags&512&&(n.check=s(n.check,et,ct,nt)),st-=ct,nt+=ct;if(xt)break e}else n.head&&(n.head.comment=null);n.mode=O;case O:if(n.flags&512){while(at<16){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if(ut!==(n.check&65535)){e.msg="header crc mismatch",n.mode=G;break}ut=0,at=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=D;break;case M:while(at<32){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}e.adler=n.check=it(ut),ut=0,at=0,n.mode=_;case _:if(n.havedict===0)return e.next_out=rt,e.avail_out=ot,e.next_in=nt,e.avail_in=st,n.hold=ut,n.bits=at,m;e.adler=n.check=1,n.mode=D;case D:if(t===h||t===p)break e;case P:if(n.last){ut>>>=at&7,at-=at&7,n.mode=J;break}while(at<3){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.last=ut&1,ut>>>=1,at-=1;switch(ut&3){case 0:n.mode=H;break;case 1:dt(n),n.mode=R;if(t===p){ut>>>=2,at-=2;break e}break;case 2:n.mode=F;break;case 3:e.msg="invalid block type",n.mode=G}ut>>>=2,at-=2;break;case H:ut>>>=at&7,at-=at&7;while(at<32){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if((ut&65535)!==(ut>>>16^65535)){e.msg="invalid stored block lengths",n.mode=G;break}n.length=ut&65535,ut=0,at=0,n.mode=B;if(t===p)break e;case B:n.mode=j;case j:ct=n.length;if(ct){ct>st&&(ct=st),ct>ot&&(ct=ot);if(ct===0)break e;r.arraySet(tt,et,nt,ct,rt),st-=ct,nt+=ct,ot-=ct,rt+=ct,n.length-=ct;break}n.mode=D;break;case F:while(at<14){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.nlen=(ut&31)+257,ut>>>=5,at-=5,n.ndist=(ut&31)+1,ut>>>=5,at-=5,n.ncode=(ut&15)+4,ut>>>=4,at-=4;if(n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=G;break}n.have=0,n.mode=I;case I:while(n.have<n.ncode){while(at<3){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.lens[Lt[n.have++]]=ut&7,ut>>>=3,at-=3}while(n.have<19)n.lens[Lt[n.have++]]=0;n.lencode=n.lendyn,n.lenbits=7,Ct={bits:n.lenbits},Tt=u(a,n.lens,0,19,n.lencode,0,n.work,Ct),n.lenbits=Ct.bits;if(Tt){e.msg="invalid code lengths set",n.mode=G;break}n.have=0,n.mode=q;case q:while(n.have<n.nlen+n.ndist){for(;;){mt=n.lencode[ut&(1<<n.lenbits)-1],gt=mt>>>24,yt=mt>>>16&255,bt=mt&65535;if(gt<=at)break;if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if(bt<16)ut>>>=gt,at-=gt,n.lens[n.have++]=bt;else{if(bt===16){kt=gt+2;while(at<kt){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}ut>>>=gt,at-=gt;if(n.have===0){e.msg="invalid bit length repeat",n.mode=G;break}xt=n.lens[n.have-1],ct=3+(ut&3),ut>>>=2,at-=2}else if(bt===17){kt=gt+3;while(at<kt){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}ut>>>=gt,at-=gt,xt=0,ct=3+(ut&7),ut>>>=3,at-=3}else{kt=gt+7;while(at<kt){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}ut>>>=gt,at-=gt,xt=0,ct=11+(ut&127),ut>>>=7,at-=7}if(n.have+ct>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=G;break}while(ct--)n.lens[n.have++]=xt}}if(n.mode===G)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=G;break}n.lenbits=9,Ct={bits:n.lenbits},Tt=u(f,n.lens,0,n.nlen,n.lencode,0,n.work,Ct),n.lenbits=Ct.bits;if(Tt){e.msg="invalid literal/lengths set",n.mode=G;break}n.distbits=6,n.distcode=n.distdyn,Ct={bits:n.distbits},Tt=u(l,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ct),n.distbits=Ct.bits;if(Tt){e.msg="invalid distances set",n.mode=G;break}n.mode=R;if(t===p)break e;case R:n.mode=U;case U:if(st>=6&&ot>=258){e.next_out=rt,e.avail_out=ot,e.next_in=nt,e.avail_in=st,n.hold=ut,n.bits=at,o(e,lt),rt=e.next_out,tt=e.output,ot=e.avail_out,nt=e.next_in,et=e.input,st=e.avail_in,ut=n.hold,at=n.bits,n.mode===D&&(n.back=-1);break}n.back=0;for(;;){mt=n.lencode[ut&(1<<n.lenbits)-1],gt=mt>>>24,yt=mt>>>16&255,bt=mt&65535;if(gt<=at)break;if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if(yt&&(yt&240)===0){wt=gt,Et=yt,St=bt;for(;;){mt=n.lencode[St+((ut&(1<<wt+Et)-1)>>wt)],gt=mt>>>24,yt=mt>>>16&255,bt=mt&65535;if(wt+gt<=at)break;if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}ut>>>=wt,at-=wt,n.back+=wt}ut>>>=gt,at-=gt,n.back+=gt,n.length=bt;if(yt===0){n.mode=$;break}if(yt&32){n.back=-1,n.mode=D;break}if(yt&64){e.msg="invalid literal/length code",n.mode=G;break}n.extra=yt&15,n.mode=z;case z:if(n.extra){kt=n.extra;while(at<kt){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.length+=ut&(1<<n.extra)-1,ut>>>=n.extra,at-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=W;case W:for(;;){mt=n.distcode[ut&(1<<n.distbits)-1],gt=mt>>>24,yt=mt>>>16&255,bt=mt&65535;if(gt<=at)break;if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if((yt&240)===0){wt=gt,Et=yt,St=bt;for(;;){mt=n.distcode[St+((ut&(1<<wt+Et)-1)>>wt)],gt=mt>>>24,yt=mt>>>16&255,bt=mt&65535;if(wt+gt<=at)break;if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}ut>>>=wt,at-=wt,n.back+=wt}ut>>>=gt,at-=gt,n.back+=gt;if(yt&64){e.msg="invalid distance code",n.mode=G;break}n.offset=bt,n.extra=yt&15,n.mode=X;case X:if(n.extra){kt=n.extra;while(at<kt){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.offset+=ut&(1<<n.extra)-1,ut>>>=n.extra,at-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=G;break}n.mode=V;case V:if(ot===0)break e;ct=lt-ot;if(n.offset>ct){ct=n.offset-ct;if(ct>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=G;break}ct>n.wnext?(ct-=n.wnext,ht=n.wsize-ct):ht=n.wnext-ct,ct>n.length&&(ct=n.length),pt=n.window}else pt=tt,ht=rt-n.offset,ct=n.length;ct>ot&&(ct=ot),ot-=ct,n.length-=ct;do tt[rt++]=pt[ht++];while(--ct);n.length===0&&(n.mode=U);break;case $:if(ot===0)break e;tt[rt++]=n.length,ot--,n.mode=U;break;case J:if(n.wrap){while(at<32){if(st===0)break e;st--,ut|=et[nt++]<<at,at+=8}lt-=ot,e.total_out+=lt,n.total+=lt,lt&&(e.adler=n.check=n.flags?s(n.check,tt,lt,rt-lt):i(n.check,tt,lt,rt-lt)),lt=ot;if((n.flags?ut:it(ut))!==n.check){e.msg="incorrect data check",n.mode=G;break}ut=0,at=0}n.mode=K;case K:if(n.wrap&&n.flags){while(at<32){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if(ut!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=G;break}ut=0,at=0}n.mode=Q;case Q:Tt=v;break e;case G:Tt=y;break e;case Y:return b;case Z:default:return g}e.next_out=rt,e.avail_out=ot,e.next_in=nt,e.avail_in=st,n.hold=ut,n.bits=at;if(n.wsize||lt!==e.avail_out&&n.mode<G&&(n.mode<J||t!==c))if(vt(e,e.output,e.next_out,lt-e.avail_out))return n.mode=Y,b;return ft-=e.avail_in,lt-=e.avail_out,e.total_in+=ft,e.total_out+=lt,n.total+=lt,n.wrap&&lt&&(e.adler=n.check=n.flags?s(n.check,tt,lt,e.next_out-lt):i(n.check,tt,lt,e.next_out-lt)),e.data_type=n.bits+(n.last?64:0)+(n.mode===D?128:0)+(n.mode===R||n.mode===B?256:0),(ft===0&&lt===0||t===c)&&Tt===d&&(Tt=w),d}function yt(e,t){var n;return!e||!e.state?g:(n=e.state,(n.wrap&2)===0?g:(n.head=t,t.done=!1,d))}function bt(e,t){var n=t.length,r,s,o;if(!e||!e.state)return g;r=e.state;if(r.wrap!==0&&r.mode!==_)return g;if(r.mode===_){s=1,s=i(s,t,n,0);if(s!==r.check)return y}return o=vt(e,t,n,n),o?(r.mode=Y,b):(r.havedict=1,d)}var r=e("../utils/common"),i=e("./adler32"),s=e("./crc32"),o=e("./inffast"),u=e("./inftrees"),a=0,f=1,l=2,c=4,h=5,p=6,d=0,v=1,m=2,g=-2,y=-3,b=-4,w=-5,E=8,S=1,x=2,T=3,N=4,C=5,k=6,L=7,A=8,O=9,M=10,_=11,D=12,P=13,H=14,B=15,j=16,F=17,I=18,q=19,R=20,U=21,z=22,W=23,X=24,V=25,$=26,J=27,K=28,Q=29,G=30,Y=31,Z=32,et=852,tt=592,nt=15,rt=nt,ct=!0,ht,pt;n.inflateReset=ut,n.inflateReset2=at,n.inflateResetKeep=ot,n.inflateInit=lt,n.inflateInit2=ft,n.inflate=mt,n.inflateEnd=gt,n.inflateGetHeader=yt,n.inflateSetDictionary=bt,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(e,t,n){"use strict";var r=e("../utils/common"),i=15,s=852,o=592,u=0,a=1,f=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,n,d,v,m,g,y,b){var w=b.bits,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M,_,D,P,H,B=null,j=0,F,I=new r.Buf16(i+1),q=new r.Buf16(i+1),R=null,U=0,z,W,X;for(E=0;E<=i;E++)I[E]=0;for(S=0;S<v;S++)I[n[d+S]]++;N=w;for(T=i;T>=1;T--)if(I[T]!==0)break;N>T&&(N=T);if(T===0)return m[g++]=20971520,m[g++]=20971520,b.bits=1,0;for(x=1;x<T;x++)if(I[x]!==0)break;N<x&&(N=x),L=1;for(E=1;E<=i;E++){L<<=1,L-=I[E];if(L<0)return-1}if(L>0&&(t===u||T!==1))return-1;q[1]=0;for(E=1;E<i;E++)q[E+1]=q[E]+I[E];for(S=0;S<v;S++)n[d+S]!==0&&(y[q[n[d+S]]++]=S);t===u?(B=R=y,F=19):t===a?(B=l,j-=257,R=c,U-=257,F=256):(B=h,R=p,F=-1),O=0,S=0,E=x,H=g,C=N,k=0,D=-1,A=1<<N,P=A-1;if(t===a&&A>s||t===f&&A>o)return 1;for(;;){z=E-k,y[S]<F?(W=0,X=y[S]):y[S]>F?(W=R[U+y[S]],X=B[j+y[S]]):(W=96,X=0),M=1<<E-k,_=1<<C,x=_;do _-=M,m[H+(O>>k)+_]=z<<24|W<<16|X|0;while(_!==0);M=1<<E-1;while(O&M)M>>=1;M!==0?(O&=M-1,O+=M):O=0,S++;if(--I[E]===0){if(E===T)break;E=n[d+y[S]]}if(E>N&&(O&P)!==D){k===0&&(k=N),H+=x,C=E-k,L=1<<C;while(C+k<T){L-=I[C+k];if(L<=0)break;C++,L<<=1}A+=1<<C;if(t===a&&A>s||t===f&&A>o)return 1;D=O&P,m[D]=N<<24|C<<16|H-g|0}}return O!==0&&(m[H+O]=E-k<<24|64<<16|0),b.bits=N,0}},{"../utils/common":3}],1}},{}],14:[function(e,t,n){"use stricunction W(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&2}function $(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function J(e){e.bi_valid===16?(W(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function K(e,t){var n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,a=t.stat_desc.max_length,f,l,c,h,p,d,v=0;for(h=0;h<=w;h++)e.bl_count[h]=0;n[e.heap[e.heap_max]*2+1]=0;for(f=e.heap_max+1;f<b;f++){l=e.heap[f],h=n[n[l*2+1]*2+1]+1,h>a&&(h=a,v++),n[l*2+1]=h;if(l>r)continue;e.bl_count[h]++,p=0,l>=u&&(p=o[l-u]),d=n[l*2],e.opt_len+=d*(h+p),s&&(e.static_len+=d*(i[l*2+1]+p))}if(v===0)return;do{h=a-1;while(e.bl_count[h]===0)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[a]--,v-=2}while(v>0);for(h=a;h!==0;h--){l=e.bl_count[h];while(l!==0){c=e.heap[--f];if(c>r)continue;n[c*2+1]!==h&&(e.opt_len+=(h-n[c*2+1])*n[c*2],n[c*2+1]=h),l--}}}function Q(e,t,n){var r=new Array(w+1),i=0,s,o;for(s=1;s<=w;s++)r[s]=i=i+n[s-1]<<1;for(o=0;o<=t;o++){var u=e[o*2+1];if(u===0)continue;e[o*2]=$(r[u]++,u)}}function G(){var e,t,n,r,i,s=new Array(w+1);n=0;for(r=0;r<d-1;r++){B[r]=n;for(e=0;e<1<<k[r];e++)H[n++]=r}H[n-1]=r,i=0;for(r=0;r<16;r++){j[r]=i;for(e=0;e<1<<L[r];e++)P[i++]=r}i>>=7;for(;r<g;r++){j[r]=i<<7;for(e=0;e<1<<L[r]-7;e++)P[256+i++]=r}for(t=0;t<=w;t++)s[t]=0;e=0;while(e<=143)_[e*2+1]=8,e++,s[8]++;while(e<=255)_[e*2+1]=9,e++,s[9]++;while(e<=279)_[e*2+1]=7,e++,s[7]++;while(e<=287)_[e*2+1]=8,e++,s[8]++;Q(_,m+1,s);for(e=0;e<g;e++)D[e*2+1]=5,D[e*2]=$(e,5);I=new F(_,k,v+1,m,w),q=new F(D,L,0,g,w),R=new F(new Array(0),A,0,y,S)}function Y(e){var t;for(t=0;t<m;t++)e.dyn_ltree[t*2]=0;for(t=0;t<g;t++)e.dyn_dtree[t*2]=0;for(t=0;t<y;t++)e.bl_tree[t*2]=0;e.dyn_ltree[x*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches}function tt(e,t,n,r){var i=t*2,s=n*2;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]}function nt(e,t,n){var r=e.heap[n],i=n<<1;while(i<=e.heap_len){i<e.heap_len&&tt(t,e.heap[i+1],e.heap[i],e.depth)&&i++;if(tt(t,r,e.heap[i],e.depth))break;e.heap[n]=e.heap[i],n=i,i<<=1}e.heap[n]=r}function rt(e,t,n){var r,i,s=0,o,u;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],i=e.pending_buf[e.l_buf+s],s++,r===0?V(e,i,t):(o=H[i],V(e,o+v+1,t),u=k[o],u!==0&&(i-=B[o],X(e,i,u)),r--,o=z(r),V(e,o,n),u=L[o],u!==0&&(r-=j[o],X(e,r,u)));while(s<e.last_lit);V(e,x,t)}function it(e,t){var n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems,o,u,a=-1,f;e.heap_len=0,e.heap_max=b;for(o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=a=o,e.depth[o]=0):n[o*2+1]=0;while(e.heap_len<2)f=e.heap[++e.heap_len]=a<2?++a:0,n[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=r[f*2+1]);t.max_code=a;for(o=e.heap_len>>1;o>=1;o--)nt(e,n,o);f=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],nt(e,n,1),u=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=u,n[f*2]=n[o*2]+n[u*2],e.depth[f]=(e.depth[o]>=e.depth[u]?e.depth[o]:e.depth[u])+1,n[o*2+1]=n[u*2+1]=f,e.heap[1]=f++,nt(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],K(e,t),Q(n,a,e.bl_count)}function st(e,t,n){var r,i=-1,s,o=t[1],u=0,a=7,f=4;o===0&&(a=138,f=3),t[(n+1)*2+1]=65535;for(r=0;r<=n;r++){s=o,o=t[(r+1)*2+1];if(++u<a&&s===o)continue;u<f?e.bl_tree[s*2]+=u:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[T*2]++):u<=10?e.bl_tree[N*2]++:e.bl_tree[C*2]++,u=0,i=s,o===0?(a=138,f=3):s===o?(a=6,f=3):(a=7,f=4)}}function ot(e,t,n){var r,i=-1,s,o=t[1],u=0,a=7,f=4;o===0&&(a=138,f=3);for(r=0;r<=n;r++){s=o,o=t[(r+1)*2+1];if(++u<a&&s===o)continue;if(u<f){do V(e,s,e.bl_tree);while(--u!==0)}else s!==0?(s!==i&&(V(e,s,e.bl_tree),u--),V(e,T,e.bl_tree),X(e,u-3,2)):u<=10?(V(e,N,e.bl_tree),X(e,u-3,3)):(V(e,C,e.bl_tree),X(e,u-11,7));u=0,i=s,o===0?(a=138,f=3):s===o?(a=6,f=3):(a=7,f=4)}}function ut(e){var t;st(e,e.dyn_ltree,e.l_desc.max_code),st(e,e.dyn_dtree,e.d_desc.max_code),it(e,e.bl_desc);for(t=y-1;t>=3;t--)if(e.bl_tree[O[t]*2+1]!==0)break;return e.opt_len+=3*(t+1)+5+5+4,t}function at(e,t,n,r){var i;X(e,t-257,5),X(e,n-1,5),X(e,r-4,4);for(i=0;i<r;i++)X(e,e.bl_tree[O[i]*2+1],3);ot(e,e.dyn_ltree,t-1),ot(e,e.dyn_dtree,n-1)}function ft(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return s;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return o;for(n=32;n<v;n++)if(e.dyn_ltree[n*2]!==0)return o;returnunction vt(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(H[n]+v+1)*2]++,e.dyn_dtree[z(t)*2]++),e.last_lit===e.lit_bufsize-1}var r=e("../utils/common"),i=4,s=0,o=1,u=2,f=0,l=1,c=2,h=3,p=258,d=29,v=256,m=v+1+d,g=30,y=19,b=2*m+1,w=15,E=16,S=7,x=256,T=16,N=17,C=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=512,_=new Array((m+2)*2);a(_);var D=new Array(g*2);a(D);var P=new Array(M);a(P);var H=new Array(p-h+1);a(H);var B=new Array(d);a(B);var j=new Array(g);a(j);var I,q,R,lt=!1;n._tr_init=ct,n._tr_stored_block=ht,n._tr_flush_block=dt,n._tr_tally=vt,n._tr_align=pt},{"../utils/common":3}],1r},{}],"/u},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")}),CBSi.namespace("CBSi.util.CookieJar"),CBSi.util.CookieJar=function(e){this.objName="cbsiCookieJar",this.log=CBSi.log?CBSi.log:function(e){},this.isRemote=!1;for(var t in e)this[t]=e[t];this.log("CBSi.util.CookieJar","constructor")},CBSi.util.CookieJar.prototype.add=function(e,t,n,r,i){this.log("CBSi.util.CookieJar","add: "+e+" = "+t),this._setCookie(e,t,n,r,i)},CBSi.util.CookieJar.prototype.update=function(e,t,n,r,i){this.log("CBSi.util.CookieJar","update: "+e+" = "+t),this._setCookie(e,t,n,r,i)},CBSi.util.CookieJar.prototype.remove=function(e){this.log("CBSi.util.CookieJar","remove: "+e),this._setCookie(e,"",-1)},CBSi.util.CookieJar.prototype.read=function(e){this.log("CBSi.util.CookieJar","read: "+e);var t=document.cookie.split(";");for(var n=0;n<t.length;n++){var r=t[n].split("=",2);if(r[0].trim()==e&&r.length>1){var i=r[1].trim();return isNaN(parseInt(+i))||(i=parseInt(i)),i=="true"&&(i=!0),i=="false"&&(i=!1),this.log("CBSi.util.CookieJar","read: "+e+" = "+i),i}}return undefined},CBSi.util.CookieJar.prototype._setCookie=function(e,t,n,r,i){this.log("CBSi.util.CookieJar","_setCookie: "+e+","+t+","+n+","+r+","+i),typeof r=="undefined"&&(r="/"),typeof i!="undefined"?i="; domain="+i:i="";if(typeof n=="undefined"||isNaN(parseInt(n)))n="";try{if(n!=""){var s=new Date;s.setTime(s.getTime()+n*24*60*60*1e3),n="; expires="+s.toGMTString()}document.cookie=e+"="+t+n+"; path="+r+i}catch(o){this.log("CBSi.util.CookieJar","_setCookie: error: "+o)}},define("components/embed/util/CookieJar",function(){}),CBSi.namespace("CBSi.util.Logger"),CBSi.util.Logger=function(e){this.enabled=!1,this.objName="cbsiLogger",this.logTo=console.log?function(e){console.log("%c"+e.time+" "+e.objName+": "+e.type,"background-color: #efefee; font-weight: bold;","\n"+e.message.replace(/<br\/>/g,"\n"))}:function(e){},this.encode=!1,this.scroll=!0;for(var t in e)this[t]=e[t];this.logTo=typeof this.logTo=="function"?this.logTo:document.getElementById(this.logTo)?document.getElementById(this.logTo):null,this._cache=[],this.log("CBSi.util.Logger","constructor")},CBSi.util.Logger.prototype.log=function(e,t){if(typeof t!="undefined"&&t!=""){try{t=this._toStringEnhanced(t,0)}catch(n){t="Logger log error: "+n}t+="",this.encode&&(t=t.replace(/</gi,"&lt;"),t=t.replace(/>/gi,"&gt;"),t=t.replace(/\n/gi,"<br/>"),t=t.replace(/ /gi,"&nbsp;"))}else t="";var r=this._niceTime();this._cache.push({time:r,type:e,message:t}),this._cache.length>2e3&&this._cache.slice(-2e3);if(!this.enabled)return;this.logTo&&(typeof this.logTo=="function"?this.logTo({objName:this.objName,time:r,type:e,message:t}):(this.logTo.innerHTML+='<div class="logMessageHead"><i>'+this.objName+"</i>: "+r+" > "+e+'</div><div class="logMessage">'+t+'</div><div class="logMessageFoot"></div>',this.scroll&&(this.logTo.scrollTop=this.logTo.scrollHeight)))},CBSi.util.Logger.prototype.debug)},CBSi.util.Logger.prototype._niceTime=function(){var e=new Date,t=e.getHours(),n=t<12?"am":"pm";t=t==0?12:t>12?t-12:t,t+="";var r=e.getMinutes()+"",i=e.getSeconds()+"";return t=t.length==1?"0"+t:t,r=r.length==1?"0"+r:r,i=i.length==1?"0"+i:i,t+":"+r+":"+i+" "+n},CBSi.util.Logger.prototype._toStringEnhanced=function(e,t){if((typeof e).toLowerCase()=="string")return e;var n="";if(t>100)throw"RangeError: Objects larger than 100 levels deep will not be logged.";for(properties in e){var r=e[properties],i=(typeof r).toLowerCase();if(i=="function"){n+=" A function: "+r+"<br/>";continue}r&&(r.constructor==(new Date).constructor?(n+=properties+": A date: ",n+=r,n+="<br/>"):r.constructor==[].constructor?(n+=properties+": An array:<br/><br/>",n+=this._toStringEnhanced(r,t+1),n+="<br/>"):i=="object"?(n+=properties+": ",n+=this._toStringEnhanced(r,t+1),n+="<br/>"):(n+=properties+": ",n+=r,n+="<br/>"))}return n},define("components/embed/util/Logger",function(){}),CBSi.namespace("CBSi.util.Session"),CBSi.util.Session=function(e){if(!e.cookieJar)return!1;this.objName="cbsiSession",this.log=CBSi.log?CBSi.log:function(e){},this.cookieName="cookie"+Math.floor(Math.random()*(new Date).getTime());for(var t in e)this[t]=e[t];this.log("CBSi.util.Session","constructor")},CBSi.util.Session.prototype.set=function(e,t){this.log("CBSi.util.Session","set: "+e+", "+t);var n=this.cookieJar.read(this.cookieName),r=n&&n!=""?this._unpack(n):{};r[e]=t,this.cookieJar.update(this.cookieName,this._pack(r))},CBSi.util.Session.prototype.get=function(e){this.log("CBSi.util.Session","get: "+e);var t=this.cookieJar.read(this.cookieName),n=t&&t!=""?this._unpack(t):{};return n[e]||""},CBSi.util.Session.prototype.erase=function(e){this.log("CBSi.util.Session","erase: "+e);var t=this.cookieJar.read(this.cookieName),n=t&&t!=""?this._unpack(t):{};delete n[e],this.cookieJar.update(this.cookieName,this._pack(n))},CBSi.util.Session.prototype._unpack=function(e){this.log("CBSi.util.Session","_unpack: "+e);var t=e.split("&"),n={};for(var r=0;r<t.length;r++){var i=t[r].split("=");i.length==2&&i[0]!=""&&i[1]!=""&&(n[i[0]]=decodeURIComponent(i[1]))}return n},CBSi.util.Session.prototype._pack=function(e){this.log("CBSi.util.Session","pack: "+e);var t=[];for(o in e)o!=""&&e[o]!=""&&t.push(o+"="+encodeURIComponent(e[o]));return t.join("&")},define("components/embed/util/Session",function(){}),CBSi.namespace("CBSi.util.Clock"),CBSi.util.Clock=function(e){this.objName="cbsiClock",this.log=CBSi.log?CBSi.l{},this.isRemote=!1,this.sync=60,this.utils=CBSi.util.Utils?CBSi.util.Utils:!1,this._syncCounter=0,this._timerID=null;for(var t in e)this[t]=e[t];this.log("CBSi.util.Clock","constructor")},CBSi.util.Clock.prototype.start=function(e){this.log("CBSi.util.Clock","start: "+e),this.time=e*1e3,this._updateTime()},CBSi.util.Clock.prototype.stop=function(){this.log("CBSi.util.Clock","stop"),clearTimeout(this._timerID)},CBSi.util.Clock.prototype._updateTime=function(){clearTimeout(this._timerID),this.time+=1e3,this._syncCounter++;if(this._syncCounter==this.sync){if(this.isRemote){var e="www";this.env=="qa"&&(e="qa"),this.utils.getXData("http://"+e+".cbssports.com/player/server-time/?callback="+this.objName+"._syncTime")}else this.utils.getData("/player/server-time/",this._syncTime,!1,!0,this.objName);this._syncCounter=0}this.timerID=setTimeout(this.objName+"._updateTime();",1e3)},CBSi.util.Clock.prototype._syncTime=function(newTime,objName){if(objName!=""&&objName!=undefined){var obj=eval(objName);obj.log("CBSi.util.Clock","_syncTime: "+newTime+", "+objName),obj.time=newTime*1e3}},define("components/embed/util/Clock",function(){}),CBSi=typeof CBSi!="undefined"?CBSi:{},CBSi.namespace=function(){var e=arguments,t=null,n,r,i;for(n=0;n<e.length;n+=1){i=e[n].split("."),t=CBSi;for(r=i[0]=="CBSi"?1:0;r<i.length;r+=1)t[i[r]]=t[i[r]]||{},t=t[i[r]]}return t},CBSi.namespace("CBSi.util.Utils"),CBSi.util.Utils={DAY_MAP:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTH_MAP:["January","February","March","April","May","June","July","August","September","October","November","December"],MONTH_LENGTH:[31,(new Date).getFullYear()%4==0?29:28,31,30,31,30,31,31,30,31,30,31],TZ_ABBREV:{GMT:"GMT","US/Eastern":"ET","US/Central":"CT","US/Mountain":"MT","US/Pacific":"PT"},ALPHA_MAP:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],getData:function(url,callback,doEval,passObjName,objName){var uri=url.split("?")[0],params=url.split("?")[1],http=this.getHTTPObject();if(passObjName)try{eval(objName)}catch(e){passObjName=!1}http.onreadystatechange=function(){if(http.readyState==4)if(http.status==200){var data=http.responseText;data=data.replace(/<!--([\S\s]*?)-->/gim,"");if(data){if(doEval)try{data=eval("("+data+")")}catch(e){typeof CBSi!="undefined"&&CBSi.log("getData error: could not eval: "+data,e)}passObjName?callback.call(eval(objName),data,objName):callback(data)}else passObjName?callback.call(eval(objName),null,objName):callback(null)}else http.status>=400&&(passObjName?callback.call(eval(objName),null,objName):callback(null))},http.open("GET",url,!0),http.send(null)},getXData:function(e){var t=document.getElementsByTagName("head").item(0),n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e),n.id="cbsixdata",document.getElementById("cbsixdata")&&t.removeChild(document.getElementById("cbsixdata")),t.appendChild(n)},fireBeace},hhmmTohhmmampm:function(e,t){var n;return e>=12?(e!=12&&(e-=12),n=" pm"):e<12&&(n=" am",e==0&&(e=12)),t=t<10&&t>0?"0"+t:t==0?"00":t,e+":"+t+n},getArrayIndex:function(e,t){if(typeof e!="undefined"&&typeof t!="undefined")for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},getHTTPObject:function(){try{return new XMLHttpRequest}catch(e){typeof CBSi!="undefined"&&CBSi.log("getHTTPObject error",e)}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){typeof CBSi!="undefined"&&CBSi.log("getHTTPObject error",e)}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){typeof CBSi!="undefined"&&CBSi.log("getHTTPObject error",e)}return!1},stringToPrimitive:function(e){if(e&&typeof e=="string"&&e!=""&&e!=null)e=="true"?e=!0:e=="false"?e=!1:e-e==0&&(e=parseFloat(e));else for(var t in e)e[t]&&typeof e[t]=="string"&&e[t]!=""&&e[t]!=null&&(e[t]=="true"?e[t]=!0:e[t]=="false"?e[t]=!1:e[t]-e[t]==0&&(e[t]=parseFloat(e[t])));return e},stringToObject:function(e){e=e.split(",");var t={};for(var n=0;n<e.length;n++){var r=e[n].split(":");t[r[0]]=r[1]}return e=t,e},formatTime:function(e,t){if(t==undefined||t==null)t=!0;var n=Math.floor(e/3600),r=n<10?"0"+n:n,i=Math.floor(e%3600/60),s=i<10?"0"+i:i,o=Math.floor(e%3600%60),u=o<10?"0"+o:o,a=t?r+":"+s+":"+u:r!="00"?n+":"+s+":"+u:s!="00"?i+":"+u:":"+u;return a},exists:function(target){try{return typeof target=="string"&&(target=eval(target)),typeof target!="undefined"?!0:!1}catch(e){return!1}},animate:function(e,t,n,r,i){for(var s in t){var o=t[s].replace(/(-|\d)/g,""),u=parseFloat(t[s].replace(o,"")),a=parseFloat(e.style[s].replace(o,"")),f=Math.abs(a-u);if(Math.round(f)==0){e.style[s]=u+o;return}typeof r=="undefined"&&(r=a<u?f/(n/10):-(f/(n/10))),n==0&&(r=a-u),e.style[s]=a+r+o}var l=this;clearTimeout(this._tID),this._tID=setTimeout(function(){l.animate(e,t,n-10,r,l._tID)},10)},ordify:function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t=t.join(","),t},deordify:function(e){e=e.split(",");var t=[];for(var n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t=t.join(""),t},removeDuplicateSimpleObjects:function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=!1;for(var s=0;s<n.length;s++){if(typeof n[s]=="string"||typeof n[s]=="number"){i=n[s]==e[r];if(typeof t!="undefined"&&typeof t=="object"&&t.length)for(k=0;k<t.length;k++)n[s]==t[k]&&(i=!0)}else for(var o in n[s]){i=n[s][o]==e[r][o];if(typeof t!="undefined"&&typeof t=="object"&&t.length)for(k=0;k<t.length;k++)o==t[k]&&(i=!0);if(!i)break}if(i)break}i||n.push(e[r])}return n},hasClass:function(e,t){return e!=null&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))!=null},addClass:function(e,t){if(this.hasClass(e,t))return;e.className=(e.className+=" "+t).trim()},removeClass:function(e,t){if(!this.hasClass(e,t))return;e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").trim()},toggleClass:function(e,t){if(this.hasClass(e,t)){this.removeClass(e,t);return}this.addClass(e,t)},unpack:function(e){var t=e.split("&"),n={};for(var r=0;r<t.length;r++){var i=t[r].split("=");i.length==2&&i[0]!=""&&i[1]!=""&&(n[i[0]]=decodeURIComponent(i[1]))}return n},pack:function(e){var t=[];for(o in e)o!=""&&e[o]!=""&&t.push(o+"="+encodeURIComponent(e[o]));return t.join("&")},zlib:{inflate:function(e,t){return this._call("inflate",e,t)},inflateRaw:function(e,t){return this._call("inflateRaw",e,t)},deflate:function(e,t){return this._call("deflate",e,t)},deflateRaw:function(e,t){return this._call("deflateRaw",e,t)},gzip:function(e,t){return this._call("gzip",e,t)},ungz)},_call:function(e,t,n){return typeof window.pako!="undefined"?window.pako[e](t,n):t}},gcd:function(e,t){return t==0?e:this.gcd(t,e%t)},getUAObject:function(e){e=e.toLowerCase();var t={str:e,id:"",maj:0,min:0};if(t.str.indexOf("ipod")>-1)t.id="ipod";else if(t.str.indexOf("ipad")>-1)t.id="ipad";else if(t.str.indexOf("iphone")>-1)t.id="iphone";else if(t.str.indexOf("darwin")>-1)t.id="darwin";else if(t.str.indexOf("android")>-1){t.id="android";var n=t.str.match(/\bandroid (\d+(?:\.\d+)+)/);n&&n.length>=2&&(n=n[1].split(/\./),t.maj=n[0],t.min=n[1]);if(!n){var n=t.str.match(/\bandroid (\d+(?:)+)/);n&&n.length==2&&n[1].indexOf(".")===-1&&(t.maj=n[1])}}else t.str.indexOf("edge")>-1?t.id="edge":t.str.indexOf("trident")>-1||t.str.indexOf("msie")>-1?t.id="msie":t.str.indexOf("chrome")>-1&&t.str.indexOf("chromium")==-1?t.id="chrome":t.str.indexOf("firefox")>-1&&t.str.indexOf("seamonkey")==-1?t.id="firefox":t.str.indexOf("safari")!=-1&&t.str.indexOf("chrome")==-1&&t.str.indexOf("version/11")!=-1&&t.str.indexOf("crios")<0&&t.str.indexOf("fxios")<0?(t.id="safari",t.maj=11):t.str.indexOf("safari")>-1?t.id="safari":t.id="unknown";return t},hexToRgb:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null},getAdValuesFromSession:function(){var e=cbsiSession.cookieJar.read("_BB.bs");if(!e){typeof CBSi!="undefined"&&CBSi.log("no ad session values found");return}return e=e.split("|"),e[2]=this.getPlyr(),e},getPlyr:function(){return this.plyr},setPle},extend:function(){var e=this;for(var t=1;t<arguments.length;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(typeof arguments[0][n]=="object"&&typeof arguments[t][n]=="object"?e.extend(arguments[0][n],arguments[t][n]):arguments[0][n]=arguments[t][n]);return arguments[0]}},define("components/embed/util/Utils",function(){}r}({1:[function(e,t,n){"use stric}n.byteLengr},n.toByteArray=function(e){for(var t,n=f(e),r=n[0],o=n[1],u=new s((d=r,v=o,3*(d+v)/4-v)),a=0,l=0<o?r-4:r,c=0;c<l;c+=4)t=i[e.charCodeAt(c)]<<18|i[e.charCodeAt(c+1)]<<12|i[e.charCodeAt(c+2)]<<6|i[e.charCodeAt(c+3)],u[a++]=t>>16&255,u[a++]=t>>8&255,u[a++]=255&t;var d,v;return 2===o&&(t=i[e.charCodeAt(c)]<<2|i[e.charCodeAt(c+1)]>>4,u[a++]=255&t),1===o&&(t=i[e.charCodeAt(c)]<<10|i[e.charCodeAt(c+1)]<<4|i[e.charCodeAt(c+2)]>>2,u[a++]=t>>8&255,u[a++]=255&t),u},n.fromByteArr)};for(var r=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,a=o.length;u<a;++u)r[u]=o[u],i[o.charCodeAt(u)]=u;i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){},{}],)},{dup:2}],4:[function(e,t,n){"use stric}function a(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|p(e,t),r=o(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),r.__proto__=u.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return u.from(r,t,n);var)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ,r,s){return t=+t,n>>>=0,s||L(e,0,n,4),i.write(e,t,n,r,23,4),nr=e("base64-js"),i=e("ieee754");n.Buffer=u,n.SlowBuff)},n.INSPECT_MAX_BYTES=50;var s=2147483647;n.kMaxLength=s,(u.TYPED_ARRAY_SUPPO}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,gt}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.fr)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,u.alls},u.allocUnsafe=function(e){return l(e)},u.allocUnsafeSlow=function(e){return l(e)},u.isBuffe},u.compa0},u.isEncodi}},u.concr},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swaps},u.prototype.swaps},u.prototype.swaps},u.prototype.toLocaleString=u.prototype.toStri)},u.prototype.equa)},u.prototype.inspe"},u.prototype.compa0},u.prototype.includ)},u.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},u.prototype.lastIndex)},u.prototype.wri}},u.prototype.toJS}};var E=4096;u.prototype.slir},u.prototype.readUIntr},u.prototype.readUIntr},u.prototype.readUIn]},u.prototype.readUInt168},u.prototype.readUInt16]},u.prototype.readUInt32]},u.prototype.readUInt32)},u.prototype.readIntr},u.prototype.readInts},u.prototype.readIn]},u.prototype.readInt16n},u.prototype.readInt16n},u.prototype.readInt324},u.prototype.readInt32]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDouble)},u.prototype.writeUIntn},u.prototype.writeUIntn},u.prototype.writeUIn1},u.prototype.writeUInt162},u.prototype.writeUInt162},u.prototype.writeUInt324},u.prototype.writeUInt324},u.prototype.writeIntn},u.prototype.writeIntn},u.prototype.writeIn1},u.prototype.writeInt162},u.prototype.writeInt162},u.prototype.writeInt324},u.prototype.writeInt324},u.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return O(this,e,t,!0,n)},u.prototype.writeDouble)},u.prototype.coi},u.prototype.fis};var M=/[^+/0-9A-Za-z-_]/g},{"base64-js":1,ieee754:9}],}},{}],)},{"../../is-buffer/index.js":11}],7:[function(e,t,(t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListenes},r.prototype.em0},r.prototype.on=r.prototype.addListens},r.prototype.ons},r.prototype.removeListens},r.prototype.removeAllListenes},r.prototype.listene]},r.prototype.listenerCou0},r.listenerCou)}},{}],}},{http:30,url:36}],}},{}],1}},{}],1}},{}],1}},{}],1)},{_process:14}],1}},{}],15:[function(e,t,n){(function(e){!function("object"==typeof n&&n&&!n.nodeType&&n,s="object"==typeof t&&t&&!t.nodeType&&t,o="object"==typeof e&&e;o.global!==o&&o.window!==o&&o.self!==o||(r=o);var u,a,f=2147483647,l=36,c=1,h=26,p=38,d=700,v=72,m=128,g="-",y=/^xn--/,b=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=l-c,x=Math.floor,T=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:A,encode:M},decode:P,encode:H,toASC)},toUnico)}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",[],function(){return u});else if(i&&s)if(t.exports==i)s.exports=u;else for(a in u)u.hasOwnProperty(a)&&(i[a]=u[a]);else r.punycode=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],1}},{}],1}},{}],1)},{"./decode":16,"./encode":17}],19:[function(e,t,n){"use stricvar r=e("process-nextick-args"),i=Object.keyt};t.exports=c;var s=e("core-util-is");s.inherits=e("inherits");var o=e("./_stream_readable"),u=e("./_stream_writable");s.inherits(c,o);for(var a=i(u.prototype),f=0;f<a.length;f++){var l=a[f];c.prototype[l]||(c.prototype[l]=u.prototype[l])}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{gd},s)}}),c.prototype._destr)}},{"./_stream_readable":21,"./_stream_writable":23,"core-util-is":6,inherits:10,"process-nextick-args":13}],2}},{"./_stream_transform":22,"core-util-is":6,inherits:10}],21:[function(e,t,n){(function(n,r){"use stric}function w(e,t,n,r,i){var s,o,u,a=e._readableState;return null===t?(a.reading=)}(e,a)):(i||n}(a,t)),s?e.emit("error",s):a.objectMode||t&&0<t.length?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===f.prototype||(o=t,t=f.from(o)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):E(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?E(e,a,t,!1):C(e,a)):E(e,a,t,!1))):r||(a.reading=!1)),!(u=a).ended&&(u.needReadable||u.length<u.highWaterMark||0===u.lengton _(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift()i}(e,n}(e,t),r}(e,t.buffer,t.decoder),n);varvar i=e("process-nextick-args");t.exports=b;var s,o=e("isarray");b.ReadableState=y,e("events").EventEmitter;varh},a=e("./internal/streams/stream"),f=e("safe-buffer").Buffer,l=r.Uint8Array||function(){},c=e("core-util-is");c.inherits=e("inherits");var h=e("util"),p=void 0;p=h&&h.debuglog?h.debuglog("stream"):function(){};var d,v=e("./internal/streams/BufferList"),m=e("./internal/streams/destroy");c.inherits(b,a);var g=["error","close","destroy","pause","resume"];Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destr)},b.prototype.pu)},b.prototype.unshi)},b.prototype.isPausg},b.prototype.setEncodis};var S=8388608;b.prototype.rer},b.prototype._re)},b.prototype.pipe=function(e,r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,p("pipe count=%d opts=%j",s.pipesCount,t);var a=!!t&&!1===t.end||e===n.stdout||e===n.stderr?w:l;s.endEmitted?i.nextTick(a):r.once("end",a),e.on("unpipe",f);var c,h=(c)});e.on("drain",h);var d=!1,v=!1;return r.on("data",)}(e,"error",g),e.once("close",y),e.once("finish",b),e.emit("pipe",r),s.flowing||(p("pipe resume"),r.resume()),e},b.prototype.unpis},b.prototype.addListener=b.prototype.n},b.prototype.resus},b.prototype.paus},b.prototype.wrs},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=_}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":19,"./internal/streams/BufferList":24,"./internal/streams/destroy":25,"./internal/streams/stream":26,_process:14,"core-util-is":6,events:7,inherits:10,isarray:12,"process-nextick-args":13,"safe-buffer":29,"string_decoder/":27,util:2}],22:[function(e,t,n){"use strict.exports=s;var r=e("./_stream_duplex"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(s,r),s.prototype.pu)},s.prototype._transfo)},s.prototype._wri}},s.prototype._re0},s.prototype._destr)}},{"./_stream_duplex":19,"core-util-is":6,inherits:10}],23:[function(e,t,n){(function(n,r,i){"use stric}}function m(){}function g(t,n){u=u||e("./_stream_duplex"),t=t||{};var r=n instanceof u;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,f=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(f||0===f)?f:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var c=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(p=n,p.writing=!1,p.writecb=null,p.length-=p.writelen,p.writelen=0,t)u=e,f=n,l=r,c=t,h=i,--f.pendingcb,l?(s.nextTick(h,c),s.nextTick(N,u,f),u._writableState.errorEmitted=!0,u.emit("error",c)):(h(c),u._writableState.errorEmitted=!0,u.emit("error",c),N(u,f));else{var o=x(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||S(e,n),r?a(w,e,n,o,i):w(e,n,o,i)}var u,f,l,c,h,p}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this=e("process-nextick-args");t.exports=y;var u,a=!n.browser&&-1<["v0.10","v0.9."].indexOf(n.version.slice(0,5))?i:s.nextTick;y.WritableState=g;var f=e("core-util-is");f.inherits=e("inherits");var l={deprecate:e("util-deprecate")},c=e("./internal/streams/stream"),h=e("safe-buffer").Buffer,p=r.Uint8Array||function(){},d,v=e("./internal/streams/destroy");f.inherits(y,c),g.prototype.getBuff}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{valg}}))s},y.prototype.pi)},y.prototype.write=function(e,t,n){var r,i,o,u,a,f,l,c,d,v,g,y=this._writableState,w=!1,E=!y.objectMode&&(r=e,h.isBuffer(r)||r instanceof p);return E&&!h.isBuffer(e)&&(i=e,e=h.from(i)),"function"==typeof t&&(n=t,t=null),E?t="buffer":t||(t=y.defaultEncoding),"function"!=typeof n&&(n=m),y.ended?(d=this,v=n,g=new Error("write after end"),d.emit("error",g),s.nextTick(v,g)):(E||(o=this,u=y,f=n,c=!(l=!0),null===(a=e)?c=new TypeError("May not write null values to stream"):"string"==typeof a||void 0===a||u.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c&&(o.emit("error",c),s.nextTick(f,c),l=!1),l))&&(y.pendingcb++,w=function(e,t,n,r,i,s){if(!n){vart}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var u=t.objectMode?1:r.length;t.length+=u;var a=t.length<t.highWaterMark;a||(t.needDrain=!0);if(t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,u,r,i,s);return a}(this,y,E,e,t,n)),w},y.prototype.co+},y.prototype.unco)},y.prototype.setDefaultEncodi)},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,gk}}),y.prototype._wri)},y.prototype._writev=null,y.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finishe1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{gd},s)}}),y.prototype.destroy=v.destroy,y.prototype._undestroy=v.undestroy,y.prototype._destr)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":19,"./internal/streams/destroy":25,"./internal/streams/stream":26,_process:14,"core-util-is":6,inherits:10,"process-nextick-args":13,"safe-buffer":29,timers:34,"util-deprecate":38}],2)},{"safe-buffer":29,util:2}],25:[function(e,t,n){"use stric)}var r=e("process-nextick-args");t.exports={destrs},undestr)}}},{"process-nextick-args":13}],2r},{events:7}],27:[function(e,t,n){"use strict";function s(e){var t;switch(this.encoding=function(e){var}}(e);if("string"==typeof t||r.isEncoding!==i&&!!i(e))return t||e;throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf16le":this.text=a,this.end=f,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=l,this.end=c,t=3;break;default:return this.write=h,void (this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(}var r=e("safe-buffer").Buffer,i=r.isEturn!1}};(n.StringDecoder=s).prototy):t||""},s.protot+"":t},s.prototype.text=function(i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototyp=e.length}},{"safe-bufferough.js")},{"./lib/_stream_duplex.js":19,"./lib/_stream_passthrough.js":20,"./lib/_stream_readable.js":21,"./lib/_stream_transform.js":22,"./lib/_stream_writable.jsuffer(e)}},{buffindow:{})},{"./lib/request":32,"./lib/response":33,"builtin-status-codes":5,url:36,xtend:40}],31:[function(e,t,n){(freturn!1}function a(e){return"function"==typeof e}n.fetch=a(e.fetch)&&a(e.ReadableStream),n.writableStream=a(e.WritableStream),n.abortController=a(e.AbortController),n.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),n.blobConstructor=!0}catch(e){}var t,o=void 0!==e.ArrayBuffer,u=o&&a(e.ArrayBuffer.prototype.slice);n.arraybuffer=n.fetch||o&&i("arraybuffer"),n.msstream=!n.fetch&&u&&i("ms-stream"),n.mozchunkedarraybuffer=!n.fetch&&o&&i("moz-chunked-arraybuffer"),n.overrideMimeType=n.fetch||!!r()&&a(r().overrideMimeType),n.vbArray=a(e.VBArray),t=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(e,t,n){(function(n,r,i){var o=e("./capability"),u=e("inherits"),f=e("./response"),l=e("readable-stream"),c=e("to-arraybuffer"),h=f.IncomingMessage,p=f.readyStates,d=t.exports=function(e){var t,n=this;l.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+(new i(e.auth)).toString("base64")),Object.keys(e.headeraders[t])});var r,s,u=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!o.abortController)t=!(u=!1);else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!o.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}n._mode=(r=t,s=u,o.fetch&&s?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&r?"arraybuffer":o.vbArray&&r?"text:vbarray":"text"),n._fetchTimer=null,n.on("finish",function(){n._onFinish()})};u(d,l.Writable),d.prototypevalue:t})},d.prototypealue:null},d.prototype.reerCase()]},d.prototype",t)})}}}},d.prototype._onXogress())},d.prototypesponse))},d.prototsh(e),n()},d.prototype.abort=d.prototyr.abort()},d.prois,e,t,n)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":31,"./response":33,_process:14,buffer:4,inherits:10,"readable-stream":28,"to-arraybuffer":35}],33:[function(e,t,n){(function(t,i,s){var o=e("./capability"),u=e("inherits"),a=e("readable-stream"),f=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=n.IncomingMessage=function(e,n,r,u){var f=this;if(a.Readable.call(f),f._mode=r,f.headers={},f.rawHeaders=[],f.trailers={},f.rawTrailers=[],close")})}),"fetch"===r){if(f._fetchResponse=n,f.url=n.url,f.statusCode=n.status,f.statusMessage=n.statusText,n.headepush(t,e)}),o.writableStream){var l=new WritableStrFetch=ush(nuerror",e)}});try{return void n.body.pipeTo(l).catch(function(e){i.clearTimeout(u),f._destroyed||f.emit("error",e)})}catch(e){}}var d=n.body.geror",e)})}()}else if(f._xhr=e,f._pos=0,f.url=e.responseURL,f.statusCode=e.status,f.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n1],t[2])}}),f._charset="x-user-defined",!o.overrideMimeType){var v=f.rawHeaders["mime-type"];if(v){var m=v.match(/;\s*charset=([^;])(;|$)/);m&&(f._charset=m[1].toLowerCase())}f._charset||(f._charset="utf-8")}};u(l,a.Readable),l.protonull,e())},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==f.DONE)break;try{n=(new i.VBArray(t.responseBody)).toArray()}catch(t){}if(null!==n){e.push(new s(n));break};case"text":try{n=t.responseText}catch(t){e._mode="text:vbarray";break}if(n.length>e._pos){var r=n.substr(e._pos);if("x-user-defined"===e._charset){for(var o=new s(r.length),u=0;u<r.length;u++)o[u]=255&r.charCodeAt(u);e.push(o)}else e.push(r,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==f.DONE||!t.response)break;n=t.response,e.push(new s(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==f.LOADING||!n)break;e.push(new s(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==f.LOADING)break;var a=new i.MSStreamReader;a.teLength)},a.onload=function(){e.push(null)},a.readAsArrayBuffer(n)}e._xhr.readyState===f.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":31,_process:14,buffer:4,inherits:10,"readable-stream":28}],34:[function(e,t,n){(function(t,r){function c(e,t){this._id=e,this._clearFn=t}var i=e("process/browser.js").nextTick,s=Function.prototype.apply,o=Array.prototype.slice,a={},f=0;n.setTimeout=function(){return new c(s.call(setTimeout,window,arguments),clearTimeout)},n.sInterval)},n.clearTimeout=n.clee.close()},c.prototype.unref=c.prototype.ref=function(){},c.protothis._id)Timeout=t},imeout=-1},n._unrefActivut()},t))},n.setImmediate="function"==e(t))}),t},n.clearImmediate="function"==lete a[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":14,timerBuffer")}},{buffer:4}],36:[function(e,t,n){"use strict";function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this(e,t,n),r}var r=e("punycode"),i=e("./util");n.parse=besolve(t)},n.resject(t):tt.call(e)},n.Url=s;var o=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","	"]),l=["'"].concat(f),c=["%","/","?",";","#"].concat(l),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=e("querystring");s.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),u=-1!==s&&s<e.indexOf("#")?"?":"#",f=e.split(u);f[0]=f[0].replace(/\\/g,"/");var b=e=f.join(u);if(b=b.trim(),!n&&1===e.split("#").length){var w=a.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var E=o.exec(b);if(E){var S=(E=E[0]).toLowerCase();this.protocol=S,b=b.substr(E.length)}if(n||E||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===b.substr(0,2);!x||E&&m[E]||(b=b.substr(2),this.slashes=!0)}if(!m[E]&&(x||E&&!g[E])){for(var T,N,C=-1,k=0;k<h.length;k++)-1!==(L=b.indexOf(h[k]))&&(-1===C||L<C)&&(C=L);-1!==(N=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C))&&(T=b.slice(0,N),b=b.slice(N+1),this.auth=decodeURIComponent(T)),C=-1;for(k=0;k<c.length;k++){var L;-1!==(L=b.indexOf(c[k]))&&(-1===C||L<C)&&(C=L)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var _=this.hostname.split(/\./),R=(k=0,_.length);k<R;k++){var U=_[k];if(U&&!U.match(p)){for(var z="",$=0,J=U.length;$<J;$++)127<U.charCodeAt($)?z+="x":z+=U[$];if(!z.match(p)){var K=_.slice(0,k),Q=_.slice(k+1),G=U.match(d);G&&(K.push(G[1]),Q.unshift(G[2])),Q.length&&(b="/"+Q.join(".")+b),this.hostname=K.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var Y=this.port?":"+this.port:"",Z=this.hostname||"";this.host=Z+Y,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[S])for(k=0,R=l.length;k<R;k++){var et=l[k];if(-1!==b.indexOf(et)){var tt=encodeURIComponent(et);tt===et&&(tt=escape(et)),b=b.split(et).join(tt)}}var nt=b.indexOf("#");-1!==nt&&(this.hash=b.substr(nt),b=b.slice(0,nt));var rt=b.indexOf("?");if(-1!==rt?(this.search=b.substr(rt),this.query=b.substr(rt+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,rt)):t&&(this.search="",this.query={}),b&&(this.pathname=b),g[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Y=this.pathname||"";var it=this.search||"";this.path=Y+it}return this.href=this.format(),this},s.protot"%23"))+r},s.prototy.format()},s.prototype.resolveObject=function(e){if(i.isString(e)){var t=new s;t.parse(e,!1,!0),e=t}for(var n=new s,r=Object.keys(this),o=0;o<r.length;o++){var u=r[o];n[u]=this[u]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),f=0;f<a.length;f++){var l=a[f];"protocol"!==l&&(n[l]=e[l])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var c=Object.keys(e),h=0;h<c.length;h++){var p=c[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",y=n.search||"";n.path=v+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=w||b||n.host&&e.pathname,S=E,x=n.pathname&&n.pathname.split("/")||[],T=(d=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),E=E&&(""===d[0]||""===x[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,x=d;else if(d.length)x||(x=[]),x.pop(),x=x.concat(d),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search))return T&&(n.hostname=n.host=x.shift(),(O=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift())),n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=x.slice(-1)[0],k=(n.host||e.host||1<x.length)&&("."===C||".."===C)||""===C,L=0,A=x.length;0<=A;A--)"."===(C=x[A])?x.splice(A,1):".."===C?(x.splice(A,1),L++):L&&(x.splice(A,1),L--);if(!E&&!S)for(;L--;L)x.unshift("..");!E||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),k&&"/"!==x.join("/").substr(-1)&&x.push("");var O,M=""===x[0]||x[0]&&"/"===x[0].charAt(0);return T&&(n.hostname=n.host=M?"":x.length?x.shift():"",(O=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift())),(E=E||n.host&&x.length)&&!M&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},s.prototypestname=e)}},{"./util":37,punycode:15,querystrinnull==e}indow:{})},{}],39:[function(e,t,n){(fu[o]=s[o]}}(s,functio,n(n.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParserUtils=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1);t.ParserUtils=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.util=new i.Util}return r(e,[{key:"childByNreturn i}}},{key:"childrenByN}return n}},{key:"resolveVastAdTagURI",value:function(e,t){return t?0===e.indexOf("//")?""+location.protocol+e:-1===e.indexOf("://")?t.slice(0,t.lastIndexOf("/"))+"/"+e:e:e}},{key:"parseBoolndexOf(e)}},{key:"parseNodeT").trim()}},{key:"copyNodeAttribbute(e,r)}},{key:"parseDuration",value:function(e){if(null==e)return-1;if(this.util.isNumeric(e))return parseInt(e);var t=e.split(":");if(3!==t.length)return-1;var n=t[2].split("."),r=parseInt(n[0]);2===n.length&&(r+=parseFloat("0."+n[1]));var i=parseInt(60*t[1]),s=parseInt(60*t[0]*60);return isNaN(s)||isNaN(i)||isNaN(r)||3600<i||60<r?-1:s+i+r}},{key:"splitVAST",value:function(e){var t=[],n=null;return e.forEach(function(r,i){if(r.sequence&&(r.sequence=parseInt(r.sequence,10)),1<r.sequence){var s=e[i-1];if(s&&s.sequence===r.sequence-1)return void (n&&n.push(r));delete r.sequence}n=[r],t.push(n)}),t}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Util=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return r(e,[{key:"track",value:function(e,t){this.resolveURLTemplates(e,e).src=e)})}},{key:"resolveURLTemplates",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=[];for(var r in t.ASSETURI&&(t.ASSETURI=this.encodeURIComponentRFC3986(t.ASSETURI)),t.CONTENTPLAYHEAD&&(t.CONTENTPLAYHEAD=this.encodeURIComponentRFC3986(t.CONTENTPLAYHEAD)),t.ERRORCODE&&!/^[0-9]{3}$/.test(t.ERRORCODE)&&(t.ERRORCODE=900),t.CACHEBUSTING=this.leftpad(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=this.encodeURIComponentRFC3986((new Date).toISOString()),t.RANDOM=t.random=t.CACHEBUSTING,e){var i=e[r];if(i){for(var s in t){var o=t[s],u="["+s+"]",a="%%"+s+"%%";i=(i=i.replace(u,o)).replace(a,o)}n.push(i)}}return n}},{key:"encodeURIComponentRFC3ing(16)})}},{key:"leftpad",value:function(e){return e.length<8?this.range(0,8-e.lengreturn"0"}).join("")+e:e}},{key:"ra;return r}},{key:"isNumeric",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},{key:"flat):n)},[])}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Creative=function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.id=e.id||null,this.adId=e.adId||null,this.sequence=e.sequence||null,this.apiFramework=e.apiFramework||null,this.trackingEvents={}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VASTParser=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(10),o=n(7),u=n(0),a=n(21),f=n(1),l=n(31),c={ERRORCODE:900,extensions:[]};t.VASTParser=function(e){function t(){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parserUtils=new u.ParserUtils,e.adParser=new s.AdParser,e.util=new f.Util,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.EventEmitter),i(t,[{key:"addURLTemplateFils.push(e)}},{key:"removeURLTemplateFilers.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFiltilters=[]}},{key:"trackVastError",value:function(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];this.emit("VAST-error",r.apply(void 0,[c,t].concat(i))),this.util.track(e,t)}},{key:"getErrorURLTemplaemplates)}},{key:"fetchVAST",value:function(e){var t=this;return new Promise(function(n,r){t.URLTemplateFiltet){e=t(e)}),t.parentURLs.push(e),t.emit("VAST-resolving",{url:e}),t.urlHandler.get(e,t.fetchingOptions,function(i,s){t.emit("VAST-resolved",{url:e}),i?r(i):n(s)})})}},{key:"initParsingStatus",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.rootURL="",this.remainingAds=[],this.parentURLs=[],this.errorURLTemplates=[],this.rootErrorURLTemplates=[],this.maxWrapperDepth=e.wrapperLimit||10,this.fetchingOptions={timeout:e.timeout,withCredentials:e.withCredentials},this.urlHandler=e.urlhandler||new a.URLHandler}},{key:"getRemainingAds",value:function(e){var t=this;return new Promise(function(n,r){if(0===t.remainingAds.length)return r(new Error("No more ads are available for the given VAST"));var i=e?t.util.flatten(t.remainingAds):t.remainingAds.shift();t.errorURLTemplates=[],t.parentURLs=[],t.resolveAds(i,{wrapperDepth:0,originalUrl:t.rootURL}).then(function(e){var r=t.buildVASTResponse(e);n(r)}).catch(function(e){return r(e)})})}},{key:"getAndParseVAST",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),this.rootURL=e,new Promise(function(r,i){t.fetchVAST(e).then(function(s){n.originalUrl=e,n.isRootVAST=!0,t.parse(s,n).then(function(e){var n=t.buildVASTResponse(e);r(n)}).catch(function(e){return i(e)})}).catch(function(e){return i(e)})})}},{key:"parseVAST",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),new Promise(function(r,i){n.isRootVAST=!0,t.parsee(e);r(n)}).catch(function(e){return i(e)})})}},{key:"buildVASTResponse",value:function(e){var t=new l.VASTResponse;return t.ads=e,t.errorURLTemplates=this.getErrorURLTemplates(),this.completeWrapperResolving(t),t}},{key:"parse",value:function(e,t){var n=this,r=t.resolveAll,i=void 0===r||r,s=t.wrapperSequence,o=void 0===s?null:s,u=t.originalUrl,a=void 0===u?null:u,f=t.wrapperDepth,l=void 0===f?0:f,c=t.isRootVAST,h=void 0!==c&&c;return new Promise(function(t,r){if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)return r(new Error("Invalid VAST XMLDocument"));var s=[],u=e.documentElement.childNodes;for(var f in u){var c=u[f];if("Error"===c.nodeName){var g=n.parserUtils.parseNodeText(c);h?n.rootErrorURLTemplates.push(g):n.errorURLTemplates.push(g)}if("Ad"===c.nodeName){var y=n.adParser.parse(c);y?s.push(y):n.trackVastError(n.getErrorURLTemplates(),{ERRORCODE:101})}}var b=s.length,w=s[b-1];1===b&&null!=o&&w&&!w.sequence&&(w.sequence=o),!1===i&&(n.remainingAds=n.parserUtils.splitVAST(s),s=n.remainingAds.shift()),n.resolveAds(s,{resolveAll:i,wrapperDepth:l,originalUrl:a}).then(function(e){return t(e)}).catch(function(e){return r(e)})})}},{key:"resolveAds",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],r=n.wrapperDepth,i=n.originalUrl;return(new Promise(function(n,s){var o=[]o.push(n)}),n(Promise.alatten(t)}))})).then(function(t){if(!t&&0<e.remainingAds.length){var n=e.remainingAds.shift();return e.resolveAds(n,{wrapperDepth:r,originalUrl:i})}return t})}},{key:"resolveWrappers",value:function(e,t,n){var r=this;return new Promise(function(i,s){if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,i(e);if(t>=r.maxWrapperDepth||-1!==r.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,i(e);e.nextWrapperURL=r.parserUtils.resolveVastAdTagURI(e.nextWrapperURL,n);var o=e.sequence;n=e.nextWrapperURL,r.fetchVAST(e.nextWrapperURL).then(function(s){r.parse(s,{originalUrl:n,wrapperSequence:o,wrapperDepte)}),i(sage,i(e)})}).catch(function(e){return s(e)})})}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;0<=t;t--){var n=e.ads[t];(n.errorCode||0===n.creatives.length)&&(this.trackVastError(n.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:n.errorCode||303},{ERRORMESSAGE:n.errorMessage||""},{extensions:n.extensions},{system:n.system}),e.ads.splice(t,1))}}},{key:"mergeWrapperAdData",value:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),e.creatives.forEach(function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var n in t.trackingEvents[e.type]){var r=t.trackingEvents[e.type][n];e.trackingEvents[n]||(e.trackingEvents[n]=[]),e.trackingEvents[n]=e.trackingEvents[n].concat(r)}}),t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length&&e.creatives.forEach(function(e){"linear"===e.type&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates))}),t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length&&e.creatives.forEach(function(e){"linear"===e.type&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates))}),t.videoClickThroughURLTemplate&&e.creatives.forEach(function(e){"linear"===e.type&&null==e.videoClickThroughURLTemplate&&(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)})}}]),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompanionAd=function r(){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.altText=null,this.companionClickThroughURLTemplate=null,this.companionClickTrackingURLTemplates=[],this.trackingEvents={}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreativeLinear=void 0;var r=n(2);t.CreativeLinear=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="linear",n.duration=0,n.skipDelay=null,n.mediaFiles=[],n.videoClickThroughURLTemplate=null,n.videoClickTrackingURLTemplates=[],n.videoCustomClickURLTemplates=[],n.adParameters=null,n.icons=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Creative),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonLinearAd=function r(){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.id=null,this.width=0,this.height=0,this.expandedWidth=0,this.expandedHeight=0,this.scalable=!0,this.maintainAspectRatio=!0,this.minSuggestedDuration=0,this.apiFramework="static",this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.nonlinearClickThroughURLTemplate=null,this.nonlinearClickTrackingURLTemplates=[],this.adParameters=null}},function(t,n){t.exports=e("events")},function(e,t){function n(e,t){for(var n in e: "+t),n}fun._inc=t}}fun)return n}function A(e,t,n,r){if(r?t[L(t,r)]=n:t[t.length++]=n,e){var i=(n.ownerElement=e).ownerDocument;i&&(r&&B(i,e,r),s=e,o=n,i&&i._inc++,"http://www.w3.org/2000/xmlns/"==o.namespaceURI&&(s._nsMap[o.prefix?o.localName:""]=o.valueres=e[t]}funSibling)}funap={}}function R(){}function U(){}function z(){}function W(){}function X(){}function V(){}function $(){}function J(){}function K(){}function Q(){}fun[t]=n}var i="http://www.w3.org/1999/xhtml",s={},o=s.ELEMENT_NODE=1,u=s.ATTRIBUTE_NODE=2,a=s.TEXT_NODE=3,f=s.CDATA_SECTION_NODE=4,l=s.ENTITY_REFERENCE_NODE=5,c=s.ENTITY_NODE=6,h=s.PROCESSING_INSTRUCTION_NODE=7,p=s.COMMENT_NODE=8,d=s.DOCUMENT_NODE=9,v=s.DOCUMENT_TYPE_NODE=10,m=s.DOCUMENT_FRAGMENT_NODE=11,g=s.NOTATION_NODE=12,y={},b={},w=(y.INDEX_SIZE_ERR=(b[1]="Index size error",1),y.DOMSTRING_SIZE_ERR=(b[2]="DOMString size error",2),y.HIERARCHY_REQUEST_ERR=(b[3]="Hierarchy request error",3)),E=(y.WRONG_DOCUMENT_ERR=(b[4]="Wrong document",4),y.INVALID_CHARACTER_ERR=(b[5]="Invalid character",5),y.NO_DATA_ALLOWED_ERR=(b[6]="No data allowed",6),y.NO_MODIFICATION_ALLOWED_ERR=(b[7]="No modification allowed",7),y.NOT_FOUND_ERR=(b[8]="Not found",8)),S=(y.NOT_SUPPORTED_ERR=(b[9]="Not supported",9),y.INUSE_ATTRIBUTE_ERR=(b[10]="Attribute in use",10));y.INVALID_STATE_ERR=(b[11]="Invalid state",11),y.SYNTAX_ERR=(b[12]="Syntax error",12),y.INVALID_MODIFICATION_ERR=(b[13]="Invalid modification",13),y.NAMESPACE_ERR=(b[14]="Invalid namespace",14),y.INVALID_ACCESS_ERR=(b[15]="Invalid access",15),x.prototype=Error.prototype,n(y,x),T.prototype={len[e]||null.join("")}},N.prot),this[e]},r(N,T),k.prototype={length:0,item:T.prototype.item,gereturn n}},seis,e,n),n},setNis,e,t),t},removthis,t),t},removeNthis,n),n},getNturn null}},M.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!!n&&(!t||t in n)},crea}return r},createDotemId=n,r}},_.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,inthis,e,t)},reeChild(t)},rF(this,e)},ae(e,null)},hasirstChild}s,this,e)}e(),e=t)}},iture(e,t)},hases.length},loturn null},lookupNaturn null},isDefaulPrefix(e)}},n(s,_),n(s,_.prototype),H.prototype={nodeName:"#document",nodeType:d,doctype:null,documentElement:null,_inc:1,innt=this,e},rF(this,e)},this,e,t)},getE=n,!0}),t},creElement=t},createDocumes=new T,e},createTextNode:function(e){var t=new z;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new W;return t.ownerDocument=this,t.appendData(e),t},createCDData(e),t},createProcessingI.data=t,n},creatfied=!0,t},createEntiteName=e,t},creatElement=n},createAlName=t,n}},r(H,_),H.prototype.getElementsByTagName=(q.prototype={nodeType:o,hateNode(e)},gevalue||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},seteNode(n)},removteNode(t)},a}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttriItemNS(e)},removeAttnodeName)},removeAteNode(n)},hasAdeNS(e,t)},getAvalue||""},setAteNode(r)},getAttriemNS(e,t)},getElement(r)}),n})},getElementsB(i)}),r})}}).getElementsByTagName,H.prototype.getElementsByTagNameNS=q.prototype.getElementsByTagNameNS,r(q,_),R.prototype.nodeType=u,r(R,_),U.prototype={data:"",subng(e,e+t)},=e.length},ta(e,0,t)},aror(b[w])},a(e,t,"")},r=n.length}},r(U,_),z.prototype={nodeName:"#text",nodeType:aibling),r}},r(z,U),W.prototype={nodeName:"#comment",nodeType:p},r(W,U),X.prototype={nodeName:"#cdata-section",nodeType:f},r(X,U),V.prototype.nodeType=v,r(V,_),$.prototype.nodeType=g,r($,_),J.prototype.nodeType=c,r(J,_),K.prototype.nodeType=l,r(K,_),Q.prototype.nodeName="#document-fragment",Q.prototype.nodeType=m,r(Q,_),G.prototype.nodeType=h,r(G,_),Y.prototype.serialill(e,t,n)},_.prototype.toString=Z;try{Object.defineProperty&&(Object.defineProperty(N.prototype,"le.$$length}}),Object.defineProperty(_.prototype,"textCone}}(eValu"$$"+t]=n})}catch(e){}t.DOMImplementation=M,t.XMLSerializer=Y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VASTTracker=t.VASTParser=t.VASTClient=void 0;var r=n(3),i=n(32),s=n(34);t.VASTClient=i.VASTClient,t.VASTParser=r.VASTParser,t.VASTTracker=s.VASTTracker},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdParser=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),s=n(12),o=n(13),u=n(14),a=n(16),f=n(19),l=n(0);t.AdParser=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.creativeCompanionParser=new u.CreativeCompanionParser,this.creativeNonLinearParser=new f.CreativeNonLinearParser,this.creativeLinearParser=new a.CreativeLinearParser,this.parserUtils=new l.ParserUtils}return r(e,[{key:"parse",value:function(e){var t=e.childNodes;for(var n in t){var r=t[n];if(-1!==["Wrapper","InLine"].indexOf(r.nodeName)){if(this.parserUtils.copyNodeAttribute("id",e,r),this.parserUtils.copyNodeAttribute("sequence",e,r),"Wrapper"===r.nodeName)return this.parseWrapper(r);if("InLine"===r.nodeName)return this.parseInLine(r)}}}},{key:"parseInLine",value:function(e){var t=this,n=e.childNodes,r=new i.Ad;for(var s in r.id=e.getAttribute("id")||null,r.sequence=e.getAttribute("sequence")||null,n){var o=n[s];switch(o.nodeName){case"Error":r.errorURLTemplates.push(this.parserUtils.parseNodeText(o));break;case"Impression":r.impressionURLTemplates.push(this.parserUtils.parseNodeText(o));break;case"Creatives":this.parserUtils.childrenByName(o,"Creative").forEach(function(e){var n={id:e.getAttribute("id")||null,adId:t.parseCreativeAdIdAttribute(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null};for(var i in e.childNodes){var s=e.childNodes[i];switch(s.nodeName){case"Linear":var o=t.creativeLinearParser.parse(s,n);o&&r.creatives.push(o);break;case"NonLinearAds":var u=t.creativeNonLinearParser.parse(s,n);u&&r.creatives.push(u);break;case"CompanionAds":var a=t.creativeCompanionParser.parse(s,n);a&&r.creatives.push(a)}}});break;case"Extensions":this.parseExtensions(r.extensions,this.parserUtils.childrenByName(o,"Extension"));break;case"AdSystem":r.system={value:this.parserUtils.parseNodeText(o),version:o.getAttribute("version")||null};break;case"AdTitle":r.title=this.parserUtils.parseNodeText(o);break;case"Description":r.description=this.parserUtils.parseNodeText(o);break;case"Advertiser":r.advertiser=this.parserUtils.parseNodeText(o);break;case"Pricing":r.pricing={value:this.parserUtils.parseNodeText(o),model:o.getAttribute("model")||null,currency:o.getAttribute("currency")||null};break;case"Survey":r.survey=this.parserUtils.parseNodeText(o)}}return r}},{key:"parseWrapper",value:function(e){var t=this.parseInLine(e),n=this.parserUtils.childByName(e,"VASTAdTagURI");if(n?t.nextWrapperURL=this.parserUtils.parseNodeText(n):(n=this.parserUtils.childByName(e,"VASTAdTagURL"))&&(t.nextWrapperURL=this.parserUtils.parseNodeText(this.parserUtils.childByName(n,"URL"))),t.creatives.forEach(function(e){if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){t.trackingEvents||(t.trackingEvents={}),t.trackingEvents[e.type]||(t.trackingEvents[e.type]={});var n=function(n){var r=e.trackingEvents[n];t.trackingEvents[e.type][n]||(t.trackingEvents[e.type][n]=[])].push(r)})};for(var r in e.trackingEvents)n(r)}e.videoClickTrackingURLTemplates&&(t.videoClickTrackingURLTemplates||(t.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach(function(e){t.videoClickTrackingURLTemplates.push(e)})),e.videoClickThroughURLTemplate&&(t.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(t.videoCustomClickURLTemplates||(t.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplats.push(e)}))}}),t.nextWrapperURL)return t}},{key:"parseExtensions",value:function(e,t){var n=this;t.forEach(function(t){var r=new s.AdExtension,i=t.attributes,u=t.childNodes;if(t.attributes)for(var a in i){var f=i[a];f.nodeName&&f.nodeValue&&(r.attributes[f.nodeName]=f.nodeValue)}for(var l in u){var c=u[l],h=n.parserUtils.parseNodeText(c);if("#comment"!==c.nodeName&&""!==h){var g=new o.AdExtensionChild;if(g.name=c.nodeName,g.value=h,c.attributes){var y=c.attributes;for(var b in y){var w=y[b];g.attributes[w.nodeName]=w.nodeValue}}r.children.push(g)}}e.push(r)})}},{key:"parseCreativeAdIdAttribd")||null}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ad=function r(){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.id=null,this.sequence=null,this.system=null,this.title=null,this.description=null,this.advertiser=null,this.pricing=null,this.survey=null,this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[],this.extensions=[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdExtension=function r(){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.attributes={},this.children=[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdExtensionChild=function r(){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.name=null,this.value=null,this.attributes={}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreativeCompanionParser=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),s=n(15),o=n(0);t.CreativeCompanionParser=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.parserUtils=new o.ParserUtils}return r(e,[{key:"parse",value:function(e,t){var n=this,r=new s.CreativeCompanion(t);return this.parserUtils.childrenByName(e,"Companion").forEach(function(e){var t=new i.CompanionAd;t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.companionClickTrackingURLTemplates=[],n.parserUtils.childrenByName(e,"HTMLResource").forEach(function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=n.parserUtils.parseNodeText(e)}),n.parserUtils.childrenByName(e,"IFrameResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=n.parserUtils.parseNodeText(e)}),n.parserUtils.childrenByName(e,"StaticResource").forEach(function(r){t.type=r.getAttribute("creativeType")||0,n.parserUtils.childrenByName(e,"AltTextdeText(e)}),t.staticResource=n.parserUtils.parseNodeText(r)}),n.parserUtils.childrenByName(e,"TrackingEvents").forEach(function(e){n.parserUtils.childrenByName(e,"Tracking").forEach(function(e){var r=e.getAttribute("event"),i=n.parserUtils.parseNodeText(e);r&&i&&(null==t.trackingEvents[r]&&(t.trackingEvents[r]=[]),t.trackingEvents[r].push(i))})}),n.parserUtils.childrenByName(e,"CompanionClickTracking").forEach(function(e){t.companionClickTrackingURLTemplates.push(n.parserUtils.parseNodeText(e))}),t.companionClickThroughURLTemplate=n.parserUtils.parseNodeText(n.parserUtils.childByName(e,"CompanionClickThrough")),t.companionClickTrackingURLTemplate=n.parserUtils.parseNodeText(n.parserUtils.childByName(e,"CompanionClickTracking")),r.variations.push(t)}),r}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreativeCompanion=void 0;var r=n(2);t.CreativeCompanion=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="companion",n.variations=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Creative),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreativeLinearParser=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),s=n(17),o=n(18),u=n(0);t.CreativeLinearParser=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.parserUtils=new u.ParserUtils}return r(e,[{key:"parse",value:function(e,t){var n=this,r=void 0,u=new i.CreativeLinear(t);u.duration=this.parserUtils.parseDuration(this.parserUtils.parseNodeText(this.parserUtils.childByName(e,"Duration")));var a=e.getAttribute("skipoffset");if(null==a)u.skipDelay=null;else if("%"===a.charAt(a.length-1)&&-1!==u.duration){var l=parseInt(a,10);u.skipDelay=u.duration*(l/100)}else u.skipDelay=this.parserUtils.parseDuration(a);var p=this.parserUtils.childByName(e,"VideoClicks");p&&(u.videoClickThroughURLTemplate=this.parserUtils.parseNodeText(this.parserUtils.childByName(p,"ClickThrough")),this.parserUtils.childrenByName(p,"ClickTracking").forEach(function(e){u.videoClickTrackingURLTemplates.push(n.parserUtils.parseNodeText(e))}),this.parserUtils.childrenByName(p,"CustomClick").forEach(function(e){u.videoCustomClickURLTemplates.push(n.parserUtils.parseNodeText(e))}));var d=this.parserUtils.childByName(e,"AdParameters");d&&(u.adParameters=this.parserUtils.parseNodeText(d)),this.parserUtils.childrenByName(e,"TrackingEvents").forEach(function(e){n.parserUtils.childrenByName(e,"Tracking").forEach(function(e){var t=e.getAttribute("event"),i=n.parserUtils.parseNodeText(e);if(t&&i){if("progress"===t){if(!(r=e.getAttribute("offset")))return;t="%"===r.charAt(r.length-1)?"progress-"+r:"progress-"+Math.round(n.parserUtils.parseDuration(r))}null==u.trackingEvents[t]&&(u.trackingEvents[t]=[]),u.trackingEvents[t].push(i)}})}),this.parserUtils.childrenByName(e,"MediaFiles").forEach(function(e){n.parserUtils.childrenByName(e,"MediaFile").forEach(function(e){var t=new o.MediaFile;t.id=e.getAttribute("id"),t.fileURL=n.parserUtils.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.apiFramework=e.getAttribute("apiFramework"),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);var r=e.getAttribute("scalable");r&&"string"==typeof r&&("true"===(r=r.toLowerCase())?t.scalable=!0:"false"===r&&(t.scalable=!1));var i=e.getAttribute("maintainAspectRatio");i&&"string"==typeof i&&("true"===(i=i.toLowerCase())?t.maintainAspectRatio=!0:"false"===i&&(t.maintainAspectRatio=!1)),u.mediaFiles.push(t)})});var v=this.parserUtils.childByName(e,"Icons");return v&&this.parserUtils.childrenByName(v,"Icon").forEach(function(e){var t=new s.Icon;t.program=e.getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=n.parseXPosition(e.getAttribute("xPosition")),t.yPosition=n.parseYPosition(e.getAttribute("yPosition")),t.apiFramework=e.getAttribute("apiFramework"),t.offset=n.parserUtils.parseDuration(e.getAttribute("offset")),t.duration=n.parserUtils.parseDuration(e.getAttribute("duration")),n.parserUtils.childrenByName(e,"HTMLResource").forEach(function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=n.parserUtils.parseNodeText(e)}),n.parserUtils.childrenByName(e,"IFrameResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=n.parserUtils.parseNodeText(e)}),n.parserUtils.childrenByName(e,"StaticResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=n.parserUtils.parseNodeText(e)});var r=n.parserUtils.childByName(e,"IconClicks");r&&(t.iconClickThroughURLTemplate=n.parserUtils.parseNodeText(n.parserUtils.childByName(r,"IconClickThrough")),n.parserUtils.childrenByName(r,"IconClickTracking").forEach(function(e){t.iconClickTrackingURLTemplates.push(n.parserUtils.parseNodeText(e))})),t.iconViewTrackingURLTemplate=n.parserUtils.parseNodeText(n.parserUtils.childByName(e,"IconViewTracking")),u.icons.push(t)}),u}},{key:"parseXPosition",value:function(e){return-1!==["left","right"].indexOf(e)?e:parseInt(e||0)}},{key:"parseYPositInt(e||0)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=function r(){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.program=null,this.height=0,this.width=0,this.xPosition=0,this.yPosition=0,this.apiFramework=null,this.offset=null,this.duration=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.iconClickThroughURLTemplate=null,this.iconClickTrackingURLTemplates=[],this.iconViewTrackingURLTemplate=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaFile=function r(){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.id=null,this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null,this.scalable=null,this.maintainAspectRatio=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreativeNonLinearParser=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(20),s=n(6),o=n(0);t.CreativeNonLinearParser=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.parserUtils=new o.ParserUtils}return r(e,[{key:"parse",value:function(e,t){var n=this,r=new i.CreativeNonLinear(t);return this.parserUtils.childrenByName(e,"TrackingEvents").forEach(function(e){var t=void 0,i=void 0;n.parserUtils.childrenByName(e,"Tracking").forEach(function(e){t=e.getAttribute("event"),i=n.parserUtils.parseNodeText(e),t&&i&&(null==r.trackingEvents[t]&&(r.trackingEvents[t]=[]),r.trackingEvents[t].push(i))})}),this.parserUtils.childrenByName(e,"NonLinear").forEach(function(e){var t=new s.NonLinearAd;t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=n.parserUtils.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=n.parserUtils.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=n.parserUtils.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),n.parserUtils.childrenByName(e,"HTMLResource").forEach(function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=n.parserUtils.parseNodeText(e)}),n.parserUtils.childrenByName(e,"IFrameResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=n.parserUtils.parseNodeText(e)}),n.parserUtils.childrenByName(e,"StaticResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=n.parserUtils.parseNodeText(e)});var i=n.parserUtils.childByName(e,"AdParameters");i&&(t.adParameters=n.parserUtils.parseNodeText(i)),t.nonlinearClickThroughURLTemplate=n.parserUtils.parseNodeText(n.parserUtils.childByName(e,"NonLinearClickThrough")),n.parserUtils.childrenByName(e,"NonLinearClickTrackingeText(e))}),r.variations.push(t)}),r}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreativeNonLinear=void 0;var r=n(2);t.CreativeNonLinear=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(teof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.type="nonlinear",n.variations=[roto__=t)}(t,r.Creative),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URLHandler=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(22),s=n(23),o=n(30);t.URLHandler=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.flash=new i.FlashURLHandler,this.node=new s.NodeURLHandler,this.xhr=new o.XHRURLHandler}return r(e,[{key:"get",value:function(e,t,n){return n||("function"==typeof t&&(n=t),t={}),t.urlhandler&&t.urlhandler.supported()?t.urlhandler.get(e,t,n):"undefined"==typeof window||null===window?this.node.get(e,t,n):this.xhr.supported()?this.xhr.get(e,t,n):this.flash.supported()?this.flash.get(e,t,n):n(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.FlashURLHandler=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return r(e,[{key:"xdr",value:function(){var e=void 0;return window.XDomainRequest&&(e=new XDomainRequest),e}},{key:"supporhis.xdr()}},{key:"get",value:function(e,t,n){var r="function"==typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0;if(!r)return n(new Error("FlashURLHandler: Microsoft.XMLDOM format not supported"));r.async=!1;var i=this.xdr();i.open("GET",e),i.timeout=t.timeout||0,i.withCredentials=t.withCredentials||!1,i.send(),i.onprogress=function(){},i.onload=function(){r.loadXML(i.responseText),n(null,r)}}}]),e}()},function(e,t,n){"ufault":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NodeURLHandler=voe(t,r),t}}(),i=f(n(24)),s=f(n(25)),o=f(n(26)),u=f(n(27)),a=n(28);t.NodeURLHandler=")}(this)}return r(e,[{key:"get",value:function(e,t,n){var r,f="https:"===(e=i.default.parse(e)).protocol?u.default:o.default;if("file:"===e.protocol)s.default.readFile(e.pathname,"utf8",function(e,t){if(e)return n(e);var r=(new a.DOMParser).parseFromString(t);n(null,r)});else{var d=void 0,v="",m=f.get(e.href,function(e){e.on("data",function(e){var n=void 0;v+=e,clearTimeout(n),n=setTimeout(g,t.timeout||12e4)}),e.on("end",function(){clearTimeout(d);var e=(new a.DOMParser).parseFromString(v);n(null,e)})});m.t(d),n(e)});r.abort()});d=setTimeout(g,t.timeout||12e4)}}}]),e}()},function(t,n){t.exports=e("url")},function(t,n){t.exports=e("fs")},function(t,n){t.exports=("https")},functd(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new f,s=n.domBuilder||new i,u=n.errorHandler,a=n.locator,l=n.xmlns||{},c={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&s.setDocumentLocator(a),r.errorHandler=functction(){}}if(!e){if(s instanceof i)return s;e=s}var r={},u=e instanceof Function;return n=n||{},a("warning"),a("error"),a("fatalError"),r}(u,0,a),r.domBuilder=n.domBuilder||s,/\/x?html?$/.test(t)&&(c.nbsp="",c.copy="",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,l,c):r.errorHandler.error("invalid doc source"),s.doc},i.prototype={sr.systemId)},uteNode(h)}.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processin),a(this,n)},ignorabion(e,t,n){locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocneNumber),a(this,r)},startCDATA:function(){this.cdata=is.cdata=,a(this,i)}},warning:function(e){console.warn("[xmldom warning]	"+e,o(this.locas.locator))locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".reeturn null}});var f=n(29).XMLReader,l=t.DOMImplementation=n(8).DOMImplementation;t.XMLSerializer=n(8).XMLSerializer,t.DOMParser=r},function(e,t){fumnNumber,t}function v(e,t,n,r,i,p){for(var d,v=++t,m=s;;){var g=e.charAt(v);switch(g){case"=":if(m===o)d=e.slice(t,v),m=a;else{if(m!==u)throw new Error("attribute equal must after attrName");m=a}break;case"'":case'"':if(m===a||m===o){if(m===o&&(p.warning('attribute value must after "="'),d=e.slice(t,v)),t=v+1,!(0<(v=e.indexOf(g,t))))throw new Error("attribute value no end '"+g+"' match");y=e.slice(t,v).replace(/&#?\w+;/g,i),n.add(d,y,t-1),m=l}else{if(m!=f)throw new Error('attribute value must after "="');y=e.slice(t,v).replace(/&#?\w+;/g,i),n.add(d,y,t),p.warning('attribute "'+d+'" missed start quot('+g+")!!"),t=v+1,m=l}break;case"/":switch(m){case s:n.setTagName(e.slice(t,v));case l:case c:case h:m=h,n.closed=!0;case f:case o:case u:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return p.error("unexpected end of input"),m==s&&n.setTagName(e.slice(t,v)),v;case">":switch(m){case s:n.setTagName(e.slice(t,v));case l:case c:case h:break;case f:case o:"/"===(y=e.slice(t,v)).slice(-1)&&(n.closed=!0,y=y.slice(0,-1));case u:m===u&&(y=d),m==f?(p.warning('attribute "'+y+'" missed quot(")!!'),n.add(d,y.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===r[""]&&y.match(/^(?:disabled|checked|selected)$/i)||p.warning('attribute "'+y+'" missed value!! "'+y+'" instead!!'),n.add(y,y,t));break;case a:throw new Error("attribute value missed!!")}return v;case"":g=" ";default:if(g<=" ")switch(m){case s:n.setTagName(e.slice(t,v)),m=c;break;case o:d=e.slice(t,v),m=u;break;case f:var y=e.slice(t,v).replace(/&#?\w+;/g,i);p.warning('attribute "'+y+'" missed quot(")!!'),n.add(d,y,t);case l:m=c}else switch(m){case u:n.tagName,"http://www.w3.org/1999/xhtml"===r[""]&&d.match(/^(?:disabled|checked|selected)$/i)||p.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),n.add(d,d,t),t=v,m=o;break;case l:p.warning('attribute space is required"'+d+'"!!');case c:m=o,t=v;break;case a:m=f,t=v;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}v++}}function m(e,t,n){for(var r=e.tagName,i=null,s=e.length;s--;){var o=e[s],u=o.qName,a=o.value;if(0<(h=u.indexOf(":")))var f=o.prefix=u.slice(0,h),l=u.slice(h+1),c="xmlns"===f&&l;else f=null,c="xmlns"===(l=u)&&"";o.localName=l,!1!==c&&(null==i&&(i={},y(n,n={})),n[c]=i[c]=a,o.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(c,a))}for(s=e.length;s--;)(f=(o=e[s]).prefix)&&("xml"===f&&(o.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==f&&(o.uri=n[f||""]));var h;0<(h=r.indexOf(":"))?(f=e.prefix=r.slice(0,h),l=e.localName=r.slice(h+1)):(f=null,l=e.localName=r);var p=e.uri=n[f||""];if(t.startElement(p,l,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,!0;if(t.endElement(p,l,r),i)for(f in i)t.endPres}return t+1}function y(e,t){for(var n in e)t[n]=e[n]}function b(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(i=e.indexOf("-->",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDAT[1])return r}(e,t),o=s.length;if(1<o&&/!doctype/i.test(s[0][0])){var u=s[1][0],a=3<o&&/^public$/i.test(s[2][0])&&s[3][0],f=4<o&&s[4][0],l=s[o-1];return n.startDTD(u,a&&a.replace(/^(['"])(.*?)\1$/,"$2"),f&&f.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].lenroto__=t,e}var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$"),s=0,o=1,u=2,a=3,f=4,l=5,c=6,h=7;p.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),y(t,t={}),functimber=t-p+1}for(var a,f,l,c,h,p=0,y=0,S=/.*(?:\r\n?|\n)|.*$/g,x=r.locator,T=[{currentNSMap:t}],N={},C=0;;){try{var k=e.indexOf("<",C);if(k<0){if(!e.substr(C).match(/^\s*$/)){var L=r.doc,A=L.createTextNode(e.substr(C));L.appendChild(A),r.currentElement=A}return}switch(C<k&&o(k),e.charAt(k+1)){case"/":var O=e.indexOf(">",k+3),_=e.substring(k+2,O),H=T.pop();O<0?(_=e.substring(k+2).replace(/[\s<].*/,""),i.error("end tag name: "+_+" is not complete:"+H.tagName),O=k+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),i.error("end tag name: "+_+" maybe not complete"),O=k+1+_.length);var I=H.localNSMap,q=H.tagName==_;if(q||H.tagName&&H.tagName.toLowerCase()==_.toLowerCase()){if(r.endElement(H.uri,H.localName,_),I)for(var R in I)r.endPrefixMapping(R);q||i.fatalError("end tag name: "+_+" is not match the current start tagName:"+H.tagName)}else T.push(H);O++;break;case"?":x&&u(k),O=w(e,k,r);break;case"!":x&&u(k),O=b(e,k,r,i);break;default:x&&u(k);var U=new E,z=T[T.length-1].currentNSMap,W=(O=v(e,k,U,z,s,i),U.length);if(!U.closed&&(a=e,f=O,l=U.tagName,h=void 0,null==(h=(c=N)[l])&&((h=a.lastIndexOf("</"+l+">"))<f&&(h=a.lastIndexOf("</"+l)),c[l]=h),h<f)&&(U.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),x&&W){for(var X=d(x,{}),$=0;$<W;$++){var J=U[$];u(J.offset),J.locator=d(x,{})}r.locator=X,m(U,r,z)&&T.push(U),r.locator=x}else m(U,r,z)&&T.push(U);"http://www.w3.org/1999/xhtml"!==U.uri||U.closed?O++:O=g(e,O,U.tagName,s,r)}}catch(e){i.error("element parse error: "+e),O=-1}C<O?C=O:o(Math.max(k,C)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},E.prototypis.t:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},S({},S.prototype)ins[t];return n}),t.XMLReader=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.XHRURLHandler=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return r(e,[{key:"xhr",value:function(){try{var e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return console.log("Error in XHRURLHandler support check:",e),null}}},{key:"supported",value:function(){return!!this.xhr()}},{key:"get",value:function(e,t,n){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return n(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var r=this.xhr();r.open("GET",e),r.timeout=t.timeout||0,r.withCredentials=t.withCredentials||!1,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?n(null,r.responseXML):n(new Error("XHRURLHandler: "+r.statusText)))},r.send()}catch(e){n(new Error("XHRURLHandler: Unexpected error"))}}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VASTResponse=function r(){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.ads=[],this.errorURLTemplates=[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VASTClient=void 0;var r=Or])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),o=n(1),u=n(3);t.VASTClient=function(){function e(t,n,r){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.cappingFreeLunch=t||0,this.cappingMinimumTimeInterval=n||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new u.VASTParser,this.util=new o.Util,this.storage=r||new s.Storage,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return i(e,[{key:"getParser",value:function(){return this.vastParser}},{key:"hasRemainngAds.length}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=Date.now();return(n=r(this.defaultOptions,n)).hasOwnProperty("resolveAll")||(n.resolveAll=!1),this.totalCallsTimeout<i?(this.totalCalls=1,this.totalCallsTimeout=i+36e5):this.totalCalls++,new Promise(function(r,s){if(t.cappingFreeLunch>=t.totalCalls)return s(new Error("VAST call canceled  FreeLunch capping not reached yet "+t.totalCalls+"/"+t.cappingFreeLunch));var o=i-t.lastSuccessfulAd;if(o<0)t.lastSuccessfulAd=0;else if(o<t.cappingMinimumTimeInterval)return s(new Error("VAST call canceled  ("+t.cappingMinimumTimeInterval+")ms minimum interval reached"));t.vastParser.getAndParseVAST(e,n).then(function(e){ren(e){return s(e)})})}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"total-calalls-timeout",e)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=null,s={data:{}urn thishis.data).length},removeItem:function(e){delete data[e],this.length=Object.keys(this.da{},this.length=0}};t.Storage=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.storage=this.initStorage()}return r(e,[{key:"i|(i=s).clear(),i}},{key:"isStoraremoveItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{.storage.clear()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VASTTracker=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),s=n(5),o=n(7),u=n(6),a=n(1);t.VASTTracker=function(e){function t(e,n,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var f=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));for(var p in f.ad=n,f.creative=r,f.variation=o,f.util=new a.Util,f.muted=!1,f.impressed=!1,f.skippable=!1,f.skipDelayDefault=-1,f.trackingEvents={},f.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],f._alreadyTriggeredQuartiles={},f.creative.trackingEvents){var d=f.creative.trackingEvents[p];f.trackingEvents[p]=d.slice(0)}return f.creative instanceof s.CreativeLinear?(f.setDuration(f.creative.duration),f.skipDelay=f.creative.skipDelay,f.linear=!0,f.clickThroughURLTemplate=f.creative.videoClickThroughURLTemplate,f.clickTrackingURLTemplates=f.creative.videoClickTrackingURLTemplates):(f.skipDelay=-1,f.linear=!1,f.variation&&(f.variation instanceof u.NonLinearAd?(f.clickThroughURLTemplate=f.variation.nonlinearClickThroughURLTemplate,f.clickTrackingURLTemplates=f.variation.nonlinearClickTrackingURLTemplates):f.variation instanceof i.CompanionAd&&(f.clickThroughURLTemplate=f.variation.companionClickThroughURLTemplate,f.clickTrackingURLTemplates=f.variation.companionClickTrackingURLTemplates))ullAd=Date.now()}),f}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.EventEmitter),r(t,[{key:"setDuration)/100}}},{key:"setProgress",value:function(e){var t=this,n=this.skipDelay||this.skipDelayDefault;if(-1===n||this.skippable||(e<n?this.emit("skip-countdown",n-e):(this.skippable=!0,this.emit("skip-countdown",0))),this.linear&&0<this.assetDuration){var r=[];if(0<e){var i=Math.round(e/this.assetDuration*100);for(var s in r.push("start"),r.push("progress-"+i+"%"),r.push("progress-"+Math.round(e)),this.quartiles)this.isQuartileReached(s,this.quartiles[s],e)&&(r.push(s),this._alreadyTriggeredQuartilese){t.track(e,!0)}),e<this.progress&&this.track("rewind")}this.progress=e}},{key:"isQuartles[e]&&(r=!0),r}},{key:"setMuted",value:function(e){this.muted!==e&&this.track(e?"mute":"unmute"),this.muted=e}},{key:"setPaused",value:function(e){this.paused!==e&&this.track(e?"pause":"resume"),this.paused=e}},{key:"setFullscreen",value:function(e){this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen"),this.fullscreen=e}},{key:"setExpand",value:function(e){this.expanded!==e&&this.track(e?"expand":"collapse"),this.expanded=e}},{key:"sehis.skipDelay=e)}},{key:"trackImpression",value:function(){this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView"))}},{key:"errorWithCode",value:function(e){this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:e})}},{keyrack("complete")}},{Linear":"close")}},rackingEvents=[]}},{key:"click",value:function(){if(this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates),this.clickThroughURLTemplate){var e=this.linear?{CONTENTPLAYHEAD:this.progressFormatted()}:{},t=this.util.resolveURLTemplates([this.clickThroughURLTemplate],e)[0];this.emit("clickthrough",t)}}},{key:"track",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];"closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close");var n=this.trackingEvents[e],r=-1<this.emitAlwaysEvents.indexOf(e);n?(this.emit(e,""),this.trackURLs(n)):r&&this.emit(e,""),t&&(delete this.trackingEvents[e],r&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}},{key:"trackURLs",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(t.ASSETURI=this.creative.mediaFiles[0].fileURL),t.CONTENTPLAYHEAD=this.progressFormatted()),this.util.track(e,t)}},{key:"progressFormatted",value:function(){var e=parseInt(this.progress),t=e/3600;t.length<2&&(t="0"+t);var n=e/60%60;n.length<2&&(n="0"+n);var r=e%60;return r.length<2&&(r="0"+n),t+":"+n+":"+r+"."+parseInt(100*(this.progress-e))}}]),t}()}])})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{events:7,fs:3,http:30,htte.hasOwnProperty},{}],41:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=e("./VastClientWrapper"),s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ns=".vast-cli",this.debug="prod"!==uvpjs.Configuration.env,this.adCallTemplate=t.adCallTemplate;var r=uvpjs.mediaCapabilities.isDesktop();this.platformString=r?"desktop":"mobile_web",this.appValueString=r?"cbssports":"cbssports_m",this.player=t.player,this.model=this.player.CVI_Mgr.cviModel,this.eventsMgr=this.player.eventsMgr,this.playerEvents=this.eventsMgr.eventTypes,this.id3OwnerId=t.id3OwnerId||"com.cbsinteractive.sbvast",this.id=this.player.getVidContId(),this.playheadPosSec=null,this.playStates={PLAYING:uvpjs.mediaCapabilities.PLAYING,PAUSED:uvpjs.mediaCapabilities.PAUSED},this.timeoutWindow=5e3,this.quartileMap={firstQuartile:25,midpoint:50,thirdQuartile:75},this.hCue=function(e){return n.hCuepoint(e)},this.hProg=function(e){return n.hProgress(e)},this.hPEvt=function(e){return n.hPlayerEvent(e)},this.parseCompleteCallback=function(e){return n.handleVastData(e)},this.vastCliWrapper=null,this.adPodInProgress=!1,this.adInProgress=!1,this.currPodIndex=0,this.adTimeZero=null,this.currAdPos=0,this.currAdDur=null,this.lastCue=null,this.contentOpen=!0,this.currAdCall=null,this.adTimeoutHandle=null,this.paused=!1;var i=this.playerEvents,s={};s[i.VIDEO_STATE_CHANGE]=function(e){return n.handleStateChange(e)},s[i.CONTROL_MUTE]=function(e){return n.handleMuteAction(e)},s[i.CONTROL_UNMUTE]=function(e){return n.handleUnmuteAction(e)},s[i.CONTROL_FULLSCREEN]=function(e){return n.handleFullscreenChange(e)},this.playerEventDelegates=s,this.init()}var t,n,s;return t=e,(n=[{ketClientWrapper()}},{key:"killPod",value:function(){this.adInProgress&&this.openAd(!1),this.adPodInProgress&&this.openAdPod(!1),this.openContent(!0),this.monitorEventsForAdPlay(!1),this.killVastClientWrapper(),this.adTimeZero=null,this.currAdPos=0,this.currAdDur=0}},{key:"closeTracker",value:function(){this.adInProgress&&this.tracker&&this.tracker.close(),this.killVastClientWrapper()}},{key:"openContent",value:function(e){var t=e?this.playerEvents.CONTENT_START:this.playerEvents.CONTENT_END;this.contentOpen!==e&&(this.contentOpen=e,this.dispatch(t,{contentData:this.model.getContentVideoState()}))}},{key:"openAd",value:function(e,t){var n=e?this.playerEvents.AD_START:this.playerEvents.AD_END,r=this.tracker;e&&r&&r.trackImpression(),!e&&r&&r.complete(),this.adInProgress=e,this.dispatch(n,t||{})}},{key:"openAdPod",value:function(e){var t=e?this.playerEvents.AD_POD_START:this.playerEvents.AD_POD_END;this.adPodInProgress=e,this.dispatch(t,{adPod:this.assembleAdPodInfo()}),!e&&this.model.setAdVideoState()}},{key:"handleStateChange",value:function(e){var t=this,n=e.payload.newState;if(n===this.playStates.PLAYING&&this.paused&&this.adTimeoutHandle&&this.killAdTimeoutHandle(),this.adInProgress&&n===this.playStates.PAUSED){this.paused=!0;var r=this.currAdDur-(this.playheadPosSec-this.adTimeZero);r&&!isNaN(r)?this.adTimeoutHandle=setTimeout(function(){return t.handleAdTimeout()},Math.round(1e3*r)):this.killPod()}else n!==this.playStates.PAUSED&&(this.paused=!1)}},{key:"handleMuteAction",value:function(){var e=this.tracker;e&&e.setMuted(!0)}},{key:"handleUnmuteAction",value:function(){var e=this.tracker;e&&e.setMuted(!0)}},{key:"handleFullscreenChange",value:function(e){var t=e.payload.isFs,n=this.tracker;n&&n.setFullscreen(t)}},{key:"handl){this.killPod()}},{key:"killAdTimmeoutHandle=null}},{key:"handleVastData",value:function(e){var t=this,n=e&&e.ads&&e.ads[0],r=n&&n.creatives[0];e&&n&&r?(this.killAdTimeoutHandle(),this.currAdPos++,this.populateAdVideoState(n,r),this.dispatch(this.playerEvents.AD_LOADED,{adCallUrl:this.currAdCall,adAssetUrl:null,adData:this.model.getAdVideoState(),imaAdData:this.assembleAdInfo(n,r)}),setTimeout(function(){t.model.setAdPlaybackStateItems({duration:t.currAdDur}),t.createTracker(n,r),t.openAd(!0,{podAdCount:1,adData:t.model.getAdVideoState(),currAdPod:null,adCallUrl:t.currAdCall})},1),this.adTimeoutHandle=setTimeout(function(){return t.handleAdTimeout()},1e3*this.currAdDur+this.timeoutWindow)):this.debug&&this.log("VAST fetch/parse error for cue: ",this.lastCue)}},{key:"handleAdStart",value:function(e){var t=this;this.killAdTimeoutHandle(),this.adPodInProgress||(this.openContent(!1),this.openAdPod(!0),this.monitorEventsForAdPlay(!0)),this.adInProgress&&this.openAd(!1),this.vastCliWrapper&&this.killVastClientWrapper(),e.id&&""!==e.id&&(this.adTimeZero=this.playheadPosSec,this.currAdDur=.001*e.duration,e.id&&this.createVastClientWrapper(e.id),this.adTimeoutHandle=setTimeout(function(){return t.handleAdTimeout()},this.currAdDur+this.timeoutWindow))}},{key:"handleTrackerEvent",value:function(e){this.quartileMap[e]&&this.dispatch(this.playerEvents.AD_QUARTILE,{percent:this.quartileMap[e]})}},{key:"hPlayerEvent",value:function(e){var t=this.playerEventDelegates[e.type];"function"==typeof t&&t(e)}},{key:"hProgress",value:function(e){this.playheadPosSec=e.payload.currentTime;var t=this.tracker,n=this.adTimeZero?this.playheadPosSec-this.adTimeZero:null;this.adInProgress&&n&&t&&t.setProgress(n),n&&this.model.setAdPlaybackStateItems({currentTime:n})}},{key:"hCuepoint",value:function(e){var t=e.payload,n=null;if(!this.paused){if(this.isValidCuePoint(t.name))try{var r=t.data,i=r.substring(r.indexOf("{"),r.lastIndexOf("}")+1);n=JSON.parse(i)}catch(e){this.debug&&console.warn("ID3 metadata could not be parsed: "+e.message)}n&&this.isValidCue(n)&&(this.lastCue=n,this.debug&&console.log("CUEPOINT: ",n),"AD_START"===n.event?this.handleAdStart(n):"POD_END"===n.event&&this.adInProgress&&this.killPod())}}},{key:"isValidCue",value:function(e){return!this.lastCue||(this.lastCue.ts!==e.ts||this.lastCue.event!==e.event)&&!(this.lastCue.ts>e.ts)}},{key:"createTracker",value:function(e,t){this.vastCliWrapper&&this.vastCliWrapper.createTracker(e,t);var n=this.tracker;n&&n.setDuration(this.currAdDur)}},{key:"createVastClientWrapper",value:function(e){var t=this;this.vastCliWrapper=new i({parseCompleteCallback:function(e){return t.handleVastData(e)},trackerEventCallback:function(e){return t.handleTrackerEvent(e)}}),this.vastCliWrapper.fetchAndParse(this.getAdCall(e))}},{key:"killVastClitCliWrapper=null}},{key:"getAdCall",value:function(e){var t=this.adCallTemplate.replace("[placeholder]",this.getCorrelator()).replace("[ADID]",e).replace("[PLATFORM]",this.platformString).replace("[APP_VALUE]",this.appValueString);return this.currAdCall=t,this.currAdCall}},{keyent(e,t,this.id)}},{key:"getCorrelator",value:function(){var e=String(Math.round(1e15+9e15*Math.random()));if(e.length<16)for(;e.length<16;)e+="0";return 16<e.length&&(e=e.substr(0,17)),e}},{key:"assemblid",adCount:NaN}}},{key:"assembleAdInfo",value:function(e,t){var n=t.mediaFiles&&t.mediaFiles.length&&t.mediaFiles[0];return{adId:e.id||"",adPodInfo:this.assembleAdPodInfo(),adSystem:e.system&&e.system.value||"",advertiserName:e.advertiser||"",apiFramework:t.apiFramework||n&&n.apiFramework||"",contentType:n&&n.mimeType||"",creativeAdId:t.adId||"",creativeId:t.id||"",dealId:"",description:e.description||"",duration:this.currAdDur||NaN,height:NaN,mediaUrl:"",minSuggestedDuration:NaN,skipTimeOffset:t.skipDelay||NaN,surveyUrl:e.survey,title:e.title,traffickingParams:null,traffickingParametersString:"",uiElements:null,universalAdIdRegistry:"",universalAdIdValue:"",vastMediaHeight:NaN,vastMediaWidth:NaN,width:NaN,wrapperAdIds:null,wrapperAdSystems:null,wrapperCreativeIds:null,isLinear:"linear"===t.type}}},{key:"getAdVideoStateInfo",value:function(e,t){return{adPosition:this.currAdPos,adVideoTitle:e.title,duration:this.currAdDur,adType:"mid",adClipID:"mid_"+this.currPodIndex++,adVideoId:e.id,creativeId:t.id,isCustomClickTrackingUsed:!1,adAssetUrl:""}}},{key:"populateAdoStateInfo(e,t))}},{key:"isVals.id3OwnerId===e}},{key:"monitorEventsForAdPlay",value:function(e){var t=this,n=(e?"add":"remove")+"EventListener",r=this.playerEventDelegates,i=e?this.hPEvt:null;for(var s in r)this.player[n](s+this.ns,i);window[n]("beforeunload",function(){return t.closeTracker()},!1)}},{key:"listenForCuepointsAndProgress",value:function(e){var t=e?"add":"remove",n=this.playerEvents,r=e?this.hCue:null,i=e?this.hProg:null;this.player["".concat(t,"EventListener")](n.VIDEO_CUEPOINT+this.ns,r),this.player["".concat(t,"EventListener")](n.VIDEO_PROGRESS+this.ns,i)}},{key:"log",value:function(e,t){this.debug&&(console.log("%c"+e,"font-weight:bold; color: #69c; font-size: 14px"),t&&console.dir(t))}},{key:"init",value:function(){this.listenForCuepointsAndProgress(!0),this.debug&&console.log("Vast tracker ready...",{id3OwnerId:this.id3OwnerId,platform:this.platformString,appValue:this.appValueString})}},{per.tracker:null}}])&&r(t.prototype,n),s&&r(t,s),e}();t.exports=s},{"./VastClientWrapper":42}],42:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=e("vast-client"),s=i.VASTClient,o=i.VASTTracker,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=new s,this.vastObject=null,this.pTracker=null,this.clientOptions={},this.trackerEventCallback=t.trackerEventCallback,this.parseCompleteCallback=t.parseCompleteCallback}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){this.client=null,this.pTracker=null,this.parseCompleteCallback=Function.prototype,this.trackerEventCallback=Function.prototype}},{key:"fetchAndParse",value:function(e){var t=this;this.client.get(e,this.clientOptions).then(function(e){return t.handleResult(e)}).catch(function(){t.handleResult(null)})}},{key:"createTracker",value:function(e,t){this.pTracker=new o(this.client,e,t),this.subscribeToTrackerQuartileEvents()}},{key:"hathis.vastObject)}},{key:"hTrEventCallback(e)}},{key:"subscribeToTrackerQuartileEvents",value:function(){var e=["firstQuartile","midpoint","thirdQuartile"];if(this.pTracker)for(var t=e.length;t--;)this.pTracker.on(e[t],this.hTrackerEvent.bind(this,e[t]))}},{rn this.pTracker}}])&&r(t.prototype,n),i&&r(t,i),e}();t.exports=u},{"vastvpjsVastClient")},{"./UvpjsVastClient":41}]},{},[43]),CBSi.namespace=function(){var e=arguments,t=null,n,r,i;for(n=0;n<e.length;n+=1){i=e[n].split("."),t=CBSi;for(r=i[0]=="CBSi"?1:0;r<i.length;r+=1)t[i[r]]=t[i[r]]||{},t=t[i[r]]}return t},CBSi.namespace("CBSi.app.VideoPlayer.Client"),CBSi.app.VideoPlayer.Client=function(e){this.log=CBSi.log?CBSi.log:function(e){},this.utils=CBSi.util.Utils?CBSi.util.Utils:!1,this.config={playerID:"_"+Math.floor(Math.random()*(new Date).getTime()),objName:"cbsiPlayer",id:"mycbsiplayer",container:"myAlternativeContent",compAdsEnabled:!0,adContainer:"adCnt",compAdW:300,compAdH:250,width:896,height:504,xPos:0,yPos:0,partner:"cbssports",partnerM:"cbssports_m",autoplay:!0,silent:!1,inline:!1,enableControls:!0,logWindow:!1,isDvrSegment:!1,isMobile:!1,isPhone:!1,isTablet:!1,isSSL:!1,continuousPlay:!0,isUVPJSSupported:!0,windowTop:window,dataLimit:!1,dataOffset:!1,filters:!1,sortBy:!1,protocol:window.location.protocol,host:window.location.hostname,imageServer:"https://sports.cbsimg.net",mediaServer:"https://www.cbssports.com",uvpc:"https://www.cbssports.com/api/content/video/config/?cfg=desktop_base&env=prod",uvpcM:"https://www.cbssports.com/api/content/video/config/?cfg=mobile_base&env=prod",env:"prod",includeFullScreenButton:!0,source:"",externalDataLoad:!1,liveSegDuration:6,partnerID:"",ptpl:undefined,plyr:undefined,useBrowserControls:!1,forceMute:!1,cmpGroups:!1,useDaiSsb:undefined,description_url:undefined,backupStream:undefined},this.state={currentVideo:{},playlist:[],history:[],videoData:{data:{},length:0},channelData:{},channelList:[],hasAutoPlayed:!1,hasPrerollPlayed:!1,hasVideoPlayed:!1,isPlayerReady:!1,isPlayerDrawn:!1,isPlayerDrawing:!1,defaultsLoaded:!1,isInAd:!1,displayState:"normal",loadQueue:[],loadAttempts:{}};for(var t in e)switch(t){case"state":case"config":for(var n in e[t])this[t][n]=e[t][n];break;default:this[t]=e[t]}var r=document.getElementsByTagName("head")[0],i=document.createElement("meta");i.name="viewport",i.content="width=device-width, initial-scale=1.0, maximum-scale=1.0",r.appendChild(i);var s=document.createElement("link");s.rel="stylesheet",s.href=this.config.imageServer+"/css/media/video/player/skin/default-min.css",s.type="text/css",r.appendChild(s);var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=this.config.protocol+"//vidtech.cbsinteractive.com/uvpjs/"+this.config.uvpjsVersion+"/CBSI-PLAYER.js";var u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(o,u),this.config.ns="."+this.config.objName,typeof this.config.vwidth=="undefined"&&(this.config.vwidth=this.config.width),typeof this.config.vheight=="undefined"&&(this.config.vheight=this.config.height),this.config.isSSL=this.config.protocol=="https:";var a=this.utils.getUAObject(navigator.userAgent.toLowerCase());this.config.ua=a;if(a.id=="ipod"||a.id=="ipad"||a.id=="iphone"||a.id=="darwin"||a.id=="android")this.config.isMobile=!0,this.config.isTablet=a.id=="ipad"||a.id=="android"&&(a.str.indexOf("tablet")>-1||a.str.indexOf("mobile")==-1),this.config.isPhone=!this.config.isTablet,this.config.partner=this.config.partnerM;this.config.UVPC_BASE=this.config.protocol+"//www.cbssports.com/api/content/video/config/?cfg=desktop_base&env="+this.config.env,this.config.isMobile&&(this.config.uvpc=this.config.uvpcM+","+this.config.uvpc,this.config.UVPC_BASE=this.config.protocol+"//www.cbssports.com/api/content/video/config/?cfg=mobile_base&ver="+this.config.env);var f=this.config.uvpc.split(","),l=[];for(var c=0;c<f.length;c++){if(f[c]==""||f[c].replace(/\s/,"")=="")continue;l.push(f[c])}this.config.UVPC_BASE!=""&&l.push(this.config.UVPC_BASE),this.config.uvpc=l,this.dom={videoContainer:document.getElementById(this.config.id),videoAdContainer:null,overlaysContainer:null,playerContainer:document.getElementById(this.config.container),adContainer:typeof this.config.adContainer=="string"?document.getElementById(this.config.adContainer):this.config.adContainer,preloadContainer:null,overlays:{}},typeof this.adDisplayer!="undefined"&&(this.adDisplayer.html5=!0,this.adDisplayer.utils.setPlyr(this.config.plyr),this.adDisplayer.init(),this.config.compAdsEnabled&&this.adDisplayer&&this.adDisplayer.enabled&&this.adDisplayer.setCompanionAd({w:this.config.compAdW,h:this.config.compAdH},this.dom.adContainer)),typeof this.chartBeat!="undefined"&&this.chartBeat&&this.chartBeat.enabled,typeof this.castSender!="undefined"&&this.castSender&&this.castSender.enabled&&(this.castSender.isHTML5=!0,this.castSender.init()),typeof this.adobePass!="undefined"&&this.adobePass&&this.adobePass.enabled&&this.adobePass.init(),typeof this.help!="undefined"&&this.help&&this.help.enabled&&this.help.init(),this.preload(),this.log("CBSi.app.VideoPlayer.Client","constructor")},CBSi.app.VideoPlayer.Cliead(),this.draw()},CBSi.app.VideoPlayer.Client.prototype.preload=function(){this.log("CBSi.app.VideoPlayer.Client","preload");var e=this.config.vwidth,t=this.config.vheight,n=document.getElementById(this.config.id);n.innerHTML="";var r=document.createElement("div");r.className="preloadCnt",typeof this.config.preload.image=="undefined"&&(this.config.preload.image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=");var i=document.createElement("img");i.className="preloadImage",i.src=this.config.preload.image;var s=document.createElement("div");s.className="preloadTitleBg";var o=document.createElement("div");o.className="preloadTitle",o.innerHTML=typeof this.config.preload.title!="undefined"?this.config.preload.title:"";var u=document.createElement("div");u.className="preloadDuration",u.style.display="none",u.innerHTML=typeof this.config.preload.duration!="undefined"?this.config.preload.duration:"";var a=document.createElement("div");a.className="preloadText",a.innerHTML="Loading";if(i.complete)r.appendChild(i),r.appendChild(s),r.appendChild(o),u.innerHTML!=""&&r.appendChild(u),r.appendChild(a),this.dom.preloadContainer=r,this.dom.playerContainer.parentNode.insertBefore(this.dom.preloadContainer,this.dom.playerContainer.previousSibling),this.resizePlayer(),i.onload=function(){};else{var f=this;i.onload=function(){r.appendChild(i),r.appendChild(s),r.appendChild(o),u.innerHTML!=""&&r.appendChild(u),r.appendChild(a),f.dom.preloadContainer=r,f.dom.playerContainer.parentNode.insertBefore(f.dom.preloadContainer,f.dom.playerContainer.previousSibling),f.resizePlayer(),i.onload=functie.display="none"},this.resizePlayer(e,t),typeof this._preload!="undefined"&&this._preload()},CBSi.app.VideoPlayer.Client.prototype.load=function(){this.log("CBSi.app.VideoPlayer.Client","load"),typeof this.clock!="undefined"&&this.clock.start(this.config.stime),typeof this._load!="undefined"&&this._load()},CBSi.app.VideoPlayer.Client.prototype.draw=function(){this.log("CBSi.app.VideoPlayer.Client","draw"),this.state.isPlayerDrawing=!0,this.state.playlist.length&&(this.state.currentVideo=this.state.videoData.data[this.state.playlist[0]][0]);if(typeof uvpjs=="undefined"){clearTimeout(this.state.uvpLoadIntId),this.state.uvpLoadIntId=setTimeout(this.config.objName+".draw()",1e3);return}this._addInternalOverlays(),this._overrideUVPC(),this.config.sessOpts={partner:this.config.partner,uvpc:this.config.uvpc,skin:!1,customCSS:this.config.imageServer+"/css/media/video/player/skin/blank.css",usesIMA:!0,usesTealium:!0,playsInline:this.config.inline,id3OwnerIds:"com.cbsinteractive.sbvast,com.cbsinteractive.vtg,com.cbssports.svt",capLevelToPlayerSize:!0,useBrowserControls:this.config.useBrowserControls};for(var e in this.config)e!="sessOpts"&&(this.config.sessOpts[e]=this.config[e]);this.mgr=new uvpjs.getVideoManager,this.mgr.initialize(this.config.sessOpts,this.handleUVPEvent("onVideoManagerReady"),this.handleUVPEvent("onVideoManagerError"));return},CBSi.app.VideoPlayer.Client.prototype.erase=function(){this.log("CBSi.app.VideoPlayer.Client","erase"),this.dom.videoContainer.innerHTML=""},CBSi.app.VideoPlayer.Client.prototype.addPtplToAdCall=function(e){return this.log("CBSi.app.VideoPlayer.Client","addPtplToAdCall"),this.log("CBSi.app.VideoPlayer.Client","addPtplToAdCall: config ptpl = "+this.config.ptpl),this.log("CBSi.app.VideoPlayer.Client","addPtplToAdCall: adCall = "+e),typeof this.config.ptpl!="undefined"&&this.config.ptpl!=""&&typeof e!="undefined"&&e.indexOf("&ptpl")==-1?(e=e+"&ptpl="+this.config.ptpl,this.log("CBSi.app.VideoPlayer.Client","addPtplToAdCall: adCall ptpl added= "+e)):this.log("CBSi.app.VideoPlayer.Client","addPtplToAdCall: adCall ptpl unchanged= "+e),e},CBSi.app.VideoPlayer.Client.prototype.addSessionAndSubses=function(e){this.log("CBSi.app.VideoPlayer.Client","addSessionAndSubses: adCall = "+e);var t=this.utils.getAdValuesFromSession();return this.log("CBSi.app.VideoPlayer.Client","addSessionAndSubses: adSessionValues:"+t),typeof e!="undefined"&&t&&e.indexOf("subses")==-1&&e.indexOf("session")==-1?(e=this.updateAdCallCustParams(e,"&session="+t[0]+"&subses="+t[1]),this.log("CBSi.app.VideoPlayer.Client","addSessionAndSubses: adCall updated= "+e)):this.log("CBSi.app.VideoPlayer.Client","addSessionAndSubses: adCall unchanged"),e},CBSi.app.VideoPlayer.Client.prototype.addDescriptionUrl=function(e){return this.log("CBSi.app.VideoPlayer.Client","addDescriptionUrl"),this.log("CBSi.app.VideoPlayer.Client","addDescriptionUrl: config description_url = "+this.config.description_url),this.log("CBSi.app.VideoPlayer.Client","addDescriptionUrl: adCall = "+e),typeof this.config.description_url!="undefined"&&this.config.description_url!=""&&typeof e!="undefined"&&e.indexOf("&description_url")==-1?(e=e+"&description_url="+this.config.description_url,this.log("CBSi.app.VideoPlayer.Client","addDescriptionUrl: adCall description_url added= "+e)):typeof this.config.description_url!="undefined"&&this.config.description_url!=""&&typeof e!="undefined"&&e.indexOf("description_url=[description_url]")!=-1?(e=e.replace("description_url=[description_url]","description_url="+this.config.description_url),this.log("CBSi.app.VideoPlayer.Client","addDescriptionUrl: adCall description_url replaced= "+e)):this.log("CBSi.app.VideoPlayer.Client","addDescriptionUrl: adCall description_url unchanged= "+e),e},CBSi.app.VideoPlayer.Client.prototype.updateAdCallCustParams=function(e,t){this.log("CBSi.app.VideoPlayer.Client","updateAdCallCustParams"),this.log("CBSi.app.VideoPlayer.Client","updateAdCallCustParams: newParamsStr = "+t),this.log("CBSi.app.VideoPlayer.Client","updateAdCallCustParams: adCall = "+e);var n=e?e.indexOf("&cust_params"):-1;t=window.encodeURIComponent(t);if(n>=0){var r=e.indexOf("&",n+1),i=e.substring(n,r);e=e.replace(i,i+t)}else e+="&cust_params="+t;return e},CBSi.app.VideoPlayer.Client.prototype.addPlyrToCustParams=function(e){return this.log("CBSi.app.VideoPlayer.Client","addPlyrToCustParams"),this.log("CBSi.app.VideoPlayer.Client","addPlyrToCustParams: config plyr = "+this.config.plyr),this.log("CBSi.app.VideoPlayer.Client","addPlyrToCustParams: adCall = "+e),typeof this.config.plyr!="undefined"&&this.config.plyr!=""&&typeof e!="undefined"?(e=this.updateAdCallCustParams(e,"&plyr="+this.config.plyr),this.log("CBSi.app.VideoPlayer.Client","addPlyrToCustParams: adCall changed to: "+e)):this.log("CBSi.app.VideoPlayer.Client","addPlyrToCustParams: adCall unchanged"),e},CBSi.app.VideoPlayer.Client.prototype.addVguid=function(e){return this.log("CBSi.app.VideoPlayer.Client","addVguid"),this.log(window.utag),this.log(window.utag.data),this.log("CBSi.app.VideoPlayer.Client","addVguid: adCall = "+e),typeof window.utag!="undefined"&&typeof window.utag.data!="undefined"&&typeof window.utag.data.pageViewGuid!="undefined"&&window.utag.data.pageViewGuid!=""&&typeof e!="undefined"&&e.indexOf("vguid")==-1?(e=e+"&vguid="+window.utag.data.pageViewGuid,this.log("CBSi.app.VideoPlayer.Client","addVguid: adCall vguid added= "+e)):typeof window.utag!="undefined"&&typeof window.utag.data!="undefined"&&typeof window.utag.data.pageViewGuid!="undefined"&&window.utag.data.pageViewGuid!=""&&typeof e!="undefined"&&e.indexOf("vguid%3Dvguid")!=-1?(e=e.replace("vguid%3Dvguid","vguid%3D"+window.utag.data.pageViewGuid),this.log("CBSi.app.VideoPlayer.Client","addVguid: adCall vguid replaced= "+e)):this.log("CBSi.app.VideoPlayer.Client","addVguid: adCall vguid unchanged= "+e),e},CBSi.app.VideoPlayer.Client.prototype.getVguid=function(){this.log("CBSi.app.VideoPlayer.Client","getVguid");var e=undefined;return typeof window.utag!="undefined"&&typeof window.utag.data!="undefined"&&typeof window.utag.data.pageViewGuid!="undefined"&&window.utag.data.pageViewGuid!=""&&(this.log("CBSi.app.VideoPlayer.Client","getVguid: "+window.utag.data.pageViewGuid),e=window.utag.data.pageViewGuid),e},CBSi.app.VideoPlayer.Client.pr.api.stopVideo()},CBSi.app.VideoPlayer.Client.prototype.playVideo=function(e,t,n,r,i,s,o,u,a){this.log("CBSi.app.VideoPlayer.Client","playVideo: "+e+", "+t+", "+n+", "+r+", "+i+", "+s+", "+o+", "+u+", "+a);if(isNaN(e)&&e==this.state.currentVideo.video_id&&this.state.currentVideo.is_live&&this.state.loadAttempts.hasOwnProperty(e)){this.log("CBSi.app.VideoPlayer.Client","playVideo: trying to play same video "+this.state.currentVideo.video_id);return}this.stopVideo();if(!this.utils.exists(this.config.objName+".state.videoData.data['"+e+"']")&&typeof o=="undefined"&&typeof u=="undefined"&&typeof this.config.useDaiSsb=="undefined"){this.handleUVPEvent("onStateChange")(110);return}typeof o!="undefined"?this.state.currentVideo.vio=o:this.utils.exists(this.config.objName+".state.videoData.data['"+e+"']")?(this.state.currentVideo=this.state.videoData.data[e][0],!isNaN(e)&&this.state.currentVideo.story_type=="segment"&&(this.config.isDvrSegment=!0)):this.state.currentVideo={video_id:e,type:"url"};if(typeof u!="undefined")for(var f in u){if(u[f]==""){delete u[f];continue}u[f]=u[f].replace("RANDOM",Math.floor(Math.random()*(new Date).getTime()))}else u={adCall:this.getAdUrl(this.state.currentVideo)};u.adCall=this.addDescriptionUrl(u.adCall),u.adCall=this.addPtplToAdCall(u.adCall),u.adCall=this.addPlyrToCustParams(u.adCall),u.adCall=this.addSessionAndSubses(u.adCall);if(this.config.isPhone&&typeof this.state.currentVideo.exclude_mobile!="undefined"&&this.state.currentVideo.exclude_mobile){this.handleUVPEvent("onStateChange")(150);return}t=typeof t!="undefined"?t:this.config.partner,n=typeof n!="undefined"?n:typeof this.state.currentVideo.type!="undefined"?this.state.currentVideo.type:"id",r=typeof r!="undefined"?r:typeof this.state.currentVideo.is_live!="undefined"?Boolean(this.state.currentVideo.is_live):!1,i=typeof i!="undefined"?i:"akamai_hd",s=typeof s!="undefined"?s:this.config.autoplay,o=typeof o!="undefined"?o:typeof this.state.currentVideo.vio!="undefined"?this.state.currentVideo.vio:undefined,u=typeof u!="undefined"?u:typeof this.state.currentVideo.aio!="undefined"?this.state.currentVideo.aio:undefined,a=typeof a!="undefined"?a:0;if(n=="id"||n==""||typeof n=="undefined")e=this.getPid(e);if(n=="id"&&(typeof e=="undefined"||e=="")){this.handleUVPEvent("onStateChange")(150);return}this.handlePlayerEvent(this.config.objName,"onPlayVideo",{id:e,partner:t,type:n,isLive:r,liveCDN:i,autoplay:s,videoInfo:o,adInfo:u,sTime:a});var l={vidContId:this.config.id,partner:t,type:uvpjs.mediaCapabilities.RP_IMA,isLive:r};typeof this.state.currentVideo.title!="undefined"&&this.state.currentVideo.title!=""&&(l.videoTitle=this.state.currentVideo.title),typeof this.state.currentVideo.series_title!="undefined"&&this.state.currentVideo.series_title!=""&&(l.seriesTitle=this.state.currentVideo.series_title),typeof this.state.currentVideo.episode_title!="undefined"&&this.state.currentVideo.episode_title!=""&&(l.videoTitle=this.state.currentVideo.episode_title),typeof this.state.currentVideo.hd1080p_thumbnail!="undefined"&&this.state.currentVideo.hd1080p_thumbnail!=""&&(l.videoThumbnail=this.state.currentVideo.hd1080p_thumbnail);if(typeof this.state.currentVideo.suppress_ads!="undefined"&&this.state.currentVideo.suppress_ads||this.config.suppressAds)l.type=uvpjs.mediaCapabilities.RP_URL;typeof this.state.currentVideo.rcoStartTime!="undefined"&&this.state.currentVideo.rcoStartTime&&(l.startTime=this.state.currentVideo.rcoStartTime);if(n=="url"){if(typeof u!="undefined")for(var c in u)l[c]=u[c];if(typeof o!="undefined"){for(var c in o)l[c]=o[c];if(l.assetURL==""){r?this.handleUVPEvent("onStateChange")(160):this.handleUVPEvent("onStateChange")(150);return}}}else n=="id"&&(l.video_id=this.state.currentVideo.video_id,l.pid=e);if(typeof this.state.currentVideo.transcript!="undefined"&&this.state.currentVideo.transcript.length>0)for(var h in this.state.currentVideo.transcript){var p=this.state.currentVideo.transcript[h];if(p.format=="webvtt-text"&&p.data!=""){var d=this.config.source||"cbssports";l.closedCaptionPath=this.config.protocol+"//"+window.location.hostname+"/player/vtt-service/"+d+"/"+this.state.currentVideo.video_id+"/direct.vtt"}else if(p.format=="webvtt"&&p.data!=""){var v=window.btoa(p.data);l.closedCaptionPath=this.config.protocol+"//"+window.location.hostname+"/player/vtt/"+v+".vtt"}}else typeof this.config.closedCaptionPath!="undefined"&&this.config.closedCaptionPath!=""&&(l.closedCaptionPath=this.config.closedCaptionPath);typeof this.state.currentVideo.duration!="undefined"&&this.state.currentVideo.duration!=""&&(l.duration=this.state.currentVideo.duration);if(isNaN(e)&&(typeof this.state.currentVideo.is_live=="undefined"||this.state.currentVideo.is_live)&&typeof this.config.useDaiSsb!="undefined"&&this.config.useDaiSsb!=""){this.log("CBSi.app.VideoPlayer.Client","playVideo: useDaiSsb"),typeof this.config.useDaiSsb=="string"&&(this.config.useDaiSsb=JSON.parse(this.config.useDaiSsb)),l.type=this.config.useDaiSsb.type,l.assetKey=this.config.useDaiSsb.assetKey;if(this.utils.exists(this.config.objName+".state.videoData.data['"+e+"']")){var m=this.state.videoData.data[e][0];if(typeof m.chromecast!="undefined"&&m.chromecast!=""&&m.chromecast.indexOf("dai.google.com")!=-1){var g=new URL(m.chromecast),y=g.pathname.split("/");typeof y[4]!="undefined"&&y[4]!=""&&y[4]!=this.config.useDaiSsb.assetKey&&(l.assetKey=y[4])}}l.duration=-1,this.state.currentVideo.is_live=!0,l.isLive=!0,delete l.assetURL;if(typeof this.config.useDaiSsb.adTagParameters!="undefined"&&this.config.useDaiSsb.adTagParameters!=""){if(typeof this.config.useDaiSsb.adTagParameters.cust_params!="undefined"&&this.config.useDaiSsb.adTagParameters.cust_params!=""){this.log("CBSi.app.VideoPlayer.Client","playVideo: custParams:"+this.config.useDaiSsb.adTagParameters.cust_params);var b=this.utils.getAdValuesFromSession();this.log("CBSi.app.VideoPlayer.Client","playVideo: adSessionValues:"+b),b&&(this.config.useDaiSsb.adTagParameters.cust_params=this.config.useDaiSsb.adTagParameters.cust_params.replace("&session=6&","&session="+b[0]+"&"),this.config.useDaiSsb.adTagParameters.cust_params=this.config.useDaiSsb.adTagParameters.cust_params.replace("&subses=4&","&subses="+b[1]+"&"));var w=this.getVguid();w&&(this.config.useDaiSsb.adTagParameters.cust_params=this.config.useDaiSsb.adTagParameters.cust_params.replace("vguid=vguid","vguid="+w));var E=l.adCall.replace("&cust_params=&","&cust_params="+encodeURIComponent(this.config.useDaiSsb.adTagParameters.cust_params)+"&");this.log("CBSi.app.VideoPlayer.Client","playVideo: rcoAdCallUpdated:"+E),l.adCall=E}l.adTagParameters=this.config.useDaiSsb.adTagParameters}}this.log("CBSi.app.VideoPlayer.Client","playVideo: "+JSON.stringify(l)),this.refreshPreview(),this.api.destroyPlaylist(),this.log("CBSi.app.VideoPlayer.Client","playVideo: config: "+JSON.stringify({isDvrSegment:this.config.isDvrSegment,hasPrerollPlayed:this.state.hasPrerollPlayed,configAutoplay:this.config.autoplay}));if(s||this.config.autoplay||this.state.hasPrerollPlayed){this.skinMgr!=null&&(this.skinMgr._isVideoCued=!1);try{!this.config.isDvrSegment&&typeof this.config.useDaiSsb!="undefined"&&this.config.useDaiSsb!=""&&!this.state.hasPrerollPlayed&&!this.config.autoplay?(this.log("CBSi.app.VideoPlayer.Client","playVideo: play preroll ad"),this.state.hasPrerollPlayed=!0,this.api.loadAndPlayResource({type:uvpjs.mediaCapabilities.RP_IMA,adCall:l.adCall,vidContId:"cbsiVideoContainer"})):(this.log("CBSi.app.VideoPlayer.Client","playVideo: loadAndPlayResource"),this.log("CBSi.app.VideoPlayer.Client","playVideo: assetKey="+l.assetKey),this.api.loadAndPlayResource(l))}catch(S){this.log("CBSi.app.VideoPlayer.Client","playVideo: error loading rco: "+S)}}else this.log("CBSi.app.VideoPlayer.Client","playVideo: loadAndCueResource"),this.skinMgr!=null&&(this.skinMgr._setupPreview(),this.skinMgr._isVideoCued=!0)},CBSi.app.VideoPlayer.Client.prototype.onAdError=function(e){this.log("CBSi.app.VideoPlayer.Client","onAdError: adErrorEvent="+e),this.log(e.getError()),this.adsManager&&this.adsManager.destroy()},CBSi.app.VideoPlayer.Client.prototype.loadUrl=function(e){this.log("CBSi.app.VideoPlayer.Client","loadUrl: url="+e),typeof e!="undefined"&&e.length>0&&(this.config.useDaiSsb.assetUrl=e),this.config.continuousPlay&&this.state.playlist.length?this.playVideo(this.state.playlist[0],this.config.partner,undefined,undefined,undefined,!0):!this.config.continuousPlay&&this.state.playlist.length?this.playVideo(this.state.playlist[0],this.config.partner,undefined,undefined,undefined,!1):this.playVideo(this.state.currentVideo.video_id,this.config.partner,undefined,undefined,undefined,!1)},CBSi.app.VideoPlayer.Client.prototype.requestLiveStream=function(e,t){this.log("CBSi.app.VideoPlayer.Client","requestLiveStream: assetKey apiKey="+e+" "+t);var n=new google.ima.dai.api.LiveStreamRequest;n.assetKey=e||this.config.useDaiSsb.assetKey,n.apiKey=t||"",this.streamManager.requestStream(n)},CBSi.app.VideoPlayer.Client.prototype.requestPreroll=function(e){this.log("CBSi.app.VideoPlayer.Client","requestPreroll: adTagUrl="+e);var t=new google.ima.AdsRequest;t.adTagUrl=e,t.linearAdSlotWidth=640,t.linearAdSlotHeight=400,this.adsLoader.requestAds(t)},CBSi.app.VideoPlayer.Client.prototype.onStreamEvent=function(e){window.cbsiPlayer.log("CBSi.app.VideoPlayer.Client","onStreamEvent: e="),window.cbsiPlayer.log(e);switch(e.type){case google.ima.dai.api.StreamEvent.Type.LOADED:window.cbsiPlayer.log("Stream loaded"),window.cbsiPlayer.loadUrl(e.getStreamData().url);break;case google.ima.dai.api.StreamEvent.Type.ERROR:window.cbsiPlayer.log("Error loading stream, playing backup stream."+e),window.cbsiPlayer.loadUrl(window.cbsiPlayer.config.backupStream);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:window.cbsiPlayer.log("Ad Break Started");break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:window.cbsiPlayer.log("Ad Break Ended");break;default:}},CBSi.app.VideoPlayer.Client.prototype.onAdsManagerLoaded=function(e){window.cbsiPlayer.log("CBSi.app.VideoPlayer.Client","onAdsManagerLoaded: adsManagerLoadedEvent="+e),adsManager=e.getAdsManager(window.cbsiPlayer.dom.videoContainer),adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,window.cbsiPlayer.onAdError),adsManager.addEventListener(google.ima.AdEvent.Type.CONTENuse requested.")}),adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(e){window.cbsiPlayer.log("Content resume requested."),window.cbsiPlayer.requestLiveStream(window.cbsiPlayer.config.useDaiSsb.assetKey,null)});try{adsManager.init(640,360,google.ima.ViewMode.NORMAL),adsManager.start()}catch(t){window.cbsiPlayer.log("adError",t)}},CBSi.app.VideoPlayer.Client.prototype.resizePlayer=function(e,t,n,r,i,s){this.log("CBSi.app.VideoPlayer.Client","resizePlayer: w="+e+", h="+t+", vW="+n+", vH="+r+", x="+i+", y="+s),e=typeof e!="undefined"?e:this.state.width,t=typeof t!="undefined"?t:this.state.height,n=typeof n!="undefined"?n:e,r=typeof r!="undefined"?r:t,i=typeof i!="undefined"?i:0,s=typeof s!="undefined"?s:0;for(var o in this.dom.overlays){var u=this.dom.overlays[o];u.style.width=n+"px",u.style.height=r+"px"}var a=this.dom.preloadContainer;if(a){a.style.width=n+"px",a.style.height=r+"px";var f=this.dom.preloadContainer.getElementsByClassName("preloadImage")[0];if(f){var l=this.utils.gcd(f.width,f.height),c=isNaN(f.width/l)?16:f.width/l,h=isNaN(f.height/l)?9:f.height/l;f.width=r/h*c<n?r/h*c:e,f.height=f.width!=n?r:n/c*h,f.style.margin=(r-f.height)/2+"px "+(n-f.width)/2+"px"}}this.state.width=e,this.state.height=t,this.state.videoWidth=n,this.state.videoHeight=r,this.state.xOffset=i,this.state.yOffset=s,this.dom.playerContainer.style.width=n+"px",this.dom.playerContainer.style.height=r+"px";if(this.skinMgr!=null){var p=this.skinMgr,f=p._queryByElementName(p.css.PREVIEW_THUMB);if(f){var l=this.utils.gcd(f.naturalWidth,f.naturalHeight),c=isNaN(f.naturalWidth/l)?16:f.naturalWidth/l,h=isNaN(f.naturalHeight/l)?9:f.naturalHeight/l;f.width=r/h*c<n?r/h*c:n,f.height=f.width!=n?r:n/c*h,f.style.margin=(r-f.height)/2+"px "+(n-f.width)/2+"px"}}if(typeof this.help!="undefined"&&this.help&&this.help.enabled)try{this.help.resizePlayer(e,t,n,r,i,s)}catch(d){this.log("CBSi.app.VideoPlayer.Client","resizePlayer: error calling Help add-in handler: "+d)}if(typeof this.castSender!="undefined"&&this.castSender&&this.castSender.enabled)try{this.castSender.resizePlayer(e,t,n,r,i,s)}catch(d){this.log("CBSi.app.VideoPlayer.Client","resizePlayer: error calling Chromecast add-in handler: "+d)}},CBSi.app.VideoPlayer.Client.prototype.refreshPreview=function(){this.log("CBSi.app.VideoPlayer.Client","refreshPreview");if(this.skinMgr!=null){var e=this.skinMgr;e._currThumbnailURL=this.config.imageServer+"/images/video/cbssports-slate.jpg",typeof this.state.currentVideo.hd1080p_thumbnail!="undefined"&&this.state.currentVideo.hd1080p_thumbnail!=""&&this.state.videoWidth>1280||!this.state.videoWidth?e._currThumbnailURL=this.state.currentVideo.hd1080p_thumbnail:typeof this.state.currentVideo.hd720p_thumbnail!="undefined"&&this.state.currentVideo.hd720p_thumbnail!=""&&this.state.videoWidth<=1280&&this.state.videoWidth>640?e._currThumbnailURL=this.state.currentVideo.hd720p_thumbnail:typeof this.state.currentVideo.large_thumbnail!="undefined"&&this.state.currentVideo.large_thumbnail!=""&&this.state.videoWidth<=640&&this.state.videoWidth>320?e._currThumbnailURL=this.state.currentVideo.large_thumbnail:typeof this.state.currentVideo.medium_thumbnail!="undefined"&&this.state.currentVideo.medium_thumbnail!=""&&this.state.videoWidth<=320&&this.state.videoWidth>160?e._currThumbnailURL=this.state.currentVideo.medium_thumbnail:typeof this.state.currentVideo.small_thumbnail!="undefined"&&this.state.currentVideo.small_thumbnail!=""&&this.state.videoWidth<=160&&this.state.videoWidth>80?e._currThumbnailURL=this.state.currentVideo.small_thumbnail:typeof this.state.currentVideo.micro_thumbnail!="undefined"&&this.state.currentVideo.micro_thumbnail!=""&&this.state.videoWidth<=80&&this.state.videoWidth>0&&(e._currThumbnailURL=this.state.currentVideo.micro_thumbnail);var t=e._queryByElementName(e.css.PREVIEW_THUMB);if(t){t.src=e._currThumbnailURL;if(t.complete)this.resizePlayer(),t.onload=function(){};else{var n=this;t.onload=function(){n.resizePlayer(),t.onload=functis.PREVIEW_THUMB)}}e._currTitle=typeof this.state.currentVideo.title!="undefined"&&this.state.currentVideo.title!=""?this.state.currentVideo.title:"Title Not Available",e._queryByElementName(e.css.TITLE_TEXT).innerHTML=e._currTitle,e._currDuration=typeof this.state.currentVideo.duration!="undefined"&&this.state.currentVideo.duration!=""?this.state.currentVideo.duration:"",e._queryByElementName(e.css.DURATION_TEXT).innerHTML=e._currDuration;if(!e._hasHidden(e.css.SHARE_BAR)){var r=e._getShareURL();r!=e._currShareURL&&(e._currShareURL=r,e._getShortURL(e._currShareURL,e._onGetShareURL.bind(e)));var i=e._getEmbedURL();i!=e._currEmbedURL&&(e._currEmbedURL=i,e._getShortURL(e._currEmbedURL,e._onGetEmbedURL.bind(e)))}}},CBSi.app.VideoPlayer.Client.prototype.addVideoAdSessionValues=function(e){this.log("CBSi.app.VideoPlayer.Client","addVideoAdSessionValues: "+JSON.stringify(e));if(typeof this.adDisplayer=="undefined")return;var t=this.adDisplayer.xfpObj;for(var n in e)t[n]=e[n]},CBSi.app.VideoPlayer.Client.prototype.removeVideoAdSessionValues=function(e){this.log("CBSi.app.VideoPlayer.Client","removeVideoAdSessionValues: "+JSON.stringify(e));if(typeof this.adDisplayer=="undefined")return;var t=this.adDisplayer.xfpObj;for(var n in e)typeof t[n]!="undefined"&&delete t[n]},CBSi.app.VideoPlayer.Client.prototype.getURL=function(e){this.log("CBSi.app.VideoPlayer.Client","getURL: "+e);if(e&&this.utils.exists(this.config.objName+".state.videoData.data['"+e+"']")){var t=this.state.videoData.data[e];return t.length&&typeof t[0].source!="undefined"?(this.log("CBSi.app.VideoPlayer.Client","getURL: return: "+t[0].source.url),t[0].source.url):0}return 0},CBSi.app.VideoPlayer.Client.prototype.getAdTemplate=function(e){this.log("CBSi.app.VideoPlayer.Client","getAdTemplate");var t={PARTNER:this.config.isMobile?this.config.partnerM:this.config.partner,"{partner}":this.config.isMobile?this.config.partnerM:this.config.partner,"{mediaReferenceId}":typeof e.guid!="undefined"&&e.guid!=""?e.guid.toString():e.video_id.toString(),RANDOM:Math.floor(Math.random()*(new Date).getTime())};return t},CBSi.app.VideoPlayer.Client.prototype.getAdUrl=function(e,t){this.log("CBSi.app.VideoPlayer.Client","getAdUrl: "+e.video_id);if(typeof e.ad_url!="undefined")return e.ad_url;if(typeof this.api!="undefined"){if(typeof t=="undefined"||t=="")t="adCallOverride";var r=this.api.CDO.getModuleParam("AppConfig",t);try{var i=r?r.indexOf("&cust_params"):-1;if((e.channel==="comicbook"||e.channel==="popculture")&&i>=0){var s=window.location.href.split("?");if(s.length>=2){var o=this.utils.unpack(s[1]);if(o&&o.preroll_cust_params){var u=r.indexOf("&",i+1);if(u>=0){var a=r.substring(i,u),f=window.encodeURIComponent((a?"&":"")+o.preroll_cust_params);r=r.replace(a,a+f)}}}}}catch(l){}if(typeof r=="undefined"){for(x in this.api.CDO.modules)for(index in this.api.CDO.modules[x].params)this.api.CDO.modules[x].params[index].name==t&&(r=this.api.CDO.modules[x].params[index].value);if(typeof r=="undefined")return""}this.config.cmpGroups&&this.config.cmpGroups[2]&&this.config.cmpGroups[2]=="0"&&(r+="&npa=1");var c=this.getAdTemplate(e);for(var h in c){var p=new RegExp(h,"g");r=r.replace(p,c[h])}return this.config.cmpGroups&&this.config.cmpGroups[2]&&this.config.cmpGroups[2]=="0"&&(r+="&npa=1"),this.log("CBSi.app.VideoPlayer.Client","getAdUrl:adCall "+r),r}var n=this;{n.getAdUrl(e,t)},1e3),""},CBSi.app.VideoPlayer.Client.prototype.getShareURL=function(e){this.log("CBSi.app.VideoPlayer.Client","getShareURL: id: "+e);if(typeof e=="undefined"||e=="")return this.config.defaults.SOCIAL_WIDGET_DEFAULT_URL;var t=this.config.defaults.SOCIAL_WIDGET_URL.replace(/_ID_/g,e);return this.log("CBSi.app.VideoPlayer.Client","getShareURL: url: "+t),t},CBSi.app.VideoPlayer.Client.prototype.getEmbedURL=function(e,t,n){this.log("CBSi.app.VideoPlayer.Client","getEmbedURL: id: "+e+" w: "+t+" h: "+n);var r=window.location.href.split("?");if(r.length<2)return this.log("CBSi.app.VideoPlayer.Client","getEmbedURL: url: "+r),r;var i=this.utils.unpack(r[1]),s=typeof i.args!="undefined"&&i.args!=""?this.utils.unpack(i.args):{};return s.ids=e,s.width=t,s.height=n,i.args=this.utils.pack(s),r=r[0]+"?"+this.utils.pack(i),this.log("CBSi.app.VideoPlayer.Client","getEmbedURL: url: "+r),r},CBSi.app.VideoPlayer.Client.prototype.updateXData=function(e){this.log("CBSi.app.VideoPlayer.Client","updateXData"),e=decodeURIComponent(e),e=JSON.parse(e),this.updateData(e,this.config.objName)},CBSi.app.VideoPlayer.Client.prototype.updateDataOnly=function(e){this.log("CBSi.app.VideoPlayer.Client","updateDataOnly"),e=decodeURIComponent(e),e=JSON.parse(e),e.updatePlaylist=!1,this.updateData(e,this.config.objName)},CBSi.app.VideoPlayer.Client.prototype.updateData=function(data,objName){var classRef=eval(objName);classRef.log("CBSi.app.VideoPlayer.Client","updateData");if(data==null||typeof data=="undefined")data=[];updatePlaylist=data.hasOwnProperty("updatePlaylist")?data.updatePlaylist:!0;var time=typeof classRef.clock!="undefined"&&classRef.clock.time?classRef.clock.time:(new Date).getTime(),dataTemp={},liveVideos=[],initVideo=!1;for(var c=0;c<data.length;c++){var v=data[c];classRef.utils.stringToPrimitive(v);if(!v.video_id||v.video_id=="")continue;v.start_time=typeof v.start_time=="undefined"||v.start_time==""?time-1:v.start_time*1e3,v.end_time=typeof v.end_time=="undefined"||v.end_time==""?time+864e5:v.end_time*1e3,v.is_live=typeof v.is_live!="undefined"&&parseInt(v.is_live)!=isNaN?Boolean(parseInt(v.is_live)):!1;if(v.is_live){var buffer=classRef.config.defaults.SHOW_BUFFER*6e4;v.start_time=v.start_time-buffer,v.end_time=v.end_time+buffer,time>v.end_time?v.live_state=1:time>=v.start_time&&time<=v.end_time?v.live_state=0:time<v.start_time&&(v.live_state=-1);if(v.live_state==1)continue}v.type="url";if(v.end_time>0&&time>v.end_time)continue;typeof v.sources.HLS!="undefined"&&typeof v.sources.HLS.LOW!="undefined"&&(v.sources.HLS.PHONE=v.sources.HLS.LOW),typeof v.sources.HLS!="undefined"&&typeof v.sources.HLS.MED!="undefined"&&(v.sources.HLS.TABLET=v.sources.HLS.MED),typeof v.sources.HLS!="undefined"&&typeof v.sources.HLS.MED!="undefined"&&(v.sources.HLS.DESKTOP=v.sources.HLS.MED),typeof v.sources.HLS!="undefined"&&typeof v.sources.HLS.HIGH!="undefined"&&(v.sources.HLS.OTT=v.sources.HLS.HIGH),typeof v.sources.MP4!="undefined"&&typeof v.sources.MP4.LOW!="undefined"&&(v.sources.MP4.PHONE=v.sources.MP4.LOW),typeof v.sources.MP4!="undefined"&&typeof v.sources.MP4.MED!="undefined"&&(v.sources.MP4.TABLET=v.sources.MP4.MED),typeof v.sources.MP4!="undefined"&&typeof v.sources.MP4.MED!="undefined"&&(v.sources.MP4.DESKTOP=v.sources.MP4.MED),typeof v.sources.MP4!="undefined"&&typeof v.sources.MP4.HIGH!="undefined"&&(v.sources.MP4.OTT=v.sources.MP4.HIGH),typeof v.sources.HLS=="undefined"||classRef.config.ua.id=="unknown"||classRef.config.ua.id=="msie"||classRef.config.ua.id=="android"&&classRef.config.ua.maj<4||classRef.config.ua.id=="msie"&&typeof v.sources.MP4!="undefined"?typeof v.sources.MP4!="undefined"&&(v.url=classRef.isTablet?v.sources.MP4.TABLET:classRef.isPhone?v.sources.MP4.PHONE:classRef.isMobile?v.sources.MP4.PHONE:v.sources.MP4.DESKTOP,v.chromecast=v.sources.MP4.OTT):(v.url=classRef.config.isTablet?v.sources.HLS.TABLET:classRef.config.isPhone?v.sources.HLS.PHONE:classRef.config.isMobile?v.sources.HLS.PHONE:v.sources.HLS.DESKTOP,v.chromecast=v.sources.HLS.OTT),v.vio={cms:v.provider,mediaId:v.video_id.toString(),videoTitle:v.title,duration:v.length,fileType:typeof v.url!="undefined"?v.url.split("?").shift().split("/").pop().split(".").pop():"",assetURL:typeof v.url!="undefined"?v.url:"",cmsRefGuid:typeof v.guid!="undefined"&&v.guid!=""?v.guid.toString():v.video_id.toString(),thumbnailURL:v.large_thumbnail,video_id:v.video_id,liveSyncDurationCount:30/classRef.config.liveSegDuration,isEmbedable:v.is_live?!1:!0},dataTemp[v.video_id]=[v],updatePlaylist&&classRef.utils.getArrayIndex(classRef.state.playlist,v.video_id)==-1&&classRef.utils.getArrayIndex(classRef.state.history,v.video_id)==-1&&(v.is_live?v.live_state==0&&liveVideos.push(v.video_id):classRef.config.ids.length&&classRef.config.ids[0]==v.video_id?initVideo=v.video_id:classRef.state.playlist.push(v.video_id)),classRef.utils.getArrayIndex(classRef.state.loadQueue,v.video_id)!=-1&&classRef.state.loadQueue.splice(classRef.utils.getArrayIndex(classRef.state.loadQueue,v.video_id),1),typeof classRef.state.loadAttempts[v.video_id]!="undefined"&&delete classRef.state.loadAttempts[v.video_idime-t.start_time});if(updatePlaylist){liveVideos.length&&(classRef.state.playlist=liveVideos.concat(classRef.state.playlist)),initVideo&&classRef.state.playlist.unshift(initVideo);var isPlaylistEmpty=classRef.state.playlist.length==0}for(var id in dataTemp)dataTemp[id].length>0&&(classRef.state.videoData.data[id]=dataTemp[id]);for(var id in classRef.state.videoData.data)typeof dataTemp[id]=="undefined"&&delete classRef.state.videoData.data[id];var clearVideoData=!0;if(classRef.config&&classRef.config.externalDataLoad&&Boolean(classRef.config.externalDataLoad)||classRef.config&&classRef.config.source&&classRef.config.source=="maxpreps")clearVideoData=!1;clearVideoData&&(classRef.state.videoData.length=0);for(var id in classRef.state.videoData.data)classRef.state.videoData.length++,typeof classRef.state.currentVideo!="undefined"&&classRef.state.currentVideo.video_id==id&&typeof classRef.state.videoData.data[id]!="undefined"&&(classRef.state.currentVideo=classRef.state.videoData.data[id][0]);!classRef.state.isPlayerDrawn&&!classRef.state.isPlayerDrawing?classRef.draw():classRef.state.isPlayerReady&&classRef.config.autoplay&&isPlaylistEmpty&&classRef.state.playlist.length>0&&(classRef.config.autoplay?classRef.playVideo(classRef.state.playlist[0]):classRef.playVideo(classRef.state.playlist[0],classRef.config.partner,undefined,undefined,undefined,!1));var delay=(classRef.state.loadQueue.length?1:classRef.state.defaultsLoaded?classRef&&classRef.config&&classRef.config.defaults?classRef.config.defaults.CAROUSEL_REFRESH:0:90)*1e3;clearTimeout(classRef.state.dataIntId),classRef.state.dataIntId=setTimeout(function(){classRef.getVideos(0,classRef.config.dataLimit,classRef.config.dataOffset,!1,classRef.config.sortBy,!0)},delay),classRef.handlePlayerEvent(classRef.config.objName,"onUpdateData")},CBSi.app.VideoPlayer.Client.prototype.loadDefaults=function(data,objName){var classRef=eval(objName);classRef.log("CBSi.app.VideoPlayer.Client","loadDefaults: "+data);if(data==null||typeof data=="undefined")return;var isInitLoad=typeof classRef.state.defaultsDataIntId!="undefined"?!1:!0;clearTimeout(classRef.state.defaultsDataIntId),classRef.config.defaults=data.content;var defs=classRef.config.defaults||{};classRef.utils.stringToPrimitive(defs),defs.CHANNEL_LIST=typeof defs.CHANNEL_LIST!="undefined"&&defs.CHANNEL_LIST!=""?defs.CHANNEL_LIST.split(","):[],defs.CHANNEL_LIST_LABELS=typeof defs.CHANNEL_LIST_LABELS!="undefined"&&defs.CHANNEL_LIST_LABELS!=""?defs.CHANNEL_LIST_LABELS.split(","):defs.CHANNEL_LIST;if(defs.CHANNEL_LIST.length>1){var defChannelIndex=typeof defs.DEFAULT_CHANNEL!="undefined"&&defs.DEFAULT_CHANNEL!=""?classRef.utils.getArrayIndex(defs.CHANNEL_LIST,defs.DEFAULT_CHANNEL):0;defs.CHANNEL_LIST.unshift(defs.CHANNEL_LIST.splice(defChannelIndex,1)[0]),defs.CHANNEL_LIST_LABELS.unshift(defs.CHANNEL_LIST_LABELS.splice(defChannelIndex,1)[0])}if(classRef.state.channelList.join(",")!=defs.CHANNEL_LIST.join(","))for(var i=0;i<defs.CHANNEL_LIST.length;i++)classRef.utils.getArrayIndex(classRef.state.channelList,defs.CHANNEL_LIST[i])==-1&&classRef.state.channelList.push(defs.CHANNEL_LIST[i]),typeof classRef.state.channelData[defs.CHANNEL_LIST[i]]=="undefined"&&(classRef.state.channelData[defs.CHANNEL_LIST[i]]={label:defs.CHANNEL_LIST_LABELS[i],data:[]});classRef.state.defaultsLoaded=!0,typeof classRef.config.preloadData!="undefined"&&classRef.updateData(classRef.config.preloadData,classRef.config.objName);var delay=classRef.state.loadQueue.length?1:classRef&&classRef.config&&classRef.config.defaults?classRef.config.defaults.CAROUSEL_REFRESH*1e3:0;clearTimeout(classRef.state.dataIntId),classRef.state.dataIntId=setTimeout(function(){classRef.getVideos(0,classRef.config.dataLimit,classRef.config.dataOffset,!1,classRef.config.sortBy,!0)},delay),classRef.config.dataName!=""&&(classRef.state.defaultsDataIntId=setTimeout(function(){classRef.utils.getData(classRef.config.mediaServer+"/data/video/player/get-dat-file?as=json&dat_file_path=video/player/"+classRef.config.dataName+"/defaults&CACHE_GD=1&CACHE_"+classRef.config.dataName+"="+Math.floor(Math.random()*(new Date).getTime()),classRef.loadDefaults,!0,!0,objName)},defs.DEFAULTS_REFRESH*1e3)),classRef.handlePlayerEvent(classRef.config.objName,"onDefaultsLoaded")},CBSi.app.VideoPlayer.Client.prototype.getVideos=function(e,t,n,r,i,s){this.log("CBSi.app.VideoPlayer.Client","getVideos: refresh: "+e+", limit: "+t+", offset: "+n+", filters: "+r+", sortBy: "+i+", addToPlaylist: "+s),typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=!1),typeof n=="undefined"&&(n=!1),typeof r=="undefined"&&(r=!1),typeof i=="undefined"&&(i=!1),typeof s=="undefined"&&(s=!0);var o=["transform=direct"],u=[];if(this.state.loadQueue.length){encodeURIComponent(btoa(this.utils.zlib.deflate(this.state.loadQueue.join(","),{to:"string"}))).length>2e3?u=this.state.loadQueue.slice(0,50):u=this.state.loadQueue.slice(0);for(var a=0;a<u.length;a++)typeof this.state.loadAttempts[u[a]]=="undefined"?this.state.loadAttempts[u[a]]=1:this.state.loadAttempts[u[a]]<=3?this.state.loadAttempts[u[a]]++:(this.utils.getArrayIndex(this.state.loadQueue,u[a])!=-1&&this.state.loadQueue.splice(this.utils.getArrayIndex(this.state.loadQueue,u[a]),1),typeof this.state.loadAttempts[u[a]]!="undefined"&&delete this.state.loadAttempts[u[a]],u.splice(a,1));o.push("id="+u.join(","))}if(!u.length&&!this.state.loadQueue.length&&this.config&&this.config.defaults&&(this.config.defaults.CHANNEL_LIST==""||!this.config.defaults.CHANNEL_LIST.length)){this.config.source!="maxpreps"&&this.updateData(null,this.config.objName);return}this.config&&this.config.defaults&&this.config.defaults.CHANNEL_LIST!=""&&o.push("playlist="+this.config.defaults.CHANNEL_LIST),t&&o.push("limit="+t),n&&o.push("offset="+n),r&&o.push("fields="+r),i&&o.push("sortby="+i),this.config.source!=""&&o.push("datasource="+this.config.source),this.config.inlinePlay&&o.push("inline-play="+this.config.inlinePlay);var f=encodeURIComponent(btoa(this.utils.zlib.deflate(o.join("&"),{to:"string"})));o=["cargs="+f],s?o.push("callback="+this.config.objName+".updateXData"):o.push("callback="+this.config.objName+".updateDataOnly");var l="www.cbssports.com";l=typeof this.config.env!="undefined"&&this.config.env=="qa"?"qa.cbssports.com":l,l=typeof this.config.env!="undefined"&&this.config.env=="dev"?"dev.cbssports.com":l,l="https://"+l+"/api/content/video/";var c=o.join("&"),h=l+"?"+c,p=this;clearTimeout(this.state.dataIntId),this.state.dataIntId=setTimeout(function(){p.log("CBSi.app.VideoPlayer.Client","getVideos: "+h),p.utils.getXData(h)},e)},CBSi.app.VideoPlayer.Client.prototype.getVideosLegacy=function(e,t,n,r,i,s){this.log("CBSi.app.VideoPlayer.Client","getVideosLegacy: refresh: "+e+", limit: "+t+", offset: "+n+", filters: "+r+", sortBy: "+i+", addToPlaylist: "+s),typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=!1),typeof n=="undefined"&&(n=!1),typeof r=="undefined"&&(r=!1),typeof i=="undefined"&&(i=!1),typeof s=="undefined"&&(s=!0);var o=["as=json"],u=[];if(this.state.loadQueue.length){encodeURIComponent(btoa(this.utils.zlib.deflate(this.state.loadQueue.join(","),{to:"string"}))).length>2e3?u=this.state.loadQueue.slice(0,50):u=this.state.loadQueue.slice(0);for(var a=0;a<u.length;a++)typeof this.state.loadAttempts[u[a]]=="undefined"?this.state.loadAttempts[u[a]]=1:this.state.loadAttempts[u[a]]<=3?this.state.loadAttempts[u[a]]++:(this.utils.getArrayIndex(this.state.loadQueue,u[a])!=-1&&this.state.loadQueue.splice(this.utils.getArrayIndex(this.state.loadQueue,u[a]),1),typeof this.state.loadAttempts[u[a]]!="undefined"&&delete this.state.loadAttempts[u[a]],u.splice(a,1));o.push("id="+u.join(","))}if(!u.length&&!this.state.loadQueue.length&&this.config&&this.config.defaults&&(this.config.defaults.CHANNEL_LIST==""||!this.config.defaults.CHANNEL_LIST.length)){this.updateData(null,this.config.objName);return}this.config&&this.config.defaults&&this.config.defaults.CHANNEL_LIST!=""&&o.push("channel_list="+this.config.defaults.CHANNEL_LIST),t&&o.push("limit="+t),n&&o.push("offset="+n),r&&o.push("filters="+r),i&&o.push("sortby="+i),this.config.inlinePlay&&o.push("inlineplay="+this.config.inlinePlay);var f=encodeURIComponent(btoa(this.utils.zlib.deflate(o.join("&"),{to:"string"})));o=["cargs="+f],s?o.push("callback="+this.config.objName+".updateXData"):o.push("callback="+this.config.objName+".updateDataOnly");var l=this.config.protocol+"//www.cbssports.com";l=typeof this.config.env!="undefined"&&this.config.env=="qa"?this.config.protocol+"//www.qa.cbssports.com":l,l=typeof this.config.env!="undefined"&&this.config.env=="dev"?this.config.mediaServer:l,l+="/data/video/player/getVideos/1_6/";var c=o.join("&"),h=l+"?"+c,p=this;clearTimeout(this.state.dataIntId),this.state.dataIntId=setTimeout(function(){p.log("CBSi.app.VideoPlayer.Client","getVideosLegacy: "+h),p.utils.getXData(h)},e)},CBSi.app.VideoPlayer.Client.prototype.loadVideoData=function(e){this.log("CBSi.app.VideoPlayer.Client","loadVideoData");var t=Array.isArray(e);if(!t){var n=[];for(var r in e)n.push(e[r])}e.updatePlaylist=t,this.updateData(e,this.config.objName)},CBSi.app.VideoPlayer.Client.prototype.updateVideoData=function(e){this.log("CBSi.app.VideoPlayer.Client","updateVideoData: "+JSON.stringify(e));for(var t in e)typeof this.state.videoData.data[t]!="undefined"?this.state.videoData.data[t][0]=this.utils.extend(this.state.videoData.data[t][0],e[t]):this.state.videoData.data[t]=[e[t]],t==this.state.currentVideo.video_id&&(this.state.currentVideo=this.utils.extend(this.state.currentVideo,e[t]))},CBSi.app.VideoPlayer.Client.prototype.loadVideoById=CBSi.app.VideoPlayer.Client.prototype.loadVideosById=function(e){this.log("CBSi.app.VideoPlayer.Client","loadVideoById: "+JSON.stringify(e)),this.state.loadQueue=this.state.loadQueue.concat(e),this.getVideos(undefined,undefined,undefined,undefined,undefined,!1)},CBSi.app.VideoPlayer.Client.prototype.getVideoData=function(e){this.log("CBSi.app.VideoPlayer.Client","getVideoData: "+JSON.stringify(e)),typeof e=="undefined"&&(e=[]);var t=[].push(e),n={};if(t.length)for(var r=0;r<t.length;r++)n[t[r]]=this.state.videoData.data[t[r]][0];else for(var i in this.state.videoData.data)n[i]=this.state.videoData.data[i][0];this.handlePlayerEvent(this.config.objName,"onGetVideoData",n)},CBSi.app.VideoPlayer.Client.prototype.getCurrentVideo=function(){this.log("CBSi.app.VideoPlayer.Client","getCurrentVideo"),this.handlePlayerEvent(this.config.objName,"onGetCurrentVideo",this.state.currentVideo)},CBSi.app.VideoPlayer.Client.prototype.getVideosById=function(e){this.log("CBSi.app.VideoPlayer.Client","getVideosById: "+JSON.stringify(e)),this.state.loadQueue=this.state.loadQueue.concat(e),this.getVideos()},CBSi.app.VideoPlayer.Client.prototype.setPlaylist=function(e){this.log("CBSi.app.VideoPlayer.Client","setPlaylist: "+JSON.stringify(e)),this.state.playlist=e},CBSi.app.VideoPlayer.Client.prototype.getPlaylist=function(){this.log("CBSi.app.VideoPlayer.Client","getPlaylist"),this.handlePlayerEvent(this.config.objName,"onGetPlaylist",this.state.playlist)},CBSi.app.VideoPlayer.Client.prototype.addToPlaylist=function(e){this.log("CBSi.app.VideoPlayer.Client","addToPlaylist: "+JSON.stringify(e)),e.length>0&&this.state.playlist.concat(e)},CBSi.app.VideoPlayer.Client.prototype.removeFromPlaylist=function(e){this.log("CBSi.app.VideoPlayer.Client","removeFromPlaylist: "+JSON.stringify(e));var t=[];for(var n=0;n<this.state.playlist.length;n++){var r=this.state.playlist[n],i=!1;for(var s=0;s<e.length;s++)e[s]==r&&(i=!0);i||t.push(r)}this.state.playlist=t},CBSi.app.VideoPlayer.Client.prototype.getVideoAdSessionValues=function(){this.log("CBSi.app.VideoPlayer.Client","getVideoAdSessionValues");if(typeof this.adDisplayer=="undefined")return"";var e=[],t=this.adDisplayer.xfpObj;for(var n in t)e.push(n+"="+t[n]);return e=e!=""?e.join("&"):"",e},CBSi.app.VideoPlayer.Client.prototype.handlePlayerEvent=function(objName,event,data){var classRef=eval(objName);if(classRef.utils.exists(objName+"._"+event))try{classRef["_"+event](data)}catch(err){classRef.log("CBSi.app.VideoPlayer.Client","handlePlayerEvent: error calling Video client handler for "+event+": "+err)}if(classRef.utils.exists(objName+"."+event))try{classRef[event](data)}catch(err){classRef.log("CBSi.app.VideoPlayer.Client","handlePlayerEvent: error calling Video instance handler for "+event+": "+err)}if(typeof classRef.pmi!="undefined")try{classRef.pmi(event,data)}catch(err){classRef.log("CBSi.app.VideoPlayer.Client","handlePlayerEvent: error calling postMessage add-in handler for "+event+": "+err)}if(typeof classRef.adDisplayer!="undefined"&&classRef.adDisplayer&&classRef.adDisplayer.enabled&&typeof classRef.adDisplayer[event]!="undefined")try{classRef.adDisplayer[event](event,data)}catch(err){classRef.log("CBSi.app.VideoPlayer.Client","handlePlayerEvent: error calling XFP add-in handler for "+event+": "+err)}typeof classRef.chartbeat!="undefined"&&classRef.chartbeat&&classRef.chartbeat.enabled&&typeof classRef.chartbeat[event]!="undefined";if(typeof classRef.adobePass!="undefined"&&classRef.adobePass&&classRef.adobePass.enabled&&typeof classRef.adobePass[event]!="undefined")try{classRef.adobePass[event](event,data)}catch(err){classRef.log("CBSi.app.VideoPlayer.Client","handlePlayerEvent: error calling AdobePass add-in handler for "+event+": "+err)}if(typeof classRef.castSender!="undefined"&&classRef.castSender&&classRef.castSender.enabled&&typeof classRef.castSender[event]!="undefined")try{classRef.castSender[event](event,classRef,data)}catch(err){classRef.log("CBSi.app.VideoPlayer.Client","handlePlayerEvent: error calling Chromecast add-in handler for "+event+": "+err)}if(typeof classRef.help!="undefined"&&classRef.help&&classRef.help.enabled&&typeof classRef.help[event]!="undefined")try{classRef.help[event](event,classRef,data)}catch(err){classRef.log("CBSi.app.VideoPlayer.Client","handlePlayerEvent: error calling Help add-in handler for "+event+": "+err)}},CBSi.app.VideoPlayer.Client.prototype.handleUVPEvent=function(e){var t=this;return function(n){e!="onVideoProgress"&&t.log("CBSi.app.VideoPlayer.Client","handleUVPEvent: "+e+": "+n),e=="onStateChange"&&typeof n.payload!="undefined"&&typeof n.payload.newState!="undefined"&&(n=n.payload.newState);try{n=JSON.parse(n)}catch(n){}if(t.utils.exists(t.config.objName+"._"+e))try{t["_"+e](n)}catch(r){t.log("CBSi.app.VideoPlayer.Client","handleUVPEvent: error calling Video client handler for "+e+": "+r)}if(t.utils.exists(t.config.objName+"."+e))try{t[e](n)}catch(r){t.log("CBSi.app.VideoPlayer.Client","handleUVPEvent: error calling Video instance handler for "+e+": "+r)}if(typeof t.pmi!="undefined")try{t.pmi(e,n)}catch(r){t.log("CBSi.app.VideoPlayer.Client","handleUVPEvent: error calling postMessage add-in handler for "+e+": "+r)}if(typeof t.adDisplayer!="undefined"&&t.adDisplayer&&t.adDisplayer.enabled&&typeof t.adDisplayer[e]!="undefined")try{t.adDisplayer[e](n)}catch(r){t.log("CBSi.app.VideoPlayer.Client","handleUVPEvent: error calling XFP add-in handler for "+e+": "+r)}typeof t.chartBeat!="undefined"&&t.chartBeat&&t.chartBeat.enabled&&typeof t.chartBeat[e]!="undefined";if(typeof t.adobePass!="undefined"&&t.adobePass&&t.adobePass.enabled&&typeof t.adobePass[e]!="undefined")try{t.adobePass[e](n)}catch(r){t.log("CBSi.app.VideoPlayer.Client","handleUVPEvent: error calling AdobePass add-in handler for "+e+": "+r)}if(typeof t.castSender!="undefined"&&t.castSender&&t.castSender.enabled&&typeof t.castSender[e]!="undefined")try{t.castSender[e](n,t)}catch(r){t.log("CBSi.app.VideoPlayer.Client","handleUVPEvent: error calling Chromecast add-in handler for "+e+": "+r)}if(typeof t.help!="undefined"&&t.help&&t.help.enabled&&typeof t.help[e]!="undefined")try{t.help[e](n,t)}catch(r){t.log("CBSi.app.VideoPlayer.Client","handleUVPEvent: error calling Help add-in handler for "+e+": "+r)}}},CBSi.app.VideoPlayer.Client.prototype._addInternalOverlays=function(){this.log("CBSi.app.VideoPlayer.Client","_addInternalOverlays"),this.dom.overlaysContainer=document.createElement("div"),this.dom.overlaysContainer.setAttribute("class","overlaysContainer"),this.dom.overlaysContainer.className="overlaysContainer",this.dom.videoContainer.parentNode.insertBefore(this.dom.overlaysContainer,this.dom.videoContainer.nextSibling);var e={error100:{"class":"error",hasCloseBtn:!0,content:'<div class="message"><div class="title">This video is not available.</div><div class="subTitle">This web site is not authorized to display this video.</div></div>'},error110:{"class":"error",hasCloseBtn:!0,content:'<div class="message"><div class="title">This video is not available.</div><div class="subTitle">This video may have expired or is otherwise not available. Please try again in a few minutes.</div></div>'},error120:{"class":"error",hasCloseBtn:!1,content:'<div class="message"><div class="title">This video is geo-restricted.</div><div class="subTitle">The content you are trying to view is not available in your country due to rights restrictions.</div></div>'},error130:{"class":"error",hasCloseBtn:!0,content:'<div class="message"><div class="title">There was an error loading the video.</div><div class="subTitle">We are experiencing technical difficulties, please try again in a few minutes.</div></div>'},error140:{"class":"error",hasCloseBtn:!1,content:'<div class="message"><div class="title">We noticed you have an ad blocker enabled.</div><div class="subTitle">Ads keep our content free for all to enjoy so please turn off any ad blockers to keep watching.</div></div>'},error150:{"class":"error",hasCloseBtn:!0,content:'<div class="message"><div class="title">This video is not available on your platform.</div><div class="subTitle">This video is not available for this device, browser, or operating system.</div></div>'},error160:{"class":"error",hasCloseBtn:!0,content:'<div class="message"><div class="title">Live streaming is not available on your platform.</div><div class="subTitle">Live streaming is not available for this device, browser, or operating system.</div></div>'},error170:{"class":"error",hasCloseBtn:!0,content:'<div class="message"><div class="title">There was an error with Flash</div><div class="subTitle">Your browser requires the <a href="https://get.adobe.com/flashplayer/">Adobe Flash plugin</a> to play this content, and Flash is not installed, not enabled, or failed to load. <a href="https://helpx.adobe.com/flash-player.html"/>Verify Flash is working</a> then try again, or switch to a supported browser.</div></div>'}};for(var t in e){var n=document.createElement("div");n.setAttribute("class","content "+e[t]["class"]),n.setAttribute("hasCloseBtn",e[t].hasCloseBtn),n.className="content "+e[t]["class"],n.id="_overlays_"+t,n.innerHTML=e[t].content,n.style.width=this.config.vwidth+"px",n.style.height=this.config.vheight+"px";if(e[t].hasCloseBtn){var r=document.createElement("div");r.setAttribute("class","closeBtn"),r.className="closeBtn",r.innerHTML="x";var i=this;r.onclick=function(){i.state.playState=-1,i.handleUVPEvent("onResourceEnd")(),this.parentNode.style.display="none"},n.appendChild(r)}this.dom.overlaysContainer.appendChild(n),this.dom.overlays[t]=n}},CBSi.app.VideoPlayer.Client.prototype._overrideUVPC=function(){this.log("CBSi.app.VideoPlayer.Client","_overrideUVPC");if(this.config.isMobile&&!!window.navigator.userAgent.indexOf("Android")&&window.navigator.vendor.indexOf("Google")>-1){var e={modules:[{category:"internal",enabled:!0,name:"VideoPlaybackSettings",params:[{name:"forceHlsjs",value:!0}]}]};this.config.uvpc=[this.config.uvpc,e]}if(cbsiPlayer.config.isParentAccessible&&window.parent.location.href.indexOf("cbssports.com")>-1){var t=window.parent.document.cookie.split(";");for(var n=0;n<t.length;n++)if(t[n].indexOf("OptanonConsent")>-1){t=t[n].split("&");for(var r=0;r<t.length;r++)t[r].indexOf("groups")>-1&&(t=t[r].split("="),t=decodeURIComponent(t[1].replace(/\+/g," ")),this.config.cmpGroups=cbsiUtils.stringToObject(t));break}}if(this.config.cmpGroups&&this.config.cmpGroups[2]&&this.config.cmpGroups[2]=="0"){var i={modules:[{name:"ComScore_ss",category:"qos",enabled:!1,params:[]},{name:"MuxQOSPluginJS",category:"qos",enabled:!1,params:[]},{name:"SiteCatalyst",category:"qos",enabled:!1,params:[]},{name:"ComScoreTracking",category:"tracking",enabled:!1,params:[]},{name:"NielsenTracking_SDK",category:"tracking",enabled:!1,params:[]}]};this.config.uvpc=[i,this.config.uvpc]}},CBSi.app.VideoPlayer.Client.prototype._onVideoManagerReady=function(e){this.log("CBSi.app.VideoPlayer.Client","_onVideoManagerReady");var t={enableMutedAutoplay:this.config.silent&&this.config.autoplay&&e.supportsMutedAutoplay,enableUnmutedAutoplay:this.config.autoplay&&e.supportsUnmutedAutoplay};this.config.autoplay=t.enableMutedAutoplay||t.enableUnmutedAutoplay,this.config.silent=t.enableMutedAutoplay&&!t.enableUnmutedAutoplay,this.mgr.createVideoPlayer(this.config.id,this.handleUVPEvent("onPlayerReady"),t),typeof this.config.useDaiSsb!="undefined"&&this.config.useDaiSsb!=""&&(this.log("CBSi.app.VideoPlayer.Client","useDaiSsb"),typeof this.config.useDaiSsb=="string"&&(this.config.useDaiSsb=JSON.parse(this.config.useDaiSsb)),this.config.backupStream=this.config.useDaiSsb.assetUrl,this.streamManager=new google.ima.dai.api.StreamManager(this.dom.videoContainer),this.streamManager.setClickElement(this.dom.playerContainer),this.streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED],this.onStreamEvent,!1),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.dom.playerContainer,this.dom.videoContainer),this.adDisplayContainer.initialize(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded,!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1),typeof this.hls=="undefined"&&(this.hls=new Hls),this.hls.on(Hls.Events.FRAG_PARSING_METADATA,function(e,t){this.streamManager&&t&&3",e.data,e.pts)})}))},CBSi.app.VideoPlayer.Client.prototype._onnagerError: "+e)},CBSi.app.VideoPlayer.Client.prototype._onPlayerReady=function(e){this.log("CBSi.app.VideoPlayer.Client","_onPlayerReady");if(e==null)return;this.state.isPlayerDrawn=!0,this.state.isPlayerDrawing=!1,this.state.isPlayerReady=!0,this.api=e;var t=this.api.eventsMgr.getAllEventTypes();for(var n in t)this.log("CBSi.app.VideoPlayer.Client","_addUVPEventHandlers: "+n),typeof t[n]!="undefined"&&(this.api.addEventListener(this.api.eventsMgr.eventTypes[n]+this.config.ns,this.handleUVPEvent(t[n])),this.log("CBSi.app.VideoPlayer.Client","_addUVPEventHandlers: event callback this.handleUVPEvent('"+t[n]+"') added for '"+this.api.eventsMgr.eventTypes[n]+this.config.ns+"' event"));typeof this.adDisplayer!="undefined"&&this.adDisplayer.updateXFPObj(),this.config.forceMute==1&&this.api.mute(),typeof window.anPrebidAsyncInit!="undefined"&&window.anPrebidAsyncInit(),this.handleUVPEvent("onPlayerLoaded")(),this._loadSkinManager()},CBSi.app.VideoPlayer.Client.prototype._createVastClient=function(e,t,n){vastClient=new UvpjsVastClient({player:e,adCallTemplate:t,id3OwnerId:n})},CBSi.app.VideoPlayer.Client.prototype._onPlayerLoaded=function(e){this.log("CBSi.app.VideoPlayer.Client","_onPlayerLoaded: "+e),this.state.isPlayerDrawn=!0,this.state.isPlayerDrawing=!1},CBSi.app.VideoPlayer.Client.prototype._onSkinManagerLoaded=function(){this.log("CBSi.app.VideoPlayer.Client","_onSkinManagerLoaded"),this.handleUVPEvent("onPlayerInit")(),typeof this.castSender!="undefined"&&this.castSender.enabled&&this.skinMgr!=null&&this.skinMgr._onCastStateChange(this.castSender._castState)},CBSi.app.VideoPlayer.Client.prototype._onContentDataLoaded=function(e){this.log("CBSi.app.VideoPlayer.Client","_onContentDataLoaded: "+e),this.state.hasAutoPlayed=!0},CBSi.app.VideoPlayer.Client.prototype._onResourceStart=function(e){this.log("CBSi.app.VideoPlayer.Client","_onResourceStart: "+e),this.handleUVPEvent("onPlaylistStart")(e)},CBSi.app.VideoPlayer.Client.prototype._onAdStart=function(e){this.log("CBSi.app.VideoPlayer.Client","_onAdStart: "+e),this.state.isInAd=!0,this.state.hasAutoPlayed=!0},CBSi.app.VideoPlayer.Client.prototype._onAdEnd=function(e){this.log("CBSi.app.VideoPlayer.Client","_onAdEnd: "+e),this.state.isInAd=!1},CBSi.app.VideoPlayer.Client.prototype._onAdBlocked=function(e){this.log("CBSi.app.VideoPlayer.Client","_onAdBlocked: "+e);var t=!1;this.state.isIMALoaded=typeof window.google!="undefined"&&typeof google.ima!="undefined";var n=Boolean(document.getElementById("gpt"));if(!n){var r=document.getElementsByTagName("script");for(var i=0;i<r.length;i++)if(r[i].src.indexOf("/gpt.js")!=-1){n=!0;break}}var s=Boolean(document.getElementById("ima3"));console.log("onAdBlocked: isIMAonPage: "+s),console.log("onAdBlocked: isIMALoaded: "+this.state.isIMALoaded),console.log("onAdBlocked: isGPTLoaded: "+n),t&&(typeof this.api!="undefined"&&this.api.destroyPlaylist(),delete this.state.currentVideo)},CBSi.app.VideoPlayer.Client.prototype._onContentStart=function(e){this.log("CBSi.app.VideoPlayer.Client","onContentStart: "+e),this.state.isInAd=!1,this.state.hasAutoPlayed=!0;var t=e.payload.contentData,n={};n.category=typeof t.category!="undefined"?t.category:"",n.subCategory=(typeof t.seasonNumber!="undefined"&&t.seasonNumber!=""?t.seasonNumber:"0")+":"+(typeof t.episodeNumber!="undefined"&&t.episodeNumber!=""?t.episodeNumber:"0"),n.contentType=typeof t.isLive!="undefined"&&t.isLive?"live":"vod",n.playerVersion=typeof this.config.skinRev!="undefined"?this.config.skinRev:"",n.contentLength=typeof t.duration!="undefined"?t.duration:0,n.pageUrl=typeof this.config.refPage!="undefined"?this.config.refPage:"",n.show=typeof t.seriesTitle!="undefined"?t.seriesTitle:"",n.title=typeof t.videoTitle!="undefined"?t.videoTitle:"",n.streamName=typeof t.assetURL!="undefined"?t.assetURL:"",n.eventName=typeof this.state.currentVideo.event_id!="undefined"&&this.state.currentVideo.event_id!=""?this.state.currentVideo.event_id:t.episodeTitle!=""?t.episodeTitle:"",n.device=typeof this.config.ua.id!="undefined"&&this.config.ua.id!=""?this.config.ua.id:"desktop",this.api.setQosMetadata([uvpjs.Type.QOSVendor.AKAMAI],n),this.resizePlayer()},CBSi.app.VideoPlayer.Client.prototype._onResourceEnd=function(e){this.log("CBSi.app.VideoPlayer.Client","_onResourceEnd: "+e);if(this.state.playState>=100)return;clearTimeout(this.state.errorIntId),this.handleUVPEvent("onPlayListEnd")(e);if(typeof this.state.currentVideo.video_id=="undefined"&&!this.state.playlist.length)return;this.log("CBSi.app.VideoPlayer.Client","_onResourceEnd: playlist="+this.state.playlist.length+" history="+this.state.history.length+" currentVideo.video_id="+this.state.currentVideo.video_id+" playState="+this.state.playState+" rco.video_id="+(typeof e!="undefined"&&typeof e.payload!="undefined"?e.payload.rco.video_id:"undefined"));if(typeof this.state.currentVideo.video_id!="undefined"&&typeof e!="undefined"&&typeof e.payload!="undefined"&&(!this.state.hasPrerollPlayed&&this.state.currentVideo.video_id!=e.payload.rco.video_id||isNaN(e.payload.rco.video_id)&&this.state.playState!=0||!isNaN(e.payload.rco.video_id)&&isNaN(this.state.currentVideo.video_id)||this.state.currentVideo.video_id==e.payload.rco.video_id&&!isNaN(e.payload.rco.video_id)&&!this.state.hasVideoPlayed&&this.state.history.length<1)){this.state.currentVideo.video_id==e.payload.rco.video_id&&(this.log("CBSi.app.VideoPlayer.Client","_onResourceEnd: hasVideoPlayed"),this.state.hasVideoPlayed=!0),this.state.playState==1&&typeof e.payload.rco.video_id!="undefined"&&this.state.currentVideo.video_id!=e.payload.rco.video_id&&(this.log("CBSi.app.VideoPlayer.Client","_onResourceEnd: addToHistory"),this.state.history.push(e.payload.rco.video_id)),this.log("CBSi.app.VideoPlayer.Client","_onResourceEnd: return");return}this.log("CBSi.app.VideoPlayer.Client","_onResourceEnd: else"),this.state.hasVideoPlayed=!1;var t=!1;typeof e!="undefined"&&(typeof e.payload!="undefined"&&(t=e.payload.rco.video_id),typeof e.ContentVIO!="undefined"&&(t=e.ContentVIO.contentID));if(t&&t!=this.state.currentVideo.video_id)return;this.state.history.push(this.state.currentVideo.video_id);while(this.utils.getArrayIndex(this.state.playlist,this.state.currentVideo.video_id)!=-1)this.state.playlist.splice(this.utils.getArrayIndex(this.state.playlist,this.state.currentVideo.video_id),1);this.state.hasPrerollPlayed&&isNaN(this.state.currentVideo.video_id)&&(typeof this.state.currentVideo.is_live=="undefined"||this.state.currentVideo.is_live)?(this.log("CBSi.app.VideoPlayer.Client","_onResourceEnd: playVideo option 1"),this.playVideo(this.state.currentVideo.video_id,this.config.partner,undefined,undefined,undefined,!0)):this.config.continuousPlay&&this.state.playlist.length?(this.log("CBSi.app.VideoPlayer.Client","_onResourceEnd: playVideo next on playlist continuous"),this.playVideo(this.state.playlist[0],this.config.partner,undefined,undefined,undefined,!0)):!this.config.continuousPlay&&this.state.playlist.length?(this.log("CBSi.app.VideoPlayer.Client","_onResourceEnd: playVideo next on playlist not continuous"),this.playVideo(this.state.playlist[0],this.config.partner,undefined,undefined,undefined,!1)):(this.log("CBSi.app.VideoPlayer.Client","_onResourceEnd: playVideo current video"),this.playVideo(this.state.currentVideo.video_id,this.config.partner,undefined,undefined,undefined,!1))},CBSi.app.VideoPlayer.Client.prototype._controlFullscreen=function(e){this.log("CBSi.app.VideoPlayer.Client","_controlFullscreen: "+e),this.state.displayState=e.payload.isFs?"fullscreen":"normal"},CBSi.app.VideoPlayer.Client.prototype._videoCuepoint=function(e){this.log("CBSi.app.VideoPlayer.Client","_videoCuepoint");var t=e.payload.name,n=/[\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g,r=e.payload.data.replace(n,"");r=JSON.parse(r);switch(r.event){case"eventStart":break;case"eventEnd":this.handleUVPEvent("onResourceEnd")();break;case"adPodStart":this.state.isInAd=!0;if(typeof this.state.currentVideo!="undefined"&&this.state.currentVideo.live_midroll_url!=""){var i=this.state.currentVideo.live_midroll_url,s=this.getAdTemplate(this.state.currentVideo);typeof r.position!="undefined"?s.BREAKID=r.position:s.BREAKID="1",typeof r.duration!="undefined"?s.DURATION=r.duration*1e3:s.DURATION=3e4,typeof r.feat!="undefined"?s["{feat}"]="%26feat%3D"+r.feat:s["{feat}"]="";for(var o in s){var u=new RegExp(o,"g");i=i.replace(u,s[o])}i=this.addDescriptionUrl(i),i=this.addVguid(i),i=this.addPtplToAdCall(i),i=this.addPlyrToCustParams(i),i=this.addSessionAndSubses(i),this.api.loadDynamicAdCall(i)}break;case"adPodEnd":this.state.isInAd=!1,this.api.forceDynamicMidrollPodEnd(),typeof this.adDisplayer!="undefined"&&this.adDisplayer&&this.adDisplayer.enabled&&this.adDisplayer.refresh(this.state.currentVideo);break;case"segmentStart":this.handlePlayerEvent(this.config.objName,"onSegmentStart",r);break;case"segmentEnd":this.handlePlayerEvent(this.config.objName,"onSegmentEnd",r)}},CBSi.app.VideoPlayer.Client.prototype._onStateChange=function(e){this.log("CBSi.app.VideoPlayer.Client","_onStateChange: "+e),this.state.playState=e;var t={"-1":"unstarted",0:"stopped",1:"playing",2:"paused",3:"buffering",5:"thumbnail image cued",100:"domain blacklisted",110:"video not available",120:"video geo-blocked",130:"data load error",140:"ad blocked",150:"platform error",160:"live platform error",170:"flash error"};this.log("CBSi.app.VideoPlayer.Client","onStateChange: "+e+": "+t[e]);if(e>=100){clearTimeout(this.state.errorIntId);for(var n in this.dom.overlays)this.dom.overlays[n].style.display="none";this.dom.overlays["error"+e].style.display="block";if(this.dom.overlays["error"+e].getAttribute("hasCloseBtn")=="true"){var r=this;this.state.errorIntId=setTimeout(function(){r.state.playState=-1,r.handleUVPEvent("onResourceEnd")(),r.dom.overlays["error"+e].style.display="none"},5e3)}}if(this.skinMgr!=null){var i=this.skinMgr;i._updatePlaybackStateUI(e)}},CBSi.app.VideoPlayer.Client.prototype._videoPlaybackError=CBSi.app.VideoPlayer.Client.prototype._playerStartError=CBSi.app.VideoPlayer.Client.prototype._videoStartError=CBSi.app.VideoPlayer.Client.prototype._adError=function(e){this.log("CBSi.app.VideoPlayer.Client",e.type+": "+e.payload.errorInfo.message),console.log("adError error: ",e);var t=e.payload.errorInfo,n=t.eventType,r=t.errorCode,i=t.isFatal,s=t.message,o=uvpjs.ErrorInfo.errorCodes,u=uvpjs.EventType;s=="Ad load request made but ad start event not received."?this.state.hasPrerollPlayed=!1:s=="An IMA ad error occurred.The response does not contain any valid ads. imaErrorCode: 1009; vastErrorCode: 900"&&(this.state.hasVideoPlayed=!0);switch(n){case u.PLAYER_START_ERROR:switch(r){case o.FLASH_RELATED_ERROR:this.handleUVPEvent("onStateChange")(170);break;case o.IMA_SDK_MISSING:break;default:i&&this.handleUVPEvent("onStateChange")(130)}break;case u.VIDEO_START_ERROR:switch(r){case o.RESOURCE_GEOBLOCKED:this.handleUVPEvent("onStateChange")(120);break;case o.RESOURCE_UNAVAILABLE:this.handleUVPEvent("onStateChange")(110);break;case o.IMA_SDK_MISSING:break;default:i&&this.handleUVPEvent("onStateChange")(130)}break;case u.VIDEO_PLAYBACK_ERROR:switch(r){case o.MEDIA_ERR_SRC_NOT_SUPPORTED:this.handleUVPEvent("onStateChange")(150);break;default:i&&this.handleUVPEvent("onStateChange")(130)}break;case u.AD_ERROR:}},CBSi.app.VideoPlayer.Client.prototype._loadSkinManager=function(){this.log("CBSi.app.VideoPlayer.Client","_loadSkinManager");var e=this;(function(t){var n=t._;t.SkinManager=uvpjs.Class.subClass({DEFAULT_SKIN_PATH:"css/default.css",CLIENT_REF:e,NULL_TIME:"00:00",HIDE_DELAY:3e3,LEAVE_DELAY:0,TOUCH_CLICK_THRESHOLD:300,THROTTLE_WAIT:250,INITIAL_DOM_SETUP_WAIT:100,CAPTION_PADDING:10,SIZE_XS_BREAKPOINT:480,SIZE_SM_BREAKPOINT:550,SIZE_MD_BREAKPOINT:992,SIZE_LG_BREAKPOINT:1200,AD_CONTAINER_ID_PREFIX:"ad",CONTENT_CONTAINER_ID_PREFIX:"content",CONTROLS_CONTAINER_ID_PREFIX:"controls",VIDEO_CONTAINER_ID_PREFIX:"video",AD_LEARNMORE_ID_PREFIX:"learnMore",AD_COUNTDOWN_ID_PREFIX:"countDown",AD_LEARNMORE_TEXT:"Learn More",PRIMARY_BLOCK:"uvpjs",AD_MODIFIER:"ad",LIVE_MODIFIER:"live",PAUSED_MODIFIER:"paused",STREAMING_MODIFIER:"streaming",ACTIVE_MODIFIER:"active",DISABLED_MODIFIER:"disabled",FULLSCREEN_MODIFIER:"fullscreen",HIDDEN_MODIFIER:"hidden",MOBILE_MODIFIER:"mobile",MUTED_MODIFIER:"muted",TOUCH_MODIFIER:"touch",NO_PREVIEW_MODIFIER:"nopreview",FLASH_MODIFIER:"flash",SIZE_XS_MODIFIER:"xs",SIZE_SM_MODIFIER:"sm",SIZE_MD_MODIFIER:"md",SIZE_LG_MODIFIER:"lg",BLOCK_DELIMITER:"_",BLOCK_ELEMENT_DELIMITER:"__",ELEMENT_DELIMITER:"-",ELEMENT_MODIFIER_DELIMITER:"--",MODIFIER_DELIMETER:"-",CLASS_SELECTOR_PREFIX:".",ID_SELECTOR_PREFIX:"#",css:{CONTENT:"content",VIDEO:"video",AD:"ad",CONTROLS:"controls",PREVIEW_THUMB:"preview-thumb",PREVIEW_BAR:"preview-bar",PREVIEW_GRAD:"preview-grad",TITLE_TEXT:"title-text",DURATION_TEXT:"duration-text",BUFFERING_FRAME:"buffering-frame",PREVIEW_BTN:"btn-preview",LARGE_PLAY_BTN:"btn-large-play",SHARE_BTN:"btn-share",SHARE_BAR:"sharebar",SHARE_TITLE:"share-title",SHARE_CLOSE_BTN:"btn-share-close",SHARE_TWITTER_BTN:"btn-share-twitter",SHARE_FACEBOOK_BTN:"btn-share-facebook",SHARE_MENU:"share-menu",SHARE_LINK_BTN:"btn-share-link",SHARE_CODE_BTN:"btn-share-code",SHARE_LINK_BAR:"share-link-bar",SHARE_LINK_URL:"share-link-url",SHARE_LINK_SELECT_BTN:"btn-share-link-select",SHARE_CODE_BAR:"share-code-bar",SHARE_CODE_SIZE:"share-code-size",SHARE_CODE_TEXT:"share-code-text",SHARE_CODE_SELECT_BTN:"btn-share-code-select",CONTROLS_WRAP:"controls-wrap",CONTROL_BAR:"controlbar",PLAYSTATE_BTN:uvpjs.Type.Button.PLAYSTATE,TIME_CURRENT:"time-current",TIME_DURATION:"time-duration",LIVE_BTN:"btn-live",CLOSED_CAPTION_BTN:uvpjs.Type.Button.CLOSED_CAPTION,SETTINGS_BTN:uvpjs.Type.Button.SETTINGS,VOLUME_BTN:uvpjs.Type.Button.VOLUME,CAST_BTN:"btn-cast",FULLSCREEN_BTN:uvpjs.Type.Button.FULLSCREEN,PROGRESS:"progress",PROGRESS_SLIDER:"progress-slider",PROGRESS_LOADED:"progress-loaded",VOLUME_SLIDER:"volume-slider",SETTINGS_MENU:"settings-menu",SETTINGS_MENU_ITEM_WRAP:"settings-menu-item-wrap",SETTINGS_MENU_ITEM:"settings-menu-item",SETTINGS_MENU_INPUT:"settings-menu-input",COMPONENT:"component",AD_LEARNMORE:"ad-learnmore"},settingsMenu:[{name:"cc",label:"Subtitles/CC",enabled:!0,items:[{name:"background-color",label:"Background color",items:[{value:"#ffffff",label:"White"},{value:"#ffff00",label:"Yellow"},{value:"#008000",label:"Green"},{value:"#00ffff",label:"Cyan"},{value:"#0000ff",label:"Blue"},{value:"#ff00ff",label:"Magenta"},{value:"#ff0000",label:"Red"},{value:"#000000",label:"Black","default":!0}]},{name:"background-opacity",label:"Background opacity",items:[{label:"0%",value:"0"},{label:"25%",value:".25"},{label:"50%",value:".50"},{label:"75%",value:".75"},{label:"100%",value:"1","default":!0}]},{name:"font-color",label:"Font color",items:[{value:"#ffffff",label:"White","default":!0},{value:"#ffff00",label:"Yellow"},{value:"#008000",label:"Green"},{value:"#00ffff",label:"Cyan"},{value:"#0000ff",label:"Blue"},{value:"#ff00ff",label:"Magenta"},{value:"#ff0000",label:"Red"},{value:"#000000",label:"Black"}]},{name:"font-opacity",label:"Font opacity",items:[{label:"0%",value:"0"},{label:"25%",value:".25"},{label:"50%",value:".50"},{label:"75%",value:".75"},{label:"100%",value:"1","default":!0}]},{name:"font-size",label:"Font size",enabled:!0,items:[{value:"50%"},{value:"75%"},{value:"100%","default":!0},{value:"150%"},{value:"200%"},{value:"300%"},{value:"400%"}]},{name:"font-weight",label:"Font weight",items:[{value:"Normal","default":!0},{value:"Bold"}]},{name:"font-family",label:"Font family",items:[{value:"Arial","default":!0},{value:"Arial Black"},{value:"Bookman"},{value:"Comic Sans MS"},{value:"Courier"},{value:"Courier New"},{value:"Garamond"},{value:"Georgia"},{value:"Helvetica"},{value:"Impact"},{value:"Palatino"},{value:"Times"},{value:"Times New Roman"},{value:"Trebuchet MS"},{value:"Verdana"}]},{name:"text-position",label:"Position",enabled:!0,items:[{value:"top-left",label:"Top Left"},{value:"top-center",label:"Top Center"},{value:"top-right",label:"Top Right"},{value:"middle-left",label:"Middle Left"},{value:"middle-center",label:"Middle Center"},{value:"middle-right",label:"Middle Right"},{value:"bottom-left-floated",label:"Bottom Left"},{value:"bottom-center-floated",label:"Bottom Center","default":!0},{value:"bottom-right-floated",label:"Bottom Right"}]}]}],init:function(e){this.debug=uvpjs.debug,this.DEBUG_ID=uvpjs.DebugManager.configParams.SKIN_MANAGER,this.debug&&uvpjs.log(this.DEBUG_ID,"init"),this.VCI=e.vci,this.dom=this.VCI.dom,this._=n,this._skinReadyCB=e.skinReadyCallback,this.mc=uvpjs.mediaCapabilities,this.internalNS=null,this._playbackState=this.mc.EMPTY,this._controlList={},this._controlCache={},this._timers={},this._disabledButtons=[],this._downloaded=0,this._currentVolume=1,this._unmuteVolume=1,this._unmuteClick=!1,this._returnToPause=!1,this._isMouseActive=!1,this._previewCallbackDone=!1,this._canFullscreen=!1,this._hasFullscreenSetup=!1,this._captionsLoaded=!1,this._isVideoCued=!1,this._useSimpleControls=!this.CLIENT_REF.config.enableControls,this._isMouseInPlayer=!0,this._cssPath="",this._cssRules={},this._styleSheet=null,this._previewImage="",this._waitCount=0,this._vendorPrefix=this.mc.getBrowserVendorPrefix(),this._isMSEdge=this.mc.isEdge(),this._isTouch=this.mc.isMobile()&&this.mc.isTouch(),this._hasFirstTouch=!1,this._isIOS=this.mc.isIOS(),this._isMobile=this.mc.isMobile(),this._currURL="",this._currTitle="",this._currThumbnailURL="",this._currShareURL=this.CLIENT_REF.config.mediaServer+"/player",this._currEmbedURL="/player/embed/",this._playstateBtn=null,this._playToggleFrame=null,this._progress=null,this._progressSlider=null,this._controlBar=null,this._previewBtn=null,this._volumeSlider=null,this._volumeBtn=null,this._ccBtn=null,this._castBtn=null,this._settingsBtn=null,this._fullscreenBtn=null,this._isSwipe=!1,this._onSettingsMenuBtnClick=this._onSettingsMenuBtnClick.bind(this),this._onSettingsMenuInputClick=this._onSettingsMenuInputClick.bind(this),this.initialize(e.sessOpts)},destroy:function(){var e=function(){};this._removeUIEventListeners(),this._removeUVPJSEventListeners(),this._removeMenuEventListeners(),this.VCI=null,this.mc=null,this.dom=null,this._playstateBtn=null,this._playToggleFrame=null,this._progress=null,this._progressSlider=null,this._controlBar=null,this._previewBtn=null,this._volumeSlider=null,this._volumeBtn=null,this._ccBtn=null,this._castBtn=null,this._settingsBtn=null,this._fullscreenBtn=null,this._skinReadyCB=e,this._controlList=null,this._controlCache=null,this._timers=null,this._previewImage=null,this._disabledButtons=null,this._captionsLoaded=!1},initialize:function(e){var t=e.customCSS;this.debug&&uvpjs.log(this.DEBUG_ID,"initialize sessOpts",e),this.dom.controls.el=this.VCI.DOMMgr._getOrCreateElement("controls"),this.dom.outer.el.appendChild(this.dom.controls.el),this._previewImage=e.previewImage,this._cssPath=t&&t!==""?t:uvpjs.Configuration.path+this.DEFAULT_SKIN_PATH,this.internalNS="."+this.dom.outer.id+"."+"skin",this._canFullscreen=this._hasNativeFullscreen()&&this.CLIENT_REF.config.includeFullScreenButton,this.debug&&(uvpjs.log(this.DEBUG_ID,"initialize this.dom.outer.id = "+this.dom.outer.id),uvpjs.log(this.DEBUG_ID,"initialize this._cssPath = "+this._cssPath),uvpjs.log(this.DEBUG_ID,"initialize this._previewImage = "+this._previewImage)),this._addBodyListener(),this._hideContainers(),this._setupDOM(),this._addStylesheetToDOMdisableButton_enableButton(e)},_disableButton:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_disableButton",e),this._disable(e);var t=this._queryByElementName(e);if(!t)return;t.disabled=!0},_enableButton:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_enableButton",e);if(n.includes(this._disabledButtons,e))return;this._enable(e);var t=this._queryByElementName(e);if(!t)return;t.disabled=!1},_addUVPJSEventListeners:function(){var e=this.VCI,t=this.internalNS,n=uvpjs.EventType;e.addEventListener(n.CONTENT_DATA_LOADED+t,this._onContentDataLoaded.bind(this)),e.addEventListener(n.RESOURCE_START+t,this._onResourceStart.bind(this)),e.addEventListener(n.AD_POD_START+t,this._onAdPodStart.bind(this)),e.addEventListener(n.AD_START+t,this._onAdStart.bind(this)),e.addEventListener(n.AD_END+t,this._onAdEnd.bind(this)),e.addEventListener(n.AD_POD_END+t,this._onAdPodEnd.bind(this)),e.addEventListener(n.CAPTIONS_READY+t,this._onCaptionsReady.bind(this)),e.addEventListener(n.CONTENT_START+t,this._onContentStart.bind(this)),e.addEventListener(n.CONTENT_END+t,this._onContentEnd.bind(this)),e.addEventListener(n.VIDEO_PROGRESS+t,this._onVideoProgress.bind(this)),e.addEventListener(n.VIDEO_STATE_CHANGE+t,this._onVideoStateChange.bind(this)),e.addEventListener(n.VIDEO_LOADING+t,this._onVideoLoading.bind(this)),e.addEventListener(n.CONTROL_MUTE+t,this._onControlMuteUnmute.bind(this)),e.addEventListener(n.CONTROL_UNMUTE+t,this._onControlMuteUnmute.bind(this)),e.addEventListener(n.RESOURCE_END+t,this._onResourceEnd.bind(this)),e.addEventListener(n.CONTAINER_RESIZE+t,this._onUVPJSResize.bind(this))},_removeUVPJSEventListeners:function(){var e=this.VCI,t=this.internalNS,n=uvpjs.EventType;e&&e instanceof uvpjs.VideoControlInterface&&(e.removeEventListener(n.RESOURCE_START+t),e.removeEventListener(n.AD_POD_START+t),e.removeEventListener(n.AD_START+t),e.removeEventListener(n.AD_END+t),e.removeEventListener(n.AD_POD_END+t),e.removeEventListener(n.CAPTIONS_READY+t),e.removeEventListener(n.CONTENT_START+t),e.removeEventListener(n.CONTENT_END+t),e.removeEventListener(n.VIDEO_PROGRESS+t),e.removeEventListener(n.VIDEO_STATE_CHANGE+t),e.removeEventListener(n.VIDEO_LOADING+t),e.removeEventListener(n.CONTROL_MUTE+t),e.removeEventListener(n.CONTROL_UNMUTE+t),e.removeEventListener(n.RESOURCE_END+t),e.removeEventListener(n.CONTAINER_RESIZE+t))},_addUIEventListeners:function(){var e=this.mc.isIE()?"change":"input",t=this.dom.outer.el,n=this.dom.video.el,r=this.css;n.setAttribute("tabindex","-1");var i=["_hideMenu","_onUVPJSGestureEvent","_onLoadedMetadata","_onPreviewBtn","_onControlBarMouseOver","_onControlBarMouseOut","_onProgressMouseOver","_onProgressMouseOut","_onProgressSliderEvent","_onVolumeSliderEvent","_onPlayToggle","_onVolumeBtnEvent","_onLiveBtnClick","_onClosedCaptionBtnClick","_onSettingsBtnClick","_onCastBtnClick","_handleFullscreenEvent","_onFullscreenBtnClick","_onUVPJSResize","_onShareBtn","_onShareBarClick"],s=i.length;while(s--)this[i[s]]=this[i[s]].bind(this);var o=this,u=this._onUVPJSGestureEvent,a=this._onProgressSliderEvent,f=this._onVolumeSliderEvent,l=this._onVolumeBtnEvent;document.addEventListener("click",this._hideMenu,!1),t.addEventListener("mouseenter",u,!0),t.addEventListener("mouseleave",u,!0),t.addEventListener("mousemove",u,!0),t.addEventListener("mousedown",u,!1),t.addEventListener("mouseup",u,!1),t.addEventListener("click",u,!1),t.addEventListener("touchstart",u,!0),t.addEventListener("touchend",u,!0),t.addEventListener("touchmove",u,!0),this._isIOS&&n.addEventListener("loadedmetadata",this._onLoadedMetadata,!0),this._shareBtn=this._queryByElementName(r.SHARE_BTN),this._shareBtn.addEventListener("click",this._onShareBtn,!1),this._shareBar=this._queryByElementName(r.SHARE_BAR),this._shareBar.addEventListener("click",this._onShareBarClick,!1),this._previewBtn=this._queryByElementName(r.PREVIEW_BTN),this._previewBtn.addEventListener("click",this._onPreviewBtn,!0),this._previewBtn.addEventListener("touchend",this._onPreviewBtn,!0),this._previewBtn.setAttribute("tabindex","-1"),this._controlBar=this._queryByElementName(r.CONTROL_BAR),this._controlBar.addEventListener("touchstart",this._onControlBarMouseOver,!1),this._controlBar.addEventListener("touchend",this._onControlBarMouseOut,!1),this._controlBar.addEventListener("mouseover",this._onControlBarMouseOver,!1),this._controlBar.addEventListener("mouseout",this._onControlBarMouseOut,!1),this._progress=this._queryByElementName(r.PROGRESS),this._progress.addEventListener("mouseover",this._onProgressMouseOver,!1),this._progress.addEventListener("mouseout",this._onProgressMouseOut,!1),this._progressSlider=this._queryByElementName(r.PROGRESS_SLIDER),this._progressSlider.addEventListener(e,a,!1),this._progressSlider.addEventListener("mousedown",a,!1),this._progressSlider.addEventListener("mouseup",a,!1),this._progressSlider.addEventListener("touchstart",a,!0),this._progressSlider.addEventListener("touchend",a,!0),this._progressSlider.addEventListener("keyup",function(e){if((e.keyCode==37||e.keyCode==39)&&document.activeElement.className=="uvpjs__"+r.PROGRESS_SLIDER){var t=JSON.parse(JSON.stringify(parseFloat(document.activeElement.value)));switch(e.keyCode){case 37:o._onProgressSliderChange(e,t-.01);break;case 39:o._onProgressSliderChange(e,t+.01)}}},!0),this._progressSlider.setAttribute("tabindex",document.getElementById("CastIntro")?"-1":"3"),this._volumeSlider=this._queryByElementName(r.VOLUME_SLIDER),this.mc.supportsVolume()&&!this._isTouch?(this._volumeSlider.addEventListener(e,f,!1),this._volumeSlider.addEventListener("mouseover",f,!1),this._volumeSlider.addEventListener("mouseout",f,!1),this._volumeSlider.addEveolumeBtn.focus()},!1),this._volumeSlider.setAttribute("tabindex","7")):this._disable(this.css.VOLUME_SLIDER),this._playstateBtn=this._queryByElementName(r.PLAYSTATE_BTN),this._playstateBtn.addEventListener("click",this._onPlayToggle,!1),this._playstateBtn.setAttribute("tabindex",document.getElementById("CastIntro")?"-1":"2"),this._playToggleFrame=this._queryByElementName(r.LARGE_PLAY_BTN),this._playToggleFrame.addEventListener("click",this._onPlayToggle,!1),this._playToggleFrame.setAttribute("tabindex","-1"),this._volumeBtn=this._queryByElementName(r.VOLUME_BTN),this._volumeBtn.addEventListener("click",l,!1),this._volumeBtn.addEventListener("mouseover",l,!1),this._volumeBtn.addEventListener("mouseout",l,!1),this._volumeBtn.addEventListener("keyup",function(e){e.keyCode==38&&(o._showVolumeSlider(e),document.getElementsByClassName("uvpjs__"+o.css.VOLUME_SLIDER)[0].focus())},!1),this._volumeBtn.setAttribute("tabindex",document.getElementById("CastIntro")?"-1":"8"),this._castBtn=this._queryByElementName(r.CAST_BTN),this._castBtn.addEventListener("click",this._onCastBtnClick,!1),this._castBtn.setAttribute("tabindex",document.getElementById("CastIntro")?"-1":"9"),this._ccBtn=this._queryByElementName(r.CLOSED_CAPTION_BTN),this._ccBtn.addEventListener("click",this._onClosedCaptionBtnClick,!1),this._ccBtn.setAttribute("tabindex",document.getElementById("CastIntro")?"-1":"4"),this._liveBtn=this._queryByElementName(r.LIVE_BTN),this._liveBtn.addEventListener("click",this._onLiveBtnClick,!1),this._settingsBtn=this._queryByElementName(r.SETTINGS_BTN),this._settingsBtn.addEventListener("click",this._onSettingsBtnClick,!1),this._settingsBtn.setAttribute("tabindex",document.getElementById("CastIntro")?"-1":"6"),addResizeListener(t,this._onUVPJSResize),this._updateProgressSlider=this._updateSliderUI.bind(this,this._progressSlider,this.css.PROGRESS_SLIDER),this._fullscreenBtn=this._queryByElementName(r.FULLSCREEN_BTN),this._fullscreenBtn.setAttribute("tabindex",document.getElementById("CastIntro")?"-1":"10"),this._setupFullscreenEventListener()},_removeUIEventListeners:function(){var e=this.mc.isIE()?"change":"input",t=this.dom.outer.el,n=this.dom.video.el,r=this._onUVPJSGestureEvent,i=this._onProgressSliderEvent,s=this._onVolumeSliderEvent,o=this._onVolumeBtnEvent;document.removeEventListener("click",this._hideMenu,!1),t.removeEventListener("mouseenter",r,!0),t.removeEventListener("mouseleave",r,!0),t.removeEventListener("mousemove",r,!0),t.removeEventListener("mousedown",r,!1),t.removeEventListener("mouseup",r,!1),t.removeEventListener("click",r,!1),t.removeEventListener("touchstart",r,!0),t.removeEventListener("touchend",r,!0),t.removeEventListener("touchmove",r,!0),this._isIOS&&n.removeEventListener("loadedmetadata",this._onLoadedMetadata,!1),this._shareBtn.removeEventListener("click",this._onShareBtn,!1),this._shareBar.removeEventListener("click",this._onShareBarClick,!1),this._previewBtn.removeEventListener("click",this._onPreviewBtn,!0),this._previewBtn.removeEventListener("touchend",this._onPreviewBtn,!0),this._controlBar.removeEventListener("mouseover",this._onControlBarMouseOver,!1),this._controlBar.removeEventListener("mouseout",this._onControlBarMouseOut,!1),this._controlBar.removeEventListener("touchstart",this._onControlBarMouseOver,!1),this._controlBar.removeEventListener("touchend",this._onControlBarMouseOut,!1),this._progress.removeEventListener("mouseover",this._onProgressMouseOver,!1),this._progress.removeEventListener("mouseout",this._onProgressMouseOut,!1),this._progressSlider.removeEventListener(e,i,!1),this._progressSlider.removeEventListener("mousedown",i,!1),this._progressSlider.removeEventListener("mouseup",i,!1),this._progressSlider.removeEventListener("touchstart",i,!0),this._progressSlider.removeEventListener("touchend",i,!0),this._volumeSlider.removeEventListener(e,s,!1),this._volumeSlider.removeEventListener("mouseover",s,!1),this._volumeSlider.removeEventListener("mouseout",s,!1),this._playstateBtn.removeEventListener("click",this._onPlayToggle,!1),this._playToggleFrame.removeEventListener("click",this._onPlayToggle,!1),this._volumeBtn.removeEventListener("click",o,!1),this._volumeBtn.removeEventListener("mouseover",o,!1),this._volumeBtn.removeEventListener("mouseout",o,!1),this._ccBtn.removeEventListener("click",this._onClosedCaptionBtnClick,!1),this._liveBtn.removeEventListener("click",this._onLiveBtnClick,!1),this._castBtn.removeEventListener("click",this._onCastBtnClick,!1),this._settingsBtn.removeEventListener("click",this._onSettingsBtnClick,!1),removeResizeListener(t,this._onUVPJSResize),this._canFullscreen&&(this._fullscreenBtn.removeEventListener("click",this._onFullscreenBtnClick,!1),document.removeEventListener(this.mc.getFullscreenEventName(),this._handleFullscreenEvent,!1))},_ae,this._cssPath)},_h|(e=!1);return e},_waitForControls:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_waitForControls.");var t=setTimeout(function(){if(++this._waitCount>100)return;if(this._haveControlsLoaded()){this.debug&&uvpjs.log(this.DEBUG_ID,"controls loaded."),e.call(this);return}this.debug&&uvpjs.log(this.DEBUG_ID,"controls not loaded.",this._waitCount),this._waitForControls(e)}.bind(this),50)},_setupDOM:function(){var e=this.dom,t=this.css;this.debug&&uvpjs.log(this.DEBUG_ID,"creating skin controls this.dom.outer.id = ",this.dom.outer.id),i(e.outer.el,this.PRIMARY_BLOCK),i(e.content.el,this._getClassName(t.CONTENT)),i(e.controls.el,this._getClassName(t.CONTROLS)),e.ad.el&&i(e.ad.el,this._getClassName(t.AD)),this._hide(t.CONTROLS),this._setupControlsContainer(),this._createAdLearnMoreButton(),this._show(t.CONTROLS),typeof this.CLIENT_REF.castSender!="undefined"&&this.CLIENT_REF.castSender.enabled&&this._enableButton(t.CAST_BTN)},_finalizeSkin:function(){this._disableInactiveButtons(),this._addUVPJSEventListeners(),this._addUIEventListeners(),this._determineBreakpoint(),this._updateVolumeUI(this.VCI.getVolume()),this.mc.isMobile()&&this._addModifier(this.PRIMARY_BLOCK,this.MOBILE_MODIFIER),this._skinReadyCB(),setTimeout(this._showContainers.bind(this),this.INITIAL_DOM_SETUP_WAIT)},_addBodyListener:function(){var e=document.querySelector("body"),t=this,n;e.addEventListener("keyup",function(e){"use strict";typeof n!=undefined&&window.clearTimeout(n),t._hasHidden(t.css.CONTROLS_WRAP)&&(t._showControlBar(),document.getElementsByClassName("uvpjs__"+t.css.PLAYSTATE_BTN)[0].focus())})},_hideContainers:function(){var e=this.dom;e.outer.el.style.visibility="hidden",e.content.el.style.visibility="hidden",e.video.el.style.visibility="hidden",e.controls.el.style.visibility="hidden"},_showContainers:function(){var e=this.dom;e.outer.el.style.visibility="visible",e.content.el.style.visibility="visible",e.video.el.style.visibility="visible",e.controls.el.style.visibility="visible"},_appendControlList:function(e){this._controlList[this.ID_SELECTOR_PREFIX+this.dom.controls.id+" "+this.CLASS_SELECTOR_PREFIX+e]=e},_setupControlsContainer:function(){var e=this.css,t=[{el:"PREVIEW_THUMB",type:"img",src:"",cls:this._getClassName(e.PREVIEW_THUMB,this.HIDDEN_MODIFIER)},{el:"PREVIEW_BAR",type:"div",cls:this._getClassName(e.PREVIEW_BAR,this.HIDDEN_MODIFIER),children:[{el:"PREVIEW_GRAD",type:"span",text:""},{el:"TITLE_TEXT",type:"span",text:""},{el:"DURATION_TEXT",type:"span",text:""}]},{el:"BUFFERING_FRAME",type:"div",label:"Buffering",cls:this._getClassName(e.BUFFERING_FRAME,this.HIDDEN_MODIFIER)},{el:"PREVIEW_BTN",type:"button",label:"Play Video",cls:this._getClassName(e.PREVIEW_BTN,this.HIDDEN_MODIFIER)},{el:"LARGE_PLAY_BTN",type:"button",label:"Play Video",cls:this._getClassName(e.LARGE_PLAY_BTN,this.HIDDEN_MODIFIER)},{el:"SHARE_BTN",type:"button",label:"Share",cls:this._getClassName(e.SHARE_BTN,this.HIDDEN_MODIFIER)},{el:"SHARE_BAR",type:"div",cls:this._getClassName(e.SHARE_BAR,this.HIDDEN_MODIFIER),children:[{el:"SHARE_TITLE",type:"span",text:""},{el:"SHARE_CLOSE_BTN",type:"button",label:"X"},{el:"SHARE_TWITTER_BTN",type:"button",label:"Twitter"},{el:"SHARE_FACEBOOK_BTN",type:"button",label:"Facebook"},{el:"SHARE_MENU",type:"div",children:[{el:"SHARE_LINK_BTN",type:"button",cls:this._getClassName(e.SHARE_LINK_BTN,this.ACTIVE_MODIFIER)},{type:"raw",text:"/"},{el:"SHARE_CODE_BTN",type:"button"}]},{el:"SHARE_LINK_BAR",type:"div",children:[{el:"SHARE_LINK_URL",type:"text",value:"//cbsprt.co/"},{el:"SHARE_LINK_SELECT_BTN",type:"button"}]},{el:"SHARE_CODE_BAR",type:"div",cls:this._getClassName(e.SHARE_CODE_BAR,this.HIDDEN_MODIFIER),children:[{el:"SHARE_CODE_SIZE",type:"select",children:[{type:"option",label:"Small (320x180)",value:"320,180"},{type:"option",label:"Medium (480x270)",value:"480,270"},{type:"option",label:"Large (640x360)",value:"640,360"}]},{el:"SHARE_CODE_TEXT",type:"text",value:""},{el:"SHARE_CODE_SELECT_BTN",type:"button"}]}]},{el:"CONTROLS_WRAP",type:"div",cls:this._getClassName(e.CONTROLS_WRAP,this.HIDDEN_MODIFIER),children:[{el:"CONTROL_BAR",type:"div",children:[{el:"PLAYSTATE_BTN",type:"button",label:"Play/Pause"},{el:"TIME_CURRENT",type:"span",text:this.NULL_TIME},{el:"TIME_DURATION",type:"span",text:this.NULL_TIME},{el:"LIVE_BTN",type:"button",label:"Live"},{el:"CLOSED_CAPTION_BTN",type:"button",label:"Closed Captions"},{el:"SETTINGS_BTN",type:"button",label:"Settings"},{el:"VOLUME_BTN",type:"button",label:"Volume"},{el:"CAST_BTN",type:"button",label:"ChromeCast",id:"CastButton",cls:"DISABLED "+this._getClassName(e.CAST_BTN,this.DISABLED_MODIFIER),enabled:!1},{el:"FULLSCREEN_BTN",type:"button",label:"Fullscreen"}]},{el:"PROGRESS",type:"div",cls:this._getClassName(e.PROGRESS,this.DISABLED_MODIFIER),children:[{el:"PROGRESS_SLIDER",type:"range",value:0,step:1e-4},{el:"PROGRESS_LOADED",type:"progress",value:0,step:1e-4}]},{el:"VOLUME_SLIDER",type:"range",value:1,step:.05,cls:this._getClassName(e.VOLUME_SLIDER,this.HIDDEN_MODIFIER)},{el:"SETTINGS_MENU",type:"div",cls:this._getClassName(e.SETTINGS_MENU,this.HIDDEN_MODIFIER),children:[]}]}];this.dom.controls.el.innerHTML=this._templateToHTML(t),this.CLIENT_REF.config.useBrowserControls==1&&(this.dom.controls.el.style.cssText="display:none !important;")},_generateSettingsMenu:function(e,t){var r=this.DEBUG_ID,i=this.debug,s=this.VCI.getCaptionsStyle(),o,u,a,f,l,c,h,p,d,v,m;this.debug&&uvpjs.log(r,"_generateSettingsMenu",e),o=function(e,t){if(e.enabled===!1)return;return v={},e.value?(v.el="SETTINGS_MENU_INPUT",v.type="menu",v.label=e.label||e.value,v.value=e.value,v.property=n.last(t.split(":")),v.selected=e["default"],v):(v.el="SETTINGS_MENU_ITEM",v.type="button",v.label=e.label,v.target=t,v)},u=n.map(e,function(e){return l=t,e.name&&(l=n.isEmpty(t)?e.name:[t,e.name].join(":")),o(e,l)});if(t){f=this._findMenuItem(t),l=t.split(":").slice(0,-1).join(":"),d=o(f,l),d.cls=this._getClassName(this.css.SETTINGS_MENU_ITEM)+"--back";var g={el:"SETTINGS_MENU_ITEM_WRAP",type:"wrap-start"},y={type:"wrap-end"};u.unshift(g),u.unshift(d),u.push(y)}c=this._queryByElementName(this.css.SETTINGS_MENU),a=document.createRange(),a.selectNodeContents(c),a.deleteContents(),c.insertAdjacentHTML("beforeend",this._templateToHTML(u)),h=this._queryAllByElementName(this.css.SETTINGS_MENU_ITEM);var b=this;if(h){m=h.length;while(m--)h[m].tabIndex=5,h[m].addEventListener("click",this._onSettingsMenuBtnn(){h[0].focus()},0)}p=this._queryAllByElementName(this.css.SETTINGS_MENU_INPUT);if(p){m=p.length;while(m--)p[m].tabIndex=5,p[m].addEventListener("click",this._onSettingsMenuInputClick)}},_removeMenuEventListeners:function(){var e=this._queryAllByElementName(this.css.SETTINGS_MENU_ITEM),t;if(e){t=e.length;while(t--)e[t].removeEventListener("click",this._onSettingsMenuBtnClick)}var n=this._queryAllByElementName(this.css.SETTINGS_MENU_INPUT);if(n){t=n.length;while(t--)n[t].removeEventListener("click",this._onSettingsMenuInputClickt.name===e})}),t},_createAdLearnMoreButton:function(){var e=document.createElement("div");e.id=uvpjs.domConstants.AD_LEARNMORE_ID_PREFIX+this.ID_SELECTOR_PREFIX+this.dom.outer.id,e.className=this._getClassName(this.css.AD_LEARNMORE,this.HIDDEN_MODIFIER),e.innerHTML=this.AD_LEARNMORE_TEXT,e.setAttribute("aria-label",this.AD_LEARNMORE_TEXT),this.dom.controls.el.appendChild(e)},_setupPreview:function(){this.debug&&uvpjs.log(this.DEBUG_ID,"_setupPreview");var e=this.css;this._previewCallbackDone=!1,this._removeModifier(this.PRIMARY_BLOCK,this.AD_MODIFIER),this._removeModifier(this.PRIMARY_BLOCK,this.NO_PREVIEW_MODIFIER),this._addModifier(this.PRIMARY_BLOCK,this.PAUSED_MODIFIER),this._hide(e.BUFFERING_FRAME),this._show(e.PREVIEW_THUMB),this._disable(e.PROGRESS),this._enable(e.PREVIEW_BTN),this._show(e.PREVIEW_BTN),this._hide(e.LARGE_PLAY_BTN),this._disable(e.LARGE_PLAY_BTN),this._useSimpleControls?this._hideControlBar():this._showControlBar()},_disableInactiveButtons:function(){this._disableCaptions(),this._canFullscreen||this._disableButton(this.css.FULLSCREEN_BTN),this.mc.supportsMute()||this._disableButton(this.css.VOLUME_BTN)},_onContentDataLoaded:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onContentDataLoaded",e),this._isVideoCued=!1,e.payload.vidState.isEmbedable?this._enableButton(this.css.SHARE_CODE_BTN):this._disableButton(this.css.SHARE_CODE_BTN)},_onResourceStart:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onResourceStart",e),this._hide(this.css.SHARE_BAR),this._hideControlBar()},_onAdPodStart:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onAdPodStart"),this._previewCallbackDone=!0;if(this.dom.outer.id!==e.target)return;this._addModifier(this.PRIMARY_BLOCK,this.AD_MODIFIER),this._addModifier(this.PRIMARY_BLOCK,this.NO_PREVIEW_MODIFIER),this._disableProgress(),this._show(this.css.PROGRESS);if(typeof e.payload.adData!="undefined"&&typeof e.payload.adData.clickThru!="undefined"&&e.payload.adData.clickThru!=""){this._show(this.css.AD_LEARNMORE),this._addModifier(this.PRIMARY_BLOCK,this.css.AD_LEARNMORE);return}this._hide(this.css.AD_LEARNMORE),this._removeModifier(this.PRIMARY_BLOCK,this.css.AD_LEARNMORE)},_onAdStart:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onAdStart",e),this._disableButton(this.css.FULLSCREEN_BTN)},_onAdEnd:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onAdEnd",this.dom.outer.id,e.target),this._enableButton(this.css.FULLSCREEN_BTN)},_onAdPodEnd:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onAdPodEnd");if(this.dom.outer.id!==e.target)return;this._removeModifier(this.PRIMARY_BLOCK,this.AD_MODIFIER),this._removeModifier(this.PRIMARY_BLOCK,this.NO_PREVIEW_MODIFIER),this._removeModifier(this.PRIMARY_BLOCK,this.css.AD_LEARNMORE),this._hide(this.css.PROGRESS),this._hide(this.css.AD_LEARNMORE)},_onCaptionsReady:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onCaptionsReady",e);if(this.dom.outer.id!==e.target)return;this._enableCaptions()},_onCaptionsUnavailable:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onCaptionsUnavailable",e);if(this.dom.outer.id!==e.target)return;this._disableCaptions()},_onContentStart:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onContentStart",e),this._previewCallbackDone=!0;if(this.dom.outer.id!==e.target)return;this._enableProgress(),this._show(this.css.PROGRESS),this._hasAd()&&(this._removeModifier(this.PRIMARY_BLOCK,this.AD_MODIFIER),this._removeModifier(this.PRIMARY_BLOCK,this.NO_PREVIEW_MODIFIER),this._hide(this.css.AD_LEARNMORE)),this._isLive()?this._addModifier(this.PRIMARY_BLOCK,this.LIVE_MODIFIER):this._isStreaming()&&this._addModifier(this.PRIMARY_BLOCK,this.STREAMING_MODIFIER),e.payload.contentData.isFlash&&this._addModifier(this.PRIMARY_BLOCK,this.FLASH_MODIFIER)},_onContentEnd:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onContentEnd");if(this.dom.outer.id!==e.target)return;this._disableProgress(),this._hide(this.css.PROGRESS),this._removeModifier(this.PRIMARY_BLOCK,this.LIVE_MODIFIER),this._removeModifier(this.PRIMARY_BLOCK,this.STREAMING_MODIFIER),this._removeModifier(this.PRIMARY_BLOCK,this.FLASH_MODIFIER)},_onControlMuteUnmute:function(e){if(!n.has(e,"target")||this.dom.outer.id!==e.target)return;uvpjs.log(this.DEBUG_ID,"_onControlMuteUnmute",e);if(!n.has(e,"type"))return;this.CLIENT_REF.config.silent=!1;if(e.type==="controlMute"){this._updateVolumeUI(0);return}e.type==="controlUnmute"&&this._updateVolumeUI(this._currentVolume)},_onResourceEnd:function(e){if(!n.has(e,"target")||this.dom.outer.id!==e.target)return;uvpjs.log(this.DEBUG_ID,"_onResourceEnd",e),this._hideControlBar(1)},_onVolumeChange:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onVolumeChange",e);if(n.isUndefined(e))return;var t=this.VCI.getPlayerMuted();if(this._currentVolume===0&&!t&&this._unmuteClick){this._unmuteClick=!1,this._currentVolume=this._unmuteVolume,this.VCI.setVolume(this._unmuteVolume);return}e===0&&this._currentVolume>0?this.VCI.mute():this._currentVolume===0&&e>0&&this.VCI.unMute(),this._updateVolumeUI(e),this._currentVolume=e},_onVideoProgress:function(e){var t=this.VCI.getVolume();t!==this._currentVolume&&this._onVolumeChange(t);if(!n.has(e,"target")||this.dom.outer.id!==e.target)return;if(!this._hasPaused()&&this._hasActive(this.css.PROGRESS_SLIDER))return;var r=e.payload,i=r.playbackState;i!==this._playbackState&&(this._playbackState=i,this._updatePlaybackStateUI(this._playbackState));var s=this._queryByElementName(this.css.TIME_DURATION),o=this._queryByElementName(this.css.TIME_CURRENT);s.innerHTML=this._formatTimestampByType(this.css.TIME_DURATION,parseInt(r.duration)),o.innerHTML=this._formatTimestampByType(this.css.TIME_CURRENT,parseInt(r.currentTime)),this._updateProgressLoad(r),i===this.mc.PLAYING&&this._updateProgressUI(r),cbsiPlayer.config.startTime&&cbsiPlayer.api.getCurrentPlaybackState().currentTime>.1&&!r.isAd&&(cbsiPlayer.api.seekTo(cbsiPlayer.api.getCurrentPlaybackState().currentTime+(cbsiPlayer.config.startTime-cbsiPlayer.api.getCurrentPlaybackState().currentTime)),cbsiPlayer.config.startTime=!1)},_onVideoLoading:function(e){if(!n.has(e,"target")||this.dom.outer.id!==e.target)return;if(!n.isObject(e)||!n.has(e,"payload.data"))return;this._updateProgressLoad(e.payload.data)},_onVideoStateChange:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onVideoStateChange",e);if(!n.isObject(e)||this.dom.outer.id!==e.target)return;if(!n.isObject(e.payload)||!n.isNumber(parseInt(e.payload.newState)))return;var t=e.payload.newState;t!==this._playbackState&&(this._playbackState=t,this._updatePlaybackStateUI(this._playbackState))},_updatePlaybackStateUI:function(e){var t=this.css;this.debug&&uvpjs.log(this.DEBUG_ID,"_updatePlaybackStateUI newState = ",e);switch(e){case this.mc.PLAYING:this._removeModifier(this.PRIMARY_BLOCK,this.PAUSED_MODIFIER),this._hide(t.PREVIEW_THUMB),this._disable(t.PREVIEW_BTN),this._hide(t.PREVIEW_BTN),this._hide(t.LARGE_PLAY_BTN),this._useSimpleControls&&this._enable(t.LARGE_PLAY_BTN),this._hide(t.BUFFERING_FRAME),this._enable(t.PLAYSTATE_BTN);break;case this.mc.PAUSED:this._addModifier(this.PRIMARY_BLOCK,this.PAUSED_MODIFIER),this._hide(t.PREVIEW_THUMB),this._disable(t.PREVIEW_BTN),this._hide(t.PREVIEW_BTN),this._show(t.LARGE_PLAY_BTN),this._enable(t.LARGE_PLAY_BTN),this._hide(t.BUFFERING_FRAME),this._enable(t.PLAYSTATE_BTN),this._showControlBar();break;case this.mc.BUFFERING:this._removeModifier(this.PRIMARY_BLOCK,this.PAUSED_MODIFIER),this._hide(t.PREVIEW_THUMB),this._disable(t.PREVIEW_BTN),this._hide(t.PREVIEW_BTN),this._hide(t.LARGE_PLAY_BTN),this._disable(t.LARGE_PLAY_BTN),this._show(t.BUFFERING_FRAME),this._disable(t.PLAYSTATE_BTN);break;case this.mc.LOADING:this._removeModifier(this.PRIMARY_BLOCK,this.PAUSED_MODIFIER),this._show(t.PREVIEW_THUMB),this._disable(t.PREVIEW_BTN),this._hide(t.PREVIEW_BTN),this._hide(t.LARGE_PLAY_BTN),this._disable(t.LARGE_PLAY_BTN),this._show(t.BUFFERING_FRAME),this._showControlBar(),this._disable(t.PLAYSTATE_BTN);break;case this.mc.EMPTY:case this.mc.STOPPED:this._removeModifier(this.PRIMARY_BLOCK,this.PAUSED_MODIFIER),this._hide(t.PREVIEW_THUMB),this._disable(t.PREVIEW_BTN),this._hide(t.PREVIEW_BTN),this._hide(t.LARGE_PLAY_BTN),this._disable(t.LARGE_PLAY_BTN),this._hide(t.BUFFERING_FRAME),this._enable(t.PLAYSTATE_BTN)}},rogressSlider(t)},_updateVolumeUI:function(e){var t=this.VCI.getPlayerMuted(),n=t?0:e;this._volumeSlider.value=n,this._updateSliderUI(this._volumeSlider,this.css.VOLUME_SLIDER,n);var r=this._getClassName(this.css.VOLUME_BTN,this.MUTED_MODIFIER);if(t){i(this._volumeBtn,r);return}s(this._volumeBtn,r)},_updateSliderUI:function(e,t,r){if(n.isUndefined(this._vendorPrefix)||n.isUndefined(e))return;var i=this,s={};s.id="#"+this.dom.outer.id,s.cls=i._getClass(t),s.pseudo={moz:"::-moz-range-track",webkit:"::-webkit-slider-runnable-track"}[i._vendorPrefix],this._isMSEdge&&(s.pseudo=""),s.add=function(e,t,r){if(n.isUndefined(this.pseudo))return;var s=this.id+(t||"")+" "+this.cls+(r||"")+this.pseudo;i._addCSSRule(s,"background-size",e*100+"% 100%")},s.before=function(e,t){this.add(e,i._getClass(i.PRIMARY_BLOCK,t),null)},s.after=function(e,t){this.add(e,null,t)};if(t===i.css.VOLUME_SLIDER){s.add(r);return}var o=r*e.offsetWidth,u=(.5-r)*e.offsetHeight,a=o/e.offsetWidth,f=(o+u)/e.offsetWidth;e.value=r;var l=i._hasAd();s.before(a,l?i.AD_MODIFIER:null),l||s.after(f,":hover"),this._isTouch&&s.before(f,i.TOUCH_MODIFIER)},_onUVPJSGestureEvent:function(e){var t=!1;switch(e.type){case"mouseenter":this._onUVPJSMouseEnter(e);break;case"mouseleave":this._onUVPJSMouseLeave(e);break;case"mousemove":this._onUVPJSMouseMove(e);break;case"mousedown":this._onUVPJSMouseDown(e);break;case"mouseup":this._onUVPJSMouseUp(e);break;case"click":this._showControlBar(e),t=!0;break;case"touchstart":this._onUVPJSTouchStart(e);break;case"touchend":this._onUVPJSTouchEnd(e),t=!0;break;case"touchmove":this._onUVPJSTouchMove(e)}!this._hasFirstTouch&&t&&(this._hasFirstTouch=!0,this.VCI.handleFirstGesture(this._getTargetInfo(e)))},_getTargetInfo:function(e){var t=e.target,n=t.className.indexOf(this.css.CONTROLS)!==-1||t.className.indexOf(this.css.CONTROL_BAR)!==-1||t.className.indexOf(this.css.TIME_CURRENT)!==-1||t.className.indexOf(this.css.TIME_DURATION)!==-1||t.className.indexOf(this.css.CLOSED_CAPTION_BTN)!==-1||t.className.indexOf(this.css.SETTINGS_BTN)!==-1||t.className.indexOf(this.css.VOLUME_BTN)!==-1||t.className.indexOf(this.css.CAST_BTN)!==-1,r=t.className.indexOf(this.css.FULLSCREEN_BTN)!==-1,i=this._hasAd()&&!n,s=t.className.indexOf(this.css.VOLUME_BTN)!==-1,o=t.className.indexOf(this.css.PLAYSTATE_BTN)!==-1||t.className.indexOf(this.css.LARGE_PLAY_BTN)!==-1||t.className.indexOf(this.css.PREVIEW_BTN)!==-1||t.className.indexOf(this.css.LIVE_BTN)!==-1||i;return e.isVolumeButton=s,e.isPlayPauseToggle=o,e.isFullscreenButton=r,e},_onProgressSliderEvent:function(e){switch(e.type){case"input":case"change":this._onProgressSliderChange(e);break;case"touchstart":case"mousedown":this._onProgressSliderStart(e);break;case"touchend":case"mouseup":this._onProgressSliderEnd(e);break;default:}},_onVolumeSliderEvent:function(e){switch(e.type){case"input":case"change":this._onVolumeSliderChange(e);break;case"mouseover":this._showVolumeSlider(e);break;case"mouseout":this._hideVolumeSlider(e);break;default:}},_onVolumeBtnEvent:function(e){switch(e.type){case"click":this._onVolumeBtnClick(e);break;case"mouseover":this._showVolumeSlider(e);break;case"mouseout":this._hideVolumeSlider(e);break;default:}},_onUVPJSTouchStart:function(e){e.stopPropagation(),this._isSwipe=!1,this.debug&&uvpjs.log(this.DEBUG_ID,"_onUVPJSTouchStart");if(!this._previewCallbackDone){this.debug&&uvpjs.log(this.DEBUG_ID,"_onUVPJSTouchStart preview not called yet.");return}if(this._hasDisabled(this.css.CONTROLS))return;var t=this.VCI.getCurrentPlaybackState().playbackState;if(t===this.mc.EMPTY)return;this._onUVPJSTouchStart.timeStamp=e.timeStamp,this._onUVPJSTouchStart.isFirstTouch=!this._hasModifier(this.PRIMARY_BLOCK,this.TOUCH_MODIFIER),this._addModifier(this.PRIMARY_BLOCK,this.TOUCH_MODIFIER),this._showControlBar();if(e.target===this._progressSlider){var n=1-(e.target.clientWidth-e.layerX)/e.target.clientWidth;this._onProgressSliderChange(e,n)}},_onUVPJSTouchMove:function(e){e.stopPropagation(),this._isSwipe=!0,this.debug&&uvpjs.log(this.DEBUG_ID,"_onUVPJSTouchMove"),this._hasPaused()||this._addModifier(this.PRIMARY_BLOCK,this.TOUCH_MODIFIER),this._showControlBar()},_onUVPJSTouchEnd:function(e){e.stopPropagation();var t=this;this.debug&&uvpjs.log(this.DEBUG_ID,"_onUVPJSTouchEnd");if(this._hasDisabled(this.css.CONTROLS))return;this._onUVPJSTouchStart.isFirstTouch&&(e.stopPropagation(),e.preventDefault()),clearTimeout(this._timers.touchend),this._timers.touchend=setTimeout(function(){if(t._hasPaused())return;t._removeModifier(t.PRIMARY_BLOCK,t.ACTIVE_MODIFIER),t._removeModifier(t.css.PROGRESS,t.ACTIVE_MODIFIER),t._removeModifier(t.css.CONTROL_BAR,t.ACTIVE_MODIFIER),t._hideControlBar(0)},this.HIDE_DELAY)isMouseActive=!1},_onUVPJSMouseDown:function(e){e.stopPropagation();if(this._hasAd())return;this._isMouseActive=!0},_MouseInPlayer=!0},_onUVPJSMouseMove:function(e){if(!this._isMouseInPlayer){this._onUVPJSMouseMoveStop(e);return}this._showControlBar(),this._addModifier(this.PRIMARY_BLOCK,this.ACTIVE_MODIFIER),typeof this._timers.mouseMove!="undefined"&&clearTimeout(this._timers.mouseMove),this._timers.mouseMove=setTimeout(this._onUVPJSMouseMoveStop.bind(this,e),this.HIDE_DELAY)},_onUVPJSMouseMoveStop:function(e){if(this._isMouseActive)return;this._hideControlBar(0),this._removeModifier(this.PRIMARY_BLOCK,this.ACTIVE_MODIFIER),typeof this._timers.mouseMove!="undefined"&&clearTimeout(this._timers.mouseMove)},_onUVPJSMouseLeave:function(e){if(this.dom.outer.el!==e.target)return;if(this._hasPaused())return;this._isMouseInPlayer=!1,this._hideControlBar(this.LEAVE_DELAY),this._removeModifier(this.PRIMARY_BLOCK,this.ACTIVE_MODIFIER),typeof this._timers.mouseMove!="undefined"&&clearTimeout(this._timers.mouseMove)},_onControlBarMouseOver:function(e){e.stopPropagation(),this._addModifier(this.css.CONTROL_BAR,this.ACTIVE_MODIFIER)},_onControlBarMouseOut:function(e){e.stopPropagation(),this._removeModifier(this.css.CONTROL_BAR,this.ACTIVE_MODIFIER)},_onUVPJSResize:function(e){if(e.target!==this.dom.outer.id)return;this._determineBreakpoint()},_determineBreakpoint:function(){var e=this.dom.outer.el.offsetWidth;e>=this.SIZE_XS_BREAKPOINT&&this._addModifier(this.PRIMARY_BLOCK,this.SIZE_XS_MODIFIER),e>=this.SIZE_SM_BREAKPOINT&&this._addModifier(this.PRIMARY_BLOCK,this.SIZE_SM_MODIFIER),e>=this.SIZE_MD_BREAKPOINT&&this._addModifier(this.PRIMARY_BLOCK,this.SIZE_MD_MODIFIER),e>=this.SIZE_LG_BREAKPOINT&&this._addModifier(this.PRIMARY_BLOCK,this.SIZE_LG_MODIFIER),e<this.SIZE_XS_BREAKPOINT&&this._removeModifier(this.PRIMARY_BLOCK,this.SIZE_XS_MODIFIER),e<this.SIZE_SM_BREAKPOINT&&this._removeModifier(this.PRIMARY_BLOCK,this.SIZE_SM_MODIFIER),e<this.SIZE_MD_BREAKPOINT&&this._removeModifier(this.PRIMARY_BLOCK,this.SIZE_MD_MODIFIER),e<this.SIZE_LG_BREAKPOINT&&this._removeModifier(this.PRIMARY_BLOCK,this.SIZE_LG_MODIFIER)},_onVolumeBtnClick:function(e){if(this._hasDisabled(this.css.VOLUME_BTN))return;if(this.VCI.getPlayerMuted()){this._unmuteClick=!0,this.VCI.unMute();return}this.VCI.mute()},_onVolumeSliderChange:function(e){var t=parseFloat(e.target.value),n=this.VCI.getPlayerMuted();n&&t>0&&this.VCI.unMute(),this.VCI.setVolume(t),this._updateVolumeUI(t)},_onFullscreenBtnClick:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onFullscreenBtnClick"),e.stopPropagation(),this._hideVolumeSlider(),this._hasFullscreenMode()?this._exitFullscreen():this._enterFullscreen()},_onPlayToggle:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onPlayToggle this.VCI.vidContId = ",this.VCI.vidContId),e.stopPropagation(),e.preventDefault();var t=this.VCI.getCurrentPlaybackState().playbackState;this.debug&&uvpjs.log(this.DEBUG_ID,"_onPlayToggle playbackState = ",t);if(t===this.mc.PAUSED){this.VCI.playVideo();return}if(t===this.mc.STOPPED){this._onPreviewBtn(e);return}if(t===this.mc.EMPTY){this._isVideoCued&&this._onPreviewBtn(e);return}if(t===this.mc.BUFFERING||t===this.mc.LOADING)return;this._addModifier(this.PRIMARY_BLOCK,this.PAUSED_MODIFIER),this.VCI.pauseVideo(),this._hasFirstTouch||this._onUVPJSGestureEvent(e)},_onPreviewBtn:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onPreviewBtn",e);if(this._isSwipe)return;typeof e!="undefined"&&e.stopPropagation();if(this._isTouch&&!this._hasFirstTouch){this.debug&&uvpjs.log(this.DEBUG_ID,"_onPreviewBtn:","Stopping, touch event is required.");return}if(!this.CLIENT_REF.config.autoplay&&!this.CLIENT_REF.state.hasAutoPlayed&&typeof e=="undefined"){this.debug&&uvpjs.log(this.DEBUG_ID,"_onPreviewBtn:","Stopping, user initiation is required.");return}if(this._previewCallbackDone)return;var t=this.VCI;t._usesIMA&&n.isEmpty(t.CVI_Mgr.imaAdDisplayContainer)&&(uvpjs.log(this.DEBUG_ID,"_onPreviewButton   call this.CVI_Mgr.constructSharedIMAClasses()"),t.CVI_Mgr.constructSharedIMAClasses()),typeof this.CLIENT_REF.state.currentVideo!="undefined"&&this.CLIENT_REF.state.currentVideo.video_id!=""&&(this.CLIENT_REF.playVideo(this.CLIENT_REF.state.currentVideo.video_id,this.CLIENT_REF.config.partner,undefined,undefined,undefined,!0),this._previewCallbackDone=!0)},_onShareBtn:function(e){uvpjs.log(this.DEBUG_ID,"_onShareBtn"),e.stopPropagation(),this._toggle(this.css.SHARE_BAR);if(!this._hasHidden(this.css.SHARE_BAR)){var t=this._getShareURL();t!=this._currShareURL&&(this._currShareURL=t,this._getShortURL(this._currShareURL,this._onGetShareURL.bind(this)));var n=this._getEmbedURL();n!=this._currEmbedURL&&(this._currEmbedURL=n,this._getShortURL(this._currEmbedURL,this._onGetEmbedURL.bind(this)))}},_onShareBarClick:function(e){uvpjs.log(this.DEBUG_ID,"_onShareBarClick",this._getElementName(e.target));if(this._hasDisabled(this.css.SHARE_BTN))return;switch(this._getElementName(e.target)){case this.css.SHARE_CLOSE_BTN:this._hide(this.css.SHARE_BAR);break;case this.css.SHARE_TWITTER_BTN:var t=this._getSocialShareLink("TWITTER");window.open(t,"_blank");break;case this.css.SHARE_FACEBOOK_BTN:var t=this._getSocialShareLink("FACEBOOK");window.open(t,"_blank");break;case this.css.SHARE_LINK_BTN:this._activate(this.css.SHARE_LINK_BTN),this._deactivate(this.css.SHARE_CODE_BTN),this._hide(this.css.SHARE_CODE_BAR),this._show(this.css.SHARE_LINK_BAR);break;case this.css.SHARE_CODE_BTN:this._deactivate(this.css.SHARE_LINK_BTN),this._activate(this.css.SHARE_CODE_BTN),this._hide(this.css.SHARE_LINK_BAR),this._show(this.css.SHARE_CODE_BAR);break;case this.css.SHARE_LINK_URL:break;case this.css.SHARE_LINK_SELECT_BTN:this._queryByClassName(this._getClassName(this.css.SHARE_LINK_URL)).select();break;case this.css.SHARE_CODE_SIZE:var n=this._getEmbedURL();n!=this._currEmbedURL&&(this._currEmbedURL=n,this._getShortURL(this._currEmbedURL,this._onGetEmbedURL.bind(this)));break;case this.css.SHARE_CODE_TEXT:break;case this.css.SHARE_CODE_SELECT_BTN:this._queryByClassName(this._getClassName(this.css.SHARE_CODE_TEXT)).select()}},_onLoadedMetadata:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onLoadedMetadata"),this._canFullscreen=this._hasNativeFullscreen()&&this.CLIENT_REF.config.includeFullScreenButton;if(!this._canFullscreen)return;this._enableButton(this.css.FULLSCREEN_BTN),this._setupFullscreenEventListener()},_setupFullscreenEventListener:function(){this.debug&&uvpjs.log(this.DEBUG_ID,"_setupFullscreenEventListener");if(!this._canFullscreen||this._hasFullscreenSetup)return;this._hasFullscreenSetup=!0,this._fullscreenBtn.addEventListener("click",this._onFullscreenBtnClick,!1),document.addEventListener(this.mc.getFullscreenEventName(),this._handleFullscreenEvent,!1)},_onClosedCaptionBtnClick:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onClosedCaptionBtnClick"),e.stopPropagation();var t=this.css.CLOSED_CAPTION_BTN,n=this._hasActive(t);if(n){this._removeModifier(this.css.CLOSED_CAPTION_BTN,this.ACTIVE_MODIFIER),this.VCI.hideCaptions();return}this._addModifier(this.css.CLOSED_CAPTION_BTN,this.ACTIVE_MODIFIER),this.VCI.showCaptions(),this._setCCPosition()},_onLiveBtnClick:function(e){uvpjs.log(this.DEBUG_ID,"_onLiveBtnClick"),e.stopPropagation(),this.VCI.seekToLive()},_onCastBtnClick:function(e){uvpjs.log(this.DEBUG_ID,"_onCastBtnClick"),e.stopPropagation(),typeof this.CLIENT_REF.castSender!="undefined"&&this.CLIENT_REF.castSender.enabled&&this.CLIENT_REF.castSender.onCastButtonClick()},_onCastStateChange:function(e){uvpjs.log(this.DEBUG_ID,"_onCastStateChange: "+e),this._castBtn!=null&&(e=="DISABLED"?this._disableButton(this.css.CAST_BTN):this._enableButton(this.css.CAST_BTN),s(this._castBtn,"DISCONNECTED"),s(this._castBtn,"CONNECTING"),s(this._castBtn,"CONNECTED"),s(this._castBtn,"DISABLED"),i(this._castBtn,e))},_onSettingsBtnClick:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onSettingsBtnClick"),e.stopPropagation();var t=this.css.SETTINGS_MENU,n=this._hasHidden(t);uvpjs.log(this.DEBUG_ID,"_onSettingsBtnClick isHidden",n);if(n){this._activate(this.css.SETTINGS_BTN),this._addModifier(t,this.ACTIVE_MODIFIER),this._generateSettingsMenu(this.settingsMenu),this._show(t);return}this._deactivate(this.css.SETTINGS_BTN),this._removeModifier(t,this.ACTIVE_MODIFIER),this._hide(t)},_onSettingsMenuBtnClick:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onSettingsMenuBtnClick",e);var t=e.target.getAttribute("data-target");this.debug&&uvpjs.log(this.DEBUG_ID,"_onSettingsMenuBtnClick target",t),e.target.parentNode.parentNode.setAttribute("data-target",t);var n=this._findMenuItem(t);this._generateSettingsMenu(n.items,t)},_onSettingsMenuInputClick:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onSettingsMenuInputClick",e);var t=e.target,r=t.parentNode,i=r.parentNode.getAttribute("data-target"),s=t.getAttribute("data-value"),o=i.split(":")[0];nlected","false")}.bind(this)),t.setAttribute("data-selected","true");var u=this._findMenuItem(i);n(u.items).each(function(e){e.value==s?e["default"]=!0:e["default"]=!1}),o==="cc"&&this._onSettingsCaptionsChange(e)},_onSettingsCaptionsChange:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_onSettingsCaptionsChange",e);var t=e.target,n=t.getAttribute("data-property"),r=t.getAttribute("data-value").toLowerCase();this.debug&&uvpjs.log(this.DEBUG_ID,"_onSettingsCaptionsChange property, value",n,r);if(n==="text-position"){this._setCCPosition(r);return}this.VCI.setCaptionsStyleProperty(n,r)},_setCaptionsStyle:function(e){if(!this._captionsLoaded)return;this.debug&&uvpjs.log(this.DEBUG_ID,"_setCaptionsStyle",e),this.VCI.setCaptionsStyle(e)},_setCaptionsStyleProperty:function(e,t){if(!this._captionsLoaded)return;this.debug&&uvpjs.log(this.DEBUG_ID,"_setCaptionsStyleProperty",e,t),this.VCI.setCaptionsStyleProperty(e,t)},_setCueProperty:function(e,t){if(!this._captionsLoaded)return;var n=this.dom.video.el.textTracks;if(!n)return;this.debug&&uvpjs.log(this.DEBUG_ID,"_setCueProperty",e,t),this.VCI.setCaptionsCueProperty(e,t)},_setCCPosition:function(e){var t="text-position",n,r;if(!this._captionsLoaded)return;e=e||this.VCI.getCaptionsStyle()[t],this.debug&&uvpjs.log(this.DEBUG_ID,"_setCCPosition prop, value",t,e),this.VCI.setCaptionsStyleProperty(t,e)},_showControlBar:function(e){var t=this.css;if(!this._hasHidden(this.css.CONTROLS_WRAP)||this._hasDisabled(this.css.CONTROLS)||this._useSimpleControls)return;this.debug&&uvpjs.log(this.DEBUG_ID,"_showControlBar"),n.isUndefined(this._hideControlBar.hide)||this._hideControlBar.hide.cancel(),this._show(t.CONTROLS_WRAP),this._show(t.SHARE_BTN),this._show(t.PREVIEW_BAR),this._enable(t.LARGE_PLAY_BTN)},_hideMenu:function(e){if(this._hasHidden(this.css.SETTINGS_MENU))return;if(e.target.className.indexOf(this._getClassName(this.css.SETTINGS_MENU))>-1)return;this._deactivate(this.css.SETTINGS_BTN),this._removeModifier(this.css.SETTINGS_MENU,this.ACTIVE_MODIFIER),this._hide(this.css.SETTINGS_MENU)},_hideControlBar:function(e){e=isNaN(e)?this.HIDE_DELAY:e;if(this._hasHidden(this.css.CONTROLS_WRAP)||this._hasDisabled(this.css.CONTROLS))return;uvpjs.log(this.DEBUG_ID,"_hideControlBar"),this._hideControlBar.hide=n.debounce(function(){if(this._hasActive(this.PRIMARY_BLOCK)||this._hasActive(this.css.PROGRESS)||this._hasActive(this.css.PROGRESS_SLIDER)||this._hasActive(this.css.VOLUME_SLIDER)||this._hasActive(this.css.CONTROL_BAR)||!this._hasHidden(this.css.SETTINGS_MENU)||!this._hasHidden(this.css.SHARE_BAR)||this._hasPaused()){this._hideControlBar.hide.cancel();return}uvpjs.log(this.DEBUG_ID,"_hideControlBar.hide"),this._onUVPJSTouchStart.isFirstTouch=!1,this._removeModifier(this.PRIMARY_BLOCK,this.TOUCH_MODIFIER),this._hide(this.css.CONTROLS_WRAP),this._hide(this.css.SHARE_BTN),this._hide(this.css.SHARE_BAR),this._hide(this.css.PREVIEW_BAR),this._disable(this.css.LARGE_PLAY_BTN)},e),this._hideControlBar.hide.cancel(),this._hideControlBar.hide.call(this)},_showVolumeSlider:function(e){var t=this.css;if(!this.mc.supportsVolume()||this._isTouch)return;if(this._hasDisabled(t.VOLUME_BTN))return;if(this._hasDisabled(t.CONTROLS))return;this._hasActive(t.SETTINGS_MENU)&&(this._removeModifier(t.SETTINGS_MENU,this.ACTIVE_MODIFIER),this._hide(t.SETTINGS_MENU),this._deactivate(t.SETTINGS_BTN)),this._addModifier(t.VOLUME_SLIDER,this.ACTIVE_MODIFIER),this._show(t.VOLUME_SLIDER)},_hideVolumeSlider:function(e){if(this._isMouseActive)return;this._removeModifier(this.css.VOLUME_SLIDER,this.ACTIVE_MODIFIER),this._hide(this.css.VOLUME_SLIDER)},_disableControls:function(){this._disable(this.css.CONTROLS)},_enableControls:function(){this._enable(this.css.CONTROLS)},_disableProgress:function(){this._disable(this.css.PROGRESS)is.css.PROGRESS)},_enableCaptions:function(){this.debug&&uvpjs.log(this.DEBUG_ID,"_enableCaptions"),this._captionsLoaded=!0;if(this.mc.isOpera()||this.mc.isSafari()||this.mc.isChrome())this.debug&&uvpjs.log(this.DEBUG_ID,'_enableCaptions this._enableMenuItem("cc");'),this._enableMenuItem("cc");this.enableButton(this.css.CLOSED_CAPTION_BTN)}SED_CAPTION_BTN)},_enableSettings:function(){this.debug&&uvpjs.log(this.DEBUG_ID,"_enableSettings");if(this._hasHidden(this.css.SETTINGS_MENU))return;this._enableButton(this.css.SETTINGS_BTN)},_disableSettings:function(){this.debug&&uvpjs.log(this.DEBUG_ID,"_disableSettings");if(this._hasHidden(this.css.SETTINGS_MENU))return;this._deactivate(this.css.SETTINGS_BTN),this._removeModifier(this.css.SETTINGS_MENU,this.ACTIVE_MODIFIER),this._hide(this.css.SETTINGS_MENU),this._disableButton(this.css.SETTINGS_BTN)},_setUnmuteVolume:function(e){if(this._currentVolume===0)return;this._unmuteVolume=this._currentVolume},_onProgressSliderChange:function(e,t){var n=this.VCI.getContentVideoData(),r=this.VCI.getCurrentPlaybackState(),i=this.css.TIME_CURRENT,s=this._queryByElementName(i),o=t||this._progressSlider.value,u,a;this.debug&&uvpjs.log(this.DEBUG_ID,"_onProgressSliderChange"),o=o>1?1:o<0?0:o,u=Math.ceil(o*n.duration*1e4)/1e4,a=Math.abs((r.currentTime-u)/u),this._updateProgressSlider(o),s.innerHTML=this._formatTimestampByType(i,parseInt(u));if(this._hasActive(this.css.PROGRESS_SLIDER))return;if(a<=.02)return;this.VCI.seekTo(u),this._returnToPause&&this.VCI.pauseVideo()},_onProgressMouseOver:function(e){e.stopPropagation(),this._addModifier(this.css.PROGRESS,this.ACTIVE_MODIFIER)},_oACTIVE_MODIFIER)},_onProgressSliderStart:function(e){if(this._hasAd()||this._hasDisabled(this.css.PROGRESS)){e.stopPropagation(),e.preventDefault();return}this.debug&&uvpjs.log(this.DEBUG_ID,"_onProgressSliderStart"),this._addModifier(this.css.PROGRESS_SLIDER,this.ACTIVE_MODIFIER),this._returnToPause=this.VCI.getCurrentPlaybackState().playbackState===this.mc.PAUSED},_onProgressSliderEnd:function(e){if(this._hasAd()||this._hasDisabled(this.css.PROGRESS)){e.stopPropagation(),e.preventDefault();return}this._removeModifier(this.css.PROGRESS_SLIDER,this.ACTIVE_MODIFIER),this._onProgressSliderChange(e),this._returnToPause||this.VCI.playVideo(),this._returnToPause=!1},_updateProgressLoad:function(e){return;var t,r},_getShareURL:function(){return uvpjs.log(this.DEBUG_ID,"_getShareURL"),typeof window.getShareURL!="undefined"?window.getShareURL(this.CLIENT_REF.state.currentVideo.video_id):this.CLIENT_REF.getShareURL(this.CLIENT_REF.state.currentVideo.video_id)},_getEmbedURL:function(){uvpjs.log(this.DEBUG_ID,"_getEmbedURL");var e=this._queryByElementName(this.css.SHARE_CODE_SIZE).value.split(",");return this.CLIENT_REF.getEmbedURL(this.CLIENT_REF.state.currentVideo.video_id,e[0],e[1])},_getShortURL:function(e,t){uvpjs.log(this.DEBUG_ID,"_getShortURL");if(typeof e=="undefined"||e=="")return;t({url:e})},_onGetEmbedURL:function(e){uvpjs.log(this.DEBUG_ID,"_onGetEmbedURL url = "+e.url),this._updateEmbedCode(e.url)},_onGetShareURL:function(e){uvpjs.log(this.DEBUG_ID,"_onGetShareURL url = "+e.url),this._updateShareLink(e.url)},_getSocialShareLink:function(e){uvpjs.log(this.DEBUG_ID,"_getSocialShareLink service = "+e);var t={FACEBOOK:{url:"//www.facebook.com/share.php?u=_URL_&t=_TITLE_",shortened:!0},TWITTER:{url:"//twitter.com/share?text=I%27m%20watching%20%22_TITLE_%22%20on%20%40CBSSports&url=_URL_",shortened:!0}},n=t[e].url;return n=n.replace("_URL_",encodeURIComponent(this._currURL)),n=n.replace("_TITLE_",encodeURIComponent(this._currTitle)),n},_updateShareLink:function(e){uvpjs.log(this.DEBUG_ID,"_updateShareLink url = "+e),e=typeof e!="undefined"&&e!=""?e:"//www.cbssports.com/video/player",this._queryByElementName(this.css.SHARE_LINK_URL).value=e,this._currURL=e},_updateEmbedCode:function(e){uvpjs.log(this.DEBUG_ID,"_updateEmbedCode url = "+e);var t=this._queryByElementName(this.css.SHARE_CODE_SIZE).value.split(","),n='<div id="embedVideoContainer_'+this.CLIENT_REF.state.currentVideo.video_id+'" class="embedVideo"><iframe id="embedVideo_'+this.CLIENT_REF.state.currentVideo.video_id+'" name="embedVideo_'+this.CLIENT_REF.state.currentVideo.video_id+'" src="'+e+'" width="'+t[0]+'" height="'+t[1]+'" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" allowTransparency="true"></iframe></div>';this._queryByElementName(this.css.SHARE_CODE_TEXT).value=n},_checkControlOnDOM:function(e){var t=this.ID_SELECTOR_PREFIX+this.dom.controls.id+" "+this.CLASS_SELECTOR_PREFIX+e,n=this._controlCache[t];return n||(n=document.querySelector(t)),n?(this._controlCache[t]=n,!0):R_DELIMITER+t),n},_getElementName:function(e){for(var t=0;t<e.classList.length;t++){var n=e.classList[t];if(n.match(this.PRIMARY_BLOCK+this.BLOCK_ELEMENT_DELIMITER))return n.replace(this.PRIMARY_BLOCK+this.BLOCK_ELEMENT_DELIMITER,"")}return e.claetClassName(e,t)},_queryByClassName:function(e){var t=this.ID_SELECTOR_PREFIX+this.dom.outer.id;e!==this.PRIMARY_BLOCK&&(t+=" "+this.CLASS_SELECTOR_PREFIX+e);var n=this._controlCache[t]||document.querySelector(t);return n&&(this._controlCache[t]=n),n},_queryAllByClassName:function(e){var t=this.ID_SELECTOR_PREFIX+this.dom.outer.id;return e!==this.PRIMARY_BLOCK&&(t+=" "+this.CLASS_SELECTOR_PREFIX+e),document.querySelectorAll(t)},_queryByElementName:function(e){return this._queryByClassName(this._getClassName(e))},_quergetClassName(e))},_show:function(e){this._removeModifier(e,this.HIDDEN_MODIFIER)},_hide:function(e){this._addModifier(e,this.HIDDEN_MODIFIER)},_toggle:function(e){this._hasHidden(e)?this._show(e):this._hide(e)},_activate:function(e){this._addModifier(e,this.ACTIVE_MODIFIER)},_deactivate:function(e){this._removeModifier(e,this.ACTIVE_MODIFIER)}his._activate(e)},_enable:function(e){this._removeModifier(e,this.DISABLED_MOSABLED_MODIFIER)},_enableMenuItem:function(e){if(!e)return;var t=this._findMenuItem(e);if(!t)return;t.enabled=!0},_hasHidden:function(e){return this._hasModifier(e,this.HIDDEN_MODIFIER)},_hasActive:function(e){return this._hasModifier(e,this.ACTIVE_MODIFIER)},_hasAd:function(){return this._hasModifier(this.PRIMARY_BLOCK,this.AD_MODIFISABLED_MODIFIER)},_hasFullscreen:function(){return this._hasModifier(this.PRIMARY_BLOCK,this.FULLSCREEN_MODIPAUSED_MODIFIER)},_isLive:function(){var e=this.VCI.getContentVideoData();return e.isLive&&this._isStreaming()},_isPlaying:function(){var e=this.VCI.getContentVideoData();return e.deliveryType&&e.deliveryType===this.mc.PLAYhis.mc.STREAMING},_hasModifier:function(e,t){n.isArray(t)&&(t=t.join(this.MODIFIER_DELIMETER));var i=this._getClassName(e,t),s=this._queryByElementName(e);return s?r(s,i):!1},_addModifier:function(e,t){n.isArray(t)&&(t=t.join(this.MODIFIER_DELIMETER));var r=this._getClassName(e,t),s=this._queryByElementName(e);if(!s)return;i(s,r)},_removeModifier:function(e,t){n.isArray(t)&&(t=t.join(this.MODIFIER_DELIMETER));var r=this._getClassName(e,t),i=this._queryByElementName(e);if(!i)return;s(i,r)},_toggleModifier:function(e,t){n.isArray(t)&&(t=t.join(this.MODIFIER_DELIMETER));var r=this._getClassName(e,t),i=this._queryByElementName(e);if(!i)return;o(i,r)},_handleFullscreenEvent:function(e){this.debug&&uvpjs.log(this.DEBUG_ID,"_handleFullscreenEvent",e),this._hide(this.css.VOLUME_SLIDER),e.stopPropagation(),this._hasFullscreen()?(this.VCI.fullscreen(!1),this._removeModifier(this.PRIMARY_BLOCK,this.FULLSCREEN_MODIFIER)):(this.VCI.fullscreen(!0),this._addModifier(this.PRIMARY_BLOCK,this.FULLSCREEN_MODIFIER))},_hasFullscreenMode:function(){var e=!1,t=this.dom.video.el;return document.msFullscreenElement?document.msFullscreenEnabled:(document.mozFullScreenElement?e=document.mozFullScreenEnabled:document.webkitFullscreenElement?e=document.webkitFullscreenEnabled:document.fullscreenElement?e=document.fullscreenEnabled:t.webkitDisplayingFullscreen&&(e=t.webkitDisplayingFullscreen),e)},_hasNativeFullscreen:function(){var e=this.dom.video.el;return e.msRequestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.requestFullscreen||e.webkitSupportsFullscreen?!0:!1},_enterFullscreen:function(){var e=this.dom.outer.el,t=this.dom.video.el;if(this._isIOS){if(t.webkitDisplayingFullscreen)return!1;if(t.webkitEnterFullscreen)return t.webkitEnterFullscreen(),!0}return e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement?!1:(e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),!0)ExitFullscreen()},_formatTimestamp:function(e){if(n.isNull(e))return this.NULL_TIME;n.isNaN(e)&&(e=0),e=Math.floor(e);var t=0,r=0,i=0;e>=3600&&(t=Math.floor(e/3600),e=Math.floor(e-t*3600)),e>=60?(r=Math.floor(e/60),i=Math.floor(e-r*60)):n.isNaN(e)||(i=e),r=r.toString().length!=2?"0"+r:r,i=i.toString().length!=2?"0"+i:i;var s=t!="00"?t+":":"";return s+=r+":"+i,s},_formatTimestampByType:function(e,t){if(typeof t=="undefined"||t<0){if(e===this.css.TIME_DURATION)return this.NULL_TIME;if(e===this.css.TIME_CURRENT)return this.NULL_TIME}return this._formatTimestamp(t)},_addCSSRule:function(e,t,r){var i=this._styleSheet.sheet,s=i.cssRules.length;if(!n.isUndefined(this._cssRules[e])){var o=i.rules||i.cssRules;if(o.length>0){o[this._cssRules[e]].style[t]=r;return}}this._cssRules[e]=s;var u=t+":"+r;if(i.insertRule){i.insertRule(e+"{"+u+"}",s);return}i.addRule&&i.addRule(e,u,s)},_setStyleSheet:function(e){function r(r){this._styleSheet=r,n.isFunction(e)&&!t&&(this.debug&&uvpjs.log(this.DEBUG_ID,"_setStyleSheet executing callback."),t=!0,e())}var t=!1;this.debug&&uvpjs.log(this.DEBUG_ID,"_setStyleSheet",this.styleSheet);if(this._styleSheet)return;uvpjs.util.createStyleSheet(r.bind(this))},_templateToHTML:function(e){function s(e){var i="";return n(e).each(function(e){if(!e)return;e.cls=n.isUndefined(e.cls)?t(e.el):[e.cls,t(e.el)].join(" "),e.id=n.isUndefined(e.id)?"":'id="'+e.id+'" ',e.children&&(e.children=s(e.children)),i+=n.template(r[e.type],{variable:"o"})(e)}),i}if(!n.isArray(e)||n.isEmptame(this.css[e])}.bind(this),r={button:'<button ${ o.id }class="${ o.cls }" data-target="${ o.target }" aria-label="${ o.label }">${ o.label }</button>\n',div:'<div ${ o.id }class="${ o.cls }">${ o.children }</div>\n',img:'<img ${ o.id }class="${ o.cls }" src="${ o.src }"/>\n',span:'<span ${ o.id }class="${ o.cls }">${ o.text }</span>\n',input:'<input ${ o.id }type="range" value="${ o.value }" min="0" max="1" step="${ o.step }" class="${ o.cls }" />\n',text:'<input ${ o.id }type="text" value="${ o.value }" class="${ o.cls }" />\n',select:'<select ${ o.id }class="${ o.cls }">${ o.children }</select>\n',option:'<option value="${ o.value }">${ o.label }</option>\n',menu:'<button ${ o.id }class="${ o.cls }" data-property="${ o.property }" data-value="${ o.value }" data-selected="${ o.selected }">${ o.label }</button>\n',range:'<input ${ o.id }type="range" value="${ o.value }" min="0" max="1" step="${ o.step }" class="${ o.cls }" />\n',progress:'<progress ${ o.id }class="${ o.cls }" value="${ o.value }" max="1" step="${ o.step }"></progress>\n',raw:"${ o.text }\n","wrap-start":'<div class="${ o.cls }">\n',"wrap-end":"</div>\n"},i=this;ret"+t+"(\\s|$)")))},i=function(e,t){if(r(e,t))return;e.className=(e.className+=" "+t).trim()},s=function(e,t){if(!r(e,t))return;e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").trim()},o=function(e,t){if(r(e,t)){s(e,t)t(n[3],16)}:null}})(uvpjs.register("uvpjs")),this.skinMgr=new uvpjs.SkinManager({vci:this.api,skinReadyCallback:this.handleUVPEvent("onSkinManagerLoaded"),sessOpts:this.config.sessOpts})},define("components/embed/app/VideoPlayer/Client",function(){}),CBSi.namespace("CBSi.app.VideoPlayer.XFP"),CBSi.app.VideoPlayer.XFP=function(e){this.log=CBSi.log?CBSi.log:function(e){},this.utils=CBSi.util.Utils?CBSi.util.Utils:!1,this.enabled=!0,this.autoload=!1,this.objName="cbsiXFP",this.context=window,this.html5=!1,this.xfpObj={},this.debugMode=!1,this._adUnits=[{id:"div-gpt-ad-1369944941422-0",w:300,h:60,url:!1,click:!1},{id:"div-gpt-ad-1369944941422-1",w:300,h:250,url:!1,click:!1},{id:"div-gpt-ad-1369944941422-2",w:970,h:66,url:!1,click:!1},{id:"div-gpt-ad-1369944941422-3",w:970,h:90,url:!1,click:!1},{id:"div-gpt-ad-1369944941422-4",w:234,h:60,url:!1,click:!1}],this._slots=[];for(var t in e)this[t]=e[t];this.log("CBSi.app.VideoPlayer.XFP","constructor")},CBSi.app.VideoPlayer.XFP.prototype.init=function(){this.log("CBSi.app.VideoPlayer.XFP","init"),typeof this.context.googletag=="undefined"&&(this.context.googletag={});var e=Boolean(document.getElementById("gpt"));if(!e){var t=this.context.document.getElementsByTagName("script");for(var n=0;n<t.length;n++)if(t[n].src.indexOf("/gpt.js")!=-1){e=!0;break}}if(!e){var r=document.createElement("script");r.id="gpt",r.async=!0,r.type="text/javascript",r.src="https://www.googletagservices.com/tag/js/gpt.js";var i=this.context.document.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)}this._googletag=this.context.googletag,this._googletag.cmd=typeof this._googletag.cmd!="undefined"?this._googletag.cmd:[];var s=this;this._googletag.cmd.push(function(){s._googletag.companionAds().setRefreshUnfilledSlots(!1),s._googletag.pubads().disableInitialLoad(),s._googletag.pubads().enableVideoAds(),s._googletag.enableServices()});if(this.html5){var o=document.createElement("script");o.id="ima3",o.type="text/javascript",o.src="https://imasdk.googleapis.com/js/sdkloader/ima3.js",this.debugMode&&(o.src="https://imasdk.googleapis.com/js/sdkloader/ima3_debug.js");var u=this.context.document.getElementsByTagName("head")[0];u.appendChild(o)}this.updateXFPObj(this.getXFPObj(this.context))},CBSi.app.VideoPlayer.XFP.prototype.getXFPObj=function(e){this.log("CBSi.app.VideoPlayer.XFP","getXFPObj");var t={},n=undefined;if(typeof window.xfpObj=="string"&&window.xfpObj!=""){this.log("CBSi.app.VideoPlayer.XFP","getXFPObj: window.xfpObj "+window.xfpObj);if(window.xfpObj.indexOf("session=off")!=-1||window.xfpObj.indexOf("subses=off")!=-1)n=this.utils.getAdValuesFromSession(),n&&Array.isArray(n)&&n.hasOwnProperty(0)&&n.hasOwnProperty(1)&&(window.xfpObj=window.xfpObj.replace("session=off","session="+n[0]),window.xfpObj=window.xfpObj.replace("subses=off","subses="+n[1]),n.hasOwnProperty(2)&&typeof n[2]!="undefined"&&(window.xfpObj+="~plyr="+n[2]),this.log("CBSi.app.VideoPlayer.XFP","getXFPObj: updated session values window.xfpObj "+window.xfpObj));var r=window.xfpObj.split("~");for(var i=0;i<r.length;i++){var s=r[i].split("=");t[s[0]]=s[1]}}if(typeof ((((window.SportsPageVars||{}).ads||{}).data||{}).gpt||{}).targeting!="undefined"){var o=window.SportsPageVars.ads.data.gpt.targeting;if(typeof o.session=="undefined"||typeof o.subses=="undefined"||o.session=="off"||o.subses=="off")n=n||this.utils.getAdValuesFromSession(),n&&Array.isArray(n)&&n.hasOwnProperty(0)&&n.hasOwnProperty(1)&&(o.session=n[0],o.subses=n[1],n.hasOwnProperty(2)&&typeof n[2]!="undefined"&&(o.plyr=n[2])),window.SportsPageVars.ads.data.gpt.targeting=o;this.log("CBSi.app.VideoPlayer.XFP","getXFPObj: window.SportsPageVars "+JSON.stringify(window.SportsPageVars.ads.data.gpt.targeting)),t=window.SportsPageVars.ads.data.gpt.targeting}return t},CBSi.app.VideoPlayer.XFP.prototype.setCompanionAd=function(e,t){this.log("CBSi.app.VideoPlayer.XFP","setCompanionAd: "+JSON.stringify(e));if(typeof e=="undefined"||!e||typeof t=="undefined"||!t)return;var n=this.getCompanionAd(e);if(!n)return;var r=document.createElement("div");r.id=n.id,r.style.height=n.h+"px",r.style.width=n.w+"px",t.appendChild(r);var i=this;this._googletag.cmd.push(function(){i._slots.push(i._googletag.defineSlot("/8264/vaw-sports/cbssports",[n.w,n.h],n.id).addService(i._googletag.companionAds()).addService(i._googletag.pubads())),i.autoload&&i._googletag.display(n.id)})},CBSi.app.VideoPlayer.XFP.prototype.updateXFPObj=function(e){this.log("CBSi.app.VideoPlayer.XFP","updateXFPObj: "+JSON.stringify(e));var t=this;for(var n in e)e[n]==""&&typeof this.xfpObj[n]!="undefined"?(this._glearTargeting(n)}),delete this.xfpObj[n]):typeof e[n]!="undefined"&&(this._googletag.cmd.push(function(){t._googletag.pubads().setTargeting(n,e[n])}),this.xfpObj[n]=e[n])},CBSi.app.VideoPlayer.XFP.prototype.refresh=function(e){this.log("CBSi.app.VideoPlayer.XFP","refresh");var t=!1;for(var n=0;n<this._adUnits.length;n++){var r=this._adUnits[n];if(r.url&&r.click){var i=document.getElementById(r.id);if(i&&typeof i!="undefined"){var s=r.click.replace(/\[timestamp\]/,(new Date).getTime()),o=r.url.replace(/\[timestamp\]/,(new Date).getTime());i.innerHTML='<a href="'+s+'" target="_blank"><img src="'+o+'" width="'+r.w+'" height="'+r.h+'" /></a>'}}else if(!t){var u=this;e&&typeof e!="undefined"&&(this.updateXFPObj({vid:e.guid}),this._googletag.cmd.push(function(){u._googletag.pubads().setVideoContent(e.guid,2289)}),typeof e.is_live!="undefined"&&e.is_live?this._googletag.cmd.push(function(){u._googletag.companionAds().setRefreshUnfilledSlots(!0)}):this._googletag.cmd.push(function(){u._googletag.companionAds().setRefreshUnfilledSlots(!1)})),this._gefresh(u._slots)}),t=!0}}},CBSi.app.VideoPlayer.XFP.prototype.onPlayerReady=function(e){this.log("CBSi.app.VideoPlayer.XFP","onPlayerReady"),this.updateXFPObj(this.getXFPObj(this.context))},CBSi.app.VideoPlayer.XFP.prototype.onContentDataLoaded=function(e){this.log("CBSi.app.VideoPlayer.XFP","onContentDataLoaded: "+e);var t=this;this.updateXFPObj(this.getXFPObj(this.context)),e&&typeof e!="undefined"&&(this.updateXFPObj({vid:e.guid}),this._googletag.cmd.push(function(){t._googletag.pubads().setVideoContent(e.guid,2289)}),typeof e.is_live!="undefined"&&e.is_live?this._googletag.cmd.push(function(){t._googletag.companionAds().setRefreshUnfilledSlots(!0)}):this._gnfilledSlots(!1)}))},CBSi.app.VideoPlayer.XFP.prototype.getCompanionAd=function(e){this.log("CBSi.app.VideoPlayer.XFP","getCompanionAd: "+JSON.stringify(e));for(var t=0;t<this._adUnits.length;t++){var n=!0;for(var r in e)if(!n||e[r]!=this._adUnits[t][r])n=!1;if(n)return this._adUnits[t]}return null},define("components/embed/app/VideoPlayer/XFP",function(){}),CBSi.namespace("CBSi.app.VideoPlayer.Cast"),CBSi.app.VideoPlayer.Cast=function(e){vag=function(e,t){},this.utils=CBSi.util.Utils?CBSi.util.Utils:!1,this.cookieJar=CBSi.util.CookieJar?new CBSi.ut(e,n){t.log(e,n)}}):!1,this.enabled=!1,this.objName="cbsiCast",this.applicationID="9FDE14F2",this.container=document.getElementsByTagName("body")[0],this._uiWidth=640,this._uiHeight=360,this._progressTimerID=0,this._isCasting=!1,this._isReceiverAvailable=!1,this._castState="DISABLED",this._state={sender:{playState:-1,currentTime:0},receiver:{playState:-1,currentTime:0}},this._PLAYSTATES={"-1":"unstarted",0:"stopped",1:"playing",2:"paused",3:"buffering",5:"thumbnail image cued",100:"domain blacklisted",110:"video not available",120:"video geo-blocked",130:"data load error",140:"ad blocked",150:"platform error"},this._RECEIVER_PLAYSTATES_MAP={BUFFERING:3,IDLE:-1,PAUSED:2,PLAYING:1};for(var n in e)this[n]=e[n];this.log("CBSi.app.VideoPlayer.Cast","constructor")},CBSi.app.VideoPlayer.Cast.prototype.init=function(){this.log("CBSi.app.VideoPlayer.Cast","init");var e=navigator.userAgent.toLowerCase();if(e.indexOf("chrome")==-1){this.enabled=!1;return}var t=Boolean(document.getElementById("ccSenderAPI"));if(!t){var n=window.document.getElementsByTagName("script");for(var r=0;r<n.length;r++)if(n[r].src.indexOf("/cast_sender.js")!=-1){t=!0;break}}if(!t){window.__onGCastApiAvailable=this._onCastEvent("castAPIAvailable");var i=document.createElement("script");i.id="ccSenderAPI",i.async=!0,i.type="text/javascript",i.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js";var s=window.document.getElementsByTagName("script")[0];s.parentNode.insertBefore(i,s)}},CBSi.app.VideoPlayer.Cast.prototype.onPlayerReady=function(e,t){this.log("CBSi.app.VideoPlayer.Cast","onPlayerReady: "+t),typeof t!="undefined"&&(this._playerRef=t,this._uiWidth=this._playerRef.config.vwidth,this._uiHeight=this._playerRef.config.vheight,typeof this.castIntro!="undefined"&&this._isReceiverAvailable&&(this.castIntro.style.width=this._uiWidth+"px",this.castIntro.style.height=this._uiHeight+"px",this.castIntro.style.display="block"),this.resizePlayer(this._uiWidth,this._uiHeight),this._isReceiverAvailable?typeof this._session!="undefined"&&this._session.status!=this._chromeCast.SessionStatus.STOPPED&&this._session.media.length!=0?this._setCastState("CONNECTED"):this._setCastState("DISCONNECTED"):(this._setCastState("DISABLED"),this._omTrack(!1)))},CBSi.app.VideoPlayer.Cast.prototype.onPlayVideo=function(e){this.log("CBSi.app.VideoPlayer.Cast","onPlayVideo: "+e),this._isCasting&&typeof this._currentMedia!="undefined"&&(this._currentMedia.media.metadata.video.video_id!=this._playerRef.state.currentVideo.video_id?(this.controls.castVideoButton.style.display="block",this.controls.castVideoButton.innerHTML='Cast "'+this._playerRef.state.currentVideo.title+'"'):(this.controls.castVideoButton.style.display="none",this.controls.castVideoButton.innerHTML=""))},CBSi.app.VideoPlayer.Cast.prototype.onStateChange=function(e){this.log("CBSi.app.VideoPlayer.Cast","onStateChange: "+e+": "+this._PLAYSTATES[e]),this._state.sender.playState=e,this._isCasting||this._syncPlayers("sender")},CBSi.app.VideoPlayer.Cast.prototype.onVideoProgress=function(e){this._isCasting?this._playerRef.playVideo(this._playerRef.state.currentVideo.video_id,undefined,undefined,undefined,undefined,!1):this._syncPlayers("sender")},CBSi.app.VideoPlayer.Cast.prototype.resizePlayer=function(e,t,n,r,i,s){typeof n=="undefined"&&(n=e),typeof r=="undefined"&&(r=t);if(this.enabled&&typeof this.controls!="undefined"){this.controls.castUI.style.width=n+"px",this.controls.castUI.style.height=r+"px",this._uiWidth=n,this._uiHeight=r,typeof this._session!="undefined"&&this._updateCastControls(),typeof this.castIntro!="undefined"&&(this.castIntro.style.width=n+"px",this.castIntro.style.height=r+"px");var o=r>n?n:r,u=r>n?640:360,a=o/u*100>150?150:o/u*100<65?65:o/u*100;this.controls.castUI.style.fontSize=a+"%",n<400&&(this.controls.castTimeDisplay.style.display="none"),this.controls.castStatus.style.width=this._uiWidth+"px",this.controls.castStatus.style.height=this._uiHeight-this.controls.castControlBar.getBoundingClientRect().height+"px",typeof this._playerRef!="undefined"&&typeof this._currentVideo=="undefined"&&(this._currentVideo=this._playerRef.state.currentVideo);if(typeof this._currentVideo!="undefined"){var f=this._getThumbnail(this._currentVideo,this._uiWidth,this._uiHeight);f.src!=this.controls.castVideoThumb.src&&typeof f.src!="undefined"&&(this.controls.castVideoThumb.src=f.src,this.controls.castVideoThumb.width=f.w,this.controls.castVideoThumb.height=f.h);var l=this.controls.castVideoTitle.getBoundingClientRect().height+this.controls.castVideoDescription.getBoundingClientRect().height,c=this.controls.castVideoThumb.getBoundingClientRect().height,h=l>c?l:c;this.controls.castVideoDetails.style.height=h+"px",this.controls.castVideoThumb.style.marginBottom=l-c+"px"}}},CBSi.app.VideoPlayer.Cast.prototype.onUpdateData=function(e){this.log("CBSi.app.VideoPlayer.Cast","onUpdateData: "+e),this._isCasting&&this._updateCastUI()},CBSi.app.VideoPlayer.Cast.prototype.onCastButtonClick=function(e,t){this.log("CBSi.app.VideoPlayer.Cast","onCastButtonClick"),this.enabled&&typeof this.controls!="undefined"&&this._onCastUIEvent("castButtonClick")()},CBSi.app.VideoPlayer.Cast.prototype._onListenerEvent=function(e){var t=this;return _onListenerEvent=function(n){t.log("CBSi.app.VideoPlayer.Cast","_onListenerEvent: "+e+": "+n);switch(e){case"session":t.log("CBSi.app.VideoPlayer.Cast","_onListenerEvent: session: "+n.sessionId),t._session=n,t._session.addUpdateListener(t._onStatusEvent("session")),t._session.status!=t._chromeCast.SessionStatus.STOPPED?t._session.media.length!=0&&t._onSuccessEvent("mediaLoaded")(t._session.media[0]):t._onSuccessEvent("castStop")();break;case"receiver":t.log("CBSi.app.VideoPlayer.Cast","_onListenerEvent: receiver: "+n),n===t._chromeCast.ReceiverAvailability.AVAILABLE?(t._isReceiverAvailable=!0,typeof t._session!="undefined"&&t._session.status!=t._chromeCast.SessionStatus.STOPPED&&t._session.media.length!=0?t._setCastState("CONNECTED"):t._setCastState("DISCONNECTED"),t._omTrack(!0)):(t._isReceiverAvailable=!1,t._setCastState("DISABLED"),t._omTrack(!1))}}},CBSi.app.VideoPlayer.Cast.prototype._onProgressEvent=function(){var e=this;return _onProgressEvent=function(t){e._syncPlayers("receiver"),e._updateCastControls(),e._progressTimerID=setTimeout(e.objName+"._onProgressEvent()()",100)}},CBSi.app.VideoPlayer.Cast.prototype._onStatusEvent=function(e){var t=this;return _onStatusEvent=function(n){t.log("CBSi.app.VideoPlayer.Cast","_onStatusEvent: "+e+": "+n);switch(e){case"media":n?(t._syncPlayers("receiver"),t._playStateChange(t._state.receiver.playState)):typeof t._playerRef!="undefined"&&t._currentMedia.media.metadata.video.video_id==t._playerRef.state.currentVideo.video_id&&(t._playerRef.handleUVPEvent("onResourceEnd")(),t._onCastUIEvent("castVideoButtonClick")());break;case"session":n&&t._session.status!=t._chromeCast.SessionStatus.STOPPED?t._onMediaLoaded():t._onSuccessEvent("castStop")()}}},CBSi.app.VideoPlayer.Cast.prototype._onErrorEvent=function(e){var t=this;return _onErrorEvent=function(n){t.log("CBSi.app.VideoPlayer.Cast","_onErrorEvent: "+e+": "+n.code+": "+n.description);switch(e){case"mediaLoaded":t._updateCastControls();break;case"cast":t._setCastState("DISCONNECTED");break;case"castStop":}}},CBSi.app.VideoPlayer.Cast.prototype._onSuccessEvent=function(e){var t=this;return _onSuccessEvent=function(n){t.log("CBSi.app.VideoPlayer.Cast","_onSuccessEvent: "+e+": "+n);switch(e){case"castInit":t._buildCastUI(t.container);break;case"cast":t._session=n,t._session.addUpdateListener(t._onStatusEvent("session")),t.controls.castTitle.innerHTML="Casting to "+t._session.receiver.friendlyName+":",typeof t._playerRef!="undefined"&&typeof t._playerRef.state.currentVideo!="undefined"&&(t._currentVideo=t._playerRef.state.currentVideo,t._loadMedia(t._currentVideo,1),t._omTrack(!0,!0)),t._setCastState("CONNECTED");break;case"castStop":if(typeof n!="undefined")break;t._setCastState("DISCONNECTED"),clearTimeout(t._progressTimerID),t.controls.castTitle.innerHTML="";if(typeof t._playerRef!="undefined"&&typeof t._currentVideo!="undefined"&&t._playerRef.state.currentVideo.video_id==t._currentVideo.video_id)if(t._state.sender.playState==2&&!t._currentVideo.is_live){var r=t._state.receiver.playState!=1&&t._state.receiver.playState!=3;t._playerRef.seekTo(Math.floor(t._state.receiver.currentTime)),r&&t._playerRef.pauseVideo()}else t._playerRef.playVideo(t._currentVideo.video_id,undefined,undefined,undefined,undefined,!1,undefined,undefined,t._currentVideo.is_live?undefined:Math.floor(t._state.receiver.currentTime));t._omTrack(!0,!1);break;case"mediaLoaded":if(!n.media)break;t._currentMedia=n,t._currentVideo=n.media.metadata.video,t._currentMedia.addUpdateListener(t._onStatusEvent("media")),t._syncPlayers("receiver"),t._updateCastUI(),t._playStateChange(t._state.receiver.playState),t._setCastState("CONNECTED"),typeof t._playerRef!="undefined"&&t._currentVideo.video_id!=t._playerRef.state.currentVideo.video_id?(t.controls.castVideoButton.style.display="block",t.controls.castVideoButton.innerHTML='Cast "'+t._playerRef.state.currentVideo.title+'"'):(t.controls.castVideoButton.style.display="none",t.controls.castVideoButton.innerHTML="");break;case"play":case"pause":case"unmute":case"mute":case"volume":t._updateCastControls()}}},CBSi.app.VideoPlayer.Cast.prototype._onCastEvent=function(e){var t=this;return _onCastEvent=function(n,r){t.log("CBSi.app.VideoPlayer.Cast","_onCastEvent: "+e+": "+n);switch(e){case"castAPIAvailable":n?(t._chromeCast=window.chrome.cast,t.applicationID=t.applicationID!=""?t.applicationID:t._chromeCast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,t._sessionRequest=new t._chromeCast.SessionRequest(t.applicationID),t._apiConfig=new t._chromeCast.ApiConfig(t._sessionRequest,t._onListenerEvent("session"),t._onListenerEvent("receiver"),t._chromeCast.AutoJoinPolicy.ORIGIN_SCOPED,t._chromeCast.DefaultActionPolicy.CAST_THIS_TAB),t._chromeCast.initialize(t._apiConfig,t._onSuccessEvent("castInit"),t._onErrorEvent("castInit"))):(t.log("CBSi.app.VideoPlayer.Cast: init error","_onCastEvent: castAPIAvailable: error: "+r),t.enabled=!1)}}},CBSi.app.VideoPlayer.Cast.prototype._syncPlayers=function(e){e=="receiver"?(this._state.receiver.playState=typeof this._currentMedia!="undefined"?this._RECEIVER_PLAYSTATES_MAP[this._currentMedia.playerState]:-1,this._state.receiver.currentTime=typeof this._currentMedia!="undefined"?this._currentMedia.getEstimatedTime():0,this._state.sender.currentTime=this._state.receiver.currentTime):(this._state.sender.playState=typeof this._playerRef!="undefined"&&!this._playerRef.state.isInAd?this._playerRef.state.playState:-1,this._state.sender.currentTime=typeof this._playerRef!="undefined"&&!this._playerRef.state.isInAd?this._playerRef.api.getCurrentPlaybackState().currentTime:0,this._state.receiver.currentTime=this._state.sender.currentTime),this._updateCastControls()},CBSi.app.VideoPlayer.Cast.prototype._playStateChange=function(e){this.log("CBSi.app.VideoPlayer.Cast","_playStateChange: "+e);switch(e){case-1:clearTimeout(this._progressTimerID),this._currentMedia.idleReason==this._chromeCast.media.IdleReason.FINISHED||this._currentMedia.idleReason==this._chromeCast.media.IdleReason.ERROR?(this._onProgressEvent()(),this._onSuccessEvent("castStop")()):this._currentMedia.idleReason!=this._chromeCast.media.IdleReason.INTERRUPTED&&this._currentMedia.idleReason==this._chromeCast.media.IdleReason.CANCELLED&&this._onSuccessEvent("castStop")();break;case 1:this._progressTimerID!=0&&clearTimeout(this._progressTimerID),this._progressTimerID=setTimeout(this.objName+"._onProgressEvent()()",100);break;case 2:case 3:clearTimeout(this._progressTimerID)}this._updateCastControls(),this._updateCastUI()},CBSi.app.VideoPlayer.Cast.prototype._loadMedia=function(e,t){this.log("CBSi.app.VideoPlayer.Cast","_loadMedia: "+e+", "+t);if(typeof this._session!="undefined"){this._playerRef.api.pauseVideo(),this._syncPlayers("sender");var n=typeof e.chromecast!="undefined"?e.chromecast:e.url,r=typeof t!="undefined"?t:this._state.sender.playState,i=Math.floor(this._state.sender.currentTime)<1?0:1,s=Math.floor(this._state.sender.currentTime)-i;this._mediaInfo=new this._chromeCast.media.MediaInfo(n,"application/x-mpegURL"),this._mediaInfo.metadata=new this._chromeCast.media.GenericMediaMetadata,this._mediaInfo.metadata.metadataType=this._chromeCast.media.MetadataType.GENERIC,this._mediaInfo.metadata.title=e.title,this._mediaInfo.metadata.subtitle=e.description,this._mediaInfo.metadata.video=e,this._mediaInfo.metadata.images=[{url:e.large_thumbnail,width:640,height:360},{url:e.medium_thumbnail,width:320,height:180},{url:e.small_thumbnail,width:160,height:90},{url:e.micro_thumbnail,width:80,height:45}],e.is_live&&(this._mediaInfo.streamType=this._chromeCast.media.StreamType.LIVE),this._request=new this._chromeCast.media.LoadRequest(this._mediaInfo),e.is_live||(this._request.autoplay=r==1,this._request.currentTime=r==1||r==2||r==3?s:0),this._session.loadMedia(this._request,this._onSuccessEvent("mediaLoaded"),this._onErrorEvent("mediaLoaded"))}},CBSi.app.VideoPlayer.Cast.prototype._onMediaLoaded=function(){this.log("CBSi.app.VideoPlayer.Cast","_onMediaLoaded");if(typeof this._session!="undefined"&&this._session.media.length!=0)this._onSuccessEvent("mediaLoaded")(this._session.media[0]);else if(this._session.media.length!=0){var _onMediaLoaded()},250)}},CBSi.app.VideoPlayer.Cast.prototype._cueSenderVideo=function(e,t,n,r,i,s,o,u,a){this.log("CBSi.app.VideoPlayer.Cast","_cueSenderVideo"),this.playVideoRouted(e,t,n,r,i,!1,o,u,a)},CBSi.app.VideoPlayer.Cast.prototype._setVideoRouted=function(e){this.log("CBSi.app.VideoPlayer.Cast","_setVideoRouted: "+e),e?(this._playerRef.playVideoRouted=this._playerRef.playVideo,this._playerRef.playVideo=this._cueSenderVideo):typeof this._playerRef.playVideoRouted!="undefined"&&(this._playerRef.playVideo=this._playerRef.playVideoRouted)},CBSi.app.VideoPlayer.Cast.prototype._onCastUIEvent=function(e){var t=this;return _onCastUIEvent=function(n){t.log("CBSi.app.VideoPlayer.Cast","_onCastUIEvent: "+e+": "+(typeof n!="undefined"?n.currentTarget.id:""));switch(e){case"castButtonClick":t._setCastState("CONNECTING"),t._chromeCast.requestSession(t._onSuccessEvent("cast"),t._onErrorEvent("cast"));break;case"castStopButtonClick":t._chromeCast.requestSession(t._onSuccessEvent("castStop"),t._onErrorEvent("castStop"));break;case"castVideoButtonClick":t._currentVideo=t._playerRef.state.currentVideo,t._loadMedia(t._currentVideo,1),t._omTrack(!0,!0),t.controls.castVideoButton.style.display="none",t.controls.castVideoButton.innerHTML="";break;case"liveButtonClick":case"playButtonClick":if(t._currentVideo.is_live){var r=new t._chromeCast.media.SeekRequest;r.currentTime=0,r.resumeState=t._chromeCast.media.ResumeState.PLAYBACK_START,t._currentMedia.seek(r,t._onSuccessEvent("seek"),t._onErrorEvent("seek"))}else{var i=new t._chromeCast.media.PlayRequest;t._currentMedia.play(i,t._onSuccessEvent("play"),t._onErrorEvent("play"))}break;case"pauseButtonClick":var s=new t._chromeCast.media.PauseRequest;t._currentMedia.pause(s,t._onSuccessEvent("pause"),t._onErrorEvent("pause"));break;case"muteButtonClick":t._session.setReceiverMuted(!1,t._onSuccessEvent("unmute"),t._onErrorEvent("unmute"));break;case"unmuteButtonClick":t._session.setReceiverMuted(!0,t._onSuccessEvent("unmute"),t._onErrorEvent("unmute"));break;case"volumeSliderClick":var o=t.controls.castVolumeSlider.getBoundingClientRect().width,u=t.controls.castVolumeHandle.getBoundingClientRect().width,a=(o-u)/10,f=n.target==t.controls.castVolumeLevel?n.offsetX+n.target.offsetLeft-u/2:n.offsetX-u/2,l=f/a/10;l=l<0?0:l>1?1:l,t._session.setReceiverVolumeLevel(l,t._onSuccessEvent("volume"),t._onErrorEvent("volume"));break;case"volumeLevelClick":n.preventDefault();break;case"volumeHandleClick":n.preventDefault(),n.stopPropagation();break;case"scrubberClick":var c=t.controls.castScrubber.getBoundingClientRect().width,h=t.controls.castScrubberHandle.getBoundingClientRect().width,p=(c-h)/t._currentMedia.media.duration,d=Math.floor(n.pageX/p),v;switch(t._state.receiver.playState){case-1:case 2:v=t._chromeCast.media.ResumeState.PLAYBACK_PAUSE;break;case 1:case 3:v=t._chromeCast.media.ResumeState.PLAYBACK_START}var r=new t._chromeCast.media.SeekRequest;r.currentTime=d,r.resumeState=v,t._currentMedia.seek(r,t._onSuccessEvent("seek"),t._onErrorEvent("seek"));break;case"scrubberHandleClick":n.preventDefault(),n.stopPropagation()}}},CBSi.app.VideoPlayer.Cast.prototype._updateCastUI=function(){this.log("CBSi.app.VideoPlayer.Cast","_updateCastUI");if(typeof this.controls=="undefined")return"";typeof this._playerRef!="undefined"&&typeof this._currentVideo=="undefined"&&(this._currentVideo=this._playerRef.state.currentVideo);if(typeof this._currentVideo=="undefined")return"";this.controls.castTitle.innerHTML="Casting to "+this._session.receiver.friendlyName+":";var e=this._getThumbnail(this._currentVideo,this._uiWidth,this._uiHeight);return e.src!=this.controls.castVideoThumb.src&&typeof e.src!="undefined"&&(this.controls.castVideoThumb.src=e.src,this.controls.castVideoThumb.width=e.w,this.controls.castVideoThumb.height=e.h),this.controls.castVideoTitle.innerHTML=typeof this._currentVideo.title!="undefined"?this._currentVideo.title:"",this.controls.castVideoDescription.innerHTML=typeof this._currentVideo.description!="undefined"?this._currentVideo.description:"",this.resizePlayer(this._uiWidth,this._uiHeight),""},CBSi.app.VideoPlayer.Cast.prototype._updateCastControls=function(){if(typeof this.controls=="undefined")return;typeof this._currentMedia!="undefined"?(this.controls.castTimeDisplay.style.display="block",this.controls.castScrubber.style.display="block",this.controls.castBufferingAni.style.display="none",this.controls.castPlayButton.style.display="block",this.controls.castPauseButton.style.display="none"):(this.controls.castTimeDisplay.style.display="none",this.controls.castScrubber.style.display="none",this.controls.castBufferingAni.style.display="block",this.controls.castPlayButton.style.display="none",this.controls.castPauseButton.style.display="none");switch(this._state.receiver.playState){case-1:break;case 1:this.controls.castBufferingAni.style.display="none",this.controls.castPlayButton.style.display="none",this.controls.castPauseButton.style.display="block",typeof this._currentVideo!="undefined"&&this._currentVideo.is_live&&(this.controls.castLiveButton.style.display="block",this.controls.castLivePauseButton.style.display="none");break;case 2:this.controls.castBufferingAni.style.display="none",this.controls.castPauseButton.style.display="none",this.controls.castPlayButton.style.display="block",typeof this._currentVideo!="undefined"&&this._currentVideo.is_live&&(this.controls.castLiveButton.style.display="none",this.controls.castLivePauseButton.style.display="block");break;case 3:this.controls.castPauseButton.style.display="none",this.controls.castPlayButton.style.display="none",this.controls.castBufferingAni.style.display="block",typeof this._currentVideo!="undefined"&&this._currentVideo.is_live&&(this.controls.castLiveButton.style.display="none",this.controls.castLivePauseButton.style.display="block")}var e=typeof this._session!="undefined"?this._session.receiver.volume.muted:!1;this.controls.castMuteButton.style.display=e?"block":"none",this.controls.castUnmuteButton.style.display=e?"none":"block";var t=typeof this._session!="undefined"?this._session.receiver.volume.level:.5;this.controls.castVolumeSlider.style.display="block";var n=this.controls.castVolumeSlider.getBoundingClientRect().width,r=this.controls.castVolumeHandle.getBoundingClientRect().width,i=(n-r)/10,s=i*t*10;this.controls.castVolumeHandle.style.left=s+"px",this.controls.castVolumeLevel.style.left=s-n+"px";if(typeof this._currentMedia!="undefined"&&typeof this._currentVideo!="undefined"&&!this._currentVideo.is_live){this.controls.castTimeElapsed.innerHTML=this._printTime(Math.floor(this._state.receiver.currentTime),!0),this.controls.castTimeDuration.innerHTML=this._printTime(this._currentMedia.media.duration,!0);var o=this.controls.castScrubber.getBoundingClientRect().width,u=this.controls.castScrubberHandle.getBoundingClientRect().width,a=(o-u)/this._currentMedia.media.duration,f=a*this._state.receiver.currentTime;this.controls.castScrubberHandle.style.left=f+"px",this.controls.castScrubberLevel.style.left=f-o+"px",this.controls.castScrubber.style.display="block",this.controls.castTimeDisplay.style.display="block",this.controls.castLiveButton.style.display="none",this.controls.castLivePauseButton.style.display="none"}else typeof this._currentMedia!="undefined"&&typeof this._currentVideo!="undefined"&&this._currentVideo.is_live?(this.controls.castScrubber.style.display="none",this.controls.castTimeDisplay.style.display="none"):(this.controls.castScrubber.style.display="none",this.controls.castTimeDisplay.style.display="none")},CBSi.app.VideoPlayer.Cast.prototype._buildCastUI=function(e){this.log("CBSi.app.VideoPlayer.Cast","_buildCastUI");if(typeof e=="undefined"||!e)return;this.controls={},this.controls.castUI=document.createElement("div"),this.controls.castUI.id="CastUI",this.controls.castUI.style.width=this._uiWidth+"px",this.controls.castUI.style.height=this._uiHeight+"px",e.appendChild(this.controls.castUI),this.controls.castStatus=document.createElement("div"),this.controls.castStatus.className="CastStatus",this.controls.castUI.appendChild(this.controls.castStatus),e.appendChild(this.controls.castUI),this.controls.castTitle=document.createElement("div"),this.controls.castTitle.className="CastTitle",this.controls.castStatus.appendChild(this.controls.castTitle),this.controls.castVideoDetails=document.createElement("div"),this.controls.castVideoDetails.className="CastVideoDetails",this.controls.castStatus.appendChild(this.controls.castVideoDetails),this.controls.castVideoThumb=document.createElement("img"),this.controls.castVideoThumb.className="CastVideoThumb",this.controls.castVideoDetails.appendChild(this.controls.castVideoThumb),this.controls.castVideoText=document.createElement("div"),this.controls.castVideoText.className="CastVideoText",this.controls.castVideoDetails.appendChild(this.controls.castVideoText),this.controls.castVideoTitle=document.createElement("div"),this.controls.castVideoTitle.className="CastVideoTitle",this.controls.castVideoText.appendChild(this.controls.castVideoTitle),this.controls.castVideoDescription=document.createElement("div"),this.controls.castVideoDescription.className="CastVideoDescription",this.controls.castVideoText.appendChild(this.controls.castVideoDescription),this.controls.castVideoButton=document.createElement("div"),this.controls.castVideoButton.className="CastVideoButton",this.controls.castStatus.appendChild(this.controls.castVideoButton),this.controls.castControlBar=document.createElement("div"),this.controls.castControlBar.className="CastControlBar",this.controls.castUI.appendChild(this.controls.castControlBar),this.controls.castPlayButton=document.createElement("div"),this.controls.castPlayButton.className="CastPlayButton",this.controls.castControlBar.appendChild(this.controls.castPlayButton),this.controls.castPauseButton=document.createElement("div"),this.controls.castPauseButton.className="CastPauseButton",this.controls.castControlBar.appendChild(this.controls.castPauseButton),this.controls.castBufferingAni=document.createElement("div"),this.controls.castBufferingAni.className="CastBufferingAni",this.controls.castControlBar.appendChild(this.controls.castBufferingAni),this.controls.castMuteButton=document.createElement("div"),this.controls.castMuteButton.className="CastMuteButton",this.controls.castControlBar.appendChild(this.controls.castMuteButton),this.controls.castUnmuteButton=document.createElement("div"),this.controls.castUnmuteButton.className="CastUnmuteButton",this.controls.castControlBar.appendChild(this.controls.castUnmuteButton),this.controls.castVolumeSlider=document.createElement("div"),this.controls.castVolumeSlider.className="CastVolumeSlider",this.controls.castControlBar.appendChild(this.controls.castVolumeSlider),this.controls.castVolumeLevel=document.createElement("div"),this.controls.castVolumeLevel.className="CastVolumeLevel",this.controls.castVolumeSlider.appendChild(this.controls.castVolumeLevel),this.controls.castVolumeHandle=document.createElement("div"),this.controls.castVolumeHandle.className="CastVolumeHandle",this.controls.castVolumeSlider.appendChild(this.controls.castVolumeHandle),this.controls.castScrubber=document.createElement("div"),this.controls.castScrubber.className="CastScrubber",this.controls.castControlBar.appendChild(this.controls.castScrubber),this.controls.castScrubberLevel=document.createElement("div"),this.controls.castScrubberLevel.className="CastScrubberLevel",this.controls.castScrubber.appendChild(this.controls.castScrubberLevel),this.controls.castScrubberHandle=document.createElement("div"),this.controls.castScrubberHandle.className="CastScrubberHandle",this.controls.castScrubber.appendChild(this.controls.castScrubberHandle),this.controls.castTimeDisplay=document.createElement("div"),this.controls.castTimeDisplay.className="CastTimeDisplay",this.controls.castControlBar.appendChild(this.controls.castTimeDisplay),this.controls.castTimeElapsed=document.createElement("div"),this.controls.castTimeElapsed.innerHTML="00:00:00",this.controls.castTimeElapsed.className="CastTimeElapsed",this.controls.castTimeDisplay.appendChild(this.controls.castTimeElapsed),this.controls.castTimeSeparator=document.createElement("div"),this.controls.castTimeSeparator.innerHTML="/",this.controls.castTimeSeparator.className="CastTimeSeparator",this.controls.castTimeDisplay.appendChild(this.controls.castTimeSeparator),this.controls.castTimeDuration=document.createElement("div"),this.controls.castTimeDuration.innerHTML="00:00:00",this.controls.castTimeDuration.className="CastTimeDuration",this.controls.castTimeDisplay.appendChild(this.controls.castTimeDuration),this.controls.castLiveButton=document.createElement("div"),this.controls.castLiveButton.className="CastLiveButton",this.controls.castControlBar.appendChild(this.controls.castLiveButton),this.controls.castLivePauseButton=document.createElement("div"),this.controls.castLivePauseButton.className="CastLivePauseButton",this.controls.castControlBar.appendChild(this.controls.castLivePauseButton),this.controls.castStopButton=document.createElement("div"),this.controls.castStopButton.className="CastStopButton",this.controls.castControlBar.appendChild(this.controls.castStopButton),this._addCastUIListeners();var t=typeof this.cookieJar.read("__ccVidIntSeen")!="undefined"?this.cookieJar.read("__ccVidIntSeen"):!1;t||(this.log("CBSi.app.VideoPlayer.Cast","_buildCastUI: showing intro panel"),this.castIntro=document.createElement("div"),this.castIntro.id="CastIntro",this.castIntro.style.display="none",this.castIntro.innerHTML='<div class="CastIntroOverlay"></div><div class="CastIntroText">Click to cast videos to your TV</div><button tabindex="1" class="CastIntroButton" aria-label="Close Dialog">Got it</button>',this.castIntro.addEventListener("click",this._onIntroClosed()))},CBSi.app.VideoPlayer.Cast.prototype._setTabIndex=function(e,t){document.getElementsByClassName(e)[0]&&document.getElementsByClassName(e)[0].setAttribute("tabindex",t)},CBSi.app.VideoPlayer.Cast.prototype._untrapFocus=function(){this._setTabIndex("uvpjs__btn-playstate","2"),this._setTabIndex("uvpjs__progress-slider","3"),this._setTabIndex("uvpjs__btn-captions","4"),this._setTabIndex("uvpjs__btn-settings","6"),this._setTabIndex("uvpjs__btn-volume","8"),this._setTabIndex("uvpjs__btn-cast","9"),this._setTabIndex("uvpjs__btn-fullscreen","10")},CBSi.app.VideoPlayer.Cast.prototype._addCastUIListeners=function(){this.log("CBSi.app.VideoPlayer.Cast","_addCastUIListeners"),this.controls.castPlayButton.addEventListener("click",this._onCastUIEvent("playButtonClick"),!1),this.controls.castPauseButton.addEventListener("click",this._onCastUIEvent("pauseButtonClick"),!1),this.controls.castLivePauseButton.addEventListener("click",this._onCastUIEvent("liveButtonClick"),!1),this.controls.castMuteButton.addEventListener("click",this._onCastUIEvent("muteButtonClick"),!1),this.controls.castUnmuteButton.addEventListener("click",this._onCastUIEvent("unmuteButtonClick"),!1),this.controls.castVolumeSlider.addEventListener("click",this._onCastUIEvent("volumeSliderClick"),!1),this.controls.castVolumeHandle.addEventListener("click",this._onCastUIEvent("volumeHandleClick"),!1),this.controls.castScrubber.addEventListener("click",this._onCastUIEvent("scrubberClick"),!1),this.controls.castScrubberHandle.addEventListener("click",this._onCastUIEvent("scrubberHandleClick"),!1),this.controls.castStopButton.addEventListener("click",this._onCastUIEvent("castStopButtonClick"),!1),this.controls.castVideoButton.addEventListener("click",this._onCastUIEvent("castVideoButtonClick"),!1)},CBSi.app.VideoPlayer.Cast.prototype._setCastState=function(e){return this.log("CBSi.app.VideoPlayer.Cast","_setCastState: "+e),e==this._castState||typeof this._playerRef=="undefined"||!this.enabled||typeof this.controls=="undefined"?"":(this._castState=e,this._playerRef.skinMgr!=null&&this._playerRef.skinMgr._onCastStateChange(e),e=="CONNECTED"?(this.controls.castUI.style.display="block",this._isCasting=!0,this._setVideoRouted(!0),this._updateCastUI()):(this.controls.castUI.style.display="none",this._setVideoRouted(!1),this._isCasting=!1),"")},CBSi.app.VideoPlayer.Cast.prototype._getThumbnail=function(e,t,n){this.log("CBSi.app.VideoPlayer.Cast","_getThumbnail: "+t+", "+n);if(typeof e=="undefined")return"";var r,i,s,o=t*.35,u=n;return o>=640&&u>=360?(r=e.large_thumbnail,i=640,s=360):o>=320&&u>=180?(r=e.medium_thumbnail,i=320,s=180):o>=160&&u>=90?(r=e.small_thumbnail,i=160,s=90):(r=e.micro_thumbnail,i=80,s=45),typeof r=="undefined"&&(r=typeof r!="undefined"?r:typeof e.large_thumbnail!="undefined"?e.large_thumbnail:typeof e.medium_thumbnail!="undefined"?e.medium_thumbnail:typeof e.small_thumbnail!="undefined"?e.small_thumbnail:typeof e.micro_thumbnail!="undefined"?e.micro_thumbnail:"https://sports.cbsimg.net/images/video/player/CBSSportsLogo_640x360.jpg"),{src:r,w:i,h:s}},CBSi.app.VideoPlayer.Cast.prototype._printTime=function(e,t){typeof t=="undefined"&&(t=!1);if(typeof e=="undefined")return t?"--:--:--":"";var n=Math.floor(e/3600),r=n<10?"0"+n:n,i=Math.floor(e%3600/60),s=i<10?"0"+i:i,o=Math.floor(e%3600%60),u=o<10?"0"+o:o,a=t?r+":"+s+":"+u:r!="00"?n+":"+s+":"+u:s!="00"?i+":"+u:i+":"+u;return a},CBSi.app.VideoPlayer.Cast.prototype._omTrack=function(e,t){this.log("CBSi.app.VideoPlayer.Cast","_omTrack: enabled: "+e+", connected: "+t),typeof e=="undefined"&&(e=!1),typeof t=="undefined"&&(t=!1),typeof window.om!="undefined"&&typeof window.om.trackCasting!="undefined"&&window.om.trackCasting(e,t)},CBSi.app.VideoPlayer.Cast.prototype._onIntroClosed=function(){this.log("CBSi.app.VideoPlayer.Cast","_onIntroClosed added");var e=this;return _onIntroClosed=function(t){t.preventDefault(),t.stopPropagation(),t.currentTarget.removeEventListener("click",_onIntroClosed),t.currentTarget.parentNode.removeChild(t.currentTarget),e._untrapFocus(),e.cookieJar.add("__ccVidIntSeen",!0,7300,"/",document.domain)}},define("components/embed/app/VideoPlayer/Cast",function(){}),CBSi.namespace("CBSi.app.VideoPlayer.Embed");var nm={http_host:"www.cbssports.com",uvpjs_version:"2.9.9",uvpc:"",IMAGE_SERVER:"https://sports.cbsimg.net",MEDIA_HTTP_SERVER:window.location.protocol+"//www.cbssports.com",referer_url:"",stime:document.querySelector("#mycbsiplayer").dataset.stime},embed_args=globalVar?globalVar:{};(function(e,t,n,r){typeof utag_data=="undefined"&&(utag_data={}),typeof DW=="undefined"&&(DW={}),nm.utag=typeof nm.utag!="undefined"&&nm.utag!=""?nm.utag:"cbssportssite",e="//tags.tiqcdn.com/utag/cbsi/videotracking-v3/prod/utag.js",t=document,n="script",r=t.createElement(n),r.src=e,r.type="text/java"+n,r.async=!0,e=t.getElementsByTagName(n)[0],e.parentNode.insertBefore(r,e)})();if(CBSi.mycbsiplayerState!="")var embed_args={DATA_defaults:{content:{ALERT_REFRESH:60,SHOW_BUFFER:8,CAROUSEL_REFRESH:90,DEFAULT_CHANNEL:null,DEFAULTS_REFRESH:600,SOCIAL_WIDGET_THUMBNAIL:"//sports.cbsimg.net/images/video/player/CBSSportsLogo.png",ARENA_TITLE:"CBSSports.com Videos",SOCIAL_WIDGET_TITLE:"CBSSports.com Videos",CHANNEL_LIST:"",SOCIAL_WIDGET_DESCRIPTION:"Sports video from all over the United States served to you from CBSSports.com. Check out original programming and video previews and recaps from sports events at CBSSports.com.",SOCIAL_WIDGET_DEFAULT_URL:"http://www.cbssports.com/videos",CHANNEL_LIST_LABELS:"",SOCIAL_WIDGET_SITE:"CBS Sports",TZ:"US/Eastern",SOCIAL_WIDGET_URL:"https://www.cbssports.com/general/video/_ID_"}},env:"prod",preload_data:[{channel:"videos",custom_data:{},atvsc720_thumbnail:"https://sportshub.cbsistatic.com/api/content/image/9b3483da-0af5-4085-a21f-f789d705b760/showcase/2c36e808-5c9e-4e2f-8e59-4ef0fdcb2c80/514x188.jpg",atvsc1080_thumbnail:"https://sportshub.cbsistatic.com/api/content/image/9b3483da-0af5-4085-a21f-f789d705b760/showcase/2c36e808-5c9e-4e2f-8e59-4ef0fdcb2c80/771x282.jpg",description:"CBS Sports HQ",duration:"1440:00",end_time:1886437920,episode_title:"",event_id:"",exclude_mobile:0,guid:"Ml_8xlr__D9RFI3OY8uXQmUK8c_Dfj2o",hd720p_thumbnail:"https://sportshub.cbsistatic.com/api/content/image/9b3483da-0af5-4085-a21f-f789d705b760/resize/1280x720.jpg",hd1080p_thumbnail:"https://sportshub.cbsistatic.com/api/content/image/9b3483da-0af5-4085-a21f-f789d705b760/resize/1920x1080.jpg",is_featured:0,is_game_preview:0,is_live:1,is_game_recap:0,is_player_news:0,large_thumbnail:"https://sportshub.cbsistatic.com/api/content/image/9b3483da-0af5-4085-a21f-f789d705b760/resize/640x360.jpg",length:86400,live_midroll_url:"https://pubads.g.doubleclick.net/gampad/live/ads?slotname=/8264/vaw-sports/desktop/PARTNER&ad_rule=0&sz=640x480&ciu_szs=300x250&cust_params=vid%3D{mediaReferenceId}%26partner%3DPARTNER%26breakid%3DBREAKID{feat}&url=[referrer_url]&unviewed_position_start=1&output=xml_vast3&impl=s&env=vp&gdfp_req=1&vad_type=linear&pmnd=0&pmxd=DURATION&video_doc_id={mediaReferenceId}&cmsid=2289&vpos=midroll&pp=vpaid_js",micro_thumbnail:"https://sportshub.cbsistatic.com/api/content/image/9b3483da-0af5-4085-a21f-f789d705b760/resize/80x45.jpg",medium_thumbnail:"https://sportshub.cbsistatic.com/api/content/image/9b3483da-0af5-4085-a21f-f789d705b760/resize/320x180.jpg",nielsen_genre:"Sports News",notification:0,pcid:0xeb625da91e,small_thumbnail:"https://sportshub.cbsistatic.com/api/content/image/9b3483da-0af5-4085-a21f-f789d705b760/resize/160x90.jpg",seoname:"cbs-sports-hq",annotations:[],sources:{HLS:{OTT:"https://dai.google.com/linear/hls/event/9Lq0ERvoSR-z9AwvFS-xYA/master.m3u8?iu=/8264/vaw-sports/ott/cbssports&dai-ot=bw&dai-ov=1425745,950712,2085745,3955779",TABLET:"https://dai.google.com/linear/hls/event/9Lq0ERvoSR-z9AwvFS-xYA/master.m3u8?iu=/8264/vaw-sports/desktop/cbssports_m&dai-ot=bw&dai-ov=1425745,345977,620677,950712,2085745,3955779",DESKTOP:"https://sportshq-mediapackage-cedexis.cbsaavideo.com/out/v1/be87d7783e5c4270a5830ea5d1164850/desktop.m3u8",PHONE:"https://dai.google.com/linear/hls/event/9Lq0ERvoSR-z9AwvFS-xYA/master.m3u8?iu=/master.m3u8?iu=/8264/vaw-sports/mobile_web/cbssports_m&dai-ot=bw&dai-ov=950712,345977,620677,1425745,2085745"}},start_time:1498946820,suppress_ads:0,title:"CBS Sports HQ",series_title:"",use_mdialog_sdk:0,video_id:"2c36e808-5c9e-4e2f-8e59-4ef0fdcb2c80"}],data_limit:50,domain:"cbssports.com",allowed_domains:'["cbssports.com","247sports.com","247sportsdev3.com","247sportsdev.com","247sportsdev2.com","247sportsstage.com","sportsline.com","scout.com","scoutdev.com","maxpreps.com","cstv.com","collegesports.com","collegesportslive.com","fansonly.com","sidearmsports.com","comicbook.com","popculture.com"]',uvpc:"/player/fetch/?state="+CBSi.mycbsiplayerState,player_id:"CBSsuperbowlLIII",resizable:"true"};for(var arg in embed_args)nm[arg]=embed_args[arg];var cbsiUtils=CBSi.util.Utils,playerID=typeof nm.player_id!="undefined"&&typeof nm.player_id!="undefined"&&nm.player_id!=""?nm.player_id:"_"+Math.floor(Math.random()*(new Date).getTime()),cbsiLogger=new CBSi.util.Logger({enabled:!1}),cbsiXFP=new CBSi.app.VideoPlayer.XFP({enabled:!0,log:function(e,t){cbsiLogger.log(playerID+" - "+e,t)}}),cbsiCast=new CBSi.app.VideoPlayer.Cast({container:$(".videoCnt .player")[0],enabled:!0,log:function(e,t){cbsiLogger.log(playerID+" - "+e,t)}}),cbsiClock=new CBSi.util.Clock({log:function(e,t){cbsiLogger.log(playerID+" - "+e,t)},env:nm.env||"prod"}),cbsiCookieJar=new CBSi.util.CookieJar({log:function(e,t){cbsiLogger.log(playerID+" - "+e,t)}}),cbsiSession=new CBSi.util.Session({cookieName:"_CBSSportsVideoCache",cookieJar:cbsiCookieJar,log:function(e,t){cbsiLogger.log(playerID+" - "+e,t)}});CBSi.app.VideoPlayer.Embed.config={clock:cbsiClock,logger:cbsiLogger,session:cbsiSession,utils:cbsiUtils,adDisplayer:cbsiXFP,chartBeat:{},castSeyerID+" - "+e,t)},config:{playerID:playerID,objName:typeof nm.objName!="undefined"&&nm.objName!=""?nm.objName:"cbsiPlayer",id:typeof nm.id!="undefined"&&nm.id!=""?nm.id:"mycbsiplayer",container:typeof nm.container!="undefined"&&nm.container!=""?nm.container:"myAlternativeContent",host:typeof nm.http_host!="undefined"&&nm.http_host!=""?nm.http_host:"www.cbssports.com",uvpjsVersion:typeof nm.uvpjs_version!="undefined"&&nm.uvpjs_version!=""?nm.uvpjs_version:"1.5.0",compAdsEnabled:typeof nm.comp_ads_enabled!="undefined"&&nm.comp_ads_enabled.toString()!=""?nm.comp_ads_enabled:!0,compAdsAutoload:typeof nm.comp_ads_autoload!="undefined"&&nm.comp_ads_autoload.toString()!=""?nm.comp_ads_autoload:!0,htmlCompanionAd:typeof nm.html_companion_ad!="undefined"&&nm.html_companion_ad.toString()!=""?nm.html_companion_ad:!0,adContainer:typeof nm.ad_container!="undefined"&&nm.ad_container!=""?nm.ad_container:"adCnt",compAdW:typeof nm.comp_ad_w!="undefined"&&nm.comp_ad_w.toString()!=""?nm.comp_ad_w:300,compAdH:typeof nm.comp_ad_h!="undefined"&&nm.comp_ad_h.toString()!=""?nm.comp_ad_h:60,ids:typeof nm.ids!="undefined"?nm.ids.split(","):[],width:typeof nm.width!="undefined"&&nm.width.toString()!=""?nm.width:300,height:typeof nm.height!="undefined"&&nm.height.toString()!=""?nm.height:169,vwidth:typeof nm.vwidth!="undefined"&&nm.vwidth.toString()!=""?nm.vwidth:typeof nm.width!="undefined"&&nm.width.toString()!=""?nm.width:300,vheight:typeof nm.vheight!="undefined"&&nm.vheight.toString()!=""?nm.vheight:typeof nm.height!="undefined"&&nm.height.toString()!=""?nm.height:169,xPos:typeof nm.xpos!="undefined"&&nm.xpos.toString()!=""?nm.xpos:0,yPos:typeof nm.ypos!="undefined"&&nm.ypos.toString()!=""?nm.ypos:0,partner:typeof nm.partner!="undefined"&&nm.partner!=""?nm.partner:"cbssports",partnerM:typeof nm.partner_m!="undefined"&&nm.partner_m!=""?nm.partner_m:typeof nm.partner!="undefined"&&nm.partner!=""?nm.partner:"cbssports_m",autoplay:typeof nm.autoplay!="undefined"&&nm.autoplay.toString()!=""?nm.autoplay:!0,silent:typeof nm.silent!="undefined"&&nm.silent.toString()!=""?nm.silent:!0,inline:typeof nm.inline!="undefined"&&nm.inline.toString()!=""?nm.inline:!0,refPage:typeof nm.ref_page!="undefined"&&nm.ref_page!=""?nm.ref_page:"Embed",uvpc:typeof nm.uvpc!="undefined"&&nm.uvpc!=""?nm.uvpc:"",uvpcM:typeof nm.uvpc_m!="undefined"&&nm.uvpc_m!=""?nm.uvpc_m:"",imageServer:typeof nm.IMAGE_SERVER!="undefined"&&nm.IMAGE_SERVER!=""?nm.IMAGE_SERVER:"https://sports.cbsimg.net",mediaServer:typeof nm.MEDIA_HTTP_SERVER!="undefined"&&nm.MEDIA_HTTP_SERVER!=""?nm.MEDIA_HTTP_SERVER:"https://www.cbssports.com",logWindow:typeof nm.log_window!="undefined"&&nm.log_window.toString()!=""?nm.log_window:!1,defaults:typeof nm.DATA_defaults!="undefined"&&nm.DATA_defaults!=""?nm.DATA_defaults:{},dataName:typeof nm.data_name!="undefined"?nm.data_name:"",stime:typeof nm.stime!="undefined"&&nm.stime.toString()!=""?nm.stime:0,continuousPlay:typeof nm.continuous_play!="undefined"&&nm.continuous_play.toString()!=""?nm.continuous_play:!0,useBrowserControls:typeof nm.useBrowserControls!="undefined"?nm.useBrowserControls:!1,mediaHttpServer:typeof nm.MEDIA_HTTP_SERVER!="undefined"&&nm.MEDIA_HTTP_SERVER!=""?nm.MEDIA_HTTP_SERVER:"https://www.cbssports.com",server:typeof nm.MEDIA_HTTP_SERVER!="undefined"&&nm.MEDIA_HTTP_SERVER!=""?nm.MEDIA_HTTP_SERVER:"https://www.cbssports.com",channel:typeof nm.channel!="undefined"?nm.channel:typeof nm.DATA_defaults!="undefined"?nm.DATA_defaults.content.CHANNEL_LIST[0]:"",enableControls:typeof nm.enable_controls!="undefined"&&nm.enable_controls.toString()!=""?nm.enable_controls:!0,warW:typeof nm.war_w!="undefined"&&nm.war_w.toString()!=""?nm.war_w:300,warH:typeof nm.war_h!="undefined"&&nm.war_h.toString()!=""?nm.war_h:169,warClass:typeof nm.war_class!="undefined"&&nm.war_class.toString()!=""?nm.war_class:"war-enabled",resizable:typeof nm.resizable!="undefined"&&nm.resizable.toString()!=""?nm.resizable:!1,preload:typeof nm.preload!="undefined"?nm.preload:{},preloadData:typeof nm.preload_data!="undefined"?nm.preload_data:[],domain:typeof nm.domain!="undefined"&&nm.domain.toString()!=""?nm.domain:!1,dataLimit:typeof nm.data_limit!="undefined"&&nm.data_limit.toString()!=""?nm.data_limit:!1,dataOffset:typeof nm.data_offset!="undefined"&&nm.data_offset.toString()!=""?nm.data_offset:!1,filters:typeof nm.filters!="undefined"&&nm.filters!=""?nm.filters:!1,sortBy:typeof nm.sort_by!="undefined"&&nm.sort_by!=""?nm.sort_by:!1,jsCustom:typeof nm.js!="undefined"?nm.js:"",cssCustom:typeof nm.css!="undefined"?nm.css:"",env:typeof nm.env!="undefined"&&nm.env!=""?nm.env:"prod",mso:typeof nm.mso!="undefined"?nm.mso:"",videoAPIVer:typeof nm.api!="undefined"?nm.api:"1_6",source:typeof nm.source!="undefined"?nm.source:"",externalDataLoad:typeof nm.externalDataLoad!="undefined"?nm.externalDataLoad:!1,closedCaptionPath:typeof nm.closed_caption_path!="undefined"?nm.closed_caption_path:"",inlinePlay:typeof nm.allow_no_inline_play!="undefined"?nm.allow_no_inline_play:0,forceHlsjs:typeof nm.forceHlsjs!="undefined"?nm.forceHlsjs:!1,forceMute:typeof nm.forceMute!="undefined"&&nm.forceMute.toString()!=""?nm.forceMute:!1,suppressAds:typeof nm.suppressAds!="undefined"&&nm.suppressAds.toString()!=""?nm.suppressAds:!1,startTime:typeof nm.startTime!="undefined"&&nm.startTime.toString()!=""?nm.startTime:!1,cmpGroups:typeof nm.cmpGroups!="undefined"&&nm.cmpGroups.toString()!=""?cbsiUtils.stringToObject(nm.cmpGroups):!1,useDaiSsb:typeof nm.useDaiSsb!="undefined"?nm.useDaiSsb:undefined,isDvrSegment:typeof nm.isDvrSegment!="undefined"?nm.isDvrSegment:!1,description_url:typeof nm.description_url!="undefined"&&nm.description_url!=""?nm.description_url:undefined,ptpl:typeof nm.ptpl!="undefined"&&nm.ptpl!=""?nm.ptpl:undefined,plyr:typeof nm.plyr!="undefined"&&nm.plyr!=""?nm.plyr:undefined,isParentAccessible:!1,allowedDomains:typeof nm.allowed_domains!="undefined"?nm.allowed_domains:["cbssports.com","247sports.com","247sportsdev3.com","247sportsdev.com","247sportsdev2.com","247sportsstage.com","sportsline.com","maxpreps.com","scout.com","scoutdev.com","cstv.com","collegesports.com","collegesportslive.com","fansonly.com","sidearmsports.com","comicbook.com","popculture.com"]},state:{isWARInit:!1,isWAROpen:!1,loadQueue:typeof nm.ids!="undefined"?nm.ids.split(","):[],retries:0}},cbsiSession.cookieJar.remove("__CBSSVidAP"),cbsiSession.cookieJar.remove("__CBSSVidCP"),cbsiUtils.stringToPrimitive(CBSi.app.VideoPlayer.Embed.config.config),CBSi.app.VideoPlayer.Embed.config.config.domain&&(document.domain=CBSi.app.VideoPlayer.Embed.config.config.domain),CBSi.app.VideoPlayer.Embed.config.config.compAdsEnabled&&typeof CBSi.app.VideoPlayer.Embed.config.adDisplayer!="undefined"?CBSi.app.VideoPlayer.Embed.config.adDisplayer.autoload=CBSi.app.VideoPlayer.Embed.config.config.compAdsAutoload:CBSi.app.VideoPlayer.Embed.config.config.compAdsEnabled||$(".adCnt").addClass("disabled"),cbsiSession.cookieJar.read("ppid")&&(CBSi.app.VideoPlayer.Embed.config.config.ppid=cbsiSession.cookieJar.read("ppid"),CBSi.app.VideoPlayer.Embed.config.config.userPPID=CBSi.app.VideoPlayer.Embed.config.config.ppid);try{window.parent.document,CBSi.app.VideoPlayer.Embed.config.config.isParentAccessible=typeof window.parent.document!="undefined"&&window.parent!==window?!0:!1}catch(e){CBSi.app.VideoPlayer.Embed.config.config.isParentAccessible=!1}CBSi.app.VideoPlayer.Embed.config.config.isParentAccessible&&window.frameElement&&(!window.frameElement.hasAttribute("allowfullscreen")||window.frameElement.getAttribute("allowfullscreen")=="false")&&(CBSi.app.VideoPlayer.Embed.config.config.includeFullScreenButton=!1);if(CBSi.app.VideoPlayer.Embed.config.config.isParentAccessible){var par=window.parent;CBSi.app.VideoPlayer.Embed.config.config.windowTop=par,window.xfpObj=typeof par.xfpObj!="undefined"?par.xfpObj:typeof window.xfpObj!="undefined"?window.xfpObj:{},typeof par.SportsPageVars!="undefined"&&(window.SportsPageVars=par.SportsPageVars),window.utag_data=typeof par.utag_data!="undefined"?par.utag_data:typeof window.utag_data!="undefined"?window.utag_data:{}}cbsiLogger.enabled=CBSi.app.VideoPlayer.Embed.config.config.logWindow,cbsiLogger.enabled&&(CBSi.app.VideoPlayer.Embed.config.config.uvpc+=(CBSi.app.VideoPlayer.Embed.config.config.uvpc!=""?",":"")+CBSi.app.VideoPlayer.Embed.config.config.mediaServer+"/data/video/player/getConfig?cfg=uvp_debug&ver="+CBSi.app.VideoPlayer.Embed.config.config.env,CBSi.app.VideoPlayer.Embed.config.adDisplayer.debugMode=!0),CBSi.app.VideoPlayer.Embed.config.config.resizable&&(CBSi.app.VideoPlayer.Embed.config.config.width=typeof window.innerWidth!="undefined"?window.innerWidth:$(window).width(),CBSi.app.VideoPlayer.Embed.config.config.height=typeof window.innerHeight!="undefined"?window.innerHeight:$(window).height(),CBSi.app.VideoPlayer.Embed.config.config.vwidth=typeof window.innerWidth!="undefined"?window.innerWidth:$(window).width(),CBSi.app.VideoPlayer.Embed.config.config.vheight=typeof window.innerHeight!="undefined"?window.innerHeight:$(window).height()),typeof nm.referer_url!="undefined"&&nm.referer_url!=""&&(CBSi.app.VideoPlayer.Embed.config.config.refererURL=nm.referer_url);var cbsiPlayer=new CBSi.app.VideoPlayer.Client(CBSi.app.VideoPlayer.Embed.config),getVidSessionValues(e)};cbsiPlayer.config.adBlockerCallback=function(){cbsiPlayer.log("CBSiPlayer: adBlockerCallback");if(typeof window.pollABState!="undefined"){var e=window.pollABState();return e}return!1},cbsiPlayer.onStateChange=function(e){cbsiPlayer.log("CBSiPlayer: onStateChange: "+e);if(e==1&&cbsiPlayer.config.isParentAccessible){var t=cbsiPlayer.config.windowTop;if(cbsiPlayer.utils.exists("par.CBSi.app.VideoPlayer.playerRefs"))for(ref in t.CBSi.app.VideoPlayer.playerRefs)ref!=cbsiPlayer.config.playerID&&(t.CBSi.app.VideoPlayer.playerRefs[ref].api.pauseVideo(),parWin.unbind("resize.WAR"+ref+" scroll.WAR"+ref,cbsiPlayer.scrollWAR),t.CBSi.app.VideoPlayer.playerRefs[ref].state&&t.CBSi.app.VideoPlayer.playerRefs[ref].state.isWAROpen&&t.CBSi.app.VideoPlayer.playerRefs[ref].closeWAR());parWin.unbind("resize.WAR"+cbsiPlayer.config.playerID+" scroll.WAR"+cbsiPlayer.config.playerID,cbsiPlayer.scrollWAR),parWin.bind("resize.WAR"+cbsiPlayer.config.playerID+" scroll.WAR"+cbsiPlayer.config.playerID,cbsiPlayer.scrollWAR)}},cbsiPlayer.onSkinManagerLoaded=function(e){cbsiPlayer.log("CBSiPlayer: onSkinManagerLoaded: "+e),cbsiPlayer.state.isPlayerReady&&cbsiPlayer.state.playlist.length&&typeof cbsiPlayer.state.videoData.data[cbsiPlayer.state.playlist[0]]!="undefined"&&cbsiPlayer.playVideo(cbsiPlayer.state.playlist[0],cbsiPlayer.config.partner,"url",cbsiPlayer.state.videoData.data[cbsiPlayer.state.playlist[0]][0].is_live,"akamai_hd",cbsiPlayer.config.autoplay)},cbsiPlaealiumPageData()},cbsiPlayer.onPlayerLoaded=function(e){cbsiPlayer.log("CBSiPlayer: onPlayerLoaded"),typeof cbsiPlayer.state.currentVideo!="undefined"&&$("#WAR").find(".title").html(cbsiPlayer.state.currentVideo.title),cbsiPlayer.config.resizable&&cbsiPlayer.onResizeWindow();if(cbsiPlayer.config.isParentAccessible){var t=cbsiPlayer.config.windowTop;window.xfpObj=typeof t.xfpObj!="undefined"?t.xfpObj:typeof window.xfpObj!="undefined"?window.xfpObj:{},typeof t.SportsPageVars!="undefined"&&(window.SportsPageVars=t.SportsPageVars),window.utag_data=typeof t.utag_data!="undefined"?t.utag_data:typeof window.utag_data!="undefined"?window.utag_data:{},cbsiPlayer.setTealiumPageData(),typeof t.CBSi=="undefined"&&(t.CBSi={app:{VideoPlayer:{playerRefs:{}}}}),typeof t.CBSi.app=="undefined"&&(t.CBSi.app={VideoPlayer:{playerRefs:{}}}),typeof t.CBSi.app.VideoPlayer=="undefined"&&(t.CBSi.app.VideoPlayer={playerRefs:{}}),typeof t.CBSi.app.VideoPlayer.playerRefs=="undefined"&&(t.CBSi.app.VideoPlayer.playerRefs={}),t.CBSi.app.VideoPlayer.playerRefs[cbsiPlayer.config.playerID]=cbsiPlayer,typeof t.VideoPlayerRegistered!="undefined"&&t.VideoPlayerRegistered(cbsiPlayer.config.playerID)}cbsiPlayer.config.jsCustom!=""&&function(e,t,n,r){e="https://sports.cbsimg.net/"+cbsiPlayer.config.jsCustom,t=document,n="script",r=t.createElement(n),r.src=e,r.type="text/java"+n,r.async=!0,r.defer=!0,e=t.getElementsByTagName(n)[0],e.parentNode.insertBefore(r,e)}()},cbsiPlayer.onContentDataLoaded=function(e){cbsiPlayer.log("CBSiPlayer: onContentDataLoaded"),typeof cbsiPlayer.state.currentVideo!="undefined"&&$("#WAR").find(".title").html(cbsiPlayer.state.currentVideo.title),cbsiPlayer.state.displayState=="normal"&&cbsiPlayer.state.isWAROpen&&(cbsiPlayer.setWAR(),cbsiPlayer.resizePlayer(cbsiPlayer.config.warW,cbsiPlayer.config.warH))},cbsiPlayer.onAdStart=function(e){cbsiPlayer.log("CBSiPlayer: onAdStart"),typeof cbsiPlayer.state.currentVideo!="undefined"&&$("#WAR").find(".title").html(cbsiPlayer.state.currentVideo.title),cbsiPlayer.state.displayState=="normal"&&cbsiPlayer.state.isWAROpen&&(cbsiPlayer.setWAR(),cbsiPlayer.resizePlayer(cbsiPlayer.config.warW,cbsiPlayer.config.warH)),cbsiPlayer.config.resizable&&cbsiPlayer.onResizeWindow()},cbsiPlayer.onContentStart=function(e){cbsiPlayer.log("CBSiPlayer: onContentStart"),typeof cbsiPlayer.state.currentVideo!="undefined"&&$("#WAR").find(".title").html(cbsiPlayer.state.currentVideo.title),cbsiPlayer.state.displayState=="normal"&&cbsiPlayer.state.isWAROpen&&(cbsiPlayer.setWAR(),cbsiPlayer.resizePlayer(cbsiPlayer.config.warW,cbsiPlayer.config.warH)),cbsiPlayer.config.resizable&&cbsiPlayer.onResizeWindow()},cbsiPlayer.controlFullscreen=function(e){cbsiPlayer.log("CBSiPlayer: controlFullscreen"),cbsiPlayer.state.displayState=="fullscreen"?cbsiPlayer.onResizeWindow():cbsiPlayer.resizePlayer(cbsiPlayer.config.width,cbsiPlayer.config.height)},cbsiPlayer.firstGesture=function(e){cbsiPlayer.log("CBSiPlayer: firstGesture"),e.payload.info.type=="adClick"||typeof e.payload.info.isPlayPauseToggle!="undefined"&&e.payload.info.isPlayPauseToggle,typeof e.payload.info.isVolumeButton!="undefined"&&e.payload.info.isVolumeButton},cbsiPlayer.onResizeWindow=function(e){cbsiPlayer.log("CBSiPlayer: onResizeWindow"),cbsiPlayer.config.isMobile==1&&cbsiPlayer.resizePlayer(0,0),setTimeout(function(){var e=cbsiPlayer.isWAREnabled()&&cbsiPlayer.state.isWAROpen&&cbsiPlayer.state.displayState!="fullscreen"?$("#WAR").height():0,t=$(window).width(),n=$(window).height()-e;cbsiPlayer.state.displayState=="normal"&&cbsiPlayer.state.isWAROpen&&cbsiPlayer.setWAR(),console.log("Player Resize: ",t,n,$(window).height(),e),cbsiPlayer.resizePlayer(t,n)},250)},cbsiPlayer.orientationChange=function(){cbsiPlayer.log("CBSiPlayer: orientationChange"),cbsiPlayer.onResizeWindow(),cbsiPlayer.state.displayState=="normal"&&cbsiPlayer.scrollWAR()},window.addEventListener("orientationchange",cbsiPlayer.orientationChange,!1),cbsiPlayer.openWAR=function(){cbsiPlayer.state.isWAROpen=!0,cbsiPlayer.setWAR();var e=$("#WAR");e.css("display","table-cell"),e.find(".title").html(cbsiPlayer.state.currentVideo.title),e.find(".close").click(function(){parWin.unbind("resize.WAR"+cbsiPlayer.config.playerID+" scroll.WAR"+cbsiPlayer.config.playerID,cbsiPlayer.scrollWAR),cbsiPlayer.api.pauseVideo(),cbsiPlayer.closeWAR()}),embedIfr.addClass(cbsiPlayer.config.warClass),$("body").addClass(cbsiPlayer.config.warClass),parWin.bind("resize.WAR"+cbsiPlayer.config.playerID,cbsiPlayer.setWAR),typeof cbsiPlayer!="undefined"&&typeof cbsiPlayer.resizePlayer!="undefined"&&cbsiPlayer.resizePlayer(cbsiPlayer.config.warW,cbsiPlayer.config.warH);if(typeof cbsiPlayer.skinMgr!="undefined"){var t=cbsiPlayer.skinMgr;t._hide(t.css.TITLE_TEXT)}},cbsiPlayer.closeWAR=function(){parWin.unbind("resize.WAR"+cbsiPlayer.config.playerID,cbsiPlayer.setWAR),cbsiPlayer.state.isWAROpen=!1,embedIfr.css("width",""),embedIfr.css("height",""),embedIfr.css("left",""),embedIfr.css("top",""),embedIfr.css("right",""),embedIfr.css("bottom",""),embedIfr.css("position",""),embedIfr.css("z-index",""),embedIfr.css("margin-bottom",""),embedIfr.css("font-family",""),embedIfr.removeClass(cbsiPlayer.config.warClass),$("body").removeClass(cbsiPlayer.config.warClass);var e=$("#WAR");e.css("display","none"),e.find(".title").html(""),typeof cbsiPlayer!="undefined"&&typeof cbsiPlayer.resizePlayer!="undefined"&&cbsiPlayer.resizePlayer(embedIfr.width(),embedIfr.height());if(typeof cbsiPlayer.skinMgr!="undefined"){var t=cbsiPlayer.skinMgr;t._show(t.css.TITLE_TEXT)}},cbsiPlayer.scrollWAR=function(){var e=cbsiPlayer.getViewportStatus(),t=e.top||e.bottom;!t&&!cbsiPlayer.state.isWAROpen&&cbsiPlayer.isWAREnabled()?cbsiPlayer.openWAR():(t&&cbsiPlayer.state.isWAROpen||!t&&cbsiPlayer.state.isWAROpen&&!cbsiPlayer.isWAREnabled())&&cbsiPlayer.closeWAR()},cbsiPlayer.setWAR=function(){typeof cbsiPlayer.state.currentVideo!="undefined"&&$("#WAR").find(".title").html(cbsiPlayer.state.currentVideo.title),setTimeout(function(){var e=parWin.width()-(pageCnt.offset().left+pageCnt.width())+13;embedIfr.width(cbsiPlayer.config.warW),$("#WAR").width(cbsiPlayer.config.warW),embedIfr.height(cbsiPlayer.config.warH+$("#WAR").height()),embedIfr.css("left","auto"),embedIfr.css("top","auto"),embedIfr.css("right",e+"px"),embedIfr.css("bottom","0px"),embedIfr.css("position","fixed"),embedIfr.css("z-index",999999),embedIfr.css("margin-bottom","0px"),embedIfr.css("font-family","proxima-nova")},250)},cbsiPlayer.isWAREnabled=function(){var e=!1;if(!cbsiPlayer.state.isWARInit)e=!1;else if(cbsiPlayer.config.host.match(/^.*(www|dev|qa|fly|local)\.(cbssports|sportsline)\.com.*$/gi)==null)e=!1;else if(!cbsiPlayer.config.isParentAccessible)e=!1;else if(window.pageCnt.length&&(window.pageCnt.find(".storyCopy").length||window.pageCnt.find(".lf-body").length)||parDoc.find(".enable-watch-and-read").length)e=!0;return e},cbsiPlayer.getViewportStatus=function(){if(typeof embedCnt=="undefined"||typeof embedCnt[0]=="undefined")return{top:!0,bottom:!0};var e=embedCnt[0].getBoundingClientRect(),t=e.top>=0&&e.top<=parWin.height(),n=e.bottom>=0&&e.bottom<=parWin.height();return{top:t,bottom:n}},cbsiPlayer.setTealiumPageData=function(){if(typeof om=="undefined"||typeof cbsiPlayer.api=="undefined")return;var e=om.getHbParams();cbsiPlayer.log("CBSiPlayer: setTealiumPageData: "+JSON.stringify(e)),cbsiPlayer.api.setPageContextMetadata(e)},cbsiPlayer.windowEventHandler=function(e){var t=cbsiPlayer.getViewportStatus(),n=t.top,r=t.bottom,i=n!=cbsiPlayer.state.isElementTopInViewport||r!=cbsiPlayer.state.isElementBotInViewport;if(!i)return;if(n||r)cbsiPlayer.state.isWARInit=!0;cbsiPlayer.state.isElementTopInViewport=n,cbsiPlayer.state.isElementBotInViewport=r},cbsiPlayer.play=function(e){cbsiPlayer.log("CBSiPlayer: play: "+e),typeof cbsiPlayer.api=="undesiPlayer.play(e)},1e3):typeof e=="undefined"?cbsiPlayer.api.playVideo():typeof cbsiPlayer.state.videoData.data[e]=="undefined"?setTimeout(function(){cbsiPlayer.state.retries<5?(cbsiPlayer.state.retries++,cbsiPlayer.play(e)):isNaN(e)?cbsiPlayer.playVideo(e,undefined,undefined,undefined,undefined,!1):cbsiPlayer.handleUVPEvent("onStateChange")(110)},1e3):(cbsiPlayer.playVideo(e,undefined,undefined,undefined,undefined,!1),cbsiPlayer.skinMgr!=null&&cbsiPlayer.skinMgr._onPreviewBtn())},cbsiPlayer.pause=function(){cbsiPlayer.log("CBSiPlayer: pause"),typeof cbsiPlayer.api!="undefined"&&cbsiPlayer.api.pauseVideo()},cbsiPlayer.mute=function(){cbsiPlayer.log("CBSiPlayer: mute"),typeof cbsiPlayer.api!="undefined"&&cbsiPlayer.api.mute()},cbsiPlayer.unMute=function(){cbsiPlayer.log("CBSiPlayer: unMute"),typeof cbsiPlayer.api!="undefined"&&cbsiPlayer.api.unMute()},cbsiPlayer.setVolume=function(e){cbsiPlayer.log("CBSiPlayer: setVolume"),typeof cbsiPlayer.api!="undefined"&&typeof e!="undefined"&&cbsiPlayer.api.setVolume(e)},cbsiPlayer.setUtagData=function(e){console.log("CBSiPlayer:setUtagData: ",e),typeof e!="undefined"&&(window.utag_data=e,cbsiPlayer.setTealiumPageData())},cbsiPlayer.setOmniS=function(e){cbsiPlayer.log("CBSiPlayer: setOmniS: "+e),typeof e!="undefined"&&(window.s=e)},cbsiPlayer.setDW=function(e){cbsiPlayer.log("CBSiPlayer: setDW: "+e),typeof e!="undefined"&&(window.DW=e)},cbsiPlayer.setShareURL=function(e){cbsiPlayer.log("CBSiPlayer: setShareURL: "+e),window.getShareURL=function(){return e}},cbsiPlayer.setEmbedURL=function(e){cbsiPlayer.log("CBSiPlayer: setEmbedURL: "+e),wction(){return e}},cbsiPlayer.subscribe=function(e){cbsiPlayer.log("CBSiPlayer: subscribe: "+e);if(typeof e=="undefined"||typeof e.events=="undefined"||typeof e._source=="undefined"||typeof e._origin=="undefined")return;cbsiPlayer.state.subscriptions=e},cbsiPlayer.pmi=function(e,t){e!="onVideoProgress"&&cbsiPlayer.log("CBSiPlayer: pmi: "+e);if(typeof cbsiPlayer.state.subscriptions=="undefined")return;var n=cbsiPlayer.state.subscriptions;if($.inArray(e,n.events)!=-1){try{t=JSON.stringify(t),t=JSON.parse(t)}catch(r){t={}}var i=typeof cbsiPlayer.api!="undefined"?$.extend({},cbsiPlayer.api.getCurrentPlaybackState()):{},s=$.extend({},cbsiPlayer.state),o=$.extend({},cbsiPlayer.config);delete i.facadeState,delete s.subscriptions,delete o.windowTop,delete o.sessOpts,delete o.adBlockerCallback,n._source.postMessage({name:window.name,event:e,data:t,playerState:s,playerConfig:o,playbackState:i},n._origin)}},cbsiPlayer.receiveMessage=function(e){var t=e.origin||e.originalEvent.origin,n=!1;for(var r=0;r<cbsiPlayer.config.allowedDomains.length;r++){var i=cbsiPlayer.config.allowedDomains[r];if(t.toLowerCase().indexOf(i)!=-1){n=!0;break}}if(!n)return;if(typeof e.data=="undefined"||typeof e.data.call=="undefined"||typeof cbsiPlayer[e.data.call]=="undefined")return;cbsiPlayer.log("CBSiPlayer: pmi: receiveMessage: "+e.data.call+" from "+t),e.data.call=="subscribe"&&(e.data.params._source=e.source,e.data.params._origin=t),cbsiPlayer[e.data.call](e.data.params)},window.addEventListener("message",cbsiPlayer.receiveMessage,!1),typeof window.parent!="undefined"&&window.parent.postMessage({name:window.name,event:"onDOMReady"},"*"),$(function(){cbsiPlayer.config.isParentAccessible&&(window.parWin=$(window.parent),window.parDoc=$(window.parent.document),window.embedCnt=parDoc.find("#embedVideo_"+cbsiPlayer.config.playerID).parents("div.embedVideo"),window.embedIfr=embedCnt.find("iframe"),window.pageCnt=parDoc.find("#pageContainer").length?parDoc.find("#pageContainer"):parDoc.find("#story_body").length?parDoc.find("#story_body"):parDoc.find("body"),parWin.bind("DOMContentLoaded load resize scroll",cbsiPlayer.windowEventHandler),$(window).bind("DOMContentLoaded load resize scroll",cbsiPlayer.windowEventHandler)),cbsiPlayer.config.resizable&&($(window).bind("resize",cbsiPlayer.onResizeWindow),cbsiPlayer.onResizeWindow()),cbsiPlayer.load(),cbsiPlayer.loadDefaults(cbsiPlayer.config.defaults,cbsiPlayer.config.objName)}),define("components/embed/app/VideoPlayer/Embed",function(){}),define("managers/components.embed",["jquery","components/embed/CBSi","components/embed/global","components/embed/util/Pako","components/embed/util/CookieJar","components/embed/util/Logger","components/embed/util/Session","components/embed/util/Clock","components/embed/util/Utils","components/embed/util/VastTrack","components/embed/app/VideoPlayer/Client","components/embed/app/VideoPlayer/XFP","components/embed/app/VideoPlayer/Cast","components/embed/app/Vion(e,t){return t}),require(["jquery","managers/components.embed"]),debed",function(){});