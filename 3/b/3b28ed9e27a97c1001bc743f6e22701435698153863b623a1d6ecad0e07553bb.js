(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1372:function(e,t,n){},150:151:152:function(e,t,n){"use strict";r c=n(166);function o(e){return function(){var t,n,o,i=a(e);if()){var u=a(this).constructor;t=Reflect.construct(i,arguments,u)}else t=i.apply(this,arguments);return n=this,!(o=t)||"object"!==r(o)&&"function"!==typeof o?Object(c.a)(n):o}}n.d(t,"a",function(){return o})},153:1555:function(e,t,n){"use strict";n.r(t);var a=n(36),r=n(30),c=n(221),o=n(218),i=n(2),u=n.n(i),s=n(3),l=n(150),p=n(151),d=n(153),f=n(152),m=n(0),h=n.n(m),g=n(35),y=(n(1372),n(692),function(e){var t=e.data,n=e.handleSwap,a=e.current,r=t.name,c=t.aid,o=t.status,i=t.tier,u=t.ownerEmail,s=t.maxStops,l=localStorage.getItem("default-aid");return h.a.createElement("section",{className:"account-list-item"},h.a.createElement("span",{className:"account-list-item-row"},r),h.a.createElement("span",{className:"account-list-item-row"},c),h.a.createElement("span",{className:"account-list-item-row"},o),h.a.createElement("span",{className:"account-list-item-row"},i),h.a.createElement("span",{className:"account-list-item-row"},s),h.a.createElement("span",{className:"account-list-item-row"},u),h.a.createElement("span",{className:"account-list-item-row"},l===c&&h.a.createElement("strong",null,"(YOU)"),a?"Current Account":h.a.createElement(g.a,{handleClick:,h.a.createElement("i",{className:"material-icons"},"swap_horiz"),"\xa0Switch to Account")))}),b=function(e){var t=e.currentPage,n=e.displayedAccounts,a=e.getNextPage,r=e.getPreviousPage,c=e.totalAccounts,o=1+10*(t-1),i=o+n-1,u=c>0?"Displaying results ".concat(o,"-").concat(i," of ").concat(c):"0 results",s=n<10||10*t+n===c,l=1===t;return h.a.createElement("div",{className:"account-pagination-footer"},h.a.createElement("span",null,u),h.a.createElement(g.a,{className:"account-pagination-footer__text-btn text-btn",disabled:l,handleClick:r},h.a.createElement("i",{className:"material-icons account-pagination-footer__icons"},"navigate_before")),h.a.createElement(g.a,{className:"account-pagination-footer__text-btn text-btn",disabled:s,handleClick:a},h.a.createElement("i",{className:"material-icons account-pagination-footer__icons"},"navigate_next")))},v=[{title:"Account Name",name:"account-name",show:!0},{title:"ID",name:"id",show:!0},{title:"Status",name:"status",show:!0},{title:"Plan",name:"plan",show:!0},{title:"Max Stops",name:"stops",show:!0},{title:"EMAIL ADDRESS",name:"email-address",show:!0},{title:"",name:"swap",show:!0}],E=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={columns:v},e}return Object(p.a)(n,[{key:"componentDidMount",value:,{key:"componentDidUpdate",value:,{key:"renderHeader",value:function(){return this.state.columns.map(function(e){return h.a.createElement("span",{className:"account-header-item",key:e.name},e.title)})}},{key:"renderAccountItems",value:function(){var e=this.props,t=e.handleSwap,n=e.currentAccountId,a=e.accountsList;return a&&0!==a.length?a.map(function(e){var a=Object.assign({},e,{email:e.owner?e.owner.email:"none"});return h.a.createElement(y,{key:e.aid,data:a,current:e.aid===n,handleSwap:t})}):h.a.createElement("p",{id:"account-list-no-results"},"No search results found.")}},{key:"render",value:function(){var e=this.props,t=e.currentPage,n=e.displayedAccounts,a=e.getNextPage,r=e.getPreviousPage,c=e.totalAccounts;return h.a.createElement("section",{id:"account-list"},h.a.createElement("header",null,this.renderHeader()),this.renderAccountItems(),h.a.createElement(b,{currentPage:t,displayedAccounts:n,getNextPage:a,getPreviousPage:r,totalAccounts:c}))}}]),n}(m.Component),w=n(53),S=n(165),A=n(54),O=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).getTourAccounts=function(){var t=Object(s.a)(u.a.mark(function t(n,a){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.fetchTourAccounts,t.next=3,r(n,a);case 3:e.setState({fetching:!0});case 4:case"end":return t.stop()}},t)}));return (),e.handleSwap=function(){var t=Object(s.a)(u.a.mark(function t(n){var a,r,c,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,r=a.handleTourAccountSwap,c=a.history,o=t.next=4,r(n,o);case 4:case"end":return t.stop()}},t)}));return (),e.handleSearchChange=e.throttledSearchCall=function(t){clearTimeout(e.inputTimeout);var n=t.target.value;e.inputTimeout=setTimeout(function(){e.getTourAccounts(0,n),e.setState({searchFired:!0})},1e3)},e.getNextPage=function(){var t=e.state,n=t.currentPage,a=t.searchString,r=t.start;e.getTourAccounts(r+10,a),e.setState({currentPage:n+1})},e.getPreviousPage=function(){var t=e.state,n=t.currentPage,a=t.searchString,r=t.start;e.getTourAccounts(r-10,a),e.setState({currentPage:n-1})},e.state={fetching:!1,searchString:"",accountsList:[],totalAccounts:0,currentPage:1,searchFired:!1},e.inputTimeout=null,e}return Object(p.a)(n,[{key:"componentDidMount",value:,{key:"componentDidUpdate",value:function(e,t){var n=this.props.accountsList,a=this.state.searchFired,r=n&&n.rows&&n.rows.length>0,c=n.rows!==e.accountsList.rows,o=!r&&c;r&&c&&(a?this.setState({accountsList:n.rows,currentPage:1,fetching:!1,totalAccounts:n.count,searchFired:!1}):this.setState({fetching:!1,accountsList:n.rows,totalAccounts:n.count,start:n.start})),o&&this.setState({accountsList:[],currentPage:1,fetching:!1,totalAccounts:0,start:0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentAccountId,a=t.swapError,r=t.hideTourAccountSwapError,c=this.state,o=c.accountsList,i=c.currentPage,u=c.fetching,s=c.totalAccounts,l=localStorage.getItem("default-aid");return h.a.createElement("main",{id:"account-manager"},h.a.createElement("header",null,h.a.createElement("h2",null,"Account List"),h.a.createElement("p",null,"All Tour Builder Accounts are listed below"),h.a.createElement("section",null,h.a.createElement(S.a,{label:"Search for an Account",id:"searchString",classNames:"input-wrapper",iconName:"search",name:"searchString",inputValue:this.state.searchString,handleInput:this.handleSearchChange,handleKeyUp:this.throttledSearchCall,placeholder:"Search for an Account",displayError:!1,hideErrorText:!0})),n!==l&&h.a.createElement(g.a,{onClick:className:"text-btn own-account-swap"},h.a.createElement("i",{className:"material-icons"},"swap_horiz"),"\xa0 Switch To Your Account")),u?h.a.createElement("div",{className:"loading-spinner"},h.a.createElement(A.ClipLoader,{key:"loader",color:"none",size:100})):h.a.createElement(E,{accountsList:o,currentAccountId:n,currentPage:i,displayedAccounts:o.length,getNextPage:this.getNextPage,getPreviousPage:this.getPreviousPage,getTourAccounts:this.getTourAccounts,handleSwap:this.handleSwap,totalAccounts:s}),h.a.createElement(w.a,{isOpen:Boolean(a),closeModal:r,shouldCloseOnOverlayClick:!0},h.a.createElement("div",{className:"modal"},"Error Occurred When Switching Accounts")))}}]),n}(m.Component),N=n(195);t.default=Object(a.c)(function(e){return{guardRails:Object(c.a)(e),accountsList:e.account.accountsList,currentAccountId:e.account.tourAccountId,swapError:e.account.swapError}},(O)},165:function(e,t,n){"use strict";var a=n(12),r=n(0),c=n.n(r),o=n(24),i=n.n(o),u=n(171),s=["charCount","classNames","displayError","displayWarning","editIcon","errorText","handleInput","handleKeyPress","handleKeyUp","hideErrorText","iconName","id","inputOptional","inputValue","label","labelAbove","maxCount","name","showCount","type"],l=Object(r.memo)(function(e){var t=e.charCount,n=e.classNames,r=e.displayError,o=e.displayWarning,l=e.editIcon,p=e.errorText,d=e.handleInput,f=e.handleKeyPress,m=e.handleKeyUp,h=e.hideErrorText,g=e.iconName,y=e.id,b=e.inputOptional,v=e.inputValue,E=e.label,w=e.labelAbove,S=e.maxCount,A=e.name,O=e.showCount,N=void 0===O||O,x=e.type,P=Object(a.a)(e,s);return c.a.createElement(u.a,{charCount:t,classNames:n,displayWarning:o,displayError:r,editIcon:l,errorText:p,hideErrorText:h,iconName:g,id:y,inputOptional:b,label:E,labelAbove:w,maxCount:S,showCount:N},c.a.createElement("input",Object.assign({id:y,type:x||"text",value:v||"",onChange:d,onKeyPress:f,onKeyUp:m,maxLength:S,className:i()({error:r,warning:o}),name:A,"data-testid":y},P)))});t.a=l},166:171:function(e,t,n){"use strict";var a=n(150),r=n(151),c=n(153),o=n(152),i=n(0),u=n.n(i),s=n(1),l=(n(177),function(e){var t=e.inputId,n=e.label,a=e.displayError,r=e.displayWarning,c=e.inputOptional,o=e.editIcon,i=e.ariaHidden;return u.a.createElement("label",{style:Object(s.a)(Object(s.a)({},a&&{color:"#a23f3f"}),r&&{color:"#b18830"}),htmlFor:t,"aria-hidden":i||!1},n,c&&u.a.createElement("span",null,"(Optional)"),o&&u.a.createElement("i",{className:"material-icons"},"edit"))}),p=n(24),d=n.n(p),f=function(e){var t=e.id,n=e.hideErrorText,a=e.errorText,r=e.label,c=e.displayWarning;return u.a.createElement(u.a.Fragment,null,!n&&u.a.createElement("div",{"data-testid":"".concat(t,"-input-error"),className:d()("input-error",{warning:c})},a||"".concat(r," is a required field")))},m=function(e){var t=e.iconName,n=e.iconClasses;return u.a.createElement("div",{className:"input-icon ".concat(n)},u.a.createElement("i",{"aria-hidden":"true",className:"material-icons"},t))},h=function(e){var t=e.max,n=e.count;return e.inputDisabled?null:u.a.createElement("div",{className:"char-count"},t-n)},g=(n(178),function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).enableInput=e.state={inputDisabled:!0},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state.inputDisabled,t=this.props,n=t.charCount,a=t.children,r=t.classNames,c=t.displayError,o=t.displayWarning,i=t.editIcon,s=t.errorText,p=t.hideErrorText,d=t.iconClasses,g=t.iconName,y=t.id,b=t.inputOptional,v=t.label,E=t.labelAbove,w=t.maxCount,S=t.name,A=t.showCount,O=t.toolTipClickHandler,N=t.toolTipText;return u.a.createElement("div",{className:r},E&&u.a.createElement(l,{ariaHidden:!0,inputId:y,label:v,htmlFor:S,inputOptional:b,editIcon:i,displayError:c,displayWarning:o}),N&&u.a.createElement("span",{className:"form-interactive-tooltip",onClick:O},N),a,!E&&u.a.createElement(l,{ariaHidden:!0,inputId:y,label:v,htmlFor:S,inputOptional:b,editIcon:i,displayError:c,displayWarning:o}),A&&w&&u.a.createElement(h,{inputDisabled:e,max:w,count:n}),g&&u.a.createElement(m,{iconClasses:d,iconName:g}),(c||o)&&u.a.createElement(f,{id:y,displayWarning:o,hideErrorText:p,errorText:s,label:v}))}}]),n}(i.PureComponent));t.a=g},177:function(e,t,n){},178:function(e,t,n){},221:function(e,t,n){"use strict";var a=n(222),r=Object(a.createSelector)(function(e){return e.tours.tours},function(e,t){var n=Object.keys(t).length,a=Object.keys(e).length,r=Object.keys(e).map(function(t){return e[t]}),c=r.reduce(function(e,t){return e[t.id]=t.stopIds&&t.stopIds.length,e},{});return{totalCreatedStops:n,totalActiveStops:r.reduce(function(e,t){return t.stopIds?e+t.stopIds.length:0},0),totalTours:a,stopCountPerTour:c}});t.a=r},222:function(e,t,n){"use strict";_esModule=!0,t.defaultMemoize=r,t.createSelectorCreator=c,t.createStructuredSelector=var o=t.createSelector=c(r)},692:]);