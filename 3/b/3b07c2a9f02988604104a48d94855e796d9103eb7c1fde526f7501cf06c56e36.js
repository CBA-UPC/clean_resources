"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3472],{7555:(e,t,i)=>{i.d(t,{o:()=>n});var s=i(10226),a=i(17676);function n(){return{version:(0,s.W6)(a.GEN)?2:1}}},75547:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ut});i(75930),i(92027),i(86277);var s=i(50959),a=i(36275),n=i(75802),l=i(95109),r=i(75095),o=i(11317),c=i(85648),d=i(41038),u=i(71459),p=i(91643),m=i(52438),h=i(10226),x=i(17676),y=i(7555),g=i(32121),j=i(11527);const b=(0,s.lazy)((()=>i.e(3731).then(i.bind(i,23731)))),k=(0,s.lazy)((()=>i.e(5337).then(i.bind(i,15337))));function v(e){const t=(0,g.m)(),i=(0,h.W6)(x.XKk,{loadingValue:!1}),a=(0,y.o)();return t?i?e.uri?(0,j.jsx)(s.Suspense,{fallback:!0,children:(0,j.jsx)(k,{uri:e.uri})}):null:(0,j.jsx)(s.Suspense,{fallback:!0,children:(0,j.jsx)(b,{reason:"Episode page",...a,...e})}):null}const C="dpN5ViPOceUWNB5EQPHN",P="fBEA27lLw_sc60Zjd_qw",T="vBcxPq3E2okwgXOkVPEM",f="CxoSYuAjlcCDSOWnnbJe",I="HCCBXwdFvq6omWW2hR0N",S="bJOPO5Zo7dpjSVDwEpSw",E="TXdDDpokVTyJzDEDWHHf",U="tvj001zNcrC5VUZmTt9c",N="PC5kR03GYecc7syeoC0q",D="YldGldlfaI9myEGXQf9g",L="qJHVIpJn1vLPWsAKfTEZ",w="wSIzjkVlr0Zdy7di2vRm",A="hYS_K1NATGyWt6tCSRqQ",R="hVVaM4pF9arpQ8Nvn2a1",M="zf0Eac1LugsHUacz74Zf",B="TnNaqxbaI0hzhBQZ7wE0",F="zSw1lG1TNe_xm6KTqtCv",O="MlEQDkXnjdKKJueJ9kkB",z="jg0xlyD1yjh0DPNG6eOg",_="QiHXpFb4dLZNOFe5gpp3";var $=i(69736),H=i(73461),W=i(80626),K=i(43286),Z=i(33592);const V=e=>{let{cardHeaderText:t,cardBodyText:i,buttonText:s,buttonTarget:a}=e;return(0,h.W6)(x.XdP)?(0,j.jsxs)("div",{className:D,children:[(0,j.jsxs)("div",{className:L,children:[(0,j.jsx)($.x,{variant:"bodyMediumBold",semanticColor:"textBase",children:t}),(0,j.jsx)($.x,{semanticColor:"textBase",children:i})]}),(0,j.jsx)(K.D,{size:"small",colorSet:"invertedLight",href:(0,o.EC)(a).toURLPath(!0),component:Z.Z,children:s})]}):null},Y=e=>{let{areHTMLDescriptionsEnabled:t,contentInformation:i,description:a,hasDescription:n,htmlDescription:l,onExpanded:r,onTimeStampClick:o,playability:d,showHeader:u=!0,spec:p}=e;const m=(0,W.$P)(),y=(n||i)&&u,g=(0,s.useCallback)((e=>{const t=p.readMoreButtonFactory();m.logInteraction(e?t.hitUiReveal():t.hitUiHide()),null==r||r()}),[p,m,r]),b=(0,h.W6)(x._nP,{loadingValue:!1});return(0,j.jsxs)(j.Fragment,{children:[y&&(0,j.jsx)($.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:I,children:c.ag.get("episode.description-title")}),i&&(0,j.jsx)(V,{cardHeaderText:i.cardHeaderText,cardBodyText:i.cardBodyText,buttonText:i.buttonText,buttonTarget:i.buttonTarget}),n&&(0,j.jsx)(H.o,{className:T,onTimeStampClick:o,maxLines:4,onExpanded:g,content:(a||"").trim(),htmlContent:t&&l?l:void 0,enableTimestamps:d.playable,enableAutomaticLinkification:b&&t&&!!l})]})};var Q=i(82187),X=i.n(Q),q=i(75390),G=i(44614),J=i(55004),ee=i(40701),te=i(29391),ie=i(2800),se=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}(se||{});const ae=s.memo((function(e){let{transcriptSections:t,descriptionContent:i,transcriptContent:a,spec:n}=e;const l=(0,W.$P)(),[r,o]=(0,s.useState)(se.DESCRIPTION),d=(0,ie.Mi)(),{ref:u,inView:p}=(0,q.YD)({threshold:[1],root:d.current,rootMargin:`-${te.K1+1}px 100000px 0px 100000px`}),m=(0,s.useRef)(null),h=(0,s.useCallback)((e=>{m.current=e,u(e)}),[u]);return(0,s.useEffect)((()=>{var e;const t=null===(e=m.current)||void 0===e||null===(e=e.parentElement)||void 0===e?void 0:e.offsetTop,i=null==d?void 0:d.current;if(!t||!i)return;const s=t-te.K1;i.scrollTop>s&&i.scrollTo({top:s})}),[d,r]),(0,j.jsx)(G.l,{list:(0,j.jsxs)(J.F,{className:X()(O,{[z]:!p}),ref:h,children:[(0,j.jsx)(ee.c,{label:c.ag.get("web-player.episode.description"),sentenceCase:!0,active:r===se.DESCRIPTION,onClick:()=>{const e=n.tabsFactory().descriptionTabButtonFactory().hitUiReveal();l.logInteraction(e),o(se.DESCRIPTION)},className:X()(_,{[w]:r===se.DESCRIPTION})}),(0,j.jsx)(ee.c,{label:c.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===t,active:r===se.TRANSCRIPT,onClick:()=>{const e=n.tabsFactory().transcriptTabButtonFactory().hitUiReveal();l.logInteraction(e),o(se.TRANSCRIPT)},className:X()(_,{[w]:r===se.TRANSCRIPT})})]}),children:null===t||r===se.DESCRIPTION?i:a})}));var ne=i(26664),le=i(4612),re=i(22527),oe=i(5380);const ce=(0,s.memo)((function(e){let{transcriptSections:t,onTimeStampClick:i,episodeUri:s}=e;const{spec:a,logger:n}=(0,W.fU)(ne.m,{data:{uri:s}}),{isPlaying:l}=(0,re.n)({uri:s},{featureIdentifier:"episode"}),r=a.timestampLinkFactory();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:R,children:(0,j.jsx)($.x,{variant:"bodySmall",semanticColor:"textBase",children:c.ag.get("web-player.episode.transcript.disclaimer")})}),t.map(((e,t)=>{const a=`transcript-section-${t}`;return(0,j.jsxs)("div",{className:A,children:[(0,j.jsx)("button",{className:M,onClick:()=>{i(e.startMs,a),n.logInteraction(l?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:s}))},children:(0,j.jsx)(le.D,{id:a,targetURI:(0,o.EC)(s),fadeOut:!0,children:(0,j.jsx)($.x,{variant:"marginalBold",semanticColor:"textSubdued",className:B,children:(0,oe.m)(e.startMs)})})}),e.content.map(((e,t)=>(0,j.jsx)($.x,{variant:"bodySmall",semanticColor:"textBase",className:F,dir:"auto",children:e},`transcript-text-${t}`)))]},a)}))]})}));i(58465),i(46758),i(2836);var de=i(51440),ue=i(36199),pe=i(59582),me=i(70526),he=i(34514),xe=i(20580),ye=i(86696),ge=i(31360),je=i(85357),be=i(86017),ke=i(45438),ve=i(19968);const Ce="OYehkMWcGJRKPkByp46K",Pe="uc1bXkrZqrCz0CMK4lBb",Te="qZeibBbA3SVClzEueYND",fe=e=>{let{episodeUri:t,index:i,duration:a,start:n,stop:l,name:r,uri:o,artists:d,album:u,playable:p}=e;const{isActive:m,isPlaying:h,onClick:x}=(0,be.k)({episodeUri:t,start:n,stop:l}),y=(0,s.useCallback)(((e,t)=>{x(t)}),[x]),{spec:g}=(0,W.fU)(he.r,{data:{position:i,reason:"",uri:o}});return(0,j.jsx)(ke.JL,{value:"row",index:i,children:(0,j.jsx)(xe.xV,{trigger:"right-click",action:"open",menu:(0,j.jsx)(ye.$,{uri:o}),children:(0,j.jsxs)(je.c,{uri:o,index:i,ariaRowIndex:i+1,dragMetadata:{name:r,createdBy:(null==d?void 0:d[0].name)??""},onTriggerPlay:y,isActive:m,isPlayable:p,spec:g,children:[(0,j.jsxs)(ge.vZ,{ariaColIndex:0,children:[(0,j.jsx)(ge.Du,{uri:o,playAriaLabel:c.ag.get("tracklist.a11y.play",r,null==d?void 0:d[0].name),onClick:y,isPlaying:h,isActive:m,spec:g,children:(0,j.jsx)(ge.km,{children:(0,j.jsx)("img",{className:Pe,src:u.image,alt:u.name})})}),(0,j.jsxs)(ge.vm,{children:[(0,j.jsx)(ge.Wh,{titleText:r,children:r}),(0,j.jsx)(ge.K9,{children:(0,j.jsx)(ge.T6,{artists:d,spec:g})})]})]}),(0,j.jsx)(ge.UA,{ariaColIndex:1,children:(0,j.jsx)(ge.BM,{uri:u.uri,name:u.name,spec:g,children:u.name})}),(0,j.jsxs)(ge.mU,{ariaColIndex:2,children:[(0,j.jsx)(ve.f,{uri:o,spec:g}),(0,j.jsx)(ge.A$,{duration:a}),(0,j.jsx)(ge.Zv,{spec:g,menu:(0,j.jsx)(ye.$,{uri:o,artists:d}),label:c.ag.get("more.label.track",r,null==d?void 0:d[0].name)})]})]})})})};function Ie(e,t,i){return e.reduce(((e,s,a)=>((a>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===s.type?e.push(function(e,t,i){return{type:"MUSIC",index:t,uri:i.uri,episodeUri:e,start:i.start,stop:i.stop,duration:i.duration,name:i.track.name,artists:i.track.artists,album:i.track.album,playable:i.track.playable}}(i,a,s)):"TALK"===s.type&&e.push(function(e,t,i){return{type:"TALK",index:t,uri:e,title:i.title,subtitle:i.subtitle,start:i.start,stop:i.stop,duration:i.duration,showUri:i.show.uri,showName:i.show.name}}(i,a,s)),e)),[])}const Se=e=>{let{uri:t,segmentCount:i}=e;const a=(0,pe.G)(),n=(0,s.useCallback)((async(e,s)=>{const n=Math.ceil(e/2);try{return{items:Ie(await a.getSegments(t,n,s),n,t),totalLength:2*i-1}}catch(l){return{items:[],totalLength:0}}}),[i,a,t]),l=(0,s.useCallback)((e=>{switch(e.type){case"SPACER":return(0,j.jsx)("div",{className:Te},e.id);case"MUSIC":return(0,j.jsx)(fe,{...e},`${t}-${e.index}`);case"TALK":return(0,j.jsx)(de.t,{...e},`${t}-${e.index}`);default:return(0,me.U)(e)}}),[t]),r=(0,s.useCallback)((e=>({uri:"MUSIC"===e.type?e.uri:""})),[]),o=c.ag.get("music_and_talk.in_this_episode");return(0,j.jsxs)("div",{children:[(0,j.jsx)($.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Ce,children:o}),(0,j.jsx)(ue.Pv,{ariaLabel:o,hasHeaderRow:!0,rowPlaceholder:ue.hU,columns:[ue.QD.TITLE_AND_ARTIST,ue.QD.ALBUM_OR_SHOW,ue.QD.DURATION],renderRow:l,fetchTracks:n,resolveItem:r,limit:50,nrTracks:2*i-1,testID:"music-and-talk-tracklist"})]})};var Ee=i(48695);const Ue=e=>{let{areHTMLDescriptionsEnabled:t,contentInformation:i,description:a,hasDescription:n,hasMusicAndTalkSegements:l,htmlDescription:r,onExpanded:o,onDescriptionTimestampClick:d,onTranscriptTimestampClick:u,playability:p,segmentCount:h,showUrl:x,transcript:y,uri:g,spec:b}=e;const k=(0,W.$P)(),C=(0,s.useMemo)((()=>b.descriptionSectionFactory()),[b]),P=(0,s.useMemo)((()=>C.trackListFactory()),[C]),[T,f]=(0,s.useState)(null),I=(0,s.useCallback)((async e=>{const t=await(0,Ee.l)(e);f(t)}),[]);(0,s.useEffect)((()=>{y&&y.length>0&&I(y[0].cdnUrl)}),[I,y]);const E=e=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Y,{hasDescription:n,contentInformation:i,onTimeStampClick:d,onExpanded:o,description:a,areHTMLDescriptionsEnabled:t,htmlDescription:r,playability:p,showHeader:e,spec:C}),l&&(0,j.jsx)(W.Nh,{spec:P,children:(0,j.jsx)(Se,{segmentCount:h,uri:g})}),x&&(0,j.jsx)(m.P,{size:"small",className:S,href:x,component:Z.Z,onClick:()=>{k.logInteraction(C.allEpisodesLinkFactory().hitUiNavigate({destination:x}))},children:c.ag.get("episode.see_all_episodes")}),(0,j.jsx)(v,{uri:g})]}),U=y&&(null==y?void 0:y.length)>0&&p.playable;return(0,j.jsx)(j.Fragment,{children:U?(0,j.jsx)(ae,{transcriptSections:T,descriptionContent:E(!1),transcriptContent:(0,j.jsx)(ce,{transcriptSections:T||[],onTimeStampClick:u,episodeUri:g}),spec:b}):E(!0)})};var Ne=i(51040),De=i(61027),Le=i(50540),we=i(58301);const Ae="activation-trigger-mme",Re=e=>{let{episodeUri:t,showUri:i,isLocked:s,isPlaying:a,isPlayDisabled:n,playButtonPlayLabel:l,playButtonPauseLabel:r,onClick:c,size:d="large"}=e;const u=(0,we.E)();if((0,Le.g)())return(0,j.jsx)(De.f,{size:d,onClick:c,isPlaying:a,disabled:n,locked:s,ariaPlayLabel:l,ariaPauseLabel:r});const p=(0,j.jsx)(Ne.l,{showUri:i,enabled:s,renderInline:!1,children:(0,j.jsx)(De.f,{size:d,onClick:c,isPlaying:a,disabled:n,locked:s,ariaPlayLabel:l,ariaPauseLabel:r})});return u?(0,j.jsx)(le.D,{id:Ae,targetURI:(0,o.EC)(t),fadeOut:!0,children:p}):p};var Me=i(13734),Be=i(53758),Fe=i(47262),Oe=i(8570),ze=i(70959),_e=i(65019),$e=i(86850),He=i(77861),We=i(29673),Ke=i(73928),Ze=i(82857),Ve=i(29132),Ye=i(8810),Qe=i(28185),Xe=i(97013),qe=i(6056),Ge=i(40235),Je=i(64329),et=i(27106),tt=i(64222),it=i(52993),st=i(23769),at=i(78706),nt=i(74234),lt=i(15842),rt=i(66205),ot=i(66819),ct=i(74434);const dt=e=>{var t,i,a,n;let{episode:l,onPlayEpisode:r,isPlaying:o,isActive:d,isFullyPlayed:u,setIsFullyPlayed:p,backgroundColor:m,isLocked:h,spec:x}=e;const{uri:y,playedState:g,contentRating:b,playability:k}=l,v=(0,W.$P)(),C=(0,Ve.I0)(),[P]=(0,st.z)(1e4,(e=>{var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===y})),T=(0,_e.Y)((e=>null==e?void 0:e.duration)),{badges:f}=(0,nt.r)({contentRating:null==b?void 0:b.label}),I=(0,s.useCallback)((e=>{!k.playable&&f.nineteen&&(e.stopPropagation(),C((0,Ye.RM)(y||"")))}),[y,k.playable,f.nineteen,C]),S=(0,s.useCallback)((()=>{const e=x.contextMenuButtonFactory().hitUiReveal();v.logInteraction(e)}),[v,x]),U=(0,s.useCallback)(((e,t)=>{(0,tt.l7)(t,x.downloadButtonFactory(),v,y)}),[v,x,y]),N=(0,s.useCallback)((e=>{const t=x.saveButtonFactory();v.logInteraction(e?t.hitLike({itemToBeLiked:y}):t.hitRemoveLike({itemNoLongerLiked:y}))}),[v,x,y]),D=!h&&!l.playability.playable,L=c.ag.get("tracklist.a11y.play",l.name,null===(t=l.podcast)||void 0===t?void 0:t.name),w=c.ag.get("tracklist.a11y.pause",l.name,null===(i=l.podcast)||void 0===i?void 0:i.name),A=null===(a=l.podcast)||void 0===a?void 0:a.uri,R=(0,ot.j)(),M=(0,et.r)(l.uri),B=!h;return(0,j.jsxs)(lt.o,{backgroundColor:m,children:[(0,j.jsxs)(rt.F,{children:[f.nineteen&&(0,j.jsx)(it.X,{className:E,size:16}),(0,j.jsx)(at.E,{fullyPlayed:u,durationMs:d&&T?T:l.duration.milliseconds,releaseDate:Nt(null===(n=l.releaseDate)||void 0===n?void 0:n.isoString),resumePositionMs:g.playPositionMilliseconds,isPlaying:o,position:d&&P||void 0})]}),(0,j.jsxs)(rt.F,{children:[(0,j.jsx)("div",{onClick:I,children:(0,j.jsx)(Re,{episodeUri:l.uri,showUri:A,isLocked:h,onClick:()=>{r(g.playPositionMilliseconds)},isPlaying:o,isPlayDisabled:D,playButtonPlayLabel:L,playButtonPauseLabel:w,size:R})}),(0,j.jsx)(Qe.p,{uri:l.uri,onClick:U,size:R,canDownload:B}),M?(0,j.jsx)(ct.T,{uri:l.uri,size:R}):(0,j.jsx)(qe.w,{uri:l.uri,size:R,onClick:N}),(0,j.jsx)(Ge.y,{onShow:S,menu:(0,j.jsx)(Je.k,{uri:l.uri,sharingInfo:l.sharingInfo,showUri:A,contextUri:l.uri,isPlayed:u,onMarkAsPlayed:p}),children:(0,j.jsx)(Xe.z,{label:c.ag.get("more.label.context",l.name),size:R})})]})]})};i(54487);var ut=i(82579),pt=i(62182),mt=i(1502),ht=i(81639),xt=i(16118),yt=i(36637),gt=i(59099),jt=i(60046),bt=i(16473),kt=i(61058),vt=i(93421),Ct=i(11401);const Pt=e=>{let{coverArt:t,name:i}=e;const s=(0,kt.jh)(),a=s===kt.Uo.SMALL||s===kt.Uo.XSMALL;return(0,j.jsx)(vt.O,{images:t,type:Ze.p.EPISODE,shape:vt.K.ROUNDED_CORNERS,title:i,size:a?Ct.m$.SIZE_20:Ct.m$.SIZE_24,className:U})};const Tt=e=>{var t,i,a;let{episode:n,isFullyPlayed:l,setIsFullyPlayed:r,backgroundColor:d,spec:u}=e;const{uri:p,name:m,sharingInfo:h,playedState:x,episodeType:y,releaseDate:g,coverArt:b}=n,k=(0,W.$P)(),v=function(e,t,i,s,a){const n=t===Ke.Wf.Episode;return(0,bt.G3)(e,s,i,a)?(0,j.jsx)(bt.Fg,{isMusicAndTalk:n}):n?c.ag.get("type.showEpisode"):c.ag.get("type.podcastEpisode")}(p,y||Ke.Wf.Unknown,x.playPositionMilliseconds,Nt(null==g?void 0:g.isoString),x.state===Ke.sY.Completed),C=null===(t=n.podcast)||void 0===t?void 0:t.uri,T=function(e){const t=(0,o.EC)(e);return`/show/${(0,o.HB)((null==t?void 0:t.id)||"")}`}(C),I=(0,s.useCallback)((()=>{k.logInteraction(u.podcastLinkFactory().hitUiNavigate({destination:T}))}),[k,T,u]),S=null===(i=n.podcast)||void 0===i?void 0:i.coverArt,E=!!(S&&S.length===b.length&&b.every(((e,t)=>e.url===S[t].url))),U=(0,kt.jh)();return(0,j.jsxs)(pt.gF,{backgroundColor:d,children:[(0,j.jsx)(ht.W,{children:(0,j.jsx)(xt.i,{text:m,dragUri:p,dragLabel:m})}),!E&&(0,j.jsx)(mt.k,{children:(0,j.jsx)(ut._,{menu:(0,j.jsx)(Je.k,{uri:p,sharingInfo:h,showUri:C,contextUri:p,isPlayed:l,onMarkAsPlayed:r}),children:(0,j.jsx)(pt.Oe,{loading:"eager",name:m,images:b,placeholderType:"episode",shape:pt.Kc.SQUARE})})}),(0,j.jsxs)(pt.sP,{children:[(0,j.jsx)(yt.g,{children:v}),(0,j.jsx)(ut._,{menu:(0,j.jsx)(Je.k,{uri:p,sharingInfo:h,showUri:C,contextUri:p,isPlayed:l,onMarkAsPlayed:r}),children:(0,j.jsx)(pt.xd,{dragUri:p,dragLabel:m,scaleAtMinWidth:pt.vz,className:P,children:(0,j.jsx)("span",{"data-testid":"episodeTitle",children:m})})}),(0,j.jsx)(ut._,{menu:(0,j.jsx)(Je.k,{uri:p,sharingInfo:h,showUri:C,contextUri:p,isPlayed:l,onMarkAsPlayed:r}),children:(0,j.jsxs)(jt.default,{to:T,onClick:I,className:N,children:[E&&(0,j.jsx)(Pt,{name:m,coverArt:b}),(0,j.jsx)(gt.m,{className:U===kt.Uo.SMALL&&E?"":f,children:(0,j.jsx)("span",{"data-testid":"showTitle",children:null===(a=n.podcast)||void 0===a?void 0:a.name})})]})})]})]})};var ft=i(9443),It=i(96989),St=i(71059);const Et=e=>{var t,i,n;let{episode:r}=e;const{uri:c,episodeType:p,description:m,htmlDescription:h,podcastSubscription:x,segmentsCount:y,podcast:g,contentInformation:b,playedState:k,coverArt:v}=r,{spec:P,logger:T}=(0,W.fU)(l.J,{data:{uri:c}}),f=(0,ft.k)(),I=(0,s.useMemo)((()=>P.headerFactory()),[P]),S=(0,s.useMemo)((()=>P.actionBarFactory()),[P]),[E,U]=(0,s.useState)(k.state===Ke.sY.Completed),N=(0,Oe.g)(),D=(0,Me.o)(),L=void 0!==y&&y>0,w=(0,Le.g)(),{triggerPlay:A,togglePlay:R,isActive:M}=(0,re.n)({uri:c,...f?{}:{pages:[{items:[{type:Ze.p.EPISODE,uri:c,uid:null,provider:null}]}]}},{featureIdentifier:"episode"}),{isActive:B,isPlaying:F}=(0,ze.$o)(c),O=v[0].url,z=(0,Fe.Zj)(O||null),_=(0,_e.Y)((e=>(null==e?void 0:e.isPaused)??void 0)),$=(0,we.E)(),H=x.isPaywalled&&!x.isUserSubscribed,K=B||M,Z=r?{name:r.name,uri:r.uri,mediaTypes:r.mediaTypes,audio:{items:r.audio.items.map((e=>({url:e.url})))}}:null,V=g?{name:g.name,uri:g.uri,trailer:g.trailer,showTypes:g.showTypes}:null,Y=(0,Be.s)(Z,V),Q=(0,s.useCallback)(((e,t,i,s)=>{const a=()=>{_?(null==s||s("resume"),N.resume()):(null==s||s("pause"),N.pause())};if(H)return;let n="play";if(!F||0!==e&&t||(n="pause"),D({intent:n,targetUri:c,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),p===Ke.Wf.Episode&&$)u.y.set((()=>({triggerId:i||Ae,triggerAction:null})));else if(M&&!t)w?a():R({loggingParams:null==s?void 0:s()});else if(B&&!t)a();else{const t=null==s?void 0:s("play");w?Y({seekTo:e,loggingParams:t}):A({seekTo:e,loggingParams:t})}}),[H,F,D,c,p,$,B,M,w,_,N,R,Y,A]),X=(0,s.useCallback)((e=>{Q(e,!1,void 0,(e=>{const t=P.actionBarFactory().playButtonFactory();let i;return i="pause"===e||F?t.hitPause({itemToBePaused:c}):"resume"===e||K?t.hitResume({itemToBeResumed:c}):t.hitPlay({itemToBePlayed:c}),T.logInteraction(i)}))}),[Q,K,F,T,P,c]),q=(0,s.useCallback)((e=>{Q(e,!0,void 0,(()=>T.logInteraction(P.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:c}))))}),[Q,T,P,c]),G=(0,s.useCallback)(((e,t)=>{Q(e,!0,t)}),[Q]),J=(0,s.useCallback)((()=>{D({intent:"expand-description",type:"click"})}),[D]),[ee,te]=(0,a.lr)();(0,s.useEffect)((()=>{if(r&&!K&&ee.has("t")){const e=ee.get("t")||"0",t=1e3*parseInt(e,10);t<=r.duration.milliseconds&&(ee.delete("t"),te(ee,{replace:!0}),Q(t,!0))}}),[r,Q,K,ee,te]);const ie=!!m||!!h,se=null===(t=r.podcast)||void 0===t?void 0:t.uri,ae=null===(i=(0,o.EC)(se))||void 0===i?void 0:i.toURLPath(!0);return(0,j.jsxs)("section",{"data-testid":"episode",className:C,children:[(0,j.jsx)(d.$,{children:(0,We.mK)({episodeOrChapterName:r.name,showOrAudiobookName:(null===(n=r.podcast)||void 0===n?void 0:n.name)??"",type:"Podcast"})}),(0,j.jsx)(Tt,{episode:r,isFullyPlayed:E,setIsFullyPlayed:U,backgroundColor:z,spec:I}),(0,j.jsx)(dt,{episode:r,onPlayEpisode:X,isPlaying:F,isActive:K,isFullyPlayed:E,setIsFullyPlayed:U,backgroundColor:z,isLocked:H,spec:S}),(0,j.jsx)("div",{className:"contentSpacing",children:(0,j.jsx)(Ue,{transcript:r.transcript,hasDescription:ie,contentInformation:b,onDescriptionTimestampClick:q,onTranscriptTimestampClick:G,onExpanded:J,description:r.description,areHTMLDescriptionsEnabled:!0,htmlDescription:r.htmlDescription,playability:r.playability,hasMusicAndTalkSegements:L,segmentCount:y,uri:r.uri,showUrl:ae,spec:P})})]})},Ut=s.memo((function(){const{episodeId:e=""}=(0,n.UO)(),t=(0,o.YD)(e).toURI(),i=(0,$e.I)(t);return null!=i&&i.isError||null==i||!i.episodeOrChapter?(0,j.jsx)(p.h,{hasError:(null==i?void 0:i.isError)||!1,errorMessage:c.ag.get("error.not_found.title.podcast")}):(0,He.Ey)(i.episodeOrChapter)?(0,j.jsx)(It.InstrumentedRedirect,{to:(0,o.EC)(null===(a=i.episodeOrChapter.book)||void 0===a?void 0:a.uri).toURLPath(!0)}):(0,j.jsx)(s.Suspense,{fallback:null,children:(0,j.jsx)(St.C,{pageId:r.Wg.PODCAST_EPISODE,uri:t,children:(0,j.jsx)(Et,{episode:i.episodeOrChapter})})});var a}));function Nt(e){return(null==e?void 0:e.replace(/T.*/,""))||""}}}]);
//# sourceMappingURL=xpui-routes-episode.62012df7.js.map