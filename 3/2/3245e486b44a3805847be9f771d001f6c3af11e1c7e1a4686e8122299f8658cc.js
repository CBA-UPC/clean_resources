"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7774],{12895:(e,t,r)=>{r.d(t,{l:()=>p,B:()=>y});var i=r(50959),a=r(10356),n=r(7935);r(22849),r(606);function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return;if(!(0,n.lK)(e))return;const i=e.querySelector('[tabindex="0"]');t===a.N.UP&&(0,n.Bu)(i,o(e,i,a.N.UP,r)),t===a.N.DOWN&&(0,n.Bu)(i,o(e,i,a.N.DOWN,r)),t===a.N.RIGHT&&(0,n.Bu)(i,s(i,a.N.RIGHT,r)),t===a.N.LEFT&&(0,n.Bu)(i,s(i,a.N.LEFT,r)),t===a.N.HOME&&(0,n.Bu)(i,d(a.N.HOME,r)??i),t===a.N.END&&(0,n.Bu)(i,d(a.N.END,r)??i)}function o(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const l=t.closest('li[role="row"]');if(!l)return t;let o=l;const d=Array.from(e.querySelectorAll('li[role="row"]')),c=Array.from(l.querySelectorAll(n.Yf)),u=d.indexOf(l);if(u<0)return t;const p=(i&&t!==c[0]||!i&&t!==l)&&!(t instanceof HTMLLIElement);if(r===a.N.UP){if(document.activeElement===e){o=d[d.length-1];return(i?o.querySelector(n.Yf):o)??t}if(p)return s(t,a.N.LEFT,i);let r=u-1;if(-1===r)return t;o=d[r],r-=1}else if(r===a.N.DOWN){if(document.activeElement===e){o=d[0];return(i?o.querySelector(n.Yf):o)??t}if(p)return s(t,a.N.RIGHT,i);let r=u+1;if(r===d.length)return t;o=d[r],r+=1}return(i?o.querySelector(n.Yf):o)??t}function s(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=e.closest('li[role="row"]');if(!i)return e;let l=e;const o=Array.from(i.querySelectorAll(n.Yf)),s=o.indexOf(e);let d=0;if(t===a.N.RIGHT&&s-1!==o.length)d=s+1;else{if(t===a.N.LEFT&&-1===s)return i;if(t===a.N.LEFT&&0!==s)d=s-1;else if(t===a.N.LEFT&&0===s){return(r?i.querySelector(n.Yf):i)??i}}return l=o.at(d),l??e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{currentFocus:r,listEl:i}=function(){const e=document.activeElement,t=null==e?void 0:e.closest("ul");return((0,a.L)(e)||e instanceof HTMLLIElement)&&t?{currentFocus:e,listEl:t}:{currentFocus:null,listEl:null}}();if(null===r||null===i)return null;const l=r.closest('li[role="row"]');if(!l)return r;const o=Array.from(i.querySelectorAll('li[role="row"]')),s=Array.from(l.querySelectorAll(n.Yf));if(o.indexOf(l)<0)return r;const d=t&&r===s[0]||!t&&r===l;if(e===a.N.HOME){if(d){return(t?o[0].querySelector(n.Yf):o[0])??r}return(t?s[1]:s[0])??r}if(e===a.N.END){if(d){return(t?o[o.length-1].querySelector(n.Yf):o[o.length-1])??r}return s[s.length-1]??r}return r}var c=r(13803),u=r(11527);const p=e=>{let{onKeyDown:t,children:r,firstInteractiveIsWrapper:o=!1,...s}=e;const d=(0,i.useRef)(null);(0,c.W)(d);const p=(0,i.useCallback)((e=>{var r;null!==(r=d.current)&&void 0!==r&&r.contains(e.target)&&("ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Home"!==e.key&&"End"!==e.key||e.preventDefault(),"ArrowUp"!==e.key&&"ArrowDown"!==e.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===e.key&&l(d.current,a.N.UP,o),"ArrowDown"===e.key&&l(d.current,a.N.DOWN,o),"ArrowRight"===e.key&&l(d.current,a.N.RIGHT,o),"ArrowLeft"===e.key&&l(d.current,a.N.LEFT,o),"Home"===e.key&&l(d.current,a.N.HOME,o),"End"===e.key&&l(d.current,a.N.END,o),null==t||t(e))}),[o,t]),g=(0,i.useCallback)((e=>{if(!d.current)return;const t=e.target,r=d.current.querySelector('[tabindex="0"]');t.closest('li[role="row"]')&&t!==r&&(0,n.Bu)(r,t,{preventScroll:!0})}),[]);return(0,u.jsx)("ul",{role:"treegrid",ref:d,onKeyDown:p,onFocus:g,tabIndex:0,...s,children:r})};var g=r(72741);const y=e=>{let{children:t,innerRef:r,reRunOnDOMUpdate:a=!1,...n}=e;const l=(0,i.useRef)(null),o=r??l;return(0,g.O)(o,a),(0,u.jsx)("li",{ref:o,"aria-expanded":"true","aria-level":1,role:"row",...n,children:t})}},46206:(e,t,r)=>{r.d(t,{S:()=>l});var i=r(16243);const a="fRZRXRIV2YBCFLYgwDAr";var n=r(11527);const l=e=>{let{iconSize:t=64,...r}=e;return(0,n.jsx)("div",{className:a,children:(0,n.jsx)(i._,{iconSize:t,...r,semanticColor:"textBrightAccent","aria-hidden":!0})})}},97774:(e,t,r)=>{r.d(t,{Z:()=>sn,YourLibraryX:()=>jl,g:()=>dn});r(22849),r(606),r(46758),r(53321),r(86277);var i=r(50959),a=r(82187),n=r.n(a),l=r(89130),o=r(29132),s=r(49857),d=r(93295),c=r(18517),u=r(48536),p=r(79936),g=r(45438),y=r(30751),m=r(94452),x=r(28058),b=r(11527);const h=i.memo((function(e){let{folderUri:t,onCreateCallback:r}=e;const i=t?{after:{uri:t}}:{before:"start"},{spec:a}=(0,m.T)(t??y.in);return(0,b.jsx)(g.JL,{value:"folder",children:(0,b.jsxs)(p.v,{children:[(0,b.jsx)(x.uj,{position:i,onCreateCallback:r,spec:a}),(0,b.jsx)(x.K_,{position:i,onCreateCallback:r,spec:a})]})})}));var f=r(5629),v=r(66685),S=r.n(v),w=r(97551),P=r(40871),C=r(7730),T=r(44246),D=r(20980),I=r(82857);var R=r(95841),j=r(12988),A=r(66514),L=r(27284),N=r(24241),O=r(46974);r(70054),r(92372),r(70069),r(44227),r(91499),r(68856),r(18004),r(16527);const F=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]);function k(e,t){const[r,a]=(0,i.useState)(""),n=(0,i.useRef)(r);n.current=r;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const r=e.current;if(!r||!t)return a(""),()=>{};const i=e=>{var t;const r="Backspace"===e.key,i=" "===e.key,o=e.metaKey||e.ctrlKey,s=e.target instanceof HTMLElement&&(null===(t=e.target)||void 0===t?void 0:t.matches("input, textarea, [contenteditable]")),d=e.isComposing||229===e.keyCode,c=(u=e.key,F.has(u)&&!r);var u;const p=i&&!n.current,g=r&&!n.current;if(o||s||d||c||p||g)return;(r&&n.current||i)&&(e.preventDefault(),e.stopPropagation()),a((t=>r?t.slice(0,-1):t+e.key)),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>a("")),1e3)};return r.addEventListener("keydown",i,!0),()=>{r.removeEventListener("keydown",i,!0),l.current&&clearTimeout(l.current)}}),[e,t]),r}const E=(0,i.createContext)({setTypeaheadResult:e=>{let{uid:t,str:r}=e;if(t||r)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),B=e=>{let{children:t,containerRef:r,findMatchingTypeaheadUid:a,isEnabled:n=!0}=e;const[l,o]=(0,i.useState)({uid:null,str:""}),s=(0,i.useMemo)((()=>({typeaheadResult:l,setTypeaheadResult:o})),[l,o]),d=k(r,n),c=(0,i.useRef)(d);c.current=d;const u=(0,i.useRef)(a);return u.current=a,(0,i.useEffect)((()=>{d&&n?u.current(d).then((e=>{d===c.current&&o({uid:e,str:d})})):o({uid:null,str:""})}),[n,d,o]),(0,b.jsx)(E.Provider,{value:s,children:t})},U="Vf3ww2_My5QuwUnbpzhu";var M=r(27517);const V=()=>{const{typeaheadResult:{str:e}}=(0,i.useContext)(E);return e?(0,b.jsx)(M.A9,{className:U,children:e}):null};var _=r(80626),W=r(69736),H=r(21165),K=r(85648),Y=r(72445),z=r(60046);const G="rLYEzyB9ic23aMurRbCh",$="NDD4b43wDJs8ZEk8nE0N",X="/preferences",Z=e=>{let{spec:t}=e;const r=(0,C.lb)(),a=(0,_.$P)(),n=K.ag.get("web-player.your-library-x.dsa-message",K.ag.get("web-player.your-library-x.dsa-message-link")),l=(0,i.useCallback)((()=>{a.logInteraction(t.dsaMessageSettingsLinkFactory().hitUiNavigate({destination:X}))}),[a,t]);return(0,b.jsx)("div",{className:G,children:r?(0,b.jsx)(Y.ws,{label:(0,b.jsx)(W.x,{children:n}),placement:"right",showDelay:0,children:(0,b.jsx)("div",{className:$,children:(0,b.jsx)(H.W,{"aria-label":n})})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{children:(0,b.jsx)(H.W,{size:"small"})}),(0,b.jsx)(W.x,{as:"p",semanticColor:"textSubdued",children:K.ag.get("web-player.your-library-x.dsa-message",(0,b.jsx)(z.default,{to:X,onClick:l,search:"?highlight=dsa",children:K.ag.get("web-player.your-library-x.dsa-message-link")}))})]})})},J="wW9brXu3G3dR9CQ77Tyk",q="sgpkGFrp4dcnre_TJtaI",Q=e=>{let{className:t}=e;return(0,b.jsx)("section",{className:n()(J,t),children:(0,b.jsxs)("div",{className:q,children:[(0,b.jsx)(W.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.empty-state-folder-title")}),(0,b.jsx)(W.x,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.empty-state-folder-subtitle")})]})})};var ee=r(26082),te=r(43286),re=r(33592);const ie="xi3ytXbuSuzCYy5LwjFu",ae="OcOr6YadMDDeh_NPgClX",ne="eL94fWmhg6WbrdKZfGEW",le=(0,i.memo)((function(e){const{message:t,title:r,linkTitle:i,linkTo:a,onClick:l,className:o}=e;return(0,b.jsxs)("section",{className:n()(ie,o),children:[(0,b.jsxs)("div",{className:ae,children:[(0,b.jsx)(W.x,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,b.jsx)(W.x,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,b.jsx)("div",{className:ne,children:i&&(a||l)&&(0,b.jsx)(te.D,{className:ne,as:l?"button":void 0,colorSet:"invertedLight",href:a,onClick:l,component:re.Z,size:"small",children:i})})]})}));var oe=r(91402);const se=e=>{let{className:t}=e;const{createPlaylist:r}=(0,ee.K)(),a=(0,i.useCallback)((()=>{r()}),[r]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(oe.Du,{renderInline:!1,children:(0,b.jsx)(le,{onClick:a,linkTitle:K.ag.get("web-player.your-library-x.empty-state-playlists-cta"),title:K.ag.get("web-player.your-library-x.empty-state-playlists-title"),message:K.ag.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:t})}),(0,b.jsx)(le,{linkTo:"/genre/podcasts-web",linkTitle:K.ag.get("web-player.your-library-x.empty-state-podcasts-browse"),title:K.ag.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:K.ag.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:t})]})},de="JouuH90_RNAdTj0ZjcCA",ce="YtlFVHxvaGSz4vJdDdEa",ue="spFG_i1jkxOkxb1_SaLJ",pe="_8ZKfG3dOxfcr9Yyy5cv",ge=e=>{let{query:t,className:r}=e;return(0,b.jsxs)("div",{className:n()(de,r),"data-testid":"no-search-results-view",children:[(0,b.jsx)(W.x,{as:"h1",variant:"bodyMediumBold",className:ce,children:K.ag.get("web-player.your-library-x.empty-results-title-short",(0,b.jsx)("span",{className:ue,children:(0,b.jsx)("span",{className:pe,children:t})}))}),(0,b.jsx)(W.x,{as:"h2",variant:"bodySmall",children:K.ag.get("web-player.your-library-x.empty-results-text-short")})]})};var ye=r(16145);const me="yrUQENj0tMcKDW5v0mfb",xe="jsT0vJ8rWXPMeoFsMdNK",be=e=>{let{onClick:t}=e;return(0,b.jsxs)("div",{className:me,children:[(0,b.jsx)("div",{className:"icon",children:(0,b.jsx)(ye.l,{size:"xlarge",semanticColor:"textBase"})}),(0,b.jsxs)("div",{className:xe,children:[(0,b.jsx)(W.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.error-title")}),(0,b.jsx)(W.x,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.error-body")})]}),(0,b.jsx)("div",{children:(0,b.jsx)(te.D,{onClick:t,colorSet:"invertedLight",size:"small",children:K.ag.get("web-player.your-library-x.error-button")})})]})},he=(0,i.createContext)(null);r(80378);var fe=r(65786);const ve=e=>{let{children:t}=e;const r=function(){const[e,t]=(0,fe.z)("ylx-expanded-folders",[]),r=(0,i.useCallback)((t=>e.includes(t)),[e]),a=(0,i.useCallback)(((r,i)=>{const a=e.indexOf(r);if(i){if(-1!==a)return;t([...e,r])}else{if(-1===a)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:a}}();return(0,b.jsx)(he.Provider,{value:r,children:t})},Se="ojrThQm1wxR2gZ6GntJB",we="Dtr130mQSR0j8k7bu5KS",Pe="Ks_qLLEMUQzP7ejeQCwQ",Ce="o_wMyH9_LbAmIwlVqsF0",Te="vR1zUcAr6PBeHIvA_K13",De="TiJahFhH6KZaibhRtEOA",Ie="B_HdWVSEWPHaOf9LQAtC",Re="Pns6F5g4OEwEpdmOWTLg",je="gOCoOAfYUiOq2RlMCOjr",Ae="eldivguzYznZgQoShJbe",Le="rTLczxlwElfe8CeNpuh6",Ne="_XBlEstA77PgWTJzWbe1",Oe="pFmiujkSoJU4nVLZNO32",Fe="raKUx1vRBRjpm8xR2bIV",ke="jNqzRycGQMLmnhgQNqxy",Ee="Q955MS3fMIZGQAtvDYCq",Be="cVy6fGx6QtJbCnID7XdB",Ue="qEiVyQ28VnOKb0LeijqL",Me="IKhOc8pMvjcJEY5EP8GW",Ve=e=>{let{isScrolled:t}=e;return(0,b.jsxs)("div",{className:n()(Ne,Fe,{[ke]:t}),children:[(0,b.jsx)(W.x,{variant:"marginalBold",semanticColor:"textSubdued",children:K.ag.get("web-player.your-library-x.expanded-list-header.title")}),(0,b.jsx)(W.x,{variant:"marginalBold",semanticColor:"textSubdued",children:K.ag.get("web-player.your-library-x.expanded-list-header.date-added")}),(0,b.jsx)(W.x,{variant:"marginalBold",semanticColor:"textSubdued",children:K.ag.get("web-player.your-library-x.expanded-list-header.played-at")})]})};var _e=r(60769),We=r(8818),He=r(7935),Ke=r(75383),Ye=r(22795),ze=r(64464);const Ge="oLOECYtBhVmBtyisKwew",$e="as7TWnIA1jnumFte_u0R",Xe="tXkgloQ88DHF_inQE69J",Ze="g581mszC8syz99uMMWsr",Je="V57QBvW1q79gFmT8NBvz",qe={marginBlockEnd:0,willChange:"transform, opacity"},Qe=e=>{let{filterId:t,isPrimaryFilter:r,isPlaceholder:a,resetFilterIds:l,toggleFilterId:o,allowedDropTargetMimeTypes:s=ze.bu,className:d,ChipComponent:c=Ke.A,innerRef:u,index:p=0,spec:g,...y}=e;const m=(0,_.$P)(),x=(0,Ye.y)(),h=y.selected,f=t?x.getFilterLabel(t):"",v=(0,i.useCallback)((()=>{!t||h&&r?(l(),h&&r&&t?m.logInteraction(g.filterChipFactory({identifier:f,position:p}).hitClearFilter()):m.logInteraction(g.clearButtonFactory().hitClearFilter())):(o(t),h?m.logInteraction(g.filterChipFactory({identifier:f,position:p}).hitClearFilter()):m.logInteraction(g.filterChipFactory({identifier:f,position:p}).hitFilter()))}),[t,f,h,r,l,o,p,m,g]),S=(0,i.useCallback)((e=>{e.detail>1||a||v()}),[a,v]),{className:w,dropPosition:P,...C}=(0,ze.WB)({allowedMimeTypesByDropPosition:{[ze.Pw.ON]:s},onLongDragOver:v});return(0,b.jsx)(c,{...y,"aria-label":y["aria-label"],...C,...P===ze.Pw.ON?{selectedColorSet:"base"}:void 0,className:n()(d,w,{[$e]:P===ze.Pw.ON,[Je]:a}),onClick:S,selectedColorSet:P===ze.Pw.ON?"invertedDark":"invertedLight",secondary:h&&!r,style:qe,ref:u,tabIndex:-1})},et=[{id:"p1",name:"Playlists"},{id:"p2",name:"Podcasts & Shows"},{id:"p3",name:"Artists"},{id:"p4",name:"Albums"}],tt=(0,i.memo)((function(e){let{availableFilters:t,selectedFilters:r,toggleFilterId:a,resetFilterIds:n,className:l,spec:o}=e;const s=!(r||t),d=s?et:[...r??[],...t??[]],c=(0,i.useRef)(null),u=(0,i.useCallback)((()=>{var e,t;(0,He.Bu)(c.current,(null===(e=c.current)||void 0===e?void 0:e.nextElementSibling)instanceof HTMLElement?null===(t=c.current)||void 0===t?void 0:t.nextElementSibling:null),n()}),[n]);return 0===d.length?null:(0,b.jsxs)(We.l,{className:l,ariaLabel:K.ag.get("web-player.your-library-x.filter_options"),children:[!(null==r||!r.length)&&(0,b.jsx)(Qe,{resetFilterIds:u,toggleFilterId:a,allowedDropTargetMimeTypes:Dl,ChipComponent:_e.w,"aria-label":K.ag.get("web-player.your-library-x.clear_filters"),innerRef:c,spec:o}),d.map(((e,t)=>{const i=null==r?void 0:r.includes(e),l=0===t;return(0,b.jsx)(Qe,{filterId:e.id,isPrimaryFilter:l,isPlaceholder:s,resetFilterIds:n,toggleFilterId:a,selected:i,spec:o,index:t,children:e.name},e.id)}))]})}));var rt=r(65432);const it="",at=(0,i.createContext)({openedFolderUri:it,pushFolder:()=>{},popFolder:()=>{},resetFolder:()=>{},change:"PUSH"}),nt=e=>{let{children:t}=e;const{setFilter:r}=(0,i.useContext)(rt.fo),[a,n]=(0,fe.z)("opened-folder-uri",it),l=(0,i.useRef)([a??it]),o=(0,i.useRef)("PUSH"),s=(0,i.useCallback)((e=>{n(e),r(it)}),[n,r]),d=(0,i.useCallback)((e=>{l.current.push(e),o.current="PUSH",s(l.current.at(-1))}),[s]),c=(0,i.useCallback)((()=>{l.current.pop();const e=l.current.at(-1);return o.current="POP",s(e),e}),[s]),u=(0,i.useCallback)((()=>{l.current=[it],s(it)}),[s]);return(0,b.jsx)(at.Provider,{value:{openedFolderUri:a,pushFolder:d,popFolder:c,resetFolder:u,change:o.current},children:t})};var lt=r(67625),ot=r(36020),st=r(37001),dt=r(38174);r(27082);const ct=e=>{let{span:t,onInView:r,marginBottom:a,marginTop:n}=e;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&r()}))}));return l.current&&e.observe(l.current),()=>{e.disconnect()}}),[r]),t<=0?null:(0,b.jsx)("div",{style:{gridColumn:"1/-1",gridRow:`span ${t}`,marginBottom:a,marginTop:n},ref:l,"data-type":"sentinel"},"topSentinel")},ut=e=>{let{renderItems:t,nrItems:r,estimatedItemMaxHeight:a,scrollNodeRef:n,nrRowsOverscan:l=5,initalNrRows:o=5,onGridResize:s}=e;const[d,c]=(0,i.useState)({firstRowToRender:0,nrRows:o+l}),u=(0,i.useRef)(0),p=(0,i.useRef)(null),g=(0,i.useRef)(a),y=(0,ot.u)(),m=(0,i.useCallback)((()=>{var e;const t=null===(e=p.current)||void 0===e?void 0:e.querySelector(':scope > *:not([data-type="sentinel"])');g.current=t?t.getBoundingClientRect().height+y.COLUMN_GRID_GAP:g.current}),[y]),x=(0,i.useCallback)((()=>{const e=n.current;if(!e)return;m();const t=Math.floor((e.scrollTop-u.current)/g.current),r=Math.max(t-l,0),i=Math.ceil(e.offsetHeight/g.current)+2*l;r===d.firstRowToRender&&i===d.nrRows||c({firstRowToRender:r,nrRows:i})}),[l,d,n,m]),h=(0,i.useCallback)((e=>{let{columnCount:i}=e;if(i<=0)return[null];s&&s(i,g.current);const a=Math.ceil(r/i),n=d.firstRowToRender*i,o=d.firstRowToRender+d.nrRows-1,c=Math.min(r-1,(o+1)*i-1),u=g.current*(l-2);return[(0,b.jsx)(ct,{span:d.firstRowToRender,onInView:x,marginBottom:`-${u}px`},`topSentinel-${d.firstRowToRender}`),t(n,c,i),(0,b.jsx)(ct,{span:a-o,onInView:x,marginTop:`-${u}px`},"bottomSentinel-"+(a-o))]}),[r,l,s,x,t,d]);return(0,i.useEffect)((()=>{const e=p.current,t=n.current;e&&t&&(u.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[n]),(0,b.jsx)(dt.T,{useUniformRowHeight:!0,ref:p,render:h,onLayoutChange:m})};var pt=r(61930),gt=r(70526),yt=r(94948),mt=r(16972),xt=r(18739),bt=r(4901),ht=r(22527),ft=r(70959),vt=r(87890),St=r(36353),wt=r(11317),Pt=r(12895),Ct=r(87080),Tt=r(49334);const Dt=e=>{let{iconSize:t="small"}=e;return(0,b.jsx)("span",{className:Te,children:(0,b.jsx)(Tt.w,{size:t,semanticColor:"textBrightAccent",className:Ce})})};var It=r(47895);const Rt=e=>{let{children:t,title:r,subtitleSlot:i,isPlaying:a}=e;const l=(0,c.W6)(It.y);return(0,b.jsx)(Y.ws,{label:(0,b.jsxs)("div",{className:n()("encore-dark-theme","encore-layout-themes",{"vertical-metrics":l},Le),children:[(0,b.jsxs)("div",{children:[r,i]}),a&&(0,b.jsx)(Dt,{})]}),placement:"right",showDelay:0,children:t})},jt=e=>{const t=(0,i.useRef)(null);return(0,lt.xn)(e.uri)?(0,b.jsx)(lt.sg,{parentRef:e.parentRef,api:t,children:(0,b.jsx)(Rt,{...e})}):(0,b.jsx)(Rt,{...e})};var At=r(32394),Lt=r(11797),Nt=r(47498);const Ot=e=>{let{leading:t,subtitle:r,uri:i}=e;const a=`listrow-subtitle-${i}`;return(0,b.jsx)("div",{className:Nt.Z.subtitle,children:(0,b.jsxs)(At.l,{lineClamp:1,className:Nt.Z.link,id:a,dir:"auto",children:[(0,b.jsx)("span",{className:Nt.Z.subtitleLeadingWrapper,children:t}),r]})})},Ft=e=>{let{leading:t,subtitle:r,uri:i}=e;const a=`card-subtitle-${i}`;return(0,b.jsx)("div",{className:Nt.Z.subtitle,children:(0,b.jsxs)(Lt._,{lineClamp:1,className:Nt.Z.link,id:a,role:"gridcell",dir:"auto",children:[(0,b.jsx)("span",{className:Nt.Z.subtitleLeadingWrapper,children:t}),r]})})};var kt=r(75802),Et=r(97345),Bt=r(24441),Ut=r(62116),Mt=r(10956);var Vt=r(86529);const _t={state:{referrer:"your_library",preventMoveFocus:!0}};function Wt(e,t,r,a){const{filter:n}=(0,i.useContext)(rt.fo),{isActive:l}=(0,ft.cR)(e),o=function(e){const{typeaheadResult:{uid:t,str:r}}=(0,i.useContext)(E);return t===e?r:null}(e),s=!!o,d=(0,Ut.k)({uri:e,type:"link"})?(0,Vt.is)(t):t,c=(0,i.useRef)(null),u=(0,kt.s0)(),p=(0,i.useCallback)((e=>{e.preventDefault(),a?a():d&&u(d,_t)}),[a,u,d]);(0,i.useLayoutEffect)((()=>{var e;s&&(null===(e=c.current)||void 0===e||null===(e=e.closest('[role="row"], [role="listitem"]'))||void 0===e||null===(e=e.querySelector("button"))||void 0===e||e.focus({preventScroll:!0}))}),[s]);return{isActive:l,onClick:p,contents:n||o?(0,b.jsx)("span",{ref:c,children:(0,b.jsx)(bt.o,{autoEscape:!0,searchWords:[n.trim(),...(null==o?void 0:o.split(" "))??""],textToHighlight:r})}):r}}const Ht=e=>{var t;let{uri:r,playbackUri:i=r,title:a,menu:l,to:o=(null===(t=(0,wt.EC)(r))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:s}=e;const{isActive:d,contents:c}=Wt(i,o,a,s),u=`listrow-title-${r}`;return(0,b.jsx)(Mt._,{menu:l,children:(0,b.jsx)(Et.g,{id:u,lineClamp:1,className:n()(Nt.Z.link,Nt.Z.titleLink),semanticColor:d?"textBrightAccent":"textBase",dir:"auto",children:c})})},Kt=e=>{var t;let{uri:r,playbackUri:i=r,title:a,menu:l,to:o=(null===(t=(0,wt.EC)(r))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:s}=e;const{isActive:d,onClick:c,contents:u}=Wt(i,o,a,s);return(0,b.jsx)(Mt._,{menu:l,children:(0,b.jsx)(Bt.l,{lineClamp:1,className:n()(Nt.Z.link,Nt.Z.titleLink),semanticColor:d?"textBrightAccent":"textBase",href:o,onClick:c,role:"gridcell",dir:"auto",children:u})})};var Yt=r(78734),zt=r(17053),Gt=r(59374),$t=(r(39301),r(44874)),Xt=r(29608);const Zt=e=>{let{isConfirmationForPlaylist:t,onConfirm:r,onClose:i}=e;const a=t?K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,b.jsx)(Xt.Q,{"aria-label":a,titleText:a,descriptionText:t?K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:r,onClose:i,confirmText:K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:t?K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};function Jt(e){var t;let{onApplyDrop:r,spec:a,isDropTargetPinned:n}=e;const l=(0,Ye.y)(),{contains:o}=(0,$t.P)("ylpin"),[s,d]=(0,i.useState)(null),c=(0,i.useCallback)((async(e,t)=>{if(n)return void r(e,t);const{[Yt.RN.PLAYLISTS_V2]:i=[],[Yt.RN.FOLDERS]:a=[]}=e,l=[...i,...a];if(!!l.length&&(await o(...l)).some(Boolean)){if(l.length>1)throw new Error("Reordering multiple pinned items at once is not supported");d({dropData:e,dropPosition:t})}else r(e,t)}),[n,o,r]),u=(0,_.$P)();return{applyDropWithUnpinConfirmation:c,unpinConfirmationDialog:s?(0,b.jsx)(Zt,{isConfirmationForPlaylist:!(null!==(t=s.dropData[Yt.RN.FOLDERS])&&void 0!==t&&t.length),onClose:()=>d(null),onConfirm:async()=>{const{[Yt.RN.PLAYLISTS_V2]:e=[],[Yt.RN.FOLDERS]:t=[]}=s.dropData;await l.unpin([...e,...t][0]),null!=a&&a.dragUnpinItem&&u.logInteraction(a.dragUnpinItem({itemToUnpin:[...e,...t][0]})),r(s.dropData,s.dropPosition),d(null)}}):null}}var qt=r(58578);function Qt(){const{dropOriginUri:e,sectionId:t}=(0,i.useContext)(qt.Di);return{dropOriginIsYLX:e===y.in,entityIsInFolder:t>0}}function er(){const e=(0,N.o)(),{dropOriginIsYLX:t}=Qt();return(0,i.useCallback)((async(r,i)=>{const a=await e.contains(r);if(1!==new Set(a).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");if(a[0]){if(r.length>1)throw new Error("Moving multiple playlists at once is not supported");t?await e.move({uri:r[0]},i):await e.move({uri:r[0]},i,!0)}else await e.add(r,i)}),[t,e])}function tr(e){let{dropTargetUri:t,spec:r,isDropTargetPinned:a}=e;const n=(0,N.o)(),l=(0,i.useContext)(D.H),o=(0,_.$P)(),s=er(),d=(0,i.useCallback)((async(e,i)=>{const{[Yt.RN.PLAYLISTS_V2]:d=[],[Yt.RN.FOLDERS]:[c]=[]}=e,u=i===ze.Pw.BEFORE?{before:{uri:t}}:{after:{uri:t}};if(a){const t=e[Object.keys(e)[0]][0];if((0,wt.nK)(t)||(0,wt.L0)(t)){const e=rr((await n.getContents()).items,t);-1===e?await n.add([t],{before:"start"}):e>0&&((0,wt.nK)(t)?await n.move({uri:t},{before:"start"}):await n.moveFolder({uri:t},{before:"start"}))}else if(!(0,wt.zO)(t)){const[e]=await l.contains(t);e||await l.add({uris:[t]})}await l.pin(t,u),o.logInteraction(r.dragPinItem({itemToPin:t}))}else c?await n.moveFolder({uri:c},u):d.length&&await s(d,u);o.logInteraction(r.dragSort())}),[t,a,l,o,r,n,s]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:u}=Jt(a?{onApplyDrop:d,spec:r,isDropTargetPinned:a}:{onApplyDrop:d});return{handleDropBeforeOrAfterRootlistItem:(0,i.useCallback)((async(e,t)=>{const{[Yt.RN.PLAYLISTS_V2]:r=[],[Yt.RN.FOLDERS]:i=[]}=e;if(r.length&&i.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(i.length>1)throw new Error("Dropping multiple folders is not supported");u(e,t)}),[u]),unpinConfirmationDialog:c}}function rr(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(const i of e)if((0,Gt.no)(i)||(0,Gt.lU)(i)){if((0,wt.U4)(i.uri,t))return r;if((0,Gt.lU)(i)){const e=rr(i.items,t,r+1);if(-1!==e)return e}}return-1}const ir={state:{referrer:"your_library",preventMoveFocus:!0}};function ar(e){var t,r;let{uri:a,to:n=(null===(t=(0,wt.EC)(a))||void 0===t?void 0:t.toURLPath(!0))||"",type:l,handleNavigate:o,dragLabel:s,isPinned:d,canReorder:c,allowedDropTargetDropOnMimeTypes:u=[],onDropTargetDropOn:p,onLongDragOver:g,openDeleteDialog:m,togglePlay:x,isItemInGrid:b,playInsteadOfNavigating:h=!1,isPlaying:f,isActive:v,spec:S,folderDepth:w}=e;const P=(0,Ut.k)({uri:a,type:"link"})?(0,Vt.is)(n):n,C=(0,kt.s0)(),T=(0,kt.TH)(),D=(0,i.useCallback)((()=>{C(P,ir)}),[C,P]),I=(0,_.$P)(),R=(0,i.useRef)(0),j=(0,i.useRef)(null),A=(0,i.useCallback)((e=>{var t;let{target:r}=e;return r instanceof HTMLElement&&!(null!==(t=j.current)&&void 0!==t&&t.contains(r))}),[]),L=(0,i.useCallback)((e=>{if(!A(e)){if(e.preventDefault(),e.currentTarget.scrollIntoView({block:"nearest"}),h){if(R.current>Date.now())return;return R.current=Date.now()+300,void(f||(null==x||x(),I.logInteraction(S.yourLibraryItemFactory().hitPlay({itemToBePlayed:a}))))}o?o():P&&C(P,{...ir,replace:P===T.pathname}),I.logInteraction(S.yourLibraryItemFactory().hitUiNavigate({destination:a}))}}),[A,h,o,P,I,S,a,x,f,C,T.pathname]),N=(0,i.useCallback)((e=>{h||A(e)||x&&(v?f?I.logInteraction(S.yourLibraryItemFactory().doubleHitPause({itemToBePaused:a})):I.logInteraction(S.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:a})):I.logInteraction(S.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:a})),null==x||x())}),[A,h,x,v,f,I,S,a]),O=(0,i.useCallback)((()=>{I.logInteraction(S.yourLibraryItemFactory().secondaryHitUiReveal())}),[I,S]),F=(0,zt.O)({itemUris:[a],itemMimeTypes:[(0,Yt.H$)(l)],dragLabelText:s,sectionId:w??0,dropOriginUri:y.in});let k=[];d?k=y.Jp:c&&(k=y.SG);const E={[ze.Pw.ON]:u,[ze.Pw.BEFORE]:k,[ze.Pw.AFTER]:k},{handleDropBeforeOrAfterRootlistItem:B,unpinConfirmationDialog:U}=tr({dropTargetUri:a,spec:S,isDropTargetPinned:d}),M=(0,i.useCallback)(((e,t)=>{t===ze.Pw.ON?null==p||p(e,t):t!==ze.Pw.BEFORE&&t!==ze.Pw.AFTER||B(e,t)}),[p,B]),{dropPosition:V,className:W,...H}=(0,ze.WB)({uri:a,allowedMimeTypesByDropPosition:E,onDrop:M,onLongDragOver:g??D,reorderDirection:b?"horizontal":"vertical"}),K=(0,i.useCallback)((e=>{e.repeat||A(e)||("Backspace"!==e.key&&"Delete"!==e.key||!m||m(),"Enter"===e.key&&e.shiftKey&&x&&(e.preventDefault(),x()),"Enter"===e.key&&I.logInteraction(S.yourLibraryItemFactory().keyStrokeUiNavigate({destination:a})))}),[A,I,m,S,x,a]),Y=null===(r=(0,wt.EC)(T.pathname,{parseUnknown:!0}))||void 0===r?void 0:r.toURI();return{onClick:L,onDoubleClick:N,draggable:!!s,onDragStart:F,onKeyDown:K,unpinConfirmationDialog:U,dropPosition:V,dropTargetClassName:W,logRightClick:O,isViewActive:!!Y&&(0,wt.U4)(a,Y),itemRef:j,...H}}const nr=e=>{switch(e){case I.p.ALBUM:return K.ag.get("web-player.your-library-x.type-album");case I.p.ARTIST:return K.ag.get("web-player.your-library-x.type-artist");case I.p.FOLDER:return K.ag.get("web-player.your-library-x.type-folder");case I.p.AUDIOBOOK:return K.ag.get("web-player.your-library-x.type-audiobook");case I.p.YOUR_EPISODES:case I.p.LOCAL_FILES:case I.p.LIKED_SONGS:case I.p.PLAYLIST:return K.ag.get("web-player.your-library-x.type-playlist");case I.p.SHOW:return K.ag.get("web-player.your-library-x.type-show");default:return(0,gt.U)(e)}},lr=e=>{switch(e){case I.p.YOUR_EPISODES:case I.p.LIKED_SONGS:case I.p.LOCAL_FILES:return I.p.PLAYLIST;default:return e}};var or=r(67627);const sr=i.createContext(!1),dr=e=>{let{children:t,isCompact:r}=e;return(0,b.jsx)(sr.Provider,{value:r,children:t})},cr=()=>(0,i.useContext)(sr),ur="eB4weTwpV1CJo1Ycry5o",pr="TaQop0j2CNkuRamIFPJm",gr="XbKq21A9yavQTZY4fYcy",yr="DHzyoCWhWjunaSpGo3fm",mr="R7bnv14gXI2ndBOqFvCf",xr="eYs_j7mhACuywEjr6wf4",br="IyHaBob4EvHvpR1d0aMt",hr=e=>{var t;let{uri:r,to:a=(null===(t=(0,wt.EC)(r))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:l,dragLabel:o,name:s,subtitle:d,cover:c,type:u,downloadButton:p,canReorder:g,allowedDropTargetDropOnMimeTypes:y,onDropTargetDropOn:m,onLongDragOver:x,menu:h,leading:f,openDeleteDialog:v,togglePlay:S,isPinned:w,shouldShowType:P,playbackUri:C,isPlaying:T,isActive:D,playInsteadOfNavigating:I,spec:j,index:A,animateClassName:L="",animateState:N}=e;const{onClick:O,onDoubleClick:F,draggable:k,onDragStart:E,onKeyDown:B,dropPosition:U,dropTargetClassName:M,unpinConfirmationDialog:V,logRightClick:_,isViewActive:W,itemRef:H,...K}=ar({uri:r,to:a,handleNavigate:l,dragLabel:o,isPinned:w,canReorder:g,allowedDropTargetDropOnMimeTypes:y,onDropTargetDropOn:m,openDeleteDialog:v,onLongDragOver:x,togglePlay:S,isItemInGrid:!0,isPlaying:T,isActive:D,spec:j,playInsteadOfNavigating:I}),Y=(0,b.jsx)(Kt,{uri:r,title:s,menu:h,handleNavigate:l,playbackUri:C}),z=(0,b.jsx)(Ft,{leading:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(or.z,{pinned:w}),p]}),subtitle:(0,b.jsxs)(b.Fragment,{children:[P&&nr(u),!!d&&P&&" • ",d]}),uri:r}),G=(0,i.useRef)(null),$=cr();let X=(0,b.jsx)(R._P,{menu:h,onShow:_,children:(0,b.jsx)(Ct.Q,{uri:r,trigger:Ct.x.OnMouseDown,children:(0,b.jsx)(vt.Z,{id:r,title:Y,subtitle:z,media:c,size:"sm",leading:f,className:n()(ur,{[L]:N}),variant:W?"tinted":void 0,onClick:O,onDoubleClick:F,padding:St.nu,...K})})});return $&&(X=(0,b.jsx)(jt,{title:Y,subtitleSlot:z,uri:r,isPlaying:T,parentRef:G,children:(0,b.jsx)("div",{children:(0,b.jsx)(R._P,{menu:h,onShow:_,children:(0,b.jsx)(Ct.Q,{uri:r,trigger:Ct.x.OnMouseDown,children:(0,b.jsx)(vt.Z,{id:r,title:void 0,media:c,size:"sm",className:n()(ur,pr,{[L]:N}),variant:W?"tinted":void 0,onClick:O,onDoubleClick:F,padding:St.hM,ref:G,...K})})})})})),(0,b.jsxs)(b.Fragment,{children:[V,(0,b.jsx)(Pt.B,{draggable:k,onDragStart:E,onKeyDown:B,className:n()(M,{[Ge]:U===ze.Pw.ON,[Xe]:U===ze.Pw.BEFORE,[Ze]:U===ze.Pw.AFTER}),"aria-selected":D,innerRef:H,"aria-posinset":A,children:X})]})};var fr=r(32540),vr=r(93421),Sr=r(11401),wr=r(33598),Pr=r(76981),Cr=r(1134),Tr=r(42858);const Dr=e=>{let{name:t,uri:r,togglePlay:a,spec:l,isActive:o,isPlaying:s,size:d}=e;const c=(0,_.$P)(),u=(0,i.useCallback)((()=>{o?s?c.logInteraction(l.yourLibraryItemFactory().doubleHitPause({itemToBePaused:r})):c.logInteraction(l.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:r})):c.logInteraction(l.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:r})),a()}),[o,s,c,l,a,r]);return(0,b.jsx)("div",{className:n()(mr,{[br]:s,[xr]:"small"===d}),role:"gridcell",children:(0,b.jsx)(Tr.f,{isPlaying:s,onClick:u,ariaPlayLabel:K.ag.get("playlist.a11y.play",t),ariaPauseLabel:K.ag.get("playlist.a11y.pause",t),size:d})})},Ir=(0,i.memo)((function(e){let{title:t,type:r,images:i,isCircular:a,color:l,animateState:o,animateClassName:s=""}=e;const d=(0,Cr.TJ)();return(0,b.jsx)(vr.O,{fadeIn:!0,images:d(i,48),shape:a?vr.K.CIRCLE:vr.K.ROUNDED_CORNERS,size:Sr.m$.SIZE_48,iconSize:"medium",type:r,title:t,className:n()(Nt.Z.entityImage,{[s]:o}),color:l,loadingMode:"eager"})})),Rr=(0,i.memo)((function(e){let{title:t,type:r,uri:a,images:n,isCircular:l,togglePlay:o,color:s,spec:d,isActive:u,isPlaying:p}=e;const g=(0,c.W6)(It.uH),y=cr(),m=(0,Cr.TJ)(),[x,h]=(0,i.useState)("medium"),f=(0,i.useRef)(null);return(0,Pr.y)({onResize:e=>{let{width:t}=e;h(t<90?"small":"medium")},refOrElement:f}),(0,b.jsx)("div",{className:yr,ref:f,children:(0,b.jsx)(fr.x,{images:m(n,la),FallbackComponent:e=>(0,b.jsx)(wr.t,{semanticColor:"textSubdued",type:r,size:"xxlarge",className:g?gr:"",...e}),isCircular:l,color:s,loadingMode:"eager",children:o&&!y&&(0,b.jsx)(Dr,{name:t,uri:a,togglePlay:o,spec:d,isActive:u,isPlaying:p,size:x})})})}));var jr=r(4250);const Ar="_ymJNIfklFmogab9uWY1",Lr=e=>{let{folderDepth:t=0}=e;return(0,b.jsx)("li",{className:Ar,style:{"--ylx-folder-depth":t}})},Nr=e=>{var t;const{RowVariantComponent:r,uri:a,to:l=(null===(t=(0,wt.EC)(a))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:o,folderDepth:s,className:d,dragLabel:c,isPinned:u,canReorder:p,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:y,onLongDragOver:m,style:x,openDeleteDialog:h,togglePlay:f,isPlaying:v,isActive:S,type:w,menu:P,name:C,subtitle:T,downloadButton:D,expandFolderButton:I,cover:R,alt:j,addedAt:A,lastPlayedAt:L,shouldShowType:N,playbackUri:O,playInsteadOfNavigating:F,spec:k,nrValidItems:E,index:B,lockedIcon:U,onKeyDown:M,...V}=e,{onClick:_,onDoubleClick:W,onDragStart:H,onKeyDown:K,dropPosition:Y,dropTargetClassName:z,draggable:G,unpinConfirmationDialog:$,logRightClick:X,isViewActive:Z,itemRef:J,...q}=ar({uri:a,to:l,type:w,handleNavigate:o,dragLabel:c,isPinned:u,canReorder:p,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:y,onLongDragOver:m,openDeleteDialog:h,togglePlay:f,isPlaying:v,isActive:S,playInsteadOfNavigating:F,spec:k,folderDepth:s}),Q=(0,i.useCallback)((e=>{K(e),null==M||M(e)}),[K,M]);return(0,b.jsxs)(b.Fragment,{children:[$,Y===ze.Pw.BEFORE&&(0,b.jsx)(Lr,{folderDepth:s}),(0,b.jsx)(jr.E,{style:{"--ylx-folder-depth":s,...x},draggable:G,onDragStart:H,onDoubleClick:W,className:n()(d,z,Ue,{[Ge]:Y===ze.Pw.ON}),...V,...q,onKeyDown:Q,innerRef:J,"aria-setsize":E,"aria-posinset":B+1,children:(0,b.jsx)(r,{...e,to:l,isActive:S,isViewActive:Z,onClick:_,logRightClick:X,playInsteadOfNavigating:F,parentRef:J})}),Y===ze.Pw.AFTER&&(0,b.jsx)(Lr,{folderDepth:s})]})};function Or(e){var t;const{uri:r,artists:a}=e,{filter:n}=(0,i.useContext)(rt.fo),{isPlaying:l,isActive:s}=(0,ft.cR)(r),d=(0,o.I0)(),c=(0,i.useCallback)((()=>{d((0,yt.YU)(r))}),[d,r]),{togglePlay:u}=(0,ht.n)({uri:r},{featureIdentifier:"album",referrerIdentifier:"your_library"});return{isPlaying:l,isActive:s,openDeleteDialog:c,togglePlay:u,menu:(0,b.jsx)(mt.Y,{uri:r,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,b.jsx)(bt.o,{searchWords:[n.trim()],textToHighlight:(null===(t=a.at(0))||void 0===t?void 0:t.name)??""}),downloadButton:(0,b.jsx)(xt.$,{uri:r,size:"xsmall",className:Nt.Z.icon,as:"span"})}}const Fr=e=>{let{libraryItem:t,shouldShowType:r=!1,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,pinned:c,type:u,addedAt:p,lastPlayedAt:g,color:y}=t,{isPlaying:m,isActive:x,openDeleteDialog:h,togglePlay:f,menu:v,subtitleText:S,downloadButton:w}=Or(t),P=(0,b.jsx)(Ir,{title:d,type:u,images:s,color:y});return(0,b.jsx)(Nr,{RowVariantComponent:i,uri:o,cover:P,name:d,subtitle:S,downloadButton:w,alt:d,type:u,dragLabel:d,menu:v,togglePlay:f,openDeleteDialog:h,addedAt:p,lastPlayedAt:g,isPinned:c,isPlaying:m,isActive:x,shouldShowType:r,spec:a,nrValidItems:n,index:l})},kr=e=>{let{libraryItem:t,shouldShowType:r=!1,spec:i,index:a}=e;const{uri:n,images:l,name:o,pinned:s,type:d,color:c}=t,{togglePlay:u,menu:p,subtitleText:g,downloadButton:y,openDeleteDialog:m,isPlaying:x,isActive:h}=Or(t),f=(0,b.jsx)(Rr,{title:o,type:d,images:l,uri:n,togglePlay:u,color:c,spec:i,isActive:h,isPlaying:x});return(0,b.jsx)(hr,{uri:n,name:o,subtitle:g,menu:p,dragLabel:o,cover:f,downloadButton:y,type:d,togglePlay:u,isPinned:s,shouldShowType:r,openDeleteDialog:m,isPlaying:x,isActive:h,spec:i,index:a})};var Er=r(27838);function Br(e){const{uri:t}=e,r=(0,o.I0)(),{togglePlay:a}=(0,ht.n)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),{isPlaying:n,isActive:l}=(0,ft.cR)(t);return{togglePlay:a,isPlaying:n,isActive:l,openDeleteDialog:(0,i.useCallback)((()=>{r((0,yt.YU)(t))}),[r,t]),menu:(0,b.jsx)(Er.m,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Ur=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,type:c,addedAt:u,lastPlayedAt:p,pinned:g,color:y}=t,{togglePlay:m,isPlaying:x,isActive:h,openDeleteDialog:f,menu:v}=Br(t),S=(0,b.jsx)(Ir,{title:d,type:c,images:s,isCircular:!0,color:y});return(0,b.jsx)(Nr,{RowVariantComponent:i,uri:o,cover:S,name:d,type:c,alt:d,dragLabel:d,menu:v,togglePlay:m,openDeleteDialog:f,addedAt:u,lastPlayedAt:p,isPlaying:x,isActive:h,isPinned:g,shouldShowType:r,spec:a,nrValidItems:n,index:l})},Mr=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c}=t,{togglePlay:u,menu:p,openDeleteDialog:g,isPlaying:y,isActive:m}=Br(t),x=(0,b.jsx)(Rr,{title:o,type:s,images:l,uri:n,togglePlay:u,isCircular:!0,color:c,spec:i,isActive:m,isPlaying:y});return(0,b.jsx)(hr,{uri:n,name:o,menu:p,dragLabel:o,cover:x,type:s,togglePlay:u,isPinned:d,shouldShowType:r,openDeleteDialog:g,isPlaying:y,isActive:m,spec:i,index:a})};var Vr=r(91023),_r=r(6936);const Wr=e=>{let{locked:t}=e;return t?(0,b.jsx)(_r.Z,{semanticColor:"textSubdued",title:K.ag.get("mwp.header.content.unavailable"),className:Nt.Z.icon,size:"xsmall"}):null};function Hr(e){const{uri:t,authorName:r}=e,{filter:a}=(0,i.useContext)(rt.fo),n=(0,o.I0)(),{isPlaying:l,isActive:s}=(0,ft.cR)(t);return{isPlaying:l,isActive:s,openDeleteDialog:(0,i.useCallback)((()=>{n((0,yt.YU)(t))}),[n,t]),menu:(0,b.jsx)(Vr.X,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,b.jsx)(bt.o,{searchWords:[a.trim()],textToHighlight:r}),downloadButton:(0,b.jsx)(xt.$,{uri:t,size:"xsmall",className:Nt.Z.icon,as:"span"})}}const Kr=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,type:c,pinned:u,addedAt:p,lastPlayedAt:g,color:y}=t,{isPlaying:m,isActive:x,openDeleteDialog:h,menu:f,subtitleText:v,downloadButton:S}=Hr(t),w=(0,b.jsx)(Ir,{title:d,type:c,images:s,color:y}),P=(0,b.jsx)(Wr,{locked:t.isLocked});return(0,b.jsx)(Nr,{RowVariantComponent:i,uri:o,cover:w,name:d,subtitle:v,alt:d,dragLabel:d,menu:f,openDeleteDialog:h,addedAt:p,lastPlayedAt:g,isPlaying:m,isActive:x,isPinned:u,shouldShowType:r,type:c,spec:a,nrValidItems:n,lockedIcon:P,index:l,downloadButton:S})},Yr=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c}=t,{menu:u,subtitleText:p,openDeleteDialog:g,isPlaying:y,isActive:m,downloadButton:x}=Hr(t),h=(0,b.jsx)(Rr,{title:o,type:s,images:l,uri:n,color:c,spec:i,isActive:m,isPlaying:y});return(0,b.jsx)(hr,{uri:n,name:o,subtitle:p,menu:u,dragLabel:o,cover:h,isPinned:d,shouldShowType:r,type:s,openDeleteDialog:g,isPlaying:y,isActive:m,spec:i,index:a,downloadButton:x})};var zr=r(90779),Gr=r(80859),$r=r(55696),Xr=r(18674),Zr=r(63539),Jr=r(85536),qr=r(64569);const Qr=e=>{let{uri:t,spec:r}=e;const{togglePlay:a,isPlaying:n,isActive:l}=(0,ht.n)({uri:t},{featureIdentifier:"folder"}),o=(0,_.$P)(),s=(0,i.useCallback)((()=>{a(),r&&o&&(n?o.logInteraction(r.playButtonFactory({uri:t}).hitPause({itemToBePaused:t})):l?o.logInteraction(r.playButtonFactory({uri:t}).hitResume({itemToBeResumed:t})):o.logInteraction(r.playButtonFactory({uri:t}).hitPlay({itemToBePlayed:t})))}),[l,n,o,r,a,t]);return(0,b.jsx)(qr.s,{role:"menuitem",onClick:s,leadingIcon:n?(0,b.jsx)(Zr.k,{semanticColor:"textSubdued",size:"small"}):(0,b.jsx)(Jr.J,{semanticColor:"textSubdued",size:"small"}),children:n?K.ag.get("pause"):K.ag.get("play")})},ei=i.memo((function(e){return(0,b.jsx)(g.JL,{value:"create-folder",children:(0,b.jsx)(Qr,{...e})})}));var ti=r(27926);const ri=e=>{let{uri:t,name:r,divider:a,spec:n,handleRename:l}=e;const s=(0,_.$P)(),d=(0,o.I0)(),c=(0,i.useCallback)((()=>{n&&s.logInteraction(n.editButtonFactory({uri:t}).hitUiReveal()),d((0,yt.UX)(r,l))}),[d,s,r,l,n,t]);return(0,b.jsx)(qr.s,{role:"menuitem",divider:a,onClick:c,leadingIcon:(0,b.jsx)(ti.y,{semanticColor:"textSubdued",size:"small"}),children:K.ag.get("contextmenu.rename")})},ii=i.memo((function(e){return(0,b.jsx)(g.JL,{value:"rename",children:(0,b.jsx)(ri,{...e})})})),ai=i.memo((function(e){let{reference:t,name:r="",onRename:i,onCreateCallback:a=(()=>{}),onDeleteCallback:n,canPin:l=y.TL.NO,isPinned:o=!1}=e;const{spec:s}=(0,m.T)(t.uri);return(0,b.jsx)(g.JL,{value:"folder",children:(0,b.jsxs)(p.v,{children:[(0,b.jsx)(ii,{spec:s,uri:t.uri,name:r,handleRename:i}),(0,b.jsx)(x.WQ,{uri:t.uri,divider:"after",onDeleteCallback:n}),(l!==y.TL.NO||o)&&(0,b.jsx)(Xr.X,{uri:t.uri,canPin:l,isPinned:o,type:I.p.FOLDER,spec:s}),(0,b.jsx)(x.uj,{position:{after:t},onCreateCallback:a,spec:s}),(0,b.jsx)(x.K_,{position:{after:t},onCreateCallback:a,spec:s}),(0,b.jsx)($r.I,{uriToBeAdded:t.uri,isInLibrary:!0,spec:s}),(0,b.jsx)(ei,{uri:t.uri,spec:s})]})})}));var ni=r(76950),li=r(90284),oi=r(78024),si=r(79096),di=r(48594),ci=r(60444);const ui=e=>{let{uri:t}=e;const[r,a]=(0,i.useState)(!1),n=(0,i.useCallback)((()=>{a(!0),setTimeout((()=>{a(!1)}),500)}),[]);return(0,li.b)(ni.EW.OPERATION_COMPLETE,(e=>{"add"===e.data.operation&&"liked-songs"===t&&n()})),(0,si.F)(oi.XL.OPERATION_COMPLETE,(e=>{"add"===e.data.operation&&t===e.data.uri&&n()})),(0,di.B)(ci.Yt.OPERATION_COMPLETE,(e=>{var r,i;"remove"!==e.data.operation&&"end"!==(null===(r=e.data.position)||void 0===r?void 0:r.after)&&(null===(i=e.data.position.after)||void 0===i?void 0:i.uri)===t&&(0,wt.L0)(t)&&n()})),{animateState:r,animateClassName:Nt.Z.pulse}};var pi=r(1740),gi=r(91054),yi=r(32804);function mi(e,t){const{createPlaylistFromAlbum:r,createPlaylistFromTracks:a}=(0,ee.K)(),n=(0,_.$P)(),l=(0,N.o)(),o=er(),s=(0,i.useCallback)((r=>{if(!t)return;const{[Yt.RN.PLAYLISTS_V2]:i=[],[Yt.RN.FOLDERS]:a=[]}=r,s={after:{uri:t}};i.length&&(o(i,s),n.logInteraction(e.dragSort())),a.length&&(l.moveFolder({uri:a[0]},s),n.logInteraction(e.dragSort()))}),[o,n,l,e,t]),{unpinConfirmationDialog:d,applyDropWithUnpinConfirmation:c}=Jt({onApplyDrop:s});return{unpinConfirmationDialog:d,handleDropOnFolder:(0,i.useCallback)((async i=>{if(!t)return;const{[Yt.RN.TRACKS]:l=[],[Yt.RN.LOCAL_TRACKS]:o=[],[Yt.RN.ALBUMS]:s=[],[Yt.RN.EPISODES]:d=[],[Yt.RN.PLAYLISTS_V2]:u=[],[Yt.RN.FOLDERS]:p=[]}=i,g={after:{uri:t}};u.length||p.length?c(i,yi.Pw.ON):s.length?(r(s[0],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(l.length||o.length||d.length)&&(a([...l,...o,...d],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()))}),[t,c,r,n,e,a])}}const xi=[Yt.RN.TRACKS,Yt.RN.LOCAL_TRACKS,Yt.RN.ALBUMS,Yt.RN.EPISODES,Yt.RN.PLAYLISTS_V2,Yt.RN.FOLDERS];function bi(e,t){const{uri:r,name:a,numberOfFolders:n,numberOfPlaylists:l,pinned:s}=e,{isPlaying:d,isActive:c}=(0,ft.cR)(r),{pushFolder:u}=(0,i.useContext)(at),p=(0,o.I0)(),{togglePlay:g}=(0,ht.n)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),y=(0,o.v9)((e=>e.platform.isDesktop)),{handleDropOnFolder:m,unpinConfirmationDialog:x}=mi(t,r),{renameFolder:h}=(0,pi.lh)(),f=m,v=[l>0||!n?K.ag.get("web-player.your-library-x.rows.folder.number-of-playlists",l):null,n>0?K.ag.get("web-player.your-library-x.rows.folder.number-of-folders",n):null].filter(gi.K).join(K.ag.getSeparator()),S=(0,i.useCallback)((function(){h(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}),[e,h]),w=(0,i.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return{openDeleteDialog:(0,i.useCallback)((()=>{p((0,yt.Q2)(r))}),[p,r]),togglePlay:y?g:void 0,menu:(0,b.jsx)(ai,{reference:{uri:r},name:a,canPin:e.canPin,isPinned:s,onRename:S}),subtitleText:v,onDropTargetDropOn:f,handleNavigate:w,dropOnFolderUnpinConfirmationDialog:x,isPlaying:d,isActive:c}}const hi=e=>{var t;let{libraryItem:r,RowVariantComponent:a,spec:l,nrValidItems:o,index:s}=e;const{uri:d,folderDepth:c,name:u,type:p,isFlattened:g,pinned:y,canReorder:m}=r,{openDeleteDialog:x,togglePlay:h,menu:f,subtitleText:v,onDropTargetDropOn:S,handleNavigate:w,dropOnFolderUnpinConfirmationDialog:P,isPlaying:C,isActive:T}=bi(r,l),[D,I]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,i.useContext)(he);return[(0,i.useMemo)((()=>t(e)),[t,e]),(0,i.useCallback)((t=>{r(e,t)}),[r,e])]}(d),R=(0,_.$P)(),j=(0,i.useCallback)((()=>{I(!0),R.logInteraction(l.yourLibraryItemFactory().dragUiReveal())}),[R,I,l]),A=(0,i.useCallback)((e=>{e.stopPropagation()}),[]),L=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),I(!D),D?R.logInteraction(l.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):R.logInteraction(l.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())}),[I,D,R,l]),N=(0,i.useCallback)((e=>{"ArrowLeft"===e.key?I(!1):"ArrowRight"===e.key&&I(!0)}),[I]),O=!g&&(0,b.jsx)(zr.o,{"data-skip-in-keyboard-nav":!0,"aria-label":D?K.ag.get("web-player.your-library-x.collapse-folder"):K.ag.get("web-player.your-library-x.expand-folder"),iconOnly:Gr.i,size:"small",condensedAll:!0,onClick:L,onDoubleClick:A,tabIndex:-1,className:n()(Te,De,{[Be]:!D})}),{animateState:F,animateClassName:k}=ui({uri:d}),E=(0,b.jsx)(Ir,{title:u,type:p,animateState:F,animateClassName:k});return(0,b.jsxs)(b.Fragment,{children:[P,(0,b.jsx)(Nr,{onKeyDown:N,RowVariantComponent:a,uri:d,to:`/folder/${(null===(t=(0,wt.EC)(d))||void 0===t?void 0:t.id)??""}`,handleNavigate:w,folderDepth:c,cover:E,name:u,subtitle:v,alt:u,dragLabel:u,menu:f,canReorder:m,allowedDropTargetDropOnMimeTypes:xi,onDropTargetDropOn:S,onLongDragOver:j,togglePlay:h,openDeleteDialog:x,addedAt:r.addedAt,lastPlayedAt:r.lastPlayedAt,isPinned:y,shouldShowType:!1,type:p,isPlaying:C,isActive:T,expandFolderButton:O,spec:l,nrValidItems:o,index:s})]})},fi=e=>{var t;let{libraryItem:r,spec:i,index:a}=e;const{uri:n,name:l,type:o,pinned:s,canReorder:d}=r,{togglePlay:c,menu:u,subtitleText:p,onDropTargetDropOn:g,handleNavigate:y,openDeleteDialog:m,isPlaying:x,isActive:h}=bi(r,i),{animateState:f,animateClassName:v}=ui({uri:n}),S=(0,b.jsx)(Rr,{title:l,type:o,uri:n,togglePlay:c,spec:i,isActive:h,isPlaying:x});return(0,b.jsx)(hr,{uri:n,to:`/folder/${(null===(t=(0,wt.EC)(n))||void 0===t?void 0:t.id)??""}`,handleNavigate:y,cover:S,name:l,subtitle:p,menu:u,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:xi,onLongDragOver:y,onDropTargetDropOn:g,togglePlay:c,isPinned:s,shouldShowType:!1,type:o,openDeleteDialog:m,isPlaying:x,isActive:h,spec:i,index:a,animateState:f,animateClassName:v})},vi=i.memo((function(e){let{uri:t,canPin:r,isPinned:i}=e;const{spec:a}=(0,m.T)(t);return(0,b.jsx)(g.JL,{value:"generic",children:(0,b.jsx)(p.v,{children:r!==y.TL.NO&&(0,b.jsx)(Xr.X,{uri:t,canPin:r,isPinned:i,type:I.p.PLAYLIST,spec:a})})})}));var Si=r(87350);const wi=[Yt.RN.TRACKS,Yt.RN.LOCAL_TRACKS];function Pi(e){const{numberOfSongs:t}=e,r="spotify:collection:tracks",{user:a}=(0,o.v9)(Si.Gg),n=(0,wt.wG)(null==a?void 0:a.id).toURI(),l=n,s=n,{togglePlay:d}=(0,ht.n)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),c=(0,i.useContext)(D.H),{isPlaying:u,isActive:p}=(0,ft.cR)(l),g=(0,i.useCallback)((e=>{const{[Yt.RN.TRACKS]:t=[],[Yt.RN.LOCAL_TRACKS]:r=[]}=e,i=[...t,...r];null!=i&&i.length&&(null==c||c.add({uris:i}))}),[c]);return{isPlaying:u,isActive:p,togglePlay:d,menu:(0,b.jsx)(vi,{uri:r,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,b.jsx)(xt.$,{uri:s,size:"xsmall",className:Nt.Z.icon,as:"span"}),subtitleText:(0,b.jsx)(b.Fragment,{children:K.ag.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:g,playbackUri:l,uri:r}}const Ci=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{images:o,name:s,type:d,pinned:c,addedAt:u,lastPlayedAt:p,color:g}=t,{isPlaying:y,isActive:m,togglePlay:x,menu:h,subtitleText:f,onDropTargetDropOn:v,playbackUri:S,uri:w,downloadButton:P}=Pi(t),{animateState:C,animateClassName:T}=ui({uri:"liked-songs"}),D=(0,b.jsx)(Ir,{title:s,type:d,images:o,color:g,animateState:C,animateClassName:T});return(0,b.jsx)(Nr,{RowVariantComponent:i,uri:w,cover:D,name:s,subtitle:f,alt:s,dragLabel:s,menu:h,allowedDropTargetDropOnMimeTypes:wi,onDropTargetDropOn:v,togglePlay:x,addedAt:u,lastPlayedAt:p,isPlaying:y,isActive:m,isPinned:c,shouldShowType:r,type:d,playbackUri:S,downloadButton:P,spec:a,nrValidItems:n,index:l})},Ti=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{images:n,name:l,type:o,pinned:s,color:d}=t,{togglePlay:c,menu:u,subtitleText:p,onDropTargetDropOn:g,playbackUri:y,uri:m,downloadButton:x,isPlaying:h,isActive:f}=Pi(t),{animateState:v,animateClassName:S}=ui({uri:"liked-songs"}),w=(0,b.jsx)(Rr,{title:l,type:o,images:n,uri:y,togglePlay:c,color:d,spec:i,isActive:f,isPlaying:h});return(0,b.jsx)(hr,{uri:m,name:l,subtitle:p,menu:u,dragLabel:l,allowedDropTargetDropOnMimeTypes:wi,onDropTargetDropOn:g,cover:w,togglePlay:c,isPinned:s,shouldShowType:r,type:o,playbackUri:y,downloadButton:x,isPlaying:h,isActive:f,spec:i,index:a,animateState:v,animateClassName:S})};var Di=r(46966),Ii=r(46206),Ri=r(62675),ji=r(58959);function Ai(e){const{numberOfFiles:t}=e,r=ji.b,i=(0,Ri.gB)().uri,{isPlaying:a,isActive:n}=(0,ft.cR)(r);return{playbackUri:r,uri:i,isPlaying:a,isActive:n,menu:(0,b.jsx)(vi,{uri:i,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,b.jsx)(Di.E,{size:"xsmall",className:Nt.Z.icon,semanticColor:"textBrightAccent"}),subtitleText:K.ag.get("web-player.your-library-x.rows.local-files.subtitle",t)}}const Li=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{name:o,addedAt:s,lastPlayedAt:d,type:c,pinned:u}=t,{playbackUri:p,uri:g,isPlaying:y,menu:m,subtitleText:x,downloadButton:h,isActive:f}=Ai(t),v=(0,b.jsx)("div",{className:Ie,children:(0,b.jsx)(Ii.S,{iconSize:24,title:o})});return(0,b.jsx)(Nr,{RowVariantComponent:i,uri:g,name:o,subtitle:x,alt:o,dragLabel:o,menu:m,addedAt:s,lastPlayedAt:d,isPinned:u,isPlaying:y,isActive:f,shouldShowType:r,playbackUri:p,downloadButton:h,cover:v,type:c,spec:a,nrValidItems:n,index:l})},Ni=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{name:n,images:l,type:o,pinned:s}=t,{playbackUri:d,uri:u,menu:p,downloadButton:g,subtitleText:y,isPlaying:m,isActive:x}=Ai(t),h=(0,c.W6)(It.uH),f=(0,b.jsx)("div",{className:yr,children:(0,b.jsx)(fr.x,{images:l,FallbackComponent:e=>(0,b.jsx)(Ii.S,{size:"xxlarge",className:h?gr:"",...e})})});return(0,b.jsx)(hr,{uri:u,name:n,subtitle:y,menu:p,cover:f,type:o,playbackUri:d,downloadButton:g,isPinned:s,shouldShowType:r,isPlaying:m,isActive:x,spec:i,index:a})};var Oi=r(61815);const Fi=e=>{let{index:t,type:r}=e;const i=(0,c.W6)(It.uH),a=cr();return(0,b.jsx)(Oi.id,{columnIndex:0,children:(0,b.jsx)(vt.Z,{className:n()(ur,{[pr]:a}),media:(0,b.jsx)(fr.x,{images:[],FallbackComponent:()=>(0,b.jsx)(wr.t,{type:r,size:"xxlarge",className:i?gr:"",semanticColor:"textSubdued"}),isCircular:r===I.p.ARTIST}),variant:"naked",id:t,title:"",padding:a?St.hM:St.nu})})};var ki=r(35360),Ei=r(2376),Bi=r(61083),Ui=r(6549),Mi=r(2017),Vi=r(79182),_i=r(74844),Wi=r(75449);const Hi=i.memo((function(e){var t,r,i;let{reference:a,isPublished:n,canPin:l=y.TL.NO,isPinned:o=!1,useDialogForUnfollow:s=!1,isInLibrary:d}=e;const{uri:c}=a,u=(0,pi.ET)(c),h=!(null==u||null===(t=u.permissions)||void 0===t||!t.isPrivate),f=(0,Bi.p)(c)??(null==u?void 0:u.isPublished)??n,{spec:v}=(0,m.T)(c),S=null==u?void 0:u.hasSpotifyAudiobooks;return u&&(0,b.jsx)(g.JL,{value:"playlist",children:(0,b.jsxs)(p.v,{children:[!S&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.x9,{spec:v,uris:[c]}),(0,b.jsx)(Vi.U,{uri:c,spec:v})]}),!h&&(0,b.jsx)(x.gh,{spec:v,divider:u.isOwnedBySelf?"after":"both",uri:c,isPublished:f}),u.isOwnedBySelf&&(0,b.jsx)(x.fc,{spec:v,uri:c,name:u.name,description:u.description,image:u.images[0]}),!u.isOwnedBySelf&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.tz,{spec:v,uri:c}),(0,b.jsx)(Ei.Zb,{uri:c,useDialog:s,initialState:d})]}),u.isOwnedBySelf&&(0,b.jsx)(x.R2,{spec:v,uri:c}),!S&&(0,b.jsx)(x.bs,{spec:v,uri:c}),(0,b.jsx)(x.uj,{position:{after:a},divider:"before",spec:v}),(0,b.jsx)(x.K_,{position:{after:a},spec:v}),(null===(r=u.permissions)||void 0===r?void 0:r.canAdministratePermissions)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.DY,{spec:v,divider:"before",uri:c,isPrivate:h}),!S&&(0,b.jsx)(_i.z,{uri:c,spec:v})]}),(null===(i=u.permissions)||void 0===i?void 0:i.canCancelMembership)&&(0,b.jsx)(Wi.H,{spec:v,divider:"before",uri:c}),(0,b.jsx)(x.Iy,{spec:v,uri:c}),(0,b.jsx)($r.I,{uriToBeAdded:c,isInLibrary:!0,spec:v}),!S&&(0,b.jsx)(Ui.p,{spec:v,uris:[c],isPlaylist:!0}),(l!==y.TL.NO||o)&&(0,b.jsx)(Xr.X,{uri:c,canPin:l,isPinned:o,type:I.p.PLAYLIST,spec:v}),(u.isOwnedBySelf||!h)&&(0,b.jsxs)(Mi.q,{divider:"before",children:[(0,b.jsx)(x.Jx,{spec:v,uri:c,displayText:K.ag.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:h}),(0,b.jsx)(x.W2,{spec:v,uri:c,type:I.p.PLAYLIST})]})]})})})),Ki=i.memo((function(e){let{reference:t,canPin:r=y.TL.NO,isPinned:i=!1}=e;const{uri:a}=t,{spec:n}=(0,m.T)(a);return(0,b.jsx)(g.JL,{value:"playlist",children:(0,b.jsxs)(p.v,{children:[(0,b.jsx)(x.uj,{position:{after:t},divider:"before",spec:n}),(0,b.jsx)(x.K_,{position:{after:t},spec:n}),r!==y.TL.NO&&(0,b.jsx)(Xr.X,{uri:a,canPin:r,isPinned:i,type:I.p.PLAYLIST,spec:n})]})})}));var Yi=r(42738);const zi=()=>(0,i.useContext)(Yi.Z).getCapabilities();function Gi(e,t){var r;const{uri:a,isLoading:n,owner:l,pinned:s}=e,d=(0,i.useContext)(pi.ZF),{filter:c}=(0,i.useContext)(rt.fo),{canAddAudiobooks:u}=zi(),g=[Yt.RN.TRACKS,Yt.RN.LOCAL_TRACKS,Yt.RN.ALBUMS,Yt.RN.EPISODES],y=u?[Yt.RN.AUDIOBOOKS]:[];(0,i.useEffect)((()=>{n&&d.resync(a)}),[d,a,n]);const{togglePlay:m}=(0,ht.n)({uri:a},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),{isPlaying:x,isActive:h}=(0,ft.cR)(a),f=(0,o.I0)(),v=(0,_.$P)();let S,w=[];const P=(0,i.useCallback)((async e=>{const{[Yt.RN.TRACKS]:r=[],[Yt.RN.LOCAL_TRACKS]:i=[],[Yt.RN.ALBUMS]:n=[],[Yt.RN.EPISODES]:l=[],[Yt.RN.AUDIOBOOKS]:o=[]}=e,s=[...r,...i,...n,...l,...o];f((0,ki.jV)(a,s)),v.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:s.at(0)??"",playlist:a}))}),[f,v,t,a]);e.canAddTo&&(w=e.isEmpty?[...y,...g]:e.isBooklist?y:g,S=P);const C=(0,i.useCallback)((()=>{f((0,yt.p_)(a))}),[f,a]),T=(0,lt.xn)(a),D=!(e.name||null!==(r=e.owner)&&void 0!==r&&r.uri);let I;I=T?(0,b.jsx)(Ki,{reference:e,canPin:e.canPin,isPinned:s}):D?(0,b.jsx)(p.v,{children:(0,b.jsx)(Ei.Zb,{uri:a,initialState:!0})}):(0,b.jsx)(Hi,{reference:e,canPin:e.canPin,isPinned:s,useDialogForUnfollow:!0,isInLibrary:!0});const R=(0,b.jsx)(xt.$,{uri:a,size:"xsmall",className:Nt.Z.icon,as:"span"}),j=(0,lt.xn)(a)?(0,b.jsx)(b.Fragment,{children:K.ag.get("ylx.clicktoplay")}):(l.uri,(0,b.jsx)(bt.o,{searchWords:[c.trim()],textToHighlight:l.name}));return{openDeleteDialog:C,togglePlay:e.isBooklist?void 0:m,isPlaying:x,isActive:h,menu:I,downloadButton:R,subtitleText:j,allowedDropTargetDropOnMimeTypes:w,onDropTargetDropOn:S}}const $i=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,folderDepth:d,name:c,type:u,pinned:p,addedAt:g,lastPlayedAt:y,color:m,canReorder:x}=t,{openDeleteDialog:h,togglePlay:f,isPlaying:v,isActive:S,menu:w,downloadButton:P,subtitleText:C,allowedDropTargetDropOnMimeTypes:T,onDropTargetDropOn:D}=Gi(t,a),{animateState:I,animateClassName:R}=ui({uri:o}),j=(0,b.jsx)(Ir,{title:c,type:u,images:s,color:m,animateState:I,animateClassName:R});return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(Nr,{RowVariantComponent:i,uri:o,folderDepth:d,cover:j,name:c,subtitle:C,alt:c,dragLabel:c,menu:w,canReorder:x,allowedDropTargetDropOnMimeTypes:T,onDropTargetDropOn:D,togglePlay:f,openDeleteDialog:h,addedAt:g,lastPlayedAt:y,isPlaying:v,isActive:S,isPinned:p,shouldShowType:r,type:u,downloadButton:P,spec:a,playInsteadOfNavigating:(0,lt.xn)(o),nrValidItems:n,index:l})})},Xi=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c,canReorder:u}=t,{togglePlay:p,menu:g,downloadButton:y,subtitleText:m,onDropTargetDropOn:x,allowedDropTargetDropOnMimeTypes:h,openDeleteDialog:f,isPlaying:v,isActive:S}=Gi(t,i),{animateState:w,animateClassName:P}=ui({uri:n}),C=(0,b.jsx)(Rr,{title:o,type:s,images:l,uri:n,togglePlay:p,color:c,spec:i,isActive:S,isPlaying:v});return(0,b.jsx)(hr,{uri:n,name:o,subtitle:m,menu:g,dragLabel:o,canReorder:u,allowedDropTargetDropOnMimeTypes:h,onDropTargetDropOn:x,cover:C,togglePlay:p,isPinned:d,shouldShowType:r,type:s,downloadButton:y,openDeleteDialog:f,isPlaying:v,isActive:S,spec:i,playInsteadOfNavigating:(0,lt.xn)(n),index:a,animateState:w,animateClassName:P})};var Zi=r(75463);function Ji(e){const{uri:t,publisher:r}=e,{filter:a}=(0,i.useContext)(rt.fo),n=(0,o.I0)(),{togglePlay:l}=(0,ht.n)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}),{isPlaying:s,isActive:d}=(0,ft.cR)(t);return{isPlaying:s,isActive:d,openDeleteDialog:(0,i.useCallback)((()=>{n((0,yt.YU)(t))}),[n,t]),togglePlay:l,menu:(0,b.jsx)(Zi.M,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,b.jsx)(xt.$,{uri:t,size:"xsmall",className:Nt.Z.icon,as:"span"}),subtitleText:(0,b.jsx)(bt.o,{autoEscape:!0,searchWords:[a.trim()],textToHighlight:r})}}const qi=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,type:c,addedAt:u,lastPlayedAt:p,pinned:g,color:y}=t,{isPlaying:m,isActive:x,openDeleteDialog:h,togglePlay:f,menu:v,downloadButton:S,subtitleText:w}=Ji(t),P=(0,b.jsx)(Ir,{title:d,type:c,images:s,color:y});return(0,b.jsx)(Nr,{RowVariantComponent:i,uri:o,cover:P,name:d,subtitle:w,alt:d,dragLabel:d,menu:v,togglePlay:f,openDeleteDialog:h,addedAt:u,lastPlayedAt:p,isPlaying:m,isActive:x,isPinned:g,shouldShowType:r,type:c,downloadButton:S,spec:a,nrValidItems:n,index:l})},Qi=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c}=t,{togglePlay:u,menu:p,downloadButton:g,subtitleText:y,openDeleteDialog:m,isPlaying:x,isActive:h}=Ji(t),f=(0,b.jsx)(Rr,{title:o,type:s,images:l,uri:n,togglePlay:u,color:c,spec:i,isActive:h,isPlaying:x});return(0,b.jsx)(hr,{uri:n,name:o,subtitle:y,menu:p,dragLabel:o,cover:f,togglePlay:u,isPinned:d,shouldShowType:r,type:s,downloadButton:g,openDeleteDialog:m,isPlaying:x,isActive:h,spec:i,index:a})},ea=[Yt.RN.EPISODES];function ta(e){const{numberOfDownloadedEpisodes:t}=e,{user:r}=(0,o.v9)(Si.Gg),a=(0,wt.wG)(null==r?void 0:r.id,"your-episodes").toURI(),n=y.pw,{togglePlay:l}=(0,ht.n)({uri:a},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),{isPlaying:s,isActive:d}=(0,ft.cR)(a),c=(0,i.useContext)(D.H),u=(0,i.useCallback)((e=>{const{[Yt.RN.EPISODES]:t=[]}=e;null!=t&&t.length&&(null==c||c.add({uris:t}))}),[c]);return{isPlaying:s,isActive:d,togglePlay:l,menu:(0,b.jsx)(vi,{uri:n,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,b.jsx)(Di.E,{size:"xsmall",className:Nt.Z.icon,semanticColor:"textBrightAccent"}):null,subtitleText:K.ag.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:u,playbackUri:a,uri:n}}const ra=e=>{let{libraryItem:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n}=e;const{images:l,name:o,type:s,pinned:d,lastPlayedAt:c,addedAt:u,color:p}=t,{isPlaying:g,isActive:y,togglePlay:m,menu:x,downloadButton:h,subtitleText:f,onDropTargetDropOn:v,playbackUri:S,uri:w}=ta(t),P=(0,b.jsx)(Ir,{title:o,type:s,images:l,color:p});return(0,b.jsx)(Nr,{RowVariantComponent:r,uri:w,cover:P,name:o,subtitle:f,alt:o,dragLabel:o,menu:x,allowedDropTargetDropOnMimeTypes:ea,onDropTargetDropOn:v,togglePlay:m,addedAt:u,lastPlayedAt:c,isPlaying:g,isActive:y,isPinned:d,shouldShowType:!1,type:s,downloadButton:h,playbackUri:S,spec:i,nrValidItems:a,index:n})},ia=e=>{let{libraryItem:t,spec:r,index:i}=e;const{images:a,name:n,type:l,pinned:o,color:s}=t,{togglePlay:d,menu:c,downloadButton:u,subtitleText:p,onDropTargetDropOn:g,playbackUri:y,uri:m,isPlaying:x,isActive:h}=ta(t),f=(0,b.jsx)(Rr,{title:n,type:l,images:a,uri:m,togglePlay:d,color:s,spec:r,isActive:h,isPlaying:x});return(0,b.jsx)(hr,{uri:m,name:n,subtitle:p,menu:c,dragLabel:n,allowedDropTargetDropOnMimeTypes:ea,onDropTargetDropOn:g,cover:f,togglePlay:d,playbackUri:y,downloadButton:u,isPinned:o,shouldShowType:!1,type:l,isPlaying:x,isActive:h,spec:r,index:i})};var aa=r(17676);function na(){const e=(0,c.W6)(aa.uH2),[t,r]=(0,fe.z)("ylx-grid-scale",1);return{gridScale:e?t:1,setGridScale:r}}const la=250,oa=(0,pt.y)(I.p),sa=(0,i.memo)((function(e){let{item:t,primaryFilter:r,spec:i,index:a}=e;const n={shouldShowType:!(0,lt.xn)(t.uri)&&lr(t.type)!==r,spec:i,index:a};switch(t.type){case I.p.FOLDER:return(0,b.jsx)(fi,{libraryItem:t,...n});case I.p.ALBUM:return(0,b.jsx)(kr,{libraryItem:t,...n});case I.p.ARTIST:return(0,b.jsx)(Mr,{libraryItem:t,...n});case I.p.AUDIOBOOK:return(0,b.jsx)(Yr,{libraryItem:t,...n});case I.p.SHOW:return(0,b.jsx)(Qi,{libraryItem:t,...n});case I.p.PLAYLIST:return(0,b.jsx)(Xi,{libraryItem:t,...n});case I.p.LIKED_SONGS:return(0,b.jsx)(Ti,{libraryItem:t,...n});case I.p.YOUR_EPISODES:return(0,b.jsx)(ia,{libraryItem:t,...n});case I.p.LOCAL_FILES:return(0,b.jsx)(Ni,{libraryItem:t,...n});default:(0,gt.U)(t)}})),da=e=>{let{getItems:t,scrollNodeRef:r,primaryFilter:a,nrValidItems:n,spec:l}=e;const{gridScale:o}=na(),s=(0,st.Sf)(st.Qd.NEW_CARDS,o),d=(0,i.useRef)({}),u=function(){const{gridScale:e}=na();return!!(0,c.W6)(aa.uH2)&&e<.8}(),p=(0,i.useCallback)((e=>(0,b.jsx)(Fi,{index:e,type:oa(a)?a:void 0},e)),[a]),g=(0,i.useCallback)(((e,r)=>t(e,r).map(((t,r)=>t?(0,b.jsx)(sa,{item:t,spec:l,primaryFilter:a,index:e+r},t.uri):p(`${e+r}`)))),[t,a,p,l]),y=(0,i.useCallback)(((e,t)=>{d.current={numColumns:e,rowHeight:t}}),[]);return(0,b.jsx)(ot.q,{config:s,children:(0,b.jsx)(dr,{isCompact:u,children:(0,b.jsx)(Pt.l,{firstInteractiveIsWrapper:!0,"aria-label":K.ag.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(n/(d.current.numColumns??1)),"aria-colcount":d.current.numColumns,children:(0,b.jsx)(ut,{renderItems:g,nrItems:n,estimatedItemMaxHeight:la,scrollNodeRef:r,onGridResize:y})})})})};var ca=r(12434),ua=r(94086);const pa="UvXqRORKQr_N3jlgGTcS",ga="U2UDsqt0mNj27p4bm85K",ya="RAWO6AczuDMOTI0qAc0a",ma="j8iKBDzqTDtnDv4XbmrK",xa="BhKGkKPprp2wm9bvfRKG",ba="prGqQr33U0mG14TJ5V8a",ha="OMCDc2F7g_AufJAtaKfL",fa="ha4xXmMVP7gCvKZh9Ipf",va="TxO7Ee8iwqBpkgznKHsd",Sa="O2Vp_sNHMLHUcgMPVnOA",wa="WYU7SXdABSulyirnmIYb",Pa="DF8qJeKP7CRNb13tJeJg",Ca=e=>{let{folderUri:t,dropTargetClassName:r,spec:a}=e;const{isCollapsed:l,ylxSidebarState:o,setYlxSidebarState:s,lastUncollapsedYlxSidebarState:d}=(0,C.UF)(),c=(0,_.$P)(),u=(0,i.useCallback)((()=>{const e=o===C.c$.COLLAPSED?d:C.c$.COLLAPSED;s(e),c.logInteraction(a.hitToggleState({stateBeforeToggle:null!==o?C.c$[o].toLowerCase():"",stateAfterToggle:C.c$[e].toLowerCase()}))}),[o,d,s,c,a]),p=l?ca.$:ua.n;return(0,b.jsx)(Y.ws,{label:l?K.ag.get("web-player.your-library-x.expand-your-library"):K.ag.get("web-player.your-library-x.collapse-your-library"),placement:l?"right":void 0,children:(0,b.jsx)(zr.o,{"aria-label":l?K.ag.get("web-player.your-library-x.expand-your-library"):K.ag.get("web-player.your-library-x.collapse-your-library"),onClick:u,className:n()(ya,ha,r),condensed:!0,iconLeading:t||l?void 0:p,iconOnly:t||l?p:void 0,children:!t&&!l&&K.ag.get("web-player.your-library-x.your-library")})})};var Ta=r(91942),Da=r(28619);const Ia=e=>{let{dropTargetClassName:t,spec:r}=e;const{ylxSidebarState:i,setYlxSidebarState:a}=(0,C.UF)(),l=i===C.c$.DEFAULT,o=(0,_.$P)();return(0,b.jsx)(Y.ws,{label:l?K.ag.get("web-player.your-library-x.show-more"):K.ag.get("web-player.your-library-x.show-less"),children:(0,b.jsx)(zr.o,{className:n()(ha,va,t),iconOnly:l?Ta.E:Da.D,"aria-label":l?K.ag.get("web-player.your-library-x.enlarge-your-library"):K.ag.get("web-player.your-library-x.reduce-your-library"),onClick:()=>{a(l?C.c$.EXPANDED:C.c$.DEFAULT),o.logInteraction(r.hitToggleState({stateBeforeToggle:l?"default":"expanded",stateAfterToggle:l?"expanded":"default"}))},size:"small"})})};var Ra=r(73618);const ja=e=>{let{folderMenu:t,folderName:r,dropTargetClassName:i}=e;return(0,b.jsx)(R.yj,{menu:t,children:(0,b.jsx)("span",{children:(0,b.jsx)(Y.ws,{label:K.ag.get("more.label.context",r),children:(0,b.jsx)(zr.o,{className:n()(ha,va,i),iconOnly:Ra.N,"aria-haspopup":"menu","aria-label":K.ag.get("more.label.context",r),size:"small"})})})})};var Aa=r(41423),La=r(24936),Na=r(22326);const Oa=e=>{let{dropTargetClassName:t,spec:r}=e;const{isGridView:i,setItemsView:a}=(0,Na.a)(),l=(0,_.$P)();return(0,b.jsx)(Y.ws,{label:i?K.ag.get("web-player.your-library-x.list-view"):K.ag.get("web-player.your-library-x.grid-view"),children:(0,b.jsx)(zr.o,{className:n()(ha,t),iconOnly:i?Aa.d:La.z,"aria-label":i?K.ag.get("web-player.your-library-x.list-view"):K.ag.get("web-player.your-library-x.grid-view"),onClick:()=>{a(i?Na.i.LIST:Na.i.GRID),l.logInteraction(r.hitToggleState({stateBeforeToggle:i?"grid":"list",stateAfterToggle:i?"list":"grid"}))},size:"small"})})};var Fa=r(27376),ka=r(99254),Ea=r(7436),Ba=r(50540);const Ua=function(e){let{folderUri:t,spec:r}=e;const{createPlaylist:i}=(0,ee.K)(),{createFolder:a}=(0,pi.lh)(),n=(0,_.$P)(),l=(0,Ba.g)(),o=t?{after:{uri:t}}:{before:"start"};return(0,b.jsxs)(p.v,{children:[(0,b.jsx)(qr.s,{onClick:()=>{i(void 0,o),n.logInteraction(r.createPlaylistOptionFactory().hitCreatePlaylist())},role:"menuitem",leadingIcon:(0,b.jsx)(ka.h,{size:"small"}),children:K.ag.get("web-player.your-library-x.create.create-a-new-playlist")}),!l&&(0,b.jsx)(qr.s,{onClick:()=>{a(K.ag.get("web-player.your-library-x.default_folder_name"),o),n.logInteraction(r.createFolderOptionFactory().hitCreateFolder({uri:""}))},role:"menuitem",leadingIcon:(0,b.jsx)(Ea.P,{size:"small"}),children:K.ag.get("web-player.your-library-x.create.create-a-playlist-folder")})]})},Ma=e=>{let{className:t="",folderUri:r,tooltipPlacement:a,spec:l}=e;const o=K.ag.get("web-player.your-library-x.create.button-label"),s=(0,_.$P)(),{canAddAudiobooks:d}=zi(),{createPlaylistFromAlbum:c,createPlaylistFromTracks:u,createPlaylistFromPlaylist:p}=(0,ee.K)(),{className:g,dropPosition:y,...m}=(0,ze.WB)({allowedMimeTypesByDropPosition:{[ze.Pw.ON]:[Yt.RN.TRACKS,Yt.RN.EPISODES,Yt.RN.ALBUMS,Yt.RN.PLAYLISTS_V2,...d?[Yt.RN.AUDIOBOOKS]:[]]},onDrop:(0,i.useCallback)((e=>{const{[Yt.RN.TRACKS]:t=[],[Yt.RN.LOCAL_TRACKS]:i=[],[Yt.RN.EPISODES]:a=[],[Yt.RN.AUDIOBOOKS]:n=[],[Yt.RN.ALBUMS]:l=[],[Yt.RN.PLAYLISTS_V2]:o=[]}=e,s=r?{after:{uri:r}}:{before:"start"},d=[...t,...i,...a];n.length>0?u(n,s):d.length?u(d,s):l.length>0?c(l[0],s):o.length>0&&p(o[0],s)}),[c,p,u,r])});return(0,b.jsx)(R.xV,{renderInline:!0,menu:(0,b.jsx)(Ua,{folderUri:r,spec:l.createMenuFactory()}),preventScrollingWhileOpen:!1,children:(e,r,i)=>(0,b.jsx)(Y.ws,{label:o,placement:a,children:(0,b.jsx)(zr.o,{ref:i,iconOnly:Fa.S,className:n()(t,g,{[$e]:y===ze.Pw.ON}),"aria-label":o,onClick:e=>{r(e),s.logInteraction(l.hitUiReveal())},size:"small",...m})})})};var Va=r(92075);const _a=e=>{let{handleNavigateBack:t,parentFolderUri:r,spec:i}=e;const{handleDropBeforeOrAfterRootlistItem:a}=tr({dropTargetUri:r,spec:i}),{dropPosition:l,className:o,...s}=(0,ze.WB)({allowedMimeTypesByDropPosition:{[ze.Pw.ON]:Dl},onDrop:async e=>{a(e,ze.Pw.BEFORE)},onLongDragOver:t});return(0,b.jsx)(Y.ws,{label:K.ag.get("web-player.your-library-x.navigate-back-folder"),children:(0,b.jsx)(zr.o,{className:n()(ha,fa,o,{[$e]:l===ze.Pw.ON}),"aria-label":K.ag.get("web-player.your-library-x.navigate-back-folder"),onClick:t,iconOnly:Va.e,size:"small",...s})})},Wa=(0,i.forwardRef)((function(e,t){let{folderUri:r,folderName:a,folderMenu:l,onRename:s,spec:d,className:c}=e;const{isActive:u}=(0,ft.cR)(r??"not-a-folder"),p=(0,o.I0)(),g=(0,_.$P)(),y=(0,i.useCallback)((()=>{p((0,yt.UX)(a,s)),g.logInteraction(d.hitRenameFolder({uri:r}))}),[p,a,r,g,s,d]);return(0,b.jsx)(Y.ws,{label:a,showDelay:Y.gQ,children:(0,b.jsx)("div",{className:n()(wa,c),children:(0,b.jsx)(R._P,{menu:l,children:(0,b.jsx)(zr.o,{"aria-label":a,onClick:y,size:"small",condensed:!0,className:n()(ha),ref:t,children:(0,b.jsx)(W.x,{variant:"bodyMediumBold",semanticColor:u?"textBrightAccent":void 0,className:Pa,children:a})})})})})}));var Ha=r(74821),Ka=r(33103),Ya=r(26887);const za="_4JcTGCbNeqSDgdBfKdfy",Ga="wB8ig1vfWJiTattGsxKX",$a=()=>{const{syncing:e,percentage:t,currentItem:r,totalItems:a}=function(){const[e,t]=(0,i.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),r=Ka.X.UPDATE_TOTAL_PROGRESS,a=(0,i.useCallback)((e=>t(e.data.progress)),[]);return(0,Ya.z)(r,a),e}();return e?(0,b.jsxs)("div",{className:za,children:[(0,b.jsxs)("div",{className:Ga,children:[(0,b.jsx)(W.x,{variant:"bodySmallBold",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.download-progress-title")}),(0,b.jsx)(W.x,{variant:"bodySmallBold",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.download-progress-count-out-of-total",r,a)})]}),(0,b.jsx)(Ha.k,{value:t})]}):null};var Xa=r(42550);const Za=e=>{let{parentDropTargetClassName:t,isLibraryCompletelyEmpty:r,folderUri:a,folderName:l,spec:o}=e;const{isCollapsed:s,ylxSidebarState:u,canExpand:p}=(0,C.UF)(),{renameFolder:g}=(0,pi.lh)(),{popFolder:y}=(0,i.useContext)(at),m=(0,i.useCallback)((function(){a&&g({uri:a},arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}),[a,g]),x=(0,i.useCallback)((()=>{y()}),[y]),h=a?(0,b.jsx)(ai,{reference:{uri:a},name:l,onRename:m,onDeleteCallback:x}):null,{dropOriginIsYLX:f}=Qt(),v=!s&&a&&void 0!==l,S=(0,i.useRef)(null),w=(0,i.useRef)(null),P=(0,i.useRef)(null);!function(e,t,r){for(var a=arguments.length,n=new Array(a>3?a-3:0),l=3;l<a;l++)n[l-3]=arguments[l];const o=(0,d.jP)((()=>{if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";const{scrollWidth:r,offsetWidth:i}=t.current,a=r>i;e.current.style.display=a?"none":"block"}else e.current.style.display="block"}),[n]);(0,i.useLayoutEffect)(o,[o]),(0,Pr.y)({refOrElement:r,observeOnly:"width",onResize:o})}(P,(0,i.useMemo)((()=>({get current(){var e,t;return(null===(e=w.current)||void 0===e?void 0:e.firstElementChild)instanceof HTMLElement?null===(t=w.current)||void 0===t?void 0:t.firstElementChild:null}})),[]),S,l,v);const T=(0,c.W6)(aa.uH2),D=(0,Xa.o)(),I=!s||r&&s;return(0,b.jsxs)("header",{className:n()(pa,{[ga]:D,[Sa]:s}),ref:S,children:[!s&&(0,b.jsx)($a,{}),(0,b.jsxs)("div",{className:n()(ma,{[xa]:s}),children:[(0,b.jsxs)("div",{className:n()(ba,{[xa]:s}),children:[(0,b.jsx)(Ca,{folderUri:a,dropTargetClassName:t,spec:o.toggleCollapsedModeButtonFactory({identifier:""})}),a&&(0,b.jsx)(_a,{handleNavigateBack:x,parentFolderUri:a,spec:o.folderBackButtonFactory()}),v&&(0,b.jsx)(Wa,{folderUri:a,folderName:l,folderMenu:h,onRename:m,spec:o.folderTitleFactory(),className:f?t:void 0,ref:w},a)]}),I&&(0,b.jsx)("span",{ref:P,children:(0,b.jsx)(Ma,{className:n()(ha,va),folderUri:a,tooltipPlacement:s?"right":void 0,spec:o.createMenuButtonFactory()})}),a&&!s&&(0,b.jsx)(ja,{folderName:l,folderMenu:h,dropTargetClassName:t}),u===C.c$.EXPANDED&&!T&&(0,b.jsx)(Oa,{dropTargetClassName:t,spec:o.viewDensityToggleFactory({identifier:""})}),(u===C.c$.DEFAULT&&p||u===C.c$.EXPANDED)&&(0,b.jsx)(Ia,{dropTargetClassName:t,spec:o.toggleExpandedModeButtonFactory({identifier:""})})]})]})};var Ja=r(14373),qa=r(25331),Qa=r(77366);const en=e=>{let{date:t}=e;return(0,b.jsx)(W.x,{variant:"bodySmall",semanticColor:"textSubdued",className:Oe,children:t&&K.ag.formatRelativeDate(new Date(t),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})})},tn=e=>{const t=e.handleNavigate,r=(0,b.jsx)(Ht,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=e.expandFolderButton??(e.isPlaying&&(0,b.jsx)(Dt,{})),a=(0,b.jsx)(Ot,{leading:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(or.z,{pinned:e.isPinned}),e.downloadButton,e.lockedIcon]}),subtitle:(0,b.jsxs)(b.Fragment,{children:[e.shouldShowType&&nr(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),n=e.logRightClick,l=(0,b.jsx)(R._P,{menu:e.menu,onShow:n,children:(0,b.jsx)(Ct.Q,{uri:e.uri,trigger:Ct.x.OnMouseDown,children:(0,b.jsx)(qa.w,{className:Se,media:e.cover,title:r,subtitle:a,trailing:i,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:St.dl,onClick:e.onClick,hoverAnimationDuration:"0ms"})})});return(0,lt.xn)(e.uri)?(0,b.jsx)(lt.sg,{parentRef:e.parentRef,children:l}):l},rn=e=>{const t=e.handleNavigate,r=(0,b.jsx)(Ht,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=(0,b.jsx)(Ot,{leading:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(or.z,{pinned:e.isPinned}),e.downloadButton,e.lockedIcon]}),subtitle:(0,b.jsxs)(b.Fragment,{children:[e.shouldShowType&&nr(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),a=e.logRightClick;return(0,b.jsx)(jt,{...e,title:r,subtitleSlot:i,parentRef:e.parentRef,children:(0,b.jsxs)("div",{children:[(0,b.jsx)(R._P,{menu:e.menu,onShow:a,children:(0,b.jsx)(Ct.Q,{uri:e.uri,trigger:Ct.x.OnMouseDown,children:(0,b.jsx)(qa.w,{className:n()(Se,Pe),media:e.cover,id:e.uri,padding:St.dl,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,b.jsxs)("span",{className:Me,children:[r," ",i]})]})})},an=e=>{const t=(0,i.useRef)(null),r=e.logRightClick;return(0,b.jsx)(R._P,{menu:e.menu,onShow:r,children:(0,b.jsxs)("div",{className:Ne,ref:t,children:[(0,b.jsx)(tn,{...e,parentRef:t}),(0,b.jsx)(en,{date:e.addedAt}),(0,b.jsx)(en,{date:e.lastPlayedAt})]})})},nn=e=>{const t=e.handleNavigate,r=(0,b.jsxs)("div",{className:Ee,children:[(0,b.jsx)(Ht,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),e.shouldShowType&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Qa.o,{children:"•"}),(0,b.jsx)(Qa.o,{lineClamp:1,children:nr(e.type)})]}),(!e.shouldShowType&&e.type===I.p.ALBUM||(0,lt.xn)(e.uri))&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Qa.o,{children:"•"}),(0,b.jsx)(Ot,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,b.jsx)(or.z,{pinned:e.isPinned}),a=e.expandFolderButton??(e.isPlaying?(0,b.jsx)(Dt,{iconSize:"xsmall"}):(0,b.jsxs)(b.Fragment,{children:[e.downloadButton&&(0,b.jsx)("div",{className:Te,children:e.downloadButton}),e.lockedIcon&&(0,b.jsx)("div",{className:Te,children:e.lockedIcon})]})),l=e.logRightClick;return(0,b.jsx)(R._P,{menu:e.menu,onShow:l,children:(0,b.jsx)(Ct.Q,{uri:e.uri,trigger:Ct.x.OnMouseDown,children:(0,b.jsx)(qa.w,{className:n()(Se,we),title:r,leading:e.isPinned?i:void 0,trailing:a,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:`${St.hM} ${St.dl}`,onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})},ln=e=>{const t=e.logRightClick;return(0,b.jsx)(R._P,{menu:e.menu,onShow:t,children:(0,b.jsxs)("div",{className:Ne,children:[(0,b.jsx)(nn,{...e}),(0,b.jsx)(en,{date:e.addedAt}),(0,b.jsx)(en,{date:e.lastPlayedAt})]})})},on=e=>{let{height:t,isCompact:r,primaryFilter:i}=e;return(0,b.jsx)(jr.E,{className:n()({[Re]:!r,[Ae]:r,[je]:i===I.p.ARTIST}),style:{height:t}})};let sn=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.COMPACT=1]="COMPACT",e}({});const dn=()=>{const[e,t]=(0,fe.z)("library-row-mode",sn.DEFAULT),r=(0,C.QG)();return{libraryRowMode:e,setLibraryRowMode:t,rowHeight:e===sn.DEFAULT||r===C.c$.COLLAPSED?64:32}},cn=(0,i.memo)((function(e){let{item:t,primaryFilter:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const o={shouldShowType:!(0,lt.xn)(t.uri)&&lr(t.type)!==r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l};switch(t.type){case I.p.FOLDER:return(0,b.jsx)(hi,{libraryItem:t,...o});case I.p.ALBUM:return(0,b.jsx)(Fr,{libraryItem:t,...o});case I.p.ARTIST:return(0,b.jsx)(Ur,{libraryItem:t,...o});case I.p.AUDIOBOOK:return(0,b.jsx)(Kr,{libraryItem:t,...o});case I.p.SHOW:return(0,b.jsx)(qi,{libraryItem:t,...o});case I.p.PLAYLIST:return(0,b.jsx)($i,{libraryItem:t,...o});case I.p.LIKED_SONGS:return(0,b.jsx)(Ci,{libraryItem:t,...o});case I.p.YOUR_EPISODES:return(0,b.jsx)(ra,{libraryItem:t,...o});case I.p.LOCAL_FILES:return(0,b.jsx)(Li,{libraryItem:t,...o});default:(0,gt.U)(t)}})),un=e=>{let{getItems:t,scrollNodeRef:r,primaryFilter:a,nrValidItems:n,spec:l}=e;const o=(0,C.QG)(),{rowHeight:s,libraryRowMode:d}=dn(),c=d===sn.COMPACT,u=((e,t)=>{switch(e){case C.c$.COLLAPSED:return rn;case C.c$.DEFAULT:return t?nn:tn;case C.c$.EXPANDED:return t?ln:an;default:(0,gt.U)(e)}})(o,c),p=(0,i.useCallback)(((e,t)=>(0,b.jsx)(on,{height:e,isCompact:c,primaryFilter:a},t)),[c,a]),g=(0,i.useCallback)(((e,r)=>t(e,r).map(((t,r)=>t?(0,b.jsx)(cn,{item:t,spec:l,RowVariantComponent:u,primaryFilter:a,nrValidItems:n,index:e+r},t.uri):p(`${s}px`,`${e+r}`)))),[u,t,a,p,s,l,n]);return(0,b.jsx)(jr.A,{circular:!1,allowsMultipleInteractiveChildrenInItem:!0,"aria-label":K.ag.get("web-player.your-library-x.your-library"),children:(0,b.jsx)(Ja.V,{renderRows:g,nrRows:n,rowHeight:s,scrollNodeRef:r,renderPlaceholder:p})})};r(45205);var pn=r(67408),gn=r(10422),yn=r(7863),mn=r(91731);const xn="oszTUDKpXrPHyeWPs276",bn="cKHK53VIATgkMZYQDfol",hn="QMGfkFWtxrVkgNgFXDyw",fn=function(e){let{title:t,bodyText:r,children:a,root:n,show:l,childrenWrapperClassName:o,onHide:s}=e;const[d,u]=(0,i.useState)(null),[p,g]=(0,i.useState)(null),y=(0,c.W6)(aa.SwB),m=(0,i.useCallback)((()=>{s()}),[s]);(0,i.useEffect)((()=>{if(!l)return()=>{};const e=e=>{"Escape"===e.key&&m()};return window.addEventListener("keydown",e,!0),()=>{window.removeEventListener("keydown",e,!0)}}),[m,p,l]);const x=null==d?void 0:d.getBoundingClientRect();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{ref:u,className:o,children:a}),x&&l&&y&&(0,gn.createPortal)((0,b.jsx)("div",{className:xn,style:{top:(null==x?void 0:x.top)??0,left:(null==x?void 0:x.left)??0,width:null==x?void 0:x.width,height:null==x?void 0:x.height},ref:g,children:(0,b.jsxs)(mn.J,{popoverTitle:t,arrow:mn.J.left,colorSet:"announcement",className:bn,children:[(0,b.jsx)(W.x,{as:"p",dangerouslySetInnerHTML:{__html:r||""}}),(0,b.jsx)(zr.o,{size:"small",onClick:m,iconOnly:yn.k,"aria-label":K.ag.get("close"),className:hn})]})}),n||document.body)]})};var vn=r(51838),Sn=r(873),wn=r(93296),Pn=r(10356);const Cn=(e,t,r)=>{var i;const a=t.closest('li[role="presentation"]'),n=null===(i=e.parentElement)||void 0===i?void 0:i.querySelectorAll('ul[role="menu"]');if(r===Pn.N.UP){var l;const r=null==n?void 0:n[n.length-1],i=e.previousElementSibling,o=null==a||null===(l=a.previousElementSibling)||void 0===l?void 0:l.previousElementSibling;if(t instanceof HTMLUListElement||!o){if(i&&i instanceof HTMLUListElement)return i;if(r&&r instanceof HTMLUListElement)return r}}else{if(!(null==a?void 0:a.nextElementSibling)){const t=e.nextElementSibling;return t&&t instanceof HTMLUListElement?t:null==n?void 0:n[0]}}},Tn="RGofdOZulhL2p9MRA5hg",Dn="XZRX_ea9eNn4rOLpNGLp",In="rrv_gS6m_YN8K1nsq47l",Rn="mdvwJxMDgGjicVAZoBAw",jn="VrBEyt4oriSVpJPs1Dmw",An=[{itemsViewState:Na.i.LIST,compactModeState:sn.COMPACT},{itemsViewState:Na.i.LIST,compactModeState:sn.DEFAULT},{itemsViewState:Na.i.GRID,compactModeState:sn.DEFAULT}],Ln=(e,t,r)=>Math.round((e+t)*r)/r,Nn=e=>e.itemsViewState===Na.i.GRID?K.ag.get("web-player.your-library-x.sort-and-view-picker.grid"):e.compactModeState===sn.COMPACT?K.ag.get("web-player.your-library-x.sort-and-view-picker.compact"):K.ag.get("web-player.your-library-x.sort-and-view-picker.list"),On=e=>{let{selectedSort:t,selectedView:r,onSortSelect:a,onViewSelect:n,sortOptions:l,spec:o,id:s}=e;const d=(0,_.$P)(),c=(0,i.useCallback)((e=>e.itemsViewState===Na.i.GRID?(0,b.jsx)(La.z,{size:"small"}):e.compactModeState===sn.COMPACT?(0,b.jsx)(vn.d,{size:"small"}):(0,b.jsx)(Aa.d,{size:"small"})),[]),{gridScale:u,setGridScale:g}=na(),y=e=>{const t=Ln(e,.5,100);g(t),d.logInteraction(o.gridDensitySliderFactory().dragSetSliderPosition({position:t}))},m=(0,i.useCallback)((e=>{g(e),d.logInteraction(o.gridDensitySliderFactory().hitSetSliderPosition({position:e}))}),[d,g,o]),x=e=>{var t;return null==e||null===(t=e.parentElement)||void 0===t?void 0:t.querySelector("ul")},h=(0,i.useRef)(null);return(0,b.jsxs)("div",{id:s,className:In,ref:h,children:[(0,b.jsxs)(p.v,{"aria-label":K.ag.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:Cn,getInitialFocusElement:x,children:[(0,b.jsx)(Sn.F,{children:K.ag.get("web-player.your-library-x.sort_by")}),l.map(((e,r)=>{let{key:i,value:n}=e;return(0,b.jsx)(qr.s,{role:"menuitemradio","aria-checked":i===t.key,onClick:()=>a(i,r),divider:r===l.length-1?"after":void 0,autoClose:!1,children:n},i)}))]}),(0,b.jsxs)(p.v,{"aria-label":K.ag.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:Cn,getInitialFocusElement:x,children:[(0,b.jsx)(Sn.F,{children:K.ag.get("web-player.your-library-x.sort-and-view-picker.view-as")}),An.map((e=>{const t=Nn(e),i=e.itemsViewState===r.itemsViewState&&e.compactModeState===r.compactModeState;return(0,b.jsx)(qr.s,{role:"menuitemradio","aria-checked":i,onClick:()=>n(e),leadingIcon:c(e),autoClose:!1,children:t},t)})),Na.i.GRID===r.itemsViewState&&(0,b.jsx)("li",{role:"presentation",children:(0,b.jsx)("div",{role:"menuitem",className:jn,children:(0,b.jsx)(wn.ko,{labelText:K.ag.get("web-player.your-library-x.sort-and-view-picker.grid-density-label"),value:Ln(u,-.5,100),max:1,step:.1,onDragStart:y,onDragMove:y,onDragEnd:y,onStepBackward:()=>m(Ln(u,-.1,10)),onStepForward:()=>m(Ln(u,.1,10)),forceActiveStyles:!0,"data-roving-interactive":"1"})})})]})]})};var Fn=r(14218);const kn=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const[r,a]=(0,fe.z)("onboarding-dismissed:ylx-playlist-ordering",!1),[n,l]=(0,fe.z)("onboarding-dismissed-amount:ylx-playlist-ordering",0),[o,s]=(0,i.useState)(!1),{dropOriginIsYLX:d}=Qt(),{draggingIsInProgress:c}=(0,i.useContext)(qt.Di);(0,i.useEffect)((()=>{c&&d&&s(!0)}),[c,d]);const u=(0,i.useCallback)((()=>{a(!0),s(!1),l(n+1)}),[n,l,a]);return{show:e&&n<3&&(!r||o)&&(t||o),onHide:u}},En=e=>{let{sortOptions:t,selectedSort:r,onSortSelect:a,root:n,showReorderingOnboarding:l,scrollNodeRef:o,spec:s}=e;const{itemsView:d,setItemsView:c}=(0,Na.a)(),{libraryRowMode:u,setLibraryRowMode:p}=dn(),g=(0,_.$P)(),y=(0,i.useCallback)((()=>{g.logInteraction(s.hitUiReveal())}),[g,s]),m=(0,i.useMemo)((()=>d===Na.i.GRID?{itemsViewState:Na.i.GRID,compactModeState:sn.DEFAULT}:u===sn.COMPACT?{itemsViewState:Na.i.LIST,compactModeState:sn.COMPACT}:{itemsViewState:Na.i.LIST,compactModeState:sn.DEFAULT}),[d,u]),x=(0,i.useCallback)((e=>{let t=s.viewAsOptionFactory({identifier:"grid",position:3}).hitUiElementToggle();e.itemsViewState===Na.i.GRID?c(Na.i.GRID):e.compactModeState===sn.COMPACT?(t=s.viewAsOptionFactory({identifier:"compact",position:1}).hitUiElementToggle(),c(Na.i.LIST),p(sn.COMPACT)):(t=s.viewAsOptionFactory({identifier:"list",position:2}).hitUiElementToggle(),c(Na.i.LIST),p(sn.DEFAULT)),g.logInteraction(t)}),[g,c,p,s]),h=(0,i.useRef)(null),f=(0,Fn.J)(o,"0px 0px 0px 0px",.75,h),[v,S]=(0,fe.z)("sort-view-picker-onboarding-seen",!1),{show:w,onHide:P}=kn(v&&l,!f),C=(0,i.useCallback)((()=>{y(),S(!0)}),[y,S]);return(0,b.jsx)(fn,{bodyText:K.ag.get("web-player.your-library-x.sort-and-view-picker.view-onboarding"),root:n,show:!v&&!f,childrenWrapperClassName:Dn,onHide:()=>S(!0),children:(0,b.jsx)(fn,{bodyText:K.ag.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:n,show:w,childrenWrapperClassName:Dn,onHide:P,children:(0,b.jsx)(R.yj,{menu:(0,b.jsx)(On,{selectedSort:r,selectedView:{itemsViewState:m.itemsViewState??Na.i.LIST,compactModeState:m.compactModeState??sn.DEFAULT},sortOptions:t,onSortSelect:a,onViewSelect:x,spec:s,id:"sort-and-view-picker"}),placement:"bottom-end",children:(0,b.jsx)(zr.o,{"aria-label":K.ag.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",r.value,Nn(m)),onClick:C,size:"small",iconTrailing:(T=m,T.itemsViewState===Na.i.GRID?La.z:T.compactModeState===sn.COMPACT?vn.d:Aa.d),ref:h,role:"combobox","aria-controls":"sort-and-view-picker",children:(0,b.jsx)(W.x,{variant:"bodySmall",className:Rn,children:r.value})})})})});var T},Bn=e=>{let{sortOrders:t,activeSortOrderId:r,setActiveSortOrderId:a,root:n,showReorderingOnboarding:l,spec:o,scrollNodeRef:s}=e;const d=(0,i.useMemo)((()=>o.sortMenuButtonFactory()),[o]),u=(0,i.useMemo)((()=>o.sortbyViewasMenuButtonFactory()),[o]),p=(0,_.$P)(),g=(0,Ye.y)(),y=t.find((e=>e.id===r))??(null==t?void 0:t.at(0)),m=(0,i.useRef)(null),x=(0,c.W6)(aa.uH2),h=(0,i.useCallback)(((e,t)=>{a(e);const r=g.getSortOrderLabel(e);x?p.logInteraction(u.sortOptionFactory({identifier:r,position:t}).hitSort()):p.logInteraction(d.sortMenuFactory().sortOptionFactory({identifier:r,position:t}).hitSort())}),[g,p,a,u,d,x]),{show:f,onHide:v}=kn(l);return x?(0,b.jsx)(En,{sortOptions:t.map((e=>{let{id:t,name:r}=e;return{key:t,value:r}})),selectedSort:{key:(null==y?void 0:y.id)??"",value:(null==y?void 0:y.name)??""},onSortSelect:h,root:n,showReorderingOnboarding:l,scrollNodeRef:s,spec:u}):(0,b.jsx)("div",{className:Tn,ref:m,children:(0,b.jsx)(fn,{bodyText:K.ag.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:n,show:f,childrenWrapperClassName:Dn,onHide:v,children:(0,b.jsx)(pn.A,{options:t.map((e=>{let{id:t,name:r}=e;return{key:t,value:r}})),onClick:()=>{p.logInteraction(d.hitUiReveal())},onSelect:h,selected:{key:(null==y?void 0:y.id)??"",value:(null==y?void 0:y.name)??""},heading:K.ag.get("web-player.your-library-x.sort_by"),ariaLabel:K.ag.get("web-player.your-library-x.sort_by")})})})};var Un=r(8824),Mn=r(89273);const Vn=e=>{let{clearOnEscapeInElementRef:t,primaryFilter:r,spec:a}=e;const n=(0,Ye.y)(),l=(0,_.$P)(),o=function(e){switch(e){case I.p.ALBUM:return K.ag.get("web-player.your-library-x.text-filter.albums-placeholder");case I.p.ARTIST:return K.ag.get("web-player.your-library-x.text-filter.artists-placeholder");case I.p.PLAYLIST:return K.ag.get("web-player.your-library-x.text-filter.playlists-placeholder");case I.p.SHOW:return K.ag.get("web-player.your-library-x.text-filter.shows-placeholder");case I.p.AUDIOBOOK:return K.ag.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return K.ag.get("web-player.your-library-x.text-filter.downloaded-placeholder");case void 0:return K.ag.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,gt._)(e)}}(r),s=(0,i.useCallback)((()=>(l.logInteraction(a.searchButtonFactory().hitUiReveal()),!0)),[l,a]),d=(0,i.useCallback)((()=>(l.logInteraction(a.textFilterFactory().keyStrokeClearFilter()),!0)),[l,a]);return(0,b.jsx)(Un.K,{placeholder:o,clearOnEscapeInElementRef:t,debounceFilterChangeTimeout:null!=n&&n.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:s,onClear:d,useExpandCallback:e=>{(0,Mn.x)(w.lb.FOCUS_YLX_TEXT_FILTER,e)}})};var _n=r(66335),Wn=r(66677),Hn=r(29391),Kn=r(18534),Yn=r(54941),zn=r(7761),Gn=r(308),$n=r(84202),Xn=r(84317);const Zn=1248,Jn=800,qn=(0,pt.y)(Yn.s),Qn=(0,pt.y)(zn.c$),el=()=>(function(){const{size:e,setSize:t,minWidth:r,maxWidth:a,ylxCollapsedStateNavbarWidth:n,ylxDefaultStateNavbarWidth:o,ylxExpandedStateNavbarWidth:s}=(0,$n.LP)(),{ylxSidebarState:d,setYlxSidebarState:c,canCollapse:u}=(0,zn.UF)(),p=(0,Xn.mI)(),g=(0,Kn.hv)(),{min:y,max:m,size:x,setSize:b}=(0,Kn.rF)(),h=(0,Gn.T)(),f=(0,i.useRef)(null),v=(0,i.useRef)(null),S=(0,i.useRef)(null);(0,i.useLayoutEffect)((()=>{const i=h-e-3*Hn.hn-(p!==Yn.s.Disabled?x+Hn.hn:0),w={leftSidebarWidth:e,leftSidebarMinWidth:r,leftSidebarMaxWidth:a,ylxSidebarState:d,ylxSidebarStateRestoreTarget:f.current,rightSidebarWidth:x,rightSidebarMinWidth:y,rightSidebarMaxWidth:m,rightSidebarPanel:p,rightSidebarPanelRestoreTarget:v.current,storedCollapsedYLXWidth:n,storedDefaultYLXWidth:o,storedExpandedYLXWidth:s,clientWidth:h,mainContentWidth:i,canCollapse:u},P=S.current;if((0,l.J)(w,P))return;const C=function(e,t){if(!e)return{};let{leftSidebarWidth:r=0,rightSidebarWidth:i=0}=t;const{mainContentWidth:a=0,leftSidebarMinWidth:n=0,leftSidebarMaxWidth:l=0,ylxSidebarState:o,ylxSidebarStateRestoreTarget:s,rightSidebarMinWidth:d=0,rightSidebarMaxWidth:c=0,rightSidebarPanel:u,rightSidebarPanelRestoreTarget:p,storedCollapsedYLXWidth:g=0,storedDefaultYLXWidth:y=0,storedExpandedYLXWidth:m=0,clientWidth:x=0,canCollapse:b=!0}=t,h={},f=u!==Yn.s.Disabled,v=void 0!==e.leftSidebarWidth&&r>e.leftSidebarWidth,S=void 0!==e.rightSidebarWidth&&i>e.rightSidebarWidth,w=void 0===e.clientWidth?0:x-e.clientWidth,P=w<0,C=x>0,T=a<Hn.IW?Hn.IW-a:0;let D=P?-1*w:0;a>Zn?D=Math.max(0,D-(a-Zn)):T&&(D=T);const I=o===zn.c$.EXPANDED&&e.ylxSidebarState!==zn.c$.EXPANDED,R=o===zn.c$.DEFAULT&&e.ylxSidebarState!==zn.c$.DEFAULT;let j=r-n;v&&(j=I?r-$n.RZ.EXPANDED_MIN:R?r-$n.RZ.DEFAULT_MIN:0);let A=S?0:i-d;const L=D<=j+A;if(a<Hn.IW&&!L)f&&(v||P&&(o===zn.c$.COLLAPSED||!b))?(h.rightSidebarPanel=Yn.s.Disabled,h.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,D-=i,A=0):(o===zn.c$.EXPANDED&&a+(r-$n.RZ.DEFAULT_MIN)>Hn.IW?(h.ylxSidebarState=zn.c$.DEFAULT,D-=r-y,j=y-$n.RZ.DEFAULT_MIN):(h.ylxSidebarState=zn.c$.COLLAPSED,D-=r-g,j=0),h.ylxSidebarStateRestoreTarget=t.ylxSidebarState);else if(u===Yn.s.Disabled&&p!==Yn.s.Disabled&&qn(p)&&u!==e.rightSidebarPanelRestoreTarget&&a-i-Hn.hn>=Hn.IW)h.rightSidebarPanel=p,h.rightSidebarPanelRestoreTarget=null;else if(o===zn.c$.DEFAULT&&s===zn.c$.EXPANDED&&a-(m-r)>=Hn.IW)h.ylxSidebarState=zn.c$.EXPANDED,h.ylxSidebarStateRestoreTarget=null;else if(o===zn.c$.COLLAPSED&&s===zn.c$.DEFAULT&&a-(y-r)>=Hn.IW)h.ylxSidebarState=zn.c$.DEFAULT,h.ylxSidebarStateRestoreTarget=null;else if(C&&a>=Jn){let e=l-r,t=c-i;const a=Math.min(w,e+t);for(let n=0;n<a;n++)r<i&&r<l&&e>0?(r++,e--):i<c&&t>0&&(i++,t--)}o!==e.ylxSidebarState&&Qn(s)&&s===e.ylxSidebarStateRestoreTarget&&(h.ylxSidebarStateRestoreTarget=null);u!==e.rightSidebarPanel&&qn(p)&&p===e.rightSidebarPanelRestoreTarget&&(h.rightSidebarPanelRestoreTarget=null);if(D>0&&D<=j+A)for(let N=0;N<D;N++)r>i&&r>n&&j>0?(r--,j--):i>d&&A>0&&(i--,A--);r&&r!==t.leftSidebarWidth&&(h.leftSidebarWidth=r);i&&i!==t.rightSidebarWidth&&(h.rightSidebarWidth=i);return h}(P,w);void 0!==C.leftSidebarWidth&&t(C.leftSidebarWidth),Qn(C.ylxSidebarState)&&c(C.ylxSidebarState),void 0!==C.ylxSidebarStateRestoreTarget&&(f.current=C.ylxSidebarStateRestoreTarget),void 0!==C.rightSidebarWidth&&b(C.rightSidebarWidth),void 0!==C.rightSidebarPanel&&g((0,Xn.Cx)(C.rightSidebarPanel)),void 0!==C.rightSidebarPanelRestoreTarget&&(v.current=C.rightSidebarPanelRestoreTarget),S.current=w}),[e,r,a,t,d,x,y,m,b,p,n,o,s,c,g,h,u])}(),null),tl=()=>(0,c.W6)(aa._cg,{loadingValue:!1})?(0,b.jsx)(el,{}):null;var rl=r(38965),il=r(9443);var al=r(79295);var nl=r(9317);function ll(){const[e,t]=(0,i.useState)(null);if((0,li.b)(ni.EW.UPDATE_PIN_ERROR,(e=>{t(e.data)})),void 0===(null==e?void 0:e.reason))return null;switch(e.reason){case ni.EN.TOO_MANY_PINS:return(0,b.jsx)(nl.w,{animated:!0,headingMessage:K.ag.get("web-player.your-library-x.pin-error.title"),message:K.ag.get("web-player.your-library-x.pin-error.message",e.maximumPinnedItems),buttonLabel:K.ag.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});case ni.EN.NO_PIN_IN_FOLDER:return(0,b.jsx)(nl.w,{animated:!0,headingMessage:K.ag.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:K.ag.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:K.ag.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});default:return(0,gt._)(e),null}}var ol=r(50020),sl=r(53335),dl=r(41821);const cl={[ni.XD.ALBUMS]:I.p.ALBUM,[ni.XD.ARTISTS]:I.p.ARTIST,[ni.XD.BOOKS]:I.p.AUDIOBOOK,[ni.XD.EPISODES]:I.p.EPISODE,[ni.XD.SHOWS]:I.p.SHOW,[ni.XD.TRACKS]:I.p.TRACK};function ul(e,t){const r=(0,i.useCallback)((r=>{let{data:{list:i}}=r;pl(e,cl[i])&&t()}),[e,t]);(0,li.b)(ni.EW.UPDATE,r),(0,li.b)(ni.EW.UPDATE_PIN,t);const a=(0,i.useCallback)((()=>{pl(e,I.p.PLAYLIST)&&t()}),[e,t]);(0,pi.iu)(a),function(e){(0,dl.mU)("hm://collection/ylpin/",!0,e)}(t),function(e){const t=(0,i.useContext)(sl.t),r=t.getEvents();(0,i.useEffect)((()=>(r.addListener(ol.p.UPDATE,e),()=>{r.removeListener(ol.p.UPDATE,e)})),[t,r,e])}(t)}function pl(e,t){switch(e){case I.p.ALBUM:case I.p.ARTIST:case I.p.AUDIOBOOK:case I.p.SHOW:return e===t;case I.p.PLAYLIST:switch(t){case I.p.TRACK:case I.p.PLAYLIST:case I.p.EPISODE:return!0;default:return!1}default:return!0}}const gl="PpUTJL2NIYDUnmfzVIbE",yl="_0FuodatXU4_fToYAuYtY",ml="RcGCSu8qHUle68BTwF73",xl="_K79lE9KrIAkl_bUSSUM",bl="ifVI2CEdOZGgMWIUN2Cw",hl="dNphEfQzPRaQufS04jUm",fl="glUVqQHA9VNQp0CHUTAs",vl="MLbFLVC33caOj3FgSQMC",Sl="HUFl7FOi5oAlMEZNCBf4",wl="y2UicQnlTq148rL8Y0jp",Pl="wBsWS202aGdsul2kEGUf",Cl={items:[],totalLength:0},Tl=5e4,Dl=[Yt.RN.TRACKS,Yt.RN.LOCAL_TRACKS,Yt.RN.ALBUMS,Yt.RN.ARTISTS,Yt.RN.PLAYLISTS_V2,Yt.RN.SHOWS,Yt.RN.AUDIOBOOKS,Yt.RN.EPISODES,Yt.RN.FOLDERS],Il=[Yt.RN.TRACKS,Yt.RN.LOCAL_TRACKS,Yt.RN.ALBUMS,Yt.RN.EPISODES,Yt.RN.PLAYLISTS_V2,Yt.RN.FOLDERS],Rl=()=>{var e,t,r,a;const{filter:o}=(0,i.useContext)(rt.fo),[p,g]=(0,i.useState)(null),{filtersPickedByUserRef:m,selectedFilterIds:x,resetFilterIds:f,resetAndToggleRootFilter:v,toggleFilterId:F}=function(e){const{openedFolderUri:t=it,change:r,resetFolder:a}=(0,i.useContext)(at),n=(0,i.useRef)(t),[l,o]=(0,fe.z)("ylx-active-filter-ids",{[t]:[]}),s=(0,i.useRef)(!0),c=(0,d.jP)((function(r){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=new Set(e);a.has(r)?a.delete(r):a.add(r),s.current=i,o({...l,[t]:Array.from(a)})}),[e,o,t]),u=(0,i.useCallback)((()=>o({...l,[t]:[]})),[t,l,o]),p=(0,i.useCallback)((e=>{t&&a(),o({...l,[it]:e?[e]:[]})}),[t,a,l,o]);return(0,i.useLayoutEffect)((()=>{t!==n.current&&t!==it&&"PUSH"===r&&o({...l,[t]:l[n.current]}),n.current=t}),[r,t,l,o]),{filtersPickedByUserRef:s,selectedFilterIds:l[t],resetFilterIds:u,resetAndToggleRootFilter:p,toggleFilterId:c}}((null==p||null===(e=p.selectedFilters)||void 0===e?void 0:e.map((e=>e.id)))??[]),k=null==x?void 0:x[0],{selectedSortOrderId:E,setSelectedSortOrderId:U}=function(e){const t=(0,Ye.y)().getContentsPrimaryFilterId(I.p.PLAYLIST),{openedFolderUri:r=""}=(0,i.useContext)(at),[a,n]=(0,fe.z)("ylx-active-sort-order-by-filter-id",{}),l=`${r&&t?t:e}`;return{selectedSortOrderId:a[l],setSelectedSortOrderId:(0,i.useCallback)((e=>{n({...a,[l]:e})}),[l,a,n])}}(k),M=(0,i.useRef)(null),W=(0,i.useRef)(null),H=(0,i.useRef)(null),{expandedFolders:K}=(0,i.useContext)(he),{openedFolderUri:Y,resetFolder:z}=(0,i.useContext)(at),G=(0,rl.s)(),$=(0,L.I)(),X=(0,i.useContext)(D.H),J=(0,N.o)(),q=er(),[ee,te]=(0,i.useState)(!1),{isCollapsed:re,isExpanded:ie,setYlxSidebarState:ae}=(0,C.UF)();(e=>{const t=(0,i.useContext)(D.H),{isCollapsed:r,setYlxSidebarState:a,lastUncollapsedYlxSidebarState:n}=(0,C.UF)(),l=(0,T.S)();(0,i.useEffect)((()=>(S().bind(l?w.lb.TOGGLE_NPV_SIDEBAR:w.lb.TOGGLE_YLX_SIDEBAR,(0,P.D)((()=>{const e=r?n:C.c$.COLLAPSED;a(e)}))),()=>{S().unbind(l?w.lb.TOGGLE_NPV_SIDEBAR:w.lb.TOGGLE_YLX_SIDEBAR)})),[r,l,n,a]),(0,i.useEffect)((()=>(S().bind(w.lb.GO_TO_LIBRARY,(0,P.D)((()=>{e(null),r&&a(n)}))),()=>{S().unbind(w.lb.GO_TO_LIBRARY)})),[r,n,e,a]),(0,i.useEffect)((()=>(S().bind(w.lb.GO_TO_PLAYLISTS,(0,P.D)((()=>{e(t.getContentsPrimaryFilterId(I.p.PLAYLIST)),r&&a(n)}))),()=>{S().unbind(w.lb.GO_TO_PLAYLISTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(S().bind(w.lb.GO_TO_PODCASTS,(0,P.D)((()=>{e(t.getContentsPrimaryFilterId(I.p.SHOW)),r&&a(n)}))),()=>{S().unbind(w.lb.GO_TO_PODCASTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(S().bind(w.lb.GO_TO_ARTISTS,(0,P.D)((()=>{e(t.getContentsPrimaryFilterId(I.p.ARTIST)),r&&a(n)}))),()=>{S().unbind(w.lb.GO_TO_ARTISTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(S().bind(w.lb.GO_TO_ALBUMS,(0,P.D)((()=>{e(t.getContentsPrimaryFilterId(I.p.ALBUM)),r&&a(n)}))),()=>{S().unbind(w.lb.GO_TO_ALBUMS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(S().bind(w.lb.GO_TO_AUDIOBOOKS,(0,P.D)((()=>{e(t.getContentsPrimaryFilterId(I.p.AUDIOBOOK)),r&&a(n)}))),()=>{S().unbind(w.lb.GO_TO_AUDIOBOOKS)})),[r,n,t,e,a])})(v);const{isGridView:ne}=(0,Na.a)(),{libraryRowMode:le}=dn(),oe=le===sn.COMPACT,{spec:de,UBIFragment:ce}=(0,_.fU)(u.C,{data:{identifier:"yourlibraryx"}});let ue;ue=re?"collapsed":ne?ie?"expanded_grid":"default_grid":oe?ie?"expanded_compact":"default_compact":ie?"expanded_list":"default_list";const pe=(0,i.useMemo)((()=>de.sidebarFactory({uri:Y??it,identifier:ue})),[de,Y,ue]),ye=(0,_.Wi)(pe),me=(0,i.useMemo)((()=>pe.headerFactory()),[pe]),xe=(0,i.useMemo)((()=>me.filtersFactory()),[me]),ve=(0,i.useMemo)((()=>me.searchBarFactory()),[me]),Se=(0,i.useMemo)((()=>pe.listFactory()),[pe]),we=(0,_.$P)();!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;const a=(0,il.k)(),n=(0,i.useContext)(D.H).getContentsPrimaryFilterId("downloaded"),l=(0,i.useRef)(e);l.current=e;const o=(0,i.useRef)(t);o.current=t;const s=(0,i.useRef)(r);s.current=r;const c=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(!n)return;const e=o.current.includes(n),t=l.current.includes(n),r=o.current.length>1,i=!a&&!r&&!e&&t,d=a&&e&&c.current;(i||d)&&(i&&(c.current=!0),s.current(n,!1))}),[n,a]);const u=(0,i.useRef)(t);(0,d.KW)((()=>{n&&(t.includes(n)&&!u.current.includes(n)&&c.current||(c.current=!1),u.current=t)}),[n,t])}(null==p||null===(t=p.availableFilters)||void 0===t?void 0:t.map((e=>e.id)),null==p||null===(r=p.selectedFilters)||void 0===r?void 0:r.map((e=>e.id)),F);const{handleDropOnFolder:Pe,unpinConfirmationDialog:Ce}=mi(Se,Y),{dropOriginIsYLX:Te,entityIsInFolder:De}=Qt(),{setDraggingIsInProgress:Ie}=(0,i.useContext)(qt.Di);(0,Wn.P)(M);const Re=Y?Il:Dl,je=!De||null!=p&&p.reorderAllowed?[]:[Yt.RN.PLAYLISTS_V2,Yt.RN.FOLDERS],{dropPosition:Ae,className:Le,...Ne}=(0,ze.WB)({allowedMimeTypesByDropPosition:{[ze.Pw.ON]:Te?je:Re},onDrop:(0,i.useCallback)((async e=>{if(Y)Pe(e);else{const{[Yt.RN.TRACKS]:t=[],[Yt.RN.LOCAL_TRACKS]:r=[],[Yt.RN.ALBUMS]:i,[Yt.RN.ARTISTS]:a,[Yt.RN.EPISODES]:n,[Yt.RN.SHOWS]:l,[Yt.RN.PLAYLISTS_V2]:o=[],[Yt.RN.FOLDERS]:s}=e,d=[...t,...r];d.length&&(null==X||X.add({uris:d}),we.logInteraction(Se.dragCreatePlaylist())),null!=i&&i.length&&(null==X||X.add({uris:i}),we.logInteraction(Se.dragLike({itemToBeLiked:i.at(0)??""}))),null!=a&&a.length&&(null==X||X.add({uris:a}),we.logInteraction(Se.dragLike({itemToBeLiked:a.at(0)??""}))),null!=n&&n.length&&(null==X||X.add({uris:n}),we.logInteraction(Se.dragLike({itemToBeLiked:n.at(0)??""}))),null!=l&&l.length&&(null==X||X.add({uris:l}),we.logInteraction(Se.dragLike({itemToBeLiked:l.at(0)??""}))),o.length&&(q(o,{before:"start"}),Te?we.logInteraction(Se.dragSort()):we.logInteraction(Se.dragLike({itemToBeLiked:o.at(0)??""}))),null!=s&&s.length&&(J.moveFolder({uri:s[0]},{before:"start"}),we.logInteraction(Se.dragSort()))}}),[Y,Pe,X,we,Se,q,Te,J]),onLongDragOver:(0,i.useCallback)((()=>{re&&ae(C.c$.DEFAULT)}),[re,ae])}),Oe=(0,i.useMemo)((()=>({filters:x,sortOrder:E,textFilter:o,includeLocalFiles:$,includeYourEpisodes:!0,includeLikedSongs:!0,expandedFolders:re||ne?[]:K,filtersPickedByUser:m.current,folderUri:Y})),[K,m,$,ne,re,Y,x,E,o]),Fe=(0,i.useCallback)((async(e,t)=>{try{const r=await X.getContents({offset:e,limit:t,...Oe}),{offset:i,limit:a,items:n,...o}=r;return te(!1),{fetchedId:Oe.folderUri,onCacheSuccess:()=>{g((e=>(0,l.J)(o,e)?e:o))},...r}}catch(r){return r instanceof y.Ik?(f(),Cl):r instanceof y.j2?(U(void 0),Cl):r instanceof y.xX?(z(),Cl):((0,O.PC)(r),te(!0),Cl)}}),[Oe,X,f,z,U]),ke=!1===(null==p?void 0:p.hasUnfilteredItems),Ee=(null==p?void 0:p.hasTextFilter)&&0===p.totalLength&&""!==o,{setFilter:Be}=(0,i.useContext)(rt.fo);(0,i.useEffect)((()=>{Ee&&re&&Be("")}),[Ee,re,Be]);const Ue=0===(null==p?void 0:p.totalLength)&&p.selectedFilters.length>0&&!p.passedFolderUri&&!p.hasTextFilter;(0,d.KW)((()=>{const e=null==p?void 0:p.selectedFilters.at(-1);Ue&&e&&F(e.id,!1)}),[Ue,null==p?void 0:p.selectedFilters]);const Me=(0,c.W6)(aa.ZU0,{loadingValue:!1})&&(null==X?void 0:X.getCapabilities().canFetchAllItems),{fetchedId:_e,getItems:We,nrValidItems:He,invalidateCache:Ke}=(0,A.Q)({nrItems:50,fetch:Fe,limit:50,cacheAllOnInvalidation:Me,cacheAllLimit:Tl}),$e=(0,s.y1)(Ke,200,{leading:!0,trailing:!0,maxWait:1e3});ul(null==p?void 0:p.primaryFilter,$e);const Xe=!Y&&!_e||Y===_e;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=(0,i.useRef)({});(0,i.useLayoutEffect)((()=>{if(!e.current)return()=>{};const i=e.current,a=r.current[t];i.scrollTop=a??0;const n=()=>{r.current[t]=i.scrollTop};return null==i||i.addEventListener("scroll",n),()=>{null==i||i.removeEventListener("scroll",n)}}),[e,t])}(M,_e);const Ze=(0,i.useCallback)((()=>{Ke(),te(!1)}),[Ke]),Je=(0,Fn.J)(M),qe=!(null==p||!p.openedFolderName),Qe=(0,c.W6)(aa.KKZ,{loadingValue:!1})&&Me,et=function(e,t,r){const{isGridView:a}=(0,Na.a)(),{rowHeight:n}=dn();return(0,i.useCallback)((async i=>{let l=n,o=1;if(a){var s;const t=null===(s=e.current)||void 0===s?void 0:s.querySelector('li[role="row"]');l=(null==t?void 0:t.getBoundingClientRect().height)??0,null!=t&&t.parentElement&&(o=getComputedStyle(t.parentElement).getPropertyValue("grid-template-columns").split(" ").length)}if(!l)return null;const d=r(0,Tl,{cachedOnly:!0}),c=d.find((e=>(null==e?void 0:e.name)&&(0,al.B)(i,e.name))),u=c?d.indexOf(c):-1;return-1!==u&&t.current&&function(e,t,r,i){if(!e)return;const{scrollTop:a,offsetHeight:n}=e,l=t&&e?t.getBoundingClientRect().top+a-e.getBoundingClientRect().top:0;if(l+r<a||l+r+i>a+n){const t=r-n/2+l+i/2;e.scrollTop=t}}(t.current,e.current,Math.floor(u/o)*l,l),(null==c?void 0:c.uri)??null}),[e,t,n,r,a])}(H,M,We),nt=ee?(0,b.jsx)(be,{onClick:Ze}):null;let lt;(0,i.useEffect)((()=>{ee&&re&&ae(C.c$.DEFAULT)}),[ee,re,ae]),ke&&!re&&(lt=qe?(0,b.jsx)(Q,{className:Le}):(0,b.jsx)(se,{className:Le}));const ot=Ee?(0,b.jsx)(ge,{query:o,className:Le}):null,st=(0,c.W6)(aa.uH2),dt=!re&&!lt&&(0,b.jsxs)("div",{className:n()(yl,Le,{[ml]:st}),children:[(0,b.jsx)(Vn,{clearOnEscapeInElementRef:W,primaryFilter:null==p?void 0:p.primaryFilter,spec:ve},Y),(0,b.jsx)(Bn,{sortOrders:(null==p?void 0:p.availableSortOrders)??[],activeSortOrderId:null==p||null===(a=p.selectedSortOrder)||void 0===a?void 0:a.id,setActiveSortOrderId:U,root:W.current,showReorderingOnboarding:(null==p?void 0:p.primaryFilter)===I.p.PLAYLIST&&!(null!=p&&p.reorderAllowed),spec:me,scrollNodeRef:M})]}),ct=ee&&!p,ut=ie&&!ne&&!nt&&!lt;return(0,b.jsx)(B,{containerRef:W,findMatchingTypeaheadUid:et,isEnabled:Qe,children:(0,b.jsxs)(ce,{spec:de,children:[(0,b.jsx)(tl,{}),(0,b.jsx)(R._P,{menu:(0,b.jsx)(h,{folderUri:Y}),children:(0,b.jsxs)("div",{className:n()(gl,{[Ge]:Ae===ze.Pw.ON,[hl]:re}),ref:e=>{W.current=e,ye(e)},...Ne,tabIndex:-1,onDragStart:()=>Ie(!0),onDragEnd:()=>Ie(!1),children:[Ce,(0,b.jsxs)("div",{className:n()({[wl]:Je}),children:[(0,b.jsx)(Za,{parentDropTargetClassName:Le,isLibraryCompletelyEmpty:ke,folderUri:null==p?void 0:p.passedFolderUri,folderName:null==p?void 0:p.openedFolderName,spec:me.titleRowFactory()}),!G&&(0,b.jsx)(Z,{spec:me}),!re&&!ct&&(0,b.jsxs)("div",{className:Pl,children:[(0,b.jsx)(tt,{selectedFilters:null==p?void 0:p.selectedFilters,availableFilters:null==p?void 0:p.availableFilters,toggleFilterId:F,resetFilterIds:f,className:n()(vl,{[Sl]:!Xe}),scrollNodeRef:M,spec:xe},_e),ie&&dt]}),ut&&(0,b.jsx)(Ve,{isScrolled:Je})]}),(0,b.jsx)(_n.U,{className:xl,ref:e=>{e&&!M.current&&(M.current=e.osInstance().getElements().viewport)},children:(0,b.jsx)(j.i,{containerRef:W,children:(0,b.jsxs)("div",{className:n()(bl,{[Sl]:!ee&&!Xe,[hl]:re,[fl]:ut}),children:[!ie&&dt,nt||lt||ot,(0,b.jsx)("div",{ref:H,children:ne?(0,b.jsx)(da,{getItems:We,scrollNodeRef:M,primaryFilter:null==p?void 0:p.primaryFilter,nrValidItems:He,spec:Se}):(0,b.jsx)(un,{getItems:We,scrollNodeRef:M,primaryFilter:null==p?void 0:p.primaryFilter,nrValidItems:He,spec:Se})})]})})}),ll(),(0,b.jsx)(V,{})]})})]})})},jl=()=>{const{isAnonymous:e}=(0,o.v9)((e=>e.session));return(0,b.jsx)(f.L,{onError:e=>{(0,O.vK)(e,"YourLibraryX")},children:(0,b.jsx)(rt.hz,{uri:y.in,children:(0,b.jsx)(ve,{children:(0,b.jsxs)(nt,{children:[(0,b.jsx)(Rl,{}),(0,b.jsx)(oe.Z8,{isAnonymous:e})]})})})})}},27284:(e,t,r)=>{r.d(t,{I:()=>a});var i=r(44658);function a(){return(0,i.S)()[0]}}}]);
//# sourceMappingURL=7774.36dd1a8d.js.map