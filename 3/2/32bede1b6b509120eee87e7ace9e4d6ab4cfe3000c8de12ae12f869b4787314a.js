(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[6587],{76587:(e,t,r)=>{"use strict";r.d(t,{Z:);var i,a,s,o=r(3e4),n=(r(91938),r(76955)),p=r(55382),d=r.n(p),l=r(29466),c=r.n(l),h=r(5154),m=r.n(h),g=r(52361),u=r.n(g),y=r(93533),k=r.n(y),I=r(45525),T=r(59226),b=r.n(T),v=r(98205),L=r.n(v),A=r(66680),f=r.n(A),E=r(75457),C=r(16884),D=r(36509),P=r(30657),j=r(41185),Z=r(52377),S=r(55752),_=r.n(S),N=r(27356),x=r.n(N),w=r(5663),R=r.n(w),O=r(32450),B=r.n(O),F=r(34679),M=r(1324),q=r(97243),G=r(47530),H=r(77383),V=r(22221),W=r(52791),U=r.n(W),J=r(47255),Y=r.n(J),z=r(3599),K=r(24448),Q=r(15972),X=r(40393),$=r(82819),ee=r(91216),te=r(39954),re=r(38160),ie=r(4645),ae=r(39472),se=r(71500);r pe,de,le,ce,he,me,ge=(0,I.w1)([U(),Y()])((s=a=class extends n.Component{static get defaultProps(){return{amebloOneTimeToken:"",bloggerGenreCode:"",bloggerType:X.vh,shouldInjectAutoGeneratedAds:!1,sidebarCount:null,trackRaichoAdInviewRequest:m(),trackRaichoAdTapRequest:m(),locationSearch:null,injectedAdDfpParam:{},injectedAdsData:null,injectedAdsLoadingStatus:null,isLoggedIn:!1,pickEventLabels:[],onFetchPickEventLabels:null,onInjectedAdDFPNotFound:m(),remoteConfig:{}}}constructor(e){super(e);var t=e.entry||{},r=t.entry_text||"";this.state={adSlots:[],clipPortalTargets:[],html:(0,V.Z)(r),imageEmbedTargets:[],entry:t,imageProtectionType:e.imageProtectionType}}tatic getDerivedStateFromProps(e,t){var r=(t.entry||{}).entry_text||"",i=e.entry||{},a=i.entry_text||"";return r!==a||e.imageProtectionType!==t.imageProtectionType?{clipPortalTargets:[],html:(0,V.Z)(a),imageEmbedTargets:[],entry:i,imageProtectionType:e.imageProtectionType,adSlots:[]}:null}shouldComponentUpdate(e,t){return!(this.props.amebaId===e.amebaId&&this.props.amebloOneTimeToken===e.amebloOneTimeToken&&this.props.entry===e.entry&&this.props.openModal===e.openModal&&this.props.trackStartClip===e.trackStartClip&&this.props.trackTapLog===e.trackTapLog&&this.props.trackViewLog===e.trackViewLog&&this.props.shouldInjectAutoGeneratedAds===e.shouldInjectAutoGeneratedAds&&this.props.bloggerGenreCode===e.bloggerGenreCode&&this.props.bloggerType===e.bloggerType&&this.props.onInjectedAdDFPNotFound===e.onInjectedAdDFPNotFound&&this.props.trackRaichoAdInviewRequest===e.trackRaichoAdInviewRequest&&this.props.trackRaichoAdTapRequest===e.trackRaichoAdTapRequest&&this.props.isLoggedIn===e.isLoggedIn&&this.state.html===t.html&&this.state.adSlots===t.adSlots&&this.state.sidebarCount===t.sidebarCount&&c()(this.state.clipPortalTargets,t.clipPortalTargets)&&c()(this.state.imageEmbedTargets,t.imageEmbedTargets)&&c()(this.props.onClickLink,e.onClickLink)&&c()(this.props.injectedAdsLoadingStatus,e.injectedAdsLoadingStatus)&&c()(this.props.injectedAdDfpParam,e.injectedAdDfpParam)&&c()(this.props.injectedAdsData,e.injectedAdsData)&&c()(this.props.remoteConfig,e.remoteConfig)&&c()(this.props.pickEventLabels,e.pickEventLabels)&&c()(this.props.commerceEntryImageItemList,e.commerceEntryImageItemList))}componentDidUpdate(e,t){if(this.state.html!==t.html&&setImmediate((),this.state.html===t.html&&this.props.shouldInjectAutoGeneratedAds!==e.shouldInjectAutoGeneratedAds&&setImmediate((),c()(this.props.pickEventLabels,e.pickEventLabels)||(0,ae.DH)(this.entryDetailText,this.props.pickEventLabels),!c()(this.props.commerceEntryImageItemList,e.commerceEntryImageItemList)){var{amebaId:r,entry:i}=this.props,a={bloggerAmebaId:r,entryId:i.entry_id,pageId:this.props.pageType,sectionId:se.ej};(0,H.A_)({amebaId:this.props.amebaId,itemList:this.props.commerceEntryImageItemList,trackTapLog:e=>{this.props.trackTapLog(ne(ne({},a),{},{contentId:e}))},trackInViewLog:e=>{this.props.trackViewLog(ne(ne({},a),{},{contentId:e}))}})}}andleMount(){var{amebaId:e,entry:t,imageProtectionType:r,pageType:i}=this.props;setImmediate((()=>{this.entryDetailText&&((0,H.V0)(this.entryDetailText,{amebaId:e,entryId:t.entry_id,imageProtectionType:r,pageType:i}),(0,H.C9)(this.entryDetailText),(0,F.IO)(this.entryDetailText,this.props.locationSearch),this.props.isOfficial&&"protected"!==this.props.imageReproduce&&this.setState({imageEmbedTargets:(0,H.Fr)(this.entryDetailText,U().ImageEmbedWrapper,U().ImageEmbedWrapper__EntryDesign)}),(0,D.WW)(this.entryDetailText),this.setState({clipPortalTargets:(0,G.O)(this.entryDetailText,e,"".concat(t.entry_id),this.props.trackStartClip)}),this.updateLinkClick(),this.updatePickEventLabelsIfNeeded())}))}handleAdSlotInjectionnsertInArticleInjectedAdTags(){var{remoteConfig:e,sidebarCount:t}=this.props;if(!R()(e)){var{pickLayoutType:r,adHeight:i,adWidth:a,adVerticalMargin:s,fallbackShortestDistanceToBottom:o,fallbackShortestDistanceToTop:n,firstAdPosition:p,repeatHeight:d,repeatLimit:l,shortestDistanceToBottom:c,maxDepth:h,doubleColumn:m,outside:g,unsafeRange:u,contextSeparator:y}=e;(0,$.BF)(this.entryDetailText,{firstAdPosition:p,shortestDistanceToBottom:c,repeatHeight:d,repeatUpperLimit:l,maxDepth:h,fallbackShortestDistanceToTop:n,fallbackShortestDistanceToBottom:o,adHeight:i,adWidth:a,adVerticalMargin:s,showDoubleColumn:!B()(t)&&t<=1,doubleColumnAdConfig:m,outsideAdConfig:g,unsafeRangeConfig:u,contextSeparatorConfig:y,pickLayoutType:r,align:"same-as-user-image"})}}updateLinkClick(){this.unlistenLinkClick&&this.unlistenLinkClick();var e=this.entryDetailText.querySelectorAll("a")||[];Array.prototype.forEach.call(e,(e=>{e.addEventListener("click",this.props.onClickLink,!1)})),this.unlistenLinkClick=()=>{Array.prototype.forEach.call(e,(e=>{e.removeEventListener("click",this.props.onClickLink,!1)})),this.unlistenLinkClick=null}}updateInjectedAdsPortalTargets(){var{entryDetailText:e}=this;if(e){var t=Array.from(e.querySelectorAll(Q.w6));0!==t.length&&this.setState({adSlots:t})}}updatePickEventLabelsIfNeeded(){var{entryDetailText:e}=this;e&&(0,ae.iq)(e)&&this.props.onFetchPickEventLabels&&(this.props.pickEventLabels.length>0?(0,ae.DH)(this.entryDetailText,this.props.pickEventLabels):this.props.onFetchPickEventLabels())}renderClipPortal(){var e=this.state.clipPortalTargets.map((e=>e.element?Z.createPortal(n.createElement(M.L,e.props),e.element):null));return e.length<1?null:e}renderImageEmbedButtonPortal(){var e=this.state.imageEmbedTargets.map((e=>Z.createPortal((0,o.Z)("button",{className:U().ImageEmbedButton,style:{bottom:".5em",right:"5px"},onClick:()=>{this.props.openModal("".concat(this.props.entry.entry_id),q.rl,{imageHeight:parseInt(e.dataset.imageHeight,10),imageId:e.dataset.imageId,imageWidth:parseInt(e.dataset.imageWidth,10)})}},void 0,(0,o.Z)(x(),{"aria-hidden":"true",className:U().ImageEmbedButtonIcon}),(0,o.Z)("span",{className:U().ImageEmbedButtonLabel},void 0,"\u3053\u306e\u753b\u50cf\u3092\u30b7\u30a7\u30a2")),e)));return e.length<1?null:e}renderInjectedAdsPortal(){var{bloggerType:e,amebaId:t,entry:r,pageType:i,injectedAdsLoadingStatus:a,isOfficial:s,injectedAdsData:n,injectedAdDfpParam:p,onInjectedAdDFPNotFound:d,trackTapLog:l,trackViewLog:c,trackRaichoAdInviewRequest:h,trackRaichoAdTapRequest:m}=this.props,g=this.state.adSlots.length>0;return e&&g?this.state.adSlots.map(((e,g)=>{var{injectionType:u,orderId:y,displayPosition:k,slotHeight:I,pickLayoutType:T}=(0,ie.Cg)(e,"".concat(g+1)),{data:b,status:v}=(0,ie.lW)({adData:n,adRequestStatus:a,entryId:r.entry_id,orderId:y,pickLayoutType:T}),L={status:v,data:b,trackInview:h,trackTap:m};return(0,o.Z)(z.h,{container:e},g,(0,o.Z)(K.Z,{adInjectionType:u||"manual",adcross:L,affiliatorId:_()(r,"affiliator_id"),amebaId:t,dfp:(0,ie.m5)(p,T),displayPosition:k||"",entryId:r.entry_id,isOfficial:s,orderId:y,pageType:i,pickLayoutType:T,slotHeight:I,trackTapLog:l,trackViewLog:c,onDfpNotFound:d}))})):null}render(){var{amebaId:e,entry:t}=this.props;if("amember"===t.publish_flg&&(this.props.pageType===E.Z.BlogTop||this.props.pageType===E.Z.SkinPreview))return(0,o.Z)("div",{className:"articleText"},void 0,(0,o.Z)(ee.Z,{colorClassNames:{borderColorClassName:"skinBorderColor",buttonColorClassName:"skinSimpleBtn"},linkButtonUrl:(0,C.Z)(E.Z.AmemberEntry,{amebaId:e,entryId:t.entry_id}),status:"inList"}));var r=t.entry_text||"";return"mon_ng"===this.props.entry.closed_flg?(0,o.Z)("div",{className:"articleText"},void 0,(0,o.Z)("div",{className:"nopermitentry",dangerouslySetInnerHTML:{__html:r}})):"amember"!==this.props.entry.publish_flg||r||!1!==this.props.entry.amemberLoading?(0,o.Z)(n.Fragment,{},void 0,n.createElement("div",{className:d()("articleText",U().Block,{[U().ImageProtected]:"all_deny"===this.props.imageProtectionType}),dangerouslySetInnerHTML:{__html:this.state.html},id:"entryBody",ref:),this.renderInjectedAdsPortal(),this.renderClipPortal(),this.renderImageEmbedButtonPortal()):(0,o.Z)(te.x,{},void 0,(0,o.Z)("div",{className:"articleText"},void 0,(0,o.Z)(ee.Z,{colorClassNames:{borderColorClassName:"skinBorderColor",buttonColorClassName:"skinSimpleBtn"},linkButtonUrl:this.props.isLoggedIn?"".concat(window.process.env.HTTP_PATH_AMEMBER_APPLY,"/amemberRequest.do?oAid=").concat(this.props.amebaId):"".concat(re.qD,"?bnm=").concat(this.props.amebaId,"&eid=").concat(this.props.entry.entry_id,"&service=amember_entry&token=").concat(this.props.amebloOneTimeToken),status:this.props.isLoggedIn?"notAmember":"notLoggedIn"})))}},a.displayName="PcEntryDetailTextNew",i=s))||i,ue=r(48516),ye=r(10793),ke=r(14272),Ie=r(14946),Te=r.n(Ie),be=(0,I.w1)(Te())((le=de=class extends n.Component{static get defaultProps(){return{adEntryBottom:null,adInArticlePanel:null,amebloOneTimeToken:"",bloggerGenreCode:"",bloggerType:"",shouldInjectAutoGeneratedAds:!1,entryDetailClip:null,entryDetailGenreRanking:null,hashtag:null,cheerFrame:null,mypickModule:null,reactions:null,reactionsLink:null,readerModule:null,recentImageEntryList:null,recentThemeEntryList:null,remoteConfig:{},shareButton:null,sidebarCount:null,locationSearch:null,injectedAdDfpParam:{},injectedAdsData:null,injectedAdsLoadingStatus:null,isLoggedIn:!1,pickEventLabels:[],trackViewLog:m(),onFetchPickEventLabels:null,onInjectedAdDFPNotFound:m()}}houldComponentUpdate(e){return!(this.props.adEntryBottom===e.adEntryBottom&&this.props.adInArticlePanel===e.adInArticlePanel&&this.props.amebaId===e.amebaId&&this.props.amebloOneTimeToken===e.amebloOneTimeToken&&this.props.dateDisplayCode===e.dateDisplayCode&&this.props.entryDetailClip===e.entryDetailClip&&this.props.entryDetailGenreRanking===e.entryDetailGenreRanking&&this.props.entryIndex===e.entryIndex&&this.props.hashtag===e.hashtag&&this.props.imageProtectionType===e.imageProtectionType&&this.props.imageReproduce===e.imageReproduce&&this.props.isLoggedIn===e.isLoggedIn&&this.props.isOfficial===e.isOfficial&&this.props.openModal===e.openModal&&this.props.pageType===e.pageType&&this.props.reactions===e.reactions&&this.props.reactionsLink===e.reactionsLink&&this.props.readerModule===e.readerModule&&this.props.recentImageEntryList===e.recentImageEntryList&&this.props.recentThemeEntryList===e.recentThemeEntryList&&this.props.shareButton===e.shareButton&&this.props.sidebarCount===e.sidebarCount&&this.props.trackRaichoAdInviewRequest===e.trackRaichoAdInviewRequest&&this.props.trackRaichoAdTapRequest===e.trackRaichoAdTapRequest&&this.props.trackTapLog===e.trackTapLog&&this.props.trackStartClip===e.trackStartClip&&this.props.locationSearch===e.locationSearch&&this.props.shouldInjectAutoGeneratedAds===e.shouldInjectAutoGeneratedAds&&this.props.bloggerGenreCode===e.bloggerGenreCode&&this.props.bloggerType===e.bloggerType&&this.props.injectedAdsLoadingStatus===e.injectedAdsLoadingStatus&&c()(this.props.cheerFrame,e.cheerFrame)&&c()(this.props.entry,e.entry)&&c()(this.props.mypickModule,e.mypickModule)&&c()(this.props.trackViewLog,e.trackViewLog)&&c()(this.props.injectedAdDfpParam,e.injectedAdDfpParam)&&c()(this.props.injectedAdsData,e.injectedAdsData)&&c()(this.props.remoteConfig,e.remoteConfig)&&c()(this.props.commerceEntryImageItemList,e.commerceEntryImageItemList))}trackLinkTapLog(e){var{amebaId:t,entry:r,isOfficial:i,pageType:a}=this.props,s={bloggerAmebaId:t,contentId:e,entryId:r.entry_id,pageId:a,sectionId:"entry-hyperlink",serviceId:i?"official":"general"};this.props.trackTapLog(s)}handleClickEntryTextLink(e){var t="".concat(window.process.env.HTTP_PATH_BLOG_AMEBA,"/reader.do"),r=e.currentTarget.href;-1!==r.indexOf(t.replace("https://",""))||this.trackLinkTapLog(r)}renderEntryDate(e,t){var r=this.props.entry.is_pickpr||!1;return(0,o.Z)("div",{className:d()(Te().DateBlock,{[Te().NoJSDateBlock]:!r})},void 0,(0,o.Z)("div",{className:Te().Date},void 0,(0,o.Z)(te.x,{},void 0,(0,o.Z)("span",{className:"articleTime"},void 0,(0,o.Z)("time",{dateTime:(0,P.TA)(5,e),pubdate:"pubdate"},void 0,(0,P.TA)(this.props.dateDisplayCode,e)),t&&(ce||(ce=(0,o.Z)("span",{className:"contentNew skinStrongColor"},void 0,"NEW !")))))),r&&(0,o.Z)(ke.E,{wrapperStyle:{marginLeft:"12px"}}))}renderEntryTheme(){return(0,o.Z)("div",{className:Te().ThemeBlock},void 0,(0,o.Z)(te.x,{},void 0,(0,o.Z)("span",{className:"articleTheme"},void 0,"\u30c6\u30fc\u30de\uff1a",(0,o.Z)(ue.Z,{rel:"tag",targetUrl:(0,C.Z)(E.Z.Theme,{amebaId:this.props.amebaId,themeId:this.props.entry.theme_id})},void 0,this.props.entry.theme_name,(0,o.Z)(b(),{"aria-hidden":"true",className:Te().ThemeIcon})))))}renderIcon(){return"amember"===this.props.entry.publish_flg?(0,o.Z)(L(),{"aria-label":"\u30a2\u30e1\u30f3\u30d0\u30fc\u8a18\u4e8b",className:Te().Icon}):this.props.entry.reblog_flg?(0,o.Z)(f(),{"aria-label":"\u30ea\u30d6\u30ed\u30b0\u8a18\u4e8b",className:Te().Icon}):null}renderEntryTitle(){var e=this.props.isOfficial?"official":"general";return(0,o.Z)("h1",{},void 0,(0,o.Z)(ye.f,{bloggerAmebaId:this.props.amebaId,entryId:this.props.entry.entry_id,orderId:"".concat(this.props.entryIndex+1),pageId:this.props.pageType,sectionId:"article",serviceId:e,tapLogger:this.props.trackTapLog},void 0,(0,o.Z)(ue.Z,{className:"skinArticleTitle",rel:"bookmark",targetUrl:(0,D.IT)(this.props.amebaId,this.props.entry)},void 0,this.renderIcon(),this.props.entry.entry_title)))}renderEntryEmpty(){return(0,o.Z)("span",{className:"error"},void 0,"\u3053\u306e\u8a18\u4e8b\u306f\u524a\u9664\u3055\u308c\u3066\u3044\u308b\u304b\u3001",he||(he=(0,o.Z)("br",{})),"\u307e\u305f\u306f\u672a\u6765\u8a18\u4e8b\u8a2d\u5b9a\uff08\u73fe\u65e5\u6642\u4ee5\u964d\u306e\u516c\u958b\uff09\u3055\u308c\u305f\u8a18\u4e8b\u306e\u305f\u3081\u8868\u793a\u3067\u304d\u307e\u305b\u3093\u3002",me||(me=(0,o.Z)("br",{})),(0,o.Z)("span",{className:"entryListLink"},void 0,(0,o.Z)(ue.Z,{targetUrl:(0,C.Z)(E.Z.EntryList,{amebaId:this.props.amebaId})},void 0,"\u30d6\u30ed\u30b0\u8a18\u4e8b\u4e00\u89a7\u3078")))}renderEntry(){var e=this.props.entry.entry_created_datetime||"",t=e&&u()(e,k()(new Date,1)),r="open"===this.props.entry.publish_flg||this.props.pageType===E.Z.AmemberEntry;return(0,o.Z)("article",{className:"js-entryWrapper","data-unique-ameba-id":this.props.amebaId,"data-unique-entry-id":this.props.entry.entry_id,"data-unique-entry-title":this.props.entry.entry_title},void 0,(0,o.Z)("div",{className:"skinArticle"},void 0,(0,o.Z)("div",{className:"skinArticle2"},void 0,(0,o.Z)("div",{className:"skinArticle3"},void 0,(0,o.Z)("div",{className:"skinArticleHeader"},void 0,(0,o.Z)("div",{className:"skinArticleHeader2"},void 0,this.renderEntryTitle())),(0,o.Z)("div",{className:"skinArticleBody"},void 0,(0,o.Z)("div",{className:"skinArticleBody2"},void 0,(0,o.Z)("div",{className:d()(Te().EntryMeta,"articleDetailArea skinWeakColor")},void 0,this.renderEntryDate(e,t),this.renderEntryTheme()),this.props.pageType===E.Z.Entry&&(0,o.Z)("div",{className:"js-blogGenreRank blogGenreEntryRankInfo__block"},void 0,this.props.entryDetailGenreRanking),this.props.entryDetailClip,(0,o.Z)(ge,{amebaId:this.props.amebaId,amebloOneTimeToken:this.props.amebloOneTimeToken,bloggerType:this.props.bloggerType,commerceEntryImageItemList:this.props.commerceEntryImageItemList,entry:this.props.entry,entryIndex:this.props.entryIndex,imageProtectionType:this.props.imageProtectionType,imageReproduce:this.props.imageReproduce,injectedAdDfpParam:this.props.injectedAdDfpParam,injectedAdsData:this.props.injectedAdsData,injectedAdsLoadingStatus:this.props.injectedAdsLoadingStatus,isLoggedIn:this.props.isLoggedIn,isOfficial:this.props.isOfficial,locationSearch:this.props.locationSearch,openModal:this.props.openModal,pageType:this.props.pageType,pickEventLabels:this.props.pickEventLabels,remoteConfig:this.props.remoteConfig,shouldInjectAutoGeneratedAds:this.props.shouldInjectAutoGeneratedAds,sidebarCount:this.props.sidebarCount,trackRaichoAdInviewRequest:this.props.trackRaichoAdInviewRequest,trackRaichoAdTapRequest:this.props.trackRaichoAdTapRequest,trackStartClip:this.props.trackStartClip,trackTapLog:this.props.trackTapLog,trackViewLog:this.props.trackViewLog,onClickLink:this.handleClickEntryTextLink,onFetchPickEventLabels:this.props.onFetchPickEventLabels,onInjectedAdDFPNotFound:this.props.onInjectedAdDFPNotFound}),(0,o.Z)(te.x,{},void 0,r&&this.props.mypickModule,this.props.hashtag,this.props.adInArticlePanel,this.props.adEntryBottom,this.props.cheerFrame,this.props.reactions,this.props.reactionsLink,(0,o.Z)("div",{className:"skinArticleFooter"},void 0,this.props.shareButton,this.props.readerModule),this.props.recentThemeEntryList,this.props.recentImageEntryList)))))))}render(){var{entry:e}=this.props;return e.entry_id?this.renderEntry():this.renderEntryEmpty()}},de.displayName="PcEntryDetailBlockNew",pe=le))||pe},13598:(e,t,r)=>{var i=r(18300)(();i.push([e.id,"._3Jc5iOmU{min-height:52px}._2bnc6d5i{align-items:center;display:flex;justify-content:space-between;min-height:26px}#no-js ._CAyof9YV{display:none}.__q1uFW9o{flex:1 1 auto;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#no-js ._38SpS3oD{display:none}._1GECmSOc{font-size:1.5em;margin-right:4px;vertical-align:-.25em}",""]),i.locals={EntryMeta:"_3Jc5iOmU",DateBlock:"_2bnc6d5i",NoJSDateBlock:"_CAyof9YV",Date:"__q1uFW9o",ThemeBlock:"_38SpS3oD",Icon:"_1GECmSOc"},e.exports=i},14946:(e,t,r)=>{var i=r(13598),a=Object.assign||s=Object.defineProperty||"string"==typeof i&&(i=[[e.id,i,""]]),e.exports=function(e){var t=a({},e.locals||{});return s(t,"_",{value:),s(t,"toString",{value:function(){return"function"==typeof e.toString?e.toString():""}}),t}(i)}}]);