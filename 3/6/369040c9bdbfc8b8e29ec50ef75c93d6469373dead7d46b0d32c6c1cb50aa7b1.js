"use strict";(self.webpackChunktag=self.webpackChunktag||[]).push([[179],{5536:(e,t,n)=>{n.d(t,{D$:()=>s,GJ:()=>r,RQ:()=>c,Vy:()=>l,Wx:()=>d,do:()=>a,ge:()=>i,k5:()=>o});const a="abtasty_resetActionTracking",i="targetPages",s="qaParameters",o="audience",r="segment",c="trigger",d="$^",l=1e3},5027:(e,t,n)=>{n.d(t,{h:()=>a});const a=(0,n(1117).W)(((e,t)=>t.reduce(((t,n)=>e(n)?[...t,n]:t),[])))},1117:(e,t,n)=>{function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];const o=e.length,r=e=>"__missing__"===e,c=t.map((e=>r(e)&&i.length>0?i.shift():e)).concat(i);return c.filter((e=>!r(e))).length<o?a(e,c):e(...c)}}n.d(t,{W:()=>a})},8075:(e,t,n)=>{function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return t.reduce(((t,n)=>null!=t?n(t):n(e,...a)),void 0)}}n.d(t,{z:()=>a})},8390:(e,t,n)=>{function a(e){return null!=e&&("string"==typeof e?""===e:Array.isArray(e)?0===e.length:"object"==typeof e&&0===Object.keys(e).length)}n.d(t,{x:()=>a})},3190:(e,t,n)=>{function a(e){return null==e}n.d(t,{k:()=>a})},5355:(e,t,n)=>{n.d(t,{E:()=>a});const a=(0,n(1117).W)(((e,t)=>e.reduce(((e,t)=>e?e[t]:void 0),t)))},294:(e,t,n)=>{n.d(t,{V:()=>a});const a=(0,n(1117).W)(((e,t)=>t.split(e)))},6666:(e,t,n)=>{n.r(t),n.d(t,{detectDatalayer:()=>p,extractDatalayerToObject:()=>u,getDatalayer:()=>h,putInArrayIfNeeded:()=>g,sendDatalayerIfNeeded:()=>m});var a=n(2622),i=n(6125),s=n(4284),o=n(457),r=n(7806);const c="datalayerTimeout",d="hitDatalayerTimeout",l="waitDatalayer";function u(e){const t=e.length!==Object.keys(e).length?{...e}:e,n=Object.entries(t).filter((e=>Array.isArray(e[1])));return n.length>0&&n.forEach((e=>{t[e[0]]=u(e[1])})),t}function g(e,t){return[].concat(null!=e?e:t)}function h(){const{datalayerVariable:e}=(0,s.wy)();if(!e||!window[e])return null;const t=window[e];return Array.isArray(t)&&t.length<1&&Object.keys(t).length>0?u(t):t}function m(){const e=Math.floor((0,s.wy)().datalayerMaxToSend);if(!!window.abTastyNoRandomHit||Math.floor(Math.random()*e)+1===1){const e={dlr:h()};(new a.j).setInternalHit(i.Re.datalayer,e)}}function p(){if(null==window.ABTasty.datalayerEnabled)return new Promise(((e,t)=>{const{datalayerVariable:n}=(0,s.wy)();n||t("Data layer variable is not set");const a=setInterval((()=>{const t=h();t&&(Array.isArray(t)&&t.length||Object.keys(t).length)&&((0,r.MH)(c),e())}),200);(0,o.oo)(l,a);const i=setTimeout((()=>{(0,o.iF)(l),t("Data layer variable cannot be found")}),2e3);(0,r.tI)(c,i)})).then((()=>{window.ABTasty.datalayerEnabled=!0;const e=setTimeout(m,5e3);(0,r.tI)(d,e)})).catch((e=>(window.ABTasty.datalayerEnabled=!1,e))).finally((()=>{(0,r.MH)(c),(0,o.iF)(l)}))}},2022:(e,t,n)=>{n.d(t,{Lr:()=>r,Pf:()=>c,Sq:()=>o});var a=n(3827),i=n(838),s=n(7806);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return/MSIE [678]/.test(e)}function r(){return window.self!==window.top&&"https:"===window.location.protocol}function c(){return new Promise((e=>{if(null!=window.ABTasty.ADBlockEnabled)return void e();const t=setTimeout((()=>{void 0!==window.ABTasty.ADBlockEnabled&&(window.ABTasty.AdBlockDetectionFailed=!0,e("AbBlock detection failed"))}),2e3);(0,s.tI)("adblockDetectionLoop",t);let n=!1;const o=`${(0,a.pW)()}try.abtasty.com/abt-advertisement_.js`,r=(0,i.u)(o,{callback:function(){window.ABTasty.ADBlockEnabled=!1,e("AdBlock is disabled")}});r.async=!1,r.onerror=function(){n&&e(),n=!0,window.ABTasty.ADBlockEnabled=!0,e("AdBlock is enabled")}}))}},3492:(e,t,n)=>{n.d(t,{GN:()=>u,kG:()=>l});var a=n(3190),i=n(5355),s=n(1042),o=n(2622),r=n(6125);var c=n(4284);const d=(e,t)=>{let{deprecate:n,new:i=null,type:d,el:l}=e;const u=`${d} ${n} is deprecated`+(i?` - Please use ${i} instead.`:"");if((0,s.Kp)(u),t){const e={cid:"b1c05f3030611d124ca247d0cffcf1a4",ec:"Deprecated Usage",ea:(0,c.Nn)(),el:(0,a.k)(l)?n.replace("window.",""):l};(new o.j).setInternalHit(r.Re.event,e)}},l=(()=>{const e={};return t=>{const n=(0,a.k)(t.el)?t.deprecate:`${t.deprecate};${t.el}`;e[n]?d(t,!1):(d(t,!0),e[n]=t)}})(),u=(e,t)=>{try{if(0===e.length||0===t.length)return!1;if(t.join(".").indexOf(e.join("."))>-1)throw new Error("Can't deprecate variable from itself");const n=e.length,a=e.slice(0,n-1),s=e[n-1];return Object.defineProperty((0,i.E)(a,window),s,{get:()=>(l({deprecate:`window.${e.join(".")}`,new:`window.${t.join(".")}`,type:"variable"}),(0,i.E)(t,window))}),!0}catch(t){const n=`Failed to deprecate window.${e.join(".")} variable.`;return(0,s.vU)(n),!1}}},838:(e,t,n)=>{n.d(t,{u:()=>i});var a=n(1042);function i(e){let{attributes:t,callback:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return void(0,a.vU)('appendScript called with missing "src" parameter');const i=document.getElementsByTagName("head")[0],s=document.createElement("script");return n&&(s.onload=n),s.setAttribute("type","text/javascript"),s.setAttribute("src",e),t&&Object.entries(t).forEach((e=>{let[t,n]=e;s.setAttribute(t,n)})),i.appendChild(s),s}},9267:(e,t,n)=>{function a(e){const{readyState:t}=document,n="interactive"===t||"complete"===t;if(null==e)return n;if(n)e();else{const t=()=>{document.removeEventListener("DOMContentLoaded",t),e()};document.addEventListener("DOMContentLoaded",t)}}n.d(t,{A:()=>a})},7791:(e,t,n)=>{n.r(t),n.d(t,{addObservance:()=>d,resetObserver:()=>r});var a=n(3190);const i=(e,t)=>e&&"BODY"!==e.tagName?e===t||i(e.parentNode,t):e===t,s={observer:null,observances:[]},o={attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeFilter:["checked","class","disabled","form","hidden","href","icon","id","label","max","min","maxLength","minLength","method","name","novalidate","placeholder","readonly","rel","required","selected","size","span","src","target","title","type","value"]},r=()=>{s.observances=[],s.observer?.disconnect(),s.observer=null},c=e=>{if(e&&e.length){const t=e.reduce(((e,t)=>{let{addedNodes:n,removedNodes:i,target:s,type:o,attributeName:r,oldValue:c}=t,d=[],l=!0;return d=n.length?[...n]:i.length?[...i]:[s],"attributes"!==o||(0,a.k)(r)||c!==s.getAttribute(r)||(l=!1),l?[...e,...d]:e}),[]);s.observances=s.observances.filter((e=>{let{selector:n,include:a,callback:s}=e;const o=document.querySelectorAll(n);return a&&((e,t)=>[...t].some((t=>!!t&&e.some((e=>i(t,e)||i(e,t))))))(t,o)?(s(),!1):!(!a&&0===o.length)||(s(),!1)}))}},d=(e,t,n)=>{s.observances.push({selector:e,include:t,callback:n}),1===s.observances.length&&(s.observer=new MutationObserver(c),s.observer.observe(window.document,o))}},8669:(e,t,n)=>{n.d(t,{U:()=>i});const a={method:"GET"};function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(e,{mode:"cors",headers:{Origin:document.location.origin},...t})}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.fetch?fetch(e,{...a,...t}):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={...a,...t},i=new XMLHttpRequest;if("GET"===(i.open(n.method,e,!0),i.setRequestHeader("Content-type","text/plain"),n.method))i.send();else i.send(JSON.stringify(n.body));return Promise.resolve(i)}(e,t)}},1155:(e,t,n)=>{n.d(t,{PO:()=>r,VH:()=>a,X_:()=>i,ek:()=>s,tK:()=>o});n(1042);function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;!0===e()?t():setTimeout((()=>{a(e,t,n)}),n)}function i(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2?arguments[2]:void 0;return new Promise(((i,s)=>{const o=()=>e()?i(!0):t=setTimeout(o,n);o(),a&&setTimeout((()=>{clearTimeout(t),s(!0)}),a)}))}function s(e,t,n){"sessionStorage"===e?sessionStorage.setItem(t,n):localStorage.setItem(t,n)}function o(e,t){return"sessionStorage"===e?sessionStorage.getItem(t):localStorage.getItem(t)}function r(e,t){"sessionStorage"===e?sessionStorage.removeItem(t):localStorage.removeItem(t)}},7352:(e,t,n)=>{n.d(t,{C:()=>c,O:()=>o});var a=n(2109),i=n(3190),s=n(4892);const o={};let r;class c extends s.d{constructor(){if(r)return r;super(),r=this}resetCustomEventState(){Object.keys(o).forEach((e=>{delete o[e]})),this.notify(["events"])}resetSpecificsCustomEvents(e){e.forEach((e=>{o[e]={status:a.A.Status.loading}})),this.notify(e.map((e=>`events.${e}`)))}getStatusCustomEvent(e){return(0,i.k)(o[e])?a.A.Status.loading:o[e].status}initCustomEventState(){Object.keys(a.A.Name).forEach((e=>{(0,i.k)(o[e])&&(o[e]={status:a.A.Status.loading})})),window.ABTasty&&(window.ABTasty.eventState=o)}dispatchCustomEvent(e,t){const n=new CustomEvent(`${arguments.length>2&&void 0!==arguments[2]?arguments[2]:"abtasty"}_${e}`,{detail:t});window.dispatchEvent(n),o[e]||this.initCustomEventState(),o[e].status=a.A.Status.complete,!(0,i.k)(t)&&(0,i.k)(o[e].detail)?o[e].detail=[t]:(0,i.k)(t)||(o[e].detail=[...o[e].detail,t]),this.notify([`events.${e}`])}notify(e){for(const t of e)this.mediator?.notify(t)}}},1438:(e,t,n)=>{n.d(t,{Zt:()=>i,mW:()=>o,s:()=>r,uY:()=>s});var a=n(3190);function i(e){let t,n=e;return(0,a.k)(e)&&e.indexOf(":eq")>-1&&(n=e.replace(/html:eq\([0-9]+\)/g,"html"),n.match(/:eq\([0-9]+\)/g).forEach((e=>{t=Number(e.replace(":eq(","").replace(")",""))+1,n=n.replace(e,`:nth-of-type(${t})`)}))),n}function s(e){if(void 0===e)return;const t=e.split(".");return 256*(256*(256*+t[0]+ +t[1])+ +t[2])+ +t[3]}function o(){return new RegExp("^(?=.*?\\b(safari)\\b)(?:(?!chrome|crios).)*$","gi").test(navigator.userAgent)}function r(){const e=navigator.userAgent.toLowerCase();return e.indexOf("ipad")>-1||e.indexOf("iphone")>-1}},457:(e,t,n)=>{n.d(t,{iF:()=>s,oo:()=>i});let a={};function i(e,t){a[e]=t}function s(e){clearInterval(a[e])}},7806:(e,t,n)=>{n.d(t,{MH:()=>o,iG:()=>s,tI:()=>i});let a={};function i(e,t){a[e]=t}function s(){Object.keys(a).forEach((e=>clearTimeout(a[e]))),a={}}function o(e){clearTimeout(a[e])}},6049:(e,t,n)=>{n.d(t,{Q:()=>i});var a=n(4284);async function i(){const{addJquery:e,jqueryVarName:t}=(0,a.wy)();if(e){let e;return""!==t&&null!=t&&(e=t.split(".").reduce(((e,t)=>e?e[t]:e),window)),e||window.jQuery||window.$}return window.jQuery}},3827:(e,t,n)=>{n.d(t,{CL:()=>N,oe:()=>_,sZ:()=>T,yT:()=>C,J5:()=>b,re:()=>I,UO:()=>E,pW:()=>S,z3:()=>O,rD:()=>R,rl:()=>U,ST:()=>B,gy:()=>k});var a=n(1042),i=n(4284),s=n(6541),o=n(3190),r=n(5027);const c=e=>e.reduce(((e,t)=>{const[n,a]=t;return 2===t.length?Object.assign(e,{[n]:a}):e}),{});var d=n(1117);const l=(0,d.W)(((e,t,n,a)=>e(a)?t(a):n(a)));var u=n(8390);const g=e=>e[e.length-1],h=(0,d.W)(((e,t)=>t.map(e))),m=(0,d.W)(((e,t)=>t.match(e)));var p=n(8075);const y=(0,d.W)(((e,t)=>t[e])),f=(0,d.W)(((e,t)=>t.reduce(((t,n)=>e(n)?t:t.concat(n)),[])));var v=n(294),w=n(2022);function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return(0,p.z)(m(e),l(o.k,(()=>""),g),(0,v.V)("&"),f(u.x),h((0,v.V)("=")),c)(t)}function T(e){return(0,p.z)((e=>e.replace(/(https?\:\/\/)([^\/]+).*/,"$2")),(0,v.V)("."),(e=>e.reverse()),(e=>e.map(((t,n)=>{const a=e.reduce(((e,t,a)=>a<=n?`${t}.${e}`:`${e}`));return`.${a}`}))),(e=>e.length>1?e.slice(1):e))(e)}function C(){const e=window.location.href,t="ABTastyDomainTest=true",n=(0,i.wy)().isSecureCookie||(0,w.Lr)()?"Samesite=None;Secure;":"Samesite=Lax;",a=(0,p.z)((e=>T(e)),(e=>e.find((e=>(document.cookie=`${t};path=/;domain=${e};${n}`,-1!==document.cookie.indexOf(t))))))(e);return document.cookie=`${t};expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain=${a};${n}`,a}function S(){return`${window.location.protocol}//`}function E(){return A(/\?([^#]+)/,arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href)}function b(){return A(/#([^?]+)/,arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href)}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return(0,p.z)(E,y(e))(t)}function k(e){return-1!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href).indexOf(e)}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return(0,p.z)(R,y(e))(t)}function _(e,t,n){const a=new URL(n),i=""===a.search?"?":"&";return a.search+=`${i}${e}=${t}`,a.href}const D=/^([^=]+)=?(.*)$/;function R(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.includes("?")?(0,p.z)((e=>e.match(/\?([^#]+)/)),l(o.k,(()=>""),(e=>e[e.length-1])),(0,v.V)("&"),f((e=>(0,u.x)(e)||!D.test(e))),h((e=>e.match(D).slice(1))),l((()=>t),c,(e=>e)))(e):t?{}:[]}function N(e){if(null==e||""===e)return"";const t=e.includes("?")?"&":"?",n=R(e),a=R(window.location.href,!1),i=["gclid","cid","utm_source","utm_medium","utm_campaign","utm_term","utm_content","xtor","xts","xtdt","cm_mmc","MKZOID"],s=(0,p.z)((0,r.h)((e=>{let[t]=e;return!n[t]&&i.includes(t)})),h((e=>`${e[0]}=${e[1]}`)))(a);return 0===s.length?e:e+t+s.join("&")}function P(e){return Object.keys(e).map((t=>`${t}=${e[t]}`)).join("&")}function B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;if(!e.includes("?")&&!t.includes("?"))return e;const n=R(e),a=R(t),i=`?${P(Object.assign({},a,n))}`,s=e.includes("#")?`#${P(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return e.includes("#")?(0,p.z)((e=>e.match(/#([^?]+)/)),l(o.k,(()=>""),(e=>e[e.length-1])),(0,v.V)("&"),f((e=>(0,u.x)(e)||!D.test(e))),h((e=>e.match(D).slice(1))),c)(e):{}}(e))}`:"",r=function(e){return e.includes("?")?e.indexOf("?"):e.includes("#")?e.indexOf("#"):e.length}(e);return`${e.slice(0,r)}${i}${s}`}function M(e,t){return e.includes(t)?(0,p.z)((e=>e.replace(new RegExp(`(\\#|\\?|\\&)(${t}(=\\w+)?)\\&`,"g"),"$1")),(e=>e.replace(new RegExp(`(\\#|\\?|\\&)(${t}(=\\w+)?)($|\\#)`,"g"),"$4")))(e):e}function V(e){return["tastypreprod","abtasty_qa_assistant_token","abtasty_qa_assistant_token_v1",...s.k9].reduce(M,e)}function L(e){try{return decodeURI(e)}catch(e){}return null}function U(e,t){let n,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;switch(e){case"is":case"simplematch":case"ignore_parameters":return n=function(e){const t=e?new URL(e):window.location,{origin:n,pathname:a}=t;return`${n}${a}`}(s),i=L(n),t===n||`${t}/`===n||t===i||`${t}/`===i;case"exact":case"equals":case"is strictly":return n=V(s||window.location.href),i=L(n),t===n||`${t}/`===n||t===i||`${t}/`===i;case"substring":case"contains":case"contain":return n=V(s||window.location.href),i=L(n),-1!==n.indexOf(t)||-1!==i.indexOf(t);case"regex":case"regexp":n=V(s||window.location.href);try{return new RegExp(t,"i").test(n)}catch(e){const n=`The url check used an invalid regular expression => ${t}`;return a.vU(n,e),!1}}}},4284:(e,t,n)=>{n.d(t,{$J:()=>f,DF:()=>v,MA:()=>o,Nn:()=>u,Oy:()=>g,S3:()=>m,Xx:()=>h,aD:()=>p,ae:()=>r,em:()=>d,kA:()=>y,ll:()=>c,wy:()=>l,zu:()=>s});var a=n(1170);const i={accountSettings:{id:48144,identifier:"70c225dcd7978999a4119081e390186a",accountName:"Klarna",frameworkVersion:"latest",pack:"premium",quota:0,toleranceParams:[],toleranceRegex:null,omnitureIntegration:0,accountIframeException:!1,runAsThread:!1,addJquery:!1,jqueryVarName:null,ajaxAutoReload:!0,excludeIE:!0,hashMrasnAllowed:!1,cedexisRadar:0,globalCode:"",globalCodeOnDocReady:!0,customCookieDomain:null,customCookiePath:"/",isSecureCookie:!1,oneVisitorOneTest:!1,cookieLifespan:13,waitForConsent:{data:null,campaignRestrictions:{test:!0,perso:!0,redirection:!0,aa:!0,patch:!0},mode:"disabled"},storageMode:"cookies",datalayerVariable:"dataLayer",datalayerMaxToSend:100,tealiumAccountName:null,tealiumProfileName:null,apiTokenWeborama:null,getAlwaysWeborama:null,kruxNamespace:null,eulerianPixelURL:null,clarityProjectId:null,cookieless:!1,epoqId:null,emotionAiId:null,sampling:100},tests:{936723:{name:"AUS103 - CRO mobile verify email page v.3 - Variation 3 (+banner, CTA above cookie banner) (duplicated) - (personalization)",traffic:100,type:"subsegment",parentID:936724,targetingMode:"noajax",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,size:6,mutationObserverEnabled:!1,displayFrequencyType:"any",codeOnDomReady:!0,isHashAllocationEnabled:!1,scopes:{urlScope:[{include:!0,condition:10,value:"https://www.klarna.com/us/verify-email/"}],testId:936723},customAnalytics:[{id:86,code:'HELPERS.doWhen((()=>"function"==typeof window.ga&&void 0!==window.gaData),(()=>{ga("create",Object.keys(window.gaData)[0],"klarna.com"),ga("send","event","AB Tasty","["+{{campaignId}}+"]"+{{campaignName}},"["+{{campaignId}}+"]["+{{variationId}}+"]"+{{variationName}},{nonInteraction:!0})}),420);',enabled:!0}],actionTrackings:{mousedown:[{name:"Custom smart banner CTA",selector:"#__next .jsx-4148343040.buttons a .hyperlink__wrap button"},{name:"Hero CTA",selector:"#__next .button-group__wrap a .hyperlink__wrap button"},{name:"H2 title click",selector:"#__next .jsx-2914992308 div.jsx-3849548299.wf-dynamic-component:nth-child(1) a h2"}]},audienceSegment:{name:"Mobile traffic",id:"833dd6ca-56cd-4f19-8f90-98b3a0ebf253",targeting_groups:[{position:0,id:"6f9ca1c5-007a-48ba-949d-3e2a610d15f2",targetings:[{id:"195b46ef-dba3-4562-954a-1389b0992a62",operator:"auto",position:0,conditions:[{id:"90351129-f635-4e72-aa91-c1cdb69c1a19",value:1,is_segment_type:!0,include:!0}],targeting_type:17}]}],is_segment:!0},campaignHash:"44619306da296c24ec193c049e066fb4",id:936723,additionalType:"patch",isAsync:!0,asyncVariationInfoById:{1167389:{id:1167389,traffic:100,name:"Variation 3 (+banner, CTA above cookie banner) (duplicated)"}}},936724:{id:936724,name:"AUS103_var3 - CRO mobile verify email page",type:"mastersegment",sub_type:"sp",parentID:0,priority:0,children:[936723],codeOnDomReady:!0,variations:{1167390:{id:1167390,name:"Variation 1"}}},global:{needIPFetch:[],needGeolocFetch:[],needAdBlockDetection:[],needUAParserFetch:[936723],needDCInfosFetch:[],needModificationEngine:!0,needEngagementLevelFetch:[],needDynamicAlloc:[]}},obsoletes:[810500,810501,810503,810504,976607,979109,999776]},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;const{pack:t,quota:n}=e.accountSettings;return 0===t.indexOf("quota")&&n<=0},o=function(){let{accountSettings:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return 1===Number(e.runAsThread)},r=()=>i,c=()=>r().accountLevelTrackings,d=e=>r().tests[e],l=()=>r().accountSettings,u=()=>l().identifier,g=()=>l().id,h=()=>r().crossDomainSettings||[],m=()=>r().globalCodeFragments,p=()=>a.Campaign.getGlobalCampaignsInfos().needGeolocFetch.length>0,y=()=>"cookies"===l().storageMode,f=()=>r().integrationConnectors,v=()=>l().cookieLifespan||13},1943:(e,t,n)=>{n.d(t,{BH:()=>o,DC:()=>i,o1:()=>s,xz:()=>a});const a=1,i=10,s=11,o=40},782:(e,t,n)=>{n.r(t),n.d(t,{deviceTargeting:()=>o,deviceTypes:()=>s});var a=n(4564),i=n(1042);const s={1:"mobile phone",2:"tablet",3:"desktop"};async function o(e){let{conditions:t}=e;try{const[e]=await(0,a.K)(!0,["type"]);return null!=e&&t.every((t=>{let{include:n,value:a}=t;const i=s[a]===e.toLowerCase();return n?i:!i}))}catch(e){const n="Targeting error (device)";return i.vU(n,t),!1}}},5136:(e,t,n)=>{n.r(t),n.d(t,{ABANDONED_CART:()=>Y,ACTION_TRACKING:()=>V,ADBLOCK:()=>k,ADOBE_DMP:()=>l,ADVALO_DMP:()=>r,AMOUNT:()=>Z,BLUEKAI_DMP:()=>s,BROWSER:()=>f,BROWSER_LANGUAGE:()=>p,CAMPAIGN_EXPOSITION:()=>S,CODE:()=>B,CONTENT_INTEREST:()=>F,COOKIE:()=>m,COUPON:()=>X,CUSTOM_VARIABLE:()=>M,DATALAYER:()=>U,DAYS_SINCE_FIRST_SESSION:()=>R,DAYS_SINCE_LAST_SESSION:()=>D,DELIVERY_METHOD:()=>q,DEVICE:()=>u,ECOMMERCE_VARIABLE:()=>N,ENGAGEMENT_LEVEL:()=>G,EULERIAN_DMP:()=>a,GEOLOCATION:()=>h,INTEGRATIONS_PROVIDER:()=>J,IP:()=>g,JS_VARIABLE:()=>C,KEYWORD:()=>x,KRUX_DMP:()=>c,LANDING_PAGE:()=>y,LAST_PURCHASE:()=>$,NUMBER_PAGES_VIEWED:()=>b,PAGE_INTEREST:()=>K,PAGE_VIEW:()=>W,PAYMENT_METHOD:()=>z,PREVIOUS_PAGE:()=>A,PRODUCT_CATEGORY:()=>ee,PRODUCT_SKU:()=>Q,PURCHASE_FREQUENCY:()=>j,RETURNING_VISITOR:()=>v,SAME_DAY_VISIT:()=>I,SCREEN_SIZE:()=>T,SELECTOR:()=>L,SESSION_NUMBER:()=>O,SOURCE:()=>E,SOURCE_TYPE:()=>w,TAGCOMMANDER_DMP:()=>i,TEALIUM_DMP:()=>H,URL_PARAMETER:()=>P,WEATHER:()=>_,WEBORAMA_DMP:()=>d,YSANCE_DMP:()=>o});const a=1,i=2,s=4,o=5,r=6,c=7,d=8,l=10,u=17,g=18,h=19,m=20,p=21,y=22,f=23,v=24,w=25,A=26,T=27,C=28,S=29,E=30,b=31,I=32,k=33,O=34,_=35,D=36,R=37,N=38,P=39,B=40,M=41,V=42,L=43,U=44,$=45,j=46,x=47,H=48,G=49,F=50,W=51,K=52,J=53,Y=54,z=1,q=2,Z=3,X=4,Q=5,ee=6},6845:(e,t,n)=>{n.d(t,{Uo:()=>m,ZN:()=>p,dN:()=>h,dT:()=>g,fJ:()=>u,xj:()=>l});var a=n(1042),i=n(5136),s=n(1170),o=n(5536),r=n(1789);const c={};{const{deviceTargeting:e}=n(782);c[i.DEVICE]=t=>e}const d=e=>e;function l(e){return s.Campaign.getGlobalCampaignsInfos().needDCInfosFetch.indexOf(e)>-1}function u(e){return s.Campaign.getGlobalCampaignsInfos().needIPFetch.indexOf(e)>-1}function g(e){return s.Campaign.getGlobalCampaignsInfos().needGeolocFetch.indexOf(e)>-1}function h(e){return s.Campaign.getGlobalCampaignsInfos().needUAParserFetch.indexOf(e)>-1}function m(e){return s.Campaign.getGlobalCampaignsInfos().needAdBlockDetection.indexOf(e)>-1}const p=e=>async(t,n)=>{if(void 0===n||null==n.targeting_groups)return!0;const i=n.is_segment?o.GJ:o.RQ,l=(await Promise.all(n.targeting_groups.map((async n=>(await Promise.all(n.targetings.map((async o=>{const{targeting_type:d,success:l}=o;let u=void 0===l||l;if(!(0,r.isOnceTargeting)(d)||void 0===l){const l=c[d](e);if("function"==typeof l)return u=await l(o,t.id),(0,r.storeTargetingSuccess)(o,u),s.Campaign.updatePublicTargetingData(t.id,o,u,i,n.position),u;a.Kp("Cannot apply targeting",o),(0,r.storeTargetingSuccess)(o,u),s.Campaign.updatePublicTargetingData(t.id,o,u,i,n.position)}return u})))).every(d))))).some(d);return a.c2("Applying audience",n," for ",t,"result = ",l),l}},8302:(e,t,n)=>{n.d(t,{p:()=>u,v:()=>m});var a=n(4334),i=n(4564),s=n(1042);const o=(0,a.J)();let r=!1,c=[],d={mousedown:[],click:[],submit:[],focus:[],blur:[],hover:[]};const l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(d[t]||[]).filter((t=>!(n&&!t.clicked)&&(e.matches(t.selector)||e.closest(t.selector))))},u=()=>{c=c.filter((e=>{let{event:t,listener:n}=e;return document.removeEventListener(t,n,!0),!1})),d={mousedown:[],click:[],submit:[],focus:[],blur:[],hover:[]},r=!1},g=e=>async t=>{const n=n=>{let{target:a}=n;return h(e)(a,t)},[a]=await(0,i.K)(!0,["type"]),s=a?.toLowerCase()??null;["mousedown","click"].includes(t)&&s&&"desktop"!==s&&"ontouchstart"in document.documentElement?r||(()=>{const e=e=>{let{target:t}=e;l(t,"mousedown").forEach((e=>e.clicked=!0)),l(t,"click").forEach((e=>e.clicked=!0))},t=e=>{let{target:t}=e;l(t,"mousedown").forEach((e=>e.clicked=!1)),l(t,"click").forEach((e=>e.clicked=!1))},n=e=>{let{target:t}=e;l(t,"mousedown",!0).forEach((e=>{const n=[e.name,null,e.testId??null,t];o?.then((e=>e.aggregateActionTracking(...n)))})),l(t,"click",!0).forEach((e=>{const n=[e.name,null,e.testId??null,t];o?.then((e=>e.aggregateActionTracking(...n)))}))};document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",t,!0),document.addEventListener("touchend",n,!0),c.push({event:"touchstart",listener:e},{event:"touchmove",listener:t},{event:"touchend",listener:n})})():"hover"===t&&s&&"desktop"===s?(e=>{let t,n,a=!1;const i=i=>{let{target:s}=i;if(a)return;a=!0,setTimeout((()=>a=!1));const o=s;d.hover?.forEach((a=>{let{selector:i}=a;(o.matches?.(i)||o.closest?.(i))&&(n=o,t=setTimeout((()=>{t=null,h(e)(s,"hover")}),500))}))},s=e=>{let{target:a}=e;t&&a===n&&(clearTimeout(t),t=null)};document.addEventListener("pointerenter",i,!0),document.addEventListener("pointerleave",s,!0),c.push({event:"pointerenter",listener:i},{event:"pointerleave",listener:s})})(e):(document.addEventListener(t,n,!0),c.push({event:t,listener:n})),r||(r=!0)},h=e=>(e,t)=>{d[t]&&d[t]?.forEach((t=>{let{selector:n,name:a,testId:i}=t;try{if(e.matches(n)||e.closest(n)){const t=[a,null,i??null,e];o?.then((e=>e.aggregateActionTracking(...t)))}}catch(e){(0,s.Kp)(`Provided for ${i} test selector ${n} is not valid: ${e}`)}}))},m=e=>(t,n)=>{Object.keys(t).forEach((a=>{d[a]&&0===d[a]?.length&&g(e)(a),((e,t,n)=>{t.forEach((t=>d[e]?.push({...t,testId:n})))})(a,t[a],n)}))}},2244:(e,t,n)=>{n.d(t,{n8:()=>o,rJ:()=>s});var a=n(4874);const i="ABTastySessionHitHistory",s=(e,t)=>{const n=JSON.parse(a.Jo.getItem(a.vR,i)||"{}");return n.cst===e.getCurrentSessionTimestamp()?n?.history?.includes(t):(a.Jo.removeItem(a.vR,i),!1)},o=(e,t)=>{const n=JSON.parse(a.Jo.getItem(a.vR,i)||"{}");if(n?.history?.includes(t))return n;const s=n.cst===e.getCurrentSessionTimestamp()?{cst:n.cst,history:[...n.history,t]}:{cst:e.getCurrentSessionTimestamp(),history:[t]};return a.Jo.setItem(a.vR,i,JSON.stringify(s)),s}},1170:(e,t,n)=>{n.d(t,{Campaign:()=>oe,u:()=>ne,s:()=>se});var a=n(2662),i=n(2109),s=n(6012),o=n(4284),r=n(8075),c=n(3190),d=n(8390),l=n(5027),u=n(1117);const g=(0,u.W)(((e,t)=>t.map((t=>t[e])))),h=(0,u.W)(((e,t,n)=>n[e]===t)),m=(0,u.W)(((e,t)=>{const n={};for(const a in t)e(t[a],a,t)&&(n[a]=t[a]);return n})),p=(0,u.W)(((e,t)=>Object.keys(t).reduce(((n,a)=>(n[a]=e(t[a],a,t),n)),{})));var y=n(1042),f=n(4692);const v=["addCSS","addImage","addLink","addParagraph","addHtml","addHTML","advanced sort","bring2back","bring2front","changeImage","changeLink","copy","copyAfter","copyBefore","cut","cutAfter","cutBefore","editAttributes","editHtml","editHTML","editPicture","editStyle","editText","editDirect","hide","hideByClass","hideContent","move","multivarCode","resize","resizeAndDrag","s&rImage","s&rText","sort","addCSS","editStyleCSS","hideByClassCSS","hideCSS"];var w=n(9267),A=n(83);let T;T=Promise.all([n.e(351,"high"),n.e(226,"high")]).then(n.bind(n,6734)).then((e=>e.start)).catch((e=>(0,y.Kp)(e)));const C=["editStyleCSS","sort","changeLink","addLink","editAttributes","addCSS","editPicture"],S=e=>e.filter((e=>{let{type:t,value:n}=e;return v.includes(t)&&null!=n})).map((e=>{const t=e;return C.includes(e.type)&&(t.value=(e=>{try{return JSON.parse(e)}catch(t){return e}})(e.value)),t})),E=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5?arguments[5]:void 0;if(s?.aborted)return void(0,y.c2)(`Campaign instance is outdated. Campaign ${n}`);const o=null!=t&&""!==t;null!=e&&(o&&document.querySelectorAll(t).length>0?await(0,A.w)(e,n,a):o?setTimeout((async()=>await E(e,t,n,a,i,s)),50):i?(0,w.A)((async()=>{s?.aborted?(0,y.c2)(`Campaign instance is outdated. Campaign ${n}`):await(0,A.w)(e,n,a)})):await(0,A.w)(e,n,a))},b=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;const s=await T,o=S(e);o.length>0&&s&&s(o);const r=(e=>e.filter((e=>{let{type:t,value:n}=e;return-1===v.indexOf(t)})))(e);r.length>0&&r.forEach((async e=>{const{type:s}=e;"customScriptNew"===s?await E(e.oldValue,e.selector,t,n,a,i):/plugin_/.test(s)&&(0,y.Kp)("Ignoring old plugin modification.")}))};class I{constructor(e,t,n){let{id:a,name:i,traffic:s,modifications:o,widgets:r,components:c,redirections:d}=t;this.testId=e,this.id=a,this.name=i,this.traffic=s,this.modifications=o,this.codeOnDomReady=n,this.widgets=r,this.components=c,this.redirections=d}async apply(e){(0,y.um)(`applying modifications (campaign ${this.testId} - variation ${this.id})`,this.modifications),!(0,c.k)(this.redirections)&&this.redirections.length>0?(0,f.cf)(this.redirections,this.testId,this.id):((0,c.k)(this.modifications)||b(this.modifications,this.testId,this.id,this.codeOnDomReady,e),["widgets","components"].forEach((async(e,t)=>{(0,c.k)(this[e])})))}}var k=n(7352);n(4564);const O={};var _=function(e){return e.single="'",e.double='"',e.back="`",e}(_||{});const D=async(e,t,n)=>{(0,y.um)(`applying analytics (campaign ${t.campaignId})`),(0,c.k)(e)||(async(e,t)=>{e.forEach((e=>{let{name:n,wave:a,tracker:i,implementation:s,functionName:o}=e;const r=O[n];r?r(t,a,i,s,o):(0,y.Kp)("Analytics tool is not supported by AB Tasty: ",n,`(for campaign ${t.campaignId})`)}))})(e,t),(0,c.k)(n)||(async(e,t)=>{const n=/([\'\"\`]{1})?{{([a-z]*)}}([\'\"\`]{1})?/gi,a=/([\`\'\"]{1})/gi;e.forEach((e=>{let{code:i}=e;const s=i.replace(n,((e,n,i,s)=>{const o="string"==typeof t[i]?t[i].replace(a,((e,t)=>`\\${t}`)):t[i];return[...Object.values(_).includes(n)?[n]:[_.back],o,...Object.values(_).includes(s)?[s]:[_.back]].join("")}));E(s,null,t.campaignId,t.variationId)}))})(n,t)};var R=n(8302),N=n(2622),P=n(4334),B=n(6125),M=n(5136),V=n(5536),L=n(8669),U=n(7806);var $=n(1789),j=n(8957),x=n(3555);const H=-1;function G(e){return e.reduce(((e,t)=>{const n=e[e.length-1]||0;return[...e,n+t]}),[])}const F=(0,u.W)(((e,t,n,a)=>{let{isDynamic:i=!1,testedTraffic:s,modulation:o}=n;const r=a[a.length-1];let c=Math.max(...e);if(i){const e=function(e,t,n){return J(e,t,n).find((e=>{let{id:t}=e;return t===x.RH}))}(t,s,o);e&&(c=e.traffic)}r+c>100&&(i&&(0,y.vU)(`[addOriginalVariationSlots] The sum of dc infos traffics got greater than 100! We've ignored it but it's weird. Last slot: ${r}. OriginalVariationTraffic: ${c}`),c=100-r);const d=r+c;return[...a,d]}));function W(e,t,n){let a=[];const i=function(e,t,n){let{isDynamic:a=!1,testedTraffic:i,modulation:s}=n;const o=Object.keys(e);let r=e;if(a){const e=function(e,t,n){return J(e,t,n).filter((e=>{let{id:t}=e;return t!==x.RH}))}(t,i,s);e.length&&(r={},e.forEach((e=>{let{id:t,traffic:n}=e;r[t]={traffic:n}})))}return o.reduce(((e,t)=>[...e,r[t].traffic]),[])}(e,t,n);return a=(0,r.z)(G,F(i,t,n))(i),a}function K(e,t,n,i,s){let o=[];try{o=W(t,n,i)}catch(e){return(0,y.vU)("Error on function allocateTraffic.",e),H}return function(e,t,n,i){const s=n.findIndex((t=>t>=e));return-1===s?a.dF.subsegment===i?0:H:s===n.length-1?0:parseInt(t[s],10)}(e,Object.keys(t),o,s)}function J(e,t,n){const a=((0,x.s6)()||{})[`${e}`]||[],i=a.length;return a.map((e=>{const a=function(e,t,n){const a=t||50;return e*(a/100)+(100-a)/n}(e.traffic,n,i),s=function(e,t){return e*((t||100)/100)}(a,t);return{...e,traffic:s}}))}var Y=n(4874),z=n(6541);const q=async(e,t,n,i,s,o)=>{const r=(0,z.GD)(),d=r?JSON.parse(Y.Jo.getItem(Y.vR,"ABTastyForcedVariations")||"{}"):{},l=e.getId(),u=!e.isUsingHashAllocation(),g=async()=>{if(u)return Math.floor(100*Math.random()+1);try{const n=((e,t)=>{const n=new TextEncoder;return[a.b0.multipageTest,a.b0.multipagePersonalization].includes(e.getSubType())?n.encode(`${e.data.parentID}.${t}`):n.encode(`${e.data.id}.${t}`)})(e,t);return new Uint16Array(await crypto.subtle.digest("SHA-1",n))[0]%100+1}catch(e){return(0,y.Kp)("Check that your website is in https otherwise cookieless allocation won't work"),Math.floor(100*Math.random()+1)}};if(r&&!(0,c.k)(d[l]))return d[l];if(u&&i)return i.variationID;if(u&&[a.b0.multipageTest,a.b0.multipagePersonalization].includes(e.getSubType())&&e.hasAlreadySeenBrothers(n)){const t=e.getSeenBrothers(n)[0];let a=null;if(t.variationID===ne.Untracked)return t.variationID;{const n=se(t.campaignId).getVariation(t.variationID);return a=n?n.masterVariationId:0,(0,c.k)(a)||0===a?ne.Original:e.getVariationInfoByMasterId(a).id}}if(u&&e.isMultipageChild()&&e.hasSeenMaster(n)){const t=n.getCampaign(s);return n.removeCampaign(s),t.variationID===ne.Untracked?t.variationID:t.variationID!==ne.Original?e.getVariationInfoByMasterId(t.variationID).id:ne.Original}return o&&!(0,c.k)((0,f.QX)().variationID)?(0,f.QX)().variationID:e.isAsync()?K(await g(),e.data.asyncVariationInfoById,l,e.getDynamicAllocationProperties(),e.getType()):K(await g(),e.data.variations,l,e.getDynamicAllocationProperties(),e.getType())},Z=e=>t=>{const{id:n,type:i}=t.data;if(t.getAbortSignal().aborted)return(0,y.c2)(`Campaign instance is outdated. Campaign ${n}`),!1;if(i===a.dF.subsegment&&t.hasBrotherAlreadyStarted())return t.setStatus(s.c.otherSubsegment),!1;if(t.isOneVisitorOneTestDone(e))return t.setStatus(s.c.oneVisitorOneTest),!1;const o=t.isChild()?t.getParent().data.priority:t.data.priority;return!(o>0&&(e=>{const t=oe.getCampaignsDatas(),n=oe.getActiveCampaigns();return Object.values(n).filter((n=>{const a=n.testDatas.parentID>0?t.find((e=>{let{id:t}=e;return t===n.testDatas.parentID}))?.priority||0:n.testDatas.priority;return 0!==a&&!e?.includes(a)}))})([o]).length>0)||(t.setStatus(s.c.notPrioritizedYet),!1)};var X=n(2244);const Q=864e5,ee=e=>{const t=new Date;return t.setUTCHours(e.getUTCHours()),t.setUTCMinutes(e.getUTCMinutes()),t.setUTCSeconds(e.getUTCSeconds()),t.setUTCMilliseconds(e.getUTCMilliseconds()),t},te=(e,t)=>{const n=t.getCampaign(e.data.id);if(!n)return!0;const{lastSessionSeen:i,lastViewTimestamp:s}=n,{type:o,unit:r,value:c}=e.getTargetingDisplayFrequency();switch(o){case a.oF.any:break;case a.oF.once:return!s;case a.oF.oncePerSession:if(s)return i!==t.getNumberOfSessions();case a.oF.regular:if(s)switch(r){case a.C_.session:return i===t.getNumberOfSessions()||i+c<=t.getNumberOfSessions();case a.C_.day:return((e,t)=>{const n=new Date(e),a=(ee(n).getTime()-e)/Q;return 0===a||a/t>=1})(s,c);case a.C_.week:return((e,t)=>{const n=new Date(e),a=ee(n);for(;a.getUTCDay()!==n.getUTCDay();)a.setUTCDate(a.getUTCDate()-1);const i=(a.getTime()-e)/Q/7;return 0===i||i/t>=1})(s,c)}}return!0};let ne=function(e){return e[e.Original=0]="Original",e[e.Untracked=-1]="Untracked",e[e.Timeout=-2]="Timeout",e}({});const ae={id:0,name:"Original",masterVariationId:0},ie={},se=e=>ie[e];class oe{abortController=new AbortController;constructor(e){const{id:t}=e;if(se(t))return se(t);this.data=e,this.forceUntracking=!1,ie[t]=this,this.initPublicData(),this.hasBeenChecked=this.memoizeHasBeenChecked()}static resetCampaigns(){Object.keys(ie).forEach((e=>{const t=se(Number(e));t.abortController.abort("Campaign has been reset."),t.chosenVariation=null,t.updatePublicData({id:null,name:null}),t.setStatus(s.c.pending),t.data.audienceTrigger&&(0,$.resetTargetingSuccess)(t.data.audienceTrigger),t.data.audienceSegment&&(0,$.resetTargetingSuccess)(t.data.audienceSegment),delete ie[e]}))}getType(){return this.data.type}getSubType(){if(this.isMultipageChild())return a.b0.multipageTest;if(this.isMultivariateChild())return a.b0.multivariate;if(this.isPersonalisationChild()){const e=oe.instanciate(this.data.parentID);return!!e&&e.data.sub_type||a.dF.subsegment}return a.dF.ab}getAdditionalType(){return this.data.additionalType||null}getConsentType(){return this.getAdditionalType()?this.getAdditionalType():this.isPersonalisation()||this.isPersonalisationChild()?"perso":"test"}getChildren(){return this.data.children||[]}getId(){return this.data.id}getName(){return this.data.name}getChosenVariation(){return this.chosenVariation}static instanciate(e){const t=oe.getCampaignData(e);if(t)return new oe(t)}static getActiveCampaigns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,r.z)(m(((t,n)=>{let{status:a,variationID:i}=t;return(null!==e&&e===Number(n)||null===e)&&[s.c.accepted,s.c.acceptedByRedirection].includes(a)&&null!==i&&i!==ne.Untracked})),p(((e,t)=>({...e,testDatas:se(t).data}))))(window.ABTasty.results)}static getCampaignData(e){return(0,o.ae)().tests[e]}static getCampaignsDatas(e){const t=e||(0,o.ae)(),{global:n,...a}=t.tests;return Object.values(a)}static sortCampaignsParentsByPrioASC(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.sort(((e,t)=>Number(e.priority)-Number(t.priority))).reduce(((e,n)=>{const{priority:a,parentID:i}=n,o=0!==i,r=oe.instanciate(n.id);if(o)return r.isPersonalisationChild()&&t&&r.setStatus(s.c.notPrioritizedYet),e;r.isPersonalisation()&&t&&r.setStatus(s.c.notChecked);const c=void 0!==e[a]?[...e[a],n]:[n];return{...e,[a]:c}}),{})}static getGlobalCampaignsInfos(e){const t=e||(0,o.ae)(),{global:n}=t.tests;return n}static getParentCampaignsIDs=e=>(0,r.z)((0,l.h)(h("parentID",0)),g("id"))(e);static getCampaignsSortedByPrio=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return oe.sortCampaignsParentsByPrioASC(e,t)};static filterCampaignByPrio=(e,t)=>e[t];getVariation(e){return e===ne.Original?ae:this.data.variations[e]}getVariationInfoByMasterId(e){return this.isAsync()?Object.values(this.data.asyncVariationInfoById).find((t=>this.data.variations[t.id].masterVariationId===e)):Object.values(this.data.variations).find((t=>t.masterVariationId===e))}getMasterVariationId(e){return this.getVariation(e).masterVariationId}getParent(){const e=oe.getCampaignData(this.data.parentID);return new oe(e)}getParentId(){return this.getParent().data.id}getParentName(){return this.getParent().data.name}getStatus(){return this.data.status||s.c.pending}getAbortSignal(){return this.abortController.signal}getSeenBrothers(e){const{parentID:t,siblings:n}=this.data;return 0===t||null==n||0===n.length?null:n.map((t=>{const n=e.getCampaign(t);return n?{campaignId:t,...n}:null})).filter((e=>!(0,c.k)(e)))}setStatus(e){this.data.status=e,(0,c.k)(window.ABTasty.results[this.data.id])&&this.initPublicData(),this.hasBeenCheckedResolve&&e!==s.c.checking&&this.hasBeenCheckedResolve(e),window.ABTasty.results[this.data.id].status=e}memoizeHasBeenChecked(){let e=null;return()=>e||(e=new Promise((e=>{this.hasBeenCheckedResolve=e})),e)}isContainer(){return[a.dF.multipage,a.dF.multivariate,a.dF.mastersegment].includes(this.data.type)}isChild(){return this.isMultipageChild()||this.isMultivariateChild()||this.isPersonalisationChild()}isMultivariate(){return this.data.type===a.dF.multivariate}isMultipage(){return this.data.type===a.dF.multipage}isPersonalisation(){return this.data.type===a.dF.mastersegment}isPatch(e,t){return(e||this.data.sub_type)===a.b0.patch||(t||this.data.additionalType)===a.$M.patch}isMultivariateChild(){if(0===this.data.parentID)return!1;return oe.instanciate(this.data.parentID).isMultivariate()}isMultipageChild(){if(0===this.data.parentID)return!1;return oe.instanciate(this.data.parentID).isMultipage()}isPersonalisationChild(){if(0===this.data.parentID)return!1;return oe.instanciate(this.data.parentID).isPersonalisation()}isDynamicAllocation(){return null!=this.data.dynamicTrafficGoalId&&""!==this.data.dynamicTrafficGoalId}isUsingHashAllocation(){return this.isChild()?this.getParent()?.data.isHashAllocationEnabled:this.data.isHashAllocationEnabled}getDynamicAllocationProperties(){return{isDynamic:this.isDynamicAllocation(),testedTraffic:this.data.dynamicTestedTraffic,modulation:this.data.dynamicTrafficModulation}}getTargetingDisplayFrequency(){const e={type:this.data.displayFrequencyType};return this.data.displayFrequencyUnit&&(e.unit=this.data.displayFrequencyUnit),this.data.displayFrequencyUnit&&(e.value=this.data.displayFrequencyValue),e}isAsync(){return this.data.isAsync||!1}isTargetByEvent(){return Boolean(this.data.scopes.urlScope?.find((e=>{let{value:t}=e;return t===V.Wx})))}isUsingCodeOnDomReady(){return this.isChild()?oe.instanciate(this.data.parentID).data.codeOnDomReady:this.data.codeOnDomReady}alreadySeenOneTest=e=>t=>{let n=!1;const{siblings:a=[]}=this.data,i=e.getCampaigns();return Object.keys(i).forEach((e=>{const s=(0,o.em)(Number(e)),r=i[e];null!=s&&null==s.type.match(/(mastersegment|subsegment)/)&&!this.isPatch(s.sub_type,s.additionalType)&&Number(e)!==t&&r.variationID!==ne.Untracked&&a.indexOf(Number(e))<0&&(n=!0)})),n};initPublicData(){const{id:e,name:t,type:n,status:a}=this.data,i={name:t,type:n,sub_type:this.getSubType(),additional_type:this.getAdditionalType(),status:a,variationID:this.chosenVariation,variationName:null,targetings:{[V.ge]:{},[V.D$]:{}}};window.ABTasty.results&&(window.ABTasty.results[e]=window.ABTasty.results[e]??i)}static updatePublicTargetingData(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V.k5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const s=window.ABTasty.results[e];if(void 0===s||!t)return;let o=s.targetings[a];if([V.RQ,V.GJ].indexOf(a)>-1){o=o||[];const e={success:n,conditions:t.conditions,targeting_type:t.targeting_type,operator:t.operator,name:Object.keys(M).find((e=>M[e]===t.targeting_type)),group:i};o=o.filter((t=>t.targeting_type!==e.targeting_type||t.group!==e.group)),o.push(e)}else o=o||{},o[t.targeting_type]={...o[t.targeting_type],conditions:t.conditions,success:n},a===V.k5&&(o[t.targeting_type]={...o[t.targeting_type],operator:t.operator,name:Object.keys(M).find((e=>M[e]===t.targeting_type))});s.targetings[a]=o,window.ABTasty.results[e]=s}updatePublicData(e){let{id:t,name:n}=e;window.ABTasty.results[this.data.id].variationID=t,window.ABTasty.results[this.data.id].variationName=n}hasSeenMaster(e){const{parentID:t}=this.data;return 0===t?null:!(0,c.k)(e.getCampaign(t))}hasMultivariateSibling(e){const{id:t,parentID:n,siblings:a}=this.data;if(0===n)return!1;if(null==a||0===a.length)return!1;const i=e.getCampaigns();return Object.keys(i).some((e=>Number(e)===t))}hasBrotherAlreadyStarted(){const{parentID:e,siblings:t}=this.data;return 0!==e&&(null!=t&&0!==t.length&&t.some((e=>oe.instanciate(e).getStatus()===s.c.accepted)))}hasAlreadySeenBrothers(e){const t=this.getSeenBrothers(e);return!(0,c.k)(t)&&!(0,d.x)(t)}isCheckingOtherCampaigns(){if(this.isPersonalisation()||this.isPersonalisationChild())return!1;return oe.getCampaignsDatas().filter((e=>{let{id:t}=e;const n=se(t);return t!==this.data.id&&!(0,c.k)(n)&&(!(n.isPersonalisation()||n.isMultipage()||n.isMultivariate())&&t!==this.data.id&&n.getStatus()===s.c.checking)})).length>0}isOneVisitorOneTestDone(e){const{oneVisitorOneTest:t}=(0,o.wy)(),{id:n,type:i,parentID:s}=this.data;if(t&&i!==a.dF.subsegment&&!this.isPatch()){let t=n;if(i===a.dF.ab&&this.isMultipageChild()&&(t=s),this.alreadySeenOneTest(e)(t)&&!this.hasMultivariateSibling(e))return!0}return!1}static abTastyStartTest=e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=se(t);if(void 0!==a){if(n===ne.Untracked)return void a.setStatus(s.c.traffic);if(n===ne.Timeout)return void a.setStatus(s.c.timeout);const i=e.getCampaign(t);!(0,c.k)(n)&&(0,c.k)(i)&&e.campaignView(t,n,s.c.accepted,!a.isUsingHashAllocation()),a.executeCampaign(e)}};async updateCampaign(e,t){if(!this.isAsync()||e===ne.Timeout||e===ne.Untracked)return;const n=await Promise.all(t.map((async e=>await async function(e,t,n){const a=`https://try.abtasty.com/${(0,o.Nn)()}/${e}.${t}.json?${n}`;let i=!1;const s=(()=>{try{return new AbortController}catch(e){(0,y.Kp)("Cannot create AbortController",e)}})(),r=setTimeout((()=>{i||(s?.abort(),(0,y.Kp)(`Modifications can't be fetched for ${e}`))}),3e3);return(0,U.tI)(`modifiationsFetchLoop_${e}`,r),(0,L.U)(a,{signal:s?.signal}).then((e=>e.json())).then((e=>(clearTimeout(r),e&&e._taginfo&&delete e._taginfo,i=!0,[e,null]))).catch((e=>(clearTimeout(r),[null,e])))}(this.data.id,Number(e),this.data.campaignHash)))),a=n.map((e=>{let[t]=e;return t})),i=n.map((e=>{let[,t]=e;return t})),r=a.find((t=>t?.id===e));i.every((e=>null===e))?(0,d.x)(r)||(this.data.variations={[e]:r}):i.some((e=>"AbortError"===e?.name))?this.setStatus(s.c.timeout):this.forceUntracking=!0}sendExecutedCampaignEvent(e){(new k.C).dispatchCustomEvent(i.A.Name.executedCampaign,{campaignId:this.data.id,variationId:this.getVariation(e).id,status:this.getStatus(),type:this.getSubType()})}async applyGlobalCode(e,t,n,a){E(e,null,t,n,a)}async executeCampaign(e){if(this.getAbortSignal().aborted)return(0,y.c2)(`Campaign instance is outdated. Campaign ${this.getId()}`),!1;const t=e.getVisitorId(),n=this.data.id,a=this.data.parentID,o=e.getCampaign(n);let r=await q(this,t,e,o,a,(0,f.uj)(this.getId()));return this.updateCampaign(r,this.data.asyncVariationInfoById?Object.keys(this.data.asyncVariationInfoById):[]).then((async()=>{const{id:t,parentID:n,status:a,name:o,variations:d,globalCode:l,widgets:u,analytics:g,customAnalytics:h,actionTrackings:m}=this.data;if(this.getAbortSignal().aborted)return(0,y.c2)(`Campaign instance is outdated. Campaign ${t}`),!1;a===s.c.timeout?r=ne.Timeout:this.forceUntracking&&this.isAsync()?(r=ne.Timeout,this.setStatus(s.c.failedLoading)):(0,f.uj)(t)?this.setStatus(s.c.acceptedByRedirection):this.setStatus(s.c.accepted),(0,y.um)("Campaign Viewed =",t,r),e.campaignView(t,r,this.data.status,!this.isUsingHashAllocation());const p=this.isUsingCodeOnDomReady();if([ne.Timeout,ne.Untracked].includes(r)||!d?.[r]&&r!==ne.Original)return this.forceUntracking&&r===ne.Timeout?(this.setStatus(s.c.failedLoading),!1):r===ne.Timeout?(this.setStatus(s.c.timeout),!1):(this.setStatus(s.c.traffic),!1);{const n={caid:String(t),vaid:String(r)};if((0,X.rJ)(e,this.getId()))(0,P.J)()?.then((e=>{if(this.getAbortSignal().aborted)return(0,y.c2)(`Campaign instance is outdated. Campaign ${t}`),!1;e.notifyHit(B.Re.campaign,n,Date.now())}));else{(new N.j).setInternalHit(B.Re.campaign,n)}(0,c.k)(l)||p||this.applyGlobalCode(l,this.getId(),r,!1),r===ne.Original||(0,f.uj)(t)||(this.chosenVariation=new I(t,d[r],p),await this.chosenVariation.apply(this.getAbortSignal())),(0,w.A)((async()=>{if(this.getAbortSignal().aborted)return(0,y.c2)(`Campaign instance is outdated. Campaign ${t}`),!1;!(0,c.k)(l)&&p&&this.applyGlobalCode(l,this.getId(),r,!0),m&&((0,c.k)(m)||(0,R.v)(e)(m,t));const n=this.getVariation(r),a=this.isChild()?this.getParent().data.analytics:void 0,s=!(0,c.k)(a)&&a.length>0?a:g;if(!(0,c.k)(s)||!(0,c.k)(h)){const e={campaignName:o,campaignId:t,variationName:n.name,variationId:n.id},a=()=>{(new j.yN).haveConsent([j.RX.collect])?D(s,e,h):window.addEventListener(`abtasty_${i.A.Name.consentValid}`,(e=>{const{detail:t}=e;t&&t.consentFor.includes(j.RX.collect)&&a()}))};(0,f.hS)()||a()}return this.updatePublicData(n),(0,f.hS)()||(0,X.n8)(e,this.getId()),this.sendExecutedCampaignEvent(r),!0}))}}))}async apply(e){const{id:t}=this.data;let n=!1;if((0,f.uj)(t))return this.executeCampaign(e),!0;if(!te(this,e))return this.setStatus(s.c.displayFrequency),!1;const a=(0,$.checkTargeting)(e,this);return await Promise.race([a,new Promise((e=>setTimeout((()=>{n=!0,e(!1)}),V.Vy)))])?(await this.executeCampaign(e),!0):(n&&a.then((async t=>{if(Z(e)(this)&&t)return await this.executeCampaign(e),!0})),!1)}}},4692:(e,t,n)=>{n.d(t,{cf:()=>y,QX:()=>g,FU:()=>m,hS:()=>p,WJ:()=>u,uj:()=>h});const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;const t=document.createElement("style");t.type="text/css";const n=".ABTastyHidden { display: none !important }";t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(t),document.getElementsByTagName("html")[0].setAttribute("class","ABTastyHidden"),setTimeout((()=>{const e=document.getElementsByTagName("html")[0];e.className=e.className.replace("ABTastyHidden","")}),e)};var i=n(3190),s=n(3827),o=n(4284),r=n(2247),c=n(5528),d=n(1042);const l={testID:null,variationID:null,previousLogicalView:null},u=()=>{l.testID=null,l.variationID=null,l.previousLogicalView=null,delete window.ABTasty.redirectedFrom},g=()=>l,h=e=>{const{testID:t}=g();return!(0,i.k)(t)&&t===e},m=()=>{if(p())return!1;if(g().testID)return!0;const e=new c.w,t=((0,s.re)(c.L.mrasn)||e.getMrasn()).split(".");if(t.length>=2){const n=t[2]&&t[2].length>0?t[2]:null,a=t[3]?Number[t[3]]:null;return!(a&&Date.now()-a>=1e4)&&(((e,t,n)=>{l.testID=e,l.variationID=t,l.previousLogicalView=n})(Number(t[0]),Number(t[1]),n),window.ABTasty.redirectedFrom={...g()},e.setMrasn(""),!0)}return!1},p=()=>!!window.ABTasty.pendingRedirection,y=(e,t,n)=>{const{ATInternetReferrer:l,transferParameters:u,isRegex:g,target:h,pattern:y}=e[0];if((0,i.k)(h))return void(0,d.Kp)(`Couldn't apply redirection of campaign ${t} and variation ${n}`);const f=new RegExp(c.L.mrasn);if(p()||m()||f.test(h))return;a(1e3),window.ABTasty.pendingRedirection=!0;let v=h;if(g&&(v=((e,t,n)=>{let a=e;const i=new RegExp(n,"gi");t.includes("?")&&document.location.href.includes("?")&&(a=t.replace("?","&")),a=document.location.href.replace(i,a);const s=a.substr(0,a.indexOf("#"));return a.includes("?")||""!==s&&!s.includes("&")||(a=a.replace("&","?")),a})(v,h,y)),u&&(v=(0,s.ST)(v,window.location.href)),v=(0,s.CL)(v),v=((e,t,n)=>{const a=(0,r.aO)()||"",i=[t,n];if(i.push(a),(0,o.ae)().accountSettings.hashMrasnAllowed){const t=i.filter((e=>e.toString().length>0)).join(".");return(0,s.oe)("mrasn",t,e)}{i.push(Date.now());const e=new c.w;e.setMrasn(i.join(".")),e.save()}return e})(v,t,n),l&&document.referrer){const e=new URL(document.referrer).hostname;v=(0,s.oe)("xtref",e,v)}/MSIE/.test(navigator.userAgent)&&(v=v.replace("&","&#38")),window.location.replace(v),a(1)}},9707:(e,t,n)=>{n.r(t),n.d(t,{addCheckTargetingListener:()=>c,allowedStatus:()=>o,checkTargetingEventName:()=>r});var a=n(1789),i=n(1170),s=n(6012);const o=[s.c.checking,s.c.pending,s.c.qaMode,s.c.targetPages,s.c.trigger,s.c.segment,s.c.rejected,s.c.audience,s.c.targetByEventPending],r="abtasty_checkTargeting",c=(()=>{let e=!1;return function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e=!1),e||(e=!0,window.addEventListener(r,(e=>{if(!e.detail)return;const{campaignId:n,withUrl:s,shouldCheckAll:r}=e.detail;n&&(e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(0,i.s)(t);r&&o.includes(r.getStatus())&&(s&&(r.data.audienceTrigger&&(0,a.resetTargetingSuccess)(r.data.audienceTrigger),r.data.audienceSegment&&(0,a.resetTargetingSuccess)(r.data.audienceSegment)),(n?await(0,a.checkTargeting)(e,r):await(0,a.checkScopesAndAudiences)(e,!0,r))&&await r.executeCampaign(e))})(t)(n,s,r)})))}})()},1789:(e,t,n)=>{n.r(t),n.d(t,{audienceUseTargetingType:()=>Q,checkAudiences:()=>j,checkScopes:()=>$,checkScopesAndAudiences:()=>x,checkTargeting:()=>H,containsOnlyOnceTargetings:()=>W,handleTargetingFailure:()=>q,handleTargetingSuccess:()=>z,isOnceTargeting:()=>F,pendingModeLoader:()=>J,recheckTargetingByHit:()=>c,registerPendingCriteria:()=>K,resetTargetingSuccess:()=>Z,storeTargetingSuccess:()=>X,waitDatalayerDetection:()=>ce,waitForTargetingAvailability:()=>re});var a=n(5136),i=n(3190),s=n(9707),o=n(1170);const r=(e,t,n)=>n.filter((e=>{let{targetingMode:t}=e;return"noajax"===t})).filter((n=>{let{id:a,audienceTrigger:r,audienceSegment:c}=n;const d=(0,o.s)(a);return!(!d||!s.allowedStatus.includes(d.getStatus()))&&("segment"!==t||(0,i.k)(c)?"trigger"===t&&!(0,i.k)(r)&&Q(r,e):Q(c,e))})).map((e=>{let{id:t}=e;return t})),c=(e,t)=>{const n=o.Campaign.getCampaignsDatas(),i=[];switch(e.toUpperCase()){case"EVENT":const{ec:e}=t;"eco"===e?i.push(...r(a.ECOMMERCE_VARIABLE,"trigger",n)):"Action Tracking"===e&&i.push(...r(a.ACTION_TRACKING,"segment",n));break;case"CAMPAIGN":i.push(...r(a.CAMPAIGN_EXPOSITION,"segment",n));break;case"TRANSACTION":case"ITEM":i.push(...r(a.LAST_PURCHASE,"segment",n)),i.push(...r(a.PURCHASE_FREQUENCY,"segment",n));break;case"SEGMENT":i.push(...r(a.CUSTOM_VARIABLE,"segment",n)),i.push(...r(a.INTEGRATIONS_PROVIDER,"segment",n))}i.forEach((e=>{const t=new CustomEvent(s.checkTargetingEventName,{detail:{campaignId:e,shouldCheckAll:!0,withUrl:!0}});window.dispatchEvent(t)}))};var d=n(1042),l=n(4284),u=n(6845),g=n(3827),h=n(1943);const m={[h.xz]:"equals",[h.DC]:"contains",[h.o1]:"regexp",[h.BH]:"ignore_parameters"};function p(e){let{value:t,condition:n}=e;return(0,g.rl)(m[n],t)}var y=n(83),f=n(6012);function v(e,t){d.vU("Scope error (code)",t)}var w=n(6049),A=n(1438);async function T(e,t,a){try{const i=await Promise.all(e.map((e=>async function(e){let{value:t,include:a}=e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;return(0,w.Q)().then((async e=>{if(void 0!==e)return(await e(t).promise()).length>0;{const e=(0,A.Zt)(t);return Promise.resolve(Boolean(document.querySelector(e)))}})).then((async e=>{const o=a?e:!e;return i&&s&&!o&&Promise.all([Promise.resolve().then(n.bind(n,9707)),Promise.resolve().then(n.bind(n,7791))]).then((e=>{let[n,i]=e;i.addObservance(t,a,(()=>{const e={campaignId:s},t=new CustomEvent(n.checkTargetingEventName,{detail:e});window.dispatchEvent(t)}))})),o}))}(e,a,t))));return i.some((e=>e))}catch(t){const n="Scope error (selector)";return d.vU(n,e),!1}}var C=n(1955);function S(e){let{name:t,value:n,include:a}=e;const i=C.Z.get(t);let s=!1;return(i||""===i)&&(s=!0,null!=n&&(s=null!==i.match(new RegExp(n,"i")))),a?s:!s}const E=(0,n(1117).W)(((e,t)=>{const n={};return t.forEach((t=>{const a=e(t);n[a]=n[a]||[],n[a].push(t)})),n}));var b=n(8206);const I=e=>t=>{let{range:n,from:a,to:i}=t;return n?e>=Number(a)&&e<=Number(i):e===Number(a)};function k(e){return void 0!==e.favorite_url_id}function O(e,t){let{url:n,operator:a}=e;return(0,g.rl)(a,n,t)}function _(e,t){let{favorite_url_id:n}=e;return function(e,t){const n=e.filter((e=>{let{include:t}=e;return!t})),a=e.filter((e=>{let{include:t}=e;return t}));return!n.some((e=>O(e,t)))&&(!!a.some((e=>O(e,t)))||0===a.length)}(t.filter((e=>{let{favorite_url_id:t}=e;return t===n})))}var D=n(5536);const R=e=>e,N={url_scope:{method:e=>Promise.resolve(function(e){try{const t=e.filter((e=>{let{include:t}=e;return!t})),n=e.filter((e=>{let{include:t}=e;return t}));return!(t.some(p)||!n.some(p)&&0!==n.length)}catch(t){const n="Scope error (currentUrl)";return d.vU(n,e),!1}}(e)),group:D.ge},favorite_url_scope:{method:e=>Promise.resolve(function(e){let{urlScopes:t,favoriteUrlScopeConditions:n}=e;try{const e=t.filter((e=>{let{include:t}=e;return!t})),a=t.filter((e=>{let{include:t}=e;return t}));return!(e.some((e=>k(e)?_(e,n):p(e)))||!a.some((e=>k(e)?_(e,n):p(e)))&&0!==a.length)}catch(e){const n="Scope error (CurrentFavoriteUrlCondition)";return d.vU(n,t),!1}}(e)),group:D.ge},code_scope:{method:async function(e,t){return Promise.all(e.map((n=>{let{value:a,isAsync:i}=n;if(i){return(0,o.s)(t).setStatus(f.c.waitingCodeResolution),new Promise((async(e,n)=>{const i={resolve:e,reject:n};await!!(0,y.w)(a,t,void 0,void 0,i)})).then((e=>e)).catch((t=>(v(0,e),!1)))}try{return(0,y.w)(a,t)}catch(t){return v(0,e),Promise.resolve(!1)}}))).then((e=>e.every((e=>!!e))))},group:D.ge},selector_scope:{method:(e,t,n)=>Promise.resolve(T(e,t,n)),group:D.ge},cookie_scope:{method:e=>Promise.resolve(function(e){try{return e.some(S)}catch(t){const n="Scope error (cookie)";return d.vU(n,e),!1}}(e)),group:D.D$},ip_scope:{method:e=>Promise.resolve(function(e){try{const{exclusions:t,inclusions:n}=E((e=>{let{include:t}=e;return t?"inclusions":"exclusions"}),e),a=(0,A.uY)((0,b.vz)());return!(t&&t.some(I(a))||(!n||!n.some(I(a)))&&n)}catch(t){const n="Scope error (IP)";return d.vU(n,e),!1}}(e)),group:D.D$}};async function P(e,t,n){const{id:a,mutationObserverEnabled:i}=n,s=N[t].method,r=N[t].group,c=await s(e,a,i);return d.um("Applying scope",t," for ",n,"result = ",c),o.Campaign.updatePublicTargetingData(a,{conditions:e,targeting_type:t},c,r),c}async function B(){let{codeScope:e,selectorScope:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;const a=[!e?.length||P(e,"code_scope",n).catch((e=>e)),!t?.length||P(t,"selector_scope",n).catch((e=>e))];return Promise.all(a).then((e=>e.every(R)))}async function M(){let{cookieScope:e,ipScope:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;const a=[!e?.length||P(e,"cookie_scope",n).catch((e=>e)),!t?.length||P(t,"ip_scope",n).catch((e=>e))];return Promise.all(a).then((e=>e.every(R)))}var V=n(3555),L=n(2662);const U=e=>(t,n)=>{let{oneVisitorOneTest:a}=n;const{id:i,status:s,type:o}=t.data;return s&&s===f.c.accepted?((0,d.um)(`campaign:: Campaign ${i} has already been accepted`),!1):s&&s===f.c.checking?((0,d.um)(`campaign:: Campaign ${i} is already in checking state`),!1):o===L.dF.subsegment&&t.hasBrotherAlreadyStarted()?(t.setStatus(f.c.otherSubsegment),!1):!t.isOneVisitorOneTestDone(e)||(t.setStatus(f.c.oneVisitorOneTest),!1)},$=e=>{const{scopes:t}=e.data;return Promise.all([B(t,e.data),M(t,e.data)])},j=(e,t)=>{const{audienceTrigger:n,audienceSegment:a}=t.data;return Promise.all([(0,u.ZN)(e)(t.data,n).catch((e=>e)),(0,u.ZN)(e)(t.data,a).catch((e=>e))])},x=async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const{oneVisitorOneTest:a}=(0,l.wy)();if(t&&!U(e)(n,{oneVisitorOneTest:a}))return!1;n.setStatus(f.c.checking);const i=await $(n);if(i.every((e=>e))){const t=await j(e,n);return t.every((e=>e))?z(n):q(t,[f.c.trigger,f.c.segment],e,n)}return q(i,[f.c.targetPages,f.c.qaMode],e,n)},H=async(e,t)=>{const{oneVisitorOneTest:n}=(0,l.wy)(),{id:a,audienceTrigger:s,scopes:r}=t.data;if(!(e=>(t,n)=>{let{oneVisitorOneTest:a}=n;return t.isTargetByEvent()?(t.setStatus(f.c.targetByEventPending),!1):U(e)(t,{oneVisitorOneTest:a})})(e)(t,{oneVisitorOneTest:n}))return!1;if(t.setStatus(f.c.checking),await ce(s),await re(a),t.isDynamicAllocation())try{await(0,V.f_)()}catch(e){(0,d.Kp)(`Allocation fetch failed (campaign ${a} will not be able to run corectly)`)}if(t.isPersonalisationChild()&&t.data.siblings&&t.data.siblings.length>0){t.setStatus(f.c.waitingForSubsegmentCheck);const e=[t.data.id,...t.data.siblings].sort(),n=await(async(e,t)=>{const n=t.map((t=>{const n=(0,o.s)(t);return e.data.priority>1&&n.data.priority<e.data.priority||n.data.id<e.data.id?n:null})).filter((e=>!!e));return Promise.all(n.map((e=>[f.c.checking,f.c.waitingForSubsegmentCheck].includes(e.getStatus())?e.hasBeenChecked():Promise.resolve(e.getStatus()))))})(t,e).then((e=>e.includes(f.c.accepted)));if(n)return t.setStatus(f.c.otherSubsegment),!1}const c=void 0!==r&&await async function(e,t){let{urlScope:n,favoriteUrlScope:a,favoriteUrlScopeConditions:s}=e;const o=a?.length;if(o){const e=(0,i.k)(n)?a:[...n,...a];return await P({urlScopes:e,favoriteUrlScopeConditions:s},"favorite_url_scope",t)}{const e=await P(n,"url_scope",t);return!n?.length||e}}(r,t.data);return c?x(e,!1,t):((0,d.um)("Targeting rejected."),t.setStatus(f.c.targetPages),!1)};var G=n(5263);const F=e=>[...G.DCInfosTargetings,...G.OnceTriggerTargetings,...G.OnceSegmentTargetings].includes(e),W=(e,t)=>e.filter((e=>e?.targeting_groups?.length)).map((e=>{let{targeting_groups:t}=e;return t.map((e=>{let{targetings:t}=e;return t.map((e=>{let{targeting_type:t}=e;return t}))})).reduce(((e,t)=>e.concat(t)),[])})).reduce(((e,t)=>e.concat(t)),[]).every((e=>!(0,i.k)(e)&&F(e)))&&["codeScope","selectorScope","cookieScope"].every((e=>!t[e]?.length)),K=(()=>{const e={};return function(t,n){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&Object.keys(e).forEach((t=>delete e[t])),(0,i.k)(t)||(0,i.k)(n)||(e[`${t}`]?e[`${t}`].push(n):(e[`${t}`]=[n],(t=>{setTimeout((()=>{const n=e[t];delete e[t],n&&n.forEach((e=>e()))}),t)})(t)))}})(),J=()=>Promise.resolve({});var Y=n(9267);const z=async e=>{const{id:t,targetingMode:n}=e.data;return e.getAbortSignal().aborted?((0,d.c2)(`Campaign instance is outdated. Campaign ${t}`),!1):((0,d.Vp)(`Targeting OK (campaign ${t})`),n===L.Cd.waitUntil&&await J().then((t=>{"removeCampaignFromPendingMode"in t&&t.removeCampaignFromPendingMode(e)})),!0)},q=async(e,t,n,a)=>{if(a.getAbortSignal().aborted)return(0,d.c2)(`Campaign instance is outdated. Campaign ${a.getId()}`),!1;const{targetingMode:i,audienceTrigger:s,audienceSegment:o,scopes:r}=a.data,c=[s,o].filter((e=>void 0!==e));if((i===L.Cd.fastest||[L.Cd.noAjax].includes(i))&&!(0,Y.A)())return(0,d.c2)("Targeting waiting for DOM Ready."),a.setStatus(f.c.pending),(0,Y.A)((async()=>{await x(n,!0,a)&&await a.executeCampaign(n)})),!1;const l=()=>((0,d.um)("Targeting rejected."),e.some(((e,n)=>(e||a.setStatus(t[n]),!e))),!1),u=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return await J().then((t=>{if("startPendingMode"in t&&"isPendingModeOver"in t){const{startPendingMode:i,isPendingModeOver:s}=t;if(!e||!W(c,r)&&!s())return(0,d.c2)("Targeting loop."),a.setStatus(f.c.pending),i(a,(async()=>!!await x(n,!0,a)&&(await a.executeCampaign(n),!0))),!1}return l()}))};return i===L.Cd.waitUntil?await u((0,Y.A)()):(0,Y.A)()?l():await u(!1)},Z=e=>{e.targeting_groups.forEach((e=>{e.targetings.forEach((e=>{delete e.success}))}))},X=(e,t)=>{e.success=t},Q=(e,t)=>e.targeting_groups&&e.targeting_groups.some((e=>e.targetings&&e.targetings.some((e=>e.targeting_type===t))));var ee=n(2022),te=n(1155);n(8669);const ne="DCInfos",ae={dcInfosWait:{promise:null,resolve:null,reject:null},dcInfosData:null};function ie(){return ae.dcInfosWait.promise}function se(){try{const e=sessionStorage.getItem(ne);return!(0,i.k)(e)&&e.length>0?JSON.parse(e):window.ABTasty.DCInfos}catch(e){return d.vU("Error parsing dcinfos",e),null}}!function(){const e=ae.dcInfosWait;e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n}))}();var oe=n(4564);const re=async e=>{const t=`fetch failed (campaign ${e} will not be able to be checked)`,n=async(e,n,a)=>{if(e())try{return await n(),!0}catch(e){return(0,d.Kp)(`${a} ${t}`),!1}return!1},a=[n((()=>(0,u.xj)(e)&&(0,i.k)(se())),ie,"DCInfos"),n((()=>(0,u.fJ)(e)),b.If,"IP"),n((()=>(0,u.dT)(e)),b.Bb,"Geolocation"),n((()=>(0,u.dN)(e)),(async()=>await(0,oe.r)(!0)),"Parsed UserAgent")];(0,u.Uo)(e)&&a.push((0,ee.Pf)()),await Promise.all(a)},ce=async e=>{if("boolean"!=typeof window.ABTasty.datalayerEnabled&&e&&Q(e,a.DATALAYER))return await(0,te.X_)((()=>"boolean"==typeof window.ABTasty.datalayerEnabled))}},6012:(e,t,n)=>{n.d(t,{c:()=>a});let a=function(e){return e.accepted="accepted",e.pending="pending",e.rejected="rejected",e.oneVisitorOneTest="one_visitor_one_test",e.traffic="traffic_rejected",e.timeout="timeout",e.checking="currently_checking",e.otherSubsegment="another_subsegment_already_started",e.targetByEventPending="target_by_event_pending",e.acceptedByRedirection="accepted_by_redirection",e.targetPages="target_pages_rejected",e.qaMode="qa_parameters_rejected",e.audience="audience_rejected",e.trigger="trigger_rejected",e.segment="segment_rejected",e.notChecked="master_campaign_not_checked",e.waitingForSubsegmentCheck="other_subsegment_is_checking",e.consent="campaign_type_rejected_by_consent",e.failedLoading="deferred_loading_failed",e.notPrioritizedYet="not_prioritized_yet",e.geoipConsent="geolocation_rejected_by_consent",e.waitingCodeResolution="waiting_code_resolution",e.displayFrequency="display_frequency_rejected",e}({})},7649:(e,t,n)=>{n.d(t,{G:()=>c,Y:()=>s});var a=n(1042),i=n(7806);const s="c:abtasty2-izjJRMEi",o=["cookies","improve_products","measure_content_performance"];function r(){return"object"==typeof window.Didomi&&"function"==typeof window.Didomi.getUserStatus&&window.Didomi.getUserStatus()||void 0}function c(e,t,n){a.c2("Consent compliance check: Waiting for Didomi loaded and start.");const c=setTimeout((()=>n()),5e3);(0,i.tI)("didomiTimeout",c);const d=()=>{a.um("Consent compliance check: Start Didomi consent check."),clearTimeout(c);const i=e||s;!(!window.Didomi.getUserConsentStatusForVendor(i)||!e&&!o.every((e=>!!window.Didomi.getUserConsentStatusForPurpose(e))))?t():n()};r()?d():(window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((()=>{r()&&d()}))),window.didomiEventListeners=window.didomiEventListeners||[],window.didomiEventListeners.push({event:"consent.changed",listener:d})}},8957:(e,t,n)=>{n.d(t,{yN:()=>E,RX:()=>S,zn:()=>T});var a=n(7947),i=n(2109),s=n(1042),o=n(7352),r=n(4284),c=n(5686),d=n(4874);var l=n(1955),u=n(457),g=n(1943);var h=n(7649);function m(e,t,n){return s.um("Consent compliance check: Executing custom code."),new Promise(((t,n)=>{try{new Function("abResolve",e.value)(t)}catch(e){n(e)}})).then((e=>{e?t():(s.Kp("Consent compliance check: custom code return false"),n())})).catch((e=>{s.vU("Consent compliance check: could not execute custom code",e),n()}))}function p(e,t,n){s.um("Consent compliance check: Executing custom code.");const a=()=>t(),i=()=>new Function(e.value)();try{if(i())a();else{const e=setInterval((()=>{s.c2("Consent compliance check (loop): Executing custom code."),i()&&(clearInterval(e),a())}),500);(0,u.oo)("consentCustomJs",e),n()}}catch(e){s.vU("Consent compliance check: could not execute custom code",e),n()}}const y="abtasty_grantConsent",f="abtasty_revokeConsent";var v=n(2622),w=n(6125),A=n(4892);const T=200;let C,S=function(e){return e.start="start",e.test="test",e.perso="perso",e.aa="aa",e.patch="patch",e.redirection="redirection",e.storage="storage",e.collect="collect",e.dmp="dmp",e.geoloc="geoloc",e}({});class E extends A.d{constructor(){if(super(),C)return C;const{waitForConsent:{mode:e,campaignRestrictions:t,data:n}}=(0,r.wy)();this.mode=e,this.data=n,this.isStrict=!!Object.keys(t).length&&!Object.values(t).filter((e=>!e)).length,this.campaignRestrictions=t,this.consentAtInit=c.Es.exists(),this.isListen=!1,this.isValid=!1,this.setConsentReady(!1),this.consentFor=Object.keys(t).filter((e=>!t[e])).map((e=>e)),this.isStrict||this.consentFor.push(S.start),C=this,this.shouldListen()?(d.Jo.setState("inmemory",!this.consentAtInit),this.listen()):this.valid()}static resetInstance(){C=null}haveConsent(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.values(S)).every((e=>this.consentFor.includes(e)))}sendConsentHit(e){(async()=>{const t={co:e};(new v.j).setInternalHit(w.Re.consent,t)})()}emitConsentValidEvent(){const e=new CustomEvent("consentValid");document.dispatchEvent(e),(new o.C).dispatchCustomEvent(i.A.Name.consentValid,{mode:(0,r.wy)().waitForConsent.mode,consentFor:this.consentFor})}valid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.values(S);this.isValid=!0,this.setConsentReady(!0),this.notify("general.consent"),this.consentFor=[...this.consentFor,...e],(0,s.um)("Consent compliance check: Consent has been granted."),this.haveConsent([S.storage])&&(async()=>{const e=await c.Es.build(),t=e.sessionCookie;e.save(),t.save(),d.Jo.migrate()})(),!this.consentAtInit&&this.isListen&&this.sendConsentHit(!0),this.emitConsentValidEvent(),this.consentAtInit=c.Es.exists(),this.isListen=!1}revoke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.values(S);this.isValid=!1,this.shouldRevoke()&&(this.consentFor=this.consentFor.filter((t=>t===S.start&&!this.isStrict||(Object.keys(this.campaignRestrictions).includes(t)?!this.campaignRestrictions[t]:!e.includes(t)))),this.consentFor.length===Object.values(S).length&&(this.isValid=!0),(0,s.um)("Consent compliance check: Consent has been revoked."),this.haveConsent([S.storage])||(async()=>{d.Jo.migrate(),(await c.Es.build()).clearAll(),this.setConsentReady(!1),this.notify("general.consent")})(),this.sendConsentHit(!1))}shouldRevoke(){return!this.isValid&&c.Es.exists()}shouldListen(){return this.mode===a.n8.userAction&&!c.Es.exists()||![a.n8.thirdParty,a.n8.disabled,a.n8.userAction].includes(this.mode)}listen(){if(!this.isListen)switch(this.isListen=!0,this.mode){case a.n8.userAction:!function(e){s.c2("Consent compliance check: Waiting for a visitor's action.");const t=()=>{document.removeEventListener("mousedown",t,!0),document.removeEventListener("touchmove",t,!0),window.removeEventListener("scroll",t,!0),e()};document.addEventListener("mousedown",t,!0),document.addEventListener("touchmove",t,!0),window.addEventListener("scroll",t,!0)}((e=>this.valid(e)));break;case a.n8.anyCookie:!function(e){s.c2("Consent compliance check: Waiting for any cookie deposit on the website.");const t=()=>e(),n=()=>document.cookie.length>0;if(n())t();else{const e=setInterval((()=>{n()&&(clearInterval(e),t())}),T);(0,u.oo)("consentAnyCookie",e)}}((e=>this.valid(e)));break;case a.n8.specificCookie:!function(e,t,n){s.c2(`Consent compliance check: Waiting for "${e.name}" cookie deposit on the website.`);const a=()=>t(),i=()=>{const{condition:t,value:n,name:a}=e,i=l.Z.get(a);if(!i)return!1;switch(Number(t)){case g.o1:return new RegExp(n).test(i);case g.DC:return i.indexOf(n)>-1;case g.xz:default:return i===n}};if(i())a();else{const e=setInterval((()=>{i()&&(clearInterval(e),a())}),T);(0,u.oo)("consentSpecificCookie",e),n()}}(this.data,(e=>this.valid(e)),(e=>this.revoke(e)));break;case a.n8.didomi:(0,h.G)(this.data,(e=>this.valid(e)),(e=>this.revoke(e)));break;case a.n8.customJs:(this.data.isAsync?m:p)(this.data,(e=>this.valid(e)),(e=>this.revoke(e)));break;case a.n8.customEvent:((e,t)=>{s.c2("Consent compliance check: Waiting for custom event.");const n=()=>(s.c2("Consent compliance check: Custom event triggered. Consent granted"),e()),a=()=>(s.c2("Consent compliance check: Custom event triggered. Consent revoked"),t());!0===window.abtastyGrantConsent&&(s.c2("Consent compliance check: window.abtastyGrantConsent is truthy. Consent granted"),n()),window.addEventListener(y,n),window.addEventListener(f,a)})((e=>this.valid(e)),(e=>this.revoke(e)));break;default:this.valid()}}getConsentReady(){return this.consentReady}setConsentReady(e){this.consentReady=e,window.ABTasty.consentReady=e}notify(e){this.mediator?.notify(e,{started:!0})}}},83:(e,t,n)=>{n.d(t,{w:()=>h});var a=n(6049),i=n(1155),s=n(1042),o=n(1955),r=n(5686),c=n(5528),d=n(763),l=n(8206),u=n(4564),g=n(1170);async function h(e,t,n,h,m){if(void 0===e)return!1;try{const s=await(0,a.Q)(),h={doWhen:i.VH,jsCookie:o.Z,ABTastyCookie:r.Es,ABTastySessionCookie:c.w,ABTastyLocalStorage:d.T,getGeoloc:l.Si,getParsedUserAgent:u.r,campaignId:t,variationId:n,campaign:t?g.Campaign.instanciate(t):void 0,getParsedUserAgentAsync:async()=>await(0,u.r)(!0)};let p,y=e;return y=y.replace(/\$\.doWhen/g,"HELPERS.doWhen"),p=void 0===s?new Function("HELPERS","abResolve",y)(h,!!m&&m.resolve):new Function("$","jQuery","HELPERS","abResolve",y)(s,s,h,!!m&&m.resolve),p}catch(e){const a=void 0!==t?void 0!==n?`Campaign ${t} | Variation ${n}`:`Campaign ${t}`:void 0!==h?`Script fragment: Additional information ${h}`:"Global Script";return(0,s.Kp)(`${a} - Error during custom code execution (or code targeting)`,e),!(!m||!m.reject)&&m.reject(e)}}},4892:(e,t,n)=>{n.d(t,{d:()=>a});class a{setMediator(e){this.mediator=e}}},2247:(e,t,n)=>{n.d(t,{EF:()=>r,aO:()=>c,kb:()=>o});var a=n(1271),i=n(3190);let s=null;function o(){(0,i.k)(c())||r();const e=(0,a.kP)("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",8);s=e()}const r=()=>s=null,c=()=>s},4436:(e,t,n)=>{n.r(t),n.d(t,{mainTag:()=>ge});var a=n(1042),i=n(8194),s=n(1955),o=n(4284),r=n(1170),c=n(5686),d=n(6529),l=n(8957),u=(n(6845),n(3827));let g=document.location.href,h=!1;const m=[];function p(){document.location.href!==g&&((0,a.um)("Url change detected",`${m.length} callback to apply`),g=document.location.href,m.forEach((e=>e())))}function y(e){m.push(e),h||(h=!0,new MutationObserver((e=>{e.forEach(p)})).observe(window.document,{childList:!0,subtree:!0}))}var f=n(2022),v=n(1155),w=n(2109),A=n(7352),T=n(3492),C=n(5536),S=n(2247),E=n(8206),b=n(4564),I=n(7806),k=n(83),O=n(9267),_=n(4692);var D=n(6012),R=n(8302),N=n(838);const P={abtasty_editor:"https://teddytor.abtasty.com",abtasty_editor_local:"https://local.editorv3.abtasty.com",abtasty_editor_preprod:"https://preprod-editorv3.abtasty.com"};function B(){return Object.keys(P).find((e=>(0,u.gy)(e)&&(0,u.re)(e)))}function M(){const e=B();if(!e)return void(0,a.Kp)("The tag could not find which editor to launch");const t=(0,u.re)(e);t?(0,N.u)(P[e]+"/dist/main.js",{attributes:{id:"abtasty-editor","data-campaignid":t}}):(0,a.Kp)("The tag could not find which testID the editor should use")}const V={prod:"https://app.abtasty.com",local:"https://local.app.abtasty.com",preprod:"https://preprod-app.abtasty.com"};function L(){const e=Object.keys(V).find((e=>(0,u.z3)("env")===e))||"prod";if(e)try{let t={testId:0,variationId:r.u.Original};(0,u.z3)("testId")&&(0,u.z3)("variationId")?t={testId:Number((0,u.z3)("testId")),variationId:Number((0,u.z3)("variationId"))}:null!==sessionStorage.getItem("ABTastyPreview")&&(t=JSON.parse(sessionStorage.getItem("ABTastyPreview")));let n=V[e];n+=`/ready/previewVariation.php?testID=${t.testId}`,n+=`&variationID=${t.variationId}`,n+=null!=(0,u.z3)("hideBar")?"&hideBar=true":"",n+=(0,u.z3)("disabledModifications")?`&disabledModifications=${(0,u.z3)("disabledModifications")}`:"",(0,N.u)(n)}catch(e){const t="Preview mode error";return(0,a.vU)(t,e),!1}else(0,a.Kp)("The tag could not find which preview to launch")}var U=n(5528),$=n(6541),j=n(2622),x=n(4334),H=n(1789),G=n(3190),F=n(4874),W=n(7787);const K=e=>{const t=(e=>!e&&"object"!=typeof e||!Object.values(e).every((e=>"string"==typeof e)))(e);if(t)(e=>{a.Kp("'CustomIdentities' cannot be set, format is not correct. It should be a dict of {string: string}",e)})(e);else{(e=>{if(!e&&"object"!=typeof e)return;const t=JSON.parse(F.Jo.getItem(F.vR,W.I.CUSTOM_IDENTITIES))||{},n=e;Object.entries(n).forEach((e=>{let[n,a]=e;(0,G.k)(a)||(t[n]=a)})),F.Jo.setItem(F.vR,W.I.CUSTOM_IDENTITIES,JSON.stringify(t))})(e);const t=w.A.Name.identityAdded;(new A.C).dispatchCustomEvent(t)}},J=()=>{window.abtasty=window.abtasty||{},window.abtasty.addCustomIdentity=K};var Y=n(2533),z=n(6125);const q={[z.Re.consent]:"onConsent",[z.Re.campaign]:"onCampaign",[z.Re.event]:"onEvent",[z.Re.item]:"onItem",[z.Re.pageview]:"onPageview",[z.Re.segment]:"onSegment",[z.Re.transaction]:"onTransaction",[z.Re.visitorevent]:"onVisitorevent",[z.Re.nps]:"onNps",[z.Re.datalayer]:"onDatalayer",[z.Re.product]:"onProduct"},Z=e=>{const t=(new c.Es).getNumberOfSessions();e.forEach((e=>{"pull"===e.connectorType?(async(e,t,n)=>{if(void 0===n||""===n)return;let a=[];if(t.segmentHash){const e=`https://try.abtasty.com/${(0,o.Nn)()}/integrations/${t.provider}.json?${t.segmentHash}`,n=await fetch(e);a=await(n.ok?n.json():Promise.resolve([]))}Function("session","settings",`\n    !function(session, settings){\n      try {\n        ${n}\n        onRequest(session, settings);\n      } catch(e){\n        console.log(\`AB Tasty: error while executing connector \${settings.provider}: \`, e.message)}\n      }(session, settings)\n  `)(e,{...t,segmentList:a})})({pv:t},{provider:e.name,conf:e.conf,logger:{info:a.um,error:a.vU},segmentHash:e.segmentHash,instances:e.instances},e.code).catch((e=>{(0,a.vU)(e)})):(async(e,t)=>{if(!t)return;const n=Function(`\n    return (function(){\n      try{\n        ${t}\n        return getConnectors();\n      }catch(e){\n        console.log(\`AB Tasty: error while setting up push connector \${event.provider}: \`, e)\n      }\n    })()\n  `)()||{};Object.entries(q).forEach((t=>{let[a,i]=t;i in n&&window.ABTasty.hitServiceNotifierSubscribe(n[i],a,e)}))})({provider:e.name,conf:e.conf,logger:{info:a.um,error:a.vU},instances:e.instances},e.code).catch((e=>{(0,a.vU)(e)}))}))};var X=n(7196);n(45),n(7871);const Q={hasRefreshed:!1,callbacks:[]};class ee{jsCacheRefreshed=!1;constructor(e,t,n,a){this.visitorId=e,this.consent=t,this.started=n,this.lastUpdateDate=a,this.jsCacheRefreshed=(e=>(e&&Q.callbacks.push(e),Q.hasRefreshed))((e=>this.setJsCacheRefreshed(e))),this.dataV1={visitorId:this.visitorId,account:(0,o.wy)(),events:A.O,general:{consent:this.consent.getConsentReady(),started:this.started,jsCacheRefreshed:this.jsCacheRefreshed,lastUpdateDate:a}},this.handlers={},this.consent.setMediator(this),(new A.C).setMediator(this)}setStarted(e){this.started=e}setJsCacheRefreshed(e){this.jsCacheRefreshed=e,this.notify("general.jsCacheRefreshed")}notify(e,t){if(e.startsWith("general")||e.startsWith("events")){e.startsWith("general")&&t?.started&&this.setStarted(t.started);const n=this.getHandlerCallback(e);n&&this.runCallback(n)}}runCallback(e){const{callbackKey:t,callbacks:n}=e,a=t.split(".");for(const e of n)e(this.getValue(a),a)}getValue(e){if(!e.length)throw new Error("No key is given in argument!");this.dataV1.general={consent:this.consent.getConsentReady(),started:this.started,lastUpdateDate:this.lastUpdateDate,jsCacheRefreshed:this.jsCacheRefreshed};const t=e[e.length-1];if("function"==typeof t){const n=(e=e.slice(0,-1)).join(".");this.handlers[n]=[...this.handlers[n]??[],t]}return e.reduce(((e,t)=>{if(e&&void 0!==e[t])return e[t];throw new Error(`Unknown key: ${t}!`)}),this.dataV1)}getApi(){var e=this;return{v1:{getValue:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e.getValue(n)}}}}getHandlerCallback(e){const t=this.handlers[e];if(void 0!==t)return{callbackKey:e,callbacks:t};const n=e.split("."),a=n.slice(0,n.length-1);return a.length?this.getHandlerCallback(a.join(".")):null}}const te=e=>()=>({campaignHistory:()=>e.getCampaignHistory(),visitorId:e.getVisitorId(),currentSessionTimestamp:e.getCurrentSessionTimestamp(),numberOfSessions:e.getNumberOfSessions()});let ne=!1;function ae(){return B()?M:"preview"===(0,u.rD)(document.location.href,!0).ab_project||"undefined"!=typeof sessionStorage&&void 0!==sessionStorage.ABTastyPreview&&null!=sessionStorage.ABTastyPreview?L:se}function ie(){return!!B()||!window.ABTasty.started&&!function(){if((0,f.Sq)())return!0;const{abtastyeditorlock:e,abtastyoptout:t}=(0,u.J5)();let n=!1;try{n=null!=e||null!=window.top?.ABTASTY_S}catch(e){}return null!=t?(s.Z.set("ABTastyOptout","1",(0,Y.$c)(388)),!0):!(!s.Z.get("ABTastyOptout")&&!n)}()}function se(){window.lockABTastyTag?((0,a.Kp)("[ABTasty tag is locked]"),new Promise((e=>{window.unlockABTasty=()=>(delete window.lockABTastyTag,(0,a.um)("[ABTasty tag is unlocked]"),e(!0))})).then(oe)):(0,o.zu)()?(0,a.Kp)("[ABTasty quota limit reached]"):(0,o.MA)()?setTimeout(oe,0):oe()}async function oe(){const e=new l.yN,t=await c.Es.build(),i=new ee(t.getVisitorId(),e,!1,"2023/10/05 08:34:42 UTC");window.ABTasty.api=i.getApi(),(0,T.GN)(["ABTasty","cnilReady"],["ABTasty","consentReady"]),t.setSaveable([c.RY.uid,c.RY.cst,c.RY.fst,c.RY.ns,c.RY.pst,c.RY.pvis,c.RY.pvt,c.RY.th],!0),e.haveConsent([l.RX.start])||((0,a.Kp)("Waiting for consent."),await new Promise((e=>{window.addEventListener(`abtasty_${w.A.Name.consentValid}`,(t=>{const{detail:n}=t;n&&n.consentFor.includes(l.RX.start)&&e(!0)}))}))),(0,a.um)("Main process started..."),window.ABTasty.started=!0,i.setStarted(!0),window.ABTasty.results={};(new A.C).initCustomEventState(),window.ABTasty.omnitureProcessed=!1,window.ABTasty.getTestsOnPage=r.Campaign.getActiveCampaigns,(0,$.F8)(),await(0,d.hk)(t.getVisitorId())||(0,$.GD)()||((0,a.Kp)("Tag has been stopped caused by sampling configuration."),await(0,d.zc)(),(0,a.c2)("Tag has been unlocked using sampling bypass event.")),window.ABTasty.hitServiceNotifierSubscribe=X.d.getInstance().subscribe,window.ABTasty.hitServiceNotifierUnSubscribe=X.d.getInstance().unsubscribe,window.ABTasty.getParsedUserAgent=()=>((0,T.kG)({deprecate:"getParsedUserAgent",new:"getParsedUserAgentAsync",type:"function"}),(0,b.r)()),window.ABTastyStartTest=r.Campaign.abTastyStartTest(t),window.ABTastyReload=()=>{(0,a.um)("Tag reloading from ABTastyReload"),re(t)(!0)},new j.j,window.ABTastyPageView=()=>{(0,a.um)("Tag reloading from ABTastyPageView"),(0,T.kG)({deprecate:"ABTastyPageView",new:"ABTastyReload",type:"function"}),re(t)(!0)},async function(e){return new Promise((t=>{(0,v.X_)((()=>""!==e.getVisitorId())).then((()=>{window.ABTasty.visitor={id:e.getVisitorId()},t(e)}))}))}(t).then((async e=>{(0,o.aD)()&&(0,E.MH)(),(0,b.r)(),Promise.resolve().then(n.bind(n,7823)).then((t=>{const n=(0,o.Nn)(),a=e.getVisitorId();window.ABTasty.getAbandonedCart=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.getAbandonedCart(e,i,s)}}));n(6666).detectDatalayer();(0,x.J)()?.then((t=>t.setGlobals(te(e)))),(0,o.wy)().ajaxAutoReload&&y((()=>{re(e)(!0)})),function(e){window.addEventListener("pageshow",(t=>{t.persisted&&e()}))}((()=>re(e)(!0))),re(e)(),J()})).catch((e=>{(0,a.Kp)(e)}))}const re=e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,x.J)()?.then((e=>{e.dispatchBatch()})),Promise.all([n.e(351,"high"),n.e(226,"high")]).then(n.bind(n,6734)).then((e=>e.rollback())).catch((e=>(0,a.Kp)(e))),document.dispatchEvent(new CustomEvent(C.do)),(0,R.p)(),r.Campaign.resetCampaigns(),(0,_.WJ)(),(0,S.EF)(),(0,S.kb)(),t&&(await(0,H.pendingModeLoader)().then((e=>{"resetPendingMode"in e&&e.resetPendingMode()})),(0,H.registerPendingCriteria)(null,null,!0),(0,I.iG)(),new U.w(!0),(new A.C).resetSpecificsCustomEvents([w.A.Name.executedCampaign,w.A.Name.tagContentExecuted])),(0,o.wy)().ajaxAutoReload&&(window.ABTasty.urlHistory={previous:window.ABTasty.urlHistory&&window.ABTasty.urlHistory.current?window.ABTasty.urlHistory.current:document.referrer,current:document.location.href}),window.ABTasty.results={},window.ABTasty.omnitureProcessed=!1,ne||(ne=!0,ce(e))};async function ce(e){if(!c.Es.cookieReady)return void setTimeout((()=>ce(e)),16);ne=!1,e.pageView();const t=(0,o.$J)()||[];(0,a.um)("Integration connectors::",t),t&&t.length&&Z(t),function(){const e=function(e){return e.reduce(((e,t)=>{let{method:n,url:a,category:i,action:s}=t;return(0,u.rl)(n,a)?{...e,[i]:s}:e}),{})}((0,o.ae)().customVariables||[]);if(Object.keys(e).length>0){const t={s:e};(new j.j).setInternalHit(z.Re.segment,t)}}(),(new j.j).setInternalHit(z.Re.pageview,{}),(0,_.FU)(),function(){const{globalCode:e,globalCodeOnDocReady:t}=(0,o.wy)(),n=(0,o.S3)(),i=""!==e,s=n&&n.length>0;if(!i&&!s)return;i&&(t?(0,O.A)((()=>{(0,a.um)("Executing account JavaScript code."),(0,k.w)(e)})):((0,a.um)("Executing account JavaScript code."),(0,k.w)(e)));s&&((0,O.A)((()=>{n.filter((e=>e.onDocumentReady)).forEach((e=>{(0,k.w)(e.code,null,null,e.id)}))})),n.filter((e=>!e.onDocumentReady)).forEach((e=>{(0,k.w)(e.code,null,null,e.id)})))}();const{getCampaignsDatas:n,getCampaignsSortedByPrio:i,filterCampaignByPrio:s}=r.Campaign,d=i(n()),l=function(e,t){const n=Object.keys(e);return Object.keys(t).reduce(((e,a)=>{if("0"===a)return e;const i=t[a].reduce(((e,t)=>{const a=t.children;return a&&a.some((e=>n.includes(e.toString())&&("mpp"===t.sub_type||"mep"===t.sub_type)))?[...e,t.id]:e}),[]);return[...e,...i]}),[])}(e.getCampaignHistory(),d);if(l.length>0){const t=s(d,"0"),n=t?t.map((e=>e.id)):[];await ue(e)([...n,...l])}else for(const t of Object.keys(d)){const n=s(d,t).map((e=>e.id)),a=await ue(e)(n);if((n.length>0&&a||!1)&&"0"!==t)break}!function(e){const t=(0,o.ll)();t&&(0,R.v)(e)(t)}(e),(0,O.A)((()=>{(new A.C).dispatchCustomEvent(w.A.Name.tagContentExecuted)}))}const de=e=>(new l.yN).haveConsent([l.RX[e]]),le=e=>async(t,n,i)=>{t.setStatus(i);const s=i=>{const{detail:o}=i;t.getAbortSignal().aborted?(window.removeEventListener(`abtasty_${w.A.Name.consentValid}`,s),(0,a.c2)(`Campaign instance is outdated. Campaign ${t.getId()}`)):o&&o.consentFor.includes(l.RX[n])&&(window.removeEventListener(`abtasty_${w.A.Name.consentValid}`,s),t.apply(e))};return window.addEventListener(`abtasty_${w.A.Name.consentValid}`,s),!1},ue=e=>async t=>{(0,a.um)(`Starting ${t.length} campaigns: ${t}`);const i=t.map(r.Campaign.instanciate);Promise.resolve().then(n.bind(n,9707)).then((t=>{t.addCheckTargetingListener(e)}));const s=i.reduce(((t,n)=>{if(n.isContainer()){n.setStatus(D.c.notChecked);const i=n.getChildren().map(r.Campaign.instanciate).map((t=>de(t.getConsentType())?((0,a.um)("----- child campaign::",t.getType()),t.apply(e)):le(e)(t,t.getConsentType(),D.c.consent)));return[...t,...i]}return de(n.getConsentType())?((0,a.um)("campaign::",n),[...t,n.apply(e)]):[...t,le(e)(n,n.getConsentType(),D.c.consent)]}),[]);return Promise.all(s).then((e=>e.some((e=>!!e))))};const ge=()=>{(new A.C).initCustomEventState();const e=(0,o.ae)();(0,i.vs)()&&(0,i.SD)()&&function(){try{if(!(0,o.wy)().accountIframeException&&window.parent!==window&&"object"==typeof window.parent.ABTasty&&window.parent.ABTasty.accountData.accountSettings.identifier===(0,o.wy)().identifier)return!1}catch(e){}return!0}()&&((0,a.um)("Starting execution...",e),window.ABTasty=window.ABTasty||{accountData:e,getAccountSettings:()=>(0,o.wy)(),getGeoloc:()=>(0,E.Si)(),getParsedUserAgentAsync:async()=>await(0,b.r)(!0),pendingRedirection:!1,pendingUAParser:!0,started:!1,consentReady:!1,tagInfos:{commitHash:"9c3b76bf",version:"latest",enabledFlagshipExperiments:[{name:"tag_lp_url_cookie",value:"true"},{name:"tag_ariane_obsolete_parameters",value:"true"}].filter((e=>!1!==e.value))}},ie()&&ae()())}},6541:(e,t,n)=>{n.d(t,{F8:()=>g,GD:()=>m,k9:()=>l});var a=n(838),i=n(3827),s=n(6529),o=n(1042);const r="AB_TASTY_QA_ASSISTANT_ENV",c={abtasty_qa_assistant:"prod",abtasty_qa_assistant_staging:"staging",abtasty_qa_assistant_local:"local"},d={prod:"https://qa-assistant.abtasty.com",staging:"https://staging-qa-assistant.abtasty.com",local:"https://local-qa-assistant.abtasty.com:5000"},l=Object.keys(c),u="bundle.js";function g(){!function(){(0,o.um)("Listening for keyboard events to launch QA Assistant");const e={q:!1,a:!1},t=Object.keys(e),n=n=>{(n.altKey||n.ctrlKey)&&t.includes(n.key.toLocaleLowerCase())&&(e[n.key.toLocaleLowerCase()]=!0),Object.values(e).every((e=>e))&&p()},a=function(n){t.includes(n.key)&&(e[n.key]=!1)},i=()=>{document.removeEventListener("keydown",n,!1),document.removeEventListener("keyup",a,!1)};i(),document.addEventListener("keydown",n,!1),document.addEventListener("keyup",a,!1)}(),m()&&p()}function h(){return Object.keys(c).find((e=>!!(0,i.re)(e)))}function m(){return!(!h()&&!sessionStorage.getItem(r))}function p(){if(!window.frames.ABTastyQaAssistant){const e=function(){const e=h();return(()=>{const t=sessionStorage.getItem(r);return t&&[...Object.keys(d)].includes(t)?t:e&&c[e]?c[e]:"prod"})()}(),t=d[e];(0,o.um)("Loading QA Assistant"),(0,a.u)(`${t}/${u}`),sessionStorage.setItem(r,e),window.dispatchEvent(new CustomEvent(s.dN))}}},6529:(e,t,n)=>{n.d(t,{dN:()=>r,hk:()=>c,zc:()=>d});var a=n(1042);const i=e=>0===e.length?-1:Math.abs(e.split("").reduce(((e,t)=>{const n=(e<<5)-e+t.charCodeAt(0);return n&n}),0)),s=async e=>{let t=-1;if(window.isSecureContext)try{t=await(async e=>{const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-1",t);return new Uint16Array(n)[0]})(e)}catch(n){(0,a.Kp)("Hashing by Crypto API failed, fallback to hashing by bits shifting."),t=i(e)}else t=i(e);return t<0?-1:t%100+1};var o=n(4284);const r="abtasty_bypassSampling",c=async e=>{try{const t=await s(e);return t>0&&t<=((0,o.wy)().sampling||100)}catch(e){return(0,a.vU)("Sampling has failed",e),!1}},d=()=>new Promise((e=>{window.addEventListener(r,(()=>e()))}))},7823:(e,t,n)=>{n.r(t),n.d(t,{getAbandonedCart:()=>g});var a=n(1042),i=n(8669),s=n(3190),o=n(7806),r=n(4874);const c="ABTastyAbandonedCart",d=3e3,l="abandonedCartFetch",u="//dcinfos-cache.abtasty.com/v1/cart",g=(()=>{const e={};return async function(t,n){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&delete e.abandonedCart,e.abandonedCart)return e.abandonedCart;if(!r.Jo.getItem(r.vR,c)){const g=t=>{(0,s.k)(t)||r.Jo.setItem(r.vR,c,JSON.stringify(t)),e.abandonedCart=t};return await(async(e,t)=>{const n=(()=>{try{return new AbortController}catch(e){(0,a.Kp)("Cannot create AbortController.",e)}})(),s=setTimeout((()=>{n?.abort(),(0,a.Kp)("Call to Abandoned cart service timeout. Abandoned cart targeting is going to reject visitor.")}),d);(0,o.tI)(l,s);const r=`${u}?clientId=${e}&fullVisitorId=${t}`;return await(0,i.U)(r,{signal:n?.signal}).then((e=>{switch((0,o.MH)(l),e.status){case 200:return e.json();case 204:return{};default:return}})).catch((e=>{"AbortError"!==e.name&&(0,a.vU)(`Error while fetching Abandoned cart data: ${e}`)}))})(t,n).then((e=>(g(e),e)))}try{const t=JSON.parse(r.Jo.getItem(r.vR,c));return e.abandonedCart=t,e.abandonedCart}catch(t){return(0,a.Kp)(`Error while parsing abandoned cart data from sessionStorage: ${t}`),e.abandonedCart}}})()},2622:(e,t,n)=>{n.d(t,{j:()=>r});var a=n(2109),i=n(3190),s=n(7352),o=n(4334);class r{static instance=null;data=null;commonDataRefresher=null;constructor(){return(0,i.k)(r.instance)?(r.instance=this,this.data={eventTracking:[],collectHit:[]},this.createMethods(),(new s.C).dispatchCustomEvent(a.A.Name.trackingInitialized),this):r.instance}static reset(){(0,i.k)(r.instance)||(0,i.k)(r.instance.data)||(r.instance.data.eventTracking=[],r.instance.data.collectHit=[])}setEventTracking(e,t,n){if((new s.C).getStatusCustomEvent(a.A.Name.analyticsLoaded)===a.A.Status.complete)return;const i=Date.now(),o=this.data.eventTracking.length;this.data.eventTracking[o]={name:e,data:t,campaignId:n,time:i}}static getEventTracking(){return(0,i.k)(r.instance)||(0,i.k)(r.instance.data)?[]:r.instance.data.eventTracking}setInternalHit(e,t){(new s.C).getStatusCustomEvent(a.A.Name.analyticsLoaded)===a.A.Status.complete&&r.instance?.commonDataRefresher?(0,o.J)()?.then((n=>n.dispatchHit(e,t))):this.setCollectHit(e,t)}setCollectHit(e,t){if((new s.C).getStatusCustomEvent(a.A.Name.analyticsLoaded)===a.A.Status.complete)return;const n=Date.now(),i=this.data.collectHit.length;this.data.collectHit[i]={type:e,args:t,time:n}}static getCollectHit(){return(0,i.k)(r.instance)||(0,i.k)(r.instance.data)?[]:r.instance.data.collectHit}static setCommonDataRefresher(e){(0,i.k)(r.instance)||(r.instance.commonDataRefresher=e)}static getCommonDataRefresher(){return(0,i.k)(r.instance)?null:r.instance.commonDataRefresher}createMethods(){var e=this;const t=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e.setCollectHit.apply(e,[...n])};window.abtasty?window.abtasty.send||(window.abtasty.send=t):window.abtasty={send:t};const n=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e.setEventTracking.apply(e,[...n])};window.ABTastyClickTracking||(window.ABTastyClickTracking=n),window.ABTastyEvent||(window.ABTastyEvent=n)}}},7196:(e,t,n)=>{n.d(t,{d:()=>o});var a=n(1155),i=n(1170),s=n(6125);class o{constructor(){o.observers=[],o.hitHistory=[]}subscribe(e,t,n){const a=function(e){let t=0;const n=e.toString().replace(/\s/g,"");for(let e=0;e<n.length;e++){t=(t<<5)-t+n.charCodeAt(e)}return t}(e),i={measurementId:null,instances:[],...n,observerId:a};if(o.observers.every((e=>{let{settings:t}=e;return a!==t.observerId}))){const a={fn:e,hitType:t,settings:i};if(o.observers.push(a),n?.withHitHistory&&o.hitHistory.length)for(const n of o.hitHistory)o.hasToSendDataToSubcriber(a,n.data,t)&&e.call(window,n,i)}}unsubscribe(e){o.observers=o.observers.filter((t=>{let{settings:n}=t;return n.observerId!==e}))}emit(e,t,n){let r=Object.assign({},t);if(e===s.Re.campaign){const{caid:e,vaid:n}=t,a=(0,i.s)(Number(e));if(a?.isChild()){const e=a.getParentId(),t=a.getParentName(),i=a.getVariation?.(Number(n));r={...r,caid:e.toString(),caname:t,vaid:i?.masterVariationId?.toString(),vaname:i?.name}}else r={...r,caname:a?.getName(),vaname:a?.getVariation?.(Number(n))?.name};r.sub_type=a?.data.sub_type}const c={type:e,timestamp:n,data:r,doWhen:a.VH};e===s.Re.pageview?o.hitHistory=[]:o.hitHistory.push(c),o.observers.forEach((t=>{o.hasToSendDataToSubcriber(t,r,e)&&t.fn.call(window,c,t.settings)}))}static isAnActiveIntegrationForThisCampaign(e,t,n){let{instances:a=[]}=t;return n!==s.Re.campaign||!a.length||a.some((t=>{let{testIds:n}=t;return n?.includes(Number(e.caid))}))}static getInstance(){return o.instance||(o.instance=new o),o.instance}static hasToSendDataToSubcriber(e,t,n){let{hitType:a,settings:i}=e;return o.isAnActiveIntegrationForThisCampaign(t,i,n)&&(!a||a===n)}}},6125:(e,t,n)=>{n.d(t,{OD:()=>r,Re:()=>a,YX:()=>s,aB:()=>o,s_:()=>i});let a=function(e){return e.campaign="CAMPAIGN",e.event="EVENT",e.item="ITEM",e.pageview="PAGEVIEW",e.segment="SEGMENT",e.transaction="TRANSACTION",e.visitorevent="VISITOREVENT",e.nps="NPS",e.batch="BATCH",e.datalayer="DATALAYER",e.consent="CONSENT",e.product="PRODUCT",e.usage="USAGE",e.troubleshooting="TROUBLESHOOTING",e}({}),i=function(e){return e.CART_ITEM="CART_ITEM",e.CART_TOTAL="CART_TOTAL",e.VIEW="VIEW",e}({}),s=function(e){return e.strict="STRICT_MODE",e.permissive="PERMISSIVE_MODE",e}({}),o=function(e){return e.any_cookie="LOW_COOKIE",e.specific_cookie="COMPLIANT_COOKIE",e.custom_js="MANUAL_CODE",e.third_party="THIRD_PARTY",e.didomi="DIDOMI",e}({}),r=function(e){return e.Boolean="boolean",e.IntegerArray="integer[]",e.Integer="integer",e.FloatArray="float[]",e.Float="float",e.ArrayArray="array[]",e.Array="array",e.ObjectArray="object[]",e.Object="object",e.StringArray="string[]",e.String="string",e}({})},4334:(e,t,n)=>{n.d(t,{J:()=>i});var a=n(1042);const i=()=>{try{return n.e(142,"low").then(n.bind(n,9183))}catch(e){(0,a.vU)("Analytics/Collect module failed to be loaded asynchronously.",e)}}},3555:(e,t,n)=>{n.d(t,{RH:()=>o,f_:()=>d,s6:()=>l});n(8669),n(4284);var a=n(1042),i=n(4874);const s="ABTastyAllocation",o="0",r={dynAllocWait:{promise:null,resolve:null,reject:null}};function c(){const e=r.dynAllocWait;e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n}))}function d(){return r.dynAllocWait.promise}function l(){let e;try{e=JSON.parse(i.Jo.getItem(i.vR,s))}catch(e){a.vU(`Error parsing allocations data: ${e}`)}return e}c()},8206:(e,t,n)=>{n.d(t,{MH:()=>h,Si:()=>m,Bb:()=>y,If:()=>f,vz:()=>p});var a=n(8669),i=n(7806),s=n(4874),o=n(3190),r=n(1042);const c="ABTastyGeoloc";class d{constructor(e,t){this.name=e,this.state=t,this.createWaitPromise()}resetState(){this.state.wait.reject?.(`${this.name} service state is being reset`),this.state.wait={promise:null,resolve:null,reject:null},this.state.data=null,this.createWaitPromise()}createWaitPromise(){const e=this.state.wait;e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n}))}getWaitPromise(){return this.state.wait.promise}getData(){try{return(0,o.k)(this.state.data)?JSON.parse(s.Jo.getItem(s.vR,c)):this.state.data}catch(e){return(0,r.vU)(`Error parsing ${this.name}: ${e}`),null}}setData(e){this.state.data=e,s.Jo.setItem(s.vR,c,JSON.stringify(e))}async fetch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{weather:!1};if(!(this.state.isNotFilled||o.k)(this.getData()))return(0,o.k)(this.state.data)&&(this.state.data=JSON.parse(s.Jo.getItem(s.vR,c))),void this.state.wait.resolve?.(!0);this.state.wait.promise||this.createWaitPromise();const t=setTimeout((()=>{(0,o.k)(this.getData())&&this.serviceFailure()}),this.state.service.timeout);(0,i.tI)(this.state.service.timeoutName,t);const n=Object.entries(e).reduce(((e,t,n)=>{let[a,i]=t;return 0===n?`?${a}=${i}`:`${e}&${a}=${i}`}),"");await(0,a.U)(`${this.state.service.route}${n}`).then((e=>e.json())).then((e=>(this.setData(e),this.state.wait.resolve?.(!0),(0,i.MH)(this.state.service.timeoutName),!0))).catch((e=>(this.serviceFailure(),this.state.wait.reject?.(`An error occurred on ${this.name} service: ${e}`),(0,r.vU)(`Error while fetching ${this.name} data: ${e}`),!1)))}serviceFailure(){sessionStorage.setItem(c,""),this.state.wait.reject?.(`${this.name} service failure`),(0,i.MH)(this.state.service.timeoutName)}}const l={wait:{promise:null,resolve:null,reject:null},data:null,service:{timeout:3e3,timeoutName:"ipFetchLoop",route:"//dcinfos-cache.abtasty.com/v1/geoip"}},u=new d("geoloc",{wait:{promise:null,resolve:null,reject:null},data:null,isNotFilled:e=>!e?.country_name,service:{timeout:3e3,timeoutName:"geolocFetchLoop",route:"//dcinfos-cache.abtasty.com/v1/geoip"}}),g=new d("ip",l),h=()=>u.fetch({weather:!1}),m=()=>u.getData(),p=()=>(u.getData()||g.getData())?.ip_address,y=()=>u.getWaitPromise(),f=()=>g.getWaitPromise()},4564:(e,t,n)=>{n.d(t,{K:()=>h,r:()=>g});var a=n(1042),i=n(8669),s=n(5355),o=n(7806),r=n(4874),c=void 0;const d="ABTastyUA",l={timeout:3e3,timeoutName:"userAgentFetchLoop",route:"//dcinfos-cache.abtasty.com/v1/ua-parser"},u=()=>{window.ABTasty.pendingUAParser=!1,sessionStorage.setItem(d,""),(0,o.MH)(l.timeoutName)},g=(e=>{const t={request:void 0,ua:void 0};return function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t.request=void 0,t.ua=void 0,r.Jo.removeItem(r.vR,d)),t.ua)return window.ABTasty.pendingUAParser=!1,t.ua;if(!r.Jo.getItem(r.vR,d)){const a=e=>{e&&r.Jo.setItem(r.vR,d,JSON.stringify(e)),t.ua=e};return n?(t.request||(t.request=e.apply(c)),t.request.then((e=>(a(e),e)))):(t.request||(t.request=e.apply(c,[a])),t.ua)}window.ABTasty.pendingUAParser=!1;try{const e=JSON.parse(r.Jo.getItem(r.vR,d));return t.ua=e,t.ua}catch(e){return(0,a.Kp)(`Error while parsing UserAgent from sessionStorage: ${e}`),t.ua}}})((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};window.ABTasty.pendingUAParser=!0;const t=(()=>{try{return new AbortController}catch(e){(0,a.Kp)("Could not create AbortController",e)}})(),n=setTimeout((()=>{void 0===g()&&(t?.abort(),u())}),l.timeout);return(0,o.tI)(l.timeoutName,n),await(0,i.U)(l.route,{signal:t?.signal}).then((e=>e.json())).then((t=>(window.ABTasty.pendingUAParser=!1,(0,o.MH)(l.timeoutName),e(t),t))).catch((t=>{u(),(0,a.vU)(`Error while fetching userAgentParser data: ${t}`),e(void 0)}))})),h=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;const n=e?await g(e):g(e);return 0===t.length?[n]:t.map((e=>(0,s.E)(e.split("."),n)))}},5686:(e,t,n)=>{n.d(t,{Es:()=>L,RY:()=>M});var a=n(2662),i=n(4386),s=n(1955),o=n(4284),r=n(5528),c=n(1042),d=n(3190),l=n(8390),u=n(294);const g=(0,n(1117).W)(((e,t)=>t.join(e)));var h=n(3827),m=n(763),p=function(e){return e.get="get",e.set="set",e.remove="remove",e}(p||{});const y="ABTasty",f=[],v="try.abtasty.com",w=`${v}/cross-domain-iframe.html`,A=`[src*="${w}"]`;function T(){return new Promise(((e,t)=>{if(document.querySelectorAll(A).length>0)return void e();window.addEventListener("message",S,!1);const n=document.createElement("iframe");n.src=`${document.location.protocol}//${w}`,n.onload=function(){e()},n.setAttribute("frameborder","0"),n.style.width="0",n.style.height="0",n.style.display="none";const a=document.body||document.head,i=a.childNodes;a.insertBefore(n,i[i.length-1])}))}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n={resolve:t,name:e.method===p.remove?`${e.key}-${e.method}`:e.key};f.push(n)}document.querySelector(A).contentWindow.postMessage(JSON.stringify(e),"*")}function S(e){if(e.origin.indexOf(v)<0||!e.data)return;const t=JSON.parse(e.data),n=f.find((e=>e.resolve&&e.name===t.key));return n&&n.resolve&&(n.resolve(t),n.resolve=null),!1}var E=n(1438),b=n(8194),I=n(1155),k=n(4874),O=n(2533),_=n(8075);const D=e=>{try{const t=document.cookie.match(/ABTasty=([^;]+)/g);if(t&&t.length>1){const n=t.map((e=>e.replace(/^ABTasty=/,""))).map((e=>unescape(e))).map((t=>((e,t)=>{const n=t=>{const n=e.find((e=>{let{key:n}=e;return n===t}));return n?"th"===t?e=>e:n.typeCast:()=>{}};return t.split("&").map((e=>e.split("="))).map((e=>{let[t,n]=e;return[t,n]})).reduce(((e,t)=>{let[a,i]=t;return{...e,[a]:n(a)(decodeURI(i))}}),{})})(e,t))),a={};return e.forEach((e=>{let{key:t}=e;const i=n.reduce(((e,n)=>(0,d.k)(n[t])?e:[...e,n[t]]),[]);if(i.every((e=>e===i[0])))a[t]=i[0];else switch(t){case"uid":a[t]=(e=>{e.sort(((e,t)=>{let{fst:n}=e,{fst:a}=t;return n-a}));const t=e.filter((e=>{let{fst:t}=e;return t>=0}));return t.length>0?t[0].uid:e[0].uid})(n);break;case"pst":const e=i.some((e=>e>=0));a[t]=e?Math.min(...i.filter((e=>e>=0))):i[0];break;case"fst":a[t]=Math.min(...i);break;case"cst":case"ns":case"pvt":case"pvis":a[t]=Math.max(...i);break;case"th":a[t]=(e=>{const t={};return e.forEach((e=>{e.split("_").forEach((e=>{const n=e.split(".")[0];Object.keys(t).indexOf(n)<0&&(t[n]=e)}))})),Object.values(t).join("_")})(i)}})),(e=>{const t=(0,O.$c)(new Date("Thu, 01 Jan 1970 00:00:01 GMT"));(0,_.z)(h.sZ,(n=>n.forEach((n=>{t.domain=n,document.cookie=`${e}=-1;${(0,O.Lz)(t)}`}))))(window.location.href)})("ABTasty"),Object.entries(a).reduce(((e,t,n)=>e+(n>0?"&":"")+t.join("=")),"")}return null}catch(e){const t="Handle duplicated ABTasty cookies error.";return c.vU(t),null}};var R=n(8957),N=n(1170),P=n(6012);let B,M=function(e){return e.uid="uid",e.fst="fst",e.pst="pst",e.cst="cst",e.ns="ns",e.pvt="pvt",e.pvis="pvis",e.th="th",e.eas="eas",e}({}),V=function(e){return e.visitorID="visitorID",e.firstSessionTimestamp="firstSessionTimestamp",e.previousSessionTimestamp="previousSessionTimestamp",e.currentSessionTimestamp="currentSessionTimestamp",e.numberOfSessions="numberOfSessions",e.pagesViewedTotal="pagesViewedTotal",e.pagesViewedInSession="pagesViewedInSession",e.testsHistory="testsHistory",e.emotionAiSegment="emotionAiSegment",e}({});class L{dictionary=[{key:M.uid,humanKey:V.visitorID,value:"",typeCast:e=>String(e),saveable:!0},{key:M.fst,humanKey:V.firstSessionTimestamp,value:0,typeCast:e=>Number(e),saveable:!1},{key:M.pst,humanKey:V.previousSessionTimestamp,value:-1,typeCast:e=>Number(e),saveable:!1},{key:M.cst,humanKey:V.currentSessionTimestamp,value:0,typeCast:e=>Number(e),saveable:!1},{key:M.ns,humanKey:V.numberOfSessions,value:0,typeCast:e=>Number(e),saveable:!1},{key:M.pvt,humanKey:V.pagesViewedTotal,value:0,typeCast:e=>Number(e),saveable:!1},{key:M.pvis,humanKey:V.pagesViewedInSession,value:0,typeCast:e=>Number(e),saveable:!1},{key:M.th,humanKey:V.testsHistory,value:{},typeCast:this.deserializeTestsHistory,saveable:!1}];constructor(){if(B)return B;const{customCookieDomain:e,customCookiePath:t}=(0,o.wy)();this.sessionCookie=new r.w,this.name=L.getCookieName(),this.customDomain=e,this.customPath=t,window.ABTasty.clearCookie=this.clear.bind(this),window.ABTasty.clearAllCookies=this.clearAll.bind(this),B=this;const n=D(this.dictionary);return(0,d.k)(n)||s.Z.set(this.name,n,this.getConfig()),B}static build(){return new Promise((async e=>{if(B)return e(B);const t=new L;return t.isCrossDomainUsed()?await new Promise(((e,t)=>{T().then((()=>{C({key:y,identifier:(0,o.Nn)(),method:p.get},e)}))})).then((async e=>await t.crossCookieMerge(e.value,t.sessionCookie))):await t.setUp(t.sessionCookie),"function"!=typeof window.ABTasty.getCampaignHistory&&(window.ABTasty.getCampaignHistory=()=>t.getCampaignHistory()),e(B||t)}))}async clearAllStorage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];k.Jo.clear(t),e.resetDictionary(),e.clear(),this.clear(),await(this.isCrossDomainUsed()?new Promise(((e,t)=>{T().then((()=>{C({key:y,identifier:(0,o.Nn)(),method:p.remove},e)}))})):null)}setUp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t;return null!=t&&""!==t.trim()||(n=(new m.T).getFromLocalStorage(this.name),(null===n||(0,E.mW)()&&(0,b.Ex)())&&(n=s.Z.get(this.name)||n)),this.assureVisitorId(n).then((async()=>{if(n){this.load(n);const t=this.calculateExpires();if(t.getTime()-(new Date).getTime()<=0)return await this.clearAllStorage(e),this.resetDictionary(),L.resetInstance(),await L.build(),!1;this.expires=t}else this.clearAllStorage(e,["ABTastyVisitorId"]),this.sessionCookie=new r.w(!0),this.sessionCookie.save();return L.cookieReady=!0,!0}))}static getCookieName(){return"ABTasty"}static exists(){return!!(0,I.tK)(k.op,this.getCookieName())||!!s.Z.get(this.getCookieName())}static getRawData(){return(0,I.tK)(k.op,this.getCookieName())||s.Z.get(this.getCookieName())}static hasVisitorIdStored(){return L.exists()&&0===L.getRawData()?.indexOf("uid=")}async crossCookieMerge(e,t){if(!e||null==e){return void(await this.setUp(t)&&this.save(!0))}let n=(new m.T).getFromLocalStorage(this.name);if((null===n||(0,E.mW)()&&(0,b.Ex)())&&(n=s.Z.get(this.name)),!n||null===n){return void(await this.setUp(t,e)&&this.save(!0))}const a=e.split("&").find((e=>"th"===e.split("=")[0]));if(!a)return this.load(n);const i=a.split("=")[1],o=n.split("&").find((e=>"th"===e.split("=")[0]))||"";i.split("_").map((e=>{o.indexOf(e.split(".")[0])>=0||(n=n+"_"+e)}));await this.setUp(t,n)&&this.save(!0)}matchUrlSettings(){return(0,o.Xx)().some((e=>{let{includeOrExclude:t,url:n,method:a}=e;return"exclude"!==t&&(0,h.rl)(a,n)}))}get(e){return this.dictionary.find((t=>t.key===e||t.humanKey===e))}set(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==n?this.get(e).value=t:this.get(e).value[n]=t}setSaveable(e,t){e.forEach((e=>{this.get(e).saveable=t}))}incr(e,t){const n=this.get(e);n.value=n.value+t}resetDictionary(){this.dictionary.forEach((e=>{const t=(()=>{switch(e.key){case M.pst:return"-1";case M.ns:return"1";default:return""}})();e.value=e.typeCast(t)}))}load(e){try{unescape(e).split("&").map((e=>e.split("="))).map((e=>{let[t,n]=e;return[t,n]})).forEach((e=>{let[t,n]=e;if(void 0!==this.get(t))return t===M.eas&&n.length>50?((0,c.Kp)(`Cookie key 'eas' is too large ${n.length} char (> 50 char) ; removing it from the cookie: `,n),void(this.get(t).value?.length>50&&this.set(t,""))):void this.set(t,this.get(t).typeCast(decodeURI(n)));(0,c.Kp)(`Cookie key '${t}' is unknown ; removing it from the cookie.${n?` Value attached '${n}'.`:""}`)})),this.removePausedTests()}catch(e){(0,c.vU)(`Error loading the cookie. ${e}`),this.resetDictionary()}}removePausedTests(){const e=(0,o.ae)();if(!e||!e.obsoletes)return[];const t=[];return Object.keys(this.get(V.testsHistory).value).forEach((n=>{e.obsoletes.includes(parseInt(n,10))&&(this.removeCampaign(n),t.push(parseInt(n,10)))})),this.save(),t}getVisitorId(){return this.get(V.visitorID).value}getCampaignHistory(){const e=this.getCampaigns(),t={},n=[4581,8924,47674].includes((0,o.Oy)());return Object.keys(e).filter((e=>n||void 0!==(0,o.ae)().tests[e])).filter((t=>e[t].variationID!==N.u.Untracked)).map((n=>{const i=(0,o.ae)().tests[n];return void 0!==i&&i.parentID>0&&(0,o.ae)().tests[i.parentID]?.type===a.dF.multipage&&(t[i.parentID]=e[n].variationID!==N.u.Original?String(i.variations[e[n].variationID].masterVariationId):"0"),t[n]=String(e[n].variationID)})),t}getCampaign(e){return this.get(V.testsHistory).value[e]}getCampaigns(){return this.get(V.testsHistory).value}setCampaign(e,t){this.set(V.testsHistory,t,e)}removeCampaign(e){delete this.get(V.testsHistory).value[e]}getFirstSessionTimestamp(){return this.get(V.firstSessionTimestamp).value}getCurrentSessionTimestamp(){return this.get(V.currentSessionTimestamp).value}getPreviousSessionTimestamp(){return this.get(V.previousSessionTimestamp).value}getNumberOfSessions(){return this.get(V.numberOfSessions).value}getPagesViewedInSession(){return this.get(V.pagesViewedInSession).value}hasSeenCampaign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const n=this.getCampaign(e);return!!n&&((0,d.k)(t)?n.variationID!==N.u.Untracked:n.variationID===t)}isValid(e){return/^uid=.*&fst=[0-9]{13,}&pst=(-1|[0-9]{13,})&cst=[0-9]{13,}&ns=[0-9]\d*&pvt=[1-9]\d*&pvis=[1-9]\d*&th=(\d+\.(-1|\d)+\.[1-9]\d*\.[0-9]\d*\.[1-9]\d*\.[1|0]\.[0-9]{13,}\.[0-9]{13,}\.[1|0]_?)*$/.test(e)}calculateExpires(){const e=(0,o.DF)(),t=this.getFirstSessionTimestamp(),n=t>0?new Date(t):new Date;return new Date(n.setMonth(n.getMonth()+e))}getConfig(){return(0,O.$c)(this.expires||this.calculateExpires())}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;delete window.ABTasty.temporaryCookieValues?.[this.name],e===b.dE||(0,d.k)(e)&&(0,b.PM)()?(new m.T).removeLocalStorage(this.name):s.Z.remove(this.name,this.getConfig())}clearAll(){this.clear(),(new r.w).clear()}static resetInstance(){B=null}encodeValue(e){return null!=e&&"object"==typeof e?this.serializeTestsHistory(e):encodeURI(e)}async save(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!L.cookieReady&&!e)return;this.setSaveable([M.uid],true);const t=this.dictionary.map((e=>e.saveable?[`${e.key}=${this.encodeValue(e.value)}`]:null)).filter((e=>!(0,d.k)(e))).join("&");if(!(new R.yN).haveConsent([R.RX.storage]))return(0,d.k)(window.ABTasty.temporaryCookieValues)&&(window.ABTasty.temporaryCookieValues={}),void(window.ABTasty.temporaryCookieValues[this.name]={value:t,config:this.getConfig()});const n=(0,b.PM)();t!==(n?(new m.T).getFromLocalStorage(this.name):s.Z.get(this.name))&&(n?(new m.T).updateLocalStorage(this.name,t):s.Z.set(this.name,t,this.getConfig()),this.isCrossDomainUsed()&&!e&&function(e){new Promise(((t,n)=>{T().then((()=>{C({key:y,value:e,identifier:(0,o.Nn)(),method:p.set},t)}))}))}(t),(0,E.mW)()?n||(new m.T).updateLocalStorage(this.name,t):this.clear(n?b.VA:b.dE),(0,c.Vp)("Saving data to "+(n?"localStorage":"cookie"),t))}isFirstSession(){return 0===this.get(V.numberOfSessions).value}pageView(){const e=new r.w,t=new m.T;this.incr(V.pagesViewedTotal,1);const n=Date.now();e.isNewSession?(this.isFirstSession()?(this.set(V.firstSessionTimestamp,n),this.assureVisitorId()):this.set(V.previousSessionTimestamp,this.get(V.currentSessionTimestamp).value),this.set(V.currentSessionTimestamp,n),this.incr(V.numberOfSessions,1),this.set(V.pagesViewedInSession,1)):(this.incr(V.pagesViewedInSession,1),0===this.getFirstSessionTimestamp()&&this.set(V.firstSessionTimestamp,n),0===this.getCurrentSessionTimestamp()&&this.set(V.currentSessionTimestamp,n)),t.addVisitedPage(this)(),this.save()}assureVisitorId(e){return new Promise(((t,n)=>{const a=L.getRawData()?.match(/uid=([^&]+)/)?.[1]||null;(()=>{a||e||this.set(V.visitorID,(0,i.generateId)())})(),t()}))}campaignView(e,t,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=new r.w,s=this.getCampaign(e);[P.c.timeout,P.c.failedLoading].includes(n)||(s?this.setCampaign(e,{variationID:t,nbSeenTotal:s.nbSeenTotal+1,nbSeenInSession:i.isNewSession?1:s.nbSeenInSession+1,nbSessions:i.isNewSession?s.nbSessions+1:s.nbSessions,currentlyApplied:1,firstViewTimestamp:s.firstViewTimestamp,lastViewTimestamp:Date.now(),randomAllocation:s.randomAllocation,lastSessionSeen:this.getNumberOfSessions()}):this.setCampaign(e,{variationID:t,nbSeenTotal:1,nbSeenInSession:1,nbSessions:1,currentlyApplied:1,firstViewTimestamp:Date.now(),lastViewTimestamp:Date.now(),randomAllocation:a?1:0,lastSessionSeen:this.getNumberOfSessions()})),this.save()}serializeTestsHistory(e){return Object.keys(e).map((t=>{const n=e[t];return[t,n.variationID,n.nbSeenTotal,n.nbSeenInSession,n.nbSessions,n.currentlyApplied,n.firstViewTimestamp,n.lastViewTimestamp,n.randomAllocation,n.lastSessionSeen]})).map(g(".")).join("_")}deserializeTestsHistory(e){return e.split("_").filter((e=>!(0,l.x)(e))).map((0,u.V)(".")).reduce(((e,t)=>(e[Number(t[0])]={variationID:Number(t[1]),nbSeenTotal:Number(t[2]),nbSeenInSession:Number(t[3]),nbSessions:Number(t[4]),currentlyApplied:Number(t[5]),firstViewTimestamp:Number(t[6]),lastViewTimestamp:Number(t[7]),randomAllocation:Number(t[8]),lastSessionSeen:Number(t[9])},e)),{})}isCrossDomainUsed(){return(0,o.Xx)().length>0&&this.matchUrlSettings()}getEmotionAiSegment(){return this.get(V.emotionAiSegment).value}setEmotionAiSegment(e){if(e.length<=50)return this.set(V.emotionAiSegment,e),this.save();(0,c.c2)(`[Cookie] 'eas' key not saved due to large value (> 50 char): was ${e.length} with value ${e}`)}}},5528:(e,t,n)=>{n.d(t,{L:()=>u,w:()=>g});var a=n(1955),i=n(3190),s=n(4284),o=n(1042),r=n(2533),c=n(8957);let d,l,u=function(e){return e.mrasn="mrasn",e.referrer="referrer",e.landingPage="lp",e}({});class g{dictionary=[{key:u.mrasn,value:"",typeCast:e=>String(e)}];constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.dictionary.push({key:u.landingPage,value:window.location.href,typeCast:e=>String(e)}),d&&!e)return d;const{customCookieDomain:t,customCookiePath:n}=(0,s.wy)();this.name=g.getCookieName(),this.customDomain=t,this.customPath=n;const a=this.getCookieValue();return a?(this.isNewSession=!1,void 0===l&&(l=!1),this.load(a)):(this.isNewSession=!0,void 0===l&&(l=!0),this.setLandingPage(this.decodeURIComponentSafely(window.location.href))),d=this,window.ABTasty.clearSessionCookie=this.clear.bind(this),this.save(),d}isEncoded(e){return(e=e||"")!==decodeURIComponent(e)}fullyDecodeURI(e){for(;this.isEncoded(e);)e=decodeURIComponent(e);return e}decodeURIComponentSafely(e){try{return this.fullyDecodeURI(e)}catch(t){try{return this.fullyDecodeURI(decodeURIComponent(e))}catch(t){return e}}}static getCookieName(){return"ABTastySession"}getCookieValue(){return(new c.yN).haveConsent([c.RX.storage])||(0,i.k)(window.ABTasty.temporaryCookieValues)||(0,i.k)(window.ABTasty.temporaryCookieValues[this.name])?a.Z.get(this.name):window.ABTasty.temporaryCookieValues[this.name].value}get(e){return this.dictionary.find((t=>t.key===e))}set(e,t){this.get(e).value=t,this.save()}incr(e,t){const n=this.get(e);n.value=n.value+t,this.save()}resetDictionary(){this.dictionary.forEach((e=>{switch(e.key){case u.referrer:e.value=e.typeCast("");break;case u.landingPage:e.value=e.typeCast(window.location.href);break;default:e.value=e.typeCast("")}}))}load(e){try{const t=new RegExp(this.dictionary.map((e=>`(${e.key}=.*)`)).join("&"));e.match(t).slice(1).map(((e,t)=>{const n=new RegExp(`(${this.dictionary[t].key})=(.*)`);return e.match(n).slice(1)})).forEach((e=>{let[t,n]=e;void 0!==this.get(t)?this.set(t,this.get(t).typeCast(decodeURIComponent(n))):(0,o.Kp)(`Session cookie key '${t}' is unknown ; removing it from the cookie.${n?` Value attached '${n}'.`:""}`)}))}catch(e){(0,o.vU)("Error loading the session cookie.",e),this.resetDictionary(),this.isNewSession=!0,void 0===l&&(l=!0)}}save(){const e=this.dictionary.map((e=>[`${e.key}=${encodeURIComponent(e.value)}`])).join("&");if(this.isValid(e)){if(!(new c.yN).haveConsent([c.RX.storage]))return(0,i.k)(window.ABTasty.temporaryCookieValues)&&(window.ABTasty.temporaryCookieValues={}),void(window.ABTasty.temporaryCookieValues[this.name]={value:e,config:this.getConfig()});a.Z.set(this.name,e,this.getConfig())}else(0,o.vU)("Session cookie cannot be saved, incorrect value",e)}clear(){delete window.ABTasty?.temporaryCookieValues?.[this.name],a.Z.remove(this.name,this.getConfig())}isValid(e){return!0}getConfig(){const e=new Date((new Date).getTime()+18e5);return(0,r.$c)(e)}setMrasn(e){this.set(u.mrasn,e)}getMrasn(){return this.get(u.mrasn).value}setLandingPage(e){this.set(u.landingPage,e)}getLandingPage(){return this.get(u.landingPage).value}getReferrer(){return""}isItNewSession(){return l}}},763:(e,t,n)=>{n.d(t,{T:()=>c});var a=n(3190),i=n(8390),s=n(1155),o=n(4874),r=n(9572);class c{constructor(){}getABTastyData(){return JSON.parse(this.getFromLocalStorage(r.I.LOCAL_STORAGE))||{}}getItemFromABTastyData(e){return this.getABTastyData()[e]}getActionTrackings(){return this.getABTastyData()&&this.getABTastyData()[r.I.ACTION_TRACKING]}addActionTracking(e){this.addItemToABTastyData(r.I.ACTION_TRACKING,e)}getTransactions(){return this.getABTastyData()&&this.getABTastyData()[r.I.TRANSACTION]}addTransaction(e){this.addItemToABTastyData(r.I.TRANSACTION,e)}getItems(){return this.getABTastyData()&&this.getABTastyData()[r.I.ITEM]}addItem(e){this.addItemToABTastyData(r.I.ITEM,e)}getSegments(){return this.getABTastyData()&&this.getABTastyData()[r.I.SEGMENT]}addSegment(e){this.addItemToABTastyData(r.I.SEGMENT,e)}setSegments(e){const t=this.getABTastyData();this.updateLocalStorage(r.I.LOCAL_STORAGE,JSON.stringify({...t,[r.I.SEGMENT]:e}))}getCustomVariables(){return this.getABTastyData()&&this.getABTastyData()[r.I.CUSTOM_VARIABLE]}addCustomVariable(e){this.addItemToABTastyData(r.I.CUSTOM_VARIABLE,e)}getVisitedPages(){return this.getABTastyData()&&this.getABTastyData()[r.I.VISITED_PAGES]}editLastVisitedPage(e){const t=this.getVisitedPages();if((0,a.k)(t)||(0,i.x)(t))return;const n=t[t.length-1];t[t.length-1]={...n,...e};const s=this.getABTastyData();this.updateLocalStorage(r.I.LOCAL_STORAGE,JSON.stringify({...s,[r.I.VISITED_PAGES]:t}))}addVisitedPage=e=>{var t=this;return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.location.href,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title;const o={url:n,visite:e.getNumberOfSessions(),time:Date.now(),title:a};t.addItemToABTastyData(r.I.VISITED_PAGES,o),(0,i.x)(a)&&(0,s.VH)((()=>!(0,i.x)(document.title)),(()=>t.editLastVisitedPage({title:document.title})))}};addItemToABTastyData(e,t){const n=this.getABTastyData();n[e]&&Array.isArray(n[e])||(n[e]=[]),n[e].push(t),this.updateLocalStorage(r.I.LOCAL_STORAGE,JSON.stringify(n))}updateLocalStorage(e,t){return o.Jo.setItem(o.op,e,t)}getFromLocalStorage(e){return o.Jo.getItem(o.op,e)}removeLocalStorage(e){return o.Jo.removeItem(o.op,e)}}},9572:(e,t,n)=>{n.d(t,{I:()=>a,d:()=>i});let a=function(e){return e.LOCAL_STORAGE="ABTastyData",e.ACTION_TRACKING="ActionTracking",e.CUSTOM_VARIABLE="CV",e.ITEM="items",e.SEGMENT="segments",e.TRANSACTION="transactions",e.VISITED_PAGES="VisitedPages",e}({}),i=function(e){return e.CV="cv",e.ECO="eco",e}({})},7787:(e,t,n)=>{n.d(t,{I:()=>a});let a=function(e){return e.CUSTOM_IDENTITIES="ABTastyCustomIdentities",e.CUSTOM_SEGMENTS="ABTastyCustomSegments",e}({})},4874:(e,t,n)=>{n.d(t,{op:()=>u,vR:()=>g,Jo:()=>p});var a=n(1042),i=n(1155),s=n(1117),o=n(5355);const r=(0,s.W)(((e,t)=>null==t||t!=t?e:t)),c=(0,s.W)(((e,t,n)=>r(e,(0,o.E)(t,n))));var d=n(4284),l=n(8957);const u="localStorage",g="sessionStorage";function h(){return!!(new l.yN).haveConsent([l.RX.storage])||!(!(0,d.wy)().waitForConsent||"disabled"!==(0,d.wy)().waitForConsent.mode)}function m(e){const t=/^(ab\s?tasty)/i;let n="";for(let a=window[e].length-1;a>=0;a--)n=window[e].key(a),n.match(t)&&(this.data[e][n]=window[e][n],(0,i.PO)(e,n))}const p={state:{inmemory:!0},data:{localStorage:{},sessionStorage:{}},migrate:function(){switch(h()?"browser":"memory"){case"browser":if(!this.state.inmemory)return;Object.keys(this.data).forEach((e=>{Object.keys(this.data[e]).forEach((t=>{(0,i.ek)(e,t,this.data[e][t])}))})),this.state.inmemory=!1,(0,a.um)("Data storage: data has been written in storage thanks to consent validation.");break;case"memory":m.call(this,"localStorage"),m.call(this,"sessionStorage"),this.state.inmemory=!0,(0,a.um)("Data storage: data has been put in memory due to consent revoked.")}},setItem:function(e,t,n){this.state.inmemory&&h()&&this.migrate(),this.state.inmemory?this.data[e]=Object.assign(this.data[e],{[t]:n}):(0,i.ek)(e,t,n)},getItem:function(e,t){return this.state.inmemory&&h()&&this.migrate(),this.state.inmemory?c(null,[e,t],this.data):(0,i.tK)(e,t)||null},removeItem:function(e,t){this.state.inmemory&&h()&&this.migrate(),this.state.inmemory?delete this.data[e][t]:(0,i.PO)(e,t)},clear:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=/^(ab\s?tasty)/i;[u,g].forEach((n=>{Object.keys(window[n]).forEach((a=>{!e.includes(a)&&t.test(a)&&this.removeItem(n,a)}))}))},setState:function(e,t){this.state[e]=t}}},2533:(e,t,n)=>{n.d(t,{$c:()=>r,L4:()=>d,Lz:()=>c});var a=n(1955),i=n(2022),s=n(3827),o=n(4284);function r(e){const{isSecureCookie:t,customCookieDomain:n,customCookiePath:a}=(0,o.wy)();return{expires:e,path:a||"/",domain:n||(0,s.yT)(),secure:t||(0,i.Lr)()||!1,samesite:t||(0,i.Lr)()?"none":"lax"}}function c(e){return Object.entries(e).reduce(((e,t)=>{let[n,a]=t;return"secure"===n.toLowerCase()&&!1===a?e:`${e}${n}=${a};`}),"")}function d(e,t){const n="ABTastyCookieQuickTest",i=`${e}${n}`;let s=!1;a.Z.set(t,i,r(388));try{s=document.cookie.indexOf(n)>-1,e&&s?a.Z.set(t,e,r(388)):a.Z.remove(t,r(1))}catch(e){a.Z.remove(t,r(1))}return s}},8194:(e,t,n)=>{n.d(t,{Ex:()=>m,PM:()=>h,SD:()=>u,VA:()=>d,dE:()=>c,vs:()=>g});var a=n(1955),i=n(4284),s=n(1042),o=n(2533),r=n(5686);const c="local",d="cookies",l=3900;function u(){if((0,i.kA)()){const e=a.Z.get(r.Es.getCookieName());if(e&&e.length>=l)return(0,s.Kp)("Cookies size is too big, ABTasty tag stopped execution."),!1;if(!(0,o.L4)(e,r.Es.getCookieName())){const{domain:e,path:t,secure:n}=(0,o.$c)(0),a=[e&&!`.${window.location.hostname}`.includes(e)?`domain ${e}`:null,"/"!==t?`path ${t}`:null];return n&&!window.isSecureContext?((0,s.Kp)("ABTasty data can't be saved to cookie, ABTasty tag stopped execution. A custom configuration ask to use secure cookie but page context is not secure."),!1):a.find((e=>e))?((0,s.Kp)(`ABTasty data can't be saved to cookie, ABTasty tag stopped execution. A custom configuration with ${a.filter((e=>e)).join(" and ")} is set for this account. Please check it matches the current URL.`),!1):((0,s.Kp)(`ABTasty data can't be saved to cookie on domain ${e} and path ${t}, ABTasty tag stopped execution.`),!1)}}return!0}function g(){const e=(h()&&null!=localStorage&&null!=localStorage.setItem&&null!=localStorage.getItem||m()&&navigator.cookieEnabled)&&null!=sessionStorage&&null!=sessionStorage.setItem&&null!=sessionStorage.getItem;return e||(0,s.Kp)("AB Tasty script encountered an error: LocalStorage, SessionStorage & Cache option aren't allowed on this browser. Execution has stopped."),e}function h(){const{storageMode:e}=(0,i.wy)();return e===c}function m(){return(0,i.wy)().storageMode===d}},7947:(e,t)=>{var n,a;t.s_=t.n8=void 0,function(e){e.anyCookie="any_cookie",e.customJs="custom_js",e.didomi="didomi",e.disabled="disabled",e.specificCookie="specific_cookie",e.thirdParty="third_party",e.userAction="user_action",e.customEvent="custom_event"}(n||(t.n8=n={})),function(e){e[e.test=1]="test",e[e.perso=2]="perso",e[e.redirection=4]="redirection",e[e.aa=8]="aa",e[e.patch=16]="patch"}(a||(t.s_=a={}))},45:(e,t)=>{var n,a;(function(e){e.HTTPOnly="httponly",e.CNAME="cname",e.BYOID="byoid"})(n||(n={})),function(e){e.Cookie="cookie",e.LocalStorage="local_storage",e.JSVariable="js_variable"}(a||(a={}))},2109:(e,t,n)=>{let a;n.d(t,{A:()=>a}),function(e){let t=function(e){return e.consentValid="consentValid",e.executedCampaign="executedCampaign",e.tagContentExecuted="tagContentExecuted",e.trackingInitialized="trackingInitialized",e.identityAdded="identityAdded",e.analyticsLoaded="analyticsLoaded",e}({});e.Name=t;let n=function(e){return e.loading="loading",e.complete="complete",e}({});e.Status=n}(a||(a={}))},2662:(e,t,n)=>{n.d(t,{$M:()=>s,C_:()=>c,Cd:()=>o,b0:()=>i,dF:()=>a,oF:()=>r});let a=function(e){return e.ab="ab",e.multipage="multipage",e.multivariate="multivariate",e.mastersegment="mastersegment",e.subsegment="subsegment",e}({}),i=function(e){return e.simplePersonalization="sp",e.multipagePersonalization="mpp",e.multiexperiencePersonalization="mep",e.patch="patch",e.multipageTest="mpt",e.multivariate="mvt",e}({}),s=function(e){return e.aaTest="aa",e.redirection="redirection",e.patch="patch",e}({}),o=function(e){return e.fastest="fastest",e.waitUntil="waituntil",e.noAjax="noajax",e}({}),r=function(e){return e.any="any",e.once="once",e.oncePerSession="once_per_session",e.regular="regular",e}({}),c=function(e){return e.day="day",e.week="week",e.session="session",e}({})},5263:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OnceSegmentTargetings=t.OnceTriggerTargetings=t.DCInfosTargetings=t.ABANDONED_CART_PROPERTY_OPERATOR=t.ABANDONED_CART_PROPERTY_TYPE=t.Timeframe=t.CheckMode=void 0;const o=s(n(7683));var r,c,d,l;!function(e){e.loading="loading",e.periodic="periodic",e.custom="custom"}(r||(t.CheckMode=r={})),function(e){e[e.lastSession=-1]="lastSession",e[e.pastTwoWeeks=15]="pastTwoWeeks",e[e.pastMonth=30]="pastMonth",e[e.pastYear=390]="pastYear"}(c||(t.Timeframe=c={})),function(e){e.PRODUCT_NUMBER="product number",e.TOTAL_AMOUNT="total amount"}(d||(t.ABANDONED_CART_PROPERTY_TYPE=d={})),function(e){e.EQUAL="equal",e.GREATER="greater",e.LOWER="lower",e.BETWEEN="between"}(l||(t.ABANDONED_CART_PROPERTY_OPERATOR=l={})),t.DCInfosTargetings=[o.DEVICE,o.BROWSER,o.IP,o.GEOLOCATION,o.WEATHER,o.EULERIAN_DMP],t.OnceTriggerTargetings=[o.DEVICE,o.IP,o.GEOLOCATION,o.BROWSER_LANGUAGE,o.LANDING_PAGE,o.BROWSER,o.SOURCE_TYPE,o.PREVIOUS_PAGE,o.SCREEN_SIZE,o.SOURCE,o.NUMBER_PAGES_VIEWED,o.SAME_DAY_VISIT,o.WEATHER,o.ECOMMERCE_VARIABLE,o.URL_PARAMETER,o.KEYWORD,o.ADBLOCK,o.PAGE_VIEW,o.PAGE_INTEREST],t.OnceSegmentTargetings=[o.ENGAGEMENT_LEVEL,o.RETURNING_VISITOR,o.SESSION_NUMBER,o.DAYS_SINCE_FIRST_SESSION,o.DAYS_SINCE_LAST_SESSION,o.GEOLOCATION,o.CONTENT_INTEREST,o.DEVICE,o.ABANDONED_CART]},7683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CONTENT_INTEREST=t.ENGAGEMENT_LEVEL=t.TEALIUM=t.KEYWORD=t.PURCHASE_FREQUENCY=t.LAST_PURCHASE=t.DATALAYER=t.SELECTOR=t.ACTION_TRACKING=t.CUSTOM_VARIABLE=t.BROWSER=t.CODE=t.URL_PARAMETER=t.ECOMMERCE_VARIABLE=t.DAYS_SINCE_FIRST_SESSION=t.DAYS_SINCE_LAST_SESSION=t.WEATHER=t.SESSION_NUMBER=t.ADBLOCK=t.SAME_DAY_VISIT=t.NUMBER_PAGES_VIEWED=t.SOURCE=t.CAMPAIGN_EXPOSITION=t.JS_VARIABLE=t.SCREEN_SIZE=t.PREVIOUS_PAGE=t.SOURCE_TYPE=t.RETURNING_VISITOR=t.LANDING_PAGE=t.BROWSER_LANGUAGE=t.COOKIE=t.GEOLOCATION=t.IP=t.DEVICE=t.SIRDATA_DMP=t.EASYDMP_DMP=t.MAKAZI_DMP=t.LEROYMERLIN_DMP=t.MEDIARITHMICS_DMP=t.LIVERAMP_DMP=t.ADOBE_DMP=t.TEMELIO_DMP=t.WEBORAMA_DMP=t.KRUX_DMP=t.ADVALO_DMP=t.YSANCE_DMP=t.BLUEKAI_DMP=t.CABESTAN_DMP=t.TAGCOMMANDER_DMP=t.EULERIAN_DMP=void 0,t.ABANDONED_CART=t.INTEGRATIONS_PROVIDER=t.PAGE_INTEREST=t.PAGE_VIEW=void 0,t.EULERIAN_DMP=1,t.TAGCOMMANDER_DMP=2,t.CABESTAN_DMP=3,t.BLUEKAI_DMP=4,t.YSANCE_DMP=5,t.ADVALO_DMP=6,t.KRUX_DMP=7,t.WEBORAMA_DMP=8,t.TEMELIO_DMP=9,t.ADOBE_DMP=10,t.LIVERAMP_DMP=11,t.MEDIARITHMICS_DMP=12,t.LEROYMERLIN_DMP=13,t.MAKAZI_DMP=14,t.EASYDMP_DMP=15,t.SIRDATA_DMP=16,t.DEVICE=17,t.IP=18,t.GEOLOCATION=19,t.COOKIE=20,t.BROWSER_LANGUAGE=21,t.LANDING_PAGE=22,t.RETURNING_VISITOR=24,t.SOURCE_TYPE=25,t.PREVIOUS_PAGE=26,t.SCREEN_SIZE=27,t.JS_VARIABLE=28,t.CAMPAIGN_EXPOSITION=29,t.SOURCE=30,t.NUMBER_PAGES_VIEWED=31,t.SAME_DAY_VISIT=32,t.ADBLOCK=33,t.SESSION_NUMBER=34,t.WEATHER=35,t.DAYS_SINCE_LAST_SESSION=36,t.DAYS_SINCE_FIRST_SESSION=37,t.ECOMMERCE_VARIABLE=38,t.URL_PARAMETER=39,t.CODE=40,t.BROWSER=23,t.CUSTOM_VARIABLE=41,t.ACTION_TRACKING=42,t.SELECTOR=43,t.DATALAYER=44,t.LAST_PURCHASE=45,t.PURCHASE_FREQUENCY=46,t.KEYWORD=47,t.TEALIUM=48,t.ENGAGEMENT_LEVEL=49,t.CONTENT_INTEREST=50,t.PAGE_VIEW=51,t.PAGE_INTEREST=52,t.INTEGRATIONS_PROVIDER=53,t.ABANDONED_CART=54},7871:(e,t)=>{var n,a;(function(e){e.initiator="initiator",e.manifest="manifest"})(n||(n={})),function(e){e.IDENTIFIER="identifier",e.INITIATOR="initiator",e.CLIENT="client",e.JSON="json",e.MANIFEST="manifest",e.SHARED="shared"}(a||(a={}))}}]);