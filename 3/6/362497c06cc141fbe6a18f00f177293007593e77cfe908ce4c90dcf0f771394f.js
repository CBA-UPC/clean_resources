(self.webpackChunkwidget_react=self.webpackChunkwidget_react||[]).push([[535],{15174:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RateType=t.RateState=t.RateIconType=t.RateIconMap=t.RateConditions=t.RateColors=void 0;const a={BAD:"bad",BAD_NORMAL:"badnormal",NORMAL:"normal",GOOD_NORMAL:"goodnormal",GOOD:"good"};t.RateState=a;t.RateConditions={MESSAGE_COUNT:"message_count",CHAT_FINISHED:"chat_finished"};t.RateType={TWO:"two",THREE:"three",FIVE:"five"};t.RateIconType={SMILE:"smile",STAR:"star"};const n={three:[a.BAD,a.NORMAL,a.GOOD],five:[a.BAD,a.BAD_NORMAL,a.NORMAL,a.GOOD_NORMAL,a.GOOD]};t.RateIconMap=n;t.RateColors={color:"#FFCE00",color2:"#EE9547",hoverColor:"#FFDB5E",disabledColor:"#D1D5DA",disabledColor2:"#83878C"}},36071:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(33119)),l=n(a(92664)),o=n(a(84827)),i=n(a(85299)),u=n(a(55536)),s=n(a(54720)),d=n(a(91275)),c=n(a(39976)),f=n(a(73727)),p=n(a(84726)),m=n(a(19955)),_=a(21476),h=a(47060),g=a(31984),b=n(a(71323)),v=a(54415),y=a(83170);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,i.default)(this,a)}}const E=n(a(4855)).default.name("Call");let C=function(e){(0,o.default)(a,e);var t=O(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"initTimer",value:function(e,t,a){this.callTimer=c.default,this.callTimer.timerText=e,this.callTimer.seconds=f.default.callback_settings.time,this.callTimer.on("handling",t),this.callTimer.on("tick",a)}},{key:"setTimerNull",value:,{key:"startTimer",value:,{key:"submitPhone",value:function(e,t,a){const n=this._inputPhone;if(E.log("submitPhone",t,a,n,this._inputPhone),n&&n.isValid()){m.default.tablet()&&n&&n.base&&n.base.blur();const e="+"+n.getFullPhoneNumber();let r="";r=a?this.getMaskedPhoneByCode(e,a):(0,g.getMaskedPhone)(e),!this.props.eulaAccepted&&f.default.eula?(this.phone=e,b.default.showEula(`${(0,p.default)("eula_phone")}<br/>${r}`,null,"cb"),_.Router.next(h.RouterEvent.Submit)):(this.setTimerNull(),this.startCall(e,t),v.Monitoring.telemetry(y.TelemetryName.CWP_SUBMIT,{param1:"direct"}))}else v.Monitoring.telemetry(y.TelemetryName.CW_ERROR_SUBMIT_PHONE)}},{key:"startCall",value:function(e,t,a){E.log("start call",e,t),d.default.startCall(e,t,a)}},{key:"getMaskedPhoneByCode",value:function(e,t){if(E.log("getMaskedPhoneByCode",e,t),!e)return e;const a=this.getPhoneNumberInfoByCode(e,t);return E.log("phoneNumberCode",a),a?"+"+t+" "+(0,g.getMaskedValue)(a.innerNumber,a.phoneFormat):null}},{key:"getPhoneNumberInfoByCode",value:function(e,t){const a=f.default.callback_settings.countries,n=null==a?void 0:a.find((e=>e.phone_code===t));return E.log("getPhoneNumberInfoByCode",n,t),n?(0,g.getPhoneInfo)(n,e):null}}]),a}(s.default);t.default=C},81455:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(33119)),l=n(a(92664)),o=n(a(7819)),i=n(a(84827)),u=n(a(85299)),s=n(a(55536)),d=n(a(98661)),c=a(31984),f=n(a(73727)),p=n(a(84726)),m=n(a(4855)),_=n(a(36071)),h=n(a(51313)),g=n(a(13639)),b=a(81152),v=n(a(32325)),y=n(a(40704)),O=n(a(46528)),E=a(21476),C=a(47060),w=a(65465),j=a(36113),S=n(a(19955)),M=a(92560),T=a(54415),k=n(a(87538)),P=n(a(43893));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}const R=m.default.name("CallChat"),N="chat_popup";let I=function(e){(0,i.default)(a,e);var t=x(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={mode:!1,pin:!0,close:!0,error:!1,hide:!1,is_invalid_phone:!1,submit:!1,blocked:!1},n._blockTimeout=null,n._inputPhone=null,n._timer=null,n.processState=n.processState.bind((0,o.default)(n)),n}return(0,l.default)(a,[{key:"componentDidUpdate",value:function(e){(0,j.shallowEqual)(this.props,e)||this.props.route!==C.Route.LABEL&&(this.props.callback!==e.callback&&this.processState(),this.props.route===C.Route.CHAT_CALL&&this.props.display&&!this.state.hide&&this._inputPhone&&this._inputPhone.focus())}},{key:"componentDidMount",value:function(){if((0,M.isEmpty)(f.default.callback_settings))return void R.log("Callwidget not configured yet.");this.initTimer(this._timer,(e=>{R.log("timer_finished",this.state.mode,this._timer),"timer_finished"===e.inputType&&"cw_wait"===this.state.mode&&this.setState({mode:"cw_connecting"})}),(e=>{this.setState({timer:e.toFixed(1).replace(".",",")})})),this.processState(!0),this._inputPhone&&(this._inputPhone.subscribe("onEnter",(),this._inputPhone.subscribe("onChange",(()=>{this.setState({is_invalid_phone:!this._inputPhone.isValid()})})));const e=t=>{R.log("submit_eula_success",t),t===C.Route.CHAT_CALL&&(this.submitPhone(null,N),E.Router.off("submit_eula_success",e),T.Monitoring.telemetry("startCall_eula"))};E.Router.on("submit_eula_success",e)}},{key:"processState",value:function(e){const t=this.getState(e);(0,j.shallowEqual)(t,this.state)&&this.props.callback.status===this.state.mode||this.setState(t)}},{key:"getState",value:function(e){const t={mode:this.props.callback.webRTCCallStatus||this.props.callback.status,error:!1,hide:!1,isDelayedCall:!!this.props.callback.isDelayed,delayedCallPeriods:this.props.callback.delayedPeriods,delayedCallStatus:this.props.callback.delayedStatus};switch(t.mode){case"cw_wait":e&&!this.props.callback.webRTCCallStatus&&w.messageActions.systemCallMessage(`${(0,p.default)("cw_call_to")} ${(0,c.getMaskedPhone)(this.props.clientPhone)}`,b.MessageName.CALL_MESSAGE_START),Object.assign(t,{hide:!1,pin:!1,close:!1,submit:!1}),this.startTimer();break;case"cw_connecting":Object.assign(t,{pin:!1,close:!1,hide:!1,submit:!1}),this.setTimerNull();break;case"cw_connected":t.hide=!0;break;case"cw_error":Object.assign(t,{pin:!S.default.mobileOrTablet(),close:!0,submit:!1,error:this.props.callback.error});break;case"cw_call_end":this.setTimerNull(),Object.assign(t,{pin:!0,close:!0,submit:!1})}return t}},{key:"submitCall",value:function(e,t,a){this.state.blocked||(this.submitPhone(e,t,a),T.Monitoring.telemetry("startCall_enter")),this.startBlockTimeout()}},{key:"submitFormCall",value:function(e){this.state.blocked||this.submitPhone(e,N,this._inputPhone.getCurrentCode()),this.startBlockTimeout()}},{key:"startBlockTimeout",value:function(){this.setState({blocked:!0},()}},{key:"renderInputForm",value:function(e){const t=this.state,a=t.isDelayedCall,n=t.delayedCallStatus,r=t.delayedCallPeriods;return a&&!this.props.callback.webRTCCallStatus?d.default.createElement(O.default,{status:this.props.callback.status,error:this.props.callback.error,phone:this.props.clientPhone,statusCode:n,periods:r,color:f.default.bubble_color}):-1===["cw_wait","cw_connecting","cw_connected"].indexOf(this.state.mode)?d.default.createElement("jdiv",null,this.state.error?d.default.createElement("jdiv",{className:e.text},this.state.error):d.default.createElement("jdiv",{className:e.text},(0,p.default)("cw_weRecallAfter")," ",f.default.callback_settings.time," ",(0,p.default)((0,c.getTextSeconds)(f.default.callback_settings.time)),"!"),d.default.createElement("jdiv",{className:e.callBox},d.default.createElement(h.default,{type:"inForm",status:this.props.callback.status,error:this.props.callback.error,phone:this.props.clientPhone,ref:e=>{this._inputPhone=e}}),d.default.createElement(g.default,{click:e=>this.submitFormCall(e),disabled:this.state.blocked||this.state.submit,type:"input-button",iconName:"icon-v-email",ref:e=>{this._submitBtn=e}}),d.default.createElement("jdiv",{id:"callme-start-call",className:this.state.blocked||this.state.is_invalid_phone||this.state.submit?"":"can-call",onPointerDown:))):void 0}},{key:"getRenderData",value:function(){return{styles:{main:[{main:!0},{display:"cw_connected"===this.state.mode?"none":"block"}],waitBox:[{waitBox:!0},{display:"cw_wait"===this.state.mode?"block":"none"}],timerBox:[{timerBox:!0}]},style:k.default}}},{key:"renderData",value:function(e,t){if(!(0,M.isEmpty)(f.default.callback_settings))return d.default.createElement("jdiv",t.main,this.renderInputForm(k.default),d.default.createElement("jdiv",t.waitBox,d.default.createElement("jdiv",{className:k.default.waitText}," ",(0,p.default)("cw_callAfter")),d.default.createElement("jdiv",t.timerBox,d.default.createElement("jdiv",{className:k.default.count},this.state.timer||f.default.callback_settings.time)),d.default.createElement("jdiv",{className:k.default.waitText}," ",(0,p.default)((0,c.getTextSeconds)(f.default.callback_settings.time)))),d.default.createElement("jdiv",{style:{display:"cw_connecting"===this.state.mode?"block":"none"}},d.default.createElement("jdiv",{className:k.default.waitText},(0,p.default)("cw_connecting")),d.default.createElement("jdiv",{className:k.default.connectBox},d.default.createElement(y.default,{color:"#fff",iconName:"icon-connect2",className:k.default.connectIcon}),d.default.createElement("jdiv",{className:P.default.pinBox},d.default.createElement("jdiv",{className:P.default.pin1}),d.default.createElement("jdiv",{className:P.default.pin2}),d.default.createElement("jdiv",{className:P.default.pin3})))),d.default.createElement("jdiv",{className:k.default.pin,style:{display:this.state.pin?"block":"none"}}),this.state.close&&d.default.createElement(v.default,{onClose:e=>{e.stopPropagation()}}));R.log("Callwidget not configured yet.")}}]),a}(_.default);var D=(0,j.connect)(()(I);t.default=D},22129:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.CallbackDelayedBodyInfo=t.CallbackChatDelayedBodyInfo=void 0;var r=n(a(98661)),l=n(a(99645));t.CallbackDelayedBodyInfo=e=>{let t=e.children;return r.default.createElement("jdiv",{className:l.default.bodyInfo},r.default.createElement("jdiv",{className:l.default.bodyInfoText,dangerouslySetInnerHTML:{__html:t}}))};t.CallbackChatDelayedBodyInfo=e=>{let t=e.children;return r.default.createElement("jdiv",{className:l.default.bodyInfoChat},r.default.createElement("jdiv",{className:l.default.bodyInfoChatText,dangerouslySetInnerHTML:{__html:t}}))}},93645:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(33119)),l=n(a(92664)),o=n(a(7819)),i=n(a(84827)),u=n(a(85299)),s=n(a(55536)),d=n(a(61125)),c=n(a(98661)),f=a(33069),p=n(a(91275)),m=a(21476),_=a(80161),h=a(54415),g=a(83170),b=a(49963);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}let y=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var n;return(0,r.default)(this,a),n=t.call(this,e),(0,d.default)((0,o.default)(n),"onSubmit",(()=>{const e=n.state,t=e.activePeriodIndex,a=e.phoneNumber,r=(e.eulaAccepted,n.state.periods[t].value),l=a;n.state.phoneInvalid||p.default.submitShowEula(l)||(b.connectionAdapter.checkConnection((),h.Monitoring.telemetry(g.TelemetryName.CWP_SUBMIT,{param1:"delayed"}))})),(0,d.default)((0,o.default)(n),"onPeriodChange",(e=>{const t=e.activeOptionIndex;n.setState({activePeriodIndex:t})})),(0,d.default)((0,o.default)(n),"onPhoneChange",(e=>{const t=e.invalidPhone,a=e.value,r=e.code;n.setState({phoneInvalid:t,phoneNumber:a,phoneCode:r})})),n.state={periods:(0,f.formatPeriodsToSelectModel)(n.props.periods),activePeriodIndex:0,phoneInvalid:!0},n}return(0,l.default)(a,[{key:"componentDidMount",value:function(){_.RouterUtils.needToShowEula()&&m.Router.on("submit_eula_success",bind(this))}},{key:"componentWillReceiveProps",value:function(e){const t=e.periods,a=e.phone,n={};n.periods=(0,f.formatPeriodsToSelectModel)(t),a&&a!==this.state.phone&&(n.phoneNumber=a.replace(/\+/,"")),this.setState(n)}}]),a}(c.default.Component);t.default=y},46528:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(33119)),l=n(a(92664)),o=n(a(84827)),i=n(a(85299)),u=n(a(55536)),s=n(a(98661)),d=n(a(84726)),c=n(a(51313)),f=n(a(87316)),p=n(a(66400)),m=n(a(93645)),_=a(22129),h=a(33069),g=a(44145),b=a(81152),v=a(47138),y=n(a(50732));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,i.default)(this,a)}}let E=function(e){(0,o.default)(a,e);var t=O(a);eturn(0,l.default)(a,[{key:"render",value:function(){const e=this.props,t=e.statusCode,a=e.color,n=e.status,r=e.error,l=e.phone,o=this.state,i=o.periods,u=o.activePeriodIndex,m=t===v.DelayedCallStatus.WAIT,O=m;let E=(0,d.default)("callback_delayed_title");if((0,h.isErrorStatusCode)(t)&&(E=(0,d.default)("callback_delayed_submit_fail")),t===v.DelayedCallStatus.SUCCESS){const e=(0,g.getLastMessageByName)(b.MessageName.DELAYED_CALL_SUCCESS);return s.default.createElement(_.CallbackChatDelayedBodyInfo,{mode:"chat"},(null==e?void 0:e.text)||(0,d.default)("callback_delayed_submit_success"))}return s.default.createElement("jdiv",{className:y.default.body},s.default.createElement("jdiv",{className:y.default.message},E),s.default.createElement(f.default,{theme:"inset",height:"sm",invalid:(0,h.isErrorStatusCode)(t),disabled:m,classNameWrap:y.default.periodSelectWrap,activeOptionIndex:u,options:i,onChange:this.onPeriodChange,color:a}),s.default.createElement(c.default,{type:"inForm",status:n,error:r,phone:l,classNameContainer:y.default.classNameInputPhone,onChange:this.onPhoneChange,onEnter:this.onSubmit}),s.default.createElement(p.default,{height:"sm",widthFluid:!0,disabled:O,onClick:this.onSubmit},(0,d.default)("callback_delayed_button_submit")))}}]),a}(m.default);t.default=E},79601:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=R(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=a(36113),i=n(a(45697)),u=n(a(94184)),s=a(21721),d=a(97615),c=a(69882),f=a(73549),p=a(47060),m=a(21476),_=n(a(81455)),h=n(a(22866)),g=n(a(41963)),b=n(a(19955)),v=n(a(36207)),y=n(a(62887)),O=n(a(33744)),E=n(a(82521)),C=n(a(84726)),w=n(a(65885)),j=n(a(73727)),S=a(80161),M=n(a(71323)),T=n(a(13411)),k=n(a(8972)),P=n(a(57597)),x=a(32891);function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(R=function(e){return e?a:t})(e)}const N=l.default.lazy((()=>a.e(711).then(a.bind(a,34285)))),I=l.default.lazy((()=>a.e(772).then(a.bind(a,93393)))),D=[p.Route.CHAT,p.Route.CHAT_CALL,p.Route.CHAT_EULA,p.Route.CHAT_MIN,p.Route.CHAT_SOCIAL,p.Route.CHAT_SETUP_CALL,p.Route.DEPARTMENTS,p.Route.INTRODUCE,p.Route.DEBUG],A=[p.Route.CHAT,p.Route.CHAT_CALL,p.Route.CHAT_SOCIAL],B=[p.Route.CHAT,p.Route.CHAT_CALL,p.Route.CHAT_SOCIAL],L=e=>{let t=e.canRenderCall,a=e.showHeaderText,n=e.showBody,o=e.isOnline,i=e.widgetId,R=e.hasIntegration,L=e.route,F=e.quoteMsgId,z=e.callbackStatus,H=e.showEula;const W=(0,l.useRef)(null),q=(0,l.useState)({inputHeight:0}),U=(0,r.default)(q,2),V=U[0],G=U[1],Z=!b.default.mobileOrTablet()&&(m.Router.getCurrentRoute()===p.Route.INTRODUCE||"cw_connected"===z&&m.Router.getCurrentRoute()===p.Route.CALL),$=()=>{if("sb"===R)return;return j.default.joint&&(j.default.joint.vk||j.default.joint.fb||j.default.joint.sb)?l.default.createElement(f.Path,{paths:[p.Route.CHAT_SOCIAL],withMountTransition:!0,withUnmountTransition:!0,transition:"PopupSlideUpEULA",name:"ChatSocialPopup",duration:300,cheap:!0},l.default.createElement("jdiv",{className:P.default.popupFull},l.default.createElement(w.default,{onClose:()=>{m.Router.next(p.RouterEvent.ToChat)}}))):null},K=()=>l.default.createElement(s.DisconnectAlert,{route:p.Route.CHAT},l.default.createElement("jdiv",{className:P.default.popup},t?l.default.createElement(f.Path,{paths:[p.Route.CHAT_CALL],withMountTransition:!0,withUnmountTransition:!0,transition:"Fade",name:"ChatBodyCallPopup",style:{top:0,position:"absolute",width:"100%"},cheap:!0},l.default.createElement(_.default,{route:"chat",status:z,display:!0})):null));return l.default.createElement("jdiv",{className:(0,u.default)({[P.default.main]:!b.default.mobileOrTablet()&&!(0,c.isChatPage)(),[P.default.mobile]:b.default.mobileOrTablet()||(0,c.isChatPage)(),[P.default.__static]:Z,[P.default.noShadow]:!a}),ref:W},l.default.createElement(f.Path,{paths:D,name:"ChatHeader",className:P.default.headerBox,isStatic:Z},l.default.createElement("jdiv",{className:P.default.header},l.default.createElement(y.default,{showHeaderText:n}))),l.default.createElement(f.Path,{paths:A,name:"ChatBody"},l.default.createElement("jdiv",{className:(0,u.default)({[P.default.body]:!0,[P.default.show]:n})},l.default.createElement(k.default,{inputHeight:V.inputHeight+(F?50:0)})),K(),$()),(()=>{if(-1!==B.indexOf(L))return l.default.createElement(f.Path,{paths:B,name:"ChatInput",transition:"Fade",shouldWait:0,className:(0,u.default)({[P.default.input]:!0,[P.default.show]:!0})},l.default.createElement(x.InputContainer,{onInputChangeHeight:e=>{V.inputHeight!==e&&G({inputHeight:e})}}))})(),S.RouterUtils.canShowIntroduceForm()?l.default.createElement(f.Path,{paths:[p.Route.INTRODUCE],name:"Introduce",withMountTransition:!0,transition:m.Router.getPrevRoute()===p.Route.LABEL?"FadeWithDelay":"Fade",waitBeforeUnmount:100},l.default.createElement("jdiv",{className:(0,u.default)({[P.default.body]:!0,[P.default.show]:n})},j.default.new_widget_introduce?l.default.createElement(E.default,null):l.default.createElement(O.default,null))):null,j.default.departments?l.default.createElement(f.Path,{paths:[p.Route.DEPARTMENTS],name:"Departments",shouldWait:0,className:(0,u.default)({[P.default.body]:!0,[P.default.show]:n})},l.default.createElement(g.default,null)):null,j.default.eula?l.default.createElement(f.Path,{paths:[p.Route.CHAT_EULA],withMountTransition:!0,withUnmountTransition:!0,transition:"PopupSlideUpEULA",name:"ChatBodyEulaPopup",fixed:!0,duration:300,cheap:!0},l.default.createElement("jdiv",{className:P.default.popupFull},l.default.createElement(v.default,{showCallback:()=>{},hideCallback:()=>{}}))):null,j.default.eula&&L===p.Route.CHAT?l.default.createElement(T.default,{containerClassName:P.default.eulaContainer,isOpened:H,onAgree:()=>M.default.acceptEula(),onDisagree:):void 0,L!==p.Route.DEBUG?null:l.default.createElement(f.Path,{paths:[p.Route.DEBUG],name:"Debug",shouldWait:0,className:(0,u.default)({[P.default.body]:!0,[P.default.show]:n})},l.default.createElement(l.default.Suspense,{fallback:l.default.createElement("jdiv",{className:P.default.loading},(0,C.default)("cb_loading"))},l.default.createElement(N,{online:o,version:d.EnvironmentManager.getVersion(),branch:d.EnvironmentManager.getBranch(),widgetId:i,hasErrors:h.default.getInstance().pageHasErrors(),closeButtonClick:()=>{m.Router.next(p.RouterEvent.ToChat)}}))),L!==p.Route.CHAT_SETUP_CALL?null:l.default.createElement(f.Path,{paths:[p.Route.CHAT_SETUP_CALL],withMountTransition:!0,withUnmountTransition:!0,transition:"PopupSlideUpEULA",name:"ChatBodySetupCallPopup",fixed:!0,duration:300,cheap:!0},l.default.createElement("jdiv",{className:P.default.popupFull},l.default.createElement(l.default.Suspense,{fallback:l.default.createElement("jdiv",{className:P.default.loading},(0,C.default)("cb_loading"))},l.default.createElement(I,null)))))};L.propTypes={isOnline:i.default.bool,canRenderCall:i.default.bool.isRequired,showHeaderText:i.default.bool,showBody:i.default.bool,widgetId:i.default.string,hasIntegration:i.default.bool,route:i.default.string,quoteMsgId:i.default.number,callbackStatus:i.default.oneOfType([i.default.string,i.default.bool]),showEula:i.default.oneOfType([i.default.string,i.default.bool])};var F=(0,o.connect)((e=>({isOnline:e.app.isOnline,widgetId:e.settings.system.widgetId,route:e.app.route,quoteMsgId:e.app.quoteMsgId,callbackStatus:e.callback.status,hasIntegration:e.client.hasIntegration,showEula:e.app.showEula})))(L);t.default=F},90171:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxNew=void 0;var r=n(a(23101)),l=n(a(98661)),o=n(a(94184)),i=a(15496),u=a(43417),s=n(a(14325));t.CheckboxNew=e=>{let t=e.className,a=e.checkedClassName,n=e.bubbleColor,d=e.checked,c=e.error,f=e.isMobile,p=e.onClick,m=e.qaId;return l.default.createElement("jdiv",(0,r.default)({className:(0,o.default)(s.default.checkbox,{[s.default[`_${n}`]]:n,[t]:t,[a]:a&&d,[s.default._mobile]:f,[s.default._checked]:d,[s.default._error]:c})},(0,u.onClickHandler)((),(0,i.withLocator)(m)))}},16586:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(94184)),o=n(a(45697)),i=n(a(84726)),u=n(a(47084));const s=e=>{let t=e.show,a=void 0===t?0:t,n=e.isMobile;const o=(0,l.default)({[u.default.main]:!0,[u.default.__mobile]:n});return a?r.default.createElement("jdiv",{className:o},r.default.createElement("jdiv",{className:u.default.text},(0,i.default)("lblPencilHint"))):null};s.propTypes={show:o.default.bool,isMobile:o.default.bool};var d=r.default.memo(s);t.default=d},51120:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(94184)),o=n(a(45697)),i=n(a(30123));const u=e=>{let t=e.isHeader,a=void 0!==t&&t,n=e.url,o=void 0===n?null:n;const u=(0,l.default)({[i.default.botIcon]:!0,[i.default.__header]:a});return r.default.createElement("jdiv",{className:u},o&&r.default.createElement("jdiv",{className:i.default.img,style:{backgroundImage:`url(${o})`}}))};u.propTypes={isHeader:o.default.bool,url:o.default.string};var s=r.default.memo(u);t.default=s},32042:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(30123)),o=n(a(94184)),i=n(a(45697));const u=e=>{let t=e.urls,a=e.bgColor,n=e.dark,i=void 0!==n&&n,u=e.expanded,s=void 0!==u&&u,d=e.inCall,c=void 0!==d&&d,f=e.inChat,p=void 0!==f&&f,m=e.isMobile,_=void 0!==m&&m,h=e.isTablet,g=void 0!==h&&h;const b=`_width${t.length}`,v=(0,o.default)({[l.default.avatar]:!0,[l.default._connected]:!p&&c,[l.default._expanded]:s,[l.default._mobile]:_,[l.default._tablet]:g,[l.default._chatStyle]:p,[l.default[b]]:!0});return r.default.createElement("jdiv",{className:v},r.default.createElement("jdiv",{className:l.default.avatarList},t.map(((e,n)=>t.length>3&&n===t.length-1?r.default.createElement("jdiv",{className:(0,o.default)({[l.default.dotsItem]:!0,[l.default._dark]:i,[l.default._light]:!i}),style:{borderColor:a}},r.default.createElement("jdiv",null,"...")):r.default.createElement("jdiv",{className:(0,o.default)({[l.default.avatarItem]:!0,[l.default.darkAvatar]:i,[l.default.lightAvatar]:!i}),style:{backgroundColor:a,borderColor:a}},r.default.createElement("jdiv",{className:l.default.avatarListImg,style:{backgroundImage:e?`url(${e})`:null}}))))))};u.propTypes={urls:i.default.arrayOf(i.default.string).isRequired,bgColor:i.default.string.isRequired,dark:i.default.bool.isRequired,expanded:i.default.bool,inCall:i.default.bool,inChat:i.default.bool,isMobile:i.default.bool,isTablet:i.default.bool};var s=r.default.memo(u);t.default=s},13639:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(33119)),o=n(a(92664)),i=n(a(84827)),u=n(a(85299)),s=n(a(55536)),d=n(a(98661)),c=n(a(54720)),f=n(a(40704)),p=n(a(73727)),m=n(a(19955)),_=n(a(4855)),h=a(90361),g=a(57930),b=a(47713),v=n(a(71528));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}_.default.name("Button");const O=p.default.bubble_color||"green";let E=function(e){(0,i.default)(a,e);var t=y(a);eturn(0,o.default)(a,[{key:"getRenderData",value:function(){return{styles:{button:[{button:!0,["_"+O]:!0,_disabled:this.props.disabled,_medium:this.props.medium,__ios:m.default.ios()}],inputButton:[{inputButton:!0,["_"+O]:!0,_disabled:this.props.disabled,__mobileChat:this.props.chatMobile}]},style:v.default}}},{key:"renderData",value:function(e,t){return"input-button"===this.props.type?d.default.createElement("jdiv",(0,r.default)({},t.inputButton,{onClick:this.props.click.bind(this)}),d.default.createElement(f.default,{color:"#fff",iconName:this.props.iconName,className:v.default.buttonIcon})):d.default.createElement("jdiv",(0,r.default)({},t.button,(0,b.onClickHandler)((,!0,!0),{ref:e=>{this._submitBtn=e}},(0,h.withLocator)(g.Locator[this.props["data-qa-id"]])),d.default.createElement("jdiv",{className:v.default.text},this.props.text))}}]),a}(c.default);t.default=E},22048:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(33119)),o=n(a(92664)),i=n(a(84827)),u=n(a(85299)),s=n(a(55536)),d=n(a(98661)),c=a(36113),f=n(a(54720)),p=n(a(84726)),m=n(a(73727)),_=n(a(13639)),h=n(a(22760)),g=a(21476),b=a(47060),v=n(a(98960)),y=a(90361),O=a(57930),E=a(92560),C=a(9393),w=a(26932),j=n(a(4855)),S=a(94537);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}const T=j.default.name("Buttons");let k=function(e){(0,i.default)(a,e);var t=M(a);function a(e){var n;return(0,l.default)(this,a),(n=t.call(this,e)).successCallback=e.successCallback||function(){},n.errorCallback=e.errorCallback||function(){},n.focusPopupInput=e.focusPopupInput||function(){},n._submitBtn=null,n._submitBy=null,n}return(0,o.default)(a,[{key:"submitForm",value:function(e){if(e&&(e.preventDefault(),e.stopPropagation(),this._submitBy=e.view?"byClick":"byEnter"),this.props.disabled)return void T.log("Button is disabled.");const t=this.props.values,a={};this.values=!1,(0,C.each)(t,(function(e){"name"==e.name&&(e.name="client_name");const t="string"==typeof e.value?e.value.trim():e.value;a[e.name]=t||null}));const n=this.isValid(t);if(T.log("submitForm",t,n),n.error)e.preventDefault(),this.errorCallback(n.data),this.values=!1;else{const e={};(0,C.each)(n.data,(),m.default.eula&&!this.props.eulaAccepted&&this.countNotEmptyValues(e)?this.values=e:this.resetForm(e)}}},{key:"componentDidUpdate",value:function(e){this.props.eulaAccepted!==e.eulaAccepted&&m.default.eula&&this.props.eulaAccepted&&this.values&&(this.resetForm(this.values),this.values=!1)}},{key:"countNotEmptyValues",value:function(e){const t=Object.values(e).filter((e=>e)).length;return 1===t&&e.message?0:t}},{key:"cancel",value:,{key:"isValid",value:function(e){let t=!1;for(const a in e)if(a){let n=a;"client_name"==a&&(n="name");const r=m.default.contacts_settings[n]&&m.default.contacts_settings[n].required;e[a]&&(v.default[a](e[a].value||"")||(0,E.isEmpty)(e[a].value)&&!r&&"message"!==a?e[a].error=!1:(t=!0,e[a].error=!0))}return{data:e,error:t}}},{key:"resetForm",value:function(e){m.default.eula&&!this.props.eulaAccepted&&this.countNotEmptyValues(e)||this.setInfo(e)}},{key:"setInfo",value:function(e){T.log("setInput",e),this._submitBtn.disabled=!0,this.successCallback(e,this._submitBy)}},{key:"getRenderData",value:function(){let e=m.default.contacts_ask===S.ContactsType.BEFORE_CHAT&&this.props.isOnline&&g.Router.getCurrentRoute()===b.Route.INTRODUCE?(0,p.default)("lblSendBefore"):(0,p.default)("lblSend");return m.default.eula&&!this.props.eulaAccepted&&(e=(0,p.default)("continue")),{styles:{},style:h.default,data:{text:e}}}},{key:"renderData",value:function(e,t){return d.default.createElement(d.default.Fragment,null,d.default.createElement(_.default,(0,r.default)({click:this.submitForm.bind(this),text:e.text,ref:e=>{this._submitBtn=e},disabled:this.props.disabled},(0,y.withLocator)(O.Locator.CONTACTS_FORM_SUBMIT))))}}]),a}(f.default);var P=(0,c.connect)(()(k);t.default=P},36672:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(98661)),o=a(68403),i=n(a(3501)),u=n(a(19955)),s=n(a(45697)),d=n(a(94184)),c=n(a(71207)),f=a(47713);const p=e=>{let t=e.hide,a=e.onClick,n=e.icon,s=e.text;const p=(0,d.default)({[c.default.scrollForm]:!0,[c.default.__hide]:t,[c.default.__ad]:(0,o.showAd)(),[c.default.__mobile]:u.default.mobileOrTablet()});return l.default.createElement("jdiv",(0,r.default)({className:p},(0,f.onClickHandler)(a)),l.default.createElement("jdiv",{className:c.default.textToForm},l.default.createElement(i.default,{icon:n,alone:!1,className:"emojiMessages",style:!0})," ",s))};p.displayName="ChatPopupButton",p.propTypes={hide:s.default.bool.isRequired,onClick:s.default.func.isRequired,icon:s.default.string.isRequired,text:s.default.string.isRequired};var m=p;t.default=m},98238:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(45697)),o=n(a(94184)),i=a(14295),u=n(a(12888));const s=e=>{let t=e.className,a=e.into,n=e.direction,l=e.timeout,s=e.delay,d=e.children,c=e.onClosed,f=e.onOpening,p=e.onOpened,m=e.onClosing;const _=(0,i.useFadeIn)(a,l+s),h={transitionDuration:l+"ms",transitionDelay:s+"ms"};return(0,i.useFadeEffect)(_,{onClosed:c,onOpening:f,onOpened:p,onClosing:m}),r.default.createElement("jdiv",{style:h,className:(0,o.default)(u.default.main,u.default[_],u.default["__"+n],t)},d)};s.defaultProps={timeout:250,delay:0,direction:"bottom"},s.propTypes={className:l.default.string,into:l.default.bool,timeout:l.default.number,delay:l.default.number,direction:l.default.oneOf(["top","bottom","left","right"]),children:l.default.node.isRequired,onClosed:l.default.func,onOpening:l.default.func,onOpened:l.default.func,onClosing:l.default.func};var d=s;t.default=d},14295:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useFadeIn=t.useFadeEffect=void 0;var r=n(a(67375)),l=a(98661),o=a(98545),i=a(67531),u=a(49862);const s="closed",d="opening",c="opened",f="closing";t.useFadeIn=(e,t)=>{const a=(0,l.useState)(s),n=(0,r.default)(a,2),i=n[0],p=n[1],m=i===d||i===f,_=i===f?t:t/10;return(0,u.useDidUpdate)((function(){p((e=>e===s?d:f))}),[e]),(0,o.useTimeout)((function(){p(()}),m?_:null),i};t.useFadeEffect=(e,t)=>{let a=t.onClosed,n=t.onOpening,r=t.onOpened,l=t.onClosing;const o=(0,i.usePrevious)(e);(0,u.useDidUpdate)((function(){var t,o;null===(t=(o={[s]:a,[d]:n,[c]:r,[f]:l})[e])||void 0===t||t.call(o)}),[o])}},96340:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(33119)),o=n(a(92664)),i=n(a(84827)),u=n(a(85299)),s=n(a(55536)),d=n(a(98661)),c=a(36113),f=n(a(54720)),p=n(a(73727)),m=a(43025),_=n(a(19955)),h=a(90361),g=a(57930),b=n(a(22760));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}let y=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var n;(0,l.default)(this,a);let r=(n=t.call(this,e)).props.name;return"client_name"===r&&(r="name"),n.state={text:n.props.clientInfo[n.props.name]?n.props.clientInfo[n.props.name]:"",error:e.error,key:r},n.onBlur=e.onBlur||function(){},n.onFocus=()=>{n.setState({error:!1}),e.onFocus&&e.onFocus()},n.handleChange=(t,a)=>{a.target.value!==n.props.value&&e.handleChange&&e.handleChange(t,a)},n._input=null,n}return(0,o.default)(a,[{key:"componentDidMount",value:,{key:"getType",value:,{key:"setValue",value:function(e){this._input.value=e,this.handleChange(this.props.name,{target:{value:e,required:this.props.required}})}},{key:"needRender",value:function(){return p.default.contacts_settings&&p.default.contacts_settings[this.state.key]&&p.default.contacts_settings[this.state.key].show||this.props.show}},{key:"getRenderData",value:function(){return{styles:{inputField:[{inputField:!0,_error:this.props.submited?this.props.error:this.props.submited,["_"+this.props.color]:!(!this.props.color||"green"===this.props.color),__mobile:_.default.mobileOrTablet(),__valid:this.props.valid,__bluredEmpty:!(this._input&&this._input.value)}]},style:b.default,data:{placeholder:this.props.placeholder+(this.props.required||p.default.contacts_settings[this.state.key].required?"*":"")}}}},{key:"renderData",value:function(e,t){if(this.needRender())return d.default.createElement("jdiv",{className:b.default.fieldWrap},d.default.createElement("input",(0,r.default)({},t.inputField,{type:this.getType(this.state.key),autoComplete:this.getType(this.state.key),onKeyPress:e=>{e.stopPropagation(),m.getNextSiblingNodeFocus.call(this,e)},onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),placeholder:e.placeholder,onInput:e=>{e.stopPropagation(),this.handleChange.call(this,this.props.name,e)},onKeyUp:e=>{e.stopPropagation(),this.handleChange.call(this,this.props.name,e)},onKeyDown:e=>{e.stopPropagation()},ref:e=>{this._input=e}},(0,h.withLocator)(g.Locator[`CONTACTS_FORM_${this.state.key.toUpperCase()}`]),{maxLength:"email"==this.state.key?255:null})))}}]),a}(f.default);var O=(0,c.connect)((e=>{const t=e.client;return{clientInfo:{client_name:t.name,phone:t.phone,email:t.email,description:t.description}}}))(y);t.default=O},43569:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(67375)),o=n(a(88436)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),u=n(a(45697)),s=n(a(94184)),d=a(79641),c=a(21733),f=a(55330),p=n(a(11880)),m=n(a(86762));const _=["color","component","disabled","error","radius","required","size","variant","placeholder","label","rightSection","rightSectionWidth","rightSectionProps","classNames","fontSize","lineHeight","value","isIos"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}const g=(0,i.forwardRef)(((e,t)=>{let a=e.color,n=e.component,u=e.disabled,h=e.error,g=e.radius,b=e.required,v=e.size,y=e.variant,O=e.placeholder,E=e.label,C=e.rightSection,w=e.rightSectionWidth,j=e.rightSectionProps,S=e.classNames,M=e.fontSize,T=e.lineHeight,k=e.value,P=e.isIos,x=(0,o.default)(e,_);const R=n||"input",N=(0,i.useState)((()=>!!k)),I=(0,l.default)(N,2),D=I[0],A=I[1],B=(0,i.useState)(""),L=(0,l.default)(B,2),F=L[0],z=L[1],H=(0,i.useRef)(null),W=(0,f.useMergeRefs)(H,t),q=e=>b?e+"*":e,U=(0,s.default)({[m.default.root]:!0,[m.default[y]]:!0,[m.default.__invalid]:h,[m.default["__"+a]]:a,[m.default["__"+v+"Size"]]:!0,[m.default["__"+g+"Radius"]]:!0,[S.input]:S.input,[m.default.__withLabel]:E,[m.default.__active]:D||""!==k,[m.default.__ios]:P}),V=(0,s.default)({[m.default.label]:!0,[m.default["__"+v+"Size"]]:!0,[m.default["__"+a]]:a,[m.default.__invalid]:h}),G=(0,s.default)({[m.default.rightSection]:C,[S.rightSection]:S.rightSection}),Z=(0,s.default)({[m.default.error]:!0,[m.default["__"+v+"Size"]]:!0});return(0,i.useEffect)((function(){H.current&&!F&&z(H.current.style.paddingRight)}),[F]),(0,i.useEffect)((function(){H.current&&H.current.style.setProperty("padding-right",C?w+"px":F,"important")}),[F,C,w]),(0,i.useEffect)((function(){H.current&&(0,d.isNumber)(M)&&H.current.style.setProperty("font-size",M+"px","important")}),[M]),(0,i.useEffect)((function(){H.current&&(0,c.isString)(T)&&H.current.style.setProperty("line-height",T,"important")}),[T]),i.default.createElement(p.default,null,i.default.createElement(p.default,null,i.default.createElement(R,(0,r.default)({ref:W,className:U,disabled:u,placeholder:!E&&O?q(O):" ",value:k,onFocus:()=>A(!0),onBlur:()=>A(!1)},x)),E&&i.default.createElement("jdiv",{className:V},q(E)),C&&i.default.createElement("jdiv",(0,r.default)({},j,{className:G,style:{width:w}}),C)),(0,c.isString)(h)&&i.default.createElement("jdiv",{className:Z},h))}));g.displayName="Input",g.defaultProps={color:"green",radius:"sm",size:"sm",variant:"default",rightSectionWidth:38,value:"",classNames:{input:null,rightSection:null}},g.propTypes={color:u.default.string,component:u.default.any,error:u.default.oneOfType([u.default.string,u.default.bool]),label:u.default.string,placeholder:u.default.string,radius:u.default.oneOf(["xs","sm","md","lg","xl"]),required:u.default.bool,disabled:u.default.bool,size:u.default.oneOf(["xs","sm","md","lg","xl"]),variant:u.default.oneOf(["default","filled","inset","unstyled"]),rightSection:u.default.node,rightSectionWidth:u.default.number,rightSectionProps:u.default.object,value:u.default.string,fontSize:u.default.number,lineHeight:u.default.string,classNames:u.default.shape({input:u.default.string,rightSection:u.default.string}),isIos:u.default.bool};var b=g;t.default=b},11880:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(88436)),o=n(a(98661)),i=n(a(45697)),u=n(a(44064));const s=["children","component"],d=e=>{let t=e.children,a=e.component,n=(0,l.default)(e,s);const i=a||"jdiv";return o.default.createElement(i,(0,r.default)({className:u.default.wrapper},n),t)};d.propTypes={children:i.default.node.isRequired,component:i.default.any};var c=d;t.default=c},46133:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(88436)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),i=n(a(45697)),u=a(21733),s=n(a(43569)),d=n(a(20404)),c=n(a(40704));const f=["color","data","disabled","error","placeholder","radius","required","rightSectionWidth","size","value","variant","onChange"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}const m=(0,o.forwardRef)(((e,t)=>{let a=e.color,n=e.data,i=e.disabled,p=e.error,m=e.placeholder,_=e.radius,h=e.required,g=e.rightSectionWidth,b=e.size,v=e.value,y=e.variant,O=e.onChange,E=(0,l.default)(e,f);const C=n.map((e=>(0,u.isString)(e)?{label:e,value:e}:e)).map(();return o.default.createElement(s.default,(0,r.default)({component:"select",ref:t,readOnly:!0,classNames:{input:d.default.select},color:a,disabled:i,error:p,radius:_,required:h,size:b,value:v,variant:y,placeholder:m,onChange:rightSectionWidth:g,rightSection:o.default.createElement(c.default,{iconName:"icon-v",color:"#8B9096",hoverColor:"#222D38",className:d.default.dropIcon})},E),C)}));m.displayName="NativeSelect",m.defaultProps={color:"green",radius:"sm",size:"sm",variant:"default",rightSectionWidth:38},m.propTypes={color:i.default.oneOf(["green","blue","grey"]),data:i.default.arrayOf(i.default.oneOfType([i.default.string,i.default.shape({label:i.default.string,value:i.default.oneOfType([i.default.string,i.default.number]),disabled:i.default.bool})])),disabled:i.default.bool,error:i.default.oneOfType([i.default.string,i.default.bool]),value:i.default.oneOfType([i.default.string,i.default.number]),placeholder:i.default.string,radius:i.default.oneOf(["xs","sm","md","lg","xl"]),required:i.default.bool,rightSectionWidth:i.default.number,size:i.default.oneOf(["xs","sm","md","lg","xl"]),variant:i.default.oneOf(["default","filled","inset","unstyled"]),onChange:i.default.func};var _=m;t.default=_},13114:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(88436)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),i=n(a(45697)),u=n(a(94184)),s=n(a(80810));const d=["children","component","radius","shadow","padding","withBorder","addClassname"];function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const f=(0,o.forwardRef)(();f.defaultProps={radius:"sm",shadow:"sm"},f.displayName="Paper",f.propTypes={children:i.default.node.isRequired,component:i.default.any,radius:i.default.oneOf(["xs","sm","md","lg","xl"]),padding:i.default.oneOf(["xs","sm","md","lg","xl"]),shadow:i.default.oneOf(["xs","sm","md","lg","xl"]),withBorder:i.default.bool,addClassname:i.default.string};var p=f;t.default=p},12593:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(61125)),o=n(a(15687)),i=n(a(67375)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),s=n(a(45697)),d=n(a(94184)),c=a(85455),f=a(96231),p=a(55004),m=a(49862),_=n(a(17666)),h=n(a(35247));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const y=e=>{let t=e.arrowSize,a=e.arrowStyle,n=e.children,l=e.forceUpdateDependencies,s=e.gutter,g=e.modifiers,b=e.mounted,y=e.placement,O=e.position,E=e.referenceElement,C=e.withArrow,w=e.withinPortal,j=e.zIndex;const S=C?s+t:s,M="center"===y?O:`${O}-${y}`,T=(0,u.useState)(null),k=(0,i.default)(T,2),P=k[0],x=k[1],R=(0,c.usePopper)(E,P,{placement:M,modifiers:[{name:"offset",options:{offset:[0,S]}}].concat((0,o.default)(g))}),N=R.styles,I=R.attributes,D=R.forceUpdate;(0,m.useDidUpdate)((()=>{(0,p.isFunction)(D)&&D()}),l);const A=(0,d.default)({[h.default.arrow]:!0,[h.default["__"+O]]:!0}),B=v(v({},a),(0,f.getArrowStyles)({position:O,placement:y,arrowSize:t}));return b?u.default.createElement(_.default,{withinPortal:w,zIndex:j},u.default.createElement("jdiv",(0,r.default)({ref:x,style:N.popper},I.popper),u.default.createElement("jdiv",null,n,C&&u.default.createElement("jdiv",{style:B,className:A})))):null};y.defaultProps={arrowSize:2,forceUpdateDependencies:[],gutter:5,modifiers:[],placement:"center",position:"bottom",withArrow:!1,withinPortal:!0,zIndex:300},y.propTypes={arrowSize:s.default.number,arrowStyle:s.default.object,children:s.default.node.isRequired,forceUpdateDependencies:s.default.array,gutter:s.default.number,modifiers:s.default.array,mounted:s.default.bool,placement:s.default.oneOf(["start","center","end"]),position:s.default.oneOf(["top","left","bottom","right"]),referenceElement:s.default.oneOfType([s.default.element.isRequired,()=>null]),withArrow:s.default.bool,withinPortal:s.default.bool,zIndex:s.default.number};var O=y;t.default=O},17666:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(45697)),o=n(a(10739));const i=e=>{let t=e.children,a=e.className,n=e.withinPortal,l=void 0===n||n,i=e.zIndex,u=void 0===i?300:i;return l?r.default.createElement(o.default,{className:a,zIndex:u},t):r.default.createElement("jdiv",{ref:e=>{e&&e.style.setProperty("z-index",u,"important")},className:a,style:{position:"relative"}},t)};i.propTypes={children:l.default.node.isRequired,className:l.default.string,withinPortal:l.default.bool,zIndex:l.default.number};var u=i;t.default=u},96231:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.getArrowStyles=void 0;var r=n(a(61125)),l=n(a(67375));function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const u={top:["left","bottom","right"],bottom:["left","top","right"],left:["top","right","bottom"],right:["top","left","bottom"]};t.getArrowStyles=e=>{let t=e.position,a=e.placement,n=e.arrowSize;const r=2*n,o=`calc(50% - ${n}px)`,s=-n,d={width:r,height:r},c=(0,l.default)(u[t],3),f=c[0],p=c[1],m=c[2];switch(a){case"start":return i(i({},d),{},{[f]:r,[p]:s});case"center":return i(i({},d),{},{[f]:o,[p]:s});case"end":return i(i({},d),{},{[m]:r,[p]:s});default:return d}}},32325:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(40704)),o=n(a(42805)),i=a(21476),u=a(47060),s=n(a(45697));const d=e=>{let t=e.onClose;return r.default.createElement("jdiv",{className:o.default.popupClose,onClick:e=>{e.stopPropagation(),i.Router.next(u.RouterEvent.Cancel),t&&t(e)}},r.default.createElement(l.default,{className:o.default.closeIcon,iconName:"icon-popup-close",color:"#959DA5",hoverColor:"#222D38"}))};d.propTypes={onClose:s.default.func};var c=r.default.memo(d);t.default=c},10739:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=a(98661),i=n(a(45697)),u=a(21733);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}const d=e=>{let t=e.children,a=e.className,n=e.position,i=void 0===n?"relative":n,s=e.target,d=e.zIndex,c=void 0===d?1:d;const f=(0,l.useRef)(),p=(0,l.useState)(!1),m=(0,r.default)(p,2),_=m[0],h=m[1];return(0,l.useLayoutEffect)((()=>(h(!0),f.current=s?(0,u.isString)(s)?document.querySelector(s):s:document.createElement("jdiv"),s||document.body.appendChild(f.current),),[s]),_?(0,o.createPortal)(l.default.createElement("div",{className:a,style:{position:i,zIndex:c}},t),f.current):null};d.propTypes={children:i.default.node.isRequired,className:i.default.string,position:i.default.string,target:i.default.element,zIndex:i.default.number};var c=d;t.default=c},33126:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=b(a(98661)),o=n(a(45697)),i=n(a(94184)),u=a(55004),s=a(21733),d=a(49862),c=n(a(43569)),f=n(a(11880)),p=b(a(59083)),m=n(a(43711)),_=n(a(42960)),h=n(a(40704));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}return n.default=e,a&&a.set(e,n),n}const v=e=>{let t=e.data,a=e.itemComponent,n=e.color,o=e.disabled,g=e.error,b=e.label,v=e.radius,y=e.required,O=e.size,E=e.variant,C=e.placeholder,w=e.name,j=e.gutter,S=e.initialValue,M=e.initialOpened,T=e.shadow,k=e.maxDropdownHeight,P=e.zIndex,x=e.dropdownPosition,R=e.positionDependencies,N=e.onDropdownOpen,I=e.onDropdownClose,D=e.rightSectionWidth,A=e.withinPortal,B=e.onChange,L=e.onKeyDown,F=e.onFocus,z=e.onBlur,H=e.isIos;const W=(0,l.useRef)(null),q=(0,l.useRef)(null),U=(0,l.useRef)({}),V=(0,l.useState)(S),G=(0,r.default)(V,2),Z=G[0],$=G[1],K=(0,l.useState)(M),J=(0,r.default)(K,2),X=J[0],Y=J[1],Q=(0,l.useState)(-1),ee=(0,r.default)(Q,2),te=ee[0],ae=ee[1],ne=t.map((e=>(0,s.isString)(e)?{label:e,value:e}:e)),re=ne.find((e=>e.value===Z)),le=ne.findIndex((),oe=(0,l.useState)(null==re?void 0:re.label),ie=(0,r.default)(oe,2),ue=ie[0],se=ie[1],de=(e,t)=>{var a;const n=U.current[null===(a=ne[e])||void 0===a?void 0:a.value];n&&n.parentNode&&(n.parentNode.scrollTop=t(n))},ce=()=>window.setTimeout((()=>{de(le,(e=>e.offsetTop-(q.current.clientHeight-e.offsetHeight)/2))}),0),fe=e=>{if(X!==e){const t=e?N:I;(0,u.isFunction)(t)&&t(),Y(e)}},pe=e=>{(null==re?void 0:re.value)===e.value||((e=>{$(e.value),se(e.label),B(e)})(e),ae(-1)),Y(!1)},me=return(0,d.useDidUpdate)((()=>{ae(me(-1,(e=>e+1),(e=>e<ne.length-1)))}),[ue]),l.default.createElement(f.default,{onMouseLeave:,l.default.createElement("input",{type:"hidden",name:w,value:Z}),l.default.createElement(c.default,{type:"text",ref:W,readOnly:!0,classNames:{input:(0,i.default)({[_.default.input]:!o})},color:n,disabled:o,error:g,radius:v,required:y,size:O,value:ue,variant:E,placeholder:C,label:b,isIos:H,rightSectionWidth:D,rightSection:l.default.createElement(h.default,{iconName:"icon-v",color:"#666666",className:_.default.dropIcon}),onMouseDown:()=>{const e=!X;fe(e),Z&&e&&(ae(le),ce())},onKeyDown:e=>{switch((0,u.isFunction)(L)&&L(e),e.nativeEvent.code){case"ArrowUp":e.preventDefault(),X?ae((e=>{const t=me(e,(,();return de(t,(e=>e.offsetTop<q.current.scrollTop?e.offsetTop-p.DROPDOWN_GAP:q.current.scrollTop)),t})):(ae(le),Y(!0),ce());break;case"ArrowDown":e.preventDefault(),X?ae((e=>{const t=me(e,(e=>e+1),();return de(t,(e=>{const t=e.offsetTop+e.offsetHeight,a=q.current,n=a.scrollTop,r=a.clientHeight;return t>n+r?t-r-p.DROPDOWN_GAP:n})),t})):(ae(le),Y(!0),ce());break;case"Escape":e.preventDefault(),Y(!1),ae(-1);break;case"Space":ne[te]&&X?(e.preventDefault(),pe(ne[te])):(Y(!0),ae(le),ce());break;case"Enter":e.preventDefault(),ne[te]&&X&&pe(ne[te])}},onFocus:e=>{(0,u.isFunction)(F)&&F(e),Y(!0),ce()},onBlur:e=>{(0,u.isFunction)(z)&&z(e),fe(!1)}}),l.default.createElement(p.default,{ref:q,dropdownPosition:x,gutter:j,maxDropdownHeight:k,mounted:ne.length>0&&X,positionDependencies:R,radius:v,referenceElement:W.current,shadow:T,withinPortal:A,zIndex:P},ne.map(((e,t)=>{const r=a||m.default;return l.default.createElement(r,{key:e.value,itemsRefs:U,value:e.value,label:e.label,color:n,size:O,radius:v,selected:Z===e.value,hovered:te===t,withinSelected:!!re,onItemSelect:()=>pe(e),onItemHover:()=>ae(t),isIos:H})}))))};v.defaultProps={color:"green",dropdownPosition:"bottom",initialOpened:!1,initialValue:"",rightSectionWidth:38,radius:"sm",size:"sm",variant:"default",withinPortal:!1},v.propTypes={color:o.default.oneOf(["green","blue","grey"]),data:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.shape({label:o.default.string,value:o.default.oneOfType([o.default.string,o.default.number]),disabled:o.default.bool})])),disabled:o.default.bool,dropdownPosition:o.default.oneOf(["top","left","bottom","right"]),error:o.default.oneOfType([o.default.string,o.default.bool]),gutter:o.default.number,initialOpened:o.default.bool,initialValue:o.default.oneOfType([o.default.string,o.default.number]),itemComponent:o.default.func,maxDropdownHeight:o.default.number,name:o.default.string,onDropdownClose:o.default.func,onDropdownOpen:o.default.func,placeholder:o.default.string,label:o.default.string,positionDependencies:o.default.array,radius:o.default.oneOf(["xs","sm","md","lg","xl"]),required:o.default.bool,rightSectionWidth:o.default.number,shadow:o.default.oneOf(["xs","sm","md","lg","xl"]),size:o.default.oneOf(["xs","sm","md","lg","xl"]),variant:o.default.oneOf(["default","filled","inset","unstyled"]),zIndex:o.default.number,withinPortal:o.default.bool,onChange:o.default.func,onKeyDown:o.default.func,onFocus:o.default.func,onBlur:o.default.func,isIos:o.default.bool};var y=v;t.default=y},59083:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DROPDOWN_GAP=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),l=n(a(45697)),o=n(a(12593)),i=n(a(13114)),u=n(a(42960));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}t.DROPDOWN_GAP=5;const d=(0,r.forwardRef)(((e,t)=>{let a=e.children,n=e.dropdownPosition,l=e.gutter,s=e.maxDropdownHeight,d=e.mounted,c=e.positionDependencies,f=e.radius,p=e.referenceElement,m=e.shadow,_=e.withinPortal,h=e.zIndex;return r.default.createElement(o.default,{forceUpdateDependencies:c,gutter:l,mounted:d,position:n,referenceElement:p,withinPortal:_,zIndex:h,modifiers:[{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:e=>{let t=e.state;t.styles.popper.width=`${t.rects.reference.width}px`},effect:e=>{let t=e.state;t.elements.popper.style.width=`${t.elements.reference.offsetWidth}px`}}]},r.default.createElement(i.default,{withBorder:!0,radius:f,shadow:m,onMouseDown:,r.default.createElement("jdiv",{ref:t,style:{display:"flex",flexDirection:"column",margin:4,maxHeight:s,overflow:"auto"},className:u.default.dropDown},a)))}));d.displayName="SelectDropdown",d.propTypes={children:l.default.node.isRequired,dropdownPosition:l.default.oneOf(["top","left","bottom","right"]).isRequired,gutter:l.default.number.isRequired,maxDropdownHeight:l.default.number,mounted:l.default.bool.isRequired,positionDependencies:l.default.array,radius:l.default.oneOf(["xs","sm","md","lg","xl"]).isRequired,referenceElement:l.default.oneOfType([l.default.element.isRequired,),shadow:l.default.oneOf(["xs","sm","md","lg","xl"]),withinPortal:l.default.bool.isRequired,zIndex:l.default.number};var c=d;t.default=c},43711:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(88436)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),i=n(a(45697)),u=n(a(94184)),s=n(a(97629));const d=["color","disabled","hovered","itemsRefs","label","radius","selected","size","value","withinSelected","onItemSelect","onItemHover","isIos"];function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const f=e=>{let t=e.color,a=e.disabled,n=e.hovered,i=e.itemsRefs,c=e.label,f=e.radius,p=e.selected,m=e.size,_=e.value,h=e.withinSelected,g=e.onItemSelect,b=e.onItemHover,v=e.isIos,y=(0,l.default)(e,d);const O=(0,o.useRef)();(0,o.useEffect)((()=>{i.current&&O.current&&(i.current[_]=O.current)}),[i,_]);const E=(0,u.default)({[s.default.root]:!0,[s.default.__selected]:!a&&p,[s.default.__hovered]:!a&&n,[s.default.__withinSelected]:h,[s.default.__disabled]:a,[s.default.__ios]:v,[s.default["__"+t]]:t,[s.default["__"+f+"Radius"]]:f,[s.default["__"+m+"Size"]]:m});return o.default.createElement("jdiv",(0,r.default)({ref:O,className:E,onMouseEnter:b,onMouseDown:g},y),c)};f.propTypes={color:i.default.oneOf(["green","blue","grey"]),disabled:i.default.bool,hovered:i.default.bool,itemsRefs:i.default.shape({current:i.default.any}).isRequired,label:i.default.string.isRequired,radius:i.default.oneOf(["xs","sm","md","lg","xl"]),selected:i.default.bool,size:i.default.oneOf(["xs","sm","md","lg","xl"]),value:i.default.oneOfType([i.default.string,i.default.number]).isRequired,withinSelected:i.default.bool,onItemSelect:i.default.func.isRequired,onItemHover:i.default.func.isRequired};var p=f;t.default=p},91325:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(33119)),o=n(a(92664)),i=n(a(84827)),u=n(a(85299)),s=n(a(55536)),d=n(a(98661)),c=n(a(54720)),f=n(a(84726)),p=n(a(19955)),m=a(90361),_=a(57930),h=n(a(22760));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}let b=function(e){(0,i.default)(a,e);var t=g(a);function a(e){var n;return(0,l.default)(this,a),(n=t.call(this,e))._textarea=null,n.handleChange=e.handleChange||function(){},n}return(0,o.default)(a,[{key:"onInput",value:function(e){e.stopPropagation(),e.target.value!==this.props.value&&this.handleChange.call(this,"message",e)}},{key:"getRenderData",value:function(){return{styles:{fieldWrap:[{fieldWrap:!0}],inputField:[{inputField:!0,["_"+this.props.color]:!(!this.props.color||"green"===this.props.color),__textarea:!0,_error:this.props.error,__mobile:p.default.mobileOrTablet(),__bluredEmpty:!this.props.value}]},style:h.default}}},{key:"renderData",value:function(e,t){return d.default.createElement("jdiv",t.fieldWrap,d.default.createElement("textarea",(0,r.default)({},t.inputField,{value:this.props.value||void 0,maxLength:"1000",onInput:this.onInput.bind(this),onKeyUp:e=>{e.stopPropagation()},onKeyDown:e=>{e.stopPropagation()},placeholder:(0,f.default)("lblYourMessage")+"*","data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false",ref:e=>{this._textarea=e}},(0,m.withLocator)(_.Locator.CONTACTS_FORM_INPUT))))}}]),a}(c.default);t.default=b},1497:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(67375)),o=n(a(88436)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),u=n(a(45697)),s=n(a(94184)),d=a(21733),c=a(55330),f=n(a(19955)),p=n(a(11880)),m=n(a(28402));const _=["color","error","disabled","label","placeholder","radius","required","rows","size","variant","rightSection","rightSectionWidth","rightSectionProps","classNames","value"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}const g=(0,i.forwardRef)(((e,t)=>{let a=e.color,n=e.error,u=e.disabled,h=e.label,g=e.placeholder,b=e.radius,v=e.required,y=e.rows,O=e.size,E=e.variant,C=e.rightSection,w=e.rightSectionWidth,j=e.rightSectionProps,S=e.classNames,M=e.value,T=(0,o.default)(e,_);const k=(0,i.useState)((),P=(0,l.default)(k,2),x=P[0],R=P[1],N=(0,i.useState)(""),I=(0,l.default)(N,2),D=I[0],A=I[1],B=(0,i.useRef)(null),L=(0,c.useMergeRefs)(B,t),F=e=>v?e+"*":e,z=(0,s.default)({[m.default.root]:!0,[m.default.__invalid]:n,[m.default.__isIos]:f.default.ios(),[m.default[E]]:E,[m.default["__"+a]]:a,[m.default["__"+O+"Size"]]:O,[m.default["__"+b+"Radius"]]:b,[S.textarea]:S.textarea,[m.default.__active]:x||""!==M}),H=(0,s.default)({[m.default.label]:!0,[m.default["__"+O+"Size"]]:O,[m.default["__"+a]]:a,[m.default.__invalid]:n}),W=(0,s.default)({[m.default.rightSection]:C,[S.rightSection]:S.rightSection}),q=(0,s.default)({[m.default.error]:!0,[m.default["__"+O+"Size"]]:!0});return(0,i.useEffect)((()=>{if(B.current){if(!D)return A(B.current.style.paddingRight);B.current.style.setProperty("padding-right",C?w+"px":D,"important")}}),[D,C,w]),i.default.createElement(p.default,null,i.default.createElement("textarea",(0,r.default)({ref:L,className:z,placeholder:!h&&g?F(g):" ",disabled:u,rows:y,"data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false",value:M,onFocus:()=>R(!0),onBlur:()=>R(!1)},T)),h&&i.default.createElement("jdiv",{className:H},F(h)),C&&i.default.createElement("jdiv",(0,r.default)({},j,{className:W,style:{width:w}}),C),(0,d.isString)(n)&&i.default.createElement("jdiv",{className:q},n))}));g.displayName="Textarea",g.defaultProps={color:"green",radius:"sm",rows:2,size:"sm",variant:"default",rightSectionWidth:38,classNames:{input:null,rightSection:null}},g.propTypes={color:u.default.string,error:u.default.oneOfType([u.default.string,u.default.bool]),placeholder:u.default.string,label:u.default.string,radius:u.default.oneOf(["xs","sm","md","lg","xl"]),required:u.default.bool,disabled:u.default.bool,rows:u.default.number,size:u.default.oneOf(["xs","sm","md","lg","xl"]),variant:u.default.oneOf(["default","filled","unstyled","inset"]),rightSectionWidth:u.default.number,rightSection:u.default.node,rightSectionProps:u.default.object,value:u.default.string,classNames:u.default.shape({textarea:u.default.string,rightSection:u.default.string})};var b=g;t.default=b},19367:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=b;var r=n(a(23101)),l=n(a(67375)),o=n(a(98661)),i=n(a(94184)),u=n(a(45697)),s=n(a(84726)),d=n(a(43973)),c=a(90361),f=a(57930),p=a(56436),m=n(a(78269)),_=a(39731),h=a(63664),g=a(83170);function b(e){let t=e.top,a=e.bottom;(0,h.useErrorCatcher)(b.displayName);const n=(0,_.splitString)((0,s.default)("businessCopyright"),"{0}"),u=(0,l.default)(n,2),v=u[0],y=u[1],O=(0,p.useEnhanced)(),E=O.hidden,C=O.fontColor,w=O.isMobile,j=O.isTablet,S=O.billRu,M=O.isOnline,T=O.reportTelemetry,k=O.route,P=(0,i.default)({[d.default.chatCopyright]:!0,[d.default.__mobile]:w,[d.default.__tablet]:j,[d.default.__hidden]:E,[d.default.__chat]:!0,[d.default.__call]:a,[d.default.__top]:t});return o.default.createElement("jdiv",(0,r.default)({className:P},(0,c.withLocator)(f.Locator.CHAT_COPYRIGHT)),o.default.createElement("jdiv",{className:d.default.text},o.default.createElement(m.default,{billRu:S,isOnline:M,fontColor:C,onClick:startText:v,isChat:!0}),y))}b.displayName="ChatCopyrightContainer",b.propTypes={top:u.default.bool,bottom:u.default.bool}},75132:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(45697)),o=n(a(94184)),i=n(a(14072));const u=e=>{let t=e.textSize,a=e.color,n=e.departments,l=e.isIos,u=e.isMobileOrTablet,s=e.isShowAd,d=e.onClick;return r.default.createElement("jdiv",{className:(0,o.default)({[i.default.main]:!0,[i.default.__logo]:s,[i.default.__mobile]:u,[i.default["__"+a]]:!0})},n.map((e=>{let a=e.id,n=e.name;return r.default.createElement("jdiv",{key:a,className:i.default.department,style:l?{"-webkit-text-size-adjust":t}:null,onClick:,n,r.default.createElement("jdiv",{className:i.default.circle}))})))};u.propTypes={textSize:l.default.string,color:l.default.string.isRequired,departments:l.default.array.isRequired,isIos:l.default.bool.isRequired,isMobileOrTablet:l.default.bool.isRequired,isShowAd:l.default.bool.isRequired,onClick:l.default.func.isRequired};var s=u;t.default=s},41963:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=a(36113),i=a(26932),u=a(47060),s=a(21476),d=a(87692),c=a(68403),f=n(a(19367)),p=n(a(75132)),m=n(a(19955)),_=n(a(74379));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}const g=n(a(4855)).default.name("Departments");var b=()=>{const e=(0,o.useSelector)(d.selectBubbleColor),t=(0,o.useSelector)(d.selectDepartments),a=m.default.ios(),n=m.default.mobileOrTablet(),h=(0,c.showAd)(),b=(0,l.useState)(a?_.default.getLineHeight():null),v=(0,r.default)(b,2),y=v[0],O=v[1];(0,l.useEffect)((()=>{_.default.listenChangeZoom(()}),[a]);return t.length?l.default.createElement(l.default.Fragment,null,h&&l.default.createElement(f.default,{type:"chat",bottom:!0}),l.default.createElement(p.default,{color:e,departments:t,textSize:y,isIos:a,isMobileOrTablet:n,isShowAd:h,onClick:e=>{i.clientDispatchers.setDepartmentId(+e),s.Router.next(u.RouterEvent.Navigate),g.log("set department id",e)}})):null};t.default=b},59963:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(3501)),o=a(18073);const i=[];var u=()=>r.default.createElement(r.default.Fragment,null,i.length?i:(Object.keys(o.emojiList).forEach((e=>{i.push(r.default.createElement(l.default,{icon:e}))})),Object.entries(o.emojiList)));t.default=u},27523:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.replaceEmoji=function(e){return(0,i.replace)(e,(e=>{const t=(0,i.toCodePoint)(e),a=document.createElement("jdiv");return(0,l.render)(r.default.createElement(o.default,{className:"emojiMessages",icon:t,alone:!1}),a),a.childNodes[0].outerHTML}))};var r=n(a(98661)),l=a(98661),o=n(a(3501)),i=a(66488)},54522:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=O;var r=n(a(61125)),l=n(a(23101)),o=n(a(67375)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),u=n(a(45697)),s=n(a(94184)),d=a(21733),c=n(a(19955)),f=n(a(98238)),p=n(a(84726)),m=n(a(88155)),_=a(43417),h=n(a(55001)),g=a(15496);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){let t=e.containerClassName,a=e.agreementText,n=e.bubbleColor,r=e.href,u=e.isOpened,b=e.isUseGdpr,v=e.link,O=e.listenedStyles,E=void 0===O?[]:O,C=e.message,w=e.title,j=e.onCancel,S=e.onLink,M=e.onCheck;const T=(0,i.useState)(!1),k=(0,o.default)(T,2),P=k[0],x=k[1],R=(0,s.default)({[h.default.wrapper]:!0,[h.default["__"+n]]:!0}),N=(0,s.default)({[h.default.content]:!0,[h.default.__mobile]:c.default.mobile(),[h.default.__tablet]:c.default.tablet()}),I=(0,s.default)({[h.default.title]:!0,[h.default.__mobile]:c.default.mobile(),[h.default.__tablet]:c.default.tablet()}),D=(0,s.default)({[h.default.checkbox]:!0,[h.default.__checked]:P,[h.default.__mobile]:c.default.mobile()}),A=(0,s.default)({[h.default.cancel]:!0,[h.default.__mobile]:c.default.mobile(),[h.default.__tablet]:c.default.tablet()}),B={"-webkit-text-size-adjust":E[0],lineHeight:E[1]};return i.default.createElement(f.default,{className:t,into:!P&&u,delay:P?300:0,onClosed:,i.default.createElement("jdiv",{className:R},i.default.createElement("jdiv",{className:N,style:B},i.default.createElement("jdiv",(0,l.default)({className:I,style:B},(0,g.withLocator)("EULA_TITLE")),i.default.createElement("jdiv",{className:h.default.checkboxContainer},i.default.createElement("jdiv",(0,l.default)({className:D,onClick:()=>x(!0)},(0,g.withLocator)("EULA_CHECKBOX")))),w),(0,d.isString)(C)&&i.default.createElement("jdiv",{className:h.default.message,style:B},C),i.default.createElement("jdiv",{className:h.default.agreement},i.default.createElement(m.default,{railClass:h.default.rail,renderView:e=>{let t=e.style;return i.default.createElement("jdiv",{style:y(y({},t),{},{top:0})})}},i.default.createElement("jdiv",{className:h.default.scrollBlock,style:B},a,(!b||b&&r)&&i.default.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer",onClick:S},v))))),i.default.createElement("jdiv",{className:A},i.default.createElement("jdiv",(0,l.default)({className:h.default.cancelBtn},(0,_.onClickHandler)(j),(0,g.withLocator)("EULA_CANCEL_BUTTON")),(0,p.default)("cancel")))))}O.propTypes={containerClassName:u.default.string,agreementText:u.default.string.isRequired,bubbleColor:u.default.string.isRequired,href:u.default.string.isRequired,isOpened:u.default.bool,isUseGdpr:u.default.bool,link:u.default.string.isRequired,listenedStyles:u.default.arrayOf(u.default.string).isRequired,message:u.default.string,title:u.default.string.isRequired,onCancel:u.default.func.isRequired,onLink:u.default.func.isRequired,onCheck:u.default.func.isRequired}},13411:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=a(36113),o=n(a(45697)),i=a(87692),u=a(35233),s=a(77389),d=n(a(19955)),c=a(54415),f=a(71379),p=a(83170),m=n(a(71323)),_=a(63664),h=a(90800),g=n(a(54522));const b=e=>{let t=e.isOpened,a=e.onAgree,n=e.onDisagree,o=e.containerClassName;(0,_.useErrorCatcher)(b.displayName);const v=(0,l.useSelector)(i.selectBaseUrl),y=(0,l.useSelector)(i.selectBubbleColor),O=(0,l.useSelector)(i.selectEula),E=(0,l.useSelector)(u.selectShowEula),C=(0,l.useSelector)(i.selectWidgetId),w=(0,h.getData)({eula:O,baseUrl:v,widgetId:C,showEula:E}),j=w.agreement,S=w.href,M=w.link,T=w.message,k=w.title,P=(0,f.getProp)(O,"useGdpr"),x=(0,h.getAgreementText)(j,P),R=(0,s.useListenedStyle)([{name:"textSize",repass:null},{name:"lineHeight",repass:1.5}],d.default.ios());return r.default.createElement(g.default,{containerClassName:o,agreementText:x,bubbleColor:y,href:S,isOpened:t,isUseGdpr:P,link:M,listenedStyles:R,message:T,title:k,onCancel:()=>{n(),c.Monitoring.telemetry(p.TelemetryName.EULA_CANCEL_BTN,{param1:m.default.context})},onLink:onCheck:()=>{a();const e=m.default.eulaLink;e&&(window.open(e),m.default.eulaLink=null)}})};b.displayName="EulaContainer",b.propTypes={containerClassName:o.default.string,isOpened:o.default.bool.isRequired,onAgree:o.default.func.isRequired,onDisagree:o.default.func.isRequired};var v=b;t.default=v},90800:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.getAgreementText=function(e,t){return t?`${e} `:` ,             ${e}    `},t.getData=function(e){var t,a;let n=e.eula,i=e.baseUrl,u=e.widgetId,s=e.showEula;const d=e=>(0,o.getProp)(n,e),c={agreement:null!==(t=d("customAgreement"))&&void 0!==t?t:" 152-     27.07.2006",href:null!==(a=d("externalLink"))&&void 0!==a?a:(0,l.getEulaLink)(i,u),link:" ",message:s,title:"    "};if(d("useGdpr")){var f,p;c.agreement=null!==(f=n.customAgreement)&&void 0!==f?f:(0,r.default)("eula_custom_agreement"),c.link=n.titleExternalLink,c.title=null!==(p=n.customTitle)&&void 0!==p?p:(0,r.default)("eula_custom_title")}return c};var r=n(a(84726)),l=a(67597),o=a(71379)},93885:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.EulaCheckboxContainer=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=a(36113),i=n(a(45697)),u=n(a(19955)),s=a(39733),d=a(87692),c=n(a(84726)),f=a(49534),p=a(25434);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(m=function(e){return e?a:t})(e)}const _=e=>{let t=e.isPopup,a=e.className,n=e.containerClassName,i=e.checkedClassName,m=e.textClassName,_=e.error,h=e.onChange,g=eonst v=(0,o.useSelector)(d.selectBubbleColor),y=(0,l.useState)(!1),O=(0,r.default)(y,2),E=O[0],C=O[1],w=(0,p.getEulaState)(),j=u.default.mobile();(0,s.useUpdateEffect)((()=>{null==h||h(E)}),[E]);const S=t?(0,c.default)("eulaPopupCheckText"):(0,p.getAgreementText)(w.agreementBasis),M=t?(0,p.getPopupEulaLink)(p.trackClick):(0,p.getEulaLink)(p.track.default.createElement(f.EulaCheckboxPure,{className:a,containerClassName:n,checkedClassName:i,textClassName:m,value:E,error:_,text:S,link:M,bubbleColor:v,isMobile:j,onClick:()=>C((e=>!e)),qaId:g,qaIdText:b})};t.EulaCheckboxContainer=_,_.propTypes={isPopup:i.default.bool,className:i.default.string,containerClassName:i.default.string,checkedClassName:i.default.string,textClassName:i.default.string,error:i.default.bool,onChange:i.default.func}},49534:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.EulaCheckboxPure=void 0;var r=n(a(23101)),l=n(a(98661)),o=n(a(94184)),i=a(90171),u=n(a(23624)),s=a(15496);t.EulaCheckboxPure=e=>{let t=e.className,a=e.containerClassName,n=e.checkedClassName,d=e.textClassName,c=e.value,f=e.error,p=e.text,m=e.link,_=e.bubbleColor,h=e.isMobile,g=e.onClick,b=e.qaId,v=e.qaIdText;return l.default.createElement("jdiv",{className:(0,o.default)(u.default.container,{[a]:a})},l.default.createElement(i.CheckboxNew,{className:(0,o.default)(u.default.checkbox,{[t]:t}),checkedClassName:n,bubbleColor:_,checked:c,error:f,isMobile:h,onClick:g,qaId:b}),l.default.createElement("jdiv",(0,r.default)({className:(0,o.default)(u.default.text,d)},(0,s.withLocator)(v)),p," ",m))}},25434:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.trackClick=t.getPopupEulaLink=t.getEulaUrl=t.getEulaState=t.getEulaLink=t.getAgreementText=void 0;var r=n(a(98661)),l=n(a(84726)),o=a(44145),i=a(54415),u=a(83170);const s=()=>{const e=(0,o.getSystemSettings)();return`${window.parent.location.protocol+e.baseUrl}/script/eula/${e.widgetId}`};t.getEulaUrl=s;const d=()=>{const e=(0,o.getFeatures)().eula,t={show:!1,checked:!1,text:!1,url:e&&e.externalLink?e.externalLink:s(),agreementBasis:e&&e.customAgreement?e.customAgreement:" 152-     27.07.2006",textSize:null,customTitle:"    ",customLink:" "};return e&&e.useGdpr&&(t.customTitle=e.customTitle||(0,l.default)("eula_custom_title"),t.customLink=e.titleExternalLink||!1,t.agreementBasis=e.customAgreement||(0,l.default)("eula_custom_agreement")),t};t.getEulaState=d;t.getAgreementText=e=>{const t=(0,o.getFeatures)().eula;return t&&!t.useGdpr?` ,            \n          ${e}    `:`${e} `};t.getEulaLink=e=>{const t=(0,o.getFeatures)().eula,a=d();return!t.useGdpr||t.useGdpr&&t.externalLink?r.default.createElement("a",{href:t.externalLink||s(),onClick:e,target:"_blank",rel:"noopener noreferrer"},a.customLink):null};t.getPopupEulaLink=e=>{const t=(0,o.getFeatures)().eula;return r.default.createElement("a",{href:t.externalLink||s(),onClick:e,target:"_blank",rel:"noopener noreferrer"},(0,l.default)("eulaPopupLinkText"))};t.trackClick=()=>{i.Monitoring.telemetry(u.TelemetryName.EULA_LINK_CLICKED)}},36207:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(33119)),o=n(a(92664)),i=n(a(84827)),u=n(a(85299)),s=n(a(55536)),d=n(a(98661)),c=a(36113),f=n(a(54720)),p=n(a(84726)),m=n(a(19955)),_=n(a(74379)),h=n(a(73727)),g=n(a(88155)),b=a(43025),v=n(a(25778)),y=a(21476),O=a(47060),E=a(54415),C=a(83170),w=n(a(75686)),j=a(2982),S=a(47245),M=n(a(71323)),T=a(70010),k=n(a(91275));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}let x=function(e){(0,i.default)(a,e);var t=P(a);function a(e){var n;return(0,l.default)(this,a),(n=t.call(this,e)).state=(0,T.getEulaState)(),n._titleRef=null,n._callRef=null,n}return(0,o.default)(a,[{key:"componentDidUpdate",value:function(e,t){if(this.state.text!==t.text){const e=this.getTopOffset();this._textRef&&this._textRef.style&&e&&(this._textRef.style.top=e+"px")}this.state.show||this.props.eulaAccepted||!this.props.showEula||(this.setState({show:!0,text:this.props.showEula}),m.default.mobileOrTablet()&&(0,b.blurActiveElement)())}},{key:"componentDidMount",value:function(){_.default.listenChangeZoom((()=>{const e=_.default.getTextSize();this.state.textSize!==e&&this.setState({textSize:e})}))}},{key:"submitCheckbox",value:function(){this.setState({checked:!0,show:!1,text:this.props.showEula}),M.default.eulaLink&&(window.open(M.default.eulaLink),M.default.eulaLink=null),M.default.acceptEula(),setTimeout((()=>{k.default.syncRouter(),y.Router.next(O.RouterEvent.Submit)}),500)}},{key:"cancel",value:futTimeout((()=>{const e=w.defauetTimeout((()=>{this.setState({show:!1}),M.default.showEula(!1),e&&E.Monitoring.telemetry(C.TelemetryName.EULA_CANCEL_BTN,{param1:M.default.context})}),200)}},{key:"trackClick",value:function(){E.Monitoring.telemetry(C.TelemetryName.EULA_LINK_CLICKED,{param1:M.default.context})}},{key:"renderAgreement",value:function(){return(0,T.getAgreementText)(this.state.agreementBasis)}},{key:"renderLink",value:function(){return(0,T.getEulaLink)(this.trackClick.bind(this))}},{key:"renderCancel",value:function(){return d.default.createElement("jdiv",{className:v.default.cancel,onPointerDown:this.cancel.bind(this),onTouchStart:e=>{e.preventDefault(),m.default.isPointerEnabled()||this.cancel(e)}},(0,p.default)("cancel"))}},{key:"getTopOffset",value:function(){return(this.state.text&&this._callRef&&this._callRef.offsetHeight)+(this._titleRef&&this._titleRef.offsetHeight)}},{key:"getRenderData",value:function(){const e=m.default.ios()?{"-webkit-text-size-adjust":this.state.textSize}:{},t="string"==typeof this.state.text;return{styles:{wrap:[{eulaPopup:!0,_mobile:m.default.mobile(),_tablet:m.default.tablet(),["_"+h.default.bubble_color]:!(!h.default.bubble_color||"green"===h.default.bubble_color),__call:this.props.callContainer,__offlineForm:m.default.mobile()&&this.props.offlineForm}],popupContent:[{popupContent:!0},e],textBlock:[{textBlock:!0,__call:t}],text:[{text:!0},Object.assign(e,m.default.ios()?{lineHeight:_.default.getLineHeight(1.5)}:{})],title:[{title:.assign(e,m.default.ios()?{lineHeight:_.default.getLineHeight(1.375)}:{})],checkbox:[{checkbox:!0,_checked:this.state.checked}],error:[{error:!0},{display:this.state.error?"block":"none"}]},style:v.default,data:{isCallText:t}}}},{key:"renderText",value:function(){return d.default.createElement("jdiv",{className:v.default.scrollText},this.renderAgreement(),this.renderLink())}},{key:"renderData",value:function(e,t){return h.default.eula?d.default.createElement("jdiv",t.wrap,d.default.createElement("jdiv",t.popupContent,d.default.createElement("jdiv",t.text,d.default.createElement("jdiv",(0,r.default)({},t.title,{dangerouslySetInnerHTML:{__html:this.state.text},ref:e=>{this._callRef=e}})),d.default.createElement("jdiv",(0,r.default)({},t.formText,{ref:e=>{this._titleRef=e}}),d.default.createElement("jdiv",{className:v.default.popupCheckbox},d.default.createElement("jdiv",(0,r.default)({},t.lt.createElement("jdiv",(0,r.default)({},t.textBlock,{ref:e=>{this._textRef=e}}),m.default.mobileOrTablet()?this.renderText():d.default.createElement(g.default,{position:"relative",railClass:v.default.rail},this.renderText())))),this.renderCancel()):null}}]),a}(f.default);var R=(0,c.connect)((e=>({showEula:e.app.showEula,eulaAccepted:e.client.eulaAccepted,route:e.app.route})))(x);t.default=R},23535:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var r=n(a(98661)),l=a(36113),o=n(a(45697)),i=a(44145),u=n(a(4855)),s=a(63664),d=a(16016),c=a(35233),f=a(66934),p=n(a(4578));const m=u.default.name("FileUpload");function _(e){let t=e.disabled;(0,s.useErrorCatcher)(_.displayName);const a=(0,l.useSelector)(c.selectQuoteMsgId);return r.default.createElement(p.default,{disabled:t,onClick:(e=>{!(0,i.getApp)().isOnline&&t||(0,f.openIntroduce)(e)}).bind(this),onChange:e=>{(e=>{if(!e.target.files)return;const t=e.target.files[0];m.log("fileinfo:",t),t&&(t&&t.name&&(0,f.startUploadMedia)(t,{privateId:(0,d.generateGUID)(),repliedMsgId:null!=a?a:null}),e.target.value="")})(e)}})}_.displayName="FileUpload",_.propTypes={disabled:o.default.bool}},4578:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=n(a(40704)),i=n(a(39771)),u=n(a(45697)),s=n(a(94184)),d=n(a(26411)),c=a(90361),f=a(57930);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}const m=d.default.map((e=>"."+e.extension)).join(","),_=e=>{let t=e.disabled,a=e.onClick,n=e.onChange;const u=(0,l.useRef)(null),d=(0,s.default)({[i.default.wrap]:!0,[i.default.__disabled]:t});return l.default.createElement("jdiv",{className:d},l.default.createElement(o.default,{iconName:"icon-attach",color:t?"#c9cdd3":"#a3aab5",className:i.default.iconAttach2}),l.default.createElement("jdiv",{className:i.default.uploadFwrap},l.default.createElement("input",(0,r.default)({className:i.default.uploadButton,type:"file",ref:u,onClick:a,onChange:n,disabled:t,accept:m},(0,c.withLocator)(f.Locator.INPUT_UPLOAD_ICON)))))};_.propTypes={disabled:u.default.bool.isRequired,onClick:u.default.func.isRequired,onChange:u.default.func.isRequired};var h=l.default.memo(_);t.default=h},50890:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(33119)),o=n(a(92664)),i=n(a(7819)),u=n(a(84827)),s=n(a(85299)),d=n(a(55536)),c=n(a(98661)),f=a(36113),p=n(a(73727)),m=a(60277),_=a(9393),h=n(a(19955)),g=n(a(54720)),b=n(a(50754)),v=n(a(98960)),y=n(a(4855)),O=a(54415),E=a(83170),C=a(90361),w=a(57930),j=a(26932),S=a(21733),M=a(68403),T=a(94537),k=a(91225),P=n(a(11531));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}const R=y.default.name("FormContainer");let N=function(e){(0,u.default)(a,e);var t=x(a);function a(e){var n;return(0,l.default)(this,a),(n=t.call(this,e)).successCallback=n.successCallback.bind((0,i.default)(n)),n._form=n.getInitForm(),R.log("init config",n._form),n._submited=!1,n}return(0,o.default)(a,[{key:"componentDidUpdate",value:function(e){const t={name:e.client.name,email:e.client.email,phone:e.client.phone},a={name:this.props.client.name,email:this.props.client.email,phone:this.props.client.phone};(0,f.shallowEqual)(t,a)||(this._form=this.getInitForm(),this.setState((e=>({x:e.x?e.x+=1:1}))))}},{key:"componentDidMount",value:function(){if(!h.default.mobileOrTablet()&&!h.default.ie()){const e=this.base.querySelector("input, textarea");(0,k.isIntroduceRoute)(this.props.route)&&this.base&&this.base.querySelector&&setTimeout((()=>{var t;return null==e||null===(t=e.focus)||void 0===t?void 0:t.call(e)}),0)}}},{key:"getInitForm",value:function(){return{message:{name:"message",value:this.props.client.lastMessage&&p.default.contacts_ask===T.ContactsType.BEFORE_CHAT?this.props.client.lastMessage:"",error:!1,required:"chat"!=this.props.type,show:"chat"!=this.props.type},client_name:{name:"client_name",value:this.props.client.name?this.props.client.name:"",error:!1,required:p.default.contacts_settings.name&&p.default.contacts_settings.name.required,show:p.default.contacts_settings.name&&p.default.contacts_settings.name.show},email:{name:"email",value:this.props.client.email?this.props.client.email:"",error:!1,required:p.default.contacts_settings.email&&p.default.contacts_settings.email.required,show:p.default.contacts_settings.email&&p.default.contacts_settings.email.show},phone:{name:"phone",value:this.props.client.phone?this.props.client.phone:"",error:!1,required:p.default.contacts_settings.phone&&p.default.contacts_settings.phone.required,show:p.default.contacts_settings.phone&&p.default.contacts_settings.phone.show}}}},{key:"successCallback",value:function(e,t){const a=this.getData();R.log("SUBMIT CALLBACK",a),(0,_.each)(this.getData(),(function(e){const t=(0,S.isString)(e.value)?e.value.trim():e.value;a[e.name].value=t||null}));const n=this.isValid(a);if(this._submited=!0,this._form=n.data,n.error){if(R.log("FORM NOT VALID"),this.props.errorCallback(n.data),this.setState({form:n.data}),this.isIntroduceForm()||!this.props.isOnline){R.log("checkData",n);const e=[],t={name:0,phone:1,email:2};this.props.isOnline||(t.message=3),(0,_.each)(n.data,(a=>{if(a.error){const n=a.required?"*":"",r="client_name"==a.name?"name":a.name;e[t[r]]=`${r}${n}:${a.value}`}}));const a=this.props.isOnline?E.TelemetryName.CHAT_INTRODUCE:E.TelemetryName.OFFLINE_SENT_FAIL;O.Monitoring.telemetry(a,{param1:"formSubmitFail",param2:(0,M.getContactSettingsInfo)(),param3:e.filter((e=>e)).join(";")})}}else R.log("FORM VALID"),this.isIntroduceForm()&&O.Monitoring.telemetry(E.TelemetryName.CHAT_INTRODUCE,{param1:"formSubmit",param2:(0,M.getContactSettingsInfo)(),param3:t}),j.clientDispatchers.updateClient({lastMessage:n.data.message.value||null}),this.props.successCallback(n.data)}},{key:"isIntroduceForm",value:function(){return!this.props.client.isIntroduced&&-1!==[0,-1].indexOf(p.default.contacts_ask)&&this.props.isOnline}},{key:"isAnyNotEmpty",value:function(e){let t=!1;return(0,_.each)(e,(e=>{!("chat"==this.props.type&&"message"==e.name)&&e.value&&(t=!0)})),t}},{key:"isValid",value:function(){let e=!1;const t=this.getData();return p.default.contacts_ask===T.ContactsType.BEFORE_CHAT||this.isAnyNotEmpty(t)||(0,M.isAnyRequired)(p.default.contacts_settings)?((0,_.each)(t,(a=>{a.show&&a.required&&!a.valuired||a.value||(t[a.name].error=!1),a.show&&t[a.name].error&&(e=!0),R.log("item validation:",a)})),{data:t,error:e}):((0,_.each)(t,(e=>{"chat"==this.props.type&&"message"==e.name||(t[e.name].error=!0)})),{data:t,error:!0})}},{key:"errorCallback",value:function(){R.log("ERROR CALLBACK")}},{key:"resetForm",value:function(){}},{key:"getData",value:function(){return this._form}},{key:"setError",value:function(e,t){if(e)return this._form[e].error=t}},{key:"getError",value:function(e){if(e)return this._form[e].error}},{key:"getValue",value:function(e){if(e)return this._form[e].value}},{key:"handleData",value:function(e,t){const a=t.target;if(R.log("handleData",e,a.value,typeof a.value),a){let t=a.value;if("email"==e)try{t=b.default.toUnicode(t)}catch(e){}let n=!v.default[e](t)||!t;a.required||a.value||(n=!1),this._form[e]=(0,m.extend)(this._form[e],{value:t,error:n}),this.setState({form:this._form})}}},{key:"checkValue",value:function(e){const t=this.getValue(e);return!(!t||!v.default[e](t))}},{key:"getRenderData",value:function(){return{styles:{main:[{main:!0}]},style:P.default}}},{key:"renderData",value:function(e,t){const a=c.default.Children.map(this.props.children,(e=>{let t={};if(!e)return null;if(e.props&&e.props.name){const a=e.props.name;t={handleChange:this.handleData.bind(this),error:this.getError(a),value:this.getValue(a),color:p.default.bubble_color||"green",submited:this._submited}}return e.props&&e.props.type&&(t={successCallback:this.successCallback.bind(this),errorCallback:this.errorCallback.bind(this)}),c.default.cloneElement(e,t)})),n=(0,k.isIntroduceRoute)(this.props.route)?"form":"jdiv";return c.default.createElement("jdiv",t.main,c.default.createElement(n,(0,r.default)({ref:e=>{this._formRef=e},autocomplete:"on",onSubmit:e=>{e.preventDefault()}},(0,C.withLocator)(w.Locator.CONTACTS_FORM)),a))}}]),a}(g.default);t.default=N},62887:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var r=n(a(98661)),l=n(a(45697)),o=n(a(27745)),i=a(63121),u=a(68408),s=n(a(53517)),d=a(85962),c=a(63664);function f(e){let t=e.showHeaderText;(0,c.useErrorCatcher)(f.displayName);const a=(0,d.useEnchanced)(),n=a.isOnline,l=a.color,p=a.joinedBots,m=a.mainText,_=a.subText,h=a.avatars,g=a.background,b=a.showBackButton,v=a.showCallButton,y=a.showLeaf,O=a.showMenu,E=a.isChatPage,C=a.isPowerPhone,w=a.isClickable,j=a.isIOS,S=a.isTablet,M=a.isLightColor2,T=a.isIntroduce,k=a.inCall,P=a.darkText,x=a.leafBackground,R=a.patternUrl,N=a.powerPhone;return r.default.createElement(o.default,{avatars:h,backButton:b,headerColor:l,background:g,callButton:v,clickable:w,darkText:P,inCall:k,isIos:j,isTablet:S,isChatPage:E,isLightColor2:M,leaf:y,leafBackground:x,mainText:m,online:n,pattern:R,subText:_,onCallClick:u.onCallClick,onCloseClick:u.onCloseClick,onHeaderClick:u.onHeaderClick,showHeaderText:t,showMenu:O,MenuComponent:s.default,onMenuButtonClick:u.onMenuButtonClick,isIntroduce:T,isPowerPhone:C,powerPhone:N,onInitSwipe:i.initSwipe,onDebugClick:u.onDebugClick,joinedBots:p})}f.displayName="HeaderContainer",f.propTypes={showHeaderText:l.default.bool}},27745:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(67375)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),i=n(a(94184)),u=n(a(45697)),s=a(57930),d=a(90361),c=n(a(87736)),f=n(a(57147)),p=n(a(32042)),m=n(a(40704)),_=a(47713),h=a(57985),g=a(9335),b=n(a(9218));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}const y=e=>{let t=e.avatars,a=void 0===t?[]:t,n=e.backButton,u=void 0!==n&&n,v=e.background,y=void 0===v?"#44BB6E":v,O=e.callButton,E=void 0!==O&&O,C=e.clickable,w=void 0!==C&&C,j=e.darkText,S=void 0===j||j,M=e.inCall,T=void 0!==M&&M,k=e.isIos,P=void 0!==k&&k,x=e.isTablet,R=void 0!==x&&x,N=e.isChatPage,I=void 0!==N&&N,D=e.leaf,A=void 0===D||D,B=e.isLightColor2,L=e.leafBackground,F=void 0===L?"#44BB6E":L,z=e.mainText,H=void 0===z?"":z,W=e.onCallClick,q=e.onCloseClick,U=e.onHeaderClick,V=e.online,G=void 0===V||V,Z=e.pattern,$=void 0!==Z&&Z,K=e.subText,J=void 0===K?"":K,X=e.showHeaderText,Y=e.showMenu,Q=e.MenuComponent,ee=e.onMenuButtonClick,te=e.isIntroduce,ae=e.headerColor,ne=e.isPowerPhone,re=e.powerPhone,le=e.onInitSwipe,oe=e.onDebugClick,ie=e.joinedBots;const ue=(0,g.useToggle)(!1),se=(0,l.default)(ue,2),de=se[0],ce=se[1],fe=(0,o.useRef)(null),pe=(0,o.useRef)(null),me=(0,o.useRef)(null);le&&le(pe,q),(0,h.useClickOutside)(me,(()=>{de&&ce(!1)}));const _e=()=>A?o.default.createElement("jdiv",{className:b.default.callIcon}):o.default.createElement(m.default,{color:S?"#272433":"#fff",iconName:"icon-tube",className:b.default.callIcon}),he=(0,i.default)({[b.default.headerBox]:!0,[b.default.hideCorners]:!1,[b.default.__mobile]:!A}),ge=(0,i.default)({[b.default.header]:!0,[b.default._expanded]:w,[b.default._light]:!S,[b.default._dark]:S,[b.default._mobile]:!A,[b.default.__ios]:P,[b.default._tablet]:R,[b.default._offline]:!G,[b.default.showContent]:X}),be=(0,i.default)({[b.default.headerContainer]:!0,[b.default.__chatpage]:I});return o.default.createElement("jdiv",(0,r.default)({ref:fe,className:he,style:{background:y}},(0,d.withLocator)(s.Locator.HEADER)),o.default.createElement("jdiv",{className:(0,i.default)({[b.default.pattern]:$}),style:{backgroundImage:$||null}},A?o.default.createElement(f.default,(0,r.default)({orientation:"bottom",backgroundColor:F,online:G},(0,_.onClickHandler)(oe),(0,d.withLocator)(s.Locator.HEADER_LEAF))):null,o.default.createjdiv",(0,r.default)({className:ge},(0,_.onClickHandler)(U,!1,!1)),o.default.createElement("jdiv",{className:be},(()=>{if(te)return null;if(!G||0===a.length||a.length>3)return null;if(1===a.length){const e=a[0].url||null,t=!(!ie||!ie.length);return o.default.createElement(c.default,{dark:S,expanded:w,isMobile:!A,inCall:T,url:e,headerColor:ae,isBot:t})}{const e=a.map((e=>e.url));return o.default.createElement(p.default,{bgColor:y,urls:e,dark:S,expanded:w,inCall:T,isMobile:!A,isTablet:R})}})(),o.default.createElement("jdiv",(0,r.default)({className:b.default.info},(0,d.withLocator)(s.Locator.HEADER_TEXT)),A?null:o.default.createElement("jdiv",(0,r.default)({ref:pe,className:(0,i.default)({[b.default.toDebugPanel]:!0,[b.default._leftButton]:u,[b.default._rightButton]:Y||E})},I&&(0,_.onClickHandler)(oe))),(()=>{const e=(0,i.default)({[b.default.agentName]:!0,[b.default.__agents]:!J,[b.default.__call]:E});return o.default.createElement("jdiv",(0,r.default)({className:e},(0,d.withLocator)(s.Locator.HEADER_AGENT_NAME)),H)})(),(()=>{if(!J)return null;const e=(0,i.default)({[b.default.title]:!0,[b.default.__call]:E});return o.default.createElement("jdiv",(0,r.default)({className:e},(0,d.withLocator)(s.Locator.HEADER_AGENT_POSITION)),J)})())),!E||Y?null:ne?o.default.createElement("a",(0,r.default)({href:re,className:b.default.callMe},(0,_.onClickHandler)(W),(0,d.withLocator)(s.Locator.HEADER_CALLBACK_BUTTON)),_e()):o.default.createElement("jdiv",(0,r.default)({className:b.default.callMe},(0,_.onClickHandler)(W,!0,!0),(0,d.withLocator)(s.LCK_BUTTON)),_e()),A||!u?null:o.default.createElement("jdiv",(0,r.default)({className:b.default.closeBox},(0,_.onClickHandler)(q,!0,!0)),o.default.createElement(m.default,{color:S?"#272433":"#fff",iconName:"icon-close",className:b.default.mobileBack})),Y?o.default.createElement("jdiv",(0,r.default)({className:b.default.menuButtonWrap},(0,_.onClickHandler)((()=>{ce(),ee&&ee()}),!0,!0),(0,d.withLocator)(s.Locator.HEADER_CALLBACK_BUTTON)),A?o.default.createElement("jdiv",{className:b.default.menuIcon}):o.default.createElement(m.default,{color:S||B?"#272433":"#fff",iconName:"iconHamburger",className:b.default.menuIcon})):null,Y?o.default.createElement("jdiv",{ref:me},o.default.createElement(Q,{show:de,referenceElement:fe,onCancelClick:ce})):null)))};y.propTypes={avatars:u.default.arrayOf(u.default.any),backButton:u.default.bool,background:u.default.string,callButton:u.default.bool,clickable:u.default.bool,darkText:u.default.bool,inCall:u.default.bool,isIos:u.default.bool,isTablet:u.default.bool,isChatPage:u.default.bool,leaf:u.default.bool,leafBackground:u.default.string,mainText:u.default.string,onCallClick:u.default.func,onCloseClick:u.default.func,onHeaderClick:u.default.func,online:u.default.bool,pattern:u.default.string,subText:u.default.string,showHeaderText:u.default.bool,showMenu:u.default.bool,MenuComponent:u.default.oneOfType([u.default.arrayOf(u.default.node),u.default.node,u.default.func]),onMenuButtonClick:u.default.func,onInitSwipe:u.default.func,onDebugClick:u.default.func,isIntroduce:u.default.bool,isLightColor2:u.default.bool,headerColor:u.default.string,isPowerPhone:u.default.bool,powerPhone:u.default.string,joinedBots:u.default.array};var O=o.default.memo(y);t.default=O},68408:function(e,t,a){"usonCloseClick=t.onCallClick=t.isPo60),o=a(26932)()=>`tel:${(0,ier.getCurrentRouCloseClick=e=>{(0,_.closeWidget)(),r.Router.next(l.RouterEvent.CloseWindow),u.Monitoring.telemetry(s.TelemetryName.MOBILE_CHAT_CLOSE,{param1:e?"bySwipeDown":"byTap"})};t.onHeaderClick=()=>{(0,i.getApp)().route===l.Route.CHAT_MIN&&(o.appDispatchers.setAppIsFocused(!0),r.Router.next(l.RouterEvent.Navigate),o.transitionDispatchers.startTransition(p.ScriptName.MAXIMIZE_WIDGET))};t.onDebugClick=()=>{r.Router.next(l.RouterEvent.ToDebug)};t.onMenuButtonClick=()=>{}},63121:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.moveMobileContainer=t.initSwipe=t.getTexts=t.getShowMenuOverlay=t.getShowMenu=t.getPatternUrl=t.getInCall=t.getHideMenuTitle=t.getDarkText=t.getClickable=t.getCallButton=t.getAvatars=t.checkIsIntroduce=void 0;var r=a(69882),l=a(67597),o=a(54034),i=n(a(19955)),u=a(21476),s=a(47060),d=n(a(84726)),c=n(a(50754)),f=a(97615),p=n(a(75686)),m=a(47245),_=a(73055),h=n(a(79868)),g=n(a(4855)),b=a(68403);const v=g.default.name("HeaderHelpers");t.getPatternUrl=e=>e?`url(${(0,l.staticUrl)((f.EnvironmentManager.isDevelopment()?"/public":"")+"/images/pattern/"+e+".svg",!0)})`:null;t.getAvatars=(e,t,a,n,r)=>{const o=(0,b.getJoinedAgents)(t,a),i=(0,b.getJoinedAgents)(n,r,!0);if(o.length||i.length){if(o.length){return o.map((t=>({url:t.avatarUrl?(0,l.getAvatarApirUrl):null})))}return i.map((t=>({url:t.avatarUrl?(0,l.getAvatarApiUrl)(e,t.avatarUrl):null})))}return[]};t.getCallButton=e=>{const t=-1!==[s.Route.DEPARTMENTS,s.Route.CHAT_EULA,s.Route.INTRODUCE].indexOf(u.Router.getCurrentRoute()),a=i.default.mobileOrTablet()&&e;return(o.CallbackUtils.isCallbackEnabled()||a)&&!o.CallbackUtils.isCallActive()&&!t};t.getDarkText=e=>"dark"===e;t.getInCall=()=>o.CallbackUtils.isCallActive();t.getTexts=(e,t,a,n,l,i,c,f,p)=>{if(!e)return{mainText:l||n,subText:""};const m=u.Router.getCurrentRoute();if(m===s.Route.DEPARTMENTS)return{mainText:(0,d.default)("lblSelectDep"),subText:""};if(m===s.Route.INTRODUCE&&!o.CallbackUtils.isCallActive()||m===s.Route.CHAT_EULA&&u.Router.getPrevRoute()===s.Route.INTRODUCE)return{mainText:(0,d.default)("lblIntroduceRequestBefore"),subText:""};if((0,r.isWixEditor)()&&(t||a))return{mainText:t||(0,d.default)("lblConnectedToAgent"),subText:a||(0,d.default)("lblOperatorsOnline")};const _=(0,b.getJoinedAgents)(i,c,!1),h=(0,b.getJoinedAgents)(f,p,!0);if(1===_.length)return{mainText:_[0].name,subText:_[0].title};if(_.length>3)return{mainText:y(),subText:""};if(_.length>1){const e=[];return _.forEach((t=>{e.push(t.name.replace(/ /g,""))})),{mainT:""}}return h.length?{mainText:h[0].name,subText:h[0].title}:{mainText:(0,d.default)("lblConnectedToAgent"),subText:(0,d.default)("lblOperatorsOnline")}};const y=()=>{const e=(0,r.getPageWindow)().location.hostname.replace("www.","");if(""===e)return(0,d.default)("lblOperatorsOnline");try{return c.default.toUnicode(e)}catch(t){return e}};t.getClickable=e=>e===s.Route.CHAT_MIN;t.getShowMenu=(e,t,a)=>{const n=!!(h.default.getJoints().count||t||a),l=[s.Route.INTRODUCE,s.Route.CHAT_CALL].includes(e);return!(!(0,r.isChatPage)()||l||!n)};t.getShowMenuOverlay=()=>(0,r.isChatPage)()&&i.default.mobile();t.getHideMenuTitle=()=>(0,r.isChatPage)()&&(i.default.tablet()||i.default.desktop());t.checkIsIntroduce=(e,t,a)=>e==s.Route.INTRODUCE||e==s.Route.CHAT_EULA&&1==t&&!a;const O=e=>{const t=p.default.get(m.Component.MOBILE_CONTAINER);t&&t.style&&t.style.setProperty("transform",e?`translateY(${Math.abs(e)}px)`:null,"important")};t.moveMobileContainer=O;t.initSwipe=(e,t)=>{e&&((0,r.isChatPage)()||!i.default.tablet()&&!i.default.mobile()||(0,_.useSwipeDetector)({element:e,horizontalSwipeThreshold:120,onDownSwipe:()=>{t&&t(!0)},onLeftSwipe:()=>{},onDownCount:e=>{v.warn("onDownCount"),u.Router.debugClicks=0,O(e)},onTouchEnd:()=>{v.warn("onTouchEnd"),O(0),u.Router.next(s.RouterEvent.ToDebug)}}))}},85962:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useEnchanced=function(){const e=(0,r.useSelector)(c.selectChats,r.shallowEqual),t=e[e.length-1],a=(0,r.useSelector)(v.selectProactive);a.name&&(a.agentId&&(t.joinedAgents=[a.agentId]),a.botId&&(t.joinedBots=[a.botId]));const n=t&&t.joinedAgents?t.joinedAgents:[],y=t.joinedBots?t.joinedBots:[],O=(0,r.useSelector)(u.selectIsOnline),E=(0,r.useSelector)(p.selectPattern),C=(0,r.useSelector)(p.selectWidgetColor),w=(0,r.useSelector)(p.selectWidgetColor2),j=(0,r.useSelector)(p.selectPowerButtonColor),S=(0,r.useSelector)(p.selectPowerGradient),M=(0,r.useSelector)(p.selectPowerButtonPhone),T=(0,r.useSelector)(p.selectAvatarUrl),k=(0,r.useSelector)(p.selectWidgetFontColor),P=(0,r.useSelector)(p.selectWixAgentDisplayName),x=(0,r.useSelector)(p.selectWixAgentTitle),R=(0,r.useSelector)(p.selectOfflineWidgetLabel),N=(0,r.useSelector)(p.selectOfflineFormTitle),I=(0,r.useSelector)(u.selectRoute),D=(0,r.useSelector)(i.selectAgents),A=(0,r.useSelector)(s.selectBots),B=(0,r.useSelector)(d.selectIsCallbackAvailable),L=(0,r.useSelector)(p.selectContactsAsk),F=(0,r.useSelector)(f.selectIsIntroduced),z=(0,_.getClickable)(I),H=l.default.ios(),W=l.default.tablet()||l.default.desktop()&&(0,h.isChatPage)(),q=w&&"black"===o.default.getContrast(w),U=(0,_.checkIsIntroduce)(I,L,F),V=I===m.Route.CHAT_MIN,G=(0,_.getInCall)(),Z=!l.default.desktop()&&!(0,h.isChatPage)(),$=(0,_.getCallButton)(M),K=l.default.desktop()&&!(0,h.isChatPage)(),J=(0,_.getShowMenu)(I,B,M),X=(0,_.getDarkText)(k),Y=w||C,Q=(0,_.getPatternUrl)(E),ee=(0,g.getPowerPhone)(),te=(0,_.getTexts)(O,P,x,R,N,n,D,y,A),ae=te.mainText,ne=te.subText,re=(0,_.getAvatars)(T,n,D,y,A),le=(0,b.getBackground)(C,w,S,j,l.default.mobileOrTablet());return{isOnline:O,color:C,joinedBots:y,mainText:ae,subText:ne,avatars:re,background:le,showBackButton:Z,showCallButton:$,showLeaf:K,showMenu:J,isChatPage:(0,h.isChatPage)(),isPowerPhone:(0,g.isPowerPhone)(),isClickable:z,isIOS:H,isTablet:W,isLightColor2:q,isIntroduce:U,isChatMin:V,inCall:G,darkText:X,leafBackground:Y,patternUrl:Q,powerPhone:ee}};var r=a(36113),l=n(a(19955)),o=n(a(27104)),i=a(99258),u=a(35233),s=a(14376),d=a(65210),c=a(55623),f=a(45959),p=a(87692),m=a(47060),_=a(63121),h=a(69882),g=a(68408),b=a(80598),v=a(7193)},17196:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=a(36113),i=n(a(94184)),u=n(a(71192)),s=a(26932),d=a(35233),c=a(46831),f=a(54415),p=a(83170),m=n(a(54162));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_=function(e){return e?a:t})(e)}var h=()=>{const e=(0,l.useState)(!0),t=(0,r.default)(e,2),a=t[0],n=t[1],_=(0,o.useSelector)(d.selectQuoteMsgId);return l.default.createElement("jdiv",{className:(0,i.default)(m.default.quoteContainer,{[m.dedefault.createElement("jdiv",{className:m.default.quote},l.default.createElement(c.ReplyIcon,{className:m.default.quoteIcon}),l.default.createElement(u.default,{msgId:_,active:!0}),l.default.createElement("jdiv",{className:m.default.quoteClose,onClick:()=>{n(!1),f.Monitoring.telemetry(p.TelemetryName.REPLY_BUTTON_DELETED),setTimeout((()=>{s.appDispatchers.setQuoteMsgId(null)}),100)}},l.default.createElement(c.CloseIcon,{className:m.default.quoteCloseIcon,withoutBubbleColor:!0}))))};t.default=h},52733:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(98661)),o=n(a(45697)),i=n(a(40704)),u=a(90361),s=a(57930),d=n(a(94184)),c=a(47713),f=a(36874);const p=e=>{let t=e.isMobile,a=e.disabled,n=e.onClick,o=e.hasError,p=e.theme,m=e.styles;e.isPointer;p.color=o||a?"#f1f0f0":p.color;const _=(0,d.default)({[m.sendButton]:!0,[m.__disabled]:o||a});return l.default.createElement("jdiv",(0,c.onClickHandler)(n),l.default.createElement(i.default,(0,r.default)({iconName:t?"mobile-send-button":"send-button",color:p.color,color2:o?"#dedede":f.colorsFromFigma.WHITE_100,hoverColor:o?null:p.hoverColor,className:_},(0,u.withLocator)(s.Locator.INPUT_SUBMIT))))};p.propTypes={isMobile:o.default.bool,disabled:o.default.bool,onClick:o.default.func,hasError:o.default.bool,theme:o.default.shape({color:o.default.string,hoverColor:o.default.string}),styles:o.default.shape({sendButton:o.default.string}),isPointer:o.default.bool};var m=l.default.memo(p);t.default=m},32891:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.InputContainer=void 0;var r=n(a(61125)),l=n(a(67375)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=z(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),i=a(36113),u=n(a(45697)),s=a(21476),d=a(47060),c=n(a(3807)),f=n(a(19955)),p=n(a(75686)),m=a(47245),_=n(a(94184)),h=a(62096),g=a(43025),b=a(52028),v=n(a(9836)),y=n(a(94722)),O=n(a(63925)),E=a(26932),C=a(54415),w=a(83170),j=a(69882),S=a(68403),M=a(30783),T=a(89177),k=n(a(4855)),P=n(a(19367)),x=a(91225),R=a(15961),N=a(15787),I=a(35233),D=n(a(17196)),A=n(a(16586)),B=n(a(52733)),L=n(a(54162)),F=a(38495);function z(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(z=function(e){return e?a:t})(e)}function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const q=k.default.name("InputContainer"),U=e=>{let t=e.onInputChangeHeight;(0,R.useErrorCatcher)(U.displayName);const a=(0,o.useRef)(null),n=(0,F.useEnhanced)(),r=n.agentTyping,u=n.isOnline,k=n.route,z=n.contactsAsk,H=n.disableEmoji,V=n.isUploadDisabled,G=n.isInputDisabled,Z=n.isIntroduced,$=n.inputText,K=n.lastMessage,J=n.isBotBlocked,X=n.hasAgentMessages,Y=(0,o.useState)({hasError:!1,text:$||K||"",disabled:!!((0,T.getDisabled)()||G||J)}),Q=(0,l.default)(Y,2),ee=Q[0],te=Q[1],ae=(0,o.useState)((0,T.getColorTheme)(ee.disabled)),ne=(0,l.default)(ae,2),re=(ne[0],ne[1]),le=(0,o.useState)(0),oe=(0,l.default)(le,2),ie=oe[0],ue=oe[1],se=(0,o.useState)(0),de=(0,l.default)(se,2),ce=de[0],fe=de[1],pe=(0,o.useState)(0),me=(0,l.default)(p),be=(0,l.default)(ge,2),ve=be[0],ye=be[1],Oe=p.default.get(m.Component.AUTORESIZER),Ee=(0,i.useSelector)(I.selectQuoteMsgId),Ce=(0,T.getIsMobile)(),we=e=>{(0,T.startTyping)(e)};ce||fe({run:(0,M.throttle)(we,1e3)}),(0,o.useEffect)((()=>{(0,T.checkOfflineForm)(),re((0,T.getColorTheme)(ee.disabled)),(0,b.designerBind)("setBubbleColor",(()=>{re((0,T.getColorTheme)(ee.disablnent.INPUT);q.log("init",e),p.default.set(m.Component.AUTORESIZER,new v.default(e,{maxSize:90,minSize:Ce?16:60,onResize:()=>{(()=>{const e=a.current.base;if(!e)return;const n=e.parentNode.offsetHeight;_e!==n&&(t&&t(n),he(n))})()}})),Te(ee.disabled),!Ce&&(0,x.isChatInputRoute)(k)&&e&&!(0,T.isActiveElementFocused)()&&e.focus()}),[]);const je=e=>{te((t=>W(W({},t),{},{text:e})))},Se=(e,t)=>{e&&(e.preventDefault(),e.stopPropagation());const n=t||ee.text;q.log("inputSendMessage",n);const r=!!n&&(0,T.replaceEmojiValue)((0,T.getText)(n));if(r){if(E.clientDispatchers.setLastMessage(r),je(""),1===z&&!Z&&u)return E.appDispatchers.setAppIsFocused(!0),s.Router.next(d.RouterEvent.ToIntroduce),je(""),void E.clientDispatchers.setInputText("");if(!r.trim())return te((e=>W(W({},e),{},{hasError:!0}))),!1;je(""),E.clientDispatchers.setInputText(""),(0,T.onInputSubmit)({value:r,repliedMsgId:null!=Ee?Ee:null}),Ee&&E.appDispatchers.setQuoteMsgId(null)();const e=p.default.get(m.Component.INPUT);e&&e.focus()}),50),Ce&&document.activeElement===a&&e&&e.preventDefault()}},Me=e=>{ee.disabled!==e&&(te((t=>W(W({},t),{},{text:e?"":$,disabled:!!e}))),re((0,T.getColorTheme)(!!e)),Te(e))},Te=e=>{(0,T.setPlaceholder)((0,T.getPlaceholder)(e,J))},ke=()=>{clearTimeout(ie),ue(setTimeout(T.stopTyping,5e3))},Pe=e=>e.replace(/[\u202E]/gi,""),xe=h.reduxStore.getState().settings.features,Re=(0,_.default)({[L.default.input]:!0,[L.default.__mobile]:Ce,[L.default.inputPhone]:f.default.windowsPhone()}),Ne=()=>(0,T.getDisabled)()||G||J?(Me(!0),!0):(Me(!1),!1),Ie=f.default.tablet()&&f.default.chromeIOS();return Ie&&(0,T.setPaddingForFocus)(ve),o.default.createElement("jdiv",{className:L.default.wrapMargin,style:{marginBottom:Ie&&ve?44:null}},o.default.createElement("jdiv",{className:Re,ref:e=>{e&&p.default.set(m.Component.CHAT_INPUT,e)}},Ce&&(0,S.showAd)()?o.default.createElement(P.default,{type:"chat"}):null,Ce&&1==xe.typingInsight?o.default.createElement(A.default,{show:r,isMobile:Ce}):null,Ee&&o.default.createElement(D.default,null),o.default.createElement("jdiv",{className:(0,_.default)(L.default.inputContainer)},o.default.createElement(c.default,{text:eonInput:e=>{e.stopPropagation();const t=Pe(e.target.value);if(""===t)return e.target.value="",""!==ee.text&&te((e=>W(W({},e),{},{text:"",hasError:!0}))),E.clientDispatchers.setInputText(t),void(0,N.connectionTypingInsight)("");te((e=>W(W({},e),{},{text:t,hasError:!1}))),re((0,T.getColorTheme)(!!ee.disabled)),E.clientDispatchers.setInputText(t),setTimeout((()=>{Oe&&Oe.check()}),150),ce.run(t),ke()},onKeyPress:e=>{((e,t)=>{let a=Pe(e.targe,a,t),e.stopPropagation(),ee.text&&(a=ee.text);const n=e.keyCode;if(!Ce&&""!==a&&(e.ctrlKey||e.metaKey||e.shiftKey)&&-1!==[10,13].indexOf(n)){if(!e.shiftKey&&!f.default.edge()){const t=(0,g.addNewLine)(e.target,a);t&&(te((e=>W(W({},e),{},{text:t}))),E.clientDispatchers.setInputText(t))}return!1}13===n?(e.preventDefault(),Se(e,a)):8===n&&""===a&&(te((e=>W(W({},e),{},{text:""}))),E.clientDispatchers.setInputText(""))})(e,ee.text)},onFocus:e=>{(0,T.onFocus)(e),ye(!0)},onBlur:()=>{ye(!1)},onPaste:e=>{Ce&&te((e=>W(W({},e),{},{hasError:!1}))),(0,T.onPaste)(e,null!=Ee?Ee:null)},disableFileUpload:V,ref:a}),o.default.createElement(B.default,{isMobile:Ce,disabled:Ne(),onClick:Se,hasError:ee.hasError||!ee.text,theme:(0,T.getColorTheme)(ee.disabled),styles:L.default,isPointer:f.default.isPointerEnabled()}))),o.default.createElement(y.default,{disabled:Ne(),disableFileUpload:V,insertEmoji:e=>{if(!u&&ee.disabled)return;const t=e.target.getAttribute("jv-emoji");if(null===t)return;const a=":"+t+":";if(ee.text&&0===ee.text.length)Se(null,a);else{const e=ee.text+a;te((t=>W(W({},t),{},{text:e}))),E.clientDispatchers.setInputText(e)}ce.run(a),ke(),C.Monitoring.telemetry(w.TelemetryName.EMOJI_INSERT_SMILE),setTimeout((()=>{(0,T.afterEmojiInserted)(Oe),E.appDispatchers.setAppIsFocused(!0)}),150)},isPopupMenuVisible:f.default.desktop()&&!(0,j.isChatPage)()&&X,isOnline:u,disableEmoji:Ce||H}),(0,T.isSocialButtonEnabled)()?o.default.createElement(O.default,null):null)};t.InputContainer=U,U.propTypes={onInputChangeHeight:u.default.func},U.displayName="InputContainer"},3807:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(98661)),o=n(a(54162)),i=n(a(94184)),u=n(a(45697)),s=a(90361),d=a(57930),c=n(a(75686)),f=a(47245);const p=e=>{let t=e.text,a=e.disabled,n=e.onInput,u=e.onFocus,p=e.onBlur,m=e.onPaste,_=e.onKeyPress,h=e.disableFileUpload;const g=(0,i.default)({[o.default.tdTextarea]:!0,[o.default.__filedisabled]:h});return l.default.createElement("jdiv",{className:g},l.default.createElement("textarea",(0,r.default)({maxLength:"1000",className:(0,i.default)({[o.default.inputField]:!0}),key:"inputField",onInput:n,onKeyPress:_,onKeyUp:e=>{e.stopPropagation()},onKeyDown:e=>{e.stopPropagation()},onFocus:u,onBlur:p,onPaste:m,value:a?"":t,disabled:a,autoComplete:"false","data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false",ref:e=>{e&&c.default.set(f.Component.INPUT,e)}},(0,s.withLocator)(d.Locator.INPUT))))};p.propTypes={text:u.default.string,disabled:u.default.bool,onInput:u.default.func.isRequired,onFocus:u.default.func.isRequired,onBlur:u.default.func,onPaste:u.default.funquired,disableFileUpload:u.default.bool};var m=l.default.memo(p);t.default=m},38495:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useEnhanced=function(){const e=(0,r.useSelector)(l.selectBotBlockedMessages,r.shallowEqual),t=(0,r.useSelector)(o.selectLastChatOpened),a=(0,r.useSelector)((e=>(0,i.selectJoinedIdsByStatus)(e,"join")),r.shallowEqual).botIds,n=(0,r.useSelector)(i.selectCurrentChat),p=!!n&&n.agentTyping,h=(0,r.useSelector)(u.selectApp),g=h.isOnline,b=h.route,v=(0,r.useSelector)(s.selectContactsAsk),y=(0,r.useSelector)(s.selectDisableEmoji),O=(0,r.useSelector)(u.selectIsInputDisabled),E=(0,r.useSelector)(d.selectIsIntroduced),C=Boolean((0,r.useSelector)(c.selectDisableFiletransfer)||(0,m.isFileUploadDisabled)()),w=(0,r.useSelector)(f.selectClient),j=w.inputText,S=w.lastMessage,M=Boolean((0,r.useSelector)(l.selectAgentMessagesCount));return _.warn("agentMessagesCount",M),{agentTyping:p,isOnline:g,route:b,contactsAsk:v,disableEmoji:y,isUploadDisabled:C,isInputDisabled:O,isIntroduced:E,inputText:j,lastMessage:E||g?null:S,isBotBlocked:t&&e.length&&a.length,hasAgentMessages:M}};var r=a(36113),l=a(66311),o=a(35233),i=a(55623),u=a(65138),s=a(87692),d=a(45959),c=a(79105),f=a(97979),p=n(a(4855)),m=a(89177);const _=p.default.name("InputContainer")},64713:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(98661)),o=n(a(40704)),i=n(a(91059)),u=n(a(45697)),s=n(a(59963)),d=n(a(67061)),c=n(a(94184)),f=a(90361),p=a(57930);const m=e=>{let t=e.opened,a=void 0!==t&&t,n=e.disabled,u=void 0!==n&&n,m=e.width,_=void 0===m?227:m,h=e.height,g=void 0===h?182:h,b=e.offsetRight,v=void 0===b?15:b,y=e.onClick,O=e.onItemClick;return l.default.createElement("jdiv",(0,r.default)({className:i.default.emojiWrap,onClick:u?null:y},(0,f.withLocator)(p.Locator.INPUT_EMOJI_PANEL)),l.default.createElement(o.default,{iconName:"icon-emoji",color:u?"#c9cdd3":"#a3aab5",className:(0,c.default)({[i.default.iconEmoji]:!0,[i.default.__disabled]:u})}),l.default.createElement(d.default,{show:a,onClick:O,width:_,height:g,offsetRight:v},l.default.createElement(s.default,null)))};m.propTypes={opened:u.default.bool.isRequired,onClick:u.default.func.isRequired,onItemClick:u.default.func.isRequired,width:u.default.number,height:u.default.number,offsetRight:u.default.number,disabled:u.default.bool};var _=l.default.memo(m);t.default=_},94722:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.componentProps=void 0;var r=n(a(61125)),l=n(a(67375)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),i=n(a(45697)),u=n(a(94184)),s=n(a(19955)),d=a(21951),c=a(69882),f=n(a(23535)),p=a(54415),m=a(83170),_=n(a(64713)),h=n(a(64508)),g=n(a(22866)),b=n(a(31308));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(v=function(e){return e?a:t})(e)}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const E=n(a(4855)).default.name("InputIconsPure"),C=e=>{let t=e.disabled,a=void 0!==t&&t,n=e.disableFileUpload,r=void 0!==n&&n,i=e.insertEmoji,v=e.isPopupMenuVisible,y=e.isOnline,C=e.disableEmoji;const w=(0,o.useState)({emojiListOpened:!1,menuOpened:!1,link:{fileName:"",url:""}}),j=(0,l.default)(w,2),S=j[0],M=j[1],T=()=>{E.log("closeMenu"),(0,d.removeEvent)((0,c.getPageWindow)(),"click",T),M((e=>O(O({},e),{},{menuOpened:!1})))},k=e=>{if(E.log("menuClick"),e.stopPropagation(),a)return;S.menuOpened||(0,d.addListener)((0,c.getPageWindow)(),"click",T);const t=g.default.getInstance().messagesFormatter.getMessagesAsHTML();M((e=>O(O({},e),{},{menuOpened:!e.menuOpened,emojiListOpened:!1,link:t}))),p.Monitoring.telemetryOnce(m.TelemetryName.MORE_CLICK),t.url||p.Monitoring.telemetryOnce(m.TelemetryName.ERROR_DOWNLOADING_CHAT_LOG,{param1:e.message})},P=()=>{E.log("closeEmojiList"),(0,d.removeEvent)((0,c.getPageWindow)(),"click",P),M((e=>O(O({},e),{},{emojiListOpened:!1})))},x=e=>{E.log("toggleEmojiList"),e.stopPropagation(),!y&&a||(S.emojiListOpened||(0,d.addListener)((0,c.getPageWindow)(),"click",P),M((e=>O(O({},e),{},{emojiListOpened:!e.emojiListOpened,menuOpened:!1}))),S.emojiListOpened&&p.Monitoring.telemetry!e?15:v&&e?45:v||e?15:0},N=(0,u.default)({[b.default.iconPanel]:!0,[b.default.__mobile]:s.default.mobileOrTablet()||(0,c.isChatPage)()});return o.default.createElement("jdiv",{className:N},(()=>{if(v)return o.default.createElement(h.default,{show:S.menuOpened,disabled:a,link:S.link,onClick:k,onItemClick:()=>{p.Monitoring.telemetryOnce(m.TelemetryName.DOWNLOAD_CHAT_LOG_CLICK)}})})(),(()=>{if(!r)return o.default.createElement(f.default,{disabled:a})})(),(()=>{if(!C)return o.default.createElement(_.default,{disabled:a,opened:S.emojiListOpened,onClick:x,onItemClick:i,offsetRight:R()})})())},w=C.propTypes={disabled:i.default.bool.isRequired,disableFileUpload:i.default.bool.isRequired,insertEmoji:i.default.func.isRequired,isOnline:i.default.bool,isPopupMenuVisible:i.default.bool,disableEmoji:i.default.bool};t.componentProps=w;var j=o.default.memo(C);t.default=j},67061:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(30240)),o=n(a(94184)),i=n(a(45697));const u=e=>{let t=e.show,a=void 0===t||t,n=e.width,i=void 0===n?100:n,u=e.height,s=void 0===u?100:u,d=e.offsetRight,c=void 0===d?0:d,f=e.children,p=e.onClick;return r.default.createElement("jdiv",{className:(0,o.default)({[l.default.popup]:!0,[l.default.show]:!!a}),style:{width:`${i}px`,height:`${s}px`,right:`${c}px`,top:`-${38+s}px`},onClick:p},r.default.createElement("jdiv",{className:l.default.childrenWrap},f),r.default.createElement("jdiv",{className:l.default.pip,style:{left:`${2+c}px`}}))};u.propTypes={show:i.default.bool.isRequired,width:i.default.number.isRequired,onClick:i.default.func.isRequired,children:i.default.oneOfType([i.default.arrayOf(i.default.node),i.default.node]).isRequired,height:i.default.number,offsetRight:i.default.number};var s=r.default.memo(u);t.default=s},64508:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(98661)),o=n(a(2037)),i=n(a(40704)),u=n(a(45697)),s=n(a(94184)),d=n(a(84726)),c=a(90361),f=a(57930);const p=e=>{let t=e.disabled,a=e.onClick,n=e.onItemClick,u=e.link,p=e.show;return l.default.createElement("jdiv",{className:o.default.menuWrap},l.default.createElement("jdiv",(0,r.default)({onClick:a},(0,c.withLocator)(f.Locator.INPUT_MORE_BTN)),l.default.createElement(i.default,{iconName:"icon-more",color:t?"#c9cdd3":"#a3aab5",hoverColor:t?null:"#a3aab5",disabled:t,className:(0,s.default)({[o.default.iconMenu]:!0,[o.default.__disabled]:t})})),l.default.createElement("jdiv",{className:(0,s.default)({[o.default.menu]:!0,[o.default.show]:!!p})},l.default.createElement("jdiv",{className:o.default.menuItem,onClick:n},l.default.createElement("a",{download:u.fileName,href:u.url,target:"_blank",rel:"nofollow noopener noreferrer"},(0,d.default)("downloadChatText"))),l.default.createElement("jdiv",{className:o.default.pip})))};p.propTypes={show:u.default.bool.isRequired,onClick:u.default.func.isRequired,onItemClick:u.default.func.isRequired,link:u.default.shape({fileName:u.default.string.isRequired,url:u.default.string.isRequired}).isRequired,disabled:u.default.bool};var m=l.default.memo(p);t.default=m},93589:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=n(a(45697)),i=n(a(94184)),u=a(57985),s=a(9335),d=n(a(88155)),c=n(a(22760)),f=n(a(40704));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=functia:t})(e)}const m=e=>{let t=e.selectedDepartmentId,a=e.departments,n=e.isMobile,o=e.isIos,p=e.bgColor,m=e.onDepartmentSelect;const _=(0,l.useRef)(null),h=(0,l.useState)((()=>{var e;return null!==(e=a.find((e=>e.id>>0==t>>0)))&&void 0!==e?e:a[0]})),g=(0,r.default)(h,2),b=g[0],v=g[1],y=(0,s.useToggle)(!1),O=(0,r.default)(y,2),E=O[0],C=O[1];(0,u.useClickOutside)(_,(()=>{E&&C(!1)}));const w=(0,i.default)({[c.default.selectPopup]:!0,[c.default.__ios]:o,[c.default.__scroll]:a.length>3}),j=(0,i.default)({[c.default.currentItem]:!0,[c.default["_"+p]]:!0,[c.default._open]:E,[c.default.__mobile]:n}),S=()=>a.map((e=>l.default.createElement("jdiv",{key:e.id,className:e.id===b.id?c.default.itemSelected:c.default.item,onClick:()=>{return t=e.id,a=e.name,v({id:t,name:a}),C(!1),void m(t);var t,a}},e.name)));return l.default.createElement("jdiv",{className:c.default.fieldWrap},l.default.createElement("jdiv",{className:c.default.select},l.default.createElement("jdiv",{className:j,onClick:e=>{e.preventDefault(),C()}},b.name,l.default.createElement(f.default,{iconName:"icon-v",color:"#8B9096",hoverColor:"#222D38",className:c.default.iconSelect})),E&&l.default.createElement("jdiv",{ref:e=>{e&&(_.current=e,e.style.setProperty("z-index",1,"important"))},className:w},a.length>3?l.default.createElement(d.default,{railClass:c.default.rail,hideTracksWhenNotNeeded:!1},S()):S())))};m.propTypes={selectedDepartmentId:o.default.number,departments:o.default.arrayOf(o.default.shape({id:o.default.string,name:o.default.string})).isRequired,isMobile:o.default.bool.isRequired,isIos:o.default.bool.isRequired,bgColor:o.default.string.isRequired,onDepartmentSelect:o.default.func.isRequired};var _=m;t.default=_},33744:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=k(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=n(a(94184)),i=n(a(50890)),u=n(a(96340)),s=n(a(91325)),d=n(a(22048)),c=n(a(93589)),f=n(a(40704)),p=n(a(19367)),m=a(26932),_=a(47245),h=a(9393),g=a(68403),b=a(69882),v=a(21476),y=a(47060),O=a(15787),E=a(49862),C=a(85620),w=n(a(84726)),j=n(a(75686)),S=n(a(39604)),M=a(33813),T=a(23336);function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(k=function(e){return e?a:t})(e)}var P=l.default.memo((()=>{const e=(0,l.useState)(null),t=(0,r.default)(e,2),a=t[0],n=t[1],k=(0,C.useEnhanced)(),P=k.isAnon,x=k.eula,R=artments,I=k.selectedDepartmentId,D=k.isMobile,A=k.isIos,B=k.bgColor,L=k.client,F=k.description,z=k.route,H=k.isOnline,W=k.isFocused;return(0,E.useDidUpdate)((function(){if(a&&(!R||x)){(0,T.reportCampaignContactsStat)(),m.clientDispatchers.setIsIntroduced(!0),N.length&&!I&&m.clientDispatchers.setDepartmentId(+N[0].id);const e={description:F};(0,h.each)(a,(t=>e[t.name]=t.value));const t=a.message&&a.message.value?a.message.value:null;(0,O.sendIntroduceAndMessage)(e,t),v.Router.next(y.RouterEvent.Submit),setTimeout((()=>{(0,M.fixSafariKeyframe),50)}}),[x,R,a]),z!==y.Route.INTRODUCE?null:l.default.createElement("jdiv",{className:(0,o.default)({[S.default.main]:!0,[S.default.__mobile]:D||(0,b.isChatPage)()}),ref:e=>{j.default.set(_.Component.INTRODUCE,e)}},(0,g.showAd)()?l.default.createElement(p.default,{bottom:!0}):null,l.default.createElement(i.default,{client:L,route:z,isOnline:H,isFocused:W,errorCallback:()=>{},successCallback:e=>{n(e),R&&!x&&v.Router.next(y.RouterEvent.Submit)}},P&&!D&&l.default.createElement("jdiv",{className:S.default.avatarBox},l.default.createElement(f.default,{iconName:"icon-anonymous",className:S.default.iconAnonymous})),l.default.createElement(u.default,{name:"client_name",placeholder:(0,w.default)("lblIntroduceName")}),l.default.createElement(u.default,{name:"phone",placeholder:(0,w.default)("lblYourPhone")}),l.default.createElement(u.default,{name:"email",placeholder:(0,w.default)("lblYourEmail")}),N.length?l.default.createElement(c.default,{selectedDepartmentId:I,departments:N,isMobile:D,isIos:A,bgColor:B,onDepartmentSelect:e=>m.clientDispatchers.setDepartmentId(+e)}):null,l.default.createElement(s.default,{name:"message"}),l.default.createElement(d.default,{type:"submit"})))}));t.default=P},85620:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useEnhanced=function(){const e=(0,r.useSelector)(l.selectContactsSettings),t=(0,r.useSelector)(l.selectEulaEnabled),a=(0,r.useSelector)(l.selectDepartments),n=(0,r.useSelector)(o.selectDepartmentId),d=(0,r.useSeleColor),c=(0,r.useSelector)(o.selectClient),f=(0,r.useSelector)(o.selectEulaAccepted),p=(0,r.useSelector)(o.selectDescription),m=(0,r.useSelector)(s.selectRoute),_=(0,r.useSelector)(s.selectIsOnline),h=(0,r.useSelector)(s.selectIsFocused),g=u.default.mobileOrTablet(),b=u.default.safari(),v=u.default.ios();return{isAnon:function(){let t=0;return(0,i.each)(e,(e=>{e.show&&(t+=1)})),t<2}(),eula:f,eulaEnabled:t,departments:a,selectedDepartmentId:n,isMobile:g,isSafari:b,isIos:v,bgColor:d,client:c,description:p,route:m,isOnline:_,isFocused:h}};var r=a(36113),l=a(87692),o=a(45959),i=a(9393),u=n(a(19955)),s=a(35233)},54413:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(88436)),l=n(a(23101)),o=n(a(67375)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=I(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),u=a(36113),s=n(a(45697)),d=n(a(94184)),c=a(57930),f=a(47713),p=a(49862),m=a(2535),_=a(81366),h=a(90361),g=n(a(32083)),b=n(a(3501)),v=n(a(43569)),y=n(a(46133)),O=n(a(33126)),E=n(a(43711)),C=n(a(40704)),w=n(a(1497)),j=a(93885),S=a(63664),M=a(87692),T=a(45959),k=a(69665),P=n(a(18292)),x=n(a(12959)),R=a(89334);const N=["selected","hovered"];function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(I=function(e){return e?a:t})(e)}const D=e=>{let t=e.color,a=e.fields,n=e.currentDepartmentId,s=e.departments,I=e.isDesktop,A=e.isIos,B=e.size,L=e.initialName,F=e.initialPhone,z=e.initialEmail,H=ButtonText,q=e.onFailedSubmit,U=e.onSuccessSubmit;(0,S.useErrorCatcher)(D.displayName);const V=(0,_.useIsOnline)(),G=(0,u.useSelector)(M.selectEula,u.shallowEqual),Z=(0,u.useSctEulaAccepted),$=Boolean(G)&&!Z,K=(0,m.useForm)({initialValues:{name:L,email:z,phone:F,departmentId:n||(s.length?s[0].value:null),eula:!$||Z,message:H},validate:e=>(0FirstError:!0}),J=K.errors,X=K.values,Y=K.setFieldValue,Q=K.getInputProps,ee=K.formRef,te=K.submitCount,ae=K.isSubmitted,ne=K.isValid,re=K.onSubmit;(0,p.useDidUpdate)((()=>{ne||q(J)}),[te]),(r e;if(!I)return;constrySelector("input, textarea");null==t||null===(e=t.focus)||void 0===e||e.call(t)}));const le=e=>Y("departmentId",e.value),oe=e=>{let t=e.isDirty,a=e.isValid;return{show:ae&&!t,name:a?"iconValid":"iconWarning"}},ie=e=>e.isDirty||!ae?null:t,ue=I&&Object.keys(a).length<2,se=Q("message"),de=oe(se.state),ce=re(U),fe=e=>"Enter"===e.code&&ce(e),pe=(0,i.useCallback)((e=>{Y("eula",e)}),[Y]);return i.default.createElement(i.default.Fragment,null,ue&&i.default.createElement("jdiv",{className:P.default.helloBox},i.default.createElement(b.default,{icon:"1f44b",className:"emojiMessages",alone:!0})),i.default.createElement("form",(0,l.default)({ref:ee,className:P.default.form},(0,h.withLocator)(c.Locator.CONTACTS_FORM)),Object.entries(a).map((e=>{let t=(0,o.default)(e,2),a=t[0],n=t[1];const r=Q(a),u=r.attrs,s=r.state,d=oe(s),f=d.show,p=d.name,m=c.Locator[`CONTACTS_FORM_${a.toUpperCase()}`];return i.default.createElement(v.default,(0,l.default)({key:a,color:ie(s),size:B,required:n.required,variant:"inset",isIos:A,rightSectionWidth:32,rightSection:f&&i.default.createElement(C.default,{iconName:p,className:P.default.icon}),onKeyDown:fe},u,k.getFieldProps[a],(0,h.withLocator)(m)))})),!!s.length&&I&&i.default.createElement(O.default,(0,l.default)({color:t,data:s,gutter:2,initialValue:X.departmentId,maxDropdownHeight:94,size:B,variant:"inset",rightSectionWidth:32,itemComponent:e=>{let t=e.selected,a=e.hovered,n=(0,r.default)(e,N);return i.default.createElement(E.default,(0{className:(0,d.default)({[P.default.selectItem]:!0,[P.default.__selected]:t,[P.default.__hovered]:a,[P.default.__ios]:A})}))}},k.getFieldProps.department,{onChange:le})),!!s.length&&!I&&i.default.createElement(y.default,(0,l.default)({color:t,data:s,value:X.departmentId,size:B,variant:"inset",rightSectionWidth:32,isIos:A},k.getFieldProps.department,{onChange:e=>le({value:e})})),i.default.createElement(w.default,(0,l.default)({rows:2,color:ie(se.state),size:B,required:!0,variant:"inset",rightSectionWidth:32,rightSection:de.show&&i.default.createElement(C.default,{iconName:de.name,className:P.default.icon}),classNames:{textarea:null,rightSection:P.default.overriddenTextareaRightSection}},k.getFieldProps.message,se.attrs,(0,h.withLocator)(c.Locator.CONTACTS_FORM_INPUT))),$?i.default.createElement(j.EulaCheckboxContainer,{className:x.default.checkbox,checkedClassName:x.default.checked,textClassName:x.default.eulaText,error:J.eula,onChange:pe}):null,i.default.createElement(g.default,(0,l.default)({component:"jdiv",type:"submit",disabled:!V,color:t,size:B,fullWidth:!0},(0,f.onClickHandler)(ce)),W)))};D.defaultProps={initialName:"",initialPhone:"",initialEmail:"",initialMessage:"",size:"sm",departments:[]},D.propTypes={color:s.default.string.isRequired,fields:s.default.shape({name:s.default.shape({show:s.default.bool,required:s.default.bool}),phone:s.default.shape({show:s.default.bool,required:s.default.bool}),email:s.default.shape({show:s.default.bool,required:s.default.bool})}).isRequired,currentDepartmentId:s.default.number,departments:s.default.arrayOf(s.default.shape({value:s.default.oneOfType([s.default.string,s.default.number]),label:s.default.string})),isDesktop:s.default.bool.isRequired,isIos:s.default.bool.isRequired,submitButtonText:s.default.string.isRequired,initialName:s.default.string,initialEmail:s.default.string,initialPhone:s.default.string,initialMessage:s.default.string,size:s.default.oneOf(["xs","sm","md","lg","xl"]),onFailedSubmit:s.default.func.isRequired,onSuccessSubmit:s.default.func.isRequired},D.displayName="IntroduceForm";var A=D;t.default=A},82521:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(61125)),l=n(a(67375)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=A(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),i=a(36113),u=n(a(94184)),s=a(45959),d=a(87692),c=a(26932),f=a(47245),p=a(21721),m=a(9393),_=a(68403),h=a(69882),g=a(21733),b=a(54415),v=a(34425),y=a(47060),O=a(35233),E=a(15787),C=a(83170),w=a(49862),j=a(63664),S=n(a(19367)),M=n(a(19955)),T=n(a(54413)),k=n(a(84726)),P=n(a(75686)),x=a(23336),R=a(33813),N=n(a(71323)),I=a(21476),D=n(a(18292));function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(A=function(e){return e?a:t})(e)}function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const F=()=>{(0,j.useErrorCatcher)(F.displayName);const e=(0,o.useState)(null),t=(0,l.default)(e,2),a=t[0],n=t[1],r=(0,i.useSelector)(d.selectBubbleColor),A=(0,i.useSelector)(d.selectContactsSettingsToShow),B=(0,i.useSelector)(s.selectDepartmentId),z=(0,i.useSelector)(d.selectDepartments),H=(0,i.useSelector)(s.selectClientEmail),W=(0,i.useSelector)(s.selectDescription),q=(0,i.useSelector)(s.selectInputText),U=(0,i.useSelector)(s.selectLastMessage),V=(0,i.useSelector)(s.selectEulaAccepted),G=(0,i.useSelector)(d.selectEulaEnabled),Z=(0,i.useSelector)(s.selectClientName),$=(0,i.useSelector)(s.selectClientPhone),K=(0,i.useSelector)(O.selectIsOnline),J=(0,i.useSelector)(O.selectRoute),X=(0,h.isChatPage)(),Y=M.default.desktop(),Q=M.default.ios()&&M.default.safari(),ee=(0,_.showAd)(),te=G&&!V{},{description:W});returntring)(e)?e.trim():"")),td;t&&c.clientDispatchers.setDepartmentId(t),(0,x.reportCampaignContactsStat)(),te&&N.default.acceptEula(),c.clientDispatchers.setIsIntroduced(!0),(0,E.sendIntroduceAndMessage)(e,e.message),I.Router.next(y.RouterEvent.Submit),setTimeout((()=>{(0,R.fixSafariKeyframes)(!0)}),50)};(0,w.useDidUpdate)((function(){a&&ae&&re(a)}),[a,ae]);const le=z.map((e=>({value:e.id,labelnull;const oe=!Y||X;return o.default.createElement("jdiv",{className:(0,u.default)({[D.default.wrapper]:!0,[D.default.__mobile]:oe,[D.default.__ios]:Q})},o.default.createElement(p.DisconnectAlert,{route:y.Route.INTRODUCE}),o.default.createElement("jdiv",{className:(0,u.default)({[D.default.container]:!0,[D.default.__mobile]:oe}),ref:e=>{P.default.set(f.Component.INTRODUCE,e)}},ee&&o.default.createElement(S.default,{type:"chat",bottom:!0}),o.default.createElement(T.default,{color:r,fields:A,currentDepartmentId:B,departments:le,isDesktop:Y,isIos:Q,size:"md",initialName:Z,initialPhone:$,initialEmail:H,initialMessage:q||U,submitButtonText:(0,k.default)("lblSendBefore"),onFailedSubmit:e=>{const t=K?C.TelemetryName.CHAT_INTRODUCE:C.TelemetryName.OFFLINE_SENT_FAIL,a=(0,v.redefineProps)(ne(e),{name:"client_name"},!0);b.Monitoring.telemetry(t,{param1:"formSubmitFail",param2:(0,_.getContactSettingsInfo)(),param3:JSON.stringify(a)})},onSuccessSubmit:e=>{const t=(0,v.redefineProps)(ne(e),{name:"client_name"},!0);n(t),b.Monitoring.telemetry(C.TelemetryName.CHAT_INTRODUCE,{param1:"formSubmit",param2:(0,_.getContactSettingsInfo)()}),re(t)}})))};F.displayName="NewIntroduce";var z=F;t.default=z},69665:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.validateFn=t.getFieldProps=void 0;var r=n(a(61125)),l=n(a(84726)),o=n(a(98960));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const s={name:{name:"name",type:"text",maxLength:null,autoComplete:"name",label:(0,l.default)("lblIntroduceName")},phone:{name:"phone",type:"tel",maxLength:null,autoComplete:"tel",label:(0,l.default)("lblYourPhone")},email:{name:"email",type:"email",maxLength:255,autoComplete:"email",label:(0,l.default)("lblYourEmail")},department:{name:"department",type:"text",maxLength:null,autoComplete:null,label:(0,l.default)("lblSelectDep")},message:{name:"message",type:null,maxLength:1e3,autoComplete:"off",label:(0,l.default)("lblYourMessage")}};t.getFieldProps=s;t.validateFn=(e,t,a)=>{const n={};a&&(e=u(u({},e),{},{eula:!1}));for(const a in e){const r=t[a],l=o.default[a];n[a]="eula"===a?!r:(e[a].required||r.trim().length)&&!l(r)}return u(u({},n),{},{message:!o.default.message(t.message)})}},39906:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(94184)),o=n(a(45697)),i=n(a(4867)),u=a(67597),s=n(a(87736)),d=n(a(51120)),c=a(69882),f=a(15961),p=a(25095),m=n(a(99493));const _=e=>{let t=e.messages,a=e.children,n=e.isPreview,o=void 0!==n&&n;(0,f.useErrorCatcher)("AgentMessageWrap");const i=(0,p.useEnhanced)(t[0]),_=i.ref,h=i.textSize,g=i.color,b=i.avatarUrl,v=i.agent,y=i.isAgent,O=i.isBot,E=i.isIos,C=i.isMobile,w=i.isScrollLower,j=i.disableBotLabel,S=null==v?void 0:v.name,M=null==v?void 0:v.avatarUrl,T=M?(0,u.getAvatarApiUrl)(b,M):"",k=(0,l.default)({[m.default.main]:!0,[m.default._mobile]:C,[m.default.__chatPage]:(0,c.isChatPage)(),[m.default["__"+g]]:!1,[m.default._transparent]:o,[m.default._noagent]:!y}),P=(0,l.default)({[m.default.avatarBox]:!0,[m.default.__isAnimated]:w}),x={"-webkit-text-size-adjust":E?h:null};return r.default.createElement("jdiv",{ref:_,style:x,className:k},(O||S)&&r.default.createElement("jdiv",{className:m.default.agentName},O?r.default.createElement(r.default.Fragment,null,S||"Bot",j?null:r.default.createElement("jdiv",{className:m.default.botBadge},"bot")):S),r.default.createElement("jdiv",{className:P,title:S},O?r.default.createElement(d.default,{url:T}):r.default.createElement(s.default,{dark:!0,expanded:!1,inChat:!0,isMobile:C,inCall:!1,url:T})),r.default.createElement("jdiv",{className:m.default.content},a))};_.propTypes={messages:o.default.arrayOf(o.default.instanceOf(i.default)).isRequired,children:o.default.node.isRequired,isPreview:o.default.bool};var h=_;t.default=h},5107:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(45697)),o=n(a(94184)),i=n(a(4867)),u=a(25095),s=n(a(99493));function d(e){let t=e.messages,a=e.children,n=e.isPreview,l=void 0!==n&&n;const i=(0,u.useEnhanced)(t[0]),d=i.color,c=i.isMobile,f=(0,o.default)({[s.default.main]:!0,[s.default._mobile]:c,[s.default["__"+d]]:!1,[s.default._transparent]:l,[s.default._noagent]:!0});return r.default.createElement("jdiv",{className:f},r.default.createElement("jdiv",{className:s.default.content},a))}d.propTypes={messages:l.default.arrayOf(l.default.instanceOf(i.default)).isRequired,children:l.default.node.isRequired,isPreview:l.default.bool};var c=d;t.default=c},25095:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useEnhanced=function(e){const t=e.toJSON(),a=(0,l.useSelector)(c.selectLastMessage),n=(0,l.useSelector)(d.selectAvatarUrl),g=(0,l.useSelector)(d.selectBubbleColor),b=(0,l.useSelector)(d.selectDisableBotLabel),v=(0,l.useSelector)((e=>(0,s.selectBotById)(e,+t.from_id))),y=(0,l.useSelector)((e=>(0,u.selectAgentById)(e,+t.from_id))),O=(0,r.useRef)(null),E=(0,f.useListenedStyle)("textSize"),C=t.type===i.MessageType.INVOICE?"white":g,w=t.from===i.MessageInitiator.FORM,j=t.from_id||w,S=m.default.ios(),M=m.default.mobileOrTablet();return{ref:O,textSize:E,color:C,avatarUrl:n,agent:w?v:t.type===i.MessageType.PROACTIVE?null!==(T=t.body)&&void 0!==T&&T.agent_info?(0,h.agentToReduxFormat)(null===(P=t.body)||void 0===P?void 0:P.agent_info):null!==(k=t.body)&&void 0!==k&&k.agent_id?{name:t.body.display_name,avatarUrl:t.body.avatar_url}:p.default.toReduxFormat():y,isAgent:j,isBot:w,isIos:S,isMobile:M,isScrollLower:function(){const e=O.current,t=_.default.getComponent(o.Component.SCROLL_CONTAINER);if(e&&t&&a){const n=a.type,r=a.from,l=e.nextSibling,o=n===i.MessageType.MESSAGE,u=r===i.MessageInitiator.AGENT||r===i.MessageInitiator.FORM;return!l&&o&&u&&t.animated}return!1}(),disableBotLabel:b};var T,k,P};var r=a(98661),l=a(36113),o=a(47245),i=a(81152),u=a(99258),s=a(14376),d=a(87692),c=a(66311),f=a(77389),p=n(a(26754)),m=n(a(19955)),_=n(a(75686)),h=a(26754)},96150:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(94184)),o=n(a(45697)),i=n(a(4867)),u=a(69882),s=a(20738),d=n(a(8292));function c(e){let t=e.messages,a=e.children;const n=(0,s.useEnhanced)(t[0]),o=n.textSize,i=n.color,c=n.isIos,f=n.isMobile,p=(0,l.default)({[d.default.main]:!0,[d.default._mobile]:f,[d.default.__chatPage]:(0,u.isChatPage)(),[d.default["__"+i]]:!0}),m=c?{"-webkit-text-size-adjust":o}:null;return r.default.createElement("jdiv",{style:m,className:p},r.default.createElement("jdiv",{className:d.default.content},a))}c.propTypes={messages:o.default.oneOfType([o.default.instanceOf(i.default).isRequired,o.default.array]),children:o.default.node.isRequired};var f=c;t.default=f},20738:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useEnhanced=function(e){const t=e.toJSON(),a=(0,r.useSelector)(o.selectBubbleColor),n=t.type===l.MessageType.INVOICE?"white":a,s=(0,i.useListenedStyle)("textSize"),d=u.default.ios(),c=u.default.mobileOrTablet();return{textSize:s,color:n,isIos:d,isMobile:c}};var r=a(36113),l=a(81152),o=a(87692),i=a(77389),u=n(a(19955))},46544:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var r=n(a(23101)),l=n(a(88436)),o=n(a(98661)),i=n(a(45697)),u=n(a(94184)),s=a(90906),d=a(81152),c=n(a(30295)),f=n(a(4867)),p=n(a(56460)),m=n(a(40704)),_=n(a(84726));const h=["className","colorSet","message","isRenderStatus"];function g(e){let t=e.className,a=e.colorSet,n=e.message,i=e.isRenderStatus,g=void 0!==i&&i,b=(0,l.default)(e,h);const v=n instanceof f.default?n.toJSON():n,y=v.status,O=v.created_ts,E=v.updated_ts,C=v.type,w=v.body,j=(0,u.default)(p.default.baseBox,t),S=(0,c.default)(E||O,"H:MM"),M=(0,s.defineIcon)({colorSet:a,status:y,type:C===d.MessageType.MEDIA?w.status:C});return o.default.createElement("jdiv",(0,r.default)({className:j},b),E?(0,_.default)("messageEdit")+" ":null,S,g&&M&&o.default.createElement(m.default,{iconName:M.iconName,color:M.iconColor,className:p.default.icon}))}g.propTypes={className:i.default.string.isRequired,colorSet:i.default.oneOf(Object.values(s.COLORS_SET)).isRequired,message:stanceOf(f.default),i.default.object]).isRequired,isRenderStatus:i.default.bool}},90906:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COLORS_SET=void 0,t.defineIcon=function(e){let t=e.colorSet,a=e.status,n=e.type;if(n===r.MessageType.TEMPORARY||n===r.MediaStatus.ERROR||n===r.MediaStatus.EXPIRED)return;const i=e=>t=>({iconName:e,iconColor:t}),u=i("check"),s=i("checks"),d=i("clock");if(!a)return d(t===l.LIGHT?o.DARK_GREY:o.LIGHT_GREY);return{[l.LIGHT]:{[r.MessageStatus.SENT]:u(o.DARK_GREY),[r.MessageStatus.DELIVERED]:s(o.GREEN),[r.MessageStatus.READ]:s(o.GREEN)},[l.DARK]:{[r.MessageStatus.SENT]:u(o.LIGHT_GREY),[r.MessageStatus.DELIVERED]:s(o.WHITE),[r.MessageStatus.READ]:s(o.WHITE)}}[t][a]};var n=a(36874),r=a(81152);const l={LIGHT:"LIGHT",DARK:"DARK"};t.COLORS_SET=l;const o={LIGHT_GREY:"#FFF9",DARK_GREY:"#737B83",GREEN:n.colorsFromFigma.GREEN_80,WHITE:n.colorsFromFigma.WHITE_100}},66440:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(61125)),o=n(a(33119)),i=n(a(92664)),u=n(a(84827)),s=n(a(85299)),d=n(a(55536)),c=n(a(98661)),f=a(36113),p=n(a(54720)),m=n(a(19955)),_=n(a(73727)),h=a(68403),g=a(69882),b=a(67597),v=a(90991),y=n(a(16586)),O=n(a(14264)),E=n(a(26754)),C=n(a(14762)),w=n(a(23116)),j=n(a(87736)),S=a(21476),M=a(47060),T=n(a(75686)),k=a(47245),P=n(a(67239)),x=n(a(4855)),R=n(a(84726)),N=a(81152),I=a(52028),D=a(54415),A=a(83170),B=a(81722),L=a(43025),F=a(82726),z=n(a(51120)),H=n(a(51149)),W=n(a(70043)),q=a(44145),U=n(a(36672)),V=n(a(19367)),G=a(47713),Z=a(26932),$=a(33813),K=a(91225);function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}const Q=x.default.name("MessagesMain"),ee=m.default.mobileOrTablet()||(0,g.isChatPage)();let te=function(e){(0,u.default)(a,e);var t=Y(a);function a(e){var n;return(0,o.default)(this,a),(n=t.call(this,e)).state={messagesGroups:(0,F.getMessagesGroup)(),lastEdit:null,hideScrollButton:!0,bottom:ee?50:106,diff:0,lastAgent:null,show:!1,showMore:!1,forceUpdate:!1,widgetHeight:e.widgetHeight},Q.warn("messagesGroups",n.state.messagesGroups),n._container=null,n._scroll=null,n._lastHeight=0,n}return(0,i.default)(a,[{key:"updateMessages",value:function(e,t){Q.log("updateMessages",e,t),t&&(0,F.cleanTempProactive)(),this.setState({messagesGroups:(0,F.getMessagesGroup)(),lastEdit:e?JSON.stringify(e.toJSON()):null,lastAgent:(0,B.getLastAgent)()},(()=>{if(!this.state.show)return;const t=e&&e.toJSON();if((0,B.setLastAgentScroll)(this._scroll))return this.checkShowBadge(),void Q.log("ignore anims and scroll to bottom");const a=t&&t.type===N.MessageType.PROACTIVE,n=O.default.getFirstMessage();if(a&&n&&!n.get("msg_id")&&n.get("type")==N.MessageType.PROACTIVE||this._scroll&&this._scroll.getIgnore())return void Q.log("Ignore scroll for proactive update");if((0,B.isProactivePrechat)())return(0,$.fixSafariKeyframes)(!1),Q.log("Need ignore scroll for prechat and big proactives"),void(this._scroll&&this._scroll.scrollToTop());if(I.isDesignerEditor)return void this.scrollToBottom();if(this._scroll&&this._scroll.view&&!this._scroll.hasScroll()&&t&&t.from==N.MessageInitiator.FORM&&t.body&&t.body.inited)return void Q.log("No scroll, animate form");let r=this._scroll&&this._scroll.view&&_lastHeight),this._lastHeight=this._container.clientHeight,Q.log("diff",r,this._lastHeight),r&&r<600&&r!==this._lastHeight?(r<0&&(r=0),this.setState({diff:r>>0})):(Q.log("scroll bottom on update message"),this.scrollToBottom())})),(0,F.readMessages)()}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,f.shallowEqual)(e,this.props)||!(0,f.shallowEqual)(t,this.state)}},{key:"componentDidMount",value:function(){Q.log("mount"),this.showMessages(),m.default.mobileOrTablet()&&(0,K.isChatInputRoute)((0,q.getApp)().route)&&(0,F.readMessages)();const e=this.updateMessages.bind(this);O.default.on("create",((t,a)=>{e&&e.call(this,t,a),this.getBottom(this.props.inputHeight);const n=t&&t.toJSON();n&&n.from===N.MessageInitiator.CLIENT&&(this._scroll&&this._scroll.setIgnore(!1),this.setState({showMore:!1,showBadge:!1})),n&&n.from===N.MessageInitiator.AGENT&&this.state.showMore&&this.needShowMore()&&(0,B.setLastAgentScroll)(this._scroll)&&this.checkShowBadge()}));const t=(0,v.debounce)(this.updateMessages.bind(this),200);O.default.on("update",t.bind(",(()=>{this.setState({messagesGroups:(0,F.getMessagesGroup)(),lastAgent:(0,B.getLastAgent)(),forceUpdate:!this.state.forceUpdate})})),S.Router.on("route_change",(e=>{(0,K.isChatInputRoute)(S.Router.getPrevRoute())||(this.showMessages(),(0,F.readMessages)(),ee&&e===M.Route.LABEL&&this._scroll&&this._scroll.setIgnore(!1))})),this.on(w.default,{update:()=>{(0,F.readMessages)()}}),ee||(0,F.readMessages)(),this._container=T.default.get(k.Component.MESSAGES_CONTAINER),this._scroll=T.default.getComponent(k.Component.SCROLL_CONTAINER),(0,F.addMessagesOnChatOpen)(),(0,I.designerBind)("setBubbleColor",(()=>{this.forceUpdate()}))}},{key:"componentDidUpdate",value:function(){this.props.widgetHeight!==this.state.widgetHeight&&(this.checkShowBadge(),this.setState({widgetHeight:this.props.widgetHeight}))}},{key:"showMessages",value:function(){const e=T.default.getComponent(k.Component.SCROLL_CONTAINER);e&&this.base&&setTimeout((()=>{this.setState({show:!0}),e&&e.setIgnore(!1),m.default.mobileOrTablet()?!(0,B.setLastAgentScroll)(this._scroll)&&this.scrollToBottom():this.scrollToBottom()}),50)}},{key:"checkShowBadge",value:function(){Q.log("checkShowBadge");const e=O.default.getAgentMessages().length>1||O.default.getMessagesByType(N.MessageType.PRECHAT).length>0,t=this._scroll&&this.needShowMore()&&this._scroll.getIgnore();this.setState({showMore:t,showBadge:e})}},{key:"getBottom",value:function(e){const t=ee?56:106;let a=e||t;a<t&&(a=t),ee&&(0,h.showAd)()&&(a+=35);const n=!(!ee||!this._scroll);return this.state.bottom!==a&&this.setState({bottom:a},(()=>{n&&this._scroll.scrollToBottom()})),a}},{key:"scrollToBottom",value:function(){this._scroll&&this._scroll.view&&(Q.log("scrollToBottom"),this._scroll.getIgnore()?Q.log("Ignore scroll to bottom, input focused."):this._scroll.scrollToBottom())}},{key:"scrollToForm",value:function(){const e=(0,F.getScrollToFormState)(this.props.isOnline);e&&(this.scrollToBottom(),this.setState(X(X({},e),{},{lastAgent:(0,B.getLastAgent)()})))}},{key:"renderScrollToForm",value:function(){const e=(0,q.getFormMessage)();if(!this.props.isIntroduced&&e)return c.default.createElement(U.default,{hide:this.state.hideScrollButton,onClick:this.scrollToForm.bind(this),icon:"1f44b-1f3fb",text:(0,R.default)("lblIntroduceRequest")});{const e=(0,q.getRateFormMessage)();if(e){var t,a;const n=null===(t=e.body)||void 0===t?void 0:t.submited,r=null===(a=e.body)||void 0===a?void 0:a.closed;return c.default.createElement(U.default,{hide:!!(this.state.hideScrollButton||n||r),onClick:t=>{t.preventDefault(),Z.messagesDispatchers.updateMessage({privateId:e.private_id},{created_ts:(new Date).getTime()}),O.default.sort(),this.scrollToBottom()},icon:"270d-1f3fb",text:(0,R.default)("rateFormTitle")})}}}},{key:"needShowMore",value:function(){return!!this._scroll&&(this._scroll&&this._scroll.base&&this._scroll.getScrollDiff()>=40&&0!=this._scroll.getScrollDiff())}},{key:"onScrollEnd",value:function(){const e={};this.needShowMore()?e.showMore=!0:(e.showMore=!1,e.showBadge=!1);const t=O.default.getFormMessage();if(this.props.isIntroduced||!t.length){const t=O.default.getMessagesByType(N.MessageType.RATE_FORM),a=T.default.get(k.Component.RATE_FORM);if(t.length&&a){const t=(0,L.isScrolledIntoView)(a,this._scroll);e.hideScrollButton=t}return void this.setState(e)}const a=T.default.get(k.Component.CHAT_INTRODUCE);if(a){const t=(0,L.isScrolledIntoView)(a,this._scroll);t!==this.state.hideScrollButton&&(e.hideScrollButton=t)}this.setState(e)}},{key:"onMoreClick",value:function(){this._scroll&&(this._scroll.setIm()),D.Monitoring.telemetry(A.TelemetryName.MORE_BTN_CLICK,{param1:(0,q.getProactive)().text?1:0})}},{key:"isShowAvatar",value:function(){return!!(this._scroll&&this._scroll.animated>0&&(0,B.getLastAgent)())}},{key:"onTransitionEnd",value:function(e,t){"transform"===e.propertyName&&0!==t&&(Q.log("Container animation end:",t),this.setState({diff:0},(()=>{this.scrollToBottom()})),this._scroll.animated=!1)}},{key:"getOffset",value:function(){let e=null;return this._scroll&&(e=(0,L.isNoScroll)(this._scroll,this._container)?`${-1*this.state.diff||0}px`:null),e}},{key:"getRenderData",value:function(){const e=this.getOffset();return this._scroll&&(this._scroll.animated=this.state.diff),{styles:{main:[{main:!0,__mobile:ee,__ad:(0,h.showAd)()},{bottom:`${this.getBottom(this.props.inputHeight)}px`,opacity:1}],wrap:[{wrap:!0}],container:[{container:!0,__tablet:m.default.tablet()||m.default.desktop()&&(0,g.isChatPage)()},{transform:this.state.diff?`translateY(${-1*this.state.diff}px)`:"translateY(0)",bottom:e||0,transition:0===this.state.diff?"none":"transform 0.2s cubic-bezier(0, 0.76, 0.28, 1)"}],avatarShadow:[{avatarShadow:!0,__mobile:ee,__show:this.isShowAvatar()},{m(this.p]},style:P.default}}},{key:"renderData",value:function(e,t){const a=E.default.bot_id>0,n=E.default.avfault.avatar_url,E.default.avatar_url):null;return c.default.createElement("jdiv",t.main,this.renderScrollToForm(),c.default.createElement("jdiv",(0,r.default)({},t.wrap,(0,G.onClickHandler)((e=>{(0,F.onWrapTouch)(e)})),{ref:e=>{this._main=e}}),c.default.createElement(W.default,{messagesGroups:this.state.messagesGroups,onMessagesAnimationEnd:(e,t)=>{this.onTransitionEnd(e,t)},onScrollEnd:(0,v.debounce)(this.onScrollEnd.bind(this),200),diff:this.state.diff,bottomOffset:this.getOffset()}),1!=_.default.typing_insight||ee?null:c.default.createElement(y.default,{show:this.props.agentTyping,isMobile:ee}),(0,h.showAd)()&&!ee?c.default.createElement(V.default,{type:"chat"}):null,c.default.createElement("jdiv",t.avatarShadow,a?c.default.createElement(z.default,{url:n}):c.default.createElement(j.default,{inChat:!0,dark:!0,isMobile:m.default.mobileOrTablet(),isTablet:m.default.tablet(),url:n})),c.default.createElement(H.default,{color:_.default.bubble_color,show:this.state.showMore,showBadge:this.state.showBadge,onClick:this.onMoreClick.bind(this)})))}}]),a}(p.default);t.default=te},70043:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=a(36113),o=n(a(45697)),i=n(a(94184)),u=a(47245),s=n(a(88155)),d=n(a(6131)),c=n(a(19955)),f=n(a(75686)),p=a(90991),m=a(81152),_=n(a(4855)),h=a(68403),g=a(49174),b=n(a(68168)),v=n(a(68531)),y=n(a(48333)),O=n(a(31385)),E=n(a(55961)),C=n(a(12822)),w=n(a(6313)),j=n(a(67250)),S=n(a(60936)),M=n(a(25117)),T=n(a(18277)),k=a(45482),P=n(a(95066)),x=n(a(26370)),R=n(a(67239));const N={[m.MessageType.MESSAGE]:v.default,[m.MessageType.PROACTIVE]:v.default,[m.MessageType.SEPARATOR]:b.default,[m.MessageType.INVOICE]:y.default,[m.MessageType.COBROWSE]:O.default,[m.MessageType.SYSTEM]:E.default,[m.MessageType.INVITE]:E.default,[m.MessageType.PREFORM]:E.default,[m.MessageType.SOCIAL]:C.default,[m.MessageType.MEDIA]:j.default,[m.MessageType.EMAIL]:w.default,[m.MessageType.FORM]:g.ContactForm,[m.MessageType.TEMPORARY]:S.default,[m.MessageType.FOR_TEST]:T.default,[m.MessageType.PRECHAT]:M.default,[m.MessageType.BOT]:v.default,[m.MessageType.LISTPICKER]:k.ListpickerWrap,[m.MessageType.WEB_RTC_CALL]:P.default,[m.MessageType.RATE_FORM]:x.default},I=_.default.name("MessagesPure"),D=e=>{let t=e.messagesGroups,a=e.onMessagesAnimationEnd,n=e.onScrollEnd,l=e.diff,o=e.bottomOffset;const _=c.default.mobileOrTablet()?40:30,lt)({[R.default.container]:!0,[R.default.__tablet]:c.default.tablet()});return r.default.createElement(s.default,{onScrollStop:(0,p.debounce)(n,200),className:R.default.scroll,autoHide:!0,scrollMarginTop:(0,h.showAd)()?_:0,railClass:R.default.rail,ref:e=>{e&&f.default.set(u.Component.SCROLL_CONTAINER,e)}},r.default.createElement("jdiv",{className:g,onTransitionEnd:e=>{a(e,l)},ref:e=>{e&&f.default.set(u.Component.MESSAGES_CONTAINER,e)},style:{transform:l?`translateY(${-1*l}px)`:"translateY(0)",bottom:o||0,transition:0===l?"none":"transform 0.2s cubic-bezier(0, 0.76, 0.28, 1)"}},t.map(((e,t)=>{const a=e[0]instanceof d.default?e[0].toJSON():e[0];if(a.type==m.MessageType.MEDIA&&a.body&&a.from_id&&a.body.type==m.MessageType.COBROWSE&&(a.type=m.MessageType.COBROWSE),!a.type)return;const n=N[a.type];return n?r.default.createElement(n,{messages:e,key:t}):void I.warn("Message type is not supported")}))))};D.propTypes={messagesGroups:o.default.array.isRequired,onMessagesAnimationEnd:o.default.func.isRequired,onScrollEnd:o.default.func.isRequired,diff:o.default.number,bottomOffset:o.default.string};var A=(0,l.connect)((e=>({messages:e.messages})),{})(D);t.default=A},8972:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=a(36113),o=n(a(45697)),i=n(a(66440));const u=e=>{let t=e.route,a=e.isOnline,n=e.isInDrag,l=e.isIntroduced,o=e.inputHeight,u=e.agentTyping,s=e.widgetHeight;return r.default.createElement(i.default,{route:t,isInDrag:n,isOnline:a,inputHeight:o,isIntroduced:l,agentTyping:u,widgetHeight:s})};u.propTypes={isOnline:o.default.bool,route:o.default.string,isIntroduced:o.default.bool,isInDrag:o.default.bool,inputHeight:o.default.number,agentTyping:o.default.bool,widgetHeight:o.default.string};var s=(0,l.connect)((e=>{const t=e.chats[e.chats.length?e.chats.length-1:0];return{isOnline:e.app.isOnline,route:e.app.route,isInDrag:e.app.isInDrag,agentTyping:!!t&&t.agentTyping,widgetHeight:e.position.height,isIntroduced:e.client.isIntroduced}}))(u);t.default=s},31385:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=j(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=n(a(94184)),i=n(a(45697)),u=n(a(3415)),s=n(a(84726)),d=n(a(19955)),c=n(a(39906)),f=a(54415),p=a(83170),m=a(21476),_=a(47060),h=n(a(14762)),g=n(a(4855)),b=n(a(73727)),v=n(a(21704)),y=n(a(30295)),O=a(71192),E=n(a(75686)),C=a(47245),w=n(a(91651));function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(j=function(e){return e?a:t})(e)}g.default.name("CobrowseMessage");const S=e=>{let t=e.messages;const a=t[0].toJSON();if(!a.from_id&&"highlight"!==a.body.type)return null;const n=(0,l.useState)(a.body.error),i=(0,r.default)(n,2),g=i[0],j=i[1],S=(0,l.useState)(!1),M=(0,r.default)(S,2),T=M[0],k=M[1],P=(0,l.useRef)(null),x=t[0].toJSON(),R=x.updated_ts,N=(0,y.default)(R||x.created_ts,"dd.mm.yy H:MM:ss");let I=x.body.hash,D=x.body.page_url,A=null;x.from_id&&(A=x.from_id,x.text=x.body.text,I=x.body.address,D=x.body.url);const B=e=>{e||(t[0]&&t[0].set("body.error",!0),j(!0))},L=e=>{g||(e.preventDefault(),(()=>{let e;if(A){const t=h.default.getAgentById(A);t&&(e=t.toJSON())}const t=()=>{u.default.getCobrowseData(I,D,x.text,e,B)};d.default.mobileOrTablet()?(m.Router.next(_.RouterEvent.CloseWindow),setTimeout((()=>{t()}),1e3)):t()})(),f.Monitoring.telemetry(p.TelemetryName.COBROWSE_CLICK_BUTTON))},F=e=>{const t=E.default.getComponent(C.Component.SCROLL_CONTAINER);e===a.msg_id&&(t.scrollTop(P.current.offsetParent.offsetTop+P.current.offsetTop-30),k(!0),setTimeout((()=>{k(!1)}),500))};return(0,l.useEffect)((()=>{const e=O.QuoteEventEmitter.addListener(O.QuoteEventClick,F);return()=>e.remove()}),[a.msg_id]),l.default.createElement(c.default,{messages:t},l.default.createElement("jdiv",{ref:P,className:(0,o.default)({[w.default.main]:!0,[w.default["__"+b.default.bubble_color||0]]:!0,[w.default.__mobile]:d.default.mobileOrTablet(),[w.default.__flash]:T}),title:N},l.default.createElement("jdiv",{className:w.default.text},x.text?x.text:(0,s.default)("lblDefaultCobrowseComment")),l.default.createElement("jdiv",{className:(0,o.default)({[w.default.showBtn]:!0,[w.default.__disabled]:g}),onPointerDown:L,onTouchStart:e=>{e.preventDefault(),d.default.isPointerEnabled()||L(e)},title:(0,s.default)("lblDefaultCobrowseComment")},(0,s.default)("lblView")),g?l.default.createElement("jdiv",{className:w.default.error},(0,s.default)("cobrowseError")):null,l.default.createElement("jdiv",{className:w.default.time},(0,y.default)(R||x.created_ts,"H:MM"))),Boolean(b.default.enable_reply)&&a.msg_id&&l.default.createElement(v.default,{msgId:a.msg_id}))};S.propTypes={messages:i.default.any};var M=l.default.memo(S);t.default=M},86555:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(98661)),o=n(a(45697)),i=n(a(94184)),u=a(47713),s=a(2535),d=n(a(32083)),c=n(a(43569)),f=n(a(84726)),p=n(a(13114)),m=n(a(6139)),_=n(a(46809)),h=n(a(40704)),g=n(a(98960));const b=e=>{let t=e.message,a=e.color,n=e.size,o=e.initialEmail,b=e.lineHeight,v=e.textSize,y=e.isIos,O=e.buttonText,E=e.isSuccessSend,C=e.onSuccessSubmit;const w=(0,s.useForm)({initialValues:{email:o},validate:e=>({email:!g.default.email(e.email)&&(0,f.default)("invalid_email")}),focusOnFirstError:!0}),j=w.formRef,S=w.values,M=w.getInputProps,T=w.isSubmitted,k=w.onSubmit,P=M("email"),x=P.attrs,R=P.state,N=T&&!R.isDirty,I=R.isValid?"iconValid":"iconWarning",D=R.isDirty||!T?null:a,A=k(C),B={lineHeight:y?b:null,"-webkit-text-size-adjust":y?v:"none"};return l.default.createElement(p.default,{padding:"md",radius:"md",addClassname:(0,i.default)({[_.default.wrapper]:!0,[_.default["__"+a]]:!0})},E&&l.default.createElement("jdiv",{className:_.default.text,style:B},(0,f.default)("social_success_email").replace("_EMAIL_",S.email)),!E&&l.default.createElement(l.default.Fragment,null,l.default.createElement("jdiv",{className:_.default.text,style:B},t),l.default.createElement(m.default,{component:"jdiv",h:"xs"}),l.default.createElement("form",{ref:j,className:_.default.form},l.default.createElement(c.default,(0,r.default)({color:D,size:n,name:"email",type:"text",maxLength:255,autocomplete:"email",label:(0,f.default)("lblYourEmail"),variant:"inset",fontSize:y?16:15,lineHeight:y?"normal":null,rightSectionWidth:32,rightSection:N&&l.default.createElement(h.default,{iconName:I,className:_.default.validateIcon})},x,{onKeyDown:e=>"Enter"===e.code&&A(e)})),l.default.createElement(m.default,{component:"jdiv",h:"md"}),l.default.createElement(d.default,(0,r.default)({component:"jdiv",type:"submit",color:a,size:n,radius:n,fullWidth:!0},(0,u.onClickHandler)(A)),O))))};b.propTypes={message:o.default.string,color:o.default.string,size:o.default.string,initialEmail:o.default.string,lineHeight:o.default.string,textSize:o.default.string,isIos:o.default.bool.isRequired,buttonText:o.default.string.isRequired,isSuccessSend:o.default.bool.isRequired,onSuccessSubmit:o.default.func.isRequired},b.defaultProps={initialEmail:""};var v=b;t.default=v},6313:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=a(36113),i=n(a(45697)),u=a(26932),s=a(80598),d=a(92560),c=a(54415),f=a(21476),p=a(47060),m=a(87692),_=a(45959),h=a(83170),g=a(49862),b=n(a(138)),v=n(a(19955)),y=n(a(84726)),O=n(a(14264)),E=a(42601),C=n(a(73727)),w=a(79523),j=n(a(86555));function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(S=function(e){return e?a:t})(e)}const M=e=>{let t=e.messages;const a=(0,o.useSelector)(m.selectBubbleColor),n=ientEmail),i=(0,o.useSelector)(E.selectZoom).app,S=(0,o.useSelector)(_.selectEulaAccepted),M=(0,o.useSelector)(m.selectEulaEnabled),T=(0,o.useSelector)(_.selectClientName),k=(0,o.useSelector)(_.selectClientPhone),P=(0,o.useSelector)(_.selectDescription),x=(0,l.useState)(!1),R=(0,r.default)(x,2),N=R[0],I=R[1],D=v.default.ios();return(0,l.useEffect)((function(){n&&S&&!N&&I(!0)}),[n,S,N]),(0,g.useDidUpdate)((function(){w.introduceActions.setClientContactInfo({client_name:T,phone:k,email:n,description:P,accept_eula:C.default.eula?S:null},!0),O.default.trigger("update"),b.default.trackSystemMessageEmailSubmitted(),c.Monitoring.telemetry(h.TelemetryName.EMAIL_MESSAGE_SUBMITTED)}),[N]),(0,d.isEmpty)(t)?null:l.default.createElement(j.default,{message:t[0].toJSON().text,color:a,size:"sm",initialEmail:n,lineHeight:(0,s.getLineHeight)(1.5,i),textSize:(0,s.getTextSize)(i),isIos:D,buttonText:M&&!S?(0,y.default)("continue"):(0,y.default)("lblSend"),isSuccessSend:N,onSuccessSubmit:e=>{u.clientDispatchers.setClientEmail(e.email),M&&!S?f.Router.next(p.RouterEvent.Submit,{context:"messageEmail"}):I(!0)}})};M.propTypes={messages:i.default.arrayOf(i.default.object)};var T=M;t.default=T},48333:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(a(98661)),l=n(a(45697)),o=n(a(7900));function i(e){let t=e.messages;const a=t[0].toJSON().body;return"tinkoffInvoice"===(null==a?void 0:a.type)?r.default.createElement(o.default,{messages:t}):null}i.propTypes={messages:l.default.arrayOf(l.default.object)}},7900:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var r=n(a(98661)),l=n(a(45697)),o=n(a(94184)),i=n(a(39906)),u=n(a(30295)),s=n(a(84726)),d=n(a(64545)),c=n(a(40704));function f(e){let t=e.messages;const a=t[0].toJSON(),n=a.body,l=a.created_ts,f=(0,o.default)({[d.default.main]:!0,[d.default._tinkoff]:!0}),p=(0,o.default)({[d.default.message]:!0,[d.default.__success]:"SUCCESS"===n.status});return r.default.createElement(i.default,{messages:t},r.default.createElement("jdiv",{className:f,title:(0,u.default)(l,"dd.mm.yy H:MM:ss")},r.default.createElement("jdiv",{className:p},r.default.createElement("jdiv",{className:d.default.successIcon}),r.default.createElement("jdiv",{className:d.default.info},r.default.createElement("jdiv",{className:d.default.text},(0,s.default)("paymentsInvoice"),n.invoice_id,":"),r.default.createElement("jdiv",{className:d.default.productName},n.comment,","," "),r.default.createElement("jdiv",{className:d.default.amountWrap},r.default.createElement("jdiv",{className:d.default.amount}," ",n.amount),r.default.createElement(c.default,{className:d.default.rubleIcon,color:"#222d38",iconName:"icon-ruble"})),r.default.createElement("jdiv",{className:d.default.successText},(0,s.default)("paymentsSuccess"))),r.default.createElement("a",{href:n.payment_url,className:d.default.actionBtn,"data-css":"notreset",rel:"nofollow noopener noreferrer",target:"_blank",title:(0,s.default)("paymentsPay")},r.default.createElement("jdiv",{className:d.default.actionText},(0,s.default)("paymentsPay"))))))}f.propTypes={messages:l.default.arrayOf(l.default.object)}},19579:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.ListButton=void 0;var r=n(a(23101)),l=n(a(67375)),o=n(a(98661)),i=a(30396),u=n(a(94184)),s=n(a(45697)),d=n(a(77335)),c=a(90361),f=a(57930),p=n(a(58621)),m=a(80598),_=a(43417),h=a(24785),g=n(a(66265));const b=e=>{let t=e.text,a=e.title,n=e.url,s=e.answerId,b=e.onButtonClick,v=e.bubbleColor,y=e.index,O=e.isIos;const E=(0,i.useState)(!1),C=(0,l.default)(E,2),w=C[0],j=C[1],S=(0,i.useState)(!1),M=(0,l.default)(S,2),T=M[0],k=M[1],P=(0,m.getThemeColor)(v),d.default.button]:!0,[d.default.__bot]:!0,[d.default.__ios]:O,[d.default.__withLink]:!!n,[g.default.__disabled]:null!==s});return o.default.createElement("jdiv",(0,r.default)({className:x,title:`${a||""} ${n||""}`,onMouseOver:()=>j(!0),onMouseLeave:()=>j(!1),onFocus:()=>j(!0),onBlur:()=>j(!1),onTouchMove:()=>k(!0),onTouchStart:()=>{j(!0),k(!1)},onTouchCancel:()=>{j(!1),k(!1)}},(0,_.onClickHandler)(b,!0,!0,T),(0,c.withLocator)(f.Locator.PRECHAT_BUTTON+y)),o.default.createElement("jdiv",{dangerouslySetInnerHTML:{__html:t}}),n?o.default.createElement("jdiv",{className:g.default.linkIcon},o.default.createElement(h.SvgIcon,{icon:p.default,color:w?"#fff":P,className:g.default.icon})):null)};t.ListButton=b,b.propTypes={data:s.default.object,onClick:s.default.func,bubbleColor:s.default.string,text:s.default.string,title:s.default.string,url:s.default.string,answerId:s.default.number,onButtonClick:s.default.func,index:s.default.number,isIos:s.default.bool}},63711:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.Listpicker=void 0;var r=n(a(98661)),l=n(a(94184)),o=n(a(45697)),i=n(a(77335)),u=n(a(4855)),s=a(27523),d=a(33965),c=n(a(19955)),f=a(15961),p=a(19579),m=n(a(66265));u.default.name("Listpicker");const _=e=>{let t=e.data,a=e.onClick,n=e.bubbleColor,o=e.isDisabledEmoji;if((0,f.useErrorCatcher)("Listpicker"),!t)return;const u=(0,l.default)({[i.default.main]:!0,[i.default["__"+n]]:!0}),_=t.answer_id||null;return r.default.createElement("jdiv",{className:u},r.default.createElement("jdiv",{className:m.default.buttonsWrap},t.keyboard.map(((e,t)=>{const l=e.url,i=t+1;return r.default.createElement(p.ListButton,{text:(u=e.text,o?(0,d.escape)(u):(0,s.replaceEmoji)(u)),title:e.title,url:l,answerId:_,onButtonClick:t=>{_||a(t,i,e.text,l)},bubbleColor:n,key:i,index:i,isIos:c.default.mobileOrTablet()&&c.default.ios()});var u}))))};t.Listpicker=_,_.propTypes={data:o.default.object,onClick:o.default.func,bubbleColor:o.default.string,isDisabledEmoji:o.default.bool},_.displayName="Listpicker"},45482:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.ListpickerWrap=v;var r=n(a(98661)),l=a(36113),o=n(a(45697)),i=a(89177),u=a(65465),s=a(54415),d=a(83170),c=n(a(19955)),f=a(63711),p=a(87692),m=n(a(138)),_=a(23267),h=n(a(4855)),g=a(15961);const b=h.default.name("ListpickerWrap");function v(e){let t=e.messages;(0,g.useErrorCatcher)("ListpickerWrap");const a=(0,l.useSelector)(p.selectBubbleColor),n=(0,l.useSelector)(p.selectDisableEmoji),o=t[0],h=o.get("msg_id"),v=o.get("body");if(!v){try{s.Monitoring.telemetryOnce("bot_listpicker_error",{param1:JSON.stringify(o.toJSON())})}catch(e){b.warn(e)}return}return r.default.createElement(f.Listpicker,{data:v,onClick:(e,t,a,n)=>{if(e.preventDefault(),n){(0,_.getPageWindow)().open(n,"_blank")||b.warn("cant open url",n)}else u.messageActions.setListpickerAnswer(h,t),u.messageActions.sendClientMessage({text:a}),c.default.mobileOrTablet()||(0,i.afterEmojiInserted)();s.Monitoring.telemetry(d.TelemetryName.BOT_BUTTON_CLICK,{param1:n?"url_open":"send_message"}),m.default.trackBotButtonClick(n||a)},bubbleColor:a,isDisabledEmoji:n})}v.propTypes={messages:o.default.arrayOf(o.default.object)}},67250:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(80833)),o=n(a(91471));var i=r.default.memo((e=>{if(e.messages&&e.messages[0]){const t=e.messages[0];if(t.get("body")&&t.get("body").status){const a=t.toJSON();return r.default.createElement(o.default,{messages:e.messages,status:a.body.status,messagePrivateId:a.private_id})}return r.default.createElement(l.default,e)}}));t.default=i},80833:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=a(36113),o=n(a(94184)),i=n(a(45697)),u=a(42958),s=a(77294),d=a(48785),c=a(95140),f=a(76624),p=a(87692),m=a(25373),_=n(a(39906)),h=n(a(96150)),g=n(a(30295)),b=n(a(19955)),v=n(a(4867)),y=n(a(39554)),O=n(a(63960));const E=e=>{const t=e.messages[0],a=t.toJSON(),n=a.body,i=a.created_ts,E=(0,m.useEnhanced)(t),C=E.mediaState,w=E.loaderRef,j=E.abortUploading,S=(0,l.useSelector)(p.selectBubbleColor);function M(e){e.preventDefault(),window.open(e.currentTarget.getAttribute("href"))}const T=C.file.file_url||n.file_url||n.file||n.name,k=(0,c.messageInitiator)(t).fromAgent,P=(x=T,R=n.type,x?(0,s.isNewMedia)(x)?C.complete&&["photo"].includes(R):C.complete&&(0,s.isPreviewImage)(x):((0,c.reportName)(t),!1));var x,R;const N=C.file.file_name||n.file_name||n.name,I=k?"grey":S;const D=(0,g.default)(i,"dd.mm.yy H:MM:ss"),A=C.url||e.url,B=n.thumb||C.imagePreview||A,L=k?_.default:h.default,F=(0,o.default)({[O.default.main]:!0,[O.default["_"+I]]:!0,[O.default._mobile]:b.default.mobileOrTablet(),[O.default._client]:!k,[O.default._preview]:P});return r.default.createElement(L,{messages:e.messages,isPreview:P},r.default.createElement("jdiv",{className:F,title:D},P?r.default.createElement(f.Preview,{message:t,name:N,src:B,href:A,isAgentMessage:k,onClick:M}):r.default.createElement(d.Loader,{ref:w,name:N,data:C,message:t,isFromAgent:k,color:I,handleAbort:j,handleClick:M})),(0,u.isErrorMessage)(t)&&r.default.createElement(y.default,{messages:e.messages,messagesStore:v.default}))};E.propTypes={messages:i.default.arrayOf(i.default.instanceOf(v.default)),url:i.default.string};var C=E;t.default=C},48785:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var r=n(a(23101)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=n(a(94184)),i=n(a(45697)),u=a(77294),s=a(58271)(a(46544)),p=a(90906),m=n(a(4867)),_=a(47713),h=n(a(63960));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}const b=(0,l.forwardRef)(((e,t)=>{let a=e.color,n=e.data,i=e.message,m=e.isFromAgent,g=e.name,b=e.handleAbort,v=e.handleClick;const y=n.uploading&&n.loaded>1,O=e=>({display:e?"block":"none"}),E={icon:(0,u.getIconColor)(a),circle:(0,u.getCircleColor)(a)},C={iconMain:{cursor:n.uploading?"pointer":"default"},iconError:O(n.error),iconUpload:O(n.complete),loader:O(n.uploading)},w={iconCancel:(0,o.default)([h.default.iconUpload],[h.default.iconLoading]),iconError:(0,o.default)([h.default.iconError]),iconUpload:(0,o.default)([h.default.iconUpload]),mediaComplete:(0,o.default)([h.default.mediaComplete],{[h.default._agent]:m})};return l.default.createElement(l.default.Fragment,null,l.default.createElement("jdiv",(0,r.default)({className:h.default.mediaIcon},n.complete?null:(0,_.onClickHandler)(b,!0,!0),{sC.iconMain}),l.default.createElement("jdiv",{className:h.default.loaderCont,style:C.loader},l.default.createElement("svg",{width:"42",height:"42",viewBox:"0 0 21 21",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},l.default.createElement("circle",{r:"18",cx:"21",cy:"21",fill:"#ffffff",strokeDasharray:"119.38",strokeDashoffset:"0"}),l.default.createElement("circle",{ref:e=>e,className:h.default.loaderBar,r:"18",cx:"21",cy:"21",fill:"transparent",stroke:E.circle,strokeDasharray:"119.38",strokeDashoffset:"0"})),l.default.createElement(c.default,{color:E.icon,iconName:"icon-cancel",className:w.iconCancel})),l.default.createElement("jdiv",null,!n.error&&l.default.createElement(c.default,{color:E.icon,iconName:`icon-${n.type}`,className:w.iconUpload,style:C.iconUpload}),!m&&l.default.createElement(c.default,{color:E.icon,iconName:"icon-error",className:w.iconError,style:C.iconError}))),l.default.createElement("jdiv",{className:h.default.mediaText},l.default.createElement("jdiv",{className:h.default.mediaFname,title:g},g),y&&l.default.createElement("jdiv",{className:h.default.mediaPerc},(0,s.fileSize)(n.loaded)||""," /"," ",(0,s.fileSize)(n.total)||""),n.complete?l.default.createElement("jdiv",{className:w.mediaComplete},(0,s.fileSize)(n.total)," ",l.default.createElement("a",(0,r.default)({href:(0,u.getUrl)(n.url)},(0,_.onClickHandler)(v,!0,!0),{target:"_blank",rel:"noopener noreferrer"}),(0,d.default)("file_upl_download"))):null,n.error&&l.default.createElement("jdiv",{className:h.default.mediaComplete},n.error)),l.default.createElement(f.default,{className:h.default.time,message:i,colorSet:p.COLORS_SET.DARK,isRenderStatus:!m}))}));t.Loader=b,b.displayName="Loader",b.propTypes={color:i.default.string,data:i.default.object,message:i.default.instanceOf(m.default),isFromAgent:i.default.bool,name:i.default.string,handleAbort:i.default.func,handleClick:i.default.func}},76624:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.Preview=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),l=n(a(45697)),o=a(77294),i=a(95140),u=n(a(19955)),s=n(a(4867)),d=n(a(46544)),c=a(90906),f=n(a(63960));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}const m=e=>{let t=e.message,a=e.name,n=e.src,l=e.href,s=e.isAgentMessage,p=e.onClick;const m=t.toJSON().body,_=(0,r.useRef)(n),h=(0,o.getSize)(m),g=(0,i.isGif)({mediaExt:m.file_url||m.file||m.name,message:t});return(0,r.useEffect)((function(){if((0,o.isNewMedia)(_.current)){const e=(0,o.getSize)(m);m.width<209&&(e.width=m.width,e.height=null),_.current=`${m.file}?thumb&width=${e.width}`}}),[_,m]),r.default.createElement("jdiv",{className:s?"":f.default.mediaWrapper},r.default.createElement("a",{className:f.default.previewLink,href:l,onPointerUp:p,onTouchStart:e=>{e.preventDefault(),u.default.isPointerEnabled()||p(e)},title:a,target:"_blank",rel:"nofollow noopener noreferrer"},r.default.createElement("img",{width:h.width,height:h.height,src:_.current,title:a,className:f.default.previewMediaPhoto,loading:"lazy"}),g&&r.default.createElement("jdiv",{className:f.default.overlayText},"GIF"),r.default.createElement(d.default,{className:f.default.time,message:t,colorSet:c.COLORS_SET.DARK,isRenderStatus:!s})))};t.Preview=m,m.propTypes={message:l.default.instanceOf(s.default),name:l.default.string,src:l.default.string,href:l.default.string,isAgentMessage:l.default.bool,onClick:l.default.func}},95140:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialMediaState=function(e){const t=e.sign,a=e.error,r=e.file_url,l=e.file,o=e.icon_type,i=e.type,u=e.mime_type,s=e.size,d=e.file_size,c=e.thumb;let f=!1;(t||a)&&(f=!1);(r||l)&&(f=!0);const p=!!f&&(r||l),m=!!f&&(o||i||(0,n.detectType)(u));return{file:!1,url:p,type:m,uploading:!f,complete:f,percentComplete:0,loaded:0,total:f?(s||d)>>0:0,error:!1,imagePreview:null!=c?c:null}},t.isGif=function(e){let t=e.mediaExt,a=e.message;if(!t)return o(a),!1;const n=t.toLowerCase();return/\.(gif)$/i.test(n)},t.messageInitiator=function(e){const t=e.toJSON();return{fromAgent:(0,r.isAgentMessage)(t)}},t.reportName=o;var n=a(83778),r=a(77294),l=a(54415);function o(e){const t=e.toJSON();l.Monitoring.telemetryOnce("media_data_name",{param1:JSON.stringify(t||null)})}},25373:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useEnhanced=void 0;var r=n(a(61125)),l=n(a(67375)),o=a(98661),i=a(95140),u=n(a(84726));function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getefineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).for){Object.defineProperty(e,t,Object.getOwneturn e}n(a(4855)).default.name("MediaMessage");const c={uploading:null,progress:null,complete:null,error:null};t.useEnhanced t=e.toJSON(),a=t.body,n=t.private_id,r=(0,o.useState)((()=>(0,i.initialMediaState)(a))),s=(0,l.default)(r,2),f=s[0],p=s[1],m=(0,o.useRef)();function _(e){p((t=>d(d({},t),e)))}function h(){Object.values(c).forEach((e=>null==e?void 0:e.remove()))}return(0,o.useEffect)((function(){if(!f.complete)return!a.name||a.error?_({file:a,uploading:!1,complete:!1,error:a.error}):()=>{h()}}),[a,n,f.complete]),{mediaState:f,loaderRef:m,abortUploading:function(){f.uploading&&(_({file:{},uploading:!1,complete:!1,error:(0,u.default)("file_upl_cancel")}),h())}}}},2602:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(45697)),o=a(90906),i=a(81152),u=a(77294),s=n(a(46544)),d=n(a(79325)),c=n(a(63960)),f=n(a(4387)),p=a(95911),m=a(54415),_=a(83170);function h(e){let t=e.message,a=e.url,n=e.color,l=e.isMobile,h=e.isFromAgentMessage,g=e.onError,b=e.onCancel;const v=t.body,y=v.file_name,O=v.status||i.MediaStatus.COMPLETE,E=v.file_size,C=v.loadedSize,w=v.type,j=v.error,S=O===i.MediaStatus.UPLOADING,M=O===i.MediaStatus.COMPLETE,T=!!j||O===i.MediaStatus.ERROR||O===i.MediaStatus.EXPIRED;return r.default.createElement("jdiv",{className:c.default.loaderInner},r.default.createElement(d.default,{color:n,totalSize:E,loadedSize:C,mediaType:w,isUploading:S,isComplete:M,isError:T,onClick:b}),r.default.createElement(f.default,{url:a,title:y,totalSize:E,loadedSize:C,error:j,isUploading:S,isComplete:M,isError:T,isMobile:l,isFromAgentMessage:h,onClick:()=>{l||p.xhrRequest.head(a,((e,t)=>{if(e)return g(e.status),void m.Monitoring.telemetry(_.TelemetryName.DOWNLOAD_MEDIA_CLICK,{param1:"error",param2:e.status});window.open((0,u.getUrl)(a),"_blank"),m.Monitoring.telemetry(_.TelemetryName.DOWNLOAD_MEDIA_CLICK,{param1:"success",param2:t.status})}))}}),r.default.createElement(s.default,{className:c.default.time,isRenderStatus:!h,message:t,colorSet:o.COLORS_SET.DARK}))}h.propTypes={message:l.default.object.isRequired,color:l.default.string.isRequired,isMobile:l.default.bool.isRequired,url:l.default.string,onError:l.default.func.isRequired,onCancel:l.default.func.isRequired};var g=h;t.default=g},79325:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),l=n(a(94184)),o=n(a(45697)),i=a(77294),u=n(a(63960)),s=n(a(40704)),d=n(a(98132));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const f=e=>{let t=e.color,a=e.mediaType,n=e.totalSize,o=e.loadedSize,c=e.isError,f=e.isUploading,p=e.isComplete,m=e.onClick;const _=(0,r.useRef)(null),h=(0,i.getIconName)(a),g=(0,i.getIconColor)(t);(0,r.useEffect)((function(){o>=0&&(0,i.setSvgProgress)(p,_,n,o)}),[p,o,n]);const b=(0,l.default)({[u.default.mediaIcon]:!0,[u.default._uploading]:f}),v=(0,l.default)({[u.default.loaderCont]:!0,[u.default._uploading]:f}),y=(0,l.default)({[u.default.iconUpload]:!0,[u.default.iconLoading]:!0}),O=(0,l.default)({[u.default.iconUpload]:!0,[u.default._hidden]:!p}),E=(0,l.default)({[u.default.iconError]:!0,[u.default._hidden]:!c});return r.default.createElement("jdiv",{className:b,onClick:f?m:null},r.default.createElement("jdiv",{ref:_,className:v},r.default.createElement(d.default,{color:t,loaderBarStyle:u.default.loaderBar}),r.default.createElement(s.default,{iconName:"icon-cancel",className:y,color:g})),r.default.createElement("jdiv",null,c?r.default.createElement(s.default,{iconName:"icon-error",className:E,color:g}):r.default.createElement(s.default,{iconName:h,className:O,color:g})))};f.propTypes={color:o.default.string.isRequired,isComplete:o.default.bool.isRequired,isError:o.default.bool.isRequired,isUploading:o.default.bool.isRequired,mediaType:o.default.string.isRequired,totalSize:o.default.number,loadedSize:o.default.number,onClick:o.default.func.isRequired};var p=f;t.default=p},4387:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(98661)),o=n(a(45697)),i=n(a(94184)),u=a(58271),s=a(47713),d=n(a(84726)),c=n(a(63960));const f=e=>{let t=e.url,a=e.title,n=e.totalSize,o=e.loadedSize,f=e.isUploading,p=e.isError,m=e.isComplete,_=e.isMobile,h=e.isFromAgentMessage,g=e.error,b=e.onClick;const v=(0,u.fileSize)(o),y=(0,u.fileSize)(n),O=(0,i.default)({[c.default.mediaComplete]:!0,[c.default._agent]:h});return l.default.createElement("jdiv",{className:c.default.mediaText},l.default.createElement("jdiv",{className:c.default.mediaFname,title:a},a),p&&l.default.createElement("jdiv",{className:c.default.mediaComplete},g),f&&l.default.createElement("jdiv",{className:c.default.mediaPerc},n&&l.default.createElement(l.default.Fragment,null,v," / ",y)),m&&l.default.createElement("jdiv",{className:O},y," ",l.default.createElement("a",(0,r.default)({href:t,target:"_blank",rel:"noopener noreferrer"},(0,s.onClickHandler)(b,!0,!_)),(0,d.default)("file_upl_download"))))};f.propTypes={title:o.default.string.isRequired,isUploading:o.default.bool.isRequired,isError:o.default.bool.isRequired,isComplete:o.default.bool.isRequired,isMobile:o.default.bool.isRequired,isFromAgentMessage:o.default.bool.isRequired,url:o.default.string,totalSize:o.default.number,loadedSize:o.default.number,error:o.default.string,onClick:o.default.func.isRequired};var p=f;t.default=p},29043:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(45697)),o=a(90906),i=a(75901),u=n(a(46544)),s=n(a(63960));const d=e=>{let t=e.message,a=e.isFromAgentMessage;return r.default.createElement("jdiv",{className:s.default.locationContainer},r.default.createElement("jdiv",{className:s.default.mediaFname},"Location"),r.default.createElement("jdiv",{className:s.default.locationLink,dangerouslySetInnerHTML:{__html:(0,i.formatText)(t.text)}}),r.default.createElement(u.default,{className:s.default.time,isRenderStatus:!a,message:t,colorSet:o.COLORS_SET.DARK}))};d.propTypes={message:l.default.object.isRequired,isFromAgentMessage:l.default.bool.isRequired};var c=d;t.default=c},91471:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(61125)),l=n(a(67375)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),i=a(36113),u=n(a(45697)),s=a(81152),d=a(26932),c=a(54415),f=a(87692),p=a(66311),m=a(63664),_=n(a(19955)),h=n(a(84726)),g=n(a(30679));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,r.default)riptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){let t=e.messages,a=e.messagePrivateId;(0,m.useErrorCatcher)(O.displayedName);const n=(0,i.useSelector)(f.selectBubbleColor),r=(0,i.useSelectoryPrivateId)(e,a))),u=(0,o.useState)(!1),b=(0,l.default)(u,2),v=b[0],E=b[1];function C(e,t){d.messagesDispatchers.updateMessageBody(a,y(y({},r.body),{},{status:t||s.MediaStatus.ERROR,error:e}))}return r&&r.body?o.default.createElement(g.default,{message:r,storedMessages:t,bubbleColor:n,isMobile:_.default.mobileOrTablet(),isPreviewError:v,onPreviewError:function(){return E(!0)},onCancelError:function(){return C((0,h.default)("file_upl_cancel"),s.MediaStatus.ERROR)},onUploadError:function(e){return 401===e?C((0,h.default)("file_upl_expired"),s.MediaStatus.EXPIRED):C((0,h.default)("file_upl_error"),s.MediaStatus.ERROR)}}):(c.Monitoring.telemetryOnce("media_data_name",{param1:a,param2:JSON.stringify(t),param3:JSON.stringify(r)}),null)}O.displayedName="MediaMessageContainer",O.propTypes={messages:u.default.arrayOf(u.default.object).isRequired,messagePrivateId:u.default.string.isRequired};var E=O;t.default=E},30679:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=k(a(98661)),o=n(a(94184)),i=n(a(45697)),u=a(89334),s=a(77294),d=a(81152),c=n(a(39906)),f=n(a(96150)),p=n(a(30295)),m=n(a(2602)),_=n(a(11502)),h=n(a(63960)),g=n(a(29043)),b=n(a(4659)),v=n(a(56378)),y=n(a(47532)),O=a(97615),E=n(a(21704)),C=n(a(1039)),w=n(a(32138)),j=n(a(75686)),S=a(47245),M=k(a(71192));function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}return n.default=e,a&&a.set(e,n),n}function P(e){let t=e.message,a=e.storedMessages,n=e.bubbleColor,i=e.isMobile,T=e.isPreviewError,k=e.onPreviewError,P=e.onCancelError,x=e.onUploadError;const R=Boolean(C.default.enable_reply),N=t.body,I=N.file_url||N.file,D=N.status||d.MediaStatus.COMPLETE,A=N.thumb,B=N.type,L=N.mime_type,F=t.replied_message;if(!N)throw new Error("There is no message body");if(I&&!/^http?s:\/\//gi.test(I)&&!O.EnvironmentManager.isSelfhosted())throw new Error(`Bad url (xss: ${I})`);const z=D===d.MediaStatus.COMPLETE,H=B===d.MediaType.VIDEO,W=B===d.MediaType.PHOTO,q=B===d.MediaType.LOCATION,U=B===d.MediaType.VOICE,V=B===d.MediaType.STICKER,G=B===d.MediaType.RICH_LINK,Z=(0,s.isFileGif)(L),$=z&&(A&&W||H)&&!T,K=(0,s.isAgentMessage)(t),J=K?c.default:f.default,X=(0,p.default)(t.created_ts,"dd.mm.yy H:MM:ss"),Y=K?"grey":n,Q=(0,l.useState)(!1),ee=(0,r.default)(Q,2),te=ee[0],ae=ee[1],ne=(0,l.useRef)(null),re=(0,o.default)(h.default.main,{[h.default._mobile]:i,[h.default._client]:!K,[h.default._preview]:$,[h.default._notPreview]:!$,[h.default[`_${Y}`]]:!0,[h.default.__flash]:te,[h.default.__quote]:R&&F}),le=e=>{const a=j.default.getComponent(S.Component.SCROLL_CONTAINER);e===t.msg_id&&(a.scrollTop(ne.current.offsetParent.offsetTop+ne.current.offsetTop-30),ae(!0),setTimeout((()=>{ae(!1)}),400))};return(0,u.useEffectOnce)((()=>{const e=M.QuoteEventEmitter.addListener(M.QuoteEventClick,le);return()=>e.remove()})),G?l.default.createElement(J,{messages:a},l.default.createElement("jdiv",{className:re,title:X,ref:ne},l.default.createElement(y.default,{message:t,bubbleColor:n,isMobile:i}))):U?l.default.createElement(J,{messages:a},l.default.createElement("jdiv",{className:re,title:X,ref:ne},l.default.createElement(b.default,{message:t,url:I,color:Y,isMobile:i,isFromAgentMessage:K,onError:x,onCancel:P}))):V?l.default.createElement(J,{messages:a},l.default.createElement("jdiv",{className:re,title:X,ref:ne},l.default.createElement(v.default,{message:t,url:I,color:Y,isMobile:i,isFromAgentMessage:K,onError:x,onCancel:P}))):q?l.default.createElement(J,{messages:a},l.default.createElement("jdiv",{className:re,title:X,ref:ne},l.default.createElement(g.default,{message:t,isFromAgentMessage:K}))):l.default.createElement(J,{messages:a,isPreview:$},l.default.createElement("jdiv",{className:(0,o.default)(w.default.container,{[w.default.__client]:!K}),ref:ne},l.default.createElement("jdiv",{className:re,title:X},R&&F&&l.default.createElement(M.default,{msgId:F.msg_id,palette:K?M.PALETTE.DARK:M.PALETTE.LIGHT,isMediaMessage:!0}),$?l.default.createElement(_.default,{message:t,url:I,isVideo:H,isGif:Z,isFromAgentMessage:K,onError:k}):l.default.createElement(m.default,{message:t,url:I,color:Y,isMobile:i,isFromAgentMessage:K,onError:x,onCancel:P})),R&&t.msg_id&&l.default.createElement(E.default,{msgId:t.msg_id})))}P.propTypes={message:i.default.object.isRequired,storedMessages:i.default.arrayOf(i.default.object).isRequired,bubbleColor:i.default.string.isRequired,isMobile:i.default.bool.isRequired,isPreviewError:i.default.bool.isRequired,onPreviewError:i.default.func.isRequired,onCancelError:i.default.func.isRequired,onUploadError:i.default.func.isRequired};var x=P;t.default=x},54072:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=n(a(45697)),i=n(a(63960));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}const s=e=>{let t=e.file,a=e.onClick;const n=(0,l.useState)(!0),o=(0,r.default)(n,2),u=o[0],s=o[1];return u?l.default.createElement(l.default.Fragment,null,l.default.createElement("jdiv",{className:i.default.overlayText},"GIF"),l.default.createElement("jdiv",{className:i.default.playIcon,onClick:e=>{e.preventDefault(),a(t,(()=>s(!1)))}})):null};s.propTypes={file:o.default.string.isRequired,onClick:o.default.func.isRequired};var d=s;t.default=d},21964:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),l=n(a(45697)),o=a(52274),i=n(a(63960));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}const s=(0,r.forwardRef)(((e,t)=>{let a=e.src,n=e.title,l=e.size,u=e.isNewMedia,s=e.onError;const d=u?`${a}?thumb&width=${l.width||o.MAX_IMAGE_WIDTH}`:a;return r.default.createElement("img",{ref:t,className:i.default.previewMediaPhoto,title:n,src:d,width:l.width,height:l.height,loading:"lazy",onError:s})}));s.displayName="Image",s.propTypes={title:l.default.string.isRequired,src:l.default.string.isRequired,size:l.default.shape({width:l.default.oneOfType([l.default.string,l.default.number]),height:l.default.oneOfType([l.default.string,l.default.number])}).isRequired,isNewMedia:l.default.bool.isRequired,onError:l.default.func.isRequired};var d=s;t.default=d},11502:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),l=n(a(45697)),o=a(90906),i=a(81152),u=n(a(46544)),s=a(77294),d=n(a(54072)),c=n(a(21964)),f=n(a(63960)),p=n(a(63070));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(m=function(e){return e?a:t})(e)}function _(e){let t=e.message,a=e.url,n=e.isVideo,l=e.isGif,m=e.isFromAgentMessage,_=e.onError;const h=t.body,g=h.file,b=h.file_name,v=h.thumb,y=h.status||i.MediaStatus.COMPLETE,O=(0,r.useRef)(null),E=!(n||y===i.MediaStatus.EXPIRED),C=l&&!(null!=a&&a.endsWith("gif"));return r.default.createElement("jdiv",{className:m?f.default.mediaWrapper:f.default.clientMediaWrapper},r.default.createElement("a",{className:f.default.previewLink,href:g,title:b,target:"_blank",rel:"nofollow noopener noreferrer"},E&&r.default.createElement(c.default,{ref:O,src:g,title:b,size:(0,s.getSize)(h),isNewMedia:(0,s.isNewMedia)(v),onError:_}),C&&r.default.createElement(d.default,{file:g,onClick:(e,t)=>{null!=O&&O.current&&(O.current.src=e,t())}}),r.default.createElement(u.default,{className:f.default.time,isRenderStatus:!m,message:t,colorSet:o.COLORS_SET.DARK})),n&&r.default.createElement(p.default,{title:b,src:g,poster:v,onError:_}))}_.propTypes={message:l.default.object.isRequired,url:l.default.string,isVideo:l.default.bool.isRequired,isGif:l.default.bool.isRequired,isFromAgentMessage:l.default.bool.isRequired,onError:l.default.func.isRequired};var h=_;t.default=h},63070:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(45697));function o(e){let t=e.title,a=e.src,n=e.poster,l=e.onError;return r.default.createElement("video",{controls:!0,width:"250",preload:n?"none":null,poster:null!=n?n:null,title:t},r.default.createElement("source",{src:a,onError:l}),"Video is not supported.")}o.propTypes={title:l.default.string.isRequired,src:l.default.string.isRequired,poster:l.default.string,onError:l.default.func.isRequired};var i=o;t.default=i},47532:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(98661)),o=n(a(45697)),i=a(75901),u=a(47713),s=n(a(84726)),d=a(90361),c=n(a(30295)),f=n(a(32083)),p=a(16016),m=n(a(23360));function _(e){let t=e.message,a=e.bubbleColor;const n=t.body.title==t.body.text,o=(0,c.default)(t.created_ts,"H:MM");return l.default.createElement("jdiv",{className:m.default.linkWrap},l.default.createElement("jdiv",{className:m.default.link,dangerouslySetInnerHTML:{__html:(0,i.formatText)(t.body.url)}},t.body.url),l.default.createElement("jdiv",{className:m.default.contentWrap},l.default.createElement("a",{href:t.body.url,className:m.default.content,title:t.body.title,rel:"noopener noreferrer",target:"_blank"},t.body.title?l.default.createElement("jdiv",{className:m.default.title},(0,p.fn&&t.body.text?l.default.createElement("jdiv",{className:m.default.text},(0,p.formatTextLen)(t.body.text,128)):null,t.body.thumb?l.default.createElement("jdiv",{className:m.default.imgWrap},l.default.createElement("img",{src:t.body.thumb,title:t.body.title})):null)),l.default.createElement(f.default,(0,r.default)({},(0,u.onClickHandler)((()=>{window.open(t.body.url,"_blank")})),{title:(0,s.default)("lblView"),color:a,variant:"filled",size:"sm",radius:"md",component:"jdiv",fullWidth:!0}),(0,s.default)("lblView")),l.default.createElement("jdiv",(0,r.default)({className:m.default.time},(0,d.withLocator)("msg_agent_time")),o))}_.propTypes={message:o.default.object.isRequired,bubbleColor:o.default.string.isRequired};var h=_;t.default=h},56378:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(61125)),l=n(a(98661)),o=n(a(45697)),i=n(a(2602));function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const d=e=>{let t=e.message,a=e.url,n=e.color,r=e.isMobile,o=e.isFromAgentMessage,u=e.onError,d=e.onCancel;const c=s(s({},t),{},{body:s(s({},t.body),{},{file_name:"Sticker: "+t.body.file_name})});return l.default.createElement(i.default,{message:c,url:a,color:n,isMobile:r,isFromAgentMessage:o,onError:u,onCancel:d})};d.propTypes={message:o.default.object.isRequired,color:o.default.string.isRequired,isMobile:o.default.bool.isRequired,isFromAgentMessage:o.default.bool.isRequired,url:o.default.string,onError:o.default.func.isRequired,onCancel:o.default.func.isRequired};var c=d;t.default=c},4659:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(61125)),l=n(a(98661)),o=n(a(45697)),i=n(a(2602));function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e){let t=e.message,a=e.url,n=e.color,r=e.isMobile,o=e.isFromAgentMessage,u=e.onError,d=e.onCancel;const c=s(s({},t),{},{body:s(s({},t.body),{},{file_name:"Voice: "+t.body.file_name})});return l.default.createElement(i.default,{message:c,url:a,color:n,isMobile:r,isFromAgentMessage:o,onError:u,onCancel:d})}d.propTypes={message:o.default.object.isRequired,color:o.default.string.isRequired,isMobile:o.default.bool.isRequired,isFromAgentMessage:o.default.bool.isRequired,url:o.default.string,onError:o.default.func.isRequired,onCancel:o.default.func.isRequired};var c=d;t.default=c},98132:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(45697)),o=a(77294);const i=e=>{let t=e.color,a=void 0===t?"green":t,n=e.loaderBarStyle;return r.default.createElement(r.default.Fragment,null,r.default.createElement("svg",{width:"42",height:"42",viewPort:"0 0 21 21",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("circle",{r:"18",cx:"21",cy:"21",fill:"#ffffff",strokeDasharray:"119.38",strokeDashoffset:"0"}),r.default.createElement("circle",{className:n,r:"18",cx:"21",cy:"21",fill:"transparent",stroke:(0,o.getCircleColor)(a),strokeDasharray:"119.38",strokeDashoffset:"0"})))};i.propTypes={color:l.default.string,loaderBarStyle:l.default.string};var u=r.default.memo(i);t.default=u},18277:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var r=n(a(98661)),l=n(a(94184)),o=n(a(45697)),i=n(a(30295)),u=a(69845),s=a(75901),d=n(a(4867)),c=n(a(5107)),f=n(a(32138)),p=n(a(19955));function m(e){let t=e.messages;const a=(0,l.default)(f.default.main,f.default.__agent,{[f.default.__mobile]:p.default.mobileOrTablet()});return r.default.createElement(c.default,{messages:t},r.default.createElement("jdiv",{className:a},t.map(((e,t)=>{const a=e.toJSON(),n=a.created_ts,o=a.text,d=(0,i.default)(n,"dd.mm.yy H:MM:ss"),c={__html:(0,s.formatText)(o)},m=(0,l.default)(f.default.message,f.default.textWrap,{[f.default.__alone]:(0,u.checkAlone)(o),[f.default.__ios]:p.default.ios()});return r.default.createElement("jdiv",{key:t,className:m,title:d},r.default.createElement("jdiv",{className:f.default.text,dangerouslySetInnerHTML:c}))}))))}m.propTypes={messages:o.default.arrayOf(o.default.instanceOf(d.default))}},21704:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),l=n(a(94184)),o=n(a(45697)),i=a(26932),u=n(a(14264)),s=a(77294),d=a(47245),c=n(a(75686)),f=n(a(19955)),p=a(46831),m=n(a(84726)),_=a(54415),h=a(83170),g=n(a(64615));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}const v=e=>{let t=e.msgId,a=e.isAloneMessage;const n=u.default.getMessageById(t).toJSON(),o=(0,s.isAgentMessage)(n);return r.default.createElement("jdiv",{onClick:()=>{i.appDispatchers.setQuoteMsgId(t),c.default.get(d.Component.INPUT).focus(),_.Monitoring.telemetry(h.TelemetryName.REPLY_BUTTON_CLICK)},className:(0,l.default)(g.default.reply,{[g.default.__client]:!o,[g.default.__agent]:o,[g.default.__desktop]:f.default.desktop(),[g.default.__aloneReply]:a})},r.default.createElement(p.ReplyIcon,{className:g.default.replyIcon,title:(0,m.default)("lblReply")}))};v.propTypes={msgId:o.default.number.isRequired,isAloneMessage:o.default.bool};var y=(0,r.memo)(v);t.default=y},39554:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(67375)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=m(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),i=n(a(45697)),u=n(a(84726)),s=a(81152),d=n(a(4867)),c=a(47713),f=a(69029),p=n(a(33683));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(m=function(e){return e?a:t})(e)}const _=e=>{let t=e.message;const a=(0,f.useEnhanced)({message:t}),n=(0,l.default)(a,3),i=n[0],d=n[1],m=n[2],_=p.default.sendErrorMessage,h=p.default.resend;return i===s.MessageStatus.SENT?o.default.createElement("jdiv",{className:_},"..."):m?o.default.createElement("jdiv",{className:_},o.default.createElement("jdiv",null,`${(0,u.default)("error_send")}, `),o.default.createElement("jdiv",(0,r.default)({className:h},(0,c.onClickHandler)(d)),(0,u.default)("error_resend"))):o.default.createElement("jdiv",{className:_},o.default.createElement("jdiv",null,`${(0,u.default)("error_send")},`),o.default.createElement("jdiv",null,(0,u.default)("disconnect_msg").toLowerCase()))};_.propTypes={message:i.default.instanceOf(d.default)};var h=(0,o.memo)(_);t.default=h},69029:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useEnhanced=function(e){let t=e.message;const a=(0,l.useState)(t.get("status")),n=(0,r.default)(a,2),_=n[0],h=n[1],g=(0,m.useIsOnline)();return[_,async function(){h(i.MessageStabody,n=e.private_id,r=e.type,l=e.text;if(u.Monitoring.telemetry(s.TelemetryName.RESEND_CLICK),r===i.MessageType.MEDIA){const e=(0,o.getMediaData)(t).media,r=(0,c.getClient)().departmentId,i=a.is_prechat,u={name:"client_message",message:l,private_id:n,media:e};r&&(u.widget_department_id=r),i&&(u.is_prechat_btn=!0),(0,o.sendMedia)(u),setTimeout((()=>{(0,o.checkForDelivered)(t)}),Timeouts.MESSAGE_SEND_ERROR_TIMEOUT)}else if(d.messageActions.sendClientMessage({text:l,privateId:n}),(await d.messageActions.checkMessageStatus(n)).isNotDelivered)return void h(i.MessageStatus.NOT_DELIVERED);p.messagesDispatchers.updateMessage({privateId:n},{created_ts:(new Date).getTime(),status:i.MessageStatus.SENT}),f.default.sort(),f.default.trigger("update")},g]};var r=n(a(67375)),l=a(98661),o=a(66934),i=a(81152),u=a(54415),s=a(83170),d=a(65465),c=a(44145),f=n(a(14264)),p=a(26932),m=a(81366)},60936:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(68531)),o=n(a(91471));var i=r.default.memo((e=>{if(e.messages&&e.messages[0]){const t=e.messages[0];if(t.get("body")&&t.get("body").type){const e=t.toJSON();return r.default.createElement(o.default,{message:e,status:e.body.status,messagePrivateId:e.private_id})}return r.default.createElement(l.default,e)}}));t.default=i},38282:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.Markdown=u;var r=n(a(98661)),l=n(a(45697)),o=a(65787),i=a(67806);function u(e){let t=e.text;const a=e.customerIO&&o.sendUrlClickTelemetry;return r.default.createElement(i.Markdown,{onLinkClick:a},t)}u.propTypes={text:l.default.string.isRequired,customerIO:l.default.bool}},60569:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.Wrap=d;var r=n(a(23101)),l=n(a(88436)),o=n(a(98661)),i=n(a(45697)),u=n(a(32138));const s=["children","lineHeight"];function d(e){let t=e.children,a=e.lineHeight,n=(0,l.default)(e,s);const i={lineHeight:a};return o.default.createElement("jdiv",(0,r.default)({className:u.default.textWrap,style:i},n),t)}d.propTypes={children:i.default.node,lineHeight:i.default.string}},25153:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=n(a(98661)),l=n(a(45697)),o=a(60569),i=n(a(84726)),u=n(a(32138));function s(e){let t=e.children,a=e.isDeletedMessage,n=e.lineHeight;return a?r.default.createElement(o.Wrap,{lineHeight:n},r.default.createElement("jdiv",{className:u.default.text},(0,i.default)("messageDeleted"))):r.default.createElement(o.Wrap,{lineHeight:n},t)}s.propTypes={children:l.default.node,isDeletedMessage:l.default.bool.isRequired,lineHeight:l.default.string}},2046:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=T;var r=n(a(23101)),l=n(a(67375)),o=M(a"!=typeof e&&"function"!=typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}return n.default=e,a&&a.set(e,n),n}function T(e){let t=e.message,a=e.bubbleColor,n=e.lineHeight,u=e.isClientMessage,p=e.isAgentMessage,S=e.isDeletedMessage,M=e.isErrorMessage;const T=t.toJSON(),k=T.body,P=T.text,x=T.updated_ts,R=T.created_ts,N=T.replied_message,I=T.msg_id,D=Boolean(C.default.enable_reply),A=Boolean(x&&!S),B=!C.default.disable_emoji&&(0,s.checkAlone)(P),L=(0,m.default)(x||R,"dd.mm.yy H:MM:ss"),F=`msg_${u?_.MessageInitiator.CLIENT:_.MessageInitiator.AGENT}`,z=(0,o.useState)(!1),H=(0,l.default)(z,2),W=H[0],q=H[1],U=(0,o.useRef)(null),V=(0,i.default)({[v.default.message]:!0,[v.default[`_${a}`]]:!0,[v.defaultdefault.__client]:u,[v.default.__edited]:!!x,[v.default.__deleted]:S,[v.default.__flash]:W}),G=e=>{const t=w.default.getComponent(j.Component.SCROLL_CONTAINER);e===I&&(t.scrollTop(U.current.offsetParent.offsetTop+U.current.offsetTop-30),q(!0),setTimeout((()=>{q(!1)}),500))};(0,o.useEffect)((()=>{const e=E.QuoteEventEmitter.addListener(E.QuoteEventClick,G);return()=>e.remove()}),[I]);const Z=(0,g.renderMessageText)(t);return o.default.createElement("jdiv",{className:(0,i.default)(v.default.container,{[v.default.__client]:u}),ref:U},o.default.createElement("jdiv",(0,r.default)({className:V,title:L},(0,c.withLocator)(F)),Z&&o.default.createElement(y.default,{text:Z,time:L,lineHeight:n,customerIO:null==k?void 0:k.customerIO,isDeletedMessage:S,isEditedMessage:A,isMarkdownMessage:(0,g.isMarkdownMessage)(t)},D&&N&&o.default.createElement(E.default,{msgId:N.msg_id,palette:p?E.PALETTE.DARK:E.PALETTE.LIGHT,isAloneMessage:B}),(0,g.isMarkdownMessage)(t)?o.default.createElement("jdiv",{className:v.default.text},o.default.createElement(O.Markdown,{text:P,customerIO:null==k?void 0:k.customerIO})):o.default.createElement("jdiv",{className:v.default.text,dangerouslySetInnerHTML:{__html:Z}}),o.default.createElement(f.default,(0,r.default)({},(0,c.withLocator)(F+"_time"),{className:v.default.time,isRenderStatus:u,message:t,colorSet:p?d.COLORS_SET.LIGHT:d.COLORS_SET.DARK})))),D&&I&&o.default.createElement(h.default,{msgId:I,isAloneMessage:B}),M&&o.default.createElement(b.default,{message:t}))}T.propTypes={message:u.default.instanceOf(p.default).isRequired,bubbleColor:u.default.string.isRequired,isClientMessage:u.default.bool.isRequired,isAgentMessage:u.default.bool.isRequired,isDeletedMessage:u.default.bool.isRequired,isErrorMessage:u.default.bool.isRequired,lineHeight:u.default.string}},68531:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r=n(a(98661)),l=n(a(45697)),o=n(a(19955)),i=n(a(4867)),u=a(15961),s=n(a(20110)),d=a(32444);function c(e){let t=e.messages;(0,u.useErrorCatcher)("TextMessageContainer");const a=(0,d.useEnhanced)(),n=a.bubbleColor,l=a.lineHeight,i=o.default.mobileOrTablet();return r.default.createElement(s.default,{messages:t,isMobile:i,bubbleColor:n,lineHeight:l})}c.propTypes={messages:l.default.arrayOf(l.default.instanceOf(i.default))}},20110:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),l=n(a(94184)),o=n(a(45697)),i=n(a(39906)),u=n(a(96150)),s=n(a(4867)),d=a(42958),c=n(a(32138)),f=n(a(2046));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function m(e){let t=e.messages,a=e.isMobile,n=e.bubbleColor,o=e.lineHeight;const s=(0,d.messageInitiator)(t[0]),p=s.fromClient,m=s.fromAgent,_=m?i.default:u.default,h=(0,l.default)({[c.default.main]:!0,[c.default.__client]:p,[c.default.__agent]:m,[c.default.__mobile]:a});return r.default.createElement(_,{messages:t},r.default.createElement("jdiv",{className:h},t.map(((e,t)=>r.default.createElement(f.default,{key:t,message:e,bubbleColor:n,lineHeight:o,isClientMessage:p,isAgentMessage:m,isDeletedMessage:(0,d.messageStatus)(e).isDeleted,isErrorMessage:(0,d.isErrorMessage)(e)})))))}m.propTypes={messages:o.default.arrayOf(o.default.instanceOf(s.default)).isRequired,isMobile:o.default.bool.isRequired,bubbleColor:o.default.string.isRequired,lineHeight:o.default.string}},32444:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useEnhanced=function(){const e=(0,o.useSelector)(i.selectBubbleColor),t=(0,l.useState)((()=>u.default.ios()?s.default.getLineHeight():null)),a=(0,r.default)(t,2),n=a[0],d=a[1];return(0,l.useEffect)((function(){s.default.listenChangeZoom((()=>{if(u.default.ios()){const e=s.default.getLineHeight();d(e)}}))}),[]),{bubbleColor:e,lineHeight:n}};var r=n(a(67375)),l=a(98661),o=a(36113),i=a(87692),u=n(a(19955)),s=n(a(74379))},42958:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorMessage=function(e){const t=!(0,l.getClient)().isIntroduced&&!(0,l.getApp)().isOnline,a=o(e).fromAgent,n=i(e).isNotDelivered;return!a&&n&&!t},t.isMarkdownMessage=u,t.messageInitiator=o,t.messageStatus=i,t.renderMessageText=function(e){const t=e.toJSON(),a=t.body,n=t.text;if("listpicker"===(null==a?void 0:a.type))return a.text||a.title;if(u(e))return n;return(0,r.formatText)(n)};var n=a(81152),r=a(75901),l=a(44145);function o(e){const t=e.toJSON(),a=t.from,r=t.type;return{fromClient:a===n.MessageInitiator.CLIENT,fromBot:a===n.MessageInitiator.FORM,fromAgent:a===n.MessageInitiator.FORM||a===n.MessageInitiator.AGENT||r===n.MessageType.PROACTIVE}}function i(e){const t=e.toJSON().status;return{isDeleted:t===n.MessageStatus.DELETED,isNotDelivered:t===n.MessageStatus.NOT_DELIVERED}}function u(e){const t=e.toJSON().body,a=null==t?void 0:t.is_markdown,n=null==t?void 0:t.customerIO;return Boolean(a||n)}},25117:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=a(33965),o=a(93179),i=a(31694),u=a(27523),s=a(63664),d=a(52028);const c=()=>{(0,s.useErrorCatcher)(c.displayName);const e=(0,i.useEnhanced)(),t=e.componentRef,a=e.bubbleColor,n=e.isIos,f=e.phrases,p=e.isHidden,m=e.isDisabledEmoji,_=e.enablePrechat,h=e.sendPhrase;if(d.isDesignerEditor||_)return r.default.createElement(o.PrechatMessagePure,{ref:t,bubbleColor:a,phrases:f,isHidden:p,isIos:n,formatText:function(e){return m?(0,l.escape)(e):(0,u.replaceEmoji)(e)},sendPhrase:h})};c.displayName="PrechatMessageContainer";var f=c;t.default=f},93179:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.PrechatMessagePure=void 0;var r=n(a(23101)),l=n(a(67375)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),i=n(a(94184)),u=n(a(45697)),s=a(43417),d=n(a(77335));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const f=(0,o.forwardRef)(((e,t)=>{let a=e.bubbleColor,n=e.phrases,u=e.isHidden,c=e.isMobile,f=e.isIos,p=e.formatText,m=e.sendPhrase;const _=(0,i.default)({[d.default.main]:!0,["__"+a]]:!0,[d.defaultc,[d.default.__ios]:f,[d.default.__hide]:u}),h=(0,o.useState)(!1),g=(0,l.default)(h,2),b=g[0],v=g[1];return o.default.createElement("jdiv",{ref:t,className:_},n.map((e=>{let t=e.id,a=e.text;return o.default.createElement("jdiv",(0,r.default)({key:t,className:d.default.button,onTouchMove:()=>v(!0),onTouchStart:()=>v(!1),onTouchCancel:()=>v(!1)},(0,s.onClickHandler)((()=>m(a,t)),!0,!0,b),{dangerouslySetInnerHTML:{__html:p(a)}}))})))}));t.PrechatMessagePure=f,f.displayName="PrechatMessage",f.propTypes={bubbleColor:u.default.string,phrases:u.default.arrayOf(u.default.shape({id:u.default.number,text:u.default.string})),isHidden:u.default.bool,isMobile:u.default.bool,isIos:u.default.bool,formatText:u.default.func,sendPhrase:u.default.func}},68168:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(45697)),o=n(a(9097)),i=n(a(30295)),u=n(a(84726));const s=e=>{const t=e.messages[0].time;return r.default.createElement("jdiv",{className:o.default.main},(e=>{const t=new Date(e),a=new Date,n=t.getFullYear()===a.getFullYear(),r=t.getMonth()===a.getMonth(),l=t.getDate()===a.getDate(),o=t.getDate()===a.getDate()-1;return n&&r?l?(0,u.default)("today"):o?(0,u.default)("yesterday"):(0,i.default)(e,"dd.mm.yyyy"):(0,i.default)(e,"dd.mm.yyyy")})(t))};s.propTypes={messages:l.default.arrayOf(l.default.object)};var d=s;t.default=d},12822:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(33119)),l=n(a(92664)),o=n(a(84827)),i=n(a(85299)),u=n(a(55536)),s=n(a(98661)),d=n(a(94184)),c=n(a(73727)),f=n(a(19955)),p=n(a(13114)),m=n(a(79868)),_=n(a(28465)),h=n(a(89315));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,i.default)(this,a)}}let b=function(e){(0,o.default)(a,e);var t=g(a);function a(e){var n;(0,r.default)(this,a),n=t.call(this,e);const l=m.default.getSocial();return m.default.isLoginned()&&(n.state={vk:l.vk,fb:l.fb,mode:l.mode}),n}return(0,l.default)(a,[{key:"componentWillMount",value:function(){c.default.joint&&!f.default.mobileOrTablet()||3!=c.default.contacts_ask||this.setState({mode:"email"})}},{key:"render",value:function(){if(this.props.messages&&this.state.mode)return s.default.createElement(p.default,{padding:"sm",addClassname:(0,d.default)({[h.default.wrapper]:!0})},s.default.createElement(_.default,{mode:this.state}))}}]),a}(s.default.Component);t.default=b},99762:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.AgentAvatar=void 0;var r=n(a(98661)),l=n(a(45697)),o=a(67597),i=n(a(25648));const u=e=>{let t=e.avatarHost,a=e.agentAvatar;const n=a&&(0,o.getAvatarUrl)(t,a),l={backgroundImage:`url(${n})`};return r.default.createElement("jdiv",{className:i.default.avatar},n&&r.default.createElement("jdiv",{className:i.default.img,style:l}))};t.AgentAvatar=u,u.propTypes={avatarHost:l.default.string,agentAvatar:l.default.string}},88528:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var r=n(a(98661)),l=n(a(94184)),o=n(a(45697)),i=a(99762),u=a(75901),s=a(60031),d=n(a(19955)),c=n(a(84726)),f=n(a(4867)),p=n(a(74379)),m=n(a(25648));function _(e){const t=e.messages[0].toJSON().body,a=(0,s.useEnhanced)(t.from_id),n=a.agentInfo,o=a.avatarUrl,f=(0,c.default)("chat_agent_"+t.action).replace("_AGENT_",n.get("display_name")),_=(0,l.default)({[m.default.main]:!0,[m.default._mobile]:d.default.mobile()}),h={"-webkit-text-size-adjust":d.default.ios()?p.default.getTextSize():null};return r.default.createElement("jdiv",{className:_},"join"===t.action&&r.default.createElement(i.AgentAvatar,{avatarUrl:o,agentAvatar:n.get("avatar_url")}),r.defssName:m.default.text,style:h,dangerouslySetInnerHTML:{__html:(0,u.formatText)(f)}}))}_.propTypes={messages:o.default.arrayOf(o.default.instanceOf(f.default))}},60031:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useEnhanced=function(e){const t=(0,o.useSelector)(u.selectAvatarUrl),a=(0,l.useState)((()=>i.default.getAgentById(e))),n=(0,r.default)(a,2),s=n[0],d=n[1];return(0,l.useEffect)((function(){i.default.on("update",(()=>{const t=i.default.getAgentById(e);d(t)}))}),[e]),{agentInfo:s,avatarUrl:t}};var r=n(a(67375)),l=a(98661),o=a(36113),i=n(a(14762)),u=a(87692)},79232:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(94184)),o=n(a(45697)),i=n(a(40704)),u=a(75901),s=n(a(48524));const d=e=>{let t=e.message,a=e.textSize,n=e.isMobile,o=e.isIos;const d=t.body,c=t.text,f=(0,l.default)({[s.default.main]:!0,[s.default["__"+d.name]]:!0,[s.default.__mobile]:n}),p=(0,l.default)({[s.default.text]:!0,[s.default.__mobile]:n}),m=o?{WebkitTextSizeAdjust:a}:null,_={__html:(0,u.formatText)(c)};return r.default.createElement("jdiv",{className:f},r.default.createElement("jdiv",{style:m,className:p},r.default.createElement(i.default,{color:"#18C139",iconName:d.name+"Icon",className:s.default.callIcon}),r.default.createElement("jdiv",{dangerouslySetInnerHTML:_})))};d.propTypes={message:o.default.object.isRequired,isMobile:o.default.bool.isRequired,isIos:o.default.bool.isRequired,textSize:o.default.string};var c=d;t.default=c},55961:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var r=n(a(98661)),l=n(a(45697)),o=n(a(88528)),i=n(a(79232)),u=n(a(4867)),s=n(a(28558)),d=a(60152),c=a(63664);function f(e){var t;let a=e.messages;(0,c.useErrorCatcher)(f.displayName);const n=(0,d.useEnhanced)(),l=n.isMobile,u=n.isIos,p=n.textSize,m=n.lineHeight,_=a[0].toJSON();switch(null===(t=_.body)||void 0===t?void 0:t.type){case"call":return r.default.createElement(i.default,{message:_,textSize:p,isMobile:l,isIos:u});case"chat":return r.default.createElement(o.default,{messages:a});default:return r.default.createElement(s.default,{message:_,isMobile:l,isIos:u,textSize:p,lineHeight:m})}}f.displayName="SystemMessageContainer",f.propTypes={messages:l.default.arrayOf(l.default.instanceOf(u.default))}},28558:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(94184)),o=n(a(45697)),i=a(81152),u=n(a(30295)),s=n(a(81084)),d=a(75901);const c=e=>{let t=e.message,a=e.isMobile,n=e.isIos,o=e.textSize,c=e.lineHeight;const f=t.body,p=t.created_ts,m=t.type,_=t.text,h=m===i.MessageType.PREFORM,g=null==f?void 0:f.type,b=(0,u.default)(p,"dd.mm.yy H:MM:ss"),v={__html:(0,d.formatText)(_)},y=(0,l.default)({[s.default.main]:!0,[s.default.__mobile]:a,[s.default["__"+g]]:g&&"text"!==g}),O=(0,l.default)({[s.default.text]:!0,[s.default.__bot]:h}),E={WebkitTextSizeAdjust:n?o:"none",lineHeight:n?c:null};return r.default.createElement("jdiv",{className:y,title:b},r.default.createElement("jdiv",{className:O,style:E,dangerouslySetInnerHTML:v}))};c.propTypes={message:o.default.shape({created_ts:o.default.number,private_id:o.default.string,status:o.default.string,text:o.default.string,type:o.default.string,body:o.default.shape({type:o.default.string,name:o.default.string})}),isIos:o.default.bool,isMobile:o.default.bool,textSize:o.default.string,lineHeight:o.default.string};var f=r.default.memo(c);t.default=f},60152:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useEnhanced=function(){const e=r.default.mobileOrTablet()||(0,l.isChatPage)(),t=rize(),n=o.default.getLineHeight();return{isMobile:e,isIos:t,textSize:a,lineHeight:n}};var r=n(a(19955)),l=a(69882),o=n(a(74379))},95066:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(45697)),o=n(a(84726)),i=n(a(39906)),u=n(a(73727));const s=r.default.lazy((()=>a.e(772).then(a.bind(a,66302)))),d=e=>{let t=e.messages;return u.default.enable_webrtc_calls?r.default.createElement(i.default,{messages:t},r.default.createElement(r.default.Suspense,{fallback:r.default.createElement("jdiv",null,(0,o.default)("cb_loading"))},r.default.createElement(s,{message:t[0]}))):null};d.propTypes={messages:l.default.any};var c=r.default.memo(d);t.default=c},51149:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MoreButton=void 0;var r=n(a(23101)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=n(a(45697)),i=n(a(94184)),u=n(a(19955)),s=n(a(40704)),d=n(a(75686)),c=a(47245),f=a(47713),p=a(80598),m=n(a(20117)),_=a(36874);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}const g=e=>{let t=e.show,a=e.showBadge,n=void 0!==a&&a,o=e.color,h=e.onClick;const g=(0,l.useRef)(null);(0,l.useLayoutEffect)((()=>{g.current&&d.default.set(c.Component.MORE_BUTTON,g.current)}));const b=(0,i.default)({[m.default.moreBox]:!0,[m.default.__mobile]:u.default.mobileOrTablet(),[m.default.__show]:t}),v=(0,i.default)({[m.default.__show]:n,[m.default.moreBadge]:!0});return l.default.createElement("jdiv",(0,r.default)({className:b},(0,f.onClickHandler)(h,!0,!0),{ref:g}),l.default.createElement(s.default,{iconName:"icon-v",color:"#cccccc",color2:_.colorsFromFigma.BLUE_80,hoverColor:(0,p.getThemeColor)(o),className:m.default.moreBtn}),l.default.createElement("jdiv",{className:v}))};t.MoreButton=g,g.propTypes={show:o.default.bool.isRequired,showBadge:o.default.bool,color:o.default.string,onClick:o.default.func};var b=g;t.default=b},71192:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.QuoteEventEmitter=t.QuoteEventClick=t.PALETTE=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=O(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=a(36113),i=n(a(94184)),u=n(a(45697)),s=a(89766),d=n(a(14264)),c=a(45959),f=a(99258),p=a(77294),m=a(87692),_=n(a(84726)),h=a(75901),g=a(69845),b=n(a(86940)),v=a(54415),y=a(83170);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(O=function(e){return e?a:t})(e)}const E={LIGHT:"light",DARK:"darkentEmitter;t.QuoteEventEmitter=C;const w="clickOnQuote";t.QuoteEventClick=w;const j=e=>{var t;let a=e.palette,n=void 0===a?E.DARK:a,u=e.msgId,s=e.active,O=void 0!==s&&s,j=e.isAloneMessage,S=e.isMediaMessage;const M=d.default.getMessageById(u).toJSON(),T=M.type,k=M.text,P=M.from_id,x=M.body,R=(0,p.isAgentMessage)(M),N=null===(t=(0,o.useSelector)((e=>(0,f.selectAgentById)(e,+P))))||void 0===t?void 0:t.name,I=(0,o.useSelector)(c.selectClientName),D=(0,o.useSelector)(m.selectBubbleColor),A=R?N||"Bot":I||(0,_.default)("lblYou"),B=null==x?void 0:x.type,L=(0,l.useState)("media"===T&&"photo"===B&&(null==x?void 0:x.thumb)),F=(0,r.default)(L,2),z=F[0],H=F[1],W="photo"===B&&z?(0,_.default)("lblPhoto"):"document"===B?x.file_name:"cobrowse"===B?(null==x?void 0:x.text)||(0,_.default)("lblDefaultCobrowseComment"):k;return l.default.createElement("jdiv",{className:(0,i.default)(bte,b.default[`__${n}`],{[b.default.__active]:O,[b.default.__aloneQuote]:j,[b.default.__media]:S},b.default[`__${D}`]),onClick:()=>{C.emit(w,u),v.Monitoring.telemetry(y.TelemetryName.REPLY_MESSAGE_CLICK_SCROLL)}},z&&l.default.createElement("img",{className:b.default.previewMediaPhoto,alt:k,title:k,src:null==x?void 0:x.thumb,width:30,height:30,loading:"lazy",onError:()=>{H(!1)}}),l.default.createElement("jdiv",{className:b.default.container},l.default.createElement("jdiv",{className:b.default.author},A),l.default.createElement("jdiv",{className:(0,i.default)(b.default.message,{[b.default.aloneEmoji]:(0,g.checkAlone)(W)}),dangerouslySetInnerHTML:{__html:(0,h.formatText)(W)}})))};j.propTypes={msgId:u.default.number.isRequired,palette:u.default.oneOf(Object.values(E)),active:u.default.bool,isMediaMessage:u.default.bool,isAloneMessage:u.default.bool};var S=j;t.default=S},26370:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(61125)),l=n(a(67375)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),i=a(36113),u=n(a(45697)),s=n(a(81660)),d=a(54415),c=a(26932),f=n(a(19955)),p=a(41504),m=n(a(4867)),_=a(83170),h=a(87692),g=a(32046),b=a(69882),v=n(a(75686)),y=a(47245),O=a(49963);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const j=e=>{let t=e.messages;const a=(0,o.useErrorBoundary)((e=>{e.message+=` in ${j.displayName} component.`,d.Monitoring.reportException(e)})),n=(0,l.default)(a,1)[0],r=(0,i.useSelector)(h.selectRateSettings),u=(0,i.useSelector)(h.selectBubbleColor);if(n||!r)return;const m=t[0].toJSON();if(m.body&&m.body.closed)return;const E=m.chat_id,C=m.private_id,S=r.type,M=r.icon,T=r.conditionName,k=r.customTitle,P=r.goodRateTitle,x=r.badRateTitle;return o.default.createElement(s.default,{message:m,type:S,icon:M,conditionName:T,customTitle:k,goodRateTitle:P,badRateTitle:x,onRateSelect:e=>{(0,g.needScrollToBottom)(m),d.Monitoring.telemetry(_.TelemetryName.RATE_FORM_SELECT,{param1:e})},onSubmitClick:(e,a,n)=>{const l=new p.Rate(a,E,e);O.connectionAdapter.sendEvent(l),(0,g.saveRateMessage)(a,E,t[0]),c.chatsDispatchers.setChatEvaluated(!0),d.Monitoring.telemetry(_.TelemetryName.RATE_FORM_SUBMIT,{param1:a,param2:n,param3:e?"withcomment":null,param4:r.type})},onCloseClick:()=>{setTimeout((()=>{c.messagesDispatchers.updateMessage({privateId:C},{body:w(w({},m.body),{},{closed:!0})}),c.chatsDispatchers.setChatEvaluated(!0)}),300),d.Monitoring.telemetry(_.TelemetryName.RATE_FORM_CLOSE)},isMobile:f.default.mobileOrTablet(),isTablet:f.default.tablet()||(0,b.isChatPage)(),isIos:f.default.ios(),bubbleColor:u,ref:e=>{e&&e.base&&v.default.set(y.Component.RATE_FORM,e.base)}})};j.propTypes={messages:u.default.arrayOf(u.default.instanceOf(m.default))},j.displayName="RateFormContainer";var S=j;t.default=S},81660:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=O;var r=n(a(23101)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=n(a(94184)),i=n(a(45697)),u=n(a(84726)),s=n(a(66400)),d=a(15174),c=n(a(40704)),f=n(a(74379)),p=a(90361),m=a(57930),_=n(a(1497)),h=a(43417),g=a(97409),b=n(a(85578)),v=n(a(12947));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}function O(e){let t=e.message,a=e.type,n=e.icon,i=e.conditionName,y=e.customTitle,O=e.goodRateTitle,E=e.badRateTitle,C=e.onRateSelect,w=e.onSubmitClick,j=e.onCloseClick,S=e.onTextareaFocus,M=e.onTextareaBlur,T=e.isMobile,k=e.isIos,P=e.isTablet,x=e.bubbleColor;const R=(0,l.useRef)(),N=(0,g.useEnhanced)(t),I=N.onRate,D=N.onClose,A=N.isSubmited,B=N.hideForm,L=N.rateSelected,F=N.textSize,z=N.lineHeight,H=N.focused,W=N.onSetFocused,q=N.value,U=N.onSetValue,V=(0,o.default)({[v.default.main]:!0,[v.default["__"+x]]:!0,[v.default.__hide]:B,[v.default.__mobile]:T,[v.default.__ios]:k,[v.default.__tablet]:P}),G=(0,o.default)({[v.default.label]:!0,[v.default.__show]:H}),Z=(e,t)=>{e.style.setProperty("max-height",t?t+1+"px":null,"important")},$=()=>l.default.createElement("jdiv",{className:v.default.formBlock},l.default.cr(0,r.default)({className:G},(0,p.withLocator)(m.Locator.RATE_COMMENT_TITLE)),(0,utTitle")),l.default.createElement(_.default,(0,r.default)({className:v.default.inputField,value:q,maxLength:"255",onInput:e=>{const t=e.target.value;U(t),R&&R.current&&(""==t?(Z(R.current,null),W(!1))rent,R.current.scrollHeight)))},onBlur:()=>{W(!1),M&&M()},onFocus:()=>{q&&""!==q&&W(!0),S&&S()},onKeyUp:e=>{e.stopPropagation()},onKeyDown:e=>{e.stopPropagation()},placeholder:(0,u.default)("rateFormCommentTitle"),ref:R},(0,p.withLocator)(m.Locator.RATE_FORM_INPUT))),l.default.createElement(s.default,(0,r.default)({className:v.default.button,height:"sm",onClick:()=>{w(q,L,i)},widthFluid:!0,style:{lineHeight:k?f.default.getLineHeight(2.7):null}},(0,p.withLocator)(m.Locator.RATE_SUBMIT_BUTTON)),(0,u.default)("lblSend"))),K={"-webkit-text-size-adjust":k?F:"none",lineHeight:k?z:null};return l.default.createElement("jdiv",{className:V,style:K},l.default.createElement("jdiv",(0,r.default)({className:v.default.close},(0,h.onClickHandler)((e=>{j(e),D(e)}),!0,!0),(0,p.withLocator)(m.Locator.RATE_FORM_CLOSE_ICON)),l.default.createElement(c.default,{className:v.default.closeIcon,iconName:"icon-popup-close",color:"#959BA0",hoverColor:"#222D38"})),A?(()=>{const e=[d.RateState.GOOD_NORMAL,d.RateState.GOOD].includes(L),t=O||(0,u.default)("rateFormFinishText"),a=E||(0,u.default)("rateFormFinishTextNegative");return l.default.createElement(l.default.Fragment,null,l.default.createElement("jdiv",{className:v.default.title},(0,u.default)("rateFormFinishTitle")),e?l.default.createElement("jdiv",(0,r.default)({className:v.default.text},(0,p.withLocator)(m.Locator.RATE_POSITIVE_SUBMIT_TEXT)),t):l.default.createElement("jdiv",(0,r.default)({className:v.default.text},(0,p.withLocator)(m.Locator.RATE_NEGATIVE_SUBMIT_TEXT)),a))})():(()=>{const e=y||(0,u.default)("rateFormText");return l.default.createElement(l.default.Fragment,null,l.default.criv",(0,r.default)({className:v.default.title},(0,p.withLocator)(m.Locator.RATE_TITLE)),(0,u.default)("rateFormTitle")),l.default.createElement("jdiv",(0,r.default)({className:v.default.text},(0,p.withLocator)(m.Locator.RATE_FORM_TEXT)),e),l.default.createElement("jdiv",{className:v.default.rateBlock},l.default.createElement(b.default,{type:a,icon:n,onRateSelect:e=>{I(e),C(e)},iconSelected:L})),L?$():null)})())}O.propTypes={message:i.default.object.isRequired,type:i.default.oneOf(["two","three","five"]).isRequired,icon:i.default.oneOf(["smile","star"]),conditionName:i.default.oneOf(["message_count","chat_finished"]).isRequired,customTitle:i.default.string,goodRateTitle:i.default.string,badRateTitle:i.default.string,onRateSelect:i.default.func,onSubmitClick:i.default.func,onCloseClick:i.default.func,onTextareaFocus:i.default.func,onTextareaBlur:i.default.func,isMobile:i.default.bool,isIos:i.default.bool,isTablet:i.default.bool,bubbleColor:i.default.string}},85578:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(23101)),l=n(a(98661)),o=n(a(94184)),i=n(a(45697)),u=a(15174),s=a(90361),d=a(57930),c=a(47713),f=a(24785),p=n(a(12947)),m=a(63357);const _=e=>{let t=e.type,a=e.icon,n=e.iconSelected,i=e.onRateSelect;return l.default.createElement(l.default.Fragment,null,t==u.RateType.TWO?(()=>{const e=n==u.RateState.GOOD,t=n==u.RateState.BAD;return l.default.createElement("jdiv",{className:p.default.iconBox},l.default.createElement("jdiv",(0,r.default)({className:p.default.icon,onClick:()=>{i(u.RateState.GOOD)}},(0,s.withLocator)(d.Locator.RAeElement(f.SvgIcon,{icon:m.RateIconImages.iconLike,color:e?u.RateColors.hoverColor:t?u.RateColors.disabledColor:u.RateColors.color,color2:e?u.RateColors.color2:t?u.RateColors.disabledColor2:u.RateColors.color2,hoverColor:u.RateColors.hoverColor,className:p.default.iconUp})),l.default.createElement("jdiv",(0,r.default)({className:p.default.icon,onClick:()=>{i(u.RateState.BAD)}},(0,s.withLocator)(d.Locator.RATE_BAD)),l.default.createElement(f.SvgIcon,{icon:m.RateIconImages.iconDislike,color:t?u.RateColors.hoverColor:e?u.RateColors.disabledColor:u.RateColors.color,color2:e?u.RateColors.disabledColor2:u.RateColors.color2,hoverColor:u.RateColors.hoverColor,className:p.default.iconDown})))})():null,[u.RateType.THREE,u.RateType.FIVE].includes(t)?(()=>{const e=a==u.R.STAR;return l.default.createElement("jdiv",{className:p.default.iconBox},u.RateIconMap[t].map((t=>{let a=u.RateColors.color;n&&(a=n==t?u.RateColors.color:u.RateColors.disabledColor);const d=(0,o.default)({[p.default.icon]:!0,[p.default.__star]:e,[p.default.__selected]:n&&n==t});return l.default.createElement("jdiv",(0,r.default)({className:d},(0,c.onClickHandler)((()=>{i(t)})),{key:t},(0,s.withLocator)(`RATE_${t.toUpperCase()}`+(e?"_STAR":"_SMILE"))),l.default.createElement(f.SvgIcon,{icon:e?m.RateIconImages.iconStar:m.RateIconImages[`${t}Rate`],color:a,className:p.default.iconSmile}))})))})():null)};_.propTypes={type:i.default.oneOf([u.RateType.TWO,u.RateType.THREE,u.RateType.FIVE]).isRequired,icon:i.default.oneOf([u.RateIconType.SMILE,u.RateIconType.STAR]),iconSelected:i.default.oneOfType([i.default.bool,i.default.string]),onRateSelect:i.default.func.isRequired};var h=l.default.memo(_);t.default=h},63357:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.RateIconImages=void 0;var r=n(a(18954)),l=n(a(23808)),o=n(a(43205)),i=n(a(90270)),u=n(a(50996)),s=n(a(94939)),d=n(a(83088)),c=n(a(37491));const f={badRate:r.default,badnormalRate:l.default,normalRate:o.default,goodnormalRate:i.default,goodRate:u.defauslike:d.default,iconStar:c.default};t.RateIconImages=f}t";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useEnhanced=function(e){const t=e.body.submited,a=(0,l.useState)(!1),n=(0,r.default)(a,2),i=n[0],u=n[1],s=(0,l.useState)(t?e.body.rate:null),d=(0,r.default)(s,2),c=d[0],f=d[1],p=(0,l.useState)((()=>o.default.getTextSize())),m=(0,r.default)(p,2),_=m[0],h=m[1],g=(0,l.useState)((()=>o.default.getLineHeight(1.5))),b=(0,r.default)(g,2),v=b[0],y=b[1],O=(0,l.useState)(!1),E=(0,r.default)(O,2),C=E[0],w=E[1],j=(0,l.useS.default)(j,2),M=S[0],T=S[1];return(0,l.useEffect)((function(){o.default.listenChangeZoom((()=>{const e=o.default.getTextSize();e!==_&&(h(e),y(o.default.getLineHeight(1.5)))}))}),[_,v]),{isSubmited:t,hideForm:i,rateSelected:c,onRate:function(e){f(e)},onClose:function(e){u(e)},textSize:_,lineHeight:v,focused:C,onSetFocused:function(e){w(e)},value:M,onSetValue:function(e){T(e)}}};var r=n(a(67375)),l=a(98661),o=n(a(74379))},63925:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(67375)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,a&&a.set(e,n);return n}(a(98661)),o=a(36113),i=n(a(7468)),u=n(a(45697)),s=a(44506),d=a(68403),c=n(a(80282)),f=a(44145),p=a(81152),m=a(65465);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_=function(e){return e?a:t})(e)}const h=n(a(4855)).default.name("SocialButtonContainer"),g=e=>{let t=e.isOnline,a=e.chatStarted,n=e.clientIntegration,o=e.messages,u=e.socialState;const _=e=>!!(0,f.getMessagesByType)(e,p.MessageType.FORM).length,g=(0,l.useState)(_(o)),b=(0,r.default)(g,2),v=b[0],y=b[1];if(!v&&(()=>{if((0,d.hasIntegration)(n))return h.log("Already connected with vk/fb."),m.messageActions.hideEmailForm(),!1;if(_(o))return y(!0),!1;if(t&&a){const e=(0,f.getClientMessages)(o);return!(!e||!e.length)}return!1})())return l.default.createElement("jdiv",{className:i.default.socialPanel},l.default.createElement(c.default,{show:!0,mode:u,processSocial:s.processSocial}))};g.propTypes={isOnline:u.default.bool,chatStarted:u.default.bool,clientIntegration:u.default.oneOfType([u.default.bool,u.default.string]),messages:u.default.array,socialState:u.default.shape({vk:u.default.bool,fb:u.default.bool,mode:u.default.oneOfType([u.default.bool,u.default.string])})};var b=(0,o.connect)((e=>({isOnline:e.app.isOnline,chatStarted:e.app.chatStarted,clientIntegration:e.client.hasIntegration,messages:e.messages,socialState:e.social})),{})(g);t.default=b},80282:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(84726)),o=n(a(45697)),i=n(a(4855)),u=n(a(36683)),s=n(a(74783)),d=a(24785),c=n(a(7468));i.default.name("SocialButton");const f=e=>{let t=e.show,a=e.mode,n=e.processSocial;if(!t)return;return"sb"==a.mode?r.default.createElement("jdiv",{className:c.default.wrap},r.default.createElement("jdiv",{className:c.default.socialLink,onClick:e=>{n(e,"sb")},title:(0,l.default)("omni_sb_link")},(0,l.default)("social_process_in_sb"),"",r.default.createElement(d.SvgIcon,{iconName:"sb",className:c.default.iconSb})," ",(0,l.default)("omni_sb_link"))):r.default.createElement("jdiv",{cult.wrap},a.vk?r.default.createElement("jdiv",{className:c.default.socialLink,onClick:e=>{n(e,"vk")},title:(0,l.default)("social_vk")},(0,l.default)("social_process_in")," ",r.default.createElement(d.SvgIcon,{icon:s.default,className:c.default.iconVk})," ",(0,l.default)("social_vk")):null,a.fb?r.default.createElement("jdiv",{className:c.default.socialLink,onClick:e=>{n(e,"fb")},title:(0,l.default)("social_fb")},(0,l.default)("social_process_in_fb"),"",r.default.createElement(d.SvgIcon,{icon:u.default,className:c.defauject"!=typeof e&&"function"!=typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("defauruct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,i.default)(this,a)}}const S=f.default.name("SocialButtonChat");let M=function(e){(0,o.default)(a,e);var t=j(a);function a(e){var n;return(0,r.default)(this,a),(n=t.call(this,e)).state={show:!0,vk:e.mode.vk,fb:e.mode.fb,mode:e.mode.mode},n}return(0,l.default)(a,[{key:"componentDidUpdate",value:function(e){this.props.client.hasIntegration!==e.client.hasIntegration&&this.checkIntegration.bind(this)}},{key:"componentDidMount",value:function(){S.log("mounted"),this.checkIntegration.bind(this),(p.default.joint||3!=p.default.contacts_ask)&&(3!=p.default.contacts_ask||_.default.desktop())||this.setState({vk:!1,fb:!1,mode:"email"})}},{key:"checkIntegration",value:function(){(0,b.hasIntegration)(this.props.client.hasIntegration)&&(S.log("Already connected with vk/fb."),this.show(!1),(0,v.each)(h.default.getMessagesByType("email"),(e=>{S.log("remove email message (integration vk/fb)."),e&&e.destroy&&e.destroy()})),O.Router.getCurrentRoute()===E.Route.CHAT_SOCIAL&&(S.log("hide popup, navigate to chat"),O.Router.next(E.RouterEvent.ToChat)))}},{key:"show",value:function(e){S.log("show",e),this.setState({show:e})}},{key:"renderIframe",value:function(){const e=g.default.getIframeUrl(this.state.mode),t="vk"==this.state.mode?50:74,a={position:"fb"===this.state.mode?"relative":null};return s.default.createElement("iframe",{className:(0,d.default)({[y.default.iframe]:!0,[y.default["__"+this.state.mode]]:!0}),style:a,width:"100%",border:"0",height:t,src:e})}},{key:"render",value:function(){return s.default.createElement("jdiv",{className:y.default.box},(this.state.vk||th.createElement("jdiv",{className:y.default.infoText,dangerouslySetInnerHTML:{__html:"vk"==this.state.mode?(0,m.default)("social_get_access"):(0,m.default)("social_get_access_fb")}}),this.renderIframe())}}]),a}(s.Component);M.propTypes={vk:c.default.bool,fb:c.default.bool,mode:c.default.oneOf(["vk","fb","email"]),client:c.default.object};var T=(0,C.connect)((e=>({client:e.client})))(M);t.default=T},65885:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=a(36113),o=n(a(28431)),i=n(a(19955)),u=n(a(79868)),s=n(a(45697)),d=a(83170),c=a(54415);n(a(4855)).default.name("SocialPopup");const f=e=>{let t=e.onClose,a=e.mode,n=(e.joint,e.clientId),l=e.visitorId,s=e.widgetId,f=e.chatStarted;const p=u.default.getIframeUrl(a),m=u.default.checkSocial();return r.default.createElement(o.default,{onClose:t,mode:a,clientId:n,visitorId:l,widgetId:s,chatStarted:f,isMobile:i.default.mobileOrTablet(),socialIframeUrl:p,isSocialEnabled:!(!a||!m),onQrError:e=>{c.Monitoring.telemetryOnce(d.TelemetryName.QR_ERROR,{param1:e?e.message:null})}})};f.propTypes={onClose:s.default.func.isRequired,mode:s.default.oneOf(["sb","vk","fb"]),joint:s.default.object,projectId:s.default.string,clientId:s.default.string,visitorId:s.default.string,widgetId:s.default.string,chatStarted:s.default.bool};var p=(0,l.connect)(((e,t)=>({onClose:t.onClose,mode:e.social.mode,joint:e.settings.features.joint,clientId:e.client.clientId,visitorId:e.client.visitorId,widgetId:e.settings.system.widgetId,chatStarted:e.app.chatStarted})),{})(f);t.default=p},28431:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(98661)),l=n(a(84726)),o=n(a(45697)),i=n(a(94184)),u=n(a(32325)),s=n(a(49563));alPopup");const d=e=>{let t=e.onClose,a=e.mode,n=(e.isMobile,e.projectId,e.clientId,e.visitorId,e.widgetId,e.chatStarted,e.socialIframeUrl),o=e.isSocialEnabled;e.onQrError;const d=(0,i.default)({[s.default.iconHeader]:!0,[s.default["__"+a]]:!0});return r.default.createElement("jdiv",{className:s.default.wrap},r.default.createElement(u.default,{onClose:e=>{e.stopPropagation(),t()}}),r.default.createElement("jdiv",{className:d}),r.default.createElement("jdiv",{className:s.default.textBox},r.default.createElement("jdiv",{className:s.default.text,dangerouslySetInnerHTML:{__html:(e=>{switch(e){case"vk":return(0,l.default)("social_get_access");case"sb":return(0,l.default)("social_get_access_sb");default:return(0,l.default)("social_get_access_fb")}})(a)}}),(()=>{if("sb"!=a)return a&&o?r.default.createElement("iframe",{width:"300",border:"0",height:"vk"==a?52:74,src:n}):void 0})()),r.default.createElement("jdiv",{className:s.default.linkBox},r.default.createElement("jdiv",{onClick:t,className:s.default.link},(0,l.default)("lnkCloseThisWindow"))))};d.propTypes={onClose:o.default.func.isRequired,mode:o.default.oneOf(["sb","vk","fb"]),isMobile:o.default.bool,projectId:o.default.string,clientId:o.default.string,visitorId:o.default.string,widgetId:o.default.string,chatStarted:o.default.bool,socialIframeUrl:o.default.string,isSocialEnabled:o.default.bool,onQrError:o.default.func};var c=r.default.memo(d);t.default=c},44506:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.processSocial=void 0;var r=n(a(138)),l=a(21476),o=a(47060),i=a(54415),u=a(83170),s=n(a(79868));n(a(4855)).default.name("SocialButtonHelpers");t.processSocial=(e,t)=>{e.preventDefault(),s.default.setPopupMode(t),l.Router.next(o.RouterEvent.ToSocial);const a="vk"===t?u.TelemetryName.CONTINUE_IN_VK:u.TelemetryName.CONTINUE_IN_FB;i.Monitoring.telemetry(a),r.default.trackContinueInSocial(t)}},39976:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 547));const i=n(a(4855)).default.name("Timer");var u=new r.default({timer:0,seconds:0,timerText:!1,initialState:"unitialized",namespace:"Timer",setTimerNull:function(){clearInterval(this.timer),o.default.set("cw_timer",null)},initialize:function(){i.log("Timer initalized.")},states:{unitialized:{start_timer:"STARTTIMER"},STARTTIMER:{_onEnter:function(){this.handle("start_timer")},start_timer:function(){let e=1e3*this.seconds;const t=this.timerText;t&&(t.innerText=e/1e3);let a=this.seconds;clearInterval(this.timer),this.timer=setInterval((0,l.bind)((function(){const t=o.default.get("cw_timer");if(t){const a=parseInt((new Date).getTime())-parseInt(t);xed(2),e<=0)return clearInterval(this.timer),this.timer=!1,void this.handle("timer_finished")}else o.default.set("cw_timer",(new Date).getTime());a=e/1e3,e-=100,e<=0&&(a=e,clearInterval(this.timer),this.timer=!1,this.handle("timer_finished")),this.emit("tick",a)}),this),10)},timer_finished:"STOP",cancel_timer:"unitialized"},STOP:{_onEnter:function(){i.log("STOP, timer_finished")},start_timer:"STARTTIMER"}}});t.default=u},75901:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.formatText=function(e){if(!e)return"";e=e.replace("<br />","\n");const t=(e=(0,i.escape)(e).replace(/(?:\r\n|\r|\n)/g,"EX," $& "),a=(0,o.replaceLinksWithAnchor)(t);return r.default.disable_emoji?a:(0,l.createEmoji)(a)};var r=n(a(73727)),l=a(69845),o=a(25635),i=a(33965),u=a(30633)},1039:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getCometHost=function(){return c.chat_host},t.getConfig=function(){return c},t.getViHost=function(){return c.vi_host},t.initConfig=m,t.setConfigParam=void 0;var n,r=a(4425),l=a(94537),o=a(52028),i=a(97615),u=a(68403),s=a(69882),d=window.parent||window,c=d.jivo_config;if(c||(c={}),i.EnvironmentManager.isSelfhosted()){const e=window.parent||window;a.p=`${e.location.protocol}${c.base_url}/`}else a.p="https:"+c.base_url+"/";switch(c.chat_mode){case r.ChatMode.ONLINE:case 1:c.chat_mode=r.ChatMode.ONLINE;break;case r.ChatMode.OFFLINE:case 0:c.chat_mode=r.ChatMode.OFFLINE}c.bots&&c.enable_bot_offline&&(c.chat_mode=r.ChatMode.ONLINE),c.callback_settings||(c.callback_settings={});const f=c.contacts_settings;f&&c.contacts_ask===l.ContactsType.BEFORE_CHAT&&(f.phone.show||f.email.show||f.name.show||(c.contacts_settings.email.show=!0)),f||(c.contacts_settings={name:{show:!1,required:!1},email:{show:!0,required:!0},phone:{show:!1,required:!1}});const p=c.chat_mode==r.ChatMode.ONLINE;function m(e){window.parent.jivo_config=c=e}p&&c.contacts_ask===l.ContactsType.DISABLED&&!(0,u.isEmailOrPhoneRequired)(c.contacts_settings)&&(c.contacts_settings.email={show:!0,required:!0}),p||(0,u.isEmailOrPhoneRequired)(c.contacts_settings)||(c.contacts_settings=(0,u.fixOfflineSettings)(c.contacts_settings)),c.widget_color2||"#383345"!=c.widget_color||(c.widget_color="#2F324A",c.widget_color2="#424867",c.power_gradient=1),c.bubble_color||(c.bubble_color="green"),"[object Object]"===Object.prototype.toString.call(d.wix_context)&&"[object Object]"===Object.prototype.toString.call(d.jivo_wix)&&Object.assign(c,d.jivo_wix),d.jivo_in_wix_iframe&&(c.widget_orientation="bottom"),o.isDesignerEditor&&Object.assign(c,d._desingerConfig),c.joint&&"RU"==(null===(n=c.geoip)||void 0===n?void 0:n.split(";")[0])&&(delete c.joint.ig,delete c.joint.fb),c.disable_botmode&&(c.botmode=null),(0,s.isChatPage)()&&(c.campaigns=null);t.setConfigParam=(e,t)=>{const a=c;a[e]=t,m(a)};var _=c;t.default=_},2535:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useForm=function(e){let t=e.initialValues,a=e.initialErrors,n=e.validate,r=e.schemas,d=e.focusOnFirstError;const _=(0,o.useState)(f(a)),h=(0,l.default)(_,2),g=h[0],ault)(v,,l.default)(C,2),j=w[0],S=w[1],M=(0,o.useState)(0),T=(0,l.default)(M,2)k>0,N=(0,o.useRef)(nu=>{irrent&&d&&!(0,u.isEmpty)(g)){const e=`[name="${Object.keys(g)[0]}"]`,t=N.current.querySelector(e);t&&t.focus()}}),[k]);const I=()=>b({}),D=(e,t)=>b((a=>c(c({},a),{},{[e]:t}))),A=e=>b((t=>{const a=c({},t);return delete a[e],a})),B=(e,t)=>{const a=(0,i.isFunction)(null==r?void 0:r[e])?r[e](t):t;E((t=>c(c({},t),{},{[e]:a}))),A(e),L(e)},L=e=>S((t=>c(c({},t),{},{[e]:!0}))),F=()=>S({}),z=()=>{const e=m(n,O);return b(e.errors),e};return{g,values:O,submitCount:k,isValidrmRef:N,setErrors:b,setValues:E,clearErrors:I,setFieldError:D,clearFieldError:A,setFieldValue:B,validate:z,validateField:e=>{conson(e,t,a){const n=m(t,a),r=e in n.errors;return{hasError:r,error:r?n.errors[e]:null}}(e,n,O);return t.hasError?D(e,t.error):A(e),t},onSubmit:e=>(t,a)=>{a||nuly(a,n)}return a}function c(e){for(var t=1;t<[t]?arguion(t){(0,r.default)(e,toperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e){return e?Object.keys(e).reduce(((t,a)=>{const n=e[a];return n&&(t[a]=n),t}),{.length>0}function m(enction(e){const t=f(e);return{hasErrors:p(t),errors:t}}(e(t)):{hasErrors:!1,errors:{}}}},55330:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{vere;a++)t[a]=arguments[a];return(0,n.useMemo)((()=>t.every((e=>(0,l.isUndefined)(e)||(0,r.isNull)(e)))?nu4623);function u(e,t){(0,l.isUndefined)(e)||(0,r.isNull)(e)||((0,o.isFunction)(e)?e(t):(0,i.tryCatch)((()=>e.curr,t.current};var n=a(98661)},98545:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTimeout=function(e,t){const a=(0,n.useRef)(null),l=(0,n.useRef)(e);return(0,n.useEffect)((()=>{l.current=e}),[e]),(0,n.useEffect)((()=>{const e=()=>l.current();if((0,r.isNumber)(t))return a.current=window.setTimeout(e,t),()=>window.clearTimeout(a.current)}),[t]),a};var n=a(98661),r=a(79641)},9836:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(33119)),l=n(a(92664)),o=a(9393),i=a(43025),u=n(a(19955)),s=n(a(4855)),d=a(33965),c=a(21951);const f=s.default.name("autoResizer"),p=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","paddingLeft","paddingRight","width","boxSizing","whiteSpace","wordWrap","paddingTop"];let m;var _=function(){function e(t,a){if((0,r.default)(this,e),m)return m.element=t,m.config=a,m.bindEvents(),m;if(!t)return void f.warn("no element provided to resize!");this.element=t;const n=t.offsetHeight;"original"===a.maxSize&&(a.maxSize=n),"original"===a.minSize&&(a.minSize=n),this.config=a,this.bindEvents(),this.container=this.initializeContainer(),this.clone=this.initializeClone(),m=this}return(0,l.default)(e,[{key:"bindEvents",value:function(){(0,c.addListener)(this.element,"keyup",this.check.bind(this)),(0,c.addListener)(this.element,"keypress",this.check.bind(this)),(0,c.addListener)(this.element,"change",this.check.bind(this)),(0,c.addListener)(this.element,"paste",this.check.bind(this))}},{key:"initializeContainer",value:function(){if(f.log("initializeContainer"),this.container)return this.container;let e=null;return e=document.createElement("jdiv"),e.style.position="absolute",e.style.top="-9999px",e.style.width="0px",e.style.height="0px",e.style.padding="0px",e.style.overflow="hidden",document.body.appendChild(e),e}},{key:"initializeClone",value:function(){if(this.clone)return this.clone;f.log("initializeClone");const e=document.createElement("jdiv");return e.setAttribute("id","jv-autoresize"),this.container.appendChild(e),e}},{key:"updateClone",value:function(){(0,o.each)(p,(e=>{const t=(0,i.getComputedStyleAll)(this.element,e);t&&(this.clone.style[e]=t)})),this.clone.style.display="block"}},{key:"afterResize",value:function(){(u.default.tablet()?this.element.scrollHeight:this.element.offsetHeight)>=this.config.maxSize&&this.element.style.setProperty("overflow-y","auto","important")}},{key:"updateConfig",value:function(e){f.log("updateConfig",e),Object.assign(this.config,e)}},{key:"check",value:function(){this.updateClone();let e=this.element.value||this.element.getAttribute("placeholder")||"";const t=this.element.offsetHeight;let a,n;e=e.length?e:" ",e===this.prevValue&&""==e||(this.clone.innerHTML=(0,d.escape)(e).replace(new RegExp("\\r?\\n","ig"),"<div>.</div>"),a=Math.min(Math.max(this.clone.offsetHeight,this.config.minSize>>0),this.config.maxSize),""==this.element.value&&(a=this.clone.offsetHeight),t!==a&&(n={height:a}),this.prevValue=e,n&&(u.default.mobile()&&(a+=parseInt((0,i.getComputedStyleAll)(this.element,"paddingTop"))+parseInt((0,i.getComputedStyleAll)(this.element,"paddingBottom"))),this.element.setAttribute("style",`height: ${a}px!important`),this.config.onResize&&this.config.onResize.call(this.element),this.config.initCheck"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,n,r,l,o=(a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,l=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e},function(e,t,i){var u=o;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(t=e,e=void 0),"string"==typeof e&&isNaN(new Date(e))&&(e=e.replace(/-/g,"/").replace("T"," ").split(".").shift()+"Z"),e=e?new Date(e):new Date,isNaN(e))throw SyntaxError("invalid date");"UTC:"==(t=String(u.masks[t]||t||u.masks.default)).slice(0,4)&&(t=t.slice(4),i=!0);var s=i?"getUTC":"get",d=e[s+"Date"](),c=e[s+"Day"](),f=e[s+"Month"](),p=e[s+"FullYear"](),m=e[s+"Hours"](),_=e[s+"Minutes"](),h=e[s+"Seconds"](),g=e[s+"Milliseconds"](),b=i?0:e.getTimezoneOffset(),v={d:d,dd:l(d),ddd:u.i18n.dayNames[c],dddd:u.i18n.dayNames[c+7],m:f+1,mm:l(f+1),mmm:u.i18n.monthNames[f],mmmm:u.i18n.monthNames[f+12],yy:String(p).M:_,MM:l(_),s:h,ss:l(h),l:l(g,3),L:l(g>99?Math.round(g/10):g),t:m<12?"a":"p",tt:m<12?"am":"pm",T:m<12?"A":"P",TT:m<12?"AM":"PM",Z:i?"UTC":(String(e).match(n)||[""]).pop().replace(r,""),o:(b>0?"-":"+")+l(100*Math.floor(Math.abs(b)/60)+Math.abs(b)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return t.replace(a,(function(e){return e in v?v[e]:e.slice(1,e.length-1)}))});o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};var i=o;t.default=i},73055:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.useSwipeDetector=function(e){let t=e.element,a=e.onLeftSwipe,n=e.onRightSwipe,o=e.onUpSwipe,i=e.onDownSwipe,u=e.onDownCount,s=e.onTouchEnd,d=e.verticalSwipeThreshold,c=void 0===d?70:d,f=e.horizontalSwipeThreshold,p=void 0===f?30:f;const m=(0,l.useState)(null),_=(0,r.default)(m,2),h=_[0],g=_[1],b=(0,l.useRef)(null),v=(0,l.useRef)(null);return(0,l.useEffect)((()=>{if(!t)return;if(!t.current)return;if(g(t.current),!h)return;if(!h.addEventListener)return;const e=e=>{const t=(0,r.default)(e.touches,1)[0];b.current=t.clientX,v.current=t.clientY},l=e=>{if(rrent-l,f=v.current-s;Md)>Math.abs(f)?d>p?n&&n():d<-p&&a&&a():f>c?o&&o():f<-c?i&&i(f):u&&u(f)},d=()=>{b.current=null,v.current=null,s&&s()};return h.addEventListener("touchstart",e,!1),h.addEventListener("touchmove",l,!1),h.addEventListener("touchend",d,!1),()=>{h.removeEventListener("touchstart",e),h.removeEventListener("touchmove",l),h.removeEventListener("touchend",d)}}),[h,a,n,o,i,u,s,c,p]),e=>g(e)};var r=n(a(67375)),l=a(98661)},71379:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProp=function(e,t,a){return(0,n.isObject)(e)&&(0,r.hasOwn)(e,t)?e[t]:a};var n=a(46322),r=a(28650)},34425:function(e,t,a){"use strict";var n=a(17907);Object.defineProperty(t,"__esModule",{value:!0}),t.redefineProps=void 0;var r=n(a(61125));function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,a){return e!==a[t-1]})).reverse(),d(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,d(this),this)},p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},p.prototype.onCompile=function(){},e.exports=p},36066:function(e,t,a){"use strict";e.exports=function(e){var t={};e=e||{},t.src_Any=a(29369).source,t.src_Cc=a(99413).source,t.src_Z=a(35045).source,t.src_P=a(73189).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><]|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+"[><]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},87538:function(e,t,a){"use strict";a.r(t),t.default={main:"main_e33a",text:"text_db66",callBox:"callBox_daba",waitBox:"waitBox_a628",waitText:"waitText_bf0d",timerBox:"timerBox_e600",count:"count_e3a0",connectBox:"connectBox_b32f",connectIcon:"connectIcon_fa45",pin:"pin_a076"}},43893:function(e,t,a){"use strict";a.r(t),t.default={pinBox:"pinBox_f322",pinBoxBig:"pinBoxBig_e918",pin2:"pin2_e213",pin3:"pin3_dac8",pin1:"pin1_f9c7",ochange:"ochange_ff11"}},99645:function(e,t,a){"use strict";a.r(t),t.default={header:"header_c44a",body:"body_a618",bodyInfo:"bodyInfo_d05f",bodyInfoChat:"bodyInfoChat_ddaa",bodyInfoChatText:"bodyInfoChatText_ef8c",bodyInfoText:"bodyInfoText_c3ca",periodSelectWrap:"periodSelectWrap_a6d2",inputPhone:"inputPhone_b92f",successHeaderIcon:"successHeaderIcon_eb1e",tryAgainText:"tryAgainText_ce66",tryAgainLink:"tryAgainLink_ac3a"}},50732:function(e,t,a){"use strict";a.r(t),t.default={body:"body_bd93",message:"message_bb36",classNameInputPhone:"classNameInputPhone_c902"}},12959:function(e,t,a){"use strict";a.r(t),t.default={popup:"popup_d227",content:"content_e21f",modal:"modal_f699",float:"float_ef86",logo:"logo_b881",actions:"actions_b02e",horizontal:"horizontal_c24f",screen:"screen_fc27",actionsWrapper:"actionsWrapper_cab2",buttons:"buttons_b488",form:"form_c65c",eulaContainer:"eulaContainer_e636",mobile:"mobile_becf",nps_poll:"nps_poll_f5a1",ios:"ios_b576",input:"input_c4a8",colored:"colored_a4e4",hidden:"hidden_c76e",checkbox:"checkbox_d312",checked:"checked_f6c1",eulaText:"eulaText_e135",Xleft_center:"Xleft_center_f68e",Xtop_left:"Xtop_left_eac2",Xbottom_left:"Xbottom_left_b114",Xright_center:"Xright_center_ae2d",Xtop_right:"Xtop_right_d2c2",Xbottom_right:"Xbottom_right_b13e",Xtop_center:"Xtop_center_af3a",Xbottom_center:"Xbottom_center_be64",animation:"animation_ac46"}},57597:function(e,t,a){"use strict";a.r(t),t.default={main:"main_cc0a",__static:"__static_d449",header:"header_cce8",body:"body_c1be",noShadow:"noShadow_eef7",mobile:"mobile_eace",input:"input_b8a5",popup:"popup_f915",show:"show_c2b3",popupFull:"popupFull_af26",hide:"hide_d558",headerBox:"headerBox_bde8",fadeIn:"fadeIn_d4b6",fadeOut:"fadeOut_bf9b",loading:"loading_c481",eulaContainer:"eulaContainer_f0d0"}},14325:function(e,t,a){"use strict";a.r(t),t.default={checkbox:"checkbox_d7cf",_green:"_green_f76a",_checked:"_checked_b90d",_blue:"_blue_ce5a",_grey:"_grey_b7f4",_error:"_error_d662",_mobile:"_mobile_a7cd"}},47084:function(e,t,a){"use strict";a.r(t),t.default={main:"main_b8bf",__mobile:"__mobile_af5c",text:"text_ca30"}},71528:function(e,t,a){"use strict";a.r(t),t.default={button:"button_c828",_disabled:"_disabled_c78b",_medium:"_medium_bd22",text:"text_c605",_blue:"_blue_bd3a",_grey:"_grey_fdaf",__ios:"__ios_f85e",inputButton:"inputButton_fa7b",__mobileChat:"__mobileChat_c5d3",buttonIcon:"buttonIcon_c1b3",_green:"_green_e2e9",_error:"_error_ce73"}},71207:function(e,t,a){"use strict";a.r(t),t.default={scrollForm:"scrollForm_a60b",__ad:"__ad_fb84",__hide:"__hide_d32c",__mobile:"__mobile_a4ec",textToForm:"textToForm_d431"}},42805:function(e,t,a){"use strict";a.r(t),t.default={closeButton:"closeButton_c4a1",closeIcon:"closeIcon_f789",action:"action_d463",drag:"drag_e20c",__call:"__call_d0c6",popupClose:"popupClose_a52c"}},12888:function(e,t,a){"use strict";a.r(t),t.default={main:"main_acd8",closing:"closing_de10",opened:"opened_e0c7",opening:"opening_f93b",closed:"closed_fcfa",__bottom:"__bottom_ae99",__top:"__top_d8ed",__right:"__right_c67c",__left:"__left_e4f8"}},22760:function(e,t,a){"use strict";a.r(t),t.default={fieldWrap:"fieldWrap_a1fc",hint:"hint_b34c",inputField:"inputField_e3ea",__bluredEmpty:"__bluredEmpty_b507",_grey:"_grey_b775",_blue:"_blue_c596",_error:"_error_c206",__textarea:"__textarea_ea2d",_disabled:"_disabled_dcab",__inputChat:"__inputChat_f803",__ios:"__ios_d55e",__emailChat:"__emailChat_daf8",__mobile:"__mobile_b96b",__valid:"__valid_f694",currentItem:"currentItem_b88b",_green:"_green_de28",_open:"_open_ba0f",selectPopup:"selectPopup_ab52",itemSelected:"itemSelected_dc0d",item:"item_ea2f",__scroll:"__scroll_cf14",iconSelect:"iconSelect_bb1f",rail:"rail_b70a",iconValid:"iconValid_be8c"}},86762:function(e,t,a){"use strict";a.r(t),t.default={root:"root_d2dc",__ios:"__ios_c2c6",__green:"__green_f997",__grey:"__grey_bd65",__blue:"__blue_b314",__withLabel:"__withLabel_ee37",__smSize:"__smSize_e64b",__mdSize:"__mdSize_a0a6",__lgSize:"__lgSize_c041",__xlSize:"__xlSize_e7d9",__xsSize:"__xsSize_a8e2",__xsRadius:"__xsRadius_dfa7",__smRadius:"__smRadius_d71b",__mdRadius:"__mdRadius_e1da",__lgRadius:"__lgRadius_aadd",__xlRadius:"__xlRadius_cff1",default:"default_bdf5",filled:"filled_a02a",unstyled:"unstyled_ae13",inset:"inset_dff5",__active:"__active_b48c",label:"label_ce03",__invalid:"__invalid_af94",rightSection:"rightSection_a4e6",error:"error_dd8c"}},44064:function(e,t,a){"use strict";a.r(t),t.default={wrapper:"wrapper_c1e2"}},20404:function(e,t,a){"use strict";a.r(t),t.default={select:"select_ef5c",dropIcon:"dropIcon_f8c4"}},80810:function(e,t,a){"use strict";a.r(t),t.default={root:"root_eb88",__withBorder:"__withBorder_b78b",__xsShadow:"__xsShadow_daab",__smShadow:"__smShadow_d58e",__mdShadow:"__mdShadow_a2aa",__lgShadow:"__lgShadow_edea",__xlShadow:"__xlShadow_b7db",__xsRadius:"__xsRadius_d2b9",__smRadius:"__smRadius_ca58",__mdRadius:"__mdRadius_c586",__lgRadius:"__lgRadius_f7b0",__xlRadius:"__xlRadius_c933",__xsPadding:"__xsPadding_be5c",__smPadding:"__smPadding_c0e1",__mdPadding:"__mdPadding_b6a2",__lgPadding:"__lgPadding_c53b",__xlPadding:"__xlPadding_a8b1"}},35247:function(e,t,a){"use strict";a.r(t),t.default={arrow:"arrow_b647",__top:"__top_c951",__left:"__left_fb34",__bottom:"__bottom_cbe2",__right:"__right_c895"}},42960:function(e,t,a){"use strict";a.r(t),t.default={input:"input_da7b",dropIcon:"dropIcon_c477",dropDown:"dropDown_c3dd"}},97629:function(e,t,a){"use strict";a.r(t),t.default={root:"root_a0cd",__hovered:"__hovered_d4ae",__ios:"__ios_b4cd",__blue:"__blue_e5fe",__withinSelectedus_bf24",__lgRadius:"__lgRadius_c1fe",__xlRadius:"__xlRadius_cdf6",__xsSize:"__xsSize_f42e",__smSize:"__smSize_b563",__mdSize:"__mdSize_c70c",__lgSize:"__lgSize_f3fc",__xlSize:"__xlSize_f230",default:"default_d5d6",filled:"filled_d60a",unstyled:"unstyled_e559",label:"label_c27a",inset:"inset_faf2",__active:"__active_bbb6",__invalid:"__invalid_b6bf",rightSection:"rightSection_f0c3",error:"error_b1e0"}},14072:function(e,t,a){"use strict";a.r(t),t.default={main:"main_fc8d",__logo:"__logo_aec3",__mobile:"__mobile_d436",department:"department_bbb4",circle:"circle_af7c",__green:"__green_d78a",__grey:"__grey_b6fc",__blue:"__blue_dd5b",text:"text_db85"}},55001:function(e,t,a){"use strict";a.r(t),t.default={wrapper:"wrapper_b09a",content:"content_f193",__tablet:"__tablet_ef13",__mobile:"__mobile_a01f",title:"title_bcd2",checkboxContainer:"checkboxContainer_d1eb",checkbox:"checkbox_ff7d",__checked:"__checked_da09",__green:"__green_b4c0",__grey:"__grey_d23c",__blue:"__blue_a8db",message:"message_a749",agreement:"agreement_c27d",scrollBlock:"scrollBlock_a3a6",rail:"rail_a130",cancel:"cancel_a5fb",cancelBtn:"cancelBtn_f81b"}},23624:function(e,t,a){"use strict";a.r(t),t.default={container:"container_f6fc",checkbox:"checkbox_dba0",text:"text_b6a7"}},25778:function(e,t,a){"use strict";a.r(t),t.default={eulaPopup:"eulaPopup_a7f0",_mobile:"_mobile_a4b7",__static:"__static_cbc5",__call:"__call_d170",_tablet:"_tablet_c16a",text:"text_b0ac",title:"title_e276",formText:"formText_d4cb",popupContent:"popupContent_c488",popupCheckbox:"popupCheckbox_d360","show-popup":"show-popup_b106",__offlineForm:"__offlineForm_e369",checkbox:"checkbox_f947",_checked:"_checked_beeb",_grey:"_grey_c627",_blue:"_blue_c984",cancel:"cancel_f059",scrollText:"scrollText_aa36",__hidden:"__hidden_defd",textBlock:"textBlock_f99f",rail:"rail_a4b2"}},39771:function(e,t,a){"use strict";a.r(t),t.default={wrap:"wrap_e343",__disabled:"__disabled_ff9f",iconFile:"iconFile_b2ca",iconAttach2:"iconAttach2_b2f8",uploadFwrap:"uploadFwrap_bcb1",uploadButton:"uploadButton_b375"}},11531:function(e,t,a){"use strict";a.r(t),t.default={main:"main_e305"}},9218:function(e,t,a){"use strict";a.r(t),t.default={headerBox:"headerBox_ffee",__mobile:"__mobile_e1fa",hideCorners:"hideCorners_b174",header:"header_d0eb",_fadeOut:"_fadeOut_f904",info:"info_e1d5",_expanded:"_expanded_d80a",_light:"_light_cdbd",title:"title_ae38",agentName:"agentName_d12d",_dark:"_dark_c3aa",_offline:"_offline_b8c8",callMe:"callMe_a90b",_mobile:"_mobile_b171",__ios:"__ios_c4e9",headerContainer:"headerContainer_bc6c",__chatpage:"__chatpage_a6ca",_tablet:"_tablet_bdbc",closeBox:"closeBox_a01e",__call:"__call_fe03",callIcon:"callIcon_d2c6",showContent:"showContent_c776","_fade-in":"_fade-in_f5e6","_fade-out":"_fade-out_cc39",__agents:"__agents_b521",mobileBack:"mobileBack_dc77",pattern:"pattern_b6c4",visibilityHack:"visibilityHack_be06",menuWrap:"menuWrap_eb0a",menuButtonWrap:"menuButtonWrap_a1f8",menuIcon:"menuIcon_c95c",corner:"corner_ced5",toDebugPanel:"toDebugPanel_c1a0",_leftButton:"_leftButton_b0d3",_rightButton:"_rightButton_b6ec"}},54162:function(e,t,a){"use strict";a.r(t),t.default={input:"input_fcde",__mobile:"__mobile_d9e4",tdTextarea:"tdTextarea_ec81",inputField:"inputField_ae29",sendButton:"sendButton_ffec",__filedisabled:"__filedisabled_e4cd",inputContainer:"inputContainer_cbd5",windowsPhomoji_e8b3",wrapMargin:"wrapMargin_e166",quoteContainer:"quoteContainer_f0f0",__show:"__show_d84b",show:"show_f909",__hide:"__hide_b80b",hide:"hide_fba1",quote:"quote_c47c",quoteIcon:"quoteIcon_adb6",quoteClose:"quoteClose_b9e0",quoteCloseIcon:"quoteCloseIcon_ec39"}},91059:function(e,t,a){"use strict";a.r(t),t.default={iconEmoji:"iconEmoji_f3ca",__disabled:"__disabled_a21a",emojiWrap:"emojiWrap_d10d"}},31308:function(e,t,a){"use strict";a.r(t),t.default={iconPanel:"iconPanel_e36f",__mobile:"__mobile_c526"}},30240:function(e,t,a){"use strict";a.r(t),t.default={popup:"popup_c5ff",hidePopup:"hidePopup_f179",show:"show_b231",showPopup:"showPopup_fcdd",childrenWrap:"childrenWrap_dfac",pip:"pip_d592"}},2037:function(e,t,a){"use strict";a.r(t),t.default={iconMenu:"iconMenu_ff08",__disabled:"__disabled_ecdb",menuWrap:"menuWrap_ca42",menu:"menu_b3d8",hidePopup:"hidePopup_a1c9",menuItem:"menuItem_f316",pip:"pip_ec47",show:"show_a451",showPopup:"showPopup_b238"}},39604:function(e,t,a){"use strict";a.r(t),t.default={main:"main_eeb4",avatarBox:"avatarBox_e331",iconAnonymous:"iconAnonymous_ff20",caption:"caption_e283",introducePopup:"introducePopup_c1f8",introduceText:"introduceText_da9b",popupContent:"popupContent_c7aa",__mobile:"__mobile_daa4"}},18292:function(e,t,a){"use strict";a.r(t),t.default={wrapper:"wrapper_af43",__mobile:"__mobile_b000",__ios:"__ios_d941",root:"root_ef79",container:"container_cbc5",helloBox:"helloBox_d025",form:"form_f4cb",selectItem:"selectItem_adfe",__selected:"__selected_f0dd",__hovered:"__hovered_a1f1",icon:"icon_c0b8",overriddenTextareaRightSection:"ovame:"agentName_c70a",avatarBox:"avatarBox_eb35",__isAnimated:"__isAnimated_f927",time:"time_f7bc",_ag0b"}},rail_a295",scrollWrap:"scrollWrap_bfdb",avatarShadow:"avatarShadow_a077",__show:"__show_eabf"}},91651:function(e,t,a){"use strict";a.r(t),t.default={main:"main_d40c",__mobile:"__mobile_dc49",text:"text_cf45",error:"error_c249",__flash:"__flash_ea78",flash:"flash_fe6b",showBtn:"showBtn_e5ef",__disabled:"__disabled_e154",__green:"__green_f5e6",__blue:"__blue_fed3",__grey:"__grey_a49d",time:"time_ae6f"}},46809:function(e,t,a){"use strict";a.r(t),t.default={wrapper:"wrapper_f8a9",__green:"__green_ba18",__blue:"__blue_cf56",__grey:"__grey_d4db",validateIcon:"validateIcon_c6bc",text:"text_f908"}},64545:function(e,t,a){"use strict";a.r(t),t.default={main:"main_c281",message:"message_b442",successIcon:"successIcon_bfed",rubleIcon:"rubleIcon_df07",text:"text_fd06",info:"info_d002",productName:"productName_c698",amountWrap:"amountWrap_a353",amount:"amount_e31f",actionBtn:"actionBtn_eda3",__error:"__error_fc24",_tinkoff:"_tinkoff_b8f2",actionText:"actionText_b354",successText:"successText_a0b3",__success:"__success_d3ef"}},66265:function(e,t,a){"use strict";a.r(t),t.default={wrap:"wrap_ccf8",text:"text_a912",buttonsWrap:"buttonsWrap_a11c",button:"button_d446",__disabled:"__disabled_d228",linkIcon:"linkIcon_d3d8",icon:"icon_e58c"}},63960:function(e,t,a){"use strict";a.r(t),t.default={container:"container_c91e",main:"main_e8ee",time:"time_adc0",_preview:"_preview_fa6f",_notPreview:"_notPreview_e3fb",_client:"_client_aa58",_green:"_green_cffd",_grey:"_grey_e572",_blue:"_blue_a3e7",previewLink:"previewLink_b2ce",__flash:"__flash_a49f",flash:"flash_f679",__quote:"__quote_e818",mediaIcon:"mediaIcon_a0fb",_uploading:"_uploading_df5e",iconMedia:"iconMedia_a82d",mediaComplete:"mediaComplete_f009",_agent:"_agent_b82e",_mobile:"_mobile_cf74",mediaText:"mediaText_cc57",mediaFname:"mediaFname_bff3",locationContainer:"locationContainer_d163",locationLink:"locationLink_b78b",medireviewct";a.entWrap_df86",content:"content_df42",imgWrap:"imgWrap_a1f2",time:"time_b8d2"}},64615:function(e,t,a){"use strict";a.r(t),t.default={reply:"reply_d7ba",__client:"__client_a517",__desktop:"__desktop_ef70",__agent:"__agent_d55a",__aloneReply:"__aloneReply_c565",replyIcon:"replyIcon_b4e4"}},33683:function(e,t,a){"use strict";a.r(t),t.default={sendErre,t,a){"use strict";a.r(t),t.default={main:"main_b612",__hide:"__hide_e033",button:"button_e025",__green:"__green_dee1",__blue:"__blue_edee",__grey:"__gre48:function(e,t,a){"use strict";a.r(t),t.default={main:"main_d883",avatar:"avatar_bb2a",img:"img_e8dc",text:"text_f731",_mobile:"_mobile_a98f"}},48524:function(e,t,elayed940:function(e,t,a){"use strict";a.r(t),t.default={quote:"quote_cbcc",author:"author_bb4c",message:"message_e765",container:"container_f4b0",__dark:"__dark_b742",__light:"__light_fb45",__active:"__active_b767",__green:"__green_e921",__grey:"__grey_afaf",__blue:"__blue_b1cb",__aloneQuote:"__aloneQuote_c78d",__media:"__media_ad35",aloneEmoji:"aloneEmoji_bb3e",previewMediaPhoto:"previewMediaPhoto_a98c"}},12947:function(e,t,a){"use strict";a.r(t),t.default={main:"main_c538",__green:"__green_c484",__blue:"__blue_feae",__grey:"__grey_dd02",__ios:"__ios_c1f5",title:"title_a611",text:"text_d99e",label:"label_ab10",__tablet:"__tablet_ba4f",__hide:"__hide_a3af",formBlock:"formBlock_a644",__show:"__show_ee50",button:"button_d697",rateBlock:"rateBlock_be5a",close:"close_d3cd",closeIcon:"closeIcon_de71",iconBox:"iconBox_cb90",icon:"icon_bcc8",__star:"__star_d5ab",__selected:"__selected_eb52",ic,infoText:"infoText_e839",iconVk:"iconVk_cff4",iconFb:"iconFb_f76d",iconSb:"iconSb_be6e",box:"box_f461",iframe:"iframe_b72d",__vk:"__vk_e4ec"}},49563:function(e,t,a){"use strict";a.r(t),t.default={wrap:"wrap_d385",textBox:"textBox_cd77",text:"text_de14",iconHeader:"iconHeader_d300",__vk:"__vk_aee0",__fb:"__fb_b730",linkBox:"linkBox_c979",link:"link_c928",qrWrap:"qrWrap_df64",__zoomed:"__zoomed_f649"}},58621:function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 8 16"><g clip-path="url(#a)"><path fill="_COLOR1_" d="M1.14295 0C.722161 0 .381045.341116.381045.761905c0 .420785.341116.761905.761905.761905h4.25899L.53714 6.38858c-.296654.29665-.296657.77762-.000005 1.07428.296653.29665.777625.29665 1.074285 0L6.47621 2.5981v4.25905c0 .42079.34111.7619.7619.7619.42078 0 .76189-.34111.76189-.7619V0H1.14295Z"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h8v16H0z"/></clipPath></defs></svg>'},36683:function(e,t,a){"use strict";a.r(t),t.default='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient x1="50%" y1="3.556%" x2="50%" y2="97.988%" id="a"><stop stop-color="#00C6FF" offset="0%"/><stop stop-color="#0371FF" offset="100%"/></linearGradient></defs><path d="M7.5 0C3.375 0 0 3.105 0 6.938c0 2.16 1.065 4.087 2.737 5.362l.046 2.7 2.587-1.41-.022-.008a8.106 8.106 0 0 0 2.152.293c4.125 0 7.5-3.105 7.5-6.938C15 3.106 11.625 0 7.5 0zm.773 9.307L6.405 7.335l-3.78 1.972L6.66 5.085l1.935 1.853 3.637-1.853-3.96 4.222z" transform="translate(1)" fill="url(#a)"/></svg>'},74783:function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><mask id="a" width="14" height="14" x="1" y="1" maskUnits="userSpaceOnUse" style="mask-type:luminance"><path fill="#fff" d="M14.9307 1H1.06934v14H14.9307V1Z"/></mask><g mask="url(#a)"><path fill="#07F" d="M1.06934 7.72c0-3.16784 0-4.75175.97437-5.73588C3.01809 1 4.58633 1 7.7228 1h.55446c3.13644 0 4.70474 0 5.67904.98412.9744.98413.9744 2.56804.9744 5.73588v.56c0 3.1678 0 4.7518-.9744 5.7359C12.982 15 11.4137 15 8.27726 15H7.7228c-3.13647 0-4.70471 0-5.67909-.9841-.97437-.9841-.97437-2.5681-.97437-5.7359v-.56Z"/><path fill="#fff" d="M8.44475 11.0859c-3.15925 0-4.96122-2.18754-5.0363-5.82754h1.58251c.05198 2.67166 1.21862 3.80333 2.14271 4.03666V5.25836h1.49015v2.30415c.91254-.09916 1.87118-1.14915 2.19458-2.30415h1.4902c-.2484 1.42334-1.288 2.47333-2.0273 2.90499.7393.35 1.9234 1.26584 2.3739 2.92255h-1.6404c-.3523-1.10838-1.23009-1.96588-2.39098-2.08255v2.08255h-.17907Z"/></g></svg>'},18954:function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 37 37">\n  <g clip-path="url(#a)">\n    <path fill="_COLOR1_" d="M35.1385 18.5001a16.65 16.65 0 0 1-32.9801 3.2483A16.6502 16.6502 0 0 1 18.4885 1.8501a16.65 16.65 0 0 1 16.65 16.65Z"/>\n    <path fill="#586069" d="M13.8143 19.4272c0 1.3388-.7694 2.4275-1.7081 2.4275s-1.7081-1.0887-1.7081-2.4275c0-1.3387.7694-2.4274 1.7081-2.4274s1.7081 1.0848 1.7081 2.4274ZM26.598 19.4272c0 1.3388-.7694 2.4275-1.7119 2.4275-.9426 0-1.7081-1.0887-1.7081-2.4275 0-1.3387.7694-2.4274 1.7081-2.4274.9386 0 1.7119 1.0848 1.7119 2.4274ZM14.8261 17.8306a.4655.4655 0 0 1-.4501-.3347c-.504-1.7081-2.2121-3.0122-4.2318-3.243a.4714.4714 0 0 1-.1845-.0474.4706.4706 0 0 1-.242-.2839.4689.4689 0 0 1 .1675-.5134.4687.4687 0 0 1 .3629-.0863c2.4082.2731 4.4395 1.8427 5.0473 3.9086a.4691.4691 0 0 1-.3193.5809.3855.3855 0 0 1-.15.0192ZM22.17 17.8306a.3824.3824 0 0 1-.1307 0 .4693.4693 0 0 1-.3193-.5809c.6078-2.0658 2.6352-3.6354 5.0434-3.9086a.4696.4696 0 0 1 .4036.7496.4691.4691 0 0 1-.2959.1814c-2.0389.2309-3.747 1.5389-4.2317 3.2431a.4692.4692 0 0 1-.4694.3154ZM21.847 27.2828a.7697.7697 0 0 1-.5156-.2038 4.1314 4.1314 0 0 0-2.6929-1.0695 4.0662 4.0662 0 0 0-2.9853 1.0618.7704.7704 0 0 1-.5707.3186.77.77 0 0 1-.6098-.2353.769.769 0 0 1-.0994-.9359.7697.7697 0 0 1 .2335-.24 5.7974 5.7974 0 0 1 7.7403 0 .7692.7692 0 0 1-.5155 1.3118l.0154-.0077Z"/>\n  </g>\n  <defs>\n    <clipPath id="a">\n      <path fill="#fff" d="M0 0h33.3v33.3H0z" transform="translate(1.85 1.8501)"/>\n    </clipPath>\n  </defs>\n</svg>'},23808:function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">\n  <g clip-path="url(#a)">\n    <path fill="_COLOR1_" d="M19 10A9.0001 9.0001 0 1 1 1.6843 6.566 9 9 0 0 1 19 10Z"/>\n    <path fill="#586069" d="M15.8059 9.3617a1.1647 1.1647 0 0 1-1.393 1.1398 1.1655 1.1655 0 0 1-.5957-.3192 1.1642 1.1642 0 0 1 .8242-1.9872 1.1644 1.1644 0 0 1 1.1645 1.1666ZM13.1192 8.2055a.2934.2934 0 0 1-.2703-.4034c.0229-.0541.5573-1.2914 2.4309-.9379a.2932.2932 0 0 1-.1081.576c-1.3891-.262-1.7655.5532-1.7821.5885a.2953.2953 0 0 1-.2704.1768ZM6.7186 9.3617a1.1648 1.1648 0 0 1-.7203 1.0743 1.1644 1.1644 0 1 1-.4442-2.241 1.1646 1.1646 0 0 1 1.1645 1.1667ZM4.0152 8.5445a.2848.2848 0 0 1-.1143-.025.289.289 0 0 1-.156-.3785c.0208-.054.5573-1.2892 2.431-.9378a.2933.2933 0 0 1-.1103.576c-1.387-.262-1.7634.5532-1.78.5885a.2973.2973 0 0 1-.2704.1768ZM8.531 13.5239a.441.441 0 0 0 .5455.6907 4.6315 4.6315 0 0 1 3.637-.7895.4397.4397 0 0 0 .3474-.0478.4409.4409 0 0 0-.1667-.8132 5.5099 5.5099 0 0 0-4.3449.9363l-.0182.0235Z"/>\n  </g>\n  <defs>\n    <clipPath id="a">\n      <path fill="#fff" d="M0 0h18v18H0z" transform="translate(1 1)"/>\n    </clipPath>\n  </defs>\n</svg>'},83088:function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 30 32">\n  <path fill="_COLOR1_" d="M29.072 16.0747c0 .4471-.1067.8666-.2853 1.248-1.192 3.8453-6.7725 3.5644-14.7103 3.752-1.3271.0311-.568 1.5982-.1022 5.0382.3031 2.2373-1.1395 5.6729-3.5644 5.6729-3.9982 0-.152-3.1538-3.6871-10.9529C4.8337 16.6658.6116 19 .6116 14.8142v-9.527c0-1.6294.16-3.1956 2.4515-3.4534C5.2844 1.583 4.785 0 7.9893 0h16.0391a2.966 2.966 0 0 1 2.9627 2.9636c0 .6773-.2373 1.2942-.6204 1.7937.9066.5076 1.5289 1.4658 1.5289 2.577 0 .6755-.2365 1.2924-.6187 1.791.9093.5067 1.5333 1.4658 1.5333 2.5787 0 .808-.3271 1.5404-.8542 2.0764a2.944 2.944 0 0 1 1.112 2.2943Z"/>\n  <path fill="_COLOR2_" d="M18.4622 13.1121h7.648c1.04 0 2.016.5564 2.5476 1.4515a.779.779 0 0 1-.2898 1.0373.7786.7786 0 0 1-1.0489-.2444 1.411 1.411 0 0 0-1.2098-.6889h-7.8311c-.776 0-1.4071.6312-1.4071 1.4072s.6311 1.4071 1.4071 1.4071h5.2329a.7777.7777 0 1 1 0 1.5555h-5.2338a2.966 2.966 0 0 1-2.9626-2.9626c0-.9112.4222-1.7174 1.0711-2.2614a2.95 2.95 0 0 1-.8871-2.1093c0-.9138.4249-1.7227 1.0773-2.2658a2.9486 2.9486 0 0 1-.4908-3.5686 2.9502 2.9502 0 0 1 .8632-.947 2.938 2.938 0 0 1-.7573-1.959A2.9665 2.9665 0 0 1 19.1538.001h4.8746a2.9778 2.9778 0 0 1 2.5485 1.4506.778.778 0 0 1-.8606 1.1395.7776.7776 0 0 1-.4763-.3448 1.4172 1.4172 0 0 0-1.2116-.6898h-4.8746c-.776 0-1.4071.6311-1.4071 1.4071s.6311 1.4072 1.4071 1.4072h5.7831c1.04 0 2.0178.5564 2.5484 1.4515a.7768.7768 0 0 1-.035.8733.7769.7769 0 0 1-.518.3079.7776.7776 0 0 1-.7839-.3865 1.3968 1.3968 0 0 0-1.2115-.6907h-6.2782a1.4088 1.4088 0 0 0 0 2.8151h7.192a2.9775 2.9775 0 0 1 2.5484 1.4507.7774.7774 0 0 1-.279 1.0524.778.778 0 0 1-1.0579-.2577 1.398 1.398 0 0 0-1.2115-.6898h-7.3885a1.4092 1.4092 0 0 0-1.3476 1.4075 1.4092 1.4092 0 0 0 1.3476 1.4076Z"/>\n</svg>'},50996:function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">\n  <path fill="_COLOR1_" d="M10 19c4.9706 0 9-4.0294 9-9s-4.0294-9-9-9-9 4.0294-9 9 4.0294 9 9 9Z"/>\n  <path fill="#586069" d="M14.7787 6.8871a1.8045 1.8045 0 0 1-.1581.7528.2474.2474 0 0 1-.3639.106.7215.7215 0 0 0-.8859 0 .2451.2451 0 0 1-.3701-.1102 1.771 1.771 0 0 1-.158-.7527c0-.7549.4304-1.3684.9628-1.3684.5323 0 .9732.6177.9732 1.3725ZM7.149 6.8871a1.8027 1.8027 0 0 1-.158.7528.2454.2454 0 0 1-.3618.106.7466.7466 0 0 0-.445-.1518.7341.7341 0 0 0-.4409.1518.2473.2473 0 0 1-.3639-.106 1.803 1.803 0 0 1-.158-.7528c0-.7549.4304-1.3683.9628-1.3683.5323 0 .9649.6134.9649 1.3683ZM5.4251 10.4034a.3984.3984 0 0 0-.3188.1615.3997.3997 0 0 0-.0617.3521c.47 1.7156 2.4953 3.009 4.9533 3.009 2.4579 0 4.5062-1.3101 4.9596-3.0423a.3907.3907 0 0 0-.2146-.4434.3912.3912 0 0 0-.1722-.0369H5.4251Z"/>\n  <path fill="#fff" d="M9.9958 11.0771a9.0292 9.0292 0 0 0 3.5351-.6738H6.4607a9.0185 9.0185 0 0 0 3.5351.6738Z"/>\n</svg>'},90270:function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">\n  <g clip-path="url(#a)">\n    <path fill="_COLOR1_" d="M11.4205 18.8924c4.9082-.7853 8.2504-5.4007 7.4651-10.3089-.7852-4.9081-5.4007-8.2504-10.3088-7.465C3.6686 1.9036.3264 6.519 1.1117 11.4272c.7853 4.9081 5.4007 8.2503 10.3088 7.4651Z"/>\n    <path fill="#586069" d="M15.2153 8.8397a.1415.1415 0 0 0 .208-.1186 1.1896 1.1896 0 1 0-2.3769 0 .1416.1416 0 0 0 .208.1185 1.8466 1.8466 0 0 1 1.9443 0h.0166ZM6.7373 8.8397a.1414.1414 0 0 0 .208-.1186 1.1894 1.1894 0 1 0-2.3769 0 .1415.1415 0 0 0 .208.1186 1.8465 1.8465 0 0 1 1.9443 0h.0166ZM10.0478 14.1091a6.0655 6.0655 0 0 1-4.0883-1.597.441.441 0 0 1 .599-.6446 5.1512 5.1512 0 0 0 6.8893.0811.4404.4404 0 0 1 .608.0496.4407.4407 0 0 1-.0237.6095 6.0028 6.0028 0 0 1-3.9843 1.5014Z"/>\n  </g>\n  <defs>\n    <clipPath id="a">\n      <path fill="#fff" d="M0 0h18v18H0z" transform="translate(1 1)"/>\n    </clipPath>\n  </defs>\n</svg>'},94939:function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 30 32">\n  <path fill="_COLOR1_" d="M29.072 15.9252c0-.4471-.1067-.8666-.2853-1.248-1.192-3.8453-6.7725-3.5644-14.7103-3.752-1.3271-.0311-.568-1.5982-.1022-5.0382.3031-2.2373-1.1395-5.6729-3.5644-5.6729-3.9982 0-.152 3.1538-3.6871 10.9529-1.889 4.1671-6.1111 1.8329-6.1111 6.0187v9.528c0 1.6293.16 3.1955 2.4515 3.4533 2.2213.2498 1.7218 1.8329 4.9262 1.8329h16.0391a2.9663 2.9663 0 0 0 2.9627-2.9636c0-.6773-.2373-1.2942-.6204-1.7937.9066-.5076 1.5289-1.4658 1.5289-2.5769 0-.6756-.2365-1.2925-.6187-1.7911.9093-.5067 1.5333-1.4658 1.5333-2.5787 0-.808-.3271-1.5405-.8542-2.0765a2.9427 2.9427 0 0 0 1.112-2.2942Z"/>\n  <path fill="_COLOR2_" d="M18.4622 18.888h7.648c1.04 0 2.016-.5565 2.5476-1.4516a.7788.7788 0 0 0-1.3387-.7929 1.4113 1.4113 0 0 1-1.2098.6889h-7.8311c-.776 0-1.4071-.6311-1.4071-1.4071s.6311-1.4071 1.4071-1.4071h5.2329a.7777.7777 0 1 0 0-1.5556h-5.2338a2.9664 2.9664 0 0 0-2.9626 2.9627c0 .9111.4222 1.7173 1.0711 2.2613a2.9508 2.9508 0 0 0-.8871 2.1094c0 .9138.4249 1.7226 1.0773 2.2658a2.9496 2.9496 0 0 0-.871 2.3449 2.9485 2.9485 0 0 0 1.2434 2.1706 2.938 2.938 0 0 0-.7573 1.9591 2.9665 2.9665 0 0 0 2.9627 2.9627h4.8746a2.9782 2.9782 0 0 0 2.5485-1.4507.778.778 0 0 0-.8606-1.1395.7776.7776 0 0 0-.4763.3449 1.4166 1.4166 0 0 1-1.2116.6897h-4.8746c-.776 0-1.4071-.6311-1.4071-1.4071s.6311-1.4071 1.4071-1.4071h5.7831a2.9768 2.9768 0 0 0 1.4653-.3903 2.9767 2.9767 0 0 0 1.0831-1.0612.7768.7768 0 0 0 .0953-.595.7783.7783 0 0 0-.6483-.5862.7776.7776 0 0 0-.7839.3865 1.3971 1.3971 0 0 1-1.2115.6907h-6.2782a1.4086 1.4086 0 0 1-1.3476-1.4076 1.4087 1.4087 0 0 1 1.3476-1.4076h7.192a2.9767 2.9767 0 0 0 2.5484-1.4506.7775.7775 0 0 0-.279-1.0524.778.778 0 0 0-1.0579.2577 1.3986 1.3986 0 0 1-1.2115.6898h-7.3885a1.4092 1.4092 0 0 1-1.3476-1.4076 1.4091 1.4091 0 0 1 1.3476-1.4075Z"/>\n</svg>'},43205:function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">\n  <g clip-path="url(#a)">\n    <path fill="_COLOR1_" d="M18.7573 12.0764c1.146-4.8367-1.8458-9.6866-6.6825-10.8326C7.2382.0978 2.3883 3.0897 1.2423 7.9263.0963 12.763 3.088 17.613 7.9248 18.759c4.8366 1.146 9.6865-1.8459 10.8325-6.6825Z"/>\n    <path fill="#586069" d="M143.4118Object.prototype.hasOwnProperty.call(o,s[u]))return!1;if(t&&e instanceof Element)return!1;for(u=i;0!=u--;)if(("_owner"!==s[u]&&"__v"!==s[u]&&"__o"!==s[u]||!e.$$typeof)&&!l(e[s[u]],o[s[u]]))return!1;return!0}return e!=e&&o!=o}e.e},Refio(!Ca},n.createElement(l.Provider,{value:s},t))}var i=function(e){return Array.isArray(e)?e[0]:e},u=function(e){tion(e,t){if("function"==typeof e)return u(e,t);null!=e&&(e.current=useEffect;function f(e){if(null==e)reigator.userAgent.indexOf("Trident")&&m(e)&&"fixed"===w(e).position)return null;var a=T(e);for(_(a)&&(aar n=w(a);if("none"!==n.transfor=["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filt"+H])}),[]),G=["beforeRead","read","afterRead","beforeMain"se i.reset=!1,n=-1}}},update:(r=function(){return new ull,o=r?Q(r):null,i=a.x+a.width/2-n.width/2,u=a.y+a.heig{position:i},s&&ae),x=!0===d?function(e){var t=e.x,a=e.y,n=window.devicePix((function(e,a){return e[a]=function(e,t,a){var n=Y(e),r=[B,I].indexOf(n)>=0?-1:1,l="function"==typeof a?a(Object.assign({},t,{placement:e})):a,o=l[0],i=l[1];return o=o||0,i=(i|ategy:"absolute",placement:r}),j=de(Object.assign,p?h(U,ue):U);w[E]=se,x[E]=se-W}if(i){var de,ce="x"===E?I:B,fe="x"===E?D:A,pefunctio]-a.rects.reference[u],h=N(l),g=h?"y"===u?h.clientHeight||0:h.clil!=n&&("string"!=typeof n||(n=t.elements.popper.querySelector(n)))&&se(t.elements.popper,n)&&(t.ence,n=e.options,r=n.scroll,l=void 0===r||r,o=n.resize,i=voll",a.update,X)})),i&&u.addEventListener("resize",a.update,X),funopper,ne(Object.assign({},s,{offsets:t.modifiersData.poppgn({},t.popper.style,a.popper),t.styles=a,t.elements.arrow&&Object.assign(t.el&&(R=oe(R));var N=oe(R),H=[];if(l&&H.push(x[M]<=0),i&&H.push(x[R]<=0,x[N]<=0),H.every((function(e){return e}))){w=S,C=!1;break}Ee.name,n=t.rects.reference,r=t.rectsierRefent.se||_,g,E),w=C.state,j=C.stypdate:S||Se,update:M||Me}}),[b,O,a,w,j,M,S]);return i(m)(T)}var Pe=a(42473),xe=a.n(Pe);function Re(e){var t=e.children,a=e.innerRef,r=n.useContext(l),o=n.useCallback((function(e){s(a,e),u(r,e)}),[a,r]);,null)}}),[]),n.useEffect((function(){xe()(Boolean(r),"`Reference` should not be used outside of a `Manager` component.")}),[r]),i(t)({ref:o})}},46831:function(e,t,a){"use strict";a.r(t),a.d(t,{CloseIcon:function(){return m},ReplyIcon:function(){return c}});var n=a(8311),r=(a(98661),a(94184)),l=a.n(r),o=a(40704),i=a(24111),u=function(e){return function(e){return function(e){return e.settings}(e).user}(e).bubbleColor},s="icon_e2a6",d={green:"#18c139",blue:"#0b82f7",grey:"#445669"},c=function(e){var t=e.className,a=e.title,r=e.withoutBubbleColor,c=(0,i.useAppSelector)(u);return(0,n.tZ)(o.default,{className:l()(s,t),color:r?"currentColor":d[c],iconName:"iconReply",title:a})},f="icon_a594",p={green:"#18c139",blue:"#0b82f7",grey:"#445669"},m=function(e){var t=e.className,a=e.title,r=e.withoutBubbleColor,s=(0,i.useAppSelector)(u);return(0,n.tZ)(o.default,{className:l()(f,t),color:r?"currentColor":p[s],iconName:"icon-close",title:a})}},49174:function(e,t,a){"use strict";a.r(t),a.d(t,{ContactForm:function(){return ce}});var n=a(8311),r=a(98661),l=a(15961),o=a(2535),i=a(75686),u=a(47245),s=a(44145),d=a(81152),c=a(4855),f=a(47060),p=a(39733),m=a(79868),_=a(68403),h=a(54415)7)),x=a(43914),R=a(98960),N=a.n(R),I=a(26932),D=a(79523),A=a(49963),B=a(23336),L=function(e){switch(e){case"name":return(0,P.default)("lblIntroduceName");case"email":return(0,P.default)("lblYourEmail");case"phone":return(0,P.default)("lblYourPhone")}},F=function(e){switch(e){case"phone":return"tel";case"email":return"email";case"name":return"name";default:return"text"}},z=function(e,t){return N()[e](t)},H=function(e){var t,a,n,r,l=e.isOnline,o=e.isIntroduced,i=e.values,u=e.logger;if(!l){if(T.messageActions.setInputDisabled(!1),o||(I.clientDispatchers.setClientEmail(null!==(t=i.email)&&void 0!==t?t:null),I.clientDispatchers.setClientPhone(null!==(a=i.phone)&&void 0!==a?a:null),I.clientDispatchers.setClientName(null!==(n=i.name)&&void 0!==n?n:null),I.clientDispatchers.setClientDescription(null!==(r=i.description)&&void 0!==r?r:null),I.clientDispatchers.setIsIntroduced(!0)),I.appDispatchers.setChatStarted(!0),D.introduceActions.setClientContactInfo(i,!1,!0),A.connectionAdapter.checkConnection(),!(0,k.isAssistantBot)()){var d=T.messageActions.getOfflineSuccessText();d&&T.messageActions.systemMessageOnce(d)}A.connectionAdapter.isConnected()&&(0,M.sendOfflineTmpMessages)();var c=(0,s.getLastClientMessage)();return u.log("lastClientMessage",c),c&&T.messageActions.checkMessageStatus(c.private_id),(0,x._callUserFunction)("onOfflineFormSubmit"),void h.Monitoring.telemetryOnce(g.TelemetryName.NEWOFFLINE_FORM_SUBMIT)}o?(D.introduceActions.setIntroduce(i),A.connectionAdapter.checkConnection()):((0,B.reportCampaignContactsStat)(),D.introduceActions.setClientContactInfo(i,!1,!0),I.clientDispatchers.setIsIntroduced(!0))},W=function(){var e=(0,E.useAppSeleline,a=e.chatStarted,n=(0,E.useAppSelector)(w.selectClient),l=(0,E.useAppSelector)(j.selectEula),o=(0,E.useAppSelector)(j.selectUserSettings),i=o.bubbleColor,u=o.contactsSettings,s=S.default.mobileOrTablet(),d=S.default.ios(),c=(0,r.useMemo)((function(){return function(e,t){return Object.keys(e).reduce((function(a,n){var r=n,l=e[r];return(null==l?void 0:l.show)&&(a.values[r]=function(e,t){return t[e]}(r,t)||"",a.validation[r]=l.required),a}),{validation:{},values:{}})}(u,n)}),[]);return{client:n,eula:l,bubbleColor:i,contactsSettings:u,isOnline:t,isMobile:s,isIOS:d,chatStarted:a,formShape:c}},q={container:"container_f8ea",overlay:"overlay_b9fb",wrapper:"wrapper_aa74",focus:"focus_b606",submitted:"submitted_f88e",green:"green_e49c",blue:"blue_acb6",grey:"grey_c4c5",socialText:"socialText_fc74",__show:"__show_e81d",link:"link_bb3c",button:"button_e375"},U=function(){return U=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},U.apply(this,arguments)},V=(0,r.forwardRef)((function(e,t){var a=e.children;return(0,n.tZ)("jdiv",U({ref:t,className:q.container},{children:a}))}));V.displayName="ContactFormContainer";var G=a(94184),Z=a.n(G),$=a(15496),K=function(){return K=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},K.apply(this,arguments)},J=function(e){var t,a=e.children,r=e.color,l=e.isSubmitted,o=e.hasFocus,i=e.onOverlayClick;return(0,n.BX)("jdiv",K({className:Z()(q.wrapper,q[r],(t={},t[q.focus]=o,t[q.submitted]=l,t))},(0,$.withLocator)("CONTACTS_FORM"),{children:[!o&&(0,n.tZ)("jdiv",K({className:q.overlay},i)),a]}))},X=function(){return X=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},X.apply(this,arguments)},Y=function(e){vr=e.onSocialClick;return(0,n.BX)("jdiv",X({className:q.socialText},{children:["".concat((0,P.default)("introduce_social")," "),t&&(0,n.tZ)("jdiv",X({className:q.link},(0,O.onClickHandler)((function(){return r("vk")}),!1,!0),{children:(0,P.default)("social_vk")})),t&&a&&" ".concat((0,P.default)("introduce_or")," "),a&&(0,n.tZ)("jdiv",X({className:q.link},(0,O.onClickHandler)((function(){return r("fb")}),!1,!0),{children:"Facebook"}))]}))},Q={filled:"filled_c3e5",__green:"__green_fa01",__blue:"__blue_c6c6",__grey:"__grey_ee4f",light:"light_ee74",outline:"outline_eb20",subtle:"subtle_ab77",white:"white_fd15",__xsSize:"__xsSize_ab2f",__compact:"__compact_ba41",__smSize:"__smSize_cf03",__mdSize:"__mdSize_b15b",__lgSize:"__lgSize_b105",__xlSize:"__xlSize_c9a5",__xsRadius:"__xsRadius_c659",__smRadius:"__smRadius_b7ee",__mdRadius:"__mdRadius_e8a2",__lgRadius:"__lgRadius_cbd8",__xlRadius:"__xlRadius_eba8",__uppercase:"__uppercsOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ee.apply(this,arguments)},te=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},ae=(0,r.forwardRef)((function(e,t){var a,r,l,o=e.children,i=e.className,u=e.color,s=e.compact,d=e.disabled,c=e.fullWidth,f=e.leftIcon,p=e.radius,m=e.rightIcon,_=e.size,h=e.uppercase,g=e.variant,b=e.isIos,v=e.qaId,y=te(e,["children","className","color","compact","disabled","fullWidth","leftIcon","radius","rightIcon","size","uppercase","variant","isIos","qaId"]),O=g?Q[g]:void 0;return(0,n.BX)("jdiv",ee({ref:t,disabled:d,className:Z()(Q.root,O,Q["__".concat(u)],Q["__".concat(_,"Size")],Q["__".concat(p,"Radius")],(a={},a[Q.__compact]=s,a[Q.__disabled]=d,a[Q.__fullWidth]=c,a[Q.__uppercase]=h,a[Q.__ios]=b,a),i)},(0,$.withLocator)(v),y,{children:[f&&(0,n.tZ)("span",ee({className:Z()(Q.icon,(r={},r[Q.__left]=f,r))},{children:f})),o,m&&(0,n.tZ)("span",ee({className:Z()(Q.icon,(l={},l[Q.__right]=m,l))},{children:m}))]}))}));ae.displayName="Button",ae.defaultProps={color:"green",size:"sm",radius:"sm",variant:"filled"};var ne=a(90361),re={wrapper:"wrapper_aa96",hint:"hint_fe13",input:"input_efa2",green:"green_b91e",grey:"grey_add7",blue:"blue_bb6f",error:"error_dab2",ios:"ios_d00b",valid:"valid_b3c8"},le=function(){return le=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},le.apply(this,arguments)},oe=function(e){var t,a=e.type,r=e.name,l=e.value,o=e.color,i=e.hint,u=e.placeholder,s=e.isIOS,d=e.error,c=enFocus,_=:u,b=o?re[o]:void 0;return(0,n.BX)("jdiv",le({className:re.wrapper},{children:[i&&(0,n.tZ)("jdiv",le({className:re.hint},{children:g})),(0,n.tZ)("input",le({type:a,name:r,className:Z()(re.input,(t={computedColor:b},t[re.ios]=s,t[re.error]=d,t)),value:l,placeholder:g,onFocus:function(){return null==m?void 0:m()},onBlur:function(){return null==_?void 0:_()},onChange:function(e){return p(e.target.value)}},(0,ne.withLocator)(h))),f&&(0,n.tZ)("jdiv",{className:re.valid})]}))},ie=function(){return ie=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ie.apption(e){var t=e.fields,a=e.values,r=e.validation,l=e.errors,o=e.color,i=e.isIOS,u=e.isSubmitted,s=e.onFieldChange,d=e.onFieldValid,c=e.onSubmit;return(0,n.BX)(n.HY,{children:[Object.keys(t).map((function(e){return(0,n.tZ)(oe,{type:F(e),vse())},e)})),(0,n.tZ)(ae,ie({size:"md",color:o,className:q.button,fullWidth:!0,disabled:u},c,{qaId:"CONTACTS_FORM_SUBMIT"},{children:u?(0,P.default)("lblThanks"):(0,P.default)("lblSend")}))]})},se=function(){return se=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},se.apply(this,arguments)},de=c.default.name("ContactFormNea=e.messages;(0,l.useErrorCatcher)("ContactForm");var c=a[0],E=W(),C=E.client,w=E.eula,j=E.bubbleColor,S=E.formShape,M=E.isMobile,T=E.isIOS,k=E.isOnline,P=E.chatStarted,x==c.get("body"))||void 0===t?void 0:t.inited),N=w&&!C.eulaAccepted,I=(0,o.useForm)({initialValues:S.values,validate:function(e){return function(e,t){var a=Object.keys(t).some((function(e){return t[e]}));return Object.keys(e).reduce((function(n,r,l,o){var i=e[r];return n[r]=t[r]?!(i.trim().length>0&&z(r,i)):a?i.trim().length>0&&!z(r,i):i.trim().length>0?!z(r,i):!o.some((function(t){return Boolean(e[t])})),n}),{})}(e,S.validation)}}),D=I.values,A=I.submitCount,B=I.isValid,L=I.setFieldValue,F=I.errors,q=I.onSubmit,U=(0,r.useState)(x||R),G=U[0],Z=U[1],$=(0,r.useState)(x),K=$[0],X=$[1],Q=(0,r.useState)(null),ee=Q[0],te=Q[1],ae=(0,r.useRef)(null),ne=P&&!M&&!(0,_.hasIntegration)(C.haull==ee?void 0:ee.links.fbUrl)||(null==ee?void 0:ee.links.vkUrl)),re=i.default.getComponent(u.Component.SCROLL_CONTAINER),le=q((function(){if(!N||C.eulaAccepted){if(de.log("SUBMIT CONTACTS",D),M)(0,y.getPageWindow)().document.activeElement.blur();X(!0),H({isOnline:k,isIntroduced:x,values:D,logger:de})}else v.default.showEula(!0,null,"chatIntroduceNew")}));return(0,p.useUpdateEffect)((function(){X(!1)}),[D]),(0,p.useUpdateEffect)((ateEffect)((function(){if(!B){var e=k?g.TelemetryName.CHAT_INTRODUCE:g.TelemetryName.OFFLINE_SENT_FAIL;h.Monitoring.telemetry(e,{param1:"formSubmitFail",param2:(0,_.getContactSettingsInfo)(),param3:JSON.stringify(F)})}}),[A]),(0,r.useEffect)((function(){!R&&c.set("body",{inited:!0}),te(m.default.getJoints())}),[]),(0,n.BX)(V,se({ref:function(e){ae.current=e,i.default.set(u.Component.CHAT_INTRODUCE,e)}},{children:[(0,n.tZ)(J,se({color:j,hasFocus:G,isSubmitted:!0,onOverlayClick:(0,O.onClickHandler)((function(){Z(!0),!R&&c.set("body",{inited:!0}),h.Monitoring.telemetryOnce(g.TelemetryName.CHAT_INTRODUCE,{param1:"formFocused"}),ae.current.querySelector("input").focus(),M||setTimeout((function(){var e=(0,s.getLastMessageByType)(d.MessageType.FORM);re&&e&&re.scrollToBottom()}),300)}),!1,!0)},{children:(0,n.tZ)(ue,{fields:S.values,validation:S.validation,values:D,errors:F,color:j,isSubmitted:K,isIOS:T,onFieldChange:L,onFieldValid:z,onSubmit:(0,O.onClickHandler)(le,!1,!0)})})),ne&&(0,n.tZ)(Y,{isVkURL:Boolean(null==ee?void 0:ee.links.vkUrl),isFbURL:Boolean(null==ee?void 0:ee.links.fbUrl),onSocialClick:function(e){if(M&&(null==ee?void 0:ee.links)){var t=ee.links,a=t.fbUrl,n=t.vkUrl;window.open("fb"===e?a:n)}else m.default.setPopupMode(e),b.Router.next(f.RouterEvent.ToSocial),h.Monitoring.telemetry(g.TelemetryName.CHAT_INTRODUCE_SOCIAL,{param1:"click_".concat(e)},r=a.n(n),l=a(50754),o=a.n(l),i=a(33965),u=r()().add("file:",null),s=/(http|https)?:\/\//,d=/(http|https|ftp)?:\/\//,c=/mailto/,f=function(e,t){var a=0;return t.reduce((function(n,r,l){var u,f=r.index,p=r.lastIndex,m=r.url,_=r.text,h=e.substring(a,f);return a=p,n+="".concat(h).concat(function(e,t,a){return'<a href="'.concat(e,'" target="_blank" rel="noopener" title="').concat(t,'">').concat(a,"</a>")}(function(e,t){return s.test(t)||c.test(e)?e:"https://".concat(t)}(m,_),(u=_,d.test(u)?u.replace(d,""):u),function(e){var t=e/,""),a=t.split("/")[0],n=o().toUnicode(a),r=t.replace(a,n),l=r;try{l=decodeURIComponent(r)}catch(e){}ret(e.slice(0,30),"...").concat(e.slice(-30)):e}((0,i.escape)(l))}(_))),l===t.length-1&&(n+=e.substring(a,e.length)),n}),"")},p=function(e){return u.test(e)?f(e,u.match(e)):e}},15496:function(e,t,a){"use strict";a.r(t),a.d(t,{withLocator:function(){return r}});var n=a(97615),r=function(e){return{"data-qa-id":n.EnvironmentManager.isProduction()?void 0:e}}},99413:function(e){e.exports=/[\0-\x1F\x7F-\x9F]/},73189:function(e){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},35045:function(e){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},29369:function(e){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},42473:function(e){"use strict";var t=function(){};e.exports=t}}]);