"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3878],{71251:(e,i,n)=>{n.d(i,{j:()=>o});var a=n(50959),t=n(22795),l=n(57562),s=n(13734),r=n(11527);const o=a.memo((function(e){let{uri:i,size:n=l.q.md,className:o,onClick:d,canDownload:c,condensedAll:u}=e;const[m,k]=(0,t.Z)(i),p=(0,s.o)(),v=(0,a.useCallback)((()=>{p({targetUri:i,intent:m?"unsave":"save",type:"click"}),k(!m)}),[p,i,m,k]);return(0,r.jsx)(l.o,{className:o,isFollowing:m,onFollow:v,onClick:d,uri:i,size:n,canDownload:c,condensedAll:u})}))},4576:(e,i,n)=>{n.d(i,{T:()=>m});var a=n(50959),t=n(82187),l=n.n(t),s=n(40763),r=n(85648),o=n(55842),d=n(74713);const c="pvGZ831aNzHTQMZ8CA_u";var u=n(11527);const m=(0,a.memo)((function(e){let{onClick:i=(()=>{}),size:n,className:t,uri:m,sharingInfo:k,interactionData:p,ariaLabel:v=r.ag.get("mwp.list.item.share"),condensedAll:y}=e;const{onCopyLink:g}=(0,d.y)({sharingInfo:k,uri:m,interactionData:p}),S=(0,a.useCallback)((()=>{g(),i()}),[i,g]);return(0,u.jsx)(o.E,{ariaLabel:v,size:n,onClick:S,className:l()(c,t),icon:s.M,condensedAll:y,condensed:!0})}))},12895:(e,i,n)=>{n.d(i,{l:()=>m,B:()=>p});var a=n(50959),t=n(10356),l=n(7935);n(22849),n(606);function s(e,i){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return;if(!(0,l.lK)(e))return;const a=e.querySelector('[tabindex="0"]');i===t.N.UP&&(0,l.Bu)(a,r(e,a,t.N.UP,n)),i===t.N.DOWN&&(0,l.Bu)(a,r(e,a,t.N.DOWN,n)),i===t.N.RIGHT&&(0,l.Bu)(a,o(a,t.N.RIGHT,n)),i===t.N.LEFT&&(0,l.Bu)(a,o(a,t.N.LEFT,n)),i===t.N.HOME&&(0,l.Bu)(a,d(t.N.HOME,n)??a),i===t.N.END&&(0,l.Bu)(a,d(t.N.END,n)??a)}function r(e,i,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=i.closest('li[role="row"]');if(!s)return i;let r=s;const d=Array.from(e.querySelectorAll('li[role="row"]')),c=Array.from(s.querySelectorAll(l.Yf)),u=d.indexOf(s);if(u<0)return i;const m=(a&&i!==c[0]||!a&&i!==s)&&!(i instanceof HTMLLIElement);if(n===t.N.UP){if(document.activeElement===e){r=d[d.length-1];return(a?r.querySelector(l.Yf):r)??i}if(m)return o(i,t.N.LEFT,a);let n=u-1;if(-1===n)return i;r=d[n],n-=1}else if(n===t.N.DOWN){if(document.activeElement===e){r=d[0];return(a?r.querySelector(l.Yf):r)??i}if(m)return o(i,t.N.RIGHT,a);let n=u+1;if(n===d.length)return i;r=d[n],n+=1}return(a?r.querySelector(l.Yf):r)??i}function o(e,i){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=e.closest('li[role="row"]');if(!a)return e;let s=e;const r=Array.from(a.querySelectorAll(l.Yf)),o=r.indexOf(e);let d=0;if(i===t.N.RIGHT&&o-1!==r.length)d=o+1;else{if(i===t.N.LEFT&&-1===o)return a;if(i===t.N.LEFT&&0!==o)d=o-1;else if(i===t.N.LEFT&&0===o){return(n?a.querySelector(l.Yf):a)??a}}return s=r.at(d),s??e}function d(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{currentFocus:n,listEl:a}=function(){const e=document.activeElement,i=null==e?void 0:e.closest("ul");return((0,t.L)(e)||e instanceof HTMLLIElement)&&i?{currentFocus:e,listEl:i}:{currentFocus:null,listEl:null}}();if(null===n||null===a)return null;const s=n.closest('li[role="row"]');if(!s)return n;const r=Array.from(a.querySelectorAll('li[role="row"]')),o=Array.from(s.querySelectorAll(l.Yf));if(r.indexOf(s)<0)return n;const d=i&&n===o[0]||!i&&n===s;if(e===t.N.HOME){if(d){return(i?r[0].querySelector(l.Yf):r[0])??n}return(i?o[1]:o[0])??n}if(e===t.N.END){if(d){return(i?r[r.length-1].querySelector(l.Yf):r[r.length-1])??n}return o[o.length-1]??n}return n}var c=n(13803),u=n(11527);const m=e=>{let{onKeyDown:i,children:n,firstInteractiveIsWrapper:r=!1,...o}=e;const d=(0,a.useRef)(null);(0,c.W)(d);const m=(0,a.useCallback)((e=>{var n;null!==(n=d.current)&&void 0!==n&&n.contains(e.target)&&("ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Home"!==e.key&&"End"!==e.key||e.preventDefault(),"ArrowUp"!==e.key&&"ArrowDown"!==e.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===e.key&&s(d.current,t.N.UP,r),"ArrowDown"===e.key&&s(d.current,t.N.DOWN,r),"ArrowRight"===e.key&&s(d.current,t.N.RIGHT,r),"ArrowLeft"===e.key&&s(d.current,t.N.LEFT,r),"Home"===e.key&&s(d.current,t.N.HOME,r),"End"===e.key&&s(d.current,t.N.END,r),null==i||i(e))}),[r,i]),k=(0,a.useCallback)((e=>{if(!d.current)return;const i=e.target,n=d.current.querySelector('[tabindex="0"]');i.closest('li[role="row"]')&&i!==n&&(0,l.Bu)(n,i,{preventScroll:!0})}),[]);return(0,u.jsx)("ul",{role:"treegrid",ref:d,onKeyDown:m,onFocus:k,tabIndex:0,...o,children:n})};var k=n(72741);const p=e=>{let{children:i,innerRef:n,reRunOnDOMUpdate:t=!1,...l}=e;const s=(0,a.useRef)(null),r=n??s;return(0,k.O)(r,t),(0,u.jsx)("li",{ref:r,"aria-expanded":"true","aria-level":1,role:"row",...l,children:i})}},28133:(e,i,n)=>{n.r(i),n.d(i,{ThisIsTourCard:()=>c,default:()=>c,useThisisPlaylistExtensionQuery:()=>k});var a=n(69736),t=n(52438),l=n(85648),s=n(60046),r=n(80626),o=n(97607),d=n(11527);const c=e=>{const{artistImageUrl:i,artistName:n,artistConcertsUri:c,spec:u}=e,m=(0,r.$P)(),k=(0,r.Wi)(u.concertsCardFactory({identifier:n,uri:c,reason:"This is On Tour phase 1 MVP"}));return i&&n&&c?(0,d.jsxs)("section",{ref:k,className:"contentSpacing",children:[(0,d.jsx)(a.x,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:l.ag.get("concerts")}),(0,d.jsx)("div",{className:o.Z.cards,children:(0,d.jsxs)("div",{className:o.Z.tourCard,"data-testid":"on-tour-card",children:[(0,d.jsx)("img",{className:o.Z.cardImage,src:i,alt:""}),(0,d.jsxs)("div",{className:o.Z.cardContent,children:[(0,d.jsx)(a.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:o.Z.subtitle,children:l.ag.get("concerts_on_tour")}),(0,d.jsx)(a.x,{as:"h1",variant:"bodyMediumBold",className:o.Z.title,semanticColor:"textBase",children:n}),(0,d.jsx)(s.default,{to:c,className:o.Z.cardLink,children:(0,d.jsx)(t.P,{as:"span",size:"small",onClick:()=>{const e=u.concertsCardFactory({identifier:n,uri:c,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:c});m.logInteraction(e)},className:o.Z.cardButton,children:l.ag.get("concerts_see_all_events")})})]})]})})]}):null};var u=n(20069);const m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"thisisPlaylistExtension"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artistsOnTour"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"imageUrl"}},{kind:"Field",name:{kind:"Name",value:"upcomingEventsCount"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"concerts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConcertV2"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"startDateIsoString"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"location"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"city"}},{kind:"Field",name:{kind:"Name",value:"country"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]},k=(e,i)=>(0,u.a)(m,e,i)},1716:(e,i,n)=>{n.r(i),n.d(i,{default:()=>Vt});n(75930),n(46758),n(53321),n(55115),n(86277),n(92372),n(70069),n(44227),n(91499),n(68856),n(18004),n(16527),n(65484),n(35174),n(96241);var a=n(50959),t=n(29132),l=n(75802),s=n(69736),r=n(10226),o=n(11444),d=n(11317),c=n(85648),u=n(35360),m=(n(39301),n(4815)),k=n(11527);const p=(e,i,n)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(i),lineitem_id:String(n),creative_id:String(i),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),v=e=>{let{clickTracking:i,clickThrough:n,thirdPartyImpression:l,impression:r,logoUrl:o,advertiserName:d,creativeId:u,lineItemId:v}=e;const y=(0,t.I0)(),[g,S]=(0,a.useState)(!1);return(0,a.useEffect)((()=>(y((0,m.Vw)()),y((0,m.kh)(p("event_viewed",u,v))),()=>{y((0,m.AG)())})),[y,u,v]),(0,k.jsxs)("div",{className:"sponsor-container",children:[(0,k.jsx)(s.x,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:c.ag.get("playlist.presented_by",d)}),(0,k.jsxs)("div",{className:"sponsor-logo",children:[(0,k.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:n,onClick:()=>{y((0,m.kh)(p("event_clicked",u,v))),S(!0)},children:(0,k.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:o,alt:d,"data-ta-id":"sponsor-logo"})}),(0,k.jsx)("img",{className:"sponsor-logo__imp-pixel",src:r,alt:""}),l&&(0,k.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:l,alt:""}),g&&(0,k.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:i,alt:""})]})]})},y=e=>{let{playlistUri:i}=e;const n=(0,t.I0)(),l=(0,t.v9)((e=>e.ads.sponsoredPlaylist.previewAd||e.ads.sponsoredPlaylist.sponsoredPlaylist.get(i)));return(0,a.useEffect)((()=>{l||n((0,m.fd)(i))}),[n,i,l]),l?(0,k.jsx)("div",{children:(0,k.jsx)(v,{...l})}):null},g=e=>{let{playlistUri:i}=e;const n=(0,t.I0)(),l=(0,t.v9)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),s=(0,t.v9)((e=>e.ads.sponsoredPlaylist.previewAd));(0,a.useEffect)((()=>{l||n((0,m.z8)())}),[n,l]);const r=s||l&&((e,i)=>{const n=Date.now()/1e3,a=e.split(":"),t=a[a.length-1];return i.some((e=>{let{playlistId:i,endTime:a,startTime:l}=e;return i===t&&n>=l&&n<(a||n+1)}))})(i,l);return r?(0,k.jsx)(y,{playlistUri:i}):null};var S=n(46771),N=n(41038),h=n(16145),b=n(43286),x=n(22795);const f="hOOwEKqNuXrNvOCB1SgZ",T="csEdkIN9z2LjJIuZraqz",C=e=>{let{uri:i}=e;const[n,t]=(0,x.Z)(i),r=(0,l.s0)(),o=(0,a.useCallback)((()=>{t(!1),r("/",{replace:!0})}),[r,t]);return(0,k.jsxs)("div",{className:f,children:[(0,k.jsx)(h.l,{size:"xxlarge"}),(0,k.jsxs)("div",{className:T,children:[(0,k.jsx)(s.x,{as:"p",variant:"titleSmall",children:c.ag.get("forbidden-page.title")}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:c.ag.get("forbidden-page.description")})]}),n&&(0,k.jsx)(b.D,{colorSet:"invertedLight",onClick:o,children:c.ag.get("remove_from_your_library")})]})};var F=n(91643),j=n(50879),A=n(21536),I=n(65432),R=n(50216),D=n(56822),E=n(61046),_=n(28133),L=n(19848),P=n(17053),w=n(58301),U=n(52115),M=n(23055),O=n(82857);const V=e=>e.seoExperiment,B=(0,M.P1)(V,(e=>null==e?void 0:e.uri)),Z=((0,M.P1)(V,(e=>null==e?void 0:e[O.p.TRACK])),(0,M.P1)(V,(e=>null==e?void 0:e[O.p.ALBUM])),(0,M.P1)(V,(e=>({...null==e?void 0:e[O.p.PLAYLISTV2],...null==e?void 0:e[O.p.PLAYLIST]}))));var W=n(13734),K=n(9443),z=n(1142),H=n(48948),Q=n(51450),q=n(50540),G=n(24071),J=n(95504),Y=n(17676),X=n(91530),$=n(87350);const ee=e=>{let{context:i,shouldFire:n}=e;const l=(0,q.g)(),s=(0,t.v9)($.n5),o=(0,t.v9)(X.rZ),d=(0,r.W6)(Y.kye),c=(0,G.s4)(),u=(0,a.useCallback)((()=>{const e={category:"rpp_exposures",action:"playlist_page_visit",variant:d,label:"dwp",os:(0,J.y)(),context:i,country:s?o:"",sp_t:(0,Q.vQ)("sp_t")};l?c.send((0,H.k)(e)):c.send((0,z.x)(e))}),[d,i,s,o,l,c]);(0,a.useEffect)((()=>{n&&u()}),[u,n])};var ie=n(71318),ne=n(11090),ae=n(64222),te=n(2800),le=n(23255),se=n(20069),re=n(22527),oe=n(1740),de=n(91415),ce=n(71854),ue=n(57158);var me=n(73689),ke=n(39600),pe=n(29673),ve=n(80626),ye=n(47895),ge=n(40234);n(45205);let Se=function(e){return e.RPP="rich-playlist-pages-2",e.TEST="test",e}({}),Ne=function(e){return e.CONTROL="0",e.VARIANT="1",e}({});var he=n(12895),be=n(75390);const xe=[],fe=(e,i)=>{const n=[];let a=e,t=i;for(;a>0;){const i=Math.ceil(a/t);n.push({first:e-a,nrItems:i}),a-=i,t--}return n},Te=e=>{var i;const{itemsInNode:n,renderItem:a,renderPlaceholder:t,estimatedHeight:l,scrollNodeRef:s,nrRowsOverscan:r=10,nrInitialInView:o=0,firstIndex:d,heights:c,fanOut:u=2}=e,{ref:m,inView:p,entry:v}=(0,be.YD)({root:s.current,rootMargin:r*l+"px 0px",initialInView:d<o}),y=`${d}-${n}`;c[y]??(c[y]=l*n),null!=v&&null!==(i=v.boundingClientRect)&&void 0!==i&&i.height&&(c[y]=v.boundingClientRect.height);const g=c[y];return 0===n?null:p?1===n?(0,k.jsx)("div",{ref:m,role:"presentation",children:a(d,g)}):(0,k.jsx)("div",{ref:m,role:"presentation",children:fe(n,u).map(((i,n)=>{let{first:a,nrItems:t}=i;return(0,k.jsx)(Te,{...e,itemsInNode:t,firstIndex:d+a},n)}))}):(0,k.jsx)("div",{ref:m,role:"presentation",children:t(`${g}px`)})},Ce=e=>{const i=(e=>{var i;const n=(null===(i=xe.find((i=>i.key===e)))||void 0===i?void 0:i.heights)||{},t=(0,a.useCallback)((i=>{if(!e)return;const n=xe.findIndex((i=>i.key===e));-1===n?xe.push({key:e,heights:i}):(xe[n].heights=i,xe.push(xe.splice(n,1)[0])),xe.length>10&&xe.shift()}),[e]),l=(0,a.useRef)({...n});return(0,a.useEffect)((()=>()=>{t(l.current)}),[t]),l.current})(e.persistanceKey);return(0,k.jsx)(Te,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:i,nrInitialInView:e.nrInitialInView})};var Fe=n(66514),je=n(3853),Ae=n(64464),Ie=(n(22849),n(606),n(82187)),Re=n.n(Ie),De=n(40688),Ee=n(52438),_e=n(32394),Le=n(6936),Pe=n(99838),we=n(20580),Ue=n(91023),Me=n(60046),Oe=n(5542),Ve=n(69053),Be=n(3319),Ze=n(22496),We=n(41194),Ke=n(93246),ze=n(65019),He=n(23769);var Qe=n(77861),qe=n(78706),Ge=n(44724);const Je="JgxVj0lHUDTf9MS1jJpk",Ye="m5NcxNs6qkNbc9Wdxed7",Xe=e=>{let{isExplicit:i,children:n}=e;return(0,k.jsxs)("div",{className:Je,children:[i&&(0,k.jsx)(Ge.N,{}),(0,k.jsx)(s.x,{variant:"bodySmall",className:Ye,children:n})]})};var $e=n(25331),ei=n(61058);const ii="small",ni="ci11tAmTK1LnxThQkXPy",ai="_2sJPwAAp1wY1Ftke6iFe",ti="yuNzasMLs7hvemHI4d8Q",li="abYR6tZoE7BdzThmWTb0",si="GOcKQxqNMhGzbGiAXBig",ri="yFQjuDAhri_egM1pwn70",oi=(0,a.memo)((function(e){const{breakpoint:i,className:n,showSeparator:a,...t}=e;return(0,k.jsx)($e.w,{className:Re()(n,ni,{[ri]:a}),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:i===ii?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:i===ii?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px",...t})}));var di=n(77366),ci=n(29390);const ui=e=>{let{description:i,children:n}=e;return(0,k.jsxs)("div",{className:li,children:[i&&(0,k.jsx)(di.o,{lineClamp:2,as:"div",dir:"auto",children:(0,k.jsx)(ci.w,{asTextContent:!0,html:i})}),n]})};var mi=n(61027);const ki=e=>{let{isPlaying:i,onClickPlay:n,name:a,authorName:t,isLocked:l,children:s}=e;return(0,k.jsxs)("div",{className:si,children:[(0,k.jsx)("div",{className:ai,children:s}),(0,k.jsx)(mi.f,{size:"small",version:mi.u.secondary,onClick:n,isPlaying:i,ariaPlayLabel:c.ag.get("tracklist.a11y.play",a,t),ariaPauseLabel:c.ag.get("tracklist.a11y.pause",a,t),locked:l})]})};var pi=n(93421),vi=n(11401),yi=n(1134);const gi=e=>{let{images:i,breakpoint:n,type:a,name:t}=e;const l=(0,yi.TJ)();return(0,k.jsx)(pi.O,{fadeIn:!0,images:l(i,48),shape:pi.K.ROUNDED_CORNERS,size:n===ii?vi.m$.SIZE_64:vi.m$.SIZE_112,iconSize:n===ii?"medium":"xlarge",type:a,title:t,loadingMode:"eager"})};var Si=n(97345);const Ni=e=>{let{children:i}=e;return(0,k.jsx)(Si.g,{lineClamp:2,as:"div",dir:"auto",children:i})};var hi=n(38338),bi=n(71251),xi=n(97013),fi=n(4576);const Ti="WdYB8aMUe06dOu4TmYik",Ci="b1X4Ya4bp35IsN6tPGZw",Fi="aCdPMQVcvScaa22utIJM",ji=(0,a.memo)((function(e){var i;let{book:n,contextUri:t,featureIdentifier:r,sharingInfo:o,uid:u,rating:m,isRecommendation:p=!1,canRemove:v=!1,showSeparator:y=!1,...g}=e;const{name:S,description:N,isLocked:h,isExplicit:b,images:f,type:T,uri:C,authorName:F,consumptionCapExplanation:j,durationMs:A,topics:I=[],signifierText:R}=n,D=(0,ve.$P)(),{spec:E}=(0,ve.fU)(Pe.F,{data:{position:0,uri:C}}),{isPlaying:_,isActive:L,togglePlay:P}=(0,re.n)({uri:C},{featureIdentifier:r}),w=(0,l.s0)(),U=(0,d.EC)(C).toURLPath(!0),{addItems:M}=(0,oe.Yv)(t),O=(0,ei.jh)()===ei.Uo.SMALL?"small":"large",V=(e=>{const i=(0,Ke.z)(),n=(0,Ze.NL)(),t=(0,a.useRef)(null),l=(0,a.useRef)(0),s=(0,ze.Y)((i=>{var n;return(null==i?void 0:i.context.uri)===e?(null==i||null===(n=i.item)||void 0===n?void 0:n.uri)??null:null})),[r]=(0,He.z)(1e4,(e=>{var i;return(null==e||null===(i=e.item)||void 0===i?void 0:i.uri)===s})),{data:o}=(0,We.a)({queryKey:["useShowPlayedState",e],queryFn:async()=>{const n=i.getShowPlayedState(e);return l.current=r,n},refetchOnWindowFocus:!1});return(0,a.useEffect)((()=>{t.current&&s!==t.current&&n.invalidateQueries({queryKey:["useShowPlayedState",e]}),t.current=s}),[s,n,e]),(0,a.useMemo)((()=>o&&i.capabilities.canGetShowPlayedState?{state:o.state,playPositionMilliseconds:o.playPositionMilliseconds+r-l.current}:null),[o,i,r])})(C),[B,Z]=(0,x.Z)(C),W=(0,Be._)(C),K=O===ii?"small":"medium",z=(0,a.useCallback)((()=>{D.logInteraction(E.addButtonFactory().hitAddToPlaylist({playlist:t,itemToBeAdded:C})),M([C],{after:"end"})}),[D,E,t,C,M]),H=(0,a.useCallback)((()=>{if(h&&!j)w(U);else{const e=(0,ae.aK)({isPlaying:_,isActive:L,spec:E.playButtonFactory(),logger:D,uri:C});P({loggingParams:e})}}),[j,L,h,_,D,w,E,P,C,U]),Q=(0,a.useCallback)((()=>{D.logInteraction(E.genreLinkFactory({uri:I[0].uri??""}).hitUiNavigate({destination:I[0].uri??""}))}),[D,E,I]),q=(0,k.jsx)(Ni,{children:S}),G=(0,k.jsx)(ui,{description:N,children:(0,k.jsxs)(Xe,{isExplicit:!!b,children:[!0===(null==m?void 0:m.showAverage)&&void 0!==m.average&&(0,k.jsxs)("span",{children:[(0,k.jsx)(De.u,{size:"xsmall",className:Ti}),c.ag.formatNumber(m.average,{maximumFractionDigits:1})]}),(null===(i=I.at(0))||void 0===i?void 0:i.title)&&(0,k.jsx)(Me.Link,{className:Ci,to:I[0].uri??"",onClick:Q,children:I[0].title}),A&&(0,k.jsx)(qe.E,{isPlaying:!1,fullyPlayed:(null==V?void 0:V.state)===Qe._N.Completed,durationMs:A,position:null==V?void 0:V.playPositionMilliseconds})]})}),J=(0,k.jsx)(Ue.X,{uri:C,uid:u,contextUri:t,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:v}),Y=!h&&!!!j,X=p?null:(0,k.jsxs)(ki,{isPlaying:_,onClickPlay:H,isLocked:h&&!j,name:S,authorName:F,children:[(0,k.jsx)(hi.H,{className:Re()({[ti]:B}),isAdded:B,onClick:()=>{B?D.logInteraction(E.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:C})):D.logInteraction(E.saveToLibraryButtonFactory().hitLike({itemToBeLiked:C})),Z(!B)},size:K,isAudiobook:!0,condensedAll:!0}),(0,k.jsx)(bi.j,{className:Re()({[ti]:(0,Ve.y)(W)}),uri:C,onClick:(e,i)=>{i===Oe.mc.ADD&&D.logInteraction(E.downloadButtonFactory().hitDownload({itemToDownload:C}))},size:K,canDownload:Y,condensedAll:!0}),(0,k.jsx)(fi.T,{uri:C,sharingInfo:o??null,interactionData:{intent:"share",type:"click"},size:K,onClick:()=>{D.logInteraction(E.shareButtonFactory().hitShare({entityToBeShared:C,shareId:(null==o?void 0:o.shareId)??""}))},condensedAll:!0}),(0,k.jsx)(we.yj,{menu:J,children:(0,k.jsx)(xi.z,{label:c.ag.get("more.label.context",S),size:K,onClick:()=>{D.logInteraction(E.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),$=(0,k.jsx)(gi,{images:f,name:S,type:T,breakpoint:O}),ee=R?(0,k.jsx)(s.x,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:R}):null,ie=p?(0,k.jsx)(Ee.P,{size:"small",onClick:z,children:c.ag.get("playlist.extender.button.add")}):null,ne=(0,k.jsxs)(_e.l,{hasTextSeparator:!0,children:[(0,k.jsxs)(k.Fragment,{children:[p&&h&&(0,k.jsx)(Le.Z,{semanticColor:"textSubdued",title:c.ag.get("mwp.header.content.unavailable"),size:"xsmall",className:Fi}),c.ag.get("card.tag.audiobook")]}),F]});return(0,k.jsx)(we._P,{menu:J,onShow:()=>{D.logInteraction(E.secondaryHitUiReveal())},children:(0,k.jsx)(oi,{breakpoint:O,id:`book-${C}`,media:$,pretitle:ee,title:q,body:G,subtitle:ne,footer:X,trailing:ie,onClick:()=>{D.logInteraction(E.hitUiNavigate({destination:C})),w(U)},showSeparator:y,...g})})}));var Ai=n(78734),Ii=n(36199);const Ri=(0,a.createContext)({getReference:()=>null,setReference:()=>{}}),Di=e=>{let{children:i}=e;const n=(0,a.useRef)(null),t=(0,a.useCallback)((()=>n.current),[]),l=(0,a.useCallback)((e=>{n.current=e}),[]);return(0,k.jsx)(Ri.Provider,{value:{getReference:t,setReference:l},children:i})};const Ei=(e,i,n)=>{const{name:l,uri:s,uid:r}=e,{sortState:o}=(0,a.useContext)(R.Gb),d=o.order!==Ii.kn.NONE,c=(0,P.O)({itemIds:[r],itemUris:[s],itemMimeTypes:[Ai.RN.AUDIOBOOKS],dragLabelText:l,contextUri:i}),{setReference:m,getReference:k}=(0,a.useContext)(Ri),p=(0,a.useCallback)((e=>{m({uri:s,uid:r}),c(e)}),[c,m,r,s]),v=(0,t.I0)(),y=(0,a.useContext)(oe.ZF),g=(0,a.useCallback)(((e,n)=>{const a=e[Ai.RN.AUDIOBOOKS];if(!a)return;const t=k();t?n===Ae.Pw.BEFORE?y.move(i,[t],{before:{uri:s,uid:r}}):y.move(i,[t],{after:{uri:s,uid:r}}):n===Ae.Pw.BEFORE?v((0,u.jV)(i,a,{before:{uri:s,uid:r}})):v((0,u.jV)(i,a,{after:{uri:s,uid:r}})),m(null)}),[i,v,k,y,m,r,s]),S=n&&!d?[Ai.RN.AUDIOBOOKS]:[];return{...(0,Ae.WB)({uri:s,id:r,allowedMimeTypesByDropPosition:{[Ae.Pw.BEFORE]:S,[Ae.Pw.AFTER]:S},onDrop:g}),onDragStart:p}},_i="bg5inM_sdkHpYWiFf7Id",Li="DyW2LAm9YDcCkcdM0eeP",Pi=()=>(0,k.jsx)("div",{className:Li}),wi=(0,a.memo)((function(e){let{item:i,contextUri:n,canEdit:a=!1,canRemove:t=!1,index:l}=e;const{className:s,dropPosition:r,...o}=Ei(i,n,a);return(0,k.jsxs)(he.B,{className:s,"aria-posinset":l,reRunOnDOMUpdate:!0,children:[r===Ae.Pw.BEFORE&&(0,k.jsx)(Pi,{}),(0,k.jsx)(ji,{book:i,contextUri:n,featureIdentifier:"playlist",sharingInfo:i.sharingInfo,uid:i.uid,rating:i.rating,canRemove:t,className:s,draggable:!0,showSeparator:0!==l,...o}),r===Ae.Pw.AFTER&&(0,k.jsx)(Pi,{})]})}));var Ui=n(85987);const Mi=e=>{let{contextUri:i,initialItems:n,nrItems:t,canEdit:s,canRemove:r,ariaLabel:o}=e;const d=(0,a.useContext)(oe.ZF),c=(0,te.Mi)(),{filter:u}=(0,a.useContext)(I.fo),{sortState:m}=(0,a.useContext)(R.Gb),{contentsOptions:p}=(0,Ui.d)(m,u),[,v]=(0,D.d4)(),y=(0,a.useCallback)((async(e,n)=>{const a=await d.getContents(i,{...p,offset:e,limit:n}),t=a.items.map((e=>null===e?null:(0,je.yD)(e)?e:null));return{...a,items:t}}),[d,p,i]),{getItem:g,nrValidItems:S,invalidateCache:N}=(0,Fe.Q)({nrItems:t,fetch:y,limit:50,initialItems:n});(0,a.useLayoutEffect)((()=>{v(S)}),[S,v]),(0,oe.rZ)(i,N);const h=(0,a.useCallback)((e=>(0,k.jsx)("div",{style:{height:e}})),[]),b=(0,a.useCallback)(((e,n)=>{const a=g(e);return a?(0,k.jsx)(wi,{contextUri:i,item:a,canEdit:s,canRemove:r,index:e},a.uri):h(`${n}px`)}),[s,r,i,g,h]),x="POP"===(0,l.ur)()?0:10;return(0,k.jsx)("div",{className:_i,children:(0,k.jsx)(he.l,{firstInteractiveIsWrapper:!0,"aria-label":o,"aria-rowcount":S,"aria-colcount":6,children:(0,k.jsx)(Di,{children:(0,k.jsx)(Ce,{totalCount:S,estimatedHeight:200,renderItem:b,renderPlaceholder:h,scrollNodeRef:c,nrRowsOverscan:10,persistanceKey:i,nrInitialInView:x})})})})};var Oi=n(87236),Vi=n(13926),Bi=n(45438),Zi=n(92419),Wi=n(58912);const Ki={column:null,order:Ii.kn.NONE},zi=a.memo((function(e){let{ariaLabel:i,nrTracks:n,playlistUri:t,scrollToUid:l,usePlayContextItem:s,tracklistDomRef:r,sortableColumns:o,isCompactMode:d=!1}=e;const c=(0,a.useContext)(oe.ZF),{filter:u,setFilter:m}=(0,a.useContext)(I.fo),p=(0,a.useRef)(null),v=(0,a.useCallback)((()=>{p.current&&p.current.update()}),[]);(0,Zi.r)(t,v);const{sortState:y,setSortState:g}=(0,a.useContext)(R.Gb),S=(0,a.useCallback)((e=>{g((0,A.VK)(e,y))}),[y,g]);(0,a.useEffect)((()=>{g(Ki),m("")}),[t,m,g]),(0,a.useEffect)((()=>{p.current&&l&&p.current.scrollToItem({uid:l})}),[l]);const N=(0,a.useCallback)((async(e,i)=>{const n=await c.getContents(t,{offset:e,limit:i,sort:(0,A._j)(y),filter:u,decorateFormatListData:!0});return{items:n.items,totalLength:n.totalLength}}),[t,c,y,u]),h=(0,a.useCallback)(((e,i)=>{var n,a,l;const r=(0,Wi.X)(null===(n=e.album)||void 0===n?void 0:n.images,{desiredSize:40,desiredLabel:"small"});return(0,k.jsx)(Ii.h_,{index:i,contextUri:t,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:(null==r?void 0:r.url)||"",statusChange:null===(a=e.formatListAttributes)||void 0===a?void 0:a.status,playCount:parseInt((null===(l=e.formatListAttributes)||void 0===l?void 0:l.rank)||"0",10),usePlayContextItem:s,isCompactMode:d},i+e.uri)}),[t,s,d]),b=(0,Oi.v)(),x=(0,a.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,k.jsx)(Bi.JL,{value:"chart-tracklist",children:(0,k.jsx)(Ii.Pv,{ariaLabel:i,hasHeaderRow:!0,columns:b,sortableColumns:o,sortState:y,onSort:S,renderRow:h,resolveItem:x,nrTracks:n,fetchTracks:N,limit:100,canFetchAllTracks:c.getCapabilities().canFetchAllTracks,outerRef:p,outerDomRef:r,columnPersistenceKey:"chart-tracklist",isCompactMode:d,className:Vi.Z.chartTrackList},t)})}));var Hi=n(15842),Qi=n(66205),qi=n(57562),Gi=n(40235),Ji=n(33981),Yi=n(6395),Xi=n(80683),$i=n(57986),en=n(67408),nn=n(25230),an=n(66819),tn=n(90779),ln=n(31734),sn=n(12618),rn=n(27782),on=n(91731),dn=n(90427);const cn={bottomEnd:dn.LR.topStart,top:dn.LR.bottom},un=e=>{let{visible:i,onHide:n,placement:a,children:t,label:l}=e;const s=(0,r.W6)(ye.y);return(0,k.jsx)(rn.x,{placement:a,withPortal:!0,overlay:i&&(0,k.jsx)("div",{className:Re()("encore-dark-theme","encore-layout-themes",{"vertical-metrics":s}),children:(0,k.jsx)(on.J,{arrow:cn[a],colorSet:"announcement",onClose:n,children:l})}),children:t})};var mn=n(93400),kn=n(24918);let pn=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const vn=e=>{let{uri:i,label:n,onClick:a,size:t=pn.md}=e;const{onCopyLink:l}=(0,kn.l)({uri:i,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:s,setToggleActivationVisible:r}=(0,mn.I)();return(0,k.jsx)(un,{visible:s,onHide:()=>r(!1),label:c.ag.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,k.jsx)(sn.ws,{label:n,children:(0,k.jsx)(tn.o,{onClick:e=>{null==a||a(e),null==l||l()},iconOnly:ln.V,size:t,"aria-hidden":"true","aria-label":n,condensed:!0})})})};var yn=n(51837),gn=n(8824),Sn=n(55538);const Nn=a.memo((e=>{let{metadata:i,tracklistDomRef:n,sortableColumns:t}=e;const{hasSpotifyAudiobooks:l}=i,s=l||!1,{spec:r,logger:o}=(0,ve.fU)(yn.createDesktopSearchBarEventFactory,{}),d=(0,a.useCallback)((()=>{o.logInteraction(r.filterFieldFactory().keyStrokeFilter())}),[o,r]),u=(0,a.useCallback)((()=>{o.logInteraction(r.filterFieldFactory().hitClearFilter())}),[o,r]);return(0,k.jsxs)("div",{className:j.Z.searchBoxContainer,children:[(0,k.jsx)(a.Suspense,{fallback:null,children:(0,k.jsx)(gn.K,{placeholder:c.ag.get("playlist.search_in_playlist"),onFilter:d,onClear:u,clearOnEscapeInElementRef:n})}),(0,k.jsx)(Sn.l,{columns:[...t],isBooklist:s})]})}));var hn=n(21705),bn=n(36097),xn=n(29803),fn=n(7863),Tn=n(5784),Cn=n(28619),Fn=n(60702);const jn="Uw4gqTFuHRLn4VKga_bJ",An="SdECNwBCnmkKl0Q0mJff",In="HLkGXLclDq_7guCiD1Xq",Rn="vWR6alsFpTlgXUckErqF",Dn="EbHQLci0cfLjHmS0AKp2",En="HzYFPEbZdd6fQW4jfcz4",_n="SQEgwtR2aj51qFj6cMNZ",Ln="aaNtMSjjJ4cClWoe6K0k",Pn="BhtBJTnsM9AotmyN0MPr",wn="FwoyMQocCMLEafLlvAk5",Un="xcn0geYcJliTHbvcds12",Mn="KptBBI16DBjQBjvPQtlH";function On(e){const i=(0,a.useRef)(null);return(0,k.jsx)(bn.Y,{center:!0,onClose:e.onClose,ref:i,withPortal:!0,children:(0,k.jsx)(xn.l,{className:jn,"aria-label":"Example showing onClose property",body:(0,k.jsxs)("div",{className:Pn,children:[(0,k.jsx)(tn.o,{size:"medium","aria-label":"IconX",iconOnly:fn.k,onClick:e.onClose,className:Un}),(0,k.jsx)(tn.o,{size:"medium","aria-label":"IconArrowLeft",iconOnly:Cn.D,className:wn}),(0,k.jsx)("div",{className:An,children:(0,k.jsxs)("div",{className:In,children:[(0,k.jsx)("div",{className:Dn,children:(0,k.jsxs)("div",{className:En,children:[(0,k.jsx)(hn.E,{className:_n,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,k.jsx)(hn.E,{className:Ln,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,k.jsxs)("div",{className:Rn,children:[(0,k.jsxs)(s.x,{as:"p",variant:"marginalBold",children:[(0,k.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,k.jsxs)(s.x,{as:"p",variant:"titleMedium",children:["IM IN THE ",(0,k.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,k.jsx)("div",{className:Dn,children:(0,k.jsx)(Fn.V,{size:"xlarge"})})]})}),(0,k.jsx)("div",{className:Mn,children:(0,k.jsx)(b.D,{colorSet:"invertedLight",children:"Share"})})]})})})}const Vn="nTTPGZGk721M6gfldG43",Bn="BFYSUcA4ifYvgDzOQX5Q",Zn="el9_37CCpYKxCRKDDyww",Wn="FB376b7R1M_0YQZ_SahS",Kn="srPBn9_CV0NzQEEzW9f6",zn="te8Z8OuKxZx1gbjb7_ua",Hn=a.memo((function(e){let{setuserView:i}=e;const[n,t]=(0,a.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[n&&(0,k.jsx)(On,{onClose:()=>{t(!1)}}),(0,k.jsx)(bn.Y,{center:!0,withPortal:!0,children:(0,k.jsx)(xn.l,{colorSet:"overMedia","aria-label":"Title",body:(0,k.jsx)("div",{children:(0,k.jsx)(s.x,{as:"p"})}),dialogTitle:(0,k.jsxs)("div",{className:Vn,children:[(0,k.jsxs)("div",{className:Zn,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(hn.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,k.jsx)(hn.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsx)(s.x,{as:"h1",variant:"titleMedium",children:"Rap Caviar"})]}),(0,k.jsxs)("div",{className:Bn,children:[(0,k.jsx)(tn.o,{iconOnly:fn.k,onClick:()=>i(!1),className:Kn}),(0,k.jsx)(tn.o,{iconOnly:Tn.o,className:zn,onClick:()=>{t(!0)}})]}),(0,k.jsx)("div",{className:Wn,children:(0,k.jsx)(s.x,{as:"p",variant:"bodyMedium",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),Qn="__97AKHEfxNtqFsLai1b",qn="pzFwHV7jvPlWTI6cG5TV",Gn="iZu1aH8cr2cw98gqmTeo",Jn="JRvbfJh7eAZ_1FrQukej";function Yn(){const[e,i]=(0,a.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[e&&(0,k.jsx)(Hn,{setuserView:i}),(0,k.jsxs)("button",{className:Qn,onClick:()=>i(!0),children:[(0,k.jsxs)("div",{className:qn,children:[(0,k.jsx)(hn.E,{className:Gn,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(hn.E,{className:Gn,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(hn.E,{className:Gn,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsxs)("div",{className:Jn,children:[(0,k.jsx)(s.x,{as:"p",variant:"bodySmallBold",children:"View employee leaderboard"}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:"You're in the top 21% of listeners."})]})]})]})}var Xn=n(64962),$n=n(72417);const ea=a.memo((function(e){let{playlist:i,capabilities:n,spec:t,isPlaying:l,isActive:s,togglePlay:o,isBooklist:d,isConcert:u=!1,backgroundColor:m,tracklistDomRef:p,sortableColumns:v}=e;const{metadata:{uri:y,name:g,unfilteredTotalLength:S,isOwnedBySelf:N,canPlay:h,isPublished:b,totalLength:f}}=i,T=(0,K.k)(),C=(0,ve.$P)(),F=(0,a.useMemo)((()=>t.shuffleButtonContainerFactory()),[t]),A=n.canFilter&&S>0,I=n.canSort&&S>0,R=S>0,D=(0,r.W6)(Y.v8$),E=(0,r.W6)(Y.MF8,{loadingValue:!1}),_=(0,$n.Q)(),[L,P]=(0,x.Z)(y),w=(0,W.o)(),U=(0,a.useCallback)((async()=>{w({targetUri:y,intent:L?"unsave":"save",type:"click"});try{await P(!L)}catch{}}),[L,w,P,y]),M=(0,a.useCallback)((()=>{const e=t.shareButtonFactory().hitShare({entityToBeShared:y,shareId:""});C.logInteraction(e)}),[t,C,y]),O=(0,a.useCallback)((()=>{let e;const i=t.heartButtonFactory();e=L?i.hitUnfollow({itemToBeUnfollowed:y}):i.hitFollow({itemToBeFollowed:y}),C.logInteraction(e),U()}),[t,U,L,C,y]),V=(0,an.j)(),B=A&&I;return(0,k.jsxs)(Hi.o,{backgroundColor:m,children:[(0,k.jsxs)(Qi.F,{children:[h&&!d?(0,k.jsx)($i.$,{onClick:o,isPlaying:l,size:V,uri:y,ariaPlayLabel:c.ag.get("playlist.a11y.play",g),ariaPauseLabel:c.ag.get("playlist.a11y.pause",g)}):null,_&&f>0&&!d&&(0,k.jsx)(ve.Nh,{spec:F,children:(0,k.jsx)(nn.K,{shuffleContext:Xn.W.playlistActionBar,entityName:g,contextUri:y,isActive:s,activationPlacement:"bottomEnd",size:V})}),N?null:(0,k.jsx)(Yi.r,{children:(0,k.jsx)(hi.H,{isAdded:!!L,onClick:O,size:V})}),!d&&(0,k.jsx)(qi.o,{uri:y,isFollowing:!!L,canDownload:R,onClick:(e,i)=>(0,ae.l7)(i,t.downloadButtonFactory(),C,y),onFollow:U,size:V}),(0,k.jsx)(Xi.F,{property:Y.bMb,renderNewExperience:()=>{var e;return null!==(e=i.metadata.permissions)&&void 0!==e&&e.canAdministratePermissions&&T&&(!d||E)?(0,k.jsx)(vn,{onClick:M,label:c.ag.get("permissions.invite-collaborators",g),uri:y,size:V}):null}}),(u||d)&&(0,k.jsx)(fi.T,{uri:y,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:u?"concerts-near-you/share":"booklist/share"},onClick:M,size:V}),(0,k.jsx)(Gi.y,{onShow:()=>(0,ae.qq)(t,C),menu:(0,k.jsx)(Ji.X,{uri:y,isPublished:b}),children:(0,k.jsx)(xi.z,{label:c.ag.get("more.label.context",g),size:V})}),B?(0,k.jsx)(ve.Nh,{spec:t,children:(0,k.jsx)(Nn,{metadata:i.metadata,tracklistDomRef:p,sortableColumns:v})}):(0,k.jsx)("div",{className:j.Z.leadingSlot,children:(0,k.jsx)(Xi.F,{property:Y.FMs,renderNewExperience:()=>(0,k.jsx)(en.A,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),D&&(0,k.jsx)(Yn,{})]})}));var ia=n(75383);const na=e=>{const i=(0,ve.$P)(),n=(0,a.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),t=(0,ve.Wi)(n);return(0,k.jsxs)("div",{className:j.Z.concertsFooter,children:[(0,k.jsx)(Me.default,{to:"/concerts",className:j.Z.ctaLink,onClick:()=>{const e=n.hitUiNavigate({destination:"spotify:app:concerts"});i.logInteraction(e)},children:(0,k.jsxs)("div",{className:j.Z.promoRow,ref:t,children:[(0,k.jsx)(s.x,{as:"h2",variant:"bodyMediumBold",className:j.Z.promoTitle,children:c.ag.get("concerts.find_more")}),(0,k.jsx)(ia.A,{as:"span",selected:!0,children:c.ag.get("concerts.find_nearby")}),(0,k.jsx)("img",{className:j.Z.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,k.jsx)("div",{className:j.Z.disclaimerContainer,children:(0,k.jsx)(s.x,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:c.ag.get("concerts_near_you.playlist_disclaimer")})})]})};var aa=n(57370),ta=n(21523),la=n(85357);const sa="multiUserAttributionDisplayNamesV2";function ra(e){return(0,je.MW)(e)||(0,je.JF)(e)}function oa(e){return(0,je.MW)(e)||(0,je.JF)(e)||(0,je.yD)(e)}const da=a.memo((function(e){let{ariaLabel:i,nrTracks:n,playlistUri:l,playlistName:s,isMixedMedia:o,isLive:m,isBlend:p,isConcert:v,isBooklist:y,canEdit:g,scrollToUid:S,feedbackPath:N,deleteFeedbackPath:h,usePlayContextItem:b,tracklistRef:x,tracklistDomRef:f,canRemove:T,spec:C,initialItems:F,isCompactMode:j=!1,sortableColumns:E,hasSpotifyAudiobooks:_}=e;const L=(0,ve.$P)(),P=(0,r.W6)(Y.Kpm),w=(0,a.useContext)(oe.ZF),{filter:U}=(0,a.useContext)(I.fo),{sortState:M,setSortState:O}=(0,a.useContext)(R.Gb),V=(0,a.useRef)((()=>{})),[B,Z]=(0,a.useState)([]),W=(0,t.I0)(),K=(0,Oi.v)(),z=(0,a.useCallback)((()=>{null!=x&&x.current&&x.current.update()}),[x]);(0,oe.rZ)(l,z);const H=(0,a.useCallback)(((e,i)=>{O((0,A.VK)(e,M)),L.logInteraction(C.columnHeaderFactory({identifier:e,position:i||0}).hitSort())}),[O,M,L,C]),Q=(0,a.useCallback)((e=>{V.current(),w.remove(l,e)}),[w,l]),q=(0,a.useCallback)((function(e,i){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];T&&(V.current=i,e.length>1&&!n?Z(e):Q(e))}),[T,Q]);(0,a.useEffect)((()=>{null!=x&&x.current&&S&&x.current.scrollToItem({uid:S})}),[S,x]);const G=(0,a.useCallback)((async(e,i)=>{const n=await w.getContents(l,{offset:e,limit:i,sort:(0,A._j)(M),filter:U,decorateFormatListData:!!N||m||p});return{items:n.items,totalLength:n.totalLength}}),[l,w,M,U,N,m,p]),J=(0,a.useCallback)(((e,i,n)=>{if(null==x||!x.current)return;const a=x.current.getRows()[i];a&&(L.logInteraction(C.dragSort()),n===la.W.Before?w.move(l,e,{before:a}):w.move(l,e,{after:a}))}),[x,L,C,w,l]),X=(0,a.useCallback)(((e,i,n)=>{if(null==x||!x.current)return;const a=x.current.getRows()[i];a&&(L.logInteraction(C.dragAddToPlaylist({playlist:l,itemToBeAdded:e[0]})),n===la.W.Before?W((0,u.jV)(l,e,{before:{uri:a.uri,uid:a.uid}})):W((0,u.jV)(l,e,{after:{uri:a.uri,uid:a.uid}})))}),[x,L,C,l,W]),$=(0,a.useCallback)((()=>{w.resync(l)}),[w,l]),ee=(0,a.useCallback)(((e,i)=>{var n,a,t,r,c,u,m,S;let x,f=null;var C;if((0,je.JF)(e))f=e.show,x=e.images.concat((null===(C=e.show)||void 0===C?void 0:C.images)||[]);else if((0,je.MW)(e)){var F;f=e.album,x=null===(F=e.album)||void 0===F?void 0:F.images}else(0,je.yD)(e)&&(x=e.images);const A=(0,Wi.X)(x,{desiredSize:40,desiredLabel:"small"});let I=[];g&&M.order===Ii.kn.NONE&&(I=y?[Ai.RN.AUDIOBOOKS]:[Ai.RN.TRACKS,Ai.RN.LOCAL_TRACKS,Ai.RN.EPISODES,..._?[Ai.RN.AUDIOBOOKS]:[]]);const R="1"===(null==e||null===(n=e.formatListAttributes)||void 0===n?void 0:n["dislike-feedback-selected"]),D=!!(0,je.JF)(e)&&e.podcastSubscription.isUserSubscribed;let E=!1;(0,je.JF)(e)&&e.podcastSubscription.isPaywalled&&!D?E=!0:ra(e)?E=e.isPlayable&&!R:(0,je.yD)(e)&&(E=!0);let L=!1;(0,je.JF)(e)&&e.podcastSubscription.isPaywalled?L=!0:(0,je.yD)(e)&&(L=e.isLocked&&!e.isOutOfMarket);const U=p&&((e,i)=>{var n,a,t,l;const s=[];if(!i)return s;const r=i[sa]?sa:"multiUserAttributionDisplayNames",o=null==i||null===(n=i[r])||void 0===n?void 0:n.split(","),c=null==i||null===(a=i.multiUserAttributionImages)||void 0===a?void 0:a.split(",");if(!o||!c)return s;const u=(null==i||null===(t=i.multiUserAttributionUsernamesV2)||void 0===t?void 0:t.split(","))||[],m=(null==i||null===(l=i.multiUserAttributionType)||void 0===l?void 0:l.split(","))||[],k=o.length;for(let v=0;v<k;v++){const e=u[v],i=e&&(0,d.QK)(e).toURI();s.push({username:e,uri:i,displayName:o[v],images:(p=c[v],p.length>1?[{url:p}]:[]),recsplanation:m[v]})}var p;return s.sort(((i,n)=>i.username?i.username===(null==e?void 0:e.username)?-1:n.username===(null==e?void 0:e.username)?1:0:0))})(e.addedBy,null==e?void 0:e.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let O=0;ra(e)?O=e.duration.milliseconds:(0,je.yD)(e)&&(O=e.durationMs||0);let V="";return oa(e)&&(V=e.name),(0,k.jsx)(Ii.dx,{isCompactMode:j,index:i,playIndex:e.playIndex??void 0,contextUri:l,uri:e.uri,uid:e.uid,isPlayable:E,duration_ms:O,isPaywalled:L,isUserSubscribed:D,name:V,artists:(0,je.MW)(e)?e.artists:void 0,albumOrShow:f,isExplicit:(oa(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,je.MW)(e)&&e.hasAssociatedVideo&&P)??!1,isMixedMedia:o,isLocal:(0,je.MW)(e)&&e.isLocal,addedBy:U,hasDecoratedAddedBy:w.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,je.JF)(e)&&e.release.date||"",isMOGEFRestricted:((0,je.MW)(e)||(0,je.JF)(e))&&e.is19PlusOnly,type:e.type,imgUrl:(null==A?void 0:A.url)||"",onMove:J,onInsert:X,usePlayContextItem:b,allowedDropTypes:I,feedbackPath:N,feedbackUri:null==e||null===(a=e.formatListAttributes)||void 0===a?void 0:a.feedback_uri,deleteFeedbackPath:h,isDisliked:R,isBlend:p,ticketingSiteURL:null==e||null===(t=e.formatListAttributes)||void 0===t?void 0:t.ticketingSite,eventDate:null==e||null===(r=e.formatListAttributes)||void 0===r?void 0:r.eventDate,canRemove:T,onFeedbackClick:$,playlistName:s,isConcert:v,concertsCount:null===(c=e.formatListAttributes)||void 0===c?void 0:c.concerts_count,concertURI:null===(u=e.formatListAttributes)||void 0===u?void 0:u.target_uri,concertDate:null===(m=e.formatListAttributes)||void 0===m?void 0:m.first_concert_date,concertVenue:null===(S=e.formatListAttributes)||void 0===S?void 0:S.first_concert_venue,authorName:(0,je.yD)(e)?e.authorName:"",isOutOfMarket:!!(0,je.yD)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,je.yD)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:g},i+e.uri)}),[g,y,M.order,p,j,l,P,o,w,J,X,b,N,h,T,$,s,v,_]),ie=(0,a.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,ne]=(0,D.d4)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Bi.JL,{value:"playlist-tracklist",children:(0,k.jsx)(Ii.Pv,{isCompactMode:j,testID:"playlist-tracklist",ariaLabel:i,hasHeaderRow:!0,columns:K,sortableColumns:E,sortState:M,onSort:H,onRemove:q,renderRow:ee,resolveItem:ie,nrTracks:n,fetchTracks:G,limit:100,canFetchAllTracks:w.getCapabilities().canFetchAllTracks,outerRef:x,outerDomRef:f,tracks:F,isConcertPlaylist:v,onNrValidItemsChange:ne,columnPersistenceKey:"playlist-tracklist"},l)}),(0,k.jsx)(ta.h,{title:c.ag.get("playlist.remove_from_playlist",s),isOpen:B.length>0,tracks:B,onClose:e=>{e.stopPropagation(),Z([])},onRemove:Q})]})}));var ca=n(30089),ua=n(94260),ma=n(92075),ka=n(44246),pa=n(65441);const va={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"audiobookMetadata"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"htmlDescriptionPlain"}},{kind:"Field",name:{kind:"Name",value:"authors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"genres"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shortName"}},{kind:"Field",name:{kind:"Name",value:"destinationUri"}},{kind:"Field",name:{kind:"Name",value:"contextualName"}}]}},{kind:"Field",name:{kind:"Name",value:"rating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"averageRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"average"}},{kind:"Field",name:{kind:"Name",value:"showAverage"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"accessInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isUserMemberOfAtLeastOneGroup"}},{kind:"Field",name:{kind:"Name",value:"accessExplanation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConsumptionCappedAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"ctaUrl"}},{kind:"Field",name:{kind:"Name",value:"dismiss"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"signifier"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}}]}},{kind:"Field",name:{kind:"Name",value:"unlockedBy"}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareId"}},{kind:"Field",name:{kind:"Name",value:"shareUrl"}}]}}]}}]},ya={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getAudiobooksMetadata"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"podcasts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"audiobookMetadata"}}]}}]}}]}},...va.definitions]},ga={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Track"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]},Sa={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResultsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}},...ga.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Artist"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Artist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Album"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Album"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Episode"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Episode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]},Na={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2Booklists"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"topResultsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"audiobookMetadata"}}]}}]}}]}}]}}]}}]}}]}}]}},...va.definitions]},ha={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationAlbums"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationAlbums"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}},...ga.definitions]},ba={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationArtists"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}}]}},...ga.definitions]};var xa=n(52559);function fa(e){var i,n,a,t,l,s,r,o;return{type:O.p.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:(null===(i=e.authors)||void 0===i?void 0:i.map((e=>null==e?void 0:e.name)).join(c.ag.getSeparator()))||"",images:(null===(n=e.coverArt)||void 0===n?void 0:n.sources)??[],isLocked:(0,xa.P2)(e.accessInfo),isExplicit:(null===(a=e.contentRating)||void 0===a?void 0:a.label)===Qe.KS.Explicit,durationMs:(null===(t=e.duration)||void 0===t?void 0:t.totalMilliseconds)??0,topics:(null===(l=e.genres)||void 0===l?void 0:l.map((e=>({uri:e.destinationUri,title:e.contextualName}))))||[],signifierText:(null===(s=e.accessInfo)||void 0===s||null===(s=s.signifier)||void 0===s?void 0:s.text)??"",rating:{average:(null===(r=e.rating)||void 0===r||null===(r=r.averageRating)||void 0===r?void 0:r.average)??0,showAverage:!(null===(o=e.rating)||void 0===o||null===(o=o.averageRating)||void 0===o||!o.showAverage)},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var Ta=n(73928),Ca=n(8696),Fa=n(91054),ja=n(70526);function Aa(e){return{type:O.p.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,Ca.NS)(e.coverArt)}}function Ia(e){if("Album"!==e.data.__typename)return null;return Aa(e.data)}function Ra(e){return((null==e?void 0:e.items.filter((e=>"AlbumResponseWrapper"===e.__typename)))??[]).map((e=>Ia(e))).filter(Fa.K)||[]}function Da(e){if("Artist"!==e.data.__typename)return null;const i=e.data;return{type:O.p.ARTIST,uri:i.uri,id:i.id,name:i.profile.name,images:(0,Ca.NS)(i.visuals.avatarImage)}}function Ea(e){var i,n;if("Episode"!==e.data.__typename)return null;const a=e.data,t=a.podcastV2.data;return"Podcast"!==t.__typename?null:{type:O.p.EPISODE,uri:a.uri,id:a.id,name:a.name,images:(0,Ca.NS)(a.coverArt),isExplicit:(null===(i=a.contentRating)||void 0===i?void 0:i.label)===Ta.KS.Explicit,is19PlusOnly:(null===(n=a.contentRating)||void 0===n?void 0:n.label)===Ta.KS.NineteenPlus,podcast:{id:t.id,uri:t.uri,name:t.name},isPlayable:a.playability.playable}}function _a(e){var i,n,a,t,l,s,r;const o=(0,Ca.NS)((null===(i=e.albumOfTrack)||void 0===i?void 0:i.coverArt)||null);return{type:O.p.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:(null===(n=e.albumOfTrack)||void 0===n?void 0:n.name)||"",uri:(null===(a=e.albumOfTrack)||void 0===a?void 0:a.uri)||"",imgUrl:(null===(t=o.at(0))||void 0===t?void 0:t.url)||"",id:(null===(l=e.albumOfTrack)||void 0===l?void 0:l.id)||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:(null===(s=e.contentRating)||void 0===s?void 0:s.label)===Ta.KS.Explicit,is19PlusOnly:(null===(r=e.contentRating)||void 0===r?void 0:r.label)===Ta.KS.NineteenPlus}}function La(e){if("Track"!==e.data.__typename)return null;return _a(e.data)}function Pa(e){return((null==e?void 0:e.itemsV2)??[]).map((e=>{const i=(0,Ca.U2)(e,"item");switch(i.__typename){case"AlbumResponseWrapper":return Ia(i);case"ArtistResponseWrapper":return Da(i);case"EpisodeResponseWrapper":return Ea(i);case"TrackResponseWrapper":return La(i);default:return(0,ja._)(i),null}})).filter(Fa.K)||[]}function wa(e){return((null==e?void 0:e.itemsV2)??[]).map((e=>{const i=(0,Ca.U2)(e,"item");return"AudiobookResponseWrapper"===i.__typename&&"Audiobook"===i.data.__typename?fa(i.data):null})).filter(Fa.K)||[]}const Ua=async function(e,i,n){var a;const t={term:i,offset:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,limit:arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,numberOfTopResults:arguments.length>5&&void 0!==arguments[5]?arguments[5]:10};if(n){var l;const n=await e(Na,t),a=null==n||null===(l=n.data)||void 0===l?void 0:l.searchV2;return a?(s=i,{albums:[],artists:[],episodes:[],tracks:[],topResults:wa(a.topResultsV2)??[],query:s}):null}var s;const r=await e(Sa,t),o=null==r||null===(a=r.data)||void 0===a?void 0:a.searchV2;return o?function(e,i){return{albums:Ra(e.albumsV2)??[],artists:(t=e.artists,(((null==t?void 0:t.items)??[]).map((e=>Da(e))).filter(Fa.K)||[])??[]),episodes:(a=e.episodes,(((null==a?void 0:a.items)??[]).map((e=>Ea(e))).filter(Fa.K)||[])??[]),tracks:(n=e.tracksV2,(((null==n?void 0:n.items)??[]).map((e=>La(e.item))).filter(Fa.K)||[])??[]),topResults:Pa(e.topResultsV2)??[],query:i};var n,a,t}(o,i):null},Ma=async function(e,i){var n;const a={uris:[i],limit:arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,offset:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0},t=await e(ha,a),l=null==t||null===(n=t.data)||void 0===n?void 0:n.albums;return l?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:i.tracks.items.map((e=>_a(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,ja._)(i),null}}(l):null},Oa=async function(e,i){var n;const a={uris:[i],limit:arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,offset:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0},t=await e(ba,a),l=null==t||null===(n=t.data)||void 0===n?void 0:n.artists;return l?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Artist":return{albums:i.discography.popularReleasesAlbums.items.map((e=>Aa(e)))||[],artists:[],episodes:[],tracks:i.discography.topTracks.items.map((e=>_a(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,ja._)(i),null}}(l):null};var Va=n(49857),Ba=n(45540);const Za="YAYCVnYpPvmYV4JyTmn5",Wa="FeWwGSRANj36qpOBoxdx",Ka="_h5mio6VqcL_fmiXAb1S",za="Hfgj4Zbb2ijt8g54MlCA",Ha="sgZ_MgcS1NlccH19fYsa",Qa="JzyZE2R09wq7xtjECDeR",qa=a.memo((function(e){let{placeholder:i,onChange:n=(()=>{}),onFocus:t=(()=>{})}=e;const[l,r]=(0,a.useState)(""),o=(0,a.useRef)(null),d=(0,Va.y1)((e=>{n(e)}),200),u=(0,a.useCallback)((e=>{const i=e.currentTarget.value;r(i),d(i)}),[r,d]),m=(0,a.useCallback)((()=>{o.current&&o.current.focus(),r(""),n("")}),[r,n]),p=(0,a.useCallback)((e=>{"Escape"===e.key&&l&&m()}),[l,m]);return(0,k.jsxs)("div",{className:Za,role:"search",children:[(0,k.jsx)(s.x,{as:"input",variant:"bodySmall",ref:o,className:Re()(Wa),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:i,onChange:u,onKeyDown:p,onFocus:t,value:l}),(0,k.jsxs)("div",{className:Ka,children:[(0,k.jsx)("span",{className:za,children:(0,k.jsx)(Ba.j,{size:"small",className:Ha,"aria-hidden":"true"})}),l&&(0,k.jsx)("button",{className:Qa,onClick:m,"aria-label":c.ag.get("search.a11y.clear-input"),children:(0,k.jsx)(fn.k,{size:"small"})})]})]})}));n(92027);const Ga=e=>{let{renderRow:i,searchResults:n,renderSeeAllRow:a,seeAllXList:t}=e;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:i,rowPlaceholder:Ii.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.all"),renderRow:a,rowPlaceholder:Ii.hU,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD],testID:"playlist-inline-curation-see-all-options"})]})},Ja=e=>{let{renderRow:i,searchResults:n}=e;return(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:i,rowPlaceholder:Ii.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]})},Ya=e=>{let{renderRow:i,searchResults:n}=e;const a=n.filter((e=>e.type===O.p.TRACK)),t=n.filter((e=>e.type===O.p.ALBUM));return(0,k.jsxs)("div",{children:[(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",className:j.Z.artistResultListTitle,children:c.ag.get("playlist.curation.popular_songs")}),(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("playlist.curation.popular_songs"),renderRow:i,rowPlaceholder:Ii.hU,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]}),(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",className:j.Z.artistResultListTitle,children:c.ag.get("playlist.curation.albums")}),(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("playlist.curation.albums"),renderRow:i,rowPlaceholder:Ii.hU,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]})]})},Xa=e=>{let{renderRow:i,searchResults:n}=e;return(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:i,rowPlaceholder:Ii.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]})},$a=e=>{let{renderRow:i,searchResults:n}=e;return(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:i,rowPlaceholder:Ii.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]})},et=e=>{let{renderRow:i,searchResults:n}=e;return(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:i,rowPlaceholder:Ii.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]})};var it=n(61815);const nt="G2t3w2AAeb5OXp0_GeWs",at="saVjTFMyWYUz975_tkQm",tt="thi8fNCkEhutRkDC90c0",lt="pHVlkChuJpEnBQyU3ADv",st="ENWs3JxcqtD98_8fbPz2",rt="L8IUKEJL6JiTyE_qUVCc",ot="XcyjdXgsNX0DBt72tfiD",dt="VhJnuS7UcUPfIlzD8dlU",ct="He29vQ5anFj_bJ5iEaI2",ut=e=>{var i;let{searchResult:n,index:a,isRTL:t,onClick:l}=e;const r=null===(i=n.images.at(0))||void 0===i?void 0:i.url;return(0,k.jsx)(it.RX,{className:st,rowIndex:a,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${n.name}`,className:ct,onClick:l,children:[(0,k.jsxs)(it.id,{columnIndex:0,className:rt,children:[void 0!==r?(0,k.jsx)("img",{className:tt,src:r,alt:n.name}):null,(0,k.jsxs)("div",{className:ot,children:[(0,k.jsx)(s.x,{as:"p",className:lt,variant:"bodyMedium",children:n.name}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:c.ag.get("album")})]})]}),(0,k.jsx)(it.id,{columnIndex:1}),(0,k.jsx)(it.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${n.name}`,className:dt,onClick:l,children:t?(0,k.jsx)(ma.e,{}):(0,k.jsx)(ua.V,{})})})]})})};var mt=n(6958);const kt=e=>{let{size:i}=e;return(0,k.jsx)("div",{className:at,children:(0,k.jsx)(mt.a,{size:i})})},pt=e=>{var i;let{searchResult:n,index:a,isRTL:t,onClick:l}=e;const r=null===(i=n.images.at(0))||void 0===i?void 0:i.url;return(0,k.jsx)(it.RX,{className:st,rowIndex:a,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${n.name}`,className:ct,onClick:l,"data-testid":"playlist-inline-curation-artist",children:[(0,k.jsxs)(it.id,{columnIndex:0,className:rt,children:[void 0!==r?(0,k.jsx)("img",{className:nt,src:r,alt:n.name}):(0,k.jsx)(kt,{size:"small"}),(0,k.jsxs)("div",{className:ot,children:[(0,k.jsx)(s.x,{as:"p",className:lt,variant:"bodyMedium",children:n.name}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:c.ag.get("artist")})]})]}),(0,k.jsx)(it.id,{columnIndex:1}),(0,k.jsx)(it.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${n.name}`,className:dt,onClick:l,children:t?(0,k.jsx)(ma.e,{}):(0,k.jsx)(ua.V,{})})})]})})},vt=e=>{var i;let{episode:n,contextUri:a,index:t,usePlayContextItem:l}=e;return(0,k.jsx)(Ii.YK,{uid:n.id,uri:n.uri,isPlayable:n.isPlayable,isMOGEFRestricted:n.is19PlusOnly,isExplicit:n.isExplicit,contextUri:a,name:n.name,imgUrl:(null===(i=n.images.at(0))||void 0===i?void 0:i.url)??"",index:t,podcast:n.podcast,usePlayContextItem:l})},yt=e=>{let{label:i,index:n,isRTL:a,onClick:t}=e;return(0,k.jsx)(it.RX,{className:st,rowIndex:n,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":i,className:ct,onClick:t,children:[(0,k.jsx)(it.id,{columnIndex:0,className:rt,children:(0,k.jsx)(s.x,{as:"p",className:lt,variant:"bodyMedium",children:i})}),(0,k.jsx)(it.id,{columnIndex:1}),(0,k.jsx)(it.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":i,className:dt,onClick:t,children:a?(0,k.jsx)(ma.e,{}):(0,k.jsx)(ua.V,{})})})]})})},gt=e=>{let{track:i,contextUri:n,index:a,usePlayContextItem:t}=e;return(0,k.jsx)(Ii.cp,{uid:i.id,uri:i.uri,isPlayable:i.isPlayable,isMOGEFRestricted:i.is19PlusOnly,isExplicit:i.isExplicit,contextUri:n,name:i.name,imgUrl:i.album.imgUrl,index:a,album:i.album,artists:i.artists,usePlayContextItem:t})};let St=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const Nt=(e,i)=>"GO_BACK"===i.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:("NAV_TO_RESULTS"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:"CHANGE_TERM"===i.type&&(e={term:i.term,breadcrumbs:[{navType:St.SEARCH,term:i.term,title:""}]}),e),ht=e=>{let{resultList:i,level:n,isRTL:t,playlistUri:l,navToResults:r,navToEntity:o,term:u,isBooklist:m}=e,p=i;const v=(e=>e.map((e=>{if(e.type===O.p.TRACK||e.type===O.p.EPISODE){const{uri:i,id:n}=e;return{type:(0,d.wj)(i)?O.p.TRACK:O.p.EPISODE,uri:i,uid:n,provider:null}}return null})).filter(Fa.K))(i),y=(0,P.O)(),{usePlayContextItem:g}=(0,re.n)({uri:`${l.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(u)}:${(null==n?void 0:n.navType)??0}`,pages:[{items:v}]},{featureIdentifier:"search"}),S=(0,a.useCallback)(((e,i)=>(0,k.jsx)(yt,{isRTL:t,index:i,label:e.label,onClick:()=>{r({navType:e.type,term:u,title:e.label})}},e.uri)),[t,r,u]),N=(0,a.useCallback)(((e,i)=>e.type===O.p.ARTIST?(0,k.jsx)(pt,{isRTL:t,index:i,searchResult:e,onClick:()=>{o({navType:St.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===O.p.EPISODE?(0,k.jsx)(vt,{index:i,episode:e,contextUri:l.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===O.p.TRACK?(0,k.jsx)(gt,{index:i,track:e,contextUri:l.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===O.p.ALBUM?(0,k.jsx)(ut,{index:i,isRTL:t,searchResult:e,onClick:()=>{o({navType:St.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,k.jsx)(ji,{book:e,featureIdentifier:"playlist_recommendations",contextUri:l,isRecommendation:!0,showSeparator:0!==i},e.uri)),[t,o,l,g]);if(""===u)return(0,k.jsx)("div",{className:j.Z.emptySearchTermContainer});if(!i||0===(null==i?void 0:i.length))return(0,k.jsxs)("div",{className:j.Z.emptyStateContainer,children:[(0,k.jsx)(s.x,{as:"h1",variant:"titleSmall",children:c.ag.get("search.empty-results-title",u)}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:c.ag.get("search.empty-results-text")})]});if((null==n?void 0:n.navType)===St.SEARCH){const e=[{type:St.ARTISTRESULTS,label:c.ag.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:St.ALBUMRESULTS,label:c.ag.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:St.TRACKRESULTS,label:c.ag.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return p=i,m?(0,k.jsx)(k.Fragment,{children:p.map(((e,i)=>e&&e.type===O.p.AUDIOBOOK?(0,k.jsx)(ji,{contextUri:l,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:!0,onDragStart:i=>{y(i,{itemUris:[e.uri],itemMimeTypes:[Ai.RN.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==i},i):null))}):(0,k.jsx)(Ga,{renderRow:N,searchResults:p,renderSeeAllRow:S,seeAllXList:e})}return(null==n?void 0:n.navType)===St.ALBUM?(0,k.jsx)(Ja,{renderRow:N,searchResults:p}):(null==n?void 0:n.navType)===St.ARTIST?(0,k.jsx)(Ya,{renderRow:N,searchResults:p}):(null==n?void 0:n.navType)===St.ALBUMRESULTS?(0,k.jsx)(Xa,{renderRow:N,searchResults:p}):(null==n?void 0:n.navType)===St.TRACKRESULTS?(0,k.jsx)($a,{renderRow:N,searchResults:p}):(null==n?void 0:n.navType)===St.ARTISTRESULTS?(0,k.jsx)(et,{renderRow:N,searchResults:p}):null},bt=e=>{let{playlistUri:i,onCurationModeChange:n,isBooklist:t}=e;const[l,r]=(0,a.useState)([]),[o,d]=(0,a.useState)(),u=(0,ka.S)(),{level:m,changeTerm:p,goBack:v,navToEntity:y,navToResults:g,term:S}=(()=>{const[e,i]=(0,a.useReducer)(Nt,{term:"",breadcrumbs:[]}),{breadcrumbs:n,term:t}=e;return{changeTerm:e=>{i({type:"CHANGE_TERM",term:e})},level:n[n.length-1]||null,goBack:()=>{i({type:"GO_BACK"})},navToEntity:e=>{i({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{i({type:"NAV_TO_RESULTS",level:e})},term:t}})(),{request:N}=(0,a.useContext)(pa.Ax);return(0,a.useEffect)((()=>{let e=!0;return(async()=>{if(m)switch(m.navType){case St.SEARCH:try{if(!o||o.query!==S&&""!==S){const i=await Ua(N,S,t);e&&d(i)}else""===S&&r([])}catch{r([])}o&&r(o.topResults);break;case St.ARTISTRESULTS:o&&r(null==o?void 0:o.artists);break;case St.ALBUMRESULTS:o&&r(null==o?void 0:o.albums);break;case St.TRACKRESULTS:o&&r(null==o?void 0:o.tracks);break;case St.EPISODERESULTS:o&&r(null==o?void 0:o.episodes);break;case St.ALBUM:try{const i=await Ma(N,m.uri,100,0);e&&i&&r(i.tracks)}catch{r([])}break;case St.ARTIST:try{const i=await Oa(N,m.uri,100,0);e&&i&&r([...i.albums,...i.tracks])}catch{r([])}}})(),()=>{e=!1}}),[m,S,o,N,t]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("section",{className:j.Z.playlistInlineCurationSection,children:[(0,k.jsxs)("div",{className:j.Z.playlistInlineCurationWrapper,children:[(0,k.jsx)(s.x,{as:"h1",className:j.Z.playlistInlineCurationTitle,variant:"titleSmall",children:c.ag.get("playlist.curation.title")}),(0,k.jsx)(a.Suspense,{fallback:null,children:(0,k.jsx)(qa,{placeholder:t?c.ag.get("playlist.curation.search_placeholder-booklists"):c.ag.get("playlist.curation.search_placeholder"),onFocus:()=>{n(!0)},onChange:e=>{p(e)}})})]}),(0,k.jsx)("button",{className:j.Z.playlistInlineCurationCloseButton,onClick:()=>n(!1),children:(0,k.jsx)(fn.k,{"aria-label":c.ag.get("close")})})]}),null!==m&&m.navType!==St.SEARCH?(0,k.jsxs)("button",{className:j.Z.playlistInlineCurationBackButton,onClick:()=>v(),children:[u?(0,k.jsx)(ua.V,{"aria-label":c.ag.get("navbar.go-back"),className:j.Z.icon}):(0,k.jsx)(ma.e,{"aria-label":c.ag.get("navbar.go-back"),className:j.Z.icon}),(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",children:m.title})]}):null,(0,k.jsx)("div",{className:j.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,k.jsx)(ht,{playlistUri:i,term:S,level:m,resultList:l,navToEntity:y,navToResults:g,isRTL:u,isBooklist:t})})]})};var xt=n(38965),ft=(n(54487),n(42738)),Tt=n(32167),Ct=n(78024),Ft=n(79096);const jt=3e5;function At(e,i){return["list-extender",e,i]}const It=function(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,t=arguments.length>3?arguments[3]:void 0;const l=2*n,s=3*n,r=(0,Ze.NL)(),d=(0,a.useRef)(0),[c,u]=(0,a.useState)(e),[m,k]=(0,a.useState)((()=>{var n;return(null===(n=r.getQueriesData({queryKey:At(e,i),stale:!1}).at(0))||void 0===n?void 0:n[1])??[]})),p=(0,a.useRef)(m.map((e=>e.uri??""))),{spec:v,logger:y}=(0,ve.fU)(o.T,{data:{uri:e}}),g=(0,a.useMemo)((()=>v.recommendedFactory()),[v]);(0,Ft.F)(Ct.XL.OPERATION_COMPLETE,(n=>{let{data:a}=n;a.uri===e&&(a.operation===Ct.If.ADD?k((e=>e.filter((e=>a.uris.every((i=>i!==e.uri)))))):a.operation===Ct.If.REMOVE&&k((e=>e.filter((e=>a.items.every((i=>i.uri!==e.uri)))))),a.operation!==Ct.If.ADD&&a.operation!==Ct.If.REMOVE||r.invalidateQueries({queryKey:At(e,i)}))}));const S=(0,a.useRef)(!0);(0,a.useEffect)((()=>(S.current||(k([]),u(e),p.current=[],d.current=d.current+1),S.current=!0,()=>{d.current=d.current+1})),[e]),(0,a.useEffect)((()=>{if(m.length<l){const e=Math.min(l,s-m.length),n=d.current,a=At(c,i),o=S.current&&0===p.current.length;(o?r.fetchQuery({queryKey:a,queryFn:()=>t(c,[],e),staleTime:jt,gcTime:jt}):t(c,p.current,e)).then((i=>{if(n!==d.current||!i)return;const t=i.map((e=>(null==e?void 0:e.uri)&&e.uri)).filter((e=>null!==e));i.length<e&&p.current.length?p.current=[]:p.current=[...p.current,...t],k((e=>[...e,...i])),o&&r.setQueryData(a,i)}))}S.current=!1}),[l,s,c,m.length,r,t,i]);const N=(0,a.useCallback)((()=>{if(v){const e=g.refreshButtonFactory().hitRefreshContent();y.logInteraction(e)}k((e=>e.slice(n)))}),[y,g,v,n]);return{recommendations:m.slice(0,n),_bufferedRecommendations:m.slice(n),refresh:N}},Rt=a.memo((function(e){let{uri:i}=e;const{recommendations:n,refresh:t}=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const n=(0,a.useContext)(ft.Z),{request:t}=(0,a.useContext)(pa.Ax),l=(0,a.useCallback)((async(e,i,a)=>{var l;const s=await n.getRecommendedBookUris(e,i,a),r=await t(ya,{uris:s});return(null==r||null===(l=r.data)||void 0===l?void 0:l.podcasts.map((e=>"Audiobook"===e.__typename?fa(e):null)).filter(Fa.K))??[]}),[n,t]);return It(e,"book",i,l)}(i),l=(0,P.O)(),r=(0,xt.s)();return r?null!=n&&n.length&&n.length>0?(0,k.jsxs)("div",{className:j.Z.recommendedTrackList,children:[(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:c.ag.get("playlist.extender.songs.in.playlist")})]})}),r&&(0,k.jsxs)(k.Fragment,{children:[n.map(((e,n)=>e?(0,k.jsx)(ji,{contextUri:i,featureIdentifier:"playlist_recommendations",book:e,sharingInfo:e.sharingInfo,isRecommendation:!0,draggable:!0,onDragStart:i=>{l(i,{itemUris:[e.uri],itemMimeTypes:[Ai.RN.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==n},n):null)),(0,k.jsx)(tn.o,{className:j.Z.refreshButton,onClick:t,children:c.ag.get("playlist.extender.refresh")})]})]}):null:(0,k.jsx)("div",{className:j.Z.recommendedTrackList,children:(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:c.ag.get("web-player.playlist.recommender-dsa-message")})]})})})})),Dt=a.memo((function(e){let{playlistUri:i,canEdit:n,tracks:t}=e;const{usePlayContextItem:l}=(0,re.n)({uri:i.replace("spotify:","spotify:internal:recs:"),pages:[{items:t.map((e=>({...e,provider:null,type:O.p.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),s=(0,a.useCallback)(((e,a)=>{const t=e.duration;return(0,k.jsx)(Ii.cp,{index:a,imgUrl:e.album.imageUrl,contextUri:i.replace("spotify","spotify:internal:recs"),uri:e.uri,isPlayable:!e.isMOGEFRestricted,name:e.name,artists:e.artists,album:{...e.album,imgUrl:e.album.imageUrl},isExplicit:e.explicit,isMOGEFRestricted:e.isMOGEFRestricted,usePlayContextItem:l,durationMs:t,shouldRenderDuration:!n,internalLink:!0},`${a}-${e.uri}`)}),[i,l,n]),r=(0,a.useMemo)((()=>[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADDED_AT,Ii.QD.ADD]),[]),o=(0,a.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),d=(0,a.useMemo)((()=>t.slice(0,Math.min(t.length,10))),[t]);return(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("playlist.extender.recommended.header"),nrTracks:Math.min(t.length,10),rowPlaceholder:Ii.hU,tracks:d,renderRow:s,resolveItem:o,columns:r},`${i}-recommended`)})),Et=a.memo((function(e){let{playlistUri:i,playlistLength:n,canEdit:t}=e;const{recommendations:l,refresh:r}=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const n=(0,a.useContext)(ft.Z),t=(0,a.useCallback)((async(e,i,a)=>{const t=i.map((e=>Tt.o.from(e).id??""));return n.getRecommendedTracks(e,t,a)}),[n]);return It(e,"track",i,t)}(i),o=!n||0===n,d=(0,xt.s)(),u=`${i}|${m=l,m?m.map((e=>e.uri)):[]}`;var m;ee({context:u,shouldFire:!!l.length});const p=o?c.ag.get("playlist.extender.title.in.playlist"):c.ag.get("playlist.extender.songs.in.playlist");return d?l.length>0?(0,k.jsxs)("div",{className:j.Z.recommendedTrackList,children:[(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:p})]})}),d&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Dt,{playlistUri:i,canEdit:t,tracks:l}),(0,k.jsx)(tn.o,{className:j.Z.refreshButton,onClick:r,children:c.ag.get("playlist.extender.refresh")})]})]}):null:(0,k.jsx)("div",{className:j.Z.recommendedTrackList,children:(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:c.ag.get("web-player.playlist.recommender-dsa-message")})]})})})})),_t=a.lazy((()=>n.e(7427).then(n.bind(n,23737)))),Lt=a.lazy((()=>Promise.resolve().then(n.bind(n,28133)))),Pt=a.lazy((()=>n.e(1021).then(n.bind(n,73205)))),wt=a.lazy((()=>n.e(5457).then(n.bind(n,43776)))),Ut=new Set([]),Mt=a.memo((function(e){var i,n,m,p;let{playlist:v,capabilities:y}=e;const{metadata:{uri:h,name:b,images:x,totalLength:f,unfilteredTotalLength:T,isOwnedBySelf:C,hasEpisodes:F,canAdd:M,canRemove:O,formatListData:V,hasDateAdded:z,collaborators:H,isPublished:Q,hasSpotifyAudiobooks:q,hasSpotifyTracks:G},contents:{items:J}}=v,{spec:X,logger:le,UBIFragment:me}=(0,ve.fU)(o.T,{data:{uri:h}}),he=(0,K.k)(),be=(0,r.W6)(ye.OC,{loadingValue:!1}),xe=(0,r.W6)(ye.MF,{loadingValue:!1}),fe=(0,r.W6)(Y.OBF,{loadingValue:!1}),{isCompactMode:Te}=(0,L.mJ)(),Ce=a.useMemo((()=>X.headerFactory()),[X]),Fe=a.useMemo((()=>X.tracklistFactory()),[X]),je=a.useMemo((()=>X.actionBarFactory()),[X]),Ae="chart"===(null==V?void 0:V.type),Ie="concerts-near-you"===(null==V?void 0:V.type)&&be,Re="live-streams"===(null==V?void 0:V.type),De=["blend","celebrity-blend","friends-mix"].indexOf((null==V?void 0:V.type)||"")>-1,Ee=[G,F,q].filter(Boolean).length>1,_e=!Ee&&!!q&&(0,ca.V)(J),Le="artistsets"===(null==V?void 0:V.type)||"this-is"===(null==V?void 0:V.attributes["editorial.series"]),Pe=(null==V?void 0:V.attributes)||{},we=Pe.header_image_url_desktop||Pe.image_url||null,Ue=M&&O,{inlineCurationModeIsOn:Me,handleInlineCurationModeChange:Oe}=((e,i)=>{const[n,t]=(0,a.useState)(e&&0===i),{scrollNodeChildRef:l}=(0,a.useContext)(te.VX),s=(0,a.useRef)(n);return(0,a.useEffect)((()=>{const e=!s.current;var i;l&&e&&n&&(null===(i=l.current)||void 0===i||i.scrollIntoView({block:"end",behavior:"smooth"})),s.current=n}),[l,n]),{inlineCurationModeIsOn:n,handleInlineCurationModeChange:e=>{t(e)}}})(Ue&&(!_e||xe&&fe),T),{productState:Ve}=(0,t.v9)($.Gg),Be=!!Ve&&parseInt(Ve.ads,10)>0,Ze="spotify"===v.metadata.owner.username,We=(0,t.I0)(),Ke=(0,l.ur)(),ze=(0,l.TH)(),He=(0,r.W6)(Y.XPU,{loadingValue:!1}),Qe=(0,r.W6)(Y.wAP,{loadingValue:!1}),qe=(0,r.W6)(Y.bys,{loadingValue:!1}),Ge=null===(i=(0,_.useThisisPlaylistExtensionQuery)({uri:h},{gcTime:5*se.y,enabled:Le}).data)||void 0===i?void 0:i.playlistV2,Je="Playlist"===(null==Ge?void 0:Ge.__typename)?null===(n=Ge.artistsOnTour)||void 0===n?void 0:n[0]:null,Ye=qe&&"Playlist"===(null==Ge?void 0:Ge.__typename)?null===(m=Ge.concerts)||void 0===m?void 0:m.items.map((e=>e.data)):null,Xe=null==Ye?void 0:Ye.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{var i;const n=[e.location.name,e.location.city].join(c.ag.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:n,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:null===(i=a[0])||void 0===i||null===(i=i.visuals.avatarImage)||void 0===i||null===(i=i.sources[0])||void 0===i?void 0:i.url}})),$e="POP"!==Ke?new URLSearchParams(ze.search).get("uid"):null,ei=(0,W.o)(),{filter:ii}=(0,a.useContext)(I.fo),{sortState:ni}=(0,a.useContext)(R.Gb),ai=(0,a.useContext)(oe.ZF),ti=(0,a.useRef)(null),li=(0,a.useRef)(null),[si]=x,ri=(0,ie.Z)(null!==we?we:(null==si?void 0:si.url)||null),{isPlaying:oi,isActive:di,togglePlay:ci,usePlayContextItem:ui}=(0,re.n)(function(e,i,n){const a={uri:e};return(0,de.R)(a,i),(0,ce.I)(a,(0,ue.cj)(n)),a}(h,(0,A._j)(ni),ii),{featureIdentifier:"playlist"}),mi=(0,a.useCallback)((()=>{const e=(0,ae.aK)({isPlaying:oi,isActive:di,spec:je.playButtonFactory(),logger:le,uri:h});ci({loggingParams:e})}),[oi,di,ci,je,le,h]),ki=(0,a.useCallback)((e=>{const i=e.split(/[\r\n]+/g).map((e=>(0,d.EC)(e))).filter((e=>null!==e&&((0,d.wj)(e)||(0,d.hn)(e)||(0,d.dB)(e))));if(i.length>0&&M){var n;const e=i.map((e=>e.toURI())),a={after:(null===(n=ti.current)||void 0===n||null===(n=n.getSelected())||void 0===n||null===(n=n.slice(-1))||void 0===n?void 0:n[0])??"end"};We((0,u.jV)(h,e,a))}}),[M,We,h]);(0,ne.aw)(ki);const pi=(0,a.useCallback)(((e,i)=>{const n=[...i[P.a[d.JM.TRACK]]||[],...i[P.a[d.JM.LOCAL_TRACK]]||[],...i[P.a[d.JM.EPISODE]]||[],...i[P.a[d.JM.ALBUM]]||[]];n.length>0&&M&&(le.logInteraction(X.dragAddToPlaylist({playlist:h,itemToBeAdded:n[0]})),We((0,u.jV)(h,n)),ei({targetUri:h,intent:"add",type:"drop"}))}),[M,le,X,h,We,ei]),vi=(0,ke.vI)(ge.k.RichPlaylistPages,ze),yi=null===(p=(0,d.EC)(h))||void 0===p?void 0:p.id;(e=>{const i=(0,t.I0)(),n=(0,w.E)(),l=(0,t.v9)(B);(0,a.useEffect)((()=>{n&&e!==l&&i((0,U.jZ)(e))}),[e,l,i,n])})(h);const gi=(0,t.v9)(Z),Si=(e=>{let{treatment:i,entityId:n,experimentId:a,treatmentVariation:t}=e;if(i&&i[n]){const e=i[n].find((e=>e.experimentId===a));return(null==e?void 0:e.treatment)===t}return!1})({treatment:gi||{},entityId:yi||"",experimentId:Se.RPP,treatmentVariation:Ne.VARIANT});const Ni=!Ze&&(vi||Si)&&0!==T,hi=!_e&&he&&(Ue&&!Me||Ni),bi=_e&&xe&&fe&&he&&(Ue&&!Me||Ni),xi=(!_e||xe&&fe)&&C&&he;ee({context:h,shouldFire:!hi});const fi=(null==H?void 0:H.count)??1,[Ti]=(0,D.d4)(),Ci="plays"===Pe.rank_type,Fi=(0,a.useMemo)((()=>(0,A.RG)({isMixedMedia:Ee,hasEpisodes:F,hasSpotifyAudiobooks:q,hasDateAdded:z,isLive:Re,isConcert:Ie,isBlend:De,nrCollaborators:fi,isBooklist:_e,isCompactMode:Te,isChart:Ae,showPlayCount:Ci})),[Ee,F,q,z,Re,Ie,De,fi,_e,Te,Ae,Ci]),ji=(0,a.useMemo)((()=>{let e;return e=ai.getCapabilities().canSort?_e?new Set(R.i1):new Set((0,A.yj)(Fi)):Ut,e}),[Fi,_e,ai]),Ai=fe&&_e&&!Te;return(0,k.jsxs)(a.Suspense,{fallback:null,children:[(0,k.jsx)(N.$,{children:(0,pe.T5)({playlistName:b,userName:v.metadata.owner.displayName||"",isSpotifyOwned:Ze})}),(0,k.jsx)(S.Z,{types:M&&!_e?[P.a[d.JM.TRACK],P.a[d.JM.LOCAL_TRACK],P.a[d.JM.EPISODE],P.a[d.JM.ALBUM]]:[],onDrop:pi,children:(0,k.jsxs)("section",{role:"presentation",className:j.Z.playlist,"data-testid":"playlist-page","data-test-uri":h,children:[(0,k.jsx)(aa.s,{metadata:v.metadata,isPlaying:oi,isPublished:Q,totalItems:Ti,togglePlay:mi,backgroundColor:ri,spec:Ce}),(0,k.jsxs)("div",{className:j.Z.playlistContent,children:[(0,k.jsx)(ea,{playlist:v,capabilities:y,spec:je,isPlaying:oi,isActive:di,togglePlay:mi,isBooklist:_e,backgroundColor:ri,tracklistDomRef:li,isConcert:Ie,sortableColumns:ji}),(0,k.jsx)(a.Suspense,{fallback:null,children:(0,k.jsx)(_t,{formatListData:v.metadata.formatListData})}),!qe&&null!=Je&&Je.upcomingEventsCount?(0,k.jsx)(Lt,{artistConcertsUri:Je.uri||"",artistImageUrl:Je.imageUrl||"",artistName:Je.title||"",spec:X}):null,qe&&!!Je&&Xe&&Xe.length>0&&(0,k.jsx)(a.Suspense,{fallback:null,children:(0,k.jsx)(Pt,{liveEvents:Xe,artistConcertsUri:Je.uri||"",artistName:Je.title||"",spec:X})}),(0,k.jsxs)("div",{className:"contentSpacing",children:[Be?(0,k.jsx)(g,{playlistUri:h}):null,He&&Be&&Ze?(0,k.jsx)(wt,{uri:h,playlistName:b}):null,v.metadata.hasSpotifyAudiobooks&&Qe&&(0,k.jsxs)("div",{className:j.Z.noBooklistSupportContainer,children:[(0,k.jsx)(s.x,{variant:"bodyMediumBold",semanticColor:"textBase",children:c.ag.get("web-player.playlist.booklist-not-supported-title")}),(0,k.jsx)(s.x,{variant:"bodyMedium",semanticColor:"textSubdued",children:c.ag.get("web-player.playlist.booklist-not-supported.message")})]}),f>0&&(0,k.jsx)(a.Suspense,{fallback:null,children:Ai?(0,k.jsx)(Mi,{initialItems:J,contextUri:h,nrItems:f,canEdit:Ue,canRemove:O,ariaLabel:b}):(0,k.jsx)(me,{spec:Fe,children:(0,k.jsx)(E.a,{columns:Fi,children:Ae?(0,k.jsx)(zi,{ariaLabel:b,nrTracks:f,playlistUri:h,scrollToUid:$e,usePlayContextItem:ui,tracklistDomRef:li,sortableColumns:ji,isCompactMode:Te},h):(0,k.jsx)(da,{ariaLabel:b,nrTracks:f,playlistUri:h,playlistName:b,isMixedMedia:Ee,isLive:Re,isConcert:Ie,isBlend:De,isBooklist:_e,canEdit:Ue,scrollToUid:$e,feedbackPath:Pe["dislike-endpoint"],deleteFeedbackPath:Pe["delete-endpoint"],usePlayContextItem:ui,tracklistRef:ti,tracklistDomRef:li,canRemove:O,spec:Fe,initialItems:J,isCompactMode:Te,sortableColumns:ji,hasSpotifyAudiobooks:q??!1},h)})})}),xi&&(0,k.jsx)(a.Suspense,{fallback:null,children:Me?(0,k.jsx)(bt,{playlistUri:h,onCurationModeChange:Oe,isBooklist:_e}):(0,k.jsx)("button",{className:j.Z.seeMore,onClick:()=>{Oe(!0)},children:(0,k.jsx)(s.x,{as:"div",variant:"bodySmallBold",children:c.ag.get("playlist.curation.find_more")})})}),hi?(0,k.jsx)("div",{"data-testid":"recommended-track",children:(0,k.jsx)(Et,{playlistUri:h,playlistLength:v.metadata.unfilteredTotalLength,canEdit:Ue})}):null,bi?(0,k.jsx)(Rt,{uri:h}):null]})]}),Ie&&(0,k.jsx)(na,{spec:X.footerSectionFactory()})]})})]})})),Ot=a.memo((function(e){let{uri:i}=e;const n=(0,a.useContext)(oe.ZF).getCapabilities(),{filter:t}=(0,a.useContext)(I.fo),{sortState:l}=(0,a.useContext)(R.Gb),{metadataOptions:s,contentsOptions:r}=(0,Ui.d)(l,t),{data:o,isLoading:d,isError:u}=(0,me.Z)(i,s,r);return!o||d?(0,k.jsx)(F.h,{hasError:u,errorMessage:c.ag.get("error.not_found.title.playlist"),loadOffline:n.canModifyOffline}):o.metadata.permissions&&!o.metadata.permissions.canView?(0,k.jsx)(C,{uri:i}):(0,k.jsx)(Mt,{playlist:o,capabilities:n})})),Vt=()=>{const{playlistId:e}=(0,l.UO)(),i=(0,d.FW)((e||"").split("&")[0]).toURI();return(0,k.jsx)(le.fd,{surface:le.Tg.PLAYLIST,uris:[i],children:(0,k.jsx)(R.kz,{uri:i,children:(0,k.jsx)(I.hz,{uri:i,children:(0,k.jsx)(D.Y4,{children:(0,k.jsx)(Ot,{uri:i})})})})})}},71854:(e,i,n)=>{n.d(i,{I:()=>r});n(70054);var a=n(95812),t=n(57158);t.R0.TEXT,t.pg.CONTAINS;const l={[t.R0.TEXT]:"text"},s={[t.pg.CONTAINS]:"=^#"};function r(e,i){void 0!==(null==i?void 0:i.value)&&(e.metadata||(e.metadata={}),e.metadata[a.sb.FILTERING_PREDICATE]=function(e){const{field:i,operator:n,value:a}=e;if(i!==t.R0.TEXT||n!==t.pg.CONTAINS)throw new Error("Invalid filter params!");return`${l[i]} ${s[n]} "${a}"`}(i))}},91415:(e,i,n)=>{n.d(i,{R:()=>s});n(70054),n(86277);var a=n(95812),t=n(3853);t.bD.TITLE,t.bD.ADDED_BY,t.bD.ADDED_AT,t.bD.ARTIST,t.bD.ALBUM,t.bD.DURATION;const l={[t.bD.TITLE]:["title","original_index"],[t.bD.ADDED_BY]:["added_by","original_index"],[t.bD.ADDED_AT]:["added_at","album_title","album_artist_name","album_disc_number","album_track_number","original_index"],[t.bD.ARTIST]:["artist_name","album_title","album_disc_number","album_track_number","original_index"],[t.bD.ALBUM]:["album_title","album_disc_number","album_track_number","original_index"],[t.bD.DURATION]:["duration","album_title","album_disc_number","album_track_number","original_index"]};function s(e,i){void 0!==i&&(e.metadata||(e.metadata={}),e.metadata[a.sb.SORTING_CRITERIA]=function(e){const{field:i,order:n}=e,a=l[i];if(void 0===a||n!==t.As.ASC&&n!==t.As.DESC)throw new Error("Invalid sort params!");return a.map(((e,i)=>n?`${e} ${i>0?t.As.ASC:n}`:e)).join(",")}(i))}},39600:(e,i,n)=>{n.d(i,{vI:()=>a});n(75930),n(86277),n(65484),n(35174),n(96241);const a=(e,i)=>{const n=i?new URLSearchParams(i.search):void 0;return"1"===(null==n?void 0:n.get(e))}},40234:(e,i,n)=>{n.d(i,{k:()=>a});let a=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e.ILRShow="ilrs",e.PlaylistInternalTrackLinks="pitl",e.PlaylistInternalTrackAndArtistLinks="pital",e}({})},97607:(e,i,n)=>{n.d(i,{Z:()=>a});const a={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.3fc4a98c.js.map