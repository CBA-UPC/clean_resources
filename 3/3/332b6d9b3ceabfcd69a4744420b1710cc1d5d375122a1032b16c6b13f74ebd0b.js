var _hsp = window['_hsp'] = window['_hsp'] || [];
_hsp.push(['setBannerSettings', {}]);
_hsp.push(['setCustomizationSettings', {}]);
_hsp.push(['setCookiesToSubdomain', true]);
_hsp.push(['addCookieDomain', 'buysellads-410369.hs-sites.com']);
_hsp.push(['addCookieDomain', 'meetings.hubspot.com']);
_hsp.push(['addCookieDomain', 'buysellads.app9.hubspot.com']);
_hsp.push(['addCookieDomain', 'www.buysellads.com']);
_hsp.push(['addCookieDomain', 'optimizeads.net']);
_hsp.push(['addCookieDomain', '410369.hs-sites.com']);
_hsp.push(['addCookieDomain', 'buysellads.hubspotpagebuilder.com']);
_hsp.push(['addCookieDomain', 'coin-network.sandbox.hs-sites.com']);
_hsp.push(['addCookieDomain', '410369-hs-sites-com.sandbox.hs-sites.com']);
_hsp.push(['addCookieDomain', 'share.hsforms.com']);
_hsp.push(['addCookieDomain', 'www-buysellads-com.sandbox.hs-sites.com']);
_hsp.push(['addCookieDomain', 'www.optimizeads.net']);
_hsp.push(['addCookieDomain', 'www-carbonads-net.sandbox.hs-sites.com']);
_hsp.push(['addCookieDomain', 'optimizeads-net.sandbox.hs-sites.com']);
_hsp.push(['addCookieDomain', 'buysellads-1-hs-sites-com.sandbox.hs-sites.com']);
_hsp.push(['addCookieDomain', 'discover-buysellads-com.sandbox.hs-sites.com']);
_hsp.push(['addCookieDomain', 'buysellads-web9-hubspot-com.sandbox.hs-sites.com']);
_hsp.push(['addCookieDomain', 'buysellads-hubspotpagebuilder-com.sandbox.hs-sites.com']);
_hsp.push(['addCookieDomain', 'coin.network']);
_hsp.push(['addCookieDomain', 'buysellads-app9-hubspot-com.sandbox.hs-sites.com']);
_hsp.push(['addCookieDomain', 'buysellads.web9.hubspot.com']);
_hsp.push(['addCookieDomain', 'www.pubforge.com']);
_hsp.push(['addCookieDomain', 'content.buysellads.com']);
_hsp.push(['addCookieDomain', 'discover.buysellads.com']);
_hsp.push(['addCookieDomain', 'buysellads-1.hs-sites.com']);
_hsp.push(['addCookieDomain', 'www.carbonads.net']);
_hsp.push(['addCookieDomain', 'buysellads-410369-hs-sites-com.sandbox.hs-sites.com']);
_hsp.push(['setUseGeoLocation']);
_hsp.push(['setApiBaseUrl', 'https://js.hs-banner.com/v2']);
/**
 * HubSpot Cookie Banner Code Copyright 2024 HubSpot, Inc.  http://www.hubspot.com
 */
!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};e[o].call(i.exports,i,i.exports,n);i.l=!0;return i.exports}n.m=e;n.c=t;n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})};n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};n.t=function(e,t){1&t&&(e=n(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);n.r(o);Object.defineProperty(o,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o};n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="//static.hsappstatic.net/cookie-banner-js/static-1.1671/";n(n.s=4)}([function(e,t,n){var o;function s(){var e,t;t=arguments[0]||{};this.config={};this.config.elements=t.elements?t.elements:[];this.config.attributes=t.attributes?t.attributes:{};this.config.attributes[s.ALL]=this.config.attributes[s.ALL]?this.config.attributes[s.ALL]:[];this.config.allow_comments=!!t.allow_comments&&t.allow_comments;this.allowed_elements={};this.config.protocols=t.protocols?t.protocols:{};this.config.add_attributes=t.add_attributes?t.add_attributes:{};this.dom=t.dom?t.dom:document;for(e=0;e<this.config.elements.length;e++)this.allowed_elements[this.config.elements[e]]=!0;this.config.remove_element_contents={};this.config.remove_all_contents=!1;if(t.remove_contents)if(t.remove_contents instanceof Array)for(e=0;e<t.remove_contents.length;e++)this.config.remove_element_contents[t.remove_contents[e]]=!0;else this.config.remove_all_contents=!0;this.transformers=t.transformers?t.transformers:[]}s.REGEX_PROTOCOL=/^([A-Za-z0-9\+\-\.\&\;\*\s]*?)(?:\:|&*0*58|&*x0*3a)/i;s.RELATIVE="__RELATIVE__";s.ALL="__ALL__";s.prototype.clean_node=function(e){var t=this.dom.createDocumentFragment();this.current_element=t;this.whitelist_nodes=[];function n(e,t){var n;for(n=0;n<t.length;n++)if(t[n]==e)return n;return-1}function o(){var e,t,n=[],o={};for(e=0;e<arguments.length;e++)if(arguments[e]&&arguments[e].length)for(t=0;t<arguments[e].length;t++)if(!o[arguments[e][t]]){o[arguments[e][t]]=!0;n.push(arguments[e][t])}return n}function r(e){var t;switch(e.nodeType){case 1:a.call(this,e);break;case 3:case 5:t=e.cloneNode(!1);this.current_element.appendChild(t);break;case 8:if(this.config.allow_comments){t=e.cloneNode(!1);this.current_element.appendChild(t)}break;default:console&&console.log&&console.log("unknown node type",e.nodeType)}}function a(e){var t,i,a,l,h,d,u,_,f,g,m=c.call(this,e);a=(e=m.node).nodeName.toLowerCase();i=this.current_element;if(this.allowed_elements[a]||m.whitelist){this.current_element=this.dom.createElement(e.nodeName);i.appendChild(this.current_element);var p=this.config.attributes;l=o(p[a],p[s.ALL],m.attr_whitelist);for(t=0;t<l.length;t++){d=l[t];if(h=e.attributes[d]){g=!0;if(this.config.protocols[a]&&this.config.protocols[a][d]){_=this.config.protocols[a][d];g=(f=h.value.toLowerCase().match(s.REGEX_PROTOCOL))?-1!=n(f[1],_):-1!=n(s.RELATIVE,_)}if(g){(u=document.createAttribute(d)).value=h.value;this.current_element.setAttributeNode(u)}}}if(this.config.add_attributes[a])for(d in this.config.add_attributes[a]){(u=document.createAttribute(d)).value=this.config.add_attributes[a][d];this.current_element.setAttributeNode(u)}}else if(-1!=n(e,this.whitelist_nodes)){this.current_element=e.cloneNode(!0);for(;this.current_element.childNodes.length>0;)this.current_element.removeChild(this.current_element.firstChild);i.appendChild(this.current_element)}if(!this.config.remove_all_contents&&!this.config.remove_element_contents[a])for(t=0;t<e.childNodes.length;t++)r.call(this,e.childNodes[t]);this.current_element.normalize&&this.current_element.normalize();this.current_element=i}function c(e){var t,i,s,r={attr_whitelist:[],node:e,whitelist:!1};for(t=0;t<this.transformers.length;t++)if(null!=(s=this.transformers[t]({allowed_elements:this.allowed_elements,config:this.config,node:e,node_name:e.nodeName.toLowerCase(),whitelist_nodes:this.whitelist_nodes,dom:this.dom}))){if("object"!=typeof s)throw new Error("transformer output must be an object or null");if(s.whitelist_nodes&&s.whitelist_nodes instanceof Array)for(i=0;i<s.whitelist_nodes.length;i++)-1==n(s.whitelist_nodes[i],this.whitelist_nodes)&&this.whitelist_nodes.push(s.whitelist_nodes[i]);r.whitelist=!!s.whitelist;s.attr_whitelist&&(r.attr_whitelist=o(r.attr_whitelist,s.attr_whitelist));r.node=s.node?s.node:r.node}return r}for(i=0;i<e.childNodes.length;i++)r.call(this,e.childNodes[i]);t.normalize&&t.normalize();return t};void 0!==(o=function(){return s}.apply(t,[]))&&(e.exports=o)},function(e,t){e.exports='@font-face{font-family:Lato;font-display:swap;src:local("Lato-Regular"),url(https://api_base_url/fonts/Lato/Lato-Regular.woff2) format("woff2"),url(https://api_base_url/fonts/Lato/Lato-Regular.woff) format("woff")}@font-face{font-family:Lato;font-style:italic;font-display:swap;src:local("Lato-Italic"),url(https://api_base_url/fonts/Lato/Lato-Italic.woff2) format("woff2"),url(https://api_base_url/fonts/Lato/Lato-Italic.woff) format("woff")}@font-face{font-family:Lato;font-weight:800;font-display:swap;src:local("Lato-Bold"),url(https://api_base_url/fonts/Lato/Lato-Bold.woff2) format("woff2"),url(https://api_base_url/fonts/Lato/Lato-Bold.woff) format("woff")}#hs-banner-parent div,#hs-banner-parent p{color:inherit}#hs-banner-parent *{font-size:inherit;font-family:inherit;background:none;border:none;box-shadow:none;box-sizing:border-box;margin:0;padding:0;display:inline-block;line-height:1.75em}#hs-banner-parent .hs-hidden{display:none!important}#hs-banner-parent #hs-banner-gpc{font-size:var(--hs-banner-font-size,14px);font-family:Lato;font-weight:400;color:var(--hs-banner-text-color,#15295a);background:var(--hs-banner-color,#fff);border-radius:var(--hs-banner-corners,12px);box-shadow:0 8px 28px rgba(0,0,0,.28);position:fixed;width:var(--hs-banner-width,67em);max-width:calc(100% - 64px);max-height:calc(100% - 64px);overflow:auto;inset:var(--hs-banner-inset,32px 0 auto 50%);z-index:3000000000;transform:translate(var(--hs-banner-translate-x,-50%),var(--hs-banner-translate-y,0));-webkit-transform:translate(var(--hs-banner-translate-x,-50%),var(--hs-banner-translate-y,0)) translateZ(3000000000px)}#hs-banner-gpc #hs-banner-gpc-inner{display:flex;gap:1em;flex-direction:column;padding:var(--hs-banner-padding,2.2em)}#hs-banner-gpc #hs-banner-gpc-header{display:flex;flex-direction:row;justify-content:flex-end}#hs-banner-gpc #hs-banner-gpc-close-button{cursor:pointer;display:block}#hs-banner-gpc #hs-banner-gpc-close-button svg{width:var(--hs-banner-font-size,14px);height:var(--hs-banner-font-size,14px);color:var(--hs-banner-text-color,#15295a)}#hs-banner-parent #hs-eu-cookie-confirmation{font-size:var(--hs-banner-font-size,14px);font-family:Lato;font-weight:400;color:var(--hs-banner-text-color,#15295a);background:var(--hs-banner-color,#fff);border-radius:var(--hs-banner-corners,12px);box-shadow:0 8px 28px rgba(0,0,0,.28);position:fixed;width:var(--hs-banner-width,67em);max-width:calc(100% - 64px);max-height:calc(100% - 64px);overflow:auto;inset:var(--hs-banner-inset,32px 0 auto 50%);z-index:3000000000;transform:translate(var(--hs-banner-translate-x,-50%),var(--hs-banner-translate-y,0));-webkit-transform:translate(var(--hs-banner-translate-x,-50%),var(--hs-banner-translate-y,0)) translateZ(3000000000px)}#hs-eu-cookie-confirmation #hs-eu-cookie-confirmation-inner{display:flex;gap:1em;flex-direction:column;padding:var(--hs-banner-padding,2.2em)}#hs-eu-cookie-confirmation #hs-eu-cookie-confirmation-inner button:focus{box-shadow:0 0 0 2px rgba(0,128,255,.5);box-shadow:0 0 0 2px -webkit-focus-ring-color}#hs-eu-cookie-confirmation #hs-eu-header-container{display:var(--hs-banner-close-button-display,none);flex-direction:row;justify-content:flex-end}#hs-eu-cookie-confirmation #hs-eu-close-button{cursor:pointer;display:block}#hs-eu-cookie-confirmation #hs-eu-close-button svg{width:var(--hs-banner-font-size,14px);height:var(--hs-banner-font-size,14px);color:var(--hs-banner-text-color,#15295a)}#hs-eu-cookie-confirmation #hs-eu-cookie-confirmation-buttons-area{display:flex;flex-flow:row wrap;justify-content:flex-end;align-items:baseline}#hs-eu-cookie-confirmation #hs-eu-confirmation-button-group,#hs-eu-cookie-confirmation #hs-eu-opt-in-buttons{display:flex;justify-content:center;flex-flow:row wrap;gap:.5em}#hs-eu-cookie-confirmation #hs-eu-opt-in-buttons{flex-grow:1}#hs-eu-cookie-confirmation #hs-eu-confirmation-button,#hs-eu-cookie-confirmation #hs-eu-cookie-settings-button,#hs-eu-cookie-confirmation #hs-eu-decline-button{flex:1;cursor:pointer;border-radius:var(--hs-banner-button-corners,3em);min-width:11em;height:3.3em}#hs-eu-cookie-confirmation #hs-eu-confirmation-button{color:var(--hs-banner-accept-text-color,#fff);background:var(--hs-banner-accept-color,var(--hs-banner-accentColor,#425b76));border:1px solid var(--hs-banner-accept-border-color,var(--hs-banner-accentColor,#425b76))}#hs-eu-cookie-confirmation #hs-eu-decline-button{color:var(--hs-banner-decline-text-color,var(--hs-banner-accentColor,#425b76));background:var(--hs-banner-decline-color,#fff);border:1px solid var(--hs-banner-decline-border-color,var(--hs-banner-accentColor,#425b76))}#hs-eu-cookie-confirmation #hs-eu-cookie-settings-button{text-decoration:underline;font-weight:800;color:var(--hs-banner-settings-text-color,var(--hs-banner-accentColor,#425b76))}@media print{#hs-banner-gpc,#hs-eu-cookie-confirmation{display:none!important}}'},function(e,t){e.exports="#hs-banner-parent #hs-modal{position:fixed;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.28);display:flex;justify-content:center;align-items:center;z-index:3000000001;-webkit-transform:translateZ(3000000001px)}@media print{#hs-banner-parent #hs-modal{display:none!important}}#hs-banner-parent #hs-modal-content{position:absolute;display:flex;flex-direction:column;gap:1.1em;padding:var(--hs-banner-modal-padding,2.2em);width:calc(min(var(--hs-banner-modal-width, 50.3em), 100%));max-height:80%;background-color:var(--hs-banner-modal-color,#fafbff);border-radius:var(--hs-banner-modal-corners,12px);box-shadow:0 8px 28px rgba(0,0,0,.28);font-size:var(--hs-banner-modal-font-size,14px);font-family:Lato;font-weight:400;line-height:1.75em;color:var(--hs-banner-modal-text-color,#15295a)}#hs-modal-content #hs-modal-header-container{display:flex;flex-direction:row;justify-content:flex-end}#hs-modal-content #hs-modal-close-button{cursor:pointer;display:block}#hs-modal-content #hs-modal-close-button svg{width:var(--hs-banner-modal-font-size,14px);height:var(--hs-banner-modal-font-size,14px);color:var(--hs-banner-modal-text-color,#15295a)}#hs-modal-content #hs-modal-body{overflow:auto}#hs-modal-content #hs-modal-body-container{position:relative;display:flex;flex-flow:column;gap:1.1em;height:100%;width:100%}#hs-modal-content #hs-modal-introduction{display:inline-block}#hs-modal-content #hs-modal-introduction span{font-weight:800;font-size:1.3em;color:inherit}#hs-modal-content #hs-categories-container{display:flex;flex-direction:column;gap:1.1em}#hs-modal-content #hs-categories-container .hs-category-row{display:flex;flex-direction:column;background:var(--hs-banner-modal-cateogry-color,#fff);border-radius:var(--hs-banner-modal-category-corners,var(--hs-banner-modal-corners,12px));padding:2em}#hs-modal-content #hs-categories-container .hs-category-row .hs-toggle-switch-input{opacity:0;width:100%;height:100%;cursor:pointer}#hs-modal-content #hs-categories-container .hs-category-row .hs-toggle-switch{width:calc(3.4em + 6px);height:calc(1.7em + 6px);position:relative;background-color:var(--hs-banner-modal-toggle-off-color,#f1f1f1);border:3px solid var(--hs-banner-modal-toggle-off-color,#f1f1f1);border-radius:1.7em;transition:background-color .2s ease,border-color .2s ease}#hs-modal-content #hs-categories-container .hs-category-row .hs-toggle-switch-nob{position:absolute;height:1.7em;width:1.7em;left:0;border-radius:inherit;box-shadow:0 2px 5px rgba(0,0,0,.3);background:var(--hs-banner-modal-cateogry-color,#fff);transition:left .5s ease}#hs-modal-content #hs-categories-container .hs-category-row .hs-toggle-switch.hs-toggle-selected-flag{background-color:var(--hs-banner-modal-toggle-on-color,var(--hs-banner-accentColor,#425b76));border-color:var(--hs-banner-modal-toggle-on-color,var(--hs-banner-accentColor,#425b76))}#hs-modal-content #hs-categories-container .hs-category-row .hs-toggle-switch.hs-toggle-selected-flag .hs-toggle-switch-nob{left:50%}#hs-modal-content #hs-categories-container .description-accordion-arrow{transition:transform .2s;width:var(--hs-banner-modal-font-size,14px);height:var(--hs-banner-modal-font-size,14px);color:var(--hs-banner-modal-category-text-color,#15295a)}#hs-modal-content #hs-categories-container .description-accordion-arrow.rotated{transform:rotate(90deg)}#hs-modal-content #hs-categories-container .hs-category-description{transition:max-height .2s;box-sizing:border-box;overflow:hidden;opacity:0}#hs-modal-content #hs-categories-container .hs-category-description.visible{opacity:1;color:var(--hs-banner-modal-category-text-color,#15295a)}#hs-modal-content #hs-categories-container .hs-category-row-header{display:flex;justify-content:space-between;align-items:center}#hs-modal-content #hs-categories-container .hs-category-label{display:flex;flex-grow:1;gap:1.1em;align-items:center;justify-content:left;font-weight:800;color:var(--hs-banner-modal-category-text-color,#15295a);cursor:pointer}#hs-modal-content #hs-categories-container .hs-always-active-label{color:var(--hs-banner-modal-category-text-color,#15295a)}#hs-modal-content #hs-modal-footer{display:flex;justify-content:flex-end}#hs-modal-content #hs-modal-footer-container{display:flex;justify-content:center;flex-flow:row wrap;gap:.5em}#hs-modal-content #hs-modal-accept-all,#hs-modal-content #hs-modal-save-settings{flex:1;border-radius:var(--hs-banner-modal-button-corners,3em);min-width:11em;height:3.3em;cursor:pointer}#hs-modal-content #hs-modal-accept-all{color:var(--hs-banner-modal-accept-text-color,#fafbff);background:var(--hs-banner-modal-accept-color,var(--hs-banner-accentColor,#425b76));border:1px solid var(--hs-banner-modal-accept-border-color,var(--hs-banner-accentColor,#425b76))}#hs-modal-content #hs-modal-save-settings{color:var(--hs-banner-modal-save-text-color,var(--hs-banner-accentColor,#425b76));background:var(--hs-banner-modal-save-color,#fafbff);border:1px solid var(--hs-banner-modal-save-border-color,var(--hs-banner-accentColor,#425b76))}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="<unknown>";function i(e){return e.split("\n").reduce((function(e,t){var n=a(t)||l(t)||u(t)||m(t)||f(t);n&&e.push(n);return e}),[])}var s=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,r=/\((\S*)(?::(\d+))(?::(\d+))\)/;function a(e){var t=s.exec(e);if(!t)return null;var n=t[2]&&0===t[2].indexOf("native"),i=t[2]&&0===t[2].indexOf("eval"),a=r.exec(t[2]);if(i&&null!=a){t[2]=a[1];t[3]=a[2];t[4]=a[3]}return{file:n?null:t[2],methodName:t[1]||o,arguments:n?[t[2]]:[],lineNumber:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}var c=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function l(e){var t=c.exec(e);return t?{file:t[2],methodName:t[1]||o,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var h=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,d=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function u(e){var t=h.exec(e);if(!t)return null;var n=t[3]&&t[3].indexOf(" > eval")>-1,i=d.exec(t[3]);if(n&&null!=i){t[3]=i[1];t[4]=i[2];t[5]=null}return{file:t[3],methodName:t[1]||o,arguments:t[2]?t[2].split(","):[],lineNumber:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}var _=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function f(e){var t=_.exec(e);return t?{file:t[3],methodName:t[1]||o,arguments:[],lineNumber:+t[4],column:t[5]?+t[5]:null}:null}var g=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function m(e){var t=g.exec(e);return t?{file:t[2],methodName:t[1]||o,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}t.parse=i},function(e,t,n){"use strict";n.r(t);const o="_hspb_loaded",i="_hsp",s="_hsq",r="_hsGeoTargetingTest",a="_hsGpcSignal",c="_hsScanningMode",l="_hspb_ran",h="hsdbg",d="_hsPrivacyTest",u="hs-eu-cookie-confirmation",_="hs-banner-gpc",f="hs-banner-parent",g="hs-modal",m="hs-modal-content",p={NECESSARY:"necessary",ANALYTICS:"analytics",ADVERTISEMENT:"advertisement",FUNCTIONALITY:"functionality"},b="hs-hidden",y="hs-banner-style",v="hs-banner-modal-style",C="disabledHsPopups",x="PRIVACY";class S{constructor(e,t){this.win=e;this.doc=t;this.hasLoadedBaseStyle=!1;this.hasLoadedCbcStyle=!1}setHasLoadedBaseStyle(e){this.hasLoadedBaseStyle=e}setHasLoadedCbcStyle(e){this.hasLoadedCbcStyle=e}getWindow(){return this.win}getDocument(){return this.doc}getNavigator(){return this.getWindow().navigator}getLocation(){return this.getWindow().location}getPathname(){return this.getLocation().pathname}getHostname(){try{return this.getLocation().hostname}catch(e){return this.getDocument().domain}}getHasLoadedBaseStyle(){return this.hasLoadedBaseStyle}getHasLoadedCbcStyle(){return this.hasLoadedCbcStyle}}const w=new S(window,document);function T(){return w}class k{constructor(e){this.logPrepend="[HubSpot cookie banner]";this.context=e}info(e){this.isDebugEnabled()&&this.context.getWindow().console.log(`${this.logPrepend} ${e}`)}debug(e){this.isDebugEnabled()&&this.context.getWindow().console.debug(`${this.logPrepend} ${e}`)}error(e){this.isDebugEnabled()&&this.context.getWindow().console.error(`${this.logPrepend} ${e}`)}isDebugEnabled(){return this.context.getDocument().location.search.includes(h)}}var O=new k(T());const E=[0,0,0],I=e=>e.some(e=>e>0),L=(e,t)=>(e.map((e,n)=>e-t[n]).find(e=>0!==e)||0)>=0;class N{constructor(e="",t=[],n=[]){this.targetedPathPrefix=e;this.targetedCountries=t;this.targetedRegions=n}test(e,t,n){const o=this.targetedPathPrefix.length+1;if(!e.startsWith(this.targetedPathPrefix))return E;const i=this.targetedCountries.length>0||this.targetedRegions.length>0,s=void 0!==t&&this.targetedCountries.includes(t),r=t&&n?`${t}-${n}`:void 0,a=void 0!==r&&this.targetedRegions.includes(r);return[i&&a?o:0,i&&s?o:0,i?0:o]}static fromJS(e){const{allUrlsAndLocations:t,path:n,targetedCountries:o,targetedRegions:i}=e;return t?new N:new N(n||"",o||[],i||[])}}class A{constructor(e){this.value=e}getValue(){return this.value}static fromJS(e){if(!e)return this.TOP;switch(e){case 0:return this.TOP;case 1:return this.BOTTOM;case 2:return this.BOTTOM_LEFT;case 3:return this.BOTTOM_RIGHT;case 4:return this.CENTER;default:return this.TOP}}}A.TOP=new A(0);A.BOTTOM=new A(1);A.BOTTOM_LEFT=new A(2);A.BOTTOM_RIGHT=new A(3);A.CENTER=new A(4);class B{constructor(e,t,n){this.position=e;this.accentColor=t;this.showCloseButton=n}static fromJS(e){const{position:t,accentColor:n,showCloseButton:o}=e;return new B(A.fromJS(t),n,o||!1)}}var P=n(0),R=n.n(P);const D=new R.a({attributes:{a:["href","title","target"],blockquote:["cite"],ol:["start","type"],q:["cite"],ul:["type"],span:["class"]},elements:["a","b","blockquote","br","caption","cite","code","dd","dl","dt","em","h1","h2","h3","h4","h5","h6","i","li","ol","p","pre","q","small","strike","strong","sub","sup","u","ul","font","div","span"],protocols:{a:{href:["http","https","mailto",R.a.ALL]},blockquote:{cite:["http","https",R.a.RELATIVE]},q:{cite:["http","https",R.a.RELATIVE]}},remove_contents:["style","script"],add_attributes:{a:{rel:"noopener"}}}),U=e=>{if(!e)return e;const t=document.createElement("div");try{const n=document.createRange().createContextualFragment(e),o=D.clean_node(n);t.appendChild(o.cloneNode(!0))}catch(t){O.error("we had an error sanitizing an html string: "+e)}return t.innerHTML},G=e=>({__html:e||""});class M{constructor(e,t,n){this.description=e;this.label=t;this.toggleLabel=n}static fromJS(e){return new M(e.description,e.label,e.toggleLabel)}getSanitizedText(){return new M(U(this.description),U(this.label),U(this.toggleLabel))}}class Y{constructor(e,t,n,o,i,s,r){this.acceptLabel=e;this.saveSettingsLabel=t;this.introduction=n;this.necessary=o;this.analytics=i;this.advertisement=s;this.functionality=r}static fromJS(e){return new Y(e.acceptAllLabel,e.saveSettingsLabel,M.fromJS(e.introduction),M.fromJS(e.categories.necessary),M.fromJS(e.categories.analytics),M.fromJS(e.categories.advertisement),M.fromJS(e.categories.functionality))}getSanitizedText(){return new Y(U(this.acceptLabel),U(this.saveSettingsLabel),this.introduction.getSanitizedText(),this.necessary.getSanitizedText(),this.analytics.getSanitizedText(),this.advertisement.getSanitizedText(),this.functionality.getSanitizedText())}}class F{constructor(e,t,n,o,i,s){this.notification=e;this.acceptLabel=t;this.declineLabel=n;this.disclaimer=o;this.cookieSettingsLabel=i;this.modalText=s}static fromJS(e){return new F(e.notification,e.acceptLabel,e.declineLabel,e.disclaimer,e.modalText&&e.modalText.cookieSettingsLabel,e.modalText&&Y.fromJS(e.modalText))}getSanitizedText(){return new F(U(this.notification),U(this.acceptLabel),U(this.declineLabel),U(this.disclaimer),this.cookieSettingsLabel&&U(this.cookieSettingsLabel),this.modalText&&this.modalText.getSanitizedText())}}class H{constructor(e,t){this.value=e;this.name=t}getValue(){return this.value}getName(){return this.name}static fromJS(e){switch(e){case 0:return this.COOKIES_WITHOUT_BANNER;case 1:return this.NO_COOKIES;case 2:return this.NOTIFY;case 3:return this.OPT_IN;case 4:return this.COOKIES_BY_CATEGORY;case 5:return this.OPT_OUT;case 6:return this.OPT_OUT_BY_CATEGORY;default:return this.COOKIES_BY_CATEGORY}}}H.COOKIES_WITHOUT_BANNER=new H(0,"COOKIES_WITHOUT_BANNER");H.NO_COOKIES=new H(1,"NO_COOKIES");H.NOTIFY=new H(2,"NOTIFY");H.OPT_IN=new H(3,"OPT_IN");H.COOKIES_BY_CATEGORY=new H(4,"COOKIES_BY_CATEGORY");H.OPT_OUT=new H(5,"OPT_OUT");H.OPT_OUT_BY_CATEGORY=new H(6,"OPT_OUT_BY_CATEGORY");class z{constructor(e,t){this.type=e;this.text=t}static fromJS(e){const{type:t,text:n}=e;return new z(H.fromJS(t),F.fromJS(n))}getSanitizedPolicy(){return new z(this.type,this.text.getSanitizedText())}}class V{constructor(e,t){this.enabled=e;this.notificationText=U(t||"")}static fromJS(e){return new V(e.enabled,e.notificationText)}}class ${constructor(e,t,n,o,i,s,r,a,c){this.id=e;this.portalId=t;this.domain=n;this.label=o;this.enabled=i;this.configuration=s;this.policy=r;this.customizationSettings=a;this.gpcSettings=c}static fromJS(e){const{id:t,portalId:n,domain:o,label:i,enabled:s,configuration:r,policy:a,legacyCustomization:c,gpcSettings:l}=e;return new $(t,n,o,i,s,N.fromJS(r),z.fromJS(a),B.fromJS(c),V.fromJS(l))}withSanitizedPolicy(){return new $(this.id,this.portalId,this.domain,this.label,this.enabled,this.configuration,this.policy.getSanitizedPolicy(),this.customizationSettings,this.gpcSettings)}toLegacyPrivacyPolicy(){let e;switch(this.policy.type){case H.COOKIES_WITHOUT_BANNER:e=0;break;case H.NO_COOKIES:e=2;break;case H.OPT_OUT:case H.NOTIFY:case H.OPT_IN:e=1;break;case H.OPT_OUT_BY_CATEGORY:case H.COOKIES_BY_CATEGORY:default:e=3}return{active:this.enabled,testing:!1,mode:e,policyWording:"not used",acceptWording:"not used",cancelWording:"not used",disclaimerWording:"not used",hideDecline:this.policy.type===H.NOTIFY,accentColor:this.customizationSettings.accentColor,bannerType:"not used",label:this.label,privacyDefault:!1,cookiesByCategory:{},id:this.id,portalId:this.portalId}}}const K=1,W=2,q=3,j={[K]:"analytics",[W]:"advertisement",[q]:"functionality"};class J{constructor(e,t,n){this.allowed=e;this.previousCategories=n||{necessary:!0,analytics:!1,advertisement:!1,functionality:!1};this.categories=t||{necessary:!0,analytics:e,advertisement:e,functionality:e}}hasAnalyticsConsent(){return this.allowed||!0===this.categories.analytics}adsHasChangedToFalse(){return!0===this.previousCategories.advertisement&&!1===this.categories.advertisement}update(e){this.previousCategories=this.categories;this.categories=Object.assign({},this.categories,{analytics:e,advertisement:e,functionality:e});this.allowed=e;return this}updateCategories({analytics:e,advertisement:t,functionality:n}){this.previousCategories=this.categories;this.categories={necessary:!0,analytics:e,advertisement:t,functionality:n};this.allowed=e&&t&&n;return this}allCategoriesSelected(){return this.categories.necessary&&this.categories.analytics&&this.categories.advertisement&&this.categories.functionality}getSafeCopy(){return new J(this.allowed,{necessary:this.categories.necessary,analytics:this.categories.analytics,advertisement:this.categories.advertisement,functionality:this.categories.functionality},{necessary:this.previousCategories.necessary,analytics:this.previousCategories.analytics,advertisement:this.previousCategories.advertisement,functionality:this.previousCategories.functionality})}toCookieString(){return`${K}:${this.categories.analytics}_${W}:${this.categories.advertisement}_${q}:${this.categories.functionality}`}static buildFromCookieString(e){const t=e.includes(",")?e.split(","):e.split("_"),n={necessary:!0,analytics:!1,advertisement:!1,functionality:!1};t.forEach(e=>{const t=e.split(":");if(2!==t.length)return;const o=t[0],i=j[o];i&&(n[i]="true"===t[1])});const o=n.necessary&&n.advertisement&&n.analytics&&n.functionality;return new J(o,n)}static buildInitialConsent(){return new J(!1,{necessary:!0,analytics:!1,advertisement:!1,functionality:!1})}}const Q=e=>encodeURI(e),Z=e=>decodeURI(e),X="_fbp",ee="1970-01-01T00:00:01-00:00";class te{constructor(e){this.context=e;this.cookiesToSubdomain=!1;this.useSecureCookies=!1;this.domains=[];this.currentDomain=""}isEnabled(){return this.context.getNavigator().cookieEnabled||"cookie"in this.context.getDocument()&&this.context.getDocument().cookie.length>0}addDomain(e){("."+this.context.getHostname()).endsWith(e)&&(!this.currentDomain||e.length<this.currentDomain.length)&&(this.currentDomain=e);this.domains.push(e)}getDomains(){return this.domains}get(e){const t=new RegExp(`(^|;)[ ]*${e}=([^;]*)`).exec(this.context.getDocument().cookie);return t?Z(t[2]):""}set(e,t,n){let o,i,s=!1;if((n=n||{}).minsToExpire){o=new Date;o.setTime(o.getTime()+1e3*n.minsToExpire*60)}else if(n.daysToExpire){o=new Date;o.setTime(o.getTime()+1e3*n.daysToExpire*60*60*24)}else n.expiryDate&&n.expiryDate.toGMTString?o=n.expiryDate:n.expiryDate&&(o=new Date(n.expiryDate));if(void 0!==o){i=o.toGMTString();s=!0}this.setCookie(e,Q(t),{expires:s?";expires="+i:"",expiresTime:s?o:null,path:";path="+(n.path?n.path:"/"),domain:!this.cookiesToSubdomain&&this.currentDomain?";domain="+this.currentDomain:"",secure:this.useSecureCookies?";secure":"",sameSite:";SameSite=Lax"})}getDomainAncestry(e){if(""===e||!e)return[];const t=e.split(".");if(2===t.length)return[e];if(""===t[t.length-1]||t.length<2){console.error(`Invalid Domain: ${e}, Parsed As: [${t}]`);return[]}const n=[];let o,i=""+t[t.length-1];for(o=t.length-2;o>=0;o--){if(""===t[o]){if(0!==o){console.error(`Invalid Domain: ${e}, Parsed As: [${t}]`);return[]}continue}const s=`${t[o]}.${i}`;n.push(s);i=s}return n}removeFBPCookie(){const e=new Date(ee),t=e.toUTCString();this.getDomainAncestry(this.context.getDocument().domain).forEach(n=>{this.setCookie(X,"",{expires:";expires="+t,expiresTime:e,path:";path=/",domain:";domain=."+n,secure:"",sameSite:";SameSite=Lax"})})}getGACookieNames(){const e=this.context.getDocument().cookie;if(!e)return[];const t=e.split(";"),n=new RegExp("^(_ga_[a-zA-Z0-9]+)=[^;]+$"),o=[];t.forEach(e=>{const t=e.trim().match(n);t&&o.push(t[1])});return o}removeGACookie(){this.getGACookieNames().forEach(e=>this.remove(e))}remove(e){this.set(e,"",{expiryDate:ee})}setCookie(e,t,n){const o=n.expires+n.path+n.domain+n.sameSite+n.secure;this.writeCookie(`${e}=${t}${o}`)}writeCookie(e){this.context.getDocument().cookie=e}setCookiesToSubdomain(e){this.cookiesToSubdomain=e}setUseSecureCookies(e){this.useSecureCookies=e}}class ne{constructor(e,t){this.name=e;this.expirationDays=t}getName(){return this.name}getExpirationDays(){return this.expirationDays}}ne.CATEGORY_PREFERENCE_COOKIE=new ne("__hs_cookie_cat_pref",180);ne.GPC_BANNER_DISMISS_COOKIE=new ne("__hs_gpc_banner_dismiss",180);ne.NOTIFY_BANNER_DIMISS_COOKIE=new ne("__hs_notify_banner_dismiss",180);ne.OPT_OUT_COOKIE=new ne("__hs_opt_out",180);ne.INITIAL_OPT_IN=new ne("__hs_initial_opt_in",7);var oe,ie,se,re,ae,ce,le={},he=[],de=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function ue(e,t){for(var n in t)e[n]=t[n];return e}function _e(e){var t=e.parentNode;t&&t.removeChild(e)}function fe(e,t,n){var o,i,s,r={};for(s in t)"key"==s?o=t[s]:"ref"==s?i=t[s]:r[s]=t[s];if(arguments.length>2&&(r.children=arguments.length>3?oe.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===r[s]&&(r[s]=e.defaultProps[s]);return ge(e,r,o,i,null)}function ge(e,t,n,o,i){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++se:i};return null==i&&null!=ie.vnode&&ie.vnode(s),s}function me(e){return e.children}function pe(e,t){this.props=e,this.context=t}function be(e,t){if(null==t)return e.__?be(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?be(e):null}function ye(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return ye(e)}}function ve(e){(!e.__d&&(e.__d=!0)&&re.push(e)&&!Ce.__r++||ce!==ie.debounceRendering)&&((ce=ie.debounceRendering)||ae)(Ce)}function Ce(){for(var e;Ce.__r=re.length;)e=re.sort((function(e,t){return e.__v.__b-t.__v.__b})),re=[],e.some((function(e){var t,n,o,i,s,r;e.__d&&(s=(i=(t=e).__v).__e,(r=t.__P)&&(n=[],(o=ue({},i)).__v=i.__v+1,Le(r,i,o,t.__n,void 0!==r.ownerSVGElement,null!=i.__h?[s]:null,n,null==s?be(i):s,i.__h),Ne(n,i),i.__e!=s&&ye(i)))}))}function xe(e,t,n,o,i,s,r,a,c,l){var h,d,u,_,f,g,m,p=o&&o.__k||he,b=p.length;for(n.__k=[],h=0;h<t.length;h++)if(null!=(_=n.__k[h]=null==(_=t[h])||"boolean"==typeof _?null:"string"==typeof _||"number"==typeof _||"bigint"==typeof _?ge(null,_,null,null,_):Array.isArray(_)?ge(me,{children:_},null,null,null):_.__b>0?ge(_.type,_.props,_.key,null,_.__v):_)){if(_.__=n,_.__b=n.__b+1,null===(u=p[h])||u&&_.key==u.key&&_.type===u.type)p[h]=void 0;else for(d=0;d<b;d++){if((u=p[d])&&_.key==u.key&&_.type===u.type){p[d]=void 0;break}u=null}Le(e,_,u=u||le,i,s,r,a,c,l),f=_.__e,(d=_.ref)&&u.ref!=d&&(m||(m=[]),u.ref&&m.push(u.ref,null,_),m.push(d,_.__c||f,_)),null!=f?(null==g&&(g=f),"function"==typeof _.type&&_.__k===u.__k?_.__d=c=Se(_,c,e):c=we(e,_,u,p,f,c),"function"==typeof n.type&&(n.__d=c)):c&&u.__e==c&&c.parentNode!=e&&(c=be(u))}for(n.__e=g,h=b;h--;)null!=p[h]&&("function"==typeof n.type&&null!=p[h].__e&&p[h].__e==n.__d&&(n.__d=be(o,h+1)),Pe(p[h],p[h]));if(m)for(h=0;h<m.length;h++)Be(m[h],m[++h],m[++h])}function Se(e,t,n){for(var o,i=e.__k,s=0;i&&s<i.length;s++)(o=i[s])&&(o.__=e,t="function"==typeof o.type?Se(o,t,n):we(n,o,o,i,o.__e,t));return t}function we(e,t,n,o,i,s){var r,a,c;if(void 0!==t.__d)r=t.__d,t.__d=void 0;else if(null==n||i!=s||null==i.parentNode)e:if(null==s||s.parentNode!==e)e.appendChild(i),r=null;else{for(a=s,c=0;(a=a.nextSibling)&&c<o.length;c+=2)if(a==i)break e;e.insertBefore(i,s),r=s}return void 0!==r?r:i.nextSibling}function Te(e,t,n,o,i){var s;for(s in n)"children"===s||"key"===s||s in t||Oe(e,s,null,n[s],o);for(s in t)i&&"function"!=typeof t[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===t[s]||Oe(e,s,t[s],n[s],o)}function ke(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||de.test(t)?n:n+"px"}function Oe(e,t,n,o,i){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||ke(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||ke(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o||e.addEventListener(t,s?Ie:Ee,s):e.removeEventListener(t,s?Ie:Ee,s);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function Ee(e){this.l[e.type+!1](ie.event?ie.event(e):e)}function Ie(e){this.l[e.type+!0](ie.event?ie.event(e):e)}function Le(e,t,n,o,i,s,r,a,c){var l,h,d,u,_,f,g,m,p,b,y,v=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(c=n.__h,a=t.__e=n.__e,t.__h=null,s=[a]),(l=ie.__b)&&l(t);try{e:if("function"==typeof v){if(m=t.props,p=(l=v.contextType)&&o[l.__c],b=l?p?p.props.value:l.__:o,n.__c?g=(h=t.__c=n.__c).__=h.__E:("prototype"in v&&v.prototype.render?t.__c=h=new v(m,b):(t.__c=h=new pe(m,b),h.constructor=v,h.render=Re),p&&p.sub(h),h.props=m,h.state||(h.state={}),h.context=b,h.__n=o,d=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=v.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=ue({},h.__s)),ue(h.__s,v.getDerivedStateFromProps(m,h.__s))),u=h.props,_=h.state,d)null==v.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==v.getDerivedStateFromProps&&m!==u&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,b),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,b)||t.__v===n.__v){h.props=m,h.state=h.__s,t.__v!==n.__v&&(h.__d=!1),h.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),h.__h.length&&r.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,b),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(u,_,f)}))}h.context=b,h.props=m,h.state=h.__s,(l=ie.__r)&&l(t),h.__d=!1,h.__v=t,h.__P=e,l=h.render(h.props,h.state,h.context),h.state=h.__s,null!=h.getChildContext&&(o=ue(ue({},o),h.getChildContext())),d||null==h.getSnapshotBeforeUpdate||(f=h.getSnapshotBeforeUpdate(u,_)),y=null!=l&&l.type===me&&null==l.key?l.props.children:l,xe(e,Array.isArray(y)?y:[y],t,n,o,i,s,r,a,c),h.base=t.__e,t.__h=null,h.__h.length&&r.push(h),g&&(h.__E=h.__=null),h.__e=!1}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Ae(n.__e,t,n,o,i,s,r,c);(l=ie.diffed)&&l(t)}catch(e){t.__v=null,(c||null!=s)&&(t.__e=a,t.__h=!!c,s[s.indexOf(a)]=null),ie.__e(e,t,n)}}function Ne(e,t){ie.__c&&ie.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){ie.__e(e,t.__v)}}))}function Ae(e,t,n,o,i,s,r,a){var c,l,h,d=n.props,u=t.props,_=t.type,f=0;if("svg"===_&&(i=!0),null!=s)for(;f<s.length;f++)if((c=s[f])&&"setAttribute"in c==!!_&&(_?c.localName===_:3===c.nodeType)){e=c,s[f]=null;break}if(null==e){if(null===_)return document.createTextNode(u);e=i?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,u.is&&u),s=null,a=!1}if(null===_)d===u||a&&e.data===u||(e.data=u);else{if(s=s&&oe.call(e.childNodes),l=(d=n.props||le).dangerouslySetInnerHTML,h=u.dangerouslySetInnerHTML,!a){if(null!=s)for(d={},f=0;f<e.attributes.length;f++)d[e.attributes[f].name]=e.attributes[f].value;(h||l)&&(h&&(l&&h.__html==l.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||""))}if(Te(e,u,d,i,a),h)t.__k=[];else if(f=t.props.children,xe(e,Array.isArray(f)?f:[f],t,n,o,i&&"foreignObject"!==_,s,r,s?s[0]:n.__k&&be(n,0),a),null!=s)for(f=s.length;f--;)null!=s[f]&&_e(s[f]);a||("value"in u&&void 0!==(f=u.value)&&(f!==e.value||"progress"===_&&!f||"option"===_&&f!==d.value)&&Oe(e,"value",f,d.value,!1),"checked"in u&&void 0!==(f=u.checked)&&f!==e.checked&&Oe(e,"checked",f,d.checked,!1))}return e}function Be(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){ie.__e(e,n)}}function Pe(e,t,n){var o,i;if(ie.unmount&&ie.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||Be(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){ie.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&Pe(o[i],t,"function"!=typeof e.type);n||null==e.__e||_e(e.__e),e.__e=e.__d=void 0}function Re(e,t,n){return this.constructor(e,n)}function De(e,t,n){var o,i,s;ie.__&&ie.__(e,t),i=(o="function"==typeof n)?null:n&&n.__k||t.__k,s=[],Le(t,e=(!o&&n||t).__k=fe(me,null,[e]),i||le,le,void 0!==t.ownerSVGElement,!o&&n?[n]:i?null:t.firstChild?oe.call(t.childNodes):null,s,!o&&n?n:i?i.__e:t.firstChild,o),Ne(s,e)}oe=he.slice,ie={__e:function(e,t){for(var n,o,i;t=t.__;)if((n=t.__c)&&!n.__)try{if((o=n.constructor)&&null!=o.getDerivedStateFromError&&(n.setState(o.getDerivedStateFromError(e)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),i=n.__d),i)return n.__E=n}catch(t){e=t}throw e}},se=0,function(e){return null!=e&&void 0===e.constructor},pe.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=ue({},this.state),"function"==typeof e&&(e=e(ue({},n),this.props)),e&&ue(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),ve(this))},pe.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ve(this))},pe.prototype.render=me,re=[],ae="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ce.__r=0,0;var Ue=0;function Ge(e,t,n,o,i){var s,r,a={};for(r in t)"ref"==r?s=t[r]:a[r]=t[r];var c={type:e,props:a,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Ue,__source:o,__self:i};if("function"==typeof e&&(s=e.defaultProps))for(r in s)void 0===a[r]&&(a[r]=s[r]);return ie.vnode&&ie.vnode(c),c}var Me,Ye,Fe,He=0,ze=[],Ve=ie.__b,$e=ie.__r,Ke=ie.diffed,We=ie.__c,qe=ie.unmount;function je(e,t){ie.__h&&ie.__h(Ye,e,He||t),He=0;var n=Ye.__H||(Ye.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function Je(e){return He=1,Qe(rt,e)}function Qe(e,t,n){var o=je(Me++,2);return o.t=e,o.__c||(o.__=[n?n(t):rt(void 0,t),function(e){var t=o.t(o.__[0],e);o.__[0]!==t&&(o.__=[t,o.__[1]],o.__c.setState({}))}],o.__c=Ye),o.__}function Ze(e,t){var n=je(Me++,3);!ie.__s&&st(n.__H,t)&&(n.__=e,n.__H=t,Ye.__H.__h.push(n))}function Xe(e){return He=5,et((function(){return{current:e}}),[])}function et(e,t){var n=je(Me++,7);return st(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function tt(){for(var e;e=ze.shift();)if(e.__P)try{e.__H.__h.forEach(ot),e.__H.__h.forEach(it),e.__H.__h=[]}catch(t){e.__H.__h=[],ie.__e(t,e.__v)}}ie.__b=function(e){Ye=null,Ve&&Ve(e)},ie.__r=function(e){$e&&$e(e),Me=0;var t=(Ye=e.__c).__H;t&&(t.__h.forEach(ot),t.__h.forEach(it),t.__h=[])},ie.diffed=function(e){Ke&&Ke(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==ze.push(t)&&Fe===ie.requestAnimationFrame||((Fe=ie.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(o),nt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);nt&&(t=requestAnimationFrame(n))})(tt)),Ye=null},ie.__c=function(e,t){t.some((function(e){try{e.__h.forEach(ot),e.__h=e.__h.filter((function(e){return!e.__||it(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],ie.__e(n,e.__v)}})),We&&We(e,t)},ie.unmount=function(e){qe&&qe(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{ot(e)}catch(e){t=e}})),t&&ie.__e(t,n.__v))};var nt="function"==typeof requestAnimationFrame;function ot(e){var t=Ye,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Ye=t}function it(e){var t=Ye;e.__c=e.__(),Ye=t}function st(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function rt(e,t){return"function"==typeof t?t(e):t}function at(){return Ge("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 32 32",children:Ge("path",{fill:"currentColor",d:"M4.3,27.7c0.2,0.2,0.6,0.5,1,0.5c0.4,0,0.8-0.2,1-0.5l9.6-9.5l9.6,9.5c0.2,0.2,0.6,0.5,1,0.5 c0.8,0,1.5-0.6,1.5-1.5c0-0.4-0.2-0.8-0.5-1L18.2,16l9.5-9.5c0.2-0.2,0.4-0.6,0.4-1c0-0.8-0.6-1.5-1.5-1.5c-0.4,0-0.7,0.2-1,0.4l0,0 L16,13.8L6.5,4.3C6.2,4,5.8,3.8,5.4,3.8c-0.8,0-1.5,0.6-1.5,1.5c0,0.5,0.2,0.8,0.5,1.1l0,0l9.5,9.5l-9.5,9.6c-0.2,0.2-0.5,0.6-0.5,1 S4.1,27.4,4.3,27.7L4.3,27.7z"})})}function ct(e,t,n,o){n&&o&&t.addEventListener("keydown",t=>{if(!("Tab"===t.key||"Tab"===t.code))return;const i=e.getDocument().activeElement;if(t.shiftKey){if(i===n){o.focus();t.preventDefault()}}else if(i===o){n.focus();t.preventDefault()}})}function lt({context:e,onAcceptAll:t,onCookieSettingsClick:n,onDeclineAll:o,setting:i,onCloseBannerButtonClick:s,isModalDisplayed:r}){const a=Xe(null),c=Xe(null),l=Xe(null),h=Xe(null),d=Xe(null);Ze(()=>{if(!a.current)return;const t=c.current||l.current,n=d.current||h.current;ct(e,a.current,t,n)},[e,a,c,h,d,l]);const _=r?-1:0,f=i.policy,g=i.policy.type,m=g===H.OPT_OUT_BY_CATEGORY||g===H.COOKIES_BY_CATEGORY,p=g===H.OPT_IN||g===H.OPT_OUT||g===H.OPT_OUT_BY_CATEGORY||g===H.COOKIES_BY_CATEGORY;return Ge("div",{id:u,className:i.customizationSettings.position===A.BOTTOM?"hs-cookie-notification-position-bottom":"","data-nosnippet":"true",role:"dialog","aria-describedby":"hs-eu-policy-wording","aria-label":"Cookie banner",ref:a,tabIndex:_,children:Ge("div",{id:"hs-eu-cookie-confirmation-inner",children:[Ge("div",{id:"hs-eu-header-container",children:Ge("button",{id:"hs-eu-close-button",className:"hs-close-button",onClick:()=>s(g),ref:c,"aria-label":"Dismiss cookie banner",tabIndex:_,children:Ge(at,{})})}),Ge("div",{id:"hs-eu-policy-wording",dangerouslySetInnerHTML:G(f.text.notification),ref:l,tabIndex:_}),f.text.disclaimer&&p&&Ge("p",{id:"hs-eu-cookie-disclaimer",dangerouslySetInnerHTML:G(f.text.disclaimer),tabIndex:_}),Ge("div",{id:"hs-eu-cookie-confirmation-buttons-area",children:Ge("div",{id:"hs-eu-confirmation-button-group",children:[m&&Ge("button",{onClick:()=>n(),id:"hs-eu-cookie-settings-button",dangerouslySetInnerHTML:G(f.text.cookieSettingsLabel),"aria-label":f.text.cookieSettingsLabel,tabIndex:_}),Ge("div",{id:"hs-eu-opt-in-buttons",children:[Ge("button",{id:"hs-eu-confirmation-button",onClick:()=>t(g),dangerouslySetInnerHTML:G(f.text.acceptLabel),"aria-label":f.text.acceptLabel,ref:h,tabIndex:_}),p&&Ge("button",{id:"hs-eu-decline-button",onClick:()=>o(),dangerouslySetInnerHTML:G(f.text.declineLabel),ref:d,"aria-label":f.text.declineLabel,tabIndex:_})]})]})})]})})}function ht({category:e,disabled:t,onToggleChange:n,toggleValue:o}){const i="hs-category-toggle-"+e,s=i+"-help-text";return Ge("div",{className:"hs-toggle-switch "+(o?"hs-toggle-selected-flag":""),children:[Ge("div",{className:"hs-toggle-switch-nob"}),Ge("label",{htmlFor:i,children:Ge("span",{className:"hs-hidden",id:s,children:`${e} cookies ${o?"allowed":"disallowed"}`})}),Ge("input",{id:i,className:"hs-toggle-switch-input",type:"checkbox",onChange:e=>n(e.currentTarget.checked),checked:o,disabled:t,"aria-pressed":o,tabIndex:0,"aria-describedby":s,"data-test-id":i})]})}function dt({className:e}){return Ge("svg",{version:"1.1",id:"plus-icon-svg",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 32 32",className:e,children:Ge("path",{fill:"currentColor",d:"M22.6,15.3c-0.1-0.1-0.1-0.2-0.2-0.2l0,0l-0.1-0.2l0,0l0,0l0,0L12.1,4.2c-0.2-0.2-0.6-0.5-1.1-0.5 c-0.9,0-1.5,0.7-1.5,1.5c0,0.4,0.2,0.7,0.4,1l0,0l9.3,9.7l-9.3,9.7c-0.3,0.3-0.6,0.7-0.6,1.1c0,0.9,0.7,1.5,1.5,1.5 c0.5,0,1-0.2,1.2-0.6l0,0l10.2-10.7l0,0l0,0l0,0l0.2-0.2c0.1-0.1,0.1-0.2,0.2-0.2l0,0c0-0.1,0.1-0.2,0.1-0.2l0,0 c0-0.1,0.1-0.2,0.1-0.3l0,0c0-0.1,0-0.2-0.1-0.3l0,0v-0.1C22.6,15.5,22.6,15.4,22.6,15.3L22.6,15.3L22.6,15.3z"})})}function ut(e,t){if(!t)return!1;const n=e.getBoundingClientRect(),o=t.getBoundingClientRect();return n.top>=o.top&&n.left>=o.left&&n.bottom<=o.bottom&&n.right<=o.right}function _t({category:e,onToggleChange:t,sectionText:n,toggleValue:o,modalBodyRef:i}){const[s,r]=Je(!1),a=e===p.NECESSARY,c=Xe(null),l=Xe(null),h=()=>{r(!s)};Ze(()=>{if(s){const e=c.current;e&&e.scrollIntoView&&!ut(e,i.current)&&e.scrollIntoView({behavior:"smooth"})}},[s,i,c]);return Ge("div",{className:"hs-category-row",ref:c,children:[Ge("div",{className:"hs-category-row-header",children:[Ge("button",{id:"hs-category-"+e,className:"hs-category-label",onClick:h,"aria-expanded":s,"aria-controls":"hs-category-description-"+e,tabIndex:0,children:[Ge(dt,{className:"description-accordion-arrow "+(s?"rotated":"")}),Ge("span",{dangerouslySetInnerHTML:G(n.label)})]}),!a&&Ge(ht,{category:e,disabled:e===p.NECESSARY,onToggleChange:e=>t(e),toggleValue:o}),n.toggleLabel&&Ge("span",{className:"hs-always-active-label",dangerouslySetInnerHTML:G(n.toggleLabel),tabIndex:0,"aria-label":n.toggleLabel})]}),Ge("div",{className:"hs-category-description "+(s?"visible":""),ref:l,style:{maxHeight:s&&l.current?2*l.current.scrollHeight:0},id:"hs-category-description-"+e,dangerouslySetInnerHTML:G(n.description),tabIndex:0})]})}var ft=n(1),gt=n.n(ft),mt=n(2),pt=n.n(mt);const bt=(e,t,n,o,i)=>{const s=e.getDocument(),r=s.createElement("style");r.setAttribute("type","text/css");r.setAttribute("id",o);const a=new RegExp("https://api_base_url","g"),c=i?t.replace(a,i):t,l=s.createTextNode(c);r.appendChild(l);const h=s.body.firstChild;s.body.insertBefore(r,h)};function yt(e,t,n){if(!e.getHasLoadedBaseStyle()){bt(e,gt.a,t,y,n);e.setHasLoadedBaseStyle(!0)}}function vt(e,t){if(!e.getHasLoadedCbcStyle()){bt(e,pt.a,t,v);e.setHasLoadedCbcStyle(!0)}}function Ct({accentColor:e,consent:t,context:n,modalText:o,onAcceptCategories:i,onCloseModal:s}){const r=Xe(null),a=Xe(null),c=Xe(null),l=Xe(null);Ze(()=>{r.current&&ct(n,r.current,a.current,c.current)},[n,r,a,c]);const[h,d]=Je(t.categories.analytics),[u,_]=Je(t.categories.advertisement),[f,b]=Je(t.categories.functionality),y=()=>{i({[p.ANALYTICS]:h,[p.ADVERTISEMENT]:u,[p.FUNCTIONALITY]:f})},v=()=>{d(!0);_(!0);b(!0);i({[p.ANALYTICS]:!0,[p.ADVERTISEMENT]:!0,[p.FUNCTIONALITY]:!0})};vt(n,e);return Ge("div",{id:g,"data-nosnippet":"true",children:Ge("div",{id:m,ref:r,role:"alertdialog","aria-modal":"true","aria-labelledby":"hs-modal-introduction","aria-describedby":"hs-modal-introduction-description",tabIndex:0,children:[Ge("div",{id:"hs-modal-header",children:Ge("div",{id:"hs-modal-header-container",children:Ge("button",{id:"hs-modal-close-button",className:"hs-close-button",onClick:()=>s(),ref:a,tabIndex:0,"aria-label":"Close modal",children:Ge(at,{})})})}),Ge("div",{id:"hs-modal-body",ref:l,children:Ge("div",{id:"hs-modal-body-container",children:[Ge("div",{id:"hs-modal-introduction",children:Ge("span",{dangerouslySetInnerHTML:G(o.introduction.label)})}),Ge("div",{id:"hs-modal-introduction-description",children:Ge("p",{dangerouslySetInnerHTML:G(o.introduction.description)})}),Ge("div",{id:"hs-categories-container",children:[Ge(_t,{category:p.NECESSARY,onToggleChange:()=>{},sectionText:o.necessary,toggleValue:!0,modalBodyRef:l}),Ge(_t,{category:p.ANALYTICS,onToggleChange:e=>d(e),sectionText:o.analytics,toggleValue:h,modalBodyRef:l}),Ge(_t,{category:p.ADVERTISEMENT,onToggleChange:e=>_(e),sectionText:o.advertisement,toggleValue:u,modalBodyRef:l}),Ge(_t,{category:p.FUNCTIONALITY,onToggleChange:e=>b(e),sectionText:o.functionality,toggleValue:f,modalBodyRef:l})]})]})}),Ge("div",{id:"hs-modal-footer",children:Ge("div",{id:"hs-modal-footer-container",children:[Ge("button",{id:"hs-modal-accept-all",onClick:()=>v(),tabIndex:0,children:o.acceptLabel}),Ge("button",{id:"hs-modal-save-settings",onClick:y,ref:c,tabIndex:0,children:o.saveSettingsLabel})]})})]})})}function xt({apiBaseUrl:e,consent:t,setting:n,context:o,onConsentChange:i,onCloseBannerWithoutConsent:s,dismissNotifyBanner:r}){const[a,c]=Je(!1),l=e=>{if(e!==H.NOTIFY){t.update(!0);i(t)}else r()},h=()=>{t.update(!1);i(t)},d=({analytics:e,advertisement:n,functionality:o})=>{t.updateCategories({analytics:e,advertisement:n,functionality:o});i(t)},_=e=>{if(e!==H.OPT_IN&&e!==H.COOKIES_BY_CATEGORY)if(e!==H.NOTIFY){t.update(!0);i(t)}else r();else s()},f=()=>{c(!0)},g=()=>{c(!1);const e=o.getDocument().getElementById(u);e&&e.focus()};yt(o,n.customizationSettings.accentColor,e);return Ge(me,{children:[Ge(lt,{context:o,setting:n,onAcceptAll:l,onDeclineAll:h,onCookieSettingsClick:f,onCloseBannerButtonClick:_,isModalDisplayed:a}),a&&Ge(Ct,{accentColor:n.customizationSettings.accentColor,consent:t,context:o,modalText:n.policy.text.modalText,onAcceptCategories:d,onCloseModal:g})]})}function St({apiBaseUrl:e,context:t,setting:n,onCloseBanner:o}){yt(t,n.customizationSettings.accentColor,e);return Ge("div",{id:_,"data-nosnippet":"true",role:"dialog","aria-describedby":"hs-banner-gpc-wording",children:Ge("div",{id:"hs-banner-gpc-inner",children:[Ge("div",{id:"hs-banner-gpc-header",children:Ge("button",{id:"hs-banner-gpc-close-button",className:"hs-close-button",onClick:o,"aria-label":"Dismiss banner",children:Ge(at,{})})}),Ge("div",{id:"hs-banner-gpc-wording",dangerouslySetInnerHTML:G(n.gpcSettings.notificationText)})]})})}const wt=(e,t)=>{const n=e.getDocument().createElement("div");n.setAttribute("id",f);n.setAttribute("style",t);const o=e.getDocument().body;o.insertBefore(n,o.firstChild);return n};function Tt(e,t,n,o,i,s,r,a){const c=wt(i,o);De(Ge(xt,{apiBaseUrl:e,consent:t,setting:n,context:i,onConsentChange:e=>s(e),onCloseBannerWithoutConsent:r,dismissNotifyBanner:a}),c);return c}function kt(e,t,n,o,i){const s=wt(t,o);De(Ge(St,{apiBaseUrl:e,context:t,setting:n,onCloseBanner:i}),s);return s}class Ot{static postActivity(e,t,n){fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(()=>O.info(`Sent a banner ${t} event.`)).catch(()=>O.error(`There was an issue sending a banner ${t} event.`))}static sendView(e,t){Ot.postActivity(e+"/activity/view","VIEW",t)}static sendClick(e,t){Ot.postActivity(e+"/activity/click","CLICK",t)}}let Et;!function(e){e[e.ROUND=0]="ROUND";e[e.SQUARE=1]="SQUARE";e[e.PILL=2]="PILL"}(Et||(Et={}));const It={[Et.ROUND]:"0.5em",[Et.SQUARE]:"0",[Et.PILL]:"3em"},Lt={[Et.ROUND]:"12px",[Et.SQUARE]:"0",[Et.PILL]:"0"},Nt=e=>null==e,At=(e,t)=>t?[{cssVar:e,value:t}]:[],Bt=(e,t)=>t?[{cssVar:e,value:`${t.number}${t.units}`}]:[],Pt=(e,t)=>Nt(t)?[]:[{cssVar:e,value:It[t]}],Rt=(e,t)=>Nt(t)?[]:[{cssVar:e,value:Lt[t]}],Dt=(e,t)=>Nt(t)?[]:[...At(`--hs-banner-${e}-color`,t.color),...At(`--hs-banner-${e}-text-color`,t.textColor),...At(`--hs-banner-${e}-border-color`,t.borderColor)],Ut=e=>Nt(e)?[]:[{cssVar:"--hs-banner-close-button-display",value:e?"flex":"none"}],Gt=e=>{if(Nt(e))return[];switch(A.fromJS(e)){case A.BOTTOM:return[{cssVar:"--hs-banner-inset",value:"auto 50% 32px"},{cssVar:"--hs-banner-translate-x",value:"-50%"},{cssVar:"--hs-banner-translate-y",value:"0"}];case A.BOTTOM_LEFT:return[{cssVar:"--hs-banner-inset",value:"auto auto 32px 32px"},{cssVar:"--hs-banner-translate-x",value:"0"},{cssVar:"--hs-banner-translate-y",value:"0"}];case A.BOTTOM_RIGHT:return[{cssVar:"--hs-banner-inset",value:"auto 32px 32px auto"},{cssVar:"--hs-banner-translate-x",value:"0"},{cssVar:"--hs-banner-translate-y",value:"0"}];case A.CENTER:return[{cssVar:"--hs-banner-inset",value:"50% auto auto 50%"},{cssVar:"--hs-banner-translate-x",value:"-50%"},{cssVar:"--hs-banner-translate-y",value:"-50%"}];default:return[{cssVar:"--hs-banner-inset",value:"32px auto auto 50%"},{cssVar:"--hs-banner-translate-x",value:"-50%"},{cssVar:"--hs-banner-translate-y",value:"0"}]}},Mt=e=>e.map(e=>`${e.cssVar}:${e.value}`).join(";"),Yt=e=>[...At("--hs-banner-color",e.bannerColor),...At("--hs-banner-text-color",e.bannerTextColor),...At("--hs-banner-settings-text-color",e.bannerSettingsButtonTextColor),...Bt("--hs-banner-width",e.bannerWidth),...Bt("--hs-banner-padding",e.bannerPadding),...Rt("--hs-banner-corners",e.bannerCorners),...Pt("--hs-banner-button-corners",e.bannerButtonCorners),...Dt("accept",e.bannerAcceptButtonStyle),...Dt("decline",e.bannerDeclineButtonStyle),...Ut(e.showCloseButton),...Gt(e.position),...At("--hs-banner-modal-color",e.modalColor),...At("--hs-banner-modal-text-color",e.modalTextColor),...Bt("--hs-banner-modal-padding",e.modalContainerPadding),...Bt("--hs-banner-modal-width",e.modalWidth),...Rt("--hs-banner-modal-corners",e.modalCorners),...Pt("--hs-banner-modal-button-corners",e.modalButtonCorners),...Dt("modal-accept",e.modalAcceptButtonStyle),...Dt("modal-save",e.modalSaveSettingsButtonStyle),...Rt("--hs-banner-modal-category-corners",e.modalCategoryCorners),...At("--hs-banner-modal-cateogry-color",e.modalCategoryColor),...At("--hs-banner-modal-category-text-color",e.modalCategoryTextColor),...At("--hs-banner-modal-toggle-on-color",e.modalCategoryToggleOnColor),...At("--hs-banner-modal-toggle-off-color",e.modalCategoryToggleOffColor)],Ft=e=>[...At("--hs-banner-accentColor",e.accentColor),...Gt(e.position.getValue()),...Ut(e.showCloseButton)],Ht=e=>{const t={};if(!e)return t;const n=e.indexOf("-"),[o,i]=-1===n?[e,void 0]:[e.substring(0,n),e.substring(n+1)];o&&(t.countryCode=o);i&&(t.regionCode=i);return t};class zt{constructor(e){this.publicMethods=["showBanner","hideBanner","addPrivacyConsentListener","setApiBaseUrl","setCookiesToSubdomain","setUseSecureCookies","addCookieDomain","addEnabledFeatureGates","setBannerSettings","setCustomizationSettings","setUseGeoLocation","setGeoLocation","addPrivacySettingsListener","revokeCookieConsent"];this.enabledFeatureGates=[];this.context=e;this.bannerSettings=[];this.privacyConsentListeners=[];this.privacySettingsListeners=[];this.useGeoLocation=!1;this.cookie=new te(e);this.isRunningInTestMode=e.getLocation().search.includes(d);this.removeDeprecatedBannerCookies()}removeDeprecatedBannerCookies(){this.cookie.get(ne.OPT_OUT_COOKIE.getName())&&this.cookie.remove(ne.OPT_OUT_COOKIE.getName());this.cookie.get(ne.INITIAL_OPT_IN.getName())&&this.cookie.remove(ne.INITIAL_OPT_IN.getName())}run(){if(this.disableBannerFlagSet()){O.info('"PRIVACY" flag found in disabledHsPopups window queue. Banner script will not run.');return!0}this.findMatchingSetting();this.logGpcSignal();if(!this.matchedSetting){O.debug("we were unable to find the matching settings for this webpages. The banner will not run.");this.setConsent(new J(!0),{reportClick:!1});return!1}if(this.shouldScanningOverride()){this.setConsent(new J(!0),{reportClick:!1,persist:!0,treatAsConsentEvent:!0});return!0}if(this.shouldGpcOverride()){this.setConsent(new J(!1),{persist:!1,reportClick:!1});this.isGpcBannerDismissCookiePresent()||this.renderGpcBanner();return!0}switch(this.matchedSetting.policy.type){case H.NO_COOKIES:this.setConsent(new J(!1),{reportClick:!1});break;case H.OPT_IN:case H.COOKIES_BY_CATEGORY:if(this.useConsentFromExistingCookie())break;this.cookie.removeGACookie();this.setConsent(J.buildInitialConsent(),{persist:!1,reportClick:!1});this.renderBanner();break;case H.OPT_OUT_BY_CATEGORY:case H.OPT_OUT:if(this.useConsentFromExistingCookie())break;this.setConsent(new J(!0),{persist:!1,reportClick:!1});this.renderBanner();break;case H.NOTIFY:this.setConsent(new J(!0),{persist:!1,reportClick:!1});if(this.isNotifyBannerDismissCookiePresent())break;this.renderBanner();break;case H.COOKIES_WITHOUT_BANNER:default:this.setConsent(new J(!0),{reportClick:!1})}return!0}useConsentFromExistingCookie(){const e=this.readConsentCookie();if(e){this.setConsent(e,{persist:!1,reportClick:!1});e.hasAnalyticsConsent()||this.cookie.removeGACookie();return!0}return!1}shouldScanningOverride(){return[H.OPT_OUT,H.OPT_OUT_BY_CATEGORY,H.COOKIES_BY_CATEGORY,H.OPT_IN,H.NOTIFY].includes(this.matchedSetting.policy.type)&&this.context.getWindow()[c]}shouldGpcOverride(){return this.matchedSetting.gpcSettings.enabled&&this.getGpcSignal()}getGpcSignal(){const e=this.context.getLocation().search;if(e.includes(a)){return{TRUE:!0,FALSE:!1}[(new URLSearchParams(e).get(a)||"").toUpperCase()]}return this.context.getNavigator().globalPrivacyControl}logGpcSignal(){O.debug("GPC signal: "+this.getGpcSignal())}findMatchingSetting(){const e=this.context.getPathname(),{countryCode:t,regionCode:n}=Ht(this.geoLocation),o=this.bannerSettings.filter(e=>e.enabled).map(o=>({setting:o,matchResult:o.configuration.test(e,t,n)})).reduce((e,t)=>L(e.matchResult,t.matchResult)?e:t,{setting:null,matchResult:E});I(o.matchResult)&&o.setting&&this.setMatchingSetting(o.setting.withSanitizedPolicy())}setMatchingSetting(e){this.matchedSetting=e;if(0===this.privacySettingsListeners.length)return;const t=e.toLegacyPrivacyPolicy();this.privacySettingsListeners.forEach(e=>this.safeCallListener(e,t))}getMatchingSetting(){return this.matchedSetting}hasEnabledFeatureGate(e){return this.enabledFeatureGates&&this.enabledFeatureGates.includes(e)}setApiBaseUrl(e){/^https:\/\/js-?.{0,3}\.hs-banner(qa)?\.com.*/.test(e)?this.apiBaseUrl=e:O.error("unsupported base Api url provided.")}setBannerSettings(e){(e[this.context.getLocation().hostname]||[]).forEach(e=>this.bannerSettings.push($.fromJS(e)))}setCustomizationSettings(e){const t=e[this.context.getLocation().hostname];this.styleOverrides=t;this.bannerParentElement&&this.bannerParentElement.setAttribute("style",this.getRenderStyles())}getCurrentGeoLocation(){return new Promise(e=>{const t=this.context.getLocation().search;if(t.includes(r)){const n=new URLSearchParams(t).get(r);e(n||"")}else fetch(this.apiBaseUrl+"/cf-location").then(e=>e.text()).then(t=>e(t)).catch(()=>{O.error("We could not fetch the geolocation.");e("")})})}setGeoLocation(e){this.geoLocation=e}addEnabledFeatureGates(e){e.forEach(e=>this.enabledFeatureGates.push(e))}addCookieDomain(e){this.cookie.addDomain(e)}setCookiesToSubdomain(e){this.cookie.setCookiesToSubdomain(e)}setUseSecureCookies(e){this.cookie.setUseSecureCookies(e)}setUseGeoLocation(){this.useGeoLocation=!0}addPrivacyConsentListener(e){this.consent&&this.safeCallListener(e,this.consent.getSafeCopy());this.privacyConsentListeners.push(e)}setConsent(e,t){const n={persist:!0,treatAsConsentEvent:!0,reportClick:!0},{persist:o,treatAsConsentEvent:i,reportClick:s}=Object.assign({},n,{},t);this.consent=e;i&&this.hideBanner();o&&this.setConsentCookie();if(!this.isRunningInTestMode){s&&(this.consent.hasAnalyticsConsent()?this.trackAction("trackApproveCookieConsent"):this.trackAction("trackDeclineCookieConsent"));if(i){this.privacyConsentListeners.forEach(t=>this.safeCallListener(t,e.getSafeCopy()));this.consent.adsHasChangedToFalse()&&this.cookie.removeFBPCookie()}s&&this.sendClickActivity()}}getConsent(){return this.consent.getSafeCopy()}setConsentCookie(){if(!this.matchedSetting||this.isRunningInTestMode)return;const e=this.matchedSetting.policy.type;e!==H.NO_COOKIES&&e!==H.COOKIES_WITHOUT_BANNER&&e!==H.NOTIFY&&this.cookie.set(ne.CATEGORY_PREFERENCE_COOKIE.getName(),this.consent.toCookieString(),{daysToExpire:ne.CATEGORY_PREFERENCE_COOKIE.getExpirationDays(),path:"/"})}readConsentCookie(){const e=this.cookie.get(ne.CATEGORY_PREFERENCE_COOKIE.getName());return e?J.buildFromCookieString(e):null}safeCallListener(e,t){try{e(t)}catch(e){O.error("error calling listener.")}}isGpcBannerDismissCookiePresent(){return!!this.cookie.get(ne.GPC_BANNER_DISMISS_COOKIE.getName())}setGpcBannerDismissCookie(){this.cookie.set(ne.GPC_BANNER_DISMISS_COOKIE.getName(),"true",{daysToExpire:ne.GPC_BANNER_DISMISS_COOKIE.getExpirationDays(),path:"/"})}isNotifyBannerDismissCookiePresent(){return!!this.cookie.get(ne.NOTIFY_BANNER_DIMISS_COOKIE.getName())}setNotifyBannerDismissCookie(){this.cookie.set(ne.NOTIFY_BANNER_DIMISS_COOKIE.getName(),"true",{daysToExpire:ne.NOTIFY_BANNER_DIMISS_COOKIE.getExpirationDays(),path:"/"})}dismissNotifyBanner(){this.hideBanner();this.setNotifyBannerDismissCookie()}dismissGpcBanner(){this.hideBanner();this.setGpcBannerDismissCookie()}getRenderStyles(){try{if(this.styleOverrides){O.debug("using style overrides");return Mt(Yt(this.styleOverrides))}if(this.matchedSetting){O.debug("using legacy customization render styles");return Mt(Ft(this.matchedSetting.customizationSettings))}}catch(e){console.error("unable to utilize style overides",e)}return""}renderGpcBanner(){this.bannerParentElement=kt(this.apiBaseUrl,this.context,this.matchedSetting,this.getRenderStyles(),this.dismissGpcBanner.bind(this));this.sendViewActivity()}renderBanner(){this.bannerParentElement=Tt(this.apiBaseUrl,this.consent,this.matchedSetting,this.getRenderStyles(),this.context,this.setConsent.bind(this),this.hideBanner.bind(this),this.dismissNotifyBanner.bind(this));this.sendViewActivity()}hideBanner(){if(this.bannerParentElement){const e=this.bannerParentElement.children;for(let t=0;t<e.length;t++)e[t].classList.add(b)}}showBanner(){if(this.matchedSetting.policy.type===H.NO_COOKIES||this.matchedSetting.policy.type===H.COOKIES_WITHOUT_BANNER)return;this.bannerParentElement||(this.shouldGpcOverride()?this.renderGpcBanner():this.renderBanner());const e=this.bannerParentElement.children;if(e.length>1){e[1].classList.remove(b)}else e[0].classList.remove(b)}invoke(e,t){if(!this.publicMethods.includes(e)||!Reflect.has(this,e)){O.debug(`failed to invoke method ${e} of the banner.`);throw new Error("Could not invoke banner method.")}Reflect.get(this,e).apply(this,t)}getBaseActivityPayload(){const e=this.context.getWindow().hsVars,t=e&&e.page_id;return{bannerGeoLocation:this.geoLocation||"",bannerPolicyId:this.matchedSetting.id,bannerType:this.matchedSetting.policy.type.getName(),domain:this.matchedSetting.domain,portalId:this.matchedSetting.portalId,contentId:t||""}}sendClickActivity(){if(!this.consent||!this.matchedSetting||this.isRunningInTestMode)return;const e={consentAllowed:this.consent.allowed,consentAnalytics:this.consent.categories.analytics,consentAdvertisement:this.consent.categories.advertisement,consentFunctionality:this.consent.categories.functionality},t=Object.assign({},this.getBaseActivityPayload(),{},e);Ot.sendClick(this.apiBaseUrl,t)}sendViewActivity(){if(!this.matchedSetting||this.isRunningInTestMode)return;const e=this.getBaseActivityPayload();Ot.sendView(this.apiBaseUrl,e)}getAnalyticsQueue(){return this.context.getWindow()[s]=this.context.getWindow()[s]||[]}trackAction(e){try{this.getAnalyticsQueue().push([e])}catch(e){O.error("Unable to send analytics tracking event: "+e)}}disableBannerFlagSet(){const e=this.context.getWindow()[C]||[];return Array.isArray(e)&&e.includes(x)}revokeCookieConsent(){[ne.INITIAL_OPT_IN.getName(),ne.OPT_OUT_COOKIE.getName(),ne.CATEGORY_PREFERENCE_COOKIE.getName(),ne.GPC_BANNER_DISMISS_COOKIE.getName(),ne.NOTIFY_BANNER_DIMISS_COOKIE.getName(),"__hssc","__hssrc","__hstc","__hs_do_not_track","hubspotutk","messagesUtk"].forEach(e=>this.cookie.remove(e));this.trackAction("trackRevokeCookieConsent");this.setConsent(new J(!1),{reportClick:!1})}addPrivacySettingsListener(e){this.matchedSetting&&this.safeCallListener(e,this.matchedSetting.toLegacyPrivacyPolicy());this.privacySettingsListeners.push(e)}}class Vt{constructor(e){this.priorityFunctions=["setApiBaseUrl","setCookiesToSubdomain","setUseSecureCookies","addCookieDomain","addEnabledFeatureGates","setBannerSettings"];const t=e.getWindow();if(Array.isArray(t[i]))this.queue=t[i];else{this.queue=[];t[i]=this.queue}this.banner=new zt(e);this.context=e}queuePushFn(e){try{if(!(e&&Array.isArray(e)&&e.length>0)){O.debug("invalid arguments passed to the banner queue.");return!1}const t=e[0],n=e.slice(1);this.banner.invoke(t,n);return!0}catch(e){O.error("There was an error running banner method.")}return!1}overrideQueuePush(){this.queue.push=this.queuePushFn.bind(this)}dequeueEntries(e){for(let t=0;t<this.queue.length;t++){const n=this.queue[t];if(!Array.isArray(n)||0===n.length)continue;const o=n[0];if(e.includes(o)){this.queuePushFn(n);this.queue.splice(t--,1)}}}dequeueAllEntries(){for(let e=0;e<this.queue.length;e++){const t=this.queue[e];if(Array.isArray(t)&&0!==t.length){this.queuePushFn(t);this.queue.splice(e--,1)}}}run(){const e=this.context.getWindow();if(!e[l]){e[l]=!0;this.dequeueEntries(["setUseGeoLocation"]);this.dequeueEntries(this.priorityFunctions);this.dequeueAllEntries();this.overrideQueuePush();this.banner.useGeoLocation?this.banner.getCurrentGeoLocation().then(e=>{this.banner.setGeoLocation(e);this.banner.run()}):this.banner.run()}}}var $t=n(3);const Kt=e=>e.stack?$t.parse(e.stack).map(e=>({filename:e.file,function:e.methodName,args:e.arguments,lineno:e.lineNumber,colno:e.column})):[],Wt=()=>{if(!document.currentScript)return null;const e=document.currentScript.getAttribute("src");return e?e.toLowerCase().includes("qa")?"qa":"prod":null},qt=()=>{if(!document.currentScript)return null;const e=document.currentScript.getAttribute("src");return e?e.toLowerCase().includes("eu1")?"eu1":"na1":null},jt="https://exceptions{{hublet}}.hs-embed-reporting{{env}}.com/outpost",Jt=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),Qt=()=>"randomUUID"in crypto?crypto.randomUUID():Jt(),Zt=(e,t)=>{const n="na1"!==e?"-"+e:"",o="qa"===t?"qa":"";return jt.replace("{{hublet}}",n).replace("{{env}}",o)},Xt=(e,t,n,o)=>{const i=Date.now()/1e3,s=Kt(e);return{level:"error",environment:t,tags:{region:n},logger:"javascript",platform:"javascript",request:{headers:{"User-Agent":navigator.userAgent},url:window.location.href},event_id:Qt().replace(/-/g,""),transaction:e.message,exception:{values:[{mechanism:{handled:!0,type:"generic"},type:e.name,value:e.message,stacktrace:{frames:s}}]},timestamp:i,extra:o}},en=e=>{(new Image).src=e},tn=e=>{const t=e instanceof Error,n=t?e:new Error(String(e)),o=Wt()||"prod",i=qt()||"na1",s=Xt(n,o,i,{isInstanceOfError:t});en(`${Zt(i,o)}/cookie-banner-v2/raw/error.gif?url=${s.request.url}\n    &report=${encodeURIComponent(JSON.stringify(s))}`)},nn=T();function on(){const e=nn.getWindow();if(e[o]){O.info("the cookie banner has already been loaded via another script.");return}e[o]=!0;new Vt(nn).run()}function sn(e){try{e()}catch(e){console.error(e);tn(e)}}function rn(){sn(on)}const an=nn.getDocument();function cn(){rn();an.removeEventListener("DOMContentLoaded",cn)}"loading"===an.readyState?an.addEventListener("DOMContentLoaded",cn):rn()}]);
/****** Cookie Banner version static-1.1671 *****/(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var y=(0,c.ZP)(p.Z).attrs({buttonSize:"tiny",buttonStyle:"standard"}).withConfig({displayName:"StyledFilters__FilterButton",componentId:"sc-1nju9x9-0"})(["font-size:14px;font-weight:400;height:",";padding:",";background:#f9fafb;border-color:white;color:",";"," &:active{background-color:",";color:",";}&:focus{border:2px solid #050505;}"],function(e){return e.height},function(e){return e.padding},function(e){return e.theme.colors.black[800]},function(e){return e["data-selected"]&&(0,c.iv)(["&,&:hover,&:focus{background-color:",";border:1px solid ",";color:",";box-shadow:none;}"],function(e){return e.theme.colors.primary[100]},function(e){return e.theme.colors.primary[700]},function(e){return e.theme.colors.primary[900]})},function(e){return e.theme.colors.primary[100]},function(e){return e.theme.colors.primary[800]}),x=c.ZP.span.withConfig({displayName:"StyledFilters__ButtonContainer",componentId:"sc-1nju9x9-1"})(["",""],function(e){return e.flexGrow&&(0,c.iv)(["flex-grow:",";"],e.flexGrow)});function b(e){var n,t=e.minButtonWidth,r=e.buttonPadding,i=e.buttonHeight,a=e.disabled,s=e.buttonGrow,c=e.onChange,d=e.selected,p=e.filters,v=e.multiSelect,b=l()(e,g),C=u.useCallback(function(e){if(!0===v){var n=d.indexOf(e);n>=0?c([].concat(o()(d.slice(0,n)),o()(d.slice(n+1)))):c([].concat(o()(d),[e]))}else d!==e&&c(e)},[d,v,c]),P=u.useCallback(function(e){return!0===v?d.includes(e):d===e},[d]),O=null!==(n=e.getLabel)&&void 0!==n?n:function(e){return e};return(0,f.jsx)(j,h(h({px:1,py:1,gap:"8px"},b),{},{children:p.map(function(e){return(0,f.jsx)(x,{flexGrow:s,children:(0,f.jsx)(y,{onClick:function(){return C(e)},"data-selected":P(e),minWidth:t,disabled:a,height:i||"34px",padding:r||"4px 14px",children:(0,f.jsx)(m.Dr,{whiteSpace:"nowrap",children:O(e)})})},e)})}))}var j=(0,c.ZP)(d.kC).withConfig({displayName:"StyledFilters___StyledFlex",componentId:"sc-1nju9x9-2"})({overflowX:"auto"});b.__docgenInfo={description:"A controlled component to display a list of filters.",methods:[],displayName:"StyledFilters",props:{filters:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},getLabel:{required:!1,tsType:{name:"signature",type:"function",raw:"(filter: string) => string",signature:{arguments:[{name:"filter",type:{name:"string"}}],return:{name:"string"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},buttonGrow:{required:!1,tsType:{name:"FlexGrowProps['flexGrow']",raw:"FlexGrowProps['flexGrow']"},description:""},minButtonWidth:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},buttonHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},buttonPadding:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},flexWrap:{required:!1,tsType:{name:"FlexWrapProps['flexWrap']",raw:"FlexWrapProps['flexWrap']"},description:""}}}},29657:function(e,n,t){var r=t(930),i=t.n(r),a=t(59854),o=t.n(a),s=t(74691),l=t.n(s),u=t(3323),c=t.n(u);t(67294);var d=t(1257),p=t(85893),m=["value","onChange","onBlur"];function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var v=function(e){var n=e.value,t=e.onChange,r=e.onBlur,i=void 0===r?null:r,a=c()(e,m);return(0,p.jsx)(d.Z,g(g({append:"%",type:"number",min:"0",max:"100",appendProps:{color:"black.600"},fontWeight:"normal",maxWidth:100,step:"0.01"},a),{},{value:isNaN(n)?"":n,onChange:function(e){return t(parseFloat(e.target.value))},onWheel:function(e){e.preventDefault(),e.target.blur()},onBlur:function(e){var r=l()(o()(parseFloat(e.target.value),2),0,100);t(isNaN(r)?n:r),i&&i(e)}}))};v.__docgenInfo={description:"",methods:[],displayName:"StyledInputPercentage",props:{onBlur:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1},onChange:{description:"",type:{name:"func"},required:!0},value:{description:"",type:{name:"number"},required:!1}}},n.Z=v},79621:function(e,n,t){t.d(n,{E:function(){return k}});var r=t(930),i=t.n(r),a=t(7980),o=t.n(a),s=t(45578),l=t.n(s),u=t(85696),c=t.n(u),d=t(3323),p=t.n(d),m=t(67294),f=t(33007),g=t(74684),v=t(89478),h=t(73935),y=t(91850),x=t(86896),b=t(81385),j=t(63351),C=t(74688),P=t(52015),O=t(45369),A=t(93044),w=t(63551),S=t(2734),T=t(60659),I=t(85893),M=["suggestedTags","value","onChange","renderUpdatedTags","defaultValue","disabled"];function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Z=(0,P.ZP)(v.c).withConfig({displayName:"StyledInputTags__TagIcon",componentId:"sc-3xnaz6-0"})(["margin-right:4px;"]),k=(0,P.ZP)(T.Z).attrs({variant:"rounded-right",tabIndex:0}).withConfig({displayName:"StyledInputTags__EditTag",componentId:"sc-3xnaz6-1"})(["border:1px dashed;cursor:pointer;position:relative;padding:2px 10px 2px 6px;background-color:",";border-color:",";color:",";margin-right:4px;margin-bottom:4px;&:not([disabled]){&:hover,&:focus{background-color:",";border-color:",";svg{color:",";}}}&:focus{outline:0;}&[disabled]{cursor:not-allowed;background:#f0f1f2;}",""],function(e){return e.theme.colors.white.full},function(e){return e.theme.colors.black[200]},function(e){return e.theme.colors.black[700]},function(e){return e.theme.colors.white.full},function(e){return e.theme.colors.blue[500]},function(e){return e.theme.colors.blue[500]},function(e){return e.active&&(0,P.iv)(["background-color:",";border-color:",";svg{color:",";}color:",";"],function(e){return e.theme.colors.blue[50]},function(e){return e.theme.colors.blue[600]},function(e){return e.theme.colors.blue[600]},function(e){return e.theme.colors.black[900]})}),R=P.ZP.input.withConfig({displayName:"StyledInputTags__Input",componentId:"sc-3xnaz6-2"})(["font-size:12px;line-height:18px;border:0;margin-left:10px;outline:none;width:auto;::placeholder{color:",";}"],function(e){return e.theme.colors.black[400]}),D=(0,P.ZP)(w.xu).withConfig({displayName:"StyledInputTags__InputWrapper",componentId:"sc-3xnaz6-3"})(["position:sticky;top:0;z-index:9;padding:12px 16px;background-color:inherit;:not(:only-child){border-bottom:1px solid ",";}"],function(e){return e.theme.colors.black[300]}),F=(0,P.ZP)(w.kC).withConfig({displayName:"StyledInputTags__TagWrapper",componentId:"sc-3xnaz6-4"})(["align-items:center;justify-content:space-between;:not(:first-child){border-top:1px solid ",";}"],function(e){return e.theme.colors.black[300]}),q=P.ZP.button.withConfig({displayName:"StyledInputTags__TagActionButton",componentId:"sc-3xnaz6-5"})(["cursor:pointer;text-align:center;background-color:transparent;border:none;padding:5px;line-height:inherit;&:disabled{cursor:not-allowed;}"]),_=(0,P.ZP)(q).withConfig({displayName:"StyledInputTags__AddTagButton",componentId:"sc-3xnaz6-6"})(["&:not([disabled]){color:",";&:hover,&:focus{color:",";}}"],function(e){return e.theme.colors.blue[400]},function(e){return e.theme.colors.blue[600]}),L=(0,P.ZP)(q).withConfig({displayName:"StyledInputTags__DeleteTagButton",componentId:"sc-3xnaz6-7"})(["color:",";&:hover{color:",";}"],function(e){return e.theme.colors.black[400]},function(e){return e.theme.colors.black[600]}),H=(0,y.defineMessages)({placeholder:{id:"StyledInputTags.Placeholder",defaultMessage:[{type:0,value:"Create New Tag"}]},editLabel:{id:"StyledInputTags.EditLabel",defaultMessage:[{type:0,value:"Edit Tags"}]},addLabel:{id:"StyledInputTags.AddLabel",defaultMessage:[{type:0,value:"Add Tags"}]}}),z=function(e){return e&&e.length?e.map(function(e){return{label:e,value:e}}):[]},U=function(e){var n,t=e.suggestedTags,r=e.value,i=e.onChange,a=e.renderUpdatedTags,s=e.defaultValue,u=e.disabled,d=p()(e,M),v=(0,x.Z)().formatMessage,y=m.useRef(),P=m.useRef(),E=m.useRef(),q=m.useRef(),U=m.useState(!1),B=c()(U,2),V=B[0],W=B[1],$=m.useState(z(r||s)),G=c()($,2),Y=G[0],K=G[1],X=m.useState(""),Q=c()(X,2),J=Q[0],ee=Q[1],en=null==t?void 0:t.filter(function(e){return!Y.some(function(n){return n.value===e})}),et=m.useCallback(function(){V&&W(!1)},[V]),er=function(e){var n=l()([].concat(o()(Y),[{label:e.toLowerCase(),value:e.toLowerCase()}]),"value");K(n),i(n)},ei=function(){V?et():(W(!0),setTimeout(function(){var e;return null==y?void 0:null===(e=y.current)||void 0===e?void 0:e.focus()},50))},ea=function(e,n){var t=Y.filter(function(n){return n.value!==e});K(t),n&&i(t)};return(0,O.Z)(E,function(e){e&&(E.current=null)}),(0,O.Z)(P,function(e){e&&!E.current&&et()}),(0,A.ZP)({callback:et,keyMatch:A.O_}),(0,I.jsx)(b.dK,{children:(0,I.jsxs)(w.kC,{ref:P,flexWrap:"wrap",children:[null===(n=a?Y:z(r))||void 0===n?void 0:n.map(function(e){return(0,I.jsx)(T.Z,{variant:"rounded-right",mr:"4px",mb:"4px",color:u?"black.500":"black.700",closeButtonProps:{onClick:function(){return ea(e.value,!0)},disabled:u},children:e.label},e.value)}),(0,I.jsx)(j.s,{children:function(e){var n=e.ref;return(0,I.jsx)(w.kC,{ref:n,children:(0,I.jsxs)(k,{active:V,onClick:ei,disabled:u,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),ei())},children:[(0,I.jsx)(Z,{size:"14px"})," ",(null==Y?void 0:Y.length)>0?v(H.editLabel):v(H.addLabel)]})})}}),V&&(0,h.createPortal)((0,I.jsx)(C.r,{placement:"bottom",children:function(e){var n=e.placement,r=e.ref,i=e.style;return(0,I.jsx)("div",{"data-placement":n,ref:function(e){r(e),E.current=e},style:N(N({},i),{},{zIndex:9999}),children:(0,I.jsxs)(S.Z,N(N({m:1,overflow:"auto",overflowY:"auto"},d),{},{ref:q,boxShadow:"0px 4px 10px #C4C7CC",children:[(0,I.jsxs)(D,{color:"black.400",children:[(0,I.jsx)(Z,{size:"16px"}),(0,I.jsx)(R,{disabled:u,placeholder:v(H.placeholder),ref:y,value:J,onChange:function(e){return ee(e.target.value)},onBlur:function(){null!=en&&en.length||et()},onKeyPress:function(e){if("Enter"===e.key){e.preventDefault();var n=e.target.value.trim();n&&(er(n),ee(""),a||requestAnimationFrame(function(){var e;return null===(e=q.current)||void 0===e?void 0:e.scrollTo(0,Number.MAX_SAFE_INTEGER)},30))}}})]}),((null==t?void 0:t.length)||(null==Y?void 0:Y.length))>0&&(0,I.jsxs)(w.xu,{flexGrow:"1",children:[null!=en&&en.length?en.map(function(e){return(0,I.jsxs)(F,{px:"16px",py:"8px",backgroundColor:"blue.50",children:[(0,I.jsx)(T.Z,{type:"info",variant:"rounded-right",children:e}),(0,I.jsx)(_,{disabled:u,onClick:function(){er(e),setTimeout(function(){var e;return null==y?void 0:null===(e=y.current)||void 0===e?void 0:e.focus()},50)},onBlur:function(){e===t[t.length-1]&&ei()},children:(0,I.jsx)(f.v,{size:"10px"})})]},e)}):null,!a&&Y.map(function(e){return(0,I.jsxs)(F,{px:"16px",py:"8px",autoFocus:!0,children:[(0,I.jsx)(T.Z,{variant:"rounded-right",children:e.label}),(0,I.jsx)(L,{disabled:u,onClick:function(){ea(e.value)},children:(0,I.jsx)(g.u,{size:"10px"})})]},e.value)})]})]}))})}}),document.body)]})})};U.defaultProps={maxHeight:["50vh",null,"30vh"],minWidth:"240px",renderUpdatedTags:!0},U.__docgenInfo={description:"",methods:[],displayName:"StyledInputTags",props:{maxHeight:{defaultValue:{value:"['50vh', null, '30vh']",computed:!1},required:!1},minWidth:{defaultValue:{value:"'240px'",computed:!1},required:!1},renderUpdatedTags:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},suggestedTags:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},defaultValue:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},value:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},disabled:{description:"",type:{name:"bool"},required:!1},onChange:{description:"",type:{name:"func"},required:!1}},composes:["./StyledCard"]},n.Z=m.memo(U)},53998:function(e,n,t){t.d(n,{Kz:function(){return x},NS:function(){return y},Vy:function(){return j},v6:function(){return b}});var r=t(930),i=t.n(r),a=t(70735),o=t.n(a),s=t(67294),l=t(79648),u=t(52015),c=t(16678),d=t(63551),p=t(90374),m=t(61936),f=t(85893);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var h=(0,u.ZP)(m.Dr).attrs({truncateOverflow:!0,pl:2,maxWidth:["calc(100vw - 135px)","75px","175px","200px"]}).withConfig({displayName:"StyledSelectFilter__TruncatedItemsList",componentId:"sc-b7jnhg-0"})(["display:inline-block;max-width:75px;",""],c.kk),y=function(e){return function(n){var t=n.selectProps,r=n.children,i=(t.value||[]).map(function(e){return e.label}).join(", "),a=0===o()(t.options,t.value,"value").length;return(0,f.jsx)(l.c.SelectContainer,v(v({height:"1em"},n),{},{children:(0,f.jsxs)(d.kC,{children:[(0,f.jsx)(h,{title:i,children:a?e:i}),r]})}))}},x=function(e){var n=e.selectProps,t=e.children,r=(n.value||[]).map(function(e){return e.label}).join(", ");return(0,f.jsx)(l.c.SelectContainer,v(v({height:"1em"},e),{},{children:(0,f.jsxs)(d.kC,{children:[(0,f.jsx)(h,{title:r,children:r}),t]})}))},b=function(e){return v(v({},e||null),{},{control:function(n,t){var r=v(v(v({},n),{},{background:"#F7F8FA",borderRadius:100,padding:"0 8px",fontWeight:500,borderColor:"#E8E9EB"},(null==e?void 0:e.control)||null),{},{"&:hover":{borderColor:"#C4C7CC"}});return t.isFocused&&(r.background="white",r.boxShadow="0 0 0 2px black"),r}})},j=function(e){var n=s.useMemo(function(){return b(e.styles)},[e.styles]);return(0,f.jsx)(p.ZP,v(v({minWidth:80,fontSize:"12px",lineHeight:"14px",isSearchable:!1},e),{},{styles:n}))};x.__docgenInfo={description:"",methods:[],displayName:"TruncatedValueContainer",props:{selectProps:{description:"",type:{name:"object"},required:!1},children:{description:"",type:{name:"node"},required:!1}}},j.__docgenInfo={description:"A superset of `StyledSelect` with custom styles, to use for selects that contains\nfilters for lists.",methods:[],displayName:"StyledSelectFilter"}},2636:function(e,n,t){var r,i=t(930),a=t.n(i),o=t(49376),s=t.n(o),l=t(85696),u=t.n(l),c=t(92358),d=t.n(c),p=t(87794),m=t.n(p),f=t(67294),g=t(50319),v=t(86896),h=t(91850),y=t(44012),x=t(52015),b=t(32324),j=t(59644),C=t(23689),P=t(20073),O=t(63551),A=t(79621),w=t(60659),S=t(85893);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach(function(n){a()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var M=(0,j.Ps)(r||(r=d()(["\n  mutation SetTags($order: OrderReferenceInput, $expense: ExpenseReferenceInput, $tags: [String!]!) {\n    setTags(expense: $expense, order: $order, tags: $tags) {\n      order {\n        id\n        tags\n      }\n      expense {\n        id\n        tags\n      }\n    }\n  }\n"]))),E=function(e){var n,t=e.expense,r=e.order,i=e.suggestedTags,a=(0,g.D)(M,{context:j.Tn}),o=u()(a,2),l=o[0],c=o[1].loading,d=(null==t?void 0:t.tags)||(null==r?void 0:r.tags),p=(0,P.pm)().toast,f=(0,v.Z)();return(0,S.jsx)(A.Z,{disabled:c,value:d,suggestedTags:i,onChange:(n=s()(m().mark(function e(n){var i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t?{expense:{id:t.id}}:{order:{id:r.id}},e.next=4,l({variables:I(I({},i),{},{tags:n.map(function(e){return e.value})})});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),p({variant:"error",message:(0,b.t2)(f,e.t0)});case 9:case"end":return e.stop()}},e,null,[[0,6]])})),function(e){return n.apply(this,arguments)})})},N=(0,x.ZP)(w.Z).attrs({mb:"4px",mr:"4px",variant:"rounded-right"}).withConfig({displayName:"Tags__Tag",componentId:"sc-uszanm-0"})([""]),Z=function(e){var n=e.expense,t=e.order,r=e.isLoading,i=e.limit,a=e.getTagProps,o=e.children,s=e.canEdit,l=e.suggestedTags,u=e.showUntagged,c=(0,v.Z)(),d=(null==n?void 0:n.tags)||(null==t?void 0:t.tags),p=function(e){var n=e.tag,t=e.label,r=(null==a?void 0:a(n))||{},i=(0,S.jsx)(N,I(I({},r),{},{children:null!=t?t:n}),n);return o?o({key:n,tag:n,renderedTag:i,props:r}):i};return(0,S.jsxs)(O.kC,{flexWrap:"wrap",alignItems:"flex-start",children:[(null==n?void 0:n.type)&&(0,S.jsx)(C.Z,{type:n.type,legacyId:n.legacyId,isLoading:r}),s?(0,S.jsx)(E,{expense:n,order:t,suggestedTags:l}):d&&(0,S.jsxs)(f.Fragment,{children:[d.slice(0,i).map(function(e){return p({tag:e})}),u&&p({tag:"untagged",label:c.formatMessage((0,h.defineMessage)({id:"8/OT+O",defaultMessage:[{type:0,value:"Untagged"}]}))}),d.length>i&&(0,S.jsx)(N,{color:"black.600",title:d.slice(i).join(", "),children:(0,S.jsx)(y.Z,{id:"expenses.countMore",defaultMessage:[{type:0,value:"+ "},{type:1,value:"count"},{type:0,value:" more"}],values:{count:d.length-i}})})]})]})};Z.defaultProps={limit:4},Z.__docgenInfo={description:"",methods:[],displayName:"Tags",props:{limit:{defaultValue:{value:"4",computed:!1},description:"Max number of tags to display",type:{name:"number"},required:!1},isLoading:{description:"",type:{name:"bool"},required:!1},children:{description:"A render func that gets passed the tag",type:{name:"func"},required:!1},getTagProps:{description:"A function to build the tag props dynamically",type:{name:"func"},required:!1},canEdit:{description:"Whether current user can edit the tags",type:{name:"bool"},required:!1},suggestedTags:{description:"If canEdit is true, this array is used to display suggested tags",type:{name:"arrayOf",value:{name:"string"}},required:!1},expense:{description:"",type:{name:"shape",value:{id:{name:"string",required:!1},status:{name:"string",required:!1},tags:{name:"arrayOf",value:{name:"string"},required:!1},legacyId:{name:"number",required:!1},type:{name:"string",required:!1}}},required:!1},order:{description:"",type:{name:"shape",value:{id:{name:"string",required:!1},status:{name:"string",required:!1},tags:{name:"arrayOf",value:{name:"string"},required:!1},legacyId:{name:"number",required:!1},type:{name:"string",required:!1}}},required:!1},showUntagged:{description:'Whether to show an "Untagged" tag (when used for filtering)',type:{name:"bool"},required:!1}}},n.Z=Z},31811:function(e,n,t){var r=t(52015);t(67294);var i=t(61936),a=t(85893),o=function(e){var n=e.isCredit;return(0,a.jsx)(s,{color:n?"green.700":"red.700",mr:2,children:n?"+":"-"})};o.__docgenInfo={description:"",methods:[],displayName:"TransactionSign",props:{isCredit:{description:"",type:{name:"bool"},required:!1}}},n.Z=o;var s=(0,r.ZP)(i.Dr).withConfig({displayName:"TransactionSign___StyledSpan",componentId:"sc-1nw2zky-0"})({verticalAlign:"text-bottom"})},60240:function(e,n,t){t.d(n,{l:function(){return j}});var r=t(930),i=t.n(r),a=t(3323),o=t.n(a);t(67294);var s=t(44012),l=t(7706),u=t(13412),c=t(63551),d=t(88944),p=t(48900),m=t(62612),f=t(2734),g=t(32222),v=t(61936),h=t(85893),y=["borderWidth","noTitle"];function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var j=function(e){var n=e.borderWidth,t=e.noTitle,r=o()(e,y),i=(0,l.Z)().LoggedInUser;return(0,h.jsx)(c.kC,b(b({justifyContent:"center",alignItems:"flex-start"},r),{},{children:(0,h.jsxs)(f.Z,{width:"100%",maxWidth:496,py:"16px",textAlign:"center",borderWidth:void 0===n?"1px":n,children:[!(void 0!==t&&t)&&(0,h.jsx)(v.cK,{fontSize:"28px",lineHeight:"36px",children:(0,h.jsx)(s.Z,{id:"ScX/93",defaultMessage:[{type:0,value:"2FA Required"}]})}),(0,h.jsx)(g.Z,{my:"21px",borderColor:"black.200"}),(0,h.jsxs)(c.kC,{my:"41px",px:"36px",alignItems:"center",children:[(0,h.jsx)(c.xu,{flex:"1 0 164px",children:(0,h.jsx)(d.Z,{src:"/static/images/lock-illustration.png",alt:"",width:164,height:164})}),(0,h.jsx)(v.P,{textAlign:"left",fontSize:"20px",lineHeight:"28px",fontWeight:"500",color:"black.700",children:(0,h.jsx)(s.Z,{id:"UoQDcG",defaultMessage:[{type:0,value:"Your organization requires you to have two-factor authentication activated to continue"}]})})]}),(0,h.jsx)(g.Z,{my:"16px",borderColor:"black.400"}),i&&(0,h.jsx)(c.kC,{justifyContent:"center",children:(0,h.jsx)(p.Z,{href:(0,u.aT)(i.collective,"user-security#two-factor-auth"),children:(0,h.jsx)(m.Z,{buttonStyle:"primary",children:(0,h.jsx)(s.Z,{id:"st/dW2",defaultMessage:[{type:0,value:"Activate 2FA"}]})})})})]})}))};j.__docgenInfo={description:"",methods:[],displayName:"TwoFactorAuthRequiredMessage",props:{borderWidth:{defaultValue:{value:"'1px'",computed:!1},required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},noTitle:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}}},84789:function(e,n,t){var r=t(930),i=t.n(r),a=t(6162),o=t.n(a),s=t(3323),l=t.n(s),u=t(67294),c=t(71387),d=t(89441),p=t(44012),m=t(52015),f=t(17113),g=t(13412),v=t(88318),h=t(51506),y=t(48900),x=t(98936),b=t(8899),j=t(29126),C=t(14876),P=t(61936),O=t(85893),A=["isPrivate","isLoading","isDownloading","url","size","maxHeight","alt","fileName","fileSize","showFileName","border","openFileViewer"];function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}(0,m.ZP)(j.Z).withConfig({displayName:"UploadedFilePreview__ImageLink",componentId:"sc-21shv-0"})(["cursor:pointer;overflow:hidden;display:block;width:100%;height:100%;text-align:center;"]).defaultProps={openInNewTab:!0};var T=(0,m.ZP)(d.a).withConfig({displayName:"UploadedFilePreview__FileTextIcon",componentId:"sc-21shv-1"})(["opacity:1;"]),I=(0,m.ZP)(c.U).withConfig({displayName:"UploadedFilePreview__DownloadIcon",componentId:"sc-21shv-2"})(["position:absolute;opacity:0;"]),M=(0,m.ZP)(h.Z).withConfig({displayName:"UploadedFilePreview__CardContainer",componentId:"sc-21shv-3"})(["position:relative;border-radius:8px;padding:4px;display:flex;justify-content:center;align-items:center;font-size:12px;max-width:100%;background:white;svg{transition:opacity 0.3s;}img{width:100%;max-height:100%;max-width:100%;border-radius:8px;@media (max-width:40em){object-fit:cover;}}"]),E=(0,m.ZP)(h.Z).withConfig({displayName:"UploadedFilePreview__MainContainer",componentId:"sc-21shv-4"})(["text-align:center;cursor:pointer;&:hover ","{","{opacity:0.25;}","{opacity:1;animation:"," 0.3s;}}"],M,T,I,b.d7),N=(0,m.ZP)(P.P).withConfig({displayName:"UploadedFilePreview__FileName",componentId:"sc-21shv-5"})(["overflow:hidden;text-overflow:ellipsis;"]),Z=function(e){var n=e.isPrivate,t=void 0!==n&&n,r=e.isLoading,i=void 0!==r&&r,a=e.isDownloading,s=e.url,c=e.size,m=void 0===c?88:c,b=e.maxHeight,w=e.alt,Z=e.fileName,k=void 0===Z?void 0:Z,R=e.fileSize,D=void 0===R?void 0:R,F=e.showFileName,q=e.border,_=e.openFileViewer,L=void 0===_?void 0:_,H=l()(e,A),z=null,U=["csv","txt"].includes((0,g.XO)(s));if(i)z=(0,O.jsx)(x.Z,{borderRadius:8});else if(void 0!==a&&a)z=(0,O.jsx)(C.Z,{size:"50%"});else if(t)z=(0,O.jsx)(v.Z,{size:"60%",className:"mx-auto text-slate-200",children:(0,O.jsx)(p.Z,{id:"Attachment.Private",defaultMessage:[{type:0,value:"This attachment is private"}]})});else if(!s&&H.onClick)z=(0,O.jsxs)(u.Fragment,{children:[(0,O.jsx)(T,{color:"#dcdee0",size:"60%"}),(0,O.jsx)(I,{color:"#b3b3b3",size:"30%"})]});else if(s){if(U)z=(0,O.jsx)(T,{color:"#dcdee0",size:"60%"});else{var B=Array.isArray(m)?o()(m):m;z=(0,O.jsx)("img",{src:(0,f.Z_)(s,null,{width:B}),alt:(void 0===w?"Uploaded file preview":w)||k})}}else z=(0,O.jsx)(d.a,{color:"#dcdee0",size:"60%"});return(0,O.jsxs)(E,S(S(S({color:"black.700"},H),{},{maxWidth:m},t?{as:"div"}:U||!L?{href:s,openInNewTab:!0,as:s.startsWith("/")?y.Z:j.Z}:{as:"div",onClick:function(e){e.stopPropagation(),L(s)}}),{},{children:[(0,O.jsx)(M,{size:m,maxHeight:void 0===b?void 0:b,title:k,border:void 0===q?"1px solid #dcdee0":q,children:z}),(void 0===F?void 0:F)&&(0,O.jsxs)(h.Z,{mt:"4px",maxWidth:m||100,textAlign:"left",px:1,children:[i?(0,O.jsx)(x.Z,{height:12}):k?(0,O.jsx)(N,{fontSize:"13px",fontWeight:"700",children:k}):(0,O.jsx)(P.P,{fontStyle:"italic",fontSize:"13px",children:(0,O.jsx)(p.Z,{id:"File.NoFilename",defaultMessage:[{type:0,value:"No filename"}]})}),D&&(0,O.jsx)(P.P,{mt:"2px",fontSize:"11px",lineHeight:"16px",color:"black.600",fontWeight:"400",children:D<1024?"".concat(D," bytes"):D<1048576?"".concat((D/1024).toFixed(2)," KB"):D<1073741824?"".concat((D/1048576).toFixed(2)," MB"):"".concat((D/1073741824).toFixed(2)," GB")})]})]}))};Z.__docgenInfo={description:"To display the preview of a file uploaded on Open Collective.\nSupports images and PDFs.",methods:[],displayName:"UploadedFilePreview",props:{isPrivate:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isLoading:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isDownloading:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},size:{defaultValue:{value:"88",computed:!1},description:"",type:{name:"union",value:[{name:"string"},{name:"number"},{name:"array"}]},required:!1},maxHeight:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"union",value:[{name:"string"},{name:"number"},{name:"array"}]},required:!1},alt:{defaultValue:{value:"'Uploaded file preview'",computed:!1},description:"",type:{name:"string"},required:!1},fileName:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"string"},required:!1},fileSize:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"number"},required:!1},showFileName:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"bool"},required:!1},border:{defaultValue:{value:"'1px solid #dcdee0'",computed:!1},description:"",type:{name:"string"},required:!1},openFileViewer:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"func"},required:!1},url:{description:"",type:{name:"string"},required:!1},onClick:{description:"",type:{name:"func"},required:!1}}},n.Z=Z},19314:function(e,n,t){t.d(n,{XG:function(){return h},cw:function(){return v}});var r=t(930),i=t.n(r),a=t(3323),o=t.n(a);t(67294);var s=t(52015),l=t(8899),u=t(85893),c=["children"],d=["children"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var f=s.ZP.div.withConfig({displayName:"DebitCreditList__DebitCreditItem",componentId:"sc-sddud4-0"})(["position:relative;animation:"," 0.15s;"],l.Ji);s.ZP.div.withConfig({displayName:"DebitCreditList",componentId:"sc-sddud4-1"})(["border:1px solid #e6e8eb;border-radius:8px 8px 0 0;& > ",":not(:last-child){border-bottom:1px solid #e6e8eb;}"],f);var g=s.ZP.div.withConfig({displayName:"DebitCreditList__DebitCreditGradient",componentId:"sc-sddud4-2"})(["position:absolute;right:-1px;height:70%;width:2px;margin:14px 0;",""],function(e){return e.isCredit?(0,s.iv)(["background:linear-gradient( 180deg,#00af2f 0%,rgba(106,255,146,0.354167) 53.65%,rgba(255,255,255,0) 100% );"]):(0,s.iv)(["background:linear-gradient(180deg,rgba(255,255,255,0) 0%,#ffd4df 55.73%,#ff0044 100%);"])}),v=function(e){var n=e.children,t=o()(e,c);return(0,u.jsxs)(f,m(m({},t),{},{children:[(0,u.jsx)(g,{isCredit:!1}),n]}))},h=function(e){var n=e.children,t=o()(e,d);return(0,u.jsxs)(f,m(m({},t),{},{children:[(0,u.jsx)(g,{isCredit:!0}),n]}))};v.__docgenInfo={description:"Displays a debit entry in the list",methods:[],displayName:"DebitItem",props:{children:{description:"",type:{name:"node"},required:!1}}},h.__docgenInfo={description:"Displays a credit entry in the list",methods:[],displayName:"CreditItem",props:{children:{description:"",type:{name:"node"},required:!1}}}},96677:function(e,n,t){t.d(n,{Z:function(){return eP}});var r=t(64721),i=t.n(r),a=t(27361),o=t.n(a),s=t(930),l=t.n(s),u=t(85696),c=t.n(u),d=t(67294),p=t(77552),m=t(31721),f=t(86896),g=t(44012),v=t(52015),h=t(16678),y=t(12494),x=t(12711),b=t(71698),j=t(7706);t(56678);var C=t(12316),P=t(13412),O=t(94069),A=t(94083),w=t(51282),S=t(75971),T=t(51617),I=t(51506),M=t(67334),E=t(24962),N=t(3323),Z=t.n(N),k=t(26955),R=t(73935),D=t(81385),F=t(63351),q=t(74688),_=t(45369),L=t(93044),H=t(11831),z=t(63551),U=t(62612),B=t(14876),V=t(60659),W=t(13024),$=t(90068),G=t(52262),Y=t(85893),K=["expense","host","collective"];function X(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?X(Object(t),!0).forEach(function(n){l()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var J=(0,v.ZP)(V.Z).withConfig({displayName:"AdminExpenseStatusTag__ExpenseStatusTag",componentId:"sc-16jxaf8-0"})(["cursor:pointer;font-weight:bold;font-size:12px;line-height:16px;letter-spacing:0.06em;text-transform:uppercase;"]),ee=(0,v.ZP)("div").withConfig({displayName:"AdminExpenseStatusTag__PopupContainer",componentId:"sc-16jxaf8-1"})(["z-index:2;border-radius:5px;font-size:12px;text-transform:initial;white-space:normal;min-width:200px;background:#ffffff;box-shadow:0px 4px 8px rgba(20,20,20,0.16);svg{display:none;}","{display:block;margin:auto;}"],B.Z),en=(0,v.ZP)("div").withConfig({displayName:"AdminExpenseStatusTag__Arrow",componentId:"sc-16jxaf8-2"})(["position:absolute;font-size:8px;width:3em;height:3em;top:0;left:0;margin-top:-0.9em;&::before{content:'';margin:auto;display:block;border-style:solid;border-width:0 1.5em 1em 1.5em;border-color:transparent transparent #ffffff transparent;filter:drop-shadow(0px -3px 3px rgba(20,20,20,0.1));}"]),et=(0,v.ZP)(k._).withConfig({displayName:"AdminExpenseStatusTag__ChevronDownIcon",componentId:"sc-16jxaf8-3"})(["width:15px;height:15px;cursor:pointer;color:inherit;"]),er=function(e){var n=e.expense,t=e.host,r=e.collective,i=Z()(e,K),a=(0,f.Z)(),o=d.useRef(),s=d.useState(!1),l=c()(s,2),u=l[0],p=l[1],m=d.useState(!0),v=c()(m,2),h=v[0],y=v[1],x=d.useState(!1),j=c()(x,2),C=j[0],P=j[1],O=(null==n?void 0:n.status)===b.g26.APPROVED,A={px:2,py:2,isBorderless:!0,width:"100%",textAlign:"left"},w=n.onHold?"ON_HOLD":n.status,S=function(){p(!0)};return(0,_.Z)(o,function(e){e&&h&&u&&!document.getElementById("mark-expense-as-unpaid-modal")&&p(!1)}),(0,L.ZP)({callback:function(){h&&p(!1)},keyMatch:L.O_}),(0,Y.jsxs)(d.Fragment,{children:[(0,Y.jsxs)(D.dK,{children:[(0,Y.jsx)(F.s,{children:function(e){var n=e.ref;return(0,Y.jsx)(z.xu,{ref:n,onClick:S,children:(0,Y.jsx)(J,Q(Q({type:(0,$.X)(w)},i),{},{children:(0,Y.jsxs)(z.kC,{children:[(0,H.zr)(a,w),(0,Y.jsx)(et,{})]})}))})}}),u&&R.createPortal((0,Y.jsx)(q.r,{placement:"bottom",children:function(e){var i,a,s,l=e.ref,u=e.style,c=e.arrowProps;return(0,Y.jsxs)(ee,{ref:l,style:u,onMouseEnter:S,children:[(0,Y.jsxs)(z.kC,{alignItems:"center",ref:o,flexDirection:"column",p:2,children:[!O&&(0,Y.jsx)(G.ZP,{host:t,buttonProps:A,collective:r,expense:n,permissions:n.permissions,onModalToggle:function(e){return y(!e)},onSuccess:function(){return p(!1)},displaySecurityChecks:!1}),(null==n?void 0:null===(i=n.permissions)||void 0===i?void 0:i.canMarkAsIncomplete)&&(0,Y.jsx)(U.Z,Q(Q({},A),{},{onClick:function(){P("MARK_AS_INCOMPLETE")},children:(0,Y.jsx)(G.aN,{children:(0,Y.jsx)(g.Z,{id:"actions.markAsIncomplete",defaultMessage:[{type:0,value:"Mark as Incomplete"}]})})})),(null===(a=n.permissions)||void 0===a?void 0:a.canHold)&&(0,Y.jsx)(U.Z,Q(Q({},A),{},{onClick:function(){P("HOLD")},children:(0,Y.jsx)(G.aN,{children:(0,Y.jsx)(g.Z,{id:"actions.hold",defaultMessage:[{type:0,value:"Put On Hold"}]})})})),(null===(s=n.permissions)||void 0===s?void 0:s.canRelease)&&(0,Y.jsx)(U.Z,Q(Q({},A),{},{onClick:function(){P("RELEASE")},children:(0,Y.jsx)(G.aN,{children:(0,Y.jsx)(g.Z,{id:"actions.release",defaultMessage:[{type:0,value:"Release Hold"}]})})}))]}),(0,Y.jsx)(en,{ref:c.ref,style:c.style})]})}}),document.body)]}),C&&(0,Y.jsx)(W.Z,{type:C,expense:n,onClose:function(){return P(!1)}})]})};er.__docgenInfo={description:"",methods:[],displayName:"AdminExpenseStatusTag",props:{collective:{description:"",type:{name:"object"},required:!0},expense:{description:"",type:{name:"object"},required:!0},host:{description:"",type:{name:"object"},required:!1}}};var ei=t(23689),ea=t(8295),eo=t(44288),es=t(52063),el=t(84992),eu=t(48900),ec=t(34815),ed=t(98936),ep=t(29126),em=t(2636),ef=t(61936),eg=t(31811),ev=t(56762);function eh(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ey(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eh(Object(t),!0).forEach(function(n){l()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eh(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ex=v.ZP.div.withConfig({displayName:"ExpenseBudgetItem__DetailColumnHeader",componentId:"sc-cdpu61-0"})(["font-style:normal;font-weight:bold;font-size:9px;line-height:14px;letter-spacing:0.6px;text-transform:uppercase;color:#c4c7cc;margin-bottom:2px;"]),eb=v.ZP.div.attrs({"data-cy":"expense-actions"}).withConfig({displayName:"ExpenseBudgetItem__ButtonsContainer",componentId:"sc-cdpu61-1"})(["display:flex;flex-wrap:wrap;margin-top:8px;grid-gap:8px;transition:opacity 0.05s;justify-content:flex-end;@media (max-width:40em){justify-content:center;}& > *:last-child{margin-right:0;}"]),ej=v.ZP.div.withConfig({displayName:"ExpenseBudgetItem__ExpenseContainer",componentId:"sc-cdpu61-2"})(["outline:none;display:block;width:100%;border:0;background:white;"," transition:background 0.1s;"," @media (hover:hover){&:not(:hover):not(:focus-within) ","{opacity:0.24;}}"],h.Dh,function(e){return e.useDrawer&&(0,v.iv)(["",""],function(e){return e.selected&&"background: #f8fafc;"})},eb),eC=function(e){var n,t,r,a,s,l,u,v,h=e.isLoading,N=e.host,Z=e.isInverted,k=e.showAmountSign,R=e.expense,D=e.showProcessActions,F=e.view,q=e.suggestedTags,_=e.onProcess,L=e.selected,H=e.expandExpense,B=e.useDrawer,V=(0,f.Z)(),W=(0,j.Z)().LoggedInUser,K=d.useState(!1),X=c()(K,2),Q=X[0],J=X[1],ee=Z?null==R?void 0:R.account:null==R?void 0:R.payee,en="admin"===F,et="submitter"===F,eh=(null==R?void 0:R.type)===y.Z.CHARGE&&(null==R?void 0:null===(n=R.items)||void 0===n?void 0:n.every(function(e){return null===e.url})),eC=d.useMemo(function(){return(0,x.iU)(R,V)},[R]),eP=en?eC.length:0,eO=[b.g26.REJECTED,b.g26.PAID].includes(null==R?void 0:R.status),eA=(eO||(null==R?void 0:R.status)===b.g26.APPROVED)&&((0,G.HF)(R.permissions)||R.permissions.canMarkAsIncomplete),ew=(null==R?void 0:R.amountInAccountCurrency)&&(null===(t=R.amountInAccountCurrency)||void 0===t?void 0:t.currency)!==R.currency,eS=null==W?void 0:W.isAdminOfCollective(N),eT=null==W?void 0:W.isAdminOfCollective(null==R?void 0:R.account);return(0,Y.jsxs)(ej,{px:[3,"24px"],py:3,selected:L,useDrawer:B,children:[(0,Y.jsxs)(z.kC,{justifyContent:"space-between",flexWrap:"wrap",children:[(0,Y.jsxs)(z.kC,{flex:"1",minWidth:"max(50%, 200px)",maxWidth:[null,"70%"],mr:"24px",children:[(0,Y.jsx)(z.xu,{mr:3,children:h?(0,Y.jsx)(ed.Z,{width:40,height:40}):(0,Y.jsx)(A.HI,{account:ee,includeAdminMembership:{accountSlug:null===(r=R.account)||void 0===r?void 0:r.slug,hostSlug:null==N?void 0:N.slug},trigger:(0,Y.jsx)("span",{children:(0,Y.jsx)(T.o,{size:40,account:ee,secondaryAccount:ee.id===R.createdByAccount.id?null:R.createdByAccount})})})}),h?(0,Y.jsx)(ed.Z,{height:60}):(0,Y.jsxs)(z.xu,{children:[(0,Y.jsxs)(ev.u,{children:[(0,Y.jsx)(ev._v,{children:B?(0,Y.jsx)(g.Z,{id:"Expense.SeeDetails",defaultMessage:[{type:0,value:"See expense details"}]}):(0,Y.jsx)(g.Z,{id:"Expense.GoToPage",defaultMessage:[{type:0,value:"Go to expense page"}]})}),(0,Y.jsx)(ev.aJ,{asChild:!0,children:(0,Y.jsx)("span",{children:(0,Y.jsx)(ep.Z,ey(ey({underlineOnHover:!0},B?{as:eu.Z,href:"".concat((0,P.x0)(R.account),"/expenses/").concat(R.legacyId),onClick:H}:{as:eu.Z,href:"".concat((0,P.x0)(R.account),"/expenses/").concat(R.legacyId)}),{},{children:(0,Y.jsx)(S.Z,{value:R.description,maxLength:255,minFontSizeInPx:12,maxFontSizeInPx:16,lengthThreshold:72,mobileRatio:.875,valueFormatter:C.aR,children:function(e){var n=e.value,t=e.fontSize;return(0,Y.jsx)(ef.H3,{fontWeight:"500",lineHeight:"1.5em",textDecoration:"none",color:"black.900",fontSize:t,children:n})}})}))})})]}),(0,O.zp)(W,R,R.account,N)&&(0,Y.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Y.jsx)("span",{className:"text-sm font-normal text-neutral-700",children:(0,Y.jsx)(g.Z,{id:"expense.accountingCategory",defaultMessage:[{type:0,value:"Category"}]})}),(0,Y.jsx)(E.d,{expense:R,host:N,account:R.account,canEdit:o()(R,"permissions.canEditAccountingCategory",!1),allowNone:!eS,showCodeInSelect:eS})]}),(0,Y.jsxs)("div",{className:"mt-1 text-xs text-slate-700",children:[en?(0,Y.jsx)(A.HI,{account:R.account,trigger:(0,Y.jsx)("span",{children:(0,Y.jsx)(ec.Z,{noTitle:!0,className:"text-primary hover:underline",collective:R.account})})}):(0,Y.jsx)(g.Z,{id:"B5z1AU",defaultMessage:[{type:0,value:"from "},{type:1,value:"payee"},{type:0,value:" to "},{type:1,value:"account"}],values:{payee:(0,Y.jsx)(A.HI,{account:R.payee,includeAdminMembership:{accountSlug:null===(a=R.account)||void 0===a?void 0:a.slug,hostSlug:null==N?void 0:N.slug},trigger:(0,Y.jsx)("span",{children:(0,Y.jsx)(ec.Z,{noTitle:!0,className:"text-primary hover:underline",collective:R.payee})})}),account:(0,Y.jsx)(A.HI,{account:R.account,trigger:(0,Y.jsx)("span",{children:(0,Y.jsx)(ec.Z,{noTitle:!0,className:"text-primary hover:underline",collective:R.account})})})}})," • ",(0,Y.jsx)(M.Z,{value:R.createdAt}),en&&(0,Y.jsxs)(d.Fragment,{children:[" • ",(0,Y.jsx)(g.Z,{id:"BalanceAmount",defaultMessage:[{type:0,value:"Balance "},{type:1,value:"balance"}],values:{balance:(0,Y.jsx)(es.Z,{amount:o()(R.account,"stats.balanceWithBlockedFunds.valueInCents",o()(R.account,"stats.balanceWithBlockedFunds",0)),currency:R.account.currency,amountStyles:{color:"black.700"}})}}),!!(null==R?void 0:null===(s=R.comments)||void 0===s?void 0:s.totalCount)&&(0,Y.jsxs)(d.Fragment,{children:[" • ",null==R?void 0:R.comments.totalCount,"\xa0",(0,Y.jsx)(el.Z,{size:14,color:"#4D4F51"})]})]})]})]})]}),(0,Y.jsxs)(z.kC,{flexDirection:["row","column"],mt:[3,0],flexWrap:"wrap",alignItems:["center","flex-end"],children:[(0,Y.jsx)(z.kC,{my:2,mr:[3,0],flexDirection:"column",minWidth:100,alignItems:"flex-end",children:h?(0,Y.jsx)(ed.Z,{height:19,width:120}):(0,Y.jsxs)(d.Fragment,{children:[(0,Y.jsxs)("div",{children:[k&&(0,Y.jsx)(eg.Z,{isCredit:Z}),(0,Y.jsx)(ef.Dr,{color:"black.700",fontSize:"16px",children:(0,Y.jsx)(es.Z,{amount:R.amount,currency:R.currency,precision:2})})]}),ew&&(0,Y.jsx)(I.Z,{color:"black.600",fontSize:"13px",my:1,children:(0,Y.jsx)(w.Z,{amount:R.amountInAccountCurrency})})]})}),h?(0,Y.jsx)(ed.Z,{height:20,width:140}):(0,Y.jsxs)(z.kC,{children:[(en||et)&&eh&&(0,Y.jsx)(z.xu,{mr:"1px",children:(0,Y.jsxs)(ev.u,{children:[(0,Y.jsx)(ev._v,{children:(0,Y.jsx)(g.Z,{id:"Expense.MissingReceipt",defaultMessage:[{type:0,value:"Expense is missing its Receipt"}]})}),(0,Y.jsx)(ev.aJ,{children:(0,Y.jsx)(p.u,{size:18})})]})}),(en||et)&&(0,Y.jsx)(ei.Z,{type:R.type,legacyId:R.legacyId,mb:0,py:0,mr:"2px",fontSize:"9px"}),eA?(0,Y.jsx)(er,{host:N,collective:R.account,expense:R,p:"3px 8px"}):(0,Y.jsx)($.Z,{status:R.status,fontSize:"12px",fontWeight:"bold",letterSpacing:"0.06em",lineHeight:"16px",p:"3px 8px",showTaxFormTag:i()(R.requiredLegalDocuments,"US_TAX_FORM"),showTaxFormMsg:R.payee.isAdmin})]})]})]}),(0,Y.jsxs)(z.kC,{flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",mt:2,children:[(0,Y.jsx)(z.xu,{mt:2,children:en||et?(0,Y.jsxs)(z.kC,{children:[(0,Y.jsxs)(z.xu,{mr:[3,4],children:[(0,Y.jsx)(ex,{children:(0,Y.jsx)(g.Z,{id:"expense.payoutMethod",defaultMessage:[{type:0,value:"payout method"}]})}),(0,Y.jsx)(z.xu,{mt:"6px",children:(0,Y.jsx)(ea.Z,{isLoading:h,type:null==R?void 0:null===(l=R.payoutMethod)||void 0===l?void 0:l.type,iconSize:"10px",fontSize:"11px",fontWeight:"normal",color:"black.700"})})]}),eP>0&&(0,Y.jsxs)(z.xu,{mr:[3,4],children:[(0,Y.jsx)(ex,{children:(0,Y.jsx)(g.Z,{id:"Expense.Attachments",defaultMessage:[{type:0,value:"Attachments"}]})}),h?(0,Y.jsx)(ed.Z,{height:15,width:90}):(0,Y.jsxs)(U.Z,{color:"black.700",fontSize:"11px",cursor:"pointer",buttonSize:"tiny",onClick:function(){return J(!0)},px:2,ml:-2,isBorderless:!0,children:[(0,Y.jsx)(m.U,{size:10}),"\xa0\xa0",(0,Y.jsx)(g.Z,{id:"ExepenseAttachments.count",defaultMessage:[{type:6,value:"count",options:{one:{value:[{type:7},{type:0,value:" attachment"}]},other:{value:[{type:7},{type:0,value:" attachments"}]}},offset:0,pluralType:"cardinal"}],values:{count:eP}})]})]}),!!(null==R?void 0:null===(u=R.account)||void 0===u?void 0:null===(v=u.hostAgreements)||void 0===v?void 0:v.totalCount)&&(0,Y.jsxs)(z.xu,{mr:[3,4],children:[(0,Y.jsx)(ex,{children:(0,Y.jsx)(g.Z,{id:"kq2gKV",defaultMessage:[{type:0,value:"Host Agreements"}]})}),(0,Y.jsx)(ef.P,{fontSize:"11px",mt:"6px",children:(0,Y.jsx)(ep.Z,{as:eu.Z,color:"black.700",href:"".concat((0,P.Ol)(N,"host-agreements"),"?account=").concat(R.account.slug),children:(0,Y.jsx)(g.Z,{id:"7FgO5b",defaultMessage:[{type:6,value:"count",options:{one:{value:[{type:7},{type:0,value:" agreement"}]},other:{value:[{type:7},{type:0,value:" agreements"}]}},offset:0,pluralType:"cardinal"}],values:{count:R.account.hostAgreements.totalCount}})})})]})]}):(0,Y.jsx)(em.Z,{expense:R,canEdit:o()(R,"permissions.canEditTags",!1),suggestedTags:q})}),D&&(null==R?void 0:R.permissions)&&!eO&&(0,Y.jsx)(eb,{children:(0,Y.jsx)(G.ZP,{host:N,isViewingExpenseInHostContext:eS&&!eT,collective:R.account,expense:R,permissions:R.permissions,buttonProps:ey(ey({},G.oU),{},{mx:1,py:2}),onSuccess:_})})]}),Q&&(0,Y.jsx)(eo.Z,{files:eC,parentTitle:V.formatMessage({id:"At2m8o",defaultMessage:[{type:0,value:"Expense #"},{type:1,value:"expenseId"},{type:0,value:" attachment"}]},{expenseId:R.legacyId}),onClose:function(){return J(!1)}})]})};eC.defaultProps={view:"public"},eC.__docgenInfo={description:"",methods:[],displayName:"ExpenseBudgetItem",props:{view:{defaultValue:{value:"'public'",computed:!1},description:"",type:{name:"enum",value:[{value:"'public'",computed:!1},{value:"'admin'",computed:!1},{value:"'submitter'",computed:!1}]},required:!1},isLoading:{description:"",type:{name:"bool"},required:!1},isInverted:{description:"Set this to true to invert who's displayed (payee or collective)",type:{name:"bool"},required:!1},showAmountSign:{description:"",type:{name:"bool"},required:!1},onDelete:{description:"",type:{name:"func"},required:!1},onProcess:{description:"",type:{name:"func"},required:!1},showProcessActions:{description:"",type:{name:"bool"},required:!1},host:{description:"",type:{name:"object"},required:!1},suggestedTags:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},expense:{description:"",type:{name:"shape",value:{id:{name:"union",value:[{name:"string"},{name:"number"}],required:!0},legacyId:{name:"number",required:!1},comments:{name:"shape",value:{totalCount:{name:"number",required:!1}},required:!1},type:{name:"string",required:!0},description:{name:"string",required:!0},status:{name:"string",required:!0},createdAt:{name:"string",required:!0},tags:{name:"arrayOf",value:{name:"string"},required:!1},amount:{name:"number",required:!0},amountInAccountCurrency:{name:"custom",raw:"AmountPropTypeShape",required:!1},currency:{name:"string",required:!0},permissions:{name:"object",required:!1},accountingCategory:{name:"object",required:!1},items:{name:"arrayOf",value:{name:"object"},required:!1},requiredLegalDocuments:{name:"arrayOf",value:{name:"string"},required:!1},attachedFiles:{name:"arrayOf",value:{name:"object"},required:!1},payee:{name:"shape",value:{id:{name:"union",value:[{name:"string"},{name:"number"}],required:!0},type:{name:"string",required:!0},slug:{name:"string",required:!0},imageUrl:{name:"string",required:!0},isAdmin:{name:"bool",required:!1}},required:!1},payoutMethod:{name:"shape",value:{type:{name:"string",required:!1}},required:!1},createdByAccount:{name:"shape",value:{id:{name:"string",required:!0},type:{name:"string",required:!0},slug:{name:"string",required:!0},name:{name:"string",required:!0}},required:!1},account:{name:"shape",value:{id:{name:"string",required:!0},slug:{name:"string",required:!0},currency:{name:"string",required:!1},hostAgreements:{name:"shape",value:{totalCount:{name:"number",required:!1}},required:!1},stats:{name:"shape",value:{balanceWithBlockedFunds:{name:"union",value:[{name:"number"},{name:"shape",value:{valueInCents:{name:"number",required:!1}}}],required:!1}},required:!1},parent:{name:"shape",value:{id:{name:"string",required:!0}},required:!1}},description:"If available, this `account` will be used to link expense in place of the `collective`",required:!1}}},required:!1},selected:{description:"",type:{name:"bool"},required:!1},expandExpense:{description:"",type:{name:"func"},required:!1},useDrawer:{description:"",type:{name:"bool"},required:!1}}};var eP=eC},68789:function(e,n,t){t.d(n,{i:function(){return nC},Z:function(){return nO}});var r,i=t(82569),a=t.n(i),o=t(35937),s=t.n(o),l=t(85696),u=t.n(l),c=t(930),d=t.n(c),p=t(27361),m=t.n(p),f=t(92358),g=t.n(f),v=t(67294),h=t(37887),y=t(25559),x=t(12530),b=t(66243),j=t(96901),C=t(67705),P=t(35840),O=t(58410),A=t(40242),w=t(58310),S=t(50056),T=t(44012),I=t(86896),M=t(52015),E=t(16678),N=t(29497),Z=t(20706),k=t(26704),R=t(12494),D=t(40239),F=t(12711),q=t(59644),_=t(45369),L=t(7706),H=t(83973),z=t(13412),U=t(45697),B=t.n(U),V=t(62612),W=(0,M.ZP)(V.Z).attrs({buttonSize:"tiny",padding:"7px 16px",borderRadius:"8px"}).withConfig({displayName:"ActionButton",componentId:"sc-tqwhqc-0"})(["font-weight:500;font-size:14px;line-height:16px;white-space:nowrap;text-transform:uppercase;border:none;color:",";&,span{letter-spacing:0.01em;}span{vertical-align:middle;}",""],(0,S.R)("colors.primary.800"),function(e){return e.isSecondary?(0,M.iv)(["&:focus{background:",";}&:hover:not(:active){background:",";box-shadow:0 0 0 2px ",";}&:active{background:",";color:",";box-shadow:none;}"],(0,S.R)("colors.primary.100"),(0,S.R)("colors.primary.100"),(0,S.R)("colors.primary.800"),(0,S.R)("colors.primary.200"),(0,S.R)("colors.primary.800")):(0,M.iv)(["background:",";&:focus{background:",";}&:hover:not(:active){background:",";color:",";}&:active{background:",";color:",";}"],(0,S.R)("colors.primary.100"),(0,S.R)("colors.primary.100"),(0,S.R)("colors.primary.800"),(0,S.R)("colors.white.full"),(0,S.R)("colors.primary.200"),(0,S.R)("colors.primary.800"))});W.propTypes={borderRadius:B().string,isSecondary:B().bool};var $=t(78563),G=t(85893);function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach(function(n){d()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var X=function(e){var n=e.children,t=e.collective,r=v.useState(!1),i=u()(r,2),a=i[0],o=i[1];return(0,G.jsxs)(v.Fragment,{children:[n({onClick:function(){return o(!0)}}),a&&(0,G.jsx)($.Z,{collective:t,onClose:function(){return o(null)}})]})};X.defaultProps={children:function(e){return(0,G.jsx)(V.Z,K(K({},e),{},{children:(0,G.jsx)(T.Z,{id:"menu.addFunds",defaultMessage:[{type:0,value:"Add Funds"}]})}))}},X.__docgenInfo={description:"",methods:[],displayName:"AddFundsBtn",props:{children:{defaultValue:{value:'props => (\n  <StyledButton {...props}>\n    <FormattedMessage id="menu.addFunds" defaultMessage="Add Funds" />\n  </StyledButton>\n)',computed:!1},description:"",type:{name:"func"},required:!1},collective:{description:"",type:{name:"object"},required:!0}}};var Q=t(33227),J=t.n(Q),ee=t(88361),en=t.n(ee),et=t(85971),er=t.n(et),ei=t(52715),ea=t.n(ei),eo=t(91193),es=t.n(eo),el=t(49020),eu=t(11163),ec=t(6537);function ed(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ep(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ed(Object(t),!0).forEach(function(n){d()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ed(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var em=function(e){er()(r,e);var n,t=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=es()(r);if(n){var i=es()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return ea()(this,e)});function r(e){var n;return J()(this,r),(n=t.call(this,e)).state={showModal:!1},n}return en()(r,[{key:"componentDidMount",value:function(){"apply"===this.props.router.query.action&&this.setState({showModal:!0})}},{key:"componentDidUpdate",value:function(e){var n=this.props.router;"apply"!==n.query.action&&"apply"===e.router.query.action&&this.setState({showModal:!1}),"apply"===n.query.action&&"apply"!==e.router.query.action&&this.setState({showModal:!0})}},{key:"renderButton",value:function(){var e=this.props,n=e.buttonRenderer,t=e.withoutIcon,r=e.buttonProps,i=e.minWidth,a=e.hostSlug,o=e.router;return n?n(ep(ep({onClick:function(){return o.push("".concat(a,"/apply"))},"data-cy":"host-apply-btn"},r),{},{children:(0,G.jsxs)(v.Fragment,{children:[!t&&(0,G.jsx)(el.f,{size:"1em"}),!t&&" ",(0,G.jsx)("span",{children:(0,G.jsx)(T.Z,{id:"Apply",defaultMessage:[{type:0,value:"Apply"}]})})]})})):(0,G.jsxs)(V.Z,ep(ep({buttonStyle:"secondary",buttonSize:"small",onClick:function(){return o.push("".concat(a,"/apply"))},minWidth:i},r),{},{children:[!t&&(0,G.jsx)(el.f,{size:"20px",color:"#304CDC"}),(0,G.jsx)(T.Z,{id:"Apply",defaultMessage:[{type:0,value:"Apply"}]})]}))}},{key:"render",value:function(){var e=this.props,n=e.hostSlug,t=e.router,r=e.isHidden;return(0,G.jsxs)(v.Fragment,{children:[this.renderButton(),this.state.showModal&&!r&&(0,G.jsx)(ec.Z,{hostSlug:n,onClose:function(){return t.push(n)}})]})}}]),r}(v.Component);em.__docgenInfo={description:"",methods:[{name:"renderButton",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ApplyToHostBtn",props:{hostSlug:{description:"",type:{name:"string"},required:!0},minWidth:{description:"",type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1},withoutIcon:{description:"",type:{name:"bool"},required:!1},buttonProps:{description:"",type:{name:"object"},required:!1},buttonRenderer:{description:"",type:{name:"func"},required:!1},router:{description:"",type:{name:"object"},required:!1},isHidden:{description:"",type:{name:"bool"},required:!1}}};var ef=(0,eu.withRouter)(em),eg=t(39631),ev=t(27779),eh=t(72867),ey=t(51506),ex=t(63551),eb=t(48900),ej=t(34815),eC=t(98936),eP=t(8899),eO=t(61936),eA=t(34243),ew=t(22733),eS=t(62069),eT=t(20073);function eI(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eM(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eI(Object(t),!0).forEach(function(n){d()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eI(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eE=function(e){var n=e.children,t=e.collective,r=e.host,i=v.useState(!1),a=u()(i,2),o=a[0],s=a[1],l=(0,eT.pm)().toast;return(0,G.jsxs)(v.Fragment,{children:[n({onClick:function(){return s(!0)}}),o&&(0,G.jsx)(eS.Z,{host:r,collective:t,onClose:function(){return s(!1)},onSuccess:function(){l({variant:"success",message:(0,G.jsx)(T.Z,{id:"Host.VirtualCards.AssignCard.Success",defaultMessage:[{type:0,value:"Card successfully assigned"}]})}),s(!1)}})]})};eE.defaultProps={children:function(e){return(0,G.jsx)(V.Z,eM(eM({},e),{},{children:(0,G.jsx)(T.Z,{id:"menu.assignCard",defaultMessage:[{type:0,value:"Assign a Card"}]})}))}},eE.__docgenInfo={description:"",methods:[],displayName:"AssignVirtualCardBtn",props:{children:{defaultValue:{value:'props => (\n  <StyledButton {...props}>\n    <FormattedMessage id="menu.assignCard" defaultMessage="Assign a Card" />\n  </StyledButton>\n)',computed:!1},description:"",type:{name:"func"},required:!1},collective:{description:"",type:{name:"object"},required:!0},host:{description:"",type:{name:"object"},required:!0}}};var eN=t(24180);function eZ(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ek(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eZ(Object(t),!0).forEach(function(n){d()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eZ(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eR=function(e){var n=e.children,t=e.host,r=e.collective,i=v.useState(!1),a=u()(i,2),o=a[0],s=a[1],l=(0,eT.pm)().toast;return(0,G.jsxs)(v.Fragment,{children:[n({onClick:function(){return s(!0)}}),o&&(0,G.jsx)(eN.Z,{host:t,collective:r,onClose:function(){return s(!1)},onSuccess:function(){l({variant:"success",message:(0,G.jsx)(T.Z,{id:"YdC/Ok",defaultMessage:[{type:0,value:"Card successfully created"}]})}),s(!1)}})]})};eR.defaultProps={children:function(e){return(0,G.jsx)(V.Z,ek(ek({},e),{},{children:(0,G.jsx)(T.Z,{id:"xLybrm",defaultMessage:[{type:0,value:"Create a Card"}]})}))}},eR.__docgenInfo={description:"",methods:[],displayName:"CreateVirtualCardBtn",props:{children:{defaultValue:{value:'props => (\n  <StyledButton {...props}>\n    <FormattedMessage defaultMessage="Create a Card" />\n  </StyledButton>\n)',computed:!1},description:"",type:{name:"func"},required:!1},host:{description:"",type:{name:"object"},required:!0},collective:{description:"",type:{name:"object"},required:!0}}};var eD=t(4729),eF=t(38713),eq=t(32222),e_=t(29126),eL=t(91850),eH=t(75801),ez=t(21177),eU=t(85570),eB={SUBMIT_EXPENSE:"hasSubmitExpense",APPLY:"hasApply",CONTACT:"hasContact",ADD_FUNDS:"addFunds",ASSIGN_CARD:"assignCard",CONTRIBUTE:"hasContribute",MANAGE_SUBSCRIPTIONS:"hasManageSubscriptions",REQUEST_GRANT:"hasRequestGrant",SETTINGS:"hasSettings"},eV=(0,eL.defineMessages)({CONTRIBUTE:{id:"SectionContribute.All",defaultMessage:[{type:0,value:"All ways to contribute"}]},TRANSACTIONS:{id:"menu.transactions",defaultMessage:[{type:0,value:"Transactions"}]},EXPENSES:{id:"Expenses",defaultMessage:[{type:0,value:"Expenses"}]},SUBMITTED_EXPENSES:{id:"NpGb+x",defaultMessage:[{type:0,value:"Submitted Expenses"}]},UPDATES:{id:"updates",defaultMessage:[{type:0,value:"Updates"}]},EVENTS:{id:"Events",defaultMessage:[{type:0,value:"Events"}]},PROJECTS:{id:"Projects",defaultMessage:[{type:0,value:"Projects"}]},CONNECTED_COLLECTIVES:{id:"ConnectedCollectives",defaultMessage:[{type:0,value:"Connected Collectives"}]},CONVERSATIONS:{id:"conversations",defaultMessage:[{type:0,value:"Conversations"}]}}),eW=function(e,n,t,r,i){(0,Z.Qg)(r,i)&&n.push({route:"/".concat(t.slug,"#section-").concat(i),title:(0,ez.Z)(e,i),hide:!0})},e$=function(e,n,t,r){var i=[],a=(0,z.x0)(n);return r===eU.t.ABOUT?(eW(e,i,n,t,ev.bx.ABOUT),eW(e,i,n,t,ev.bx.OUR_TEAM),eW(e,i,n,t,ev.bx.GOALS)):r===eU.t.CONTRIBUTE?((0,eH.ZP)(n,eH.h6.RECEIVE_FINANCIAL_CONTRIBUTIONS)&&(0,Z.Qg)(t,ev.bx.CONTRIBUTE)&&i.push({route:"".concat(a,"/contribute"),title:e.formatMessage(eV.CONTRIBUTE)}),(0,eH.ZP)(n,eH.h6.EVENTS)&&(0,Z.Qg)(t,ev.bx.EVENTS)&&i.push({route:"".concat(a,"/events"),title:e.formatMessage(eV.EVENTS)}),(0,eH.ZP)(n,eH.h6.PROJECTS)&&(0,Z.Qg)(t,ev.bx.PROJECTS)&&i.push({route:"".concat(a,"/projects"),title:e.formatMessage(eV.PROJECTS)}),(0,eH.ZP)(n,eH.h6.CONNECTED_ACCOUNTS)&&(0,Z.Qg)(t,ev.bx.CONNECTED_COLLECTIVES)&&i.push({route:"".concat(a,"/connected-collectives"),title:e.formatMessage(eV.CONNECTED_COLLECTIVES)}),(0,Z.Qg)(t,ev.bx.CONTRIBUTORS)&&eW(e,i,n,t,ev.bx.CONTRIBUTORS)):r===eU.t.CONTRIBUTIONS?eW(e,i,n,t,ev.bx.CONTRIBUTIONS):r===eU.t.BUDGET?(i.push({route:"".concat(a,"/transactions"),title:e.formatMessage(eV.TRANSACTIONS)}),(0,N.Sh)(n)&&!n.isHost?i.push({route:"".concat(a,"/submitted-expenses"),title:e.formatMessage(eV.SUBMITTED_EXPENSES)}):i.push({route:"".concat(a,"/expenses"),title:e.formatMessage(eV.EXPENSES)})):r===eU.t.CONNECT&&((0,eH.ZP)(n,eH.h6.UPDATES)&&(0,Z.Qg)(t,ev.bx.UPDATES)&&i.push({route:"".concat(a,"/updates"),title:e.formatMessage(eV.UPDATES)}),(0,eH.ZP)(n,eH.h6.CONVERSATIONS)&&(0,Z.Qg)(t,ev.bx.CONVERSATIONS)&&i.push({route:"".concat(a,"/conversations"),title:e.formatMessage(eV.CONVERSATIONS)})),i},eG=function(e,n,t){var r=[];return t.forEach(function(i){var a=i.type,o=i.name;if("CATEGORY"===a){var s=e$(e,n,t,o);s.length&&r.push({category:o,links:s})}}),r};function eY(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eK(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eY(Object(t),!0).forEach(function(n){d()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eY(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eX=(0,M.ZP)("li").withConfig({displayName:"ActionsMenu__MenuItem",componentId:"sc-1bycej1-0"})(["display:flex;align-items:center;&,a,button{width:100%;text-align:left;font-style:normal;font-weight:500;font-size:13px;line-height:16px;letter-spacing:-0.4px;outline:none;@media (max-width:39.938em){font-size:14px;}&:not(:hover){color:#313233;}&:hover:not(:disabled){background:white;color:",";&:not(:active){background:white;text-decoration:underline;}}&:focus{box-shadow:none;outline:none;background:white;text-shadow:0px 0px 1px black;}&:disabled{color:#8c8c8c;}}a,button{&:not(:active){margin-right:24px;}&:active{outline:1px solid #e8e9eb;margin-left:12px;margin-right:12px;background:white;}}svg{margin-right:8px;fill:",";color:",";}",""],function(e){return e.theme.colors.black[800]},function(e){return e.theme.colors.primary[600]},function(e){return e.theme.colors.primary[600]},function(e){return e.isHiddenOnMobile&&(0,M.iv)(["@media screen and (min-width:40em){display:none;}"])}),eQ=(0,M.ZP)(eF.Lt).withConfig({displayName:"ActionsMenu__ActionsDropdown",componentId:"sc-1bycej1-1"})(["","{padding:8px 0;}@media screen and (min-width:40em) and (max-width:88em){","{right:50px;}}@media (max-width:39.938em){","{display:none !important;}","{display:block;position:relative;box-shadow:none;border:none;padding-top:0;text-transform:uppercase;button{text-transform:uppercase;}svg{margin-right:16px;}}}",""],eF.Nv,eF.Nv,eF.Wi,eF.Nv,function(e){return e.$isHiddenOnNonMobile&&(0,M.iv)(["@media screen and (min-width:39.938em){display:none;}"])}),eJ=(0,M.ZP)(W).attrs({isSecondary:!0}).withConfig({displayName:"ActionsMenu__StyledActionButton",componentId:"sc-1bycej1-2"})(["svg{stroke-width:2;}span{vertical-align:middle;margin-right:4px;}@media (max-width:39.938em){cursor:none;pointer-events:none;}"]),e0=(0,M.ZP)(ew._M).withConfig({displayName:"ActionsMenu__StyledChevronDown",componentId:"sc-1bycej1-3"})(["@media (max-width:39.938em){display:none;}"]),e1="11px 14px",e2=function(e){var n=e.collective,t=e.callsToAction,r=e.hiddenActionForNonMobile,i=e.LoggedInUser,a=Object.keys(s()(t,Boolean)),o=a.length<1,l=1===a.length&&r===a[0];return o?null:(0,G.jsx)(ey.Z,{display:l?["flex","none"]:"flex",alignItems:"center",order:[-1,0],borderTop:["1px solid #e1e1e1","none"],ml:1,children:(0,G.jsx)(ex.xu,{px:1,children:(0,G.jsx)(eQ,{trigger:"click",$isHiddenOnNonMobile:a.length<=2,children:function(e){var a=e.triggerProps,o=e.dropdownProps;return(0,G.jsxs)(v.Fragment,{children:[(0,G.jsxs)(ex.kC,{alignItems:"center",children:[(0,G.jsx)(ex.xu,{display:["block","none"],width:"32px",ml:2,children:(0,G.jsx)(eq.Z,{borderStyle:"solid",borderColor:"primary.600"})}),(0,G.jsxs)(eJ,eK(eK({my:2},a),{},{children:[(0,G.jsx)(eO.Dr,{children:(0,G.jsx)(T.Z,{id:"CollectivePage.NavBar.ActionMenu.Actions",defaultMessage:[{type:0,value:"Actions"}]})}),(0,G.jsx)(e0,{size:"14px"})]}))]}),(0,G.jsxs)("div",eK(eK({},o),{},{children:[(0,G.jsx)(eF.Wi,{}),(0,G.jsx)(eF.Nv,{children:(0,G.jsxs)(ex.xu,{as:"ul",p:0,m:0,minWidth:184,children:[t.hasSettings&&(0,G.jsx)(eX,{py:1,isHiddenOnMobile:r===eB.SETTINGS,children:(0,G.jsxs)(e_.Z,{as:eb.Z,href:(0,z.aT)(n),p:e1,children:[(0,G.jsx)(A.Z,{size:20}),(0,G.jsx)(T.Z,{id:"Settings",defaultMessage:[{type:0,value:"Settings"}]})]})}),t.hasSubmitExpense&&(0,G.jsx)(eX,{isHiddenOnMobile:r===eB.SUBMIT_EXPENSE,children:(0,G.jsx)(e_.Z,{as:eb.Z,href:"".concat((0,z.x0)(n),"/expenses/new"),children:(0,G.jsxs)(ey.Z,{p:e1,children:[(0,G.jsx)(j.p,{size:"20px"}),(0,G.jsx)(T.Z,{id:"ExpenseForm.Submit",defaultMessage:[{type:0,value:"Submit expense"}]})]})})}),t.hasRequestGrant&&(0,G.jsx)(eX,{py:1,isHiddenOnMobile:r===eB.REQUEST_GRANT,children:(0,G.jsx)(e_.Z,{as:eb.Z,href:"".concat((0,z.x0)(n),"/expenses/new"),children:(0,G.jsxs)(ey.Z,{p:e1,children:[(0,G.jsx)(C.I,{size:"20px"}),(0,G.jsx)(T.Z,{id:"ExpenseForm.Type.Request",defaultMessage:[{type:0,value:"Request Grant"}]})]})})}),t.hasManageSubscriptions&&(0,G.jsx)(eX,{isHiddenOnMobile:r===eB.MANAGE_SUBSCRIPTIONS,children:(0,G.jsx)(e_.Z,{as:eb.Z,href:null!=i&&i.hasPreviewFeatureEnabled(H.X.DASHBOARD)?(0,z.Ol)(n,"outgoing-contributions"):"".concat((0,z.x0)(n),"/manage-contributions"),children:(0,G.jsxs)(ey.Z,{p:e1,children:[(0,G.jsx)(w.K,{size:"20px"}),(0,G.jsx)("span",{children:(0,G.jsx)(T.Z,{id:"menu.subscriptions",defaultMessage:[{type:0,value:"Manage Contributions"}]})})]})})}),t.hasContribute&&(0,G.jsx)(eX,{py:1,isHiddenOnMobile:r===eB.CONTRIBUTE,children:(0,G.jsx)(e_.Z,{as:eb.Z,href:(0,N.oe)(n),children:(0,G.jsxs)(ey.Z,{p:e1,children:[(0,G.jsx)(b.j,{size:"20px"}),(0,G.jsx)(T.Z,{id:"menu.contributeMoney",defaultMessage:[{type:0,value:"Contribute Money"}]})]})})}),t.addFunds&&(0,G.jsx)(X,{collective:n,children:function(e){return(0,G.jsx)(eX,{py:1,isHiddenOnMobile:r===eB.ADD_FUNDS,children:(0,G.jsxs)(V.Z,eK(eK({borderRadius:0,p:e1,isBorderless:!0},e),{},{children:[(0,G.jsx)(P.T,{size:"20px"}),(0,G.jsx)(eO.Dr,{children:(0,G.jsx)(T.Z,{id:"menu.addFunds",defaultMessage:[{type:0,value:"Add Funds"}]})})]}))})}}),t.hasContact&&(0,G.jsx)(eX,{py:1,isHiddenOnMobile:r===eB.CONTACT,children:(0,G.jsx)(eh.Z,{collective:n,LoggedInUser:i,children:function(e){return(0,G.jsxs)(V.Z,eK(eK({},e),{},{borderRadius:0,p:e1,isBorderless:!0,children:[(0,G.jsx)(x.w,{size:"20px"}),(0,G.jsx)(T.Z,{id:"Contact",defaultMessage:[{type:0,value:"Contact"}]})]}))}})}),t.hasApply&&(0,G.jsx)(eX,{py:1,isHiddenOnMobile:r===eB.APPLY,children:(0,G.jsx)(ef,{hostSlug:n.slug,isHidden:r===eB.APPLY,buttonProps:{isBorderless:!0,p:e1}})}),t.createVirtualCard&&n.isApproved&&(0,G.jsx)(eR,{collective:n,host:n.host,children:function(e){return(0,G.jsx)(eX,{py:1,isHiddenOnMobile:r===eB.CREATE_CARD,children:(0,G.jsxs)(V.Z,eK(eK({borderRadius:0,p:e1,isBorderless:!0},e),{},{children:[(0,G.jsx)(eA.a,{size:"20px"}),(0,G.jsx)(eO.Dr,{children:(0,G.jsx)(T.Z,{id:"xLybrm",defaultMessage:[{type:0,value:"Create a Card"}]})})]}))})}}),t.assignVirtualCard&&n.isApproved&&(0,G.jsx)(eE,{collective:n,host:n.host,children:function(e){return(0,G.jsx)(eX,{py:1,isHiddenOnMobile:r===eB.ASSIGN_CARD,children:(0,G.jsxs)(V.Z,eK(eK({borderRadius:0,p:e1,isBorderless:!0},e),{},{children:[(0,G.jsx)(eA.a,{size:"20px"}),(0,G.jsx)(eO.Dr,{children:(0,G.jsx)(T.Z,{id:"menu.assignCard",defaultMessage:[{type:0,value:"Assign a Card"}]})})]}))})}}),t.requestVirtualCard&&n.isApproved&&(0,G.jsx)(eD.Z,{collective:n,host:n.host,children:function(e){return(0,G.jsx)(eX,{py:1,isHiddenOnMobile:r===eB.ASSIGN_CARD,children:(0,G.jsxs)(V.Z,eK(eK({borderRadius:0,p:e1,isBorderless:!0},e),{},{children:[(0,G.jsx)(eA.a,{size:"20px"}),(0,G.jsx)(eO.Dr,{children:(0,G.jsx)(T.Z,{id:"Collective.VirtualCards.RequestCard",defaultMessage:[{type:0,value:"Request a Card"}]})})]}))})}})]})})]}))]})}})})})};e2.defaultProps={callsToAction:{},buttonsMinWidth:100},e2.__docgenInfo={description:"",methods:[],displayName:"CollectiveNavbarActionsMenu",props:{callsToAction:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{hasContact:{name:"bool",description:"Button to contact the collective",required:!1},hasSubmitExpense:{name:"bool",description:"Submit new expense button",required:!1},hasApply:{name:"bool",description:'Host\'s "Apply" button',required:!1},hasDashboard:{name:"bool",description:"Host's dashboard",required:!1},hasManageSubscriptions:{name:"bool",description:"Manage recurring contributions",required:!1},hasRequestGrant:{name:"bool",description:"Request a grant from a fund",required:!1},hasContribute:{name:"bool",description:"Contribute financially to a collective",required:!1},addFunds:{name:"bool",description:"Add funds to a collective",required:!1},createVirtualCard:{name:"bool",description:"Create new card for Collective",required:!1},assignVirtualCard:{name:"bool",description:"Assign card to Collective",required:!1},requestVirtualCard:{name:"bool",description:"Request card to Collective",required:!1},hasSettings:{name:"bool",description:"Button to Edit the Collective",required:!1}}},required:!1},buttonsMinWidth:{defaultValue:{value:"100",computed:!1},required:!1},collective:{description:"",type:{name:"shape",value:{id:{name:"union",value:[{name:"number"},{name:"string"}],required:!0},legacyId:{name:"number",required:!1},name:{name:"string",required:!0},slug:{name:"string",required:!0},type:{name:"string",required:!1},settings:{name:"object",required:!1},tiers:{name:"array",required:!1},isApproved:{name:"bool",required:!1},host:{name:"shape",value:{hostFees:{name:"bool",required:!1}},required:!1}}},required:!1},hiddenActionForNonMobile:{description:"",type:{name:"enum",computed:!0,value:"Object.values(NAVBAR_ACTION_TYPE)"},required:!1},LoggedInUser:{description:"",type:{name:"object"},required:!1}}};var e6=t(11374),e3=t(88944);function e9(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function e4(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?e9(Object(t),!0).forEach(function(n){d()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e9(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var e5=(0,M.ZP)(ey.Z).attrs({px:[1,3,0]}).withConfig({displayName:"NavBarCategoryDropdown__CategoryContainer",componentId:"sc-6bxcs7-0"})(["display:block;width:100%;span{font-size:14px;line-height:16px;text-decoration:none;white-space:nowrap;color:",";letter-spacing:0.06em;text-transform:uppercase;font-weight:500;&::after{display:block;content:attr(aria-label);font-weight:700;height:1px;color:transparent;overflow:hidden;visibility:hidden;}}&:focus,&:hover,&:focus span,&:hover span{text-decoration:none;font-weight:700;outline:0;color:",";}&::after{content:'';display:block;width:0%;height:3px;background:",";transition:width 0.3s;float:center;opacity:0;}"," @media (max-width:64em){border-top:1px solid #e1e1e1;&::after{display:none;}}"],(0,S.R)("colors.black.800"),(0,S.R)("colors.black.800"),(0,S.R)("colors.primary.500"),function(e){return e.isSelected&&(0,M.iv)(["@media (min-width:64em){&::after{width:100%;margin:0 auto;opacity:1;}}"])}),e8=(0,M.ZP)("li").withConfig({displayName:"NavBarCategoryDropdown__MenuItem",componentId:"sc-6bxcs7-1"})(["display:flex;align-items:center;& > a{padding:12px;@media (max-width:40em){padding-top:4px;}}&,& > a{width:100%;text-align:left;font-style:normal;font-size:13px;font-weight:500;line-height:16px;letter-spacing:-0.4px;outline:none;&:hover,&:focus{text-decoration:underline;}&:not(:hover){color:#313233;}}"]),e7=(0,M.ZP)(eF.Lt).withConfig({displayName:"NavBarCategoryDropdown__CategoryDropdown",componentId:"sc-6bxcs7-2"})(["@media (max-width:64em){","{display:none !important;}","{display:block;position:relative;box-shadow:none;border:none;padding-left:48px;}}"],eF.Wi,eF.Nv),ne=function(e,n,t){var r="#category-".concat(t);return e?{href:r}:{as:eb.Z,href:"/".concat(n.slug).concat(r)}},nn=function(e){var n=e.category,t=e.collective,r=(0,I.Z)(),i=(0,Z.iJ)(r,t,n);return(0,G.jsxs)(ex.kC,{children:[(0,G.jsx)(ex.kC,{alignItems:"center",mr:2,children:(0,G.jsx)(e3.Z,{width:32,height:32,alt:"",src:i.img||Z.yz.CONTRIBUTE})}),(0,G.jsx)(ex.kC,{alignItems:"center",children:(0,G.jsx)(eO.Dr,{textTransform:"uppercase",fontSize:"14px",fontWeight:"500",color:"black.800",letterSpacing:"0.02em","aria-label":i.title,children:i.title})})]})},nt=function(e){var n=e.useAnchor,t=e.category,r=e.children;return n?(0,G.jsx)(e6.Av,{to:"#category-".concat(t),children:r}):r},nr=function(e){var n=e.useAnchor,t=e.collective,r=e.category,i=e.isSelected,a=e.links.filter(function(e){return!e.hide});return(0,G.jsxs)(e7,{trigger:"hover",tabIndex:"-1",children:[(0,G.jsx)(nt,{category:r,useAnchor:n,children:(0,G.jsx)(e5,e4(e4({mr:[0,null,3],isSelected:i},ne(n,t,r)),{},{onClick:function(e){var n;null!==(n=document.activeElement)&&void 0!==n&&n.contains(e.target)&&document.activeElement.blur()},children:(0,G.jsx)(ex.kC,{pt:"15px",pb:"14px",px:[3,1,3,1],children:(0,G.jsx)(nn,{category:r,collective:t})})}))}),a.length>0&&(0,G.jsxs)(v.Fragment,{children:[(0,G.jsx)(eF.Wi,{}),(0,G.jsx)(eF.Nv,{children:(0,G.jsx)(ex.xu,{as:"ul",p:0,m:0,minWidth:184,children:a.map(function(e){var n=e.route,t=e.title;return(0,G.jsx)(e8,{children:(0,G.jsx)(e_.Z,{as:eb.Z,href:n,children:t})},n)})})})]})]})};function ni(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function na(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ni(Object(t),!0).forEach(function(n){d()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ni(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}nr.__docgenInfo={description:"",methods:[],displayName:"NavBarCategoryDropdown",props:{category:{description:"",type:{name:"enum",computed:!0,value:"Object.values(NAVBAR_CATEGORIES)"},required:!0},collective:{description:"",type:{name:"shape",value:{slug:{name:"string",required:!1},type:{name:"string",required:!1}}},required:!0},isSelected:{description:"",type:{name:"bool"},required:!1},useAnchor:{description:"",type:{name:"bool"},required:!1},links:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{route:{name:"string",required:!1},title:{name:"node",required:!1},hide:{name:"bool",required:!1}}}},required:!1}}},nn.__docgenInfo={description:"",methods:[],displayName:"NavBarCategory",props:{category:{description:"",type:{name:"enum",computed:!0,value:"Object.values(NAVBAR_CATEGORIES)"},required:!0},collective:{description:"",type:{name:"object"},required:!0}}};var no=(0,M.vJ)(["@media (max-width:64em){body{overflow:hidden;}#footer{display:none;}}"]),ns=M.ZP.div.withConfig({displayName:"collective-navbar__NavBarContainer",componentId:"sc-6vapjf-0"})(["position:sticky;top:0;z-index:999;background:white;box-shadow:0px 6px 10px -5px rgba(214,214,214,0.5);"]),nl=(0,M.vJ)(["_::-webkit-full-page-media,_:future,:root ","{position:relative;}"],ns),nu=(0,M.ZP)(ey.Z).withConfig({displayName:"collective-navbar__NavbarContentContainer",componentId:"sc-6vapjf-1"})(["background:white;display:flex;justify-content:flex-start;"]),nc=(0,M.ZP)(ex.xu).withConfig({displayName:"collective-navbar__AvatarBox",componentId:"sc-6vapjf-2"})(["position:relative;&::before{content:'';height:24px;position:absolute;right:0;top:0;bottom:0;margin-top:auto;margin-bottom:auto;border-right:2px solid rgba(214,214,214,1);}"]),nd=M.ZP.div.withConfig({displayName:"collective-navbar__BackButtonAndAvatar",componentId:"sc-6vapjf-3"})(["display:flex;@media (min-width:64em){&[data-hide-on-desktop='false']{width:48px;opacity:1;visibility:visible;margin-right:8px;transition:opacity 0.1s ease-out,visibility 0.2s ease-out,margin 0.075s,width 0.075s ease-in-out;}&[data-hide-on-desktop='true']{width:0px;margin-right:0px;visibility:hidden;opacity:0;transition:opacity 0.1s ease-out,visibility 0.2s ease-out,margin 0.075s,width 0.075s ease-in-out;}}"]),np=(0,M.ZP)(ey.Z).withConfig({displayName:"collective-navbar__InfosContainer",componentId:"sc-6vapjf-4"})(["display:flex;align-items:center;justify-content:space-between;min-width:0;"]),nm=(0,M.ZP)(ej.Z).attrs({fontSize:["16px","18px"],color:"black.800"}).withConfig({displayName:"collective-navbar__CollectiveName",componentId:"sc-6vapjf-5"})([""," letter-spacing:-0.8px;margin:8px;min-width:0;text-decoration:none;text-align:center;font-weight:500;line-height:24px;&,a{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}&:not(:hover){color:#313233;}"],E.jf),nf=(0,M.ZP)(ey.Z).withConfig({displayName:"collective-navbar__CategoriesContainer",componentId:"sc-6vapjf-6"})(["background-color:#ffffff;max-height:calc(100vh - 70px);flex-shrink:2;flex-grow:1;overflow:auto;@media screen and (max-width:40em){max-height:none;flex-shrink:0;}@media screen and (min-width:40em) and (max-width:64em){border:1px solid rgba(214,214,214,0.3);border-radius:0px 0px 0px 8px;box-shadow:0px 6px 10px -5px rgba(214,214,214,0.5);position:absolute;right:0;top:64px;width:0;visibility:hidden;opacity:0;transition:opacity 0.4s ease-out,visibility 0.4s ease-out,width 0.2s ease-out;","}"],function(e){return e.isExpanded&&(0,M.iv)(["width:400px;visibility:visible;opacity:1;"])}),ng=(0,q.Ps)(r||(r=g()(["\n  query AccountPermissions($slug: String!) {\n    account(slug: $slug) {\n      id\n      permissions {\n        id\n        addFunds {\n          allowed\n          reason\n        }\n      }\n    }\n  }\n"]))),nv=(0,M.ZP)(ey.Z).attrs({display:["block",null,null,"none"]}).withConfig({displayName:"collective-navbar__MobileCategoryContainer",componentId:"sc-6vapjf-7"})(["animation:"," 0.2s;margin-left:8px;"],eP.Ji),nh=(0,M.ZP)(y.n).attrs({size:28}).withConfig({displayName:"collective-navbar__ExpandMenuIcon",componentId:"sc-6vapjf-8"})(["cursor:pointer;margin-right:4px;flex:0 0 28px;color:",";&:hover{background:radial-gradient(transparent 14px,white 3px),linear-gradient(rgba(255,255,255,0.8),rgba(255,255,255,0.8)),linear-gradient(",",",");}&:active{background:radial-gradient("," 14px,white 3px);color:",";}@media (min-width:64em){display:none;}"],(0,S.R)("colors.primary.600"),(0,S.R)("colors.primary.600"),(0,S.R)("colors.primary.600"),(0,S.R)("colors.primary.600"),(0,S.R)("colors.white.full")),ny=(0,M.ZP)(O.x).attrs({size:28}).withConfig({displayName:"collective-navbar__CloseMenuIcon",componentId:"sc-6vapjf-9"})(["cursor:pointer;margin-right:4px;flex:0 0 28px;color:",";&:hover{background:radial-gradient(transparent 14px,white 3px),linear-gradient(rgba(255,255,255,0.8),rgba(255,255,255,0.8)),linear-gradient(",",",");}&:active{background:radial-gradient("," 14px,white 3px);color:",";}@media (min-width:64em){display:none;}"],(0,S.R)("colors.primary.600"),(0,S.R)("colors.primary.600"),(0,S.R)("colors.primary.600"),(0,S.R)("colors.primary.600"),(0,S.R)("colors.white.full")),nx=function(e,n){var t=m()(e.features,n);return"ACTIVE"===t||"AVAILABLE"===t},nb=function(e,n,t,r,i,a,o){if(!e)return{};var s=e.features,l=e.host;return{hasContribute:[k.eV.FUND,k.eV.PROJECT].includes(e.type)&&e.isActive&&(0,N.oe)(e)&&(0,Z.sy)(n,ev.bx.CONTRIBUTE,t),hasContact:nx(e,"CONTACT_FORM"),hasApply:nx(e,"RECEIVE_HOST_APPLICATIONS"),hasSubmitExpense:nx(e,"RECEIVE_EXPENSES")&&(0,N.cm)(e,a),hasManageSubscriptions:t&&"ACTIVE"===m()(s,"RECURRING_CONTRIBUTIONS"),hasDashboard:t&&nx(e,"HOST_DASHBOARD"),hasRequestGrant:(0,F.wx)(e,R.Z.GRANT)&&(0,N.cm)(e,a),addFunds:o,createVirtualCard:i&&nx(l,"VIRTUAL_CARDS"),assignVirtualCard:i&&nx(l,"VIRTUAL_CARDS"),requestVirtualCard:t&&nx(e,"REQUEST_VIRTUAL_CARDS"),hasSettings:t||r}},nj=function(e,n,t){if(!e||!n)return null;if(n.includes(eB.SETTINGS))return{type:eB.SETTINGS,component:(0,G.jsx)(eb.Z,{href:t.hasPreviewFeatureEnabled(H.X.DASHBOARD)?(0,z.Ol)(e):(0,z.aT)(e),children:(0,G.jsxs)(W,{tabIndex:"-1",children:[(0,G.jsx)(A.Z,{size:"1em"}),(0,G.jsx)(eO.Dr,{ml:2,children:t.hasPreviewFeatureEnabled(H.X.DASHBOARD)?(0,G.jsx)(T.Z,{id:"Dashboard",defaultMessage:[{type:0,value:"Dashboard"}]}):e.isHost?(0,G.jsx)(T.Z,{id:"AdminPanel.button",defaultMessage:[{type:0,value:"Admin"}]}):(0,G.jsx)(T.Z,{id:"Settings",defaultMessage:[{type:0,value:"Settings"}]})})]})})};if(n.includes("hasContribute"))return{type:eB.CONTRIBUTE,component:(0,G.jsx)(eb.Z,{href:(0,N.oe)(e),children:(0,G.jsxs)(W,{tabIndex:"-1",children:[(0,G.jsx)(b.j,{size:"1em"}),(0,G.jsx)(eO.Dr,{ml:2,children:(0,G.jsx)(T.Z,{id:"menu.contributeMoney",defaultMessage:[{type:0,value:"Contribute Money"}]})})]})})};if(n.includes("hasApply"))return{type:eB.APPLY,component:(0,G.jsx)(ef,{hostSlug:e.slug,buttonRenderer:function(e){return(0,G.jsx)(W,na({},e))}})};if(n.includes("hasRequestGrant"))return{type:eB.REQUEST_GRANT,component:(0,G.jsx)(eb.Z,{href:"".concat((0,z.x0)(e),"/expenses/new"),children:(0,G.jsxs)(W,{tabIndex:"-1",children:[(0,G.jsx)(C.I,{size:"1em"}),(0,G.jsx)(eO.Dr,{ml:2,children:(0,G.jsx)(T.Z,{id:"ExpenseForm.Type.Request",defaultMessage:[{type:0,value:"Request Grant"}]})})]})})};if(n.includes("hasSubmitExpense"))return{type:eB.SUBMIT_EXPENSE,component:(0,G.jsx)(eb.Z,{href:"".concat((0,z.x0)(e),"/expenses/new"),children:(0,G.jsxs)(W,{tabIndex:"-1",children:[(0,G.jsx)(j.p,{size:"1em"}),(0,G.jsx)(eO.Dr,{ml:2,children:(0,G.jsx)(T.Z,{id:"menu.submitExpense",defaultMessage:[{type:0,value:"Submit Expense"}]})})]})})};if(n.includes("hasManageSubscriptions"))return{type:eB.MANAGE_SUBSCRIPTIONS,component:(0,G.jsx)(eb.Z,{href:null!=t&&t.hasPreviewFeatureEnabled(H.X.DASHBOARD)?(0,z.Ol)(e,"outgoing-contributions"):"".concat((0,z.x0)(e),"/manage-contributions"),children:(0,G.jsxs)(W,{tabIndex:"-1",children:[(0,G.jsx)(w.K,{size:"1em"}),(0,G.jsx)(eO.Dr,{ml:2,children:(0,G.jsx)(T.Z,{id:"menu.subscriptions",defaultMessage:[{type:0,value:"Manage Contributions"}]})})]})})};if(n.includes("hasContact"))return{type:eB.CONTACT,component:(0,G.jsx)(eh.Z,{collective:e,LoggedInUser:t,children:function(e){return(0,G.jsxs)(W,na(na({},e),{},{children:[(0,G.jsx)(x.w,{size:"1em"}),(0,G.jsx)(eO.Dr,{ml:2,children:(0,G.jsx)(T.Z,{id:"Contact",defaultMessage:[{type:0,value:"Contact"}]})})]}))}})};else if(n.includes(eB.ADD_FUNDS)&&e.host)return{type:eB.ADD_FUNDS,component:(0,G.jsx)(X,{collective:e,children:function(e){return(0,G.jsxs)(W,na(na({},e),{},{children:[(0,G.jsx)(P.T,{size:"1em"}),(0,G.jsx)(eO.Dr,{children:(0,G.jsx)(T.Z,{id:"menu.addFunds",defaultMessage:[{type:0,value:"Add Funds"}]})})]}))}})};else return null},nC=[56,64],nP=function(e){var n,t,r,i=e.collective,o=e.isAdmin,l=e.isLoading,c=e.sections,d=e.selectedCategory,p=e.callsToAction,m=e.onCollectiveClick,f=e.isInHero,g=e.onlyInfos,y=e.showBackButton,x=e.useAnchorsForCategories,b=e.showSelectedCategoryOnMobile,j=(0,I.Z)(),C=v.useState(!1),P=u()(C,2),O=P[0],A=P[1],w=(0,L.Z)().LoggedInUser,S=null==w?void 0:w.hasRole(D.Z.ACCOUNTANT,i);o=o||(null==w?void 0:w.isAdminOfCollective(i));var M=null==w?void 0:w.isHostAdmin(i),E=(0,h.a)(ng,{context:q.Tn,variables:{slug:null==i?void 0:i.slug},skip:!(null!=i&&i.slug)||!w}),N=E.data,k=E.dataLoading,R=l||k,F=!!(null==N?void 0:null===(n=N.account)||void 0===n?void 0:null===(t=n.permissions)||void 0===t?void 0:null===(r=t.addFunds)||void 0===r?void 0:r.allowed),H=v.useMemo(function(){return c||(0,Z.vY)(i,o,M)},[c,i,o,M]);p=na(na({},nb(i,H,o,S,M,w,F)),p);var U=Object.keys(s()(p,Boolean)),B=nj(i,U,w),W=2===U.length&&nj(i,a()(U,null==B?void 0:B.type),w),$=(0,v.useRef)(),Y=(0,v.useRef)();return(0,_.Z)($,function(e){!e&&O&&setTimeout(function(){A(!1)},500)}),(0,G.jsxs)(v.Fragment,{children:[(0,G.jsx)(nl,{}),(0,G.jsx)(ns,{ref:Y,children:(0,G.jsxs)(nu,{flexDirection:["column","row"],px:[0,3,null,ev.Db.PADDING_X[1]],mx:"auto",maxWidth:ev.Db.MAX_SECTION_WIDTH,maxHeight:"100vh",minHeight:nC,children:[(0,G.jsxs)(np,{px:[3,0],py:[2,1],children:[(0,G.jsxs)(ex.kC,{alignItems:"center",maxWidth:["90%","100%"],flex:"1 1",children:[(0,G.jsxs)(nd,{"data-hide-on-desktop":f,children:[y&&(0,G.jsx)(ey.Z,{display:["none",null,null,null,"block"],position:"absolute",left:-30,children:i&&(0,G.jsx)(eb.Z,{href:(0,z.x0)(i),children:(0,G.jsx)(V.Z,{px:1,isBorderless:!0,children:"←"})})}),(0,G.jsx)(nc,{children:(0,G.jsx)(ej.Z,{collective:i,onClick:m,children:(0,G.jsx)(ey.Z,{borderRadius:"25%",mr:2,children:(0,G.jsx)(eg.ZP,{collective:i,radius:40})})})})]}),(0,G.jsx)(ey.Z,{display:g?"flex":["flex",null,null,"none"],minWidth:0,children:R?(0,G.jsx)(eC.Z,{height:14,minWidth:100}):f?(0,G.jsxs)(v.Fragment,{children:[(0,G.jsx)(nm,{collective:i,display:["block","none"],children:(0,G.jsx)(T.Z,{id:"NavBar.ThisIsCollective",defaultMessage:[{type:0,value:"This is "},{type:1,value:"collectiveName"},{type:0,value:"'s page"}],values:{collectiveName:i.name}})}),(0,G.jsx)(nm,{collective:i,display:["none","block"]})]}):d&&b?(0,G.jsx)(nv,{children:(0,G.jsx)(nn,{collective:i,category:d})}):(0,G.jsx)(nm,{collective:i,onClick:m})})]}),!g&&(0,G.jsx)(ex.xu,{display:["block","none"],flex:"0 0 32px",children:O?(0,G.jsx)(ny,{onClick:function(){return A(!O)}}):(0,G.jsx)(nh,{onClick:function(){var e;null===(e=Y.current)||void 0===e||e.scrollIntoView(!0),A(!0)}})})]}),!g&&(0,G.jsxs)(ey.Z,{display:["block","flex"],width:"100%",justifyContent:"space-between",flexDirection:["column","row"],children:[O&&(0,G.jsx)(no,{}),(0,G.jsx)(nf,{ref:$,display:O?"flex":["none","flex"],flexDirection:["column",null,null,"row"],justifyContent:["space-between",null,"flex-start"],order:[0,3,0],isExpanded:O,children:R?(0,G.jsx)(eC.Z,{height:34,minWidth:100,maxWidth:200,my:15}):eG(j,i,H).map(function(e){var n=e.category,t=e.links;return(0,G.jsx)(nr,{collective:i,category:n,links:t,isSelected:d===n,useAnchor:x},n)})}),(0,G.jsxs)(ey.Z,{display:O?"flex":["none","flex"],flexDirection:["column","row"],flexBasis:"fit-content",marginLeft:[0,"auto"],backgroundColor:"#fff",zIndex:1,children:[B&&(0,G.jsxs)(ey.Z,{display:["none","flex"],alignItems:"center",children:[B.component,null!=W&&W.component?(0,G.jsx)(ey.Z,{ml:2,children:null==W?void 0:W.component}):null]}),!R&&(0,G.jsx)(e2,{collective:i,callsToAction:p,hiddenActionForNonMobile:null==B?void 0:B.type,LoggedInUser:w}),(0,G.jsx)(ey.Z,{display:["none","flex",null,null,"none"],alignItems:"center",children:O?(0,G.jsx)(ny,{onClick:function(){return A(!O)}}):(0,G.jsx)(nh,{onClick:function(){var e;null===(e=Y.current)||void 0===e||e.scrollIntoView(!0),A(!O)}})})]})]})]})})]})};nP.defaultProps={isInHero:!1,onlyInfos:!1,callsToAction:{},showBackButton:!0},nP.__docgenInfo={description:"The NavBar that displays all the individual sections.",methods:[],displayName:"CollectiveNavbar",props:{isInHero:{defaultValue:{value:"false",computed:!1},description:"The behavior of the navbar is slightly different when integrated in a hero (in the collective page)",type:{name:"bool"},required:!1},onlyInfos:{defaultValue:{value:"false",computed:!1},description:"If true, the Navbar items and buttons will be skipped",type:{name:"bool"},required:!1},callsToAction:{defaultValue:{value:"{}",computed:!1},description:"Defines the calls to action displayed next to the NavBar items. Match PropTypes of `CollectiveCallsToAction`",type:{name:"shape",value:{hasContact:{name:"bool",required:!1},hasSubmitExpense:{name:"bool",required:!1},hasApply:{name:"bool",required:!1},hasDashboard:{name:"bool",required:!1},hasManageSubscriptions:{name:"bool",required:!1},hasSettings:{name:"bool",required:!1}}},required:!1},showBackButton:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},collective:{description:"Collective to show info about",type:{name:"shape",value:{name:{name:"string",required:!0},slug:{name:"string",required:!0},type:{name:"string",required:!0},path:{name:"string",required:!1},isArchived:{name:"bool",required:!1},canContact:{name:"bool",required:!1},canApply:{name:"bool",required:!1},host:{name:"object",required:!1},plan:{name:"object",required:!1},parentCollective:{name:"object",required:!1}}},required:!1},isAdmin:{description:"Used to check what sections can be used",type:{name:"bool"},required:!1},isLoading:{description:"Will show loading state",type:{name:"bool"},required:!1},sections:{description:"The list of sections to be displayed by the NavBar. If not provided, will show all the sections available to this collective type.",type:{name:"arrayOf",value:{name:"shape",value:{type:{name:"enum",value:[{value:"'CATEGORY'",computed:!1},{value:"'SECTION'",computed:!1}],required:!1},name:{name:"string",required:!1}}}},required:!1},onCollectiveClick:{description:"Called when users click the collective logo or name",type:{name:"func"},required:!1},selectedCategory:{description:"Currently selected category",type:{name:"enum",computed:!0,value:"Object.values(NAVBAR_CATEGORIES)"},required:!1},hideButtonsOnMobile:{description:"If true, the CTAs will be hidden on mobile",type:{name:"bool"},required:!1},isSmall:{description:"Set this to true to make the component smaller in height",type:{name:"bool"},required:!1},showSelectedCategoryOnMobile:{description:"",type:{name:"bool"},required:!1},useAnchorsForCategories:{description:"To use on the collective page. Sets links to anchors rather than full URLs for faster navigation",type:{name:"bool"},required:!1}}};var nO=v.memo(nP)},50427:function(e,n,t){var r=t(930),i=t.n(r),a=t(3323),o=t.n(a),s=t(67294),l=t(87281),u=t(67271),c=t(62519),d=t(86896),p=t(44012),m=t(52015),f=t(16678),g=t(29497),v=t(26704),h=t(74197);t(56678);var y=t(51506),x=t(25451),b=t(52063),j=t(63551),C=t(2734),P=t(61936),O=t(85893),A=["amount"];function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var S=(0,m.ZP)(y.Z).withConfig({displayName:"BudgetStats__StatTitle",componentId:"sc-1d1p27o-0"})(["font-size:12px;line-height:16px;font-weight:500;text-transform:uppercase;margin-bottom:8px;display:flex;align-items:center;"]);S.defaultProps={color:"black.700"};var T=function(e){var n=e.amount,t=o()(e,A);return(0,O.jsx)(P.P,{fontSize:"16px",lineHeight:"24px",color:"black.700",children:(0,O.jsx)(b.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({amount:n||null},t))})},I=m.ZP.div.withConfig({displayName:"BudgetStats__StatContainer",componentId:"sc-1d1p27o-1"})(["flex:1;padding:16px 32px;svg{margin-right:5px;vertical-align:bottom;}"," border-color:#dcdee0;",""],function(e){return e.$isMain&&(0,m.iv)(["background:#f7f8fa;"])},f.Cg),M=function(e){var n,t,r=e.collective,i=e.stats,a=e.horizontal,o=(0,d.Z)().locale,m=((null===(n=i.activeRecurringContributions)||void 0===n?void 0:n.monthly)||0)+((null===(t=i.activeRecurringContributions)||void 0===t?void 0:t.yearly)||0)/12,f=r.type===v.eV.FUND,b=!r.isHost&&(0,g.Sh)(r),A=["1px solid #dcdee0","none",a?null:"1px solid #dcdee0"];return i?(0,O.jsx)(C.Z,{display:"flex",flex:[null,null,"1 1 300px"],width:"100%",flexDirection:["column","row",a?null:"column"],mb:2,children:b?(0,O.jsxs)(s.Fragment,{children:[(0,O.jsxs)(I,{children:[(0,O.jsxs)(S,{children:["↑\xa0",(0,O.jsx)(p.Z,{id:"RogA5E",defaultMessage:[{type:0,value:"Total contributed"}]})]}),(0,O.jsx)(T,{amount:Math.abs(i.totalAmountSpent.valueInCents),currency:i.totalAmountSpent.currency})]}),(0,O.jsxs)(I,{borderTop:A,children:[(0,O.jsxs)(S,{children:["↓\xa0",(0,O.jsx)(p.Z,{id:"Nqhan+",defaultMessage:[{type:0,value:"Total received with expenses"}]})]}),(0,O.jsx)(T,{amount:i.totalPaidExpenses.valueInCents,currency:i.totalPaidExpenses.currency})]})]}):(0,O.jsxs)(s.Fragment,{children:[(0,O.jsxs)(I,{$isMain:!0,children:[(0,O.jsxs)(S,{children:[(0,O.jsx)(y.Z,{display:"inline-block",fontSize:"11px",mr:"5px",fontWeight:"500",width:"12px",textAlign:"center",children:(0,h.jK)(r.currency)}),[v.eV.PROJECT,v.eV.EVENT].includes(r.type)?(0,O.jsx)(P.Dr,{textTransform:"uppercase",color:"black.700",children:(0,O.jsx)(p.Z,{id:"CollectivePage.SectionBudget.Balance",defaultMessage:[{type:0,value:"Today’s balance"}]})}):(0,O.jsx)(x.Z,{term:x.F.BALANCE,textTransform:"uppercase",color:"black.700",extraTooltipContent:(0,O.jsx)(s.Fragment,{children:(0,O.jsx)(j.xu,{mt:2,children:(0,O.jsx)(p.Z,{id:"budgetSection-balance-consolidated",defaultMessage:[{type:0,value:"Total consolidated including Projects and Events: "},{type:1,value:"amount"}],values:{amount:(0,h.xG)((null==i?void 0:i.consolidatedBalance.valueInCents)||0,r.currency,{locale:o})}})})})})]}),(0,O.jsx)(T,{amount:i.balance.valueInCents,currency:r.currency})]}),(0,O.jsxs)(I,{borderTop:A,children:[(0,O.jsxs)(S,{children:[(0,O.jsx)(u.a,{size:"12px"}),r.isHost?(0,O.jsx)(x.Z,{term:x.F.TOTAL_INCOME,textTransform:"uppercase",color:"black.700"}):(0,O.jsx)(x.Z,{term:x.F.TOTAL_RAISED,textTransform:"uppercase",color:"black.700",extraTooltipContent:(0,O.jsx)(j.xu,{mt:2,children:(0,O.jsx)(p.Z,{id:"budgetSection-raised-total",defaultMessage:[{type:0,value:"Total contributed before fees: "},{type:1,value:"amount"}],values:{amount:(0,h.xG)((null==i?void 0:i.totalAmountRaised.valueInCents)||0,r.currency,{locale:o})}})})})]}),(0,O.jsx)(T,{amount:i.totalNetAmountRaised.valueInCents,currency:r.currency})]}),(0,O.jsxs)(I,{borderTop:A,children:[(0,O.jsxs)(S,{children:[(0,O.jsx)(c.Z,{size:"12px"}),(0,O.jsx)(p.Z,{id:"budgetSection-disbursed",defaultMessage:[{type:0,value:"Total disbursed"}]})]}),(0,O.jsx)(T,{amount:i.totalNetAmountRaised.valueInCents-i.balance.valueInCents,currency:r.currency})]}),!f&&(0,O.jsxs)(I,{borderTop:A,children:[(0,O.jsxs)(S,{children:[(0,O.jsx)(l.f,{size:"12px"}),(0,O.jsx)(x.Z,{term:x.F.ESTIMATED_BUDGET,textTransform:"uppercase",color:"black.700",extraTooltipContent:(0,O.jsxs)(s.Fragment,{children:[(0,O.jsx)(j.xu,{mt:2,children:(0,O.jsx)(p.Z,{id:"CollectivePage.SectionBudget.MonthlyRecurringAmount",defaultMessage:[{type:0,value:"Monthly recurring: "},{type:1,value:"amount"}],values:{amount:(0,h.xG)(m,r.currency,{locale:o})}})}),(0,O.jsx)(j.xu,{mt:2,children:(0,O.jsx)(p.Z,{id:"CollectivePage.SectionBudget.TotalAmountReceived",defaultMessage:[{type:0,value:"Total received in the last 12 months: "},{type:1,value:"amount"}],values:{amount:(0,h.xG)((null==i?void 0:i.totalAmountReceived.valueInCents)||0,r.currency,{locale:o})}})})]})})]}),(0,O.jsx)(T,{amount:i.yearlyBudget.valueInCents,currency:r.currency})]})]})}):null};M.__docgenInfo={description:"",methods:[],displayName:"BudgetStats",props:{collective:{description:"Collective",type:{name:"shape",value:{slug:{name:"string",required:!0},name:{name:"string",required:!0},type:{name:"string",required:!0},currency:{name:"string",required:!0},isArchived:{name:"bool",required:!1},settings:{name:"object",required:!1},host:{name:"object",required:!1},isHost:{name:"bool",required:!1}}},required:!0},stats:{description:"Stats",type:{name:"shape",value:{balance:{name:"custom",raw:"AmountPropTypeShape",required:!1},consolidatedBalance:{name:"custom",raw:"AmountPropTypeShape",required:!1},yearlyBudget:{name:"custom",raw:"AmountPropTypeShape",required:!1},activeRecurringContributions:{name:"object",required:!1},totalAmountReceived:{name:"custom",raw:"AmountPropTypeShape",required:!1},totalAmountRaised:{name:"custom",raw:"AmountPropTypeShape",required:!1},totalNetAmountRaised:{name:"custom",raw:"AmountPropTypeShape",required:!1},totalAmountSpent:{name:"custom",raw:"AmountPropTypeShape",required:!1},totalPaidExpenses:{name:"custom",raw:"AmountPropTypeShape",required:!1}}},required:!1},horizontal:{description:"",type:{name:"bool"},required:!1},isLoading:{description:"",type:{name:"bool"},required:!1}}},n.Z=s.memo(M)},11899:function(e,n,t){var r=t(52015),i=t(51506),a=t(27779),o=(0,r.ZP)(i.Z).attrs({maxWidth:a.Db.MAX_SECTION_WIDTH,px:a.Db.PADDING_X,m:"0 auto"}).withConfig({displayName:"ContainerSectionContent",componentId:"sc-ahctoi-0"})([""]);n.Z=o},23959:function(e,n,t){t.d(n,{MR:function(){return G},kr:function(){return Y}});var r,i,a,o,s=t(27361),l=t.n(s),u=t(85696),c=t.n(u),d=t(7980),p=t.n(d),m=t(75472),f=t.n(m),g=t(92358),v=t.n(g),h=t(67294),y=t(37887),x=t(44012),b=t(52015),j=t(29497),C=t(95905),P=t(25618),O=t(59644),A=t(13412),w=t(19314),S=t(96677),T=t(51506),I=t(31257),M=t(63551),E=t(88944),N=t(48900),Z=t(98936),k=t(2734),R=t(17843),D=t(61936),F=t(6532),q=t(15203),_=t(79279),L=t(58441),H=t(50427),z=t(11899),U=t(85893),B=(0,O.Ps)(r||(r=v()(["\n  fragment BudgetSectionAccountFields on Account {\n    id\n    isHost\n    type\n    ... on AccountWithHost {\n      host {\n        id\n        slug\n        name\n      }\n    }\n    ... on Organization {\n      host {\n        id\n        slug\n        name\n      }\n    }\n    stats {\n      id\n      balance {\n        valueInCents\n        currency\n      }\n      consolidatedBalance {\n        valueInCents\n        currency\n      }\n      yearlyBudget {\n        valueInCents\n        currency\n      }\n      activeRecurringContributions\n      totalAmountReceived(periodInMonths: 12) {\n        valueInCents\n        currency\n      }\n      totalAmountRaised: totalAmountReceived {\n        valueInCents\n        currency\n      }\n      totalNetAmountRaised: totalNetAmountReceived {\n        valueInCents\n        currency\n      }\n    }\n  }\n"]))),V=(0,O.Ps)(i||(i=v()(["\n  query BudgetSection($slug: String!, $limit: Int!, $kind: [TransactionKind]) {\n    transactions(\n      account: { slug: $slug }\n      limit: $limit\n      kind: $kind\n      includeIncognitoTransactions: true\n      includeGiftCardTransactions: true\n      includeChildrenTransactions: true\n    ) {\n      ...TransactionsQueryCollectionFragment\n    }\n    expenses(account: { slug: $slug }, limit: $limit, includeChildrenExpenses: true) {\n      totalCount\n      nodes {\n        id\n        ...ExpensesListFieldsFragment\n        host {\n          id\n          ...ExpenseHostFields\n        }\n      }\n    }\n    account(slug: $slug) {\n      id\n      ...BudgetSectionAccountFields\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"])),q.N,I.xe,I.RR,B),W=(0,O.Ps)(a||(a=v()(["\n  query BudgetSectionForIndividual($slug: String!, $limit: Int!, $kind: [TransactionKind]) {\n    transactions(\n      account: { slug: $slug }\n      limit: $limit\n      kind: $kind\n      includeIncognitoTransactions: true\n      includeGiftCardTransactions: true\n    ) {\n      ...TransactionsQueryCollectionFragment\n    }\n    expenses(createdByAccount: { slug: $slug }, limit: $limit) {\n      totalCount\n      nodes {\n        id\n        ...ExpensesListFieldsFragment\n        host {\n          id\n          ...ExpenseHostFields\n        }\n      }\n    }\n    account(slug: $slug) {\n      id\n      isHost\n      type\n      stats {\n        id\n        totalAmountSpent(net: true) {\n          valueInCents\n          currency\n        }\n        totalPaidExpenses {\n          valueInCents\n          currency\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"])),q.N,I.xe,I.RR),$=(0,O.Ps)(o||(o=v()(["\n  query BudgetSectionWithHost($slug: String!, $limit: Int!, $kind: [TransactionKind]) {\n    transactions(\n      account: { slug: $slug }\n      limit: $limit\n      kind: $kind\n      includeIncognitoTransactions: true\n      includeGiftCardTransactions: true\n      includeChildrenTransactions: true\n    ) {\n      ...TransactionsQueryCollectionFragment\n    }\n    expenses(account: { slug: $slug }, limit: $limit, includeChildrenExpenses: true) {\n      totalCount\n      nodes {\n        id\n        ...ExpensesListFieldsFragment\n      }\n    }\n    account(slug: $slug) {\n      id\n      ...BudgetSectionAccountFields\n      ... on AccountWithHost {\n        host {\n          id\n          ...ExpenseHostFields\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"])),q.N,I.xe,I.RR,B),G=function(e,n){return e?$:n?W:V},Y=function(e,n){return n?{slug:e,limit:3,kind:(0,F.ce)().filter(function(e){return e!==C.wz.EXPENSE})}:{slug:e,limit:3,kind:(0,F.ce)()}},K=b.ZP.div.withConfig({displayName:"Budget__BudgetItemContainer",componentId:"sc-7g8coq-0"})(["",""],function(e){return!e.$isFirst&&(0,b.iv)(["border-top:1px solid #e6e8eb;"])}),X=["all","expenses","transactions"],Q=function(e,n){switch(e){case"all":return(0,U.jsx)(x.Z,{id:"SectionTransactions.All",defaultMessage:[{type:0,value:"All"}]});case"expenses":return(0,U.jsx)(x.Z,{id:"Expenses",defaultMessage:[{type:0,value:"Expenses"}]});case"transactions":return n?(0,U.jsx)(x.Z,{id:"Contributions",defaultMessage:[{type:0,value:"Contributions"}]}):(0,U.jsx)(x.Z,{id:"menu.transactions",defaultMessage:[{type:0,value:"Transactions"}]});default:return null}},J=function(e,n,t){if("expenses"===t)return n;if("transactions"===t)return e;var r=n.map(function(e){return e.id}),i=e.filter(function(e){var n;return!r.includes(null===(n=e.expense)||void 0===n?void 0:n.id)});return f()([].concat(p()(i),p()(n)),"createdAt","desc").slice(0,3)},ee=function(e){var n=e.collective,t=e.filter,r=e.hasExpenses,i=e.hasTransactions,a=e.isIndividual,o="all"===t;return"expenses"===t||o&&r&&!i?(0,U.jsx)(N.Z,{href:"".concat((0,A.x0)(n),"/").concat(a?"submitted-expenses":"expenses"),children:(0,U.jsxs)("span",{children:[(0,U.jsx)(x.Z,{id:"CollectivePage.SectionBudget.ViewAllExpenses",defaultMessage:[{type:0,value:"View all expenses"}]}),"\xa0 →"]})}):o&&a?(0,U.jsxs)(N.Z,{href:"".concat((0,A.x0)(n),"/transactions"),children:[(0,U.jsx)(x.Z,{id:"transactions.viewAll",defaultMessage:[{type:0,value:"View All Transactions"}]}),"\xa0 →"]}):"transactions"===t||o&&i&&!r?a?(0,U.jsxs)(N.Z,{href:"".concat((0,A.x0)(n),"/transactions?kind=ADDED_FUNDS,CONTRIBUTION,PLATFORM_TIP"),children:[(0,U.jsx)(x.Z,{id:"CollectivePage.SectionBudget.ViewAllContributions",defaultMessage:[{type:0,value:"View all contributions"}]}),"\xa0 →"]}):(0,U.jsxs)(N.Z,{href:"".concat((0,A.x0)(n),"/transactions"),children:[(0,U.jsx)(x.Z,{id:"CollectivePage.SectionBudget.ViewAll",defaultMessage:[{type:0,value:"View all transactions"}]})," →"]}):null},en=function(e){var n,t=e.collective,r=e.LoggedInUser,i=h.useState("all"),a=c()(i,2),o=a[0],s=a[1],u=(0,j.Sh)(t)&&!t.isHost,d=(0,y.a)(G(!!t.host,u),{variables:Y(t.slug,u),context:O.Tn}),p=d.data,m=d.refetch,f=l()(p,"transactions.nodes")||P.L,g=l()(p,"expenses.nodes")||P.L,v=[f,g,o],b=h.useMemo(function(){return J.apply(void 0,v)},v),C=!b.length&&d.loading,A=!!g.length,I=!!f.length;return h.useEffect(function(){r&&m()},[r]),(0,U.jsxs)(z.Z,{pb:4,children:[(A||I)&&(0,U.jsxs)(M.kC,{mb:3,flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",maxWidth:["100%",null,"min(748px, 55vw)"],children:[(0,U.jsx)(R.Z,{filters:X,getLabel:function(e){return Q(e,u)},selected:o,onChange:s}),(0,U.jsx)(ee,{collective:t,filter:o,hasExpenses:A,hasTransactions:I,isIndividual:u})]}),(0,U.jsxs)(M.kC,{flexDirection:["column-reverse",null,"row"],justifyContent:"space-between",alignItems:"flex-start",children:[(0,U.jsx)(T.Z,{flex:"10",mb:3,width:"100%",maxWidth:800,children:(0,U.jsx)(k.Z,{children:C?(0,U.jsx)(Z.Z,{height:300}):b.length?b.map(function(e,n){return(0,U.jsx)(K,{$isFirst:!n,children:"Expense"===e.__typename?(0,U.jsx)(w.cw,{children:(0,U.jsx)(S.Z,{expense:e,host:e.host||p.account.host,showAmountSign:!0,showProcessActions:!0})}):(0,U.jsx)(_.Z,{transaction:e,collective:t,displayActions:!0,onMutationSuccess:m})},"".concat(e.__typename,"-").concat((null==e?void 0:e.id)||n))}):(0,U.jsxs)("div",{className:"flex flex-col items-center justify-center px-1 py-[94px] text-center",children:[(0,U.jsx)(E.Z,{src:"/static/images/empty-jars.png",alt:"Empty jars",width:125,height:125}),(0,U.jsx)(D.P,{fontWeight:"500",fontSize:"20px",lineHeight:"28px",children:(0,U.jsx)(x.Z,{id:"Budget.Empty",defaultMessage:[{type:0,value:"There are no transactions yet."}]})}),(0,U.jsx)(D.P,{mt:2,fontSize:"16px",lineHeight:"24px",color:"black.600",children:(0,U.jsx)(x.Z,{id:"Budget.EmptyComeBackLater",defaultMessage:[{type:0,value:"Come back to this section once there is at least one transaction!"}]})})]})})}),(0,U.jsx)(M.xu,{width:"32px",flex:"1"}),C?(0,U.jsx)(Z.Z,{height:300}):(0,U.jsx)(H.Z,{collective:t,stats:null==p?void 0:null===(n=p.account)||void 0===n?void 0:n.stats})]})]})};en.__docgenInfo={description:"The budget section. Shows the expenses, the latest transactions and some statistics\nabut the global budget of the collective.",methods:[],displayName:"SectionBudget",props:{collective:{description:"Collective",type:{name:"shape",value:{slug:{name:"string",required:!0},name:{name:"string",required:!0},type:{name:"string",required:!0},currency:{name:"string",required:!0},isArchived:{name:"bool",required:!1},isHost:{name:"bool",required:!1},settings:{name:"object",required:!1},host:{name:"object",required:!1}}},required:!1},LoggedInUser:{description:"",type:{name:"object"},required:!1}}},n.ZP=h.memo((0,L.ns)(en))},62069:function(e,n,t){t.d(n,{Z:function(){return ei}});var r,i,a=t(49376),o=t.n(a),s=t(930),l=t.n(s),u=t(85696),c=t.n(u),d=t(3323),p=t.n(d),m=t(23279),f=t.n(m),g=t(92358),v=t.n(g),h=t(87794),y=t.n(h),x=t(67294),b=t(50319),j=t(72957),C=t(37887),P=t(59433),O=t(44012),A=t(59644),w=t(14370),S=t(30102),T=t(51506),I=t(63551),M=t(32056),E=t(69755),N=t(62612),Z=t(32222),k=t(50714),R=t(61429),D=t(1257),F=t(91749),q=t.n(F),_=t(85893);function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach(function(n){l()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var z=function(e){return(0,_.jsx)(q(),H({},e))};z.defaultProps={render:function(e,n){return(0,_.jsx)(k.ZP,H({ref:e},n))}},z.__docgenInfo={description:"",methods:[],displayName:"StyledInputMask",props:{render:{defaultValue:{value:"(ref, props) => <StyledInput ref={ref} {...props} />",computed:!1},required:!1}},composes:["./StyledInput","react-text-mask"]};var U=t(29126),B=t(29789),V=t(90374),W=t(61936),$=t(20073),G=t(72210),Y=t(24180),K=["collective","host","onSuccess","onClose"];function X(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?X(Object(t),!0).forEach(function(n){l()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var J={cardNumber:void 0,collective:void 0,expiryDate:void 0,cvv:void 0,assignee:void 0,provider:"STRIPE",cardName:void 0},ee=(0,A.Ps)(r||(r=v()(["\n  mutation AssignNewVirtualCard(\n    $virtualCard: VirtualCardInput!\n    $account: AccountReferenceInput!\n    $assignee: AccountReferenceInput!\n  ) {\n    assignNewVirtualCard(virtualCard: $virtualCard, account: $account, assignee: $assignee) {\n      id\n      name\n      last4\n      data\n    }\n  }\n"]))),en=(0,A.Ps)(i||(i=v()(["\n  query CollectiveMembers($slug: String!) {\n    account(slug: $slug) {\n      id\n      members(role: ADMIN) {\n        nodes {\n          id\n          account {\n            id\n            name\n            imageUrl\n            slug\n          }\n        }\n      }\n    }\n  }\n"]))),et=f()(function(e,n){return e({variables:n})},750),er=function(e){var n,t,r,i,a,s,u,d,m=e.collective,f=void 0===m?void 0:m,g=e.host,v=e.onSuccess,h=e.onClose,F=p()(e,K),q=(0,$.pm)().toast,L=(0,b.D)(ee,{context:A.Tn}),H=c()(L,2),X=H[0],er=H[1].loading,ei=(0,j.t)(en,{context:A.Tn}),ea=c()(ei,2),eo=ea[0],es=ea[1],el=es.loading,eu=es.data,ec=(0,P.TA)({initialValues:Q(Q({},J),{},{collective:f}),onSubmit:function(e){return o()(y().mark(function n(){var t,r,i,a,o;return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.collective,r=e.assignee,i=e.provider,a=e.cardName,o={cardNumber:e.cardNumber.replace(/\s+/g,""),cvv:e.cvv,expiryDate:e.expiryDate,expireDate:e.expiryDate},n.prev=2,n.next=5,X({variables:{virtualCard:{privateData:o,provider:i,name:a},assignee:{id:r.id},account:"string"==typeof t.id?{id:t.id}:{legacyId:t.id}}});case 5:n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(2),q({variant:"error",message:(0,_.jsx)(O.Z,{id:"Host.VirtualCards.AssignCard.Error",defaultMessage:[{type:0,value:"Error assigning card: "},{type:1,value:"error"}],values:{error:n.t0.message}})}),n.abrupt("return");case 11:null==v||v(),ef();case 13:case"end":return n.stop()}},n,null,[[2,7]])}))()},validate:function(e){var n={};return e.cardNumber?e.cardNumber.length<22&&(n.cardNumber="Card Number must have 16 digits"):n.cardNumber="Required",e.collective||(n.collective="Required"),e.provider||(n.provider="Required"),e.cardName||(n.cardName="Required"),e.assignee||(n.assignee="Required"),e.expiryDate||(n.expiryDate="Required"),e.cvv||(n.cvv="Required"),n}}),ed=(0,C.a)(Y.i,{context:A.Tn,variables:{collectiveSlug:null===(t=ec.values)||void 0===t?void 0:null===(r=t.collective)||void 0===r?void 0:r.slug,hostSlug:g.slug},skip:!(null!==(i=ec.values)&&void 0!==i&&null!==(a=i.collective)&&void 0!==a&&a.slug)}),ep=ed.data,em=ed.loading;(0,x.useEffect)(function(){var e;null!==(e=ec.values.collective)&&void 0!==e&&e.slug&&et(eo,{slug:ec.values.collective.slug})},[ec.values.collective]);var ef=function(){ec.resetForm(J),ec.setErrors({}),null==h||h()},eg=(n=o()(y().mark(function e(n){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ec.setFieldValue("collective",n.value),ec.setFieldValue("assignee",null);case 2:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),ev=null==eu?void 0:null===(s=eu.account)||void 0===s?void 0:s.members.nodes.map(function(e){return e.account});return(0,_.jsx)(B.ZP,Q(Q({width:"382px",onClose:ef,trapFocus:!0},F),{},{children:(0,_.jsxs)("form",{onSubmit:ec.handleSubmit,children:[(0,_.jsx)(B.xB,{onClose:ef,children:(0,_.jsx)(O.Z,{id:"Host.VirtualCards.AssignCard",defaultMessage:[{type:0,value:"Assign Card"}]})}),(0,_.jsxs)(B.fe,{pt:2,children:[(0,_.jsx)(W.P,{children:(0,_.jsx)(O.Z,{id:"Host.VirtualCards.AssignCard.Description",defaultMessage:[{type:0,value:"Assign existing card to a collective sharing the private information below."}]})}),(0,_.jsx)(Z.Z,{borderColor:"black.300",mt:3}),(0,_.jsxs)(I.rj,{mt:3,gridTemplateColumns:"repeat(2, 1fr)",gridGap:"26px 8px",children:[(0,_.jsx)(R.Z,{gridColumn:"1/3",labelFontSize:"13px",label:(0,_.jsx)(O.Z,{id:"goAEwY",defaultMessage:[{type:0,value:"Which collective will be assigned to this card?"}]}),htmlFor:"collective",error:ec.touched.collective&&ec.errors.collective,children:function(e){return(0,_.jsx)(S.Z,Q(Q({},e),{},{hostCollectiveIds:[g.legacyId],name:"collective",id:"collective",collective:ec.values.collective,isDisabled:!!f||er,customOptions:[l()({value:g,label:g.name},w.rA,!0)],onChange:eg,filterResults:function(e){return e.filter(function(e){return e.isActive})}}))}}),ep&&ep.host.allCards.totalCount>0&&(0,_.jsx)(I.xu,{gridColumn:"1/3",children:(0,_.jsxs)(E.Z,{type:ep.host.cardsMissingReceipts.totalCount>0?"error":"warning",children:[(0,_.jsx)(O.Z,{id:"Ox+jio",defaultMessage:[{type:0,value:"This collective already has "},{type:1,value:"allCardsCount"},{type:0,value:" other cards assigned to it. "},{type:6,value:"missingReceiptsCardsCount",options:{"=0":{value:[]},other:{value:[{type:7},{type:0,value:" of the "},{type:1,value:"allCardsCount"},{type:0,value:" cards have missing receipts."}]}},offset:0,pluralType:"cardinal"}],values:{allCardsCount:ep.host.allCards.totalCount,missingReceiptsCardsCount:ep.host.cardsMissingReceipts.totalCount}}),(0,_.jsx)(I.xu,{mt:3,children:(0,_.jsx)(U.Z,{href:"/".concat(g.slug,"/admin/host-virtual-cards?collective=").concat(null===(u=ec.values)||void 0===u?void 0:null===(d=u.collective)||void 0===d?void 0:d.slug),children:(0,_.jsx)(O.Z,{id:"PO4Kx4",defaultMessage:[{type:0,value:"View Assigned Cards"}]})})})]})}),(0,_.jsx)(R.Z,{gridColumn:"1/3",labelFontSize:"13px",label:(0,_.jsx)(O.Z,{id:"vwk9m4",defaultMessage:[{type:0,value:"Which user will be responsible for this card?"}]}),htmlFor:"assignee",error:ec.touched.assignee&&ec.errors.assignee,children:function(e){return(0,_.jsx)(w.ZP,Q(Q({},e),{},{name:"assignee",id:"assignee",groupByType:!1,collectives:ev,collective:ec.values.assignee,isDisabled:el||er,onChange:function(e){return ec.setFieldValue("assignee",e.value)}}))}}),(0,_.jsx)(R.Z,{gridColumn:"1/3",labelFontSize:"13px",label:"What payment provider do you use for this card?",htmlFor:"provider",error:ec.touched.provider&&ec.errors.provider,children:function(e){return(0,_.jsx)(V.ZP,Q(Q({},e),{},{id:"provider",inputId:"provider",placeholder:"Select",options:[{key:"STRIPE",value:"STRIPE",label:"Stripe"}],isSearchable:!1,disabled:!0,value:{key:"STRIPE",value:"STRIPE",label:"Stripe"},onChange:function(e){return ec.setFieldValue("provider",e.value)}}))}}),(0,_.jsx)(R.Z,{gridColumn:"1/3",labelFontSize:"13px",label:(0,_.jsx)(O.Z,{id:"8oufoc",defaultMessage:[{type:0,value:"Card name"}]}),htmlFor:"cardName",error:ec.touched.cardName&&ec.errors.cardName,children:function(e){return(0,_.jsx)(k.ZP,Q(Q({},e),{},{name:"cardName",id:"cardName",onChange:ec.handleChange,value:ec.values.cardName,disabled:er,guide:!1}))}}),(0,_.jsx)(R.Z,{gridColumn:"1/3",labelFontSize:"13px",label:(0,_.jsx)(O.Z,{id:"qBST+n",defaultMessage:[{type:0,value:"Card number"}]}),htmlFor:"number",error:ec.touched.cardNumber&&ec.errors.cardNumber,children:function(e){return(0,_.jsx)(z,Q(Q({},e),{},{name:"cardNumber",id:"cardNumber",onChange:ec.handleChange,value:ec.values.cardNumber,mask:[/\d/,/\d/,/\d/,/\d/," "," ",/\d/,/\d/,/\d/,/\d/," "," ",/\d/,/\d/,/\d/,/\d/," "," ",/\d/,/\d/,/\d/,/\d/],render:function(e,n){return(0,_.jsx)(D.Z,Q({prepend:(0,_.jsx)(M.Z,{height:"18px",style:{marginTop:"-1px"}}),prependProps:{bg:"transparent",ml:2},innerRef:e},n))},disabled:er,guide:!1}))}}),(0,_.jsx)(R.Z,{labelFontSize:"13px",label:(0,_.jsx)(O.Z,{id:"x/oJ17",defaultMessage:[{type:0,value:"Expiry date"}]}),htmlFor:"expiryDate",error:ec.touched.expiryDate&&ec.errors.expiryDate,children:function(e){return(0,_.jsx)(z,Q(Q({},e),{},{name:"expiryDate",id:"expiryDate",onChange:ec.handleChange,value:ec.values.expiryDate,mask:[/[01]/,/\d/,"/","2","0",/\d/,/\d/],placeholder:"MM/YYYY",guide:!1,disabled:er}))}}),(0,_.jsx)(R.Z,{labelFontSize:"13px",label:(0,_.jsx)(O.Z,{id:"Q0lxqm",defaultMessage:[{type:0,value:"CVV/CVC"}]}),htmlFor:"cvv",error:ec.touched.cvv&&ec.errors.cvv,children:function(e){return(0,_.jsx)(z,Q(Q({},e),{},{id:"cvv",name:"cvv",onChange:ec.handleChange,value:ec.values.cvv,mask:[/\d/,/\d/,/\d/],guide:!1,placeholder:"123",disabled:er}))}})]}),(0,_.jsx)(I.xu,{mt:3,children:(0,_.jsx)(G.Q,{})})]}),(0,_.jsx)(B.mz,{isFullWidth:!0,children:(0,_.jsx)(T.Z,{display:"flex",justifyContent:["center","flex-end"],flexWrap:"Wrap",children:(0,_.jsx)(N.Z,{my:1,minWidth:140,buttonStyle:"primary",loading:er,disabled:em,type:"submit",textTransform:"capitalize",children:(0,_.jsx)(O.Z,{id:"SaveCard",defaultMessage:[{type:0,value:"Save Card"}]})})})})]})}))};er.__docgenInfo={description:"",methods:[],displayName:"AssignVirtualCardModal",props:{collective:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"shape",value:{slug:{name:"string",required:!1},id:{name:"union",value:[{name:"number"},{name:"string"}],required:!1},type:{name:"string",required:!1},name:{name:"string",required:!1},imageUrl:{name:"string",required:!1}}},required:!1},onClose:{description:"",type:{name:"func"},required:!1},onSuccess:{description:"",type:{name:"func"},required:!1},host:{description:"",type:{name:"shape",value:{legacyId:{name:"number",required:!1},slug:{name:"string",required:!1},id:{name:"union",value:[{name:"number"},{name:"string"}],required:!1},type:{name:"string",required:!1},name:{name:"string",required:!1},imageUrl:{name:"string",required:!1}}},required:!0}}};var ei=er},24180:function(e,n,t){t.d(n,{Z:function(){return eo},i:function(){return er}});var r,i,a,o,s,l=t(930),u=t.n(l),c=t(49376),d=t.n(c),p=t(85696),m=t.n(p),f=t(23279),g=t.n(f),v=t(92358),h=t.n(v),y=t(87794),x=t.n(y),b=t(67294),j=t(37887),C=t(50319),P=t(72957),O=t(28687),A=t(59433),w=t(44012),S=t(86896),T=t(40239),I=t(74197),M=t(59644),E=t(71698),N=t(7706),Z=t(62929),k=t(14370),R=t(30102),D=t(63551),F=t(7136),q=t(48900),_=t(69755),L=t(62612),H=t(32222),z=t(50714),U=t(94044),B=t(61429),V=t(29126),W=t(29789),$=t(90374),G=t(61936),Y=t(20073),K=t(72210),X=t(85893);function Q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function J(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Q(Object(t),!0).forEach(function(n){u()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ee=(0,M.Ps)(r||(r=h()(["\n  mutation EditVirtualCard(\n    $virtualCard: VirtualCardReferenceInput!\n    $name: String!\n    $limitAmount: AmountInput\n    $limitInterval: VirtualCardLimitInterval\n    $assignee: AccountReferenceInput!\n  ) {\n    editVirtualCard(\n      virtualCard: $virtualCard\n      name: $name\n      limitAmount: $limitAmount\n      limitInterval: $limitInterval\n      assignee: $assignee\n    ) {\n      id\n      name\n      spendingLimitAmount\n      spendingLimitInterval\n      assignee {\n        id\n        name\n        slug\n        imageUrl\n      }\n    }\n  }\n"]))),en=(0,M.Ps)(i||(i=h()(["\n  mutation CreateVirtualCard(\n    $name: String!\n    $limitAmount: AmountInput!\n    $limitInterval: VirtualCardLimitInterval!\n    $account: AccountReferenceInput!\n    $assignee: AccountReferenceInput!\n    $virtualCardRequest: VirtualCardRequestReferenceInput\n  ) {\n    createVirtualCard(\n      name: $name\n      limitAmount: $limitAmount\n      limitInterval: $limitInterval\n      account: $account\n      assignee: $assignee\n      virtualCardRequest: $virtualCardRequest\n    ) {\n      id\n      name\n      last4\n      data\n      virtualCardRequest {\n        id\n        status\n      }\n    }\n  }\n"]))),et=(0,M.Ps)(a||(a=h()(["\n  query CollectiveMembers($slug: String!) {\n    account(slug: $slug) {\n      id\n      members(role: ADMIN) {\n        nodes {\n          id\n          account {\n            id\n            name\n            imageUrl\n            slug\n          }\n        }\n      }\n    }\n  }\n"]))),er=(0,M.Ps)(o||(o=h()(["\n  query VirtualCardsAssignedToCollective($hostSlug: String!, $collectiveSlug: String!) {\n    host(slug: $hostSlug) {\n      id\n      allCards: hostedVirtualCards(collectiveAccountIds: [{ slug: $collectiveSlug }], status: [ACTIVE, INACTIVE]) {\n        totalCount\n      }\n      cardsMissingReceipts: hostedVirtualCards(\n        collectiveAccountIds: [{ slug: $collectiveSlug }]\n        status: [ACTIVE, INACTIVE]\n        hasMissingReceipts: true\n      ) {\n        totalCount\n      }\n    }\n  }\n"]))),ei=(0,M.Ps)(s||(s=h()(["\n  query VirtualCardPolicies($slug: String) {\n    account(slug: $slug) {\n      id\n      policies {\n        id\n        MAXIMUM_VIRTUAL_CARD_LIMIT_AMOUNT_FOR_INTERVAL {\n          ALL_TIME {\n            valueInCents\n          }\n          DAILY {\n            valueInCents\n          }\n          MONTHLY {\n            valueInCents\n          }\n          PER_AUTHORIZATION {\n            valueInCents\n          }\n          WEEKLY {\n            valueInCents\n          }\n          YEARLY {\n            valueInCents\n          }\n        }\n      }\n    }\n  }\n"]))),ea=g()(function(e,n){return e({variables:n})},750);function eo(e){var n,t,r,i,a,o,s,l,c,p,f,g,v=e.host,h=e.collective,y=e.virtualCard,Q=e.onSuccess,eo=e.onClose,es=e.modalProps,el=e.virtualCardRequest,eu=(0,Y.pm)().toast,ec=(0,j.a)(ei,{context:M.Tn,variables:{slug:v.slug}}),ed=ec.data,ep=ec.loading,em=null==ed?void 0:null===(n=ed.account)||void 0===n?void 0:null===(t=n.policies)||void 0===t?void 0:t.MAXIMUM_VIRTUAL_CARD_LIMIT_AMOUNT_FOR_INTERVAL,ef=null!=y&&!!y.id,eg=ef?ee:en,ev=(0,C.D)(eg,{context:M.Tn}),eh=m()(ev,2),ey=eh[0],ex=eh[1].loading,eb=(0,P.t)(et,{context:M.Tn}),ej=m()(eb,2),eC=ej[0],eP=ej[1],eO=eP.loading,eA=eP.data,ew=(0,N.Z)().LoggedInUser,eS=(null==ew?void 0:ew.hasRole(T.Z.ADMIN,v))&&(!ef||"STRIPE"===y.provider),eT=null!==(r=null!==(i=null==y?void 0:y.currency)&&void 0!==i?i:v.currency)&&void 0!==r?r:"USD",eI=(0,A.TA)({initialValues:{collective:ef?void 0:h,cardName:null==y?void 0:y.name,assignee:null==y?void 0:y.assignee,limitAmount:eS?null==y?void 0:y.spendingLimitAmount:void 0,limitInterval:eS?null!==(a=null==y?void 0:y.spendingLimitInterval)&&void 0!==a?a:E.nV4.MONTHLY:void 0},onSubmit:function(e){return d()(x().mark(function n(){var t,r,i,a,o,s;return x().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.assignee,r=e.cardName,i=e.limitAmount,a=e.limitInterval,o=e.collective,n.prev=1,s={virtualCard:ef?{id:y.id}:void 0,account:ef?void 0:"string"==typeof o.id?{id:o.id}:{legacyId:o.id},name:r,assignee:{id:t.id},limitAmount:void 0,limitInterval:void 0,virtualCardRequest:el?{id:el.id}:void 0},eS&&(s.limitAmount={currency:eT,valueInCents:i,value:i/100},s.limitInterval=a),n.next=6,ey({variables:s});case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(1),eu({variant:"error",message:(0,X.jsx)(w.Z,{id:"FAV3Ng",defaultMessage:[{type:0,value:"Error submiting form: "},{type:1,value:"error"}],values:{error:n.t0.message}})}),n.abrupt("return");case 12:null==Q||Q((0,X.jsx)(w.Z,{id:"Nd9ioQ",defaultMessage:[{type:0,value:"Card successfully updated"}]})),eR();case 14:case"end":return n.stop()}},n,null,[[1,8]])}))()},validate:function(e){var n={};if(ef||e.collective||(n.collective="Required"),e.assignee||(n.assignee="Required"),e.cardName||(n.cardName="Required"),eS&&!e.limitAmount&&(n.limitAmount="Required"),e.limitInterval){var t=(0,I.kJ)(em[e.limitInterval]);e.limitAmount>100*t&&(n.limitAmount="Limit for this interval should not exceed ".concat(t," ").concat(eT))}return n}}),eM=(0,j.a)(er,{context:M.Tn,variables:{collectiveSlug:null===(o=eI.values)||void 0===o?void 0:null===(s=o.collective)||void 0===s?void 0:s.slug,hostSlug:v.slug},skip:!(null!==(l=eI.values)&&void 0!==l&&null!==(c=l.collective)&&void 0!==c&&c.slug)}),eE=eM.data,eN=eM.loading,eZ=ef?y.account:eI.values.collective;(0,b.useEffect)(function(){null!=eZ&&eZ.slug&&ea(eC,{slug:eZ.slug})},[eZ]);var ek=(0,S.Z)(),eR=function(){null==eo||eo()},eD=Object.keys(E.nV4).map(function(e){return{value:e,label:ek.formatMessage(Z.vb[e])}}),eF=null==eA?void 0:null===(p=eA.account)||void 0===p?void 0:p.members.nodes.map(function(e){return e.account});return(0,X.jsx)(W.ZP,J(J({width:"420px",onClose:eR,trapFocus:!0},es),{},{children:(0,X.jsxs)("form",{onSubmit:eI.handleSubmit,children:[(0,X.jsx)(W.xB,{onClose:eR,hideCloseIcon:!1,children:ef?(0,X.jsx)(w.Z,{id:"TtzWuE",defaultMessage:[{type:0,value:"Edit virtual card"}]}):(0,X.jsx)(w.Z,{id:"FRM4fb",defaultMessage:[{type:0,value:"Create virtual card"}]})}),(0,X.jsxs)(W.fe,{pt:2,children:[(0,X.jsx)(G.P,{children:ef?(0,X.jsx)(w.Z,{id:"9nfFQ7",defaultMessage:[{type:0,value:"Edit virtual card for a collective with the information below."}]}):(0,X.jsx)(w.Z,{id:"NW8fj9",defaultMessage:[{type:0,value:"Create virtual card for a collective with the information below."}]})}),(0,X.jsx)(H.Z,{borderColor:"black.300",mt:3}),(0,X.jsxs)(D.kC,{flexDirection:"column",mt:3,children:[!ef&&(0,X.jsxs)(b.Fragment,{children:[(0,X.jsx)(B.Z,{mb:3,labelFontSize:"13px",labelFontWeight:"bold",label:(0,X.jsx)(w.Z,{id:"goAEwY",defaultMessage:[{type:0,value:"Which collective will be assigned to this card?"}]}),htmlFor:"collective",error:eI.touched.collective&&eI.errors.collective,children:function(e){return(0,X.jsx)(R.Z,J(J({},e),{},{hostCollectiveIds:[v.legacyId],name:"collective",id:"collective",collective:eI.values.collective,isDisabled:!!h||ex,customOptions:[u()({value:v,label:v.name},k.rA,!0)],onChange:function(e){eI.setFieldValue("collective",e.value),eI.setFieldValue("assignee",null)},filterResults:function(e){return e.filter(function(e){return e.isActive})}}))}}),eE&&eE.host.allCards.totalCount>0&&(0,X.jsxs)(_.Z,{mb:3,type:eE.host.cardsMissingReceipts.totalCount>0?"error":"warning",children:[(0,X.jsx)(w.Z,{id:"Ox+jio",defaultMessage:[{type:0,value:"This collective already has "},{type:1,value:"allCardsCount"},{type:0,value:" other cards assigned to it. "},{type:6,value:"missingReceiptsCardsCount",options:{"=0":{value:[]},other:{value:[{type:7},{type:0,value:" of the "},{type:1,value:"allCardsCount"},{type:0,value:" cards have missing receipts."}]}},offset:0,pluralType:"cardinal"}],values:{allCardsCount:eE.host.allCards.totalCount,missingReceiptsCardsCount:eE.host.cardsMissingReceipts.totalCount}}),(0,X.jsx)(D.xu,{mt:3,children:(0,X.jsx)(V.Z,{href:"/".concat(v.slug,"/admin/host-virtual-cards?collective=").concat(null===(f=eI.values)||void 0===f?void 0:null===(g=f.collective)||void 0===g?void 0:g.slug),children:(0,X.jsx)(w.Z,{id:"PO4Kx4",defaultMessage:[{type:0,value:"View Assigned Cards"}]})})})]})]}),(0,X.jsx)(B.Z,{labelFontSize:"13px",labelFontWeight:"bold",label:(0,X.jsx)(w.Z,{id:"agYvVC",defaultMessage:[{type:0,value:"Who is this card assigned to?"}]}),htmlFor:"assignee",error:eI.touched.assignee&&eI.errors.assignee,children:function(e){return(0,X.jsx)(k.ZP,J(J({},e),{},{name:"assignee",id:"assignee",groupByType:!1,collectives:eF,collective:eI.values.assignee,isDisabled:eO||ex,onChange:function(e){return eI.setFieldValue("assignee",e.value)}}))}}),(0,X.jsx)(B.Z,{mt:3,labelFontWeight:"bold",labelFontSize:"13px",label:(0,X.jsx)(w.Z,{id:"8oufoc",defaultMessage:[{type:0,value:"Card name"}]}),htmlFor:"cardName",error:eI.touched.cardName&&eI.errors.cardName,children:function(e){return(0,X.jsx)(z.ZP,J(J({},e),{},{name:"cardName",id:"cardName",placeholder:ek.formatMessage({id:"vREsbj",defaultMessage:[{type:0,value:"e.g Card for Subscription"}]}),onChange:eI.handleChange,value:eI.values.cardName,disabled:ex,guide:!1}))}}),eS&&(0,X.jsxs)(b.Fragment,{children:[(0,X.jsxs)(D.kC,{mt:3,width:"100%",alignItems:"flex-start",justifyContent:"space-between",children:[(0,X.jsx)(B.Z,{flex:"1 1 60%",labelFontSize:"13px",labelFontWeight:"bold",label:(0,X.jsx)(w.Z,{id:"vV7hmB",defaultMessage:[{type:0,value:"Limit Interval "},{type:8,value:"link",children:[{type:0,value:"(Read More)"}]}],values:{link:(0,F.fw)({as:q.Z,openInNewTab:!0,href:"https://docs.opencollective.com/help/expenses-and-getting-paid/virtual-cards"})}}),htmlFor:"limitInterval",children:function(e){return(0,X.jsx)($.ZP,J(J({},e),{},{inputId:"limitInterval",error:eI.touched.limitAmount&&!!eI.errors.limitAmount,onBlur:function(){return eI.setFieldTouched("limitInterval",!0)},onChange:function(e){var n=e.value;return eI.setFieldValue("limitInterval",n)},isLoading:ex,options:eD,value:eD.find(function(e){return e.value===eI.values.limitInterval})}))}}),(0,X.jsx)(B.Z,{ml:3,labelFontSize:"13px",labelFontWeight:"bold",label:(0,X.jsx)(w.Z,{id:"ehbxf1",defaultMessage:[{type:0,value:"Card Limit"}]}),htmlFor:"limitAmount",children:function(e){return(0,X.jsx)(U.Z,J(J({},e),{},{id:"limitAmount",placeholder:"0.00",error:eI.touched.limitAmount&&!!eI.errors.limitAmount,currency:eT,prepend:eT,onChange:function(e){return eI.setFieldValue("limitAmount",e)},value:eI.values.limitAmount,disabled:ex}))}})]}),(0,X.jsx)(D.xu,{pt:2,children:(0,X.jsx)(G.Dr,{ml:1,children:ek.formatMessage(Z.hY[eI.values.limitInterval])})}),eI.touched.limitAmount&&eI.errors.limitAmount&&(0,X.jsxs)(D.xu,{pt:2,children:[(0,X.jsx)(O.b,{color:"#E03F6A",size:16}),(0,X.jsx)(G.Dr,{ml:1,color:"black.700",fontSize:"14px",children:eI.errors.limitAmount})]})]})]}),(0,X.jsx)(D.xu,{mt:3,children:(0,X.jsx)(K.Q,{})})]}),(0,X.jsx)(W.mz,{isFullWidth:!0,children:(0,X.jsx)(D.kC,{justifyContent:"flex-end",flexWrap:"wrap",children:(0,X.jsx)(L.Z,{my:1,minWidth:140,buttonStyle:"primary",loading:ex,disabled:ep||eN,type:"submit",textTransform:"capitalize",children:ef?(0,X.jsx)(w.Z,{id:"actions.update",defaultMessage:[{type:0,value:"Update"}]}):(0,X.jsx)(w.Z,{id:"FRM4fb",defaultMessage:[{type:0,value:"Create virtual card"}]})})})})]})}))}eo.__docgenInfo={description:"",methods:[],displayName:"EditVirtualCardModal",props:{host:{required:!0,tsType:{name:"Account"},description:""},collective:{required:!1,tsType:{name:"Account"},description:""},virtualCard:{required:!1,tsType:{name:"VirtualCard"},description:""},virtualCardRequest:{required:!1,tsType:{name:"VirtualCardRequest"},description:""},onSuccess:{required:!0,tsType:{name:"signature",type:"function",raw:"(el: React.ReactNode) => void",signature:{arguments:[{name:"el",type:{name:"ReactReactNode",raw:"React.ReactNode"}}],return:{name:"void"}}},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},modalProps:{required:!1,tsType:{name:"any"},description:""}}}},24962:function(e,n,t){t.d(n,{d:function(){return A}});var r=t(49376),i=t.n(r),a=t(85696),o=t.n(a),s=t(87794),l=t.n(s);t(67294);var u=t(50319),c=t(8971),d=t(44012),p=t(86896),m=t(32324),f=t(59644),g=t(66629),v=t(14876),h=t(10683),y=t(20073),x=t(84037),b=t(41899),j=t(85893),C=(0,g.cn)("red rounded-lg bg-neutral-100 px-3 py-1  text-xs font-medium text-neutral-800"),P=function(e){return e?e?e.friendlyName||e.name:void 0:(0,j.jsx)(d.Z,{id:"accountingCategory.doNotKnow",defaultMessage:[{type:0,value:"Unknown category"}]})},O=function(e){var n,t=e.expense,r=e.account,a=e.host,s=e.allowNone,d=e.showCodeInSelect,O=(0,p.Z)(),A=(0,u.D)(x.Z,{context:f.Tn}),w=o()(A,2),S=w[0],T=w[1].loading,I=(0,y.pm)().toast;return(0,j.jsx)(b.Z,{id:"expense-summary-category-select",host:a,account:r,expenseType:t.type,expenseValues:t,allowNone:s,selectedCategory:t.accountingCategory,valuesByRole:t.valuesByRole,showCode:d,predictionStyle:"inline",onChange:(n=i()(l().mark(function e(n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S({variables:{expenseId:t.id,category:n?{id:n.id}:null}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),I({variant:"error",message:(0,m.t2)(O,e.t0)});case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(e){return n.apply(this,arguments)}),children:(0,j.jsxs)(h.z,{className:(0,g.cn)(C,"h-auto hover:bg-neutral-50 hover:opacity-90"),children:[(0,j.jsx)("span",{className:"mr-1",children:P(t.accountingCategory)}),T?(0,j.jsx)(v.Z,{size:"1em"}):(0,j.jsx)(c.Z,{size:"1em"})]})})},A=function(e){var n=e.expense,t=e.host,r=e.account,i=e.canEdit,a=e.allowNone,o=e.showCodeInSelect;return i&&t?(0,j.jsx)(O,{expense:n,account:r,host:t,allowNone:a,showCodeInSelect:void 0!==o&&o}):(0,j.jsx)("div",{className:C,children:P(n.accountingCategory)})};A.__docgenInfo={description:"",methods:[],displayName:"AccountingCategoryPill",props:{showCodeInSelect:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Whether to show the category code in the select"},expense:{required:!0,tsType:{name:"Expense"},description:""},canEdit:{required:!0,tsType:{name:"boolean"},description:""},account:{required:!0,tsType:{name:"Account"},description:""},host:{required:!0,tsType:{name:"Host"},description:""},allowNone:{required:!1,tsType:{name:"boolean"},description:'Whether to allow the user to select "I don\'t know"'}}}},13024:function(e,n,t){t.d(n,{Z:function(){return O}});var r=t(49376),i=t.n(r),a=t(85696),o=t.n(a),s=t(87794),l=t.n(s),u=t(67294),c=t(91850),d=t(86896),p=t(44012),m=t(32324),f=t(9830),g=t(63551),v=t(65842),h=t(62612),y=t(29789),x=t(61936),b=t(20073),j=t(85893),C=(0,c.defineMessages)({reasonPlaceholder:{id:"g0KLMH",defaultMessage:[{type:0,value:"e.g. Email Address is wrong"}]},REQUEST_RE_APPROVAL_TITLE:{id:"expense.requestReApproval.btn",defaultMessage:[{type:0,value:"Request re-approval"}]},REQUEST_RE_APPROVAL_DESCRIPTION:{id:"jD5/NS",defaultMessage:[{type:0,value:"Please mention the reason why this expense requires re-approval. The reason will be shared with the user and also be documented as a comment under the expense."}]},REQUEST_RE_APPROVAL_CONFIRM_BUTTON:{id:"UrUS9j",defaultMessage:[{type:0,value:"Confirm and request re-approval"}]},MARK_AS_INCOMPLETE_TITLE:{id:"hu7oaH",defaultMessage:[{type:0,value:"Mark as incomplete"}]},MARK_AS_INCOMPLETE_DESCRIPTION:{id:"x7D8vH",defaultMessage:[{type:0,value:"Please mention the reason why this expense has been marked as incomplete. The reason will be shared with the user and also be documented as a comment under the expense."}]},MARK_AS_INCOMPLETE_CONFIRM_BUTTON:{id:"lNyyJU",defaultMessage:[{type:0,value:"Confirm and mark as incomplete"}]},APPROVE_TITLE:{id:"actions.approve",defaultMessage:[{type:0,value:"Approve"}]},APPROVE_DESCRIPTION:{id:"xmVXUM",defaultMessage:[{type:0,value:"You may add a note that will be shared with the user and also be documented as a comment under the expense."}]},APPROVE_CONFIRM_BUTTON:{id:"actions.approve",defaultMessage:[{type:0,value:"Approve"}]},UNAPPROVE_TITLE:{id:"expense.unapprove.btn",defaultMessage:[{type:0,value:"Unapprove"}]},UNAPPROVE_DESCRIPTION:{id:"SREb+h",defaultMessage:[{type:0,value:"Please mention the reason why this expense has been unapproved. The reason will be shared with the user and also be documented as a comment under the expense."}]},UNAPPROVE_CONFIRM_BUTTON:{id:"expense.unapprove.btn",defaultMessage:[{type:0,value:"Unapprove"}]},REJECT_TITLE:{id:"actions.reject",defaultMessage:[{type:0,value:"Reject"}]},REJECT_DESCRIPTION:{id:"aOO6yW",defaultMessage:[{type:0,value:"Please mention the reason why this expense has been rejected. The reason will be shared with the user and also be documented as a comment under the expense."}]},REJECT_CONFIRM_BUTTON:{id:"actions.reject",defaultMessage:[{type:0,value:"Reject"}]},HOLD_TITLE:{id:"FXOuRH",defaultMessage:[{type:0,value:"Put expense on hold"}]},HOLD_DESCRIPTION:{id:"aE2FPd",defaultMessage:[{type:0,value:"Expense is still approved but can not be paid out until it is released. Expense is also not displayed in ready to pay."}]},HOLD_CONFIRM_BUTTON:{id:"+pCc8I",defaultMessage:[{type:0,value:"Put on Hold"}]},RELEASE_TITLE:{id:"actions.release",defaultMessage:[{type:0,value:"Release Hold"}]},RELEASE_DESCRIPTION:{id:"zIsgw6",defaultMessage:[{type:0,value:"Expense can be paid out and is displayed in ready to pay list."}]},RELEASE_CONFIRM_BUTTON:{id:"actions.release",defaultMessage:[{type:0,value:"Release Hold"}]},MARK_AS_SPAM_TITLE:{id:"actions.spam",defaultMessage:[{type:0,value:"Mark as Spam"}]},MARK_AS_SPAM_DESCRIPTION:{id:"Expense.MarkAsSpamWarning",defaultMessage:[{type:0,value:"This will prevent the submitter account to post new expenses. Are you sure?"}]},MARK_AS_SPAM_CONFIRM_BUTTON:{id:"actions.spam",defaultMessage:[{type:0,value:"Mark as Spam"}]}}),P={REQUEST_RE_APPROVAL:{title:C.REQUEST_RE_APPROVAL_TITLE,description:C.REQUEST_RE_APPROVAL_DESCRIPTION,confirmBtn:C.REQUEST_RE_APPROVAL_CONFIRM_BUTTON},MARK_AS_INCOMPLETE:{title:C.MARK_AS_INCOMPLETE_TITLE,description:C.MARK_AS_INCOMPLETE_DESCRIPTION,confirmBtn:C.MARK_AS_INCOMPLETE_CONFIRM_BUTTON},APPROVE:{title:C.APPROVE_TITLE,description:C.APPROVE_DESCRIPTION,confirmBtn:C.APPROVE_CONFIRM_BUTTON},UNAPPROVE:{title:C.UNAPPROVE_TITLE,description:C.UNAPPROVE_DESCRIPTION,confirmBtn:C.UNAPPROVE_CONFIRM_BUTTON},REJECT:{title:C.REJECT_TITLE,description:C.REJECT_DESCRIPTION,confirmBtn:C.REJECT_CONFIRM_BUTTON},HOLD:{title:C.HOLD_TITLE,description:C.HOLD_DESCRIPTION,confirmBtn:C.HOLD_CONFIRM_BUTTON},RELEASE:{title:C.RELEASE_TITLE,description:C.RELEASE_DESCRIPTION,confirmBtn:C.RELEASE_CONFIRM_BUTTON},MARK_AS_SPAM:{title:C.MARK_AS_SPAM_TITLE,description:C.MARK_AS_SPAM_DESCRIPTION,confirmBtn:C.MARK_AS_SPAM_CONFIRM_BUTTON}};function O(e){var n=e.type,t=e.onClose,r=e.expense,a=(0,d.Z)(),s=u.useState(),c=o()(s,2),O=c[0],A=c[1],w=u.useState(!1),S=o()(w,2),T=S[0],I=S[1],M=(0,f.Z)({expense:r}),E=u.useCallback(i()(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=n,e.next="MARK_AS_INCOMPLETE"===e.t0?4:"REQUEST_RE_APPROVAL"===e.t0?7:"APPROVE"===e.t0?10:"UNAPPROVE"===e.t0?13:"REJECT"===e.t0?16:"HOLD"===e.t0?19:"RELEASE"===e.t0?22:"MARK_AS_SPAM"===e.t0?25:28;break;case 4:return e.next=6,M.markAsIncomplete({message:O});case 6:case 9:case 12:case 15:case 18:case 21:case 24:case 27:return e.abrupt("break",28);case 7:return e.next=9,M.requestReApproval({message:O});case 10:return e.next=12,M.approve({message:O});case 13:return e.next=15,M.unapprove({message:O});case 16:return e.next=18,M.reject({message:O});case 19:return e.next=21,M.hold({message:O});case 22:return e.next=24,M.release({message:O});case 25:return e.next=27,M.markAsSpam({message:O});case 28:t(),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(0),(0,b.Am)({variant:"error",message:(0,m.t2)(a,e.t1)});case 34:case"end":return e.stop()}},e,null,[[0,31]])})),[n,O,a,M]);return(0,j.jsxs)(y.ZP,{role:"alertdialog",width:"432px",onClose:t,trapFocus:!0,children:[(0,j.jsx)(y.xB,{children:a.formatMessage(P[n].title)}),(0,j.jsxs)(y.fe,{pt:2,children:[(0,j.jsx)(x.P,{mb:3,color:"black.700",lineHeight:"20px",children:a.formatMessage(P[n].description)}),(0,j.jsx)(v.default,{kind:"COMMENT",version:"simplified",withBorders:!0,editorMinHeight:150,placeholder:a.formatMessage(C.reasonPlaceholder),fontSize:"13px",onChange:function(e){return A(e.target.value)},setUploading:I})]}),(0,j.jsx)(y.mz,{children:(0,j.jsxs)(g.kC,{gap:"16px",justifyContent:"flex-end",children:[(0,j.jsx)(h.Z,{disabled:T,buttonStyle:"secondary",buttonSize:"small",onClick:E,minWidth:180,loading:T||M.loading,children:a.formatMessage(P[n].confirmBtn)}),(0,j.jsx)(h.Z,{buttonStyle:"standard",buttonSize:"small",onClick:t,children:(0,j.jsx)(p.Z,{id:"actions.cancel",defaultMessage:[{type:0,value:"Cancel"}]})})]})})]})}O.__docgenInfo={description:"",methods:[],displayName:"ConfirmProcessExpenseModal",props:{type:{required:!0,tsType:{name:"union",raw:"| 'REQUEST_RE_APPROVAL'\n| 'MARK_AS_INCOMPLETE'\n| 'MARK_AS_SPAM'\n| 'APPROVE'\n| 'UNAPPROVE'\n| 'REJECT'\n| 'HOLD'\n| 'RELEASE'",elements:[{name:"literal",value:"'REQUEST_RE_APPROVAL'"},{name:"literal",value:"'MARK_AS_INCOMPLETE'"},{name:"literal",value:"'MARK_AS_SPAM'"},{name:"literal",value:"'APPROVE'"},{name:"literal",value:"'UNAPPROVE'"},{name:"literal",value:"'REJECT'"},{name:"literal",value:"'HOLD'"},{name:"literal",value:"'RELEASE'"}]},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},expense:{required:!0,tsType:{name:"Pick",elements:[{name:"Expense"},{name:"union",raw:"'id' | 'legacyId' | 'permissions'",elements:[{name:"literal",value:"'id'"},{name:"literal",value:"'legacyId'"},{name:"literal",value:"'permissions'"}]}],raw:"Pick<Expense, 'id' | 'legacyId' | 'permissions'>"},description:""}}}},41899:function(e,n,t){t.d(n,{Z:function(){return G},w:function(){return U}});var r,i=t(84238),a=t.n(i),o=t(930),s=t.n(o),l=t(85696),u=t.n(l),c=t(23493),d=t.n(c),p=t(82729),m=t.n(p),f=t(7980),g=t.n(f),v=t(52353),h=t.n(v),y=t(27361),x=t.n(y),b=t(78718),j=t.n(b),C=t(67294),P=t(8971),O=t(35162),A=t(91850),w=t(44012),S=t(86896),T=t(85938),I=t(7706),M=t(49376),E=t.n(M),N=t(87794),Z=t.n(N),k=(r=E()(Z().mark(function e(n){var t,r,i,a,o,s,l,u;return Z().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.hostSlug,r=n.accountSlug,i=n.type,a=n.description,o=n.items,(s=new URLSearchParams).append("host_slug",t),s.append("collective_slug",r),s.append("type",i),s.append("description",a),s.append("items",o),e.next=9,fetch("".concat("https://ml.opencollective.com","/models/expense-category?").concat(s));case 9:return l=e.sent,e.next=12,l.json();case 12:return u=e.sent,e.abrupt("return",u.predictions);case 14:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),R=t(66629),D=t(35690),F=t(64143),q=t(85893);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var L=(0,A.defineMessages)({submitter:{id:"accountingCategory.submitter",defaultMessage:[{type:0,value:"the expense submitter"}]},accountAdmin:{id:"accountingCategory.accountAdmin",defaultMessage:[{type:0,value:"the collective admin"}]},hostAdmin:{id:"accountingCategory.hostAdmin",defaultMessage:[{type:0,value:"the host admin"}]}}),H=function(e,n,t){var r=["submitter","accountAdmin","hostAdmin"],i=r.map(function(e){return x()(t,"".concat(e,".accountingCategory"))});if(!n||!i.some(Boolean))return null;var a=i.map(function(e){return e===n||(null==e?void 0:e.id)===(null==n?void 0:n.id)||(null==e?void 0:e.code)===(null==n?void 0:n.code)});if(!a.some(Boolean))return null;var o=r.filter(function(e,n){return a[n]});return(0,q.jsxs)("span",{className:"ml-1 text-xs font-normal italic text-gray-500",children:["• ",(0,q.jsx)(w.Z,{id:"accountingCategory.selectedBy",defaultMessage:[{type:0,value:"Selected by "},{type:5,value:"nbRoles",options:{1:{value:[{type:1,value:"role1"}]},2:{value:[{type:1,value:"role1"},{type:0,value:" and "},{type:1,value:"role2"}]},other:{value:[{type:1,value:"role1"},{type:0,value:", "},{type:1,value:"role2"},{type:0,value:" and "},{type:1,value:"role3"}]}}},{type:0,value:"."}],values:{nbRoles:o.length,role1:e.formatMessage(L[o[0]]),role2:o[1]&&e.formatMessage(L[o[1]]),role3:o[2]&&e.formatMessage(L[o[2]])}})]})},z=function(e,n,t,r){if(h()(n))return null;null===n?i=e.formatMessage({id:"AkIyKO",defaultMessage:[{type:0,value:"I don't know"}]}):n&&(i=n.friendlyName||n.name||e.formatMessage({id:"accountingCategory.doNotKnow",defaultMessage:[{type:0,value:"Unknown category"}]}));var i,a=H(e,n,r);return(0,q.jsxs)(C.Fragment,{children:[t&&n&&(0,q.jsxs)("span",{className:"mr-2 italic text-neutral-700",children:["#",n.code]}),i,a]})},U=function(e,n,t){return t||!(null!=n&&n.expensesTypes)||n.expensesTypes.includes(e)},B=function(e,n,t,r,i,a,o){var s=g()(x()(n,"accountingCategories.nodes",[])),l={};if(m()(s,function(e){return!U(t,e,o)}),s.forEach(function(n){l[n.id]={value:n,label:z(e,n,r,a),searchText:Object.values(j()(n,["name","friendlyName","code"])).join(" ").toLocaleLowerCase()}}),i){var u=z(e,null,!1,a);l.__none__={value:null,label:u,searchText:e.formatMessage({id:"AkIyKO",defaultMessage:[{type:0,value:"I don't know"}]}).toLocaleLowerCase()}}return l},V=function(e){var n=function(e){return e?e.trim().toLocaleLowerCase():""};return{type:x()(e,"type"),description:n(x()(e,"description","")),items:x()(e,"items",[]).map(function(e){return n(e.description)}).filter(Boolean).join(" | ")}},W=function(e,n,t,r){var i=(0,T.N)(k),a=i.call,o=i.data,l=i.loading,c=C.useMemo(function(){return d()(a,500)},[]),p=C.useState(!0),m=u()(p,2),f=m[0],v=m[1],h=e?V(r):null,y=!!(h&&h.type&&(h.description.length>3||h.items.length>3));C.useEffect(function(){if(y){var e=setTimeout(function(){return v(!1)},1e3);c(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach(function(n){s()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({hostSlug:n.slug,accountSlug:t.slug},h)).then(function(){clearTimeout(e),f&&v(!0)})}},[n.slug,t.slug,y].concat(g()(Object.values(h||{}))));var b=C.useMemo(function(){if(!y||!(null!=o&&o.length))return null;var e=o.filter(function(e){return e.confidence>=.1}),t=x()(n,"accountingCategories.nodes",[]);return e.map(function(e){var n;return n=e.code,t.find(function(e){return e.code===n})}).filter(Boolean)},[y,o]),j=C.useRef(b);return C.useEffect(function(){b&&(j.current=b)},[b]),{loading:l,predictions:b||f&&j.current||[]}},$=function(e){var n=e.host,t=e.account,r=e.expenseType,i=e.selectedCategory,o=e.valuesByRole,s=e.predictionStyle,l=e.onChange,c=e.id,d=e.error,p=e.allowNone,m=void 0!==p&&p,f=e.showCode,g=void 0!==f&&f,v=e.expenseValues,y=e.children,x=(0,S.Z)(),b=C.useState(!1),j=u()(b,2),A=j[0],T=j[1],M=(0,I.Z)().LoggedInUser,E=!!(null==M?void 0:M.isAdminOfCollective(n)),N="foundation"===n.slug&&("full"===s||A),Z=W(N,n,t,void 0===v?void 0:v).predictions,k=!!(null==Z?void 0:Z.length),_=C.useMemo(function(){return B(x,n,r,g,m,o,E)},[n,r,m,g,o,E]);return(0,q.jsxs)("div",{children:[(0,q.jsxs)(F.J2,{open:A,onOpenChange:T,children:[(0,q.jsx)(F.xo,{asChild:!0,children:y||(0,q.jsxs)("button",{id:c,className:(0,R.cn)("flex w-full items-center justify-between rounded-lg border px-3 py-2",{"border-red-500":d,"border-gray-300":!d}),children:[(0,q.jsx)("span",{className:(0,R.cn)("mr-3 max-w-[328px] truncate text-sm",{"text-gray-400":h()(i)}),children:z(x,i,!1,o)||x.formatMessage({id:"RUJYth",defaultMessage:[{type:0,value:"Select category"}]})}),(0,q.jsx)(P.Z,{size:"1em"})]})}),(0,q.jsx)(F.yk,{className:"z-[5000] w-[320px] p-0",children:(0,q.jsxs)(D.mY,{filter:function(e,n){var t;return null!==(t=_[e])&&void 0!==t&&t.searchText.includes(n)?1:0},children:[a()(_)>6&&(0,q.jsx)(D.sZ,{placeholder:"Filter by name"}),(0,q.jsx)(D.rb,{children:(0,q.jsx)(w.Z,{id:"bn5V11",defaultMessage:[{type:0,value:"No category found"}]})}),(0,q.jsx)(D.fu,{className:"max-h-[300px] overflow-y-auto",children:Object.entries(_).map(function(e){var n=u()(e,2),t=n[0],r=n[1].label,a=(null==i?void 0:i.id)===t,o=null==Z?void 0:Z.some(function(e){return e.id===t});return(0,q.jsx)(C.Fragment,{children:(0,q.jsx)(D.di,{value:t,className:(0,R.cn)("block p-3 text-xs",{"font-semibold":a}),onSelect:function(e){l(_[e].value),T(!1)},children:(0,q.jsxs)("div",{className:"flex justify-between",children:[(0,q.jsx)("span",{className:a||o||!k?"text-neutral-900":"text-gray-600",children:r}),o&&(0,q.jsx)("span",{className:"text-right text-xs text-gray-500",title:x.formatMessage({id:"a0lFbM",defaultMessage:[{type:0,value:"Suggested"}]}),children:(0,q.jsx)(O.Z,{size:16,className:"mr-1 inline-block text-yellow-500",strokeWidth:1.5})})]})})},t)})})]})})]}),N&&"full"===s&&(0,q.jsx)("div",{className:"mt-2 min-h-[33px] text-xs text-gray-700",children:k&&(0,q.jsxs)("div",{children:[(0,q.jsx)(O.Z,{size:16,className:" mr-1 inline-block text-yellow-500",strokeWidth:1.5}),(0,q.jsx)(w.Z,{id:"XItXfz",defaultMessage:[{type:0,value:"Suggested: "},{type:1,value:"suggestions"}],values:{suggestions:Z.slice(0,3).map(function(e,n){return(0,q.jsxs)(C.Fragment,{children:[(0,q.jsx)("span",{tabIndex:0,role:"button",onKeyDown:function(n){return"Enter"===n.key&&l(e)},onClick:function(){return l(e)},className:"cursor-pointer text-[--primary-color-600] underline hover:opacity-80","aria-label":x.formatMessage({id:"G65XME",defaultMessage:[{type:0,value:"Select "},{type:1,value:"name"}]},{name:e.name}),children:e.name}),n<Math.min(Z.length,3)-1?", ":"."]},e.code)})}})]})})]})};$.__docgenInfo={description:"",methods:[],displayName:"ExpenseCategorySelect",props:{allowNone:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:""},showCode:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:""},expenseValues:{defaultValue:{value:"undefined",computed:!0},required:!1,tsType:{name:"Partial",elements:[{name:"Expense"}],raw:"Partial<Expense>"},description:"If provided, these values (descriptions, items, etc...) will be used to call the prediction service"},host:{required:!0,tsType:{name:"Host"},description:""},account:{required:!0,tsType:{name:"Account"},description:""},expenseType:{required:!0,tsType:{name:"ExpenseType"},description:""},predictionStyle:{required:!1,tsType:{name:"union",raw:"'full' | 'inline'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'inline'"}]},description:""},selectedCategory:{required:!0,tsType:{name:"union",raw:"AccountingCategory | undefined | null",elements:[{name:"AccountingCategory"},{name:"undefined"},{name:"null"}]},description:""},valuesByRole:{required:!1,tsType:{name:"Expense['valuesByRole']",raw:"Expense['valuesByRole']"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(category: AccountingCategory) => void",signature:{arguments:[{name:"category",type:{name:"AccountingCategory"}}],return:{name:"void"}}},description:""},id:{required:!1,tsType:{name:"string"},description:""},error:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};var G=$},16741:function(e,n,t){var r,i=t(49376),a=t.n(i),o=t(930),s=t.n(o),l=t(92358),u=t.n(l),c=t(87794),d=t.n(c);t(67294);var p=t(63659),m=t(86896),f=t(44012);t(12494);var g=t(32324),v=t(59644),h=t(18625),y=t(20073),x=t(85893);function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach(function(n){s()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var C=(0,v.Ps)(r||(r=u()(["\n  mutation DeleteExpense($id: String!) {\n    deleteExpense(expense: { id: $id }) {\n      id\n    }\n  }\n"]))),P=function(e,n){var t=n.data.deleteExpense;e.modify({fields:{expenses:function(e,n){var r=n.readField;return null!=e&&e.nodes?j(j({},e),{},{totalCount:e.totalCount-1,nodes:e.nodes.filter(function(e){return t.id!==r("id",e)})}):e}}})},O=function(e){var n=e.onDelete,t=e.showDeleteConfirmMoreActions,r=e.expense,i=(0,y.pm)().toast,o=(0,m.Z)();return(0,x.jsx)(p.m,{mutation:C,context:v.Tn,update:P,children:function(e){return(0,x.jsx)(h.Z,{isDanger:!0,type:"delete",onClose:function(){return t(!1)},header:(0,x.jsx)(f.Z,{id:"actions.delete",defaultMessage:[{type:0,value:"Delete"}]}),continueHandler:a()(d().mark(function a(){return d().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e({variables:{id:r.id}});case 3:i({variant:"success",message:(0,x.jsx)(f.Z,{id:"delete.successMessage",defaultMessage:[{type:0,value:"'Expense has been deleted successfully'"}]})}),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),i({variant:"error",message:(0,g.t2)(o,a.t0)});case 9:if(!n){a.next=12;break}return a.next=12,n(r);case 12:t(!1);case 13:case"end":return a.stop()}},a,null,[[0,6]])})),children:(0,x.jsx)(f.Z,{id:"Expense.DeleteDetails",defaultMessage:[{type:0,value:"This will permanently delete the expense and all attachments and comments."}]})})}})};O.__docgenInfo={description:"",methods:[],displayName:"ExpenseConfirmDeletion",props:{onDelete:{description:"",type:{name:"func"},required:!1},showDeleteConfirmMoreActions:{description:"",type:{name:"func"},required:!1},expense:{description:"",type:{name:"shape",value:{id:{name:"string",required:!0},legacyId:{name:"number",required:!0},type:{name:"enum",computed:!0,value:"Object.values(expenseTypes)",required:!1},permissions:{name:"shape",value:{canEdit:{name:"bool",required:!1},canSeeInvoiceInfo:{name:"bool",required:!1},canMarkAsIncomplete:{name:"bool",required:!1}},required:!1}}},required:!1}}},n.ZP=O},90068:function(e,n,t){t.d(n,{X:function(){return j}});var r=t(930),i=t.n(r),a=t(3323),o=t.n(a);t(67294);var s=t(86896),l=t(44012),u=t(71698),c=t(11831),d=t(63551),p=t(7136),m=t(60659),f=t(608),g=t(85893),v=["children"],h=["status"],y=["status","showTaxFormTag","showTaxFormMsg"];function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var j=function(e){switch(e){case u.g26.REJECTED:case u.g26.SPAM:case u.g26.ERROR:return"error";case u.g26.PENDING:case u.g26.UNVERIFIED:case"ON_HOLD":return"warning";case u.g26.SCHEDULED_FOR_PAYMENT:case u.g26.APPROVED:return"info";case u.g26.PAID:case"COMPLETED":return"success"}},C=function(e){var n=e.children,t=o()(e,v);return(0,g.jsx)(m.Z,b(b({},t),{},{background:"white",border:"1px solid",borderColor:"yellow.400",color:"black.700",borderRadius:"0px 4px 4px 0px",ml:"-3px",lineHeight:"100%",children:n}))},P=function(e){var n=e.status,t=o()(e,h),r=(0,s.Z)();return(0,g.jsx)(m.Z,b(b({type:j(n)},t),{},{children:(0,c.zr)(r,n)}))},O=function(e){var n=e.status,t=e.showTaxFormTag,r=e.showTaxFormMsg,i=b({fontWeight:"600",fontSize:"10px",letterSpacing:"0.8px",textTransform:"uppercase"},o()(e,y));return n===u.g26.UNVERIFIED?(0,g.jsxs)(d.kC,{alignItems:"center",children:[(0,g.jsx)(P,b({status:u.g26.PENDING},i)),(0,g.jsx)(C,b(b({},i),{},{children:(0,g.jsx)(l.Z,{id:"Unverified",defaultMessage:[{type:0,value:"Unverified"}]})}))]}):t?r?(0,g.jsxs)(d.kC,{alignItems:"center",children:[(0,g.jsx)(P,b({status:n},i)),(0,g.jsx)(f.Z,{content:function(){return(0,g.jsx)(l.Z,{id:"expenseNeedsTaxForm.hover",defaultMessage:[{type:0,value:"We can't pay until we receive your tax info. Check your inbox for an email from HelloWorks. Need help? Contact "},{type:8,value:"SupportLink",children:[{type:0,value:"support"}]}],values:p.ZP})},children:(0,g.jsx)(C,{children:(0,g.jsx)(l.Z,{id:"TaxForm",defaultMessage:[{type:0,value:"Tax form"}]})})})]}):(0,g.jsxs)(d.kC,{alignItems:"center",children:[(0,g.jsx)(P,b({status:n},i)),(0,g.jsx)(C,{children:(0,g.jsx)(l.Z,{id:"TaxForm",defaultMessage:[{type:0,value:"Tax form"}]})})]}):(0,g.jsx)(P,b({status:n},i))};O.__docgenInfo={description:"Displays an i18n version of the expense status in a `StyledTag`.\nThe color change in function of the status.\n\nAccepts all the props exposed by `StyledTag`.",methods:[],displayName:"ExpenseStatusTag",props:{status:{description:"",type:{name:"enum",value:[{value:"...Object.values(ExpenseStatus)",computed:!0},{value:"'COMPLETED'",computed:!1},{value:"'REFUNDED'",computed:!1}]},required:!1},showTaxFormMsg:{description:"",type:{name:"bool"},required:!1},showTaxFormTag:{description:"",type:{name:"bool"},required:!1}}},n.Z=O},23689:function(e,n,t){var r=t(930),i=t.n(r),a=t(3323),o=t.n(a);t(67294);var s=t(86896);t(12494);var l=t(11831),u=t(98936),c=t(60659),d=t(85893),p=["type","legacyId","isLoading"];function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var g=function(e){var n=e.type,t=e.legacyId,r=e.isLoading,i=o()(e,p),a=(0,s.Z)();return n||t||!r?(0,d.jsx)(c.Z,f(f({variant:"rounded-left",type:"grey",mb:"4px",mr:"10px",textTransform:"uppercase",fontSize:"10px",fontWeight:"600"},i),{},{children:(0,l.kD)(a,n,t)})):(0,d.jsx)(u.Z,{height:24,width:73,borderRadius:"12px 2px 2px 12px"})};g.__docgenInfo={description:"",methods:[],displayName:"ExpenseTypeTag",props:{type:{description:"",type:{name:"enum",computed:!0,value:"Object.values(expenseTypes)"},required:!0},legacyId:{description:"",type:{name:"number"},required:!1},isLoading:{description:"",type:{name:"bool"},required:!1}}},n.Z=g},76132:function(e,n,t){t.d(n,{NI:function(){return ee}});var r,i,a=t(21804),o=t.n(a),s=t(39693),l=t.n(s),u=t(43174),c=t.n(u),d=t(85696),p=t.n(d),m=t(3323),f=t.n(m),g=t(36968),v=t.n(g),h=t(930),y=t.n(h),x=t(27361),b=t.n(x),j=t(92358),C=t.n(j),P=t(67294),O=t(37887),A=t(85236),w=t(59433),S=t(91850),T=t(86896),I=t(44012),M=t(74197),E=t(32324),N=t(50946),Z=t(59644),k=t(63551),R=t(7136),D=t(69755),F=t(50714),q=t(61429),_=t(90374),L=t(14876),H=t(608),z=t(61936),U=t(85893),B=["field"];function V(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?V(Object(t),!0).forEach(function(n){y()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var $=function(e){return e.map(function(e){return{label:e,value:e}})},G="opencollective",Y=(0,S.defineMessages)({currency:{id:"Currency",defaultMessage:[{type:0,value:"Currency"}]},fieldRequired:{id:"FieldRequired",defaultMessage:[{type:1,value:"name"},{type:0,value:" is required."}]}}),K=(0,Z.Ps)(r||(r=C()(["\n  query PayoutBankInformationRequiredFields($slug: String, $currency: String!, $accountDetails: JSON) {\n    host(slug: $slug) {\n      id\n      transferwise {\n        id\n        requiredFields(currency: $currency, accountDetails: $accountDetails) {\n          type\n          title\n          fields {\n            name\n            group {\n              key\n              name\n              type\n              required\n              example\n              minLength\n              maxLength\n              validationRegexp\n              refreshRequirementsOnChange\n              valuesAllowed {\n                key\n                name\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),X={USD:{requiredFields:{label:"Where's your bank account located?",options:{aba:"In the US",swift_code:"Outside the US"}}}},Q=function(e,n,t){return t?function(t){return t?void 0:e.formatMessage(Y.fieldRequired,{name:n.name})}:void 0},J=function(e){var n=e.input,t=e.getFieldName,r=e.disabled,i=e.currency,a=e.loading,o=e.refetch,s=e.formik,l=e.host,u=(0,T.Z)(),c="accountHolderName"===n.key,d=c?t(n.key):t("details.".concat(n.key)),p=!r&&n.required,m=!!s.submitCount,f=Q(u,n,p);if("text"===n.type)return(n.validationRegexp||n.minLength||n.maxLength)&&(f=function(e){return!e&&p?(0,N.$m)(u,(0,E.Tr)(E.pn.FORM_FIELD_REQUIRED)):n.validationRegexp&&!new RegExp(n.validationRegexp).test(e)&&e?n.validationError||(0,N.$m)(u,(0,E.Tr)(E.pn.FORM_FIELD_PATTERN)):e&&n.minLength&&e.length<n.minLength?n.validationError||(0,N.$m)(u,(0,E.Tr)(E.pn.FORM_FIELD_MIN_LENGTH)):e&&n.maxLength&&e.length>n.maxLength?n.validationError||(0,N.$m)(u,(0,E.Tr)(E.pn.FORM_FIELD_MAX_LENGTH)):void 0}),(0,U.jsx)(k.xu,{mt:2,flex:"1",children:(0,U.jsx)(w.gN,{name:d,validate:f,children:function(e){var t=e.field,i=e.meta;return(0,U.jsx)(q.Z,{label:n.name,labelFontSize:"13px",required:p,hideOptionalLabel:r,error:(i.touched||r||m)&&i.error,hint:n.hint,children:function(){var e=b()(s.values,t.name);return(0,U.jsxs)(P.Fragment,{children:[(0,U.jsx)(F.ZP,W(W({},t),{},{placeholder:n.example,error:(i.touched||r||m)&&i.error,disabled:r,width:"100%",maxLength:n.maxLength,minLength:n.minLength,value:e||""})),c&&e&&e.match(/^[^\s]{1}\b/)&&(0,U.jsx)(D.Z,{mt:2,fontSize:"12px",type:"warning",withIcon:!0,children:(0,U.jsx)(I.Z,{id:"Warning.AccountHolderNameNotValid",defaultMessage:[{type:0,value:"Full names for personal recipients. They must include more than one name, and both first and last name must have more than one character."}]})})]})}})}})},n.key);if("date"===n.type)return(0,U.jsx)(k.xu,{mt:2,flex:"1",children:(0,U.jsx)(w.gN,{name:d,validate:f,children:function(e){var t=e.field,i=e.meta;return(0,U.jsx)(q.Z,{label:n.name,labelFontSize:"13px",required:p,hideOptionalLabel:r,error:(i.touched||r||m)&&i.error,hint:n.hint,children:function(){return(0,U.jsx)(F.ZP,W(W({},t),{},{type:"date",error:(i.touched||r||m)&&i.error,disabled:r,width:"100%",value:b()(s.values,t.name)||""}))}})}})},n.key);if("radio"!==n.type&&"select"!==n.type)return null;var g=(n.valuesAllowed||[]).map(function(e){var n=e.key;return{label:e.name,value:n}});return(0,U.jsx)(k.xu,{mt:2,flex:"1",children:(0,U.jsx)(w.gN,{name:d,validate:f,children:function(e){var u=e.field,c=e.meta;return(0,U.jsx)(q.Z,{label:n.name,labelFontSize:"13px",required:p,hideOptionalLabel:r,error:(c.touched||r||m)&&c.error,children:function(){return(0,U.jsx)(_.ZP,{inputId:u.name,disabled:r,error:(c.touched||r||m)&&c.error,isLoading:a&&!g.length,name:u.name,options:g,value:g.find(function(e){return e.value===b()(s.values,u.name)})||null,onChange:function(e){var r=e.value;s.setFieldValue(u.name,r),n.refreshRequirementsOnChange&&o&&o({slug:l?l.slug:G,currency:i,accountDetails:b()(v()(W({},s.values),u.name,r),t(""))})}})}})}})})},ee=function(e){var n=e.field,t=f()(e,B);return(0,U.jsx)(k.xu,{flex:"1",children:n.group.map(function(e){return(0,U.jsx)(J,W({input:e},t),e.key)})})},en=function(e){var n,t,r,i,a=e.disabled,s=e.getFieldName,u=e.formik,d=e.host,m=e.currency,f=(0,T.Z)(),g=(0,O.a)(K,{context:Z.Tn,variables:{slug:d?d.slug:G,currency:m}}),v=g.loading,h=g.error,y=g.data,x=g.refetch;if((0,P.useEffect)(function(){x({accountDetails:b()(u.values,s("data"))})},[]),v&&!y)return(0,U.jsx)(L.Z,{});if(h)return(0,U.jsxs)(D.Z,{fontSize:"12px",type:"error",children:[(0,U.jsx)(I.Z,{id:"PayoutBankInformationForm.Error.RequiredFields",defaultMessage:[{type:0,value:"There was an error fetching the required fields"}]}),h.message&&": ".concat(h.message)]});if(!(null!=y&&null!==(n=y.host)&&void 0!==n&&null!==(t=n.transferwise)&&void 0!==t&&t.requiredFields))return console.warn("Could not fetch requiredFields through Wise."),null;var j=y.host.transferwise.requiredFields.map(function(e){var n,t,r;return{label:(null===(n=X[m])||void 0===n?void 0:null===(t=n.requiredFields)||void 0===t?void 0:null===(r=t.options)||void 0===r?void 0:r[e.type])||e.title,value:e.type}}),C=y.host.transferwise.requiredFields.find(function(e){return e.type===b()(u.values,s("data.type"))}),S=c()(null==C?void 0:C.fields,function(e){return e.group.every(function(e){return e.key.includes("address.")})}),M=p()(S,2),E=M[0],N=M[1],R=s("data.type"),F=b()(u.values,R),B=!!u.submitCount,V=(null===(r=X[m])||void 0===r?void 0:null===(i=r.requiredFields)||void 0===i?void 0:i.label)||f.formatMessage({id:"PayoutBankInformationForm.TransactionMethod",defaultMessage:[{type:0,value:"Transaction Method"}]});return(0,U.jsxs)(k.kC,{flexDirection:"column",children:[(0,U.jsx)(w.gN,{name:s("data.type"),validate:Q(f,{name:V},!a),children:function(e){var n=e.field,t=e.meta;return(0,U.jsx)(q.Z,{name:n.name,label:V,error:(t.touched||a||B)&&t.error,labelFontSize:"13px",mt:3,mb:2,children:function(e){var r=e.id;return(0,U.jsx)(_.ZP,{inputId:r,name:n.name,onChange:function(e){var t=e.value,r=b()(u.values,s("data")),i=r.type,a=r.currency;u.setFieldValue(s("data"),{type:i,currency:a}),u.setFieldValue(n.name,t)},options:j,value:j.find(function(e){return e.value===(null==C?void 0:C.type)})||null,disabled:a,error:(t.touched||a||B)&&t.error,required:!0})}})}}),F&&(0,U.jsxs)(z.Dr,{children:[(0,U.jsx)(k.xu,{mt:3,flex:"1",children:(0,U.jsx)(z.P,{fontSize:"14px",fontWeight:"bold",children:(0,U.jsx)(I.Z,{id:"PayoutBankInformationForm.AccountInfo",defaultMessage:[{type:0,value:"Account Information"}]})})}),N.map(function(e){return(0,U.jsx)(ee,{currency:m,disabled:a,field:e,formik:u,getFieldName:function(e){return s(l()(["data",e]).join("."))},host:d,loading:v,refetch:x},o()(e.name))})]}),!!E.length&&(0,U.jsxs)(P.Fragment,{children:[(0,U.jsxs)(k.xu,{mt:3,flex:"1",fontSize:"14px",fontWeight:"bold",children:[(0,U.jsx)(z.Dr,{mr:2,children:(0,U.jsx)(I.Z,{id:"PayoutBankInformationForm.RecipientAddress",defaultMessage:[{type:0,value:"Recipient's Address"}]})}),(0,U.jsx)(H.Z,{content:(0,U.jsx)(I.Z,{id:"PayoutBankInformationForm.HolderAddress",defaultMessage:[{type:0,value:"Bank account holder address (not the bank address)"}]}),children:(0,U.jsx)(A.k,{size:16})})]}),E.map(function(e){return(0,U.jsx)(ee,{currency:m,disabled:a,field:e,formik:u,getFieldName:function(e){return s(l()(["data",e]).join("."))},host:d,loading:v,refetch:x},o()(e.name))})]})]})},et=(0,Z.Ps)(i||(i=C()(["\n  query PayoutBankInformationAvailableCurrencies($slug: String, $ignoreBlockedCurrencies: Boolean) {\n    host(slug: $slug) {\n      id\n      slug\n      currency\n      transferwise {\n        id\n        availableCurrencies(ignoreBlockedCurrencies: $ignoreBlockedCurrencies)\n      }\n    }\n  }\n"]))),er=function(e){var n,t,r,i,a=e.isNew,o=e.getFieldName,s=e.host,l=e.fixedCurrency,u=e.ignoreBlockedCurrencies,c=e.optional,d=(0,O.a)(et,{context:Z.Tn,variables:{slug:G,ignoreBlockedCurrencies:u},skip:!!(l||(null==s?void 0:null===(n=s.transferwise)||void 0===n?void 0:n.availableCurrencies))}),p=d.data,m=d.loading,f=(0,w.u6)(),g=(0,T.Z)().formatMessage;if(m)return(0,U.jsx)(L.Z,{});var v=(null==p?void 0:p.host)||s,h=null==v?void 0:null===(t=v.transferwise)||void 0===t?void 0:t.availableCurrencies;if(l)i=$([l]);else{if(!h)return(0,U.jsx)(D.Z,{fontSize:"12px",type:"warning",children:(0,U.jsx)(I.Z,{id:"fCWfnb",defaultMessage:[{type:0,value:"An error occurred while preparing the form for bank accounts. Please contact "},{type:8,value:"I18nSupportLink",children:[{type:0,value:"support"}]}],values:{I18nSupportLink:R.wl}})});i=$(h.map(function(e){return e.code}))}c&&i.unshift({label:"No selection",value:null});var y=o("data.currency"),x=b()(f.values,y);return(0,U.jsxs)(P.Fragment,{children:[(0,U.jsx)(w.gN,{name:y,validate:function(){var e,n;if(!l&&h&&(null==f?void 0:null===(e=f.values)||void 0===e?void 0:null===(n=e.items)||void 0===n?void 0:n.length)>0){var t,r=f.values.items.reduce(function(e,n){return e+(n.amount||0)},0),i=(null===(t=h.find(function(e){return e.code===x}))||void 0===t?void 0:t.minInvoiceAmount)*100;if(r<i)return g({id:"AzGwgz",defaultMessage:[{type:0,value:"The minimum amount for transferring to "},{type:1,value:"selectedCurrency"},{type:0,value:" is "},{type:1,value:"minAmountForSelectedCurrency"}]},{selectedCurrency:x,minAmountForSelectedCurrency:(0,M.xG)(i,v.currency)})}},children:function(e){var n=e.field;return(0,U.jsx)(q.Z,{name:n.name,label:g(Y.currency),labelFontSize:"13px",mt:3,mb:2,children:function(e){var t=e.id;return(0,U.jsx)(_.ZP,{inputId:t,name:n.name,onChange:function(e){var t=e.value;f.setFieldValue(o("data"),{}),f.setFieldValue(n.name,t)},options:i,value:i.find(function(e){return e.label===x})||null,disabled:!!(l&&!c)||!a})}})}}),x&&(0,U.jsx)(en,{currency:x,disabled:!a,formik:f,getFieldName:o,host:v}),!x&&!(null!==(r=i)&&void 0!==r&&r.length)&&(0,U.jsxs)(D.Z,{fontSize:"12px",type:"error",children:[(0,U.jsx)(I.Z,{id:"PayoutBankInformationForm.Error.AvailableCurrencies",defaultMessage:[{type:0,value:"There was an error loading available currencies for this host"}]}),"."]})]})};er.__docgenInfo={description:"Form for payout bank information. Must be used with Formik.\n\nThe main goal is to use this component in the Expense Flow (1) but it's also reused in:\n\n- Collective onboarding, AcceptContributionsOurselvesOrOrg.js (2)\n- In Collective/Host settings -> Receiving Money, BankTransfer.js (3)\n\nIn (1) we pass the host where the expense is submitted and fixedCurrency is never set.\n  * If Wise is configured on that host, `availableCurrencies` should normally be available.\n  * If it's not, we'll have to fetch `availableCurrencies` from the Platform Wise account\n\nIn (2) and (3), we never pass an `host` and `fixedCurrency` is sometimes set.\n  * If `fixedCurrency` is set, we don't need `availableCurrencies`\n  * If `fixedCurrency` is not set, we'll fetch `availableCurrencies` from the Platform Wise account",methods:[],displayName:"PayoutBankInformationForm",props:{host:{description:"",type:{name:"shape",value:{slug:{name:"string",required:!0},currency:{name:"string",required:!1},transferwise:{name:"shape",value:{availableCurrencies:{name:"arrayOf",value:{name:"object"},required:!1}},required:!1}}},required:!1},isNew:{description:"",type:{name:"bool"},required:!1},optional:{description:"",type:{name:"bool"},required:!1},ignoreBlockedCurrencies:{description:"",type:{name:"bool"},required:!1},getFieldName:{description:"",type:{name:"func"},required:!0},fixedCurrency:{description:"Enforces a fixedCurrency",type:{name:"string"},required:!1},errors:{description:"A map of errors for this object",type:{name:"object"},required:!1},formik:{description:"",type:{name:"object"},required:!1}}},n.ZP=er,ee.__docgenInfo={description:"",methods:[],displayName:"FieldGroup",props:{disabled:{description:"",type:{name:"bool"},required:!1},loading:{description:"",type:{name:"bool"},required:!1},host:{description:"",type:{name:"shape",value:{slug:{name:"string",required:!1}}},required:!1},currency:{description:"",type:{name:"string"},required:!1},formik:{description:"",type:{name:"object"},required:!0},getFieldName:{description:"",type:{name:"func"},required:!0},refetch:{description:"",type:{name:"func"},required:!1},field:{description:"",type:{name:"object"},required:!0}}}},11457:function(e,n,t){var r=t(14035),i=t.n(r),a=t(27361),o=t.n(a),s=t(18029),l=t.n(s),u=t(7980),c=t.n(u),d=t(85696),p=t.n(d),m=t(67294),f=t(44012),g=t(73158),v=t(51506),h=t(88318),y=t(98936),x=t(61936),b=t(85893),j="********",C=function(e,n,t){return t?(0,b.jsx)(y.Z,{height:15}):o()(e,"data.".concat(n),j)},P=function(e){var n=e.payoutMethod,t=e.showLabel,r=e.isLoading;if(r&&!n)return(0,b.jsx)(y.Z,{height:24,mb:2});if(!n)return null;switch(n.type){case g.Nk.PAYPAL:return(0,b.jsxs)("div",{children:[t&&(0,b.jsxs)(v.Z,{fontSize:"14px",fontWeight:"700",mb:2,children:[(0,b.jsx)(f.Z,{id:"User.EmailAddress",defaultMessage:[{type:0,value:"Email address"}]}),"\xa0\xa0",(0,b.jsx)(h.Z,{})]}),(0,b.jsx)(v.Z,{fontSize:"14px",color:"black.700",children:C(n,"email",r)})]});case g.Nk.OTHER:return(0,b.jsxs)("div",{children:[t&&(0,b.jsxs)(v.Z,{fontSize:"14px",fontWeight:"700",mb:2,children:[(0,b.jsx)(f.Z,{id:"Details",defaultMessage:[{type:0,value:"Details"}]}),"\xa0\xa0",(0,b.jsx)(h.Z,{})]}),(0,b.jsx)(v.Z,{fontSize:"14px",color:"black.700",children:C(n,"content",r)})]});case g.Nk.BANK_ACCOUNT:return(0,b.jsxs)("div",{children:[t&&(0,b.jsxs)(v.Z,{fontSize:"14px",fontWeight:"700",mb:2,children:[(0,b.jsx)(f.Z,{id:"Details",defaultMessage:[{type:0,value:"Details"}]}),"\xa0\xa0",(0,b.jsx)(h.Z,{})]}),n.data?(0,b.jsxs)(v.Z,{fontSize:"14px",color:"black.700",children:[(0,b.jsx)(f.Z,{id:"BankInfo.Type",defaultMessage:[{type:0,value:"Type: "},{type:1,value:"type"}],values:{type:i()(n.data.type)}}),n.data.accountHolderName&&(0,b.jsxs)(m.Fragment,{children:[(0,b.jsx)("br",{}),(0,b.jsx)(f.Z,{id:"BankInfo.AccountHolder",defaultMessage:[{type:0,value:"Account Holder: "},{type:1,value:"name"}],values:{name:n.data.accountHolderName}})]}),n.data.details&&function e(n){return Object.entries(n).reduce(function(n,t){var r=p()(t,2),i=r[0],a=r[1];return"object"==typeof a?[].concat(c()(n),c()(e(a))):[].concat(c()(n),[(0,b.jsxs)(x.P,{fontSize:"14px",lineHeight:"18px",children:[(0,b.jsx)(f.Z,{id:"withColon",defaultMessage:[{type:1,value:"item"},{type:0,value:":"}],values:{item:l()(i)}})," ",a]},i)])},[])}(n.data.details)]}):r?(0,b.jsx)(y.Z,{height:"1.5em"}):j]});default:return null}};P.defaultProps={showLabel:!0},P.__docgenInfo={description:"Shows the data of the given payout method",methods:[],displayName:"PayoutMethodData",props:{showLabel:{defaultValue:{value:"true",computed:!1},description:"If false, only the raw data will be displayed",type:{name:"bool"},required:!1},isLoading:{description:"",type:{name:"bool"},required:!1},payoutMethod:{description:"",type:{name:"shape",value:{id:{name:"string",required:!1},type:{name:"enum",computed:!0,value:"Object.values(PayoutMethodType)",required:!1},data:{name:"object",required:!1}}},required:!1}}},n.Z=P},8295:function(e,n,t){t(67294);var r=t(17681),i=t(34243),a=t(79922),o=t(60253),s=t(44012),l=t(73158),u=t(39631),c=t(63551),d=t(98936),p=t(61936),m=t(85893),f=function(e){var n=e.isLoading,t=e.type,f=e.fontSize,g=e.fontWeight,v=e.color,h=e.iconSize,y=e.name;if(n)return(0,m.jsx)(d.Z,{height:15,width:90});switch(t){case l.Nk.PAYPAL:return(0,m.jsxs)(c.kC,{alignItems:"center",children:[(0,m.jsx)(r.z,{size:h,color:"#192f86"}),(0,m.jsx)(p.Dr,{ml:2,fontWeight:g,fontSize:f,color:v,children:"PayPal"})]});case l.Nk.BANK_ACCOUNT:return(0,m.jsxs)(c.kC,{alignItems:"center",children:[(0,m.jsx)(o.R,{size:h,color:"#9D9FA3"}),(0,m.jsx)(p.Dr,{ml:2,fontWeight:g,fontSize:f,color:v,children:(0,m.jsx)(s.Z,{id:"BankAccount",defaultMessage:[{type:0,value:"Bank account"}]})})]});case l.Nk.ACCOUNT_BALANCE:return(0,m.jsxs)(c.kC,{alignItems:"center",children:[(0,m.jsx)(a.w,{size:h,color:"#9D9FA3"}),(0,m.jsx)(p.Dr,{ml:2,fontWeight:g,fontSize:f,color:v,children:"Open Collective"})]});case l.FZ:return(0,m.jsxs)(c.kC,{alignItems:"center",children:[(0,m.jsx)(u.ZP,{name:"?",size:h,backgroundColor:"blue.100",color:"blue.400",fontWeight:"500"}),(0,m.jsx)(p.Dr,{ml:2,fontWeight:g,fontSize:f,color:v,children:(0,m.jsx)(s.Z,{id:"PayoutMethod.Type.ToBeDefined",defaultMessage:[{type:0,value:"Not yet set"}]})})]});case l.vi:return(0,m.jsxs)(c.kC,{alignItems:"center",children:[(0,m.jsx)(i.a,{size:h,color:"#9D9FA3"}),(0,m.jsx)(p.Dr,{ml:2,fontWeight:g,fontSize:f,color:v,children:y||(0,m.jsx)(s.Z,{id:"PayoutMethod.Type.VirtualCard",defaultMessage:[{type:0,value:"Virtual Card"}]})})]});case l.Nk.OTHER:default:return(0,m.jsxs)(c.kC,{alignItems:"center",children:[(0,m.jsx)(a.w,{size:h,color:"#9D9FA3"}),(0,m.jsx)(p.Dr,{ml:2,fontWeight:g,fontSize:f,color:v,children:(0,m.jsx)(s.Z,{id:"PayoutMethod.Type.Other",defaultMessage:[{type:0,value:"Other"}]})})]})}};f.defaultProps={fontSize:"13px",fontWeight:"bold",color:"black.900",iconSize:24},f.__docgenInfo={description:"Shows the data of the given payout method",methods:[],displayName:"PayoutMethodTypeWithIcon",props:{fontSize:{defaultValue:{value:"'13px'",computed:!1},description:"",type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1},fontWeight:{defaultValue:{value:"'bold'",computed:!1},description:"",type:{name:"string"},required:!1},color:{defaultValue:{value:"'black.900'",computed:!1},description:"",type:{name:"string"},required:!1},iconSize:{defaultValue:{value:"24",computed:!1},description:"",type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1},isLoading:{description:"",type:{name:"bool"},required:!1},type:{description:"",type:{name:"enum",value:[{value:"...Object.values(PayoutMethodType)",computed:!0},{value:"import { INVITE, PayoutMethodType, VIRTUAL_CARD } from '../../lib/constants/payout-method';",computed:!0}]},required:!1},name:{description:"",type:{name:"string"},required:!1}}},n.Z=f},52262:function(e,n,t){t.d(n,{aN:function(){return n$},oU:function(){return nJ},ZP:function(){return n0},HF:function(){return nG}});var r,i,a,o,s=t(49376),l=t.n(s),u=t(85696),c=t.n(u),d=t(930),p=t.n(d),m=t(3323),f=t.n(m),g=t(92358),v=t.n(g),h=t(87794),y=t.n(h),x=t(67294),b=t(50319),j=t(95612),C=t(80654),P=t(46336),O=t(74684),A=t(91850),w=t(44012),S=t(86896),T=t(52015),I={AUTHOR_CANNOT_APPROVE:"AUTHOR_CANNOT_APPROVE"},M=(0,A.defineMessages)(p()({},I.AUTHOR_CANNOT_APPROVE,{id:"ExpensePermissionReason.AUTHOR_CANNOT_APPROVE",defaultMessage:[{type:0,value:"You cannot approve expenses you have submitted"},{type:5,value:"amount",options:{0:{value:[{type:0,value:"."}]},other:{value:[{type:0,value:" when the expense is above "},{type:1,value:"amount"},{type:0,value:" "},{type:1,value:"currency"},{type:0,value:"."}]}}}]})),E=t(32324),N=t(59644),Z=t(94069),k=t(93514),R=t(48900),D=t(62612),F=t(608),q=t(20073),_=t(31257),L=t(18625),H=t(84037),z=t(41899),U=t(85893);function B(e){var n=e.onClose,t=e.onConfirm,r=e.host,i=e.account,a=e.expense,o=(0,S.Z)(),s=(0,b.D)(H.Z,{context:N.Tn}),u=c()(s,1)[0],d=x.useState(a.accountingCategory),p=c()(d,2),m=p[0],f=p[1],g=(0,q.pm)().toast;return(0,U.jsx)(L.Z,{onClose:n,header:(0,U.jsx)(w.Z,{id:"PJNkaW",defaultMessage:[{type:0,value:"Approve Expense"}]}),maxWidth:384,disableSubmit:!m,continueHandler:l()(y().mark(function e(){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((null==m?void 0:m.id)!==(null===(r=a.accountingCategory)||void 0===r?void 0:r.id))){e.next=4;break}return e.next=4,u({variables:{expenseId:a.id,category:m?{id:m.id}:null}});case 4:return e.next=6,t();case 6:n(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),g({variant:"error",message:(0,E.t2)(o,e.t0)});case 12:case"end":return e.stop()}},e,null,[[0,9]])})),children:(0,U.jsxs)("div",{className:"my-4",children:[(0,U.jsx)("label",{htmlFor:"confirm-expense-category",className:"mb-2 text-base font-bold",children:(0,U.jsx)(w.Z,{id:"X5FRNX",defaultMessage:[{type:0,value:"Confirm Expense Category"}]})}),(0,U.jsx)(z.Z,{id:"confirm-expense-category",onChange:f,host:r,account:i,expenseType:a.type,expenseValues:a,selectedCategory:m,valuesByRole:a.valuesByRole,allowNone:!1,predictionStyle:"full"})]})})}B.__docgenInfo={description:"",methods:[],displayName:"ApproveExpenseModal",props:{onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},expense:{required:!0,tsType:{name:"Expense"},description:""},host:{required:!0,tsType:{name:"Host"},description:""},account:{required:!0,tsType:{name:"Account"},description:""},onConfirm:{required:!1,tsType:{name:"signature",type:"function",raw:"() => Promise<any>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"any"}],raw:"Promise<any>"}}},description:""}}};var V=t(13024),W=t(16442),$=t(61936),G=t(16741);function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach(function(n){p()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var X=function(e){var n=e.expense,t=e.onDelete,r=e.buttonProps,i=e.isDisabled,a=e.onModalToggle,o=x.useState(!1),s=c()(o,2),l=s[0],u=s[1],d=function(e){u(e),null==a||a(e)};return(0,U.jsxs)(x.Fragment,{children:[(0,U.jsxs)(D.Z,K(K({buttonStyle:"dangerSecondary",disabled:i},r),{},{onClick:function(){return d(!0)},children:[(0,U.jsx)(W.V,{size:"1em"}),(0,U.jsx)($.Dr,{ml:"6px",children:(0,U.jsx)(w.Z,{id:"actions.delete",defaultMessage:[{type:0,value:"Delete"}]})})]})),l&&(0,U.jsx)(G.ZP,{onDelete:t,expense:n,showDeleteConfirmMoreActions:d})]})};X.__docgenInfo={description:"",methods:[],displayName:"DeleteExpenseButton",props:{isDisabled:{description:"",type:{name:"bool"},required:!1},expense:{description:"",type:{name:"shape",value:{id:{name:"string",required:!0},legacyId:{name:"number",required:!0}}},required:!1},onDelete:{description:"",type:{name:"func"},required:!1},buttonProps:{description:"",type:{name:"object"},required:!1},onModalToggle:{description:"Called when a modal is opened/closed with a boolean like (isOpen)",type:{name:"func"},required:!1}}};var Q=t(9830),J=t(71698),ee=t(11831),en=t(63551),et=t(65842),er=t(6512),ei=t(90374),ea=["expense"];function eo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function es(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eo(Object(t),!0).forEach(function(n){p()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eo(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var el=(0,A.defineMessages)({reasonPlaceholder:{id:"mOdpl+",defaultMessage:[{type:0,value:"e.g. Failed transfer"}]}}),eu=function(e){var n=e.expense,t=f()(e,ea),r=(0,S.Z)(),i=x.useMemo(function(){return[{value:J.R1F.APPROVED,label:(0,ee.zr)(r,J.g26.APPROVED)},{value:J.R1F.INCOMPLETE,label:(0,ee.zr)(r,J.g26.INCOMPLETE)},{value:J.R1F.ERROR,label:(0,ee.zr)(r,J.g26.ERROR)}]},[r]),a=x.useState(i[0]),o=c()(a,2),s=o[0],u=o[1],d=x.useState(!1),p=c()(d,2),m=p[0],g=p[1],v=x.useState(),h=c()(v,2),b=h[0],j=h[1],C=x.useState(!1),P=c()(C,2),O=P[0],A=P[1],T=x.useState(!0),I=c()(T,2),M=I[0],N=I[1],Z=(0,Q.Z)({expense:n}),k=x.useCallback(l()(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.markAsUnpaid({paymentParams:{markAsUnPaidStatus:s.value,shouldRefundPaymentProcessorFee:M},message:b});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,q.Am)({variant:"error",message:(0,E.t2)(r,e.t0)});case 8:A(!1);case 9:case"end":return e.stop()}},e,null,[[0,5]])})),[Z,s,M,b]),R=(0,U.jsx)(D.Z,es(es({},t),{},{buttonStyle:"dangerSecondary",onClick:function(){return A(!0)},children:(0,U.jsx)(w.Z,{id:"expense.markAsUnpaid.btn",defaultMessage:[{type:0,value:"Mark as unpaid"}]})}));return O?(0,U.jsxs)(x.Fragment,{children:[R,(0,U.jsxs)(L.Z,{id:"mark-expense-as-unpaid-modal",header:(0,U.jsx)(w.Z,{id:"Expense.markAsUnpaid",defaultMessage:[{type:0,value:"Mark expense as unpaid"}]}),width:"100%",minWidth:280,maxWidth:450,isDanger:!0,onClose:function(){return A(!1)},disableSubmit:m,continueHandler:k,children:[(0,U.jsx)($.__,{mb:2,children:(0,U.jsx)(w.Z,{id:"Expense.markAsUnpaid.newStatus",defaultMessage:[{type:0,value:"New status"}]})}),(0,U.jsx)(en.xu,{children:(0,U.jsx)(ei.ZP,{inputId:"new-expense-status",options:i,onChange:function(e){return u(e)},value:s,width:"100%"})}),(0,U.jsxs)(en.xu,{mt:3,children:[(0,U.jsx)(er.Z,{name:"processorFeeRefunded",checked:M,onChange:function(e){return N(e.checked)},label:(0,U.jsx)(w.Z,{id:"processorFeeRefunded.checkbox.label",defaultMessage:[{type:0,value:"Also refund payment processor fees?"}]})}),(0,U.jsx)($.P,{fontSize:"14px",lineHeight:"18px",color:"black.600",ml:"1.4rem",children:(0,U.jsx)(w.Z,{id:"Expense.markAsUnpaid.details",defaultMessage:[{type:0,value:"The amount will be credited back to the Collective balance."}]})})]}),(0,U.jsx)(en.xu,{mt:3,children:(0,U.jsx)(et.default,{kind:"COMMENT",version:"simplified",withBorders:!0,editorMinHeight:120,placeholder:r.formatMessage(el.reasonPlaceholder),fontSize:"13px",onChange:function(e){return j(e.target.value)},setUploading:g})})]})]}):R};eu.__docgenInfo={description:"",methods:[],displayName:"MarkExpenseAsUnpaidButton",props:{expense:{required:!0,tsType:{name:"Pick",elements:[{name:"Expense"},{name:"union",raw:"'id' | 'legacyId' | 'permissions'",elements:[{name:"literal",value:"'id'"},{name:"literal",value:"'legacyId'"},{name:"literal",value:"'permissions'"}]}],raw:"Pick<Expense, 'id' | 'legacyId' | 'permissions'>"},description:""},onConfirm:{description:"",type:{name:"func"},required:!0}}};var ec=t(64721),ed=t.n(ec),ep=t(27361),em=t.n(ep),ef=t(17681),eg=t(60253),ev=t(73158),eh=t(74197),ey=t(79613),ex=t(59854),eb=t.n(ex),ej=t(50361),eC=t.n(ej),eP=t(21804),eO=t.n(eP),eA=t(37887),ew=t(84046),eS=t(59433),eT=t(16678),eI=t(75801),eM=t(29582),eE=t(28407),eN=t(60756),eZ=t(52063),ek=t(98936),eR=t(69755),eD=t(21928),eF=t(94044),eq=t(61429),e_=t(29789),eL=t(58441),eH=t(76132),ez=t(11457),eU=t(8295);function eB(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function eV(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eB(Object(t),!0).forEach(function(n){p()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eW=(0,N.Ps)(r||(r=v()(["\n  query QuoteExpense($id: String!) {\n    expense(expense: { id: $id }) {\n      id\n      currency\n      amountInHostCurrency: amountV2(currencySource: HOST) {\n        exchangeRate {\n          value\n        }\n      }\n      host {\n        id\n        transferwise {\n          id\n          amountBatched {\n            valueInCents\n            currency\n          }\n          balances {\n            valueInCents\n            currency\n          }\n        }\n      }\n      quote {\n        paymentProcessorFeeAmount {\n          valueInCents\n          currency\n        }\n        sourceAmount {\n          valueInCents\n          currency\n        }\n        estimatedDeliveryAt\n      }\n    }\n  }\n"]))),e$=(0,N.Ps)(i||(i=v()(["\n  query ValidateTransferRequirements($id: String!, $details: JSON) {\n    expense(expense: { id: $id }) {\n      id\n      validateTransferRequirements(details: $details) {\n        type\n        fields {\n          name\n          group {\n            key\n            name\n            type\n            required\n            example\n            minLength\n            maxLength\n            validationRegexp\n            refreshRequirementsOnChange\n            valuesAllowed {\n              key\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),eG=function(e){var n,t,r=e.expense,i=e.setDisabled,a=(0,eS.u6)(),o=(0,eA.a)(e$,{variables:{id:r.id},context:N.Tn}),s=o.data,l=o.loading,u=o.error;return((0,x.useEffect)(function(){i(l)},[l]),u)?(0,U.jsxs)(eR.Z,{fontSize:"12px",type:"error",children:[(0,U.jsx)(w.Z,{id:"PayExpense.Error.TransferDetails",defaultMessage:[{type:0,value:"There was an error fetching the transfer required details."}]}),u.message&&" ".concat(u.message)]}):l?(0,U.jsx)(ek.Z,{height:"40px"}):null==s?void 0:null===(n=s.expense)||void 0===n?void 0:null===(t=n.validateTransferRequirements)||void 0===t?void 0:t.map(function(e){return e.fields.map(function(e){return(0,U.jsx)(eH.NI,{field:e,formik:a,getFieldName:function(e){return"transfer.".concat(e)},loading:l},eO()(e.name))})})},eY=function(e,n,t){var r=null==e?void 0:e.type;if(r===ev.Nk.OTHER||(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.type)==="brazil"||r===ev.Nk.BANK_ACCOUNT&&!t.transferwise||!n)return{forceManual:!0,action:"PAY"};var i,a,o,s="ACTIVE"===t.features[eI.h6.PAYPAL_PAYOUTS]&&r===ev.Nk.PAYPAL&&(null===(a=t.supportedPayoutMethods)||void 0===a?void 0:a.includes(ev.Nk.PAYPAL)),l=r===ev.Nk.BANK_ACCOUNT&&(null===(o=t.supportedPayoutMethods)||void 0===o?void 0:o.includes(ev.Nk.BANK_ACCOUNT))&&(0,eI.ZP)(t,eI.h6.TRANSFERWISE_OTT);return{forceManual:!1,action:s||l?"SCHEDULE_FOR_PAYMENT":"PAY"}},eK=Object.freeze({paymentProcessorFeeInHostCurrency:null,totalAmountPaidInHostCurrency:null,feesPayer:"COLLECTIVE"}),eX=function(e){var n={};return isNaN(e.paymentProcessorFeeInHostCurrency)&&(n.paymentProcessorFeeInHostCurrency=(0,E.Tr)(E.pn.FORM_FIELD_PATTERN)),isNaN(e.totalAmountPaidInHostCurrency)&&(n.totalAmountPaidInHostCurrency=(0,E.Tr)(E.pn.FORM_FIELD_PATTERN)),n},eQ=function(e,n,t,r,i){var a,o=[ev.Nk.BANK_ACCOUNT,ev.Nk.OTHER].includes(null===(a=e.payoutMethod)||void 0===a?void 0:a.type),s=e.amount===em()(n,"stats.balanceWithBlockedFunds.valueInCents"),l=e.currency===(null==n?void 0:n.currency);return!!o&&!!l&&(!!s||!!i)&&(!t||!!r)},eJ=T.ZP.div.withConfig({displayName:"PayExpenseModal__AmountLine",componentId:"sc-uz0v6x-0"})(["display:flex;justify-content:space-between;font-weight:400;padding:9px 0;font-weight:400;line-height:18px;letter-spacing:0em;"," ",""],eT.Cg,eT.Dh),e0=(0,T.ZP)($.Dr).withConfig({displayName:"PayExpenseModal__Label",componentId:"sc-uz0v6x-1"})(["margin-right:4px;flex:0 1 70%;margin-right:8px;line-height:18px;word-break:break-word;color:#4e5052;"," "," font-size:12px;"],eT.$_,eT.cp),e1=T.ZP.span.withConfig({displayName:"PayExpenseModal__Amount",componentId:"sc-uz0v6x-2"})(["flex:1 1 30%;text-align:right;font-size:14px;white-space:nowrap;display:flex;flex-direction:row-reverse;& > *{margin-left:4px;}"]),e2=T.ZP.p.withConfig({displayName:"PayExpenseModal__SectionLabel",componentId:"sc-uz0v6x-3"})(["font-size:9px;font-weight:500;color:#4e5052;margin:5px 0;text-transform:uppercase;"]),e6=function(e){var n=e.formik,t=e.expense,r=e.quote,i=e.host,a=e.feesPayer;if(n.values.forceManual){var o={valueInCents:n.values.totalAmountPaidInHostCurrency,currency:i.currency},s={valueInCents:n.values.paymentProcessorFeeInHostCurrency,currency:i.currency},l=o.valueInCents-(s.valueInCents||0);return{paymentProcessorFee:s,totalAmount:o,effectiveRate:t.currency!==i.currency&&l/t.amount}}if(!r)return{};var u=t.currency!==i.currency&&r.sourceAmount.valueInCents/t.amount,c=eC()(r.sourceAmount);return"PAYEE"===a&&(c.valueInCents-=r.paymentProcessorFeeAmount.valueInCents),{paymentProcessorFee:r.paymentProcessorFeeAmount,totalAmount:c,effectiveRate:u}},e3=function(e,n,t){var r;return r=l()(y().mark(function r(i){return y().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(i.forceManual&&i.paymentProcessorFeeInHostCurrency&&i.paymentProcessorFeeInHostCurrency>i.totalAmountPaidInHostCurrency/2&&!confirm(e.formatMessage({id:"UW7XhX",defaultMessage:[{type:0,value:"You are about to record a payment for "},{type:1,value:"totalAmount"},{type:0,value:" that includes a "},{type:1,value:"paymentProcessorFeeAmount"},{type:0,value:" payment processor fee. This fee looks unusually high."},{type:1,value:"newLine"},{type:1,value:"newLine"},{type:0,value:"Are you sure you want to do this?"}]},{totalAmount:(0,eh.xG)(i.totalAmountPaidInHostCurrency,n),paymentProcessorFeeAmount:(0,eh.xG)(i.paymentProcessorFeeInHostCurrency,n),newLine:"\n"})))){r.next=2;break}return r.abrupt("return");case 2:return r.abrupt("return",t(i));case 3:case"end":return r.stop()}},r)})),function(e){return r.apply(this,arguments)}},e9=function(e){var n,t,r,i,a,o,s,l,u,d,p,m,f,g,v=e.onClose,h=e.onSubmit,y=e.expense,b=e.collective,j=e.host,C=e.error,P=e.LoggedInUser,O=(0,S.Z)(),A=(null===(n=y.payoutMethod)||void 0===n?void 0:n.type)||ev.Nk.OTHER,T=eV(eV(eV({},eK),eY(y.payoutMethod,!0,j)),{},{feesPayer:y.feesPayer||eK.feesPayer,totalAmountPaidInHostCurrency:y.currency===j.currency?y.amount:null}),I=(0,eS.TA)({initialValues:T,validate:eX,onSubmit:e3(O,j.currency,h)}),M=A===ev.Nk.OTHER||I.values.forceManual,E=(0,eM.Z)(O,A,{aliasBankAccountToTransferWise:!0}),Z=A===ev.Nk.BANK_ACCOUNT&&null===j.transferwise,k="SCHEDULE_FOR_PAYMENT"===I.values.action,R=![ev.Nk.OTHER,ev.Nk.ACCOUNT_BALANCE].includes(A),q=x.useState(!1),_=c()(q,2),L=_[0],H=_[1],z=(null===(t=j.settings)||void 0===t?void 0:null===(r=t.transferwise)||void 0===r?void 0:r.transferDetails)===!0,B=j.transferwise&&A===ev.Nk.BANK_ACCOUNT,V=(0,eA.a)(eW,{variables:{id:y.id},context:N.Tn,skip:!B}),W=(0,eN.ol)(y.amount,y.taxes),G=e6({formik:I,expense:y,quote:null===(i=V.data)||void 0===i?void 0:null===(a=i.expense)||void 0===a?void 0:a.quote,host:j,feesPayer:I.values.feesPayer}),Y=null===(o=V.data)||void 0===o?void 0:null===(s=o.expense.host)||void 0===s?void 0:s.transferwise.amountBatched,K=null===(l=V.data)||void 0===l?void 0:null===(u=l.expense.host)||void 0===u?void 0:u.transferwise.balances.find(function(e){return e.currency===(null==Y?void 0:Y.currency)}),X=B&&K&&Y&&K.valueInCents>=Y.valueInCents+(null===(d=G.totalAmount)||void 0===d?void 0:d.valueInCents);return(0,U.jsxs)(e_.ZP,{onClose:v,width:"100%",minWidth:280,maxWidth:400,trapFocus:!0,children:[(0,U.jsx)(e_.xB,{children:(0,U.jsx)($.H4,{fontSize:"20px",fontWeight:"700",children:(0,U.jsx)(w.Z,{id:"PayExpenseTitle",defaultMessage:[{type:0,value:"Pay expense"}]})})}),(0,U.jsx)(e_.fe,{mb:0,children:(0,U.jsx)("form",{onSubmit:I.handleSubmit,children:(0,U.jsxs)(eS.Hy,{value:I,children:[(0,U.jsx)(e2,{children:(0,U.jsx)(w.Z,{id:"ExpenseForm.PayoutOptionLabel",defaultMessage:[{type:0,value:"Payout method"}]})}),(0,U.jsx)(en.xu,{mb:2,children:(0,U.jsx)(eU.Z,{type:A})}),(0,U.jsx)(ez.Z,{payoutMethod:y.payoutMethod,showLabel:!1}),R&&!Z&&(0,U.jsx)(eD.Z,{items:["AUTO","MANUAL"],buttonProps:{width:"50%"},buttonPropsBuilder:function(e){var n=e.item;return{"data-cy":"pay-type-".concat(n)}},mt:3,selected:I.values.forceManual?"MANUAL":"AUTO",customBorderRadius:"6px",onChange:function(e){I.setValues(eV(eV(eV({},I.values),eY(A,"AUTO"===e,j)),{},{paymentProcessorFeeInHostCurrency:null,totalAmountPaidInHostCurrency:y.currency===j.currency?y.amount:null,feesPayer:eQ(y,b,M,null,P.isRoot)?I.values.feesPayer:eK.feesPayer}))},children:function(e){return"AUTO"===e.item?(0,U.jsx)(w.Z,{id:"Payout.Automatic",defaultMessage:[{type:0,value:"Automatic"}]}):(0,U.jsx)(w.Z,{id:"Payout.Manual",defaultMessage:[{type:0,value:"Manual"}]})}}),M&&(0,U.jsxs)(x.Fragment,{children:[(0,U.jsx)(eq.Z,{name:"totalAmountPaidInHostCurrency",htmlFor:"totalAmountPaidInHostCurrency",inputType:"number",error:I.errors.totalAmountPaidInHostCurrency,required:!0,mt:3,label:(0,U.jsx)(w.Z,{id:"PayExpense.totalAmountPaidInHostCurrency.Input",defaultMessage:[{type:0,value:"Total amount paid"}]}),hint:(0,U.jsx)(w.Z,{id:"PayExpense.totalAmountPaidInHostCurrency.Hint",defaultMessage:[{type:0,value:"The total amount debited from your account."}]}),children:function(e){return(0,U.jsx)(eF.Z,eV(eV({},e),{},{currency:j.currency,currencyDisplay:"FULL",value:I.values.totalAmountPaidInHostCurrency,placeholder:"0.00",maxWidth:"100%",min:1,onChange:function(e){return I.setFieldValue("totalAmountPaidInHostCurrency",e)}}))}}),(0,U.jsx)(eq.Z,{name:"paymentProcessorFeeInHostCurrency",htmlFor:"paymentProcessorFeeInHostCurrency",inputType:"number",error:I.errors.paymentProcessorFeeInHostCurrency,required:!1,mt:3,label:(0,U.jsx)(w.Z,{id:"PayExpense.ProcessorFeesInput",defaultMessage:[{type:0,value:"Payment processor fees"}]}),hint:(0,U.jsx)(w.Z,{id:"PayExpense.paymentProcessorFeeInHostCurrency.Hint",defaultMessage:[{type:0,value:"Amount in fees, included in the total amount paid."}]}),children:function(e){return(0,U.jsx)(eF.Z,eV(eV({},e),{},{currency:j.currency,currencyDisplay:"FULL",value:I.values.paymentProcessorFeeInHostCurrency,placeholder:"0.00",maxWidth:"100%",min:0,max:I.values.totalAmountPaidInHostCurrency||1e8,onChange:function(e){return I.setFieldValue("paymentProcessorFeeInHostCurrency",e)}}))}})]}),B&&z&&!M&&(0,U.jsx)("div",{className:"mt-3",children:(0,U.jsx)(eG,{expense:y,setDisabled:H})}),eQ(y,b,M,I.values.paymentProcessorFeeInHostCurrency,P.isRoot)&&(0,U.jsx)(en.kC,{mt:16,children:(0,U.jsx)(F.Z,{content:(0,U.jsx)(w.Z,{id:"ewvfiF",defaultMessage:[{type:0,value:"Check this box to have the payee cover the cost of payment processor fees (useful to zero balance)"}]}),children:(0,U.jsx)(er.Z,{name:"feesPayer",checked:"PAYEE"===I.values.feesPayer,onChange:function(e){var n=e.checked;return I.setFieldValue("feesPayer",n?"PAYEE":"COLLECTIVE")},label:(0,U.jsx)($.Dr,{fontSize:"12px",children:(0,U.jsx)(w.Z,{id:"zoC8Gb",defaultMessage:[{type:0,value:"The payee is covering the fees"}]})})})})}),(0,U.jsxs)(en.xu,{mt:19,mb:3,children:[(0,U.jsx)(e2,{children:(0,U.jsx)(w.Z,{id:"PaymentBreakdown",defaultMessage:[{type:0,value:"Payment breakdown"}]})}),(0,U.jsxs)(eJ,{children:[(0,U.jsx)(e0,{children:(0,U.jsx)(w.Z,{id:"ExpenseAmount",defaultMessage:[{type:0,value:"Expense amount"}]})}),(0,U.jsx)(e1,{children:(0,U.jsx)(eZ.Z,{amountStyles:{fontWeight:500},amount:W,currency:y.currency,currencyCodeStyles:{color:"black.500"}})})]}),null===(p=y.taxes)||void 0===p?void 0:p.map(function(e){return(0,U.jsxs)(eJ,{pt:0,children:[(0,U.jsxs)(e0,{children:[(0,eE.m)(O,e.type,"short")," (",eb()(100*e.rate,2)||0,"%)"]}),"\xa0",(0,U.jsx)(e1,{children:(0,U.jsx)(eZ.Z,{amount:(0,eN.L0)(W,e),precision:2,currency:y.currency,amountStyles:{fontWeight:500},showCurrencyCode:!1})})]},e.type)}),G.paymentProcessorFee&&(0,U.jsxs)(eJ,{borderTop:"0.8px dashed #9D9FA3",children:[(0,U.jsx)(e0,{children:(0,U.jsx)(w.Z,{id:"PayExpense.ProcessorFeesInput",defaultMessage:[{type:0,value:"Payment processor fees"}]})}),(0,U.jsx)(e1,{children:V.loading?(0,U.jsx)(ek.Z,{height:"16px"}):(0,U.jsx)(eZ.Z,{amount:G.paymentProcessorFee.valueInCents,currency:G.paymentProcessorFee.currency,currencyCodeStyles:{color:"black.500"},amountStyles:{fontWeight:500,color:"black.900"}})})]}),(0,U.jsxs)(eJ,{borderTop:"1px solid #4E5052",pt:11,children:[(0,U.jsx)(e0,{color:"black.900",fontWeight:"600",children:null!==G.paymentProcessorFee?(0,U.jsx)(w.Z,{id:"TotalAmount",defaultMessage:[{type:0,value:"Total amount"}]}):(0,U.jsx)(w.Z,{id:"TotalAmountWithoutFee",defaultMessage:[{type:0,value:"Total amount (without fees)"}]})}),(0,U.jsx)(e1,{children:V.loading?(0,U.jsx)(ek.Z,{height:"16px"}):(0,U.jsx)(eZ.Z,{amount:null===(m=G.totalAmount)||void 0===m?void 0:m.valueInCents,currency:null===(f=G.totalAmount)||void 0===f?void 0:f.currency,currencyCodeStyles:{color:"black.500"}})})]}),G.effectiveRate?(0,U.jsxs)(eJ,{py:0,children:[(0,U.jsx)(e0,{color:"black.600",fontWeight:"500",children:(0,U.jsx)(w.Z,{id:"jLTPuL",defaultMessage:[{type:0,value:"Currency exchange rate"}]})}),(0,U.jsxs)($.P,{fontSize:"13px",color:"black.600",whiteSpace:"nowrap",children:["~ ",y.currency," 1 = ",null===(g=G.totalAmount)||void 0===g?void 0:g.currency," ",eb()(G.effectiveRate,5)]})]}):null]}),!C&&I.values.forceManual&&A!==ev.Nk.OTHER&&(0,U.jsxs)(eR.Z,{type:"warning",withIcon:!0,my:3,fontSize:"12px",children:[(0,U.jsx)("strong",{children:(0,U.jsx)(w.Z,{id:"Warning.Important",defaultMessage:[{type:0,value:"Important"}]})}),(0,U.jsx)("br",{}),(0,U.jsx)($.P,{mt:2,fontSize:"12px",lineHeight:"18px",children:(0,U.jsx)(w.Z,{id:"PayExpenseModal.ManualPayoutWarning",defaultMessage:[{type:0,value:"By clicking below, you acknowledge that this expense has already been paid "},{type:1,value:"payoutMethod"},{type:0,value:"."}],values:{payoutMethod:Z?"manually":"via ".concat(E)}})})]}),B&&!1===X&&(0,U.jsxs)(eR.Z,{type:"error",withIcon:!0,my:3,fontSize:"12px",children:[(0,U.jsx)("strong",{children:(0,U.jsx)(w.Z,{id:"Warning.NotEnoughFunds",defaultMessage:[{type:0,value:"Not Enough Funds"}]})}),(0,U.jsx)("br",{}),(0,U.jsx)($.P,{mt:2,fontSize:"12px",lineHeight:"18px",children:(0,U.jsx)(w.Z,{id:"PayExpenseModal.NotEnoughFundsOnWise",defaultMessage:[{type:0,value:"Your Wise "},{type:1,value:"currency"},{type:0,value:" account has insufficient balance to cover the existing batch plus this expense amount. You need "},{type:1,value:"totalNeeded"},{type:0,value:" and you currently only have "},{type:1,value:"available"},{type:0,value:". Please add funds to your Wise "},{type:1,value:"currency"},{type:0,value:" account."}],values:{currency:K.currency,totalNeeded:(0,eh.xG)(Y.valueInCents+G.totalAmount.valueInCents,Y.currency),available:(0,eh.xG)(K.valueInCents,K.currency)}})})]}),(0,U.jsx)(en.kC,{flexWrap:"wrap",justifyContent:"space-evenly",children:(0,U.jsx)(D.Z,{buttonStyle:"success",width:"100%",m:1,type:"submit",loading:I.isSubmitting,disabled:L||V.loading||B&&!1===X,children:M?(0,U.jsxs)(x.Fragment,{children:[(0,U.jsx)(ew.J,{size:"1.5em"}),(0,U.jsx)(e5,{ml:1,children:(0,U.jsx)(w.Z,{id:"expense.markAsPaid",defaultMessage:[{type:0,value:"Mark as paid"}]})})]}):k?(0,U.jsx)(w.Z,{id:"expense.schedule.btn",defaultMessage:[{type:0,value:"Schedule to Pay with "},{type:1,value:"paymentMethod"}],values:{paymentMethod:E}}):(0,U.jsx)(w.Z,{id:"expense.pay.btn",defaultMessage:[{type:0,value:"Pay with "},{type:1,value:"paymentMethod"}],values:{paymentMethod:E}})})})]})})})]})};e9.__docgenInfo={description:"Modal displayed by `PayExpenseButton` to trigger the actual payment of an expense",methods:[],displayName:"PayExpenseModal",props:{expense:{required:!0,tsType:{name:"Expense"},description:""},collective:{required:!0,tsType:{name:"Pick",elements:[{name:"Account"},{name:"literal",value:"'currency'"}],raw:"Pick<Account, 'currency'>"},description:""},host:{required:!0,tsType:{name:"Pick",elements:[{name:"Host"},{name:"union",raw:"'plan' | 'slug' | 'currency' | 'transferwise' | 'settings'",elements:[{name:"literal",value:"'plan'"},{name:"literal",value:"'slug'"},{name:"literal",value:"'currency'"},{name:"literal",value:"'transferwise'"},{name:"literal",value:"'settings'"}]}],raw:"Pick<Host, 'plan' | 'slug' | 'currency' | 'transferwise' | 'settings'>"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(values: any) => Promise<void>",signature:{arguments:[{name:"values",type:{name:"any"}}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},error:{required:!1,tsType:{name:"any"},description:""},LoggedInUser:{required:!0,tsType:{name:"any"},description:""}}};var e4=(0,eL.ns)(e9),e5=(0,T.ZP)($.Dr).withConfig({displayName:"PayExpenseModal___StyledSpan",componentId:"sc-uz0v6x-4"})({verticalAlign:"middle"}),e8=t(13311),e7=t.n(e8),ne=t(39693),nn=t.n(ne),nt=t(8804),nr=t.n(nt),ni=t(44908),na=t.n(ni),no=t(7980),ns=t.n(no),nl=t(14035),nu=t.n(nl),nc=t(10090),nd=t(21185),np=t(50056),nm=t(25205),nf=t(54463),ng=t(2734),nv=t(17843),nh=t(29126),ny=t(51735),nx=t(60659),nb=["expense","onClose","onConfirm"],nj=["expense"];function nC(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nP(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nC(Object(t),!0).forEach(function(n){p()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nC(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nO=(0,T.ZP)(en.kC).withConfig({displayName:"SecurityChecksModal__SecurityCheckItem",componentId:"sc-2aghzm-0"})(["justify-content:space-between;min-height:72px;padding:12px 16px;:not(:last-child){border-bottom:1px solid ",";}"],(0,np.R)("colors.black.300")),nA={PASS:"success",HIGH:"error",MEDIUM:"warning",LOW:"info"},nw=["HIGH","MEDIUM","LOW","PASS"],nS=function(e){var n;return(null==e?void 0:null===(n=e.securityChecks)||void 0===n?void 0:n.filter(function(e){return"HIGH"===e.level}).length)>0},nT=function(e){var n=x.useState(!1),t=c()(n,2),r=t[0],i=t[1];return(0,U.jsxs)(nO,{children:[(0,U.jsxs)(en.kC,{flexDirection:"column",alignItems:"start",children:[(0,U.jsx)(en.xu,{children:(0,U.jsx)(nx.Z,{type:nA[e.level],fontWeight:"700",fontSize:"12px",lineHeight:"16px",p:"2px 6px",mb:2,children:nu()(e.scope)})}),(0,U.jsx)($.P,{fontWeight:"500",fontSize:"14px",lineHeight:"20px",children:e.message}),r&&(0,U.jsx)($.P,{mt:2,fontWeight:"500",fontSize:"12px",lineHeight:"20px",children:e.details})]}),e.details&&(0,U.jsx)(en.kC,{alignItems:"center",children:(0,U.jsxs)(nh.Z,{fontWeight:"500",fontSize:"13px",lineHeight:"16px",ml:2,color:"blue.500",onClick:function(){return i(!r)},minWidth:"max-content",children:[r?(0,U.jsx)(w.Z,{id:"jBYmhn",defaultMessage:[{type:0,value:"Hide Details"}]}):(0,U.jsx)(w.Z,{id:"kRqDOg",defaultMessage:[{type:0,value:"Show Details"}]}),r?(0,U.jsx)(nd.K,{size:"1em"}):(0,U.jsx)(nc._,{size:"1em"})]})})]},e.message)},nI=(0,A.defineMessages)((a={ALL:{id:"SecurityScope.All",defaultMessage:[{type:0,value:"All Scopes"}]}},p()(a,"PAYEE",{id:"SecurityScope.Payee",defaultMessage:[{type:0,value:"Payee"}]}),p()(a,"USER",{id:"Tags.USER",defaultMessage:[{type:0,value:"User"}]}),p()(a,"COLLECTIVE",{id:"Collective",defaultMessage:[{type:0,value:"Collective"}]}),p()(a,"PAYOUT_METHOD",{id:"SecurityScope.PayoutMethod",defaultMessage:[{type:0,value:"Payout Method"}]}),a)),nM=function(e){var n,t=e.expense,r=e.onClose,i=e.onConfirm,a=f()(e,nb),o=(0,S.Z)(),s=x.useState(),l=c()(s,2),u=l[0],d=l[1];return(0,U.jsxs)(e_.ZP,nP(nP({trapFocus:!0,onClose:r,width:"680px"},a),{},{children:[(0,U.jsx)(e_.xB,{onClose:r,children:(0,U.jsxs)(en.xu,{children:[(0,U.jsx)($.H1,{color:"black.900",fontSize:"20px",lineHeight:"28px",children:i?(0,U.jsx)(w.Z,{id:"SecurityChecksModal.confirm.title",defaultMessage:[{type:0,value:"Are you sure you want to pay?"}]}):(0,U.jsx)(w.Z,{id:"SecurityChecksModal.title",defaultMessage:[{type:0,value:"Security Checks"}]})}),(0,U.jsx)($.P,{mt:2,color:"black.700",fontWeight:"400",fontSize:"14px",lineHeight:"20px",children:(0,U.jsx)(w.Z,{id:"SecurityChecksModal.subtitle",defaultMessage:[{type:0,value:"Multiple Security Checks have been flagged for this Expense. Please review and proceed with caution."}]})})]})}),(0,U.jsxs)(e_.fe,{mb:0,mt:"24px",children:[(0,U.jsx)(nv.Z,{p:0,filters:["ALL"].concat(ns()(na()(null==t?void 0:null===(n=t.securityChecks)||void 0===n?void 0:n.map(function(e){return e.scope})))),getLabel:function(e){return o.formatMessage(nI[e])},onChange:function(e){return"ALL"===e?d():d(e)},selected:u}),(0,U.jsx)(ng.Z,{mt:3,children:t.securityChecks.filter(function(e){return!u||e.scope===u}).map(function(e){return(0,U.jsx)(nT,nP({},e),e.message)})})]}),i&&(0,U.jsx)(e_.mz,{isFullWidth:!0,children:(0,U.jsxs)(en.kC,{justifyContent:"space-between",children:[(0,U.jsx)(D.Z,{onClick:r,children:(0,U.jsx)(w.Z,{id:"actions.cancel",defaultMessage:[{type:0,value:"Cancel"}]})}),(0,U.jsx)(D.Z,{buttonStyle:"primary",onClick:i,children:(0,U.jsx)(w.Z,{id:"SecurityChecksModal.confirm.button",defaultMessage:[{type:0,value:"Yes, Continue to Payment"}]})})]})})]}))},nE=T.ZP.div.withConfig({displayName:"SecurityChecksModal__Indicator",componentId:"sc-2aghzm-1"})(["position:absolute;display:flex;justify-content:center;align-items:center;right:0%;top:-10%;bottom:90%;left:70%;border-radius:50%;color:#fff;padding:9px;border:1px solid #fff;background-color:",";font-size:10px;font-weight:700;"],(0,np.R)("colors.red.500")),nN=(0,T.ZP)(ny.Z).withConfig({displayName:"SecurityChecksModal__RoundButton",componentId:"sc-2aghzm-2"})(["position:relative;"]),nZ={PASS:"successSecondary",HIGH:"dangerSecondary",MEDIUM:"warningSecondary",LOW:"secondary"},nk=function(e){var n,t=e.expense,r=f()(e,nj),i=x.useState(!1),a=c()(i,2),o=a[0],s=a[1],l=(null==t?void 0:null===(n=t.securityChecks)||void 0===n?void 0:n.filter(function(e){return"HIGH"===e.level}).length)||0,u=nr()(nn()(nw.map(function(e){return e7()(null==t?void 0:t.securityChecks,{level:e})}))),d=l?nm.Z:nf.Z;return(0,U.jsxs)(x.Fragment,{children:[(0,U.jsxs)(nN,nP(nP({},r),{},{buttonStyle:nZ[null==u?void 0:u.level]||"secondary",onClick:function(){return s(!0)},children:[l?(0,U.jsx)(nE,{children:l}):null,(0,U.jsx)(d,{size:18})]})),o&&(0,U.jsx)(nM,{expense:t,onClose:function(){return s(!1)}})]})};nM.__docgenInfo={description:"",methods:[],displayName:"SecurityChecksModal",props:{onClose:{description:"",type:{name:"func"},required:!0},expense:{description:"",type:{name:"shape",value:{securityChecks:{name:"arrayOf",value:{name:"shape",value:{scope:{name:"string",required:!1},level:{name:"string",required:!1},message:{name:"string",required:!1}}},required:!1}}},required:!1}}},nk.__docgenInfo={description:"",methods:[],displayName:"SecurityChecksButton",props:{onConfirm:{description:"",type:{name:"func"},required:!1},onClose:{description:"",type:{name:"func"},required:!1}}};var nR=["type","host"],nD=["expense","collective","host","disabled","onSubmit","error"],nF=["action"];function nq(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function n_(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nq(Object(t),!0).forEach(function(n){p()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nq(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nL=function(e,n,t,r){var i=(0,eh.KK)(e.amountInAccountCurrency),a=em()(n,"stats.balanceWithBlockedFunds.valueInCents",em()(n,"stats.balanceWithBlockedFunds",0));if(!t)return(0,U.jsx)(w.Z,{id:"expense.pay.error.noHost",defaultMessage:[{type:0,value:"Expenses cannot be paid without a Fiscal Host"}]});if(a<i)return(0,U.jsx)(w.Z,{id:"expense.pay.error.insufficientBalance",defaultMessage:[{type:0,value:"Insufficient balance"}]});if(ed()(e.requiredLegalDocuments,"US_TAX_FORM"))return(0,U.jsx)(w.Z,{id:"TaxForm.DisabledPayment",defaultMessage:[{type:0,value:"Unable to pay because tax form has not been submitted."}]});if(!r)return null;if(r.type===ev.Nk.BANK_ACCOUNT)return null;if(r.type===ev.Nk.ACCOUNT_BALANCE){if(!e.payee.host)return(0,U.jsx)(w.Z,{id:"expense.pay.error.payee.noHost",defaultMessage:[{type:0,value:"Unable to pay because payee Collective does not have a Fiscal Host."}]});if(e.payee.host.id!==t.id)return(0,U.jsx)(w.Z,{id:"expense.pay.error.payee.sameHost",defaultMessage:[{type:0,value:"Payer and payee must have the same Fiscal Host to pay this way."}]})}},nH=function(e){var n=e.type,t=e.host,r=f()(e,nR);return n===ev.Nk.PAYPAL?(0,U.jsx)(ef.z,n_({},r)):n===ev.Nk.BANK_ACCOUNT&&null!=t&&t.transferwise?(0,U.jsx)(ey.Z,n_({},r)):(0,U.jsx)(eg.R,n_({},r))},nz=function(e){var n,t,r=e.expense,i=e.collective,a=e.host,o=e.disabled,s=e.onSubmit,u=e.error,d=f()(e,nD),p=x.useState(!1),m=c()(p,2),g=m[0],v=m[1],h=x.useState(!1),b=c()(h,2),j=b[0],C=b[1],P=nL(r,i,a,r.payoutMethod),O=nS(r),A=(0,U.jsxs)(D.Z,n_(n_({buttonStyle:"successSecondary"},d),{},{disabled:!!(o||P),onClick:function(){return O?C(!0):v(!0)},children:[(0,U.jsx)(nH,{type:null===(t=r.payoutMethod)||void 0===t?void 0:t.type,host:a,size:12}),(0,U.jsx)($.Dr,{ml:"6px",children:(0,U.jsx)(w.Z,{id:"actions.goToPay",defaultMessage:[{type:0,value:"Go to Pay"}]})})]}));return P?(0,U.jsx)(F.Z,{content:P,children:A}):g?(0,U.jsxs)(x.Fragment,{children:[A,(0,U.jsx)(e4,{expense:r,collective:i,host:a,onClose:function(){return v(!1)},error:u,onSubmit:(n=l()(y().mark(function e(n){var t,r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.action,r=f()(n,nF),e.next=3,s(t,r);case 3:e.sent&&v(!1);case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})})]}):j?(0,U.jsxs)(x.Fragment,{children:[A,(0,U.jsx)(nM,{expense:r,onConfirm:function(){v(!0),C(!1)},onClose:function(){return C(!1)}})]}):A};nz.__docgenInfo={description:"",methods:[],displayName:"PayExpenseButton",props:{expense:{description:"",type:{name:"shape",value:{id:{name:"string",required:!1},legacyId:{name:"number",required:!1},amount:{name:"number",required:!1},payoutMethod:{name:"shape",value:{type:{name:"enum",computed:!0,value:"Object.values(PayoutMethodType)",required:!1}},required:!1},payee:{name:"shape",value:{host:{name:"shape",value:{id:{name:"string",required:!1}},required:!1}},required:!1}}},required:!0},collective:{description:"",type:{name:"shape",value:{host:{name:"shape",value:{plan:{name:"object",required:!1}},required:!1},stats:{name:"shape",value:{balanceWithBlockedFunds:{name:"union",value:[{name:"number"},{name:"shape",value:{valueInCents:{name:"number",required:!0},currency:{name:"string",required:!0}}}],required:!1}},required:!1}}},required:!0},host:{description:"",type:{name:"shape",value:{id:{name:"string",required:!1},plan:{name:"object",required:!1}}},required:!1},disabled:{description:"To disable the button",type:{name:"bool"},required:!1},onSubmit:{description:'Function called when users click on one of the "Pay" buttons',type:{name:"func"},required:!0},error:{description:"If set, will be displayed in the pay modal",type:{name:"string"},required:!1}}};var nU=["icon","label","permission"];function nB(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nV(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nB(Object(t),!0).forEach(function(n){p()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nW=(0,N.Ps)(o||(o=v()(["\n  mutation ProcessExpense(\n    $id: String\n    $legacyId: Int\n    $action: ExpenseProcessAction!\n    $paymentParams: ProcessExpensePaymentParams\n  ) {\n    processExpense(expense: { id: $id, legacyId: $legacyId }, action: $action, paymentParams: $paymentParams) {\n      id\n      ...ExpensePageExpenseFields\n    }\n  }\n\n  ","\n"])),_.Wg),n$=T.ZP.span.withConfig({displayName:"ProcessExpenseButtons__ButtonLabel",componentId:"sc-fh634o-0"})({marginLeft:6}),nG=function(e){return!!e&&(e.canApprove||e.canUnapprove||e.canReject||e.canPay||e.canMarkAsUnpaid||e.canMarkAsSpam||e.canDelete||e.canUnschedulePayment)},nY=(0,A.defineMessages)({markAsSpamWarning:{id:"Expense.MarkAsSpamWarning",defaultMessage:[{type:0,value:"This will prevent the submitter account to post new expenses. Are you sure?"}]}}),nK=function(e,n,t){var r=null==n?void 0:n.message;return r&&r.startsWith("Insufficient Paypal balance")?{title:e.formatMessage({id:"BmZrOu",defaultMessage:[{type:0,value:"Insufficient Paypal balance"}]}),message:(0,U.jsx)(x.Fragment,{children:(0,U.jsx)(R.Z,{href:"/".concat(t.slug,"/admin"),children:(0,U.jsx)(w.Z,{id:"PayExpenseModal.RefillBalanceError",defaultMessage:[{type:0,value:"Refill your balance from the Host dashboard"}]})})})}:{message:(0,E.t2)(e,n)}},nX=function(e){var n=e.icon,t=e.label,r=e.permission,i=f()(e,nU),a=(0,S.Z)(),o=(0,U.jsxs)(D.Z,nV(nV({},i),{},{disabled:!r.allowed,children:[r.reason?(0,U.jsx)(j.Z,{size:14}):n,t]})),s=r.reason&&a.formatMessage(M[r.reason],r.reasonDetails);return s&&(o=(0,U.jsx)(F.Z,{content:s,children:o})),o},nQ=function(e){var n,t,r=e.expense,i=e.collective,a=e.host,o=e.permissions,s=e.buttonProps,u=e.onSuccess,d=e.onModalToggle,p=e.onDelete,m=e.isMoreActions,f=e.displaySecurityChecks,g=e.isViewingExpenseInHostContext,v=e.disabled,h=x.useState(),j=c()(h,2),A=j[0],T=j[1],M=x.useState(!1),E=c()(M,2),R=E[0],F=E[1],_=x.useState(null),L=c()(_,2),H=L[0],z=L[1],W={context:N.Tn,update:function(e,n){return null==u?void 0:u(n.data.processExpense,e,H)}},$=(0,b.D)(nW,W),G=c()($,2),Y=G[0],K=G[1],Q=K.loading,J=K.error,ee=(0,S.Z)(),en=(0,q.pm)().toast;x.useEffect(function(){return null==d||d(!!A),function(){return null==d?void 0:d(!1)}},[A,d]);var et=(n=l()(y().mark(function e(n,t){var i,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q){e.next=2;break}return e.abrupt("return");case 2:return z(n),e.prev=3,i={id:r.id,legacyId:r.legacyId,action:n,paymentParams:t},o=[],("SCHEDULE_FOR_PAYMENT"===n||"UNSCHEDULE_PAYMENT"===n)&&o.push({query:k.K5,context:N.Tn,variables:(0,k.Gf)(a.slug)}),e.next=9,Y({variables:i,refetchQueries:o});case 9:return e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(3),en(nV({variant:"error"},nK(ee,e.t0,a))),e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[3,12]])})),function(e,t){return n.apply(this,arguments)}),er=function(e){var n=H===e;return nV(nV({},s),{},{disabled:v||Q&&!n,loading:Q&&n})};return(0,U.jsxs)(x.Fragment,{children:[!g&&(o.approve.allowed||o.approve.reason===I.AUTHOR_CANNOT_APPROVE)&&(0,U.jsx)(nX,nV(nV({},er("APPROVE")),{},{onClick:function(){(0,Z.wt)(i,a)?F(!0):et("APPROVE")},buttonStyle:"secondary",icon:(0,U.jsx)(P.J,{size:12}),permission:o.approve,label:(0,U.jsx)(n$,{children:(0,U.jsx)(w.Z,{id:"actions.approve",defaultMessage:[{type:0,value:"Approve"}]})})})),o.canPay&&(0,U.jsx)(nz,nV(nV({},er("PAY")),{},{onSubmit:et,expense:r,collective:i,host:a,error:J})),o.canReject&&!g&&(0,U.jsxs)(D.Z,nV(nV({},er("REJECT")),{},{onClick:function(){return T("REJECT")},buttonStyle:"dangerSecondary",children:[(0,U.jsx)(O.u,{size:14}),(0,U.jsx)(n$,{children:(0,U.jsx)(w.Z,{id:"actions.reject",defaultMessage:[{type:0,value:"Reject"}]})})]})),o.canMarkAsSpam&&!m&&(0,U.jsxs)(D.Z,nV(nV({},er("MARK_AS_SPAM")),{},{buttonStyle:"dangerSecondary",onClick:function(){confirm(ee.formatMessage(nY.markAsSpamWarning))&&et("MARK_AS_SPAM")},children:[(0,U.jsx)(O.u,{size:14}),(0,U.jsx)(n$,{children:(0,U.jsx)(w.Z,{id:"actions.spam",defaultMessage:[{type:0,value:"Mark as Spam"}]})})]})),o.canUnapprove&&!g&&(0,U.jsxs)(D.Z,nV(nV({},er("UNAPPROVE")),{},{onClick:function(){return T("UNAPPROVE")},buttonStyle:"dangerSecondary",children:[(0,U.jsx)(C.K,{size:12}),(0,U.jsx)(n$,{children:(0,U.jsx)(w.Z,{id:"expense.unapprove.btn",defaultMessage:[{type:0,value:"Unapprove"}]})})]})),o.canUnapprove&&g&&(0,U.jsxs)(D.Z,nV(nV({},er("UNAPPROVE")),{},{onClick:function(){return T("REQUEST_RE_APPROVAL")},buttonStyle:"dangerSecondary",children:[(0,U.jsx)(C.K,{size:12}),(0,U.jsx)(n$,{children:(0,U.jsx)(w.Z,{id:"expense.requestReApproval.btn",defaultMessage:[{type:0,value:"Request re-approval"}]})})]})),o.canUnschedulePayment&&(0,U.jsxs)(D.Z,nV(nV({},er("UNSCHEDULE_PAYMENT")),{},{onClick:function(){return et("UNSCHEDULE_PAYMENT")},buttonStyle:"dangerSecondary",children:[(0,U.jsx)(C.K,{size:12}),(0,U.jsx)(n$,{children:(0,U.jsx)(w.Z,{id:"expense.unschedulePayment.btn",defaultMessage:[{type:0,value:"Unschedule Payment"}]})})]})),o.canMarkAsUnpaid&&(0,U.jsx)(eu,nV({expense:r},er("MARK_AS_UNPAID"))),o.canDelete&&!m&&(0,U.jsx)(X,{buttonProps:er(),expense:r,onModalToggle:d,onDelete:p}),f&&(null==r?void 0:null===(t=r.securityChecks)||void 0===t?void 0:t.length)>0&&(0,U.jsx)(nk,nV(nV({},s),{},{minWidth:0,expense:r})),A&&(0,U.jsx)(V.Z,{type:A,onClose:function(){T(null),null==d||d(!1)},expense:r}),R&&(0,U.jsx)(B,{expense:r,host:a,account:i,onConfirm:function(){return et("APPROVE")},onClose:function(){F(!1),null==d||d(!1)}})]})},nJ={buttonSize:"small",minWidth:130};nQ.defaultProps={buttonProps:nJ,displaySecurityChecks:!0,isViewingExpenseInHostContext:!1},nQ.__docgenInfo={description:"All the buttons to process an expense, displayed in a React.Fragment to let the parent\nin charge of the layout.",methods:[],displayName:"ProcessExpenseButtons",props:{buttonProps:{defaultValue:{value:"{\n  buttonSize: 'small',\n  minWidth: 130,\n}",computed:!1},description:"Props passed to all buttons. Useful to customize sizes, spaces, etc.",type:{name:"object"},required:!1},displaySecurityChecks:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},isViewingExpenseInHostContext:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},permissions:{description:"",type:{name:"shape",value:{canApprove:{name:"bool",required:!1},canUnapprove:{name:"bool",required:!1},canReject:{name:"bool",required:!1},canMarkAsSpam:{name:"bool",required:!1},canPay:{name:"bool",required:!1},canMarkAsUnpaid:{name:"bool",required:!1},canMarkAsIncomplete:{name:"bool",required:!1},canUnschedulePayment:{name:"bool",required:!1},canDelete:{name:"bool",required:!1},approve:{name:"shape",value:{allowed:{name:"bool",required:!1},reason:{name:"string",required:!1}},required:!1}}},required:!0},expense:{description:"",type:{name:"shape",value:{id:{name:"string",required:!1},legacyId:{name:"number",required:!1},status:{name:"string",required:!1},securityChecks:{name:"arrayOf",value:{name:"shape",value:{level:{name:"string",required:!1},scope:{name:"string",required:!1},message:{name:"string",required:!1}}},required:!1}}},required:!0},collective:{description:"The account where the expense has been submitted",type:{name:"object"},required:!0},host:{description:"",type:{name:"object"},required:!1},showError:{description:"",type:{name:"bool"},required:!1},onSuccess:{description:"",type:{name:"func"},required:!1},onDelete:{description:"Called when the expense gets deleted",type:{name:"func"},required:!1},isMoreActions:{description:"Checks if the delete action is inside the more actions button",type:{name:"bool"},required:!1},onModalToggle:{description:"Called when a modal is opened/closed with a boolean like (isOpen)",type:{name:"func"},required:!1},displayMarkAsIncomplete:{description:"",type:{name:"bool"},required:!1},disabled:{description:"",type:{name:"bool"},required:!1}}};var n0=nQ},31257:function(e,n,t){t.d(n,{H2:function(){return j},RR:function(){return h},Wg:function(){return x},c8:function(){return v},sU:function(){return g},wq:function(){return y},xe:function(){return b}});var r,i,a,o,s,l,u,c=t(92358),d=t.n(c),p=t(59644),m=t(94083),f=t(96046),g=(0,p.Ps)(r||(r=d()(["\n  fragment LoggedInAccountExpensePayoutFields on Individual {\n    id\n    slug\n    imageUrl\n    type\n    name\n    legalName\n    hasTwoFactorAuth\n    location {\n      id\n      address\n      country\n      structured\n    }\n    payoutMethods {\n      id\n      type\n      name\n      data\n      isSaved\n    }\n    adminMemberships: memberOf(role: ADMIN, includeIncognito: false, accountType: [ORGANIZATION, COLLECTIVE, FUND]) {\n      nodes {\n        id\n        account {\n          id\n          slug\n          imageUrl\n          type\n          name\n          legalName\n          isActive\n          isHost\n          policies {\n            id\n            REQUIRE_2FA_FOR_ADMINS\n          }\n          ... on AccountWithParent {\n            parent {\n              id\n              policies {\n                id\n                REQUIRE_2FA_FOR_ADMINS\n              }\n            }\n          }\n          ... on AccountWithHost {\n            host {\n              id\n              payoutMethods {\n                id\n                type\n                name\n                data\n                isSaved\n              }\n            }\n          }\n          ... on Organization {\n            host {\n              id\n              payoutMethods {\n                id\n                type\n                name\n                data\n                isSaved\n              }\n            }\n          }\n          location {\n            id\n            address\n            country\n            structured\n          }\n          payoutMethods {\n            id\n            type\n            name\n            data\n            isSaved\n          }\n          childrenAccounts {\n            nodes {\n              id\n              slug\n              imageUrl\n              type\n              name\n              isActive\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),v=(0,p.Ps)(i||(i=d()(["\n  fragment AccountingCategoryFields on AccountingCategory {\n    id\n    name\n    friendlyName\n    code\n    expensesTypes\n  }\n"]))),h=(0,p.Ps)(a||(a=d()(["\n  fragment ExpenseHostFields on Host {\n    id\n    name\n    legalName\n    slug\n    type\n    currency\n    isHost\n    expensePolicy\n    website\n    settings\n    features {\n      id\n      MULTI_CURRENCY_EXPENSES\n      PAYPAL_PAYOUTS\n    }\n    paypalPreApproval {\n      id\n      balance {\n        currency\n        valueInCents\n      }\n    }\n    location {\n      id\n      address\n      country\n    }\n    transferwise {\n      id\n      availableCurrencies\n    }\n    supportedPayoutMethods\n    isTrustedHost\n    plan {\n      id\n    }\n    accountingCategories {\n      nodes {\n        id\n        ...AccountingCategoryFields\n      }\n    }\n    policies {\n      id\n      EXPENSE_CATEGORIZATION {\n        requiredForExpenseSubmitters\n        requiredForCollectiveAdmins\n      }\n    }\n  }\n  ","\n"])),v),y=(0,p.Ps)(o||(o=d()(["\n  fragment ExpenseValuesByRoleFragment on ExpenseValuesByRole {\n    id\n    submitter {\n      accountingCategory {\n        ...AccountingCategoryFields\n      }\n    }\n    accountAdmin {\n      accountingCategory {\n        ...AccountingCategoryFields\n      }\n    }\n    hostAdmin {\n      accountingCategory {\n        ...AccountingCategoryFields\n      }\n    }\n  }\n  ","\n"])),v),x=(0,p.Ps)(s||(s=d()(["\n  fragment ExpensePageExpenseFields on Expense {\n    id\n    legacyId\n    description\n    longDescription\n    currency\n    type\n    status\n    onHold\n    privateMessage\n    tags\n    amount\n    accountingCategory {\n      id\n      ...AccountingCategoryFields\n    }\n    valuesByRole {\n      id\n      ...ExpenseValuesByRoleFragment\n    }\n    amountInAccountCurrency: amountV2(currencySource: ACCOUNT) {\n      valueInCents\n      currency\n      exchangeRate {\n        date\n        value\n        source\n        isApproximate\n      }\n    }\n    createdAt\n    invoiceInfo\n    merchantId\n    requiredLegalDocuments\n    feesPayer\n    draft\n    items {\n      id\n      incurredAt\n      description\n      amount\n      amountV2 {\n        valueInCents\n        currency\n        exchangeRate {\n          date\n          value\n          source\n          fromCurrency\n          toCurrency\n        }\n      }\n      referenceExchangeRate {\n        value\n        fromCurrency\n        toCurrency\n      }\n      url\n      file {\n        id\n        ... on ImageFileInfo {\n          width\n        }\n      }\n    }\n    taxes {\n      id\n      type\n      rate\n      idNumber\n    }\n    attachedFiles {\n      id\n      url\n      name\n      info {\n        id\n        name\n        size\n        ... on ImageFileInfo {\n          width\n        }\n      }\n    }\n    payee {\n      id\n      slug\n      name\n      legalName\n      imageUrl\n      hasImage\n      type\n      isAdmin\n      isActive\n      description\n      ...AccountHoverCardFields\n      location {\n        id\n        address\n        country\n      }\n      payoutMethods {\n        id\n        type\n        name\n        data\n        isSaved\n      }\n\n      # For Collectives, Funds, Events and Projects\n      ... on AccountWithHost {\n        isApproved\n        host {\n          id\n          slug\n          # For Expenses across hosts\n          payoutMethods {\n            id\n            type\n            name\n            data\n            isSaved\n          }\n        }\n      }\n\n      # For Fiscal Hosts\n      ... on Organization {\n        host {\n          id\n        }\n      }\n    }\n    payeeLocation {\n      id\n      address\n      country\n      structured\n    }\n    createdByAccount {\n      id\n      slug\n      name\n      type\n      imageUrl\n      ...AccountHoverCardFields\n    }\n    host {\n      id\n      name\n      legalName\n      slug\n      type\n      website\n      location {\n        id\n        address\n        country\n      }\n    }\n    requestedByAccount {\n      id\n      slug\n      name\n      type\n      imageUrl\n      ...AccountHoverCardFields\n    }\n    approvedBy {\n      id\n      type\n      slug\n      name\n      imageUrl\n      ...AccountHoverCardFields\n    }\n    account {\n      id\n      legacyId\n      slug\n      name\n      type\n      imageUrl\n      hasImage\n      backgroundImageUrl\n      isActive\n      description\n      settings\n      twitterHandle\n      currency\n      expensePolicy\n      supportedExpenseTypes\n      features {\n        id\n        ...NavbarFields\n        MULTI_CURRENCY_EXPENSES\n      }\n      expensesTags {\n        id\n        tag\n      }\n      location {\n        id\n        address\n        country\n      }\n\n      stats {\n        id\n        balanceWithBlockedFunds {\n          valueInCents\n          currency\n        }\n      }\n\n      ... on AccountWithParent {\n        parent {\n          id\n          slug\n          imageUrl\n          backgroundImageUrl\n          twitterHandle\n        }\n      }\n\n      ... on AccountWithHost {\n        isApproved\n        hostAgreements {\n          totalCount\n        }\n        host {\n          id\n          slug\n          legacyId\n          ...ExpenseHostFields\n          transferwise {\n            id\n            availableCurrencies\n          }\n        }\n      }\n\n      # For Hosts with Budget capabilities\n\n      ... on Organization {\n        isHost\n        isActive\n        host {\n          id\n          ...ExpenseHostFields\n          transferwise {\n            id\n            availableCurrencies\n          }\n        }\n      }\n\n      ... on Event {\n        parent {\n          id\n          slug\n          name\n          type\n          imageUrl\n        }\n      }\n      ... on Project {\n        parent {\n          id\n          slug\n          name\n          type\n          imageUrl\n        }\n      }\n      ...AccountHoverCardFields\n    }\n    payoutMethod {\n      id\n      type\n      data\n      isSaved\n    }\n    virtualCard {\n      id\n      name\n      last4\n    }\n    permissions {\n      id\n      canEdit\n      canEditTags\n      canEditAccountingCategory\n      canDelete\n      canSeeInvoiceInfo\n      canApprove\n      canUnapprove\n      canReject\n      canMarkAsSpam\n      canPay\n      canMarkAsUnpaid\n      canMarkAsIncomplete\n      canComment\n      canUnschedulePayment\n      canVerifyDraftExpense\n      canUsePrivateNote\n      canHold\n      canRelease\n      approve {\n        allowed\n        reason\n        reasonDetails\n      }\n    }\n    activities {\n      id\n      type\n      createdAt\n      data\n      account {\n        id\n        slug\n        ... on AccountWithHost {\n          host {\n            id\n            slug\n          }\n        }\n      }\n      individual {\n        id\n        type\n        slug\n        name\n        imageUrl\n        ...AccountHoverCardFields\n      }\n      transaction {\n        id\n        amount {\n          valueInCents\n          currency\n        }\n        platformFee {\n          valueInCents\n          currency\n        }\n        hostFee {\n          valueInCents\n          currency\n        }\n        paymentProcessorFee {\n          valueInCents\n          currency\n        }\n        netAmount {\n          valueInCents\n          currency\n        }\n        taxAmount {\n          valueInCents\n          currency\n        }\n        taxInfo {\n          id\n          rate\n          type\n          percentage\n        }\n        fromAccount {\n          id\n          slug\n          name\n          ... on AccountWithHost {\n            hostFeePercent\n          }\n        }\n        toAccount {\n          id\n          slug\n          name\n          ... on AccountWithHost {\n            hostFeePercent\n          }\n        }\n        expense {\n          id\n          currency\n          amount\n        }\n      }\n    }\n    recurringExpense {\n      id\n      interval\n      endsAt\n    }\n    securityChecks {\n      level\n      message\n      scope\n      details\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),h,f.AS,v,m.XQ,y),b=(0,p.Ps)(l||(l=d()(["\n  fragment ExpensesListFieldsFragment on Expense {\n    id\n    legacyId\n    description\n    status\n    createdAt\n    tags\n    amount\n    comments {\n      totalCount\n    }\n    accountingCategory {\n      id\n      ...AccountingCategoryFields\n    }\n    valuesByRole {\n      id\n      ...ExpenseValuesByRoleFragment\n    }\n    amountInAccountCurrency: amountV2(currencySource: ACCOUNT) {\n      valueInCents\n      currency\n      exchangeRate {\n        date\n        value\n        source\n        isApproximate\n      }\n    }\n    currency\n    type\n    requiredLegalDocuments\n    feesPayer\n    account {\n      id\n      name\n      slug\n      createdAt\n      currency\n      type\n      imageUrl\n      stats {\n        id\n        balanceWithBlockedFunds {\n          valueInCents\n          currency\n        }\n      }\n      ... on AccountWithHost {\n        host {\n          id\n          slug\n        }\n      }\n      ... on AccountWithParent {\n        parent {\n          id\n          slug\n        }\n      }\n      ...AccountHoverCardFields\n    }\n    permissions {\n      id\n      canDelete\n      canApprove\n      canUnapprove\n      canReject\n      canMarkAsSpam\n      canPay\n      canMarkAsUnpaid\n      canMarkAsIncomplete\n      canSeeInvoiceInfo\n      canEditTags\n      canEditAccountingCategory\n      canUnschedulePayment\n      canHold\n      canRelease\n      approve {\n        allowed\n        reason\n        reasonDetails\n      }\n    }\n    payoutMethod {\n      id\n      type\n      data\n      isSaved\n    }\n    payee {\n      id\n      type\n      slug\n      name\n      imageUrl\n      hasImage\n      isAdmin\n      # For Collectives, Funds, Events and Projects\n      ... on AccountWithHost {\n        isApproved\n        host {\n          id\n        }\n      }\n\n      # For Fiscal Hosts\n      ... on Organization {\n        host {\n          id\n        }\n      }\n      ...AccountHoverCardFields\n    }\n    createdByAccount {\n      id\n      type\n      slug\n      name\n      ...AccountHoverCardFields\n    }\n  }\n  ","\n  ","\n  ","\n"])),v,y,m.XQ),j=(0,p.Ps)(u||(u=d()(["\n  fragment ExpensesListAdminFieldsFragment on Expense {\n    id\n    onHold\n    account {\n      id\n      ... on AccountWithHost {\n        hostAgreements {\n          totalCount\n        }\n      }\n    }\n    createdByAccount {\n      id\n      ... on Individual {\n        emails\n      }\n    }\n    payee {\n      id\n      ... on Individual {\n        emails\n      }\n    }\n    payoutMethod {\n      id\n      type\n      data\n    }\n    items {\n      id\n      description\n      incurredAt\n      url\n      amount\n      file {\n        id\n        ... on ImageFileInfo {\n          width\n        }\n      }\n    }\n    taxes {\n      id\n      type\n      rate\n    }\n    attachedFiles {\n      id\n      url\n      name\n      info {\n        id\n        ... on ImageFileInfo {\n          width\n        }\n      }\n    }\n    securityChecks {\n      level\n      message\n      scope\n      details\n    }\n  }\n"])))},84037:function(e,n,t){t.d(n,{Z:function(){return c},t:function(){return u}});var r,i,a=t(92358),o=t.n(a),s=t(59644),l=t(31257),u=(0,s.Ps)(r||(r=o()(["\n  mutation EditExpense($expense: ExpenseUpdateInput!, $draftKey: String) {\n    editExpense(expense: $expense, draftKey: $draftKey) {\n      id\n      ...ExpensePageExpenseFields\n    }\n  }\n\n  ","\n"])),l.Wg),c=(0,s.Ps)(i||(i=o()(["\n  mutation EditExpenseCategory($expenseId: String!, $category: AccountingCategoryReferenceInput!) {\n    editExpense(expense: { id: $expenseId, accountingCategory: $category }) {\n      id\n      valuesByRole {\n        id\n        ...ExpenseValuesByRoleFragment\n      }\n      accountingCategory {\n        id\n        ...AccountingCategoryFields\n      }\n    }\n  }\n  ","\n  ","\n"])),l.c8,l.wq)},94069:function(e,n,t){t.d(n,{FO:function(){return s},wt:function(){return l},zp:function(){return u}});var r=t(27361),i=t.n(r),a=t(28770),o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null==e?void 0:e.host;return(0,a.S)(n||e,"EXPENSE_CATEGORIZATION")},s=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==n?void 0:n.host,r=o(n,t);if(r){if(r.requiredForExpenseSubmitters)return!0;if(r.requiredForCollectiveAdmins)return null==e?void 0:e.isAdminOfCollectiveOrHost(n)}return!1},l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null==e?void 0:e.host,t=o(e,n);return!!(null==t?void 0:t.requiredForCollectiveAdmins)},u=function(e,n,t,r){return!!((null==n?void 0:n.accountingCategory)||e&&i()(r,"accountingCategories.nodes",[]).length>0&&(s(e,t,r)||e.hasPreviewFeatureEnabled("EXPENSE_CATEGORIZATION")))}},60756:function(e,n,t){t.d(n,{Fo:function(){return T},L0:function(){return A},Ou:function(){return O},RE:function(){return C},_D:function(){return M},_Y:function(){return E},ol:function(){return I},v:function(){return N},v_:function(){return w},vr:function(){return P}});var r=t(7980),i=t.n(r),a=t(44908),o=t.n(a),s=t(41609),l=t.n(s),u=t(73303),c=t.n(u),d=t(59854),p=t.n(d),m=t(14293),f=t.n(m),g=t(75801),v=t(26704),h=t(19045),y=t(12494),x=t(73158),b=t(74197),j=t(14584),C=.1,P=function(e){var n,t=[v.eV.INDIVIDUAL,v.eV.USER,v.eV.ORGANIZATION];return[y.Z.INVOICE,y.Z.GRANT].includes(e.type)&&((null===(n=e.payee)||void 0===n?void 0:n.isNewUser)||e.payee&&!e.payee.isInvite&&(t.includes(e.payee.type)||e.payee.isHost))},O=function(e){return!f()(e)&&e>=0&&e<=1},A=function(e,n){return Math.round(e*n.rate)},w=function(e,n,t){var r=(0,b.ct)(n,t);return r>C?{error:e.formatMessage({id:"cEI/zq",defaultMessage:[{type:0,value:"This exchange rate is too different from the one in our records ("},{type:1,value:"value"},{type:0,value:") for that date and won't be accepted."}]},{value:p()(t.value,7)})}:r>.02?{warning:e.formatMessage({id:"mLRswr",defaultMessage:[{type:0,value:"This exchange rate looks very different from the one in our records ("},{type:1,value:"value"},{type:0,value:") for this date."}]},{value:p()(t.value,7)})}:null},S=function(e,n){var t;return!!((null===(t=n.amountV2)||void 0===t?void 0:t.valueInCents)&&(n.amountV2.currency===e||n.amountV2.exchangeRate&&n.amountV2.exchangeRate.fromCurrency===n.amountV2.currency&&n.amountV2.exchangeRate.toCurrency===e&&n.amountV2.exchangeRate.value))},T=function(e,n,t){var r=n.every(function(n){return S(e,n)}),i=(null==t?void 0:t.filter(function(e){return!e.isDisabled}))||[],a=!!i.length,o=!a||i.every(function(e){return O(e.rate)}),s=r?c()(n,function(n){var t=n.amountV2.valueInCents;return n.amountV2.currency===e?t:Math.round(t*n.amountV2.exchangeRate.value)}):null,l=c()(i,function(e){return A(s,e)}),u=r&&o?s+l:null;return{hasTaxes:a,totalInvoiced:s,totalAmount:u}},I=function(e,n){return e/(1+c()(n,"rate"))},M=function(e,n){var t=(null==n?void 0:n.filter(function(e){return!e.isDisabled}))||[];if(!t.length)return null;var r=t.map(function(n){return(0,j.j)(e,n)});return r.some(function(e){return!l()(e)})?r:null},E=function(e,n){var t,r,a,s=n.payee,l=n.payoutMethod,u=n.type,c=n.currency;if(u===y.Z.CHARGE)return[c];if(!(0,g.cr)(e,g.h6.MULTI_CURRENCY_EXPENSES)||!(0,g.cr)(e.host,g.h6.MULTI_CURRENCY_EXPENSES)||(null==l?void 0:l.type)===x.Nk.ACCOUNT_BALANCE)return[e.currency];if(null!=s&&s.isInvite&&!(null!=l&&null!==(t=l.data)&&void 0!==t&&t.currency))return h.F;if((null==l?void 0:l.type)===x.Nk.PAYPAL){var d=h.bl.includes(e.currency)?e.currency:"USD";return o()([d].concat(i()(h.bl)))}return(null==l?void 0:l.type)===x.Nk.OTHER?h.F.includes(e.currency)?o()([e.currency].concat(i()(h.F))):h.F:o()([e.currency,null===(r=e.host)||void 0===r?void 0:r.currency,null==l?void 0:l.currency,null==l?void 0:null===(a=l.data)||void 0===a?void 0:a.currency].filter(Boolean))},N=function(e){return e===y.Z.RECEIPT}},78563:function(e,n,t){var r,i,a,o=t(49376),s=t.n(o),l=t(7739),u=t.n(l),c=t(35161),d=t.n(c),p=t(27361),m=t.n(p),f=t(85696),g=t.n(f),v=t(3323),h=t.n(v),y=t(7980),x=t.n(y),b=t(41609),j=t.n(b),C=t(930),P=t.n(C),O=t(92358),A=t.n(O),w=t(87794),S=t.n(w),T=t(67294),I=t(37887),M=t(50319),E=t(41429),N=t(95612),Z=t(59433),k=t(44012),R=t(86896),D=t(52015),F=t(74197),q=t(62934),_=t(50946),L=t(59644),H=t(7706),z=t(14200),U=t(28407),B=t(28770),V=t(13412),W=t(53517),$=t(23959),G=t(14370),Y=t(30102),K=t(51506),X=t(52063),Q=t(63551),J=t(48900),ee=t(34815),en=t(98936),et=t(24665),er=t(62612),ei=t(32222),ea=t(50714),eo=t(94044),es=t(43015),el=t(29657),eu=t(29126),ec=t(29789),ed=t(90374),ep=t(608),em=t(14584),ef=t(61936),eg=t(60240),ev=t(85893),eh=["collective"];function ey(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ex(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ey(Object(t),!0).forEach(function(n){P()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ey(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eb=(0,D.ZP)(ec.ZP).withConfig({displayName:"AddFundsModal__AddFundsModalContainer",componentId:"sc-m0r42a-0"})(["width:100%;max-width:576px;padding:24px 30px;",""],function(e){return e.showSuccessModal&&(0,D.iv)(["background-image:url('/static/images/platform-tip-background.svg');background-repeat:no-repeat;background-size:100%;background-position:left 0 bottom 95px;@media (max-width:30em){background-position:left 0 top 0;}"])}),ej=function(e){var n=e.label,t=e.value,r=e.currency,i=e.isLargeAmount;return(0,ev.jsxs)(Q.kC,{justifyContent:"space-between",alignItems:"center",children:[(0,ev.jsx)(ef.Dr,{fontSize:"12px",lineHeight:"18px",fontWeight:"500",children:(0,ev.jsx)(k.Z,{id:"withColon",defaultMessage:[{type:1,value:"item"},{type:0,value:":"}],values:{item:n}})}),(0,ev.jsx)(ef.Dr,{fontSize:i?"18px":"12px",lineHeight:i?"27px":"18px",fontWeight:"500",children:(0,ev.jsx)(X.Z,{amount:t,currency:r})})]})},eC=(0,L.Ps)(r||(r=A()(["\n  mutation AddFunds(\n    $fromAccount: AccountReferenceInput!\n    $account: AccountReferenceInput!\n    $tier: TierReferenceInput\n    $amount: AmountInput!\n    $description: String!\n    $memo: String\n    $processedAt: DateTime\n    $hostFeePercent: Float!\n    $invoiceTemplate: String\n    $tax: TaxInput\n  ) {\n    addFunds(\n      account: $account\n      fromAccount: $fromAccount\n      amount: $amount\n      description: $description\n      memo: $memo\n      processedAt: $processedAt\n      hostFeePercent: $hostFeePercent\n      tier: $tier\n      invoiceTemplate: $invoiceTemplate\n      tax: $tax\n    ) {\n      id\n      description\n      memo\n      processedAt\n      hostFeePercent\n      taxAmount {\n        valueInCents\n      }\n      taxes {\n        type\n        percentage\n      }\n      transactions {\n        id\n        type\n      }\n      fromAccount {\n        id\n        slug\n        name\n      }\n      toAccount {\n        id\n        slug\n        name\n        stats {\n          id\n          balance {\n            valueInCents\n          }\n        }\n      }\n      tier {\n        id\n        legacyId\n        slug\n        name\n      }\n    }\n  }\n"]))),eP=(0,L.Ps)(i||(i=A()(["\n  fragment AddFundsTierFields on Tier {\n    id\n    slug\n    legacyId\n    name\n  }\n"]))),eO=(0,L.Ps)(a||(a=A()(["\n  query AddFundsAccount($slug: String!) {\n    account(slug: $slug) {\n      id\n      legacyId\n      type\n      isHost\n      name\n      slug\n      currency\n      settings\n      ... on Organization {\n        tiers {\n          nodes {\n            id\n            ...AddFundsTierFields\n          }\n        }\n      }\n      ... on AccountWithParent {\n        parent {\n          id\n        }\n      }\n      ... on Host {\n        id\n        type\n        slug\n        name\n        settings\n        plan {\n          id\n          hostFees\n        }\n        policies {\n          id\n          REQUIRE_2FA_FOR_ADMINS\n        }\n        isTrustedHost\n      }\n      ... on AccountWithHost {\n        addedFundsHostFeePercent: hostFeePercent(paymentMethodType: HOST)\n        host {\n          id\n          type\n          legacyId\n          slug\n          name\n          settings\n          plan {\n            id\n            hostFees\n          }\n          policies {\n            id\n            REQUIRE_2FA_FOR_ADMINS\n          }\n          isTrustedHost\n          vendors(forAccount: { slug: $slug }) {\n            nodes {\n              id\n              slug\n              name\n              type\n              description\n              imageUrl(height: 64)\n            }\n          }\n        }\n      }\n      ... on AccountWithContributions {\n        tiers {\n          nodes {\n            id\n            ...AddFundsTierFields\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),eP),eA=function(e,n){var t=(0,_.ay)(n,["amount","fromAccount","description","processedAt"]),r=(0,em.j)(e,n.tax,{requireTaxIdNumber:!1});return j()(r)||(t.tax=r),t},ew=function(e){return"string"==typeof e.id?{id:e.id}:{legacyId:e.id}},eS=(0,D.ZP)(es.Z).attrs({labelFontSize:"16px",labelFontWeight:"700"}).withConfig({displayName:"AddFundsModal__Field",componentId:"sc-m0r42a-1"})([""]),eT=function(e){var n,t,r,i,a,o,l,c,p,f,v=e.collective,y=h()(e,eh),b=(0,H.Z)().LoggedInUser,j=(0,T.useState)({}),C=j[0],P=j[1],O=(0,R.Z)(),A=(0,I.a)(eO,{context:L.Tn,variables:{slug:v.slug}}),w=A.data,D=A.loading,_=null==w?void 0:w.account,es=null==_?void 0:_.currency,ey=null!=_&&_.isHost?_:null==_?void 0:_.host,eP=(0,E.accountHasVAT)(v,ey||v.host)?E.TaxType.VAT:(0,E.accountHasGST)(ey||v.host||v)?E.TaxType.GST:void 0,eT=(0,M.D)(eC,{context:L.Tn,refetchQueries:[{context:L.Tn,query:(0,$.MR)(!0,!1),variables:(0,$.kr)(v.slug,!1)},{query:W.J,variables:(0,W.L)(v.slug)}],awaitRefetchQueries:!0}),eI=g()(eT,2),eM=eI[0],eE=eI[1].error,eN=m()(w,"account.tiers.nodes"),eZ=T.useMemo(function(){return eN?[{value:null,label:O.formatMessage({id:"ozkv/Y",defaultMessage:[{type:0,value:"No tier"}]})}].concat(x()(eN.map(function(e){return{value:e,label:"#".concat(e.legacyId," - ").concat(e.name)}}))):[]},[eN]);if(!b)return null;var ek=null!=_&&!!_.host&&(_.parent?_.host.id!==_.parent.id:_.host.id!==_.id),eR=(null==_?void 0:_.addedFundsHostFeePercent)||v.hostFeePercent,eD=ek?eR:0,eF=null==ey?void 0:null===(t=ey.settings)||void 0===t?void 0:null===(r=t.invoice)||void 0===r?void 0:r.templates,eq=(null==ey?void 0:null===(i=ey.vendors)||void 0===i?void 0:i.nodes)||[],e_=[].concat(x()(eq),[ey]),eL=d()(u()(e_,"type"),function(e,n){return{label:(0,z.Z)(O,n,e.length),options:e.map(function(e){return{value:e,label:(0,ev.jsx)(G.Os,{value:e})}})}}),eH=[];(null==eF?void 0:null===(a=eF.default)||void 0===a?void 0:null===(o=a.title)||void 0===o?void 0:o.length)>0&&eH.push({value:"default",label:null==eF?void 0:null===(p=eF.default)||void 0===p?void 0:p.title}),(null==eF?void 0:null===(l=eF.alternative)||void 0===l?void 0:null===(c=l.title)||void 0===c?void 0:c.length)>0&&eH.push({value:"alternative",label:null==eF?void 0:null===(f=eF.alternative)||void 0===f?void 0:f.title});var ez=function(){P({showSuccessModal:!1}),y.onClose()};return(0,ev.jsxs)(eb,ex(ex({},y),{},{trapFocus:!0,showSuccessModal:C.showSuccessModal,onClose:ez,children:[(0,ev.jsx)(ec.I4,{collective:v,onClick:ez}),D?(0,ev.jsx)(en.Z,{mt:2,height:200}):(0,B.u)(ey)&&!b.hasTwoFactorAuth?(0,ev.jsx)(eg.l,{borderWidth:0,noTitle:!0}):(0,ev.jsx)(Z.J9,{initialValues:ex({amount:null,hostFeePercent:null,description:"",memo:null,processedAt:(0,q.Se)(),fromAccount:null,tier:null,tax:null},{hostFeePercent:eD,account:v}),enableReinitialize:!0,validate:function(e){return eA(O,e)},onSubmit:(n=s()(S().mark(function e(n,t){var r,i,a,o;return S().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.showSuccessModal){e.next=11;break}return a=eH.length>0?eH[0].value:null,e.next=4,eM({variables:ex(ex({},n),{},{amount:{valueInCents:n.amount},platformTip:{valueInCents:0},fromAccount:ew(n.fromAccount),account:ew(n.account),tier:n.tier?{id:n.tier.id}:null,invoiceTemplate:(null===(r=n.invoiceTemplate)||void 0===r?void 0:r.value)||a,processedAt:n.processedAt?new Date(n.processedAt):null,tax:n.tax})});case 4:o=e.sent.data.addFunds,P({showSuccessModal:!0,fundAmount:n.amount,taxAmount:o.taxAmount,hostFeePercent:o.hostFeePercent,taxes:o.taxes,description:o.description,memo:o.memo,processedAt:o.processedAt,source:o.fromAccount,tier:o.tier}),t.setValues({amount:n.amount,fromAccount:o.fromAccount,description:o.description,processedAt:o.processedAt}),null===(i=y.onSuccess)||void 0===i||i.call(y),e.next=12;break;case 11:ez();case 12:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)}),children:function(e){var n,t,r,i=e.values,a=e.isSubmitting,o=isNaN(i.hostFeePercent)?eD:i.hostFeePercent,s=null!==(n=i.tax)&&void 0!==n&&n.rate?Math.round(i.amount-i.amount/(1+i.tax.rate)):0,l=Math.round((i.amount-s)*(o/100));return C.showSuccessModal?(0,ev.jsxs)(Z.l0,{children:[(0,ev.jsx)(ec.fe,{children:(0,ev.jsxs)(K.Z,{children:[(0,ev.jsx)("h3",{className:"mt-4 text-xl  text-black",children:(0,ev.jsx)(k.Z,{id:"AddFundsModal.FundsAdded",defaultMessage:[{type:0,value:"Funds Added ✅"}]})}),(0,ev.jsxs)(K.Z,{pb:2,mt:3,children:[(0,ev.jsx)(k.Z,{id:"AddFundsModal.YouAdded",defaultMessage:[{type:0,value:"You added:"}]}),(0,ev.jsxs)("ul",{className:"mt-2 list-inside list-disc pl-3",children:[(0,ev.jsx)("li",{children:(0,ev.jsx)("strong",{children:"".concat(C.fundAmount/100," ").concat(es)})}),!!C.taxAmount&&(0,ev.jsx)("li",{children:(0,ev.jsx)(k.Z,{id:"9kR30C",defaultMessage:[{type:0,value:"Including "},{type:1,value:"amount"},{type:0,value:" "},{type:1,value:"feeType"},{type:0,value:" ("},{type:1,value:"feeRate"},{type:0,value:")"}],values:{amount:(0,ev.jsx)(X.Z,{amount:C.taxAmount.valueInCents,currency:es,showCurrencyCode:!1}),feeType:(0,U.m)(O,m()(C.taxes,"0.type")||"Tax","long"),feeRate:"".concat(m()(C.taxes,"0.percentage"),"%")}})}),!!C.hostFeePercent&&(0,ev.jsx)("li",{children:(0,ev.jsx)(k.Z,{id:"9kR30C",defaultMessage:[{type:0,value:"Including "},{type:1,value:"amount"},{type:0,value:" "},{type:1,value:"feeType"},{type:0,value:" ("},{type:1,value:"feeRate"},{type:0,value:")"}],values:{amount:(0,ev.jsx)(X.Z,{currency:es,showCurrencyCode:!1,amount:(C.fundAmount-((null===(r=C.taxAmount)||void 0===r?void 0:r.valueInCents)||0))*(C.hostFeePercent/100)}),feeType:(0,ev.jsx)(k.Z,{id:"HostFee",defaultMessage:[{type:0,value:"Host fee"}]}),feeRate:"".concat(C.hostFeePercent,"%")}})}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)(k.Z,{id:"AddFundsModal.FromTheSource",defaultMessage:[{type:0,value:"From the source"}]})," ",(0,ev.jsx)("strong",{children:(0,ev.jsx)(ee.Z,{collective:C.source})})]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)(k.Z,{id:"AddFundsModal.ForThePurpose",defaultMessage:[{type:0,value:"For the purpose of"}]})," ",(0,ev.jsx)("strong",{children:C.description})]}),C.memo&&(0,ev.jsxs)("li",{children:[(0,ev.jsx)(k.Z,{id:"D5NqQO",defaultMessage:[{type:0,value:"Memo"}]}),": ",(0,ev.jsx)("strong",{children:C.memo})]}),C.processedAt&&(0,ev.jsxs)("li",{children:[(0,ev.jsx)(ef.Dr,{textTransform:"capitalize",children:(0,ev.jsx)(k.Z,{id:"processedAt",defaultMessage:[{type:0,value:"Fund received date"}]})}),": ",(0,ev.jsx)("strong",{children:O.formatDate(C.processedAt,{timeZone:"UTC"})})]}),C.tier&&(0,ev.jsxs)("li",{children:[(0,ev.jsx)(k.Z,{id:"h+1vQB",defaultMessage:[{type:0,value:"For the tier"}]})," ",(0,ev.jsx)(eu.Z,{as:J.Z,openInNewTab:!0,href:"".concat((0,V.x0)(v),"/contribute/").concat(C.tier.slug,"-").concat(C.tier.legacyId),children:(0,ev.jsx)("strong",{children:C.tier.name})})]})]})]}),(0,ev.jsxs)(K.Z,{pb:2,mt:2,children:[(0,ev.jsx)(k.Z,{id:"AddFundsModal.NeedHelp",defaultMessage:[{type:0,value:"Need Help?"}]})," ",(0,ev.jsx)(eu.Z,{href:"/support",buttonStyle:"standard",buttonSize:"tiny",children:(0,ev.jsx)(k.Z,{id:"error.contactSupport",defaultMessage:[{type:0,value:"Contact support"}]})})]})]})}),(0,ev.jsx)(ec.mz,{isFullWidth:!0,children:(0,ev.jsxs)(Q.kC,{justifyContent:"center",flexWrap:"wrap",children:[(0,ev.jsx)(er.Z,{type:"submit",buttonStyle:"primary",mx:2,mb:1,minWidth:120,loading:a,children:(0,ev.jsx)(k.Z,{id:"Finish",defaultMessage:[{type:0,value:"Finish"}]})}),!C.showSuccessModal&&(0,ev.jsx)(er.Z,{mx:2,mb:1,minWidth:100,onClick:ez,type:"button",children:(0,ev.jsx)(k.Z,{id:"actions.cancel",defaultMessage:[{type:0,value:"Cancel"}]})})]})})]}):(0,ev.jsxs)(Z.l0,{children:[(0,ev.jsx)("h3",{children:(0,ev.jsx)(k.Z,{id:"AddFundsModal.SubHeading",defaultMessage:[{type:0,value:"Add Funds to the Collective"}]})}),(0,ev.jsxs)(ec.fe,{children:[(0,ev.jsx)(eS,{name:"fromAccount",htmlFor:"addFunds-fromAccount",label:(0,ev.jsx)(k.Z,{id:"AddFundsModal.source",defaultMessage:[{type:0,value:"Source"}]}),mt:3,children:function(e){var n=e.form,t=e.field;return(0,ev.jsx)(Y.Z,{inputId:t.id,types:["USER","ORGANIZATION","VENDOR"],error:t.error,onBlur:function(){return n.setFieldTouched(t.name,!0)},customOptions:eL,onChange:function(e){var r=e.value;return n.setFieldValue(t.name,r)},menuPortalTarget:null,includeVendorsForHostId:(null==ey?void 0:ey.legacyId)||void 0,creatable:["USER","VENDOR"],HostCollectiveId:null==ey?void 0:ey.legacyId})}}),(0,ev.jsx)(eS,{name:"tier",htmlFor:"addFunds-tier",label:(0,ev.jsx)(k.Z,{id:"b07w+D",defaultMessage:[{type:0,value:"Tier"}]}),mt:3,children:function(e){var n=e.form,t=e.field;return(0,ev.jsx)(ed.ZP,{inputId:t.id,error:t.error,onBlur:function(){return n.setFieldTouched(t.name,!0)},onChange:function(e){var r=e.value;return n.setFieldValue(t.name,r)},isLoading:D,options:eZ,isSearchable:eZ.length>10,value:eZ.find(function(e){var n;return i.tier?(null===(n=e.value)||void 0===n?void 0:n.id)===i.tier.id:null===e.value})})}}),(0,ev.jsx)(eS,{name:"description",htmlFor:"addFunds-description",label:(0,ev.jsx)(k.Z,{id:"Fields.description",defaultMessage:[{type:0,value:"Description"}]}),mt:3,children:function(e){var n=e.field;return(0,ev.jsx)(ea.ZP,ex({},n))}}),(0,ev.jsx)(eS,{name:"processedAt",htmlFor:"addFunds-processedAt",inputType:"date",label:(0,ev.jsxs)("span",{children:[(0,ev.jsx)(k.Z,{id:"expense.incurredAt",defaultMessage:[{type:0,value:"Date"}]})," ",(0,ev.jsx)(ep.Z,{content:function(){return(0,ev.jsx)(k.Z,{id:"mqg/wj",defaultMessage:[{type:0,value:"Date the funds were received."}]})},children:(0,ev.jsx)(N.Z,{size:16})})]}),mt:3,children:function(e){var n=e.field;return(0,ev.jsx)(ea.ZP,ex({},n))}}),(0,ev.jsx)(eS,{name:"memo",htmlFor:"addFunds-memo",label:(0,ev.jsxs)("span",{children:[(0,ev.jsx)(k.Z,{id:"D5NqQO",defaultMessage:[{type:0,value:"Memo"}]})," ",(0,ev.jsx)(ep.Z,{content:function(){return(0,ev.jsx)(k.Z,{id:"znqf9S",defaultMessage:[{type:0,value:"This is a private note that will only be visible to the host."}]})},children:(0,ev.jsx)(N.Z,{size:16})})]}),required:!1,mt:3,children:function(e){var n=e.field;return(0,ev.jsx)(ea.ZP,ex({},n))}}),(0,ev.jsxs)(Q.kC,{mt:3,flexWrap:"wrap",children:[(0,ev.jsx)(eS,{name:"amount",htmlFor:"addFunds-amount",label:(0,ev.jsx)(k.Z,{id:"Fields.amount",defaultMessage:[{type:0,value:"Amount"}]}),required:!0,flex:"1 1",children:function(e){var n=e.form,t=e.field;return(0,ev.jsx)(eo.Z,{id:t.id,currency:es,placeholder:"0.00",error:t.error,value:t.value,maxWidth:"100%",onChange:function(e){return n.setFieldValue(t.name,e)},onBlur:function(){return n.setFieldTouched(t.name,!0)}})}}),ek&&(0,ev.jsx)(eS,{name:"hostFeePercent",htmlFor:"addFunds-hostFeePercent",label:(0,ev.jsxs)("span",{children:[(0,ev.jsx)(k.Z,{id:"NJsELs",defaultMessage:[{type:0,value:"Host Fee"}]})," ",(0,ev.jsx)(ep.Z,{content:function(){return(0,ev.jsx)(k.Z,{id:"AddFundsModal.hostFee.tooltip",defaultMessage:[{type:0,value:"The default host fee percentage is set up in your host settings. The host fee is charged by the fiscal host to the collectives for the financial services provided."}]})},children:(0,ev.jsx)(N.Z,{size:16})})]}),ml:3,children:function(e){var n=e.form,t=e.field;return(0,ev.jsx)(el.Z,{id:t.id,placeholder:eD,value:t.value,error:t.error,onChange:function(e){return n.setFieldValue(t.name,e)},onBlur:function(){return n.setFieldTouched(t.name,!0)}})}})]}),eP&&(0,ev.jsx)(Q.xu,{mt:3,children:(0,ev.jsx)(em.r,{taxType:eP,formik:e,formikValuePath:"tax",isOptional:!0,dispatchDefaultValueOnMount:!1,labelProps:{fontSize:"16px",fontWeight:"700"},idNumberLabelRenderer:function(e){return O.formatMessage({id:"TNecsq",defaultMessage:[{type:0,value:"Source's "},{type:1,value:"taxName"},{type:0,value:" identifier"}]},{taxName:e})}})}),eH.length>1&&(0,ev.jsx)(K.Z,{width:"100%",children:(0,ev.jsx)(eS,{name:"invoiceTemplate",htmlFor:"addFunds-invoiceTemplate",label:(0,ev.jsx)(k.Z,{id:"cyMx/0",defaultMessage:[{type:0,value:"Choose receipt"}]}),mt:3,children:function(e){var n=e.form,t=e.field;return(0,ev.jsx)(ed.ZP,{id:t.id,options:eH,defaultValue:eH[0],onChange:function(e){return n.setFieldValue(t.name,e)}})}})}),(0,ev.jsx)(ef.P,{fontSize:"14px",lineHeight:"17px",fontWeight:"500",mt:4,children:(0,ev.jsx)(k.Z,{id:"Details",defaultMessage:[{type:0,value:"Details"}]})}),(0,ev.jsx)(ei.Z,{my:2,borderColor:"black.300"}),(0,ev.jsx)(ej,{value:i.amount||0,currency:es,label:(0,ev.jsx)(k.Z,{id:"AddFundsModal.fundingAmount",defaultMessage:[{type:0,value:"Funding amount"}]})}),!!(null===(t=i.tax)||void 0===t?void 0:t.rate)&&(0,ev.jsxs)(T.Fragment,{children:[(0,ev.jsx)(ej,{value:-s,currency:es,label:"".concat((0,U.m)(O,i.tax.type,"long")," (").concat(Math.round(100*i.tax.rate),"%)")}),(0,ev.jsx)(ei.Z,{my:1,borderColor:"black.200"}),(0,ev.jsx)(ej,{value:(i.amount||0)-s,currency:es,label:(0,ev.jsx)(k.Z,{id:"dcUpWf",defaultMessage:[{type:0,value:"Gross amount without "},{type:1,value:"taxName"}],values:{taxName:(0,U.m)(O,i.tax.type,"short")}})}),ek&&(0,ev.jsx)(ei.Z,{my:1,borderColor:"black.200"})]}),ek&&(0,ev.jsx)(ej,{value:l?-l:0,currency:es,label:(0,ev.jsx)(k.Z,{id:"AddFundsModal.hostFees",defaultMessage:[{type:0,value:"Host fee charged to collective ("},{type:1,value:"hostFees"},{type:0,value:")"}],values:{hostFees:"".concat(o,"%")}})}),(0,ev.jsx)(ei.Z,{my:2,borderColor:"black.300"}),(0,ev.jsx)(ej,{value:i.amount-l-s,currency:es,label:(0,ev.jsx)(k.Z,{id:"AddFundsModal.netAmount",defaultMessage:[{type:0,value:"Net amount received by collective"}]}),isLargeAmount:!0}),(0,ev.jsx)(ef.P,{fontSize:"12px",lineHeight:"18px",color:"black.700",mt:2,children:(0,ev.jsx)(k.Z,{id:"AddFundsModal.disclaimer",defaultMessage:[{type:0,value:"By clicking add funds, you agree to set aside "},{type:1,value:"amount"},{type:0,value:" in your bank account on behalf of this collective."}],values:{amount:(0,F.xG)(i.amount,es,{locale:O.locale})}})}),eE&&(0,ev.jsx)(et.Z,{error:eE,mt:3,fontSize:"13px"})]}),(0,ev.jsx)(ec.mz,{isFullWidth:!0,children:(0,ev.jsxs)(Q.kC,{justifyContent:"center",flexWrap:"wrap",children:[(0,ev.jsx)(er.Z,{type:"submit",buttonStyle:"primary",mx:2,mb:1,minWidth:120,loading:a,children:(0,ev.jsx)(k.Z,{id:"menu.addFunds",defaultMessage:[{type:0,value:"Add Funds"}]})}),(0,ev.jsx)(er.Z,{mx:2,mb:1,minWidth:100,onClick:ez,type:"button",children:(0,ev.jsx)(k.Z,{id:"actions.cancel",defaultMessage:[{type:0,value:"Cancel"}]})})]})})]})}})]}))};eT.__docgenInfo={description:"",methods:[],displayName:"AddFundsModal",props:{collective:{description:"",type:{name:"shape",value:{id:{name:"union",value:[{name:"number"},{name:"string"}],required:!1},hostFeePercent:{name:"number",required:!1},slug:{name:"string",required:!1},policies:{name:"object",required:!1}}},required:!0},onClose:{description:"",type:{name:"func"},required:!1},onSuccess:{description:"",type:{name:"func"},required:!1}}},n.Z=eT},93514:function(e,n,t){t.d(n,{Gf:function(){return M},K5:function(){return I}});var r,i=t(49376),a=t.n(i),o=t(85696),s=t.n(o),l=t(92358),u=t.n(l),c=t(87794),d=t.n(c),p=t(67294),m=t(37887),f=t(83262),g=t(86896),v=t(44012),h=t(25482),y=t(74197),x=t(59644),b=t(66629),j=t(18625),C=t(63551),P=t(7136),O=t(79613),A=t(69755),w=t(62612),S=t(20073),T=t(85893),I=(0,x.Ps)(r||(r=u()(["\n  query ScheduledExpensesBanner($hostSlug: String!, $limit: Int!, $payoutMethodType: PayoutMethodType) {\n    host(slug: $hostSlug) {\n      id\n      currency\n      transferwise {\n        id\n        amountBatched {\n          valueInCents\n          currency\n        }\n      }\n    }\n    expenses(\n      host: { slug: $hostSlug }\n      status: SCHEDULED_FOR_PAYMENT\n      limit: $limit\n      payoutMethodType: $payoutMethodType\n    ) {\n      totalCount\n      offset\n      limit\n      nodes {\n        id\n      }\n    }\n  }\n"]))),M=function(e){return{hostSlug:e,limit:100,payoutMethodType:"BANK_ACCOUNT"}},E=function(e){var n,t,r,i,o,l,u=e.hostSlug,c=e.onSubmit,E=e.secondButton,N=(0,m.a)(I,{variables:M(u),context:x.Tn}),Z=(0,S.pm)().toast,k=(0,g.Z)(),R=p.useState(!1),D=s()(R,2),F=D[0],q=D[1],_=(null===(t=N.data)||void 0===t?void 0:null===(r=t.expenses)||void 0===r?void 0:r.totalCount)>0,L=null===(i=N.data)||void 0===i?void 0:null===(o=i.host)||void 0===o?void 0:null===(l=o.transferwise)||void 0===l?void 0:l.amountBatched;if(!_||!L)return null;var H=(0,f.create)({mode:f.Mode.PRODUCTION}),z=(n=a()(d().mark(function e(){var n,t;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=N.data.expenses.nodes.map(function(e){return e.id}),e.prev=1,e.next=4,H("".concat((0,b.ls)(),"/api/services/transferwise/pay-batch"),{method:"POST",body:JSON.stringify({expenseIds:n,hostId:N.data.host.id}),headers:(0,h.Pj)()});case 4:q(!1),Z({variant:"success",message:(0,T.jsx)(v.Z,{id:"expenses.scheduled.paybatch.success",defaultMessage:[{type:0,value:"Expenses paid! They're now being processed by Wise."}]})}),null==c||c(),e.next=20;break;case 9:if(e.prev=9,e.t0=e.catch(1),!(null!==e.t0&&void 0!==e.t0&&e.t0.response)){e.next=17;break}return e.next=14,e.t0.response.text();case 14:e.t1=e.sent,e.next=18;break;case 17:e.t1=k.formatMessage({id:"MEB9ET",defaultMessage:[{type:0,value:"There was an error trying to process this batch, please "},{type:8,value:"SupportLink",children:[{type:0,value:"contact support"}]}]},{SupportLink:P.wl});case 18:t=e.t1,Z({variant:"error",title:k.formatMessage({id:"HYFu3j",defaultMessage:[{type:0,value:"Batch payment failed"}]}),message:t});case 20:case"end":return e.stop()}},e,null,[[1,9]])})),function(){return n.apply(this,arguments)});return(0,T.jsxs)(p.Fragment,{children:[(0,T.jsx)(A.Z,{type:"success",children:(0,T.jsxs)(C.kC,{alignItems:"baseline",flexDirection:["column","row"],gap:"8px",children:[(0,T.jsxs)(C.xu,{children:[(0,T.jsx)(O.Z,{size:"1em",color:"#25B869",mr:2}),(0,T.jsx)(v.Z,{id:"expenses.scheduled.notification",defaultMessage:[{type:0,value:"You have "},{type:6,value:"count",options:{one:{value:[{type:7},{type:0,value:" expense"}]},other:{value:[{type:7},{type:0,value:" expenses"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" scheduled for payment that will require "},{type:1,value:"amount"},{type:0,value:" in balance."}],values:{count:N.data.expenses.totalCount,amount:(0,y.xG)(L.valueInCents,L.currency)}})]}),(0,T.jsxs)(C.kC,{gap:"8px",children:[E,(0,T.jsx)(w.Z,{buttonSize:"tiny",buttonStyle:"successSecondary",onClick:function(){return q(!0)},children:(0,T.jsx)(v.Z,{id:"expenses.scheduled.paybatch",defaultMessage:[{type:0,value:"Pay Batch"}]})})]})]})}),F&&(0,T.jsx)(j.Z,{header:(0,T.jsx)(v.Z,{id:"expenses.scheduled.confirmation.title",defaultMessage:[{type:0,value:"Pay Expenses Batch"}]}),body:(0,T.jsx)(v.Z,{id:"expenses.scheduled.confirmation.body",defaultMessage:[{type:0,value:"Are you sure you want to batch and pay "},{type:6,value:"count",options:{one:{value:[{type:7},{type:0,value:" expense"}]},other:{value:[{type:7},{type:0,value:" expenses"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" scheduled for payment?"}],values:{count:N.data.expenses.totalCount}}),onClose:function(){return q(!1)},continueLabel:(0,T.jsx)(v.Z,{id:"expense.pay.btn",defaultMessage:[{type:0,value:"Pay with "},{type:1,value:"paymentMethod"}],values:{paymentMethod:"Wise"}}),continueHandler:z})]})};E.__docgenInfo={description:"",methods:[],displayName:"ScheduledExpensesBanner",props:{hostSlug:{description:"",type:{name:"string"},required:!0},onSubmit:{description:"",type:{name:"func"},required:!1},secondButton:{description:"",type:{name:"node"},required:!1}}},n.ZP=E},84992:function(e,n,t){var r=t(82818),i=t(52015);n.Z=(0,i.ZP)(r.t).withConfig({displayName:"CommentIcon",componentId:"sc-hzbk8p-0"})(["transform:scaleX(-1);"])},79613:function(e,n,t){var r=t(930),i=t.n(r);t(67294);var a=t(81931),o=t(85893);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var u=function(e){return(0,o.jsx)(a.Z,l(l({size:"64",viewBox:"-0.753 -0.753 9.424 9.407"},e),{},{children:(0,o.jsx)("path",{d:"M.7-.76l1.475 2.47L-.42 4.176h4.47l.42-.988H2.004l1.493-1.484L2.625.227h4.068L3.12 8.662h1.224L8.338-.76H.7",fill:"currentColor",strokeWidth:"0.25"})}))};u.__docgenInfo={description:"Set color to `#00cdff` to use the default Transferwise color.",methods:[],displayName:"TransferwiseIcon"},n.Z=u},4032:function(e,n,t){var r=t(67294),i=t(44012),a=t(7136),o=t(61936),s=t(85893),l=function(){return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(o.P,{fontSize:"13px",lineHeight:"20px",color:"#090A0A",mb:3,children:(0,s.jsx)(i.Z,{id:"OCFHostApplication.importance",defaultMessage:[{type:0,value:"It can take years for a group to get 501(c)(3) non-profit status. Fiscal hosts are especially helpful to newly formed nonprofit groups, large and small. We act as a legal entity for your group, organizing the back-end of your fundraising efforts. It’s fast and easy to apply. Once your group is approved, you can begin collecting funds immediately."}]})}),(0,s.jsx)(o.H5,{fontSize:"13px",lineHeight:"20px",color:"#090A0A",children:(0,s.jsx)(i.Z,{id:"OCFHostApplication.howItWorks",defaultMessage:[{type:0,value:"How it works:"}]})}),(0,s.jsx)(o.P,{fontSize:"13px",lineHeight:"20px",color:"#090A0A",mb:3,children:(0,s.jsx)(i.Z,{id:"OCFHostApplication.howItWorks.list",values:{lineBreak:(0,s.jsx)("br",{})},defaultMessage:[{type:0,value:"• Donations are made to our 501(c)(3) (tax-exempt status applies)"},{type:1,value:"lineBreak"},{type:0,value:" • We make a “grant” to your group/project"},{type:1,value:"lineBreak"},{type:0,value:" • We send donors their receipts, disburse funds/reimburse expenses after your approval, send out the tax forms to independent contractors as applicable"},{type:1,value:"lineBreak"},{type:0,value:" • You have complete access to collect, spend, manage your money on our platform."}]})}),(0,s.jsx)(o.P,{fontSize:"13px",lineHeight:"20px",color:"#090A0A",mb:3,children:(0,s.jsx)(i.Z,{id:"OCFHostApplication.readInfoGuideAndTOS",values:{InfoGuideLink:(0,a.fw)({color:"#396C6F",textDecoration:"underline",openInNewTab:!0,href:"https://docs.opencollective.foundation"}),TOSLink:(0,a.fw)({color:"#396C6F",textDecoration:"underline",openInNewTab:!0,href:"https://docs.google.com/document/u/2/d/e/2PACX-1vQ_fs7IOojAHaMBKYtaJetlTXJZLnJ7flIWkwxUSQtTkWUMtwFYC2ssb-ooBnT-Ldl6wbVhNQiCkSms/pub"})},defaultMessage:[{type:0,value:"Please take a moment to read our "},{type:8,value:"InfoGuideLink",children:[{type:0,value:"documentation"}]},{type:0,value:" and "},{type:8,value:"TOSLink",children:[{type:0,value:"Terms and Conditions"}]},{type:0,value:" before applying. We want to make this process as easy for you as possible; you will need to know a few things to have a smooth experience."}]})})]})};l.__docgenInfo={description:"",methods:[],displayName:"ApplicationDescription"},n.Z=l},22097:function(e,n,t){var r=t(52015),i=t(62612),a=(0,r.ZP)(i.Z).withConfig({displayName:"OCFPrimaryButton",componentId:"sc-le1nn-0"})(["background:linear-gradient(180deg,#4f7d7f 0%,#396c6f 100%);border-color:transparent;color:#ffffff;&:focus{border:solid 2px #90f0bd;background:linear-gradient(to bottom,#7a9899,#527d80 99%);}&:active{background:linear-gradient(to bottom,#7a9899,#527d80 99%);}&:hover{border-color:transparent;background:linear-gradient(to bottom,#7a9899,#527d80 99%);}"]);n.Z=a},63994:function(e,n,t){var r=t(33227),i=t.n(r),a=t(88361),o=t.n(a),s=t(85971),l=t.n(s),u=t(52715),c=t.n(u),d=t(91193),p=t.n(d),m=t(67294),f=t(44012),g=t(52015),v=t(39631),h=t(60659),y=t(63551),x=t(608),b=t(85893),j=(0,g.ZP)(h.Z).attrs({variant:"rounded-right"}).withConfig({displayName:"OnboardingProfileCard__Admin",componentId:"sc-shs4i4-0"})([""]),C=function(e){l()(r,e);var n,t=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p()(r);if(n){var i=p()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return c()(this,e)});function r(){return i()(this,r),t.apply(this,arguments)}return o()(r,[{key:"render",value:function(){var e=this.props,n=e.collective,t=e.removeAdmin,r=e.isPending,i=n.name,a=(0,b.jsx)(j,{closeButtonProps:t?{onClick:function(){t(n)}}:null,children:(0,b.jsxs)(y.kC,{alignItems:"center",children:[(0,b.jsx)(v.ZP,{radius:16,collective:n}),(0,b.jsx)(y.xu,{fontSize:"12px",ml:2,children:i})]})});return(0,b.jsx)(y.kC,{my:1,mr:2,children:r?(0,b.jsx)(x.Z,{content:function(){return(0,b.jsx)(f.Z,{id:"onboarding.admins.pending",defaultMessage:[{type:0,value:"Pending approval"}]})},children:a}):a})}}]),r}(m.Component);C.__docgenInfo={description:"",methods:[],displayName:"OnboardingProfileCard",props:{collective:{description:"",type:{name:"object"},required:!1},removeAdmin:{description:"",type:{name:"func"},required:!1},isPending:{description:"",type:{name:"bool"},required:!1}}},n.Z=C},14584:function(e,n,t){t.d(n,{j:function(){return S},r:function(){return M}});var r=t(59854),i=t.n(r),a=t(930),o=t.n(a),s=t(27361),l=t.n(s),u=t(14293),c=t.n(u),d=t(67294),p=t(41429),m=t(86896),f=t(32324),g=t(50946),v=t(28407),h=t(63551),y=t(50714),x=t(43015),b=t(1257),j=t(90374),C=t(85893);function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach(function(n){o()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var A=function(e,n,t){var r={};return n.type!==p.TaxType.VAT||(isNaN(n.rate)||c()(n.rate)?r.rate=(0,f.Tr)(f.pn.FORM_FIELD_REQUIRED):(0,g.VA)(e,r,n,"rate",0,1,100),n.rate&&(!n.idNumber&&t.requireTaxIdNumber?r.idNumber=(0,f.Tr)(f.pn.FORM_FIELD_REQUIRED):n.idNumber&&!(0,p.checkVATNumberFormat)(n.idNumber).isValid&&(r.idNumber=(0,f.Tr)(f.pn.FORM_FIELD_PATTERN)))),r},w=function(e,n,t){var r={};return n.type!==p.TaxType.GST||(n.rate&&!n.idNumber&&t.requireTaxIdNumber?r.idNumber=(0,f.Tr)(f.pn.FORM_FIELD_REQUIRED):[0,.15].includes(n.rate)||(r.rate=(0,f.Tr)(f.pn.FORM_FIELD_INVALID_VALUE))),r},S=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{requireTaxIdNumber:!0};switch(null==n?void 0:n.type){case p.TaxType.GST:return w(e,n,t);case p.TaxType.VAT:return A(e,n,t);default:return{}}},T=function(e,n,t){switch(n){case p.TaxType.VAT:return{idNumberPlaceholder:"EU000011111",requireIdNumber:!!(null==t?void 0:t.rate)};case p.TaxType.GST:return{idNumberPlaceholder:"123456789",requireIdNumber:!1,forcedRate:p.GST_RATE_PERCENT/100,possibleRates:[0,p.GST_RATE_PERCENT/100]};default:return null}},I=function(e,n,t){return t?"".concat(100*t,"%"):e.formatMessage({id:"lTGBvW",defaultMessage:[{type:0,value:"No "},{type:1,value:"taxName"}]},{taxName:(0,v.m)(e,n,"short")})},M=function(e){var n=e.taxType,t=e.formik,r=e.formikValuePath,a=e.labelProps,o=e.isOptional,s=e.idNumberLabelRenderer,u=e.dispatchDefaultValueOnMount,p=void 0===u||u,f=(0,m.Z)(),g=l()(t.values,r),P=T(f,n,g),A=function(e){return t.setFieldValue(r,O(O({},g),{},{type:n,rate:e}))};if(d.useEffect(function(){var e=!o&&!c()(P.forcedRate);p&&n&&((null==g?void 0:g.type)!==n||e&&P.forcedRate!==(null==g?void 0:g.rate))&&A(P.forcedRate)},[]),!n)return null;var w=(0,v.m)(f,n,"short"),S=!o&&!c()(P.forcedRate);return(0,C.jsxs)(h.kC,{gap:"8px",children:[(0,C.jsx)(x.Z,{name:"".concat(r,".rate"),htmlFor:"input-".concat(n,"-rate"),label:f.formatMessage({id:"Gsyrfa",defaultMessage:[{type:1,value:"taxName"},{type:0,value:" rate"}]},{taxName:w}),labelProps:O({whiteSpace:"nowrap"},a),inputType:"number",required:!o,children:function(e){var t=e.field;return S||!P.possibleRates?(0,C.jsx)(b.Z,O(O({},t),{},{value:i()(100*t.value,2),onChange:function(e){return A(i()(e.target.value/100,4))},minWidth:65,append:"%",min:0,max:100,step:"0.01",disabled:S})):(0,C.jsx)(j.ZP,{inputId:"input-".concat(n,"-rate"),value:{value:i()(100*t.value,2),label:I(f,n,t.value)},onChange:function(e){return A(e.value)},options:P.possibleRates.map(function(e){return{value:e,label:I(f,n,e)}})})}}),(0,C.jsx)(x.Z,{name:"".concat(r,".idNumber"),htmlFor:"input-".concat(n,"-id-number"),label:s?s(w):f.formatMessage({id:"Byg+S/",defaultMessage:[{type:1,value:"taxName"},{type:0,value:" identifier"}]},{taxName:w}),labelProps:O({whiteSpace:"nowrap"},a),required:!o&&P.requireIdNumber,flexGrow:1,mr:2,children:function(e){var n=e.field;return(0,C.jsx)(y.ZP,O(O({},n),{},{placeholder:f.formatMessage({id:"examples",defaultMessage:[{type:0,value:"e.g., "},{type:1,value:"examples"}]},{examples:P.idNumberPlaceholder})}))}})]})};M.__docgenInfo={description:"Automatically renders the correct tax fields based on the tax type, or nothing if the tax type is null.",methods:[],displayName:"TaxesFormikFields",props:{dispatchDefaultValueOnMount:{defaultValue:{value:"true",computed:!1},required:!1,tsType:{name:"boolean"},description:""},taxType:{required:!0,tsType:{name:"TaxType"},description:""},formik:{required:!0,tsType:{name:"FormikProps",elements:[{name:"any"}],raw:"FormikProps<any>"},description:""},formikValuePath:{required:!0,tsType:{name:"string"},description:""},isOptional:{required:!1,tsType:{name:"boolean"},description:""},labelProps:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},description:""},idNumberLabelRenderer:{required:!1,tsType:{name:"signature",type:"function",raw:"(shortLabel: string) => string",signature:{arguments:[{name:"shortLabel",type:{name:"string"}}],return:{name:"string"}}},description:""}}}},79279:function(e,n,t){t.d(n,{Z:function(){return eU},r:function(){return eq}});var r,i,a,o=t(39138),s=t.n(o),l=t(85696),u=t.n(l),c=t(67294),d=t(10090),p=t(21185),m=t(82818),f=t(44012),g=t(86896),v=t(52015),h=t(89853),y=t(95905),x=t(74197),b=t(71698),j=t(7706),C=t(71156),P=t(13412),O=t(39631),A=t(19314),w=t(51506),S=t(67334),T=t(25451),I=t(90068),M=t(63551),E=t(88318),N=t(48900),Z=t(34815),k=t(62612),R=t(29126),D=t(60659),F=t(608),q=t(2636),_=t(61936),L=t(31811),H=t(3323),z=t.n(H),U=t(930),B=t.n(U),V=t(91850),W=t(91901),$=t(7136),G=t(85893),Y=["transaction"];function K(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function X(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?K(Object(t),!0).forEach(function(n){B()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Q=function(e){var n,t;return e.isRefund?"success":e.isOrderRejected&&e.isRefunded?"error":e.isRefunded||(null===(n=e.order)||void 0===n?void 0:n.status)===h.D.PROCESSING?"grey":(null===(t=e.order)||void 0===t?void 0:t.status)===h.D.PENDING?"warning":"success"},J=(0,V.defineMessages)({completed:{id:"Order.Status.Completed",defaultMessage:[{type:0,value:"Completed"}]},refunded:{id:"Order.Status.Refunded",defaultMessage:[{type:0,value:"Refunded"}]},rejected:{id:"expense.rejected",defaultMessage:[{type:0,value:"Rejected"}]}}),ee=function(e,n){var t;return n.isRefund?e.formatMessage(J.completed):n.isOrderRejected&&n.isRefunded?e.formatMessage(J.rejected):n.isRefunded?e.formatMessage(J.refunded):[h.D.PROCESSING,h.D.PENDING].includes(null===(t=n.order)||void 0===t?void 0:t.status)?(0,W.Z)(e,n.order.status):e.formatMessage(J.completed)},en=(0,V.defineMessages)((r={},B()(r,h.D.PENDING,{id:"Order.Status.Pending",defaultMessage:[{type:0,value:"Please follow the payment instructions in the confirmation email to complete your transaction."}]}),B()(r,h.D.PROCESSING,{id:"Order.Status.Processing",defaultMessage:[{type:0,value:"We're waiting for a third-party service to confirm the transaction was completed."}]}),r)),et=function(e){var n,t=e.transaction,r=z()(e,Y),i=(0,g.Z)(),a=(0,G.jsx)(D.Z,X(X({type:Q(t),fontWeight:"600",letterSpacing:"0.8px",textTransform:"uppercase"},r),{},{children:ee(i,t)}));return[h.D.PROCESSING,h.D.PENDING].includes(null===(n=t.order)||void 0===n?void 0:n.status)?(0,G.jsx)(F.Z,{content:function(){return i.formatMessage(en[t.order.status],$.ZP)},children:a}):a};et.__docgenInfo={description:"",methods:[],displayName:"TransactionStatusTag",props:{isRefund:{description:"",type:{name:"bool"},required:!1},isRefunded:{description:"",type:{name:"bool"},required:!1},isOrderRejected:{description:"",type:{name:"bool"},required:!1},isProcessingOrPending:{description:"",type:{name:"bool"},required:!1},transaction:{description:"",type:{name:"shape",value:{type:{name:"string",required:!1},isRefund:{name:"bool",required:!1},isRefunded:{name:"bool",required:!1},isOrderRejected:{name:"bool",required:!1},isProcessingOrPending:{name:"bool",required:!1},order:{name:"shape",value:{status:{name:"string",required:!1}},required:!1}}},required:!1}}};var er=t(95612),ei=t(85236),ea=t(85938),eo=t(96802),es=t(8295),el=t(52063),eu=t(28764),ec=t(49376),ed=t.n(ec),ep=t(92358),em=t.n(ep),ef=t(87794),eg=t.n(ef),ev=t(50319),eh=t(29861),ey=t(59644),ex=t(18625),eb=t(24665),ej=(0,ey.Ps)(i||(i=em()(["\n  mutation RefundTransaction($transaction: TransactionReferenceInput!) {\n    refundTransaction(transaction: $transaction) {\n      id\n    }\n  }\n"]))),eC=function(e){var n,t=(0,ev.D)(ej,{context:ey.Tn}),r=u()(t,1)[0],i=c.useState(!1),a=u()(i,2),o=a[0],s=a[1],l=c.useState(null),d=u()(l,2),p=d[0],m=d[1],g=(n=ed()(eg().mark(function n(){return eg().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r({variables:{transaction:{id:e.id}}});case 3:n.next=9;break;case 5:return n.prev=5,n.t0=n.catch(0),m(n.t0),n.abrupt("return");case 9:null==e||e.onMutationSuccess(),s(!1);case 11:case"end":return n.stop()}},n,null,[[0,5]])})),function(){return n.apply(this,arguments)});return(0,G.jsx)(M.kC,{flexDirection:"column",children:(0,G.jsxs)(M.xu,{children:[(0,G.jsx)(k.Z,{buttonSize:"small",buttonStyle:"secondary",minWidth:140,background:"transparent",textTransform:"capitalize",onClick:function(){return s(!0)},children:(0,G.jsxs)(M.kC,{alignItems:"center",justifyContent:"space-evenly",children:[(0,G.jsx)(eh.W,{size:16}),(0,G.jsx)(f.Z,{id:"transaction.refund.btn",defaultMessage:[{type:0,value:"refund"}]})]})}),o&&(0,G.jsx)(ex.Z,{onClose:function(){s(!1),m(null)},header:(0,G.jsx)(f.Z,{id:"Refund",defaultMessage:[{type:0,value:"Refund"}]}),body:(0,G.jsxs)("div",{children:[(0,G.jsx)("div",{children:(0,G.jsx)(f.Z,{id:"transaction.refund.info",defaultMessage:[{type:0,value:"The contributor will be refunded the full amount."}]})}),p&&(0,G.jsx)(eb.Z,{mt:"12px",error:p})]}),continueLabel:(0,G.jsxs)(M.kC,{alignItems:"center",justifyContent:"space-evenly",children:[(0,G.jsx)(eh.W,{size:16}),(0,G.jsx)(f.Z,{id:"Refund",defaultMessage:[{type:0,value:"Refund"}]})]}),continueHandler:g})]})})};eC.__docgenInfo={description:"",methods:[],displayName:"TransactionRefundButton",props:{id:{description:"",type:{name:"string"},required:!0},onMutationSuccess:{description:"",type:{name:"func"},required:!1}}};var eP=t(64604),eO=t(69755),eA=t(25009),ew=function(){return(0,G.jsx)("div",{children:(0,G.jsx)(_.P,{fontSize:"12px",lineHeight:"18px",children:(0,G.jsx)(f.Z,{id:"transaction.reject.info",defaultMessage:[{type:0,value:"Only reject if you want to remove the contributor from your Collective. This will refund their transaction, remove them from your Collective, and display the contribution as 'rejected'."}]})})})},eS=(0,ey.Ps)(a||(a=em()(["\n  mutation RejectTransaction($transaction: TransactionReferenceInput!, $message: String) {\n    rejectTransaction(transaction: $transaction, message: $message) {\n      id\n    }\n  }\n"]))),eT=function(e){var n,t=(0,ev.D)(eS,{context:ey.Tn}),r=u()(t,2),i=r[0],a=r[1].error,o=c.useState(!1),s=u()(o,2),l=s[0],d=s[1],p=c.useState(null),m=u()(p,2),g=m[0],v=m[1],h=c.useState(""),y=u()(h,2),x=y[0],b=y[1];c.useEffect(function(){v(a)},[a]);var j=(n=ed()(eg().mark(function n(){return eg().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i({variables:{transaction:{id:e.id},message:x}});case 2:e.onMutationSuccess(),d(!1);case 4:case"end":return n.stop()}},n)})),function(){return n.apply(this,arguments)});return(0,G.jsx)(M.kC,{flexDirection:"column",children:(0,G.jsxs)(M.xu,{children:[(0,G.jsx)(F.Z,{content:ew,children:(0,G.jsx)(k.Z,{buttonSize:"small",buttonStyle:"dangerSecondary",minWidth:140,background:"transparent",textTransform:"capitalize",onClick:function(){return d(!0)},ml:e.canRefund?2:0,children:(0,G.jsxs)(M.kC,{alignItems:"center",justifyContent:"space-evenly",children:[(0,G.jsx)(eP.S,{size:16}),(0,G.jsx)(f.Z,{id:"actions.reject",defaultMessage:[{type:0,value:"Reject"}]})]})})}),l&&(0,G.jsx)(ex.Z,{onClose:function(){d(!1),v(null)},header:(0,G.jsx)(f.Z,{id:"RejectContribution",defaultMessage:[{type:0,value:"Reject and refund"}]}),body:(0,G.jsx)(c.Fragment,{children:(0,G.jsxs)(M.kC,{flexDirection:"column",alignItems:"center",justifyContent:"center",children:[(0,G.jsxs)(eO.Z,{type:"warning",mx:2,children:[(0,G.jsx)(f.Z,{id:"transaction.reject.info",defaultMessage:[{type:0,value:"Only reject if you want to remove the contributor from your Collective. This will refund their transaction, remove them from your Collective, and display the contribution as 'rejected'."}]}),(0,G.jsx)("br",{}),(0,G.jsx)("br",{}),e.canRefund?(0,G.jsx)(f.Z,{id:"transaction.reject.info.canRefund",defaultMessage:[{type:0,value:"If you are only trying to refund a mistaken transaction, please use the 'Refund' button instead."}]}):(0,G.jsx)(f.Z,{id:"transaction.reject.info.cannotRefund",defaultMessage:[{type:0,value:"Please only use this option if you do not wish for this contributor to be a part of your Collective. This will remove them from your Collective."}]})]}),g&&(0,G.jsx)(eb.Z,{mt:"12px",error:g}),(0,G.jsx)("div",{className:"mt-4 w-full",children:(0,G.jsx)(eA.Z,{message:x,onChange:function(e){return b(e)}})})]})}),continueLabel:(0,G.jsxs)(M.kC,{alignItems:"center",justifyContent:"space-evenly",children:[(0,G.jsx)(eP.S,{size:16}),(0,G.jsx)(f.Z,{id:"transaction.reject.yes.btn",defaultMessage:[{type:0,value:"Yes, reject"}]})]}),continueHandler:j,isDanger:!0})]})})};eT.__docgenInfo={description:"",methods:[],displayName:"TransactionRejectButton",props:{id:{description:"",type:{name:"string"},required:!0},canRefund:{description:"",type:{name:"bool"},required:!1},onMutationSuccess:{description:"",type:{name:"func"},required:!1}}};var eI=function(e,n){var t,r;return(null===(t=e.parent)||void 0===t?void 0:t.id)===n.id||e.id===(null===(r=n.host)||void 0===r?void 0:r.id)},eM=v.ZP.p.withConfig({displayName:"TransactionDetails__DetailTitle",componentId:"sc-1cmnh82-0"})(["margin:8px 8px 4px 8px;color:#76777a;font-weight:500;letter-spacing:0.6px;text-transform:uppercase;font-weight:bold;font-size:11px;"]),eE=v.ZP.div.withConfig({displayName:"TransactionDetails__DetailDescription",componentId:"sc-1cmnh82-1"})(["margin:0 8px 12px 8px;font-size:12px;color:#4e5052;letter-spacing:-0.04px;"]),eN=(0,v.ZP)(M.kC).withConfig({displayName:"TransactionDetails__DetailsContainer",componentId:"sc-1cmnh82-2"})(["background:#f7f8fa;font-size:12px;padding:16px 24px;"," @media (max-width:40em){padding:8px;}"],function(e){return e.isCompact&&(0,v.iv)(["padding:16px 24px 16px 24px;"])}),eZ=function(e){var n,t,r,i,a,o=e.displayActions,s=e.transaction,l=e.onMutationSuccess,u=(0,g.Z)(),d=(0,ea.N)(eo.US,{useErrorToast:!0}),p=d.loading,m=d.callWith,v=s.id,x=s.type,b=s.isRefunded,j=s.isRefund,C=s.toAccount,P=s.fromAccount,O=s.host,A=s.uuid,w=s.platformFee,S=s.hostFee,T=s.paymentMethod,I=s.paymentProcessorFee,E=s.payoutMethod,N=s.amount,D=s.netAmount,q=s.permissions,L=s.order,H=s.expense,z=s.isOrderRejected,U=s.kind,B=x===y.em.CREDIT,V=null!==L,W=(null==q?void 0:q.canRefund)&&!b,Y=(null==q?void 0:q.canReject)&&!z,K=(null==q?void 0:q.canDownloadInvoice)&&!eI(P,C),X=null===(n=s.relatedTransactions)||void 0===n?void 0:n.find(function(e){return e.kind===y.wz.HOST_FEE&&e.type===y.em.CREDIT}),Q=null===(t=s.relatedTransactions)||void 0===t?void 0:t.find(function(e){return e.kind===y.wz.TAX&&e.type===y.em.CREDIT}),J=null===(r=s.relatedTransactions)||void 0===r?void 0:r.find(function(e){return e.kind===y.wz.PAYMENT_PROCESSOR_FEE&&e.type===y.em.CREDIT}),ee=null===(i=s.relatedTransactions)||void 0===i?void 0:i.find(function(e){return e.kind===y.wz.PAYMENT_PROCESSOR_COVER&&e.type===y.em.CREDIT}),en=[h.D.PROCESSING,h.D.PENDING].includes(null==L?void 0:L.status);return(0,G.jsxs)(eN,{flexWrap:"wrap",alignItems:"flex-start",children:[!en&&(0,G.jsxs)(M.kC,{flexDirection:"column",width:[1,.35],children:[(0,G.jsx)(eM,{children:(0,G.jsx)(f.Z,{id:"transaction.details",defaultMessage:[{type:0,value:"transaction details"}]})}),(0,G.jsxs)(eE,{children:[(0,eo.rX)({amount:N,platformFee:w,hostFee:S,paymentProcessorFee:I,netAmount:D,isCredit:B,isRefunded:b,hasOrder:V,toAccount:C,fromAccount:P,taxAmount:s.taxAmount,taxInfo:s.taxInfo,intl:u,kind:U,expense:H,isRefund:j,paymentProcessorCover:ee}),["CONTRIBUTION","ADDED_FUNDS","EXPENSE"].includes(s.kind)&&(0,G.jsxs)(c.Fragment,{children:[J&&(0,G.jsxs)(c.Fragment,{children:[(0,G.jsx)("br",{}),(0,G.jsx)(f.Z,{id:"TransactionDetails.PaymentProcessorFee",defaultMessage:[{type:0,value:"This transaction includes "},{type:1,value:"amount"},{type:0,value:" payment processor fees"}],values:{amount:(0,G.jsx)(el.Z,{amount:J.netAmount.valueInCents,currency:J.netAmount.currency,showCurrencyCode:!1,amountStyles:null})}})]}),X&&(0,G.jsxs)(c.Fragment,{children:[(0,G.jsx)("br",{}),(0,G.jsx)(f.Z,{id:"TransactionDetails.HostFee",defaultMessage:[{type:0,value:"This transaction includes "},{type:1,value:"amount"},{type:0,value:" host fees"}],values:{amount:(0,G.jsx)(el.Z,{amount:X.netAmount.valueInCents,currency:X.netAmount.currency,showCurrencyCode:!1,amountStyles:null})}})]}),Q&&(0,G.jsxs)(c.Fragment,{children:[(0,G.jsx)("br",{}),(0,G.jsx)(f.Z,{id:"TransactionDetails.Tax",defaultMessage:[{type:0,value:"This transaction includes "},{type:1,value:"amount"},{type:0,value:" "},{type:1,value:"taxName"}],values:{taxName:(null===(a=Q.taxInfo)||void 0===a?void 0:a.name)||"Tax",amount:(0,G.jsx)(el.Z,{amount:Q.netAmount.valueInCents,currency:Q.netAmount.currency,showCurrencyCode:!1,amountStyles:null})}})]})]})]}),(null==L?void 0:L.memo)&&(0,G.jsxs)(c.Fragment,{children:[(0,G.jsx)(eM,{children:(0,G.jsx)(f.Z,{id:"D5NqQO",defaultMessage:[{type:0,value:"Memo"}]})}),(0,G.jsx)(eE,{children:L.memo})]}),(null==L?void 0:L.processedAt)&&(s.kind===y.wz.ADDED_FUNDS||!T&&s.kind===y.wz.CONTRIBUTION)&&(0,G.jsxs)(c.Fragment,{children:[(0,G.jsx)(eM,{children:(0,G.jsxs)("span",{children:[(0,G.jsx)(f.Z,{id:"expense.incurredAt",defaultMessage:[{type:0,value:"Date"}]})," ",(0,G.jsx)(F.Z,{content:function(){return(0,G.jsx)(f.Z,{id:"mqg/wj",defaultMessage:[{type:0,value:"Date the funds were received."}]})},children:(0,G.jsx)(er.Z,{size:13})})]})}),(0,G.jsx)(eE,{children:u.formatDate(L.processedAt,{dateStyle:"long",timeZone:"UTC"})})]})]}),(0,G.jsx)(M.kC,{flexDirection:"column",width:[1,.35],children:(0,G.jsxs)(M.xu,{children:[(O||T)&&(0,G.jsxs)(c.Fragment,{children:[O&&(0,G.jsxs)(M.xu,{children:[(0,G.jsx)(eM,{children:(0,G.jsx)(f.Z,{id:"Fiscalhost",defaultMessage:[{type:0,value:"Fiscal Host"}]})}),(0,G.jsx)(eE,{children:(0,G.jsx)(R.Z,{as:Z.Z,collective:O})})]}),T&&(0,G.jsxs)(M.xu,{children:[(0,G.jsx)(eM,{children:(0,G.jsx)(f.Z,{id:"PaidWith",defaultMessage:[{type:0,value:"Paid With"}]})}),(0,G.jsx)(eE,{children:(0,G.jsx)(eu.Z,{type:T.type,fontSize:11,iconSize:16})})]})]}),E&&(0,G.jsxs)(M.xu,{children:[(0,G.jsx)(eM,{children:(0,G.jsx)(f.Z,{id:"PaidWith",defaultMessage:[{type:0,value:"Paid With"}]})}),(0,G.jsx)(eE,{children:(0,G.jsx)(es.Z,{type:E.type,color:"inherit",fontWeight:"inherit",fontSize:"inherit",iconSize:16})})]})]})}),o&&(0,G.jsx)(M.kC,{flexDirection:"column",width:[1,.3],children:(0,G.jsxs)(M.kC,{flexWrap:"wrap",justifyContent:["flex-start","flex-end"],alignItems:"center",mt:[2,0],children:[(W||Y)&&(0,G.jsx)(F.Z,{content:(0,G.jsxs)(M.xu,{children:[W&&(0,G.jsx)(_.P,{fontSize:"12px",lineHeight:"18px",mb:Y?3:0,children:(0,G.jsx)(f.Z,{id:"transaction.refund.helpText",defaultMessage:[{type:8,value:"bold",children:[{type:0,value:"Refund:"}]},{type:0,value:" This action will reimburse the full amount back to your contributor. They can contribute again in the future."}],values:{bold:$.Gl}})}),Y&&(0,G.jsx)(_.P,{fontSize:"12px",lineHeight:"18px",children:(0,G.jsx)(f.Z,{id:"transaction.reject.helpText",defaultMessage:[{type:8,value:"bold",children:[{type:0,value:"Reject:"}]},{type:0,value:" This action prevents the contributor from contributing in the future and will reimburse the full amount back to them."}],values:{bold:$.Gl}})})]}),mt:2,children:(0,G.jsx)(M.xu,{mx:2,children:(0,G.jsx)(ei.k,{color:"#1869F5",size:20})})}),W&&(0,G.jsx)(_.Dr,{mb:2,children:(0,G.jsx)(eC,{id:v,onMutationSuccess:l})}),Y&&(0,G.jsx)(_.Dr,{mb:2,children:(0,G.jsx)(eT,{id:v,canRefund:(null==q?void 0:q.canRefund)&&!b,onMutationSuccess:l})}),K&&(0,G.jsxs)(k.Z,{buttonSize:"small","data-loading":p,loading:p,onClick:m({transactionUuid:A,toCollectiveSlug:C.slug,createdAt:s.createdAt}),minWidth:140,background:"transparent",textTransform:"capitalize",ml:2,mb:2,px:"unset",children:[H&&(0,G.jsx)(f.Z,{id:"DownloadInvoice",defaultMessage:[{type:0,value:"Download invoice"}]}),L&&(0,G.jsx)(f.Z,{id:"DownloadReceipt",defaultMessage:[{type:0,value:"Download receipt"}]})]})]})})]})};eZ.__docgenInfo={description:"",methods:[],displayName:"TransactionDetails",props:{displayActions:{description:"",type:{name:"bool"},required:!1},transaction:{description:"",type:{name:"shape",value:{isRefunded:{name:"bool",required:!1},isRefund:{name:"bool",required:!1},kind:{name:"enum",computed:!0,value:"Object.values(TransactionKind)",required:!1},isOrderRejected:{name:"bool",required:!1},fromAccount:{name:"shape",value:{id:{name:"string",required:!1},slug:{name:"string",required:!0},name:{name:"string",required:!0},imageUrl:{name:"string",required:!1}},required:!0},host:{name:"shape",value:{id:{name:"string",required:!1},slug:{name:"string",required:!0},name:{name:"string",required:!0},imageUrl:{name:"string",required:!1}},required:!1},toAccount:{name:"shape",value:{id:{name:"string",required:!1},slug:{name:"string",required:!0},name:{name:"string",required:!0},imageUrl:{name:"string",required:!1}},required:!1},order:{name:"shape",value:{id:{name:"string",required:!1},status:{name:"string",required:!1},memo:{name:"string",required:!1},processedAt:{name:"string",required:!1}},required:!1},expense:{name:"object",required:!1},id:{name:"string",required:!1},uuid:{name:"string",required:!1},type:{name:"string",required:!1},currency:{name:"string",required:!1},description:{name:"string",required:!1},createdAt:{name:"string",required:!1},taxAmount:{name:"object",required:!1},taxInfo:{name:"object",required:!1},paymentMethod:{name:"shape",value:{type:{name:"string",required:!1}},required:!1},payoutMethod:{name:"shape",value:{type:{name:"string",required:!1}},required:!1},amount:{name:"shape",value:{valueInCents:{name:"number",required:!1},currency:{name:"string",required:!1}},required:!1},netAmount:{name:"shape",value:{valueInCents:{name:"number",required:!1},currency:{name:"string",required:!1}},required:!1},platformFee:{name:"shape",value:{valueInCents:{name:"number",required:!1},currency:{name:"string",required:!1}},required:!1},paymentProcessorFee:{name:"shape",value:{valueInCents:{name:"number",required:!1},currency:{name:"string",required:!1}},required:!1},hostFee:{name:"shape",value:{valueInCents:{name:"number",required:!1},currency:{name:"string",required:!1}},required:!1},permissions:{name:"shape",value:{canRefund:{name:"bool",required:!1},canDownloadInvoice:{name:"bool",required:!1},canReject:{name:"bool",required:!1}},required:!1},usingGiftCardFromCollective:{name:"object",required:!1},relatedTransactions:{name:"array",required:!1}}},required:!1},isHostAdmin:{description:"",type:{name:"bool"},required:!1},isRoot:{description:"",type:{name:"bool"},required:!1},isToCollectiveAdmin:{description:"",type:{name:"bool"},required:!1},onMutationSuccess:{description:"",type:{name:"func"},required:!1}}};var ek=y.wz.CONTRIBUTION,eR=y.wz.ADDED_FUNDS,eD=y.wz.PLATFORM_TIP,eF=" • ",eq=function(e,n){var t,r,i=e.type===y.em.CREDIT,a=null!==e.order,o=e.kind===y.wz.EXPENSE,s=(null===(t=e.fromAccount)||void 0===t?void 0:t.slug)===n.slug,l=a&&[h.D.PROCESSING,h.D.PENDING].includes(null===(r=e.order)||void 0===r?void 0:r.status);return o?e.netAmount:l?e.amount:i&&a?e.amount:e.isRefunded?s&&!e.isRefund||e.isRefund&&i?e.netAmount:e.amount:e.netAmount},e_=function(e){var n=e.expense,t=e.order,r=e.children;return n?(0,G.jsx)(F.Z,{content:(0,G.jsx)(f.Z,{id:"Expense.GoToPage",defaultMessage:[{type:0,value:"Go to expense page"}]}),delayHide:0,children:(0,G.jsx)(R.Z,{as:N.Z,underlineOnHover:!0,href:"".concat((0,P.x0)(n.account),"/expenses/").concat(n.legacyId),children:r})}):t?(0,G.jsx)(F.Z,{content:(0,G.jsx)(f.Z,{id:"Contribution.GoToPage",defaultMessage:[{type:0,value:"Go to contribution page"}]}),delayHide:0,children:(0,G.jsx)(R.Z,{as:N.Z,underlineOnHover:!0,href:"".concat((0,P.x0)(t.toAccount),"/contributions/").concat(t.legacyId),children:r})}):(0,G.jsx)(c.Fragment,{children:r})},eL=(0,v.ZP)(D.Z).attrs({variant:"rounded-left",type:"grey",mb:"4px",mr:"10px",textTransform:"uppercase",fontSize:"10px",fontWeight:"600"}).withConfig({displayName:"TransactionItem__KindTag",componentId:"sc-dqouq4-0"})([""]),eH=function(e,n,t){var r;return r=t?"REFUNDED":n?"COMPLETED":(null==e?void 0:e.status)||b.g26.PAID,(0,G.jsx)(I.Z,{status:r,fontSize:"12px",fontWeight:"bold",lineHeight:"16px",letterSpacing:"0.06em",px:"6px",py:"2px"})},ez=function(e){var n,t,r=e.displayActions,i=e.collective,a=e.transaction,o=e.onMutationSuccess,l=a.toAccount,v=a.fromAccount,b=a.giftCardEmitterAccount,P=a.order,I=a.expense,N=a.type,D=a.kind,F=a.description,H=a.createdAt,z=a.isRefunded,U=a.isRefund,B=(0,j.Z)().LoggedInUser,V=c.useState(!1),W=u()(V,2),$=W[0],Y=W[1],K=(0,g.Z)(),X=null!==P,Q=D===y.wz.EXPENSE,J=N===y.em.CREDIT,ee=J?A.XG:A.cw,en=i.legacyId||i.id,er=B&&B.CollectiveId===en,ei=J?v:l,ea=X&&[h.D.PROCESSING,h.D.PENDING].includes(null==P?void 0:P.status),eo=eq(a,i),es=function(){return(0,G.jsx)(k.Z,{buttonSize:"tiny",buttonStyle:"secondary",isBorderless:!0,onClick:function(){return Y(!$)},children:(0,G.jsx)(_.Dr,{whiteSpace:"nowrap",children:$?(0,G.jsxs)(c.Fragment,{children:[(0,G.jsx)(f.Z,{id:"closeDetails",defaultMessage:[{type:0,value:"Close Details"}]}),"\xa0",(0,G.jsx)(p.K,{size:"1em"})]}):(0,G.jsx)(c.Fragment,{children:(0,G.jsxs)(_.Dr,{whiteSpace:"nowrap",children:[(0,G.jsx)(f.Z,{id:"viewDetails",defaultMessage:[{type:0,value:"View Details"}]}),"\xa0",(0,G.jsx)(d._,{size:"1em"})]})})})})};return(0,G.jsxs)(ee,{children:[(0,G.jsxs)(M.xu,{px:[16,27],py:16,children:[(0,G.jsxs)(M.kC,{flexWrap:"wrap",justifyContent:"space-between",children:[(0,G.jsxs)(M.kC,{flex:"1",minWidth:"60%",mr:3,children:[(0,G.jsx)(M.xu,{mr:3,children:(0,G.jsx)(Z.Z,{collective:ei,withHoverCard:!0,children:(0,G.jsx)(O.ZP,{collective:ei,radius:40})})}),(0,G.jsxs)(M.xu,{children:[(0,G.jsxs)(w.Z,{fontWeight:"500",fontSize:["14px",null,null,"16px"],lineHeight:["20px",null,null,"24px"],children:[(0,G.jsx)(e_,{expense:I,order:P,children:(0,G.jsx)(_.Dr,{title:F,color:F?"black.900":"black.600",children:F?s()(F,{length:60}):(0,G.jsx)(f.Z,{id:"NoDescription",defaultMessage:[{type:0,value:"No description provided"}]})})}),er&&(null===(n=a.fromAccount)||void 0===n?void 0:n.isIncognito)&&(0,G.jsx)(E.Z,{className:"ml-1 align-bottom text-muted-foreground",children:(0,G.jsx)(f.Z,{id:"PrivateTransaction",defaultMessage:[{type:0,value:"This incognito transaction is only visible to you"}]})})]}),(0,G.jsxs)(_.P,{mt:"4px",fontSize:"12px",lineHeight:"20px",color:"black.700",children:[(0,C.Nx)(K,a.type),"\xa0",(0,G.jsxs)(c.Fragment,{children:[(0,G.jsx)(f.Z,{id:"Transaction.from",defaultMessage:[{type:0,value:"from "},{type:1,value:"name"}],values:{name:(0,G.jsx)(R.Z,{as:Z.Z,withHoverCard:!0,collective:v})}}),"\xa0"]}),(0,G.jsx)(f.Z,{id:"Transaction.to",defaultMessage:[{type:0,value:"to "},{type:1,value:"name"}],values:{name:(0,G.jsx)(R.Z,{as:Z.Z,withHoverCard:!0,collective:l})}}),b&&(0,G.jsxs)(c.Fragment,{children:["\xa0",(0,G.jsx)(f.Z,{id:"transaction.usingGiftCardFrom",defaultMessage:[{type:0,value:"using a "},{type:1,value:"giftCard"},{type:0,value:" from "},{type:1,value:"collective"}],values:{giftCard:(0,G.jsx)(T.Z,{term:T.F.GIFT_CARD,textTransform:"lowercase"}),collective:(0,G.jsx)(R.Z,{as:Z.Z,withHoverCard:!0,collective:b})}})]}),eF,(0,G.jsx)(S.Z,{value:H}),Q&&(null==I?void 0:null===(t=I.comments)||void 0===t?void 0:t.totalCount)>0&&(0,G.jsxs)(c.Fragment,{children:[eF,(0,G.jsxs)("span",{children:[(0,G.jsx)(m.t,{size:"16px"}),"\xa0",I.comments.totalCount]})]})]})]})]}),(0,G.jsxs)(M.kC,{flexDirection:["row","column"],mt:[3,0],flexWrap:"wrap",alignItems:["center","flex-end"],children:[(0,G.jsxs)(w.Z,{display:"flex",my:2,mr:[3,0],minWidth:100,justifyContent:"flex-end",fontSize:"16px",ml:"auto",children:[(0,G.jsx)(L.Z,{isCredit:J}),(0,G.jsx)(_.Dr,{fontWeight:"bold",color:"black.900",mr:1,children:(0,x.xG)(Math.abs(eo.valueInCents),eo.currency,{locale:K.locale})}),(0,G.jsx)(_.Dr,{color:"black.700",textTransform:"uppercase",children:eo.currency})]}),X&&(0,G.jsx)(et,{transaction:a,fontSize:"12px",fontWeight:"bold",lineHeight:"16px",letterSpacing:"0.06em",px:"6px",py:"2px"})," ",Q&&eH(I,U,z)]})]}),X&&[ek,eR,eD].includes(a.kind)&&(0,G.jsxs)(w.Z,{borderTop:["1px solid #E8E9EB","none"],mt:3,pt:[2,0],children:[(0,G.jsxs)(eL,{children:[(0,C.w$)(K,a.kind),!!(null==P?void 0:P.legacyId)&&" #".concat(P.legacyId)]}),(!ea||a.paymentMethod)&&es()]}),Q&&(0,G.jsxs)(w.Z,{display:"flex",mt:3,pt:[2,0],children:[(0,G.jsx)(q.Z,{expense:I}),es()]}),!Q&&(!X||![ek,eR,eD].includes(a.kind))&&(0,G.jsx)(w.Z,{mt:3,pt:[2,0],children:(0,G.jsx)(eL,{children:(0,C.w$)(K,a.kind)})})]}),$&&(X||Q)&&(0,G.jsx)(eZ,{displayActions:r,transaction:a,onMutationSuccess:o})]})};ez.__docgenInfo={description:"",methods:[],displayName:"TransactionItem",props:{displayActions:{description:"",type:{name:"bool"},required:!1},transaction:{description:"",type:{name:"shape",value:{isRefunded:{name:"bool",required:!1},isRefund:{name:"bool",required:!1},isOrderRejected:{name:"bool",required:!1},fromAccount:{name:"shape",value:{id:{name:"string",required:!1},slug:{name:"string",required:!0},name:{name:"string",required:!0},imageUrl:{name:"string",required:!1},isIncognito:{name:"bool",required:!1}},required:!0},host:{name:"shape",value:{id:{name:"string",required:!1},slug:{name:"string",required:!0},name:{name:"string",required:!0},imageUrl:{name:"string",required:!1}},required:!1},toAccount:{name:"shape",value:{id:{name:"string",required:!1},slug:{name:"string",required:!0},name:{name:"string",required:!0},imageUrl:{name:"string",required:!1}},required:!1},giftCardEmitterAccount:{name:"shape",value:{id:{name:"string",required:!1},slug:{name:"string",required:!0},name:{name:"string",required:!0},imageUrl:{name:"string",required:!1}},required:!1},order:{name:"shape",value:{id:{name:"string",required:!1},legacyId:{name:"number",required:!1},status:{name:"string",required:!1}},required:!1},expense:{name:"shape",value:{id:{name:"string",required:!1},status:{name:"string",required:!1},legacyId:{name:"number",required:!1},comments:{name:"shape",value:{totalCount:{name:"number",required:!1}},required:!1}},required:!1},id:{name:"string",required:!1},uuid:{name:"string",required:!1},type:{name:"enum",computed:!0,value:"Object.values(TransactionTypes)",required:!1},kind:{name:"enum",computed:!0,value:"Object.values(TransactionKind)",required:!1},currency:{name:"string",required:!1},description:{name:"string",required:!1},createdAt:{name:"string",required:!1},hostFeeInHostCurrency:{name:"number",required:!1},platformFeeInHostCurrency:{name:"number",required:!1},paymentProcessorFeeInHostCurrency:{name:"number",required:!1},taxAmount:{name:"object",required:!1},amount:{name:"shape",value:{valueInCents:{name:"number",required:!1},currency:{name:"string",required:!1}},required:!1},netAmount:{name:"shape",value:{valueInCents:{name:"number",required:!1},currency:{name:"string",required:!1}},required:!1},netAmountInCollectiveCurrency:{name:"number",required:!1},usingGiftCardFromCollective:{name:"object",required:!1},paymentMethod:{name:"object",required:!1}}},required:!1},collective:{description:"",type:{name:"shape",value:{id:{name:"union",value:[{name:"number"},{name:"string"}],required:!1},legacyId:{name:"number",required:!1},slug:{name:"string",required:!0}}},required:!0},onMutationSuccess:{description:"",type:{name:"func"},required:!1}}};var eU=ez},25009:function(e,n,t){t(67294);var r=t(91850),i=t(86896),a=t(44012),o=t(86048),s=t(55216),l=t(85893),u=(0,r.defineMessages)({rejectionReason:{id:"RejectionReason",defaultMessage:[{type:0,value:"Type your rejection reason here if you want."}]}}),c=function(e){var n=e.message,t=e.onChange,r=(0,i.Z)();return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(o._,{htmlFor:"rejectionMessage",children:(0,l.jsx)(a.Z,{id:"OptionalFieldLabel",defaultMessage:[{type:1,value:"field"},{type:0,value:" (optional)"}],values:{field:(0,l.jsx)(a.Z,{id:"Contact.Message",defaultMessage:[{type:0,value:"Message"}]})}})}),(0,l.jsx)(s.g,{resize:"none",id:"rejectionMessage",name:"rejectionMessage",maxLength:500,showCount:!0,placeholder:r.formatMessage(u.rejectionReason),value:n,onChange:function(e){return t(e.target.value)}})]})};c.__docgenInfo={description:"",methods:[],displayName:"TransactionRejectMessageForm",props:{message:{description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!1}}},n.Z=c},6532:function(e,n,t){t.d(n,{Zs:function(){return b},ce:function(){return x}});var r=t(930),i=t.n(r),a=t(25325),o=t.n(a),s=t(3323),l=t.n(s),u=t(84238),c=t.n(u),d=t(67294),p=t(86896),m=t(95905),f=t(71156),g=t(53998),v=t(85893),h=["onChange","value","kinds"];function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var x=function(){return[m.wz.ADDED_FUNDS,m.wz.BALANCE_TRANSFER,m.wz.CONTRIBUTION,m.wz.EXPENSE,m.wz.PLATFORM_TIP]},b=function(e){if("ALL"===e)return Object.values(m.wz);var n=null==e?void 0:e.split(",");return null!=n&&n.length&&n.length!==c()(m.wz)&&null!=n&&n.length?n:null},j={ValueContainer:g.Kz,MultiValue:function(){return null}},C=function(e){var n=e.onChange,t=e.value,r=e.kinds,a=l()(e,h),s=(0,p.Z)(),u=function(e,n){return{label:(0,f.w$)(s,e),value:e,idx:n}},C=r&&r.length?r:x(),P=C.map(u),O=d.useMemo(function(){return(t?b(t):o()(x(),C)).map(u)},[t]);return(0,v.jsx)(g.Vy,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({isSearchable:!1,isClearable:!1,onChange:function(e){return n(e&&e.length!==c()(m.wz)?e.map(function(e){return e.value}).join(","):null)},value:O,options:P,components:j,closeMenuOnSelect:!1,hideSelectedOptions:!1,isMulti:!0,maxWidth:["100%"],minWidth:150,styles:{control:{flexWrap:"nowrap"}}},a))};C.__docgenInfo={description:"",methods:[],displayName:"TransactionsKindFilter",props:{onChange:{description:"",type:{name:"func"},required:!0},value:{description:"",type:{name:"string"},required:!1},kinds:{description:"",type:{name:"array"},required:!1}}},n.ZP=C},15203:function(e,n,t){t.d(n,{N:function(){return l}});var r,i=t(92358),a=t.n(i),o=t(59644),s=t(94083),l=(0,o.Ps)(r||(r=a()(["\n  fragment TransactionsQueryCollectionFragment on TransactionCollection {\n    totalCount\n    offset\n    limit\n    kinds\n    paymentMethodTypes\n    nodes {\n      id\n      uuid\n      kind\n      amount {\n        currency\n        valueInCents\n      }\n      netAmount {\n        currency\n        valueInCents\n      }\n      taxAmount {\n        valueInCents\n        currency\n      }\n      taxInfo {\n        id\n        rate\n        type\n      }\n      platformFee {\n        currency\n        valueInCents\n      }\n      paymentProcessorFee {\n        currency\n        valueInCents\n      }\n      hostFee {\n        currency\n        valueInCents\n      }\n      type\n      description\n      createdAt\n      isRefunded\n      isRefund\n      isOrderRejected\n      toAccount {\n        id\n        name\n        slug\n        type\n        imageUrl\n        hasImage\n        isIncognito\n        ... on AccountWithParent {\n          parent {\n            id\n            slug\n          }\n        }\n        settings\n        ... on Individual {\n          isGuest\n        }\n        ... on Collective {\n          host {\n            id\n            name\n            slug\n            type\n          }\n        }\n        ... on AccountWithHost {\n          hostFeePercent\n          platformFeePercent\n        }\n        ...AccountHoverCardFields\n      }\n      fromAccount {\n        id\n        name\n        slug\n        type\n        imageUrl\n        hasImage\n        isIncognito\n        ... on Event {\n          parent {\n            id\n          }\n        }\n        ... on Project {\n          parent {\n            id\n          }\n        }\n        ... on Individual {\n          isGuest\n        }\n        ... on AccountWithHost {\n          hostFeePercent\n          platformFeePercent\n        }\n        ...AccountHoverCardFields\n      }\n      host {\n        id\n        name\n        slug\n        type\n        imageUrl\n      }\n      account {\n        id\n        isIncognito\n      }\n      giftCardEmitterAccount {\n        id\n        name\n        slug\n        type\n        imageUrl\n      }\n      permissions {\n        id\n        canRefund\n        canDownloadInvoice\n        canReject\n      }\n      paymentMethod {\n        id\n        type\n      }\n      payoutMethod {\n        id\n        type\n      }\n      order {\n        id\n        legacyId\n        status\n        memo\n        processedAt\n        toAccount {\n          id\n          slug\n        }\n      }\n      expense {\n        id\n        status\n        tags\n        type\n        feesPayer\n        amount\n        currency\n        legacyId\n        # limit: 1 as current best practice to avoid the API fetching entries it doesn't need\n        comments(limit: 1) {\n          totalCount\n        }\n        payoutMethod {\n          id\n          type\n        }\n        account {\n          id\n          slug\n        }\n        createdByAccount {\n          id\n          slug\n        }\n      }\n      relatedTransactions(kind: [HOST_FEE, PAYMENT_PROCESSOR_FEE, PAYMENT_PROCESSOR_COVER, TAX]) {\n        id\n        type\n        kind\n        netAmount {\n          currency\n          valueInCents\n        }\n      }\n    }\n  }\n  ","\n"])),s.XQ)},86048:function(e,n,t){t.d(n,{_:function(){return g}});var r=t(930),i=t.n(r),a=t(3323),o=t.n(a),s=t(67294),l=t(90978),u=t(93600),c=t(66629),d=t(85893),p=["className"];function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var f=(0,u.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),g=s.forwardRef(function(e,n){var t=e.className,r=o()(e,p);return(0,d.jsx)(l.f,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({ref:n,className:(0,c.cn)(f(),t)},r))});g.displayName=l.f.displayName,g.__docgenInfo={description:"",methods:[]}},55216:function(e,n,t){t.d(n,{g:function(){return m}});var r=t(930),i=t.n(r),a=t(3323),o=t.n(a),s=t(67294),l=t(66629),u=t(22760),c=t(85893),d=["className","showCount"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var m=s.forwardRef(function(e,n){var t=e.className,r=e.showCount,a=o()(e,d),s=a.value||a.defaultValue||"",m=(0,c.jsx)("textarea",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach(function(n){i()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n},a));return void 0!==r&&r?(0,c.jsxs)("div",{className:"relative",children:[m,(0,c.jsx)("div",{className:"absolute bottom-1.5 right-1.5",children:(0,c.jsxs)(u.C,{size:"sm",children:[(0,c.jsx)("span",{children:s.length}),a.maxLength&&(0,c.jsxs)("span",{className:"text-muted-foreground",children:["/",a.maxLength]})]})})]}):m});m.displayName="Textarea",m.__docgenInfo={description:"",methods:[],displayName:"Textarea",props:{showCount:{defaultValue:{value:"false",computed:!1},required:!1}}}},72210:function(e,n,t){t.d(n,{Q:function(){return a}}),t(67294);var r=t(44012),i=t(85893);function a(){return(0,i.jsx)("p",{className:"text-sm italic text-muted-foreground",children:(0,i.jsx)(r.Z,{id:"l+tve8",defaultMessage:[{type:1,value:"virtualCardProgramName"},{type:0,value:" Visa\xae Commercial Credit cards are issued by Celtic Bank."}],values:{virtualCardProgramName:"Virtual Card"}})})}a.__docgenInfo={description:"",methods:[],displayName:"StripeVirtualCardComplianceStatement"}},12494:function(e,n){n.Z={CHARGE:"CHARGE",INVOICE:"INVOICE",RECEIPT:"RECEIPT",GRANT:"GRANT",SETTLEMENT:"SETTLEMENT",UNCLASSIFIED:"UNCLASSIFIED"}},73158:function(e,n,t){t.d(n,{FZ:function(){return i},Nk:function(){return r},kD:function(){return o},vi:function(){return a}});var r={ACCOUNT_BALANCE:"ACCOUNT_BALANCE",BANK_ACCOUNT:"BANK_ACCOUNT",PAYPAL:"PAYPAL",CREDIT_CARD:"CREDIT_CARD",OTHER:"OTHER"},i="INVITE",a="VIRTUAL_CARD",o="Thank you for your contribution! Here are the payment instructions. Be sure to include the reference details, so we can match your payment to the correct transaction. Sometimes it can take a few days for the funds to arrive and be confirmed. You will automatically be issued a receipt.\n\nAmount: {amount}\nReference: {reference}\nDetail: {collective}\n{account}\n"},25618:function(e,n,t){t.d(n,{L:function(){return r}});var r=Object.freeze([])},12711:function(e,n,t){t.d(n,{RF:function(){return T},iU:function(){return S},ip:function(){return A},qc:function(){return O},rX:function(){return P},wx:function(){return w}});var r=t(7980),i=t.n(r),a=t(82492),o=t.n(a),s=t(45220),l=t.n(s),u=t(14176),c=t.n(u),d=t(930),p=t.n(d),m=t(57557),f=t.n(m),g=t(27361),v=t.n(g),h=t(30845);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach(function(n){p()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function b(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(e,n)}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw a}}}}function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var C=t(26704).eV.ORGANIZATION,P=(0,h.Z)(function(e){if(!e)return[];var n,t=[e],r=b(v()(e,"adminMemberships.nodes",[]));try{for(r.s();!(n=r.n()).done;){var i=n.value;if([C].includes(i.account.type)||i.account.isActive){t.push(f()(i.account,["childrenAccounts"]));var a,o=b(i.account.childrenAccounts.nodes);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.isActive&&t.push(x({host:i.account.host},s))}}catch(e){o.e(e)}finally{o.f()}}}}catch(e){r.e(e)}finally{r.f()}return t}),O={GRANT:!1,INVOICE:!0,RECEIPT:!0},A=function(e){if(!e)return[];var n=e.host,t=e.parent||e.parentCollective;if(e.supportedExpenseTypes||null!=t&&t.supportedExpenseTypes)return e.supportedExpenseTypes||t.supportedExpenseTypes;var r=o().apply(void 0,[O].concat(i()([n,t,e].map(function(e){var n;return c()(null==e?void 0:null===(n=e.settings)||void 0===n?void 0:n.expenseTypes,l())}))));return Object.keys(r).filter(function(e){return r[e]})},w=function(e,n){return A(e).includes(n)},S=function(e,n){if(!e)return[];var t,r=(null===(t=e.items)||void 0===t?void 0:t.filter(function(e){return!!e.url}))||[],a=[].concat(i()(r),i()(e.attachedFiles||[]));return a=(a=a.map(function(e){return x(x({},e),{},{info:e.info||e.file})})).map(function(e,t){var r;return x(x({},e),{},{name:e.name||(null===(r=e.info)||void 0===r?void 0:r.name)||T(n,t,a.length)})})},T=function(e,n,t){return 1===t?e.formatMessage({id:"File.AttachedFile",defaultMessage:[{type:0,value:"Attached file"}]}):e.formatMessage({id:"A+AIST",defaultMessage:[{type:0,value:"Attached file "},{type:1,value:"number"}]},{number:n+1})}},9830:function(e,n,t){t.d(n,{Z:function(){return h}});var r,i=t(49376),a=t.n(i),o=t(85696),s=t.n(o),l=t(92358),u=t.n(l),c=t(87794),d=t.n(c),p=t(67294),m=t(50319),f=t(31257),g=t(59644),v=(0,g.Ps)(r||(r=u()(["\n  mutation ProcessExpense(\n    $id: String\n    $legacyId: Int\n    $action: ExpenseProcessAction!\n    $message: String\n    $paymentParams: ProcessExpensePaymentParams\n  ) {\n    processExpense(\n      expense: { id: $id, legacyId: $legacyId }\n      action: $action\n      message: $message\n      paymentParams: $paymentParams\n    ) {\n      id\n      ...ExpensePageExpenseFields\n    }\n  }\n\n  ","\n"])),f.Wg);function h(e){var n,t,r=p.useState(null),i=s()(r,2),o=i[0],l=i[1],u=(0,m.D)(v,{context:g.Tn,refetchQueries:["ExpensePage"]}),c=s()(u,2),f=c[0],h=c[1],y=p.useMemo(function(){return function(n){return a()(d().mark(function t(){var r,i,a,o,s=arguments;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(r=s.length>0&&void 0!==s[0]?s[0]:{}).paymentParams,a=r.message,l(n),o={id:e.expense.id,legacyId:e.expense.legacyId,action:n,paymentParams:i,message:a},t.prev=3,t.next=6,f({variables:o});case 6:return t.prev=6,l(null),t.finish(6);case 9:case"end":return t.stop()}},t,null,[[3,,6,9]])}))}},[null===(n=e.expense)||void 0===n?void 0:n.id,null===(t=e.expense)||void 0===t?void 0:t.legacyId,f]),x=p.useMemo(function(){return y("APPROVE")},[y]),b=p.useMemo(function(){return y("REJECT")},[y]),j=p.useMemo(function(){return y("PAY")},[y]),C=p.useMemo(function(){return y("MARK_AS_SPAM")},[y]),P=p.useMemo(function(){return y("UNAPPROVE")},[y]),O=p.useMemo(function(){return y("MARK_AS_UNPAID")},[y]),A=p.useMemo(function(){return y("MARK_AS_INCOMPLETE")},[y]),w=p.useMemo(function(){return y("UNSCHEDULE_PAYMENT")},[y]),S=p.useMemo(function(){return y("REQUEST_RE_APPROVAL")},[y]),T=p.useMemo(function(){return y("HOLD")},[y]),I=p.useMemo(function(){return y("RELEASE")},[y]);return{loading:h.loading,currentAction:o,approve:x,reject:b,pay:j,markAsSpam:C,unapprove:P,markAsUnpaid:O,markAsIncomplete:A,requestReApproval:S,unschedulePayment:w,hold:T,release:I}}},85938:function(e,n,t){t.d(n,{N:function(){return m}});var r=t(49376),i=t.n(r),a=t(85696),o=t.n(a),s=t(87794),l=t.n(s),u=t(67294),c=t(86896),d=t(20073),p=t(32324),m=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.useErrorToast,r=void 0!==t&&t,a=n.defaultData,s=u.useState(!1),m=o()(s,2),f=m[0],g=m[1],v=u.useState(void 0===a?null:a),h=o()(v,2),y=h[0],x=h[1],b=u.useState(),j=o()(b,2),C=j[0],P=j[1],O=(0,d.pm)().toast,A=(0,c.Z)(),w=function(){for(var n=arguments.length,t=Array(n),a=0;a<n;a++)t[a]=arguments[a];return i()(l().mark(function n(){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return g(!0),P(void 0),x(void 0),n.prev=3,n.next=6,e.apply(void 0,t);case 6:x(n.sent),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(3),P(n.t0),console.error(n.t0),r&&O({variant:"error",message:(0,p.jN)(A,n.t0)});case 15:return n.prev=15,g(!1),n.finish(15);case 18:case"end":return n.stop()}},n,null,[[3,10,15,18]])}))};return{loading:f,call:function(){return w.apply(void 0,arguments)()},callWith:w,data:y,error:C}}},93044:function(e,n,t){t.d(n,{O_:function(){return i},SE:function(){return o},fD:function(){return s},q7:function(){return a}});var r=t(67294);n.ZP=function(e){var n=e.callback,t=e.keyMatch;r.useEffect(function(){var e=function(e){("key"in e?e.key===t.key||e.key===t.keyName:e.keyCode===t.keyCode)&&n()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[n,t])};var i={key:"Escape",keyName:"Esc",keyCode:27},a={key:"Enter",keyName:"Enter",keyCode:13},o={key:"ArrowLeft",keyName:"Left arrow",keyCode:37},s={key:"ArrowRight",keyName:"Right arrow",keyCode:39}},21177:function(e,n,t){var r,i=t(930),a=t.n(i),o=t(91850),s=t(27779),l=(0,o.defineMessages)((r={},a()(r,s.bx.TOP_FINANCIAL_CONTRIBUTORS,{id:"SectionContribute.TopContributors",defaultMessage:[{type:0,value:"Top financial contributors"}]}),a()(r,s.bx.CONNECTED_COLLECTIVES,{id:"ConnectedCollectives",defaultMessage:[{type:0,value:"Connected Collectives"}]}),a()(r,s.bx.OUR_TEAM,{id:"OurTeam",defaultMessage:[{type:0,value:"Our team"}]}),a()(r,s.bx.GOALS,{id:"Goals",defaultMessage:[{type:0,value:"Goals"}]}),a()(r,s.bx.UPDATES,{id:"updates",defaultMessage:[{type:0,value:"Updates"}]}),a()(r,s.bx.CONVERSATIONS,{id:"conversations",defaultMessage:[{type:0,value:"Conversations"}]}),a()(r,s.bx.RECURRING_CONTRIBUTIONS,{id:"Contributions.Recurring",defaultMessage:[{type:0,value:"Recurring Contributions"}]}),a()(r,s.bx.TICKETS,{id:"section.tickets.title",defaultMessage:[{type:0,value:"Tickets"}]}),a()(r,s.bx.LOCATION,{id:"SectionLocation.Title",defaultMessage:[{type:0,value:"Location"}]}),a()(r,s.bx.CONTRIBUTE,{id:"Contribute",defaultMessage:[{type:0,value:"Contribute"}]}),a()(r,s.bx.CONTRIBUTIONS,{id:"Contributions",defaultMessage:[{type:0,value:"Contributions"}]}),a()(r,s.bx.EVENTS,{id:"Events",defaultMessage:[{type:0,value:"Events"}]}),a()(r,s.bx.PROJECTS,{id:"Projects",defaultMessage:[{type:0,value:"Projects"}]}),a()(r,s.bx.TRANSACTIONS,{id:"menu.transactions",defaultMessage:[{type:0,value:"Transactions"}]}),a()(r,s.bx.BUDGET,{id:"section.budget.title",defaultMessage:[{type:0,value:"Budget"}]}),a()(r,s.bx.FINANCIAL_OVERVIEW,{id:"section.financialOverview.title",defaultMessage:[{type:0,value:"Financial Overview"}]}),a()(r,s.bx.EXPENSES,{id:"Expenses",defaultMessage:[{type:0,value:"Expenses"}]}),a()(r,s.bx.CONTRIBUTORS,{id:"Contributors",defaultMessage:[{type:0,value:"Contributors"}]}),a()(r,s.bx.PARTICIPANTS,{id:"CollectivePage.NavBar.Participants",defaultMessage:[{type:0,value:"Participants"}]}),a()(r,s.bx.ABOUT,{id:"collective.about.title",defaultMessage:[{type:0,value:"About"}]}),r));n.Z=function(e,n){return l[n]?e.formatMessage(l[n]):n}},11831:function(e,n,t){t.d(n,{Bh:function(){return y},kD:function(){return v},wx:function(){return x},zr:function(){return h}});var r,i,a=t(7980),o=t.n(a),s=t(930),l=t.n(s);t(67294);var u=t(91850),c=t(44012),d=t(12494),p=t(71698),m=t(85893),f=(0,u.defineMessages)((r={ALL:{id:"AllExpenses",defaultMessage:[{type:0,value:"All expenses"}]}},l()(r,d.Z.INVOICE,{id:"Expense.Type.Invoice",defaultMessage:[{type:0,value:"Invoice"}]}),l()(r,d.Z.RECEIPT,{id:"ExpenseForm.ReceiptLabel",defaultMessage:[{type:0,value:"Reimbursement"}]}),l()(r,d.Z.GRANT,{id:"Expense.Type.FundingRequest",defaultMessage:[{type:0,value:"Grant"}]}),l()(r,d.Z.UNCLASSIFIED,{id:"Expense.Type.Unclassified",defaultMessage:[{type:0,value:"Unclassified"}]}),l()(r,d.Z.CHARGE,{id:"Expense.Type.Charge",defaultMessage:[{type:0,value:"Virtual Card Charge"}]}),l()(r,d.Z.SETTLEMENT,{id:"Expense.Type.Settlement",defaultMessage:[{type:0,value:"Settlement"}]}),r)),g=(0,u.defineMessages)((i={ALL:{id:"Expenses.AllShort",defaultMessage:[{type:0,value:"All"}]}},l()(i,p.g26.DRAFT,{id:"expense.draft",defaultMessage:[{type:0,value:"Draft"}]}),l()(i,p.g26.PENDING,{id:"expense.pending",defaultMessage:[{type:0,value:"Pending"}]}),l()(i,p.g26.APPROVED,{id:"expense.approved",defaultMessage:[{type:0,value:"Approved"}]}),l()(i,p.g26.REJECTED,{id:"expense.rejected",defaultMessage:[{type:0,value:"Rejected"}]}),l()(i,p.g26.PAID,{id:"expense.paid",defaultMessage:[{type:0,value:"Paid"}]}),l()(i,p.g26.PROCESSING,{id:"processing",defaultMessage:[{type:0,value:"Processing"}]}),l()(i,p.g26.ERROR,{id:"Error",defaultMessage:[{type:0,value:"Error"}]}),l()(i,p.g26.SCHEDULED_FOR_PAYMENT,{id:"expense.scheduledForPayment",defaultMessage:[{type:0,value:"Scheduled for payment"}]}),l()(i,p.g26.UNVERIFIED,{id:"Unverified",defaultMessage:[{type:0,value:"Unverified"}]}),l()(i,"READY_TO_PAY",{id:"expenses.ready",defaultMessage:[{type:0,value:"Ready to pay"}]}),l()(i,"COMPLETED",{id:"expense.completed",defaultMessage:[{type:0,value:"Completed"}]}),l()(i,"ON_HOLD",{id:"expense.onHold",defaultMessage:[{type:0,value:"On Hold"}]}),l()(i,"REFUNDED",{id:"Expense.Status.Refunded",defaultMessage:[{type:0,value:"Refunded"}]}),l()(i,p.g26.INCOMPLETE,{id:"kHwKVg",defaultMessage:[{type:0,value:"Incomplete"}]}),l()(i,p.g26.SPAM,{id:"LseLoM",defaultMessage:[{type:0,value:"Spam"}]}),l()(i,p.g26.CANCELED,{id:"expense.canceled",defaultMessage:[{type:0,value:"Canceled"}]}),i)),v=function(e,n,t){var r=f[n]?e.formatMessage(f[n]):n;return t&&(r="".concat(r," #").concat(t)),r},h=function(e,n){return g[n]?e.formatMessage(g[n]):n},y={week:(0,m.jsx)(c.Z,{id:"week",defaultMessage:[{type:0,value:"Weekly"}]}),month:(0,m.jsx)(c.Z,{id:"Frequency.Monthly",defaultMessage:[{type:0,value:"Monthly"}]}),quarter:(0,m.jsx)(c.Z,{id:"quarter",defaultMessage:[{type:0,value:"Quarterly"}]}),year:(0,m.jsx)(c.Z,{id:"Frequency.Yearly",defaultMessage:[{type:0,value:"Yearly"}]})},x=Object.keys(y).reduce(function(e,n){return[].concat(o()(e),[{value:n,label:y[n]}])},[])},91901:function(e,n,t){var r,i=t(930),a=t.n(i),o=t(91850),s=t(89853),l=(0,o.defineMessages)((r={ALL:{id:"orders.all",defaultMessage:[{type:0,value:"All"}]}},a()(r,s.D.CANCELLED,{id:"Subscriptions.Cancelled",defaultMessage:[{type:0,value:"Canceled"}]}),a()(r,s.D.DISPUTED,{id:"order.disputed",defaultMessage:[{type:0,value:"Disputed"}]}),a()(r,s.D.ERROR,{id:"Error",defaultMessage:[{type:0,value:"Error"}]}),a()(r,s.D.EXPIRED,{id:"order.expired",defaultMessage:[{type:0,value:"Expired"}]}),a()(r,s.D.IN_REVIEW,{id:"order.in_review",defaultMessage:[{type:0,value:"In Review"}]}),a()(r,s.D.PENDING,{id:"order.pending",defaultMessage:[{type:0,value:"Pending"}]}),a()(r,s.D.NEW,{id:"order.new",defaultMessage:[{type:0,value:"New"}]}),a()(r,s.D.REQUIRE_CLIENT_CONFIRMATION,{id:"order.require_client_confirmation",defaultMessage:[{type:0,value:"Require client confirmation"}]}),a()(r,s.D.ACTIVE,{id:"Subscriptions.Active",defaultMessage:[{type:0,value:"Active"}]}),a()(r,s.D.REFUNDED,{id:"Order.Status.Refunded",defaultMessage:[{type:0,value:"Refunded"}]}),a()(r,s.D.REJECTED,{id:"order.rejected",defaultMessage:[{type:0,value:"Rejected"}]}),a()(r,s.D.PAID,{id:"order.paid",defaultMessage:[{type:0,value:"Paid"}]}),a()(r,s.D.PROCESSING,{id:"processing",defaultMessage:[{type:0,value:"Processing"}]}),r));n.Z=function(e,n){var t=l[n];return t?e.formatMessage(t):n}},39644:function(e,n,t){t.d(n,{i:function(){return o}});var r=t(930),i=t.n(r),a=(0,t(91850).defineMessages)(i()({ALL:{id:"PaymentMethods.All",defaultMessage:[{type:0,value:"All"}]},ADAPTIVE:{id:"wFUChi",defaultMessage:[{type:0,value:"PayPal Adaptive"}]},GIFTCARD:{id:"GiftCard",defaultMessage:[{type:0,value:"Gift Card"}]},CREDITCARD:{id:"CreditCard",defaultMessage:[{type:0,value:"Credit Card"}]},PREPAID:{id:"Prepaid",defaultMessage:[{type:0,value:"Prepaid Card"}]},COLLECTIVE:{id:"OpenCollectiveBalance",defaultMessage:[{type:0,value:"Open Collective Balance"}]},HOST:{id:"Host",defaultMessage:[{type:0,value:"Fiscal Host (Added Funds)"}]},MANUAL:{id:"Manual",defaultMessage:[{type:0,value:"Manual (Bank Transfer)"}]},CRYPTO:{id:"Crypto",defaultMessage:[{type:0,value:"Crypto"}]},PAYMENT:{id:"Ed6cRE",defaultMessage:[{type:0,value:"PayPal payment"}]},SUBSCRIPTION:{id:"Clvp6T",defaultMessage:[{type:0,value:"PayPal subscription"}]},US_BANK_ACCOUNT:{id:"ACH Debit",defaultMessage:[{type:0,value:"ACH Debit"}]},SEPA_DEBIT:{id:"SEPADebit",defaultMessage:[{type:0,value:"SEPA Debit"}]},BACS_DEBIT:{id:"BacsDebit",defaultMessage:[{type:0,value:"Bacs Debit"}]},BANCONTACT:{id:"Stripe.PaymentMethod.Label.bancontact",defaultMessage:[{type:0,value:"Bancontact"}]}},null,{id:"PaymentMethods.None",defaultMessage:[{type:0,value:"No payment method"}]})),o=function(e,n){return a[n]?e.formatMessage(a[n]):n}},29582:function(e,n,t){var r,i=t(930),a=t.n(i),o=t(91850),s=t(73158),l=(0,o.defineMessages)((r={ALL:{id:"PayoutMethod.Type.All",defaultMessage:[{type:0,value:"All methods"}]}},a()(r,s.Nk.OTHER,{id:"PayoutMethod.Type.Other",defaultMessage:[{type:0,value:"Other"}]}),a()(r,s.Nk.BANK_ACCOUNT,{id:"PayoutMethod.Type.BankAccount",defaultMessage:[{type:0,value:"Bank transfer"}]}),a()(r,s.Nk.CREDIT_CARD,{id:"PayoutMethod.Type.VirtualCard",defaultMessage:[{type:0,value:"Virtual Card"}]}),r));n.Z=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.aliasBankAccountToTransferWise;if(!n)return e.formatMessage(l[s.Nk.OTHER]);if(n===s.Nk.PAYPAL)return"PayPal";if(n===s.Nk.BANK_ACCOUNT&&r)return"Wise";if(n===s.Nk.ACCOUNT_BALANCE)return"Open Collective";var i=l[n];return i?e.formatMessage(i):n}},28407:function(e,n,t){t.d(n,{H:function(){return l},m:function(){return s}});var r=t(91850),i=(0,r.defineMessages)({VAT:{id:"tax.vat",defaultMessage:[{type:0,value:"Value-added tax"}]},GST:{id:"tax.gst",defaultMessage:[{type:0,value:"Goods and services tax"}]}}),a=(0,r.defineMessages)({VAT:{id:"tax.vatShort",defaultMessage:[{type:0,value:"VAT"}]},GST:{id:"tax.gstShort",defaultMessage:[{type:0,value:"GST"}]}}),o=(0,r.defineMessages)({VAT:{id:"tax.vat.description",defaultMessage:[{type:0,value:"Use this tier type to conform with the legislation on VAT in Europe."}]},GST:{id:"tax.gst.description",defaultMessage:[{type:0,value:"Use this tier type to conform with the legislation on GST in New Zealand."}]}}),s=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"full",r=i[n],o=a[n];return r&&o?"full"===t?"".concat(e.formatMessage(r)," (").concat(e.formatMessage(o),")"):"long"===t?e.formatMessage(r):e.formatMessage(a[n]):n},l=function(e,n){return o[n]?e.formatMessage(o[n]):null}},71156:function(e,n,t){t.d(n,{Nx:function(){return m},pK:function(){return g},w$:function(){return f}});var r,i,a,o=t(930),s=t.n(o),l=t(91850),u=t(95905),c=(0,l.defineMessages)((r={ALL:{id:"AllTransactions",defaultMessage:[{type:0,value:"All transactions"}]}},s()(r,u.em.CREDIT,{id:"Transaction.Type.Credit",defaultMessage:[{type:0,value:"Credit"}]}),s()(r,u.em.DEBIT,{id:"Expense.Type.Debit",defaultMessage:[{type:0,value:"Debit"}]}),r)),d=(0,l.defineMessages)((i={ALL:{id:"SectionTransactions.All",defaultMessage:[{type:0,value:"All"}]}},s()(i,u.wz.ADDED_FUNDS,{id:"Transaction.kind.ADDED_FUNDS",defaultMessage:[{type:0,value:"Added funds"}]}),s()(i,u.wz.CONTRIBUTION,{id:"0LK5eg",defaultMessage:[{type:0,value:"Contribution"}]}),s()(i,u.wz.EXPENSE,{id:"Expense",defaultMessage:[{type:0,value:"Expense"}]}),s()(i,u.wz.HOST_FEE,{id:"HostFee",defaultMessage:[{type:0,value:"Host fee"}]}),s()(i,u.wz.HOST_FEE_SHARE,{id:"Transaction.kind.HOST_FEE_SHARE",defaultMessage:[{type:0,value:"Platform share"}]}),s()(i,u.wz.PAYMENT_PROCESSOR_COVER,{id:"Transaction.kind.PAYMENT_PROCESSOR_COVER",defaultMessage:[{type:0,value:"Payment processor cover"}]}),s()(i,u.wz.PAYMENT_PROCESSOR_FEE,{id:"contribution.paymentFee",defaultMessage:[{type:0,value:"Payment processor fee"}]}),s()(i,u.wz.PLATFORM_FEE,{id:"PlatformFee",defaultMessage:[{type:0,value:"Platform fee"}]}),s()(i,u.wz.PLATFORM_TIP,{id:"Transaction.kind.PLATFORM_TIP",defaultMessage:[{type:0,value:"Platform tip"}]}),s()(i,u.wz.PREPAID_PAYMENT_METHOD,{id:"Transaction.kind.PREPAID_PAYMENT_METHOD",defaultMessage:[{type:0,value:"Prepaid payment method"}]}),s()(i,u.wz.HOST_FEE_SHARE_DEBT,{id:"Transaction.kind.HOST_FEE_SHARE_DEBT",defaultMessage:[{type:0,value:"Platform share (Owed)"}]}),s()(i,u.wz.PLATFORM_TIP_DEBT,{id:"Transaction.kind.PLATFORM_TIP_DEBT",defaultMessage:[{type:0,value:"Platform tip (Owed)"}]}),s()(i,u.wz.BALANCE_TRANSFER,{id:"Transaction.kind.BALANCE_TRANSFER",defaultMessage:[{type:0,value:"Balance transfer"}]}),s()(i,u.wz.PAYMENT_PROCESSOR_DISPUTE_FEE,{id:"Transaction.kind.PAYMENT_PROCESSOR_DISPUTE_FEE",defaultMessage:[{type:0,value:"Payment processor dispute fee"}]}),s()(i,u.wz.TAX,{id:"AwzkSM",defaultMessage:[{type:0,value:"Tax"}]}),i)),p=(0,l.defineMessages)((a={},s()(a,u.e9.OWED,{id:"SettlementStatus.OWED",defaultMessage:[{type:0,value:"Owed"}]}),s()(a,u.e9.INVOICED,{id:"SettlementStatus.INVOICED",defaultMessage:[{type:0,value:"Invoiced"}]}),s()(a,u.e9.SETTLED,{id:"SettlementStatus.SETTLED",defaultMessage:[{type:0,value:"Settled"}]}),a)),m=function(e,n,t){var r=c[n]?e.formatMessage(c[n]):n;return t&&(r="".concat(r," #").concat(t)),r},f=function(e,n){return d[n]?e.formatMessage(d[n]):n},g=function(e,n){return p[n]?e.formatMessage(p[n]):n}},28770:function(e,n,t){t.d(n,{S:function(){return a},u:function(){return o}});var r=t(27361),i=t.n(r),a=function(e,n){var t=e&&(e.parent||e.parentCollective),r="policies.".concat(n),a=i()(t,r);return i()(e,r)||a},o=function(e){return!!a(e,"REQUIRE_2FA_FOR_ADMINS")}},56678:function(e,n,t){var r=t(45697),i=t.n(r);i().shape({value:i().number,valueInCents:i().number,currency:i().string,exchangeRate:i().shape({value:i().number,source:i().string,date:i().string,isApproximate:i().bool})})},96802:function(e,n,t){t.d(n,{US:function(){return I},rX:function(){return w}});var r,i=t(49376),a=t.n(i),o=t(59854),s=t.n(o),l=t(87794),u=t.n(l),c=t(67294),d=t(93162),p=t(91850),m=t(44012),f=t(51506),g=t(95905),v=t(28407),h=t(25482),y=t(74197),x=t(62934),b=t(32324),j=t(39743),C=t(13412),P=t(85893),O=(0,p.defineMessages)({hostFee:{id:"expense.hostFeeInCollectiveCurrency",defaultMessage:[{type:0,value:"host fee"}]},paymentProcessorFee:{id:"expense.paymentProcessorFeeInCollectiveCurrency",defaultMessage:[{type:0,value:"payment processor fee"}]},openCollectiveFee:{id:"transactions.openCollectiveFee",defaultMessage:[{type:0,value:"Open Collective fee"}]}}),A=function(e,n,t,r,i){if(!(null!=e&&e.valueInCents))return"";var a=e.valueInCents<0?" - ".concat((0,y.xG)(Math.abs(e.valueInCents),e.currency,{locale:i})):" + ".concat((0,y.xG)(Math.abs(e.valueInCents),e.currency,{locale:i}));if(r&&e.currency===(null==n?void 0:n.currency)){var o=Math.abs(s()(e.valueInCents/n.valueInCents*100,2));if(!0===r||r===o)return"".concat(a," (").concat(o,"% ").concat(t,")")}return"".concat(a," (").concat(t,")")},w=function(e){var n=e.amount,t=e.platformFee,r=e.hostFee,i=e.paymentProcessorFee,a=e.netAmount,o=e.taxAmount,l=e.taxInfo,u=e.isCredit,d=e.hasOrder,p=e.toAccount,h=e.fromAccount,x=e.intl,b=e.kind,j=e.expense,C=e.isRefund,w=e.paymentProcessorCover,S=!u&&a?a:n,T=(0,y.xG)(Math.abs(S.valueInCents),S.currency,{locale:x.locale}),I=j?(0,y.xG)(Math.abs(j.amount),j.currency,{locale:x.locale}):null,M=A(t,S,x.formatMessage(O.openCollectiveFee),u&&!d?h.platformFeePercent:p.platformFeePercent,x.locale),E=A(r,S,x.formatMessage(O.hostFee),u&&!d?h.hostFeePercent:p.hostFeePercent,x.locale),N=A(i,S,x.formatMessage(O.paymentProcessorFee),!1,x.locale);if(b===g.wz.EXPENSE){var Z=(0,y.xG)(Math.abs(i.valueInCents),i.currency,{locale:x.locale}),k=(0,y.xG)(Math.abs(a.valueInCents),a.currency,{locale:x.locale}),R=void 0!==w,D=R?(0,y.xG)(Math.abs(w.netAmount.valueInCents),w.netAmount.currency,{locale:x.locale}):null,F=p.name,q=h.name,_=(null==j?void 0:j.feesPayer)||"COLLECTIVE";return(0,P.jsxs)(c.Fragment,{children:[I&&(0,P.jsx)(f.Z,{mb:1,children:(0,P.jsx)(m.Z,{id:"4TSxft",defaultMessage:[{type:0,value:"Expense Amount: "},{type:1,value:"expenseAmount"}],values:{expenseAmount:I}})}),(0,P.jsx)(f.Z,{mb:1,children:0===i.valueInCents||C?(0,P.jsx)(m.Z,{id:"vwq8lO",defaultMessage:[{type:5,value:"isRefund",options:{true:{value:[{type:0,value:"Refunded"}]},other:{value:[]}}},{type:0,value:" Payment Processor Fee"},{type:5,value:"hasPaymentProcessorCover",options:{true:{value:[{type:0,value:" (covered by the Host)"}]},false:{value:[]},other:{value:[]}}},{type:0,value:": "},{type:1,value:"paymentProcessorFee"}],values:{isRefund:C,paymentProcessorFee:R?D:Z,hasPaymentProcessorCover:R}}):(0,P.jsx)(m.Z,{id:"Yp8Cek",defaultMessage:[{type:0,value:"Payment Processor Fee (paid by "},{type:1,value:"collective"},{type:0,value:"): "},{type:1,value:"expensePaymentProcessorFee"}],values:{collective:"PAYEE"===_?F:q,expensePaymentProcessorFee:Z}})}),o&&l&&(0,P.jsx)(m.Z,{id:"/66Po2",defaultMessage:[{type:0,value:"Includes "},{type:1,value:"rate"},{type:0,value:"% "},{type:1,value:"taxName"},{type:0,value:" ("},{type:1,value:"amount"},{type:0,value:")"}],values:{rate:s()(100*l.rate,2),taxName:(0,v.m)(x,l.type,"short"),amount:(0,y.xG)(o.valueInCents,o.currency,{locale:x.locale})}}),(0,P.jsx)(f.Z,{children:(0,P.jsx)(m.Z,{id:"6ZJG0I",defaultMessage:[{type:0,value:"Net Amount for "},{type:1,value:"collectiveName"},{type:0,value:": "},{type:1,value:"netExpenseAmount"}],values:{collectiveName:u?F:q,netExpenseAmount:k}})})]})}var L=[T,E,M,N];return o&&L.push(A(o,S,(null==l?void 0:l.id)||"Taxes",null==l?void 0:l.percentage,x.locale)),L.concat(" ")},S=function(e){var n=e.fromCollectiveSlug,t=e.toCollectiveSlug,r=e.transactionUuid,i=e.dateFrom,a=e.dateTo;return r?(0,C.U3)(r):(0,C.mR)(n,t,encodeURI(i),encodeURI(a),"pdf")},T=function(e){var n=e.fromCollectiveSlug,t=e.transactionUuid,r=e.toCollectiveSlug,i=e.dateFrom,a=e.dateTo,o=e.createdAt;if(t){var s=(0,x.fM)(o?new Date(o):new Date);return"".concat(r||"transaction","_").concat(s,"_").concat(t,".pdf")}var l=(0,x.fM)(i?new Date(i):new Date),u=(0,x.fM)(a?new Date(a):new Date);return"".concat(n,"_").concat(r,"_").concat(l,"_").concat(u,".pdf")},I=(r=a()(u().mark(function e(n){var t,r,i,a,o,s,l,c,p,m,f,g,v,y,x,P,O,A;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0===(r=n.fromCollectiveSlug)?void 0:r,o=void 0===(a=n.toCollectiveSlug)?void 0:a,l=void 0===(s=n.transactionUuid)?void 0:s,y=S({fromCollectiveSlug:i,toCollectiveSlug:o,transactionUuid:l,dateFrom:p=void 0===(c=n.dateFrom)?void 0:c,dateTo:f=void 0===(m=n.dateTo)?void 0:m,createdAt:v=void 0===(g=n.createdAt)?void 0:g}),x={format:"blob",allowExternal:C.Xj},(P=(0,j.fp)(j.dA.ACCESS_TOKEN))&&(x.headers={Authorization:"Bearer ".concat(P)}),e.prev=5,e.next=8,(0,h.U2)(y,x);case 8:O=e.sent,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),(0,b.Tr)(b.pn.NETWORK);case 14:if(!((null===(t=O)||void 0===t?void 0:t.type)!=="application/pdf")){e.next=16;break}throw(0,b.Tr)(b.pn.UNKNOWN);case 16:return A=T({fromCollectiveSlug:i,toCollectiveSlug:o,transactionUuid:l,dateFrom:p,dateTo:f,createdAt:v}),e.abrupt("return",(0,d.saveAs)(O,A));case 18:case"end":return e.stop()}},e,null,[[5,11]])})),function(e){return r.apply(this,arguments)});w.__docgenInfo={description:"",methods:[],displayName:"renderDetailsString"}},62929:function(e,n,t){t.d(n,{BR:function(){return p},hY:function(){return c},vb:function(){return d}});var r,i,a,o=t(930),s=t.n(o),l=t(91850),u=t(71698),c=(0,l.defineMessages)((r={},s()(r,u.nV4.ALL_TIME,{id:"virtualCard.intervalLimitDescription.all_time",defaultMessage:[{type:0,value:"Total amount that can be spent with this card."}]}),s()(r,u.nV4.DAILY,{id:"virtualCard.intervalLimitDescription.daily",defaultMessage:[{type:0,value:"Daily amount that can be spent with this card."}]}),s()(r,u.nV4.MONTHLY,{id:"virtualCard.intervalLimitDescription.monthly",defaultMessage:[{type:0,value:"Monthly amount that can be spent with this card."}]}),s()(r,u.nV4.PER_AUTHORIZATION,{id:"virtualCard.intervalLimitDescription.per_authorization",defaultMessage:[{type:0,value:"Amount that can be spent with this card per use."}]}),s()(r,u.nV4.WEEKLY,{id:"virtualCard.intervalLimitDescription.weekly",defaultMessage:[{type:0,value:"Weekly amount that can be spent with this card."}]}),s()(r,u.nV4.YEARLY,{id:"virtualCard.intervalLimitDescription.yearly",defaultMessage:[{type:0,value:"Yearly amount that can be spent with this card."}]}),r)),d=(0,l.defineMessages)((i={},s()(i,u.nV4.ALL_TIME,{id:"s+lPP3",defaultMessage:[{type:0,value:"All time"}]}),s()(i,u.nV4.DAILY,{id:"virtualCard.intervalLimit.daily",defaultMessage:[{type:0,value:"Daily"}]}),s()(i,u.nV4.MONTHLY,{id:"Frequency.Monthly",defaultMessage:[{type:0,value:"Monthly"}]}),s()(i,u.nV4.PER_AUTHORIZATION,{id:"virtualCard.intervalLimit.per_authorization",defaultMessage:[{type:0,value:"Per authorization"}]}),s()(i,u.nV4.WEEKLY,{id:"week",defaultMessage:[{type:0,value:"Weekly"}]}),s()(i,u.nV4.YEARLY,{id:"Frequency.Yearly",defaultMessage:[{type:0,value:"Yearly"}]}),i)),p=(0,l.defineMessages)((a={},s()(a,u.Vhv.ACTIVE,{id:"Subscriptions.Active",defaultMessage:[{type:0,value:"Active"}]}),s()(a,u.Vhv.INACTIVE,{id:"virtualCard.status.inactive",defaultMessage:[{type:0,value:"Inactive"}]}),s()(a,u.Vhv.CANCELED,{id:"virtualCard.status.canceled",defaultMessage:[{type:0,value:"Canceled"}]}),a))}}]);
//# sourceMappingURL=9465-d13650a1045eaa43.js.map