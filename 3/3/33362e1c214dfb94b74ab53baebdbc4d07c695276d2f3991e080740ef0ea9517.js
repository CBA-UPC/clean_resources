/*
 AngularJS v1.8.0
 (c) 2010-2020 Google, Inc. http://angularjs.org
 License: MIT
*/
((window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}'));
//# sourceMappingURL=angular.min.js.map

/*
 AngularJS v1.8.0
 (c) 2010-2020 Google, Inc. http://angularjs.org
 License: MIT
*/
((window,window.angular);
//# sourceMappingURL=angular-route.min.js.map

/*
 AngularJS v1.8.0
 (c) 2010-2020 Google, Inc. http://angularjs.org
 License: MIT
*/
((window,window.angular);
//# sourceMappingURL=angular-cookies.min.js.map

/*
 AngularJS v1.8.0
 (c) 2010-2020 Google, Inc. http://angularjs.org
 License: MIT
*/
((window,window.angular);
//# sourceMappingURL=angular-sanitize.min.js.map

var CBLib=angular.module("CBLib",[]),_GEO=null,_cb_config=null;function foul_word(e){is_foul=!1;try{var t=new RegExp(/http|chutiya|chutye|chuda|chut|shit|bhenchod|maderchod|f\*ck|fck|f\*\*k|fuk|anus|asholes|bastard|bitch|Blow Job|butthole|cock|cunt|dick|faggot|fuck|jerk-off|masterbate|nigger|orgasm|penis|pussy|semen|slut|vagina|whore|boob|madarchod|madarcod|behenchod|behencod|badwa|bhadwa|dalla|gandu|chutia|bhonsdike|bosdike|bhosdike|kutia|raand|rakhail|haram|saali|randi|lund|sex|butt|tits|porn|nude|nsfw|anal/i);is_foul=t.test(e.toLowerCase())}catch(e){}return is_foul}function cb_sanitize(e){return returnValue=null!=(returnValue=e)?e.toLowerCase().replace(/[^A-Za-z0-9 ]/g,"").replace(/[\s]/g,"-").replace(/-{2,}/g,"-"):returnValue}function query_value(e){var t={},a=window.location.href.split("?")[1];if(a){var n=a.split("&");for(i=0;i<n.length;i++){var o=n[i].split("=");t[o[0]]=o[1]}}return null==e?t:t[e]}function animate_height(e,t,a){e=document.querySelector(e);if(angular.element(e).addClass("ad-down-anim"),e.style.height=t+"px",null!=a&&"function"==typeof a)try{a()}catch(e){}}function _blank(e){var t=window.open();return t.opener=null,t.location=e,!1}function check_noopener(){angular.forEach(_eleAll("a"),function(e){"_blank"==e.target&&e.setAttribute("rel","noreferrer")})}CBLib.run(["$rootScope","GEO","cblog","Analytics","SiteConfig",function(e,t,a,n,o){e.$GEO=t,e.trackPageView=n.pageView,e.cblog=a,o.update_from_cookie()}]),CBLib.directive("cbmodals",["$document",function(e){return{restrict:"C",transclude:!1,scope:{modalid:"@modalid",selfonly:"@selfonly"},link:function(a,e,t){function n(){(el=document.getElementsByTagName("body")[0]).style.overflow="hidden"==el.style.overflow?null:"hidden"}var o=e.attr("modalid");e.bind("click",function(e,t){"true"==a.selfonly&&t.target!=t.currentTarget||((el=document.getElementById(o)).style.display="block"==el.style.display?"none":"block",n())}.bind(null,e[0]))}}}]),CBLib.controller("simpleclassFilters",["$scope","$timeout",function(n,o){n.filter_value={},n.filters_set={},n.filter_value.venue="",n.filter_value.team="",n.filter_value.match="",n.filters_set.venue=!1,n.filters_set.team=!1,n.filters_set.match=!1,n.filter_set=!1,n.hide_nav=!1,n.filters_type={set_venue_id:-1,set_team_id:-1,set_match_type_id:-1},n.set_filters=function(e,t,a){switch(n.filter_value[e]=a,n.filters_set[e]=!0,n.hide_nav=!0,n.filter_set=!0,e){case"venue":n.filters_type.set_venue_id=t;break;case"team":n.filters_type.set_team_id=t;break;case"match":n.filters_type.set_match_type_id=t}o(function(){n.hide_nav=!1},200)},n.remove_all_filters=function(){n.filters_set.venue=!1,n.filters_set.team=!1,n.filters_set.match=!1,n.filter_set=!1,n.filters_type.set_venue_id=-1,n.filters_type.set_team_id=-1,n.filters_type.set_match_type_id=-1},n.remove_filter=function(e){n.filters_set[e]=!1,(n.filters_type["set_"+e+"_id"]=-1)==n.filters_type.set_venue_id&&-1==n.filters_type.set_team_id&&-1==n.filters_type.set_match_type_id&&(n.filter_set=!1)},n.check_for_elems=function(){return n.show_empty=!1,0==document.getElementsByClassName("cb-series-matches").length&&(n.show_empty=!0),n.show_empty}}]),CBLib.controller("scheduleFilters",["$scope",function(e){e.filtered_category=0,e.filtered_team=0,e.is_data_in_arry=0,e.srs_category=[{id:0,title:"International",dom_id:"inter-tab"},{id:1,title:"Domestic & Others",dom_id:"domest-tab"},{id:2,title:"T20 Leagues",dom_id:"leag-tab"},{id:3,title:"Women",dom_id:"women-tab"},{id:9,title:"All Series",dom_id:"all-tab"}],e.full_schedule=[{id:0,title:"International",dom_id:"inter-tab"},{id:1,title:"Domestic & Others",dom_id:"domest-tab"},{id:2,title:"T20 Leagues",dom_id:"leag-tab"},{id:3,title:"Women",dom_id:"women-tab"},{id:9,title:"All Matches",dom_id:"all-tab"}]}]),CBLib.controller("rankingsFilters",["$scope",function(a){a.set_filters=]),CBLib.controller("countdown",["$scope","$timeout",function(t,a){t.start_time=0,t.time_diff=0,t.months=0,t.days=0,t.hours=0,t.minutes=0;function n(){function e(e){return(e<10&&0<e?"0":"")+e}a.cancel(o),t.time_diff<0?t.time_diff=0:(t.time_diff--,total_minutes=Math.floor(t.time_diff/60),total_hours=Math.floor(total_minutes/60),total_days=Math.floor(total_hours/24),t.seconds=e(t.time_diff%60),t.minutes=e(total_minutes%60),t.hours=e(total_hours%24),t.days=e(total_days),o=a(n,999))}var o=t.seconds=0;t.$watch("start_time",function(e){t.time_diff=t.start_time/1e3-parseInt((new Date).getTime()/1e3),n()})}]),CBLib.service("storage",["$cookies","$timeout",function(t,n){var o={},i=this;i.use_local_storage=!1,i.can_use_local_storage=function(){"undefined"!=typeof Storage&&(i.use_local_storage=!0)},i.set=function(e,t,a){i.can_use_local_storage(),t=angular.toJson(t),a&&(null!=a.use_local_storage&&(i.use_local_storage=a.use_local_storage),null!=a.expires)&&0<a.expires&&(i.use_local_storage=!1),i.use_local_storage?i.local_storage.set(e,t,a):i.cookie.set(e,t,a.expires)},i.get=function(t){i.can_use_local_storage();t=(i.use_local_storage&&i.local_storage.get(t)?i.local_storage:i.cookie).get(t);try{return angular.fromJson(t)}catch(e){return t}},i.remove=function(e){i.cookie.remove(e),i.local_storage.remove(e)},i.cookie=function(){},i.cookie.set=function(e,t,a,n,o){var t=escape(t),i="domain=.cricbuzz.com;",r="path=/;";return"production"!=ENVIRONMENT&&(i="domain="+top.location.host+";"),null!=n&&(i="domain="+n+";"),null!=o&&(r="path="+o+";"),null!=a&&((n=new Date).setTime(n.getTime()+1e3*a),t+=";"+r+i+" expires="+n.toUTCString()),document.cookie=e+"="+t,document.cookie},i.cookie.set_periodic=function(e,t,a){n.cancel(o[e]),null==a&&(a=0),i.cookie.set(e,t,a),null!=a&&3<a&&(o[e]=n(1e3*(a-2)))},i.cookie.get=function(e){return t.get(e)},i.cookie.remove=i.local_storage=function(){},i.local_storage.set=function(e,t,a){return a&&0==a.expires?sessionStorage[e]=t:localStorage[e]=t,!0},i.local_storage.get=i.local_storage.remove=]),CBLib.service("SiteConfig",["$http","$rootScope","$cookies","storage",function($http,$rootScope,$cookies,storage){_cb_config=this,_cb_config.v={},_cb_config.update=function(value){null!=value&&""!=value&&(_cb_config.v=eval("("+value+")"),null!=_cb_config.v)&&$rootScope.$broadcast("cb-config-set",_cb_config.v)},_cb_config.update_from_cookie=function(){null!=(cb_config=$cookies.get("cb_config"))&&""!=cb_config&&_cb_config.update(cb_config)},_cb_config.get=function(e){return _cb_config.v[e]},_cb_config.set=function(e,t){null!=e&&null!=t&&(_cb_config.v[e]=t,storage.cookie.set("cb_config",angular.toJson(_cb_config.v),432e3))},$rootScope.$watch(function(){return $cookies.get("cb_config")},function(e){null!=e?_cb_config.update(e):storage.cookie.set("cb_config","{}",432e3)})}]),CBLib.service("GEO",["$http","$rootScope","$cookies","storage",function(e,a,t,n){var o="cbzads";(_GEO=this).country="not_set",_GEO.continent="not_set",_GEO.region="not_set",_GEO.city="not_set",_GEO.ip="not_set",_GEO.country_full="not_set",_GEO.cookie_value=n.get(o),_GEO.get_geo_object=function(){if(null!=n.get(o))return geo_data=_GEO.make_object(n.get(o))},_GEO.make_object=function(e){e=(_GEO.cookie_value=e).split("|"),_GEO.country=angular.isUndefined(e[0])?"not_set":e[0].trim(),_GEO.broadcast()},_GEO.fetch=function(){var e=new Image;e.src="/geo-location/info",e.onload=function(){_GEO.get_geo_object()}},_GEO.matchBasedTargetings=function(){var e=[],t="";return"undefined"!=typeof matchState&&(t=_GEO.country+"-"+matchState,e.push(t)),"undefined"!=typeof seriesId&&(e.push(t+"-"+seriesId),e.push(_GEO.country+"-series-"+seriesId)),"undefined"!=typeof matchId&&(e.push(t+"-match-"+matchId),e.push(_GEO.country+"-match-"+matchId)),"undefined"!=typeof teama&&(e.push(t+"-team-"+teama),e.push(_GEO.country+"-team-"+teama)),"undefined"!=typeof teamb&&(e.push(t+"-team-"+teamb),e.push(_GEO.country+"-team-"+teamb)),e},_GEO.broadcast=function(){a.$broadcast("geo-changed",_GEO)},_GEO.isGeo=function(e){var t,a=!1,n=["PK","BD","ID","HK","NP"],o=["AE","OM","QA","SA","KW","BH"],i=["CY","GB","AT","BE","BG","HR","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"],r=["AL","AD","AM","AT","BY","BE","BA","BG","CH","CY","CZ","DE","DK","EE","ES","FO","FI","FR","GB","GE","GI","GR","HU","HR","IE","IS","IT","LI","LT","LU","LV","MC","MK","MT","NO","NL","PL","PT","RO","RU","SE","SI","SK","SM","TR","UA","VA"],s=_GEO.matchBasedTargetings();return angular.isDefined(e)&&(t=function(e){angular.forEach(e,function(e){e=e.split("|")[0];a="GCC"==e?a||0<=o.indexOf(_GEO.country):"EAA"==e?a||0<=i.indexOf(_GEO.country):"EU"==e?a||0<=r.indexOf(_GEO.country):"RO_SE_ASIA"==e?a||0<=n.indexOf(_GEO.country):0<=e.indexOf(_GEO.country+"-")?a||0<=s.indexOf(e):a||_GEO.country==e})},angular.isArray(e)?t(e):t([e])),a},_GEO.isGeolocation=function(e){var t=!1;return null!=e&&(angular.isUndefined(e.raw)||(t=t||_GEO.isGeo(e.raw)),angular.isUndefined(e.country)||(t=t||0<=e.country.indexOf(_GEO.country))),t},a.$watch(,null==_GEO.cookie_value?_GEO.fetch():_GEO.make_object(_GEO.cookie_value),a.$on("geo-changed",}]),CBLib.service("Analytics",["$rootScope","storage",function(e,t){(_Analytics=this).google={pageView:function(){"undefined"!=typeof _gaq&&_gaq&&_gaq.push(["_trackPageview"]),"undefined"!=typeof ga&&ga&&ga("send","pageview")},event:function(e,t,a){"undefined"!=typeof _gaq&&_gaq&&_gaq.push(["_trackEvent",e,t,a,null,!0]),"undefined"!=typeof ga&&ga&&ga("send","event",e,t,a)}},_Analytics.comscore={pageView:function(){"undefined"!=typeof COMSCORE&&COMSCORE&&COMSCORE.beacon({c1:"2",c2:"6036484",c4:top.location})}},_Analytics.pageView=function(){_Analytics.gtm.pageView("PageView","")},_Analytics.gtm={pageView:function(e,t){angular.isDefined(dataLayer)&&dataLayer&&dataLayer.push({EventLabel:t,event:e})},event:function(e,t,a){angular.isDefined(dataLayer)&&dataLayer&&dataLayer.push({EventAction:t,EventLabel:a,event:e})}}}]),CBLib.service("cblog",["$rootScope","$log","Analytics",function(e,a,n){(_cblog=this).log=function(e){"development"==ENVIRONMENT&&a.log(e)},_cblog.debug=function(e,t){"development"==ENVIRONMENT&&(t=null==t?PAGE_NAME+" : ":t+" : ","object"!=typeof e?a.debug(t+e):a.debug(e))},_cblog.exception=function(e,t){t=null==t?PAGE_NAME+" : ":t+" : ",text=angular.isUndefined(e.getMessage)?e:e.getMessage,a.error(t+text),"production"==ENVIRONMENT&&n.gtm.event("Exceptions",t,text)},_cblog.error=function(e,t){t=null==t?PAGE_NAME+" : ":t+" : ",a.error(t+e),"production"==ENVIRONMENT&&n.gtm.event("Exceptions",t,e)}}]),CBLib.directive("lazyLoading",[function(){function o(e,t){var a,n,o;(e.source||e.fullsource)&&(a=t[0].getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,t.attr("source")&&a.left<=n&&0<=a.right&&a.top<=o&&0<=a.bottom&&(t.attr("src",e.source),e.source=null,t.removeAttr("source"),t.attr("image-loaded","true"),t.removeClass("lazy-loading"),e.$destroy()),t.attr("fullsource"))&&0<=a.top&&a.bottom<=o&&0<=a.left&&a.right<=n&&(t.attr("src",e.fullsource),t.removeAttr("fullsource"),e.fullsource=null,t.attr("image-loaded","true"),t.removeClass("lazy-loading"),e.$destroy())}return{restrict:"C",transclude:!1,scope:{source:"@source",fullsource:"@fullsource"},link:function(e,t,a){var n=t.attr("image-loaded");angular.element(document).ready(function(){null!=n&&"true"==n||e.$evalAsync(function(){o(e,t)})}),angular.element(window).on("scroll",function(){null!=n&&"true"==n||e.$evalAsync(function(){o(e,t)})})}}}]),CBLib.factory("activeWindow",["$rootScope",function(i){return function(e){var o=this;o.selector=angular.isDefined(e)?e:"",o.ele=null,o.onEvents="scroll",o.activeHeight=200,o.setElement=function(){return""!=o.selector&&document.querySelector(o.selector)&&(o.ele=_ele(o.selector)),o.ele},o.setEvent=function(e){o.onEvents=e},o.setHeight=function(e){o.activeHeight=e},o.is_active=function(){var e=!1,t=o.ele.attr("active-state");return e=angular.isDefined(t)&&"true"==t?!0:e},o.mark_active=function(){o.ele.attr("active-state","true")},o.unmark_active=o.showElement=function(n){o.setElement(),null!=o.ele&&(angular.element(window).on(o.onEvents,function(){var e=o.ele[0].getBoundingClientRect(),t=window.innerWidth||document.documentElement.clientWidth,a=window.innerHeight||document.documentElement.clientHeight;if(e.top>=o.activeHeight&&e.bottom<=a+o.activeHeight&&0<=e.left&&e.right<=t&&!o.is_active()&&(o.ele.removeClass("active-window"),null!=n))try{o.mark_active(),n()}catch(e){i.cblog.exception(e,"Active Window")}}),i.$on("active-window-active",function(e,t){t==o.selector&&o.mark_active()}),i.$on("active-window-inactive",function(e,t){t==o.selector&&o.unmark_active()}))}}}]),CBLib.directive("ajaxPagination",["$http","$compile","$rootScope","Analytics",function(d,u,m,_){return{restrict:"C",transclude:!1,scope:{url:"@url",append:"@append",pageNo:"@pageNo",track:"@track",activeheight:"@activeheight"},link:function(l,c,e){angular.element(window).on("ready load scroll",function(){var t,a,e,n,o,i,r,s;null!=l.url&&null!=l.track&&(a=c,null!=(t=l).url)&&null!=t.track&&(e=_ele(t.track)[0].getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,i=300,null!=t.activeheight&&(i=t.activeheight),r=document.getElementById("spinner"),s=t.url,Math.abs(e.top)>=i)&&Math.abs(e.bottom)<=o+i&&0<=e.left&&e.right<=n&&(r&&(r.style.display=""),a.removeClass("ajax-pagination"),d({method:"GET",url:t.url,cache:!1,headers:{"Cache-Control":"no-cache"}}).then(function(e){u(_ele(t.append).append(e.data))(t),a.remove();e=document.getElementById("spinner");e&&(e.style.display="none"),_.gtm.pageView("InfiniteScrolling",s),m.reload_ads()}),t.url=null,t.$destroy())})}}}]),CBLib.directive("htmlRefresh",["$http","$compile","$rootScope","$timeout",function(e,o,t,i){function r(t,a,n){null!=t.url&&(i.cancel(t.htmlRefreshId),e({method:"GET",url:t.url,cache:!1,headers:{"Cache-Control":"no-cache","Accept-Language":"en-US,en;q=0.8"}}).then(function(e){a.html(e.data),o(a.contents())(t),null!=t.url&&null!=t.timeout&&5e3<t.timeout&&(t.htmlRefreshId=i(function(){r(t,a,n)},t.timeout))}))}return{restrict:"C",transclude:!1,scope:{url:"@url",timeout:"@timeout",marked:"@marked",htmlRefreshId:"@htmlRefreshId",disableFirstLoad:"@disableFirstLoad"},link:function(e,t,a){null!=e.url&&(void 0!==e.disableFirstLoad&&e.disableFirstLoad?e.htmlRefreshId=i(e.timeout):r(e,t,a))}}}]),CBLib.directive("clickTrack",["Analytics",function(n){return{restrict:"C",transclude:!1,scope:{trackaction:"@trackaction",tracklabel:"@tracklabel"},link:function(e,t,a){t.on("click",}}}]),CBLib.directive("stickyContainer",[function(){return{restrict:"C",transclude:!1,scope:{stickContent:"@stickContent",marker:"@marker",appendClass:"@appendClass"},link:function(n,o,e){angular.element(window).on("scroll",function(){var e,t,a;null!=n.marker&&(e=n,(t=o)[0].getBoundingClientRect(),_ele(e.marker))&&(a=document.querySelector(e.marker).getBoundingClientRect().top,ele=null!=e.stickContent&&_ele(e.stickContent)?_ele(e.stickContent):t[0],a<0?null!=e.appendClass&&ele.addClass(e.appendClass):null!=e.appendClass&&ele.removeClass(e.appendClass))})}}}]),CBLib.directive("cbGeoTarget",["GEO","$rootScope",function(GEO,$rootScope){return{restrict:"C",transclude:!1,scope:{raw:"@raw",country:"@country",continent:"@continent",region:"@region",city:"@city",geo:"@geo"},link:function(scope,element,attr){var geos={raw:[],country:[],continent:[],region:[],city:[]};null!=scope.geo&&angular.extend(geos,eval("("+scope.geo+")")),geos.raw=null!=scope.raw?geos.raw.concat(scope.raw.split(",")):geos.raw,geos.country=null!=scope.country?geos.country.concat(scope.country.split(",")):geos.country,geos.continent=null!=scope.continent?geos.continent.concat(scope.continent.split(",")):geos.continent,geos.region=null!=scope.region?geos.region.concat(scope.region.split(",")):geos.region,geos.city=null!=scope.city?geos.city.concat(scope.city.split(",")):geos.city,GEO.isGeolocation(geos)&&element.css({display:"block"})}}}]),CBLib.directive("cbGeoLink",["GEO","$rootScope",function(GEO,$rootScope){return{restrict:"C",transclude:!1,scope:{links:"@links"},link:function(scope,element,attr){null!=scope.links&&(links=eval("("+scope.links+")"),link=links[GEO.country]||links.default,null!=link)&&element.attr("href",link)}}}]),CBLib.directive("scorecardNumber",[function(){function n(e,t){t.html(""),numbers=(e.number+"").split(""),num_str="",angular.forEach(numbers,,t.html(num_str)}return{restrict:"C",transclude:!1,scope:{number:"@number"},link:function(e,t,a){n(e,t),e.$watch("number",function(){n(e,t)})}}}]),CBLib.directive("timeSince",[function(){return{restrict:"C",transclude:!1,scope:{since:"@since"},link:function(e,t,a){var e=parseInt((new Date).getTime()/1e3)-new Date(parseInt(e.since)).getTime(),n="yet to come";0<e&&(n=e/60<1?"just now":e/3600<1?Math.floor(e/60)+" min back":e/86400<1?Math.floor(e/3600)+" hour back":e/2592e3<1?"about "+Math.floor(e/86400)+" day back":e/31104e3<1?"about "+Math.floor(e/2592e3)+" month back":"about "+Math.floor(e/31104e3)+" year back"),t.html(n)}}}]),CBLib.directive("scheduleDate",["$filter",function(c){return{restrict:"C",transclude:!1,scope:{timestamp:"@timestamp",format:"@format",venue:"@venue"},link:function(e,t,a){var n,o="",i=-1*parseInt(60*(new Date).getTimezoneOffset()*1e3),r=new Date(parseInt(e.timestamp)),i=new Date(parseInt(e.timestamp)-i),s=i,l=0;venue_time_zone=0,angular.isUndefined(e.venue)||null!=(n=e.venue)&&null!=(n=n.split(":"))[0]&&null!=n[1]&&(l=60*Math.abs(parseInt(n[0]))+parseInt(n[1]),parseInt(n[0])<0&&(l*=-1),l=60*l*1e3*-1,s=new Date(parseInt(e.timestamp)-l)),angular.isUndefined(e.format)||(o+=c("date")(r,e.format),n=i.getDate()-r.getDate(),l=i.getDate()-s.getUTCDate(),0==n&&0==l||0<=e.format.indexOf("dd")||(o+=" ("+c("date")(r,"MMM dd")+")"),angular.forEach({"(GMT+0530)":"IST","(GMT+0500)":"PKT"},function(e,t){0<=o.indexOf(t)&&(o=o.replace(t,e))}),t.html(o))}}}]),CBLib.directive("toiBranding",["storage",function(l){return{restrict:"C",transclude:!1,link:function(e,t,a){var n=!1,o=l.cookie.get("referrer"),i=document.referrer,r=query_value("utm_source"),s="";t.html(""),null!=i&&""!=i&&0<=i.indexOf(".indiatimes.com")&&(n=!0),null==r||"toi"!=r&&"TOInewHP_TILwidget"!=r||(n=!0),(n=null!=o&&"toi"==o?!0:n)&&(i=document.querySelectorAll(".toi-referral"),angular.forEach(i,function(e){s+='<div class="toi-row cb-col cb-col-100"><div class="toi-logo"> <a alt="The Times of India" title="The Times of India" href="http://timesofindia.indiatimes.com/"> <img src="https://static.cricbuzz.com/images/toi-logo.png"> </a> </div><div class="toi-text toi-cricket-text text-bold pull-left" ><span>Cricket</span></div><div class="pull-right"><a alt="Cricbuzz" title="Cricbuzz" href="//www.cricbuzz.com/"><strong class="toi-text" style="padding-right: 12px;">Powered by:</strong><span class="cb-ico cb-small-hm-logo"></span></a></div></div>\t',t.html(s)}),l.cookie.set_periodic("referrer","toi",30))}}}]),CBLib.controller("FormController",["$scope","$http","Analytics",function(i,e,a){function o(e){var t,a;i.add_rm_cls("#Feedbackimg","show"),i.image_data=e.target.result,_ele("#Feedbackimg").attr("width")&&(_ele("#Feedbackimg").removeAttr("width"),_ele("#Feedbackimg").removeAttr("height")),1e3<(e=document.getElementById("Feedbackimg")).clientWidth||1e3<e.clientHeight?(t=e.clientWidth/8,a=window.clientHeight/8,document.getElementById("Feedbackimg").width=t,document.getElementById("Feedbackimg").height=a):(400<e.clientWidth&&e.clientWidth<1e3||400<e.clientHeight&&e.clientHeight<1e3)&&(t=e.clientWidth/6,a=e.clientHeight/6,document.getElementById("Feedbackimg").width=t,document.getElementById("Feedbackimg").height=a)}i.master={},i.form_params={},i.image_data="",i.show_loader=!1,i.verify_url="",i.user={},i.user.resume="",i.user.feedback_image="",i.add_rm_cls=function(e,t){e=_ele(e);"show"==t?e.hasClass("disp-none")?e.removeClass("disp-none"):e.addClass("disp-blck"):e.hasClass("disp-blck")?e.removeClass("disp-blck"):e.addClass("disp-none")},i.show_feedback_image=function(n){i.$apply(function(e){i.add_rm_cls("#error_form","hide"),i.add_rm_cls("#feedback_image_div","show");var t=_ele("#Imgupload").val().split(".").pop().toLowerCase(),a=document.getElementById("Imgupload").files[0].size;-1==["jpg","jpeg","png","gif"].indexOf(t)&&""!=t?(i.add_rm_cls("#error_form","show"),i.add_rm_cls("#image_invalid","show"),i.add_rm_cls("#Feedbackimg","show"),i.add_rm_cls("#image_size_err","hide")):2e5<a?(i.add_rm_cls("#image_invalid","hide"),i.add_rm_cls("#error_form","show"),i.add_rm_cls("#image_size_err","show")):(i.add_rm_cls("#image_size_err","hide"),_ele("#image_invalid").addClass("disp-none"),document.getElementById("Feedbackimg"),n.files&&n.files[0]&&((t=new FileReader).onload=o,t.readAsDataURL(n.files[0])))})},i.resume_verify=function(){""==_ele("#uResume").val()?i.add_rm_cls("#no_resume","show"):i.add_rm_cls("#no_resume","hide")},i.ajax_call=function(t){i.show_loader=!0,e.post(i.verify_url,i.form_params,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(e){e.data.success?(i.show_loader=!1,"career"!=t?a.gtm.event("ContactEvent",t,i.form_params.get("uSubject")):a.gtm.event("ContactEvent",t,i.form_params.get("uPosition")),i.add_rm_cls("#cb-css-form","hide"),i.add_rm_cls("#success_form","show"),i.add_rm_cls("#error_form","hide"),i.add_rm_cls("#catpcha_error_msg","hide")):(i.show_loader=!1,i.add_rm_cls("#success_form","hide"),i.add_rm_cls("#error_form","show"),i.add_rm_cls("#catpcha_error_msg","show"))})},i.create_form_data=function(e){i.master=angular.copy(e);var t,a,n,o=window.location.pathname;""==grecaptcha.getResponse()?(i.add_rm_cls("#error_form","show"),i.add_rm_cls("#catpcha_error_msg","show")):(i.add_rm_cls("#error_form","hide"),i.add_rm_cls("#catpcha_error_msg","hide"),angular.isUndefined(i.user)||angular.isUndefined(i.user.name)||angular.isUndefined(i.user.email)||0==i.user.name.length||0==i.user.email.length?i.add_rm_cls("#error_form","show"):(i.form_params=new FormData,i.form_params.append("uName",i.user.name),i.form_params.append("uEmail",i.user.email),i.form_params.append("recaptcha",grecaptcha.getResponse()),"/info/advertise/"==o||"/info/advertise"==o?(window.scrollTo(0,0),angular.isUndefined(i.user.company)||angular.isUndefined(i.user.city)||angular.isUndefined(i.user.subject)||angular.isUndefined(i.user.requirements)||0==i.user.company.length||0==i.user.city.length||0==i.user.subject.length||0==i.user.requirements.length?i.add_rm_cls("#error_form","show"):(i.master=angular.copy(e),i.form_params.append("uMNumber",i.user.mnumber),i.form_params.append("uCompany",i.user.company),i.form_params.append("uCity",i.user.city),i.form_params.append("uSubject",i.user.subject),i.form_params.append("uRequirements",i.user.requirements),i.verify_url="/info/advertisemailer",i.ajax_call("advertise"))):"/info/contact/"==o||"/info/contact"==o?(t=_ele("#Imgupload").val().split(".").pop().toLowerCase(),-1==(a=["jpg","jpeg","png","gif"]).indexOf(t)&&""!=t?(i.add_rm_cls("#error_form","show"),i.add_rm_cls("#image_invalid","show"),document.getElementById("Imgupload").files[0].size):angular.isUndefined(i.user.subject)||angular.isUndefined(i.user.message)||0==i.user.subject.length||0==i.user.message.length?i.add_rm_cls("#error_form","show"):""!=t&&2e5<n?(i.add_rm_cls("#error_form","show"),i.add_rm_cls("#image_invalid","hide"),i.add_rm_cls("#image_size_err","show")):(i.add_rm_cls("#image_size_err","hide"),i.add_rm_cls("#error_form","hide"),i.form_params.append("uSubject",i.user.subject),i.form_params.append("uMessage",i.user.message),i.form_params.append("uImgupload",document.getElementById("Imgupload").files[0]),i.form_params.append("uImage_ext",t),i.verify_url="/info/contactmailer",i.ajax_call("help"))):(t=_ele("#uResume").val().split(".").pop().toLowerCase(),a=["pdf","doc","docx"],i.add_rm_cls("#resume_size_err","hide"),-1==a.indexOf(t)&&""!=t?(i.add_rm_cls("#error_form","show"),i.add_rm_cls("#no_resume","hide"),i.add_rm_cls("#resume_invalid","show")):""==t?(i.add_rm_cls("#error_form","show"),i.add_rm_cls("#no_resume","show")):2e5<(n=document.getElementById("uResume").files[0].size)?(i.add_rm_cls("#error_form","show"),i.add_rm_cls("#resume_invalid","hide"),i.add_rm_cls("#resume_size_err","show")):(i.add_rm_cls("#resume_invalid","hide"),i.add_rm_cls("#no_resume","hide"),i.add_rm_cls("#resume_size_err","hide"),angular.isUndefined(i.user.cover)||i.user.cover.length<300||1e3<i.user.cover.length?i.add_rm_cls("#error_form","show"):(i.add_rm_cls("#error_form","hide"),i.master=angular.copy(e),i.form_params.append("uPosition",_ele("#cb_career_position").text()),i.form_params.append("uPositionType",i.user.position_type),i.form_params.append("uLink",i.user.link),i.form_params.append("uCover",i.user.cover),i.form_params.append("uResume",document.getElementById("uResume").files[0]),i.form_params.append("uResume_ext",t),i.verify_url="/info/careermailer",i.ajax_call("career"))))))}}]),CBLib.controller("FeedbackCtrl",["$scope","$cookies",function(e,a){e.show_feedback_menu=function(){var e=a.get("close_feedback"),t=document.getElementById("feedback-bar");angular.isDefined(e)&&"true"==e?t.style.display="none":t.style.display="block"},e.close_feedback=function(){animate_height("#feedback-bar",0),e.set_cookie(365),e.show_feedback_menu()},e.give_feedback=function(){e.set_cookie(365),_blank("https://www.surveymonkey.com/r/CricBuzzUserFeedback"),animate_height("#feedback-bar",0),e.show_feedback_menu()},e.set_cookie=function(e){var t=new Date;t.setDate(t.getDate()+e),a.put("close_feedback",!0,{expires:t,path:"/"})}}]),CBLib.filter("sanitize",[function(){return cb_sanitize}]),CBLib.filter("queryValue",[function(){return query_value}]),CBLib.filter("foulWord",[function(){return foul_word}]);var topBtn=document.getElementById("top-btn");function scrollFunction(){400<document.body.scrollTop||400<document.documentElement.scrollTop?(null===topBtn&&setTimeout(5e3),topBtn.style.display="flex"):topBtn.style.display="none"}unction sendCleverTapEvent(e,t){"undefined"!=typeof clevertap&&clevertap.event.push(e,t)}window.addEventListener("scroll",scrollFunction),topBtn.addEventListener("click",scrollTopFunction),CBQueueOnLoad.push(check_noopener);var CBUser=angular.module("CBUser",["CBLib"]),_auth,CBChat=(CBUser.value("sessionCookie","4540e8a09f9f266cdb70d72b8a11b8db"),CBUser.value("userCookie","_cb_usr"),CBUser.value("google_auth2",null),CBUser.value("user",{id:0,name:"Guest",account:""}),CBUser.run(["$rootScope",function(e){e.LOGIN=function(e){var t=_ele("#authPanel").scope();angular.isDefined(t)&&(null!=e&&(t.auth_app=e),t.auth.panel.show(),(el=document.getElementsByTagName("body")[0]).style.overflow="hidden")},e.LOGOUT=function(e){var t=_ele("#authPanel").scope();angular.isDefined(t)&&(null!=e&&(t.auth_app=e),t.auth.logout())}}]),CBUser.service("auth",["$http","$rootScope","user","storage",function(t,a,e,n){(_auth=this).auth_app="",_auth.message="",_auth.panel={show:function(){_auth.invokemodal("authPanel"),(el=document.getElementsByTagName("body")[0]).style.overflow="hidden"},hide:function(){_auth.invokemodal("authPanel"),(el=document.getElementsByTagName("body")[0]).style.overflow=null}},_auth.invokemodal=function(e){(el=document.getElementById(e)).style.display="block"==el.style.display?"none":"block"},_auth.login=function(e){try{_auth.message="",t(e).success(function(e){"success"==e.state?(null!=e.app&&_auth.panel.hide(),a.$broadcast("auth-login-success",e)):(e&&""!=e.message&&(_auth.message=e.message),a.$broadcast("auth-login-error",e))}).error(function(e){e&&e.message?_auth.message=e.message:_auth.message="sever error!!",a.$broadcast("auth-login-error",e)})}catch(e){_auth.message=e.message,a.$broadcast("auth-login-error",{state:"error",message:e.message})}},_auth.logout=function(){try{_auth.message="",t({method:"post",url:"/auth/logout",data:{auth_app:_auth.auth_app}}).success(function(e){"success"==e.state?a.$broadcast("auth-logout-success",e):(e&&e.message&&(_auth.message=e.message),a.$broadcast("auth-logout-error",e))}).error(function(e){e&&e.message?_auth.message=e.message:_auth.message="sever error!!",a.$broadcast("auth-logout-error",e)})}catch(e){_auth.message=e.message,a.$broadcast("auth-logout-error",{state:"error",message:e.message})}},_auth.facebook={load_script:function(){var e=document,t="facebook-jssdk",a=e.getElementsByTagName("script")[0];e.getElementById(t)||((e=e.createElement("script")).id=t,e.async=!0,e.defer=!0,e.src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v3.0&appId=30119633160",a.parentNode.insertBefore(e,a),setTimeout(_auth.facebook.init,500))},init:function(){"undefined"!=typeof FB&&FB.init({appId:"30119633160",status:!0,version:"v3.0",xfbml:!0})},login:function(){"undefined"!=typeof FB?FB.login(function(e){e.authResponse&&_auth.login({method:"post",url:"/auth/facebook/login",data:{auth_app:_auth.auth_app,access_token:e.authResponse.accessToken}})},{scope:"email"}):setTimeout(_auth.facebook.login,500)},btnClickEvent:function(e){_ele(e).on("click",function(){_ele("#authPanel").scope().show_loader=!0,_auth.facebook.login()})}},_auth.google={google_auth2:null,load_script:function(){var e=document.createElement("script"),t=(e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/client:platform.js",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t),_auth.google.init()},init:function(){"undefined"!=typeof gapi?gapi.load("auth2",function(){_auth.google.google_auth2=gapi.auth2.init({client_id:"125255339112-d594jen12o0j854sufu8jfn2gbbnaskj.apps.googleusercontent.com",cookiepolicy:"single_host_origin"})}):setTimeout(_auth.google.init,500)},login:function(){void 0!==_auth.google.google_auth2&&null!=_auth.google.google_auth2?_auth.google.google_auth2.grantOfflineAccess({redirect_uri:"postmessage"}).then(function(e){_auth.login({method:"post",url:"/auth/google/login",data:{auth_app:_auth.auth_app,code:e.code}})}):setTimeout(_auth.google.login,500)},btnClickEvent:function(e){_ele(e).on("click",function(){_ele("#authPanel").scope().show_loader=!0,_auth.google.login()})}},_auth.cb={init:function(){},login:}]),CBUser.controller("authPanel",["$scope","$rootScope","auth",function(a,t,e){a.show_loader=!1,a.auth=e,a.auth_app="chat",a.error_message="",a.facebook_btn="#authPanel_FB_btn",a.google_btn="#authPanel_google_btn",a.init=function(){a.show_loader=!1,a.error_message=""},a.before_login=a.on_success_login=function(e){a.init(),t.$broadcast("auth-login-"+a.auth_app,e)},a.on_error_login=function(e){a.show_loader=!1},a.on_click_events=function(){_ele(a.facebook_btn).on("click",function(){a.before_login(),a.auth.facebook.load_script(),setTimeout(function(){a.auth.facebook.login()},1e3)}),_ele(a.google_btn).on("click",function(){a.before_login(),a.auth.google.load_script(),setTimeout(function(){a.auth.google.login()},1e3)})},t.$on("auth-login-success",function(e,t){a.error_message=a.auth.message,a.on_success_login(t)}),t.$on("auth-login-error",function(e,t){a.error_message=a.auth.message,a.on_error_login(t)}),a.auth.auth_app=a.auth_app,a.on_click_events()}]),CBUser.controller("LoginFormController",["$scope","$http","Analytics","storage","$rootScope",function(n,o,e,a,t){n.show_loader=!1,n.user={},n.termIdSelected=3,n.start_timer=!1,n.countdown_start_time=0,n.auth_apis={login:"/cbplus/auth/user/login",verify_otp:"/cbplus/auth/user/verify-otp",verify_token:"/cbplus/auth/user/verify-token",google_login:"/cbplus/auth/user/google-sign-in",logout:"/cbplus/auth/user/logout"},n.redirection_url={plan_detail_promo:"/premium-subscription/user/select-plan/cricbuzz-promo",account_info:"/premium-subscription/user/account-info",login_page:"/premium-subscription/user/login",cb_plus_home:"/cb-plus/premium-content/home"},n.subscription_apis={payment:"/cbplus/payment/user/pymnt",update_user:"/cbplus/auth/user/update/profile",cancel_subscription:"cbplus/payment/user/subscription/cancel",support_request:"/info/user/support",term_plan_detail:"/cbplus/premium/plan-term-detail",coupon_code_detail:"/cbplus/premium/coupon-code-detail"},n.get_email_otp=function(){var e=document.getElementById("cb-user-mail").value;e&&e.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+/)&&0<e.length?(n.cb_plus_login(e.toLowerCase()),document.getElementById("error_form_email").style.display="none",document.getElementById("cb-signup-block").style.display="none",document.getElementById("cb-enter-otp-block").style.display="block",document.getElementById("mobile-otp-value").innerHTML=document.getElementById("cb-user-mail").value):document.getElementById("error_form_email").style.display="block"},n.get_input_otp=function(e){var t=e.currentTarget.nextElementSibling,a=e.currentTarget.previousElementSibling,a=(8===e.keyCode||37===e.keyCode?a&&a.focus():(48<=e.keyCode&&e.keyCode<=57||65<=e.keyCode&&e.keyCode<=90||96<=e.keyCode&&e.keyCode<=105||39===e.keyCode)&&t&&t.focus(),n.get_final_user_otp());6==a.length&&null!=a?(document.getElementById("cb-otp-btn").removeAttribute("disabled"),document.getElementById("cb-otp-btn").classList.remove("cb-disabled-button")):(document.getElementById("cb-otp-btn").setAttribute("disabled","disabled"),document.getElementById("cb-otp-btn").classList.add("cb-disabled-button"))},n.get_final_user_otp=function(){var e=document.getElementById("digit-1").value,t=document.getElementById("digit-2").value,a=document.getElementById("digit-3").value,n=document.getElementById("digit-4").value,o=document.getElementById("digit-5").value,i=document.getElementById("digit-6").value;return e.toString()+t.toString()+a.toString()+n.toString()+o.toString()+i.toString()},n.clear_entered_otp_elem=function(){for(i=1;i<=6;i++)document.getElementById("digit-"+i).value=""},n.login_form_otp=function(){var e=n.get_final_user_otp();0<e.length&&6==e.length&&null!=e&&!isNaN(e)?(document.getElementById("error_form_otp").style.display="none",document.getElementById("cb-otp-btn").setAttribute("disabled","disabled"),document.getElementById("cb-otp-btn").classList.add("cb-disabled-button"),document.getElementById("cb-otp-btn").innerHTML="Loading ...",n.verify_entered_otp(e)):document.getElementById("error_form_otp").style.display="block"},n.times_up=function(){n.show_timer=!1,document.getElementById("cb-otp-btn").setAttribute("disabled","disabled"),document.getElementById("cb-otp-btn").classList.add("cb-disabled-button")},n.cb_plus_login=function(e){n.show_timer=!0;var t=new Date;n.countdown_start_time=1e3*(Math.floor(t.getTime()/1e3)+120),localStorage.setItem("username",e),localStorage.setItem("provider","Email"),o({method:"post",url:n.auth_apis.login,data:{username:e,provider:"Email"}})},n.resend_otp=function(){var e=a.cookie.get("username");void 0!==e?(n.clear_entered_otp_elem(),n.cb_plus_login(e),document.getElementById("login-verify-error").style.display="none"):window.location.replace(n.redirection_url.login_page)},n.verify_entered_otp=function(e){o({method:"post",url:n.auth_apis.verify_otp,data:{otp:e}}).then(function(e){angular.isDefined(e.data.exception)?(document.getElementById("cb-otp-btn").innerHTML="SUBMIT",document.getElementById("login-verify-error").innerHTML=e.data.message,document.getElementById("login-verify-error").style.display="block",angular.isDefined(e.data.errorCode)&&"14011"==e.data.errorCode&&n.times_up()):n.verify_access_token()})},n.verify_access_token=function(){o({method:"get",url:n.auth_apis.verify_token}).then(function(e){angular.isDefined(e.data.user.state)?n.redirect_after_verify(e.data.user.state):window.location.replace("/")})},n.redirect_after_verify=function(e){switch(e){case"NA":case"CANCELLED":var t=a.cookie.get("login_to_payment");void 0!==t&&t?n.user_payment_gateway():window.location.replace(n.redirection_url.plan_detail_promo);break;case"ACTIVE":t=a.cookie.get("content_url");void 0!==t&&t?window.location.replace(t):window.location.replace(n.redirection_url.account_info);break;default:window.location.replace("/")}},n.sign_out_user=function(t){o({method:"get",url:n.auth_apis.logout}).then(function(e){200==e.status&&(1==t?window.location.replace("/"):window.location.reload(),n.show_logout_msg())})},n.show_logout_msg=function(){var e=document.getElementById("cb-plus-logout-msg");e.innerHTML="You have been logged out",e.style.cssText="height: 32px; color: #fff; position: fixed; bottom: 5px; background: #028062; width: 250px; right: 10px; text-align: center; line-height: 32px; border-radius: 6px; opacity: 0.75; display:block",setTimeout(function(){e.style.display="none"},5e3)},n.select_support_type=function(e){document.getElementById("cbz-subject").value="Support request on "+e,"Others"==e&&(document.getElementById("cbz-subject").value=e),document.getElementById("support-topics").style.display="none",document.getElementById("support-topic-form").style.display="block"},n.select_subscription=function(e){subscribePlanOptionId="cbz-"+e,subscribePlanOption=document.getElementById(subscribePlanOptionId),refundPolicyAccept=document.getElementById("cb-privacy"),subscribePlanOption.checked&&refundPolicyAccept.checked?(n.termIdSelected=e,document.getElementById("subscription-selected-button").disabled=!1,document.getElementById("subscription-selected-button").classList.remove("cb-disabled-button")):document.getElementById("subscription-selected-button").disabled=!0},n.user_payment_gateway=function(){var e=a.cookie.get("term_id_selected");void 0!==e&&(n.termIdSelected=e),o({method:"post",url:n.subscription_apis.payment,data:{plan:{id:1,termId:n.termIdSelected}}}).then(function(e){200==e.status&&angular.isDefined(e.data.url)&&window.location.replace(e.data.url)})},n.update_user_info=function(){var e=document.getElementById("cbz-uname").value;!!e.match("^[a-zA-Z0-9]*$")?o({method:"post",url:n.subscription_apis.update_user,data:{user:{name:e}}}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||(document.getElementById("cb-update-message").innerHTML="<span>Profile Updated</span>",document.getElementById("cb-update-message").style.display="block")}):(document.getElementById("cb-update-message").innerHTML="<span>Invalid Username</span>",document.getElementById("cb-update-message").style.display="block")},n.cancel_subscription=function(){var e=document.getElementById("reason-other-text").value;"Other"==n.cancel_reason&&0<e.length&&(n.cancel_reason="Other: "+document.getElementById("reason-other-text").value),o({method:"post",url:n.subscription_apis.cancel_subscription,data:{reason:n.cancel_reason}}).then(function(e){200==e.status&&angular.isDefined(e.data.status)&&"success"==e.data.status&&window.location.replace("/premium-subscription/cricbuzz-user/cancel-subscription-success")})},n.cb_plus_onload_checks=function(){var e=a.cookie.get("uState");void 0!==e?"ACTIVE"==e&&(document.getElementById("cb-logo-main-menu").src="https://static.cricbuzz.com/images/cb_logo_plus.svg"):document.getElementById("cb-plus-dropdown").style.display="none"},n.submit_support_request=function(){var e=document.getElementById("cbz-uemail").value,t=document.getElementById("cbz-subject").value,a=document.getElementById("cbz-issue-describe").value;null!=e&&t&&a?o({method:"post",url:n.subscription_apis.support_request,data:{name:e,emailId:e,subject:t,feedback:a}}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||"Accepted"!=e.data.status?(document.getElementById("cb-support-request").style.display="block",document.getElementById("cb-support-request").innerHTML="<span style='color: #d0021b;'>There was an issue submitting the feedback. Please try again.</span>"):(document.getElementById("support-topic-form").style.display="none",document.getElementById("cb-support-request").style.display="block",document.getElementById("cb-support-request").innerHTML="<span>Your feedback is valuable to us. Thank you for sharing.</span>")}):document.getElementById("cb-valid-support-request").style.display="block"},n.get_plan_details=function(e,t){o({method:"GET",url:n.subscription_apis.term_plan_detail+"/"+e+"/"+t}).then(function(e){var t;200==e.status&&"undefined"!=e.data?((t=document.getElementById("term-plan-modal")).style.visibility="visible",t.style.opacity="1","undefined"!=(t=e.data)&&((e=document.getElementById("term-plan-header")).src=t.imageUrl,e.alt=t.header,e.title=t.header,document.getElementById("term-plan-detail").innerHTML=t.contentHtml)):window.location.replace(n.redirection_url.login_page)})},n.get_coupon_code_detail=function(e){o({method:"GET",url:n.subscription_apis.coupon_code_detail+"/"+e}).then(function(e){var t;200==e.status&&"undefined"!=e.data?(e=e.data,(t=document.getElementById("term-plan-modal")).style.visibility="visible",t.style.opacity="1","undefined"!=e&&(document.getElementById("term-plan-header").src=e.imageUrl,document.getElementById("cb-coupon-code").innerHTML=e.coupon_code,document.getElementById("cb-coupon-expire-date").innerHTML="Valid till "+e.expireDate,document.getElementById("term-plan-detail").innerHTML=e.content.body_html,(t=document.createElement("a")).setAttribute("href",e.content.footer.link),t.setAttribute("target","_blank"),t.setAttribute("id","cb-reddem-btn"),t.innerText=e.content.footer.text,t.classList.add("btn","cb-more-btn"),document.getElementById("cb-redeem-coupon-btn").appendChild(t))):window.location.replace(n.redirection_url.login_page)})},n.copy_to_clipboard=function(e){e=document.getElementById(e).innerHTML;navigator.clipboard.writeText(e),navigator.clipboard&&(document.getElementById("coupon-code-copy-text").style.display="inline-block",setTimeout(function(){document.getElementById("coupon-code-copy-text").style.display="none"},3e3))},n.onload=function(){n.cb_plus_onload_checks()},n.$evalAsync(function(){n.onload()})}]),angular.module("CBChat",["CBUser","CBLib"])),CBMatches=(CBChat.value("chatUser",{nickname:"Guest",role_id:1}),CBChat.controller("ChatController",["$scope","$http","$rootScope","$cookies","$timeout","Analytics",function($scope,$http,$rootScope,$cookies,$timeout,Analytics){$scope.toggle_height=!1,$scope.messages=[],$scope.notification="",$scope.user={id:0,nickname:"Guest",role:1},$scope.mod_params={action:"",hm:!1},$scope.chat_message="",$scope.chat_search="",$scope.last_chat_message="",$scope.state_settings={h:!1},$scope.toggle_module=function(){$scope.toggle_height=!$scope.toggle_height,$scope.state_settings.h=$scope.toggle_height,_cb_config.set("ch",$scope.state_settings)},$scope.show_reply_filter=function(e,t){"show"==t?(_ele("#user-reply-"+e).removeClass("disp-none").addClass("user-options-open"),_ele("#user-filter-"+e).removeClass("disp-none").addClass("user-options-open")):(_ele("#user-reply-"+e).removeClass("user-options-open").addClass("disp-none"),_ele("#user-filter-"+e).removeClass("user-options-open").addClass("disp-none"))},$scope.reply=function(e){_ele("#chat_message").val("@"+e.u.n+": "),document.getElementById("chat_message").focus(),Analytics.gtm.event("ChatEvent","reply",e.u.n)},$scope.user_mod_options=function(e){2<$scope.user.role&&$scope.user.id!=e.u.i&&_ele("#moderation-options-"+e.i).toggleClass("open")},$scope.moderate_user=function(e,t){var a=null;(2<$scope.user.role&&null!=e&&e.u.r<3&&""!=t||null==e&&"p"==t)&&($scope.mod_params.action=t,a={message:e,mod_params:$scope.mod_params,user:$scope.user}),null!=a&&$http({method:"POST",url:"/cric-chat/mod-action",data:a}).success(function(e){$scope.mod_params={action:"",hm:!1},e&&angular.isDefined(e.message)?$scope.notification=e.message:$scope.notification="",$scope.refresh()}).error(function(){$scope.notification="Error posting to server",$scope.mod_params={action:"",hm:!1}})},$scope.refresh=function(){$scope.toggle_height&&$scope.get_message()},$scope.validate_message=function(){$scope.notification="";var e,t=$scope.chat_message.length;return $scope.user.role<2?!($scope.notification="Please Login.."):t<2||"  "==$scope.chat_message?!($scope.notification="Please post more than one characters"):cb_sanitize($scope.chat_message)==cb_sanitize($scope.last_chat_message)?!($scope.notification="Your post is exactly the same as your previous post!"):(e=$scope.chat_message.replace(RegExp("[^\0-]","g"),""),500<t?!($scope.notification="Do not exceed more than 500 characters"):e.length!=t?!($scope.notification="Invalid character used!"):foul_word(e)?!($scope.notification="Inappropriate content used!"):(e=(e=e.replace(RegExp("(\\S{15})(\\S)","g"),).replace(RegExp("[A-Z ]{15,}","g"),,$scope.chat_message=e,!0))},$scope.post_message=function(e){var t;return $scope.validate_message()&&(t={chat_message:$scope.chat_message,user:$scope.user},$scope.last_chat_message=$scope.chat_message,$http({method:"POST",url:"/cric-chat/add",data:t}).then(function(e){e=e.data;$scope.chat_message="",e&&angular.isDefined(e.message)?$scope.notification=e.message:$scope.notification="",Analytics.google.event("Logging","Chat","Message Posted"),$scope.refresh()},),!1};var chat_refresh_id=0;$scope.get_message=function(){$timeout.cancel(chat_refresh_id);var e="/cric-chat/list";2<$scope.user.role&&(e="/cric-chat/auth-list"),$http({url:e}).then(,$scope.toggle_height&&(chat_refresh_id=$timeout(function(){$scope.get_message()},25e3))},$scope.set_user=function(u){var user=eval("("+u+")");$scope.user={id:user.id,nickname:user.nickname,role:parseInt(user.role)}},$scope.reset_user=$scope.update_settings=function(){var e=_cb_config.get("ch");null!=e&&($scope.state_settings=e,$scope.toggle_height=$scope.state_settings.h)},$scope.$watch("toggle_height",,$rootScope.$watch(function(e){null!=e?$scope.set_user(e):$scope.reset_user()}),$rootScope.$on("cb-config-set",}]),CBChat.controller("chatNickname",["$scope","$http","$rootScope","auth",function(a,e,n,o){a.hide_save=!0,a.response={state:"error",messsage:""},a.login_response={state:"error",messsage:""},a.nickname="",a.username="",a.password="",a.app="",a.init=function(){a.set_error(""),a.nickname="",a.username="",a.password="",a.hide_save=!0},a.panel=function(e){a.init(),"show"!=e&&"hide"!=e||o.invokemodal("chatNickname")},a.set_error=function(e,t){1==t?(a.login_response.state="error",a.login_response.message=e):(a.response.state="error",a.response.message=e),o.message="",_ele("#authPanel").scope().error_message=""},a.set_success=function(e,t){1==t?(a.login_response.state="success",a.login_response.message=e):(a.response.state="success",a.response.message=e),o.message="",_ele("#authPanel").scope().error_message=""},a.validate_nickname=function(){var e=!0;a.hide_save=!0;return(!/^(?=.*[A-Za-z])[A-Za-z.\-_\d]{4,20}$/.test(a.nickname)||0<=a.nickname.indexOf(" "))&&(a.set_error("Please use alpha numeric combination for nickname"),e=!1),(20<a.nickname.length||a.nickname.length<4)&&(a.set_error("Nickname must be between 4 to 20 in length"),e=!1),foul_word(a.nickname)&&(a.set_error("Inappropriate word used!"),e=!1),e},a.validate_user=function(e){var t=!0;return/^[a-zA-Z0-9.\-_$@!]{4,20}$/.test(a.username)||(a.set_error("Please enter valid username",e),t=!1),a.password.length<2&&(a.set_error("Please enter valid password",e),t=!1),t},a.check_nickname=function(){return a.validate_nickname()&&(a.set_error(""),e({url:"/cric-chat/check-nickname/"+a.nickname}).success(function(e){"error"==e.state?a.set_error(e.message):"success"==e.state&&(a.hide_save=!1,a.set_success(e.message))}).error(function(e){a.set_error("Error connecting to server")})),!1},a.save_nickname=function(){return a.validate_nickname()&&e({url:"/cric-chat/save-nickname/"+a.nickname}).success(function(e){"error"==e.state?a.set_error(e.message):"success"==e.state&&(a.hide_save=!1,a.panel("hide"),o.panel.hide())}).error(function(e){a.set_error("Error connecting to server")}),!1},a.verify_old_user=function(){return a.validate_user(!0)&&(a.set_error("",!0),o.login({method:"post",url:"/auth/cb/login",data:{username:a.username,password:a.password}}),n.$on("auth-login-success",function(e,t){t&&(a.set_success(t.message,!0),a.panel("hide"),o.panel.hide())}),n.$on("auth-login-error",function(e,t){t?a.set_error(t.message,!0):a.set_error("Server Error!!",!0)})),!1},a.close_modal=function(){o.invokemodal("chatNickname")},n.$on("auth-login-chat",function(e,t){a.app=t.app,null==t.app&&(n.LOGIN("chat"),a.panel("show"),o.panel.hide())})}]),angular.module("CBMatches",[])),CBCommentary=(CBMatches.controller("HTMLSCAG",["$scope","$http","$timeout","$sce",function(t,e,a,n){t.api_url="/cricket-series/api/html/scag/",t.call_api="",t.target="#scag_content",t.seriesId=0,t.teamId=0,t.active_scag_tab="live",t.refresh_time=20,t.ajaxData="";var o=0;t.tab_info={live:{match_count:0},upcoming:{match_count:0},results:{match_count:0}};t.fetch_data=function(){a.cancel(o),""!=t.call_api&&e({url:t.call_api,cache:!1,async:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}).then(,o=a(function(){t.fetch_data()},1e3*t.refresh_time)},t.$watch("seriesId",function(e){0<t.seriesId&&(t.call_api=t.api_url+t.seriesId,0<t.teamId)&&(t.call_api=t.api_url+t.seriesId+"/"+t.teamId)}),t.$watch("tab_info",function(e){0==t.tab_info.live.match_count?t.active_scag_tab="upcoming":0==t.tab_info.upcoming.match_count?t.active_scag_tab="results":t.active_scag_tab="live"}),o=a(function(){t.fetch_data()},1e3*t.refresh_time)}]),CBMatches.controller("MatchMenu",["$scope","SCAG",function(l,e){l.api_url="/api/match/current",l.matches=[],l.featured=[],l.international=[],l.league=[],l.domestic=[],l.series_list=[],l.show_all_matches=!1,l.show_international=!1,l.match_per_frame=5,l.refresh_time=50,l.filters=[];<=["commentary-page","scorecard-page"].indexOf(PAGE_NAME)?CBQueueOnLoad.push(function(){l.$evalAsync(function(){angular.extend(l,new e(l))})}):l.$evalAsync(function(){angular.extend(l,new e(l))}),l.update_data=function(){l.featured=[],l.international=[],l.league=[],l.domestic=[],l.series_list=[];var o={},i={},r=!1,s=!1;angular.forEach(l.matches,function(e){var t,a,n;"recent"!=e.state&&(t=c(new Date),a=c(e.start_time),n=c(e.end_time),e.istoday=!1,a<=t&&t<=n&&(e.istoday=!0),e.series.is_domestic()&&(s=!0,void 0===o[e.series.id]&&(o[e.series.id]={url:e.series.get_series_url(),id:e.series.id,title:e.series.name,short_title:e.series.short_name,matches:[]}),o[e.series.id].matches.push(e)),"League"==e.series.category&&(r=!0,void 0===i[e.series.id]&&(i[e.series.id]={url:e.series.get_series_url(),id:e.series.id,title:e.series.name,short_title:e.series.short_name,matches:[]}),i[e.series.id].matches.push(e)),"International"==e.series.category&&l.international.push(e),l.featured.length<l.match_per_frame&&l.featured.push(e),5<l.matches.length)&&(l.show_all_matches=!0)}),0<l.international.length&&(l.show_international=!0),r&&angular.forEach(i,function(e){l.league.push(e),l.series_list.push(e)}),s&&angular.forEach(o,},l.$watch("matches",}]),CBMatches.controller("MatchScag",["$scope","SCAG",function(t,e){t.api_url="/api/match/current",t.match_id=0,t.is_single_match=!0,t.match={},t.refresh_time=50,t.filters=[],angular.extend(t,new e(t)),t.$watch("match_id",function(e){t.api_url="/api/match/"+t.match_id,t.fetch_data()})}]),CBMatches.factory("SCAG",["$http","$timeout","matchProvider","Match",function(a,o,i,r){return function(t){var e=0,n=this;return n.get_miniScores=function(e,t){var a=[];return angular.forEach(e,,a},n.get_match_miniscore=n.fetch_data=function(){o.cancel(e),""!=t.api_url&&a({url:t.api_url,cache:!1,async:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}).then(function(e){angular.isDefined(t.is_single_match)&&t.is_single_match?t.match=n.get_match_miniscore(e.data):t.matches=n.get_miniScores(e.data,t.filters)}),e=o(function(){n.fetch_data()},1e3*t.refresh_time)},n.fetch_data(),t}}]),CBMatches.service("matchFilters",[function(){var s=this;s.filter_by_prefered_team=function(e,t){function a(e,t){return angular.isArray(e)?0<=e.indexOf(parseInt(t)):e==t}return!(!a(t,e.team1.id)&&!a(t,e.team2.id))},s.filter=function(e,t){var a=[],n=-1,o=!0,i=[],r=(new Date).getTime(),t=(null!=t&&(a=t.prefered_teams||[],n=null!=t.preview_hours&&0<=t.preview_hours?t.preview_hours:-1,t.complete_hours&&0<=t.complete_hours&&t.complete_hours,o=null==t.domestic||t.domestic,i=null!=t.ban_series?t.ban_series:[]),!1);return(0==a.length||0<a.length&&s.filter_by_prefered_team(e,a,!1))&&(t=!0),o||(t=t&&!e.series.is_domestic()),0<=n&&0<e.start_time.getTime()-r-n&&(t=t&&!1),t=0<i.length&&0<=i.indexOf(parseInt(e.series.id))?!1:t},s.filter_matches=function(e,t){var a=[],n=[];return angular.forEach(e,,a}}]),CBMatches.factory("Match",[function(){return function(){var t=this;t.id,t.name,t.state,t.status="",t.type,t.type_id,t.start_time,t.end_time,t.last_update_time,t.state_title,t.view_type,t.is_live_coverage,t.series=null,t.venue=null,t.team1=null,t.team2=null,t.players=null,t.toss,t.official,t.mom,t.mos,t.miniscore,t.innings,t.timestamps=[],t.commentary={},t.full_commentary={fetched:!1,counts:10,from:0,commentary:{},timestamps:[]},t.latest_video={},t.hys=!1,t.winner,t.is_inprogress=function(){return"inprogress"==t.state||"break"==t.state||"forseen"==t.state},t.get_header=function(e){return header=null!=e&&e?t.team1.name+" vs "+t.team2.name+", "+t.name:t.team1.short_name+" vs "+t.team2.short_name+", "+t.name},t.get_page_title=function(){return title_string="",void 0!==t.miniscore&&(void 0!==t.miniscore.batting&&(title_string+=t.miniscore.batting.short_name+" "+t.miniscore.batting.score),void 0!==t.miniscore.bowling&&(title_string=(title_string+=" vs ")+t.miniscore.bowling.short_name+" "+t.miniscore.bowling.score),void 0!==t.miniscore.batsman&&(title_string+=" (",angular.forEach(t.miniscore.batsman,function(e){title_string+=e.full_name+" "+e.r+"("+e.b+") "}),title_string+=") | "),title_string=title_string+t.get_header(!0)+" - Live Score, Commentary - Cricbuzz"),title_string},t.get_match_url=function(){var e=t.get_header(!1);return null!=t.series&&(e+=" "+t.series.name),"/live-cricket-scores/"+t.id+"/"+cb_sanitize(e)},t.get_scorecard_url=function(){var e=t.get_header(!0);return null!=t.series&&(e+=" "+t.series.name),"/live-cricket-scorecard/"+t.id+"/"+cb_sanitize(e)}}}]),CBMatches.factory("Team",[function(){return function(){var t=this;t.id,t.name,t.short_name,t.flag_image,t.flag_round_image,t.flag_square_image,t.squad=[],t.squad_bench=[],t.score="",t.current_score="",t.current_overs="",t.inning_score,t.is_team=function(e){return t.id==e}}}]),CBMatches.factory("Series",[function(){return function(){var e=this;e.id,e.name,e.start_date,e.end_date,e.category,e.tour,e.type,e.is_domestic=e.get_series_url=function(){return"/cricket-series/"+e.id+"/"+cb_sanitize(e.name)}}}]),CBMatches.factory("Venue",[function(){return function(){var e=this;e.id,e.name,e.stadium,e.city,e.country,e.location,e.timezone="+0:00",e.longitude,e.latitude,e.map_url,e.image_url}}]),CBMatches.factory("Player",[function(){return function(){var e=this;e.id,e.name,e.full_name,e.nick_name,e.first_name,e.last_name,e.speciality,e.role,e.image,e.batting_style,e.bowling_style,e.get_profile_url=function(){return"/profiles/"+e.id+"/"+cb_sanitize(e.full_name)},e.create_short_link=function(){return'<a href="'+e.get_profile_url()+'" target="_blank">'+e.nick_name+"</a>"}}}]),CBMatches.factory("Miniscore",[function(){return function(){var e=this;e.batting,e.bowling,e.batsman=[],e.bowler=[],e.last_wicket,e.rrr,e.crr,e.partnership,e.overs_left,e.previous_overs_string,e.target,e.latest_batting_innings=function(){return latest_innings=null,angular.isDefined(e.batting.innings)&&null!=e.batting.innings&&(1==e.batting.innings.length?latest_innings=e.batting.innings[0]:1<e.batting.innings.length&&(parseInt(e.batting.innings[0].id)>parseInt(e.batting.innings[1].id)?latest_innings=e.batting.innings[0]:parseInt(e.batting.innings[0].id)<parseInt(e.batting.innings[1].id)&&(latest_innings=e.batting.innings[1]))),latest_innings}}}]),CBMatches.factory("Commentary",[function(){return function(){var e=this;e.timestamp,e.comm,e.o_no,e.i_id,e.runs,e.o_summary,e.batsman,e.bowler,e.bowl_id,e.evt,e.bt_tm_name}}]),CBMatches.service("commentaryEventManager",["GEO","$sce","$http","$timeout","$rootScope",function(i,r,t,a,n){(_commEvtManager=this).events=["over-break","four","six","wicket","fifty","century","Wide","No Ball & Leg Byes","No Ball & Byes","Byes","No Ball","Leg Byes","last-commentary"],_commEvtManager.refreshEvts={current_over:0,current_ball:0,pv:{track_count:0,refresh_ball:(new Date).getSeconds()%6,is_trackable:!1,has_tracked:!1,callback:function(){var e=Math.floor(1e3*Math.random()+1)+Math.floor(2e3*Math.random()+1);a(function(){n.trackPageView()},e)}},ads:{track_count:0,refresh_ball:0,is_trackable:!1,has_tracked:!1,callback:function(){var e=Math.floor(3e3*Math.random()+1);a(function(){n.reload_ads()},e)}}},_commEvtManager.last_events={},_commEvtManager.event_strips={},_commEvtManager.set_event=function(e){t({url:e,cache:!1,async:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}).then(},_commEvtManager.update_last_event=function(e){_commEvtManager.last_events[e.evt]=_commEvtManager.last_events[e.evt]||0,_commEvtManager.last_events["last-commentary"]=_commEvtManager.last_events["last-commentary"]||0,parseInt(e.timestamp)>parseInt(_commEvtManager.last_events[e.evt])&&(_commEvtManager.last_events[e.evt]=e.timestamp),parseInt(e.timestamp)>parseInt(_commEvtManager.last_events["last-commentary"])&&(_commEvtManager.last_events["last-commentary"]=e.timestamp)},_commEvtManager.check_filter=function(e,t,a){return is_valid=!0,is_valid=angular.isUndefined(a)||(angular.isUndefined(a.last)||(is_valid=is_valid&&(_commEvtManager.last_events[t.evt]==t.timestamp||!a.last)),angular.isUndefined(a.matchId)||(is_valid=is_valid&&e.id==a.matchId),angular.isUndefined(a.seriesId)||(is_valid=is_valid&&e.series.id==a.seriesId),angular.isUndefined(a.teamId))?is_valid:is_valid&&(e.team1.id==a.teamId||e.team2.id==a.teamId)},_commEvtManager.update_event_strip=function(a,n){var o=[];return angular.isUndefined(_commEvtManager.event_strips[n.evt])||angular.forEach(_commEvtManager.event_strips[n.evt],function(e,t){(i.isGeo(e.geo)||angular.isUndefined(e.geo))&&_commEvtManager.check_filter(a,n,e.filters)&&((event_commentary=angular.copy(n)).timestamp=parseInt(event_commentary.timestamp)+t,event_commentary.comm=r.trustAsHtml(e.html),delete event_commentary.o_no,o.push(event_commentary))}),o},_commEvtManager.manage_event=function(e,t){var a=[];return!angular.isUndefined(t.evt)&&0<=_commEvtManager.events.indexOf(t.evt)&&(_commEvtManager.update_last_event(t),a=_commEvtManager.update_event_strip(e,t)),a},_commEvtManager.tracker_refresh=function(e,t){try{e.is_inprogress()&&angular.isDefined(e.miniscore)&&e.miniscore&&null!=(last_inning=e.miniscore.latest_batting_innings())&&(_commEvtManager.refreshEvts.current_over=parseFloat(last_inning.overs),_commEvtManager.refreshEvts.current_ball=parseInt(Math.floor(10*_commEvtManager.refreshEvts.current_over)%10),1<=_commEvtManager.refreshEvts.current_over)&&angular.forEach(["pv","ads"],function(e){parseInt(_commEvtManager.refreshEvts[e].refresh_ball)==parseInt(_commEvtManager.refreshEvts.current_ball)?(_commEvtManager.refreshEvts[e].is_trackable=!0,_commEvtManager.refreshEvts[e].track_count++):(_commEvtManager.refreshEvts[e].is_trackable=!1,_commEvtManager.refreshEvts[e].has_tracked=!1),_commEvtManager.refreshEvts[e].is_trackable&&!_commEvtManager.refreshEvts[e].has_tracked&&(2<=_commEvtManager.refreshEvts[e].track_count&&_commEvtManager.refreshEvts[e].callback(),_commEvtManager.refreshEvts[e].is_trackable=!1,_commEvtManager.refreshEvts[e].has_tracked=!0)})}catch(e){n.cblog.exception(e,"COMM Event Tracker")}}}]),CBMatches.service("matchProvider",["Match","Series","Team","Venue","Player","Miniscore","Commentary","commentaryEventManager","$sce","$rootScope",function(t,a,n,o,i,r,s,e,l,c){_matchProvider=this;var d={TEST:1,ODI:2,T20:3};_matchProvider.ads_plugin_list={},_matchProvider.last_ads_plugin_list={},_matchProvider.eventManager=e,_matchProvider.get_match=function(e,a){!angular.isUndefined(a)&&null!=a||(a=new t);try{e&&(a.id=e.id,a.name=e.match_desc,a.state=e.state,a.type=e.type,a.type_id=d[e.type],a.status=e.status,a.is_live_coverage=null==e.live_coverage,a.start_time=e.start_time&&new Date(1e3*parseInt(e.start_time)),a.end_time=e.end_time&&new Date(1e3*parseInt(e.end_time)),a.last_update_time=e.last_update_time,null!=e.latest_video&&(a.latest_video=e.latest_video,a.latest_video.comm=l.trustAsHtml(e.latest_video.comm)),null!=e.hys&&(a.hys=e.hys),angular.isUndefined(e.end_time)&&(a.end_time=e.exp_end_time&&new Date(1e3*parseInt(e.exp_end_time))),a.state_title=e.state_title,a.toss=e.toss,a.official=a.official||e.official,a.series=a.series||_matchProvider.get_series(e.series),a.team1=a.team1||_matchProvider.get_team(e.team1),a.team2=a.team2||_matchProvider.get_team(e.team2),a.venue=a.venue||_matchProvider.get_venue(e.venue),angular.isUndefined(e.players)||(a.players=a.players||_matchProvider.get_players(e.players)),null!=e.mom&&0<e.mom.length&&(a.mom=[],angular.forEach(e.mom,function(e){angular.isUndefined(a.players)||null==a.players||angular.isUndefined(a.players[e])||a.mom.push(a.players[e])})),null!=e.mos&&0<e.mos.length&&(a.mos=[],angular.forEach(e.mos,function(e){angular.isUndefined(a.players)||null==a.players||angular.isUndefined(a.players[e])||a.mos.push(a.players[e])})),null!=e.score&&(a.miniscore=new r,null!=e.score.batting&&(a.team1.is_team(e.score.batting.id)?(angular.extend(a.team1,e.score.batting),a.miniscore.batting=a.team1):(angular.extend(a.team2,e.score.batting),a.miniscore.batting=a.team2)),null!=e.score.bowling&&(a.team2.is_team(e.score.bowling.id)?(angular.extend(a.team2,e.score.bowling),a.miniscore.bowling=a.team2):(angular.extend(a.team1,e.score.bowling),a.miniscore.bowling=a.team1)),null!=e.score.batsman&&(a.miniscore.batsman=[],angular.forEach(e.score.batsman,function(e){angular.isUndefined(a.players)||null==a.players||angular.isUndefined(a.players[e.id])||(null==e.sr&&(e.sr=0<e.b?(e.r/e.b*100).toFixed(2):0),angular.extend(a.players[e.id],e),a.miniscore.batsman.push(a.players[e.id]))})),null!=e.score.bowler&&(a.miniscore.bowler=[],angular.forEach(e.score.bowler,function(e){var t;angular.isUndefined(a.players)||null==a.players||angular.isUndefined(a.players[e.id])||(null==e.er&&(0<e.o?(t=6*parseInt(e.o)+e.o%1*10,e.er=(e.r/t*6).toFixed(2)):e.er=0),angular.extend(a.players[e.id],e),a.miniscore.bowler.push(a.players[e.id]))})),null!=e.score.over_summary&&(a.miniscore.over_summary=e.score.over_summary),a.match_index=e.match_index||0,a.miniscore.rrr=e.score.rrr,a.miniscore.crr=e.score.crr,a.miniscore.partnership=e.score.prtshp,a.miniscore.overs_left=e.score.overs_left,a.miniscore.previous_overs_string=e.score.prev_overs,a.miniscore.target=e.score.target,!e.score.last_wkt||angular.isUndefined(e.score.last_wkt)||angular.isUndefined(a.players[e.score.last_wkt])||(a.miniscore.last_wicket=a.players[e.score.last_wkt],a.miniscore.last_wicket.score=e.score.last_wkt_score)),null!=e.comm_lines)&&0<e.comm_lines.length&&(angular.forEach(e.comm_lines,function(e,t){(_commentary=_matchProvider.get_comm_line(a,e)).timestamp=parseInt(e.timestamp),c.$GEO.isGeo(_commentary.geo)&&("Plugin:fours:"==_commentary.evt||"Plugin:six:"==_commentary.evt||"Plugin:wickets:"==_commentary.evt||"Plugin:over-end:"==_commentary.evt)&&(null==_matchProvider.ads_plugin_list[_commentary.evt]?_matchProvider.ads_plugin_list[_commentary.evt]=[_commentary.timestamp]:_matchProvider.ads_plugin_list[_commentary.evt].indexOf(_commentary.timestamp)<0&&_matchProvider.ads_plugin_list[_commentary.evt].push(_commentary.timestamp),null==_matchProvider.last_ads_plugin_list[_commentary.evt]||_matchProvider.last_ads_plugin_list[_commentary.evt]<_commentary.timestamp)&&(_matchProvider.last_ads_plugin_list[_commentary.evt]=_commentary.timestamp),a.commentary[_commentary.timestamp]=null,a.commentary[_commentary.timestamp]=_commentary,a=_matchProvider.set_latest_video(a,_commentary),(e.timestamp<a.full_commentary.from||0==a.full_commentary.from)&&(a.full_commentary.from=e.timestamp),delete _commentary}),angular.forEach(_matchProvider.ads_plugin_list,function(e,t){angular.forEach(e,function(e){_matchProvider.last_ads_plugin_list[t]!=e&&delete a.commentary[e]})}),a.timestamps=Object.keys(a.commentary).sort().reverse())}catch(e){c.cblog.exception(e,"Match Center - Parsing")}return a},_matchProvider.get_miniscore=function(e){},_matchProvider.get_series=function(e){var t=new a;return e&&angular.extend(t,e),t},_matchProvider.get_players=function(e){var n=null;return!angular.isUndefined(e)&&null!=e&&0<e.length&&(n={},angular.forEach(e,function(e){var t,a;n[e.id]=(e=e,a=new i,e&&(a.id=e.id,a.name=e.name,a.full_name=e.f_name||e.name,a.nick_name=e.name,a.speciality=e.speciality||"",a.image=e.image?"https://static.cricbuzz.com/stats/img/faceImages/"+e.image:"",a.batting_style=e.bat_style||null,a.bowling_style=e.bowl_style||null,a.role=e.role||null,t=e.f_name.split(" "),a.first_name=t[0]||e.name,a.last_name=1<t.length?t.splice(1,1).join(" "):""),a)})),n},_matchProvider.get_team=function(e){var t=new n;return e&&(t.id=e.id,t.name=e.name,t.short_name=e.s_name.toUpperCase(),e.round_flag&&(t.flag_round_image="https://static.cricbuzz.com/cricbuzz/images/flags/newFlags/team_"+e.round_flag),e.square_flag&&(t.flag_square_image="//toi.cricbuzz.com/iphone/2.0/flags/"+e.square_flag),t.flag_image=t.flag_square_image||t.flag_round_image),t},_matchProvider.get_venue=function(e){var t=new o;return e&&(angular.extend(t,e),t.stadium=e.name,t.map_url="https://www.google.com/maps/preview?q="+t.stadium+", "+t.location,t.image_url=0<t.id?"https://static.cricbuzz.com/stats/venue/images/"+t.id+".jpg":""),t},_matchProvider.get_comm_line=function(t,e){return _commentary=new s,angular.extend(_commentary,e),null!=e.comm&&(_commentary.comm=l.trustAsHtml(e.comm)),null!=_commentary.evt&&"over-break"==_commentary.evt&&(_commentary.batsman=[],_commentary.bowler=[],angular.isUndefined(e.batsman)||angular.forEach(e.batsman,function(e){angular.isUndefined(t.players)||angular.isUndefined(t.players[e.id])||_commentary.batsman.push(angular.extend({},t.players[e.id],e))}),angular.isUndefined(e.bowler)||angular.isUndefined(t.players)||(bowler=e.bowler[0],_commentary.bowler.push(angular.extend({},t.players[bowler.id],bowler))),_commentary.o_no=Math.round(_commentary.o_no)),t.match_settings.video_enabled&&angular.isDefined(e.video)&&(_commentary.videoId=e.video),_commentary},_matchProvider.get_full_comm_line=function(a,e){var n={};return null!=e.comm_lines&&0<e.comm_lines.length&&angular.forEach(e.comm_lines,function(e,t){e.timestamp<a.full_commentary.from&&((_commentary=_matchProvider.get_comm_line(a,e)).timestamp=parseInt(e.timestamp),n[_commentary.timestamp]=_commentary,delete _commentary)}),n},_matchProvider.set_latest_video=function(e,t){return e.latest_video.timestamp<=t.timestamp&&e.match_settings.video_enabled&&angular.isDefined(t.video)&&(e.latest_video=t),e}}]),CBMatches.controller("matchCenter",["$rootScope","$scope","$http","$q","$timeout","matchProvider","Match","GEO","activeWindow",function(n,o,t,e,a,i,r,s,l){o.matchId=0,o.hys_enabled=!1,o.isMiniscoreRendered=!1,o.isCommentaryRendered=!1,o.seriesId=0,o.user={},o.match_base={},o.settings={defer:null,promise:null,http:null,params:{},base_path:"",url:"",call_count:0,retry_count:0,refreshId:0,refresh:15e3,timeout:3e4,force_refresh:!1,invoked_force_update:!1,video_geo:{},video_enabled:!1,pull_geo:{},mode:"pull"},o.match=new r;var c=!(o.match.latest_video={timestamp:0}),d=(o.enable_rendered_template=function(){o.$on("$includeContentLoaded",function(e,t){"miniscore"==t&&a(function(){o.isMiniscoreRendered=!0},50),"commentary"==t&&(o.isCommentaryRendered=!0)}),a(function(){o.isMiniscoreRendered=!0,o.isCommentaryRendered=!0},2e3)},o.reset_comm_line=function(){o.match.full_commentary.commentary={},o.match.full_commentary.timestamps=[],o.match.full_commentary.from=0,o.match.full_commentary.counts=10,o.match.full_commentary.fetched=!1,o.match.timestamps=null,o.match.timestamps=[],o.match.commentary=null,o.match.commentary={}},o.manage_match_center=function(){angular.isDefined(o.match_base.settings)&&(angular.extend(o.settings,o.match_base.settings),s.isGeolocation(o.settings.pull_geo)&&(o.settings.mode="pull"),s.isGeolocation(o.settings.video_geo))&&(o.settings.video_enabled=!0,c||o.enable_video_services());function e(){o.match.match_settings=o.settings,o.match=i.get_match(o.match_base,o.match),i.eventManager.tracker_refresh(o.match,o.match.commentary),""!=(page_title=o.match.get_page_title())&&(document.title=page_title)}o.settings.invoked_force_update?(o.reset_comm_line(),o.settings.invoked_force_update=!1,a(e,10)):e()},o.enable_rendered_template(),0),u=(o.enable_video_services=function(){o.settings.video_enabled=!0,c=!0,o.fetch_videos(),_ele("body").append("<style>.kaltura-play{display:inline-block;}</style>")},o.fetch_videos=function(){a.cancel(d),o.settings.video_enabled&&t({method:"GET",cache:!1,async:!0,url:"/api/match/"+o.matchId+"/commnetary-video"}).then(function(e){var t=e.data,e=e.status;null!=t&&200==e&&angular.forEach(t,function(e,t){null!=o.match.full_commentary.commentary[t]&&(o.match.full_commentary.commentary[t].videoId=e,o.match=i.set_latest_video(o.match,o.match.full_commentary.commentary[t])),null!=o.match.commentary[t]&&(o.match.commentary[t].videoId=e,o.match=i.set_latest_video(o.match,o.match.commentary[t]))})});var e="push"==o.settings.mode?o.settings.refresh:3e4;d=a(function(){o.fetch_videos()},e)},o.fetch_fullcommentary=function(){var a="#full_commentary_btn";_ele(a).html('<div class="spinner"></div>'),0!=o.match.full_commentary.timestamps.length||o.match.full_commentary.fetched?(o.match.full_commentary.counts<=o.match.full_commentary.timestamps.length&&o.match.full_commentary.counts<1e3&&(o.match.full_commentary.counts+=30),_ele(a).html("Load Commentary")):t({method:"GET",cache:!1,async:!0,url:o.settings.base_path+"/match-api/"+o.matchId+"/commentary-full.json"}).then(function(e){var t=e.data,e=e.status;null!=t&&200==e&&(o.match.full_commentary.commentary=i.get_full_comm_line(o.match,t),o.match.full_commentary.timestamps=Object.keys(o.match.full_commentary.commentary).sort().reverse(),_ele(a).html("Load Commentary"),n.$broadcast("active-window-inactive",a),o.match.full_commentary.fetched=!0,u())},function(){_ele(a).html("Error Load Commentary")})},o.fetch_commentary=function(){try{""!=o.settings.url&&(o.settings.defer=e.defer(),o.settings.http=t({method:"GET",cache:!1,async:!0,url:o.settings.url,params:o.settings.params,timeout:o.settings.timeout,cancel:o.settings.defer}),o.settings.promise=o.settings.http.then(function(e){var t=e.data,e=(angular.isUndefined(e.data.hys)||"true"!=e.data.hys||(o.hys_enabled=!0),e.status);null!=t&&200==e?(o.match_base=t,o.manage_match_center()):o.settings.retry_count++,o.settings.call_count++,o.call_commentary()},function(e){o.settings.retry_count++,o.settings.refreshId=a(function(){o.call_commentary()},o.settings.refresh)}),o.settings.promise.abort=function(){o.settings.defer.resolve()})}catch(e){o.cblog.exception(e,"Match Center - HTTP CALL"),o.call_commentary()}},o.pull_commentary_mode=function(){o.settings.url=o.settings.base_path+"/match-api/"+o.matchId+"/commentary.json",o.fetch_commentary()},o.push_commentary_mode=function(){o.settings.url=o.settings.base_path+"/match-api/"+o.matchId+"/commentary-push.json",o.fetch_commentary()},o.refresh=function(){o.reset_comm_line(),"push"==o.settings.mode&&null!=o.settings.promise&&o.settings.promise.abort(),o.settings.call_count=0,o.call_commentary()},o.call_commentary=function(){a.cancel(o.settings.refreshId),o.settings.force_refresh&&!o.settings.invoked_force_update?(o.settings.call_count=1,o.settings.retry_count=0,o.settings.force_refresh=!1,o.settings.invoked_force_update=!0,o.settings.refreshId=a(function(){o.pull_commentary_mode()},o.settings.refresh)):0==o.settings.call_count||3<=o.settings.retry_count?(o.pull_commentary_mode(),o.settings.retry_count=0):"pull"==o.settings.mode?o.settings.refreshId=a(function(){o.pull_commentary_mode()},o.settings.refresh):"push"==o.settings.mode&&(o.settings.refreshId=a(function(){o.settings.promise.abort()},o.settings.refresh),o.push_commentary_mode())},function(){var e=new l("#full_commentary_btn"),t=0;e.setHeight(100),e.showElement(function(){o.match.full_commentary.counts<=o.match.full_commentary.timestamps.length?(a.cancel(t),t=a(function(){e.unmark_active(),n.reload_ads("mpu5"),o.match.full_commentary.counts+=30},500),o.match.full_commentary.fetched=!0):o.match.full_commentary.counts>o.match.full_commentary.timestamps.length&&(e.mark_active(),o.match.full_commentary.fetched=!1)})});o.add_rm_cls=function(e,t){e=_ele(e);"show"==t?e.hasClass("disp-none")?e.removeClass("disp-none"):e.addClass("disp-blck"):e.hasClass("disp-blck")?e.removeClass("disp-blck"):e.addClass("disp-none")},o.onload=function(){0<parseInt(matchId)&&(o.matchId=matchId,o.call_commentary())},o.get_comm_class=function(e){return angular.isDefined(e.o_no)&&null!=e.o_no?"cb-col cb-col-90":null==e.o_no&&null==e.videoId||0<=e.evt.indexOf("Plugin")&&null!=e.videoId?"cb-col cb-col-100":void 0},o.$evalAsync(function(){o.onload()})}]),CBMatches.controller("highlightsCenter",["$rootScope","$sce","$scope","$http","$q","$timeout","$location","Match",function(e,a,n,t,o,i,r,s){n.matchId=0,n.seriesId=0,n.highlights=null,n.show_highlights=!0,n.inns_no=0,n.match=new s,n.commentary_array=[],n.highlight_type={},n.settings={defer:null,promise:null,http:null,params:{},base_path:"",url:"",call_count:0,retry_count:0,refreshId:0,refresh:15e3,timeout:3e4,force_refresh:!1,invoked_force_update:!1,video_geo:{},video_enabled:!1,pull_geo:{},mode:"pull"},n.fetch_highlights=function(e){try{n.settings.url=n.settings.base_path+"/match-api/"+e+"/highlights.json",n.highlights={},n.commentary_array=[],""!=n.settings.url&&(n.settings.defer=o.defer(),n.settings.http=t({method:"GET",cache:!1,async:!0,url:n.settings.url}).then(function(e){0!=e.data.comm_lines.length&&(n.highlights=e.data,0<n.highlights.comm_lines.length)?(n.show_highlights=!0,angular.extend(n.settings,e.data.settings),angular.isDefined(n.settings.video_geo.country)&&-1!=n.settings.video_geo.country.indexOf(_GEO.country)&&(n.settings.video_enabled=!0),n.inns_no=n.highlights.comm_lines[0].i_id,angular.forEach(n.highlights.comm_lines,function(t){t.comm=a.trustAsHtml(t.comm),n.settings.video_enabled&&(t.videoId=t.video),n.commentary_array.push(t),angular.forEach(t.all_evt,function(e){angular.isUndefined(n.highlight_type[t.i_id])&&(n.highlight_type[t.i_id]={four:!1,six:!1,wicket:!1,fifty:!1,century:!1,dropped:!1,other:!1}),n.highlight_type[t.i_id][e]=!0})})):n.show_highlights=!1},function(e){n.show_highlights=!1}))}catch(e){n.cblog.exception(e,"Match Center - HTTP CALL")}},n.change_match=function(e){r.url("/?matchId="+e)},e.$on("$locationChangeSuccess",function(e,t){angular.isDefined(r.search().matchId)&&n.fetch_highlights(r.search().matchId)})}]),CBMatches.controller("playerhighlights",["$rootScope","$sce","$scope","$http","$q","$timeout","$location","commentaryApi",function(e,t,r,a,n,o,i,s){r.matchId=0,r.filterData=[],r.eventTypes=["FOUR","SIX","WICKET","FIFTY","HUNDRED","DROPPED"],r.eventTypesDataAvailable={},r.event_type="",r.events=[{name:"Event 1",type:"FOUR"},{name:"Event 2",type:"SIX"},{name:"Event 3",type:"WICKET"},{name:"Event 4",type:"FIFTY"},{name:"Event 5",type:"HUNDRED"},{name:"Event 6",type:"DROPPED"}],r.battingFilters=["HUNDRED","FIFTY","FOUR","SIX","WICKET","DROPPED","MILESTONE","UDRS"],r.selectedEventType="all",r.bowlingFilters=["WICKET","UDRS"],r.showEventType=function(i){r.selectedEventType=i;var e=document.getElementsByClassName("cb-events");angular.forEach(e,function(e){var t=e.getAttribute("class").split(" "),a="all"===i;if(!a)for(var n=0;n<t.length;n++){var o="cb-"+i.toLowerCase()+"-plyr-hlt";if(-1<t[n].indexOf(o)){a=!0;break}}e.style.display=a?"":"none"})},r.fetch_playerHlights=function(e,t){for(var a={},n=0;n<e.length;n++)if("NONE"!==e[n])if("batting"===t){var o=e[n].split(",");for(j=0;j<o.length;j++)r.battingFilters.includes(o[j])&&(a[o[j]]=1)}else{var i=e[n].split(",");for(j=0;j<i.length;j++)r.bowlingFilters.includes(i[j])&&(a[i[j]]=1)}r.eventTypesDataAvailable=a}}]),CBMatches.controller("highlightsCenterApi",["$rootScope","$sce","$scope","$http","$q","$timeout","$location","commentaryApi",function(e,a,n,o,i,t,r,s){n.matchId=0,n.innId=1,n.highlights=null,n.show_highlights=!0,n.inns_no=0,n.innings_header_array=[],n.commentary_array=[],n.highlight_type={},n.isFormatHundred=!1,n.settings={defer:null,promise:null,http:null,params:{},base_path:"",url:"",call_count:0,retry_count:0,refreshId:0,refresh:15e3,timeout:3e4,force_refresh:!1,invoked_force_update:!1,video_geo:{},video_enabled:!1,pull_geo:{},mode:"pull"},n.fetch_highlights=function(e,t){try{e&&(n.settings.defer=i.defer(),o({method:"GET",cache:!1,async:!0,url:"/api/cricket-match/"+e+"/highlights/"+t}).then(function(e){e.data&&e.data.commentaryList&&0<e.data.commentaryList.length&&(n.highlights=e.data,n.isFormatHundred="HUN"==n.highlights.matchHeader.matchFormat,0<n.highlights.commentaryList.length)?(n.show_highlights=!0,innings_list=n.highlights.matchHeader.matchTeamInfo,team_iid=1,angular.forEach(innings_list,function(e){innings_header=e.battingTeamShortName,innings_header=team_iid<3?innings_header+" 1st Inns":innings_header+" 2nd Inns",n.innings_header_array.push({inn_header:innings_header,inning_id:team_iid}),team_iid++}),n.inns_no=n.innings_header_array[0].inning_id,commentary_list=n.highlights.commentaryList,n.fetch_commentary_lines(commentary_list)):n.show_highlights=!1},function(e){n.show_highlights=!1}))}catch(e){n.cblog.exception(e,"Match Center - HTTP CALL")}},n.fetch_commentary_lines=function(e){n.commentary_array=[],angular.forEach(e,function(t){all_evt=[],comm_line=t.commText,t.commentaryFormats&&(comm_formatting_array=s.format_commentary(t.commentaryFormats),comm_line=s.replace_comm_lines(comm_formatting_array.find,comm_formatting_array.replace,comm_line)),comm_line=a.trustAsHtml(comm_line),events_array=t.event.split(","),angular.forEach(events_array,function(e){e=e.toLowerCase(),"team_hundred"!=(e=s.set_event_type(e))&&"team_fifty"!=e||(e="addon_events"),angular.isUndefined(n.highlight_type[t.inningsId])&&(n.highlight_type[t.inningsId]={four:!1,six:!1,wicket:!1,fifty:!1,hundred:!1,dropped:!1,udrs:!1,other:!1}),n.highlight_type[t.inningsId][e]=!0,all_evt.push(e)}),t.overNumber=.5<t.overNumber-Math.floor(t.overNumber)?Math.ceil(t.overNumber):t.overNumber;var e={commText:comm_line,inning_id:t.inningsId,event:all_evt,ballMetric:n.isFormatHundred?t.ballNbr:t.overNumber,teamName:t.batTeamName};n.commentary_array.push(e)})},n.set_innings_id=function(e,t){try{e&&(n.settings.defer=i.defer(),o({method:"GET",cache:!1,async:!0,url:"/api/cricket-match/"+e+"/highlights/"+t}).then(function(e){e.data&&e.data.commentaryList&&0<e.data.commentaryList.length&&(n.highlights=e.data,0<n.highlights.commentaryList.length)?(n.show_highlights=!0,n.inns_no=t,commentary_list=n.highlights.commentaryList,n.fetch_commentary_lines(commentary_list)):n.show_highlights=!1},function(e){n.show_highlights=!1}))}catch(e){n.cblog.exception(e,"Match Center - HTTP CALL")}},n.change_match=e.$on("$locationChangeSuccess",function(e,t){angular.isDefined(r.search().matchId)&&n.fetch_highlights(r.search().matchId)})}]),CBMatches.controller("seriesSchedule",["$scope","Matches",function(t,a){t.matches=[],t.seriesId=0,t.api_url="",t.$watch("seriesId",function(e){0<t.seriesId&&(t.api_url="/cricket-series/api/matches/series/"+e,angular.extend(t,new a(t)))}),t.$watch("matches",}]),CBMatches.factory("Matches",["$http","Match","matchProvider",function(e,o,i){return function(a){var n=this;return n.parse_matches=function(e){angular.forEach(e,function(e){var t=new o,t=i.get_match(e,t);a.matches.push(t),delete t})},n.fetch_matches=function(){""!=a.api_url&&e({url:a.api_url,cache:!1,async:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}).then(function(e){var t=e.data;e.status;n.parse_matches(t)})},n.fetch_matches(),a}}]),CBMatches.directive("copyToClipboard",[function(){return{restrict:"A",transclude:!1,scope:{container:"@container"},link:function(t,e,a){e.on("click",function(){var e;a.copyToClipboard&&((e=document.createElement("input")).setAttribute("value",a.copyToClipboard),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),t.copyElm=t.container&&"video_modal"===t.container?document.getElementsByClassName("cb-comm-video-modal-wrap")[0].querySelector("#copy-message-pip"+a.gtmLabel):document.getElementById("copy-message"+a.gtmLabel),t.copyElm.style.display="inline",setTimeout(5e3))})}}}]),CBMatches.controller("fullcommentary",["matchProvider","$scope","$q","$timeout","$http","$sce",function(a,n,t,e,o,i){n.set_innings_id=0,n.innings_tab=[{key:"0",label:"Preview"}],n.inns_id=-1,n.filters_type={set_highlts_type:"",set_batsman_id:-1,set_bowler_id:-1},n.match_response="",n.filters_tab=1,n.matchId="",n.match={},n.data_loaded=0,n.bat_innings_tab={},n.bowl_innings_tab={},n.highlights_innings_tab=[],n.settings={defer:null,promise:null,http:null,params:{},base_path:"",url:"",call_count:0,retry_count:0,refreshId:0,refresh:15e3,timeout:3e4,force_refresh:!1,invoked_force_update:!1,video_geo:{},video_enabled:!1,pull_geo:{},mode:"pull"},n.set_innings_tab=function(e,t){var a="";angular.forEach(e,function(e){"TEST"==n.match_response.type?(a=t+" 1st Inns",2<e.id&&(a=t+" 2nd Inns")):a=t+" Inns";e={key:e.id,label:a};n.innings_tab.push(e)})},n.set_filters=function(e,t){switch(n.filters_tab=e){case 2:n.filters_type.set_highlts_type=t;break;case 3:n.filters_type.set_batsman_id=t;break;case 4:n.filters_type.set_bowler_id=t}},n.add_all_active=function(e){_ele("#All-tab").addClass("active"),_ele(".cb-hlts-active").hasClass("active")&&_ele(".cb-hlts-active").removeClass("active"),n.set_innings_id=e,n.filters_type.set_highlts_type="",n.filters_tab=1},n.get_comm_line=function(e,t){return _commentary={},0!=t.i_id&&angular.isUndefined(n.bat_innings_tab[t.i_id])&&(n.bat_innings_tab[t.i_id]={}),0!=t.i_id&&angular.isUndefined(n.bowl_innings_tab[t.i_id])&&(n.bowl_innings_tab[t.i_id]={}),angular.extend(_commentary,t),null!=t.comm&&(_commentary.comm=i.trustAsHtml(t.comm)),_commentary.batsman=[],_commentary.bowler=[],angular.isUndefined(t.batsman)||angular.forEach(t.batsman,function(e){angular.isUndefined(n.match.players)||angular.isUndefined(n.match.players[e.id])||(_commentary.batsman.push(angular.extend({},n.match.players[e.id],e)),angular.isUndefined(n.bat_innings_tab[t.i_id][n.match.players[e.id]])&&(n.bat_innings_tab[t.i_id][e.id]=n.match.players[e.id].full_name))}),angular.isUndefined(t.bowler)||(bowl=t.bowler[0],_commentary.bowler.push(angular.extend({},n.match.players[bowl.id],bowl)),angular.isUndefined(n.match.players))||angular.isUndefined(n.match.players[bowl.id])||angular.isUndefined(n.bowl_innings_tab[t.i_id][n.match.players[bowl.id]])&&(n.bowl_innings_tab[t.i_id][bowl.id]=n.match.players[bowl.id].full_name),null!=_commentary.evt&&"over-break"==_commentary.evt&&(_commentary.o_no=Math.round(_commentary.o_no)),n.settings.video_enabled&&angular.isDefined(t.video)&&(_commentary.videoId=t.video),_commentary},n.fetch_commentary=function(e){0<(n.matchId=e)&&(n.settings.defer=t.defer(),o({method:"GET",cache:!1,async:!0,url:"/match-api/"+e+"/commentary-full.json"}).then(function(e){var t;n.match={},n.match.commentary={},n.match_response=e.data,angular.extend(n.settings,e.data.settings),angular.isDefined(n.settings.video_geo.country)&&-1!=n.settings.video_geo.country.indexOf(_GEO.country)&&(n.settings.video_enabled=!0),n.match.players=a.get_players(n.match_response.players),n.match.team1=a.get_team(n.match_response.team1),n.match.team2=a.get_team(n.match_response.team2),"TEST"==n.match_response.type&&angular.isUndefined(n.match_response.end_time)&&(n.match_response.end_time=n.match_response.exp_end_time),15<n.match_response.comm_lines.length&&(angular.isDefined(n.match_response.score)&&(e=n.match.team1.short_name,t=n.match.team2.short_name,n.match.team2.id==n.match_response.score.batting.id&&(e=n.match.team2.short_name,t=n.match.team1.short_name),angular.isDefined(n.match_response.score.batting)&&n.set_innings_tab(n.match_response.score.batting.innings,e),angular.isDefined(n.match_response.score.bowling))&&n.set_innings_tab(n.match_response.score.bowling.innings,t),n.set_innings_id=n.innings_tab.length-1),null!=n.match_response.comm_lines&&0<n.match_response.comm_lines.length?(angular.forEach(n.match_response.comm_lines,function(t,e){_commentary=n.get_comm_line(n.match,t),angular.isUndefined(n.match.commentary[_commentary.i_id])&&(n.match.commentary[_commentary.i_id]=[]),n.match.commentary[_commentary.i_id].push(_commentary),angular.forEach(t.all_evt,function(e){angular.isUndefined(n.highlights_innings_tab[t.i_id])&&(n.highlights_innings_tab[t.i_id]={four:!1,six:!1,wicket:!1,fifty:!1,century:!1,dropped:!1,other:!1}),n.highlights_innings_tab[t.i_id][e]=!0}),delete _commentary}),n.data_loaded=1):n.data_loaded=-1},function(e){n.data_loaded=-1}))}}]),CBMatches.controller("fullcommentaryApi",["commentaryApi","$scope","$q","$timeout","$http","$sce",function(o,i,a,e,n,r){i.set_innings_id=0,i.innings_tab=[{key:"0",label:"Preview"}],i.inns_id=-1,i.filters_type={set_highlts_type:"",set_batsman_id:-1,set_bowler_id:-1},i.match_response="",i.filters_tab=1,i.matchId="",i.data_loaded=0,i.bat_innings_tab={},i.bowl_innings_tab={},i.highlights_innings_tab=[],i.match={},i.match.commentary={},i.isFormatHundred=!1,i.settings={defer:null,promise:null,http:null,params:{},base_path:"",url:"",call_count:0,retry_count:0,refreshId:0,refresh:15e3,timeout:3e4,force_refresh:!1,invoked_force_update:!1,video_geo:{},video_enabled:!1,pull_geo:{},mode:"pull"},i.fetch_commentary=function(e,t){0<(i.matchId=e)&&(i.settings.defer=a.defer(),n({method:"GET",cache:!1,async:!0,url:"/api/cricket-match/"+e+"/full-commentary/"+t}).then(function(e){e.data&&0<e.data.commentary.length&&0<e.data.commentary[0].commentaryList.length?(i.match_response=e.data,match_format=i.match_response.matchDetails.matchHeader.matchFormat,i.isFormatHundred="HUN"==match_format,innings_list=i.match_response.matchDetails.matchHeader.matchTeamInfo,team_iid=1,angular.forEach(innings_list,function(e){innings_header=e.battingTeamShortName+" Inns","TEST"==match_format&&(innings_header=team_iid<3?e.battingTeamShortName+" 1st Inns":e.battingTeamShortName+" 2nd Inns"),i.innings_tab.push({key:team_iid,label:innings_header,start_timestamp:i.match_response.matchDetails.matchHeader.matchStartTimestamp}),team_iid++}),i.set_innings_id=i.innings_tab[0].key,0==i.set_innings_id&&(i.match_response.match_info=i.match_response.matchDetails.matchHeader),commentary_list=i.match_response.commentary[0],i.fetch_commentary_lines(commentary_list),i.data_loaded=1):i.data_loaded=-1},function(e){i.data_loaded=-1}))},i.fetch_commentary_lines=function(n){commentary=n.commentaryList,i.match.commentary[n.inningsId]=[],angular.forEach(commentary,function(t){all_evt=[],angular.isUndefined(i.match.commentary[n.inningsId])&&(i.match.commentary[n.inningsId]=[]),comm_line=t.commText.replace(/\\n/g,"<br>"),t.commentaryFormats&&(comm_formatting_array=o.format_commentary(t.commentaryFormats),comm_line=o.replace_comm_lines(comm_formatting_array.find,comm_formatting_array.replace,comm_line)),comm_line=r.trustAsHtml(comm_line),events_array=t.event.split(","),angular.forEach(events_array,function(e){e=e.toLowerCase(),e=o.set_event_type(e),angular.isUndefined(i.highlights_innings_tab[n.inningsId])&&(i.highlights_innings_tab[n.inningsId]={four:!1,six:!1,wicket:!1,fifty:!1,hundred:!1,dropped:!1,udrs:!1,other:!1}),i.highlights_innings_tab[n.inningsId][e]=!0,all_evt.push(e)});var a={commText:comm_line,inning_id:n.inningsId,event:all_evt,teamName:t.batTeamName,batsmanId:"_"+t.batsmanStriker.batId,bowlerId:"_"+t.bowlerStriker.bowlId,ballNbr:t.ballNbr,timestamp:t.timestamp};t.overNumber&&(a.over=t.overNumber),angular.forEach(all_evt,function(e){"over-break"==e&&t.overSeparator&&(a.overSeparator=t.overSeparator,a.overNum=.5<t.overSeparator.overNum-Math.floor(t.overSeparator.overNum)?Math.ceil(t.overSeparator.overNum):t.overSeparator.overNum)}),i.match.commentary[n.inningsId].push(a)}),_commentary_reverse=commentary.reverse(),angular.forEach(_commentary_reverse,function(e){0!=n.inningsId&&angular.isUndefined(i.bat_innings_tab[n.inningsId])&&(i.bat_innings_tab[n.inningsId]={}),0!=n.inningsId&&angular.isUndefined(i.bowl_innings_tab[n.inningsId])&&(i.bowl_innings_tab[n.inningsId]={}),!angular.isUndefined(e.batsmanStriker)&&0<e.batsmanStriker.batId&&(e.batsmanStriker.batId="_"+e.batsmanStriker.batId,angular.isUndefined(i.bat_innings_tab[n.inningsId][e.batsmanStriker.batId]))&&(i.bat_innings_tab[n.inningsId][e.batsmanStriker.batId]=e.batsmanStriker.batName),!angular.isUndefined(e.bowlerStriker)&&0<e.bowlerStriker.bowlId&&(e.bowlerStriker.bowlId="_"+e.bowlerStriker.bowlId,angular.isUndefined(i.bowl_innings_tab[n.inningsId][e.bowlerStriker.bowlId]))&&(i.bowl_innings_tab[n.inningsId][e.bowlerStriker.bowlId]=e.bowlerStriker.bowlName)})},i.set_filters=function(e,t){switch(i.filters_tab=e){case 2:i.filters_type.set_highlts_type=t;break;case 3:i.filters_type.set_batsman_id=t;break;case 4:i.filters_type.set_bowler_id=t}},i.add_all_active=function(t,e){_ele("#All-tab").addClass("active"),_ele(".cb-hlts-active").hasClass("active")&&_ele(".cb-hlts-active").removeClass("active"),e&&(i.settings.defer=a.defer(),n({method:"GET",cache:!1,async:!0,url:"/api/cricket-match/"+e+"/full-commentary/"+t}).then(function(e){e.data&&0<e.data.commentary.length&&0<e.data.commentary[0].commentaryList.length?(i.match_response=e.data,i.set_innings_id=t,i.filters_type.set_highlts_type="",i.filters_tab=1,0==i.set_innings_id&&(i.match_response.match_info=i.match_response.matchDetails.matchHeader),commentary_list=i.match_response.commentary[0],i.fetch_commentary_lines(commentary_list),i.data_loaded=1):i.data_loaded=-1},)}}]),CBMatches.service("commentaryApi",["$sce","$rootScope",function(e,t){(_commentaryApi=this).set_event_type=function(e){switch(e=e.toLowerCase()){case"four":case"six":case"wicket":case"fifty":case"hundred":case"dropped":case"over-break":case"udrs":case"none":case"maiden_over":case"highscoring_over":case"strategic_timeout":case"team_hundred":case"team_fifty":break;default:e="other"}return e},_commentaryApi.format_commentary=function(e){return find_replace_array={find:[],replace:[]},angular.forEach(e,function(a,n){format_value_array=a.formatValue,angular.forEach(format_value_array,function(e,t){switch(replace_data=null,n){case"bold":replace_data="<b>"+e+"</b>";break;case"italic":replace_data="<i>"+e+"</i>";break;case"boldItalic":replace_data="<b><i>"+e+"</i></b>"}null!=replace_data&&(find_replace_array.find.push(a.formatId[t]),find_replace_array.replace.push(replace_data))})}),find_replace_array},_commentaryApi.replace_comm_lines=function(e,t,a){for(var n=0;n<e.length;n++)a=a.replace(e[n],t[n]);return a}}]),CBMatches.controller("expertComments",["$scope","$q","$http",function(t,e,a){t.master={},t.have_your_say=function(e){""==grecaptcha.getResponse()?(hide_show("#error_form","show"),hide_show("#catpcha_error_msg","show")):(hide_show("#catpcha_error_msg","hide"),angular.isUndefined(t.user)||angular.isUndefined(t.user.name)||angular.isUndefined(t.user.comment)||0==t.user.name.length||300<t.user.comment.length||0==t.user.comment.length?hide_show("#error_form","show"):(t.master=angular.copy(e),hide_show("#inapt_content","hide"),t.show_loader=!0,(e=new FormData).append("uName",t.user.name),e.append("uComment",t.user.comment),e.append("uMatchId",t.matchId),e.append("recaptcha",grecaptcha.getResponse()),a.post("/info/haveyoursay",e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(e){t.show_loader=!1,200===e.status&&e.data.success?(hide_show("#success_form","show"),hide_show("#error_form","hide"),hide_show("#HUS-form","hide")):(hide_show("#success_form","hide"),hide_show("#error_form","show"))},function(e){t.show_loader=!1,hide_show("#inapt_content","show")})))},t.reset_have_your_form=function(){hide_show("#error_form","hide"),hide_show("#HUS-form","show"),hide_show("#success_form","hide"),hide_show("#catpcha_error_msg","hide"),document.getElementById("HUS-form").reset(),"undefined"!=typeof grecaptcha&&grecaptcha.reset(),t.user=angular.copy({}),t.form.$setPristine(),t.form.$setValidity(),t.form.$setUntouched(),t.$apply()}}]),CBMatches.controller("seriesSquads",["$scope","$http",function(a,n){a.seriesId=0,a.init=a.settings={defer:null,promise:null,http:null,params:{},base_path:"",url:""},a.set_filters=function(e,t){a.filters_type.set_filter_id=e,0<t&&0<e&&n({method:"GET",cache:!1,async:!0,url:"/cricket-series/squads/"+t+"/players/"+e}).then(function(e){document.getElementById("squadPlayers").innerHTML=e.data})}}]),CBMatches.controller("teamStats",["$scope","$http",function(n,t){n.selectedTab="mostRuns",n.selectedMatchType=1,n.selectedYear="all",n.selectedTeam="all",n.teams=[],n.init=function(e,t,a){n.teams=e;n.teams.unshift({id:"all",teamShortName:"All"}),n.teamName=t,n.teamId=a},n.machTypes=[{value:1,label:"Test"},{value:2,label:"ODI"},{value:3,label:"T20I"}],n.years=["all"],n.createYearsArry=function(){for(var e=(new Date).getFullYear();1937<=e;e--)n.years.push(e)},n.createYearsArry(),n.setTab=n.clearfilters=function(e){n.selectedMatchType=1,n.selectedYear="all",n.selectedTeam="all",n.setFilters()},n.setFilters=function(){var e=n.selectedTab.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),e="/cricket-team/"+n.teamName+"/"+n.teamId+"/stats-table/"+e+"/"+n.selectedMatchType+"/"+n.selectedYear+"/"+n.selectedTeam;t({method:"GET",cache:!1,async:!0,url:e}).then(}}]),angular.module("CBCommentary",[])),CBAds=(CBCommentary.factory("MatchApi",[function(){return function(){var t=this;t.id,t.name,t.state,t.status="",t.type,t.type_id,t.start_time,t.end_time,t.last_update_time,t.state_title,t.view_type,t.is_live_coverage,t.series=null,t.seriesName=null,t.venue=null,t.team1=null,t.team2=null,t.players=null,t.toss,t.official,t.mom,t.mos,t.miniscore,t.innings,t.timestamps=[],t.commentary={},t.full_commentary={commentary:{},timestamps:[]},t.latest_video={},t.hys=!1,t.winner,t.currentInningsId=null,t.lastTimeStamp=null,t.commListLength=null,t.carouselVideos={},t.carouselVideoid=[],t.responseLastUpdated=0,t.is_inprogress=t.get_header=function(e){return header=null!=e&&e?t.team1.name+" vs "+t.team2.name+", "+t.name:t.team1.shortName+" vs "+t.team2.shortName+", "+t.name},t.get_match_url=function(){var e=t.get_header(!1);return null!=t.seriesName&&(e+=" "+t.seriesName),"/live-cricket-scores/"+t.id+"/"+cb_sanitize(e)},t.get_match_videos_url=function(){var e=t.get_header(!1);return null!=t.seriesName&&(e+=" "+t.seriesName),"/cricket-match-videos/"+t.id+"/"+cb_sanitize(e)},t.get_page_title_for_comm=function(){return title_string="",void 0!==t.miniscore&&(void 0!==t.miniscore.batting.short_name&&(title_string+=t.miniscore.batting.short_name+" "+t.miniscore.batting.score),void 0!==t.miniscore.bowling.short_name&&(title_string=(title_string+=" vs ")+t.miniscore.bowling.short_name+" "+t.miniscore.bowling.score),void 0!==t.miniscore.batsman&&0<t.miniscore.batsman.length&&(title_string+=" (",angular.forEach(t.miniscore.batsman,function(e){title_string+=e.batName+" "+e.batRuns+"("+e.batBalls+") "}),title_string+=") | "),title_string=title_string+t.get_header(!0)+" - Live Score, Commentary - Cricbuzz"),title_string}}}]),CBCommentary.factory("Miniscore",[function(){return function(){var e=this;e.batting={},e.bowling={},e.batsman=[],e.bowler=[],e.last_wicket,e.rrr,e.crr,e.partnership,e.overs_left,e.previous_overs_string,e.target}}]),CBCommentary.factory("Commentary",[function(){return function(){var e=this;e.timestamp,e.comm,e.o_no,e.ball_no,e.i_id,e.runs,e.o_summary,e.batsman,e.bowler,e.bowl_id,e.evt,e.bt_tm_name,e.event_plugin=[]}}]),CBCommentary.factory("CarouselVideo",[function(){return function(){var e=this;e.headline,e.videoGeo=[],e.imageId=0,e.videoId=0,e.planId=0,e.isPremiumFree=0,e.isLive=!1,e.image_url=e.video_url=function(){switch(e.videoType){case"Fantasy Handbook":return _matchProviderApi.get_fantasy_url(e.tags);case"MatchStream":return _matchProviderApi.get_live_stream_url(e.tags);default:return"/cricket-videos/"+e.videoId+"/"+cb_sanitize(e.headline)}}}}]),CBCommentary.service("commentaryEventManagerApi",["$timeout","$rootScope",function(t,a){(_commEvtManager=this).events=["over-break","four","six","wicket","fifty","century","Wide","No Ball & Leg Byes","No Ball & Byes","Byes","No Ball","Leg Byes","last-commentary"],_commEvtManager.refreshEvts={current_over:0,current_ball:0,pv:{track_count:0,refresh_ball:(new Date).getSeconds()%6,is_trackable:!1,has_tracked:!1,callback:function(){var e=Math.floor(1e3*Math.random()+1)+Math.floor(2e3*Math.random()+1);t(function(){a.trackPageView()},e)}},ads:{track_count:0,refresh_ball:0,is_trackable:!1,has_tracked:!1,callback:function(){var e=Math.floor(3e3*Math.random()+1);t(function(){a.reload_ads()},e)}}},_commEvtManager.tracker_refresh=function(e,t){try{e.is_inprogress()&&angular.isDefined(e.miniscore)&&e.miniscore&&0<(miniscore_over=e.miniscore.overs)&&(_commEvtManager.refreshEvts.current_over=parseFloat(miniscore_over),_commEvtManager.refreshEvts.current_ball=parseInt(Math.floor(10*_commEvtManager.refreshEvts.current_over)%10),1<=_commEvtManager.refreshEvts.current_over)&&angular.forEach(["pv","ads"],function(e){parseInt(_commEvtManager.refreshEvts[e].refresh_ball)==parseInt(_commEvtManager.refreshEvts.current_ball)?(_commEvtManager.refreshEvts[e].is_trackable=!0,_commEvtManager.refreshEvts[e].track_count++):(_commEvtManager.refreshEvts[e].is_trackable=!1,_commEvtManager.refreshEvts[e].has_tracked=!1),_commEvtManager.refreshEvts[e].is_trackable&&!_commEvtManager.refreshEvts[e].has_tracked&&(2<=_commEvtManager.refreshEvts[e].track_count&&_commEvtManager.refreshEvts[e].callback(),_commEvtManager.refreshEvts[e].is_trackable=!1,_commEvtManager.refreshEvts[e].has_tracked=!0)})}catch(e){a.cblog.exception(e,"COMM Event Tracker")}}}]),CBCommentary.service("matchProviderApi",["MatchApi","Miniscore","Commentary","CarouselVideo","commentaryEventManagerApi","$sce","$rootScope","storage",function(t,c,a,n,e,o,d,i){_matchProviderApi=this;var u={TEST:1,ODI:2,T20:3},r=0;_matchProviderApi.eventManager=e,_matchProviderApi.get_match=function(a,n){!angular.isUndefined(n)&&null!=n||(n=new t);try{var o,i,r,s,e,l;a&&(n.id=a.matchHeader.matchId,n.name=a.matchHeader.matchDescription,n.state=a.matchHeader.state.toLowerCase(),n.state=n.state.replace(/\s/g,""),n.type=a.matchHeader.matchFormat,n.type_id=u[a.matchHeader.matchFormat],n.status=a.matchHeader.status,n.is_live_coverage=!a.matchHeader.isMatchNotCovered,n.start_time=a.matchHeader.matchStartTimestamp,n.end_time=a.matchHeader.matchCompleteTimestamp,n.toss=a.matchHeader.tossResults,n.responseLastUpdated=a.responseLastUpdated,n.team1=a.matchHeader.team1,n.team2=a.matchHeader.team2,n.seriesName=a.matchHeader.seriesDesc,null!=a.matchHeader.playersOfTheMatch&&0<a.matchHeader.playersOfTheMatch.length&&(n.mom=[],angular.forEach(a.matchHeader.playersOfTheMatch,function(e){angular.isUndefined(e)||(angular.isUndefined(e.fullName)&&(e.fullName=e.name||""),e.profileUrl=_matchProviderApi.get_player_profile_url(e.id,e.fullName),n.mom.push(e))})),null!=a.matchHeader.playersOfTheSeries&&0<a.matchHeader.playersOfTheSeries.length&&(n.mos=[],angular.forEach(a.matchHeader.playersOfTheSeries,function(e){angular.isUndefined(e)||(angular.isUndefined(e.fullName)&&(e.fullName=e.name||""),e.profileUrl=_matchProviderApi.get_player_profile_url(e.id,e.fullName),n.mos.push(e))})),angular.isUndefined(a.miniscore)||(n.miniscore=new c,s=r=i=o="",angular.isUndefined(a.miniscore.matchScoreDetails)||(n.status=a.miniscore.matchScoreDetails.customStatus,0<a.miniscore.matchScoreDetails.inningsScoreList.length&&(e=1==a.miniscore.matchScoreDetails.inningsScoreList[0].inningsId?a.miniscore.matchScoreDetails.inningsScoreList:a.miniscore.matchScoreDetails.inningsScoreList.reverse(),angular.forEach(e,function(e){var t="";2<e.inningsId&&(t+=" & "),t+=e.score,10!=e.wickets&&(t+="/"+e.wickets),1==e.isDeclared&&(t+=" d"),1==e.isFollowOn&&(t+=" (f/o)"),team_overs=.5<e.overs-Math.floor(e.overs)?Math.ceil(e.overs):e.overs,"HUN"==n.type&&(team_overs=e.ballNbr),l=angular.isUndefined(a.miniscore.batTeam)?angular.isUndefined(a.miniscore.matchScoreDetails.inningsScoreList[1])?0:a.miniscore.matchScoreDetails.inningsScoreList[1].batTeamId:a.miniscore.batTeam.teamId,e.batTeamId!=l?(n.miniscore.bowling.short_name=e.batTeamName,r+=t,"TEST"!=a.miniscore.matchScoreDetails.matchFormat&&(i=" ("+team_overs+")")):(n.miniscore.batting.short_name=e.batTeamName,o+=t,s=" ("+team_overs+")")}),n.miniscore.batting.score=o,n.miniscore.bowling.score=r,"TEST"==a.miniscore.matchScoreDetails.matchFormat&&"complete"==a.miniscore.matchScoreDetails.state.toLowerCase()||(n.miniscore.batting.score+=s,n.miniscore.bowling.score+=i))),n.miniscore.batsman=[],angular.isUndefined(a.miniscore.batsmanStriker)||""==a.miniscore.batsmanStriker.batName||(a.miniscore.batsmanStriker.profileUrl=_matchProviderApi.get_player_profile_url(a.miniscore.batsmanStriker.batId,a.miniscore.batsmanStriker.batName),n.miniscore.batsman.push(a.miniscore.batsmanStriker)),angular.isUndefined(a.miniscore.batsmanNonStriker)||""==a.miniscore.batsmanNonStriker.batName||(a.miniscore.batsmanNonStriker.profileUrl=_matchProviderApi.get_player_profile_url(a.miniscore.batsmanNonStriker.batId,a.miniscore.batsmanNonStriker.batName),n.miniscore.batsman.push(a.miniscore.batsmanNonStriker)),n.miniscore.bowler=[],angular.isUndefined(a.miniscore.bowlerStriker)||""==a.miniscore.bowlerStriker.bowlName||(a.miniscore.bowlerStriker.profileUrl=_matchProviderApi.get_player_profile_url(a.miniscore.bowlerStriker.bowlId,a.miniscore.bowlerStriker.bowlName),n.miniscore.bowler.push(a.miniscore.bowlerStriker)),angular.isUndefined(a.miniscore.bowlerNonStriker)||""==a.miniscore.bowlerNonStriker.bowlName||"HUN"==n.type||(a.miniscore.bowlerNonStriker.profileUrl=_matchProviderApi.get_player_profile_url(a.miniscore.bowlerNonStriker.bowlId,a.miniscore.bowlerNonStriker.bowlName),n.miniscore.bowler.push(a.miniscore.bowlerNonStriker)),angular.isUndefined(a.miniscore.overSummaryList)||null==a.miniscore.overSummaryList||(n.miniscore.over_summary=a.miniscore.overSummaryList),n.miniscore.rrr=a.miniscore.requiredRunRate,n.miniscore.crr=a.miniscore.currentRunRate,n.miniscore.rpb=a.miniscore.runsPerBall,n.miniscore.rrpb=a.miniscore.requiredRunsPerBall,n.miniscore.partnership=a.miniscore.partnerShip,n.miniscore.previous_overs_string=a.miniscore.recentOvsStats,n.miniscore.target=a.miniscore.target,null!=a.miniscore.lastWicket&&(n.miniscore.last_wicket=a.miniscore.lastWicket),null!=a.miniscore.oversRem&&(n.miniscore.overs_left=a.miniscore.oversRem),null!=a.miniscore.latestPerformance[0]&&(n.miniscore.latestPerformance=a.miniscore.latestPerformance[0]),angular.isUndefined(a.miniscore.overs))||(n.miniscore.overs=.5<n.miniscore.overs-Math.floor(n.miniscore.overs)?Math.ceil(n.miniscore.overs):n.miniscore.overs),null!=a.commentaryList&&0<a.commentaryList.length&&(angular.forEach(a.commentaryList,function(e){_commentary=_matchProviderApi.get_commmentary(e),n.commentary[_commentary.timestamp]=null,n.commentary[_commentary.timestamp]=_commentary,null==n.currentInningsId&&(n.currentInningsId=null!=e.inningsId?e.inningsId:0),0==Object.keys(n.full_commentary.commentary).length&&(n.currentInningsId=null!=e.inningsId&&e.inningsId<=n.currentInningsId?e.inningsId:n.currentInningsId),null==n.lastTimeStamp?n.lastTimeStamp=null!=e.timestamp?e.timestamp:null:n.lastTimeStamp=null!=e.timestamp&&e.timestamp<n.lastTimeStamp?e.timestamp:n.lastTimeStamp}),null==n.commListLength)&&(n.commListLength=a.commentaryList.length),null!=a.commentarySnippetList&0<a.commentarySnippetList.length&&angular.forEach(a.commentarySnippetList,function(e){"Comment - User"!=e.infraType&&(_commentary=_matchProviderApi.get_commmentary_snippet(e),n.commentary[_commentary.timestamp]=null,n.commentary[_commentary.timestamp]=_commentary)}),n.timestamps=Object.keys(n.commentary).sort().reverse(),null!=a.matchVideos&0<a.matchVideos.length)&&angular.forEach(a.matchVideos,function(e){e=_matchProviderApi.get_carousel_match_video(e);n.carouselVideoid.includes(e.videoId)||n.carouselVideoid.push(e.videoId),n.carouselVideos[e.videoId]=e})}catch(e){d.cblog.exception(e,"Match Center - Parsing")}return n},_matchProviderApi.get_commmentary=function(t){return(_commentary=new a).o_no=angular.isUndefined(t.overNumber)?0:t.overNumber,_commentary.ball_no=angular.isUndefined(t.ballNbr)?0:t.ballNbr,_commentary.timestamp=t.timestamp,_commentary.i_id=angular.isUndefined(t.inningsId)?0:t.inningsId,_commentary.comm=_matchProviderApi.get_comm_line(t),_commentary.comm=_commentary.comm,_commentary.comm=o.trustAsHtml(_commentary.comm),_commentary.evt=t.event.split(","),angular.forEach(_commentary.evt,function(e){null!=e&&"over-break"==e&&(_commentary.over_seperator=t.overSeparator),"none"!=e.toLowerCase()&&"over-break"!=e.toLowerCase()&&_commentary.event_plugin.push(e.toLowerCase())}),0<t.ballNbr&&t.ballNbr%5==0&&r!=t.bowlerStriker.bowlId&&_commentary.evt.push("hun-overbreak"),0<t.ballNbr&&!angular.isUndefined(t.bowlerStriker.bowlId)&&0<t.bowlerStriker.bowlId&&(r=t.bowlerStriker.bowlId),_commentary},_matchProviderApi.get_commmentary_snippet=function(e){switch((_commentary=new a).timestamp=e.timestamp,e.infraType){case"Content Promotion - Video":var t=angular.isDefined(e.planId)?e.planId:0;_commentary.evt="Plugin:video",_commentary.comm=e.headline,_commentary.comm=o.trustAsHtml(_commentary.comm),_commentary.geo=e.videoGeo,_commentary.videoId=e.mappingId,_commentary.cbvideoImageId=e.imageId,angular.isUndefined(e.url)?(_commentary.cbvideoId=e.videoId+"/"+cb_sanitize(e.headline),_commentary.videoUrl="https://www.cricbuzz.com/cricket-videos/"+e.videoId+"/"+cb_sanitize(e.headline)):(_commentary.cbvideoId=e.url.replace("https://www.cricbuzz.com/cricket-videos/",""),_commentary.cbvideoId=_commentary.cbvideoId.replace("http://www.cricbuzz.com/cricket-videos/",""),_commentary.videoUrl=e.url),"Fantasy Handbook"===e.videoType&&(_commentary.videoUrl=_matchProviderApi.get_fantasy_url(e.tags)),_commentary.planId=e.planId||0,_commentary.isVideoLive=e.isLive||0,_commentary.show_video=!0,_commentary.videoType=e.videoType,_commentary.matchVideo="Wicket"==e.videoType||"Four"==e.videoType||"Six"==e.videoType||"Highlights"==e.videoType,0<t&&(_commentary.show_video=!1,void 0!==(t=i.cookie.get("uState")))&&"ACTIVE"==t&&(_commentary.show_video=!0),_commentary.matchVideo&&(_commentary.timestamp=e.timestamp-1);break;case"Content Promotion - Article":_commentary.evt="Plugin:news",_commentary.comm=e.comm,_commentary.newsURL=e.url,_commentary.imageId=e.imageId,_commentary.headline=e.headline,_commentary.content=e.content,_commentary.planId=e.planId||0;break;case"Comment - Expert":_commentary.evt="Plugin:comments",_commentary.headline=e.headline,_commentary.content=e.content}return _commentary},_matchProviderApi.get_carousel_match_video=function(e){return(_video=new n).headline=angular.isDefined(e.headline)?e.headline:"",_video.headline_comm=angular.isDefined(e.headline)?o.trustAsHtml(e.headline):"",_video.videoId=angular.isDefined(e.videoId)?e.videoId:0,_video.imageId=angular.isDefined(e.imageId)?e.imageId:0,_video.videoGeo=angular.isDefined(e.videoGeo)?e.videoGeo:[],_video.planId=angular.isDefined(e.planId)?e.planId:0,_video.isPremiumFree=angular.isDefined(e.isPremiumFree)?e.isPremiumFree:0,_video.isLive=!!angular.isDefined(e.isLive),_video.videoType=angular.isDefined(e.videoType)?e.videoType:"",_video.tags=angular.isDefined(e.tags)?e.tags:[],_video},_matchProviderApi.get_comm_line=function(e){var o,i,r=(r=e.commText).replace(/\\n/g,"<br>");return angular.forEach(e.commentaryFormats,function(a,n){angular.forEach(a.formatValue,function(e,t){switch(o=null,n){case"bold":o="<b>"+e+"</b>";break;case"italic":o="<i>"+e+"</i>";break;case"boldItalic":o="<b><i>"+e+"</i></b>"}null!=o&&(i=(i=a.formatId[t]).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=r.replace(new RegExp(i,"g"),o))})}),r},_matchProviderApi.get_player_profile_url=_matchProviderApi.get_fantasy_related_tag=function(e){return"match"===e.itemType},_matchProviderApi.get_live_stream_related_tag=_matchProviderApi.get_fantasy_url=function(e){e=e.filter(_matchProviderApi.get_fantasy_related_tag);return"/cricket-fantasy-handbook/"+e[0].itemId+"/"+cb_sanitize(e[0].itemName)},_matchProviderApi.get_live_stream_url=function(e){e=e.filter(_matchProviderApi.get_live_stream_related_tag);return"/live-cricket-stream/"+e[0].itemId+"/"+cb_sanitize(e[0].itemName)}}]),CBCommentary.controller("matchCenterApi",["$rootScope","$scope","$http","$q","$timeout","matchProviderApi","MatchApi","GEO","activeWindow",function(n,o,t,e,a,i,r,s,l){o.matchId=0,o.hys_enabled=!1,o.isMiniscoreRendered=!1,o.isCommentaryRendered=!1,o.seriesId=0,o.isFormatHundred=!1,o.user={},o.match_base={},o.settings={defer:null,promise:null,http:null,params:{},base_path:"",url:"",call_count:0,retry_count:0,refreshId:0,refresh:25e3,timeout:3e4,force_refresh:!1,invoked_force_update:!1,video_geo:{},video_enabled:!1,pull_geo:{},mode:"pull"},o.match=new r;var c=!(o.match.latest_video={timestamp:0}),d=(o.enable_rendered_template=function(){o.$on("$includeContentLoaded",function(e,t){"miniscore"==t&&a(function(){o.isMiniscoreRendered=!0},50),"commentary"==t&&(o.isCommentaryRendered=!0)}),a(2e3)},o.reset_comm_line=function(){o.match.full_commentary.commentary={},o.match.full_commentary.timestamps=[],o.match.full_commentary.from=0,o.match.full_commentary.counts=10,o.match.full_commentary.fetched=!1,o.match.timestamps=null,o.match.timestamps=[],o.match.commentary=null,o.match.commentary={}},o.manage_match_center=function(){angular.isDefined(o.match_base.settings)&&(angular.extend(o.settings,o.match_base.settings),s.isGeolocation(o.settings.pull_geo)&&(o.settings.mode="pull"),s.isGeolocation(o.settings.video_geo))&&(o.settings.video_enabled=!0,c||o.enable_video_services());function e(){var e=void 0!==o.match_base.responseLastUpdated?o.match_base.responseLastUpdated:1;switch(o.match.responseLastUpdated<e?o.match=i.get_match(o.match_base,o.match):60<o.match.responseLastUpdated-e&&setTimeout(function(){"undefined"!=typeof firebase&&firebase.analytics().logEvent("cb-api-error",{"cb-screen-name":"cb-web-commentary","time-diff":o.match.responseLastUpdated-e,issue:"stale_feed"})},1e3),i.eventManager.tracker_refresh(o.match),o.match.state){case"inprogress":o.settings.refresh=25e3;break;case"complete":72e5<Date.now()-o.match.end_time&&(o.settings.mode="stop");break;case"upcoming":case"preview":72e5<o.match.start_time-Date.now()&&(o.settings.refresh=3e4);break;default:o.settings.refresh=25e3}""!=(page_title=o.match.get_page_title_for_comm())&&(document.title=page_title)}o.settings.invoked_force_update?(o.reset_comm_line(),o.settings.invoked_force_update=!1,a(e,10)):e()},o.enable_rendered_template(),0),u=(o.enable_video_services=function(){o.settings.video_enabled=!0,c=!0,o.fetch_videos(),_ele("body").append("<style>.kaltura-play{display:inline-block;}</style>")},o.fetch_videos=function(){a.cancel(d),o.settings.video_enabled&&t({method:"GET",cache:!1,async:!0,url:"/api/match/"+o.matchId+"/commnetary-video"}).then(function(e){var t=e.data,e=e.status;null!=t&&200==e&&angular.forEach(t,function(e,t){null!=o.match.full_commentary.commentary[t]&&(o.match.full_commentary.commentary[t].videoId=e,o.match=matchProvider.set_latest_video(o.match,o.match.full_commentary.commentary[t])),null!=o.match.commentary[t]&&(o.match.commentary[t].videoId=e,o.match=matchProvider.set_latest_video(o.match,o.match.commentary[t]))})});var e="push"==o.settings.mode?o.settings.refresh:3e4;d=a(function(){o.fetch_videos()},e)},o.fetch_commentary_pagination=function(){var a="#full_commentary_btn",e=o.settings.base_path+"/api/cricket-match/commentary-pagination/"+o.matchId+"/"+o.match.currentInningsId+"/"+o.match.lastTimeStamp;o.isFormatHundred&&(e=o.settings.base_path+"/api/cricket-match/hcommentary-pagination/"+o.matchId+"/"+o.match.currentInningsId+"/"+o.match.lastTimeStamp),_ele(a).html('<div class="spinner"></div>'),t({method:"GET",cache:!1,async:!0,url:e}).then(function(e){var t=e.data,e=e.status;null!=t&&200==e?(null!=t.commentaryList&&0<t.commentaryList.length&&(angular.forEach(t.commentaryList,function(e){e.timestamp!=o.match.lastTimeStamp&&(_commentary=_matchProviderApi.get_commmentary(e),o.match.full_commentary.commentary[_commentary.timestamp]=null,o.match.full_commentary.commentary[_commentary.timestamp]=_commentary,o.match.currentInningsId=null!=e.inningsId?e.inningsId:0,o.match.lastTimeStamp=null!=e.timestamp&&e.timestamp<o.match.lastTimeStamp?e.timestamp:o.match.lastTimeStamp)}),o.match.commListLength=t.commentaryList.length),null!=t.commentarySnippetList&0<t.commentarySnippetList.length&&angular.forEach(t.commentarySnippetList,function(e){"Comment - User"!=e.infraType&&(_commentary=_matchProviderApi.get_commmentary_snippet(e),o.match.full_commentary.commentary[_commentary.timestamp]=null,o.match.full_commentary.commentary[_commentary.timestamp]=_commentary)}),scrollTop=window.pageYOffset||document.documentElement.scrollTop,window.onscroll=o.match.full_commentary.timestamps=Object.keys(o.match.full_commentary.commentary).sort().reverse(),setTimeout(500),n.$broadcast("active-window-inactive",a),u()):_ele(a).remove()},},o.fetch_commentary_api=function(){try{""!=o.settings.url&&(o.settings.defer=e.defer(),o.settings.http=t({method:"GET",cache:!1,async:!0,url:o.settings.url,params:o.settings.params,timeout:o.settings.timeout,cancel:o.settings.defer}),o.settings.promise=o.settings.http.then(function(e){var t=e.data,e=(angular.isUndefined(e.data.hys)||"true"!=e.data.hys||(o.hys_enabled=!0),e.status);null!=t&&200==e?(o.match_base=t,o.manage_match_center()):o.settings.retry_count++,o.settings.call_count++,o.call_commentary_api()},function(e){o.settings.retry_count++,o.settings.refreshId=a(function(){o.call_commentary_api()},o.settings.refresh)}),o.settings.promise.abort=function(){o.settings.defer.resolve()})}catch(e){o.cblog.exception(e,"Match Center - HTTP CALL"),o.call_commentary_api()}},o.pull_commentary=function(){o.isFormatHundred?o.settings.url=o.settings.base_path+"/api/cricket-match/hcommentary/"+o.matchId:o.settings.url=o.settings.base_path+"/api/cricket-match/commentary/"+o.matchId,o.fetch_commentary_api()},o.push_commentary_mode=function(){o.settings.url=o.settings.base_path+"/match-api/"+o.matchId+"/commentary-push.json",o.fetch_commentary_api()},o.refresh=function(){o.reset_comm_line(),"push"==o.settings.mode&&null!=o.settings.promise&&o.settings.promise.abort(),o.settings.call_count=0,o.call_commentary_api()},o.call_commentary_api=function(){a.cancel(o.settings.refreshId),o.settings.force_refresh&&!o.settings.invoked_force_update?(o.settings.call_count=1,o.settings.retry_count=0,o.settings.force_refresh=!1,o.settings.invoked_force_update=!0,o.settings.refreshId=a(function(){o.pull_commentary()},o.settings.refresh)):0==o.settings.call_count||3<=o.settings.retry_count?(o.pull_commentary(),o.settings.retry_count=0):"pull"==o.settings.mode?o.settings.refreshId=a(function(){o.pull_commentary()},o.settings.refresh):"push"==o.settings.mode&&(o.settings.refreshId=a(o.settings.refresh),o.push_commentary_mode())},function(){var e=new l("#full_commentary_btn"),t=0;e.setHeight(100),e.showElement(function(){0<o.match.commListLength&&(a.cancel(t),t=a(500))})});o.add_rm_cls=function(e,t){e=_ele(e);"show"==t?e.hasClass("disp-none")?e.removeClass("disp-none"):e.addClass("disp-blck"):e.hasClass("disp-blck")?e.removeClass("disp-blck"):e.addClass("disp-none")},o.onload=function(){0<parseInt(matchId)&&(o.matchId=matchId,angular.isDefined(matchFormat)&&"HUN"==matchFormat&&(o.isFormatHundred=!0),o.call_commentary_api())},o.get_comm_class=function(e){var t="cb-col cb-col-100";return angular.isDefined(e.o_no)&&null!=e.o_no&&0!=e.o_no&&(t="cb-col cb-col-90"),t=angular.isDefined(e.ball_no)&&null!=e.ball_no&&0!=e.ball_no?"cb-col cb-col-90":t},o.$evalAsync(function(){o.onload()})}]),CBCommentary.controller("CBMatchParty",["$scope","$http","Analytics","storage","$rootScope",function(t,e,a,n,o){t.tab_selected="commentary",t.navtab_clicked=]),CBCommentary.controller("CBLiveStream",["$rootScope","$timeout","$scope","$http","$q","$compile","$window","CBAuthService","matchProviderApi","activeWindow",function(e,t,r,i,s,n,a,o,l,c){r.matchId=0,r.seriesId=0,r.freeMinutesEnabled=!1,r.stepCounter=0,r.userFreeBalance=0,r.extraSeconds=0,r.totalElapsedTime=0,r.callCounter=0,r.callCounterTick=0,r.currentMatchVideoId=0,r.liveStream=[],r.languages=[],r.videoTypeTags=[],r.nextVideos=[],r.playingVideoType=null,r.miniscorecard=null,r.matchVideos=[],r.filteredMatchVideos=null,r.planDetails=null,r.notice=null,r.chatDetails=null,r.currentMatchVideo=null,r.isLoading=!0,r.showLanguageModal=!1,r.isUserVerified=!1,r.timeOver=!1,r.showLiveButton=!1,r.isSubScreenReady=!1,r.showSubscribeScreen=!1,r.isLoadingHighlights=!1,r.playVideo=!1,r.noMoreVideos=!0,r.selectedVideoTypeTag="all",r.lastTimeStamp=0,r.showLiveChat="true"===localStorage.getItem("isLiveChatEnable"),r.showAdBlockerWarning="read"!==localStorage.getItem("blockerWarning"),r.selectedLanguage=localStorage.getItem("streamLanguage")?localStorage.getItem("streamLanguage"):"English",r.availableStreamOptions={},r.selectedQuality=localStorage.getItem("streamQuality")||null,r.videoToPlay=null,r.showLanguageModal=!1,r.showQualityModal=!1,r.getUserState=r.getPlayerProfileUrl=r.userState=r.getUserState(),r.getPlanDetails=function(a){return s(function(t,e){i({method:"GET",url:"/cb-plus/plan-details/"+a}).then(function(e){t(e.data)},function(){console.log("Plan Details Api Call Error"),e()})})},r.getMiniscorecard=function(a){return s(function(t,e){i({method:"GET",url:"/api/cricket-match/"+a+"/miniscore"}).then(function(e){t(e.data)},function(){console.log("Miniscore Api Call Error"),e()})})},r.getMatchHighlights=function(a,n,o){return s(function(t,e){i({method:"GET",url:"/api/match/"+a+"/highlights/"+n+"/"+o}).then(function(e){t(e.data)},function(){console.log("Match Highlights Api Call Error"),e()})})},r.verifyAccess=function(a){return s(function(t,e){i({method:"POST",url:"/cbplus/auth/user/verify-access",data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken"),source:"liveMatchVideos",count:a,sourceId:r.videoToPlay.video_id||r.videoToPlay.id,matchId:r.matchId,seriesId:r.seriesId}}).then(function(e){"14001"===e.data.errorCode&&o.verify_access_token("live-cricket-stream-page","liveStream").then(,r.userState=r.getUserState(),"NA"===r.userState&&null!=e.data.notice&&e.data.balance<=0&&(r.timeOver=!0,localStorage.watchTime=0,r.showSubscribeScreen=!0),t(e.data)},function(){console.log("Verify Access Api Call Error"),e()})})},r.renderLiveStream=function(a,n){return s(function(t,e){i({method:"GET",url:"/cb-plus/live-cricket-feed/"+a+"/"+n}).then(function(e){t(e)},function(){console.log("Render Live Stream Api Call Error"),e()})})},r.getLiveFeedData=function(a){return s(function(t,e){i({method:"GET",url:"/api/match/"+a+"/live-feed"}).then(function(){console.log("Get Live Feed Api Call Error"),e()})})},r.renderMatchHighlight=function(a){return s(function(t,e){i({method:"GET",url:"/api/match/"+a+"/highlight-video"}).then(function(){console.log("Video Detail Api Call Error"),e()})})},r.renderLiveChatPartial=function(){return s(function(a,e){i({method:"GET",url:"/api/match/live-stream-chat"}).then(function(e){a(e);var t=document.getElementById("live-stream-chat");t&&(t.innerHTML=e.data),n(t)(r)},function(){console.log("Live Stream Chat Api Call Error"),e()})})},r.renderVideo=function(e){document.getElementById("cb-live-stream").innerHTML="",n(_ele("#cb-live-stream").append(e.data))(r);e=Array.prototype.slice.call(document.getElementById("cb-live-stream").getElementsByTagName("script"));r.createAppendVideo(e)},r.createAppendVideo=function(e){for(var t=0;t<e.length;t++){var a=document.createElement("script");a.appendChild(document.createTextNode(e[t].innerHTML)),e[t].parentNode.replaceChild(a,e[t])}},r.loadMatchHighlightVideo=function(t,e){r.playingVideoType="highlight",r.showLiveButton="MatchReplay"!==r.videoToPlay.videoType,r.showVideo=!1,r.showQualityLangBtn=!("MatchReplay"!==r.videoToPlay.videoType||!(1<r.languages.length||Object.keys(r.availableStreamOptions).includes(r.selectedLanguage)&&1<r.availableStreamOptions[r.selectedLanguage].length)),("MatchReplay"===r.videoToPlay.videoType?r.renderLiveStream(t,e):r.renderMatchHighlight(e)).then(function(e){r.userState=r.getUserState(),"NA"===r.userState||"NOTSET"===r.userState?0<r.videoToPlay.planId&&!r.videoToPlay.isPremiumFree||"NOTSET"===r.userState&&r.videoToPlay.isPremiumFree&&r.videoToPlay.isLoginRequired?(r.showSubscribeScreen=!0,r.playVideo=!1,r.showVideo=!1):(r.showSubscribeScreen=!1,r.playVideo=!0,r.showVideo=!0):"ACTIVE"===r.userState&&(r.showSubscribeScreen=!1,r.playVideo=!0,r.showVideo=!0),setTimeout(1e3)})},r.loadLiveMatchVideo=function(o,e){r.playingVideoType="live",r.showVideo=!1,r.showLiveButton=!1,e||(r.videoToPlay=r.liveStreamVideos.find(||r.liveStreamVideos[0]),r.showQualityLangBtn=!!(1<r.languages.length||Object.keys(r.availableStreamOptions).includes(r.selectedLanguage)&&1<r.availableStreamOptions[r.selectedLanguage].length),r.currentMatchVideoId=r.videoToPlay.id,r.chatDetails=void 0!==r.videoToPlay.chat?r.videoToPlay.chat:null,r.showLiveChat="true"===localStorage.getItem("isLiveChatEnable");var t=e||r.videoToPlay.id,e=r.matchVideos.filter(;0!=e.length&&(r.highlightAsStream=e[0],r.wasLastHighlightMatchStream=!0,r.filteredMatchVideos=r.filteredMatchVideos.filter(),"NOTSET"===r.userState&&(r.videoToPlay.planId&&r.videoToPlay.isPremiumFree&&!r.videoToPlay.isLoginRequired?(r.isLoading=!1,r.playVideo=!0,r.showSubscribeScreen=!1,r.showVideo=!0,r.renderLiveStream(o,t).then():(r.isLoading=!1,r.playVideo=!1,r.showVideo=!1,r.showSubscribeScreen=!0)),["NA","ACTIVE"].includes(r.userState)&&(r.isLoading=!1,r.playVideo=!0,r.showSubscribeScreen=!1,r.showVideo=!0,r.renderLiveStream(o,t).then(function(n){r.videoToPlay.planId&&r.videoToPlay.isPremiumFree?setTimeout(function(){r.renderVideo(n,o)},1e3):r.freeMinutesEnabled&&"NA"===r.userState||"ACTIVE"===r.userState?r.verifyAccess(localStorage.watchTime||0).then(function(e){var t,a;setTimeout(1e3),null===e.notice&&"NA"===r.userState?(r.userFreeBalance=e.balance,a=(new Date).getTime()+1e3*r.userFreeBalance-(new Date).getTime(),t=Math.floor(a%36e5/6e4),a=Math.floor(a%6e4/1e3),document.getElementById("counter").innerHTML=t+":"+(9<a?a:"0"+a)):null!==e.notice&&"NA"===r.userState&&(r.playVideo=!1,r.showVideo=!1,r.showSubscribeScreen=!0)}):(r.playVideo=!1,r.showVideo=!1,r.showSubscribeScreen=!0)}))},r.loadMiniscoreAndHighlights=function(o){return s(function(t,e){var a=r.getMiniscorecard(o),n=r.getMatchHighlights(o,"all",0);s.all([a,n]).then(function(e){r.miniscorecard=e[0],r.matchVideos=e[1][0],r.videoTypeTags=e[1][1],r.lastTimeStamp=e[1][2],r.filteredMatchVideos=r.matchVideos,r.callNextVideos(o,"all",r.lastTimeStamp),t()},})},r.renderWatchTab=function(a,n){return s(function(e,t){switch(n){case"ACTIVE":r.isLoading=!1,r.playVideo=!0,localStorage.removeItem("watchTime"),"MatchStream"===r.videoToPlay.videoType?r.loadLiveMatchVideo(a,r.videoToPlay.id):r.loadMatchHighlightVideo(a,r.videoToPlay.id);break;case"NOTSET":r.isLoading=!1,"MatchStream"===r.videoToPlay.videoType?r.loadLiveMatchVideo(a,r.videoToPlay.id):0<r.videoToPlay.planId&&r.videoToPlay.isPremiumFree?(r.playVideo=!0,r.loadMatchHighlightVideo(a,r.videoToPlay.id)):0<r.videoToPlay.planId&&!r.videoToPlay.isPremiumFree&&(r.showSubscribeScreen=!0);break;case"NA":r.isLoading=!1,r.secondsToMidnight()<=0&&localStorage.removeItem("watchTime"),"MatchStream"===r.videoToPlay.videoType?(r.playVideo=!0,r.loadLiveMatchVideo(a,r.videoToPlay.id)):0<r.videoToPlay.planId&&r.videoToPlay.isPremiumFree?(r.playVideo=!0,r.loadMatchHighlightVideo(a,r.videoToPlay.id)):0<r.videoToPlay.planId&&!r.videoToPlay.isPremiumFree&&(r.isPremiumVideo=!0,r.showSubscribeScreen=!0)}e()})},r.secondsToMidnight=function(){return 60*(24-(new Date).getHours()-1)*60+60*(60-(new Date).getMinutes()-1)+(60-(new Date).getSeconds())},r.initLiveStream=function(t){o.setWithExpiry("ContentURL",window.location.href,300),r.secondsToMidnight()<=0&&localStorage.blockerWarning&&(r.showAdBlockerWarning=!0,localStorage.removeItem("blockerWarning")),r.isLoadingScoreAndHighlights=!0,r.loadMiniscoreAndHighlights(t).then(function(){r.isLoadingScoreAndHighlights=!1}),r.isLoading=!0;var e=o.verify_access_token("live-cricket-stream-page","liveStream"),a=r.getLiveFeedData(t);s.all([e,a]).then(function(e){null==e[1]?(r.isLoading=!1,r.showFallbackMessage=!0):(r.liveStream=e[1],r.liveStreamVideos=e[1].videos,r.userState=r.getUserState(),r.languages=r.getAvailableStreamLanguages(r.liveStreamVideos),r.availableStreamOptions=r.getAvailableStreamOptions(r.liveStreamVideos),r.videoToPlay=r.getStreamVideo(),r.selectedLanguage=r.videoToPlay.language,r.selectedQuality=r.videoToPlay.quality,r.isMatchStreamAvailable="MatchStream"===r.videoToPlay.videoType,r.currentMatchVideo=r.videoToPlay,r.thumbnailUrl="https://static.cricbuzz.com/a/img/v1/950x535/i1/c"+r.currentMatchVideo.imageId+"/live-stream-background.jpg",r.freeMinutesEnabled=r.videoToPlay.hasLivestreamFreeMinutes||!1,localStorage.setItem("streamLanguage",r.videoToPlay.language),localStorage.setItem("streamQuality",r.videoToPlay.quality),r.renderWatchTab(t,r.userState))}).catch(},r.openModal=function(e){"language"===e?r.showLanguageModal=!0:r.showQualityModal=!0},r.closeModal=function(e,t,a){"language"===e?t&&t.target!==document.getElementById("cb-language-modal")&&!a||(r.showLanguageModal=!1):t&&t.target!==document.getElementById("cb-quality-modal")&&!a||(r.showQualityModal=!1)},r.checkPremiumFreeStream=function(e){return r.availableStreamOptions[e].some(function(e){return e.premiumFree})},r.checkFreeMinutesAvailable=r.getLiveStreamSubscribeScreenData=function(e){o.setWithExpiry("ContentURL",window.location.href,300),r.showLoginButton=!("NOTSET"!==r.userState||!(r.videoToPlay.isLoginRequired&&r.videoToPlay.isPremiumFree||r.freeMinutesEnabled&&!r.videoToPlay.isPremiumFree)),r.isSubScreenReady=!0},r.refreshMiniscore=function(e){var t=setInterval(function(){r.getMiniscorecard(e).then(function(e){r.miniscorecard=e}),"Complete"===r.miniscorecard.matchHeader.state&&clearInterval(t),!0===r.timeOver&&clearInterval(t)},1e4)},r.refreshMatchHighlights=function(t){var e=setInterval(function(){"Complete"===r.miniscorecard.matchHeader.state&&clearInterval(e),!0===r.timeOver&&clearInterval(e),r.getMatchHighlights(t,r.selectedVideoTypeTag,0).then(function(e){0!=e[0].length&&r.lastTimeStamp!=e[2]&&(r.matchVideos=e[0],r.filteredMatchVideos=e[0],r.videoTypeTags=e[1],r.lastTimeStamp=e[2],r.callNextVideos(t,r.selectedVideoTypeTag,r.lastTimeStamp))})},12e4)},r.getAvailableStreamLanguages=function(e){var t=[];return e.forEach(,t},r.getVideoTypeColorCodes=function(e){return["wicket","highlights","highlight","four","six","hundred"].includes(e.toLowerCase())?{wicket:"cb-bg-live",highlight:"cb-highlight",highlights:"cb-highlight",four:"cb-four",six:"cb-six",hundred:"cb-hundred"}[e.toLowerCase()]:"cb-default-label-color"},r.selectLanguage=function(e,t,a){switch(e){case"modal":for(var n=document.getElementsByName("stream-language"),o=0;o<n.length;o++)n[o].checked&&(localStorage.setItem("streamLanguage",n[o].value),r.selectedLanguage=localStorage.getItem("streamLanguage")?localStorage.getItem("streamLanguage"):null,r.showLanguageModal=!1);break;case"dropdown":localStorage.setItem("streamLanguage",t),r.selectedLanguage=localStorage.getItem("streamLanguage")?localStorage.getItem("streamLanguage"):null;break;default:localStorage.setItem("streamLanguage","English"),r.selectedLanguage=localStorage.getItem("streamLanguage")?localStorage.getItem("streamLanguage"):null}r.videoToPlay=r.filterLiveVideoByLanguage(r.liveStreamVideos,r.selectedLanguage||"English")[0],document.getElementById("cb-live-stream").innerHTML="";e=document.getElementById("cb-match-party-wrap");e&&(e.innerHTML="<div class='cb-flex-row cb-align-center cb-spinner-custom-style'><div class='spinner cb-ftrd-item'></div></div>"),r.loadLiveMatchVideo(a,r.videoToPlay.id)},r.getAvailableStreamOptions=function(e){var t={};return e.map(function(e){Object.keys(t).includes(e.language)?t[e.language].push({quality:e.quality,qualityLabel:e.qualityLabel||e.quality,premiumFree:e.isPremiumFree||!1,freeMinutesAvailable:e.hasLivestreamFreeMinutes||!1}):t[e.language]=[{quality:e.quality,qualityLabel:e.qualityLabel||e.quality,premiumFree:e.isPremiumFree||!1,freeMinutesAvailable:e.hasLivestreamFreeMinutes||!1}]}),t},r.getStreamVideo=function(){if(!(1<r.liveStreamVideos.length))return r.liveStreamVideos[0];switch(r.userState){case"ACTIVE":return r.liveStreamVideos.find(function(e){return e.language===r.selectedLanguage})||r.liveStreamVideos[0];case"NA":return r.liveStreamVideos.find(function(e){return e.language===r.selectedLanguage&&e.isPremiumFree})||r.liveStreamVideos.find(function(e){return e.isPremiumFree})||r.liveStreamVideos.find(function(e){return e.language===r.selectedLanguage&&e.hasLivestreamFreeMinutes})||r.liveStreamVideos.find(function(e){return e.hasLivestreamFreeMinutes})||r.liveStreamVideos[0];case"NOTSET":return r.liveStreamVideos.find(||r.liveStreamVideos.find(function(e){return!e.isLoginRequired})||r.liveStreamVideos.find(function(e){return e.language===r.selectedLanguage&&e.isPremiumFree})||r.liveStreamVideos.find(function(e){return e.isPremiumFree})||r.liveStreamVideos.find(function(e){return e.hasLivestreamFreeMinutes})||r.liveStreamVideos[0];default:return r.liveStreamVideos[0]}},r.changeLivestreamVideo=function(e,t,a,n){r.closeModal(e,null),n&&"ACTIVE"!=r.userState&&(window.location.href="/premium-subscription/user/select-plan/cricbuzz-video"),"language"===e&&(r.selectedLanguage=t),"quality"===e&&(r.selectedQuality=t),r.showLanguagePopup=!1,r.showQualityPopup=!1,"ACTIVE"===r.userState?r.videoToPlay=r.liveStreamVideos.find(function(e){return e.language===r.selectedLanguage&&e.quality===r.selectedQuality})||r.liveStreamVideos.find(function(e){return e.language===r.selectedLanguage}):r.videoToPlay=r.liveStreamVideos.find(||r.liveStreamVideos.find(||r.liveStreamVideos.find(,r.selectedQuality=r.videoToPlay.quality,r.freeMinutesEnabled=r.videoToPlay.hasLivestreamFreeMinutes||!1,"MatchStream"===r.videoToPlay.videoType?r.loadLiveMatchVideo(a,r.videoToPlay.id):r.loadMatchHighlightVideo(a,r.videoToPlay.id),localStorage.setItem("streamLanguage",r.videoToPlay.language),localStorage.setItem("streamQuality",r.videoToPlay.quality)},r.changeVideoTypeTag=function(t,e){r.lastTimeStamp=0,r.isLoadingHighlights=!0,r.selectedVideoTypeTag=e,r.noMoreVideos=!0,r.getMatchHighlights(t,e,r.lastTimeStamp).then(function(e){r.matchVideos=e[0],r.filteredMatchVideos=e[0],r.lastTimeStamp=e[2],r.isLoadingHighlights=!1,r.callNextVideos(t,r.selectedVideoTypeTag,r.lastTimeStamp)})},r.callNextVideos=function(e,t,a){r.getMatchHighlights(e,t,a).then(function(e){r.nextVideos=e[0],0!=r.nextVideos.length&&(r.noMoreVideos=!1)})},r.onLiveChatButtonClick=function(){localStorage.setItem("isLiveChatEnable",!0),r.renderLiveChatPartial(),r.showLiveChat=!0},r.streamLiveMatch=function(e,t){r.videoToPlay.isPremiumFree||"live"===r.playingVideoType&&(t<=0&&(t=30),r.totalElapsedTime+=e,r.callCounterTick+=e,1<=r.callCounterTick&&(r.callCounter+=1,r.callCounterTick=0,"NA"==r.userState)&&(localStorage.watchTime=r.callCounter),r.callCounter==t&&(r.callCounter=0,localStorage.watchTime=0,r.verifyAccess(t).then(),"NA"===r.userState)&&r.startTimer()},r.startTimer=function(){var e=1e3*r.userFreeBalance,t=e,a=Math.floor(t%36e5/6e4),n=Math.floor(t%6e4/1e3);(t<=0||0===r.userFreeBalance)&&(r.verifyAccess(30),document.getElementById("cb-live-stream").innerHTML="",r.timeOver=!0,r.showVideo=!1,r.showSubscribeScreen=!0,r.currentMatchVideoId=0),1<=r.totalElapsedTime&&(t=e-r.totalElapsedTime,a=Math.floor(t%36e5/6e4),n=Math.floor(t%6e4/1e3),r.totalElapsedTime=0,--r.userFreeBalance),document.getElementById("counter")&&(document.getElementById("counter").innerHTML=a+":"+(9<n?n:"0"+n))},a.streamTimer=r.viewMatchHighlight=function(t,e,a,n,o){document.getElementById("matchCenter").scrollIntoView();var i=r.filteredMatchVideos.filter(function(e){return e.video_id==t});r.thumbnailUrl=i[0].image_url,r.currentMatchVideoId=["NA","NOTSET"].includes(r.userState)&&a&&!e?0:t,r.currentMatchVideo=i[0],a&&!e&&["NA","NOTSET"].includes(r.userState)&&"MatchStream"!=n?window.location.href=r.currentMatchVideo.url:(document.getElementById("cb-live-stream")&&(document.getElementById("cb-live-stream").innerHTML=""),"MatchStream"===n?(i=r.wasLastHighlightMatchStream?r.highlightAsStream:null,r.highlightAsStream=r.currentMatchVideo,r.videoToPlay=r.getStreamVideo(),r.freeMinutesEnabled=r.videoToPlay.hasLivestreamFreeMinutes||!1,r.wasLastHighlightMatchStream=!0,r.selectedLanguage=r.videoToPlay.language,r.selectedQuality=r.videoToPlay.quality,localStorage.setItem("streamLanguage",r.videoToPlay.language),localStorage.setItem("streamQuality",r.videoToPlay.quality),r.loadLiveMatchVideo(o,t),r.filteredMatchVideos=r.filteredMatchVideos.filter(function(e){return e.video_id!=t}),i&&r.filteredMatchVideos.unshift(i)):(r.wasLastHighlightMatchStream&&(r.filteredMatchVideos.unshift(r.highlightAsStream),r.wasLastHighlightMatchStream=!1,r.highlightAsStream=null),r.videoToPlay=r.currentMatchVideo,r.loadMatchHighlightVideo(o,t)))},r.filterLiveVideoByLanguage=function(e,t){return e.filter(function(e){return e.language===t})},r.filterLiveVideoById=r.formatOvers=function(e){return.5<e-Math.floor(e)?Math.ceil(e):e},r.getMoreHighlights=function(e){var t;0===r.nextVideos.length?r.noMoreVideos=!0:(r.filteredMatchVideos=r.filteredMatchVideos.concat(r.nextVideos),t=r.nextVideos.length-1,r.lastTimeStamp=r.nextVideos[t].timestamp,r.getMatchHighlights(e,r.selectedVideoTypeTag,r.lastTimeStamp).then(function(e){r.matchVideos=r.matchVideos.concat(e[0]),r.nextVideos=e[0],r.videoTypeTags=0!=e[0].length?e[1]:r.videoTypeTags,r.lastTimeStamp=e[2]}))},r.checkIfVideoIdExistsInLiveStream=r.checkForMultipleUserLogins=function(e){null!=e.notice&&0<e.balance&&a.vinteo_player.blockStream(e.notice.message)},r.closeAdBlockerWarning=function(){r.showAdBlockerWarning=!1}}]),angular.module("CBAds",["CBLib"])),_adops={},_adSkin={},_page_counter=1,_adsSequence={},_adsSequenceRead={},googletag=(CBAds.run(["$rootScope","DFP","adOps",function(e,t,a){_adops.load_page_count(),CBQueueOnLoad.push(function(){t.load_script()}),CBQueueOnLoad.push(,e.reload_ads=a.refresh_page_ads}]),googletag||{}),colombia=(googletag.cmd=googletag.cmd||[],googletag.cb_slots=googletag.cb_slots||[],googletag.cb_code=googletag.cb_code||[],colombia||{}),colombia_units=(colombia.fns=colombia.fns||[],{});function shosh_call(e){var t={target:"#shosh",height:300,timeout:15e3,button:[{text:"close",onclick:"shosh_call({height:0,timeout:0,button:[]})",ele_class:"",style:"z-index:10000;position:absolute;top:5px;right:10px;"}]},a=(null!=e&&angular.extend(t,e),_ele(t.target).css({margin:"5px 0px",display:"inline-block"}),animate_height(t.target,t.height),0<t.timeout&&setTimeout('animate_height("'+t.target+'",0);',t.timeout),(0==t.height||0<t.timeout)&&setTimeout(t.timeout+500),"");if(0<t.button.length)for(var n in t.button)a+='<a href="javascript:void(0);" rel="nofollow noreferrer" onclick="'+(btn=t.button[n]).onclick+'" style="'+btn.style+'" class="'+btn.ele_class+'">'+btn.text+"</a>";""!=a&&_ele(t.target).append(a)}function roll_over(e){var t={target:"#mpu",width:300,height:250,expanded_width:640,expanded_height:250,direction:"left",document:null},a=(null!=e&&angular.extend(t,e),""),n="",e=("left"==t.direction&&(a="marginLeft",n=t.width-t.expanded_width+"px"),"down"==t.direction&&_ele(t.target).parent().css({height:t.height+"px",position:"relative",marginBottom:"10px"}),document.querySelector(t.target));e.addEventListener("mouseover",function(){_ele(t.target+" > div").css({width:t.expanded_width+"px",height:t.expanded_height+"px"}),_ele(t.target+"> div > iframe").css({width:t.expanded_width+"px",height:t.expanded_height+"px"}),""!=a?(_ele(t.target).css({width:t.expanded_width+"px",height:t.expanded_height+"px"}),_ele(t.target).css(a,n)):(_ele(t.target).css({width:t.expanded_width+"px",height:t.height+"px"}),_ele(".cb-nav").css({"z-index":"-1001"}))}),e.addEventListener("mouseleave",function(){_ele(".cb-nav").css({"z-index":"1001"}),_ele(t.target+" > div").css({width:t.width+"px",height:t.height+"px"}),_ele(t.target+"> div > iframe").css({width:t.width+"px",height:t.height+"px"}),_ele(t.target).css({width:t.width+"px",height:t.height+"px"}),""!=a&&_ele(t.target).css(a,"0px")})}function cookie_set(e,t,a,n){var t=escape(t),o="domain=.cricbuzz.com;";return"production"!=ENVIRONMENT&&(o="domain="+top.location.host+";"),null!=n&&(o="domain="+n+";"),null!=a&&((n=new Date).setTime(n.getTime()+a),t+="; path=/;"+o+" expires="+n.toUTCString()),document.cookie=e+"="+t,document.cookie}unction roadblock(e,t){var a;_GEO.isGeolocation(t)&&(null==e&&(e=24),null!=(a=cookie_get(t="cb_roadblock"))&&1!=a||(cookie_set(t,a=2,60*e*60*1e3),top.location="/cricbuzz-ads/roadblock?path="+top.location))}function miniscore_branding(e,t,a){var n=_eleAll(".cb-mini-col"),o=_eleAll(".cb-col-scores"),i=_eleAll(".miniscore_branding");n&&n.css({border:"5px solid "+e,padding:"0px 10px",marginBottom:"15px"}),i&&i.css({background:e,margin:"-2px 0px 0px -1px"}),o&&o.css({margin:"0px -10px",width:"606px",height:t,background:e}),_ele("body").append("<style>.cb-scrs-wrp{color:"+a+" !important;padding:5px 0 0 5px;}.cb-scrs-wrp div,.cb-scrs-wrp span{color:"+a+" !important;}</style>"),_eleAll(".cb-comm-static").css("width","606px"),_eleAll(".cb-min-rcnt").css("width","606px"),_eleAll("#matchCenter h2.cb-text-gray").css("color",a),_ele('div[ng-controller="countdown"] div.miniscore_branding').css("margin","4px -4px -16px -4px")}CBAds.value("PAGE_ADS",{}),CBAds.value("NATIVE_ADS",{loaded_ids:{}}),CBAds.value("ADOPS_DEFS",{time:new Date}),CBAds.directive("adUnit",["PAGE_ADS","adUnitParam","$rootScope","adOps",function(s,l,e,c){function i(e,o,n){var t,i,r,a;null!=c.ads_defs.banners&&null!=(t=c.ads_defs.banners[n.id])&&(i=function(e){var t,a=new l(n.id);return a.adType="banners",o.css("display","block"),o.removeClass("ad-unit-nofill"),"COLOMBIA"==e.network.name?(t=1,void 0!==o.attr("data-position")&&(t=parseInt(o.attr("data-position"))+1,a.position=t),o.attr("data-slot",e.network.id),o.attr("data-position",t),o.addClass("colombia"),void 0!==colombia_units[n.id]&&(colombia_units[n.id].content=null),void 0!==e.content&&(a.content=e.content)):o.removeClass("colombia"),a.set_element(o),a.set(e),a},r=function(e){e.enabled&&(e.render(),s[n.id]=e)},a=function(e){var n;null!=e&&(null!=e.render_on_load&&void 0!==e.render_on_load||(e.render_on_load=!0),o.attr("render_on_load",e.render_on_load),e.render_on_load?r(i(e)):(n=e,angular.element(window).on("scroll",function(){var e,t,a;"false"==o.attr("render_on_load")&&(e=o[0].getBoundingClientRect(),t=window.innerWidth||document.documentElement.clientWidth,a=window.innerHeight||document.documentElement.clientHeight,e.left<=t)&&0<=e.right&&e.top<=a&&0<=e.bottom&&(o.attr("render_on_load",!0),r(i(n)))})))},1==t.length?a(c.get_weight_selected_object(t)):a(1<_page_counter?c.get_weight_selected_object_with_sequence(t,_page_counter):c.get_weight_selected_object(t)))}return{restrict:"C",transclude:!1,link:function(a,n,o){e.$on("adop-fetched",function(e,t){a.$evalAsync(function(){i(0,n,o)})}),e.$on("adop-refresh-banners",function(e,t){t!=o.id&&"all"!=t||a.$evalAsync(})}}}]),CBAds.directive("adSkin",["$rootScope","adOps","storage","adUnitParam","$timeout",function(i,o,r,s,l){(_adSkin=this).close_hours=24,_adSkin.dfpSkin=null,_adSkin.dfpSkinRefreshId=0;var c=null;return _adSkin.display_skin_to_user=function(e,t,a){var n,o=!0;return null!=c&&null!=(n=r.cookie.get("skin_close_"+c.cookie))&&"0"==n&&(o=!1,_adSkin.close_skin(e,t,a)),o},_adSkin.close_skin=function(e,t,a){null!=c&&(null!=_adSkin.dfpSkin?l.cancel(_adSkin.dfpSkinRefreshId):null!=_adops.timer_ids[c.tracker]&&l.cancel(_adops.timer_ids[c.tracker]),r.cookie.set("skin_close_"+c.cookie,"0",3600*_adSkin.close_hours),t.css({backgroundImage:"",backgroundColor:"transparent",display:"none"}))},_adSkin.render_skin=function(e,t,a){var n;null!=c&&(t.attr("href",c.link),t.attr("rel","nofollow noreferrer"),!(n={backgroundImage:'url("'+c.img+'")',display:"inline"})===c.is_fixed?t.addClass("cb-skin-ads-link-abs"):n.backgroundColor=c.backcolor,t.css(n),null!=c.tracker&&""!=c.tracker&&o.refresh_tracker(c.tracker,c.tracker_sec),c.close)&&i.$broadcast("ads-skin-show",t)},_adSkin.render_dfp_skin=function(e,t,a){var n;l.cancel(_adSkin.dfpSkinRefreshId),null!=c&&(t.attr("rel","nofollow noreferrer"),n={network:{name:"DFP",id:c.link},size:[1,1],sizes:[[1,1],[160,600],[140,800]],enabled:!0,freq:1},null==_adSkin.dfpSkin?(_adSkin.dfpSkin=new s(a.id),_adSkin.dfpSkin.adType="skin",_adSkin.dfpSkin.set_element(t),_adSkin.dfpSkin.set(n)):_adSkin.dfpSkin.network.refresh(),!1===c.is_fixed&&t.addClass("cb-skin-ads-link-abs"),null!=c.tracker_sec&&""!=c.tracker_sec&&0<parseInt(c.tracker_sec)&&(_adSkin.dfpSkin.refresh_time=c.tracker_sec,_adSkin.dfpSkinRefreshId=l(1e3*_adSkin.dfpSkin.refresh_time)),c.close)&&l(function(){t.hasClass("ad-unit-nofill")?i.$broadcast("ads-skinclose-hide",t):i.$broadcast("ads-skin-show",t)},1500)},_adSkin.select_skin=function(e,t,a){var n=o.ads_defs.skin;return c=null!=n&&null!=(n=o.get_geo_ads(n))?o.get_weight_selected_object(n):c},{restrict:"C",transclude:!(_adSkin.manage_skin=function(e,t,a){null!=(c=_adSkin.select_skin(e,t,a))?_adSkin.display_skin_to_user(e,t,a)&&(void 0!==c.network&&"DFP"==c.network?_adSkin.render_dfp_skin(e,t,a):_adSkin.render_skin(e,t,a)):_adSkin.close_skin(e,t,a)}),link:function(a,n,o){i.$on("adop-fetched",function(e,t){_adSkin.manage_skin(a,n,o)}),i.$on("ads-skin-close",function(e,t){_adSkin.close_skin(a,n,o)})}}}]),CBAds.directive("adSkinClose",["$rootScope",function(e){return(_adSkinClose=this).show_close=function(e,t,a){t.css("display","inline")},{restrict:"C",transclude:!(_adSkinClose.hide_close=,link:function(a,n,o){n.on("click",function(){_adSkinClose.hide_close(a,n,o),e.$broadcast("ads-skin-close",n)}),e.$on("ads-skin-show",function(e,t){_adSkinClose.show_close(a,n,o)}),e.$on("ads-skinclose-hide",}}}]),CBAds.directive("adNative",["NATIVE_ADS","adUnitParam","$rootScope","adOps",function(c,d,t,u){function m(e,t,a,n){var o,i,r,s,l;null!=u.ads_defs.native&&(o=a.id,r=i=!1,void 0!==a.adRepetitiveIndex&&null!=a.adRepetitiveIndex&&(i=!0,"native_wicket_plugin"!=(o=a.adRepetitiveIndex)&&"native_four_plugin"!=o&&"native_six_plugin"!=o||(r=!0)),void 0!==a.adHasDefault&&null!=a.adHasDefault&&"true"==a.adHasDefault&&t.css("display","block !important"),null!=(l=u.ads_defs.native[o]))&&(n&&(s=[],l.forEach(,0==s.length&&s.push({size:[632,20],sizes:["fluid","fluid"],render_on_load:!0,freq:1,enabled:!0,network:{name:"CB",url:"<a href='/mobileapps' class='cb-comm-static-anchr cb-comm-static-anchr cb-text-link' target='_blank'>Stay closer to Cricket, always! Get the cricbuzz app for your mobile</a>"}}),l=s),null!=(n=u.get_weight_selected_object(l)))&&((l=new d(a.id)).adType="native",i&&(null==c.loaded_ids[o]&&(c.loaded_ids[o]=[]),c.loaded_ids[o].indexOf(a.id)<0&&c.loaded_ids[o].push(a.id),l.position=c.loaded_ids[o].length),t.html(""),"COLOMBIA"==n.network.name&&(l.content=t.attr("ad-content")),!r||c.loaded_ids[o].length<=1)&&(l.set_element(t),l.set(n),l.enabled)&&l.render(),t.attr("ad-loaded","true"),t.removeClass("ad-native"),a.ad_loaded="true"}function o(e,r,s,l){function a(){void 0!==s.adDirectCall&&null!=s.adDirectCall&&"true"==s.adDirectCall?setTimeout(50):(s.ad_loaded="false",angular.element(window).on("scroll",function(){var e,t,a,n=r,o=s,i=l;"false"==o.ad_loaded&&(e=n[0].getBoundingClientRect(),t=window.innerWidth||document.documentElement.clientWidth,a=window.innerHeight||document.documentElement.clientHeight,e.left<=t)&&0<=e.right&&e.top<=a&&0<=e.bottom&&m(0,n,o,i)}))}null==u.ads_defs.native?t.$on("adop-fetched",:a()}return{restrict:"C",transclude:!1,scope:{ad_loaded:"@ad_loaded",adRepetitiveIndex:"@adRepetitiveIndex",adHasDefault:"@adHasDefault",adDirectCall:"@adDirectCall"},link:function(e,a,n){o(0,a,n),t.$on("adop-refresh-native",function(e,t){t!=n.id&&"all"!=t||(n.ad_loaded="false",o(0,a,n,!0))})}}}]),CBAds.factory("adUnitParam",["$rootScope","$timeout","adUnitDFP","adUnitCB","adUnitCOLOMBIA",function(a,n,o,i,r){return function(e){var t=this;t.target=e,t.element,t.network,t.adType,t.freq,t.size=[],t.sizes=[],t.geo=[],t.exclude_geo=[],t.style={},t.refresh={},t.render_on_load=!0,t.enabled=!0,t.position=1,t.content="",t.code="",t.sequence=1,t.refresh_time=0,t.refresh_id=0,t.set_element=function(e){t.element=e},t.set=function(e){t.enabled=e.enabled,t.size=e.size,!angular.isUndefined(t.geo)&&0<t.geo.length&&(t.enabled=t.enabled&&a.$GEO.isGeo(t.geo)),!angular.isUndefined(t.exclude_geo)&&0<t.exclude_geo.length&&(t.enabled=t.enabled&&!a.$GEO.isGeo(t.exclude_geo)),t.enabled&&(angular.isUndefined(e.sizes)||(t.sizes=e.sizes),angular.isUndefined(e.freq)||(t.freq=e.freq),angular.isUndefined(e.code)||(t.code=e.code),angular.isUndefined(e.geo)||(t.geo=e.geo),angular.isUndefined(e.render_on_load)||(t.render_on_load=e.render_on_load),angular.isUndefined(e.exclude_geo)||(t.exclude_geo=e.exclude_geo),t.style={},t.network&&"DFP"==t.network.name&&(t.style.margin="10px 0px"),t.style=e.style||{},!angular.isUndefined(t.size)&&0<t.size.length&&"DFP"!=e.network.name&&(angular.isUndefined(t.style.width)&&null!=t.size[0]&&(t.style.width=t.size[0]+"px"),angular.isUndefined(t.style.height))&&null!=t.size[1]&&(t.style.height=t.size[1]+"px"),t.refresh=e.refresh,angular.isUndefined(t.refresh)||null==t.refresh[a.$GEO.country]||(t.refresh_time=t.refresh[a.$GEO.country]),null==t.element&&(t.element=_ele("#"+t.target)),"DFP"==e.network.name?(t.network=new o,t.network.target=t.target,t.network.id=e.network.id,1<=t.sizes.length?t.network.size=t.sizes:t.network.size=t.size,t.network.element=t.element,t.network.code=t.code,t.network.set()):"COLOMBIA"==e.network.name?(t.network=new r,t.network.target=t.target,t.network.version="v1",t.network.adType=t.adType,t.network.id=e.network.id,t.network.size=t.size,t.network.content=t.content,t.network.position=t.position,t.network.element=t.element,t.network.code=t.code,t.network.set()):"COLOMBIA_V2"==e.network.name?(t.network=new r,t.network.target=t.target,t.network.version="v2",t.network.adType=t.adType,t.network.id=e.network.id,t.network.size=t.size,t.network.content=t.content,t.network.position=t.position,t.network.element=t.element,t.network.code=t.code,t.network.set()):"CB"==e.network.name&&(t.network=new i,t.network.target=t.target,t.network.adType=t.adType,t.network.url=e.network.url,t.network.url=e.network.url,t.network.content=e.network.content,t.network.size=t.size,t.network.element=t.element,t.network.code=t.code))},t.reload=function(){n.cancel(t.refresh_id),0<t.refresh_time&&(t.network.refresh(),t.refresh_id=n(function(){t.reload()},1e3*t.refresh_time))},t.render=function(){t.enabled&&(null==t.element&&(t.element=_ele("#"+t.target)),null!=t.element&&t.element.css(t.style),t.network)&&(t.network.render(),0<t.refresh_time&&t.reload(),n(function(){t.verify()},5e3))},t.verifyCount=0,t.verify=function(){t.verifyCount++,""==t.element.html()&&t.verifyCount<=1?t.render():t.content=t.element.html()}}}]),CBAds.factory("adUnitDFP",["DFP",function(t){return function(){var e=this;e.name="DFP",e.target,e.adType,e.id,e.size,e.element,e.slot,e.code,e.set=e.render=function(){t.render(e.target)},e.refresh=function(){t.refresh(e.target)}}}]),CBAds.factory("adUnitCOLOMBIA",["COLOMBIA","COLOMBIAV2",function(n,o){return function(){function e(){var e=n;return e=angular.isDefined(t.version)&&"v2"==t.version.toLocaleLowerCase()?o:e}var t=this,a=(t.name="COLOMBIA",t.target,t.version,t.adType,t.id,t.size,t.element,t.slot,t.code,t.position=1,t.content,e());t.set=function(){(a=e()).define_settings()},t.render=function(){(a=e()).define_ad(t.id,t.target,t.content,t.position,t.adType,t.code),a.render(t.target,t.code)},t.refresh=function(){(a=e()).refresh(t.target,t.code)}}}]),CBAds.factory("adUnitCB",["$http",function($http){return function(){var _adUnitCB=this;_adUnitCB.name="CB",_adUnitCB.target,_adUnitCB.url,_adUnitCB.adType,_adUnitCB.content,_adUnitCB.size,_adUnitCB.element,_adUnitCB.code,_adUnitCB.set=function(){},_adUnitCB.render=function(){var run_code=function(){null!=_adUnitCB.code&&""!=_adUnitCB.code&&(result=eval(_adUnitCB.code),"function"==typeof result)&&result()},content,banner_code;"native"==_adUnitCB.adType?(content=_adUnitCB.url,""==content&&(content=_adUnitCB.content),angular.isUndefined(content)||(_adUnitCB.element.html(content.trim()),run_code())):null!=_adUnitCB.url?(banner_code='<iframe src="'+_adUnitCB.url+'"  framespacing="0" allowtransparency="true" marginwidth="0" marginheight="0" vspace="0" hspace="0" scrolling="no" frameborder="no" height="'+_adUnitCB.size[1]+'" width="'+_adUnitCB.size[0]+'"  ></iframe>',_adUnitCB.element.html(banner_code),run_code()):null!=_adUnitCB.content&&$http({url:_adUnitCB.content}).then(},_adUnitCB.refresh=function(){_adUnitCB.render()}}}]),CBAds.service("adOps",["$http","$rootScope","ADOPS_DEFS","PAGE_ADS","GEO","$timeout","storage",function(e,o,t,a,d,i,r){(_adops=this).timer_ids={},_adops.now=_adops.get_rand=_adops.rand=_adops.get_rand(),_adops.ads_defs={},_adops.cached_defs={},_adops.fetch_ads=function(){e({url:"/api/adverts/"+PAGE_NAME}).then(function(e){"ACTIVE"==(null!=localStorage.getItem("PlanState")?localStorage.getItem("PlanState"):"NOTSET")&&(e.data.banners=[],e.data.native=[],e.data.skin=[],_adops.hide_ad_element()),_adops.ads_defs=e.data,e.data,o.$broadcast("adop-fetched",e)})},_adops.hide_ad_element=function(){for(var e=Array.prototype.slice.call(document.getElementsByClassName("ad-unit")),t=Array.prototype.slice.call(document.getElementsByClassName("cb-ad-unit")),e=e.concat(t),a=0;a<e.length;a++)e[a].style.display="none"},_adops.refresh_page_ads=function(e){var t={},e=(void 0!==e&&null!=e?"string"==typeof e?null!=a[e]&&(t[e]=a[e]):"object"==typeof e&&angular.forEach(e,:t=a,_adops.load_page_count(),_adops.get_rand()%1e3),n=400+e;i(function(){angular.forEach(t,function(e,t){var a=_adops.now()%1e3;a<100&&(a*=3),i(function(){o.$broadcast("adop-refresh-banners",t)},n+=a)})},e)},_adops.get_geo_ads=function(e){var t=null,a=["RO_SE_ASIA","GCC","EAA","EU",d.country],n=d.matchBasedTargetings();if(a.unshift.apply(a,n),null!=e){for(var o in a){o=a[o];if(d.isGeo(o)&&angular.isDefined(e[o])){t=e[o];break}}null==t&&angular.isDefined(e.ROW)&&(t=e.ROW)}return t},_adops.get_weight_selected_object=function(e){var t,a=null,n=_adops.get_rand()%100+1,o=0,i=0,r=[];for(t in e){var s=!0,l=e[t];angular.isDefined(l.geo)&&0<l.geo.length&&(s=s&&d.isGeo(l.geo)),(s=angular.isDefined(l.exclude_geo)&&0<l.exclude_geo.length?s&&!d.isGeo(l.exclude_geo):s)&&l.freq&&(o+=l.freq,r.push(l))}if(0<o)for(var c in r){l=r[c],c=Math.round(l.freq/o*100);if(i<=n&&n<i+c){a=l;break}i+=c}return a},_adops.get_weight_selected_object_with_sequence=function(e,t){var a,n=null,o=0,i=[];for(a in e){var r=!0,s=e[a];if(angular.isDefined(s.geo)&&0<s.geo.length&&(r=r&&d.isGeo(s.geo)),(r=angular.isDefined(s.exclude_geo)&&0<s.exclude_geo.length?r&&!d.isGeo(s.exclude_geo):r)&&s.freq){o+=s.freq;for(var l=0;l<s.freq;l++)i.push(s)}}return 0<o&&void 0!==i[t=parseInt(t)%o]&&(n=i[t]),i=null,n},_adops.getSetSequence=function(e){return _adops.incr_ads_Sequence(e)},_adops.refresh_tracker=function(e,t){i.cancel(_adops.timer_ids[e]),null==t&&(t=0),(new Image).src=e,null!=t&&3<t&&(_adops.timer_ids[name]=i(function(){_adops.refresh_tracker(e,t)},1e3*t))},_adops.load_page_count=function(){var e=void 0===(e=r.cookie.get("pc"))?1:parseInt(e)+1;_page_counter=e,r.cookie.set("pc",e,3600,null,window.top.location.pathname)},_adops.load_ads_Sequence=function(){var e=r.cookie.get("adsSeq");if(void 0!==e){var t=e.split(";");if(0<t.length)for(var a in t){var a=t[a].split("="),n=a[0],a=a[1];""!=n&&(_adsSequence[n]=parseInt(a))}}},_adops.incr_ads_Sequence=function(e){var t,a=1,n=(null==_adsSequence[e]||(a=parseInt(_adsSequence[e]),void 0===_adsSequenceRead[e]&&(a=parseInt(_adsSequence[e])+1)),_adsSequence[e]=a,"");for(t in _adsSequence)n+=t+"="+_adsSequence[t]+";";return void 0===_adsSequenceRead[e]&&r.cookie.set("adsSeq",n,10,null,window.top.location.pathname),_adsSequenceRead[e]=!0,a},_adops.handle_colombia_v2_status=function(e,t){"success"!=e&&setTimeout(2e3)}}]),CBAds.service("DFP",["$rootScope",function($rootScope){var _DFP=this;_DFP.retry_count=0,_DFP.no_fill_count={},_DFP.load_script=function(){var e,t;(e=document.createElement("script")).async=!0,e.type="text/javascript",t="https:"==document.location.protocol,e.src=(t?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js",(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t),e.onerror=function(){_DFP.retry_count<3&&_DFP.load_script(),_DFP.retry_count++}},_DFP.define_settings=function(){googletag.cmd.push(function(){var page_url=window.top.location||"//www.cricbuzz.com/";if(googletag.pubads().set("page_url",page_url),"undefined"!=typeof PAGE_TARGETS)for(var targetkey in PAGE_TARGETS){var targetvalue=PAGE_TARGETS[targetkey]+"";googletag.pubads().setTargeting(targetkey,targetvalue)}googletag.pubads().enableAsyncRendering(),googletag.enableServices(),googletag.pubads().addEventListener("slotRenderEnded",function(event){var target=event.slot.getSlotElementId(),target_dom=document.getElementById(target),result;null!=target_dom&&(event.isEmpty?target_dom.hasAttribute("ad-repetitive-index")?$rootScope.$broadcast("adop-refresh-native",target):(target_dom.className.indexOf("ad-unit-nofill")<0&&(target_dom.className+=" ad-unit-nofill"),target_dom.className=target_dom.className.replace("ad-unit-rendered",""),_DFP.no_fill_count[target]=_DFP.no_fill_count[target]?++_DFP.no_fill_count[target]:1,_DFP.no_fill_count[target]<=1?_DFP.refresh(target):target_dom.style.display="none"):(target_dom.className.indexOf("ad-unit-rendered")<0&&!target_dom.hasAttribute("no-fill-native-content")&&(target_dom.className+=" ad-unit-rendered"),target_dom.className=target_dom.className.replace("ad-unit-nofill",""),null!=googletag.cb_code[target]&&""!=googletag.cb_code[target]&&(result=eval(googletag.cb_code[target]),"function"==typeof result)&&result()))})})},_DFP.define_ad=function(e,t,a,n,o){void 0===googletag.cb_slots[a]?googletag.cmd.push(function(){try{googletag.cb_slots[a]=googletag.defineSlot("/1024780/"+e,t,a).addService(googletag.pubads()),googletag.cb_code[a]=n,googletag.display(a)}catch(e){$rootScope.cblog.exception(e,"DFP Ads")}}):_DFP.refresh(a)},_DFP.render=function(e){},_DFP.initialLoad=function(){var e,t=[];for(e in googletag.cb_slots)t.push(googletag.cb_slots[e]);googletag.cmd.push(},_DFP.refresh=function(e){googletag.pubads().refresh([googletag.cb_slots[e]],{changeCorrelator:!1})}}]),CBAds.service("COLOMBIA",["$rootScope","NATIVE_ADS",function($rootScope,NATIVE_ADS){var _COLOMBIA=this,retry_count=0;_COLOMBIA.script_fetech=!1,_COLOMBIA.load_script=function(){var e,t;_COLOMBIA.script_fetech||((e=document.createElement("script")).defer=!0,e.async=!0,e.type="text/javascript",e.src="https://static.clmbtech.com/ctn/commons/js/colombia.js",(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t),e.onerror=function(){_COLOMBIA.script_fetech=!1,retry_count<3&&_COLOMBIA.load_script(),retry_count++},_COLOMBIA.script_fetech=!0)},_COLOMBIA.get_native_object=function(e){var t={img:"",title:"",text:"",clk:"",logo:"",sponsor:"Sponsored Ad",content:"",adchoicesImgURL:"",adchoicesClickURL:"",itemType:0};if(null!=e)try{t.img=e.mainimage,t.itemType=null!=e.itemType?e.itemType:0,t.title=""!=e.title?e.title:e.text,t.text=""!=e.text?e.text:e.title,t.clk=e.clk.constructor===Array?e.clk[0]:e.clk,t.ctatext=void 0!==e.ctaText?e.ctaText:"",t.sponsor=""!=e.brandtext?"Ad By: "+e.brandtext:"Sponsored Ad",t.logo=""!=e.colombiaLogo?e.colombiaLogo:"",t.adchoicesImgURL=e.adchoicesImgURL,t.adchoicesClickURL=e.adchoicesClickURL}catch(e){$rootScope.cblog.exception(e,"Columbia Ads")}return t},_COLOMBIA.parse_template_object=function(e,t){return e=e.replace("[[img]]",t.img).replace(/\[\[title\]\]/g,t.title).replace(/\[\[text\]\]/g,t.text).replace(/\[\[clk\]\]/g,t.clk).replace(/\[\[logo\]\]/g,t.logo).replace(/\[\[sponsor\]\]/g,t.sponsor).replace(/\[\[adchoicesImgURL\]\]/g,t.adchoicesImgURL).replace(/\[\[adchoicesClickURL\]\]/g,t.adchoicesClickURL)},_COLOMBIA.define_settings=function(){},_COLOMBIA.define_ad=function(e,t,s,a,l,n){_COLOMBIA.load_script(),void 0===colombia_units[t]?(void 0!==a&&null!=a||(a=1),colombia.fns=colombia.fns||[],colombia.fns.push(function(){colombia.registerSlot(e,t,a,0,function(e,t){if(null!=e&&null!=e.paidAds[0])try{var a,n="";for(a in e.paidAds){var o,i=e.paidAds[a],r=_COLOMBIA.get_native_object(i);colombia_units[t]=r,null!=s&&""!=s&&(o=s,o=_COLOMBIA.parse_template_object(s,r),null!=document.getElementById(t))&&""!=r.title&&null!=r.title&&(n+=o)}""!=n&&(document.getElementById(t).innerHTML=n),colombia_units[t].content=n}catch(e){$rootScope.cblog.exception(e,"Columbia Ads")}else"native"==l&&$rootScope.$broadcast("adop-refresh-native",t)});try{"banners"==l&&(colombia_units[t]={content:""}),colombia.load(),colombia.display(t)}catch(e){$rootScope.cblog.exception(e,"Columbia Ads")}})):null!=document.getElementById(t)&&_COLOMBIA.refresh(t)},_COLOMBIA.run_code=function(code){var result;null!=code&&""!=code&&(result=eval(code),"function"==typeof result)&&result()},_COLOMBIA.render=function(e,t){colombia.fns.push(function(){_COLOMBIA.run_code(t),colombia.display(e)})},_COLOMBIA.refresh=function(e,t){colombia.fns.push(}}]),CBAds.service("COLOMBIAV2",["$rootScope","NATIVE_ADS","COLOMBIA",function($rootScope,NATIVE_ADS,COLOMBIA){var _COLOMBIAV2=this,retry_count=0;_COLOMBIAV2.script_fetech=!1,_COLOMBIAV2.load_script=function(){var e,t;_COLOMBIAV2.script_fetech||((e=document.createElement("script")).defer=!0,e.async=!0,e.type="text/javascript",e.src="https://static.clmbtech.com/ad/commons/js/colombia_v21.js",(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t),e.onerror=function(){_COLOMBIAV2.script_fetech=!1,retry_count<2&&_COLOMBIAV2.load_script(),retry_count++},_COLOMBIAV2.script_fetech=!0)},_COLOMBIAV2.define_settings=function(){},_COLOMBIAV2.define_ad=function(e,t,a,n,o,i){_ele("#"+t).attr("data-slot",e),_ele("#"+t).attr("data-position",n),_ele("#"+t).attr("data-msg","_adops.handle_colombia_v2_status"),_ele("#"+t).addClass("colombia"),_COLOMBIAV2.load_script()},_COLOMBIAV2.run_code=function(code){var result;null!=code&&""!=code&&(result=eval(code),"function"==typeof result)&&result()},_COLOMBIAV2.render_callback=function(e,t){var a=_ele("#"+t).attr("ad-content");if(e.hasOwnProperty("paidAds"))for(var n=0;n<e.paidAds.length;n++){var o=COLOMBIA.get_native_object(e.paidAds[n]);COLOMBIA.parse_template_object(a,o)}if(e.hasOwnProperty("organicAds"))for(n=0;n<e.organicAds.length;n++){o=COLOMBIA.get_native_object(e.organicAds[n]);COLOMBIA.parse_template_object(a,o)}colombia_units[t]=o},_COLOMBIAV2.render=function(e,t){var a=_ele("#"+e).attr("data-position");_COLOMBIAV2.run_code(t),1<parseInt(a)&&_COLOMBIAV2.refresh(e,t)},_COLOMBIAV2.refresh=function(e,t){"object"==typeof colombia&&"function"==typeof colombia.refresh&&colombia.refresh(e)}}]);var CBStats=angular.module("CBStats",["CBLib"]),CBVideos=("/search"==window.location.pathname&&CBStats.config(["$locationProvider",),CBStats.controller("pollController",["$scope","storage","$http",function(a,n,e){_poll_controller=this,a.polls=[],a.poll={},a.pollId=0,a.api={list:"/api/poll/list",post:"/api/poll/post"},a.selected_poll_index=-1,a.casted_votes=[],a.get_poll=function(){0<a.pollId&&(a.api.list+="?poll="+a.pollId),e.get(a.api.list).then(function(e){a.polls=e.data,(a.selected_poll_index<0||0<a.pollId)&&(a.selected_poll_index=0),a.change_poll(a.selected_poll_index)})},_poll_controller.init=function(){var e=n.cookie.get("cb_poll");null!=e&&""!=e&&(a.casted_votes=e.split("~~")),a.get_poll()},a.init=_poll_controller.init,a.has_casted_vote=function(e){return 0<=a.casted_votes.indexOf(e+"")},a.change_poll=function(e){e=a.polls[parseInt(e)];a.has_casted_vote(e.id)&&(e.voting_enabled=!1),a.poll=e},a.$watch("selected_poll_index",function(e,t){0<=e&&a.change_poll(e)}),a.cast_vote=function(t){null!=t.selected_option&&e({method:"post",url:a.api.post,params:{option:t.selected_option}}).then(function(e){a.casted_votes.push(t.id+""),n.cookie.set("cb_poll",a.casted_votes.join("~~"),432e3),a.get_poll()})},CBQueueOnLoad.push(}]),CBStats.controller("seriesStats",["$scope","$rootScope","StatsEngine",function(n,e,t){n.api_url="/cricket-series/api/stats/zone",n.record_limit=10,n.update_location=!0,n.stats_data=[],n.stats_headers={},n.stats_fields={},n.default_page_title="",n.seriesId=0,angular.extend(n,new t(n)),e.$on("stats-data-update",function(e,t){var a=n.default_page_title;n.options.stats_views[n.filter.statsType]&&(a=n.options.stats_views[n.filter.statsType].label+" - "+n.default_page_title),document.title=a,n.record_limit=10})}]),CBStats.controller("seriesStatsModule",["$scope","$rootScope","StatsEngine",function(e,t,a){e.api_url="/cricket-series/api/stats/zone",e.update_location=!1,e.stats_data=[],e.stats_headers={},e.stats_fields={},angular.extend(e,new a(e))}]),CBStats.controller("boundaryModuleApi",["$scope","$rootScope","$http",function(t,e,a){t.api_path="/api/stats/highlights-list/boundary/",t.update_location=!1,t.stats_data=[],t.stats_headers={},t.stats_fields={},t.statsType="boundary",t.seriesType="",t.seriesId="",t.teamId=0,t.boundaryInfo_resp={},t.GetBoundaryTrackerData=function(e){t.teamData=e;e=document.getElementById("boundary"),t.teamId=e.options[e.selectedIndex].value,e=t.api_path+t.seriesType+"/"+t.seriesId+"/"+t.teamId;a.get(e).then(}}]),CBStats.controller("playerProfile",["$scope","$rootScope","StatsEngine","$sce",function(a,e,t,n){a.api_url="/cricket-series/api/stats/player-profile",a.update_location=!1,a.stats_data=[],a.profile=null,a.filtered_profile=[],a.stats_headers={},a.stats_fields={},angular.extend(a,new t(a)),a.bio=n.trustAsHtml(""),a.default_page_title="",a.filter_count=0,e.$on("stats-data-update",function(e,t){a.bio=n.trustAsHtml(a.stats_data.playerProfile),null==a.profile?(a.profile=a.stats_data,a.stats_data.stats_title="Stats"):a.stats_data.stats_title="Filtered Stats : "+a.filter.get_title(),a.stats_data.filter_count=a.filter_count+"",a.filtered_profile.push(a.stats_data),a.filter_count++})}]),CBStats.controller("playerSearch",["$scope","$rootScope","$http","$sce",function(a,t,e,n){a.api_url="/cricket-series/api/player-search/",a.searchText="",a.stats_data=[],a.stats_data=[],a.$watch("searchText",function(e,t){a.validate_search(e)}),a.validate_search=function(e){void 0!==e&&(0<e.length&&e.length%2==0&&e.length<4&&a.search(),0<e.length&&4<e.length&&0==a.stats_data.length&&a.search(),0==e.length)&&(a.stats_data=[])},a.run_search=function(e){void 0!==e&&1<e.length&&(a.searchText=e,a.search())},a.submit_search=function(){return void 0!==a.searchText&&1<a.searchText.length},a.search=function(){e.get(a.api_url+a.searchText).success(}}]),CBStats.controller("playerSearchWidget",["$scope","$rootScope","$http","$sce",function(o,t,e,a){o.api_url="/cricket-series/api/player-search/",o.searchText="",o.stats_data=[],o.filtered_data=[],o.selectedIndex=-1,o.itemHeight=0,o.boxHeight=0,o.dropdownVisible=!1;var n=this;n.boxElem=document.getElementById("playerSearchBox"),o.$watch("searchText",function(e,t){o.selectedIndex=-1,o.validate_search(e),n.boxElem.scrollTop=0}),o.validate_search=function(e){void 0!==e&&(0<e.length&&e.length%2==0&&e.length<4||4<e.length&&0==o.stats_data.length?o.search():0==e.length?(o.stats_data=[],o.filtered_data=[]):o.filter_data())},o.run_search=function(e){void 0!==e&&1<e.length&&(o.searchText=e,o.search())},o.submit_search=function(e){-1!=o.selectedIndex&&o.dropdownVisible?(e.preventDefault(),o.filtered_data[o.selectedIndex]&&(window.location.href=o.filtered_data[o.selectedIndex].url)):(void 0===o.searchText||o.searchText.length<2)&&e.preventDefault()},o.search=function(){e.get(o.api_url+o.searchText).then(function(e){e=e.data,o.stats_data=e,o.filter_data(),t.$broadcast("player-search-updated",e)})},o.modifySelected=function(e){var e=o.selectedIndex+e,e=(o.dropdownVisible=!0,e<-1?e=o.filtered_data.length-1:e>o.filtered_data.length-1&&(e=-1),o.selectedIndex=e,n.boxElem.scrollTop),t=o.selectedIndex*o.itemHeight;t<e?n.boxElem.scrollTop=t:t+o.itemHeight>e+o.boxHeight&&(n.boxElem.scrollTop=t+o.itemHeight-o.boxHeight)},o.onKeyPress=function(e){switch(e.keyCode){case 27:o.dropdownVisible=!1;break;case 38:e.preventDefault(),o.modifySelected(-1);break;case 40:e.preventDefault(),o.modifySelected(1)}},o.filter_data=function(){var n=[];angular.forEach(o.stats_data,function(e){var t=e.name.toLowerCase(),a=o.searchText.toLowerCase();(0==t.indexOf(a)||-1!=t.indexOf(a)&&" "==t[t.indexOf(a)-1])&&n.push(e)}),o.filtered_data=n,o.dropdownVisible=0<o.filtered_data.length},o.hideDropdown=function(){o.dropdownVisible=!1},o.showDropdown=function(){o.dropdownVisible=!0},o.onHoverItem=function(e){e.currentTarget&&(e=e.currentTarget.getAttribute("data-index"))&&(o.selectedIndex=parseInt(e))}}]),CBStats.filter("searchFor",function(){return function(e,n){var o;if(angular.isDefined(n)&&2<=n.length)return n?(o=[],angular.forEach(e,function(e){var t=e.name.toLowerCase(),a=n.toLowerCase();(0==t.indexOf(a)||-1!=t.indexOf(a)&&" "==t[t.indexOf(a)-1])&&o.push(e)}),o):e}}),CBStats.factory("StatsEngine",["$http","$location","$rootScope","StatsFilter","StatsOptions",function(o,a,i,e,t){return function(n){return n.is_empty=!1,n.filter=new e,n.update_location&&n.filter.set_filter(a.search()),n.in_progress=!1,n.$watch("filter.get_query()",function(e,t){""!=e&&(e="/"+n.filter.get_query(),n.update_location&&a.url(e),i.$broadcast("get-stats-data",e))}),n.options=new t(n.filter),i.$on("get-stats-data",function(e,t){var a=n.filter.get_query();t=="/"+a&&(n.stats_data=[],n.is_empty=!1,n.in_progress||(n.in_progress=!0,o.get(n.api_url+a).then(function(e){e=e.data;n.stats_data=e,0==n.stats_data.length&&(n.is_empty=!0),i.$broadcast("stats-data-update",e)},function(){n.is_empty=!0,i.$broadcast("stats-data-update",[])})))}),i.$on("stats-data-update",function(e,t){n.in_progress=!1}),n}}]),CBStats.factory("StatsFilter",["$location",function(t){var n={1:{id:1,name:"TEST"},2:{id:2,name:"ODI"},3:{id:3,name:"T20"}};return function(){var a=this;a.statsType="",a.seriesType="",a.resultType="",a.filterStats=0,a.matchTypeId=0,a.seriesId=0,a.teamId=0,a.opponentId=0,a.seriesTeam1=0,a.seriesTeam2=0,a.playerId=0,a.venueId=0,a.image=0,a.haulWickets=0,a.seasonFrom=0,a.seasonTo=0,a.init_filter=function(e){angular.isDefined(t.search().statsType)||a.set_filter(e)},a.set_filter=function(e){angular.forEach(e,function(e,t){angular.isDefined(a[t])&&(a[t]=angular.isNumber(a[t])?parseInt(e):e)})},a.correct_paramters=function(){null!=a.seriesType&&""!=a.seriesType&&"NA"!=a.seriesType||(a.seriesType="bilateral"),"bilateral"==a.seriesType&&(0==a.seriesTeam1&&(a.seriesTeam1=a.teamId),0==a.seriesTeam2)&&(a.seriesTeam2=a.opponentId)},a.get_query=function(){var e="";return e=""!=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e+=""!=a.statsType?"&statsType="+a.statsType:"")+(""!=a.seriesType?"&seriesType="+a.seriesType:""))+(""!=a.resultType?"&resultType="+a.resultType:""))+(0<a.filterStats?"&filterStats="+a.filterStats:""))+(0<a.seriesId?"&seriesId="+a.seriesId:"&seriesId="+seriesId))+(0<a.teamId?"&teamId="+a.teamId:""))+(0<a.opponentId?"&opponentId="+a.opponentId:""))+(0<a.matchTypeId?"&matchTypeId="+a.matchTypeId:""))+(0<a.seriesTeam1?"&seriesTeam1="+a.seriesTeam1:""))+(0<a.seriesTeam2?"&seriesTeam2="+a.seriesTeam2:""))+(0<a.playerId?"&playerId="+a.playerId:""))+(0<a.venueId?"&venueId="+a.venueId:""))+(0<a.image?"&image="+a.image:""))+(0<a.seasonFrom?"&seasonFrom="+a.seasonFrom:""))+(0<a.seasonTo?"&seasonTo="+a.seasonTo:""))?"&"==(queries=e.split(""))[0]?(queries[0]="?",queries.join("")):"?"+e:e},a.get_title=function(){var e="";return(e+=0<a.seasonFrom?" from "+a.seasonFrom:"")+(0<a.seasonTo?" to "+a.seasonTo:"")+(0<a.matchTypeId?" in "+n[a.matchTypeId].name:"")}}}]),CBStats.factory("StatsOptions",["$http","$rootScope","Series","Team","StatsCell",function(i,r,t,a,s){function l(e){return(tm=new a).id=e.id,tm.name=e.name,tm.short_name=e.shortName.toUpperCase(),tm.flag_image="https://static.cricbuzz.com/cricbuzz/images/flags/newFlags/team_"+e.id+"_50.png",tm}function c(e){return(srs=new t).id=e.id,srs.name=e.name,srs.type=e.seriesType,srs.tour=e.isTour,srs}return function(t){var a=this,n=[],o={1:{id:1,name:"TEST"},2:{id:2,name:"ODI"},3:{id:3,name:"T20"}};a.series=[],a.team=[],a.venues=[],a.match_type=[],a.match_types=[],a.stats_type=[],a.stats_views=[],a.set_options=function(){var e="/cricket-series/api/stats/series-list";e+=t.get_query(),i.get(e).then(function(e){e=e.data;n=[],srs=c({id:0,name:"All Series"}),a.series.push(srs),tm=l({id:0,name:"All Teams",shortName:"All Teams"}),a.team.push(tm),angular.forEach(e,function(e){srs=c(e),a.series.push(srs),angular.forEach(e.matchesType,function(e){a.match_type.indexOf(e)<0&&(a.match_type.push(e),a.match_types.push(o[e]))}),angular.forEach(e.seriesTeams,function(e){n.indexOf(e.id)<0&&106!=e.id&&(tm=l(e),n.push(e.id),a.team.push(tm),delete tm)}),delete srs}),r.$broadcast("stats-filter-option-update",a)})},a.set_stats_type_fields=function(e){a.stats_type=[],angular.forEach(e,function(t){var e={};e.id=t.id,e.label=t.label,e.group=t.group,a.stats_type.push(e),a.stats_views[t.id]={},a.stats_views[t.id].label=t.label,a.stats_views[t.id].group=t.group,a.stats_views[t.id].headers=t.headers,a.stats_views[t.id].highlight=t.highlight,a.stats_views[t.id].fields=[],angular.forEach(t.fields,function(e){(cell=new s).url=e.url,cell.img=e.img,cell.field=e.field,cell.className=e.className,cell.tagName=e.tagName,a.stats_views[t.id].fields.push(cell)})})}}}]),CBStats.factory("StatsCell",["$sce",function($sce){return function(){var _StatsCell=this;_StatsCell.url,_StatsCell.img,_StatsCell.field,_StatsCell.className,_StatsCell.data,_StatsCell.render=function(data){_StatsCell.data=data;var url_value=eval(_StatsCell.url),img_value=eval(_StatsCell.img),value=data[_StatsCell.field];return angular.isUndefined(url_value)||(value="<a href='"+url_value+"' title='"+value+"'>"+value+" </a>"),angular.isUndefined(img_value)||(value="<img src='"+img_value+"' class='img-responsive img-circle' alt='"+value+"'>"),value?$sce.trustAsHtml(value+""):$sce.trustAsHtml("-")},_StatsCell.get_data=function(e){return _StatsCell.data[e]}}}]),CBStats.filter("searchfilter",["$sce",function(a){return function(e,t){return replaced_text=e.title,angular.isDefined(replaced_text)?(replaced_text=replaced_text.replace(RegExp("("+t+")","ig"),"<b>$1</b>"),e.type&&(replaced_text+=" in <span class='cb-suggst-item-type'>"+e.type+"</span>")):replaced_text="",a.trustAsHtml(replaced_text)}}]),CBStats.controller("SearchCtrl",["$scope","$element","$window","$location","$http","$filter","$timeout","$sce",function(p,r,e,s,n,t,a,o){var l=this;p.ALL_LIMIT=5,p.errorText="",p.dropdownVisible=!1,p.inputFocus=!1,p.searchFromUrl="",p.itemHeight=0,p.boxHeight=0,p.source="search-page",p.active_tab="all",p.limit=p.ALL_LIMIT,p.searchText="",p.oldText="",p.lastFetchedSugg="",p.search_ftr_suggst=[],p.suggestions=[],p.suggst_length=0,p.last_search="",p.no_results_found=-1,p.no_suggestions=!1,p.searchData=null,p.lastTabIndexWithData="",p.loading=!1,p.resultsCounter=0,p.suggestionsCounter=0,p.fetchInProgress=!1,p.search_data_count=0,p.tabs=[{label:"Players",key:"player"},{label:"Teams",key:"team"},{label:"Series",key:"series"},{label:"News",key:"news"},{label:"Videos",key:"video"},{label:"Venues",key:"venue"}],p.noResultsOrder=[{key:"player",count:0},{key:"news",count:0},{key:"video",count:0}],p.itemsPerPage=10,p.itemsInAll=5,p.searchInputElem;var i="/api/search/suggestions?q=",c="/api/search/results?q=",d="/api/sherlock/mgmt/crudops",u="/api/search-event/post";var m,_={};for(m in p.tabs)_[p.tabs[m].key]=p.itemsPerPage;p.limits=_,p.init=function(e,t,a,n,o,i){i=i||"",l.boxElem=document.getElementById("searchBox_"+i),p.selected_suggestions=e,p.itemHeight=t,p.bigItemHeight=a,p.boxHeight=n,p.searchFromUrl=o,p.source=i,p.searchInputElem=r[0].getElementsByClassName("js-cb-search-input")[0],p.searchFromUrl&&(p.searchFromUrl=p.searchFromUrl.split("-").join(" "),p.searchText=p.searchFromUrl,p.search_results(!0)),"nav"!=p.source&&(p.$on("$locationChangeSuccess",function(){var e;"nav"!=p.source&&(e=s.search().tab||"all")!=p.active_tab&&p.set_filters(e,!1,!0)}),angular.element(window).on("ready load scroll",function(){var e,t,a;"all"!=p.active_tab&&p.searchData&&p.searchData[p.active_tab]&&p.searchData[p.active_tab].length>p.limits[p.active_tab]&&!p.fetchInProgress&&(e=_ele("#"+p.active_tab+"_tracker")[0].getBoundingClientRect(),t=window.innerWidth||document.documentElement.clientWidth,a=window.innerHeight||document.documentElement.clientHeight,300<=Math.abs(e.top))&&Math.abs(e.bottom)<=a+300&&0<=e.left&&e.right<=t&&(p.fetchInProgress=!0,setTimeout(function(e){p.limits[e]+=p.itemsPerPage,e==p.active_tab&&(p.limit=p.limits[e]),p.fetchInProgress=!1}.bind(null,p.active_tab),0))}))},p.set_filters=function(e,t,a){p.active_tab=e,p.limit="all"==e?p.itemsInAll:p.limits[e],"nav"==p.source||a||s.search("tab",e),t||window.scroll(0,0)},p.initNoResults=function(e,t){for(var a=0;a<p.noResultsOrder.length;a++){var n=p.noResultsOrder[a];if(n.key==e){n.count=t;break}}},p.goto_item=function(e,t,a,n){if(n)for(var o=0;o<p.noResultsOrder.length;o++){var i=p.noResultsOrder[o];if((r=i.key)==a)break;t+=i.count}else if("all"==p.active_tab)for(var r,o=0;o<p.tabs.length;o++){if((r=p.tabs[o].key)==a)break;var s=(p.searchData[r]||[]).length;t+=s>p.ALL_LIMIT?p.ALL_LIMIT:s}var l="Result | "+p.active_tab+" | "+ ++t;n&&(l+=" | NA"),e=(e||"").replace(/-squote-/g,"'").replace(/-dquote-/g,'"'),dataLayer.push({event:"search",searchEventAction:l,searchEventLabel:e})},p.suggest_search=function(){var e=p.searchText,t=(p.oldText=p.searchText,(e=e.replace(/[^a-zA-Z0-9\s\.'-]/g,"").trim()).length);2<t&&(p.suggestionsCounter++,p.lastFetchedSugg=e,p.sendEvent({event:"suggestion",text:e}),n.get(i+e).then(function(e,t,a){if(e==p.suggestionsCounter){var n=[];if(a.data&&a.data.suggestionList&&a.data.suggestionList.length&&(n=a.data.suggestionList),p.selected_suggestions=-1,0!=n.length){p.dropdownVisible=!0,p.suggst_length=n.length,p.suggestions=n;for(var o={},i=0;i<p.tabs.length;i++){var r=p.tabs[i];"News"!=r.label&&"Videos"!=r.label&&(o[r.label]=[])}for(i=0;i<n.length;i++)if(o[(_=n[i]).type]){var s="",l="",c="cb-srch-sugggest-icon-",d=cb_sanitize(_.title);switch(_.type){case"Players":s="/profiles/"+_.id+"/"+d,c+="players",l="http://static.cricbuzz.com/a/img/v1/50x50/i1/c"+_.imageId+"/"+d+".jpg";break;case"Series":s="/cricket-series/"+_.id+"/"+d,c+="series";break;case"Teams":s="/cricket-team/"+d+"/"+_.id,l="http://static.cricbuzz.com/a/img/v1/36x27/i1/c"+_.imageId+"/cms-img.jpg",c+="teams";break;case"Venues":s="/cricket-venues/"+_.id+"/"+d,l="http://static.cricbuzz.com/a/img/v1/36x27/i1/c"+_.imageId+"/cms-img.jpg",c+="teams"}_.iconClass=c,_.url=s,_.imgUrl=l,o[_.type].push(_)}var u,m=[];for(u in o)for(var _,g=o[u],i=0;i<g.length;i++)(_=g[i]).hasBorder=i==g.length-1,m.push(_);p.search_ftr_suggst=m,p.no_suggestions=!1}else p.suggestions=[],p.dropdownVisible=!1,p.no_suggestions=!0;p.search_ftr_suggst.some(function(e){return e.isSearchItem})||p.search_ftr_suggst.push({isSearchItem:!0})}}.bind(null,p.suggestionsCounter,e))),p.no_suggestions=!1,angular.isDefined(p.search_ftr_suggst)&&0==p.search_ftr_suggst.length&&2<=t&&(p.no_suggestions=!0)},p.sendEvent=p.highlight_element=function(e){p.selected_suggestions=e},p.remove_highlight_element=function(){for(var e=0;e<p.suggst_length;e++)_ele("#search_item_"+e).removeClass("highlight")},p.highlight_item_mouse_hover=function(e){p.highlight_element(e)},p.modifySelected=function(e){var e=p.selected_suggestions+e,e=(p.dropdownVisible=!0,e<-1?e=p.search_ftr_suggst.length-1:e>p.search_ftr_suggst.length-1&&(e=-1),p.selected_suggestions=e,l.boxElem.scrollTop),t=p.selected_suggestions*p.itemHeight,a=p.selected_suggestions<p.search_ftr_suggst.length-1?p.itemHeight:p.bigItemHeight;t<e?l.boxElem.scrollTop=t:t+a>e+p.boxHeight&&(l.boxElem.scrollTop=t+a-p.boxHeight)},p.onKeyPress=function(e){switch(e.keyCode){case 27:p.dropdownVisible=!1,p.inputFocus=!1,p.searchInputElem.blur(),p.reset_form("view");break;case 38:e.preventDefault(),p.modifySelected(-1);break;case 40:e.preventDefault(),p.modifySelected(1);break;default:p.inputFocus=!0}},p.hideDropdown=function(){p.dropdownVisible=!1},p.onInputFocus=function(){p.inputFocus=!0,p.clearVisible=!1,!p.suggestions.length&&"nav"!=p.source||(p.dropdownVisible=!0,document.getElementById("search_bar_menu").focus(),document.getElementById("cricbuzz-plus-main-menu").setAttribute("style","opacity:0 !important"))},p.loseInputFocus=function(){setTimeout(function(){p.inputFocus=!1,p.clearVisible=!0},0),"nav"==p.source&&setTimeout(function(){var e=document.getElementById("cricbuzz-plus-main-menu");e.setAttribute("style","display:inline-block"),e.setAttribute("style","opacity:1")},350)},p.reset_form=function(e){p.suggestions=[],p.no_suggestions=!1,p.search_ftr_suggst=[],p.selected_suggestions=-1,p.lastFetchedSugg="",p.oldText="","view"==e&&(p.master={},p.searchText=""),"nav"==p.source&&(document.getElementById("search_bar_menu").focus(),(e=document.getElementById("cricbuzz-plus-main-menu")).setAttribute("style","opacity:0"),e.setAttribute("style","display : none !important"))},p.search_results=function(e,t){var a,d;p.searchInputElem.focus(),p.inputFocus=!0,p.clearVisible=!1,!t&&0<=p.selected_suggestions&&p.dropdownVisible&&p.search_ftr_suggst[p.selected_suggestions]&&!p.search_ftr_suggst[p.selected_suggestions].isSearchItem?(t=p.search_ftr_suggst[p.selected_suggestions],p.sendEvent({event:"navigation",id:t.id,searchType:t.type}),t=p.search_ftr_suggst[p.selected_suggestions],dataLayer.push({event:"search",searchEventAction:"Suggested | "+(p.selected_suggestions+1),searchEventLabel:t.title}),window.location.href=t.url):(a=(t=(d=(e?p.searchText:p.searchInputElem.value)||"").trim()).replace(/[^a-zA-Z0-9\s\-]/g,""),"nav"==p.source&&document.getElementById("cricbuzz-plus-main-menu").setAttribute("style","opacity:0"),t.length<3?(p.onInputFocus(),p.errorText="Please enter minimum 3 characters",p.searchInputElem.value="",p.searchText=""):a.length<3?(p.errorText="Special characters not allowed",p.searchText=""):(d=a,p.searchText=d,p.dropdownVisible=!1,p.errorText="",p.last_search=d.toLowerCase(),p.limit=p.ALL_LIMIT,p.sendEvent({event:"result",text:d}),e?(p.post_params={searchType:"all",searchParams:[{attribute:"complete_name",value:d}]},p.loading=!0,p.resultsCounter++,n.get(c+d).then(function(e,t,a,n){if(e==p.resultsCounter){p.loading=!1;var o,i,r=n.data||[],s=(p.no_suggestions=!1,p.last_search=d,{});for(i in p.no_results_found=1,r)if(r[i]&&r[i].length){p.no_results_found=0;break}for(i in 1==p.no_results_found&&dataLayer.push({event:"search",searchEventAction:"Result | NA",searchEventLabel:a}),p.tabs){var l=p.tabs[i].key,c=l+"List";r[c]&&r[c].length&&(s[l]=r[c],o=i)}p.searchData=s,p.search_data_count=Object.keys(p.searchData).length,p.lastTabIndexWithData=o}}.bind(null,p.resultsCounter,e,d))):(t="Search "+("nav"==p.source?"Header":"Page"),dataLayer.push({event:"search",searchEventAction:t,searchEventLabel:d}),window.location.href="/search?q="+cb_sanitize(d))))},p.search_pass=function(e,t,a){n({method:"post",url:d,data:{type:t,id:a,title:e}}).then(function(){})}}]),CBMatches.controller("seriesStatsApi",["$scope","$http","$q",function(n,o,e){n.selectedTab="mostRuns";var t=document.getElementById("matchtype"),i=document.getElementById("seasons"),a=document.getElementById("teams");n.getSeriesStats=function(a,n){return e(function(t,e){o({method:"GET",url:"/api/series/"+a+"/"+(""!=n?n:0)}).then(function(e){t(e.data)},function(){console.log("Series Stats Api Call Error"),e()})})},n.init=function(e,t,a){n.seriesId=e,n.seriesName=t,n.seriesType=a,n.getSeriesStats(n.seriesId,n.seriesType).then(,i&&(n.selectedSeason=n.seriesId)},n.selectedMatchType=t?t.options[0].value:0,n.selectedTeam=a?a.options[0].value:0,n.setTab=function(e){n.selectedTab=e,n.setFilters()},n.setmatchType=function(){n.setFilters()},n.setTeam=function(){n.setFilters()},n.setSeason=function(){n.setFilters()},n.isTeamExists=n.setFilters=function(){var e="",t=""!=n.seriesType?n.seriesType:0,a=n.selectedTab.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),e=i?"/api/html/series/"+n.selectedSeason+"/"+a+"/"+n.selectedMatchType+"/"+n.selectedTeam+"/"+t:"/api/html/series/"+n.seriesId+"/"+a+"/"+n.selectedMatchType+"/"+n.selectedTeam+"/"+t;o({method:"GET",cache:!1,async:!0,url:e}).then(function(e){document.getElementById("seriesStatsTable").innerHTML=e.data})}}]),CBStats.controller("boostometerStats",["$scope","BoostPlayer","$http",function(n,t,a){n.seriesId=0,n.matchId=0,n.season="2020",n.boostometerStats=[],n.defaults={playerSkills:{1:"batsman",2:"bowler",3:"all-rounder",4:"Wicket-keeper"},staminaTypeArray:{stamina:"STAMINA SCORE",batting:"BATTING STAMINA SCORE",bowling:"BOWLING STAMINA SCORE"},tournamentStatsApi:"/special-content/api/boostometer/series/",matchStatsApi:"/special-content/api/boostometer/match/",allTimeFilter:!1,seriesFilter:!0,matchFilter:!1,skillFilter:!1,teamFilter:!1,staminaType:"stamina",staminaTypeValue:"STAMINA SCORE",matchName:"",skillId:1,skillType:"",teamId:0,teamName:"",itemCount:0,limit:10},n.fetch_boostometer_stats=function(e){e=o(e);a({method:"GET",cache:!1,async:!0,url:e}).then(function(e){null!=e.data&&null!=e.data?(angular.forEach(e.data,function(e){(player=new t).id=e.id,player.name=e.name,player.skillId=e.skillId,player.skill=n.get_player_skill(e.skillId),player.allTimeScore=e.allTimeScore||0,player.seasonScore=e.seasonScore||0,player.rank=e.ranking.rank,player.change=e.ranking.change,player.score=e.ranking.score,player.teamId=e.team.id,player.teamName=e.team.name,n.boostometerStats.push(player)}),n.defaults.itemCount=e.data.length):200!=e.code?console.log("Response Code: "+e.status+"|| Response Status: "+e.statusText):console.log("NUll RESPONSE")},},n.get_player_skill=function(e){var t="";switch(parseInt(e)){case 1:t="Batsman";break;case 2:t="Bowler";break;case 3:t="All-Rounder";break;case 4:t="Batsman"}return t};var o=function(e){switch(e){case"2020":apiUrl=n.defaults.tournamentStatsApi+n.defaults.staminaType+"/"+n.season;break;case"match":apiUrl=n.defaults.matchStatsApi+n.matchId+"/"+n.defaults.staminaType;break;case"allTime":apiUrl=n.defaults.tournamentStatsApi+n.defaults.staminaType+"/"+e;break;default:apiUrl=n.defaults.tournamentStatsApi+n.defaults.staminaType+"/"+n.season}return apiUrl};n.getAllTimeStats=function(e){n.defaults.allTimeFilter=!0,n.defaults.seriesFilter=!1,n.defaults.matchFilter=!1,n.boostometerStats=[],n.fetch_boostometer_stats(e)},n.getSeasonStats=function(e){n.defaults.seriesFilter=!0,n.defaults.allTimeFilter=!1,n.defaults.matchFilter=!1,n.boostometerStats=[],n.fetch_boostometer_stats(e)},n.getMatchStats=function(e,t,a){n.matchId=t,n.defaults.matchName=a,n.defaults.matchFilter=!0,n.defaults.seriesFilter=!1,n.boostometerStats=[],n.fetch_boostometer_stats(e)},n.applyStaminaTypeFilter=function(e){n.defaults.staminaType=e,n.defaults.staminaTypeValue=n.defaults.staminaTypeArray[e],n.defaults.staminaTypeFilter=!0,n.defaults.limit=10,n.boostometerStats=[];e="2020";1==n.defaults.matchFilter&&(e="match"),1==n.defaults.allTimeFilter&&(e="allTime"),n.fetch_boostometer_stats(e)},n.applySkillTeamFilter=function(e,t,a){switch(n.defaults.limit=10,e){case"skill":n.defaults.skillFilter=!0,n.defaults.skillId=t,n.defaults.skillType=a;break;case"team":n.defaults.teamFilter=!0,n.defaults.teamId=t,n.defaults.teamName=a}},n.remove_filter=function(e){switch(e){case"allTime":n.defaults.allTimeFilter=!1,n.defaults.seriesFilter=!0,n.boostometerStats=[],n.fetch_boostometer_stats("2020");break;case"series":n.defaults.seriesFilter=!1,n.boostometerStats=[],n.fetch_boostometer_stats("2020");break;case"match":n.defaults.matchFilter=!1,n.defaults.matchId=0,n.boostometerStats=[],n.fetch_boostometer_stats("2020");break;case"staminaType":n.defaults.staminaTypeFilter=!1,n.defaults.staminaType="stamina",n.defaults.staminaTypeValue="STAMINA SCORE",n.boostometerStats=[],n.fetch_boostometer_stats("2020");break;case"playerSkill":n.defaults.skillFilter=!1,n.defaults.skillType="";break;case"playerTeam":n.defaults.teamFilter=!1,n.defaults.teamName=""}},n.loadMore=function(){var e=n.defaults.limit+10;n.defaults.limit=e>n.boostometerStats.length?n.boostometerStats.length:e},n.reloadStats=function(){var e="2020";1==n.defaults.matchFilter&&(e="match"),1==n.defaults.allTimeFilter&&(e="allTime"),n.boostometerStats=[],n.fetch_boostometer_stats(e)},n.init=function(e){n.seriesId=e},n.onload=n.$evalAsync(function(){n.onload()})}]),CBStats.factory("BoostPlayer",[function(){return function(){var t=this;t.id=0,t.name="",t.skillId=0,t.skill=0,t.rank=0,t.change=0,t.speciality,t.score=0,t.teamId=0,t.teamName="",t.get_score_meter_section=function(){var e="100";switch(!0){case t.score<=20:e="20";break;case t.score<=40:e="40";break;case t.score<=60:e="60";break;case t.score<=80:e="80"}return e}}}]),CBMatches.controller("WicketZoneHighlights",["$rootScope","$sce","$scope","$http","$q","$timeout","$location",function(e,a,n,o,i,t,r){n.matchId=0,n.highlights=null,n.show_highlights=!0,n.bat_commentary_array=[],n.bowl_commentary_array=[],n.settings={defer:null,promise:null,http:null,params:{},base_path:"",url:"",call_count:0,retry_count:0,refreshId:0,refresh:15e3,timeout:3e4,force_refresh:!1,invoked_force_update:!1,video_geo:{},video_enabled:!1,pull_geo:{},mode:"pull"},n.fetch_highlights=function(e,t){try{e&&(n.settings.defer=i.defer(),o({method:"GET",cache:!1,async:!0,url:"/api/cricket-match/"+e+"/wicket-zone-match-highlights/"+t}).then(function(e){e.data?(n.show_highlights=!0,n.bat_commentary_array=[],n.bowl_commentary_array=[],angular.forEach(e.data.batting_commentary,function(e){e.comm_line=a.trustAsHtml(e.comm_line),n.bat_commentary_array.push(e.comm_line)}),angular.forEach(e.data.bowling_commentary,function(e){e.comm_line=a.trustAsHtml(e.comm_line),n.bowl_commentary_array.push(e.comm_line)}),n.highlights=e.data):n.show_highlights=!1},function(e){n.show_highlights=!1}))}catch(e){n.cblog.exception(e,"Match Center - HTTP CALL")}},n.change_match=function(e){r.url("/?matchId="+e)},e.$on("$locationChangeSuccess",function(e,t){angular.isDefined(r.search().matchId)&&n.fetch_highlights(r.search().matchId,1)})}]),CBStats.controller("iplAuctions",["$scope","$http","$timeout","storage",function(a,t,n,o){a.page="",a.filter={currency:"INR",team:{id:0,name:""},cap:0,role:0,status:0,country:{id:0,name:""},sort:{id:0,name:""},timestamp:0},a.auction_api={completed:"/api/ipl-auction/completed",upcoming:"/api/ipl-auction/upcoming",search:"/api/ipl-auction/search",faq:"/api/ipl-auction/faq"},a.auction_players=[],a.auction_data={},a.last_updatedtime=0,a.hide_nav=!1,a.search_text="",a.search_suggestions_list=[],a.search_dropdown=!1,a.$watch("search_text",function(){void 0!==a.search_text&&0<a.search_text.length&&(a.search_text=a.search_text.replace(/[^a-zA-Z0-9\s\.'-]/g,"").trim(),a.get_search_suggestions())},!0),a.search_focus=function(){0<a.search_text.length&&(a.search_dropdown=!0)},a.search_out_of_focus=a.search_item_click=function(e){location.href=e},a.get_search_suggestions=function(){a.search_suggestions_list=[],1<a.search_text.length?a.fetch_search_data():(a.search_dropdown=!0,a.search_suggestions_list.push({link:"",text:"Please enter minimum of 2 characters"}))},a.onKeyPress=a.fetch_search_data=function(){var e=a.search_text.replace(/\s+/g,"_"),e=a.auction_api.search+"/"+e;t({method:"get",url:e}).then(function(e){var t;200==e.status&&angular.isDefined(e.data)&&(a.search_suggestions_list=[],a.search_dropdown=!0,t={},angular.isDefined(e.data.auctionPlayersList)&&0<e.data.auctionPlayersList.length?angular.forEach(e.data.auctionPlayersList,function(e){t={link:"/cricket-series/ipl-2024/auction/players/"+e.playerId,text:e.playerName},a.search_suggestions_list.push(t)}):(t={link:"",text:"No such player found in this IPL Auction"},a.search_suggestions_list.push(t)))})},a.fetch_completed_api=function(){var e=a.auction_api.completed+"/"+a.filter.timestamp+"/"+a.filter.currency+"/"+a.filter.country.id+"/"+a.filter.cap+"/"+a.filter.role+"/"+a.filter.status+"/"+a.filter.team.id+"/"+a.filter.sort.id;t({method:"get",url:e}).then(function(e){200==e.status&&angular.isDefined(e.data)&&(a.auction_data=e.data,angular.forEach(e.data.auctionPlayersList,function(e){a.auction_players.push(e),a.last_updatedtime=e.updatedTime}))})},a.fetch_upcoming_api=function(){var e=a.auction_api.upcoming+"/"+a.filter.timestamp+"/"+a.filter.currency+"/"+a.filter.country.id+"/"+a.filter.cap+"/"+a.filter.role;t({method:"get",url:e}).then(function(e){200==e.status&&angular.isDefined(e.data)&&(a.auction_data=e.data,angular.forEach(e.data.auctionPlayersList,)})},a.get_faq=function(){var e=a.auction_api.faq;t({method:"get",url:e}).then(function(e){var t;200==e.status&&"undefined"!=e.data&&((t=document.getElementById("term-plan-modal")).style.visibility="visible",t.style.opacity="1","undefined"!=(t=e.data))&&(document.getElementById("term-plan-detail").innerHTML=t.faqHtml)})},a.fetch_auction_data=function(){if(""!=a.page)switch(a.page){case"completed":a.fetch_completed_api();break;case"upcoming":a.fetch_upcoming_api()}},a.add_filter=function(e,t){a.filter.timestamp=0,a.hide_nav=!0,"country"==e||"team"==e||"sort"==e?(a.filter[e].id=t.id,a.filter[e].name=t.value):(a.filter[e]=t,"currency"==e&&o.cookie.set("selectedCurrency",t,172800)),"completed"==a.page||"upcoming"==a.page?(a.auction_players=[],a.fetch_auction_data()):location.reload(),n(function(){a.hide_nav=!1},200)},a.remove_filter=function(e){switch(e){case"all":a.filter={currency:"INR",team:{id:0,name:""},cap:0,role:0,status:0,country:{id:0,name:""},sort:{id:0,name:""},timestamp:0};break;case"country":case"team":case"sort":a.filter[e]={id:0,name:""};break;default:a.filter[e]=0}a.filter.timestamp=0,a.auction_players=[],a.fetch_auction_data()},a.onload=function(){var e=o.cookie.get("selectedCurrency");void 0!==e&&(a.filter.currency=e),a.fetch_auction_data()},a.$evalAsync(function(){a.onload()}),a.isElementInViewport=a.paginate_players_list=function(){var e=document.querySelector("#auction-list-bottom"),t=!1;(t=null!=e?a.isElementInViewport(e):t)&&(e.remove(),a.filter.timestamp=a.last_updatedtime,a.fetch_auction_data())},document.addEventListener("scroll",function(){a.paginate_players_list()})}]),angular.module("CBVideos",["CBLib"])),CBPlus=(CBVideos.service("Kaltura",["$rootScope",function(e){var i=this;i.loader_log={},i.partner_id=1999781,i.load_script=function(e){var t,a=i.partner_id+"_"+e;i.loader_log[a]=i.loader_log[a]||{retry_count:0,invoked:!1},i.loader_log[a].invoked||((t=document.createElement("script")).type="text/javascript",t.async=!0,t.src="//cdnapisec.kaltura.com/p/"+i.partner_id+"/sp/"+i.partner_id+"00/embedIframeJs/uiconf_id/"+e+"/partner_id/"+i.partner_id,(e=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,e),t.onerror=function(){i.loader_log[a].retry_count<3&&i.load_script(),i.loader_log[a].retry_count++},i.loader_log[a].invoked=!0)},i.check_and_play=function(e){"undefined"!=typeof kWidget&&null!=kWidget?e():CBQueue.push(},i.embed_thumbnail=function(e,t,a){i.load_script(a),i.check_and_play(function(){kWidget.thumbEmbed(e,{targetId:e,wid:"_"+i.partner_id,uiconf_id:a,entry_id:t,flashvars:{doubleClick:{plugin:!1}}})})},i.embed=function(e,t,a,n){var o=void 0!==n&&1==n?!0:!1;i.load_script(a),i.check_and_play(function(){null!=_ele("#"+e).html()&&kWidget.destroy(e),kWidget.embed({targetId:e,wid:"_"+i.partner_id,uiconf_id:a,entry_id:t,flashvars:{autoPlay:o,doubleClick:{plugin:!1}},params:{wmode:"transparent"}})})},i.playlist=function(e,t,a,n){i.load_script(a),void 0!==n&&null!=n||(n=!1),i.check_and_play(function(){null!=_ele("#"+e).html()&&kWidget.destroy(e),kWidget.embed({targetId:e,wid:"_"+i.partner_id,uiconf_id:a,flashvars:{playlistAPI:{plugin:!0,includeInLayout:!0,autoPlay:n,autoInsert:!0,kpl0Url:"//cdnapisec.kaltura.com/index.php/partnerservices2/executeplaylist?uid=&partner_id="+i.partner_id+"&subp_id="+i.partner_id+"00&format=8&ks={ks}&playlist_id="+t}}})})}}]),CBVideos.directive("kalturaPlayer",["Kaltura","$rootScope",function(s,e){function l(){var t,a,n,e=(document.getElementsByTagName("body")[0].offsetWidth-980)/2,o=313.4+e,e=666.6+e,i=document.querySelector(".cb-comm-live-video"),r=i.querySelector(".kaltura_player"),s=9*o/16,l=0,c=0,d=(i.style.width=o+"px",i.style.left=e+"px",r.style.height=s+"px",i.offsetWidth),u=i.offsetHeight;function m(e){c=e.clientY-a,l=e.clientX-t,n&&(l<n.left?l=n.left:l>n.right-d&&(l=n.right-d),c<n.top?c=n.top:c>n.bottom-u&&(c=n.bottom-u)),i.style.left=l+"px",i.style.top=c+"px",i.style.bottom="auto"}function _(e){document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",_)}i.addEventListener("mousedown",function(e){e.preventDefault(),t=e.clientX-i.offsetLeft,a=e.clientY-i.offsetTop,document.addEventListener("mousemove",m),document.addEventListener("mouseup",_)})}return{restrict:"C",transclude:!1,scope:{entry_id:"@entryId",uiconf_id:"@uiconfId"},link:function(r,e,t){s.load_script(r.uiconf_id),e.on("click",function(){for(var e=r,t=document.getElementsByClassName("cb-comm-live-video"),a=document.getElementsByClassName("cb-comm-video-modal-wrap"),n=0;n<t.length;n++)t[n].remove();for(n=0;n<a.length;n++)a[n].remove();document.getElementsByClassName("embed-responsive").length&&document.getElementsByClassName("embed-responsive")[0].remove(),target="kaltura_player_"+e.entry_id;var o="commentary-video-"+e.entry_id,i="_ele('#commentary-video-"+e.entry_id+"').remove();",i='<div ng-draggable id="commentary-video-'+e.entry_id+'" class="disp-none cb-comm-live-video" class="ng-cloak"><div><span class="pull-right cb-video-close-btn" onclick="'+i+'">&times;</span></div><div id="'+target+'" class="kaltura_player cb-vid-modal-body text-center" style="width:100%;max-height:321px;margin:0px auto;"></div></div>';_ele("body").append(i),s.embed(target,e.entry_id,e.uiconf_id,!0),document.getElementById(o).style.display="block",l()})}}}]),CBVideos.directive("kalturaPlay",["Kaltura","$rootScope",function(o,e){return{restrict:"C",transclude:!1,scope:{entry_id:"@entryId",uiconf_id:"@uiconfId"},link:function(n,e,t){o.load_script(n.uiconf_id),e.on("click",function(){var e,t,a;target="kaltura_player_"+(e=n).entry_id,t="video_modal_"+e.entry_id,a='<div class="modal fade in" tabindex="-1" id="'+t+'" role="dialog"><div class="modal-dialog margin10" role="document"><div class="modal-content"><a href="javascript:void(0);"><label class="cb-cht-lgn-cls btn-md cbmodals" modalid="'+t+'"  style="float:right;" onclick="'+("_ele('#video_modal_"+e.entry_id+"').remove();document.getElementsByTagName('body')[0].style.cssText = 'height:null;overflow:null'")+'"><span class="text-bold cb-font-16">&#x2716;</span></label></a><div class="cb-vid-modal-body"><div id="'+target+'" class="cb-vid-modal-body text-center" style="width:100%;height:330px;margin:0px auto;"><div ></div></div></div></div></div></div>',_ele("body").append(a),o.embed(target,e.entry_id,e.uiconf_id,!0),document.getElementsByTagName("body")[0].style.cssText="height:100%;overflow:hidden",document.getElementById(t).style.display="block"})}}}]),CBVideos.directive("kalturaImgEmbedPlayer",["Kaltura","$rootScope",function(o,e){return{restrict:"C",transclude:!1,scope:{entry_id:"@entryId",uiconf_id:"@uiconfId",vid_ico:"@vidIco",vid_brdr:"@vidBrdr",vidwidth:"@vidwidth"},link:function(n,e,t){void 0!==n.vidwidth&&null!=n.vidwidth||(n.vidwidth=420);var a='<a href="javascript:void(0);"><img class="cb-vid-img"  src="//cdnapisec.kaltura.com/p/1999781/thumbnail/width/'+n.vidwidth+"/entry_id/"+n.entry_id+'" ><div class="'+n.vid_brdr+'"  style="margin-left:'+(n.vidwidth/2-20)+"px;margin-top:-"+(n.vidwidth/1.3/2+20)+'px;"><div class="'+n.vid_ico+'" >&#9658;</div></div></a>';e.html(a),o.load_script(n.uiconf_id),e.on("click",function(){var e,t,a;target="kaltura_player_"+(e=n).entry_id,t="video_img_modal_"+e.entry_id,a='<div class="modal fade in" tabindex="-1" id="'+t+'" role="dialog"><div class="modal-dialog margin10" role="document"><div class="modal-content"><a href="javascript:void(0);"><label class="cb-cht-lgn-cls btn-md cbmodals" modalid="'+t+'"  style="float:right;" onclick="'+("_ele('#video_img_modal_"+e.entry_id+"').remove();")+'"><span class="text-bold cb-font-16">&#x2716;</span></label></a><div class="cb-vid-modal-body"><div id="'+target+'" class="cb-vid-modal-body text-center" style="width:100%;height:330px;margin:0px auto;"><div ></div></div></div></div></div></div>',_ele("body").append(a),o.embed(target,e.entry_id,e.uiconf_id,!0),document.getElementById(t).style.display="block"})}}}]),CBVideos.directive("kalturaEmbed",["Kaltura","$rootScope",function(o,i){return{restrict:"C",transclude:!1,scope:{entry_id:"@entryId",uiconf_id:"@uiconfId"},template:'<div class="embed-responsive" id="video_embed" style="width:94%;height:100%;"><div class="spinner"></div></div>',link:function(e,t,a){try{o.load_script(e.uiconf_id);var n=document.getElementById("video_embed");void 0!==n&&n.setAttribute("id","video_embed_"+e.entry_id),o.check_and_play(function(){target="video_embed_"+e.entry_id,o.embed_thumbnail(target,e.entry_id,e.uiconf_id)})}catch(e){i.cblog.exception(e,"Kaltura Embed")}}}}]),CBVideos.directive("kalturaPlaylist",["Kaltura","$rootScope",function(o,i){return{restrict:"C",transclude:!1,scope:{entry_id:"@entryId",uiconf_id:"@uiconfId",uiautoplay:"@uiautoplay"},template:'<div class="embed-responsive-item" id="video_embed" style="width:100%;height:100%;"><div class="spinner"></div></div>',link:function(t,e,a){try{o.load_script(t.uiconf_id);var n=document.getElementById("video_embed");void 0!==n&&n.setAttribute("id","video_embed_"+t.entry_id),o.check_and_play(function(){var e;target="video_embed_"+(e=t).entry_id,void 0!==e.uiautoplay&&null!=e.uiautoplay||(e.uiautoplay=!1),o.playlist(target,e.entry_id,e.uiconf_id,e.uiautoplay)})}catch(e){i.cblog.exception(e,"Kaltura Embed Playlist")}}}}]),CBVideos.directive("videoEmbed",["Kaltura","$rootScope",function(e,i){return{restrict:"C",transclude:!1,scope:{video_id:"@videoId",video_url:"@videoUrl"},template:'<div class="embed-responsive" id="video_embed" style="width:100%;height:100%;"><div class="spinner"></div></div>',link:function(e,t,a){try{var n=document.getElementById("video_embed");void 0!==n&&n.setAttribute("id","video_embed_"+e.video_id),o='<iframe class="embed-responsive-item" src="/cricket-match-videos-embed/'+e.video_url+'" framespacing="0" allowtransparency="true" marginwidth="0" marginheight="0" vspace="0" hspace="0" scrolling="no" frameborder="no" width="100%" height="330px"></iframe>',document.getElementById("video_embed_"+e.video_id).innerHTML=o}catch(e){i.cblog.exception(e,"Kaltura Video Embed")}var o}}}]),CBVideos.directive("videoEmbedPlayer",["Kaltura","$rootScope","$compile",function(e,a,r){return{restrict:"C",transclude:!1,scope:{video_id:"@videoId",video_url:"@videoUrl"},link:function(i,e,t){try{e.on("click",function(){for(var e=document.getElementsByClassName("embed-responsive"),t=0;t<e.length;t++)e[t].remove();var a,n,o='<div class="embed-responsive" id="video_embed_'+i.video_id+'" style="width:100%;height:100%;"><div class="spinner"></div></div>';document.getElementById("video-container-"+i.video_id).innerHTML=o,a='<iframe class="embed-responsive-item" src="/cricket-match-videos-embed/'+(o=i).video_url+'" framespacing="0" allowtransparency="true" marginwidth="0" marginheight="0" vspace="0" hspace="0" scrolling="no" frameborder="no" width="100%" height="330px"  allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>',document.getElementById("video_embed_"+o.video_id).innerHTML=a,n=(a=angular.element(document.querySelector("#commentary-video-"+o.video_id))).clone(!0),r(n)(o),(sourceWrap=angular.element("<div class='cb-comm-video-modal-wrap' id='commentary-video-wrap"+o.video_id+"'></div>")).append(n),_ele("body").append(sourceWrap),a[0].getElementsByClassName("embed-responsive")[0].remove()})}catch(e){a.cblog.exception(e,"Kaltura Video Embed")}}}}]),CBVideos.directive("ngDraggable",["$document",function(m){return{restrict:"A",link:function(e,t,a){var n,o,i,r=0,s=0,l=t[0].offsetWidth,c=t[0].offsetHeight;function d(e){s=e.clientY-o,r=e.clientX-n,i&&(r<i.left?r=i.left:r>i.right-l&&(r=i.right-l),s<i.top?s=i.top:s>i.bottom-c&&(s=i.bottom-c)),t.css({top:s+"px",left:r+"px",bottom:"auto"})}.on("mousedown",function(e){e.preventDefault(),n=e.clientX-t[0].offsetLeft,o=e.clientY-t[0].offsetTop,m.on("mousemove",d),m.on("mouseup",u)})}}}]),CBVideos.service("urlListener",["$rootScope",function(e){var n=this;n.scopes={},n.lastTab="",n.initialTab="",n.registerScope=n.setOriginalUrl=n.setLastTab=function(e){n.lastTab=e},n.setInitialTab=window.onpopstate=function(e){var t=(t=e.state)||{type:"list",tab:n.initialTab},a=n.scopes[t.type];if(a)switch(t.type){case"modal":a.open_modal(t.videojson,!0,!0);break;case"list":t.tab||n.lastTab;n.setLastTab(t.tab),n.scopes.modal&&n.scopes.modal.close_modal(!0),a.switchTab(t.tab,!0)}}}]),CBVideos.controller("cbvideomodals",["$scope","$document","$http","$timeout","Analytics","urlListener",function(o,e,t,i,r,a){var s=this,l=(a.registerScope("modal",o),o.init=function(e){o.videoObj={},o.modalId=e,o.commentsVisible=!1,o.suggestedVideos=[],o.commentHeight=0,o.carouselState={itemsPerLine:0,singleWidth:0,index:0,translateX:0},o.originalUrl="",s.modalEl=document.getElementById(e)},o.log_ga=function(e,t,a){e&&r.gtm.event("SuggestedVideos","suggested",a),window.location=t},o.toggle_comments=function(){o.commentsVisible=!o.commentsVisible},o.open_modal=function(e,t,a,n){t||(o.originalUrl=window.location.pathname),e=e.replace(/&#39;/g,"'").replace(/&#34;/g,'"'),o.videoObj=JSON.parse(e||"{}"),o.videoObj.headline?o.videoObj.headline=o.videoObj.headline.replace(/-squote-/g,"'").replace(/-dquote-/g,'"'):o.videoObj.headline="",o.videoObj.description?o.videoObj.description=o.videoObj.description.replace(/-squote-/g,"'").replace(/-dquote-/g,'"'):o.videoObj.description="";var t=o.videoObj.videoId+"/"+cb_sanitize(o.videoObj.headline),n=(n&&(t="latest/"+t),o.videoObj.url=window.VIDEO_URL_PREFIX+t,o.videoObj.urlPathname=window.VIDEO_BASE_URL_PREFIX+t,a||window.history.pushState({type:"modal",videoId:o.videoObj.videoId,videojson:e},"",o.videoObj.urlPathname),r.gtm.pageView("CricketVideosDetail",o.videoObj.urlPathname),s.modalEl.style.display="block",document.getElementsByTagName("script")[0]),a=("video_player_script"!=n.id&&((t=document.createElement("script")).id="video_player_script",t.type="text/javascript",t.src=window.VIDEO_BASE_URL,n.parentNode.insertBefore(t,n)),"undefined"!=typeof kWidget&&kWidget&&kWidget.destroy("kaltura_player"),window.VIDEO_PLACEHOLDER_BG.replace("{id}",o.videoObj.mappingId),window.VIDEO_PLACEHOLDER_BG.replace("{id}",o.videoObj.mappingId)),e=s.modalEl.querySelector("#kaltura_player");e.style.background=a,e.innerHTML=window.VIDEO_PLACEHOLDER_ELEM,CBQueueOnLoad.push(function(){setTimeout(function(){var e={targetId:"kaltura_player",wid:"_1999781",uiconf_id:"33630912",flashvars:{autoPlay:!0},entry_id:o.videoObj.mappingId};o.videoObj.is_ad_cat&&(e.doubleClick={adTagUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=300x250|854x480|400x300|300x250&iu=/1024780/Web//videos//What_The_Duck&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1",leadWithFlash:"true",disableCompanionAds:"false",htmlCompanions:"testCompanionSquare:300:250;testCompanionLong:728:90",debugMode:"false"},e.uiVars=[{key:"adsOnReplay",value:"true"},{key:"ForceFlashOnDesktopSafari",value:"true"},{key:"debugMode",value:"false"},{key:"inlineScript",value:"false"}]),kWidget.embed(e)},1e3)}),l(),(el=document.getElementsByTagName("body")[0]).style.overflow="hidden","undefined"!=typeof FB&&FB&&((t=s.modalEl.querySelector("#vidModalComments")).innerHTML='<div class="fb-comments" data-href="'+o.videoObj.url+'" data-width="310" data-numposts="10" data-colorscheme="light"></div>',FB.XFBML.parse(t)),i(function(){var e=s.modalEl.querySelector("#modalDetail").offsetHeight;o.commentHeight=e},1e3)},o.close_modal=function(e){s.modalEl.style.display="none","undefined"!=typeof kWidget&&kWidget&&kWidget.destroy("kaltura_player"),o.commentsVisible=!1,o.suggestedVideos=[],o.carouselState.index=0,o.carouselState.translateX=0,e||a.setOriginalUrl(),(el=document.getElementsByTagName("body")[0]).style.overflow=null},o.carousel_move=function(e){var t,a=o.carouselState,n=(a.itemsPerLine||(t=(n=s.modalEl.querySelector("#suggestionList")).offsetWidth,n=n.querySelector(".suggestionItem"),a.singleWidth=n.offsetWidth,a.itemsPerLine=Math.floor(t/a.singleWidth)),a.index);0<e?0<o.suggestedVideos.length-a.itemsPerLine*(a.index+1)&&(n=a.index+1):0<a.index&&(n=a.index-1),n!=a.index&&(a.index=n,a.translateX=-n*a.itemsPerLine*a.singleWidth),o.carouselState=a},function(){var e="/cricket-videos/api/"+o.videoObj.videoId;t.get(e).then(function(e,t){o.videoObj.videoId==e&&(e=t.data||[],o.suggestedVideos=e)}.bind(this,o.videoObj.videoId))})}]),CBLib.controller("videosTabs",["$http","$rootScope","$scope","Analytics","urlListener","$compile",function(e,t,r,a,s,n){s.registerScope("list",r),r.init=function(e,t,a,n,o,i){r.current=o,r.url=e,r.track=a,r.lastPt=t,r.append=n,r.visible=!0,r.fetchingEnabled=!1,r.pageNo=2,r.baseUrl=i,s.setInitialTab(o)},r.switchTab=function(e,t){r.current=e,r.fetchingEnabled="all"==e,t||window.history.pushState({type:"list",tab:e},"",r.baseUrl+e),a.gtm.pageView("PageView",r.baseUrl+e),r.$applyAsync()},window.addEventListener("popstate",}]),CBLib.directive("videosAjaxPagination",["$http","$compile","$rootScope","Analytics",function(c,d,u,m){return{restrict:"C",transclude:!1,scope:{url:"@url",append:"@append",pageNo:"@pageNo",track:"@track",activeheight:"@activeheight",fetchingEnabled:"@fetching",lastPt:"@last",cat:"@cat",totalVideos:"@total"},link:function(l,e,t){angular.element(window).on("ready load scroll",function(){var a,e,n,t,o,i,r,s;null!=l.url&&null!=l.track&&(e=c,n=u,null!=(a=l).url)&&null!=a.track&&a.fetchingEnabled&&a.lastPt&&(t=_ele(a.track)[0].getBoundingClientRect(),o=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,r=300,a.pageNo||(a.pageNo=2),null!=a.activeheight&&(r=a.activeheight),s=a.url+a.lastPt+"/"+a.pageNo,a.cat&&(s+="/"+a.cat),Math.abs(t.top)>=r)&&Math.abs(t.bottom)<=i+r&&0<=t.left&&t.right<=o&&(a.fetchingEnabled=!1,e({method:"GET",url:s,cache:!1,headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}).then(function(e){var e=e.data,t=/<count>(.*?)<\/count>/g.exec(e)||0,e=e.replace(t[0],""),t=/<lastpt>(.*?)<\/lastpt>/g.exec(e)||0,t=(e=e.replace(t[0],""),d(_ele(a.append).append(e))(a),document.getElementById("lastPt")),e=(a.lastPt=t.value,lastPt.remove(),document.getElementById("totalVideos"));a.totalVideos=e.value,(a.totalVideos<1||10<a.pageNo)&&(t=document.getElementById("video-page-spinner"))&&t.remove(),e.remove(),m.gtm.pageView("InfiniteScrolling",s),n.reload_ads(),a.pageNo++,a.pageNo<=15?a.fetchingEnabled=!0:a.visible=!1}))})}}}]),CBLib.controller("videosLatest",["$http","$rootScope","$scope","Analytics","urlListener","$compile",function(e,t,r,a,s,n){s.registerScope("list",r),r.init=function(e,t,a,n,o,i){r.current=o,r.url=e,r.track=a,r.lastPt=t,r.append=n,r.visible=!0,r.fetchingEnabled=!0,r.pageNo=2,r.baseUrl=i,s.setInitialTab(o)},r.switchTab=function(e,t){r.current=e,r.fetchingEnabled="all"==e,t||window.history.pushState({type:"list",tab:e},"",r.baseUrl+e),r.$applyAsync()}}]),CBLib.directive("videosListCarousal",["$http","$compile","$rootScope","Analytics",function(e,t,a,n){function o(e,t,a){a.styles={left:e},t[0].querySelector(".videos-carousal-wrapper").style.left=e}function i(e,t,a){var n=parseInt(a.styles.left),o=t[0].querySelector(".videos-carousal-wrapper").offsetWidth,i=0;if("prev"===e){if("homepage"==a.pagename)switch(a.diff=a.diff+3,i=197,a.diff){case 4:i+=728;break;case 5:i+=467;break;case 6:i+=206}n=n+o-i}else{if("homepage"==a.pagename)switch(a.diff=a.diff-3,i=197,a.diff){case 1:i+=728;break;case 2:i+=467;break;case 3:i+=206}n=n-o+i}return e=n,o=a,(a=t)[0].querySelector(".cb-vid-slider-arr-prev").style.display=e<0?"inline-block":"none",t=(parseInt(o.total)/parseInt(o.minlength)-1)*a[0].querySelector(".videos-carousal-wrapper").offsetWidth,a[0].querySelector(".cb-vid-slider-arr-next").style.display=Math.abs(e)>=t?"none":"inline-block","homepage"==o.pagename&&(a[0].querySelector(".cb-vid-slider-arr-next").style.display=o.diff<=3?"none":"inline-block"),n}return{restrict:"C",transclude:!1,scope:{total:"@total",minlength:"@minlength",gtmlabel:"@gtmlabel",pagename:"@pagename"},link:function(a,n,e){var t;parseInt(a.total)>parseInt(a.minlength)&&(a.styles={left:"0px"},a.prevDisabled=!0,a.nextDisabled=!1,a.pageLabel=a.pagename?a.pagename+"_"+a.gtmlabel:a.gtmlabel,a.homePageClass="homepage"==a.pagename?"cb-hmpg-slider-arr":" ",a.diff=a.total,t='<div class="cb-vid-slider-arrs"><div class="cb-vid-slider-arr cb-vid-slider-arr-prev '+a.homePageClass+'"><img src="https://static.cricbuzz.com/images/view_prev.png"></div><div class="cb-vid-slider-arr cb-vid-slider-arr-next cb-view-all-ga '+a.homePageClass+'" gtm-title="View All" gtm-video-label= "'+a.pageLabel+'"><img class="cb-view-all-ga" gtm-title="View All" gtm-video-label= "'+a.pageLabel+'" src="https://static.cricbuzz.com/images/view_next.png"></div></div>',n[0].querySelector(".cb-vid-slider-arr-prev")||(n.append(t),n[0].querySelector(".cb-vid-slider-arr-prev").onclick=function(){var e,t;o(i("prev",e=n,t=a)+"px",e,t)},n[0].querySelector(".cb-vid-slider-arr-next").onclick=function(){var e,t;o(i("next",e=n,t=a)+"px",e,t)}))}}}]),angular.module("CBPlus",["CBLib"])),CBFantasy=(CBPlus.controller("CBPlusAuth",["$scope","$http","storage","$rootScope","$compile","$sce","$q",function(r,s,e,t,n,a,o){r.termIdSelected=3,r.isRenewable=!0,r.isfree=!1,r.verify_notice=null,r.countdown_start_time=0,r.maxRetries=0,r.page_type="",r.user_state="NOTSET",r.plan_state="NOTSET",r.selectedCountryCode="",r.countryCodeList=[],r.isMobileLoginEnabled=!1,r.user_chat_name="",r.user={name:"",image_id:"213666"},r.userChatDetails={},r.chatChannelDetails={},r.transactions=[],r.coupons=[],r.save_link=!1,r.content_type="news",r.content_id=0,r.planTerm=0,r.isChecked=!0,r.isMobileVerified=!1,r.isEmailVerified=!1,r.token_verified=!1,r.auth_apis={login:"/cbplus/auth/user/login",sign_up:"/cbplus/auth/user/sign-up",sign_up_mobile:"/cbplus/auth/user/sign-up-mobile",verify_otp:"/cbplus/auth/user/verify-otp",verify_mobile_otp:"/cbplus/auth/user/verify-mobile-otp",verify_token:"/cbplus/auth/user/verify-token",refresh_token:"/cbplus/auth/user/refresh-token",chat_box:"/cbplus/auth/user/chat-box",google_login:"/cbplus/auth/user/google-sign-in",logout:"/cbplus/auth/user/logout",delete:"/cbplus/auth/user/delete-account"},r.client_auth_apis={send_otp:"/cbplus/auth/user/timwe/mobile-login",verify_otp:"/cbplus/auth/user/timwe/verify-mobile-otp"},r.redirection_url={plan_detail_promo:"/premium-subscription/user/select-plan/cricbuzz-promo",account_info:"/premium-subscription/user/account-info",login_page:"/premium-subscription/user/login",cb_plus_home:"/cb-plus/premium-content/home",plan_detail_news:"/premium-subscription/user/select-plan/cricbuzz-news",plan_detail_video:"/premium-subscription/user/select-plan/cricbuzz-video",cancel_subscription_page:"/premium-subscription/user/cancel-subscription",client_plan:"/premium-subscription/user/client-plans/"},r.subscription_apis={payment:"/cbplus/payment/user/pymnt",update_user:"/cbplus/auth/user/update/profile",payment_transactions:"/cbplus/auth/user/payment-transactions",cancel_subscription:"/cbplus/payment/user/subscription/cancel",support_request:"/info/user/support",coupons_list:"/cbplus/auth/user/coupons-list",coupon_code_detail:"/cbplus/premium/coupon-code-detail",term_plan_detail:"/cbplus/premium/plan-term-detail",deals_list:"/cbplus/auth/user/deals-list",user_deals_list:"/cbplus/auth/subscribed-user/deals-list",user_deal_detail:"/cbplus/auth/subscribed-user/deal-detail/deals",unlock_deal:"/cbplus/auth/subscribed-user/deal-detail/unlock",non_user_deal_detail:"/cbplus/auth/non-user/deal-detail",redeem_coupon:"/cbplus/auth/user/redeem-coupon",plan_detail_view:"/cbplus/auth/user/plan-detail/",sms_enabled_countries:"/cbplus/auth/user/countries/sms"},r.content_apis={news:"/cbplus/premium-content/news/",video:"/cbplus/premium-content/video/",video_embed:"/cbplus/premium-content/cricket-videos-embed/",cb_featured:"/cbplus/home/premium-content/featured"},r.country_phone_num_length={"+91":10,"+353":9,"+61":10,"+1868":7,"+1242":7,"+1246":7,"+1268":7,"+1473":7,"+49":10,"+968":8,"+39":10,"+32":9,"+1":10,"+31":9,"+44":10,"+254":9,"+965":8,"+64":9,"+27":9,"+94":9,"+92":10,"+880":10,"+93":9,"+977":10},r.initiate_accordion_menu=function(){var e=document.querySelectorAll(".accordion"),t=e[0],a=t.nextElementSibling;t.children[1].classList.toggle("rotate-ngt-90"),a.style.maxHeight=a.scrollHeight+"px",e.forEach(function(e){e.onclick=function(){this.children[1].classList.toggle("rotate-ngt-90");var e=this.nextElementSibling;e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px"}})},r.initiate_cb_editorial_carousal=function(){var t=document.querySelector(".cb-editorial-carousal-wrapper"),a=!1;t.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),a=!0,t.style.cursor="grabbing"}),t.addEventListener("mouseup",,t.addEventListener("mouseleave",function(){a=!1}),t.addEventListener("mousemove",function(e){e.preventDefault(),e.stopPropagation(),a&&(t.parentElement.scrollLeft-=e.movementX)})},r.start_home_carousal=function(){for(var o=document.querySelector(".cb-carousal-wrapper"),i=document.querySelectorAll(".cb-carousal-card"),r=document.querySelectorAll(".dot"),s=0,a=0,e=0;e<r.length;e++)0===e&&(r[e].style.background="#FFF"),r[e].addEventListener("click",t);function t(){for(var e=Array.from(r).indexOf(this),t=s-e,a=0;a<i.length;a++)r[a].style.background=a===e?"#FFF":"transparent";var n=e*o.clientWidth;0!=t&&(o.style.transform="translateX(-"+n+"px)"),s=e}setInterval(function(){if(s<i.length-1){a=(s+=1)*o.clientWidth,o.style.transform="translateX(-"+a+"px)";for(var e=0;e<i.length;e++)r[e].style.background=e===s?"#FFF":"transparent"}else{o.style.transform="translateX(0px)";for(var t=0;t<i.length;t++)r[t].style.background=0===t?"#FFF":"transparent";a=s=0}},5e3)},r.log_firebase_event=function(e){firebase.analytics().logEvent("plan-detail",{plan:e})},r.log_client_subscription_firebase_event=function(e,t){"undefined"!=typeof firebase?firebase.analytics().logEvent(e,t):setTimeout(function(){r.log_client_subscription_firebase_event(e,t)},2e3)},r.disable_otp_boxes=function(){for(var e=1;e<=6;e++)document.getElementById("digit-"+e)&&(document.getElementById("digit-"+e).disabled=!0)},r.enable_otp_boxes=function(){for(var e=1;e<=6;e++)document.getElementById("digit-"+e)&&(document.getElementById("digit-"+e).disabled=!1)},r.send_update_mobile_otp=function(){var a=document.getElementById("cb-user-mobile-input").value,n=(localStorage.setItem("usermobile",r.selectedCountryCode+a),document.getElementById("error_from_response_message").innerText="",document.getElementById("cb-update-mobile-btn"));n.setAttribute("disabled","disabled"),n.classList.add("cb-disabled-button"),n.innerHTML="Loading ...",s({method:"post",url:r.auth_apis.sign_up_mobile,data:{AccessToken:localStorage.getItem("AccessToken"),user:{phone_number:r.selectedCountryCode+a}}}).then(function(e){var t;200!=e.status||angular.isDefined(e.data.exception)?(document.getElementById("error_from_response_message").style.display="block",document.getElementById("error_from_response_message").innerHTML=e.data.message):(r.enable_otp_boxes(),t=new Date,r.show_timer=!0,r.countdown_start_time=1e3*(Math.floor(t.getTime()/1e3)+120),r.maxRetries=e.data.maxRetries,document.getElementById("cb-update-mobile-block").style.display="none",document.getElementById("cb-update-mobile-otp").style.display="block",document.getElementById("mobileUsernameValue").innerText=r.selectedCountryCode+a),n.removeAttribute("disabled"),n.classList.remove("cb-disabled-button"),n.innerHTML="Continue"})},r.send_mobile_otp=function(){var a=document.getElementById("cb-user-mobile-input").value,n=(document.getElementById("error_form_mobile_signup").innerText="",localStorage.setItem("usermobile",r.selectedCountryCode+a),document.getElementById("mobile-continue-button"));n.setAttribute("disabled","disabled"),n.classList.add("cb-disabled-button"),n.innerHTML="Loading ...",s({method:"post",url:r.auth_apis.sign_up_mobile,data:{AccessToken:localStorage.getItem("AccessToken"),user:{phone_number:r.selectedCountryCode+a}}}).then(function(e){var t;200!=e.status||angular.isDefined(e.data.exception)?(document.getElementById("error_form_mobile_signup").innerText=e.data.message,document.getElementById("error_form_mobile_signup").style.display="block"):(r.enable_otp_boxes(),r.show_timer=!0,t=new Date,r.countdown_start_time=1e3*(Math.floor(t.getTime()/1e3)+120),document.getElementById("signup-mobile-block").style.display="none",document.getElementById("mobileOtpBoxWrapper").style.display="block",document.getElementById("cb-signup-mobile-otp").style.display="block",document.getElementById("mobileUsernameValue").innerText=r.selectedCountryCode+a,r.maxRetries=e.data.maxRetries),n.removeAttribute("disabled","disabled"),n.classList.remove("cb-disabled-button"),n.innerHTML="Continue"})},r.onOtpPaste=function(e){for(var t=e.split(""),a=1;a<=6;a++)document.getElementById("digit-"+a).value=t[a-1]||""},r.formatOtpDigit=r.onCountryCodeValueChange=function(){document.getElementById("countryCodeDiv").innerText=r.selectedCountryCode;var e=document.getElementById("countryCode"),e=e.options[e.selectedIndex].text;document.getElementById("countryCodeDiv").title=e,document.getElementById("cb-user-mobile-input").focus(),document.getElementById("cb-user-mobile-input").setAttribute("maxLength",r.country_phone_num_length[r.selectedCountryCode]||"15")},r.getEnabledCountryCodes=function(t){s({method:"GET",url:r.subscription_apis.sms_enabled_countries}).then(function(e){void 0!==e.data&&((e=e.data.smsEnabledCountry)&&0!==e.length?(r.isMobileLoginEnabled=!0,r.countryCodeList=e.map(function(e,t){return{value:e.dialCode,text:e.dialCode+" "+e.name,selected:0===t}}),r.selectedCountryCode=r.countryCodeList[0].value,document.getElementById("countryCodeDiv").innerText=r.countryCodeList[0].value,document.getElementById("countryCodeDiv").title=r.countryCodeList[0].text,document.getElementById("cb-user-mobile-input").setAttribute("maxLength",r.country_phone_num_length[r.selectedCountryCode]||"15")):(t&&window.location.replace(r.redirection_url.login_page),r.isMobileLoginEnabled=!1))})},r.cb_plus_email_signUp=function(){var a=document.getElementById("cb-user-email-input").value.toLowerCase(),n=(document.getElementById("error_form_email_sign_up").innerText="",localStorage.setItem("username",a),document.getElementById("email-continue-button"));n.setAttribute("disabled","disabled"),n.classList.add("cb-disabled-button"),n.innerHTML="Loading ...",s({method:"post",url:r.auth_apis.sign_up,data:{username:a}}).then(function(e){var t;200!=e.status||angular.isDefined(e.data.exception)?(document.getElementById("error_form_email_sign_up").innerText=e.data.message,document.getElementById("error_form_email_sign_up").style.display="block"):(r.enable_otp_boxes(),r.show_timer=!0,t=new Date,r.countdown_start_time=1e3*(Math.floor(t.getTime()/1e3)+120),sessionStorage.setItem("cbp_login_session",e.data.Session),r.maxRetries=e.data.maxRetries,document.getElementById("signup-email-block").style.display="none",document.getElementById("cb-signup-email-otp").style.display="block",document.getElementById("emailUsernameValue").innerText=a),n.removeAttribute("disabled"),n.classList.remove("cb-disabled-button"),n.innerHTML="Continue"})},r.on_submit_login=function(){var e=document.getElementById("cb-user-email-input")?0!==document.getElementById("cb-user-email-input").value.length:"",t=r.selectedCountryCode+(document.getElementById("cb-user-mobile-input")?document.getElementById("cb-user-mobile-input").value:null),a=document.getElementById("cb-user-email-input")?document.getElementById("cb-user-email-input").value:"";document.getElementById("cb-otp-sent-to").innerText=e?"email":"mobile",e?localStorage.setItem("username",a):localStorage.setItem("usermobile",t),e?r.cb_plus_login(a):r.cb_plus_login(t)},r.cb_plus_login=function(a){document.getElementById("error_message").innerText="";var n=document.getElementById("cb-login-continue-button");n.setAttribute("disabled","disabled"),n.classList.add("cb-disabled-button"),n.innerHTML="Loading ...",s({method:"post",url:r.auth_apis.login,data:{username:a}}).then(function(e){var t;200!=e.status||angular.isDefined(e.data.exception)?(document.getElementById("error_message").innerText=e.data.message,document.getElementById("error_message").style.display="block"):(r.enable_otp_boxes(),r.show_timer=!0,t=new Date,r.countdown_start_time=1e3*(Math.floor(t.getTime()/1e3)+120),sessionStorage.setItem("cbp_login_session",e.data.Session),localStorage.setItem("username",e.data.username),r.maxRetries=e.data.maxRetries,document.getElementById("cb-login-block").style.display="none",document.getElementById("cb-login-otp").style.display="block",document.getElementById("emailUsernameValue").innerText=a),n.removeAttribute("disabled"),n.classList.remove("cb-disabled-button"),n.innerHTML="Continue"})},r.submit_otp=function(e){var t=r.getEnteredOtp();0<t.length&&6==t.length&&null!=t&&!isNaN(t)?(document.getElementById("cb-login-mobile-error")&&(document.getElementById("cb-login-mobile-error").innerText=""),document.getElementById("error_form_otp")&&(document.getElementById("error_form_otp").style.display="none"),document.getElementById("cb-otp-btn").setAttribute("disabled","disabled"),document.getElementById("cb-otp-btn").classList.add("cb-disabled-button"),document.getElementById("cb-otp-btn").innerHTML="Loading ...","login"===e?r.verify_entered_login_otp(t):"email"===e?r.verify_entered_email_otp(t):r.verify_entered_mobile_otp(t)):document.getElementById("error_form_otp").style.display="block"},r.verify_entered_login_otp=function(e){s({method:"post",url:r.auth_apis.verify_otp,data:{username:localStorage.getItem("username"),Session:sessionStorage.getItem("cbp_login_session"),otp:e}}).then(function(e){angular.isDefined(e.data.exception)?(document.getElementById("cb-otp-btn").innerHTML="SUBMIT",document.getElementById("login-verify-error").innerHTML=e.data.message,document.getElementById("login-verify-error").style.display="block",1===r.maxRetries&&(r.times_up(!0),r.disable_otp_boxes()),!angular.isDefined(e.data.errorCode)||"14011"!=e.data.errorCode&&"14290"!=e.data.errorCode||r.times_up(!0)):(sessionStorage.removeItem("cbp_login_session"),localStorage.setItem("AccessToken",e.data.AccessToken),localStorage.setItem("RefreshToken",e.data.RefreshToken),r.verify_access_token())})},r.verify_entered_email_otp=function(e){s({method:"post",url:r.auth_apis.verify_otp,data:{username:localStorage.getItem("username"),Session:sessionStorage.getItem("cbp_login_session"),otp:e}}).then(function(e){angular.isDefined(e.data.exception)?(document.getElementById("cb-otp-btn").innerHTML="SUBMIT",document.getElementById("login-verify-error").innerHTML=e.data.message,document.getElementById("login-verify-error").style.display="block",1===r.maxRetries&&(r.times_up(!0),r.disable_otp_boxes()),!angular.isDefined(e.data.errorCode)||"14011"!=e.data.errorCode&&"14290"!=e.data.errorCode||r.times_up(!0)):(sessionStorage.removeItem("cbp_login_session"),localStorage.setItem("AccessToken",e.data.AccessToken),localStorage.setItem("RefreshToken",e.data.RefreshToken),r.isMobileLoginEnabled?(document.getElementById("cb-signup-email-otp").style.display="none",document.getElementById("signup-mobile-block").style.display="block",document.getElementById("cb-signup-email-otp").innerHTML="",r.show_timer=!1):r.verify_access_token())})},r.verify_entered_mobile_otp=function(e){s({method:"post",url:r.auth_apis.verify_mobile_otp,data:{AccessToken:localStorage.getItem("AccessToken"),otp:e}}).then(function(e){angular.isDefined(e.data.exception)?(document.getElementById("cb-otp-btn").innerHTML="SUBMIT",document.getElementById("login-verify-error").innerHTML=e.data.message,document.getElementById("login-verify-error").style.display="block",1===r.maxRetries&&(r.times_up(!0),r.disable_otp_boxes()),!angular.isDefined(e.data.errorCode)||"14011"!=e.data.errorCode&&"14290"!=e.data.errorCode||r.times_up(!0)):r.verify_access_token()})},r.resend_otp=function(e){r.clear_entered_otp_elem(),document.getElementById("login-verify-error").innerText="","cb-signup-email-otp"===e?r.cb_plus_email_signUp():"cb-signup-mobile-otp"===e?r.send_mobile_otp():"cb-login-otp"===e?r.on_submit_login():"cb-update-mobile-otp"===e&&r.send_update_mobile_otp()},r.edit_user_input=function(e){function t(e,t){document.getElementById(e).style.display="none",document.getElementById(t).style.display="block"}function a(e){document.getElementById(e).removeAttribute("disabled"),document.getElementById(e).classList.remove("cb-disabled-button"),document.getElementById(e).innerHTML="Continue"}switch(r.clear_entered_otp_elem(),document.getElementById("login-verify-error").innerText="",r.show_timer=!1,e){case"cb-signup-email-otp":a("email-continue-button"),t("cb-signup-email-otp","signup-email-block");break;case"cb-signup-mobile-otp":a("mobile-continue-button"),t("cb-signup-mobile-otp","signup-mobile-block");break;case"cb-login-otp":a("cb-login-continue-button"),t("cb-login-otp","cb-login-block");break;case"cb-update-mobile-otp":a("cb-update-mobile-btn"),t("cb-update-mobile-otp","cb-update-mobile-block")}},r.verify_access_token=function(){var e=localStorage.getItem("AccessToken"),t=localStorage.getItem("RefreshToken");null!=e?s({method:"post",url:r.auth_apis.verify_token,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){200==e.status&&angular.isDefined(e.data.user)?(r.verify_notice=e.data.notice,r.user=e.data.user,r.isMobileVerified=e.data.user.phone_number_verified,r.isEmailVerified=e.data.user.email_verified,r.user.plan_state=r.get_plan_state(e.data.user.state),localStorage.setItem("PlanState",e.data.user.plan_state),localStorage.setItem("UserState",e.data.user.state),localStorage.setItem("isUserMobileVerified",!r.isMobileLoginEnabled||e.data.user.phone_number_verified),localStorage.setItem("PlanId",e.data.user.plan.planId),localStorage.setItem("TermId",e.data.user.plan.termId),localStorage.setItem("UserId",e.data.user.id),localStorage.setItem("User",JSON.stringify(e.data.user)),r.redirect_after_token_verified(),"CANCELLED"==e.data.user.state&&localStorage.setItem("CancelAlertNotice",JSON.stringify(e.data.notice))):angular.isDefined(e.data.exception)&&"14001"==e.data.errorCode?(localStorage.removeItem("AccessToken"),r.refresh_token()):(r.delete_all_storage_variables(),"login"==r.page_type&&"account"!=r.page_type||"cbContent"==r.page_type||"news"==r.content_type||"video"==r.content_type||window.location.replace(r.redirection_url.login_page))}):null!=t?r.refresh_token():(r.token_verified=!0,r.delete_all_storage_variables(),"login"==r.page_type&&"account"!=r.page_type||"cbContent"==r.page_type||"news"==r.content_type||"video"==r.content_type||window.location.replace(r.redirection_url.login_page))},r.formatDigit=r.get_plan_state=function(e){switch(e){case"NA":return"NA";case"FREE":case"FREE_CANCELLED":case"FREE_ERROR":case"ACTIVE":case"ACTIVE_CANCELLED":case"ACTIVE_ERROR":return"ACTIVE";case"CANCELLED":return"CANCELLED";default:return"NA"}},r.check_auto_renew_conditions=function(){r.toggle_on=!1,r.toggle_disabled=!1,r.toggle_display=!1,r.$watch("token_verified",function(){var e=null!=r.verify_notice&&r.verify_notice.isRenewable,t=r.user.plan.isRenewable,a=r.user.state;if(t&&(r.toggle_display=!0),1==r.toggle_display)switch(a){case"FREE":case"ACTIVE":r.toggle_on=!0,r.toggle_disabled=!1,e&&(r.toggle_disabled=!1);break;case"FREE_CANCELLED":case"ACTIVE_CANCELLED":r.toggle_on=!1,r.toggle_disabled=!0;break;case"ACTIVE_ERROR":r.toggle_on=!0,r.toggle_disabled=!0}})},r.cancel_subscription_view=r.cancel_notice_banner=function(){r.user_state=null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET",r.cancel_notice=null,r.show_notice=!1,"CANCELLED"==r.user_state&&(r.show_notice=null==r.getWithExpiry("CancelNoticeClosed"),r.cancel_notice=JSON.parse(localStorage.getItem("CancelAlertNotice")))},r.close_cancel_notice_banner=function(){r.setWithExpiry("CancelNoticeClosed",!0,86400),r.show_notice=!1},r.cancel_response=null,r.cancel_subscription=function(e){"other"==e&&(e="Other Reason:"+document.getElementById("reason-other-text").value),s({method:"post",url:r.subscription_apis.cancel_subscription,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken"),reason:e}}).then(function(e){200==e.status&&"success"==e.data.status&&(r.cancel_response=e.data)})},r.refresh_token=function(){s({method:"post",url:r.auth_apis.refresh_token,data:{username:localStorage.getItem("username"),RefreshToken:localStorage.getItem("RefreshToken")}}).then(function(e){200==e.status&&angular.isDefined(e.data.AccessToken)?(localStorage.setItem("AccessToken",e.data.AccessToken),localStorage.setItem("RefreshToken",e.data.RefreshToken),localStorage.setItem("provider",e.data.provider),localStorage.setItem("username",e.data.username),r.verify_access_token()):(localStorage.removeItem("RefreshToken"),localStorage.setItem("UserState","NOTSET"),window.location.replace(r.redirection_url.login_page))})},r.user_payment_gateway=function(){switch(r.state=null!=localStorage.getItem("PlanState")?localStorage.getItem("PlanState"):"NOTSET",r.state){case"NOTSET":localStorage.setItem("loginToPayment",!0),localStorage.setItem("termIdSelected",r.termIdSelected),window.location.replace(r.redirection_url.login_page);break;case"ACTIVE":window.location.replace(r.redirection_url.account_info);break;case"NA":case"CANCELLED":r.termIdSelected=r.termIdSelected,localStorage.removeItem("termIdSelected"),s({method:"post",url:r.subscription_apis.payment,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken"),plan:{id:1,termId:r.termIdSelected,isFree:r.isfree,isRenewable:r.isRenewable}}}).then(function(e){200==e.status&&angular.isDefined(e.data.url)&&window.location.replace(e.data.url)})}},r.user_plan_summary=function(){r.asyncverify().then(function(){switch(r.state=null!=localStorage.getItem("PlanState")?localStorage.getItem("PlanState"):"NOTSET",r.state){case"NOTSET":localStorage.setItem("loginToPayment",!0),window.location.replace(r.redirection_url.login_page);break;case"ACTIVE":window.location.replace(r.redirection_url.account_info);break;case"NA":case"CANCELLED":document.getElementById("plan-detail-wrap").style.display="none",document.getElementById("plan-summary-wrap").style.display="block",document.getElementById("plan-summary-"+r.termIdSelected).style.display="block",document.getElementById("cb-plus-menu-view-all-btn").style.display="none"}})},r.select_subscription=function(e,t,a){r.termIdSelected=e,r.isRenewable=t,localStorage.setItem("termIdSelected",r.termIdSelected),subscribePlanOptionId="cbz-"+e,subscribePlanOption=document.getElementById(subscribePlanOptionId),refundPolicyAccept=document.getElementById("cb-privacy"),a&&t?(null!=document.getElementById("subscription-button-free")&&(document.getElementById("subscription-button-free").style.display="block"),null!=document.getElementById("subscription-button-sans-free")&&(document.getElementById("subscription-button-sans-free").style.display="none"),r.isfree=!0):(null!=document.getElementById("subscription-button-free")&&(document.getElementById("subscription-button-free").style.display="none"),null!=document.getElementById("subscription-button-sans-free")&&(document.getElementById("subscription-button-sans-free").style.display="block"),r.isfree=!1),null!=subscribePlanOption&&refundPolicyAccept.checked?(document.getElementById("subscription-selected-button").disabled=!1,document.getElementById("subscription-selected-button").classList.remove("cb-disabled-button")):document.getElementById("subscription-selected-button").disabled=!0},r.hero_plan_click=function(e,t,a){r.termIdSelected=e,r.isRenewable=t,r.isfree=!1,a&&t&&(r.isfree=!0),r.user_plan_summary()},r.getInputOtp=function(e){var t=e.currentTarget.nextElementSibling,a=e.currentTarget.previousElementSibling,a=(document.getElementById("login-verify-error").innerText="",8===e.keyCode||37===e.keyCode?a&&a.focus():(48<=e.keyCode&&e.keyCode<=57||65<=e.keyCode&&e.keyCode<=90||96<=e.keyCode&&e.keyCode<=105||39===e.keyCode)&&t&&t.focus(),r.getEnteredOtp());null!=a&&6==a.length?(document.getElementById("cb-otp-btn").removeAttribute("disabled"),document.getElementById("cb-otp-btn").classList.remove("cb-disabled-button")):(document.getElementById("cb-otp-btn").setAttribute("disabled","disabled"),document.getElementById("cb-otp-btn").classList.add("cb-disabled-button"))},r.getEnteredOtp=function(){var e=document.getElementById("digit-1").value,t=document.getElementById("digit-2").value,a=document.getElementById("digit-3").value,n=document.getElementById("digit-4").value,o=document.getElementById("digit-5").value,i=document.getElementById("digit-6").value;return e.toString()+t.toString()+a.toString()+n.toString()+o.toString()+i.toString()},r.clear_entered_otp_elem=function(){for(i=1;i<=6;i++)document.getElementById("digit-"+i).value=""},r.times_up=function(e){r.show_timer=!1,e&&(document.getElementById("cb-otp-btn").setAttribute("disabled","disabled"),document.getElementById("cb-otp-btn").classList.add("cb-disabled-button"))},r.redirect_after_token_verified=function(){if(r.user_state=null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET",r.plan_state=null!=localStorage.getItem("PlanState")?localStorage.getItem("PlanState"):"NOTSET","account"!=r.page_type&&"deals"!=r.page_type&&("cbContent"!=r.page_type||"video"!=r.content_type&&"news"!=r.content_type))switch(r.plan_state){case"NA":case"CANCELLED":var e=null!=localStorage.getItem("loginToPayment")&&localStorage.getItem("loginToPayment");localStorage.removeItem("loginToPayment"),!e&&void 0!==(t=null!=r.getWithExpiry("ContentURL")?r.getWithExpiry("ContentURL"):null)&&null!=t&&"cbContent"!=r.page_type?(localStorage.removeItem("ContentURL"),window.location.replace(t)):window.location.replace(r.redirection_url.plan_detail_promo);break;case"ACTIVE":var t;void 0!==(t=null!=r.getWithExpiry("ContentURL")?r.getWithExpiry("ContentURL"):null)&&null!=t&&localStorage.removeItem("ContentURL"),"payment"!=r.page_type&&"cbContent"!=r.page_type&&"deals"!=r.page_type&&(void 0!==t&&null!=t?window.location.replace(t):window.location.replace(r.redirection_url.account_info));break;case"NOTSET":window.location.replace(r.redirection_url.login_page);break;default:window.location.replace("/")}r.token_verified=!0},r.cb_plus_onload_permission_check=function(e){r.user_state=null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET",r.page_type=angular.isDefined(e)?e:"",r.verify_access_token()},r.update_user_info=function(t){var e,a,n,o=JSON.parse(localStorage.getItem("User"));r.user.name==o.name&&r.user.image_id==o.image_id||(o=!!r.user.name.match("^[a-zA-Z0-9@\\s$._-]*$"),e=r.user.name,a=r.user.image_id,n=document.getElementById("cb-update-message"),o?(t&&r.close_avatar_modal(),r.verify_access_token(),null!=n&&(document.getElementById("cb-update-message").innerHTML="<span>Updating ...</span>",document.getElementById("cb-update-message").style.display="block"),s({method:"post",url:r.subscription_apis.update_user,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken"),user:{name:e,image_id:a,email:localStorage.getItem("username")}}}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||(r.user=e.data.user,null!=n&&(document.getElementById("cb-update-message").innerHTML="<span>Profile Updated!</span>",document.getElementById("cb-update-message").style.display="block",document.getElementById("cb-update-message").style.color="green",setTimeout(function(){document.getElementById("cb-update-message").style.display="none"},3e3),document.getElementById("userNameSaveButton").style.display="none",document.getElementById("cbz-uname").classList.add("cb-on-same-user-name"),document.getElementById("cbz-uname").classList.remove("cb-on-change-user-name"),document.getElementById("cbz-uname").style.width="100%"),t&&r.load_chat_module())})):null!=n&&(document.getElementById("cb-update-message").innerHTML="<span>Invalid Username</span>",document.getElementById("cb-update-message").style.display="block"))},r.get_payment_history=function(){s({method:"post",url:r.subscription_apis.payment_transactions,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||(r.transactions=e.data)})},r.select_support_type=function(e){document.getElementById("cbz-subject").value="Support request on "+e,"Others"==e&&(document.getElementById("cbz-subject").value=e),document.getElementById("support-topics").style.display="none",document.getElementById("support-topic-form").style.display="block"},r.submit_support_request=function(){var e=document.getElementById("cbz-uemail").value,t=document.getElementById("cbz-subject").value,a=document.getElementById("cbz-issue-describe").value;null!=e&&t&&a?s({method:"post",url:r.subscription_apis.support_request,data:{name:e,emailId:e,subject:t,feedback:a}}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||"Accepted"!=e.data.status?(document.getElementById("cb-support-request").style.display="block",document.getElementById("cb-support-request").innerHTML="<span style='color: #d0021b;'>There was an issue submitting the feedback. Please try again.</span>"):(document.getElementById("support-topic-form").style.display="none",document.getElementById("cb-support-request").style.display="block",document.getElementById("cb-support-request").innerHTML="<span>Your feedback is valuable to us. Thank you for sharing.</span>")}):document.getElementById("cb-valid-support-request").style.display="block"},r.cb_plus_onload_checks=function(){var e;r.user_state=null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET",r.plan_state=null!=localStorage.getItem("PlanState")?localStorage.getItem("PlanState"):"NOTSET",r.user=null!=localStorage.getItem("User")?JSON.parse(localStorage.getItem("User")):r.user,r.save_link&&r.setWithExpiry("ContentURL",window.location.href,300),"ACTIVE"==r.plan_state?null!=(e=document.getElementById("cb-logo-main-menu"))&&(e.src="https://static.cricbuzz.com/images/cb_logo_plus.svg"):"NOTSET"==r.user_state&&(null!=(e=document.getElementById("cb-plus-user-icon"))&&(e.href=r.redirection_url.login_page),null!=(e=document.getElementById("cb-plus-dropdown"))&&(e.style.display="none"),null!=(e=document.getElementById("cb-plus-menu-login-button")))&&(e.style.display="inline")},r.get_chat_box=function(){document.getElementById("cb-match-party-wrap").innerHTML="<div class='cb-flex-row cb-align-center cb-spinner-custom-style'><div class='spinner cb-ftrd-item'></div></div>",s({method:"post",url:r.auth_apis.chat_box,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken"),chat:r.chatChannelDetails,theme:"light"}}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||(document.getElementById("cb-match-party-wrap").innerHTML=e.data.html_body,e=Array.prototype.slice.call(document.getElementById("cb-match-party-wrap").getElementsByTagName("script")),r.create_append_video(e))})},r.load_chat_module=function(){null!=localStorage.getItem("CBPChatGuidelines")&&localStorage.getItem("CBPChatGuidelines")?r.get_chat_box():r.show_chat_community_guidelines()},r.show_chat_community_guidelines=function(){var e=document.getElementById("community-guide-lines-modal");e.style.visibility="visible",e.style.opacity="1",document.getElementById("guidelines-modal").style.display="block"},r.agreed_guidelines=function(){localStorage.setItem("CBPChatGuidelines",!0),document.getElementById("guidelines-modal").style.display="none",document.getElementById("chat-avatar-modal").style.display="block"},r.close_avatar_modal=function(){document.getElementById("chat-avatar-modal").style.display="none";var e=document.getElementById("community-guide-lines-modal");e.style.visibility="hidden",e.style.opacity="0"},r.sign_out_user=function(t){s({method:"post",url:r.auth_apis.logout,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){r.delete_all_storage_variables(),localStorage.removeItem("ContentURL"),localStorage.removeItem("CancelNoticeClosed"),r.show_logout_msg(),setTimeout(function(){200==e.status?1==t?window.location.replace("/"):window.location.reload():window.location.replace(r.redirection_url.login_page)},1e3)})},r.delete_all_storage_variables=function(){localStorage.removeItem("username"),localStorage.removeItem("usermobile"),localStorage.removeItem("provider"),localStorage.removeItem("AccessToken"),localStorage.removeItem("RefreshToken"),localStorage.removeItem("PlanState"),localStorage.removeItem("UserState"),localStorage.removeItem("PlanId"),localStorage.removeItem("TermId"),localStorage.removeItem("UserId"),localStorage.removeItem("User"),localStorage.removeItem("isUserMobileVerified"),localStorage.removeItem("isAddLater"),localStorage.removeItem("CBPChatGuidelines"),localStorage.removeItem("CancelAlertNotice"),localStorage.removeItem("watchTime")},r.get_coupons_list=function(){s({method:"post",url:r.subscription_apis.coupons_list,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||(r.coupons=e.data)})},r.get_deals_list=function(){r.user_state=null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET",r.page_type="deals","NOTSET"==r.user_state?r.get_non_logged_in_deals_list():(r.verify_access_token(),setTimeout(function(){r.get_logged_in_deals_list()},600))},r.get_non_logged_in_deals_list=function(){s({method:"get",url:r.subscription_apis.deals_list}).then(function(e){200==e.status&&!angular.isDefined(e.data.exception)&&(0<e.data.available.length||0<e.data.unclocked.length)?(r.show_deal=!0,r.deals=e.data):r.show_deal=!1})},r.get_logged_in_deals_list=function(){s({method:"post",url:r.subscription_apis.user_deals_list,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){200==e.status&&!angular.isDefined(e.data.exception)&&null!=e.data?(r.show_deal=!0,r.deals=e.data):r.show_deal=!1})},r.get_deal_detail=function(e){r.user_state=null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET",r.plan_state=null!=localStorage.getItem("PlanState")?localStorage.getItem("PlanState"):"NOTSET",r.page_type="deals","ACTIVE"!=r.plan_state?r.get_non_user_deal_detail(e):(r.verify_access_token(),setTimeout(function(){r.get_user_deal_detail(e)},600))},r.get_non_user_deal_detail=function(e){s({method:"get",url:r.subscription_apis.non_user_deal_detail+"/"+e}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||(r.deal=e.data,r.deal?(r.show_deal=!0,r.subscribed_user=!1,document.getElementById("cb-deal-main").style.display="block",document.getElementById("deal-body-content").innerHTML=e.data.content.body_html,document.getElementById("deal-subscription-text").style.display="block",document.getElementById("deal-subscription-text").innerHTML=e.data.content.subscription_html):r.show_deal=!1)})},r.redeem_coupon=function(e){r.redeemed=!1;var t="This Coupon is not valid.";!!e.match("^[a-zA-Z0-9]*$")?s({method:"post",url:r.subscription_apis.redeem_coupon,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken"),coupon:e.toUpperCase()}}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||(document.getElementById("error-redeem-coupon").style.display="none","success"==e.data.status&&(r.redeemed_data=e.data,r.redeemed=!0,setTimeout(function(){r.verify_access_token()},1e3))),angular.isDefined(e.data.exception)&&(t=angular.isDefined(e.data.message)?e.data.message:t,r.redeem_coupon_error_msg(t))}):r.redeem_coupon_error_msg(t)},r.redeem_coupon_error_msg=function(e){document.getElementById("error-redeem-coupon").style.display="block",document.getElementById("error-redeem-coupon-msg").innerHTML=e},r.get_user_deal_detail=function(e){s({method:"post",url:r.subscription_apis.user_deal_detail+"/"+e,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||(r.deal=e.data,r.deal?(r.show_deal=!0,r.subscribed_user=!0,document.getElementById("cb-deal-main").style.display="block",document.getElementById("deal-body-content").innerHTML=e.data.content.body_html):r.show_deal=!1)})},r.unlock_deal_code=function(e){s({method:"post",url:r.subscription_apis.unlock_deal+"/"+e,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||(r.deal=e.data,document.getElementById("cb-deal-main").style.display="block",document.getElementById("deal-body-content").innerHTML=e.data.content.body_html)})},r.get_plan_details=function(e,t){s({method:"GET",url:r.subscription_apis.term_plan_detail+"/"+e+"/"+t}).then(function(e){var t;200==e.status&&"undefined"!=e.data?((t=document.getElementById("term-plan-modal")).style.visibility="visible",t.style.opacity="1","undefined"!=(t=e.data)&&((e=document.getElementById("term-plan-header")).src=t.imageUrl,e.alt=t.header,e.title=t.header,document.getElementById("term-plan-detail").innerHTML=t.contentHtml)):window.location.replace(r.redirection_url.login_page)})},r.get_coupon_code_detail=function(e){s({method:"POST",url:r.subscription_apis.coupon_code_detail+"/"+e,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){var t;200==e.status&&"undefined"!=e.data?(e=e.data,(t=document.getElementById("term-plan-modal")).style.visibility="visible",t.style.opacity="1","undefined"!=e&&(document.getElementById("term-plan-header").src=e.imageUrl,document.getElementById("cb-coupon-code").innerHTML=e.coupon_code,document.getElementById("cb-coupon-expire-date").innerHTML="Valid till "+e.expireDate,document.getElementById("term-plan-detail").innerHTML=e.content.body_html,(t=document.createElement("a")).setAttribute("href",e.content.footer.link),t.setAttribute("target","_blank"),t.setAttribute("id","cb-reddem-btn"),t.innerText=e.content.footer.text,t.classList.add("btn","cb-more-btn"),document.getElementById("cb-redeem-coupon-btn").appendChild(t))):window.location.replace(r.redirection_url.login_page)})},r.copy_to_clipboard=function(e){e=document.getElementById(e).innerHTML;navigator.clipboard.writeText(e),navigator.clipboard&&(document.getElementById("coupon-code-copy-text").style.display="inline-block",setTimeout(3e3))},r.show_logout_msg=function(){var e=document.getElementById("cb-plus-logout-msg");e.innerHTML="You have been logged out",e.style.cssText="height: 32px; color: #fff; position: fixed; bottom: 5px; background: #028062; width: 250px; right: 10px; text-align: center; line-height: 32px; border-radius: 6px; opacity: 0.75; display:block",setTimeout(5e3)},r.render_plus_content=function(){r.user_state=null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET",r.plan_state=null!=localStorage.getItem("PlanState")?localStorage.getItem("PlanState"):"NOTSET","ACTIVE"==r.plan_state||"news"==r.content_type||"video"==r.content_type?(r.page_type="cbContent",r.token_verified=!1,r.verify_access_token(),r.$watch("token_verified",function(){if(r.token_verified)switch(r.content_type){case"news":r.render_article();break;case"video":r.render_video();break;case"video-embed":r.render_embed_video()}})):r.redirect_form_plus_content()},r.redirect_form_plus_content=function(){switch(r.content_type){case"news":window.location.replace(r.redirection_url.plan_detail_news);break;case"video":break;case"video-embed":document.getElementById("cb-plus-video-embed").innerHTML="<div>Video available only to Cricbuzz Plus users.</div>";break;default:window.location.replace(r.redirect_urls.plan_detail_news)}},r.render_article=function(){s({method:"POST",url:r.content_apis.news+r.content_id,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){200==e.status&&1!=e.data.redirect_to_plan?n(_ele("#cb-plus-article").append(e.data))(r):r.redirect_form_plus_content()})},r.render_video=function(){s({method:"POST",url:r.content_apis.video+r.content_id,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){200==e.status&&1!=e.data.redirect_to_plan?(document.getElementById("cb-plus-video").innerHTML=e.data,e=Array.prototype.slice.call(document.getElementById("cb-plus-video").getElementsByTagName("script")),r.create_append_video(e)):r.redirect_form_plus_content()})},r.render_embed_video=function(){s({method:"POST",url:r.content_apis.video_embed+r.content_id,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){200==e.status&&1!=e.data.show_access_denied_msg?(localStorage.removeItem("ContentURL"),document.getElementById("cb-plus-video-embed").innerHTML=e.data,e=Array.prototype.slice.call(document.getElementById("cb-plus-video-embed").getElementsByTagName("script")),r.create_append_video(e)):(document.getElementById("cb-plus-video-embed").innerHTML="<div>Video available only to Cricbuzz Plus users.</div>",r.redirect_form_plus_content())})},r.create_append_video=function(e){for(var t=0;t<e.length;t++){var a=document.createElement("script");a.appendChild(document.createTextNode(e[t].innerHTML)),e[t].parentNode.replaceChild(a,e[t])}},r.asyncverify=function(){return o(function(t,e){null!=localStorage.getItem("AccessToken")?s({method:"post",url:r.auth_apis.verify_token,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){200==e.status&&angular.isDefined(e.data.user)?(r.verify_notice=e.data.notice,r.user=e.data.user,r.user.plan_state=r.get_plan_state(e.data.user.state),localStorage.setItem("PlanState",e.data.user.plan_state),localStorage.setItem("UserState",e.data.user.state),localStorage.setItem("PlanId",e.data.user.plan.planId),localStorage.setItem("TermId",e.data.user.plan.termId),localStorage.setItem("UserId",e.data.user.id),localStorage.setItem("User",JSON.stringify(e.data.user))):r.delete_all_storage_variables(),t()}):(r.delete_all_storage_variables(),t())})},r.get_plans_view=function(e,t){r.asyncverify().then(function(){r.user_state=null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET",e=null!=e?e:"promo",t=null!=t?t:0,s({method:"GET",url:r.subscription_apis.plan_detail_view+e+"/"+r.user_state+"/"+t}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||(n(_ele("#cb-plan-detail").append(e.data))(r),e=Array.prototype.slice.call(document.getElementById("cb-plan-detail").getElementsByTagName("script")),r.create_append_video(e))})});var a=document.getElementById("cb-plus-user-icon");r.user_state=null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET","NOTSET"!=r.user_state&&(a.style.display="inline")},r.get_carousel_featured_data=function(e){r.user_state=null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET",e="ACTIVE"==r.user_state&&1==e?(r.planId=localStorage.getItem("PlanId"),r.termId=localStorage.getItem("TermId"),r.content_apis.cb_featured+"/"+r.planId+"/"+r.termId):r.content_apis.cb_featured,s({method:"GET",url:e}).then(function(e){200!=e.status||angular.isDefined(e.data.exception)||(r.featured_data=e.data)})},r.setWithExpiry=function(e,t,a){a*=1e3,t={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(t))},r.getWithExpiry=function(e){var t=localStorage.getItem(e);return t?(t=JSON.parse(t),(new Date).getTime()>t.expiry?(localStorage.removeItem(e),null):t.value):null},r.onload=function(){r.cb_plus_onload_checks()},r.$evalAsync(function(){r.onload()}),r.formatPrice=function(e){return e-parseInt(e)<.1?parseInt(e):e},r.send_otp_to_phone=function(e,t,a){0==t&&(t=(n=(n=document.getElementById("user-operator").value).split(" "))[0],a=n[1]);var n=document.getElementById("user-country-code").value,o=document.getElementById("user-phone-no").value,n=n.concat(o);8===o.length?r.cb_plus_send_otp(n.slice(1),e,t,a):(document.getElementById("error_form_phone").innerHTML="Please enter correct mobile number",document.getElementById("error_form_phone").style.display="block")},r.cb_plus_send_otp=function(a,n,o,i){localStorage.setItem("number",a),localStorage.setItem("country",n),localStorage.setItem("operator",o),localStorage.setItem("productId",i),s({method:"post",url:r.client_auth_apis.send_otp,data:{number:a,country:n,operator:o,productId:i}}).then(function(e){var t={number:a,country:n,operator:o,productId:i,status:e.data.message,page:"desktop-login"};200==e.status&&"SUCCESS"===e.data.code?(document.getElementById("cb-client-plan-main-block").style.display="none",document.getElementById("cb-client-plan-subs-block").style.display="none",document.getElementById("cb-client-plans-signin-page").style.height="810px",document.getElementById("cb-client-plan-otp-block").style.display="block",r.countdown.start(),document.getElementById("client-mobile-number").innerHTML=a,r.log_client_subscription_firebase_event("client-plans",t)):0===Object.keys(e.data).length?(document.getElementById("error_form_phone").innerHTML="Something went wrong. Please retry.",document.getElementById("error_form_phone").style.display="block"):(document.getElementById("error_form_phone").innerHTML=e.data.message,document.getElementById("error_form_phone").style.display="block",document.getElementById("cb-client-plan-main-block").style.display="block",document.getElementById("cb-client-plan-subs-block").style.display="block",document.getElementById("cb-client-plan-otp-block").style.display="none",r.log_client_subscription_firebase_event("client-plans",t))})},r.submit_client_otp=function(){var e=r.get_final_four_digit_otp();0<e.length&&4==e.length&&null!=e&&!isNaN(e)?(document.getElementById("error_form_client_otp").style.display="none",document.getElementById("cb-otp-btn").setAttribute("disabled","disabled"),document.getElementById("cb-otp-btn").classList.add("cb-disabled-button"),document.getElementById("cb-otp-btn").innerHTML="Loading ...",r.verify_client_otp(e)):(document.getElementById("error_form_client_otp").innerHTML="Please enter valid OTP.",document.getElementById("error_form_client_otp").style.display="block")},r.verify_client_otp=function(e){s({method:"post",url:r.client_auth_apis.verify_otp,data:{number:localStorage.getItem("number"),country:localStorage.getItem("country"),operator:localStorage.getItem("operator"),productId:localStorage.getItem("productId"),otp:e}}).then(function(e){var t={number:localStorage.getItem("number"),country:localStorage.getItem("country"),operator:localStorage.getItem("operator"),productId:localStorage.getItem("productId"),status:e.data.message||e.data.exception.message,page:"desktop-verify-otp"};angular.isDefined(e.data.exception)?(document.getElementById("cb-otp-btn").innerHTML="SUBMIT",document.getElementById("error_form_client_otp").innerHTML="Something went wrong.",document.getElementById("error_form_client_otp").style.display="block",angular.isDefined(e.data.errorCode)&&"14290"==e.data.errorCode&&r.times_up(!0)):e.data.code&&"SUCCESS"===e.data.code?(localStorage.setItem("IPLSeasonPackCouponCode",e.data.coupon_code),window.location.replace(r.redirection_url.client_plan.concat(localStorage.getItem("country"),"/success")),r.log_client_subscription_firebase_event("client-plans",t)):0===Object.keys(e.data).length?(document.getElementById("error_form_client_otp").innerHTML="Something went wrong. Please retry.",document.getElementById("error_form_client_otp").style.display="block",document.getElementById("cb-otp-btn").innerHTML="Confirm subscription"):(e.data.allow_otp_retry&&(void 0!==e.data.code||"SignInLimitReached"!=e.data.error)||(document.getElementById("cb-client-otp-retry").style.display="none"),document.getElementById("error_form_client_otp").innerHTML=e.data.message,document.getElementById("error_form_client_otp").style.display="block",document.getElementById("cb-otp-btn").innerHTML="Confirm subscription",r.log_client_subscription_firebase_event("client-plans",t))})},r.resend_client_otp=function(){var e=localStorage.getItem("number"),t=localStorage.getItem("country"),a=localStorage.getItem("operator"),n=localStorage.getItem("productId");void 0!==t&&void 0!==e&&void 0!==a&&void 0!==n?(r.clear_four_digit_otp_elem(),r.cb_plus_send_otp(e,t,a,n),document.getElementById("error_form_client_otp").style.display="none"):window.location.replace(r.redirection_url.client_plan.concat(t))},r.get_four_digit_input_otp=function(e){var t=e.currentTarget.nextElementSibling,a=e.currentTarget.previousElementSibling,a=(8===e.keyCode||37===e.keyCode?a&&a.focus():(48<=e.keyCode&&e.keyCode<=57||65<=e.keyCode&&e.keyCode<=90||96<=e.keyCode&&e.keyCode<=105||39===e.keyCode)&&t&&t.focus(),r.get_final_four_digit_otp());4==a.length&&null!=a?(document.getElementById("cb-otp-btn").removeAttribute("disabled"),document.getElementById("cb-otp-btn").classList.remove("cb-disabled-button")):(document.getElementById("cb-otp-btn").setAttribute("disabled","disabled"),document.getElementById("cb-otp-btn").classList.add("cb-disabled-button"))},r.get_final_four_digit_otp=function(){var e=document.getElementById("digit-1").value,t=document.getElementById("digit-2").value,a=document.getElementById("digit-3").value,n=document.getElementById("digit-4").value;return e.toString()+t.toString()+a.toString()+n.toString()},r.clear_four_digit_otp_elem=function(){for(i=1;i<=4;i++)document.getElementById("digit-"+i).value=""},r.Counter=function(e){var t,a=e.seconds||10,n=e.onUpdateStatus||function(){},o=e.onCounterEnd||function(){},i=e.onCounterStart||function(){};function r(){n(a),0===a?(s(),o()):a--}eturn{start:function(){i(),clearInterval(t),t=0,r(),t=setInterval(r,1e3)},stop:function(){s()}}},r.countdown=r.Counter({seconds:120,onCounterStart:function(){document.getElementById("resend-otp").style.display="none",document.getElementById("resend-otp-timer").style.display="block"},onUpdateStatus:function(e){var t=1==parseInt(e/60).toString().length?"0"+parseInt(e/60):parseInt(e/60),e=1==parseInt(e%60).toString().length?"0"+parseInt(e%60):parseInt(e%60);document.getElementById("otp-countdown-timer").innerText=t+":"+e},onCounterEnd:),r.wasDeleteFailed=!1,r.enableDeleteButton=!1,r.deleteAccountInProcess=!1,r.showDeleteAccountCheckBox=!1,r.$watchGroup(["checkOne","checkTwo"],function(e,t){"DELETE"===e[0]?(r.showDeleteAccountCheckBox=!0)===e[1]?r.enableDeleteButton=!0:r.enableDeleteButton=!1:(r.checkTwo=!1,r.enableDeleteButton=!1,r.showDeleteAccountCheckBox=!1)}),r.constructPlanValidity=function(e){var t=Date.now(),a=new Date(e);return"Valid till "+a.toLocaleString("en-US",{month:"short"})+" "+a.toLocaleString("en-US",{day:"numeric"})+", "+a.toLocaleString("en-US",{year:"numeric"})+" ("+Math.round((e-t)/864e5)+" days remaining)"},r.delete_user_account=function(){r.deleteAccountInProcess=!0,s({method:"post",url:r.auth_apis.delete,data:{AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){r.deleteAccountInProcess=!1,r.delete_all_storage_variables(),localStorage.removeItem("ContentURL"),localStorage.removeItem("CancelNoticeClosed"),setTimeout(function(){200==e.status?window.location.replace("/premium-subscription/user/delete-account-successful"):(r.checkOne="",r.checkTwo=!1,r.wasDeleteFailed=!0)},1e3)})}}]),angular.module("CBFantasy",["ngRoute","ngSanitize","CBLib"])),CBAuth=("cricket-fantasy-handbook"==window.PAGE_NAME&&CBFantasy.config(["$routeProvider","$locationProvider",function(e,t){t.hashPrefix("!"),e.when("/expert-picks",{action:"expert-pick"}).when("/all-players",{action:"all-players"}).when("/venue",{action:"venue"}).when("/match-ups",{action:"match-ups"}).when("/player/:playerId",{action:"player-profile"}).otherwise({redirectTo:"/expert-picks"})}]),CBFantasy.controller("CBFantasyAPI",["$scope","$http","$route","$compile","CBAuthService","$location",function(o,n,e,t,i,a){o.currentTabView=null,o.currentFantasyView=null,o.currentUrl=null,o.showLegend=!1,o.$on("$routeChangeSuccess",function(){o.currentTabView="ACTIVE"===o.getUserState()&&e.current.action||"expert-pick",o.currentFantasyView="ACTIVE"===o.getUserState()&&e.current.action||"expert-pick",o.currentUrl=a.url()}),o.handleContainerVisibility=o.matchId=0,o.playerId=0,o.roleFilters=[],o.filters={roleSelected:null,teamSelected:null},o.addFilter=function(e,t){switch(e){case"role":o.filters.roleSelected=t;break;case"team":o.filters.teamSelected=t;break;default:o.filters.roleSelected=null,o.filters.teamSelected=null}},o.fantasyInfo={playerProfile:{id:0,fullName:"",country:"",role:"",badges:[],batStyle:"",battingRole:"",battingPosition:"",bowlStyle:"",bowlingRole:"",stockDelivery:"",bowlingVariations:"",keyInfo:[],faceImageId:0,isDebutMatch:null,recentBatting:{data:{cardType:"",label:"",subLabel:"",headers:[],values:[]}},recentBowling:{data:{cardType:"",label:"",subLabel:"",headers:[],values:[]}},careerStats:{stats:{}},opponentStats:{stats:{}},venueStats:{stats:{}}},venueInfo:{textCards:{groundDetails:{header:"Ground Details",data:[]},pitchDetails:{header:"Pitch Type",data:[]},runsExpected:{header:"Runs Expected",data:[]}},pitchExploiters:{data:[]},happyHunters:{data:[]},recentMatches:{data:{cardType:"",label:"",subLabel:"",headers:[],values:[]}},averageScores:{data:[]},statsCards:{},city:"",country:"",groundName:""},allPlayersInfo:{},expertPicksInfo:{},matchUpsInfo:{keyPlayers:{data:[]},matchUpCards:{}},disclaimer:[]},o.expertPickObj={},o.allPlayersObj={},o.venueObj={},o.matchUpsObj={},o.playerProfileObj={},o.getUserState=function(){return i.getUserState()},o.renderBadgeIcon=o.logFirebaseEvent=function(e){e=e.replaceAll("-",""),"undefined"!=typeof firebase?firebase.analytics().logEvent("fantasy",{page:e}):setTimeout(0)},o.renderVideo=function(e){200==e.status&&1!=e.data.redirect_to_plan?(t(_ele("#cb-fantasy-video").append(e.data))(o),e=Array.prototype.slice.call(document.getElementById("cb-fantasy-video").getElementsByTagName("script")),o.createAppendVideo(e)):console.log("render error")},o.createAppendVideo=function(e){for(var t=0;t<e.length;t++){var a=document.createElement("script");a.appendChild(document.createTextNode(e[t].innerHTML)),e[t].parentNode.replaceChild(a,e[t])}},o.getPlayerProfile=function(e){window.scrollTo({top:0});var t=window.location.href,t=(t=t.substring(t.indexOf("!")+2,t.length)).substring(t.indexOf("/")+1,t.length);o.getFantasyData("player-profile",t,e)},o.getFantasyData=function(e,t,a){var n="ACTIVE"==o.getUserState()?a?"fantasy|"+a+"|"+e+"|"+t:"fantasy|"+t+"|"+e:"fantasy|"+t;switch(e){case"video":o.postCall(e,t);break;case"expert-pick":"{}"==JSON.stringify(o.expertPickObj)&&o.postCall(e,t);break;case"all-players":"{}"==JSON.stringify(o.allPlayersObj)&&o.postCall(e,t);break;case"venue":"{}"==JSON.stringify(o.venueObj)&&o.postCall(e,t);break;case"match-ups":"{}"==JSON.stringify(o.matchUpsObj)&&o.postCall(e,t);break;case"player-profile":"{}"!=JSON.stringify(o.playerProfileObj)&&o.playerProfileObj.id===t||o.postCall(e,t,a);break;default:console.log("Api type not found")}o.logFirebaseEvent(n)},o.postCall=function(t,e,a){a=a||e;i.verify_access_token("fantasyHandbook","fantasy").then(function(){i.setWithExpiry("ContentURL",window.location.href,300),n({method:"POST",url:"/cbplus/premium-content/fantasy-handbook/"+t+"/"+e+"/"+a,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){switch(t){case"video":o.renderVideo(e);break;case"expert-pick":o.buildExpertPickObj(e);break;case"all-players":o.buildAllPlayersObj(e);break;case"venue":o.buildVenueObj(e);break;case"match-ups":o.buildMatchUpsObj(e);break;case"player-profile":o.buildPlayerProfileObj(e);break;default:console.error("The API type was not found.")}},function(){console.log("Post Call Error")})})},o.buildExpertPickObj=function(e){o.expertPickObj=e.data,o.fantasyInfo.expertPicksInfo=o.expertPickObj.playersByRole||{},o.fantasyInfo.legendsInfo=o.expertPickObj.legends||[],o.fantasyInfo.disclaimer=o.expertPickObj.disclaimer},o.buildAllPlayersObj=function(e){o.allPlayersObj=e.data,o.allPlayersObj.playersByRole.forEach(,o.fantasyInfo.allPlayersInfo=o.allPlayersObj.playersByRole||{},o.fantasyInfo.legendsInfo=o.allPlayersObj.legends||[],o.fantasyInfo.disclaimer=o.allPlayersObj.disclaimer},o.buildVenueObj=function(e){o.venueObj=e.data,o.fantasyInfo.venueInfo.groundName=o.venueObj.groundName,o.fantasyInfo.venueInfo.city=o.venueObj.city,o.fantasyInfo.venueInfo.country=o.venueObj.country,o.fantasyInfo.venueInfo.textCards.groundDetails.data=o.venueObj.groundDetails,o.fantasyInfo.venueInfo.textCards.pitchDetails.data=o.venueObj.pitchDetails,o.fantasyInfo.venueInfo.textCards.runsExpected.data=o.venueObj.runsExpected,o.fantasyInfo.venueInfo.pitchExploiters.data=o.venueObj.pitchExploiters,o.fantasyInfo.venueInfo.happyHunters.data=o.venueObj.happyHunters,o.fantasyInfo.venueInfo.averageScores.data=o.venueObj.averageScores,o.fantasyInfo.venueInfo.recentMatches.data.cardType=o.venueObj.recentMatches.cardType,o.fantasyInfo.venueInfo.recentMatches.data.label=o.venueObj.recentMatches.label,o.fantasyInfo.venueInfo.recentMatches.data.subLabel=o.venueObj.recentMatches.subLabel,o.fantasyInfo.venueInfo.recentMatches.data.headers=o.venueObj.recentMatches.headers,void 0!==o.venueObj.recentMatches.rows&&o.venueObj.recentMatches.rows.forEach(function(e){o.fantasyInfo.venueInfo.recentMatches.data.values.push({matchId:e.values[0],matchLinkText:e.followUpLinkText,tableRows:e.values.slice(1)})}),o.fantasyInfo.venueInfo.statsCards=o.venueObj.cards,o.fantasyInfo.disclaimer=o.venueObj.disclaimer},o.buildMatchUpsObj=function(e){o.matchUpsObj=e.data,o.fantasyInfo.matchUpsInfo.keyPlayers.data=o.matchUpsObj.keyPlayers||[],o.fantasyInfo.matchUpsInfo.matchUpCards=o.matchUpsObj.cards||{},o.fantasyInfo.disclaimer=o.matchUpsObj.disclaimer},o.buildPlayerProfileObj=function(e){o.playerProfileObj=e.data,o.fantasyInfo.playerProfile.id=o.playerProfileObj.id||0,o.fantasyInfo.playerProfile.fullName=o.playerProfileObj.fullName||"",o.fantasyInfo.playerProfile.country=o.playerProfileObj.country||"",o.fantasyInfo.playerProfile.role=o.playerProfileObj.role||"",o.fantasyInfo.playerProfile.batStyle=o.playerProfileObj.batStyle||"",o.fantasyInfo.playerProfile.battingRole=o.playerProfileObj.battingRole||"",o.fantasyInfo.playerProfile.battingPosition=o.playerProfileObj.battingPosition||"",o.fantasyInfo.playerProfile.bowlStyle=o.playerProfileObj.bowlStyle||"",o.fantasyInfo.playerProfile.bowlingRole=o.playerProfileObj.bowlingRole||"",o.fantasyInfo.playerProfile.stockDelivery=o.playerProfileObj.stockDelivery||"",o.fantasyInfo.playerProfile.bowlingVariations=o.playerProfileObj.bowlingVariations?o.playerProfileObj.bowlingVariations.join(", "):"",o.fantasyInfo.playerProfile.keyInfo=o.playerProfileObj.keyInfo||[],o.fantasyInfo.playerProfile.badges=o.playerProfileObj.badges||[],o.fantasyInfo.playerProfile.faceImageId=o.playerProfileObj.faceImageId||0,o.fantasyInfo.playerProfile.isDebutMatch=o.playerProfileObj.isDebutMatch||null,null!=o.playerProfileObj.recentBatting&&(o.fantasyInfo.playerProfile.recentBatting.data.cardType=o.playerProfileObj.recentBatting.cardType||"",o.fantasyInfo.playerProfile.recentBatting.data.label=o.playerProfileObj.recentBatting.label||"",o.fantasyInfo.playerProfile.recentBatting.data.subLabel=o.playerProfileObj.recentBatting.subLabel||"",o.fantasyInfo.playerProfile.recentBatting.data.headers=o.playerProfileObj.recentBatting.headers||[],0!=o.fantasyInfo.playerProfile.recentBatting.data.values.length&&(o.fantasyInfo.playerProfile.recentBatting.data.values=[]),o.playerProfileObj.recentBatting.rows.forEach(function(e){o.fantasyInfo.playerProfile.recentBatting.data.values.push({matchId:e.values[0],matchLinkText:e.followUpLinkText,tableRows:e.values.slice(1)})})),null!=o.playerProfileObj.recentBowling&&(o.fantasyInfo.playerProfile.recentBowling.data.cardType=o.playerProfileObj.recentBowling.cardType||"",o.fantasyInfo.playerProfile.recentBowling.data.label=o.playerProfileObj.recentBowling.label||"",o.fantasyInfo.playerProfile.recentBowling.data.subLabel=o.playerProfileObj.recentBowling.subLabel||"",o.fantasyInfo.playerProfile.recentBowling.data.headers=o.playerProfileObj.recentBowling.headers||[],0!=o.fantasyInfo.playerProfile.recentBowling.data.values.length&&(o.fantasyInfo.playerProfile.recentBowling.data.values=[]),o.playerProfileObj.recentBowling.rows.forEach(function(e){o.fantasyInfo.playerProfile.recentBowling.data.values.push({matchId:e.values[0],matchLinkText:e.followUpLinkText,tableRows:e.values.slice(1)})})),o.fantasyInfo.playerProfile.careerStats.stats=o.playerProfileObj.careerStats||{},o.fantasyInfo.playerProfile.opponentStats.stats=o.playerProfileObj.opponentStats||{},o.fantasyInfo.playerProfile.venueStats.stats=o.playerProfileObj.venueStats||{},o.fantasyInfo.disclaimer=o.playerProfileObj.disclaimer||[]},o.filteredPlayerBadge=function(e){return 0<(e?e.filter(:[]).length}}]),angular.module("CBAuth",["CBLib"])),CB=(CBAuth.service("CBAuthService",["$http","$q",function(r,e){_cbAuthService=this;var s="/cbplus/auth/user/verify-token",n="/cbplus/auth/user/refresh-token",i="/premium-subscription/user/select-plan/cricbuzz-promo",l="/premium-subscription/user/account-info",c="/premium-subscription/user/login";_cbAuthService.get_plan_state=function(e){switch(e){case"NA":return"NA";case"FREE":case"FREE_CANCELLED":case"FREE_ERROR":case"ACTIVE":case"ACTIVE_CANCELLED":case"ACTIVE_ERROR":return"ACTIVE";case"CANCELLED":return"CANCELLED";default:return"NA"}},_cbAuthService.verify_access_token=function(o,i){return e(function(t,e){var a=localStorage.getItem("AccessToken"),n=localStorage.getItem("RefreshToken");null!=a?r({method:"post",url:s,data:{username:localStorage.getItem("username"),AccessToken:localStorage.getItem("AccessToken")}}).then(function(e){200==e.status&&angular.isDefined(e.data.user)?(localStorage.setItem("PlanState",e.data.user.state),localStorage.setItem("UserState",e.data.user.state),localStorage.setItem("PlanId",e.data.user.plan.planId),localStorage.setItem("TermId",e.data.user.plan.termId),localStorage.setItem("UserId",e.data.user.id),localStorage.setItem("User",JSON.stringify(e.data.user)),"fantasyHandbook"!=o&&"live-cricket-stream-page"!=o&&_cbAuthService.redirect_after_token_verified(),"CANCELLED"==e.data.user.state&&localStorage.setItem("CancelAlertNotice",JSON.stringify(e.data.notice)),t()):angular.isDefined(e.data.exception)&&"14001"==e.data.errorCode?(localStorage.removeItem("AccessToken"),_cbAuthService.refresh_token(o).then():("login"!=o&&"cbContent"!=o&&"news"!=i&&"video"!=i&&window.location.replace(c),_cbAuthService.delete_all_storage_variables(),t())}):(null!=n?_cbAuthService.refresh_token(o):"login"!=o&&"cbContent"!=o&&"news"!=i&&"video"!=i&&_cbAuthService.delete_all_storage_variables(),t())})},_cbAuthService.refresh_token=function(a){return e(function(t,e){r({method:"post",url:n,data:{username:localStorage.getItem("username"),RefreshToken:localStorage.getItem("RefreshToken")}}).then(function(e){200==e.status&&angular.isDefined(e.data.AccessToken)?(localStorage.setItem("AccessToken",e.data.AccessToken),localStorage.setItem("RefreshToken",e.data.RefreshToken),localStorage.setItem("provider",e.data.provider),localStorage.setItem("username",e.data.username),_cbAuthService.verify_access_token()):(_cbAuthService.delete_all_storage_variables(),localStorage.setItem("UserState","NOTSET"),"live-cricket-stream-page"!=a&&window.location.replace(c)),t()})})},_cbAuthService.redirect_after_token_verified=function(e,t){var a=null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET";if("account"!=e&&"deals"!=e&&("cbContent"!=e||"video"!=t&&"news"!=t))switch(a){case"NA":case"CANCELLED":var n,o=null!=localStorage.getItem("loginToPayment")&&localStorage.getItem("loginToPayment");localStorage.removeItem("loginToPayment"),!o&&void 0!==(n=null!=_cbAuthService.getWithExpiry("ContentURL")?_cbAuthService.getWithExpiry("ContentURL"):null)&&null!=n&&"cbContent"!=e?(localStorage.removeItem("ContentURL"),window.location.replace(n)):window.location.replace(i);break;case"ACTIVE":void 0!==(n=null!=_cbAuthService.getWithExpiry("ContentURL")?_cbAuthService.getWithExpiry("ContentURL"):null)&&null!=n&&localStorage.removeItem("ContentURL"),"payment"!=e&&"cbContent"!=e&&"deals"!=e&&(void 0!==n&&null!=n?window.location.replace(n):window.location.replace(l));break;case"NOTSET":window.location.replace(c);break;default:window.location.replace("/")}},_cbAuthService.delete_all_storage_variables=function(){localStorage.removeItem("username"),localStorage.removeItem("provider"),localStorage.removeItem("AccessToken"),localStorage.removeItem("RefreshToken"),localStorage.removeItem("PlanState"),localStorage.removeItem("UserState"),localStorage.removeItem("PlanId"),localStorage.removeItem("TermId"),localStorage.removeItem("UserId"),localStorage.removeItem("User"),localStorage.removeItem("CBPChatGuidelines"),localStorage.removeItem("CancelAlertNotice")},_cbAuthService.subscribe=function(e,t,a){_cbAuthService.setWithExpiry(e,t,a),window.location.replace("/premium-subscription/user/select-plan/cricbuzz-promo")},_cbAuthService.login=function(e,t,a){_cbAuthService.setWithExpiry(e,t,a),window.location.replace("/premium-subscription/user/login")},_cbAuthService.setWithExpiry=function(e,t,a){a*=1e3,t={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(t))},_cbAuthService.getWithExpiry=function(e){var t=localStorage.getItem(e);return t?(t=JSON.parse(t),(new Date).getTime()>t.expiry?(localStorage.removeItem(e),null):t.value):null},_cbAuthService.getUserState=function(){switch(null!=localStorage.getItem("UserState")?localStorage.getItem("UserState"):"NOTSET"){case"NA":case"CANCELLED":return"NA";case"FREE":case"FREE_CANCELLED":case"FREE_ERROR":case"ACTIVE":case"ACTIVE_CANCELLED":case"ACTIVE_ERROR":return"ACTIVE";default:return"NOTSET"}}}]),angular.module("CB",["ngCookies","CBLib","CBMatches","CBStats","CBAds","CBUser","CBChat","CBVideos","CBCommentary","CBPlus","CBFantasy","CBAuth"])),ENVIRONMENT="production",_ele=(CB.config(["$httpProvider",function(e){ENVIRONMENT=0<=location.hostname.indexOf("cricbuzz.com")?"production":0<=location.hostname.indexOf("cricbuzz.stg")?"staging":"development",e.defaults.withCredentials=!0}]),CB.run(["$rootScope","CBQSvc",),CB.service("CBQSvc",["$rootScope","$timeout",function($rootScope,$timeout){var _CBQSvc=this;_CBQSvc.QueueId=0,_CBQSvc.interval=1e3,_CBQSvc.onLoadQueueId=0,_CBQSvc.init=_CBQSvc.run_queue=function(){_CBQSvc.QueueId=_CBQSvc.loop_queue(CBQueue,_CBQSvc.run_queue,_CBQSvc.QueueId,_CBQSvc.interval)},_CBQSvc.run_onload_queue=function(){_CBQSvc.onLoadQueueId=_CBQSvc.loop_queue(CBQueueOnLoad,_CBQSvc.run_onload_queue,_CBQSvc.onLoadQueueId,_CBQSvc.interval+2e3)},_CBQSvc.loop_queue=function(t,a,n,o){if(0<t.length)try{_CBQSvc.process_queue(t.pop()),_CBQSvc.loop_queue(t,a,n,o)}catch(e){_CBQSvc.loop_queue(t,a,n,o)}else if(o<25e3)return $timeout.cancel(n),_CBQSvc.interval+=3e3,$timeout(a,o)},_CBQSvc.process_queue=function(queue){try{"function"==typeof queue?queue():eval(queue)}catch(ex){$rootScope.cblog.exception(ex,"CB Queue Service")}}}]),function(e){return angular.element(document.querySelector(e))}),_eleAll=modal_toggle=function(e,t){e=document.getElementById(e);"block"==t?(e.style.display="block",document.getElementsByTagName("body")[0].style.cssText="height:100%;overflow:hidden"):(e.style.display="none",document.getElementsByTagName("body")[0].style.cssText="height:null;overflow:null")},toggle_video_modal=function(e,t){var e=e.getAttribute("video_id"),a=document.getElementById("commentary-video-"+e),n=document.getElementById("commentary-video-wrap"+e),o=document.getElementsByClassName("cb-comm-video-modal-wrap"),i=document.getElementsByClassName("cb-comm-live-video"),r=(document.getElementsByTagName("body")[0].offsetWidth-980)/2,s=313.4+r,r=666.6+r,l=a.querySelector(".video-container"),c=9*s/16;if("block"==t){for(var d=0;d<o.length;d++)o[d].remove();for(d=0;d<i.length;d++)i[d].remove();a.style.width=s+"px",l.style.height=c+"px",a.style.left=r+"px",a.style.bottom="0",a.style.top="auto"}else n.remove(),document.getElementById("video_embed_"+e)&&document.getElementById("video_embed_"+e).remove()},attach_recaptcha_js=function(){var e;_ele("#expertComments").scope().reset_have_your_form(),recaptcha_file="https://www.google.com/recaptcha/api.js",0<document.querySelectorAll('[src="'+recaptcha_file+'"]').length||((e=document.createElement("script")).setAttribute("src",recaptcha_file),e.type="text/javascript",e.async=!0,document.body.appendChild(e))};function hide_show(e,t){e=document.querySelector(e);e.style.display="show"==t?"block":"none"}document.write=angular.bootstrap(document,["CB"]);