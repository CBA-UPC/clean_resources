/*
 !! BEGIN /ui/ect/js/common/jQnoConflict.js !!! !! BEGIN /ui/ect/js/common/ectKeyPressAutoFormatter.js !!! !! BEGIN /ui/ect/js/common/ectCompensationEventHandler.js !!! !! BEGIN /ui/ect/js/common/ectChangeHandler.js !!! !! BEGIN /ui/ect/js/common/ectSimpleLink.js !!! !! BEGIN /ui/ect/js/common/ectSimpleLinkField.js !!! !! BEGIN /ui/ect/js/common/ectConstants.js !!! !! BEGIN /ui/ect/js/common/ectLayoutsAndFactory.js !!! !! BEGIN /ui/ect/js/mss/ectGlobalAssignmentDropDown.js !!! !! BEGIN /ui/ect/js/mss/ectGlobalAssignmentViewNavigation.js !!! !! BEGIN /ui/ect/js/mss/ectGlobalAssignmentViewNavigationDAO.js !!! !! BEGIN /ui/ect/js/common/ectHourMinuteField.js !!! !! BEGIN /ui/ect/js/common/ectProfileUPDQuickCard.js !!! !! BEGIN /ui/ect/js/common/ectResponseDialog.js !!! !! BEGIN /ui/ect/js/common/ectWorkflowDialog.js !!! !! BEGIN /ui/ect/js/common/ectFlashMessage.js !!! !! BEGIN /ui/ect/js/common/ectPanelWithHeader.js !!! !! BEGIN /ui/ect/js/common/ectAbstractGroup.js !!! !! BEGIN /ui/ect/js/common/ectReadWriteForm.js !!! !! BEGIN /ui/ect/js/common/ectUtils.js !!! !! BEGIN /ui/ect/js/common/ectAbstractInputField.js !!! !! BEGIN /ui/ect/js/common/ectInlineMsg.js !!! !! BEGIN /ui/ect/js/common/ectInputBox.js !!! !! BEGIN /ui/ect/js/common/ectInputWithNamespace.js !!! !! BEGIN /ui/ect/js/common/ectEmptySectionInfo.js !!! !! BEGIN /ui/ect/js/common/ectCascadePicklistManager.js !!! !! BEGIN /ui/ect/js/common/ectColumnWidthMatcher.js !!! !! BEGIN /ui/ect/js/common/ectPropagationSetterDependentFieldsClearer.js !!! !! BEGIN /ui/ect/js/common/ectDataGrid.js !!! !! BEGIN /ui/ect/js/common/ectLazyDataGrid.js !!! !! BEGIN /ui/ect/js/common/ectDataGridWithDetails.js !!! !! BEGIN /ui/ect/js/common/ectRowIconGroup.js !!! !! BEGIN /ui/ect/js/common/ectFindUserField.js !!! !! BEGIN /ui/ect/js/common/ectValidationManager.js !!! !! BEGIN /ui/ect/js/common/ectCalendar.js !!! !! BEGIN /ui/ect/js/common/ectCalendarWrapper.js !!! !! BEGIN /ui/ect/js/common/ectCalendarLegacy.js !!! !! BEGIN /ui/ect/js/common/ectTime.js !!! !! BEGIN /ui/ect/js/common/ectDateTime.js !!! !! BEGIN /ui/ect/js/common/ectPopupManager.js !!! !! BEGIN /ui/ect/js/common/ectComboDropDown.js !!! !! BEGIN /ui/ect/js/common/ectHelpPop.js !!! !! BEGIN /ui/ect/js/common/ectFieldPlusOldValue.js !!! !! BEGIN /ui/ect/js/common/ectSalaryField.js !!! !! BEGIN /ui/ect/js/common/ectFieldWithContext.js !!! !! BEGIN /ui/ect/js/common/ectTextArea.js !!! !! BEGIN /ui/ect/js/common/ectCheckBox.js !!! !! BEGIN /ui/ect/js/common/ectAdjustCompFields.js !!! !! BEGIN /ui/ect/js/common/ectCalcField.js !!! !! BEGIN /ui/ect/js/common/ectCascadeField.js !!! !! BEGIN /ui/ect/js/common/ectComboBox.js !!! !! BEGIN /ui/ect/js/common/foundationAutoComplete/ectFoundationAutoComplete.js !!! !! BEGIN /ui/ect/js/common/ectPicklistAutoComplete.js !!! !! BEGIN /ui/ect/js/common/ectMultipleRelation.js !!! !! BEGIN /ui/ect/js/common/ectTagLabel.js !!! !! BEGIN /ui/ect/js/common/ectCommonFileUpload.js !!! !! BEGIN /ui/ect/js/common/ectFileUploadDownload.js !!! !! BEGIN /ui/ect/js/common/ectFontConfig.js !!! !! BEGIN /ui/ect/js/common/ectFieldsFactory.js !!! !! BEGIN /ui/ect/js/common/ectPIIField.js !!! !! BEGIN /ui/ect/js/common/ectLabel.js !!! !! BEGIN /ui/ect/js/common/ectStateLabel.js !!! !! BEGIN /ui/ect/js/common/ectHiddenField.js !!! !! BEGIN /ui/ect/js/common/ectFOAddressView.js !!! !! BEGIN /ui/ect/js/common/ectTimeSelect.js !!! !! BEGIN /ui/ect/js/common/ectTimeField.js !!! !! BEGIN /ui/ect/js/common/ectRadioGroup.js !!! !! BEGIN /ui/ect/js/common/ectURLLinks.js !!! !! BEGIN /ui/ect/js/common/ectDocUrlLink.js !!! !! BEGIN /ui/ect/js/common/ectDialogBox.js !!! !! BEGIN /ui/ect/js/common/ectHideHeader.js !!! !! BEGIN /ui/ect/js/common/ectAbstractPaginatedList.js !!! !! BEGIN /ui/ect/js/common/ectPaginatedListWithDataGrid.js !!! !! BEGIN /ui/ect/js/common/ectProgressIndicator.js !!! !! BEGIN /ui/ect/js/absence/payout/tlmTimeAccountBalanceField.js !!! !! BEGIN /ui/ect/js/absence/payout/tlmTerminationPayoutDialog.js !!! !! BEGIN /ui/ect/js/absence/workSchedule/tlmManageWorkScheduleField.js !!! !! BEGIN /ui/ect/js/absence/workSchedule/tlmManageWorkScheduleDialog.js !!! !! BEGIN /ui/ect/js/absence/workSchedule/tlmManageWorkScheduleDialogContent.js !!! !! BEGIN /ui/ect/js/absence/workSchedule/tlmManageWorkScheduleDetails.js !!! !! BEGIN /ui/ect/js/absence/workSchedule/tlmManageWorkSchedulePreview.js !!!*/
window.jQuery&&jQuery.noConflict();function ECTKeyPressAutoFormatter(a){this.setStringFormat(a)}
ECTKeyPressAutoFormatter.prototype=function(){var a=/\W*\w\*{0,}\W*/gi,b=/\W*\w\*{0,}((?=\[)(\[\W*\w*\W*\]\W*)|(\W*))/gi,c=/\w/gi;return set(new juic.EventTarget,{showFormatHelp:function(a){this._callOut=new SFCalloutPopup({originOptions:{direction:"right"},width:150,closeOnClick:!1,closeOnMouseout:!1});this._callOutRefference=a},setStringFormat:function(c){if(!ECTUtil.isEmpty(c)){var d=c.indexOf("*Optionals*");this._format=0<=d?c.substring(0,d):c;this._splitFormat=this._format.match(0<=d?b:a);this._formatLength=
this._format.replace(/\[|\]/gi,"").length}},_splCharHandling:function(a,b,f,g){var d=a[f].match(/\W{1}/gi),e=b.replace(c,a[f].match(c)[0]);b=b.match(/\*/gi).length;if(d){for(var m=0;m<b;m++)e=e.replace("*",d[m]);g.push(e)}else{for(m=f;m<=f+b;m++)a[m]&&g.push(a[m].match(c)[0]);return b}return 0},_optionalsHandling:function(b,c,f,g){var d=c.match(/\[\W*\w*\W*\]/gi)[0].replace(/\[|\]/gi,"");if(b[f].match(new RegExp("\\w{1,"+(1+d.length)+"}\\W{1,}","gi"))&&!d.match(/\W{1,}/gi))g.push(b[f]);else return d=
c.replace(/\[|\]/gi,""),b=this._replaceFormatWith(b.slice(f,f+(d.length-1)).join(""),d.match(a)),c.match(/\[\w*\W{1,}\w*\]/gi)?g.push(b.replace(/\W$/gi,"")):g.push(b),d.replace(/\W/gi,"").length-1;return 0},_replaceFormatWith:function(b,e){for(var d=e?e:this._splitFormat,g=[],k=b.match(a),l=k?k.length:0,m=0,n=0;n<l;n++){var p=d[m];if(!p&&m>d.length-1)return g.length?g.join(""):b;try{var q=p.indexOf("*"),r=p.indexOf("[");switch(!0){case -1!=r:n+=this._optionalsHandling(k,p,n,g);break;case -1!=q:n+=
this._splCharHandling(k,p,n,g);break;default:g.push(p.replace(c,k[n].match(c)[0]))}m++}catch(t){return b}}return g.join("")},_showHelp:function(a){if(this._callOut){this._callOut.setContent(this._format.substring(a.length,this._formatLength));this._callOut.show(this._callOutRefference);var b=this;this._callOutHideTimer&&(clearTimeout(this._callOutHideTimer),delete this._callOutHideTimer);this._callOutHideTimer=setTimeout(1E3)}},getFormattedString:function(a){if(!this._format)return a;
var b=this._replaceFormatWith(a);if(a.length>=this._formatLength)return b.substring(0,this._formatLength);this._showHelp(a);return b}})}();function ECTCompensationEventHandler(){}ECTCompensationEventHandler.prototype=function(){return set(new juic.EventTarget,{handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_CHANGE:a.submitOnFieldChange&&(a.actionCommand=ECTConstants.EVENT_SUBMIT_ON_FIELD_CHANGE),this.dispatchEvent(a)}}})}();
"undefined"===typeof ECTChangeHandler&&(window.ECTChangeHandler=function(){var a=[],b=function(){};b.newInstance=function(){var c=new b;c._contextLocation=a.push(c)-1;return c};extend(b,juic.EventTarget,{newInstance:b.newInstance,_dirty:!1,_buttonEnabledStatus:{saveBtn:!0,dontSaveBtn:!0,cancelBtn:!0},_isActive:!1,_buttonEnabledStatusChanged:!1,isDirty:function(){if(this._dirty)return this._dirtyContext=this,!0;for(var b=this._contextLocation,d=a.length;b<d;b++){var e=a[b];if(e&&e._dirty)return this._dirtyContext=
e,!0}return!1},setDirty:confirmIfDirty:function(a,b,e,f){return this.isDirty()?(this._dirtyContext._confirmDialog||(this._dirtyContext._confirmDialog=new ECTResponseDialog("dirtyConfirm",b||MSGS.EMPFILE_FT_UNSAVED_CHANGES,e||MSGS.EMPFILE_HRIS_WARNING_TITLE),this._dirtyContext._confirmDialog.addEventListener(ECTConstants.EVENT_YES_SAVE,this),this._dirtyContext._confirmDialog.addEventListener(ECTConstants.EVENT_YES_DECLINE,this),this._dirtyContext._confirmDialog.addEventListener(ECTConstants.EVENT_HIDE_RESPONSE_DIALOG,
this)),this._dirtyContext._data=a,this._dirtyContext._confirmDialog.show(null,f),this.dispatch(ECTConstants.ACTION_TYPE_SHOW_DIRTY,{showDialog:!0}),this._dirtyContext._isActive=!0,this._dirtyContext._buttonEnabledStatusChanged?this._dirtyContext._enableDialogButtons():this._dirtyContext._confirmDialog.enableButtons(!0),this._dirtyContext._buttonEnabledStatusChanged=!1,!0):!1},handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_YES_SAVE:this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_CONFIRM_SAVE,
data:this._data});break;case ECTConstants.EVENT_YES_DECLINE:this._dirty=!1;this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_CONFIRM,data:this._data});break;case ECTConstants.EVENT_HIDE_RESPONSE_DIALOG:this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_CONFIRM_NO,data:this._data})}this._isActive=!1},cleanup:enableButtons:function(a,b,e){this._buttonEnabledStatus.saveBtn=
!!a;this._buttonEnabledStatus.dontSaveBtn=!!b;this._buttonEnabledStatus.cancelBtn=!!e;this._buttonEnabledStatusChanged=!0;this._isActive&&this._enableDialogButtons()},_enableDialogButtons:function(){this._confirmDialog.enableButton(this._buttonEnabledStatus.saveBtn,ECTChangeHandler.saveButtonIndex);this._confirmDialog.enableButton(this._buttonEnabledStatus.dontSaveBtn,ECTChangeHandler.dontSaveButtonIndex);this._confirmDialog.enableButton(this._buttonEnabledStatus.cancelBtn,ECTChangeHandler.cancelButtonIndex)}});
return b.newInstance()}(),window.ECTChangeHandler.saveButtonIndex=2,window.ECTChangeHandler.dontSaveButtonIndex=1,window.ECTChangeHandler.cancelButtonIndex=0,window.ECTChangeHandler.onBeforeUnloadFired=!1,window.ECTChangeHandler.confirmPageNavigation=function(a){if(!window.ECTChangeHandler.onBeforeUnloadFired&&window.SFSessionTimeout&&!window.SFSessionTimeout.isSessionExpired()&&window.ECTChangeHandler.isDirty())return window.ECTChangeHandler.onBeforeUnloadFired=!0,a.returnValue=MSGS.COMMON_Unsaved_Changes,
window.setTimeout(window.ECTChangeHandler.resetOnBeforeUnloadFired,500),MSGS.COMMON_Unsaved_Changes},window.ECTChangeHandler.resetOnBeforeUnloadFired=Util.chain(window,"onbeforeunload",window.ECTChangeHandler.confirmPageNavigation));uic.extend(ECTSimpleLink,SFSimpleLink,{getActionData:function(){return this._actionData},updateActionData:function(a){this._actionData=a}});
function ECTSimpleLinkField(a,b){this.linkData="string"===typeof a?""===a?{linkText:" ",actionData:{}}:eval("("+a+")"):a||{linkText:" ",actionData:{}};b=b||{};this._super(this.linkData.linkText,ECTConstants.EVENT_CLICK,this.linkData.actionData);a.title&&this.setTitle(this.linkData.title);this._cssClass=this._customCss=b.cssClass||"ECTSimpleLinkField"}ECTSimpleLinkField.FIELD_TYPE="ECTSimpleLinkField";ECTSimpleLinkField.EC_FIELD_TYPE="SIMPLE_LINK_FIELD";
juic.extend(ECTSimpleLinkField,ECTSimpleLink,{isModified:function(){return!1},getValue:function(){},setValue:function(){},reset:function(){},isWritable:function(){return!0},setWritable:function(a){},setFontConfig:function(a){this._fontConfig=a;this._cssClass=this._customCss;a&&(this._cssClass+=" "+ECTFontConfig.getClassNames(this._fontConfig));if(a=juic.$(this.id))a.className=this._cssClass},_click:function(){this.linkData.url?window.location.href=this.linkData.url:this._super()},_renderLinkContent:function(a){this.linkData.url||
this._actionData?this._super(a):a.push(juic.escapeHTML(this._label))},getFontConfig:function(){return this._fontConfig}});
var ECTConstants={ACTION_TYPE_ADD:"Add",ACTION_TYPE_CORRECTION:"Correction",ACTION_TYPE_EDIT:"Edit",ACTION_TYPE_WORKFLOW:"Workflow",ACTION_TYPE_SHOW_DIRTY:"showDirty",EVENT_ACTION:"action",EVENT_APPROVE:"approve",EVENT_ACTION_DATA_AVAILABLE:"actionDataAvailable",EVENT_CANCEL_SEND_WORKFLOW:"cancelSendWorkflow",EVENT_CARD_TYPE_FORMAT_AVAILABLE:"cardTypeFormaAvailable",EVENT_CHANGE:"change",EVENT_FIELD_HAS_ERROR:"fieldError",EVENT_CHANGE_REASON_AVAILABLE:"changeReasonAvailable",EVENT_CLICK:"click",EVENT_CONFIRM:"confirm",
EVENT_CONFIRM_NO:"confirm_no",EVENT_CONFIRM_SAVE:"confirmSave",EVENT_CONTROLLER_EXCEPTION:"Exception",EVENT_CORRECTION_DATA_AVAILABLE:"correctionDataAvailable",EVENT_COUNTRY_SPECIFIC_FIELDS_AVAILABLE:"countrySpecificFieldsAvailable",EVENT_COUNTRY_SPECIFIC_FIELDS_AVAILABLE_FOR_CORRECTION:"countrySpecificFieldsAvailableForCorrection",EVENT_DECLINE:"decline",EVENT_DELETE:"delete",EVENT_DELETE_WF_ACTIONS:"deleteWFActions",EVENT_FIELDS_AVAILABLE:"fieldsAvailable",EVENT_FIELDS_CHANGE:"fieldsChange",EVENT_TRIGGER_RULES:"triggerRules",
EVENT_WIDGET_DATA_AVAILABLE:"widgetDataAvailable",EVENT_CHART_LIST_AVAILABLE:"chartListAvailable",EVENT_VIEW_CHANGE:"viewChange",EVENT_FIELD_FOCUS:"focusOnField",EVENT_FORM_FIELD_CHANGE:"formFieldChange",EVENT_FORM_FIELD_UNCHANGE:"formFieldUnChange",EVENT_FIELD_CHANGE:"fieldChange",EVENT_FIELD_UNCHANGE:"fieldUnChange",EVENT_HIDE:"hide",EVENT_HISTORY_ITEM_DELETED:"historyItemDeleted",EVENT_HIDE_RESPONSE_DIALOG:"hideOnResponceDialog",EVENT_INIT_ACTION_DATA_AVAILABLE:"initActionDataAvailable",EVENT_LOADING_DATA:"loadingData",
EVENT_MOUSEOUT:"mouseout",EVENT_MOUSEOVER:"mouseover",EVENT_PAGE_DATA_AVAILABLE:"pageDataAvailable",EVENT_PRIMARY_RECORD_SET:"primaryRecordSet",EVENT_SAVE:"save",EVENT_SAVE_ADD:"saveAdd",EVENT_SAVE_COMPLETE:"saveComplete",EVENT_SAVE_SUCCESS:"SaveSuccess",EVENT_SAVE_WF:"saveWf",EVENT_SELECTION_CHANGE:"selectionChange",EVENT_SEND_WORKFLOW:"sendWorkflow",EVENT_SERVER_ERROR:"serverError",EVENT_GET_CONTEXTUAL_SEARCH_FIELDS:"getContextualSearchFields",EVENT_CLEAR_DEPENDENT_FIELDS:"clearDependentFields",
EVENT_SUBMIT_WF:"submitWf",EVENT_PROPAGATE_RESULTS_FIELDS:"propagateResultsFields",EVENT_UNDO:"undo",EVENT_WORKFLOW_DATA_AVAILABLE:"workFlowDataAvailable",EVENT_YES_DECLINE:"yesDecline",EVENT_NO_CONFIRM:"noConfirm",EVENT_YES_SENDBACK:"yesSendback",EVENT_YES_SAVE:"yesSave",EVENT_ITEM_MOVED:"itemsMoved",EVENT_ADD_SECTION:"addNewSection",EVENT_DELETE_SECTION:"deleteSection",EVENT_CONFIRM_COUNTRY_SELECT:"confirmCountrySelection",EVENT_CONFIRM_DATE_SELECT:"confirmDateSelection",EVENT_HIDE_COUNTRY_SELECT:"hide",
EVENT_HIDE_DATE_SELECT:"hide",EVENT_SHOW_DETAIL:"showDetail",EVENT_DELETE_DETAIL:"deleteDetail",EVENT_SUBMIT_ON_FIELD_CHANGE:"submitOnFieldChange",EVENT_ALT_LANGUAGE:"toggleAlternateCharacters",EVENT_ALT_LANGUAGE_RESPONSE_AVAILABLE:"altLanguageSectionsAvailable",EVENT_SHOW_LOADING:"showLoading",EVENT_ADDITIONAL_FIELDS_AVAILABLE_FOR_ADD:"additionalFieldsAvailableForAdd",EVENT_COMPUTED_FIELDS_AVAILABLE:"computedFieldsAvailable",EVENT_END_ASSIGNMENT_FIELDS_AVAILABLE:"endAssignmentFieldsAvailable",EVENT_INVOKE_CHANGE:"invokeChange",
EVENT_SAVE_INITIATE:"saveAndInitiate",EVENT_SAVE_EDIT:"saveAndEdit",EVENT_DOWNLOAD:"downloadFile",EVENT_SHOW_HIDE_FILTER:"showHideFilter",EVENT_YES_MOVE_POSITION:"yesMovePosition",EVENT_NO_MOVE_POSITION:"noMovePosition",EVENT_MOVE_POSITION:"movePosition",EVENT_SAVE_WORKFLOW_RESPONSE:"saveWorkflowResponse",EVENT_DELETE_WORKFLOW_RESPONSE:"deleteWorkflowResponse",EVENT_CONFIRM_VALIDATION_WARNING_RESPONSE:"confirmWarningResponse",EVENT_CLOSE:"close",EVENT_RESIZE_DIALOG:"resizeDialog",TYPE_CONFIRM:"confirm",
TYPE_CONFIRM_DELETE:"confirmDelete",TYPE_DIRTY_CONFIRM:"dirtyConfirm",TYPE_CHANGE_CONFIRM:"changeConfirm",TYPE_SUCCESS:"success",TYPE_ALERT:"alert",TYPE_ERROR:"error",TYPE_WARNING:"warning",TYPE_INFORMATION:"information",TYPE_DEFAULT:"default",TYPE_NEWHIRE_SUCCESS:"newHireSuccess",TYPE_SEND_BACK:"sendBack",TYPE_ADD_GA_SUCCESS:"addGASuccess",TYPE_RULE_EDIT:"onEdit",TYPE_DECLINE_DELEGATION:"declineDelegation",TYPE_DECLINE_ESCALATION:"declineEscalation",TYPE_DELEGATE:"Delegate",EVENT_PROCEED:"proceed",
EVENT_PROCEED_CORRECT:"correct",EVENT_ADD_ADDRESS_SECTION:"addAddressSection",EVENT_REQUEST_ADDRESS_DETAIL:"requestAddressDetail",EVENT_HISTORY_DATA_AVAILABLE:"historyDataAvailable",EVENT_HISTORY_DETAILS_AVAILABLE:"historyDetailsAvailable",EVENT_HISTORY_PAGE_CREATED:"historyPageCreated",EVENT_HISTORY_SAVE_RESPONSE:"historySaveResponse",EVENT_EDIT_EFFECTIVE_DATED_PORTLET:"editEffectiveDatedPortlet",EVENT_HISTORY_DELETE_RESPONSE:"historyDeleteResponse",EVENT_HISTORY_RECORD_SELECTED:"historyRecordSelected",
EVENT_HISTORY_LINK_CLICKED:"historyLinkClicked",EVENT_GET_CHILD_INFO:"getChildInfo",EVENT_CHILD_INFO_NULL:"childInfoNull",EVENT_CHILD_INFO_AVAILABLE:"childInfoAvailable",EVENT_HISTORY_POSITION_INFO_CHANGE:"historyPositionInfoChange",EVENT_INLINE_INFO_MSG_AVAILABLE:"inlineInfoMsgAvailable",EVENT_CANCEL:"cancel",REQUEST_WORKFLOW_ID:"workflowRequestId",EVENT_SAVE_PORTLET:"savePortlet",EVENT_SAVE_DETAIL_INFO:"saveDetailInfo",EVENT_CLOSE_DETAIL_INFO:"closeDetailInfo",EVENT_DETAILED_INFO_AVAILABLE:"detailedInfoAvailable",
EVENT_DEPENDENT_GLOBAL_INFO_AVAILABLE:"dependentGlobalInfoAvailable",EVENT_DEPENDENT_GLOBAL_INFO_NULL:"dependentGlobalInfoNull",WORKFLOW_STEP_END:"end",WORKFLOW_STEP_START:"start",WORKFLOW_STEP_TRANSIT:"transit",CONTROLLER_ADJUST_COMPENSATION:"adjustCompensationActionController",CONTROLLER_BONUS_INFO:"bonusInfoActionController",CONTROLLER_CHANGE_HOME_ADDRESS:"changeHomeAddressActionController",CONTROLLER_CHANGE_BUSINESS_ADDRESS:"changeBusinessAddressActionController",CONTROLLER_CHANGE_NAME:"nameChangeActionController",
CONTROLLER_CHANGE_PERSONAL_INFO:"changePersonalInfoActionController",CONTROLLER_CHANGE_JOB:"changeJobActionController",CONTROLLER_CHANGE_SALARY:"salaryChangeActionController",CONTROLLER_CITIZENSHIP_INFO:"citizenshipInfoActionController",CONTROLLER_CSF_HANDLER:"countrySpecificValueController",CONTROLLER_EMAIL_INFO:"emailInfoActionController",CONTROLLER_HIRE:"hireActionController",CONTROLLER_HRIS_TRANSFER:"hrisTransferActionController",CONTROLLER_IM_INFO:"IMInfoActionController",CONTROLLER_INTERNATIONAL_ADDRESS:"interNationalAddress",
CONTROLLER_NATIONAL_ID_CARD:"nationalIdCardActionController",CONTROLLER_NEW_HIRE:"hrisHireController",CONTROLLER_PHONE_INFO:"phoneInfoActionController",CONTROLLER_PROMOTE:"promoteActionController",CONTROLLER_PLAN_LOA:"planLOAActionController",CONTROLLER_REHIRE:"rehireActionController",CONTROLLER_RETURN_LOA:"returnLOAActionController",CONTROLLER_TERMINATE:"terminateActionController",CONTROLLER_UPDATE_WORKING_ELIGIBILITY:"updateWorkingEligibilityActionController",CONTROLLER_VISA_INFO:"visaInfoActionController",
CONTROLLER_WORK_PERMIT_INFO:"workPermitInfoActionController",CONTROLLER_DIRECT_DEPOSIT:"directDepositActionController",CONTROLLER_PAY_COMP_NON_RECURRING:"payCompNonRecurringActionController",CONTROLLER_PAY_COMP_RECURRING:"payCompRecurringActionController",CONTROLLER_ESS_MSS_ACTION:"essMssActionController",CONTROLLER_ESS:"essController",CONTROLLER_MSS_EMPLOYMENT_INFO:"mssEmploymentInfoController",CONTROLLER_ESS_MSS_WORKFLOW:"essMssWorkflowController",CONTROLLER_ATTACHMENT:"hrisAttachmentController",
CONTROLLER_LAZY_DATA_GRID:"lazyDataGridController",STATUS_ERROR:"error",STATUS_WARNING:"warning",STATUS_SUCCESS:"success",STATUS_FAILURE:"failure",STATUS_WORKFLOW:"workflowed",STATUS_MOVE_POSITION:"moveposition",STATUS_VALIDATION_WARNING:"warning",STATUS_VALIDATION_WARNING_ACKNOWLEDGED:"warningAcknowledged",COMMAND_CANCEL:"Cancel",COMMAND_EFFECTIVE_DATE_PICKED:"effectiveDatePicked",COMMAND_SAVE:"Save",COMMAND_NEXT:"next",COMMAND_PREVIOUS:"prev",COMMAND_DONE:"Done",LAYOUT_SF_FORM:0,LAYOUT_ECT_FLOW:1,
LAYOUT_ECT_FORM:2,LAYOUT_ECT_GRID:3,FORM_LAYOUT:"ECTFormLayout",FLOW_LAYOUT:"ECTFlowLayout",GRID_LAYOUT:"ECTGridLayout",LABEL_PROFILE_UPDATE:0,LABEL_SIMPLE:1,LABEL_ECT:2,LABEL_WITH_TOOLTIP:3,LABEL_DGRID:4,CHANGED_COLOR:"#0a6ed1",UNCHANGED_COLOR:"#000000",DISABLED_COLOR:"#afafaf",BASE_BUTTON_WRAPPER_CLASS:"aquabtn viewPanelFooterBtn",LIVE_PROFILE_URL:"/xi/ui/pages/empfile/liveprofile.xhtml?selected_user\x3d",WORKFLOW_PAGE_LINK:"/xi/ui/ect/pages/workflowApproval/ectWorkflowApproval.xhtml",HOME_PAGE_URL:"/sf/home",
ADMIN_WORKFLOW_REQ_URL:"/acme?fbacme_o\x3dadmin\x26ap_param_action\x3dap_hris_manage_workflow_request\x26bplte_company\x3d",ADMIN_WORKFLOW_REQ_V2_URL:"/xi/ui/ect/pages/manageWorkflowRequests/ectManageWorkflowRequests.xhtml",PENDING_REQ_URL:"/xi/ui/ect/pages/pendingWorkflows/pendingWorkflowV12.xhtml?selected_user\x3d",MANAGE_FO_URL:"/xi/ui/ect/pages/adminFoundationTable/ectFoundationTableAdmin.xhtml",LOCATION_MANAGE_PENDING_HIRES:"/xi/ui/ect/pages/newHire/hirePeopleList.xhtml?peopleType\x3dcandidate",
TYPE_SELECT:"SELECT",TYPE_FINDUSER:"HRIS_FINDUSER",TYPE_MULTIPLE_RELATION:"multipleRelation",TYPE_CASCADE:"CASCADE",TYPE_DATAGRID:"DATAGRID",TYPE_LAZYDATAGRID:"LAZYDATAGRID",TYPE_PAGINATEDDATAGRID:"PAGINATEDDATAGRID",TYPE_FIELDSGROUP:"FIELDSGROUP",TYPE_FOUNDATION_AUTOCOMPLETE:"FOUNDATION_AUTOCOMPLETE",TYPE_USER:"USER",TYPE_FGROUPCAMEL:"fieldsGroup",TYPE_ATTACHMENT:"ATTACHMENT",TYPE_INVOKE_CHANGE:"INVOKECHANGE",TYPE_NAME_FORMAT_INPUT:"NAME_FORMAT_OPTIONS",TYPE_TREE_SELECT:"treeSelect",CHECKBOX_TYPES:{CHECK:!0,
check:!0,BOOLEAN:!0},MODE_VIEW:"view",MODE_EDIT:"edit",MODE_ADD:"add",EMPLOYMENT_HISTORY_URL:"/xi/ui/ect/pages/empHistory/ectEmpHistory.xhtml",HIDE_LABEL_BY_TYPES:{multipleRelation:!0,CASCADE:!0,DATAGRID:!0,FIELDSGROUP:!0,DATAGRIDWITHDETAILS:!0,INVOKECHANGE:!0,radio:!0,fontConfig:!0},COMPLEX_FIELDS:{multipleRelation:!0,CASCADE:!0,DATAGRID:!0,LAZYDATAGRID:!0,PAGINATEDDATAGRID:!0,FIELDSGROUP:!0,DATAGRIDWITHDETAILS:!0,INVOKECHANGE:!0,radio:!0,fontConfig:!0},ACTION_UP:"up",ACTION_DOWN:"down",EVENT_ADDANOTHER:"addAnother",
EVENT_GOTO_PROFILE:"gotoProfile",SERVER_DATE_FORMAT:"yyyy-MM-dd",LINK_PERSONAL_INFO_TAB:"personalInfoTab",LINK_EMPLOYMENT_INFO_TAB:"employmentInfoTab",LINK_UPDATE_EMPLOYEE_RECORDS:"updateEmployeeRecords",LINK_EMPLOYMENT_HISTORY:"employmentHistory",PORTLET_TYPE_DEPENDENT_INFO_POPUP:"dependentInfoPopupView",USER_STATUS_ACTIVE:"active",USER_STATUS_TERMINATED:"terminated",USER_STATUS_FUTURE_HIRE:"futureHire",POSITIONS_UNDER_MANAGER:"positions-under-manager",POSITION_JOB_INFO_FIELD:"jobInfo-position",
JOB_INFO_TIME_IN_POSITION:"jobInfo-timeInPosition",JOB_INFO_POSITION_ENTRY_DATE:"jobInfo-positionEntryDate",FIELD_WITH_CONTEXT:"FIELD_WITH_CONTEXT",GENERIC_OBJECT:"GenericObject",EVENT_CONTEXT_ICON_CLICKED:"contextIconClicked",EVENT_CONTEXT_RESPONSE_AVAILABLE:"contextResponseAvailable",JOB_INFO_FTE_FIELD:"jobInfo-fte",JOB_INFO_HOURS_FIELD:"jobInfo-standard-hours",JOB_INFO_JOBCODE_FIELD:"jobInfo-job-code",JOB_INFO_COMPANY_FIELD:"jobInfo-company",JOB_INFO_LOCATION_FIELD:"jobInfo-location",COMP_INFO_FIELDS_LIST:"compInfoFieldsList",
MANAGERS:MSGS.Managers,PEERS:MSGS.EMPFILE_EDU_PEOPLE_NAV_PEERS,REPORTS:MSGS.EMPFILE_EDU_PEOPLE_NAV_DIRECT_REPORTS,INACTIVE_EMPLOYEE_SEARCH:MSGS.EMPFILE_EDU_PEOPLE_NAV_INACTIVE_EMPLOYEE_SEARCH,EVENT_LEARNING_FIND_LEARNING_ACTION:"learningFindLearning",EVENT_COMPETENCY_SHOW_RATING_HISTORY:"showRatingHistory",ONETIME_DEDUCTION:"OneTimeDeduction",RECURRING_DEDUCTION:"RecurringDeduction",ONETIME_DEDUCTION_USER:"OneTimeDeductionUserGO",EMP_COST_DISTRIBUTION:"EmpCostDistribution",GLOBAL_ASSIGNMENT_INFO:"ASSIGNMENT_INFO",
PENSION_PAYOUTS_INFO:"PENSION_PAYOUTS_INFO",EVENT_BENEFIT_CUSTOM_PORTLET_CHANGE:"BenefitCustomChangeHandler",EVENT_DEDUCTION_CUSTOM_PORTLET_CHANGE:"DeductionChangeHandler",EVENT_EMP_COST_DISTRIBUTION_CONFIG_UI_CHANGE:"EmpCostDistributionChangeHandler",SUMISSIONTYPE_ACTUALS:"Actual",SUBMISSIONTYPE_PROPOSALS:"Proposal",EVENT_TAKE_ACTION_CONFIG_UI_CHANGE:"takeActionConfigUIChange",SF_PERSON_AUTOCOMPLETE_SEARCH:"sfPersonAutoComplete",FIELD_CRITERIA_ID:"ECElementFieldCriteria",USERINFO_ELEMENT_SYNC_MAP_ID:"EPUserInfoElementHrisSyncMappingConfig",
USERINFO_RECORD_SYNC_MAP_ID:"EPUserInfoRecordKeyHrisMappingConfig",FIELD_SYNC_MAP_ID:"ECElementFieldSyncMapping",HRIS_FIELD_TRIGGER_RULE_ID:"ECElementFieldTriggerRule",CSF_FIELD_TRIGGER_RULE_ID:"ECLocalElementFieldTriggerRule",MAX_TOOLTIP_FIELDS_HRIS:5,MAX_TOOLTIP_FIELDS_CSF_HRIS:1,GREGORIAN:"Gregorian",BUDDHIST:"Buddhist",ISLAMIC:"Islamic"};
function ECTFieldsLayoutFactory(){assert(!1,"[ECTFieldsLayoutFactory] instance can not be created. Use static factory method 'createLayout' to create new layout")}
ECTFieldsLayoutFactory.createLayout=function(a,b){switch(a){case ECTConstants.LAYOUT_SF_FORM:return new SFInputFormLayout;case ECTConstants.LAYOUT_ECT_FLOW:return new ECTFlowLayout(b);case ECTConstants.LAYOUT_ECT_FORM:return new ECTFormLayout(b);case ECTConstants.LAYOUT_ECT_GRID:return new ECTGridLayout(b);default:return assert(!1,"[ECTFieldsLayoutFactory] layout of type '"+a+"' is not yet supported."),null}};function ECTBaseLayout(){this.register();this.invisibleFields=[]}
(function(){ECTBaseLayout.CSS_CLASS="baseLayout ";ECTBaseLayout.DRAGGING_CLASS="dragging";ECTBaseLayout.DRAG_START_CLASS="dragStart";ECTBaseLayout.DRAG_IN_CLASS="dragIn";ECTBaseLayout.EVENT_DND="EVENT_DND";ECTBaseLayout.ACTION_DND_START="ACTION_DND_START";ECTBaseLayout.ACTION_DND_END="ACTION_DND_END";ECTBaseLayout.ACTION_DND_ENTER="ACTION_DND_ENTER";ECTBaseLayout.ACTION_DND_LEAVE="ACTION_DND_LEAVE";ECTBaseLayout.ACTION_DND_OVER="ACTION_DND_OVER";ECTBaseLayout.ACTION_DND_DROP="ACTION_DND_DROP";ECTBaseLayout.EVENT_LAYOUT_ACTION=
"LAYOUT_ACTION";ECTBaseLayout.ACTION_STATE_CHANGE="ACTION_STATE_CHANGE";ECTBaseLayout.ACTION_REPAINT="ACTION_REPAINT";ECTBaseLayout.DEFAULT_DRAG_OPTIONS={dragOptions:{useShim:!0,shimCursor:"move"},animateDrop:!0,autoScroller:new SFAutoScroller({scrollEl:document.body})};var a={elementId:null,elementStyle:null,dragElement:null,currentTarget:null,dropBox:null},b=window.IS_DESIGN_MODE?SFAbstractDragProxy:juic.Component;juic.extend(ECTBaseLayout,b,{init:function(a){a=a||{};a.cssClass&&(this._cssClass=
a.cssClass);this._readOnlyMode=a.readOnlyMode||!1;this._fields=[];this._maxFieldsToShow=a.maxFieldsToShow||Number.MAX_VALUE;this._moreVisible=!1;this._fontConfig=a.fontConfig;b===SFAbstractDragProxy&&this.setDragOptions(a.dragOptions||ECTBaseLayout.DEFAULT_DRAG_OPTIONS)},getMaxFieldsToShow:function(){return this._maxFieldsToShow},setMaxFieldsToShow:function(a){this._maxFieldsToShow=a;this.repaint()},getHideComplexFields:function(){return this._hideComplexFields},setHideComplexFields:function(a){this._hideComplexFields=
!!a;this.repaint()},setDnDEnabled:function(a){this._dndEnabled=a},getDnDEnabled:function(){return this._dndEnabled},setCollapsible:function(a){a?(this._collapsible=a)&&this.addClass("collapsible"):(delete this._collapsible,this.removeClass("collapsible"),this.removeClass("collapsed"))},getCollapsible:function(){return this._collapsible},setCollapsed:function(a){(this._collapsed=!!a)?this.addClass("collapsed"):this.removeClass("collapsed")},getCollapsed:function(){return this._collapsed},setHasTitle:getHasTitle:function(){return this._hasTitle},setTitle:function(a){var b=juic.$(this.id+"_title");b&&(a instanceof juic.Component?a.render(b):b.innerHTML=escapeHTML(a));this._title=a},getTitle:function(){return this._title},setFields:function(a){for(var b=0,c=a.length;b<c;b++){var f=a[b];this.addField(f.label,f.compRef,f.options)}},getFields:function(){return this._fields},addClass:function(a){if(a){var b=juic.$(this.id);b?(SFDom.addClass(b,a),this._cssClass=b.className):SFDom.hasClass({className:this._cssClass},
a)||(this._cssClass+=" "+a)}},removeClass:function(a){this._cssClass=this._cssClass&&this._cssClass.replace(a,"");var b=juic.$(this.id);b&&(SFDom.removeClass(b,a),this._cssClass=b.className)},renderHtml:function(a){a.push("\x3cdiv id\x3d'",this.id,"' class\x3d'",this._cssClass,"'\x3e");this._renderInnerHtml(a);a.push("\x3c/div\x3e");a.addAfterRenderListener(this,"_handleAfterRender")},setLabelVisible:function(a,b,e){var c=this._fields[a];c&&(b&&(e||c.compRef.oLabel)?(c.label=e||c.compRef.oLabel,e&&
delete c.compRef.oLabel):b||(c.compRef.oLabel=c.label,c.label=null),this._fields.splice(a,1,c));if(a=juic.$(this.id+"_field_"+a+"_lbl"))e=juic.createRenderContext(),e.push(Util.escapeHTML(c.label)),a.innerHTML=e.join(""),a.style.display=b?"":"none"},addField:function(a,b,e){e=e||{};this._fields.splice("undefined"===typeof e.position?this._fields.length:e.position,0,{label:a,compRef:b,options:e});this.repaint()},addFieldAtPosition:function(a,b,e,f){this._fields.splice(f,0,{label:a,compRef:b,options:e||
{}});this.repaint()},getFieldIndex:function(a){if(a instanceof Number||"number"===typeof a)return a.valueOf?a.valueOf():a;if(a instanceof juic.Component)for(var b=0,c=this._fields.length;b<c;++b)if(this._areSameComponents(this._fields[b].compRef,a))return b;return-1},removeField:function(a){a=this.getFieldIndex(a);-1<a&&(this._fields.splice(a,1),this.repaint())},setFieldVisible:function(a,b,e){e=e||{};a=this.getFieldIndex(a);this._fields[a].compRef.hidden=!b;if(!e||!e.doNotModifyDom){var c=juic.$(this.id+
"_field_"+a);c&&(c.style.display=b?"":"none")}e.label&&this.setLabelVisible(a,b,e.label)},isFieldVisible:function(a,b){var c=juic.$(this.id+"_field_"+a);return c?"none"!=c.style.display:!this._fields[a].compRef.hidden},moveField:function(a,b){this._fields.splice(b,0,this._fields.splice(a,1)[0]);this.repaint()},repaint:function(){var a=juic.$(this.id);if(a){var b=juic.createRenderContext();this.getDnDEnabled()&&b.addAfterRenderListener(this,"_handleAfterRender");this._renderInnerHtml(b);b.renderInto(a);
this._moreLayout||(this._moreVisible?this.showMore():this.showLess())}},_handleAfterRender:function(a){this.getDnDEnabled()&&(a=this._getDndElementIds(),this._removeDropTargetsById(this.id),this._addDropTargets(a));this.showLess()},_getDndElementIds:function(){var a=[];(this.getFields()||[]).forEach(function(b,c){var d=this.id+"_field_"+c,e=juic.$(d);e&&"true"===e.getAttribute("data-dnd")&&a.push(d)},this);return a},_addDropTargets:function(a){Array.isArray(a)&&a.forEach(function(a){SFDragDropMgr.addDropTarget(a)})},
_removeDropTargetsById:function(a){var b=[];SFDragDropMgr.getAllDropTargets().forEach(;b.forEach(function(a){SFDragDropMgr.removeDropTarget(a)})},cleanupDnD:function(){this._removeDropTargetsById(this.id);delete a.elementId;delete a.currentTarget},cleanup:function(){this.getDnDEnabled()&&this.cleanupDnD();delete this._fields;delete this._cssClass;this.unregister()},reset:function(){this._fields=[];var a=juic.$(this.id);a&&(a.innerHTML="")},getDragDropAttributes:function(a){var b;
if(!this.getDnDEnabled())return"";b=[];b.push(' data-dnd\x3d"true"');b.push(' onmousedown\x3d"');b.push(this.fireCode("handleDragStart",a));b.push('"');b.push(' onselectstart\x3d"return false;"');b.push(' onselectable\x3d"on"');b.push(' onmouseover\x3d"');b.push(this.fireCode("_handleMouseOver",a));b.push('"');b.push(' onmouseout\x3d"');b.push(this.fireCode("_handleMouseOut",a));b.push('"');return b.join("")},getEl:getDragEl:function(){return this.getEl()},showDragEl:function(){var a=
this.getDragEl();SFDom.addClass(a,ECTBaseLayout.DRAGGING_CLASS);a.style.display=""},_animateDragEl:function(){},hideDragEl:function(){var a=this.getEl();SFDom.removeClass(a,ECTBaseLayout.DRAGGING_CLASS)},_getContainerNodeOfDnDElement:function(a){var b;if(a){a=a.parentNode;for(b=document.body;a&&"BODY"!==a.tagName;){if("static"!==SFDom.getStyle(a,"position")){b=a;break}a=a.parentNode}return b}},_getOriginPosition:function(a){var b=this._getContainerNodeOfDnDElement(a),b=SFDom.getRegion(b);a=SFDom.getRegion(a);
var c=a.top-b.top,b=a.left-b.left;return new SFRegion(c,b+a.width,c+a.height,b)},_getDnDDropTargetId:function(a){var b,c,f=null;if(Array.isArray(a)){for(var g=0,k=a.length;g<k;g++)if(c=a[g],b=this._getContainerNodeOfDnDElement(juic.$(c)),b!==document.body){f=c;break}return f}},_getTargetIdsFromDnDEvent:function(a){var b=[],c=a.id;a=a.dropTargets;c&&b.push(c);Array.isArray(a)&&a.forEach(function(a){b.push(a.id)});return b},_storeStyleOfDragElementStyle:function(b){var c=this.getDragEl();a.elementStyle=
{};Array.isArray(b)&&b.forEach(},_restoreStyleOfDragElment:function(){var b,d=a.elementStyle;if(d){b=this.getDragEl();for(var e in d)d.hasOwnProperty(e)&&(b.style[e]=d[e])}},_updateDragEl:function(){var a=this.getEl(),b=this.getDragEl(),a=this._getOriginPosition(a);this._originPosition={x:a.left,y:a.top};this._storeStyleOfDragElementStyle(["top","left","width","height"]);b.style.top=this._originPosition.y+"px";b.style.left=this._originPosition.x+"px";
b.style.width=a.width+"px";b.style.height=a.height+"px";this.showDragEl()},beforeDragEvent:afterDragEvent:handleDragStart:function(b,d){var c=juic.$(b);d=d||window.event;var f=d.target||d.srcElement;a.elementId=b;SFDom.addClass(c,ECTBaseLayout.DRAG_START_CLASS);this._super(d);
f.focus()},_handleDragOver:function(b){b=this._getTargetIdsFromDnDEvent(b);b=this._getDnDDropTargetId(b);a.currentTarget&&SFDom.removeClass(a.currentTarget,ECTBaseLayout.DRAG_IN_CLASS);b&&b!==a.elementId&&(b=juic.$(b),SFDom.addClass(b,"dragIn"),a.currentTarget=b)},_handleDragOut:function(b){b=this._getTargetIdsFromDnDEvent(b);(b=this._getDnDDropTargetId(b))&&b!==a.elementId&&(a.currentTarget&&b===a.currentTarget.id&&(a.currentTarget=null),b=juic.$(b),SFDom.removeClass(b,"dragIn"))},_handleDragEnd:function(b){var c=
this.getEl();c&&(SFDom.removeClass(c,ECTBaseLayout.DRAG_START_CLASS),SFDom.removeClass(c,ECTBaseLayout.DRAGGING_CLASS),this._restoreStyleOfDragElment(),b=/([0-9]+:)_field_([0-9]+)/ig,a.currentTarget&&(SFDom.removeClass(a.currentTarget,ECTBaseLayout.DRAG_IN_CLASS),c=c.id,"_"===juic._idCharacter?(b=/([0-9]+_)_field_([0-9]+)/ig,c=c.replace(b,"$1:$2").split(":"),b=a.currentTarget.id.replace(b,"$1:$2").split(":")):(c=c.replace(b,"$1_$2").split("_"),b=a.currentTarget.id.replace(b,"$1_$2").split("_")),this.dispatch(ECTBaseLayout.EVENT_DND,
{actionCommand:ECTBaseLayout.ACTION_DND_DROP,from:{layoutId:c[0],fieldIdx:Number(c[1])},to:{layoutId:b[0],fieldIdx:Number(b[1])}})))},_handleMouseOver:function(a,b){var c=juic.$(a);SFDom.addClass(c,"mouseIn");b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault()},_handleMouseOut:function(a,b){var c=juic.$(a);SFDom.removeClass(c,"mouseIn");b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault()},_toggleCollapsed:function(){this._collapsible&&(this.setCollapsed(!this._collapsed),
this._updateToggleCommand(),this.dispatch(ECTBaseLayout.EVENT_LAYOUT_ACTION,{actionCommand:ECTBaseLayout.ACTION_STATE_CHANGE,state:{collapsed:this.getCollapsed()}}))},_updateToggleCommand:function(){var a=this._getIconTitle();juic.$(this._getCollapsibleDomId()).setAttribute("title",a);var b=juic.$(this.id+"_toggleState");b&&(b.innerHTML=a)},hideFieldsContainer:function(a){var b=juic.$(this._getCollapsibleSectionReferenceId());b&&(b.style.display=a?"none":"")},_renderInnerHtml:function(a){this._renderTitle(a);
a.push("\x3cdiv class\x3d'layoutFieldsContainer' id\x3d'",this._getCollapsibleSectionReferenceId(),"'\x3e");this._renderFields(a);a.push("\x3c/div\x3e")},_renderTitle:function(a){if(this._hasTitle){var b=this._getIconTitle(),c="";this._fontConfig&&(c=" "+ECTFontConfig.getClassNames(this._fontConfig));a.push("\x3cdiv id\x3d'",this.id,"_header' class\x3d'form_header",c,"'\x3e");this._collapsible&&(a.push("\x3ca aria-describedby\x3d'",this._getSectionTitleReferenceId(),"' aria-controls\x3d'",this._getCollapsibleSectionReferenceId(),
"' role\x3d'button' title\x3d'",b,"' href\x3d'javascript:void(0)' onclick\x3d'",this.fireCode("_toggleCollapsed"),"return false' id\x3d'",this._getCollapsibleDomId(),"' class\x3d'collapsible_handle'\x3e"),a.push("\x3cspan id\x3d'",this.id,"_toggleState' class\x3d'hiddenAriaContent' role\x3d'status' aria-live\x3d'polite'\x3e",b,"\x3c/span\x3e"),a.push("\x26nbsp;\x3c/a\x3e"));a.push("\x3cspan id\x3d'",this._getSectionTitleReferenceId(),"' class\x3d'form_title'\x3e");this._title instanceof juic.Component?
this._title.renderHtml(a):a.push(escapeHTML(this._title));a.push("\x3c/span\x3e");a.push("\x3c/div\x3e")}},_getCollapsibleDomId:function(){return this.id+"_collapsible"},_getCollapsibleSectionReferenceId:function(){return this.id+"_collapsibleSection"},_getSectionTitleReferenceId:function(){return this.id+"_title"},_getIconTitle:function(){return this._collapsed?MSGS.get("COMMON_Expand_Group",this.getTitle()):MSGS.get("COMMON_Collapse_Group",this.getTitle())},setToggleIconAriaControls:function(a){var b=
juic.$(this._getCollapsibleDomId());b&&b.setAttribute("aria-controls",a)},dispatch:function(a,b){(this._dndEnabled||a!==ECTBaseLayout.EVENT_DND)&&this._super(a,b)},hasMore:showMore:function(){this._moreVisible=!0;var a=juic.$(this.id+"_more_less_link");a&&(a.innerHTML=MSGS.ECT_LAYOUT_SHOW_LESS);this._showMoreFields(!0)},showLess:function(){this._moreVisible=!1;var a=juic.$(this.id+"_more_less_link");a&&(a.innerHTML=MSGS.ECT_LAYOUT_SHOW_MORE);
this._showMoreFields(!1)},toggleMore:getShowMoreLinkHTML:function(){return['\x3ca href\x3d"javascript:void(0)" onclick\x3d"',this.fireCode("toggleMore"),'return false;" id\x3d"',this.id,'_more_less_link" class\x3d"more_less_link" role\x3d"status" aria-live\x3d"polite"\x3e',MSGS.ECT_LAYOUT_SHOW_MORE,"\x3c/a\x3e"].join("")},_showMoreFields:function(a){for(var b=this._maxFieldsToShow,c=this._fields.length;b<c;++b){var f=juic.$(this.id+"_field_"+
b);f&&(f.style.display=a?"":"none")}},getExtraClassForField:function(a){return a>=this._maxFieldsToShow?"more_field":""},clearFields:function(){this._fields=[]},_areSameComponents:function(a,b){return a.id===b.id||a.meta&&b.meta&&(a.meta.id&&a.meta.id===b.meta.id||a.meta.resolver&&a.meta.resolver===b.meta.resolver||b.meta.resolver&&a.meta.id===b.meta.resolver||b.meta.id&&a.meta.resolver===b.meta.id)}})})();function ECTFlowLayout(a){this._super();this.init(a)}
juic.extend(ECTFlowLayout,ECTBaseLayout,{_cssClass:ECTBaseLayout.CSS_CLASS+ECTConstants.FLOW_LAYOUT,_renderFields:function(a){for(var b=0,c=this._fields.length;b<c;++b){var d=this._fields[b],e="flow_field "+this.getExtraClassForField(b),f=d.compRef.meta?d.compRef.meta.hideFieldInReadMode:!1,g=this.id+"_field_"+b;this.getDnDEnabled()&&(e+=" dndable");a.push("\x3cdiv ",this.getDragDropAttributes(g)," class\x3d'",e,f?" hideRow":"","' ",d.compRef.hidden?"style\x3d'display:none;'":""," id\x3d'",g,"'\x3e");
d.label&&(a.push("\x3cdiv id\x3d'",g,"_lbl' class\x3d'field_label'\x3e"),d.label.renderHtml?d.label.renderHtml(a):a.push(Util.escapeHTML(d.label)),a.push("\x3c/div\x3e"));a.push("\x3cdiv class\x3d'field_value'\x3e");a.push(d.compRef);a.push("\x3c/div\x3e\x3cdiv class\x3d'clear'\x3e\x3c/div\x3e");d.options&&d.options.description&&a.push("\x3cspan class\x3d'field_description'\x3e",Util.escapeHTML(d.options.description),"\x3c/span\x3e");a.push("\x3c/div\x3e")}this.hasMore()&&a.push('\x3cdiv class\x3d"flow_field"\x3e',
this.getShowMoreLinkHTML(),"\x3c/div\x3e");a.push("\x3cdiv class\x3d'clear'\x3e\x3c/div\x3e")}});function ECTFormLayout(a){this._super();this.init(a)}ECTFormLayout.ALIGNMENT_CENTER=0;ECTFormLayout.ALIGNMENT_LEFT=1;ECTFormLayout.ALIGNMENT_RIGHT=2;ECTFormLayout.ALIGNMENT_CLASSES=["center_align","left_align","right_align"];
juic.extend(ECTFormLayout,ECTBaseLayout,{_alignment:ECTFormLayout.ALIGNMENT_CENTER,_cssClass:ECTBaseLayout.CSS_CLASS+ECTConstants.FORM_LAYOUT,init:function(a){a=a||{};this._super(a);this._alignment="undefined"!==typeof a.alignment?a.alignment:this._alignment;this._tableSummary=a.summary;this._tableRole=a.tableRole},setAlignment:function(a){if("undefined"!==typeof a&&this._alignment!==a){var b=ECTFormLayout.ALIGNMENT_CLASSES[this._alignment];this._alignment="undefined"!==typeof a?a:this._alignment;
a=ECTFormLayout.ALIGNMENT_CLASSES[this._alignment];if(b!==a){var c=juic.$(this.id+"_fields");c&&SFDom.replaceClass(c,b,a)}}},getAlignment:function(){return this._alignment},_renderSingleField:function(a,b,c,d){var e="form_field "+this.getExtraClassForField(b),f=a.compRef.meta?a.compRef.meta.hideFieldInReadMode:!1,g=this.id+"_field_"+b;this.getDnDEnabled()&&(e+=" dndable");a.compRef&&a.compRef.meta&&a.compRef.meta.isHidden&&!0===a.compRef.meta.isHidden&&(a.compRef.hidden=!0);d.push("\x3ctr ",this.getDragDropAttributes(g),
" id\x3d'",g,"' class\x3d'",e,f?" hideRow":"","' ",a.compRef.hidden?"style\x3d'display:none;'":"","\x3e");d.push("\x3ctd id\x3d'",this.id,"_field_",b,"_lbl' class\x3d'","field_label",c.isMergeCell?"_value' colspan\x3d'2'":"'","\x3e");a.label&&(a.label.renderHtml?a.label.renderHtml(d):d.push(Util.escapeHTML(a.label)));c.isMergeCell||d.push("\x3c/td\x3e\x3ctd class\x3d'field_value'\x3e");a.compRef.field&&a.compRef.field.isInvalidFieldValue&&d.push('\x3cdiv class\x3d"invalidFieldValue"\x3e\x3c/div\x3e');
d.push(a.compRef);a.options&&a.options.description&&d.push("\x3cspan class\x3d'field_description'\x3e",Util.escapeHTML(a.options.description),"\x3c/span\x3e");d.push("\x3c/td\x3e ");d.push("\x3c/tr\x3e")},repaintSingleField:function(a){a=this.getFieldIndex(a);var b=this._fields[a],c=juic.$(this.id+"_field_"+a);if(c){var d=juic.createRenderContext();this._renderSingleField(b,a,{isMergeCell:b.options.mergeCells},d);c.innerHTML=d.join("")}},_renderFields:function(a){var b=ECTFormLayout.ALIGNMENT_CLASSES[this._alignment||
ECTFormLayout.ALIGNMENT_CENTER];a.push("\x3ctable");this._tableSummary&&a.push(' summary\x3d"',juic.escapeHTML(this._tableSummary),'"');a.push(' role\x3d"',this._tableRole||"none",'"');a.push(" id\x3d'",this.id,"_fields' cellspacing\x3d'0'  cellpadding\x3d'0' class\x3d'layoutTable ",b,"'\x3e");for(var b=0,c=this._fields.length;b<c;++b){var d=this._fields[b];this._renderSingleField(d,b,{isMergeCell:d.options.mergeCells},a)}this.hasMore()&&a.push('\x3ctr\x3e\x3ctd colspan\x3d"2" align\x3d"right"\x3e',
this.getShowMoreLinkHTML(),"\x3c/td\x3e\x3c/tr\x3e");a.push("\x3c/table\x3e")},insertSeparator:);function ECTGridLayout(a){this._super();this.init(a)}
juic.extend(ECTGridLayout,ECTBaseLayout,{_cssClass:ECTBaseLayout.CSS_CLASS+ECTConstants.GRID_LAYOUT,init:function(a){this._super(a);a=a||{};this._labelsMap={};(this._noHeader=!!a.noHeader)||this.addRow(a.headers||[],{header:!0});this._moreVisible=!1;this._lastIndexOfInlineField=this._maxFieldsToShow;this._hideComplexFields=!!a.hideComplexFields;this._dirtyMarkerEnabled=!!a.enableDirtyMarker;this._tableSummary=a.summary?a.summary:MSGS.ECT_TABLE_SUMMARY_DEFAULT;this._tableRole=a.tableRole;this._tableCaption=
a.caption?a.caption:"";this._ariaLabel=a.ariaLabel;this._showOnlyHiddenColumnsInDetails=a.showOnlyHiddenColumnsInDetails;this._noBorder=a.noBorder},addRow:function(a,b){if(b&&b.header)this._fields.splice(0,1,{label:null,compRef:a,options:b||{},columnOptions:[]});else{if(b&&b.autoCreated){var c=this._fields[this._fields.length-1];c&&c.options&&c.options.autoCreated&&delete c.options.autoCreated}this.addField(null,a,b)}this._hasActions=this._hasActions||!(!b||!b.actions)},addField:function(a,b,c){var d=
a||c&&c.mergeCells,e=c&&c.position||-1;if(d){var f=this._fields[0].compRef;if(f){e=-1<e?e:f.length;f.splice(e,0,a||new SFText(""));var g=this._fields[0].columnOptions||[];g[e]?this._fields[0].columnOptions.splice(e,0,c):g[e]=c}}b instanceof juic.Component?(c=c.rowIndex?c.rowIndex:d?1:this._fields.length,d=this._fields[c]||{compRef:[]},e=-1<e?e:f.length,d.compRef.splice(e,0,b),this._fields[c]=d,a&&b.meta&&(this._labelsMap[b.meta.id]=a),this.repaint()):this._super(a,b,c)},addFieldAtPosition:function(a,
b,c,d){c.position=d;this.addField(a,b,c);this._moreVisible&&c.rowIndex==this._moreLayout.rowId&&this._moreLayout.addFieldAtPosition(a,b,c,d)},addRowAtPosition:removeAllRows:function(){for(var a=this._noHeader?0:1,b=this._fields.length;a<b;a++)this._removeRow(0,!1)},removeRow:function(a){this._removeRow(a,!0)},_removeRow:function(a,b){var c=this._fields.splice(a,1)[0],d=juic.$(this.id+"_Grid");d&&d.deleteRow(a);b&&(d=this._fields.length-a,1<a&&this.repaintRows(a-
1,1),this.repaintRows(a,d,1));return c},updateRow:function(a,b,c){c=c||{};c=c.onlyMore?this._lastIndexOfInlineField:0;a=this._fields[a];for(var d=Object.assign([],a.compRef),e=this._fields[0],f=0,g=b.length;f<g;f++,c++){var k=b[f],l,m;k.compRef?(l=k.compRef,m=k.label):l=k;d.splice(c,1,l);m&&(l.meta&&m?this._labelsMap[l.meta.id]=m:e.compRef.splice(c,1,m));k.options&&(e.columnOptions[c]=k.options)}for(;c<a.length;)this.removeField(c,!1);this.repaint()},getRow:getRowActions:function(a){if(!this._hasActions)return null;if(0==this._rowId&&!this._noHeader)return"";var b=this._fields[a].options||{},c=b.rowAction;if(b.actions&&!b.autoCreated){var d=b.actions;c&&(c.removeEventListener(ECTConstants.EVENT_ACTION,this),c.cleanup&&c.cleanup());c=b.rowAction=new ECTRowActionsBlock(a,d,this._isLast(a));c.addEventListener(ECTConstants.EVENT_ACTION,this,"_handleRowAction")}return c},_isLast:function(a){var b=this._fields.length,c=this._fields[b-1];return c.options&&
c.options.autoCreated?a===b-2:a===b-1},_handleRowAction:function(a){var b;switch(a.actionCommand){case ECTConstants.EVENT_DELETE:a.removedRow=this.removeRow(a.id);sap.m.MessageToast.show(sfMessageFormat.format(MSGS.ECT_TABLE_ROW_DELETED,a.id));break;case ECTConstants.ACTION_UP:this.shiftUp(a.id);b=a.id-1;this.highLightRow(b,!0,800);this._customAnnouncement(MSGS.get("ECT_TABLE_ROW_MOVED_UP",a.id));this._setFocusOnRowMoveButtons(b);break;case ECTConstants.ACTION_DOWN:b=a.id+1,this.shiftUp(b),this.highLightRow(b,
!0,800),this._customAnnouncement(MSGS.get("ECT_TABLE_ROW_MOVED_DOWN",a.id)),this._setFocusOnRowMoveButtons(b)}this.dispatchEvent(a)},_setFocusOnRowMoveButtons:function(a){a=this.getRow(a);var b="";a&&0<a.length&&(b=a[0].field._field||a[0].field);b&&b.setFocus&&b.setFocus()},_customAnnouncement:function(a){sap.ui.core.InvisibleMessage.getInstance().announce(a,sap.ui.core.InvisibleMessageMode.Assertive)},_renderSingleField:function(a,b,c,d,e){d=d||{};var f=[],g=0,k;d.header?(f[g++]="tableHeader",d.columnLabelClsName&&
(f[g++]=d.columnLabelClsName)):a.highlightInvalidValue&&(f[g++]=a.highlightInvalidValue);this.getDnDEnabled()&&(f[g++]="dndable");k=this.id+"_field_";k=d.header?k+b:k+c+"_"+b;a.meta&&a.meta.classNames&&(f[g++]=a.meta.classNames);f=f.join(" ");b=a.meta?a.meta.hideFieldInReadMode:!1;c=d.header?"th":"td";f+=" "+this.generateFDClasses("table__cell");e.push("\x3c",c,' id\x3d"',k,'"',d.header?this.getDragDropAttributes(k):"",' class\x3d"cell gridColumn  ',f,b?" hideRow ":"",'"',a.hidden?'style\x3d"visibility:hidden;"':
"","\x3e");a.renderHtml(e);e.push("\x3c/",c,"\x3e")},repaintSingleField:function(a,b){var c=this.getFieldIndex(a,b.rowIndex),d=this._fields[b.rowIndex].compRef[c],e=juic.$(this.id+"_field_"+b.rowIndex+"_"+c);if(e){var f=juic.createRenderContext();this._renderSingleField(d,c,b.rowIndex,null,f);e.innerHTML=f.join("")}},_renderRowHtml:function(a,b,c,d,e){var f=this._fields[b].compRef,g=this._fields[b].options||{},k=g.header,l=0;this._dirtyMarkerEnabled&&a.push('\x3cth title\x3d"Modified row marker" class\x3d"',
g.dirty?"dirty ":"",k?"tableHeader":""," rowMarker gridColumn ",this.generateFDClasses("table__cell"),'"\x3e',k?"":"\x26bull;","\x3c/th\x3e");for(var m=0;m<c;m++){var n=f[m];l++;this._renderSingleField(n,m,b,g,a)}c="cell gridColumn "+(k?"tableHeader "+(g.columnLabelClsName||"")+(AccessibilityPrefs.isLowVisionEnabled()?"":" tableHeaderBG"):"");c+=" "+this.generateFDClasses("table__cell");e&&(d=this.getShowMoreLinkHTML(b,d-l),a.push('\x3ctd class\x3d"',c,'"\x3e',d,"\x3c/td\x3e"));this._hasActions&&
(d=this.getRowActions(b),this._fields[b]&&this._fields[b+1]&&this._fields[b].options&&this._fields[b].options.header&&this._fields[b+1].options&&this._fields[b+1].options.rowAction&&(d=MSGS.get("ECT_COMMON_ACTIONS")),-1!=c.indexOf("tableHeader")||-1!=c.indexOf("tableHeaderBG")?a.push('\x3cth align\x3d"center" class\x3d"',c,' actionCell"\x3e',d||"","\x3c/th\x3e"):a.push('\x3ctd align\x3d"center" class\x3d"',c,' actionCell"\x3e',d||"","\x3c/td\x3e"))},markRowDirty:function(a,b){this._dirtyMarkerEnabled&&
(this._fields[a].options.dirty=b,this.repaintRows(a,1))},_createRowFromHTML:function(a,b){var c=document.createElement("div"),d="",e;for(e in b)b.hasOwnProperty(e)&&(d+=e+'\x3d"'+b[e]+'" ');c.innerHTML="\x3ctable class\x3d"+this.generateFDClasses("table")+"\x3e\x3ctbody class\x3d"+this.generateFDClasses("table__body")+"\x3e\x3ctr "+d+"\x3e"+a+"\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e";return c.firstChild.firstChild.firstChild},_replaceDOM:function(a,b){var c=b.parentNode;c&&(c.replaceChild?c.replaceChild(a,
b):(b.setAttribute("id","to_be_replaced"),c.insertBefore(a,b),c.removeChild(b)))},repaintRows:function(a,b,c){if(b){c=c||0;for(var d=this._fields[0].compRef.length,e=this.hasMore(),f=Math.min(d,this._lastIndexOfInlineField),g=a;g<a+b;++g){var k=juic.createRenderContext(),l=juic.$(this.id+"_"+(g+c)+"_row");if(l){var m=g%2?"row odd":"alterRow even",m=m+(" "+this.generateFDClasses("table__row"));this._renderRowHtml(k,g,f,d,e);k=this._createRowFromHTML(k.join(""),{id:this.id+"_"+g+"_row","class":l.className.replace(/odd|even/g,
m)});this._replaceDOM(k,l)}}}},_renderTRRow:function(a,b,c,d,e,f,g,k){a.push('\x3ctr id\x3d"',this.id,"_",b,'_row" ');!this._readOnlyMode&&b===f&&g.autoCreated&&(k+=" last");k+=" "+this.generateFDClasses("table__row");a.push(' class \x3d "',k,this._noHeader&&g.header?" hide":"",'"\x3e');this._renderRowHtml(a,b,c,d,e);a.push("\x3c/tr\x3e")},_renderFields:function(a){var b=this._fields[0].compRef.length,c=this.hasMore(),d=Math.min(b,this._lastIndexOfInlineField),e=this._fields.length;a.push('\x3ctable aria-label\x3d"',
this.getHasTitle()?this.getTitle():this._ariaLabel,'" summary\x3d"',juic.escapeHTML(this._tableSummary),'" class\x3d"dataGridLayout ',AccessibilityPrefs.isLowVisionEnabled()?" globalTable ":" ",this.generateFDClasses("table",this._noBorder?["no-outer-border"]:[]),'" id\x3d"',this.id,'_Grid"');this._tableRole&&a.push(' role\x3d"',this._tableRole,'"');a.push("\x3e");this._tableCaption&&a.push('\x3ccaption class\x3d"',this.generateFDClasses("table__caption"),'"\x3e',this._tableCaption,"\x3c/caption\x3e");
if(e&&Util.isFioriFDEnabled()){a.push('\x3cthead class\x3d"',this.generateFDClasses("table__header",this._noBorder?["no-vertical-borders"]:[""]),'"\x3e');for(var f=0,g=e,k=g-1;f<g;++f){var l=this._fields[f].options||{};l.header&&this._renderTRRow(a,f,d,b,c,k,l,"")}a.push("\x3c/thead\x3e")}a.push('\x3ctbody class\x3d"',this.generateFDClasses("table__body",this._noBorder?["no-horizontal-borders","no-vertical-borders"]:[""]),'"\x3e');if(this._fields.length)for(f=0,g=e,k=g-1;f<g;++f)e=f%2?"row odd":"alterRow even",
l=this._fields[f].options||{},l.header&&Util.isFioriFDEnabled()||this._renderTRRow(a,f,d,b,c,k,l,e);a.push("\x3c/tbody\x3e\x3c/table\x3e")},showColumnHeaderRow:function(a){this._noHeader=!a;if((this._fields[0].options||{}).header){var b=juic.$(this.id+"_0_row");if(b)SFDom[a?"removeClass":"addClass"](b,"hide")}},showOnlyHiddenColumnsInDetails:function(a){this._showOnlyHiddenColumnsInDetails=a},_getTooltipHelper:getShowMoreLinkHTML:function(a,b){if(0==a)return MSGS.get("ECT_LAYOUT_GRID_N_MORE",
b);var c="";!document.getElementById("ECT_BUSINESS_CONFIGURATION_UI")||this._title!==MSGS.BUSINESSCONFIG_GO_ECElementConfig_ecField&&this._title!==MSGS.BUSINESSCONFIG_GO_ECLocalElementConfig_ecField||(c=this.getTooltip(a,this._title===MSGS.BUSINESSCONFIG_GO_ECElementConfig_ecField?ECTConstants.MAX_TOOLTIP_FIELDS_HRIS:ECTConstants.MAX_TOOLTIP_FIELDS_CSF_HRIS));var d=this.id+"_"+a+"_extrainfoa11yText";return['\x3cspan class\x3d"hiddenAriaContent" id\x3d"',d,'" aria-hidden\x3d"true"\x3e',MSGS.get("ECT_LAYOUT_ACCESSIBILTY_GRID_DETAILS",
a),'\x3c/span\x3e\x3ca role\x3d"button" class\x3d"writeComp ',this.generateFDClasses("link"),'" href\x3d"javascript:void(0)" onclick\x3d"',this.fireCode("showMore",a,!0),';return false;" onkeyup\x3d"',this.fireCode("_keyUp"),'" id\x3d"',this.id,'_more_less_link" class\x3d"more_less_link" aria-labelledBy\x3d"',d,'" data-row-id\x3d"',a,'"\x3e',MSGS.ECT_LAYOUT_GRID_DETAILS,'\x3c/a\x3e\x3ca role\x3d"button" class\x3d"readComp ',this.generateFDClasses("link"),'" href\x3d"javascript:void(0)" onclick\x3d"',
this.fireCode("showMore",a,!1),';return false;" onkeyup\x3d"',this.fireCode("_keyUp"),'" id\x3d"',this.id,'_more_less_link" class\x3d"more_less_link" aria-labelledBy\x3d"',d,'" data-row-id\x3d"',a,'"\x3e',MSGS.ECT_LAYOUT_GRID_DETAILS,"\x3c/a\x3e",c].join("")},_keyUp:getTooltipLabel:function(a,b,c,d,e){0<a.length&&(a.push("\x3cbr\x3e"),b.push("\x3cb\x3e"+d+"\x3c/b\x3e\x3cbr\x3e",a.join("  ")),-1==c.indexOf(e.substring(0,2))&&c.push(e.substring(0,2)))},getFieldCriteriaOrSyncMappingOrTriggerRuleDetails:function(a,
b){for(var c=[],d=0,e=1,f=1;f<b.field._rows.length;f++){for(var g=0;g<b.field._rows[f].length;g++)if(b.field._rows[f][g]._value){var k=b.field._rows[f][g].field;k instanceof ECTInputBox?(k=this._getTooltipHelper(b.field._rows[f][g]._value.defaultValue),c.push("\x3cb\x3e"+a[g].text+": \x3c/b\x3e"+k)):k instanceof ECTFieldWithCustomContext?b.field._rows[f][g]._value.primaryFieldData.defaultValue&&(k=this._getTooltipHelper(b.field._rows[f][g]._value.primaryFieldData.defaultValue.primaryDisplayText),
c.push("\x3cb\x3e"+a[g].text+": \x3c/b\x3e"+k)):k instanceof ectComboDropDown?(k=this._getTooltipHelper(b.field._rows[f][g]._value.defaultValue),c.push("\x3cb\x3e"+a[g].text+": \x3c/b\x3e"+k)):k instanceof MDFPicklistAutoComplete&&(k=this._getTooltipHelper(b.field._rows[f][g]._value.defaultValue.toString()),c.push("\x3cb\x3e"+a[g].text+": \x3c/b\x3e"+k))}c.length!==d&&(c.splice(d,0,e+"."),e+=1,c.push("\x3cbr\x3e"),d=c.length)}return c},getTooltip:function(a,b){for(var c=this._fields[a],d=[],e=[],
f=c.compRef.length-b;f<c.compRef.length;f++){var g=c.compRef[f],k=g.field.meta.label;switch(g.field._elementId){case ECTConstants.FIELD_CRITERIA_ID:g=this.getFieldCriteriaOrSyncMappingOrTriggerRuleDetails(g.field._columnLabel,g);this.getTooltipLabel(g,e,d,k,MSGS.BUSINESSCONFIG_TooltipLabel_FieldCriteria);break;case ECTConstants.USERINFO_ELEMENT_SYNC_MAP_ID:case ECTConstants.USERINFO_RECORD_SYNC_MAP_ID:case ECTConstants.FIELD_SYNC_MAP_ID:g=this.getFieldCriteriaOrSyncMappingOrTriggerRuleDetails(g.field._columnLabel,
g);this.getTooltipLabel(g,e,d,k,MSGS.BUSINESSCONFIG_TooltipLabel_SyncMapping);break;case ECTConstants.CSF_FIELD_TRIGGER_RULE_ID:case ECTConstants.HRIS_FIELD_TRIGGER_RULE_ID:g=this.getFieldCriteriaOrSyncMappingOrTriggerRuleDetails(g.field._columnLabel,g),this.getTooltipLabel(g,e,d,k,MSGS.BUSINESSCONFIG_TooltipLabel_TriggerRules)}}return 0<e.length?['\x3cbr\x3e\x3cspan class\x3d"detailsTooltip" id\x3d"',this.id,'_details_tooltip"\x3e',d.join("|"),'\x3cspan class\x3d"detailsTooltiptext" id\x3d"',this.id,
'_details_tooltip_text"\x3e',e.join(" "),"\x3c/span\x3e\x3c/span\x3e"].join(""):""},highLightRow:function(a,b,c){var d=juic.$(this.id+"_"+a+"_row");if(d)SFDom[b?"addClass":"removeClass"](d,"highlighted");if(b&&c){var e=this;setTimeout(c)}},shiftUp:function(a){assert(0<a,"Cannot shift first row up");var b=this._fields[a];this._fields[a]=this._fields[a-1];this._fields[a-1]=b;this.repaintRows(a-1,2)},moveField:function(a,b){for(var c=0,d=this._fields.length;c<d;c++){var e=
this._fields[c];e.compRef.splice(b,0,e.compRef.splice(a,1)[0]);e.columnOptions&&e.columnOptions.splice(b,0,e.columnOptions.splice(a,1)[0])}this.repaint()},_findLabelForField:function(a){if(!a||!a.meta)return null;this._labelsMap=this._labelsMap||{};var b=this._labelsMap[a.meta.id];if(b)return b;for(var c=this.getRow(0),d=0,e=c.length;d<e;d++)if(b=c[d],b.text==a.meta.label)return this._labelsMap[a.meta.id]=b;return null},getFields:function(a,b,c){c=c||{};var d=[];a=this._fields["undefined"===typeof a?
1:a];if(!a)return d;var e=this.getRow(0),f=this._fields[0],g=a.options;if(!g||b||!g.autoCreated)for(b=c.onlyMore?this._lastIndexOfInlineField:0,c=a.compRef.length;b<c;b++){var g=a.compRef[b],k=f.columnOptions&&f.columnOptions[b]||{};k.mergeCells=k.mergeCells||g.meta&&ECTConstants.COMPLEX_FIELDS[g.meta.type];g={label:this._findLabelForField(g)||e[b],compRef:g,options:k};d.push(g)}return d},getRowData:getFieldIndex:function(a,b){if(a instanceof Number||"number"===
typeof a)return a.valueOf?a.valueOf():a;if(a instanceof juic.Component)for(var c=this.getRow(b),d=0;d<c.length;++d)if(this._areSameComponents(c[d],a))return d;return-1},removeField:function(a,b){var c=this.getFieldIndex(a,this._noHeader?0:1);if(!(0>c)){this._moreVisible&&this._moreLayout.removeField(c);for(var d=1,e=this._fields.length;d<e;d++)this.getRow(d).splice(c,1);d=this._fields[0];ECTUtil.isEmptyArray(d.columnOptions)||d.columnOptions.splice(c,1);ECTUtil.isEmptyArray(d.label)||d.label.splice(c,
1);ECTUtil.isEmptyArray(d.compRef)||d.compRef.splice(c,1);!b&&this.repaint()}},setLabelVisible:function(a,b,c){this._moreVisible&&this._moreLayout.setLabelVisible(a,b,c);var d=this._fields[0],e=d.compRef[a];d.oLabel=d.oLabel||{};var f=d.oLabel[a];b&&(c||f)?(e=c||f,c&&delete d.oLabel[a]):b||(d.oLabel[a]=e,e=null);d.compRef.splice(a,1,e);if(a=juic.$(this.id+"_field_"+a))b=juic.createRenderContext(),b.push(e),a.innerHTML=b.join("")},hasMore:function(){this._lastIndexOfInlineField=this._maxFieldsToShow;
var a=this.getRow(0),b=a.length>this._maxFieldsToShow;if(this._hideComplexFields)for(var a=Math.min(a.length,this._maxFieldsToShow),c=0;c<a;c++)if(!this._canBeRenderedInline(c)){this._lastIndexOfInlineField=c;b=!0;break}return b},_canBeRenderedInline:function(a){if(this._fields[0]&&this._fields[0].columnOptions){var b=this._fields[0].columnOptions[a]||{};if(b.mergeCells)return!1;if(this._fields[1]&&(a=this._fields[1].compRef[a],a instanceof juic.Component&&a.meta&&ECTConstants.COMPLEX_FIELDS[a.meta.type]))return b.mergeCells=
!0,!1}return!0},_handleMoreDnD:function(a){switch(a.actionCommand){case ECTBaseLayout.ACTION_DND_DROP:a.from.layoutId===a.to.layoutId?(this._moreLayout.moveField(a.from.fieldIdx,a.to.fieldIdx),this.moveField(a.from.fieldIdx,a.to.fieldIdx)):this.dispatchEvent(a);break;default:this.dispatchEvent(a)}},_temporaryDisableRow:function(a){if(a=juic.$(this.id+"_"+a+"_row")){a=SFDom.searchDOM(a,"input,a,button");for(var b=0,c=a.length;b<c;b++)a[b].id&&(a[b].id+="_temp")}},showMore:function(a,b){this._moreVisible=
!0;this._moreWritable=b;this._context||(this._moreLayout=new ECTFormLayout({}),this.getDnDEnabled()&&(this._moreLayout.setDnDEnabled(!0),this._moreLayout.addEventListener(ECTBaseLayout.EVENT_DND,this,"_handleMoreDnD")),this._context=new ECTRoundedCornerBox(MSGS.COMMON_Details,this._moreLayout,!1),this._doneBtn=new SFCommandButton(MSGS.COMMON_Done,!0,!0),this._doneBtn.setActionCommand(ECTConstants.COMMAND_DONE),this._doneBtn.addEventListener(ECTConstants.EVENT_ACTION,this,"showLess"),this._context.setFooterButtons([this._doneBtn]),
this._context.setFooterButtonsVisibility(!0));var c=this.getFields(a,!0,{onlyMore:this._showOnlyHiddenColumnsInDetails});ECTUtil.isEmptyArray(c)||(this._moreLayout.rowId=a,this._moreLayout.clearFields(),this._moreLayout.setFields(c));this._temporaryDisableRow(a);this._context.setWritable(b);SFOverlayMgr.addEventListener("overlayRendered",this,"_resizeMore");SFOverlayMgr.showOverlay(this._context,!0);this._setInitialFocus()},_setInitialFocus:function(){var a=this._moreLayout.getFields();ECTUtil.isEmptyArray(a)||
(this._moreWritable?(a=this._moreLayout._fields[0],a.compRef.setFocus&&a.compRef.setFocus(!0),a&&a.compRef&&a.compRef.field&&a.compRef.field.getPrimaryField&&a.compRef.field.getPrimaryField().setFocus&&a.compRef.field.getPrimaryField().setFocus(!0)):(a=jQuery(".contextView .ectFCBody"),this._doneBtn&&a&&0<a.length&&!this._moreWritable&&(a[0].scrollHeight>a[0].clientHeight?(a[0].setAttribute("tabindex","0"),a[0].focus()):this._doneBtn.setFocus(!0))))},_resizeMore:function(){var a=juic.$(this._context.id),
b=juic.$(this._moreLayout.id);b&&a&&(SFDom.addClass(a,"contextView"),this._moreWritable?SFDom.replaceClass(b,"readMode","writeMode"):SFDom.replaceClass(b,"writeMode","readMode"),ECTUtil.resizePopup({containerId:this._context.id,componentId:this._moreLayout.id}));if(this._doneBtn&&this._doneBtn.getButtonId&&(a=juic.$(this._doneBtn.getButtonId()))){var c=this;a.addEventListener("keydown",}},showLess:function(){if(this._moreVisible&&
this._context){this._moreVisible=!1;SFOverlayMgr.removeEventListener("overlayRendered",this);SFOverlayMgr.removeOverlay(this._context.id);var a=this._moreLayout.getFields(),b=this._moreLayout.rowId;this.updateRow(b,a,{onlyMore:this._showOnlyHiddenColumnsInDetails});this.highLightRow(b,!0,800);a=document.querySelectorAll("[data-row-id\x3d'"+b+"']");for(b=0;b<a.length;b++){var c=a[b];c&&c.id===this.id+"_more_less_link"&&c.focus()}}},reset:
cleanup:function(){this._moreWritable&&this.showLess();this._context&&this._context.cleanup();this._moreLayout&&(this._moreLayout.removeEventListener(ECTBaseLayout.EVENT_DND,this),this._moreLayout.cleanup());this._super()},repaint:function(){this._super();var a=this.getDetailsInfo();a.visible&&a.index&&(this.showLess(),this.showMore(a.index,a.writable))},getDetailsInfo:function(){return{visible:this._moreVisible,writable:this._moreWritable,index:this._moreLayout&&this._moreLayout.rowId}},setFieldVisible:function(a,
b,c){c=c||{};var d=this.getFieldIndex(a,c.rowIndex);this._fields[c.rowIndex].compRef[d].hidden=!b;if(!c||!c.doNotModifyDom){var e=juic.$(this.id+"_field_"+c.rowIndex||"1_"+d);e&&(e.style.visibility=b?"visible":"hidden")}c.label&&this.setLabelVisible(d,b,c.label);this._moreVisible&&this._moreLayout.rowId==c.rowIndex&&(this._moreLayout.setFieldVisible(a,b,c),c.label&&this._moreLayout.setLabelVisible(d,b,c.label))}});function ECTRowActionsBlock(a,b,c,d,e){this.register();this.init(a,b,c,d,e)}
juic.extend(ECTRowActionsBlock,juic.Component,{init:_createAction:function(a){var b,c,d="";if(a instanceof juic.Component)return b=juic.createRenderContext(),a.renderHtml(b),d=b.join(""),['\x3cli class\x3d"action_item"\x3e',d,"\x3c/li\x3e"].join("");b=a.icon;c=a.title;var e="";this.isFioriFDEnabled()?(e+=this.generateFDClasses("button",["transparent"]),d="\x3ci class\x3d'"+Util.generateIconClasses(this.getFDIcon(b))+
"'\x3e\x3c/i\x3e"):e+="ectDataGridActionBtn "+b;return['\x3cli class\x3d"action_item"\x3e\x3cbutton title\x3d"',c,'" class\x3d"',e,'" id\x3d"',this.id,"_action_",b,'" href\x3d"javascript:void(0);" onclick\x3d"',this.fireCode("_actionClick",a),'; return false;"\x3e',d,"\x3c/button\x3e\x3c/li\x3e"].join("")},getFDIcon:function(a){return{ectAddIcon:"add",ectDeleteIcon:"delete",ectMoveDownIcon:"arrow-bottom",ectMoveUpIcon:"arrow-top"}[a]||""},getEmptyAction:function(a,b){var c=b;this.isFioriFDEnabled()&&
(c='\x3cli class\x3d"action_item emptyActionItem"\x3e\x3cbutton class\x3d"'+this.generateFDClasses("button")+'"\x3e\x3ci class\x3d"'+Util.generateIconClasses(this.getFDIcon(a))+'"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/li\x3e');return c},_actionClick:function(a){a.id=this._rowIdx;this.dispatch(ECTConstants.EVENT_ACTION,a)},_renderInnerHtml:function(a){this._actions.remove&&a.push(this._createAction({icon:"ectDeleteIcon",title:this._title?MSGS.get("ECT_GROUP_HEADER_GRID_ACTION_DELETE",this._title,this._rowIdx):
MSGS.get("ECT_GRID_ACTION_DELETE",this._rowIdx),actionCommand:ECTConstants.EVENT_DELETE}));this._actions.rearrange?(a.push(this._last?this.getEmptyAction("ectMoveDownIcon",'\x3cli class\x3d"action_item" aria-hidden\x3d"true"\x3e\x26nbsp;\x3c/li\x3e'):this._createAction({icon:"ectMoveDownIcon",title:MSGS.get("ECT_GRID_ACTION_MOVE_DOWN",this._rowIdx),actionCommand:ECTConstants.ACTION_DOWN})),a.push(1!=this._rowIdx?this._createAction({icon:"ectMoveUpIcon",title:MSGS.get("ECT_GRID_ACTION_MOVE_UP",this._rowIdx),
actionCommand:ECTConstants.ACTION_UP}):this.getEmptyAction("ectMoveUpIcon",'\x3cli class\x3d"action_item" aria-hidden\x3d"true"\x3e\x26nbsp;\x3c/li\x3e'))):a.push('\x3cli class\x3d"action_item" aria-hidden\x3d"true"\x3e\x26nbsp;\x3c/li\x3e','\x3cli class\x3d"action_item" aria-hidden\x3d"true"\x3e\x26nbsp;\x3c/li\x3e');for(var b=this._actions.custom||[],c=0,d=b.length;c<d;c++)a.push(this._createAction(b[c]))},update:function(a){a.rowIdx&&(this._rowIdx=a.rowIdx);"undefined"!==typeof a.isLast&&(this._last=
a.isLast);a.className&&(this._className=a.className);a.actions&&(this._actions=a.actions);if(a=juic.$(this.id)){a.className=this._className;var b=juic.createRenderContext();this._renderInnerHtml(b);a.innerHTML=b.join("")}},renderHtml:function(a){a.push('\x3cul id\x3d"',this.id,'" class\x3d"',this._className,'"\x3e');this._renderInnerHtml(a);a.push("\x3c/ul\x3e")}});function ECTGlobalAssignmentDropDown(a,b,c,d){this.register();this.init(a,b,c,d)}
ECTGlobalAssignmentDropDown.prototype=function(){return set(new Component,{labelsMenuGroup:{EMPFILE_HRIS_GA_LABEL_AS:MSGS.EMPFILE_HRIS_GA_LABEL_AS,EMPFILE_HRIS_GA_GROUP_FUTURE:MSGS.EMPFILE_HRIS_GA_GROUP_FUTURE,EMPFILE_HRIS_GA_GROUP_PAST:MSGS.EMPFILE_HRIS_GA_GROUP_PAST,EMPFILE_HRIS_GA_GROUP_CURRENT:MSGS.EMPFILE_HRIS_GA_GROUP_CURRENT},init:function(a,b,c,d){this.renderDropDown=!1;this.intialLabel=a;this._userSysId=c;this._isProfile=b;this._initialLabelIsHome=!1;this.sfList=new SFList("CheckBoxList");
this.wrapper=new GAOptionsWrapper(this.sfList);this._isProfile?this.wrapper.setType("moduleNavigation"):this.wrapper.setType("globalAssignmentNavigation");this._popup=new SFContextPopup(this.wrapper,{originId:"label_"+this.id,offset:{vertical:1,horizontal:-9},setFocusOnSelf:!0,loopFocus:!0,refocusRef:"label_"+this.id,visibleOverflow:!0});this._popup.addEventListener("clickedOutsidePopup",this,"_lostFocus");d?this.setNavList(d):this.setLoading();this._triangleIcon=new SFTriangle({direction:"bottom",
inherit:!0})},renderHtml:function(a){this.renderDropDown&&(this._isProfile?(a.push('\x3cspan class\x3d"globalAssignmentNavPrefixProfile globalFloatLeft"\x3e',MSGS.EMPFILE_HRIS_GA_LABEL_AS,": ","\x3c/span\x3e"),a.push('\x3ca href\x3d"Javascript:void(0);" id\x3d"label_',this.id,'" class\x3d"label globalPlacematNavigationText globalAssignmentNavigationProfile" onclick\x3d"',this.fireCode("_showMenu"),' ; return false;" \x3e'),a.push(escapeHTML(this.intialLabel)),this._initialLabelIsHome&&a.push('\x3cspan class\x3d"GAHomeAssignmentLabelLinkProfile"\x3e \x3c/span\x3e')):
(a.push('\x3cspan class\x3d"globalAssignmentNavPrefix globalFloatLeft"\x3e',MSGS.EMPFILE_HRIS_GA_LABEL_AS,": ","\x3c/span\x3e"),a.push('\x3ca href\x3d"Javascript:void(0);" id\x3d"label_',this.id,'" class\x3d"label globalPlacematNavigationText globalAssignmentNavigation" onclick\x3d"',this.fireCode("_showMenu"),' ; return false;" \x3e'),a.push(escapeHTML(this.intialLabel)),this._initialLabelIsHome&&a.push('\x3cspan class\x3d"GAHomeAssignmentLabelLink"\x3e \x3c/span\x3e')),a.push(this._triangleIcon),
a.push("\x3c/a\x3e"))},_isPopupOpen:function(){return this._popup&&this._popup.isShown()},_showMenu:function(){this._isPopupOpen()||(this._popup.show(),SFDOMEvent.addListener(window.document,"keydown",this._onWindowKeyDown,this))},setNavList:function(a){if(a){this.navItems=a;this.navItemList=[];this.groups=[];this.cleanupNavItemList();this.sfList=new SFList("CheckBoxList");for(var b=a=0;b<this.navItems.length;b++){var c=new SFList("CheckBoxList"),d=[],e=this.navItems[b],f=e.label;this.labelsMenuGroup[e.label]&&
(f=MSGS[e.label]);f=new GlobalGroupHeader(f);this.navItemList.push(f);d.push(f);for(f=0;f<e.items.length;f++){var g=e.items[f],k={clickParam:g.id,onMouseOut:!0,onMouseOver:!0};g.homeAssignment&&(k.outerCss="GAHomeAssignmentDropDownLink");g.mainAssignment&&(k.outerCss="CEMainAssignmentDropDownLink",k.title=MSGS.ECT_CE_MAIN_EMPLOYMENT);k=new SFLink(g.label,k);g.id==this._userSysId&&(this.intialLabel=g.label,g.homeAssignment&&(this._initialLabelIsHome=!0));k.setCss("globalMenuItem");window.isV2Enabled&&
window.isMyBenefitAvailable&&0<=g.label.indexOf("(***$$#***)")?(k.setValue(g.label.replace(/\(\*\*\*\$\$\#\*\*\*\)/i,"")),k.addEventListener("click",this,"_openBenefit")):(0<=g.label.indexOf("(***$$#***)")&&k.setValue(g.label.replace(/\(\*\*\*\$\$\#\*\*\*\)/i,"")),k.addEventListener("click",this));this.navItemList.push(k);a++;d.push(k)}e.items&&0<e.items.length&&d[d.length-1].setCss("globalMenuItem last");c.add(d);this.groups.push(c)}this.renderDropDown=1<a?!0:!1;this.sfList.add(this.groups);this.wrapper.setContent(this.sfList);
this._isPopupOpen()&&this.reRenderWrapperContent()}},_openBenefit:setLoading:function(){var a=new EDULoading;a.setHeight(150);this.sfList.add(a);this.wrapper.setContent(this.sfList);this._isPopupOpen()&&this.reRenderWrapperContent()},reRenderWrapperContent:function(){this.wrapper.reRenderContent()},_lostFocus:function(){var a=this;setTimeout(function(){a._hideMenu()},0)},_hideMenu:function(){this._popup&&this._popup.hide();SFDOMEvent.removeListener(window.document,
"keydown",this._onWindowKeyDown,this)},_onWindowKeyDown:function(a){a=a||window.event;switch(SFDOMEvent.getKeyName(a)){case "ESCAPE":this._hideMenu(),SFDOMEvent.stopEvent(a)}},handleEvent:function(a){switch(a.type){case "click":var b={newViewId:a.param};b.externalURL=this._getExternalUrl(a.param);this._hideMenu();this.dispatch("actionMenuClicked",b)}},_getExternalUrl:function(a){for(var b=0;b<this.navItems.length;b++)for(var c=this.navItems[b],d=0;d<c.items.length;d++){var e=c.items[d];if(a==e.id)return e.url}},
postProcess:function(){},cleanupNavItemList:function(){for(var a=0;a<this.navItemList.length;a++)this.navItemList.cleanup();for(var a=0,b=this.groups.length;a<b;a++)this.groups[a].cleanup();this.sfList.cleanup()},cleanup:function(){this.cleanupNavItemList();this._popup.hide();this.unregister()},getRenderDropDown:function(){return this.renderDropDown}})}();function GAOptionsWrapper(a,b){this.register();this.init(a,b)}
GAOptionsWrapper.prototype=function(){return set(new Component,{init:setType:function(a){this._type=a},renderHtml:function(a){a.push("\x3cdiv id\x3d'",this.id,"'  class\x3d'module-nav eduViewNavigationDropDown globalRoundedCorners globalContainerHoverSansFocus globalMenu globalPortletBody",this._type);Util.browserInfo.ie&&9>Util.ieVersion(!0)&&a.push(" edudropdownborder ");a.push(" '\x3e");this.wrapped.renderHtml(a);a.push("\x3c/div\x3e")},setContent:function(a){this.wrapped=
a},reRenderContent:function(){var a=juic.createRenderContext();this.wrapped.renderHtml(a);a.renderInto(this.id)},setFixedHeight:function(a){}})}();function GlobalGroupHeader(a){this.register();this._init(a)}juic.extend(GlobalGroupHeader,juic.Component,{_init:function(a){this._headerText=a},renderHtml:function(a){a.push('\x3cdiv class\x3d"groupHeader"\x3e',this._headerText,"\x3c/div\x3e")}});function ectGlobalAssignmentViewNavigation(a){this.register();this.init(a)}
ectGlobalAssignmentViewNavigation.prototype=function(){return set(new Component,{init:function(a){this.selectedUserId=a.userId;this.selectNavItemId=a.id;this.initialLabel=a.label;this.isProfilePage=a.isProfilePage;this.companyId=a.companyId;this.currentPage=a.currentPage;this.selectedView=Util.findURLParam("p_selected_view");this.asOfDate=a.asOfDate;this.globalAssignmentNavigationDAO=new ectGlobalAssignmentViewNavigationDAO;this.globalAssignmentNavigationDAO.addEventListener("GANavigationItemsRetrieved",
this);this.navigationDropDown=a.isProfile?new ECTGlobalAssignmentDropDown(a.label,a.isProfile,this.selectedUserId):new ECTGlobalAssignmentDropDown(a.label,!1,this.selectedUserId);this.navigationDropDown.addEventListener("actionMenuClicked",this)},renderHtml:function(a){a.push("\x3cdiv class\x3d'GAViewNavigation' id\x3d'",this.id,"'\x3e");this.navigationDropDown.renderHtml(a);a.push("\x3c/div\x3e")},handleEvent:function(a){switch(a.type){case "GANavigationItemsRetrieved":this.navigationDropDown&&(this.navigationDropDown.setNavList(a.viewData.navBarGroup),
this.dispatchEvent(a));break;case "actionMenuClicked":this.openView(a.newViewId,a.externalURL);break;default:this.dispatchEvent(a)}},cleanup:function(){this.initialLabel.cleanup()},renderDropDown:function(){var a=juic.createRenderContext();this.navigationDropDown.renderHtml(a);a.renderInto(this.id)},openView:function(a,b){this.selectNavItemId!=a&&b&&(window.location=b+"\x26_s.crb\x3d"+ajaxSecKey)},loadNavigationItems:postProcess:function(){this.loadNavigationItems()},getRenderDropDown:function(){return this.navigationDropDown.getRenderDropDown()}})}();function ectGlobalAssignmentViewNavigationDAO(a){this.register();this.init(a)}
ectGlobalAssignmentViewNavigationDAO.prototype=function(){return set(new Component,{init:cleanup:function(){},loadNavigationItems:function(a,b,c,d){var e={me:this,callback:function(a){e.me.dispatch("GANavigationItemsRetrieved",{viewData:a})},exceptionHandler:function(a){e.me.dispatch("failedOperation",{errMsg:a.message,action:"Error retrieving navigation data."})}};this.globalAssignmentNavigationController.getNavigationItems(a,
b,c,d,e)},postProcess:function(){}})}();function ECTHourMinuteField(a,b){this.register();this.init(a,b)}ECTHourMinuteField.FIELD_TYPE="ECTHOURMINUTEFIELD";ECTHourMinuteField.EVENTS={};ECTHourMinuteField.EVENTS.DATA_CHANGED="change";ECTHourMinuteField.EVENTS.FOCUSED="focus";ECTHourMinuteField.MODE={};ECTHourMinuteField.MODE.AUTO="ModeAuto";ECTHourMinuteField.MODE.SINGLE_ONLY="SingleOnly";ECTHourMinuteField.MODE.BOTH_ONLY="BothOnly";ECTHourMinuteField.EVENT_MODE={};
ECTHourMinuteField.EVENT_MODE.FOCUS="focus";ECTHourMinuteField.EVENT_MODE.KEYUP="keyup";ECTHourMinuteField.INPUT_MODE={};ECTHourMinuteField.INPUT_MODE.DURATION="duration";ECTHourMinuteField.INPUT_MODE.CLOCK_TIME="time";ECTHourMinuteField.FIELDS={};ECTHourMinuteField.FIELDS.SINGLE="FieldSingle";ECTHourMinuteField.FIELDS.BOTH="FieldBoth";
juic.extend(ECTHourMinuteField,juic.Component,{_selected:!1,_mode:ECTHourMinuteField.MODE.AUTO,_eventMode:ECTHourMinuteField.EVENT_MODE.FOCUS,_inputMode:ECTHourMinuteField.INPUT_MODE.DURATION,_enabled:!0,_writable:!0,_displayInfo:null,_numCharsHours:2.4,_isModified:!1,init:function(a,b){this.jQueryId="#"+this.id.replace(/:/g,"\\:");this._value=a||0;this._setConfig(b);this._updateDisplayInfo()},isModified:function(){return this._isModified},setFocus:function(a){!0===a&&void 0!==this._oFocusedFieldId&&
(jQuery("#"+this._oFocusedFieldId.replace(/:/g,"\\:")).focus(),this._checkFocus())},setVisible:function(a){!0===a?jQuery(this.jQueryId).show():jQuery(this.jQueryId).hide()},setMode:function(a){this._mode=a;this._refreshModeDisplay()},setEventMode:function(a){this._eventMode=a;this._refreshModeDisplay()},setInputMode:function(a){this._inputMode=a;this._refreshModeDisplay()},setValue:function(a){"number"!==jQuery.type(a)||0>a||this._inputMode===ECTHourMinuteField.INPUT_MODE.CLOCK_TIME&&1440<=a||(this._value=
a,this._isModified=!1,this._refreshDisplay())},setTime:function(a){"string"===jQuery.type(a)&&(a=a.match(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])$/),null!==a&&(a=this._getUIValue(a[1],a[2]),this.setValue(a)))},getValue:function(){return this._value},getTime:setEnabled:function(a){this._enabled=a;a=juic.$(this.id+"_hh");var b=juic.$(this.id+"_mm"),c=juic.$(this.id+"_hhmmString");a&&b&&c&&!1===this._enabled?(a.disabled=!0,b.disabled=!0,
c.disabled=!0):a&&b&&c&&!0===this._enabled&&(a.disabled=!1,b.disabled=!1,c.disabled=!1);this._refreshModeDisplay()},setSelected:function(a){this._selected=a;if(!0===this._selected){var b=this;setTimeout(function(){jQuery(b.jQueryId+"_hh").focus()},100);this._checkFocus()}this._refreshModeDisplay()},getSelected:function(){return this._selected},setWritable:function(a){this.setEnabled(a)},getWritable:function(){return this._enabled},isWritable:function(){return this._enabled},showError:function(a){!0===
a?(Util.addClass(this.id+"_hh","ectFormFieldHasError"),Util.addClass(this.id+"_mm","ectFormFieldHasError"),Util.addClass(this.id+"_hhmmString","ectFormFieldHasError")):(Util.removeClass(this.id+"_hh","ectFormFieldHasError"),Util.removeClass(this.id+"_mm","ectFormFieldHasError"),Util.removeClass(this.id+"_hhmmString","ectFormFieldHasError"))},_refreshModeDisplay:_getTargetFieldsToShow:function(){switch(this._mode){case ECTHourMinuteField.MODE.SINGLE_ONLY:return ECTHourMinuteField.FIELDS.SINGLE;
case ECTHourMinuteField.MODE.BOTH_ONLY:return ECTHourMinuteField.FIELDS.BOTH;default:return this._selected&&this._enabled?ECTHourMinuteField.FIELDS.BOTH:ECTHourMinuteField.FIELDS.SINGLE}},_showFields:function(a){a===ECTHourMinuteField.FIELDS.SINGLE?(jQuery(this.jQueryId+"_multiFields").addClass("hideDurationFields"),jQuery(this.jQueryId+"_singleField").removeClass("hideDurationFields")):(jQuery(this.jQueryId+"_multiFields").removeClass("hideDurationFields"),jQuery(this.jQueryId+"_singleField").addClass("hideDurationFields"))},
_setConfig:function(a){a=a||{};this._mode=a.mode||this._mode||ECTHourMinuteField.MODE.AUTO;this._eventMode=a.eventMode||this._eventMode||ECTHourMinuteField.EVENT_MODE.FOCUS;this._inputMode=a.inputMode||this._inputMode||ECTHourMinuteField.INPUT_MODE.DURATION;this._label=a.label||"";void 0!==a.enabled&&(this._enabled=a.enabled);void 0!==a.writable&&(this._writable=a.writable);this._selected=a.selected||this._selected||!1;this._numCharsHours=a.numCharsHours||this._numCharsHours||2},_updateDisplayInfo:function(){var a=
this._inputMode===ECTHourMinuteField.INPUT_MODE.CLOCK_TIME;this._displayInfo={};this._displayInfo.singleText=this._formattedSingleText(this._value,a);this._displayInfo.splitHHText=this._formattedHours(this._value,a);this._displayInfo.splitMMText=this._formattedMinutes(this._value)},_formattedHours:function(a,b){if("number"===jQuery.type(a)){if(0!==a||b){var c=parseInt(a/60);return!0===b&&10>c?"0"+c:c}return"0"}},_formattedMinutes:function(a){if("number"===jQuery.type(a))return 0===a?"00":10>a%60?
"0"+a%60:a%60},_formattedSingleText:function(a,b){return"number"!==jQuery.type(a)||!0!==b&&0===a?"":this._formattedHours(a,b)+":"+this._formattedMinutes(a)},_refreshDisplay:function(){this._updateDisplayInfo();jQuery(this.jQueryId+"_mm").val()!==this._displayInfo.splitMMText.toString()&&jQuery(this.jQueryId+"_mm").val(this._displayInfo.splitMMText);jQuery(this.jQueryId+"_hh").val()!==this._displayInfo.splitHHText.toString()&&jQuery(this.jQueryId+"_hh").val(this._displayInfo.splitHHText);jQuery(this.jQueryId+
"_hhmmString").val()!==this._displayInfo.singleText.toString()&&jQuery(this.jQueryId+"_hhmmString").val(this._displayInfo.singleText);this._checkFocus()},_setUnselectedWhenNoFocus:function(){var a=juic.$(this.id+"_hh"),b=juic.$(this.id+"_mm");a&&b&&(document.activeElement!==a&&document.activeElement!==b?this.setSelected(!1):document.activeElement!==a&&document.activeElement===b?this._selected=!0:document.activeElement===a&&document.activeElement!==b&&(this._selected=!0))},_fireChangeEventWhenNecessary:function(){function a(){!0===
this._isModified?(this._eventMode===ECTHourMinuteField.EVENT_MODE.FOCUS?this._refreshDisplay():this._updateDisplayInfo(),this._isModified=!1,this.dispatch("change",{actionCommand:"fieldChange",hasError:!1,value:this._value})):(this._isModified=!1,this.getSelected()||this._refreshDisplay())}this._eventMode===ECTHourMinuteField.EVENT_MODE.KEYUP?a.bind(this)():!0!==this.getSelected()&&a.bind(this)()},_handleFocusLost:function(a){setTimeout(function(){this._setUnselectedWhenNoFocus();this._fireChangeEventWhenNecessary()}.bind(this),
1)},_handleKeyUp:function(a){a=a||window.event;var b=a.keyCode||a.which;if(37!==b&&38!==b&&39!==b&&40!==b&&16!==b&&9!==b){a=(a.target||a.srcElement).id;var c=juic.$(this.id+"_hh").value,d=juic.$(this.id+"_mm").value,b=this._isValidInput(a,c,d),c=this._getUIValue(c,d);!0===b&&c!=this._value?(this._value=c,this._isModified=!0,this._eventMode===ECTHourMinuteField.EVENT_MODE.KEYUP&&(this._oFocusedFieldId=a,setTimeout(function(){this._setUnselectedWhenNoFocus();this._fireChangeEventWhenNecessary()}.bind(this),
500))):!1===b&&this._refreshDisplay()}},_handleKeyPress:function(a){a=a||window.event;var b=a.keyCode||a.which;if(35!==b&&36!==b&&37!==b&&38!==b&&39!==b&&40!==b&&9!==b&&8!==b&&46!==b){var c=String.fromCharCode(b),b=(a.target||a.srcElement).id,d=juic.$(this.id+"_hh"),e=juic.$(this.id+"_mm");"number"==typeof d.selectionStart&&(d=this._getNewValue(d.value,d.selectionStart,d.selectionEnd,c),c=this._getNewValue(e.value,e.selectionStart,e.selectionEnd,c),this._isValidInput(b,d,c)||a.preventDefault())}},
_getNewValue:_getUIValue:function(a,b){var c=parseInt(a)||0,d=parseInt(b)||0;return 60*c+d},_isValidInput:function(a,b,c){if(a===this.id+"_hh")switch(this._inputMode){case ECTHourMinuteField.INPUT_MODE.CLOCK_TIME:return this._isValidTimeHour(b);default:return this._isValidNumber(b)}else if(a===this.id+"_mm")return this._isValidTimeMinute(c);return!1},_isValidNumber:function(a){return/^\d*$/.test(a)},_isValidTimeHour:function(a){return/^$|^([0-9]|0[0-9]|1[0-9]|2[0-3])$/.test(a)},
_isValidTimeMinute:_handleSingleFieldOnFocus:function(a){this.setSelected(!0);this.dispatch(ECTHourMinuteField.EVENTS.FOCUSED)},_checkFocus:function(a){function b(){return void 0!==document.activeElement&&null!==document.activeElement?document.activeElement.id:""}a=this._inputMode===ECTHourMinuteField.INPUT_MODE.CLOCK_TIME;("0"===this._displayInfo.splitHHText&&!a||"00"===this._displayInfo.splitHHText&&a)&&b()===this.id+"_hh"&&("0"===jQuery(this.jQueryId+
"_hh").val()&&!a||"00"===jQuery(this.jQueryId+"_hh").val()&&a)&&(jQuery(this.jQueryId+"_hh").val(""),"00"===this._displayInfo.splitMMText&&"00"===jQuery(this.jQueryId+"_mm").val()&&jQuery(this.jQueryId+"_mm").val(""));"00"===this._displayInfo.splitMMText&&b()===this.id+"_mm"&&"00"===jQuery(this.jQueryId+"_mm").val()?jQuery(this.jQueryId+"_mm").val(""):"00"!==this._displayInfo.splitMMText&&0===this._displayInfo.splitMMText.toString().indexOf(0)&&b()===this.id+"_mm"&&jQuery(this.jQueryId+"_mm").val(jQuery(this.jQueryId+
"_mm").val()%10)},_addCSSClass:function(a){var b="";switch(this._getTargetFieldsToShow()){case ECTHourMinuteField.FIELDS.SINGLE:"_multiFields"===a&&(b=" hideDurationFields");break;case ECTHourMinuteField.FIELDS.BOTH:"_singleField"===a&&(b=" hideDurationFields")}return b},renderHtml:function(a){var b=this._numCharsHours-1,c=.7+this._numCharsHours,d="";this._enabled||(d="disabled");this._writable||(d="disabled");a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"tsDurationFields"\x3e');a.push('\x3cdiv aria-label\x3d"',
this._label,'" id\x3d"',this.id,"_multiFields",'" class\x3d"tsTimeFieldContainerMultipleFields',this._addCSSClass("_multiFields"),'" dir\x3d"ltr','"\x3e');a.push('\x3cinput title\x3d"',MSGS.get("COMMON_hours"),'" onblur\x3d"',this.fireCode("_handleFocusLost"),'" ','onfocus\x3d"',this.fireCode("_checkFocus"),'" ','onkeypress\x3d"',this.fireCode("_handleKeyPress"),'" ','onkeyup\x3d"',this.fireCode("_handleKeyUp"),'" id\x3d"',this.id,'_hh" type\x3d"text" maxlength\x3d"',this._numCharsHours,'" value\x3d"',
this._displayInfo.splitHHText,'" style\x3d"width:',b,'em;" ',d,"\x3e\x3c/input\x3e");a.push("\x3cspan\x3e:\x3c/span\x3e");a.push('\x3cinput title\x3d"',MSGS.get("COMMON_minutes"),'" onblur\x3d"',this.fireCode("_handleFocusLost"),'" ','onfocus\x3d"',this.fireCode("_checkFocus"),'" ','onkeypress\x3d"',this.fireCode("_handleKeyPress"),'" ','onkeyup\x3d"',this.fireCode("_handleKeyUp"),'" id \x3d"',this.id,"_mm",'" type\x3d"text" maxlength\x3d"2" value\x3d"',this._displayInfo.splitMMText,'" style\x3d"width:1.4em;"',
d,"\x3e\x3c/input\x3e");a.push("\x3c/div\x3e");a.push('\x3cdiv aria-label\x3d"',this._label,'" id\x3d"',this.id,"_singleField",'" class\x3d"tsTimeFieldContainerSingleField',this._addCSSClass("_singleField"),'"\x3e');a.push('\x3cinput title\x3d"" onfocus\x3d"',this.fireCode("_handleSingleFieldOnFocus"),'"  id\x3d"',this.id,"_hhmmString",'" type\x3d"text" class\x3d"tsSingleInput" value\x3d"',this._displayInfo.singleText,'" style\x3d"width:',c,'em;"',d,"\x3e \x3c/input\x3e");a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")}});
function ECTProfileUpdateQuickcard(){this.register()}
ECTProfileUpdateQuickcard.prototype=function(){return set(new Component,{setUserInfo:function(a){this.userInfo=a;this.showUserInfo()},showUserInfo:function(){var a=[];a.push('\x3cdiv class\x3d"floatLeft"\x3e\x3cimg alt\x3d"',escapeHTML(this.userInfo.fullName),'"');a.push('src\x3d"/localpicture?ps_p_action\x3dshow\x26amp;ps_p_uid\x3d',this.userInfo.userId,"\x26amp;p_type\x3dquickcard\x26amp;_s.crb\x3d",ajaxSecKey,' "\x3e\x3c/div\x3e');a.push('\x3cdiv class\x3d"floatLeft"\x3e\x3cul class\x3d"profileInfoItems"\x3e\x3cli\x3e\x3ca href\x3d"',ECTConstants.LIVE_PROFILE_URL,
this.userInfo.userId,'" class\x3d"link"\x3e',escapeHTML(this.userInfo.fullName),"\x3c/a\x3e\x3c/li\x3e");a.push('\x3cli\x3e\x3ca href\x3d"javascript:void(0);"\x3eDirect Reports (',escapeHTML(this.userInfo.directReports),')\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca href\x3d"javascript:void(0);"\x3eTotal Team (',escapeHTML(this.userInfo.teamSize),")\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e");a.push('\x3cdiv class\x3d"clearAll"\x3e\x26nbsp;\x3c/div\x3e');juic.$("userInfo").innerHTML=a.join("")},renderHtml:function(a){a.push('\x3cdiv class\x3d"quickCard floatLeft"\x3e\x3cdiv class\x3d"roundCorners"\x3e\x3cdiv class\x3d"roundTop"\x3e\x3cdiv class\x3d"roundLeft"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"roundRight"\x3e\x26nbsp;\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"roundBody"\x3e');
a.push('\x3cdiv id\x3d"userInfo"\x3e\x3cdiv class\x3d"loading_indicator_layout_static"\x3e\x3cstrong class\x3d"icon_loading"\x3e',MSGS.COMMON_loading,'\x3c/strong\x3e\x3c/div\x3e\x3cdiv class\x3d"clearAll"\x3e\x26nbsp;\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');a.push('\x3cdiv class\x3d"roundBottom"\x3e\x3cdiv class\x3d"roundLeft"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"roundRight"\x3e\x26nbsp;\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')}})}();
function ECTProfileUpdateMiniCard(a,b){this.register();this.userInfo=a;this.config=b}
ECTProfileUpdateMiniCard.prototype=function(){return set(new Component,{setUserInfo:function(a){this.userInfo=a},renderHtml:function(a){var b=this.userInfo,c=b.stepStatus,d="delegategrant"==c||"escalategrant"==c;a.push("\x3cdiv id\x3d'",this.id,"' class\x3d'","mini_card globalFloatLeft"+(b.isDelegatee?" delegatee":""),"'");if(this.config&&this.config.ariaRole){var e=' tabindex\x3d"0" role\x3d"'+this.config.ariaRole+'"';b.userDisplayValue&&(e+=' aria-labelledby\x3d"'+this.id+'userText"');b.jobTitle&&
(e+=' aria-describedby\x3d"'+this.id+'jobTitle"');a.push(e)}a.push("\x3e\x3cdiv class\x3d'photoContainer globalFloatLeft'\x3e");b.userId?(a.push("\x3cimg alt\x3d'",Util.escapeHTML(b.userDisplayValue),"' "),a.push("src\x3d'/localpicture?ps_p_action\x3dshow\x26amp;ps_p_uid\x3d",b.userId,"\x26amp;p_type\x3dquickcard\x26amp;_s.crb\x3d",window.ajaxSecKey,"' class\x3d'photo ",this.generateFDClasses("avatar",["m","circle","transparent"]),"'\x3e")):b.actorTypeValue&&"EXTERNAL_EMAIL"===b.actorTypeValue?a.push("\x3cimg alt\x3d'' src\x3d'/localpicture?ps_p_action\x3dshow\x26amp;ps_p_uid\x3d",
"noOwner","\x26amp;p_type\x3dquickcard\x26amp;_s.crb\x3d",window.ajaxSecKey,"' class\x3d'photo ",this.generateFDClasses("avatar",["m","circle","transparent"]),"'\x3e"):a.push('\x3cimg alt\x3d"" src\x3d"'+IMAGES["/ui/ect/img/icon_approvers_group.png"]+'" style\x3d";" class\x3d"photo ',this.generateFDClasses("avatar",["m","circle","thumbnail","transparent"]),'"/\x3e');a.push("\x3c/div\x3e\x3cdiv class\x3d'mini_card_text globalFloatLeft'\x3e");a.push("\x3cdiv class\x3d'ellipsisContainer strongText ",
d?"delegator":"","'\x3e \x3cspan title\x3d'",escapeHTML(b.userDisplayValue),"' id \x3d'",this.id,"userText'\x3e",ECTUtil.dimExternalCode(b.userDisplayValue,!1),"\x3c/span\x3e");b.personIdExternal&&a.push(" (",Util.escapeHTML(b.personIdExternal),")");a.push("\x3c/div\x3e");if(b.jobTitle||b.location)a.push("\x3cdiv class\x3d'job_title ellipsisContainer'\x3e"),b.jobTitle&&a.push("\x3cspan title\x3d'",Util.escapeHTML(b.jobTitle),"' id \x3d'",this.id,"jobTitle'\x3e",escapeHTML(b.jobTitle),"\x3c/span\x3e"),
b.location&&(b.jobTitle&&a.push("\x3cbr/\x3e"),a.push("\x3cspan title\x3d'",Util.escapeHTML(b.location),"' id \x3d'",this.id,"location'\x3e",escapeHTML(b.location),"\x3c/span\x3e")),a.push("\x3c/div\x3e");null!=b.active&&"undefined"!==typeof b.status&&a.push(this.setStatusMessage(),"\x3cbr/\x3e");b.dateOfBirth&&a.push(MSGS.EMPFILE_HRIS_DATE_OF_BIRTH,":",b.dateOfBirth,"\x3cbr/\x3e");if(b.nationalId)for(e=0;e<b.nationalId.length;e++){var f=b.nationalId[e];a.push(f.label," : ",f.value,"\x3cbr/\x3e")}a.push("\x3c/div\x3e");
if("approved"==c||"skipped"==c||"declined"==c||"cancelled"==c||"delegategrant"===c||"escalategrant"===c)a.push("\x3cdiv class\x3d'mini_card_approval_details'\x3e"),a.push('\x3cdiv class\x3d"approved ',d?"delegated":"",' "\x3e'),"approved"===c?!0===b.autoApproval?a.push(MSGS.EMPFILE_HRIS_WORKFLOW_AUTO_APPROVED_TITLE):a.push(MSGS.EMPFILE_HRIS_WORKFLOW_APPROVED_TITLE):"declined"===c?a.push(MSGS.EMPFILE_HRIS_WORKFLOW_DECLINED_TITLE):"cancelled"===c?a.push(MSGS.EMPFILE_HRIS_WORKFLOW_CANCELLED_TITLE):"skipped"===
c?a.push(MSGS.EMPFILE_HRIS_WORKFLOW_SKIPPED_TITLE):"delegategrant"===c?a.push(MSGS.ECT_WORKFLOW_STEP_STATUS_DELEGATED):"escalategrant"===c&&a.push(MSGS.ECT_WORKFLOW_STEP_STATUS_ESCALATED),a.push("\x3c/div\x3e"),a.push("\x3cdiv class\x3d'approved_date'\x3e",b.formattedLastModifedDateValue?b.formattedLastModifedDateValue:ECTUtil.formatDate(b.lastModifiedDate),"\x3c/div\x3e"),a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")},showEllipsis:function(){if(this.id){var a=juic.$(this.id);if(a){var b=juic.$(this.id+
"userText"),c=juic.$(this.id+"userTextEllipsis");this._displayEllipsis(a,b,c);b=juic.$(this.id+"jobTitle");c=juic.$(this.id+"jobTitleEllipsis");this._displayEllipsis(a,b,c)}}},_displayEllipsis:function(a,b,c){b&&c&&b.offsetWidth>a.offsetWidth&&(c.style.display="")},setStatusMessage:function(){switch(this.userInfo.status){case ECTConstants.USER_STATUS_ACTIVE:return MSGS.COMMON_Active;case ECTConstants.USER_STATUS_TERMINATED:return this.userInfo.terminationDate?sfMessageFormat.format(MSGS.EMPFILE_HRIS_TERMINATED,
this.userInfo.terminationDate):"";case ECTConstants.USER_STATUS_FUTURE_HIRE:return sfMessageFormat.format(MSGS.EMPFILE_HRIS_FUTURE_HIRE,this.userInfo.hireDate);default:return""}},cleanup:)}();function ECTQuickcardBicPic(){this.register()}
ECTQuickcardBicPic.prototype=function(){return set(new Component,{setUserInfo:function(a){this.userInfo=a;this.showUserInfo()},showUserInfo:function(){var a=[];a.push('\x3cimg class\x3d"photo" alt\x3d"',escapeHTML(this.userInfo.fullName),'"');a.push('src\x3d"/localpicture?ps_p_action\x3dshow\x26amp;ps_p_uid\x3d',this.userInfo.userId,"\x26amp;p_type\x3dnull\x26amp;_s.crb\x3d",ajaxSecKey,' "\x3e');var b=escapeHTML(this.userInfo.fullName);a.push('\x3cul class\x3d"profileInfoItems globalPlacematText"\x3e\x3cli class\x3d"quickCardName" title\x3d"',
b,'"\x3e',b,"\x3c/li\x3e");this.userInfo.jobTitle&&(b=escapeHTML(this.userInfo.jobTitle),a.push('\x3cli title\x3d"',b,'"\x3e',b,"\x3c/li\x3e"));this.userInfo.locationName&&(b=escapeHTML(this.userInfo.locationName),a.push('\x3cli title\x3d"',b,'"\x3e',b,"\x3c/li\x3e"));this.userInfo.directReports?a.push("\x3cli\x3e",sfMessageFormat.format(MSGS.EMPFILE_HRIS_MSS_DIRECTREPORT,escapeHTML(this.userInfo.directReports)),"\x3c/li\x3e"):a.push("\x3cli\x3e",MSGS.EMPFILE_HRIS_MSS_INDIVIDUAL,"\x3c/li\x3e");this.userInfo.teamSize&&
a.push("\x3cli\x3e",sfMessageFormat.format(MSGS.EMPFILE_HRIS_MSS_TEAMSIZE,escapeHTML(this.userInfo.teamSize)),"\x3c/li\x3e");a.push("\x3c/ul\x3e");juic.$("userInfo").innerHTML=a.join("")},renderHtml:function(a){a.push('\x3cdiv class\x3d"QuickcardBicPic" id\x3d"userInfo"\x3e\x3c/div\x3e')}})}();function ECTQuickCardHeader(a,b,c,d,e){this.register();this.init(a,b,c,d,e)}
ECTQuickCardHeader.prototype=function(){return set(new Component,{init:function(a,b,c,d,e){this.userInfo=a;c&&(c.uriNavigate=!0);this.currentViewinfo=c;this._triangleIcon=null;this.viewId=this.currentViewinfo?this.currentViewinfo.id?this.currentViewinfo.id:"":"";this._tablabel=this.currentViewinfo?this.currentViewinfo.label?this.currentViewinfo.label:"":"";d||(this.peopleNav=new EDUPeopleNavigation(this.userInfo,this.currentViewinfo),this.peopleNav.navigationDropDown.setRefocusId(this.id+"_peopleSearch"),
this.peopleNav.addEventListener("personSelected",this,"_handlePersonSelected"),this._triangleIcon=new SFTriangle({direction:"bottom",inherit:!0}));this._takeAction=new ECTTakeActionLink(this.userInfo,this.viewId,this._tablabel);this._takeAction.addEventListener(ECTConstants.EVENT_ACTION,this,"_handleActionCommand");this.isPhotoEditable=!!b;this.isPhotoReadable=null==e?!0:e;this._globalAssignmentDropDown=null},_handlePersonSelected:function(a){this.dispatchEvent(a)},_handleActionCommand:function(a){this.dispatchEvent(a)},
setNavigationAction:function(a){this._navigationActions=a},_showUserSearchandList:function(){this.peopleNav&&this.peopleNav.showSearchAndUserList(this.id+"_peopleSearch")},_createSFPhoto:function(){var a=this._createSFPhotoParams(),a=new SFPhoto(a.user,a.options);this.isPhotoEditable&&(a.addEventListener("mouseover",this,"handleMouseOver"),a.addEventListener("mouseout",this,"handleMouseOut"),(ECTUtil.isiOs()||ECTUtil.isMac())&&a.addEventListener("click",this,"handleMouseOut"));this._sfPhoto=a;this._sfPhoto.addEventListener("click",
this,"_handleClickPhoto");return a},_handleAfterFocusPhoto:function(a){a=SFDOMEvent.getKeyName(a);"RETURN"==a?(this.isPhotoEditable&&this.handleMouseOver(),SFDom.hasClass(juic.$(this.id+"_magimg"),"magImagehover")?this._handleClickPhoto():(this._handleMouseOverPhoto(),juic.$("userInfo").childNodes[0].focus())):"TAB"==a&&this.dispatch("focusOnPhotoEdit")},_closeEnlargedPhotoOnEsc:function(a){"ESCAPE"==SFDOMEvent.getKeyName(a)&&(this.enlargedPhoto.dispatch("hide"),SFDOMEvent.removeListener(window.document,
"keypress",this._closeEnlargedPhotoOnEsc,this))},_handleBlurPhoto:function(a){this._handleMouseOutPhoto();this.isPhotoEditable&&this.handleMouseOut()},_buildLiveProfileImageUrl:function(a){var b=this.userInfo.photo;if(b&&b.photoId&&b.lastModified)var c=SFPhoto.getPhotoMod(b.photoId+b.lastModified);b={urlType:"eduPhoto",photoType:"liveProfile",userId:this.userInfo.userId,mod:c};a&&(b.clientPhotoCachingEnabled=!1,b.invalidateCache=(new Date).getTime());return SFPhoto.url(b)},_handleClickPhoto:function(){var a=
{userId:this.userInfo.userId,fullName:this.userInfo.formattedFullName,photoSrc:this._buildLiveProfileImageUrl(!0)},b={profile:"PORTRAIT_180_240",showUserName:!1};this.enlargedPhoto||(this.enlargedPhoto=new SFPhoto(a,b));SFDOMEvent.addListener(window.document,"mousedown",this._closeEnlargedPhoto,this);SFDOMEvent.addListener(window.document,"touchstart",this._closeEnlargedPhoto,this);SFDOMEvent.addListener(window.document,"keypress",this._closeEnlargedPhotoOnEsc,this);SFOverlayMgr.show(this.enlargedPhoto);
this.enlargedPhoto.setData(a,b);this.enlargedPhoto.updateView()},_handleMouseOverPhoto:function(){SFDom.removeClass(juic.$(this.id+"_magimg"),"magImage");SFDom.addClass(juic.$(this.id+"_magimg"),"magImagehover")},_handleMouseOutPhoto:function(){SFDom.removeClass(juic.$(this.id+"_magimg"),"magImagehover");SFDom.addClass(juic.$(this.id+"_magimg"),"magImage")},_closeEnlargedPhoto:function(a){!this._isClickedOnEnlargedPhoto(a)&&this._isClickOutsideOfEnlargedPhoto(a)&&(this.enlargedPhoto.dispatch("hide"),
SFDOMEvent.removeListener(window.document,"mousedown",this._closeEnlargedPhoto,this),SFDOMEvent.removeListener(window.document,"touchstart",this._closeEnlargedPhoto,this))},_isClickedOnEnlargedPhoto:function(a){a=SFDOMEvent.getTarget(a);return a.id&&0==a.id.indexOf(this.enlargedPhoto.id)?!0:!1},_isClickOutsideOfEnlargedPhoto:function(a){a=SFDOMEvent.getTarget(a||window.event);return this.enlargedPhoto.id==a.id||SFDom.isAncestor(this.enlargedPhoto.id,a)?!1:!0},_createSFPhotoParams:function(){var a=
this.userInfo,b=a&&a.firstName,c=a&&a.mi,a=a&&a.lastName,d="/localpicture?ps_p_action\x3dshow\x26amp;ps_p_uid\x3d"+this.userInfo.userId+"\x26amp;p_type\x3dliveProfile\x26amp;_s.crb\x3d"+ajaxSecKey+"\x26amp;invalidateCache\x3d"+(new Date).getTime();return{user:{fn:b?b:"",mi:c?c:"",ln:a?a:"",userId:this.userInfo.userId,photoSrc:d},options:{profile:"PORTRAIT_60_80",showUserName:!1}}},renderHtml:function(a){a.push('\x3cdiv  id\x3d"userInfo" \x3e');this.isPhotoReadable?(a.push("\x3ca title\x3d'",MSGS.ECT_ZOOM_USER_PHOTO,
"' href\x3d'javascript:void(0)' class\x3d'photowrap' onkeydown\x3d'",this.fireCode("_handleAfterFocusPhoto"),"' onblur\x3d'",this.fireCode("_handleBlurPhoto"),"'\x3e"),a.push("\x3cimg id\x3d'",this.id,"_magimg' class\x3d'magImage' src\x3d'",IMAGES["/ui/edu/img/mag.png"],"' /\x3e"),a.push('\x3cdiv class\x3d"pictureContainer globalRoundedCorners" \x3e'),a.push(this._createSFPhoto()),a.push("\x3c/div\x3e\x3c/a\x3e"),a.push('\x3cdiv class\x3d"userInfoText"\x3e')):a.push('\x3cdiv class\x3d"userInfoTextNoReadPerm"\x3e');
a.push('\x3cdiv class\x3d"nameContainer"\x3e');var b=escapeHTML(this._getFormattedFullName(this._getFullNameBean(),this.userInfo.haveMiddleNamePermission));a.push('\x3cdiv class\x3d"globalFloatLeft" \x3e','\x3ca role\x3d"button" aria-haspopup\x3d"true" title\x3d"',b,'" class\x3d"globalPlacematNavigationText" id\x3d"',this.id,'_peopleSearch" href\x3d"javascript:void(0)" onclick\x3d"',this.fireCode("_showUserSearchandList"),'return false;"\x3e ','\x3cspan class\x3d"navMenuText globalFloatLeft"\x3e',
b,"\x3c/span\x3e",this._triangleIcon,"\x3c/a\x3e","\x3c/div\x3e");a.push(this._navigationActions);a.push('\x3cdiv class\x3d"globalFloatRight"\x3e',this._takeAction,"\x3c/div\x3e");a.push("\x3c/div\x3e");this.userInfo.inactive&&a.push('\x3cdiv class\x3d"inactive-indicator"\x3e( ',MSGS.COMMON_InActive," )\x3c/div\x3e");window.isGlobalAssignmentEnabled||window.isPensionPayoutEnabled||window.isConcurrentEmploymentEnabled?(a.push('\x3cdiv id\x3d"',this.id,'_globalAssignmentPlaceholder"\x3e\x3cdiv class\x3d"jobTitle globalPlacematText"\x3e',
escapeHTML(this.userInfo.jobTitle),"\x3c/div\x3e"),a.push('\x3cdiv class\x3d"location globalPlacematText"\x3e',escapeHTML(this.userInfo.locationName),"\x3c/div\x3e\x3c/div\x3e")):(a.push('\x3cdiv class\x3d"jobTitle globalPlacematText"\x3e',escapeHTML(this.userInfo.jobTitle),"\x3c/div\x3e"),a.push('\x3cdiv class\x3d"location globalPlacematText"\x3e',escapeHTML(this.userInfo.locationName),"\x3c/div\x3e"));a.push("\x3c/div\x3e\x3c/div\x3e")},_getFullNameBean:function(){return this.userInfo.fullNameBean?
this.userInfo.fullNameBean:{firstName:this.userInfo.firstName,mi:this.userInfo.middleInitial,lastName:this.userInfo.lastName}},_getFormattedFullName:function(a,b){if(!a)return"";"undefined"==typeof b&&(b=!0);var c=null!=a.firstName?a.firstName:"",d=null!=a.mi?a.mi:"",e=null!=a.lastName?a.lastName:"";b||(d="");return this._isDisplayed(c)||this._isDisplayed(d)||this._isDisplayed(e)?(c=sfMessageFormat.format(MSGS.User_Display_Name,c,d,e),c=c.trim(),c=c.replace(/\s{2,}/g," ")):""},_isDisplayed:function(a){return!(!a||
0===a.length||/^\s*$/.test(a))},handleMouseOver:function(a){if(!this.isEditShown){var b=this;this.timer=window.setTimeout(function(){b.dispatch("showEditButton",{triggerElId:b._sfPhoto.id});b.isEditShown=!0},0)}},handleMouseOut:function(a){this.isEditShown?(this.dispatch("hideEditButton"),this.isEditShown=!1):window.clearTimeout(this.timer)},_buildImgUrl:function(){return"/localpicture?ps_p_action\x3dshow\x26ps_p_uid\x3d"+this.userInfo.userId+"\x26p_type\x3dquickcard\x26_s.crb\x3d"+ajaxSecKey+"\x26invalidateCache\x3d"+
(new Date).getTime()},reloadImage:function(){var a=this._createSFPhotoParams();this._sfPhoto.setData(a.user,a.options);this._sfPhoto.updateView()},setGlobalAssignmentDropDown:function(a){this._globalAssignmentDropDown=a},renderGlobalAssignmentDropDown:function(){this._globalAssignmentDropDown&&this._globalAssignmentDropDown.getRenderDropDown()&&this._globalAssignmentDropDown.render(this.id+"_globalAssignmentPlaceholder")}})}();function ECTNavigationButton(a,b){this.register();this.init(a,b)}
ECTNavigationButton.prototype=function(){return set(new Component,{init:function(a,b){var c=[{altText:"",isModule:!1,isSelected:!0,label:MSGS.EMPFILE_EDU_PUBLIC_PROFILE,newWindow:!1,onclick:"",title:MSGS.EMPFILE_EDU_PUBLIC_PROFILE,url:"/xi/ui/pages/empfile/liveprofile.xhtml?selected_user\x3d"+a.userId+"\x26bplte_company\x3dRCMACE\x26_s.crb\x3d"+ajaxSecKey}],d=a.accessibleLinks,e=0,f,g="?selected_user\x3d"+a.userId+"\x26_s.crb\x3d"+ajaxSecKey,k;for(k in d)c[++e]={altText:"",isModule:!1,isSelected:!1,
label:d[k],newWindow:!1,onclick:"",title:d[k]},k==b&&(f=e),k===ECTConstants.LINK_UPDATE_EMPLOYEE_RECORDS&&c[e]&&(c[e].url="/xi/ui/ect/pages/mss/ectProfileUpdate.xhtml"+g);this.Model=new SFDefaultSingleSelectModel(c);this.Model.setSelectedIndex(f);this._tabNavigation=new SFMenuDropDown(this.Model)},renderHtml:function(a){a.push("\x3cdiv class\x3d'ECTNav'\x3e");a.push("\x3cdiv class\x3d'module-nav'\x3e");this._tabNavigation.renderHtml(a);a.push("\x3c/div\x3e\x3c/div\x3e")},handleEvent:function(a){},
cleanup:function(){},postProcess:function(){}})}();function ECTTakeActionLink(a,b,c){this.register();this._init(a,b,c)}
juic.extend(ECTTakeActionLink,juic.Component,{_init:function(a,b,c){this.ajaxServiceController=AjaxService.getMBeanInstance("quickcardController");this._userInfo=a;this._userId=a.userId;this._viewId=b;this._tabLabel=c;this._takeAction='\x3cdiv class\x3d"sfLoadingContainerSm "\x3e\x3cspan\x3e'+MSGS.COMMON_loading+"\x3c/span\x3e\x3c/div\x3e";var d=this;this.ajaxServiceController.getTakeActionPermission(this._userId,this._viewId,{callback:)},_hideLoading:function(){this._takeAction=
"";var a=juic.$(this.id);a&&(a.innerHTML="")},_createActionButton:function(){this._triangleIcon=new SFTriangle({direction:"bottom",inherit:!0});var a=juic.createRenderContext();a.push('\x3cdiv class\x3d"globalFloatLeft" \x3e','\x3ca role\x3d"button" aria-haspopup\x3d"true" title\x3d"',MSGS.EMPFILE_HRIS_TAKEACTION,'"  class\x3d"globalPlacematNavigationText" id\x3d"',this.id,'_peopleSearch" href\x3d"javascript:void(0)" onclick\x3d"',this.fireCode("_showTakeAction"),'return false;"\x3e ','\x3cspan class\x3d"navMenuText globalFloatLeft"\x3e',
MSGS.EMPFILE_HRIS_TAKEACTION,"\x3c/span\x3e",this._triangleIcon,"\x3c/a\x3e","\x3c/div\x3e");juic.$(this.id)&&(juic.$(this.id).innerHTML=a.join(""))},_buildActionLinks:function(a){this._allLinks=[];this.sfList=new SFList("CheckBoxList",{addFocusLoop:!0});this.sfList.add(this._createLinks(a.linkList));this._EDUOptionsWrapper=new EDUOptionsWrapper(this.sfList);a={originId:this.id+"_peopleSearch",offset:{vertical:0,horizontal:0},menu:{vertical:"top",horizontal:"right"},origin:{vertical:"bottom",horizontal:"right"}};
Util.isRTL()&&(a.origin={vertical:"bottom",horizontal:"left"},a.menu={vertical:"top",horizontal:"left"});this._popup=new SFContextPopup(this._EDUOptionsWrapper,a);this._popup.addEventListener("clickedOutsidePopup",this,"_lostFocus");this._showMenu()},_lostFocus:_keyEvents:function(a){switch(SFDOMEvent.getCharCode(a)){case 27:this._hideMenu(),this._takeAction.setFocus(!0)}},_hideMenu:function(){this._popup&&(this._popup.hide(),SFDOMEvent.removeListener(window.document,
"keydown",this._keyEvents,this));clearInterval(this._intervalId)},_showMenu:function(){this._popup.show();this._popup.isShown()&&this.sfList.setFocus();SFDOMEvent.addListener(window.document,"keydown",this._keyEvents,this);var a=this,b=null;clearInterval(this._intervalId);this._intervalId=setInterval(function(){var c=SFDom.getXY(a.id);b=b||c;c[0]==b[0]&&c[1]==b[1]||a._hideMenu()},500)},_doPopupAction:function(a){"addBadge"==a.actionCommand?(this._addBadge||(this._addBadge=new QuickcardGiveUserBadge(this._userId)),
this._addBadge.show()):"addNote"==a.actionCommand?(this._addNote||(this._addNote=new QuickcardAddNotes(this._userInfo,a.target.actionItem.loggedInUserId)),this._addNote.show()):"showBIPublisherPanel"==a.actionCommand&&(new QuickcardPrintTalentCard(this._userInfo)).show()},_createLinks:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];if(e.url&&-1!=e.url.indexOf("/xi/ui/ect/pages/mss/ectProfileUpdate.xhtml")&&this._tabLabel){var f=window.location;e.url=e.url+"\x26prevPage\x3d"+encodeURIComponent(this._tabLabel)+
"\x26prevLocation\x3d"+encodeURIComponent(f.pathname+f.search)}e.url&&-1!=e.url.indexOf("/xi/ui/edu/pages/prevewProfile.xhtml")&&(e.url=e.url+"\x26timezoneOffset\x3d"+(new Date).getTimezoneOffset());e=new QuickcardAction(e);e.setCss("globalMenuItem");e.disableList();e.addEventListener("action",this,"_doPopupAction");b.push(e);this._allLinks.push(e)}b.length||(b=new SFText(MSGS.EMPFILE_HRIS_ERROR_NO_PERMISSION),b.setCSSClass("noPermission"),this._takeAction.setEnabled(!1));return b},_showTakeAction:function(){if(this._EDUOptionsWrapper)this._showMenu();
else{var a=this;this.ajaxServiceController.getActionList(this._userId,this._viewId,{callback:)}},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"headerTakeAction" role\x3d"listbox" aria-describedby\x3d"',this.id,'_desc"\x3e',this._takeAction,"\x3c/div\x3e");a.push('\x3cspan class\x3d"hiddenAriaContent" id\x3d"',this.id,'_desc"\x3e',MSGS.ECT_TAKE_ACTION_DESCRIPTION,"\x3c/span\x3e")},cleanup:function(){for(var a=0,b=this._allLinks.length;a<
b;a++)this._allLinks[a].cleanup();this.unregister()}});function ECTASDate(a){this.init(a)}ECTASDate.prototype=function(){return set(new juic.Component,{init:function(a){this._dateObj=a;this._triangleIcon=new SFTriangle({direction:"bottom",inherit:!0})},renderHtml:function(a){a.push('\x3cdiv class\x3d"globalFloatLeft asofDate globalPlacematText"\x3e',MSGS.EMPFILE_HRIS_AS_OF,": ",this._dateObj,"\x3c/div\x3e")}})}();
function ECTResponseDialog(a,b,c){this.register();this.init(a,b,c);this._dialogTitleJSON={warning:MSGS.EMPFILE_HRIS_WARNING_TITLE,error:MSGS.COMMON_Err,failure:MSGS.COMMON_Err,success:MSGS.COMMON_Information}}
juic.extend(ECTResponseDialog,juic.Component,{_buildDialogButtons:function(a){if(a==ECTConstants.TYPE_CONFIRM||a==ECTConstants.TYPE_SEND_BACK||a==ECTConstants.TYPE_DECLINE_ESCALATION||a==ECTConstants.TYPE_DECLINE_DELEGATION||a==ECTConstants.TYPE_DELEGATE){var b=[MSGS.COMMON_No,MSGS.COMMON_Yes];a==ECTConstants.TYPE_SEND_BACK?b=[MSGS.COMMON_Cancel,MSGS.EMPFILE_HRIS_WORKFLOW_SENDBACK_BTN_LABEL]:a==ECTConstants.TYPE_DECLINE_ESCALATION?b=[MSGS.COMMON_Cancel,MSGS.ECT_WORKFLOW_DECLINE_ESCALATION]:a==ECTConstants.TYPE_DECLINE_DELEGATION?
b=[MSGS.COMMON_Cancel,MSGS.ECT_WORKFLOW_DECLINE_DELEGATION]:a==ECTConstants.TYPE_DELEGATE&&(b=[MSGS.COMMON_Cancel,MSGS.ECT_WORKFLOW_DELEGATE]);return[{label:b[1],eventName:ECTConstants.EVENT_YES_DECLINE,active:!0},{label:b[0],eventName:ECTConstants.EVENT_CLOSE,active:!1,buttonDesign:"transparent"}]}return a==ECTConstants.TYPE_CONFIRM_DELETE?[{label:MSGS.EMPFILE_HRIS_DIRTY_CANCEL,eventName:ECTConstants.EVENT_CLOSE,active:!1},{label:MSGS.EMPFILE_HRIS_WORKFLOW_DELETE_LABEL,eventName:ECTConstants.EVENT_YES_DECLINE,
active:!0}]:a==ECTConstants.TYPE_WARNING?[{label:MSGS.ECT_COMMON_CORRECT,eventName:ECTConstants.EVENT_PROCEED_CORRECT,active:!0},{label:MSGS.ECT_COMMON_PROCEED,eventName:ECTConstants.EVENT_PROCEED,active:!1}]:a==ECTConstants.TYPE_DIRTY_CONFIRM?[{label:MSGS.EMPFILE_HRIS_DIRTY_SAVE,eventName:ECTConstants.EVENT_YES_SAVE,active:!0},{label:MSGS.EMPFILE_HRIS_DIRTY_DONT_SAVE,eventName:ECTConstants.EVENT_YES_DECLINE,active:!1},{label:MSGS.EMPFILE_HRIS_DIRTY_CANCEL,eventName:ECTConstants.EVENT_CLOSE,active:!1,
buttonDesign:"transparent"}]:a==ECTConstants.TYPE_NEWHIRE_SUCCESS?[{label:MSGS.EMPFILE_HRIS_VIEW_PROFILE,eventName:ECTConstants.EVENT_GOTO_PROFILE,active:!1},{label:MSGS.EMPFILE_HRIS_ONLY_ADD_ANOTHER,eventName:ECTConstants.EVENT_ADDANOTHER,active:!0}]:a==ECTConstants.TYPE_ADD_GA_SUCCESS?[{label:MSGS.COMMON_Ok,eventName:ECTConstants.EVENT_CLOSE,active:!0}]:a==ECTConstants.TYPE_CHANGE_CONFIRM?[{label:MSGS.COMMON_Cancel,eventName:ECTConstants.EVENT_CLOSE,active:!1},{label:MSGS.COMMON_No,eventName:ECTConstants.EVENT_NO_CONFIRM,
active:!1},{label:MSGS.COMMON_Yes,eventName:ECTConstants.EVENT_YES_DECLINE,active:!0}]:[{label:MSGS.COMMON_Ok,eventName:ECTConstants.EVENT_CLOSE,active:!0}]},setMsgType:function(a,b){this.options=b||{};this._noFlashMsg=this.options.noFlashMsg?this.options.noFlashMsg:!1;this.msgType=a;this.respDialog&&this.respDialog.setNewButtons(this._buildDialogButtons(this.msgType));var c;if(a==ECTConstants.TYPE_ALERT||a==ECTConstants.TYPE_CONFIRM_DELETE||a==ECTConstants.TYPE_WARNING||a==ECTConstants.TYPE_CONFIRM||
a==ECTConstants.TYPE_DIRTY_CONFIRM||a==ECTConstants.TYPE_SEND_BACK||a==ECTConstants.TYPE_DECLINE_DELEGATION||a==ECTConstants.TYPE_DELEGATE||a==ECTConstants.TYPE_CHANGE_CONFIRM)c=ECTConstants.TYPE_ALERT;else if(a==ECTConstants.TYPE_SUCCESS||a==ECTConstants.TYPE_NEWHIRE_SUCCESS||a==ECTConstants.TYPE_ADD_GA_SUCCESS||a==ECTConstants.TYPE_INFORMATION)c=ECTConstants.TYPE_CONFIRM;else if(a==ECTConstants.TYPE_ERROR||a==ECTConstants.STATUS_FAILURE)c=ECTConstants.TYPE_ERROR;if(this.message)this.message.setMessageType(c);
else return c},setSystemMessage:function(a,b){this.message.setSystemMessage(a);b&&this.message.setDetailMessage(b)},init:function(a,b,c){this.message=new SFSysMsg(this.setMsgType(a),b);this.msgType=a;this.dialogTitle=c},setDialogTitle:function(a){this.dialogTitle=a;""===a&&(this.dialogTitle=this._dialogTitleJSON[this.msgType]);this.respDialog&&this.respDialog.setDialogTitle(this.dialogTitle)},setButtons:function(a){this.buttons=a},show:function(a,b){this._data=a;this.respDialog||(this.respDialog=
new ECTDialogBox(this.dialogTitle,this.message,this.buttons||this._buildDialogButtons(this.msgType),400,this.isFioriFDEnabled()?"":90,!0),this.isFioriFDEnabled()&&(this.respDialog.setContent(this.message.getSystemMessage()),this.respDialog.setMessageBoxType(this.message.getMessageType())),this.respDialog.setCancelAction(ECTConstants.EVENT_CLOSE),this.respDialog.addEventListener(ECTConstants.EVENT_ACTION,this));AccessibilityPrefs.isBlindnessSupportEnabled()||this.msgType!=ECTConstants.TYPE_SUCCESS||
this._noFlashMsg?(this.isFioriFDEnabled()&&(this.respDialog.setContent(this.message.getSystemMessage()),this.respDialog.setMessageBoxType(this.message.getMessageType())),SFOverlayMgr.addEventListener("overlayRendered",this,"_overlayRendered"),this.respDialog.showDialog(!0,b),this.respDialog.setShouldSetAriaDescribedBy(ECTConstants.TYPE_ALERT!==this.message.getMessageType())):(this._flashMsg||(this._flashMsg=new ECTFlashMessage,this._flashMsg.addEventListener("hide",this,"_dispatchHideFlashMsg")),
this._flashMsg.setMessage(this.message.getSystemMessage()),this._flashMsg.show())},_dispatchHideFlashMsg:function(a){this.dispatch(ECTConstants.EVENT_HIDE_RESPONSE_DIALOG,{options:this.options})},_overlayRendered:function(a){if(a.componentId==this.respDialog.id){var b=this;this.isFioriFDEnabled()||setTimeout(function(){var a=juic.$(b.message.id+"_msg").offsetHeight+26;b.respDialog.setContentHeight(200>a?a:200)},100)}},dispatchEvent:function(a){this._data&&(a.data=this._data,this._data=null);this._super(a)},
handleEvent:function(a){if(a.type==ECTConstants.EVENT_ACTION)switch(a.actionCommand){case ECTConstants.EVENT_YES_SAVE:this.dispatch(ECTConstants.EVENT_YES_SAVE);this.respDialog.close();break;case ECTConstants.EVENT_YES_DECLINE:case ECTConstants.EVENT_NO_CONFIRM:this.dispatch(a.actionCommand,{options:this.options});this.respDialog.close();break;case ECTConstants.EVENT_YES_MOVE_POSITION:case ECTConstants.EVENT_NO_MOVE_POSITION:this.dispatch(a.actionCommand);this.respDialog.close();break;case ECTConstants.EVENT_CLOSE:this.respDialog.close();
this.dispatch(ECTConstants.EVENT_HIDE_RESPONSE_DIALOG,{options:this.options});break;case ECTConstants.COMMAND_DONE:this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.COMMAND_DONE});this.respDialog.close();break;case ECTConstants.EVENT_ADDANOTHER:this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_ADDANOTHER});this.respDialog.close();break;case ECTConstants.EVENT_GOTO_PROFILE:this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_GOTO_PROFILE});
this.respDialog.close();break;case ECTConstants.EVENT_PROCEED:this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_PROCEED,options:this.options});this.respDialog.close();break;case ECTConstants.EVENT_PROCEED_CORRECT:this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_PROCEED_CORRECT,options:this.options});this.respDialog.close();break;case ECTConstants.EVENT_HIDE:SFOverlayMgr.removeEventListener("overlayRendered",this),this.dispatch(ECTConstants.EVENT_ACTION,
{actionCommand:ECTConstants.EVENT_HIDE})}},enableButtons:enableButton:cleanup:function(){this.message&&this.message.cleanup();this._flashMsg&&this._flashMsg.cleanup();this.respDialog&&this.respDialog.cleanup();this.unregister()},setRedirection:getRedirection:function(){return this._redirection}});
function ECTWorkflowDialog(){this.register();this.init()}
(function(){juic.extend(ECTWorkflowDialog,juic.Component,{init:function(){this.dialogContent=new ECTApproverChainAndComments;this.dialogContent.addEventListener(ECTConstants.EVENT_ACTION,this);this.respDialog=new ECTDialogBox(MSGS.EMPFILE_HRIS_WORKFLOW_CONFIRM_MESSAGE_TITLE,this.dialogContent,this._getDialogButtons(),500,90,!0);this.respDialog.addEventListener(ECTConstants.EVENT_ACTION,this)},_getDialogButtons:function(){return[{label:MSGS.COMMON_Submit,eventName:ECTConstants.TYPE_CONFIRM,active:!0},
{label:MSGS.COMMON_Cancel,eventName:ECTConstants.EVENT_HIDE,active:!1}]},_resizeResponseDialog:function(){if(this.respDialog){var a=this.approverList.contributorList||[],b=this.approverList.CCRoleList||[],a=220*(a.length>b.length?a.length:b.length)+400,a=700<a?700:a;500<a&&(this.respDialog.setInnerWidth(a),SFOverlayMgr.centerComponent(this.respDialog.id))}},_overlayRendered:function(a){a.componentId==this.respDialog.id&&(this.respDialog.setContentHeight(this.dialogContent.getOffsetHeight()),SFOverlayMgr.centerComponent(this.respDialog.id))},
setMessage:function(a){this.workflowResponse=a;this.workflowId=a.workflowId;this.userId=a.userId;this.dialogContent.setMessage(a)},setApproverList:function(a){this.approverList=a||{};this.dialogContent.setApproverList(a);this._resizeResponseDialog()},show:function(){SFOverlayMgr.addEventListener("overlayRendered",this,"_overlayRendered");this.respDialog.showDialog()},resize:function(){var a=this.dialogContent.getOffsetHeight()+(this.isFioriFDEnabled()?32:0),b=SFDom.getViewportHeight()-200;this.respDialog.setContentHeight(a>
b?b:a);SFOverlayMgr.centerComponent(this.respDialog.id)},close:function(){this.dialogContent.setExpanded(!1);this.respDialog.close();SFOverlayMgr.removeEventListener("overlayRendered",this)},handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_ACTION:a.actionCommand==ECTConstants.EVENT_RESIZE_DIALOG?this.resize():a.actionCommand==ECTConstants.TYPE_CONFIRM?(this.resize(),this.dialogContent.setExpanded(!1),this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_SAVE_WORKFLOW_RESPONSE,
workflowResponse:this.workflowResponse,comments:this.dialogContent.getPostComments()}),this.respDialog.close()):(a.actionCommand===ECTConstants.EVENT_HIDE&&this.dialogContent.setExpanded(!1),this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:a.actionCommand,workflowId:this.workflowId,userId:this.userId}))}},cleanup:function(){this.dialogContent.cleanup();this.respDialog.cleanup();this.unregister()}})})();function ECTApproverChain(){this.register();this.init()}
(function(){juic.extend(ECTApproverChain,juic.Component,{init:function(){this.showApproverLink=new SFSimpleLink(MSGS.EMPFILE_HRIS_WORKFLOW_VIEW_APPROVAL_CHAIN,"getWorkflowApproverList");this.showApproverLink.addEventListener(ECTConstants.EVENT_ACTION,this,"_toggleApproverChain");this._miniCard=[]},_renderContributorCCSection:function(a,b,c){a.push('\x3cdiv class\x3d"approversListHeader contributorsListHeader" id\x3d"',this.id,'contributorsListHeader"\x3e',c,"\x3c/div\x3e",'\x3cdiv role\x3d"list" class\x3d"contributors_row"\x3e\x3cdiv style\x3d"overflow: hidden"\x3e');
c=0;for(var d=b.length;c<d;c++){0!==c&&0===c%3&&d!==c+1&&a.push('\x3c/div\x3e\x3cdiv style\x3d"overflow: hidden"\x3e');var e=new ECTProfileUpdateMiniCard(b[c],{ariaRole:"listitem"});this._miniCard.push(e);a.push("\x3cdiv\x3e",e,"\x3c/div\x3e")}a.push("\x3c/div\x3e\x3c/div\x3e")},setApproverList:function(a){this._miniCard||(this._miniCard=[]);var b=juic.createRenderContext();b.push('\x3cdiv class\x3d"approversListHeader" id\x3d"',this.id,'approversListHeader"\x3e',MSGS.EMPFILE_HRIS_WORKFLOW_APPROVERSLIST_HEADER,
"\x3c/div\x3e");b.push('\x3cdiv class\x3d"approversList" role\x3d"list"\x3e');for(var c=a.stepList||[],d=0,e=c.length;d<e;d++){var f=c[d].stepApproverList,g=!1;f[0]&&f[0].stepMultipleApprovers&&0<f[0].stepMultipleApprovers.length&&(4>=f[0].stepMultipleApprovers.length?f=f[0].stepMultipleApprovers:g=!0);b.push('\x3cdiv class\x3d"approverStepRow"\x3e\x3cdiv class\x3d"approvalStep globalFloatLeft"\x3e',d+1,'\x3c/div\x3e\x3cdiv class\x3d"approverDetails"\x3e');for(var k=0,l=f.length;k<l;k++){var m=new ECTProfileUpdateMiniCard(f[k],
{ariaRole:"listitem"});this._miniCard.push(m);b.push(m);g&&b.push("\x3ca role\x3d'button' id\x3d'positionIncumbents' class\x3d'incumbentsIcon globalFloatRight' title\x3d'' href\x3d'javascript:void(0);' onclick\x3d'",this.fireCode("_showPositionIncumbents",{approversList:f}),"' aria-required\x3d'false' aria-haspopup\x3d'true'\x3e\x3c/a\x3e");("delegategrant"==f[k].stepStatus||"escalategrant"==f[k].stepStatus)&&f[k].stepDelegatees&&0<f[k].stepDelegatees.length&&(m=f[k].stepDelegatees[0].userDisplayValue,
-1==m.indexOf(MSGS.ECT_WORKFLOW_NEW_APPROVER)&&(f[k].stepDelegatees[0].userDisplayValue=MSGS.ECT_WORKFLOW_NEW_APPROVER+" "+m),f[k].stepDelegatees[0].isDelegatee=!0,m=new ECTProfileUpdateMiniCard(f[k].stepDelegatees[0],{ariaRole:"listitem"}),this._miniCard.push(m),b.push(m))}b.push("\x3c/div\x3e\x3c/div\x3e")}b.push("\x3c/div\x3e");a.contributorList&&0!==a.contributorList.length&&this._renderContributorCCSection(b,a.contributorList,MSGS.EMPFILE_HRIS_WF_CONFIG_CONTRIBUTOR);a.CCRoleList&&0!==a.CCRoleList.length&&
this._renderContributorCCSection(b,a.CCRoleList,MSGS.EMPFILE_HRIS_WF_CONFIG_CC_ROLES);if(a=juic.$(this.id+"_approverList"))a.innerHTML=b.join("")},_showPositionIncumbents:function(a){this._positionIncumbentsDialog&&this._positionIncumbentsDialog.cleanup();var b=a.approversList[0];a=MSGS.get("POSITION"==b.approverType?"ECT_WORKFLOW_POSITION_INCUMBENTS_DIALOG_TITLE":"ECT_WORKFLOW_DYNAMIC_GROUP_DIALOG_TITLE",b.userDisplayValue);b=new ECTPositionIncumbents(b.stepMultipleApprovers);this._positionIncumbentsDialog=
new ECTDialogBox(a,b,[{label:MSGS.COMMON_Close,eventName:ECTConstants.EVENT_HIDE,active:!0}],600,300,!0);this._positionIncumbentsDialog.showDialog()},getOffsetHeight:function(){var a=juic.$(this.id+"_approvalListContainer");assert(a,"Trying to set approvers list even before dom exists!");return a.offsetHeight},setExpanded:function(a){var b=MSGS.EMPFILE_HRIS_WORKFLOW_VIEW_APPROVAL_CHAIN,c="expandIcon";a&&(b=MSGS.EMPFILE_HRIS_WORKFLOW_HIDE_APPROVAL_CHAIN,c="expandIconOpen");this.showApproverLink.setLabel(b);
juic.$(this.id+"expandIcon").className=c;this.setApprovalListVisible(a)},setApprovalListVisible:function(a){var b=juic.$(this.id+"_approverList");assert(b,"Trying to set approvers list even before dom exists!");b.style.display=a?"":"none";this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_RESIZE_DIALOG})},setMessage:function(a){this.workflowName=a.workflowName||"";this.dialogMsg=a.nonUserBasedMDFUI?Util.escapeHTML(a.eventReason):sfMessageFormat.format(MSGS.EMPFILE_HRIS_WORKFLOW_CONFIRM_MESSAGE,
Util.escapeHTML(a.eventReason),Util.escapeHTML(a.userDisplayName))},renderDialogMsg:function(a){a.push('\x3cdiv id\x3d"',this.id,'_approvalListContainer" class\x3d"responseDialog"\x3e');this.dialogMsg&&this.dialogMsg.length&&a.push("\x3cdiv class\x3d'workflowDlgMsg' title\x3d'",this.workflowName,"'\x3e",this.dialogMsg,"\x3c/div\x3e")},renderApproverChain:function(a){a.push("\x3cdiv class\x3d'participantsLink'\x3e\x3cspan class\x3d'expandIcon' id\x3d'",this.id,"expandIcon' \x3e\x26nbsp;\x3c/span\x3e");
this.showApproverLink.renderHtml(a);a.push('\x3c/div\x3e\x3cdiv style\x3d"display:none;" id\x3d"',this.id,'_approverList"\x3e\x3c/div\x3e\x3c/div\x3e')},renderHtml:function(a){this.renderDialogMsg(a);this.renderApproverChain(a)},_toggleApproverChain:function(a){this.showApproverLink&&"getWorkflowApproverList"===a.actionCommand&&this.setExpanded(this.showApproverLink.getLabel()===MSGS.EMPFILE_HRIS_WORKFLOW_VIEW_APPROVAL_CHAIN)},cleanup:function(){this.showApproverLink.cleanup();for(var a=0,b=this._miniCard.length;a<
b;a++)this._miniCard.cleanup();this.unregister()}})})();function ECTApproverChainAndComments(){this.register();this.init()}
juic.extend(ECTApproverChainAndComments,ECTApproverChain,{init:function(){this._super();this._comments=new ECTTextArea("",{writable:!0,maxLength:4E3,title:MSGS.ECT_WORKFLOW_DIALOG_COMMENT_DEFAULT_TITLE})},getPostComments:function(){return this._comments.getValue()},renderHtml:function(a){this.renderDialogMsg(a);a.push('\x3cdiv class\x3d"commentsSection"\x3e',this._comments,"\x3c/div\x3e");this.renderApproverChain(a)},cleanup:setMessage:function(a){this._super(a);
this._comments.setValue(a&&a.commentText?a.commentText:"")}});function ECTWorkflowParticipants(){this.register()}juic.extend(ECTWorkflowParticipants,ECTApproverChain,{renderHtml:function(a){a.push("\x3cdiv id\x3d",this.id,"_approvalListContainer\x3e\x3cdiv id\x3d",this.id,"_approverList\x3e\x3c/div\x3e\x3c/div\x3e")}});juic.extend(ECTWorkflowParticipantsDialog,ECTWorkflowDialog,{init:function(){this.dialogContent=new ECTWorkflowParticipants;this.respDialog=new ECTDialogBox(MSGS.ECT_WORKFLOW_APPROVER_CHAIN_DIALOG_TITLE,this.dialogContent,[{label:MSGS.COMMON_Close,eventName:ECTConstants.EVENT_HIDE,active:!1,buttonDesign:"transparent"}],500,90,!0)}});function ECTPositionIncumbents(a){this.register();this.init(a)}
juic.extend(ECTPositionIncumbents,juic.Component,{init:function(a){this._positionIncumbents=a},renderHtml:function(a){a.push('\x3cdiv class\x3d"incumbents"\x3e');for(var b=0,c=this._positionIncumbents.length;b<c;b++){var d=this._positionIncumbents[b],e=Util.escapeHTML(d.userDisplayValue);a.push('\x3cdiv class\x3d"globalFloatLeft incumbent"\x3e');a.push('\x3cdiv class\x3d"photoContainer"\x3e');a.push('\x3cimg alt\x3d"',e,'" ');a.push('src\x3d"/localpicture?ps_p_action\x3dshow\x26amp;ps_p_uid\x3d',
d.userId,"\x26amp;p_type\x3dface\x26amp;_s.crb\x3d",window.ajaxSecKey,'" class\x3d"photo" /\x3e');a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"userDisplayValue"\x3e',e,"\x3c/div\x3e");a.push("\x3c/div\x3e")}a.push("\x3c/div\x3e")}});function ECTFlashMessage(a){this.register();this.init(a)}
ECTFlashMessage.prototype=function(){var a=document.createElement("div");a.setAttribute("class","imgPreloader");a.setAttribute("id","imgPreloader");SFDOMEvent.ready(;var b=!0;return set(new juic.Component,{init:function(a){this.setMessage(a)},show:function(){SFOverlayMgr.addEventListener("overlayRendered",this,"_onDialogRendered");SFOverlayMgr.showOverlay(this);var c=this;setTimeout(function(){c.dispatch("hide")},1E3);b&&(b=!1,window.document.body.removeChild(a))},
setMessage:function(a){this._msgText=a},renderHtml:function(a){a.push('\x3cdiv role\x3d"alertdialog" aria-labelledby\x3d"',this.id,'_label" aria-describedby\x3d"',this.id,'_msg" id\x3d"',this.id,'" class\x3d"successPopupMessage globalContainer"\x3e','\x3cdiv class\x3d"hiddenAriaContent" id\x3d"',this.id,'_label"\x3e',MSGS.ECT_FLASH_MESSAGE_DIALOG_LABEL,"\x3c/div\x3e",'\x3cdiv class\x3d"successPopupMessageBG"\x3e\x3c/div\x3e\x3cdiv class\x3d"successPopupMessageText"\x3e\x3cdiv role\x3d"status" class\x3d"',
this.generateFDClasses("message-toast"),'" id\x3d"',this.id,'_msg"\x3e');this.isFioriFDEnabled()&&a.push('\x3ci class\x3d"'+Util.generateIconClasses("sys-enter-2")+' ectFlashMessageIcon"\x3e\x3c/i\x3e');a.push(this._msgText,"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e")},_onDialogRendered:function(){SFOverlayMgr.removeEventListener("overlayRendered",this);SFDom.setFocus(this.id)}})}();function ECTAbstractRoundedCorner(){}
ECTAbstractRoundedCorner.prototype=function(){return set(new Component,{_noTitle:"noTitle",_writable:!1,_writableClass:"Writable",_headerClass:"",_buttons:[],_footerButtonsDisplay:"none",_widthStyle:" ",_createFocusMarkers:function(){this._focusLoop=new SFFocusLoop(this.id+"_focusContainer");this._focusMarkers=this._focusLoop.getMarkers();this._focusLoop.disableMarkers()},setAriaRole:function(a){this._ariaRole=a},getAriaRole:function(){return this._ariaRole||"dialog"},isDialogView:setFooterButtons:function(a){this._buttons=a;if(a=juic.$(this.id+"_buttonBar")){var b=[];this.renderFooter(b);a.innerHTML=b.join("")}this._showHideMarkers()},cleanup:setFooterButtonsVisibility:function(a){this._footerButtonsDisplay=a?"block":"none";if(a=juic.$(this.id+"_buttonBar"))a.style.display=this._footerButtonsDisplay;this._showHideMarkers()},setHelpLink:function(a){this._portletId=a;window.ectMDFHelpDataMap?
this._hasHelpLink=window.ectMDFHelpDataMap[a]?!0:!1:window.HelpLinkMap&&window.HelpLinkMap[a]&&(this._hasHelpLink=!0);if(a=juic.$(this.id+"_helpLink"))a.style.display=this._hasHelpLink?"":"none"},_showHelpPopup:function(){ECTHelpPopup.show(this.id+"_helpLink",this._portletId)},_renderHelpLink:function(a){var b=this._title?MSGS.get("ECT_HELP_LINK",this._title):MSGS.ECT_HELP;a.push("\x3cspan class\x3d'globalToolbarIcon'\x3e");a.push("\x3ca id\x3d'",this.id,"_helpLink' href\x3d'javascript:void(0);' title\x3d'",
b,"' class\x3d'helpLink icon icon_help' role\x3d'button' aria-haspopup\x3d'true' onclick\x3d'",this.fireCode("_showHelpPopup"),"' style\x3d'display:none;'\x3e\x3cem class\x3d'label'\x3e\x26nbsp;\x3c/em\x3e\x3c/a\x3e\x3c/span\x3e")},setHeaderButton:function(a){this._headerButtonComponent=a;this._noTitle="";juic.$(this.id)&&this._headerButtonComponent.render(this.id+"_headerButton")},setHeaderButtonVisibility:function(a){this._headerDisplay=a?"":"none";a=juic.$(this.id);var b=juic.$(this.id+"_headerButton");
a&&b&&(b.style.display=this._headerDisplay)},setTitle:function(a){this.setTitleAsTextOrComponent(a);juic.$(this.id)&&juic.$(this.getDomIdForTitle())&&(this.isTitleAComponent()?this._title.render(this.getDomIdForTitle()):juic.$(this.getDomIdForTitle()).innerHTML=this._title)},getDomIdForTitle:function(){return this.id+"_title"},_showHideMarkers:function(){this._writable&&"block"==this._footerButtonsDisplay&&this._buttons.length?this._focusLoop.enableMarkers():this._focusLoop.disableMarkers()},hide:function(a){a&&
(this.setTitle(""),this.setComponent(""));SFDom.removeClass(juic.$(this.id),"globalRoundedCorners");juic.$(this.id).style.display="none"},show:function(){juic.$(this.id).style.display="block";SFDom.addClass(juic.$(this.id),"globalRoundedCorners")},getComponent:function(){return this._childComponent},setComponent:function(a){this._childComponent=a;juic.$(this.id)&&("string"===typeof this._childComponent?juic.$(this.id+"_contentBlock").innerHTML=this._childComponent:this._childComponent.render(this.id+
"_contentBlock"))},setWritable:function(a){var b=juic.$(this.id);this._writable=a;this._clearPendingTimeouts();if(b){SFDom.removeClass(b,"globalRoundedCorners");if(this._writable){SFDom.replaceClass(b,this._headerClass,this._headerClass+this._writableClass);AccessibilityPrefs.isLowVisionEnabled()||SFDom.replaceClass(b,"portletReadModeBG","portletWriteModeBG");var c=this;this._scheduledTimeouts.push(setTimeout(function(){c._focusLoop.enableMarkers();AccessibilityPrefs.isKeyboardOnlyNavigationEnabled()&&
c.setFocus(!1)},250))}else SFDom.replaceClass(b,this._headerClass+this._writableClass,this._headerClass),AccessibilityPrefs.isLowVisionEnabled()||SFDom.replaceClass(b,"portletWriteModeBG","portletReadModeBG");this._showHideMarkers();SFDom.addClass(b,"globalRoundedCorners")}this._scheduledTimeouts.push(setTimeout(function(){Util.repositionAllRoundedCornerElements()},250))},_clearPendingTimeouts:function(){ECTUtil.isEmptyArray(this._scheduledTimeouts)||this._scheduledTimeouts.forEach(;
this._scheduledTimeouts=[]},setEnabled:function(a){var b=juic.$(this.id);this._enabled=a;if(b){var c=b.className;classNameNew=c.replace(RegExp("Gray","g"),"");a||(classNameNew+="Gray");c!=classNameNew&&(b.className=classNameNew)}},setFocusContainer:setFocus:function(a){this._focusLoop.setFocus(a)},setWidth:function(a){assert(a&&!isNaN(a),"width must be a number");this._widthStyle=' style\x3d"width:'+a+'px;" '},handleEvent:function(a){if("setDisplay"==a.type)switch(a.actionCommand){case "show":juic.$(this.id).style.display=
"";break;case "hide":juic.$(this.id).style.display="none"}},setTitleAsTextOrComponent:function(a){this._title=(this._isTitleAComponent=a instanceof juic.Component)?a:a?ECTUtil.readonlyValueSwitch(a):"";if(this._isTitleAComponent||this._title.length)this._noTitle=""},isTitleAComponent:function(){return this._isTitleAComponent},getFDDialogContentClasses:function(){var a=[];this.isDialogView()&&a.push(this.generateFDClasses("dialog__content",["s"]));return a.join(" ")},getFDDialogHeaderClasses:function(){var a=
[];this.isDialogView()&&(a.push(this.generateFDClasses("dialog__header")),a.push(this.generateFDClasses("bar",["header"])));return a.join(" ")},getFDDialogFooterClasses:function(){var a=[];this.isDialogView()&&(a.push(this.generateFDClasses("dialog__footer")),a.push(this.generateFDClasses("bar",["footer"])));return a.join(" ")},renderHeader:function(a){},renderFooter:function(a){if(this._buttons.length){a.push('\x3cdiv class\x3d"buttons" id\x3d"',this.id,'_buttonArea"\x3e');for(var b=0,c=this._buttons.length;b<
c;b++)this._buttons[b].renderHtml(a);a.push("\x3c/div\x3e")}},renderHtml:function(a){var b=AccessibilityPrefs.isLowVisionEnabled()?" globalRoundCornerPortlet ":this._writable?" portletWriteModeBG":" portletReadModeBG",c="portletNoHeader"==this._headerClass||"portletNoHeaderWritable"==this._headerClass?" globalPortletBody":" globalPortletHeader";a.push('\x3cdiv role \x3d "',this.getAriaRole(),'" id\x3d"',this.id,'" onkeyup\x3d"',this.fireCode("_keyUpClose"),'"  class\x3d"',this.type," globalRoundedCorners ectFormContainer globalContainer ",
this._headerClass,this._writable?this._writableClass:""," ",this.getFDDialogContentClasses()," ",b,AccessibilityPrefs.isBlindnessSupportEnabled()?" ":" blindnessDisabled ",'"',this._title&&this._title.length?' aria-label\x3d"'+this._title+'"':"","\x3e");a.push('\x3cdiv class\x3d"ectFCTopHeader ',this.getFDDialogHeaderClasses()," ",this._noTitle?this._noTitle:"globalRoundedCorners",c,'"\x3e');this.renderHeader(a);a.push('\x3c/div\x3e\x3cdiv id\x3d"',this.id,'_focusContainer"\x3e',this._focusMarkers[0],
'\x3cdiv class\x3d"ectFCBody globalPortletBody ',this.generateFDClasses("dialog__body"),'" \x3e');a.push('\x3cdiv id\x3d"',this.id,'_contentBlock"\x3e');"string"===typeof this._childComponent?a.push(this._childComponent):this._childComponent.renderHtml(a);a.push('\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"buttonBar'," ",this.getFDDialogFooterClasses(),' " id\x3d"',this.id,'_buttonBar" style\x3d"display:',this._footerButtonsDisplay,'"\x3e');this.renderFooter(a);a.push("\x3c/div\x3e");a.push(this._focusMarkers[1]);
a.push("\x3c/div\x3e\x3c/div\x3e")},_keyUpClose:function(a){27==a.keyCode&&(SFOverlayMgr.removeOverlay(this.id),this.dispatch("handleCloseDialog"))}})}();function ECTRoundedCornerBox(a,b,c){this.register();this.init(a,b,c)}
ECTRoundedCornerBox.prototype=function(){return set(new ECTAbstractRoundedCorner,{_headerClass:"portletNoHeader",init:function(a,b,c){this._isFioriFD=Util.isFioriFDEnabled();this._createFocusMarkers();this.setTitleAsTextOrComponent(a);this._childComponent=b;this._childComponent.addEventListener("setDisplay",this);c&&this.setWritable(!0)},renderHeader:function(a){if(this.isTitleAComponent()||this._title.length||this._headerButtonComponent)a.push('\x3cdiv class\x3d"ectFCTitle"\x3e'),a.push('\x3cspan id \x3d "',
this.getDomIdForTitle(),'" role\x3d"heading" aria-level\x3d"2" class\x3d"pwhHeaderTitle globalHumanistText ',Util.generateClasses("ectFD","title",["bold","h4"]),'" \x3e',this._title,"\x3c/span\x3e"),a.push('\x3cspan class\x3d"headerButton" \x3e'),a.push('\x3cspan  id\x3d"',this.id,'_headerButton" class\x3d"headerButtonLinks" style\x3d"display:',this._headerDisplay,'"\x3e'),this._headerButtonComponent&&this._headerButtonComponent.renderHtml(a),a.push("\x3c/span\x3e"),this._renderHelpLink(a),a.push("\x3c/span\x3e"),
a.push("\x3c/div\x3e")}})}();function ECTRoundedCornerHeader(a,b,c,d){this.register();this.init(a,b,c,d)}
ECTRoundedCornerHeader.prototype=function(){return set(new ECTAbstractRoundedCorner,{_headerClass:"portletwithHeader",init:function(a,b,c,d){this._createFocusMarkers();this.setTitleAsTextOrComponent(a);this._childComponent=b;this._ariaRole=d;c&&this.setWritable(!0)},setMarker:function(a){var b=juic.$(this.getDomIdForTitle());b?b.innerHTML+="\x26#160;"+a:this._title=this._title+"\x26#160;"+a},renderHeader:function(a){if(this.isTitleAComponent()||this._title.length||this._headerButtonComponent)a.push('\x3cspan role\x3d"heading" aria-level\x3d"2" id\x3d"',
this.getDomIdForTitle(),'" class\x3d"pwhHeaderTitle globalHumanistText ',this.generateFDClasses("title",["h5"]),'" \x3e',this._title,"\x3c/span\x3e"),a.push('\x3cspan class\x3d"headerButton" \x3e'),a.push('\x3cspan id\x3d"',this.id,'_headerButton" class\x3d"headerButtonLinks" style\x3d"display:',this._headerDisplay,'"\x3e'),this._headerButtonComponent&&this._headerButtonComponent.renderHtml(a),a.push("\x3c/span\x3e"),this._renderHelpLink(a),a.push("\x3c/span\x3e")}})}();
function ECTAbstractGroup(a,b){this.register();this.init(a,b)}ECTAbstractGroup.PERMISSION_TYPE_READ_WRITE=0;ECTAbstractGroup.PERMISSION_TYPE_READ_ONLY=1;ECTAbstractGroup.PERMISSION_TYPE_WRITE_ONLY=2;ECTAbstractGroup.EVENT_TOGGLE_VIEW_STATE="toggleViewState";
juic.extend(ECTAbstractGroup,juic.Component,function(){return{init:function(a,b){this.meta=set({},a);delete this.meta.fieldsMeta;this.initPropertiesFromMeta(a);this.initDataStructures();this.initInstanceProperties();this.createLayout();this.setLayoutProperties();this.createFieldsFromMetaAndData(a.fieldsMeta,b,0)},initPropertiesFromMeta:function(a){this._readWriteType=this.getReadWriteTypeFromMeta(a);"number"!==typeof this._readWriteType&&(this._readWriteType=ECTAbstractGroup.PERMISSION_TYPE_READ_WRITE);
this._maxFieldsToShow=a.maxFieldsToShow||Number.MAX_VALUE;this._showDetailsLink=a.showDetailsLink;this._hideComplexFields=a.hideComplexFields;this._writable=a.writable;this._enabled=ECTUtil.isEmpty(a.disabled)?!0:a.disabled;this._propagationPreferences=a.propagationPreferences;this._elementId=a.elementId;this._userDefinedClassNames=a.classNames},getFieldsMeta:function(){ECTUtil.overrideAssert("ECTAbstractGroup#getFieldsMeta")},getReadWriteTypeFromMeta:getUserDefinedClassNames:initInstanceProperties:function(){ECTUtil.overrideAssert("ECTAbstractGroup#initInstanceProperties()")},initDataStructures:function(){ECTUtil.overrideAssert("ECTAbstractGroup#initDataStructures()")},createLayout:function(){ECTUtil.overrideAssert("ECTAbstractGroup#createLayout()")},setLayoutProperties:function(){this.setTitle(this.meta.label||this.meta.title);this.setCollapsible(this.meta.collapsible);this.setCollapsed(this.meta.collapsed);this.setMaxFieldsToShow(this._maxFieldsToShow);this.setHideComplexFields(this._hideComplexFields)},
createFieldsFromMetaAndData:function(a,b,c){ECTUtil.overrideAssert("ECTAbstractGroup#createFieldsFromMetaAndData()")},setTitle:function(a){var b=a?!0:!1;this._layout.setHasTitle(b);this._layout&&this._layout.setTitle(a);this._readLayout&&(this._readLayout.setHasTitle(b),this._readLayout.setTitle(a))},getTitle:resetTitle:function(){},setCollapsible:function(a){this._layout.setCollapsible(a);this._readLayout&&this._readLayout.setCollapsible(a)},isCollapsible:function(){return this._layout.getCollapsible()},
setCollapsed:function(a){this._layout.setCollapsed(a);this._readLayout&&this._readLayout.setCollapsed(a)},isCollapsed:function(){return this._layout.getCollapsed()},setMaxFieldsToShow:function(a){this._layout.setMaxFieldsToShow(a);this._readLayout&&this._readLayout.setMaxFieldsToShow(a)},getMaxFieldsToShow:function(){return this._layout.getMaxFieldsToShow()},setHideComplexFields:getHideComplexFields:function(){return this._layout.getHideComplexFields()},
showDetailsLink:function(a){this._showDetailsLink=a},hasDetailsLink:function(){return this._showDetailsLink},setLayoutType:function(a){this._layoutType=a;this._changeLayout(this._layout,this.id);this._readLayout&&this._changeLayout(this._readLayout,this.id+"_readLayout")},_changeLayout:function(a,b){var c=a.getFields();a.cleanup();a=ECTFieldsLayoutFactory.createLayout(this._layoutType);a.setFields(c);a.render(b)},getLayoutType:function(){return this._layoutType},setEnabled:isEnabled:function(){return this._enabled},setVisible:function(a){a?(Util.addClass(juic.$(this.id),"show"),Util.removeClass(juic.$(this.id),"hide")):(Util.addClass(juic.$(this.id),"hide"),Util.removeClass(juic.$(this.id),"show"))},isVisible:function(){return Util.hasClass(juic.$(this.id),"show")},setWritable:function(a){this._readWriteType===ECTAbstractGroup.PERMISSION_TYPE_READ_WRITE&&this.setAllFieldsWritable(a);this._writable=a},setAllFieldsWritable:function(a){var b=this.getFieldsMeta();
if(Array.isArray(b)){var c=this,d=b.length;b.forEach(function(b,f){var e=!1!==b.writable,k=!1===c._writable&&a;c._updateFieldWritableStatus(b.id,a&&e,{isLastField:f===d-1&&k})})}},setFieldWritableByMetaId:function(a,b,c){this._updateFieldWritableStatus(a,b,{isLastField:!0,isOnlyField:!0,rowIndex:c.rowIndex})},_updateFieldWritableStatus:function(a,b,c){c.fieldPlusOldValue=!0;this.updateFieldStatus(a,{writable:b},c)},getFieldByMetaId:function(a,b){ECTUtil.overrideAssert("ECTAbstractGroup#getFieldByMetaId()")},
getFieldListByMetaId:updateFieldStatus:isWritable:function(a){return this._writable},markDeleted:function(a){this._deleted=a},isDeleted:function(){return this._isDeleted},getValue:function(){ECTUtil.overrideAssert("ECTAbstractGroup#getValue()")},setValue:function(){ECTUtil.overrideAssert("ECTAbstractGroup#setValue()")},setElementId:function(a){this._elementId=
a},getElementId:setPropagationPreferences:function(a){this._propagationPreferences=a},getPropagationPreferences:function(){return this._propagationPreferences},isModified:function(){ECTUtil.overrideAssert("ECTAbstractGroup#isModified()")},reset:function(){ECTUtil.overrideAssert("ECTAbstractGroup#reset()")},validateFields:function(){ECTUtil.overrideAssert("ECTAbstractGroup#validateFields()")},validateSubmitOnChangeFields:validateField:function(a,b){var c=
a.validateFields?a:a.field;c&&(c.validateFields?(c=c.validateFields(),c.returnFlag||(b.errorMsg=b.errorMsg.concat(c.errorMsg),b.fields=b.fields.concat(c.fields)),b.returnFlag=c.returnFlag?b.returnFlag:!1):c.checkForErrors&&c.checkForErrors()&&(b.errorMsg.push(c.getErrorMsg()),b.returnFlag=!1,b.fields.push(c)))},validateSubmitOnChangeField:function(a,b,c){c=c||{};var d=a.validateSubmitOnChangeFields?a:a.field;if(d)if(d.validateSubmitOnChangeFields)a=d.validateSubmitOnChangeFields(c),a.returnFlag||
(b.errorMsg=b.errorMsg.concat(a.errorMsg),b.fields=b.fields.concat(a.fields)),b.returnFlag=a.returnFlag?b.returnFlag:!1;else if(a.meta.submitOnFieldChange&&d.checkForErrors){c=d.rowIndex&&d.rowIndex==c.rowIndex&&!a.meta.required||!1;var e=!1;c&&(ECTValidationMgr.isComponentBoundToValidator(d.id)?(e=!0,ECTValidationMgr.addValidationCriteria(d.id,"required",{message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_REQUIRED,a.meta.label)})):ECTValidationMgr.bindValidator(d,"required",{message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_REQUIRED,
a.meta.label)}));d.checkForErrors()&&(b.errorMsg.push(d.getErrorMsg()),b.returnFlag=!1,b.fields.push(d));c&&(e?ECTValidationMgr.removeValidationCriteria(d.id,"required"):ECTValidationMgr.unbindValidator(d.id))}},cleanup:}());
function ECTReadWriteForm(a,b,c){c=c||{readWriteType:ECTAbstractGroup.PERMISSION_TYPE_READ_WRITE,initialModeWritable:!0,layoutType:ECTConstants.LAYOUT_ECT_FORM,labelType:ECTConstants.LABEL_PROFILE_UPDATE};c.fieldsMeta=a;b=b||[];this._super(c,b)}ECTReadWriteForm.TYPE_READWRITE=0;ECTReadWriteForm.TYPE_READONLY=1;ECTReadWriteForm.TYPE_WRITEONLY=2;ECTReadWriteForm.FIELD_ID_STANDARD_HOURS="jobInfo-standard-hours";ECTReadWriteForm.FIELD_ID_FTE="jobInfo-fte";ECTReadWriteForm.CLASSNAME="ECTReadWriteForm";
juic.extend(ECTReadWriteForm,ECTAbstractGroup,{_alignment:ECTFormLayout.ALIGNMENT_CENTER,initPropertiesFromMeta:function(a){this._super(a);this._propagationPreferences&&this._setCurrentPropagationPrecedenceValueData({propagationPreferences:this._propagationPreferences,currentPropagationPrecedenceValueData:a.currentPropagationPrecedenceValueData});this._labelType=a.isFlowLayout?ECTConstants.LABEL_DGRID:ECTConstants.LABEL_PROFILE_UPDATE;this._initialModeWritable=a.initialModeWritable;this._isNested=
a.nestedForm||!1;this._isNested||(this._writable=this._readWriteType===ECTAbstractGroup.PERMISSION_TYPE_WRITE_ONLY?!0:this._readWriteType===ECTAbstractGroup.PERMISSION_TYPE_READ_ONLY?!1:this._initialModeWritable);this._attributes=a.attributes;this._noGlobalRoundedCorners=a.noGlobalRoundedCorners;this._alignment=a.alignment||this._alignment;this._missingFields=[]},setAlignment:function(a){this._layout&&this._layout.setAlignment&&(this._layout.setAlignment(a),this._alignment=this._layout.getAlignment())},
getAlignment:function(){return this._alignment},setWidget:function(a){this.widgetContainer=a;a=juic.createRenderContext();this.widgetContainer.renderHtml(a);var b=juic.$(this.id);b&&(b.innerHTML+=a.join(""))},getWidget:function(){return this.widgetContainer},updateMissingFields:function(a){var b=a.value;b&&b.hasOwnProperty("value")&&(a=ECTUtil.createMissingField(a),this._missingFields.push(a))},getMissingFields:function(){return this._missingFields},initInstanceProperties:function(){this._actionId=
-1;this._actionType=ECTConstants.ACTION_TYPE_ADD},initDataStructures:function(){this._dataGridField=[];this._fields=[];this._fieldMap={};this._fieldsState={}},getReadWriteTypeFromMeta:function(a){var b=this._super(a);ECTUtil.isEmpty(b)&&(b=ECTUtil.isEmpty(a.type)?ECTAbstractGroup.PERMISSION_TYPE_READ_WRITE:a.type);return b},createLayout:function(){this._layout=ECTFieldsLayoutFactory.createLayout(ECTUtil.isEmpty(this.meta.layoutType)?this.meta.isFlowLayout?ECTConstants.LAYOUT_ECT_FLOW:ECTConstants.LAYOUT_ECT_FORM:
this.meta.layoutType,{alignment:this._alignment,fontConfig:this.meta.fontConfig});this._layout.addEventListener(ECTBaseLayout.EVENT_LAYOUT_ACTION,this,"_handleLayoutAction")},setLayoutProperties:function(){this._super();window.sectionPreffViewId&&this.setCollapsible(!0)},createFieldsFromMetaAndData:_setCurrentPropagationPrecedenceValueData:function(a){a.currentPropagationPrecedenceValueData&&!window.ECTUtil.isEmptyObject(a.currentPropagationPrecedenceValueData)||
this.clonePrecedenceValuesFormMeta(a);this._precedencePropagationData=a.currentPropagationPrecedenceValueData},_reSetCurrentPropagationPrecedenceValueData:clonePrecedenceValuesFormMeta:function(a){a.currentPropagationPrecedenceValueData||(a.currentPropagationPrecedenceValueData={});for(var b in a.propagationPreferences){a.currentPropagationPrecedenceValueData[b]=[];for(var c=a.currentPropagationPrecedenceValueData[b],
d=a.propagationPreferences[b],e=0;e<d.length;e++)c.push({sourceType:d[e].sourceType,propagatedValue:d[e].propagatedValue})}},setActionType:function(a){this._actionType=a},getActionType:function(){return this._actionType},setActionId:function(a){this._actionId=a},getActionId:function(){return this._actionId},getUploadFileField:function(){return this._uploadFileField},_createForm:function(a,b){if(0>=a.fieldsMeta.length)return null;var c=[],d=a.isFlowLayout?ECTConstants.LAYOUT_ECT_FLOW:ECTConstants.LAYOUT_ECT_FORM;
c.push(new ECTReadWriteForm(a.fieldsMeta,b.fieldsData,{nestedForm:!0,title:a.label,layoutType:d,labelType:d==ECTConstants.LAYOUT_ECT_FLOW?ECTConstants.LABEL_DGRID:ECTConstants.LABEL_PROFILE_UPDATE,readWriteType:this._readWriteType,initialModeWritable:this._initialModeWritable,propagationPreferences:this._propagationPreferences,currentPropagationPrecedenceValueData:this._precedencePropagationData,id:a.id}));for(var d=0,e=b.fieldsData.length;d<e&&!ECTUtil.getValueFromData(b.fieldsData[d]);d++);this._isEmptyData(b.fieldsData)&&
(c.push(new ECTEmptySectionInfo(a.label,!1,!0)),c[0].setAsEmptyForm());return c},_isEmptyData:function(a){for(var b=0,c=a.length;b<c;b++)if(ECTUtil.getValueFromData(a[b])||a[b].encryptedValue)return!1;return!0},_createLabel:function(a){return ECTConstants.HIDE_LABEL_BY_TYPES[a.type]?null:ECTUtil.createLabel(a.labelType||this._labelType,a.label,a.required,a.payComponents,a.id)},_createField:function(a,b){return new ECTFieldPlusOldValue(b,a)},_createReadWriteFields:function(a,b,c){c=c||0;for(var d,
e=0,f=a.length;e<f;++e,++c){var g=a[e];this._isNested&&!1===this.meta.writable&&(g.writable=g.writable&&this.meta.writable);var k=b[e]||{defaultValue:"",value:"",id:g.id};"payGroup"===g.type&&(g.labelType=ECTConstants.LABEL_WITH_TOOLTIP);var l=null,m;this._fieldsState[g.id]=0;if(g.type==ECTConstants.TYPE_FIELDSGROUP)l=this._createForm(g,k),null!==l&&(this._fields.splice(c,0,{label:null,field:l[0],meta:g}),this._fieldMap[g.id]=l[0],this._fieldMap[g.id]&&(g=this._fieldMap[g.id],g.addEventListener(ECTConstants.EVENT_CHANGE,
this),g.addEventListener(ECTConstants.EVENT_ACTION,this),g.addEventListener(ECTAbstractGroup.EVENT_TOGGLE_VIEW_STATE,this,"dispatchEvent")),this._layout.addField(null,l,{mergeCells:!0,position:c}));else if(g.type==ECTConstants.TYPE_DATAGRID||g.type==ECTConstants.TYPE_LAZYDATAGRID||g.type==ECTDataGridWithDetails.FIELD_TYPE||g.type==ECTConstants.TYPE_PAGINATEDDATAGRID){this._layoutType=g.type;juic.set(g,{propagationPreferences:this._propagationPreferences,attributes:this._attributes,noGlobalRoundedCorners:this._noGlobalRoundedCorners});
g.showDetailsLink=this._showDetailsLink;k=(b[e]?ECTUtil.getValueFromData(b[e]):ECTUtil.getValueFromData(b))||[];m=new ECTFieldPlusOldValue(k,g);m.addEventListener(ECTConstants.EVENT_CHANGE,this);m.addEventListener(ECTConstants.EVENT_ACTION,this);m.addEventListener(ECTAbstractGroup.EVENT_TOGGLE_VIEW_STATE,this,"dispatchEvent");this._fields.splice(c,0,{label:l,field:m,meta:g});this._fieldMap[g.id]=m;var n=[m];k.length||g.noEmptySection||(n.push(new ECTEmptySectionInfo(g.label,!1,!0)),n[0].field.setAsEmptyForm());
this._layout.addField(l,n,{mergeCells:!0,position:c});this._dataGridField.push(m.field)}else{"undefined"===typeof g.writable&&(g.writable=this._writable);l=this._createLabel(g);this._readWriteType===ECTAbstractGroup.PERMISSION_TYPE_READ_ONLY&&(g.writable=!1);(g.type===ECTConstants.TYPE_FOUNDATION_AUTOCOMPLETE||ECTConstants.COMPLEX_FIELDS[g.type]||"USER"==g.type)&&juic.set(g,{propagationPreferences:this._propagationPreferences,currentPropagationPrecedenceValueData:this._precedencePropagationData});
if(m=this._createField(g,k))this._cascadePicklistManager||(this._cascadePicklistManager=new ECTCascadePicklistManager(a),d=this._cascadePicklistManager.prepareData(b)),this._cascadePicklistManager&&ECTUtil.isEmptyObject(d)&&this._cascadePicklistManager.registerPicklist(m,g,k);g.type===ECTFileUploadDownload.FILED_TYPE&&(this._uploadFileField={meta:g,field:m});m.addEventListener(ECTConstants.EVENT_CHANGE,this);m.addEventListener(ECTConstants.EVENT_ACTION,this);this._fields.splice(c,0,{label:l,field:m,
meta:g});this._fieldMap[g.id]=m;k=ECTConstants.COMPLEX_FIELDS[g.type]?!0:!1;g=g.type!==ECTConstants.TYPE_CASCADE||g.hasMultiple?!1:!0;this._layout.addField(l,m,{mergeCells:k,hideSpacer:g,position:c})}}},_changeLayout:function(a,b){this._super(a,b);this.setAlignment(this._alignment)},setValue:function(a,b,c){c=c||{};for(var d=0,e=a.length;d<e;d++){var f=a[d];if(f){var g=null;f.additionalMetaAndData&&(g=f.additionalMetaAndData,f=f.fieldData);f.defaultValue&&f.defaultValue.length&&f.defaultValue[0].fieldValue&&
f.defaultValue[0].fieldValue.length&&f.defaultValue[0].fieldValue[0]&&(g=f.defaultValue[0].fieldValue[0].additionalMetaAndData);if(f&&f.id){var k=this.getFieldByMetaId(f.id,{fieldPlusOldValue:!0});if(k){var l=ECTUtil.getValueFromData(f);if(k.field instanceof ECTDataGrid)k.field[b?"mergeValue":"reloadWithData"](l);else k.field.setValue&&(k.field.setValue(l,b),k.setSecurityToken&&k.setSecurityToken(f.st));k.field.isModified&&"function"==typeof k.field.isModified&&(this._fieldsState[f.id]=k.field.isModified()?
1:0);g&&MDFAdditionalMetaHandler.handleAdditionalMetaResponse({metaId:k.meta.id,parent:c.parent||this,field:k,rowIndex:c.rowIndex},g)}}}}},validateFields:function(a){return this._forEachFieldConditionalValidation("validateField",a)},validateSubmitOnChangeFields:function(a){return this._forEachFieldConditionalValidation("validateSubmitOnChangeField",a)},_forEachFieldConditionalValidation:function(a,b){juic.assert(a,"ectReadWrite._forEachFieldConditionalValidation: parameter should be a function.");
for(var c={errorMsg:[],returnFlag:!0,fields:[]},d=0,e=this._fields.length;d<e;d++){var f=this._fields[d].field;if(f&&(!b||f.meta&&b==f.meta.id))this[a](f,c)}return c},reset:function(){if(this._readWriteType!==ECTAbstractGroup.PERMISSION_TYPE_READ_ONLY){this.markModified(!1);for(var a=0,b=this._fields.length;a<b;++a){var c=this._fields[a].field;c&&(c.reset(),c.hideErrorMessage(),c.hideInfoMessage&&c.hideInfoMessage())}}},_getFieldsByMetaId:function(a,b){var c=this._fieldMap[a],d=null;if(c)d=ECTUtil.searchForFieldsByMetaId(c,
a,b)||[c];else for(var c=0,e=this._fields.length;c<e&&!d;c++)d=ECTUtil.searchForFieldsByMetaId(this._fields[c].field,a,b);ECTUtil.isEmpty(d)?d=b.multiple?[]:null:(d=Array.isArray(d)?d:[d],d=b.multiple?d:d[0]);return d},getFieldByMetaId:function(a,b){var c=juic.set({},b);c.multiple=!1;return this._getFieldsByMetaId(a,c)},getFieldListByMetaId:function(a,b){var c=juic.set({},b);c.multiple=!0;return this._getFieldsByMetaId(a,c)},getWriteFieldByMetaId:function(a){return this.getFieldByMetaId(a)},getFieldMap:function(){return this._fieldMap},
getFieldsMeta:function(){var a=[],b;for(b in this._fieldMap)this._fieldMap.hasOwnProperty(b)&&a.push(this._fieldMap[b].meta);return a},displayErrorMessage:function(a,b,c){if(this._readWriteType===ECTAbstractGroup.PERMISSION_TYPE_READ_ONLY)return!1;if(b=this.getFieldByMetaId(b)){if(c&&b.field.id!==c)return!1;b.setErrorMsg?b.setErrorMsg(a):b.displayErrorMessage(a);return!0}return!1},hideErrorMessage:function(){if(this._readWriteType!==ECTAbstractGroup.PERMISSION_TYPE_READ_ONLY)for(var a=0,b=this._fields.length;a<
b;++a)this._fields[a].field.hideErrorMessage()},isWritable:function(){return this._writable},_getClassName:function(){var a=this.getUserDefinedClassNames();return(this._isNested?"":(this._writable?"write":"read")+"Mode")+(this._isFormEmpty?" emptyForm":"")+(a?" "+a:"")},setLayoutWritable:function(a){this._writable=a;if(this._readWriteType===ECTAbstractGroup.PERMISSION_TYPE_READ_WRITE){var b=juic.$(this.id);!this._isNested&&b&&(b.className=this._getClassName());for(var b=0,c=this._dataGridField.length;b<
c;b++)this._dataGridField[b].updateifNested&&this._dataGridField[b].updateifNested()}(b=this.getFieldByMetaId("jobInfo-workschedule-code"))&&b.dispatch("toggleWritableState",{writable:a})},setWritable:function(a){this._super(a);this.setLayoutWritable(a)},markModified:function(a){if(this._readWriteType!==ECTAbstractGroup.PERMISSION_TYPE_READ_ONLY){a=a?1:0;for(var b in this._fieldsState)this._fieldsState[b]=a}},isModified:function(){if(this._readWriteType===ECTAbstractGroup.PERMISSION_TYPE_READ_ONLY)return!1;
for(var a in this._fieldsState)if(this._fieldsState[a])return!0;return!1},makeItNew:function(){for(var a=0,b=this._fields.length;a<b;++a){var c=this._fields[a].field;c&&c.makeItNew&&c.makeItNew()}},undoMakeItNew:function(){for(var a=0,b=this._fields.length;a<b;++a){var c=this._fields[a].field;c&&c.undoMakeItNew&&c.undoMakeItNew()}},getValue:function(a,b){for(var c=[],d=0,e=this._fields.length;d<e;++d){var f=this._fields[d].field,g=this._fields[d].meta;f&&(!a||f.isModified&&f.isModified())&&(f=b&&
f.getValueObj?f.getValueObj(a):f.getValue(a,b),g.type===ECTConstants.TYPE_PAGINATEDDATAGRID&&(g.type=ECTConstants.TYPE_DATAGRID),c.push({id:g.id,value:f,type:g.type,group:g.group}))}return c},setDisplayOrderIndex:function(a){this._displayIndex=a},renderHtml:function(a){a.push("\x3cdiv id\x3d'",this.id,"' class\x3d'"+this._getClassName()+"'\x3e");this.renderInnerHtml(a);a.push("\x3c/div\x3e")},renderInnerHtml:function(a){this._layout.renderHtml(a)},setAsEmptyForm:function(){this._isFormEmpty=!0},_updateFieldState:_updateFTEField:function(a){if(a){var b=this.getFieldByMetaId(ECTReadWriteForm.FIELD_ID_FTE,{fieldPlusOldValue:!0});if(b){var c=this._getPrecedencePropagations(ECTReadWriteForm.FIELD_ID_STANDARD_HOURS,{});(a=ECTUtil.toDBString(a.getValue()))&&c.value&&0!=c.value?(c=ECTUtil.toDBString(c.value),c=this._calculateFTE(a,c),b.setValueAndDispatchChange(ECTUtil.toLocalNumber(c))):b.setValueAndDispatchChange("")}}},_calculateFTE:function(a,b){var c="";isNaN(a)||isNaN(b)||(c=a/b);
return c},_handleLayoutAction:function(a){switch(a.actionCommand){case ECTBaseLayout.ACTION_STATE_CHANGE:this.dispatch(ECTAbstractGroup.EVENT_TOGGLE_VIEW_STATE,{viewState:this.isCollapsed(),metaId:this.meta.id,displayIndex:this._displayIndex})}},handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_CHANGE:this._updateFieldState(a.target.meta.id,a.actionCommand===ECTConstants.EVENT_FIELD_CHANGE||a.actionCommand===ECTConstants.EVENT_FORM_FIELD_CHANGE?1:0);a.target.meta&&a.target.meta.id==ECTReadWriteForm.FIELD_ID_STANDARD_HOURS&&
this._updateFTEField(a.target);a.formId=this.id;a.propagationInfo&&this.setPropagationInfo({searchElement:a.searchElement,propagations:a.propagationInfo});a.dependentFields&&this.clearDependentFields(a.dependentFields);if("jobInfo-time-recording-variant"===a.metaId){var b=this.getFieldByMetaId("jobInfo-workschedule-code");b&&b.setTimeRecordingVariant(a.value)}this.dispatch(ECTConstants.EVENT_CHANGE,juic.set(a,{actionCommand:this.isModified()?ECTConstants.EVENT_FORM_FIELD_CHANGE:ECTConstants.EVENT_FORM_FIELD_UNCHANGE}));
break;case ECTConstants.EVENT_ACTION:b=!0;switch(a.actionCommand){case ECTConstants.EVENT_GET_CONTEXTUAL_SEARCH_FIELDS:a.fields&&(b=a.searchElement||a.target,this.dispatchEvent(a),this.setContextualSearchInfo(a.fields,b),b=!1);break;case ECTConstants.EVENT_SHOW_DETAIL:a.writable=this._writable;break;case ECTCommonFileUpload.GET_ECT_ATTACHMENT_CONTEXT:a.attachmentComponent.setMetaId()}b&&this.dispatchEvent(a)}},setFieldVisible:function(a,b,c){c=c||{};if(this._layout.setFieldVisible)if("string"==typeof a)for(var d=
0,e=this._fields.length;d<e;++d){if(this._fields[d].meta.id==a){this._layout.setFieldVisible(d,b,c);break}}else a<this._fields.length&&this._layout.setFieldVisible(a,b,c)},setFieldWritable:function(a){var b,c,d;if("string"==typeof a)for(var e=0,f=this._fields.length;e<f;++e){if(this._fields[e].meta.id==a){d=this._fields[e].field;b=this._fields[e].field.field.id;c=this._fields[e].label.id;break}}else a<this._fields.length&&(b=this._fields[a].field.field.id,c=this._fields[a].label.id);a=juic.$(b+"_read");
b=juic.$(b+"_fieldFocusMark");Util.addClass(juic.$(d.id),"writeFieldOnReadForm");Util.addClass(juic.$(c),"writeLabelOnReadForm");this._switchReadWriteClass(a);this._switchReadWriteClass(b)},getLabelForField:function(a){a=a.metaId||a.field.metaId||a.meta&&a.meta.id;for(var b,c=0,d=this._fields.length;c<d;++c)if(b=this._fields[c],b.meta&&(b=b.meta.metaId||b.meta.id,b===a))return this._fields[c].label},getFieldFromFieldMap:refreshChildrenOptionsIfParentPicklist:function(a){return(a=
this._fieldMap[a])?(this._cascadePicklistManager.refreshChildrenFromExternalSource(a),!0):!1},updateFieldStatus:function(a,b,c){var d=this._fieldMap[a];if(d){d instanceof ECTReadWriteForm&&(d.field=d,d.metaId=a);var e=this.getLabelForField(d);ECTUtil.updateFieldStatus(d,b,this,c,e);c.isLastField&&this._layout.repaint()}else for(var d=0,f=this._fields.length;d<f;d++){var g=this._fields[d].field.field;if(g&&g.getFieldByMetaId&&g.getFieldByMetaId(a)){g instanceof ECTFieldWithCustomContext&&(e=this.getLabelForField(g));
g.updateFieldStatus(a,b,c,e);g instanceof ECTFieldWithCustomContext&&c.isLastField&&this._layout.repaint();break}}},repaintSingleField:function(a){this._layout.repaintSingleField(a)},_switchReadWriteClass:function(a){Util.hasClass(a,"readComp")?(Util.removeClass(a,"readComp"),Util.addClass(a,"writeComp")):Util.hasClass(a,"writeComp")&&(Util.removeClass(a,"writeComp"),Util.addClass(a,"readComp"))},_cleanReadWriteField:function(a){var b=a.label,c=a.field;b&&(b.cleanup(),delete a.label);c&&(c.cleanup&&
c.cleanup(),delete a.field);delete a.meta},cleanup:function(){for(var a=this,b=function(b){return function(){a._cleanReadWriteField(b)}},c=0,d=this._fields.length;c<d;++c){var e=this._fields[c],a=this;setTimeout(b(e),0)}this._layout.cleanup();this.unregister()},handleError:function(a){for(var b in a.field)this.displayErrorMessage(a.field[b],b)},setContextualSearchInfo:function(a,b){if(a){for(var c={},d=0;d<a.length;){var e=a[d],f=this.getFieldByMetaId(e);f?(a.splice(d,1),c[e]=f.getValue()):d++}b.setContextualSearchInfo&&
b.setContextualSearchInfo(c)}},_updatePortletPropagationsPrecedencePreference:function(a,b,c){if(a&&b&&(a=this._precedencePropagationData&&this._precedencePropagationData[a]))for(var d=0,e=a.length;d<e;d++)if(a[d].sourceType==b){a[d].propagatedValue=c;break}},_getPrecedencePropagations:function(a,b){var c=this._precedencePropagationData&&this._precedencePropagationData[a];if(c)for(var d=0,e=c.length;d<e;d++)if(!ECTUtil.isEmpty(c[d].propagatedValue)){b.value=c[d].propagatedValue;break}return b},setPropagationInfo:function(a){var b=
0,c,d=null;a.propagations?(c=a.propagations,d=a.searchElement.getSearchType()):c=a;for(;b<c.length;){a=c[b];var e=a.id,f=this._getFieldsByMetaId(e,{multiple:!1,fieldPlusOldValue:!0});f&&"undefined"!=typeof a.value?(this._updatePortletPropagationsPrecedencePreference(e,d,a.value),a=this._getPrecedencePropagations(e,a),c.splice(b,1),f.setValueAndDispatchChange(a.value)):b++}},clearDependentFields:function(a){for(var b=0;b<a.length;){var c=this._getFieldsByMetaId(a[b],{multiple:!1,fieldPlusOldValue:!1});
c?(a.splice(b,1),c.getValue()&&c.validate()):b++}},setFocus:function(){if(!ECTUtil.isEmptyArray(this._fields))for(var a=0;a<this._fields.length;a++){var b=this._fields[a];if(b.field&&b.field.setFocus&&b.field.meta&&b.field.meta.writable){b.field.setFocus(!0);break}}}});
window.ECTUtil=function(){return set({},{clone:function(a,b){for(var c in b){var d=b[c],e=a[c];d&&"object"==typeof d&&!Array.isArray(d)&&e?this.clone(e,d):!d||"object"!=typeof d||Array.isArray(d)||e?a[c]=d:(a[c]={},this.clone(a[c],d))}return a},setAriaRole:function(a,b){a&&"function"===typeof a.setAriaRole&&a.setAriaRole(b)},isSecureURL:function(a){return a.match(/javascript/gi)||a.match(/www\./gi)||a.match(/\:/gi)||a.match(/http\:{0,}/gi)||0!=a.indexOf("/")?!1:!0},appendStingToItemInArray:function(a,
b){a=b+" - "+a.join("-::-"+b+" - ");return a.split("-::-")},toDBString:function(a){a+="";var b,c;return 0<a.length?(decimalFormatSymbols.decimalSeparator&&(c=new RegExp("\\"+decimalFormatSymbols.decimalSeparator,"gi")),decimalFormatSymbols.groupingSeparator&&(b=new RegExp("\\"+decimalFormatSymbols.groupingSeparator,"gi")),a=b?a.replace(b,""):a,c&&(a=a.replace(c,".")),a):""},toLocalNumber:isMac:
isiOs:formatDate:function(a){a=new Date(a);assert("Invalid Date"!==a.toString(),"invalid date format");return dateFormatSymbols.months[a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()},formatDateForCalendar:function(a){a=new Date(a);assert("Invalid Date"!==a.toString(),"invalid date format");return(new DateFormat(ECTConstants.SERVER_DATE_FORMAT,null,null,ECTConstants.GREGORIAN)).format(a)},getObsoleteValue:function(a,
b){if("string"===typeof a||"string"===typeof b)return a===b?null:b;if(a&&a.constructor===Array||b&&b.constructor===Array){a=a||[];b=b||[];if(0==a.length)return 0==b.length?null:b;if(0==b.length)return null;for(var c=[],d=0,e=b.length;d<e;d++){for(var f=!0,g=0,k=a.length;g<k;g++)if(b[d].value===a[g].value){f=!1;break}f&&c.push(b[d])}return 0==c.length?null:c}if("object"===typeof a&&"object"===typeof b){if(dump(a)!=dump(b))return b}else return a!==b?b:null},createLabel:function(a,b,c,d,e){switch(a){case ECTConstants.LABEL_ECT:return new ECTLabel(b,
c);case ECTConstants.LABEL_SIMPLE:return new ECTSimpleLabel(b,c);case ECTConstants.LABEL_WITH_TOOLTIP:return new ECTLabelWithGroupCalcTooltip(b,d,{required:c,id:e});case ECTConstants.LABEL_DGRID:return new ECTLabelDgrid(b,c);default:return new ECTLabelProfileUpdate(b,c)}},createMissingField:function(a){var b={};b.id=a.id;b.value=a.value.value;b.value&&b.value.id&&(b.value=b.value.id);return b},getLabelsMeta:function(a,b){b=b||[];var c=0,d=0;if(a.type==ECTConstants.TYPE_CASCADE){if(b.push(a),a.cascadeChildren){for(var e=
0,f=a.cascadeChildren.length;e<f;e++){var g=a.cascadeChildren[e].fieldsMeta;g&&g.length>c&&(c=g.length,d=e)}c=a.cascadeChildren[d].fieldsMeta;d=0;for(e=c.length;d<e;d++)c[d].type==ECTConstants.TYPE_CASCADE?ECTUtil.getLabelsMeta(c[d],b):b.push(c[d])}}else a.type==ECTConstants.TYPE_INVOKE_CHANGE&&b.push(a);return b},convertToArray:function(a){if(a&&a.constructor!==Array){var b=[];b.push(a);return b}return a||[]},searchForFieldsByMetaId:function(a,b,c){c=c||{};if(!a)return null;a instanceof ECTAbstractGroup&&
(a.field=a);var d=null;if(a.field&&a.field.getFieldByMetaId){var e;c.multiple?(e=a.field.getFieldListByMetaId(b,c),Array.isArray(e)&&0===e.length&&(e=null)):e=a.field.getFieldByMetaId(b,c);e&&(d=e)}a instanceof ECTReadWriteForm||d||!a.meta||b!==a.meta.id||(d=c.fieldPlusOldValue?a:a.field);return d?(a=this.isArray(d.constructor),c.multiple?a?d:this.convertToArray(d):a?d[0]:d):null},isEmptyObject:isEmptyArray:function(a){return!a||
!this.isArray(a)||!a.length},isEmpty:getValueFromData:function(a){a=ECTUtil.isEmpty(a)?"":"undefined"===typeof a.defaultValue?a:null===a.defaultValue?"":a.defaultValue;return"object"===typeof a&&"undefined"!==typeof a.value?a.value:"object"===typeof a&&"object"===typeof a.fieldData?ECTUtil.getValueFromData(a.fieldData):a},isJSON:function(a){if(!a||"string"===typeof a&&-1===a.indexOf("{"))return!1;try{return"object"==typeof eval("("+a+")")}catch(b){return!1}},
parseJSON:function(a,b){b||assert("string"===typeof a,"parseJSON takes only a string as an argument");try{return JSON.parse(a)}catch(c){return(new Function("return "+a))()}},getConsumableValue:function(a){try{return ECTUtil.parseJSON(a,!0)}catch(b){return a}},isArray:isFunction:readonlyValueSwitch:function(a,b){return(b?a:Util.escapeHTML(a,"\x3cbr/\x3e")).replace(/\s{2,}/ig,},dimExternalCode:function(a,b){return"string"!=typeof a?"":(b?a:Util.escapeHTML(a)).replace(/(\([^)]*?\))$/,"\x3cspan class\x3d'externalCode' \x3e$1\x3c/span\x3e")},buildURLQueryString:function(a){var b=[],c;for(c in a){var d=a[c];"undefined"!==typeof d&&null!==d&&b.push([encodeURIComponent(c),"\x3d",encodeURIComponent(d)].join(""))}return b.join("\x26")},convertArrayToMap:function(a){if(a){for(var b={},c=0,d=a.length;c<d;c++)b[a[c].meta.id]=a[c];return b}},convertMapToArray:overrideAssert:function(a){juic.assert(!1,"Override "+(a||"method")+" in the extended class")},getComponentById:getFieldSetWritableFunc:function(a){var b=null;ECTUtil.isFunction(a.switchMode)?b=a.switchMode:ECTUtil.isFunction(a.setWritable)&&(b=a.setWritable);return b},updateFieldStatus:function(a,b,c,d,e){b=b||{};d=d||{};d.doNotModifyDom=!0;if(!ECTUtil.isEmpty(b.writable)){var f=ECTUtil.isFunction(a.field.isWritable)&&
a.field.isWritable();b.writable&&!f&&ECTUtil.isFunction(a.field.bindValidatorsBasedOnNewMeta)&&a.field.bindValidatorsBasedOnNewMeta(a.meta);f=ECTUtil.getFieldSetWritableFunc(a.field);null!==f&&f.call(a.field,b.writable)}if(!ECTUtil.isEmpty(b.visibility))switch(b.visibility){case "view":c.setFieldVisible(a.field.metaId,!0,d);a.field.isWritable()&&a.field.setWritable(!1);break;case "both":c.setFieldVisible(a.field.metaId,!0,d);a.field.isWritable()||a.field.setWritable(!0);break;case "none":c.setFieldVisible(a.field.metaId,
!1,d),a.field.setWritable(!1)}ECTUtil.isEmpty(b.required)||(c=a.meta,c.required=b.required,ECTUtil.isFunction(a.field.bindValidatorsBasedOnNewMeta)&&a.field.bindValidatorsBasedOnNewMeta(c),e&&e.setRequired(b.required))},resizePopup:function(a){a=a||{};var b=a.containerId,c=a.componentId;if(b&&c){a=a||{};a.vOffset="undefined"!==typeof a.vOffset?a.vOffset:150;a.hOffset="undefined"!==typeof a.hOffset?a.hOffset:250;a.minWidth="undefined"!==typeof a.minWidth?a.minWidth:400;a.minHeight="undefined"!==typeof a.minHeight?
a.minHeight:300;a.hPaddingOffset="undefined"!==typeof a.hPaddingOffset?a.hPaddingOffset:30;var d=juic.$(b),c=juic.$(c),e;if(c&&d){var f=SFDom.getViewportHeight()-a.vOffset;e=SFDom.getViewportWidth()-a.hOffset;var g=a.minWidth,k=a.minHeight;a=a.hPaddingOffset;c.offsetWidth>e?(SFDom.setStyle(c,"width",e+"px"),SFDom.setStyle(d,"width",e+a+"px")):c.offsetWidth<g?(SFDom.setStyle(c,"width",g+"px"),SFDom.setStyle(d,"width",g+a+"px")):document.getElementsByClassName("globalPlacemat")&&document.getElementsByClassName("globalPlacemat").length&&
document.getElementsByClassName("globalPlacemat")[0].style&&document.getElementsByClassName("globalPlacemat")[0].style.width?(e=document.getElementsByClassName("globalPlacemat")[0].style.width.split("px")[0],SFDom.setStyle(d,"width",.75*parseInt(e)+a+"px"),SFDom.setStyle(c,"width",.75*parseInt(e)+"px")):(SFDom.setStyle(d,"width",c.offsetWidth+a+"px"),SFDom.setStyle(c,"width",c.offsetWidth+"px"));c.offsetHeight>f?SFDom.setStyle(c,"height",f+"px"):c.offsetWidth<k?SFDom.setStyle(c,"height",k+"px"):SFDom.setStyle(c,
"height",c.offsetHeight+"px");SFOverlayMgr.centerComponent(b)}}},getRedTextColor:function(){return AccessibilityPrefs.getLowVisionType()==AccessibilityPrefs.LOWVISION_DARK?"redTextOnDark":"redText"},constructMDFURLParams:function(a){var b=[],c;for(c in a)b.push(c+"\x3d"+a[c]);return"#"+b.join("\x26")},declareECNameSpaceForMDF:function(a){window.module=window.module||{};window.module.ec=window.module.ec||{ui:{}}},escapeServerErrorMsgs:function(a){for(var b=a&&a.global||[],c=0,d=b.length;c<d;c++)a.global[c]=
Util.escapeHTML(b[c]);return a}})}();var Callback=function(a,b,c){assert(a,'[Callback] parameter "obj" must be valid JavaScript object');assert(b instanceof Function||"function"===typeof b,'[Callback] parameter "func" must be valid JavaScript function');this._obj=a;this._func=b;this._paramsArray=c};Callback.prototype={exec:function(a){return this._func.apply(this._obj,a||this._paramsArray)},toString:;var CallbackQueue=function(){this._queue=[]};
CallbackQueue.prototype={push:function(a,b){assert(a instanceof Callback,'[CallbackQueue: push] parameter "callback" must be  instance of Callback');this._queue.push({callback:a,persist:b});return this},process:function(a){for(var b=[];this._queue.length;){var c=this._queue.shift(),d;c&&c.callback&&(d=c.callback,c.persist&&b.push(c),a?setTimeout(d),0):d.exec())}0<b.length&&(this._queue=b)},size:function(){return this._queue.length},clear:;function ECTAbstractInputField(){}
juic.extend(ECTAbstractInputField,juic.Component,{_readOnlyClass:"readonly",helpIconClass:"",_isDropDownToggleClick:!1,getPreviousValue:updatePreviousValue:_initByDefaultMetaValue:function(a){var b=this._value?this.getValue():this._value;!a||ECTUtil.isEmpty(a.defaultValue)||""===a.defaultValue||!ECTUtil.isEmpty(b)&&""!==b||(this._oldValue=this._prevValue=a.defaultValue,this.setValue(a.defaultValue),this._defaultedWithMetaValue=
!0)},initByDefaultMetaValue:unregister:function(){ECTValidationMgr.unbindValidator(this);this._callOut.hide();this._sfError.unregister();this._callOut.unregister();this._super()},register:function(){this._super();this._prepareForUse()},handleEvent:function(a){},_prepareForUse:function(){this._sfError=new ECTInlineError("",!AccessibilityPrefs.isBlindnessSupportEnabled());this._sfError.addEventListener("clickonError",this);this._hasError=
!1;this._errorMsg="";this._callOut=new SFCalloutPopup({originOptions:{direction:this.isFioriFDEnabled()?"bottom":"top"},width:250,closeOnClick:!1,closeOnMouseout:!1,role:"tooltip"});this._onChangeParams={};this._callOut.setType("revolutionPanel revolutionCallout ectErrorPopup");this._callOut.setContent(this._sfError)},getSfError:function(){this._sfError||(this._sfError=new ECTInlineError("",!AccessibilityPrefs.isBlindnessSupportEnabled()),this._sfError.addEventListener("clickonError",this));return this._sfError},
getCalloutInstance:function(){return this._callOut},getCallout:function(){this._callOut||(this._callOut=new SFCalloutPopup({originOptions:{direction:"top"},width:250,closeOnClick:!1,closeOnMouseout:!1,role:"tooltip"}),this._callOut.setType("revolutionPanel revolutionCallout ectErrorPopup"),this._callOut.setContent(this.getSfError()));return this._callOut},isWritable:function(){return this._writable},isWriteOnly:function(){return this._writeOnly},setWritable:function(a){this._writable=a;this._link&&
(this._link._writable=a);this.updateReadOnlyClassName()},bindValidatorsBasedOnNewMeta:function(a){ECTValidationMgr.unbindValidator(this);this.bindCommonValidators&&this.bindCommonValidators(a);this.bindValidators&&this.bindValidators(a)},switchMode:function(a){this.setWritable(a);this._applyClassNameByMode(a)},_applyClassNameByMode:function(a){var b=juic.$(this.id+"_fieldFocusMark"),c=juic.$(this.id+"_read");a?(b&&SFDom.replaceClass(b,"ectFieldhide","ectFieldshow"),c&&SFDom.replaceClass(c,"ectFieldshow",
"ectFieldhide")):(b&&SFDom.replaceClass(b,"ectFieldshow","ectFieldhide"),c&&SFDom.replaceClass(c,"ectFieldhide","ectFieldshow"))},setWriteOnly:function(a){this._writeOnly=a},setErrorMsg:function(a){this._sfError.setValue(a);this._errorMsg=a;this._hasError=!!a;this._updateWrapperClassName();this.dispatch("fieldError",{hasError:this._hasError})},getErrorMsg:function(){return this._errorMsg},getReferenceId:function(){return this.id+"_write"},_getWrapperClassName:function(){var a=this._componentType&&
-1<this._componentType.indexOf("comboBox")&&!this._ectFindUserFieldNotCombobox,b=this.generateFDClasses("popover__control"),c=this.generateFDClasses("input-group",["control"]),d=["writeComp","ectFormFieldFocusMark"],e=["ectFormFieldBorder","globalRoundedCorners"];this._componentType&&d.push(this._componentType);this._focusFlag?d.push("ectFormFieldUserFocus globalRoundedCorners "):d.push(this._getFontColor());this._hasError&&e.push("ectFormFieldHasError");a&&(d.push(b),e.push(c));return[d.join(" "),
e.join(" ")]},_updateWrapperClassName:function(){var a=juic.$(this.id+"_fieldFocusMark"),b=juic.$(this.id+"_fieldborder");if(a&&b){var c=this._getWrapperClassName();a.className=c[0];b.className=c[1];this._applyClassNameByMode(this.isWritable());(a=a.getElementsByClassName("hiddenAriaContent")[1])&&"status"===a.getAttribute("role")&&-1!=c[0].indexOf("fieldLoading")?a.innerHTML=MSGS.COMMON_loading:a&&a.innerHTML===MSGS.COMMON_loading&&(a.innerHTML="")}},setFontConfig:updateReadOnlyClassName:function(){this._readOnlyClass="readonly"+(this._writable?" readComp":" read_only");this._fontConfig&&this._fontConfig.value&&(this._readOnlyClass+=" "+ECTFontConfig.getClassNames(this._fontConfig.value))},_getFontColor:function(){return this._title&&this._value===this._title||this.dateformatter&&this._value===MSGS.COMMON_DateFormatExample||""===this._value?"writeFieldBlank":this.isModified()?"writeFieldChange":"writeFieldUnchange"},isModified:function(){return!0},
getValue:function(){return this._value},resetError:function(){this.setErrorMsg("");this._callOut.hide();this._hasError=!1},checkForErrors:function(){var a=ECTValidationMgr.validate(this);a&&!a.result?(this._errorMsg=a.message,this._hasError=!0,this.updateAttribute("aria-invalid",!0,!0)):(this._errorMsg="",this._hasError=!1,this._callOut.hide(),this.removeAttribute("aria-invalid",!0));this.setErrorMsg(this._errorMsg);return this._hasError},_change:function(){var a=this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:
ECTConstants.EVENT_FIELD_UNCHANGE;this.dispatch(ECTConstants.EVENT_CHANGE,set(this._onChangeParams,{actionCommand:a}))},isFocus:function(){return this._focusFlag},setOnChangeParams:function(a){this._onChangeParams=a},setEnabled:function(a){this._enabled=a},isEnabled:function(){return this._enabled},setFocus:function(a){0==arguments.length&&(a=!0);this._errorHideTimer&&clearTimeout(this._errorHideTimer);a&&SFDom.setFocus(this.getWriteFieldReferenceId());this.setOrRemoveFocus(a);this._focusFlag=a;this._updateWrapperClassName();
this.dispatch(ECTConstants.EVENT_FIELD_FOCUS,{focusState:a})},setDropdownToggleClick:function(a){this._isDropDownToggleClick=a},isDropdownToggleClick:function(){return this._isDropDownToggleClick},setOrRemoveFocus:function(a){var b=this.getElement(!0);if(b){var c=b.getAttribute("aria-describedby");if(this._hasError&&a)c=b.getAttribute("aria-describedby"),this.isDropdownToggleClick()||this._callOut&&this._callOut.show(this.id+"_fieldFocusMark",{setFocusOnSelf:!1});else{var d=this;d.updateAttribute("aria-describedby",
c,!0);this._errorHideTimer=setTimeout(function(){d.updateAttribute("aria-describedby",c,!0);d._callOut.hide()},500)}}},isFocusable:function(){return!0},setHeaderLabelId:function(a){this.headerLabelId=a},_renderWriteHtml:_drawRoundedCorners:function(a,b,c){this._componentType=b;b=this._getWrapperClassName();a.push('\x3cspan id \x3d "',this.id,'_fieldFocusMark" class\x3d"',b[0],'"\x3e\x3cspan id \x3d "',this.id,'_fieldborder" class\x3d"',
b[1],'"\x3e');this._renderWriteHtml(a);a.push("\x3c/span\x3e\x3c/span\x3e")},setDirection:function(a){juic.$(this.id+"_fieldFocusMark").dir=a.toLowerCase()},bindCommonValidators:function(a){a.validationRegex&&ECTValidationMgr.bindValidator(this,"custom",{regexp:a.validationRegex,message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_FORMAT,a.label,a.type)})},bindValidators:function(a){a.required&&ECTValidationMgr.bindValidator(this,"required",{message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_REQUIRED,
a.label)});"DECIMAL"!==a.type&&a.type!=ECTTextArea.FIELD_TYPE&&a.maxLength&&0<=a.maxLength&&ECTValidationMgr.bindValidator(this,"maxlength",{message:sfMessageFormat.format(MSGS.EMPFILE_HRIS_DATA_LONG,a.label,a.maxLength),maxlength:a.maxLength});this.bindSpecificValidators(a)},bindSpecificValidators:function(a){},dispatch:function(a,b){a!==ECTConstants.EVENT_CHANGE||ECTUtil.isEmptyObject(this._onChangeParams)||!(b=b||{})||b.onChangeParams||(b.onChangeParams=set(this._onChangeParams,{metaId:this.metaId,
value:this.getValue(),previousValue:this.getPreviousValue()}),"commitValue"!=b.originalEvent&&this.updatePreviousValue());this.dispatchEvent(new juic.EventTarget.Event(a,b))},updateAttribute:function(a,b,c){c=this.getElement(c);null!=b&&c&&c.setAttribute(a,b)},removeAttribute:getElement:function(a){return a?juic.$(this.getWriteFieldReferenceId()):juic.$(this.getReadFieldReferenceId())},getWriteFieldReferenceId:function(){return this.id+
"_write"},getReadFieldReferenceId:function(){return this.id+"_read"},setErrorState:function(a){if(this.isFioriFDEnabled()&&a)SFDom[this._hasError?"addClass":"removeClass"](a,"is-error")}});ECTAbstractMsg.prototype=function(){return set(new Component,{inlineWrapper:"",inlineMsg:"",renderHtml:function(a){var b=-1!==this.inlineWrapper.indexOf("errorWrapper"),c=-1!==this.inlineWrapper.indexOf(ECTUtil.getRedTextColor());!b||c||this.isFioriFDEnabled()||(this.inlineWrapper+=ECTUtil.getRedTextColor());a.push('\x3cdiv id\x3d"',this.id,'_msg" class\x3d"',this.inlineWrapper," ",this.generateFDClasses("form-message",["error"]),' " role\x3d"alert"\x3e',Util.escapeHTML(this.inlineMsg,"\x3c/br\x3e"),
"\x3c/div\x3e")},setValue:function(a){this.inlineMsg=a?a:"";this.setVisibility(this.inlineMsg.length);if(a=juic.$(this.id+"_msg"))a.innerHTML=Util.escapeHTML(this.inlineMsg,"\x3c/br\x3e")},setVisibility:function(a){this.visibility=a?"block":"none";var b=juic.$(this.id+"_msg");b&&(b.style.display=this.visibility,b.setAttribute("aria-hidden",a?"false":"true"))},getValue:function(){return this.inlineMsg}})}();function ECTInlineError(a,b){this.register();this.init(a,b)}
extend(ECTInlineError,ECTAbstractMsg,{inlineWrapper:"errorWrapper ",init:setCloseButtonVisible:function(a){this._closeButton=a},renderHtml:function(a){this._closeButton&&(a.push("\x3ca role\x3d'button' aria-label\x3d'",MSGS.COMMON_Close,"'  title\x3d'",MSGS.COMMON_Close,"' class\x3d'ectErrorPopupCloseButton ",this.generateFDClasses("link"),"' href\x3d'javascript:void(0)' onclick\x3d'",this.fireCode("dispatch","clickonError"),"return false '\x3e"),
this.isFioriFDEnabled()?a.push("\x3cspan class\x3d'",Util.generateIconClasses("decline"),"'\x3e\x3c/span\x3e"):a.push("x"),a.push("\x3c/a\x3e"));this._super(a)}});xtend(ECTInlineInfo,ECTAbstractMsg,{inlineWrapper:"infoWrapper"});function ECTInputBox(a,b){this.register();this.init(a,b)}
juic.extend(ECTInputBox,ECTAbstractInputField,{isNumberField:!1,_noValueColor:ECTConstants.DISABLED_COLOR,_warningMsg:"",_calcIconEnabled:!0,_hasIcon:!1,_keysToAllowForMaxLength:["NUMERIC","ALPHA","BACKSPACE","SPACEBAR"],init:function(a,b){a+="";this._oldValue=this._value=ECTUtil.isEmpty(a)?"":a;b.maxLength=b.maxLength&&-1===b.maxLength?null:b.maxLength;this._config=b||{};this._type=this._config.type?this._config.type.toLowerCase():"";this.setWritable(!1!==b.writable);this._enabled=ECTUtil.isEmpty(this._config.enabled)?
!0:this._config.enabled;this._title="undefined"==typeof this._config.title?MSGS.ECT_CLICK_TO_EDIT:this._config.title;!this._enabled||""!==this._value&&null!==this._value||(this._value=this._title);this._acceptRejectFilter=b.filter;this._label=b.label?b.label:"";this._ariaLabelledBy=(b.labelledBy?b.labelledBy:"")+b.label?" "+this.id+"_description":"";this._ariaLabelledBy=this._ariaLabelledBy.trim();this._isRequired=b&&b.required},switchToCalcInput:function(){this._hasIcon=!0},getCalcIconHtml:function(a){this._hasIcon&&
(a.push('\x3ca id\x3d"',this.id,'_calcIcon" class\x3d"calculatorIcon '),this._calcIconEnabled||a.push(" calculatorIconDisabled"),a.push('" onclick\x3d"',this.fireCode("_clickCalcIcon"),'" \x3e\x26nbsp;\x3c/a\x3e'))},_getInputBox:getInputBoxDomId:setEnabled:function(a){this._super(a);var b=this._getInputBox();b&&(b.title=a?this._title:"",b.disabled=!a)},setEnabledCalcIcon:function(a){this._calcIconEnabled=a;(a=juic.$(this.id+
"_calcIcon"))&&(this._calcIconEnabled?Util.removeClass(a,"calculatorIconDisabled"):Util.addClass(a,"calculatorIconDisabled"))},isModified:function(){return!(this._oldValue&&this._oldValue===this._value||!this._oldValue&&this._value===this._title)},_getCSSClass:function(){var a;a="textBoxDefault";var b=this._config.maxLength;"double"==this._type||"ectcalcfield"==this._type?a="textBoxDouble":b&&(100>b?a="textBoxSmall":100<=b&&150>b?a="double":150<b&&200>b&&(a="textBoxMedium"));return a},getValue:setValue:function(a){this._value=ECTUtil.isEmpty(a)?"":a;a=this._writable?this._getInputBox():juic.$(this.id+"_read");this._enabled&&""===this._value&&(this._value=this._title);a&&(this._writable?a.value=this._focusFlag&&this._value==this._title?"":this._value:a.innerHTML=escapeHTML((this._value!==this._title?this._value:"")+""),this._updateWrapperClassName())},initByDefaultMetaValue:reset:function(){if(this.isModified()){var a=
this._getInputBox();this.setValue(this._oldValue);this.checkForErrors();this.setErrorState(a);this._config.maxLength&&this._ismaxLength();this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_UNCHANGE,hasError:this._hasError})}},_renderWriteHtml:function(a){var b="";this._label&&a.push('\x3clabel class\x3d"hiddenAriaContent" id\x3d"',this.id,'_description" for\x3d"',this.id,'_write"\x3e',Util.escapeHTML(this._label),"\x3c/label\x3e");a.push('\x3cinput type\x3d"text"  ');
this._config.size?a.push(' size\x3d"',this._config.size,'" '):this._cssClass&&(b=this._getCSSClass());this.isNumberField&&a.push(' dir\x3d"ltr" style\x3d"text-align: inherit;"');a.push(' class\x3d"formElement ',b," ",this.generateFDClasses("input"),'"');this._config.maxLength&&("DECIMAL"!==this._config.type&&a.push(' maxlength\x3d"',this._config.maxLength,'"'),a.push(' onkeydown\x3d"',this.fireCode("_maxLengthCheck"),this.fireCode("_keyDown"),'"'));a.push(' id\x3d"',this.id,'_write" ');this._acceptRejectFilter&&
a.push(' onkeypress\x3d"return ',this.fireCode("_filterKeyPress"),'" ');a.push('onchange\x3d"',this.fireCode("_change"),'" onfocus\x3d"',this.fireCode("_focus"),'" onkeydown\x3d"',this.fireCode("_keyDown"),'" onkeyup\x3d"',this.fireCode("_keyUp"),'" onPaste\x3d"',this.fireCode("_paste"),'" onblur\x3d"',this.fireCode("_blur"),'" ');a.push('value\x3d"',"string"===typeof this._value?Util.escapeHTML(this._value):this._value,'" ');a.push('aria-labelledby\x3d"',this._ariaLabelledBy,'"','" aria-required\x3d"',
this._isRequired,'" ');a.push('placeholder\x3d"',this._title,'" ');this._enabled?a.push('title\x3d"',this._title,'" '):a.push(' disabled\x3d"disabled"');a.push(" /\x3e");this.getCalcIconHtml(a)},renderHtml:function(a){var b=this.isFioriFDEnabled();this._writable&&this._drawRoundedCorners(a,"textBox");a.push("\x3cspan class\x3d'",this._readOnlyClass,"' id\x3d'",this.id,"_read","'");this.isNumberField&&a.push(" dir\x3d'ltr' style\x3d'text-align: inherit;'");a.push("\x3e");this._value!==this._title&&
a.push("string"===typeof this._value?Util.escapeHTML(this._value):this._value);a.push("\x3c/span\x3e");this._config.maxLength&&(a.push("\x3cdiv id\x3d'",this.id,"_warning' class\x3d'",b?"":"warningText"," hide ",this.generateFDClasses("message-strip",["error"]),"' role\x3d'alert' aria-hidden\x3d'true'\x3e"),b&&(a.push('\x3cdiv id\x3d"',this.id,'_warningText" class\x3d"',this.generateFDClasses("message-strip__text"),'"\x3e'),a.push("\x3c/div\x3e")),a.push("\x3c/div\x3e"))},_ismaxLength:function(){var a=
this._getInputBox();if(a){var b=decimalFormatSymbols.groupingSeparator;if("DECIMAL"===this._config.type&&-1<a.value.indexOf(decimalFormatSymbols.decimalSeparator)){-1<a.value.indexOf(decimalFormatSymbols.groupingSeparator)&&(a.value=a.value.replaceAll(b,""));var c,d=0,b=a.value.split(decimalFormatSymbols.decimalSeparator);b[1].length>this._config.decimalPrecision||b[0].length>this._config.maxLength?(b[0].length>this._config.maxLength&&(b[0]=b[0].substring(0,this._config.maxLength),a.value=b[0]+decimalFormatSymbols.decimalSeparator+
b[1],c=this._config.maxLength,this._warningMsg=sfMessageFormat.format(MSGS.EMPFILE_HRIS_DATA_LONG,this._config.label,c),d++),b[1].length>this._config.decimalPrecision&&(a.value=b[0]+decimalFormatSymbols.decimalSeparator+b[1].substring(0,this._config.decimalPrecision),c=this._config.decimalPrecision,this._warningMsg=sfMessageFormat.format(MSGS.EMPFILE_HRIS_PRECISION_LONG,this._config.label,c),d++),2===d&&(this._warningMsg=sfMessageFormat.format(MSGS.EMPFILE_HRIS_DECIMAL_PRECISION_LONG,this._config.label,
this._config.maxLength,this._config.decimalPrecision)),this._maxCountReached=!0):(this._warningMsg="",this._maxCountReached=!1)}else"DECIMAL"===this._config.type&&-1<a.value.indexOf(decimalFormatSymbols.groupingSeparator)&&(a.value=a.value.replaceAll(b,"")),"DECIMAL"===this._config.type&&a.value.length>=this._config.maxLength?(a.value.length===this._config.maxLength?this._warningMsg=sfMessageFormat.format(MSGS.EMPFILE_HRIS_WARNING_REACHED_MAX_LENGTH,this._config.label,this._config.maxLength):(a.value=
a.value.substring(0,this._config.maxLength),this._warningMsg=sfMessageFormat.format(MSGS.EMPFILE_HRIS_DATA_LONG,this._config.label,this._config.maxLength)),this._maxCountReached=!0):a.value.length===this._config.maxLength?(this._maxCountReached&&(this._warningMsg=sfMessageFormat.format(MSGS.EMPFILE_HRIS_WARNING_REACHED_MAX_LENGTH,"",this._config.maxLength)),this._maxCountReached=!0):(this._warningMsg="",this._maxCountReached=!1);this.setWarningMsg(this._warningMsg,this._maxCountReached)}},_maxLengthCheck:function(a){if(this._keysToAllowForMaxLength.contains(SFDOMEvent.getKeyName(a))){var b=
this;setTimeout(0)}},resetWarningMessage:setWarningMsg:function(a,b){var c=juic.$(this.id+"_warning"),d=juic.$(this.id+"_warningText");c&&(this.isFioriFDEnabled()&&d?d.innerHTML=a:c.innerHTML=a,d=c.className,c.className=b&&a?d.replace("hide","show"):d.replace("show","hide"),c.setAttribute("aria-hidden",b?"false":"true"))},_clickCalcIcon:cleanup:function(){this.unregister()},
_resetDisplayTextToTitle:function(a,b){if(""===a||a===this._title)this._value=b.value=this._title},setTitle:function(a){var b=this._getInputBox();b&&(b.value==this._title&&(this._value=b.value=a),b.title=a);this._title=a},_blur:function(){this.setFocus(!1);var a=this._getInputBox();if(a){var b=a.value.trim();this._resetDisplayTextToTitle(b,a)}},_dispatchDOMOnChangeEvent:function(){var a=this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE;this.dispatch(ECTConstants.EVENT_CHANGE,
{actionCommand:a,value:this._value,hasError:this._hasError})},_change:function(){var a=this._getInputBox();this._value=a.value.trim();this._resetDisplayTextToTitle(this._value,a);this.checkForErrors();this.setErrorState(a);this._dispatchDOMOnChangeEvent()},_focus:function(){var a=this._getInputBox();a.value===this._title&&(this._value=a.value="");this.setFocus(!0)},_paste:function(a){if(this._acceptRejectFilter){var b=this._acceptRejectFilter.acceptRegex,c=this._acceptRejectFilter.rejectRegex,d=this;
setTimeout(function(){var a=d._getInputBox(),f=a.value;c&&(f=f.replace(new RegExp(c,"g"),""));b&&(f=f.match(new RegExp(b,"g")).join(""));a&&(a.value=f);this._change()},0)}},_filterKeyPress:function(a){if(this._acceptRejectFilter){a=a||window.event;var b=SFDOMEvent.getCharCode(a),b=String.fromCharCode(b);if(""===b)return!0;var c=this._acceptRejectFilter.acceptRegex,d=this._acceptRejectFilter.rejectRegex;if(c&&!b.match(c)||d&&b.match(d))return a.returnValue=!1}return!0},_keyDown:function(a){a=a||window.event;
a=SFDOMEvent.getKeyName(a);switch(a){case "TAB":this.checkForErrors();a=this._getInputBox();this.setErrorState(a);break;default:if(this._autoFormater){var b=this;"BACKSPACE"!==a?(this._formatTimer&&(clearTimeout(this._formatTimer),delete this._formatTimer),this._formatTimer=setTimeout(function(){var a=b._getInputBox();if(a.value!=b._title){var d=b._autoFormater.getFormattedString(a.value);a.value=d;b._value=d;b._dispatchDOMOnChangeEvent()}},0)):(this._updateValueTimer&&(clearTimeout(this._updateValueTimer),
delete this._updateValueTimer),this._updateValueTimer=setTimeout(function(){var a=b._getInputBox();a&&(b._value=a.value,b._dispatchDOMOnChangeEvent())},0))}}},_keyUp:function(a){var b=this;setTimeout(3)},setFormat:function(a){this._autoFormater||(this._autoFormater=new ECTKeyPressAutoFormatter(""));this._autoFormater.setStringFormat(a)},bindSpecificValidators:function(a){var b="string"===typeof a.type?a.type.toLowerCase():"";"decimal"==b&&(b="double");
if("number"==b||"long"==b||"double"==b)ECTValidationMgr.bindValidator(this,b,{message:sfMessageFormat.format("double"==b?MSGS.EMPFILE_HRIS_WORKFLOW_EXPECTED_DECIMAL_NUMBER:MSGS.EMPFILE_HRIS_WORKFLOW_EXPECTED_NUMBER,a.label)}),this.isNumberField=!0}});function ECTInputWithNamespace(a,b){this.register();this.init(a,b)}ECTInputWithNamespace.FIELD_TYPE="InputWithNamespace";
extend(ECTInputWithNamespace,ECTInputBox,{init:function(a,b){this._super(a,b);this._defaultValue=b.defaultValue||"";this._namespace=b.namespace;this._forceNamespace=!!b.forceNamespace;this._invalidateNamespace(a||this._defaultValue);this._enabled&&this._value==this._namespace&&(this._value=this._title)},_removeNamespace:function(a){return a&&this._namespace&&0==a.indexOf(this._namespace)?a.substr(this._namespace.length):a},_addNamespace:function(a){return 0!=a.indexOf(this._namespace)?this._namespace+
a:a},_focus:function(){if(this._namespace){var a=this._getInputBox();a.value=this._removeNamespace(a.value.trim());this._value=a.value;this.setFocus(!0)}this._super()},_blur:function(){if(this._namespace){var a=this._getInputBox();a&&a.value.trim()!=this._title&&a.value.trim()!=this._namespace&&(a.value=this._addNamespace(a.value.trim()),this._value=this.getValue())}this._super()},_invalidateNamespace:function(a){!this._forceNamespace&&this._namespace&&0!=a.indexOf(this._namespace)&&(this._namespace=
"")},setValue:setValueWithoutNamespace:getValue:function(){var a=this._addNamespace(this._super()||this._defaultValue);return a==this._namespace?"":a},_resetDisplayTextToTitle:function(a,b){a===this._namespace&&(a="");this._super(a,b)},isModified:function(){return this._super()&&this._oldValue!=this._addNamespace(this._value)}});
function ECTEmptySectionInfo(a,b,c){this.register();this.init(a,b,c)}
ECTEmptySectionInfo.prototype=function(){return set(new juic.Component,{init:setEditable:function(a){this._editable=a;this._clickEditLinkHTML=juic.createRenderContext();this._editable&&(this._clicktoEdit=new SFSimpleLink(MSGS.COMMON_Edit,ECTEmployeeSelfServiceConstants.EVENT_EDIT_PORTLET,null,{ariaRole:"presentation"}),this._clicktoEdit.addEventListener(ECTConstants.EVENT_ACTION,this,"dispatchEvent"),this._clicktoEdit.renderHtml(this._clickEditLinkHTML))},
setInfoGroupName:renderHtml:function(a){this._renderTitle&&a.push('\x3cdiv class\x3d"form_title emptySection"\x3e',this.infoGroupName,"\x3c/div\x3e");a.push('\x3cdiv class\x3d"emptySectionInfo"\x3e');this._editable?a.push(MSGS.get("ECT_HRIS_PORTLET_ESS_NO_INFO",this.infoGroupName,this._clickEditLinkHTML.join(""))):a.push(MSGS.get("ECT_HRIS_PORTLET_MSS_NO_DATA",this.infoGroupName));a.push("\x3c/div\x3e")},cleanup:)}();CTCascadePicklistManager.EVENT_DROPDOWN_CHANGED="DropDownChanged";
ECTCascadePicklistManager.prototype=function(){return set(new juic.EventTarget,{init:function(a){this.metas=a;this.handledDropDowns={};this.fieldsMeta={};for(var b=0;b<a.length;b++){var c=a[b];if(c.parentPicklistId){var d=c.id.split("-")[0];this.fieldsMeta[d.concat("-",c.parentPicklistId)]||(this.fieldsMeta[d.concat("-",c.parentPicklistId)]=[]);c.ajaxSelect=!1;c.selectOptions||(c.ajaxSelect=!0);this.fieldsMeta[d.concat("-",c.parentPicklistId)].push(c)}}},prepareData:function(a){for(var b={},c=0;c<
this.metas.length;c++){var d=this.metas[c],e=a&&a[c];if(d.type==ECTConstants.TYPE_SELECT||d.type==ECTConstants.TYPE_SELECT.toLowerCase()||d.type==ECTPicklistAutoComplete.FIELD_TYPE)if(d=this.fieldsMeta[d.id])for(var f=0;f<d.length;f++){var g=d[f],k;a&&(k=a[g.id]);if(g.selectOptions){g._allSelectedOptions||(g._allSelectedOptions=g.selectOptions);var l=!1,m,n=[];0!=n.length&&0!=g.required||n.splice(0,0,{value:EDU_SELECT_NO_VALUE.VALUE,label:MSGS.COMMON_NO_SELECTION});for(var p=0;p<g._allSelectedOptions.length;p++){var q=
g._allSelectedOptions[p];if(null!=e&&e.defaultValue&&-1!=e.defaultValue.indexOf(q.parentOptionId)||-1==q.parentOptionId)n.push(q),k&&q.value==k.value&&(l=!0);k&&q.value==k.value&&(m=q)}g.selectOptions=n;!l&&k&&(b[g.id]=m)}else g.ajaxSelect=!0}}return b},registerPicklist:function(a,b,c){if(b.type==ECTConstants.TYPE_SELECT||b.type==ECTConstants.TYPE_SELECT.toLowerCase()||b.type==ECTPicklistAutoComplete.FIELD_TYPE)b.ajaxSelect&&b.parentPicklistId&&(c=b.id.split("-")[0],this.handledDropDowns[c.concat("-",
b.parentPicklistId)]?""==this.handledDropDowns[c.concat("-",b.parentPicklistId)][0].field._oldValue?a.field.setParentOptionId("-1"):a.field.setParentOptionId(this.handledDropDowns[c.concat("-",b.parentPicklistId)][0].field._oldValue):a.field.setParentOptionId("-1")),this.fieldsMeta[b.id]&&(new ECTDropdownWrapper(a,b)).addEventListener("DropDownChanged",this),this.handledDropDowns[b.id]||(this.handledDropDowns[b.id]=[]),this.handledDropDowns[b.id].push(a)},handleEvent:function(a){switch(a.type){case "DropDownChanged":this._refreshChildren(a.parent,
a.meta);break;default:this.dispatchEvent(a)}},refreshChildrenFromExternalSource:_refreshChildren:function(a,b){var c=this.fieldsMeta[b.id];if(c)for(var d=0;d<c.length;d++){var e=c[d],f=this.handledDropDowns[e.id];if(f)for(var g=0;g<f.length;g++){var k=f[g];k.field.setValue("");this._refreshOptions(a.field.getValue(),k,e)}}},_refreshOptions:function(a,b,c){if(c.ajaxSelect)a==EDU_SELECT_NO_VALUE.VALUE?b.field.setParentOptionId("-1"):b.field.setParentOptionId(a);
else{var d=[];0==d.length&&0==c.required&&d.splice(0,0,{value:EDU_SELECT_NO_VALUE.VALUE,label:MSGS.COMMON_NO_SELECTION});for(var e=0;e<c._allSelectedOptions.length;e++){var f=c._allSelectedOptions[e];f.parentOptionId!=a&&-1!=f.parentOptionId||0!=f.disabled||d.push(f)}c.selectOptions=d;b.field instanceof ectComboDropDown?b.field.setModel(d):b.field.setItemProvider(b.field._createItemProvider(d))}this._refreshChildren(b,c)},cleanup:function(){this.unregister()}})}();
function ECTDropdownWrapper(a,b){this.init(a,b)}ECTDropdownWrapper.prototype=function(){return set(new juic.EventTarget,{init:function(a,b){this.dropDown=a;this.meta=b;this.dropDown.addEventListener(ECTConstants.EVENT_CHANGE,this)},handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_CHANGE:this.dispatch("DropDownChanged",{parent:this.dropDown,meta:this.meta});break;default:this.dispatchEvent(a)}},cleanup:)}();
ECTColumnWidthMatcher.prototype=function(){return set(new juic.EventTarget,{_updateColumnWidths:function(a){for(var b=0,c=a.length;b<c;b++)a[b].style.width=this._columnWidths[b]-10+"px"},_addtoSyncTable:function(a){for(var b=!1,c=0,d=this._syncTables.length;c<d;c++)this._syncTables[c]==a.id&&(b=!0);b||this._syncTables.push(a.id);this._syncTables.length||(this._getTableWidth=a.offsetWidth)},_calculateWidthUpdate:function(){for(var a=0;a<this._syncTables.length;a++){var b=this._syncTables[a];if(b=juic.$(b)){b.style.tableLayout=
"";b.style.width="auto";for(var c=b.getElementsByTagName("tr")[0].childNodes||[],d=0,e=c.length;d<e;d++){var f=c[d].offsetWidth;this._columnWidths.length&&this._columnWidths[d]?this._columnWidths[d]<f&&(this._columnWidths[d]=f):this._columnWidths.push(f)}b.style.width="100%"}else this._syncTables.splice(a,1),a--}},_syncTableWidths:function(a){for(var b=0;b<this._syncTables.length;b++){var c=this._syncTables[b];if(c=juic.$(c)){var d=c.getElementsByTagName("tr")[0];this._updateColumnWidths(d.childNodes||
[]);c.style.tableLayout="auto";a&&0<a.length&&this._updateFieldsWithAvailableWidth(c,a)}else this._syncTables.splice(b,1),b--}},_updateFieldsWithAvailableWidth:function(a,b){for(var c=parseInt(a.offsetWidth/b.length)-60,d=0,e=b.length;d<e;d++){var f=b[d];!f.field||"undefined"==typeof f.field.setAvailableWidth||f.meta.type!=ECTPicklistAutoComplete.FIELD_TYPE&&f.meta.type!=ECTConstants.TYPE_FOUNDATION_AUTOCOMPLETE&&f.meta.type!=ECTFieldWithCustomContext.FIELD_TYPE||f.field.setAvailableWidth(c)}},updateOrMatchWidth:function(a,
b){var c=juic.$(a);c&&(c=c.getElementsByTagName("table")[0],this._addtoSyncTable(c),1<this._syncTables.length&&(this._calculateWidthUpdate(),this._syncTableWidths(b)))}})}();ECTPropagationSetterDependentFieldsClearer.prototype=function(){return set(new juic.EventTarget,{_updatePortletPropagationsPrecedencePreference:_getPrecedencePropagations:_isSubmitRequired:function(a){var b=!0;if(a)for(var c=a.length;c--;)if(!a[c]||!a[c].value){b=!1;break}return b},_movePropagationValues:function(a,
b,c){var d,e=-1;if(!ECTUtil.isEmptyArray(a)&&b){for(var f=0;f<a.length;f++)d=a[f],this._updatePortletPropagationsPrecedencePreference(d.id,c,d.value),d=this._getPrecedencePropagations(d.id,d),-1==e&&d.id==b&&(e=f);-1<e&&e!=a.length-1&&(d=a.splice(e,1),a.push(d[0]))}},_getLastFieldIdForSubmitOnFieldChange:function(a){for(var b="",c=0,d=a.length;c<d;++c)a[c].meta.submitOnFieldChange&&(b=a[c].meta.id);return b},setPropagationInfo:function(a,b){var c=a.searchElement.getSearchType(),d=ECTUtil.convertArrayToMap(b),
e=this._getLastFieldIdForSubmitOnFieldChange(b);this._movePropagationValues(a.propagations,e,c);for(var f=this._isSubmitRequired(a.propagations),g=0;g<a.propagations.length;++g){var k=a.propagations[g],l=d[k.id];l&&(this._updatePortletPropagationsPrecedencePreference(k.id,c,k.value),k=this._getPrecedencePropagations(k.id,k),a.propagations.splice(g,1),g--,l.setValueAndDispatchChange(k.value,f&&k.id===e))}},clearDependentFields:function(a,b){for(var c=ECTUtil.convertArrayToMap(b),d=0;d<a.length;++d){var e=
c[a[d]];if(e&&(a.splice(d,1),d--,e.getValue())){e.setValueAndDispatchChange({id:"",primaryDisplayText:""});var f=MSGS.EMPFILE_HRIS_DEPENDENT_FO_CLEARED;e.displayErrorMessage?e.displayErrorMessage(f):e.setErrorMsg(f)}}}})}();function ECTDataGrid(a,b){this._super(b,a)}ECTDataGrid.NEW_ROW_INDEX=-1;
juic.extend(ECTDataGrid,ECTAbstractGroup,{init:function(a,b){this._originalArguments=this._originalArguments||arguments;this._initReadOnlyMode(a);this.setValue(b);this._super(a,b)},initPropertiesFromMeta:function(a){this._super(a);this._minRows=a.minRows||0;this._maxRows=a.maxRows||Number.MAX_VALUE;this._hasMultiple=ECTUtil.isEmpty(a.hasMultiple)?!0:a.hasMultiple;this._rearrangeable=a.rearrangeable;this._fieldsMeta=a.fieldsMeta;this._sendDeleted=a.sendDeleted;this._noGlobalRoundedCorners=a.noGlobalRoundedCorners;
this._isPaginatedGrid=!!a.isPaginatedGrid;this._isNotLastPageOfPaginatedGrid=a.isNotLastPageOfPaginatedGrid;this._missingFields={}},initDataStructures:function(){this._dataGridField=[];this._columnLabel=[];this._rows=[];this._fieldsMetaStored=[];for(var a=this._fieldsMeta,b=0,c=a.length;b<c;b++){var d=set({},a[b]);this._fieldsMetaStored[d.id]=d}this.hasDetailsLink()&&(this._detailLinks=[]);this._sendDeleted&&(this._deletedRows=[])},initInstanceProperties:function(){this._numberOfColumns=this._numberOfColumns||
this._fieldsMeta.length;this._isInvalidDynamicRole=window.isInvalidDynamicRole||!1;this._isModified=!1},createLayout:function(){this.meta.ariaLabel=this.meta.infoGroupName||this.meta.title||this.meta.label;this._layout=new ECTGridLayout(this.meta);this._layout.addEventListener(ECTConstants.EVENT_ACTION,this,"_handleRowAction");this._layout.addEventListener(ECTBaseLayout.EVENT_LAYOUT_ACTION,this,"_handleLayoutAction")},_handleLayoutAction:function(a){switch(a.actionCommand){case ECTBaseLayout.ACTION_STATE_CHANGE:this.dispatch(ECTAbstractGroup.EVENT_TOGGLE_VIEW_STATE,
{viewState:this.isCollapsed(),metaId:this.meta.id})}},_initReadOnlyMode:function(a){this._readOnly="undefined"!=typeof a.writable?!a.writable:"undefined"!=typeof a.editable?!a.editable:!1;a.readOnlyMode=this._readOnly},createFieldsFromMetaAndData:_canCreateNewRow:function(){var a=!this._readOnly;this._isNotLastPageOfPaginatedGrid&&(a=!1);a&&!1===this._hasMultiple&&0!==this._valuetable.length&&(a=!1);var b=this._rows&&this._rows.length-1,c=this._maxRows;
a&&b>=c&&(a=!1);this.meta.actions&&(a=a&&this.meta.actions.create);return a},updateMissingFields:_createColumsAndFieldObjList:function(a){for(var b=0,c=this._numberOfColumns;b<c;b++)if(ECTConstants.COMPLEX_FIELDS[a[b].type]){var d=ECTUtil.getLabelsMeta(a[b]);(this._nestedLabelsCount=d.length)||this._columnLabel.push(this._createLabel("",!1));for(var e=0,f=d.length;e<f;e++)this._columnLabel.push(this._createLabel(d[e].label,
d[e].required,d[e].id))}else this._columnLabel.push(this._createLabel(a[b].label,a[b].required));this.hasDetailsLink()&&this._columnLabel.push(this._createLabel("",!1));this._rows.push(this._columnLabel);this._layout.addRow(this._columnLabel,{header:!0,columnLabelClsName:this._isInvalidDynamicRole?" gridColumnPadding":""});this.hasDetailsLink()&&this._detailLinks.push(null);a=0;for(b=this._valuetable.length;a<b;a++)this._createColumnFields(a,!0,!1);this._canCreateNewRow()&&(this._createColumnFields(ECTDataGrid.NEW_ROW_INDEX,
!1,!0),this._initRowByDefaultMetaValue(this._rows[this._rows.length-1]))},isModified:function(){if(this._isModified)return!0;for(var a=1,b=this._rows.length;a<b;a++)if(this._isRowModified(a))return!0;return!1},makeItNew:function(){for(var a=1,b=this._rows.length;a<b;a++){var c=this._rows[a];c._rowData=c.rowData;c._rowId=c.rowId;c._modified=c.modified;c.rowData=null;c.rowId=null;c.modified=!0}},undoMakeItNew:function(){for(var a=1,b=this._rows.length;a<b;a++){var c=this._rows[a];c.rowData=c.rowData||
c._rowData;c.rowId=c.rowId||c._rowId;c.modified=c._modified}},_isRowModified:function(a,b){var c=this._rows[a];if(ECTUtil.isEmptyArray(c))return!1;if(b||!c.modified){c.modified=!1;for(var d=0,e=c.length;d<e;d++){var f=c[d],g=f.field;if(f.isModified()){c.modified=!0;break}else if(!(c.rowId||ECTConstants.COMPLEX_FIELDS[f.meta.type]||g.isEmpty&&g.isEmpty()||!f.getValue()&&0!==f.getValue())){c.modified=!0;break}}}return c.modified},_cleanupColItem:function(a){a.field&&ECTValidationMgr.unbindValidator(a.field);
a.removeEventListener&&a.removeEventListener(ECTConstants.EVENT_CHANGE,this);a instanceof ECTAbstractGroup?setTimeout(function(){a.cleanup&&a.isRegistered()&&a.cleanup()},0):a.cleanup&&a.isRegistered()&&a.cleanup()},_cleanupRow:function(a){if(a)if(ECTUtil.isArray(a))for(var b=0,c=a.length;b<c;b++){var d=a[b];d&&this._cleanupColItem(d)}else a.cleanup&&a.isRegistered()&&a.cleanup()},_cleanupRowItems:function(a){for(var b=this,c=d=0,e=a.length;d<e;d++)setTimeout(c(a[d]),
0)},reset:function(){if(this.isModified()){this.clear();this.init.apply(this,this._originalArguments);var a=juic.$(this.id+"_tableContainer");a&&this._layout.render(a);this._isModified=this._fieldChanged=!1;this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_UNCHANGE,actionInDataGrid:"reset"})}},hideErrorMessage:function(){for(var a=1,b=this._rows.length;a<b;a++)for(var c=this._rows[a],d=0,e=c.length;d<e;d++){var f=c[d];f&&f.hideErrorMessage()}},displayErrorMessage:function(a,
b){for(var c=1,d=this._rows.length;c<d;c++)for(var e=this._rows[c],f=0,g=e.length;f<g;f++){var k=e[f];if(k&&k.meta.id==b){k.setErrorMsg(message);break}}},_getRowValue:function(a,b,c){var d=this._rows[a],e={actionId:-1};e.modified=this._isRowModified(a);e.rowId=d.rowId;e.isLastModifiedRow=a==this._lastModifiedrowIndex;this._addAdditionalValueProperties(e,d,a);if(!b||e.modified){e.fieldValue=[];for(var f=0,g=d.length;f<g;f++){var k={},l=d[f];k.id=l.meta.id;k.value=c&&l.getValue?l.getValueObj(b):l.getValue(b,
c);k.group=l.meta.group;k.type=l.meta.type;l.getSecurityToken&&l.getSecurityToken()&&(k.st=l.getSecurityToken());l.meta.type===ECTConstants.TYPE_CASCADE&&c&&this._isPaginatedGrid?e.fieldValue.push(k.value):e.fieldValue.push(k)}}this._missingFields[a]&&(e.missingFields=this._missingFields[a]);return e},_addAdditionalValueProperties:function(a,b,c){a.rowData=b.rowData;a.elementId=this.getElementId();a.order=c},getValue:function(a,b){this._valuetable=[];for(var c=1,d=this._getRowLength();c<d;c++){var e=
this._getRowValue(c,a,b);this._sendDeleted&&a&&!e.modified||(1==this._maxRows&&(e.singleRow=!0),this._valuetable.push(e))}if(this._sendDeleted)for(c=0,d=this._deletedRows.length;c<d;c++)e=this._deletedRows[c],this._valuetable.push({actionId:-1,isDeleted:!0,rowId:e.rowId,elementId:this.getElementId(),rowData:e.rowData});return this._valuetable},setValue:initByDefaultMetaValue:
_initRowByDefaultMetaValue:function(a){for(var b=0;b<a.length;b++)a[b].initByDefaultMetaValue&&a[b].initByDefaultMetaValue()},getRowIndexForRowId:function(a){if(!a)return-1;for(var b=1,c=this._getRowLength();b<c;b++)if(this._rows[b].rowId===a)return b;return-1},mergeValue:function(a){if(!ECTUtil.isEmptyArray(a))for(var b=0,c=a.length;b<c;b++){var d=a[b];if(d.fieldValue){var e=d.id?this.getRowIndexForRowId(d.id):d.order||-1,f=-1===e||e>this._getRowLength(),g=[];e==this._getRowLength()&&this._addNewRowOnChange(new juic.EventTarget.Event(ECTConstants.EVENT_CHANGE,
{actionCommand:ECTConstants.EVENT_FIELD_CHANGE}));f&&this._addNewRowOnChange(new juic.EventTarget.Event(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE}));for(var e=f?this._getRowLength()-1:e,f=0,k=d.fieldValue.length;f<k;f++){var l=d.fieldValue[f],m=null;l&&l.additionalMetaAndData&&(m=l.additionalMetaAndData,l=l.fieldData);if(l&&l.id){var n=null,p=null;this.meta.referenceAssociation&&(n=(p=this.getFieldByMetaId(ECTFieldWithContext.FIELD_TYPE_FWC+l.id,{rowIndex:e,fieldPlusOldValue:!0}))?
p.field:null);n||(n=(p=this.getFieldByMetaId(l.id,{rowIndex:e,fieldPlusOldValue:!0}))?p.field:null);n&&(m&&g.push({details:{metaId:l.id,parent:this,field:n,rowIndex:e},metaAndData:m}),n instanceof ECTDataGrid?n.mergeValue(ECTUtil.getValueFromData(l)):(n.setValue(ECTUtil.getValueFromData(l)),p.setSecurityToken&&p.setSecurityToken(l.st)))}}this.handleAdditionalMetaAndDatas(g)}}},_delayAddNewRowOnChange:function(a){if(a.actionCommand!==ECTConstants.EVENT_FIELD_UNCHANGE){var b=this;this._delayAddNewRowOnChangeTimeOut?
setTimeout(function(){b.handleEvent(a)},0):this._delayAddNewRowOnChangeTimeOut=setTimeout(function(){b._addNewRowOnChange(a)},0)}},addNewRow:function(a){if(a.fields){var b=this.getRowIndexForRowId(a.id),c=-1===b;if(c){for(var d=this._rows[this._rows.length-1],e=0,f=d.length;e<f;e++)d[e].removeEventListener(ECTConstants.EVENT_CHANGE,this),d[e].addEventListener(ECTConstants.EVENT_CHANGE,this);this._isModified=this._fieldChanged=!0;this._createColumnFields(ECTDataGrid.NEW_ROW_INDEX,!1,!0);this._initRowByDefaultMetaValue(this._rows[this._rows.length-
1])}b=c?this._getRowLength()-1:b;c=0;for(d=a.fields.length;c<d;c++)(e=a.fields[c])&&e.id&&(f=this.getFieldByMetaId(e.id,{rowIndex:b}))&&(f instanceof ECTDataGrid?f.mergeValue(ECTUtil.getValueFromData(e)):f.setValue(ECTUtil.getValueFromData(e)))}},_addNewRowOnChange:function(a){if(a.actionCommand!==ECTConstants.EVENT_FIELD_UNCHANGE){var b=this._rows.length-1;if(this._canCreateNewRow()){for(var c=this._rows[b],d=0,e=c.length;d<e;d++)c[d].removeEventListener(ECTConstants.EVENT_CHANGE,this),c[d].addEventListener(ECTConstants.EVENT_CHANGE,
this);this._isModified=this._fieldChanged=!0;this._createColumnFields(ECTDataGrid.NEW_ROW_INDEX,!1,!0);this._initRowByDefaultMetaValue(this._rows[this._rows.length-1]);this._selectFirstEditableField(this._rows[this._rows.length-2],!0);a.rowIndex=b;this._lastModifiedrowIndex=this._extractRowIndexFromEvent(a);this.handleEvent(a);this._delayAddNewRowOnChangeTimeOut&&(clearTimeout(this._delayAddNewRowOnChangeTimeOut),this._delayAddNewRowOnChangeTimeOut=null,delete this._delayAddNewRowOnChangeTimeOut)}else this.handleEvent(a)}},
_handleFieldFocus:function(a){a.focusState&&(this._focusedFieldInfo={metaId:a.target.metaId,rowIndex:a.target.rowIndex})},_selectFocusedFieldIfAvailable:function(){if(this._focusedFieldInfo){var a=this._focusedFieldInfo.rowIndex;"string"===typeof a&&(a=this._focusedFieldInfo.rowIndex.split("_")[0]);var b=this._getFieldByMetaIdInRow(this._focusedFieldInfo.metaId,a);if(b){if(Util.browserInfo.ie&&9>Util.ieVersion(!0)){var c=this;setTimeout(0)}else this._focusedFieldSetFocusAndClearInfo(b);
return!0}return!1}},_focusedFieldSetFocusAndClearInfo:function(a){a.stopRecreate=!0;a.setFocus(!0);this._focusedFieldInfo=null},_selectFirstEditableField:function(a,b){if(a&&a.length&&!this._selectFocusedFieldIfAvailable())for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e.meta.type===ECTConstants.TYPE_CASCADE)e=e.field.getFields();else if(this._checkFieldAndSetFocus(e,b))break;for(var f=0,g=e.length;f<g&&!this._checkFieldAndSetFocus(e[f],b);f++);}},setFocus:function(a){var b=this._rows[1];a&&b&&this._selectFirstEditableField(b,
!1)},_checkFieldAndSetFocus:function(a,b){return a.field.isWritable&&a.field.isWritable()&&(!b||a.field.isModified())?(a.setFocus(!0),!0):!1},setColumnWidthMatcher:updateifNested:_updateOrMatchWidth:function(){if(this._columnWidthMatcher&&this._hastoSync){var a=this._getRowFields(1);this.meta.actions&&a.push({});var b=this;setTimeout(250)}},updateFieldStatus:function(a,b,c){c=c||{};"undefined"!=typeof c.rowIndex&&(a=this.getFieldByMetaId(a,c))&&(ECTUtil.updateFieldStatus(a,b,this,c,null),c.isLastField&&(window.clearTimeout(this._repaintTimerID),this._repaintTimerID=setTimeout(bind(this),250)))},repaintSingleField:setFieldVisible:function(a,b,c){(a=this._getFieldByMetaIdInRow(a,c.rowIndex,{fieldPlusOldValue:!0}))&&this._layout.setFieldVisible(a,
b,c)},isFieldVisible:function(a,b){var c=this._getFieldByMetaIdInRow(a,b.rowIndex,{fieldPlusOldValue:!0}),d;c&&(d=this._layout.isFieldVisible(c,b));return d},_setRowProperties:function(a,b){a.rowId=b.id||b.rowId||null;a.rowData=b.rowData||null;a.order=b.order||null;a.actionId=b.actionId||-1;a.modified=!!b.modified},_createColumnFields:function(a,b,c){var d=a===ECTDataGrid.NEW_ROW_INDEX?{fieldValue:""}:this._valuetable[a],d=d?d:{fieldValue:""},e=d.fieldValue||d.fields,f=[],g=[];this._setRowProperties(f,
d);for(var k=d.rowMeta||this._fieldsMeta,l=this.isRowDeletable(d),m=c||!1!==d.writable,n=!f.rowId,p=new ECTCascadePicklistManager(k),q=p.prepareData(e),r=[],t=0,z=k.length;t<z;t++){var u=e&&e[t]?e&&e[t]:"",v;v=k[t].hasOwnProperty("type")&&"ATTACHMENT"==k[t].type?jQuery.extend(!0,{},k[t]):k[t];var w=null;u&&u.additionalMetaAndData&&(w=u.additionalMetaAndData,u=u.fieldData);var x=this._createField(v,u,c,n,m,d.rowMeta,f,g,t,a);q.length||p.registerPicklist(x,v,u);w&&r.push({details:{metaId:v.id,parent:this,
field:x,rowIndex:a==ECTDataGrid.NEW_ROW_INDEX?this._rows.length:a+1},metaAndData:w})}this.hasDetailsLink()&&(d=this.createDetailsLink({id:this._rows.length,rowId:f&&f.rowId?f.rowId:"-1"}),g.push(d),this._detailLinks.push(d));var y;this._readOnly||!1===this._hasMultiple||(y={rearrange:!!this._rearrangeable&&1<this._maxRows,remove:l});this._processCreatedRow(a,c,b,f,g,y);this.handleAdditionalMetaAndDatas(r);return f},handleAdditionalMetaAndDatas:function(a){ECTUtil.isArray(a)&&a.forEach(},_createLabel:_createField:function(a,b,c,d,e,f,g,k,l,m){var n=a.id.search(/custom-date.+/);"DATE"==a.type&&c&&"personInfo-date-of-birth"!==a.id&&"workPermitInfo-issue-date"!==a.id&&"workPermitInfo-expiration-date"!==a.id&&!n&&(a.defaultToday=!0);a.hideCalcIcon=d;0<=a.id.indexOf("pay-component")?a.writable=c||!b.defaultValue||d:"relationshipType"===a.id?a.writable=c||!b.defaultValue||d:e?f||(a.writable=!1!==this._fieldsMetaStored[a.id].writable):
a.writable=!1;!1===this.meta.writable&&(a.writable=!1,a.rearrangeable=!1,a.actions&&(a.actions["delete"]=!1,a.actions.create=!1));if(this._valuetable&&50<this._valuetable.length||this.meta.fixWidthOnLoad)a.fixWidthOnLoad=!0;d=new ECTFieldPlusOldValue(b,a);d.field.rowIndex=m==ECTDataGrid.NEW_ROW_INDEX?this._rows.length:m+1;d.highlightInvalidValue="";this._isInvalidDynamicRole&&(b=b.defaultValue,ECTUtil.isJSON(b)&&(b=eval("("+b+")")),d.highlightInvalidValue=b&&b.isInvalidUser?" gridColumnPadding invalidValue":
" gridColumnPadding");g.push(d);d.addEventListener(ECTConstants.EVENT_ACTION,this);if(!this._readOnly||l>=this._numberOfColumns)!1!==this._hasMultiple&&c&&m==ECTDataGrid.NEW_ROW_INDEX?d.addEventListener(ECTConstants.EVENT_CHANGE,this,"_delayAddNewRowOnChange"):d.addEventListener(ECTConstants.EVENT_CHANGE,this),d.addEventListener(ECTAbstractGroup.EVENT_TOGGLE_VIEW_STATE,this,"dispatchEvent");if(ECTConstants.COMPLEX_FIELDS[a.type]&&d.field.getFields){c=d.field.getFields(this._nestedLabelsCount);g=0;
for(m=c.length;g<m;g++)c[g].field.rowIndex=d.field.rowIndex+"_"+g,l<this._numberOfColumns&&(b=c[g],k.push(b),b.field.addEventListener(ECTConstants.EVENT_FIELD_FOCUS,this,"_handleFieldFocus"));d.field.addEventListener(ECTConstants.EVENT_FIELDS_CHANGE,this)}else l<this._numberOfColumns&&(k.push(d),d.field.addEventListener(ECTConstants.EVENT_FIELD_FOCUS,this,"_handleFieldFocus"));a.type==ECTConstants.TYPE_DATAGRID&&this._maxFieldsToShow>l&&(this._columnWidthMatcher||(this._columnWidthMatcher=new ECTColumnWidthMatcher),
this._dataGridField.push(d.field),d.field.setColumnWidthMatcher(this._columnWidthMatcher));return d},isRowDeletable:function(a){a=a&&!1!==a.deletable;this.meta.actions&&(a=a&&!!this.meta.actions["delete"]);return a},_processCreatedRow:function(a,b,c,d,e,f){this._rows.push(d);this._layout.addRow(e,{autoCreated:a===ECTDataGrid.NEW_ROW_INDEX,actions:f})},createDetailsLink:function(a){a=new ECTSimpleLink(MSGS.COMMON_Details,ECTConstants.EVENT_SHOW_DETAIL,a);a.addEventListener(ECTConstants.EVENT_ACTION,
this);return a},_addRow:function(){this._createColumnFields(ECTDataGrid.NEW_ROW_INDEX,!0,!0);this._isModified=!0;this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE})},deleteAllRows:function(){var a=this._getRowLength();for(a--;a;)this._deleteRow(1),a--},_deleteRow:function(a,b){b=b||!1;for(var c=this._rows[a],d=!1,e=0,f=c.length;e<f;e++){var g=c[e];!d&&g.meta.submitOnFieldChange&&(d=!0)}c.rowId&&this._sendDeleted&&this._deletedRows.push(c);this._rows.splice(a,1);
c=a;for(e=this._rows.length;c<e;c++)this._setRowIndices(this._rows[c],c);this.hasDetailsLink()&&this._detailLinks.splice(a,1);this._updateLinksIndex();this._selectFirstEditableField(this._rows[a]);this._isModified=!0;!b&&this.dispatch(ECTConstants.EVENT_CHANGE,{submitOnFieldChange:d,actionCommand:ECTConstants.EVENT_FIELD_CHANGE,metaId:this.meta.id});this.hasDetailsLink()&&!b&&this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_DELETE_DETAIL,rowIndex:a})},dispatchDummyChangeEventToReflectRowsOnTriggerRules:function(){this.dispatch(ECTConstants.EVENT_CHANGE,
{submitOnFieldChange:!0,actionCommand:ECTConstants.EVENT_FIELD_CHANGE,metaId:this.meta.id})},_updateLinksIndex:function(){if(!ECTUtil.isEmptyArray(this._detailLinks))for(var a=1,b=this._detailLinks.length;a<b;a++)this.hasDetailsLink()&&this._detailLinks[a]&&this._detailLinks[a].updateActionData&&this._detailLinks[a].updateActionData({id:a})},_updateRow:function(a,b){for(var c=this._layout.getRow(a),d=-1,e=0,f=0,g=c.length;f<g&&c[f].meta;f++)c[f].field.rowIndex.indexOf&&0==c[f].field.rowIndex.indexOf(a+
"_")&&(-1==d&&(d=f),e++);c.splice(d,e);e=0;for(f=b.length;e<f;e++)0==b[e].field.rowIndex.indexOf(a+"_")&&(c.splice(d,0,b[e]),d++);this._layout.updateRow(a,c)},_deleteProperties:clear:function(){this._layout&&(this._layout.reset(),this._layout.removeEventListener(ECTConstants.EVENT_ACTION,this),this._layout.cleanup());this._rows&&this._cleanupRowItems(this._rows);this._deletedRows&&this._cleanupRowItems(this._deletedRows);
this._deleteProperties()},cleanup:_filterDeletedRows:function(a){var b=this._sendDeleted?[]:!1;if(!ECTUtil.isEmptyArray(a))for(var c=0;c<a.length;c++){var d=a[c];d.isDeleted&&(this._isModified=!0,d.rowId&&b&&b.push(d),a.splice(c,1))}return b},reloadWithData:function(a,b){b=b||{};var c=this._layout.getDetailsInfo&&this._layout.getDetailsInfo(),d;c&&c.visible&&(d=c.index);var e=this._layout.getCollapsed();this.clear();var f=this._filterDeletedRows(a),g=this._originalArguments[0];
b.clearOriginalArguments&&delete this._originalArguments;g.isNotLastPageOfPaginatedGrid=!!b.isNotLastPage;g._reloadedWithData=!0;this.init(g,a);f&&(this._deletedRows=f);f=this.id+"_tableContainer";juic.$(f)&&(this._layout.render(f),this._layout.setCollapsed(e),d&&this._layout.showMore(d,c.writable));this._selectFocusedFieldIfAvailable()},_getDomClasses:function(){var a=[],b=0;a[b++]="ectDataGrid";this._readOnly&&(a[b++]="readMode");this.meta.hasMultiple||(a[b++]="showLastRow");this._isFormEmpty&&
(a[b++]="emptyForm");a[b++]=this.getUserDefinedClassNames();return a=a.join(" ")},setAsEmptyForm:function(){this._isFormEmpty=!0},renderHtml:function(a){this.meta.showSequenceNumber&&this.setTitle(this.meta.label+" "+(this.rowIndex||""));var b=this._getDomClasses();10<this._getRowLength()&&this._noGlobalRoundedCorners&&(b+=" noGlobalRoundedCorners");a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"',b,'"\x3e');this.renderInnerHtml(a);a.push("\x3c/div\x3e");a.addAfterRenderListener(this,"handleAfterRender")},
renderInnerHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'_tableContainer"\x3e');a.push(this._layout);a.push("\x3c/div\x3e")},handleAfterRender:_handleRowAction:function(a){switch(a.actionCommand){case ECTConstants.EVENT_DELETE:this._deleteRow(a.id);1==this._maxRows&&this._canCreateNewRow()&&(this._createColumnFields(ECTDataGrid.NEW_ROW_INDEX,!1,!0),this._initRowByDefaultMetaValue(this._rows[this._rows.length-1]));break;case ECTConstants.ACTION_UP:this._shiftUp(a.id);
this._isModified=!0;this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE});break;case ECTConstants.ACTION_DOWN:this._shiftUp(a.id+1),this._isModified=!0,this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE})}},_extractRowIndexFromEvent:function(a){return a.target&&(a.target.field?a.target.field.rowIndex:a.target.rowIndex)||a.rowIndex},handleEvent:function(a){var b,c;switch(a.type){case ECTConstants.EVENT_CHANGE:this._propagationSetterDependentFieldsClearer||
(this._propagationSetterDependentFieldsClearer=new ECTPropagationSetterDependentFieldsClearer(this.getPropagationPreferences()));a.propagationInfo&&(b=this._getRowFields(a.searchElement.rowIndex),this._propagationSetterDependentFieldsClearer.setPropagationInfo({searchElement:a.searchElement,propagations:a.propagationInfo},b));a.dependentFields&&(b||(b=this._getRowFields(a.searchElement.rowIndex)),this._propagationSetterDependentFieldsClearer.clearDependentFields(a.dependentFields,b));b=this.isModified();
this._fieldChanged||(this._fieldChanged=b);var d=(this._lastModifiedrowIndex=this._extractRowIndexFromEvent(a))&&this._getRowValue(this._lastModifiedrowIndex);d&&d.rowData&&d.rowData.coreFields&&d.rowData.coreFields[a.metaId]&&(d.rowData.coreFields[a.metaId]=a.value||a.target.getValue());var d=a.extraEventData||[],e=a.metaId||this.meta.id,f={rowIndex:this._lastModifiedrowIndex,gridMetaId:this.meta.id};this.meta.onChildDelete&&(f.onChildDelete=!!a.onChildDelete,a.onChildDelete=!1,f.onChildDelete&&
(a.onChangeParams=a.onChangeParams||{}));d.push(f);this.dispatch(ECTConstants.EVENT_CHANGE,set(a,{rowIndex:this._lastModifiedrowIndex,actionCommand:b?ECTConstants.EVENT_FORM_FIELD_CHANGE:ECTConstants.EVENT_FORM_FIELD_UNCHANGE,metaId:e,gridMetaId:this.meta.id,extraEventData:d}));this._updateOrMatchWidth();break;case ECTConstants.EVENT_ACTION:switch(a.actionCommand){case ECTConstants.EVENT_SHOW_DETAIL:b=a.actionData.id;c=this._getRowValue(b,!1,!0);this.dispatch(ECTConstants.EVENT_ACTION,set(a,{mode:this._readOnly?
ECTConstants.MODE_VIEW:ECTConstants.MODE_EDIT,rowValue:c,rowIndex:b,metaId:this.meta.id}));break;case ECTConstants.EVENT_GET_CONTEXTUAL_SEARCH_FIELDS:b=a.searchElement||a.target;d=this._extractRowIndexFromEvent(a)||b.rowIndex;e={};f=0;for(a.fields=a.fields||[];f<a.fields.length;){var g=a.fields[f];(c=this.getFieldByMetaId(g,{rowIndex:d}))?(a.fields.splice(f,1),e[g]=c.getValue()):(c=(c=this._getRowValue(d))&&c.rowData&&c.rowData.coreFields)&&"undefined"!==typeof c[g]?(a.fields.splice(f,1),e[g]=c[g]):
f++}b.setContextualSearchInfo(e);this.dispatchEvent(a);break;case ECTConstants.EVENT_CLICK:a.rowIndex=this._extractRowIndexFromEvent(a);a.extraEventData=a.extraEventData||[];a.metaId=a.metaId||this.meta.id;a.extraEventData.push({rowIndex:a.rowIndex,gridMetaId:this.meta.id});this.dispatchEvent(a);break;default:this.dispatchEvent(a)}break;case ECTConstants.EVENT_FIELDS_CHANGE:b=a.target.getFields(this._nestedLabelsCount);d=0;for(e=b.length;d<e;d++)b[d].field.rowIndex=a.target.rowIndex+"_"+d;this._updateRow(a.target.rowIndex,
b)}},_getRowFields:function(a){a=(a+"").replace(/_[0-9]*/,"");var b=[];a=this._rows[a]||[];for(var c=0;c<a.length;c++){var d=a[c];d.field&&d.field.getFields?b=b.concat(d.field.getFields(this._nestedLabelsCount)):b.push(d)}return b},_forEachFieldConditionalValidation:function(a,b){juic.assert(a,"ECTDataGrid._forEachFieldConditionalValidation: parameter should be a function.");var c={errorMsg:[],returnFlag:!0,fields:[]},d=this._minRows,e=this._maxRows,f=this._getRowLength(),g=f-1;if(g<d)return this.getTitle()?
c.errorMsg.push(MSGS.get("EMPFILE_HRIS_LABELED_GRID_MIN_ROWS_ERROR",this.getTitle(),d)):c.errorMsg.push(MSGS.get("EMPFILE_HRIS_UNLABELED_GRID_MIN_ROWS_ERROR",d)),c.returnFlag=!1,c.fields.push(this),c;if(g>e)return this.getTitle()?c.errorMsg.push(MSGS.get("EMPFILE_HRIS_LABELED_GRID_MAX_ROWS_ERROR",this.getTitle(),e)):c.errorMsg.push(MSGS.get("EMPFILE_HRIS_UNLABELED_GRID_MAX_ROWS_ERROR",e)),c.returnFlag=!1,c.fields.push(this),c;for(d=1;d<f;d++)if(1<this._maxRows||this._isRowModified(d))for(e=0,g=this._rows[d].length;e<
g;e++){var k=this._rows[d][e];if(k.field)this[a](k,c,b)}return c},validateFields:validateSubmitOnChangeFields:_shiftUp:function(a){this.hasDetailsLink()&&(this._detailLinks[a-1].updateActionData({id:a}),this._detailLinks[a].updateActionData({id:a-1}),this._swapObjects(this._detailLinks,a-1,a));this._setRowIndices(this._rows[a],a-1);
this._setRowIndices(this._rows[a-1],a);this._swapObjects(this._rows,a-1,a);this._rows[a-1].modified=!0;this._rows[a].modified=!0;if(this._isPaginatedGrid){var b=this._rows[a-1].rowId;this._rows[a-1].rowId=this._rows[a].rowId;this._rows[a].rowId=b}},_setRowIndices:function(a,b){for(var c,d=0,e=a.length;d<e;d++)c=a[d].field,c.rowIndex=b,c.getFields&&this._setNestedFieldsIndices(c.getFields(this._nestedLabelsCount),b)},_setNestedFieldsIndices:function(a,b){for(var c=0,d=a.length;c<d;c++)a[c].field.rowIndex=
b+"_"+c},_swapObjects:_getFieldsByMetaId:function(a,b){b=b||{};for(var c=[],d,e=1,f=this._getRowLength();e<f;e++)if(d=this._getFieldByMetaIdInRow(a,e,b)){if(!b.multiple)return d;c.push(d)}return b.multiple?c:null},getFieldsMeta:function(){for(var a={},b=this._rows.length,c=1;c<b;c++)this._rows[c].forEach(function(b){var c=b.meta.id;a[c]||(a[c]=b.meta)});return ECTUtil.convertMapToArray(a)},getFieldByMetaId:function(a,b){var c=set({},b),d=c.rowIndex;if("undefined"!==
typeof d)return this._getFieldByMetaIdInRow(a,d,c);c.multiple=!1;return this._getFieldsByMetaId(a,c)},getFieldListByMetaId:function(a,b){var c=set({},b);c.multiple=!0;return this._getFieldsByMetaId(a,c)},_getFieldByMetaIdInRow:function(a,b,c){var d,e=this._rows[b];if(e)for(var f=0,g=e.length;f<g;f++){d=e[f];var k=set({},c);k.multiple=!1;k.rowIndex=b;if(d=ECTUtil.searchForFieldsByMetaId(d,a,k))return d}return null},setRowValue:function(a,b){var c=this._rows[a];if(c){b.fieldValue&&(c.rowId=b.rowId,
c.id=b.id,c.rowData=b.rowData,c.modified=!!b.modified,b=b.fieldValue);for(var d=0,e=c.length;d<e;d++)for(var f=0,g=b.length;f<g;f++)if(b[f].id===c[d].meta.id){f=ECTUtil.getValueFromData(b[f]);c[d].field&&c[d].field.reloadWithData?c[d].field.reloadWithData(f):c[d].setValue(f);break}this._getRowLength()===a&&this._isRowModified(a)&&this._addNewRowOnChange(new juic.EventTarget.Event(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE}))}},_getRowLength:function(){var a=this.meta,
b=!this._readOnly&&this._hasMultiple&&1<this._maxRows&&!this._isNotLastPageOfPaginatedGrid,c=this._rows.length;a.actions&&(b=b&&a.actions.create);b&&--c;return c},handleAdditionalMeta:function(a,b,c,d){var e=this._layout.getFieldIndex(a,d);-1==e?e=this._rows.length:++e;this._layout.getMaxFieldsToShow()>e&&this._layout.setMaxFieldsToShow(e);for(var f=[],g=[],k,l,m=0,n=b.length;m<n;m++)k=b[m],a=this._createField(k,c[m],!1,d==this._rows.length,!0,!0,f,g,e,d-1),l=a.field instanceof ECTAbstractGroup||
ECTConstants.COMPLEX_FIELDS[k.type],this._rows[d].splice(e+m,0,a),k=l?null:this._createLabel(k.label,k.required,k.id),this._layout.addFieldAtPosition(k,a,{mergeCells:l,rowIndex:d},e+m)},adjustDetailsDialog:function(a){var b=this._layout.getDetailsInfo();b.visible&&(this._layout.showLess(),this._layout.showMore(a,b.writable))},deleteRowBasedOnMatchingCriteria:function(a){var b=a[0].id;a=ECTUtil.getConsumableValue(a[0].value||{});for(var b=this.getFieldListByMetaId(b,{fieldPlusOldValue:!0}),c=0,d=b.length;c<
d;c++){var e=b[c];switch(e.meta.type){case ECTConstants.TYPE_FOUNDATION_AUTOCOMPLETE:var f=e.getValueObj();if(f.id&&f.id==a.id&&f.primaryDisplayText&&f.primaryDisplayText==a.primaryDisplayText&&f.code&&f.code==a.code&&f.name&&f.name==a.name)return this._deleteRow(e.field.rowIndex,!0),!0;break;case ECTPicklistAutoComplete.FIELD_TYPE:if(e.getValue()==a.value)return this._layout.removeRow(e.field.rowIndex),!1}}}});function ECTLazyDataGrid(a,b){this.register();this._init(a,b)}
(function(){function a(a,b,c){this._attributes=c.attributes?JSON.stringify({empAttributes:c.attributes}):null;this._requestType=a;this._metaData=c;this._rowCount=(a=(this._requestParams=this._metaData.contextualFields&&this._metaData.contextualFields.requestParams)&&this._requestParams.rowCount)?parseInt(a):0;(this._rowData=b)&&0<this._rowData.length&&(this._initCount=this._rowData.length);this._rows=[]}function b(a,b,c,d){this._requestType=a;this._rowData=b;this._metaData=d;this._rowIndex=c;this._content=
{}}var c=AjaxService.getMBeanInstance(ECTConstants.CONTROLLER_LAZY_DATA_GRID),d={},e={transferDirectReports:{"undefined-direct-report":{definition:{minSize:200}},"undefined-new-manager":{metaData:{fixedWidth:221},definition:{fixedSize:300}},"undefined-manager-transfer-date":{definition:{minSize:200}}},transferJobRelations:{"undefined-replacement":{metaData:{fixedWidth:70},definition:{minSize:140,maxSize:150}},"undefined-related-user":{definition:{minSize:240}},"undefined-terminate-relations":{definition:{minSize:130,
maxSize:140}},"undefined-role-transfer-date":{definition:{minSize:110,maxSize:120}},"undefined-related-rel-type":{definition:{minSize:230}}}},f={innerScroll:!0,rowHeight:52,headerHeight:32,pageSize:12,dimension:{width:"auto",height:552}};juic.extend(ECTLazyDataGrid,juic.Component,{_init:function(b,c){this._metaData=c;this._requestType=this._metaData.contextualFields&&this._metaData.contextualFields.requestParams&&this._metaData.contextualFields.requestParams.requestType;this._itemProvider=new a(this._requestType,
b,c);this._itemProvider.addEventListener("change",this,"_onRowChanged");this._itemProvider.addEventListener("itemsAvailable",this,"_onItemsAvailable");for(var g=[],k=c.fieldsMeta,n=0;n<k.length;n++){var p=k[n],q=p.label;if(0==n){var r=this._itemProvider.getCount();null!=r&&(r="("+r+")");q=q+" "+r}q=set({id:p.id,index:n,label:new ECTLabelDgrid(q,p.required)},d);(p=(r=e[this._requestType])&&r[p.id]&&r[p.id].definition)&&set(q,p);g.push(q)}this._grid=new SFRevolutionGrid(g,this._itemProvider,f);"undefined"!=
typeof SFFluidLayout&&SFFluidLayout.addEventListener("resize",this,"_onLayoutResize")},setAsEmptyForm:cleanup:function(){this._itemProvider.removeEventListener("change",this);this._grid.cleanup();this._super()},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"ectLazyDataGrid"\x3e',this._grid,"\x3c/div\x3e")},getValue:function(a,b){var c=[],d=this._grid.getChanges();if(d)for(var e in d)c.push(this._getValueFromChange(b,e,d[e]));return c},setValue:
validateFields:function(){return this._forEachFieldValidation(function(a,b){a.checkForErrors&&a.checkForErrors()&&(b.errorMsg.push(a.getErrorMsg()),b.returnFlag=!1)})},_forEachFieldValidation:function(a){assert("function"==typeof a,"ECTLazyDataGrid._forEachFieldValidation: parameter should be a function.");for(var b={errorMsg:[],returnFlag:!0},c=this._itemProvider.getRows(),d=c.length,e=0;e<d;e++)for(var g=c[e].getRow(),f=0,r=g.length;f<r;f++){var t=g[f];t&&a(t,b)}return b},_onRowChanged:_onItemsAvailable:function(a){var b=juic.$(this.id+"gridCount");b&&(b.innerHTML="("+a.itemCount+")")},_getValueFromChange:function(a,b,c){for(var d=[],e=0;e<c.values.length;e++)d.push(this._getFieldValue(a,e,c.values[e]));return{actionId:-1,modified:!0,rowData:null,elementId:this._metaData.elementId,order:this._rowIndex,rowId:c.rowId,fieldValue:d,isLastModifiedRow:b==this._lastModifiedRowIndex}},_getFieldValue:function(a,b,c){b=this._metaData.fieldsMeta[b];return{id:b.id,value:a?c.valueObject||
c.value:c.value,group:b.group,type:b.type}},_onLayoutResize:);juic.extend(a,SFAbstractItemProvider,{getItems:function(a){var b=!1,d=(a.pageNumber-1)*a.pageSize;if(this._rowCount&&this._initCount){var e=Math.min(this._rowCount,d+a.pageSize)-1;if(d<this._initCount&&e<this._initCount){for(var b=!0,g=[],f=d;f<=e;f++){var q=this._createRow(this._rowData[f],f);g.push(q);this._rows.push(q)}this.dispatch("itemsAvailable",{itemCount:this._rowCount,items:g,pagination:a})}}if(!b){var r=
this;c.getRowData(this._requestParams,a.pageSize,a.pageNumber,this._rowCount,this._attributes,!!window.isFromWorkflowPage,!1,{callback:function(b){for(var c=[],e=0;e<b.rowData.length;e++){var g=r._createRow(b.rowData[e],d+e);c[e]=g;r._rows.push(g)}r.dispatch("itemsAvailable",{itemCount:b.rowCount,items:c,pagination:a})},errorHandler:)}},getCount:function(){return this._rowCount},getRows:function(){return this._rows},_createRow:function(a,
c){var d=new b(this._requestType,a,c,this._metaData);d.addEventListener("change",this,"_onRowChanged");return d},_onRowChanged:);juic.extend(b,SFAbstractGridRow,{cleanup:function(){for(var a in this._content)this._content[a].cleanup();delete this._events;this._super()},getColumnContent:function(a,b){var c=b.id;if(!this._content[c]){var d=b.index,f=(this._rowData.fields||this._rowData.fieldValue)[d],d=this._metaData.fieldsMeta[d],g=e[this._requestType];if(g=g&&g[d.id]&&
g[d.id].metaData)d=set({},d),set(d,g);d.isDispatchChangeEvent=!0;f=ECTFieldsFactory.instantiateFields(f,d);f.addEventListener("change",this,"_onFieldChanged");this._content[c]=f}return this._content[c]},getChanges:function(){if(this._changed){for(var a=[],b=0;b<this._metaData.fieldsMeta.length;b++){var c=this._metaData.fieldsMeta[b],d=this._content[c.id],e=d.getValue();a.push({id:c.id,value:e,valueObject:"function"==typeof d.getValueObj?d.getValueObj():null})}return{rowId:this._rowData.id,values:a}}},
setChanges:function(a){for(var b=0;b<this._metaData.fieldsMeta.length;b++){var c=a.values[b];this._content[this._metaData.fieldsMeta[b].id].setValue(c.valueObject?c.valueObject:c.value)}},getRow:function(){var a=[];if(this._changed)for(var b=0;b<this._metaData.fieldsMeta.length;b++)a.push(this._content[this._metaData.fieldsMeta[b].id]);return a},getRowId:function(){return this._rowIndex},_onFieldChanged:function(a){this._changed=!0;this.dispatch("change",{originalEvent:a,rowIndex:this._rowIndex})}})})();
CTDataGridWithDetails.FIELD_TYPE="DATAGRIDWITHDETAILS";ECTDataGridWithDetails.MAX_VISIBLE_COLUMNS=4;ECTDataGridWithDetails.DETAILS_MIN_SIZE={height:300,width:400};ECTDataGridWithDetails.setFormClass=ECTDataGridWithDetails.getFormClass=
extend(ECTDataGridWithDetails,ECTDataGrid,{initPropertiesFromMeta:function(a){a.maxFieldsToShow=a.maxFieldsToShow||ECTDataGridWithDetails.MAX_VISIBLE_COLUMNS;this._super(a);this._numberOfColumns=a.maxInlineColumns||ECTDataGridWithDetails.MAX_VISIBLE_COLUMNS;a=this._fieldsMeta;for(var b=0,c=a.length;b<c;b++)if(b>=ECTDataGridWithDetails.MAX_VISIBLE_COLUMNS||ECTConstants.COMPLEX_FIELDS[a[b].type])this._numberOfColumns=b,this._showDetailsLink=!0},initDataStructures:function(){this._super();this._detailsForm=
new (ECTDataGridWithDetails.getFormClass())(this._fieldsMeta,[],{type:ECTReadWriteForm.TYPE_READWRITE,initialModeWritable:!1!==this._writable,elementId:this.getElementId()});this._detailsForm.addEventListener(ECTConstants.EVENT_CHANGE,this);this._context=new ECTRoundedCornerBox(MSGS.COMMON_Details,this._detailsForm,!0);this._doneBtn=new SFCommandButton(MSGS.COMMON_Done,!0,!0);this._doneBtn.setActionCommand(ECTConstants.COMMAND_DONE);this._doneBtn.addEventListener(ECTConstants.EVENT_ACTION,this,"_saveDetails");
this._context.setFooterButtons([this._doneBtn]);this._context.setFooterButtonsVisibility(!0)},createDetailsLink:function(a){a=new ECTReadWriteLink(MSGS.COMMON_Details,ECTConstants.EVENT_SHOW_DETAIL,a);a.addEventListener(ECTConstants.EVENT_ACTION,this,"_showDetails");return a},getRowValue:function(a,b){var c=this._rows[a],d={actionId:-1};d.modified=this._isRowModified(c);d.rowId=c.rowId;d.rowData=c.rowData;d.elementId=this.getElementId();d.order=a;if(!b||d.modified){d.fieldValue=[];for(var e=0,f=c.length;e<
f;e++){var g={},k=c[e];g.id=k.meta.id;g.value=k.getValueObj?k.getValueObj():k.getValue(b);g.group=k.meta.group;g.type=k.meta.type;d.fieldValue.push(g)}}return d},getDetailsForm:function(){return this._detailsForm},_saveDetails:function(a){this._detailsForm.isWritable()&&(this._currentRowValue.fieldValue=this._detailsForm.getValue(!1,!0),this._currentRowValue.modified=this._detailsForm.isModified(),a=this._rows.length-1===this._currentRowValue.rowIndex,this.setRowValue(this._currentRowValue.rowIndex,
this._currentRowValue),a&&this._currentRowValue.modified&&!1!==this._hasMultiple&&this._addNewRowOnChange(new juic.EventTarget.Event(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE})),this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE}));delete this._currentRowValue;SFOverlayMgr.removeEventListener("overlayRendered",this,"_resizeDetails");SFOverlayMgr.removeOverlay(this._context.id)},_showDetails:function(a){var b=
a.isWriteMode;a=a.actionData.id;this._currentRowValue=this.getRowValue(a);this._currentRowValue.rowIndex=a;this._detailsForm.setValue(this._currentRowValue.fieldValue);this._context.setWritable(b);SFOverlayMgr.addEventListener("overlayRendered",this,"_resizeDetails");SFOverlayMgr.showOverlay(this._context,!0);this._detailsForm.setWritable(b)},_resizeDetails:function(a){a=juic.$(this._context.id);var b=juic.$(this._detailsForm.id);if(b&&a){SFDom.addClass(a,"dataGridDetailsView");var c=SFDom.getViewportHeight()-
150,d=SFDom.getViewportWidth()-250,e=ECTDataGridWithDetails.DETAILS_MIN_SIZE.width,f=ECTDataGridWithDetails.DETAILS_MIN_SIZE.height;b.offsetWidth>d?(SFDom.setStyle(b,"width",d+"px"),SFDom.setStyle(a,"width",d+30+"px")):b.offsetWidth<e?(SFDom.setStyle(b,"width",e+"px"),SFDom.setStyle(a,"width",e+30+"px")):(SFDom.setStyle(b,"width",b.offsetWidth+"px"),SFDom.setStyle(a,"width",b.offsetWidth+30+"px"));b.offsetHeight>c?SFDom.setStyle(b,"height",c+"px"):b.offsetWidth<f?SFDom.setStyle(b,"height",f+"px"):
SFDom.setStyle(b,"height",b.offsetHeight+"px");SFOverlayMgr.centerComponent(this._context.id)}},cleanup:function(){this._detailsForm&&this._detailsForm.cleanup();this._doneBtn&&this._doneBtn.cleanup();this._context&&this._context.cleanup();this.unregister()}});extend(ECTReadWriteLink,ECTSimpleLink,{renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'_readWriteLink" class\x3d"ECTReadWriteLink"\x3e');var b=Util.escapeHTML(this._label);if(this._enabled){var c=Util.escapeHTML(this._title);a.push('\x3ca title\x3d"',c,'" class\x3d"link writeComp ',this.generateFDClasses("link"),'" href\x3d"javascript:void(0);" onclick\x3d"',this.fireCode("_click",!0),';return false;"\x3e',b,"\x3c/a\x3e");a.push('\x3ca title\x3d"',c,'" class\x3d"link readComp ',this.generateFDClasses("link"),
'" href\x3d"javascript:void(0);" onclick\x3d"',this.fireCode("_click",!1),';return false;"\x3e',b,"\x3c/a\x3e")}else h.push('\x3cspan class\x3d"disabledLink"\x3e',b,"\x3c/span\x3e");a.push("\x3c/div\x3e")},_click:function(a){this._enabled&&this.dispatch("action",{actionCommand:this._actionCommand,actionData:this._actionData,isWriteMode:a})}});function ectRowIconGroup(a,b,c,d,e,f,g){assert(null!==a&&""!==a,"actionId cannot be null or empty");this.register();this._init(a,b,c,d,e,f,g)}
ectRowIconGroup.prototype=function(){return set(new Component,{_init:function(a,b,c,d,e,f,g){this._actionId=a;this._controllerName=b;this._enableUp=c;this._enableDown=d;this._showDelete=e;this._showEdit=f;this._hideIconIfDisabled=g?!0:!1},getActionId:visibility:!0,renderHtml:function(a){a.push('\x3cul id\x3d"',this.id,'" class\x3d"rowIconGroup" style\x3d"visibility:',this.visibility?"visible":"hidden",'"\x3e');this._showDelete&&this._renderIcon(a,"delete",MSGS.COMMON_Remove,
"ectDeleteIcon",!0);this._showEdit&&this._renderIcon(a,"correct",MSGS.COMMON_Edit,"ectEditIcon",!0);this._renderIcon(a,"up",MSGS.COMMON_Move_Up,"ectMoveUpIcon",this._enableUp);this._renderIcon(a,"down",MSGS.COMMON_Move_Down,"ectMoveDownIcon",this._enableDown);a.push("\x3c/ul\x3e")},setVisibility:function(a){var b=juic.$(this.id);this.visibility=a;b&&(b.style.visibility=a?"visible":"hidden")},_setIconEnabled:function(a,b){var c=juic.$(this.id+"_"+b);a?c.className.replace("Disabled","Icon"):c.className.replace("Icon",
"Disabled")},_setIconHidden:function(a,b){juic.$(this.id+"_"+b).style.visibility=a?"hidden":"visible"},setUpIconEnabled:function(a){this._hideIconIfDisabled?this._setIconHidden(!a,"up"):this._setIconEnabled(a,"up");this._enableUp=a},setDownIconEnabled:function(a){this._hideIconIfDisabled?this._setIconHidden(!a,"down"):this._setIconEnabled(a,"down");this._enableDown=a},_renderIcon:function(a,b,c,d,e){a.push('\x3cli class\x3d"action_item"\x3e\x3ca id\x3d"',this.id,"_",b,'" style\x3d"cursor:pointer;');
!e&&this._hideIconIfDisabled&&a.push("visibility:hidden;");a.push('" href\x3d"javascript:void(0);"');a.push(' title\x3d"',c,'" ');e||this._hideIconIfDisabled||(d=d.replace("Icon","Disabled"),a.push(' aria-disabled\x3d"true" '));a.push(' class\x3d"',this.isFioriFDEnabled()?Util.generateFDClasses("link"):d);a.push('" onclick\x3d"',this.fireCode("_handleOnClick",b),';return false;"\x3e');this.isFioriFDEnabled()&&(b=this.getFDIcon(d))&&a.push('\x3ci class\x3d"',Util.generateIconClasses(b),'"\x3e\x3c/i\x3e');
a.push("\x3c/a\x3e");a.push("\x3c/li\x3e")},getFDIcon:_handleOnClick:function(a){switch(a){case "correct":case "delete":this.dispatch("action",{actionCommand:a,id:this._actionId,name:this._controllerName});break;case "up":this._enableUp&&this.dispatch("action",{actionCommand:a,id:this._actionId,name:this._controllerName});break;case "down":this._enableDown&&this.dispatch("action",
{actionCommand:a,id:this._actionId,name:this._controllerName})}},setActionId:)}();function ECTFindUserField(a,b){this.register();this.init(a,b)}
ECTFindUserField.prototype=function(){return set(new ECTAbstractInputField,{DEFAULT_FIND_TYPE:"fullname",init:function(a,b){this._value=a&&"object"==typeof a?a:a&&a.length&&"N/A"!==a&&"-"!==a?eval("("+a+")"):"";this._oldValue=set({},this._value);this._findType=b.findType||this.DEFAULT_FIND_TYPE;this.setOptions(b);ECTSearchAdoptionUtils.isForceNewSearch&&"delegateeUser"==b.id?(this._options.searchOptions={},this._options.searchOptions.defaultSearchValues=ECTSearchAdoptionUtils.getSearchCriteriaForWorkflow(),
this._component=ECTSearchAdoptionUtils.initializeWorkflowSearchWrapper(this._findType,this._options)):this._component=this._options.searchOptions&&this._options.searchOptions.searchType&&this._options.searchOptions.searchType===ECTConstants.SF_PERSON_AUTOCOMPLETE_SEARCH?ECTSearchAdoptionUtils.initializeWorkflowSearchWrapper(this._findType,this._options):new SFAutoComplete(this._findType,this._options);this._component.addEventListener("blur",this);this._component.addEventListener("focus",this);this._component.addEventListener("action",
this);this._value&&this._component.setValue(this._value,!0);this._isRequired=b&&b.required;this._ectFindUserFieldNotCombobox=!0},setOptions:function(a){this._options=set({},a);a.defaultValue&&"object"===typeof a.defaultValue&&(this._options.defaultValue=set({},a.defaultValue));this._options.required=!1;this._writable=a.writable;this._options.inputSize=this._options.size||30;this._options.maxDisplayed=this._options.maxDisplayed||30;this._options.readOnlyClass=this._writable?"":this._readOnlyClass;
this._options.linkToQuickCard=a.linkToQuickCard;a=-1!=this._options.id.indexOf("hrId")?"addNoHr":-1!=this._options.id.indexOf("manager")?"addNoMgr":void 0;var b=0;this._options.autoCompleteHideUserName&&(b=1);this._options.autoComplete={addOption:a,enablePhoto:this._options.usePhotoForAutoComplete?this._options.usePhotoForAutoComplete:!1,hideUserName:b,maxResultsDisplayed:this._options.maxDisplayed,universalAutoCompSpan:"formElement",includeInactive:!!this._options.includeInactive,includeExternalUsers:!!this._options.includeExternalUsers,
includeExternalUsersNonMtr:!!this._options.includeExternalUsersNonMtr,autoCompleteLabel:this._options.label};if(this._options.customURIParams){var c=this._options.secondaryDisplayItems;this._options.autoComplete.params=this._options.customParams;this._options.autoComplete.URIParamsArr=this._options.customURIParams;this._options.autoComplete.getCustomLineItemInfo=function(a,b){secondaryDisplayText="";for(item in c)secondaryDisplayText=(""==secondaryDisplayText?"":secondaryDisplayText+",")+a[c[item]];
return secondaryDisplayText}}},setModel:function(a){assert(this._writable,"Field should be writable!");this._sfError.unregister();this._component.cleanup();this._findType=a.findType||this._findType;this.setOptions(a);this._component=this._options.searchOptions&&this._options.searchOptions.searchType&&this._options.searchOptions.searchType===ECTConstants.SF_PERSON_AUTOCOMPLETE_SEARCH?new SFPersonAutoCompleteWrapper([{version:1,arguments:[this._findType,this._options]},{version:2,arguments:{additionalCriteria:this._options.searchOptions.defaultSearchValues}}],
{}):new SFAutoComplete(this._findType,this._options);juic.$(this.id+"_ectACBox")&&(juic.$(this.id+"_ectACField").innerHTML="",this._component.render(this.id+"_ectACField"))},reset:function(){this.isModified()&&(this.setValue(this._oldValue),this.setErrorMsg(),this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_UNCHANGE}));this._updateQCLink()},setEnabled:function(a){var b=juic.$(this.id+"_fieldFocusMark");this._enabled=a;b&&(a?SFDom.removeClass(b,"fieldFocusMarkDisabled"):
SFDom.addClass(b,"fieldFocusMarkDisabled"));this._component.setDisabled(!a)},isModified:function(){return!(this._oldValue&&this._oldValue.userId===this._value.userId)},getValue:function(){return this._component.getValue()},setValue:function(a){this._value=""===a||null===a||void 0===a?{userId:"",userDisplayValue:""}:a;this._component.setValue(this._value);!this._writable&&(a=juic.$(this.id+"_read"))&&(a.innerHTML=this._getDisplayValue())},initByDefaultMetaValue:function(){this._initByDefaultMetaValue(this._options)},
getUserObject:function(){return this._component.getUserObject()},getSelectedObject:function(){return this._component.getSelectedObject()},setSelectedObject:function(a){this._component.setSelectedObject(a)},cleanup:function(){ECTValidationMgr.unbindValidator(this);this._component.cleanup();this.unregister()},_showQuickCard:function(){var a=this._value&&this._value.userId;a&&Quickcard.newInstance({userId:a,showCloseIconByDefault:!0}).show(this.id+"_qc",!0,this.id+"_qc")},_renderWriteHtml:function(a){this._component.renderHtml(a)},
_getDisplayValue:function(){var a=this._component;return Util.escapeHTML("user"==a.type?a.value?a.value.userDisplayValue:"":a.value)},renderHtml:function(a){this._writable&&this._drawRoundedCorners(a,"comboBox ");a.push("\x3cspan class\x3d'",this._writable?" readComp":" read_only","' id\x3d'",this.id,"_read'\x3e");a.push(this._getDisplayValue());a.push("\x3c/span\x3e");this._options.linkToQuickCard&&(a.push("\x3ca role\x3d'button' id\x3d'",this.id,"_qc' class\x3d'ectFindUserQCLinkIcon ",this._value&&
this._value.userId?"":"hide"," ",this.generateFDClasses("button",["transparent"]),"' tabindex\x3d'",this._value.userId?"0":"-1","' title\x3d'",MSGS.get("ECT_FIND_USER_QC_LINK_DESC",this._getDisplayValue()),"' onclick\x3d'",this.fireCode("_showQuickCard"),"' onkeydown\x3d'if(event.KeyCode\x3d\x3d\x3d13 || event.keyCode\x3d\x3d\x3d32){",this.fireCode("_showQuickCard")," return false;}' aria-haspopup\x3d'true' aria-hidden\x3d'",!this._value.userId,"'\x3e"),this.isFioriFDEnabled()&&a.push("\x3ci class\x3d'ectFindUserIcon ",
Util.generateIconClasses("business-card"),"'\x3e\x3c/i\x3e"),a.push("\x3c/a\x3e"))},_updateQCLink:function(){var a=this._value&&this._value.userId,b=juic.$(this.id+"_qc");b&&(SFDom[a?"removeClass":"addClass"](b,"hide"),b.setAttribute("tabindex",a?"0":"-1"),b.setAttribute("aria-hidden",a?"false":"true"),b.setAttribute("title",MSGS.get("ECT_FIND_USER_QC_LINK_DESC",this._getDisplayValue())))},setFontColor:function(a){var b=juic.$(this._component.id);b&&!this.isFioriFDEnabled()&&(b.style.color=a)},_change:function(){var a=
this;setTimeout(function(){var b=ECTConstants.EVENT_FIELD_UNCHANGE;a.isModified()?(b=ECTConstants.EVENT_FIELD_CHANGE,a.setFontColor(AccessibilityPrefs.isLowVisionEnabled()?"":ECTConstants.CHANGED_COLOR)):a.setFontColor(ECTConstants.UNCHANGED_COLOR);a.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:b})},500);this._updateQCLink()},handleEvent:function(a){switch(a.type){case "blur":var b=this;this.dispatch("blur");setTimeout(function(){b.checkForErrors();var a=juic.$(b._component.id);b.setErrorState(a);
b.setFocus(!1)},50);break;case "action":"itemSelect"===a.actionCommand||a.actionCommand===ECTConstants.EVENT_CHANGE||"clearSelection"===a.actionCommand?(this.setErrorMsg(),a.actionCommand===ECTConstants.EVENT_CHANGE?this._value.userId=this._component.getValue():this._value="clearSelection"===a.actionCommand?{userId:"",userDisplayValue:""}:a.actionData,this._change()):"focus"===a.actionCommand?(this.setFocus(!0),this.dispatch("focus")):this.dispatch("action",{actionCommand:a.actionCommand,actionData:a.actionData})}}})}();
"undefined"===typeof ECTValidationMgr&&(window.ECTValidationMgr=function(){function a(){}a.prototype=function(){unction c(){}function d(){}function e(){}function f(){}function g(){}function k(){}function l(){}function m(){}function n(){}function p(){}function q(){}function r(){}function t(){}a.prototype=function(){return set(new Component,{setValue:function(a){this._value=a;"object"!==typeof this._value&&void 0!==this._value&&(this._value=this._value.toString())},
setOptions:function(a){this._options=a},preValidate:function(){return!!(this._value&&"undefined"!=typeof this._value.trim&&0<this._value.trim().length)}})}();c.prototype=function(){return set(new a,{validate:function(){this._value=ECTUtil.toDBString(this._value);return this.preValidate()?/^[-|+]?(\d\d*\.\d*$)|(^[-|+]?\d\d*$)|(^[-|+]?\.\d\d*$)/.test(this._value):!0}})}();d.prototype=function(){return set(new a,{validate:function(){this._value=ECTUtil.toDBString(this._value);return this.preValidate()?
/^\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*$/.test(this._value):!0}})}();e.prototype=function(){return set(new a,{validate:function(){return this._value.length&&"INVALID"==this._value?!1:!0}})}();f.prototype=function(){return set(new a,{validate:function(){this._value=ECTUtil.toDBString(this._value);return this.preValidate()?/^\s*(\+|-)?\d+\s*$/.test(this._value):!0}})}();g.prototype=function(){return set(new a,{validate:function(){return this._value?"object"===typeof this._value?Array.isArray(this._value)?
!ECTUtil.isEmptyArray(this._value):!ECTUtil.isEmptyObject(this._value):0<this._value.trim().length:this._value}})}();k.prototype=function(){return set(new a,{validate:function(){var a=new g;a.setValue(this._value);return a.validate()}})}();l.prototype=function(){return set(new a,{validate:function(){assert(this._options,"Validation Options is undefined!");assert(this._options.regexp,"Validation Options regExp is undefined!");if(!this.preValidate())return!0;var a=new RegExp(this._options.regexp);"object"==
typeof this._value&&(this._value=dump(this._value));return a.test(this._value)}})}();m.prototype=function(){return set(new a,{validate:function(){assert(this._options,"Validation Options is undefined!");var a=this._options.func;assert(a,"Validation Options func is undefined!");a=a.exec([this._value]);return this._options.negate?!a:a}})}();n.prototype=function(){return set(new a,{validate:function(){return this.preValidate()?/(^[a-z]([a-z_\.]*)@([a-z_\.]*)([.][a-z]{3})$)|(^[a-z]([a-z_\.]*)@([a-z_\.]*)(\.[a-z]{3})(\.[a-z]{2})*$)\/i/.test(this._value):
!0}})}();p.prototype=function(){return set(new a,{validate:function(){assert(this._options,"Option maxLength is required for the validation.");assert(this._options.maxlength,"Option maxLength is required for the validation.");this._value=ECTUtil.toDBString(this._value);return this.preValidate()?this._options.maxlength>=this._value.length:!0}})}();q.prototype=function(){return set(new a,{validate:function(){assert("object"==typeof this._value,"Value should be an Object for the validation.");assert(this._options,
"Option maxLength is required for the validation.");if(this._options.required){var a=new k;a.setValue(this._value.salary);var b=a.validate();a.setValue(this._value.salaryRateUnits);a=a.validate();return b&&a}}})}();r.prototype=function(){return set(new a,{validate:function(){assert("object"==typeof this._value,"Value should be an Object for the validation.");assert(this._options,"Option maxLength is required for the validation.");if(!this._options.required){var a=new g;a.setValue(this._value.salary);
var b=a.validate();if(!b)return!b}a=new c;a.setValue(this._value.salary);b=a.validate()&&0<=parseFloat(this._value.salary);a.setValue(this._value.salaryRateUnits);a=a.validate()&&0<=parseFloat(this._value.salaryRateUnits);return b&&a}})}();t.prototype=function(){return set(new a,{setValue:function(a){a&&"object"===typeof a&&a.constructor===Array&&(this._value=a)},validate:function(){if(!this._value||0==this._value.length)return!1;for(var a=!1,b=0,c=this._value.length;b<c&&!a;b++)a=!this._value[b]||
this._value[b].trim&&!this._value[b].trim()?!1:!0;return a}})}();return set(new Component,{getValidator:function(a){switch(a){case "number":return new c;case "double":return new d;case "dateFormat":return new e;case "long":return new f;case "notempty":return new g;case "required":return new k;case "custom":return new l;case "function":return new m;case "email":return new n;case "maxlength":return new p;case "salaryFieldRequired":return new q;case "salaryFieldNumber":return new r;case "valueArray":return new t}}})}();
return set(new Component,{init:bindValidator:function(a,c,d){assert(a.id,"Component not registered!");assert(c,"validationType is undefined!");assert("string"===typeof c,"validationType should be string!");this._validate[a.id]||(this._validate[a.id]={component:a,options:[]});d=d?d:{};d.type=c;for(var b=!1,f=0,g=this._validate[a.id].options,k=g.length;f<k;f++)g[f].type==c&&(g[f]=d,b=!0);b||this._validate[a.id].options.push(d)},validate:function(a){"object"===
typeof a&&a.id&&(a=a.id);if(this._validate[a])for(var b=this._validate[a].component.getValue(),d=0,e=this._validate[a].options,f=e.length;d<f;d++){var g=e[d].message,k=this._validationFactory.getValidator(e[d].type||e[d]);k.setValue(b);k.setOptions(e[d]);if(!k.validate())return{result:!1,message:g,component:this._validate[a].component}}return{result:!0}},validateAll:function(){this.garbageCollect();var a=[],c;for(c in this._validate){var d=this.validate(c);d.result||a.push({component:this._validate[c].component,
message:d.message})}return 0<a.length?{result:!1,message:a}:{result:!0}},isComponentBoundToValidator:function(a){"object"===typeof a&&a.id&&(a=a.id);return!!this._validate[a]},addValidationCriteria:function(a,c,d){"object"===typeof a&&a.id&&(a=a.id);assert(this._validate[a],"Component is not bound to Validation Manager!");assert(c,"validationType is undefined!");d.type=c;this._validate[a].options.push(d)},removeValidationCriteria:function(a,c){"object"===typeof a&&a.id&&(a=a.id);assert(this._validate[a],
"Component is not bound to Validation Manager!");assert(c,"validationType is undefined!");for(var b=0,e=this._validate[a].options,f=e.length;b<f;b++)if(e[b].type===c)return e.splice(b,1),!0;return!1},unbindValidator:function(a){"object"===typeof a&&a.id&&(a=a.id);delete this._validate[a]},garbageCollect:function(){for(var a in this._validate)this._validate[a].component&&this._validate[a].component.unregister||delete this._validate[a]},cleanup:)}(),ECTValidationMgr.init());
(function(){var a=window;a&&!a.pageHeaderJsonData&&(a=window.parent);a=(a=a&&a.pageHeaderJsonData)&&a.settings;window.ECTCalendar=a&&"false"!==a.calendarWidgetEnabled?ECTCalendarWrapper:ECTCalendarLegacy})();function ECTCalendarWrapper(a,b){b=b||{};b.ectControl=!0;this._super(a,b)}ECTCalendarWrapper.VIEW_TYPE_LINK="link";ECTCalendarWrapper.FIELD_TYPE_DATE="DATE";ECTCalendarWrapper.FIELD_TYPE_CAL="calendar";
(function(){juic.extend(ECTCalendarWrapper,SFDatePickerWidget,{bindSpecificValidators:function(a){ECTValidationMgr.bindValidator(this,"dateFormat",{message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_FORMAT,a.label,sfMessageFormat.format(MSGS.COMMON_ERR_DATA_EXPECTED,MSGS.COMMON_DateFormatExample))})},bindValidatorsBasedOnNewMeta:function(a){ECTValidationMgr.unbindValidator(this);this.bindCommonValidators&&this.bindCommonValidators(a);this.bindValidators&&this.bindValidators(a)},bindCommonValidators:function(a){a.validationRegex&&
ECTValidationMgr.bindValidator(this,"custom",{regexp:a.validationRegex,message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_FORMAT,a.label,a.type)})},bindValidators:function(a){a.required&&ECTValidationMgr.bindValidator(this,"required",{message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_REQUIRED,a.label)});"DECIMAL"!==a.type&&"TextArea"!=a.type&&a.maxLength&&0<=a.maxLength&&ECTValidationMgr.bindValidator(this,"maxlength",{message:sfMessageFormat.format(MSGS.EMPFILE_HRIS_DATA_LONG,a.label,a.maxLength),
maxlength:a.maxLength});this.bindSpecificValidators(a)},checkForErrors:function(){var a=ECTValidationMgr.validate(this);a&&!a.result?(this._errorMsg=a.message,this._hasError=!0):(this._errorMsg="",this._hasError=!1);this.setErrorMsg(this._errorMsg);return this._hasError}})})();function ECTCalendarLegacy(a,b){this.register();this.init(a,b)}ECTCalendarLegacy.VIEW_TYPE_LINK="link";ECTCalendarLegacy.FIELD_TYPE_DATE="DATE";ECTCalendarLegacy.FIELD_TYPE_CAL="calendar";
juic.extend(ECTCalendarLegacy,ECTAbstractInputField,{dateformatter:new DateFormat(MSGS.COMMON_DateFormat),ISO8601Dateformatter:new DateFormat(ECTConstants.SERVER_DATE_FORMAT),init:function(a,b){this._config=b;this._isModified=this.stopRecreate=!1;this._defaultToday=this._config.defaultToday;this._calendarView=new ECTCalendarView(a,b);this._calendarView.addEventListener("dateSelected",this);this._calendarView.addEventListener("clickedOnCalendar",this);this._calendarView.addEventListener("calendarReDrawn",
this);this._calendarView.addEventListener("calendarReFocus",this);this._calendarView.addEventListener("dateFocussed",this);this._viewType=this._config.viewType;this._viewTypeLink=this._viewType===ECTCalendarLegacy.VIEW_TYPE_LINK;Util.browserInfo.ie&&10>Util.ieVersion(!0)&&AccessibilityPrefs.isKeyboardOnlyNavigationEnabled()&&(this._viewTypeLink=!1);this._label=b.label?b.label:"";this._ariaLabelledBy=b.labelledBy||null;this.setValue(a);this.setWritable(!1!==this._config.writable);this._viewTypeLink&&
(this._triangleIcon=new SFTriangle({direction:"bottom",inherit:!0}));this._autoFormater=new ECTKeyPressAutoFormatter(MSGS.COMMON_DateFormat);this._setHideCalPopupOnDefFocusByConfig();this._isRequired=b&&b.required},_setHideCalPopupOnDefFocusByConfig:function(){this._hideCalPopupOnDefFocus=!(!this._config||!this._config.hideCalPopupOnDefFocus)},setVisible:function(a){!0===a?(Util.addClass(juic.$(this.id),"show"),Util.removeClass(juic.$(this.id),"hide")):(Util.addClass(juic.$(this.id),"hide"),Util.removeClass(juic.$(this.id),
"show"))},cleanup:function(){this._hidecalendar();this._calendarView.cleanup();this.unregister()},_getFormattedValue:function(a){return a&&a.length?(a=this.dateformatter.parse(a))?this.ISO8601Dateformatter.format(a):"INVALID":""},getValue:function(){this._writable&&(this._value=this._getElementValue());var a=this._value;a===MSGS.COMMON_DateFormatExample&&(a="");return this._getFormattedValue(a)},getValueLocalFormat:function(){if(this._writable){var a=this._getElementValue();return a===MSGS.COMMON_DateFormatExample?
"":a}return this._value},isModified:function(){return this._isModified=this._oldValue!==this._getElementValue()},setValue:function(a){if(a&&0!=a.trim().length){var b=this.ISO8601Dateformatter.parse(a.trim());this._value=b?this.dateformatter.format(b):a;this._viewTypeLink&&this.dateformatter.format(new Date)===this._value&&(this._value=MSGS.EMPFILE_HRIS_TODAY)}else this._value=this._defaultToday?this._viewTypeLink?MSGS.EMPFILE_HRIS_TODAY:this.dateformatter.format(new Date):MSGS.COMMON_DateFormatExample;
this._tempOldValue=this._value||this._oldValue;this._oldValue||(this._oldValue=this._value);if(a=this._writable?juic.$(this.id):juic.$(this.id+"_read"))this._writable?this._setElementValue(this._value):a.innerHTML=this._value!=MSGS.COMMON_DateFormatExample?this._value:"",this._hidecalendar()},initByDefaultMetaValue:function(){this._initByDefaultMetaValue(this._config)},reset:function(){this.isModified()&&(this.setValue(this._oldValue),this._isModified=!1,this.checkForErrors(),this._hidecalendar(),
this._setHideCalPopupOnDefFocusByConfig(),this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_UNCHANGE,hasError:this._hasError}))},_isDateEmpty:_renderWriteHtml:function(a){a.push('\x3cinput class\x3d"formElement" type\x3d"text" id\x3d"',this.id,'" aria-haspopup\x3d"true" aria-required\x3d"',this._isRequired,'" ');this._addCommonAriaAttributes(a);a.push('onchange\x3d"',this.fireCode("_change"),'" onkeypress\x3d"',this.fireCode("_keypress"),
'" onfocus\x3d"',this.fireCode("_focus"),'" onclick\x3d"',this.fireCode("_click"),'" onblur\x3d"',this.fireCode("_blur"),'" ');a.push('placeholder\x3d"',MSGS.COMMON_DateFormatExample,'" ');a.push('value\x3d"',escapeHTML(this._value),'" size\x3d"12" title\x3d"',MSGS.get("COMMON_INPUT_TITLE",""),'" /\x3e')},renderHtml:function(a){this._writable&&(this._viewTypeLink?(a.push('\x3ca title\x3d"',MSGS.get("COMMON_INPUT_TITLE",""),'" class\x3d"link" aria-haspopup\x3d"true" role\x3d"button" id\x3d"',this.id,
'" '),this._addCommonAriaAttributes(a),a.push('onclick\x3d"',this.fireCode("_focusLinkView"),'return false;" href\x3d"javascript:void(0);" \x3e\x3cspan id\x3d"',this.id+"_dateTxt",'"\x3e',Util.escapeHTML(this._value),"\x3c/span\x3e",this._triangleIcon,"\x3c/a\x3e")):this._drawRoundedCorners(a,"calendarComp"));a.push('\x3cspan id\x3d"',this.id,'_read" class\x3d"',this._readOnlyClass,'"\x3e',this._isDateEmpty(this._value)?"":Util.escapeHTML(this._value),"\x3c/span\x3e")},_addCommonAriaAttributes:function(a){this._ariaLabelledBy&&
a.push('aria-labelledby\x3d"',this._ariaLabelledBy,'" ');this._label&&a.push('aria-label\x3d"',Util.escapeHTML(this._label),'" ')},getWriteFieldReferenceId:function(){return this.id},_hidecalendar:function(){juic.$(this.id)&&!this._viewTypeLink&&this._updateWrapperClassName();this._hideCalPopupOnDefFocus=this.stopRecreate=!1;SFDOMEvent.removeListener(window.document,"keydown",this._keyEvents,this);SFDOMEvent.removeListener(window.document,"click",this._hideCallbackFn,this);window.ECTUtil.isiOs()&&
SFDOMEvent.removeListener(window.document,"touchend",this._hideOnBlur,this);SFPositionManager.removeEventListener("positionFixed");clearInterval(this.moveInterval);this.moveInterval=null;this._calendarView.dispatch("hide")},_hideOnBlur:function(){var a=this;this.hideTimeout=setTimeout(function(){a.checkForErrors();a._hidecalendar();a.dispatch("externalBlur");a.setFocus(!1)},700)},_blur:function(){this._hideOnBlur();this._setDefaultDate();this.setFocus(!1)},_dispatchDOMOnChangeEvent:function(){this._isModified=
this._oldValue!==this._getElementValue();this.checkForErrors();if(!this._hasError||this._config.isDispatchChangeEvent){var a=this.isModified()?"fieldChange":"fieldUnChange";this.dispatch("change",{actionCommand:a,value:this.getValue(),oldValue:this._getFormattedValue(this._oldValue),tempOldValue:this._getFormattedValue(this._tempOldValue)})}},_change:function(){this._hidecalendar();this._dispatchDOMOnChangeEvent()},_keypress:function(a){var b=this,c=juic.$(this.id);a=a||window.event;a=SFDOMEvent.getKeyName(a);
this._formatTimer&&(clearTimeout(this._formatTimer),delete this._formatTimer);"BACKSPACE"!==a&&(this._formatTimer=setTimeout(function(){c.value=b._autoFormater.getFormattedString(c.value);b._dispatchDOMOnChangeEvent()},250));setTimeout(function(){!c.value.trim().length||b._config.PIIField||b._config.piiField||b._hideOnBlur()},100)},_showCalPopup:function(){var a=null;Util.isRTL()&&(a={origin:{vertical:"bottom",horizontal:"right"},menu:{vertical:"top",horizontal:"right"},offset:{vertical:0,horizontal:0}});
var b={component:this._calendarView,originId:this.id,fixPoint:a};ECTUtil.isiOs()&&(b.showRelativeToViewport=!0);SFPositionManager.show(b);SFPositionManager.addEventListener("positionFixed",this);var c=this;clearInterval(this.moveInterval);this.moveInterval=null;this.moveInterval=setInterval(function(){SFPositionManager.moveTo(c._calendarView.id,a,c.id)},500);SFDOMEvent.addListener(window.document,"keydown",this._keyEvents,this);window.ECTUtil.isiOs()&&SFDOMEvent.addListener(window.document,"touchend",
this._hideOnBlur,this);this._viewTypeLink&&SFDOMEvent.addListener(window.document,"click",this._hideCallbackFn,this)},_focusLinkView:function(a){SFDOMEvent.stopPropagation(a);this.stopRecreate||this._showCalPopup()},_click:_focus:function(){this._tempOldValue=this._getElementValue();this.stopRecreate||(this._calendarView.setValue(this._tempOldValue),this._clearDefaultDate(),this._showCalPopup(),this.setFocus(!0));this._focusFlag=!0;this._updateWrapperClassName();
this._hideCalPopupOnDefFocus&&this._hidecalendar()},_keyEvents:function(a){switch(SFDOMEvent.getCharCode(a)){case 27:this._hidecalendar();this.setFocus(!0);break;case 49:a.shiftKey&&a.ctrlKey&&this._calendarView.setFocus()}},_setDefaultDate:_clearDefaultDate:function(a){this._getElementValue()===MSGS.COMMON_DateFormatExample?this._setElementValue(""):juic.$(this.id).select();a&&this._setElementValue(MSGS.COMMON_DateFormatExample)},
_hideCallbackFn:function(a,b){try{this._isClickOutsideOfCalendar(this._calendarView,document.activeElement)&&this._hidecalendar()}catch(c){}},_isMatchingOverlay:function(a){if(a=juic.$(a.positionInfo.overlay.overlayId)){a=a.childNodes;for(var b=0;b<a.length;b++)if(a[b].id===this._calendarView.id)return!0}return!1},_isClickOutsideOfCalendar:function(a,b){return a&&b?!SFDom.isAncestor(juic.$(a.getReferenceId()),b):!0},handleEvent:function(a){switch(a.type){case "dateFocussed":clearTimeout(this.hideTimeout);
this.hideTimeout=null;this.stopRecreate=!0;this._focus();break;case "dateSelected":this._setElementValue(a.datevalue);this.stopRecreate=!0;juic.$(this.id).focus();var b=this;window.setTimeout(function(){b._change()},1);break;case "positionFixed":this._isMatchingOverlay(a)&&(this._positionInfo=a.positionInfo,this.dispatchEvent(a));break;case "clickonError":juic.$(this.id).focus();break;case "clickedOnCalendar":a.focusState?(SFDOMEvent.removeListener(window.document,"click",this._hideCallbackFn,this),
window.ECTUtil.isiOs()&&SFDOMEvent.removeListener(window.document,"touchend",this._hideOnBlur,this),clearTimeout(this.hideTimeout),this.hideTimeout=null):!1===a.focusState&&this._hideOnBlur();break;case "calendarReDrawn":juic.$(this.id).focus();this.stopRecreate=!0;break;case "calendarReFocus":clearTimeout(this.hideTimeout),this.hideTimeout=null,this._calendarView.setFocus(),SFDOMEvent.removeListener(window.document,"click",this._hideCallbackFn,this),SFDOMEvent.addListener(window.document,"click",
this._hideCallbackFn,this),window.ECTUtil.isiOs()&&(SFDOMEvent.removeListener(window.document,"touchend",this._hideOnBlur,this),SFDOMEvent.addListener(window.document,"touchend",this._hideOnBlur,this)),this.stopRecreate=!0}},_setElementValue:function(a){var b=this._viewTypeLink?juic.$(this.id+"_dateTxt"):juic.$(this.id);b&&(this._viewTypeLink?(this.dateformatter.format(new Date)===a&&(a=MSGS.EMPFILE_HRIS_TODAY),b.innerHTML=a):b.value=a)},_getElementValue:function(){var a=this._viewTypeLink?juic.$(this.id+
"_dateTxt"):juic.$(this.id);if(!a)return this._value;this._viewTypeLink?(a=a.innerHTML,MSGS.EMPFILE_HRIS_TODAY===a&&(a=this.dateformatter.format(new Date))):a=a.value.trim();return a},bindSpecificValidators:function(a){ECTValidationMgr.bindValidator(this,"dateFormat",{message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_FORMAT,a.label,sfMessageFormat.format(MSGS.COMMON_ERR_DATA_EXPECTED,MSGS.COMMON_DateFormatExample))})}});function ECTCalendarView(a,b){this.register();this.init(a,b)}
ECTCalendarView.prototype=function(){return set(new Component,{dateFormat:new DateFormat(MSGS.COMMON_DateFormat),minDay:null,minMonth:null,minDate:null,minYear:1900,maxYear:2699,currentSelection:null,currentDate:1,displayYear:0,displayMonth:0,yearValue:null,monthValue:null,init:function(a,b){this.config=b;this.weekdays=window.dateFormatSymbols.weekdays;this.months=window.dateFormatSymbols.months;this._focusLoopMarkers=new SFFocusLoop(this.id);this.startingDayOfWeek=window.firstDayOfWeek||0;if(void 0!=
b.minDate&&-1!=b.minDate){var c=b.minDate.split("-");this.minDay=c[2];this.minMonth=parseInt(c[1])-1;this.minYear=c[0];this.minDate=new Date(this.minYear,this.minMonth,this.minDay)}this.setValue(a);this._createYearAndMonth()},_createYearAndMonth:function(){var a=0;this.minMonth&&0<=this.minMonth&&this.displayYear==this.minYear&&(a=this.minMonth);var b=[];for(i=a;i<this.months.length;++i)b.push({description:null,value:i,label:escapeHTML(this.months[i]),disabled:!1,escape:!0});this._month=new ECTComboBox(null,
b,{writable:!0,fixedWidth:60,label:this.config.label});this._month.addEventListener(ECTConstants.EVENT_FIELD_FOCUS,this,"_clickonCalendar");this._month.addEventListener(ECTConstants.EVENT_CHANGE,this,"_redraw");a=[];for(i=this.minYear;i<=this.maxYear;++i)a.push({description:null,value:i,label:String(i),disabled:!1,escape:!0});this._year=new ECTComboBox(null,a,{writable:!0,fixedWidth:30,label:this.config.label});this._year.addEventListener(ECTConstants.EVENT_FIELD_FOCUS,this,"_clickonCalendar");this._year.addEventListener(ECTConstants.EVENT_CHANGE,
this,"_redraw")},setValue:function(a){this.currentDate=(this.currentSelection=a&&this.dateFormat.parse(a)||new Date,this.currentSelection.getDate());this.displayYear=this.currentSelection.getFullYear();this.displayMonth=this.currentSelection.getMonth()},_redraw:function(){var a=this._year.getValue(),b=this._month.getValue();this.displayYear=a;this._createYearAndMonth();this.minMonth&&0<=this.minMonth&&a==this.minYear&&b<this.minMonth&&(b=this.minMonth);this.currentSelection=new Date(a,b,this.currentDate);
this.currentSelection.getMonth()!=b&&(this.currentSelection=new Date(a,b,this.currentDate-this.currentSelection.getDate()));this.minDate&&this.currentSelection.getTime()<this.minDate.getTime()&&(this.currentSelection=new Date(a,b,this.minDay));var c=juic.createRenderContext();this._renderCalendar(c,a,b);juic.$(this.id).innerHTML=c.join("");this.dispatch("calendarReFocus")},_renderMonth:function(a,b){this._month.setValue(b);a.push(this._month)},_renderYear:function(a,b){this._year.setValue(b);a.push(this._year)},
_renderDayNames:function(a){var b=this.startingDayOfWeek||0,c=7,d=MSGS.COMMON_singleCharWeekdays.split(",");for(this.displayWeekNumbers&&a.push('\x3cth scope\x3d"col"\x3e\x26nbsp;\x3c/th\x3e');c--;)a.push('\x3cth scope\x3d"col" title\x3d"',this.weekdays[b],'"\x3e',d[b],"\x3c/th\x3e"),b=++b%7},_renderCalendar:function(a,b,c,d){var e=this._focusLoopMarkers.getMarkers(),f=dateFormatSymbols.weekdays;d||(d=1);b=new Date(b,c,d);this.displayYear=b.getFullYear();this.displayMonth=b.getMonth();a.push(e[0]);
a.push('\x3cdiv class\x3d"header" UNSELECTABLE\x3d"on"\x3e');this._renderMonth(a,this.displayMonth);this._renderYear(a,this.displayYear);a.push('\x3c/div\x3e\x3ctable id\x3d"dates" style\x3d"border-collapse: collapse;" ');a.push('summary\x3d"',MSGS.get("COMMON_CALENDAR",this.months[this.displayMonth],this.displayYear),'"\x3e\x3ctr\x3e');this._renderDayNames(a);a.push("\x3c/tr\x3e");b=(this.startingDayOfWeek-b.getDay()-7)%7;for(b=new Date(this.displayYear,this.displayMonth,1+b);b.getFullYear()<this.displayYear||
b.getFullYear()==this.displayYear&&b.getMonth()<=c;){a.push("\x3ctr\x3e");for(d=0;7>d;++d){var g=b.getDate(),k=Util.escapeHTML(this.dateFormat.format(b)),l=MSGS.get("COMMON_DAY_OF_WEEK_AND_DATE",f[b.getDay()],k);this.minDate&&-1!=this.minDate&&b.getTime()<this.minDate.getTime()?(a.push("\x3ctd class\x3d'minMaxDate'\x3e"),a.push('\x3cspan class\x3d"hiddenAriaContent"\x3e',l,"\x3c/span\x3e ",g," \x3c/td\x3e")):(a.push("\x3ctd"),this._isSelectedDate(b)?a.push(" class\x3d'selected'"):(b.getMonth()+1)%
12==c?a.push(" class\x3d'previous'"):b.getMonth()!=c&&a.push(" class\x3d'next'"),a.push(' UNSELECTABLE\x3d"on"\x3e\x3ca role\x3d"button" href \x3d "javascript:void(0);" title\x3d"',l,'" onfocus\x3d"',this.fireCode("_focusOnDate")),a.push('" onclick\x3d"',this.fireCode("_dateselected",k),'return false;"\x3e\x3cspan class\x3d"hiddenAriaContent"\x3e',l,"\x3c/span\x3e ",g," \x3c/a\x3e\x3c/td\x3e"));b=addDays(b,1)}a.push("\x3c/tr\x3e")}a.push("\x3c/table\x3e");a.push(e[1]);this.dispatch("calendarReDrawn")},
_focusOnDate:function(a){this.dispatch("dateFocussed",a)},_clickonCalendar:_dateselected:_toDayDate:function(){this._dateselected(this.dateFormat.format(new Date))},renderHtml:function(a){a.push('\x3cdiv class\x3d"globalContentBackgroundVariant globalContentForegroundVariant"\x3e\x3cdiv id\x3d"',this.id,'"  class\x3d"calendarContainer" onclick\x3d"',this.fireCode("_clickonCalendar"),'"\x3e');
this._renderCalendar(a,this.displayYear,this.displayMonth);a.push("\x3c/div\x3e\x3c/div\x3e")},_isSelectedDate:function(a){var b=this.currentSelection;return b&&b.getDate()==a.getDate()&&b.getMonth()==a.getMonth()&&b.getFullYear()==a.getFullYear()},handleEvent:function(a){},setFocus:function(){this._focusLoopMarkers.setFocus()}})}();unction ECTTime(a,b){this.register();this.init(a,b)}ECTTime.FIELD_TYPE="TIME";
ECTTime.SECONDS_IN_DAY=86400;ECTTime.TIME_REGEX_PATTERN=/^\d{1,2}:\d{1,2}:\d{1,2}$/;
juic.extend(ECTTime,ECTAbstractInputField,{init:function(a,b){this._config=b;if(a){var c=ECTTime.Time.createFromString(a);c.convertToTimeZone(this._getCurrentUserTZOffset());a=c.toTimeString()}c=juic.set({title:"00:00:00 "},this._config);this._timeInput=new ECTInputBox(a,c);this._timeInput.setFormat("x[x]:x[x]:xx*Optionals*");c=this._createTZOptions();c=juic.set({selectOptions:c,pageSize:c.length},this._config);this._timeZoneDropDown=new ECTPicklistAutoComplete(this._getCurrentUserTZOffset(),c);this._timeInput.addEventListener(ECTConstants.EVENT_CHANGE,
this,"_handleChangeEvents");this._timeZoneDropDown.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleChangeEvents")},renderHtml:function(a){a.push("\x3cspan id\x3d'",this.id,"' class\x3d'timeContainer'\x3e");this._timeInput.renderHtml(a);a.push("\x3cspan class\x3d'sfTinyMargin'\x3e\x3c/span\x3e");this.isWritable()?this._timeZoneDropDown.renderHtml(a):this._timeInput.getValue()&&this._timeZoneDropDown.renderHtml(a);a.push("\x3c/span\x3e")},getInputValue:
getValue:function(){var a=this._getTime();return a.isEmpty()?this.getInputValue():a.convertToUTC(this._timeZoneDropDown.getValue()).toTimeString()},getDayAdjustment:function(){var a=this._getTime();return a.isEmpty()?0:a.convertToUTC(this._timeZoneDropDown.getValue()).dayAdjustment},setValue:function(a){a=ECTTime.Time.createFromString(a);a.convertToTimeZone(this._getCurrentUserTZOffset());this._timeInput.setValue(a.toTimeString());this._timeZoneDropDown.setValue(this._getCurrentUserTZOffset())},isModified:function(){return this._timeInput.isModified()||
this._timeZoneDropDown.isModified()},setWritable:function(a){this._timeInput.setWritable(a);this._timeZoneDropDown.setWritable(a);this._super(a)},isValid:function(){var a=this.getInputValue();return!a||ECTTime.TIME_REGEX_PATTERN.test(a)&&this._getTime().isValid()},_getTime:function(){return ECTTime.TIME_REGEX_PATTERN.test(this._timeInput.getValue().trim())?ECTTime.Time.createFromString(this._timeInput.getValue()):new ECTTime.Time},_createTZOptions:function(){for(var a=[],b=0;b<ECTTime.TIME_ZONE_OFFESTS.length;b++){var c=
ECTTime.TIME_ZONE_OFFESTS[b];a.push({value:c[0],label:c[1]})}return a},_getCurrentUserTZOffset:_handleChangeEvents:function(a){a=this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE;this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:a,value:this.getValue()})},bindSpecificValidators:function(a){ECTValidationMgr.bindValidator(this,"function",{func:new Callback(this,function(){return this.isValid()}),message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_FORMAT,
a.label,sfMessageFormat.format(MSGS.COMMON_ERR_DATA_EXPECTED,"hh:mm:ss"))})}});ECTTime.Time=function(a,b,c){function d(a){return"undefined"==typeof a?null:a}this.hours=d(a);this.minutes=d(b);this.seconds=d(c);this.dayAdjustment=0};ECTTime.Time.prototype.convertToTimeZone=ECTTime.Time.prototype.convertToUTC=function(a){this._addOffset(-a);return this};ECTTime.Time.prototype.isEmpty=
ECTTime.Time.prototype.toTimeString=function(){function a(a){return 1<(a+"").length?a:"0"+a}return this.isEmpty()?"":[a(this.hours),a(this.minutes),a(this.seconds)].join(":")};
ECTTime.Time.prototype._addOffset=function(a){if(!this.isEmpty()){var b=3600*this.hours+60*this.minutes+this.seconds,b=b+60*a;this.dayAdjustment=0;b>=ECTTime.SECONDS_IN_DAY&&(this.dayAdjustment=1,b-=ECTTime.SECONDS_IN_DAY);0>b&&(this.dayAdjustment=-1,b=ECTTime.SECONDS_IN_DAY+b);this.hours=Math.floor(b/3600);this.minutes=Math.floor((b-3600*this.hours)/60);this.seconds=b%60}};
ECTTime.Time.prototype.isValid=function(){function a(a,d){return d>=b[a][0]&&d<=b[a][1]}if(this.isEmpty())return!0;var b={hours:[0,23],minutes:[0,59],seconds:[0,59]};return a("hours",this.hours)&&a("minutes",this.minutes)&&a("seconds",this.seconds)};ECTTime.Time.createFromString=function(a){function b(a){return d.length>=a&&parseInt(d[a])?parseInt(d[a]):0}var c=new ECTTime.Time;if(!a)return c;var d=a.split(":");c.hours=b(0);c.minutes=b(1);c.seconds=b(2);return c};
ECTTime.TIME_ZONE_OFFESTS=[[-720,"UTC-12:00"],[-660,"UTC-11:00"],[-600,"UTC-10:00"],[-570,"UTC-9:30"],[-540,"UTC-9:00"],[-480,"UTC-8:00"],[-420,"UTC-7:00"],[-360,"UTC-6:00"],[-300,"UTC-5:00"],[-270,"UTC-4:30"],[-240,"UTC-4:00"],[-210,"UTC-3:30"],[-180,"UTC-3:00"],[-120,"UTC-2:00"],[-60,"UTC-1:00"],[0,"UTC\u00b10:00"],[60,"UTC+1:00"],[120,"UTC+2:00"],[180,"UTC+3:00"],[210,"UTC+3:30"],[240,"UTC+4:00"],[270,"UTC+4:30"],[300,"UTC+5:00"],[330,"UTC+5:30"],[345,"UTC+5:45"],[360,"UTC+6:00"],[390,"UTC+6:30"],
[420,"UTC+7:00"],[480,"UTC+8:00"],[510,"UTC+8:30"],[525,"UTC+8:45"],[540,"UTC+9:00"],[570,"UTC+9:30"],[600,"UTC+10:00"],[630,"UTC+10:30"],[660,"UTC+11:00"],[690,"UTC+11:30"],[720,"UTC+12:00"],[765,"UTC+12:45"],[780,"UTC+13:00"],[840,"UTC+14:00"]];function ECTDateTime(a,b){this.register();this.init(a,b)}ECTDateTime.FIELD_TYPE="DateTime";ECTDateTime.DATE_TIME_REGEX_PATTERN=/(\d{4}-\d{2}-\d{2})[T\s](\d{2}:\d{2}:\d{2})/;
juic.extend(ECTDateTime,ECTAbstractInputField,{init:function(a,b){this._oldValue=this._value=ECTUtil.isEmpty(a||"")?"":a;this._config=b;var c=this._parseDateAndTime(a);this._calendar=new ECTCalendar(c.date,b);this._time=new ECTTime(c.time,b);this._calendar.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleChangeEvents");this._time.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleChangeEvents")},renderHtml:function(a){a.push("\x3cspan id\x3d'"+this.id+"' class\x3d'ectDateTimeComponent'\x3e");
this._calendar.renderHtml(a);a.push("\x3cspan class\x3d'sfTinyMargin'\x3e\x3c/span\x3e");this._time.renderHtml(a);a.push("\x3c/span\x3e")},getInputValue:function(a){var b=this._time.getInputValue(),c=this._calendar.getValue(),d="";a&&(d="00:00:00");return c?(c+" "+(b?b:d)).trim():b},getValue:function(){if(this.isValid()){var a=this._time.getDayAdjustment();if(0!=a){var b=(new DateFormat(ECTConstants.SERVER_DATE_FORMAT,null,null,ECTConstants.GREGORIAN)).parse(this._calendar.getValue());if(isNaN(b)||
null===b||"undefined"===typeof b||""===b)return this._calendar.getValue();b.setTime(b.getTime()+a*ECTTime.SECONDS_IN_DAY*1E3);return(new DateFormat(ECTConstants.SERVER_DATE_FORMAT,null,null,ECTConstants.GREGORIAN)).format(b)+" "+this._time.getValue()}return(this._calendar.getValue()+" "+this._time.getValue()).trim()}return this.getInputValue()},isModified:function(){return this._calendar.isModified()||this._time.isModified()},setWritable:function(a){this._time.setWritable(a);this._calendar.setWritable(a);
this._super(a)},setValue:function(a){a=ECTUtil.isEmpty(a)?"":a;a=this._parseDateAndTime(a);this._calendar.setValue(a.date);this._time.setValue(a.time)},_parseDateAndTime:function(a){var b={date:"",time:""};"object"==typeof a&&(a=a.value||a.defaultValue);if(a&&(a=ECTDateTime.DATE_TIME_REGEX_PATTERN.exec(a))&&2<a.length){var c=(new DateFormat("yyyy-MM-dd HH:mm:ss",null,null,ECTConstants.GREGORIAN)).parse(a[1]+" "+a[2]);c.setTime(c.getTime()-6E4*(new Date).getTimezoneOffset());b.date=(new DateFormat(ECTConstants.SERVER_DATE_FORMAT,
null,null,ECTConstants.GREGORIAN)).format(c);b.time=a[2]}return b},_handleChangeEvents:function(a){a=this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE;this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:a,value:this.getValue()})},isValid:function(){var a=this.getInputValue(!0);return!a||this._time.isValid()&&ECTDateTime.DATE_TIME_REGEX_PATTERN.test(a)},bindSpecificValidators:function(a){ECTValidationMgr.bindValidator(this,"function",{func:new Callback(this,function(){return this.isValid()}),
message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_FORMAT,a.label,sfMessageFormat.format(MSGS.COMMON_ERR_DATA_EXPECTED,MSGS.COMMON_DateFormatExample+" "+MSGS.COMMON_TimeFormat))})}});function ECTPopupManager(a,b){this.register();this.init(a,b)}
ECTPopupManager.prototype=function(){return set(new Component,{isShown:!1,showDelay:0,_heightCorrected:!1,init:function(a,b){this.originID=a;this.popup=b},show:function(){this._fixPoint={origin:{vertical:"bottom",horizontal:"left"},menu:{vertical:"top",horizontal:"left"},offset:{vertical:5,horizontal:0}};this.isFioriFDEnabled()&&(this._fixPoint.offset={vertical:1,horizontal:0});Util.isRTL()&&(this._fixPoint.origin={vertical:"bottom",horizontal:"right"},this._fixPoint.menu={vertical:"top",horizontal:"right"});
if(!this.isShown){this.isShown=!0;this._heightCorrected=!1;this._clearTimeOuts();var a=this;this._tid=setTimeout(function(){SFPositionManager.addEventListener("positionFixed",a);SFPositionManager.show(a.popup,a.originID,a._fixPoint)},this.showDelay);clearInterval(this.moveInterval);this.moveInterval=null;this.moveInterval=setInterval(function(){var b=juic.$(a.originID);b&&0<b.offsetWidth?SFPositionManager.moveTo(a.popup.id,set({},a._fixPoint),a.originID):a.hide()},500);return!1}},setShowDelay:function(a){this.showDelay=
a},delayAndHide:function(a){a||(a=500);var b=this;this.hideTimeout=setTimeout(function(){b.hide()},a)},_cancelDelayAndHide:hide:function(){this._clearTimeOuts();this.isShown=!1;SFPositionManager.removeEventListener("positionFixed",this);this._positionInfo=null;this.popup.dispatch("hide")},_clearTimeOuts:function(){this._tid&&(clearTimeout(this._tid),delete this._tid);this.moveInterval&&(clearInterval(this.moveInterval),
delete this.moveInterval);this.hideTimeout&&(clearTimeout(this.hideTimeout),delete this.hideTimeout)},_isMatchingOverlay:function(a){return a.positionInfo.fixPoint.origin.originId===this.originID?!0:!1},isClickOutsideOfMenu:function(a){a=SFDOMEvent.getTarget(a||window.event);return this.popup.id==a.id||SFDom.isAncestor(this.popup.id,a)?!1:!0},getPositionInfo:function(){return this._positionInfo},handleEvent:function(a){switch(a.type){case "positionFixed":if(this._isMatchingOverlay(a)){this._positionInfo=
a.positionInfo;var b=this._positionInfo.fixPoint,c=20;"bottom"==b.menu.vertical&&"top"==b.origin.vertical&&(c=12);!this._heightCorrected&&a.newComponentHeight&&(this._heightCorrected=!0,a=Math.abs(a.newComponentHeight)-c,0<a&&(b=this.popup,b.setFixedHeight&&b.setFixedHeight(a),b.dispatch("changeDimensions",{height:a})))}}}})}();function ectComboDropDown(a,b){this.register();this.init(a,b)}
juic.extend(ectComboDropDown,ECTAbstractInputField,{selectedItem:0,originalSelection:0,_textTyped:"",labelCutoff:22,rebuildListTimeOut:null,init:function(a,b){this.meta=b;this.options=b.selectOptions;assert(this.options,"[ectComboDropDown] Select Options are null");assert(this.options.length,"[ectComboDropDown] Select Options are null");this._forceDisplayValueAsLabel="undefined"!=typeof b.forceDisplayValueAsLabel?b.forceDisplayValueAsLabel:!1;this._initValue(a);this.setWritable(!1!==b.writable);this._enabled=
"undefined"!=typeof b.enabled?b.enabled:!0;this._oldValue=this._value;this.displayValue=this.getDisplayLabel(this._value,!0);this.ectKeyEventManager=new ectKeyEventManager;this.ectKeyEventManager.addEventListener("action",this);this._anchorId=this.id+"_write";this._readSpanId=this.id+"_read";this._ariaLabel=b?Util.escapeHTML(b.label):null;this._isRequired=b&&void 0!=b.required?!!b.required:void 0},_getWrapperClassName:function(){var a=this._super();this._enabled||(a[0]+=" fieldDisabled");return a},
setEnabled:_initOldValue:function(){this._oldValue||""==this._oldValue||(this._oldValue=this._value)},_initValue:function(a){this._processSetAndRenderValue(a,!0);this._initOldValue()},setModel:function(a){assert(this._writable,"cannot Do this");this.options=a;this._createOptions(this.options);this.setValue("")},_createOptions:function(a){this._dropDown&&(this._dropDown.cleanup(),this.ECTPopupManager.unregister());this._dropDown=new SFList("comboDropDown",
{addFocusLoop:!0,ariaRole:"listbox"});this.updateAttribute("aria-controls",this._dropDown.getReferenceId(),!0);this._dropDown.addClass("globalMenu globalContainerHoverSansFocus");this._links=[];for(var b=0,c=a.length;b<c;b++){var d=a[b],d=new ectLink(d.label,d.value);d.addEventListener("action",this);this._links.push(d)}this._dropDown.add(this._links,{ariaRole:"option"});this.ECTPopupManager=new ECTPopupManager(this._anchorId,this._dropDown)},_rebuildList:function(){this._hide();for(var a=[],b=0,
c=new RegExp("^"+this._textTyped,"i"),d=0,e=this.options,f=this.options.length;d<f;d++){var g=e[d];g.label&&0<=g.label.search(c)&&(g.value==this._value&&(b=a.length),a.push(g))}0<a.length&&(this._createOptions(a),this._openSelector(b))},isModified:function(){return this._oldValue!=this._value},reset:function(){this._hide();this._value!==this._oldValue&&(this.setValue(this._oldValue),this.resetError(),this._change())},setValue:
initByDefaultMetaValue:function(){this._initByDefaultMetaValue(this.meta)},_processSetAndRenderValue:function(a,b){this._setInternalValue(a);this._setLabelAndTooltip(a,b);this._renderValue()},_setInternalValue:function(a){this._value=a},_setLabelAndTooltip:function(a,b){this.toolTip=this._label=this.getDisplayLabel(a,b);25<this._label.length&&(this._label=this._label.substring(0,25)+"...")},_setDomValue:function(a){if(a)if(a.title=this.toolTip,this.isFioriFDEnabled()&&1<a.childElementCount)for(var b=
0;b<a.childElementCount;b++)a.childNodes[b].className.includes("ectDropDownText")&&(a.children[b].innerHTML=this._label);else a.innerHTML=this._label},_renderValue:function(){this._setDomValue(juic.$(this._anchorId));this._setDomValue(juic.$(this._readSpanId))},getDisplayLabel:function(a,b){var c="";if(this._forceDisplayValueAsLabel&&b)c=a;else{var d=this.options;if(!/^\s*$/.test(a)&&(c=(c=this.meta.inactiveOptionsMap&&this.meta.inactiveOptionsMap[a])&&c.label,!c))for(var e=0,f=this.options.length;e<
f;e++){var g=d[e];if(g.value==a){this.selectedItem=e;c=g.label;break}}c||(this._value=d[0].value,c=d[0].label)}return Util.escapeHTML(c)},cleanup:function(){SFDOMEvent.removeListener(window.document,"keydown",this._keyEvents,this);SFDOMEvent.removeListener(window.document,"mousedown",this._clickHandler,this);SFDOMEvent.removeListener(window.document,"touchend",this._clickHandler,this);this.unregister()},setFocus:_anchorEvents:function(a){a.push(' onblur\x3d"',
this.fireCode("setFocus",!1));a.push('" onfocus\x3d"',this.fireCode("setFocus",!0));a.push('" onkeydown\x3d"',this.fireCode("_keydown"));a.push('" onclick\x3d"',this.fireCode("_clickOpen"),'return false"')},_renderWriteHtml:function(a){a.push('\x3clabel class\x3d"hiddenAriaContent" id\x3d"',this.getReferenceId(),'_description"\x3e',MSGS.ECT_COMBOBOX_DROPDOWN_LABEL,"\x3c/label\x3e");a.push('\x3ca id\x3d"',this._anchorId,'" class\x3d"formElement ',this.generateFDClasses("button"),'" title\x3d"',this.toolTip,
'" href\x3d"javascript: void(0)"',' role\x3d"combobox" aria-autocomplete\x3d"list" aria-haspopup\x3d"true" aria-describedby\x3d"',this.getReferenceId(),'_description" aria-expanded\x3d"false"');this._ariaLabel&&a.push(' aria-label\x3d"',this._ariaLabel,'"');void 0!=this._isRequired&&a.push(' aria-required\x3d"',this._isRequired,'"');this._anchorEvents(a);a.push("\x3e");this.isFioriFDEnabled()?(a.push('\x3cspan class\x3d"ectDropDownText ',this.generateFDClasses("text"),'" \x3e',this._label,"\x3c/span\x3e"),
a.push('\x3ci class\x3d"',Util.generateIconClasses("slim-arrow-down"),'"\x3e\x3c/i\x3e')):a.push(this._label);a.push('\x3c/a\x3e\x3cspan class\x3d"toggle" onclick\x3d"',this.fireCode("_clickOpen"),'return false"\x3e\x3cspan class\x3d"arrowImage"\x3e\x3cimg role\x3d"presentation" src\x3d"',IMAGES["/ui/uicore/img/_.gif"],'" height\x3d"16px" width\x3d"2px" /\x3e\x26nbsp;\x3c/span\x3e\x3c/span\x3e')},renderHtml:function(a){this._writable&&this._drawRoundedCorners(a,"comboDropDown","comboC3DropDown");
a.push("\x3cspan class\x3d'",this._readOnlyClass,"' id\x3d'",this._readSpanId,"'\x3e");a.push(this.toolTip);a.push("\x3c/span\x3e")},_deselectItems:function(){for(var a=0,b=this._links,c=b.length;a<c;a++)b[a].setSelection(!1)},_clickOpen:function(){!this._enabled||this.ECTPopupManager&&this.ECTPopupManager.isShown||(this._textTyped="",this._createOptions(this.options),this._openSelector())},_keydown:function(a){var b=SFDOMEvent.getCharCode(a);32!=b&&13!=b||this.ECTPopupManager&&this.ECTPopupManager.isShown||
(this._clickOpen(),a.stopPropagation(),a.preventDefault())},_openSelector:function(a){this._deselectItems();a="undefined"!==typeof a?a:this.selectedItem;this.ectKeyEventManager&&this.ectKeyEventManager.updateIndexAndLength(a,this._links.length);this.ECTPopupManager.show();this._links[a]&&this._links[a].setSelection(!0);this.updateAttribute("aria-expanded",!0,!0);SFDOMEvent.addListener(window.document,"keydown",this._keyEvents,this);SFDOMEvent.addListener(window.document,"mousedown",this._clickHandler,
this);SFDOMEvent.addListener(window.document,"touchend",this._clickHandler,this)},_clickHandler:function(a){this._enabled&&(this._isClickedOnAnchors(a)||this.ECTPopupManager.isClickOutsideOfMenu(a)&&this._blur())},_isClickedOnAnchors:function(a){a=SFDOMEvent.getTarget(a);return a.id&&0==a.id.indexOf(this.id)?!0:!1},_keyEvents:function(a){if(this._enabled){var b=SFDOMEvent.getCharCode(a);9!=b&&SFDOMEvent.stopEvent(a);var c=this;setTimeout(0)}},_blur:_hide:function(){SFDOMEvent.removeListener(window.document,"keydown",this._keyEvents,this);SFDOMEvent.removeListener(window.document,"mousedown",this._clickHandler,this);clearTimeout(this.rebuildListTimeOut);this.updateAttribute("aria-controls","",!0);this.updateAttribute("aria-expanded",!1,!0);this.ECTPopupManager&&this.ECTPopupManager.hide()},_change:function(){var a=this.isModified()?"fieldChange":"fieldUnChange";juic.$(this._anchorId)||juic.$(this._readSpanId);this._updateWrapperClassName();
this.dispatch("change",{actionCommand:a,hasError:this._hasError})},_handleChange:function(){this.checkForErrors();this._change()},handleEvent:function(a){switch(a.type){case "change":this._handleChange();break;case "action":switch(a.actionCommand){case "itemSelected":this.setValue(a.value);this._handleChange();this._blur();break;case "blurComponent":this._blur();break;case "selectionChange":this.setValue(this._links[a.itemIndex].itemValue);this._handleChange();this._blur();break;case "focusChange":this._links[a.itemIndex].setSelection(!0);
this._links[this.selectedItem]&&this._links[this.selectedItem].setSelection(!1);this.selectedItem=a.itemIndex;this.updateAttribute("aria-activedescendant",this._dropDown.getItemAtIndex(a.itemIndex).getDomId(),!0);break;case "removeTypedText":if(0<this._textTyped.length){this._textTyped=this._textTyped.substring(0,this._textTyped.length-1);clearTimeout(this.rebuildListTimeOut);var b=this;this.rebuildListTimeOut=setTimeout(function(){b._rebuildList()},500)}break;case "clearTypedText":this._textTyped?
0<this._textTyped.length&&(this._hide(),this._textTyped="",this._createOptions(this.options),this._openSelector()):this._hide();break;case "textTyped":this._textTyped+=String.fromCharCode(a.keyID),clearTimeout(this.rebuildListTimeOut),b=this,this.rebuildListTimeOut=setTimeout(function(){b._rebuildList()},500)}}}});function ectKeyEventManager(){}
ectKeyEventManager.prototype=function(){return set(new juic.EventTarget,{updateIndexAndLength:function(a,b){this.itemIndex=a;this.listLenght=b},handleKey:function(a){switch(a){case 16:break;case 38:this.itemIndex--;break;case 40:this.itemIndex++;break;case 13:this._itemSelected();break;case 8:this.dispatch("action",{actionCommand:"removeTypedText"});break;case 27:this.dispatch("action",{actionCommand:"clearTypedText"});break;case 9:this.dispatch("action",{actionCommand:"blurComponent"});break;default:this.dispatch("action",
{actionCommand:"textTyped",keyID:a})}0>this.itemIndex?this.itemIndex=this.listLenght-1:this.itemIndex>this.listLenght-1&&(this.itemIndex=0);0<=this.itemIndex&&this.dispatch("action",{actionCommand:"focusChange",itemIndex:this.itemIndex})},_itemSelected:function(){this.dispatch("action",{actionCommand:"selectionChange",itemIndex:this.itemIndex})},handleEvent:function(a){}})}();function ectLink(a,b){this.register();this.init(a,b)}
ectLink.prototype=function(){return set(new Component,{selectionClass:"noSelection",init:setSelectionText:function(a,b){this.selectableText=a;var c="i";b&&(c="gi");this.displayValue=this.displayValue.replace(new RegExp(this.selectableText,c),'\x3cspan id\x3d"'+this.id+'_select" style\x3d"background-color:yellow"\x3e'+this.selectableText+"\x3c/span\x3e")},setSelection:function(a){var b=juic.$(this.id),c=b&&b.parentElement&&"LI"==
b.parentElement.tagName?b.parentElement:"";this.selectionClass="globalMenuItem";a?(this.selectionClass+=" globalMenuItemFocus",this.isFioriFDEnabled()&&c&&c.classList.add("is-focus")):this.isFioriFDEnabled()&&c&&c.classList.contains("is-focus")&&c.classList.remove("is-focus");b&&(b.className=this.selectionClass+" "+this.generateFDClasses("link"))},renderHtml:function(a){a.push('\x3ca id\x3d"',this.id,'" ','href\x3d"javascript:void(0);" ','class\x3d"',this.selectionClass," ",this.generateFDClasses("link"),
' " ','onmouseover\x3d"',this.fireCode("_mouseover"),';return false;" ','onmouseout\x3d"',this.fireCode("_mouseout"),';return false;" ','onclick\x3d"return false;" ','onmousedown\x3d"',this.fireCode("_click"),';return false;"\x3e',this.displayValue,"\x3c/a\x3e")},_mouseover:function(){this.dispatch("action",{actionCommand:"mouseMove",value:this.itemValue})},_mouseout:function(){this.setSelection(!1)},_click:handleEvent:function(a){}})}();
"undefined"===typeof window.ECTHelpPopup&&(window.ECTHelpPopup=function(){function a(){this.register();this._iFrameID=this.id+"_iframe"}function b(){this.register()}a.prototype=function(){return set(new Component,{getURL:function(){return this._url},setURL:function(a){this._url=a;if(a=juic.$(this._iFrameID))a.src=html.join("")},_showHelpContent:function(){SFDom.replaceClass(juic.$(this.id),"iframeShow","iframeHide");SFDom.replaceClass(juic.$(this._iFrameID),"iframeHide","iframeShow")},renderHtml:function(a){a.push('\x3cdiv id\x3d"',
this.id,'" class\x3d"sfLoadingContainerSm iframeShow helpContentDims"\x3e\x3cspan class\x3d"white"\x3e',MSGS.COMMON_loading,"\x3c/span\x3e\x3c/div\x3e");ECTUtil.isiOs()?(a.push('\x3cdiv class\x3d"iframeShow helpContentDims" style\x3d"overflow:scroll;-webkit-overflow-scrolling: touch;"\x3e'),a.push('\x3cobject  class\x3d"ipadObj" type\x3d"text/html"  onload\x3d"',this.fireCode("_showHelpContent"),'"',this._iFrameID?' id\x3d"'+this._iFrameID+'"':"",' data\x3d"',this._url,'"',' frameBorder\x3d"0"',"\x3e\x3c/object\x3e\x3c/div\x3e")):
a.push('\x3ciframe style\x3d"overflow:scroll;" class\x3d"iframeHide helpContentDims" onload\x3d"',this.fireCode("_showHelpContent"),'"',this._iFrameID?' id\x3d"'+this._iFrameID+'"':"",' src\x3d"',this._url,'"',' frameBorder\x3d"0"',"\x3e\x3c/iframe\x3e")}})}();b.prototype=function(){return set(new juic.Component,{setContent:function(a){this._msg=a},renderHtml:function(a){a.push("\x3cdiv\x3e",this._msg,"\x3c/div\x3e")}})}();return set(new juic.EventTarget,{init:function(){this.iframe=new a;this._msgContent=
new b;this._callOut=new SFCalloutPopup({height:250,width:400,originOptions:{pointerOffset:30},closeOnClick:!1,closeOnMouseout:!1,role:"alertdialog"});this._callOut.setContent(this.iframe);this._callOut.addEventListener("clickedOutsidePopup",this,"closePopup")},getPopupId:closePopup:function(){this._callOut.hide()},showFieldHelp:function(a,b){var c=window.FieldsHelpLinkMap[b];c&&"url"===c.type?(this._calloutContentChange&&(this._callOut.setContent(this.iframe),
this._callOut.setHeight(250),this._calloutContentChange=!1),this.helpPageLink=window.HelpLinkMap.baseUrl+c.msg+".htm",this.iframe.setURL(this.helpPageLink)):c&&"msg"===c.type&&(this._calloutContentChange||(this._callOut.setContent(this._msgContent),this._callOut.setHeight(null),this._calloutContentChange=!0),this._msgContent.setContent(c.msg));this._callOut.show(a,{setFocusOnSelf:!0,refocusRef:a})},show:function(a,b){var c;if(window.ectMDFHelpDataMap)c=window.ectMDFHelpDataMap[b],this._msgContent.setContent("\x3cspan class\x3d'richTextContent'\x3e"+
c+"\x3c/span\x3e"),this._callOut.setContent(this._msgContent),this._callOut.setScrollable(!0);else if(c=window.HelpLinkMap[b])this._callOut.setHeight(250),this._callOut.setWidth(400),this.helpPageLink=window.HelpLinkMap.baseUrl+c+".htm",this.iframe.setURL(this.helpPageLink),this._callOut.setContent(this.iframe);this._callOut.show(a)},showHelpMsg:function(a,b){b&&(this._msgContent.setContent("\x3cspan class\x3d'richTextContent'\x3e"+b+"\x3c/span\x3e"),this._callOut.setHeight(250),this._callOut.setWidth(400),
this._callOut.setContent(this._msgContent),this._callOut.setScrollable(!0),this._callOut.show(a,{setFocusOnSelf:!0,refocusRef:a}))}})}(),window.ECTHelpPopup.init());function ECTPageHelpIcon(a){this.init(a)}
ECTPageHelpIcon.prototype=function(){return set(new juic.EventTarget,{init:function(a){this.helpButton=new SFRevolutionToolbarButton("help","helpAction");this.helpButton.addEventListener("action",this,"_showHelpPopup");this.helpPageLink=a},render:function(a){this.helpButton.render(a)},_showHelpPopup:function(a){"helpAction"==a.actionCommand&&ECTHelpPopup.show(this.helpButton.id,this.helpPageLink)},setHelpLinkVisibility:function(){var a=juic.$("helpIcon");a&&(window.ectMDFHelpDataMap?this._hasHelpPageData=
window.ectMDFHelpDataMap[this.helpPageLink]?!0:!1:window.HelpLinkMap&&window.HelpLinkMap[this.helpPageLink]&&(this._hasHelpPageData=!0),a.style.display=this._hasHelpPageData?"":"none")}})}();function ECTFieldPlusOldValue(a,b){this.register();this.init(a,b)}
ECTFieldPlusOldValue.prototype=function(){return set(new Component,{_repaintOldValueState:!1,className:"fieldWithOldValue",init:function(a,b){this._value=a||"";this._oldValue=a||"";this._isFioriFD=Util.isFioriFDEnabled();if(this._errorMessage=a&&"object"===typeof a&&a.errorMessage||null)this._sfErrorFromServer=new ECTInlineError(this._errorMessage,!1),this._sfErrorFromServer.inlineWrapper="spdMessage";this.meta=juic.set({},b);this._config={};this._obsoleteValue=a&&"undefined"!==typeof a.defaultValue?
ECTUtil.getObsoleteValue(a.defaultValue,a.value):null;this._obsoleteServerValue=!1;if("MDFPIIField"==this.meta.type||"MDFRALField"==this.meta.type)this._obsoleteServerValue=a&&a.obsolete;a&&!ECTUtil.isEmpty(a.otherValue)&&(this._hasOtherValue=!0);this.field=ECTFieldsFactory.getFormField(this._value,this.meta);this.field.addEventListener(ECTConstants.EVENT_CHANGE,this);this.field.addEventListener(ECTConstants.EVENT_ACTION,this);this.field.addEventListener(ECTAbstractGroup.EVENT_TOGGLE_VIEW_STATE,this,
"dispatchEvent");if(!ECTConstants.COMPLEX_FIELDS[this.meta.type]&&!this.meta.noOldValue&&!ECTConstants.CHECKBOX_TYPES[this.meta.type]&&this.meta.type!=ECTURLField.FIELD_TYPE){var c=juic.set({},b);c.writable=!1;c.isOldValue=!0;if("undefined"!=typeof ECT_CONFIG&&ECT_CONFIG.CANDIDATE_TO_NEWHIRE&&this._obsoleteValue)this.oldLabel=new ECTSimpleLabel(ECTUtil.isJSON(this._obsoleteValue)?ECTUtil.getConsumableValue(this._obsoleteValue).label||this._obsoleteValue:this._obsoleteValue,!1);else{var d=ECTUtil.isEmpty(this._obsoleteValue)?
this._oldValue:this._obsoleteValue;this.oldLabel=ECTFieldsFactory.getFormField(d,c);this._hasOtherValue&&(this._otherValueField=ECTFieldsFactory.getFormField(a.otherValue,c),this._showOtherValue=ECTUtil.isEmpty(this.field.getValue())||a.otherValue!=a.defaultValue)}}"ATTACHMENT"===this.meta.type&&(this._oldAttachmentId=this._attachmentId=this.field.getValue().attachmentId);this._checkHelpLink()},_checkHelpLink:function(){var a;this.meta.helpText?this._hasHelpLink=!0:(a=window.FieldsHelpLinkMap&&window.FieldsHelpLinkMap[this.meta.id]?
window.FieldsHelpLinkMap[this.meta.id]:null,window.isHelpAvailable&&a&&"label"!==a.attachTo&&(this._hasHelpLink=!0))},_renderHelpLink:function(a){if(this._hasHelpLink){var b=window.ECTHelpPopup?this.id+"_field":"";this._isFioriFD&&a.push("\x26nbsp;\x26nbsp;");a.push("\x3cbutton style\x3d'border:0; background-color: transparent;' aria-haspopup\x3d'true' aria-owns\x3d'",b,"' id\x3d'",this.id,"_helpLink' title\x3d'",MSGS.get("ECT_HELP_LINK",juic.escapeHTML(this.meta.label)),"' class\x3d'",this._isFioriFD?
this.generateFDClasses("link")+" helpLinkFD ":"helpLink"," ",this.field.helpIconClass,"' onclick\x3d'",this.fireCode("_showHelpPopup"),"SFDOMEvent.stopPropagation(event);return false;'\x3e");this._isFioriFD?a.push("\x3ci class\x3d'",Util.generateIconClasses("question-mark"),"'\x3e\x3c/i\x3e"):a.push("\x26nbsp;");a.push("\x3c/button\x3e")}},_showHelpPopup:function(){if(this.meta.helpText){var a=Util.escapeHTML(this.meta.helpText);"function"===typeof Util.transBBCodeToHTML&&(a=Util.transBBCodeToHTML(a));
ECTHelpPopup.showHelpMsg(this.id+"_helpLink",a)}else ECTHelpPopup.showFieldHelp(this.id+"_helpLink",this.meta.id)},reset:function(){this.field.reset?this.field.reset():this._setFieldValue(this._oldValue);this.field.updatePreviousValue&&this.field.updatePreviousValue();"ATTACHMENT"==this.meta.type&&(this._attachmentId&&this._oldAttachmentId!==this._attachmentId&&this.dispatch(ECTConstants.EVENT_CHANGE,{deleteAttachment:this._attachmentId}),this._attachmentId=this._oldAttachmentId);this.showOldValue(!1)},
getValue:function(a,b){var c=this.meta.type.toLowerCase();if(this.field instanceof ECTAbstractInputField||this.field instanceof ECTCalendarWrapper||this.meta.writable||this.field instanceof ECTCascadeField||this.field instanceof ECTAbstractGroup){var d=this.field.getValue(a,b);"attachment"==c&&(d=d.attachmentId);return d}d=ECTUtil.getValueFromData(this._value);switch(c){case "foundation_autocomplete":case "hris_finduser":case "user":d="string"===typeof d&&""!==d?eval("("+d+")"):d;d="hris_finduser"===
c?d&&d.userId:d&&d.id;break;case "number":case "double":case "long":d=ECTUtil.toDBString(d);break;case ECTHiddenField.FIELD_TYPE.toLowerCase():d=this.field.getValue()}return d},getValueObj:function(a){return this.field.getValueObj?this.field.getValueObj(a):this.field.getValue(a,!0)},_setFieldValue:function(a){if("ATTACHMENT"==this.meta.type)(a=ECTUtil.getValueFromData(a))&&"object"!==typeof a&&(a=a?eval("("+a+")"):"");else if(this.meta.type==ECTHiddenField.FIELD_TYPE&&!ECTUtil.isEmpty(a)&&""!=a){var b=
this.meta.searchOptions;"object"==typeof a&&b?a=(b.valueAttribute?a[b.valueAttribute]:a.id)||"":ECTUtil.isJSON(a)&&(b=ECTUtil.parseJSON(a),b.type&&(a=b.value||""))}this.field.setValue(a)},setValueAndDispatchChange:function(a,b){this._setFieldValue(a);var c=this._checkValueDiffers(a);"function"==typeof this.field.checkForErrors&&this.field.checkForErrors();this.showOldValue(c);c={actionCommand:c?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE};b&&this.meta.type!=ECTConstants.TYPE_DATAGRID&&
(c.submitOnFieldChange=this.meta.submitOnFieldChange);c.metaId=this.meta.id;this.meta.eventContextMap&&(c.eventContextMap=this.meta.eventContextMap);this.field.dispatch(ECTConstants.EVENT_CHANGE,c)},_checkValueDiffers:function(a){var b;switch(this.meta.type){case ECTPicklistAutoComplete.FIELD_TYPE:a=(a=ECTUtil.getConsumableValue(a))&&"object"==typeof a?a.value:a;b=ECTUtil.getValueFromData(this._oldValue);b=ECTUtil.getConsumableValue(b);b=a!=(b&&"object"==typeof b?b.value:b);break;case ECTConstants.TYPE_FOUNDATION_AUTOCOMPLETE:case ECTConstants.TYPE_USER:b=
this._oldValue&&this._oldValue.value||this._oldValue;a=a&&"object"==typeof a&&a.value?a.value:a;ECTUtil.isJSON(a)&&(a=eval("("+a+")"));ECTUtil.isJSON(b)&&(b=eval("("+b+")"));b=a&&!b||b&&!a||(b&&b.id)!=(a&&a.id);break;default:b=a!=(this._oldValue&&this._oldValue.value)}return b},setValue:function(a){this._setFieldValue(a);this.showOldValue(this._checkValueDiffers(a));this._oldValue=a},initByDefaultMetaValue:function(){this.field.initByDefaultMetaValue?(this.field.initByDefaultMetaValue(),this.showOldValue(!1),
!this.field._defaultedWithMetaValue&&!this.meta.st||this.getSecurityToken()||(this.setSecurityToken(this.meta.st),delete this.field._defaultedWithMetaValue)):this.field.initByDefaultData&&this.field.initByDefaultData()},displayErrorMessage:function(a){this.field.setErrorMsg&&this.field.setErrorMsg(a)},hideInfoMessage:function(){this.field.setInfoMsg?this.field.setInfoMsg():"function"==typeof this.field.hideInfoMessage&&this.field.hideInfoMessage()},hideErrorMessage:function(){this.field.setErrorMsg?
this.field.setErrorMsg():"function"==typeof this.field.hideErrorMessage&&this.field.hideErrorMessage()},handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_CHANGE:var b=!1;this.meta.type!=ECTConstants.TYPE_DATAGRID&&(a.submitOnFieldChange=this.meta.submitOnFieldChange,a.metaId=a.metaId||this.meta.id);"ATTACHMENT"===this.meta.type&&(this._attachmentId&&this._oldAttachmentId!==this._attachmentId&&(a.deleteAttachment=this._attachmentId),this._attachmentId="object"==typeof this.field.getValue()?
this.field.getValue().attachmentId:0,a.actionCommand=a.actionCommand||this.field.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE);a.metaId&&a.metaId==this.meta.id&&!a.isChildFormChange&&(a.eventContextMap=this.meta.eventContextMap);switch(a.actionCommand){case ECTConstants.EVENT_FIELD_CHANGE:b=!0;break;case ECTConstants.EVENT_FIELD_UNCHANGE:case ECTConstants.EVENT_FORM_FIELD_UNCHANGE:b=!1}this.showOldValue(b);this.dispatchEvent(a);break;case ECTConstants.EVENT_ACTION:this.dispatchEvent(a)}},
showOldValue:function(a){this._hasOtherValue&&this._switchVisibility(juic.$(this.id+"_otherValue"),a||this._showOtherValue);if(this._oldValue&&this._oldValue.value&&ECTUtil.isEmpty(this._obsoleteValue)&&this.oldLabel&&(this._repaintOldValueState=a,this.oldLabel)){this._switchVisibility(juic.$(this.id+"_label"),a);var b=juic.$(this.id+"_strucklabel_desc");b&&b.setAttribute("aria-hidden",a?!1:!0)}},_switchVisibility:function(a,b){if(a){var c=a.className||"";b?(a.className=c.replace("hide","show"),a.removeAttribute("aria-hidden")):
(a.className=c.replace("show","hide"),a.setAttribute("aria-hidden","true"))}},fillInnerHTML:function(a){var b="",c=!ECTUtil.isEmpty(this._obsoleteValue)||this._obsoleteServerValue;c&&!ECTConstants.COMPLEX_FIELDS[this.meta.type]&&this.meta.type!=ECTURLField.FIELD_TYPE&&(b+=" newValue");c=this._repaintOldValueState||c;a.push('\x3cspan id \x3d "',this.id,'_field" class\x3d"',b,'"\x3e');this.field.renderHtml(a);this._sfErrorFromServer&&this._sfErrorFromServer.renderHtml(a);this._renderHelpLink(a);a.push("\x3c/span\x3e");
this.oldLabel&&(a.push('\x3cspan id \x3d "',this.id,'_label" class\x3d"struck_label ',c?"show":"hide"," ",this.oldLabel&&this.oldLabel instanceof ECTTextArea?"ectTextAreaWrapperOldValue":"",'" aria-describedby\x3d"',this.id,'_strucklabel_desc"',c?"":' aria-hidden\x3d"true"',"\x3e"),this.oldLabel.renderHtml(a),a.push("\x3c/span\x3e"),a.push('\x3cspan id\x3d"',this.id,'_strucklabel_desc" class\x3d"hiddenAriaContent" aria-hidden\x3d"',c?"false":"true",'"\x3e',MSGS.ECT_FIELD_OLD_VALUE_DESC,"\x3c/span\x3e"));
this._hasOtherValue&&a.push('\x3cdiv id\x3d"',this.id,'_otherValue" class\x3d"other_value ',this._showOtherValue?"show":"hide",'"\x3e',this._otherValueField,"\x3c/div\x3e")},renderHtml:function(a){a.push('\x3cdiv id \x3d "',this.id,'" class\x3d"',this.getClassName(),'"\x3e');this.fillInnerHTML(a);a.push("\x3c/div\x3e")},getClassName:function(){return this.className},cleanup:function(){this.oldLabel&&this.oldLabel.cleanup();this.field.cleanup();this.unregister()},isModified:function(){return this.field.isModified?
this.field.isModified():!1},setFocus:function(a){this.field.setFocus&&this.field.setFocus(a)},makeItNew:function(){this.field&&this.field.makeItNew&&this.field.makeItNew()},undoMakeItNew:reCreate:function(a,b,c){this.field&&this.field.cleanup&&this.field.cleanup();this.init(a,b);this.field.rowIndex=c;if(a=juic.$(this.id))b=juic.createRenderContext(),this.fillInnerHTML(b),a.innerHTML=b.join("")},isSensitiveReadOnlyField:function(){return this.meta.isSensitiveReadOnlyField||
this.meta.sensitiveReadOnlyField||!1===this.meta.writable},getSecurityToken:function(){if(this.isSensitiveReadOnlyField())return this._securityKey||this._value&&this._value.st},setSecurityToken:)}();function ECTFieldAdapter(a,b){this._init(a,b)}
ECTFieldAdapter.prototype=function(){return set(new juic.Component,{_init:function(a,b){this.meta=b;this._value=a||"";this._oldValue=a?"object"==typeof a?set({},a):a:"";this.field=ECTFieldsFactory.getFormField(a,this.meta);this.field.addEventListener(ECTConstants.EVENT_CHANGE,this);this.field.addEventListener(ECTConstants.EVENT_ACTION,this)},reset:function(){this.field.reset?this.field.reset():this._setFieldValue(this._oldValue);"ATTACHMENT"==this.meta.type&&(this._attachmentId&&this._oldAttachmentId!==
this._attachmentId&&this.dispatch(ECTConstants.EVENT_CHANGE,{deleteAttachment:this._attachmentId}),this._attachmentId=this._oldAttachmentId)},getValue:function(a){var b=this.meta.type.toLowerCase();if(this.field instanceof ECTAbstractInputField||this.meta.writable||this.field instanceof ECTCascadeField||this.field instanceof ECTDataGrid)return a=this.field.getValue(a),"attachment"==b&&(a="object"==typeof a?a.attachmentId:0),a;a=ECTUtil.getValueFromData(this._value);switch(b){case "foundation_autocomplete":case "hris_finduser":case "user":a=
"string"===typeof a&&""!==a?eval("("+a+")"):a;a="hris_finduser"===b?a&&a.userId:a&&a.id;break;case "number":case "double":case "long":a=ECTUtil.toDBString(a)}return a},getValueObj:_setFieldValue:function(a){"ATTACHMENT"==this.meta.type&&(a=ECTUtil.getValueFromData(a),"object"!==typeof a&&(a=a?eval("("+a+")"):""));"PICKLISTAUTOCOMPLETE"==this.meta.type&&(a=this._oldValue.value);this.field.setValue(a)},setValueAndDispatchChange:function(a,
b){this._setFieldValue(a);var c={actionCommand:a!=this._oldValue.value?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE};b&&this.meta.type!=ECTConstants.TYPE_DATAGRID&&(c.submitOnFieldChange=this.meta.submitOnFieldChange,c.metaId=this.meta.id);this.dispatch(ECTConstants.EVENT_CHANGE,c)},isModified:function(){return this.field.isModified?this.field.isModified():!1},handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_CHANGE:"ATTACHMENT"===this.meta.type&&(this._attachmentId&&
this._oldAttachmentId!==this._attachmentId&&(a.deleteAttachment=this._attachmentId),this._attachmentId="object"==typeof this.field.getValue()?this.field.getValue().attachmentId:0,a.actionCommand=a.actionCommand||this.field.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE);this.dispatchEvent(a);break;case ECTConstants.EVENT_ACTION:this.dispatchEvent(a)}},displayErrorMessage:function(a){this.field.setErrorMsg&&this.field.setErrorMsg(a)},hideErrorMessage:renderHtml:function(a){this.field.renderHtml(a)},cleanup:function(){this.field.cleanup()},setFocus:)}();function ECTSalaryField(a,b){this.register();this.init(a,b)}ECTSalaryField.FIELD_TYPE="SALARY";
ECTSalaryField.prototype=function(){return set(new ECTAbstractInputField,{cleanup:function(){this._config.writable&&(this.currencyCodeA.cleanup(),this.currencyCodeH.cleanup());this.unregister()},init:function(a,b){this._config=b;this._config.writable&&(this.currencyCodeA=new ectComboDropDown(this._config.functionalCurrency,{selectOptions:this._config.selectOptions}),this.currencyCodeH=new ectComboDropDown(this._config.functionalCurrency,{selectOptions:this._config.selectOptions}),this.currencyCodeH.setWritable(!0),
this.currencyCodeA.setWritable(!0));this.setValue(a)},setWritable:function(a){this._config.writable!=a&&(this._config.writable=a,this._config.writable&&(this.currencyCodeH.setWritable(!0),this.currencyCodeA.setWritable(!0)))},isWritable:function(){return this._config&&this._config.writable},handleEvent:function(a){switch(a.type){case "change":this._change()}},getValue:function(){if(!this._config.writable)return this._value;var a=juic.$(this.id+this._value.salaryRateType+"salary").value,b=juic.$(this.id+
this._value.salaryRateType+"hour").value;this._value.salary=ECTUtil.toDBString(a);this._value.salaryRateUnits=ECTUtil.toDBString(b);""==this._value.salaryRateUnits&&(this._value.salaryRateUnits="1",b.value=1);"Annual"==this._value.salaryRateType?this._value.salaryCurrencyCode=this.currencyCodeA.getValue():"Hourly"==this._value.salaryRateType&&(this._value.salaryCurrencyCode=this.currencyCodeH.getValue());return this._value},setValue:function(a){a&&"string"==typeof a&&(a=eval("("+a+")"));this._value=
{salaryRateType:a.salaryRateType?a.salaryRateType:"Annual",salary:a.salary?a.salary:"",salaryRateUnits:a.salaryRateUnits?a.salaryRateUnits:"1",salaryCurrencyCode:a.salaryCurrencyCode?a.salaryCurrencyCode:this._config.functionalCurrency};this._oldValue={salaryRateType:a.salaryRateType?a.salaryRateType:"Annual",salary:a.salary?a.salary:"",salaryRateUnits:a.salaryRateUnits?a.salaryRateUnits:"1",salaryCurrencyCode:a.salaryCurrencyCode?a.salaryCurrencyCode:this._config.functionalCurrency};this.currencyCodeA&&
this.currencyCodeA.setValue(this._value.salaryCurrencyCode);this.currencyCodeH&&this.currencyCodeH.setValue(this._value.salaryCurrencyCode);if(a=juic.$(this.id+"Annualsalary"))a.value=this._value.salary,juic.$(this.id+"Annualhour").value=this._value.salaryRateUnits;var b=juic.$(this.id+"Hourlysalary");b&&(b.value=this._value.salary,juic.$(this.id+"Hourlyhour").value=this._value.salaryRateUnits);a&&b&&this._setView()},renderHtml:function(a){var b=0<=this._value.salaryRateType.search(/annual/i),c=0<=
this._value.salaryRateType.search(/hourly/i);this._config.writable?(a.push('\x3cdiv\x3e\x3cdiv class\x3d"ECTSalaryType"\x3e','\x3cinput type\x3d"radio" ',b?'checked\x3d"checked"':"",' name\x3d"',this.id,'radio" id\x3d"',this.id,'AnnualCheckBox" onclick\x3d"',this.fireCode("_changeView","Annual"),'" /\x3e\x3clabel for\x3d"',this.id,'AnnualCheckBox"\x3e',MSGS.EMPFILE_HRIS_RATETYPE_ANUAL,"\x3c/label\x3e\x3c/div\x3e"),a.push('\x3cdiv id\x3d"',this.id,'AnnualDiv" ',b?"":'style\x3d"display:none"',"\x3e",
'\x3ctable role\x3d"presentation" cellspacing\x3d"0" cellpading\x3d"0"\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"',this.id,'Annualsalary"\x3e',MSGS.EMPFILE_HRIS_SALARY,'\x26nbsp;:\x26nbsp;\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cspan id \x3d "',this.id,'Annualsalary_efeWrapper" class\x3d"efeWrapper ectFormElement_textBox"\x3e\x3cspan class\x3d"efeElementWrapper"\x3e\x3cspan class\x3d"efeLeftImg"\x3e\x3cspan class\x3d"efeRightImg"\x3e\x3cinput type\x3d"text" class\x3d"efElement" onclick\x3d"',this.fireCode("_change",
this.id+"Annualsalary"),'" onchange\x3d"',this.fireCode("_change",this.id+"Annualsalary"),'" onfocus\x3d"',this.fireCode("_focus",this.id+"Annualsalary"),'" onblur\x3d"',this.fireCode("_blur",this.id+"Annualsalary"),'" ','; " id\x3d"',this.id,'Annualsalary" value\x3d"',Util.escapeHTML(this._value.salary),'" /\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3cinput type\x3d"hidden" value\x3d"1" id\x3d"',this.id,'Annualhour" /\x3e\x3c/td\x3e\x3ctd\x3e'),this.currencyCodeA.renderHtml(a),a.push("\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e"),
a.push('\x3cdiv class\x3d"ECTSalaryType"\x3e\x3cinput type\x3d"radio" ',c?"checked\x3dchecked":" ",' name\x3d"',this.id,'radio" id\x3d"',this.id,'HourlyCheckBox" onclick\x3d"',this.fireCode("_changeView","Hourly"),'"/\x3e\x3clabel for\x3d"',this.id,'HourlyCheckBox"\x3e',MSGS.EMPFILE_HRIS_RATETYPE_HOURLY,"\x3c/label\x3e\x3c/div\x3e"),a.push('\x3cdiv id\x3d"',this.id,'HourlyDiv" ',c?"":'style\x3d"display:none"',"\x3e",'\x3ctable role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"',this.id,
'Hourlysalary"\x3e',MSGS.EMPFILE_HRIS_WAGE,"\x26nbsp;:\x26nbsp;",'\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cspan id \x3d "',this.id,'Hourlysalary_efeWrapper" class\x3d"efeWrapper ectFormElement_textBox"\x3e\x3cspan class\x3d"efeElementWrapper"\x3e\x3cspan class\x3d"efeLeftImg"\x3e\x3cspan class\x3d"efeRightImg"\x3e\x3cinput type\x3d"text" class\x3d"efElement" onclick\x3d"',this.fireCode("_change",this.id+"Hourlysalary"),'" onchange\x3d"',this.fireCode("_change",this.id+"Hourlysalary"),'" onfocus\x3d"',
this.fireCode("_focus",this.id+"Hourlysalary"),'" onblur\x3d"',this.fireCode("_blur",this.id+"Hourlysalary"),'"  id\x3d"',this.id,'Hourlysalary" value\x3d"',Util.escapeHTML(this._value.salary),'" /\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e'),this.currencyCodeH.renderHtml(a),a.push("\x3c/td\x3e\x3c/tr\x3e",'\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d"',this.id,'Hourlyhour"\x3e',MSGS.EMPFILE_HRIS_HOURS_YEAR,'\x26nbsp;:\x26nbsp;\x3c/label\x3e\x3c/td\x3e\x3ctd collspan\x3d"2"\x3e\x3cspan id \x3d "',
this.id,'Hourlyhour_efeWrapper" class\x3d"efeWrapper ectFormElement_textBox"\x3e\x3cspan class\x3d"efeElementWrapper"\x3e\x3cspan class\x3d"efeLeftImg"\x3e\x3cspan class\x3d"efeRightImg"\x3e\x3cinput type\x3d"text" class\x3d"efElement" onclick\x3d"',this.fireCode("_change",this.id+"Hourlyhour"),'" onchange\x3d"',this.fireCode("_change",this.id+"Hourlyhour"),'" onfocus\x3d"',this.fireCode("_focus",this.id+"Hourlyhour"),'" onblur\x3d"',this.fireCode("_blur",this.id+"Hourlyhour"),'" id\x3d"',this.id,
'Hourlyhour" value\x3d"',Util.escapeHTML(this._value.salaryRateUnits),'" /\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e'),a.push("\x3c/div\x3e\x3c/div\x3e")):(a.push('\x3ctable role\x3d"presentation" class\x3d"',this._config.readOnlyClass,'"\x3e',"\x3ctr\x3e\x3ctd\x3e",MSGS.EMPFILE_HRIS_SALARY_TYPE," : ",Util.escapeHTML(b?MSGS.EMPFILE_HRIS_RATETYPE_ANUAL:MSGS.EMPFILE_HRIS_RATETYPE_HOURLY),"\x3c/td\x3e\x3c/tr\x3e"),b?a.push("\x3ctr\x3e\x3ctd\x3e",MSGS.EMPFILE_HRIS_SALARY,
" : ",Util.escapeHTML(this._value.salary)," ",Util.escapeHTML(this._value.salaryCurrencyCode),"\x3c/td\x3e\x3c/tr\x3e"):a.push("\x3ctr\x3e\x3ctd\x3e",MSGS.EMPFILE_HRIS_WAGE," : ",Util.escapeHTML(this._value.salary)," ",Util.escapeHTML(this._value.salaryCurrencyCode),"\x3c/td\x3e\x3c/tr\x3e","\x3ctr\x3e\x3ctd\x3e",MSGS.EMPFILE_HRIS_HOURS_YEAR," : ",Util.escapeHTML(this._value.salaryRateUnits),"\x3c/td\x3e\x3c/tr\x3e"),a.push("\x3c/table\x3e"))},_changeView:function(a){juic.$(this.id+this._value.salaryRateType+
"Div").style.display="none";juic.$(this.id+a+"Div").style.display="";this._value.salaryRateType=a;this._change()},_setView:function(){juic.$(this.id+"AnnualDiv").style.display="none";juic.$(this.id+"HourlyDiv").style.display="none";juic.$(this.id+this._value.salaryRateType+"CheckBox").checked=!0;juic.$(this.id+this._value.salaryRateType+"Div").style.display=""},isModified:function(){for(var a in this._value){var b=this._value[a]+"",c=ECTUtil.toDBString(this._oldValue[a]+"");if(b!=c)return!0}return!1},
_change:function(a){this.getValue();this.checkForErrors();a&&(juic.$(a),this._updateWrapperClassName());a="fieldUnChange";this._hasError||(this.isModified()?(this.dispatch("salchange"),a="fieldChange"):this.dispatch("salNochange"),this.dispatch("change",{actionCommand:a,hasError:this._hasError}))},deserializeState:function(a){(a=eval("("+a.value+")"))&&this.setValue(a)},serializeState:isNaN:function(){this.setErrorMsg();var a=/(^[0-9]+$)|(^[0-9]+\.[0-9]+$)|(^\.[0-9]+$)/;
textVal=this.getValue();return 0<textVal.salary.length&&!a.test(textVal.salary)?(this.setErrorMsg(sfMessageFormat.format(MSGS.EMPFILE_HRIS_WORKFLOW_EXPECTED_NUMBER,"Annual"==textVal.salaryRateType?MSGS.EMPFILE_HRIS_SALARY:MSGS.EMPFILE_HRIS_WAGE)),!0):0<textVal.salary.length&&!a.test(textVal.salaryRateUnits)?(this.setErrorMsg(sfMessageFormat.format(MSGS.EMPFILE_HRIS_WORKFLOW_EXPECTED_NUMBER,MSGS.EMPFILE_HRIS_HOURS_YEAR)),!0):!1},_focus:function(a){juic.$(a);this._setFocus(a,!0)},_blur:_setFocus:function(a,b){var c=juic.$(a+"_efeWrapper");assert(c,"component not found");c.className=c.className.replace(RegExp("Focus","g"),"");b&&(c.className+="Focus")},bindValidators:function(a){a.required&&ECTValidationMgr.bindValidator(this,"salaryFieldRequired",{required:a.required,message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_REQUIRED,a.label)});a.maxLength&&ECTValidationMgr.bindValidator(this,"maxlength",{message:sfMessageFormat.format(MSGS.EMPFILE_HRIS_DATA_LONG,a.label,a.maxLength),
maxlength:a.maxLength});ECTValidationMgr.bindValidator(this,"salaryFieldNumber",{required:a.required,message:sfMessageFormat.format(MSGS.EMPFILE_HRIS_WORKFLOW_EXPECTED_NUMBER,a.label)})}})}();function ECTFieldWithContext(a,b,c){this.register();this.init(a,b,c)}ECTFieldWithContext.FIELD_TYPE_FWC="FIELD_WITH_CONTEXT";ECTFieldWithContext.FIELD_TYPE_LOCAL="LOCALIZED";ECTFieldWithContext.CONTEXT_MIN_SIZE={height:300,width:400};ECTFieldWithContext.EVENT_CONTEXT_ACTION="EVENT_CONTEXT_ACTION";
ECTFieldWithContext.ACTION_CONTEXT_WILL_SHOW="CONTEXT_WILL_SHOW";ECTFieldWithContext.ACTION_CONTEXT_DID_SHOW="CONTEXT_DID_SHOW";ECTFieldWithContext.ACTION_CONTEXT_WILL_CLOSE="CONTEXT_WILL_CLOSE";ECTFieldWithContext.ACTION_CONTEXT_DID_CLOSE="CONTEXT_DID_CLOSE";var legacyIconMap={new:"add",info:"business-card",i18n:"globe"};
juic.extend(ECTFieldWithContext,ECTAbstractInputField,{_prepareMetaAndData:function(a,b){a=a||{};b=b||{};if(!b.contextMeta&&!b.writable&&"string"===typeof a){var c=a;a={};a.primaryFieldData=c}"string"===typeof a&&(a=ECTUtil.getConsumableValue(a),"object"!==typeof a&&(a={}));a.type&&a.type===b.type&&a.id&&a.id===b.id&&(a=a.value||{});a.contextData=a.contextData||{};b.contextMeta||((b=ECTContextUtil.constructMetaDataForFWC(b))||assert("Error in FWC Metadata construction"),a&&!a.primaryFieldData&&a.defaultValue&&
(a.primaryFieldData=a.defaultValue));b.primaryFieldMeta&&(b.primaryFieldMeta.writable=b.writable,b.primaryFieldMeta.required=b.required);b.contextMeta=b.contextMeta||{};this._permission=b.contextMeta.permission||{create:!1};this._defaultFieldMetaAndData={meta:b.primaryFieldMeta,data:a.primaryFieldData};this._contextInfo=a.contextData.contextInfo||{};this._contextInfo.objectType=b.contextMeta.objectType;this._recordId=a.contextData.recordId;this._title=b.contextMeta.title||this._contextInfo&&this._contextInfo.objectType;
this._contextInfo&&this._contextInfo.objectType||(this._formMeta=b.contextMeta.fieldsMeta,this._formData=a.contextData.fieldsData);this.meta=b},init:function(a,b,c){this._options=c||{};this._field&&this._field.cleanup&&this._field.cleanup();this._prepareMetaAndData(a,b);this._fieldPlusOldValue=new ECTFieldPlusOldValue(this._defaultFieldMetaAndData.data,this._defaultFieldMetaAndData.meta);this._field=this._fieldPlusOldValue.field;this._field.isOldValue=b.isOldValue;this._field.addEventListener(ECTConstants.EVENT_CHANGE,
this);this._field.addEventListener(ECTConstants.EVENT_ACTION,this);this._initialModeWritable=!1!==b.writable;this.setWritable(this._initialModeWritable);this._formMeta&&0<this._formMeta.length&&(this._contextForm=new ECTReadWriteForm(this._formMeta,this._formData,{type:ECTReadWriteForm.TYPE_READWRITE,initialModeWritable:!1!==b.writable}),this._contextForm.addEventListener(ECTConstants.EVENT_CHANGE,this),this._context=new ECTRoundedCornerBox(this._title,this._contextForm,!0),this._doneBtn=new SFCommandButton(MSGS.COMMON_Done,
!0,!0,null,{baseButtonWrapperClass:ECTConstants.BASE_BUTTON_WRAPPER_CLASS}),this._doneBtn.setActionCommand(ECTConstants.COMMAND_DONE),this._doneBtn.addEventListener(ECTConstants.EVENT_ACTION,this,"_saveContext"),this._context.setFooterButtons([this._doneBtn]),this._context.setFooterButtonsVisibility(!0),this._context.addEventListener("handleCloseDialog",this,"_escClose"))},_escClose:function(){var a=juic.$(this.id+"_the_context");!1===this._contextForm._writable?SFDom.setFocus(a.children[1]):SFDom.setFocus(a.children[0])},
setValueAndDispatchChange:function(a){a&&(a=a.primaryFieldData?a:{primaryFieldData:{defaultValue:a,value:a}},this._fieldPlusOldValue&&this._fieldPlusOldValue.setValueAndDispatchChange(ECTUtil.getValueFromData(a.primaryFieldData)))},setAvailableWidth:function(a){this._field.setAvailableWidth(a-25)},setValue:function(a){if(a&&(a.primaryFieldData||a.contextData)){a.primaryFieldData&&this._field.setValue(ECTUtil.getValueFromData(a.primaryFieldData));var b=a.contextData&&a.contextData.contextInfo;if(b&&
b.objectType)this._contextInfo=a.contextData.contextInfo;else{a=this._formData=a.contextData&&a.contextData.fieldsData||[];for(var b=0,c=a.length;b<c;b++){var d=a[b];if(this._contextForm&&d){var e=this._contextForm.getFieldByMetaId(d.id,{fieldPlusOldValue:!0});e&&e.setValue(ECTUtil.getValueFromData(d))}}}this._repaintContextIcon()}},getValue:function(a,b){var c={id:this._recordId,primaryFieldData:{id:this._getMetaId(),value:b&&this._field.getValueObj?this._field.getValueObj():this._field.getValue(a,
b),type:this._defaultFieldMetaAndData.meta.type},contextData:{}};this._hasContext()&&"OrgChart"!==this._hasContext()?c.contextData.contextInfo=this._contextInfo:"OrgChart"===this._hasContext()?c=c.primaryFieldData.value:this._contextForm&&(c.contextData.fieldsData=this._contextForm.getValue(a,b));return c},setPermission:function(a){this._permission=a},initByDefaultMetaValue:function(){this._initByDefaultMetaValue(this.meta)},_initByDefaultMetaValue:function(a){a&&!ECTUtil.isEmpty(a.defaultValue)&&
!this.isEmpty(a.defaultValue)&&this.isEmpty()&&(this._oldValue=this._prevValue=a.defaultValue,this.setValue(a.defaultValue),this._defaultedWithMetaValue=!0)},_getMetaId:setErrorMsg:function(a){this._super(a);"function"===typeof this._field.setErrorMsg&&this._field.setErrorMsg(a)},isModified:function(){return this._field.isModified()||this._contextForm&&this._contextForm.isModified()},isFieldwritable:function(a){return this._initialModeWritable},
reset:_showContext:function(a){this._contextForm&&(this.dispatch(ECTFieldWithContext.EVENT_CONTEXT_ACTION,{actionCommand:ECTFieldWithContext.ACTION_CONTEXT_WILL_SHOW,context:this}),this._contextForm.setWritable(a),this._context.setWritable(a),SFOverlayMgr.addEventListener("overlayRendered",this,"_resizeContext"),SFOverlayMgr.showOverlay(this._context,!0),this.dispatch(ECTFieldWithContext.EVENT_CONTEXT_ACTION,{actionCommand:ECTFieldWithContext.ACTION_CONTEXT_DID_SHOW,
context:this}),this._contextForm&&this._contextForm._fields&&0<this._contextForm._fields.length&&this._contextForm._writable?(a=this._contextForm._fields[0])&&a.field&&"function"===typeof a.field.setFocus&&a.field.setFocus(!0):(a=jQuery(".contextView .ectFCBody"),this._doneBtn&&a&&0<a.length&&!this._contextForm._writable&&(a[0].scrollHeight>a[0].clientHeight?(a[0].setAttribute("tabindex","0"),a[0].focus()):this._doneBtn.setFocus(!0))))},_saveContext:function(){this.dispatch(ECTFieldWithContext.EVENT_CONTEXT_ACTION,
{actionCommand:ECTFieldWithContext.ACTION_CONTEXT_WILL_CLOSE,context:this});SFOverlayMgr.removeEventListener("overlayRendered",this,"_resizeContext");SFOverlayMgr.removeOverlay(this._context.id);this.dispatch(ECTFieldWithContext.EVENT_CONTEXT_ACTION,{actionCommand:ECTFieldWithContext.ACTION_CONTEXT_DID_CLOSE,context:this});if(this.context&&this.context._buttons&&0<this.context._buttons.length){var a=this.context._buttons[0];a&&a._buttons&&"function"===typeof a._buttons.setFocus&&juic.$(a._buttons.setFocus(!0))}},
_resizeContext:function(a){a=juic.$(this._context.id);var b=juic.$(this._contextForm.id);if(b&&a){SFDom.addClass(a,"contextView");var c=SFDom.getViewportHeight()-150,d=SFDom.getViewportWidth()-250,e=ECTFieldWithContext.CONTEXT_MIN_SIZE.width,f=ECTFieldWithContext.CONTEXT_MIN_SIZE.height,g=this.isFioriFDEnabled()?36:20;b.offsetWidth>d?(SFDom.setStyle(b,"width",d+"px"),SFDom.setStyle(a,"width",d+g+"px")):b.offsetWidth<e?(SFDom.setStyle(b,"width",e+"px"),SFDom.setStyle(a,"width",e+g+"px")):(SFDom.setStyle(b,
"width",b.offsetWidth+"px"),SFDom.setStyle(a,"width",b.offsetWidth+g+"px"));b.offsetHeight>c?SFDom.setStyle(b,"height",c+"px"):b.offsetWidth<f?SFDom.setStyle(b,"height",f+"px"):SFDom.setStyle(b,"height",b.offsetHeight+"px");SFOverlayMgr.centerComponent(this._context.id)}},dispatchEvent:function(a){a.searchElement&&this.rowIndex&&"undefined"!==typeof this.rowIndex&&(a.searchElement.rowIndex=this.rowIndex);this._super(a);a.actionCommand==ECTFieldWithContext.ACTION_CONTEXT_DID_CLOSE&&(a=juic.$(this.id+
"_the_context"),!1===this._contextForm._writable?SFDom.setFocus(a.children[1]):SFDom.setFocus(a.children[0]))},handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_CHANGE:this.dispatchEvent(a);if(a=juic.$(this.id+"_the_context"))a.className="secondaryCell "+(this._contextForm&&this._contextForm.isModified()?"modified":"");this._repaintContextIcon();this.checkForErrors();break;default:this.dispatchEvent(a)}},setInfoMsg:function(a){var b=this._fieldPlusOldValue&&this._fieldPlusOldValue.field;
if(b&&b.setInfoMsg){var c=b&&b.getFACField(),d=juic.$(this.id+"_the_context");d&&(d.style.position=a?"absolute":"static",d.style.left=a&&c?juic.$(c.id+"_fieldFocusMark").offsetWidth+"px":"auto");b.setInfoMsg(a)}},_hasContext:_click:function(a,b){if(this._context)this._showContext(a);else if(this._hasContext()&&"OrgChart"!==this._hasContext()){"Rule"==this._contextInfo.objectType&&(this._qcController=new RERulePopUpContainer);this._qcController=
this._qcController||new MDFQuickCardController;var c={},d=this.getPrimaryFieldValue();d?(c.internalCode=d,this._qcController.showQuickCard(this._contextInfo.objectType,c)):this._permission.create&&(this.meta.contextMeta&&this.meta.contextMeta.ruleScenarioCode?this._qcController.showQuickCard(this._contextInfo.objectType,c,this.meta.contextMeta.ruleScenarioCode):this._qcController.showQuickCard(this._contextInfo.objectType,c))}else"OrgChart"===this._hasContext()&&this._field.dispatch(ECTConstants.EVENT_ACTION,
{actionCommand:ECTConstants.EVENT_CONTEXT_ICON_CLICKED})},_repaintContextIcon:function(){if(this._contextForm||this._hasContext()){var a=juic.$(this.id+"_the_context");if(a){var b=juic.createRenderContext();this._createContextIconHtml(b);a.innerHTML=b.join("")}}},setFontConfig:_createContextIconHtml:function(a){var b="",c=MSGS.get("ECT_COMMON_VIEW",this._title),d=this.getPrimaryFieldValue();if("OrgChart"===
this._hasContext())b="orgChart"+(d?"Active":""),this.isFieldwritable(this._field)&&(a.push('\x3cbutton style\x3d"border:0; background-color: transparent;" title\x3d"',c,'" class\x3d"context_icon ',b," ",Util.generateFDClasses("link"),' writeComp" ','onclick\x3d"',d?this.fireCode("_click",!0):"",'return false;"'),d||a.push(' aria-disabled\x3d"true"'),a.push("\x3e"),Util.isFioriFDEnabled()?a.push('\x3ci class\x3d"',Util.generateIconClasses("business-card"),'"\x3e\x3c/i\x3e'):a.push("\x26nbsp;"),a.push("\x3c/button\x3e"));
else{this._hasContext()&&"OrgChart"!==this._hasContext()?d?b="info":this._permission.create&&(b="new",c=MSGS.get("ECT_COMMON_ADD",this._title)):this._contextForm&&(b="i18n");var e=legacyIconMap[b],f=b?"context_icon "+b:"";this._getMetaId();var g=this._title&&this._contextInfo&&"NameFormatGO"===this._contextInfo.objectType;this.isFieldwritable(this._field)&&(this._title&&this.meta&&"LOCALIZED"===this.meta.type&&this._field&&this._field._label?c=MSGS.get("ECT_COMMON_TOOLTIP_ADD",this._title,this._field._label):
g&&(c=MSGS.get("ECT_COMMON_TOOLTIP_ADD",this._title,this.meta.label)),a.push('\x3cbutton style\x3d"border:0; background-color: transparent;"',b?"":" tabindex\x3d'-1' ",'title\x3d"',c,'" class\x3d"',f," ",Util.generateFDClasses("link"),' writeComp" onkeypress\x3d"',this.fireCode("_handleKeyPress",!0),';return false;" onclick\x3d"',this.fireCode("_click",!0),';return false;"\x3e'),Util.isFioriFDEnabled()?a.push('\x3ci class\x3d"',Util.generateIconClasses(e),'"\x3e\x3c/i\x3e'):a.push("\x26nbsp;"),a.push("\x3c/button\x3e"));
this._title&&this.meta&&"LOCALIZED"===this.meta.type&&this._field&&this._field._label?c=MSGS.get("ECT_COMMON_TOOLTIP_VIEW",this._title,this._field._label):g&&(c=MSGS.get("ECT_COMMON_TOOLTIP_VIEW",this._title,this.meta.label));a.push('\x3cbutton style\x3d"border:0; background-color: transparent;" title\x3d"',c,'" aria-label\x3d"',c,'" class\x3d"',f," ",Util.generateFDClasses("link")," ",this.isFieldwritable(this._field)?" readComp":" read_only readOnlyContext",d?"":" disabled",'"',d?"":" disabled",
d?"":" tabindex\x3d'-1' ",'onclick\x3d"',this.fireCode("_click",!1),';return false;"\x3e');Util.isFioriFDEnabled()?a.push('\x3ci class\x3d"',Util.generateIconClasses(e),'"\x3e\x3c/i\x3e'):a.push("\x26nbsp;");a.push("\x3c/button\x3e")}},_handleKeyPress:renderHtml:function(a){if(this.isFieldwritable(this._field)||!this._field.isOldValue){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"fieldWithContext ',this._options.className||"",'"\x3e');a.push('\x3cdiv class\x3d"primaryCell"\x3e');
this._fieldPlusOldValue.renderHtml(a);a.push("\x3c/div\x3e");if(this._contextForm||this._hasContext())a.push('\x3cdiv class\x3d"secondaryCell ',this._field&&this._field instanceof ECTTextArea?"ectTextAreaContextIcon":"",'" id\x3d"',this.id,'_the_context"\x3e'),this._createContextIconHtml(a),a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")}else a.push('\x3cspan class\x3d"struckLabelWrapper"\x3e'),this._fieldPlusOldValue.fillInnerHTML(a),a.push("\x3c/span\x3e")},recreatePrimaryField:function(a,b){this._defaultFieldMetaAndData=
this._defaultFieldMetaAndData||{};this._defaultFieldMetaAndData.data=a;this._defaultFieldMetaAndData.meta=b;this._fieldPlusOldValue&&this._fieldPlusOldValue.reCreate(a,b)},getPrimaryFieldValue:function(){var a=this._field.getValue();this.meta.primaryFieldMeta.sendDeleted&&(a=a.added);return a},validateFields:function(){var a={returnFlag:!0,errorMsg:[],fields:[]};this._field&&this._field.checkForErrors&&this._field.checkForErrors()&&(a.errorMsg=a.errorMsg.concat(this._field.getErrorMsg()),a.fields.push(this._field),
a.returnFlag=!1);if(this._contextForm){var b=this._contextForm.validateFields(),c=(this.meta.label+" "+b.errorMsg.join(":##:"+this.meta.label+" ")).split(":##:");b.returnFlag||(a.errorMsg=a.errorMsg.concat(c),a.returnFlag=a.returnFlag&&b.returnFlag,a.fields=a.fields.concat(b.fields))}return a},isEmpty:function(a){a=a||this.getValue();if("string"==typeof a&&!ECTUtil.isEmpty(a))return!1;var b=a.primaryFieldData;if(b&&(b=b.value)&&!ECTUtil.isEmpty(b)&&(!b.deleted||b.added))return!1;if(a=a.contextData.fieldsData)for(var c=
0,d=a.length;c<d;c++)if((b=a[c].value)&&!ECTUtil.isEmpty(b))return!1;return!0},bindValidators:function(a){a.required&&(a={message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_REQUIRED,a.label)},a.func=new Callback(this,this.isEmpty),a.negate=!0,ECTValidationMgr.bindValidator(this,"function",a))},getPrimaryField:function(){return this._field},getFieldByMetaId:function(a,b){b=b||{};if((a==this._getMetaId()||a==this.meta.id)&&b.getContextParent&&!b.fieldPlusOldValue)return this;if(a==this._defaultFieldMetaAndData.meta.id)return b.fieldPlusOldValue?
this._fieldPlusOldValue:this._field;if(this._contextForm)return this._contextForm.getFieldByMetaId(a,b)},getFieldListByMetaId:function(a,b){var c=this.meta.id.length-a.length,d=this.meta.id.indexOf(a,c);if(b&&b.getContextParent&&-1!==d&&c===d)return[this];if(a==this._defaultFieldMetaAndData.meta.id)return[b.fieldPlusOldValue?this._fieldPlusOldValue:this._field];if(this._contextForm&&this._contextForm.getFieldListByMetaId)return this._contextForm.getFieldListByMetaId(a,b)},switchMode:function(a){this._field.switchMode(a)},
setWritable:cleanup:function(){this._fieldPlusOldValue&&(this._field.removeEventListener(ECTConstants.EVENT_CHANGE,this),this._field.removeEventListener(ECTConstants.EVENT_ACTION,this),this._fieldPlusOldValue.cleanup());this._contextForm&&(this._contextForm.removeEventListener(ECTConstants.EVENT_CHANGE,this),this._contextForm.cleanup(),this._context.cleanup(),this._doneBtn.cleanup());this._qcController&&this._qcController.cleanup&&this._qcController.cleanup();
this.unregister()},updateFieldStatus:function(a,b,c,d){d=d||null;(a=this.getFieldByMetaId(a,c))&&ECTUtil.updateFieldStatus(a,b,this,c,d)}});var ECTFieldWithCustomContext=ECTFieldWithCustomContext.FIELD_TYPE="ECTFieldWithCustomContext";
extend(ECTFieldWithCustomContext,ECTFieldWithContext,{init:function(a,b,c){this._super(a,b,c);this._contexts=b.contexts||[]},_createContextIconHtml:function(a){var b=this._contexts;if(ECTUtil.isEmptyArray(b))this._super(a);else for(var c=0,d=b.length;c<d;c++){var e=b[c];e&&(a.push('\x3ca title\x3d"',e.tooltip,'" class\x3d"context_icon ',Util.generateFDClasses("link")," ",e.icon,' writeComp" href\x3d"javascript:void(0);" ','onclick\x3d"',this.fireCode("_clickContextIcon",!0,e),'return false;"\x3e',
e.text||"\x26nbsp;","\x3c/a\x3e"),e.readWrite&&a.push('\x3ca title\x3d"',e.tooltip,'" class\x3d"context_icon ',Util.generateFDClasses("link")," ",e.icon,this.isFieldwritable(this._field)?" readComp":" read_only",'" href\x3d"javascript:void(0);" ','onclick\x3d"',this.fireCode("_clickContextIcon",!1,e),'return false;"\x3e',e.text||"\x26nbsp;","\x3c/a\x3e"))}},_hasContext:function(){return!0},_clickContextIcon:function(a,b,c){b&&this.dispatch(ECTFieldWithContext.EVENT_CONTEXT_ACTION,{actionCommand:b.action,
contextInfo:b,context:this})},_click:function(a,b){"Rule"==this._contextInfo.objectType||"OrgChart"==this._contextInfo.objectType?this._super(a,b):this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTFieldWithContext.EVENT_CONTEXT_ACTION,isWriteMode:a,value:this.getPrimaryFieldValue(),permission:this._permission,objectType:this._contextInfo.objectType,defaultScreen:this.meta.defaultScreenForQuickCard,rowId:this._contextInfo.id,searchForEffectiveDate:this._contextInfo.searchForEffectiveDate,targetEl:b.currentTarget})},
handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_CHANGE:a.actualMetaId=this.meta.id}this._super(a)}});
function ECTTextArea(a,b){this._config=b||{};this.register();this._title="undefined"==typeof b.title?"":b.title;a=a?a:this._title;this.setValue(a);this._oldValue=a;this._writable="undefined"===typeof b.writable?!0:b.writable;this._maxLength=this._config.maxLength;this._writable&&this._maxLength&&(this.textLimiter=new SFTextLimiter(this._maxLength),this.textLimiter.addEventListener("limiterAction",this,"_handleLimiterEvent"),this._charLimitDialog=new ECTDialogBox(MSGS.COMMON_Err,new SFSysMsg("alert",
MSGS.get("COMMON_RTE_MAXIMUM_PASTE_LIMIT_MESSAGE",this._maxLength)),[{label:MSGS.COMMON_Ok,enabled:!0,active:!0,eventName:"hide"}],400));this._rows=b.rows&&0<b.rows?b.rows:3;this._cols=b.cols&&0<b.cols?b.cols:40;this._height=b.height&&0<b.height?b.height:48;this._label=b.label?b.label:"";this._isRequired=b&&b.required}ECTTextArea.FIELD_TYPE="TextArea";ECTTextArea.MAXIMUM_HEIGHT=150;
ECTTextArea.prototype=function(){return set(new ECTAbstractInputField,{WARNING_HIDE_DELAY_SECONDS:5,POST_MAX_LENGTH_ALLOWED_KEYS:{8:"BACKSPACE",9:"TAB",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT_ARROW",38:"UP_ARROW",39:"RIGHT_ARROW",40:"DOWN_ARROW",45:"INSERT",46:"DELETE"},_hideOnBlur:!0,_handleLimiterEvent:function(a){var b=juic.$(this.id+"_limiterText");"aboveThreshold"==a.actionCommand||"atThreshold"==a.actionCommand?(b.style.display="",this._hideOnBlur=!0):"maxLength"==a.actionCommand||
"aboveMaxLength"==a.actionCommand?(b.style.display="",this._hideOnBlur=!1):b.style.display="none"},getWriteElement:function(){var a=juic.$(this.id+"_write"),b=juic.$(this.id+"_limiterText");a&&b&&"0px"==b.style.width&&(b.style.width=a.offsetWidth+"px");return a},setValue:function(a){this._value=a||"";if(a=this._writable?this.getWriteElement():juic.$(this.id+"_read"))this._writable?a.value=this._value:a.innerHTML=escapeHTML(this._value),this._updateWrapperClassName()},getValue:function(){if(this._writable&&
this.getWriteElement()){var a=this.getWriteElement().value.trim();this._value=a===this._title?"":a}return this._value},initByDefaultMetaValue:function(){this._initByDefaultMetaValue(this._config)},_delayedKeyUp:function(){this._storeOldValue();var a=this.getWriteElement();SFDom.replaceClass(a,"showScrollbar","hideScrollbar");a.style.height=this._height+"px";a.scrollHeight>=this._height&&a.scrollHeight<=ECTTextArea.MAXIMUM_HEIGHT&&a.offsetHeight<=a.scrollHeight?a.style.height=a.scrollHeight+"px":a.scrollHeight>
ECTTextArea.MAXIMUM_HEIGHT&&(a.style.height=ECTTextArea.MAXIMUM_HEIGHT+"px",SFDom.replaceClass(a,"hideScrollbar","showScrollbar"));this._checkandRestValue()},_keyUp:function(){var a=this;this._keyUpTimer&&(clearTimeout(this._keyUpTimer),this._keyUpTimer=null,delete this._keyUpTimer);this._keyUpTimer=setTimeout(function(){a._delayedKeyUp()},100)},_storeOldValue:function(a){var b=this.getWriteElement();b.value.trim()===this._title&&(b.value="");b.value.length<=this._maxLength?this._oldValuetemp=b.value:
(this._oldValuetemp=b.value.slice(0,this._maxLength),a&&this._charLimitDialog&&this._charLimitDialog.showDialog())},_focus:function(){this._storeOldValue(!0);this._focusFlag=!0;this._updateWrapperClassName();this._keyUp();this._hasError&&this._callOut.show(this.id+"_fieldFocusMark",{setFocusOnSelf:!1})},_checkandRestValue:function(a){if(!this._maxLength)return!0;var b=this,c=this.getWriteElement();setTimeout(function(){c.value.length>b._config.maxLength&&(c.value=b._oldValuetemp,a&&b._charLimitDialog&&
b._charLimitDialog.showDialog());b.textLimiter.checkLimiter(c.value)},0)},_renderWriteHtml:function(a){this._label&&a.push("\x3clabel class\x3d'hiddenAriaContent' id\x3d'",this.id,"_description'\x3e",Util.escapeHTML(this._label),"\x3c/label\x3e");a.push('\x3cdiv id \x3d"',this.id,'_efeWrapperSpan"  class\x3d"writeComp ectTextAreaWrapper"\x3e\x3ctextarea class\x3d\'formElement ectTextArea hideScrollbar ',this.generateFDClasses("textarea"),"' style\x3d'height:",this._height,"px;' id\x3d'",this.id,"_write' ",
this._label?" aria-labelledby\x3d'"+this.id+"_description'":""," aria-required\x3d'",this._isRequired,"' "," rows\x3d'",this._rows,"' cols\x3d'"+this._cols,"' "," onfocus\x3d'",this.fireCode("_focus"),"' "," onmousedown\x3d'",this.fireCode("_storeOldValue"),"' "," onpaste\x3d'",this.fireCode("_checkandRestValue",!0),"' "," onchange\x3d'",this.fireCode("_change"),"' "," onblur\x3d'",this.fireCode("_blur"),"' "," onkeyup\x3d'",this.fireCode("_keyUp"),"' ","\x3e",Util.escapeHTML(this._value)+"\x3c/textarea\x3e");
a.push('\x3cdiv id\x3d"',this.id,'_limiterText" style\x3d"display:none" class\x3d"limiterWrapper"\x3e');this.textLimiter&&this.textLimiter.renderHtml(a);a.push("\x3c/div\x3e\x3c/div\x3e")},renderHtml:function(a){this._writable&&(this._drawRoundedCorners(a,"textarea"),this._maxLength&&a.push("\x3cdiv id\x3d'",this.id,"_warning' class\x3d'warningText' role\x3d'alert' aria-hidden\x3d'true'\x3e\x3c/div\x3e"));a.push('\x3cdiv id\x3d"'+this.id+'_read" role\x3d"textbox" class\x3d"'+(this._writable?"readComp ":
"read_only ")+this._fontStyle+'"'+(this._writable?"":' aria-readonly\x3d"true"')+"\x3e"+ECTUtil.readonlyValueSwitch(this._value)+"\x3c/div\x3e")},setFontConfig:function(a){this._fontStyle=(this._fontConfig=a)&&this._fontConfig.value?this._fontStyle=ECTFontConfig.getClassNames(this._fontConfig.value):""},isModified:function(){return"undefined"==typeof this._oldValue&&this._value||this._oldValue!=this._value},reset:function(){this._value!==this._oldValue&&(this.setValue(this._oldValue),this.checkForErrors(),
this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_UNCHANGE,hasError:this._hasError}))},_blur:function(){this._focusFlag=!1;this.checkForErrors();var a=this.getWriteElement();a&&this._resetDisplayTextToTitle(a)},_resetDisplayTextToTitle:function(a){this._callOut.hide();var b=a.value.trim();if(""===b||b===this._title)a.value=this._title},_change:function(){var a=this.getWriteElement();a&&(this._updateWrapperClassName(),this._value=a.value.trim(),this.checkForErrors(),a=
this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE,this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:a,hasError:this._hasError}))}})}();function ECTCheckBox(a,b,c){this.register();this._oldValue=this._value=this._parseBooleanValue(a);this._checked=b||this._value;this._label=c;this.init()}ECTCheckBox.FIELD_TYPE_CHECK="CHECK";ECTCheckBox.FIELD_TYPE_BOOL="BOOLEAN";
juic.extend(ECTCheckBox,ECTAbstractInputField,{init:function(){this._checkbox=new SFCheckBox(this._checked,this._value+"",Util.isFioriFDEnabled()?" ":null,null,null,{ariaLabelledBy:this._label?this.id+"_label":null});this._checkbox.addEventListener("change",this);this._err=new ECTInlineError("")},cleanup:_parseBooleanValue:function(a){var b;try{b=!!JSON.parse(a)}catch(c){b=!!a}return b},setModel:function(a){assert(this._config.writable,
"Field should be writable!");ECTValidationMgr.unbindValidator(this._checkbox);this._checkbox.unregister();this.setErrorMsg();this._checkbox=new SFCheckBox;this.setChecked(a&&a.checked);this.setValue(a&&a.value);this.setEnabled(a&&a.writable);this.setLabel(Util.isFioriFDEnabled()?" ":null);this._checkbox.addEventListener("change",this);if(a=juic.$(this.id))a.innerHTML="",this._checkbox.render(a)},validate:function(a){return a?(this._err.setVisibility(!1),this._err.setValue(a),this._err.setVisibility(!0),
!1):!0},setErrorMsg:function(a){a?(this._err.setVisibility(!1),this._err.setValue(a),this._err.setVisibility(!0)):(this._err.setValue(""),this._err.setVisibility(!1));this.dispatch("fieldError",{hasError:!!a})},setChecked:function(a){this._checkbox.setChecked(a)},isChecked:function(){return this._checkbox.isChecked()},setWritable:function(a){this.setEnabled(a);this._super(a)},setRequired:function(a){this._checkbox.setRequired(a)},setEnabled:function(a){this._checkbox.setEnabled(a)},setVisible:function(a){!0===
a?(Util.addClass(juic.$(this.id),"show"),Util.removeClass(juic.$(this.id),"hide")):(Util.addClass(juic.$(this.id),"hide"),Util.removeClass(juic.$(this.id),"show"))},isEnabled:function(){return this._checkbox.isEnabled()},setValue:getValue:function(){return this._checkbox.getValue()},setLabel:function(a){this._checkbox.setLabel(a)},setName:function(a){this._checkbox.setName(a)},handleEvent:function(a){switch(a.type){case "change":this.setValue(a.checked),
this.dispatch("change",{actionCommand:this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE})}},renderHtml:function(a){a.push('\x3cspan id\x3d"',this.id,"\" class\x3d'ectCheckBox' \x3e");this._label&&a.push('\x3clabel id\x3d"',this.id,'_label" class\x3d"hiddenAriaContent"\x3e',Util.escapeHTML(this._label),"\x3c/label\x3e");this._writable&&(a.push("\x3cspan class\x3d'writeComp'\x3e"),this._checkbox.renderHtml(a),a.push("\x3c/span\x3e"));a.push("\x3cspan class\x3d'",this._readOnlyClass,
"'\x3e",escapeHTML(this._parseBooleanValue(this.getValue())?MSGS.COMMON_Yes:MSGS.COMMON_No),"\x3c/span\x3e");a.push("\x3c/span\x3e");this._err.renderHtml(a)},isModified:function(){return this._oldValue!==this._parseBooleanValue(this.getValue())},reset:function(){this.setValue(this._oldValue)},updateReadOnlyClassName:function(){this._readOnlyClass="readonly"+(this._writable?" readComp":" read_only")}});ECTAdjCompField.COMMNAD_APPLY="Apply";
function ECTAdjCompField(a,b,c,d,e){this.register();this._totalAmountFld=this._percentFld=this._numberFld=null;this._value={number:null,percent:null,totalAmount:null};this.init(a,b,c,d,e)}
ECTAdjCompField.prototype=function(){return set(new ECTAbstractInputField,{isPopup:!1,_createNumberFld:function(a){a=new ECTField("",{valueType:a,hideErrors:!0,inputSize:"number"==a?15:5,writable:this._writable});this._writable&&(ECTValidationMgr.bindValidator(a,"number",{message:sfMessageFormat.format(MSGS.EMPFILE_HRIS_WORKFLOW_EXPECTED_DECIMAL_NUMBER,this.label)}),a.addEventListener("change",this),a.addEventListener("amtOrPercentOrTotalAmountChange",this));return a},_setErrorMsg:function(a,b,c){b&&
(this._errMsg=[]);a.length&&this._errMsg.push(a)},_renderErrorMsg:function(a){return"string"==typeof a?a:1==a.length?a.join(""):'\x3cul style\x3d"margin:0px;margin-left:10px;padding:0px;"\x3e\x3cli\x3e'+a.join("\x3c/li\x3e\x3cli\x3e")+"\x3c/li\x3e\x3c/ul\x3e"},_calculatePercentAndTotalAmount:function(){this.validateNumber();if(!this._hasError){var a=this._value.number/this._ankerNumber;if(isNaN(a)||Infinity===a)a=0;this._value.percent=(100*a).toFixed(2);this._percentFld.setValue(this._toLocalNumber(this._value.percent));
a=(this._ankerNumber+this._value.number).toFixed(2);if(isNaN(a)||Infinity===a)a=0;this._value.totalAmount=a;this._totalAmountFld.setValue(this._toLocalNumber(this._value.totalAmount))}},_calculateNumberAndTotalAmount:function(){this.validatePercent();if(!this._hasError){var a=(this._value.percent/100*this._ankerNumber).toFixed(2);if(isNaN(a)||Infinity===a)a=0;this._value.number=a;this._numberFld.setValue(this._toLocalNumber(this._value.number));a=this._ankerNumber+this._toNumber(this._numberFld.getValue());
if(isNaN(a)||Infinity===a)a=0;this._value.totalAmount=a;this._totalAmountFld.setValue(this._toLocalNumber(this._value.totalAmount))}},_calculateNumberAndPercent:function(){this.validateTotalAmount();if(!this._hasError){var a=((this._value.totalAmount-this._ankerNumber)/this._ankerNumber*100).toFixed(2);if(isNaN(a)||Infinity===a)a=0;this._value.percent=a;this._percentFld.setValue(this._toLocalNumber(a));a=(this._value.totalAmount-this._ankerNumber).toFixed(2);if(isNaN(a)||Infinity===a)a=0;this._value.number=
a;this._numberFld.setValue(this._toLocalNumber(this._value.number))}},_toLocalNumber:function(a){return ECTUtil.toLocalNumber(a)},_toNumber:function(a){return Number(ECTUtil.toDBString(a))},validatePercent:function(){(this._enableApplyBtn=this._validateChange(this._percentFld,"percent"))&&this._validateField(this._percentFld,this._numberFld,"0",this._totalAmountFld,"0","percent")},validateNumber:function(){(this._enableApplyBtn=this._validateChange(this._numberFld,"number"))&&this._validateField(this._numberFld,
this._percentFld,"0.00",this._totalAmountFld,"0","number")},validateTotalAmount:function(){(this._enableApplyBtn=this._validateChange(this._totalAmountFld,"totalAmount"))&&this._validateField(this._totalAmountFld,this._percentFld,"0.00",this._numberFld,"0","totalAmount")},_validateField:function(a,b,c,d,e,f){var g=ECTValidationMgr.validate(a);this._setErrorMsg("",!0);g&&g.result?(this._hasError=!1,a=a.getValue(),this._value[f]=this._toNumber(a)):(this._hasError=!0,this._setErrorMsg(g.message),b.setValue(c),
d.setValue(e));this.displayErrors(this._errMsg)},_validateChange:function(a,b){var c=a.getValue(),c=c.trim(),d=/^[+|-]*$/;return 1>=c.length?(this._sfError.setVisibility(!1),this._value[b]=this._toNumber(c),!d.test(c)):!0},checkForErrors:bindValidators:function(){},setFixedHeight:function(a){},init:function(a,b,c,d,e){assert("undefined"!=typeof a&&null!=a,"ankerNumber required");this._ankerNumber=a;this._salaryCurrencyCode=b;
this._writable=0==d?d:!0;this.label=e;this._numberFld=this._createNumberFld("number");this._percentFld=this._createNumberFld("percent");this._totalAmountFld=this._createNumberFld("number");this._numberFldID=this._numberFld.id;this._percentFldID=this._percentFld.id;this._totalAmountFldID=this._totalAmountFld.id;this.setValue(c);this._writable&&(this._errMsg=[]);this._buttonsArr=[];this._buildButton(ECTConstants.COMMAND_CANCEL,MSGS.COMMON_Cancel,!1,!0);this._buildButton(ECTAdjCompField.COMMNAD_APPLY,
MSGS.COMMON_Apply,!0,!1);this._enableApplyBtn=!1;this._sfError.setCloseButtonVisible(!1)},cleanup:function(){this._numberFld.unregister();this._percentFld.unregister();this._totalAmountFld.unregister();for(var a=this._buttonsArr.length;a--;)this._buttonsArr[a].unregister();this.unregister()},getValue:getValueObj:function(){return this._value},setValue:function(a){this._value.number=ECTUtil.toDBString(a);this._numberFld.setValue(a?a:"0");a=this._value.number/
this._ankerNumber;if(isNaN(a)||Infinity===a)a=0;this._value.percent=(100*a).toFixed(2);this._percentFld.setValue(this._toLocalNumber(this._value.percent));this._value.totalAmount=this._ankerNumber+this._toNumber(this._value.number);this._totalAmountFld.setValue(this._toLocalNumber(this._value.totalAmount))},displayErrors:function(a){if(!this._writable)return this._hasError=!1,!0;a.length?this.setErrorMsg(this._renderErrorMsg(a)):(this._hasError=!1,this.setErrorMsg())},renderHtml:function(a){this.isPopup?
(a.push('\x3cdiv id\x3d"',this.id,'"\x3e'),this._sfError.renderHtml(a),a.push('\x3ctable class\x3d"Holder" summary\x3d""\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"Label"\x3e\x3cnobr\x3e',MSGS.EMPFILE_HRIS_CHANGE_AMOUNT," \x3c/nobr\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e"),this._numberFld.renderHtml(a),a.push('\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"Label"\x3e\x3cnobr\x3e',MSGS.EMPFILE_HRIS_CHANGE_PERCENT," \x3c/nobr\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e"),this._percentFld.renderHtml(a),
a.push("\x26nbsp;",decimalFormatSymbols.percent),a.push('\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"Label"\x3e\x3cnobr\x3e',MSGS.ECT_HRIS_JI_TOTAL_AMOUNT," \x3c/nobr\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e"),this._totalAmountFld.renderHtml(a),a.push("\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"),a.push('\x3cdiv class\x3d"buttons"\x3e'),a.push(this._buttonsArr),a.push('\x3c/div\x3e\x3cdiv class\x3d"clearAll"\x3e\x26nbsp;\x3c/div\x3e'),a.push("\x3c/div\x3e")):(a.push("\x3cspan\x3e\x26nbsp;"),
this._numberFld.renderHtml(a),a.push("\x26nbsp;",Util.escapeHTML(this._salaryCurrencyCode),"\x26nbsp;\x3c/span\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x3c/span\x3e\x3cspan\x3e"),this._percentFld.renderHtml(a),a.push("\x26nbsp;",Util.escapeHTML(decimalFormatSymbols.percent),"\x3c/span\x3e\x3cspan\x3e"),this._totalAmountFld.renderHtml(a),a.push("\x3c/span\x3e"),this._writable&&(a.push('\x3cdiv id\x3d"',this.id,'"\x3e'),this._sfError.renderHtml(a),a.push("\x3c/div\x3e")))},_buildButton:function(a,b,c,d){b=
new SFCommandButton(b,c,d);b.setSize("sml");b.setActionCommand(a);b.addEventListener(ECTConstants.EVENT_ACTION,this);this._buttonsArr.push(b)},_clickClose:function(){this.dispatch("closeCalcPopup")},handleEvent:function(a){switch(a.type){case "amtOrPercentOrTotalAmountChange":switch(a.target.id){case this._numberFldID:this._calculatePercentAndTotalAmount();break;case this._percentFldID:this._calculateNumberAndTotalAmount();break;case this._totalAmountFldID:this._calculateNumberAndPercent()}this._buttonsArr[1].setEnabled(this._enableApplyBtn&&
!this._hasError);break;case ECTConstants.EVENT_ACTION:switch(a.actionCommand){case ECTAdjCompField.COMMNAD_APPLY:this.dispatch("change");break;case ECTConstants.COMMAND_CANCEL:this.dispatch("closeCalcPopup")}}}})}();function ECTField(a,b){this.register();a&&this.setValue(a);this.init(b)}ECTField.DEFAULT_WAIT_TIME=250;
ECTField.prototype=function(){return set(new ECTAbstractInputField,{init:function(a){a&&(this._writable=0==a.writable?a.writable:!0,this._inputSize=a.inputSize?a.inputSize:20,this._defaultValue=a.defaultValue?a.defaultValue:"",this._inputMaxLength=a.inputMaxLength?a.inputMaxLength:30,this._valueType=a.valueType?a.valueType:"text",this._showErrors=!a.hideErrors)&&(this._err=new HRISError)},setValue:function(a){this._value=a?Util.escapeHTML(a):"";var b=juic.$(this.id);b&&(this._writable?b.value=a:b.innerHtml=
this._value,this._updateWrapperClassName())},getValue:function(){if(this._writable&&juic.$(this.id)){var a=Util.escapeHTML(juic.$(this.id).value);a==this._defaultValue&&(a="");return a=a.trim()}this._value&&(this._value=this._value.trim());return this._value},_change:function(){this.dispatch("change")},_onAmtOrPercentOrTotalAmountChange:function(){var a=this;this._timer&&(clearTimeout(this._timer),delete this._timer);this._timer=setTimeout(function(){a.dispatch("amtOrPercentOrTotalAmountChange")},
ECTField.DEFAULT_WAIT_TIME)},_renderWriteHtml:function(a){a.push('\x3cinput class\x3d"efElement" type\x3d"text" id\x3d"',this.id,'" size\x3d"',this._inputSize,'" ');a.push(' onkeyup\x3d"',this.fireCode("_onAmtOrPercentOrTotalAmountChange"),'" onfocus\x3d"',this.fireCode("_focus"),'" onblur\x3d"',this.fireCode("_blur"),'" value\x3d"',Util.escapeHTML(this._value),'" /\x3e')},renderHtml:function(a){this._writable?(this._drawRoundedCorners(a,"textBox"),this._showErrors&&this._err.renderHtml(a)):a.push('\x3cspan id\x3d"',
this.id,'" class\x3d"',this._readOnlyClass,'"\x3e',Util.escapeHTML(this._value),"\x3c/span\x3e")},_focus:function(){this.setFocus(!0)},_blur:)}();function ECTCalcField(a,b,c){this.register();this._compFlds=this._vFld=null;if(this._config=c)this.label=this._config.label,this._writable=this._config.writable||!0;this.calcShown=!1;this.PopMan=null;this.ignoreEvents=!1;this.init(a,b)}ECTCalcField.FIELD_TYPE_CALC="ectCalcField";ECTCalcField.FIELD_TYPE_AMOUNT="ectAmountPercentField";
ECTCalcField.prototype=function(){return set(new ECTAbstractInputField,{init:function(a,b){this._valObj=a.length?eval("("+a+")"):{};var c={};!ECTUtil.isEmpty(b)&&b.length&&(c=ECTUtil.getConsumableValue(b),"object"!==typeof c&&(c={}));this._oldValue=this._valObj.value;this._oldValueObj=this._valObj;this._ankerNumber=this._toNumber(this._oldValue);if(this._oldValue&&c.value&&(0!=c.value||""!=c.value)){var d=ECTUtil.toDBString(this._oldValue),c=ECTUtil.toDBString(c.value);this._percentChange=((d-c)/
c*100).toFixed(2)}this._vFld=new ECTInputBox("",{maxLength:0<this._config.maxLength?this._config.maxLength:20,writable:this._config.writable,label:this._config?this._config.label:"",required:this._config.required});this._vFld.bindValidators&&this._vFld.bindValidators(this._config);this._setFieldValue(this._oldValue);this._config.type!==ECTCalcField.FIELD_TYPE_CALC||this._config.hideCalcIcon||this._vFld.switchToCalcInput();this._writable&&(this._vFld.addEventListener(ECTConstants.EVENT_CHANGE,this),
this._vFld.addEventListener(ECTConstants.EVENT_ACTION,this),this._vFld.addEventListener(ECTConstants.EVENT_FIELD_FOCUS,this,"dispatchEvent"))},renderHtml:function(a){a.push('\x3cspan id\x3d"',this.id,'" class\x3d"compFieldCalculator"\x3e');this._vFld.renderHtml(a);this._writable&&a.push('\x3cspan id\x3d"',this.id,'_percent"  class\x3d"ectCompFieldPercent"\x3e',Util.escapeHTML(isFinite(this._percentChange)&&"0.00"!=this._percentChange?this._toLocalNumber(this._percentChange)+decimalFormatSymbols.percent:
""),"\x3c/span\x3e");a.push("\x3c/span\x3e")},_showCalc:function(a){assert(this._writable,"must be writable to show");if("undefined"===typeof a||null==a)a=!this.calcShown;if(a){var b=this._toNumber(this.getValue());null==this._compFlds?(this._compFlds=new ECTAdjCompField(this._ankerNumber,null,b-this._ankerNumber,!0,this.label),this._calcCallOut=new ECTRoundedCornerHeader(MSGS.EMPFILE_HRIS_CHANGE_CALCULATOR,this._compFlds,!0),this._calcCallOut.setWidth(400),this._compFlds.isPopup=!0,this._compFlds.addEventListener(ECTConstants.EVENT_CHANGE,
this),this._compFlds.addEventListener("closeCalcPopup",this)):this._compFlds.setValue(b-this._ankerNumber);this.PopMan||(this.PopMan=new ECTPopupManager(this._vFld.id+"_write",this._calcCallOut),this._compFlds.addEventListener("hide",this));this.PopMan.show();SFDOMEvent.addListener(window.document,"mousedown",this._clickHandler,this);SFDOMEvent.addListener(window.document,"touchend",this._clickHandler,this)}else null!=this._compFlds&&this.PopMan.hide(),SFDOMEvent.removeListener(window.document,"mousedown",
this._clickHandler,this),SFDOMEvent.removeListener(window.document,"touchend",this._clickHandler,this);this.calcShown=a},setFocus:function(a){this._vFld.setFocus(a)},_clickHandler:function(a){this.PopMan.isClickOutsideOfMenu(a)&&this._showCalc(!1)},cleanup:function(){this._vFld.unregister();this._writable&&null!=this._compFlds&&(this.PopMan.hide(),this._compFlds.cleanup(),this._compFlds=null);this.unregister()},_setFieldValue:function(a){var b=!1;a&&a.length&&(b=!0);this._vFld.setEnabledCalcIcon(b);
"PERCENTAGE"==this._valObj.type&&(a+=" %");this._vFld.setValue(a)},setValue:function(a,b){var c=a?"string"===typeof a?a:a.defaultValue?a.defaultValue:"":"";this._valObj=c.length?eval("("+c+")"):{};a=this._valObj.value;this._setFieldValue(a)},getValue:function(){value=this._vFld.getValue();"PERCENTAGE"==this._valObj.type&&(value=value.replace(/ \%/g,""));return value},_toLocalNumber:_toNumber:isModified:function(){return!(null===
this._oldValue||this._toNumber(this._oldValue)==this._toNumber(this.getValue()))},reset:function(){this._toNumber(this.getValue())!==this._toNumber(this._oldValue)&&(this._valObj=this._oldValueObj,this._setFieldValue(this._oldValue),this._writable&&(juic.$(this.id+"_percent").innerHTML=""),this._vFld.resetWarningMessage(),this.resetError())},handleEvent:function(a){if(!this.ignoreEvents){this.ignoreEvents=!0;var b=!1;switch(a.type){case "closeCalcPopup":this._showCalc(!1);break;case "change":switch(a.target.id){case this._vFld.id:this.checkForErrors();
(b=this._hasError)?this._vFld.setEnabledCalcIcon(!1):(a=this.getValue(),this._vFld.setEnabledCalcIcon(a.length),a=this._toNumber(a),a-=this._ankerNumber,null!=this._compFlds&&this._compFlds.setValue(a,!0),0<this._ankerNumber&&(this._percentChange=(a/this._ankerNumber*100).toFixed(2),"0.00"!=this._percentChange?juic.$(this.id+"_percent").innerHTML=Util.escapeHTML(this._toLocalNumber(this._percentChange)+decimalFormatSymbols.percent):juic.$(this.id+"_percent").innerHTML=""));break;case this._compFlds.id:this._compFlds.checkForErrors(),
b=this._compFlds._hasError,b||(a=this._compFlds.getValueObj(),a.percent&&0<a.number&&(juic.$(this.id+"_percent").innerHTML=Util.escapeHTML(this._toLocalNumber(a.percent)+decimalFormatSymbols.percent)),this._setFieldValue(this._toLocalNumber(a.number+this._ankerNumber)))}a=this.isModified()?"fieldChange":"fieldUnChange";b||this.dispatch("change",{actionCommand:a});break;case "hide":this.calcShown=!1;break;case "action":"blur"==a.actionCommand?(a=this.isModified()?"fieldChange":"fieldUnChange",this.dispatch("change",
{actionCommand:a})):"clickCalcIcon"==a.actionCommand&&this._vFld.getValue()&&!this._hasError&&this._showCalc()}this.ignoreEvents=!1}},getErrorMsg:function(){return this._vFld.getErrorMsg()},bindSpecificValidators:function(a){ECTValidationMgr.bindValidator(this,"number",{message:sfMessageFormat.format(MSGS.EMPFILE_HRIS_WORKFLOW_EXPECTED_DECIMAL_NUMBER,a.label)})},bindValidators:function(a){this.bindSpecificValidators(a)},resetError:checkForErrors:function(){var a=
ECTValidationMgr.validate(this);if(a&&!a.result)return this._vFld._errorMsg=a.message,this._hasError=this._vFld._hasError=!0,this._vFld.setErrorMsg(this._vFld._errorMsg),!0;this._vFld._errorMsg="";this._hasError=this._vFld._hasError=!1;this._vFld._callOut.hide();this._vFld.setErrorMsg(this._vFld._errorMsg);return this._vFld.checkForErrors()}})}();function ECTCascadeModel(a,b){this.register();this.init(a,b)}
ECTCascadeModel.prototype=function(){return set(new Component,{init:function(a,b){a.cascadeChildren&&a.cascadeChildren.constructor===Array&&a.cascadeChildren.length?(this._model=a.cascadeChildren,this.isCacheAvailable=!0):(this._model=[],this.isCacheAvailable=!1);this.dataLoading=new SFLoading;this.setPropagationPrecedenceMeta({propagationPreferences:a.propagationPreferences,currentPropagationPrecedenceValueData:a.currentPropagationPrecedenceValueData});this._modelData=b?b.childrenData&&0<b.childrenData.length?
b.childrenData:null:null;this._selectedIndex="";this._parentId=a.id;this._elementId=a.elementId;this._controllerName=a.dataSource||ECTConstants.CONTROLLER_CSF_HANDLER;this._dataSource=AjaxService.getMBeanInstance(this._controllerName);this._metaData=a},getPropagationPreferencesMeta:function(){return this._propagationPreferencesMeta},resetPropagationPrecedenceValue:function(){this._propagationPreferencesMeta.propagationPreferences&&ECTReadWriteForm.prototype.clonePrecedenceValuesFormMeta.call(this,
this._propagationPreferencesMeta)},setPropagationPrecedenceMeta:function(a){this._propagationPreferencesMeta=a},cacheAvailable:function(){return this.isCacheAvailable},setDataSource:function(a){this._dataSource=a},_getChildData:function(){return this._modelData?this._modelData[this._selectedIndex]:this._model[this._selectedIndex]&&this._model[this._selectedIndex].fieldsData},_getChildHideCountryFlag:function(){return this._model[this._selectedIndex]&&this._model[this._selectedIndex].hideCountryFlag},
getChildInfo:function(a,b,c,d){var e=this._getChildMeta(a);e&&e.length?(a=this._getChildData(),this.isCacheAvailable=!0,this.dispatch("action",{actionCommand:"childInfoAvailable",hideCountryFlag:this._getChildHideCountryFlag(),info:{meta:e,data:a,propagationPreferencesMeta:this._propagationPreferencesMeta,parentFocus:!1}})):this.cacheAvailable()&&d||!b?this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:"childInfoNull"}):(SFOverlayMgr.showOverlay(this.dataLoading,!0),this._model.push({cascadeParentValue:a}),
this._fetchChildInfoFromServer(a,b,c))},isExisting:function(a){for(var b=0,c=this._model.length;b<c;b++)if(a==this._model[b].cascadeParentValue)return!0;return!1},_getChildIndex:function(a){for(var b=0,c=this._model.length;b<c;b++)if(a==this._model[b].cascadeParentValue)return b;return""},_getChildMeta:function(a){this._selectedIndex=this._getChildIndex(a);return""!==this._selectedIndex?this._model[this._selectedIndex].fieldsMeta:[]},_cacheServerResponse:function(a,b){if(b){var c=this._getChildIndex(a);
this._model[c].fieldsMeta=b.fieldsMeta;this._model[c].fieldsData=b.fieldsData;this._model[c].hideCountryFlag=b.hideCountryFlag}},_fetchChildInfoFromServer:function(a,b,c){var d={me:this,selectedId:a,callback:function(a){a?(d.me._cacheServerResponse(d.selectedId,a),d.me.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:"childInfoAvailable",hideCountryFlag:a.hideCountryFlag,info:{meta:a.fieldsMeta,data:a.fieldsData,propagationPreferences:a.propagationPreferences}})):d.me.dispatch(ECTConstants.EVENT_ACTION,
{actionCommand:"childInfoNull"});d.me.dataLoading.hide()}};if(this._controllerName===ECTConstants.CONTROLLER_CSF_HANDLER)this._dataSource.getCountrySpecificData(b,a,window.isFromWorkflowPage?"":window.selectedUserID,d);else{b=!1;for(var e in c)if(c[e]){b=!0;break}b?this._dataSource.getCascadedFieldsData(this._elementId,this._parentId,a,c,window.selectedUserID,d):this.dataLoading.hide()}}})}();function ECTCascadeField(a,b){this.register();this.init(a,b)}
ECTCascadeField.prototype=function(){return set(new Component,{init:function(a,b){this._fieldsMeta=set({},b);this._elementId=this._fieldsMeta.elementId;this._fieldsMeta.type=b.fieldType;this._fieldsData=a;this._isModified=!1;this._contextualSearchFields={};this._readOnly=b.readOnly;this._hasMultiple=b.hasMultiple;this._cascadeChildren={};this._newCascadeChildren={};this._err=new ECTInlineError;this._sendDeleted=b.sendDeleted;this._model=new ECTCascadeModel(this._fieldsMeta,this._fieldsData);this._createFields()},
_createFields:function(){var a=window.ECTPermissionState&&"undefined"!=typeof window.ECTPermissionState.getPermission("DeleteItem")?window.ECTPermissionState.getPermission("DeleteItem"):!0;if(this._hasMultiple){if(this._fieldsMeta.cascadeChildren)for(var b=0,c=this._fieldsMeta.cascadeChildren.length;b<c;b++){var d=this._fieldsMeta.cascadeChildren[b],e={};e.defaultValue=d.cascadeParentValue;e.value=d.parentValue;e.hideCountryFlag=d.hideCountryFlag;this._createAndAddCascadeField(e,a)}}else this._createAndAddCascadeField(this._fieldsData,
a)},_createAndAddCascadeField:function(a,b){var c=new ECTCascadeFieldItem(this._fieldsMeta,a,this._model,b);c.addEventListener(ECTConstants.EVENT_CHANGE,this);c.addEventListener(ECTConstants.EVENT_ACTION,this);var d=!1,e=c.id,f;for(f in this._cascadeChildren)if(this._cascadeChildren[f].getParentValue()===a.defaultValue){this._cascadeChildren[f]=c;e=f;d=!0;break}d||(this._cascadeChildren[c.id]=c);juic.$(this.id)&&(d=document.createElement("div"),d.id=c.id+"_cascadeItemContainer",d.className="cascadeItemContainer",
juic.$(this.id+"_cascadeFields").appendChild(d),f=juic.createRenderContext(),this._cascadeChildren[e].renderHtml(f),d.innerHTML=f.join(""));return c},_handleChildInfoResponse:function(a){var b=juic.$(a.cascadeFieldItemId+"_cascadeItemContainer"),c=this._newCascadeChildren[a.cascadeFieldItemId];a.childInfoNull&&b&&c&&(c.deleteItem(),c.cleanup(),delete this._newCascadeChildren[a.cascadeFieldItemId],delete this._cascadeChildren[a.cascadeFieldItemId],b.parentNode.removeChild(b),this._errorDialog||(this._errorDialog=
new ECTResponseDialog("error",MSGS.EMPFILE_HRIS_NO_DATA_FOR_THIS_COUNTRY,MSGS.COMMON_Err)),this._errorDialog.show(null,this.id+"_addAnother"))},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"',(this._hasMultiple?"hasMultiple":"singleCascade")+(this._readOnly?" cascadeReadOnly":""),'" \x3e');!this._readOnly&&this._hasMultiple&&(a.push('\x3cdiv class\x3d"cascadeHeader"\x3e'),a.push('\x3cdiv class\x3d"cascadeTitle globalFloatRight"\x3e'),a.push('\x3ca role\x3d"button" id\x3d"',
this.id,'_addAnother" class\x3d"actionLink ectAddIcon" href\x3d"javascript:void(0)" onclick\x3d"',this.fireCode("_addAnother",!0),'return false;"\x3e',MSGS.get("ECT_HRIS_ASSIGNMENT_ACTION_ADD",this._fieldsMeta.label?Util.escapeHTML(this._fieldsMeta.label):""),"\x3c/a\x3e"),a.push("\x3c/div\x3e"),a.push('\x3cdiv class\x3d"clearAll"\x3e\x3c/div\x3e'),a.push("\x3c/div\x3e"));this._readOnly||(a.push('\x3cdiv id\x3d"err"\x3e'),this._err.renderHtml(a),a.push("\x3c/div\x3e"));a.push('\x3cdiv id\x3d"',this.id,
'_cascadeFields" class\x3d"cascadeFieldsCollection"\x3e');var b=!0,c;for(c in this._cascadeChildren)a.push('\x3cdiv id\x3d"',c,'_cascadeItemContainer" class\x3d"',b&&this._readOnly?"firstCascadeItemContainer":"cascadeItemContainer",'"\x3e'),this._cascadeChildren[c].renderHtml(a),a.push("\x3c/div\x3e"),b=!1;a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")},handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_CHANGE:a.isChildFormChange&&this._handleChildInfoResponse(a);this.setErrorMsg();if(this._fieldsMeta.id===
a.id){var b=a.target.isParentFieldModified();b&&(a.target._fetchChildForm(a.target.getParentValue(),this._elementId,!1),this.dispatch(ECTConstants.EVENT_FIELDS_CHANGE));this.dispatch(ECTConstants.EVENT_CHANGE,set(a,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE,isCascadeParent:!0,noServerCallRequired:!b}))}else this.dispatch(ECTConstants.EVENT_CHANGE,set(a,{actionCommand:this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE,isChildFormChange:a.isChildFormChange}));break;
case ECTConstants.EVENT_ACTION:switch(a.actionCommand){case ECTConstants.EVENT_CONFIRM_COUNTRY_SELECT:this._addCascadeField()&&this._countryDialog.close();break;case ECTConstants.EVENT_GET_CONTEXTUAL_SEARCH_FIELDS:this.dispatchEvent(a);break;case "removeItem":this._removeItem(a.itemId)}}},_addAnother:function(){this.setErrorMsg();this._countryField&&(this._countryField.cleanup(),this._countryDialog.cleanup());this._countryField=new ECTModalSelectionDialog(new ECTPicklistAutoComplete("",{selectOptions:this._fieldsMeta.selectOptions,
metaId:this._fieldsMeta.id,label:MSGS.EMPFILE_LABEL_COUNTRY_SELECTION}),MSGS.EMPFILE_LABEL_COUNTRY_SELECTION);this._countryDialog=new ECTDialogBox(MSGS.COMMON_Add+" "+this._fieldsMeta.label,this._countryField,[{label:MSGS.COMMON_Cancel,eventName:ECTConstants.EVENT_HIDE_COUNTRY_SELECT,active:!1},{label:MSGS.COMMON_Confirm,eventName:ECTConstants.EVENT_CONFIRM_COUNTRY_SELECT,active:!0}],400);this._countryDialog.addEventListener(ECTConstants.EVENT_ACTION,this);this._countryDialog.showDialog(!1,this.id+
"_addAnother")},_addCascadeField:function(){var a=!1,b=this._countryField.getValue();if(""===b||this._isExisting(b))""==b?this._countryField.setErrorMsg(sfMessageFormat.format(MSGS.EMPFILE_HRIS_ERROR_BLANK_RQD_FIELD,MSGS.EMPFILE_LABEL_ADD_COUNTRY)):this._countryField.setErrorMsg(MSGS.EMPFILE_REPEAT_COUNTRY_SELECTION_ERROR);else{var a=!0,c=this._createAndAddCascadeField({defaultValue:b,value:null},!0);this._newCascadeChildren[c.id]=c;this._isModified=!0;this.dispatch(ECTConstants.EVENT_CHANGE);this._model.cacheAvailable()||
c._fetchChildForm(b,this._elementId,!1)}return a},_removeItem:function(a){juic.$(a+"_cascadeItemContainer").style.display="none";this._cascadeChildren[a].deleteItem();(!this._sendDeleted||this._cascadeChildren[a]&&!this._cascadeChildren[a]._rowId)&&delete this._cascadeChildren[a];this._isModified=!0;this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE})},_isExisting:function(a){for(var b in this._cascadeChildren)if(this._cascadeChildren[b].getParentValue()===a&&this._cascadeChildren[b].isActive())return!0;
return!1},reset:function(){this.setErrorMsg();for(var a in this._newCascadeChildren)this._newCascadeChildren[a].cleanup(),delete this._cascadeChildren[a],juic.$(this.id+"_cascadeFields").removeChild(juic.$(a+"_cascadeItemContainer"));this._newCascadeChildren={};for(a in this._cascadeChildren)juic.$(a+"_cascadeItemContainer")&&(juic.$(a+"_cascadeItemContainer").style.display="block"),this._cascadeChildren[a].reset()},isModified:function(){if(this._isModified)return!0;for(var a in this._cascadeChildren)if(this._cascadeChildren[a].isActive()&&
this._cascadeChildren[a].isModified())return!0;return!1},cleanup:function(){for(var a in this._cascadeChildren)this._cascadeChildren[a].cleanup();this._err.cleanup();this._countryField&&(this._countryField.cleanup(),this._countryDialog.cleanup());this._errorDialog&&this._errorDialog.cleanup();this.unregister()},validateFields:function(){var a={errorMsg:[]},b=!0,c;for(c in this._cascadeChildren)if(this._cascadeChildren[c].isActive()){var d=this._cascadeChildren[c].validateFields();d.returnFlag||(a.errorMsg=
a.errorMsg.concat(d.errorMsg));b=d.returnFlag?b:!1}a.returnFlag=b;return a},setErrorMsg:function(a){a?this._err.setValue(a):this._err.setValue("")},getValue:function(){if(this._hasMultiple){var a={};a.hasMultiple=this._hasMultiple;a.rowData=[];for(var b in this._cascadeChildren)this._cascadeChildren[b].isActive()?a.rowData.push({rowId:this._cascadeChildren[b].getRowId(),rowValue:this._cascadeChildren[b].getValue()}):this._sendDeleted&&a.rowData.push({rowId:this._cascadeChildren[b].getRowId(),isDeleted:!0,
rowValue:this._cascadeChildren[b].getValue()});return a}for(b in this._cascadeChildren)return this._cascadeChildren[b].getValue()},_formFieldsDataWithDataAvailable:function(){var a={},b=this.getFieldByMetaId(this.metaId);b&&(a.value=b.getValue(),a.id=this.metaId,a.modified=!0);a.childrenData=[];if(b=this.metaDataObj.cascadeChildren)for(var c=0,d=b.length;c<d;c++)for(var e=b[c],f=0,g=e.fieldsMeta.length;f<g;f++){var k=e.fieldsMeta[f],l=[],m=this.getFieldByMetaId(k.id),n="";m&&(n=m.getValueObj?JSON.stringify(m.getValueObj()):
m.getValue());l.push({fields:[{id:k.id,modified:!0,value:n}]});a.childrenData.push(l)}return a},getValueObj:function(){var a=this._fieldsData;if(!a)return a=this._formFieldsDataWithDataAvailable();var a=set({},a),b=this.getFieldByMetaId(a.id);b&&(a.defaultValue=b.getValue());a.childrenData=a.childrenData||[];for(var b=0,c=a.childrenData.length;b<c;b++)for(var d=a.childrenData[b],e=0,f=d.length;e<f;e++)for(var g=d[e].fields,k=0,l=g.length;k<l;k++){var m=g[k],n=this.getFieldByMetaId(m.id);if(n)if(n.getValueObj){var p=
set({},n.getValueObj());m.defaultValue=n instanceof ECTComboBox?p:JSON.stringify(p)}else n=n.getValue(),n="string"===typeof n?n:JSON.stringify(n),m.defaultValue=n}return a},getFields:function(a){var b,c;for(c in this._cascadeChildren){var d=this._cascadeChildren[c],e=d.getFields();b=[];b.push(e[this._fieldsMeta.id]);for(var f=d.getChildMeta(),g=0,k=f?f.length:0;g<k;g++)b.push(e[f[g].id]);if(!f||!f.length)for(c in e)c!=this._fieldsMeta.id&&b.push(e[c]);if(a&&a>b.length)for(g=0,k=a-b.length;g<k;g++)a=
new ECTFieldPlusOldValue({},{type:ECTHiddenField.FIELD_TYPE,writable:!1}),b.push(a),d.addField(a.field.id,a);break}return b},getFieldByMetaId:function(a,b){var c=set({},b);c.multiple=!1;return this._getFieldsByMetaId(a,c)},getFieldListByMetaId:function(a,b){var c=set({},b);c.multiple=!0;return this._getFieldsByMetaId(a,c)},_getFieldsByMetaId:function(a,b){b=b||{};var c=[],d,e;for(e in this._cascadeChildren)if(d=this._cascadeChildren[e].getFieldByMetaId(a,b)){if(!b.multiple)return d;c.push(d)}return c&&
0<c.length&&c},updateFieldStatus:function(a,b,c){for(var d in this._cascadeChildren){var e=this._cascadeChildren[d],f=e.getFields(),g=f[a];if(g){a=e.getLabelForField(g);ECTUtil.updateFieldStatus(g,b,e,c,a);this._cascadeFieldItemsToBeRepainted||(this._cascadeFieldItemsToBeRepainted=[]);-1===this._cascadeFieldItemsToBeRepainted.indexOf(d)&&this._cascadeFieldItemsToBeRepainted.push(d);break}else for(d in f)g=f[d],e=g.field,e.getFieldByMetaId&&e.getFieldByMetaId(a)&&e.updateFieldStatus(a,b,c)}if(c.isLastField&&
this._cascadeFieldItemsToBeRepainted){b=0;for(c=this._cascadeFieldItemsToBeRepainted.length;b<c;b++)d=this._cascadeFieldItemsToBeRepainted[b],this._cascadeChildren[d]&&this._cascadeChildren[d].repaint();delete this._cascadeFieldItemsToBeRepainted}},refreshChildrenOptionsIfParentPicklist:function(a){for(var b=this.getFields(),c=0,d=b.length;c<d;c++){var e=b[c];e.field instanceof ECTReadWriteForm&&e.field.getFieldFromFieldMap(a)&&e.field.refreshChildrenOptionsIfParentPicklist(a)}}})}();
function ECTCascadeFieldItem(a,b,c,d){this.register();this.init(a,b,c,d)}
ECTCascadeFieldItem.prototype=function(){return set(new Component,{_classNamesMap:{"false":"cascadeItem expanded","true":"cascadeItem collapsed"},init:function(a,b,c,d){this._fieldsMeta=a;this._elementId=this._fieldsMeta.elementId;this._fieldsData=b;this._isModified=!1;this._hasDeleteOption=d;this._hideCountryFlag=!0;this._contextualSearchFields={};this._fieldsMeta.searchOptions&&set(this._contextualSearchFields,this._fieldsMeta.searchOptions.defaultSearchValues);this._readOnly=a.readOnly;this._collapsibleHtml=
(this._collapsible=!!a.collapsible)?'onclick\x3d"'+this.fireCode("_parentClicked")+'" ':"";this._isActive=!0;this._hasMultiple=a.hasMultiple;this.setFormLayout();this._fields={};this._parentField=this._createParentField(this._fieldsMeta,this._fieldsData);this._model=c;this._model.cacheAvailable()&&this._fetchChildForm(this._parentField.getValue(),this._elementId,!0)},setFormLayout:function(){this._layout=this._createLayout(this._fieldsMeta.isFlowLayout);this._labelType=this._fieldsMeta.isFlowLayout?
ECTConstants.LABEL_DGRID:ECTConstants.LABEL_PROFILE_UPDATE},_createLayout:_createParentField:function(a,b){var c=juic.set({},a);c.dataSource=null;var c=new ECTFieldPlusOldValue(b,c),d=ECTUtil.createLabel(a.labelType||this._labelType,a.label,this._readOnly?!1:a.isRequired||a.required,null);c.addEventListener(ECTConstants.EVENT_CHANGE,this);c.addEventListener(ECTConstants.EVENT_ACTION,this);this._hasMultiple?this._readOnly||c.field.setWritable(!1):
this._layout.addField(d,c);return this._fields[a.id]=c},_fetchChildForm:function(a,b,c){this._fieldsMeta.contextualSearchFields&&this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_GET_CONTEXTUAL_SEARCH_FIELDS,fields:this._fieldsMeta.contextualSearchFields,searchElement:this});var d=!1;this._model.isExisting(a)||(d=!0);this._model.addEventListener(ECTConstants.EVENT_ACTION,this);d?this._model.getChildInfo(a,b,this._contextualSearchFields,!1):this._model.getChildInfo(a,b,this._contextualSearchFields,
c)},setParentFocus:function(a){this._parentField.setFocus(a)},_createChildForm:function(a){var b,c;if(this._resetMetaPlusData(a.meta,a.data)){b=a.propagationPreferences;var d=this._model.getPropagationPreferencesMeta();ECTUtil.isEmpty(b)||this._model.setPropagationPrecedenceMeta({propagationPreferences:a.propagationPreferences,currentPropagationPrecedenceValueData:d.currentPropagationPrecedenceValueData});this._model.resetPropagationPrecedenceValue();if(a.data&&a.data[0]){var e=a.data[0].fields;this._rowId=
a.data[0].id}else e=[];for(var f=new ECTCascadePicklistManager(a.meta),g=f.prepareData(e),k=0,l=a.meta,m=l.length;k<m;k++){var n=l[k];(!this._readOnly&&n.type===ECTConstants.TYPE_FOUNDATION_AUTOCOMPLETE||ECTConstants.COMPLEX_FIELDS[n.type])&&d&&(n=set(n,{propagationPreferences:d.propagationPreferences,currentPropagationPrecedenceValueData:d.currentPropagationPrecedenceValueData}));this._parentField.meta.fixWidthOnLoad&&(n.fixWidthOnLoad=!0);var p=new ECTFieldPlusOldValue(e[k],n);g.length||f.registerPicklist(p,
n,e[k]);ECTConstants.HIDE_LABEL_BY_TYPES[n.type]?(b=null,c={mergeCells:!0,hideSpacer:!0}):(b=ECTUtil.createLabel(n.labelType||this._labelType,n.label,this._readOnly?!1:n.required,null),c=null);this._layout.addField(b,p,c);this._fields[n.id]=p;this._readOnly||(p.addEventListener(ECTConstants.EVENT_CHANGE,this),(n.type===ECTConstants.TYPE_FOUNDATION_AUTOCOMPLETE||n.type===ECTPicklistAutoComplete.FIELD_TYPE||ECTConstants.COMPLEX_FIELDS[n.type])&&p.addEventListener(ECTConstants.EVENT_ACTION,this))}this._layout.repaint();
this.setParentFocus(a&&"undefined"!==typeof a.parentFocus?a.parentFocus:!0)}},_resetMetaPlusData:function(a,b){this._cleanChildItems();this._childMeta=a||[];this._childData=b||[];return a&&0!=a.length?!0:!1},getChildMeta:function(){return this._childMeta},handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_CHANGE:this._fieldsMeta.id==a.target.meta.id&&(this._parentFieldValue?(this._parentFieldModified=this._parentFieldValue!=this._parentField.getValue(),this._parentFieldValue=this._parentField.getValue()):
(this._parentFieldValue=this._parentField.getValue(),this._parentFieldModified=this._parentField.isModified()));this.dispatch(ECTConstants.EVENT_CHANGE,set(a,{actionCommand:this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE,id:a.target.meta.id,cascadeChildItem:this}));break;case ECTConstants.EVENT_ACTION:switch(a.actionCommand){case "childInfoAvailable":"globalInfo"==this._elementId&&this._setCountryFlagVisibility(a.hideCountryFlag);this._createChildForm(a.info);this._model.removeEventListener(ECTConstants.EVENT_ACTION,
this);this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE,isChildFormChange:!0,serverResponseAvailable:!0,cascadeFieldItemId:this.id});break;case "childInfoNull":this._resetMetaPlusData([],[]);this._model.removeEventListener(ECTConstants.EVENT_ACTION,this);this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE,isChildFormChange:!0,serverResponseAvailable:!0,cascadeFieldItemId:this.id,childInfoNull:!0});break;case ECTConstants.EVENT_GET_CONTEXTUAL_SEARCH_FIELDS:for(var b=
a.searchElement||a.target,c={},d=0,e=a.fields.length;d<e;d++)for(var f=0,g=this._fields.length;f<g;f++)a.fields[d]===this._fields[f].meta.id&&(c[a.fields[d]]=this._fields[f].getValue());b.setContextualSearchInfo(c);this.dispatchEvent(a)}}},_parentClicked:function(){var a=juic.$(this.id);this._collapsed=!this._collapsed;a.className=this._classNamesMap[this._collapsed]},_removeItem:function(a){this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:"removeItem",itemId:a})},_setCountryFlagVisibility:function(a){this._hideCountryFlag=
void 0!=a&&a?!0:!1;juic.$("countryFlag_"+this.id)&&(this._hideCountryFlag?juic.$("countryFlag_"+this.id).style.display="none":juic.$("countryFlag_"+this.id).style.display="inline")},renderHtml:function(a){a.push("\x3cdiv id\x3d'",this.id,"' class\x3d'",this._collapsible?this._classNamesMap[!1]:"cascadeItem"," ' \x3e");this._hasMultiple&&(a.push("\x3cdiv  class\x3d'cascadeParentField' ",this._collapsibleHtml," \x3e "),this._collapsible&&a.push("\x3cspan class\x3d'arrowIcon' \x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e"),
this._hideCountryFlag?a.push("\x3cspan class\x3d'countryflag alpha3_",this._fieldsData.defaultValue,"' id\x3d'countryFlag_",this.id,"' style\x3d'display:none;' \x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e"):a.push("\x3cspan class\x3d'countryflag alpha3_",this._fieldsData.defaultValue,"' id\x3d'countryFlag_",this.id,"' \x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e"),a.push("\x3cdiv class\x3d'display_inline_block'\x3e"),this._parentField.renderHtml(a),
a.push("\x3c/div\x3e"),this._hasDeleteOption&&a.push('\x3ca href\x3d"javascript:void(0);" class\x3d"actionLink ectDeleteIcon" onclick\x3d"',this.fireCode("_removeItem",this.id),"return false;",'" title\x3d"',MSGS.COMMON_Delete,'"\x3e',MSGS.COMMON_Delete,"\x3c/a\x3e"),a.push("\x3c/div\x3e\x3cdiv class\x3d'clear'\x3e\x3c/div\x3e"));a.push("\x3cdiv class\x3d'cascadeChildren' \x3e");this._layout.renderHtml(a);a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")},getValue:function(){var a=[],b;for(b in this._fields){var c=
{};c.id=b;c.value=this._fields[b].getValue();c.group=this._fields[b].meta.group||this._fieldsMeta.group;c.type=this._fields[b].meta.type;a.push(c)}return a},isModified:function(){for(var a in this._fields)if(this._fields[a].isModified&&this._fields[a].isModified())return!0;return!1},setContextualSearchInfo:cleanup:function(){for(var a in this._fields)ECTValidationMgr.unbindValidator(this._fields[a].field),this._fields[a].cleanup();this.unregister()},
getParentValue:function(){return this._parentField.getValue()},isParentFieldModified:function(){return this._parentFieldModified},getRowId:function(){return this._rowId},reset:function(){for(var a in this._fields)a!==this._fieldsMeta.id&&this._fields[a].reset();this.setActive();this._parentField.reset()},_cleanChildItems:function(){var a=!1,b;for(b in this._fields)b!==this._fieldsMeta.id&&(ECTValidationMgr.unbindValidator(this._fields[b].field),this._fields[b].cleanup(),this._layout.removeField(this._fields[b]),
delete this._fields[b],a=!0);a&&this.setParentFocus(!1)},deleteItem:function(){this._isActive=!1},isActive:function(){return this._isActive},setActive:function(){this._isActive=!0},getFields:function(){return this._fields},addField:function(a,b){this._fields[a]=b},validateFields:function(){var a={errorMsg:[]},b=!0,c;for(c in this._fields){var d=this._fields[c].field;d.validateFields?(d=d.validateFields(),d.returnFlag||(a.errorMsg=a.errorMsg.concat(d.errorMsg),b=!1)):d.checkForErrors&&d.checkForErrors()&&
(a.errorMsg.push(d.getErrorMsg()),b=!1)}a.returnFlag=b;return a},getFieldByMetaId:function(a,b){var c=set({},b);c.multiple=!1;var d=null,e;for(e in this._fields)if(d=ECTUtil.searchForFieldsByMetaId(this._fields[e],a,c))break;return d},setFieldVisible:function(a,b,c){a=this.getFieldByMetaId(a,c);this._layout.setFieldVisible(a,b,c)},getLabelForField:function(a){for(var b=this._layout.getFields(),c=0,d=b.length;c<d;++c){var e=b[c];if(e.compRef&&e.compRef.field.metaId===a.field.metaId)return b[c].label}},
repaint:function(){this._layout.repaint()}})}();function ECTComboBox(a,b,c){this.register();this._init(a,b,c)}
(function(){var a={OFFSETNOTYPEAHEAD:{vertical:5,horizontal:-5},OFFSETNOTYPEAHEADRTL:{vertical:5,horizontal:5},OFFSETS:{vertical:5,horizontal:-18},OFFSETSRTL:{vertical:5,horizontal:18}};SFDOMEvent.ready(function(){Util.isFioriFDEnabled()&&(a.OFFSETS={vertical:1,horizontal:0},a.OFFSETSRTL={vertical:1,horizontal:18})});extend(ECTComboBox,ECTAbstractInputField,{noTypeAhead:!1,_init:function(a,b,c){this._minimumFilterSize=c&&c.minSearchKeyLength||2;this._enabled=!(c&&c.disabled);this._forceSelection=
c&&null!=c.forceSelection?c.forceSelection:!0;this._title=c&&c.title;this._allowEmpty=c&&c.allowEmpty;this._autoHeight=c&&c.autoHeight;this._autoWidth=c&&c.autoWidth;this._fixWidthOnLoad=c&&c.fixWidthOnLoad;this.setWritable(c&&c.writable);"string"==typeof this._writable&&(this._writeOnly="writeonly"==this._writable?!0:!1,this._writable=!0);null==this._allowEmpty&&(this._allowEmpty=!0);this._fixedWidth=c&&c.fixedWidth;this._itemProvider=this._createItemProvider(b);this._listSelect=this._createListSelect(this._itemProvider,
{pageSize:this._itemProvider instanceof SFArrayItemProvider?b.length:c&&c.pageSize||7,itemClass:"globalMenuItem",itemFocusClass:"globalMenuItemFocus",width:this._autoWidth?"auto":null,focusIndex:-1,visionClasses:AccessibilityPrefs.isLowVisionEnabled()?" globalMenu globalContainerHoverSansFocus ":""});this._listSelect.addEventListener("itemsAvailable",this,"_onItemsAvailable");this._listSelect.addEventListener("itemsError",this,"_onItemsError");this._listSelect.addEventListener("itemSelected",this,
"_onItemSelected");this._selectedItem=this._itemProvider.toItem(a);this._oldValue=this.getValue();this._selectedItem&&this._listSelect.setFocusItem(this._selectedItem);this._fontColor=this._sameValueColor;this._inlineInfo=new ECTInlineInfo;this._maxInputCharacters=c.maxInputCharacters||30;this._label=c.label?c.label:"";this._isRequired=c&&c.required;this.disableLiveSearch=c&&c.disableLiveSearch;a={direction:"bottom",size:6,cssClass:this.generateFDClasses("input-group__button")};this.dropDownPointer=
new SFTriangle(a);this.isFioriFDEnabled=Util.isFioriFDEnabled()},_createItemProvider:function(a){if(a instanceof SFAbstractItemProvider)return a;if(a instanceof Array)return new SFArrayItemProvider(a)},_createListSelect:function(a,b){return new ECTComboListSelect(a,b)},enableTypeAhead:function(a){this.noTypeAhead=!a;this._componentType="comboBox"+(this.noTypeAhead?" noSearchIcon":"")+(this._writeOnly?" writeOnly":"");var b;juic.$(this.getReferenceId());if(b=juic.$(this.id+"_fieldFocusMark"))SFDom[a?
"removeClass":"addClass"](b,"noSearchIcon")},renderHtml:function(a){this._writable&&this._drawRoundedCorners(a,"comboBox"+(this.noTypeAhead?" noSearchIcon":"")+(this._writeOnly?" writeOnly":""));this._inlineInfo.renderHtml(a);this._writeOnly||a.push('\x3cspan id\x3d"',this.id,'_read" class\x3d "',this._readOnlyClass,'"\x3e',ECTUtil.readonlyValueSwitch(ECTUtil.dimExternalCode(this.getInputText()),!0),"\x3c/span\x3e")},setInfoMsg:
_getWrapperClassName:function(){var a=this._super();this._enabled||(a[1]+=" fieldDisabled");this._selectedItem||!this._title||this.isFocus()||(a[0]+=" placeholderValue");this._loading&&(a[0]+=" fieldLoading");return a},_renderWriteHtml:function(a){this._stopBlur=this._focusFlag=!1;a.push('\x3clabel class\x3d"hiddenAriaContent" id\x3d"',this.getReferenceId(),'_description"\x3e',this.noTypeAhead?MSGS.ECT_COMBOBOX_NOTYPEAHEAD_LABEL:MSGS.ECT_COMBOBOX_LABEL,"\x3c/label\x3e");a.push('\x3cinput role\x3d"combobox"',
this._isRequired&&!0===this._isRequired?' aria-required\x3d"'+this._isRequired+'"':"",' aria-autocomplete\x3d"list" aria-describedby\x3d"',this.getReferenceId(),'_description" aria-owns\x3d"',this._listSelect.getDomId(),'" id\x3d"',this.getReferenceId(),'" aria-expanded\x3d"false" autocomplete\x3d"off" aria-label\x3d"',Util.escapeHTML(this._label),'" aria-activedescendant\x3d"" ',this.isFioriFDEnabled?"":'style\x3d"width:'+(this._fixWidthOnLoad?"100px":this._getInputWidth())+'"',' value\x3d"',escapeHTML(this.getMaxInputText()),
'" onblur\x3d"',this.fireCode("setFocus",!1),'" onfocus\x3d"',this.fireCode("setFocus",!0),'" onkeydown\x3d"',this.fireCode("_keyDown"),'" onkeyup\x3d"',this.fireCode("_keyUp"),'" onmousedown\x3d"',this.fireCode("preventBlur"),'" class\x3d"formElement ',this.generateFDClasses("input")," ",this.generateFDClasses("input-group__input"),this._enabled?"":'" disabled\x3d"disabled','" title\x3d"',escapeHTML(this.getTitleAttribute()),'" /\x3e\x3cspan role\x3d"status" class\x3d"hiddenAriaContent" aria-live\x3d"polite"\x3e\x3c/span\x3e\x3cspan id\x3d"',
this.getReferenceId(),'_toggle" class\x3d"toggle ',this.generateFDClasses("input-group__addon",["button"]),'" onclick\x3d"'+this.fireCode("_clickToggle"),'" onmousedown\x3d"',this.fireCode("preventBlur"),'"\x3e',this.isFioriFDEnabled?this.dropDownPointer:"\x26nbsp;","\x3c/span\x3e")},getWriteFieldReferenceId:function(){return this.getReferenceId()},clearValue:function(){this.setValue({id:"",primaryDisplayText:""});this.dispatch("itemSelected",{value:this._selectedItem})},setEnabled:function(a){this._enabled=
a;this._callupdateClassNameFilterMultiple();if(a=juic.$(this.getReferenceId()))a.disabled=!this._enabled},getDisplayText:function(){return this._itemProvider.getLabel(this._selectedItem)},getValue:getValueObject:function(){return this._selectedItem},getValueObj:function(){return this.getValueObject()},setValue:function(a){this._selectedItem=this._itemProvider.toItem(a||"");var b=this;setTimeout(function(){b._valueChanged()},0)},getItemProvider:function(){return this._itemProvider},
setItemProvider:setPageSize:function(a){this._listSelect.setPageSize(a)},_callupdateClassNameFilterMultiple:function(){this._updateClassNameFilter&&(clearTimeout(this._updateClassNameFilter),delete this._updateClassNameFilter);var a=this;this._updateClassNameFilter=setTimeout(function(){a._updateWrapperClassName()},200)},setFocus:function(a){0==arguments.length&&(a=!0);if(this._writable&&this.isEnabled()&&!!a!=!!this._focusFlag)if(this.setOrRemoveFocus(a),
a)this._focusFlag=a,this._callupdateClassNameFilterMultiple(),this._clearTitle(),this._focusChanged(),this._focusInput();else if(this._stopBlur)clearTimeout(this._inputFocus),delete this._inputFocus,this._restoreCaret();else{clearTimeout(this._inputFocus);delete this._inputFocus;var b=this;clearTimeout(this._timeoutID);this._timeoutID=setTimeout(function(){b._handleBlur()},0)}this.dispatch(ECTConstants.EVENT_FIELD_FOCUS,{focusState:a})},isModified:
_handleBlur:function(){clearTimeout(this._timeoutID);this._timeoutID=null;this._updateInputWidth();this._commitValue();this._focusChanged();var a=this;setTimeout(function(){a._valueChanged();a._focusFlag=!1;a.dispatch("externalBlur")},0)},setTitle:getTitle:function(){return this._title},setLoading:isLoading:function(){return this._loading},_onItemsError:function(a){this.setLoading(!1);
alert(a.message)},_onItemSelected:function(a){this._hidePopup();a=a.item&&a.item.id;var b=this._listSelect._pageStatus||[];juic.$(this.getReferenceId());this._itemInPage=null;if(b)for(var c=0,d=b.length;c<d;c++)if(b[c]){for(var k=b[c].items,l=!1,m=0,n=k.length;m<n;m++)if(a==k[m].id){l=!0;break}if(l){this._itemInPage=c;break}}this._stopBlur=!1;this._itemSelected=!0;this._commitValue();this.dispatch("itemSelected",{value:this._selectedItem});var p=this;setTimeout(function(){p._updateTitleAttribute()},
0)},_valueChanged:function(){if(this._writable){var a=juic.$(this.getReferenceId());if(a){a.value=this.getMaxInputText();SFDom.isDisplayed(a)&&this._callupdateClassNameFilterMultiple();var b=this._fixWidthOnLoad?"100px":this._getInputWidth();this._availableWidth&&b&&(b=parseInt(b)>this._availableWidth?this._availableWidth+"px":b);if(b){var c=juic.$(this.getReferenceId()+"_toggle");SFDom.removeClass(c,"toggle");a.style.width=this.isFioriFDEnabled?"auto":b;SFDom.addClass(c,"toggle")}var g=this;setTimeout(function(){g._updateTitleAttribute()},
0)}}else if(a=juic.$(this.id+"_read"))a.innerHTML=ECTUtil.readonlyValueSwitch(ECTUtil.dimExternalCode(this.getInputText()),!0)},_updateTitleAttribute:function(){var a=juic.$(this.getReferenceId());if(a){var b=this.getDisplayText();a.setAttribute("title",b.length>this._maxInputCharacters?b:"")}},getTitleAttribute:function(){var a=this.getDisplayText();return a.length>this._maxInputCharacters?a:""},getMaxInputText:function(){var a=this.getInputText();if(a.length>this._maxInputCharacters)return a.substring(0,
this._maxInputCharacters)+"...";a.length||(a=MSGS.COMMON_NO_SELECTION,this._itemInPage=null);return a},preventBlur:function(a){if(this.isFocus())if(this._timeoutID)this._timeoutID=null,clearTimeout(this._timeoutID);else{SFDOMEvent.getTarget(a)!=juic.$(this.getReferenceId())&&this._storeCaret();this._stopBlur=!0;var b=this;setTimeout(50)}},_storeCaret:function(){Util.browserInfo.ios||(this._lastCaret=SFCaretUtil.caret(juic.$(this.getReferenceId())))},_restoreCaret:function(){if(this._lastCaret){var a=
this,b=this._lastCaret,c=juic.$(this.getReferenceId());setTimeout(function(){a.isFocus()&&SFCaretUtil.caret(c,b)},0);this._lastCaret=null}},_clickToggle:function(){if(this.isEnabled()){var a=this.getCalloutInstance();a&&a.hide();!this._isPopupShown()&&this.setDropdownToggleClick(!0);this.isFocus()||this.setFocus(!0);this._focusInput();this._isPopupShown()||this._showPopup();this.setDropdownToggleClick(!1)}},_focusChanged:function(){this.dispatch(this.isFocus()?"focus":"blur");this.isFocus()?0==this._minimumFilterSize&&
this._showPopup():this._hidePopup()},_createPopup:function(a){this._popup=new SFContextPopup(a,this._getPopupOptions());this._popup.addEventListener("preventBlur",this,"preventBlur");this._popup.addEventListener("clickedOutsidePopup",this,"_hidePopup")},_createPopupContents:function(){this._dragResizer=new SFDragResizer(this._listSelect,{dragByResizing:!0});this._dragResizer.addEventListener("dragResize",this,"_onDragResize");return this._dragResizer},_hidePopup:function(){clearInterval(this._intervalId);
this._popup&&(this._popup.hide(),this._loading=!1,this.updateAttribute("aria-expanded","false",!0),this.updateAttribute("aria-activedescendant","",!0),this.updateAttribute("aria-labelledby","",this.id))},_showPopup:function(a){this._isPopupShown()&&this._hidePopup();this.updateAttribute("aria-expanded","true",!0);this.updateAttribute("aria-activedescendant",this._listSelect.id+"item0",this.id);this.updateAttribute("aria-labelledby",this._listSelect.getDomId(),this.id);this._popup&&this._popup.resetCurrentPosition();
a?this._listSelect.setFilter("contains",a):this._itemInPage?this._listSelect.fetchNewPage(this._itemInPage):this._listSelect.clearFilter();this._listSelect.isPageAvailable()||this.setLoading(!0)},_onItemsAvailable:function(a){this.isLoading()&&this.setLoading(!1);if(this.isFocus()&&!this._isPopupShown()){this._popup||this._createPopup(this._createPopupContents());this._listSelect.resetDimension();var b=-1;if(this._selectedItem){var c=this._itemProvider.getValue(this._selectedItem),d=0;a=a.items;for(var k=
a.length;d<k;d++)if(this._itemProvider.getValue(a[d])==c){b=d;break}else if(""===c){b=0;break}}this._itemInPage&&(b+=7*this._itemInPage);this._listSelect.changeItemFocus(b);b={width:"auto",height:"auto"};this._autoHeight&&this._autoWidth||(c=this._listSelect.getPageDimension(),this._autoWidth||(d=this._listSelect.getContainerHeight()>c.height?17:0,a=juic.$(this.getReferenceId()).offsetWidth+30,b.width=c.width>a-d?c.width+d:a,this._userWidth&&(!b.width||b.width<this._userWidth)&&(b.width=this._userWidth)),
this._autoHeight||(b.height=c.height));this._listSelect.setDimension(b);this._popup.show(this.getReferenceId());var l=this,m;clearInterval(this._intervalId);setTimeout(function(){m=SFDom.getXY(l.getReferenceId())},0);this._intervalId=setInterval(function(){var a=SFDom.getXY(l.getReferenceId());m=m||a;a[0]==m[0]&&a[1]==m[1]||l._hidePopup()},500)}},_onDragResize:_isPopupShown:setAvailableWidth:function(a){this._availableWidth=
a;var b=this._fixWidthOnLoad?"100px":this._getInputWidth();a&&b&&(b=parseInt(b),b=b>a?a:b,(a=juic.$(this.getReferenceId()))&&b&&(a.style.width=this.isFioriFDEnabled?"auto":b+"px"))},_updateInputWidth:function(){if(!this._fixedWidth){var a=juic.$(this.getReferenceId());a&&(a.style.width=this.isFioriFDEnabled?"auto":this._fixWidthOnLoad?"100px":this._getInputWidth())}},_keyDown:function(a){a=a||window.event;var b=SFDOMEvent.getKeyName(a);this.dispatch("keyDown",{code:b,event:a});if(a.consumed)SFDOMEvent.preventDefault(a);
else if(/^ARROW(LEFT|RIGHT|UP|DOWN)$/.test(b))if(a.altKey){if(/^ARROW(LEFT|RIGHT|UP|DOWN)$/.test(b)){var c=this._listSelect.getDimension();switch(b){case "ARROWLEFT":c.width-=10;break;case "ARROWRIGHT":c.width+=10;break;case "ARROWUP":c.height-=10;break;case "ARROWDOWN":c.height+=10}/^ARROW(LEFT|RIGHT)$/.test(b)&&(this._userWidth=c.width);this._listSelect.setDimension(c);SFDOMEvent.preventDefault(a)}}else"ARROWDOWN"==b&&this._clickToggle();else switch(b){case "ESCAPE":juic.$(this.getReferenceId());
var d=this;setTimeout(0);break;case "RETURN":SFDOMEvent.preventDefault(a);break;case "TAB":this._isPopupShown()&&this._onItemSelected(a);break;case "DELETE":this.metaDataObj&&this._onChangeParams&&this.metaDataObj.id==this._onChangeParams.metaId&&this._onItemSelected(a);break;case "ALPHA":case "NUMERIC":case "SPACEBAR":case "BACKSPACE":case "OTHER":this.noTypeAhead&&"TAB"!=b&&SFDOMEvent.preventDefault(a)}},_keyUp:function(a){a=a||window.event;switch(SFDOMEvent.getKeyName(a)){case "ESCAPE":this._hidePopup();
break;case "ARROWUP":a.altKey||(this._listSelect.moveFocusUp(),this._updateIntermediateValue(a));break;case "ARROWDOWN":a.altKey||(this._listSelect.moveFocusDown(),this._updateIntermediateValue(a));break;case "RETURN":if(this._isPopupShown())Util.browserInfo.ios?this._listSelect.selectOnlyValue():this._listSelect.selectFocus();else if(this.disableLiveSearch){this._hidePopup();var b=(a=juic.$(this.getReferenceId()).value)?a.length:0;1<=b&&this._showPopup(a)}else this._showPopup();break;case "ALPHA":case "NUMERIC":case "SPACEBAR":case "BACKSPACE":case "OTHER":this.noTypeAhead?
SFDOMEvent.preventDefault(a):(this._hidePopup(),this.disableLiveSearch||(b=(a=juic.$(this.getReferenceId()).value)?a.length:0,b>=this._minimumFilterSize&&this._showPopup(a)))}},getInputText:function(){var a=this.getDisplayText();this._selectedItem||!this._title||this.isFocus()||(a=this._title);return a},getInput:_updateIntermediateValue:function(){this.updateAttribute("aria-activedescendant",this._getListFocusIndex(),!0)},_getListFocusIndex:function(){var a=
this._listSelect._focusIndex;return-1<a?this._listSelect.id+"item"+a:""},_commitValue:function(){var a=juic.$(this.getReferenceId());if(a){var b=a.value;this._itemSelected&&this._popup?b=this._listSelect.getFocusItem():this._forceSelection?b=!b&&this._allowEmpty?null:this._selectedItem:b==this._itemProvider.getLabel(this._selectedItem)&&(b=this._selectedItem);a=this.getValue();b?this.setValue(b):this.clearValue();b=this.getValue();a!=b&&this.dispatch("change",{newValue:b,originalEvent:"commitValue"});
this._itemSelected=!1}},_clearTitle:function(){var a=juic.$(this.getReferenceId());!this._selectedItem&&this._title&&(a.value="")},_focusInput:function(){if(this.isFocus()){var a=this;clearTimeout(this._inputFocus);this._inputFocus=setTimeout(function(){var b=juic.$(a.getReferenceId());b&&(Util.browserInfo.ios?(b.focus(),b.setSelectionRange(0,9999)):b.select())},250)}},_getInputWidth:function(){if(this._fixedWidth)return"number"==typeof this._fixedWidth?this._fixedWidth+"px":"boolean"==typeof this._fixedWidth?
"auto":this._fixedWidth.toString();var a;a=this.getMaxInputText();var e=this._getScratchPadClassName();if(a){if(!b){var f=document.createElement("span");document.body.appendChild(f);b=document.createElement("a");f.appendChild(b)}b.parentNode.className=e;b.innerHTML=escapeHTML(a);a=b.offsetWidth;b.innerHTML="";a=Math.min(620,Math.max(50,a+c))+"px"}else a="auto";return a},_getScratchPadClassName:_getPopupOptions:function(){var b={},c=
"OFFSETS";this.noTypeAhead&&(c+="NOTYPEAHEAD");Util.isRTL()&&(b.origin={vertical:"bottom",horizontal:"right"},b.menu={vertical:"top",horizontal:"right"},c+="RTL");b.offset=a[c];b.showRelativeToViewport=!0;return b},cleanup:function(){this._popup&&(this._popup.hide(),this._popup.cleanup());this.unregister()}});var b,c=3})();function ECTComboListSelect(a,b,c){this._super(a,b,c)}
extend(ECTComboListSelect,SFComboListSelect,{fetchNewPage:function(a){this._itemProvider.getItems({pageNumber:a+1,pageIndex:a,pageSize:this._pageSize,startIndex:a*this._pageSize,endIndex:(a+1)*this._pageSize-1,filterType:this._filterType,filterValue:this._filterValue});juic.$(this.id+a)||this._addPage(a)}});function ECTFACDAO(a){this._init(a)}
juic.extend(ECTFACDAO,juic.EventTarget,{_init:_getItemObjForValue:function(a,b){var c;if(this._staticData&&"undefined"===typeof a.id)for(var d=this._staticData.results||[],e=0,f=d.length;e<f;e++){if(c=d[e],c.id===a)return c}else if(this._controllerInstance&&a&&(d={callback:async:!1},e="searchByInternalCode",b.toSearchByExternalCode&&(e="searchByExternalCode"),this._controllerInstance[e]&&this._controllerInstance[e](b,
d),c))return c;return a},updateDatasource:function(a){"string"===typeof a?(this._controllerInstance=AjaxService.getMBeanInstance(a),this._controllerInstance||"customAutoCompleteFieldController"!=a||(this._controllerInstance=AjaxService.getMBeanInstance("genericObjectAutoCompleteController")),delete this._staticData):"object"===typeof a&&a.results&&(this._staticData=a,delete this._controllerInstance)},getSearchResults:function(a,b){a.userSysId=a.userSysId||window.subjectUserId||window.selectedUserID;
a.hasOwnProperty("nextPageStartIndex")||(a.nextPageStartIndex=1);a.newHirePage=window.newHirePage?!0:!1;if(window.manageDataPage||window.configUIPage)a.sourceScreen=window.configUIPage?"ConfigUIPage":"ManageDataPage";if(this._controllerInstance){var c=this;this._controllerInstance.search(a,{callback:function(d){c.dispatch("searchResultsAvailable",juic.set(d,b||{}));d.hasOwnProperty("nextPageStartIndex")?null==d.nextPageStartIndex?d.nextPageStartIndex=1:a.nextPageStartIndex=d.nextPageStartIndex:d.nextPageStartIndex=
1},errorHandler:function(a,e){"SECURITYSCANNER"==e.errorCode?AjaxService._defaultErrorHandler(a,e):c.dispatch("searchResultsError",juic.set({message:a,error:e},b||{}))}})}else this._staticData.searchToken=(a.searchText||"").trim().split(/\s+/),this.dispatch("searchResultsAvailable",juic.set(this._lookup(this._staticData.searchToken,this._staticData,b),b||{}))},_lookup:function(a,b,c){var d=c.pagination;c=d.startIndex;var d=d.startIndex+d.pageSize,e={results:[]},f=new RegExp(a.join("|"),"ig"),g=new RegExp(a.join("\\s+"),
"ig");b=b.results||[];if(!a||1>a.length||1==a.length&&""==a[0])e.totalNumberOfRecords=b.length,e.results=b.slice(c,d);else{a=0;for(var k=b.length;a<k;a++){var l=b[a],m=[l.primaryDisplayText,l.code,l.id].join(" ");m.match(f)&&(m.match(g)?e.results.splice(0,0,l):e.results.push(l))}e.totalNumberOfRecords=e.results.length;e.results=e.results.slice(c,d)}return e},validate:function(a,b){if(this._controllerInstance){var c={me:this,callback:function(a){c.me.dispatch("validationResultAvailable",{response:a})}};
this._controllerInstance.validate(a,b,c)}else if(this._staticData){for(var d=this._staticData.results||[],e=0,f=d.length;e<f;e++)if(d[e].id===b){this.dispatch("validationResultAvailable",{response:!0});break}this.dispatch("validationResultAvailable",{response:!1})}},requestPropagationValues:function(a,b,c){if(this._controllerInstance){var d={me:this,callback:;typeof this._controllerInstance.getPropagationValues==typeof Function&&
this._controllerInstance.getPropagationValues(a,b,c,d)}}});function ECTFoundationAutoComplete(a,b){this.register();this._init(a,b)}ECTFoundationAutoComplete.pageSize=7;ECTFoundationAutoComplete.pageNumber=1;ECTFoundationAutoComplete.EMPTY_VALUE={id:"",primaryDisplayText:""};
(function(){function a(a,b,c){this._super(a,b,c);ECTUtil.isEmptyObject(this._selectedItem)&&(this._selectedItem=ECTUtil.clone({},ECTFoundationAutoComplete.EMPTY_VALUE));this._model=b}function b(a,b){this.setModel(a);this._getItemQue=[];this.queryDelayTime=b&&b.queryDelayTime||350}function c(a,b,c){this._super(a,{pageSize:b.pageSize,itemClass:"globalMenuItem quickcardPeopleSearchAC",itemFocusClass:"globalMenuItemFocus",focusIndex:-1,fetchPageDelay:250,visionClasses:AccessibilityPrefs.isLowVisionEnabled()?
" globalMenu globalContainerHoverSansFocus ":""});this._model=c;this._renderUserStyle=this._model instanceof d&&"WORKER"==this._model.getSearchType()}function d(a,b){this._init(a,b)}function e(a,b){b.displayBizPhone=!0;b.displayJobTitle=!0;this._super(a,b)}juic.extend(ECTFoundationAutoComplete,ECTAbstractInputField,{ajaxController:"foundationAutoCompleteController",_init:function(a,b){assert(b,"Valid config parameter is required.");this.processing_cleanup=!1;this._setConfig(b);this._modified=!1;this._ectFACDAO=
this.getFoundationAutoCompleteDAO(this._config.dataSource);var c={searchType:this._searchType,pageSize:this._config.pageSize||ECTFoundationAutoComplete.pageSize,pageNumber:this._config.pageNumber||ECTFoundationAutoComplete.pageNumber,baseElement:this._baseElement,hrisElementField:this._config.id,target:this._config.searchOptions.target,valueAttribute:this._config.searchOptions.valueAttribute,applyTC:this._config.applyTC||!1,displayBizPhone:this._config.displayBizPhone||!1,displayJobTitle:this._config.displayJobTitle||
!1,ignoreRBPFlag:this._config.ignoreRBPFlag||!1};this._config.searchOptions.userSysId&&(c.userSysId=this._config.searchOptions.userSysId);this._ectFACModel=new d(this._ectFACDAO,c);this._ectFACModel.addEventListener("beforeSearch",this);this._ectFACModel.addEventListener("validationResultAvailable",this);this._ectFACModel.addEventListener("requestedPropagationResultAvailable",this);this._ectFACField=this.createComboBox(a);this._ectFACField instanceof ECTCustomPersonAutoCompleteSearch&&(this._ectFACField._config.additionalCriteria=
this._ectFACField._config.searchOptions.defaultSearchValues,this._ectFACField._placeholder="No Selection","string"===typeof a&&""!==a&&this._ectFACField.setValue(ECTSearchAdoptionUtils.convertValueObject(a)),this._ectFACField.addEventListener("change",this));this._ectFACField.addEventListener("itemSelected",this);this._ectFACField.addEventListener(ECTConstants.EVENT_FIELD_FOCUS,this,"dispatchEvent");this._ectFACField.addEventListener("externalBlur",this,"dispatchEvent");this._oldValue=this._valueObj=
this._ectFACField.getValueObject();this._value=this._ectFACField.getValue();this._ectFACField instanceof ECTCustomPersonAutoCompleteSearch&&null!==this._value&&(this._value=this._value.id);this._defaultSearchValues&&this.setContextualSearchInfo(this._defaultSearchValues);this._customFields&&this._ectFACModel.setCustomFields(this._customFields)},getFoundationAutoCompleteDAO:setSearchByExternalCode:function(a){this._ectFACModel.setSearchByExternalCode(a)},createComboBox:function(b){return"USER"===
this._config.type&&ECTSearchAdoptionUtils.isForceNewSearch?(this._config.searchOptions.defaultSearchValues=ECTSearchAdoptionUtils.getSearchCriteriaForWorkflow(),new ECTCustomPersonAutoCompleteSearch(this._config)):new a(b,this._ectFACModel,this._config)},setFocus:function(a){0==arguments.length&&(a=!0);this._ectFACField.setFocus(a)},preventBlur:function(a){this._ectFACField.preventBlur(a)},setFontConfig:function(a){this.getFACField&&this.getFACField().setFontConfig&&this.getFACField().setFontConfig(a)},
setEnabled:function(a){this._super(a);this._ectFACField.setEnabled(a?!0:!1)},setWritable:function(a){this._ectFACField.setWritable(a)},isWritable:function(){return this._ectFACField.isWritable()},setSearchType:function(a){this._searchType=a;this._ectFACModel.setSearchType(a);this._ectFACField.resetSelectionPage();this._ectFACField.setEnabled(a?!0:!1)},getSearchType:function(){return this._searchType},_getContextualSearchInfo:function(){ECTUtil.isEmptyArray(this._contextualSearchFields)||this.dispatch(ECTConstants.EVENT_ACTION,
{actionCommand:ECTConstants.EVENT_GET_CONTEXTUAL_SEARCH_FIELDS,fields:this._contextualSearchFields.slice(0),searchElement:this})},setContextualSearchInfo:function(a){if(a){var b={},c;for(c in a){var d=this._contextualSearchFieldsMap[c];b[d&&d.idToUse||c]=a[c]||d&&d.defaultValue||a[c]}this._ectFACModel.setSearchFields({contextualSearchFields:b})}},_setPropagationInfo:function(){var a=this._propagateResultFields;a&&a.length&&this._ectFACModel.setSearchFields({baseElement:this._baseElement,baseField:this._config.id})},
_getModified:function(){return this._oldValue&&this._oldValue.id!==this._value?!0:!this._oldValue&&this._value?!0:!1},getFACField:function(){return this._ectFACField},isModified:setInfoMsg:function(a){this._ectFACField.setInfoMsg(a)},setErrorMsg:function(a){this._ectFACField.setErrorMsg(a);this.dispatch("fieldError",{hasError:!!a})},getErrorMsg:updateDatasource:
_setConfig:function(a){"USER"==a.type&&-1!=a.id.indexOf("manager")&&(a.searchOptions.defaultSearchValues||(a.searchOptions.defaultSearchValues={}),a.searchOptions.defaultSearchValues.addNoMgr="y");this._config=a;var b=a.searchOptions;this._searchType=b.searchType;this._baseElement=b.baseElement;this._initContextualSearchFields(b.contextualSearchFields);this._customFields=b.customFields;this._dependentFields=b.dependentFields;b.propagateFieldsOnRequest&&0<b.propagateFieldsOnRequest.length&&(this._propagateFieldsOnRequest=
b.propagateFieldsOnRequest);this._defaultSearchValues=b.defaultSearchValues;this._propagateResultFields=b.propagateResultFields;this._config.dataSource=a.dataSource||this.ajaxController;this._config.disabled=this._searchType?!1:!0},_initContextualSearchFields:function(a){this._contextualSearchFieldsMap={};this._contextualSearchFields=[];if(a)for(var b=0,c=a.length;b<c;b++){var d=a[b];if(d){var e=d.fieldId||d,f=d.valueKey||e;this._contextualSearchFields.push(f);this._contextualSearchFieldsMap[f]={idToUse:e,
defaultValue:d.defaultValue}}}},reset:function(){this._getModified()&&(this.setValue(this._oldValue),this.checkForErrors(),this.dispatch("change",{actionCommand:"fieldUnChange",value:this._value}))},setValue:function(a){a=!a||"object"===typeof a&&ECTUtil.isEmptyObject(a)?ECTFoundationAutoComplete.EMPTY_VALUE:a;if(!(this._ectFACField instanceof ECTCustomPersonAutoCompleteSearch)&&"undefined"===typeof a.id){this.handleEvent({type:"beforeSearch"});var b=this._ectFACModel.getSearchFields();b.searchText=
a;a=this._ectFACDAO._getItemObjForValue(a,b)}this._ectFACField instanceof ECTCustomPersonAutoCompleteSearch?(a.employments&&a.employments[0]&&a.employments[0].title&&(a.employments[0].locationName.toUpperCase()!==MSGS.ECT_NO_DATA.toUpperCase()?a.employments[0].title.toUpperCase()!==MSGS.ECT_NO_DATA.toUpperCase()?a.employments[0].title+=", "+a.employments[0].locationName:a.employments[0].title=a.employments[0].locationName:a.employments[0].title.toUpperCase()===MSGS.ECT_NO_DATA.toUpperCase()&&(a.employments[0].title=
"")),this._ectFACField.setValue(a),this._valueObj=this._ectFACField.getValueObject(),this._value=a.userId,a.code=this._value,a.id=this._value):(this._ectFACField.setValue(a),this._valueObj=this._ectFACField.getValueObject(),this._value=this._ectFACField.getValue())},getValueObj:function(){return this._valueObj},getValue:function(){return this._config.sendDeleted?{added:this._value,deleted:this._oldValue&&this._value!=this._oldValue.id&&this._oldValue.id}:this._value},initByDefaultMetaValue:function(){this._initByDefaultMetaValue(this._config)},
renderHtml:function(a){this._ectFACField.renderHtml(a)},cleanup:function(){this.processing_cleanup=!0;this._ectFACField.cleanup();delete this._ectFACDAO;delete this._ectFACModel;delete this._ectFACField;delete this._config;delete this._valueObj;this.unregister()},handleEvent:function(a){switch(a.type){case "beforeSearch":this._getContextualSearchInfo();this._setPropagationInfo();break;case "itemSelected":this._processSelection(a);break;case "change":a.target instanceof ECTCustomPersonAutoCompleteSearch&&
!a.target.getValue()&&null!==this._oldValue&&(a.value=ECTSearchAdoptionUtils.convertValueObject(""),this._processSelection(a));break;case "requestedPropagationResultAvailable":if(a.response&&a.response.results&&1===a.response.results.length&&a.response.results[0].propagations){var b={};b.actionCommand=ECTConstants.EVENT_FIELD_CHANGE;b.searchElement=this;b.propagationInfo=a.response.results[0].propagations;b.value=this.getValue();b.propagatedResult=!0;this.dispatch(ECTConstants.EVENT_CHANGE,b)}break;
case "validationResultAvailable":a.response||this.processing_cleanup||(this.setValue(ECTFoundationAutoComplete.EMPTY_VALUE),this.setErrorMsg(MSGS.EMPFILE_HRIS_DEPENDENT_FO_CLEARED),this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:this._getModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE,value:this._value,hasError:this._hasError}))}},setValueAndCheckForErrors:function(a){this._modified=!0;this.setValue(a);this.checkForErrors();this.setInfoMsg(null)},_processSelection:function(a){this._ectFACField instanceof
ECTCustomPersonAutoCompleteSearch&&(a.value.propagations=[],a.value||(a.value=a.target.getValue()));this.setValueAndCheckForErrors(a.value);var b={};b.actionCommand=this._getModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE;b.value=this._value;b.metaId=this._config.id;b.searchElement=this;b.rowIndex=this.rowIndex?this.rowIndex:null;a.value.propagations&&(b.propagationInfo=a.value.propagations);this._dependentFields&&(b.dependentFields=this._dependentFields.slice(0));!this._propagateFieldsOnRequest||
b.propagationInfo&&0!==b.propagationInfo.length||this._requestPropagationValues(this._propagateFieldsOnRequest);this.dispatch(ECTConstants.EVENT_CHANGE,b)},bindValidators:function(a){if(a.required){var b=a.sendDeleted?"custom":"required",c={message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_REQUIRED,a.label)};a.sendDeleted&&(c.regexp='{?"added"?:?[0-9]+?,?"deleted"?:?(("")|([0-9]*)|(false))?}');ECTValidationMgr.bindValidator(this,b,c)}},validate:function(){this._getContextualSearchInfo();this._ectFACModel.validate(this.getValue())},
_requestPropagationValues:function(a){this._getContextualSearchInfo();this._ectFACModel.requestPropagationValues(this.getValue(),a)},setAvailableWidth:);extend(a,ECTComboBox,{_init:function(a,b,c){this._queryDelayTime=c&&c.queryDelayTime;this._super(a,b,c)},_createItemProvider:function(a){this._model=a;return new b(a,{queryDelayTime:this._queryDelayTime})},resetSelectionPage:_createListSelect:function(a,
b){return new c(a,b,this._model)}});extend(b,SFAbstractItemProvider,{setModel:function(a){this._model&&(this._model.removeEventListener("searchResults",this),this._model.removeEventListener("searchResultsError",this));this._model=a;this._model.addEventListener("searchResult",this,"_onSearchResult");this._model.addEventListener("searchResultsError",this,"_onSearchError")},_getItemCount:function(a){var b=a.totalNumberOfRecords,c=a.pagination;a=a.results||[];!b&&0<a.length&&(b=c.pageNumber*c.pageSize+
1);return b},_onSearchResult:function(a){var b,c=a.pagination;a.noResults?(b=[],a=0):(b=a.results,a=this._getItemCount(a));this.dispatch("itemsAvailable",{items:b,itemCount:a,pagination:c})},_onSearchError:function(a){this.dispatch("itemsError",{pagination:a.pagination,message:a.message,error:a.error})},getItemQueManager:function(a){var b=null;2<=this._getItemQue.length&&(b=this._getItemQue[0],this._getItemQue.splice(0,1));0===a.pageIndex&&(this._getItemQue=[]);this._getItemQue.push(a);var c=this;
this._fetchPageTimeout&&clearTimeout(this._fetchPageTimeout);this._fetchPageTimeout=setTimeout(function(){for(var a=0,b=c._getItemQue.length;a<b;a++){var d=c._getItemQue[a];c._model.searchOnKeyPress(d.filterValue,d.pageNumber,{pagination:d})}delete c._fetchPageTimeout},this.queryDelayTime);return b},getItems:toItem:function(a){var b=a;b&&"string"==typeof b&&(b=ECTUtil.getConsumableValue(a));return b},getValue:function(a){if("string"==typeof a)return a;
var b="";a&&(b=((b=this._model.getValueAttribute())?a[b]:a.id)||"");return b},getLabel:function(a){return"string"==typeof a?a:a&&(a.primaryDisplayText||a.displayPrimaryText)||""}});var f=Util.browserInfo.ff&&7>Util.ffVersion();juic.extend(c,SFComboListSelect,{_getUserName:function(a){return a.userName?['\x26nbsp;\x3cspan class\x3d"psdimUserName"\x3e',MSGS.get("COMMON_PARENTHETICAL_PHRASE",a.userName),"\x3c/span\x3e"].join(""):""},fetchNewPage:function(a){this._itemProvider.getItems({pageNumber:a+
1,pageIndex:a,pageSize:this._pageSize,startIndex:a*this._pageSize,endIndex:(a+1)*this._pageSize-1,filterType:this._filterType,filterValue:this._filterValue});juic.$(this.id+a)||this._addPage(a)},_onItemsAvailable:function(a){a.pagination.filterValue==this._filterValue&&this._itemCount&&a.itemCount>this._itemCount&&delete this._itemCount;this._super(a)},_fetchPage:function(a){if(!this._pageStatus[a]){this._pageStatus[a]={loading:!0};var b=this._itemProvider.getItems({pageNumber:a+1,pageIndex:a,pageSize:this._pageSize,
startIndex:a*this._pageSize,endIndex:(a+1)*this._pageSize-1,filterType:this._filterType,filterValue:this._filterValue});b&&this._pageStatus[b.pageIndex]&&!this._pageStatus[b.pageIndex].items&&(this._pageStatus[b.pageIndex]=null);juic.$(this.id+a)||this._addPage(a)}},_renderItem:function(a,b,c){a.push('\x3cdiv id\x3d"',this.id,c,'primary" class\x3d"primary"\x3e');f&&a.push('\x3cspan class\x3d"ellipsis"\x3e...\x3c/span\x3e');var d=Util.escapeHTML(this._itemProvider.getLabel(b));a.push('\x3ca title\x3d"',
d,'" ');d||this._renderUserStyle||b instanceof Component?a.push('onclick\x3d"',this.fireCode("_selectItem",c)):a.push(' class\x3d"ectFASeparator" onclick\x3d"return false');a.push('" unselectable\x3d"on" onselectstart\x3d"return false" role\x3d"menuitem"\x3e');if(this._renderUserStyle)a.push('\x3cdiv class\x3d"psUserImage"\x3e\x3cimg height\x3d"38px" width\x3d"32px" src\x3d"/localpicture?ps_p_action\x3dshow\x26amp;ps_p_uid\x3d',b.id,"\x26amp;p_type\x3dquickcard\x26amp;_s.crb\x3d",ajaxSecKey,'"/\x3e\x3c/div\x3e'),
a.push('\x3cdiv class\x3d"psUserContent"\x3e'),a.push('\x3cdiv class\x3d"topContent"\x3e'),a.push('\x3cdiv class\x3d"primaryDisplayText wrapText"\x3e',this.getUserPrimaryDisplayText(b),"\x26nbsp;\x26nbsp;\x26nbsp;\x3c/div\x3e"),a.push("\x3c/div\x3e"),a.push('\x3cdiv class\x3d"secondaryDisplayText wrapText"\x3e',this.getUserSecondaryDisplayText(b),"\x3c/div\x3e"),a.push("\x3c/div\x3e"),a.push("\x3c/a\x3e\x3c/div\x3e");else if(b&&(b instanceof Component?b.renderHTML(a):(this._filterValue&&(d=d.replace(new RegExp("("+
RegExp.escape(juic.escapeHTML(this._filterValue))+")","i"),"\x3cem\x3e$1\x3c/em\x3e")),d=ECTUtil.readonlyValueSwitch(ECTUtil.dimExternalCode(d,!0),!0),a.push(d))),a.push("\x3c/a\x3e\x3c/div\x3e"),b.secondaryDisplayText&&(b=this._parseSecondaryDisplayText(b.secondaryDisplayText)))a.push('\x3cdiv id\x3d"',this.id,c,'secondary" class\x3d"secondary"\x3e'),f&&a.push('\x3cspan class\x3d"ellipsis"\x3e...\x3c/span\x3e'),a.push('\x3cspan title\x3d"',b,'"\x3e'),a.push(ECTUtil.readonlyValueSwitch(b,!0),"\x3c/span\x3e\x3c/div\x3e")},
getUserPrimaryDisplayText:function(a){return Util.escapeHTML(a.name)+this._getUserName(a)},getUserSecondaryDisplayText:_parseSecondaryDisplayText:function(a){for(var b=a.length,c=[],d=0;d<b;d++){var e=Util.escapeHTML(a[d].value);c.push(a[d].id,": ",e)}return c.join(" ")},_adjustItemDOM:function(a){this._displayEllipsis(juic.$(this.id+a+"primary"));this._displayEllipsis(juic.$(this.id+a+"secondary"))},_displayEllipsis:function(a){if(a)SFDom[a.lastChild.offsetWidth>
a.offsetWidth-5?"addClass":"removeClass"](a,"display-ellipsis")}});juic.extend(d,juic.EventTarget,{_init:function(a,b){this._setDAO(a);this._searchFields={};this.setSearchFields(b)},_setDAO:function(a){this._searchDAO=a;this._searchDAO.addEventListener("searchResultsAvailable",this);this._searchDAO.addEventListener("searchResultsError",this);this._searchDAO.addEventListener("validationResultAvailable",this);this._searchDAO.addEventListener("requestedPropagationResultAvailable",this,"dispatchEvent")},
setSearchFields:function(a){var b=a.contextualSearchFields,c;for(c in b)"INVALID"==b[c]&&(b[c]="");this._searchFields=juic.set(this._searchFields,a)},setSearchByExternalCode:function(a){this._searchFields.toSearchByExternalCode=a},getSearchFields:function(){return this._searchFields},getValueAttribute:function(){return this._searchFields.valueAttribute},setSearchType:function(a){this._searchFields.searchType=a},getSearchType:updateModelConfig:function(a){this.setSearchFields(a)},
searchOnPageChange:function(a,b){this._searchFields.pageNumber=a;""!=this._searchFields.searchType?this._searchDAO.getSearchResults(this._searchFields,b):this.dispatch("searchResult",juic.set({noResults:!0},b||{}))},searchOnKeyPress:function(a,b,c){this.dispatch("beforeSearch");this._searchFields.searchText=a;this._searchFields.pageNumber=b||ECTFoundationAutoComplete.pageNumber;""!=this._searchFields.searchType?this._searchDAO.getSearchResults(this._searchFields,c):this.dispatch("searchResult",juic.set({noResults:!0},
c||{}))},validate:requestPropagationValues:handleEvent:function(a){switch(a.type){case "searchResultsAvailable":this.dispatch("searchResult",a);break;case "searchResultsError":this.dispatch("searchResultsError",a);break;case "validationResultAvailable":this.dispatchEvent(a)}},setCustomFields:);juic.extend(e,ECTFoundationAutoComplete,
function(){function b(a,b,c){this._super(a,b,c);this._renderUserStyle=!0}uic.extend(b,c,{getUserPrimaryDisplayText:getUserSecondaryDisplayText:function(a){var b=[];a.secondaryDisplayText&&a.secondaryDisplayText.length&&a.secondaryDisplayText.forEach(;return b.join(", ")}});juic.extend(d,a,{_createListSelect:);return{createComboBox:}());ECTUtil.declareECNameSpaceForMDF();window.module.ec.ui.WorkerAutoComplete=e})();function ECTPicklistAutoComplete(a,b){this.register();this._init(a,b)}ECTPicklistAutoComplete.FIELD_TYPE="PICKLISTAUTOCOMPLETE";
(function(){function a(a,b){this._super(a,b)}function b(a,b,c,g){this._picklistId=a;this._required=c;if("string"===typeof b&&""!=b)try{b=JSON.parse(b)}catch(k){b}this._currentValue=this.getValue(b);this._passedValue=b;this._contextualSearchFieldsMap=g;this._contextualValues={}}jaxService.getMBeanInstance("picklistController");extend(ECTPicklistAutoComplete,ECTComboBox,{_init:function(a,b){this._config=b;this._initContextualSearchFields(b.contextualSearchFields);
b.hasOwnProperty("defaultFirstOption")&&b.defaultFirstOption&&b.writable&&(""!=a||null!=a)&&(a=b.selectOptions&&b.selectOptions[0]&&b.selectOptions[0].value,"boolean"==typeof a&&(a=b.selectOptions[0]));this._super(a,this.getItemProvider(b,a),b);b.selectOptions&&(this.noTypeAhead=5>=b.selectOptions.length)},_initContextualSearchFields:function(a){this._contextualSearchFieldsMap={};this._contextualSearchFields=[];if(a)for(var b=0,c=a.length;b<c;b++){var d=a[b];if(d){var k=d.fieldId||d,l=d.valueKey||
k;this._contextualSearchFields.push(l);this._contextualSearchFieldsMap[l]={idToUse:k,defaultValue:d.defaultValue}}}},setParentOptionId:updateSelectOptions:function(a){ECTUtil.isArray(a)&&(this.setItemProvider(new c(a)),this.enableTypeAhead(5<a.length))},getItemProvider:function(a,e){if(a.selectOptions)return new c(a.selectOptions);this._picklistItemProvider=new b(a.picklistId,e,a.required,this._contextualSearchFieldsMap);this._picklistItemProvider.addEventListener(ECTConstants.EVENT_ACTION,
this,"_handleContextualSearchFields");return this._picklistItemProvider},_handleContextualSearchFields:function(a){ECTUtil.isEmptyArray(this._contextualSearchFields)||this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_GET_CONTEXTUAL_SEARCH_FIELDS,fields:this._contextualSearchFields.slice(0),searchElement:this})},setContextualSearchInfo:function(a){if(a){var b={},c;for(c in a){var d=this._contextualSearchFieldsMap[c];b[d&&d.idToUse||c]=a[c]||d&&d.defaultValue||a[c]}this._picklistItemProvider.setContextualSearchInfo(b)}},
_onItemSelected:function(a){this._super(a);this.checkForErrors();this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE,value:this.getValue(),metaId:this._config.id,hasError:this._hasError})},dispatchEvent:function(a){(a.type!=ECTConstants.EVENT_CHANGE||a.actionCommand)&&this._super(a)},reset:function(){this.isModified()&&(this.setValue(this._oldValue),this.checkForErrors(),this.dispatch(ECTConstants.EVENT_CHANGE,
{actionCommand:ECTConstants.EVENT_FIELD_UNCHANGE,hasError:this._hasError}))},_createListSelect:);extend(a,SFComboListSelect,{_renderItem:function(a,b,c){a.push('\x3cspan class\x3d"ellipsis"\x3e...\x3c/span\x3e');a.push('\x3ca title\x3d"',juic.escapeHTML(this._itemProvider.getLabel(b)),'" onclick\x3d"',this.fireCode("_selectItem",c),'" unselectable\x3d"on" onselectstart\x3d"return false" role\x3d"menuitem"\x3e');b&&(b instanceof juic.Component?b.renderHTML(a):(b=ECTUtil.readonlyValueSwitch(juic.escapeHTML(this._itemProvider.getLabel(b)),
!0),""==b&&(b="\x26nbsp;"),this._filterValue&&(b=b.replace(new RegExp("("+RegExp.escape(juic.escapeHTML(this._filterValue))+")","i"),"\x3cem\x3e$1\x3c/em\x3e")),a.push(b)));a.push("\x3c/a\x3e")}});extend(b,SFAbstractItemProvider,{getItems:function(a){var b=this,c=this._currentValue;if(""==c&&-1<this._passedValue.indexOf("value")){var d=this._passedValue.indexOf(":")+2,k=this._passedValue.indexOf(",")-1;-1<d&&d<this._passedValue.length&&-1<k&&k<this._passedValue.length&&(c=this._passedValue.substring(d,
k))}this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTConstants.EVENT_GET_CONTEXTUAL_SEARCH_FIELDS});0<=b.totalCount&&a&&!a.totalCount&&(a.totalCount=b.totalCount);this.getController().getPicklistByPage(this._parentOptionId,this._picklistId,a,c,this._required,this._contextualValues,{callback:function(c){b.totalCount=c.totalCount;b.dispatch("itemsAvailable",{items:c.picklistOptions,itemCount:c.totalCount,pagination:a})},errorHandler:function(c,d){b.dispatch("itemsError",{message:c,error:d,
pagination:a})}})},getController:function(){ECTUtil.isEmptyObject(this._contextualSearchFieldsMap)?this._controller||(this._controller=AjaxService.getMBeanInstance("picklistController")):this._controller=AjaxService.getMBeanInstance("approverRoleEnumPicklistController");return this._controller},getLabel:function(a){var b=null;"object"==typeof a&&(b=a&&a.label);return b||MSGS.COMMON_NO_SELECTION},getValue:function(a){switch(typeof a){case "string":return a=parseInt(a),isNaN(a)?"":a;case "number":return a;
case "object":return a&&a.value||""}return""},setParentOptionId:function(a){this._parentOptionId=a},toItem:function(a){ECTUtil.isJSON(a)&&(a=eval("("+a+")"));if(a&&"object"!=typeof a){if(!this._cache){var b=this;this.getController().getPickList(this._picklistId,{callback:function(a){b._cache=a},async:!1})}a=this._getPicklistFromCache(a)||a}return a},_getPicklistFromCache:function(a){if(this._cache)for(var b=this._cache.picklistObjects||[],c=0,d=b.length;c<d;c++)if(b[c].value==a)return b[c];return null},
setContextualSearchInfo:);extend(c,SFArrayItemProvider,{toItem:function(a){ECTUtil.isJSON(a)&&(a=eval("("+a+")"),a=a.value);return this._super(a)}})})();function ECTMultipleRelation(a,b){assert(b.searchOptions.searchType,"Search type is required for ECTMultipleRelation");assert(b.label,"Title is required for ECTMultipleRelation");this.register();this.init(a,b)}
ECTMultipleRelation.prototype=function(){function a(a,c){for(var b=0,e=a.length,f=e-1;b<e;b++)a[b].renderHtml(c),b<f&&c.push(",")}return set(new ECTAbstractInputField,{isFirstItem:!0,isAllNewItem:!1,init:function(a,c){this._config=c||{};this._writable=c.writable||!1;this._required=c.required||!1;this._title=Util.escapeHTML(c.label);this._sendDeleted=c.sendDeleted;this._label=new ECTLabelProfileUpdate(c.label,this._required);this._relationTags={};this._newRelationTags={};this._oldTags={};this._autoCompleteHidden=
!0;this._autoCompleteError=new ECTInlineError(MSGS.EMPFILE_FT_ITEM_ALREADY_ADDED);this._contextualInfo={};a.length?this._initialData=a.slice(0):(this._initialData={value:[],defaultValue:[]},a.value.length&&(this._initialData.value=a.value.slice(0)),a.defaultValue.length&&(this._initialData.defaultValue=a.defaultValue.slice(0)));this.setValue(a)},setValue:function(a){for(var b in this._relationTags)this._relationTags[b].cleanup();for(var d in this._oldTags)this._oldTags[d].cleanup();this._relationTags=
{};this._newRelationTags={};this._oldTags={};this.currentTag=[];this.newTag=[];this.deletedTag=[];this._value=a.length?a:a.defaultValue||[];a=this._classifiedValues=this._classifyValues(this._value,a.value||[]);if(this._writable){this._autoComplete||(b=this._autoComplete=new ECTFoundationAutoComplete("",{baseField:this._config.id,pageSize:7,pageNumber:1,fieldsMetaID:this._config.fieldsMetaID,writable:this._config.writable,dataSource:this._config.dataSource,applyTC:this._config.applyTC||!1,searchOptions:this._config.searchOptions}),
b.addEventListener(ECTConstants.EVENT_CHANGE,this),b.addEventListener(ECTConstants.EVENT_ACTION,this));b=0;for(d=a.current.length;b<d;b++){var e=a.current[b];this.currentTag.push(this._createRelationTag(e))}b=0;for(d=a.newItem.length;b<d;b++)e=a.newItem[b],this.newTag.push(this._createRelationTag(e));b=0;for(d=a.deletedItem.length;b<d;b++)this.deletedTag.push(this._createRelationTag(a.deletedItem[b],!0))}else{b=0;for(d=a.current.length;b<d;b++)this.currentTag.push(new ECTSimpleLabel(this._value[b].displayValue,
!1));b=0;for(d=a.newItem.length;b<d;b++)this.newTag.push(new ECTSimpleLabel(this._value[b].displayValue,!1));b=0;for(d=a.deletedItem.length;b<d;b++)this.deletedTag.push(new ECTStrikedLabel(this._oldValue[b].displayValue,"struck_label"))}if(a=juic.$(this.id))a.innerHTML=this.buildInnerHTML()},buildInnerHTML:function(){var b=createRenderContext(),c=this.isFioriFDEnabled()?'\x3cspan class\x3d"'+Util.generateIconClasses("add")+'"\x3e\x3c/span\x3e':"\x26nbsp;",d=this.isFioriFDEnabled()?'\x3cspan class\x3d"'+
Util.generateIconClasses("delete")+'"\x3e\x3c/span\x3e':"\x26nbsp;";b.push('\x3cdiv class\x3d"relationTitleBlock"\x3e','\x3cspan class\x3d"relationTitle ',this.generateFDClasses("form-label"),'"\x3e',this._label,"\x3c/span\x3e");this._writable&&b.push('\x3ca id\x3d"',this.id,'_addAutoComplete" title\x3d"',MSGS.get("ECT_HRIS_ASSIGNMENT_ACTION_ADD",this._title),'" class\x3d"ectMultipleRelationAddIcon" href\x3d"javascript:void(0)" onclick\x3d"',this.fireCode("_showAutoComplete",!0),'return false;" role\x3d"button"\x3e',
c,"\x3c/a\x3e");b.push('\x3cdiv class\x3d"clearAll"\x3e\x3c/div\x3e\x3c/div\x3e');this._writable&&b.push('\x3ctable role\x3d"presentation" id\x3d"',this.id,'_autoCompleteContainer" class\x3d"autoCompleteContainer ',this.generateFDClasses("table",["no-horizontal-borders","no-vertical-borders"]),'" cellpadding\x3d"5"\x3e\x3ctbody\x3e\x3ctr class\x3d"',this.generateFDClasses("table__row"),'"\x3e','\x3ctd class\x3d"',this.generateFDClasses("table__cell"),'"\x3e\x3clabel class\x3d"marginRight ',this.generateFDClasses("form-label"),
'" for\x3d"',this._autoComplete.getFACField().getReferenceId(),'"\x3e',MSGS.COMMON_Add," ",this._title,"\x3c/label\x3e\x3c/td\x3e",'\x3ctd class\x3d"autoCompleteField ',this.generateFDClasses("table__cell"),'"\x3e',this._autoComplete,"\x3c/td\x3e",'\x3ctd class\x3d"',this.generateFDClasses("table__cell"),'"\x3e\x3ca role\x3d"button" title\x3d"',MSGS.ECT_RuleEngine_Copy_Popup_Button_Cancel,'" class\x3d"ectMultipleRelationDeleteIcon" href\x3d"javascript:void(0)" onclick\x3d"',this.fireCode("_showAutoComplete",
!1),'return false;"\x3e',d,"\x3c/a\x3e\x3c/td\x3e",'\x3ctd class\x3d"',this.generateFDClasses("table__cell"),'"\x3e',this._autoCompleteError,"\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e");b.push('\x3cdiv class\x3d"relationItems"\x3e\x3cspan id\x3d"',this.id,'_currentRelationItems" class\x3d"newValue"\x3e');a(this.newTag,b);b.push("\x3c/span\x3e");b.push("\x3cspan\x3e");this.currentTag.length&&this.newTag.length&&b.push(",");a(this.currentTag,b);this.deletedTag.length&&(this.currentTag.length||
this.newTag.length)&&b.push(",");a(this.deletedTag,b);b.push("\x3c/span\x3e\x3c/div\x3e");return b.join("")},handleEvent:function(a){switch(a.type){case ECTConstants.EVENT_ACTION:switch(a.actionCommand){case ECTConstants.EVENT_GET_CONTEXTUAL_SEARCH_FIELDS:this.dispatchEvent(a);break;default:this.setErrorMsg(),this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE})}break;case ECTConstants.EVENT_CHANGE:switch(a.actionCommand){case ECTConstants.EVENT_FIELD_CHANGE:this._hideAutoCompleteError(),
this.addRelation()}}},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"multipleRelation"\x3e',this.buildInnerHTML(),"\x3c/div\x3e")},_showAutoComplete:function(a){juic.$(this.id+"_autoCompleteContainer").style.display=a?"block":"none";a||(this._hideAutoCompleteError(),this._autoComplete.reset())},addRelation:function(a){var b=this._autoComplete.getValueObj();b&&!this._isExistingRelation(b.id)?(a=this._createRelationTag({value:b.id,displayValue:b.primaryDisplayText}),this._newRelationTags[b.id]=
a,b=createRenderContext(),a.renderHtml(b),juic.$(this.id+"_currentRelationItems").innerHTML+=(this.isAllNewItem?",":"")+b.join("")+(this.isFirstItem?"":","),this.isFirstItem&&(this.isAllNewItem=!0),this.setErrorMsg(),this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE}),this._showAutoComplete(!1)):this._showAutoCompleteError()},isModified:function(){return!0},reset:function(){this._writable&&this.isModified()&&(this._showAutoComplete(!1),this._hideAutoCompleteError(),
this.setValue(this._initialData))},cleanup:function(){this._autoCompleteError.cleanup();this._newRelationTags=null;if(this._writable){this._autoComplete.cleanup();for(var a in this._relationTags)this._relationTags[a].cleanup()}for(var c in this._oldTags)this._oldTags[c].cleanup(),juic.$(this.id).className="comboDropDownDisabled";this._label.cleanup();this.unregister()},_createRelationTag:function(a,c){var b=new ECTTagLabel(a.value,a.displayValue,c);b.addEventListener(ECTConstants.EVENT_ACTION,this);
return this._relationTags[a.value]=b},_isExistingRelation:_showAutoCompleteError:function(a){a&&this._autoCompleteError.setVisibility(!0);this._autoCompleteError.setVisibility(!0)},_hideAutoCompleteError:validateFields:function(){var a=ECTValidationMgr.validate(this),c={};c.returnFlag=a.result;c.errorMsg=a.message;return c},getValue:function(){var a=[],c;for(c in this._relationTags)this._sendDeleted?
a.push({order:null,value:this._relationTags[c].getValue(),isDeleted:this._relationTags[c].isDeleted()}):this._relationTags[c].isDeleted()||a.push(this._relationTags[c].getValue());return 0<a.length?a:null},_classifyValues:function(a,c){var b={current:[],newItem:[],deletedItem:[]},e=c.length,f=a.length;if(0==f&&0!=e)b.deletedItem=c,this.isFirstItem=!1;else if(0!=f&&0==e)b.newItem=a,this.isAllNewItem=!0;else{for(e=0;e<a.length&&0<=e;e++)for(var f=a[e],g=0;g<c.length;g++)f.value===c[g].value&&(b.current.push(f),
a.splice(e,1),c.splice(g,1),e--,g--);b.newItem=a;b.deletedItem=c;b.newItem.length||!b.deletedItem.length&&!b.current.length?b.newItem.length&&(b.deletedItem.length||b.current.length)&&(this.isAllNewItem=!0):this.isFirstItem=!1}return b},bindValidators:function(a){a.required&&ECTValidationMgr.bindValidator(this,"valueArray",{message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_REQUIRED,a.label)})}})}();function ECTTagLabel(a,b,c){this.register();this.init(a,b,c)}
ECTTagLabel.prototype=function(){return set(new Component,{init:function(a,b,c){this._value=a;this._displayValue=Util.escapeHTML(b);this._deleted=c;this._isDirty=!1},renderHtml:function(a){a.push('\x3cspan id\x3d"',this.id,'_tagLabel" class\x3d"',this._deleted?"tagLabelDeleted":"tagLabel",'"\x3e');a.push("\x3cspan\x3e",this._displayValue,"\x3c/span\x3e");a.push('\x3ca role\x3d"button" id\x3d"',this.id,'_actionIcon" class\x3d"actionIcon" onclick\x3d"',this.fireCode("_changeState"),' return false;" href\x3d"javascript:void(0);" title\x3d"',
MSGS.ECT_CHANGE_STATE_DELETED,'"\x3e\x26nbsp;');a.push("\x3c/a\x3e");a.push("\x3c/span\x3e");a.push('\x3cspan class\x3d"hiddenAriaContent" role\x3d"status" aria-live\x3d"polite" id\x3d"',this.id,'_hiddenStatus"\x3e\x3c/span\x3e')},getValue:function(){return this._value},isDeleted:function(){return this._deleted},reset:function(){this._isDirty&&this._changeState()},_changeState:function(){this._isDirty=!this._isDirty;(this._deleted=!this._deleted)?(juic.$(this.id+"_tagLabel").className="tagLabelDeleted",
juic.$(this.id+"_actionIcon").setAttribute("title",MSGS.ECT_CHANGE_STATE_ENABLED),juic.$(this.id+"_hiddenStatus").innerHTML=MSGS.ECT_CHANGE_STATE_ENABLED):(juic.$(this.id+"_tagLabel").className="tagLabel",juic.$(this.id+"_actionIcon").setAttribute("title",MSGS.ECT_CHANGE_STATE_DELETED),juic.$(this.id+"_hiddenStatus").innerHTML=MSGS.ECT_CHANGE_STATE_DELETED);this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:this._deleted?ECTConstants.EVENT_DELETE:ECTConstants.EVENT_UNDO})}})}();
function ECTCommonFileUpload(a,b){this.register();this._init(a,b)}ECTCommonFileUpload.fieldType="ATTACHMENT";ECTCommonFileUpload.GET_ECT_ATTACHMENT_CONTEXT="GET_ECT_ATTACHMENT_CONTEXT";ECTCommonFileUpload.URL_PARAM_COMPANY="companyId";ECTCommonFileUpload.URL_PARAM_EFFECTIVE_DATE="effectiveStartDate";
ECTCommonFileUpload.fieldConstants={urlParams:{attachmentType:"HRIS_ATTACHMENT",selectedUserId:window.selectedUserID||"NO_USER",fileFormats:MSGS.EMPFILE_HRIS_UPLOAD_TYPES_ARR,logReadAccess:"false"},attachmentDisplayKey:MSGS.ATTACHMENT_ATTACHMENT,displayFileSize:!0,displayLinkName:!0,controller:"hrisAttachmentController",displayTrashCan:!0,truncateLength:25};
juic.extend(ECTCommonFileUpload,ECTAbstractInputField,function(){function a(a,c,d,e){var b=!0;try{window.__v12_hooks&&(window.__v12_hooks.invoke("ECTCommonFileUpload",a,c,d),b=!1)}catch(g){console.error(g)}b&&e&&e()}return{_init:function(b,c){var d=set({},ECTCommonFileUpload.fieldConstants),d=set(d,c);d.urlParams.module=c.module;var e=c.fileFormats;e&&"string"==typeof e&&0<e.length&&(d.urlParams.fileFormats=e);if(e=c.docTypeId)d.urlParams.attachmentType=e;if(e=c.maxFileSizeKB)d.urlParams.maxFileSizeKB=
e;if(!0===c.logReadAccess||"true"===c.logReadAccess)d.urlParams.logReadAccess="true";d.urlParams.selectedUserId=c.subjectUserId||window.selectedUserID||"NO_USER";this._value=b||{};this._config=d||{};this.setWritable(this._config.writable);this._modified=!1;this._createLink();this._link.addEventListener("getEctContextValues",this);a("postInit",{config:this._config})},contextValuesChanged:function(a){this.getAttachmentIdUploaded()&&!a.messageShown&&(this.showMessageDialog({type:ECTConstants.TYPE_INFO,
message:"EffectiveDate or CompanyId Changed: All attachments have to be uploaded again",title:MSGS.COMMON_Warning}),a.messageShown=!0,this._link.clearValue())},attachListner:function(a){this.attachedListners||(this.attachedListners={});this.attachedListners[a.metaId]||a.addEventListener("change",this,"contextValuesChanged")},cleanup:function(){this._link&&this._link.cleanup();this.unregister()},setModified:function(a){this._modified=a;if(this.isShowModified()){var b=juic.$(this._link.id);b&&b.id&&
(a?SFDom.addClass(b.id,"unsaved"):SFDom.removeClass(b.id,"unsaved"))}},isModified:function(){return this._modified},getAttachmentIdUploaded:function(){return this._attachmentIdUploaded},getValue:function(){return this._value},setValue:function(a){"string"===typeof a&&(a=ECTUtil.getConsumableValue(a));this._value=a||{};this._createLink();this._link.addEventListener("getEctContextValues",this);juic.$(this.id+"link")&&this._link.render(this.id+"link")},renderHtml:function(a){a.push(' \x3cdiv class\x3d"candidate_summary"\x3e');
a.push('\x3cdiv id\x3d"',this.id,'link"\x3e');this._link&&this._link.renderHtml(a);a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");a.push("\x3cdiv id\x3d'"+this.id+"_error' style\x3d'display:none; color: rgb(255, 0, 0);clear:both;'\x3e\x3c/div\x3e")},deserializeState:function(a){a.value||(a.value=null);a=eval("("+a.value+")");this.setValue(a)},handleEvent:function(b){switch(b.type){case "uploadSucceeded":SFOverlayMgr.removeOverlay(this.fileUploadDlg.id);this._modified=!0;if((b=b.response.result)&&b.length&&
(assert(1==b.length,"For now supporting only one attachment."),b=b[0])){this._attachmentIdUploaded=b.attachment&&b.attachment.attachmentId;var c={attachmentId:this._attachmentIdUploaded,attachmentUrl:b.attachmentDownloadUrl,fileSize:b.attachment&&b.attachment.size,fileType:b.attachment&&b.attachment.type,lastModified:b.lastModifiedDate,linkName:b.attachment&&b.attachment.name};this.setValue(c);a("postUploadSuccess",{config:this._config,attachment:b})}this.dispatch("change",{attachment:c});break;case "clearValue":c=
function(){this.setValue({});this._attachmentIdUploaded=null;this._modified=!0;this.dispatch("change")}.bind(this);a("uponDeletion",{attachment:this._value},{callbacks:{onSuccess:c,onError:c}},c);break;case "getEctContextValues":this.dispatch(ECTConstants.EVENT_ACTION,{actionCommand:ECTCommonFileUpload.GET_ECT_ATTACHMENT_CONTEXT,attachmentComponent:this})}},setECTContextFields:function(a){a.hrisField=this.metaId;juic.set(this._config.urlParams,a);a[ECTCommonFileUpload.URL_PARAM_COMPANY]&&a[ECTCommonFileUpload.URL_PARAM_EFFECTIVE_DATE]?
this._link.urlParametersComplete=!0:(this._link.urlParametersComplete=!1,this.showMessageDialog({type:ECTConstants.TYPE_ERROR,message:"Please select the effective Date and the company prior to uploading attachments",title:MSGS.COMMON_Err}))},setMetaId:function(){contextFields={};contextFields.hrisField=this.metaId;juic.set(this._config.urlParams,contextFields)},_createLink:function(){this._link&&this._link.cleanup();this._link=new ECTCommonFileLink(this._value,this._config,this._writable);var a=this;
this._link.addEventListener("clearValue",this);this._link.addEventListener("showUploadDialog",{handleEvent:function(b){a.fileUploadDlg&&(a.fileUploadDlg.cleanup(),a.fileUploadDlg=null);assert(a._config&&a._config.controller,"Error:  Controller not specified.");b={};for(var c in a._config.urlParams)b[c]=a._config.urlParams[c];b.seamName=a._config.controller;c="";a._value&&a._value.attachmentId&&(c=MSGS.get("RECRUITING_FILE_UPLOAD_WARNING",a._config&&a._config.attachmentDisplayKey)+"\x3cbr/\x3e");c=
a._config.urlParams.fileFormats?c+sfMessageFormat.format(MSGS.EMPFILE_HRIS_UPLOAD_TYPES,a._config.urlParams.fileFormats.replace(/\|/gi,", ")):c+MSGS.RECRUITING_FILE_UPLOAD_INSTRUCTION;var e=UIVersion.getCurrentInstance(),e=e&&e.isStandard()&&0<=e.compareTo(UIVersion.V12);a.fileUploadDlg=new SFFileUploadDialog(a._config&&a._config.controller,!1,1,b,MSGS.get("RECRUITING_FILE_UPLOAD_ATTACHMENT"),550,225,c,e);SFOverlayMgr.showOverlay(a.fileUploadDlg,!0);a.fileUploadDlg.addEventListener("uploadSucceeded",
a)}})}}}());function ECTCommonFileLink(a,b,c){this.register();this._init(a,b,c)}
juic.extend(ECTCommonFileLink,ECTAbstractInputField,function(){return{_init:function(a,b,c){this._value=a||{};this._config=b||{};this.setWritable(c);this.className="attachment_lg "+(this._config.isOldValue?"struck_attachment_lg ":"")},truncate:function(a){return this._config.truncateLength&&a.length>this._config.truncateLength?a.truncateByLength(this._config.truncateLength-3):a},renderHtml:function(a){if(this._value&&!this._value.attachmentId&&this.isWritable())a.push('\x3ca id\x3d"',this.id,'_fileImg" class\x3d"writeComp uploadFile ',
this.generateFDClasses("link")," ",this.className,'" href\x3d"javascript:void(0);" title\x3d"',MSGS.get("RECRUITING_FILE_UPLOAD_ATTACHMENT"),'" onclick\x3d"',this.fireCode("change"),'return false" \x3e','\x3cspan id\x3d"attachment_alt" class\x3d"',this.generateFDClasses("link__content"),' " \x3e',MSGS.get("RECRUITING_FILE_UPLOAD_ATTACHMENT"),"\x3c/span\x3e\x3c/a\x3e");else if(this._value&&this._value.attachmentId){var b=this._config.displayLinkName&&this._value.linkName||MSGS.get("RECRUITING_ATTACHMENT_DISPLAY",
this._config.employeeName,this._config.attachmentDisplayKey);a.push('\x3cdiv class\x3d"attachment_link"\x3e');a.push('\x3cdiv class\x3d"readComp"\x3e\x3ca aria-describedby\x3d"attachment_alt" id\x3d"',this.id,'_fileImg" class\x3d"viewAttachment ',this.generateFDClasses("link")," ",this.className,'" href\x3d"javascript:void(0);" onclick\x3d"',this.fireCode("_openAttachment"),'return false" title\x3d"',Util.escapeHTML(b),'"\x3e','\x3cspan id\x3d"attachment_alt" class\x3d"',this.generateFDClasses("link__content"),
'"\x3e',Util.escapeHTML(this.truncate(b)),"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e");a.push('\x3cdiv class\x3d"writeComp"\x3e\x3cdiv id\x3d"resume_exists" class\x3d"',this.className,'"\x3e');a.push('\x3ca aria-describedby\x3d"',this.id,"_writeCompInstruction",'" class\x3d"',this.generateFDClasses("link"),' " href\x3d"javascript:void(0);" id\x3d"',this.id,'" onclick\x3d"',this.fireCode("_openAttachment"),'return false" title\x3d"',Util.escapeHTML(b),'"\x3e');this.isFioriFDEnabled()&&a.push('\x3cspan class\x3d"',
this.generateFDClasses("link__content"),' "\x3e');a.push(Util.escapeHTML(this.truncate(b)));this.isFioriFDEnabled()&&a.push("\x3c/span\x3e");a.push("\x3c/a\x3e");a.push('\x3cspan class\x3d"hiddenAriaContent" id\x3d"',this.id,'_writeCompInstruction"\x3e',MSGS.get("ECT_FILE_UPLOAD_INSTRUCTIONS",b),"\x3c/span\x3e");this._config.displayFileSize&&this._value.fileSize&&(a.push('\x3cspan class\x3d"instructions ectCommonUploadFilesize ',this.generateFDClasses("text"),' " aria-describedby\x3d"',this.id,'_desc"\x3e (',
this._value.fileSize,") \x3c/span\x3e"),a.push('\x3cspan class\x3d"hiddenAriaContent" id\x3d"',this.id,'_desc"\x3e',MSGS.get("ECT_FILE_UPLOAD_SIZE_DESC",this._value.fileSize),"\x3c/span\x3e"));this.isWritable()&&(a.push('\x3cspan class\x3d"writeComp"\x3e','\x3cspan class\x3d"aquabtn sml"\x3e',"\x3cspan\x3e",'\x3cbutton class\x3d"',this.generateFDClasses("button"),'" style\x3d"',this.isFioriFDEnabled()?"":"padding: 0 3px;",'" onclick\x3d"',this.fireCode("change",this._value.attachmentId),'return false;"\x3e',
MSGS.COMMON_Update,"\x3c/button\x3e","\x3c/span\x3e","\x3c/span\x3e","\x3c/span\x3e"),this._config&&this._config.displayTrashCan&&a.push('\x3cspan class\x3d"writeComp"\x3e','\x3cspan class\x3d"aquabtn sml"\x3e',"\x3cspan\x3e",'\x3cbutton class\x3d"',this.generateFDClasses("button"),'" style\x3d"',this.isFioriFDEnabled()?"":"padding: 0 3px;",'" onclick\x3d"',this.fireCode("clearValue"),'return false;"\x3e',MSGS.COMMON_Delete,"\x3c/button\x3e","\x3c/span\x3e","\x3c/span\x3e","\x3c/span\x3e"));this._value.lastModified&&
a.push('\x3cdiv id\x3d"',this.id,'_lastModified" class\x3d"instructions  ',this.generateFDClasses("text"),'"\x3e',MSGS.get("RECRUITING_ATTACHMENT_LAST_UPDATE",this._value.lastModified),"\x3c/div\x3e");a.push("\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e")}},_openAttachment:function(){var a=this._value&&this._value.attachmentUrl;a&&jQuery.ajax({url:a,error:function(b){b.responseText&&"VIRUS_DETECTED"===JSON.parse(b.responseText).error.code&&SFMessageBox.confirm(MSGS.get("ADMINV3_DMS_REPOS_VIRUS_FILE"),{width:400,
callback:function(b){b&&(a+="\x26skipScan\x3dtrue",window.open(a,"ectattachment","scrollbars,resizable,height\x3d480,width\x3d730"))}})},success:)},clearValue:change:function(){this.urlParametersComplete=!0;this.dispatch("getEctContextValues");this.urlParametersComplete&&this.dispatch("showUploadDialog")}}}());
var ECTFileUploadDownload=ECTFileUploadDownload.STANDARD_UPLOAD_URL="/upload";ECTFileUploadDownload.STANDARD_DOWNLOAD_URL="/downloadfile";ECTFileUploadDownload.FILED_TYPE="FILE";
ECTFileUploadDownload.ENCODINGS=[{label:MSGS.COMMON_ISO_8859_1,value:"ISO-8859-1"},{label:MSGS.COMMON_UTF_8,value:"UTF-8"},{label:MSGS.COMMON_EUC_KR,value:"EUC-KR"},{label:MSGS.COMMON_GB2312,value:"GB2312"},{label:MSGS.COMMON_HZ,value:"HZ"},{label:MSGS.COMMON_Big5,value:"Big5"},{label:MSGS.COMMON_EUC_TW,value:"EUC-TW"},{label:MSGS.COMMON_EUC_JP,value:"EUC-JP"},{label:MSGS.COMMON_Shift_JIS,value:"Shift-JIS"}];ECTFileUploadDownload.EVENT_UPLOAD="EVENT_UPLOAD";
ECTFileUploadDownload.COMMAND_RESPONSE_RECEIVED="COMMAND_RESPONSE_RECEIVED";ECTFileUploadDownload.COMMAND_UPDATE_PROGRESS="COMMAND_UPDATE_PROGRESS";ECTFileUploadDownload.DOWNLOAD_FRAME_ID="ECTFileUploadDownload_download_frame_id";ECTFileUploadDownload.mapToQueryString=function(a){var b=[];if(a)for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"\x3d"+encodeURIComponent(a[c]));return b.join("\x26")};
ECTFileUploadDownload.queryStringToMap=function(a){var b={};if(a){a=a.split("\x26");for(var c=0,d=a.length;c<d;c++){var e=a[c].split("\x3d");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}}return b};ECTFileUploadDownload.setAttributes=function(a,b){var c="string"===typeof a?juic.$(a):a;if(c)for(var d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d])};
ECTFileUploadDownload.createFrame=function(a,b){var c=juic.$(a);c||(c=document.createElement("iframe"),ECTFileUploadDownload.setAttributes(c,{id:a,name:a,src:"/ui/uicore/img/_.gif"}),juic.set(c.style,{display:"none",width:"0px",height:"0px"}),b.appendChild(c),SFDom.toggleAriaAttribute(c,"aria-hidden"));return c};ECTFileUploadDownload.destroyFrame=function(a,b){var c=juic.$(a);c&&(c.src="/ui/uicore/img/_.gif",b.removeChild(c))};
ECTFileUploadDownload.doDownload=function(a){var b=a.downloadURL||ECTFileUploadDownload.STANDARD_DOWNLOAD_URL;delete a.downloadURL;a=ECTFileUploadDownload.mapToQueryString(a);ECTFileUploadDownload.createFrame(ECTFileUploadDownload.DOWNLOAD_FRAME_ID,document.body).src=b+"?"+a};ECTFileUploadDownload.AJAX_UPLOAD_SUPPORTED=!!window.FormData;
extend(ECTFileUploadDownload,ECTAbstractInputField,function(){return{init:function(a,b){this._meta=b;this._name=a;this._controllerName=this._meta.controllerName;assert(this._controllerName,"[ECTFileUploadDownload: init] controllerName is required in meta.");this._count=this._meta.count||1;this._allowedTypes=this._meta.allowedTypes||"*/*";this._sfError.setCloseButtonVisible(!1)},getControllerName:function(){return this._controllerName},isModified:_tryAjaxUpload:function(a){if(!ECTFileUploadDownload.AJAX_UPLOAD_SUPPORTED)return!1;
var b=a.uploadURL||ECTFileUploadDownload.STANDARD_UPLOAD_URL;delete a.uploadURL;var c=new XMLHttpRequest,d=this;c._object&&(c=c._object);c.upload.onprogress=function(a){a.lengthComputable&&(a=(Math.round(100*a.loaded)/a.total).toFixed(2)+" %",d.dispatch(ECTFileUploadDownload.EVENT_UPLOAD,{actionCommand:ECTFileUploadDownload.COMMAND_UPDATE_PROGRESS,progress:a}))};c.onreadystatechange=function(){if(4==c.readyState)if(200!=c.status)resp={success:!1,message:"Failed to handle upload (error: "+c.status+
")."},d.dispatch(ECTFileUploadDownload.EVENT_UPLOAD,{actionCommand:ECTFileUploadDownload.COMMAND_RESPONSE_RECEIVED,response:resp});else{var a=c.responseText.replace(/.*onload=['"]([^'"].*;)['"].*/g,"$1"),b=/\[\"(\d{0,}.*)\"\]\[/g.exec(a),b=window.Component._registry[b[1]],a=/\"\]\((.*)\)/g.exec(a);b.handleUploadResponse(ECTUtil.parseJSON(a[1]))}};for(var e=juic.$(this.id+"_file1"),f=new FormData,e=e.files,g=0;g<e.length;g++)f.append(this._name+(g+1),e[g]);a=ECTFileUploadDownload.mapToQueryString(a);
c.open("POST",b+"?_s.crb\x3d"+window.ajaxSecKey+"\x26"+a,!0);c.send(f);return!0},doUpload:function(a){if(!this._tryAjaxUpload(a)){var b=a.uploadURL||ECTFileUploadDownload.STANDARD_UPLOAD_URL;delete a.uploadURL;a=ECTFileUploadDownload.mapToQueryString(a);var c=juic.$(this.id+"_form"),d=this.id+"_frame";ECTFileUploadDownload.createFrame(d,c);ECTFileUploadDownload.setAttributes(c,{action:b+"?_s.crb\x3d"+window.ajaxSecKey+"\x26"+a,target:d,method:"POST",enctype:"multipart/form-data",encoding:"multipart/form-data"});
this._submitForm()}},handleUploadResponse:_submitForm:function(){try{var a=juic.$(this.id+"_form");a&&a.submit()}catch(b){}},getValue:function(){for(var a=[],b=1;b<=this._count;b++){var c=juic.$(this.id+"_file"+b);c&&a.push(c.value)}return a},_change:function(){this.checkForErrors();this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE})},
renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'"\x3e\x3cform id\x3d"',this.id,'_form" role\x3d"form"\x3e');if(1<this._count)if(ECTFileUploadDownload.AJAX_UPLOAD_SUPPORTED)a.push('\x3cinput id\x3d"',this.id,'_file1" type\x3d"file" accept\x3d"',this._allowedTypes,'" multiple\x3d"multiple" name\x3d"',this._name,"1",'" onchange\x3d"',this.fireCode("_change"),'"\x3e');else for(var b=1;b<=this._count;b++)a.push('\x3cinput id\x3d"',this.id,'_file"',b,' type\x3d"file" accept\x3d"',this._allowedTypes,
'" name\x3d"',this._name,b,'" onchange\x3d"',this.fireCode("_change"),'"\x3e');else a.push('\x3cinput id\x3d"',this.id,'_file1" type\x3d"file" accept\x3d"',this._allowedTypes,'" name\x3d"',this._name,"1",'" onchange\x3d"',this.fireCode("_change"),'"\x3e');a.push("\x3c/form\x3e",this._sfError,"\x3c/div\x3e")},reset:function(){juic.$(this.id+"_form").reset()},cleanup:function(){var a=juic.$(this.id+"_form");a&&ECTFileUploadDownload.destroyFrame(this.id+"_frame",a);ECTFileUploadDownload.destroyFrame(ECTFileUploadDownload.DOWNLOAD_FRAME_ID,
document.body);this.unregister()},setValue:function(a){for(var b=0;b<this._count;b++){var c=juic.$(this.id+"_file"+(b+1));c&&(c.value=a[b])}},bindValidators:function(a){a.required&&(a={message:MSGS.get("COMMON_ERR_DATA_REQUIRED",a.label)},ECTValidationMgr.bindValidator(this,"valueArray",a))}}}());function ECTFontConfig(a,b){this.register();this._init(a,b)}
(function(){function a(a){var b=[];ECTFontConfig.OPTIONS.style.forEach(function(a){b.push(new SFSimpleSelectItem(a.value,'\x3cspan class\x3d"ectFontConfig '+a.className+'"\x3e'+a.label+"\x3c/span\x3e"))});this._checkboxes=new SFCheckboxMultiSelect(b,{_skipEscaping:!0});this._checkboxes.getModel().addEventListener("selectionChanged",this,"_onSelectionChanged");this.setValue(a);this.register()}ar c=juic.Logger.getLogger("ECTFontConfig"),
d={writable:!0,configType:"both"},e={configType:["label","value","both"]},f={color:"string",type:"string",size:"string",style:[null,"object"]},g={label:[null,f],value:[null,f]},f={type:"value",title:MSGS.GO_TITLE_FIELD},k={type:"label",title:MSGS.GO_TITLE_LABEL},l={label:[k],value:[f],both:[f,k]};juic.extend(ECTFontConfig,juic.Component,{_init:function(a,b){b=new juic.Config(b,d,e);this._configTypes=l[b.configType];this._writable=b.writable;this._configTypeLabels=b.configTypeLabels;this.setValue(a);
this._createFontControls()},cleanup:function(){for(var a in this._controls){var b=this._controls[c],c;for(c in b)b[c].cleanup()}this._super()},renderHtml:function(a){a.push('\x3ctable id\x3d"',this.id,'" class\x3d"ECTFontConfig layoutTable ',this.generateFDClasses("table",["no-horizontal-borders","no-vertical-borders"])," ",'"\x3e\x3ctr class\x3d"',this.generateFDClasses("table__row"),'"\x3e');this._configTypes.forEach(function(b){b=b.type;var c=this._controls[b],d=this._value[b];a.push('\x3ctd id\x3d"',
this.id,b,'" class\x3d"configValue ',this.generateFDClasses("table__cell"),'"',d?"":' style\x3d"display: none"','\x3e\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" class\x3d"layoutTable center_align ',this.generateFDClasses("table"),'"\x3e');(b=this._configTypeLabels&&this._configTypeLabels[b])&&a.push('\x3ctr class\x3d"form_field ',this.generateFDClasses("table__row"),'"\x3e\x3ctd class\x3d"field_label ',this.generateFDClasses("table__cell"),'"\x3e\x26nbsp;\x3c/td\x3e\x3ctd class\x3d"field_value ',
this.generateFDClasses("table__cell"),'"\x3e',juic.escapeHTML(b),"\x3c/td\x3e\x3c/tr\x3e");ECTFontConfig.INPUTS.forEach(function(b){var d=c[b.type];a.push('\x3ctr class\x3d"form_field ',this.generateFDClasses("table__row"),'"\x3e\x3ctd class\x3d"field_label ',this.generateFDClasses("table__cell"),'"\x3e');"style"==b.type?a.push('\x3c/td\x3e\x3ctd class\x3d"field_value ',this.generateFDClasses("table__cell"),'"\x3e',d):a.push('\x3clabel class\x3d"',this.generateFDClasses("form-label"),'" for\x3d"',
d.getReferenceId(),'"\x3e',b.title,'\x3c/label\x3e\x3c/td\x3e\x3ctd class\x3d"field_value ',this.generateFDClasses("table__cell"),'"\x3e',d);a.push("\x3c/td\x3e\x3c/tr\x3e")},this);a.push("\x3c/table\x3e\x3c/td\x3e")},this);a.push("\x3c/tr\x3e\x3c/table\x3e")},isModified:setValue:function(a){var b=[];if(1==this._configTypes.length){var d=a;a={};a[this._configTypes[0].type]=d}juic.validate(a,g,b)?(this._value=a,this._updateFontControls()):(b.forEach(,juic.assert(!1,"ECTFontConfig: Invalid value"));this._configTypes.forEach(function(a){a=a.type;var b=juic.$(this.id+a);b&&(b.style.display=this._value[a]?"":"none")},this)},getValue:function(){return 1==this._configTypes.length&&this._value?this._value[this._configTypes[0].type]:this._value},_createFontControls:function(b,c){if(null!=b){c=c||{};var d={},e;for(e in ECTFontConfig.OPTIONS){var f;f="style"==e?new a(c.style):new ectComboDropDown(c[e],{selectOptions:ECTFontConfig.OPTIONS[e],writable:this._writable});
f.__attr=e;f.__type=b;f.addEventListener("change",this,"_onValueChanged");d[e]=f}return d}this._controls={};this._configTypes.forEach(function(a){a=a.type;this._controls[a]=this._createFontControls(a,this._value[a])},this)},_updateFontControls:function(a,b){if(this._controls)if(null!=a)for(var c in ECTFontConfig.OPTIONS)b&&this._controls[a][c].setValue(b[c]);else this._configTypes.forEach(function(a){a=a.type;this._updateFontControls(a,this._value[a])},this)},_onValueChanged:function(a){this._modified=
!0;a=this._value;this._value={};for(var b in a)if(a[b]){this._value[b]={};for(var c in ECTFontConfig.OPTIONS)this._value[b][c]=this._controls[b][c].getValue()}this.dispatch("change",{actionCommand:"fieldChange"})}});juic.set(ECTFontConfig,{FIELD_TYPE:"fontConfig",getClassNames:function(a){if(a){var c=["ectFontConfig"],d;for(d in a){var e=ECTFontConfig.OPTIONS[d],f=a[d];if(e)if(f&&"object"==typeof f)for(var g in f){if(f[g]){var k=b(e,g);k&&c.push(k)}}else(k=b(e,f))&&c.push(k)}return c.join(" ")}return null},
DEFAULTS:{container:function(){return{color:"body",type:"title",size:"large",style:null}},link:function(){return{color:"link",type:"standard",size:"normal",style:null}},field:function(){return{color:"body",type:"standard",size:"normal",style:null}},label:,INPUTS:[{type:"color",title:MSGS.GO_FONT_COLOR},{type:"type",title:MSGS.GO_FONT_TYPE},{type:"size",title:MSGS.GO_FONT_SIZE},{type:"style"}],OPTIONS:{color:[{value:"body",label:MSGS.GO_COLOR_BODY,
className:"globalPortletBodyText"},{value:"link",label:MSGS.GO_COLOR_LINK,className:"globalPortletLinkText"},{value:"dimmed",label:MSGS.GO_COLOR_DIMMED,className:"globalPortletDimmedTextColor"},{value:"alert",label:MSGS.GO_COLOR_ALERT,className:"globalPortletAlertTextColor"},{value:"callout",label:MSGS.GO_COLOR_CALLOUT,className:"globalPortletCalloutTextColor"},{value:"custom1",label:MSGS.GO_COLOR_CUSTOM_1,className:"globalPortletCustom1TextColor"},{value:"custom2",label:MSGS.GO_COLOR_CUSTOM_2,className:"globalPortletCustom2TextColor"}],
type:[{value:"standard",label:MSGS.GO_TYPE_STANDARD,className:"ectStandardText"},{value:"title",label:MSGS.GO_TYPE_TITLE,className:"ectTitleText globalHumanistText"}],size:[{value:"small",label:MSGS.GO_FONT_SIZE_SMALL,className:"ectSizeSmall"},{value:"normal",label:MSGS.GO_FONT_SIZE_NORMAL,className:"ectSizeNormal"},{value:"large",label:MSGS.GO_FONT_SIZE_LARGE,className:"ectSizeLarge"},{value:"xlarge",label:MSGS.GO_FONT_SIZE_XLARGE,className:"ectSizeXLarge"},{value:"xxlarge",label:MSGS.GO_FONT_SIZE_XXLARGE,
className:"ectSizeXXLarge"}],style:[{value:"bold",label:MSGS.GO_STYLE_BOLD,downloadable:!1,className:"ectStyleBold"},{value:"italic",label:MSGS.GO_STYLE_ITALIC,downloadable:!1,className:"ectStyleItalic"},{value:"underline",label:MSGS.GO_STYLE_UNDERLINE,className:"ectStyleUnderline"},{value:"strike",label:MSGS.GO_STYLE_STRIKE,className:"ectStyleStrike"}]}});juic.extend(a,juic.Component,{renderHtml:function(a){a.push(this._checkboxes)},cleanup:function(){this._checkboxes.getModel().removeEventListener("selectionChanged",
this);this._checkboxes.cleanup();this._super()},_onSelectionChanged:getValue:function(){var a={};this._checkboxes.getSelectedValues().forEach(;return a},setValue:function(a){var b=[],c;for(c in a)a[c]&&b.push(c);this._checkboxes.setSelectedValues(b)}})})();
"undefined"==typeof ECTFieldsFactory&&(window.ECTFieldsFactory=function(){var a={inputSize:30,maxDisplayed:5,valueDelim:"|",defaultValueDelim:"|"},b=[];return{instantiateFields:function(b,d){var c=ECTUtil.getValueFromData(b),f=ECTUtil.isEmpty(b)?null:b.encryptedValue;if((d.piiField||d.PIIField)&&(c||f)&&d.type!=ECTConstants.TYPE_CASCADE)return f=f?new ECTPIIField(f,d):new ECTPIIField(c,d),f.metaId=d.id,f;f=this.getFieldFromCustomFactory(b,d);if(!f)switch(d.type){case ECTHourMinuteField.FIELD_TYPE:f=
new ECTHourMinuteField(c,d);break;case ECTTimeInput.FIELD_TYPE:f=new ECTTimeInput(c,d);break;case ECTTimeSelect.FIELD_TYPE:f=new ECTTimeSelect(c,d);break;case ECTConstants.TYPE_FIELDSGROUP:case ECTConstants.TYPE_FGROUPCAMEL:c=set({nestedForm:!0},d);f=new ECTReadWriteForm(d.fieldsMeta,b.fieldsData,c);break;case ECTCalendar.FIELD_TYPE_DATE:case ECTCalendar.FIELD_TYPE_CAL:f=new ECTCalendar(c,d);break;case ECTPicklistAutoComplete.FIELD_TYPE:f=new ECTPicklistAutoComplete(c,d);break;case ECTCheckBox.FIELD_TYPE_CHECK:case ECTCheckBox.FIELD_TYPE_CHECK.toLowerCase():case ECTCheckBox.FIELD_TYPE_BOOL:f=
new ECTCheckBox(c,d.checked,d.label);f.setEnabled(d.enabled);f.setWritable(d.writable);f.setRequired(d.required);break;case ECTSalaryField.FIELD_TYPE:case ECTSalaryField.FIELD_TYPE.toLowerCase():f=new ECTSalaryField(c,d);break;case ECTCalcField.FIELD_TYPE_CALC:case ECTCalcField.FIELD_TYPE_AMOUNT:f=new ECTCalcField(c,b&&b.value,d);break;case ECTTextArea.FIELD_TYPE:case ECTTextArea.FIELD_TYPE.toUpperCase():f=new ECTTextArea(c,d);break;case ECTFieldWithContext.FIELD_TYPE_FWC:case ECTFieldWithContext.FIELD_TYPE_LOCAL:b=
b||{contextData:{recordId:null,fieldsData:[]}};f=new ECTFieldWithContext(b,d);break;case ECTFieldWithCustomContext.FIELD_TYPE:f=new ECTFieldWithCustomContext(b,d);break;case ECTConstants.TYPE_FINDUSER:case ECTConstants.TYPE_FINDUSER.toLowerCase():f=new ECTFindUserField(c,d);break;case ECTConstants.TYPE_SELECT:case ECTConstants.TYPE_SELECT.toLowerCase():d.inactiveOptionsMap=d.inactiveOptionsMap||{};b.inActive&&(d.inactiveOptionsMap[c]={value:c,label:c,escape:!0,inactive:!0});f=new ectComboDropDown(c,
d);break;case ECTConstants.TYPE_DATAGRID:f=new ECTDataGrid(c||b||[],d);break;case ECTConstants.TYPE_LAZYDATAGRID:f=new ECTLazyDataGrid(c||b||[],d);break;case ECTConstants.TYPE_PAGINATEDDATAGRID:f=new ECTPaginatedListWithDataGrid(c||b||[],d);break;case ECTDataGridWithDetails.FIELD_TYPE:f=new ECTDataGridWithDetails(c||b||[],d);break;case ECTConstants.TYPE_CASCADE:f=new ECTCascadeField(b,d);break;case ECTConstants.TYPE_USER:d.displayBizPhone=!0,d.displayJobTitle=!0;case ECTConstants.TYPE_FOUNDATION_AUTOCOMPLETE:f=
new ECTFoundationAutoComplete(c,d);break;case ECTConstants.TYPE_MULTIPLE_RELATION:f=new ECTMultipleRelation(b,d);break;case ECTCommonFileUpload.fieldType:f="object"===typeof c?c:c?eval("("+c+")"):"";f=new ECTCommonFileUpload(f,d);break;case "HRIS_MULTIPLICABLE":for(var c=c?eval("("+c+")"):"",f=[],g=[],k=0,l=c.length;k<l;k++)f.push(c[k].userId),g.push(c[k].userDisplayValue);f=f.join("|");g=g.join("|");c=set({writable:d.writable,defaultValue:g,usePhoto:d.usePhotoForAutoComplete,userNameHidden:d.autoCompleteHideUserName,
label:d.label},a);f=new Multiplicable(f,"multiplicable",d.columns,c);break;case ECTFileUploadDownload.FILED_TYPE:f=new ECTFileUploadDownload(d.name,d);break;case ECTRadioGroup.FIELD_TYPE:f=d.fieldsMeta[0];f=new ECTRadioGroup(c,f.selectOptions,f.label,d.label);break;case ECTURLField.FIELD_TYPE:f=new ECTURLField(c,d.label);break;case ECTHiddenField.FIELD_TYPE:f=new ECTHiddenField(c);break;case ECTInputWithNamespace.FIELD_TYPE:f=new ECTInputWithNamespace(c,d);break;case ECTDocUrlLink.FIELD_TYPE:f=new ECTDocUrlLink(c,
d);break;case ECTSimpleLinkField.FIELD_TYPE:case ECTSimpleLinkField.EC_FIELD_TYPE:f=new ECTSimpleLinkField(c,d);break;case ECTFontConfig.FIELD_TYPE:f=new ECTFontConfig(c,d);break;case ECTDateTime.FIELD_TYPE:f=new ECTDateTime(c,d);break;case ECTTimeAccountBalanceField.FIELD_TYPE:f=new ECTTimeAccountBalanceField(c,d);break;case ECTWorkScheduleField.FIELD_TYPE:f=new ECTWorkScheduleField(c,d);break;default:f=new ECTInputBox(c,d)}d.writable?this._assignValidations(f,d):"";f.metaId=d.id;f.metaDataObj=d;
"function"==typeof f.setFontConfig&&d.fontConfig&&f.setFontConfig(d.fontConfig);d.onChange&&f.setOnChangeParams&&f.setOnChangeParams(d.onChange);return f},_assignValidations:function(a,b){ECTValidationMgr&&b.type!==ECTConstants.TYPE_CASCADE&&(a.bindCommonValidators&&a.bindCommonValidators(b),a.bindValidators&&a.bindValidators(b))},getFormField:getField:function(a,b){var c=this.instantiateFields(a,b);this._fields[b.id]={type:b.type,field:c};return c},
setCustomFieldsFactory:function(a){b.push(a)},getFieldFromCustomFactory:function(a,d){if(b.length){for(var c,f=0,g=b.length;f<g&&!(c=b[f].getField(a,d));f++);return c}}}}());function ECTPIIField(a,b){this.register();this.init(a,b)}
extend(ECTPIIField,ECTAbstractInputField,{_warnMsg:MSGS.COMMON_Sensitive_Info_warning_msg,_maskedText:"*********",_readText:MSGS.EMPFILE_HRIS_CLICK_TO_VIEW,_editText:MSGS.EMPFILE_HRIS_CLICK_TO_EDIT,_anchorClass:"editable",_ectPIIReadInputClass:" ectPIIReadInput",_masked:"true",init:function(a,b){this._controllerInstance=AjaxService.getMBeanInstance("FieldValueDecryptionController");this._value=a;this._config=b;this.apiFlag=!1;var c=[{label:MSGS.COMMON_Ok,eventName:ECTConstants.EVENT_APPROVE,active:!0},
{label:MSGS.COMMON_Cancel,eventName:ECTConstants.EVENT_HIDE,active:!1}];this._textForConfirm=new SFLabel(this._warnMsg);this.confirmDialog=new ECTDialogBox(MSGS.COMMON_Confirm,this._textForConfirm,c,400);this.confirmDialog.addEventListener(ECTConstants.EVENT_ACTION,this);if("object"===typeof b)for(var d in b)this["_"+d]=b[d];this._oldValue=a;this._isRequired=b&&b.required;this._internalField=this._createInternalFieldBasedOnMeta(a,b);this.setWritable(b.writable)},_createInternalFieldBasedOnMeta:function(a,
b){var c=null;switch(b.type){case ECTCalendar.FIELD_TYPE_DATE:c=new ECTCalendar(a,b);break;case ECTPicklistAutoComplete.FIELD_TYPE:this._selectFieldValue=a;c=new ECTPicklistAutoComplete(a,b);break;case ECTConstants.TYPE_CASCADE:c=new ECTCascadeField(a,b);break;case "TimeOffWorkSchedule":b.manageWorkScheduleAllowed=!1;c=new ECTWorkScheduleField(a,b);break;case ECTConstants.TYPE_USER:b.displayBizPhone=!0,b.displayJobTitle=!0;case ECTConstants.TYPE_FOUNDATION_AUTOCOMPLETE:c=new ECTFoundationAutoComplete(a,
b)}c&&(c.addEventListener("externalBlur",this,"_internalFieldBlur"),c.addEventListener(ECTConstants.EVENT_ACTION,this,"dispatchEvent"),c.addEventListener(ECTConstants.EVENT_CHANGE,this,"dispatchEvent"),this._ectPIIReadInputClass+=" internalField");return c},getFields:function(){return this._internalField.getFields?this._internalField.getFields(arguments):null},getFACField:function(){return this._internalField.getFACField?this._internalField.getFACField(arguments):null},getValueObj:function(){if(this._internalField&&
this._internalField.getValueObj)return this._internalField.getValueObj(arguments);this.getValue();return null},_internalFieldBlur:handleEvent:function(a){var b=this._config.logReadAccess;switch(a.type){case ECTConstants.EVENT_ACTION:switch(a.actionCommand){case ECTConstants.EVENT_APPROVE:b&&"read"==this._state?this.apiFlag?this._unmaskFieldValue():this.getDecryptedData():this._unmaskFieldValue()}}},_touchStart:function(a){a=SFDOMEvent.getTarget(a||window.event);
a.id!=this.id+"_read"&&a.id!=this.id+"_write"&&(this._maskField(),SFDOMEvent.removeListener(window.document,"touchstart",this._touchStart,this))},_renderReadHtml:function(a){var b=this._readText;a.push("\x3cspan class\x3d'",this._readOnlyClass,"'\x3e");a.push("\x3ca href\x3d'javascript:void(0);' title\x3d'",MSGS.COMMON_Sensitive_Info,"' id\x3d'",this.id,"_aRead' onclick\x3d'",this.fireCode("_focus","read"),"'"," class\x3d'",this._anchorClass," ",this.generateFDClasses("link"),"'\x3e",Util.escapeHTML(this._maskedText),
" ",b,"\x3c/a\x3e");a.push("\x3cinput title\x3d'",Util.escapeHTML(this._value),"' class\x3d'",this._readOnlyClass+this._ectPIIReadInputClass," ",this.generateFDClasses("input"),"' type\x3d'text' id\x3d'"+this.id,"_read' onblur\x3d'",this.fireCode("_blur"),"' style\x3d'display:none;'");this.isFioriFDEnabled()?a.push(" readonly "):a.push(" readonly\x3d'readonly' ");this._renderAriaLabelledBy(a);a.push(' aria-required\x3d"',this._isRequired,'"');a.push(" value\x3d'",Util.escapeHTML(this._value),"'\x3e\x3c/input\x3e");
a.push("\x3c/span\x3e")},_renderWriteHtml:function(a){this._internalField?a.push("\x3cspan id\x3d'"+this.id,"_write' style\x3d'display: none;'\x3e",this._internalField,"\x3c/span\x3e"):(a.push("\x3cinput class\x3d'writeComp formElement ",this.generateFDClasses("input"),"' type\x3d'text' id\x3d'",this.id,"_write","' onblur\x3d'",this.fireCode("_blur"),"' style\x3d'display:none;'"),a.push(' onkeydown\x3d"',this.fireCode("_keyDown"),'"'),this._renderAriaLabelledBy(a),a.push(' aria-required\x3d"',this._isRequired,
'"'),a.push(" value\x3d'",Util.escapeHTML(this._value),"'\x3e\x3c/input\x3e"))},_renderWriteHtmlwithLink:function(a){var b=this._editText;a.push("\x3cspan class\x3d'writeComp'\x3e");a.push("\x3ca href\x3d'javascript:void(0);' title\x3d'",MSGS.COMMON_Sensitive_Info,"' id\x3d'",this.id,"_aWrite' onclick\x3d'",this.fireCode("_focus","write"),"'"," class\x3d'",this._anchorClass," ",this.generateFDClasses("link"),"'\x3e",Util.escapeHTML(this._maskedText)," ",b,"\x3c/a\x3e");this._internalField?this._renderWriteHtml(a):
this._drawRoundedCorners(a,"textBox");a.push("\x3c/span\x3e")},renderHtml:function(a){this._writable&&this._renderWriteHtmlwithLink(a);this._renderReadHtml(a)},_renderAriaLabelledBy:function(a){this._labelledby&&a.push(' aria-labelledby\x3d"',this._labelledby,'"')},_keyDown:function(a){a=a||window.event;a=SFDOMEvent.getKeyName(a);switch(a){case "TAB":this.checkForErrors();break;default:if(this._autoFormater&&"BACKSPACE"!==a){this._formatTimer&&(clearTimeout(this._formatTimer),delete this._formatTimer);
var b=this;this._formatTimer=setTimeout(function(){var a=juic.$(b.id+"_write"),d=b._autoFormater.getFormattedString(a.value);a.value=d;b.setValue(d)},250)}}},setFormat:function(a){this._autoFormater||(this._autoFormater=new ECTKeyPressAutoFormatter(""));this._autoFormater.setStringFormat(a)},getValue:function(){if(this._internalField)return this._internalField.getValue();try{var a=JSON.parse(this._value);return a.value?a.value:this._value}catch(b){return this._value}},getConsumableValueFromInternalField:function(){if(this._internalField)switch(this._config.type){case ECTCalendar.FIELD_TYPE_DATE:return this._internalField.getValueLocalFormat();
case ECTPicklistAutoComplete.FIELD_TYPE:return this._internalField.getDisplayText();case ECTConstants.TYPE_USER:case ECTConstants.TYPE_FOUNDATION_AUTOCOMPLETE:case "TimeOffWorkSchedule":return this._internalField.getValueObj().primaryDisplayText}},setValue:function(a){this._internalField?this._internalField.setValue(a):this._value=a;this._formatTimer&&clearTimeout(this._formatTimer);this.checkForErrors()||"write"!==this._state||this._change()},setErrorMessage:function(a){this._sfError.setValue(a);
this._errorMsg=a},isModified:function(){return this._modified=this._internalField?this._internalField.isModified():this._value.trim()!==this._oldValue},cleanup:function(){this._internalField&&this._internalField.cleanup();this._textForConfirm.cleanup();this.confirmDialog.cleanup();delete this._internalField;delete this._textForConfirm;delete this.confirmDialog;this.unregister()},reset:function(){this.isModified()&&(this.setValue(this._oldValue),this._maskField(),this.dispatch(ECTConstants.EVENT_CHANGE,
{actionCommand:ECTConstants.EVENT_FIELD_UNCHANGE,hasError:this._hasError}))},setFocus:function(a){},_maskField:function(){juic.$(this.id+"_aRead").style.display="";juic.$(this.id+"_read").style.display="none";this._writable&&(juic.$(this.id+"_aWrite").style.display="",juic.$(this.id+"_write").style.display="none");this._masked=!0},_unmaskField:function(){this.setErrorMessage("");if("read"==this._state){var a=juic.$(this.id+"_read");a&&(a.value=this._internalField?this.getConsumableValueFromInternalField():
this.getValue(),a.title=a.value,juic.$(this.id+"_aRead").style.display="none",a.style.display="",a.focus())}"write"==this._state&&(a=juic.$(this.id+"_write"))&&(a.value=this._internalField?this.getConsumableValueFromInternalField():this.getValue(),juic.$(this.id+"_aWrite").style.display="none",a.style.display="",this._internalField?this._internalField.setFocus(!0):a.focus());this._sfError.setVisibility(!1);this._masked=!1},_focus:function(a,b){b&&SFDOMEvent.stopEvent(b);this._state=a;this.confirmDialog.showDialog()},
_blur:function(a){this._maskField();var b=this;setTimeout(function(){var c;try{c=SFDOMEvent.getTarget(a)}catch(d){c=juic.$(b.id+"_write")}b._internalField||(c.value=c.value.trim(),b.setValue(c.value))},50)},_unmaskFieldValue:function(){this._unmaskField();this.confirmDialog.close();SFDOMEvent.addListener(window.document,"touchstart",this._touchStart,this)},showErrorDialog:function(a){this._dialog||(this._dialog=new ECTResponseDialog(ECTConstants.TYPE_ERROR,a.global[0],MSGS.COMMON_Err));this._dialog.show()},
getDecryptedData:function(a){var b=this;this._controllerInstance.getDecryptedFieldValue(window.selectedUserID,this._config.id,this._value,{callback:function(a){"success"===a.status?(b.apiFlag=!0,b._value=a.values.nv,b.setValue(a.values.nv),b._unmaskFieldValue()):(b.confirmDialog.close(),b.showErrorDialog(a))}})}});ECTBaseLabel.prototype=function(){return set(new Component,{setRequired:function(a){this._isRequired=a},_renderRequiredSpan:function(a){this._isRequired&&a.push('\x3cspan id\x3d"'+this.id+'_requiredSpan" class\x3d"requiredAsterix ',ECTUtil.getRedTextColor(),'"\x3e\x26nbsp;*\x26nbsp;\x3c/span\x3e')}})}();function ECTLabel(a,b,c,d){this.register();this.init(a,b,c,d);this.setRequired(b)}
juic.extend(ECTLabel,ECTBaseLabel,{init:function(a,b,c,d){this.text=Util.escapeHTML(a);this._forValue=c;this._isFioriFD=Util.isFioriFDEnabled();this._cssClass=d?d:this._isFioriFD?b?this.generateFDClasses("form-label",["required"]):this.generateFDClasses("form-label"):"ectLabel"},renderHtml:function(a){a.push('\x3clabel class\x3d"',this._cssClass,'" id\x3d"',this.id,'"');this._forValue&&a.push(' for\x3d"',this._forValue,'"');a.push("\x3e");a.push(this.text,"\x3c/label\x3e");this._isFioriFD||this._renderRequiredSpan(a)}});
function ECTLabelProfileUpdate(a,b,c){this.register();this.init(a,b,c);this.setRequired(b)}juic.extend(ECTLabelProfileUpdate,ECTBaseLabel,{init:function(a,b,c){this.text=Util.escapeHTML(a);this._forValue=c},renderHtml:function(a){this._renderRequiredSpan(a);a.push('\x3clabel id\x3d"',this.id,'" class\x3d"',this.generateFDClasses("form-label"),'"');this._forValue&&a.push(' for\x3d"',this._forValue,'"');a.push("\x3e");a.push(this.text,"\x3c/label\x3e")}});
function ECTLabelDgrid(a,b,c,d){this.register();this.init(a,b,c,d);this.setRequired(b)}
juic.extend(ECTLabelDgrid,ECTBaseLabel,{init:function(a,b,c,d){this.text=Util.escapeHTML(a);(this._columnMetaId=c)&&this._checkHelpLink();this._forValue=d},renderHtml:function(a){a.push('\x3clabel id\x3d"',this.id,'" class\x3d"ectLabelDgridLabel ',this.generateFDClasses("form-label"),'"');this._forValue&&a.push(' for\x3d"',this._forValue,'"');a.push("\x3e");a.push(this.text,"\x3c/label\x3e");this._renderRequiredSpan(a);this._renderHelpLink(a)},_checkHelpLink:function(){var a=window.FieldsHelpLinkMap&&
window.FieldsHelpLinkMap[this._columnMetaId]?window.FieldsHelpLinkMap[this._columnMetaId]:null;window.isHelpAvailable&&a&&"label"===a.attachTo&&(this._hasHelpLink=!0)},_renderHelpLink:function(a){this._hasHelpLink&&a.push("\x3ca href\x3d'javascript:void(0);' title\x3d'",MSGS.COMMON_Help,"' id\x3d'",this.id,"_helpLink' aria-haspopup\x3d'true' aria-controls\x3d'",this._columnMetaId,"' aria-describedby\x3d'",this.id,"' class\x3d'helpLinkLabelDGrid' onclick\x3d'",this.fireCode("_showHelpPopup"),"' \x3e\x26nbsp;\x3c/a\x3e ")},
_showHelpPopup:function(){ECTHelpPopup.showFieldHelp(this.id+"_helpLink",this._columnMetaId)}});function ECTSimpleLabel(a,b,c,d){this.register();this.init(a,b,c,d)}
ECTSimpleLabel.prototype=function(){return set(new Component,{init:function(a,b,c,d){this.text=Util.escapeHTML(a,"\x3cbr /\x3e");a=Util.isFioriFDEnabled();this._cssClass=d?d:b?a?this.generateFDClasses("form-label"):"formLabel":a?this.generateFDClasses("text"):"formField";this._forValue=c},setValue:function(a){this.text=Util.escapeHTML(a);if(a=juic.$(this.id))a.innerHTML=this.text},renderHtml:function(a){a.push('\x3clabel id\x3d"',this.id,'" class\x3d"',this._cssClass,'"');this._forValue&&a.push(' for\x3d"',
this._forValue,'"');a.push("\x3e");a.push(this.text,"\x3c/label\x3e")}})}();function ECTStrikedLabel(a,b,c){this.register();this._text=Util.escapeHTML(a);this._cssClass=b;this._forValue=c}
ECTStrikedLabel.prototype=function(){return set(new Component,{renderHtml:function(a){a.push('\x3clabel id\x3d"',this.id,'" class\x3d"lineThrough ',this.generateFDClasses("form-label")," ",this._cssClass?this._cssClass:"",'"');this._forValue&&a.push(' for\x3d"',this._forValue,'"');a.push("\x3e");a.push(this._text,"\x3c/label\x3e")}})}();function ECTEDLabelPlusOldValue(a,b){this.register();this.init(a,b)}
ECTEDLabelPlusOldValue.prototype=function(){return set(new Component,{init:function(a,b){this._currentLabels=a||[];this._oldLabels=b||[]},renderHtml:function(a){a.push('\x3cdiv id \x3d "'+this.id+'" class\x3d"labelWithOldValue"\x3e');a.push('\x3cspan id \x3d "'+this.id+'_label"\x3e');for(var b=0,c=this._currentLabels.length;b<c;b++)this._currentLabels[b].renderHtml(a);a.push('\x3c/span\x3e\x3cspan id \x3d "'+this.id+'_oldlabel" class\x3d"struck_label"\x3e');b=0;for(c=this._oldLabels.length;b<c;b++)this._oldLabels[b].renderHtml(a);
a.push("\x3c/span\x3e\x3c/div\x3e")},cleanup:function(){for(var a=0,b=this._currentLabels.length;a<b;a++)this._currentLabels[a].cleanup();a=0;for(b=this._oldLabels.length;a<b;a++)this._oldLabels[a].cleanup();this.unregister()}})}();function ECTLabelWithGroupCalcTooltip(a,b,c){this.register();this.init(a,b,c||{})}
ECTLabelWithGroupCalcTooltip.prototype=function(){return set(new Component,{init:function(a,b,c){this._isFioriFD=Util.isFioriFDEnabled();this._text=a;this._cssClass=c.cssClass||"ECTLabelWithTooltip";this._requiredClass=(this._required=c.required||!1)?"":"not_required";this.itemsinCallout=b&&b.length;this.setArrayOfChanges(b,c)},setArrayOfChanges:function(a,b){this._tooltip&&this._tooltip.cleanup();this._tooltip=new ECTPayGroupCalculationTooltip(a,b);this._tooltip.addEventListener(ECTConstants.EVENT_HIDE,
this)},renderHtml:function(a){a.push('\x3cspan class\x3d"required_span ',this._requiredClass,' "\x3e\x26nbsp;*\x26nbsp;\x3c/span\x3e');a.push('\x3clabel id\x3d"',this.id,'" class\x3d"',this._cssClass," ",this.generateFDClasses("form-label"),'"\x3e',this._text,"\x3c/label\x3e");this._isFioriFD?(a.push('\x3cbutton aria-describedby\x3d"',this.id,'" aria-haspopup\x3d"true" class\x3d"',this.generateFDClasses("button",["transparent","compact"]),'" onclick\x3d"',this.fireCode("_showTooltip"),'" id\x3d"',
this._getIconDomId(),'"\x3e'),a.push('\x3ci class\x3d"',Util.generateIconClasses("question-mark"),'"\x3e\x3c/i\x3e'),a.push("\x3c/button\x3e")):(a.push('\x3ca aria-describedby\x3d"',this.id,'" '),a.push('href\x3d"javascript:void(0);" '),a.push('title\x3d"',MSGS.ECT_TOOLTIP,'" '),a.push('aria-haspopup\x3d"true" style\x3d"border-bottom:0;" class\x3d"',this._cssClass,'_qmark" onclick\x3d"',this.fireCode("_showTooltip"),'" id\x3d"',this._getIconDomId(),'"\x3e\x26nbsp;\x3c/a\x3e'))},_showTooltip:function(){if(!this._callOut){var a=
{role:"tooltip",useNameAnchor:!0,originOptions:{pointerOffset:30},header:this._text};10<=this.itemsinCallout&&(a.height=350,a.scrollable=!0);this._callOut=new SFCalloutPopup(a);this._callOut.setContent(this._tooltip)}this._callOut.show(this._getIconDomId(),{refocusRef:this._getIconDomId()});this._callOut.addEventListener("clickedOutsidePopup",this._callOut,"hide")},handleEvent:function(a){a.type==ECTConstants.EVENT_HIDE&&(this._tooltipVisible=!1)},_getIconDomId:function(){return this.id+"_qmark"},
cleanup:function(){this._tooltip&&this._tooltip.cleanup()}})}();function ECTPayGroupCalculationTooltip(a,b){this.register();this.init(a,b||{})}
ECTPayGroupCalculationTooltip.prototype=function(){return set(new Component,{init:function(a,b){this._arrayOfChanges=a;b&&b.id&&(this._isCompaRatio="compInfo-compa-ratio"==b.id,this._isPayRange="compInfo-range-penetration"==b.id||"compInfo-compa-ratio"==b.id)&&(this._associtationsToPayRange=this._arrayOfChanges[0]||{},this._annualizedSalary=this._arrayOfChanges[1]||{},this._isCompaRatio?this._payRangeMidPoint=this._arrayOfChanges[2]||{}:(this._payRangeMin=this._arrayOfChanges[2]||{},this._payRangeMax=
this._arrayOfChanges[3]||{}),this._FTE=this._arrayOfChanges[this._isCompaRatio?3:4]||{},this._payRange=this._arrayOfChanges[this._isCompaRatio?4:5]||{});this._cssClass=b.cssClass||"ECTTooltip"},_isDifferent:function(a,b){return null!==a&&""!==a.trim()&&b!==a?!0:!1},renderHtml:function(a){a.push('\x3ctable summary\x3d"" class\x3d"ECTChangeTable ',this._isPayRange?" PayRange":"",'" id\x3d"',this.id,'" \x3e');if(this._isPayRange){var b=JSON.parse(this._associtationsToPayRange.label),c=b.associations.join(", "),
b=b.range;a.push("\x3ctr\x3e\x3ctd\x3e",Util.escapeHTML(c),"\x3c/td\x3e\x3ctd\x3e\x3d\x3e\x3c/td\x3e");a.push("\x3ctd\x3e",Util.escapeHTML(b),"\x3c/td\x3e\x3c/tr\x3e");this._isCompaRatio?(c=this._annualizedSalary.label+" ("+this._annualizedSalary.newValue+") ",b=this._payRangeMidPoint.label+" ("+this._payRangeMidPoint.newValue+")  * "+(this._FTE.label+" ("+this._FTE.newValue+") ")):(c=this._annualizedSalary.label+" ("+this._annualizedSalary.newValue+")  - "+(this._payRangeMin.label+" ("+this._payRangeMin.newValue+
") ")+" * "+(this._FTE.label+" ("+this._FTE.newValue+") "),b=this._payRangeMax.label+" ("+this._payRangeMax.newValue+")  * "+(this._FTE.label+" ("+this._FTE.newValue+") ")+" - "+(this._payRangeMin.label+" ("+this._payRangeMin.newValue+") ")+" * "+(this._FTE.label+" ("+this._FTE.newValue+") "));a.push('\x3ctr class\x3d"secRow"\x3e\x3ctd\x3e\x3cspan\x3e\x3cdiv\x3e',c,'\x3c/div\x3e\x3cdiv class\x3d"divisor"\x3e',b,"\x3c/div\x3e\x3c/span\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;* 100\x3c/span\x3e\x3c/td\x3e");
a.push("\x3ctd\x3e\x3d\x3c/td\x3e\x3ctd\x3e",this._payRange.newValue,"\x3c/td\x3e\x3c/tr\x3e")}else{c=0;for(b=this._arrayOfChanges.length;c<b-1;c++){var d=this._arrayOfChanges[c];a.push('\x3ctr\x3e\x3ctd class\x3d"label"\x3e',d.label,'\x3c/td\x3e\x3ctd class\x3d"value ',this._isDifferent(d.oldValue,d.newValue)?"changed":"",'"\x3e',d.newValue,"\x3c/td\x3e");a.push('\x3ctd class\x3d"oldValue ',this._isDifferent(d.oldValue,d.newValue)?"strikened":"hide",'"\x3e',d.oldValue,"\x3c/td\x3e\x3c/tr\x3e")}a.push('\x3ctr\x3e\x3ctd colspan\x3d"3"\x3e\x3chr/\x3e\x3c/td\x3e\x3c/tr\x3e');
d=this._arrayOfChanges[this._arrayOfChanges.length-1];a.push('\x3ctr\x3e\x3ctd class\x3d"label bold"\x3e',d.label,'\x3c/td\x3e\x3ctd class\x3d"value ',this._isDifferent(d.oldValue,d.newValue)?"changed":"",'"\x3e',d.newValue,"\x3c/td\x3e");a.push('\x3ctd class\x3d"oldValue ',this._isDifferent(d.oldValue,d.newValue)?"strikened":"hide",'"\x3e',d.oldValue,"\x3c/td\x3e\x3c/tr\x3e")}a.push("\x3c/table\x3e")},_close:function(){this.dispatch(ECTConstants.EVENT_HIDE)}})}();
function ECTStateLabel(a,b){this.register();this.init(a,b)}
ECTStateLabel.prototype=function(){return set(new Component,{init:renderHtml:function(a){a.push('\x3cdiv class\x3d"stateLabel"\x3e');a.push('\x3cspan id\x3d"',this.id,'_old"');this._newValue&&a.push('class\x3d"old"');a.push("\x3e",Util.escapeHTML(this._value),"\x3c/span\x3e");a.push('\x3cspan id\x3d"',this.id,'_new" class\x3d"new"\x3e');this._newValue&&a.push(Util.escapeHTML(this._newValue));a.push("\x3c/span\x3e");a.push("\x3c/div\x3e")},setNewValue:function(a){this._newValue=
a;a=juic.$(this.id+"_old");"old"!==a.className&&(a.className="old");juic.$(this.id+"_new").innerHTML=Util.escapeHTML(this._newValue)}})}();function ECTHiddenField(a){this.register();this._oldValue=a;this.setValue(a)}ECTHiddenField.FIELD_TYPE="HIDDEN";extend(ECTHiddenField,juic.Component,{setValue:function(a){this._value=a||""},getValue:function(){return this._value},reset:function(){this.setValue(this._oldValue)},renderHtml:function(a){}});
function ECTFOAddressView(a,b,c){this.register();this.init(a,b,c)}
ECTFOAddressView.prototype=function(){return set(new Component,{init:function(a,b,c){this._fieldsMeta=a;this._fieldsData=b;this._title=c;this._address=[];this._city_state_province_zipcode=[];this._country=null;this._orderFields()},_orderFields:function(){for(var a=0,b=this._fieldsMeta.length;a<b;a++)switch(this._fieldsMeta[a].id){case "businessAddress-address1":case "businessAddress-address2":case "businessAddress-address3":this._address.push(this._fieldsData[a].defaultValue);break;case "businessAddress-city":case "businessAddress-state":case "businessAddress-zip-code":case "businessAddress-province":case "businessAddress-county":this._city_state_province_zipcode.push(this._fieldsData[a].defaultValue);
break;case "businessAddress-country":this._country=this._fieldsData[a].defaultValue}},renderHtml:function(a){a.push('\x3cdiv class\x3d"foAddressView"\x3e');a.push('\x3cdiv class\x3d"addressTitle '+Util.generateFDClasses("text")+'"\x3e',this._title,"\x3c/div\x3e");for(var b=0,c=this._address.length;b<c;b++)a.push('\x3cdiv class\x3d"address '+Util.generateFDClasses("text")+'"\x3e',this._address[b],"\x3c/div\x3e");a.push('\x3cdiv class\x3d"'+Util.generateFDClasses("text")+'"\x3e');b=0;for(c=this._city_state_province_zipcode.length;b<
c;b++)a.push('\x3cspan style\x3d"margin-right:5px"\x3e',this._city_state_province_zipcode[b],"\x3c/span\x3e");a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"'+Util.generateFDClasses("text")+'"\x3e',this._country,"\x3c/div\x3e");a.push("\x3c/div\x3e")}})}();function ECTTimeSelect(a,b){this.register();this.init(a,b)}ECTTimeSelect.FIELD_TYPE="ECTTIMESELECT";ECTTimeSelect.UNIT={};ECTTimeSelect.UNIT.DAYS="DAYS";ECTTimeSelect.UNIT.HOURS="HOURS";ECTTimeSelect.UNIT.MINUTES="MINUTES";
ECTTimeSelect.INPUTMETHOD={};ECTTimeSelect.INPUTMETHOD.FREE="FREE";ECTTimeSelect.INPUTMETHOD.DROPDOWN="AVAILABLE_VALUES";ECTTimeSelect.INPUTMETHOD.HHMM="HOURS_MINUTES";
juic.extend(ECTTimeSelect,ECTInputBox,{HHMM_NUM_CHARS_HOURS:3,init:function(a,b){this._oldValue=this._value=a||null;this._displayValue=this._getDisplayValue();b.maxLength=b.maxLength&&-1===b.maxLength?null:b.maxLength;this._config=b||{};this.setWritable(!1!==b.writable);this._enabled=!!this._config.enabled;this._title="undefined"==typeof this._config.title?MSGS.COMMON_Click_to_edit:this._config.title;!this._enabled||""!==this._value&&null!==this._value||(this._value=this._title);this._displayValue=
null;this._targetUnit=ECTTimeSelect.UNIT.DAYS;this._inputMethod=null;this._labelProvider=new ECTTimeSelect.LabelProvider(this._targetUnit);this._availableInput=new ECTTimeSelect.AllowedValuesInput(null,this._config,this._labelProvider);this._freeInput=new ECTTimeSelect.FreeInput(null,this._config,this._labelProvider);this._config.numCharsHours=this.HHMM_NUM_CHARS_HOURS;this._hhmmInput=new ECTTimeSelect.HHMMInput(null,this._config,this._labelProvider);this._listenToEvents();this._writable=!0;if(this._enabled){var c=
this;setTimeout(100)}this.jQueryId="#"+this.id.replace(/:/g,"\\:")},setTargetUnit:function(a){this._targetUnit=a;this._availableInput.setTargetUnit(a);this._freeInput.setTargetUnit(a);this._hhmmInput.setTargetUnit(a)},setDisplayValue:function(a,b){this._displayValue={days:a,hours:b};this._setTargetQuantity(a,b);this._updateLabels()},_setTargetQuantity:function(a,b){this._targetQuantity=this._targetUnit==ECTTimeSelect.UNIT.DAYS?a:b},setValue:function(a){this._value=a;var b=
this._getTimeInputControlForCurrentMethod();b&&(b.setValue(a),b.checkForErrors())},setDeductionValue:function(a,b,c){this._deductionQuantity=a;this._deductionQuantityFormatted=b;a=this._hasDeviatingDeduction();c?this._showDeviatingDeductionNotification(!1):this._showDeviatingDeductionNotification(a)},_hasDeviatingDeduction:function(){return null==this._deductionQuantity||null==this._value?!1:this._deductionQuantity!=this._value},_showDeviatingDeductionNotification:function(a){var b=juic.$(this.id+
"_notification");b&&(b.style.display=a?"inline":"none",a?(a=new ECTTimeSelect.DeductionNotification({unit:this._targetUnit,targetQuantity:this._value,deductionQuantity:this._deductionQuantity},this._labelProvider),b=juic.createRenderContext(),b.push(a),b.renderInto(this.id+"_notification")):b.innerHTML="")},setInputMethod:function(a){this._inputMethod=a;var b=juic.$(this.id+"_inputfieldcontainer");b&&(SFDom.removeClass(b,"inputMethodShowFree"),SFDom.removeClass(b,"inputMethodShowDropDown"),SFDom.removeClass(b,
"inputMethodShowHHMM"),a=this._getClassForInputMethod(a),SFDom.addClass(b,a),""==a&&this.setEnabled(!1))},setLoading:function(a){var b=!0===a?"inline":"none",c=juic.$(this.id+"_loading");c&&(c.style.display=b);a&&this._showDeviatingDeductionNotification(!1)},setAvailableValues:function(a){this._availableInput.setAvailableOptions(a)},setEnabled:function(a){this._super(a);var b=juic.$(this.id+"_write");b&&(b.title=a?this._title:"",b.disabled=!a);if(b=juic.$(this.id+"_efeWrapperSpan"))a?(SFDom.removeClass(b,
"tlmTimeSelectDisabled"),b.removeAttribute("aria-disabled")):(SFDom.addClass(b,"tlmTimeSelectDisabled"),b.setAttribute("aria-disabled",!0));if(b=juic.$(this.id+"label"))b.style.display=a?"none":"inline",b.setAttribute("aria-hidden",a?"false":"true");if(b=juic.$(this.id+"_inputfieldcontainer"))b.style.display=a?"inline":"none",b.setAttribute("aria-hidden",a?"true":"false")},_listenToEvents:function(){this._availableInput.addEventListener(ECTTimeSelect.AbstractTimeInputMethod.EVENTS.DATA_CHANGED,this,
"_handleDataChangeDropDown");this._freeInput.addEventListener(ECTTimeSelect.AbstractTimeInputMethod.EVENTS.DATA_CHANGED,this,"_handleDataChangeFreeInput");this._hhmmInput.addEventListener(ECTTimeSelect.AbstractTimeInputMethod.EVENTS.DATA_CHANGED,this,"_handleDataChangeHHMM")},_getClassForInputMethod:function(a){switch(a){case ECTTimeSelect.INPUTMETHOD.FREE:return"inputMethodShowFree";case ECTTimeSelect.INPUTMETHOD.DROPDOWN:return"inputMethodShowDropDown";case ECTTimeSelect.INPUTMETHOD.HHMM:return"inputMethodShowHHMM"}return""},
_handleDataChangeDropDown:function(a){this._value=a.newValue;this._hasError=a.hasError;this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE,hasError:this._hasError,value:this._value,oldValue:this._oldValue})},_handleDataChangeFreeInput:function(a){this._value=ECTUtil.toDBString(a.newValue);this._hasError=a.hasError;this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE,hasError:this._hasError,value:this._value,oldValue:this._oldValue})},
_handleDataChangeHHMM:function(a){this._value=a.newValue;this._hasError=a.hasError;a=(this._value/60).toFixed(10);var b=(this._oldValue/60).toFixed(10);this._value=a;this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:ECTConstants.EVENT_FIELD_CHANGE,hasError:this._hasError,value:a,oldValue:b})},_handleTimeChanged:function(a){a=a.newValue;var b=this.getValue();b.fraction=a;this.setValue(b);b=this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE;this.dispatch(ECTConstants.EVENT_CHANGE,
{actionCommand:b,hasError:this._hasError,value:a,oldValue:this._oldValue})},_getDisplayValue:function(){if(!this._displayValue)return MSGS.TIMEANDLABOR_TIME_UNIT_NONE;if(this._enabled)return this._labelProvider.getHourLabel(this._displayValue.hours);if(null!=this._value)return this._targetUnit==ECTTimeSelect.UNIT.HOURS?this._labelProvider.getHourLabel(this._displayValue.hours):this._labelProvider.getDayLabel(this._displayValue.days);var a=this._labelProvider.getDayLabel(this._displayValue.days);this._targetUnit==
ECTTimeSelect.UNIT.HOURS&&(a+=" ("+this._labelProvider.getHourLabel(this._displayValue.hours)+")");return a},renderHtml:function(a){a.push('\x3cdiv class\x3d"tlmTimeSelectContainer"\x3e');a.push('\x3cspan id\x3d"',this.id,'_inputfieldcontainer" style\x3d"display:none"\x3e');a.push('\x3cspan class\x3d"inputMethodDropDown"\x3e');a.push(this._availableInput);a.push("\x3c/span\x3e");a.push('\x3cspan class\x3d"inputMethodFree"\x3e');a.push(this._freeInput);a.push("\x3c/span\x3e");a.push('\x3cspan class\x3d"inputMethodHHMM"\x3e');
a.push(this._hhmmInput);a.push("\x3c/span\x3e");a.push("\x3c/span\x3e");a.push('\x3cspan id\x3d"',this.id+"label",'" style\x3d"line-height:35px;margin-left:5px" \x3e');a.push(escapeHTML(this._getDisplayValue()));a.push("\x3c/span\x3e");a.push("\x3cspan class\x3d'",this._readOnlyClass,"' id\x3d'",this.id,"_read'\x3e");this._value!=this._title&&a.push(escapeHTML(this._value));a.push("\x3c/span\x3e");this._config.maxLength&&a.push("\x3cdiv id\x3d'",this.id,"_warning' class\x3d'warningText hide' role\x3d'alert' aria-hidden\x3d'true'\x3e\x3c/div\x3e");
a.push('\x3cdiv class\x3d"sfLoadingContainerSm hourInputLoading" id\x3d"',this.id,'_loading"\x3e\x3cspan class\x3d"white"\x3e\x3c/span\x3e\x3c/div\x3e');a.push('\x3cdiv class\x3d"notifcationOuterContainer" id\x3d"',this.id,'_notification"\x3e\x3c/div\x3e');a.push("\x3c/div\x3e")},_getTimeInputControlForCurrentMethod:function(){switch(this._inputMethod){case ECTTimeSelect.INPUTMETHOD.FREE:return this._freeInput;case ECTTimeSelect.INPUTMETHOD.DROPDOWN:return this._availableInput;case ECTTimeSelect.INPUTMETHOD.HHMM:return this._hhmmInput}return null},
_renderWriteHtml:function(a){},_updateLabels:function(){var a=juic.$(this.id+"label");a&&(a.innerHTML=this._getDisplayValue())},reset:function(){this.setValue(null);this.setEnabled(!1);this.setDisplayValue(0,0)},checkForErrors:);ECTTimeSelect.DeductionNotification=function(a,b){this.register();this.init(a,b)};ECTTimeSelect.DeductionNotification.TARGET_SELF="target_self";
ECTTimeSelect.DeductionNotification.TARGET_OTHER="target_other";
juic.extend(ECTTimeSelect.DeductionNotification,juic.Component,{_data:null,_labels:null,_callOut:null,init:_initData:function(){this._data.target=this._data.target||ECTTimeSelect.DeductionNotification.TARGET_SELF},_getContent:function(){var a=[],b=this._getContentMessage();a.push("\x3cdiv\x3e\x3cb\x3e",MSGS.get("TIMEANDLABOR_TIME_CREATE_DEVIATING_DEDUCTION_HEADER"),'\x3c/b\x3e\x3c/div\x3e\x3cdiv class\x3d"globalPortletHeader" style\x3d"font-size:1px;height:3px;margin-bottom: 5px"\x3e\x3c/div\x3e');
a.push('\x3cp class\x3d"deductionCallout"\x3e');a.push(b);a.push("\x3c/p\x3e");return a.join("")},_getContentMessage:function(){var a=this._labels.getLabelForQuantity(this._data.targetQuantity,this._data.unit),b=this._labels.getLabelForQuantity(this._data.deductionQuantity,this._data.unit),c=this._data.target==ECTTimeSelect.DeductionNotification.TARGET_SELF;return 0==this._data.deductionQuantity?c?MSGS.get("TIMEANDLABOR_TIME_CREATE_DEVIATING_DEDUCTION_CONTENT_ZERO",a):MSGS.get("TIMEANDLABOR_TIME_CREATE_DEVIATING_DEDUCTION_CONTENT_ZERO_GENERIC",
a):c?MSGS.get("TIMEANDLABOR_TIME_CREATE_DEVIATING_DEDUCTION_CONTENT",a,b):MSGS.get("TIMEANDLABOR_TIME_CREATE_DEVIATING_DEDUCTION_CONTENT_GENERIC",a,b)},_createOverlay:function(){var a=this._getContent();this._callOut=new SFCalloutPopup({width:280,escapeHtml:!1,originOptions:{direction:"right"}});this._callOut.setContent(a)},removeCallOut:function(){this._callOut=null},_showCallOut:_hideCallOut:renderHtml:function(a){var b=
jQuery("\x3cp\x3e"+MSGS.get("TIMEANDLABOR_TIME_CREATE_DEVIATING_DEDUCTION_HEADER")+": "+this._getContentMessage()+"\x3c/p\x3e").text();a.push('\x3cspan tabindex\x3d"0" class\x3d"notification" id\x3d"'+this.id+'"');a.push(' aria-label\x3d"',b,'" ');a.push(' aria-role\x3d"tooltip" ');a.push(' onmouseover\x3d"',this.fireCode("_showCallOut"),'" ');a.push(' onfocus\x3d"',this.fireCode("_showCallOut"),'" ');a.push(' onblur\x3d"',this.fireCode("_hideCallOut"),'" ');a.push("\x3e");a.push("\x26#xe0b1;");a.push('\x3cspan class\x3d"hiddenAriaContent"\x3e',
b,"\x3c/span\x3e");a.push("\x3c/span\x3e")}});ECTTimeSelect.LabelProvider=function(a){this.init(a)};
juic.extend(ECTTimeSelect.LabelProvider,juic.EventTarget,{_targetUnit:null,init:function(a){this.setUnit(a)},setUnit:function(a){this._targetUnit=a},getLabelForQuantity:function(a,b,c){b=b||this._targetUnit;if(b==ECTTimeSelect.UNIT.HOURS)return 1==a?MSGS.get("TIMEANDLABOR_TIME_UNIT_SINGLE_HOUR_VALUE"):null==c?MSGS.get("TIMEANDLABOR_TIME_UNIT_HOURS_VALUE",a):a==c[0]?MSGS.get("TIMEANDLABOR_TIME_UNIT_HOURS_FULLDAY_VALUE",a):MSGS.get("TIMEANDLABOR_TIME_UNIT_HOURS_VALUE",a);if(b==ECTTimeSelect.UNIT.DAYS)return 1==
a?MSGS.get("TIMEANDLABOR_TIME_UNIT_FULL_DAY"):MSGS.get("TIMEANDLABOR_TIME_UNIT_FRACTION_DAY",a)},getHourLabel:function(a,b){return this.getLabelForQuantity(a,ECTTimeSelect.UNIT.HOURS,b)},getDayLabel:getDaysString:function(){return MSGS.get("TIMEANDLABOR_TIME_UNIT_DAYS")},getHoursString:getStringForUnit:function(a){switch(a||this._targetUnit){case ECTTimeSelect.UNIT.HOURS:return this.getHoursString();
case ECTTimeSelect.UNIT.DAYS:return this.getDaysString()}return targetUnit}});ECTTimeSelect.AbstractTimeInputMethod=function(a,b,c){this.register();this.init(a,b,c)};ECTTimeSelect.AbstractTimeInputMethod.EVENTS={};ECTTimeSelect.AbstractTimeInputMethod.EVENTS.DATA_CHANGED="ECTTimeSelect.AbstractTimeInputMethod.DataChanged";
juic.extend(ECTTimeSelect.AbstractTimeInputMethod,juic.Component,{_value:null,_config:null,_targetUnit:null,_labelProvider:null,init:function(a,b,c){this._labelProvider=c;this.setOptions(b||{});this.setValue(a)},setTargetUnit:function(a){this._targetUnit=a},setValue:function(a){this._value=a},getValue:function(){return this._value},setOptions:function(a){this._config=this._createConfig(a);this._targetUnit=this._config.targetUnit},_createConfig:function(a){var b={};b.targetUnit=a.targetUnit;return b},
getLabelForQuantity:);ECTTimeSelect.AllowedValuesInput=function(a,b,c){this._super(a,b,c)};
juic.extend(ECTTimeSelect.AllowedValuesInput,ECTTimeSelect.AbstractTimeInputMethod,{_availableOptions:[],_selectBox:null,_currentOptionListMeta:[],init:function(a,b,c){this._config=b;this._buildSelectBox();this._super(a,b,c)},setOptions:function(a){this._validateConfig(a)&&(this._super(a),this.setAvailableOptions(a.availableOptions))},setAvailableOptions:function(a){this._availableOptions=a;this._refresh()},setValue:function(a){this._super(a);this._selectCurrentValue()},checkForErrors:function(){return this._selectBox.checkForErrors()},
_refresh:function(){this._refreshDropdownValues();this._selectCurrentValue()},_refreshDropdownValues:function(){this._refreshOptionListForAllowedValues();var a=new SFArrayItemProvider(this._currentOptionListMeta);this._selectBox.setItemProvider(a);0<this._availableOptions.length&&this._selectBox.setValue(this._availableOptions[0])},_selectCurrentValue:function(){this.isValueSelectable(this.getValue())?this._selectBox.setValue(this.getValue()):0<this._currentOptionListMeta.length&&(this._selectBox.setValue(this._currentOptionListMeta[0].value),
this._value=this._currentOptionListMeta[0].value)},_validateConfig:function(a){return a.availableOptions&&a.availableOptions.length&&0!=a.availableOptions.length?!0:!1},_refreshOptionListForAllowedValues:function(){for(var a=[],b=0;b<this._availableOptions.length;b++){var c=this._availableOptions[b],c={description:null,value:c+"",label:this.getLabelForQuantity(c),disabled:!1,escape:!0};a.push(c)}this._currentOptionListMeta=a},_buildSelectBox:function(){var a={};a.label=this._config.label;a.id="selectDropDownTimeSelect";
a.required=!0;a.type="PICKLISTAUTOCOMPLETE";a.hasMultiple=!1;a.writable=!0;a.selectOptions=[];this._selectBox=new ECTComboBox("",a.selectOptions,a);this._selectBox.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleSelectionChanged");this._selectBox.bindValidators(a)},isValueSelectable:_handleSelectionChanged:function(a){this._value=a.newValue;this.dispatch(ECTTimeSelect.AbstractTimeInputMethod.EVENTS.DATA_CHANGED,
{newValue:a.newValue})},renderHtml:function(a){a.push(this._selectBox)}});ECTTimeSelect.FreeInput=function(a,b,c){this._super(a,b,c)};
juic.extend(ECTTimeSelect.FreeInput,ECTTimeSelect.AbstractTimeInputMethod,{_inputField:null,init:function(a,b,c){this._config=b;this._buildInputField(a);this._super(a,b,c)},setValue:function(a){this._super(a);this._adjustWidth();this._inputField.setValue(a)},setTargetUnit:function(a){this._super(a);this._refreshUnitLabel()},checkForErrors:function(){return this._inputField.checkForErrors()},_refreshUnitLabel:function(){var a=juic.$(this.id+"_unitLabel"),b=juic.$(this.id+"_description");if(a&&b){var c=
this._labelProvider.getStringForUnit(this._targetUnit);a.innerHTML=c;b.innerHTML=c}this._adjustWidth()},_buildInputField:function(a){this._inputField=new ECTInputBox(a||0,{type:"DECIMAL",title:"",label:this._config.label,required:!0});this._inputField._ariaLabelledBy=this.id+"_description";this._inputField.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleDataChanged");this._inputField.bindSpecificValidators({type:"DECIMAL",label:MSGS.TIMEANDLABOR_WORKFLOW_DURATION});this._inputField.bindValidators({type:"DECIMAL",
title:"",required:!0})},_handleDataChanged:function(a){this._value=a.value;this.dispatch(ECTTimeSelect.AbstractTimeInputMethod.EVENTS.DATA_CHANGED,{newValue:a.value,hasError:a.hasError})},_adjustWidth:renderHtml:function(a){a.addAfterRenderListener(this,"_adjustWidth");a.push('\x3cspan id\x3d"flexRQ" class\x3d"freeInputContainer"\x3e');a.push('\x3clabel class\x3d"hiddenAriaContent" id\x3d"',
this.id,'_description"\x3e',this._targetUnit,"\x3c/label\x3e");a.push(this._inputField);a.push('\x3cspan class\x3d"freeInputUnitLabel" id\x3d"',this.id,'_unitLabel"\x3e');a.push(this._targetUnit);a.push("\x3c/span\x3e");a.push("\x3c/span\x3e")}});ECTTimeSelect.HHMMInput=
juic.extend(ECTTimeSelect.HHMMInput,ECTTimeSelect.AbstractTimeInputMethod,{_inputField:null,init:function(a,b,c){this._config=b;this._buildInputField(a);this._super(a,b,c)},_buildInputField:function(a){this._inputField=new ECTHourMinuteField(a,{numCharsHours:this._config.numCharsHours,label:this._config.label,required:!0});this._inputField.addEventListener(ECTHourMinuteField.EVENTS.DATA_CHANGED,this,"_handleDataChanged")},setValue:function(a){this._super(a);this._inputField.setValue(Math.round(60*
a))},checkForErrors:function(){return!1},_handleDataChanged:function(a){this._value=a.value;this.dispatch(ECTTimeSelect.AbstractTimeInputMethod.EVENTS.DATA_CHANGED,{newValue:a.value,hasError:a.hasError})},renderHtml:);
(function(a,b){var c=function(a,b){this.register();this.init(a,b)};c.TIMEFORMATWITHSECONDS="nn:nn:nn";c.TIMEFORMATWITHOUTSECONDS="nn:nn";juic.extend(c,ECTInputBox,{init:function(a,b){this._super(a,b);this.setFormat((this._config.hideSeconds?c.TIMEFORMATWITHOUTSECONDS:c.TIMEFORMATWITHSECONDS)+(this._config.twelveHourFormat?" aa":""))},setValue:function(a){if(!a.match(/\s(.*)$/)){var b=a.match(/^(\d+)/);if(b&&this._config.twelveHourFormat){var b=Number(b[0]),c="am";12<b&&(b-=12,c="pm");a=a.replace(a.match(/^(\d+)/)[0],
b);a+=" "+c}}this._super(a)},_renderWriteHtml:function(a){var b="";this._label&&a.push('\x3clabel class\x3d"hiddenAriaContent" id\x3d"',this.id,'_description"\x3e',Util.escapeHTML(this._label),"\x3c/label\x3e");a.push('\x3cinput type\x3d"text"  ');this._config.size?a.push(' size\x3d"',this._config.size,'" '):this._cssClass&&(b=this._getCSSClass());a.push(' class\x3d"formElement ',b," ",this.generateFDClasses("input"),'"');this._config.maxLength&&(a.push(' maxlength\x3d"',this._config.maxLength,'"'),
a.push(' onkeydown\x3d"',this.fireCode("_maxLengthCheck"),this.fireCode("_keyDown"),'"'));this.domId=this.id+"_write";a.push(' id\x3d"',this.domId,'" ');this._acceptRejectFilter&&a.push(' onkeypress\x3d"return ',this.fireCode("_filterKeyPress"),'" ');a.push('onchange\x3d"',this.fireCode("_change"),'" onfocus\x3d"',this.fireCode("_focus"),'" onkeydown\x3d"',this.fireCode("_keyDown"),'" onkeyup\x3d"',this.fireCode("_keyUp"),'" onPaste\x3d"',this.fireCode("_paste"),'" onClick\x3d"',this.fireCode("setInputSelection"),
'" onblur\x3d"',this.fireCode("_blur"),'" ');a.push('value\x3d"',"string"===typeof this._value?Util.escapeHTML(this._value):this._value,'" ');a.push('aria-labelledby\x3d"',this._ariaLabelledBy,'" aria-required\x3d"',this._isRequired,'" ');this._enabled?a.push('title\x3d"',Util.escapeHTML(this._title),'" '):a.push(' disabled\x3d"disabled"');a.push(" /\x3e");this.getCalcIconHtml(a)},getCaretPosition:function(a){var b=0;if(document.selection)a.focus(),b=document.selection.createRange(),b.moveStart("character",
-a.value.length),b=b.text.length;else if(a.selectionStart||"0"==a.selectionStart)b=a.selectionStart;return b},setInputSelection:function(a){var b=a.target;if(b.value.indexOf(":")){var c=this.getCaretPosition(b),d=a=0;2>c?d=2:2<c&&5>=c?(a=3,d=5):5<c&&8>=c?(a=6,d=8):this._config.twelveHourFormat&&(a=9,d=12);"undefined"!=typeof b.selectionStart?(b.selectionStart=a,b.selectionEnd=d):document.selection&&document.selection.createRange&&(b.select(),b=document.selection.createRange(),b.collapse(!0),b.moveEnd("character",
d),b.moveStart("character",a),b.select())}},_keyDown:function(a){var b=a.target,c=this;setTimeout(function(){var a=b.value,a=a===c._title?"":a;c.checkForErrors(a)},0);this._super(a)},_dispatchDOMOnChangeEvent:function(){var a=this._config.hideSeconds?5:8,a=a+(this._config.twelveHourFormat?3:0);this._hasError||this._value.length!==a||this._super()},_validateHours:function(a){return this._config.twelveHourFormat?0<=a&&12>=a:0<=a&&24>a},_validateHoursMax:function(a){if(!this._config.twelveHourFormat)return 24==
a},_validateMinSec:function(a,b){return a.length?b?0==a:0<=a&&60>a:!1},getValue:function(){var a=this._value,b=a.match(/^(\d+)/),c=a.match(/\s(.*)$/);b&&c&&(b=Number(b[0]),c=c[1].toLowerCase(),"pm"==c&&12>b&&(b+=12),"am"==c&&12==b&&(b-=12),a=a.replace(a.match(/^(\d+)/)[0],b));return this._value===this._title?"":a.split(" ")[0]},checkForErrors:function(a){if(!this._super()){a||(a=this._value===this._title?"":this._value);if(0<=a.indexOf(":")){var b=a.split(":"),c=this._validateHoursMax(b[0]),d=this._validateHours(b[0]),
e=b[1];this._config.hideSeconds&&this._config.twelveHourFormat&&(e=b[1].split(" ")[0]);var e=this._validateMinSec(e,c),m=!0;this._config.hideSeconds||(b=b[2]?b[2]:"",this._config.twelveHourFormat&&(b=b.split(" ")[0]),m=this._validateMinSec(b,c));this._hasError=!0;c&&!d&&e&&m?this._hasError=!1:!c&&d&&e&&m&&(this._hasError=!1)}!this._hasError&&a.length&&0<=a.indexOf(":")&&this._config.twelveHourFormat&&(b=a.split(" "),!b[1]||"am"!=b[1].toLowerCase()&&"pm"!=b[1].toLowerCase()?this._hasError=!0:this._hasError=
!1)}this._hasError?(this._errorMsg=sfMessageFormat.format(MSGS.COMMON_ERR_DATA_FORMAT,(this._config||{}).label,""),SFDom.addClass(this.domId,"is-error")):SFDom.removeClass(this.domId,"is-error");this.setErrorMsg(this._errorMsg);return this._hasError}});var d=function(a,b){this.register();this.init(a,b)};d.TIME_REGEX=/(\d+):(\d+)(?::(\d+))?(\s(?:AM|PM))?/i;juic.extend(d,c,{init:getValue:function(){var a=this._value,b=a.match(/^(\d+)/),c=a.match(/\s(.*)$/);
b&&c&&(b=Number(b[0]),c=c[1].toLowerCase(),"pm"==c&&12>b&&(b+=12),"am"==c&&12==b&&(b+=12),a=a.replace(a.match(/^(\d+)/)[0],b));return a=this._value===this._title?"":a.split(" ")[0]},setValue:_convertHour:function(a){var b;a&&(b=a.match(d.TIME_REGEX),null!=b&&(hour=Number(b[1]),min=Number(b[2]),sec=Number(b[3])||0,b[4]?(b=b[4].trim().toLowerCase(),"am"==b&&12==hour&&(0<min||0<sec)&&(a=a.replace(/(\d+)/,"00"))):0===hour&&0===min&&0===sec&&(a=a.replace(/(\d+)/,
"24"))));return a},isValid:function(){var a=this.getValue(),b,c,k=!0;if(a)if(c=a.match(d.TIME_REGEX),null!=c){if(a=Number(c[1]),b=Number(c[2]),c=Number(c[3])||0,0===a&&0===b&&0===c||24===a&&(0<b||0<c))k=!1}else k=!1;return k},bindSpecificValidators:function(a){ECTValidationMgr.bindValidator(this,"function",{func:new Callback(this,function(){return this.isValid()}),message:sfMessageFormat.format(MSGS.COMMON_ERR_DATA_FORMAT,a.label)})}});a.ECTTimeInput=a.ECTTimeInput.FIELD_TYPE="TIME"})(window);function ECTRadioGroup(a,b,c,d){this.register();this.init(a,b,c,d)}ECTRadioGroup.FIELD_TYPE="radio";
ECTRadioGroup.prototype=function(){return set(new ECTAbstractInputField,{init:function(a,b,c,d){this._options=b;assert(this._options,"[ECTRadioGroup] Select Options are null");assert(this._options.length,"[ECTRadioGroup] Select Options are null");this._oldValue=this._value=a;this._label=c;this._title=d;this._createOptions()},_createOptions:function(){this._radioFields=[];for(var a=0,b=this._options.length;a<b;a++){var c=this._options[a],d=this._isChecked(c.value),c=new ECTCheckRadioField(c.value,
ECTRadioGroup.FIELD_TYPE,c.label,d,!c.disabled);c.addEventListener(ECTConstants.EVENT_CHANGE,this,"_setSelection");this._radioFields.push(c)}},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"radioGroup" role\x3d"radiogroup" aria-describedby\x3d"',this.id,'_label"\x3e');this._title&&(a.push("\x3cdiv id\x3d'",this.id,"_title' class\x3d'form_title'\x3e"),a.push(Util.escapeHTML(this._title)),a.push("\x3c/div\x3e"));this._label&&a.push("\x3cdiv id\x3d'",this.id,"_label' class\x3d'label'\x3e",
Util.escapeHTML(this._label),"\x3c/div\x3e");a.push(this._radioFields);a.push("\x3c/div\x3e")},getRadioFields:function(){return this._radioFields},getValue:function(){return this._value},setValue:function(a){this._value=a||""},reset:_setSelection:function(a){a.isOtherManagerField?this.setValue(a.value):a.checked||this._setValueAndDispatch(a.value)},_setValueAndDispatch:function(a){this.setValue(a);for(a=this._radioFields.length;a--;){var b=
this._radioFields[a];b.setChecked(this._isChecked(b.getValue()))}a=this.isModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE;this.dispatch(ECTConstants.EVENT_CHANGE,{actionCommand:a,value:this._value})},_isChecked:function(a){return a==this._value?!0:!1},isModified:cleanup:function(){for(var a=this._radioFields.length;a--;)this._radioFields[a].unregister();this.unregister()}})}();
function ECTCheckRadioField(a,b,c,d,e){this.register();this.init(a,b,c,d,e)}
ECTCheckRadioField.prototype=function(){return set(new juic.Component,{init:function(a,b,c,d,e){this.value=a;this.label=c;assert(this.value,"[ECTCheckRadioField] value is null or empty");assert(this.label,"[ECTCheckRadioField] label is null or empty");this.enabled=e||!1;this.checked=d||!1;this.type=b;this.isFocus=this.isOver=!1;this.createField(c)},createField:function(){},_getRootId:renderHtml:function(a){var b=this.id+"_1";a.push('\x3cdiv id\x3d"',this._getRootId(),
'" ');a.push(' role\x3d"',"radio"==this.type?"radio":"checkbox",'"');this.label&&a.push(' aria-labelledby\x3d"',this.id,'_label" ');a.push(" aria-checked\x3d",this.checked?'"true" ':'"false" ');this.enabled||a.push(' aria-disabled\x3d"true" ');a.push(' onclick\x3d"',this.fireCode("_itemSelect"),'"');a.push(' onmouseover\x3d"',this.fireCode("_itemFocus"),'"');a.push(' onmouseout\x3d"',this.fireCode("_itemBlur"),'"');a.push('class\x3d"',this._getClass(),'"\x3e');this.isFioriFDEnabled()?a.push('\x3cinput type\x3d"radio" class\x3d"',
this.generateFDClasses("radio"),'" name\x3d"radio1" id\x3d',b,"  "):a.push('\x3ca role\x3d"radio" href\x3d"javascript:void(0);" ');a.push(' onkeyup\x3d"',this.fireCode("_itemSelect"),'"');a.push(' onfocus\x3d"',this.fireCode("_itemFocus"),'"');a.push(' onblur\x3d"',this.fireCode("_itemBlur"),'"');this.label&&a.push(' aria-labelledby\x3d"',this.id,'_label" ');a.push(" aria-checked\x3d",this.checked?'"true" ':'"false" ');this.enabled||a.push(' aria-disabled\x3d"true" ');var c=this.checked?"checked":
"",d=this.enabled?"":"disabled";this.isFioriFDEnabled()?a.push(" ",c," ",d," \x3e"):a.push(" \x3e\x3c/a\x3e");this.label&&a.push('\x3clabel id\x3d"',this.id,'_label" class\x3d"',this.generateFDClasses("radio__label"),'" for\x3d"',b,'" \x3e',Util.escapeHTML(this.label),"\x3c/label\x3e");this.renderField(a);a.push("\x3c/div\x3e")},renderField:function(a){},_getClass:function(){if(!this.isFioriFDEnabled())return this._class="note"!=this.type?"radioCheck ":"note ",this._class+=this.type+(this.checked?
"On":"Off")+(this.isOver?"Over":""),this.isFocus&&(this._class+=" "+(this.type+(this.checked?"On":"Off")+"Focus")),this._class},_itemSelect:function(a){!this.enabled||a.target&&"text"==a.target.type||(a.keyCode?13==a.keyCode||32==a.keyCode:1)&&this.dispatch(ECTConstants.EVENT_CHANGE,{value:this.getUpdatedValue()||this.value,checked:this.checked,enabled:this.enabled})},getUpdatedValue:function(){},setValue:function(a){this.value=a||""},getValue:function(){return this.value},_itemFocus:function(a){this.enabled&&
(this.isFocus=this.isOver=!0,this._setClassNameToField(this._getClass()))},_itemBlur:function(a){this.enabled&&(this.isFocus=this.isOver=!1,this._setClassNameToField(this._getClass()))},setChecked:function(a){this.isOver=this.checked=a;this._setClassNameToField(this._getClass());juic.$(this._getRootId()).setAttribute("aria-checked",this.checked)},getTypeObj:function(){this.typeObj||(this.typeObj=juic.$(this._getRootId()));return this.typeObj},_setClassNameToField:setEnabled:function(a){this.enabled=a;this.isOver=!1;this._setClassNameToField(this._getClass());juic.$(this._getRootId()).setAttribute("aria-disabled",!this.enabled)},isEnabled:function(){return this.enabled}})}();function ECTURLLink(a,b){this.register();this.init(a,b)}
ECTURLLink.prototype=function(){return set(new Component,{init:function(a,b){this._config=b;this._css=this.generateFDClasses("link");this._config&&(this._config.css&&(this._css=this._config.css+" "+this._css),this._config.href&&(this._href=this._config.href),this._fdCss=this._config.fdCss);this.setValue(a)},setValue:getHref:function(){return this._href},renderLinkHtml:function(a){var b=this.isFioriFDEnabled();a.push("\x3ca");this._href&&a.push(' href\x3d"',Util.escapeHTML(this._href),
'"');this._fdCss?a.push(' class\x3d"',this._fdCss,'"'):this._css?a.push(' class\x3d"',this._css,'"'):this._css||a.push(' class\x3d"',this.generateFDClasses("link"),'"');b?a.push('\x3e\x3cspan class\x3d"',this.generateFDClasses("link__content"),'"\x3e',Util.escapeHTML(this._value),"\x3c/span\x3e\x3c/a\x3e"):a.push("\x3e",Util.escapeHTML(this._value),"\x3c/a\x3e")},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" \x3e');this.renderLinkHtml(a);a.push("\x3c/div\x3e")}})}();
function ECTURLField(a,b){this.register();this._href=a;this._value=b}ECTURLField.FIELD_TYPE="URLLINK";extend(ECTURLField,ECTURLLink,{setValue:function(a){},getValue:function(){return""},reset:function(){}});function ECTBackToPage(a,b){this.register();this.init(a,b)}
extend(ECTBackToPage,ECTURLLink,{renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"',this.generateFDClasses("breadcrumb__item")," ",this._config.customCss||"",'"\x3e');a.push(MSGS.ADMIN_Back_To+" ");this.renderLinkHtml(a);a.push("\x3c/div\x3e")}});function ECTBreadcrumbs(a){this.register();this.init(a)}
ECTBreadcrumbs.prototype=function(){return set(new Component,{init:function(a){this._config=a},_renderCrumb:function(a,b){b&&(a.push("\x3ca"),a.push(' href\x3d"',b.href,'"'),a.push(' class\x3d"',b.clazz,'"'),a.push("\x3e",Util.escapeHTML(b.name),"\x3c/a\x3e"))},renderHtml:function(a){var b=this._config&&this._config.length;a.push('\x3cdiv id\x3d"',this.id,'" \x3e');for(var c=0;c<b;c++)this._renderCrumb(a,this._config[c]),c!=b-1&&a.push(" / ");a.push("\x3c/div\x3e")}})}();
function ECTDocUrlLink(a,b){this.register();this._init(a,b)}ECTDocUrlLink.FIELD_TYPE="DOCURLLINK";
(function(){juic.extend(ECTDocUrlLink,ECTAbstractInputField,{_init:function(a,b){this._value=a;this._writable=b.writable;this._gappsCompanyDomain=b.attribute.gappsCompanyDomain;this._prepareValue(a);this._LinkInput=new ECTInputBox(this._linkText,{});this._LinkInput.addEventListener(ECTConstants.EVENT_CHANGE,this,"dispatchEvent");this._HrefInput=new ECTInputBox(this._linkHref,{});this._HrefInput.addEventListener(ECTConstants.EVENT_CHANGE,this,"dispatchEvent")},bindValidators:function(a){this._LinkInput.bindValidators(set(a,
{label:MSGS.EMPFILE_DISPLAY_NAME}));this._HrefInput.bindValidators(set(a,{label:MSGS.EMPFILE_DOCUMENT_URL}));ECTValidationMgr.bindValidator(this._LinkInput,"custom",{message:MSGS.EMPFILE_GOOGLEDOC_Err_Valid_Value,regexp:/^(?!.*\]|.*\[).*$/});ECTValidationMgr.bindValidator(this._HrefInput,"custom",{message:MSGS.EMPFILE_VALID_URL_ERR,regexp:"^(http|https):(//|\\\\)"});this._gappsCompanyDomain&&ECTValidationMgr.bindValidator(this._HrefInput,"custom",{message:MSGS.EMPFILE_GAPPS_COMP_DOMAIN_ERR,regexp:"docs.google.com/a/"+
this._gappsCompanyDomain})},getValue:function(){this._updateValue(this._LinkInput.getValue(),this._HrefInput.getValue());return this._value},checkForErrors:function(){var a=this._LinkInput.checkForErrors(),b=this._HrefInput.checkForErrors();return a||b},_updateValue:setValue:function(a){this._prepareValue(a);this._LinkInput.setValue(this._linkText);this._HrefInput.setValue(this._linkHref)},_prepareValue:function(a){a&&0<a.length?(a=a.split("]"),3==a.length&&
(this._linkText=a[0].replace("[",""),this._linkHref=a[1].replace("[",""))):this._linkHref=this._linkText=""},isModified:reset:renderHtml:function(a){a.push('\x3cdiv class\x3d"urllinkcontainer"\x3e');a.push('\x3cdiv class\x3d"writeComp"\x3e');a.push("\x3cdiv\x3e");a.push('\x3clabel for\x3d"',this._LinkInput.getInputBoxDomId(),'"\x3e');a.push(MSGS.EMPFILE_DISPLAY_NAME);
a.push("\x3c/label\x3e");this._LinkInput.renderHtml(a);a.push("\x3c/div\x3e");a.push("\x3cdiv\x3e");a.push('\x3clabel for\x3d"',this._HrefInput.getInputBoxDomId(),'"\x3e');a.push(MSGS.EMPFILE_DOCUMENT_URL);a.push("\x3c/label\x3e");this._HrefInput.renderHtml(a);a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"readComp"\x3e');a.push('\x3ca target\x3d"_blank" href\x3d"',Util.escapeHTML(this._linkHref),'"\x3e',Util.escapeHTML(this._linkText),"\x3c/a\x3e");a.push("\x3c/div\x3e");
a.push("\x3c/div\x3e")},cleanup:function(){this._LinkInput.cleanup();this._HrefInput.cleanup();this.unregister()}})})();uic.extend(ECTDialogBox,SFDialogBox,{_init:function(){this._super.apply(this,arguments);this._ownChildren=!1;this._closeDialogOnEsc=!0},setMessageBoxType:function(a){this._messageBoxType=a},_handleClose:function(){this._cancel()}});function ECTHideHeader(a){this.register();this.init(a)}
ECTHideHeader.prototype=function(){return juic.set(new juic.Component,{init:function(a){a=a||{};this._showImmediatelyOnDOMReady=a.showImmediatelyOnDOMReady||!1;var b=this;SFDOMEvent.ready(function(){b._icon=new SFRevolutionToolbarButton("topnav_show","topnav_show");b._icon.addEventListener(ECTConstants.EVENT_ACTION,b,"_handleNavVisibility");TopNavBar.topNavWrapperId="renderTopNavFixedWidthV12";b._showImmediatelyOnDOMReady&&b.show()})},_updateIcon:function(a){this._icon.setIconType(a);this._icon.setActionCommand(a)},
_handleNavVisibility:function(a){this._updateIcon("topnav_hide"==a.actionCommand?"topnav_show":"topnav_hide");this._toggleId||(this._toggleId=juic.$(TopNavBar.topNavWrapperId).childNodes[0].id);TopNavBar.toggleTab(this._toggleId)},show:function(){var a={origin:{vertical:"top",horizontal:"right"},menu:{vertical:"top",horizontal:"left"},offset:{vertical:0,horizontal:0}};Util.isRTL()&&(a.origin={vertical:"top",horizontal:"left"},a.menu={vertical:"top",horizontal:"right"});SFPositionManager.show(this._icon,
"content",a)}})}();(function(){ar b={autoResize:!1,minimizeSpace:!0,draggableColumns:!1,useCustomScrollBar:!0,ellipsis:!0},c={pageNumber:1,pageIndex:0,pageSize:25,startIndex:0,endIndex:24};juic.extend(ECTAbstractPaginatedList,Component,{_init:function(a,c,f){var d=c&&c instanceof Array&&0<c.length;a&&a instanceof SFAbstractItemProvider&&d?(this._assignItemProvider(a),this._columnDefinitions=c,this._padding=f&&f.padding||100,this._createPaginator(f),b.draggableColumns=
f.draggable||!1,Util.isRTL()&&(b.adjusterSize=0),this._createDataGrid(),this._createLayout(f),SFDOMEvent.addListener(window,"resize",this._resize,this,!0),this._populateRowData(f.noLoader)):assert(!1,"ECTAbstractPaginatedList: Invalid init arguments")},_createDataGrid:function(){this._dataGrid=new SFDataGridMatrix(this._columnDefinitions,b);this._dataGrid.addEventListener("sort",this,"_onSort");null!=this._sortIndex&&this._dataGrid.sortedBy(this._sortIndex,this._direction)},_assignItemProvider:function(a){this._itemProvider=
a;this._itemProvider.addEventListener("itemsAvailable",this,"_onItemsAvailable");this._itemProvider.addEventListener("itemsAvailable",this,"dispatchEvent");this._itemProvider.addEventListener("itemsError",this,"handleError")},_createPaginator:function(a){this._paginator=new SFPagination({});a.pageSizeOptions&&(this._paginator.setPageSizeOptions(a.pageSizeOptions),this._paginator.updatePageSizeOptions());this._paginator.addEventListener("action",this,"_prehandlePageAdjust");var b=a&&a.pageSize;this._pagination=
a.pagination||set({},c);b&&(this._pagination.pageSize=b,this._pagination.endIndex=b-1);this._updatePaginator()},_createLayout:function(b){this._wrapper=new a(this._dataGrid);this._gridContainer=new SFContainer([this._paginator,this._wrapper]);b.noLoader?(this._cardLayout=new SFCardLayout([]),this._cardLayout.addCard(new ECTProgressIndicator,!1),this._cardLayout.addCard(this._gridContainer,!1)):this._cardLayout=new SFCardLayout([new ECTProgressIndicator,this._gridContainer])},renderHtml:function(a){a.push('\x3cdiv id\x3d"',
this.id,'" class\x3d"ectPaginatedList"\x3e');a.push(this._cardLayout);a.push("\x3c/div\x3e")},createColumnComponent:function(a,b){assert(!1,"ECTAbstractPaginatedList: Must implement createColumnComponent")},handleError:handleSortBy:function(a,b,c){assert(!1,"ECTAbstractPaginatedList: Must implement handleSortBy")},_resetDataGrid:function(){this._wrapper.hide();this._dataGrid.resetRows(!0);this._populateRowData()},cleanup:function(){this._paginator&&
this._paginator.cleanup();this._cardLayout&&this._cardLayout.cleanup(!0);this._dataGrid&&this._dataGrid.cleanup(!0);this._heightAdjuster&&(this._heightAdjuster.setChild(null),this._heightAdjuster.cleanup());this._itemProvider.removeEventListener("itemsAvailable",this);this._itemProvider.removeEventListener("itemsError",this);this._super()},setFilterBy:_onItemsAvailable:function(a){this._isPaginationObjectsEqual(a.pagination)&&
(this._itemCount=a.itemCount,0<this._itemCount?(this._cardLayout.setSelectedCard(this._gridContainer),this._wrapper.show(),this._updatePaginator(),this._createRows(a.items),this._resize()):this._handleNoItemsCondition(a))},_handleNoItemsCondition:function(a){this._noResults?this._cardLayout.setSelectedCard(this._noResults):(this._noResults=new SFSysMsg("info",MSGS.EMPLOYEE_HRIS_No_Results_To_Display),this._cardLayout.addCard(this._noResults,!0))},_isPaginationObjectsEqual:
_updatePaginator:function(){var a=this._pagination.pageSize;this._paginator.setPagingModel(new SFBoundedRangeModel(0,this._itemCount||0,this._pagination.pageIndex*a,a))},_onSort:function(a){var b=a.column;a=a.direction;var c=this._columnDefinitions[b];this._direction=a;this._sortIndex=b;this.handleSortBy(b,c,a)},_populateRowData:function(a){this.dispatch("itemsLoading");a||this._cardLayout.setSelectedIndex(0);this._pagination=set({},this._pagination);this._itemProvider.getItems(this._pagination)},
_resize:function(a){if(!this._itemCount)return!0;a=SFDom.getY(this.id);if(0<a){var b=SFDom.getViewportHeight(),c=40+this._rowCount*this._getRowHeight();a=Math.min(c,Math.max(b-a-this._padding,100));Util.browserInfo.ie&&7>Util.ieVersion(!0)?this._dataGrid.setDimension({width:925,height:a||100}):this._wrapper.setHeight(a)}},_createRows:function(a){this._rowCount=a.length;this._rowLookup={};for(var b=[],c=0;c<a.length;c++){var d=a[c],k=this._getRowId(d);this._rowLookup[k]={};this._rowLookup[k].ITEM=
d;for(var l=[],m=0;m<this._columnDefinitions.length;m++){var n=this._columnDefinitions[m],p=this.createColumnComponent(d,n),n=this._getColumnId(n);this._rowLookup[k][n]=p;l.push(p)}b.push(l)}a=[];d=this._getRowHeight();for(c=0;c<b.length;c++)a.push({fixedSize:d});this._dataGrid.appendRows(b,a)},_getRowId:function(a){return a.id},_getColumnId:function(a){return a.columnId},_getRowHeight:function(){return 32},_isPageSizeChanged:function(a){return this._pageSizeChanged=a.newPageSize?a.newPageSize!==
a.oldModel.getExtent():!1},_prehandlePageAdjust:function(a){this._onPageAdjust(a)},_onPageAdjust:function(a){var b=a.oldModel,c=a.newPageSize||b.getExtent();this._isPageSizeChanged(a);a=a.newPage||1;var d=b.getMaximum();b.setRangeProperties(0,d,(a-1)*c,c);this._pagination.pageIndex=a-1;this._pagination.pageNumber=a;this._pagination.pageSize=c;this._pagination.startIndex=(a-1)*c;this._pagination.endIndex=a*c-1;this._resetDataGrid()}});juic.extend(a,Component,{renderHtml:show:function(){this._visible=!0;this.updateDimension();this._dataGrid.render(this.id)},setHeight:updateDimension:function(){var a=juic.$(this.id),a=SFDom.getSuggestedDimension(a);this._dataGrid.setDimension&&this._dataGrid.setDimension({width:a.width||925,height:this._height||100})},hide:function(){this._visible=!1;var a=juic.$(this.id);a.innerHTML="";a.style.height=""}})})();
function ECTPaginatedListWithDataGrid(a,b){this.register();this._init(a,b)}
(function(){function a(a){this._controller=AjaxService.getMBeanInstance("adminFONonEffectiveDatedUIController");this._elementId=a.contextualFields&&a.contextualFields.requestParams&&a.contextualFields.requestParams.element;this._internalCode=a.contextualFields&&a.contextualFields.requestParams&&a.contextualFields.requestParams.internalCode}var b={pageNumber:1,pageIndex:0,pageSize:10,startIndex:0,endIndex:9},c=[{key:"10",value:10},{key:"25",value:25}];juic.extend(ECTPaginatedListWithDataGrid,ECTAbstractPaginatedList,
{_init:function(d,e){this._data=d;this._metaData=e;this._invalidateCache();this.dataLoading=new SFLoading;var f=new a(this._metaData);f.addEventListener("handleError",this,"handleError");this._assignItemProvider(f);f={pagination:b};Util.browserInfo.ie&&9>Util.ieVersion(!0)&&(f.pageSizeOptions=c);this._createPaginator(f);this._createDataGrid();this._createLayout({noLoader:!0});this._populateRowData(!0)},renderHtml:function(a){a.push('\x3cdiv class\x3d"ectPaginatedListWithDataGrid"\x3e');this._super(a);
a.push("\x3c/div\x3e")},showLoading:function(){this.dataLoading.hide();SFOverlayMgr.show(this.dataLoading,!0)},hideLoading:function(){this.dataLoading.hide()},_createDataGrid:function(){this._metaData.fixWidthOnLoad=!0;this._metaData.sendDeleted=!0;this._metaData.isPaginatedGrid=!0;this._dataGrid=new ECTDataGrid(this._data,juic.set({},this._metaData));this._dataGrid.addEventListener(ECTConstants.EVENT_CHANGE,this,"dispatchEvent")},handleError:_onItemsAvailable:function(a){this._isPaginationObjectsEqual(a.pagination)&&(!a.fromCache&&this._cacheOriginalData(a),this._super(a))},_handleNoItemsCondition:function(a){this._updatePaginator();this._cardLayout.setSelectedCard(this._gridContainer);this._wrapper.show();this._resize();this.hideLoading()},_isPaginationObjectsEqual:function(a){return a.pageNumber==this._pagination.pageNumber&&a.pageIndex==this._pagination.pageIndex&&a.pageSize==this._pagination.pageSize&&
a.startIndex==this._pagination.startIndex&&a.endIndex==this._pagination.endIndex},_createRows:function(a){var b={},c=this._pagination.pageNumber!==this._paginator.getTotalPages();b.isNotLastPage=c;b.clearOriginalArguments=!0;this._dataGrid.reloadWithData(a,b);this.hideLoading()},_invalidateCache:_invalidateMergedAndModifiedCache:_resetDataGrid:function(a){this._pageSizeChanged&&
this._invalidateCache();this._populateRowData(!0)},reset:function(){this._invalidateMergedAndModifiedCache();this._dataGrid.reloadWithData(this._cachedOriginalMap[this._pagination.pageNumber].items,{clearOriginalArguments:!0})},setAsEmptyForm:function(){this._dataGrid.setAsEmptyForm()},getValue:function(){if(ECTUtil.isEmptyObject(this._cachedModifiedMap))return this._dataGrid.getValue(!0);!this._cachedModifiedMap[this._pagination.pageNumber]&&this._dataGrid.isModified()&&(this._cachedModifiedMap[this._pagination.pageNumber]=
this._dataGrid.getValue(!0));var a=[],b;for(b in this._cachedModifiedMap)a=a.concat(this._cachedModifiedMap[b]);return a},setValue:function(a){this._dataGrid.setValue(a)},validateFields:function(){return this._dataGrid.validateFields()},_cacheOriginalData:function(a){this._pageSizeChanged&&this._invalidateCache();var b=[];ECTUtil.clone(b,a.items);a&&a.pagination&&a.pagination.pageNumber&&(this._cachedOriginalMap[a.pagination.pageNumber]={items:b,itemCount:a.itemCount,pagination:juic.set({},a.pagination),
fromCache:!0})},_populateRowData:function(a){this.showLoading();var b;this._pagination&&this._pagination.pageNumber&&(b=this._cachedMergedMap[this._pagination.pageNumber]||this._cachedOriginalMap[this._pagination.pageNumber]);b?this._onItemsAvailable(b):this._super(a)},_createMsgDialog:function(){this._msgDialog=new ECTResponseDialog(ECTConstants.TYPE_ERROR,MSGS.COMMON_error,MSGS.COMMON_Err);this._msgDialog.addEventListener(ECTConstants.EVENT_HIDE_RESPONSE_DIALOG,this);this._msgDialog.addEventListener(ECTConstants.EVENT_ACTION,
this)},toShowDialog:function(a,b,c,g){this._msgDialog||this._createMsgDialog();this._msgDialog.setMsgType(a,g);this._msgDialog.setDialogTitle(b);this._msgDialog.setSystemMessage(c);this._msgDialog.show()},handleEvent:function(a){},_onPageAdjust:function(a){if(a.action===ECTConstants.EVENT_CONFIRM_NO)this._paginator._itemsPerPageSelect.setValue(a.oldModel.getExtent(),!0);else{if(!this._pageSizeChanged)var b=this._dataGrid.validateFields();b&&!b.returnFlag?(a="\x3col class\x3d'sysMsgErrorList'\x3e\x3cli\x3e"+
b.errorMsg.join("\x3c/li\x3e\x3cli\x3e")+"\x3c/li\x3e\x3c/ol\x3e",this.toShowDialog(ECTConstants.STATUS_ERROR,MSGS.COMMON_Err,a)):(this._dataGrid.isModified()&&(b=this._dataGrid.getValue(!1,!0),this._cachedMergedMap[this._pagination.pageNumber]={items:b,itemCount:this._itemCount,pagination:juic.set({},this._pagination),fromCache:!0},this._cachedModifiedMap[this._pagination.pageNumber]=this._dataGrid.getValue(!0)),this._super(a))}},_prehandlePageAdjust:function(a){this._isPageSizeChanged(a)?this.dispatch(ECTConstants.EVENT_CHANGE,
{pageSizeChanged:!0,callbackMethod:"_onPageAdjust",callbackArg:a,metaId:this.metaId}):this._onPageAdjust(a)}});juic.extend(a,SFAbstractItemProvider,{getItems:function(a){var b=this;this._controller.getPaginatedRowData(this._elementId,this._internalCode,"",a.pageSize,a.pageNumber,{callback:errorHandler:function(c,d){b.dispatch("itemsError",{pagination:a,message:c,error:d})}})}})})();
function ECTProgressIndicator(){this.register()}
extend(ECTProgressIndicator,Component,{renderHtml:function(a){var b=this.isFioriFDEnabled()?this.generateFDClasses("busy-indicator-extended"):"";a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"sfLoadingContainer ',b,'"\x3e');this.isFioriFDEnabled()?(a.push('\x3cdiv class\x3d"',this.generateFDClasses("busy-indicator",["m"]),' " aria-hidden\x3d"false" aria-label\x3d"',MSGS.COMMON_loading,'"\x3e'),a.push('\x3cdiv class\x3d"',this.generateFDClasses("busy-indicator__circle"),'"\x3e\x3c/div\x3e'),a.push('\x3cdiv class\x3d"',
this.generateFDClasses("busy-indicator__circle"),'"\x3e\x3c/div\x3e'),a.push('\x3cdiv class\x3d"',this.generateFDClasses("busy-indicator__circle"),'"\x3e\x3c/div\x3e'),a.push('\x3c/div\x3e\x3cdiv class\x3d"',this.generateFDClasses("busy-indicator-extended__label"),' ectProgressLoadingText"\x3e',MSGS.COMMON_loading,"\x3c/div\x3e")):a.push('\x3cspan class\x3d"white" title\x3d"',MSGS.COMMON_loading,'"\x3e',MSGS.COMMON_loading,"\x3c/span\x3e");a.push("\x3c/div\x3e")}});"use strict";
function ECTTimeAccountBalanceField(a,b){this.register();this.init(a,b)}ECTTimeAccountBalanceField.FIELD_TYPE="TimeOffBalance";
(function(){juic.extend(ECTTimeAccountBalanceField,ECTInputBox,{init:function(a,b,c){this._super(a,b);this._config=c||{};this._hasPayableTimeAccounts=b.hasPayableTimeAccounts||!1;this._payableTimeAccounts=this.getFormattedTimeAccounts(b.payableTimeAccounts)||{};this._selectedTerminationDate=this.getTerminationDate(b.payableTimeAccounts);this._payoutLink=new SFSimpleLink(MSGS.TIMEANDLABOR_UI_JOBINFO_MAKE_PAYOUT,"ACTION_PAYOUT_LINK_CLICKED");this._payoutLink.addEventListener(ECTConstants.EVENT_ACTION,
this)},getFormattedTimeAccounts:function(a){for(var b=[],c=0,d=a.length;c<d;++c){var e=a[c],f=e.balanceType;"ACCOUNT"===f&&(f="ENTITLEMENT");e={timeAccountInternalId:e.timeAccountInternalId,timeAccountUnitLabel:this.getUnitLabel(e.timeUnitLabel.label),timeAccountLabel:e.timeAccountTypeExternalName+" ("+f+") / "+this.formatDateToUserLocale(e.startDateFormatted)+" - "+this.formatDateToUserLocale(e.endDateFormatted),timeUnitLabel:e.timeUnitLabel,payComponentType:e.payComponentType,startDate:e.startDate,
endDate:e.endDate,startDateFormatted:this.formatDateToUserLocale(e.startDateFormatted),endDateFormatted:this.formatDateToUserLocale(e.endDateFormatted),bookingStartDate:e.bookingStartDate,bookingStartDateFormatted:this.formatDateToUserLocale(e.bookingStartDateFormatted),bookingEndDate:e.bookingEndDate,bookingEndDateFormatted:this.formatDateToUserLocale(e.bookingEndDateFormatted),balanceType:e.balanceType};b.push(e)}return b},getUnitLabel:formatDateToUserLocale:function(a){a=(new DateFormat(ECTConstants.SERVER_DATE_FORMAT,null,null,ECTConstants.GREGORIAN)).parse(a);return(new DateFormat(MSGS.COMMON_DateFormat)).format(a)},renderHtml:function(a){this._super(a);this._hasPayableTimeAccounts&&(a.push('\x3cspan class\x3d"padleft" id\x3d"',this.id,'_payoutLink"\x3e'),this._payoutLink.renderHtml(a),a.push("\x3c/span\x3e"))},handleEvent:function(a){this._super(a);
switch(a.type){case ECTConstants.EVENT_ACTION:switch(a.actionCommand){case "ACTION_PAYOUT_LINK_CLICKED":a=this._config,a.scenario=ShowPayoutDialog.SCENARIO.TERMINATION,a.timeAccounts=this._payableTimeAccounts,a.selectedTerminationDate=this._selectedTerminationDate,this.payoutDialog=new ShowPayoutDialog(a),this.payoutDialog.addEventListener(ShowPayoutDialog.EVENTS.PAYOUT_SUCCESSFUL,this),this.payoutDialog.show()}break;case ShowPayoutDialog.EVENTS.PAYOUT_SUCCESSFUL:this.payoutDialog.close();this._successDialog||
(this._successDialog=new ECTResponseDialog(ECTConstants.TYPE_SUCCESS,MSGS.TIMEANDLABOR_PAYOUT_CREATED_SUCCESSFULLY,MSGS.COMMON_SUCCESS));var b=ECTUtil.formatDateForCalendar(this._selectedTerminationDate);a.set("actionCommand",ECTConstants.EVENT_FORM_FIELD_CHANGE);a.set("metaId","jobInfo-start-date");a.set("temOldValue",b);a.set("value",b);this.dispatch(ECTConstants.EVENT_ACTION,a);this._successDialog.show()}},_handlePayoutCompleteEvent:function(a){this.payoutDialog.close();this._successDialog||(this._successDialog=
new ECTResponseDialog(ECTConstants.TYPE_SUCCESS,MSGS.TIMEANDLABOR_PAYOUT_CREATED_SUCCESSFULLY,MSGS.COMMON_SUCCESS));a.actionCommand=ECTConstants.EVENT_FORM_FIELD_CHANGE;a.metaId="jobInfo-start-date";this.dispatch(ECTConstants.EVENT_FORM_FIELD_CHANGE,a);this._successDialog.show()},getTerminationDate:function(a){if(a)for(var b=0;b<a.length;b++)if(a[b].terminationDate)return a[b].terminationDate}})})();"use strict";function ShowPayoutDialogDAO(){}ShowPayoutDialogDAO.EVENTS={};
var PAY_COMP_TYPE_NUMBER="NUMBER";juic.extend(ShowPayoutDialogDAO,juic.Component,{makePayout:function(a){console.log("Not supported - Payout is only supported in PP3")}});function ShowPayoutDialog(a){this.register();this.init(a)}ShowPayoutDialog.EVENTS={};ShowPayoutDialog.EVENTS.CALCULATE_PAYOUT_COMPLETED="calculatePayoutCompleted";ShowPayoutDialog.EVENTS.CALCULATE_PAYOUT_UNSUCCESSFUL="calculatePayoutUnsuccessful";ShowPayoutDialog.EVENTS.HIDE="hidePayoutPopup";
ShowPayoutDialog.EVENTS.PAYOUT_SUCCESSFUL="payoutSuccessful";ShowPayoutDialog.EVENTS.PAYOUT_UNSUCCESSFUL="payoutUnSuccessful";ShowPayoutDialog.SCENARIO={};ShowPayoutDialog.SCENARIO.TERMINATION="TERMINATE";ShowPayoutDialog.SCENARIO.ADMIN="ADMIN";
juic.extend(ShowPayoutDialog,juic.Component,{dialogButton:[{label:MSGS.COMMON_Cancel,eventName:ECTConstants.EVENT_HIDE,active:!1},{label:MSGS.COMMON_Save,eventName:ECTConstants.EVENT_SAVE,active:!0,enabled:!0}],init:function(a){this._config=a||{};this._hasError=!1;this._timeAccounts=a.timeAccounts;this._selectedTerminationDate=a.selectedTerminationDate;this._scenario=a.scenario;this._payComponentType=a.timeAccounts[0].payComponentType.toString();this._balanceType=a.timeAccounts[0].balanceType;a=MSGS.TIMEANDLABOR_TIME_ACCOUNT_BOOKING_PAYOUT_POPTUP_TITLE;
this.controller=new ShowPayoutDialogDAO;this.controller.addEventListener(ShowPayoutDialog.EVENTS.CALCULATE_PAYOUT_COMPLETED,this,"handleEvent");this.controller.addEventListener(ShowPayoutDialog.EVENTS.CALCULATE_PAYOUT_UNSUCCESSFUL,this,"handleEvent");this.controller.addEventListener(ShowPayoutDialog.EVENTS.PAYOUT_SUCCESSFUL,this,"handleEvent");this.controller.addEventListener(ShowPayoutDialog.EVENTS.PAYOUT_UNSUCCESSFUL,this,"handleEvent");this.dialog=new ShowPayoutDialogContent({timeAccounts:this._timeAccounts,
selectedTerminationDate:this._selectedTerminationDate,scenario:this._scenario});this.respDialog=new ECTDialogBox(a,this.dialog,this.dialogButton,540,280,!1);this.respDialog.addEventListener(ECTConstants.EVENT_ACTION,this);this._errorDialog=null;this.dialog._dateSelectionField.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleDateChangeEvent");this.dialog._dateSelectionField.addEventListener("fieldError",this,"_handleDateErrorEvent");this.dialog._completePayoutRadio.addEventListener(ECTConstants.EVENT_CHANGE,
this,"_handleChangeEvent");this.dialog._quantityOfPayout.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleChangeEvent");this._payComponentType!==PAY_COMP_TYPE_NUMBER&&(this.dialog._payoutRate.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleChangeEvent"),this.dialog._payoutRateRadio.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleChangeEvent"));this.dialog._timeAccountCombo.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleChangeEvent");this.dialog.addEventListener(ShowPayoutDialogContent.DISABLE_SAVE_BUTTON,
this,"_disableSaveButton");this.dialog.addEventListener(ShowPayoutDialogContent.ENABLE_SAVE_BUTTON,this,"_enableSaveButton");this.dialog.addEventListener(ShowPayoutDialogContent.ACCOUNT_SELECTION_CHANGED,this,"_handleAccountSelectionChanged");this.dialog.addEventListener(ShowPayoutDialogContent.RESIZE,this,"_resize");this.activitySpinner=new SFLoading;this.jQueryId="#"+this.id.replace(/:/g,"\\:")},_handleDateErrorEvent:_disableSaveButton:function(){this.respDialog.disableButton(1)},
_enableSaveButton:function(){this.respDialog.enableButton(1)},isAfterBookingEndDate:function(){return this.dialog.getBookingEndDate()<this.dialog._dateSelectionField.getValue()},isBeforeBookingStartDate:function(){return this.dialog.getBookingStartDate()>this.dialog._dateSelectionField.getValue()},isAfterTerminationDate:function(){return this.dialog.getTerminationDate()<this.dialog._dateSelectionField.getValue()},isBeforeHireDate:function(){return this.dialog.getHireDate()>this.dialog._dateSelectionField.getValue()},
_resize:function(a){a.height&&0<a.height&&(this.respDialog.setInnerHeight(a.height),SFOverlayMgr.centerComponent(this.respDialog.id))},_handleChangeEvent:function(a){var b=this.dialog._completePayoutRadio.getValue(),c;this.dialog._payComponentType=this.dialog._timeAccountComboSelection[this.dialog._timeAccountCombo.selectedItem].payComponentType;b===this.dialog.VALUE_COMPLETE_PAYOUT?(this.dialog._quantityOfPayout.setValue(this.dialog._quantityOfPayout.timeAccountBalance),c=Number(this.dialog._quantityOfPayout.timeAccountBalance),
isNaN(c)&&(c=ECTUtil.toDBString(this.dialog._quantityOfPayout.timeAccountBalance))):(c=Number(this.dialog._quantityOfPayout.getValue()),isNaN(c)&&(c=ECTUtil.toDBString(this.dialog._quantityOfPayout.getValue())));var d=this.dialog._payoutRate.getValue();isNaN(d)&&(d=ECTUtil.toDBString(this.dialog._payoutRate.getValue()));if(this.dialog._payComponentType!==PAY_COMP_TYPE_NUMBER){var e=this.dialog._payoutRateRadio.getValue();e===this.dialog.VALUE_STANDARD_RATE&&this.dialog._payoutRate.setValue(this.dialog._payoutRate.rate)}this.isAfterBookingEndDate()?
(this.dialog.setDateErrorMessage(!0,MSGS.TIMEANDLABOR_PAYOUT_DATE_AFTER_BOOKING_END_DATE),this.dialog._dateSelectionField.setValue(this.dialog.getBookingEndDate()),this._enableSaveButton()):this.isBeforeBookingStartDate()?(this.dialog.setDateErrorMessage(!0,MSGS.TIMEANDLABOR_PAYOUT_DATE_BEFORE_BOOKING_START_DATE),this.dialog._dateSelectionField.setValue(this.dialog.getBookingStartDate()),this._enableSaveButton()):this.isBeforeHireDate()?(this.dialog.setDateErrorMessage(!0,MSGS.TIMEANDLABOR_PAYOUT_DATE_CANNOT_BE_BEFORE_HIRE_DATE),
this.dialog._dateSelectionField.setValue(this.dialog.getBookingStartDate()),this._enableSaveButton()):this.isAfterTerminationDate()?(this.dialog.setDateErrorMessage(!0,MSGS.TIMEANDLABOR_PAYOUT_DATE_CANNOT_BE_AFTER_TERMINATION_DATE),this.dialog._dateSelectionField.setValue(this.dialog.getBookingEndDate()),this._enableSaveButton()):(this.dialog.setDateErrorMessage(!1),this._disableSaveButton());this.dialog._payComponentType!==PAY_COMP_TYPE_NUMBER?this.dialog.isPayoutDateValid()&&this.dialog.isQuantityOfPayoutValid(a)&&
this.dialog.isPayoutRateValid(a)?(this._enableSaveButton(),a={timeAccountInternalId:this.dialog._timeAccountCombo.getValue(),effectiveDate:this.dialog._dateSelectionField.getValue(),payoutQuantity:c,payoutQuantityType:b,payoutRate:d,payoutRateType:ECTUtil.toDBString(e),makePayout:!1,payoutScenario:this._scenario,balanceType:this._balanceType,payComponentType:this.dialog._payComponentType},this.controller.makePayout(a),this.dialog.enableLoadingIcons(!0)):this._disableSaveButton():this.dialog.isPayoutDateValid()&&
this.dialog.isQuantityOfPayoutValid(a)?(this._enableSaveButton(),a={timeAccountInternalId:this.dialog._timeAccountCombo.getValue(),effectiveDate:this.dialog._dateSelectionField.getValue(),payoutQuantity:c,payoutQuantityType:b,makePayout:!1,payoutScenario:this._scenario,balanceType:this._balanceType,payComponentType:this.dialog._payComponentType},this.controller.makePayout(a),this.dialog.enableLoadingIcons(!0)):this._disableSaveButton()},_handleDateChangeEvent:function(){if(""===this.dialog._dateSelectionField.getValue())this.dialog._dateSelectionField.setErrorMsg(MSGS.TIMEANDLABOR_PAYOUT_DATE_EMPTY);
else{this.dialog._completePayoutRadio.setValue(this.dialog.VALUE_COMPLETE_PAYOUT);this.dialog.selectRadioField(this.dialog._completePayoutRadio,0);this.dialog._payComponentType!==PAY_COMP_TYPE_NUMBER&&(this.dialog._payoutRateRadio.setValue(this.dialog.VALUE_STANDARD_RATE),this.dialog.selectRadioField(this.dialog._payoutRateRadio,0));var a;a=this.dialog._payComponentType!==PAY_COMP_TYPE_NUMBER?{timeAccountInternalId:this.dialog._timeAccountCombo.getValue(),effectiveDate:this.dialog._dateSelectionField.getValue(),
payoutQuantity:ECTUtil.toDBString(Number(0)),payoutQuantityType:this.dialog._completePayoutRadio.getValue(),payoutRate:ECTUtil.toDBString(Number(0)),payoutRateType:this.dialog._payoutRateRadio.getValue(),makePayout:!1,payoutScenario:this._scenario,balanceType:this._balanceType,payComponentType:this.dialog._payComponentType}:{timeAccountInternalId:this.dialog._timeAccountCombo.getValue(),effectiveDate:this.dialog._dateSelectionField.getValue(),payoutQuantity:ECTUtil.toDBString(Number(0)),payoutQuantityType:this.dialog._completePayoutRadio.getValue(),
makePayout:!1,payoutScenario:this._scenario,balanceType:this._balanceType,payComponentType:this.dialog._payComponentType};this.controller.makePayout(a);this.isAfterBookingEndDate()?(this.dialog.setDateErrorMessage(!0,MSGS.TIMEANDLABOR_PAYOUT_DATE_AFTER_BOOKING_END_DATE),this.dialog._dateSelectionField.setValue(this.dialog.getBookingEndDate()),this._enableSaveButton()):this.isBeforeBookingStartDate()?(this.dialog.setDateErrorMessage(!0,MSGS.TIMEANDLABOR_PAYOUT_DATE_BEFORE_BOOKING_START_DATE),this.dialog._dateSelectionField.setValue(this.dialog.getBookingStartDate()),
this._enableSaveButton()):this.isBeforeHireDate()?(this.dialog.setDateErrorMessage(!0,MSGS.TIMEANDLABOR_PAYOUT_DATE_CANNOT_BE_BEFORE_HIRE_DATE),this.dialog._dateSelectionField.setValue(this.dialog.getBookingStartDate()),this._enableSaveButton()):this.isAfterTerminationDate()?(this.dialog.setDateErrorMessage(!0,MSGS.TIMEANDLABOR_PAYOUT_DATE_CANNOT_BE_AFTER_TERMINATION_DATE),this.dialog._dateSelectionField.setValue(this.dialog.getBookingEndDate()),this._enableSaveButton()):this.dialog.setDateErrorMessage(!1)}},
show:function(){var a;a=this.dialog.getPayComponentType()!==PAY_COMP_TYPE_NUMBER?{timeAccountInternalId:this.dialog._timeAccountCombo.getValue(),effectiveDate:this.dialog._dateSelectionField.getValue(),payoutQuantity:ECTUtil.toDBString(this.dialog._quantityOfPayout.getValue()),payoutQuantityType:this.dialog._completePayoutRadio.getValue(),payoutRate:ECTUtil.toDBString(this.dialog._payoutRate.getValue()),payoutRateType:this.dialog._payoutRateRadio.getValue(),makePayout:!1,payoutScenario:this._scenario,
balanceType:this._balanceType,payComponentType:this.dialog.getPayComponentType()}:{timeAccountInternalId:this.dialog._timeAccountCombo.getValue(),effectiveDate:this.dialog._dateSelectionField.getValue(),payoutQuantity:ECTUtil.toDBString(this.dialog._quantityOfPayout.getValue()),payoutQuantityType:this.dialog._completePayoutRadio.getValue(),makePayout:!1,payoutScenario:this._scenario,balanceType:this._balanceType,payComponentType:this.dialog.getPayComponentType()};this.controller.makePayout(a);this.respDialog.showDialog()},
_handleAccountSelectionChanged:function(){this.dialog._completePayoutRadio.setValue(this.dialog.VALUE_COMPLETE_PAYOUT);this.dialog._payComponentType=this._config.timeAccounts[this.dialog._timeAccountCombo.selectedItem].payComponentType;this.dialog.selectRadioField(this.dialog._completePayoutRadio,0);this.dialog._payComponentType!==PAY_COMP_TYPE_NUMBER&&(this.dialog._payoutRateRadio.setValue(this.dialog.VALUE_STANDARD_RATE),this.dialog.selectRadioField(this.dialog._payoutRateRadio,0));this._scenario===
ShowPayoutDialog.SCENARIO.TERMINATION&&this.dialog._dateSelectionField.setValue(ECTUtil.formatDateForCalendar(this._selectedTerminationDate));var a;a=this.dialog._payComponentType!==PAY_COMP_TYPE_NUMBER?{timeAccountInternalId:this.dialog._timeAccountCombo.getValue(),effectiveDate:this.dialog._dateSelectionField.getValue(),payoutQuantity:ECTUtil.toDBString(this.dialog._quantityOfPayout.getValue()),payoutQuantityType:this.dialog._completePayoutRadio.getValue(),payoutRate:ECTUtil.toDBString(this.dialog._payoutRate.getValue()),
payoutRateType:this.dialog._payoutRateRadio.getValue(),makePayout:!1,payoutScenario:this._scenario,balanceType:this._balanceType,payComponentType:this.dialog._payComponentType}:{timeAccountInternalId:this.dialog._timeAccountCombo.getValue(),effectiveDate:this.dialog._dateSelectionField.getValue(),payoutQuantity:ECTUtil.toDBString(this.dialog._quantityOfPayout.getValue()),payoutQuantityType:this.dialog._completePayoutRadio.getValue(),makePayout:!1,payoutScenario:this._scenario,balanceType:this._balanceType,
payComponentType:this.dialog._payComponentType};this.dialog.showRateFieldsBasedOnPayComponentType();this.controller.makePayout(a)},setLoading:function(a){!0===a?(this.activitySpinner.hide(),SFOverlayMgr.showOverlay(this.activitySpinner,!0)):this.activitySpinner.hide()},save:function(){var a;a=this.dialog._completePayoutRadio.getValue();if(this.dialog._payComponentType!==PAY_COMP_TYPE_NUMBER&&this.dialog.isPayoutDateValid()&&this.dialog.isQuantityOfPayoutValid()&&this.dialog.isPayoutRateValid()){a===
this.dialog.VALUE_COMPLETE_PAYOUT?(a=this.dialog._quantityOfPayout.timeAccountBalance,isNaN(a)&&(a=ECTUtil.toDBString(this.dialog._quantityOfPayout.timeAccountBalance))):(a=this.dialog._quantityOfPayout.getValue(),isNaN(a)&&(a=ECTUtil.toDBString(this.dialog._quantityOfPayout.getValue())));var b=this.dialog._payoutRate.getValue();isNaN(b)&&(b=ECTUtil.toDBString(this.dialog._payoutRate.getValue()));a={timeAccountInternalId:this.dialog._timeAccountCombo.getValue(),effectiveDate:this.dialog._dateSelectionField.getValue(),
payoutQuantity:a,payoutQuantityType:this.dialog._completePayoutRadio.getValue(),payoutRate:b,payoutRateType:this.dialog._payoutRateRadio.getValue(),makePayout:!0,payoutScenario:this._scenario,balanceType:this._balanceType,payComponentType:this.dialog._payComponentType};this.setLoading(!0);this.controller.makePayout(a)}else this.dialog._payComponentType===PAY_COMP_TYPE_NUMBER&&this.dialog.isPayoutDateValid()&&this.dialog.isQuantityOfPayoutValid()&&(a===this.dialog.VALUE_COMPLETE_PAYOUT?(a=this.dialog._quantityOfPayout.timeAccountBalance,
isNaN(a)&&(a=ECTUtil.toDBString(this.dialog._quantityOfPayout.timeAccountBalance))):(a=this.dialog._quantityOfPayout.getValue(),isNaN(a)&&(a=ECTUtil.toDBString(this.dialog._quantityOfPayout.getValue()))),a={timeAccountInternalId:this.dialog._timeAccountCombo.getValue(),effectiveDate:this.dialog._dateSelectionField.getValue(),payoutQuantity:a,payoutQuantityType:this.dialog._completePayoutRadio.getValue(),makePayout:!0,payoutScenario:this._scenario,balanceType:this._balanceType,payComponentType:this.dialog._payComponentType},
this.setLoading(!0),this.controller.makePayout(a))},close:function(){this.setLoading(!1);this._hasError=!1;this.respDialog.close()},handleEvent:function(a){a.type===ECTConstants.EVENT_ACTION&&(a.actionCommand===ECTConstants.EVENT_CLOSE?this.close():a.actionCommand===ECTConstants.EVENT_SAVE?ECTValidationMgr.validate(this.dialog._dateSelectionField).result&&this.save():a.actionCommand===ECTConstants.EVENT_HIDE&&this.dispatch(ShowPayoutDialog.EVENTS.HIDE,{}));var b,c;if(a.type===ShowPayoutDialog.EVENTS.CALCULATE_PAYOUT_COMPLETED){b=
a.actionResult;this.setLoading(!1);this.dialog.setWarningMessage(!1);this.dialog.hasError?this.respDialog.disableButton(1):this.respDialog.enableButton(1);switch(b.status){case ECTConstants.TYPE_WARNING:this.dialog.setWarningMessage(!0,b.global),this.dialog.hideLoadingIcons(),this._hasError=!0}this.dialog.updateValues(a);this.dialog.setHireDate(a.hireDate);this.dialog.setTerminationDate(a.terminationDate)}else if(a.type===ShowPayoutDialog.EVENTS.CALCULATE_PAYOUT_UNSUCCESSFUL)switch(this.setLoading(!1),
b=a.actionResult,b.status){case ECTConstants.TYPE_WARNING:this.dialog.setWarningMessage(!0,b.global);this.dialog.hideLoadingIcons();this._hasError=!0;this.dialog.updateValues(a);this.dialog.setHireDate(a.hireDate);this.dialog.setTerminationDate(a.terminationDate);break;case ECTConstants.TYPE_ERROR:c=b.global&&0<b.global.length?b.global.join("\x3cbr/\x3e"):MSGS.TIMEANDLABOR_SYSTEM_ERROR;this.showErrorDialog(b.status,c,MSGS.TIMEANDLABOR_PAYOUT_ERROR);this.close();break;default:this.dialog.updateValues(a),
this.dialog.resize(340),this.dialog.setHireDate(a.hireDate),this.dialog.setTerminationDate(a.terminationDate),this.respDialog.disableButton(1)}else a.type===ShowPayoutDialog.EVENTS.PAYOUT_UNSUCCESSFUL?(c=a.actionResult.global&&0<a.actionResult.global.length?a.actionResult.global.join("\x3cbr/\x3e"):MSGS.TIMEANDLABOR_SYSTEM_ERROR,this.showErrorDialog(a.actionResult.status,c,MSGS.TIMEANDLABOR_PAYOUT_ERROR),this.close()):a.type===ShowPayoutDialog.EVENTS.PAYOUT_SUCCESSFUL&&this.dispatch(a.type,{result:a.actionResult})},
showErrorDialog:function(a,b,c){this._errorDialog?(this._errorDialog.setSystemMessage(b),this._errorDialog.respDialog.setDialogTitle(c)):this._errorDialog=new ECTResponseDialog(a,b,c);this._errorDialog.show()},cleanup:function(){this.unregister()}});ShowPayoutDialogContent.DISABLE_SAVE_BUTTON="disableSaveButton";ShowPayoutDialogContent.ENABLE_SAVE_BUTTON="enableSaveButton";ShowPayoutDialogContent.ACCOUNT_SELECTION_CHANGED="accountSelectionChanged";ShowPayoutDialogContent.RESIZE="resizeDialog";
function ShowPayoutDialogContent(a){this.VALUE_COMPLETE_PAYOUT="COMPLETE_PAYOUT";this.VALUE_PARTIAL_PAYOUT="PARTIAL_PAYOUT";this.VALUE_STANDARD_RATE="STANDARD_RATE";this.VALUE_CUSTOM_RATE="CUSTOM_RATE";this.register();this.init(a)}
juic.extend(ShowPayoutDialogContent,juic.Component,{UNDEF_SELECT_OPTIONS:[{label:"\x3cundefined\x3e",value:"UNDEFINED"}],init:function(a){this._config=a||{};this._timeAccounts=a.timeAccounts;this._scenario=a.scenario;this._payComponentType=a.payComponentType;this._balanceType=a.balanceType;this._selectedTerminationDate=a.selectedTerminationDate;this._loading='\x3cdiv class\x3d"sfLoadingContainerSm"\x3e\x3cspan class\x3d"white" \x3e\x3c/span\x3e\x3c/div\x3e';this.jQueryId="#"+this.id.replace(/:/g,
"\\:");this._timeAccountComboSelection=[];for(a=0;a<this._timeAccounts.length;a++)this._timeAccountComboSelection.push({label:this._timeAccounts[a].timeAccountLabel,value:this._timeAccounts[a].timeAccountInternalId,unit:this._timeAccounts[a].timeAccountUnitLabel,payComponentType:this._timeAccounts[a].payComponentType,bookingStartDate:this._timeAccounts[a].bookingStartDate,bookingStartDateFormatted:this._timeAccounts[a].bookingStartDateFormatted,bookingEndDate:this._timeAccounts[a].bookingEndDate,
bookingEndDateFormatted:this._timeAccounts[a].bookingEndDateFormatted,balanceType:this._timeAccounts[a].balanceType});a={type:ECTConstants.TYPE_SELECT,writable:!0,selectOptions:this._timeAccountComboSelection||this.UNDEF_SELECT_OPTIONS};this._timeAccountCombo=ECTFieldsFactory.getFormField(a.selectOptions[0],a);this._timeAccountCombo.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleTimeAccountSelectionChange");this._defaultDate=ECTUtil.formatDateForCalendar(new Date);(a=this._scenario===ShowPayoutDialog.SCENARIO.TERMINATION)&&
this._selectedTerminationDate&&(this._defaultDate=ECTUtil.formatDateForCalendar(this._selectedTerminationDate));this._dateSelectionField=ECTFieldsFactory.getFormField(this._defaultDate,{type:ECTCalendar.FIELD_TYPE_DATE,writable:!a,label:MSGS.TIMEANDLABOR_PAYOUT_DATE});this._dateSelectionField.bindSpecificValidators({label:MSGS.TIMEANDLABOR_RF_DATE});this._completePayoutRadio=new ECTRadioGroupHiddenLabel(this.VALUE_COMPLETE_PAYOUT,[{value:this.VALUE_COMPLETE_PAYOUT,label:MSGS.TIMEANDLABOR_PAYOUT_COMPLETE_PAYOUT,
checked:!0},{value:this.VALUE_PARTIAL_PAYOUT,label:MSGS.TIMEANDLABOR_PAYOUT_PARTIAL_PAYOUT}],MSGS.TIMEANDLABOR_PAYOUT_BALANCE_ARIA_TEXT);this._completePayoutRadio.addEventListener(ECTConstants.EVENT_CHANGE,this,"_enableQuantityOfPayout");this._quantityOfPayout=new ECTInputBox("0",{writable:!0,enabled:!1,label:MSGS.TIMEANDLABOR_PAYOUT_QUANTITY_LABEL});this._quantityOfPayout.bindSpecificValidators({type:"double"});this._payComponentType!==PAY_COMP_TYPE_NUMBER&&(this._payoutRateRadio=new ECTRadioGroupHiddenLabel(this.VALUE_STANDARD_RATE,
[{value:this.VALUE_STANDARD_RATE,label:MSGS.TIMEANDLABOR_PAYOUT_STANDARD_RATE,checked:!0},{value:this.VALUE_CUSTOM_RATE,label:MSGS.TIMEANDLABOR_PAYOUT_CUSTOM_RATE}],MSGS.TIMEANDLABOR_PAYOUT_RATE_ARIA),this._payoutRateRadio.addEventListener(ECTConstants.EVENT_CHANGE,this,"_enablePayoutRate"),a=this.getUnit()===MSGS.TIMEANDLABOR_TIME_UNIT_HOUR?MSGS.TIMEANDLABOR_PAYOUT_RATE_HOUR_LABEL:MSGS.TIMEANDLABOR_PAYOUT_RATE_DAY_LABEL,this._payoutRate=new ECTInputBox("0",{writable:!0,enabled:!1,label:a}),this._payoutRate.bindSpecificValidators({type:"double"}))},
_handleTimeAccountSelectionChange:_enableQuantityOfPayout:function(a){a.value===this.VALUE_COMPLETE_PAYOUT?(this._quantityOfPayout.resetError(),this._quantityOfPayout.setEnabled(!1)):this._quantityOfPayout.setEnabled(!0)},_enablePayoutRate:function(a){a.value===this.VALUE_STANDARD_RATE?(this._payoutRate.resetError(),this._payoutRate.setEnabled(!1)):this._payoutRate.setEnabled(!0)},updateValues:function(a){this._quantityOfPayout.timeAccountBalance=
a.timeAccountBalance;this._dateSelectionField.setValue(a.payoutDate);this.setPayComponentType(a.payComponentType);this.setPayoutQuantity(a.quantityOfPayout);this.getPayComponentType()!==PAY_COMP_TYPE_NUMBER?(this._payoutRate.rate=a.payoutRate,this.setPayoutRate(a.payoutRate),this.isZeroValue(a.payoutRate)||this.isZeroValue(a.quantityOfPayout)?this.dispatch(ShowPayoutDialogContent.DISABLE_SAVE_BUTTON):this.dispatch(ShowPayoutDialogContent.ENABLE_SAVE_BUTTON)):this.isZeroValue(a.quantityOfPayout)?this.dispatch(ShowPayoutDialogContent.DISABLE_SAVE_BUTTON):
this.dispatch(ShowPayoutDialogContent.ENABLE_SAVE_BUTTON);Number(0>=a.timeAccountBalance)||a.residueBalance?this.setAccountBalanceMessage(!0,MSGS.TIMEANDLABOR_PAYOUT_INSUFFICIENT_BALANCE):this.setAccountBalanceMessage(!1);this.getPayComponentType()!==PAY_COMP_TYPE_NUMBER&&this._payoutRateRadio.setLabel(0,a.normalRateLabel);this.showPartialPayout(!0);this.getPayComponentType()!==PAY_COMP_TYPE_NUMBER&&(a.normalRateLabel!==MSGS.TIMEANDLABOR_PAYOUT_STANDARD_RATE?this.showStandardRate(!0):this.showStandardRate(!1),
this.setValueForComponent("payoutCurrency",a.payoutCurrency),this.setValueForComponent("totalPayoutAmount",a.totalPayoutAmount+" "+a.payoutCurrency));this.setValueForComponent("accountBalance",a.timeAccountBalance);this.hideLoadingIcons()},isZeroValue:function(a){return a<=Number(ECTUtil.toDBString(0))},setPayoutRate:function(a){this._payoutRate.setValue(a);this.isPayoutRateValid()||(this.selectRadioField(this._payoutRateRadio,1),this._payoutRateRadio.setValue(this.VALUE_CUSTOM_RATE));a={value:this._payoutRateRadio.getValue()};
this._enablePayoutRate(a)},setPayoutQuantity:function(a){this._quantityOfPayout.setValue(a);this.isQuantityOfPayoutValid()||(this.selectRadioField(this._completePayoutRadio,1),this._completePayoutRadio.setValue(this.VALUE_PARTIAL_PAYOUT));a={value:this._completePayoutRadio.getValue()};this._enableQuantityOfPayout(a)},setPayComponentType:function(a){this._payComponentType=a},isPayoutRateValid:function(a){var b=!0;if(this._payoutRate.getErrorMsg())return!1;var c=this._payoutRate.getValue();if(this._payoutRate.checkForErrors())return!1;
this.isZeroValue(c)?(b=!1,a&&(a.value===this.VALUE_CUSTOM_RATE||this.isZeroValue(a.value))&&this._payoutRate.setErrorMsg(MSGS.TIMEANDLABOR_PAYOUT_QUANTITY_SHOULD_BE_MORE_THAN_ZERO),this.hasError=!0):(this._payoutRate.resetError(),this.hasError=!1,this._enablePayoutRate(!1));return b},showRateFieldsBasedOnPayComponentType:function(){this._payComponentType!==PAY_COMP_TYPE_NUMBER?jQuery("#rateFields").show():jQuery("#rateFields").hide()},showStandardRate:function(a){var b=jQuery("#payoutRateRadio div div")[0];
b&&(jQuery("#payoutRateInput").removeClass(),a?(jQuery(b).show(),jQuery("#payoutRateInput").addClass("tlmInputField"),this.resize(380)):(jQuery(b).hide(),jQuery("#payoutRateInput").addClass("tlmInputFieldRate"),this.resize(370)))},showPartialPayout:function(a){var b=jQuery("#completePayoutRadio div div")[1];b&&(a?(jQuery(b).show(),jQuery("#payoutQtyInput").css("visibility","visible"),this.resize(380)):(jQuery(b).hide(),jQuery("#payoutQtyInput").css("visibility","hidden"),this.resize(370)))},isQuantityOfPayoutValid:function(a){var b=
!0;if(this._quantityOfPayout.getErrorMsg()||this._quantityOfPayout.checkForErrors())return!1;var c=ECTUtil.toDBString(this._quantityOfPayout.getValue());if(c.length-c.indexOf(".")-1>this.MAX_DECIMAL_PLACES)return this._quantityOfPayout.setErrorMsg(MSGS.get("TIMEANDLABOR_MANUAL_ADJUSTMENT_TOO_MANY_DECIMALS",this.MAX_DECIMAL_PLACES)),this.hasError=!0,!1;c=Number(this._quantityOfPayout.timeAccountBalance);isNaN(c)&&(c=ECTUtil.toDBString(this._quantityOfPayout.timeAccountBalance));var d=Number(this._quantityOfPayout.getValue());
isNaN(d)&&(d=ECTUtil.toDBString(this._quantityOfPayout.getValue()));if(d>c)return b=!1,this._quantityOfPayout.setErrorMsg(MSGS.TIMEANDLABOR_PAYOUT_QUANTITY_SHOULD_NOT_EXCEED_ACCOUNT_BALANCE),this.hasError=!0,b;this.isZeroValue(this._quantityOfPayout.getValue())?(b=!1,this.hasError=!0,a&&(a.value===this.VALUE_PARTIAL_PAYOUT||this.isZeroValue(a.value))&&this._quantityOfPayout.setErrorMsg(MSGS.TIMEANDLABOR_PAYOUT_QUANTITY_SHOULD_BE_MORE_THAN_ZERO)):(this._quantityOfPayout.resetError(),this.hasError=
!1,a={value:this._completePayoutRadio.getValue()},this._enableQuantityOfPayout(a));return b},isPayoutDateValid:selectRadioField:function(a,b){for(var c=0;c<a.getRadioFields().length;c++)c===b?a.getRadioFields()[c].setChecked(!0):a.getRadioFields()[c].setChecked(!1)},hideLoadingIcons:function(){this.setLoadingForComponent("timeAccountBalanceLoad",!1);this.getPayComponentType()!==PAY_COMP_TYPE_NUMBER&&(this.setLoadingForComponent("currencyLoad",
!1),this.setLoadingForComponent("totalAmountLoad",!1))},setLoadingForComponent:function(a,b,c){a=juic.$(a);!0===b?a.style.display=c:a&&(a.style.display="none")},setValueForComponent:function(a,b){var c=juic.$(a);c&&(c.innerHTML=Util.escapeHTML(b))},setDateErrorMessage:function(a,b){this.setLoadingForComponent("infoText",a,"inline");!0===a&&(this.setValueForComponent("infoText",b),this.resize(380))},setWarningMessage:function(a,b){this.setLoadingForComponent("configWarning",a,"inline-block");!0===
a&&(this.setValueForComponent("configWarning",b),this.resize(380))},setAccountBalanceMessage:function(a,b){this.setLoadingForComponent("accountBalanceInfoText",a,"block");!0===a&&(this.setValueForComponent("accountBalanceInfoText",b),this.resize(450))},resize:enableLoadingIcons:function(a){this.setLoadingForComponent("timeAccountBalanceLoad",a,"inline");this.getPayComponentType()!==PAY_COMP_TYPE_NUMBER&&(this.setLoadingForComponent("currencyLoad",
a,"inline"),this.setLoadingForComponent("totalAmountLoad",a,"inline"))},renderHtml:function(a){var b=this.getUnit(),c=this.getPayComponentType();a.push('\x3cdiv class\x3d"tlmPayoutDialogContent" style\x3d"line-height:normal;"\x3e');a.push("\x3cdl\x3e");a.push("\x3cdt\x3e",MSGS.TIMEANDLABOR_ADMIN_LABEL_ACCOUNT_TIME_ACCOUNT,": \x3c/dt\x3e");1===this._timeAccounts.length?a.push("\x3cdd\x3e",this._timeAccounts[0].timeAccountLabel,"\x3c/dd\x3e"):a.push("\x3cdd\x3e",this._timeAccountCombo,"\x3c/dd\x3e");
a.push("\x3cdt\x3e",MSGS.TIMEANDLABOR_PAYOUT_DATE,": \x3c/dt\x3e");a.push('\x3cdd\x3e\x3cdiv class\x3d"informationStyle"\x3e',this._dateSelectionField,'\x3cspan style\x3d"display:block;"\x3e\x3cspan style\x3d"display:none;" id\x3d"infoText" class\x3d"infoTextStyle"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3c/dd\x3e');a.push("\x3cdt\x3e",MSGS.TIMEANDLABOR_PAYOUT_ACCOUNT_BALANCE,": \x3c/dt\x3e");a.push('\x3cdd\x3e\x3cdiv class\x3d"informationStyle" aria-label\x3d"',MSGS.TIMEANDLABOR_PAYOUT_ACCOUNT_BALANCE,
'"\x3e\x3cspan id\x3d"accountBalance"\x3e\x3c/span\x3e\x3cspan style\x3d"display:inline-block;" id\x3d"timeAccountBalanceLoad" class\x3d"sfLoadingContainerSm"\x3e\x3cspan class\x3d"white"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"tlmPayoutDialogUnitSpan"\x3e',b,'\x3c/span\x3e\x3cspan style\x3d"display:none;" id\x3d"accountBalanceInfoText" class\x3d"infoTextStyle"\x3e\x3c/span\x3e\x3cdiv\x3e\x3c/dd\x3e');a.push("\x3cdt\x3e",MSGS.TIMEANDLABOR_PAYOUT_QUANTITY_LABEL,":\x3c/dt\x3e");a.push('\x3cdt\x3e\x3cdiv id\x3d"completePayoutRadio"\x3e',
this._completePayoutRadio,"\x3c/div\x3e\x3c/dt\x3e");a.push('\x3cdd id\x3d"payoutQtyInput" class\x3d"tlmInputField"\x3e\x3cdiv\x3e',this._quantityOfPayout,'\x3cspan class\x3d"tlmPayoutDialogUnit"\x3e',b,"\x3c/span\x3e\x3c/div\x3e\x3c/dd\x3e");c!==PAY_COMP_TYPE_NUMBER&&(a.push('\x3cdiv id\x3d"rateFields"\x3e'),b===MSGS.TIMEANDLABOR_TIME_UNIT_HOUR?a.push("\x3cdt\x3e",MSGS.TIMEANDLABOR_PAYOUT_RATE_HOUR_LABEL,":\x3c/dt\x3e"):b===MSGS.TIMEANDLABOR_TIME_UNIT_DAY&&a.push("\x3cdt\x3e",MSGS.TIMEANDLABOR_PAYOUT_RATE_DAY_LABEL,
": \x3c/dt\x3e"),a.push('\x3cdt\x3e\x3cdiv id\x3d"payoutRateRadio"\x3e',this._payoutRateRadio,"\x3c/div\x3e\x3c/dt\x3e"),a.push('\x3cdd  id\x3d"payoutRateInput" class\x3d"tlmInputField"\x3e\x3cdiv\x3e',this._payoutRate,'\x3cspan class\x3d"tlmPayoutDialogUnit"\x3e\x3cspan id\x3d"payoutCurrency"\x3e\x3c/span\x3e\x3cspan style\x3d"display:inline-block; padding:0;" id\x3d"currencyLoad" class\x3d"sfLoadingContainerSm"\x3e\x3cspan class\x3d"white"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3c/dd\x3e'),
a.push("\x3cdt\x3e",MSGS.TIMEANDLABOR_PAYOUT_TOTAL_LABEL,":\x3c/dt\x3e"),a.push('\x3cdd\x3e\x3cdiv\x3e\x3cspan id\x3d"totalPayoutAmount" class\x3d"tlmTotalPayout"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan style\x3d"display:inline-block;" id\x3d"totalAmountLoad" class\x3d"sfLoadingContainerSm"\x3e\x3cspan class\x3d"white"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3c/dd\x3e'),a.push("\x3c/div\x3e"));a.push('\x3cdd class\x3d"warningMessage"\x3e\x3cdiv class\x3d"informationStyle"\x3e\x3cspan style\x3d"display:none;" id\x3d"configWarning" class\x3d"sfWarningContainerSm"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/dd\x3e');
a.push("\x3c/dl\x3e\x3c/div\x3e")},getUnit:function(){return 1===this._timeAccounts.length?this._timeAccounts[0].timeAccountUnitLabel:this._timeAccountComboSelection[this._timeAccountCombo.selectedItem].unit},getPayComponentType:getBookingEndDate:function(){return 1===this._timeAccounts.length?this._timeAccounts[0].bookingEndDate:this._timeAccountComboSelection[this._timeAccountCombo.selectedItem].bookingEndDate},
getBookingStartDate:function(){return 1===this._timeAccounts.length?this._timeAccounts[0].bookingStartDate:this._timeAccountComboSelection[this._timeAccountCombo.selectedItem].bookingStartDate},getHireDate:function(){return this._hireDate},getTerminationDate:function(){return this._terminationDate},setHireDate:function(a){this._hireDate=a},setTerminationDate:function(a){this._terminationDate=a},cleanup:function(){this.unregister()}});
function ECTRadioGroupHiddenLabel(a,b,c,d,e){this.register();this.init(a,b,c,d,e)}
juic.extend(ECTRadioGroupHiddenLabel,ECTRadioGroup,{renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"radioGroup" role\x3d"radiogroup" aria-describedby\x3d"',this.id,'_label"\x3e');this._label&&a.push("\x3cdiv id\x3d'",this.id,"_label' class\x3d'label hiddenAriaContent'\x3e",this._label,"\x3c/div\x3e");a.push(this._radioFields);a.push("\x3c/div\x3e")},setLabel:function(a,b){juic.$(this._radioFields[a].id+"_label").innerHTML=Util.escapeHTML(b)}});"use strict";
function ECTWorkScheduleField(a,b){this.register();this._init(a,b)}ECTWorkScheduleField.FIELD_TYPE="TimeOffWorkSchedule";
(function(){juic.extend(ECTWorkScheduleField,ECTFoundationAutoComplete,{_init:function(a,b){this._super(a,b);this._manageWorkScheduleAllowed=b.manageWorkScheduleAllowed;this._timeRecordingVariant=b.timeRecordingVariant;this._writable=b.writable;this._effectiveDate=b.effectiveDate;this._userId=b.selectedUserId||"";this._companyId=b.companyId;this._isOldValue=b.isOldValue||!1;this._writableState=!1;this._moreLink=new SFSimpleLink(MSGS.TIMEANDLABOR_UI_JOBINFO_WORKSCHEDULE_DETAILS,"ACTION_MORE_LINK_CLICKED");
this._moreLink.addEventListener(ECTConstants.EVENT_ACTION,this);this.addEventListener("toggleWritableState",this)},renderHtml:function(a){this._super(a);this._manageWorkScheduleAllowed&&!this._isOldValue&&(this._writable?(a.push('\x3cspan class\x3d"fieldControls" id\x3d"',this.id,'_displayLinkReadOnlyStyle"\x3e'),this._renderMoreLink(a)):this.getValue()?a.push('\x3cspan id\x3d"',this.id,'_displayLinkReadOnlyStyle"\x3e'):a.push('\x3cspan id\x3d"',this.id,'_displayLinkReadOnlyStyle" style\x3d"display: none"\x3e'),
a.push("\x3c/span\x3e"));a.push("\x3c/div\x3e")},setTimeRecordingVariant:function(a){this._timeRecordingVariant=a},_renderMoreLink:function(a){a.push('\x3cspan class\x3d"padleft" id\x3d"',this.id,'_displayLink"\x3e');this._moreLink.renderHtml(a);a.push("\x3c/span\x3e")},handleEvent:function(a){this._super(a);switch(a.type){case TLMManageWorkScheduleDialog.EVENTS.WORKSCHEDULE_SAVED:this._handleWorkScheduleSaved(a);break;case "toggleWritableState":this._writableState=a.writable;break;case ECTConstants.EVENT_ACTION:switch(a.actionCommand){case "ACTION_MORE_LINK_CLICKED":a=
this._config,a.workScheduleId=this._value,a.effectiveDate=this._effectiveDate,a.userId=this._userId,a.companyId=this._companyId,a.jobInfoMode=this._writableState?"EDIT":"VIEW",a.timeRecordingVariant=this._timeRecordingVariant,a=new TLMManageWorkScheduleDialog(a),a.addEventListener(TLMManageWorkScheduleDialog.EVENTS.WORKSCHEDULE_SAVED,this),a.show()}}},_handleWorkScheduleSaved:function(a){a=a.workSchedule;a={id:a.getInternalId(),primaryDisplayText:a.getExternalName()+"("+a.getExternalCode()+")"};this.setValue(a);
a={};a.actionCommand=this._getModified()?ECTConstants.EVENT_FIELD_CHANGE:ECTConstants.EVENT_FIELD_UNCHANGE;a.value=this._value;a.metaId=this._config.id;a.searchElement=this;this.dispatch(ECTConstants.EVENT_CHANGE,a)},setWritable:function(a){this._super(a);a?juic.$(this._getMoreLinkSpanId()).style.display="":this._value?juic.$(this._getMoreLinkSpanId()).style.display="":juic.$(this._getMoreLinkSpanId()).style.display="none";this._toggleMoreLinkCssStyle(a)},_toggleMoreLinkCssStyle:function(a){var b=
this._getMoreLinkSpanId(),b="#"+b.replace(/(:|\.|\[|\]|,)/g,"\\$1");a?jQuery(b).addClass("fieldControls"):jQuery(b).removeClass("fieldControls")},_getMoreLinkSpanId:function(){return this.id+"_displayLinkReadOnlyStyle"}})})();"use strict";function TLMManageWorkScheduleDialog(a){this._init(a)}TLMManageWorkScheduleDialog.EVENTS={};TLMManageWorkScheduleDialog.EVENTS.WORKSCHEDULE_SAVED="WORK_SCHEDULE_SAVED";TLMManageWorkScheduleDialog.EVENTS.DELETE_ROW="DELETE_ROW";
TLMManageWorkScheduleDialog.EVENTS.DELETE_BREAK_ROW="DELETE_BREAK_ROW";
juic.extend(TLMManageWorkScheduleDialog,juic.EventTarget,{_init:function(a){this._config=a;this._controller=AjaxService.getMBeanInstance("tlmWorkScheduleController");this._content=new TLMManageWorkScheduleDialogContent(a);this._content.addEventListener(TLMManageWorkScheduleDialogContent.MODE.CHANGE,this,"_handleModeChange");this._cancelButton={label:MSGS.COMMON_Cancel,eventName:ECTConstants.EVENT_HIDE,active:!1};this._saveNewIWSButton={label:MSGS.COMMON_Save,eventName:ECTConstants.EVENT_SAVE,active:!0};
this._createNewIWSButton={label:MSGS.TIMEANDLABOR_WORKSCHEDULE_CREATE_NEW,eventName:ECTConstants.EVENT_SAVE_ADD,active:!1};this._okButton={label:MSGS.COMMON_Ok,eventName:ECTConstants.EVENT_HIDE,active:!0};this._dialogButton=[this._cancelButton,this._saveNewIWSButton,this._createNewIWSButton,this._okButton];this._dialogBox=new ECTDialogBox(MSGS.TIMEANDLABOR_WORKSCHEDULE_MANAGE_WORKSCHEDULE,this._content,[],900,750,!1);this._dialogBox.addEventListener(ECTConstants.EVENT_ACTION,this)},handleEvent:function(a){if(a.type===
ECTConstants.EVENT_ACTION)switch(a.actionCommand){case ECTConstants.EVENT_CLOSE:this.close();break;case ECTConstants.EVENT_SAVE:this._saveWorkSchedule();break;case ECTConstants.EVENT_SAVE_ADD:this._createNewIndividualWorkSchedule()}},_handleModeChange:function(a){if(this._dialogBox.isShown()){this._isTimeRecordingVariantConfigured=a.isTimeRecordingVariantConfigured;var b;"CREATE"===a.mode?(b=[this._cancelButton,this._saveNewIWSButton],this._dialogBox.getButtonLayout().setModel(b),this._dialogBox.setTitle(MSGS.TIMEANDLABOR_WORKSCHEDULE_CREATE_WORKSCHEDULE)):
(b=a.hasPermissionToCreateNewWS?[this._createNewIWSButton,this._okButton]:[this._okButton],this._dialogBox.getButtonLayout().setModel(b),a.name&&this._dialogBox.setTitle(MSGS.TIMEANDLABOR_WORKSCHEDULE_DISPLAY_WORKSCHEDULE+" "+a.name));this._dialogBox.setFocus()}},_saveWorkSchedule:function(){var a=this._content.validate();a.isValid?this._create():(this._content._contentTabLayout._openScheduleDetails(),0<a.errorMessages.length?TLMFlashMessage.ShowMessage(a.errorMessages[0],ECTConstants.STATUS_ERROR,
TLMFlashMessage.LONG):TLMFlashMessage.ShowMessage(MSGS.TIMEANDLABOR_WORKSCHEDULE_INVALID_INPUT,ECTConstants.STATUS_ERROR,TLMFlashMessage.LONG))},_create:function(){for(var a=this._content.getWorkSchedule(),b=[],c=this,d=0;d<a.getDays().length;d++){for(var e=a.getDays()[d],f=[],g=0;g<e.getSegments().length;g++){var k=e.getSegments()[g];f.push({startTime:k.getStartTime(),endTime:k.getEndTime(),category:k.getCategory(),duration:k.getDuration()})}b.push({day:e.getDay(),category:e.getCategory(),dayModelExtCode:e.getDayModelExtCode(),
hours:e.getHours(),minutes:e.getMinutes(),segments:f})}this._controller.createIndividualWorkSchedule(a.getUserId(),a.getExternalName(),TLMFieldsHelper.DateFormatter.format(a.getStartingDate()),a.getAverageHoursPerDay(),a.getAverageHoursPerWeek(),a.getAverageHoursPerMonth(),a.getAverageHoursPerYear(),a.getAverageWorkingDaysPerWeek(),b,a.getCountryCode(),a.getTimeRecordingVariant(),{callback:function(a){"success"!==a.result.status?(a=TLMFieldsHelper.ActionResult.FactorByResponse(a.result),TLMFlashMessage.ShowActionResult(a,
TLMFlashMessage.LONG)):(a=TLMFieldsHelper.ManageWorkSchedule.FactorByResponse(a.workSchedule),c._dialogBox.close(),c.dispatch(TLMManageWorkScheduleDialog.EVENTS.WORKSCHEDULE_SAVED,{workSchedule:a}))},errorHandler:function(){TLMFlashMessage.ShowMessage(MSGS.TIMEANDLABOR_SYSTEM_ERROR,ECTConstants.STATUS_ERROR,TLMFlashMessage.LONG)}})},_createNewIndividualWorkSchedule:function(){this._isTimeRecordingVariantConfigured&&!this._config.timeRecordingVariant?TLMFlashMessage.ShowMessage(MSGS.TIMEANDLABOR_WSF_UI_CANNOT_CREATE_IWS_NO_TIME_VARIANT_CHOSEN,
ECTConstants.STATUS_ERROR,TLMFlashMessage.LONG):this._content.renderNewIWS()},show:function(){this._dialogBox.showDialog()}});"use strict";function TLMManageWorkScheduleDialogContent(a){this.register();this._init(a)}TLMManageWorkScheduleDialogContent.MODE={};TLMManageWorkScheduleDialogContent.MODE.CREATE="CREATE";TLMManageWorkScheduleDialogContent.MODE.VIEW="VIEW";TLMManageWorkScheduleDialogContent.MODE.CHANGE="CHANGE";TLMManageWorkScheduleDialogContent.EVENT={};
TLMManageWorkScheduleDialogContent.EVENT.WORKSCHEDULE_LOADED="WORKSCHEDULE_LOADED";TLMManageWorkScheduleDialogContent.EVENT.NEW_WORKSCHEDULE="NEW_WORKSCHEDULE";
juic.extend(TLMManageWorkScheduleDialogContent,juic.Component,{_init:function(a){this._controller=AjaxService.getMBeanInstance("tlmWorkScheduleController");this._hasEditPermission=a.manageWorkScheduleAllowed;this._jobInfoMode=a.jobInfoMode;this._workScheduleId=a.workScheduleId;this._userId=a.userId;this._config={};this._config.jobInfoEffectiveDate=a.effectiveDate;this._config.company=a.companyId;this._config.writeMode=!1;this._config.timeRecordingVariant=a.timeRecordingVariant;this._config.workSchedule=
{};this._config.labels={};this._fetchMetaData();this.activitySpinner=new SFLoading(MSGS.COMMON_loading,"#000")},renderHtml:function(a){a.push('\x3cdiv class\x3d"tlmManageWorkSchedule" id\x3d"',this.id,'"\x3e',this.activitySpinner,"\x3c/div\x3e")},_rerender:function(){this._contentTabLayout=new TLMManageWorkScheduleTabLayout(this._config);var a=juic.$(this.id);if(a){var b=juic.createRenderContext();this._contentTabLayout.renderHtml(b);b.renderInto(a);this._config.writeMode?(Util.addClass(this.id,"writeMode"),
Util.removeClass(this.id,"readMode")):(Util.addClass(this.id,"readMode"),Util.removeClass(this.id,"writeMode"));"CLOCK_TIME"===this._config.workSchedule.getTimeRecordingVariant()?Util.addClass(this.id,"clockTime"):Util.removeClass(this.id,"clockTime")}},_fetchMetaData:function(){var a=this;this._controller.getMetadata(this._userId,this._config.company,{callback:function(b){a._countryCode=b.countryCode;a._isTimeRecordingVariantConfigured=b.timeRecordingVariantConfigured;a._fetchData()},errorHandler:function(){TLMFlashMessage.ShowMessage(MSGS.TIMEANDLABOR_SYSTEM_ERROR,
ECTConstants.STATUS_ERROR,TLMFlashMessage.LONG)}})},_fetchData:function(){var a=this;this._controller.getWorkSchedule(this._workScheduleId,this._userId,{callback:errorHandler:)},_evaluateResponse:function(a){var b=a.workSchedule;this._hasEditPermission=a.editable&&"EDIT"===this._jobInfoMode;b||"VIEW"!==this._jobInfoMode?b||"EDIT"!==this._jobInfoMode||
a.editable?b||"EDIT"!==this._jobInfoMode||this._config.timeRecordingVariant||!this._isTimeRecordingVariantConfigured?(this._config.labels=a.labels,b?this._config.workSchedule=TLMFieldsHelper.ManageWorkSchedule.FactorByResponse(b):(this._config.workSchedule=this._createNewIWS(),this._config.writeMode=!0),this._dispatchModeEvent(this._config.writeMode,this._config.workSchedule.getExternalName()),this._rerender()):(a=juic.$(this.id),a.innerHTML=MSGS.TIMEANDLABOR_WSF_UI_CANNOT_CREATE_IWS_NO_TIME_VARIANT_CHOSEN,
this._hasEditPermission=!1,this._dispatchModeEvent(!1,"")):(a=juic.$(this.id),a.innerHTML=MSGS.TIMEANDLABOR_WORKSCHEDULE_NO_CREATE_PERMISSION,this._dispatchModeEvent(!1,"")):(a=juic.$(this.id),a.innerHTML=MSGS.TIMEANDLABOR_WORKSCHEDULE_NO_WORKSCHEDULE_ASSIGNED,this._dispatchModeEvent(!1,""))},_dispatchModeEvent:function(a,b){a?this.dispatch(TLMManageWorkScheduleDialogContent.MODE.CHANGE,{mode:TLMManageWorkScheduleDialogContent.MODE.CREATE,isTimeRecordingVariantConfigured:this._isTimeRecordingVariantConfigured}):
this.dispatch(TLMManageWorkScheduleDialogContent.MODE.CHANGE,{mode:TLMManageWorkScheduleDialogContent.MODE.VIEW,name:b,hasPermissionToCreateNewWS:this._hasEditPermission,isTimeRecordingVariantConfigured:this._isTimeRecordingVariantConfigured})},getWorkSchedule:function(){return this._contentTabLayout.getWorkSchedule()},renderNewIWS:function(){this._config.workSchedule=this._createNewIWS();this._config.writeMode=!0;this._dispatchModeEvent(this._config.writeMode,"");this._rerender()},_createNewIWS:function(){var a=
new TLMFieldsHelper.ManageWorkSchedule;a.setUserId(this._userId);this._userId?a.setExternalName("IWS "+this._userId+" "+this._config.jobInfoEffectiveDate):this._config.jobInfoEffectiveDate?a.setExternalName("IWS "+this._config.jobInfoEffectiveDate):a.setExternalName("IWS"+TLMFieldsHelper.DateNow);a.setStartingDate(this._config.jobInfoEffectiveDate);a.setCountryCode(this._countryCode);a.setTimeRecordingVariant(this._config.timeRecordingVariant||TLMFieldsHelper.ManageWorkSchedule.REC_VARIANT_DURATION);
return a},validate:function(){return this._contentTabLayout.validate()}});function TLMManageWorkScheduleTabLayout(a){this.register();this._init(a)}
juic.extend(TLMManageWorkScheduleTabLayout,juic.Component,{_init:function(a){this._config=a;this._contentWorkScheduleDetailsTab=new TLMManageWorkScheduleDetailsTab(this._config);this.jQueryId="#"+this.id.replace(/:/g,"\\:")},renderHtml:function(a){a.push('\x3cul class\x3d"workScheduleTabs" role\x3d"tablist"\x3e');a.push('\x3cli id\x3d"'+this.id+'_schedule_details_tab" class\x3d"tab_active"\x3e');a.push('\x3ca href\x3d"javascript:void(0);" id\x3d"'+this.id+'_schedule_details_link" role\x3d"tab" title\x3d"',
MSGS.TIMEANDLABOR_WORKSCHEDULE_SCHEDULE_DETAILS,'" style\x3d"display:inline-block" onclick\x3d"',this.fireCode("_openScheduleDetails"),'"\x3e');a.push("\x3ch4\x3e",MSGS.TIMEANDLABOR_WORKSCHEDULE_SCHEDULE_DETAILS,"\x3c/h4\x3e");a.push("\x3c/a\x3e\x3c/li\x3e");a.push('\x3cli id\x3d"'+this.id+'_preview_tab" class\x3d"tab_inactive"\x3e');a.push('\x3ca href\x3d"javascript:void(0);" id\x3d"'+this.id+'_preview_link" role\x3d"tab" title\x3d"',MSGS.TIMEANDLABOR_WORKSCHEDULE_PREVIEW,'" style\x3d"display:inline-block" onclick\x3d"',
this.fireCode("_openPreview"),'"\x3e');a.push("\x3ch4\x3e",MSGS.TIMEANDLABOR_WORKSCHEDULE_PREVIEW,"\x3c/h4\x3e");a.push("\x3c/a\x3e\x3c/li\x3e");a.push("\x3c/ul\x3e");a.push('\x3cdiv id\x3d"'+this.id+'_details" class\x3d"workScheduleTabContent"\x3e',this._contentWorkScheduleDetailsTab,"\x3c/div\x3e");a.push('\x3cdiv id\x3d"'+this.id+'_preview" style \x3d "display:none;" class\x3d"workScheduleTabContent"\x3e\x3c/div\x3e')},setFocus:function(a){jQuery(a).focus()},_openScheduleDetails:function(){juic.$(this.id+
"_details").style.display="block";juic.$(this.id+"_preview").style.display="none";this._setTabAsActive(this.id+"_schedule_details_tab");this._setTabAsInactive(this.id+"_preview_tab");this.setFocus(this.jQueryId+"_schedule_details_link")},_openPreview:function(){var a=this.getWorkSchedule();if(""===a.getStartingDate())this.validate(),TLMFlashMessage.ShowMessage(MSGS.TIMEANDLABOR_WORKSCHEDULE_SWITCH_TO_PREVIEW_IMPOSSIBLE,ECTConstants.STATUS_ERROR,TLMFlashMessage.LONG);else{juic.$(this.id+"_details").style.display=
"none";var b=juic.$(this.id+"_preview");if(this._contentPreview)this._contentPreview.refresh(a);else{var c=[];c.workSchedule=a;c.keyDate=this._config.jobInfoEffectiveDate?TLMFieldsHelper.DateFormatter.parse(this._config.jobInfoEffectiveDate):TLMFieldsHelper.DateFormatter.parse(TLMFieldsHelper.DateNow);this._contentPreview=new TLMManageWorkSchedulePreview(c);a=juic.createRenderContext();this._contentPreview.renderHtml(a);a.renderInto(b)}b.style.display="block";this._setTabAsInactive(this.id+"_schedule_details_tab");
this._setTabAsActive(this.id+"_preview_tab");this.setFocus(this.jQueryId+"_preview_link")}},_setTabAsActive:function(a){Util.removeClass(a,"tab_inactive")},_setTabAsInactive:getWorkSchedule:function(){return this._contentWorkScheduleDetailsTab.getWorkSchedule()},validate:function(){return this._contentWorkScheduleDetailsTab.validate()}});"use strict";function TLMManageWorkScheduleDetailsTab(a){this.register();this._init(a)}
juic.extend(TLMManageWorkScheduleDetailsTab,juic.Component,{_init:function(a){this._config=a||{};this._nameInputField=new ECTInputBox(this._config.workSchedule.getExternalName(),{writable:this._config.writeMode,enabled:!0,label:MSGS.TIMEANDLABOR_WORKSCHEDULE_NAME,name:MSGS.TIMEANDLABOR_WORKSCHEDULE_NAME,size:30,required:!0});this._avgHoursPerDayInputField=new ECTInputBox(this._config.workSchedule.getAverageHoursPerDay(),{writable:this._config.writeMode,enabled:!0,title:MSGS.TIMEANDLABOR_TIME_UNIT_HOURS,
label:this._config.labels.averageHoursPerDay,size:6,maxlength:6});this._avgHoursPerWeekInputField=new ECTInputBox(this._config.workSchedule.getAverageHoursPerWeek(),{writable:this._config.writeMode,enabled:!0,title:MSGS.TIMEANDLABOR_TIME_UNIT_HOURS,label:this._config.labels.averageHoursPerWeek,size:6,maxlength:6});this._avgHoursPerMonthInputField=new ECTInputBox(this._config.workSchedule.getAverageHoursPerMonth(),{writable:this._config.writeMode,enabled:!0,title:MSGS.TIMEANDLABOR_TIME_UNIT_HOURS,
label:this._config.labels.averageHoursPerMonth,size:6,maxlength:6});this._avgHoursPerYearInputField=new ECTInputBox(this._config.workSchedule.getAverageHoursPerYear(),{writable:this._config.writeMode,enabled:!0,title:MSGS.TIMEANDLABOR_TIME_UNIT_HOURS,label:this._config.labels.averageHoursPerYear,size:6,maxlength:6});this._avgWorkingDaysPerWeekInputField=new ECTInputBox(this._config.workSchedule.getAverageWorkingDaysPerWeek(),{writable:this._config.writeMode,enabled:!0,title:MSGS.TIMEANDLABOR_TIME_UNIT_DAYS,
label:this._config.labels.averageWorkingDaysPerWeek,size:6,maxlength:6,type:"number"});a=new Date;this._config.workSchedule.getStartingDate()&&(a=TLMFieldsHelper.DateFormatter.parse(TLMFieldsHelper.DateFormatter.format(this._config.workSchedule.getStartingDate())));a=ECTUtil.formatDateForCalendar(a);this._startingDateSelectionField=new ECTCalendar(a,{writable:this._config.writeMode,name:"Work schedule starting date",hideCalPopupOnDefFocus:!0,required:!0,label:this._config.labels.startingDate});a=
TLMFieldsHelper.DateFormatter.parse(this._startingDateSelectionField.getValue());this._weekday=dateFormatSymbols.weekdays[a.getDay()];this._startingDateSelectionField.addEventListener("fieldError",this,"_handleInvalidInputInCalendar");this._startingDateSelectionField.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleStartingDateChangeEvent");this._dayTable=new WorkScheduleDayTable(this._config);this._bindValidators()},_bindValidators:function(){this._startingDateSelectionField.bindValidators({type:"date",
required:!0,label:this._config.labels.startingDate});this._nameInputField.bindValidators({type:"string",required:!0,label:MSGS.TIMEANDLABOR_WORKSCHEDULE_NAME});this._avgHoursPerDayInputField.bindSpecificValidators({type:"number",label:this._config.labels.averageHoursPerDay});this._avgHoursPerWeekInputField.bindSpecificValidators({type:"number",label:this._config.labels.averageHoursPerWeek});this._avgHoursPerMonthInputField.bindSpecificValidators({type:"number",label:this._config.labels.averageHoursPerMonth});
this._avgHoursPerYearInputField.bindSpecificValidators({type:"number",label:this._config.labels.averageHoursPerYear});this._avgWorkingDaysPerWeekInputField.bindSpecificValidators({type:"number",label:this._config.labels.startingDate})},refreshWeekday:_handleInvalidInputInCalendar:_handleStartingDateChangeEvent:function(){if(this._startingDateSelectionField.getValue()&&"INVALID"!==this._startingDateSelectionField.getValue()){var a=
TLMFieldsHelper.DateFormatter.parse(this._startingDateSelectionField.getValue());this._weekdayValue=dateFormatSymbols.weekdays[a.getDay()]}else this._weekdayValue="";this.refreshWeekday(this._weekdayValue)},renderHtml:function(a){a.push('\x3cdl class\x3d"headerData" role\x3d"presentation"\x3e');a.push('\x3cdt\x3e\x3cspan class \x3d "requiredAsterix redText"\x3e\x26nbsp;*\x26nbsp;\x3c/span\x3e',MSGS.TIMEANDLABOR_WORKSCHEDULE_NAME,"\x3c/dt\x3e\x3cdd\x3e",this._nameInputField,"\x3c/dd\x3e");a.push('\x3cdt\x3e\x3cspan class \x3d "requiredAsterix redText"\x3e\x26nbsp;*\x26nbsp;\x3c/span\x3e',
this._config.labels.startingDate,"\x3c/dt\x3e");a.push('\x3cdd\x3e\x3cspan class \x3d "startingDateWrite"\x3e',this._startingDateSelectionField);a.push('\x3cspan id\x3d"weekdayField" class\x3d"workScheduleDescription"\x3e',this._weekday,"\x3c/span\x3e\x3c/span\x3e");a.push('\x3cspan class \x3d "startingDateReadonly"\x3e',this._weekday,", ",this._startingDateSelectionField,"\x3c/span\x3e");a.push("\x3c/dd\x3e");a.push("\x3c/dl\x3e");this._dayTable.renderHtml(a);this._config.workSchedule&&!this._config.workSchedule.hasAtLeastOneCalculationField()?
a.push('\x3cdiv class\x3d"tmlAverageFields notVisible"\x3e'):a.push('\x3cdiv class\x3d"tmlAverageFields"\x3e');a.push("\x3ch3\x3e",MSGS.TIMEANDLABOR_WORKSCHEDULE_CALCULATION_DETAILS,"\x3c/h3\x3e");a.push('\x3cspan class\x3d"workScheduleDescription"\x3e',MSGS.TIMEANDLABOR_WORKSCHEDULE_CALCULATION_DETAILS_DESC,"\x3c/span\x3e");a.push('\x3cdl class\x3d"calculationFields"\x3e');a.push("\x3cdt\x3e",this._config.labels.averageHoursPerWeek,"\x3c/dt\x3e");a.push("\x3cdd\x3e",this._avgHoursPerWeekInputField,
"\x26nbsp;\x3c/dd\x3e");a.push("\x3cdt\x3e",this._config.labels.averageHoursPerDay,"\x3c/dt\x3e");a.push("\x3cdd\x3e",this._avgHoursPerDayInputField,"\x26nbsp;\x3c/dd\x3e");a.push("\x3cdt\x3e",this._config.labels.averageHoursPerMonth,"\x3c/dt\x3e");a.push("\x3cdd\x3e",this._avgHoursPerMonthInputField,"\x26nbsp;\x3c/dd\x3e");a.push("\x3cdt\x3e",this._config.labels.averageHoursPerYear,"\x3c/dt\x3e");a.push("\x3cdd\x3e",this._avgHoursPerYearInputField,"\x26nbsp;\x3c/dd\x3e");a.push("\x3cdt\x3e",this._config.labels.averageWorkingDaysPerWeek,
"\x3c/dt\x3e");a.push("\x3cdd\x3e",this._avgWorkingDaysPerWeekInputField,"\x26nbsp;\x3c/dd\x3e");a.push("\x3c/dl\x3e");a.push("\x3c/div\x3e")},getWorkSchedule:function(){var a=this._config.workSchedule;a.setExternalName(this._nameInputField.getValue());this._startingDateSelectionField.getValue()&&"INVALID"!==this._startingDateSelectionField.getValue()?a.setStartingDate(this._startingDateSelectionField.getValue()):a.setStartingDate("");a.setAverageHoursPerDay(ECTUtil.toDBString(this._avgHoursPerDayInputField.getValue()));
a.setAverageHoursPerWeek(ECTUtil.toDBString(this._avgHoursPerWeekInputField.getValue()));a.setAverageHoursPerMonth(ECTUtil.toDBString(this._avgHoursPerMonthInputField.getValue()));a.setAverageHoursPerYear(ECTUtil.toDBString(this._avgHoursPerYearInputField.getValue()));a.setAverageWorkingDaysPerWeek(ECTUtil.toDBString(this._avgWorkingDaysPerWeekInputField.getValue()));a.setDays(this._dayTable.getWorkScheduleDays());return a},cleanup:function(){this.unregister()},validate:function(){var a=this._dayTable.validate();
if(this._startingDateSelectionField.checkForErrors()||this._nameInputField.checkForErrors()||this._checkForErrorsInAvgFields())a.isValid=!1;return a},_checkForErrorsInAvgFields:function(){return this._avgHoursPerDayInputField.checkForErrors()||this._avgHoursPerWeekInputField.checkForErrors()||this._avgHoursPerMonthInputField.checkForErrors()||this._avgHoursPerYearInputField.checkForErrors()||this._avgWorkingDaysPerWeekInputField.checkForErrors()?!0:!1}});
function WorkScheduleDayTable(a){this.register();this._init(a)}
juic.extend(WorkScheduleDayTable,juic.Component,{_init:function(a){this._config=a;this._workScheduleDays=a.workSchedule.getDays();this._mode=a.writeMode?TLMManageWorkScheduleDialogContent.MODE.CREATE:TLMManageWorkScheduleDialogContent.MODE.VIEW;this._len=7;this._items=[]},renderHtml:function(a){a.push('\x3ctable class\x3d"workSchedule" frame\x3d"below" id\x3d"'+(this.id+"_table")+'" \x3e');a.push('\x3ccol style\x3d"width: 50px"/\x3e');this._mode===TLMManageWorkScheduleDialogContent.MODE.CREATE?a.push('\x3ccol style\x3d"width: 350px"/\x3e'):
a.push('\x3ccol style\x3d"width: 250px"/\x3e');"CLOCK_TIME"===this._config.workSchedule.getTimeRecordingVariant()?(a.push('\x3ccol style\x3d"width: 91px"/\x3e'),a.push('\x3ccol style\x3d"width: 91px"/\x3e'),a.push('\x3ccol style\x3d"width: 200px"/\x3e')):a.push('\x3ccol style\x3d"width: 400px"/\x3e');this._mode===TLMManageWorkScheduleDialogContent.MODE.CREATE&&a.push('\x3ccol style\x3d"width:66px"\x3e',"\x3c/col\x3e");a.push("\x3cthead\x3e");a.push("\x3ctr\x3e");a.push("\x3cth\x3e\x3cspan\x3e",this._config.labels.day,
"\x3c/span\x3e\x3c/th\x3e");a.push("\x3cth\x3e\x3cspan\x3e",this._config.labels.category,"\x3c/span\x3e\x3c/th\x3e");"CLOCK_TIME"===this._config.workSchedule.getTimeRecordingVariant()?(a.push("\x3cth\x3e\x3cspan\x3e",MSGS.TIMEANDLABOR_WORKSCHEDULE_START_TIME,"\x3c/span\x3e\x3c/th\x3e"),a.push("\x3cth\x3e\x3cspan\x3e",MSGS.TIMEANDLABOR_WORKSCHEDULE_END_TIME,"\x3c/span\x3e\x3c/th\x3e"),a.push("\x3cth\x3e\x3cspan\x3e",MSGS.TIMEANDLABOR_WORKSCHEDULE_BREAKS,"\x3c/span\x3e\x3c/th\x3e")):a.push("\x3cth\x3e\x3cspan\x3e",
MSGS.TIMEANDLABOR_WORKSCHEDULE_DURATION,"\x3c/span\x3e\x3c/th\x3e");this._mode===TLMManageWorkScheduleDialogContent.MODE.CREATE&&a.push("\x3cth\x3e\x3c/th\x3e");a.push("\x3c/tr\x3e");a.push("\x3c/thead\x3e");a.push('\x3ctbody id\x3d"'+this.id+'_tableBody"\x3e');var b;if(this._mode===TLMManageWorkScheduleDialogContent.MODE.CREATE)for(var c=1;c<=this._len;c++)b=this._createNewRowMetadata(c),b=new WorkScheduleDayTableItem(b),b.addEventListener(TLMManageWorkScheduleDialog.EVENTS.DELETE_ROW,this,"_removeRow"),
this._items.push(b),b.renderHtml(a);else for(c=0;c<this._workScheduleDays.length;c++)b=this._createNewRowMetadata(c+1),b.workScheduleDay=this._workScheduleDays[c],b=new WorkScheduleDayTableItem(b),b.renderHtml(a),this._items.push(b);a.push("\x3c/tbody\x3e");a.push("\x3c/table\x3e");this._mode===TLMManageWorkScheduleDialogContent.MODE.CREATE&&(a.push('\x3cdiv class \x3d "addDayButton"\x3e'),a.push('\x3ca id\x3d"',this.id,'_addDay"href\x3d"javascript:void(0)" title\x3d"',MSGS.TIMEANDLABOR_WORKSCHEDULE_ADD_DAY_BUTTON,
'" class\x3d"ectAddIcon" onclick\x3d"',this.fireCode("_addNewRow"),'"\x3e',MSGS.TIMEANDLABOR_WORKSCHEDULE_ADD_DAY_BUTTON,"\x3c/a\x3e"),a.push("\x3c/div\x3e"))},_createNewRowMetadata:function(a){return{writeMode:this._config.writeMode,day:a,company:this._config.company,labels:this._config.labels,timeRecordingVariant:this._config.workSchedule.getTimeRecordingVariant()}},_addNewRow:function(){var a=this._createNewRowMetadata(this._items.length+1),a=new WorkScheduleDayTableItem(a);a.addEventListener(TLMManageWorkScheduleDialog.EVENTS.DELETE_ROW,
this,"_removeRow");this._items.push(a);if(juic.$(this.id+"_table")&&juic.$(this.id+"_tableBody")){for(var a="#"+this.id.replace(/:/g,"\\:")+"_tableBody",b=juic.createRenderContext(),c=0;c<this._items.length;c++)this._items[c].renderHtml(b);jQuery(a).html(b.join(""));for(c=0;c<this._items.length;c++)this._items[c].afterRender()}},_removeRow:function(a){var b=a.rowId,c=juic.$(this.id+"_table");if(c){c.deleteRow(b);for(var d=1;a=c.rows[d];d++)a.cells[0].innerHTML=d}this._removeItem(b)},_removeItem:function(a){this._items.splice(a-
1,1);for(var b=a;b<=this._items.length;b++)this._items[b-1].setDayNumber(b),this._items[b-1].afterRender();this._setFocusOnNextElement(a)},_setFocusOnNextElement:function(a){this._items[a-1]?this._items[a-1].setFocus():(a="#"+this.id.replace(/:/g,"\\:"),jQuery(a+"_addDay").focus())},getWorkScheduleDays:function(){for(var a=[],b=0;b<this._items.length;b++)a[b]=this._items[b].getWorkScheduleDay();return a},cleanup:function(){this.unregister()},validate:function(){var a={isValid:!0,errorMessages:[]};
if(0===this._items.length)return a.errorMessages.push(MSGS.TIMEANDLABOR_WORKSCHEDULE_NO_DAYS_DEFINED),a.isValid=!1,a;for(var b=0;b<this._items.length;b++)this._items[b].isDayItemFilled()||(a.isValid=!1);return a}});function WorkScheduleDayTableItem(a){this.register();this.init(a)}WorkScheduleDayTableItem.CATEGORY={};WorkScheduleDayTableItem.CATEGORY.DAY_MODEL="DAY_MODEL";WorkScheduleDayTableItem.CATEGORY.PLANNED_HOURS="PLANNED_HOURS";WorkScheduleDayTableItem.CATEGORY.DAY_OFF="OFF";
juic.extend(WorkScheduleDayTableItem,juic.Component,{init:function(a){this._config=a;this._workScheduleDay=a.workScheduleDay;this._day=a.day||"";this._dayModelExtCode=a.workScheduleDay?a.workScheduleDay.getDayModelExtCode():"";this._displayDurationValue="";this._config.writeMode?this._configureWriteMode(a):this._configureReadMode(a)},_configureWriteMode:function(a){this._dayTypeComboSelection=this._configureCategoryComboBox();this._selectedCategory=a.workScheduleDay?a.workScheduleDay.getCategory():
this._dayModel.value;this._dayTypeCombo=new ectComboDropDown(this._selectedCategory,{writable:this._config.writeMode,selectOptions:this._dayTypeComboSelection,label:this._config.labels.category});this._dayTypeCombo.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleDayTypeChanged");this._dayModelList=new ECTFoundationAutoComplete("",this._createAutoCompleteMetadata());this._dayModelList.addEventListener(ECTConstants.EVENT_CHANGE,this,"_handleDayModelChanged");"CLOCK_TIME"===this._config.timeRecordingVariant?
(this._startTime=new ECTHourMinuteField(null,{inputMode:ECTHourMinuteField.INPUT_MODE.CLOCK_TIME,mode:ECTHourMinuteField.MODE.BOTH_ONLY,enabled:!0,writable:!0},null),this._startTime.addEventListener("change",this,"_handleWorkingTimeChanged"),this._endTime=new ECTHourMinuteField(null,{inputMode:ECTHourMinuteField.INPUT_MODE.CLOCK_TIME,mode:ECTHourMinuteField.MODE.BOTH_ONLY,enabled:!0,writable:!0},null),this._endTime.addEventListener("change",this,"_handleWorkingTimeChanged")):this._durationInputField=
new ECTHourMinuteField(null,{mode:ECTHourMinuteField.MODE.BOTH_ONLY,enabled:!0,writable:!0},this._labelProvider);this._button=new ECTRowActionsBlock(this.id+this._day,{remove:"true"},!1);this._button.addEventListener(ECTConstants.EVENT_ACTION,this,"_handleDeleteButtonClicked");this._timeSegments=[]},_configureReadMode:function(a){this._selectedCategory=a.workScheduleDay?a.workScheduleDay.getCategory():this._dayModel.value;this._displayDurationValue=this._workScheduleDay.getFormattedHoursAndMinutes();
"CLOCK_TIME"===this._config.timeRecordingVariant&&0!==this._workScheduleDay.getWorkingTimeSegments().length&&(this._startTime=this._workScheduleDay.getWorkingTimeSegments()[0].getStartTime(),this._endTime=this._workScheduleDay.getWorkingTimeSegments()[0].getEndTime());"CLOCK_TIME"===this._config.timeRecordingVariant&&(a=this._workScheduleDay.getBreakSegments(),this._breaks=TLMFormatter.formatBreakSummary(a),this._breaksTooltip=this._createTooltipTextForBreaks(a))},_configureCategoryComboBox:function(){this._dayModel=
{label:MSGS.TIMEANDLABOR_WORKSCHEDULE_DAY_CATEGORY_DAY_MODEL,value:WorkScheduleDayTableItem.CATEGORY.DAY_MODEL};this._plannedHours={label:MSGS.TIMEANDLABOR_WORKSCHEDULE_DAY_CATEGORY_PLANNED_HOURS,value:WorkScheduleDayTableItem.CATEGORY.PLANNED_HOURS};this._dayOff={label:MSGS.TIMEANDLABOR_WORKSCHEDULE_DAY_CATEGORY_DAY_OFF,value:WorkScheduleDayTableItem.CATEGORY.DAY_OFF};return[this._dayModel,this._plannedHours,this._dayOff]},_createTooltipTextForBreaks:function(a){for(var b="No breaks",c=0;c<a.length;c++)b=
"No breaks"===b?TLMFormatter.formatBreak(a[c].getStartTime(),a[c].getEndTime(),a[c].getDuration()):b+"\n"+TLMFormatter.formatBreak(a[c].getStartTime(),a[c].getEndTime(),a[c].getDuration());return b},renderHtml:function(a){a.addAfterRenderListener(this,"afterRender");var b="dayModel";this._selectedCategory===WorkScheduleDayTableItem.CATEGORY.PLANNED_HOURS?b="plannedHours":this._selectedCategory===WorkScheduleDayTableItem.CATEGORY.DAY_MODEL?b="dayModel":this._selectedCategory===WorkScheduleDayTableItem.CATEGORY.DAY_OFF&&
(b="dayOff");a.push('\x3ctr id\x3d"',this.id,'" class\x3d"',b,'"\x3e');this._config.writeMode?this.renderRowInWriteMode(a):this.renderRowInReadMode(a);a.push("\x3c/tr\x3e")},renderRowInWriteMode:function(a){var b=this.id+"_dayModelList",c=this.id+"_displayDuration";a.push("\x3ctd\x3e",this._day,"\x3c/td\x3e");a.push('\x3ctd class\x3d"category"\x3e');a.push("\x3cspan\x3e",this._dayTypeCombo,"\x3c/span\x3e");a.push('\x3cspan id\x3d"'+b+'" class\x3d"dayModelList"\x3e',this._dayModelList,"\x3c/span\x3e");
a.push("\x3c/td\x3e");"CLOCK_TIME"===this._config.timeRecordingVariant?this.renderClockTimesColumns(a):(a.push("\x3ctd class\x3ddurationColumn\x3e"),a.push('\x3cspan class\x3d"durationInput"\x3e',this._durationInputField,"\x3c/span\x3e"),a.push('\x3cspan id\x3d"'+c+'" class\x3d"displayDuration"\x3e',this._displayDurationValue,"\x3c/span\x3e"));a.push("\x3ctd\x3e",this._button,"\x3c/td\x3e")},renderRowInReadMode:function(a){a.push("\x3ctd\x3e\x3cspan\x3e",this._day,"\x3c/span\x3e\x3c/td\x3e");a.push('\x3ctd\x3e\x3cspan class\x3d"selectedCategory"\x3e',
this._getCategoryLabelByCategory(this._workScheduleDay.getCategory()),"\x3c/span\x3e\x3c/td\x3e");"CLOCK_TIME"===this._config.timeRecordingVariant?this.renderClockTimesColumns(a):(a.push("\x3ctd class\x3ddurationColumn\x3e"),a.push('\x3cspan class\x3d"durationInput"\x3e',this._durationInputField,"\x3c/span\x3e"),a.push('\x3cspan class\x3d"displayDuration"\x3e',this._displayDurationValue,"\x3c/span\x3e"),a.push("\x3c/td\x3e"))},renderClockTimesColumns:function(a){a.push('\x3ctd\x3e\x3cspan class\x3d"tlmtime"\x3e',
this._startTime,"\x3c/span\x3e\x3c/td\x3e");a.push('\x3ctd\x3e\x3cspan class\x3d"tlmtime"\x3e',this._endTime,"\x3c/span\x3e\x3c/td\x3e");this._config.writeMode?(a.push('\x3ctd\x3e\x3cdiv class\x3d"plannedHousBreaks"\x3e'),a.push('\x3ca id\x3d"',this.id,'_breaks" href\x3d"javascript:void(0)" title\x3d"',MSGS.TIMEANDLABOR_WORKSCHEDULE_NO_BREAKS_DEFINED,'" onclick\x3d"',this.fireCode("_createNewBreaks"),'"\x3e',this._breaks||MSGS.TIMEANDLABOR_WORKSCHEDULE_NO_BREAKS_DEFINED,"\x3c/a\x3e"),a.push("\x3c/div\x3e"),
a.push('\x3cspan id\x3d"'+this.id+'_dayModelBreaks" title\x3d"'+this._breaksTooltip+'" class\x3d"tlmDayModelBreaks"\x3e',this._dayModelBreaks,"\x3c/span\x3e")):(a.push("\x3ctd\x3e"),a.push('\x3cspan id\x3d"'+this.id+'_breaks" class\x3d"tlmtime" title\x3d"'+this._breaksTooltip+'"\x3e',this._breaks,"\x3c/span\x3e"));a.push("\x3c/td\x3e")},afterRender:function(){1>this._day%2?Util.addClass(this.id,"even"):Util.removeClass(this.id,"even");this._selectedCategory===WorkScheduleDayTableItem.CATEGORY.DAY_MODEL&&
this._dayModelList&&""===this._dayModelList.getValue()&&Util.addClass(this.id,"noSelection")},_getCategoryLabelByCategory:function(a){switch(a){case "OFF":return MSGS.TIMEANDLABOR_WORKSCHEDULE_DAY_CATEGORY_DAY_OFF;case "DAY_MODEL":return MSGS.get("TIMEANDLABOR_WORKSCHEDULE_DAY_CATEGORY_DAY_MODEL_WITH_DAY_MODEL",Util.escapeHTML(this._dayModelExtCode));case "PLANNED_HOURS":return MSGS.TIMEANDLABOR_WORKSCHEDULE_DAY_CATEGORY_PLANNED_HOURS;default:return a}},setFocus:function(){this._dayTypeCombo.setFocus(!0)},
setDayNumber:function(a){this._day=a},_handleWorkingTimeChanged:function(){if(null!=this._startTime.getValue()&&this._endTime.getValue()&&this._isWorkingTimeValid()){var a=this._endTime.getValue()-this._startTime.getValue();this._hours=Math.floor(a/60);this._minutes=a%60}},_isWorkingTimeValid:function(){if(this._startTime.getValue()>=this._endTime.getValue())return this._startTime.showError(!0),this._endTime.showError(!0),!1;this._startTime.showError(!1);this._endTime.showError(!1);return!0},_createAutoCompleteMetadata:function(){var a=
{};a.label=this._config.labels.dayModel;a.id=this.id+"dayModelAutoComplete";a.required=!1;a.type="FOUNDATION_AUTOCOMPLETE";a.hasMultiple=!1;a.writable=this._config.writeMode;a.searchOptions={baseElement:"WorkScheduleDayModel",contextualSearchFields:[{fieldId:"LegalEntity",valueKey:"LegalEntity",defaultValue:""},{fieldId:"timeRecordingVariant",valueKey:"timeRecordingVariant",defaultValue:""}],customFields:[],defaultSearchValues:{LegalEntity:this._config.company||"",timeRecordingVariant:this._config.timeRecordingVariant},
propagateResultFields:null,searchType:"WorkScheduleDayModel",target:"dayModelAutoCompleteRenderer",userSysId:null,valueAttribute:null};a.dataSource="customAutoCompleteFieldController";return a},_setDurationFields:function(){var a=this._dayTypeCombo.getValue();a===WorkScheduleDayTableItem.CATEGORY.PLANNED_HOURS?(Util.removeClass(this.id,"dayModel"),Util.removeClass(this.id,"dayOff"),Util.addClass(this.id,"plannedHours")):a===WorkScheduleDayTableItem.CATEGORY.DAY_MODEL?(Util.removeClass(this.id,"plannedHours"),
Util.removeClass(this.id,"dayOff"),Util.addClass(this.id,"dayModel")):a===WorkScheduleDayTableItem.CATEGORY.DAY_OFF&&(Util.removeClass(this.id,"plannedHours"),Util.removeClass(this.id,"dayModel"),Util.addClass(this.id,"dayOff"))},_handleDayTypeChanged:function(){this._setDurationFields();this._selectedCategory=this._dayTypeCombo.getValue();this._selectedCategory===WorkScheduleDayTableItem.CATEGORY.PLANNED_HOURS||this._selectedCategory===WorkScheduleDayTableItem.CATEGORY.DAY_OFF?(Util.removeClass(this.id,
"noSelection"),this._resetData()):(""!==this._dayModelList.getValue()&&(this._dayModelExtCode=null,this._dayModelList.setValue("")),Util.addClass(this.id,"noSelection"))},_resetData:function(){if("CLOCK_TIME"===this._config.timeRecordingVariant){this._startTime.setEnabled(!0);this._startTime.setValue(0);this._endTime.setEnabled(!0);this._endTime.setValue(0);this._timeSegments=[];var a=juic.$(this.id+"_dayModelBreaks");a.innerHTML="";a.title="";a=juic.$(this.id+"_breaks");a.innerHTML=MSGS.TIMEANDLABOR_WORKSCHEDULE_NO_BREAKS_DEFINED}},
_handleDayModelChanged:function(){var a=this;Util.removeClass(this.id,"noSelection");var b=this._dayModelList.getValue();AjaxService.getMBeanInstance("tlmWorkScheduleController").getDayModelDetails(b,function(b){b=TLMFieldsHelper.DayModel.FactorByResponse(b);a._dayModelExtCode=b.getDayModelExtCode();var c=b.getTotalMinutes();a._hours=Math.floor(c/60);a._minutes=c%60;a._displayHoursAndMinutes(a._hours+":"+(10>a._minutes?"0"+a._minutes:a._minutes));a._displayStartAndEndTime(b);a._timeSegments=b.getBreakSegments();
a._displayBreaks(a._timeSegments)})},_displayStartAndEndTime:function(a){"CLOCK_TIME"===this._config.timeRecordingVariant&&(this._startTime.setEnabled(!1),this._endTime.setEnabled(!1),a=a.getWorkingTimeSegments(),0<a.length&&(this._startTime.setTime(a[0].getStartTime()),this._endTime.setTime(a[0].getEndTime())))},_displayBreaks:function(a){"CLOCK_TIME"===this._config.timeRecordingVariant&&(this._dayModelBreaks=TLMFormatter.formatBreakSummary(a),this._breaksTooltipText=this._createTooltipTextForBreaks(a),
a=juic.$(this.id+"_dayModelBreaks"),a.innerHTML=this._dayModelBreaks,a.title=this._breaksTooltipText)},_displayHoursAndMinutes:function(a){if("CLOCK_TIME"!==this._config.timeRecordingVariant){var b=juic.$(this.id+"_displayDuration");this._displayDurationValue=a;b.innerHTML=a}},_handleDeleteButtonClicked:function(){this.dispatch(TLMManageWorkScheduleDialog.EVENTS.DELETE_ROW,{rowId:this._day})},getWorkScheduleDay:function(){if(this._workScheduleDay)return this._workScheduleDay;var a=new TLMFieldsHelper.ManageWorkSchedule.Day;
a.setCategory(this._dayTypeCombo.getValue());a.setDay(this._day);var b=this._dayTypeCombo.getValue();if(b===WorkScheduleDayTableItem.CATEGORY.DAY_MODEL)this._dayModelExtCode?(a.setDayModelExtCode(this._dayModelExtCode),a.setHours(this._hours),a.setMinutes(this._minutes)):a.setDayModelExtCode("");else if(b===WorkScheduleDayTableItem.CATEGORY.PLANNED_HOURS&&"DURATION"===this._config.timeRecordingVariant){var c=this._durationInputField.getValue();a.setHours(Math.floor(c/60));a.setMinutes(c%60)}"CLOCK_TIME"===
this._config.timeRecordingVariant&&(c=[],b!==WorkScheduleDayTableItem.CATEGORY.DAY_OFF&&(b=new TLMFieldsHelper.ManageWorkSchedule.Day.TimeSegment,b.setStartTime(this._startTime.getTime()),b.setEndTime(this._endTime.getTime()),b.setCategory(TLMFieldsHelper.ManageWorkSchedule.Day.TimeSegment.WORKING_TIME),c.push(b)),a.setSegments(c.concat(this._timeSegments)));return a},_enableSaveButton:isDayItemFilled:function(){return this._dayTypeCombo.getValue()===
WorkScheduleDayTableItem.CATEGORY.DAY_MODEL&&""===this._dayModelList.getValue()?(this._dayModelList.setErrorMsg(MSGS.TIMEANDLABOR_WORKSCHEDULE_FIELD_NOT_MAINAINED),!1):!0},cleanup:function(){this.unregister()},_createNewBreaks:function(){var a=new WorkScheduleDayCreateBreaksPopover({breakSegments:this._timeSegments});a.addEventListener("BREAKS_UPDATED",this,"_handleBreaksUpdated");var b=this.id+"_breaks";this._createBreaksPopover=new SFCalloutPopup({type:"hocManagerListCallout",hiddenAriaTitle:!0,
content:a,useNameAnchor:!0,hideLatency:!1,closeOnMouseout:!1});this._createBreaksPopover.show(b,{refocusRef:b,setFocusOnSelf:!0});this._createBreaksPopover.addEventListener("clickedOutsidePopup",this,"_handlePopoverClosed")},_handlePopoverClosed:function(a){"ERROR"===a.target.getContent().getStatus()&&TLMFlashMessage.ShowMessage(MSGS.TIMEANDLABOR_WORKSCHEDULE_INCORRECT_BREAK_DEFINITION,ECTConstants.STATUS_ERROR,TLMFlashMessage.LONG)},_handleBreaksUpdated:function(a){this._timeSegments=a.breakSegments;
this._breaks=TLMFormatter.formatBreakSummary(a.breakSegments);a="#"+this.id.replace(/:/g,"\\:")+"_breaks";jQuery(a).html(this._breaks);var b=this._createTooltipTextForBreaks(this._timeSegments);jQuery(a).prop("title",b)}});WorkScheduleDayCreateBreaksPopover.STATUS={};WorkScheduleDayCreateBreaksPopover.STATUS.ERROR="ERROR";WorkScheduleDayCreateBreaksPopover.STATUS.SUCCESS="SUCCESS";function WorkScheduleDayCreateBreaksPopover(a){this.register();this.init(a)}
juic.extend(WorkScheduleDayCreateBreaksPopover,juic.Component,{init:function(a){this._config=a||{};this._status=WorkScheduleDayCreateBreaksPopover.STATUS.SUCCESS;this._timeSegments=this._config.breakSegments||[];this._items=[]},renderHtml:function(a){a.addAfterRenderListener(this,"afterChange");a.push('\x3cdiv style\x3d"width: 330px;"\x3e');a.push('\x3ctable id\x3d"'+(this.id+"_breaksDefinitionTable")+'" class\x3d"tlmManageWorkScheduleBreakDefinition"\x3e');a.push("\x3cthead\x3e");a.push("\x3ctr\x3e");
a.push('\x3cth class\x3d"tlmBreakDefinitionTableColumn"\x3e',MSGS.TIMEANDLABOR_WORKSCHEDULE_START_TIME,"\x3c/th\x3e");a.push('\x3cth class\x3d"tlmBreakDefinitionTableColumn"\x3e',MSGS.TIMEANDLABOR_WORKSCHEDULE_END_TIME,"\x3c/th\x3e");a.push('\x3cth class\x3d"tlmBreakDefinitionTableColumn"\x3e',MSGS.TIMEANDLABOR_WORKSCHEDULE_DURATION,"\x3c/th\x3e");a.push("\x3cth\x3e\x3c/th\x3e");a.push("\x3c/tr\x3e");a.push("\x3c/thead\x3e");a.push('\x3ctbody id\x3d"'+this.id+'_tableBody"\x3e');for(var b,c=0;c<this._timeSegments.length;c++)b=
new WorkScheduleDayBreak({startTime:this._timeSegments[c].getStartTime(),endTime:this._timeSegments[c].getEndTime(),breakNumber:c,duration:this._timeSegments[c].getDuration()}),this._addEventListenersToWorkScheduleDayBreak(b),this._items.push(b),b.renderHtml(a);0===this._timeSegments.length&&(b=new WorkScheduleDayBreak({breakNumber:0}),this._addEventListenersToWorkScheduleDayBreak(b),this._items.push(b),b.renderHtml(a));a.push("\x3c/tbody\x3e");a.push("\x3c/table\x3e");a.push('\x3cdiv class \x3d "addDayButton"\x3e');
a.push('\x3ca id\x3d"',this.id,'_addBreakDefinition" href\x3d"javascript:void(0)" title\x3d"',MSGS.TIMEANDLABOR_WORKSCHEDULE_ADD_BREAK_BUTTON,'" class\x3d"ectAddIcon" onclick\x3d"',this.fireCode("_addNewRow"),'"\x3e',MSGS.TIMEANDLABOR_WORKSCHEDULE_ADD_BREAK_BUTTON,"\x3c/a\x3e");a.push("\x3c/div\x3e");a.push('\x3cdiv style\x3d"color:red;" id\x3d"',this.id,'_errorText"\x3e\x3c/div\x3e');a.push("\x3c/div\x3e")},afterChange:function(){if(1===this._items.length)this._items[0].setDeleteButtonInvisible(!0);
else for(var a=0;a<this._items.length;a++)this._items[a].setDeleteButtonInvisible(!1)},_addEventListenersToWorkScheduleDayBreak:function(a){a.addEventListener("BREAK_DEFINED",this,"_addNewBreakToTimeSegments");a.addEventListener(TLMManageWorkScheduleDialog.EVENTS.DELETE_BREAK_ROW,this,"_removeBreakRow")},_addNewRow:function(){var a=new WorkScheduleDayBreak({breakNumber:this._items.length});this._addEventListenersToWorkScheduleDayBreak(a);this._items.push(a);if(juic.$(this.id+"_breaksDefinitionTable")&&
juic.$(this.id+"_tableBody")){for(var a="#"+this.id.replace(/:/g,"\\:")+"_tableBody",b=juic.createRenderContext(),c=0;c<this._items.length;c++)this._items[c].renderHtml(b);jQuery(a).html(b.join(""))}this.afterChange()},_removeBreakRow:function(a){var b=juic.$(this.id+"_breaksDefinitionTable");b&&(b.deleteRow(a.breakNumber+1),this._items.splice(a.breakNumber,1),"ERROR"!==a.target.getStatus()&&this._timeSegments.splice(a.breakNumber,1),1===this._items.length&&this._items[0].setDeleteButtonInvisible(!0),
this._calculateBreakNumber());this._validateBreaks();this._isValid()&&this._status!==WorkScheduleDayCreateBreaksPopover.STATUS.ERROR&&this._showError({isValid:!0});this.dispatch("BREAKS_UPDATED",{breakSegments:this.getTimeSegments()})},_calculateBreakNumber:function(){for(var a=0;a<this._timeSegments.length;a++)this._timeSegments[a]._breakNumber=a;for(a=0;a<this._items.length;a++)this._items[a]._breakNumber=a},_validateBreaks:function(){this._status=WorkScheduleDayCreateBreaksPopover.STATUS.SUCCESS;
for(var a=0;a<this._items.length;a++)this._items[a].isBreakTimeValid()||(this._status=WorkScheduleDayCreateBreaksPopover.STATUS.ERROR)},_addNewBreakToTimeSegments:function(a){this._clearError();a.target.isBreakTimeValid()&&this._isValid()?(this._timeSegments[a.breakNumber]=a.newBreak.clone(),this.dispatch("BREAKS_UPDATED",{breakSegments:this.getTimeSegments()})):this._status=WorkScheduleDayCreateBreaksPopover.STATUS.ERROR;this._status!==WorkScheduleDayCreateBreaksPopover.STATUS.ERROR&&(this._validateBreaks(),
this._showError(a))},_clearError:function(){juic.$(this.id+"_errorText").innerHTML=""},_showError:function(a){juic.$(this.id+"_errorText").innerHTML=a.isValid&&"ERROR"!==this._status?"":a.errorMsg},_isValid:function(){for(var a=0;a<this._items.length;a++)for(var b=this._items[a],c=a+1;c<this._items.length;c++){var d=this._items[c];if(b.overlaps(d)||d.overlaps(b))d.showError(!0),this._showError({isValid:!1,errorMsg:MSGS.TIMEANDLABOR_WORKSCHEDULE_BREAK_POPOVER_OVERLAPPING}),this._status=WorkScheduleDayCreateBreaksPopover.STATUS.ERROR}return this._status!==
WorkScheduleDayCreateBreaksPopover.STATUS.ERROR?!0:!1},getTimeSegments:function(){return this._timeSegments},getStatus:function(){return this._status}});function WorkScheduleDayBreak(a){this.register();this.init(a)}
juic.extend(WorkScheduleDayBreak,juic.Component,{init:function(a){this._breakNumber=a.breakNumber;this._startTime=new ECTHourMinuteField(null,{inputMode:ECTHourMinuteField.INPUT_MODE.CLOCK_TIME,mode:ECTHourMinuteField.MODE.BOTH_ONLY,enabled:!0,writable:!0},null);this._startTime.addEventListener("change",this,"_handleWorkingTimeChanged");a.startTime&&this._startTime.setTime(a.startTime);this._endTime=new ECTHourMinuteField(null,{inputMode:ECTHourMinuteField.INPUT_MODE.CLOCK_TIME,mode:ECTHourMinuteField.MODE.BOTH_ONLY,
enabled:!0,writable:!0},null);this._endTime.addEventListener("change",this,"_handleWorkingTimeChanged");a.duration&&(this._duration=MSGS.get("TIMEANDLABOR_TIME_TITLE_MINUTES_ONLY",a.duration));a.endTime&&this._endTime.setTime(a.endTime);this._deleteButton=new ECTRowActionsBlock(this.id+this._day,{remove:"true"},!1);this._deleteButton.addEventListener(ECTConstants.EVENT_ACTION,this,"_handleDeleteButtonClicked");this._status="SUCCESS"},cleanup:function(){this.unregister()},renderHtml:function(a){a.push('\x3ctr class\x3d"tlmBreakDefinitionRow noDeleteButton" id\x3d"',
this.id,'_breakDefinitionRow"\x3e');a.push("\x3ctd\x3e",this._startTime,"\x3c/td\x3e");a.push("\x3ctd\x3e",this._endTime,"\x3c/td\x3e");a.push('\x3ctd\x3e\x3cspan id\x3d"'+this.id+'_breakDuration"\x3e',this._duration,"\x3c/span\x3e\x3c/td\x3e");a.push("\x3ctd\x3e",this._deleteButton,"\x3c/td\x3e");a.push("\x3c/tr\x3e")},_displayDuration:function(a){this._duration=MSGS.get("TIMEANDLABOR_TIME_TITLE_MINUTES_ONLY",Util.escapeHTML(a));juic.$(this.id+"_breakDuration").innerHTML=this._duration},showError:getBreak:function(){this._breakSegment||(this._breakSegment=new TLMFieldsHelper.ManageWorkSchedule.Day.TimeSegment);this._breakSegment.setCategory(TLMFieldsHelper.ManageWorkSchedule.Day.TimeSegment.UNPAID_BREAK);this._breakSegment.setStartTime(this._startTime.getTime());this._breakSegment.setEndTime(this._endTime.getTime());this._breakSegment.setDuration(this._endTime.getValue()-this._startTime.getValue());return this._breakSegment},setDeleteButtonInvisible:function(a){a?
Util.addClass(this.id+"_breakDefinitionRow","noDeleteButton"):Util.removeClass(this.id+"_breakDefinitionRow","noDeleteButton")},setStatus:function(a){this._status=a},getStatus:function(){return this._status},_handleDeleteButtonClicked:_handleWorkingTimeChanged:function(){if(null!=this._startTime.getValue()&&this._endTime.getValue()){if(this.isBreakTimeValid()){this._status="SUCCESS";var a=
this._endTime.getValue()-this._startTime.getValue();this._displayDuration(a);this.dispatch("BREAK_DEFINED",{newBreak:this.getBreak(),breakNumber:this._breakNumber,isValid:!0,errorMsg:MSGS.TIMEANDLABOR_WORKSCHEDULE_SEGMENT_START_TIME_GREATER_END_TIME})}else this._status="ERROR",this.dispatch("BREAK_DEFINED",{newBreak:this.getBreak(),breakNumber:this._breakNumber,isValid:!1,errorMsg:MSGS.TIMEANDLABOR_WORKSCHEDULE_SEGMENT_START_TIME_GREATER_END_TIME});this.showError("ERROR"===this._status)}},isBreakTimeValid:function(){return 0===
this._startTime.getValue()&&0===this._endTime.getValue()?!0:this._startTime.getValue()>=this._endTime.getValue()?!1:!0},overlaps:function(a){return this._startTime.getValue()>=a._startTime.getValue()&&this._startTime.getValue()<a._endTime.getValue()||this._endTime.getValue()>a._startTime.getValue()&&this._endTime.getValue()<=a._endTime.getValue()}});"use strict";function TLMManageWorkSchedulePreview(a){this.register();this.init(a)}TLMManageWorkSchedulePreview.DAYTYPE={};
TLMManageWorkSchedulePreview.DAYTYPE.NO_DISPLAY="noDisplay";TLMManageWorkSchedulePreview.DAYTYPE.NOSELECTION="noSelection";TLMManageWorkSchedulePreview.DAYTYPE.DAY_OFF="dayOff";TLMManageWorkSchedulePreview.DAYTYPE.WORKING_DAY="workingDay";TLMManageWorkSchedulePreview.NUMBER_OF_DAYS=14;
juic.extend(TLMManageWorkSchedulePreview,juic.Component,{init:function(a){this._workSchedule=a.workSchedule;this._keyDate=new Date(a.keyDate.getFullYear(),a.keyDate.getMonth(),a.keyDate.getDate());this._firstBoxDate=this._getFirstDayOfWeek(this._keyDate);this._data=this._getData();this._noPreviewDisplayReason="";this.jQueryId="#"+this.id.replace(/:/g,"\\:")},_getFirstDayOfWeek:function(a){var b=window.firstDayOfWeek||0,b=a.getDay()-b;0>b&&(b=7+b);return new Date(a.getFullYear(),a.getMonth(),a.getDate()-
b)},_getData:function(){var a=[];if(0===this._workSchedule.getDays().length)return this._noPreviewDisplayReason=MSGS.get("TIMEANDLABOR_WORKSCHEDULE_PREVIEW_NO_DAYS_DEFINED"),a;this._noPreviewDisplayReason="";for(var b=this._firstBoxDate,c=0;c<TLMManageWorkSchedulePreview.NUMBER_OF_DAYS;c++){var d={};d.date=b;var e=this._getWorkScheduleDayForDate(b),e=this._workSchedule.getDays()[e];d.wsDay=e;d.date<this._keyDate?d.dayType=TLMManageWorkSchedulePreview.DAYTYPE.NO_DISPLAY:e.getCategory()===WorkScheduleDayTableItem.CATEGORY.DAY_MODEL&&
""===e.getDayModelExtCode()?d.dayType=TLMManageWorkSchedulePreview.DAYTYPE.NOSELECTION:e.getCategory()===WorkScheduleDayTableItem.CATEGORY.DAY_OFF||0===e.getHours()&&0===e.getMinutes()?d.dayType=TLMManageWorkSchedulePreview.DAYTYPE.DAY_OFF:d.dayType=TLMManageWorkSchedulePreview.DAYTYPE.WORKING_DAY;a.push(d);b=new Date(b.getFullYear(),b.getMonth(),b.getDate()+1)}return a},_getWorkScheduleDayForDate:function(a){a=this._daysBetween(this._workSchedule.getStartingDate(),a)%this._workSchedule.getDays().length;
return 0>a?a+this._workSchedule.getDays().length:a},_daysBetween:function(a,b){var c=(this._treatAsUTC(b)-this._treatAsUTC(a))/864E5;return Math.round(c)},_treatAsUTC:function(a){a=new Date(a);a.setMinutes(a.getMinutes()+a.getTimezoneOffset());return a},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id+'_tlmWorkSchedulePreviewContent" class\x3d"tlmWorkSchedulePreview"\x3e');this._renderContent(a);a.push("\x3c/div\x3e")},_renderContent:function(a){this._renderTitleArea(a);this._noPreviewDisplayReason||
(this._renderWeekSelection(a),this._renderWeekDaysHeader(a),this._renderDays(a))},_renderTitleArea:function(a){a.push("\x3ch3\x3e");var b;this._noPreviewDisplayReason?b=this._noPreviewDisplayReason:(b=TLMFieldsHelper.UserDateFormatter.format(this._keyDate),b=MSGS.get("TIMEANDLABOR_WORKSCHEDULE_PREVIEW_TITLE",b));a.push(b);a.push("\x3c/h3\x3e")},_renderWeekSelection:function(a){var b=this._data[0].date,c=window.dateFormatSymbols.shortMonths[b.getMonth()].toUpperCase(),d=this._data[this._data.length-
1].date,e=window.dateFormatSymbols.shortMonths[d.getMonth()].toUpperCase();a.push('\x3cdiv class\x3d"weekSelectionArea"\x3e');var f=MSGS.get("TIMEANDLABOR_WORKSCHEDULE_SHOW_PREVIOUS_WEEKS"),g=MSGS.get("TIMEANDLABOR_WORKSCHEDULE_SHOW_NEXT_WEEKS");a.push('\x3cbutton id\x3d"',this.id+"_btnPrevWeek",'" class\x3d"btnPrevWeek" title\x3d"',f,'" onclick\x3d"',this.fireCode("_showPreviousWeek"),'"\x3e\x3c/button\x3e');a.push("\x3cspan\x3e");a.push(b.getDate()+" "+c+" - "+d.getDate()+" "+e);a.push("\x3c/span\x3e");
a.push('\x3cbutton id\x3d"',this.id+"_btnNextWeek",'" class\x3d"btnNextWeek" title\x3d"',g,'" onclick\x3d"',this.fireCode("_showNextWeek"),'"\x3e\x3c/button\x3e');a.push("\x3c/div\x3e")},_setFocus:_showPreviousWeek:function(){this._firstBoxDate=new Date(this._firstBoxDate.getFullYear(),this._firstBoxDate.getMonth(),this._firstBoxDate.getDate()-TLMManageWorkSchedulePreview.NUMBER_OF_DAYS);this.refresh(this._workSchedule);this._setFocus(this.jQueryId+"_btnPrevWeek")},
_showNextWeek:function(){this._firstBoxDate=new Date(this._firstBoxDate.getFullYear(),this._firstBoxDate.getMonth(),this._firstBoxDate.getDate()+TLMManageWorkSchedulePreview.NUMBER_OF_DAYS);this.refresh(this._workSchedule);this._setFocus(this.jQueryId+"_btnNextWeek")},_renderWeekDaysHeader:function(a){a.push('\x3cdiv class\x3d"weekdayHeaderArea" aria-hidden\x3d"true"\x3e');for(var b=0;7>b;b++){a.push("\x3cspan\x3e");var c=this._data[b].date.getDay();a.push(window.dateFormatSymbols.shortWeekdays[c]);
a.push("\x3c/span\x3e")}a.push("\x3c/div\x3e")},_renderDays:function(a){a.push('\x3cul class\x3d"calendarDays"\x3e');for(var b=0;b<this._data.length;b++){var c=this._data[b];a.push('\x3cli class\x3d"'+c.dayType+'"\x3e');this._renderDay(c,a);a.push("\x3c/li\x3e")}a.push("\x3c/ul\x3e")},_renderDay:function(a,b){var c=TLMFieldsHelper.UserDateFormatter.format(a.date),d=dateFormatSymbols.weekdays[a.date.getDay()],c=MSGS.get("TIMEANDLABOR_WORKSCHEDULE_PREVIEW_DATE_WITH_WEEKDAY",d,c);b.push('\x3cspan class\x3d"dayNumberText" title\x3d"'+
c+'"\x3e');b.push(a.date.getDate());b.push("\x3c/span\x3e");switch(a.dayType){case TLMManageWorkSchedulePreview.DAYTYPE.NOSELECTION:b.push('\x3cspan class\x3d"noSelectionText"\x3e');b.push(MSGS.get("TIMEANDLABOR_WORKSCHEDULE_PREVIEW_NO_SELECTION"));b.push("\x3c/span\x3e");break;case TLMManageWorkSchedulePreview.DAYTYPE.DAY_OFF:b.push('\x3cspan class\x3d"dayOffText"\x3e');b.push(MSGS.get("TIMEANDLABOR_WORKSCHEDULE_DAY_CATEGORY_DAY_OFF"));b.push("\x3c/span\x3e");break;case TLMManageWorkSchedulePreview.DAYTYPE.WORKING_DAY:"CLOCK_TIME"===
this._workSchedule.getTimeRecordingVariant()?this._renderClockTimeInformation(a,b):(b.push('\x3cspan class\x3d"hoursAndMinutesText"  title\x3d"'+a.wsDay.getFormattedHoursAndMinutesLongText()+'"\x3e'),b.push(a.wsDay.getFormattedHoursAndMinutes()),b.push("\x3c/span\x3e"),this._renderDayModelInformation(a,b))}},_renderDayModelInformation:function(a,b){var c=a.wsDay.getDayModelExtCode();c&&""!==c&&(20>=c.length?(b.push('\x3cspan class\x3d"dayModelText"\x3e'),b.push(Util.escapeHTML(c))):(b.push('\x3cspan class\x3d"dayModelText" title\x3d"'+
Util.escapeHTML(c)+'"\x3e'),b.push(Util.escapeHTML(c.substring(0,20)+"..."))),b.push("\x3c/span\x3e"))},_renderClockTimeInformation:function(a,b){var c="";if(0!==a.wsDay.getWorkingTimeSegments().length)var d=a.wsDay.getWorkingTimeSegments(),c=d[0],c=MSGS.TIMEANDLABOR_WORKSCHEDULE_WORKING_TIME+"\n"+TLMFormatter.formatTimePeriod(c.getStartTime(),c.getEndTime());for(var e="No breaks",f=a.wsDay.getBreakSegments(),g=0;g<f.length;g++)"No breaks"===e?(e=MSGS.TIMEANDLABOR_WORKSCHEDULE_BREAKS+"\n",e+=TLMFormatter.formatBreak(f[g].getStartTime(),
f[g].getEndTime(),f[g].getDuration())):e=e+"\n"+TLMFormatter.formatBreak(f[g].getStartTime(),f[g].getEndTime(),f[g].getDuration());b.push('\x3cspan class\x3d"hoursAndMinutesText"  title\x3d"'+(c+("\n"+e))+'"\x3e');b.push(d[0].getStartTime()+"-"+d[0].getEndTime());b.push("\x3c/span\x3e")},refresh:function(a){this._workSchedule=a;this._data=this._getData();a=[];this._renderContent(a);juic.$(this.id+"_tlmWorkSchedulePreviewContent").innerHTML=a.join("")}});