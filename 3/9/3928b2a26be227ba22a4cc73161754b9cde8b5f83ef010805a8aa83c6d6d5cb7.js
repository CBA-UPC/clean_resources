(this["webpackJsonp@livechat/chat-widget"]=this["webpackJsonp@livechat/chat-widget"]||[]).push([[4],{695:function(e,t,n){"use strict";n.r(t);var r=n(3),i=n(0),o=n(31),a=n(28),c=n(9),l=n(1),s=n(87),u=n(2),d=n(5),f=n(647),b=n(90),m=n(130),p=(n(57),n(13)),g=n(193),h=n(7),v=n(12),j=n(646),O=function(e,t){var n=new Date(e);return n.toLocaleDateString()===(new Date).toLocaleDateString()?t.today(n):n)?t.yesterday(n):n.toLocaleDateString([],{year:"numeric",month:"2-digit",day:"2-digit"})},x=y=function(e,t,n){var r=Object(u.Db)(t).sort((),i=Object(u.q)((,r);if(i>-1)return{currentTimestamp:r[i].timestamp,previousTimestamp:i>0?r[i-1].timestamp:n}},w=function(e,t){var n=i.useRef({beginingOfTime:t,currentTimestamp:0,subscribers:[],dividers:{}}),r=function(e){var t={timestamp:e,direction:e>n.current.currentTimestamp?"down":"up"};n.current.currentTimestamp=e,n.current.subscribers.forEach(()},o=function(e){var t=e.rootRef,n=e.rootMargin,r=e.threshold,o=e.intersectionHandler;if(x()){var c=i.useRef(null),l=i.useRef([]),s=Object(a.l)(o);return i.useEffect((function(){return c.current=new IntersectionObserver((,{root:t.current,rootMargin:n,threshold:r}),l.current.forEach((),l.current=[],function(){return c.current.disconnect()}}),[n,r,t,s]),Object(a.c)((function(){return{add:remove:function(e){c.current?c.current.unobserve(e):l.current=l.current.filter((function(t){return t!==e}))}}}))}}({rootRef:e,intersectionHandler:function(e){var t=function(e,t,n){var r=e.filter((function(e){return e.isIntersecting})).sort((function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top}))[0];if(r){var i=y(r.target,t,n);return i&&i.previousTimestamp}var o=e.filter(().sort(().reverse()[0];if(o){var a=y(o.target,t,n);return a&&a.currentTimestamp}}(e,n.current.dividers,n.current.beginingOfTime);t&&r(t)},threshold:.2});return i.useEffect((function(){var e=Object(u.Db)(n.current.dividers).map((function(e){return e.timestamp})),t=Math.max.apply(Math,e.concat([n.current.beginingOfTime]));n.current.currentTimestamp=t,n.current.subscribers.forEach(()}),[]),Object(a.c)((function(){return{add:function(e){n.current.dividers[e.timestamp]=e,o&&o.add(e.node)},remove:function(e){o&&o.remove(e.node),delete n.current.dividers[e.timestamp]},subscribe:unsubscribe:setBeginingOfTime:currentTimestamp:setToNewestTimestamp:function(){var e=Object.keys(n.current.dividers).map(Number).sort(()[0];r(e)}}}))},k=i.createContext(null),E=function(){return i.useContext(k)},A=function(e){var t=e.children,n=e.rootRef,r=e.beginingOfTime,o=e.isOnBottomSource,a=w(n,null!=r?r:0);return i.useEffect((),i.useEffect((function(){return o.subscribe(()}),[o,a]),i.createElement(k.Provider,{value:a},t)};var C=Object(d.A)("span",{displayName:"DividerLabel",target:"eceo2x80"})({name:"1rpc86p",styles:"padding:4px 8px;font-size:12px;position:relative;padding:0 8px;&:before,&:after{content:'';width:50vw;height:0;border-top:1px solid;border-top-color:inherit;position:absolute;top:50%;}&:before{right:100%;}&:after{left:100%;}"});ar T={name:"sx4ymz",styles:"opacity:0;pointer-events:none"},_=Object(d.A)(C,{target:"e1g4em791"})("color:",(function(e){return e.theme.colors.primaryTextColor}),";overflow:hidden;border:1px solid ",(function(e){return e.theme.colors.divider}),";background-color:",(function(e){return e.theme.colors.surface}),";border-radius:",(function(e){return e.theme.borderRadius.md}),";padding:2px 6px;transition:opacity 150ms linear;",(,";"),I=Object(d.A)("span",{target:"e1g4em790"})(""),z=200;var R=x()?function(e){var t=e.isUserScrollingSource,n=Object(h.a)(e,["isUserScrollingSource"]),c=Object(a.v)(t),s=E(),u=i.useState({direction:"up",timestamp:s.currentTimestamp()}),d=u[0],b=u[1];return i.useEffect((function(){s.subscribe(b);var e=s.currentTimestamp();return e!==d.timestamp&&b({direction:"up",timestamp:e}),function(){return s.unsubscribe(b)}}),[s]),d.timestamp?i.createElement(o.a,null,(function(e){var t=O(d.timestamp,{today:function(){return e("today")},yesterday:function(){return e("yesterday")}});return i.createElement(r.a,null,(function(e){var r=function(e,t){return e(S(),String(I),String(I),String(I),"up"===t?"-2em":"2em",String(I),z,z,String(I),String(I),"up"===t?"2em":"-2em",z)}(e.css,d.direction);return i.createElement(f.a,{component:null,childFactory:,i.createElement(j.a,{key:t,classNames:r,timeout:z},i.createElement(_,Object(l.a)({},n,{visible:c}),i.createElement(I,null,t))))}))})):null}:M=function(e){var t=E();i.useEffect((function(){var n={timestamp:e.timestamp,node:e.nodeRef.current};return t.add(n),),[])};var P=Object(d.A)("div",{target:"ehmqpie0"})({name:"1wai6wj",styles:"height:20px;margin:16px -0.5em;text-align:center;overflow:hidden"}),F=function(e){var t=e.timestamp,n=i.useRef(null);return M({timestamp:t,nodeRef:n}),i.createElement(o.a,null,(function(e){return i.createElement(P,{ref:n},i.createElement(C,null,O(t,{today:yesterday:function(){return e("yesterday")}})))}))},D=n(27);var B=Object(d.A)("div",{displayName:"NewMessageHorizontalDivider",target:"eacid5n1"})({name:"gbe43y",styles:"height:27px;margin:16px -0.5em;text-align:center;overflow:hidden"}),q=Object(d.A)(D.V,{target:"eacid5n0"})({name:"1c0l2b2",styles:"display:inline-flex;padding:2px 12px;font-weight:normal;box-shadow:none;height:auto;&:before,&:after{border-top:0;}"}),H=function(e){var t=e.unseenCount,n=e.setScrollTargetNode,r=i.useRef(null),c=i.useState(!0),l=c[0],s=c[1];return Object(a.n)((),i.useEffect((,[]),i.createElement(o.a,null,(function(e){return i.createElement(B,{ref:r},i.createElement(q,{animated:l,minScale:.9,maxScale:1.05},e(1===t?"new_message":"new_messages")))}))},L=n(15),U=Object(d.A)("div",{target:"ekfrplk0"})((function(e){return e.theme.typography.basic})," color:",(function(e){return e.theme.colors.textPrimary}),";line-height:1.2;color:inherit;display:flex;width:100%;flex-direction:",(function(e){return e.row?"row":"column"}),";"),N=n(85),V=n(685),W=n(21),G=n(170),Y=n(692),K=n(25),J=n(661),Q=n(75),X=n.n(Q),Z=$=function(e){var t=e.portalId,n=void 0===t?J.a:t,r=e.children,o=Object(N.useFrame)().document,a=i.useState((),c=a[0],l=a[1];return i.useEffect((function(){var e=Z(n,o);e&&e!==c&&l(e)}),[c,n,o]),c?Q.createPortal(r,c):null};var ee=10,te=Object(d.A)("div",{displayName:"Tooltip",target:"ezqijrk2"})("display:inline-block;background-color:",(function(e){var t=e.theme,n=e.kind;return t.colors[n+"Surface"]}),";color:",(,";padding:1em;position:fixed;border-radius:",(function(e){return e.theme.borderRadius.lg}),";z-index:9;font-size:0.8em;font-weight:normal;margin-top:0.5em;margin-bottom:0.5em;box-shadow:",(function(e){return e.theme.boxShadow.floating}),";transition:",(function(e){var t=e.theme;return"opacity 200ms "+t.transitions.easings.swift+", transform 300ms "+t.transitions.easings.swift}),";",(function(e){var t=e.position;return{left:t.left?t.left-ee+"px":"auto",right:t.right?t.right-ee+"px":"auto",top:t.top?t.top+"px":"auto",bottom:t.bottom?t.bottom:"auto",marginRight:t.right?0:"10px",marginLeft:t.left?0:"10px"}}),";"),ne=Object(d.A)("svg",{displayName:"TooltipArrow",target:"ezqijrk1"})("position:absolute;fill:",(function(e){var t=e.theme,n=e.kind;return t.colors[n+"Surface"]}),";margin-top:-1.5em;margin-bottom:-1.5em;",(function(e){var t=e.position,n=e.horizontalFactor,r=e.placement,i=void 0===r?"top":r,o=e.theme;return Object(l.a)({left:t.left?n-ee+("modern"===o.name?3:-1)+"px":"auto",right:t.right?n-ee+("modern"===o.name?3:-1)+"px":"auto"},"bottom"===i?{top:0}:{bottom:0,transform:"rotate(180deg)"})}),";"),re=Object(d.A)("div",{target:"ezqijrk0"})({name:"bjn8wh",styles:"position:relative"}),ie=function(e,t,n){var r=e.getBoundingClientRect(),i=r.left,o=r.right,a=r.bottom,c=r.top,s=n.window,u=s.innerWidth,d=s.innerHeight,f=s.pageXOffset,b=s.pageYOffset,m="top"===t?{bottom:d-(c+b)}:{top:a+b},p=i+f>u/2?{right:u-(o+f)}:{left:i+f};return Object(l.a)({},m,p)},oe={position:{top:0,left:0},targetWidth:0};var ae=function(e){var t=e.children,n=e.description,r=e.allowTouch,o=e.controlsRef,c=e.animated,s=void 0!==c&&c,d=e.placement,f=void 0===d?"bottom":d,b=e.trigger,m=void 0===b?"hover":b,p=e.onOpenChange,g=void 0===p?u.W:p,v=e.kind,j=void 0===v?"hint":v,O=Object(h.a)(e,["children","description","allowTouch","controlsRef","animated","placement","trigger","onOpenChange","kind"]),x=i.useRef(null);Object(W.k)();var y=i.useRef(null),w=i.useRef(!1),k=i.useState(oe),E=k[0],A=k[1],C=i.useState(!1),S=C[0],T=C[1],_=Object(N.useFrame)(),I=Object(Y.a)(Object(l.a)({onOpenChange:function(e){s&&requestAnimationFrame((function(){return T(e)}));var t=e?(A({position:ie(y.current,f,_),targetWidth:y.current.offsetWidth}),requestAnimationFrame(t)):t()}},O));(null==o?void 0:o.current)&&(o.current={open:function(){w.current=!0,I.open(!0)},close:);var z,R=Object(V.b)(O,I,y),M=R.tooltipProps,P=R.triggerProps,F=Object(V.a)(M,I).tooltipProps,D=Object(W.m)({onPress:).pressProps;return Object(a.m)(x,(,_),O.isDisabled&&I.isOpen&&I.close(),i.createElement(G.b,Object(l.a)({},"press"===m?D:r?Object(K.h)(P,D):P,{ref:y}),t,I.isOpen&&i.createElement($,{portalId:J.b},i.createElement(te,Object(l.a)({ref:x,position:E.position,kind:j},"hover"===m&&F,s&&{style:{opacity:(z=S)?1:0,transform:"translateY("+(z?0:8)+"px)"}}),i.createElement(re,null,i.createElement(ne,{placement:f,kind:j,horizontalFactor:E.targetWidth/2,height:"10",position:E.position,width:"16"},i.createElement("polygon",{points:"0,10 16,10 8,0"})),n))))},ce=n(673),le=n(261);ar ue=300,de=fe=be=function(e,t,n){return e(se(),fe(n.variant),ue,n.transitions.easings.smooth,fe(n.variant),ue,n.transitions.easings.smooth,t)},me=function(e){var t=e.zIndex;return Object(r.c)("z-index:",t,";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;")},pe=function(e){var t=e.zIndex,n=Object(h.a)(e,["zIndex"]),o=i.useRef(null);return Object(a.f)("touchmove",o),Object(r.d)("div",Object(l.a)({ref:o,css:me({zIndex:t})},n))},ge=function(e){var t=e.shown,n=e.onPress,i=e.exitDelay,o=void 0===i?100:i,a=e.zIndex,c=void 0===a?999:a,s=Object(W.m)({onPress:n}).pressProps;return Object(r.d)(r.a,null,(function(e){var n=e.css,i=e.theme;return Object(r.d)(f.a,{appear:!0,component:null},t&&Object(r.d)(j.a,{classNames:be(n,o,i),timeout:de(o)},Object(r.d)(pe,Object(l.a)({zIndex:c},s))))}))},he=i.memo(ge),ve=n(53),je=n(141);var Oe={name:"jubs0u",styles:"margin:0;background:transparent"},xe=function(e){return Object(r.c)("position:absolute;z-index:1500;width:calc(100% - 2rem);max-width:290px;top:1em;left:50%;color:",e.colors.primaryTextColor,";background:",e.colors.surface,";box-shadow:",e.boxShadow.lg,";padding:",1*e.spaceBase,"px;border-radius:",e.borderRadius.xl,";")},ye=Object(d.A)("div",{target:"e1yhh5l71"})({name:"4hray5",styles:"display:flex;flex-direction:row-reverse"}),we=Object(d.A)("div",{target:"e1yhh5l70"})("padding:",(,"px;padding-top:0;"),ke=i.forwardRef((function(e,t){var n=e.onClose,i=void 0===n?u.W:n,o=e.children,a=e["aria-label"],c=e["aria-labelledby"],s=e.isPreview,d=Object(h.a)(e,["onClose","children","aria-label","aria-labelledby","isPreview"]);Object(le.d)({isDisabled:s});var f=Object(le.c)({isOpen:!0,isDismissable:!0,onClose:i},t).overlayProps,b=Object(le.b)().modalProps,m=Object(ce.a)({"aria-label":a,"aria-labelledby":c},t).dialogProps;return Object(r.d)(G.a,{contain:!0,autoFocus:!0,restoreFocus:!0},Object(r.d)("div",Object(l.a)({},Object(K.h)(d,f,b,m),{ref:t,css:xe}),Object(r.d)(ye,null,Object(r.d)(D.s,{css:Oe,onPress:i,"aria-label":"Close modal"},Object(r.d)(D.h,{"aria-hidden":!0}))),Object(r.d)(we,null,o)))})),Ee=function(e){var t=e.onClose,n=void 0===t?u.W:t,o=e.shown,a=e.children,c=Object(h.a)(e,["onClose","shown","children"]),s=i.useRef(null),d=Object(ve.b)(),b=Object(je.b)();return i.useEffect((,[o,b]),Object(r.d)($,null,Object(r.d)(he,{shown:o,onPress:n,exitDelay:25}),Object(r.d)(f.a,{component:null},o&&Object(r.d)(g.b,{nodeRef:s},Object(r.d)(ke,Object(l.a)({onClose:n,ref:s,isPreview:d},c),a))))},Ae=n(662),Ce=n(665);var Se=Object(d.A)("div",{target:"e1lbo1s41"})({name:"175oc9c",styles:"display:flex;justify-content:center;flex-shrink:0"}),Te=Object(d.A)("div",{displayName:"IconLabel",target:"e1lbo1s40"})("display:flex;justify-content:center;align-items:center;",(function(e){var t=e.size,n=e.theme;return{width:t,height:t,borderRadius:n.borderRadius.round,backgroundColor:n.colors.surfaceDecorative}}),";"),_e=function(e){var t=e.size,n=void 0===t?"64px":t,r=e.children,o=Object(h.a)(e,["size","children"]);return i.createElement(Se,null,i.createElement(Te,Object(l.a)({size:n},o),r))};var Ie="add_rate_comment_label",ze={name:"1azakc",styles:"text-align:center"},Re=Object(o.c)((function(e,t){var n=t.chatId,r=t.show,i=t.selectedRate,o=e.getApplicationState("isPreview"),a=o?function(){return Promise.resolve()}:function(t){var r=t.comment,i={};return void 0!==r&&(i.rateComment=r),e.requestUpdateChat(n,{properties:i})};return{selectedRate:i,show:r,mobile:e.getApplicationState("mobile"),rateChat:a,localize:e.localize,isPreview:o}}))((function(e){var t=e.rateChat,n=e.selectedRate,i=e.show,o=e.localize,a=e.isPreview,c=e.mobile,l=e.onClose,s=e.onSubmit;return Object(r.d)(Ee,{shown:i,onClose:l},Object(r.d)(_e,null,"good"===n?Object(r.d)(D.S,{label:o("rate_me_confirmation_good")}):Object(r.d)(D.R,{label:o("rate_me_confirmation_bad")})),Object(r.d)("p",{id:Ie,css:ze},o("rate_me_add_comment")),Object(r.d)(Ae.a,{id:"rate_comment",mobile:c,onSubmit:submitLabel:o("button_add_feedback"),validate:function(e){return e.comment?{}:{comment:o("survey_fill_in_required_fields")}},disabled:a},Object(r.d)(d.q,null,Object(r.d)(Ce.a,{label:"",serverName:"",type:"textarea",name:"comment",localize:ariaLabelledBy:Ie,required:!0}))))}));var Me={name:"870gjp",styles:"font-size:inherit"},Pe={name:"l3iapi",styles:"margin-right:6px;margin-left:0"},Fe=Object(d.A)(D.s,{target:"e1mt5al70"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}",(function(e){var t=e.theme;return t.isRtl&&"smooth"===t.name&&Pe}),";"),De=Object(o.c)((function(e,t){var n=t.chatId,r=t.variant,i=t.source,o=t.onRatingCommentModalStateChange,a=e.getApplicationState("isPreview"),c=a?function(t){var r=t.rate,o={};return void 0!==r&&(o.rate=r),e.requestUpdateChat(n,{properties:o},{source:i})};return function(e){var t=e.getChat(n),i=t.active,l=t.properties,s=l.ended;return{chatRate:l.rate,disabled:!a&&(!s&&!i),rateChat:c,localize:e.localize,variant:r,chatId:n,onRatingCommentModalStateChange:o}}}))((function(e){var t=e.chatId,n=e.chatRate,o=e.disabled,a=e.rateChat,c=e.localize,l=e.variant,s=void 0===l?"normal":l,u=e.onRatingCommentModalStateChange,d=i.useState(!1),f=d[0],b=d[1],m=i.useState(n),p=m[0],g=m[1],h=i.useCallback((function(e){return function(){var t=p===e,r=t?null:e;a({rate:r}).catch((function(){return g(n)})),g(r),b(!t)}}),[p,n,a]);i.useEffect((,[n]),i.useEffect((,[f,u]);var v=j=function(e){return{disabled:o,active:n===e,onPress:h(e),"aria-label":c(n===e?"cancel_"+e+"_rating":"rate_"+e+"_and_open_modal")}},O=c("good"===n?"rate_me_cancel_tooltip":"rate_me_good_tooltip"),x=c("bad"===n?"rate_me_cancel_tooltip":"rate_me_bad_tooltip");return Object(r.d)(i.Fragment,null,Object(r.d)(ae,{isDisabled:o,description:O},Object(r.d)(Fe,j("good"),"small"===s?Object(r.d)(D.N,{css:Me,"aria-hidden":!0}):Object(r.d)(D.S,{css:Me,"aria-hidden":!0}))),Object(r.d)(ae,{isDisabled:o,description:x},Object(r.d)(Fe,j("bad"),"small"===s?Object(r.d)(D.M,{css:Me,"aria-hidden":!0}):Object(r.d)(D.R,{css:Me,"aria-hidden":!0}))),Object(r.d)(Re,{show:f,onClose:v,onSubmit:v,selectedRate:p,chatId:t}))})),Be=n(50);var qe=He=Object(d.A)("div",{target:"ekqutxs1"})({name:"v2yezz",styles:"display:flex;flex-grow:0;align-items:center;position:relative"}),Le=Object(d.A)("div",{target:"ekqutxs0"})("position:absolute;",(function(e){var t=e.availability,n=e.size,r=e.theme;return{width:"small"===n?r.spaces.space4:r.spaces.space5,height:"small"===n?r.spaces.space4:r.spaces.space5,background:"online"===t?r.colors.success:r.colors.grayscale[500],border:"2px solid "+r.colors.surface,borderRadius:r.borderRadius.round,top:"large"===n&&"modern"!==r.name?"0":"-2px",left:"large"===n&&"modern"!==r.name?"0":"-2px"}}),";"),Ue=function(e){var t=e.avatarUrl,n=e.availability,i=e.size,o=void 0===i?"normal":i,a=Object(h.a)(e,["avatarUrl","availability","size"]);return Object(r.d)(He,a,Object(r.d)(d.b,{imgUrl:t,size:qe(o)}),n&&Object(r.d)(Le,{availability:n,size:o}))};var Ne=Object(d.A)("div",{target:"e9ks4qw3"})("display:flex;align-items:center;justify-content:center;padding-left:",(function(e){return e.logoWithoutShift?"0":"25px"}),";margin-bottom:",(function(e){return e.modernDowngrade?"0":"10px"}),";&>*{margin-left:",(function(e){return e.logoWithoutShift?"0":"-15px"}),";}"),Ve=Object(d.A)("div",{target:"e9ks4qw2"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),We=Object(d.A)(_e,{target:"e9ks4qw1"})("background-color:",(function(e){return e.theme.colors.surfaceDecorative}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";margin-top:-25px;margin-left:-25px;position:absolute;z-index:2000;"),Ge=Object(d.A)("div",{target:"e9ks4qw0"})("width:56px;height:56px;border-radius:",(function(e){return e.theme.borderRadius.round}),";overflow:hidden;display:flex;align-items:center;position:relative;z-index:2;background-color:",(function(e){return e.theme.colors.surface}),";box-shadow:0 0 0 2px ",(function(e){return e.theme.colors.agentBarBackground}),";img{width:100%;height:100%;object-fit:contain;}&::after{top:0;left:0;right:0;bottom:0;content:'';position:absolute;width:100%;height:100%;border-radius:",(function(e){return e.theme.borderRadius.round}),";box-shadow:inset 0px 0px 0px 1px rgba(143, 143, 143, 0.15);}"),Ye=function(e){var t=e.avatarUrl,n=e.icon,o=e.logoUrl,a=e.showAvatar,c=void 0===a||a,l="modern"===Object(s.g)().name,u=i.useState(!l&&o),d=u[0],f=u[1];return Object(r.d)(Ne,{modernDowngrade:l,logoWithoutShift:l||!o||!c},n&&Object(r.d)(Ve,{"aria-hidden":!0},Object(r.d)(We,{size:"24px",isLight:!0},n)),c&&Object(r.d)(Ue,{size:"large",avatarUrl:t,availability:n?void 0:"online"}),d&&Object(r.d)(Ge,null,Object(r.d)("img",{alt:"Company logo",src:o,onError:function(){return f(!1)}})))};var Ke={name:"f7ay7b",styles:"justify-content:center"},Je=Object(d.A)("div",{target:"e10kp68a3"})({name:"zov8s0",styles:"width:100%;display:flex;justify-content:center"}),Qe=Object(d.A)("div",{target:"e10kp68a2"})("display:flex;flex-direction:",(function(e){return e.verticalLayout?"row":"column"}),";justify-content:",(function(e){return e.verticalLayout?"flex-start":"center"}),";align-items:center;width:",(function(e){return e.verticalLayout?"100%":"auto"}),";max-width:100%;"),Xe={name:"xyzkeb",styles:"align-self:flex-start"},Ze=Object(d.A)(d.w,{target:"e10kp68a1"})({name:"172op4w",styles:"margin-top:0;margin-bottom:0"}),$e=Object(r.c)(Ke," min-width:auto;"),et=Object(d.A)("img",{target:"e10kp68a0"})({name:"1lnnphj",styles:"height:auto;max-height:50px"}),tt=function(e){var t,n=e.agent,i=e.chatId,o=e.showAvatar,a=e.logoPath,c=e.isRatingEnabled,l="modern"===Object(s.g)().name;return Object(r.d)(Je,null,Object(r.d)(Qe,{verticalLayout:l},Object(r.d)(Ye,{logoUrl:a,showAvatar:o,avatarUrl:o?n.avatar:void 0}),Object(r.d)("div",{css:(t=l,Object(r.c)("margin-top:0;margin-bottom:",t?"0":"10px",";text-align:",t?"left":"center",";width:",t?"100%":"auto",";max-width:100%;min-width:0;",t&&Xe,";"))},Object(r.d)(Ze,{as:"h1",ellipsis:!0},Object(r.d)(Be.a,null,n.name)),n.properties.jobTitle&&Object(r.d)(d.s,{ellipsis:!0},Object(r.d)(Be.a,null,n.properties.jobTitle)),c&&l&&Object(r.d)(d.q,null,Object(r.d)(De,{chatId:i,variant:"normal",source:"agent_bar"}))),c&&!l&&Object(r.d)(d.q,null,Object(r.d)(De,{chatId:i,variant:"normal",source:"agent_bar"})),!!a&&l&&Object(r.d)(d.f,{css:$e},Object(r.d)(et,{alt:"",src:a,draggable:!1}))))},nt=n(109),rt=n(121),it=n(196),ot="top-bar";var at={name:"l3iapi",styles:"margin-right:6px;margin-left:0"},ct=Object(d.A)(D.s,{target:"eyohww45"})("width:24px;height:24px;opacity:1;background-color:",(function(e){var t=e.theme;return"modern"===t.name?"transparent":t.colors.lighterOppositeAgentBarColor}),";",(,";"),lt=Object(d.A)(D.f,{target:"eyohww44"})((," transition:transform 0.3s ",(function(e){return e.theme.transitions.easings.swift}),";"),st=Object(d.A)(U,{target:"eyohww43"})("display:flex;text-align:left;overflow:hidden;height:auto;width:100%;align-items:",(function(e){return e.veritcallyCenter?"center":"flex-start"}),";transition:height 0.3s ",(,";will-change:height;line-height:1.5;justify-content:center;"),ut=Object(d.A)("div",{target:"eyohww42"})({name:"1kjhtaf",styles:"display:flex;align-items:flex-start;margin-top:10px"}),dt=Object(d.A)("div",{target:"eyohww41"})({name:"zjik7",styles:"display:flex"}),ft=Object(d.A)("div",{target:"eyohww40"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),bt=function(e){var t=e.text,n=e.icon,a=e.isLoadingHistory,c=e.forceExpanded,u=e.forceCollapsed,d=e.isUploadDrawerVisible,f=e.logoPath,b=i.useState(!0),m=b[0],p=b[1],g=i.useState(!1),h=g[0],v=g[1],j=i.useState(!1),O=j[0],x=j[1],y=i.useState(null),w=y[0],k=y[1],E=i.useState(!1),A=E[0],C=E[1],S=i.useRef(null),T=Object(K.l)(),_=Object(s.g)().name,I="modern"===_?45:108,z=i.useCallback((function(e){var t=(void 0===e?{}:e).shouldKeepPrevious,n=void 0!==t&&t;if(m){var r=S.current.clientHeight;r!==w&&k(r),S.current.style.height=r+"px",S.current.scrollTop}S.current.style.height=(m?I:Number(w))+"px",n&&v(m),p(()}),[m,w,I]),R=M=a&&m,P=u&&m,F=h&&!u&&!m&&!d;i.useEffect((function(){if(S&&!c){var e=S.current.clientHeight>I;x(e)}S&&c&&(S.current.style.height="auto",x(!1))}),[S,c,I]),i.useEffect((function(){O&&(k(S.current.clientHeight),S.current.style.height=I+"px",C(!0),p(!1))}),[O,I]),i.useEffect((function(){(M||P)&&z({shouldKeepPrevious:P})}),[z,M,P]),i.useEffect((,[z,F]);var D=m||!O;return Object(r.d)(o.a,null,(function(e){return Object(r.d)(st,{ref:S,row:!0,veritcallyCenter:!O,onTransitionEnd:R,textWrap:!0},Object(r.d)(ft,{css:D?"":Object(it.a)(2),id:T},"modern"!==_&&Object(r.d)(Ye,{logoUrl:f,icon:n}),Object(r.d)(dt,null,Object(r.d)("span",null,Object(r.d)(nt.a,Object(l.a)({template:t,root:{component:Be.a},linkComponent:rt.a},!m&&{limit:120}))),O&&Object(r.d)(ut,null,Object(r.d)(ct,{onPress:z,"aria-expanded":m,"aria-controls":T,"aria-label":e(m?"show_less":"show_more")},Object(r.d)(lt,{size:24,direction:A&&m?"up":"down","aria-hidden":!0}))))))}))},mt=n(18),pt={modern:42,smooth:56},gt=Object(d.A)("div",{target:"e8t2lg23"})("width:",(function(e){return e.isVisible?100:0}),"%;height:",(function(e){return e.isVisible?100:0}),"%;position:absolute;top:0;left:0;z-index:101;"),ht=Object(d.A)("div",{target:"e8t2lg22"})("position:relative;top:",(,"px;left:0;width:100%;height:",(,";background-color:",(,";padding:",(function(e){return e.theme.spaces.space3}),";pointer-events:none;"),vt=Object(d.A)("div",{target:"e8t2lg21"})("display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;border:2px dashed ",(function(e){return e.theme.colors.border}),";border-radius:",(function(e){return e.theme.borderRadius.lg}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";"),jt=Object(d.A)("h1",{target:"e8t2lg20"})((function(e){return e.theme.typography.subheading}),";"),Ot=Object(o.c)((function(e){return{uploadFile:hideDropArea:isVisible:e.getApplicationState("dropAreaVisible")}}))((function(e){var t=e.isVisible,n=e.uploadFile,r=e.hideDropArea,a=e.topBarHeight,c=i.useState(!1),l=c[0],u=c[1],d=Object(s.g)(),b=pt[d.name]+a,m=return i.createElement($,null,i.createElement(gt,{onDragLeave:onDragOver:m,onDrop:function(e){var t;m(e);var i=null==(t=e.dataTransfer)?void 0:t.files;i&&Array.prototype.forEach.call(i,n),r()},isVisible:t||l},i.createElement(f.a,{appear:!0,component:null},t&&i.createElement(g.d,{length:300,onEnter:function(){return u(!0)},onExited:,i.createElement(ht,{topOffset:b},i.createElement(vt,null,i.createElement(D.k,null),i.createElement(o.a,null,(function(e){return i.createElement(jt,null,e("drop_files_here"))}))))))))}));ar yt=Object(d.A)(d.a,{target:"eraual4"})("position:relative;padding-top:",(function(e){return"modern"===e.theme.name?"0.6em":0}),";padding-bottom:",(,";box-shadow:",(function(e){return e.theme.boxShadow.sm}),";"),wt=Object(d.A)("div",{displayName:"TopBar",target:"eraual3"})("position:relative;height:auto;bottom:0;z-index:",(function(e){return e.elevate?102:1}),";pointer-events:",(function(e){return e.elevate?"none":"all"}),";@media (max-height: 330px){display:none;}"),kt=Object(d.A)("div",{target:"eraual2"})("min-height:",(function(e){var t=e.theme;return"calc("+("modern"===t.name?45:108)+"px + "+t.AgentBar.css.padding}),");"),Et={name:"1pc9iid",styles:"position:relative;box-shadow:none;padding:0"},At=Object(d.A)(d.a,{target:"eraual1"})("position:absolute;top:0;left:0;width:100%;padding-top:",(,";box-shadow:",(function(e){return e.theme.boxShadow.sm}),";",(,";"),Ct=Object(d.A)("div",{target:"eraual0"})("position:relative;width:100%;z-index:",(,";pointer-events:",(function(e){return e.elevate?"none":"all"}),";"),St="cubic-bezier(0.14, 0, 0, 1)",Tt={enter:150,exit:150},_t=It={name:"kul0w8",styles:"transition:opacity 100ms ease-in-out;position:relative"},zt=Object(o.c)((function(e,t){var n=t.chatId;return function(e){var t,r=Object(c.nb)(e),i=Object(c.qb)(e),o=Object(c.rb)(e),a=Object(c.i)("logo",e),l=a.enabled;return{agent:Object(c.d)(n,e),chatActive:e.getChat(n).active,showAvatar:Object(c.i)("agentAvatar",e).enabled,isRatingEnabled:Object(c.i)("rating",e).enabled,logoPath:l?(t=a.path,"https://"+Object(L.m)(t)):null,showAgentBar:r,showOfflineInformation:i,showQueueInformation:o,offlineInformation:Object(c.r)(e),queueText:Object(c.u)(e),showTopBar:Object(c.gb)(e),hasNoVisibleUserEvents:Object(c.I)(e),isDropAreaVisible:e.getApplicationState("dropAreaVisible"),isUploadingFiles:!!Object(c.s)(e).length}}}))((function(e){var t=e.agent,n=e.chatId,o=e.showAvatar,c=e.isRatingEnabled,l=e.chatActive,s=e.logoPath,u=e.showAgentBar,b=e.isAgentBarExpandedSource,m=e.showOfflineInformation,p=e.offlineInformation,g=e.showQueueInformation,h=e.queueText,v=e.isLoadingHistory,O=e.children,x=e.hasNoVisibleUserEvents,y=e.isDropAreaVisible,w=e.isUploadingFiles,k=e.wrapperRef,E=i.useRef(),A=i.useRef(),C=Object(a.v)(b);return Object(r.d)("div",{ref:k},Object(r.d)(Ot,{topBarHeight:k.current?k.current.clientHeight:0}),Object(r.d)(wt,{id:ot,ref:E,elevate:y},Object(r.d)(r.a,null,(function(e){var i=e.css;return Object(r.d)(f.a,{appear:!0,component:null,exit:C},u&&C&&Object(r.d)(j.a,{timeout:Tt,classNames:_t(i)},Object(r.d)("div",null,Object(r.d)(yt,{noShrink:!0},Object(r.d)(d.q,{flexFill:!0,ref:A,css:It},Object(r.d)(tt,{agent:t,chatId:n,showAvatar:o,logoPath:s,isRatingEnabled:c&&l}))))))}))),Object(r.d)(Ct,{collapsed:!(g||m),elevate:y},(g||m)&&Object(r.d)(i.Fragment,null,Object(r.d)(kt,null)),Object(r.d)(r.a,null,(function(e){var t=e.css;return Object(r.d)(f.a,{appear:g||m,component:null},Object(r.d)(j.a,{timeout:Tt,classNames:_t(t)},Object(r.d)(At,{collapsed:!(g||m)},g&&Object(r.d)(bt,{logoPath:s,text:h,icon:Object(r.d)(D.r,{size:24}),isLoadingHistory:v,forceExpanded:x,forceCollapsed:y,isUploadDrawerVisible:w}),m&&Object(r.d)(bt,{logoPath:s,text:p,icon:Object(r.d)(D.g,{size:"16"}),isLoadingHistory:v,forceExpanded:x,forceCollapsed:y,isUploadDrawerVisible:w}),O)))}))))})),Rt=n(669),Mt=(n(217),n(92)),Pt=n(159),Ft=Object(d.A)("label",{target:"e1e9gyrb2"})("color:",(function(e){return e.theme.colors.textPrimaryColor}),";cursor:",(function(e){return e.disabled?"not-allowed":"pointer"}),";display:flex;align-items:center;"),Dt=Object(d.A)("span",{target:"e1e9gyrb1"})("display:flex;align-items:center;justify-content:center;&:focus{outline-style:",(,";}"),Bt=Object(d.A)("span",{target:"e1e9gyrb0"})("display:inline-block;",(,";"),qt=function(e){var t=e.disabled,n=e.icon,r=e.label,o=e.fileInputRef,c=Object(s.g)(),u=Object(a.k)((),d=Object(W.f)(),f=n);return i.createElement(Ft,{flexFit:!0,htmlFor:"fileupload",disabled:t},i.createElement(Dt,Object(l.a)({role:"button","aria-label":"Send a file",tabIndex:"0"},u,d),i.createElement(f,{color:t?c.colors.tertiaryTextColor:"currentColor","aria-hidden":!0}),r?i.createElement(Bt,null,r):null))},Ht=n(671),Lt=n(682),Ut=n(19),Nt=n(34),Vt=function(e){var t=e.theme,n=e.disabled,i=e.active;return Object(r.c)("&:hover{background-color:",i?t.colors.pressedElement:t.colors.surfaceVariantHover,";",n&&"background-color: transparent",";}")};var Wt=Object(u.d)(["\ud83d\ude42","\ud83d\ude01","\ud83d\ude02","\ud83d\ude0a","\ud83d\ude0d","\ud83d\ude10","\ud83d\ude15","\ud83d\ude12","\ud83d\ude22","\ud83d\ude2d","\ud83c\udf89","\u2764\ufe0f","\ud83d\udc4c","\ud83d\udc4d","\ud83d\ude4f"],5),Gt=Object(d.A)("div",{target:"e1pkkif43"})({name:"14y8lnv",styles:"margin:0;padding:0;outline:none"}),Yt=Object(d.A)(D.s,{target:"e1pkkif42"})("display:flex;justify-content:center;align-items:center;color:",(function(e){var t=e.theme;return e.disabled?t.colors.tertiaryTextColor:t.colors.primaryTextColor}),";will-change:background-color;background-color:",(function(e){var t=e.theme;return e.active?t.colors.pressedElement:"transparent"}),";transition:background-color 150ms ease-in-out;opacity:1;",Vt,";"),Kt=Object(d.A)("div",{target:"e1pkkif41"})({name:"frpnj0",styles:"display:flex;flex-direction:row;align-items:center;justify-content:flex-start"}),Jt=Object(d.A)("div",{target:"e1pkkif40"})({name:"1uuyw89",styles:"display:flex;align-items:center;justify-content:center;flex-shrink:0;flex-grow:0"}),Qt=function(e){var t=e.onEmojiPicked,n=e.disabled,r=i.useRef(null),o=i.useRef(null),a=i.useRef({open:u.W,close:u.W}),c=i.useState(!1),l=c[0],s=c[1],d=function(e){t(e),a.current.close(),Math.random()<.1&&Object(Nt.d)("Emoji_inserted_from_picker",{emoji:e})},f=Object(Ht.a)({onSelect:d}),b=f.useHighlightedItemId();i.useEffect((,[n,l]);return 0===Wt.length||Object(Ut.g)()?null:i.createElement(ae,{animated:!0,placement:"top",trigger:"press",kind:"float",controlsRef:a,onOpenChange:function(e,t){var n;if(Object(W.c)()?f.setHighlightedItem(0):f.clearHighlightedItem(),e)null==(n=o.current)||n.focus(),Math.random()<.01&&Object(Nt.d)("emoji_picker_opened",{});else if(!t){var i;null==(i=r.current)||i.focus()}s(e)},description:i.createElement(Gt,{tabIndex:0,role:"grid","aria-label":"emoji picker",ref:o,"aria-activedescendant":b,onKeyDown:function(e){switch(e.key){case"ArrowUp":f.highlightedIndex.current-5>=0&&f.moveHighlightedItem(-5);break;case"ArrowDown":f.highlightedIndex.current+5<f.items.current.length&&f.moveHighlightedItem(5);break;case"ArrowLeft":f.highlightedIndex.current-1>=0&&f.moveHighlightedItem(-1);break;case"ArrowRight":f.highlightedIndex.current+1<f.items.current.length&&f.moveHighlightedItem(1);break;case"Home":f.setHighlightedItem(0);break;case"End":f.setHighlightedItem(f.items.current.length-1);break;case" ":case"Enter":e.preventDefault(),f.selectHighlightedItem();break;case"Tab":return void e.preventDefault();default:return void f.highlightItemByString(e)}e.preventDefault()}},Wt.map((function(e,t){return i.createElement(Kt,{key:t,role:"row"},e.map((function(e,t){return i.createElement(Jt,{key:t,role:"gridcell"},i.createElement(Lt.a,{emoji:e,itemList:f,onPress:))})))})))},i.createElement(Yt,{"aria-label":"open emoji picker",ref:r,active:l,onPress:disabled:n},i.createElement(D.n,null)))},Xt=n(14),Zt=i.createContext({}),$t=Object(d.A)("ul",{target:"e1ixnb8m0"})("list-style-type:none;position:absolute;z-index:100;background:",(function(e){return e.theme.colors.floatSurface}),";box-shadow:",(function(e){return e.theme.boxShadow.md}),";border-radius:",(function(e){return e.theme.borderRadius.lg}),";margin:0;margin-top:3.2em;margin-left:0.8em;padding:0;min-width:180px;overflow:hidden;&:focus{outline:none;}&>:last-child{border-bottom:0;}"),en=function(e){var t=function(e){var t=e.highlightedIndex,n=e.items,r=t.current;return null===r||r<0||0===n.current.length?null:n.current[r].ref}(e);return null!==t&&"true"!==t.current.getAttribute("aria-disabled")};var tn=function(e){var t=e.children,n=e.onClose,r=e.menuButtonRef,o=e.onSelect,c=Object(h.a)(e,["children","onClose","menuButtonRef","onSelect"]),s=Object(N.useFrame)(),u=i.useRef(null),d=i.useRef(!1),f=Object(Ht.a)({onSelect:o}),b=f.useHighlightedItemId();return Object(a.m)(u,(,s),Object(a.n)((),i.createElement($,null,i.createElement(Zt.Provider,{value:f},i.createElement($t,Object(l.a)({onMouseOut:f.clearHighlightedItem,tabIndex:-1,role:"menu",ref:u,"aria-activedescendant":b,onMouseDown:onKeyDown:function(e){switch(d.current=!0,e.preventDefault(),e.key){case"ArrowUp":return void f.moveHighlightedItem(-1);case"ArrowDown":return void f.moveHighlightedItem(1);case"Home":return void f.setHighlightedItem(0);case"End":return void f.setHighlightedItem(f.items.current.length-1);case" ":if(!en(f))return;return void f.selectHighlightedItem();case"Enter":if(!en(f))return;return f.selectHighlightedItem(),n(),void r.current.focus();case"Tab":return n(),e.shiftKey?void r.current.focus():void Object(Xt.e)(r.current).focus();case"Escape":return n(),void r.current.focus();default:return void f.highlightItemByString(e)}}},c),t)))},nn=Object(d.A)("li",{target:"ezmrzej0"})("background:transparent;font-family:inherit;font-size:14px;border:0;display:flex;align-items:center;padding:18px 25px;width:100%;cursor:pointer;border-bottom:",(,";color:",(,";background-color:",(,";&[aria-disabled='true']{pointer-events:none;color:",(function(e){return e.theme.colors.disabledContrast}),";background-color:",(function(e){return e.theme.colors.disabled}),";}"),rn=function(e){var t=e.disabled,n=e.text,r=e.value,o=Object(h.a)(e,["disabled","text","value"]),a=i.useRef(null),c=i.useContext(Zt),s=c.clearHighlightedItem,u=(0,c.useItem)({ref:a,text:n,value:r}),d=u.id,f=u.highlight,b=u.select,m=(0,u.useHighlighted)();return i.createElement(nn,Object(l.a)({role:"menuitem",id:d,ref:a,highlighted:m,onMouseOver:f,onMouseOut:s,onClick:function(e){1!==e.nativeEvent.which||t||b()}},t&&{"aria-disabled":!0},o))},on=n(22);var an=cn=Object(d.A)("div",{target:"ex4ls1q3"})("position:absolute;top:0;height:100%;display:flex;align-items:center;",(,";color:",(,";"),ln=Object(d.A)(d.q,{target:"ex4ls1q2"})({name:"bjn8wh",styles:"position:relative"}),sn={name:"1oaeivz",styles:"margin-right:8px"},un={name:"1qkltea",styles:"margin-left:5px"},dn=Object(d.A)(D.s,{target:"ex4ls1q1"})("display:flex;color:",(,";will-change:background-color;background-color:",(,";transition:background-color 150ms ease-in-out;opacity:1;svg{display:block;}",Vt,";"),fn=Object(d.A)("input",{target:"ex4ls1q0"})({name:"eivff4",styles:"display:none"}),bn={name:"zefn70",styles:"bottom:4.8em;right:2em"};var mn=Object(o.c)((function(e,t){var n=t.chatId,r=i=function(t){p.E(e,n,t)},o=a=function(){p.J(e,Object(l.a)({source:"message_box"},c.A(e)))};return function(t){return{sendFile:r,sendMessage:i,setMessageDraft:o,openVideoCallMoment:a,messageDraft:t.getApplicationState("messageDraft"),reconnecting:c.tb(t),allowInput:c.kb(t),allowFileUpload:c.jb(t),isFileUploadPossible:c.Q(t),mobile:t.getApplicationState("mobile"),applicationFocused:t.getApplicationState("applicationFocused"),videoCallButtonState:c.z(t),rtl:t.getApplicationState("rtl"),showAlternativeUploadOption:!t.getApplicationState("mobile")&&"code"===c.a(t)&&c.jb(t),showPermissionDeniedMessage:function(){return r=t.localize("screenshot_permission_error"),void p.b(e,n,{text:r});var r}}}}))((function(e){var t=e.allowFileUpload,n=e.isFileUploadPossible,c=e.mobile,s=e.onHeightChange,f=e.onSendMessage,b=e.allowInput,m=e.reconnecting,p=e.sendFile,g=e.sendMessage,v=e.setMessageDraft,j=(e.applicationFocused,e.onFocusChange),O=e.openVideoCallMoment,x=e.videoCallButtonState,y=e.rtl,w=e.showAlternativeUploadOption,k=e.messageDraft,E=e.showPermissionDeniedMessage,A=Object(h.a)(e,["allowFileUpload","isFileUploadPossible","mobile","onHeightChange","onSendMessage","allowInput","reconnecting","sendFile","sendMessage","setMessageDraft","applicationFocused","onFocusChange","openVideoCallMoment","videoCallButtonState","rtl","showAlternativeUploadOption","messageDraft","showPermissionDeniedMessage"]),C=i.useRef(null),S=i.useRef(null),T=i.useRef([0,0]),_=i.useRef(null),I=Object(a.h)("text-composer"),z=I.get(),R=i.useState(z||k||""),M=R[0],P=R[1],F=i.useState(!1),B=F[0],q=F[1],H=i.useState(!1),L=H[0],U=H[1],V=i.useMemo((function(){return v}),[v]),W=Object(a.d)(m),G=Object(ve.b)(),Y=y?"rtl":"ltr",K=Object(N.useFrame)().document,J=i.useCallback((,[p]),Q=i.useCallback((function(e){switch(q(!1),e){case"screenshot":ne(),Object(Nt.d)("snapshot_selected",{});break;case"file":_.current.click()}}),[q,ne]),Z=i.useCallback((function(){U(!0),j&&j(!0)}),[j]),$=i.useCallback((,[j]),ee=i.useCallback((function(e){P(""),g(e),v(null),I.clear(),f&&f()}),[g,f,v,I]),te=i.useCallback((,[J]),ne=i.useCallback((function(){Object(on.a)().then(().catch((function(e){"NotAllowedError"===e.name&&E(),Object(Nt.d)("snapshot_cancel",{reason:e.message})}))}),[J,E]);i.useEffect((function(){var e=C.current,t=return e.addEventListener("blur",t),function(){return e.removeEventListener("blur",t)}}),[]),i.useEffect((function(){var e=function(e){var t=Array.from(e.clipboardData.items);if(!t.some((function(e){return"text/plain"===e.type}))){var n=t.reduce((,[]);n.length&&(e.preventDefault(),J(n,"clipboard"))}};return t&&L&&n&&K.addEventListener("paste",e),function(){return K.removeEventListener("paste",e)}}),[t,L,n,K,p,J]);var re=function(e){var t=T.current,n=t[0],r=t[1];X.a.flushSync((function(){P((function(t){var i=t.slice(0,n)+e+t.slice(r,t.length);return I.set(i),i}))})),X.a.flushSync((function(){C.current.focus();var t=n+e.length;C.current.setSelectionRange(t,t)}))},ie=G?{id:"chat-widget-text-input"}:{};return Object(r.d)(o.a,null,(function(e){return Object(r.d)(d.t,Object(l.a)({},A,{value:M,active:b,disabled:m&&!W,mobile:c,defaultValue:z,onSend:ee,onValueChange:),Object(r.d)(ln,{verticalAlign:"center"},x.visible&&Object(r.d)(cn,{position:"left",dense:x.visible},Object(r.d)(ae,{placement:"top",description:"Start a video call"},Object(r.d)(D.s,{onPress:O,disabled:x.disabled,css:function(e){return{opacity:1,color:x.disabled?e.colors.tertiaryTextColor:e.colors.primaryTextColor}},"aria-label":"Start a video call"},Object(r.d)(D.X,null)))),Object(r.d)(d.u,Object(l.a)({ref:C,autoFocus:Object(Pt.c)(),css:function(e){return function(e){var t=e.disabled,n=e.leftIcons,i=e.mobile,o=e.theme;return Object(r.c)("font-family:inherit;padding:1.25em ",o.isRtl&&!i&&"modern"!==o.name?"135px":"125px"," 1.25em ",n?"3.75em":"20px",";overflow-y:auto;margin-top:0;transition:box-shadow 0.1s ease-in-out;color:",t?o.colors.tertiaryTextColor:o.colors.primaryTextColor,";background-color:",t?o.colors.disabled:Object(mt.i)(.012,o.colors.surface),";&:focus{background-color:",o.colors.surface,";}&:disabled{cursor:not-allowed;}")}({theme:e,mobile:c,disabled:m&&!W,leftIcons:x.visible})},disabled:m&&!W,flexFill:!0,minRows:1,onClick:onBlur:$,onFocus:Z,onHeightChange:s,placeholder:e("embedded_textarea_placeholder"),"aria-label":e("embedded_textarea_placeholder"),enterKeyHint:"send",dir:M?"auto":Y},ie)),Object(r.d)(cn,{position:"right",dense:x.visible},Object(r.d)(Qt,{onEmojiPicked:re,disabled:m&&!W}),t&&!w&&Object(r.d)(qt,{disabled:!n,handleFileChange:te,fileInputRef:_}),w&&Object(r.d)(dn,{"aria-label":"Add an attachment",ref:S,onPress:disabled:!n,active:B},Object(r.d)(D.b,{"aria-hidden":"true"})),B&&Object(r.d)(tn,{"aria-label":"File upload menu",menuButtonRef:S,onClose:function(){return q(!1)},css:bn,onSelect:Q},Object(r.d)(rn,{value:"file",disabled:G},Object(r.d)(qt,{disabled:!n,handleFileChange:te,label:e("send_file"),icon:D.p})),Object(r.d)(rn,{value:"screenshot",disabled:G},Object(r.d)(D.J,{css:function(e){return e)},"aria-hidden":!0}),e("attach_screenshot"))),Object(r.d)(d.r,{flexFit:!0,icon:Object(r.d)(D.L,null),css:an,"aria-label":"Send a message"}),!G&&Object(r.d)(fn,{multiple:!0,onChange:te,type:"file",value:"",id:"fileupload",ref:_,disabled:!n}))))}))})),pn="Toggle modal",gn="set_can_be_shown",hn="expand",vn="collapse",jn="toggle_collapsed",On="main_transition_start",xn="main_transition_end",yn="drawer_transition_end",wn="reset_collapsed",kn="show_conifrmation_modal",En="hide_conifrmation_modal",An=function(){return{type:gn}},Cn=function(){return{type:hn}},Sn=function(){return{type:vn}},Tn=function(){return{type:jn}},_n=function(){return{type:On}},In=function(){return{type:xn}},zn=function(){return{type:yn}},Rn=function(){return{type:wn}},Mn=Pn=function(){return{type:En}},Fn=function(e,t){switch(t.type){case gn:return Object(l.a)({},e,{canBeShown:!0});case hn:return Object(l.a)({},e,{collapsed:!1});case vn:return Object(l.a)({},e,{collapsed:!0});case jn:return Object(l.a)({},e,{collapsed:!e.collapsed});case wn:return Object(l.a)({},e,{animationEnded:!1,collapsed:!1});case On:return Object(l.a)({},e,{isAnimating:!0});case xn:return Object(l.a)({},e,{isAnimating:!1,animationEnded:!0});case yn:return Object(l.a)({},e,{isExpanding:!1});case kn:return Object(l.a)({},e,{isConfirmationModalShown:!0,confirmationModalMode:t.payload},e.collapsed&&{isExpanding:!0,collapsed:!1});case En:return Object(l.a)({},e,{isConfirmationModalShown:!1});default:return e}};function Dn(){var e=Object(v.a)(["\n\t&-enter,\n\t&-appear {\n\t\ttransform: translateY(100%);\n\t}\n\t&-enter-active,\n\t&-appear-active,\n\t&-enter-done,\n\t&-appear-done {\n\t\ttransform: translateY(0);\n\t\ttransition: transform ","ms ",";\n\t}\n\n\t&-exit {\n\t\ttransform: translateY(0);\n\t}\n\n\t&-exit-active {\n\t\ttransform: translateY(100%);\n\t\ttransition: transform ","ms\n\t\t\t",";\n\t}\n"]);return Dn=function(){return e},e}var Bn=qn=function(e,t,n,r){return e(Dn(),(n?0:600)*t,r.transitions.easings.swift,(n?200:400)*t,r.transitions.easings.swift)},Hn=function(e){var t=e.show,n=e.collapsed,o=e.durationFactor,a=e.onTransitionStart,c=e.onTransitionEnd,l=e.children,s=e.nodeRef;return i.createElement(r.a,null,(function(e){var r=e.css,u=e.theme;return i.createElement(f.a,{appear:!0,component:null},t&&i.createElement(j.a,{timeout:Bn(n),onExited:c,onEntered:c,onExiting:a,onEntering:a,classNames:qn(r,o,n,u),nodeRef:s},l))}))},Ln=n(690),Un="transform, height, bottom, min-height, max-height, box-shadow, z-index, border-radius",Nn=i.forwardRef((function(e,t){var n=e.heightPercentage,o=e.collapsed,c=e.children,s=e.animationEnded,u=e.onTransitionEnd,d=e.isFooterHidden,f=Object(h.a)(e,["heightPercentage","collapsed","children","animationEnded","onTransitionEnd","isFooterHidden"]),b=i.useRef(null),m=Object(a.b)(b,t),p=Object(ve.b)();return Object(a.f)("touchmove",b),Object(a.a)(p?null:b),Object(r.d)(Ln.a,{autoFocus:!1,disabled:o,returnFocus:!0,crossFrame:!1,css:function(e){return function(e){var t=e.heightPercentage,n=e.collapsed,i=e.animationEnded,o=e.isFooterHidden,a=e.theme;return Object(r.c)("position:absolute;z-index:",n?100:1500,";display:flex;flex-direction:column;height:",n?"48px":100*t+"%",";min-height:",n?"48px":"270px",";max-height:",n?"48px":"100%",";width:100%;bottom:",function(e,t,n){return!t||e?0:"modern"===n.name?32:24}(o,n,a),"px;border-radius:",n?0:"inherit",";color:",a.colors.primaryTextColor,";background-color:",a.colors.floatSurface,";box-shadow:",n?a.boxShadow.floating:"none",";",i&&{transitionProperty:Un,transitionDuration:600*t+"ms",transitionTimingFunction:""+a.transitions.easings.swift,willChange:Un},";")}({heightPercentage:n,collapsed:o,animationEnded:s,isFooterHidden:d,theme:e})},ref:m,lockProps:Object(l.a)({role:"dialog","aria-modal":!0,onTransitionEnd:u},f)},c)})),Vn=n(220),Wn=n(63),Gn=n(666),Yn={allowtransparency:"true",scrolling:"yes",style:{position:"absolute",minWidth:"100%",minHeight:"100%",height:"1px",width:"1px",margin:"0",padding:"0",background:"none",border:"0"}},Kn=function(e,t){return Object(l.a)({moment_url:Object(L.f)(e)+Object(L.g)(e),moment_origin:Object(L.f)(e)||""},t&&{ui_source:t})},Jn=function(e){return Object(r.c)("flex-grow:1;position:relative;overflow:auto;-webkit-overflow-scrolling:touch;display:",e?"none":"block",";background-color:#ffffff;")},Qn=Xn=function(e){var t=e.id,n=e.url,o=e.close,a=e.hidden,c=e.sendMessage,l=e.sendSystemMessage,s=e.setAttributes,d=e.onLoadingChanged,f=e.onMomentDataChanged,b=e.iframeAllowedProperties,m=e.getCustomerToken,p=e.updateCustomerData,g=e.licenseId,h=e.chatId,v=e.groupId,j=e.source,O=i.useRef(void 0),x=i.useRef(u.W),y=i.useRef(u.W),w=i.createRef();return x.current=function(){if(n&&w.current){var e={close:o,sendMessage:c,setAttributes:s,updateCustomerData:p,licenseId:g,chatId:h,groupId:v,setExternalLink:function(e){f({externalLink:e})},setIsFragile:getIdentityTransferToken:function(){if(Object(Gn.b)(n))return m().then((function(e){return function(e){var t=e.accessToken;return Object(Wn.a)(Object(on.b)("accounts")+"/customer/identity_transfer",{method:"POST",headers:{Authorization:"Bearer "+t},body:JSON.stringify({bearer_type:"customer",client_id:"c5e4f61e1a6c3b1521b541bc5c5a2ac5"})}).then(().then(()}(e)})).catch(();throw new Error("Moment App not authorized")}};l&&(e.sendSystemMessage=l),O.current=Object(Vn.b)({frame:Qn(w.current,n,b),url:n,onConnected:,e),Object(Xt.a)(Yn,O.current.frame),d(!0),O.current.frame.addEventListener("load",(function e(){O.current&&(d(!1),O.current.frame.removeEventListener("load",e))})),f({title:O.current.title}),Object(Nt.d)("moment_opened",Kn(Object(Vn.a)(n),j))}},y.current=function(){O.current&&(O.current.destroy(),w.current&&(w.current.innerHTML=""),f(null),d(!1),O.current=void 0),n&&Object(Nt.d)("moment_closed",Kn(Object(Vn.a)(n)))},i.useEffect((,[n]),Object(r.d)("div",{id:t,ref:w,css:Jn(a),onScroll:function(e){!function(e){if(e){var t=e.scrollTop,n=e.scrollHeight-e.offsetHeight;0===t?e.scrollTop=1:t===n&&(e.scrollTop=n-1)}}(e.currentTarget)}})},Zn=n(195),$n="confirmation-modal-label-id",er={fragile:function(){return"Any data or connection will be lost after you close this window"},change:function(e){return'If you open another app, "'+e+'" will be closed.'},"fragile-change":,tr=Object(d.A)("div",{target:"ej1cp8k3"})("z-index:1500;position:absolute;top:42px;left:50%;min-width:75%;max-width:285px;display:flex;flex-direction:column;background:",(function(e){return e.theme.colors.surface}),";box-shadow:",(function(e){return e.theme.boxShadow.lg}),";padding:",(function(e){return e.theme.spaces.space6}),";border-radius:",(function(e){return e.theme.borderRadius.md}),";"),nr=Object(d.A)(Zn.a,{target:"ej1cp8k2"})("display:flex;width:auto;flex-grow:",(function(e){return e.secondary?1:1.5}),";padding:8px 12px;",(function(e){var t=e.secondary,n=e.theme;return t&&{backgroundColor:n.colors.surfaceDecorative,color:n.colors.primaryTextColor}})," &:first-child{margin-right:",(function(e){return e.theme.spaces.space4}),";}"),rr=Object(d.A)("p",{target:"ej1cp8k1"})("margin:0;overflow-wrap:break-word;",(function(e){return e.theme.typography.basic}),";"),ir=Object(d.A)("div",{target:"ej1cp8k0"})("width:100%;display:flex;align-self:center;margin-top:",(function(e){return e.theme.spaces.space4}),";"),or=function(e){var t=e.shown,n=e.onResponse,r=e.mode,o=e.currentAppName,a=i.useRef(null),c=Object(le.c)({isOpen:!0,isDismissable:!0,onClose:function(){return n("canceled")}},a).overlayProps,s=Object(le.b)().modalProps,d=Object(ce.a)({"aria-labelledby":$n},a).dialogProps,b=Object(ve.b)(),m="fragile"!==r,p=Object(u.E)("fragile",r);return Object(le.d)({isDisabled:b}),i.createElement(i.Fragment,null,i.createElement(he,{shown:t}),i.createElement(f.a,{component:null},t&&i.createElement(g.b,{nodeRef:a},i.createElement(G.a,{contain:!0,restoreFocus:!0,autoFocus:!0},i.createElement(tr,Object(l.a)({},Object(K.h)(c,d,s),{ref:a}),i.createElement(rr,{id:$n},er[r](o)),i.createElement(ir,null,i.createElement(nr,{secondary:!0,onClick:function(){return n("canceled")}},m?"Do nothing":"Cancel"),i.createElement(nr,{destructive:p,onClick:function(){return n("confirmed")}},m?"Open another app":"Close anyway")))))))},ar=n(138),cr=n(670),lr=n(221);var sr=Object(d.A)(D.f,{target:"e1crrbvm3"})((function(e){return"up"===e.direction&&{transform:"scaleY(-1)"}}),";"),ur=Object(d.A)("div",{target:"e1crrbvm2"})("min-height:",(function(e){return e.visible?48:0}),"px;transition:min-height 300ms ",(function(e){return e.theme.transitions.easings.swift}),";"),dr=Object(d.A)(D.s,{target:"e1crrbvm1"})({name:"nekhfk",styles:"display:flex;align-items:center;width:100%;background-color:transparent;border:none;cursor:pointer"}),fr=Object(d.A)(cr.b,{target:"e1crrbvm0"})({name:"1flj9lk",styles:"text-align:left"}),br={full:.8,tall:.5,compact:.3},mr={name:"zjik7",styles:"display:flex"},pr=Object(o.c)((function(e,t){var n=t.chatId,r=i=function(t){return p.T(e,{properties:t})},o=function(t){["email","name"].forEach((function(e){(t[e]&&"string"!==typeof t[e]||""===t[e])&&delete t[e]})),(t.email||t.name)&&p.T(e,t)},a=function(t){return p.E(e,n,t)},l=Object(lr.a)({allowVideoConferencing:Object(c.G)(e,"microphone"),allowClipboardWrite:Object(c.G)(e,"clipboard_write")}),s=return function(e){var t=e.getView("Moment"),n=t.show,u=t.data,d=u.url,f=Object(h.a)(u,["url"]),b=e.getApplicationState("license");return{show:n,closeMoment:r,sendMessage:a,sendSystemMessage:s,updateSessionUser:i,onUpdateCustomerData:o,momentData:f,url:d,iframeAllowedProperties:l,getCustomerToken:function(){return new Promise((function(t,n){e.once("customer_token_response",t),e.once("customer_token_error",n),e.emit("request_customer_token")}))},licenseId:b,isFooterHidden:Object(c.cb)(e),registerRequestCloseMomentListener:function(t){return e.on("request_close_moment",t),function(){return e.off("request_close_moment",t)}},registerRequestExpandMomentListener:minimizeWidget:function(t){return void 0===t&&(t=!1),p.y(e,!1,t)},setNextMomentData:function(t){return e.updateView("Moment",{show:!0,data:t})},chatId:Object(c.c)(e)||void 0,groupId:e.getApplicationState("group")}}}))((function(e){var t=e.iframeAllowedProperties,n=e.show,o=e.url,c=e.updateSessionUser,s=e.sendMessage,d=e.sendSystemMessage,f=e.onSendMessage,b=e.getCustomerToken,m=e.licenseId,p=e.onUpdateCustomerData,g=e.isFooterHidden,h=e.registerRequestCloseMomentListener,v=e.registerRequestExpandMomentListener,j=e.minimizeWidget,O=e.setNextMomentData,x=e.chatId,y=e.groupId,w=Object(a.h)("moment-collapsed"),k={canBeShown:!1,collapsed:!1,isExpanding:!0,isAnimating:!1,animationEnded:!1,isConfirmationModalShown:!1,confirmationModalMode:"change"},E=i.useReducer(Fn,k,(function(){var t;return Object(l.a)({},k,{collapsed:!!(null==(t=w.get())?void 0:t.collapsed)&&!e.momentData.wasTriggeredByGreeting})})),A=E[0],C=A.canBeShown,S=A.collapsed,T=A.isExpanding,_=A.isAnimating,I=A.animationEnded,z=A.isConfirmationModalShown,R=A.confirmationModalMode,M=E[1],P=i.useRef(null),F=i.useRef(null),B=i.useState(!1),q=B[0],H=B[1],L=i.useState({}),U=L[0],N=L[1],V=i.useState(!1),G=V[0],Y=V[1],J=i.useRef(!1),Q=i.useRef(null),X=Object(W.f)(),Z=Object(a.e)(C&&n,(function(){return e.closeMoment(G)})),$=Z[0],ee=Z[1],te=_||q,ne=function(e){var t=e.height;return t&&t in br?br[t]:br.full}(e.momentData),re=ne/.8,ie=Object(K.l)(),oe=Object(je.b)();Object(u.G)(U)&&!Object(u.G)(e.momentData)&&N(Object(l.a)({},U,e.momentData)),Object(a.x)(i.useCallback((function(){return M(An())}),[]),300),i.useEffect((function(){e.momentData.wasTriggeredByGreeting&&I&&O(Object(l.a)({},e.momentData,{url:o,wasTriggeredByGreeting:!1}))}),[I,o,e.momentData,O]),i.useEffect((function(){var e=h((function(){if(J.current)return Y(!0),void M(Mn("fragile"));j(!0)}));return function(){return e()}}),[J,j,h]),i.useEffect((function(){var e=v((function(e){M(Cn()),(null==e?void 0:e.nextMoment)&&(Q.current=e.nextMoment,M(Mn(J.current?"fragile-change":"change")))}));return function(){return e()}}),[v]),i.useEffect((,[w,S]),i.useEffect((function(){oe.setMomentExpand(n&&!S)}),[n,S,oe]),i.useEffect((,[$]),i.useEffect((function(){!$&&I&&M(Rn())}),[$,I]);return Object(r.d)(i.Fragment,null,Object(r.d)(he,{shown:n&&!S,onPress:zIndex:99}),Object(r.d)(ur,{visible:n}),Object(r.d)(Hn,{show:$||n&&S,collapsed:S,nodeRef:P,onTransitionEnd:function(){M(In())},onTransitionStart:durationFactor:re},Object(r.d)(Nn,{ref:P,heightPercentage:ne,collapsed:S,animationEnded:I,isFooterHidden:g,onTransitionEnd:function(){return M(zn())}},Object(r.d)(cr.c,{noShrink:!0},Object(r.d)(dr,{"aria-label":pn,"aria-expanded":!S,"aria-controls":ie,onPress:function(){return M(Tn())}},Object(r.d)(cr.a,{src:U.icon,"aria-hidden":!0}),Object(r.d)(fr,Object(l.a)({ellipsis:!0,flexFill:!0,tabIndex:-1,ref:F},X),U.title),(!U.externalLink||S)&&Object(r.d)(sr,{direction:S?"up":"down"})),U.externalLink&&!S&&Object(r.d)(i.Fragment,null,Object(r.d)(rt.a,{href:U.externalLink,rel:"nofollow noopener noreferrer",css:mr,"aria-label":"Open in a new tab"},Object(r.d)(D.D,{"aria-hidden":!0})),Object(r.d)(D.s,{onPress:css:mr,"aria-label":pn},Object(r.d)(sr,{direction:S?"up":"down"}))),Object(r.d)(D.s,{onPress:function(){J.current?M(Mn("fragile")):ee()},css:mr,"aria-label":"Close modal"},Object(r.d)(D.h,null))),Object(r.d)(or,{shown:!S&&!T&&!!z,mode:R,currentAppName:U.title,onResponse:function(e){if(M(Pn()),"canceled"!==e||!Object(u.E)("change",R))return Q.current?("confirmed"===e&&(J.current=!1,O(Q.current)),void(Q.current=null)):void("confirmed"===e&&ee());M(Sn())}}),Object(r.d)(Xn,{id:ie,hidden:S||te,close:ee,url:o,licenseId:m,chatId:x,groupId:y,source:U.source,sendMessage:sendSystemMessage:d,setAttributes:c,updateCustomerData:p,onMomentDataChanged:function(e){e&&"isFragile"in e&&(J.current=!!e.isFragile),N((function(t){return e?Object(l.a)({},t,e):{}}))},onLoadingChanged:H,iframeAllowedProperties:t,getCustomerToken:b}),!S&&te&&Object(r.d)(ar.a,{size:"xlarge",style:{margin:"auto"}}))))})),gr=n(143),hr=n(6),vr=n(94),jr=n(82),Or=n(39);var xr=Object(d.A)("span",{target:"e1oq7ugp9"})((,";"),yr=Object(d.A)("div",{target:"e1oq7ugp8"})("flex:1;display:flex;flex-direction:column;margin:2px;min-width:calc(50% - 4px);max-width:100%;height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?140:100}),"px;"),wr=Object(d.A)("div",{target:"e1oq7ugp7"})("border-radius:",(function(e){return e.theme.borderRadius.xl}),";flex:1;width:100%;height:100%;display:flex;overflow:hidden;position:relative;align-items:center;justify-content:center;"),kr=Object(d.A)("div",{target:"e1oq7ugp6"})("color:",(function(e){return e.theme.colors.secondaryTextColor}),";background-color:",(function(e){return e.theme.colors.surfaceDecorative}),";width:100%;height:100%;display:flex;align-items:center;justify-content:center;"),Er=Object(d.A)("img",{target:"e1oq7ugp5"})({name:"q4dzvk",styles:"width:100%;height:auto"}),Ar=Object(d.A)("div",{target:"e1oq7ugp4"})({name:"1uja423",styles:"position:absolute;top:6px;right:6px;z-index:1"}),Cr=Object(d.A)("div",{target:"e1oq7ugp3"})("height:24px;width:24px;display:flex;border-radius:50%;align-items:center;justify-content:center;",(function(e){var t=e.theme,n=e.success,r=e.error;return n?{backgroundColor:t.colors.success,color:t.colors.successContrast}:r?{backgroundColor:t.colors.error,color:t.colors.errorContrast}:void 0}),";"),Sr=Object(d.A)("div",{target:"e1oq7ugp2"})("opacity:",(function(e){return e.visible?1:0}),";transition:opacity 100ms ",(function(e){return e.theme.transitions.easings.smooth}),";position:absolute;left:6px;right:6px;bottom:6px;display:flex;flex-direction:row-reverse;align-items:center;justify-content:space-between;z-index:1;",Or.w,"{width:20px;height:20px;}"),Tr=Object(d.A)("div",{target:"e1oq7ugp1"})("border-radius:",(function(e){return e.theme.borderRadius.md}),";color:",(function(e){return e.theme.colors.grayscale[0]}),";padding:2px;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:rgba(0, 0, 0, 0.6);"),_r=Object(d.A)("span",{target:"e1oq7ugp0"})((function(e){return e.theme.typography.caption}),";color:",(,";cursor:pointer;margin-right:4px;"),Ir={name:"e0dnmk",styles:"cursor:pointer"},zr=function(e){var t=e.failReason,n=i.useRef(null),o=Object(G.f)({},n).focusableProps;return Object(r.d)(Cr,Object(l.a)({"aria-label":t,error:!0},o,{ref:n,tabIndex:0}),Object(r.d)(Or.c,{css:Ir,size:24,"aria-hidden":!0}))},Rr={name:"1nq59d9",styles:"transition:opacity 100ms linear"},Mr=function(e){var t=e.name,n=e.failed,i=e.finished,a=e.url,c=e.fileType,l=e.mobile,s=e.alternativeText,u=e.onCancel,d=e.onAlternativeTextEdit,f=e.progress,b=void 0===f?0:f,m=e.failReason,p=void 0===m?"":m,g=e.insistHover,h=e.onHoverChange,v=Object(W.i)({onHoverChange:h}),j=v.hoverProps,O=v.isHovered,x=Object(W.f)().isFocusVisible;return Object(r.d)(o.a,null,(function(e){return Object(r.d)(yr,null,Object(r.d)(wr,j,Object(r.d)(Ar,null,i&&Object(r.d)(Cr,{success:!0},Object(r.d)(Or.bb,{size:24,"aria-hidden":!0})),n&&Object(r.d)(ae,{description:p,allowTouch:!0},Object(r.d)(zr,{failReason:p})),!i&&!n&&Object(r.d)(ar.a,{size:"medium",progress:b,"aria-hidden":!0})),(u||d)&&Object(r.d)(Sr,{visible:g||O||x||l},u&&Object(r.d)(Tr,null,Object(r.d)(Or.w,{onPress:u,"aria-label":"remove the "+t+" file"},Object(r.d)(Or.Q,{size:20,"aria-hidden":!0}))),"image"===c&&d&&Object(r.d)(Tr,null,Object(r.d)(Or.w,{onPress:d,"aria-label":"add alternative text to the "+t+" image"},Object(r.d)(Or.m,{size:20,"aria-hidden":!0})),Object(r.d)(_r,{onClick:d},e("alt_text")))),"image"===c&&Object(r.d)(Er,{src:a,alt:s||"",style:{opacity:i?1:.25},css:Rr}),"other"===c&&Object(r.d)(kr,null,Object(r.d)(Or.r,{size:56}))),Object(r.d)(xr,{ellipsis:!0,failed:n,finished:i},t))}))},Pr=n(655);var Fr=Object(d.A)("p",{target:"eprg9im5"})("margin-bottom:",(function(e){var t=e.theme,n=e.mobile;return"modern"!==t.name&&n?0:4}),"px;",(function(e){return e.theme.typography.caption})," ",Object(it.a)(),";color:",(function(e){return e.theme.colors.primaryTextColor}),";margin:0;padding:0 12px;max-width:100%;max-height:50px;"),Dr=Object(d.A)("div",{target:"eprg9im4"})((function(e){var t=e.theme;return!e.mobile&&"modern"===t.name&&"max-height: 230px; overflow-y: auto;"}),";"),Br=Object(d.A)("div",{target:"eprg9im3"})("height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?145:140}),"px;overflow:hidden;display:flex;align-items:center;justify-content:center;width:100%;"),qr=Object(d.A)("div",{target:"eprg9im2"})("padding:",(,";display:flex;flex-direction:row;justify-content:center;align-items:center;max-width:100%;"),Hr=Object(d.A)(Pr.a,{target:"eprg9im1"})("height:34px;",(function(e){var t=e.theme.isRtl?"left":"right";return Object(r.c)("border-",t,":none;border-top-",t,"-radius:0;border-bottom-",t,"-radius:0;")}),";"),Lr=Object(d.A)(D.s,{target:"eprg9im0"})("color:",(function(e){var t=e.theme;return e.highlighted?t.colors.ctaText:t.colors.disabledContrast}),";background-color:",(function(e){var t=e.theme;return e.highlighted?t.colors.cta:t.colors.disabled}),";height:34px;width:34px;justify-content:center;align-items:center;display:flex;padding:6px 8px;",(function(e){var t=e.theme,n=t.isRtl?"left":"right",i=t.isRtl?"right":"left";return Object(r.c)("border-top-",i,"-radius:0;border-bottom-",i,"-radius:0;border-top-",n,"-radius:6px;")})," transition:background 100ms linear;"),Ur={name:"q4dzvk",styles:"width:100%;height:auto"},Nr=function(e){var t=e.url,n=e.alternativeText,a=e.onAlternativeTextChanged,c=e.mobile,l=e.titleId,s=i.useState(n||""),u=s[0],d=s[1],f=Object(W.f)().isFocusVisible,b=Object(K.l)();return Object(r.d)(o.a,null,(function(e){return Object(r.d)(Dr,{mobile:c},Object(r.d)(Br,{mobile:c},Object(r.d)("img",{src:t,css:Ur,alt:n})),Object(r.d)(qr,null,Object(r.d)(Hr,{autoFocus:!0,"aria-labelledby":l,"aria-describedby":b,maxLength:16384,value:u,placeholder:e("describe_image"),onChange:),Object(r.d)(Lr,{"aria-label":"save the image's alternative text",highlighted:u!==n||f,disabled:u===n,onPress:function(){a(u)}},Object(r.d)(D.a,{size:24}))),Object(r.d)(Fr,{id:b,mobile:c},e("alternative_text_description")))}))},Vr=n(103);var Wr=Object(d.A)("h2",{target:"e1k6tlos7"})((function(e){var t=e.failed,n=e.theme;return t&&{color:n.typography.errorCaption.color}})," padding:0 6px;font-size:14px;font-weight:normal;align-self:center;margin:0;"),Gr=Object(d.A)("div",{target:"e1k6tlos6"})({name:"189qznn",styles:"display:flex;cursor:pointer"}),Yr=Object(d.A)("div",{target:"e1k6tlos5"})("transition:max-height ",(function(e){return e.longAnimation?600:400}),"ms ",(function(e){return e.theme.transitions.easings.swift}),";overflow:hidden;max-height:249px;"),Kr=Object(d.A)("div",{target:"e1k6tlos4"})("height:auto;",(,";"),Jr=Object(d.A)("div",{target:"e1k6tlos3"})("max-height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?200:125}),"px;overflow:auto;display:flex;flex-direction:row;flex-wrap:wrap;padding:4px 0;"),Qr=Object(d.A)("hr",{target:"e1k6tlos2"})("margin:",8,"px -",8,"px 0;border:0;border-bottom:1px solid rgba(0, 0, 0, 0.1);"),Xr=Object(d.A)(Or.g,{target:"e1k6tlos1"})((function(e){return"up"===e.direction&&{transform:"scaleY(-1)"}}),";"),Zr={name:"gc6sdx",styles:"padding-left:4px"},$r=Object(d.A)(D.B,{target:"e1k6tlos0"})("padding:",(function(e){var t=e.theme,n=e.isEdit,r=e.expanded;return!e.mobile&&"modern"===t.name&&n&&r?"8px 8px 0":"8px"}),";",(function(e){return e.theme.typography.basic}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";overflow:hidden;"),ei={name:"x4j9dr",styles:"margin-top:6px;max-width:100%"},ti={name:"13fmgtn",styles:"transform:scaleX(-1)"},ni=Object(jr.createSelector)([u.D],(function(e){return e.map((function(e){return Object(l.a)({id:e.id},e.properties)}))})),ri=Object(o.c)((function(e,t){var n=t.chatId,r=i=function(t,r){e.updateEvent(n,t,{properties:{alternativeText:r}})},o=function(){e.emit("send_file_events")};return function(e){var t=e.getApplicationState(),n=t.isSendingFileEvents,a=t.mobile,l=t.config,s=t.license,u=t.group,d=t.requestedGroup,f=ni(Object(c.s)(e));return{mobile:a,persistKey:Object(Vr.a)({license:s,group:u,requestedGroup:d}),isSendingFileEvents:n,uploadEntries:f,cancelUpload:r,setAlternativeText:i,sendFiles:o,localize:e.localize,themeName:l.theme.name}}}))((function(e){var t=e.uploadEntries,n=e.uploadEnabled,o=e.cancelUpload,a=e.localize,c=e.mobile,s=e.persistKey,d=e.sendFiles,f=e.isSendingFileEvents,b=e.setAlternativeText,p=e.themeName,g=e.scrollToBottom,h=Object(K.l)(),v=Object(K.l)(),j=i.useState(!0),O=j[0],x=j[1],y=i.useState(!1),w=y[0],k=y[1],E=i.useState(!1),A=E[0],C=E[1],S=i.useState(null),T=S[0],_=S[1],I=i.useState(""),z=I[0],R=I[1],M=i.useRef(null),P=i.useRef(null),F=function(e,t){var n=e.filter((function(e){return e.failed})),r=e.filter((function(e){return e.finished})).length,i=n.length,o=e.length,a=t("file_upload_status").replace("%finishedCount%",String(r)).replace("%totalCount%",String(o));switch(!0){case i>0:return{failedCount:i,uploadStatus:"error",title:i>1?t("files_failed_to_upload").replace("%files%",String(i)):n[0].failReason};case r===o:return{uploadStatus:"success",title:a};default:return{uploadStatus:"pending",title:a}}}(t,a),D="error"===F.uploadStatus&&t.length===F.failedCount,B=q=i.useCallback((,[p,c]),H=i.useCallback((function(e){return(t.length>2||e?q():201)+"px"}),[t,q]),L=i.useCallback((function(e){N(e)&&(M.current.style.maxHeight=e)}),[]),U=N=V=i.useCallback((,[O,L]),W=function(e){if(O){var t=H(!!e);!e&&N(t)?(_(null),C(!0),U(P.current.clientHeight+"px"),L(t)):(L(q()+"px"),_(e))}else _(e)},G=i.useCallback((function(){w?(x(!1),k(!1)):A&&(U("auto"),C(!1))}),[w,A]);return i.useEffect((function(){t.length&&O&&!w&&L(H(!!T))}),[t.length,O,w,L,H,T]),i.useEffect((function(){if(Object(vr.b)("session")){var e=function(){Object(u.G)(t)||function(e,t){var n=e.filter((function(e){return e.finished})).map(();Object(u.G)(n)||window.sessionStorage.setItem(t,JSON.stringify(n))}(t,s)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}}),[t,s]),Object(r.d)($r,{isEdit:T,expanded:!w&&O,mobile:c},Object(r.d)(m.b,{message:F.title,clearOnUnmount:!0,"aria-live":"error"===F.uploadStatus?"assertive":"polite"}),Object(r.d)(Gr,{onClick:,T?Object(r.d)(Or.w,{"aria-label":"go back to upload list",onPress:,Object(r.d)(Or.a,{size:24,css:ti,"aria-hidden":!0})):Object(r.d)(i.Fragment,null,"pending"===F.uploadStatus?Object(r.d)(ar.a,{size:"medium","aria-hidden":!0}):"success"===F.uploadStatus?Object(r.d)(Cr,{success:!0},Object(r.d)(Or.bb,{size:24,"aria-label":"Upload success"})):Object(r.d)(Cr,{error:!0},Object(r.d)(Or.c,{size:24,"aria-label":"Upload error"}))),Object(r.d)(Wr,Object(l.a)({id:v,flexFill:!0,ellipsis:!0},"error"===F.uploadStatus&&{failed:!0,title:F.title}),T?a("add_alternative_text"):F.title),Object(r.d)(Or.w,{css:Zr,"aria-label":"Toggle upload list","aria-controls":h,"aria-expanded":O,onPress:V,autoFocus:!0},Object(r.d)(Or.x,{size:24,"aria-hidden":!0},Object(r.d)(Xr,{direction:O&&!w?"down":"up",size:24})))),O&&!w&&Object(r.d)(Qr,null),Object(r.d)(Yr,{ref:M,onTransitionEnd:G,longAnimation:!O||w},O&&Object(r.d)(Kr,{id:h,edit:!!T,ref:P},T?Object(r.d)(Nr,Object(l.a)({titleId:v},t.find((function(e){return e.id===T})),{onAlternativeTextChanged:mobile:c})):Object(r.d)(i.Fragment,null,Object(r.d)(Jr,{mobile:c},t.map((function(e){return Object(r.d)(Mr,Object(l.a)({},e,{key:e.id,mobile:c,failed:!!e.failed,insistHover:z===e.id,onHoverChange:B,onCancel:!f||e.failed?function(){return function(e){if(!c&&t.length>1){var n=Object(u.q)((function(t){return t.id===e}),t),r=n===t.length-1;R(t[n+(r?-1:1)].id)}o(e)}(e.id)}:null,onAlternativeTextEdit:f?null:))}))),Object(r.d)(Zn.a,{onClick:disabled:D||!n,pending:f||"pending"===F.uploadStatus,css:ei},a("send_files"))))))}));var ii=Object(d.A)("div",{target:"ezpiwsd0"})({name:"1u57r43",styles:"position:absolute;bottom:0;left:0;right:0;z-index:100"}),oi=Object(o.c)((function(e,t){var n=t.markAsSeen,r=function(){c.x(hr.d,Date.now(),e).reverse().forEach(()};return function(e){var t=!Object(u.G)(c.s(e)),n=e.getApplicationState("mobile"),i=c.k(e,hr.d),o=e.getUnseenCount(hr.d),a=i&&i.properties?i.properties.text:null;return{isFileUploadAllowed:c.jb(e),isFileUploadPossible:c.Q(e),isUploadingFiles:t,previewText:a,unseenCount:o,mobile:n,markAllEventsAsSeen:r,localize:e.localize}}}))((function(e){var t=e.isFileUploadAllowed,n=e.isFileUploadPossible,r=e.isUploadingFiles,o=e.previewText,c=e.unseenCount,l=e.chatId,s=e.mobile,u=e.scrollToBottom,d=e.markAllEventsAsSeen,b=e.isOnBottomSource,p=e.isScrollable,h=e.localize,v=o,j=Object(a.v)(b),O=c>0&&!j&&p,x=i.useState(O),y=x[0],w=x[1];return v||(v=h(c>1?"new_messages":"new_message")),!O&&y&&w(!1),i.useEffect((,[O]),i.createElement(ii,null,i.createElement(f.a,{appear:!0,component:null},t&&r&&i.createElement(g.a,{key:"upload"},i.createElement(ri,{scrollToBottom:u,chatId:l,uploadEnabled:n})),y&&i.createElement(g.a,{key:"unseen"},i.createElement(D.W,{text:v,stickToEdge:s,unseenCount:c,onClick:u,onClose:d}))),y&&i.createElement(m.b,{message:v,clearOnUnmount:!0,"aria-live":"assertive"}))})),ai=function(e){var t=Object(s.g)().Maximized.css.background;return i.createElement(ar.a,Object(l.a)({},e,{adjustToColor:t,ariaLabel:"Loading previous messages"}))};var ci=Object(d.A)("div",{target:"e1fh44if0"})({name:"1f0bicm",styles:"padding:1em;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:0.9em"}),li=si=Object(o.c)((function(e){var t=function(){return p.N(e)},n=return function(e){var r="startChatAgain"===c.j(e,hr.d),i=e.getChat(hr.d).properties,o=i.starting,a=i.startChatAgainPending,l=e.localize(r?"embedded_start_chat_again":"embedded_greeting_accept");return{startAction:r?n:t,buttonLabel:l,isPending:o||a}}}))((function(e){var t=e.isPending,n=e.buttonLabel,r=e.startAction,o=e.onClick,a=void 0===o?u.W:o;return i.createElement(li,{disabled:t,pending:t,onClick:,n)}));function ui(){var e=Object(v.a)(["\n\t\t&-enter,\n\t\t&-appear {\n\t\t\tclip-path: circle(0% at 50% 50%);\n\t\t\topacity: 0;\n\t\t}\n\t\t&-enter-active,\n\t\t&-appear-active,\n\t\t&-enter-done,\n\t\t&-appear-done {\n\t\t\tclip-path: circle(150% at 50% 50%);\n\t\t\topacity: 1;\n\t\t\ttransition-property: opacity, clip-path;\n\t\t\ttransition-duration: 600ms;\n\t\t\ttransition-timing-function: ease-out;\n\t\t\twill-change: opacity, clip-path;\n\t\t}\n\t\t&-exit {\n\t\t\tclip-path: circle(150% at 50% 50%);\n\t\t\topacity: 1;\n\t\t}\n\t\t&-exit-active {\n\t\t\tclip-path: circle(0% at 50% 50%);\n\t\t\topacity: 0;\n\t\t\ttransition-property: opacity, clip-path;\n\t\t\ttransition-duration: 600ms;\n\t\t\ttransition-timing-function: ease-out;\n\t\t\twill-change: opacity, clip-path;\n\t\t}\n\t"]);return ui=function(){return e},e}var di=Object(d.A)("div",{target:"ekftid72"})((function(e){return e.theme.typography.caption}),";position:absolute;display:flex;flex-direction:row;height:40px;z-index:10;left:50%;top:14px;transform:translate(-50%, 0);max-width:100%;white-space:nowrap;background-color:",(function(e){return e.theme.colors.surface}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";border-radius:20px;box-shadow:",(function(e){return e.theme.boxShadow.floating}),";"),fi=Object(d.A)("div",{target:"ekftid71"})("flex-grow:1;flex-shrink:0;overflow:hidden;text-overflow:ellipsis;max-width:230px;padding:",(function(e){return e.theme.spaces.space5}),";"),bi=Object(d.A)("div",{target:"ekftid70"})("display:flex;flex-direction:row;justify-content:center;align-items:center;padding-right:",(function(e){return e.theme.spaces.space2}),";button{font-size:2em;border-radius:50%;width:32px;height:32px;margin-left:4px;background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),mi=pi=Object(o.c)((function(e,t){var n=t.chatId;return{shouldShow:Object(c.sb)(e),chatId:n}}))((function(e){var t=e.isAgentBarExpandedSource,n=e.chatId,c=e.shouldShow,l=Object(a.v)(t),s=Object(i.useState)(!1),u=s[0],d=s[1];return Object(r.d)(o.a,null,(function(e){return Object(r.d)(r.a,null,(function(t){var i=t.css;return Object(r.d)(j.a,{in:!l&&c||u,classNames:mi(i),timeout:100,unmountOnExit:!0,mountOnEnter:!0},Object(r.d)(di,null,Object(r.d)(fi,null,e("rate_agent")),Object(r.d)(bi,null,Object(r.d)(De,{chatId:n,variant:"small",onRatingCommentModalStateChange:d,source:"prompt"}))))}))}))})),gi=n(676),hi=n(115);var vi=Object(d.A)("div",{target:"ei7go8f1"})("position:absolute;bottom:0;left:0;right:0;background:",(function(e){return e.theme.colors.caution}),";z-index:2;color:",(function(e){return e.theme.colors.cautionContrast}),";text-align:center;font-size:0.9em;line-height:2.8em;transform:translateY(100%);"),ji=Object(d.A)("div",{target:"ei7go8f0"})({name:"obt24",styles:"flex-grow:1;height:100%;position:relative;min-height:0;-webkit-overflow-scrolling:touch"}),Oi={name:"jddw9f",styles:"position:absolute;bottom:0;left:50%;z-index:3;transform:translate(-50%, 50%)"},xi=yi=function(e){return 0!==e.length?xi(e[0]):void 0},wi=function(e){var t=Object(u.N)(e);if(t){var n=Object(u.N)(t.events);if(n)return n.id}};var ki=Object(b.a)([function(e,t){return e.getTimeline(t)},u.D],(function(e,t){var n=c.K(t);return e.map((function(e,r){var i=0===r,o=e.showDate&&!i&&n;return Object(l.a)({},e,{isThreadBoundary:o,authorData:t.getUser(e.author)})}))}))((),Ei=Object(o.c)((function(e,t){var n=t.id,r=e.getApplicationState("isPreview")?u.W:function(){p.L(e)},i=e.localize,o=function(){return e.updateChat(n,{properties:{loadingHistory:!0}})},a=function(t){return e.requestUpdateEvent(n,t,{seen:!0}).catch(u.W)},l=s=function(t){var r=t.eventId,i=t.buttonId,o=c.b(e);e.sendEvent(n,{type:"rich_message_postback",thread:o,properties:{eventId:r,postback:{id:i,toggled:!0}}},void 0)},d=function(t){return c.U(e,t)},f=b=function(t){return p.T(e,{properties:t})},m=return function(e){var t=e.getChat(n),u=t.active,p=t.properties,g=p.agentIsTyping,h=p.loadingHistory,v=p.queued,j=p.ended,O=c.d(n,e),x=c.C(e,n),y=e.getUnseenCount(n),w=c.K(e)&&c.bb(e);return{agent:O,active:u,ended:j,loadHistory:o,isThreadStickerEnabled:w,hasMoreHistory:x,markAsSeen:a,sendMessage:l,queued:v,sendPostback:s,showPrechat:r,localize:i,updateSessionUser:b,showMoment:f,unseenCount:y,timeline:ki(e,n,e.getState()),activeQuickReply:c.v(n,e),agentIsTyping:g&&!!O,shouldLoadHistory:x&&!h,isLoadingHistory:h,showAvatar:c.i("agentAvatar",e).enabled,pageFocused:e.getApplicationState("pageFocused"),inputMode:c.j(e,n),reconnecting:c.tb(e),displayOfflineInformation:c.qb(e),lastSeenEvent:y>0&&e.getLastSeenAgentEvent(n),isGreeting:d,handleRichGreetingButtonClicked:m}}}))((function(e){var t=e,n=t.displayOfflineInformation,o=t.active,c=t.ended,b=t.activeQuickReply,p=t.agent,h=t.isThreadStickerEnabled,v=t.hasMoreHistory,j=t.pageFocused,O=t.id,x=t.inputMode,y=t.loadHistory,w=t.localize,k=t.queued,E=t.reconnecting,C=t.shouldLoadHistory,S=t.showAvatar,T=t.showPrechat,_=t.timeline,I=t.agentIsTyping,z=t.mobile,M=t.unseenCount,P=t.lastSeenEvent,D=t.sendMessage,B=t.showMoment,q=t.handleRichGreetingButtonClicked,L=t.isOnBottomSource,U=t.isAgentBarExpandedSource,N=t.isLoadingHistory,V=i.useRef(null),W=i.useRef(null),G=Object(a.w)(!1),Y=i.useRef(!1),K=i.useState(M),J=K[0],Q=K[1],X=i.useState("hidden"),Z=X[0],$=X[1],ee=i.useState(j),te=ee[0],ne=ee[1],re=i.useState(P)[0],ie=Object(a.c)((function(){return function(e,t,n,r){return e.some((function(e){return e.type===hr.h}))?"draft":t?"newMessageDivider":r||n||!e.some(()?"form":"boosters"}(_,J,o,c)})),oe=Object(a.d)(E),ae="modern"!==Object(s.g)().name&&S,ce="modern"===Object(s.g)().name;i.useEffect((,[j,te]);var le=i.useCallback((,[C,y]),se=i.useCallback((,[L]),ue=i.useCallback((,[U]),de=Object(a.t)(V,{firstItemKey:yi(_),lastItemKey:wi(_),onIsScrolledToTopChanged:le,onIsScrolledToBottomChanged:se,onIsUserScrollingChanged:G.next,onScrollDeltaChanged:ue}),fe=de.scrollToTop,be=de.scrollToBottom,me=de.getIsOnBottom,pe=de.onWheel,ge=de.onTouchStart,he=de.getIsScrollable,ve=de.setScrollTargetNode,je=i.useCallback((,[me,be]),Oe=i.useCallback((function(){je({duration:0})}),[je]),xe=function(e){return void 0===e&&(e=u.W),,ye=Object(a.q)((function(){me()?be():be({duration:0}),U.next(!1),Q(0)})),we=function(e){var t=i.useRef(e);return i.useEffect((),i.useMemo((function(){return{handleActionButtonClick:function(e){var n=e.button,r=e.event,i=t.current,o=i.active,a=i.showMoment,c=i.sendPostback,l=i.sendMessage,s=i.handleSendMessage,u=i.isGreeting,d=i.handleRichGreetingButtonClicked;if(u(r))return d({event:r,button:n}),void("message"===n.type&&s());if(o)switch(n.type){case"webview":return c({eventId:r,buttonId:n.postbackId}),void a({url:n.value,height:n.webviewHeight,source:"rich_message"});case"message":return l(n.text,{type:"action_button",event:r,button:n}),void s();case"copy":return void Object(hi.a)(n.value);default:return void c({eventId:r,buttonId:n.postbackId})}},markAsSeen:function(e){return t.current.markAsSeen(e)}}}),[])}(Object(l.a)({},e,{handleSendMessage:ye})),ke=i.useCallback((,[]),Ee=!!(I||k||b||n),Ae=i.useCallback((function(e){var t;U.get()&&W.current&&(W.current.contains(e.target)||e.target===window.document||(null==(t=e.target)?void 0:t.closest('button, label, input, [role="menuitem"], textarea'))||V.current&&V.current.contains(e.target)&&U.next(!1))}),[U]);return i.useEffect((function(){var e=U.subscribe((function(e){e&&requestAnimationFrame(()}));return ),[U,je]),i.useEffect((,[Ee,je]),i.useEffect((function(){if(z){var e=return window.addEventListener("resize",e),}),[z,be]),i.useEffect((function(){return $("auto")}),[]),Object(a.s)({mainElementRef:V,itemsCount:_.reduce((,0),tableEdgeReached:function(e){"previous"===e&&fe({duration:0})}}),Object(r.d)(A,{isOnBottomSource:L,beginingOfTime:_.length>0?_[0].timestamp:null,rootRef:V},Object(r.d)(d.f,{noShrink:!0},Object(r.d)(zt,{chatId:O,isOnBottomSource:L,isAgentBarExpandedSource:U,isLoadingHistory:N,wrapperRef:W},h&&Object(r.d)(R,{css:Oi,isUserScrollingSource:G}),E&&!oe&&Object(r.d)(i.Fragment,null,Object(r.d)(m.b,{message:w("reconnecting"),clearOnUnmount:!0,"aria-live":"assertive"}),Object(r.d)(vi,null,w("reconnecting")+"\u2026")))),Object(r.d)(f.a,{appear:!0,component:null},Object(r.d)(g.d,null,Object(r.d)(ji,{onClick:Ae},Object(r.d)(oi,{chatId:O,isScrollable:he(),isOnBottomSource:L,scrollToBottom:be,markAsSeen:we.markAsSeen}),Object(r.d)(pi,{isAgentBarExpandedSource:U,chatId:O}),Object(r.d)(d.k,{active:te,css:function(e){return function(e){var t=e.theme,n=e.overflow;return Object(r.c)("background:transparent;overscroll-behavior:contain;overflow-y:",t.isRtl?n:"auto",";position:absolute;top:0;bottom:0;left:0;right:0;")}({theme:e,overflow:Z})},onWheel:pe,onTouchStart:ge,ref:V},v&&Object(r.d)(d.q,null,Object(r.d)(ai,{size:"medium",style:{margin:"auto"}})),_.map((function(e){return Object(r.d)(i.Fragment,{key:xi(e)},e.isThreadBoundary&&Object(r.d)(F,{timestamp:e.timestamp}),re&&J>0&&e.events.some(()&&Object(r.d)(H,{unseenCount:J,setScrollTargetNode:ve}),Object(r.d)(gi.a,null,Object(r.d)(d.j,Object(l.a)({isOwn:e.own,isCarousel:"carousel"===e.type,onlyFirstWithMeta:!0},ae&&e.authorData.avatar&&{avatar:e.authorData.avatar}),e.events.map((function(t,n){return Object(r.d)(Rt.a,Object(l.a)({chatId:O,id:t.id,key:t.id,showMetaOnClick:!ce||0!==n,radiusType:e.radiusType,listItemHandlers:we,scrollTarget:ie,showMoment:B,scrollToBottom:be,increasedAvatarPadding:"carousel"===t.type&&ae},!J&&{setScrollTargetNode:ve}))})))))})),b&&Object(r.d)("div",{role:"row"},Object(r.d)("div",{role:"gridcell"},Object(r.d)(Mt.b,{"aria-labelledby":b.id,onSelect:function(e){var t=b.properties.quickReplies[e];b.properties.invitation?q({event:b.id,button:t}):D(t.text,{type:"quick_reply",event:b.id,button:t}),ye()},replies:b.properties.quickReplies}))),I&&Object(r.d)(i.Fragment,null,Object(r.d)(m.b,{clearOnUnmount:!0,"aria-live":"polite",message:w("operator_is_typing",{operator:p.name}).replace("...","")}),Object(r.d)(f.a,{appear:!0,component:null},Object(r.d)(g.a,{exit:!1},Object(r.d)(gr.b,{avatar:ae?p.avatar:null})))))))),"requestPrechat"===x?Object(r.d)(li,{onClick:xe(T)},w("embedded_greeting_accept")):"startChat"===x||"startChatAgain"===x?Object(r.d)(si,{onClick:xe()}):"text"===x?Object(r.d)(mn,{chatId:O,onSendMessage:ye,onHeightChange:Oe,onFocusChange:ke}):null,Object(r.d)(pr,{chatId:O,onSendMessage:ye}))}));function Ai(){var e=Object(v.a)(["\n\t&-enter,\n\t&-appear {\n\t\topacity: 0;\n\t}\n\n\t&-enter&-enter-active,\n\t&-appear&-appear-active {\n\t\topacity: 1;\n\t\ttransition: opacity ","ms ",";\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\n\t&-exit&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity ","ms ",";\n\t}\n"]);return Ai=function(){return e},e}var Ci=Object(d.A)("div",{displayName:"View",section:!0,target:"e1u2umur1"})({name:"73jfg1",styles:"flex-grow:1;display:flex;height:100%;min-height:0;padding-bottom:1em"}),Si=Object(d.A)("div",{displayType:"ViewContent",target:"e1u2umur0"})("overflow-y:auto;height:100%;flex-grow:1;padding:",(function(e){return e.full?"0 !important":"1em 1em 0 1em"}),";"),Ti=function(e,t){return e(Ai(),200,t.transitions.easings.sharp,200,t.transitions.easings.sharp)},_i={name:"1d3w5wq",styles:"width:100%"},Ii=function(e){var t=e.children,n=e.full,i=void 0!==n&&n;return Object(r.d)(Ci,null,Object(r.d)(r.a,null,(function(e){var n=e.css,o=e.theme;return Object(r.d)(f.a,{css:_i},Object(r.d)(j.a,{appear:!0,classNames:Ti(n,o),timeout:200},Object(r.d)(Si,{full:i},t)))})))},zi=Object(d.A)(d.c,{target:"ea4v29u0"})("background-color:",(function(e){return e.theme.colors.surface}),";"),Ri=function(){return i.createElement(o.a,null,(function(e){return i.createElement(Ii,null,i.createElement(zi,null,i.createElement(d.m,null,e("lost_connection"))))}))};ar Pi=Object(r.e)(Mi()),Fi=Object(r.c)("background:currentColor;opacity:0.3;animation:",Pi," 1.5s linear 0s infinite;"),Di=Object(r.c)(Fi,";"),Bi=Object(d.A)("div",{target:"e1uut4cd4"})("width:",(,";height:1em;margin:0.3em;border-radius:",(function(e){return e.theme.borderRadius.sm}),";",Fi,";"),qi=Object(d.A)("div",{target:"e1uut4cd3"})({name:"1d3w5wq",styles:"width:100%"}),Hi=Object(d.A)("div",{target:"e1uut4cd2"})({name:"66u5jz",styles:"padding:1em"}),Li=Object(d.A)("div",{target:"e1uut4cd1"})({name:"10qv9sv",styles:"width:100%;margin-top:0.5em"}),Ui=Object(d.A)("div",{displayName:"Message",section:!0,target:"e1uut4cd0"})(""),Ni=function(){return Object(r.d)(Ii,{full:!0},Object(r.d)(qi,null,Object(r.d)(d.a,null,Object(r.d)(d.b,{css:Di,letter:" "})),Object(r.d)(Hi,null,Object(r.d)(Li,null,Object(r.d)(d.q,null,Object(r.d)(Ui,null,Object(r.d)(d.c,null,Object(r.d)(d.m,null,Object(r.d)(Bi,null),Object(r.d)(Bi,{width:"7em"})))))),Object(r.d)(Li,null,Object(r.d)(d.q,{reverse:!0},Object(r.d)(Ui,null,Object(r.d)(d.c,null,Object(r.d)(d.m,null,Object(r.d)(Bi,null)))))),Object(r.d)(Li,null,Object(r.d)(d.q,null,Object(r.d)(Ui,null,Object(r.d)(d.c,null,Object(r.d)(d.m,null,Object(r.d)(Bi,null)))))))))},Vi=n(649);var Wi=Object(d.A)("div",{target:"e5cxvfk0"})({name:"iwp08z",styles:"display:flex;justify-content:center;font-size:0.9em"});var Gi="close_chat_confirm_label",Yi=Object(d.A)("p",{target:"ev8wfi81"})({name:"1azakc",styles:"text-align:center"}),Ki=Object(d.A)(D.s,{target:"ev8wfi80"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),Ji=function(e){var t=e.localize,n=e.closeChat,r=e.onModalStateChange,o=i.useState(!1),a=o[0],c=o[1],l=i.useState(!1),s=l[0],u=l[1],d=Object(ve.b)(),f=function(){c(!1),r({isOpen:!1})};return i.createElement(i.Fragment,null,i.createElement(ae,{description:t("close_chat")},i.createElement(Ki,{onPress:"aria-label":t("close_chat")},i.createElement(D.h,{"aria-hidden":!0}))),i.createElement(Ee,{shown:a,onClose:f,"aria-labelledby":Gi},i.createElement(_e,{"aria-hidden":!0},i.createElement(D.o,null)),i.createElement(Yi,{id:Gi},t("leave_chat_confirm")),i.createElement(Wi,null,i.createElement(Vi.i,{destructive:!0,label:t("close_chat"),submitting:s,onClick:function(){d?f():(u(!0),n().then(().catch((function(){u(!1)})))}}))))},Qi=n(650),Xi=n(668),Zi=n(659);var $i="email-transcript-sent-label",eo="email-transcript-not-sent-label",to=Object(d.A)("h2",{target:"emwx8nd0"})({name:"xvo3ou",styles:"text-align:center;font-size:16px;font-weight:normal"}),no=function(e){var t=e.email,n=e.localize,r=e.sent,o=e.open,c=e.onClose,l=e.onSubmit,s=e.mobile,f=Object(a.h)("email-transcript"),b=i.useState((),m=b[0],p=b[1];return i.useEffect((function(){if(o){var e=f.get();p(e||{email:t})}}),[f,t,o]),i.createElement(Ee,{shown:o,onClose:c,"aria-labelledby":r?$i:eo},o&&(r?i.createElement(i.Fragment,null,i.createElement(_e,{"aria-hidden":!0},i.createElement(D.x,null)),i.createElement(to,{id:$i,textWrap:!0},n("chat_transcript_sent").replace(/%s/g,t||"")),i.createElement(Wi,null,i.createElement(Zn.a,{capitalize:!0,onClick:c},n("hide")))):i.createElement(i.Fragment,null,i.createElement(_e,{"aria-hidden":!0},i.createElement(D.x,null)),i.createElement(to,{id:eo},n("send_transcript_to_email")),i.createElement(Ae.a,{id:"email_transcript",initialValues:m,mobile:s,onSubmit:function(e){return Math.random()<.01&&Object(Nt.d)("chat_transcript_ordered",{}),l(e.email).then((function(){return f.destroy()})).catch((function(){var e;return(e={})[Zi.a]=n("lost_connection"),e}))},submitLabel:n("send"),validate:function(e){return e.email?{}:{email:n("survey_fill_in_required_fields")}}},i.createElement(d.q,null,i.createElement(Qi.c,{onChange:),i.createElement(Xi.a,{ariaLabel:"Enter your email address",name:"email",required:!0,serverName:"",label:"",type:"email",localize:u.D}))))))},ro=Object(d.A)("div",{target:"eleibs71"})("display:flex;position:relative;width:44px;height:24px;border-radius:24px;background-color:",(function(e){return e.theme.colors.inactiveElement}),";will-change:background-color;transition:background-color 0.2s linear;cursor:pointer;outline-offset:2px;&::after{content:'';position:absolute;height:16px;width:16px;border-radius:16px;top:4px;left:4px;background-color:",(function(e){return e.theme.colors.surface}),";will-change:left;transition:left 0.2s ease-in;}"),io=Object(d.A)("input",{target:"eleibs70"})("position:absolute;left:2137px;&:checked+div{background-color:",(function(e){return e.theme.colors.success}),";&::after{left:24px;}}"),oo=function(e){var t=e.checked,n=Object(h.a)(e,["checked"]);return i.createElement(i.Fragment,null,i.createElement(io,Object(l.a)({type:"checkbox",checked:t},n)),i.createElement(ro,null))};ar co=function(e){return Object(r.c)("margin-"+(e.isRtl?"left":"right")+": 8px;","")},lo=Object(d.A)("div",{target:"e1s5h2c81"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),so=Object(d.A)(rn,{target:"e1s5h2c80"})({name:"2o6p8u",styles:"justify-content:space-between"}),uo=fo=Object(o.c)((function(e){var t=hr.d,n=r=return function(e){var i=e.getChat(t),o=i.active,a=i.properties,l=a.transcriptSentTo,s=Object(Gn.a)(e,"floating-menu");return{localize:e.localize,muted:e.getApplicationState("muted"),sendTranscript:n,transcriptSentTo:l,enableTranscript:!e.getApplicationState("isPreview")&&(o||a.ended),showTranscript:Object(c.i)("emailTranscript",e).enabled,toggleSounds:r,chatTransfer:s,customerEmail:e.getSessionUser().email,showVoiceAssistant:}}))((function(e){var t=e.customerEmail,n=e.enableTranscript,o=e.localize,c=e.muted,l=e.sendTranscript,u=e.showTranscript,d=e.toggleSounds,b=e.chatTransfer,m=e.transcriptSentTo,p=e.showVoiceAssistant,g=i.useState(!1),h=g[0],v=g[1],O=i.useState(!1),x=O[0],y=O[1],w=Object(N.useFrame)(),k=Object(s.g)(),E=Object(je.b)();Object(a.g)(w);var A=i.useRef(null),C=!!m,S=i.useCallback((function(e){switch(e){case"sounds":return void d();case"transcript":return v(!1),void y(!0);case"identityTransfer":return Object(Nt.d)("chat_app_button_clicked",{ui_source:"menu"}),v(!1),void b.showMoment();case"voiceAssistant":v(!1),p()}}),[d,b,p]);return Object(a.p)((function(){h&&Math.random()<.01&&Object(Nt.d)("meatballs_menu_opened",{})}),[h]),i.useEffect((function(){return E.setMenuOpen(h)}),[h,E]),Object(r.d)(i.Fragment,null,Object(r.d)(ae,{isDisabled:h,description:o("theme_options")},Object(r.d)(D.s,{css:Object(r.c)("padding:0;height:32px;background-color:",h?k.colors.lighterOppositeTitleBarColor:"transparent",";&:hover{background-color:",k.colors.lighterOppositeTitleBarColor,";}"),ref:A,onPress:active:h,"aria-label":h?"Close menu":"Open menu","aria-expanded":h,"aria-haspopup":!0},Object(r.d)(D.j,{"aria-hidden":!0,color:"modern"===k.name?k.colors.titleBarText:k.colors.agentBarText}))),Object(r.d)(r.a,null,(function(e){var t=e.css;return Object(r.d)(f.a,{component:null},h&&Object(r.d)(j.a,{classNames:uo(t),timeout:200},Object(r.d)(tn,{menuButtonRef:A,onClose:function(){return v(!1)},onSelect:S},u&&Object(r.d)(rn,{disabled:!n,text:o("send_transcript"),value:"transcript"},Object(r.d)(D.x,{css:co(k),"aria-hidden":!0}),o("send_transcript")),b.available&&Object(r.d)(rn,{text:hr.j,value:"identityTransfer",disabled:b.disabled},Object(r.d)(D.z,{css:co(k),"aria-hidden":!0}),hr.j),Object(r.d)(so,{text:o(c?"unmute":"mute"),"aria-label":c?o("sounds")+" "+o("unmute"):o("sounds")+" "+o("mute"),value:"sounds"},Object(r.d)(lo,null,c?Object(r.d)(D.A,{css:co(k),"aria-hidden":!0}):Object(r.d)(D.U,{css:co(k),"aria-hidden":!0}),Object(r.d)("span",{"aria-hidden":!0},o("sounds"))),Object(r.d)(oo,{checked:!c,onChange:"aria-hidden":!0})),!1)))})),Object(r.d)(no,{email:C?m:t,localize:o,onClose:function(){return y(!1)},onSubmit:l,sent:C,open:x}))})),bo=n(197);var mo=window.matchMedia("(max-height: 330px)"),po=function(e,t,n){return function(i){return Object(r.c)("overflow:hidden;flex-grow:0;text-align:left;padding:0 0.8em;font-weight:700;display:flex;align-items:center;transition:0.3s background-color;z-index:",e?103:2,";pointer-events:",e?"none":"all",";box-shadow:",t?i.boxShadow.md:"none",";",n&&Object(r.c)("box-shadow:",i.boxShadow.enormous,";"),";transition:box-shadow 200ms ",i.transitions.easings.smooth,";")}},go=Object(d.A)("div",{displayName:"IconPlaceholder",target:"e7bf83j5"})({name:"febvbf",styles:"width:25px;flex-shrink:0"}),ho=vo=Object(d.A)(Ue,{target:"e7bf83j4"})({name:"1693thf",styles:"margin-right:5px"}),jo=Object(d.A)("h1",{target:"e7bf83j3"})((function(e){var t=e.theme;return ho(t)}),";"),Oo={name:"1l53zi",styles:"pointer-events:none;opacity:0;cursor:auto"},xo={name:"4uq5vb",styles:"pointer-events:all;opacity:1;cursor:pointer"},yo=Object(d.A)("button",{target:"e7bf83j2"})((function(e){var t=e.theme;return ho(t)})," margin:0 auto;padding:6px;border-radius:",(function(e){return e.theme.borderRadius.def}),";display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative;color:inherit;background:none;border:none;appearance:none;max-width:100%;transition:none;",(,";&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),wo=Object(d.A)(D.s,{target:"e7bf83j1"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),ko=Object(d.A)("div",{target:"e7bf83j0"})(""),Eo=function(e){return Object(u.hb)(e-1).map((function(e){return Object(r.d)(go,{key:"placeholder_"+e})}))},Ao={name:"21xn5r",styles:"transform:rotate(180deg)"},Co=Object(o.c)((function(e,t){var n=t.chatId,r=i=o=e.getApplicationState("embedded");return function(e){var t=Object(c.d)(n,e),a=Object(c.nb)(e),l=function(e,t){if(e&&e.name&&t)return e.name}(t,a),s=!(Object(c.rb)(e)||Object(c.qb)(e))&&l,u=n===hr.k;return{embedded:o,closeChat:r,title:u?"Welcome to OpenAI Chat":e.localize("welcome_title"),titleWithAgentData:l,agent:t,shouldShowTitleWithAgentData:s,showCloseButton:!u&&e.getChat(n).active,localize:e.localize,showAgentBar:a,showAvatar:Object(c.i)("agentAvatar",e).enabled,isDropAreaVisible:e.getApplicationState("dropAreaVisible"),showBackButton:"Homescreen"===e.getDefaultView(),goToHomescreen:i,showRatingPrompt:Object(c.sb)(e)}}}))((function(e){var t=e.showCloseButton,n=e.closeChat,o=e.localize,c=e.showMinimizedButton,u=e.title,f=e.titleWithAgentData,b=e.onMinimize,m=e.showAgentBar,p=e.shouldShowTitleWithAgentData,g=e.agent,h=e.showAvatar,v=e.isDropAreaVisible,j=e.showBackButton,O=e.goToHomescreen,x=e.isAgentBarExpandedSource,y=e.showRatingPrompt,w=Object(s.g)(),k=i.useRef(),E=i.useRef(),A=i.useRef(),C=i.useRef(mo.matches),S=i.useState(!1),T=S[0],_=S[1],I=Object(G.e)(),z=I.isFocusVisible,R=I.focusProps,M=w.name,P=Object(a.v)(x),F=y&&!P,B=i.useCallback((,[p,x,P]);i.useEffect((function(){var e=return mo.addListener(e),function(){return mo.removeListener(e)}}),[]);var q=function(e,t){var n=e.filter(Boolean),r=t.filter(Boolean);return n.length===r.length?{leftIcons:n,rightIcons:r}:n.length>r.length?{leftIcons:n,rightIcons:Eo(n.length-r.length).concat(r)}:{leftIcons:n.concat(Eo(r.length-n.length)),rightIcons:r}}([j&&Object(r.d)(wo,{"aria-label":"Go back to homescreen",key:"back",onPress:O},Object(r.d)(bo.a,{"aria-hidden":!0,css:Ao})),Object(r.d)(fo,{key:"menu"})],[c&&Object(r.d)(ae,{key:"minimize",description:o("embedded_minimize_window")},Object(r.d)(wo,{onPress:b,"aria-label":o("embedded_minimize_window")},Object(r.d)(D.y,{"aria-hidden":!0}))),(t||T)&&Object(r.d)(Ji,{key:"close",closeChat:n,localize:o,onModalStateChange:)]),H=q.leftIcons,L=q.rightIcons,U="modern"===M?"small":"normal",N=p&&!P;return Object(r.d)(d.x,{css:po(v,N,F),leftIcons:H,noShrink:!0,rightIcons:L,title:Object(r.d)(ko,{ref:A},!p&&!m&&u&&Object(r.d)(jo,null,u),p&&Object(r.d)(yo,Object(l.a)({show:!P},R,{focused:z,ref:E,onClick:B,"aria-expanded":P,"aria-controls":ot}),!(P&&m)&&Object(r.d)(i.Fragment,null,!P&&g&&m&&h&&Object(r.d)(vo,{avatarUrl:g.avatar,size:U,availability:"online"}),!P&&g&&!h&&Object(r.d)(vo,{size:U,availability:"online"}),Object(r.d)(jo,{ref:k,ellipsis:!0},Object(r.d)(Be.a,null,f))),P&&Object(r.d)("span",null,"Collapse")))})})),So=n(680),To=n(677),_o=i.lazy(();t.default=Object(o.c)((function(e){return{destroyed:e.getApplicationState().destroyed,showLoader:Object(c.ob)(e),defaultWidget:e.getApplicationState().defaultWidget,currentView:e.getCurrentView(),chatId:Object(c.e)(e)}}))((function(e){var t=e.destroyed,n=e.showLoader,i=e.currentView,o=e.defaultWidget,c=e.onMinimizeButtonPress,l=e.showMinimizedButton,s=e.chatId,u=Object(a.w)(!0),d=Object(a.w)(!0);return t?Object(r.d)(Ri,null):"openwidget"===o&&i&&"Chat"!==i?Object(r.d)(_o,{currentView:i}):n?Object(r.d)(Ni,null):Object(r.d)(To.a,null,Object(r.d)(Co,{isOnBottomSource:u,onMinimize:c,showMinimizedButton:l,isAgentBarExpandedSource:d,chatId:s}),Object(r.d)(Ei,{id:s,isOnBottomSource:u,isAgentBarExpandedSource:d}),Object(r.d)(So.a,null))}))}}]);