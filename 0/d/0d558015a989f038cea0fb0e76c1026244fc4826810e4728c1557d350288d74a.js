/**
 * @license
 * lodash 3.5.0 (Custom Build) lodash.com/license | Underscore.js 1.8.2 underscorejs.org/LICENSE
 * Build: `lodash include="template, forEach" exports="global" --production`
 */

/*!
 * jQuery JavaScript Library v2.1.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-18T15:11Z
 */

/*!
   * Sizzle CSS Selector Engine v2.2.0-pre
   * http://sizzlejs.com/
   *
   * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
   * Released under the MIT license
   * http://jquery.org/license
   *
   * Date: 2014-12-16
   */

!function(){var e,t,n,r,i,o,s,a,u,c,l,f,p,d;e=function(){var e={ATTEMPTED:"attempt",CLOSED:"close",SHOWN:"display",COMPLETED:"complete",SUBMITTED:"submit",QUESTION_SHOWN:"questionShown",EXTRA_DATA:"extraData",CHILD_READY_TO_RECEIVE_EVENTS:"childReady",CHILD_CONTENT_FETCHED:"childContentFetched",REACHED_THANKYOU:"reachedThankyou",RESOURCE_CACHE_REQUIRED:"cacheResourceRequired",UPDATE_THEME:"updateTheme"};return e}(),function(){ion o(){}unction a(e,t,n,r){return"undefined"!=typeof e&&rt.call(r,n)?e:t}function u(e,t,n){var r=mt(t);if(!n){r||(r=e,e={}),n=-1;for(var i=r.length;++n<i;){var o=r[n];e[o]=t[o]}return e}for(i=-1,o=r.length;++i<o;){var s=r[i],a=e[s],u=n(a,t[s],s,e,t);(u===u?u===a:a!==a)&&("undefined"!=typeof a||s in e)||(e[s]=u)}return e}unction l(e,t){return"function"!=typeof e?S:"undefined"==typeof t?e:function f(e,t){return e=+e,t=null==t?ft:t,e>-1&&0==e%1&&t>e}function p(e,t,n){if(!x(n))return!1;var r=typeof t;return"number"==r?(r=n.length,r=d(r)&&f(t,r)):r="string"==r&&t in n,r?(t=n[t],e===e?e===t:t!==t):!1}function d(e){return"number"==typeof e&&e>-1&&0==e%1&&ft>=e}function h(e){for(var t=E(e),n=t.length,r=n&&e.length,i=o.support,i=r&&d(r)&&(ht(e)||i.nonEnumStrings&&T(e)||i.nonEnumArgs&&v(e)),s=-1,a=[];++s<n;){var u=t[s];(i&&f(u,r)||rt.call(e,u))&&a.push(u)}return a}unction m(e,t,n){if("function"==typeof t&&"undefined"==typeof n&&ht(e))e=s(e,t);else if(t=l(t,n),n=e?e.length:0,d(n))for(var r=-1,i=g(e);++r<n&&!1!==t(i[r],r,i););else{i=mt,n=-1;for(var r=g(e),i=i(e),o=i.length;++n<o;){var a=i[n];if(!1===t(r[a],a,r))break}}return e}function v(e){return d(i(e)?e.length:N)&&it.call(e)==A||!1}function y(e){return i(e)&&"string"==typeof e.message&&it.call(e)==k||!1}unction b(e){return null==e?!1:it.call(e)==D?ot.test(nt.call(e)):i(e)&&(G(e)?ot:R).test(e)||!1}function T(e){return"string"==typeof e||i(e)&&it.call(e)==L||!1}function E(e){if(null==e)return[];x(e)||(e=Object(e));for(var t=e.length,n=o.support,t=t&&d(t)&&(ht(e)||n.nonEnumStrings&&T(e)||n.nonEnumArgs&&v(e))&&t||0,r=e.constructor,i=-1,r=gt(r)&&r.prototype||et,s=r===e,a=Array(t),u=t>0,c=n.enumErrorProps&&(e===Z||e instanceof Error),l=n.enumPrototypes&&gt(e);++i<t;)a[i]=i+"";for(var p in e)l&&"prototype"==p||c&&("message"==p||"name"==p)||u&&f(p,t)||"constructor"==p&&(s||!rt.call(e,p))||a.push(p);if(n.nonEnumShadows&&e!==et)for(t=e===tt?L:e===Z?k:it.call(e),n=pt[t]||pt[I],t==I&&(r=et),t=z.length;t--;)p=z[t],i=n[p],s&&i||(i?!rt.call(e,p):e[p]===r[p])||a.push(p);return a}unction C(){for(var e=arguments[0],t=arguments.length,n=Array(t?t-1:0);0<--t;)n[t-1]=arguments[t];try{return e.apply(N,n)}catch(r){return y(r)?r:Error(r)}}ar N,A="[object Arguments]",k="[object Error]",D="[object Function]",I="[object Object]",L="[object String]",O=/\b__p\+='';/g,j=/\b(__p\+=)''\+/g,H=/(__e\(.*?\)|\b__t\))\+'';/g,P=/[&<>"'`]/g,q=RegExp(P.source),M=/<%=([\s\S]+?)%>/g,_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,R=/^\[object .+?Constructor\]$/,F=/($^)/,B=/[.*+?^${}()|[\]\/\\]/g,U=RegExp(B.source),W=/\bthis\b/,$=/['\n\r\u2028\u2029\\]/g,z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},X={"function":!0,object:!0},V={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Y=X[typeof module]&&module&&!module.nodeType&&module,K=X[typeof window]&&window,J=X[typeof exports]&&exports&&!exports.nodeType&&exports&&Y&&"object"==typeof global&&global||K!==(this&&this.window)&&K||this,G=),X=Array.prototype,Z=Error.prototype,et=Object.prototype,tt=String.prototype,nt=Function.prototype.toString,rt=et.hasOwnProperty,it=et.toString,ot=RegExp("^"+w(it).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),st=et.propertyIsEnumerable,at=X.splice,ut=b(ut=J.Uint8Array)&&ut,ct=b(ct=Array.isArray)&&ct,lt=b(lt=Object.keys)&&lt,ft=Math.pow(2,53)-1,pt={};pt["[object Array]"]=pt["[object Date]"]=pt["[object Number]"]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},pt["[object Boolean]"]=pt[L]={constructor:!0,toString:!0,valueOf:!0},pt[k]=pt[D]=pt["[object RegExp]"]={constructor:!0,toString:!0},pt[I]={constructor:!0},s(z,;var dt=o.support={};!function(){ar t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);dt.argsTag=it.call(arguments)==A,dt.enumErrorProps=st.call(Z,"message")||st.call(Z,"name"),dt.enumPrototypes=st.call(e,"prototype"),dt.funcDecomp=!b(J.WinRTError)&&W.test(,dt.funcNames="string"==typeof Function.name,dt.nonEnumStrings=!st.call("x",0),dt.nonEnumShadows=!/valueOf/.test(n),dt.spliceObjects=(at.call(t,0,1),!t[0]),dt.unindexedChars="xx"!="x"[0]+Object("x")[0];try{dt.nonEnumArgs=!st.call(arguments,1)}catch(i){dt.nonEnumArgs=!0}}(0,0),o.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:M,variable:"",imports:{_:o}},dt.argsTag||(v=function(e){return d(i(e)?e.length:N)&&rt.call(e,"callee")&&!st.call(e,"callee")||!1});var ht=ct||function(e){return i(e)&&d(e.length)&&"[object Array]"==it.call(e)||!1},gt=e(/x/)||ut&&!e(ut)?e,mt=lt?function(e){if(e)var t=e.constructor,n=e.length;return"function"==typeof t&&t.prototype===e||("function"==typeof e?o.support.enumPrototypes:n&&d(n))?h(e):x(e)?lt(e):[]}:h;o.forEach=m,o.keys=mt,o.keysIn=E,o.each=m,o.attempt=C,o.escape=o.escapeRegExp=w,o.identity=S,o.isArguments=v,o.isArray=ht,o.isError=y,o.isFunction=gt,o.isNative=b,o.isObject=x,o.isString=T,o.template=function(e,n,i){var s=o.templateSettings;i&&p(e,n,i)&&(n=i=null),e=t(e),n=u(u({},i||n),s,a),i=u(u({},n.imports),s.imports,a);var l,f,d=mt(i),h=c(i,d),g=0;i=n.interpolate||F;var m="__p+='",v="sourceURL"in n?"//# sourceURL="+n.sourceURL+"\n":"";if(e.replace(RegExp((n.escape||F).source+"|"+i.source+"|"+(i===M?_:F).source+"|"+(n.evaluate||F).source+"|$","g"),,m+="';",(n=n.variable)||(m="with(obj){"+m+"}"),m=(f?m.replace(O,""):m).replace(j,"$1").replace(H,"$1;"),m="function("+(n||"obj")+"){"+(n?"":"obj||(obj={});")+"var __t,__p=''"+(l?",__e=_.escape":"")+(f?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+m+"return __p}",n=C(,n.source=m,y(n))throw n;return n},o.VERSION="3.5.0",J._=o}.call(this),t=window._,n=function(){var e={CHARS_LIMIT_EXCEEDED:"Characters can't be more than <%= maxChars %>",INVALID_INPUT_TYPE:"Invalid <%= type %>",REQUIRED_INPUT:"A response is required"};return e}(),"undefined"!=typeof window?window:this,function(e,t){n l(){return!0}W.push,X=W.indexOf,V={},Y=V.toString,K=V.hasOwnProperty,J={},G=e.document,Z="2.1.3",et=tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,nt=/^-ms-/,rt=/-([\da-z])/gi,it=et.fn=et.prototype={jquery:Z,constructor:et,selector:"",length:0,toArray:get:pushStack:each:map:slice:first:last:eq:end:push:Q,sort:W.sort,splice:W.splice},et.extend=et.fn.extend=et.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:noop:function(){},isFunction:isArray:Array.isArray,isWindow:isNumeric:isPlainObject:isEmptyObject:type:globalEval:camelCase:nodeName:each:trim:makeArray:inArray:merge:grep:map:guid:1,proxy:now:Date.now,support:J}),et.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),;var ot=e);et.find=ot,et.expr=ot.selectors,et.expr[":"]=et.expr.pseudos,et.unique=ot.uniqueSort,et.text=ot.getText,et.isXMLDoc=ot.isXML,et.contains=ot.contains;var st=et.expr.match.needsContext,at=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ut=/^.[^:#\[\.,]*$/;et.filter=et.fn.extend({find:filter:function(e){return this.pushStack(i(this,e||[],!1))},not:is:);var ct,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ft=et.fn.init=ft.prototype=et.fn,ct=et(G);var pt=/^(?:parents|prev(?:Until|All))/,dt={children:!0,contents:!0,next:!0,prev:!0};et.extend({dir:sibling:),et.fn.extend({has:closest:index:add:addBack:),et.each({parent:parents:function(e){return et.dir(e,"parentNode")},parentsUntil:function(e,t,n){return et.dir(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:nextAll:function(e){return et.dir(e,"nextSibling")},prevAll:nextUntil:function(e,t,n){return et.dir(e,"nextSibling",n)},prevUntil:siblings:children:contents:,;var ht=/\S+/g,gt={};et.Callbacks=et.extend({Deferred:when:);var mt;et.fn.ready=et.extend({isReady:!1,readyWait:1,holdReady:ready:),et.ready.promise=et.ready.promise();var vt=et.access=et.acceptData=u.uid=1,u.accepts=et.acceptData,u.prototype={key:set:get:access:remove:hasData:discard:;var yt=new u,xt=new u,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Tt=/([A-Z])/g;et.extend({hasData:data:function(e,t,n){return xt.access(e,t,n)},removeData:function(e,t){xt.remove(e,t)},_data:_removeData:),et.fn.extend({data:removeData:function(e){return this.each(function(){xt.remove(this,e)})}}),et.extend({queue:dequeue:_queueHooks:),et.fn.extend({queue:dequeue:function(e){return this.each(function(){et.dequeue(this,e)})},clearQueue:promise:);var Et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wt=["Top","Right","Bottom","Left"],Ct=St=/^(?:checkbox|radio)$/i;!);var Nt="undefined";J.focusinBubbles="onfocusin"in e;var At=/^key/,kt=/^(?:mouse|pointer|contextmenu)|click/,Dt=/^(?:focusinfocus|focusoutblur)$/,It=/^([^.]*)(?:\.(.+)|)$/;et.event={global:{},add:remove:trigger:dispatch:handlers:props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:,mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:,fix:special:{load:{noBubble:!0},focus:{trigger:delegateType:"focusin"},blur:{trigger:delegateType:"focusout"},click:{trigger:_default:,beforeunload:{postDispatch:},simulate:,et.removeEvent=et.Event=et.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:stopImmediatePropagation:,et.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},,J.focusinBubbles||et.each({focus:"focusin",blur:"focusout"},,et.fn.extend({on:one:off:trigger:triggerHandler:);var Lt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ot=/<([\w:]+)/,jt=/<|&#?\w+;/,Ht=/<(?:script|style|link)/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,qt=/^$|\/(?:java|ecma)script/i,Mt=/^true\/(.*)/,_t=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Rt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Rt.optgroup=Rt.option,Rt.tbody=Rt.tfoot=Rt.colgroup=Rt.caption=Rt.thead,Rt.th=Rt.td,et.extend({clone:buildFragment:cleanData:),et.fn.extend({text:append:prepend:before:after:remove:empty:clone:html:replaceWith:detach:domManip:),et.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},;var Ft,Bt={},Ut=/^margin/,Wt=new RegExp("^("+Et+")(?!px)[a-z%]+$","i"),$t=!),et.swap=var zt=/^(none|table(?!-c[ea]).+)/,Qt=new RegExp("^("+Et+")(.*)$","i"),Xt=new RegExp("^([+-])=("+Et+")","i"),Vt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:"0",fontWeight:"400"},Kt=["Webkit","O","Moz","ms"];et.extend({cssHooks:{opacity:{get:},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:css:),et.each(["height","width"],,et.cssHooks.marginRight=w(J.reliableMarginRight,,et.each({margin:"",padding:"",border:"Width"},,et.fn.extend({css:show:hide:toggle:),et.Tween=D,D.prototype={constructor:D,init:cur:run:,D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:set:},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:,et.easing={linear:swing:,et.fx=D.prototype.init,et.fx.step={};var Jt,Gt,Zt=/^(?:toggle|show|hide)$/,en=new RegExp("^(?:([+-])=|)("+Et+")([a-z%]*)$","i"),tn=/queueHooks$/,nn=[j],rn={"*":[};et.Animation=et.extend(P,{tweener:prefilter:),et.speed=et.fn.extend({fadeTo:animate:stop:finish:),et.each(["toggle","show","hide"],,et.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},,et.timers=[],et.fx.tick=et.fx.timer=et.fx.interval=13,et.fx.start=et.fx.stop=et.fx.speeds={slow:600,fast:200,_default:400},et.fn.delay=);var on,sn,an=et.expr.attrHandle;et.fn.extend({attr:function(e,t){return vt(this,et.attr,e,t,arguments.length>1)},removeAttr:),et.extend({attr:removeAttr:attrHooks:{type:{set:}}),sn={set:,et.each(et.expr.match.bool.source.match(/\w+/g),;var un=/^(?:input|select|textarea|button)$/i;et.fn.extend({prop:removeProp:),et.extend({propFix:{"for":"htmlFor","class":"className"},prop:propHooks:{tabIndex:{get:}}),J.optSelected||(et.propHooks.selected={get:),et.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],;var cn=/[\t\r\n\f]/g;et.fn.extend({addClass:removeClass:toggleClass:hasClass:);var ln=/\r/g;et.fn.extend({val:),et.extend({valHooks:{option:{get:,select:{get:set:}}),et.each(["radio","checkbox"],,et.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),,et.fn.extend({hover:bind:unbind:delegate:undelegate:);var fn=et.now(),pn=/\?/;et.parseJSON=et.parseXML=var dn=/#.*$/,hn=/([?&])_=[^&]*/,gn=/^(.*?):[ \t]*([^\r\n]*)$/gm,mn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,yn=/^\/\//,xn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bn={},Tn={},En="*/".concat("*"),wn=e.location.href,Cn=xn.exec(wn.toLowerCase())||[];et.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wn,type:"GET",isLocal:mn.test(Cn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":En,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":et.parseJSON,"text xml":et.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:ajaxPrefilter:q(bn),ajaxTransport:q(Tn),ajax:getJSON:getScript:),et.each(["get","post"],,et._evalUrl=et.fn.extend({wrapAll:wrapInner:wrap:unwrap:),et.expr.filters.hidden=et.expr.filters.visible=var Sn=/%20/g,Nn=/\[\]$/,An=/\r?\n/g,kn=/^(?:submit|button|image|reset|file)$/i,Dn=/^(?:input|select|textarea|keygen)/i;et.param=et.fn.extend({serialize:serializeArray:),et.ajaxSettings.xhr=var In=0,Ln={},On={0:200,1223:204},jn=et.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",,J.cors=!!jn&&"withCredentials"in jn,J.ajax=jn=!!jn,et.ajaxTransport(,et.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":}),et.ajaxPrefilter("script",,et.ajaxTransport("script",;var Hn=[],Pn=/(=)\?(?=&|$)|\?\?/;et.ajaxSetup({jsonp:"callback",jsonpCallback:),et.ajaxPrefilter("json jsonp",,et.parseHTML=var qn=et.fn.load;et.fn.load=et.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],,et.expr.filters.animated=var Mn=e.document.documentElement;et.offset={setOffset:,et.fn.extend({offset:position:offsetParent:),et.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},,et.each(["top","left"],,et.each({Height:"height",Width:"width"},,et.fn.size=et.fn.andSelf=et.fn.addBack,r=function(){return et}();var _n=e.jQuery,Rn=e.$;return et.noConflict=typeof t===Nt&&(e.jQuery=e.$=et),et}),i=window.jQuery,o=function(){var e={loadCss:function(e,t){function n(e,t){var n,i,o,a=document.getElementsByTagName("head")[0];t&&(n=document.getElementById(t),n&&(i=[].slice.call(n.parentNode.children).indexOf(n),o=n.parentNode.children[i+1],n.parentNode.removeChild(n),s--)),n=document.createElement("link"),t&&(n.id=t),n.href=e,n.rel="stylesheet",n.type="text/css",n.onload=function(){r()},n.onreadystatechange=o?a.insertBefore(n,o):a.appendChild(n),s++}or(var i,o=e.length,s=document.styleSheets.length-1,a=0;a<e.length;a++)i=e[a],n(i.url,i.id)}};return e}(),s=function(e,t,n,r){var i=[].indexOf,o={parseQueryString:function(e){for(var t=e.split("&"),n={},r=0;r<t.length;r++){var i=t[r].split("=");n[i[0]]=i[1]}return n},parseUrlForSurveyConfig:function(){var e=this.parseQueryString(location.href.slice(location.href.indexOf("#")+1));return e.id=parseInt(e.id,10),e.accountId=parseInt(e.accountId,10),e.cQId=parseInt(e.cQId,10),e.hideLogo=parseInt(e.hideLogo,10),e.customLogo=parseInt(e.customLogo,10),e},unserialize:function(e){for(var t,n={},r=0;r<e.length;r++)t=e[r],n[t.name]=n[t.name]||[],n[t.name].push(t.value);return n},resetView:function(){var e=document.getElementById("error-msg"),t=document.getElementById("main"),n=document.getElementById("header"),r=document.getElementById("footer");t&&(t.innerHTML=""),n&&(n.innerHTML=""),r&&(r.innerHTML=""),e&&(e.innerHTML="")},setContent:function(e,t,n){var r=document.getElementById("main"),i=document.getElementById("header"),o=document.getElementById("footer");r&&(r.innerHTML=e||""),i&&(i.innerHTML=t||""),o&&(o.innerHTML=n||"")},showErrorMsg:function(e){if(!e)return!0;var r=document.getElementById("t-error-msg").innerHTML;return document.getElementById("error-msg").innerHTML=t.template(r)({errMsg:e}),n("form").get(0).scrollTop=1e4,!1},hasInputsRequiringTextValidation:setTheme:function(e,t){if(e){var n=e.split(","),i=[{url:n[0],id:"default-theme"}];n[1]?(i.push({url:n[1],id:"theme"}),document.getElementById("custom-theme-css").innerHTML=""):document.getElementById("theme").href="",r.loadCss(i,function(){t()})}},validateText:function(n,r,i,o){var s=n.val().trim(),a=s.length>i,u=new RegExp(r).test(s);return u?a?t.template(e.CHARS_LIMIT_EXCEEDED)({maxChars:i}):void 0:t.template(e.INVALID_INPUT_TYPE)({type:o})},validateEmail:function(n){var r=/[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z]{2,4}/.test(n);return r?!1:t.template(e.INVALID_INPUT_TYPE)({type:"email"})},getCommonItems:function(e,t){for(var n=[],r=0;r<e.length;r++)-1!==i.call(t,e[r])&&n.push(e[r]);return n},escapeHtml:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e&&e.replace(/[&<>"'\/]/g,function(e){return t[e]})}};return o}(n,t,i,o),a=),u=function(){var e={WELCOME_TITLE:"Hi There.",THANKYOU_TITLE:"Thanks",THANKYOU:"Thank you for taking this survey",ASK_EMAIL_TITLE:"Please provide your email"};return e}(),c=),l=function(){var e={},t=t.prototype.add=t.prototype.resolve=t.prototype.remove=t.prototype.canResolve=var n={init:getDependencyManager:;return n}(),f=function(e,t,n,r,i,o,s,a){var u,c=255,l={pages:[],processSurveyUrl:function(){var t=this.config=n.parseUrlForSurveyConfig();t.responsibleCampaignIds=t.rexps||"{}",t.responsibleCampaignIds=JSON.parse(decodeURIComponent(t.responsibleCampaignIds)),this.isAttempted=!1,this.childDM=a.init(function(){l.onDependencyResolved()},"childDM"),this.childDM.add("theme"),this.childDM.add("questions"),t.preCreationPreview?(t.settings=decodeURIComponent(t.settings),t.settings&&(t.settings=JSON.parse(t.settings)),this.tellParent(e.CHILD_CONTENT_FETCHED),this.processConfig(t.settings)):this.fetchSurvey(t)},init:function(t,n,r){u=n,this.listeners=r,this.processSurveyUrl(),this.addListeners(t,r),this.tellParent(e.CHILD_READY_TO_RECEIVE_EVENTS)},getErrorMsg:function(e){var r,i,a,l,f,p,d,h,g=u("#main input").length&&u("#main input").eq(0)||u("#main textarea").eq(0);if(i=n.unserialize(u("form").serializeArray()),r=n.hasInputsRequiringTextValidation(g[0]),e.ctxt===o.ASK_EMAIL)return f=g.val(),f.trim()?n.validateEmail(f):!1;if(e.ctxt===o.QUESTION){if(l=e.question,"html"===l.type)return;if(a=i[l.id],!(a&&a.length&&a[0]&&a[0].trim()))return l.optional||l.isOptional?!1:t.template(s.REQUIRED_INPUT)();if(r)return h=l.regex||"",p=l.maxChar||c,d=l.textType||"text",n.validateText(g,h,p,d)}},trackEvent:function(t){var n,r=this.listeners.on[t],i=!0,o=!0,s={action:t};r&&(n=r.apply(this,[].slice.call(arguments,1)),"object"==typeof n&&(s=n,s.action=t),o=i=!!n),o=t===e.CLOSED?!1:o,i&&this.tellBackend(s),o&&this.tellParent(s)},getTrackingData:function(){var e=this.config,t=e.responsibleCampaignIds?+Object.keys(e.responsibleCampaignIds)[0]:void 0,n=+e.responsibleCampaignIds[t];return{a:e.accountId,sId:e.id,qId:l.cQId,pUrl:decodeURIComponent(e.url),uuid:e.uuid,e:t,c:n}},tellParent:function(e){e="string"==typeof e?{action:e}:e,e.sId=this.config.id,window.parent.postMessage(e,"*")},tellBackend:function(e){if(!this.config.preCreationPreview&&!this.config.previewDebugger){e="string"==typeof e?{action:e}:e,u.extend(e,this.getTrackingData());var t=this.config.eventsUrl||r.EVENTS;u.post(t,JSON.stringify(e))}},addPage:function(e,t){var n={ctxt:e,data:t};return this.pages.push(n),e===o.QUESTION&&(n.question=n.data),n},showPageAtIndex:function(r){r=r||0;var i,s,a,u,c,f,p=this.pages[r];p&&(p.ctxt!==o.QUESTION?i=document.getElementById("t-"+p.ctxt):(i=document.getElementById("t-"+p.question.type+"-"+p.ctxt),l.cQId=p.question.id),a=document.getElementById("t-header"),c=document.getElementById("t-footer"),i&&c&&a&&(s=i.innerHTML,f=c.innerHTML,u=a.innerHTML,n.resetView(),n.setContent(t.template(s)(p),t.template(u)(p),t.template(f)(p)),this.currentPageIndex=r,p.ctxt===o.QUESTION&&this.trackEvent(e.QUESTION_SHOWN),p.ctxt===o.THANKYOU&&this.trackEvent(e.REACHED_THANKYOU)))},getPageForQuestion:function(e){for(var t=this.pages,n=this.pages.length,r=0;n>r&&(t[r].ctxt!==o.QUESTION||t[r].question.id!=e);r++);return r},processConfig:function(t){var r=0,s=this.config;if(u.extend(s,t),s.questions){this.pages=[],s.welcome&&this.addPage(o.WELCOME,{message:s.welcome,title:i.WELCOME_TITLE,survey:s});for(var a=0;a<s.questions.length;a++){var c=s.questions[a];if(c.textType=c.inputType,"number"===c.inputType?(c.inputType="text",c.textType="number"):"tel"===c.inputType?c.textType="Phone":"date"===c.inputType&&(c.inputType="text"),c.title=n.escapeHtml(c.statement),c.options)for(var f in c.options)c.options.hasOwnProperty(f)&&(c.options[f].name=n.escapeHtml(c.options[f].name),0===c.options[f].id&&(c.hasOtherOption=!0));c.survey=s,c.placeholder=c.placeholder||c.placeHolder,c.placeholder=n.escapeHtml(c.placeholder),this.addPage(o.QUESTION,c)}s.askEmail&&this.addPage(o.ASK_EMAIL,{title:i.ASK_EMAIL_TITLE,survey:s}),this.addPage(o.THANKYOU,{message:s.thankyou||i.THANKYOU,title:i.THANKYOU_TITLE,survey:s}),s.questions.length&&(s.questions[s.questions.length-1].isLast=!0),n.setTheme(s.theme,,s.cQId&&(r=this.getPageForQuestion(s.cQId)),this.showPageAtIndex(r),s.hideLogo?u(document.body).addClass("hide-logo"):u(document.body).removeClass("hide-logo"),this.trackEvent(e.SHOWN)}},fetchSurvey:function(e){var t=this;if(e.id){var n=e.questionsUrl||r.QUESTIONS;u.getJSON(n+"?a="+e.accountId+"&sId="+e.id,function(e){t.childDM.resolve("questions"),delete e.theme,delete e.logo,delete e.hideLogo,t.processConfig(e)})}},showDropdownSelect:function(){document.getElementById("dropdown-select-box").classList.add("is-selected")},hideDropdownSelect:setDropdownSelect:function(e){var t,n=e.target,r=n.parentElement,i=document.getElementById("dropdown-select"),o=-1!==r.className.indexOf("multiple");if(e.stopPropagation(),!o){var s=[].slice.call(r.children);s.forEach(}t=n.getAttribute("data-index"),i.options[t].selected=!i.options[t].selected,i.options[t].selected?n.classList.add("selected"):o&&n.classList.remove("selected"),o||(document.getElementById("selected-option").innerHTML=i.options[t].selected?i.options[t].innerHTML:i.options[0].innerHTML,this.hideDropdownSelect()),this.onChange(e,i)},setRating:function(t){var n=t.target.getAttribute("data-rating"),r=document.getElementById("rating-response");r&&(n||(n=""),u(".rating span").removeClass("selected"),u(t.target).addClass("selected"),r.value=n,this.trackEvent(e.ATTEMPTED))},addListeners:function(e,t){e=e||document,u(e).click(t.onClick),u(e).change(t.onInputChange),window.onhashchange=t.onHashChange,window.onmessage=t.onMessage},cacheResource:function(e,t){var n=document.getElementById("cache-frame").contentWindow.document;if(!n.body)return void setTimeout(function(){l.cacheResource(e,t)},100);if("css"===t){var r=document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),n.getElementsByTagName("head")[0].appendChild(r)}else if("image"===t){var i=document.createElement("img");i.setAttribute("src",e),n.getElementsByTagName("body")[0].appendChild(i)}},updateCustomTheme:function(e){document.getElementById("theme").href="",document.getElementById("custom-theme-css").innerHTML=e},onDependencyResolved:addResponseOfOtherOption:function(e){var t,n=e[l.cQId],r=this.pages[this.currentPageIndex].question;if(n&&r&&r.hasOtherOption){for(t=0;t<n.length;t++)if("0"===n[t]){n[t]={id:"0",value:document.getElementById("other-input").value};break}return n}},toggleOtherInputBox:function(e,t){var n=document.getElementById("other-input");n&&(e?(n.style.display="block",t||n.scrollIntoView()):n.style.display="none")},onChange:function(t,n){this.trackEvent(e.ATTEMPTED),this.showOtherInputBox(t.target,n)},showOtherInputBox:function(e,t){var n=t||e;if("checkbox"===n.type&&"0"===n.value)this.toggleOtherInputBox(n.checked,!1);else if("radio"===n.type)this.toggleOtherInputBox("0"===n.value&&"0"===n.getAttribute("id"),!1);else if("select-one"===n.type)this.toggleOtherInputBox("0"===n.value,!1);else if("select-multiple"===n.type)for(var r=n.options,i=0;i<r.length;i++)if("0"===r[i].value){var o="0"===e.getAttribute("value");this.toggleOtherInputBox(r[i].selected,!o)}}};return window.survey=l,window.utils=n,l}(e,t,s,a,u,c,n,l),p=function(e,t,n,r,i){var o={onHashChange:onMessage:function(t){if(""!==t.origin&&t.data){var n=t.data,r=window.JSON;try{n="string"==typeof n?r.parse(n):n}catch(t){return}var i=n.action,s=o.parentFrame.on[i];s&&s.call(e,n)}},onDomEvent:function(t){var n,r,i=t.target;"change"===t.type?n="change":(o.domEvents.documentClick.apply(e,[].slice.call(arguments)),n="click",i.id&&(n=i.id)),r=o.domEvents[n],r&&r.apply(e,[].slice.call(arguments))},parentFrame:{on:{}},domEvents:{change:click:next:function(){var r=this.pages[this.currentPageIndex],o=this.getErrorMsg(r),s=this.pages[e.currentPageIndex].data.isLast;return o?(n.showErrorMsg(o),void this.trackEvent(t.ATTEMPTED)):(this.trackEvent(s?t.COMPLETED:r.ctxt===i.ASK_EMAIL?t.EXTRA_DATA:r.ctxt===i.WELCOME?t.ATTEMPTED:t.SUBMITTED),this.showPageAtIndex(this.currentPageIndex+1),!1)},skip:function(){return this.showPageAtIndex(this.currentPageIndex+1),this.trackEvent(t.ATTEMPTED),!1},documentClick:,on:{}};return o.on[t.COMPLETED]=o.on[t.SUBMITTED]=function(){e.responses=e.responses||{};var t=n.unserialize(r("form").serializeArray());return this.addResponseOfOtherOption(t),"undefined"==typeof t[e.cQId]&&(t[e.cQId]=[""]),r.extend(e.responses,t),{responses:t}},o.on[t.EXTRA_DATA]=function(){return{ed:n.unserialize(r("form").serializeArray())}},o.on[t.ATTEMPTED]=function(){return this.isAttempted?void 0:(this.isAttempted=!0,!0)},o.parentFrame.on[t.CLOSED]=function(e){this.trackEvent(t.CLOSED,e.sId)},o.parentFrame.on[t.RESOURCE_CACHE_REQUIRED]=o.parentFrame.on[t.UPDATE_THEME]=o.onClick=o.onDomEvent,o.onInputChange=o.onDomEvent,o}(f,e,s,i,c),d=f,i,p)}();