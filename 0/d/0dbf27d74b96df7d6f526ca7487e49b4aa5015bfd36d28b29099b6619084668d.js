"use strict";(self.mvWrapperJsonp=self.mvWrapperJsonp||[]).push([[706,999],{6500:(e,t,s)=>{s.r(t),s.d(t,{GPP:()=>C});var i=s(8473),n=s(3583),o=s(6643),a=s(4441),r=s(3528),p=s(2932),l=s(6921),c=(e,t,s)=>new Promise(((i,n)=>{var o=e=>{try{r(s.next(e))}catch(e){n(e)}},a=e=>{try{r(s.throw(e))}catch(e){n(e)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,a);r((s=s.apply(e,t)).next())}));let d,u;function h(){return c(this,null,(function*(){if(!u){const{GDPR:e}=yield Promise.all([s.e(1011),s.e(8262)]).then(s.bind(s,1353));u=new e}return u}))}var P=((P||{}),g=((g||{}),A=s(9399);const m=new Map;m.set("US",P.US);for(const e in A.g)m.set(e,P.EU);var S=(e=>(e.NOT_APPLICABLE="BqgAAAAAAgA",e.APPLIES="BqgAAAAAAgA",e.NOTIFIED="BVQqAAAAAgA",e.OPTED_OUT="BVQVAAAAAgA",e))(S||{}),v=s(5914),b=(e,t,s)=>new Promise(((i,n)=>{var o=e=>{try{r(s.next(e))}catch(e){n(e)}},a=e=>{try{r(s.throw(e))}catch(e){n(e)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,a);r((s=s.apply(e,t)).next())}));s(5258);const y={[l.HW.NOT_APPLICABLE]:S.NOT_APPLICABLE,[l.HW.APPLIES]:S.APPLIES,[l.HW.NOTIFIED]:S.NOTIFIED,[l.HW.OPTED_OUT]:S.OPTED_OUT};const E=[v.y.CA,v.y.VA,v.y.CO,v.y.CT,v.y.UT],O=class{constructor(e){this.model=e,this.enableGdpr=!1,this.cmpAPI=new i.W4(n.Lx,n.mY),this.cookie=new a.V({name:"am_gpp",sameSite:o.D.lax,maxAge:n.TJ}),this.cmpVersionCookie=new a.V({name:"am_gpp_cmp_version",sameSite:o.D.lax,maxAge:n.TJ}),this.setableSections=new Set([i.An,i.E,i.n1]),this.applicableSectionsSet=new Set,this.cookie.value&&this.cmpVersionCookie.value===n.ZK&&(r.ZP.custom(["debug","gpp"],"GPP.constructor:",this.cookie.value),this.cmpAPI.setGppString(this.cookie.value))}atic init(e){return b(this,null,(function*(){r.ZP.custom(["debug","gpp"],"STATIC: GPP.init");const t=new O(e);l.Yg.init(e,t);const s=m.get(t.model.geoLoc.country_code);switch(s){case P.US:yield t.loadUsModal();break;case P.EU:yield t.loadEUModals()}return s!==P.EU&&window.dispatchEvent(new CustomEvent("mediavineCmp",{detail:"gdprDoesNotApply"})),t}))}isUSNatV1OptOut(){return this.cmpAPI.getSectionStringById(g.USPNATV1)===S.OPTED_OUT}setTcfEuV2(e){r.ZP.custom(["debug","gpp"],"PUBLIC: GPP.setTcfEuV2:",e),this.cmpAPI.setSectionString(i.n1.NAME,e),this.setCookie()}setUsp(e){r.ZP.custom(["debug","gpp"],"PUBLIC: GPP.setUsp",e),this.setUspV1(e),this.stateIsOptOut(this.model.geoLoc.state)?(this.setUsNatV1(y[e]),this.setApplicableSections([g.USPNATV1]),this.setGAMUspValues(e)):this.setUsNatV1(y[l.HW.NOT_APPLICABLE]),this.setCookie()}loadUsModal(){return b(this,null,(function*(){r.ZP.custom(["debug","gpp"],"GPP.loadUsModal"),this.stateIsOptOut(this.model.geoLoc.state)&&(yield this.loadOptOutModal()),this.setCookie()}))}loadOptOutModal(){return b(this,null,(function*(){const e=yield function(e){return c(this,null,(function*(){if(!d){const{CPA:t}=yield Promise.all([s.e(8110),s.e(8982),s.e(2221)]).then(s.bind(s,1978));d=new t(e)}return d}))}(this.model);yield e.initCPA()}))}loadEUModals(){return b(this,null,(function*(){r.ZP.custom(["debug","gpp"],"GPP.loadEUModals"),this.enableGdpr=!0;const[{TCF:e},t]=yield Promise.all([yield Promise.all([s.e(1011),s.e(8262)]).then(s.bind(s,9265)),h()]);this.onReady=t.onReady.bind(t),this.onNoGDPRConsent=t.onNoConsent.bind(t),O.gppGAMApplicable=1,this.onReady((()=>{O.gppGAMDeclinedPermission=0,r.ZP.custom(["debug","gpp"],"GPP.onReady")})),this.onNoGDPRConsent((()=>{O.gppGAMDeclinedPermission=1,r.ZP.custom(["debug","gpp"],"GPP.onNoGDPRConsent"),(0,p.o)(this.model)})),this.setApplicableSections([g.TCFEUV2]),yield e.init(this),yield t.initModal(),this.setCookie()}))}setApplicableSections(e){r.ZP.custom(["debug","gpp"],"GPP.setApplicableSections:",e),e.forEach((),this.cmpAPI.setApplicableSections([...this.applicableSectionsSet.values()]),O.gppGAMApplicableSections=[...this.applicableSectionsSet.values()].join(",")}setUspV1(e){r.ZP.custom(["debug","gpp"],"GPP.setUspV1:",e),this.cmpAPI.setSectionString(i.E.NAME,e)}setUsNatV1(e){r.ZP.custom(["debug","gpp"],"GPP.setUsNatV1:",e),this.cmpAPI.setSectionString(i.An.NAME,e)}setGAMUspValues(e){switch(e){case l.HW.NOT_APPLICABLE:O.gppGAMApplicable=0,O.gppGAMDeclinedPermission=0;break;case l.HW.APPLIES:case l.HW.NOTIFIED:O.gppGAMApplicable=1,O.gppGAMDeclinedPermission=0;break;case l.HW.OPTED_OUT:O.gppGAMApplicable=1,O.gppGAMDeclinedPermission=1}}triggerGppStringUpdate(){for(const e of this.setableSections){const t=this.cmpAPI.getFieldValue(e.NAME,"Version");if(t)return this.cmpAPI.setFieldValue(e.NAME,"Version",t)}}setCookie(){this.triggerGppStringUpdate();const e=this.cmpAPI.getGppString();r.ZP.custom(["debug","gpp"],"GPP.setCookie:",e),this.cookie.set(e),this.cmpVersionCookie.set(n.ZK),this.triggerLoadedStatus()}triggerLoadedStatus(){r.ZP.custom(["debug","gpp"],"GPP.triggerLoaded");try{this.cmpAPI.setCmpStatus(i.Dc.LOADED),this.cmpAPI.setSignalStatus(i.HR.READY)}catch(e){console.warn("GPP cmpApi callback failed:",e)}};let C=O;C.gppGAMApplicableSections="0",C.gppGAMApplicable=0,C.gppGAMDeclinedPermission=0},2932:(e,t,s)=>{s.d(t,{o:()=>a});var i=s(6600),n=s(4530),o=s(3528);function a(e){if(i.Wu.id){(0,n.i)(i.Wu.id).then((t=>{const s=`https://securepubads.g.doubleclick.net/user_data_deletion?ppid=${t}&iu=${e.offering.gam_network_code}`;fetch(s,{method:"GET"}).then(().catch(()}))}}},6921:(e,t,s)=>{s.d(t,{HW:()=>p,Yg:()=>d,qb:()=>a});var i=s(4441),n=s(6643),o=s(5595),a=((a||{});var r,p=((r=p||{})[r.NOT_APPLICABLE="1---"]="NOT_APPLICABLE",r[r.APPLIES="1NNY"]="APPLIES",r[r.NOTIFIED="1YNY"]="NOTIFIED",r[r.OPTED_OUT="1YYY"]="OPTED_OUT",r);const l=(0,o.DY)("test","ccpa"),c=class{static init({cpa:e},t){this.gpp=t,c.cpaStatus="1"===e?"1":"0",window.__uspapi=c.__uspapi,window.addEventListener("message",c.handlePostMessage);const s=c.cookie.value,i=s&&s[0]===c.VERSION.toString();i&&(this.uspString=c.cookie.value),i||"1"!==c.cpaStatus&&!l?i&&"0"===c.cpaStatus&&!l?this.cpaNotCurrentlyApplicable():c.gppSetUspV1():this.cpaAppliesToUser()}static __uspapi(e,t,s){u({command:e,version:t})&&s(P(c.uspString),!0)}static cpaNotCurrentlyApplicable(){c.setDoesNotApply(),c.gppSetUspV1()}static cpaAppliesToUser(){c.setBaseApplies(),c.setCookie()}static userHasReceivedExplictNotice(){c.setNoticeGiven(),c.setCookie()}tatic gppSetUspV1(){return e=this,t=null,s=new Promise(((i,n)=>{var o=e=>{try{r(s.next(e))}catch(e){n(e)}},a=e=>{try{r(s.throw(e))}catch(e){n(e)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,a);r((s=s.apply(e,t)).next())}));var e,t,s}static handlePostMessage(e){let t;try{t=JSON.parse(e.data)}catch(e){}if(h(t)){const s=JSON.stringify(g(t,c.uspString));e.source.postMessage(s,e.source)}}static setCookietatic get uspString(){const{VERSION:e,explicitNoticeStatus:t,userOptOutStatus:s,lspaStatus:i}=c;return`${e}${t}${s}${i}`}static set uspString(e){const[t,s,i,n]=e;t===c.VERSION.toString()&&(c.explicitNoticeStatus=s,c.userOptOutStatus=i,c.lspaStatus=n)}static setDoesNotApply(){c.uspString=p.NOT_APPLICABLE}static setBaseApplies(){c.uspString=p.APPLIES}static setNoticeGiven(){c.uspString=p.NOTIFIED};let d=c;d.VERSION=1,d.cpaStatus="0",d.explicitNoticeStatus="-",d.userOptOutStatus="-",d.lspaStatus="-",d.cookie=new i.V({name:"usprivacy",sameSite:n.D.lax});const u=h=e=>!!e&&"getUSPData"===e.command&&e.version===d.VERSION&&e.callId,P=g=(e,t)=>({__uspapiReturn:{returnValue:t,callId:e.callId,success:!0}})},2110:(e,t,s)=>{s.d(t,{f:()=>i});var i=((i||{})},6600:(e,t,s)=>{s.d(t,{Wu:()=>o});var i=s(4441);class n extends i.V{constructor(e="am_tokens"){super({name:e})}get id(){if(this.value)return this.value.mv_uuid}const o=new n},4530:(e,t,s)=>{s.d(t,{i:()=>n});var i=function n(e){return i(this,null,()}},5629:(e,t,s)=>{s.r(t),s.d(t,{OUTSTREAM_REFRESH_TIME:()=>P,OutstreamRenderer:);var i=s(3583),n=s(2110),o=s(2321),a=s(8982),r=s(7475),p=s(9225),l=s(3528),c=s(1507),d=s(6497),u=s(6039),h=s(5077);const P=31;class g{constructor(e){this.slot=e,this.onVisibilityChange=e=>{if(this.player){if(this.player.playerState===n.f.init)return;e?this.player.play():this.player.pause()}},this.onImpression=()=>{o.Z.trigger(o.Z.events.registerRefreshable,this.slot)},this.onAdStart=(0,p.r)((({player:e}=this)=>()=>{const t=this.createMetricsObject();window.$adManagementConfig.metricsTracker.record("OutstreamAdStart",t,.1),setTimeout((,1e3)})),this.onAdErrorHandler=e=>{var t;const s=e.getError();l.ZP.debug(s),this.bidResponse&&(o.Z.trigger(o.Z.events.outstreamAdError,{adError:s,bidResponse:this.bidResponse,outstreamFloor:r.CP.getBidderFloor(this.slot.model,this.bidResponse.bidder,h.D.outstream,this.slot.adUnitId)}),null==(t=this.player)||t.cleanup(),this.cleanup(),a.ZP.tryADifferentBidResponse(this.slot))},this.onAdCanPlayHandler=e=>{this.bidResponse&&o.Z.trigger(o.Z.events.outstreamAdCanPlay,this.bidResponse)},this.onAdStartHandler=e=>{this.bidResponse&&o.Z.trigger(o.Z.events.outstreamAdStart,this.bidResponse)},this.onAdComplete=()=>{const e=this.createMetricsObject();window.$adManagementConfig.metricsTracker.record("OutstreamAdComplete",e,.1)},this.onAdsComplete=()=>{var e;this.slot.refreshes===this.refreshCycle&&o.Z.trigger(o.Z.events.shortCircuitRefresh,this.slot),null==(e=this.player)||e.cleanup(),this.cleanup()},this.reportCreativePlay=(e="https://plays.mediavine.com/record",t=.1)=>()=>{if(this.bidResponse){if(Math.random()<=t){const t=new URL(e);t.searchParams.append("creativeId",this.bidResponse.creativeId),t.searchParams.append("bidder",this.bidResponse.s2sBidder||this.bidResponse.bidder),d.Z.fetch(t.toString(),"GET").catch(()}}else l.ZP.debug("no bidResponse for reportCreativePlay")},this.slot=e,o.Z.on(o.Z.events.slotRefreshed,(e=>{var t;e===this.slot&&(this.cleanup(),null==(t=this.player)||t.cleanup())}))}oadAd(e){return t=this,i=null,n=function*(){var t;if(l.ZP.debug("Outstream bid won:",e),this.slot.refreshTime=P,this.bidResponse=e,!this.player){const{ImaPlayer:e}=yield s.e(3359).then(s.bind(s,3359)),t=this.slot.wrapper.querySelector(`#${this.slot.id}`);this.container=A(t);const i=m(this.slot,this.container);this.player=yield e.new(i),this.registerEventHandlers()}this.refreshCycle=this.slot.refreshes,yield null==(t=this.player)?void 0:t.initVideoAd(e),this.styleOnLoadAd(),o.Z.trigger(o.Z.events.resetRefreshable,this.slot)},new Promise(();var t,i,n}cleanupegisterEventHandlers({player:e}=this){if(e){const{events:t}=e;e.onEvent(t.adError,this.onAdErrorHandler.bind(this)),e.onEvent(t.adCanPlay,this.onAdCanPlayHandler.bind(this)),e.onEvent(t.started,this.onAdStartHandler.bind(this)),e.onEvent(t.started,this.onAdStart()),e.onEvent(t.started,this.reportCreativePlay().bind(this)),e.onEvent(t.adsCompleted,this.onAdsComplete.bind(this)),e.onEvent(t.adCompleted,this.onAdComplete.bind(this)),e.onEvent(t.visibilityChange,this.onVisibilityChange.bind(this)),e.onEvent(t.impression,this.onImpression.bind(this)),this.slot.registerOutstreamEvents(e)}}createMetricsObject(){var e,t,s;const i=this.slot.id;return{adunit:i&&i.replace(/_[0-9]+|_refresh/g,""),adUnitFull:i,bidder:(null==(e=this.bidResponse)?void 0:e.s2sBidder)?`${this.bidResponse.s2sBidder}_s2s`:null==(t=this.bidResponse)?void 0:t.bidder,creativeId:String(null==(s=this.bidResponse)?void 0:s.creativeId),domain:window.location.hostname.replace("www.",""),deviceType:u.A.deviceType,wrapperVersion:window.$adManagementConfig.web.model.versionGroup.version,wrapperGroup:window.$adManagementConfig.web.model.versionGroup.name}}styleOnCleanup(){this.container.classList.replace("active","inactive")}const A=e=>{const t=document.createElement("div");return t.className="mv-outstream-container active",e.insertAdjacentElement("beforebegin",t),t},m=(e,t)=>{var s;const[i,n]=(0,c.f)(e,null==(s=e.target)?void 0:s.parentElement);return{container:t,autoplay:!0,muted:!0,height:n,width:i}}}}]);