TRC.callbacks.recommendations_1({"trc":{"si":"83c88cbd21b17704860ab039a1464751","sd":"v2_83c88cbd21b17704860ab039a1464751_70aa1d80-4fc3-434f-88cb-aad51826fdbc-tuctcc3d587_1707757575_1707757575_CIi3jgYQruxPGJC7oPLZMSABKAEwQzjylQ1A_YoQSLWW4QNQ____________AVgAYABo2bLY--Gc24UfcAA","ui":"70aa1d80-4fc3-434f-88cb-aad51826fdbc-tuctcc3d587","plc":"DESK","wi":"5154581048968210182","cc":"ES","route":"AM:IL:V","el2r":["bulk-metrics","debug","social","abtests","metrics","perf","supply-feature"],"uvpw":"1","pi":"1308206","cpb":"EhIyMDI0MDIxMi04LVJFTEVBU0UYASAAKhZ0YWJvb2xhc3luZGljYXRpb24uY29tMgh0cmMwMDI1NDiAhM6aCUDylQ1I_YoQULWW4QNY____________AWMI0DcQn08YMGRjCNcWENUfGCNkYwjcChCgEBgWZGMI0gMQ4AYYCGRjCJYUEJocGBhkYwiqHBCLXxgJZGMI9BQQnh0YH2RjCKQnEIo1GC9keAGAAQWIAVWQARmYAZ63ovLZMQ","f":{"Below Home Thumbnails":{"fcss":".syndicatedItem .branding-inner {  font-size: 11px !important;}.videoCube .video-label-box .branding.composite-branding {  display: block !important;}.video-description.trc_ellipsis {  display: none !important;}","nbdt":"2000","css":"{FEED_MAIN_CONTAINER_ID_ATT}{position:relative;margin-top:3px;-webkit-text-size-adjust:100%;clear:both;padding:0;background-color:transparent}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-feed-header{padding:0 5px 10px;background:0;box-sizing:border-box}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-feed-header-logo{height:11px;width:76px;display:inline-block;margin:0;background-image:url(//cdn.taboola.com/static/f8/f89e1763-220d-4e09-ba69-9e040548fb7a.svg);background-repeat:no-repeat;background-position:0 0;background-size:contain}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-feed-header.tbl-header-with-text.tbl-logo-right-position{padding:0 5px 10px 0}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-feed-header.tbl-header-with-text.tbl-logo-left-position{padding:0 0 10px 5px}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-feed-header.tbl-header-with-text{display:table;width:100%}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-header-with-text .tbl-feed-header-logo{display:table-cell;background-position-y:100%}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-header-with-text .tbl-feed-header-text{display:table-cell;width:calc(100% - 76px);word-break:break-word}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-logo-left-position{direction:ltr}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-header-with-text.tbl-logo-left-position .tbl-feed-header-text{text-align:right}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-logo-right-position{direction:rtl}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-header-with-text.tbl-logo-right-position .tbl-feed-header-text{text-align:left;direction:ltr}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-feed-card{margin-bottom:10px;background-color:transparent;overflow:hidden;padding-bottom:0}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-loading-spinner{margin-bottom:10px}{FEED_MAIN_CONTAINER_ID_ATT}.tbl-feed-frame-DIVIDER .tbl-feed-card{box-shadow:0 1px #e6ecf0;margin-bottom:22px}{FEED_MAIN_CONTAINER_ID_ATT}.tbl-feed-frame-FRAME .tbl-feed-card{box-shadow:0 2px 5px 0 #e6ecf0;margin:0 2px 22px 2px}{FEED_MAIN_CONTAINER_ID_ATT}.tbl-feed-frame-SEMI_FRAME .tbl-feed-card{overflow:visible;position:relative}{FEED_MAIN_CONTAINER_ID_ATT}.tbl-feed-frame-SEMI_FRAME .tbl-feed-card::after,{FEED_MAIN_CONTAINER_ID_ATT}.tbl-feed-frame-SEMI_FRAME .tbl-feed-card::before{content:\"\";width:100%;left:0;position:absolute;display:block}{FEED_MAIN_CONTAINER_ID_ATT}.tbl-feed-frame-SEMI_FRAME .tbl-feed-card::after{height:50px;box-shadow:0 2px 5px 0 #e6ecf0;bottom:0}{FEED_MAIN_CONTAINER_ID_ATT}.tbl-feed-abp{max-width:770px;margin:3px auto 0}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-feed-card .video-label-box .video-description{margin-top:2px}@media screen and (max-width:480px){{FEED_MAIN_CONTAINER_ID_ATT}.tbl-feed-full-width{padding:0px 8px}{FEED_MAIN_CONTAINER_ID_ATT} .tbl-feed-card{margin-bottom:5px}{FEED_MAIN_CONTAINER_ID_ATT} .trc-widget-footer,{FEED_MAIN_CONTAINER_ID_ATT} .trc_header_ext{padding-right:3px}{FEED_MAIN_CONTAINER_ID_ATT}.tbl-feed-frame-DIVIDER .tbl-feed-card{margin-bottom:16px}{FEED_MAIN_CONTAINER_ID_ATT}.tbl-feed-frame-FRAME .tbl-feed-card{margin:0 0 16px 0}}","fti":"delta-override:10831570:PUBLISHED","ww":"false","hfu":"true","udv":"3","prf":"false","fv":"false","vsm":{"scriptUrlTemplate":"//15.taboola.com/tb?oid=15&pubnm={PUBLISHER_NAME}&unitType={UNIT_TYPE}&tbloc={UNIT_LOCATION}&pageType={SOURCE_PAGE_TYPE}&pstn={PLACEMENT_NAME}&uuip={UNIFIED_PLACEMENT_NAME}&cisrf={REFERRER}&cirf={PAGE_URL}&encoded=1&uid={USER_ID}&variant={VARIANT}&callback={CALLBACK_NAME}&cb={CACHE_BUSTER}&tagid={TAG_ID}&cntry={COUNTRY}&platform={PLATFORM}&sesid={SESSION_ID}&itemid={SOURCE_ITEM_ID}&viewid={VIEW_ID}&geolat={GEO_LAT}&geoing={GEO_ING}&deviceifa={DEVICE_IFA}&appid={APP_ID}&sd={SESSION_DATA}&ri={REQUEST_ID}&appname={APP_NAME}&cdb={CONSENT_DAISY_BIT}&gdprApplies={GDPR_APPLIES}&rid={EXTERNAL_VIEW_ID}&sii={SOURCE_ITEM_ID_INT}&oee={OPEN_EXCHANGE_ENABLED}&tpubid={PUBLISHER_ID}&uis={USER_ID_SOURCE}&fagg={FAGG}&ccpaDns={CCPA_DNS}&ccpaPrivacy={CCPA_PRIVACY}&region={REGION}&hasGDPRConsent={HAS_GDPR_CONSENT}&tcfVersion={TCF_VERSION}&cmpStatus={CMP_STATUS}&tnetid={TABOOLA_NETWORK_ID}&prcnt={AB_TEST_PERCENT}&layer={AB_TEST_LAYER}&normp={NORM_PLATFORM}&gvv={GENIE_VIDEO_VARIANT}&gvv50={GENIE_VIDEO_50_VARIANT}&gvv61={GENIE_VIDEO_61_VARIANT}&gvv62={GENIE_VIDEO_62_VARIANT}","unitBootSrc":"//vidstat.taboola.com/lite-unit/1.0.42/lite-unit.min.js","liteUnitBootSrc":"//vidstat.taboola.com/lite-unit/1.4.0/Unit{{UNIT_TYPE}}{{PLATFORM}}.min.js","unitType":"244","platform":"1","fullyNormalizedPlatform":"1","country":"ES","unifiedPlacement":"Feed - Below Home Thumbnails","variant":"0|1","startFromSlider":"true","detachToSlider":"true","detachToSliderAnimation":"true","distanceRepeat":"0","midArticleAsFeed":"false","startCard":"1","maxVideoCards":"100","aggLevel":"1","sii":"5154581048968210182","oee":"true","tpubid":"1308206","uis":"2","ccpaDns":"false","ccpaPrivacy":"1---","region":"B","hasGDPRConsent":"true","tnetid":"1308196","gdprApplies":"true","unitFetcherResponse":"{\"tags\":[{\"dast\":\"V8-A0CLAakPGBwqfgjuhBIecDgUvFHdCkAAABgYID-AImMBhuHyzRya1aT0Vq0Gs7cypFt5dbsZs7ByrmbbCYmIyCR0WDjcJlGbs1qMlqLVsOZWzmyrdya3cw5WDl3k83EZAUcxnKZDGqBhGX2-w5CvttlEBVdb4vd4TR73oADTafD57rX636_u9jvdTtMp6fb5blr_G6_HAAAAAA8-P___4cAAAAAEAEAAABAAgAAAACFgAr_FgQuAAAAAGD4____1wCAzCFBHJaPy-y3O_wBAAAAAAQAAAAACYADipoSACYneyf-_________2MM0GfeyPj___-_YdAD4MEHwIMQAACArCEd2FcTj7C-4EQKWIswAgAAADA5JbhxZJJOULGo8v__328F4AoAQECjJ9KmeBbdQYm3MAAAAABjFuhh8fvNDrvG73aZ_________38z_2f-0QiVFH6kAVoo_FDzCwgAsOYXEACAzbgBAHgTACfoBMDqBMTsAAAAANz5____1wOCm41xuLGYLIuJY7cbjIazwcJi2CwXjtFstFsttqeFof9fTDi5sI-HsMx-30HId7sMoqLrbbE7nGbPQXzQMCwng2B-KFqy3C13q9FkMRotl5vdcDMa7I8ArQZoIgbL5WSymOxWo9VoM9yNZoMFCrgJomjJarlcrjab1Wo3WswGm-Vws0EUrVrNRpvBcDWbzHa71XAwXI5GiKIly91ytxpNFqPRcrnZDTejwRDB3GDhcIyMg7Vo5vGsRZvRzC0cbixuhcPkWgwns5nJ4nGLXh_Tx-MZuYa7LRIMWNmL5GmRTkS-jc24sQ02DuPI4fHMfIvhxmVy-IaT0WS2cs4sYonmZJFOZJd9cbMxDjcWk2Uxcex2g9FwNlhYDJvlwjGajXarxb43WDgcI-NgLZp5PGvRZjRzC4cbi1vhMLkWw8lsZrJ43KLXx_TxeEau4W7f2A12u9VutVvtG7vBbrfarXarfYfJ9Ex9zkbldTz0qBze3lCmtjkNCpfB4j2qV-fZ0Vjwm31Hp8zrlRZ1Rr_f7_f7_X6_3-83aD0Hs0HhWyZmZlut41hGq5rHwaCIJYKLdCL2e90O01tl95mdnqPZ73U7TB-_2yKWKE0X6URf9LtdhofP5a-IJYLTRToR-t0ui_qPGmK0mws3c8VmMJfsVgkAAAAAAAAAwBJMM90EAAAAwMmAZpvlZLVOB7IaDEa71XIBTNi76AIGAQAAAAAA2HWECHxSVntuUKyxxy7Y73U7TG-V3Wd2eo5mv9ftMH38bisDmLAnYbbZZwSxVqtlDQAAQAAbAABAADfdeAsQivv___8fBwAAQEYOPQAAAPp9QFYPXCj1wo__AFSItVqtbjfWarUCFsRislpO4P___z8!\",\"url\":\"cmTag.set(\\\"player.settings.unitFetcherWfRes\\\", \\\"eBdjDTE8clZySXV+chguDSQ+BAUsHConJE57TXB+cgMzECI7PiUlW39jZUBjCiFwahdjCTVwajccVWcxI057InRrY11zSnIPfE4yHmdoCzFtWychclYaJGlwNA4yW38JDUBjCilwajccVWc3IE57Ij5wNQVjQ3dnZ0BjHyRwak5xW2lwOQtjQyMzPB8kBGkpcgkoW39kZ0BjHyRwak5xW2lwOQtjQyMzPB8kBGkpcgkoW39gZlxtWyMzclZjSWd+cgUmW380MQAyHDh+K04kEGdoYlpwVWc0MU57W3VwfE4oHmdoNg0tCiAvfBdjHCxwal53SmlwNg1jQ2dickBjECJwagogFTY3LUA6WyA7clZ2SmlwNg1jQ2dickBjECJwagogFTY3LUA6WyA7clZ2TGlwNg1jQ2dickBjECJwagogFTY3LUA6WyA7clZzTnF+cgogW39wYE5tWyw1clYnGCkhNRFtAmc3OU57QXB+cgogW39wYE5tWyw1clYnGCkhNRFtAmc3OU57SHFrfE4nGGdoclxjVWc7N057HyQ+Iwk8VT5wNQVjQ31kfE4nGGdoclxjVWc7N057HyQ+Iwk8VT5wNQVjQ3RnYEBjHyRwak5xW2lwOQtjQyMzPB8kBGkpcgkoW39gZ1RtWyMzclZjSWd+cgUmW380MQAyHDh+K04kEGdoYl10VWc0MU57W3VwfE4oHmdoNg0tCiAvfBdjHCxwal10SGlwNg1jQ2dhckBjECJwagogFTY3LUA6WyA7clZzSHJ+cgogW39wYE5tWyw1clYnGCkhNRFtAmc3OU57S31jfE4nGGdoclxjVWc7N057HyQ+Iwk8VT5wNQVjQ3dqYkBjHyRwak5xW2lwOQtjQyMzPB8kBGkpcgkoW39gaF9tWyMzclZjSWd+cgUmW380MQAyHDh+K04kEGdoYlR0VWc0MU57W3VwfE4oHmdoNg0tCiAvfBdjHCxwal55T2lwNg1jQ2dickBjECJwagogFTY3LUA6WyA7clZzQX1+cgogW39wYE5tWyw1clYnGCkhNRFtAmc3OU57S3dnfE4nGGdoclxjVWc7N057HyQ+Iwk8VT5wNQVjQ3drYEBjHyRwak5xW2lwOQtjQyMzPB8kBGkpcgkoW39jZl9tWyMzclZjSWd+cgUmW380MQAyHDh+K04kEGdoY1ptWyMzclZjSWd+cgUmW380MQAyHDh+K04kEGdoYl54VWc0MU57W3VwfE4oHmdoNg0tCiAvfBdjHCxwal51SGlwNg1jQ2dickBjECJwagogFTY3LUA6WyA7clZwTnJ+cgogW39wYE5tWyw1clYnGCkhNRFtAmc3OU57S3FgfE4nGGdoclxjVWc7N057HyQ+Iwk8VT5wNQVjQ3RlaUBjHyRwak5xW2lwOQtjQyMzPB8kBGkpcgkoW39gZFttWyMzclZjSGd+cgUmW380MQAyHDh+K04kEGdoYVRyVWc0MU57W3VwfE4oHmdoNg0tCiAvfBdjHCxwal50S2lwNg1jQ2dickBjECJwagogFTY3LTFtWyIlMU57FzA+PEBjEDYWBi4zGCs2Aw0nHDErEwMvDSQ7PgUvHhA8OwIuDisBNQssHCsmclYnGCkhNRE8UA==\\\");var isApp = false;\\n\\ncmTag.set('version', '23_2_8');\\ncmTag.set('player.versions.vplayer', 'v15.9.7');\\n\\ncmTag.set('sync', 'https://am-match.taboola.com/sync?dast=V8-A0CLAakPGBwqfgjuhBIecDgUvFHdCkAAABgYID-AImMBhuHyzRya1aT0Vq0Gs7cypFt5dbsZs7ByrmbbCYmIyCR0WDjcJlGbs1qMlqLVsOZWzmyrdya3cw5WDl3k83EZAUcxnKZDGqBhGX2-w5CvttlEBVdb4vd4TR73oADTafD57rX636_u9jvdTtMp6fb5blr_G6_HAAAAAA8-P___4cAAAAAEAEAAABAAgAAAACFgAr_FgQuAAAAAGD4____1wCAzCFBHJaPy-y3O_wBAAAAAAQAAAAACYADipoSACYneyf-_________2MM0GfeyPj___-_YdAD4MEHwIMQAACArCEd2FcTj7C-4EQKWIswAgAAADA5JbhxZJJOULGo8v__328F4AoAQECjJ9KmeBbdQYm3MAAAAABjFuhh8fvNDrvG73aZ_________38z_2f-0QiVFH6kAVoo_FDzCwgAsOYXEACAzbgBAHgTACfoBMDqBMTsAAAAANz5____1wOCm41xuLGYLIuJY7cbjIazwcJi2CwXjtFstFsttqeFof9fTDi5sI-HsMx-30HId7sMoqLrbbE7nGbPQXzQMCwng2B-KFqy3C13q9FkMRotl5vdcDMa7I8ArQZoIgbL5WSymOxWo9VoM9yNZoMFCrgJomjJarlcrjab1Wo3WswGm-Vws0EUrVrNRpvBcDWbzHa71XAwXI5GiKIly91ytxpNFqPRcrnZDTejwRDB3GDhcIyMg7Vo5vGsRZvRzC0cbixuhcPkWgwns5nJ4nGLXh_Tx-MZuYa7LRIMWNmL5GmRTkS-jc24sQ02DuPI4fHMfIvhxmVy-IaT0WS2cs4sYonmZJFOZJd9cbMxDjcWk2Uxcex2g9FwNlhYDJvlwjGajXarxb43WDgcI-NgLZp5PGvRZjRzC4cbi1vhMLkWw8lsZrJ43KLXx_TxeEau4W7f2A12u9VutVvtG7vBbrfarXarfYfJ9Ex9zkbldTz0qBze3lCmtjkNCpfB4j2qV-fZ0Vjwm31Hp8zrlRZ1Rr_f7_f7_X6_3-83aD0Hs0HhWyZmZlut41hGq5rHwaCIJYKLdCL2e90O01tl95mdnqPZ73U7TB-_2yKWKE0X6URf9LtdhofP5a-IJYLTRToR-t0ui_qPGmK0mws3c8VmMJfsVgkAAAAAAAAAwBJMM90EAAAAwMmAZpvlZLVOB7IaDEa71XIBTNi76AIGAQAAAAAA2HWECHxSVntuUKyxxy7Y73U7TG-V3Wd2eo5mv9ftMH38bisDmLAnYbbZZwSxVqtlDQAAQAAbAABAADfdeAsQivv___8fBwAAQEYOPQAAAPp9QFYPXCj1wo__AFSItVqtbjfWarUCFsRislpO4P___z8!&excid=22&docw=0&cijs=1&nlb=false');\\n\\ncmTag.set(\\\"player.settings.kaxwnc\\\", 0);\\ncmTag.set(\\\"unitType\\\", \\\"FEED_MANAGER\\\");\\ncmTag.set(\\\"preset\\\", {\\n  \\\"level\\\": 1\\n});\\n\\ncmTag.set('liteUnitVersion', '4.7.8');\\ncmTag.set('player.versions.vplayer', 'v15.9.7');\\ncmTag.set('version', '33_7_7');\\ncmTag.set('player.settings.mintimwf', 5000);\\ncmTag.set('player.settings.dlyimpnonmoatrv', true);\\ncmTag.set('player.settings.frgtadpxls', 0);\\ncmTag.set('player.settings.slwcnctlngt', 10);\\ncmTag.set('player.settings.mnbfrsz', 0.25);\\ncmTag.set(\\\"player.settings.prftchmxlngth\\\", 15);\\ncmTag.set('player.settings.adtrgtcss', true);\\ncmTag.set('player.settings.prfrmncmsrmnts', true);\\ncmTag.set('player.settings.encwfrs', true);\\ncmTag.set('player.settings.prfrmdfl', 'javascript');\\ncmTag.set('elasticLogger.isActive', true);\\ncmTag.set('elasticLogger.maxEventsToLog', 500);\\ncmTag.set('player.settings.dpndonuntfrlgtoelstc', true);\\ncmTag.set(\\\"player.settings.updtcmpbfrwf\\\", false);\\ncmTag.set(\\\"components.adChoice.isActive\\\", false);\\ncmTag.set(\\\"player.settings.unitFetcherWfActive\\\", true);\\ncmTag.set(\\\"timeBetweenAds\\\", 0);\\ncmTag.set(\\\"canStartPlayer\\\", true);\\ncmTag.set('isAnimateOnClose', true);\\ncmTag.set('isToggleIframeContent', true);\\ncmTag.set('isPWOV', true);\\ncmTag.set('secondsToCloseGlobal', 2700);\\ncmTag.set('pubViewabilityPercent', 0);\\ncmTag.set('trcPerformanceMeasurementEnabled', true);\\ncmTag.set('pixels.onMaxNonRvVimpsInQueue.isFire', true);\\ncmTag.set('additionalCss', {\\n  'text-align': 'left'\\n});\\n\\ncmTag.set('player.urls.contentVideosLocation', '//vidstatb.taboola.com/vid');\\ncmTag.set('player.urls.contentImagesLocation', '//vidstatb.taboola.com/vid/img');\\ncmTag.set('unitsBaseUrl', '//vidstat.taboola.com/vpaid/units/');\\ncmTag.set('player.urls.vplayerLocation', '//vidstat.taboola.com/vpaid/vPlayer');\\ncmTag.set('bllblevt', '1,21,22,23,24,25,30,32,42,33,41,205');\\ncmTag.set('gaFactor', 100);\\n\\ncmTag.set(\\\"countryIsoCode\\\", \\\"esp\\\");\\ncmTag.set('player.settings.mxwrps', 0);\\ncmTag.set('adxThreshold', 3000);\\ncmTag.setByCondition({\\n  conditions: [{\\n    func: function(config) {\\n      return config.get('countryIsoCode') === 'tha' || config.get('country') === 'TH' || config.get('countryIsoCode') === 'ind' || config.get('country') === 'IN';\\n    }\\n  }],\\n  settings: {\\n    'pubId': 165757,\\n    'pubTagId': 946347,\\n    'preroll.pubId': 165757,\\n    'preroll.pubTagId': 946347,\\n    'midroll.pubId': 165757,\\n    'midroll.pubTagId': 946347,\\n    'postroll.pubId': 165757,\\n    'postroll.pubTagId': 946347\\n  }\\n});\\ncmTag.set('excoPlayerID', 'f8429544-6cd1-47c1-aa74-f85a3cbdd432');\\ncmTag.set('player.settings.cleanAdOnImp', true);\\ncmTag.set('player.settings.rtbmtfctr', 0);\\ncmTag.set('player.settings.dsblmt', true);\\ncmTag.set('player.settings.enblopp.58', true);\\ncmTag.set('player.settings.context', 'outstream');\\ncmTag.set('player.settings.nbladnoorgnc', true);\\n\\n\\n\\n  cmTag.set('pixels.url', '//am-vid-events.taboola.com/st');\\ncmTag.set('pixels.unitLoadedWithFill.isFire', false);\\ncmTag.set('fireLoadUnitPixelsFactor', 10);\\ncmTag.set(\\\"secondsToClose\\\", 120);\\ncmTag.set(\\\"adMaxPlaySeconds\\\", 210);\\ncmTag.set('player.settings.cntonvfrc', false);\\ncmTag.set('player.settings.mxemptwf', 5);\\ncmTag.set('player.settings.ltmxemptwf', 5);\\ncmTag.set('player.settings.erlyai', true);\\ncmTag.set(\\\"player.settings.timbtopps\\\", 5000);\\ncmTag.set('player.settings.frstlk', true);\\ncmTag.set('player.settings.frdmrvhpxls', 1);\\ncmTag.set('player.settings.frdqshpxls', 1);\\ncmTag.set('viewPercent', '50');\\ncmTag.set('timbtopps', 5000);\\ncmTag.set('cookieMatchActive', true);\\ncmTag.set('player.settings.max_ready_vpaid', 5);\\ncmTag.set('maxNonRvVimpsInQueue', 4);\\ncmTag.set('maxVimpsInQueue', 1);\\ncmTag.set('numOfWfUntilDcSwitch', 19);\\ncmTag.set('player.settings.rvfrquesttsemttr', 'any');\\ncmTag.set('pixels.overlayDetectedAfterImpression.factor', 20);\\ncmTag.set('clsDetector.isActive', true);\\n// Browser and OS wurfl\\ncmTag.set(\\\"wurfl.os.name\\\", \\\"Windows\\\");\\ncmTag.set(\\\"wurfl.os.version\\\", \\\"7\\\");\\ncmTag.set(\\\"wurfl.browser.name\\\", \\\"Firefox\\\");\\ncmTag.set(\\\"wurfl.browser.version\\\", \\\"45\\\");\\ncmTag.set(\\\"player.settings.wurfl.os.name\\\", \\\"Windows\\\");\\ncmTag.set(\\\"player.settings.wurfl.os.version\\\", \\\"7\\\");\\ncmTag.set(\\\"player.settings.wurfl.browser.name\\\", \\\"Firefox\\\");\\ncmTag.set(\\\"player.settings.wurfl.browser.version\\\", \\\"45\\\");\\n\\ncmTag.set('opps.detach.isFire', true);\\ncmTag.set('opps.attach.isFire', true);\\ncmTag.set('player.settings.tglifrmcntndsplyactv', true);\\ncmTag.set('player.settings.aduntldflbfruntld', true);\\ncmTag.set('player.settings.dtctprvtbrwsng', false);\\ncmTag.set('isUseNewViewabilityCalc', true);\\ncmTag.set('100viewPercent', 98);\\ncmTag.set('traceViewability100Seconds', 0);\\ncmTag.set('isChangePredictPointsWithAny', false);\\ncmTag.set('isCancelGetAdOnEligibilityLost.isActive', true);\\ncmTag.set('isCancelGetAdOnEligibilityLost.includeRVAny', true);\\ncmTag.set('isGetRv1OnlyForEligible.isActive', true);\\ncmTag.set('isGetRv1OnlyForEligible.delayPrediction', false);\\ncmTag.set('player.settings.vwclcflbkenbld', true);\\ncmTag.set('scrollEndTimeout', 500);\\ncmTag.set('player.settings.omid.isActive', true);\\n\\ncmTag.set('player.urls.organicContentVideosLocation', '//magazine-api.taboola.com/video-content');\\n\\n// Cookie sync predictor config\\ncmTag.set('predictors.time.cookieSync.isActive', true);\\ncmTag.set('predictors.time.cookieSync.lengthInSeconds', 20);\\ncmTag.set('predictors.time.cookieSync.repeat', 1);\\n\\ncmTag.set('components.CloseButtonView.delay', 0);\\n\\n\\ncmTag.push = cmTag.push || function() {};\\n\\ncmTag.set(\\\"player.settings.tmbtwfs\\\", function(successes, failures, store) {\\n  if (failures > 45) {\\n    return 999;\\n  }\\n  return store.get('time_between_waterfall');\\n});\\n\\n\\ncmTag.set('player.settings.mntmbtwfsf', function(successes, failures, store) {\\n  if (failures > 45) {\\n    return 999000;\\n  }\\n  return store.get('mintimwf');\\n});\\ncmTag.set('unitThrottlerFiltered', \\\"false\\\");\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n      key: 'preset.level',\\n      val: 1\\n    },\\n    {\\n      key: \\\"unitThrottlerFiltered\\\",\\n      val: true\\n    }\\n  ],\\n  settings: {\\n    'preset.level': 3\\n  }\\n});\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'countryIsoCode',\\n    val: 'bra'\\n  }],\\n  settings: {\\n    'player.settings.expxls.adimpression': 'https://sb.scorecardresearch.com/p?c1=2&c2=34311413&ns_ap_sv=2.1511.10&ns_type=hidden&ns_st_it=a&ns_st_sv=4.0.0&ns_st_ad=1&ns_st_sq=1&ns_st_id=%%impression_id%%&ns_st_ec=1&ns_st_cn=1&ns_st_ev=play&ns_st_ct=va00&ns_st_cl=%%duration%%&ns_st_pt=0&c3=2&c4=&c6=&ns_ts=%%timestamp%%',\\n    'player.settings.expxls.advideocomplete': 'https://sb.scorecardresearch.com/p?c1=2&c2=34311413&ns_ap_sv=2.1511.10&ns_type=hidden&ns_st_it=a&ns_st_sv=4.0.0&ns_st_ad=1&ns_st_sq=1&ns_st_id=%%impression_id%%&ns_st_ec=2&ns_st_cn=1&ns_st_ev=end&ns_st_ct=va00&ns_st_cl=%%duration%%&ns_st_pt=%%duration%%&c3=2&c4=&c6=&ns_ts=%%timestamp%%'\\n  }\\n});\\n\\n\\n\\n\\nif ('am' == 'sg' || 'am' == 'SG') {\\n  cmTag.set('player.settings.wf_base_path', '//sg-wf.taboola.com');\\n}\\n\\nif ('am' == 'hk' || 'am' == 'HK' || 'am' == 'ch' || 'am' == 'CH' || 'am' == 'us' || 'am' == 'US' || 'am' == 'la' || 'am' == 'LA') {\\n  cmTag.set('numOfWfUntilDcSwitch', 1);\\n  cmTag.set('player.settings.numOfWfUntilDcSwitch', 1);\\n}\\n\\nif ('am' == 'am' || 'am' == 'AM') {\\n  cmTag.set('numOfWfUntilDcSwitch', 2);\\n  cmTag.set('player.settings.numOfWfUntilDcSwitch', 2);\\n}\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    func: function(config) {\\n      return config.get('preroll.pubId') === 166717 || config.get('pubId') === 166717 || config.get('preroll.pubId') === 236525 || config.get('pubId') === 236525 || config.get('preroll.pubId') === 198827 || config.get('pubId') === 198827;\\n    }\\n  }],\\n  settings: {\\n    \\\"preroll.pubId\\\": 169497,\\n    \\\"preroll.pubTagId\\\": 953497,\\n    \\\"midroll.pubId\\\": 169497,\\n    \\\"midroll.pubTagId\\\": 953497,\\n    \\\"postroll.pubId\\\": 169497,\\n    \\\"postroll.pubTagId\\\": 953497,\\n    \\\"pubId\\\": 169497,\\n    \\\"pubTagId\\\": 953497,\\n    \\\"migratedwf\\\": 1,\\n    'abTest': '166721b_vA'\\n  }\\n});\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    func: function(config) {\\n      return config.get('preroll.pubId') === 236525 || config.get('pubId') === 236525;\\n    }\\n  }],\\n  settings: {\\n    \\\"migratedwf\\\": 3,\\n    'abTest': '166725b_vA'\\n  }\\n});\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    func: function(config) {\\n      return config.get('preroll.pubId') === 198827 || config.get('pubId') === 198827;\\n    }\\n  }],\\n  settings: {\\n    \\\"migratedwf\\\": 4,\\n    'abTest': '206725b_vA'\\n  }\\n});\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    func: function(config) {\\n      return config.get('preroll.pubId') === 292045 || config.get('pubId') === 292045;\\n    }\\n  }],\\n  settings: {\\n    \\\"preroll.pubId\\\": 208401,\\n    \\\"preroll.pubTagId\\\": 1047981,\\n    \\\"midroll.pubId\\\": 208401,\\n    \\\"midroll.pubTagId\\\": 1047981,\\n    \\\"postroll.pubId\\\": 208401,\\n    \\\"postroll.pubTagId\\\": 1047981,\\n    \\\"pubId\\\": 208401,\\n    \\\"pubTagId\\\": 1047981,\\n    \\\"migratedwf\\\": 2,\\n    'abTest': '166724b_vA'\\n  }\\n});\\n\\n\\n\\n  cmTag.set(\\\"player.settings.frcmtfrms\\\", true);\\ncmTag.set(\\\"player.settings.fire_piggies\\\", true);\\ncmTag.set(\\\"secondsBW\\\", 17);\\ncmTag.set(\\\"player.settings.adto\\\", 300000);\\ncmTag.set(\\\"player.settings.vakll\\\", 300000);\\ncmTag.set(\\\"noaop\\\", 3);\\ncmTag.set(\\\"player.settings.rstmrai\\\", true);\\ncmTag.set(\\\"player.settings.dsktmouttoadcmpltn\\\", 30000);\\ncmTag.set(\\\"player.settings.mprdct\\\", 0.033);\\ncmTag.set(\\\"category\\\", \\\"ShortContent\\\");\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n  cmTag.set('vForce.getAdTimeoutSeconds', 60);\\ncmTag.set('secondsToCloseGlobal', 0);\\ncmTag.set('predictors.distancePixels.isListenToScrollSpeedChange', true);\\ncmTag.set('predictors.playerReady.isActive', true);\\ncmTag.set('predictors.playerReady.predictPoint', 0);\\ncmTag.set('predictors.multiAd.isActive', true);\\ncmTag.set('predictors.multiAd.predictPoints.1.qState', 'q3');\\ncmTag.set('predictors.multiAd.predictPoints.0.qState', 'q1');\\ncmTag.set('predictors.getAdFail.isActive', true);\\ncmTag.set('predictors.distancePixels.isActive', true);\\ncmTag.set('predictors.distancePixels.predictPoints.1.pixelsFromSelectors', 10);\\ncmTag.set('vForce.isActive', true);\\ncmTag.set('isMultiAd', true);\\ncmTag.set('scrollEndTimeout', 500);\\ncmTag.set('playPriority.type', 'ppKey');\\ncmTag.set('playPriority.key', 1);\\ncmTag.set('isTestParentSelector', true);\\ncmTag.set('isReportToKibana', true);\\ncmTag.set('player.settings.rplvpdactv', true);\\ncmTag.set('player.settings.bllblevt', '1,21,22,23,24,25,30,32,42,33,41,205');\\ncmTag.set('bllblevt', '1,21,22,23,24,25,30,32,42,33,41,205');\\ncmTag.set('isOppsulaEnabled', true);\\ncmTag.set('psthdrs', 'text/plain');\\ncmTag.set('player.settings.cmbopps', true);\\ncmTag.set('cmbopps', true);\\ncmTag.set('verticalWidthThreshold', 480);\\ncmTag.set('predictors.distancePixels.maxPPS', 100);\\ncmTag.set('predictors.intersection.isActive', true);\\ncmTag.set('predictors.intersection.predictPoints.1.intersectionPercent', 50);\\ncmTag.set('predictors.intersection.isStartWF', true);\\ncmTag.set('predictors.emptyQueue.predictPoints', 0);\\ncmTag.set(\\\"predictors.getAdFail.allowedPredictPoints\\\", 0);\\ncmTag.set('player.settings.vwclcflbkenbld', true);\\ncmTag.set('player.settings.dwnlnktrshld', 2);\\ncmTag.set('player.settings.frdwnlnkpxls', 1);\\ncmTag.set('player.settings.rmvrvlwntwrk', true);\\ncmTag.set(\\\"components.adChoice.isTranslateText\\\", false);\\ncmTag.set(\\\"components.Repeat.isTranslateText\\\", true);\\ncmTag.set(\\\"language\\\", \\\"en\\\");\\ncmTag.set(\\\"player.settings.omidExcludedVendors\\\", []);\\ncmTag.set(\\\"mediatypesArraySkippingViewableCheckAtSendOppMoment\\\", [2]);\\ncmTag.set(\\\"stickyCard.restrictions.isActive.default\\\", true);\\ncmTag.set(\\\"player.settings.externalDelayedEvents\\\", ['AdImpression', 'AdVideoStart', 'AdStarted']);\\ncmTag.set('player.settings.jsDsbleErlyai', true);\\ncmTag.set('player.settings.vldtvwbfrcmp', false);\\n\\n\\ncmTag.set('sendBeacon', true);\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: \\\"iframeData.inDFP\\\",\\n    val: true\\n  }],\\n  settings: {\\n    \\\"isSkippedDistancePredict\\\": true\\n  }\\n});\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'frameType',\\n    val: 3\\n  }],\\n  settings: {\\n    'isChangePredictPointsWithAny': true,\\n    'predictors.intersection.isActive': true,\\n    'isUseAmpObserver': true\\n  }\\n});\\n  cmTag.set('predictors.distancePixels.isStartWF', true);\\ncmTag.set('player.settings.dlywf', true);\\ncmTag.set('predictors.playerReady.isStartWF', false);\\ncmTag.set('predictors.playerReady.isActive', false);\\ncmTag.set('predictors.firstScroll.isStartWF', true);\\ncmTag.set('predictors.firstScroll.isActive', true);\\ncmTag.set('predictors.firstScroll.predictPoints', [0, 0]);\\ncmTag.set('predictors.multiAd.predictPoints.0.qState', 'q0');\\ncmTag.set('predictors.distancePixels.predictPoints.1.pixelsFromSelectors', -170);\\ncmTag.set('isStayInIframe', true);\\ncmTag.set(\\\"player.settings.vakll\\\", 999999999);\\ncmTag.set(\\\"player.settings.rstmrai\\\", true);\\ncmTag.set(\\\"onTimerClose\\\", \\\"showReplay\\\");\\ncmTag.set(\\\"isPlayerOutOfViewport\\\", true);\\ncmTag.set(\\\"animation.onTransitionOpen\\\", true);\\ncmTag.set('vForce.getAdTimeoutSeconds', 60);\\ncmTag.set('playPriority.type', 'ppKey');\\ncmTag.set('playPriority.key', 1);\\ncmTag.set(\\\"additionalCss\\\", {\\n  \\\"z-index\\\": \\\"999 !important\\\"\\n});\\ncmTag.set(\\\"player.settings.max_ready_vpaid\\\", 6);\\ncmTag.set('maxNonRvVimpsInQueue', 4);\\ncmTag.set('isTestParentSelector', true);\\ncmTag.set('predictors.postRepeat.isActive', true);\\ncmTag.set(\\\"customization\\\", {\\n  \\\"unitContainer\\\": {\\n    \\\"transition\\\": \\\"none\\\"\\n  }\\n});\\ncmTag.set('player.settings.shwadmtebtn', false);\\ncmTag.set('components.volume.isActive', true);\\ncmTag.set('components.volume.isAlwaysBottom', true);\\ncmTag.set('secondsToCloseFeed', 3);\\ncmTag.set(\\\"cardsMinDistance\\\", 10);\\ncmTag.set(\\\"player.settings.mltads\\\", true);\\ncmTag.set(\\\"isMultiAd\\\", true);\\ncmTag.set(\\\"width\\\", 700);\\ncmTag.set(\\\"detachToSlider.isCheckForTopCard\\\", false);\\ncmTag.set('detachToSlider.components.disclosureText.text', 'Ad');\\ncmTag.set('player.settings.disctxt', '');\\ncmTag.set('components.disclosureText.isActive', false);\\ncmTag.set('components.adChoice.isActive', true);\\ncmTag.set(\\\"components.adChoice.title.isActive\\\", true);\\ncmTag.set('components.adChoice.position', 'below');\\ncmTag.set('components.adChoice.title.text', 'Sponsored');\\ncmTag.set('components.OptOut.hasOptOut', false);\\ncmTag.set('detachToSlider.components.disclosureText.isActive', false);\\ncmTag.set('isCallIDLE', true);\\ncmTag.set(\\\"player.settings.volume\\\", 0);\\ncmTag.set('isReplayAd', true);\\ncmTag.set('replayAdClick', 'all');\\ncmTag.set('isGetCardOnEligibility', true);\\ncmTag.set('isOpenInViewPort', true);\\ncmTag.set(\\\"viewPercent\\\", \\\"50\\\");\\ncmTag.set('isUseObserver', true);\\ncmTag.set('secondsToClose', 1000);\\ncmTag.set('predictors.fullEligibility.isActive', true);\\ncmTag.set('predictors.fullEligibility.maxPPS', 1);\\ncmTag.set('predictors.distancePixels.maxPPS', 100);\\ncmTag.set('isUseFloatingView', true);\\ncmTag.set('components.contentVideo.isActive', false);\\ncmTag.set('displayFiller.betweenAds', 'content');\\ncmTag.set('detachToSlider.forceDetach.isActive', true);\\ncmTag.set('detachToSlider.forceDetach.restrictions.rv', true);\\ncmTag.set('components.nativeAd.isActive', true);\\ncmTag.set('isForceSwapToRV', true);\\ncmTag.set('isRvPriority', false);\\ncmTag.set('predictors.mp4.isActive', true);\\ncmTag.set('predictors.mp4.predictPoint', 1);\\ncmTag.set('floatingNAS.isActive', true);\\ncmTag.set('disableExploreMoreVideo', false);\\ncmTag.set('exploreMoreConfig.clearAdsQ', true);\\ncmTag.set('exploreMoreConfig.maxNonRvVimpsInQueue', 5);\\ncmTag.set('secondsToCloseSingleAdFeed', 5);\\ncmTag.set('isGetRv1OnlyForEligible.delayPrediction', true);\\ncmTag.set('isSliderCutOff', true);\\ncmTag.set('SCMitigationFlow', 'true');\\ncmTag.set('cardNumForRV0', '5');\\n\\nvar isApp = isApp || false;\\nif (!isApp) {\\n  cmTag.set('player.settings.mintimwf', 2500);\\n  cmTag.set('player.settings.mntmbtwfsf', function(successes, failures, store) {\\n    return Math.max(2000 * (store.get('failsCount')) - 1500 - 10000 * (store.get('conversionsCount')), store.get('mintimwf'));\\n  });\\n} else {\\n  cmTag.set(\\\"isInAppBridgeOn\\\", true);\\n  cmTag.set(\\\"isUseObserver\\\", false);\\n}\\n\\nif (window.TRC) {\\n  if (!window.TRC.isAMP) {\\n    cmTag.set('continueToPlayInNexCard.isActive', true);\\n    cmTag.set('continueToPlayInNexCard.1', 'viewability');\\n  } else {\\n    cmTag.set('predictors.playerReady.isActive', true);\\n    cmTag.set('player.settings.dlywf', false);\\n    cmTag.set('predictors.playerReady.predictPoint', [0, 0]);\\n    cmTag.set('predictors.firstScroll.isActive', false);\\n  }\\n}\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'detachToSlider.isDetachToSlider',\\n    val: true\\n  }],\\n  settings: {\\n    'continueToPlayInNexCard.isActive': false,\\n    'detachToSlider.isDetachAbove': true\\n  }\\n});\\n\\n// If we don't have slider, set the feed container to be the video container. Resolves some scroll & z-index issues.\\ncmTag.setByCondition({\\n  conditions: [{\\n      key: 'detachToSlider.isStartFromSlider',\\n      val: false\\n    },\\n    {\\n      key: 'detachToSlider.isDetachToSlider',\\n      val: false\\n    }\\n  ],\\n  settings: {\\n    'videoContainerSelector': '.tbl-feed-container',\\n    'stickyCard.restrictions.rv': true,\\n    'stickyCard.isActive': true,\\n    'animation.detach': 150,\\n    'stickyCard.restrictions.adPercent.keepUntilScroll': true,\\n    'stickyCard.restrictions.isFirstCardOnly': false\\n  }\\n});\\n\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'detachToSlider.isStartFromSlider',\\n    val: true\\n  }],\\n  settings: {\\n    'predictors.playerReady.isActive': true,\\n    'predictors.playerReady.predictPoint': 'any',\\n    'predictors.distancePixels.isActive': false,\\n    'predictors.distancePercent.isActive': false,\\n    'player.settings.dlywf': false,\\n    'predictors.firstScroll.isActive': false,\\n    'predictors.firstScroll.isStartWF': false,\\n    'predictors.distancePixels.isStartWF': false,\\n    'predictors.fullEligibility.isActive': false\\n  }\\n});\\n\\ncmTag.set(\\\"player.settings.isMultiVpaidUnit\\\", true);\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'midArticleAsFeed',\\n    val: true\\n  }],\\n  settings: {\\n    'animation.transitionAnimationTime': 0\\n  }\\n});\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'country',\\n    val: 'IL'\\n  }],\\n  settings: {\\n    'secondsToCloseFeed': 0,\\n    'player.settings.nbladnoorgnc': true\\n  }\\n});\\n\\ncmTag.set('predictors.distancePercent.isActive', false);\\ncmTag.set('predictors.intersection.isActive', false);\\ncmTag.set('player.settings.mntmbtwfs', 3);\\ncmTag.set('predictors.feedInViewPredict.isActive', true);\\ncmTag.set('predictors.feedInViewPredict.scrollDebounceSeconds', 0.2);\\ncmTag.set('predictors.feedInViewPredict.firstCardHeightRatio', 0.6);\\ncmTag.set('predictors.fullEligibility.isActive', false);\\ncmTag.set('predictors.distancePixels.isActive', false);\\ncmTag.set('predictors.intersection.isActive', false);\\ncmTag.set('predictors.multiAd.isActive', false);\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'frameType',\\n    val: 3\\n  }],\\n  settings: {\\n    'predictors.intersection.isActive': false\\n  }\\n});\\n\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n      key: 'detachToSlider.isStartFromSlider',\\n      val: true\\n    },\\n    {\\n      key: 'detachToSlider.isDetachToSlider',\\n      val: true\\n    }\\n  ],\\n  settings: {\\n    'components.contentVideo.isActive': true,\\n    'displayFiller.beforeAd': false,\\n    'timeBetweenAds': 2,\\n    'betweenAds': 'content',\\n    'onTimeout': 'content',\\n    'category': 'entertainment',\\n    'player.urls.contentImagesLocation': '//s3.eu-central-1.amazonaws.com/mrss-management/languages/digitalone',\\n    'player.urls.contentLocation': '//vidstat.taboola.com/content_v3.js',\\n    'player.settings.iscntntactv': true,\\n    'player.settings.context': 'instream'\\n  }\\n});\\n\\n\\n  cmTag.setByCondition({\\n  conditions: [{\\n    key: 'isDisableSticky',\\n    val: true\\n  }],\\n  settings: {\\n    'stickyCard.isActive': false,\\n  }\\n});\\n  cmTag.set('predictors.time.isActive', true);\\ncmTag.set('predictors.time.predictPoints', 0);\\ncmTag.set('predictors.time.lengthInSeconds', 5);\\ncmTag.set('predictors.time.repeat', 100);\\n\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: \\\"ep\\\",\\n    val: \\\"1\\\"\\n  }],\\n  settings: {\\n    isMultiAd: false,\\n    volume: \\\"onHover\\\",\\n    isSoundOnHover: true,\\n    \\\"components.CloseButtonView.hasCloseButton\\\": false,\\n    \\\"onOutOfView\\\": \\\"pause\\\",\\n    \\\"originId\\\": 15,\\n    \\\"preroll.pubId\\\": 133128,\\n    \\\"preroll.pubTagId\\\": 779408,\\n    \\\"midroll.pubId\\\": 133128,\\n    \\\"midroll.pubTagId\\\": 779408,\\n    \\\"postroll.pubId\\\": 133128,\\n    \\\"postroll.pubTagId\\\": 779408,\\n    \\\"pubId\\\": 133128,\\n    \\\"pubTagId\\\": 779408,\\n    \\\"player.settings.mprdct\\\": 0,\\n    \\\"player.settings.encwfrs\\\": false,\\n    \\\"player.settings.cmbopps\\\": false,\\n    \\\"abTest\\\": \\\"ep1_vA\\\"\\n  }\\n});\\n  cmTag.set(\\\"adMaxPlaySeconds\\\", 210);\\ncmTag.set(\\\"multiUnitManager.isActive\\\", true);\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'country',\\n    val: 'IL'\\n  }],\\n  settings: {\\n    'stickyCard.isActive': false,\\n    'player.settings.optpwov': 0,\\n    'isPWOV': false,\\n    'onOutOfView': 'pause'\\n  }\\n});\\n\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'forceSelectorToBody',\\n    val: true\\n  }],\\n  settings: {\\n    'videoContainerSelector': 'body'\\n  }\\n});\\n\\n\\n\\n\\n\\n\\n\\n// Roll out level 4 on amp - minimze heavy ad interventions  \\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'frameType',\\n    val: 3\\n  }],\\n  settings: {\\n    'pubId': 383725,\\n    'pubTagId': 2077655,\\n    'preroll.pubId': 383725,\\n    'preroll.pubTagId': 2077655,\\n    'midroll.pubId': 383725,\\n    'midroll.pubTagId': 2077655,\\n    'postroll.pubId': 383725,\\n    'postroll.pubTagId': 2077655,\\n    'preset.level': 4\\n  }\\n});\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n  \\n\\n\\n\\n\\n  \\n\\n\\n\\n\\n\\n\\n\\n\\n\\ncmTag.push('abTest', 'adxsub-out_vA');\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'withAdx',\\n    val: true\\n  }],\\n  settings: {\\n    'abTest': 'adxsub_vA',\\n    'pixels.startWithABT.isFire': true\\n  }\\n});\\n\\ncmTag.push('abTest', 'adxsub-out_vB');\\ncmTag.setByCondition({\\n  conditions: [{\\n    key: 'withAdx',\\n    val: false\\n  }],\\n  settings: {\\n    'abTest': 'adxsub_vB',\\n    'pixels.startWithABT.isFire': true\\n  }\\n});\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n  \\n  // exco\\n\\n\\n\\n\\n\\n\\n//aniview\\n\\n\\n\\n\\n\\n\\n// aniview prebid as vpaid\\n\\n\\n\\n\\n\\n  \\n  \\n\\n  cmTag.push('abTest','prbdtst1_vA'); cmTag.set('pixels.startWithABT.isFire', true);  cmTag.set('player.settings.prebid.settings.pubmatic.disableUserIdRefresh', true); cmTag.set('player.settings.prebid.isActive', true); cmTag.set('player.settings.prebid.supported', ['pubmatic', 'rubicon']); cmTag.set('player.versions.vplayer', 'v154150.327');\\n  \\n  \\n  \\n\\n\\n\\n\\n\\n\\n\\n\\n\\n  cmTag.setByCondition({\\n  conditions: [{\\n    func: function(config) {\\n      return config.get('countryIsoCode') === 'kor' || config.get('countryIsoCode') === 'jpn' || (config.get('countryIsoCode') === 'isr' && config.get('taboolaNetworkId') !== 1386266);\\n    }\\n  }],\\n  settings: {\\n    'components.contentVideo.isActive': false,\\n    'displayFiller.betweenAds': 'none',\\n    'displayFiller.beforeAd': 'none',\\n    'displayFiller.onTimeout': 'none',\\n    'player.settings.iscntntactv': false\\n  }\\n});\\n\\n  cmTag.set(\\\"player.settings.volume\\\", 0);\\ncmTag.setMacros({\\n  dast: \\\"V8-A0CLAakPGBwqfgjuhBIecDgUvFHdCkAAABgYID-AImMBhuHyzRya1aT0Vq0Gs7cypFt5dbsZs7ByrmbbCYmIyCR0WDjcJlGbs1qMlqLVsOZWzmyrdya3cw5WDl3k83EZAUcxnKZDGqBhGX2-w5CvttlEBVdb4vd4TR73oADTafD57rX636_u9jvdTtMp6fb5blr_G6_HAAAAAA8-P___4cAAAAAEAEAAABAAgAAAACFgAr_FgQuAAAAAGD4____1wCAzCFBHJaPy-y3O_wBAAAAAAQAAAAACYADipoSACYneyf-_________2MM0GfeyPj___-_YdAD4MEHwIMQAACArCEd2FcTj7C-4EQKWIswAgAAADA5JbhxZJJOULGo8v__328F4AoAQECjJ9KmeBbdQYm3MAAAAABjFuhh8fvNDrvG73aZ_________38z_2f-0QiVFH6kAVoo_FDzCwgAsOYXEACAzbgBAHgTACfoBMDqBMTsAAAAANz5____1wOCm41xuLGYLIuJY7cbjIazwcJi2CwXjtFstFsttqeFof9fTDi5sI-HsMx-30HId7sMoqLrbbE7nGbPQXzQMCwng2B-KFqy3C13q9FkMRotl5vdcDMa7I8ArQZoIgbL5WSymOxWo9VoM9yNZoMFCrgJomjJarlcrjab1Wo3WswGm-Vws0EUrVrNRpvBcDWbzHa71XAwXI5GiKIly91ytxpNFqPRcrnZDTejwRDB3GDhcIyMg7Vo5vGsRZvRzC0cbixuhcPkWgwns5nJ4nGLXh_Tx-MZuYa7LRIMWNmL5GmRTkS-jc24sQ02DuPI4fHMfIvhxmVy-IaT0WS2cs4sYonmZJFOZJd9cbMxDjcWk2Uxcex2g9FwNlhYDJvlwjGajXarxb43WDgcI-NgLZp5PGvRZjRzC4cbi1vhMLkWw8lsZrJ43KLXx_TxeEau4W7f2A12u9VutVvtG7vBbrfarXarfYfJ9Ex9zkbldTz0qBze3lCmtjkNCpfB4j2qV-fZ0Vjwm31Hp8zrlRZ1Rr_f7_f7_X6_3-83aD0Hs0HhWyZmZlut41hGq5rHwaCIJYKLdCL2e90O01tl95mdnqPZ73U7TB-_2yKWKE0X6URf9LtdhofP5a-IJYLTRToR-t0ui_qPGmK0mws3c8VmMJfsVgkAAAAAAAAAwBJMM90EAAAAwMmAZpvlZLVOB7IaDEa71XIBTNi76AIGAQAAAAAA2HWECHxSVntuUKyxxy7Y73U7TG-V3Wd2eo5mv9ftMH38bisDmLAnYbbZZwSxVqtlDQAAQAAbAABAADfdeAsQivv___8fBwAAQEYOPQAAAPp9QFYPXCj1wo__AFSItVqtbjfWarUCFsRislpO4P___z8!\\\",\\n  dataCenter: \\\"am\\\",\\n  clickUrl: \\\"\\\",\\n  referrer: \\\"https%3A%2F%2Fwww.lokmattimes.com\\\",\\n  cipid: \\\"66361655\\\",\\n  cmDast: \\\"V8-A0CLAakPGBwqfgjuhBIecDgUvFHdCkAAABgYID-AImMBhuHyzRya1aT0Vq0Gs7cypFt5dbsZs7ByrmbbCYmIyCR0WDjcJlGbs1qMlqLVsOZWzmyrdya3cw5WDl3k83EZAUcxnKZDGqBhGX2-w5CvttlEBVdb4vd4TR73oADTafD57rX636_u9jvdTtMp6fb5blr_G6_HAAAAAA8-P___4cAAAAAEAEAAABAAgAAAACFgAr_FgQuAAAAAGD4____1wCAzCFBHJaPy-y3O_wBAAAAAAQAAAAACYADipoSACYneyf-_________2MM0GfeyPj___-_YdAD4MEHwIMQAACArCEd2FcTj7C-4EQKWIswAgAAADA5JbhxZJJOULGo8v__328F4AoAQECjJ9KmeBbdQYm3MAAAAABjFuhh8fvNDrvG73aZ_________38z_2f-0QiVFH6kAVoo_FDzCwgAsOYXEACAzbgBAHgTACfoBMDqBMTsAAAAANz5____1wOCm41xuLGYLIuJY7cbjIazwcJi2CwXjtFstFsttqeFof9fTDi5sI-HsMx-30HId7sMoqLrbbE7nGbPQXzQMCwng2B-KFqy3C13q9FkMRotl5vdcDMa7I8ArQZoIgbL5WSymOxWo9VoM9yNZoMFCrgJomjJarlcrjab1Wo3WswGm-Vws0EUrVrNRpvBcDWbzHa71XAwXI5GiKIly91ytxpNFqPRcrnZDTejwRDB3GDhcIyMg7Vo5vGsRZvRzC0cbixuhcPkWgwns5nJ4nGLXh_Tx-MZuYa7LRIMWNmL5GmRTkS-jc24sQ02DuPI4fHMfIvhxmVy-IaT0WS2cs4sYonmZJFOZJd9cbMxDjcWk2Uxcex2g9FwNlhYDJvlwjGajXarxb43WDgcI-NgLZp5PGvRZjRzC4cbi1vhMLkWw8lsZrJ43KLXx_TxeEau4W7f2A12u9VutVvtG7vBbrfarXarfYfJ9Ex9zkbldTz0qBze3lCmtjkNCpfB4j2qV-fZ0Vjwm31Hp8zrlRZ1Rr_f7_f7_X6_3-83aD0Hs0HhWyZmZlut41hGq5rHwaCIJYKLdCL2e90O01tl95mdnqPZ73U7TB-_2yKWKE0X6URf9LtdhofP5a-IJYLTRToR-t0ui_qPGmK0mws3c8VmMJfsVgkAAAAAAAAAwBJMM90EAAAAwMmAZpvlZLVOB7IaDEa71XIBTNi76AIGAQAAAAAA2HWECHxSVntuUKyxxy7Y73U7TG-V3Wd2eo5mv9ftMH38bisDmLAnYbbZZwSxVqtlDQAAQAAbAABAADfdeAsQivv___8fBwAAQEYOPQAAAPp9QFYPXCj1wo__AFSItVqtbjfWarUCFsRislpO4P___z8!\\\",\\n  tagId: \\\"e22lLINE_ITEM_ID_WILL_BE_HERE_ON_SERVINGc\\\",\\n  creativeId: \\\"-1\\\",\\n  baseReportD: \\\"taboola.com\\\",\\n  redId: \\\"240cae4d-3524-458f-9d6e-37f90e9723bd\\\",\\n  dtagid: \\\"2500475\\\",\\n  dpubid: \\\"463925\\\",\\n  vertical: \\\"source\\\",\\n  placement: \\\"Feed - Below Home Thumbnails\\\",\\n  lineItemId: \\\"-1\\\",\\n  oppsDataCenter: \\\"am\\\",\\n  taboolaNetworkId: \\\"1308196\\\"\\n});\"}]}","position":"singleManager","shouldGetVideoWaterfall":"false"},"fui":{"layout":"DESKTOP_WIDTH","logoPosition":"RIGHT","feedBackground":"TRANSPARENT","feedPadding":"0px 0px 0px 0px","cardFrame":"DIVIDER"},"nb":"2"}},"evh":"-41031725","evi":{"48":"7120|10143","47":"5028|6794"},"vl":[{"ri":"d7cf8c60ca8dac3f718ceda782426e9f","uuip":"Feed - Below Home Thumbnails","uip":"Below Home Thumbnails | Injected 1","ppb":"CN4H","m":"thumbs-feed-01-pb","v":[],"fpl":"Below Home Thumbnails","cpad":"","fb":"1","scac":"true","multiWidget":{"children":[{"name":"thumbs-feed-01","flexSize":"1"},{"name":"organic-thumbs-feed-01","flexSize":"1"}],"orientation":"V","gap":"0.5em"},"dlt":"1"},{"ri":"e54d4984dfae343206b15b75e2340974","uuip":"Feed - Below Home Thumbnails","uip":"Below Home Thumbnails | Card 1","ppb":"CKcB","m":"thumbs-feed-01-b","v":[{"itp":[{"u":"https://ad.doubleclick.net/ddm/trackimp/N5648.5078793TABOOLADISPLAY1/B31418538.386845591;dc_trk_aid=578021497;dc_trk_cid=209557122;ord=[timestamp];dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;gdpr=1;gdpr_consent=;ltd=;dc_tdv=1?;dc_ref=lokmattimes.com","t":"i"},{"u":"https://pixel.adsafeprotected.com/rfw/st/1942284/78150774/skeleton.gif?gdpr=1&gdpr_consent=&gdpr_pd=${GDPR_PD}","t":"i"}],"all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/478ad5fef68b4b6c57f9e829ef4cbb1a.jpg!-#@1000x600","origin":"default","description":"Llévate tu vehículo de ocasión","title":"Renault Renew","type":"text","published-date":"1707316732","branding-text":"Renault","uic":"true","duration":"0","sig":"4e9e4928d8b4c60b85c49bb824a3c041614fcfc2b7b3","uploader":"","cta-text":"Más información","is-syndicated":"true","id":"~~V1~~-4255578217278354040~~gTrGB00oDQTm9QulidkdmIN-HAaS2rAKcpJ_Th7ZQBLnoZueAsnM0UTkqRiz-o8uuKa2_rupL9I0kvx1XVufut2qKIJrSNJ_InWKPTfYcgzi8Q9xrwCRV91TiD30JiLnMnJcs3X08MWipU2QE2etVWjFd5bFKSxDJmCPRN1vj_MFOZjYXet9G7MVl5WSPX9voF5VITagH3TPm4LVM4bQm6uZsK2_rBsqszOlbW-_lqI","views":"0","rhrf":"true","cropping":"{&#34;crop&#34;:[{&#34;ratio&#34;:{&#34;w&#34;:16,&#34;h&#34;:9},&#34;area&#34;:{&#34;x&#34;:0,&#34;y&#34;:0,&#34;w&#34;:1000,&#34;h&#34;:563}}]}","thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/478ad5fef68b4b6c57f9e829ef4cbb1a.jpg","tat":"TABOOLA","thumb-size":"1000x600","placement-label":"Below Home Thumbnails | Card 1","url":"https://ad.doubleclick.net/ddm/trackclk/N5648.5078793TABOOLADISPLAY1/B31418538.386845591;dc_trk_aid=578021497;dc_trk_cid=209557122;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;ltd=;dc_tdv=1?tblci=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCanEgo1IWkiMC6ks4D#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCanEgo1IWkiMC6ks4D","item-id":"~~V1~~-4255578217278354040~~gTrGB00oDQTm9QulidkdmIN-HAaS2rAKcpJ_Th7ZQBLnoZueAsnM0UTkqRiz-o8uuKa2_rupL9I0kvx1XVufut2qKIJrSNJ_InWKPTfYcgzi8Q9xrwCRV91TiD30JiLnMnJcs3X08MWipU2QE2etVWjFd5bFKSxDJmCPRN1vj_MFOZjYXet9G7MVl5WSPX9voF5VITagH3TPm4LVM4bQm6uZsK2_rBsqszOlbW-_lqI","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCanEgo1IWkiMC6ks4D","publisher":"omdspain-renault-sc"},{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/47afa75ee744db828da714ed1b5d32cd.jpg","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/47afa75ee744db828da714ed1b5d32cd.jpg!-#@1300x679","tat":"TABOOLA","origin":"default","thumb-size":"1300x679","description":"","placement-label":"Below Home Thumbnails | Card 1","title":"Remember Clint Eastwood, This Is Him At 93.","type":"photo","published-date":"1701695166","branding-text":"Meet Your Lifestyle","url":"https://meetyourlifestyle.com/trending/celebrity-houses-that-will-leave-you-wordless-clintmhtbus/?utm_source=taboola&utm_medium=lokmat-englishlokmatcom&utm_campaign=31434124&utm_term=Remember+Clint+Eastwood%2C+This+Is+Him+At+93.&utm_content=http%3A%2F%2Fcdn.taboola.com%2Flibtrc%2Fstatic%2Fthumbnails%2F47afa75ee744db828da714ed1b5d32cd.jpg&ts=2024-02-12+17%3A06%3A15&tbv=0.0028&pcl=1&rdk=1","uic":"true","duration":"0","sig":"0d5734dbab1775a78e89af19f158375d14d3f756c07a","item-id":"~~V1~~7174147290638828344~~QrD4qstTfLguWq6U6EajBStdCLY1WGx52goKB5hkhW4ndpXq_nTToVci-tV_1bYyPVPbFHdycXfyr1VxmozLcfmyc8Ncveo5EPlYMI-AbHS2cfuK6Fk1ZZbyBJR4nEcsHa7bhKWWZUEmXcv0be91Eb09-7GtKG6zrJWvHTb1A4SijOOLkW6Vis333CPxv8xxLTfH53ri7zKsKLpCr3ReugwBCO6Bwhmzdz1iKo0x8owdFsiJPlNGgFCcUcKdztbvMO7Tswj5WH4cylUjQLFLHQ","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiDYtmIolc2N6em25L0n","uploader":"","is-syndicated":"true","publisher":"chattertime-meetyourlifestylecom-sc","id":"~~V1~~7174147290638828344~~QrD4qstTfLguWq6U6EajBStdCLY1WGx52goKB5hkhW4ndpXq_nTToVci-tV_1bYyPVPbFHdycXfyr1VxmozLcfmyc8Ncveo5EPlYMI-AbHS2cfuK6Fk1ZZbyBJR4nEcsHa7bhKWWZUEmXcv0be91Eb09-7GtKG6zrJWvHTb1A4SijOOLkW6Vis333CPxv8xxLTfH53ri7zKsKLpCr3ReugwBCO6Bwhmzdz1iKo0x8owdFsiJPlNGgFCcUcKdztbvMO7Tswj5WH4cylUjQLFLHQ","views":"0","thrf":"true"},{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/IMAGE_UPSCALER/EIU/b5f4917c-ea16-406c-9eaf-3661f630e648__KS7qFXzD.jpg","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/IMAGE_UPSCALER/EIU/b5f4917c-ea16-406c-9eaf-3661f630e648__KS7qFXzD.jpg!-#@2000x1666","tat":"TABOOLA","origin":"default","thumb-size":"2000x1666","description":"","placement-label":"Below Home Thumbnails | Card 1","title":"Desastres del vestuario que de alguna manera se convirtieron en películas","type":"text","published-date":"1705077127","branding-text":"History 10","url":"https://www.history10.com/worldwide/wardro-cp-ta-sp?utm_medium=taboola&utm_source=taboola&utm_campaign=ta-hy-wardro-l-c08-win-sp-mm-13014&utm_term=lokmat-englishlokmatcom&utm_bid=Txx_lJTBzoRLB4r_tG-1xW9jWsgrCb5WImS4C--hYaw=&utmk=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiDIkk0o84WeutK54fJp&utm_l=1&utm_t=scroll","uic":"true","duration":"0","sig":"05f1e65ea38833155a4552444c0bbff0bf933dc84656","item-id":"~~V1~~-1721108910652529784~~anPqcADJODmjx1NC-4IRVit6C28eTC_sNsIgkCoBG1l9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kKSStH-Si2L_3-Ys53mt8fHn66D8N0L7nAl11wxSDwCv1WEVUhe6d-aKyZfPorFnrsxwM9vnrM__lwNlNYuqS17SR7W_1Kw-X9TC66VvKBiWME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiDIkk0o84WeutK54fJp","uploader":"","is-syndicated":"true","publisher":"history10tb-au-sc","id":"~~V1~~-1721108910652529784~~anPqcADJODmjx1NC-4IRVit6C28eTC_sNsIgkCoBG1l9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kKSStH-Si2L_3-Ys53mt8fHn66D8N0L7nAl11wxSDwCv1WEVUhe6d-aKyZfPorFnrsxwM9vnrM__lwNlNYuqS17SR7W_1Kw-X9TC66VvKBiWME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","views":"0","thrf":"true"}],"fpl":"Below Home Thumbnails","cpad":"0px","fb":"1"},{"ri":"10a8c67dbeb75b1a0e192f581fbf4851","uuip":"Feed - Below Home Thumbnails","uip":"Below Home Thumbnails | Card 2","ppb":"CIwB","m":"thumbs-feed-01-a","v":[{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/IMAGE_UPSCALER/EIU/6bd2491f-c1f3-49b4-80b3-eb3b8b961c6a__Ef9LcnZP.jpg","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/IMAGE_UPSCALER/EIU/6bd2491f-c1f3-49b4-80b3-eb3b8b961c6a__Ef9LcnZP.jpg!-#@1999x1499","tat":"TABOOLA","origin":"default","thumb-size":"1999x1499","description":"","placement-label":"Below Home Thumbnails | Card 2","is-alternative-media":"true","title":"15 most beautiful women in the world","type":"photo","published-date":"1481632743","branding-text":"Topgentlemen.com","url":"https://topgentlemen.com/30-most-beautiful-woman/?utm_source=taboola_26119742&utm_term=lokmat-englishlokmatcom_1308206&utm_content=3708067101&utm_medium=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCttT4o0seDoJ_TmNQI&utm_campaign=BeautifulWomen2-All-A-TB-TG#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCttT4o0seDoJ_TmNQI","uic":"true","duration":"0","sig":"f7d829b52b6e8db167578f5f2007daa242b237e359b9","item-id":"~~V1~~-5835790067936380735~~dqVaADTc-IeCkCpBGCEDk60y3Jp_-g_S3HP9fs1bY4d9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kCf1P1jxHcE5td_gGW9B2uIUhblzOfW1mQvkrFRs8bsTGAK0EGCqX0WtqxHuv4SeE8luoelODdlERQUwyUYjrmQYZmlGi8feMti1mQx2AyiyME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCttT4o0seDoJ_TmNQI","uploader":"","is-syndicated":"true","publisher":"topmensmagazine-sc1","id":"~~V1~~-5835790067936380735~~dqVaADTc-IeCkCpBGCEDk60y3Jp_-g_S3HP9fs1bY4d9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kCf1P1jxHcE5td_gGW9B2uIUhblzOfW1mQvkrFRs8bsTGAK0EGCqX0WtqxHuv4SeE8luoelODdlERQUwyUYjrmQYZmlGi8feMti1mQx2AyiyME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","views":"0","thrf":"true"},{"all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/53a10772badc3017c5f394b91f4abfe6.png!-#@1000x667","origin":"default","description":"Descubre la climatización radiante de REHAU, que se integra sin problemas en suelos, techos y paredes, sin ocupar espacio extra. Diseña tus espacios sin preocupaciones y disfruta de un ambiente agradable.","title":"Diseño y confort en perfecta armonía","type":"text","published-date":"1691406034","branding-text":"REHAU","uic":"true","duration":"0","sig":"501449556a74fb4d1ae00dc5f557413a075af69b1744","uploader":"","cta-text":"Leer más","is-syndicated":"true","id":"~~V1~~4312246989267516356~~dLadTAXjLyczksUu4G-QQdSESVSy0KXJBUaSW2DxXcmcDi4xPXVsPEX1_PA5UYYTco7BQQhkPfwEp4TjslTpOqsVBPGPZe1BEds29qdW3yMTEIywKUeQEH9HWATp3-bi6nZuhLfp9lLB2gjUGn6eOg","views":"0","thrf":"true","thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/53a10772badc3017c5f394b91f4abfe6.png","tat":"TABOOLA","thumb-size":"1000x667","placement-label":"Below Home Thumbnails | Card 2","url":"https://www.rehau.com/es-es/faq-climatizacion?utm_source=taboola&utm_medium=display&utm_campaign=BS-BRANDAWARENESS-B2C-ES&utm_content=Dise%C3%B1o+y+confort+en+perfecta+armon%C3%ADa&tblci=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCC70UonKT4xs6hlMEX#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCC70UonKT4xs6hlMEX","item-id":"~~V1~~4312246989267516356~~dLadTAXjLyczksUu4G-QQdSESVSy0KXJBUaSW2DxXcmcDi4xPXVsPEX1_PA5UYYTco7BQQhkPfwEp4TjslTpOqsVBPGPZe1BEds29qdW3yMTEIywKUeQEH9HWATp3-bi6nZuhLfp9lLB2gjUGn6eOg","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCC70UonKT4xs6hlMEX","publisher":"taboolaaccount-socialredplanetes","category":"home"}],"fpl":"Below Home Thumbnails","cpad":"0px","fb":"1"},{"ri":"dddd9814a286982f8476a4e30f9a89d9","uuip":"Feed - Below Home Thumbnails","uip":"Below Home Thumbnails | Card 3","ppb":"CCc","m":"thumbs-feed-01-b","v":[{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/0955ed5a95aed6eac1b523f5ca01cb86.jpg","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/0955ed5a95aed6eac1b523f5ca01cb86.jpg!-#@1200x800","tat":"TABOOLA","origin":"default","thumb-size":"1200x800","description":"","placement-label":"Below Home Thumbnails | Card 3","title":"Barcelona: Price Of Capsule Filling Machine Might Surprise You!","type":"text","published-date":"1707753020","branding-text":"Capsule Filing Machine","url":"https://stableredirect.com/?mk=cdiVAtlnxt&ci=34354425&ad_id=3905479345&ad_title=Barcelona%3A+Price+Of+Capsule+Filling+Machine+Might+Surprise+You%21&cust_id=1308206&cust=lokmat-englishlokmatcom&de=Desktop&timestamp=2024-02-12+17%3A06%3A15&source=2&ct=Capsule Filling Machine&mp=Open&ln=EN&pxtb[id]=1506681&pxtb[ec]=click_event&pxtb[cid]=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiD5-lso3ta21cCX6fPXAQ&pbd=0#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiD5-lso3ta21cCX6fPXAQ","uic":"true","duration":"0","sig":"00076576525ba26a0abe5744fee1c01eecded4658f0f","item-id":"~~V1~~-6065736240243141255~~_NsSAZSNsZAfsBliHpGDbYiIkTQO1XjKbICxcb6fJXValNWqOLtzVKU2PNDI8a_URx8h_TgivOebjWJXEwKXO9xwjihfQcsUdfCQdMJrcaePF8C2yPvlmbo_NIFLjI3J6nZuhLfp9lLB2gjUGn6eOg","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiD5-lso3ta21cCX6fPXAQ","uploader":"","cta-text":"Search Now","is-syndicated":"true","publisher":"medianet-generic8-pp","id":"~~V1~~-6065736240243141255~~_NsSAZSNsZAfsBliHpGDbYiIkTQO1XjKbICxcb6fJXValNWqOLtzVKU2PNDI8a_URx8h_TgivOebjWJXEwKXO9xwjihfQcsUdfCQdMJrcaePF8C2yPvlmbo_NIFLjI3J6nZuhLfp9lLB2gjUGn6eOg","views":"0","thrf":"true"},{"thumbnail":"https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iOebjI46VnNc/v0/1200x-1.jpg","all-thumbnails":"https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iOebjI46VnNc/v0/1200x-1.jpg!-#@1200x800","tat":"TABOOLA","origin":"default","thumb-size":"1200x800","description":"","placement-label":"Below Home Thumbnails | Card 3","title":"Cuando vacían el canal después de 200 años, cae un pesado silencio","type":"text","published-date":"1622721689","branding-text":"Greedyfinance","url":"http://greedyfinance.com/index.php/es/2021/06/03/una-limpieza-rutinaria-de-un-canal-parisino-dejo-algunos-descubrimientos-interesantes-2/?utm_source=tab-25481862&utm_medium=1308206&utm_term=taboola&utm_campaign=SN_GDF_CanalParis_INF_SP_TC30628_JU_SP_ES_DMT_Smartbid_25481862_LowSpendControl","uic":"true","duration":"0","sig":"55a467835134b00e44c1da71a844edde0be0c1955ffd","item-id":"~~V1~~-4738528766269962049~~mE7dHJa7kefm5c26goAV5rb6J6xp3VGS3IJwKA0YZ1HpZyC7dGVdvKnSHsaHrNsFr6KHfhMNDc_prPncQ7T8QBLbjIP0R1GoNPTyITCKivc0_fzuLiVftxabBO7r7jto8SMWcidVX_lf5kXyk8dgwG_luW8bqYkmVETj7VfsQitykiZ-pEkBnU9Pko9XiPb2-YMiEKt5faBg_LXVQLbnXWNj-8m6MKXKpYR_soooARs","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiC0t10o9dmSioi1idZy","uploader":"","is-syndicated":"true","publisher":"trendscatchers-search-trendscatcherscom-en","id":"~~V1~~-4738528766269962049~~mE7dHJa7kefm5c26goAV5rb6J6xp3VGS3IJwKA0YZ1HpZyC7dGVdvKnSHsaHrNsFr6KHfhMNDc_prPncQ7T8QBLbjIP0R1GoNPTyITCKivc0_fzuLiVftxabBO7r7jto8SMWcidVX_lf5kXyk8dgwG_luW8bqYkmVETj7VfsQitykiZ-pEkBnU9Pko9XiPb2-YMiEKt5faBg_LXVQLbnXWNj-8m6MKXKpYR_soooARs","views":"0","thrf":"true"},{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/646798fbcdc9e71248528d59a105e102.jpg","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/646798fbcdc9e71248528d59a105e102.jpg!-#@1000x665","tat":"TABOOLA","origin":"default","thumb-size":"1000x665","description":"","placement-label":"Below Home Thumbnails | Card 3","title":"Las opciones de tratamiento de los hongos en las uñas podrían sorprenderle","type":"text","published-date":"1702378516","branding-text":"Hongos en las uñas | Enlaces publicitarios","url":"https://fr742l.snzgdl.com?subid1=31800643&subid2=3883793965&subid3=1308206---delimjuwe---lokmat-englishlokmatcom&subid4=taboola-GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiDLiWMo98LC846Hy_6aAQ&network=taboola&site=lokmat-englishlokmatcom&siteid=1308206&adtitle=Las+opciones+de+tratamiento+de+los+hongos+en+las+u%C3%B1as+podr%C3%ADan+sorprenderle&click_id=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiDLiWMo98LC846Hy_6aAQ&dpco=1#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiDLiWMo98LC846Hy_6aAQ","uic":"true","duration":"0","sig":"c1056082a065b72dfb4a1c8faf19ae6356c3e383b752","item-id":"~~V1~~-7096196430919437693~~gUsxm7q7WHEmevXWLcv074kOB-L1N26Yku4tDxEtm359_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kKSStH-Si2L_3-Ys53mt8fHHMsy7Y5T-DMOtVv6oO0bAyzCD0tJEiR8XQyeoALFdl-rQY3D3N28Yej5okMeHa2uPty428XVfgjc-OnjEeXGBp_S0ig87w5lOV3QycS3MEQ","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiDLiWMo98LC846Hy_6aAQ","uploader":"","cta-text":"Buscar Ahora","is-syndicated":"true","publisher":"ajaskagmbh-search-nailfungustreatment-sc","id":"~~V1~~-7096196430919437693~~gUsxm7q7WHEmevXWLcv074kOB-L1N26Yku4tDxEtm359_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kKSStH-Si2L_3-Ys53mt8fHHMsy7Y5T-DMOtVv6oO0bAyzCD0tJEiR8XQyeoALFdl-rQY3D3N28Yej5okMeHa2uPty428XVfgjc-OnjEeXGBp_S0ig87w5lOV3QycS3MEQ","views":"0","thrf":"true"}],"fpl":"Below Home Thumbnails","cpad":"0px","fb":"1"},{"ri":"b78c22596941fcf7f2a8724cfaf3127f","uuip":"Feed - Below Home Thumbnails","uip":"Below Home Thumbnails | Card 4","ppb":"CO0D","m":"thumbs-feed-01-a","v":[{"thumbnail":"https://storage.googleapis.com/aporia-unleash/Taboola/image_61.jpg","all-thumbnails":"https://storage.googleapis.com/aporia-unleash/Taboola/image_61.jpg!-#@1000x667","tat":"TABOOLA","origin":"default","thumb-size":"1000x667","description":"","placement-label":"Below Home Thumbnails | Card 4","title":"Barcelona: Los autos sin vender casi están siendo donados (ver precios)","type":"text","published-date":"1677713848","branding-text":"Autos anuales | Enlaces Publicitarios","url":"https://c3ffa5.llsdzktnxwnnr.com?network=taboola&subid1=lokmat-englishlokmatcom&adtitle=Barcelona%3A+Los+autos+sin+vender+casi+est%C3%A1n+siendo+donados+%28ver+precios%29&subid3=1308206&site=lokmat-englishlokmatcom&click_id=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCRgVooobr9uvysyLhr&subid4=el-es-a-yeca4es-309834-a0103-tb&kw1=Automoviles+De+Ocasión+Precios&kw2=Vehiculos+2+Mano&kw3=Ofertas+Autos+Nuevos+Baratos&kw4=Tasar+Mi+Vehiculo+Por+Matricula&kw5=Ofertas+Coches+Usados+En+España+2024&kw6=Promociones+0km&kw7=Ofertas+De+Coches+Sin+Vender+En+España+2024&kw8=Coches+Ocasión+Segunda+Mano&kw9=Coches+Ocasión+Baratos&kw10=Autos+Nuevos+Economicos+Precios#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCRgVooobr9uvysyLhr","uic":"true","duration":"0","sig":"f71f2ba3e996dd5c543a16c44924f6e9e0f0cb8fc09b","item-id":"~~V1~~43943943975128485~~TsG-qOMcqW8EMqe_OPdodJwhPdCZns4WbNNrEfBMH25w6cLzOYgYTH58zK8cIqqSrFNhdq9trun3n_ta3vBzRWBvVAx0iV2oDp6Ffr8YfffM1Kay2unK4e7Ts7KvwUZOtPfFpmniIUYK4f0B6HJFY_mDIhCreX2gYPy11UC2511jY_vJujClyqWEf7KKKAEb","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCRgVooobr9uvysyLhr","uploader":"","is-syndicated":"true","publisher":"mmosworld-vehicles-1-sc","id":"~~V1~~43943943975128485~~TsG-qOMcqW8EMqe_OPdodJwhPdCZns4WbNNrEfBMH25w6cLzOYgYTH58zK8cIqqSrFNhdq9trun3n_ta3vBzRWBvVAx0iV2oDp6Ffr8YfffM1Kay2unK4e7Ts7KvwUZOtPfFpmniIUYK4f0B6HJFY_mDIhCreX2gYPy11UC2511jY_vJujClyqWEf7KKKAEb","views":"0","thrf":"true"},{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/6355f7316822a8e5a17383a57395ad6d.jpg","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/6355f7316822a8e5a17383a57395ad6d.jpg!-#@1000x667","tat":"TABOOLA","origin":"default","thumb-size":"1000x667","description":"","placement-label":"Below Home Thumbnails | Card 4","title":"¿Cuánto cuesta instalar una piscina en 2023? Ver precios","type":"text","published-date":"1689259546","branding-text":"Quinielas | Enlaces Publicitarios","url":"https://f0x91m.llsdzktnxwnnr.com?network=taboola&subid1=lokmat-englishlokmatcom&adtitle=%C2%BFCu%C3%A1nto+cuesta+instalar+una+piscina+en+2023%3F+Ver+precios&subid3=1308206&site=lokmat-englishlokmatcom&click_id=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiClnFwomtX3s4yzgNjDAQ&subid4=ea-es-d-pool1es-537627-c1307-tb&kw1=Piscinas+Fibra+Lista+de+precios&kw2=Precio+Piscinas+Fibra&kw3=2023+Piscinas+Fibra&kw4=Piscinas+y+Precios+recomendadas+2023&kw5=2023+Piscinas+y+Precios&kw6=Piscina+Jardín+Lista+de+precios&kw7=Piscinas+Exteriores+Precios&kw8=Piscina+En+Jardín+Con+Cubierta+Lista+de+precios&kw9=Piscinas+Sobre+Suelo+Lista+de+precios&kw10=Piscinas+Exteriores+Lista+de+precios#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiClnFwomtX3s4yzgNjDAQ","uic":"true","duration":"0","sig":"61d1e1847fba4c1e02ad60a0ea6c433bcffaf51531fc","item-id":"~~V1~~8218799065823020390~~7f-ua-SsqnB5uy2hfFSNqLyq2aLTTI0mLXnxGCFNi119_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kPTqHQWACbGLGXeLPIXZL-LL08OHuUWLRxTE-TpEb68VjJ1450tfA2HR7xIrzcmVKAg41dgAZMtE3ficY8PD7d1oBLyXTYSvawCAyIU6_vVbME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiClnFwomtX3s4yzgNjDAQ","uploader":"","cta-text":"Buscar Ahora","is-syndicated":"true","publisher":"mmosworld-communication-sc","id":"~~V1~~8218799065823020390~~7f-ua-SsqnB5uy2hfFSNqLyq2aLTTI0mLXnxGCFNi119_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kPTqHQWACbGLGXeLPIXZL-LL08OHuUWLRxTE-TpEb68VjJ1450tfA2HR7xIrzcmVKAg41dgAZMtE3ficY8PD7d1oBLyXTYSvawCAyIU6_vVbME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","views":"0","thrf":"true"}],"fpl":"Below Home Thumbnails","cpad":"0px","fb":"1"},{"ri":"573b7308122196a45f75ee75ae19c64c","uuip":"Feed - Below Home Thumbnails","uip":"Below Home Thumbnails | Card 5","ppb":"CN4F","m":"thumbs-feed-01-b","v":[{"thumbnail":"https://www.loansocieties.com/wp-content/uploads/2022/05/29022954/1650124591_9b3db5fee267cff78f8723ad801e0890477c16d6.jpg?width=603","all-thumbnails":"https://www.loansocieties.com/wp-content/uploads/2022/05/29022954/1650124591_9b3db5fee267cff78f8723ad801e0890477c16d6.jpg?width=603!-#@603x452","tat":"TABOOLA","origin":"default","thumb-size":"603x452","description":"","placement-label":"Below Home Thumbnails | Card 5","title":"No vas a creer lo que había dentro del estómago de este león","type":"text","published-date":"1656691351","branding-text":"Greedyfinance","url":"https://greedyfinance.com/index.php/es/2022/07/01/los-guardabosques-detectan-un-leon-gigante-y-el-veterinario-se-asombra-al-ver-la-ecografia-2/?utm_source=tab-20078367&utm_medium=1308206&utm_term=taboola&utm_campaign=Ciri_GDF_GiantLion_INF_SP_JU_SP_ES_DMT_Smartbid_HourlyControl2_%5BSAFE%5D","uic":"true","duration":"0","sig":"e9ef2a3d00d4ab17bfa149560395c4deb9268610a279","item-id":"~~V1~~-8234322353682654132~~aTQeteHPoWYns_13iDFPTKefQoaDc3SaWYPe3Jq-jUJ9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kCf1P1jxHcE5td_gGW9B2uJ55LPthvGUBUWi6hP193oZ9dx0QgIkBBd2_R8JmB7o22AdJCff7JvglIf1RHTyCD7bjU-hrLTL4XNPFzKIxahmME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiDUs1Qoudjk0qncl58V","uploader":"","is-syndicated":"true","publisher":"rgmedia-indeedfinancecom-sc","id":"~~V1~~-8234322353682654132~~aTQeteHPoWYns_13iDFPTKefQoaDc3SaWYPe3Jq-jUJ9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kCf1P1jxHcE5td_gGW9B2uJ55LPthvGUBUWi6hP193oZ9dx0QgIkBBd2_R8JmB7o22AdJCff7JvglIf1RHTyCD7bjU-hrLTL4XNPFzKIxahmME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","views":"0","thrf":"true"},{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/5294b8ae197c08cc0a98b8eb6682edb1.jpeg","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/5294b8ae197c08cc0a98b8eb6682edb1.jpeg!-#@600x400","tat":"TABOOLA","origin":"default","thumb-size":"600x400","description":"Buscar los mejores resultados para tarjetas de visita","placement-label":"Below Home Thumbnails | Card 5","title":"Para una primera impresión de ensueño descubre estas tarjetas de visita","type":"text","published-date":"1707307434","branding-text":"Tarjetas de visita | Enlaces de investigación","url":"https://tipstoday.org/promo.php?s=Business+Cards&hl=es_es&utm_source=lokmat-englishlokmatcom_1308206&utm_campaign=%5BARB%5D%5BES%5D%5BTT%5D%5BBusiness+Cards%5D%5BDesktop%5D%5B2DC%5D%5BTAB%5D%5BS%5DBusiness+Cards_34075786&utm_medium=Taboola&tclid=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCzkF4otuaSt-Oy6MF6&tpl=salvatpl&source=taboola&siteid=1308206&campaignid=34075786&ad_id=3903393699&tblci=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCzkF4otuaSt-Oy6MF6#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCzkF4otuaSt-Oy6MF6","uic":"true","duration":"0","sig":"c0ebb109455b0e0353964d6b4a4496d0c5d2a2fcd00f","item-id":"~~V1~~2093120751292695648~~I6rVqBxv4WyogPixt7EEkTmfnQU0AquEBpHBdXHfGWO4prb-u6kv0jSS_HVdW5-63aoogmtI0n8idYo9N9hyDNpfNZzS9jb4Hk36Sh-Qwvwgl8utB670xHuYaHm1E_JVq_0d7D1Dt5AsnfJX0QfBp7Z6KMaP1iEh-SGJD_v5zYJNLwxq7HaNYLWBFTefHkDudEkHO4uRFWqwCNnT2fJTUOhgPrSpVjMoH_25mpweXAc","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCzkF4otuaSt-Oy6MF6","uploader":"","cta-text":"Más información","is-syndicated":"true","publisher":"intraprendenza-arb-businessindustrial-yahoo-dl","id":"~~V1~~2093120751292695648~~I6rVqBxv4WyogPixt7EEkTmfnQU0AquEBpHBdXHfGWO4prb-u6kv0jSS_HVdW5-63aoogmtI0n8idYo9N9hyDNpfNZzS9jb4Hk36Sh-Qwvwgl8utB670xHuYaHm1E_JVq_0d7D1Dt5AsnfJX0QfBp7Z6KMaP1iEh-SGJD_v5zYJNLwxq7HaNYLWBFTefHkDudEkHO4uRFWqwCNnT2fJTUOhgPrSpVjMoH_25mpweXAc","views":"0","thrf":"true"},{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/7513f77648a90ddedde1345666ee6c99.jpg","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/7513f77648a90ddedde1345666ee6c99.jpg!-#@1280x854","tat":"TABOOLA","origin":"default","thumb-size":"1280x854","description":"","placement-label":"Below Home Thumbnails | Card 5","title":"Hair Transplantion Prices Might Surprise You","type":"text","published-date":"1651160470","branding-text":"Hair Transplantation | Search","url":"https://have-an-intl-hair-transplant.zone?ref=lokmat-englishlokmatcom.1308206&sub_id=Search-hairtransplantation08-WW-MS5.18166305&sub_id2=lokmat-englishlokmatcom.1308206~search-usefultricks-womens24x7-tricksforhome-sc&tbid=1297466&tbland=view&tbserp=search&rskey=Hair+Transplantion+Prices+Might+Surprise+You&compkey=hair+transplantation+prices#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiC6mE8o3e3l8ZG7s5cQ","uic":"true","duration":"0","sig":"33fa59917ca3d59e015234db372909ec644e22152d18","item-id":"~~V1~~-4506959822515123555~~iLFLiIcyBDfii3zt2NL-QAlxybTb9APyfVg1wr87PKXkc1MwgRREHD_eZSuV_YDlTpzOxsn9s6hyqXL55P7hl4K98KjjCVEHgGbtKLi6hsqiuVJqwzRoVu3-yS7_ZaRztS-4H1duzUw8y3pDAcrMmPmDIhCreX2gYPy11UC2511jY_vJujClyqWEf7KKKAEb","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiC6mE8o3e3l8ZG7s5cQ","uploader":"","is-syndicated":"true","publisher":"womens24x7-tricksforhome-sc","id":"~~V1~~-4506959822515123555~~iLFLiIcyBDfii3zt2NL-QAlxybTb9APyfVg1wr87PKXkc1MwgRREHD_eZSuV_YDlTpzOxsn9s6hyqXL55P7hl4K98KjjCVEHgGbtKLi6hsqiuVJqwzRoVu3-yS7_ZaRztS-4H1duzUw8y3pDAcrMmPmDIhCreX2gYPy11UC2511jY_vJujClyqWEf7KKKAEb","views":"0","thrf":"true"}],"fpl":"Below Home Thumbnails","cpad":"0px","fb":"1"},{"ri":"d0821098f7645c521bd78741f6f4388a","uuip":"Feed - Below Home Thumbnails","uip":"Below Home Thumbnails | Card 6","ppb":"CKYB","m":"organic-thumbs-feed-01-c","v":[{"thumbnail":"https://d3pc1xvrcw35tl.cloudfront.net/ln/feedImages/420x315/ANI-20240211200759_202402.jpg","description":"Canadian parliamentarian to hold Sindhi Roundtable on Feb 27: Ottawa [Canada], February 12 : Canadian lawmaker Jeremy Patzer will host the &#39;Sindhi Roundtable&#39; in the Canadian Parliament on ... . Get all latest entertainment &amp; viral stories on www.lokmattimes.com","title":"Canadian parliamentarian to hold Sindhi Roundtable on Feb 27","type":"text","published-date":"1707701889","url":"https://www.lokmattimes.com/international/canadian-parliamentarian-to-hold-sindhi-roundtable-on-feb-27/","duration":"0","sig":"2ecb43435a4201dd40f808c5612a2db1381d69be53af","item-id":"1931984600724701810","uploader":"","id":"/international/canadian-parliamentarian-to-hold-sindhi-roundtable-on-feb-27","category":"international","views":"0"},{"thumbnail":"https://d3pc1xvrcw35tl.cloudfront.net/ln/images/420x315/mithun-chakraborty-1707651324729-1707651332524_202402688654.jpeg","description":"Mithun Chakraborty Diagnosed with Ischemic Cerebrovascular Stroke, First Pic of Actor from Hospital Goes Viral: Actor Mithun Chakraborty was admitted to the emergency unit of Apollo Hospital in Kolkata on Saturday morning, February 10, ... . Get all latest entertainment &amp; viral stories on www.lokmat","title":"Mithun Chakraborty Diagnosed with Ischemic Cerebrovascular Stroke, First Pic of Actor from Hospital Goes Viral","type":"text","published-date":"1707680058","url":"https://www.lokmattimes.com/entertainment/mithun-chakraborty-diagnosed-with-ischemic-cerebrovascular-stroke-first-pic-of-actor-from-hospital-a475/","duration":"0","sig":"42397a0501972b867c6a62255858e1787efc855289ef","item-id":"-7610901403086027207","uploader":"","id":"/entertainment/mithun-chakraborty-diagnosed-with-ischemic-cerebrovascular-stroke-first-pic-of-actor-from-hospital-a475","category":"entertainment","views":"0"}],"fpl":"Below Home Thumbnails","cpad":"0px","fb":"1"},{"ri":"ef3a1c1e189d47255e63853518c3595f","uuip":"Feed - Below Home Thumbnails","uip":"Below Home Thumbnails | Card 7","ppb":"CJUB","m":"thumbs-feed-01-b","v":[{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/GETTY_IMAGES/FKF/639246522__F5Ke9GqF.jpg","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/GETTY_IMAGES/FKF/639246522__F5Ke9GqF.jpg!-#@2500x1668","tat":"TABOOLA","origin":"default","thumb-size":"2500x1668","description":"","placement-label":"Below Home Thumbnails | Card 7","title":"Unsold Welding Machines In Mexico Might Almost Be Sold For Nothing!","type":"text","published-date":"1706891580","branding-text":"Welding Machine Sale 2024","url":"https://stableredirect.com/?mk=rcd2clQfeO&ci=33846500&ad_id=3901705215&ad_title=Unsold+Welding+Machines+In+Mexico+Might+Almost+Be+Sold+For+Nothing%21&cust_id=1308206&cust=lokmat-englishlokmatcom&de=Desktop&timestamp=2024-02-12+17%3A06%3A15&source=2&ct=&mp=Open&ln=EN&pxtb[id]=1488273&pxtb[ec]=click_event&pxtb[cid]=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCR61oonsuwpM2Q4_YV&pbd=0\n#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCR61oonsuwpM2Q4_YV","uic":"true","duration":"0","sig":"7f0af7e2da17726ad43dc7eed92ad86ba98e58f3553b","item-id":"~~V1~~1282814969007870239~~BtVqbRB7c-KIhK5Bb5oAJ5Wrhek_jtBBYEPsmgyVrznnoZueAsnM0UTkqRiz-o8uuKa2_rupL9I0kvx1XVufut2qKIJrSNJ_InWKPTfYcgzi8Q9xrwCRV91TiD30JiLnqzoQvtNstnpW9rQHZa608Kv9Hew9Q7eQLJ3yV9EHwadRvub-IE2v9wO0exdEh7VjTS8Maux2jWC1gRU3nx5A7rEVxuOWKWhrQzvXHgQEr6voYD60qVYzKB_9uZqcHlwH","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCR61oonsuwpM2Q4_YV","uploader":"","cta-text":"Search Now","is-syndicated":"true","publisher":"medianet-health45-pp","id":"~~V1~~1282814969007870239~~BtVqbRB7c-KIhK5Bb5oAJ5Wrhek_jtBBYEPsmgyVrznnoZueAsnM0UTkqRiz-o8uuKa2_rupL9I0kvx1XVufut2qKIJrSNJ_InWKPTfYcgzi8Q9xrwCRV91TiD30JiLnqzoQvtNstnpW9rQHZa608Kv9Hew9Q7eQLJ3yV9EHwadRvub-IE2v9wO0exdEh7VjTS8Maux2jWC1gRU3nx5A7rEVxuOWKWhrQzvXHgQEr6voYD60qVYzKB_9uZqcHlwH","views":"0","thrf":"true"},{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/15d6ad3232dbe91e06d7bcc8c3fae0b5.png","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/15d6ad3232dbe91e06d7bcc8c3fae0b5.png!-#@1344x896","tat":"TABOOLA","origin":"default","thumb-size":"1344x896","description":"","placement-label":"Below Home Thumbnails | Card 7","title":"Barcelona: Los nuevos salvaescaleras sin eje tardan solo unas horas en instalarse: vea cuánto cuestan","type":"text","published-date":"1705169288","branding-text":"Ascensor | Enlaces Publicitarios","url":"https://bd8t2q.llsdzktnxwnnr.com?network=taboola&subid1=lokmat-englishlokmatcom&adtitle=Barcelona%3A+Los+nuevos+salvaescaleras+sin+eje+tardan+solo+unas+horas+en+instalarse%3A+vea+cu%C3%A1nto+cuestan&subid3=1308206&site=lokmat-englishlokmatcom&click_id=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCCgVoohfivh8WYxKU8&subid4=el-es-d-stai52es-975719-oae1001-tb&kw1=Elevador+Escaleras+Precio&kw2=Plataforma+Elevadora+Escaleras+Lista+De+Precios&kw3=Elevadores+Para+Casas+Unifamiliares&kw4=Ascensores+Domesticos+Precios&kw5=Salvaescaleras+Verticales&kw6=Salvaescaleras+Verticales+Para+personas+mayores&kw7=Lo+mas+barato+Salvaescaleras+Verticales&kw8=mejores+Elevadores+Para+Casas+Unifamiliares&kw9=Elevador+De+Escaleras+Fácil+De+Instalar&kw10=Salva+Escaleras+Interiores+Precio#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCCgVoohfivh8WYxKU8","uic":"true","duration":"0","sig":"bf7b9ec78562254d262de64c95f091a0995a1488c907","item-id":"~~V1~~-678842830167240060~~5cjY-ZQdhFS17tlkcW_2-F2MqFsWbgPfqNxhO1vim3NyNpbgedRdYuhjTdtdbeHkmtsJzYFhgHiooYK9gOMEnA3k4Thh40qKgdVK-XcFVtrM1Kay2unK4e7Ts7KvwUZOtrv4TGIFu8R0B1vH3LU4__mDIhCreX2gYPy11UC2511jY_vJujClyqWEf7KKKAEb","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCCgVoohfivh8WYxKU8","uploader":"","is-syndicated":"true","publisher":"mmosworld-hairtransplantion-1-sc","id":"~~V1~~-678842830167240060~~5cjY-ZQdhFS17tlkcW_2-F2MqFsWbgPfqNxhO1vim3NyNpbgedRdYuhjTdtdbeHkmtsJzYFhgHiooYK9gOMEnA3k4Thh40qKgdVK-XcFVtrM1Kay2unK4e7Ts7KvwUZOtrv4TGIFu8R0B1vH3LU4__mDIhCreX2gYPy11UC2511jY_vJujClyqWEf7KKKAEb","views":"0","thrf":"true"},{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/8b924ef7b726e783b20b4076e78c62d2.png","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/8b924ef7b726e783b20b4076e78c62d2.png!-#@1344x896","tat":"TABOOLA","origin":"default","thumb-size":"1344x896","description":"","placement-label":"Below Home Thumbnails | Card 7","title":"Revolucionario pequeño coche eléctrico para mayores: ¡El precio te sorprenderá!","type":"text","published-date":"1688368435","branding-text":"Coches eléctricos | Enlaces Publicitarios","url":"https://7wsxr7.llsdzktnxwnnr.com?network=taboola&subid1=lokmat-englishlokmatcom&adtitle=Revolucionario+peque%C3%B1o+coche+el%C3%A9ctrico+para+mayores%3A+%C2%A1El+precio+te+sorprender%C3%A1%21&subid3=1308206&site=lokmat-englishlokmatcom&click_id=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiD9gFoonJ6-0aqygMZl&subid4=el-es-a-elca17es-495302-a0207-tb&kw1=Coches+Eléctricos+Pequeños&kw2=Precios+De+Los+Coches+Eléctricos&kw3=Precios+Coches+Electricos&kw4=Coches+Eléctricos+Precios&kw5=Coches+Electricos+Baratos&kw6=Pequeño+Coche+Eléctrico&kw7=Coches+Electricos+Precios&kw8=Coches+Eléctricos+Pequeños+Ahora+mismo&kw9=Lo+mas+barato+Coches+Eléctricos+Pequeños&kw10=Precios+De+Los+Coches+Eléctricos+Para+personas+mayores#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiD9gFoonJ6-0aqygMZl","uic":"true","duration":"0","sig":"51ea75e4358e2f67aa5518c7cf75bdf796f0bd9a3dfa","item-id":"~~V1~~2147818091943143890~~bJoE_drrUa-JLClzKKudKXfIzo9uxN7jor_FydtvPRd9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kKSStH-Si2L_3-Ys53mt8fHGeaVhr2kH40C2My4B-n0XXYrxfhanzHKvKAsM1G9zuQg41dgAZMtE3ficY8PD7d1K824XEmEjkHXt8cijId3HME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiD9gFoonJ6-0aqygMZl","uploader":"","is-syndicated":"true","publisher":"mmosworld-seniorliving-1-sc","id":"~~V1~~2147818091943143890~~bJoE_drrUa-JLClzKKudKXfIzo9uxN7jor_FydtvPRd9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kKSStH-Si2L_3-Ys53mt8fHGeaVhr2kH40C2My4B-n0XXYrxfhanzHKvKAsM1G9zuQg41dgAZMtE3ficY8PD7d1K824XEmEjkHXt8cijId3HME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","views":"0","thrf":"true"}],"fpl":"Below Home Thumbnails","cpad":"0px","fb":"1"},{"ri":"e96c52e9634be3d3b6dea7646f9171f2","uuip":"Feed - Below Home Thumbnails","uip":"Below Home Thumbnails | Card 8","ppb":"CI0F","m":"thumbs-feed-01-a","v":[{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/8fb1ef6d2863a255192af79242185e02.png","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/8fb1ef6d2863a255192af79242185e02.png!-#@1344x896","tat":"TABOOLA","origin":"default","thumb-size":"1344x896","description":"","placement-label":"Below Home Thumbnails | Card 8","title":"¡Renueva tu viejo cuarto de baño en sólo un fin de semana! (Echa un vistazo)","type":"text","published-date":"1705445712","branding-text":"Remodelación del baño | Anuncios Publicitarios","url":"https://rn4mlg.llsdzktnxwnnr.com?network=taboola&subid1=lokmat-englishlokmatcom&adtitle=%C2%A1Renueva+tu+viejo+cuarto+de+ba%C3%B1o+en+s%C3%B3lo+un+fin+de+semana%21+%28Echa+un+vistazo%29&subid3=1308206&site=lokmat-englishlokmatcom&click_id=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCEgVoomLiqr_zbha1P&subid4=el-es-d-bath28es-975720-oae1401-tb&kw1=España+Precio+Reforma+Baño+Completo&kw2=Reforma+Cuarto+Baño+Presupuesto+España+2024&kw3=Comparador+De+Reforma+Cuarto+De+Baño+Precio&kw4=España+Precio+Reforma+Baño+Completo+Ahora+mismo&kw5=2024+España+Precio+Reforma+Baño+Completo&kw6=Cambio+Bañera+por+Plato+de+Ducha&kw7=Cambio+Bañera+por+Ducha&kw8=Reforma+Baños&kw9=Reforma+Cuarto+De+Baño+Pequeño&kw10=Como+Reformar+Un+Cuarto+De+Baño+Pequeño#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCEgVoomLiqr_zbha1P","uic":"true","duration":"0","sig":"b3c819e94190eff907b36e60397f50635033bb34e3d0","item-id":"~~V1~~-3045135072891012818~~IsPqzQo7cCZyRffW0hzTc9nAHg3HkwBGXD_T3bilUhJ9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kCf1P1jxHcE5td_gGW9B2uKhjP0WfPasi5NL-UPwDyHKGyY8m_OuVBytqU70QOUx8gg41dgAZMtE3ficY8PD7d3u-xD8u_3IaJvGIa2xJUEwME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiCEgVoomLiqr_zbha1P","uploader":"","is-syndicated":"true","publisher":"mmosworld-funeral-1-sc","id":"~~V1~~-3045135072891012818~~IsPqzQo7cCZyRffW0hzTc9nAHg3HkwBGXD_T3bilUhJ9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kCf1P1jxHcE5td_gGW9B2uKhjP0WfPasi5NL-UPwDyHKGyY8m_OuVBytqU70QOUx8gg41dgAZMtE3ficY8PD7d3u-xD8u_3IaJvGIa2xJUEwME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","views":"0","thrf":"true"},{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/a10487c1cd11b956ce10b1c467b3396e.png","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/a10487c1cd11b956ce10b1c467b3396e.png!-#@1344x896","tat":"TABOOLA","origin":"default","thumb-size":"1344x896","description":"","placement-label":"Below Home Thumbnails | Card 8","title":"No se quede a oscuras: generadores de emergencia fiables para su hogar","type":"text","published-date":"1704222221","branding-text":"Generador de emergencia | Enlaces Publicitarios","url":"https://sgbrx3.llsdzktnxwnnr.com?network=taboola&subid1=lokmat-englishlokmatcom&adtitle=No+se+quede+a+oscuras%3A+generadores+de+emergencia+fiables+para+su+hogar&subid3=1308206&site=lokmat-englishlokmatcom&click_id=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiD2h18ooO3IoeTwiZRs&subid4=eb-es-a-emge5es-960203-g0201-tb&kw1=Precios+Generador+eléctrico+barato&kw2=Generador+para+luz&kw3=Precios+Generador+electrico+gasolina&kw4=Compra+Generador+de+luz+para+casa&kw5=Busque+Grupos+electrogenos+baratos&kw6=Grupo+Electrogeno+Barato&kw7=generadores+nuevos&kw8=generador+de+luz+diesel&kw9=generador+arranque+automático+placas+solares&kw10=¿Cómo+funciona+un+generador+de+emergencia?#tblciGiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiD2h18ooO3IoeTwiZRs","uic":"true","duration":"0","sig":"674c5bcbf9300cf44efe00e9e12741266be984a0a172","item-id":"~~V1~~-2995731048005189266~~3kc41CJFkWxOGMEUIRkiEw3AFxFEEzKwkrc358-YLmt9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kPTqHQWACbGLGXeLPIXZL-KhjP0WfPasi5NL-UPwDyHKnQo5CV9JIn-aTKexzYsSfgg41dgAZMtE3ficY8PD7d0M_eRUbG2dmb3ionqIQwn6ME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiD2h18ooO3IoeTwiZRs","uploader":"","is-syndicated":"true","publisher":"mmosworld-furnace-sc","id":"~~V1~~-2995731048005189266~~3kc41CJFkWxOGMEUIRkiEw3AFxFEEzKwkrc358-YLmt9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kPTqHQWACbGLGXeLPIXZL-KhjP0WfPasi5NL-UPwDyHKnQo5CV9JIn-aTKexzYsSfgg41dgAZMtE3ficY8PD7d0M_eRUbG2dmb3ionqIQwn6ME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","views":"0","thrf":"true"}],"fpl":"Below Home Thumbnails","cpad":"0px","fb":"1"},{"ri":"e910ce266ef4ce0885ce6725372ab39a","uuip":"Feed - Below Home Thumbnails","uip":"Below Home Thumbnails | Card 9","ppb":"CPMC","m":"organic-thumbs-feed-01-mp","v":[{"thumbnail":"https://d3pc1xvrcw35tl.cloudfront.net/ln/images/420x315/screenshot-2024-02-09-150213_202402687672.png","description":"Ravindra Jadeja Claps Back at Father&#39;s Allegations, Defends Wife Rivaba Amid Family Feud - India all-rounder Ravindra Jadeja has responded strongly to his father, Anirudhsinh Jadeja&#39;s recent interview blaming his wife, Rivaba, for ... Find Latest cricket articles and live match coverage on www.lokma","title":"Ravindra Jadeja Claps Back at Father&#39;s Allegations, Defends Wife Rivaba Amid Family Feud","type":"text","published-date":"1707490950","url":"https://www.lokmattimes.com/cricket/news/ravindra-jadeja-claps-back-at-fathers-allegations-defends-wife-rivaba-amid-family-feud-a507/","duration":"0","sig":"5db7d2fdb1cbd373e267ac884d28e093500c73036c89","item-id":"5250120027539696642","uploader":"","id":"/cricket/news/ravindra-jadeja-claps-back-at-fathers-allegations-defends-wife-rivaba-amid-family-feud-a507","category":"cricket","views":"0"},{"thumbnail":"https://d3pc1xvrcw35tl.cloudfront.net/ln/images/420x315/gilr-education45-2024021174170_202402687995.jpg","description":"Maharashtra Govt to Offer Free Higher Education for Girls from June: 600 Courses Including Medical, Engineering: In a significant move to promote girls&#39; education, the Maharashtra government has announced that it will provide free higher ... . Get all latest entertainment &amp; viral stories on www.lokm","title":"Maharashtra Govt to Offer Free Higher Education for Girls from June: 600 Courses Including Medical, Engineering","type":"text","published-date":"1707554414","url":"https://www.lokmattimes.com/maharashtra/maharashtra-govt-to-offer-free-higher-education-for-girls-from-june-600-courses-including-medical-a505/","duration":"0","sig":"d5905ddeb5445cf3392378477a75f11e876a984eaf49","item-id":"-8311282598269127545","uploader":"","id":"/maharashtra/maharashtra-govt-to-offer-free-higher-education-for-girls-from-june-600-courses-including-medical-a505","category":"maharashtra","views":"0"}],"fpl":"Below Home Thumbnails","cpad":"0px","fb":"1"},{"ri":"ae1cd8a0395b036f77541fcbb9ceafdb","uuip":"Feed - Below Home Thumbnails","uip":"Below Home Thumbnails | Card 10","ppb":"COUE","m":"thumbs-feed-01-b","v":[{"thumbnail":"http://cdn.taboola.com/libtrc/static/thumbnails/7520574800fd7dc3d210fd833bd2b6a0.jpg","all-thumbnails":"http://cdn.taboola.com/libtrc/static/thumbnails/7520574800fd7dc3d210fd833bd2b6a0.jpg!-#@886x590","tat":"TABOOLA","origin":"default","thumb-size":"886x590","description":"","placement-label":"Below Home Thumbnails | Card 10","title":"Así es como te deshaces rápidamente de los mosquitos - ¡Simple!","type":"text","published-date":"1525441495","branding-text":"Consejos y Trucos","url":"https://www.consejosytrucos.co/hogar-jardin/el-pone-cafe-en-el-jardin-y-lo-quema/?utm_campaign=4itx0egs&utm_source=Taboola&utm_medium=native&utm_term=lokmat-englishlokmatcom&utm_content=UlDrs7koACQIXJ2DrPkMJfJmGf-ItmybR2lGYGMegcs=&tclid=GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiD7rkMolMjOrtLs26Q1","uic":"true","duration":"0","sig":"6ecd7e4a9b9cb45ddfad83153a4ea4fec6bdd3f8f09c","item-id":"~~V1~~-5383652463400448193~~oYyqxaKlPgWZufCGKcABWv4i0_SAozKplSbyNiD39dV9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kCf1P1jxHcE5td_gGW9B2uLLW3wWKeUWU0uBIeforxYsGyY8m_OuVBytqU70QOUx8k9OQwdGDLr4xxVRwmTEep7zlXmb7dlTefXS2ipp7SDYME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","tblci":"GiD0CEukBO39IBIvbRuQopcYciY8nHlqLW0P8vd6O0m5JiD7rkMolMjOrtLs26Q1","uploader":"","is-syndicated":"true","publisher":"lemaleadmachine-sc","id":"~~V1~~-5383652463400448193~~oYyqxaKlPgWZufCGKcABWv4i0_SAozKplSbyNiD39dV9_9IWyVTZYEw3zPc60dwzHu_TYvngZ3fIkOCpr71_kCf1P1jxHcE5td_gGW9B2uLLW3wWKeUWU0uBIeforxYsGyY8m_OuVBytqU70QOUx8k9OQwdGDLr4xxVRwmTEep7zlXmb7dlTefXS2ipp7SDYME3FIWDZNlT7mtVeMfctYZpInogMnLXIzf74SLDck6Q","views":"0","thrf":"true"},{"thumbnail":"https://d3pc1xvrcw35tl.cloudfront.net/ln/images/420x315/ind-1002-2024021174292_202402688052.jpeg","origin":"default","description":"BCCI Announces India’s Squad for Final Three Tests Against England in IDFC First Bank Series - The Board of Control for Cricket in India (BCCI) has announced India&#39;s squad for the final three Tests of ... Find Latest cricket articles and live match coverage on www.lokmattimes.com","title":"BCCI Announces India’s Squad for Final Three Tests Against England in IDFC First Bank Series","type":"text","published-date":"1707563337","url":"https://www.lokmattimes.com/cricket/news/bcci-announces-indias-squad-for-final-three-tests-against-england-in-idfc-first-bank-series-a505/","duration":"0","sig":"b22f2b4ca62ab2d4030948158a3485a64719aeedff58","item-id":"-6480849639529511917","uploader":"","id":"/cricket/news/bcci-announces-indias-squad-for-final-three-tests-against-england-in-idfc-first-bank-series-a505","category":"cricket","views":"0"},{"thumbnail":"https://d3pc1xvrcw35tl.cloudfront.net/ln/images/420x315/mumbai-police-1019x573-202305543260_202402688407.jpg","origin":"default","description":"Bomb Blast Threat in Mumbai: FIR Filed After Anonymous Emailer Threatens Tonts.length&&void 0!==e?e:"",t={};return e.substring(e.indexOf("?")+1).split("&").forEach(function(e){e=e.split("=");0<e.length&&(t[e[0]]=e[1]||"")}),t}(s=this._getPixel(l.pixel)||"")).cirid,d=c.dast,c["vid-dast"]),h=void 0,p=Te(c),f=(l.lineItemId||(h=Te(d)),l.getValueByKey=function(e,t){return this.dsm&&this.dsm.hasOwnProperty(t)?this.dsm[t]:e.get(t)}.bind(l,this.store),l.advType===y.DIRECT||l.advType===y.PMP_DIRECT);if((l=Object.assign(l,m(m(m(m(m(m(m(m(m({score:-1,waterfallTagId:n,created:(new Date).getTime(),dp:u?u.replace(/http:\/\/|.com|https:\/\/|.com/g,""):"na",dpFull:u||"na",conversionPixels:l.conversionPixels||[],ts:Date.now(),wfIndex:this._wfIndexCalculation(),url:l.url?(u=me(l.url,this.store),r=void 0,u&&Z&&(r=void 0,0===u.indexOf("http:")&&(r=u.replace("http:","https:")),r=0!==u.indexOf("//")||Z.get("secured_protocol")?r:"https:"+u)||u):"",vast:l.vast?me(l.vast,this.store):"",pixel:s,eventTrackers:l.etrk||{},jsTrackers:l.jstrk||[],brand:l.brand||"",dsm:l.dsm||{},rollType:this.currentRollType,pubId:this.pubid,tagId:this.tagid,isRon:this.isRon,cstmdl:l.cstmdl||-1,singleAd:1===l.sa,adjacencyAd:1===l.adjac},void 0!==this.defaultTagPrice&&"price",l.price||this.defaultTagPrice),a&&"cirid",a),"dast",d),"vidDast",c),"campaignId",p&&p.hasOwnProperty("cipid")?p.cipid:-1),"lineItem",(l.lineItemId||h&&h.cicmp||"").toString()),"isDirectDemand",f),"isDirectOrPMP",f||l.advType===y.PMP),"isRTB",l.advType===y.OPEN_EXCHANGE_RTB_DSP||l.advType===y.OPEN_EXCHANGE_RTB_SSP),this._overrideParamsByDemand(l),this._decodeItemParams(l))).advType===y.PREBID)try{l.url=JSON.parse(l.url),l.isPrebid=!0,l.bidder=this._extractBidderName(l.url)}catch(e){continue}this._shouldDropAd(l)||(0<this.requiredViewabilityFactor&&!l.requiredViewability&&(l.requiredViewability=this._drawRequiredViewabilityByFactor(l)),this.enableAdxBlocking&&this._isIMATag(l)&&(this.gotAdxDemandInSession=!0),this._ignoreLineitem(l.lineItem)?this.store.get(l.lineItem+".failsRow")?this.store.incr(l.lineItem+".failsRow"):this.store.set(l.lineItem+".failsRow",1):o.push(l),this.store.get(l.lineItem)||this.store.set(l.lineItem,{failsRow:0,tries:0,conversions:0,fails:0}),l.lineItemStats=function(e){try{return JSON.parse(v(e))}catch(e){return{}}}(this.store.get(l.lineItem)))}0<o.length?(i.tags=o,i.data=new Re(this.store,this.staticWf?1:this.wfGenerator.getWfCounter()),this.onWaterfallSuccess(i)):(this.debugTracker.error("runWaterfall","Failed to get any tags!"),this._handleWaterfallError("no-clean-tags",t))}else e=i&&i.tags?"Failed to decode empty server response":"No tags returned from waterfall response!",this.debugTracker.warn("runWaterfall",e),this._updateWaterfallFailure("no-tags",t)}else this.debugTracker.info("runWaterfall","Empty Waterfall!"),this._updateWaterfallFailure("empty-response",t)}},{key:"_extractBidderName",value:function(e){e=e.bidderRequest;if(e){e=e.bids;if(e&&0<e.length)return e[0].bidder}}},{key:"_updateWaterfallFailure",value:function(e,t){this.store.incr("waterfallFailsInARow"),this.store.set("waterfallSuccessesInARow",0),this._handleWaterfallError(e,t)}},{key:"_handlePassbackTrigger",value:function(){1===this.waterfallIndex&&this.store.emit("emptyFirstWaterfall")}},{key:"_shouldDropAd",value:function(e){for(var t in this.adsToDrop)if(this._shouldDropAdByType(e,t))return!0;return!(!this.store.get("isAmp")||!(e.getValueByKey("drponamp")||!e.requiredViewability&&this.store.get("dropRv0Amp")))||!((!e.requiredViewability||!this.store.get("iosAutoPlayDisabled"))&&!(this.store.get("publisherVideoDetected")&&this._isIMATag(e)&&this.store.get("drpAdxOnPublisherVideoDetected"))&&(!this.enableAdxBlocking||!this._shouldForceAdxBlockOnItem(e))&&(!e.isPrebid||this.store.get("prebid.isActive")&&this._isPrebidBidderSupported(e.bidder)))}},{key:"_isPrebidBidderSupported",value:function(e){return-1<(this.store.get("prebid.supported")||[]).indexOf(e)}},{key:"_shouldForceAdxBlockOnItem",value:function(e){e=parseInt(e.advId);return-1<this.adxBlock.advIds.indexOf(e)&&(this.adxBlock.mode===We||(this.adxBlock.mode===Ue?this.gotAdxDemandInSession:this.adxBlock.mode===je&&this.store.get("hasAdxInQueue")))}},{key:"_shouldDropAdByType",value:function(e,t){return this.adsToDrop[t]&&e.hasOwnProperty(t)&&e[t]&&!(Ve(e)&&De(e))}},{key:"_drawRequiredViewabilityByFactor",value:function(e){var t=se(0,100)<=this.requiredViewabilityFactor&&e&&(e.advType===y.OPEN_EXCHANGE_RTB_DSP||e.advType===y.OPEN_EXCHANGE_RTB_SSP);return t&&(e.requiredViewabilityDrawn=!0),t}},{key:"_overrideParamsByDemand",value:function(e){return this.store.get("ovrtgbydc")?e.getValueByKey("ovrdtag"):{}}},{key:"_addRoundTripDuration",value:function(){var e=Date.now()-this.lastRun;this._roundTripAverageDuration=parseInt((this._roundTripAverageDuration*this._roundTripsCount+e)/(this._roundTripsCount+1)),this.store.set("waterfall_data.last_duration",e),this.store.set("waterfall_data.average_duration",this._roundTripAverageDuration),this._roundTripsCount++}},{key:"_ignoreLineitem",value:function(e){return 0<this.lineitemMaxFails&&((e=this.store.get(e))?e.failsRow:-1)>this.lineitemMaxFails}},{key:"_decodeItemParams",value:function(e){return Object.assign({rpox:this._decodeValue(e.rpox),alfrox:this._decodeValue(e.alfrox),frox:this._decodeValue(e.frox),itemType:e.t},e.ex&&{crId:e.ex.ecrid,stId:e.ex.s,cmpgnId:e.ex.ecid},e.ex&&e.ex.b&&{brand:this.encryptWaterfallResponse?e.ex.b:this._decodeText(e.ex.b)})}},{key:"_decodeValue",value:function(e){return this.encryptWaterfallResponse?e:(2530^e)/1e3}},{key:"_decodeText",value:function(e){for(var t=function(e){try{for(var t=e.length,i=[],n=0;n<Ae.length;n++)i[Ae.charCodeAt(n)]=n;for(var r,o,s,a=Ae.charAt(64),d=(a&&-1!==(r=e.indexOf(a))&&(t=r),[]),l=0,u=0;u<t;u++)u%4&&(o=i[e.charCodeAt(u-1)]<<u%4*2,s=i[e.charCodeAt(u)]>>>6-u%4*2,d[l>>>2]|=(o|s)<<24-l%4*8,l++);for(var c=[],u=0;u<l;u++){var h=d[u>>>2]>>>24-u%4*8&255;c.push(String.fromCharCode(h))}return decodeURIComponent(escape(c.join("")))}catch(e){return""}}(e),i="",n=0;n<t.length;n++){var r=n%"PlAyER".length,o=t[n].charCodeAt(0).toString(10),r="PlAyER"[r].charCodeAt(0).toString(10);i+=String.fromCharCode(o^r)}return i}},{key:"_firePiggies",value:function(e){var t=this.store.get("fire_piggies");if(t&&!(5<=this.wfGenerator.getWfCounter()))for(var i=0;i<e.length;i++){var n=e[i];if(n.url){n=n="string"==typeof(n=n.url)&&0!==(n=n.replace(/^(http[s]?:|ftp:)/g,"")).indexOf("//")?"//"+n:n;try{(new Image).src=n}catch(e){this.debugTracker.error("_fireIframePig - Malformed url!",e)}}}}},{key:"_handleWaterfallError",value:function(e){this.store.incr("emptyWaterfallsInARow"),this.passedMaxEmptyWaterfalls()&&this._sendMaxEmptyWaterfallPixel(),this._addRoundTripDuration(),this.onWaterfallError(e),this._handlePassbackTrigger()}},{key:"_sendMaxEmptyWaterfallPixel",value:function(){this.fireMaxEmptyWaterfallPixel&&ve(fe(h.maxEmptyWfs,this.store))}},{key:"_getPixel",value:function(e){var t;if(e)return(t=(t=new RegExp(/src=[\"|\']([^"]+)[\"|\']/).exec(e))&&1<t.length&&t[1]?t[1]:e).substring(t.indexOf("//"))}},{key:"onWaterfallError",value:function(){}},{key:"onWaterfallSuccess",value:function(){}},{key:"SetWaterfallError",value:function(e){this.onWaterfallError=e}},{key:"SetWaterfallSuccess",value:function(e){this.onWaterfallSuccess=e}},{key:"SetShouldRun",value:function(e){this.shouldRun=e||function(){}}},{key:"GetCounter",value:function(){return this.wfGenerator.getWfCounter()}},{key:"_getRollType",value:function(){var e=this.store.get("contentSchedule")||{},t=null,i=Object.keys(e)||[];return this.staticWf||1===this.wfGenerator.getWfCounter()?t=e[i[0]]:0<i.length&&(t=e[i[1]]),this.currentRollType=t?t.roll_type:"",this.pubid=t?t.pubid:0,this.tagid=t?t.tagid:0,t}},{key:"_stop",value:function(){clearTimeout(this.wfInterval)}},{key:"start",value:function(){this.startNextWfTimeout()}},{key:"stop",value:function(){this._stop()}},{key:"_onQueueStatusChanged",value:function(e){function t(e){return(e=Object.assign({},e)).aid=e.cstmdl=e.dp=e.pid=void 0,""===e.br&&(e.br=void 0),e}this.queueStatus={size:e.size,prevItems:e.previousQueue.map(t),items:e.items.map(t)}}},{key:"dropAds",value:function(e){this.adsToDrop.hasOwnProperty(e)&&!this.adsToDrop[e]&&(this.adsToDrop[e]=!0)}},{key:"addWfParameter",value:function(e,t){void 0!==t&&(this.wfParamsFromUnit[e]=encodeURIComponent(t))}},{key:"updateWfParameter",value:function(e,t){this.addWfParameter(e,t)}},{key:"removeWfParameter",value:function(e){this.wfParamsFromUnit[e]&&(this.wfParamsFromUnit[e]=void 0,delete this.wfParamsFromUnit[e])}},{key:"_incrementWfCounter",value:function(){this.wfGenerator.increaseWfCounter(),this.store.set("waterfallIndex",this.wfGenerator.getWfCounter())}},{key:"_isTbWfResponseExists",value:function(){return!!this.store.get("firstWfRes")}},{key:"_onTbWfResponseSuccess",value:function(){if(this._isTbWfResponseExists())try{return this._handleTbWfResponse(),!0}catch(e){this.debugTracker.error("tbWaterfallResponse",e)}return!1}},{key:"_handleTbWfResponse",value:function(){var e=this.wfGenerator.getWfCounter()-1;this.waterfallIndex=e,this._handleWaterfallSuccess(this.store.get("firstWfRes")),this.store.set("firstWfRes",void 0)}}])&&Be(e.prototype,t),i&&Be(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(),Ge=d(6);function ze(){var e={};try{e=window.cmTag.config}catch(e){return{}}var t,i={};for(t in e)0===t.indexOf("player.settings.")&&(i[t.substr(16,t.length-16)]=function(e){if(/^\d+$/.test(e))return parseInt(e);if(/^true$|^false$/g.test(e))return"true"===e||!0===e;return e}(e[t]));return i}function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],d=!0,l=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;d=!1}else for(;!(d=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);d=!0);}catch(e){l=!0,r=e}finally{try{if(!d&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||function(e,t){var i;if(e)return"string"==typeof e?Ke(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ke(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Ye(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=qe(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=qe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==qe(e)?e:String(e)}(n.key),n)}}var Xe=d(7),Je=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");Xe.mixin(this),this._maxListeners=100,this.data={},Object.assign(this.data,e);var t="154150.327",t=(t=(this.data.full_player_version=t).replace(/\./g,""),t=parseInt(t),this.data.debugLevels=e.debug||"",this.data.debug=-1!=e.debug.indexOf("*"),this.data.playerVersion=this.data.player_version=t,this.data.isInApp=void 0!==window.taboolaMobile,""),i="",n="";try{i=e.unit_name,t=e.abTest,n=e.unit_main_version}catch(e){}this.data.ab_test=t,this.data.unit_type=i,this.data.unit_version=n,this.data.isFirstImpression=!0,this.data.session_started=Date.now(),this.data.secured_protocol="https:"===(window&&window.location&&window.location.protocol),window.cmTag&&window.cmTag.config&&window.cmTag.config.contentClickUrl&&(this.data.contentClickUrl=window.cmTag.config.contentClickUrl),Z=this}var e,t,i;return e=r,(t=[{key:"incr",value:function(e){n.exists(e,this.data)||n.set(e,0,this.data);var t=n.get(e,!0,this.data)||0;if("number"==typeof t)return n.set(e,t+1,this.data),n.get(e,!1,this.data)}},{key:"decr",value:function(e){var t=n.get(e,!1,this.data);if("number"==typeof t)return n.set(e,t-1,this.data),n.get(e,!1,this.data)}},{key:"get",value:function(e){return-1===(e=e.toString()).indexOf(".")?this.data[e]:n.get(e,!1,this.data)}},{key:"getByTech",value:function(e,t){var i=this.get("dsm")||{};return i&&i.hasOwnProperty(t)&&i[t].hasOwnProperty(e)?i[t][e]:null}},{key:"getByAdInline",value:function(e,t){for(var i=this.get("dsm")||{},n=0;n<e.length;n++)for(var r=e[n],o=0,s=Object.entries(i);o<s.length;o++){var a=Qe(s[o],2),d=a[0],a=a[1],l=new RegExp(d,"ig");if(l.test(r.as)||l.test(r.at))return i[d];if(a.pvpdJs&&a.pvpdJsUrl&&t&&new RegExp(a.pvpdJsUrl,"i").test(t.textContent))return i[d]}return this.get("adstngs")}},{key:"set",value:function(e,t){e=e.toString(),n.set(e,t,this.data)}},{key:"getWfData",value:function(){var e,t=this.get("dsm")||{},i=[];for(e in t)/^\d+$/.test(e)&&t[e]&&t[e].hasOwnProperty("ftchVst")&&i.push({id:e,fv:t[e].ftchVst});return i}}])&&Ye(e.prototype,t),i&&Ye(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}(),n={set:function(e,t,i){var e=e.split("."),n=e.pop(),e=Ze(e,!0,i);return e&&n?e[n]=t:void 0},get:function(e,t,i){return Ze(e.split("."),t,i)},exists:function(e,t){return void 0!==this.get(e,!1,t)}};function Ze(e,t,i){for(var n,r=i||data,o=0;r&&(n=e[o]);o++)r=n in r?r[n]:t?r[n]={}:void 0;return r}var $e={wirewax:{adtnlscrpts:[{src:"//edge-player.wirewax.com/ww4release/javascripts/wirewax-iframe-api.js",clbk:function(){try{for(var e in this.adUnit.unsubscribe(this.vpaidEvents.AdImpression,"*"),this.adUnit.unsubscribe(this.vpaidEvents.AdVideoComplete,"*"),this.adUnit._iframe.contentWindow.wirewax.events.listeners)this.adUnit._iframe.contentWindow.wirewax.addEventListener(this.adUnit._iframe.contentWindow.wirewax.events.listeners[e],this.onIframeEvent)}catch(e){}}}],ifrmevts:{playerReady:"AdImpression",videoEnd:"AdVideoComplete"},hdtrgt:!0,wtfradpsdbfrrsmad:!0,prvnterlyadimpopp:!0,onrsm:function(){this.adUnit._iframe.contentWindow.wirewax.playerId="wirewax-ad-iframe",this.adUnit._iframe.contentWindow.wirewax.triggerEvent(this.adUnit._iframe.contentWindow.wirewax.events.triggers.CLOSE_WIDGET)}},"the trade desk":{extwnprc:!0,wnprcfld:"wp",pvpdJs:!0},dbm:{extwnprc:!0,wnprcfld:"pr"},doubleVerify:{pvpdJs:!0,pvpdJsUrl:"doubleverify"},moat:{pvpdJs:!0,pvpdJsUrl:"moatads"},ias_ad:{pvpdJs:!0}};function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=et(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=et(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==et(e)?e:String(e)}(n.key),n)}}var it=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.store=e,this._loadDSM()}var e,i,n;return e=t,(i=[{key:"_loadDSM",value:function(){this.stopped||this.store.set("dsm",$e)}},{key:"destroy",value:function(){this.stopped||(this.stopped=!0,this.store=void 0)}}])&&tt(e.prototype,i),n&&tt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=nt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=nt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==nt(e)?e:String(e)}(n.key),n)}}var ot=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.store=e,this.fireLowNetworkDownlinkPixel=ee(parseInt(this.store.get("frdwnlnkpxls"))),this.effectiveTypes={"slow-2g":1,"2g":2,"3g":3,"4g":4},this.types={bluetooth:1,cellular:2,ethernet:3,none:4,wifi:5,wimax:6,other:7,unknown:8},this.navigatorConnection={},this._detectConnectionType()}var e,i,n;return e=t,(i=[{key:"_detectConnectionType",value:function(){var n=this,e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e?(e.onchange=function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection,t=e.effectiveType||"",i=e.type||"";n.navigatorConnection={browserSupport:!0,downlink:e.downlink||0,effectiveType:t,type:i,effectiveTypeId:n.effectiveTypes.hasOwnProperty(t)?n.effectiveTypes[t]:0,typeId:n.types.hasOwnProperty(i)?n.types[i]:0,rtt:e.rtt||0,saveData:e.saveData||!1},n.store.set("navigatorConnection",n.navigatorConnection),n.store.emit("navigatorConnectionChange",n.navigatorConnection),n._sendPixelIfDownlinkLow()})():(this.navigatorConnection={browserSupport:!1},this.store.set("navigatorConnection",this.navigatorConnection))}},{key:"_sendPixelIfDownlinkLow",value:function(){var e;this.fireLowNetworkDownlinkPixel&&this.navigatorConnection&&void 0!==(e=this.navigatorConnection.downlink)&&e<this.store.get("dwnlnktrshld")&&ve(fe(h.lowNetworkDownlink,this.store))}}])&&rt(e.prototype,i),n&&rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),st={1:"dialup",2:"wired",3:"wifi",4:"mobile",5:"satellite"};function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t,i){return(t=function(e){e=function(e,t){if("object"!=at(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=at(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==at(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var p="iOS",lt="Android",ut="Fire OS",ct="Firefox",ht="Safari",pt="IE",ft=dt(dt(dt({},lt,dt(dt({"Chrome Mobile":53,Chromium:53,"Firefox Mobile":49,"Firefox Focus":49,Android:7,"Android Webkit":7,"Amazon Silk Browser":71,"Facebook on Android":void 0,"Opera Mobile":void 0,"Opera Mini":void 0,"MIUI Browser":void 0,"Yandex browser":void 0,"UC Browser":void 0,"Samsung Browser":void 0},"Edge",void 0),"Opera",void 0)),p,{"Firefox on iOS":7}),ut,{"Amazon Silk Browser":71}),e=d(0),f=d.n(e),e=d(8),vt=d.n(e);function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=yt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=yt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==yt(e)?e:String(e)}(n.key),n)}}var gt=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.store=e,this.store.set("hasAdxInQueue",!1),this.event="queueStatusChanged",this.backfillPriority=this.store.get("mxbckflldlyitms")?this.store.get("bfprty"):void 0,this.previousQueue=[],this._initQueueStatus()}var e,i,n;return e=t,(i=[{key:"_initQueueStatus",value:function(){this.queueStatus={requiredViewabilityCount:0,nonRVCount:0,adxCount:0,adLoadedCount:0,adxCard:!1,size:0,singleAd:!1,items:[],previousQueue:[],adjacencyAd:!1}}},{key:"onItemRemovedFromQueue",value:function(e){var t=this._getItemFromQueue(e);t&&(27==e.t&&this.queueStatus.adxCount--,(t=Object.assign({},t)).vw=e.vpaidWrapper?e.vpaidWrapper.getVpaidStatus():{},this.previousQueue.push(Object.assign({},t)))}},{key:"_getItemFromQueue",value:function(e){for(var t=0;t<this.queueStatus.items.length;t++){var i=this.queueStatus.items[t];if(e.wfIndex===i.seq&&parseInt(e.waterfallTagId)===i.wti)return i}return!1}},{key:"onScheduleChange",value:function(e,t){this._initQueueStatus(),this.queueStatus.size=e.length,this.queueStatus.previousQueue=this.previousQueue;for(var i=0;i<e.length;i++){var n=e[i];n.requiredViewability?this.queueStatus.requiredViewabilityCount++:this.queueStatus.nonRVCount++,n.vpaidWrapper.adLoadedFired&&this.queueStatus.adLoadedCount++,27==n.t&&this.queueStatus.adxCount++,n.singleAd&&(this.queueStatus.singleAd=!0),n.adjacencyAd&&(this.queueStatus.adjacencyAd=!0),this.queueStatus.items.push(this._getItemStatus(n))}this.setHasAdxInQueue(),this.emit(t)}},{key:"_getItemStatus",value:function(e){return{aid:e.advId,bf:e.priority===this.backfillPriority,br:e.brand,cmpid:e.campaignId,crid:e.creativeId,cstmdl:e.cstmdl,dp:e.dp,t:e.itemType,li:e.lineItemId,pid:e.pubId,rv:e.requiredViewability,pr:e.vpaidWrapper?e.vpaidWrapper.getPrice(!0):"",sa:e.singleAd,seq:e.wfIndex,wti:parseInt(e.waterfallTagId),vw:e.vpaidWrapper?e.vpaidWrapper.getVpaidStatus():{},mt:e.vpaidWrapper?e.vpaidWrapper.type:"",ves:e.vpaidWrapper?e.vpaidWrapper.earlySrcVPAID:void 0,adjc:e.adjacencyAd,hip:!!e.hip,alwsldr:1===e.alwsldr}}},{key:"emit",value:function(e){this.store.emit(e||this.event,this.queueStatus)}},{key:"setHasAdxInQueue",value:function(){this.store.set("hasAdxInQueue",0<this.queueStatus.adxCount)}}])&&mt(e.prototype,i),n&&mt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=_t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=_t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==_t(e)?e:String(e)}(n.key),n)}}var At=null,Et=function(){function o(e){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");if(!At){this.costModels={};var t,i=e.get("cpcvcmpgntps"),n=e.get("cstmdltps");for(t in n){var r=n[t];this.costModels[r]={costModel:r,type:t,isCPCV:-1<i.indexOf(r)}}At=this}return At}var e,t,i;return e=o,(t=[{key:"isCPCV",value:function(e){return this.costModels.hasOwnProperty(e)&&this.costModels[e].isCPCV}}])&&bt(e.prototype,t),i&&bt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(),g=d(5);function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Tt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Tt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Tt(e)?e:String(e)}(n.key),n)}}var wt=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.options=e,this.moatAbTest=this.options.tag.getValueByKey("mttst"),this.moatAbTest&&(this.moatAbTest+="_"),this.moatAbTest="".concat(this.moatAbTest).concat(this.options.store.get("unit_type")||"").concat(this.options.store.get("isMobile")?"_Mobile":"");e=this._createLevels();this.moatApiReference=function(e,t,i,n,r){var o,s,a=document.createElement("script"),d=[];t={adData:{ids:t,duration:i,url:r},dispatchEvent:function(e){this.sendEvent?(d&&(d.push(e),e=d,d=!1),this.sendEvent(e)):d.push(e)}},i="_moatApi"+Math.floor(1e8*Math.random());try{s=(o=e.ownerDocument).defaultView||o.parentWindow}catch(e){o=document,s=window}return s[i]=t,a.type="text/javascript",e&&e.insertBefore(a,e.childNodes[0]||null),a.src="https://z.moatads.com/"+n+"/moatvideo.js#"+i,t}(this.options.container||document.body,e,this.options.duration||0,this.options.moatPartnerCode,this.options.url),this.options.adElasticLogger.logMoatTracker(),this.events=[f.a.AdLoaded,f.a.AdStarted,f.a.AdImpression,f.a.AdVideoStart,f.a.AdClickThru,f.a.AdStopped,f.a.AdPlaying,f.a.AdPaused,f.a.AdVideoFirstQuartile,f.a.AdVideoMidpoint,f.a.AdVideoThirdQuartile,f.a.AdVideoComplete,f.a.AdVolumeChange],this.stopped=!1}var e,i,n;return e=t,(i=[{key:"_createLevels",value:function(){if(!this.options.tag)return{level1:"",level2:"",level3:"",level4:"",slicer1:"",slicer2:""};this._convertOppFieldsToZMoat();var e={level1:this.moatAbTest,level2:this.options.tag.advId,level3:this.options.tag.lineItemId,level4:this.options.store.get("domain")||"",slicer1:this.options.url,slicer2:this.options.tag.tagId,zMoataucdast:this.options.store.get("auc_dast"),zMoatdast:this.options.tag.vidDast,zMoatabt:"".concat(this.options.store.get("ab_test")).concat(re(this.options.tag,this.options.store)),zMoatpdast:this.options.playerDast,zMoatframetype:this.options.store.get("frameType"),zMoatsubunittypeid:this.options.store.get("subUnitType"),zMoatos:+this.options.tag.waterfallTagId+1,zMoatrv:this.options.tag.requiredViewability},e=Object.assign(e,this.options.zMoat),t=this.options.store.get("dast");return t.hasOwnProperty("cisid")&&(e.zMoatimprid=t.cisid),e}},{key:"_convertOppFieldsToZMoat",value:function(){for(var e in this.options.zMoat)this.options.zMoat["".concat("zMoat").concat(e.replace("-","").replace("_",""))]=this.options.zMoat[e],delete this.options.zMoat[e]}},{key:"dispatch",value:function(e){this.stopped||-1<this.events.indexOf(e.type)&&(this.moatApiReference.dispatchEvent(e),this.options.debugTracker.info("Moat dispatching event:".concat(e.type),e))}},{key:"dispose",value:function(){this.stopped=!0,this.moatApiReference=this.events=this.options=void 0}}])&&kt(e.prototype,i),n&&kt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],d=!0,l=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;d=!1}else for(;!(d=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);d=!0);}catch(e){l=!0,r=e}finally{try{if(!d&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||function(e,t){var i;if(e)return"string"==typeof e?It(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?It(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Ot(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=St(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=St(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==St(e)?e:String(e)}(n.key),n)}}var Ct=d(7),Vt="show",Dt="hide",Rt=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");Ct.mixin(this),this.store=e.store,this.video=e.video,this.target=e.video.parentElement||e.target,this.disclosureText=this.store.get("disctxt"),this.defaultVolume=this.store.get("dfltvlm"),this.showAdMuteButton=this.store.get("shwadmtebtn"),this.hideProgressBar=this.store.get("hdprgrsbr"),this.canOptOut=this.store.get("can_opt_out"),this.showAdsPlayPauseButton=this.store.get("shwadsplypusbtn"),this.disableProgressBarClicks=this.store.get("disprgrbrclk"),this.initProgressBarBackground=!1,this.eventsToEmitOnce=[],this.state={};e=Pt(e.controls,2);this.resumeAd=e[0],this.pauseAd=e[1],this._initElements(),this._setInitialState()}var e,i,n;return e=t,(i=[{key:"_initElements",value:function(){}},{key:"_setInitialState",value:function(){var e={volume:0,adDuration:0,adCurrentTime:0,adLastTickTime:0,isMuted:0===this.store.get("volume")||this.isMobile,isPaused:!1,vidDuration:30,vidCurrentTime:0,isVisible:!1};this.setState(e)}},{key:"setState",value:function(e){!this.stopped&&e&&0!==Object.keys(e).length&&(this.state=Object.assign(this.state,e),this._render())}},{key:"getFromState",value:function(e){return null!=(e=this.state[e])?e:void 0}},{key:"_stopPropagation",value:function(e){e.stopPropagation()}},{key:"_setSoundButtonDisplay",value:function(){var e=this;requestAnimationFrame(function(){e.stopped||(s(e.soundElement,Dt),s(e.soundElement,Vt),o(e.soundElement,e.showAdMuteButton?Vt:Dt))})}},{key:"_setPlayPauseButton",value:function(){var e=this;requestAnimationFrame(function(){e.stopped||e.showAdsPlayPauseButton!==Vt&&e.playPauseArea.classList.add(Dt)})}},{key:"_render",value:function(){this._renderVolumeControls(),this._renderProgressBar(),this._renderControlsVisibility(),this._renderSoundButton(),this._renderPlayPause()}},{key:"_renderVolumeControls",value:function(){this._onVolumeChange(),this._triggerVolumeChangeOnVpaid(),this._onSoundChangeCallback&&this._onSoundChangeCallback()}},{key:"_onVolumeChange",value:function(){this.state.isMuted?this._mute():this._unmute()}},{key:"_mute",value:function(){this.state.volume=0}},{key:"_unmute",value:function(){this.state.volume=this.defaultVolume}},{key:"_triggerVolumeChangeOnVpaid",value:function(){this.emit(_.VOLUME_CHANGE,this.state.volume,!0)}},{key:"setOnSoundChangeCallback",value:function(e){this._onSoundChangeCallback=e}},{key:"_renderProgressBar",value:function(){this.state.preventAdTicker?this._emitOnce(_.TIMEUPDATE_REGISTER):(this.adStartTime=Date.now(),this.adTickerId||(this.adTickerId=setInterval(this._onAdTicks.bind(this),250))),this._advanceProgressBar()}},{key:"_emitOnce",value:function(e){-1<this.eventsToEmitOnce.indexOf(e)||(this.eventsToEmitOnce.push(e),this.emit(e))}},{key:"_onAdTicks",value:function(){var e,t;this.stopped||(e=Date.now(),t={},this.state.isPaused?0!=this.state.adLastTickTime&&(this.adStartTime+=e-this.state.adLastTickTime):(t.adCurrentTime=(e-this.adStartTime)/1e3,t.adCurrentTime>this.state.adDuration&&(t.adCurrentTime=0<this.adStartTime?this.state.adDuration:0),t.vidDuration=t.adDuration,t.vidCurrentTime=t.adCurrentTime),t.adLastTickTime=e,this.setState(t))}},{key:"_advanceProgressBar",value:function(){var i=this;requestAnimationFrame(function(){var e,t;i.stopped||(e=100-(i.state.vidDuration-i.state.vidCurrentTime)/i.state.vidDuration*100,t="".concat(e,"%"),i.progressBarPercentager.style.width!==t&&(i._initializeProgressBarIfNeeded(e),i.progressBarPercentager.style.width=t))})}},{key:"_initializeProgressBarIfNeeded",value:function(e){var t=parseInt(this.progressBarPercentager.style.width);isNaN(t)||parseInt(e)<t?this.initProgressBarBackground||(this.initProgressBarBackground=!0,o(this.progressBarPercentager,"init_bg")):this.initProgressBarBackground&&(this.initProgressBarBackground=!1,s(this.progressBarPercentager,"init_bg"))}},{key:"_renderControlsVisibility",value:function(){var i=this;requestAnimationFrame(function(){var e,t;i.stopped||(t=i.state.isVisible?(e=Dt,Vt):(e=Vt,Dt),s(i.element,e),o(i.element,t))})}},{key:"_onPlayPauseClicked",value:function(e){var t;this.video&&((t=this.state.isPaused)?this.resumeAd():this.pauseAd(),this.setState({isPaused:!t}),this._stopPropagation(e))}},{key:"resetAdControls",value:function(){}},{key:"destroy",value:function(){}},{key:"_renderSoundButton",value:function(){}},{key:"_renderPlayPause",value:function(){}}])&&Ot(e.prototype,i),n&&Ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_={VOLUME_CHANGE:"volumeChange",TIMEUPDATE_REGISTER:"timeupdateRegister",GET_AD_DURATION:"getAdDuration",RESET_CONTROLS:"resetControls"};function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Mt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Mt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Mt(e)?e:String(e)}(n.key),n)}}function Lt(e,t,i){t=Bt(t);var n=e,t=Ft()?Reflect.construct(t,i||[],Bt(e).constructor):t.apply(e,i);if(t&&("object"===Mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Ft(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ft=function(){return!!e})()}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t){return(Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Wt=function(){var e,t=n,i=Rt;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function n(e){if(this instanceof n)return Lt(this,n,[e]);throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&Nt(t,i),t=n,(i=[{key:"_initElements",value:function(){this._renderElements(),this.mainArea=this.element.children[0],this.optOutElement=this.mainArea.children[0],this.progressBarArea=this.mainArea.children[1],this.progressBarBackground=this.progressBarArea.children[0],this.progressBarPercentager=this.progressBarArea.children[1],this.soundElement=this.mainArea.children[2],this.playPauseArea=this.mainArea.children[3],this.pauseBtn=this.playPauseArea.children[0],this.playBtn=this.playPauseArea.children[1],this._setProgressBarClickAbility(),this._setSoundButtonDisplay(),this._setPlayPauseButton(),this._addEventListeners(),this._hideProgressBarIfNeeded(),this._hideOptOutIfNeeded()}},{key:"_hideProgressBarIfNeeded",value:function(){this.hideProgressBar&&this.progressBarArea&&(this.progressBarArea.style.display="none")}},{key:"_hideOptOutIfNeeded",value:function(){this.canOptOut||o(this.optOutElement,"opt-out-hidden")}},{key:"_renderElements",value:function(){this.element=document.createElement("div"),this.element.className="video_controls hide",this.element.innerHTML="<div class='video_controls video_controls_main_area'>\n                <div class='title text'>".concat(this.disclosureText,"</div>\n                <div class='cm_video_controls_progressbar_area'>\n                    <div class='cm_video_controls_progressbar_bg white_bg'></div>\n                    <div class='cm_video_controls_progressbar blue_bg'></div>\n                </div>\n                <div class='cm_video_controls_mute interactive display_mute'></div>\n                <div class='cm_video_controls_playpause interactive'>\n                    <div class='pause hide'></div>\n                    <div class='play hide'></div>\n                </div>\n            </div>"),this.target.appendChild(this.element)}},{key:"_addEventListeners",value:function(){this.element.addEventListener("click",this._stopPropagation),this._bindedOnMuteClicked=this._onMuteClicked.bind(this),this.soundElement.addEventListener("click",this._bindedOnMuteClicked),this._bindedOnPlayPauseClicked=this._onPlayPauseClicked.bind(this),this.playBtn.addEventListener("click",this._bindedOnPlayPauseClicked),this.pauseBtn.addEventListener("click",this._bindedOnPlayPauseClicked)}},{key:"_onMuteClicked",value:function(e){var t;this.showAdMuteButton&&(0===this.state.volume&&this.emit(_.VOLUME_CHANGE,this.defaultVolume,!0),t={},this.store.set("forceMute",!this.state.isMuted),t.volume=this.state.isMuted?this.defaultVolume:0,t.isMuted=0===t.volume,this.setState(t),this._stopPropagation(e))}},{key:"resetAdControls",value:function(){this.emit(_.RESET_CONTROLS)}},{key:"_renderSoundButton",value:function(){this.state.isMuted?(s(this.soundElement,"display_unmute"),o(this.soundElement,"display_mute")):(s(this.soundElement,"display_mute"),o(this.soundElement,"display_unmute"))}},{key:"_renderPlayPause",value:function(){var e=this.state.isPaused?this.playBtn:this.pauseBtn,t=this.state.isPaused?this.pauseBtn:this.playBtn;t.classList.remove(Vt),t.classList.add(Dt),e.classList.remove(Dt),e.classList.add(Vt)}},{key:"destroy",value:function(){this.stopped=!0,this.adTickerId=clearInterval(this.adTickerId),this.element.removeEventListener("click",this._stopPropagation),this.soundElement.removeEventListener("click",this._bindedOnMuteClicked),this._bindedOnMuteClicked=this.mainArea=this.optOutElement=this.progressBarArea=this.progressBarBackground=this.progressBarPercentager=this.soundElement=void 0}},{key:"_setProgressBarClickAbility",value:function(){this.disableProgressBarClicks&&this.progressBarArea.classList.add("interactive")}}])&&xt(t.prototype,i),e&&xt(t,e),Object.defineProperty(t,"prototype",{writable:!1}),n}();function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=jt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=jt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==jt(e)?e:String(e)}(n.key),n)}}function Ht(e,t,i){t=zt(t);var n=e,t=Gt()?Reflect.construct(t,i||[],zt(e).constructor):t.apply(e,i);if(t&&("object"===jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Gt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Gt=function(){return!!e})()}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(e,t){return(qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Qt=function(){var e,t=n,i=Rt;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function n(e){if(this instanceof n)return Ht(this,n,[e]);throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&qt(t,i),t=n,(i=[{key:"_initElements",value:function(){this._renderElements(),this.playPauseArea=this.element.children[0],this.soundElement=this.element.children[1],this.progressBarArea=this.element.children[2],this.progressBarBg=this.progressBarArea.children[0],this.progressBarPercentager=this.progressBarArea.children[1],this._setProgressBarClickAbility(),this._setSoundButtonDisplay(),this._setPlayPauseButton(),this._addEventListeners()}},{key:"_renderElements",value:function(){this.element=document.createElement("div"),this.element.className="video_controls_mobile",this.element.innerHTML='<div class="mc-pause" style="pointer-events: all;"></div>\n            <div class="speaker mute" style="pointer-events: all;"></div>\n            <div class="mc-progressbar_area">\n                <div class=\'mc-progressbar_bg white_bg\'></div>\n                <div class=\'mc-progressbar_bg blue_bg\'></div>\n            </div>\n            <div class="tbl-text">'.concat(this.disclosureText,"</div>"),this.target.appendChild(this.element)}},{key:"_addEventListeners",value:function(){this._bindedOnMuteClicked=this._onMuteClicked.bind(this),this.soundElement.addEventListener("click",this._bindedOnMuteClicked),this._bindedOnPlayPauseClicked=this._onPlayPauseClicked.bind(this),this.playPauseArea.addEventListener("click",this._bindedOnPlayPauseClicked)}},{key:"_onMuteClicked",value:function(e){this.showAdMuteButton&&(0===this.state.volume&&this.emit(_.VOLUME_CHANGE,this.defaultVolume,!0),this.video.muteButtonClicked&&this.video.muteButtonClicked(),this.setState({isMuted:!this.state.isMuted}),this._stopPropagation(e))}},{key:"_renderSoundButton",value:function(){var e=this;requestAnimationFrame(function(){e.stopped||(e.state.isMuted?o:s)(e.soundElement,"mute")})}},{key:"_renderPlayPause",value:function(){var e=this;requestAnimationFrame(function(){e.state.isPaused?(s(e.playPauseArea,"mc-pause"),o(e.playPauseArea,"mc-play")):(s(e.playPauseArea,"mc-play"),o(e.playPauseArea,"mc-pause"))})}},{key:"destroy",value:function(){this.stopped=!0,this.adTickerId=clearInterval(this.adTickerId),this.soundElement.removeEventListener("click",this._bindedOnMuteClicked),this._bindedOnMuteClicked=this.soundElement=this.progressBarArea=this.progressBarBg=this.progressBarPercentager=void 0}},{key:"_setProgressBarClickAbility",value:function(){this.disableProgressBarClicks&&(this.progressBarArea.style="pointer-events: all;")}}])&&Ut(t.prototype,i),e&&Ut(t,e),Object.defineProperty(t,"prototype",{writable:!1}),n}(),Kt=function(e,t){return new(e?Qt:Wt)(t)};function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Yt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Yt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Yt(e)?e:String(e)}(n.key),n)}}var Jt={vastDuration:"vdr",videoElementDuration:"edr",vastWidth:"vwd",videoElementWidth:"ewd",vastHeight:"vht",videoElementHeight:"eht",vastBitrate:"vbr",videoElementUrl:"vu",videoElementType:"vt",vastOriginalType:"ot",vastSubType:"st",effectiveConnectionType:"ect",connectionType:"ct",vasts:"vst",videoUrlChanged:"vuc",winningPrice:"wp",vpaidUrl:"vpu"},Zt=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.store=e,this.hadImpression=!1,this.onNavigatorConnectionChange=this._onNavigatorConnectionChange.bind(this),this.store.on("navigatorConnectionChange",this.onNavigatorConnectionChange);e=this.store.get("navigatorConnection")||{};this.dast={vdr:void 0,edr:void 0,vwd:void 0,ewd:void 0,vht:void 0,eht:void 0,vbr:void 0,vu:void 0,vt:void 0,ot:void 0,st:void 0,ect:e.effectiveTypeId,ct:e.typeId,vst:[],vuc:!1,wp:void 0}}var e,i,n;return e=t,(i=[{key:"set",value:function(e){this.stopped||(e.hasOwnProperty("vu")&&""!==e.vu&&(e.vt=this._getVideoTypeFromUrl(e.vu),this.hadImpression)&&e.vu!==this.dast.vu&&(this.dast.vuc=!0),this.dast=Object.assign(this.dast,e))}},{key:"_getVideoTypeFromUrl",value:function(e){var t=void 0,e=e.match(/\.([^\/#?]+)([#?][^\/]*)?$/);return t=e&&1<e.length?e[1]:t}},{key:"addWrapper",value:function(e){this.stopped||(e.hasOwnProperty("wu")&&""!==e.wu&&(e.wu=this._getHostnameFromWrapperUrl(e.wu)),this.dast.vst.push(e))}},{key:"_getHostnameFromWrapperUrl",value:function(e){var t=document.createElement("a");return t.href=e,e=t.hostname,t=null,e}},{key:"_onNavigatorConnectionChange",value:function(e){this.stopped||(this.dast.ect=e.effectiveTypeId,this.dast.ct=e.typeId)}},{key:"get",value:function(){var e;if(!this.stopped)return e=this.dast,btoa(unescape(encodeURIComponent(v(e)))).replace(/\//g,"_").replace(/\+/g,"-")}},{key:"getByKey",value:function(e){return this.dast[Jt[e]||e]}},{key:"destroy",value:function(){this.stopped=!0,this.store.off("navigatorConnectionChange",this.onNavigatorConnectionChange),this.store=this.onNavigatorConnectionChange=this.dast=void 0}},{key:"onImpression",value:function(e,t){this.hadImpression=!0,this.dast.vu=e,t&&(this.dast.edr=t.duration,this.dast.ewd=parseInt(t.videoWidth),this.dast.eht=parseInt(t.videoHeight))}},{key:"getWrappers",value:function(){return this.dast.vst}}])&&Xt(e.prototype,i),n&&Xt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),b={VPAID:"vpaid",VIDEO:"video",ADX:"adx",UNKNOWN:"unknown"},A={FLV:"flv",WMV:"wmv",MP4:"mp4",WEBM:"webm",OGG:"ogg",QUICKTIME:"mov",VPAID:"javascript",FLASH:"flash",UNKNOWN:"unknown"},$t={unknown:{type:b.UNKNOWN,subType:A.UNKNOWN},"video/x-flv":{type:b.VIDEO,subType:A.FLV},"video/x-ms-wmv":{type:b.VIDEO,subType:A.WMV},"video/mp4":{type:b.VIDEO,subType:A.MP4},"video/webm":{type:b.VIDEO,subType:A.WEBM},"video/ogg":{type:b.VIDEO,subType:A.OGG},"video/quicktime":{type:b.VIDEO,subType:A.QUICKTIME},"application/javascript":{type:b.VPAID,subType:A.VPAID},"application/x-javascript":{type:b.VPAID,subType:A.VPAID},"text/javascript":{type:b.VPAID,subType:A.VPAID},"application/x-shockwave-flash":{type:b.VPAID,subType:A.FLASH}};function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ti(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=ei(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=ei(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ei(e)?e:String(e)}(n.key),n)}}var ii=d(7),ni=function(){function n(e,t,i){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");ii.mixin(this),this.watchVideoInterval=i.get("wtchvdointrvl"),this.unitPredictorsInterval=i.get("rprtvidsttsintrvl"),this.newCompletionByVideoProgress=i.get("q5byprgrss"),this.isMobile=i.get("isMobile")||!1,this.timeoutLengthToAdCompletion=e.tag.getValueByKey("".concat(this.isMobile?"mbl":"dsk","tmouttoadcmpltn")),this.newCompletionByVideoProgressFired=!1,this.wrapperIndex=e.wrapperIndex,this.debugTracker=e.debugTracker,this.stopped=!1,this.frameType=i.get("frameType"),this.maxDurationLimit=i.get("prftchmxlngth"),this.viewabilityCalcFallbackEnabled=e.tag.getValueByKey("vwclcflbkenbld")}var e,t,i;return e=n,(t=[{key:"prefetchVideo",value:function(e,t){var i=this;e===A.VPAID||e===b.VIDEO&&this.isIOS?this.video.addEventListener("loadedmetadata",function(){return i._onPrefetchVideoMetaData(t)}):(this.video.buffering=!0,this.playPromise=this.video.play(),null!=this.playPromise&&(this.playPromise=Ee(this.playPromise),this.debugTracker.info("Vpaid.video.play()"),this.playPromise.catch(function(e){!i.stopped&&i.debugTracker&&i.debugTracker.error("buffering video error:".concat(e))})))}},{key:"_onPrefetchVideoMetaData",value:function(e){this.video.duration<this.maxDurationLimit&&this._prefetchOverTempVideo(e)}},{key:"_prefetchOverTempVideo",value:function(e){var t,i=this;this.debugTracker.info("Vpaid._prefetchOverTempVideo()"),0!==this.frameType&&1!==this.frameType||(t=function(){var e=window;try{for(;e.document!==e.top.document;)e=e.top;return e}catch(e){return window}}())&&t.document&&t.document.body&&(this._createBufferingVideo(t,e),this.fakePlayPromise=this.bufferingVideo.play(),null!=this.fakePlayPromise)&&(this.fakePlayPromise=Ee(this.fakePlayPromise),this.fakePlayPromise.catch(function(e){!i.stopped&&i.debugTracker&&i.debugTracker.error("buffering video error:".concat(e))}))}},{key:"_createBufferingVideo",value:function(e,t){this.bufferingVideo=e.document.createElement("video"),this.bufferingVideo.id="prefetchWrapper".concat(this.wrapperIndex),this.bufferingVideo.src=t||this.playingMediaFile.mediaUrl,this.bufferingVideo.muted=!0,this.bufferingVideo.setAttribute("muted",""),this.bufferingVideo.setAttribute("playsinline",""),o(this.bufferingVideo,"buff-vid"),this.bufferingVideo.style.top="".concat(+this.wrapperIndex,"px"),e.document.body.appendChild(this.bufferingVideo)}},{key:"pausePrefetchVideo",value:function(){this.bufferingVideo&&(this.bufferingVideo.pause(),this.debugTracker.info("Vpaid.pausePrefetchVideo()"))}},{key:"_destroyPrefetchVideo",value:function(){this.bufferingVideo&&this.bufferingVideo.parentElement&&(this.bufferingVideo.pause(),this.bufferingVideo.removeAttribute("src"),this.bufferingVideo.load(),this.bufferingVideo.parentElement.removeChild(this.bufferingVideo),this.debugTracker.info("Vpaid._destroyPrefetchVideo()"))}},{key:"resumeAd",value:function(){this.stopped||(this.activeVideoElement&&this.watchVideoInterval&&this.activeVideoElement.duration?(this._emitCurrentTime(this.activeVideoElement.currentTime,this.activeVideoElement.duration),this.watchActiveVideoElement(),this._checkVideoProgress()):this._manuallyReportTimeProgress())}},{key:"_checkVideoProgress",value:function(){var e=this;setTimeout(function(){e.stopped||!e.activeVideoElement&&0!==e.activeVideoElement.currentTime||(e.manualCurrentVideoTime||(e.manualCurrentVideoTime=.05,e._emitCurrentTime(e.manualCurrentVideoTime)),e._manuallyReportTimeProgress())},50)}},{key:"_manuallyReportTimeProgress",value:function(){var e=this;this.stopped||!this.viewabilityCalcFallbackEnabled||this.manualTimeReportingInterval||(void 0===this.manualCurrentVideoTime&&(this.manualCurrentVideoTime=0,this._emitCurrentTime(this.manualCurrentVideoTime)),this.manualTimeReportingInterval=setInterval(function(){e.stopped||(e._emitCurrentTime(e.manualCurrentVideoTime),e.manualCurrentVideoTime+=.05)},50))}},{key:"_emitCurrentTime",value:function(e,t){e={currentTime:e.toFixed(3)};t&&(e.duration=t.toFixed(3)),this.emit("activeAdCurrentTime",e)}},{key:"pauseAd",value:function(){this.activeVideoElement&&this.watchVideoInterval?this.unwatchActiveVideoElement():this._stopManualTimeReportingInterval()}},{key:"stopAd",value:function(){this.stopped||(this.debugTracker.info("Vpaid -> stopAd()"),this.activeVideoElement&&this.watchVideoInterval&&this.unwatchActiveVideoElement(),this._stopManualTimeReportingInterval(),this.bufferingVideo&&(this.debugTracker.info("Vpaid -> stopAd() -> _destroyPrefetchVideo()"),this._destroyPrefetchVideo()))}},{key:"_fireAdImpression",value:function(){this._onAdImpression()}},{key:"_onAdImpression",value:function(){this.stopped||(this.activeVideoElement=this.getActiveVideoElement())}},{key:"watchActiveVideoElement",value:function(){this._sampleVideoCurrentTimeIntervalId||(this._sampleVideoCurrentTimeIntervalId=setInterval(this._sampleVideoCurrentTimeHandler.bind(this),50))}},{key:"unwatchActiveVideoElement",value:function(){this._sampleVideoCurrentTimeIntervalId&&(clearInterval(this._sampleVideoCurrentTimeIntervalId),this._sampleVideoCurrentTimeIntervalId=void 0)}},{key:"_sampleVideoCurrentTimeHandler",value:function(){this.reportCurrentTimeToUnitPredictors(),this.testNewCompletion()}},{key:"reportCurrentTimeToUnitPredictors",value:function(){var e;this.unitPredictorsInterval&&this.activeVideoElement.currentTime&&this.activeVideoElement.duration&&(e=Math.floor(1e3*this.activeVideoElement.currentTime/this.unitPredictorsInterval))&&this._currentIntervalMultiplier!==e&&(this._currentIntervalMultiplier=e,this._emitCurrentTime(this.activeVideoElement.currentTime,this.activeVideoElement.duration))}},{key:"testNewCompletion",value:function(){this.newCompletionByVideoProgress&&!this.newCompletionByVideoProgressFired&&1e3*this.activeVideoElement.currentTime>this.timeoutLengthToAdCompletion&&(this.emit(g.outer.NewCompletion),this.newCompletionByVideoProgressFired=!0)}},{key:"getActiveVideoElementDuration",value:function(){return this.activeVideoElement?this.activeVideoElement.duration:null}},{key:"onComplete",value:function(){this._stopManualTimeReportingInterval(),this._destroyPrefetchVideo()}},{key:"_stopManualTimeReportingInterval",value:function(){this.manualTimeReportingInterval&&(this.manualTimeReportingInterval=clearInterval(this.manualTimeReportingInterval))}}])&&ti(e.prototype,t),i&&ti(e,i),Object.defineProperty(e,"prototype",{writable:!1}),n}();function ri(e){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=ri(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=ri(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ri(e)?e:String(e)}(n.key),n)}}function si(e,t,i){t=E(t);var n=e,t=ai()?Reflect.construct(t,i||[],E(e).constructor):t.apply(e,i);if(t&&("object"===ri(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function ai(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ai=function(){return!!e})()}function di(){return(di="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function li(e,t){return(li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ui="progress",ci=function(){var e,t=r,i=ni;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function r(e,t,i){var n;if(this instanceof r)return(n=si(this,r,[e,t,i])).adElasticLogger=t,n.store=i,n.target=e.slot,n.video=e.videoSlot,n.mediaFiles=e.vpaidFiles,n.mediaFile,n.mediaUrl,n.playerWidth=0,n.playerhHeight=0,n.adVolume=0,n.skipTime=60,n.eventsToFire={adLoaded:!1,adImpression:!1},n.adPaused=!0,n.playerReady=!1,n.videoLength=0,n.vpaidEvents=Object.assign({},f.a),n._createBindedCallback(),n.playerDAST=e.playerDAST,n.tag=e.tag,e.trackingPixelManager.hasPixels(ui)&&(n.progressEvents=e.trackingPixelManager.getPixels(ui)),n.store.on("stop",function(){n.stopAd()}),n.firstPauseAd=!0,n;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&li(t,i),t=r,(i=[{key:"subscribe",value:function(e,t){this.vpaidEvents[t]&&this.on(t,e)}},{key:"unsubscribe",value:function(e,t){this.vpaidEvents[t]&&void 0!==e&&this.off(t,e)}},{key:"handshakeVersion",value:function(){return"1.1"}},{key:"initAd",value:function(e,t,i){this.stopped||(this.resizeAd(e,t,i),this._prepareVideoTag())}},{key:"resizeAd",value:function(e,t,i,n){this.stopped||(this.playerWidth=parseInt(e),this.playerhHeight=parseInt(t),this.video.style.width=this.playerWidth+"px",this.target.style.width=this.playerWidth+"px",this.video.style.height=this.playerhHeight+"px",this.target.style.height=this.playerhHeight+"px",this.video.setAttribute("width",this.playerWidth),this.target.setAttribute("width",this.playerWidth),this.video.setAttribute("height",this.playerhHeight),this.target.setAttribute("height",this.playerhHeight),this._resizeAd(this.playerWidth,this.playerhHeight,i,n))}},{key:"startAd",value:function(){this._bindedOnPlay(),this.startAdFired=!0}},{key:"_onStartAd",value:function(){this.debugTracker.info("VideoVpaid -> startAd()"),this._fireAdImpression(),this.debugTracker.info("VideoVpaid -> startad() -> _fireAdImpression()")}},{key:"pauseAd",value:function(){this.debugTracker.info("VideoVpaid -> pauseAd()"),di(E(r.prototype),"pauseAd",this).call(this),this.stopped||(this.video.pause(),this.firstPauseAd&&(this.debugTracker.info("VideoVpaid -> pauseAd() - reset currentTime"),this.video.currentTime=0,this.firstPauseAd=!1,this.video.buffering=!1))}},{key:"resumeAd",value:function(){var e;di(E(r.prototype),"resumeAd",this).call(this),this.stopped||(this._sendAdPlayingOnProgress=!0,this.video.play(),this.store.get("ads_started_fired"))||(e=new Event("AdResume"),dispatchEvent(e),this.emit(this.vpaidEvents.AdVideoResume))}},{key:"stopAd",value:function(){di(E(r.prototype),"stopAd",this).call(this),this.stopped||(this.stopped=!0,this.video.destroy(),this._disconnectFromVideoTag(),this.adElasticLogger=this.store=this.mediaFiles=this.target=this.video=this._onError=this.isReplayable=this.eventsToFire=this.progressEvents=void 0,setTimeout(this.onAfterStop,50))}},{key:"restartAd",value:function(){}},{key:"skipAd",value:function(){this.stopped||(this.emit(this.vpaidEvents.AdSkipped),this.stopAd())}},{key:"expandAd",value:function(){}},{key:"collapseAd",value:function(){}},{key:"getAdVolume",value:function(e){e&&e(null,this.adVolume)}},{key:"getAdDuration",value:function(){return this.video&&this.video.duration||this.videoLength}},{key:"getAdRemainingTime",value:function(){return this.stopped?0:this.video.remainingTime}},{key:"getAdWidth",value:function(){return this.video.videoWidth}},{key:"getAdHeight",value:function(){return this.video.videoHeight}},{key:"getAdIcons",value:function(){return[]}},{key:"getAdCompanions",value:function(){return[]}},{key:"getAdExpanded",value:function(){return!0}},{key:"getAdLinear",value:function(){return!0}},{key:"setAdVolume",value:function(e){this.stopped||(this.video.volume=this.adVolume=parseFloat(e)<=1?e:parseInt(e)/100,this.video.muted=0==e)}},{key:"_connectToVideoTag",value:function(){this.stopped||(this.video.addEventListener("canplay",this._bindedOnCanPlay,!0),this.video.addEventListener("durationchange",this._bindedOnDurationChange,!0))}},{key:"_connectVideoEvents",value:function(){this.stopped||(this.video.addEventListener("play",this._bindedOnPlay,!0),this.video.addEventListener("playing",this._bindedOnPlaying,!0),this.video.addEventListener("pause",this._bindedOnPause,!0),this.video.addEventListener("ended",this._bindedOnComplete,!0),this.video.addEventListener("error",this._bindedOnPlayerError,!0),this.video.addEventListener("click",this._bindedOnClickThru,!0),this.video.addEventListener("volumechange",this._bindedOnVolumeChange,!0),this.video.addEventListener("timeupdate",this._bindedOnTimeUpdate,!0),this.video.addEventListener("firstQuartile",this._bindedOnProgress,!0),this.video.addEventListener("midpoint",this._bindedOnProgress,!0),this.video.addEventListener("thirdQuartile",this._bindedOnProgress,!0),this.video.addEventListener("timeProgress",this._bindedOnProgress,!0))}},{key:"_disconnectFromVideoTag",value:function(){this.video.removeEventListener("canplay",this._bindedOnCanPlay,!0),this.video.removeEventListener("play",this._bindedOnPlay,!0),this.video.removeEventListener("playing",this._bindedOnPlaying,!0),this.video.removeEventListener("pause",this._bindedOnPause,!0),this.video.removeEventListener("ended",this._bindedOnComplete,!0),this.video.removeEventListener("error",this._bindedOnPlayerError,!0),this.video.removeEventListener("click",this._bindedOnClickThru,!0),this.video.removeEventListener("volumechange",this._bindedOnVolumeChange,!0),this.video.removeEventListener("timeupdate",this._bindedOnTimeUpdate,!0),this.video.removeEventListener("firstQuartile",this._bindedOnProgress,!0),this.video.removeEventListener("midpoint",this._bindedOnProgress,!0),this.video.removeEventListener("thirdQuartile",this._bindedOnProgress,!0),this.video.removeEventListener("timeProgress",this._bindedOnProgress,!0),this.video.removeEventListener("durationchange",this._bindedOnDurationChange,!0),this._bindedOnCanPlay=this._bindedOnPlay=this._bindedOnPause=this._bindedOnComplete=this._bindedOnPlayerError=this._bindedOnVolumeChange=this._bindedOnTimeUpdate=this._bindedOnProgress=this._bindedOnDurationChange=this._bindedOnPlaying=this._bindedOnPlaying=this._bindedOnClickThru=void 0}},{key:"_loadVideoTagSources",value:function(){this.stopped||(this.playingMediaFile=this.video.appendVideoSources(this.mediaFiles),this.playingMediaFile&&(this.mediaUrl=this.playingMediaFile.mediaUrl,this.debugTracker.time("[VpaidWrapper".concat(this.wrapperIndex,"] video.src->onCanPlay")),this.playerDAST.set({vu:this.playingMediaFile.mediaUrl,vbr:this.playingMediaFile.bitrate,vwd:this.playingMediaFile.width,vht:this.playingMediaFile.height,ot:this.playingMediaFile.originalType,st:this.playingMediaFile.subType})))}},{key:"_createBindedCallback",value:function(){this._bindedOnCanPlay=this._onCanPlay.bind(this),this._bindedOnPause=this._onPause.bind(this),this._bindedOnComplete=this._onComplete.bind(this),this._bindedOnPlayerError=this._onPlayerError.bind(this),this._bindedOnVolumeChange=this._onVolumeChange.bind(this),this._bindedOnTimeUpdate=this._onTimeUpdate.bind(this),this._bindedOnProgress=this._onProgress.bind(this),this._bindedOnDurationChange=this._onDurationChange.bind(this),this._bindedOnPlay=this._onPlay.bind(this),this._bindedOnPlaying=this._onPlaying.bind(this),this._bindedOnClickThru=this._onClickThru.bind(this)}},{key:"_onCanPlay",value:function(){this.stopped||(this.videoLength=this.video.duration,this.adElasticLogger.logCanPlay(),this.logVideoBuffer("Canplay"),this.playerReady)||(this.playerReady=!0,this.debugTracker.info("VideoVpaid -> onCanPlay() -> _fireAdLoaded()"),this._fireAdLoaded(),this.debugTracker.timeEnd("[VpaidWrapper".concat(this.wrapperIndex,"] video.src->onCanPlay")),this.adPaused)||(this._fireAdImpression(),this.debugTracker.info("VideoVpaid -> onCanPlay() -> _fireAdImpression() because !adPaused"))}},{key:"_onPlay",value:function(e,t){this.debugTracker.info("VideoVpaid -> onPlay()"),this.stopped||(this.adPaused?(this.adPaused=!1,e&&(this.debugTracker.info("VideoVpaid -> onPlay() -> before setTimeout(_fireAdImpression()) in ".concat(t," ms")),setTimeout(function(){this._fireAdImpression(),this.debugTracker.info("VideoVpaid -> onPlay() -> setTimeout(_fireAdImpression())")}.bind(this),t))):this._sendAdPlayingOnProgress=!0)}},{key:"_onPlaying",value:function(e){this._conditionalDispatchAdPlaying()}},{key:"_conditionalDispatchAdPlaying",value:function(){this._sendAdPlayingOnProgress&&(this.emit(this.vpaidEvents.AdPlaying),this._sendAdPlayingOnProgress=!1)}},{key:"_onPause",value:function(){this.stopped||(this.adPaused=!0,parseInt(this.video.currentTime)<parseInt(this.video.duration)&&this.emit(this.vpaidEvents.AdPaused))}},{key:"_onComplete",value:function(){this.stopped||(this.emit(this.vpaidEvents.AdVideoComplete),this.stayAlive||this.emit(this.vpaidEvents.AdStopped),di(E(r.prototype),"onComplete",this).call(this))}},{key:"_onPlayerError",value:function(){this.stopped||0<--this.video.relevantSources||this.emit(this.vpaidEvents.AdError)}},{key:"_onVolumeChange",value:function(){this.stopped||this.emit(this.vpaidEvents.AdVolumeChange,{eventData:{volume:this.video.volume}})}},{key:"_onTimeUpdate",value:function(){this.stopped||(this.videoLength=this.getAdDuration(),this.videoLength&&this._conditionalDispatchAdPlaying())}},{key:"_onDurationChange",value:function(){this.stopped||this.emit(this.vpaidEvents.AdDurationChange)}},{key:"_onClickThru",value:function(e){e?(this._sendAdPlayingOnProgress=!0,this.video.play()):(this.emit(this.vpaidEvents.AdClickThru,{eventData:{playerHandles:!0}}),this.video.pause())}},{key:"_registerToProgressEvent",value:function(){this.progressEvents&&this.video.registerProgressEvents(this.progressEvents)}},{key:"_fireAdLoaded",value:function(){this.eventsToFire.adLoaded||this.emit(this.vpaidEvents.AdLoaded),this.eventsToFire.adLoaded=!0}},{key:"_fireAdImpression",value:function(){di(E(r.prototype),"_fireAdImpression",this).call(this),this.stopped||this.eventsToFire.adImpression||(this.emit(this.vpaidEvents.AdVideoStart),this.emit(this.vpaidEvents.AdImpression),this.debugTracker.timeEnd("[VpaidWrapper".concat(this.wrapperIndex,"] startAd->impression")),this.eventsToFire.adImpression=!0,this.adPaused=!1,this._registerToProgressEvent())}},{key:"_onProgress",value:function(e){"firstQuartile"===e.type?this.emit(this.vpaidEvents.AdVideoFirstQuartile):"midpoint"===e.type?this.emit(this.vpaidEvents.AdVideoMidpoint):"thirdQuartile"===e.type?this.emit(this.vpaidEvents.AdVideoThirdQuartile):"timeProgress"===e.type&&this._onTimeProgressEvent(e.data)}},{key:"_onTimeProgressEvent",value:function(e){for(var t=0;t<this.progressEvents.length;t++)this.progressEvents[t].fired||this.progressEvents[t].offset<=("time"===this.progressEvents[t].offsetType?e.time:e.pre)&&(this.progressEvents[t].fired=!0,this.emit(this.vpaidEvents.Progress,{eventData:this.progressEvents[t]}),this.progressEvents.splice(t,1))}},{key:"getDOMContainer",value:function(){return this.target}},{key:"getVideoUrl",value:function(){return this.stopped?"":this.video.getSrc()}},{key:"dontDie",value:function(){this.stayAlive=!0}},{key:"onAfterStop",value:function(){}},{key:"logVideoBuffer",value:function(e){this.adElasticLogger.logVideoBuffer(e,this.video.bufferSize)}},{key:"_prepareVideoTag",value:function(){}},{key:"_getMediaUrl",value:function(){return this.mediaUrl}},{key:"_resizeAd",value:function(e,t,i,n){}},{key:"getActiveVideoElement",value:function(){return this.video}},{key:"getMediaType",value:function(){return this.isOMID?6:1}},{key:"isOMID",get:function(){return this._isOMID},set:function(e){this._isOMID=e}}])&&oi(t.prototype,i),e&&oi(t,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function hi(e){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=hi(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=hi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==hi(e)?e:String(e)}(n.key),n)}}function fi(e,t,i){t=mi(t);var n=e,t=vi()?Reflect.construct(t,i||[],mi(e).constructor):t.apply(e,i);if(t&&("object"===hi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function vi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(vi=function(){return!!e})()}function yi(){return(yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mi(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function mi(e){return(mi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gi(e,t){return(gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var _i=function(){var e,t=n,i=ci;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function n(e,t,i){if(this instanceof n)return t=fi(this,n,[e,t,i]),window.setTimeout(e.onReady,0),t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&gi(t,i),t=n,(i=[{key:"startAd",value:function(){this.video.play(),yi(mi(n.prototype),"startAd",this).call(this)}},{key:"_onCanPlay",value:function(){this.playerReady||this.video.pause(),yi(mi(n.prototype),"_onCanPlay",this).call(this)}},{key:"_onPlay",value:function(){this.startAdFired&&yi(mi(n.prototype),"_onPlay",this).call(this,this.playerReady,200)}},{key:"_onClickThru",value:function(){this.stopped||(this.store.set("forcePause",!1),yi(mi(n.prototype),"_onClickThru",this).call(this,this.adPaused))}},{key:"_prepareVideoTag",value:function(){this.stopped||(this.debugTracker.info("VideoVpaidDesk -> _prepareVideoTag()"),this.video.removeAttribute("controls"),this._connectToVideoTag(),this._connectVideoEvents(),this._loadVideoTagSources())}},{key:"isReplayable",value:function(){return!0}},{key:"dontDie",value:function(){this.stayAlive=!0}}])&&pi(t.prototype,i),e&&pi(t,e),Object.defineProperty(t,"prototype",{writable:!1}),n}();function bi(e){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ai(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=bi(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=bi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==bi(e)?e:String(e)}(n.key),n)}}function Ei(e,t,i){t=k(t);var n=e,t=Ti()?Reflect.construct(t,i||[],k(e).constructor):t.apply(e,i);if(t&&("object"===bi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Ti(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ti=function(){return!!e})()}function T(){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ki(e,t){return(ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var wi=function(){var e,t=r,i=ci;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function r(e,t,i){if(this instanceof r)return(t=Ei(this,r,[e,t,i])).firstResumeAd=!0,t._initVpaid(e),window.setTimeout(e.onReady,0),t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&ki(t,i),t=r,(i=[{key:"initAd",value:function(e,t,i){T(k(r.prototype),"initAd",this).call(this,e,t,i)}},{key:"startAd",value:function(){this.debugTracker.info("VideoVpaidMob -> startAd()"),this.debugTracker.time("[VpaidWrapper".concat(this.wrapperIndex,"] startAd->impression")),this._onStartAd(this)}},{key:"resizeAd",value:function(e,t,i,n){T(k(r.prototype),"resizeAd",this).call(this,e,t,i,n),this.video.resize&&this.video.resize(e,t,n)}},{key:"stopAd",value:function(){this.stopped||(this.timeUpdateInterval=clearTimeout(this.timeUpdateInterval),T(k(r.prototype),"stopAd",this).call(this))}},{key:"_createBindedCallback",value:function(){T(k(r.prototype),"_createBindedCallback",this).call(this),this._bindedOnPlaying=this._onPlaying.bind(this)}},{key:"_prepareVideoTag",value:function(){this.stopped||(this.video.removeAttribute("controls"),this._connectToVideoTag(),this._loadVideoTagSources(),this.prefetchVideo("video",this.mediaUrl),this.video.muted=!0,this.video.setAttribute("playsinline",""),this.isIOS&&this.video.load())}},{key:"_connectToVideoTag",value:function(){this.stopped||(0<this.slowConnectionLength&&(this.slowConnectionTimeout=setTimeout(this._onSlowConnecionDetected.bind(this),1e3*this.slowConnectionLength)),T(k(r.prototype),"_connectToVideoTag",this).call(this),this.video.addEventListener("playing",this._bindedOnPlaying,!0),this.isIOS&&this.clickableTarget&&this.clickableTarget.addEventListener("click",this._bindedOnClickThru,!0))}},{key:"_disconnectFromVideoTag",value:function(){this.video.removeEventListener("playing",this._bindedOnPlaying,!0),this.isIOS&&this.clickableTarget&&this.clickableTarget.removeEventListener("click",this._bindedOnClickThru,!0)}},{key:"_loadVideoTagSources",value:function(){this.stopped||(this._sortMediaFiles(),T(k(r.prototype),"_loadVideoTagSources",this).call(this))}},{key:"_onPlaying",value:function(){this.stopped||(this.eventsToFire.adImpression&&(this.adPaused=!1),this.adElasticLogger.logVideoPlaying(this.video.currentTime))}},{key:"_onPlay",value:function(){var e=this;if(!this.stopped){if(this.debugTracker.info("VideoVpaidMob -> onPlay()"),this.video.play(),this.startAdFired)return this.emit(this.vpaidEvents.AdPlaying),!0;this.emit(this.vpaidEvents.AdVideoStart),T(k(r.prototype),"_onPlay",this).call(this,!0,2e3),this.timeUpdateInterval=setInterval(function(){e.stopped||e._onTimeUpdate()},250)}}},{key:"_onPlayerError",value:function(){T(k(r.prototype),"_onPlayerError",this).call(this)}},{key:"_onClickThru",value:function(e){if(e.preventDefault(),e.stopPropagation(),!this.stopped){if(this.isIOS){e=(new Date).getTime();if(null!==this.lastClickTime&&e-this.lastClickTime<=100)return;this.lastClickTime=e}T(k(r.prototype),"_onClickThru",this).call(this,this.adPaused)}}},{key:"_onCanPlay",value:function(){this.stopped||(this.slowConnectionTimeout=clearTimeout(this.slowConnectionTimeout),this._preventAdLoadIfVideoBufferTooShort())||T(k(r.prototype),"_onCanPlay",this).call(this)}},{key:"isReplayable",value:function(){return!0}},{key:"_initVpaid",value:function(e){this.videoLength=e.extra.duration||30,this.clickableTarget=e.clickableTarget||null,this.tag=e.tag,this.lastClickTime=null,this.isIOS=this.store.get("wurfl.os.name")===p,this.isIOS&&(this.slowConnectionLength=this.store.get("slwcnctlngt")||0,this.minBufferSize=this.store.get("mnbfrsz")||1)}},{key:"_sortMediaFiles",value:function(){var i=this.playerWidth;this.mediaFiles.sort(function(e,t){return Math.abs(i-e.width)-Math.abs(i-t.width)}).sort(function(e,t){return e.bitRate-t.bitRate})}},{key:"_resizeAd",value:function(e,t){this.newVidCreated&&this.newVid&&(this.newVid.style.width="".concat(e,"px"),this.newVid.style.height="".concat(t,"px"))}},{key:"resumeAd",value:function(){this.debugTracker.info("VideoVpaidMob -> resumeAd()"),this.firstResumeAd&&(this.debugTracker.info("VideoVpaidMob -> first resumeAd()"),this.isIOS?this._handleIOSFirstResumeAd():this._handleAndroidFirstResumeAd(),this._connectVideoEvents(),this.firstResumeAd=!1),T(k(r.prototype),"resumeAd",this).call(this)}},{key:"_handleIOSFirstResumeAd",value:function(){this.pausePrefetchVideo()}},{key:"_handleAndroidFirstResumeAd",value:function(){this.video.buffered&&0<this.video.buffered.length&&this.video.buffered.end(0)&&this.debugTracker.info("VideoVpaidMob -> startAd() - video currentTime:".concat(this.video.currentTime,"; buffered:").concat(this.video.buffered.end(0)," sec")),this.video.currentTime=0}},{key:"_onSlowConnecionDetected",value:function(){this.stopped||(this.slowConnectionDetected=!0,this.emit(this.vpaidEvents.SlowConnection),this.emit(this.vpaidEvents.AdStopped))}},{key:"_preventAdLoadIfVideoBufferTooShort",value:function(){return!!this._isBufferTooShort()&&(this._onSlowConnecionDetected(),!0)}},{key:"_isBufferTooShort",value:function(){var e=0<this.slowConnectionLength,t=this.video.buffered&&0<this.video.buffered.length;return e&&t&&this.video.buffered.end(0)<this.minBufferSize}}])&&Ai(t.prototype,i),e&&Ai(t,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Si(e){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Si(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Si(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Si(e)?e:String(e)}(n.key),n)}}var Ii=d(7),Oi=function(){function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");Ii.mixin(this),this.iframe=e,this.channel=void 0,this.sid=void 0,this.store=t,this.protocol=this.store.get("httpsOverride")?"https:":window.location.protocol||"http:"}var e,t,n;return e=i,(t=[{key:"listenToMessages",value:function(){this.iframe.contentWindow.addEventListener("message",this.onmessage.bind(this))}},{key:"removeMessagesListener",value:function(){this.iframe.contentWindow.removeEventListener("message",this.onmessage.bind(this))}},{key:"onmessage",value:function(e){if(e){var t={};try{t=JSON.parse(e.data.replace("ima://",""))}catch(e){return}"initAd"===t.type&&this.emit("clickThruUrlFound",t.clickThroughUrl),"viewabilityMeasurement"!==t.type&&(void 0!==t.channel&&void 0===this.channel&&(this.channel=t.channel),void 0!==t.sid)&&"*"!==t.sid&&void 0===this.sid&&(this.sid=t.sid),void 0!==this.channel&&void 0!==this.sid&&this.removeMessagesListener()}}},{key:"callApi",value:function(e,t){var i;this.channel&&this.sid&&this.iframe&&(i={name:"adsManager",type:e.replace("Ad",""),sid:this.sid,channel:this.channel},"volume"==e&&(i.data={volume:t}),e="\n                    var ifrms = document.querySelectorAll('iframe');\n\n                    ifrms.forEach(ifrm => {\n                        if (ifrm.src.indexOf('imasdk.googleapis.com') > -1 && ifrm.src.indexOf('bridge') > -1 && (ifrm.src.indexOf('#".concat(this.sid,"') > -1 || ifrm.src.indexOf('#").concat(this.channel,"') > -1)) {\n                            ifrm.contentWindow.postMessage('ima://").concat(v(i),"', '").concat(this.protocol,"//imasdk.googleapis.com');\n                        }\n                    });\n                "),ge(this.iframe.contentWindow,e))}}])&&Pi(e.prototype,t),n&&Pi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ci(e){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Ci(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Ci(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ci(e)?e:String(e)}(n.key),n)}}function Di(e,t,i){t=xi(t);var n=e,t=Ri()?Reflect.construct(t,i||[],xi(e).constructor):t.apply(e,i);if(t&&("object"===Ci(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Ri(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ri=function(){return!!e})()}function Mi(){return(Mi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xi(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function xi(e){return(xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Li(e,t){return(Li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Fi=d(19),Bi=function(){var e,t=r,i=ni;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function r(e,t,i){var n;if(this instanceof r)return(n=Di(this,r,[e,t,i])).adElasticLogger=t,n.store=i,n.stopped=!1,n.target=e.slot,n.video=e.videoSlot,n.mediaFiles=e.vpaidFiles,n.mediaUrl,n.baseUrl=n.store.get("base_url"),n._onError=e.onError,n.vpaidEvents=Object.assign({},f.a),n.volume=0,n.isMuted=!0,n.pauseVideoProtection=n.store.get("pusvidprtctn"),n.vpaidResourcesHandler=e.vpaidResourcesHandler,n.playerDAST=e.playerDAST,n.adSettings=e.adSettings,n.vpaidInit={},n.secureMediaFile=_e(i),n.tag=e.tag,n.logVpaidTextElements=n.store.get("lgvpdtxtelmnts"),n.countdownRegex=n.store.get("cntdwnrgx"),n.countdownRegex&&(n.countdownRegex=new RegExp(n.countdownRegex,"ig")),n.store.on("stop",function(){n.stopAd()}),n.minValidVideoDuration=n.store.get("mnvlddrtn"),n.adImpressionEvent=n.tag.getValueByKey("adimpevt"),n;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&Li(t,i),t=r,(i=[{key:"initAd",value:function(e,t,i,n,r,o){var s=this.mediaFiles[0],s=(this.secureMediaFile&&(this.adElasticLogger.logShouldSecureUrl(-1<s.url.indexOf("http:")),s.url=s.url.replace("http:","https:")),this.playerDAST.set({vbr:s.bitrate,vwd:s.width,vht:s.height,ot:s.originalType,st:s.subType,vpu:s.url}),this.mediaUrl=s.url,this.debugTracker.info("Loading","Iframe was loaded!"),this._shouldHideTarget()&&(this.target.style.display="none"),this.tag.getValueByKey("aduntladtmt")||1e4),s=new Fi(this.target,this.video,{extraOptions:{zIndex:"1"}},{timeout:s},this.store);this.vpaid=s,this.vpaidInit={width:e,height:t,viewMode:i,bitRate:n,creativeData:r,environmentVars:o},s.loadAdUnit(this.mediaUrl,this._onLoadAdUnit.bind(this))}},{key:"handshakeVersion",value:function(e){return"2.0"}},{key:"resizeAd",value:function(e,t,i,n){this.stopped||(this.target.style.width=e+"px",this.target.style.height=t+"px",this.target.setAttribute("width",e),this.target.setAttribute("height",t),this._safeCall("resizeAd",[e,t,i]),this._resizeAd([e,t,n]))}},{key:"stopAd",value:function(){this._safeCall("stopAd",[]),window.setTimeout(this._stopAd.bind(this),1)}},{key:"pauseAd",value:function(){var e=this,t=(Mi(xi(r.prototype),"pauseAd",this).call(this),function(){});(this.pauseVideoProtection||this.adRestarted)&&(t=function(){e.stopped||!e.video||(e.adElasticLogger.logPauseProtection(e.video.paused,e.adRestarted),e.video.paused)||e.video.pause()}),this.video.resumeInvoked=!1,this._safeCall("pauseAd",[t])}},{key:"resumeAd",value:function(e){var t=this,i=(Mi(xi(r.prototype),"resumeAd",this).call(this),function(){});e&&(i=function(){t.video.play()}),this.adSettings&&this.adSettings.hasOwnProperty("onrsm")&&this.adSettings.onrsm&&(i=this.adSettings.onrsm.bind(this)),this.video.resumeInvoked=!0,this._safeCall("resumeAd",[i])}},{key:"skipAd",value:function(){this._safeCall("skipAd",[])}},{key:"startAd",value:function(){this._safeCall("startAd",[])}},{key:"expandAd",value:function(){this._safeCall("expandAd",[])}},{key:"collapseAd",value:function(){this._safeCall("collapseAd",[])}},{key:"restartAd",value:function(e,t){this.stopped||(this.clickThruUrl=t,""===this._getVideoSrc(this.video)?e&&(this.video.src=e,this._bindedOnRestartVideoLoad=this._onRestartVideoLoad.bind(this),this.video.addEventListener("canplay",this._bindedOnRestartVideoLoad),this.video.load()):this._onRestartVideoLoad())}},{key:"subscribe",value:function(e,t){this.vpaidEvents[t]&&e&&this.on(t,e)}},{key:"unsubscribe",value:function(e,t){this.vpaidEvents[t]&&e&&this.off(t,e)}},{key:"getAdWidth",value:function(){return this._activeVideoElement?this._activeVideoElement.videoWidth:this._safeCall("getAdWidth",[])}},{key:"getAdHeight",value:function(){return this._activeVideoElement?this._activeVideoElement.videoHeight:this._safeCall("getAdHeight",[])}},{key:"getAdSkippableRemainingTime",value:function(){return this._safeCall("getAdSkippableRemainingTime",[])}},{key:"getAdRemainingTime",value:function(e){return this._safeCall("getAdRemainingTime",[e])}},{key:"getAdDuration",value:function(e){return this._safeCall("getAdDuration",[e])}},{key:"getAdSkippableState",value:function(){return this._safeCall("getAdSkippableState",[])}},{key:"getAdVolume",value:function(e){return this._safeCall("getAdVolume",[e])}},{key:"getAdIcons",value:function(e){this._safeCall("getAdIcons",[e])}},{key:"getAdCompanions",value:function(){return this._safeCall("getAdCompanions",[])}},{key:"getAdExpanded",value:function(){return this._safeCall("getAdExpanded",[])}},{key:"getAdLinear",value:function(){return this._safeCall("getAdLinear",[])}},{key:"setAdVolume",value:function(e){var t=this;this.volume=e,this.video.muted=this.isMuted=0===this.volume,this._safeCall("setAdVolume",[e,function(){t.adRestarted&&(t.video.volume=e,t.video.muted=0===e)}])}},{key:"isReplayable",value:function(){return this.video&&""!==this._getVideoSrc(this.video)}},{key:"getDOMContainer",value:function(){return this.target}},{key:"checkUnfriendlyIframe",value:function(){var t=function(e){if(!e)return null;for(var t=e.querySelector("iframe");t;)try{t=t.contentDocument.querySelector("iframe")}catch(e){break}return t}(this.target);try{return t&&t.contentDocument,!1}catch(e){return t=t.src,this.adElasticLogger.logUnfriendlyIframeSource(t),!0}}},{key:"getVideoUrl",value:function(){var e;return!this.stopped&&(e=this.getActiveVideoElement())?this._getVideoSrc(e):""}},{key:"getVPAIDVideoElement",value:function(){return this._activeVideoElement||null}},{key:"logVideoUrl",value:function(){var e=this.getVideoUrl();e&&(this.adElasticLogger.logVpaidVideoUrl(e),this.adElasticLogger.vpaidLog.friendlyVideoUrl=!0)}},{key:"toggleIframeContentDisplay",value:function(e){try{var t="none";"hide"===e?t="hidden":"show"===e&&(t="visible"),this.adUnit._iframe.contentWindow.document.body.style.visibility=t}catch(e){}}},{key:"setCompletionOnAdStoppedTimeout",value:function(){var e=this,t=this.tag.getValueByKey("cmpltonstpdms");0<t&&(this.completionOnAdStoppedTimeout||(this.completionOnAdStoppedTimeout=setTimeout(function(){e.stopped||e.emit(e.vpaidEvents.AdStopped)},t)))}},{key:"onAfterStop",value:function(){}},{key:"_onLoadAdUnit",value:function(e,t){try{this.stopped||(e?this._onLoadAdUnitError(e):(this.adElasticLogger.logLoadAdUnit(),this.adUnit=t,(this.store.get("imapihok")||this.tag.nas)&&this._hookIMA(),this._bindIframe(t),this._bindAdUnitEvents(t),t.handshakeVersion("2.0",this._onHandshake.bind(this)),this._handleCompleteOnAdStopped()))}catch(e){this.adElasticLogger.logLoadAdUnitErrorMessage(e.message)}}},{key:"_hookIMA",value:function(){var t=this;this.imaApi=new Oi(this.adUnit._iframe,this.store),this.imaApi.on("clickThruUrlFound",function(e){t.emit("clickThruUrlFound",e)}),this.imaApi.listenToMessages(),this.callIMAApi=this.imaApi.callApi.bind(this.imaApi)}},{key:"_onLoadAdUnitError",value:function(e){this.adElasticLogger.logLoadAdUnitError(),this.store&&this.store.get("aduntldflbfruntld")?this._onError(e,"adUnitLoadFailed"):this._onError()}},{key:"_onHandshake",value:function(){this.adUnit.initAd(this.vpaidInit.width,this.vpaidInit.height,this.vpaidInit.viewMode,-1,this.vpaidInit.creativeData,{})}},{key:"_handleCompleteOnAdStopped",value:function(){var e=this.store.get("cmpltonstpddmn");e&&0<e.length&&-1!=this.mediaUrl.search(new RegExp(e.join("|"),"i"))&&(this.completeOnAdStop=!0)}},{key:"_bindIframe",value:function(e){e=e._iframe;this.vpaidResourcesHandler.inject(e,this),this._onBindIframe(e),this._loadAdditionalScripts()}},{key:"_bindAdUnitEvents",value:function(e){var t,i=this;for(t in this.vpaidEvents)!function(t){e.subscribe(t,function(e){i._allEventsHandler(t,e)})}(t)}},{key:"_allEventsHandler",value:function(e,t){if(!this.stopped){if(this._shouldHideTarget()&&"block"!==this.target.style.display&&(this.target.style.display="block"),this.adImpressionEvent){if(e===this.vpaidEvents.AdImpression)return;e===this.adImpressionEvent&&(this.adImpressionEvent=void 0,this._allEventsHandler(this.vpaidEvents.AdImpression))}e===this.vpaidEvents.AdStopped?(this.completionOnAdStoppedTimeout=clearTimeout(this.completionOnAdStoppedTimeout),this.onComplete()):e===this.vpaidEvents.AdLoaded?this.adLoaded=!0:e===this.vpaidEvents.AdImpression?this._onAdImpression():e===this.vpaidEvents.AdError&&this._onAdError(),this.emit(e,{eventData:t})}}},{key:"_onAdImpression",value:function(){Mi(xi(r.prototype),"_onAdImpression",this).call(this),this.logVideoUrl(this.video.src),this.pauseVideoProtection&&this.video&&this.video.protectPause()}},{key:"_dispatchAdImpression",value:function(){return!0}},{key:"_safeCall",value:function(t,i){if(!this.stopped&&this.adUnit){"resizeAd"===t&&this._resizeAd(i);try{return this.adUnit[t].apply(this.adUnit,i)}catch(e){return this.adElasticLogger.logInitAdError(e.message,t,i,e.stack),this._onSafeCallAdError(e),!1}}}},{key:"_resizeAd",value:function(e,t,i,n){}},{key:"_onSafeCallAdError",value:function(e){}},{key:"_getVideoSrc",value:function(e){if(!this.stopped)return e.getSrc?e.getSrc():e.src||e.currentSrc||""}},{key:"_stopAd",value:function(){Mi(xi(r.prototype),"stopAd",this).call(this),this.stopped||(this.adUnit&&this._destroyAdUnit(),this.stopped=!0,this.completionOnAdStoppedTimeout=clearTimeout(this.completionOnAdStoppedTimeout),this.iframe=this.vpaid=this.imaApi=this.callIMAApi=this.adUnit=this.mediaFiles=this.video=this.vpaidEvents=this.target=this.adElasticLogger=this.store=this.tag=this.registerAnalyticsToVpaidLog=void 0,this.onAfterStop())}},{key:"_destroyAdUnit",value:function(){if(this.adElasticLogger.vpaidLog.saveToDbWithoutReport(),this.vpaidResourcesHandler.destroy(this.adUnit._iframe),this.adUnit._iframe&&this.adUnit._iframe.contentWindow&&this.additionalScripts&&0<this.additionalScripts.length)try{for(var e=0;e<this.additionalScripts.length;e++)this.adUnit._iframe.contentDocument.head.removeChild(this.additionalScripts[e]);this.onIframeEvent=void 0}catch(e){}this.adUnit._destroy()}},{key:"_onRestartVideoLoad",value:function(){var t=this,i=(this.adRestarted=!0,this._bindedOnRestartVideoLoad&&(this.video.removeEventListener("canplay",this._bindedOnRestartVideoLoad),this._bindedOnRestartVideoLoad=void 0),this.video.currentTime=0,this._resizeVideotoParentSize(),this.video.play(),function(){t.clickThruUrl&&t.emit(t.vpaidEvents.AdClickThru,{eventData:{url:t.clickThruUrl,playerHandles:!0}})});this.video.addEventListener("ended",function e(){t.video.removeEventListener("ended",e),t.video.removeEventListener("click",i),t._allEventsHandler(t.vpaidEvents.AdStopped,{}),t._allEventsHandler(t.vpaidEvents.AdVideoComplete,{})}),this.video.addEventListener("click",i)}},{key:"_resizeVideotoParentSize",value:function(){this.video.style.width=this.target.style.width,this.video.style.height=this.target.style.height}},{key:"_getMediaUrl",value:function(){return this.mediaUrl}},{key:"_getActiveVideoInIframes",value:function(e){var t=this,i=null;if(e&&0!==e.length)try{ue(e[0],"iframe",function(e){e.forEach(function(e){i||(!t.minValidVideoDuration||e.duration&&e.duration>t.minValidVideoDuration)&&(i=e)})},"video",this.store.get("debug"))}catch(e){}return i}},{key:"_loadAdditionalScripts",value:function(){if(this.adSettings&&this.adSettings.hasOwnProperty("adtnlscrpts")&&this.adSettings.adtnlscrpts){this.additionalScripts=[],this.onIframeEvent=this._onIframeEvent.bind(this);try{for(var e=0;e<this.adSettings.adtnlscrpts.length;e++){var t=this.adUnit._iframe.contentDocument.createElement("script");t.src=this.adSettings.adtnlscrpts[e].src,t.type="text/javascript",t.onload=this.adSettings.adtnlscrpts[e].clbk.bind(this),this.adUnit._iframe.contentDocument.head.appendChild(t),this.additionalScripts.push(t)}}catch(e){}}}},{key:"_onIframeEvent",value:function(e){this.stopped||this._shouldListenToIframeEvents()&&this.adSettings.ifrmevts.hasOwnProperty(e.name)&&this.vpaidEvents.hasOwnProperty(this.adSettings.ifrmevts[e.name])&&this._allEventsHandler(this.adSettings.ifrmevts[e.name],{})}},{key:"_shouldListenToIframeEvents",value:function(){return this.adSettings&&this.adSettings.hasOwnProperty("ifrmevts")&&this.adSettings.ifrmevts}},{key:"_onAdError",value:function(){}},{key:"_shouldHideTarget",value:function(){return this.adSettings.hasOwnProperty("hdtrgt")&&this.adSettings.hdtrgt}},{key:"getActiveVideoElement",value:function(){if(!this.stopped)return this._activeVideoElement||(this._getVideoSrc(this.video)?(this._activeVideoElement=this.video,this.adElasticLogger.logVpaidVideoType("local")):(this._activeVideoElement=this._getActiveVideoInIframes(this.target.querySelectorAll("iframe")),this.adElasticLogger.logVpaidVideoType(this._activeVideoElement?"friendlyIframe":"unfriendlyIframe"))),this._activeVideoElement}},{key:"getMediaType",value:function(){return 2}}])&&Vi(t.prototype,i),e&&Vi(t,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function Ni(e){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Ni(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Ni(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ni(e)?e:String(e)}(n.key),n)}}function ji(e,t,i){t=Gi(t);var n=e,t=Ui()?Reflect.construct(t,i||[],Gi(e).constructor):t.apply(e,i);if(t&&("object"===Ni(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Ui(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ui=function(){return!!e})()}function Hi(){return(Hi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gi(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function Gi(e){return(Gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zi(e,t){return(zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var qi=function(){var e,t=n,i=Bi;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function n(e,t,i){if(this instanceof n)return(t=ji(this,n,[e,t,i]))._initVpaid(e),setTimeout(e.onReady,2),t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&zi(t,i),t=n,(i=[{key:"resumeAd",value:function(){Hi(Gi(n.prototype),"resumeAd",this).call(this,this.adRestarted)}},{key:"setAdVolume",value:function(e){this.stopped||(this.store.get("frcvlm")&&(this.video.volume=e,this.emit(this.vpaidEvents.AdVolumeChange,{eventData:{dispatcher:this}})),Hi(Gi(n.prototype),"setAdVolume",this).call(this,e))}},{key:"onMuteChanged",value:function(e){this.isMuted=e}},{key:"_initVpaid",value:function(){this.pauseVideoProtection=this.store.get("pusvidprtctn"),this.adLoaded=!1}},{key:"_onBindIframe",value:function(e){this._soundProtection(this.video),this._blockDOMObjectInWin(e.contentWindow)}},{key:"_soundProtection",value:function(e){var t=this;e.addEventListener("volumechange",function(){t.adLoaded&&t.isMuted&&0!=e.volume&&t.emit(t.vpaidEvents.SoundViolation,{eventData:{vol:e.volume}}),e.volume!==t.volume&&(t.adElasticLogger.logSoundProtection(t.volume,e.volume),e.volume=t.volume)})}},{key:"_blockDOMObjectInWin",value:function(e){var t="\n        ".concat(this.store.get("jsnoflshdtct")?"window.navigator.__defineGetter__('plugins', function () { return []; });":"",'\n\n        Object.defineProperty(\n            HTMLObjectElement.prototype,\n            "_data",\n            Object.getOwnPropertyDescriptor(\n                HTMLObjectElement.prototype,\n                "data"\n            )\n        );\n\n        Object.defineProperty(\n            HTMLObjectElement.prototype,\n            "data", {\n                set : function(val){\n                    console.log(\'HTMLObjectElement block\');\n                    return;\n                }\n            }\n        );');try{ge(e,t)}catch(e){console.log(e)}}},{key:"_onSafeCallAdError",value:function(e){this._onAdError(e)}}])&&Wi(t.prototype,i),e&&Wi(t,e),Object.defineProperty(t,"prototype",{writable:!1}),n}();function Qi(e){return(Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ki(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Qi(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Qi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Qi(e)?e:String(e)}(n.key),n)}}function Yi(e,t,i){t=w(t);var n=e,t=Xi()?Reflect.construct(t,i||[],w(e).constructor):t.apply(e,i);if(t&&("object"===Qi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Xi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Xi=function(){return!!e})()}function Ji(){return(Ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zi(e,t){return(Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var $i=function(){var e,t=s,i=Bi;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function s(e,t,i){if(this instanceof s)return(t=Yi(this,s,[e,t,i]))._initVpaid(e),setTimeout(e.onReady,2),t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&Zi(t,i),t=s,(i=[{key:"initAd",value:function(e,t,i,n,r,o){this.isIOS&&this.slowConnectionLength&&(this.slowConnectionTimeout=setTimeout(this._onSlowConnecionDetected.bind(this),1e3*this.slowConnectionLength)),Ji(w(s.prototype),"initAd",this).call(this,e,t,i,n,r,o)}},{key:"resumeAd",value:function(){Ji(w(s.prototype),"resumeAd",this).call(this,this.video.useResumeCallback&&this.video.useResumeCallback()||this.adRestarted)}},{key:"startAd",value:function(){this.video.emitStartAd&&this.video.emitStartAd(),this.pausePrefetchVideo(),Ji(w(s.prototype),"startAd",this).call(this)}},{key:"setAdVolume",value:function(e,t){this.video.mutedChangeByUserGesture=t,Ji(w(s.prototype),"setAdVolume",this).call(this,e)}},{key:"isReplayable",value:function(){return this.video&&""!==this._getVideoSrc(this.video)}},{key:"_initVpaid",value:function(){this.pauseVideoProtection=this.store.get("pusvidprtctn"),this.isIOS=this.store.get("wurfl.os.name")===p,this.store.get("sprssviderr")&&this.video.supressErrorEvents(),this.isIOS&&(this.slowConnectionLength=this.store.get("slwcnctlngt")||0,this.minBufferSize=this.store.get("mnbfrsz")||1)}},{key:"_onBindIframe",value:function(e){this._unmuteHook()}},{key:"_unmuteHook",value:function(){this.store.get("mtdhkactv")&&this.video.hookMutedProperty()}},{key:"_resizeAd",value:function(e){this.stopped||this.video.resize&&this.video.resize(e)}},{key:"_stopAd",value:function(){this.stopped||(this.video.destroy(),this.onComplete(),Ji(w(s.prototype),"_stopAd",this).call(this))}},{key:"prefetchVideo",value:function(e,t){this.debugTracker.info("JsVpaidMob -> prefetchVideo() -> super.prefetchVideo();"),Ji(w(s.prototype),"prefetchVideo",this).call(this,e,t)}},{key:"_onSlowConnecionDetected",value:function(){this.stopped||(this.slowConnectionDetected=!0,this.emit(this.vpaidEvents.SlowConnection),this.emit(this.vpaidEvents.AdStopped))}},{key:"_allEventsHandler",value:function(e,t){this.stopped||e===this.vpaidEvents.AdLoaded&&(this.slowConnectionTimeout=clearTimeout(this.slowConnectionTimeout),this._preventAdLoadIfVideoBufferTooShort())||Ji(w(s.prototype),"_allEventsHandler",this).call(this,e,t)}},{key:"_preventAdLoadIfVideoBufferTooShort",value:function(){return!!this._isBufferTooShort()&&(this._onSlowConnecionDetected(),!0)}},{key:"_isBufferTooShort",value:function(){var e=0<this.slowConnectionLength,t=this.video&&this.video.getSrc(),i=this.video.buffered&&0<this.video.buffered.length;return e&&t&&i&&this.video.buffered.end(0)<this.minBufferSize}}])&&Ki(t.prototype,i),e&&Ki(t,e),Object.defineProperty(t,"prototype",{writable:!1}),s}(),e=d(10),en=d.n(e);function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],d=!0,l=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;d=!1}else for(;!(d=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);d=!0);}catch(e){l=!0,r=e}finally{try{if(!d&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||function(e,t){var i;if(e)return"string"==typeof e?rn(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?rn(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function on(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=tn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=tn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==tn(e)?e:String(e)}(n.key),n)}}function sn(e,t,i){t=ln(t);var n=e,t=an()?Reflect.construct(t,i||[],ln(e).constructor):t.apply(e,i);if(t&&("object"===tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function an(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(an=function(){return!!e})()}function dn(){return(dn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ln(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function un(e,t){return(un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var cn,hn=function(){var e,t=r,i=ni;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function r(e,t,i){var n;if(this instanceof r)return(n=sn(this,r,[e,t,i])).adContainer=e.slot,n.videoElement=document.querySelector("._cm-content-video")||e.videoSlot,n.videoElement.style.pointerEvents="none",n.tag=e.tag,n.vpaidEvents=Object.assign({},f.a),n.imaEvents=Object.assign({},en.a),n.onReadyEvent=e.onReady,n.adElasticLogger=t,n.store=i,n._initializeIMA(),n;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&un(t,i),t=r,(i=[{key:"_initializeIMA",value:function(){var e=this;this.store.get("adxScript.loading.isComplete")?this._loadIMAComponents():this.store.on("adxScript.loading.complete",function(){e._loadIMAComponents()})}},{key:"_loadIMAComponents",value:function(){this.tag.url="".concat(this.tag.url.replace("correlator=","correlator=".concat((new Date).getTime())),"&description_url=").concat(encodeURIComponent(this.store.get("cirf"))),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.adContainer,this.videoElement),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsRequest=new google.ima.AdsRequest,this._bindImaVpaidLoadEvents(),setTimeout(this.onReadyEvent,0)}},{key:"_bindImaVpaidLoadEvents",value:function(){var t=this;this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){t._allEventsHandler(e)},!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){t._allEventsHandler(e)},!1)}},{key:"initAd",value:function(e,t,i,n,r,o){this.adDisplayContainer.initialize(),this.adsRequest.adTagUrl=this.tag.url,this.adsRequest.linearAdSlotWidth=e,this.adsRequest.linearAdSlotHeight=t,this.adsRequest.nonLinearAdSlotWidth=e,this.adsRequest.nonLinearAdSlotHeight=t,this.adsRequest.vastLoadTimeout=1e4,this.adsRequest.videoPlayActivation="click",this.adsRequest.videoPlayMuted="muted",this.adsRequest.setAdWillAutoPlay(!0),this.adsRequest.setAdWillPlayMuted(!0),this.adsRequest.setContinuousPlayback(!0),this.adsLoader.requestAds(this.adsRequest)}},{key:"startAd",value:function(){this.width=this.adContainer.width||this.adContainer.getClientRects()[0].width,this.height=this.adContainer.height||this.adContainer.getClientRects()[0].height;try{this.adsManager.init(this.width,this.height,google.ima.ViewMode.NORMAL),this.adsManager.start()}catch(e){var t=this.imaEvents.adError;this.emit(t,{eventData:e})}}},{key:"_allEventsHandler",value:function(e){var t=e.type,t=this.imaEvents[t];if(t){if(t===this.imaEvents.adsManagerLoaded)this.adsManager=e.getAdsManager(this.videoElement),this._bindAdManagerEvents(),t=this.imaEvents.loaded;else if(t===this.imaEvents.adError)this.stopAd();else{if(t===this.imaEvents.loaded)return void(this.ad=e.getAd());t===this.imaEvents.click&&(this.clickThroughUrl=this._getAdProp("clickThroughUrl"),e.url=this.clickThroughUrl,e.playerHandles=!0)}e="adError"===e.type?this._findErrorData(e):e;this.emit(t,{eventData:e})}}},{key:"_findErrorData",value:function(e){for(var t="",i=0,n=Object.entries(e);i<n.length;i++){var r=nn(n[i],2),r=(r[0],r[1]);r&&r.stack&&(t=r)}return""!==t?JSON.stringify(t):t}},{key:"subscribe",value:function(e,t){this.vpaidEvents[t]&&e&&this.on(t,e)}},{key:"unsubscribe",value:function(e,t){this.vpaidEvents[t]&&e&&this.off(t,e)}},{key:"handshakeVersion",value:function(){return"2.0"}},{key:"resizeAd",value:function(e,t,i,n){this.stopped||this.adsManager&&(this.height=t,this.width=e,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))}},{key:"pauseAd",value:function(){this.adsManager.pause()}},{key:"resumeAd",value:function(e){this.adsManager.resume()}},{key:"stopAd",value:function(){this.adsManager&&this.adsManager.stop(),window.setTimeout(this._stopAd.bind(this),1)}},{key:"onComplete",value:function(){this.stopped||(this.emit(this.imaEvents.complete),dn(ln(r.prototype),"onComplete",this).call(this))}},{key:"_bindAdManagerEvents",value:function(){var e,t=[google.ima.AdErrorEvent.Type.AD_ERROR,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.AD_PROGRESS];for(e in t)this.adsManager.addEventListener(t[e],this._allEventsHandler,!1,this)}},{key:"_getAdProp",value:function(e){for(var t in this.ad){t=this.ad[t][e];if(null!=t)return t}return null}},{key:"_getMediaUrl",value:function(){if(this.ad)return this.ad.getMediaUrl()}},{key:"isReplayable",value:function(){return!1}},{key:"getAdWidth",value:function(){if(this.ad)return this.ad.getWidth()}},{key:"getAdHeight",value:function(){if(this.ad)return this.ad.getHeight()}},{key:"getAdRemainingTime",value:function(){return this.adsManager.getRemainingTime()}},{key:"getAdDuration",value:function(e){if(this.ad)return e.apply(this.ad,[null,this.ad.getDuration()])}},{key:"getAdSkippableState",value:function(){return this.adsManager.getAdSkippableState()}},{key:"getAdVolume",value:function(){return this.adsManager.getVolume()}},{key:"getAdCompanions",value:function(){this.ad&&this.ad.getCompanionAds(this.width,this.height)}},{key:"getAdExpanded",value:function(){this.ad&&this.ad.expand()}},{key:"getAdLinear",value:function(){if(this.ad)return this.ad.isLinear()}},{key:"getAdSkippableRemainingTime",value:function(){this.ad&&this.ad.getSkipTimeOffset()}},{key:"getDOMContainer",value:function(){return this.adContainer}},{key:"setAdVolume",value:function(e){var t;null!=(t=this.adsManager)&&t.setVolume(e)}},{key:"skipAd",value:function(){this.stopped||this.ad&&this.ad.isSkippable()&&(this.emit(this.imaEvents.skip),this.adsManager.skip(),this.stopAd())}},{key:"collapseAd",value:function(){this.adsManager.collapse()}},{key:"expandAd",value:function(){this.adsManager.expand()}},{key:"checkUnfriendlyIframe",value:function(){return!0}},{key:"_stopAd",value:function(){dn(ln(r.prototype),"stopAd",this).call(this),this.stopped||(this.stopped=!0,this.iframe=this.vpaid=this.callIMAApi=this.video=this.vpaidEvents=this.target=this.adElasticLogger=this.store=this.tag=void 0,this.adsManager&&this.adsManager.destroy(),this.adsLoader&&this.adsLoader.destroy(),this.adDisplayContainer&&this.adDisplayContainer.destroy(),this.emit(this.imaEvents.AdStopped),this.onAfterStop())}},{key:"onAfterStop",value:function(){}},{key:"restartAd",value:function(e,t){}},{key:"setCompletionOnAdStoppedTimeout",value:function(){}},{key:"toggleIframeContentDisplay",value:function(){}},{key:"getMediaType",value:function(){return 5}}])&&on(t.prototype,i),e&&on(t,e),Object.defineProperty(t,"prototype",{writable:!1}),r}();function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=pn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=pn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==pn(e)?e:String(e)}(n.key),n)}}function vn(e){var t=e.get("omddsbldbrwsrs");return!!(t&&Array.isArray(t)&&0!==t.length&&(e=e.get("wurfl.browser.name"))&&t.includes(e))}var yn=function(){function n(e,t,i){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.store=e,this.omidElements=t.omid,this.target=t.slot,this.adElasticLogger=i,this.video=t.videoSlot,this.debugTracker=t.debugTracker,this.eventsQueue=[],this.stopped=!1,this.omidAdSession=cn}var e,t,i;return e=n,(t=[{key:"getOmidResources",value:function(){return this.omidElements.map(function(e){return{viewabilityTag:e.scriptUrl,vendor:e.vendor,params:e.verificationParameters}})}},{key:"setOmidSessionStarted",value:function(e){this.omidSessionStarted=!0,this.omidAdSessionId=cn=e,this._fireDelayedEvents(),this.adElasticLogger.logOMIDEvent("sessionStart")}},{key:"onOmidSessionError",value:function(){this.adElasticLogger.logOMIDEvent("sessionFinish"),this.omidSessionStarted=!1,this.omidAdSession=void 0}},{key:"setOmidSessionFinish",value:function(){this.adElasticLogger.logOMIDEvent("sessionFinish"),this.omidSessionStarted=!1,this.omidAdSession=void 0}},{key:"_fireDelayedEvents",value:function(){var t=this;this.eventsQueue.length&&this.eventsQueue.forEach(function(e){t._fireOmidEvents(e)})}},{key:"getActiveVideoElement",value:function(){return this.video}},{key:"_fireOmidEvents",value:function(e){}},{key:"_handleOmidStop",value:function(){}},{key:"dispose",value:function(){this.stopped=!0,this._handleOmidStop(),this.events=this.options=this.omidSessionStarted=void 0}},{key:"dispatch",value:function(e){}}])&&fn(e.prototype,t),i&&fn(e,i),Object.defineProperty(e,"prototype",{writable:!1}),n}();function mn(e){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,t,i){return(t=function(e){e=function(e,t){if("object"!=mn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=mn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==mn(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var S={VIDEO_EVENT:t(t(t(t(t(t(t({INIT:"videoOmsdkInit"},f.a.AdLoaded,"videoAdEvent"),f.a.AdVideoStart,"AdVideoStart"),f.a.AdImpression,"videoAdEvent"),"PLAYBACK_PROGRESS","playbackProgressEvent"),"INIT_ACK","OmsdkInitAck"),"INIT_FAIL","OmsdkInitFailure"),"SESSION_NOT_VALID","sessionIsNotValid"),EVENT_TYPE:(t(t(t(t(t(t(t(t(t(t(e={SESSION_START:"sessionStart",SESSION_ERROR:"sessionError",SESSION_FINISH:"sessionFinish"},f.a.AdImpression,"impression"),f.a.AdLoaded,"loaded"),f.a.AdVideoStart,"start"),f.a.AdVideoFirstQuartile,"firstQuartile"),f.a.AdVideoMidpoint,"midpoint"),f.a.AdVideoThirdQuartile,"thirdQuartile"),f.a.AdVideoComplete,"complete"),f.a.AdPaused,"pause"),f.a.AdPlaying,"resume"),f.a.AdSkipped,"skipped"),t(t(e,f.a.AdVolumeChange,"volumeChange"),f.a.AdClickThru,"adUserInteraction"))};function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=gn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=gn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==gn(e)?e:String(e)}(n.key),n)}}function bn(e,t,i){t=En(t);var n=e,t=An()?Reflect.construct(t,i||[],En(e).constructor):t.apply(e,i);if(t&&("object"===gn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function An(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(An=function(){return!!e})()}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tn(e,t){return(Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kn(e,t,i,n){return function(){window.reportResourceEvent||(window.reportResourceEvent=function(e){window.parent.postMessage({type:"resourceEvent",eventData:e},"*")});var e="__DEBUG__";function o(e){return!!r.length&&a.test(e)}function s(e,t){e?window.reportResourceEvent({event:"maliciousUrl",url:t.url,isEarly:t.isEarly}):window.reportResourceEvent({event:"maliciousAction",action:t.action})}function t(){function i(e){var i;o(e)?s(!0,{url:e,isEarly:!1}):(window.analyticsReporter.analyticsOptions.withIframes&&window.analyticsReporter.pushUrl("iframes",e,this),e&&"undefined"===e.substr(0,9)&&window.reportResourceEvent({event:"undefinedIframeSrc",url:e}),i=this,window.vpaidCrawlerFunc&&i.addEventListener("load",function e(){try{i.removeEventListener("load",e);var t=i.contentWindow.document.createElement("script");t.type="text/javascript",i.contentWindow.vpaidCrawlerFunc=t.innerHTML=window.vpaidCrawlerFunc,i.contentWindow.analyticsReporter=window.analyticsReporter,i.contentWindow.reportResourceEvent=window.reportResourceEvent,i.contentWindow.document.head.appendChild(t)}catch(e){}}))}HTMLIFrameElement.prototype.hasOwnProperty("_src")||(Object.defineProperty(HTMLIFrameElement.prototype,"_src",Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,"src")),Object.defineProperty(HTMLIFrameElement.prototype,"src",{get:function(){return this._src},set:function(e){i.call(this,e),this._src=e}})),HTMLIFrameElement.prototype.hasOwnProperty("_setAttribute")||(HTMLIFrameElement.prototype._setAttribute=HTMLIFrameElement.prototype.setAttribute,HTMLIFrameElement.prototype.setAttribute=function(e,t){"src"==e.toLowerCase()&&i.call(this,t),this._setAttribute(e,t)})}function i(e){if(e.src)return e.src;if(e.childNodes.length)for(var t=0;t<e.childNodes.length;t++)if(e.childNodes[t]&&e.childNodes[t].src)return e.childNodes[t].src;return e.outerHTML}function n(){function i(e){o(e)?s(!0,{url:e,isEarly:!1}):window.analyticsReporter.analyticsOptions.withScripts&&window.analyticsReporter.pushUrl("scripts",e,this)}HTMLScriptElement.prototype.hasOwnProperty("_src")||(Object.defineProperty(HTMLScriptElement.prototype,"_src",Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"src")),Object.defineProperty(HTMLScriptElement.prototype,"src",{get:function(){return this._src},set:function(e){i.call(this,e),this._src=e}})),HTMLScriptElement.prototype.hasOwnProperty("_setAttribute")||(HTMLScriptElement.prototype._setAttribute=HTMLScriptElement.prototype.setAttribute,HTMLScriptElement.prototype.setAttribute=function(e,t){"src"==e.toLowerCase()&&i.call(this,t),this._setAttribute(e,t)})}var r="__BLACKLIST__",a=new RegExp(r.map(function(t){try{return atob(t)}catch(e){return t}}).join("|"),"i");function d(e){var n=this;this.report={scripts:[],XHRUrls:[],iframes:[],firstCount:0,totalRequests:[],totalRequestsCounter:0,latencies:[],averageLatency:0,averageIntLatency:0},this.networkCallCounter=0,this.analyticsOptions=e,this.networkCallsLimitExceeded=!1,this.isVideoUrlPublic=void 0,this.requestId=0,this.requestStartTimes={},this.getReport=function(){if(n.stopped)return{};var e,t={};for(e in n.report)Array.isArray(n.report[e])?t[e]=n.report[e].slice():t[e]=n.report[e];t.totalRequests=t.totalRequests.concat(t.scripts),t.totalRequests=t.totalRequests.concat(t.XHRUrls),t.totalRequests=t.totalRequests.concat(t.iframes),t.totalRequestsCounter=t.totalRequests.length;var i=t.latencies.reduce(function(e,t){return e+t},0);return t.averageLatency=t.latencies.length?i/t.latencies.length:0,t.averageIntLatency=parseInt(t.averageLatency),t}}d.prototype.pushUrl=function(e,t,i){this.report[e].push(t),i._id=this.requestId++,this.requestStartTimes[i._id]=Date.now();var n=this;i.addEventListener("load",function e(){n.requestStartTimes.hasOwnProperty(this._id)&&(n.report.latencies.push(Date.now()-n.requestStartTimes[this._id]),delete n.requestStartTimes[this._id]),this.removeEventListener("load",e)}),"iframes"!==e||void 0===this.isVideoUrlPublic?this.networkCallCounter++:this.networkCallCounter+=this.getIframeWeight(t),this.isMaxNetworkCallsLimitExceeded()&&this.onNetworkCallsLimitExceeded()},d.prototype.getIframeWeight=function(e){return-1<e.indexOf("imasdk")?this.analyticsOptions.iframesWeights.ggl:this.isVideoUrlPublic?this.analyticsOptions.iframesWeights.pxls:this.analyticsOptions.iframesWeights.gen},d.prototype.isMaxNetworkCallsLimitExceeded=function(){return this.networkCallsLimitExceeded||this.analyticsOptions.maxNetworkCalls&&this.networkCallCounter>=this.analyticsOptions.maxNetworkCalls},d.prototype.onNetworkCallsLimitExceeded=function(){this.networkCallsLimitExceeded||this.stopped||(this.networkCallsLimitExceeded=!0,window.reportResourceEvent({event:"maxNetworkCalls"}))},d.prototype.unhook=function(){var e=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,"_src"),t=Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"_src");e&&(Object.defineProperty(HTMLIFrameElement.prototype,"src",e),HTMLIFrameElement.prototype.setAttribute=HTMLIFrameElement.prototype._setAttribute),t&&(Object.defineProperty(HTMLIFrameElement.prototype,"src",t),HTMLScriptElement.prototype.setAttribute=HTMLScriptElement.prototype._setAttribute),window.XMLHttpRequest.prototype._open&&(window.XMLHttpRequest.prototype.open=window.XMLHttpRequest.prototype._open)},d.prototype.destroy=function(){this.stopped||(this.unhook(),this.stopped=!0,this.report=this.analyticsOptions=this.requestStartTimes=this.getReport=window.analyticsReporter=void 0)},window.destroyCrawler=function(){window.reportResourceEvent=window.vpaidCrawlerFunc=void 0};try{window.analyticsReporter=window.analyticsReporter||new d("__OPTIONS__");for(var l=document.scripts||[],u="",c=0;c<l.length;c++)window.analyticsReporter.report.scripts.push(l[c].src),l[c].src&&o(l[c].src)&&(u=l[c].src);for(var h=document.querySelectorAll("iframe")||[],p=0;p<h.length;p++)window.analyticsReporter.report.iframes.push(h[p].src),h[p].src&&o(h[p].src)&&(u=h[p].src);if(window.analyticsReporter.report.firstCount=window.analyticsReporter.report.scripts.length+window.analyticsReporter.report.iframes.length,u&&s(!0,{url:u,isEarly:!0}),t(),HTMLElement.prototype.hasOwnProperty("_insertBefore")||(HTMLElement.prototype._insertBefore=HTMLElement.prototype.insertBefore,HTMLElement.prototype.insertBefore=function(e,t){if(!o(e.outerHTML))return this._insertBefore(e,t);s(!0,{url:i(e),isEarly:!1})}),HTMLElement.prototype.hasOwnProperty("_appendChild")||(HTMLElement.prototype._appendChild=HTMLElement.prototype.appendChild,HTMLElement.prototype.appendChild=function(e){if(!o(e.outerHTML))return this._appendChild(e);s(!0,{url:i(e),isEarly:!1})}),n(),HTMLObjectElement.prototype._scrollIntoView=HTMLObjectElement.prototype.scrollIntoView,HTMLObjectElement.prototype.scrollIntoView=function(){return s(!1,{action:"scrollIntoView-object"}),!1},HTMLDivElement.prototype._scrollIntoView=HTMLDivElement.prototype.scrollIntoView,HTMLDivElement.prototype.scrollIntoView=function(){return s(!1,{action:"scrollIntoView-div"}),!1},XMLHttpRequest.prototype.hasOwnProperty("_open")||(XMLHttpRequest.prototype._open=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(e,t,i,n,r){o(t)?s(!0,{url:t,isEarly:!1}):(window.analyticsReporter.analyticsOptions.withXHR&&window.analyticsReporter.pushUrl("XHRUrls",t,this),this._open.apply(this,arguments))}),HTMLElement.prototype._click=HTMLElement.prototype.click,HTMLElement.prototype.click=function(){this.hasAttribute("download")?s(!1,{action:"download"}):this._click()},history.pushState=function(e,t,i){s(!1,{action:"pushState"})},e||(window.onerror=function(e){return!0}),!e){console=console||{};for(var f=function(){},v=["debug","error","info","log","warn"],y=0;y<v.length;y++)console[v[y]]&&(console[v[y]]=f)}}catch(e){}}.toString().replace('"__IS_OMID__"',n).replace('"__DEBUG__"',e).replace('"__BLACKLIST__"',v(t)).replace('"__OPTIONS__"',v(i))}function wn(){return"(".concat(kn(0<arguments.length&&void 0!==arguments[0]&&arguments[0],1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},3<arguments.length&&void 0!==arguments[3]&&arguments[3]),")();")}var Sn=function(){var e,t=n,i=yn;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function n(e,t,i){if(this instanceof n)return(e=bn(this,n,[e,t,i]))._startOmsdkSession(),e;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&Tn(t,i),t=n,(i=[{key:"_startOmsdkSession",value:function(){this._emitSdkEvent(S.VIDEO_EVENT.INIT,{selectorPattern:"#".concat(this.target.id," .cm-ad-player"),measurementResources:this.getOmidResources()}),this._bindSessionEvents()}},{key:"_bindSessionEvents",value:function(){window.taboolaBridge.on(S.VIDEO_EVENT.INIT_ACK,this.setOmidSessionStarted.bind(this)),window.taboolaBridge.on(S.VIDEO_EVENT.INIT_FAIL,this.onOmidSessionError.bind(this)),window.taboolaBridge.on(S.VIDEO_EVENT.SESSION_NOT_VALID,this.onOmidSessionError.bind(this)),window.taboolaBridge.on(S.EVENT_TYPE.SESSION_FINISH,this._handleOmidStop.bind(this))}},{key:"fireEvent",value:function(e){var t=e.type;switch(e.type=S.VIDEO_EVENT[t],t){case"AdVideoStart":this._emitSdkEvent(S.VIDEO_EVENT.PLAYBACK_PROGRESS,{sessionId:this.omidAdSessionId,type:S.EVENT_TYPE[t],params:{duration:e.duration||this.video.duration,adVolume:e.adVolume}});break;case"AdLoaded":case"AdImpression":this._emitSdkEvent(S.VIDEO_EVENT[t],{sessionId:this.omidAdSessionId,type:S.EVENT_TYPE[t]});break;case"AdVolumeChange":this._emitSdkEvent(S.VIDEO_EVENT.PLAYBACK_PROGRESS,{sessionId:this.omidAdSessionId,type:S.EVENT_TYPE[t],params:{adVolume:e.adVolume}});break;default:this._emitSdkEvent(S.VIDEO_EVENT.PLAYBACK_PROGRESS,{sessionId:this.omidAdSessionId,type:S.EVENT_TYPE[t]})}}},{key:"_emitSdkEvent",value:function(e,t){window.taboolaBridge.emit(e,t)}},{key:"_fireOmidEvents",value:function(e){this.fireEvent(e),this.debugTracker.info("OMID fired event:".concat(S.EVENT_TYPE[e.type],", sessionID:").concat(this.omidAdSessionId),e)}},{key:"dispatch",value:function(e){S.EVENT_TYPE[e.type]&&(this.omidSessionStarted?this._fireOmidEvents(e):this.eventsQueue.push(e))}},{key:"_handleOmidStop",value:function(){this.omidAdSession&&this._emitSdkEvent(S.EVENT_TYPE.SESSION_FINISH)}}])&&_n(t.prototype,i),e&&_n(t,e),Object.defineProperty(t,"prototype",{writable:!1}),n}();function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Pn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Pn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Pn(e)?e:String(e)}(n.key),n)}}var On,Cn,Vn,Dn,Rn,Mn,xn=d(7),Ln=function(){function n(e,t,i){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");xn.mixin(this),this.store=e,this.tag=t,this.adElasticLogger=i,this.vpaidCrawler=wn,this.onVpaidResourceEvent=this._onVpaidResourceEvent.bind(this)}var e,t,i;return e=n,(t=[{key:"inject",value:function(e){e&&this._injectVpaidCrawler(e)}},{key:"_injectVpaidCrawler",value:function(t){this._getVpaidAnalyticsOptions().deepIframes&&(t.contentWindow.vpaidCrawlerFunc=this.vpaidCrawler),this.onResourceMessage=this._onResourceMessage.bind(this),window.addEventListener("message",this.onResourceMessage),ge(t.contentWindow,this.vpaidCrawler(this.store.get("debug"),this._getBlacklistDomains(),this._getVpaidAnalyticsOptions(),this.tag.isOMID)),this.adElasticLogger.vpaidLog.getVpaidAnalyticsReport=t.contentWindow.analyticsReporter.getReport,this.setVpaidAnalyticsIsVideoUrlPublic=function(e){t.contentWindow.analyticsReporter.isVideoUrlPublic=e}}},{key:"_getBlacklistDomains",value:function(){var e;if(!this.stopped)return(e=this.store.get("hjkbldomsencdd"))&&0!==e.length?e:this.store.get("hjkbldoms")}},{key:"_onResourceMessage",value:function(e){var t;!this.stopped&&e.data&&"resourceEvent"===e.data.type&&(e=e.data.eventData,this.adElasticLogger.logVpaidResourceEvent(e),-1<(t=e.event).indexOf("malicious")?this._onCrawlerHijackAttempt(t,e):"undefinedIframeSrc"===t?this._onUndefinedRelativeIframeSrcError(e.url):"maxNetworkCalls"===t&&this._onNetworkCallsLimitExceeded())}},{key:"_getVpaidAnalyticsOptions",value:function(){var e=this.store.get("anltcsOptions"),t=this.tag.getValueByKey("mxntwrkclls")||0,i=this.store.get("ifrmswghts");return t&&(e.maxNetworkCalls=t),i&&(e.iframesWeights=i),e}},{key:"_onVpaidResourceEvent",value:function(e,t){this.emit("vpaidResourceEvent",{event:e,data:t})}},{key:"_onCrawlerHijackAttempt",value:function(e,t){this._onVpaidResourceEvent("hijackAttempt",{type:e,data:t})}},{key:"_onUndefinedRelativeIframeSrcError",value:function(e){this._onVpaidResourceEvent("undefinedIframeSrc",{url:e})}},{key:"_onNetworkCallsLimitExceeded",value:function(){this._onVpaidResourceEvent("maxNetworkCalls",{maxNetworkCalls:this.tag.getValueByKey("mxntwrkclls")})}},{key:"destroy",value:function(e){this.stopped||(this.stopped=!0,e&&e.contentWindow&&this._destroyVpaidCrawler(e))}},{key:"_destroyVpaidCrawler",value:function(e){window.removeEventListener("message",this.onResourceMessage),e.contentWindow.analyticsReporter.destroy(),e.contentWindow.destroyCrawler(),this.adElasticLogger.vpaidLog.getVpaidAnalyticsReport=null}}])&&In(e.prototype,t),i&&In(e,i),Object.defineProperty(e,"prototype",{writable:!1}),n}();function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,i){return(t=Nn(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Bn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nn(n.key),n)}}function Nn(e){e=function(e,t){if("object"!=Fn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Fn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Fn(e)?e:String(e)}function Wn(e,t,i){t=Un(t);var n=e,t=jn()?Reflect.construct(t,i||[],Un(e).constructor):t.apply(e,i);if(t&&("object"===Fn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");e=n;if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function jn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(jn=function(){return!!e})()}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hn(e,t){return(Hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Gn=["limited","domain","full"],zn=function(){var e,t=n,i=yn;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function n(e,t,i){if(this instanceof n)return(e=Wn(this,n,[e,t,i])).tag=t.tag,e.events=(P(P(P(P(P(P(P(P(P(P(i={},f.a.AdLoaded,"loaded"),f.a.AdVideoStart,"start"),f.a.AdImpression,"impressionOccured"),f.a.AdClickThru,"adUserInteraction"),f.a.AdPaused,"pause"),f.a.AdPlaying,"resume"),f.a.AdSkipped,"skipped"),f.a.AdVideoFirstQuartile,"firstQuartile"),f.a.AdVideoMidpoint,"midpoint"),f.a.AdVideoThirdQuartile,"thirdQuartile"),P(P(i,f.a.AdVideoComplete,"complete"),f.a.AdVolumeChange,"volumeChange")),e._init(),e;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&Hn(t,i),t=n,(i=[{key:"_init",value:function(){this.store.get("omidScriptsInjected")?this._handleOmidLoaded():this._loadOmidScripts()}},{key:"_loadScript",value:function(n){var r=this;return new Promise(function(e,t){var i=document.createElement("script");i.type="text/javascript",i.src=n,i.async=!0,i.onload=function(){e()},i.onerror=function(){t(n)},r.target.appendChild(i)})}},{key:"_loadOmidScripts",value:function(){var t=this,i=[];[this.store.get("omidWebUrl"),this.store.get("omidSessionUrl")].forEach(function(e){i.push(t._loadScript(e))}),Promise.all(i).then(function(){t.store.set("omidScriptsInjected",!0),t._handleOmidLoaded()}).catch(function(e){t.debugTracker&&t.debugTracker.error("Error loading OMID script ".concat(e))})}},{key:"_handleOmidLoaded",value:function(){var e;this._loadOmidSessionClient()&&(e=this._createOmidPartner(),e=this._createOmidContext(e))&&this._createAdSession(e)}},{key:"_loadOmidSessionClient",value:function(){if(!this.omidSesiontLoaded&&!On){var e;try{e=window.OmidSessionClient&&window.OmidSessionClient[this.store.get("omidVerificationScriptVersion")]}catch(e){return this.adElasticLogger.logOMIDEvent("sessionError"),!1}if(!e)return this.adElasticLogger.logOMIDEvent("sessionError"),!1;this.omidSesiontLoaded=!0,this._ObtainSessionClientClasses(e)}return!0}},{key:"_ObtainSessionClientClasses",value:function(e){On=e.AdSession,Cn=e.Partner,Vn=e.Context,Dn=e.VerificationScriptResource,Rn=e.AdEvents,Mn=e.MediaEvents}},{key:"_createOmidPartner",value:function(){var e=this.store.get("omidVerificationScriptVersion");return new Cn("Taboola",e)}},{key:"_createOmidContext",value:function(e){var t;try{t=window.top}catch(e){return this.adElasticLogger.logOMIDEvent("sessionError"),!1}var i=this.store.get("domain"),n=this._getOmidAccessMode(),r=this.omidElements.map(function(e){return new Dn(e.scriptUrl,e.vendor,e.verificationParameters,n)}),e=(this.debugTracker.info("OMID accessMode",n),new Vn(e,r,i));return e.setServiceWindow(t),e.setVideoElement(this.getActiveVideoElement()),e}},{key:"_getOmidAccessMode",value:function(){return-1<Gn.indexOf(this.store.get("omidaccsmd"))?this.store.get("omidaccsmd"):"full"}},{key:"_createAdSession",value:function(e){var t=this;this.omidAdSession||(this.omidAdSession=new On(e),this._trackOmidEvents(),this.omidAdSession.setCreativeType("video"),this.omidAdSession.setImpressionType("beginToRender"),this.omidAdSession.registerSessionObserver(function(e){switch(t.debugTracker.info("OMID fired event:".concat(e.type),e),e.type){case"sessionStart":t.setOmidSessionStarted(e.adSessionId),t._injectVPAIDCrawler();break;case"sessionError":t.onOmidSessionError();break;case"sessionFinish":t.setOmidSessionFinish();break;default:t.adElasticLogger.logOMIDEvent("unknownEventType")}}),this.omidAdSession.start(),this.debugTracker.info("OMID session started"))}},{key:"_injectVPAIDCrawler",value:function(){var t=this,e=(this.tag.isOMID=!0,new Ln(this.store,this.tag,this.adElasticLogger));e.on("vpaidResourceEvent",function(e){"hijackAttempt"===e.event&&t.adElasticLogger.logMaliciousActions(e.data.data)}),e.inject(this._getOMIDIframe())}},{key:"_getOMIDIframe",value:function(){var t=this;return Array.from(document.getElementsByTagName("iframe")||[]).find(function(e){return-1<(null==e||null==(e=e.srcdoc)?void 0:e.indexOf(t.omidElements[0].scriptUrl))})}},{key:"_trackOmidEvents",value:function(){this.sessionAdEvents=new Rn(this.omidAdSession),this.mediaEvents=new Mn(this.omidAdSession)}},{key:"fireEvent",value:function(e){switch(e.type){case"AdLoaded":this.sessionAdEvents.loaded();break;case"AdVideoStart":this.mediaEvents.start(e.duration,e.adVolume);break;case"AdImpression":this.sessionAdEvents.impressionOccurred();break;case"AdClickThru":this.mediaEvents.adUserInteraction("click");break;case"AdVolumeChange":this.mediaEvents.volumeChange(e.adVolume);break;case"AdPlaying":this.mediaEvents.resume();break;default:this.mediaEvents[this.events[e.type]]()}}},{key:"_handleOmidStop",value:function(){var e;null!=(e=this.omidAdSession)&&e.finish()}},{key:"_fireOmidEvents",value:function(e){this.fireEvent(e),this.debugTracker.info("OMID fired event:".concat(this.events[e.type],", sessionID:").concat(this.omidAdSessionId),e)}},{key:"dispatch",value:function(e){this.omidAdSession||this._handleOmidLoaded(),this.events[e.type]&&(this.sessionAdEvents&&this.omidSessionStarted?this._fireOmidEvents(e):this.eventsQueue.push(e))}}])&&Bn(t.prototype,i),e&&Bn(t,e),Object.defineProperty(t,"prototype",{writable:!1}),n}();function qn(e){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qn(){Qn=function(){return s};var d,s={},e=Object.prototype,l=e.hasOwnProperty,u=Object.defineProperty||function(e,t,i){e[t]=i.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",i=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(d){o=function(e,t,i){return e[t]=i}}function a(e,t,i,n){var r,o,s,a,t=t&&t.prototype instanceof m?t:m,t=Object.create(t.prototype),n=new S(n||[]);return u(t,"_invoke",{value:(r=e,o=i,s=n,a=h,function(e,t){if(a===f)throw new Error("Generator is already running");if(a===v){if("throw"===e)throw t;return{value:d,done:!0}}for(s.method=e,s.arg=t;;){var i=s.delegate;if(i){i=function e(t,i){var n=i.method,r=t.iterator[n];if(r===d)return i.delegate=null,"throw"===n&&t.iterator.return&&(i.method="return",i.arg=d,e(t,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=c(r,t.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,y;r=n.arg;return r?r.done?(i[t.resultName]=r.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=d),i.delegate=null,y):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,y)}(i,s);if(i){if(i===y)continue;return i}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(a===h)throw a=v,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);a=f;i=c(r,o,s);if("normal"===i.type){if(a=s.done?v:p,i.arg===y)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(a=v,s.method="throw",s.arg=i.arg)}})}),t}function c(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}s.wrap=a;var h="suspendedStart",p="suspendedYield",f="executing",v="completed",y={};function m(){}function g(){}function _(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(P([]))),A=(b&&b!==e&&l.call(b,n)&&(t=b),_.prototype=m.prototype=Object.create(t));function E(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function T(s,a){var t;u(this,"_invoke",{value:function(i,n){function e(){return new a(function(e,t){!function t(e,i,n,r){var o,e=c(s[e],s,i);if("throw"!==e.type)return(i=(o=e.arg).value)&&"object"==qn(i)&&l.call(i,"__await")?a.resolve(i.__await).then(function(e){t("next",e,n,r)},function(e){t("throw",e,n,r)}):a.resolve(i).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,r)});r(e.arg)}(i,n,e,t)})}return t=t?t.then(e,e):e()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var i,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return i=-1,(e=function e(){for(;++i<t.length;)if(l.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=d,e.done=!0,e}).next=e}throw new TypeError(qn(t)+" is not iterable")}return u(A,"constructor",{value:g.prototype=_,configurable:!0}),u(_,"constructor",{value:g,configurable:!0}),g.displayName=o(_,r,"GeneratorFunction"),s.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,o(e,r,"GeneratorFunction")),e.prototype=Object.create(A),e},s.awrap=function(e){return{__await:e}},E(T.prototype),o(T.prototype,i,function(){return this}),s.AsyncIterator=T,s.async=function(e,t,i,n,r){void 0===r&&(r=Promise);var o=new T(a(e,t,i,n),r);return s.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},E(A),o(A,r,"Generator"),o(A,n,function(){return this}),o(A,"toString",function(){return"[object Generator]"}),s.keys=function(e){var t,i=Object(e),n=[];for(t in i)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in i)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=P,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=d)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var n=this;function e(e,t){return o.type="throw",o.arg=i,n.next=e,t&&(n.method="next",n.arg=d),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=l.call(r,"catchLoc"),a=l.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}var o=(r=r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc?null:r)?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),w(i),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i,n,r=this.tryEntries[t];if(r.tryLoc===e)return"throw"===(i=r.completion).type&&(n=i.arg,w(r)),n}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:P(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=d),y}},s}function Kn(e,t,i,n,r,o,s){try{var a=e[o](s),d=a.value}catch(e){return void i(e)}a.done?t(d):Promise.resolve(d).then(n,r)}function Yn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=qn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=qn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==qn(e)?e:String(e)}(n.key),n)}}var Xn=function(){function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.adElasticLogger=e,this.store=t,this.isMobile=this.store.get("isMobile"),this.isInApp=this.store.get("isInApp"),this.handlers={video:{handlerType:"VideoVpaid".concat(this.isMobile?"Mobile":""),handler:this.isMobile?wi:_i,filterVpaidFiles:function(e){return e.vpaidFiles[b.VIDEO]}},javascript:{handlerType:"JsVpaid".concat(this.isMobile?"Mobile":""),handler:this.isMobile?$i:qi,filterVpaidFiles:function(e){return e.vpaidFiles[A.VPAID]}},ima:{handlerType:"adx",handler:hn},OMID:{handlerType:"OMID",handler:this.isInApp&&window.taboolaBridge?Sn:zn}}}var e,t,n,a,r;return e=i,(t=[{key:"create",value:function(e,t){var i;if(!this.stopped)return this.handlers.hasOwnProperty(e)?(i=this.handlers[e].handler,this.handlers[e].hasOwnProperty("filterVpaidFiles")&&(t.vpaidFiles=this.handlers[e].filterVpaidFiles(t)),this.adElasticLogger.logCreatingVpaidHandler(this.handlers[e].handlerType,!0),new i(t,this.adElasticLogger,this.store)):(this.adElasticLogger.logCreatingVpaidHandler(e,!1),null)}},{key:"createOMIDHandler",value:function(e){if(!this.stopped)return new this.handlers.OMID.handler(this.store,e,this.adElasticLogger)}},{key:"createPrebidHandler",value:(a=Qn().mark(function e(t,i,n){var r,o,s;return Qn().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stopped)return e.abrupt("return");e.next=2;break;case 2:e.prev=2,e.t0=t,e.next=e.t0===Ge.b.UNRULY?6:e.t0===Ge.b.OPENX?11:e.t0===Ge.b.SMART?16:e.t0===Ge.b.RUBICON?21:e.t0===Ge.b.PUBMATIC?26:31;break;case 6:return e.next=8,d.e(5).then(d.bind(null,90));case 8:return r=e.sent,r=r.UnrulyPrebidHandler,e.abrupt("break",32);case 11:return e.next=13,d.e(0).then(d.bind(null,91));case 13:return o=e.sent,r=o.OpenxPrebidHandler,e.abrupt("break",32);case 16:return e.next=18,d.e(4).then(d.bind(null,92));case 18:return o=e.sent,r=o.SmartPrebidHandler,e.abrupt("break",32);case 21:return e.next=23,d.e(3).then(d.bind(null,89));case 23:return s=e.sent,r=s.RubiconPrebidHandler,e.abrupt("break",32);case 26:return e.next=28,d.e(2).then(d.bind(null,93));case 28:return s=e.sent,r=s.PubmaticPrebidHandler,e.abrupt("break",32);case 31:return e.abrupt("return",null);case 32:return e.abrupt("return",new r(this.store,i,this.adElasticLogger,n));case 35:return e.prev=35,e.t1=e.catch(2),e.abrupt("return",null);case 38:case"end":return e.stop()}},e,this,[[2,35]])}),r=function(){var e=this,s=arguments;return new Promise(function(t,i){var n=a.apply(e,s);function r(e){Kn(n,t,i,r,o,"next",e)}function o(e){Kn(n,t,i,r,o,"throw",e)}r(void 0)})},function(e,t,i){return r.apply(this,arguments)})},{key:"destroy",value:function(){this.stopped=!0,this.adElasticLogger=this.store=this.handlers=void 0}}])&&Yn(e.prototype,t),n&&Yn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Jn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Jn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Jn(e)?e:String(e)}(n.key),n)}}var $n=void 0,er=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");if($n)return $n;this.debugTracker=new l("ClickThroughHandler"),this.store=e,this.isMultiAdsActive=this.store.get("mltads"),$n=this}var e,i,n;return e=t,(i=[{key:"invokeClick",value:function(e){this.isMultiAdsActive||this.store.set("forcePause",!1),e&&e.url&&(this.store.emit(f.a.AdClickThru,e.url),e.playerHandles)&&e.url&&this._openClickThroughUrl(e.url)}},{key:"_openClickThroughUrl",value:function(e){this.debugTracker.info("Opening Url","Opening url: ".concat(e)),e=me(e,this.store),this.store.get("isInApp")&&window.taboolaMobile&&window.taboolaMobile.getSupportedFeatures&&window.taboolaMobile.getSupportedFeatures().VideoClick?window.taboolaBridge.emit("videoClick",e):window.open(e)}}])&&Zn(e.prototype,i),n&&Zn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),tr="ad",ir="content";function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){var i,n,r,o,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return i=e.done,e},e:function(e){n=!0,r=e},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw r}}};if(Array.isArray(e)||(s=function(e,t){var i;if(e)return"string"==typeof e?or(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?or(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function sr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ar(n.key),n)}}function ar(e){e=function(e,t){if("object"!=nr(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=nr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==nr(e)?e:String(e)}var I={VAST:"vast",PRICE:"price",PRICING:"pricing",ICONS:{ICON:"icon",ICON_CLICKS:"iconclicks",ICON_CLICK_THROUGH:"iconclickthrough",STATIC_RESOURCE:"staticresource",HTML_RESOURCE:"htmlresource",ICON_VIEW_TRACKING:"iconviewtracking",ICON_CLICK_TRACKING:"iconclicktracking"},CREATIVE_EXTENSION:"creativeextension",OMID:{VERIFICATION:"verification",JAVASCRIPT_RESOURCE:"javascriptresource",VERIFICATION_PARAMETERS:"verificationparameters"},DURATION:"duration",MEDIA_FILES:{MEDIA_FILES:"mediafiles",MEDIA_FILE:"mediafile"},AD_INLINE:{AD_TITLE:"adtitle",AD_SYSTEM:"adsystem"},TRACKING:{URL:"url",TRACKING_EVENTS:"trackingevents",TRACKING:"tracking"},AD_PARAMETERS:"adparameters",AD_WRAPPER:{WRAPPER:"wrapper",VAST_AD_TAG_URL:"vastadtagurl",VAST_AD_TAG_URI:"vastadtaguri"},AD:"ad",LANDING_PAGE:["adclickthrough","clickthrough","adclickthru","clickthru"]},dr="version",lr="width",ur="height",cr={API_FRAMEWORK:"apiFramework",VENDOR:"vendor"},hr=function(){function n(e,t,i){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.rawXml=e,this.store=t,this.vpaidLog=i.vpaidLog,this.vastTags={},this._parseXML(),this._extractVastTags()}var e,t,i;return e=n,(t=[{key:"_parseXML",value:function(){if(window.DOMParser)try{this.vastXml=(new DOMParser).parseFromString(this.rawXml,"text/xml")}catch(e){this.vastXml=void 0}}},{key:"_extractVastTags",value:function(){this.vastXml&&this._extractNode(this.vastXml.children[0])}},{key:"_extractNode",value:function(e){var t,i=this._parseNode(e),n=(this.vastTags[i.tagName]=this.vastTags[i.tagName]||[],this.vastTags[i.tagName].push(i),rr(e.children));try{for(n.s();!(t=n.n()).done;){var r=t.value;this._extractNode(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_parseNode",value:function(e){return{tagName:e.tagName.toLowerCase(),attributes:this._parseAttributes(e.attributes),content:e.textContent,node:e}}},{key:"_parseAttributes",value:function(e){var t,i={},n=rr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.value&&(i[r.name.toLowerCase()]=r.value)}}catch(e){n.e(e)}finally{n.f()}return i}},{key:"destroy",value:function(){this.stopped||(this.stopped=!0,this.vastTags=this.icons=this.store=this.vastXml=this.vpaidLog=void 0)}},{key:"isInlineVast",value:function(){return this.vastTags.hasOwnProperty(I.MEDIA_FILES.MEDIA_FILES)}},{key:"isWrapperVast",value:function(){return this.vastTags.hasOwnProperty(I.AD_WRAPPER.WRAPPER)}},{key:"didParsingFailed",value:function(){return void 0===this.vastXml||this.vastTags.hasOwnProperty("parsererror")}},{key:"getRawXML",value:function(){return this.rawXml}},{key:"_getTagAttribute",value:function(e,t){var i=[];return i=this.vastTags[e]?this.vastTags[e].map(function(e){return e.attributes[t]}).filter(function(e){return e}):i}},{key:"_getTagContent",value:function(e){var t=[];return t=this.vastTags[e]?this.vastTags[e].map(function(e){return e.content}).filter(function(e){return e}):t}},{key:"_getTags",value:function(e){var t=[];return t=this.vastTags[e]?this.vastTags[e]:t}},{key:"extractVastVersion",value:function(){var e=this._getTagAttribute(I.VAST,dr)[0]||"1.1";return u(this.vpaidLog,"vastVersion",{version:e},!1,!1),e}},{key:"extractPrice",value:function(){var e=this._getTagContent(I.PRICE)[0]||this._getTagContent(I.PRICING)[0];if(!e)return 0;try{return isNaN(Number(e))&&-1<e.indexOf("DATA")&&(e=e.replace(/[^0-9.]/g,"")),e=(e=Number(e)).toFixed(3),e=Number(e)}catch(e){return 0}}},{key:"extractIcons",value:function(){var a=this;return this.icons||(this.icons=[],this._getTags(I.ICONS.ICON).map(function(e){var t=a._getInnerTag(e,I.ICONS.ICON_CLICKS),i=void 0!==t,t=i?a._getInnerTag(t,I.ICONS.ICON_CLICK_THROUGH):void 0,n=i?a._getTagContent(I.ICONS.ICON_CLICK_TRACKING):[],r=a._getInnerTag(e,I.ICONS.STATIC_RESOURCE),o=a._getInnerTag(e,I.ICONS.HTML_RESOURCE),s=a._getTagContent(I.ICONS.ICON_VIEW_TRACKING),i={isClickable:i,clickThroughUrl:a._getHTMLTagContent(t),staticresource:a._getHTMLTagContent(r),htmlresource:a._getHTMLTagContent(o),attributes:a._parseIconAttributes(e.attributes),iconViewTracking:s,clickTracking:n};a._isIconValid(i)&&a.icons.push(i)})),this.icons}},{key:"_parseIconAttributes",value:function(e){for(var t in e)e[t]=t===lr||t===ur?"".concat(e[t],"px"):e[t].toLowerCase();return e}},{key:"_getHTMLTagContent",value:function(e){return e?e.textContent.trim():""}},{key:"_isIconValid",value:function(e){return!(e.isClickable&&!e.clickThroughUrl||!e.staticresource&&!e.htmlresource)}},{key:"_getInnerTag",value:function(e,t){for(var i=(e.node||e).children,n=0;n<i.length;n++)if(i[n].tagName.toLowerCase()===t)return i[n]}},{key:"extractOMIDElements",value:function(){var n=this;return this._getTags(I.OMID.VERIFICATION).map(function(e){var t=n._getInnerTag(e,I.OMID.JAVASCRIPT_RESOURCE);if(n._isOMIDFramework(t)){n.hasOmid=!0;var i=n._getHTMLTagAttribute(e.node,cr.VENDOR);if(u(n.vpaidLog,"OMID",{vendor:i}),n.omidVendor||(n.omidVendor=i),n._isValidOMIDVendor(i))return e=n._getInnerTag(e,I.OMID.VERIFICATION_PARAMETERS),t={scriptUrl:n._getHTMLTagContent(t),vendor:i},i=e&&"verificationParameters",e=n._getHTMLTagContent(e),(i=ar(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}}).filter(function(e){return e})}},{key:"_isOMIDFramework",value:function(e){return"omid"===this._getHTMLTagAttribute(e,cr.API_FRAMEWORK)}},{key:"_getHTMLTagAttribute",value:function(e,t){e=e.attributes.getNamedItem(t);return e?e.value:""}},{key:"_isValidOMIDVendor",value:function(e){var t=this.store.get("omidExcludedVendors"),i=new RegExp(e,"gi");return!t||!t.some(function(e){return i.test(e)})}},{key:"hasOMID",value:function(){return this.hasOmid}},{key:"getOMIDVendor",value:function(){return this.omidVendor}},{key:"extractDuration",value:function(){var e=this._getTags(I.DURATION);return 0<e.length&&e[0].content?parseInt(e[0].content.replace("00:00:","")):30}},{key:"extractMediaFiles",value:function(){return this._getTags(I.MEDIA_FILES.MEDIA_FILE)}},{key:"extractAdInline",value:function(){return{as:this._getTagContent(I.AD_INLINE.AD_SYSTEM)[0],at:this._getTagContent(I.AD_INLINE.AD_TITLE)[0]}}},{key:"extractPixels",value:function(e){var t=this;return this._getTags(e).map(function(e){return t.extractURLFromTag(e)})}},{key:"extractURLFromTag",value:function(e){var t=this._getInnerTag(e,"url");return t?t.textContent:e.content}},{key:"hasTrackingPixels",value:function(){return this.vastTags.hasOwnProperty(I.TRACKING.TRACKING_EVENTS)}},{key:"extractTrackingPixels",value:function(){return this._getTags(I.TRACKING.TRACKING)}},{key:"extractAdParameters",value:function(){return this._getTagContent(I.AD_PARAMETERS)[0]||""}},{key:"extractWrapperUrl",value:function(){var e="",t=this._getTags(I.AD_WRAPPER.VAST_AD_TAG_URL),i=this._getTags(I.AD_WRAPPER.VAST_AD_TAG_URI);return 0<t.length?e=this.extractURLFromTag(t[0]):0<i.length&&(e=this.extractURLFromTag(i[0])),e}},{key:"extractAd",value:function(){return this._getTags(I.AD)[0]}},{key:"extractLandingPageUrl",value:function(){var t=this;return this.landingPageUrl||(this.landingPageUrl=I.LANDING_PAGE.map(function(e){return t._extractLandingPageUrl(e)}).find(function(e){return e})),this.landingPageUrl}},{key:"_extractLandingPageUrl",value:function(e){e=this._getTags(e)[0];if(e)return this.extractURLFromTag(e)}}])&&sr(e.prototype,t),i&&sr(e,i),Object.defineProperty(e,"prototype",{writable:!1}),n}();function pr(e){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],d=!0,l=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;d=!1}else for(;!(d=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);d=!0);}catch(e){l=!0,r=e}finally{try{if(!d&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||function(e,t){var i;if(e)return"string"==typeof e?vr(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?vr(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function yr(e,t,i){return(t=gr(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gr(n.key),n)}}function gr(e){e=function(e,t){if("object"!=pr(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=pr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==pr(e)?e:String(e)}var _r=function(){function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.store=e,this.tag=t.tag,this.bitrate=t.bitrate,this.width=t.width,this.height=t.height,this.vpaidLog=t.vpaidLog,this.mediaFiles=yr(yr({},b.VIDEO,[]),A.VPAID,[]),this.isOmidActive=this._isOMIDActive(),this.isMobile=this.store.get("isMobile"),this.fileSizeConfiguration=this.store.get("fileSizeConfiguration")}var e,t,n;return e=i,(t=[{key:"_isOMIDActive",value:function(){var e;return(this.tag.getValueByKey("enblomid")||this.store.get("omid.isActive"))&&((null==(e=window.taboolaMobile)?void 0:e.isSupportOMSDK())||!window.taboolaMobile)}},{key:"destroy",value:function(){this.stopped||(this.stopped=!0,this.mediaFiles=this.fileSizeConfiguration=this.store=this.tag=this.vpaidLog=void 0)}},{key:"setHasOMID",value:function(e){this.hasOmid=e}},{key:"isEmpty",value:function(){for(var e=0,t=Object.entries(this.mediaFiles);e<t.length;e++){var i=fr(t[e],2);i[0];if(0<i[1].length)return!1}return!0}},{key:"isBlockedForHeavyAds",value:function(){return this.blockedForHeavyAds}},{key:"pushMediaFiles",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:30;this.stopped||e&&0!==e.length&&(t=e.length,this._setPreferedMediaFileType(e[0],i),e=(i=this._parseMediaFiles(e,n)).urls,n=i.fallback,i=i.invalid,0===e.length?this.blockedForHeavyAds=i===t:(u(this.vpaidLog,"vastMediaFiles",{urls:e},!1,!1),(i=this._chooseBestVideoMediaFile()||n)&&(this.mediaFiles[b.VIDEO]=[i])))}},{key:"_setPreferedMediaFileType",value:function(e,t){e={textContent:e.content},this.preferedType=this._getDefaultPreferedType(),this.hasOmid?this.isOmidActive||(this.preferedType=A.VPAID):(this.store.getByAdInline(t,e)||{}).pvpdJs&&(this.preferedType=A.VPAID)}},{key:"_getDefaultPreferedType",value:function(){var e=this.store.get("prfrmdfl");return Object.values(b).includes(e)||Object.values(A).includes(e)?e:b.VIDEO}},{key:"_parseMediaFiles",value:function(e,i){var n,r=this,o=[],s=this._shouldValidateFileSize(),a=0;return e.forEach(function(e){var t,e=r._parseMediaFile(e);s&&!r._isFileSizeValid(e,i)?a++:(e.url&&o.push(e.url),(t=r._extractMediaFileType(e.type,e.subType))&&(r._setSelectedMediaFileType(t),t===b.VIDEO&&(n=n||e),r.mediaFiles[t].push(e)))}),{urls:o,fallback:n,invalid:a}}},{key:"_extractMediaFileType",value:function(e,t){return this.mediaFiles[e]?e:this.mediaFiles[t]?t:void 0}},{key:"_setSelectedMediaFileType",value:function(e){this.selectedMediaFileType?this.selectedMediaFileType!==e&&(this.hasMixedFileTypes=!0):this.selectedMediaFileType=e}},{key:"_shouldValidateFileSize",value:function(){return!(!this.fileSizeConfiguration||!this.fileSizeConfiguration.enabled||!this.fileSizeConfiguration.frameTypes||this.fileSizeConfiguration.frameTypes.indexOf(this.store.get("frameType"))<0||"number"!=typeof this.fileSizeConfiguration.threshold)}},{key:"_parseMediaFile",value:function(e){var e={url:e.content,bitrate:e.attributes.bitrate||0,width:e.attributes.width||0,height:e.attributes.height||0,originalType:e.attributes.type},t=(e.url&&(e.url=e.url.trim()),"video/quicktime"===e.originalType&&this.store.get("wurfl.browser.name").indexOf(ht)<0&&(e.originalType="video/mp4"),$t[e.originalType]||$t.unknown),i=t.type,t=t.subType;return e.type=i,e.subType=t,e.ratio=e.width&&e.height?e.height/e.width:"1:1",e}},{key:"_chooseBestVideoMediaFile",value:function(){var i,n=this,e=this._getInitialCandidatesForBestVideoMediaFile(),e=this._getFitToPlacementCandidates(e),r=99999999;return e.forEach(function(e){var t=100*n._getRatioFactor(e.ratio)+n._getSizeFactor(e.width,e.height)+n._getBitrateFactor(e.bitrate);t<r&&(r=t,i=e)}),i}},{key:"_getInitialCandidatesForBestVideoMediaFile",value:function(){var e=[];return 0<(e=this.isMobile&&this.tag.isDirectDemand&&this.store.get("mblmdiadrctdmnd")?this.mediaFiles[b.VIDEO].filter(function(e){return-1<e.url.indexOf("MOBILE")}):e).length?e:this.mediaFiles[b.VIDEO]}},{key:"_getFitToPlacementCandidates",value:function(e){var t=this,i=this.width>=this.height?"width":"height",n=e.filter(function(e){return e[i]>=t[i]});return 0<n.length?n:e}},{key:"_getRatioFactor",value:function(e){return Math.abs(this.height/this.width-e)}},{key:"_getSizeFactor",value:function(e,t){return Math.abs(this.width-e+(this.height-t))}},{key:"_getBitrateFactor",value:function(e){return Math.abs(this.bitrate-e)}},{key:"_isFileSizeValid",value:function(e,t){return!(!isNaN(t)&&!isNaN(e.bitrate)&&e.bitrate/8/1e3*t<this.fileSizeConfiguration.threshold)}},{key:"_hasPreferedMediaFiles",value:function(){var e=this.mediaFiles[this.preferedType];return e&&0<e.length}},{key:"getSelectedMediaFileType",value:function(){return this.hasMixedFileTypes&&this._hasPreferedMediaFiles()?this.preferedType:this.selectedMediaFileType}},{key:"getMediaFiles",value:function(){return this.stopped?{}:this.mediaFiles}}])&&mr(e.prototype,t),n&&mr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),e=d(11),br=d.n(e);function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],d=!0,l=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;d=!1}else for(;!(d=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);d=!0);}catch(e){l=!0,r=e}finally{try{if(!d&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||function(e,t){var i;if(e)return"string"==typeof e?Tr(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Tr(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function kr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Ar(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Ar(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ar(e)?e:String(e)}(n.key),n)}}var wr="progress",Sr="impression",Pr={CLICK_THROUGH:"clickthrough",CLICK_THRU:"clickthru",AD_CLICK_TRACKING:"adclicktracking",CLICK_TRACKING:"clicktracking"},Ir="EMPTY_PIXEL",Or="time",Cr="percentage",Vr="img",Dr="js",Rr="[CACHEBUSTING]",Mr="[ERRORCODE]",xr="[TIMESTAMP]",Lr="[ASSETURI]",Fr="[CONTENTPLAYHEAD]",Br="invalid url",Nr="image error",Wr=function(){function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.store=e,this.tag=t.tag,this.vpaidLog=t.vpaidLog,this.debugTracker=new l("TrackingPixelManager"),this.trackingPixels=br()(),this.firedPixels=[],this.firedUrls=[],this.isPaused=!1,this.replaceExternalPixels=this.store.get("rplcpxlmcrplchldr"),this.pixelsToFireMultipleTimes=this.store.get("frmltplpxls")||[]}var e,t,n;return e=i,(t=[{key:"destroy",value:function(){this.stopped||(this.stopped=!0,this.trackingPixels=this.debugTracker=this.firedPixels=this.firedUrls=this.pixelsToFireMultipleTimes=this.store=this.tag=this.vpaidLog=void 0)}},{key:"pushPixel",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Vr;this.stopped||e&&t&&"about:blank"!==t&&(e=e.toLowerCase(),this.trackingPixels[e])&&(e===wr?this._pushProgressPixel(t,i,n):this.trackingPixels[e].push({pixel:t,method:n.toLowerCase()}))}},{key:"_pushProgressPixel",value:function(e,t,i){var n,t=t.attributes.offset;t&&(n=-1<t.indexOf("%")?Cr:Or,this.trackingPixels[wr]={pixel:e,offset:this._convertOffsetByType(t,n),offsetType:n,fired:!1,method:i.toLowerCase()})}},{key:"_convertOffsetByType",value:function(e,t){if(t===Cr)return parseInt(e.replace("%",""))/100;if(t===Or){var t=e,i=(t=t.split("."))[0].split(":"),n=0,r=1;for(2===t.length&&(n+=parseInt(t[1])/1e3);0<i.length;)n+=r*parseInt(i.pop(),10),r*=60;return n}}},{key:"isEmpty",value:function(){for(var e=0,t=Object.entries(this.trackingPixels);e<t.length;e++){var i=Er(t[e],2);i[0];if(0<i[1].length)return!1}return!0}},{key:"firePixel",value:function(t,i){var n=this;if(!this.isPaused){if(!this._isValid(t))return u(this.vpaidLog,"invalidPixel",{pixelType:t||Ir},!1,!1),!1;this.firedPixels.push(t),this.getPixels(t).forEach(function(e){n._sendPixel(e.pixel,e.method,t,i)})}return!0}},{key:"_isValid",value:function(e){return!!e&&(e!==f.a.AdVideoComplete||-1<this.firedPixels.indexOf(f.a.AdVideoThirdQuartile))}},{key:"_sendPixel",value:function(t,e,i,n){if(!(-1<this.firedUrls.indexOf(t)))if(function(e){try{return new URL(e),1}catch(e){}}(t)){this.pixelsToFireMultipleTimes.indexOf(i)<0&&this.firedUrls.push(t);try{t=this._replaceMacros(t.trim(),n),this.tag.getValueByKey("pxlnotsmtp")||(t=this._addCachebustTimestamp(t)),e===Vr?this._fireImagePixel(t):e===Dr&&this._fireScriptPixel(t)}catch(e){this.debugTracker.warn("Fire pixel",{status:"fail",ex:e,pixelUrl:t})}}else this._reportInvalidPixel(t,Br)}},{key:"_replaceMacros",value:function(e,t){return e=me(e,this.store,t),e=this._replaceCachebustingMacro(e),this.replaceExternalPixels&&(e=this._replaceErrorMacro(e,t),e=this._replaceTimestampMacro(e),e=this._replaceVideoMacro(e,t),e=this._replaceVideoCurrentTimeMacro(e,t)),e}},{key:"_replaceCachebustingMacro",value:function(e){var t;return e.indexOf(Rr)<0?e:(t=Date.now().toString().substring(5),e.replace(Rr,t))}},{key:"_replaceErrorMacro",value:function(e,t){return e.indexOf(Mr)<0?e:(t=be(t),e.replace(Mr,t))}},{key:"_replaceTimestampMacro",value:function(e){return e.indexOf(xr)<0?e:e.replace(xr,(new Date).toISOString())}},{key:"_replaceVideoMacro",value:function(e,t){return e.indexOf(Lr)<0||!t||!t.dispatcher||!t.dispatcher.getVideoUrl?e.replace(Lr,""):e.replace(Lr,t.dispatcher.getVideoUrl())}},{key:"_replaceVideoCurrentTimeMacro",value:function(e,t){var i,n;return!(e.indexOf(Fr)<0)&&t&&t.dispatcher&&t.dispatcher.video&&(t=t.dispatcher.video.currentTime)?(i=(i=Math.floor(t/60))<10?"0".concat(i):i,n=(n=Math.floor(t%60))<10?"0".concat(n):n,t=t.toFixed(3).split(".")[1],e.replace(Fr,"00:".concat(i,":").concat(n,".").concat(t))):e.replace(Fr,"")}},{key:"_addCachebustTimestamp",value:function(e){return"".concat(e).concat(-1<e.search(/\?/)?"&":"?").concat((new Date).getTime())}},{key:"_fireImagePixel",value:function(e){var t=this,i=new Image;i.onerror=function(){t._reportInvalidPixel(e,Nr)},i.src=e}},{key:"_reportInvalidPixel",value:function(e,t){u(this.vpaidLog,"fireInvalidPixel",{url:e,err:t},!1,!1)}},{key:"_fireScriptPixel",value:function(e){var t=document.createElement("script");t.src=e,t.type="text/javascript",t.async=!0,document.body.appendChild(t)}},{key:"pause",value:function(){this.isPaused=!0}},{key:"extractWinningPrice",value:function(e){var t,i,n={found:!1,price:void 0};return e&&(t=this.getPixels(Sr),i=new RegExp("".concat(e,"=(.*?)(&|$)"),"gi"),t.forEach(function(e){var t,e=i.exec(e.pixel);e&&1<e.length&&(e=e[1])&&(t=e,t=parseFloat(e),!isNaN(t))&&(n.found=!0,n.price=e)})),n}},{key:"getPixels",value:function(e){var t=this;return this._getLinkedPixelTypes(e).map(function(e){if(t.trackingPixels&&t.trackingPixels[e])return t.trackingPixels[e]}).filter(function(e){return e&&0<e.length}).flat()}},{key:"_getLinkedPixelTypes",value:function(e){var t,i=[];return e&&((e=this._cleanPixelType(e))===Pr.CLICK_THROUGH||e===Pr.CLICK_THRU?i.push(Pr.AD_CLICK_TRACKING,Pr.CLICK_TRACKING):(i.push(e,"aduser".concat(e),"advideo".concat(e),"ad".concat(e)),t="ed",e.match(new RegExp("".concat(t,"$")))&&(e=e.slice(0,e.length-(this._isPixelTypeContainConsonantChar(e)?3:2)),i.push(e)))),i}},{key:"_cleanPixelType",value:function(e){return e.toLowerCase().replace(/^advideo|^aduser|^ad/gi,"")}},{key:"_isPixelTypeContainConsonantChar",value:function(e){return!((e=e.replace(/ed$/,"")).length<2)&&e.charAt(e.length-1)===e.charAt(e.length-2)}},{key:"hasPixels",value:function(e){return 0<this.trackingPixels[e].length}}])&&kr(e.prototype,t),n&&kr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function jr(e,t,i,n,r,o,s,a,d,l){var f=6<arguments.length&&void 0!==s&&s,s=7<arguments.length&&void 0!==a?a:5e3,v=8<arguments.length&&void 0!==d?d:"application/x-www-form-urlencoded",y=!(!(9<arguments.length&&void 0!==l)||l),m=[];function g(d,l,u,c,h,e,p){var t,i;d&&(l=l||"",t=new XMLHttpRequest,i=l?"POST":"GET",t.open(i,d,!0),!(t.withCredentials=!0)===e&&(t.withCredentials=!1),t.setRequestHeader("Content-type",v),t.async=null==h||h,t.callback="function"==typeof u?u:function(){},t.fallback="function"==typeof c?c:function(){},t.timeout=p,t.gotResponse=!1,t.addEventListener("error",function(e){this.gotResponse||(this.gotResponse=!0,t.fallback())}),t.addEventListener("load",function(e){this.gotResponse||(this.gotResponse=!0,t.fallback())}),t.addEventListener("abort",function(e){this.gotResponse||(this.gotResponse=!0,t.fallback())}),t.addEventListener("timeout",function(e){this.gotResponse||(this.gotResponse=!0,t.fallback())}),t.addEventListener("readystatechange",function(e){if(4==this.readyState&&!this.gotResponse)switch(this.gotResponse=!0,this.status+""){case"200":case"204":case"460":this.callback(this.responseText,m,d);break;default:var t,i,n,r,o,s,a;if(!y)return m.push(this.status),t=d,i=l,n=u,r=c,o=h,s=p,a=this.status,y=!0,f&&(t+="".concat(-1<t.indexOf("?")?"&":"?","rt=1&prst=").concat(a||"")),void g(t,i,n,r,o,!1,s);m.push(this.status),this.fallback(m,d)}}),t.send(l))}g(e,t,i,n,r,o,s)}e=d(1),e=d.n(e);function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Ur(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Ur(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ur(e)?e:String(e)}(n.key),n)}}var Gr=function(){function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.parameters=e,this.store=t,this._initOppsAggregator()}var e,t,n;return e=i,(t=[{key:"_initOppsAggregator",value:function(){this.oppsAggregator=this.store.get("oppsula"),"function"==typeof this.oppsAggregator.setSource&&this.oppsAggregator.setSource("player",this.store)}},{key:"send",value:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};e&&!this.store.get("isFireOppBlocked")&&(e={tagItem:e,playerDAST:i,extraData:n||{},playerParams:this.parameters},this.oppsAggregator.send("player",t,e))}},{key:"_isStickyDisabled",value:function(){return 6!==this.store.get("subUnitType")||!this.store.get("enableStickyOnNonAllowSlider")}},{key:"_getSubUnitType",value:function(e){return 6===this.store.get("subUnitType")&&e.adjacencyAd||this.store.get("isSliderCutOff")&&!e.alwsldr&&this._isStickyDisabled()?0:this.store.get("subUnitType")}},{key:"generateOppParams",value:function(e,t,i){var n,r,o,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a=e.lineItemStats,d=this.store.get("pstn")||1,l=e.vidDast||e.dast,u=(new Date).getTime()-e.created,c="".concat(this.store.get("ab_test")).concat(re(e,this.store)),h=e.vpaidWrapperData||(e.vpaidWrapper&&e.vpaidWrapper.tag?e.vpaidWrapper.tag.vpaidWrapperData:void 0),p={st:(n=e.rollType,r=(p={"pre-roll":r=0,preroll:0,"mid-roll":-1,midroll:-1,"post-roll":-2,postroll:-2}).hasOwnProperty(n)?p[n]:r),rs:e.sequenceId,os:+e.waterfallTagId+1,tms:Date.now(),d:u,rst:t,dast:l,pstn:d,dp:le(e.dp),mob:ne(this.store.get("isMobile")),vstt:ne(!document.hidden),unv:this.store.get("unit_version"),uv:this.store.get("unit_version"),unt:le(this.store.get("unit_type")),abt:c,frd:this.store.get("fdScore"),agl:this.store.get("preset.level"),rp:h&&h.vastPrice,mty:h&&h.mediatype,fv_t:a&&a.tries,fv_c:a&&a.conversions,fv_f:a&&a.fails,fv_fr:a&&a.failsRow,awr:this.store.get("performance.dtsvrRoundTripAverageDuration"),pm:this.store.get("performance.performanceMeasurment"),su:this.store.get("subUnitType"),pdast:i,extpvid:window.TRCImpl&&window.TRCImpl.external_page_view,prdid:s.prdid},f=(this.store.get("modifiedPlacement")&&(s.mp=this.store.get("modifiedPlacement")),s.su=this._getSubUnitType(e),this._addExtraParams(s,p),this._addCmTagParams(p),this._addDelayedParams(p,e),p);for(o in f)void 0===f[o]&&delete f[o];return p}},{key:"_addCmTagParams",value:function(e){var t=this.store.get("oppsQS")||{};Object.assign(e,t)}},{key:"_addDelayedParams",value:function(e,t){t=this._delayedParams(t)||{};Object.assign(e,t)}},{key:"_addExtraParams",value:function(e,t){for(var i in e)"vidCurrentTime"!==i&&(t[i]=e[i])}},{key:"_isQuartileOpportunity",value:function(e){return 21<=e&&e<=25}},{key:"_flattenParams",value:function(e){return e.map(function(e){return e.key+"="+e.value})}},{key:"_delayedParams",value:function(e){return{"auc-dast":this.store.get("auc_dast")||void 0,sts:this.parameters.STS,wp:this.parameters.WP,vpd:e.pubId||this.parameters.VPD,vptd:e.tagId||this.parameters.VPTD,vmt:(e.isRon?1:0)||this.parameters.VMT||0,pv:this.store.get("player_version")||999,pt:le(this.store.get("ab_test")||999),w:he(this.store.get("width")).toString(),h:he(this.store.get("height")).toString(),rv:e.requiredViewability}}},{key:"destroy",value:function(){this.store=this.oppsAggregator=void 0}}])&&Hr(e.prototype,t),n&&Hr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qr(e,t){var i,n,r,o,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return i=e.done,e},e:function(e){n=!0,r=e},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw r}}};if(Array.isArray(e)||(s=function(e,t){var i;if(e)return"string"==typeof e?Qr(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Qr(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Kr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yr(n.key),n)}}function i(e,t,i){return(t=Yr(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Yr(e){e=function(e,t){if("object"!=zr(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=zr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==zr(e)?e:String(e)}i(i(i(i(i(i(i(i(i(i(M={},f.a.TagStarted,f.a.TagStarted),f.a.AdImpression,f.a.AdImpression),f.a.AdLoaded,f.a.AdLoaded),f.a.AdVideoFirstQuartile,f.a.AdVideoFirstQuartile),f.a.AdVideoMidpoint,f.a.AdVideoMidpoint),f.a.AdVideoThirdQuartile,f.a.AdVideoThirdQuartile),f.a.AdVideoComplete,f.a.AdVideoComplete),"SOUND_ON_HOVER","soundOnHover"),"UNLOAD_PAGE","unloadPage"),"UNIT_FETCHER_DEMAND","unitFetcherDemand"),i(i(i(i(i(i(i(i(i(i(M,"LITE_UNIT_DEMAND","liteUnitDemand"),"ADX_REQUEST","adxRequest"),"START_AD","startAd"),"REPLAY_AD","replayAd"),"TB_COMPLETION","tbCompletion"),"AD_VIDEO_START","adVideoStart"),"AD_STARTED","adStarted"),"EARLY_AD_IMPRESSION","earlyAdImpression"),"NON_FRIENDLY_VIDEO","nonFriendlyVideo"),"AD_PLAYING","adPlaying"),i(i(i(i(i(i(i(i(i(i(M,"AD_UNMUTED","adUnmuted"),"OMID_DETECTED","OMIDDetected"),"FIRST_SESSION_IMPRESSION","firstSessionImpression"),"AD_IMPRESSION_TIMEOUT","adImpressionTimeout"),"PUB_VIDEO_PREVENTING","pubVideoPreventing"),"HIJACK_ATTEMPT","hijackAttempt"),"MAX_NETWORK_CALLS","maxNetworkCalls"),"AD_LOADED_TIMEOUT","adLoadedTimeout"),"AD_TIMEOUT","adTimeout"),"GLOBAL_TIMEOUT","globalTimeout"),i(i(i(i(i(i(i(i(i(i(M,"AD_UNIT_LOAD_FAILED","adUnitLoadFailed"),"GLOBAL_AD_TIMEOUT","globalAdTimeout"),f.a.AdError,f.a.AdError),"AD_ERROR_BEFORE_LOAD","adErrorBeforeLoad"),"AD_SKIPPED","adSkipped"),"MEDIA_FILE_NOT_SUPPORTED","mediaFileNotSupported"),"FILTER_VAST_BY_REGEX","filterVASTByRegex"),"MAX_WRAPPERS","maxWrappers"),"EMPTY_VAST","emptyVAST"),"HEAVY_ADS_BLOCK","heavyAdsBlock"),i(i(i(i(i(i(i(i(i(i(M,"VAST_WRAPPER_ERROR","VASTWrapperError"),"VAST_ERROR","VASTError"),"AD_DROPPED","adDropped"),"PLAYER_CLOSED","playerClosed"),"QUEUE_EXPIRED","queueExpired"),"QUEUE_TRIMMED","queueTrimmed"),"IMPRESSION_PIXEL_FIRED","impressionPixelFired"),"PREBID_NO_BID","prebidNoBid"),"PREBID_BID_WON","prebidBidWon"),"PREBID_EMPTY_RESPONSE","prebidEmptyResponse");var O=i(i(M,"PREBID_MISSING_PRICE","prebidMissingPrice"),"PREBID_HANDLER_NOT_SUPPORTED","prebidHandlerNotSupported"),Xr=(i(i(i(i(i(i(i(i(i(i(M={},f.a.TagStarted,{opp:e.a.tagStarted}),f.a.AdImpression,{opp:e.a.tagImpression,sendOnce:!0}),f.a.AdLoaded,{opp:e.a.adLoaded,sendOnce:!0}),f.a.AdVideoFirstQuartile,{opp:e.a.videoFirstQuartile,sendOnce:!0,isQuartile:!0}),f.a.AdVideoMidpoint,{opp:e.a.videoMidpoint,sendOnce:!0,isQuartile:!0}),f.a.AdVideoThirdQuartile,{opp:e.a.videoThirdQuartile,sendOnce:!0,isQuartile:!0}),f.a.AdVideoComplete,{opp:e.a.videoComplete,sendOnce:!0,isQuartile:!0}),O.SOUND_ON_HOVER,{opp:e.a.soundOnHover,sendOnce:!0}),O.UNLOAD_PAGE,{opp:e.a.unloadPage,sendOnce:!0}),O.UNIT_FETCHER_DEMAND,{opp:e.a.unitFetcherWfDemand}),i(i(i(i(i(i(i(i(i(i(M,O.LITE_UNIT_DEMAND,{opp:e.a.liteUnitWfDemand}),O.ADX_REQUEST,{opp:e.a.adxAdRequest}),O.START_AD,{opp:e.a.startAd}),O.REPLAY_AD,{opp:e.a.replayAd}),O.TB_COMPLETION,{opp:e.a.newCompletion,sendOnce:!0}),O.AD_VIDEO_START,{opp:e.a.adVideoStart,sendOnce:!0}),O.AD_STARTED,{opp:e.a.adStarted,sendOnce:!0}),O.EARLY_AD_IMPRESSION,{opp:e.a.earlyAdImpression}),O.NON_FRIENDLY_VIDEO,{opp:e.a.unfriendlyVideo}),O.AD_PLAYING,{opp:e.a.adPlaying,sendOnce:!0}),i(i(i(i(i(i(i(i(i(i(M,O.AD_UNMUTED,{opp:e.a.adUnmuted,sendOnce:!0,checkIsEnabled:!0}),O.OMID_DETECTED,{opp:e.a.omidDetected}),O.FIRST_SESSION_IMPRESSION,{opp:e.a.firstImpression,sendOnce:!0}),O.AD_IMPRESSION_TIMEOUT,{opp:e.a.adImpressionTimeout}),O.PUB_VIDEO_PREVENTING,{opp:e.a.pubVideoPreventing,sendOnce:!0}),O.HIJACK_ATTEMPT,{opp:e.a.hijackAttempt}),O.MAX_NETWORK_CALLS,{opp:e.a.maxNetworkCalls}),O.AD_LOADED_TIMEOUT,{opp:e.a.adloadedTimeout}),O.AD_TIMEOUT,{opp:e.a.adtoTimeout}),O.GLOBAL_TIMEOUT,{opp:e.a.globalTimeout}),i(i(i(i(i(i(i(i(i(i(M,O.AD_UNIT_LOAD_FAILED,{opp:e.a.adUnitLoadFailed}),O.GLOBAL_AD_TIMEOUT,{opp:e.a.globalAdTimeout}),f.a.AdError,{opp:e.a.adError}),O.AD_ERROR_BEFORE_LOAD,{opp:e.a.adErrorBeforeLoad}),O.AD_SKIPPED,{opp:e.a.adSkiped}),O.MEDIA_FILE_NOT_SUPPORTED,{opp:e.a.mediaFileNotSupported}),O.FILTER_VAST_BY_REGEX,{opp:e.a.filterVastByRegex}),O.MAX_WRAPPERS,{opp:e.a.maxNumberOfWrappers}),O.EMPTY_VAST,{opp:e.a.emptyVast}),O.HEAVY_ADS_BLOCK,{opp:e.a.heavyFilesBlocked}),i(i(i(i(i(i(i(i(i(i(M,O.VAST_WRAPPER_ERROR,{opp:e.a.vastWrapperError}),O.VAST_ERROR,{opp:e.a.vastError}),O.AD_DROPPED,{opp:e.a.adDropped}),O.PLAYER_CLOSED,{opp:e.a.playerClosed}),O.QUEUE_TRIMMED,{opp:e.a.queueTrimmed}),O.IMPRESSION_PIXEL_FIRED,{opp:e.a.impressionPixelFired}),O.PREBID_NO_BID,{opp:e.a.prebidNoBids}),O.PREBID_BID_WON,{opp:e.a.prebidBidWon}),O.PREBID_EMPTY_RESPONSE,{opp:e.a.prebidEmptyResponse}),O.PREBID_MISSING_PRICE,{opp:e.a.prebidMissingPrice}),i(M,O.PREBID_HANDLER_NOT_SUPPORTED,{opp:e.a.prebidHandlerNotSupported})),Jr="adImpression",Zr="setKey",$r="addWrapper",eo="getWrapper",to=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.store=e.store,this.tag=e.tag,this.oppsManager=new Gr({CM_DOMAIN:e.creatives.CM_DOMAIN,AUC_DAST:e.creatives.AUC_DAST,sequenceId:this.tag.sequenceId,ST:e.creatives.ST,STS:e.creatives.STS,SDID:e.creatives.SDID,PT:e.creatives.PT,PV:e.creatives.PV,WP:e.creatives.WP,VPD:e.creatives.PUBID,VPTD:e.creatives.TAGID,VMT:e.creatives.VMT},this.store),this.addIABErrorCode=this.store.get("erronopp"),this.unitVersion=this.store.get("unit_version"),this.paused=!1,this.events=[],this.delayedQuartileEvents=[],this.externalDelayedEvents=this.store.get("externalDelayedEvents")||[],this.tracker=new l("AdEvents [VpaidWrapper ".concat(e.index,"]")),this.playerDAST=new Zt(this.store)}var e,i,n;return e=t,(i=[{key:"destroy",value:function(){var e;this.stopped=this.paused=!0,null!=(e=this.oppsManager)&&e.destroy(),null!=(e=this.playerDAST)&&e.destroy(),this.store=this.tag=this.oppsManager=this.trackingPixelManager=this.events=this.delayedQuartileEvents=this.tracker=this.playerDAST=this.externalDelayedEvents=void 0}},{key:"onEvent",value:function(e,t){if(!this.stopped&&!this.paused&&Xr[e]){this._isAdErrorBeforeAdLoaded(e)&&(e=O.AD_ERROR_BEFORE_LOAD);var i=Xr[e],n=i.opp,r=i.sendOnce,r=void 0!==r&&r,o=i.isQuartile,o=void 0!==o&&o,i=i.checkIsEnabled,i=void 0!==i&&i;if(ke(n))this.tracker.warn("Handling event ".concat(e," without opp id"));else{if(this.tracker.info("Handling event ".concat(e," with opp id '").concat(n)),this._shouldDelayQuartileEvent(o))return void this.delayedQuartileEvents.push(e);if(this._isOppDisabled(i,n))return;if(e===O.FIRST_SESSION_IMPRESSION){if(!this.store.get("isFirstImpression"))return;this.store.set("isFirstImpression",!1)}o=this._getEventData(e,t);r?this._sendOppOnce(e,n,o):this._sendOpp(n,o)}this.events.push(e)}}},{key:"_isAdErrorBeforeAdLoaded",value:function(e){return e===f.a.AdError&&!this.isEventFired(f.a.AdLoaded)}},{key:"_shouldDelayQuartileEvent",value:function(e){return e&&!this.hadImpression}},{key:"_isOppDisabled",value:function(e,t){return e&&!this.store.get("enblopp.".concat(t))}},{key:"_sendOppOnce",value:function(e,t,i){this.isEventFired(e)||this._sendOpp(t,i)}},{key:"_sendOpp",value:function(e,t){this.oppsManager.send(this.tag,e,this.getFromPlayerDAST(),t)}},{key:"_getEventData",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={prdid:this.predictorId,vidCurrentTime:null==(t=i.adView)?void 0:t.videoTag.currentTime,unv:this.unitVersion,uv:this.unitVersion};if(this.tag.prebidPrice&&(n.cisbp=btoa(this.tag.prebidPrice),n.rp=this.tag.prebidPrice),this.addIABErrorCode)switch(e){case f.a.AdError:case O.AD_ERROR_BEFORE_LOAD:n.sdid=be(i);break;case O.AD_UNIT_LOAD_FAILED:case O.AD_LOADED_TIMEOUT:case O.AD_TIMEOUT:case O.GLOBAL_TIMEOUT:n.sdid=r.a.timeout;break;case O.EMPTY_VAST:n.sdid=r.a.schemaValidationError;break;case O.MEDIA_FILE_NOT_SUPPORTED:n.sdid=r.a.mediaFileNotSupported;break;case f.a.AdImpression:0<i.buffer&&(n.bis=i.buffer);break;case O.OMID_DETECTED:n.vendor=i.vendor}return n}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}},{key:"isEventFired",value:function(e){return-1<this.events.indexOf(e)}},{key:"sendDelayedQuartileOpps",value:function(){var e,t=qr(this.delayedQuartileEvents);try{for(t.s();!(e=t.n()).done;){var i=e.value;this.onEvent(i)}}catch(e){t.e(e)}finally{t.f()}}},{key:"updatePlayerDAST",value:function(e,t){e===Jr&&this.playerDAST.onImpression(t.videoUrl,t.videoEl),e===Zr&&this.playerDAST.set(t),e===$r&&this.playerDAST.addWrapper(t)}},{key:"getFromPlayerDAST",value:function(e){return e===eo?this.playerDAST.getWrappers():e?this.playerDAST.getByKey(e):this.playerDAST.get()}},{key:"firePixel",value:function(e,t,i){if(this.stopped||this.paused)return!1;if(!(3<arguments.length&&void 0!==arguments[3]&&arguments[3])){if(this._isVideoCompletionInvalid(e)||this._isImpressionDuplicated(e))return!0;if(this.shouldDelayEvent(e,i))return!1;if(this._shouldDelayFirstPause(e,i))return this.ignoredFirstAdPausedPixel=!0}return e===f.a.AdImpression&&this.onEvent(O.IMPRESSION_PIXEL_FIRED),null==(i=this.trackingPixelManager)?void 0:i.firePixel(e,t)}},{key:"_isVideoCompletionInvalid",value:function(e){return e===f.a.AdVideoComplete&&!this.hadImpression}},{key:"_isImpressionDuplicated",value:function(e){return e===f.a.AdImpression&&this.hadImpression}},{key:"shouldDelayEvent",value:function(e,t){return-1<this.externalDelayedEvents.indexOf(e)&&t}},{key:"_shouldDelayFirstPause",value:function(e,t){return e===f.a.AdPaused&&!this.ignoredFirstAdPausedPixel&&t}},{key:"oppsManager",get:function(){return this._oppsManager},set:function(e){this._oppsManager=e}},{key:"trackingPixelManager",get:function(){return this._trackingPixelManager},set:function(e){this._trackingPixelManager=e}},{key:"predictorId",get:function(){return this._predictorId},set:function(e){this._predictorId=e}},{key:"hadImpression",get:function(){return this._hadImpression},set:function(e){this._hadImpression=e}},{key:"playerDAST",get:function(){return this._playerDAST},set:function(e){this._playerDAST=e}}])&&Kr(e.prototype,i),n&&Kr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function io(e){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function no(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],d=!0,l=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;d=!1}else for(;!(d=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);d=!0);}catch(e){l=!0,r=e}finally{try{if(!d&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||function(e,t){var i;if(e)return"string"==typeof e?ro(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ro(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function oo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=io(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=io(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==io(e)?e:String(e)}(n.key),n)}}var so=d(7),ao=function(){function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");so.mixin(this),this.store=e,this.options=t,this.vpaidLog=this.options.vpaidLog,this.tag=this.options.tag,this.jsTrackers=this.tag.jsTrackers||[],this.vasts=[],this.maxNumberOfVastWrappers=this.store.get("mxwrps"),this.stopped=!1,this.debugTracker=new l("RawVastHandler"),this.mediaFiles=new _r(this.store,this.options),this.trackingPixelManager=new Wr(this.store,this.options),this._setVastRegex(),this.secureWrapperUrls=_e(e)}var e,t,n;return e=i,(t=[{key:"_setVastRegex",value:function(){var e=this.tag.getValueByKey("rgxdcdd"),e=e&&0<e.length?this._decodeRegex(e):this.tag.getValueByKey("regx");e&&(this.regex=new RegExp(e,"i"))}},{key:"_decodeRegex",value:function(e){return e.map(function(t){try{return atob(t)}catch(e){return t}}).join("|")}},{key:"parseVastFromXML",value:function(e){this.stopped||(this._filterVastByRegex(e)?(u(this.vpaidLog,"vastFilterdByRegex",{regex:this.regex.toString()}),this._onError(uo.FILTER_BY_REGEX,{response:e},O.FILTER_VAST_BY_REGEX)):(u(this.vpaidLog,"parseVastFromString",{xml:e},!1,!1),e=new hr(e,this.store,this.options),this.vasts.push(e),this._extractAdDataFromVast(e),this._extractTrackingPixels(e),this._extractLandingPageUrl(e),this._analyzeVast(e),e.isInlineVast()?this._handleInlineVast(e):e.isWrapperVast()?this._isNumberOfWrappersReachedCap()?this._onError(uo.MAX_WRAPPERS,{response:e.getRawXML(),maxNumberOfWrappers:{hasReachedCap:!0,cap:this.maxNumberOfVastWrappers}},O.MAX_WRAPPERS):this._handleWrapperVast(e):this._onError(uo.EMPTY_VAST,{response:e.getRawXML()},O.EMPTY_VAST)))}},{key:"_isNumberOfWrappersReachedCap",value:function(){return 0<this.maxNumberOfVastWrappers&&this.vasts.length>=this.maxNumberOfVastWrappers}},{key:"_handleInlineVast",value:function(e){var t=e.extractMediaFiles();this.mediaFiles.pushMediaFiles(t,this._extractAdInlines(),this.duration),this.mediaFiles.isEmpty()?this._onMediaFilesParsingError(e):this._onMediaFilesParsedSuccessfully(e)}},{key:"_onMediaFilesParsingError",value:function(e){var t,i;this.debugTracker.error("Vast","No media files!"),i=this.mediaFiles.isBlockedForHeavyAds()?(t=uo.BLOCKED_FOR_HEAVY_ADS,O.HEAVY_ADS_BLOCK):(t=uo.NO_MEDIA_FILES_AFTER_SORT,O.MEDIA_FILE_NOT_SUPPORTED),this._onError(t,{response:e.getRawXML()},i)}},{key:"_extractTrackingPixels",value:function(e){this._extractImpressionPixels(e),this._extractErrorPixels(e),this._extractClickPixels(e),this._extractTrackingEvents(e),this._addUnitEventTrackers(),this._addExternalEventTrackers()}},{key:"_extractImpressionPixels",value:function(e){var t=this;e.extractPixels(co.IMPRESSION).concat(this._getInternalImpressionPixels()).forEach(function(e){return t.trackingPixelManager.pushPixel(co.IMPRESSION,e)})}},{key:"_getInternalImpressionPixels",value:function(){if(this.addedImpressionPixels)return[];this.addedImpressionPixels=!0;var e=[];return this.tag.pixel&&e.push(this.tag.pixel),e=e.concat(this.tag.conversionPixels)}},{key:"_extractErrorPixels",value:function(e){var t=this;e.extractPixels(co.ERROR).forEach(function(e){return t.trackingPixelManager.pushPixel(co.ERROR,e)})}},{key:"_extractClickPixels",value:function(e){var t=this;e.extractPixels(co.CLICK_TRACKING).forEach(function(e){return t.trackingPixelManager.pushPixel(co.CLICK_TRACKING,e)}),this.tag.nas&&this.tag.nas.link&&this.trackingPixelManager.pushPixel(co.CLICK_TRACKING,this.tag.nas.link)}},{key:"_extractTrackingEvents",value:function(n){var r=this;n.hasTrackingPixels()&&n.extractTrackingPixels().forEach(function(e){var t=e.attributes.event,i=n.extractURLFromTag(e);r.trackingPixelManager.pushPixel(t,i,e)})}},{key:"_addUnitEventTrackers",value:function(){for(var i=this,n=0,r=Object.entries(this.tag.eventTrackers);n<r.length;n++)!function(){var e=no(r[n],2),t=e[0],e=e[1];e&&e.forEach(function(e){return i.trackingPixelManager.pushPixel(t,e.url,{},e.type)})}()}},{key:"_addExternalEventTrackers",value:function(){var e=this.store.get("expxls");if(e)for(var t=0,i=Object.entries(e);t<i.length;t++){var n=no(i[t],2),r=n[0],n=n[1];this.trackingPixelManager.pushPixel(r,n)}}},{key:"_extractLandingPageUrl",value:function(e){this.landingPageUrl=e.extractLandingPageUrl()}},{key:"_isHandlingFirstVast",value:function(){return 1===this.vasts.length}},{key:"_analyzeVast",value:function(e){var t=e.extractAd(),i=e.extractAdInline(),n=i.as,i=i.at,e=e.extractWrapperUrl();this.vastAnalysis={},t&&(this.vastAnalysis.aid=t.attributes.id),n&&(this.vastAnalysis.as=n,u(this.vpaidLog,"adSystem",{system:n},!1,!1)),i&&(this.vastAnalysis.at=i),e&&(this.vastAnalysis.wu=e)}},{key:"_onMediaFilesParsedSuccessfully",value:function(e){this._extractAdParameters(e),this._publishResponse(e)}},{key:"_extractAdParameters",value:function(e){this.adParameters=e.extractAdParameters()}},{key:"_publishResponse",value:function(e){this._publishVastXMLToTRC(e.getRawXML()),this._publishVastData(e)}},{key:"_publishVastXMLToTRC",value:function(e){this.store.get("report_vast_xml")&&window.TRC.vastXmlList.push(e)}},{key:"_publishVastData",value:function(e){var t=this.mediaFiles.getSelectedMediaFileType();u(this.vpaidLog,"vpiadWrapperFound",{wrapperMode:t},!1,!1);t={type:t,handlerOptions:{adParams:this.adParameters,vpaidFiles:this.mediaFiles.getMediaFiles(),extra:{duration:this.duration}},vastOptions:{price:this.price,icons:this.icons,analysis:this.vastAnalysis||{},omidElements:this.omidElements,hasOmid:e.hasOMID()||!1,omidVendor:e.getOMIDVendor()||"",landingPage:this.landingPageUrl||""},trackingPixelManager:this.trackingPixelManager};this.emit(lo.MEDIA_FILES_FOUND,t)}},{key:"_extractAdInlines",value:function(){return this.vasts.map(function(e){return e.extractAdInline()})}},{key:"_handleWrapperVast",value:function(e){var t=e.extractWrapperUrl();t?(t=me(t,this.store),t=this.secureWrapperUrls?t.replace("http:","https:"):t,this._isHandlingFirstVast()&&u(this.vpaidLog,"VastWrapper",{type:"wrapper"}),this.parseVastFromURL(t)):this._onError(uo.MISSING_WRAPPER_URL,{response:e.getRawXML()},O.VAST_WRAPPER_ERROR)}},{key:"_extractAdDataFromVast",value:function(e){e.didParsingFailed()?this._onError(uo.PARSING_FAILED,{response:e.getRawXML()},O.VAST_ERROR):(this.vastVersion=e.extractVastVersion(),this.price=e.extractPrice(),this.icons=e.extractIcons(),this.omidElements=(this.omidElements||[]).concat(e.extractOMIDElements()),this.mediaFiles.setHasOMID(e.hasOMID()),this.duration=e.extractDuration())}},{key:"parseVastFromURL",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";!this.stopped&&e&&(this._shouldAddInstreamPlacement()&&(e+=(e.includes("?")?"&":"?")+"plcmnt=2"),e=this._replaceCachebust(e.replace(/\s/g,"")),u(this.vpaidLog,"parseVastFromUrl",{url:e},!1,!1),this._fetchVast(e,t))}},{key:"_replaceCachebust",value:function(e){return e.replace(/\[CACHEBUSTER\]/,Date.now())}},{key:"_shouldAddInstreamPlacement",value:function(){return this.store.get("iscntntactv")&&this.tag.getValueByKey("instrmplcmnt")}},{key:"_fetchVast",value:function(e,t){jr(e,t,this._onFetchResponse.bind(this),this._onFetchError.bind(this,uo.VAST_FETCH_FAIL,{url:e}),void 0,void 0,void 0,void 0,this.store.get("psthdrs")||"application/json")}},{key:"_onFetchResponse",value:function(e,t){this.stopped||(this.debugTracker.info("Vast was loaded",{vast:e}),u(this.vpaidLog,"tagResponse",{response:e,xhrErrors:t},!0,!1),e=me(e,this.store,{},this.tag),this.parseVastFromXML(e))}},{key:"_filterVastByRegex",value:function(e){return!!this.regex&&!!((e=this.regex.exec(e))&&0<e.length)}},{key:"_onFetchError",value:function(e,t,i){t.fetchErrors=v(i),this._onError(e,t)}},{key:"_onError",value:function(e,t,i){this.debugTracker.error("Error while parsing vast",e,t),u(this.vpaidLog,e,t||{}),this.emit(lo.ERROR,{type:e,data:t,adEvent:i})}},{key:"destroy",value:function(){this.stopped||(this.stopped=!0,this._destroyVastParsers(),this.mediaFiles.destroy(),this.trackingPixelManager.destroy(),this.mediaFiles=this.trackingPixelManager=this.debugTracker=this.icons=this.jsTrackers=this.omidElements=this.options=this.store=this.tag=this.vpaidLog=void 0)}},{key:"_destroyVastParsers",value:function(){this.vasts.forEach(function(e){e.destroy()}),this.vasts=void 0}},{key:"hasTrackingPixels",value:function(){return!this.trackingPixelManager.isEmpty()}},{key:"fireErrorPixels",value:function(){this.trackingPixelManager.firePixel(co.ERROR)}}])&&oo(e.prototype,t),n&&oo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),lo={MEDIA_FILES_FOUND:"mediaFilesFound",ERROR:"error"},uo={VAST_FETCH_FAIL:"vastxhrerror_noflash",FILTER_BY_REGEX:"VastFilterdByRegex",PARSING_FAILED:"ParsingError",MISSING_MEDIA_FILES:"MissingMediaFiles",BLOCKED_FOR_HEAVY_ADS:"BlockedForHeavyAds",NO_MEDIA_FILES_AFTER_SORT:"NoMediaFileAfterSort",MISSING_WRAPPER_URL:"WrapperError",EMPTY_VAST:"noMediaFilesAndWrapper",MAX_WRAPPERS:"maxWrappers"},co={IMPRESSION:"impression",ERROR:"error",CLICK_TRACKING:"clicktracking"};function ho(e){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function po(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=ho(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=ho(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ho(e)?e:String(e)}(n.key),n)}}function fo(e,t,i){return t&&po(e.prototype,t),i&&po(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var vo=fo(function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t,i,n=0,r=!1;function o(){var e=performance.now();n+=e-t,t=e,i=requestAnimationFrame(o)}this.start=function(){t||(t=performance.now(),i=requestAnimationFrame(o))},this.stop=function(){cancelAnimationFrame(i),t=null,n=0},this.pause=function(){var e;!r&&t&&(cancelAnimationFrame(i),e=performance.now(),n+=e-t,r=!0)},this.resume=function(){r&&t&&(t=performance.now(),i=requestAnimationFrame(o),r=!1)},this.getElapsedTime=function(){return n}});function yo(e){return void 0===e}function mo(e){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function go(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=mo(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=mo(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==mo(e)?e:String(e)}(n.key),n)}}var _o=d(7),bo=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");_o.mixin(this),this.store=e,this.userAgent=this.store.get("wurfl")}var e,i,n;return e=t,(i=[{key:"isAutoplaySupported",value:function(){var e=this._isAutoplaySupportedByOS();this._emitDetectionResult(e)}},{key:"_isAutoplaySupportedByOS",value:function(){return this.userAgent.os.name===lt?this._isAutoplaySupportedAndroid():this.userAgent.os.name===ut?this._isAutoplaySupportedFireOS():this.userAgent.os.name===p&&this._isAutoplaySupportedIOS()}},{key:"_isAutoplaySupportedIOS",value:function(){var e;return!(this.userAgent.os.version<10)&&(!!yo(e=this._isAutoplaySupportedOnBrowser(ft[p]))||e)}},{key:"_isAutoplaySupportedOnBrowser",value:function(e){if(e.hasOwnProperty(this.userAgent.browser.name))return yo(e[this.userAgent.browser.name])||this.userAgent.browser.version>=e[this.userAgent.browser.name]}},{key:"_isAutoplaySupportedAndroid",value:function(){var e=this._isAutoplaySupportedOnBrowser(ft[lt]);return!yo(e)&&e}},{key:"_isAutoplaySupportedFireOS",value:function(){var e=this._isAutoplaySupportedOnBrowser(ft[ut]);return!yo(e)&&e}},{key:"_emitDetectionResult",value:function(e){this.emit("detectIsAutoplaySupported",e)}}])&&go(e.prototype,i),n&&go(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ao(e){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Ao(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Ao(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ao(e)?e:String(e)}(n.key),n)}}var To=function(){function t(e){if(this instanceof t)return this.video=document.createElement("video"),this.store=e,this.isMobile=this.store.get("isMobile"),this.userAgent=this.store.get("wurfl"),this._addVideoTagMethods(),this._addVideoTagProperties(),this._addVideoTagAttributes(),this.video;throw new TypeError("Cannot call a class as a function")}var e,i,n;return e=t,(i=[{key:"_addVideoTagMethods",value:function(){this._addClearVideoSourcesMethod(),this._addAppendSourceMethod(),this._addAppendVideoSourcesMethod(),this._addProtectVideoPauseMethod(),this._addGetSrcMethod(),this._addHookMutedPropertyMethod(),this._addSupressErrorEventsMethod(),this._addDispatchEventMethod()}},{key:"_addClearVideoSourcesMethod",value:function(){this.video.clearVideoSources=function(){for(;this.childNodes.length;)this.removeChild(this.childNodes[0])}}},{key:"_addAppendSourceMethod",value:function(){this.video.appendSource=function(e,t){var i=document.createElement("source");i.src=e,i.setAttribute("type",t),this.appendChild(i),this.relevantSources++}}},{key:"_addAppendVideoSourcesMethod",value:function(){var o=this;this.video.appendVideoSources=function(e){var t=null;o.video.clearVideoSources();for(var i=0;i<e.length;i++){var n=e[i],r=n.url;o.video.canPlayType(n.originalType)&&(o.store.get("dcdvdurl")&&(r=decodeURI(r)),o.store.get("scrmf")&&"https:"===window.location.protocol&&(r=r.replace("http:","https:")),t||((t=n).mediaUrl=r),o.video.appendSource(r,n.originalType))}return t}}},{key:"_addProtectVideoPauseMethod",value:function(){this.video.protectPause=function(){this._play=this.play,this.play=function(){this.resumeInvoked&&this._play()}}}},{key:"_addGetSrcMethod",value:function(){this.video.getSrc=function(){return this.src||this.currentSrc||""}}},{key:"_addHookMutedPropertyMethod",value:function(){this.isMobile&&(this.video.hookMutedProperty=function(){this.__defineSetter__("_muted",this.__lookupSetter__("muted")),this.__defineSetter__("muted",function(e){this.mutedChangeByUserGesture?(this._muted=e,this.__defineSetter__("muted",this.__lookupSetter__("_muted"))):this._muted=!0})})}},{key:"_addSupressErrorEventsMethod",value:function(){this.video.supressErrorEvents=function(){this.__addEventListener=this.addEventListener,this.addEventListener=function(e,t){"error"!==e&&this.__addEventListener(e,t)}}}},{key:"_addDispatchEventMethod",value:function(){this.video._dispatchEvent=function(e,t){var i=document.createEvent("Event");i.initEvent(e,!0,!0),i.data=t||{},this.dispatchEvent(i)}}},{key:"_addVideoTagProperties",value:function(){this._addProgressPrecentageProperty(),this._addRemainingTimeProperty(),this._addRelevantSourcesProperty(),this._addBufferSizeProperty(),this._addResumeInvokedProperty(),this._addMutedChangeByUserGestureProperty(),this._hookSrcProperty()}},{key:"_addProgressPrecentageProperty",value:function(){Object.defineProperty(this.video,"progressPrecentage",{get:function(){return this.currentTime/this.duration}})}},{key:"_addRemainingTimeProperty",value:function(){Object.defineProperty(this.video,"remainingTime",{get:function(){return this.duration-this.currentTime}})}},{key:"_addRelevantSourcesProperty",value:function(){Object.defineProperty(this.video,"relevantSources",{get:function(){return this._relevantSources||0},set:function(e){this._relevantSources=e}})}},{key:"_addBufferSizeProperty",value:function(){Object.defineProperty(this.video,"bufferSize",{get:function(){if(this.buffered)return 0===this.buffered.length||0!==this.buffered.start(0)?0:this.buffered.end(0)-this.buffered.start(0)}})}},{key:"_addResumeInvokedProperty",value:function(){Object.defineProperty(this.video,"resumeInvoked",{get:function(){return this._resumeInvoked||!1},set:function(e){this._resumeInvoked=e}})}},{key:"_addMutedChangeByUserGestureProperty",value:function(){this.isMobile&&Object.defineProperty(this.video,"mutedChangeByUserGesture",{get:function(){return this._mutedChangeByUserGesture||!1},set:function(e){this._mutedChangeByUserGesture=e}})}},{key:"_hookSrcProperty",value:function(){var t=this,i=this.video,n="src",e=null,r=function(e){return!(""==e&&!t.video.removeSrc)},o="alt_"+n;if(!i.hasOwnProperty(o)){i[o]="";try{Object.defineProperty(i,n,{get:function(){return e?e():this[o]},set:function(e){this[o]=e,r&&r(e)&&i.setAttribute(n,e)}})}catch(e){}}}},{key:"_addVideoTagAttributes",value:function(){this.isMobile&&(this.video.muted=!0,this.video.setAttribute("muted",""),this.video.setAttribute("playsinline",""),this.userAgent.os.name===p)&&(this.store.get("atplyhk")?(this.video.setAttribute("autoPlay",""),this.video.setAttribute("autoplay",""),this.video.setAttribute("webkit-playsinline",""),this.video.style.willChange="transform",this.video.volume=0):this.video.removeAttribute("autoplay",""))}}])&&Eo(e.prototype,i),n&&Eo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ko(e){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=ko(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=ko(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ko(e)?e:String(e)}(n.key),n)}}var So=function(){function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ir,i=2<arguments.length?arguments[2]:void 0,n=this,r=o;if(n instanceof r)return this.store=e,this.videoState=t,this.adElasticLogger=i,this.isMobile=this.store.get("isMobile"),this.video=new To(this.store),this._overrideVideoAddEventListener(),this._initVideoMobileParams(),this._addVideoElementProperties(),this._addVideoElementMethods(),this._addTimeupdateEvents(),this._loopThroughMediaSources(),this.video.videoState=this.videoState,this.video;throw new TypeError("Cannot call a class as a function")}var e,t,i;return e=o,(t=[{key:"_initVideoMobileParams",value:function(){this._shouldDetectAutoplay()&&this._detectAutoplay()}},{key:"_shouldDetectAutoplay",value:function(){return this.isMobile}},{key:"_detectAutoplay",value:function(){var e=new bo(this.store);e.on("detectIsAutoplaySupported",this._onIsAutoplaySupportedDetected.bind(this)),e.isAutoplaySupported()}},{key:"_onIsAutoplaySupportedDetected",value:function(e){this.adElasticLogger&&this.adElasticLogger.logVideoElementEvent(e)}},{key:"_overrideVideoAddEventListener",value:function(){this.eventsCb={};var n=this;this.video._addEventListener=this.video.addEventListener,this.video.addEventListener=function(e,t,i){n._addEventCb(e,t),this._addEventListener(e,t,i)}}},{key:"_addEventCb",value:function(e,t){this.eventsCb[e]=this.eventsCb[e]||[],this.eventsCb[e].push(t)}},{key:"_addVideoElementProperties",value:function(){this._addVideoStateProperty(),this._addBufferingProperty()}},{key:"_addVideoStateProperty",value:function(){Object.defineProperty(this.video,"videoState",{get:function(){return this._videoState||ir},set:function(e){this._videoState=e}})}},{key:"_addBufferingProperty",value:function(){var e;this.isMobile&&(e=this.video.buffering||!1,Object.defineProperty(this.video,"buffering",{get:function(){return this._buffering||e},set:function(e){this._buffering=e}}))}},{key:"_addVideoElementMethods",value:function(){this._addRegisterProgressEventsMethod(),this._addDestroyMethod()}},{key:"_addRegisterProgressEventsMethod",value:function(){var n=this;this.video.registerProgressEvents=function(e){n._progressEvents={};for(var t=0;t<e.length;t++){var i="precentage"===e[t].offsetType?e[t].offset:e[t].offset/n.video.duration;n._progressEvents[i]={offset:i,fired:!1}}}}},{key:"_addDestroyMethod",value:function(){var e=this;this.video.destroy=function(){e.video.pause(),e.video.clearVideoSources(),e._cleanVideoSrcProp()}}},{key:"_cleanVideoSrcProp",value:function(){this.video.removeSrc=!0,this.video.src=""}},{key:"_addTimeupdateEvents",value:function(){this.quartiles={q1:!1,q2:!1,q3:!1};var n=this;this.video.addEventListener("timeupdate",function e(){if(!this._buffering){.75<=this.progressPrecentage&&!n.quartiles.q3?(n.quartiles.q3=!0,this._dispatchEvent("thirdQuartile")):.5<=this.progressPrecentage&&!n.quartiles.q2?(n.quartiles.q2=!0,this._dispatchEvent("midpoint")):.25<=this.progressPrecentage&&!n.quartiles.q1&&(n.quartiles.q1=!0,this._dispatchEvent("firstQuartile"));var t,i=!0;for(t in n._progressEvents)n._progressEvents[t].fired||(n._progressEvents[t].offset<=this.progressPrecentage?(n._progressEvents[t].fired=!0,this._dispatchEvent("timeProgress",{pre:this.progressPrecentage,time:this.currentTime})):i=!1);i&&n.quartiles.q3&&!n._ticker&&this.removeEventListener("timeupdate",e,!0)}})}},{key:"_loopThroughMediaSources",value:function(){var t=this;this.video.addEventListener("ended",function(){var e;t._isPlayingContent()&&1<t.video.childNodes.length&&(e=t.video.removeChild(t.childNodes[0]),t.video.appendChild(e),t.video.load(),t.video.play())})}},{key:"_isPlayingContent",value:function(){return this.video.videoState===ir}}])&&wo(e.prototype,t),i&&wo(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}();function Po(e){return(Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Io(e,t){var i,n,r,o,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return i=e.done,e},e:function(e){n=!0,r=e},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw r}}};if(Array.isArray(e)||(s=function(e,t){var i;if(e)return"string"==typeof e?Oo(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Oo(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Co(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=Po(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Po(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Po(e)?e:String(e)}(n.key),n)}}var Vo="_cm-ad",Do="multi-vpaids",Ro="_cm-video-ad",Mo="cm-ad-click-target",xo="cm-ad-player",Lo="cm-ad-player-active",Fo={WRAPPER:"_cm-ad-choices-player",ANCHOR:"_cm-ad-choices-player-anchor"},Bo="ie-black-edges",No="vertical-video",Wo="_cm-css-reset",jo="vpaid-player-container",Uo="13px",Ho="16px",Go=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.store=e.store,this.tag=e.tag,this.target=e.target,this.index=e.index,this.adElasticLogger=e.adElasticLogger,this.stopped=!1,this.isMobile=this.store.get("isMobile")||!1,this.isMultiAdsActive=this.store.get("mltads"),this.isMultiVpaidUnit=this.store.get("isMultiVpaidUnit"),this.shouldMuteVideo=this.store.get("dskVidMuted")&&!this.isMobile,this.fireIconViewTracking=function(){},this._render()}var e,i,n;return e=t,(i=[{key:"_render",value:function(){this._createPlacementWrapper(),this._createPlacement()}},{key:"_createPlacementWrapper",value:function(){(this.isMultiVpaidUnit||this.isMultiAdsActive)&&(this.placementWrapper=document.createElement("div"),this.placementWrapper.className=Vo,this.placementWrapper.id=Wo)}},{key:"_createPlacement",value:function(){this.placement=document.createElement("div"),this._stylePlacement(),this._customizePlacement(),this._customizeParentElement(),this._customizeBySelector(),this._appendToDOM()}},{key:"_appendToDOM",value:function(){this.placementWrapper?(s(this.placement,Do),this.placementWrapper.appendChild(this.placement),this.target.appendChild(this.placementWrapper)):this.target.appendChild(this.placement)}},{key:"_stylePlacement",value:function(){this.placement.style.cssText=this.target.style.cssText,this.placement.className="".concat(this.target.className||""," ").concat(this.index),this.placement.id=jo;var e=this.tag.getValueByKey("adtnlclsnm");e&&o(this.placement,e),this.placement.style.cssText+="position: absolute; overflow: hidden; top: 0; height: 0; left :0;",this.isMultiAdsActive&&o(this.placement,Ro)}},{key:"_customizePlacement",value:function(){var e=this.store.get("adtrgtcss")&&this.tag.getValueByKey("trgtcss");if(e)for(var t in e)this.placement.style[t]=e[t]}},{key:"_customizeParentElement",value:function(){var e=this.store.get("vpdcntrcstmcss");e&&((this.placementWrapper||this.placement).style.cssText+=e)}},{key:"_customizeBySelector",value:function(){var e=this.tag.getValueByKey("vpdcss");if(e)for(var t in e){var i=void 0;if(i=-1<this.placement.className.indexOf(t)?this.placement:this.placement.querySelectorAll(t)[0])for(var n in e[t])i.style[n]=e[t][n]}}},{key:"createClickArea",value:function(){this.stopped||this.isMobile&&this.store.get("wurfl.os.name")===p&&(this.clickArea=document.createElement("div"),this._styleClickArea(),this.placement.appendChild(this.clickArea))}},{key:"_styleClickArea",value:function(){var e=this.store.get("width"),t=this.store.get("height");this.clickArea.className=Mo,this.clickArea.style.cssText="width: ".concat(this._intToPixels(e),"; height: ").concat(this._intToPixels(t),"; cursor: pointer; position: absolute; top: 0px; left: 0px;"),this.clickArea.style.display="",this._resizeElement(this.clickArea,e,t)}},{key:"destroy",value:function(){this.stopped=!0,this._clearIframeContent(),this._removeElements(),this.store=this.tag=this.target=this.adElasticLogger=this.placement=this.placementWrapper=this.clickArea=this.videoTag=void 0}},{key:"_removeElements",value:function(){this.placement.parentNode.removeChild(this.placement),this.placementWrapper&&this.placementWrapper.parentNode.removeChild(this.placementWrapper),this.removeClickArea()}},{key:"createVideoTag",value:function(e){this.stopped||(this.videoTag=new So(this.store,tr,this.adElasticLogger),this._handleVideoInitialVolume(),this._styleVideoTag(e),this.store.get("addprld")&&this.videoTag.setAttribute("preload","auto"),this.placement.appendChild(this.videoTag))}},{key:"_handleVideoInitialVolume",value:function(){this.videoTag.volume=0,this.shouldMuteVideo&&(this.videoTag.muted=!0)}},{key:"_styleVideoTag",value:function(e){var t=this.store.get("width"),i=this.store.get("height");this.videoTag.className=xo,this.videoTag.style.cssText="width: ".concat(this._intToPixels(t),"; height: ").concat(this._intToPixels(i),";"),this.videoTag.style.display="",this._handleVideoStretching(),this._resizeElement(this.videoTag,t,i),e.videoSlotControls&&this.videoTag.removeAttribute("controls")}},{key:"_handleVideoStretching",value:function(){!1===this.tag.getValueByKey("strch")?this.videoTag.style.objectFit="contain":this.store.get("wurfl.browser.name")===pt&&o(this.videoTag,Bo)}},{key:"isVideoHover",value:function(){return this.placement.querySelector(":hover")==this.videoTag}},{key:"getIframesFromPlacement",value:function(){return this.placement.getElementsByTagName("iframe")}},{key:"_clearIframeContent",value:function(){var e=this.getIframesFromPlacement();e&&0!==e.length&&(ue(e=e[0],"iframe",function(e){e.forEach(function(e){e.parentNode.removeChild(e)})},"*",this.store.get("debug")),e)&&e.parentNode.removeChild(e)}},{key:"bringToFront",value:function(e){this.placement.style.display="block",this.placement.style.height="".concat(this._intToPixels(this.store.get("height")));e+=99;return this.placement.style.zIndex=e,this.clickArea&&(this.clickArea.style.zIndex=e),e}},{key:"moveToBack",value:function(){this.stopped||(this.placement.style.zIndex=0,this.clickArea&&(this.clickArea.style.zIndex=0))}},{key:"resize",value:function(e,t){this.resizePlacement(e,t),this._resizeClickArea(e,t)}},{key:"resizePlacement",value:function(e,t){this.stopped||(this._resizeElement(this.placement,e,t),this._resizeElement(this.videoTag,e,t))}},{key:"_intToPixels",value:function(e){return"".concat(e,"px")}},{key:"_resizeClickArea",value:function(e,t){!this.stopped&&this.clickArea&&this._resizeElement(this.clickArea,e,t)}},{key:"_resizeElement",value:function(e,t,i){e.style.width=this._intToPixels(t),e.style.height=this._intToPixels(i),e.setAttribute("width",t),e.setAttribute("height",i)}},{key:"removeClickArea",value:function(){this.clickArea&&this.clickArea.parentNode.removeChild(this.clickArea)}},{key:"handleVerticalVideo",value:function(e,t,i){!this.stopped&&this._isVerticalVideo(e,t,i)&&(o(this.videoTag,No),s(this.videoTag,Bo))}},{key:"_isVerticalVideo",value:function(e,t,i){return!!this.tag.getValueByKey("spprtvrtclvd")&&(e<=t||(i&&-1<i.indexOf(":")?(i=i.split(":"),parseInt(i[1])>=parseInt(i[0])):!(!this.videoTag.videoWidth||!this.videoTag.videoHeight)&&this.videoTag.videoHeight>=this.videoTag.videoWidth))}},{key:"activateVideoTag",value:function(){this.stopped||o(this.videoTag,Lo)}},{key:"getVideoBuffered",value:function(){var e=this.videoTag.buffered;return e&&0!==e.length?e.end(0):0}},{key:"getVideoSource",value:function(){return this.videoTag&&this.videoTag.getSrc&&this.videoTag.getSrc()}},{key:"handleVastIcons",value:function(e){this.tag.getValueByKey("fkadchcs")||0===e.length||this._appendAdChoiceIcons(e)}},{key:"_appendAdChoiceIcons",value:function(e){var t,i=[],n=Io(e);try{for(n.s();!(t=n.n()).done;){var r,o,s=t.value;s.attributes.program&&-1===i.indexOf(s.attributes.program)&&(i.push(s.attributes.program),r=this._createAdChoiceIcon(s),o=this._createAdChoiceAnchor(s),s.iconViewTracking.length&&(this.fireIconViewTracking=this._fireIconViewTracking.bind(this,s)),r.appendChild(o),this.placement.appendChild(r))}}catch(e){n.e(e)}finally{n.f()}}},{key:"_createAdChoiceIcon",value:function(e){var t=document.createElement("div");return t.className=Fo.WRAPPER,e.attributes.xposition&&(t.style.left="initial",t.style[e.attributes.xposition]=Uo),e.attributes.yposition&&(t.style.top="initial",t.style[e.attributes.yposition]=Ho),t.onclick=this._onIconClick.bind(this,e),t}},{key:"_createAdChoiceAnchor",value:function(e){var t=document.createElement("a");return e.clickThroughUrl&&(t.href=e.clickThroughUrl),t.target="_blank",t.className=Fo.ANCHOR,t.style.width=e.attributes.width,t.style.height=e.attributes.height,e.staticresource?t.style.background="#fff url(".concat(e.staticresource,") no-repeat center center"):e.htmlresource&&(t.innerHTML+=e.htmlresource),t}},{key:"_onIconClick",value:function(e){var t,i=Io(e.clickTracking);try{for(i.s();!(t=i.n()).done;){var n=t.value;(new Image).src=n.trim()}}catch(e){i.e(e)}finally{i.f()}}},{key:"_fireIconViewTracking",value:function(e){var t,i=Io(e.iconViewTracking);try{for(i.s();!(t=i.n()).done;){var n=t.value;(new Image).src=n.trim()}}catch(e){i.e(e)}finally{i.f()}this.fireIconViewTracking=function(){}}},{key:"setVolume",value:function(e){this.shouldMuteVideo||(this.videoTag.volume=e,this.videoTag.muted=0===e)}},{key:"placement",get:function(){return this._placement},set:function(e){this._placement=e}},{key:"videoTag",get:function(){return this._videoTag},set:function(e){this._videoTag=e}},{key:"clickArea",get:function(){return this._clickArea},set:function(e){this._clickArea=e}},{key:"placementWrapper",get:function(){return this._placementWrapper},set:function(e){this._placementWrapper=e}}])&&Co(e.prototype,i),n&&Co(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zo(e){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],d=!0,l=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;d=!1}else for(;!(d=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);d=!0);}catch(e){l=!0,r=e}finally{try{if(!d&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||Ko(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(e,t){var i,n,r,o,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return i=e.done,e},e:function(e){n=!0,r=e},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw r}}};if(Array.isArray(e)||(s=Ko(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ko(e,t){var i;if(e)return"string"==typeof e?Yo(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Yo(e,t):void 0}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Xo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=zo(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=zo(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==zo(e)?e:String(e)}(n.key),n)}}function Jo(){}var Zo=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.timers={},this.intervals={},this.vpaidEvents={}}var t,i,n,r,o;function s(e){return r.apply(this,arguments)}function a(e,t){return o.apply(this,arguments)}return t=e,(i=[{key:"setTimer",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Jo;e&&t&&(this.timers[e]={timer:setTimeout(i,pe(t)),callback:i,duration:t,startTime:this._getCurrentTime()})}},{key:"hasTimer",value:function(e){return this.timers.hasOwnProperty(e)}},{key:"pauseTimer",value:function(e){e=this.timers[e];e&&e.timer&&(e.timer=clearTimeout(e.timer),e.duration=pe(e.duration-(this._getCurrentTime()-e.startTime)))}},{key:"resumeTimer",value:function(e){e=this.timers[e];e&&!e.timer&&(e.timer=setTimeout(e.callback,e.duration),e.startTime=this._getCurrentTime())}},{key:"clearTimer",value:function(e){this.hasTimer(e)&&(this.timers[e].timer=clearTimeout(this.timers[e].timer),delete this.timers[e])}},{key:"setInterval",value:(o=function(e,t){e&&t&&(this.intervals[e]=setInterval(2<arguments.length&&void 0!==arguments[2]?arguments[2]:Jo,pe(t)))},a.toString=function(){return o.toString()},a)},{key:"hasInterval",value:function(e){return this.intervals.hasOwnProperty(e)}},{key:"clearInterval",value:(r=function(e){this.hasInterval(e)&&(this.intervals[e]=clearInterval(this.intervals[e]),delete this.intervals[e])},s.toString=function(){return r.toString()},s)},{key:"_getCurrentTime",value:function(){return(new Date).getTime()}},{key:"waitForVPAIDEvent",value:function(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Jo;e&&(0<t&&(i=setTimeout(3<arguments.length&&void 0!==arguments[3]?arguments[3]:Jo,pe(t))),this.vpaidEvents[e]=this.vpaidEvents[e]||[],this.vpaidEvents[e].push({callback:n,timeout:i}))}},{key:"onVPAIDEvent",value:function(e){var t=this.vpaidEvents[e];if(t){var i,n=Qo(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.timeout&&(r.timeout=clearTimeout(r.timeout)),r.callback()}}catch(e){n.e(e)}finally{n.f()}delete this.vpaidEvents[e]}}},{key:"clearVPAIDEvent",value:function(e){var t=this.vpaidEvents[e];if(t){var i,n=Qo(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.timeout=clearTimeout(r.timeout)}}catch(e){n.e(e)}finally{n.f()}delete this.vpaidEvents[e]}}},{key:"destroy",value:function(){for(var e=0,t=Object.entries(this.timers);e<t.length;e++){var i=qo(t[e],1)[0];this.clearTimer(i)}for(var n=0,r=Object.entries(this.intervals);n<r.length;n++){var o=qo(r[n],1)[0];this.clearInterval(o)}for(var s=0,a=Object.entries(this.vpaidEvents);s<a.length;s++){var d=qo(a[s],1)[0];this.clearVPAIDEvent(d)}this.timers=this.intervals=this.vpaidEvents=void 0}}])&&Xo(t.prototype,i),n&&Xo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $o(e){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=$o(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=$o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==$o(e)?e:String(e)}(n.key),n)}}var ts=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.iframesWeights=e}var e,i,n;return e=t,(i=[{key:"detect",value:function(e,i){var n=this,r={};return e.map(function(e){var t=n._detectIframeTypeFromUrl(e,i);r[t]=r[t]||{urls:[],counter:0},r[t].urls.push(e),r[t].counter++}),r}},{key:"_detectIframeTypeFromUrl",value:function(e,t){return-1<e.indexOf("imasdk")?"ggl":t?"pxls":"gen"}},{key:"calculateWeightsByIframeType",value:function(e){var t,i=0;for(t in e)i+=this.iframesWeights[t]*e[t].counter;return i}}])&&es(e.prototype,i),n&&es(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function is(e){return(is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ns(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],d=!0,l=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;d=!1}else for(;!(d=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);d=!0);}catch(e){l=!0,r=e}finally{try{if(!d&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||function(e,t){var i;if(e)return"string"==typeof e?rs(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?rs(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function os(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=is(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=is(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==is(e)?e:String(e)}(n.key),n)}}var ss={undefinedIframeSrc:"undefinedIframeSrc",event_AdImpression:"conversion",event_SoundViolation:"soundViolation",adStartTimeout:"adStartTimeout",AutoKill:"auto_kill",AdStopADTO:"before_startAd_timeout",queueTrimmed:"queueTrimmed",adPlayTimeout:"adPlayTimeout",queueExpired:"removed_from_queue",tagError:"tagError",vastFilterdByRegex:"vast_blacklisted",event_AdLoaded:"adLoaded",fetchVastXhr:"fetchVastXhr",fetchVastFallToXhr:"fetchVastFallToXhr",vpaidTimeout_AdLoaded:"adload_timeout",creatingVpaidHandler:"initVpaid",createdVpaidHandler:"before_adload",creatingVpaidHandlerError:"creatingVpaidHandlerError",networkError:"networkError",adUnitLoadFailed:"vpaid_unit_failed",adloadedTimeout:"adload_timeout",adImpressionTimeout:"adImpressionTimeout",playerClosed:"playerClosed",idleMode:"idleMode",hijackAttempt:"vpaid_blacklisted_url"},as=["conversion","soundViolation","timeout","bfRon","adPlayTimeout","vast_blacklisted","tagError","queueTrimmed","before_startAd_timeout","auto_kill","vpaidTimeout","creatingVpaidHandlerError","networkError","vpaid_unit_failed","adload_timeout","adImpressionTimeout","idleMode","vpaid_blacklisted_url","removed_from_queue"],ds={NoMediaFiles:"empty_vast",event_AdError:"ad_error",vastxhrerror_noflash:"vast_fetch_fail",WrapperError:"wrapper_error",ParsingError:"xml_parsing_error",NoMediaFileAfterSort:"unsupported_mediafile"},ls={BfRon:!0},us={difa:"idfa",aid:"appId",aname:"appName"},cs=function(){function r(e,t){var i=this;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.tag=e,this.store=t,this.created=Date.now(),this.dataChanged=!1,this.friendlyVideoUrl=!1,this._setIframesDetector();var t=this.store.get("dast"),n="",t=(t&&(n=t.cicmp),this.store.get("subUnitType"));this.sessionStarted=this.store.get("session_started")||this.created,this.data={_id:de(10),player_id:this.store.get("player_id"),tag:e,isMobile:e.isMobile,created:(new Date).toISOString(),timeSinceSessionStarted:this.created-this.sessionStarted,dp:e.dp,status:"new",statuses:["new"],itemScore:-1,fullPageUrl:this.store.get("fullPageUrl"),documentVisible:!document.hidden,oneAuction:this.store.get("mltads"),su:null!=t?t:-99999,redId:this.store.get("red_id")||"na",displayLineItem:n,updatesCount:0,serverSideDataSaver:this.store.get("serverSideDataSaver")||"na",clientSideDataSaver:this.store.get("clientSideDataSaver")||"na",dataSaver:this.store.get("dataSaver"),taboolaVpaid:this.store.get("istblvpd"),hasDsm:!!this.store.get("dsm"),hasVpaidAnalytics:!!this.store.get("analyticsFuncString"),isAmp:this.store.get("isAmp"),isCPCV:e.isCPCV,frameType:this.store.get("frameType")||-1,playWhenOutOfView:e.pwov,oppsulaEnabled:this.store.get("usopsla")||!1,allowSlider:{isAllowed:!!this.tag.allowSlider,isActive:this.store.get("isSliderCutOff")||!1},unitElastic:{sessionId:this.store.get("elasticSessionId"),dependOnUnitForReporting:this.store.get("dpndonuntfrlgtoelstc"),shouldReport:this.store.get("shouldSendDataToElastic")&&void 0!==this.store.get("elasticSessionId")},dsm:e.dsm||{}},Object.assign(this.data,this._getInAppDataFromDAST()),this.isReportDb=!1,this.dtor=!1,this._dataModified=!0,this.updatingInterval=setInterval(function(){i._dataModified&&i._sendData()},1e4)}var e,t,i;return e=r,(t=[{key:"_setIframesDetector",value:function(){this.iframesDetector=this.store.get("iframesDetector"),this.iframesDetector||(this.iframesDetector=new ts(this.store.get("ifrmswghts")),this.store.set("iframesDetector",this.iframesDetector))}},{key:"_getInAppDataFromDAST",value:function(){for(var e=this.store.get("dast")||{},t={inApp:this.store.get("isInApp")||!1},i=0,n=Object.entries(us);i<n.length;i++){var r=ns(n[i],2),o=r[0],r=r[1],o=e[o];o&&(t[r]=o)}return t}},{key:"push",value:function(e,t,i){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];this.data&&(-1<e.indexOf("AdError")||"event_SoundViolation"===e?this._addStatus(this._prettyErrorStatus(e,t)):ss.hasOwnProperty(e)&&"conversion"!==this.data.status?this._addStatus(ss[e]):ls.hasOwnProperty(e)&&(this.data["is"+e]=!0),n&&(n=Date.now()-this.created,t.time=n),this._dataChanged(),!i&&this.data.hasOwnProperty(e)?(Array.isArray(this.data[e])||(this.data[e]=[this.data[e]]),this.data[e].push(t),3<this.data[e].length&&this.data[e].splice(0,1)):(this.data[e]=t,-1!==as.indexOf(this.data.status)&&this._setDpStats()))}},{key:"_dataChanged",value:function(){this._dataModified=!0}},{key:"_sendData",value:function(){this._collectDataFromVpaidAnalytics(),this.data&&this.data.updatesCount++,te("VpaidLog",this.data,this.store),this._dataModified=!1}},{key:"_collectDataFromVpaidAnalytics",value:function(){try{var e,t;this.getVpaidAnalyticsReport&&((e=this.getVpaidAnalyticsReport()).realTotalRequestsCounter=e.totalRequestsCounter,t=this.iframesDetector.detect(e.iframes,this.friendlyVideoUrl),e.totalRequestsCounter+=this.iframesDetector.calculateWeightsByIframeType(t),e.totalRequestsCounter-=e.iframes.length,this.push("vpaidAnalytics",e,!0),this.push("vpaidIframesDetection",t,!0))}catch(e){this.push("vpaidAnalyticsCollectFail",{ex:e})}}},{key:"_prettyErrorStatus",value:function(e,t){t=t.errType||e;return ds.hasOwnProperty(t)?ds[t]:"error_".concat(t)}},{key:"_setDpStats",value:function(){var e,t;this.isDPStatusSet||this.store.get("static_schedule")||(t=Date.now(),this.data.dtor=!0,this.data.timeFromLastPlayFromQueue=t-this.store.get("playFromQueue"),this.data.timeFromLastPlayFromQueueFound=t-this.store.get("playFromQueueFound"),this.isDPStatusSet=!0,this._incrStats(".tries"),"conversion"===this.data.status?(this._incrStats(".conversions"),this.store.set(this.tag.dp+".failsRow",0),t=this.store.get(this.tag.lineItem+".failsRow"),this.store.set(this.tag.lineItem+".failsInARowTillConversion",t<0?0:t),this.store.set(this.tag.lineItem+".failsRow",0)):(this._incrStats(".fails"),this.store.get(this.tag.lineItem+".failsRow")<0?this.store.set(this.tag.lineItem+".failsRow",1):this._incrStats(".failsRow")),t=this.store.get(this.tag.dp)||{fails:0,failsRow:0,conversions:0},(e=this.store.get(this.tag.lineItem)||{}).fails||(e.fails=0),e.failsRow||(e.failsRow=0),e.conversions||(e.conversions=0),t.lineItems=t.lineItems||[],-1===t.lineItems.indexOf(this.tag.lineItem)&&t.lineItems.push(this.tag.lineItem),this.data.lineItemLog=e,this.data.dpLog=t,this.data.conversionsCount=this.store.get("conversionsCount"),this.data.unit={width:this.store.get("width"),height:this.store.get("height")},-1===(t=this.store.get("lineItems")||[]).indexOf(this.tag.lineItem)&&(t.push(this.tag.lineItem),this.store.set("lineItems",t)),this.store.set(this.tag.lineItem,e))}},{key:"_incrStats",value:function(e){this.store.incr(this.tag.dp+e),this.store.incr(this.tag.lineItem+e)}},{key:"saveToDb",value:function(){this.saveToDbWithoutReport(),this._reportDb()}},{key:"saveToDbWithoutReport",value:function(){if(this.data){var e;this._collectDataFromVpaidAnalytics(),this._setDpStats();try{e=cmTag.utils.getLoopTime()}catch(e){}e&&(this.data.loopTime=e)}}},{key:"_reportDb",value:function(){this.isReportDb||(this.data.updatesCount++,te("VpaidLog",this.data,this.store),this.tag=null,this.data=null,this.store=null,this.isReportDb=!0,this._dataModified=!1,clearInterval(this.updatingInterval))}},{key:"_addStatus",value:function(e){var t=this;-1===as.indexOf(this.data.status)&&(this.data.status=e,this.data.statuses.push(e),"conversion"===e)&&setTimeout(function(){t._sendData()},2e3)}},{key:"toString",value:function(){return v(this.data,4)}}])&&os(e.prototype,t),i&&os(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}();function hs(e){return(hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ps(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fs(n.key),n)}}function fs(e){e=function(e,t){if("object"!=hs(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=hs(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==hs(e)?e:String(e)}var vs="hijackAttempt",ys={URL:"url",ACTION:"action"},C={TB_COMPLETION:"tbCompletion",PWOV:"playWhenOutOfViewData",AD_STOPPED:"AdStopADTO",AUTO_KILL:"AutoKill",EARLY_AD_ERROR:"earlyError",AD_UNIT_LOAD_FAILED:"adUnitLoadFailed",CREATED_VPAID_HANDLER:"createdVpaidHandler",INIT_AD:"initAd",VIEWABILITY:"unitVieability",AD_OPTIONS:"adOptions",START_AD:"startAd",MEDIA_URL:"mediaUrl",VPAID_EVENTS:"event",VPAID_ANALYTICS:"vpaidAnalyticsUntil",AD_ICONS:"ad_choices",FAILED_TB_COMPLETION:"fireNewCompletionPrevented",COMPLETION_BEFORE_VIEWABILITY:"completionBeforeViewability",EARLY_AD_IMPRESSION:"earlyAdImpression",AD_SUCCESS:"success",RESTART_AD:"restartAd",ASYNC_AD_IMPRESSION:"fireAsyncAdimpression",AD_ERROR:"AdError",AD_SETTINGS:"adSettings",EARLY_AD_STOPPED:"earlyAdStopped",AD_FAILURE:"fails",HIJACK_ATTEMPT:vs,UNDEFINED_IFRAME_SRC:"undefinedRelativeIframeSrcError",MAX_NETWORK_CALLS:"vpaidAnalyticsCallLimit",VAST_PRICE:"vastPrice",STATUSES_ON_GET_AD:"statusesOnGetAd",WINNING_PRICE:"winningPrice",VPAID_RESOURCE_EVENT:"resourceEvent",VIDEO_ELEMENT_EVENT:"videoElement",CREATING_VPAID_HANDLER:"creatingVpaidHandler",CAN_PLAY:"canplay",VIDEO_BUFFER:"videoBuffer",SHOULD_SECURE_URL:"shouldSecureUrl",PAUSE_PROTECTION:"pauseAdProtection",UNFRIENDLY_IFRAME_SRC:"unfriendlyIframe",VPAID_VIDEO_URL:"jsVpaidVideoUrl",LOAD_AD_UNIT:"loadVPAIDJSScript",LOAD_AD_UNIT_ERROR:"loadVPAIDJSScriptErr",VIDEO_URL:"videoUrl",INIT_AD_ERROR:"initJsError",VPAID_VIDEO_TYPE:"jsVpaidVideo",VIDEO_PLAYING:"videoPlaying",SOUND_PROTECTION:"soundProtection",OMID_EVENT:"OMID",MOAT_TRACKER:"moatTracker",PREBID_AD_UNIT:"prebidAdUnit",PREBID_BID_RESPONSE:"prebidBidResponse"},ms=[f.a.AdDurationChange,f.a.AdSizeChange,f.a.AdLinearChange,f.a.AdLog,f.a.AdSkippableStateChange,f.a.AdExpandedChange,f.a.AdInteraction,f.a.AdUserClose,f.a.AdSkipped,f.a.Progress,f.a.AdVolumeChange],gs=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.store=e.store;e=this._createVpaidLogTag(e.tag);this.vpaidLog=new cs(e,this.store)}var e,i,n;return e=t,(i=[{key:"_createVpaidLogTag",value:function(e){var t={auctionId:e.auctionId,advId:e.advId,dast:e.dast,price:e.price,queueNumber:e.queueNumber,cpmFloor:e.cpmFloor,dp:e.dp,rollType:e.rollType,lineItem:e.lineItem,unitType:this.store.get("unit_type"),unitVersion:this.store.get("unit_version"),isMobile:this.store.get("isMobile")||!1,rpox:e.rpox,alfrox:e.alfrox,frox:e.frox,waterfallIndex:e.wfIndex,itemType:e.itemType,requiredViewability:e.requiredViewability,requiredViewabilityDrawn:e.requiredViewabilityDrawn,flad:e.flad||e.flad_delay||0,brand:e.brand,priority:e.priority,isCPCV:e.isCPCV,backfillDelayed:!!e.isBackfillDelayed,moatSampling:e.moatSampling,getValueByKey:e.getValueByKey,pwov:e.pwov,allowSlider:e.alwsldr,dsm:e.dsm};return e.crId&&(t.stId=e.stId,t.cmpgnId=e.cmpgnId,t.itemType=e.itemType),t}},{key:"_logToElastic",value:function(e,t,i,n){this.stopped||u(this.vpaidLog,e,t,i,n)}},{key:"logTBCompletion",value:function(){this._logToElastic(C.TB_COMPLETION,{enabled:!0,length:0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,byProgress:1<arguments.length&&void 0!==arguments[1]&&arguments[1]})}},{key:"logPlayWhenOutOfView",value:function(e,t){this._logToElastic(C.PWOV,{playWhenOutOfViewValue:e,costModel:t})}},{key:"logAdStopped",value:function(){this._logToElastic(C.AD_STOPPED,{})}},{key:"logAutoKill",value:function(e){this._logToElastic(C.AUTO_KILL,{timeout:e})}},{key:"logEarlyAdError",value:function(e){this._logToElastic(C.EARLY_AD_ERROR,{errMsg:e})}},{key:"logAdUnitLoadFailed",value:function(e){this._logToElastic(C.AD_UNIT_LOAD_FAILED,{errMsg:e})}},{key:"logCreatedVpaidHandler",value:function(){this._logToElastic(C.CREATED_VPAID_HANDLER,{})}},{key:"logInitAd",value:function(){this._logToElastic(C.INIT_AD,{})}},{key:"logViewability",value:function(){this._logToElastic(C.VIEWABILITY,{isFired:!0})}},{key:"logAdOptions",value:function(e){this._logToElastic(C.AD_OPTIONS,{count:e.count,getAdRetries:e.getAdRetries,requiredViewability:e.requiredViewability,predictorId:e.predictId},!1,!1)}},{key:"logStartAd",value:function(){this._logToElastic(C.START_AD,{})}},{key:"logMediaUrl",value:function(e){this._logToElastic(C.MEDIA_URL,{url:e},!1,!1)}},{key:"logVpaidEvent",value:function(e,t,i){-1<ms.indexOf(e)||this._logToElastic("".concat(C.VPAID_EVENTS,"_").concat(e),{isViewable:!document.hidden,vidCurrentime:i,eventDataStr:t})}},{key:"logVpaidAnalytics",value:function(e,t){this._logToElastic("".concat(C.VPAID_ANALYTICS).concat(e),t)}},{key:"logAdIcons",value:function(e,t){this._logToElastic(C.AD_ICONS,{vpaid:{error:e,result:t}},!1,!1)}},{key:"logFailedTBCompletion",value:function(e){this._logToElastic(C.FAILED_TB_COMPLETION,{reason:e},!1,!1)}},{key:"logCompletionBeforeViewability",value:function(e){this._logToElastic(C.COMPLETION_BEFORE_VIEWABILITY,{videoTime:e.currentTime||-1,newCompletionByVideoProgress:1<arguments.length&&void 0!==arguments[1]&&arguments[1],reason:2<arguments.length&&void 0!==arguments[2]?arguments[2]:"na",paused:e.paused||!1,ended:e.ended||!1})}},{key:"logEarlyAdImpression",value:function(){this._logToElastic(C.EARLY_AD_IMPRESSION,{early:!0})}},{key:"logAdSuccess",value:function(e){this._logToElastic(C.AD_SUCCESS,{count:e},!0,!1)}},{key:"logRestartAd",value:function(e){this._logToElastic(C.RESTART_AD,{isReplayable:e},!1,!1)}},{key:"logAsyncAdImpressionFired",value:function(){this._logToElastic(C.ASYNC_AD_IMPRESSION,{end:!0})}},{key:"logAdError",value:function(e){this._logToElastic(C.AD_ERROR,{errType:e.type,handlerType:e.handlerType,isPraserError:!0})}},{key:"logAdSettings",value:function(e){0!==Object.keys(e).length&&this._logToElastic(C.AD_SETTINGS,e,!0,!1)}},{key:"logEarlyAdStopped",value:function(){this._logToElastic(C.EARLY_AD_STOPPED,{early:!0},!0,!1)}},{key:"logStopReason",value:function(e,t,i){e&&e!==vs&&this._logToElastic(e,{status:t,eventDataStr:i})}},{key:"logAdFailure",value:function(e){this._logToElastic(C.AD_FAILURE,{count:e},!0,!1)}},{key:"logMaliciousUrl",value:function(e){this._logToElastic(C.HIJACK_ATTEMPT,{type:ys.URL,badUrl:e.url,earlyHijack:e.isEarly||!1},!1,!1)}},{key:"logMaliciousActions",value:function(e){this._logToElastic(C.HIJACK_ATTEMPT,{type:ys.ACTION,action:e})}},{key:"logUndefinedIframeSource",value:function(e){this._logToElastic(C.UNDEFINED_IFRAME_SRC,{url:e})}},{key:"logMaxNetworkCalls",value:function(e,t){this._logToElastic(C.MAX_NETWORK_CALLS,{adImpression:e,limitExceeded:!0,maxNetworkCalls:t})}},{key:"logVastPrice",value:function(e){0!==e&&this._logToElastic(C.VAST_PRICE,{value:e})}},{key:"logStatusesOnGetAd",value:function(e){this._logToElastic(C.STATUSES_ON_GET_AD,{status:e,hadImpression:1<arguments.length&&void 0!==arguments[1]&&arguments[1],isStarted:2<arguments.length&&void 0!==arguments[2]&&arguments[2],requiredViewability:3<arguments.length?arguments[3]:void 0})}},{key:"logWinningPrice",value:function(e){this._logToElastic(C.WINNING_PRICE,e,!1,!1)}},{key:"logVpaidResourceEvent",value:function(e){this._logToElastic(C.VPAID_RESOURCE_EVENT,e,!1,!1)}},{key:"logVideoElementEvent",value:function(e){this._logToElastic(C.VIDEO_ELEMENT_EVENT,{isAutoplaySupported:e},!1,!1)}},{key:"logCreatingVpaidHandler",value:function(e,t){e={type:e};t||(e.error="typeNotFound"),this._logToElastic(C.CREATING_VPAID_HANDLER,e)}},{key:"logCanPlay",value:function(){this._logToElastic(C.CAN_PLAY,{videoCanPlay:!0})}},{key:"logVideoBuffer",value:function(e,t){t&&this._logToElastic(C.VIDEO_BUFFER,{status:e,buffered:t},!1,!1)}},{key:"logShouldSecureUrl",value:function(e){this._logToElastic(C.SHOULD_SECURE_URL,{replacedProtocol:e},!1,!1)}},{key:"logPauseProtection",value:function(e,t){this._logToElastic(C.PAUSE_PROTECTION,{paused:e,adRestarted:t})}},{key:"logUnfriendlyIframeSource",value:function(e){this._logToElastic(C.UNFRIENDLY_IFRAME_SRC,{src:e})}},{key:"logVpaidVideoUrl",value:function(e){this._logToElastic(C.VPAID_VIDEO_URL,{videoUrl:e})}},{key:"logLoadAdUnit",value:function(){this._logToElastic(C.LOAD_AD_UNIT,{scriptLoaded:!0})}},{key:"logLoadAdUnitErrorMessage",value:function(e){this._logToElastic(C.LOAD_AD_UNIT_ERROR,{err:e})}},{key:"logLoadAdUnitError",value:function(){this._logToElastic(C.LOAD_AD_UNIT,{scriptLoadedError:!0})}},{key:"logVideoUrl",value:function(e){e&&this._logToElastic(C.VIDEO_URL,{url:e})}},{key:"logInitAdError",value:function(e,t,i,n){this._logToElastic(C.INIT_AD_ERROR,{err:e,funcName:t,args:i,stack:n})}},{key:"logVpaidVideoType",value:function(e){this._logToElastic(C.VPAID_VIDEO_TYPE,{videoType:e})}},{key:"logVideoPlaying",value:function(e){this._logToElastic(C.VIDEO_PLAYING,{vidCurrentTime:e})}},{key:"logSoundProtection",value:function(e,t){this._logToElastic(C.SOUND_PROTECTION,{selfSound:e,videoSound:t})}},{key:"logOMIDEvent",value:function(e){var t,i;this._logToElastic(C.OMID_EVENT,(t={},i=!0,(e=fs(e=e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t))}},{key:"logMoatTracker",value:function(){this._logToElastic(C.MOAT_TRACKER,{})}},{key:"logPrebidAdUnit",value:function(e){this._logToElastic(C.PREBID_AD_UNIT,{adUnit:JSON.stringify(e)})}},{key:"logPrebidBidResponse",value:function(e){this._logToElastic(C.PREBID_BID_RESPONSE,{bids:JSON.stringify(e)})}},{key:"destroy",value:function(){this.stopped=!0,this.vpaidLog=this.store=void 0}},{key:"vpaidLog",get:function(){return this._vpaidLog},set:function(e){this._vpaidLog=e}}])&&ps(e.prototype,i),n&&ps(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],d=!0,l=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;d=!1}else for(;!(d=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);d=!0);}catch(e){l=!0,r=e}finally{try{if(!d&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(e,t)||function(e,t){var i;if(e)return"string"==typeof e?bs(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?bs(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bs(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function As(e,t){return t=t?Ts:ks,ke(e=e)?t:e}function Es(e,t){e&&e.sv||(e.sv=!0,e.addEventListener("volumechange",function(){e.volume!==parseFloat(this.getAttribute(ws))?e.volume=0:e.volume=t}))}var Ts=0,ks=100,ws="tbvol";function Ss(e){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ps(){Ps=function(){return s};var d,s={},e=Object.prototype,l=e.hasOwnProperty,u=Object.defineProperty||function(e,t,i){e[t]=i.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",i=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(d){o=function(e,t,i){return e[t]=i}}function a(e,t,i,n){var r,o,s,a,t=t&&t.prototype instanceof m?t:m,t=Object.create(t.prototype),n=new S(n||[]);return u(t,"_invoke",{value:(r=e,o=i,s=n,a=h,function(e,t){if(a===f)throw new Error("Generator is already running");if(a===v){if("throw"===e)throw t;return{value:d,done:!0}}for(s.method=e,s.arg=t;;){var i=s.delegate;if(i){i=function e(t,i){var n=i.method,r=t.iterator[n];if(r===d)return i.delegate=null,"throw"===n&&t.iterator.return&&(i.method="return",i.arg=d,e(t,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=c(r,t.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,y;r=n.arg;return r?r.done?(i[t.resultName]=r.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=d),i.delegate=null,y):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,y)}(i,s);if(i){if(i===y)continue;return i}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(a===h)throw a=v,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);a=f;i=c(r,o,s);if("normal"===i.type){if(a=s.done?v:p,i.arg===y)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(a=v,s.method="throw",s.arg=i.arg)}})}),t}function c(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}s.wrap=a;var h="suspendedStart",p="suspendedYield",f="executing",v="completed",y={};function m(){}function g(){}function _(){}var t={},b=(o(t,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(P([]))),A=(b&&b!==e&&l.call(b,n)&&(t=b),_.prototype=m.prototype=Object.create(t));function E(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function T(s,a){var t;u(this,"_invoke",{value:function(i,n){function e(){return new a(function(e,t){!function t(e,i,n,r){var o,e=c(s[e],s,i);if("throw"!==e.type)return(i=(o=e.arg).value)&&"object"==Ss(i)&&l.call(i,"__await")?a.resolve(i.__await).then(function(e){t("next",e,n,r)},function(e){t("throw",e,n,r)}):a.resolve(i).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,r)});r(e.arg)}(i,n,e,t)})}return t=t?t.then(e,e):e()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var i,e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return i=-1,(e=function e(){for(;++i<t.length;)if(l.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=d,e.done=!0,e}).next=e}throw new TypeError(Ss(t)+" is not iterable")}return u(A,"constructor",{value:g.prototype=_,configurable:!0}),u(_,"constructor",{value:g,configurable:!0}),g.displayName=o(_,r,"GeneratorFunction"),s.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,o(e,r,"GeneratorFunction")),e.prototype=Object.create(A),e},s.awrap=function(e){return{__await:e}},E(T.prototype),o(T.prototype,i,function(){return this}),s.AsyncIterator=T,s.async=function(e,t,i,n,r){void 0===r&&(r=Promise);var o=new T(a(e,t,i,n),r);return s.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},E(A),o(A,r,"Generator"),o(A,n,function(){return this}),o(A,"toString",function(){return"[object Generator]"}),s.keys=function(e){var t,i=Object(e),n=[];for(t in i)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in i)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=P,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=d)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var n=this;function e(e,t){return o.type="throw",o.arg=i,n.next=e,t&&(n.method="next",n.arg=d),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=l.call(r,"catchLoc"),a=l.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}var o=(r=r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc?null:r)?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),w(i),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i,n,r=this.tryEntries[t];if(r.tryLoc===e)return"throw"===(i=r.completion).type&&(n=i.arg,w(r)),n}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:P(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=d),y}},s}function Is(e,t,i,n,r,o,s){try{var a=e[o](s),d=a.value}catch(e){return void i(e)}a.done?t(d):Promise.resolve(d).then(n,r)}function Os(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cs(n.key),n)}}function Cs(e){e=function(e,t){if("object"!=Ss(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Ss(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Ss(e)?e:String(e)}function Vs(){}var Ds=d(7),Rs=0,Ms=0,xs="adto",Ls="autoKill",Fs="adloadedTimeout",Bs="adImpressionTimeout",V={UNTIL_AD_START:"untilAdStart",AUTO_KILL:"autoKill",GLOBAL_TIMEOUT:"globalTimeout",TB_COMPLETION:"tbCompletion",FORCE_AD_VOLUME:"forceAdVolume"},Ns=0,Ws=1,js=2,Us=3,Hs=4,Gs=5,zs=6,qs=function(){function a(e){var t,n,r,i,o,s=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");t=this,o=function(){return s.tag.t===Le.IMA},(i=Cs(i="isIMATag"))in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,Ds.mixin(this),this.store=e.store,this.target=e.target,this.options=e.options,this.isAdvDelayLoad=e.isAdvDelayLoad,this.tag=Object.assign({},e.tag),this.clickThroughHandler=new er(this.store),this.index=++Rs,this.adElasticLogger=new gs({store:this.store,tag:this.tag}),this.debugTracker=new l("VpaidWrapper".concat(this.index)),this.isOmidActive=this.tag.getValueByKey("enblomid")||this.store.get("omid.isActive"),this.tag.vpaidWrapperData={},this.isMultiAdsActive=this.store.get("mltads"),this.isMultiVpaidUnit=this.store.get("isMultiVpaidUnit"),this.adLoadedFired=!1,this.hijackFired=!1,this.blockBringToFront=this.isMultiVpaidUnit&&this.store.get("blckbrngtofrnt"),this.waitForAdPausedBeforeResumeAd=this.store.get("wtfradpsdbfrrsmad"),this.isVerticalVideoSupported=this.tag.getValueByKey("spprtvrtclvd"),this.tag.vpaidWrapperData.oneSecViewability=this.tag.getValueByKey("one_sec_viewability"),this.vpaidStatus=Ns,this.stayAlive=!1,this.isMobile=this.store.get("isMobile")||!1,this.adTimers=new Zo,this.timeoutLengthToAdCompletion=this.tag.getValueByKey("".concat(this.isMobile?"mbl":"dsk","tmouttoadcmpltn")),this.newCompletionByVideoProgress=this.store.get("q5byprgrss"),this.validateViewabilityFiredBeforeCompletion=this.tag.getValueByKey("vldtvwbfrcmp")||!1,this.setAdVolume=(t=this.store.get("dbncadvltm"),n=this._setAdVolume.bind(this),t?function(){clearTimeout(r);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r=setTimeout(n.apply(q,t),r)}:n),this.tag.moatSampling=(i=this.tag,o=this.store,!(window.taboolaBridge||i.getValueByKey("dsblmt")||!i.requiredViewability)&&(!(!o.get("moat")&&!i.getValueByKey("moat")&&!i.isDirectOrPMP)||!!i.isRTB&&o.get("rtbmtfctr")&&se(0,100)<=o.get("rtbmtfctr"))),this.tag.moatSampling||(this.delayVideoVpaidImpressionForNonMoatRV=this.tag.getValueByKey("dlyimpnonmoatrv")),this.adElasticLogger.logTBCompletion(this.timeoutLengthToAdCompletion,this.newCompletionByVideoProgress),this.pwov=As(this.tag.getValueByKey("optpwov"),this.tag.isCPCV),this.adElasticLogger.logPlayWhenOutOfView(this.pwov,this.tag.cstmdl),this._wfStats=this.tag.wfStats,this._wfStats.increaseVpaidsCount(),this.adEvents=new to({store:this.store,tag:this.tag,index:this.index,creatives:e.config.creatives}),this.adEvents.onEvent(f.a.TagStarted),this.store.get("unitFetcherWfActive")&&this._reportDemandFirstWf(),this.vpaidResourcesHandler=new Ln(this.store,this.tag,this.adElasticLogger),this.onVpaidResourceEvent=this._onVpaidResourceEvent.bind(this),this.vpaidResourcesHandler.on("vpaidResourceEvent",this.onVpaidResourceEvent),this.config=Pe(e.config)||{},this.config.creatives=Pe(e.config.creatives),this.adVolume=c(parseInt(this.config.VOLUME)?parseInt(this.config.VOLUME):0),this.adView=new Go({store:this.store,tag:this.tag,target:this.target,index:this.index,adElasticLogger:this.adElasticLogger}),this.vpaidHandlersFactory=new Xn(this.adElasticLogger,this.store),this.handlerOptions={applyBypass:!!this.config.creatives.AFBP,slot:this.adView.placement,videoSlotControls:!!this.config.videoSlotControls,videoSlotCanAutoPlay:!!this.config.videoSlotCanAutoPlay,protection:this.config.vpaid_protect_path,tag:this.tag,onReady:this._onHandlerCreated.bind(this),onError:this._onHandlerError.bind(this),playerDAST:this.adEvents.playerDAST,vpaidResourcesHandler:this.vpaidResourcesHandler,wrapperIndex:this.index,debugTracker:this.debugTracker,extra:{}},this.adView.createClickArea(),this.adView.createVideoTag(this.config),this.adView.videoTag.addEventListener("timeupdate",function(e){s._onTimeupdate(s.adView.videoTag)}),this.handlerOptions.videoSlot=this.adView.videoTag,this.handlerOptions.clickableTarget=this.adView.clickArea||null,this.vastHandler=new ao(this.store,{vpaidLog:this.adElasticLogger.vpaidLog,width:this.config.width,height:this.config.height,bitrate:this.config.bitrate,tag:this.tag}),this._registerToVastHandlerEvents(),this.vpaidHandler=!1,this.stopped=!1,this._handleWfItemByType(),this._initAdLoadedTimer(),this._setTimers(),this.isReplayable=!1,this.stopwatch=new vo}var e,t,i,d,n;return e=a,(t=[{key:"_reportDemandFirstWf",value:function(){this.store.get("unitFetcherDemand")?(this.adEvents.onEvent(O.UNIT_FETCHER_DEMAND),this.store.set("unitFetcherDemand",!1)):this.store.get("liteUnitDemand")&&(this.adEvents.onEvent(O.LITE_UNIT_DEMAND),this.store.set("liteUnitDemand",!1))}},{key:"_createVideoControls",value:function(){this.store.get("useVideoControls")&&!1!==this.tag.getValueByKey("ad_controls")&&(this.videoControls=new Kt(this.isMobile,{video:this.adView.videoTag,store:this.store,target:this.adView.placement,controls:[this.resumeAd.bind(this),this.pauseAd.bind(this)]}),this.videoControls.setOnSoundChangeCallback(this._onSoundChange.bind(this)),this.videoControls.on(_.VOLUME_CHANGE,this.setAdVolume.bind(this)),this.videoControls.on(_.TIMEUPDATE_REGISTER,this.registerToVPAIDVideoTimeupdateEvent.bind(this)),this.videoControls.on(_.GET_AD_DURATION,this.getAdDuration.bind(this)),this.videoControls.on(_.RESET_CONTROLS,this._resetVideoControls.bind(this)))}},{key:"_registerToVastHandlerEvents",value:function(){this.bindedCreateHandler=this._createHandler.bind(this),this.bindedOnVastHandlerError=this._onVastHandlerError.bind(this),this.vastHandler.on(lo.MEDIA_FILES_FOUND,this.bindedCreateHandler),this.vastHandler.on(lo.ERROR,this.bindedOnVastHandlerError)}},{key:"_unregisterFromVastHandlerEvents",value:function(){this.vastHandler.off(lo.MEDIA_FILES_FOUND,this.bindedCreateHandler),this.vastHandler.off(lo.ERROR,this.bindedOnVastHandlerError)}},{key:"_handleWfItemByType",value:function(){this.tag.isPrebid?this._parsePrebidItem():this.isIMATag()?this._parseIMAItem():this._parseItem()}},{key:"_parsePrebidItem",value:(d=Ps().mark(function e(){return Ps().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.vpaidHandlersFactory.createPrebidHandler(this.tag.bidder,this.tag,this.adView.placement);case 2:if(this.prebidHandler=e.sent,this.prebidHandler){e.next=6;break}return this._onVastHandlerError({type:"handlerCreatingFail",adEvent:O.PREBID_HANDLER_NOT_SUPPORTED,eventData:{isPrebid:!0,bidder:this.tag.bidder}}),e.abrupt("return");case 6:this.prebidHandler.once(Ge.c.BID_WON,this._onPrebidBidWon.bind(this)),this.prebidHandler.once(Ge.c.NO_BID,this._onPrebidNoBid.bind(this)),this.prebidHandler.requestBids();case 9:case"end":return e.stop()}},e,this)}),n=function(){var e=this,s=arguments;return new Promise(function(t,i){var n=d.apply(e,s);function r(e){Is(n,t,i,r,o,"next",e)}function o(e){Is(n,t,i,r,o,"throw",e)}r(void 0)})},function(){return n.apply(this,arguments)})},{key:"_onPrebidBidWon",value:function(e){this.stopped||(e.url||e.vast?(e.price||this.adEvents.onEvent(O.PREBID_MISSING_PRICE),this.tag.url=e.url,this.tag.vast=e.vast,this.tag.prebidPrice=e.price,this.adEvents.onEvent(O.PREBID_BID_WON),this._parseItem()):this._onPrebidNoBid("prebid_emptyResponse",O.PREBID_EMPTY_RESPONSE))}},{key:"_onPrebidNoBid",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"prebid_noBid",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O.PREBID_NO_BID;this.stopped||this.stop(e,t)}},{key:"_parseIMAItem",value:function(){this.adEvents.trackingPixelManager=this.vastHandler.trackingPixelManager,this.type=b.ADX,this.vpaidHandler=this.vpaidHandlersFactory.create("ima",this.handlerOptions),this.tag.vpaidWrapperData.mediatype=this.vpaidHandler.getMediaType()}},{key:"_parseItem",value:function(){this.stopped||(this.tag.vast?this.vastHandler.parseVastFromXML(this.tag.vast):this.vastHandler.parseVastFromURL(this.tag.url,this.tag.request&&"GET"!==this.tag.request.method?this.tag.request.data:void 0))}},{key:"_initAdLoadedTimer",value:function(){this.adTimers.waitForVPAIDEvent(f.a.AdLoaded,this.tag.getValueByKey("altmot")||this.tag.ADTO,Vs,this._onAdLoadedTimeout.bind(this))}},{key:"_setTimers",value:function(){this._initTillAdstartTimeout(),this._initAutoKillTimeOut()}},{key:"_initTillAdstartTimeout",value:function(){var e,t=this;this.adTimers.hasTimer(V.UNTIL_AD_START)||(e=this.type&&this.store.getByTech("adto",this.type)||this.tag.getValueByKey("adto")||this.tag.ADTO,this.adTimers.setTimer(V.UNTIL_AD_START,e,function(){t.adElasticLogger.logAdStopped(),t._firePixel(f.a.AdError,{eventData:{iabErrorCode:r.a.timeout}}),t.stop(xs,O.AD_TIMEOUT)}))}},{key:"_initAutoKillTimeOut",value:function(){var e,t=this;this.adTimers.hasTimer(V.AUTO_KILL)||(e=this.type&&this.store.getByTech("vakll",this.type)||this.tag.getValueByKey("vakll")||9e4,this.adTimers.setTimer(V.AUTO_KILL,e,function(){t.adElasticLogger.logAutoKill(e),t.emit(f.a.AdVideoComplete,{eventData:t}),t._firePixel(f.a.AdError,{eventData:{iabErrorCode:r.a.timeout}}),t.stop(Ls,O.GLOBAL_TIMEOUT)}))}},{key:"_killTimers",value:function(){this.adTimers.clearTimer(V.AUTO_KILL),this.adTimers.clearTimer(V.UNTIL_AD_START),this.adTimers.clearVPAIDEvent(f.a.AdLoaded),this.adTimers.clearVPAIDEvent(f.a.AdImpression)}},{key:"_onHandlerError",value:function(e,t){this.adElasticLogger.logEarlyAdError(e),this.adLoadedFired||(this.status="error",this.stopped)||(this.emit(f.a.AdError,{eventData:e}),"adUnitLoadFailed"===t&&(this.adElasticLogger.logAdUnitLoadFailed(e),this._firePixel(f.a.AdError,{eventData:{iabErrorCode:r.a.timeout}}),this.stop("adUnitLoadFailed",O.AD_UNIT_LOAD_FAILED)))}},{key:"_onHandlerCreated",value:function(){var e=this;this.stopped||(this.adElasticLogger.logCreatedVpaidHandler(),this._connectToVpaidHandler(),this.vpaidHandler.handshakeVersion("2.0"),this.adElasticLogger.logInitAd(),this.on("unit::viewability",function(){e.unitVieawbility=!0,e.adElasticLogger.logViewability()}),this.isIMATag()&&this.adEvents.onEvent(O.ADX_REQUEST),this.vpaidHandler.initAd(this.config.width,this.config.height,this.config.viewMode,this.config.bitrate,{AdParameters:this.config.creatives.AdParameters},{slot:this.adView.placement,videoSlot:this.adView.videoTag,videoSlotControls:!!this.config.videoSlotControls,videoSlotCanAutoPlay:!!this.config.videoSlotCanAutoPlay}))}},{key:"_connectToVpaidHandler",value:function(){if(!this.stopped)for(var e in f.a)this.vpaidHandler.subscribe(this._handleVpaidEvents.bind(this,f.a[e]),f.a[e])}},{key:"_adLoadedHandler",value:function(){var e;this.stopped||(this.adLoadedFired=!0,this.debugTracker.time("[VpaidWrapper".concat(this.index,"] adLoaded->startAd()")),this.debugTracker.info("RequiredViewability:".concat(this.tag.requiredViewability)),this.debugTracker.info("Ad loaded now => pause it srcEvent"),this.adEvents.onEvent(O.AD_LOADED),this.vpaidStatus=Ws,this.status="ready",this._setIsUnpaused(!0),this.store.emit("vpaidReady",this),this.setAdVolume(this.adVolume),this.vpaidHandler.checkUnfriendlyIframe&&(this.isUnfriendlyIframe=this.vpaidHandler.checkUnfriendlyIframe()),this.type&&this.type==A.VPAID&&(this.earlySrcVPAID=!1,e=this.adView.getVideoSource())&&(this.earlySrcVPAID=!0,this.isMobile)&&this.vpaidHandler.prefetchVideo&&(this.vpaidHandler.prefetchVideo(A.VPAID,e),this.debugTracker.info("_adLoadedHandler() -> javascript vpaidHandler.prefetchVideo() src:".concat(e))),this.vpaidResourcesHandler&&this.vpaidResourcesHandler.setVpaidAnalyticsIsVideoUrlPublic&&this.vpaidResourcesHandler.setVpaidAnalyticsIsVideoUrlPublic(""!==this.getVideoUrl()),"any"!==(e=this.store.get("rvfrquesttsemttr"))&&this.tag.requiredViewability!==e)||this.store.emit(g.outer.EmitQueueStatus)}},{key:"startAd",value:function(e){var t,i,n,r,o,s=this;this.adEvents.predictorId=e.predictId,this.getAdId=e.id,this.startTimestamp=new Date,this.adStarted=!0,this.debugTracker.timeEnd("[VpaidWrapper".concat(this.index,"] adLoaded->startAd()")),this.setAdVolume(this.adVolume),this._startForceAdVolumeInterval(),this.options=Object.assign(e||{},this.store.get("getAdData")),this.isStarted=!0,this.store.incr("ads_started"),this.vpaidStatus=js,this.type!==b.VIDEO||this.options.predictId===xe.IMMEDIATE_START?this._sendStartAdOpp():addEventListener("AdResume",this._sendStartAdOpp.bind(this),!1),this.adElasticLogger.logAdOptions(this.options),this.adElasticLogger.logStartAd(),this.earlyAdImpression||this.adTimers.waitForVPAIDEvent(f.a.AdImpression,(t={RV1Timeout:this.store.get("rv1adimptmot"),PPDTimeout:this.store.get("ppdAdImpressionTimeoutInMS"),requiredViewability:this.tag.requiredViewability,isPPD:this.store.get("isPPD"),defaultTimeout:this.store.get("adimptmot")},i=void 0===(i=t.RV1Timeout)?0:i,n=t.PPDTimeout,r=t.requiredViewability,o=t.isPPD,t=t.defaultTimeout,void 0!==o&&o?void 0===n?0:n:void 0!==r&&r&&0<i?i:void 0===t?0:t),this.emit.bind(x.CLEAR_GET_AD_TIMEOUT,e),this._onAdImpressionTimeout.bind(this)),this.isUnPaused?(this.debugTracker.info("startAd()"),this.vpaidHandler.startAd(),this.stopwatch.start()):(this.debugTracker.info("resumeAd() from startAd()"),this.vpaidHandler.resumeAd(),this.stopwatch.resume()),this.adTimers.clearTimer(V.UNTIL_AD_START),this.working=!0,this.earlyAdImpression&&(this._onAdImpression(),this.emit(x.CLEAR_GET_AD_TIMEOUT,e)),this.vpaidHandler.on("activeAdCurrentTime",function(e){s.emit("activeAdCurrentTime",e)}),this.newCompletionByVideoProgress&&(this._newCompletionListener=function(){s._newCompletionHandler("timerEnded")},this.vpaidHandler.on(g.outer.NewCompletion,this._newCompletionListener)),this.tag.nas&&this.vpaidHandler.on("clickThruUrlFound",function(e){s.landingPageUrl=e})}},{key:"_sendStartAdOpp",value:function(){removeEventListener("AdResume",this._sendStartAdOpp),this.adEvents.onEvent(O.START_AD),this._dispatchToExternalExtensions("startAd"),this.store.set("ads_started_fired",!0)}},{key:"_startForceAdVolumeInterval",value:function(){var e,t=this;this.isMobile||this.adTimers.hasInterval(V.FORCE_AD_VOLUME)||(this.adTimers.setInterval(V.FORCE_AD_VOLUME,this.store.get("frcadvlmtrvl"),function(){t.vpaidHandler&&!t.vpaidHandler.stopped?t.setAdVolume(t.adVolume):t.adTimers.clearInterval(V.FORCE_AD_VOLUME)}),e=this.store.get("stpfrcvlevnt")||f.a.AdVideoFirstQuartile,this.adTimers.waitForVPAIDEvent(e,0,this._stopForceAdVolumeInterval.bind(this)))}},{key:"_stopForceAdVolumeInterval",value:function(){this.adTimers.clearInterval(V.FORCE_AD_VOLUME)}},{key:"restartAd",value:function(){var e=this;this.isReplayable&&(this.adEvents.resume(),this.adEvents.onEvent(O.REPLAY_AD),this.adEvents.pause(),this.working=this.isStarted=this.adStarted=!0,this.store.incr("ads_started"),this.vpaidHandler.restartAd(this.getVideoUrl(),this.landingPageUrl),setTimeout(function(){e.bringToFront()}))}},{key:"isReplayableVpaid",value:function(){return this.tag.getValueByKey("rplvpdactv")&&this.vpaidHandler&&this.vpaidHandler.isReplayable()}},{key:"dontDie",value:function(){this.tag&&(this.tag.singleAd||this.tag.adjacencyAd)&&(this.stayAlive=!0,this.vpaidHandler&&this.vpaidHandler.dontDie&&this.vpaidHandler.dontDie(),this._killTimers())}},{key:"_handleStopped",value:function(e){this.adView.moveToBack(),this.stop(e.type,e.adEvent),this.working=!1}},{key:"pauseAd",value:function(){!this.stopped&&this.isUnPaused&&(this.waitForAdPausedBeforeResumeAd&&(this.isUnPaused&&(this.adPausedFired=!1),this.resumeOnAdPaused)&&(this.resumeOnAdPaused=!1),this.pauseAdStartTime=Date.now(),this.working=!1,this.vpaidHandler.pauseAd(),this.stopwatch.pause(),this._pauseAdTimeoutToCompletion(),this._pauseGlobalAdTimeout(),this.emit("adPaused"))}},{key:"resumeAd",value:function(){this.stopped||!this.isMultiAdsActive&&this.store.get("forcePause")||(this.waitForAdPausedBeforeResumeAd&&!this.adPausedFired?this.resumeOnAdPaused=!0:(this.resumeOnAdPaused=!1,this.working=!0,this.vpaidHandler.resumeAd(),this.stopwatch.resume(),this.emit("adResumed"),this.adView.activateVideoTag(),this.workingVpaid||(this._isDelayedImpressionByMoat()&&(this._fireNetworkAdImpression(),this._firePixel(f.a.AdVideoStart,{})),this._dispatchToExternalExtensions(f.a.AdVideoStart,!0,!0),this._dispatchToExternalExtensions(f.a.AdImpression,!0,!0)),!this.isMultiVpaidUnit||this.isVerticalVideoSupported&&this.isVertical||this.resizeAd(this.store.get("width"),this.store.get("height")),this.videoControls&&!this.workingVpaid&&(this.videoControls.resetAdControls(),this.isMobile)&&this._setVideoControlsState({playerState:tr}),this.store.set("ad_controls",!1!==this.tag.getValueByKey("ad_controls")),this.workingVpaid=!0,this._setTimeoutToAdCompletion(),this._setGlobalAdTimeout()))}},{key:"_setGlobalAdTimeout",value:function(){var e=this;this.adTimers.hasTimer(V.GLOBAL_TIMEOUT)?this.adTimers.resumeTimer(V.GLOBAL_TIMEOUT):this.adTimers.setTimer(V.GLOBAL_TIMEOUT,this.tag.getValueByKey("global_ad_timeout"),function(){e.stopped||e.stop("global_ad_timeout",O.GLOBAL_AD_TIMEOUT)})}},{key:"_pauseGlobalAdTimeout",value:function(){this.adTimers.pauseTimer(V.GLOBAL_TIMEOUT)}},{key:"_setTimeoutToAdCompletion",value:function(){var e=this,t=this.newCompletionByVideoProgress&&null!=this.vpaidHandler.activeVideoElement;this.adEvents.isEventFired(O.TB_COMPLETION)||t||(this.adTimers.hasTimer(V.TB_COMPLETION)?this.adTimers.resumeTimer(V.TB_COMPLETION):this.adTimers.setTimer(V.TB_COMPLETION,this.timeoutLengthToAdCompletion,function(){e.stopped||e._newCompletionHandler("timerEnded")}))}},{key:"_pauseAdTimeoutToCompletion",value:function(){this.adTimers.pauseTimer(V.TB_COMPLETION)}},{key:"_fireNewCompletionEvent",value:function(){this.adEvents.onEvent(O.TB_COMPLETION),this.vpaidStatus=zs,this.emit(g.outer.NewCompletion),this.adTimers.clearTimer(V.TB_COMPLETION),this.unsubscribe(this._newCompletionListener,g.outer.NewCompletion)}},{key:"getVideoUrl",value:function(){return this.videoUrl||(this.videoUrl=this.vpaidHandler.getVideoUrl?this.vpaidHandler.getVideoUrl():""),this.videoUrl}},{key:"_dispatchToExternalExtensions",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];!1===t||e===f.a.AdPaused&&this._checkFirstAdPaused()||(this._dispatchMoatEvents(e,i),this._dispatchOmidEvents(e,i))}},{key:"_dispatchOmidEvents",value:function(e,t){e==f.a.AdPlaying&&this._checkFirstPlayEvent()||this.adEvents.shouldDelayEvent(e,!t)||this.omidHandler&&this.omidHandler.dispatch({type:e,duration:this.vpaidHandler.getAdDuration(),adVolume:this.adVolume})}},{key:"_checkFirstPlayEvent",value:function(){return!!this.isFirstPlay&&!(this.isFirstPlay=!1)}},{key:"_dispatchMoatEvents",value:function(e,t){this._isDelayedImpressionByMoat()&&(this.adEvents.shouldDelayEvent(e,!t)||!this.tag.moatSampling)||null==(t=this.moatTracker)||t.dispatch({type:e,adVolume:this.adVolume})}},{key:"_checkFirstAdPaused",value:function(){if(!this.isFirstAdPaused)return this.isFirstAdPaused=!0,this.isFirstPlay=!0}},{key:"_handleVpaidEvents",value:function(e,t){var i=this;if(f.a){if(this.type===A.VPAID&&(this.tag.getValueByKey("cmpltonstpd")||this._getAdSettingValue("cmpltonstpd")||this.vpaidHandler.completeOnAdStop)){if(e===f.a.AdVideoComplete)return void(this.vpaidHandler&&this.vpaidHandler.setCompletionOnAdStoppedTimeout&&this.vpaidHandler.setCompletionOnAdStoppedTimeout());e===f.a.AdStopped&&(e=f.a.AdVideoComplete)}!this.isFirstVpaidEvent&&this.vpaidHandler&&this.vpaidHandler._getMediaUrl()&&(this.isFirstVpaidEvent=!0,this.adElasticLogger.logMediaUrl(this.vpaidHandler._getMediaUrl()));var n,r=!0;if(!this.stopped){switch(e!==f.a.AdStarted&&(n=this._firePixel(e,t)),this.debugTracker.info("VpaidHandler-event",e),this._dispatchToExternalExtensions(e,n),this.adTimers.onVPAIDEvent(e),e){case f.a.AdLoaded:this._adLoadedHandler(),this._sendVpaidAnalyticsReport(e),this.vpaidHandler.getAdIcons&&this.vpaidHandler.getAdIcons(this.adElasticLogger.logAdIcons.bind(this.adElasticLogger)),(this._isDelayedIMATag()||this.isAdvDelayLoad)&&this.startAd(this.options);break;case f.a.AdImpression:if(this._sendVpaidAnalyticsReport(e),this.store.emit("playContentAfterFirstAd"),r=this._onAdImpression(e),this.adView.handleVerticalVideo(parseInt(this.store.get("width")),parseInt(this.store.get("height"))),this.earlyAdImpression)return;break;case f.a.AdVideoStart:this.adEvents.onEvent(O.AD_VIDEO_START),this.setAdVolume(this.adVolume),this._firePixel(h.start),this._setIsUnpaused(!0),this.debugTracker.info("_handleVpaidEvents() -> AdStarted || AdVideoStart -> this.isUnPaused = true");break;case f.a.AdSkipped:this._fireNewCompletionEvent(),this._handleStopped({type:e,adEvent:O.AD_SKIPPED}),this.adStoppedHandler(e);break;case f.a.AdStopped:this.adStoppedHandler(e),this._handleStopped({type:e});break;case f.a.AdLog:this.debugTracker.info("VpaidHandler-Log",arguments);break;case f.a.AdError:this.vpaidStatus=Gs,this.type===b.VIDEO?this.stop("Mp4AdError",e):this.stop(f.a.AdError,e,t);break;case f.a.AdPaused:this.pauseAdStartTime=void 0,this.adPausedFired=!0,this.waitForAdPausedBeforeResumeAd&&this.resumeOnAdPaused&&this.resumeAd(),this._setIsUnpaused(!1),this._pauseAdTimeoutToCompletion(),this._pauseGlobalAdTimeout();break;case f.a.AdClickThru:this._fireNewCompletionEvent(),t=function(e,t){if((null==e||null==(i=e.eventData)||!i.url)&&t){var i={url:t};if(!e)return{eventData:i};e.eventData=Object.assign(e.eventData||{},i)}return e}(t,this.landingPageUrl),this._pauseAdTimeoutToCompletion(),this._pauseGlobalAdTimeout();break;case f.a.AdPlaying:this._setTimeoutToAdCompletion(),this._setGlobalAdTimeout(),this._fireAdPlaying();case f.a.AdStarted:this.adEvents.onEvent(O.AD_STARTED),this._setIsUnpaused(!0),this._firePixel(h.creativeView);break;case f.a.AdVolumeChange:t&&t.eventData&&t.eventData.volume&&(this.adVolume=c(t.eventData.volume),this._dispatchToExternalExtensions(e,!0===this.hadImpression));break;case f.a.AdVideoThirdQuartile:this.hasReachedThirdQuartile=!0}if(this.emit(e,{type:e,data:t}),this.adElasticLogger.logVpaidEvent(e,t&&t.eventData?v(t.eventData):void 0,this.adView.videoTag.currentTime),n&&this.adEvents.onEvent(e),f.a)if(e===f.a.AdClickThru)this.landingPageUrl=t&&t.eventData?t.eventData.url:"",this.isClicked=!0,this.clickThroughHandler.invokeClick(t.eventData);else if(e==f.a.AdVideoComplete){if(this.adCompleted=!0,this._newCompletionHandler(f.a.AdVideoComplete,n),this.stayAlive)return this.adTimers.clearTimer(V.GLOBAL_TIMEOUT),void this.emit("end");this.vpaidHandler.stopAd(),this.adTimers.setTimer(V.AD_COMPLETION),setTimeout(function(){i.working=!1,i.workingVpaid=!1,i.stop(f.a.AdVideoComplete),i.status="stopped"},2)}r&&this.emit(x.TRIGGER_EVENT,e,this,t?t.eventData:void 0)}}}},{key:"_sendVpaidAnalyticsReport",value:function(e){this.adElasticLogger.vpaidLog.getVpaidAnalyticsReport&&this.adElasticLogger.logVpaidAnalytics(e,this.adElasticLogger.vpaidLog.getVpaidAnalyticsReport())}},{key:"_setIsUnpaused",value:function(e){this.isUnPaused=e,this._setVideoControlsState({isPaused:!e})}},{key:"_newCompletionHandler",value:function(e,t){this.adEvents.isEventFired(O.TB_COMPLETION)||!this.adTimers.hasTimer(V.TB_COMPLETION)&&!this.newCompletionByVideoProgress||(this.adTimers.clearTimer(V.TB_COMPLETION),this._validateNewCompletionFiring(e,t)?this._fireNewCompletionEvent():this.adElasticLogger.logFailedTBCompletion(e))}},{key:"_validateNewCompletionFiring",value:function(e,t){return this.validateViewabilityFiredBeforeCompletion&&!this.unitVieawbility?(this.adElasticLogger.logCompletionBeforeViewability(this.adView.videoTag,this.newCompletionByVideoProgress,e),!1):e===f.a.AdVideoComplete?t&&this.adEvents.isEventFired(f.a.AdVideoComplete):"timerEnded"===e}},{key:"_onAdImpression",value:function(){var e=!0,t=this.store.get("rstmrai");return this.adView.fireIconViewTracking(),t&&this._killTimers(),!this.adStarted&&this.store.get("erlyai")?(this.earlyAdImpression=!0,this.adEvents.onEvent(O.EARLY_AD_IMPRESSION),this.pauseAd(),this._setIsUnpaused(!1),this.adElasticLogger.logEarlyAdImpression(),this.adTimers.clearTimer(V.UNTIL_AD_START),this.tag.getValueByKey("prvnterlyadimpopp")||this.adSettings&&this.adSettings.prvnterlyadimpopp||this._shouldSkipEarlyAdImpression()||this._fireAdImpression(),!1):(this.hadImpression?e=!1:(this.adElasticLogger.logAdSuccess(this.store.incr("conversionsCount")),this.setAdVolume(this.adVolume),this.emit(f.a.AdImpression),this._fireAdImpression(),this.hadImpression=!0,this.adEvents.hadImpression=!0,this._wfStats.increaseSuccess(),this.vpaidHandler&&this.vpaidHandler.logVideoUrl&&this.vpaidHandler.logVideoUrl(),this.vpaidHandler&&!this.vpaidHandler.activeVideoElement&&this.adEvents.onEvent(O.NON_FRIENDLY_VIDEO),this.isReplayable=this.isReplayableVpaid(),this.adElasticLogger.logRestartAd(this.isReplayable),this.adEvents.updatePlayerDAST(Jr,{videoUrl:this.getVideoUrl(),videoEl:this.vpaidHandler.getVPAIDVideoElement?this.vpaidHandler.getVPAIDVideoElement():this.adView.videoTag})),this.earlyAdImpression&&this.emit(x.TRIGGER_EVENT,f.a.AdImpression,this),e)}},{key:"_shouldSkipEarlyAdImpression",value:function(){if(this.type===A.VPAID&&this.store.get("jsDsbleErlyai")&&this.tag.requiredViewability)return!0}},{key:"_fireAdImpression",value:function(){this.adimpFired||(this._isDelayedImpressionByMoat()?this.vpaidStatus=Us:(this.adElasticLogger.logAsyncAdImpressionFired(),this._fireNetworkAdImpression()))}},{key:"_isDelayedImpressionByMoat",value:function(){return this.type===b.VIDEO&&(this.tag.moatSampling||"any"===this.delayVideoVpaidImpressionForNonMoatRV||this.tag.requiredViewability===this.delayVideoVpaidImpressionForNonMoatRV)}},{key:"_fireNetworkAdImpression",value:function(){var e;this.adEvents.onEvent(f.a.AdImpression,{buffer:null!=(e=this.adView)&&e.getVideoSource()?this.adView.getVideoBuffered():void 0}),this._firePixel(f.a.AdImpression,{},!0),this.adimpFired=!0,this.adEvents.onEvent(O.FIRST_SESSION_IMPRESSION),this.adEvents.sendDelayedQuartileOpps()}},{key:"_fireAdPlaying",value:function(){this.hadImpression&&this.workingVpaid&&(this.adEvents.onEvent(O.AD_PLAYING),this.emit(x.TERMINATE_PPD,this.tag.advType),this.vpaidStatus=Hs)}},{key:"adStoppedHandler",value:function(e){var t=this;this.stop(),setTimeout(function(){t._cleanVpaid()},1e4)}},{key:"_setAdVolume",value:function(e,t){var i,n,r,o,s;this.stopped||(0===this.adVolume&&0<e&&this.adEvents.onEvent(O.AD_UNMUTED),t&&this.adView.isVideoHover()&&this.adEvents.onEvent(O.SOUND_ON_HOVER),e=c(e),this.adVolume=e,this.adView.setVolume(e),0<this.adVolume&&this._stopForceAdVolumeInterval(),this.store.get("frcmtfrms")&&(i={iframes:this.adView.getIframesFromPlacement(),volume:e,isDebug:this.store.get("debug"),shouldMuteVideo:this.store.get("dskVidMuted")&&!this.isMobile},n=i.iframes,r=i.volume,o=void 0===r?0:r,r=i.shouldMuteVideo,s=void 0!==r&&r,r=i.isDebug,ue((void 0===n?[]:n)[0],"iframe",function(e){e.forEach(function(e){Es(e,o),e.setAttribute(ws,o),e.volume=o,s&&(e.muted=0===o)})},"video",void 0!==r&&r)),this.vpaidHandler&&(this.vpaidHandler.setAdVolume(e,t),this.vpaidHandler.callIMAApi)&&this.vpaidHandler.callIMAApi("volume",e),0<e?this._firePixel(g.inner.Unmute,{}):this._firePixel(g.inner.Mute,{}))}},{key:"_onVastHandlerError",value:function(e){this.stopped||(this.status="error",this.isPlaying=!1,this.adElasticLogger.logAdError(e),this.vastHandler&&this.vastHandler.hasTrackingPixels()&&this.vastHandler.fireErrorPixels(f.a.adError),this.stop(e.type||"",e.adEvent,e.eventData))}},{key:"_updateAdVideoDurationOnVideoControls",value:function(e){this._setVideoControlsState({vidDuration:e,vidCurrentTime:0})}},{key:"_createHandler",value:function(e){var t,i,n,r;this.stopped||(e&&e.vastOptions&&e.vastOptions.hasOmid&&(t={vastVersion:(t=e.vastOptions.analysis.vr,parseInt(t)),vendorsNum:e.vastOptions.omidElements.length,vendor:e.vastOptions.omidVendor},this.adEvents.onEvent(O.OMID_DETECTED,{vendor:(this.omidVendor||t.vendor).substring(0,30)}),this.handlerOptions.omid=e.vastOptions.omidElements),e&&(this.setVastPrice(e.vastOptions.price),this.adView.handleVastIcons(e.vastOptions.icons||[]),this.adEvents.updatePlayerDAST(Zr,{vdr:e.handlerOptions.extra.duration}),this.adEvents.updatePlayerDAST($r,e.vastOptions.analysis),this.handlerOptions.adParams=e.handlerOptions.adParams,this.handlerOptions.vpaidFiles=e.handlerOptions.vpaidFiles,this.handlerOptions.extra.duration=e.handlerOptions.extra.duration,this.adEvents.trackingPixelManager=this.handlerOptions.trackingPixelManager=e.trackingPixelManager),this._setTimers(),this.config.creatives.AdParameters=this.handlerOptions.adParams,this.handlerOptions.adSettings=this._getAdSettings(),this.adSettings&&this.adSettings.hasOwnProperty("wtfradpsdbfrrsmad")&&!0===this.adSettings.wtfradpsdbfrrsmad&&(this.waitForAdPausedBeforeResumeAd=!0),this.vpaidHandler=this.vpaidHandlersFactory.create(e.type,this.handlerOptions),this.vpaidHandler?(this.type=e.type,this.hasOmid=e.vastOptions&&e.vastOptions.hasOmid,this.omidVendor=e.vastOptions&&e.vastOptions.omidVendor,this.landingPageUrl=e.vastOptions&&e.vastOptions.landingPage,this.store.emit(g.outer.EmitQueueStatus),this.debugTracker.info("ParserResponded[".concat(this.type,"-").concat(this.isMobile?"mob":"desk","]"),this.handlerOptions.vpaidFiles),this._updateAdVideoDurationOnVideoControls(this.handlerOptions.extra.duration),this.type===b.VPAID&&this.adView.removeClickArea(),this._createVideoControls(this.vpaidHandler),t={store:this.store,tag:this.tag,vastOptions:e.vastOptions,type:this.type},i=t.store,n=t.tag,r=void 0===(r=t.vastOptions)?{}:r,t=t.type,(n.getValueByKey("enblomid")||i.get("omid.isActive"))&&r.hasOmid&&r.omidElements&&0!==r.omidElements.length&&t!==A.VPAID&&!vn(i)&&(this.vpaidHandler.isOMID=!0,this.omidHandler=this.vpaidHandlersFactory.createOMIDHandler(this.handlerOptions)),this.tag.vpaidWrapperData.mediatype=this.vpaidHandler.getMediaType(),this._createMoatTracker()):this._onVastHandlerError({type:"handlerCreatingFail",handlerType:e.type,adEvent:O.MEDIA_FILE_NOT_SUPPORTED}))}},{key:"_createMoatTracker",value:function(){var e;this.tag.moatSampling&&(e=this.adEvents.getFromPlayerDAST(),this.moatTracker=new wt({container:this.vpaidHandler.getDOMContainer(),tag:this.tag,moatPartnerCode:this.tag.getValueByKey("moatPartnerCode"),duration:this.vpaidHandler.getAdDuration(),url:this.vpaidHandler.mediaFiles?this.vpaidHandler.mediaFiles[0].url:"",store:this.store,adElasticLogger:this.adElasticLogger,playerDast:e,debugTracker:this.debugTracker,zMoat:this.adEvents.oppsManager.generateOppParams(this.tag,void 0,e)}),this._extractWinningPrice())}},{key:"_getAdSettings",value:function(){return this.adSettings=this.store.getByAdInline(this.adEvents.getFromPlayerDAST(eo))||{},this.adElasticLogger.logAdSettings(this.adSettings),this.adSettings}},{key:"_cleanVpaid",value:function(e){this.clean||this.stayAlive&&this.isReplayable&&"post_repeat"!==e||(this.clean=!0,this.adElasticLogger&&this.adElasticLogger.vpaidLog&&(this.adElasticLogger.vpaidLog.saveToDb(),this.adElasticLogger.vpaidLog.getVpaidAnalyticsReport=void 0),null!=(e=this.adEvents)&&e.destroy(),null!=(e=this.adView)&&e.destroy(),this._destroyAdTimers(),this._unregisterFromVastHandlerEvents(),this.vastHandler.destroy(),null!=(e=this.omidHandler)&&e.dispose(),null!=(e=this.moatTracker)&&e.dispose(),this.status="stopped",this.working=!1,null!=(e=this.videoControls)&&e.destroy(),null!=(e=this.vpaidHandlersFactory)&&e.destroy(),null!=(e=this.adElasticLogger)&&e.destroy(),this.adElasticLogger=this.vastHandler=this.debugTracker=this.adElasticLogger=this.tag=this.adEvents=this.config=this.vpaidHandler=this.store=this._wfStats=this.videoControls=this.adSettings=this.omidHandler=this.moatTracker=void 0,this.isPlaying=!1,window.setTimeout(this.onAfterStop,0),this.emit(x.VPAID_CLEANED))}},{key:"_destroyAdTimers",value:function(){this.adTimers.clearTimer(V.TB_COMPLETION),this.adTimers.clearTimer(V.GLOBAL_TIMEOUT),this._killTimers(),this.adTimers.destroy()}},{key:"bringToFront",value:function(){var e;this.adView.placement&&!this.blockBringToFront&&(e=this.adView.bringToFront(Ms++),this.vpaidHandler&&(this.vpaidHandler.zIndex=e),this._setVideoControlsState({isVisible:!0}),this.toggleIframeContentDisplay("hide"))}},{key:"subscribe",value:function(e,t){this.stopped||f.a[t]&&this.on(t,e)}},{key:"unsubscribe",value:function(e,t){f.a&&f.a[t]&&(e?this.off(t,e):this.off(t))}},{key:"_isDelayedIMATag",value:function(){return this.isIMATag()&&this.store.get("delayAdxLoad")&&!0===this.tag.requiredViewability}},{key:"stop",value:function(e,t,i){var n=this;e||!this.hasReachedThirdQuartile||this.adCompleted?"post_repeat"!==e&&"global_ad_timeout"!==e&&"undefinedIframeSrc"!==e&&this.stayAlive&&this.isReplayable||this.stopped||(this.adElasticLogger.logStopReason(e,this.status,i&&i.eventData?v(i.eventData):void 0),this._stopForceAdVolumeInterval(),this.hadImpression||this.adElasticLogger.logAdFailure(this.store.incr("failsCount")),this._wfStats&&!this.hadImpression&&this._wfStats.increaseFailure(),this.isStarted&&this.store.decr("ads_started"),this.isPlaying=!1,this.adEvents.onEvent(t,i),"NoMediaFileAfterSort"===e&&t===O.MEDIA_FILE_NOT_SUPPORTED&&this._firePixel(f.a.AdError,{eventData:{iabErrorCode:r.a.mediaFileNotSupported}}),"playerClosed"===e&&this.hadImpression&&this._firePixel(h.close),this.stopped=!0,this.vpaidHandler&&(this.vpaidHandler.onAfterStop=this._cleanVpaid.bind(this),this.vpaidHandler.stopAd()),i=this.stopwatch.getElapsedTime(),this.store.set("adElapsedDuration",i),this.emit("end",{adElapsedDuration:i}),this.store.emit("vpaidEnded",this),this.emit(x.TERMINATE_PPD,this.tag.advType),setTimeout(function(){n._cleanVpaid(e)},2),"global_ad_timeout"===e&&(this.isReplayable=!1)):(this.adElasticLogger.logEarlyAdStopped(),this._handleVpaidEvents(f.a.AdVideoComplete,{}))}},{key:"callVpaidMethod",value:function(e,t,i){if(!this.stopped){if(this.vpaidHandler&&this.vpaidHandler.callIMAApi&&("pauseAd"!=e&&"resumeAd"!=e||this.vpaidHandler.callIMAApi(e)),"setAdVolume"==e&&(this.adVolume=c(t[0])),"pauseAd"==e&&this._setIsUnpaused(!1),"resizeAd"==e&&this.adView.resizePlacement(t[0],t[1]),!this.vpaidHandler||!this.vpaidHandler[e])return i;try{return this.vpaidHandler[e].apply(this.vpaidHandler,t)}catch(e){return i}}}},{key:"onAfterStop",value:function(){}},{key:"_hijackAttempt",value:function(e,t){"maliciousUrl"===e?this.hijackFired||(this.hijackFired=!0,this.adElasticLogger.logMaliciousUrl(t),!1!==this.store.get("hjkstp")&&this.stop("hijackAttempt",O.HIJACK_ATTEMPT)):"maliciousAction"===e&&this.adElasticLogger.logMaliciousActions(t.action)}},{key:"_onVpaidResourceEvent",value:function(e){"hijackAttempt"===e.event?this._hijackAttempt(e.data.type,e.data.data):"undefinedIframeSrc"===e.event?(this.adElasticLogger.logUndefinedIframeSource(e.data.url),this.store.get("stpvpdonudfndsrc")&&this.stop("undefinedIframeSrc")):"maxNetworkCalls"===e.event&&(this.adElasticLogger.logMaxNetworkCalls(this.adimpFired,e.data.maxNetworkCalls),this.adimpFired||this.stop("networkCallsLimitExceeded",O.MAX_NETWORK_CALLS))}},{key:"_onAdLoadedTimeout",value:function(){this._firePixel(f.a.AdError,{eventData:{iabErrorCode:r.a.timeout}}),this.stop(Fs,O.AD_LOADED_TIMEOUT)}},{key:"_onAdImpressionTimeout",value:function(){this.adEvents.onEvent(O.AD_IMPRESSION_TIMEOUT),this.stop(Bs)}},{key:"setVastPrice",value:function(e){this.tag.vpaidWrapperData.vastPrice=e,this.adElasticLogger.logVastPrice(e)}},{key:"mute",value:function(){this.stopped||(this.vpaidHandler.video&&this.vpaidHandler.video.muteButtonClicked&&0<this.adVolume&&this.vpaidHandler.video.muteButtonClicked(),this.adVolume=0,this._setVideoControlsState({isMuted:!0}))}},{key:"unmute",value:function(){this.stopped||(this.vpaidHandler.video&&this.vpaidHandler.video.muteButtonClicked&&0===this.adVolume&&this.vpaidHandler.video.muteButtonClicked(),this.adVolume=c(this.store.get("dfltvlm")),this.videoControls&&(this.store.get("forceMute")?this.adVolume=0:(this._setVideoControlsState({isMuted:!1}),this.adVolume=c(this.videoControls.getFromState("volume")))))}},{key:"updateStatusesOnGetAd",value:function(e){this.adElasticLogger.logStatusesOnGetAd(this.status,this.hadImpression,this.isStarted,e.requiredViewability)}},{key:"resizeAd",value:function(e,t,i){var n,r,o;if(!this.stopped)try{i=i&&1<i.split(":").length?i:this.store.get("playerAspectRatio");r=t,o=i;var s=Se(n=e)&&Se(r)?{}:r&&n?{width:n,height:r}:(o=o.split(":"),n?{width:n,height:Ie(n,o[1]/o[0])}:{height:r,width:Ie(r,o[0]/o[1])}),a=s.width,d=s.height;a||d?(a&&d&&(this.adView.resize(a,d),this.isMultiAdsActive&&(!this.isVerticalVideoSupported||d<a?(this.store.set("width",a.toString()),this.store.set("height",d.toString()),this.store.emit("resizeVpaidWrapper",{width:a,height:d})):this.isVertical=!0),this.adView.handleVerticalVideo(a,d,i),this.vpaidHandler.resizeAd(a,d,this.config.viewMode||"normal",i)),this.blockBringToFront&&(this.blockBringToFront=!1,this.bringToFront())):this.debugTracker.error("resize","No height and no width specified!")}catch(e){this.debugTracker.error("resize","Resizing component failed!")}}},{key:"getCurrentVolume",value:function(){return this.videoControls?this.videoControls.getFromState("volume"):this.adVolume}},{key:"_onSoundChange",value:function(e){this.vpaidHandler&&this.vpaidHandler.onMuteChanged&&this.vpaidHandler.onMuteChanged(e)}},{key:"toggleIframeContentDisplay",value:function(e){!this.stopped&&this.isMultiVpaidUnit&&this.store.get("tglifrmcntndsplyactv")&&this.vpaidHandler.toggleIframeContentDisplay&&this.vpaidHandler.toggleIframeContentDisplay(e)}},{key:"getAdDuration",value:function(){var i=this,e=this.adView.videoTag.duration;isNaN(e)?this.vpaidHandler&&this.vpaidHandler.getAdDuration(function(e,t){i._setVideoControlsDuration(t)}):this._setVideoControlsDuration(e)}},{key:"_setVideoControlsDuration",value:function(e){this._setVideoControlsState({vidDuration:e})}},{key:"registerToVPAIDVideoTimeupdateEvent",value:function(){var t,i=this;this.vpaidHandler&&this.vpaidHandler.getVPAIDVideoElement&&null!==(t=this.vpaidHandler.getVPAIDVideoElement())&&t.addEventListener("timeupdate",function(e){i._onTimeupdate(t)})}},{key:"_onTimeupdate",value:function(e){this.workingVpaid&&0<e.currentTime&&this._setVideoControlsState({preventAdTicker:!0,vidDuration:e.duration,vidCurrentTime:e.currentTime})}},{key:"getVpaidStatus",value:function(){return{st:this.vpaidStatus}}},{key:"getPrice",value:function(e){if(!this.stopped){var t=this.tag.vpaidWrapperData&&this.tag.vpaidWrapperData.vastPrice?this.tag.vpaidWrapperData.vastPrice:this.tag.price;if(t||void 0!==this.store.get("dftgprc"))if(e){for(var i,e=t,n=JSON.stringify(e),r="",o=0;o<n.length;o++)i=o%"PlAyER".length,r+=String.fromCharCode(n[o].charCodeAt(0).toString(10)^"PlAyER"[i].charCodeAt(0).toString(10));try{r=btoa(r)}catch(e){return!1}return r}else return t}return""}},{key:"_getAdSettingValue",value:function(e){return this.adSettings&&this.adSettings.hasOwnProperty(e)?this.adSettings[e]:void 0}},{key:"_extractWinningPrice",value:function(){var e;this._getAdSettingValue("extwnprc")&&(e=this._getAdSettingValue("wnprcfld"),(e=this.adEvents.trackingPixelManager.extractWinningPrice(e)).found)&&(this.adElasticLogger.logWinningPrice(e),this.adEvents.updatePlayerDAST(Zr,{wp:e}))}},{key:"getVpaidData",value:function(e){if(this.stopped)return{};this.tag.nas&&(this.tag.nas.isClickable=void 0!==this.tag.nas.isClickable?this.tag.nas.isClickable:this._isNativeAdSettingsClickable());var t=this.vpaidHandler.getAdWidth()||this.adEvents.getFromPlayerDAST(Jt.vastWidth),i=this.vpaidHandler.getAdHeight()||this.adEvents.getFromPlayerDAST(Jt.vastHeight);return this.clickThruUrl=this.landingPageUrl,{adjacency:this.tag.adjacencyAd,advId:this.tag.advId,advType:this.tag.advType,backfill:this.tag.priority===this.store.get("bfprty"),brand:this.tag.brand,campaignId:this.tag.campaignId,costModel:this.tag.cstmdl,cpcv:this.tag.isCPCV,creativeId:this.tag.creativeId,dp:this.tag.dp,itemType:this.tag.itemType,lineItem:this.tag.lineItemId,price:this.getPrice(e),pubId:this.tag.pubId,replayable:this.isReplayable,rv:this.tag.requiredViewability,singleAd:this.tag.singleAd,vpaidStatus:this.getVpaidStatus(),wfSequence:this.tag.sequenceId,wfTagId:this.tag.wfIndex,adNativeSettings:function(e){if(e)return Object.entries(e).reduce(function(e,t){var t=_s(t,2),i=t[0],t=t[1];return ke(t)||(e[i]=t),e},{})}(null==(e=this.tag)?void 0:e.nas),adWidth:t||0,adHeight:i||0,supportVerticalVideo:this.isVerticalVideoSupported,vastClickThruLink:this.landingPageUrl,eventTrackers:this._getUnitEventTrackers(),supportVideoCurrentTimeEvents:!(!this.vpaidHandler||!this.vpaidHandler.activeVideoElement),duration:this.vpaidHandler&&this.vpaidHandler.activeVideoElement?this.vpaidHandler.getActiveVideoElementDuration():null,earlySrcVPAID:this.earlySrcVPAID,startTimestamp:this.startTimestamp,hip:!!this.tag.hip,allowSlider:!!this.tag.alwsldr}}},{key:"_isNativeAdSettingsClickable",value:function(){var e=this.tag.nas.link||this.landingPageUrl;return void 0!==e&&""!==e}},{key:"_getUnitEventTrackers",value:function(){var i=this,e=this.store.get("untetrk")||[],n={};return e.forEach(function(e){var t=i.adEvents.trackingPixelManager.getPixels(e);0<t.length&&(n[e]=t)}),n}},{key:"skipAd",value:function(){this.stopped||(this.vpaidHandler.skipAd(),this.emit("adSkipped"))}},{key:"getHandlerOptions",value:function(){return this.handlerOptions}},{key:"getVpaidLog",value:function(){return this.adElasticLogger.vpaidLog}},{key:"_setVideoControlsState",value:function(e){!this.stopped&&this.videoControls&&this.videoControls.setState(e)}},{key:"_resetVideoControls",value:function(){this._setVideoControlsState({preventAdTicker:""!==this.getVideoUrl(),isMuted:!0})}},{key:"triggerClick",value:function(){this.tag.nas&&this._handleVpaidEvents(f.a.AdClickThru,{eventData:{url:this.landingPageUrl,playerHandles:!0}})}},{key:"getLocalTarget",value:function(){return this.adView.placement}},{key:"_firePixel",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return t.adDuration=1e3*(this.externalPlayerItem?this.getExternalAdDuration():this.adView.videoTag.duration||0),this.adEvents.firePixel(e,t,this._isDelayedImpressionByMoat(),i)}}])&&Os(e.prototype,t),i&&Os(e,i),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Qs(e){return(Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ks(e,t,i){return(t=Xs(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ys(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xs(n.key),n)}}function Xs(e){e=function(e,t){if("object"!=Qs(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=Qs(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==Qs(e)?e:String(e)}var D="function",R="prop",Js="tag",Zs="object",$s="adView",ea="adElasticLogger",ta="adEvents",ia=function(){function i(e){var t=this;if(this instanceof i)return this.interface={},this.vpaidWrapper=e,this.members=[{name:"dontDie",type:D},{name:"restartAd",type:D},{name:"emit",type:D},{name:"getVpaidData",type:D},{name:"on",type:D},{name:"off",type:D},{name:"pauseAd",type:D},{name:"resumeAd",type:D},{name:"resizeAd",type:D},{name:"mute",type:D},{name:"unmute",type:D},{name:"toggleIframeContentDisplay",type:D},{name:"stop",type:D},{name:"skipAd",type:D},{name:"triggerClick",type:D},{name:"isCPCV",type:R},{name:"adTarget",type:$s,viewEl:"placementWrapper"},{name:"hadImpression",type:R},{name:"isBf",type:R},{name:"hasAdChoices",type:R},{name:"type",type:R},{name:"localTarget",type:$s,viewEl:"placement"},{name:"pwov",type:R},{name:"clickThruUrl",type:R},{name:"adVolume",type:R},{name:"isReplayable",type:R},{name:"tag",type:Js},{name:"playerDAST",type:ta},{name:"vpaidLog",type:ea}],this.memberConverter=Ks(Ks(Ks(Ks(Ks(Ks(Ks({},D,this._convertFunction.bind(this)),R,this._convertProp.bind(this)),Js,this._convertTag.bind(this)),Zs,this._convertObject.bind(this)),$s,this._convertAdView.bind(this)),ea,this._convertAdElasticLogger.bind(this)),ta,this._convertAdEvents.bind(this)),this.vpaidWrapper.once("vpaidCleaned",function(){t._stop()}),this._appendMembersToInterface(),this.interface;throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=i,(t=[{key:"_appendMembersToInterface",value:function(){var t=this;this.members.forEach(function(e){t.memberConverter[e.type](e.name,e.viewEl)})}},{key:"_convertFunction",value:function(e){this.interface[e]=this.vpaidWrapper[e].bind(this.vpaidWrapper)}},{key:"_convertProp",value:function(e){var t=this;Object.defineProperty(this.interface,e,{get:function(){if(!t.stopped)return t.vpaidWrapper[e]}})}},{key:"_convertTag",value:function(e){var t=this;Object.defineProperty(this.interface,e,{get:function(){if(!t.stopped)return Object.assign(t.vpaidWrapper[e],t.vpaidWrapper[e].vpaidWrapperData)}})}},{key:"_convertObject",value:function(e){this.interface[e]=this.vpaidWrapper[e]}},{key:"_convertAdView",value:function(e,t){this.interface[e]=this.vpaidWrapper.adView[t]}},{key:"_convertAdElasticLogger",value:function(e){this.interface[e]=this.vpaidWrapper.adElasticLogger[e]}},{key:"_convertAdEvents",value:function(e){this.interface[e]=this.vpaidWrapper.adEvents[e]}},{key:"_stop",value:function(){this.stopped=!0,this.vpaidWrapper=this.members=this.memberConverter=this.interface=void 0}}])&&Ys(e.prototype,t),n&&Ys(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function na(e){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ra(e,t){var i,n,r,o,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return i=e.done,e},e:function(e){n=!0,r=e},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw r}}};if(Array.isArray(e)||(s=function(e,t){var i;if(e)return"string"==typeof e?oa(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?oa(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oa(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function sa(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aa(n.key),n)}}function aa(e){e=function(e,t){if("object"!=na(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=na(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==na(e)?e:String(e)}var M,da=d(7),la="pagehide",ua="beforeunload",x={VPAID_CLEANED:"vpaidCleaned",CLEAR_GET_AD_TIMEOUT:"clearGetAdTimeout",TRIGGER_EVENT:"triggerEvent",TERMINATE_PPD:"terminatePPD",QUEUE_CHANGE:"queueChange"},ca=function(){function r(e){var t,i,n;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");t=this,n=function(e){return e.t===Le.IMA},(i=aa(i="_isIMATag"))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,da.mixin(this),this.store=e.store,this.config=e.config,this.options=e.options,this.target=e.target,this.time=(new Date).getTime(),this.sequenceId=((new Date).getTime()+"").substring(3,11),this.loops=0,this.stopped=!1,this.started=!1,this.schedule=[],this.delayedAdsSchedule=[],this.playingQueue=[],this.timedTimeout=0,this.waterfall={},this.adSlots=1,this.filledSlots=0,this.adIsPlaying=!1,this.shouldBlockRv1Ads=!1,this.debugTracker=new l("Manager"),this.droppableTypes=this.store.get("drpbletps")||[],this.shouldFirePpdFlowPixel=ee(this.store.get("frppdfpxl")),this.queueSize=this.store.get("queue_size")||10,this.shouldCleanAdOnImpression=this.store.get("cleanAdOnImp"),this.store.on("stop",this.stop.bind(this)),this.store.on(g.outer.EmitQueueStatus,this._emitQueueStatus.bind(this,"queueStatus")),this.store.on("navigatorConnectionChange",this._onNavigatorConnectionChange.bind(this)),this._onNavigatorConnectionChange(),this.queueStatus=new gt(this.store),this.dontTrimMp4=this.store.get("novdtrm"),this.maxBackfillDelayItems=this.store.get("mxbckflldlyitms"),this.maxBackfillDelayItems&&(this.backfilldelayTime=this.store.get("bckflldlyms"),this.backfillPriority=this.store.get("bfprty")),this.continueGetAdFlow=this.store.get("cntgtad"),this.immediateStartDelayLoadAdProperties=this.store.get("startImmediateDelayLoad")||{},this._registerToUnloadEvent()}var e,t,i;return e=r,(t=[{key:"_createDelayedVpaidWrapper",value:function(t){var i=this,n=t.predictId===xe.ADX?this.delayedAdsSchedule.find(function(e){return i._isIMATag(e.item)}):this.delayedAdsSchedule.find(function(e){return i._isAdPropertiesMatch(t.adProperties,e.item,!0)});n&&(this._createVpaidWrapper(n.item,n.tagId,t),this.delayedAdsSchedule=this.delayedAdsSchedule.filter(function(e){return e.tagId!==n.tagId}))}},{key:"_trigger",value:function(e,t,i){var n;this._handleAllEvents({type:e,dispatcher:t}),this.store.emit(e,t),!t.working&&e!==f.a.AdImpression||(n={type:e,dispatcher:t},e===f.a.AdImpression&&(n.tag=t.tag,this._moveItemFromInitialQueueToPlayingQueue(n.tag,t)),e===f.a.AdVideoComplete&&(n.tag=t.tag,this._removeItemFromPlayingQueue(n.tag)),n.vpaidReady=this.getVpaidReadyCount(),n.qsize=this.schedule.length,n.dp=t&&t.tag?t.tag.dp:"na",n.clickThru={url:i?i.url:"",playerHandles:i&&!1!==i.playerHandles},this.emit(e,n))}},{key:"getVpaidReadyCount",value:function(){var t=0;return this.schedule.map(function(e){e&&e.vpaidWrapper&&"ready"===e.vpaidWrapper.status&&t++}),t}},{key:"getVpaidReadyImpressionCount",value:function(){var t=0;return this.schedule.map(function(e){e&&e.vpaidWrapper&&e.vpaidWrapper.hadImpression&&t++}),t}},{key:"_subscribeToVpaidWrapper",value:function(e){this.stopped||(e.on(x.VPAID_CLEANED,this._onVpaidCleaned.bind(this,e)),e.on(x.CLEAR_GET_AD_TIMEOUT,this._cleanGetAdTimeout.bind(this)),e.on(x.TRIGGER_EVENT,this._trigger.bind(this)),e.on(x.TERMINATE_PPD,this._terminatePPDFlow.bind(this)),e.on(x.QUEUE_CHANGE,this._emitQueueStatus.bind(this)),e.subscribe(this._handleError.bind(this),f.a.AdError))}},{key:"_handleAllEvents",value:function(e){var t=this,i=this.store.get("max_ready_vpaid")||2;e.type!==f.a.AdVideoStart&&e.type!==f.a.AdImpression&&e.type!==f.a.AdPlaying||!e.dispatcher.isPlaying||this._trigger("viewAdPlayer",e.dispatcher.tag),e.type===f.a.AdLoaded&&this.shouldPlayWhenAvialable&&!this.store.get("evtbsschdl")&&(setTimeout(function(){t.playFromQueue(t.shouldPlayWhenAvialable,t.options||{})},2),e.dispatcher&&e.dispatcher.tag,this.shouldPlayWhenAvialable=!1),e.type===f.a.AdImpression&&(this.getVpaidReadyImpressionCount()>=i&&ee(parseInt(this.store.get("frdmrvhpxls")))&&ve(fe(h.maxReadyVpaidHit,this.store)),i=!0,e.dispatcher.options&&e.dispatcher.options.getAdContext&&(e.dispatcher.gotAd=!(i=!1),this.debugTracker.info("gotAd",e.dispatcher,{color:"#5EB9FF"}),e.dispatcher.options.getAdContext.getAdCallback(new ia(e.dispatcher))),u(e.dispatcher.vpaidLog,"getAdContexIsEmpty",{empty:i}))}},{key:"_runNextAd",value:function(){}},{key:"_handleError",value:function(e){e=e.dispatcher;this.adIsPlaying&&e&&e.isStarted&&!e.hadImpression&&!this.store.get("evtbsschdl")&&this.playFromQueue(this.shouldPlayWhenAvialable,e.options||{})}},{key:"_isAdvDelayLoad",value:function(e){return!!e.requiredViewability&&!!Object.keys(this.immediateStartDelayLoadAdProperties).length&&this._isAdPropertiesMatch(this.immediateStartDelayLoadAdProperties,e,!0)}},{key:"_shouldDelayIMATag",value:function(e){return this._isIMATag(e)&&this.store.get("delayAdxLoad")&&!0===e.requiredViewability}},{key:"initVpaidInQue",value:function(){if(!this.stopped)for(var e,t=this.schedule,i={},n=0;n<t.length;n++)i=t[n],e="".concat(n,"-").concat(i.waterfallTagId),i.vpaidWrapper||(this._shouldDelayIMATag(i)||this._isAdvDelayLoad(i)?this.delayedAdsSchedule.push({item:i,tagId:e}):this.maxBackfillDelayItems&&i.priority===this.backfillPriority?i.backfillDelay=setTimeout(this._createVpaidWrapper.bind(this,i,e),this.backfilldelayTime):this._createVpaidWrapper(i,e))}},{key:"_createVpaidWrapper",value:function(e,t,i){this._setBackfillDelay(e),e.sequenceId=e.wfIndex,e.vpaidWrapper=new qs({tag:e,config:this.config,tagid:t,target:this.target,store:this.store,options:i,isAdvDelayLoad:this._isAdvDelayLoad(e)}),e.vpaidWrapper&&this._subscribeToVpaidWrapper(e.vpaidWrapper)}},{key:"_setBackfillDelay",value:function(e){e.backfillDelay&&(e.backfillDelay=window.clearTimeout(e.backfillDelay),e.isBackfillDelayed=!0)}},{key:"_updateCostModel",value:function(e){var t=new Et(this.store),i=e.getValueByKey("cstmdl");void 0===i&&(i=e.cstmdl),e.cstmdl=i,e.isCPCV=t.isCPCV(e.cstmdl)}},{key:"_onVpaidCleaned",value:function(e){this.cleanQueue(this.queueSize),this.continueGetAdFlow&&e.options&&e.adStarted&&!e.hadImpression&&this.getAdFromQueue(e.options),this.queueStatus.onScheduleChange(this.schedule)}},{key:"unsubscribeFromVpaid",value:function(e){!this.stopped&&e&&(e.unsubscribe(null,f.a.AdError),e.unsubscribe(null,f.a.AdStopped),e.unsubscribe(null,f.a.AdSkipped),e.unsubscribe(null,f.a.AdImpression),e.unsubscribe(null,f.a.AdSkippableStateChange),e.unsubscribe(null,f.a.AdSizeChange),e.unsubscribe(null,f.a.AdLinearChange),e.unsubscribe(null,f.a.AdDurationChange),e.unsubscribe(null,f.a.AdExpandedChange),e.unsubscribe(null,f.a.AdVolumeChange),e.unsubscribe(null,f.a.AdVideoStart),e.unsubscribe(null,f.a.AdVideoFirstQuartile),e.unsubscribe(null,f.a.AdVideoMidpoint),e.unsubscribe(null,f.a.AdVideoThirdQuartile),e.unsubscribe(null,f.a.AdVideoComplete),e.unsubscribe(null,f.a.AdClickThru),e.unsubscribe(null,f.a.AdInteraction),e.unsubscribe(null,f.a.AdUserAcceptInvitation),e.unsubscribe(null,f.a.AdUserMinimize),e.unsubscribe(null,f.a.AdUserClose),e.unsubscribe(null,f.a.AdPaused),e.unsubscribe(null,f.a.AdPlaying),e.unsubscribe(null,f.a.AdLog))}},{key:"_shouldDropAd",value:function(e,t){return-1<this.droppableTypes.indexOf(e)&&this._isItemOfType(t,e)&&!(Ve(t)&&De(t))}},{key:"_isItemOfType",value:function(e,t){return e.hasOwnProperty(t)&&e[t]}},{key:"_isPPDPreventingCleanup",value:function(){return this.store.get("isPPD")}},{key:"cleanQueue",value:function(o,r){var s,a,d=this;this._isPPDPreventingCleanup()||(this.schedule.map(function(e,t){var i,n;e&&e.vpaidWrapper&&!e.vpaidWrapper.working&&(i=!1,"error"===e.vpaidWrapper.status||"stopped"===e.vpaidWrapper.status?(i=!0,n="error"===e.vpaidWrapper.status?O.VAST_ERROR:f.a.AdError):r&&d._shouldDropAd(r,e)&&!e.vpaidWrapper.hadImpression&&(i=!0,n=O.AD_DROPPED),i)&&(d.queueStatus.onItemRemovedFromQueue(e),e.vpaidWrapper._status=e.vpaidWrapper.status,d.unsubscribeFromVpaid(d.schedule[t].vpaidWrapper),d.schedule[t].vpaidWrapper.stop("cleanExpierd",n),d.schedule[t]&&(d.schedule[t].vpaidWrapper=null),d.schedule[t]=void 0)}),this.schedule=this.schedule.filter(function(e){return e}),this.schedule=vt.a.sort(this.schedule,this.store),this.schedule.length>o&&(s=this.config.creatives.ADTO||this.store.get("expirationTime")||Me,a=this.store.get("trmrdyvpaid"),this.schedule.map(function(e,t){var i,n,r;!d.schedule[t]||e.vpaidWrapper.working||!a&&"ready"===e.vpaidWrapper.status||(r=Date.now()-d.schedule[t].vpaidWrapper.created,e&&(t<d.schedule.length-o||s<r)&&(d.queueStatus.onItemRemovedFromQueue(e),d.unsubscribeFromVpaid(d.schedule[t].vpaidWrapper),r=s<r?(n="queueExpired",O.QUEUE_EXPIRED):(n="queueTrimmed",O.QUEUE_TRIMMED),d._canTrim(n,e))&&(null!=(i=(e=d.schedule[t].vpaidWrapper).stop)&&i.call(e,n,r),d.schedule[t]=void 0))})),this.schedule=this.schedule.filter(function(e){return e}))}},{key:"_moveItemFromInitialQueueToPlayingQueue",value:function(e,t){var i;this.shouldCleanAdOnImpression&&(i=this._getIndexFromArray(this.schedule,e.lineItemId),this.queueStatus.onItemRemovedFromQueue(e),-1<i&&this.schedule.splice(i,1),this.playingQueue.push(t))}},{key:"_removeItemFromPlayingQueue",value:function(e){this.shouldCleanAdOnImpression&&-1<(e=this._getIndexFromArray(this.playingQueue,e.lineItemId))&&this.playingQueue.splice(e,1)}},{key:"_getIndexFromArray",value:function(e,t){return e.findIndex(function(e){return(e.lineItemId||e.tag.lineItemId)===t})}},{key:"_canTrim",value:function(e,t){return"queueTrimmed"!==e||!(t.vpaidWrapper&&"mp4"===t.vpaidWrapper.type&&this.dontTrimMp4)}},{key:"_setPPDpriorityIfPPD",value:function(e){e.advType===y.PUBLISHER_DEMAND&&this.store.set("isPPD",!0)}},{key:"_terminatePPDFlow",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];(this.store.get("isPPD")&&e===y.PUBLISHER_DEMAND||t)&&this.store.set("isPPD",!1)}},{key:"_clientPreferPPD",value:function(e){return e&&this.store.get("isPPD")}},{key:"_reportQueueSizeHit",value:function(){ee(parseInt(this.store.get("frdqshpxls")))&&ve(fe(h.queueSizeHit,this.store))}},{key:"fillSchedule",value:function(e){this.schedule.length>this.queueSize&&(this.cleanQueue(this.queueSize),this._reportQueueSizeHit()),this.started=!0,this.stopped=!1;for(var t={},i=0,n=this.config.creatives,r=(n.ADTO=1<parseInt(n.ADTO)?parseInt(n.ADTO):60,n.ADTO=n.ADTO<1e3?1e3*n.ADTO:n.ADTO,this.adSlots=parseInt(n.B2B)&&1<parseInt(n.B2B)?parseInt(n.B2B):1,n.DEFAULTTAGTIMEOUT<1e3?1e3*n.DEFAULTTAGTIMEOUT:n.DEFAULTTAGTIMEOUT),i=0;i<e.tags.length;i++)this._setPPDpriorityIfPPD(e.tags[i]),this._shouldInsertToQueue(e.tags[i])&&((t=e.tags[i]).active=!1,t.offset=0,t.tagStart=0,t.tagTimeout=r,t.queueNumber=0,t.ADTO=n.ADTO,t.vpaidWrapper=!1,t.tagEnd=+t.tagStart+ +t.tagTimeout,t.wfStats=e.data,this._updateCostModel(t),this.store.get("frstlk")&&this._updateItemFirstLook(t),this.schedule.push(t));this.time=(new Date).getTime(),this.initVpaidInQue(),this.store.set("queueLength",this.schedule.length),this.store.set("vpaidReadyCount",this.getVpaidReadyCount()),this.queueStatus.onScheduleChange(this.schedule)}},{key:"_shouldInsertToQueue",value:function(e){return!(this.maxBackfillDelayItems&&e.priority===this.backfillPriority&&!(e.priority===this.backfillPriority&&this._getBackfillCount()<this.maxBackfillDelayItems)||this.shouldBlockRv1Ads&&e.requiredViewability)}},{key:"_updateItemFirstLook",value:function(e){e.flad&&(this.store.get("first_look_ad_loaded")?(e.flad_delay=e.flad,delete e.flad):this._startFladTimeout(e.flad))}},{key:"_onPushItems",value:function(e){var t=this;e.forEach(function(e){t.schedule.push(e),e.vpaidWrapper.getHandlerOptions().onReady()}),this.store.set("queueLength",this.schedule.length),this.store.set("vpaidReadyCount",this.getVpaidReadyCount()),this.queueStatus.onScheduleChange(this.schedule)}},{key:"_startFladTimeout",value:function(e){this.store.set("first_look_ad_loaded",e),this.fladTimeout=setTimeout(this._onFladTimeout.bind(this),1e3*e)}},{key:"_onFladTimeout",value:function(){for(var e=null,t=0;t<this.schedule.length;t++)if((e=this.schedule[t]).flad_delay)return e.flad=e.flad_delay,delete e.flad_delay,void this._startFladTimeout(e.flad);this.store.set("first_look_ad_loaded",!1),this.store.emit("fladInactive")}},{key:"stop",value:function(){if(!this.stopped){this.stopped=!0,window.clearTimeout(this.timedTimeout);for(var e,t,i=0;i<this.schedule.length;i++)this.schedule[i].backfillDelay?window.clearTimeout(this.schedule[i].backfillDelay):null!=(e=(t=this.schedule[i].vpaidWrapper).stop)&&e.call(t,"playerClosed",O.PLAYER_CLOSED);this._unregisterFromUnloadEvent()}}},{key:"managerEnd",value:function(){}},{key:"playFromQueue",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this.store.get("isIdleMode")&&!this.stopped){for(var i=Date.now(),n=(this.store.set("playFromQueue",i),this.getVpaidReadyCount()),r=(this.store.get("first_look")||this.store.get("first_look_ad_loaded")||(this.schedule=vt.a.sort(this.schedule,this.store)),this.config.creatives.ADTO,!1),o=this._getItemScores(),s=(this._getItemDps(),this.schedule.length-1);0<=s;s--){var a=this.schedule[s];a&&(this._setItemScores(a,s,o),"ready"!==a.vpaidWrapper.status||a.vpaidWrapper.working||a.vpaidWrapper.isStarted||r||this.store.get("first_look_ad_loaded")&&!a.flad||(this.store.set("playFromQueueFound",i),a.vpaidWrapper.workingVpaid=!0,this.store.set("ad_controls",!1!==a.getValueByKey("ad_controls")),a.vpaidWrapper.working=!0,a.vpaidWrapper.isPlaying=!0,r=this.adIsPlaying=!0,a.vpaidWrapper.startAd(t),u(a.vpaidWrapper.vpaidLog,"startFromQ",{score:a.score})))}this.store.get("run_wf_when_empty")&&0===n&&this.store.emit("playFromEmptyQueue")}}},{key:"bringVpaidToFront",value:function(){if(this.shouldCleanAdOnImpression)0<this.playingQueue.length&&this.playingQueue[0].bringToFront();else for(var e=this.schedule.length-1;0<=e;e--){var t=this.schedule[e];if(t&&t.vpaidWrapper.workingVpaid){t.vpaidWrapper.bringToFront();break}}}},{key:"_getItemScores",value:function(){for(var e=[],t=this.schedule.length-1;0<=t;t--){var i=this.schedule[t];i&&e.push(i.score)}return e}},{key:"_getItemDps",value:function(){for(var e=[],t=this.schedule.length-1;0<=t;t--){var i=this.schedule[t];i&&e.push(i.dp)}return e}},{key:"_setItemScores",value:function(e,t,i){e.vpaidWrapper&&e.vpaidWrapper.vpaidLog&&e.vpaidWrapper.vpaidLog.data&&(e.vpaidWrapper.vpaidLog.data.itemScore=e.score,i)&&u(e.vpaidWrapper.vpaidLog,"itemScores",{index:t,scores:i},!1,!1)}},{key:"resizeAd",value:function(e,t,i){if(!this.stopped)if(this.config.creatives.PLAYER_WIDTH=this.config.width=parseInt(e),this.config.creatives.PLAYER_HEIGHT=this.config.height=parseInt(t),this.config.creatives.VIEW_MODE=this.config.viewMode=i,this.shouldCleanAdOnImpression){var n,r=ra(this.playingQueue);try{for(r.s();!(n=r.n()).done;)n.value.callVpaidMethod("resizeAd",[e,t,i],0)}catch(e){r.e(e)}finally{r.f()}}else for(var o=0;o<this.schedule.length;o++)this.schedule[o].vpaidWrapper&&!this.schedule[o].vpaidWrapper.stopped&&this.schedule[o].vpaidWrapper.callVpaidMethod("resizeAd",[e,t,i],0)}},{key:"setAdVolume",value:function(e,t){if(!this.stopped){if(e=1<e?e/100:e,isNaN(parseFloat(e)))return!1;if(e=parseFloat(e),t||(this.config.creatives.VOLUME=e),this.config.creatives.MUTED=0==e,this.shouldCleanAdOnImpression){var i,n=ra(this.playingQueue);try{for(n.s();!(i=n.n()).done;)i.value.setAdVolume(e)}catch(e){n.e(e)}finally{n.f()}}else for(var r=0;r<this.schedule.length;r++)this.schedule[r].vpaidWrapper&&!this.schedule[r].vpaidWrapper.stopped&&this.schedule[r].vpaidWrapper.workingVpaid&&this.schedule[r].vpaidWrapper.setAdVolume(e)}}},{key:"callWorkingVpaid",value:function(e,t,i){if(!this.stopped)if(this.shouldCleanAdOnImpression){var n,r=ra(this.playingQueue);try{for(r.s();!(n=r.n()).done;)return n.value.callVpaidMethod(e,t,i)}catch(e){r.e(e)}finally{r.f()}}else for(var o=0;o<this.schedule.length;o++){var s=this.schedule[o].vpaidWrapper;if(s&&s.workingVpaid)return s.callVpaidMethod(e,t,i)}}},{key:"getAd",value:function(i){var t=this,n=(this.store.incr("getAdData.count"),this),e=(this.debugTracker.info("getAd",i||"empty getAd",{color:"#5EB9FF"}),this.store.set("ppdAdImpressionTimeoutInMS",i.ppdAdImpressionTimeout),new Promise(function(e,t){e={getAdCallback:e};(i=i||{}).id=(new Date).getTime(),i.getAdContext=e,i.getAdRetries=0,i.getAdContext.getAdTimeout=setTimeout(function(){n.cancelGetAd(i),i.getAdContext=void 0,t({name:"error",message:"couldn't find a suitable ad to play"})},1e3*(i.getAdTimeout||n.store.get("get_ad_timeout_seconds"))),n.getAdFromQueue(i)}));return e.cancel=function(e){t.cancelGetAd(i,e),t.debugTracker.info("getAd","getAd cancelled!",{color:"#5EB9FF"})},e}},{key:"cancelGetAd",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=(this.store.decr("getAdData.count"),this._cleanGetAdTimeout(t),t.getAdContext=void 0,this.schedule.find(function(e){return e.vpaidWrapper.getAdId===t.id}));!i||i.vpaidWrapper.stopped||i.vpaidWrapper.hadImpression||i.vpaidWrapper.stop(e)}},{key:"_cleanGetAdTimeout",value:function(e){e.getAdContext&&e.getAdContext.getAdTimeout&&(clearTimeout(e.getAdContext.getAdTimeout),e.getAdContext.getAdTimeout=void 0)}},{key:"_skipItemByPublisherPriority",value:function(e,t){return!(t&&e.advType===y.PUBLISHER_DEMAND||!t||e.advType===y.PUBLISHER_DEMAND)}},{key:"getAdFromQueue",value:function(e){if(!this.store.get("isIdleMode")&&!this.stopped&&(e=e||{})&&e.getAdContext&&(!e.requiredViewability||!document.hidden))if(e.predictId===xe.ADX&&this.store.get("delayAdxLoad")||e.predictId===xe.IMMEDIATE_START)this._createDelayedVpaidWrapper(e);else{this.store.get("first_look")||this.store.get("first_look_ad_loaded")||(this.schedule=vt.a.sort(this.schedule,this.store));for(var t=!1,i=this._getItemScores(),n=this._clientPreferPPD(e.preferPPD),r=this.schedule.length-1;0<=r;r--){var o=this.schedule[r];if(this._updateStatusesOnGetAd(o,e),this._setItemScores(o,r,i),this._reportIfADXExclude(o,e),this.isViewabilityMatch(o,e)&&this.checkAdProperties(o,e.adProperties,e.excAdProperties)&&!this._skipItemByPublisherPriority(o,n)&&!this._isViolateImmediateStartPredictorConditions(o)&&this._canPullItem(o)){this._pullItemFromQueue(o,e),t=!0;break}}this.store.get("run_wf_when_empty")&&0==this.getVpaidReadyCount()&&(this.store.emit("playFromEmptyQueue",e.forceWf),e.forceWf=!1),t||(this.nextAdFromQueue=setTimeout(this.getAdFromQueue.bind(this,e),1e3))}}},{key:"_isViolateImmediateStartPredictorConditions",value:function(e){var t;return!!this.store.get("isImmediateStartPredictorEnabled")&&!(!(t=null==(t=this.immediateStartDelayLoadAdProperties)?void 0:t.advId)||!t.includes(e.advId))}},{key:"_reportIfADXExclude",value:function(e,t){var i,n=this,r=t.excAdProperties,t=t.extraOptions,o=e.vpaidWrapper;(null==(i=o.isIMATag)?void 0:i.call(o))&&(null==t?void 0:t.adxPubVideoPreventing)&&n._isAdPropertiesMatch(r,e,!0)&&null!=(i=e.vpaidWrapper.adEvents)&&i.onEvent(O.PUB_VIDEO_PREVENTING)}},{key:"_canPullItem",value:function(e){return"ready"===e.vpaidWrapper.status&&!e.vpaidWrapper.working&&!e.vpaidWrapper.isStarted&&(!this.store.get("first_look_ad_loaded")||e.flad)}},{key:"_pullItemFromQueue",value:function(e,t){e.vpaidWrapper.working=!0,e.vpaidWrapper.isPlaying=!0,this.adIsPlaying=!0,e.vpaidWrapper.bringToFront(),"mp4"===e.vpaidWrapper.type&&e.vpaidWrapper.vpaidHandler.logVideoBuffer("StartFromQ"),this._clientPreferPPD(t.preferPPD)&&e.advType===y.PUBLISHER_DEMAND&&this._sendPpdPixel(),e.vpaidWrapper.startAd(t),u(e.vpaidWrapper.vpaidLog,"startFromQ",{score:e.score,adx:e.adx}),t.getAdRetries++}},{key:"_updateStatusesOnGetAd",value:function(e,t){e.vpaidWrapper&&e.vpaidWrapper.adElasticLogger&&!e.vpaidWrapper.gotAd&&e.vpaidWrapper.updateStatusesOnGetAd(t)}},{key:"isViewabilityMatch",value:function(e,t){return!(!e||!e.vpaidWrapper)&&(void 0===t.requiredViewability||(t.requiredViewability?e.requiredViewability:!e.requiredViewability))}},{key:"checkAdProperties",value:function(e,t,i){return this._isAdPropertiesMatch(t,e,!0)&&this._isAdPropertiesMatch(i,e,!1)}},{key:"_isAdPropertiesMatch",value:function(e,t,i){if(e)for(var n in e){n=this._isPropertyMatch(n,e[n],t);if(n&&!i||!n&&i)return!1}return!0}},{key:"_isPropertyMatch",value:function(e,t,i){for(var n,r=0;r<t.length;r++)if(n=i,e.split("/").reduce(function(e,t){return e[t]},n)==t[r])return!0;return!1}},{key:"isActivePausedAd",value:function(){for(var e=0;e<this.schedule.length;e++){var t=this.schedule[e];if(t&&t.vpaidWrapper&&t.vpaidWrapper.isPlaying&&!t.vpaidWrapper.isUnPaused)return!0}return!1}},{key:"isWorkingVpaidItem",value:function(t){var i=!1;return this.schedule.map(function(e){e&&e.vpaidWrapper&&e.vpaidWrapper==t&&e.vpaidWrapper.working&&(i=!0)}),i}},{key:"_saveCountersToStore",value:function(e,t,i){!t&&this.store&&i&&this.store.set(e,i)}},{key:"callAllWorkingVpaids",value:function(t){if(!this.shouldCleanAdOnImpression)return this.schedule.map(function(e){if(e.vpaidWrapper&&!e.vpaidWrapper.stopped&&e.vpaidWrapper.workingVpaid)return t(e.vpaidWrapper)});var e,i=ra(this.playingQueue);try{for(i.s();!(e=i.n()).done;){var n=e.value;return t(n)}}catch(e){i.e(e)}finally{i.f()}}},{key:"play",value:function(){this.callAllWorkingVpaids(function(e){return e.resumeAd()})}},{key:"pause",value:function(){this.callAllWorkingVpaids(function(e){return e.pauseAd()})}},{key:"_emitQueueStatus",value:function(e){this.queueStatus.onScheduleChange(this.schedule,e)}},{key:"_getBackfillCount",value:function(){var t=this,i=0;return this.schedule.map(function(e){e&&e.priority===t.backfillPriority&&i++}),i}},{key:"getPlayerDAST",value:function(){for(var e=this.callAllWorkingVpaids(function(e){return null==(e=e.adEvents)?void 0:e.getFromPlayerDAST()}),t=0;t<e.length;t++)if(e[t])return e[t];return""}},{key:"_onNavigatorConnectionChange",value:function(){var e=this.store.get("navigatorConnection")||{},t=this.store.get("rmvrvlwntwrk"),i=this.store.get("dwnlnktrshld"),e=e.downlink;i&&t&&void 0!==e&&(e<i?(this.shouldBlockRv1Ads=!0,this._removeRv1AdsFromQueue()):this.shouldBlockRv1Ads=!1)}},{key:"_removeRv1AdsFromQueue",value:function(){this.schedule=this.schedule.filter(function(e){return!e.requiredViewability})}},{key:"getClickedAd",value:function(){var t=void 0;return this.callAllWorkingVpaids(function(e){e.isClicked&&(t=e)}),t}},{key:"reportQueueStatus",value:function(){this.queueStatus&&this.queueStatus.emit(g.outer.EmitQueueStatus)}},{key:"_sendPpdPixel",value:function(){this.shouldFirePpdFlowPixel&&ve(fe(h.ppdAdIsPlaying,this.store))}},{key:"_isMobileiOS",value:function(){return this.store.get("isMobile")&&this.store.get("wurfl.os.name")===p}},{key:"_registerToUnloadEvent",value:function(){this.unloadEvent=this._isMobileiOS()?la:ua,this.unloadCallback=this._onPageUnload.bind(this),window.addEventListener(this.unloadEvent,this.unloadCallback)}},{key:"_onPageUnload",value:function(){var e,t,i=ra(this.schedule.concat(this.playingQueue).concat(this.delayedAdsSchedule));try{for(i.s();!(t=i.n()).done;){var n,r=t.value;null!=(n=(r.vpaidWrapper||r).adEvents)&&n.onEvent(O.UNLOAD_PAGE)}}catch(e){i.e(e)}finally{i.f()}null!=(e=this.options)&&null!=(e=e.oppsula)&&e.destroy()}},{key:"_unregisterFromUnloadEvent",value:function(){this.unloadEvent&&this.unloadCallback&&window.removeEventListener(this.unloadEvent,this.unloadCallback)}}])&&sa(e.prototype,t),i&&sa(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}(),ha={WF_PARAMS:{VIEW_MODE:"normal",REFERRER:"",VIDEO_URL:"",DOMAIN:"",PUBID:0,TAGID:0,VPD:0,VPTD:0,AUC_DAST:"",VIDLENGTH:0,KEY_WORDS:"",DESCRIPTION:"",SERVICE:"WhiteLabelBidRequestHandlerServlet",VERTICAL:"",SCHEMA:"vast2-vpaid",TYPE:"application/javascript",PV:"154150.327",RS:1,ST:1,WP:1,PT:5,CIRF:"",SDID:1,STS:0,CB:"",VOLUME:0,TAG:"",PAGE_URL:(M=(M=(M=window).TRC&&window.TRC.isAMP?window.context:M).location?M.location.href:"",encodeURIComponent(M)),TIME_STAMP:"",TITLE:"",MFP:4,ISVIDEO:1,PLMD:2,MINDUR:1,MAXDUR:60,MINBR:1,MAXBR:512,AFBP:!1,ADTO:60,B2B:1,VMT:0,SORTORDERTYPE:0,DEFAULTTAGTIMEOUT:30,OID:"",NOAOP:"",TOTALTIMEOUT:60,CM_DOMAIN:"http://exchange.basebanner.com",OFFSET:0,MODE:"paralel",MUTED:!1,DEBUG:!1,PAUSE_ON_START:!1,PLAYER_WIDTH:0,PLAYER_HEIGHT:0},CONFIG:{waterfall:{},source:"",videoSlotCanAutoPlay:!0,videoSlotControls:!1,vpaid_protect_path:!1,running:!1,inited:!1,stopped:!1,started:!1,target:!1,video:!1,bitrate:512,creatives:{},protectedCreatives:["WP","PV","PT","SDID","CM_DOMAIN","SERVICE"]}};function pa(e){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fa(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=pa(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=pa(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==pa(e)?e:String(e)}(n.key),n)}}var va=d(7),ya=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");va.mixin(this),this.options=e.options,this.store=e.store,this.target=e.target,this.video=e.video,this.stopped=!1,this.isMultiVpaidUnit=this.store.get("isMultiVpaidUnit"),this.playWithoutContainer=this.store.get("noplrcntr"),this.isMobile=this.store.get("isMobile"),this.viewmode="normal",this.adPlaying=!1,this.isAdPlayerVisible=!1,this.volumeBeforeMute=0,this.paused=!1,this._createDebugTracker(),this._normalizeAdParams(),this._createVideoPlayer(),this._init()}var e,i,n;return e=t,(i=[{key:"_createDebugTracker",value:function(){this.debugTracker=new l("ComponentsManager")}},{key:"_normalizeAdParams",value:function(){this.options.vpaidTag=Object.assign({},this.options.tagDefault,this.options.vpaidTag),this.options.vpaidTag.adto=this.options.vpaidTag.ad_timeout,this.options.vpaidTag["player-width"]=this.video.offsetWidth||this.video.width,this.options.vpaidTag["player-height"]=this.video.offsetHeight||this.video.height,this.options.vpaidTag["video-url"]=this.video.name,this.options.vpaidTag.vidlength=parseInt(this.video.duration),this.options.vpaidTag.sts=0,this.options.vpaidTag["vpaid-version"]=this.options.vpaidTag.vpaid_version,this.options.vpaidTag["auc-dast"]=this.options.vpaidTag.auc_dast,this.options.vpaidTag.plmd=this._getPlayMode()}},{key:"_getPlayMode",value:function(){return this.options.vpaidTag.use_as_is?2:0===this.options.vpaidTag.plmd?this.options.vpaidTag.muted?2:1:this.options.vpaidTag.plmd}},{key:"_createVideoPlayer",value:function(){this.playWithoutContainer||(this.videoWrapper=document.createElement("div"),this.videoWrapper.className="".concat(this.target.className," vpaid-handler"),this.videoWrapper.id="0_".concat(this.target.id),this.videoWrapper.style.cssText="".concat(this.target.style.cssText,";position:absolute;top:0;left:0;border:0; z-index:0"),this._registerVideoWrapperEvents(),this.target.appendChild(this.videoWrapper)),this.options.vpaidTag.mute=this.options.vpaidTag.mute||this.options.mute,this.options.height=he(this.store.get("height")),this.options.width=he(this.store.get("width"))}},{key:"_registerVideoWrapperEvents",value:function(){this.store.get("contentClickUrl")&&!this.playWithoutContainer&&this.videoWrapper.addEventListener("click",this._onVideoWrapperClickEvent.bind(this))}},{key:"_onVideoWrapperClickEvent",value:function(e){e.stopPropagation()}},{key:"_init",value:function(){this._initializeConfig(),this._registerEvents(),this._setOppsulaInstance(),this._createWaterfallManager(),this._onWaterfallManagerCreated()}},{key:"_initializeConfig",value:function(){this.config=ha.CONFIG;var e=this._convertConfigToUpperCase();this.config.creatives=Object.assign({},ha.WF_PARAMS,e)}},{key:"_convertConfigToUpperCase",value:function(){var e,t={};for(e in this.options.vpaidTag)t[e.toUpperCase()]=this.options.vpaidTag[e];return t}},{key:"_registerEvents",value:function(){this.store.get("mltads")&&this.store.on("resizeVpaidWrapper",this._onResizeAd.bind(this))}},{key:"_onResizeAd",value:function(e){this.config&&(this.config.width=e.width,this.config.height=e.height)}},{key:"_setOppsulaInstance",value:function(){var e=this.store.get("non_bllb_opps_base_path")||this.store.get("opps_base_path");this.store.set("ms_data",{opps_base_path:e||this.config.creatives.CM_DOMAIN}),this.store.set("oppsula",this.options.oppsula),this.store.emit("oppsulaCreated",this.options.oppsula)}},{key:"_createWaterfallManager",value:function(){this.waterfallManager=new He(this.store),this._setCreativeData(),this.waterfallManager.init(this.config.creatives,this.config.creativeData.AdParameters),this.waterfallManager.SetWaterfallSuccess(this._onWaterfallSuccess.bind(this)),this.waterfallManager.SetShouldRun(this._shouldRunWaterfall.bind(this))}},{key:"_setCreativeData",value:function(){for(var e in this.config.creativeData={},this.config.creatives)(void 0===this.config.creativeData[e]||-1<this.config.protectedCreatives.indexOf(e))&&(this.config.creativeData[e]=this.config.creatives[e]);try{this.config.creativeData.AdParameters&&"string"==typeof this.config.creativeData.AdParameters&&(this.config.creativeData.AdParameters=JSON.parse(this.config.creativeData.AdParameters))}catch(e){}}},{key:"_onWaterfallSuccess",value:function(e){this.manager&&this.manager.fillSchedule(e)}},{key:"_shouldRunWaterfall",value:function(){var e=this.store.get("max_ready_vpaid")||2;return!this.manager||this.manager.getVpaidReadyCount()<e}},{key:"_onWaterfallManagerCreated",value:function(){if(this.debugTracker.info("_onWaterfallManagerCreated","Vpaid-Player->Creating..."),this.slot=this._getVideoSlot(),this.slot){this._setSizesToConfig(),this._setAdParameters();try{this._initManagerAndLiteUnitResponse()}catch(e){this._initManagerAndLiteUnitResponseFallback()}this.manager&&this._registerManagerEvents()}}},{key:"_registerManagerEvents",value:function(){this.manager.on(f.a.AdVideoStart,this._onAdVideoStartEvent.bind(this)),this.manager.on(f.a.AdImpression,this._onAdImpressionEvent.bind(this)),this.manager.on(f.a.AdStopped,this._onAdStoppedEvent.bind(this)),this.manager.on(f.a.AdVideoComplete,this._onAdVideoCompleteEvent.bind(this)),this.manager.on(f.a.AdError,this._onAdErrorEvent.bind(this)),this.manager.on(f.a.AdStarted,this._onAdStartedEvent.bind(this)),this.manager.on(f.a.HijackAttempt,this._onHijackAttemptEvent.bind(this)),this.manager.on(f.a.AdPaused,this._onAdPausedEvent.bind(this)),this.manager.on(f.a.AdPlaying,this._onAdPlayingEvent.bind(this)),this.manager.on(f.a.AdSkipped,this._onAdStoppedEvent.bind(this)),this.manager.on("viewAdPlayer",this._displayAdPlayer.bind(this))}},{key:"_onAdVideoStartEvent",value:function(){this.stopped||(this.volume(this._getWorkingVolume()),this.emit(f.a.AdVideoStart))}},{key:"_getWorkingVolume",value:function(){var e=0;return this.options.vpaidTag.volume?"auto"==this.options.vpaidTag.volume&&(e=this.store.get("volume")):e=this.options.volume/100,c(e)}},{key:"volume",value:function(e){if(null==(e=c(e)))return this._getAdVolume();this._setAdVolume(e),this._volume=e}},{key:"_setAdVolume",value:function(e){if(!this.isMobile){if(e=c(e),isNaN(parseFloat(e)))return!1;this.manager&&this.manager.setAdVolume(e)}}},{key:"_getAdVolume",value:function(){return this.manager?this.manager.callWorkingVpaid("getAdVolume",[],0):0}},{key:"_onAdImpressionEvent",value:function(e){this._displayAdPlayer(e?e.dispatcher:void 0),this.stopped||(this.emit(f.a.AdImpression,e),this.volume(this._getWorkingVolume()),this.isMultiVpaidUnit)||this._resizeAd(this.options.width,this.options.height,this.viewmode)}},{key:"_displayAdPlayer",value:function(){this._hideAdPlayer(),this.adPlaying||(this.adPlaying=!0,this._hideContentVideo(),this._displayVideoWrapper(),this.manager.bringVpaidToFront()),this.isAdPlayerVisible||(this.isAdPlayerVisible=!0,this.store.emit("AdPlayerVisible"))}},{key:"_hideContentVideo",value:function(){this.video.pause(),this.video.style.display="none",this.video.style.zIndex=0}},{key:"_displayVideoWrapper",value:function(){this.playWithoutContainer||(this.videoWrapper.style.zIndex=100,o(this.videoWrapper,"_ad-cm-playing"),this.videoWrapper.style.display="block")}},{key:"_resizeAd",value:function(e,t,i){try{this.config.width=e,this.config.height=t,this.config.viewMode=i,this.manager&&this.manager.resizeAd(e,t,i)}catch(e){this.debugTracker.error(e)}}},{key:"_onAdStoppedEvent",value:function(e){this.emit(f.a.AdStopped,e),this.stop()}},{key:"_hideAdPlayer",value:function(){clearTimeout(this.hideAdPlayerDelayId)}},{key:"_onAdVideoCompleteEvent",value:function(){this._hideAdPlayer(),this.emit(f.a.AdVideoComplete)}},{key:"_onAdErrorEvent",value:function(){var e=arguments&&0<arguments.length?arguments[0]:"";this.debugTracker.error("Ad-".concat(this.options.uid),e||"Ad Threw Error"),this.emit(f.a.AdError),this.stop()}},{key:"_onAdStartedEvent",value:function(){this.volume(this._getWorkingVolume())}},{key:"_onHijackAttemptEvent",value:function(){(new Image).src="".concat(ye({dataCenter:"us",baseReportD:"basebanner.com"}),"?cijs=0&ttype=5&pix=31542217&dast=").concat(this.options.vpaidTag.auc_dast,"&").concat((new Date).getTime())}},{key:"_onAdPausedEvent",value:function(){this.store.emit("contentPaused"),this.paused=!0}},{key:"_onAdPlayingEvent",value:function(){this.paused&&this.store.emit("contentResumed"),this.paused=!1}},{key:"_getVideoSlot",value:function(){var e=this.playWithoutContainer?this.target:this.videoWrapper;if("string"==typeof e){if(document.getElementById(e))return document.getElementById(e)}else if("object"===pa(e)&&e.style&&e.tagName)return e;return this.debugTracker.error("_getVideoSlot","Bad slot"),!1}},{key:"_setSizesToConfig",value:function(){this.config.width=parseInt(this.options.width),this.config.height=parseInt(this.options.height),this.config.creatives.PLAYER_WIDTH=this.config.width,this.config.creatives.PLAYER_HEIGHT=this.config.height}},{key:"_setAdParameters",value:function(){this.options.vpaidTag.skip_vast||!this.config.creativeData.adParameters?this.config.creativeData.adparameters=this.config.creativeData.AdParameters=this.config.creativeData.adParameters=this.options.vpaidTag.ad_parameters:this.config.creativeData.adparameters=this.config.creativeData.AdParameters=this.config.creativeData.adParameters}},{key:"_initManagerAndLiteUnitResponse",value:function(){this._createManager(),this.waterfallManager.handleLiteUnitWfResponse()}},{key:"_createManager",value:function(){this.manager=new ca({store:this.store,config:this.config,options:this.options,target:this.slot})}},{key:"_initManagerAndLiteUnitResponseFallback",value:function(){try{this._parseAdParameters(),this._initManagerAndLiteUnitResponse()}catch(e){this._onManagerInitError()}}},{key:"_parseAdParameters",value:function(){var e=this.config.creativeData.AdParameters;this.config.creativeData.adParameters={},this.config.creativeData.adParameters=JSON.parse(e),this.config.creativeData.adparameters=this.config.creativeData.AdParameters=this.config.creativeData.adParameters}},{key:"_onManagerInitError",value:function(){this.emit("AdLoadError"),this.stop()}},{key:"dropAds",value:function(e){this.manager.cleanQueue(this.store.get("queue_size")||10,e),this.waterfallManager.dropAds(e)}},{key:"addWfParameter",value:function(e,t){this.waterfallManager.addWfParameter(e,t)}},{key:"updateWfParameter",value:function(e,t){this.waterfallManager.updateWfParameter(e,t)}},{key:"removeWfParameter",value:function(e){this.waterfallManager.removeWfParameter(e)}},{key:"playManager",value:function(){this.manager.play()}},{key:"pauseManager",value:function(){this.manager.pause()}},{key:"runWaterfall",value:function(e){this.waterfallManager.runWaterfall(e)}},{key:"stop",value:function(){this.stopped||(this.stopped=!0,setTimeout(this._hideAdPlayer.bind(this),0),this.waterfallManager&&this.waterfallManager.stop(),this.manager&&this.manager.stop())}},{key:"resize",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"normal";if(t=parseInt(t),e=parseInt(e),this.options.height=t,this.options.width=e,this.viewmode=i,!isNaN(e)||!isNaN(t))return this._resizeVideoWrapper(e,t),this._tryResizeAdForSingleVpaidUnit(e,t,i)}},{key:"_resizeVideoWrapper",value:function(e,t){this.playWithoutContainer||(this.videoWrapper.style.width="".concat(e,"px"),this.videoWrapper.style.height="".concat(t,"px"))}},{key:"_tryResizeAdForSingleVpaidUnit",value:function(e,t,i){var n=this.isMultiVpaidUnit||!1;if(!this.isMultiVpaidUnit)try{this._resizeAd(e,t,i)}catch(e){this.debugTracker.error("resize",e),n=!1}return n}},{key:"getAd",value:function(e){if(this.manager)return this.manager.getAd(e)}},{key:"getClickedAd",value:function(){if(this.manager)return this.manager.getClickedAd()}},{key:"reportQueueStatus",value:function(){this.manager&&this.manager.reportQueueStatus()}}])&&fa(e.prototype,i),n&&fa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ga(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!=ma(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=ma(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==ma(e)?e:String(e)}(n.key),n)}}d(12).polyfill();var _a="killAfterXWithNoConversion",ba="none",Aa="_onVpaidClosed",Ea="pre-roll",e=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._overrideWindowMethods(),this._init(),this._createStore(e),this._fireDisplayImpression(),this._loadAdxScript(),this.isMobile=this.store.get("isMobile"),this.isMultiVpaidUnit=this.store.get("isMultiVpaidUnit"),this.playWithoutContainer=this.store.get("noplrcntr"),this._setTrackerDebugLevels(),this.isClickToPlay=this._isAutoplayDisabled(),this._handleDAST(),this._setBaseURL(),this._createModules(),this._setStaticSchedule(),this._overrideNonNativeFunctions(),this._shouldDisabledIosAutoPlay(),this.playContentBeforeAds=this.store.get("plcntbfrads"),this._onVpaidClosed=function(){},this._registerEvents(),this._killAfterXWithNoConversion(),this.onPlayerReadyActions=new Array,this.target=this._handleTarget(e.target_id),this.target?(this.store.set("can_opt_out",this._shouldOptOut()),this._onTargetCreated(),we(this._handleReportVastXmlList,this),we(this._createComponentsManager,this)):this.debugTracker.error("Constructor","No player target! Can't build player in [".concat(this.target,"]... aborting!"))}var e,i,n;return e=t,(i=[{key:"_overrideWindowMethods",value:function(){void 0!==Object.assign&&ce(Object.assign)||this._overrideObjectAssign()}},{key:"_overrideObjectAssign",value:function(){Object.assign=function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}}},{key:"_init",value:function(){this.status="loading",this.videoLength=0,this.video=void 0,this.repeatCount=0,this.schedule={},this.playerIsClosed=!1}},{key:"_createStore",value:function(e){this.options=function(e){var t,i={domain:window.location.hostname,cirf:"",referrer:document.referrer?document.referrer.split("//")[1]:window.location.hostname,vertical:"default",auc_dast:"0",title:"",description:"",keywords:"",default_ad_parameters:"",files:[],image:!1,target_id:"",height:!1,width:!1,controls:!0,aspect_ratio:"16:9",repeat:!0,mute:!1,oid:0,default_ad_timeout:30,volume:0,video_class_name:"video-js vjs-default-skin",schedule:[],schedule_auto:1,min_vpaid_run_time:4,debug:[],report_vast_xml:!1,htmlVideoSupport:!!document.createElement("video").canPlayType,ga_factor:1,fire99:!0,ad_controls:!1,time_between_waterfall:10,tmbtwfs:function(e,t,i,n){return i.get("time_between_waterfall")},mntmbtwfsf:function(e,t,i,n){return i.get("mintimwf")},mintimwf:5e3,mntmbtwfs:5,mxtmbtwfs:900,queue_size:6,max_ready_vpaid:3,waterfall_watermark:0,base_url:"//vidstat.taboola.com",wf_path:"VideoBidRequestHandlerServlet",run_wf_when_empty:!0,kaxwnc:18e5,pstflrs:!0,pvpd:"javascript",sncad:!1,blkflshjs:!0,altmot:6e4,adimptmot:0,rv1adimptmot:0,prtctv2:"/vpaid/hjk.214.js",hjkclb:"HijackResponse",jsnoflshdtct:!1,qsrtscr:function(e,t){return 0===t.alfrox&&0<t.rpox?t.requiredViewability<<30|t.priority<<16|parseInt(1e3*t.rpox):t.requiredViewability<<30|t.priority<<16|parseInt(t.alfrox*t.rpox*1e3)},psthdrs:"text/plain",rstmrai:!0,global_ad_timeout:18e4,mprdct:void 0,uscnvsmpg:!0,mpgclrslv:["gcdn.2mdn.net"],dsu:"/vpaid/ds/117/dsm.js",run_wf_on_init:!0,wf_dynmc_ps:!0,sprssviderr:!1,get_ad_timeout_seconds:10,wf_manual:!1,disctxt:"By Taboola",httpsOverride:!0,usscrtgurl:!1,evtbsschdl:!0,timbtopps:2e3,cmbopps:!0,anltcsurlv4:"",anltcsurlv5:"",anltcsclb:"VpaidAnalytics",anltcsOptions:{withXHR:!0,withIframes:!0,withScripts:!0,maxNetworkCalls:0,timeout:3e3,deepIframes:!1},moat:!1,omidVerificationScriptVersion:"1.3.21-iab2898",omidWebUrl:"https://cdn.taboola.com/shared/omweb-v1.js",omidSessionUrl:"https://cdn.taboola.com/shared/omid-session-client-v1.js",omidExcludedVendors:["doubleverify"],moatPartnerCode:"taboolajsvideo2446883476",novdtrm:!1,dcdvdurl:!1,firstWaterfallNoaop:0,mxlifls:0,kbnul:"//vidanalytics.taboola.com",frcmtfrms:!0,frcvlm:!1,pxlnotsmtp:!1,cntonvfrc:!0,mxemptwf:0,mltads:!1,erlyai:!1,jsDsbleErlyai:!1,frcadvlmtrvl:1e3,dbncadvltm:50,stpfrcvlevnt:"AdVideoFirstQuartile",imapihok:!1,trmrdyvpaid:!0,dfltvlm:.4,usstrckisyn:!1,dlywf:!1,adto:3e5,vakll:3e5,ovrtgbydc:!1,strgprvdrttl:6048e5,frstlk:!1,pusvidprtctn:!1,encwfrs:!0,dsktmouttoadcmpltn:3e4,mbltmouttoadcmpltn:3e4,wfv:1,aderrbfradlddopactv:!0,isMultiVpaidUnit:!1,hdeadsplypusbtn:!0,isIdleMode:!1,mttst:"",mxntwrkclls:80,rplvpdactv:!1,rvfctr:0,dnapmxvl:0,usopsla:!0,mcrsrvcsnmspc:"trc",bllblevt:"1,25,21,22,23,24",ifrmswghts:{gen:15,ggl:6,pxls:30},dskVidMuted:!0,ovrdnonntvfnclst:{},fkadchcs:!1,istblvpd:!1,mtdhkactv:!1,addprld:!0,blckbrngtofrnt:!1,tglifrmcntndsplyactv:!0,cmpltonstpddmn:["innovid.com"],cmpltonstpdms:0,aduntldflbfruntld:!0,bckflldlyms:1e4,mxbckflldlyitms:0,bfprty:0,lgvpdtxtelmnts:!1,shwadmtebtn:!0,shwadsplypusbtn:"hide",disprgrbrclk:!1,wtfradpsdbfrrsmad:!1,mtfctr:0,noplrcntr:!1,vpdcntrcstmcss:"",flbktovdo:!0,cntdwnrgx:"",msnifrmsrchk:!0,prvaupl:!0,stpvpdonudfndsrc:!0,adxcrdgtadtmt:5e3,adtnladxsprtdszs:[],stpvpdonrltvsrc:!1,rvfrquesttsemttr:!0,cntgtad:!0,dftgprc:void 0,scrmf:!0,hjkbldoms:[],rtryonfl:!1,hjkbldomsencdd:["dGFncy5ia3J0eC5jb20=","bGlwaWthcl9ib2R5Y2FyZV9hd2FyZW5lc3M=","Z2FjZG4=","bWlycmEuaW8=","YnJ0bWVkaWE=","VUEtNTcwODQyNTctNw==","Y29pbi1oaXZlLmNvbQ==","YnVuZGxlLmNsZWFyc3RyZWFtLnR2","LmNscnN0bS5jb20=","dmlkZW8ubGVhZHp1LmNvbQ==","LmxlYWR6dS5jb20=","czAuMm1kbi5uZXQvYWRzL3JpY2htZWRpYS9zdHVkaW8vcHYyLzYwMTI4Njk2Lw==","YWR2ZXJ0aXNpbmdzdG9yeS5jb20=","bWVkaWFncm91cGFkcy5jb20=","ZWxpdGVsbWVkaWFhZHZlcnRpc2luZy5jb20=","dmVydGFtZWRpYS5jb20=","bWVkaWFncm91cHByby5jb20=","aGlnaHJhdGVkYWRzLmNvbQ==","dmlkZW9ncmFtbWljLmNvbQ==","bWFya2V0aW5ndmlkZW9ub3cuY29t","c3RhdGljLm1hcmtldGluZ3ZpZGVvbm93LmNvbQ==","ZmlsZXMud2VidmlkZW9nbG9iYWwuY29t","d2VidmlkZW9nbG9iYWwuY29t","d2VibWVkaWFhcHAuY29t","ZmlsZXMud2VibWVkaWFhcHAuY29t","cG9wb3ZpZGVvYWQuY29t","c2Iudm9pY2VmaXZlLmNvbQ==","b25lLm00ZGMuY29t","dXBpZXcuY29t","cGlldy5jb20=","di5zaHVsY29udC5jb20=","di5hbGdvdmlkLmNvbQ==","dmlkLnNwcmluZ3NlcnZlLmNvbQ==","cG1pLmNvbQ==","dHJhY2ttYXN0ZXIuY2M="],cpcvcmpgntps:[14,17],cstmdltps:{tags:7,dCPM:9,externalCPCV:14,internalCPCV:17},dtctcmp:!1,dtctcmpfctr:0,comp:{},cmpdtctv:"1.0.0",vidautoplydtctv:"1.0.0",drpbletps:["singleAd","adjacencyAd"],vdelv:"3.0.1",rplcpxlmcrplchldr:!0,erronopp:!0,plcntbfrads:!0,sndvptmrst:!1,frwferrpxls:0,frdmrvhpxls:0,frdqshpxls:0,hdtrgt:!1,spprtvrtclvd:!0,prvnterlyadimpopp:!1,untetrk:["viewability","viewable50precent1sec","fullyviewable1sec"],vdtck:0,htsptdflt:{pos:"bottom-left",txtclr:"white",mrgn:20,lbl:""},frwfpssbckrpxl:0,wtchvdointrvl:1e3,rprtvidsttsintrvl:1e3,q5byprgrss:!0,mnvlddrtn:.1,frmltplpxls:["AdPaused","AdClickThru","AdPlaying"],mblmdiadrctdmnd:!1,firstWfRes:void 0,blckngtgcnvrsncnt:5,fmli:void 0,fmpw:"",dlyimpnonmoatrv:1,updtcmpbfrwf:!1,rgxdcdd:[],firedsplyimp:!1,addcdatavst:!0,aduntladtmt:1e4,mnbfrsz:.25,prftchmxlngth:15,imscrptsrc:"//imasdk.googleapis.com/js/sdkloader/ima3.js",adtrgtcss:!0,wtuntlcntrinvw:!1,cntrelm:"",sndgdprprmswf:!1,prfrmncmsrmnts:!0,slwcnctlngt:10,dlyastsld:!1,vwclcflbkenbld:!1,omidaccsmd:"full",frdwnlnkpxls:0,dwnlnktrshld:8,rmvrvlwntwrk:!1,vldtvwbfrcmp:!0,frtbcmpaftrmtvw:!1,omddsbldbrwsrs:[],frppdfpxl:0,atplyhk:!1,fileSizeConfiguration:{enabled:!1,frameTypes:[3],threshold:2},prfrmdfl:"video",dpndonuntfrlgtoelstc:!1,rtbmtfctr:10,enblopp:{},useVideoControls:!0,regx:'"demandSourceId":54684|.clearstream.tv|.clrstm.com|tm-promo.s3.amazonaws|advertisingstory.com|mediagroupads.com|elitelmediaadvertising.com|vertamedia.com|mediagrouppro.com|highratedads.com|.videogrammic.com|videogrammic.com|files.webvideoglobal.com|webvideoglobal.com|webmediaapp.comfiles.webmediaapp.com|marketingvideonow.com|popovideoad.com|dafacdd.asia|sb.win999win.com|nssf.com|upiew.com|piew.com|v.shulcont.com|v.algovid.com|vid.springserve.com|pmi.com|azureedge.net',mxwrps:3,adxblck:{isActive:!1,advIds:[],mode:We},prebid:{timeout:5e3,isActive:!1,debug:!1,supported:[Ge.b.UNRULY]},onPlayerReady:function(e){},onPlayerLoadError:function(e){},onPlayerError:function(e){},onPlayerPlay:function(e){},onPlayerStop:function(e){},onPlayerClose:function(e){},onPlayerPause:function(e){},onPlayerResume:function(e){},onPlayerRepeat:function(e){},onPlayerComplete:function(e){},onAdLoadError:function(e,t){},onAdError:function(e,t){},onAdStopped:function(e,t){},onAdImpression:function(e,t){},onAdVideoStart:function(e,t){},onAdVideoEnd:function(e,t){},onAdClick:function(e,t,i){}};for(t in i)null==e[t]&&(e[t]=i[t]);e.description||(e.description=e.title),e.keywords||(e.keywords=e.title),parseFloat(e.width)||parseFloat(e.height)||(e.width="377",e.height="314");var n=parseInt(100*Math.random())+1<=e.ron_percent;return e.tagDefault={ad_controls:e.ad_controls,url:"",pubid:"",tagid:"",vidlength:"",video_url:e.files[0],title:e.title,cirf:e.cirf,description:e.description,keywords:e.keywords,ad_parameters:e.default_ad_parameters,muted:e.mute?1:0,auc_dast:e.auc_dast,referrer:e.referrer,domain:e.domain,vertical:e.vertical,roll_type:"mid-roll",oid:e.oid,ad_timeout:e.default_ad_timeout,rs:"1",st:"1",sts:"1",type:"wf",noaop:"10",sortOrderType:0,mfp:4,afbp:e.use_flash_bypass,isRon:n,isvideo:0,mindur:1,maxdur:e.default_ad_timeout,minbr:1,maxbr:1e4,plmd:0,defaultTagTimeout:30,totaltimeout:60,use_as_is:!1,skip_vast:!1},e}(e);e=Object.assign(ze(),e.dplayerSettings);this.options=Object.assign({},this.options,e),this.store=new Je(this.options),this._appendParamsToStore()}},{key:"_appendParamsToStore",value:function(){this.store.set("player_id","".concat(Date.now(),"_").concat(de(30))),this.store.set("fullPageUrl",window.location.href),this.store.set("forcePause",!1),this.store.set("forceMute",!1),this.store.set("conversionsCount",0),this.store.set("failsCount",this.store.get("failsCount")||0),this.store.set("getAdData.count",0),this.store.set("playerAspectRatio",this.options.aspect_ratio),this.store.set("noplrcntr",this.store.get("noplrcntr")&&this.store.get("isMultiVpaidUnit")),this.store.set("isAmp",window.TRC&&window.TRC.isAMP),this.store.set("queueLength",0),this.store.set("vpaidReadyCount",0),this.store.set("document.visible",!document.hidden),this.store.set("ads_playing",0),this.store.set("ads_started",0),this.store.set("total_impressions",0)}},{key:"_fireDisplayImpression",value:function(){this.store.get("firedsplyimp")&&ve(fe(h.playerDisplayImpression,this.store))}},{key:"_loadAdxScript",value:function(){var e,t=this;this.store.get("shouldLoadAdxScript")&&(this.store.set("adxScript.loading.isComplete",!1),(e=document.createElement("script")).onload=function(){t.store.set("adxScript.loading.isComplete",!0),t.store.emit("adxScript.loading.complete")},e.src=this.store.get("imscrptsrc"),e.async=!0,document.getElementsByTagName("head")[0].appendChild(e))}},{key:"_setTrackerDebugLevels",value:function(){l.prototype.debugLevels=this.store.get("debugLevels")||""}},{key:"_isAutoplayDisabled",value:function(){return!this.isMobile&&this.store.get("prvaupl")&&-1<this.store.get("wurfl.browser.name").indexOf(ct)}},{key:"_handleDAST",value:function(){var e=Te(this.options.auc_dast,this._onDASTDecodingError.bind(this));e&&this._onDASTDecoded(e)}},{key:"_onDASTDecodingError",value:function(e){this.store.set("dastDecoderError",v(e))}},{key:"_onDASTDecoded",value:function(e){e.sesid&&this.store.set("sessionId",e.sesid),this._logConnectionType(e.ct),this.store.set("dast",e),this._appendABTestFromDAST(e)}},{key:"_logConnectionType",value:function(e){var t="unknown";e&&(t=st.hasOwnProperty(e)?st[e]:e.toString()),this.store.set("connectionType",{type:t})}},{key:"_appendABTestFromDAST",value:function(e){e.hasOwnProperty("abt")&&(this.store.set("dast_AbTest",e.abt),this.store.set("abTest",this.store.get("abTest")?"".concat(this.store.get("abTest"),"|").concat(e.abt):e.abt))}},{key:"_setBaseURL",value:function(){var e=this.store.get("base_url");e&&0!==e.length||(this.store.set("original_base_url","empty"),this.store.set("href",window.location.href),this.store.set("base_url","//www.cmbestsrv.com"))}},{key:"_createModules",value:function(){this._createConnectionTypeDetector(),this._createDependciesLoader(),this._createDebugTracker()}},{key:"_createConnectionTypeDetector",value:function(){this.connectionTypeDetector=new ot(this.store)}},{key:"_createDependciesLoader",value:function(){this.dependenciesLoader=new it(this.store)}},{key:"_createDebugTracker",value:function(){this.debugTracker=new l("OvaMediaPlayer"),this.debugTracker.info("unit-version: ".concat(this.store.get("unit_loader_version"),", player-version: ").concat(this.store.get("player_version")),this.store,{color:"#D15EFF"}),this.debugTracker.info("userAgent: ".concat(JSON.stringify(this.store.get("wurfl"))))}},{key:"_createComponentsManager",value:function(){this.options.vpaidTag=this._getVpaidTag(),this._initContentSchedule(),this.componentsManager=new ya({options:this.options,store:this.store,target:this.target,video:this.video}),this._registerToComponentsManagerEvents(),this.componentsManager.runWaterfall("vforceInit")}},{key:"_initContentSchedule",value:function(){var e={"00:00":this.options.vpaidTag,"00:01":this.options.vpaidTag};this.store.set("contentSchedule",e)}},{key:"_getVpaidTag",value:function(){var e=this.store.get("schedule"),t={};return e.forEach(function(e){e&&e.roll_type===Ea&&(t=e)}),t}},{key:"_registerToComponentsManagerEvents",value:function(){this.componentsManager.on(f.a.AdVideoStart,this._onAdVideoStartEvent.bind(this)),this.componentsManager.on(f.a.AdImpression,this._onAdImpressionEvent.bind(this)),this.componentsManager.on(f.a.AdStopped,this._onAdStoppedEvent.bind(this)),this.componentsManager.on(f.a.AdVideoComplete,this._onAdVideoCompleteEvent.bind(this)),this.componentsManager.on(f.a.AdError,this._onAdErrorEvent.bind(this)),this.componentsManager.on("AdLoadError",this._onAdLoadErrorEvent.bind(this))}},{key:"_onAdVideoStartEvent",value:function(){this.options.onAdVideoStart(this,this.componentsManager)}},{key:"_onAdImpressionEvent",value:function(e){this.options.onAdImpression(this.componentsManager,e.dispatcher,e.tag)}},{key:"_onAdStoppedEvent",value:function(e){this.options.onAdStopped(e.dispatcher.index,this.componentsManager)}},{key:"_onAdVideoCompleteEvent",value:function(){this.options.onAdVideoEnd(this,this.componentsManager)}},{key:"_onAdErrorEvent",value:function(){this.options.onAdError(this,this.componentsManager)}},{key:"_onAdLoadErrorEvent",value:function(){this.options.onAdLoadError(this,this.componentsManager)}},{key:"_setStaticSchedule",value:function(){this._shouldUseStaticSchedule()&&this.store.set("static_schedule",this.options.schedule)}},{key:"_shouldUseStaticSchedule",value:function(){return this.options.schedule&&this.options.schedule.length&&this.options.schedule[0].ad_parameters&&2<this.options.schedule[0].ad_parameters.length}},{key:"_overrideNonNativeFunctions",value:function(){var e=this.store.get("ovrdnonntvfnclst");if(0!==Object.keys(e).length){var t,i=this._createHiddenIframe();for(t in e)ce(window[t])||(window[t]=e[t](i))}}},{key:"_createHiddenIframe",value:function(){var e=document.createElement("iframe");return e.style.width=0,e.style.height=0,e.style.visibility="hidden",e.style.display="none",document.body.appendChild(e),e}},{key:"_shouldDisabledIosAutoPlay",value:function(){var e=this;this.isMobile&&!this.store.get("iosAutoPlayDisabled")&&this.store.get("wurfl.os.name")===p&&document.addEventListener("ltIosAutoDisable",function(){e.store.set("iosAutoPlayDisabled",!0)})}},{key:"_registerEvents",value:function(){this._registerBeforeUnloadEvent(),this._registerAdImpressionEvent(),this._registerClosePlayerEvent(),this._registerAdClickThroughEvent()}},{key:"_registerBeforeUnloadEvent",value:function(){var e=this;window.addEventListener("beforeunload",function(){e.store.emit("beforeunload")})}},{key:"_registerAdImpressionEvent",value:function(){this.store.on("AdImpression",this._killAfterXWithNoConversion.bind(this))}},{key:"_killAfterXWithNoConversion",value:function(){var e=this,t=this.store.get("kaxwnc");t&&(this.kaxwnc&&clearTimeout(this.kaxwnc),this.kaxwnc=setTimeout(function(){e.closeCleanPlayer(_a)},t))}},{key:"closeCleanPlayer",value:function(e){var t=this;this.store.set("playerClosed",!0),setTimeout(function(){e=e||ba,t.store.emit("stop","close:".concat(e)),t.playerIsClosed||(clearInterval(t.contentInterval),t._destroyModules(),t.playerIsClosed=!0,t._onVpaidClosed=function(){},t._stop(),t._removeTargetElement(),t.onPlayerReadyActions=t.debugTracker=t.video=t.schedule=t.options=t.target=void 0)},0)}},{key:"_destroyModules",value:function(){this.componentsManager&&!this.componentsManager.stopped?this.componentsManager.stop():this.parent&&this._onVpaidClosed(),this.dependenciesLoader&&this.dependenciesLoader.destroy()}},{key:"_removeTargetElement",value:function(){if(!this.playWithoutContainer)for(;this.target.childNodes.length;)this.target.removeChild(this.target.childNodes[0])}},{key:"_registerClosePlayerEvent",value:function(){this.store.on("closePlayer",this._closePlayer.bind(this))}},{key:"_closePlayer",value:function(){this._onVpaidClosed=this.closeCleanPlayer.bind(this,Aa),this.options.onPlayerClose(this)}},{key:"_registerAdClickThroughEvent",value:function(e){this.store.on(f.a.AdClickThru,this._onAdClickThroughEvent.bind(this))}},{key:"_onAdClickThroughEvent",value:function(e){this.options.onAdClick(this,this.componentsManager.getClickedAd(),e)}},{key:"_resizeVpaidHandler",value:function(e,t){this.componentsManager.resize(e,t)}},{key:"_resize",value:function(e,t){this.options.height=t+"",this.options.width=e+"",this._setVideoSize(a(this.options.width),a(this.options.height))}},{key:"_resizeBasedOnWidth",value:function(e){this.options.height=!1,this.options.width=e+"";var e=this.options.aspect_ratio.split(":")[1]/this.options.aspect_ratio.split(":")[0],t=a(this.options.width),e=a(Math.floor(parseFloat(t)*e)+"");this._setVideoSize(t,e)}},{key:"_resizeBasedOnHeight",value:function(e){this.options.width=!1,this.options.height=e+"";var e=this.options.aspect_ratio.split(":")[0]/this.options.aspect_ratio.split(":")[1],t=a(this.options.height),e=a(Math.floor(parseFloat(t)*e)+"");this._setVideoSize(e,t)}},{key:"_setVideoSize",value:function(e,t){this.isMultiVpaidUnit||(this.playWithoutContainer||this._resizeTarget(e,t),this._resizeVideo(e,t))}},{key:"_resizeTarget",value:function(e,t){this.target.style.width=e,this.target.style.height=t,this.target.setAttribute("width",parseInt(e)),this.target.setAttribute("height",parseInt(t))}},{key:"_resizeVideo",value:function(e,t){this.video.style.width=e,this.video.style.height=t,this.video.setAttribute("width",parseInt(e)),this.video.setAttribute("height",parseInt(t))}},{key:"_handleTarget",value:function(e){return this.playWithoutContainer?document.querySelector(e):"string"==typeof e?document.getElementById(e):e}},{key:"_shouldOptOut",value:function(){return this.store.get("can_opt_out")||null!==this.target.parentElement.querySelector("#_cm-opt-out-view")}},{key:"_onTargetCreated",value:function(){this.options.htmlVideoSupport?this._createMediaPlayer():(this.debugTracker.error("Constructor","Browser does not support <video> Tag!Nothing to do, aborting..."),this.options.onPlayerLoadError(this))}},{key:"_createMediaPlayer",value:function(){this._handlePlayerContainer(),this._createPlayerTag(),this._attachEventsToVideo(),this.isMultiVpaidUnit&&this._onMultiVpaidUnit(),this._setPlayerTagAttributes(),this._createHandleOnCanPlayTimeout(),this.video=this.playerTag,this._setTargetId(),this._setVideoSize(this.options.width+"px",this.options.height+"px")}},{key:"_setTargetId",value:function(){this.playWithoutContainer||(this.target.id="_cm-css-reset")}},{key:"_handlePlayerContainer",value:function(){this.playWithoutContainer||(o(this.target,"vpaid-player-container"),this.isMultiVpaidUnit&&o(this.target,"multi-vpaids"))}},{key:"_createPlayerTag",value:function(){this.playerTag=new So(this.store,ir),this.playerTag.id=this._generateId(),this.playerTag.className=this.options.video_class_name,this._initPlayerTag()}},{key:"_initPlayerTag",value:function(){this.isMultiVpaidUnit&&o(this.playerTag,"multi-vpaids"),this.playerTag.style.cssText="position: relative; z-index:99; cursor:pointer; display:block",this.isClickToPlay||this.playerTag.setAttribute("autoplay",""),this.isMobile&&this.store.get("wurfl.os.name")===p&&this.playerTag.removeAttribute("autoplay","")}},{key:"_attachEventsToVideo",value:function(){this.playerTag.addEventListener("error",this._onVideoError.bind(this),!0)}},{key:"_triggerReadyActions",value:function(){if(0!=this.onPlayerReadyActions.length){for(var e=0;e<this.onPlayerReadyActions.length;e++)this.onPlayerReadyActions[e].apply(this,[]);this.onPlayerReadyActions=new Array}}},{key:"_triggerPlayerReadyToUnit",value:function(){var e=this;window.setTimeout(function(){e._triggerReadyActions(),e.options.onPlayerReady(),e.componentsManager&&we(e.componentsManager.reportQueueStatus,e)},0)}},{key:"_onVideoError",value:function(e){this.isMobile||(this.status="stopping",this.video.pause(),this.status="loading",this.options.onPlayerError(this,e))}},{key:"_onMultiVpaidUnit",value:function(){var e,t;this.options.height||this.options.width?this.options.height&&this.options.width?(this.playerTag.style.height=a(this.options.height),this.playerTag.style.width=a(this.options.width)):(e=this.options.aspect_ratio.split(":"),this.options.width?(t=e[1]/e[0],this.playerTag.style.width=a(this.options.width),this.playerTag.style.height=a(Math.floor(parseFloat(this.playerTag.style.width)*t))):(t=e[0]/e[1],this.playerTag.style.height=a(this.options.height),this.playerTag.style.width=a(Math.floor(parseFloat(this.playerTag.style.height)*t)))):this.debugTracker.error("createMediaPlayer","No `height` or `width` specified!")}},{key:"_setPlayerTagAttributes",value:function(){this.playerTag.muted=!0,this.playerTag.setAttribute("width",parseFloat(this.playerTag.style.width)+""),this.playerTag.setAttribute("height",parseFloat(this.playerTag.style.height)+""),this.playerTag.setAttribute("playsinline",""),this.options.repeat&&(this.playerTag.playerRepeat=!0),this.options.image&&this.playerTag.setAttribute("poster",this.options.image)}},{key:"_createHandleOnCanPlayTimeout",value:function(){var e=this,t=200;this._checkOnIOS()&&(t=500),setTimeout(function(){try{e._triggerPlayerReadyToUnit()}catch(e){}},t)}},{key:"_generateId",value:function(){for(var e="vpaid-".concat(Math.floor(65536*(1+Math.random())));document.getElementById(e);)e="vpaid-".concat(Math.floor(1e5*(1+Math.random())));return e}},{key:"_checkOnIOS",value:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}},{key:"_handleReportVastXmlList",value:function(){this.store.get("report_vast_xml")&&window.TRC&&(window.TRC.vastXmlList=[])}},{key:"set",value:function(e,t){this.store.set(e,t)}},{key:"get",value:function(e){return this.store.get(e)}},{key:"on",value:function(e,t){this.store.on(e,t)}},{key:"off",value:function(e,t){this.store.off(e,t)}},{key:"emit",value:function(e,t){e&&this.store.emit(e,t)}},{key:"getAd",value:function(e){if(this.componentsManager)return this.componentsManager.getAd(e)}},{key:"startIdleMode",value:function(){this.store.set("isIdleMode",!0)}},{key:"stopIdleMode",value:function(){this.store.set("isIdleMode",!1)}},{key:"startWf",value:function(){this.store.emit("startWf")}},{key:"stopWf",value:function(){this.store.emit("stopWf")}},{key:"dropAds",value:function(e){this.componentsManager.dropAds(e)}},{key:"addWfParameter",value:function(e,t){this.componentsManager.addWfParameter(e,t)}},{key:"updateWfParameter",value:function(e,t){this.componentsManager.updateWfParameter(e,t)}},{key:"removeWfParameter",value:function(e){this.componentsManager.removeWfParameter(e)}},{key:"play",value:function(){this.store.get("forcePause")||this.componentsManager.playManager()}},{key:"pause",value:function(){this.componentsManager.pauseManager()}},{key:"_resume",value:function(){this.componentsManager.playManager()}},{key:"_stop",value:function(){try{this.status="stopped",this.options.onPlayerStop(this)}catch(e){}}},{key:"resize",value:function(e,t,i){this._resizeVpaidHandler(e,t);try{null!=e&&!isNaN(parseInt(e))||(e=!1),null!=t&&!isNaN(parseInt(t))||(t=!1),e||t||(this.debugTracker.error("resize","No `height` or `width` specified!"),e=this.store.get("width"),t=this.store.get("height")),t&&e?this._resize(e,t):(i&&1<i.split(":").length&&(this.options.aspect_ratio=i),e?this._resizeBasedOnWidth(e):this._resizeBasedOnHeight(t))}catch(e){this.debugTracker.error("resize","Resizing component failed!")}}},{key:"onPublisherVideoDetectChange",value:function(e){this.store.set("publisherVideoDetected",e)}}])&&ga(e.prototype,i),n&&ga(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();window.OvaMediaPlayer=e,F.default=e}])}catch(e){}