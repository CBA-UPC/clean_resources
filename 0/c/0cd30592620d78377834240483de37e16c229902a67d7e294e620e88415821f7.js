var Ext=Ext||{};if(!Ext.Carousel){Ext.Carousel={}}if(!Ext.app){Ext.app={}}if(!Ext.behavior){Ext.behavior={}}if(!Ext.carousel){Ext.carousel={}}if(!Ext.data){Ext.data={}}if(!Ext.data.association){Ext.data.association={}}if(!Ext.data.identifier){Ext.data.identifier={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.device){Ext.device={}}if(!Ext.device.communicator){Ext.device.communicator={}}if(!Ext.device.connection){Ext.device.connection={}}if(!Ext.dom){Ext.dom={}}if(!Ext.env){Ext.env={}}if(!Ext.event){Ext.event={}}if(!Ext.event.publisher){Ext.event.publisher={}}if(!Ext.event.recognizer){Ext.event.recognizer={}}if(!Ext.field){Ext.field={}}if(!Ext.form){Ext.form={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.animation){Ext.fx.animation={}}if(!Ext.fx.easing){Ext.fx.easing={}}if(!Ext.fx.layout){Ext.fx.layout={}}if(!Ext.fx.layout.card){Ext.fx.layout.card={}}if(!Ext.fx.runner){Ext.fx.runner={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.wrapper){Ext.layout.wrapper={}}if(!Ext.lib){Ext.lib={}}if(!Ext.log){Ext.log={}}if(!Ext.log.formatter){Ext.log.formatter={}}if(!Ext.log.writer){Ext.log.writer={}}if(!Ext.mixin){Ext.mixin={}}if(!Ext.proxy){Ext.proxy={}}if(!Ext.scroll){Ext.scroll={}}if(!Ext.scroll.indicator){Ext.scroll.indicator={}}if(!Ext.slider){Ext.slider={}}if(!Ext.util){Ext.util={}}if(!Ext.util.paintmonitor){Ext.util.paintmonitor={}}if(!Ext.util.sizemonitor){Ext.util.sizemonitor={}}if(!Ext.util.translatable){Ext.util.translatable={}}if(!Ext.viewport){Ext.viewport={}}var InfinityMobile=InfinityMobile||{};if(!InfinityMobile.controller){InfinityMobile.controller={}}if(!InfinityMobile.model){InfinityMobile.model={}}if(!InfinityMobile.profile){InfinityMobile.profile={}}if(!InfinityMobile.store){InfinityMobile.store={}}if(!InfinityMobile.util){InfinityMobile.util={}}if(!InfinityMobile.view){InfinityMobile.view={}}if(!InfinityMobile.view.desktop){InfinityMobile.view.desktop={}}if(!InfinityMobile.view.phone){InfinityMobile.view.phone={}}if(!InfinityMobile.view.tablet){InfinityMobile.view.tablet={}}(Ext.cmd={}));(();(();Ext.String={trimRegex:/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,escapeRe:/('|\\)/g,formatRe:/\{(\d+)\}/g,escapeRegexRe:/([-.*+?^${}()|[\]\/\\])/g,htmlEncode:((),htmlDecode:((),urlAppend:trim:function(a){return a.replace(Ext.String.trimRegex,"")},capitalize:ellipsis:escapeRegex:function(a){return a.replace(Ext.String.escapeRegexRe,"\\$1")},escape:toggle:leftPad:function(b,c,d){var a=String(b);d=d||" ";while(a.length<c){a=d+a}return a},format:repeat:;Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;(();(();Ext.num=(();Ext.Function={flexSetter:bind:pass:alias:clone:createInterceptor:createDelayed:defer:createSequence:createBuffered:createThrottled:interceptBefore:interceptAfter:;Ext.defer=Ext.Function.alias(Ext.Function,"defer");Ext.pass=Ext.Function.alias(Ext.Function,"pass");Ext.bind=Ext.Function.alias(Ext.Function,"bind");Ext.JSON=new (();if(!Ext.util){Ext.util={}}Ext.util.JSON=Ext.JSON;Ext.encode=Ext.JSON.encode;Ext.decode=Ext.JSON.decode;Ext.Error={raise:;Ext.Date={now:Date.now,toString:;((Ext.Function.flexSetter);(();((Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global);((Ext.ClassManager,Ext.Class,Ext.Function.flexSetter,Ext.Function.alias,Ext.Function.pass,Ext.Array.from,Ext.Array.erase,Ext.Array.include);(();Ext.setVersion("touch","2.4.0.487");Ext.apply(Ext,{version:Ext.getVersion("touch"),idSeed:0,repaint:id:getBody:getHead:getDoc:getCmp:function(a){return Ext.ComponentMgr.get(a)},copyTo:destroy:getDom:removeNode:defaultSetupConfig:{eventPublishers:{dom:{xclass:"Ext.event.publisher.Dom"},touchGesture:{xclass:"Ext.event.publisher.TouchGesture",recognizers:{drag:{xclass:"Ext.event.recognizer.Drag"},tap:{xclass:"Ext.event.recognizer.Tap"},doubleTap:{xclass:"Ext.event.recognizer.DoubleTap"},longPress:{xclass:"Ext.event.recognizer.LongPress"},swipe:{xclass:"Ext.event.recognizer.Swipe"},pinch:{xclass:"Ext.event.recognizer.Pinch"},rotate:{xclass:"Ext.event.recognizer.Rotate"},edgeSwipe:{xclass:"Ext.event.recognizer.EdgeSwipe"}}},componentDelegation:{xclass:"Ext.event.publisher.ComponentDelegation"},componentPaint:{xclass:"Ext.event.publisher.ComponentPaint"},elementPaint:{xclass:"Ext.event.publisher.ElementPaint"},elementSize:{xclass:"Ext.event.publisher.ElementSize"}},logger:{enabled:true,xclass:"Ext.log.Logger",minPriority:"deprecate",writers:{console:{xclass:"Ext.log.writer.Console",throwOnErrors:true,formatter:{xclass:"Ext.log.formatter.Default"}}}},animator:{xclass:"Ext.fx.Runner"},viewport:{xclass:"Ext.viewport.Viewport"}},isSetup:false,frameStartTime:+new Date(),setupListeners:[],onSetup:setup:application:factoryConfig:factory:deprecateClassMember:deprecateClassMembers:deprecateProperty:deprecatePropertyValue:deprecateMethod:deprecateClassMethod:isReady:false,readyListeners:[],triggerReady:onDocumentReady:callback:);(Ext.cmd.derive("Ext.env.Browser",Ext.Base,{statics:{browserNames:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",dolfin:"Dolfin",webosbrowser:"webOSBrowser",chromeMobile:"ChromeMobile",chromeiOS:"ChromeiOS",silk:"Silk",other:"Other"},engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},browserPrefixes:{ie:"MSIE ",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"OPR/",dolfin:"Dolfin/",webosbrowser:"wOSBrowser/",chromeMobile:"CrMo/",chromeiOS:"CriOS/",silk:"Silk/"}},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},is:Ext.emptyFn,name:null,version:null,engineName:null,engineVersion:null,setFlag:function(a,b){if(typeof b=="undefined"){b=true}this.is[a]=b;this.is[a.toLowerCase()]=b;return this},constructor:function(p){this.userAgent=p;var l=this.statics(),c=p.match(new RegExp("((?:"+Ext.Object.getValues(l.browserPrefixes).join(")|(?:")+"))([\\w\\._]+)")),b=p.match(new RegExp("((?:"+Ext.Object.getValues(l.enginePrefixes).join(")|(?:")+"))([\\w\\._]+)")),g=l.browserNames,k=g.other,f=l.engineNames,o=f.other,n="",m="",h=false,e,d,a;e=this.is=if(c){k=g[Ext.Object.getKey(l.browserPrefixes,c[1])];n=new Ext.Version(c[2])}if(b){o=f[Ext.Object.getKey(l.enginePrefixes,b[1])];m=new Ext.Version(b[2])}if(o=="Trident"&&k!="IE"){k="IE";var j=p.match(/.*rv:(\d+.\d+)/);if(j&&j.length){j=j[1];n=new Ext.Version(j)}}if(p.match(/FB/)&&k=="Other"){k=g.safari;o=f.webkit}if(p.match(/Android.*Chrome/g)){k="ChromeMobile"}if(p.match(/OPR/)){k="Opera";c=p.match(/OPR\/(\d+.\d+)/);n=new Ext.Version(c[1])}if(k==="Safari"&&p.match(/BB10/)){k="BlackBerry"}Ext.apply(this,{engineName:o,engineVersion:m,name:k,version:n});this.setFlag(k);if(n){this.setFlag(k+(n.getMajor()||""));this.setFlag(k+n.getShortVersion())}for(d in g){if(g.hasOwnProperty(d)){a=g[d];this.setFlag(a,k===a)}}this.setFlag(a);if(m){this.setFlag(o+(m.getMajor()||""));this.setFlag(o+m.getShortVersion())}for(d in f){if(f.hasOwnProperty(d)){a=f[d];this.setFlag(a,o===a)}}this.setFlag("Standalone",!!navigator.standalone);this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(window.top.ripple));this.setFlag("WebWorks",!!window.blackberry);if(typeof window.PhoneGap!="undefined"||typeof window.Cordova!="undefined"||typeof window.cordova!="undefined"){h=true;this.setFlag("PhoneGap");this.setFlag("Cordova")}else{if(!!window.isNK){h=true;this.setFlag("Sencha")}}if(/(Glass)/i.test(p)){this.setFlag("GoogleGlass")}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(p)){h=true}this.setFlag("WebView",h);this.isStrict=document.compatMode=="CSS1Compat";this.isSecure=/^https/i.test(window.location.protocol);return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:getPreferredTranslationMethod:,1,0,0,0,0,0,[Ext.env,"Browser"],);(Ext.cmd.derive("Ext.env.OS",Ext.Base,{statics:{names:{ios:"iOS",android:"Android",windowsPhone:"WindowsPhone",webos:"webOS",blackberry:"BlackBerry",rimTablet:"RIMTablet",mac:"MacOS",win:"Windows",tizen:"Tizen",linux:"Linux",bada:"Bada",chrome:"ChromeOS",other:"Other"},prefixes:{tizen:"(Tizen )",ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",windowsPhone:"Windows Phone ",blackberry:"(?:BlackBerry|BB)(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/",chrome:"CrOS "}},is:Ext.emptyFn,name:null,version:null,setFlag:constructor:,1,0,0,0,0,0,[Ext.env,"OS"],);(Ext.cmd.derive("Ext.env.Feature",Ext.Base,{constructor:getTestElement:isStyleSupported:isStyleSupportedWithoutPrefix:isEventSupported:getSupportedPropertyName:registerTest:Ext.Function.flexSetter(},1,0,0,0,0,0,[Ext.env,"Feature"],);(Ext.cmd.derive("Ext.dom.Query",Ext.Base,{select:selectNode:is:isXml:,0,0,0,0,0,0,[Ext.dom,"Query"],);(Ext.cmd.derive("Ext.dom.Helper",Ext.Base,{emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/tag|children|cn|html|tpl|tplData$/i,endRe:/end/i,attribXlat:{cls:"class",htmlFor:"for"},closeTags:{},decamelizeName:),generateMarkup:generateStyles:markup:applyStyles:createContextualFragment:insertHtml:insertBefore:function(a,c,b){return this.doInsert(a,c,b,"beforebegin")},insertAfter:function(a,c,b){return this.doInsert(a,c,b,"afterend")},insertFirst:function(a,c,b){return this.doInsert(a,c,b,"afterbegin")},append:overwrite:doInsert:createTemplate:,0,0,0,0,0,0,[Ext.dom,"Helper"],);(Ext.cmd.derive("Ext.mixin.Identifiable",Ext.Base,{statics:{uniqueIds:{}},isIdentifiable:true,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:setId:function(a){this.id=a},getId:,0,0,0,0,0,0,[Ext.mixin,"Identifiable"],0));(Ext.cmd.derive("Ext.dom.Element",Ext.Base,{alternateClassName:"Ext.Element",observableType:"element",statics:{CREATE_ATTRIBUTES:{style:"style",className:"className",cls:"cls",classList:"classList",text:"text",hidden:"hidden",html:"html",children:"children"},create:documentElement:null,cache:{},get:data:serializeForm:serializeNode:,isElement:true,constructor:attach:getUniqueId:setId:setHtml:function(a){this.dom.innerHTML=a},getHtml:function(){return this.dom.innerHTML},setText:redraw:isPainted:((),set:is:function(a){return Ext.DomQuery.is(this.dom,a)},getValue:getAttribute:setSizeState:destroy:,1,["element"],["element"],{element:true},["widget.element"],[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.dom,"Element",Ext,"Element"],);Ext.dom.Element.addStatics({numberRe:/\d+$/,unitRe:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,camelRe:/(-[a-z])/gi,cssRe:/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,opacityRe:/alpha\(opacity=(.*)\)/i,propertyCache:{},defaultUnit:"px",borders:{l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"},paddings:{l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"},margins:{l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"},addUnits:isAncestor:parseBox:unitizeBox:camelReplaceFn:normalize:fromPoint:parseStyles:);Ext.dom.Element.addMembers({appendChild:function(a){this.dom.appendChild(Ext.getDom(a));return this},removeChild:append:function(){this.appendChild.apply(this,arguments)},appendTo:insertBefore:function(a){a=Ext.getDom(a);a.parentNode.insertBefore(this.dom,a);return this},insertAfter:insertFirst:insertSibling:replace:replaceWith:doReplaceWith:createChild:wrap:wrapAllChildren:unwrapAllChildren:unwrap:detach:insertHtml:);Ext.dom.Element.override({getX:function(){return this.getXY()[0]},getY:getXY:getOffsetsTo:setX:setY:setXY:getLeft:function(){return parseInt(this.getStyle("left"),10)||0},getRight:function(){return parseInt(this.getStyle("right"),10)||0},getTop:function(){return parseInt(this.getStyle("top"),10)||0},getBottom:translatePoints:setBox:getBox:getPageBox:);Ext.dom.Element.addMembers({WIDTH:"width",HEIGHT:"height",MIN_WIDTH:"min-width",MIN_HEIGHT:"min-height",MAX_WIDTH:"max-width",MAX_HEIGHT:"max-height",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",VISIBILITY:1,DISPLAY:2,OFFSETS:3,SEPARATOR:"-",trimRe:/^\s+|\s+$/g,wordsRe:/\w/g,spacesRe:/\s+/,styleSplitRe:/\s*(?::|;)\s*/,transparentRe:/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,classNameSplitRegex:/[\s]+/,borders:{t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},paddings:{t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},margins:{t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},defaultUnit:"px",isSynchronized:false,synchronize:addCls:removeCls:replaceCls:hasCls:setCls:toggleCls:swapCls:setWidth:function(a){return this.setLengthValue(this.WIDTH,a)},setHeight:function(a){return this.setLengthValue(this.HEIGHT,a)},setSize:setMinWidth:function(a){return this.setLengthValue(this.MIN_WIDTH,a)},setMinHeight:function(a){return this.setLengthValue(this.MIN_HEIGHT,a)},setMaxWidth:function(a){return this.setLengthValue(this.MAX_WIDTH,a)},setMaxHeight:function(a){return this.setLengthValue(this.MAX_HEIGHT,a)},setTop:function(a){return this.setLengthValue(this.TOP,a)},setRight:function(a){return this.setLengthValue(this.RIGHT,a)},setBottom:function(a){return this.setLengthValue(this.BOTTOM,a)},setLeft:setMargin:function(b){var a=this.dom.style;if(b||b===0){b=this.self.unitizeBox((b===true)?5:b);a.setProperty("margin",b,"important")}else{a.removeProperty("margin-top");a.removeProperty("margin-right");a.removeProperty("margin-bottom");a.removeProperty("margin-left")}},setPadding:function(b){var a=this.dom.style;if(b||b===0){b=this.self.unitizeBox((b===true)?5:b);a.setProperty("padding",b,"important")}else{a.removeProperty("padding-top");a.removeProperty("padding-right");a.removeProperty("padding-bottom");a.removeProperty("padding-left")}},setBorder:setLengthValue:setVisible:getVisibilityMode:setVisibilityMode:show:hide:setVisibility:styleHooks:{},addStyles:isStyle:getStyleValue:getStyle:setStyle:getHeight:function(b){var c=this.dom,a=b?(c.clientHeight-this.getPadding("tb")):c.offsetHeight;return a>0?a:0},getWidth:getBorderWidth:function(a){return this.addStyles(a,this.borders)},getPadding:applyStyles:getSize:repaint:getMargin:translate:)});Ext.dom.Element.addMembers({getParent:function(){return Ext.get(this.dom.parentNode)},getFirstChild:contains:findParent:findParentNode:up:select:query:down:child:parent:function(a,b){return this.matchNode("parentNode","parentNode",a,b)},next:function(a,b){return this.matchNode("nextSibling","nextSibling",a,b)},prev:function(a,b){return this.matchNode("previousSibling","previousSibling",a,b)},first:function(a,b){return this.matchNode("nextSibling","firstChild",a,b)},last:matchNode:isAncestor:);(Ext.cmd.derive("Ext.dom.CompositeElementLite",Ext.Base,{alternateClassName:["Ext.CompositeElementLite","Ext.CompositeElement"],statics:{importElementMethods:function(){}},constructor:isComposite:true,getElement:transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:invoke:item:addListener:each:fill:filter:indexOf:replaceElement:clear:function(){this.elements=[]},addElements:first:function(){return this.item(0)},last:contains:removeElement:,1,0,0,0,0,0,[Ext.dom,"CompositeElementLite",Ext,"CompositeElementLite",Ext,"CompositeElement"],);(Ext.cmd.derive("Ext.event.ListenerStack",Ext.Base,{currentOrder:"current",length:0,constructor:add:getAt:getAll:count:create:remove:,1,0,0,0,0,0,[Ext.event,"ListenerStack"],0));(Ext.cmd.derive("Ext.event.Controller",Ext.Base,{isFiring:false,listenerStack:null,constructor:setInfo:function(a){this.info=a},getInfo:function(){return this.info},setListenerStacks:function(a){this.listenerStacks=a},fire:doFire:connect:function(a){this.connectingController=a},resume:isInterrupted:stop:pause:,1,0,0,0,0,0,[Ext.event,"Controller"],0));(Ext.cmd.derive("Ext.event.Dispatcher",Ext.Base,{statics:{getInstance:setInstance:function(a){this.instance=a;return this}},config:{publishers:{}},wildcard:"*",constructor:getListenerStack:getController:applyPublishers:registerPublisher:getCachedActivePublishers:cacheActivePublishers:getActivePublishers:hasListener:addListener:function(e,f,b){var g=this.getActivePublishers(e,b),d=g.length,c,a;a=this.doAddListener.apply(this,arguments);if(a&&d>0){for(c=0;c<d;c++){g[c].subscribe(f,b)}}return a},doAddListener:removeListener:doRemoveListener:clearListeners:dispatchEvent:doDispatchEvent:getWildcardListenerStacks:getPublisher:function(a){return this.getPublishers()[a]}},1,0,0,0,0,0,[Ext.event,"Dispatcher"],0));(Ext.cmd.derive("Ext.mixin.Mixin",Ext.Base,{onClassExtended:,0,0,0,0,0,0,[Ext.mixin,"Mixin"],0));(Ext.cmd.derive("Ext.mixin.Observable",Ext.mixin.Mixin,{mixinConfig:{id:"observable",hooks:{destroy:"destroy"}},alternateClassName:"Ext.util.Observable",isObservable:true,observableType:"observable",validIdRegex:/^([\w\-]+)$/,observableIdPrefix:"#",listenerOptionsRegex:/^(?:delegate|single|delay|buffer|args|prepend)$/,eventFiringSuspended:false,config:{listeners:null,bubbleEvents:null},constructor:function(a){this.initConfig(a)},applyListeners:function(a){if(a){this.addListener(a)}},applyBubbleEvents:getOptimizedObservableId:function(){return this.observableId},getObservableId:getOptimizedEventDispatcher:function(){return this.eventDispatcher},getEventDispatcher:getManagedListeners:getUsedSelectors:fireEvent:fireAction:doFireEvent:doAddListener:addDispatcherListener:doRemoveListener:removeDispatcherListener:clearManagedListeners:changeListener:addListener:function(b,e,d,c,a){return this.changeListener(this.doAddListener,b,e,d,c,a)},toggleListener:addBeforeListener:function(a,d,c,b){return this.addListener(a,d,c,b,"before")},addAfterListener:function(a,d,c,b){return this.addListener(a,d,c,b,"after")},removeListener:removeBeforeListener:function(a,d,c,b){return this.removeListener(a,d,c,b,"before")},removeAfterListener:clearListeners:hasListener:suspendEvents:function(){this.eventFiringSuspended=true},resumeEvents:relayEvents:relayEvent:createEventRelayer:enableBubble:createEventBubbler:getBubbleTarget:function(){return false},destroy:addEvents:Ext.emptyFn},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.mixin,"Observable",Ext.util,"Observable"],);(Ext.cmd.derive("Ext.Evented",Ext.Base,{alternateClassName:"Ext.EventedBase",statics:{generateSetter:,initialized:false,constructor:initialize:doSet:onClassExtended:,1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext,"Evented",Ext,"EventedBase"],0));(Ext.cmd.derive("Ext.AbstractComponent",Ext.Evented,{onClassExtended:getElementConfig:Ext.emptyFn,referenceAttributeName:"reference",referenceSelector:"[reference]",addReferenceNode:initElement:,0,0,0,0,0,0,[Ext,"AbstractComponent"],0));(Ext.cmd.derive("Ext.util.HashMap",Ext.Base,{constructor:getCount:function(){return this.length},getData:getKey:function(a){return a.id},add:replace:remove:removeByKey:get:function(a){return this.map[a]},clear:containsKey:function(a){return this.map[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:each:clone:findKey:,1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.util,"HashMap"],0));(Ext.cmd.derive("Ext.AbstractManager",Ext.Base,{typeName:"type",constructor:get:function(a){return this.all.get(a)},register:function(a){this.all.add(a)},unregister:function(a){this.all.remove(a)},registerType:isRegistered:function(a){return this.types[a]!==undefined},create:onAvailable:each:getCount:function(){return this.all.getCount()}},1,0,0,0,0,0,[Ext,"AbstractManager"],0));(Ext.cmd.derive("Ext.mixin.Traversable",Ext.mixin.Mixin,{mixinConfig:{id:"traversable"},setParent:function(a){this.parent=a;return this},hasParent:getParent:function(){return this.parent},getAncestors:getAncestorIds:,0,0,0,0,0,0,[Ext.mixin,"Traversable"],0));(Ext.cmd.derive("Ext.ComponentManager",Ext.Base,{alternateClassName:"Ext.ComponentMgr",singleton:true,constructor:register:unregister:isRegistered:get:function(a){return this.map[a]},create:registerType:Ext.emptyFn},1,0,0,0,0,0,[Ext,"ComponentManager",Ext,"ComponentMgr"],0));(();(Ext.cmd.derive("Ext.util.Format",Ext.Base,{singleton:true,defaultDateFormat:"m/d/Y",escapeRe:/('|\\)/g,trimRe:/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,formatRe:/\{(\d+)\}/g,escapeRegexRe:/([-.*+?^${}()|[\]\/\\])/g,dashesRe:/-/g,iso8601TestRe:/\d\dT\d\d/,iso8601SplitRe:/[- :T\.Z\+]/,ellipsis:escapeRegex:function(a){return a.replace(Ext.util.Format.escapeRegexRe,"\\$1")},escape:function(a){return a.replace(Ext.util.Format.escapeRe,"\\$1")},toggle:trim:leftPad:format:htmlEncode:function(a){return !a?a:String(a).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},htmlDecode:date:,0,0,0,0,0,0,[Ext.util,"Format"],0));(Ext.cmd.derive("Ext.Template",Ext.Base,{inheritableStatics:{from:,constructor:isTemplate:true,disableFormats:false,re:/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,apply:applyOut:applyTemplate:function(){return this.apply.apply(this,arguments)},set:compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:insertFirst:function(b,a,c){return this.doInsert("afterBegin",b,a,c)},insertBefore:function(b,a,c){return this.doInsert("beforeBegin",b,a,c)},insertAfter:function(b,a,c){return this.doInsert("afterEnd",b,a,c)},append:doInsert:overwrite:,1,0,0,0,0,0,[Ext,"Template"],0));(Ext.cmd.derive("Ext.XTemplateParser",Ext.Base,{constructor:doTpl:Ext.emptyFn,parse:topRe:/(?:(\{\%)|(\{\[)|\{([^{}]*)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|exec|switch|case|eval)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext,"XTemplateParser"],0));(Ext.cmd.derive("Ext.XTemplateCompiler",Ext.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE6||Ext.isIE7,useFormat:true,propNameRe:/^[\w\d\$]*$/,compile:generate:doText:doExpr:doTag:doElse:function(){this.body.push("} else {\n")},doEval:doIf:function(b,c){var a=this;if(b==="."){a.body.push("if (values) {\n")}else{if(a.propNameRe.test(b)){a.body.push("if (",a.parseTag(b),") {\n")}else{a.body.push("if (",a.addFn(b),a.callFn,") {\n")}}if(c.exec){a.doExec(c.exec)}},doElseIf:doSwitch:doCase:doDefault:doEnd:doFor:createArrayTest:("isArray" in Array)?function(a){return"Array.isArray(c"+a+")"}:doExec:addFn:parseTag:evalTpl:newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?/},0,0,0,0,0,0,[Ext,"XTemplateCompiler"],);(Ext.cmd.derive("Ext.XTemplate",Ext.Template,{emptyObj:{},apply:applyOut:compile:statics:{getTpl:},0,0,0,0,0,0,[Ext,"XTemplate"],0));(Ext.cmd.derive("Ext.behavior.Behavior",Ext.Base,{constructor:onComponentDestroy:Ext.emptyFn},1,0,0,0,0,0,[Ext.behavior,"Behavior"],0));(Ext.cmd.derive("Ext.fx.easing.Abstract",Ext.Base,{config:{startTime:0,startValue:0},isEasing:true,isEnded:false,constructor:function(a){this.initConfig(a);return this},applyStartTime:updateStartTime:reset:function(){this.isEnded=false},getValue:Ext.emptyFn},1,0,0,0,0,0,[Ext.fx.easing,"Abstract"],0));(Ext.cmd.derive("Ext.fx.easing.Linear",Ext.fx.easing.Abstract,{config:{duration:0,endValue:0},updateStartValue:updateEndValue:getValue:,0,0,0,0,["easing.linear"],0,[Ext.fx.easing,"Linear"],0));(Ext.cmd.derive("Ext.util.translatable.Abstract",Ext.Evented,{config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:false,isTranslatable:true,constructor:function(a){this.initConfig(a)},factoryEasing:applyEasing:applyEasingX:function(a){return this.factoryEasing(a)},applyEasingY:function(a){return this.factoryEasing(a)},doTranslate:Ext.emptyFn,translate:translateAxis:animate:translateAnimated:doAnimationFrame:stopAnimation:refresh:destroy:,1,0,0,0,0,0,[Ext.util.translatable,"Abstract"],0));(Ext.cmd.derive("Ext.util.translatable.Dom",Ext.util.translatable.Abstract,{config:{element:null},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(){this.refresh()}},0,0,0,0,0,0,[Ext.util.translatable,"Dom"],0));(Ext.cmd.derive("Ext.util.translatable.CssTransform",Ext.util.translatable.Dom,{doTranslate:destroy:,0,0,0,0,0,0,[Ext.util.translatable,"CssTransform"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollPosition",Ext.util.translatable.Dom,{type:"scrollposition",config:{useWrapper:true},getWrapper:doTranslate:destroy:,0,0,0,0,0,0,[Ext.util.translatable,"ScrollPosition"],0));(Ext.cmd.derive("Ext.util.translatable.CssPosition",Ext.util.translatable.Dom,{doTranslate:destroy:,0,0,0,0,0,0,[Ext.util.translatable,"CssPosition"],0));(Ext.cmd.derive("Ext.util.Translatable",Ext.Base,{constructor:,1,0,0,0,0,0,[Ext.util,"Translatable"],0));(Ext.cmd.derive("Ext.behavior.Translatable",Ext.behavior.Behavior,{setConfig:getTranslatable:function(){return this.translatable},onTranslatableDestroy:function(){delete this.translatable},onComponentDestroy:function(){var a=this.translatable;if(a){a.destroy()}}},0,0,0,0,0,0,[Ext.behavior,"Translatable"],0));(Ext.cmd.derive("Ext.util.Draggable",Ext.Base,{isDraggable:true,config:{cls:"x-draggable",draggingCls:"x-dragging",element:null,constraint:"container",disabled:null,direction:"both",initialOffset:{x:0,y:0},translatable:{}},DIRECTION_BOTH:"both",DIRECTION_VERTICAL:"vertical",DIRECTION_HORIZONTAL:"horizontal",defaultConstraint:{min:{x:-Infinity,y:-Infinity},max:{x:Infinity,y:Infinity}},containerWidth:0,containerHeight:0,width:0,height:0,constructor:applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:updateInitialOffset:updateCls:function(a){this.getElement().addCls(a)},applyTranslatable:setExtraConstraint:addExtraConstraint:applyConstraint:updateConstraint:function(){this.refreshOffset()},getContainerConstraint:getContainer:onElementResize:function(a,b){this.width=b.width;this.height=b.height;this.refresh()},onContainerResize:onContainerDestroy:detachListeners:function(){this.getElement().un(this.listeners)},isAxisEnabled:onPress:function(a){this.fireAction("touchstart",[this,a])},onRelease:onDragStart:initDragStart:onDrag:doDrag:onDragEnd:setOffset:getOffset:function(){return this.offset},refreshConstraint:function(){this.setConstraint(this.currentConstraint)},refreshOffset:refresh:enable:function(){return this.setDisabled(false)},disable:function(){return this.setDisabled(true)},destroy:,1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Draggable"],function(){}));(Ext.cmd.derive("Ext.behavior.Draggable",Ext.behavior.Behavior,{setConfig:getDraggable:function(){return this.draggable},onDraggableDestroy:onComponentDestroy:,0,0,0,0,0,0,[Ext.behavior,"Draggable"],0));(("x-");(Ext.cmd.derive("Ext.layout.Abstract",Ext.Base,{isLayout:true,constructor:function(a){this.initialConfig=a},setContainer:onItemAdd:function(){},onItemRemove:function(){},onItemMove:function(){},onItemCenteredChange:function(){},onItemFloatingChange:function(){},onItemDockedChange:function(){},onItemInnerStateChange:function(){}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.layout,"Abstract"],0));(Ext.cmd.derive("Ext.mixin.Bindable",Ext.mixin.Mixin,{mixinConfig:{id:"bindable"},bind:unbind:,0,0,0,0,0,0,[Ext.mixin,"Bindable"],0));(Ext.cmd.derive("Ext.util.Wrapper",Ext.Base,{constructor:bindSize:onBoundSizeChange:wrap:destroy:,1,0,0,0,0,[[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable]],[Ext.util,"Wrapper"],0));(Ext.cmd.derive("Ext.layout.wrapper.BoxDock",Ext.Base,{config:{direction:"horizontal",element:{className:"x-dock"},bodyElement:{className:"x-dock-body"},innerWrapper:null,sizeState:false,container:null},positionMap:{top:"start",left:"start",bottom:"end",right:"end"},constructor:function(a){this.items={start:[],end:[]};this.itemsCount=0;this.initConfig(a)},addItems:function(a){var b,d,c;for(b=0,d=a.length;b<d;b++){c=a[b];this.addItem(c)}},addItem:removeItem:getItemsSlice:function(c){var a=this.getContainer(),b=this.items,h=[],g,d,f,e;for(g=b.start,d=0,f=g.length;d<f;d++){e=g[d];if(a.indexOf(e)>c){h.push(e)}}for(g=b.end,d=0,f=g.length;d<f;d++){e=g[d];if(a.indexOf(e)>c){h.push(e)}}return h},applyElement:function(a){return Ext.Element.create(a)},updateElement:function(a){a.addCls("x-dock-"+this.getDirection())},applyBodyElement:function(a){return Ext.Element.create(a)},updateBodyElement:function(a){this.getElement().append(a)},updateInnerWrapper:updateSizeState:function(b){var a=this.getInnerWrapper();this.getElement().setSizeState(b);if(a){a.setSizeState(b)}},destroy:,1,0,0,0,0,0,[Ext.layout.wrapper,"BoxDock"],0));(Ext.cmd.derive("Ext.layout.wrapper.Inner",Ext.Base,{config:{sizeState:null,container:null},constructor:function(a){this.initConfig(a)},getElement:setInnerWrapper:Ext.emptyFn,getInnerWrapper:Ext.emptyFn},1,0,0,0,0,0,[Ext.layout.wrapper,"Inner"],0));(Ext.cmd.derive("Ext.layout.Default",Ext.layout.Abstract,{isAuto:true,config:{animation:null},centerWrapperClass:"x-center",dockWrapperClass:"x-dock",positionMap:{top:"start",left:"start",middle:"center",bottom:"end",right:"end"},positionDirectionMap:{top:"vertical",bottom:"vertical",left:"horizontal",right:"horizontal"},setContainer:monitorSizeStateChange:function(){this.monitorSizeStateChange=Ext.emptyFn;this.container.on("sizestatechange","onContainerSizeStateChange",this)},monitorSizeFlagsChange:onItemAdd:onItemInnerStateChange:insertInnerItem:insertBodyItem:removeInnerItem:function(a){a.element.detach()},removeBodyItem:onItemRemove:onItemMove:onItemCenteredChange:onItemFloatingChange:onBeforeItemDockedChange:function(a,c,b){if(b){this.undockItem(a)}},onAfterItemDockedChange:onContainerSizeStateChange:onContainerSizeFlagsChange:refreshDockedItemLayoutSizeFlags:dockItem:getDockWrapper:undockItem:destroy:,0,0,0,0,["layout.auto","layout.default"],0,[Ext.layout,"Default"],0));(Ext.cmd.derive("Ext.layout.Box",Ext.layout.Default,{config:{orient:"horizontal",align:"start",pack:"start"},layoutBaseClass:"x-layout-tablebox",itemClass:"x-layout-tablebox-item",setContainer:onItemInnerStateChange:function(b,a){Ext.layout.Default.prototype.onItemInnerStateChange.apply(this,arguments);b.toggleCls(this.itemClass,a)},onItemFlexChange:function(){}},0,0,0,0,["layout.tablebox"],0,[Ext.layout,"Box"],0));(Ext.cmd.derive("Ext.fx.layout.card.Abstract",Ext.Evented,{isAnimation:true,config:{direction:"left",duration:null,reverse:null,layout:null},updateLayout:function(){this.enable()},enable:disable:onActiveItemChange:Ext.emptyFn,destroy:,0,0,0,0,0,0,[Ext.fx.layout.card,"Abstract"],0));(Ext.cmd.derive("Ext.fx.State",Ext.Base,{isAnimatable:{"background-color":true,"background-image":true,"background-position":true,"border-bottom-color":true,"border-bottom-width":true,"border-color":true,"border-left-color":true,"border-left-width":true,"border-right-color":true,"border-right-width":true,"border-spacing":true,"border-top-color":true,"border-top-width":true,"border-width":true,bottom:true,color:true,crop:true,"font-size":true,"font-weight":true,height:true,left:true,"letter-spacing":true,"line-height":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,opacity:true,"outline-color":true,"outline-offset":true,"outline-width":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,right:true,"text-indent":true,"text-shadow":true,top:true,"vertical-align":true,visibility:true,width:true,"word-spacing":true,"z-index":true,zoom:true,transform:true},constructor:setConfig:setRaw:clear:setTransform:set:unset:getData:function(){return this.data}},1,0,0,0,0,0,[Ext.fx,"State"],0));(Ext.cmd.derive("Ext.fx.animation.Abstract",Ext.Evented,{isAnimation:true,config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:false,replacePrevious:true},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\d\.]+)%$/,constructor:applyElement:function(a){return Ext.get(a)},applyBefore:function(a,b){if(a){return Ext.factory(a,Ext.fx.State,b)}},applyAfter:setFrom:function(a){return this.setState(this.STATE_FROM,a)},setTo:function(a){return this.setState(this.STATE_TO,a)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:setStates:getStates:function(){return this.states},stop:destroy:setState:getState:getData:,1,0,0,0,0,0,[Ext.fx.animation,"Abstract"],0));(Ext.cmd.derive("Ext.fx.animation.Slide",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.SlideIn",config:{direction:"left",out:false,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:true,useCssTransform:true},reverseDirectionMap:{up:"down",down:"up",left:"right",right:"left"},applyEasing:getContainerBox:getElementBox:getData:,0,0,0,0,["animation.slide","animation.slideIn"],0,[Ext.fx.animation,"Slide",Ext.fx.animation,"SlideIn"],0));(Ext.cmd.derive("Ext.fx.animation.SlideOut",Ext.fx.animation.Slide,{config:{out:true}},0,0,0,0,["animation.slideOut"],0,[Ext.fx.animation,"SlideOut"],0));(Ext.cmd.derive("Ext.fx.animation.Fade",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.FadeIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:,0,0,0,0,["animation.fade","animation.fadeIn"],0,[Ext.fx.animation,"Fade",Ext.fx.animation,"FadeIn"],0));(Ext.cmd.derive("Ext.fx.animation.FadeOut",Ext.fx.animation.Fade,{config:{out:true,before:{}}},0,0,0,0,["animation.fadeOut"],0,[Ext.fx.animation,"FadeOut"],0));(Ext.cmd.derive("Ext.fx.animation.Flip",Ext.fx.animation.Abstract,{config:{easing:"ease-in",direction:"right",half:false,out:null},getData:,0,0,0,0,["animation.flip"],0,[Ext.fx.animation,"Flip"],0));(Ext.cmd.derive("Ext.fx.animation.Pop",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.PopIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null}},getData:,0,0,0,0,["animation.pop","animation.popIn"],0,[Ext.fx.animation,"Pop",Ext.fx.animation,"PopIn"],0));(Ext.cmd.derive("Ext.fx.animation.PopOut",Ext.fx.animation.Pop,{config:{out:true,before:{}}},0,0,0,0,["animation.popOut"],0,[Ext.fx.animation,"PopOut"],0));(Ext.cmd.derive("Ext.fx.Animation",Ext.Base,{constructor:,1,0,0,0,0,0,[Ext.fx,"Animation"],0));(Ext.cmd.derive("Ext.fx.layout.card.Style",Ext.fx.layout.card.Abstract,{config:{inAnimation:{before:{visibility:null},preserveEndState:false,replacePrevious:true},outAnimation:{preserveEndState:false,replacePrevious:true}},constructor:updateDirection:function(a){this.getInAnimation().setDirection(a);this.getOutAnimation().setDirection(a)},updateDuration:function(a){this.getInAnimation().setDuration(a);this.getOutAnimation().setDuration(a)},updateReverse:function(a){this.getInAnimation().setReverse(a);this.getOutAnimation().setReverse(a)},incrementEnd:applyInAnimation:function(b,a){return Ext.factory(b,Ext.fx.Animation,a)},applyOutAnimation:function(b,a){return Ext.factory(b,Ext.fx.Animation,a)},updateInAnimation:function(a){a.setScope(this)},updateOutAnimation:onActiveItemChange:destroy:,1,0,0,0,0,0,[Ext.fx.layout.card,"Style"],0));(Ext.cmd.derive("Ext.fx.layout.card.Slide",Ext.fx.layout.card.Style,{config:{inAnimation:{type:"slide",easing:"ease-out"},outAnimation:{type:"slide",easing:"ease-out",out:true}},updateReverse:function(a){this.getInAnimation().setReverse(a);this.getOutAnimation().setReverse(a)}},0,0,0,0,["fx.layout.card.slide"],0,[Ext.fx.layout.card,"Slide"],0));(Ext.cmd.derive("Ext.fx.layout.card.Cover",Ext.fx.layout.card.Style,{config:{reverse:null,inAnimation:{before:{"z-index":100},after:{"z-index":0},type:"slide",easing:"ease-out"},outAnimation:{easing:"ease-out",from:{opacity:0.99},to:{opacity:1},out:true}},updateReverse:function(a){this.getInAnimation().setReverse(a);this.getOutAnimation().setReverse(a)}},0,0,0,0,["fx.layout.card.cover"],0,[Ext.fx.layout.card,"Cover"],0));(Ext.cmd.derive("Ext.fx.layout.card.Reveal",Ext.fx.layout.card.Style,{config:{inAnimation:{easing:"ease-out",from:{opacity:0.99},to:{opacity:1}},outAnimation:{before:{"z-index":100},after:{"z-index":0},type:"slide",easing:"ease-out",out:true}},updateReverse:,0,0,0,0,["fx.layout.card.reveal"],0,[Ext.fx.layout.card,"Reveal"],0));(Ext.cmd.derive("Ext.fx.layout.card.Fade",Ext.fx.layout.card.Style,{config:{reverse:null,inAnimation:{type:"fade",easing:"ease-out"},outAnimation:{type:"fade",easing:"ease-out",out:true}}},0,0,0,0,["fx.layout.card.fade"],0,[Ext.fx.layout.card,"Fade"],0));(Ext.cmd.derive("Ext.fx.layout.card.Flip",Ext.fx.layout.card.Style,{config:{duration:500,inAnimation:{type:"flip",half:true,easing:"ease-out",before:{"backface-visibility":"hidden"},after:{"backface-visibility":null}},outAnimation:{type:"flip",half:true,easing:"ease-in",before:{"backface-visibility":"hidden"},after:{"backface-visibility":null},out:true}},onActiveItemChange:updateDuration:function(d){var c=d/2,b=this.getInAnimation(),a=this.getOutAnimation();b.setDelay(c);b.setDuration(c);a.setDuration(c)}},0,0,0,0,["fx.layout.card.flip"],0,[Ext.fx.layout.card,"Flip"],0));(Ext.cmd.derive("Ext.fx.layout.card.Pop",Ext.fx.layout.card.Style,{config:{duration:500,inAnimation:{type:"pop",easing:"ease-out"},outAnimation:{type:"pop",easing:"ease-in",out:true}},updateDuration:,0,0,0,0,["fx.layout.card.pop"],0,[Ext.fx.layout.card,"Pop"],0));(Ext.cmd.derive("Ext.fx.layout.card.Scroll",Ext.fx.layout.card.Abstract,{config:{duration:150},constructor:function(a){this.initConfig(a)},getEasing:updateDuration:function(a){this.getEasing().setDuration(a)},onActiveItemChange:startAnimation:doAnimationFrame:stopAnimation:,1,0,0,0,["fx.layout.card.scroll"],0,[Ext.fx.layout.card,"Scroll"],0));(Ext.cmd.derive("Ext.fx.layout.Card",Ext.Base,{constructor:,1,0,0,0,0,0,[Ext.fx.layout,"Card"],0));(Ext.cmd.derive("Ext.layout.Card",Ext.layout.Default,{isCard:true,layoutClass:"x-layout-card",itemClass:"x-layout-card-item",applyAnimation:updateAnimation:setContainer:onContainerInitialized:onContainerActiveItemChange:onItemInnerStateChange:doActiveItemChange:destroy:,0,0,0,0,["layout.card"],0,[Ext.layout,"Card"],0));(Ext.cmd.derive("Ext.layout.Fit",Ext.layout.Default,{isFit:true,layoutClass:"x-layout-fit",itemClass:"x-layout-fit-item",setContainer:onContainerSizeFlagsChange:onItemInnerStateChange:,0,0,0,0,["layout.fit"],0,[Ext.layout,"Fit"],0));(Ext.cmd.derive("Ext.layout.FlexBox",Ext.layout.Box,{config:{align:"stretch"},layoutBaseClass:"x-layout-box",itemClass:"x-layout-box-item",setContainer:applyOrient:function(a){return a},updateOrient:onItemInnerStateChange:refreshItemSizeState:refreshAllItemSizedStates:onContainerSizeFlagsChange:onItemSizeChange:doItemSizeChange:onItemFlexChange:doItemFlexChange:redrawContainer:setItemFlex:convertPosition:applyAlign:function(a){return this.convertPosition(a)},updateAlign:applyPack:updatePack:,0,0,0,0,["layout.box"],0,[Ext.layout,"FlexBox"],0));(Ext.cmd.derive("Ext.layout.Float",Ext.layout.Default,{config:{direction:"left"},layoutClass:"layout-float",itemClass:"layout-float-item",setContainer:onItemInnerStateChange:updateDirection:,0,0,0,0,["layout.float"],0,[Ext.layout,"Float"],0));(Ext.cmd.derive("Ext.layout.HBox",Ext.layout.FlexBox,{},0,0,0,0,["layout.hbox"],0,[Ext.layout,"HBox"],0));(Ext.cmd.derive("Ext.layout.VBox",Ext.layout.FlexBox,{config:{orient:"vertical"}},0,0,0,0,["layout.vbox"],0,[Ext.layout,"VBox"],0));(Ext.cmd.derive("Ext.layout.wrapper.Dock",Ext.Base,{config:{direction:"horizontal",element:{className:"x-dock"},bodyElement:{className:"x-dock-body"},innerWrapper:null,sizeState:false,container:null},positionMap:{top:"start",left:"start",bottom:"end",right:"end"},constructor:addItems:addItem:removeItem:getItemsSlice:applyElement:function(a){return Ext.Element.create(a)},updateElement:applyBodyElement:updateBodyElement:function(a){this.getElement().append(a)},updateInnerWrapper:updateSizeState:destroy:,1,0,0,0,0,0,[Ext.layout.wrapper,"Dock"],0));(Ext.cmd.derive("Ext.util.Filter",Ext.Base,{isFilter:true,config:{property:null,value:null,filterFn:Ext.emptyFn,anyMatch:false,exactMatch:false,caseSensitive:false,root:null,id:undefined,scope:null},applyId:constructor:function(a){this.initConfig(a)},applyFilterFn:createFilterFn:createValueMatcher:,1,0,0,0,0,0,[Ext.util,"Filter"],0));(Ext.cmd.derive("Ext.util.AbstractMixedCollection",Ext.Base,{constructor:allowFunctions:false,add:getKey:function(a){return a.id},replace:addAll:each:eachKey:findBy:insert:remove:function(a){return this.removeAt(this.indexOf(a))},removeAll:removeAt:removeAtKey:getCount:function(){return this.length},indexOf:function(a){return Ext.Array.indexOf(this.items,a)},indexOfKey:function(a){return Ext.Array.indexOf(this.keys,a)},get:getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:containsKey:clear:first:last:sum:collect:extractValues:getRange:filter:filterBy:findIndex:findIndexBy:createValueMatcher:clone:,1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.util,"AbstractMixedCollection"],0));(Ext.cmd.derive("Ext.util.Sorter",Ext.Base,{isSorter:true,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:undefined},constructor:function(a){this.initConfig(a)},applyId:createSortFunction:defaultSortFn:updateDirection:function(){this.updateSortFn()},updateSortFn:toggle:,1,0,0,0,0,0,[Ext.util,"Sorter"],0));(Ext.cmd.derive("Ext.util.Sortable",Ext.mixin.Mixin,{isSortable:true,mixinConfig:{hooks:{destroy:"destroy"}},defaultSortDirection:"ASC",initSortable:sort:onBeforeSort:Ext.emptyFn,decodeSorters:getSorters:function(){return this.sorters.items},destroy:,0,0,0,0,0,0,[Ext.util,"Sortable"],0));(Ext.cmd.derive("Ext.util.MixedCollection",Ext.util.AbstractMixedCollection,{constructor:doSort:function(a){this.sortBy(a)},_sort:sortBy:reorder:sortByKey:,1,0,0,0,0,[["sortable",Ext.util.Sortable]],[Ext.util,"MixedCollection"],0));(Ext.cmd.derive("Ext.ItemCollection",Ext.util.MixedCollection,{getKey:function(a){return a.getItemId()},has:,0,0,0,0,0,0,[Ext,"ItemCollection"],0));(Ext.cmd.derive("Ext.fx.easing.Momentum",Ext.fx.easing.Abstract,{config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:updateStartVelocity:updateAcceleration:getValue:getFrictionFactor:getVelocity:,0,0,0,0,0,0,[Ext.fx.easing,"Momentum"],0));(Ext.cmd.derive("Ext.fx.easing.Bounce",Ext.fx.easing.Abstract,{config:{springTension:0.3,acceleration:30,startVelocity:0},getValue:,0,0,0,0,0,0,[Ext.fx.easing,"Bounce"],0));(Ext.cmd.derive("Ext.fx.easing.BoundMomentum",Ext.fx.easing.Abstract,{config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:0.01,startVelocity:0},applyMomentum:function(a,b){return Ext.factory(a,Ext.fx.easing.Momentum,b)},applyBounce:updateStartTime:updateStartVelocity:function(a){this.getMomentum().setStartVelocity(a)},updateStartValue:reset:getValue:,0,0,0,0,0,0,[Ext.fx.easing,"BoundMomentum"],0));(Ext.cmd.derive("Ext.fx.easing.EaseOut",Ext.fx.easing.Linear,{config:{exponent:4,duration:1500},getValue:,0,0,0,0,["easing.ease-out"],0,[Ext.fx.easing,"EaseOut"],0));(Ext.cmd.derive("Ext.scroll.Scroller",Ext.Evented,{config:{element:null,direction:"auto",fps:"auto",disabled:null,directionLock:false,momentumEasing:{momentum:{acceleration:30,friction:0.5},bounce:{acceleration:30,springTension:0.3},minVelocity:1},bounceEasing:{duration:400},outOfBoundRestrictFactor:0.5,startMomentumResetTime:300,maxAbsoluteVelocity:6,containerSize:"auto",size:"auto",autoRefresh:true,initialOffset:{x:0,y:0},slotSnapSize:{x:0,y:0},slotSnapOffset:{x:0,y:0},slotSnapEasing:{duration:150},translatable:{translationMethod:"auto",useWrapper:false}},cls:"x-scroll-scroller",containerCls:"x-scroll-container",dragStartTime:0,dragEndTime:0,isDragging:false,isAnimating:false,constructor:applyElement:updateElement:applyTranslatable:updateTranslatable:updateFps:attachListeneners:function(){this.getContainer().on(this.listeners)},detachListeners:updateDisabled:updateInitialOffset:applyDirection:updateDirection:isAxisEnabled:applyMomentumEasing:function(b){var a=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyBounceEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},updateBounceEasing:applySlotSnapEasing:getMinPosition:getMaxPosition:refreshMaxPosition:applyContainerSize:applySize:updateAutoRefresh:applySlotSnapSize:function(a){if(typeof a=="number"){return{x:a,y:a}}return a},applySlotSnapOffset:getContainer:refresh:onElementResize:function(a,b){this.setSize({x:b.width,y:b.height});this.refresh()},onContainerResize:scrollTo:scrollToTop:scrollToEnd:scrollBy:onTouchStart:function(){this.isTouching=true;this.stopAnimation()},onTouchEnd:onDragStart:onAxisDrag:onDrag:onDragEnd:getAnimationEasing:onAnimationFrame:onAnimationEnd:function(){this.snapToBoundary();this.onScrollEnd()},stopAnimation:onScrollEnd:snapToSlot:getSnapPosition:snapToBoundary:destroy:,1,0,0,0,0,0,[Ext.scroll,"Scroller"],function(){}));());((this);(Ext.cmd.derive("Ext.TaskQueue",Ext.Base,{singleton:true,pending:false,mode:true,constructor:requestRead:function(c,b,a){this.request(true);this.readQueue.push(arguments)},requestWrite:request:watch:run:,1,0,0,0,0,0,[Ext,"TaskQueue"],0));(Ext.cmd.derive("Ext.scroll.indicator.Abstract",Ext.Component,{config:{baseCls:"x-scroll-indicator",axis:"x",value:null,length:null,minLength:6,hidden:true,ui:"dark",autoHide:true},cachedConfig:{ratio:1,barCls:"x-scroll-bar",active:true},barElement:null,barLength:0,gapLength:0,getElementConfig:applyRatio:refresh:updateBarCls:function(a){this.barElement.addCls(a)},updateAxis:updateValue:updateActive:doSetHidden:applyLength:updateLength:doUpdateLength:setOffset:doSetOffset:,0,0,["component"],{component:true},0,0,[Ext.scroll.indicator,"Abstract"],0));(Ext.cmd.derive("Ext.scroll.indicator.CssTransform",Ext.scroll.indicator.Abstract,{config:{cls:"csstransform"}},0,0,["component"],{component:true},0,0,[Ext.scroll.indicator,"CssTransform"],0));(Ext.cmd.derive("Ext.scroll.indicator.ScrollPosition",Ext.scroll.indicator.Abstract,{config:{cls:"scrollposition"},getElementConfig:updateValue:doUpdateLength:doSetOffset:,0,0,["component"],{component:true},0,0,[Ext.scroll.indicator,"ScrollPosition"],0));(Ext.cmd.derive("Ext.scroll.indicator.Rounded",Ext.scroll.indicator.Abstract,{config:{cls:"rounded"},constructor:getElementConfig:refresh:doUpdateLength:function(c){if(!this.isDestroyed){var b=this.getAxis(),a=this.endElement,e=this.middleElement.dom.style,d=this.endElementLength,h=c-d,g=h-this.startElementLength,f=this.transformPropertyName;if(b==="x"){a.translate(h,0);e[f]="translate3d(0, 0, 0) scaleX("+g+")";e.transform="translate3d(0, 0, 0) scaleX("+g+")"}else{a.translate(0,h);e[f]="translate3d(0, 0, 0) scaleY("+g+")";e.transform="translate3d(0, 0, 0) scaleY("+g+")"}}}},1,0,["component"],{component:true},0,0,[Ext.scroll.indicator,"Rounded"],0));(Ext.cmd.derive("Ext.scroll.Indicator",Ext.Base,{alternateClassName:"Ext.util.Indicator",constructor:,1,0,0,0,0,0,[Ext.scroll,"Indicator",Ext.util,"Indicator"],0));(Ext.cmd.derive("Ext.scroll.View",Ext.Evented,{alternateClassName:"Ext.util.ScrollView",config:{indicatorsUi:"dark",element:null,scroller:{},indicators:{x:{axis:"x"},y:{axis:"y"}},indicatorsHidingDelay:100,cls:"x-scroll-view"},processConfig:constructor:setConfig:updateIndicatorsUi:applyScroller:function(a,b){return Ext.factory(a,Ext.scroll.Scroller,b)},applyIndicators:updateIndicators:updateScroller:isAxisEnabled:applyElement:function(a){if(a){return Ext.get(a)}},updateElement:showIndicators:hideIndicators:doHideIndicators:onScrollStart:onScrollEnd:function(){this.hideIndicators()},onScroll:setIndicatorValue:refreshIndicator:refresh:function(){return this.getScroller().refresh()},refreshIndicators:destroy:,1,0,0,0,0,0,[Ext.scroll,"View",Ext.util,"ScrollView"],0));(Ext.cmd.derive("Ext.behavior.Scrollable",Ext.behavior.Behavior,{constructor:onComponentPainted:setConfig:getScrollView:function(){return this.scrollView},onScrollViewDestroy:onComponentDestroy:function(){var a=this.scrollView;if(a){a.destroy()}}},1,0,0,0,0,0,[Ext.behavior,"Scrollable"],0));(Ext.cmd.derive("Ext.util.InputBlocker",Ext.Base,{singleton:true,blockInputs:unblockInputs:,0,0,0,0,0,0,[Ext.util,"InputBlocker"],0));(Ext.cmd.derive("Ext.Mask",Ext.Component,{config:{baseCls:"x-mask",transparent:false,top:0,left:0,right:0,bottom:0},initialize:onHide:onEvent:updateTransparent:,0,["mask"],["component","mask"],{component:true,mask:true},["widget.mask"],0,[Ext,"Mask"],0));(Ext.cmd.derive("Ext.Container",Ext.Component,{alternateClassName:"Ext.lib.Container",eventedConfig:{activeItem:0,scrollable:null},config:{layout:null,control:{},defaults:null,items:null,autoDestroy:true,defaultType:null,useBodyElement:null,masked:null,modal:null,hideOnMaskTap:null},isContainer:true,constructor:getElementConfig:applyMasked:mask:unmask:function(){this.setMasked(false)},setParent:applyModal:updateModal:updateHideOnMaskTap:updateZIndex:updateBaseCls:updateUseBodyElement:applyItems:applyControl:onFirstItemAdd:getLayout:updateDefaultType:applyDefaults:factoryItem:factoryItemWithDefaults:add:doAdd:remove:doResetActiveItem:doRemove:removeAll:getAt:function(a){return this.items.getAt(a)},getInnerAt:function(a){return this.innerItems[a]},removeAt:removeInnerAt:has:hasInnerItem:indexOf:function(a){return this.getItems().indexOf(a)},innerIndexOf:function(a){return this.innerItems.indexOf(a)},insertInner:onInnerItemMove:Ext.emptyFn,removeInner:insert:doInsert:insertFirst:insertLast:insertBefore:insertAfter:onItemAdd:doItemLayoutAdd:onItemRemove:doItemLayoutRemove:onItemMove:doItemLayoutMove:onItemInnerStateChange:getInnerItems:function(){return this.innerItems},getDockedItems:applyActiveItem:animateActiveItem:doSetActiveItem:show:function(){Ext.Component.prototype.show.apply(this,arguments);var a=this.getModal();if(a){a.setHidden(false)}return this},hide:doSetHidden:setRendered:getScrollableBehavior:function(){var a=this.scrollableBehavior;if(!a){a=this.scrollableBehavior=new Ext.behavior.Scrollable(this)}return a},applyScrollable:doSetScrollable:function(){},getScrollable:function(){return this.getScrollableBehavior().getScrollView()},getRefItems:getComponent:getDockedComponent:query:child:down:destroy:,1,["container"],["component","container"],{component:true,container:true},["widget.container"],0,[Ext,"Container",Ext.lib,"Container"],function(){this.addMember("defaultItemClass",this)}));(Ext.cmd.derive("Ext.util.Point",Ext.Base,{radianToDegreeConstant:180/Math.PI,statics:{fromEvent:fromTouch:from:,constructor:clone:copy:function(){return this.clone.apply(this,arguments)},copyFrom:toString:equals:isCloseTo:isWithin:function(){return this.isCloseTo.apply(this,arguments)},translate:roundedEquals:getDistanceTo:getAngleTo:,3,0,0,0,0,0,[Ext.util,"Point"],0));(Ext.cmd.derive("Ext.util.LineSegment",Ext.Base,{constructor:intersects:getLength:getAngleToX:getInBetweenPoint:toString:,3,0,0,0,0,0,[Ext.util,"LineSegment"],0));(Ext.cmd.derive("Ext.Panel",Ext.Container,{alternateClassName:"Ext.lib.Panel",isPanel:true,config:{baseCls:"x-panel",bodyPadding:null,bodyMargin:null,bodyBorder:null},getElementConfig:applyBodyPadding:function(a){if(a===true){a=5}if(a){a=Ext.dom.Element.unitizeBox(a)}return a},updateBodyPadding:function(a){this.element.setStyle("padding",a)},applyBodyMargin:function(a){if(a===true){a=5}if(a){a=Ext.dom.Element.unitizeBox(a)}return a},updateBodyMargin:function(a){this.element.setStyle("margin",a)},applyBodyBorder:updateBodyBorder:alignTo:,0,["panel"],["component","container","panel"],{component:true,container:true,panel:true},["widget.panel"],0,[Ext,"Panel",Ext.lib,"Panel"],0));(Ext.cmd.derive("Ext.Button",Ext.Component,{cachedConfig:{pressedCls:"x-button-pressing",badgeCls:"x-badge",hasBadgeCls:"x-hasbadge",labelCls:"x-button-label",iconCls:null},config:{badgeText:null,text:null,icon:false,iconAlign:"left",pressedDelay:0,handler:null,scope:null,autoEvent:null,ui:"normal",baseCls:"x-button"},template:[{tag:"span",reference:"badgeElement",hidden:true},{tag:"span",className:"x-button-icon",reference:"iconElement"},{tag:"span",reference:"textElement",hidden:true}],initialize:updateBadgeText:updateText:updateHtml:updateBadgeCls:function(b,a){this.badgeElement.replaceCls(a,b)},updateHasBadgeCls:function(b,c){var a=this.element;if(a.hasCls(c)){a.replaceCls(c,b)}},updateLabelCls:function(b,a){this.textElement.replaceCls(a,b)},updatePressedCls:function(b,c){var a=this.element;if(a.hasCls(c)){a.replaceCls(c,b)}},updateIcon:updateIconCls:updateIconAlign:refreshIconAlign:function(){this.updateIconAlign(this.getIconAlign())},applyAutoEvent:updateAutoEvent:hideIconElement:function(){this.iconElement.removeCls("x-shown");this.iconElement.addCls("x-hidden")},showIconElement:applyUi:getUi:applyPressedDelay:onPress:onRelease:function(a){this.fireAction("release",[this,a],"doRelease")},doRelease:onTap:doTap:,0,["button"],["component","button"],{component:true,button:true},["widget.button"],0,[Ext,"Button"],function(){}));(Ext.cmd.derive("Ext.data.Connection",Ext.Base,{statics:{requestId:0},config:{url:null,async:true,method:null,username:"",password:"",disableCaching:true,disableCachingParam:"_dc",timeout:30000,extraParams:null,defaultHeaders:null,useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",autoAbort:false},textAreaRe:/textarea/i,multiPartRe:/multipart\/form-data/i,lineBreakRe:/\r\n/g,constructor:request:upload:onUploadComplete:onAfterUploadComplete:isFormUpload:getForm:setOptions:function(l,k){var h=this,e=l.params||{},g=h.getExtraParams(),d=l.urlParams,c=l.url||h.getUrl(),j=l.jsonData,b,a,f;if(Ext.isFunction(e)){e=e.call(k,l)}if(Ext.isFunction(c)){c=c.call(k,l)}c=this.setupUrl(l,c);f=l.data||l.rawData||l.binaryData||l.xmlData||j||null;if(j&&!Ext.isPrimitive(j)){f=Ext.encode(f)}if(l.binaryData){if(f instanceof Array){f=(new Uint8Array(l.binaryData))}if(f instanceof Uint8Array){f=f.buffer}}if(Ext.isObject(e)){e=Ext.Object.toQueryString(e)}if(Ext.isObject(g)){g=Ext.Object.toQueryString(g)}e=e+((g)?((e)?"&":"")+g:"");d=Ext.isObject(d)?Ext.Object.toQueryString(d):d;e=this.setupParams(l,e);b=(l.method||h.getMethod()||((e||f)?"POST":"GET")).toUpperCase();this.setupMethod(l,b);a=l.disableCaching!==false?(l.disableCaching||h.getDisableCaching()):false;if(a){c=Ext.urlAppend(c,(l.disableCachingParam||h.getDisableCachingParam())+"="+(new Date().getTime()))}if((b=="GET"||f)&&e){c=Ext.urlAppend(c,e);e=null}if(d){c=Ext.urlAppend(c,d)}return{url:c,method:b,data:f||e||null}},setupUrl:setupParams:setupMethod:setupHeaders:getXhrInstance:((),isLoading:abort:abortAll:function(){this.abort()},onStateChange:clearTimeout:cleanup:onComplete:parseStatus:createResponse:createException:,1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Connection"],0));(Ext.cmd.derive("Ext.Ajax",Ext.data.Connection,{singleton:true,autoAbort:false},0,0,0,0,0,0,[Ext,"Ajax"],0));(Ext.cmd.derive("Ext.Anim",Ext.Base,{isAnim:true,disableAnimations:false,defaultConfig:{from:{},to:{},duration:250,delay:0,easing:"ease-in-out",autoClear:true,out:true,direction:null,reverse:false},opposites:{left:"right",right:"left",up:"down",down:"up"},constructor:initConfig:run:onTransitionEnd:,1,0,0,0,0,0,[Ext,"Anim"],);(Ext.cmd.derive("Ext.ComponentQuery",Ext.Base,{singleton:true},0,0,0,0,0,0,[Ext,"ComponentQuery"],);(Ext.cmd.derive("Ext.Decorator",Ext.Component,{isDecorator:true,config:{component:{}},statics:{generateProxySetter:generateProxyGetter:,onClassExtended:applyComponent:updateComponent:doUnsetComponent:doSetComponent:setRendered:setDisabled:destroy:,0,0,["component"],{component:true},0,0,[Ext,"Decorator"],0));(Ext.cmd.derive("Ext.Img",Ext.Component,{config:{src:null,baseCls:"x-img",imageCls:"x-img-image",backgroundCls:"x-img-background",mode:"background"},beforeInitialize:initialize:hide:show:updateMode:updateImageCls:function(b,a){this.replaceCls(a,b)},updateBackgroundCls:onTap:function(a){this.fireEvent("tap",this,a)},onAfterRender:function(){this.updateSrc(this.getSrc())},updateSrc:detachListeners:onLoad:function(a){this.detachListeners();if(this.getMode()==="background"){this.element.dom.style.backgroundImage='url("'+this.imageObject.src+'")'}this.fireEvent("load",this,a)},onError:doSetWidth:function(b){var a=(this.getMode()==="background")?this.element:this.imageElement;a.setWidth(b);Ext.Component.prototype.doSetWidth.apply(this,arguments)},doSetHeight:destroy:,0,["image","img"],["component","image","img"],{component:true,image:true,img:true},["widget.image","widget.img"],0,[Ext,"Img"],0));(Ext.cmd.derive("Ext.Label",Ext.Component,{config:{baseCls:"x-label"}},0,["label"],["component","label"],{component:true,label:true},["widget.label"],0,[Ext,"Label"],0));(Ext.cmd.derive("Ext.LoadMask",Ext.Mask,{config:{message:"Loading...",cls:"x-loading-mask",messageCls:"x-mask-message",indicator:true},getTemplate:updateMessage:updateMessageCls:function(b,a){this.messageElement.replaceCls(a,b)},updateIndicator:,0,["loadmask"],["component","mask","loadmask"],{component:true,mask:true,loadmask:true},["widget.loadmask"],0,[Ext,"LoadMask"],function(){}));(Ext.cmd.derive("Ext.Title",Ext.Component,{config:{baseCls:"x-title",title:""},updateTitle:function(a){this.setHtml(a)}},0,["title"],["component","title"],{component:true,title:true},["widget.title"],0,[Ext,"Title"],0));(Ext.cmd.derive("Ext.Spacer",Ext.Component,{config:{},constructor:,1,["spacer"],["component","spacer"],{component:true,spacer:true},["widget.spacer"],0,[Ext,"Spacer"],0));(Ext.cmd.derive("Ext.Toolbar",Ext.Container,{isToolbar:true,config:{baseCls:"x-toolbar",ui:"dark",title:null,defaultType:"button",minHeight:null,layout:{type:"hbox",align:"center"}},hasCSSMinHeight:true,constructor:applyTitle:updateTitle:showTitle:function(){var a=this.getTitle();if(a){a.show()}},hideTitle:,1,["toolbar"],["component","container","toolbar"],{component:true,container:true,toolbar:true},["widget.toolbar"],0,[Ext,"Toolbar"],function(){}));(Ext.cmd.derive("Ext.field.Input",Ext.Component,{tag:"input",cachedConfig:{cls:"x-form-field",focusCls:"x-field-focus",maskCls:"x-field-mask",useMask:"auto",type:"text",checked:false},config:{baseCls:"x-field-input",name:null,value:null,isFocused:false,tabIndex:null,placeHolder:null,minValue:null,maxValue:null,stepValue:null,maxLength:null,autoComplete:null,autoCapitalize:null,autoCorrect:null,readOnly:null,maxRows:null,pattern:null,startValue:false,fastFocus:true},getTemplate:initElement:updateFastFocus:useManualMaxLength:applyUseMask:updateUseMask:updatePattern:function(a){this.updateFieldAttribute("pattern",a)},updateFieldAttribute:updateCls:updateType:updateName:function(a){this.updateFieldAttribute("name",a)},getValue:applyValue:updateValue:setValue:updateTabIndex:function(a){this.updateFieldAttribute("tabIndex",a)},testAutoFn:updateMaxLength:updatePlaceHolder:function(a){this.updateFieldAttribute("placeholder",a)},applyAutoComplete:function(a){return this.testAutoFn(a)},updateAutoComplete:function(a){var b=a?"on":"off";this.updateFieldAttribute("autocomplete",b)},applyAutoCapitalize:function(a){return this.testAutoFn(a)},updateAutoCapitalize:function(b){var a=b?"on":"off";this.updateFieldAttribute("autocapitalize",a)},applyAutoCorrect:function(a){return this.testAutoFn(a)},updateAutoCorrect:updateMinValue:function(a){this.updateFieldAttribute("min",a)},updateMaxValue:function(a){this.updateFieldAttribute("max",a)},updateStepValue:function(a){this.updateFieldAttribute("step",a)},checkedRe:/^(true|1|on)/i,getChecked:applyChecked:setChecked:updateChecked:updateReadOnly:updateMaxRows:function(a){this.updateFieldAttribute("rows",a)},doSetDisabled:isDirty:reset:function(){this.setValue(this.originalValue)},onInputTap:function(a){this.fireAction("inputtap",[this,a],"doInputTap")},doInputTap:onMaskTap:function(a){this.fireAction("masktap",[this,a],"doMaskTap")},doMaskTap:showMask:function(){if(this.getUseMask()){this.mask.setStyle("display","block")}},hideMask:focus:blur:select:onFocus:function(a){this.fireAction("focus",[a],"doFocus")},doFocus:onTouchStart:onBlur:doBlur:onClearIconTap:onClearIconPress:function(){this.clearIcon.addCls("x-pressing")},onClearIconRelease:onClick:function(a){this.fireEvent("click",a)},onChange:onPaste:function(a){if(this.useManualMaxLength()){this.trimValueToMaxLength()}this.fireEvent("paste",a)},onKeyUp:onKeyDown:function(){this.ignoreInput=true},onInput:onKeyPress:onMouseDown:trimValueToMaxLength:,0,["input"],["component","input"],{component:true,input:true},["widget.input"],0,[Ext.field,"Input"],0));(Ext.cmd.derive("Ext.field.Field",Ext.Decorator,{alternateClassName:"Ext.form.Field",isField:true,isFormField:true,config:{baseCls:"x-field",label:null,labelAlign:"left",labelWidth:"30%",labelWrap:false,clearIcon:null,required:false,inputType:null,name:null,value:null,tabIndex:null},platformConfig:[{theme:["Windows","MountainView","Blackberry","Tizen"],labelAlign:"top"}],cachedConfig:{labelCls:null,requiredCls:"x-field-required",inputCls:null},getElementConfig:updateLabel:updateLabelAlign:updateLabelCls:updateLabelWidth:updateLabelWrap:updateRequired:function(a){this.renderElement[a?"addCls":"removeCls"](this.getRequiredCls())},updateRequiredCls:function(a,b){if(this.getRequired()){this.renderElement.replaceCls(b,a)}},initialize:doInitValue:reset:resetOriginalValue:isDirty:function(){return false}},0,["field"],["component","field"],{component:true,field:true},["widget.field"],0,[Ext.field,"Field",Ext.form,"Field"],function(){}));(Ext.cmd.derive("Ext.field.Text",Ext.field.Field,{alternateClassName:"Ext.form.Text",config:{ui:"text",clearIcon:true,placeHolder:null,maxLength:null,autoComplete:null,autoCapitalize:null,autoCorrect:null,readOnly:null,component:{xtype:"input",type:"text",fastFocus:true},bubbleEvents:["action"]},initialize:syncEmptyCls:updateValue:getValue:updatePlaceHolder:function(a){this.getComponent().setPlaceHolder(a)},updateMaxLength:function(a){this.getComponent().setMaxLength(a)},updateAutoComplete:function(a){this.getComponent().setAutoComplete(a)},updateAutoCapitalize:function(a){this.getComponent().setAutoCapitalize(a)},updateAutoCorrect:function(a){this.getComponent().setAutoCorrect(a)},updateReadOnly:updateInputType:function(a){var b=this.getComponent();if(b){b.setType(a)}},updateName:function(a){var b=this.getComponent();if(b){b.setName(a)}},updateTabIndex:function(b){var a=this.getComponent();if(a){a.setTabIndex(b)}},updateInputCls:doSetDisabled:showClearIcon:hideClearIcon:onKeyUp:function(a){this.fireAction("keyup",[this,a],"doKeyUp")},doKeyUp:doAction:function(){this.blur()},onClearIconTap:doClearIconTap:onChange:onFocus:onBlur:onPaste:function(a){this.fireEvent("paste",this,a)},onMouseDown:focus:function(){this.getComponent().focus();return this},blur:function(){this.getComponent().blur();return this},select:resetOriginalValue:reset:isDirty:,0,["textfield"],["component","field","textfield"],{component:true,field:true,textfield:true},["widget.textfield"],0,[Ext.field,"Text",Ext.form,"Text"],0));(Ext.cmd.derive("Ext.app.Action",Ext.Base,{config:{scope:null,application:null,controller:null,action:null,args:[],url:undefined,data:{},title:null,beforeFilters:[],currentFilterIndex:-1},constructor:applyBeforeFilters:execute:function(){this.resume()},resume:applyUrl:applyController:urlEncode:,1,0,0,0,0,0,[Ext.app,"Action"],0));(Ext.cmd.derive("Ext.app.Controller",Ext.Base,{config:{refs:{},routes:{},control:{},before:{},application:{},stores:[],models:[],views:[]},constructor:function(a){this.initConfig(a);this.mixins.observable.constructor.call(this,a)},init:Ext.emptyFn,launch:Ext.emptyFn,redirectTo:execute:applyBefore:applyControl:applyRefs:applyRoutes:applyStores:function(a){return this.getFullyQualified(a,"store")},applyModels:function(a){return this.getFullyQualified(a,"model")},applyViews:function(a){return this.getFullyQualified(a,"view")},getFullyQualified:control:ref:getRef:hasRef:,1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.app,"Controller"],function(){}));(Ext.cmd.derive("Ext.app.History",Ext.Base,{config:{actions:[],updateUrl:true,token:""},constructor:add:back:applyToken:detectStateChange:onStateChange:,1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.app,"History"],0));(Ext.cmd.derive("Ext.app.Profile",Ext.Base,{config:{namespace:"auto",name:"auto",controllers:[],models:[],views:[],stores:[],application:null},constructor:isActive:function(){return false},launch:Ext.emptyFn,applyNamespace:applyName:getDependencies:,1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.app,"Profile"],0));(Ext.cmd.derive("Ext.app.Route",Ext.Base,{config:{conditions:{},url:null,controller:null,action:null,initialized:false},constructor:function(a){this.initConfig(a)},recognize:initialize:recognizes:function(a){return this.matcherRegex.test(a)},matchesFor:argsFor:urlFor:createMatcherRegex:,1,0,0,0,0,0,[Ext.app,"Route"],0));(Ext.cmd.derive("Ext.app.Router",Ext.Base,{config:{routes:[],defaults:{action:"index"}},constructor:function(a){this.initConfig(a)},connect:recognize:draw:clear:,1,0,0,0,0,0,[Ext.app,"Router"],function(){}));(Ext.cmd.derive("Ext.app.Application",Ext.app.Controller,{config:{profiles:[],controllers:[],history:{},name:null,appFolder:"app",router:{},controllerInstances:[],profileInstances:[],currentProfile:null,launch:Ext.emptyFn,enableLoader:true,requires:[],themeVariationPrefix:"x-theme-variation-",themeVariationTransitionCls:null,themeVariation:null},constructor:dispatch:redirectTo:control:getController:onProfilesLoaded:loadControllerDependencies:onDependenciesLoaded:gatherDependencies:instantiateStores:instantiateControllers:applyControllers:function(a){return this.getFullyQualified(a,"controller")},applyProfiles:applyName:updateName:applyRouter:applyHistory:onHistoryChange:updateThemeVariation:,1,0,0,0,0,0,[Ext.app,"Application"],function(){}));(Ext.cmd.derive("Ext.carousel.Item",Ext.Decorator,{config:{baseCls:"x-carousel-item",component:null,translatable:true}},0,0,["component"],{component:true},0,0,[Ext.carousel,"Item"],0));Ext.define("Ext.carousel.Indicator",{extend:Ext.Component,xtype:"carouselindicator",alternateClassName:"Ext.Carousel.Indicator",config:{baseCls:"x-carousel-indicator",direction:"horizontal"},initialize:updateDirection:addIndicator:removeIndicator:setActiveIndex:onTap:destroy:);(Ext.cmd.derive("Ext.util.TranslatableGroup",Ext.util.translatable.Abstract,{config:{items:[],activeIndex:0,itemLength:{x:0,y:0}},applyItems:function(a){return Ext.Array.from(a)},doTranslate:,0,0,0,0,0,0,[Ext.util,"TranslatableGroup"],0));Ext.define("Ext.carousel.Carousel",{extend:Ext.Container,alternateClassName:"Ext.Carousel",xtype:"carousel",config:{baseCls:"x-carousel",direction:"horizontal",directionLock:false,animation:{duration:250,easing:{type:"ease-out"}},indicator:true,ui:"dark",itemConfig:{},bufferSize:1,itemLength:null},itemLength:0,offset:0,flickStartOffset:0,flickStartTime:0,dragDirection:0,count:0,painted:false,activeIndex:-1,beforeInitialize:updateBufferSize:setRendered:onSizeChange:onItemAdd:doItemLayoutAdd:function(a){if(a.isInnerItem()){return}Ext.Container.prototype.doItemLayoutAdd.apply(this,arguments)},onItemRemove:doItemLayoutRemove:function(a){if(a.isInnerItem()){return}Ext.Container.prototype.doItemLayoutRemove.apply(this,arguments)},onInnerItemMove:doItemLayoutMove:isIndexDirty:getTranslatable:onDragStart:onDrag:onDragEnd:applyAnimation:updateDirection:setOffset:setOffsetAnimated:onAnimationEnd:refresh:function(){this.refreshSizing();this.refreshActiveItem()},refreshSizing:refreshOffset:refreshActiveItem:getActiveIndex:function(){return this.activeIndex},refreshActiveIndex:refreshCarouselItems:refreshInactiveCarouselItems:getMaxItemIndex:getInnerItemIndex:function(a){return this.innerItems.indexOf(a)},getInnerItemAt:function(a){return this.innerItems[a]},applyActiveItem:doSetActiveItem:next:previous:applyIndicator:function(a,b){return Ext.factory(a,Ext.carousel.Indicator,b)},updateIndicator:destroy:,function(){});(Ext.cmd.derive("Ext.mixin.Sortable",Ext.mixin.Mixin,{mixinConfig:{id:"sortable"},config:{sorters:null,defaultSortDirection:"ASC",sortRoot:null},dirtySortFn:false,sortFn:null,sorted:false,applySorters:createSortersCollection:function(){this._sorters=Ext.create("Ext.util.Collection",function(a){return a.getId()});return this._sorters},addSorter:addSorters:insertSorter:insertSorters:removeSorter:removeSorters:updateSortFn:getSortFn:function(){if(this.dirtySortFn){return this.updateSortFn()}return this.sortFn},sort:findInsertionIndex:,0,0,0,0,0,0,[Ext.mixin,"Sortable"],0));(Ext.cmd.derive("Ext.mixin.Filterable",Ext.mixin.Mixin,{mixinConfig:{id:"filterable"},config:{filters:null,filterRoot:null},dirtyFilterFn:false,filterFn:null,filtered:false,applyFilters:createFiltersCollection:addFilter:addFilters:insertFilter:insertFilters:removeFilters:updateFilterFn:filter:isFiltered:getFilterFn:,0,0,0,0,0,0,[Ext.mixin,"Filterable"],0));(Ext.cmd.derive("Ext.util.Collection",Ext.Base,{config:{autoFilter:true,autoSort:true},constructor:updateAutoSort:function(a,b){if(b===false&&a&&this.items.length){this.sort()}},updateAutoFilter:insertSorters:removeSorters:applyFilters:addFilters:removeFilters:filter:updateAfterFilter:sort:handleSort:add:getKey:function(a){return a.id},replace:addAll:each:eachKey:findBy:function(e,d){var f=this.keys,b=this.items,c=0,a=b.length;for(;c<a;c++){if(e.call(d||window,b[c],f[c])){return b[c]}}return null},filterBy:insert:insertAll:remove:removeAll:removeAt:removeAtKey:function(a){return this.removeAt(this.indexOfKey(a))},getCount:function(){return this.length},indexOf:indexOfKey:updateIndices:get:getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:containsKey:function(a){return typeof this.map[a]!="undefined"},clear:first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},getRange:function(f,a){var e=this,c=e.items,b=[],d;if(c.length<1){return b}f=f||0;a=Math.min(typeof a=="undefined"?e.length-1:a,e.length-1);if(f<=a){for(d=f;d<=a;d++){b[b.length]=c[d]}}else{for(d=f;d>=a;d--){b[b.length]=c[d]}}return b},findIndexBy:function(d,c,h){var g=this,f=g.keys,a=g.items,b=h||0,e=a.length;for(;b<e;b++){if(d.call(c||g,a[b],f[b])){return b}}return -1},clone:function(){var e=this,f=new this.self(),d=e.keys,a=e.items,b=0,c=a.length;for(;b<c;b++){f.add(d[b],a[b])}f.getKey=e.getKey;return f},destroy:,1,0,0,0,0,[["sortable",Ext.mixin.Sortable],["filterable",Ext.mixin.Filterable]],[Ext.util,"Collection"],0));(Ext.cmd.derive("Ext.data.Operation",Ext.Base,{config:{synchronous:true,action:null,filters:null,sorters:null,grouper:null,start:null,limit:null,batch:null,callback:null,scope:null,resultSet:null,records:null,request:null,response:null,withCredentials:null,params:null,url:null,page:null,node:null,model:undefined,addRecords:false},started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,constructor:function(a){this.initConfig(a)},applyModel:function(a){if(typeof a=="string"){a=Ext.data.ModelManager.getModel(a);if(!a){Ext.Logger.error("Model with name "+arguments[0]+" doesnt exist.")}}if(a&&!a.prototype.isModel&&Ext.isObject(a)){a=Ext.data.ModelManager.registerType(a.storeId||a.id||Ext.id(),a)}return a},getRecords:setStarted:function(){this.started=true;this.running=true},setCompleted:setSuccessful:function(){this.success=true},setException:hasException:function(){return this.exception===true},getError:function(){return this.error},isStarted:function(){return this.started===true},isRunning:function(){return this.running===true},isComplete:function(){return this.complete===true},wasSuccessful:allowWrite:process:processRead:processCreate:processUpdate:processDestroy:findCurrentRecord:updateRecord:,1,0,0,0,0,0,[Ext.data,"Operation"],0));(Ext.cmd.derive("Ext.data.ResultSet",Ext.Base,{config:{loaded:true,count:null,total:null,success:false,records:null,message:null},constructor:function(a){this.initConfig(a)},applyCount:updateRecords:,1,0,0,0,0,0,[Ext.data,"ResultSet"],0));(Ext.cmd.derive("Ext.data.reader.Reader",Ext.Base,{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],isReader:true,config:{idProperty:undefined,clientIdProperty:"clientId",totalProperty:"total",successProperty:"success",messageProperty:null,rootProperty:"",implicitIncludes:true,model:undefined},constructor:function(a){this.initConfig(a)},fieldCount:0,applyModel:function(a){if(typeof a=="string"){a=Ext.data.ModelManager.getModel(a);if(!a){Ext.Logger.error("Model with name "+arguments[0]+" doesnt exist.")}}if(a&&!a.prototype.isModel&&Ext.isObject(a)){a=Ext.data.ModelManager.registerType(a.storeId||a.id||Ext.id(),a)}return a},applyIdProperty:updateModel:createAccessor:Ext.emptyFn,createFieldAccessExpression:function(){return"undefined"},buildExtractors:buildRecordDataExtractor:getFields:getData:function(a){return a},getResponseData:function(a){return a},getRoot:function(a){return a},read:process:readRecords:extractData:readAssociated:getAssociatedDataRoot:onMetaChange:,1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data.reader,"Reader",Ext.data,"Reader",Ext.data,"DataReader"],);(Ext.cmd.derive("Ext.data.reader.Json",Ext.data.reader.Reader,{alternateClassName:"Ext.data.JsonReader",config:{record:null,useSimpleAccessors:false},objectRe:/[\[\.]/,getResponseData:buildExtractors:getRoot:extractData:createAccessor:),createFieldAccessExpression:,0,0,0,0,["reader.json"],0,[Ext.data.reader,"Json",Ext.data,"JsonReader"],0));(Ext.cmd.derive("Ext.data.writer.Writer",Ext.Base,{alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{writeAllFields:true,nameProperty:"name"},constructor:function(a){this.initConfig(a)},write:writeDate:getRecordData:,1,0,0,0,["writer.base"],0,[Ext.data.writer,"Writer",Ext.data,"DataWriter",Ext.data,"Writer"],0));(Ext.cmd.derive("Ext.data.writer.Json",Ext.data.writer.Writer,{alternateClassName:"Ext.data.JsonWriter",config:{rootProperty:undefined,encode:false,allowSingle:true,encodeRequest:false},applyRootProperty:writeRecords:,0,0,0,0,["writer.json"],0,[Ext.data.writer,"Json",Ext.data,"JsonWriter"],0));(Ext.cmd.derive("Ext.data.Batch",Ext.Base,{config:{autoStart:false,pauseOnException:true,proxy:null},current:-1,total:0,isRunning:false,isComplete:false,hasException:false,constructor:add:start:runNextOperation:pause:runOperation:,1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Batch"],0));(Ext.cmd.derive("Ext.data.proxy.Proxy",Ext.Evented,{alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:true,model:null,reader:{type:"json"},writer:{type:"json"}},isProxy:true,applyModel:updateModel:applyReader:function(b,a){return Ext.factory(b,Ext.data.Reader,a,"reader")},updateReader:onMetaChange:applyWriter:function(b,a){return Ext.factory(b,Ext.data.Writer,a,"writer")},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,destroy:Ext.emptyFn,onDestroy:batch:onBatchComplete:,0,0,0,0,["proxy.proxy"],0,[Ext.data.proxy,"Proxy",Ext.data,"DataProxy",Ext.data,"Proxy"],function(){}));(Ext.cmd.derive("Ext.data.proxy.Client",Ext.data.proxy.Proxy,{alternateClassName:"Ext.proxy.ClientProxy",clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,"Client",Ext.proxy,"ClientProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Memory",Ext.data.proxy.Client,{alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:true,config:{data:[]},finishOperation:create:function(){this.finishOperation.apply(this,arguments)},update:function(){this.finishOperation.apply(this,arguments)},destroy:read:clear:Ext.emptyFn},0,0,0,0,["proxy.memory"],0,[Ext.data.proxy,"Memory",Ext.data,"MemoryProxy"],0));(Ext.cmd.derive("Ext.data.SortTypes",Ext.Base,{singleton:true,stripTagsRE:/<\/?[^>]+>/gi,none:function(a){return a},asText:asUCText:asUCString:asDate:asFloat:asInt:,0,0,0,0,0,0,[Ext.data,"SortTypes"],0));(Ext.cmd.derive("Ext.data.Types",Ext.Base,{singleton:true,stripRe:/[\$,%]/g,dashesRe:/-/g,iso8601TestRe:/\d\dT\d\d/,iso8601SplitRe:/[- :T\.Z\+]/},0,0,0,0,0,0,[Ext.data,"Types"],);(Ext.cmd.derive("Ext.data.Field",Ext.Base,{isField:true,config:{name:null,type:"auto",convert:undefined,dateFormat:null,allowNull:true,defaultValue:undefined,mapping:null,sortType:undefined,sortDir:"ASC",allowBlank:true,persist:true,encode:null,decode:null,bubbleEvents:"action"},constructor:applyType:updateType:applySortType:applyConvert:hasCustomConvert:function(){return this._hasCustomConvert}},1,0,0,0,["data.field"],0,[Ext.data,"Field"],0));(Ext.cmd.derive("Ext.data.identifier.Simple",Ext.Base,{statics:{AUTO_ID:1},config:{prefix:"ext-record-"},constructor:function(a){this.initConfig(a)},generate:,1,0,0,0,["data.identifier.simple"],0,[Ext.data.identifier,"Simple"],0));(Ext.cmd.derive("Ext.data.ModelManager",Ext.AbstractManager,{alternateClassName:["Ext.ModelMgr","Ext.ModelManager"],singleton:true,modelNamespace:null,registerType:onModelDefined:Ext.emptyFn,getModel:create:,0,0,0,0,0,0,[Ext.data,"ModelManager",Ext,"ModelMgr",Ext,"ModelManager"],);(Ext.cmd.derive("Ext.data.Request",Ext.Base,{config:{action:null,params:null,method:"GET",url:null,operation:null,proxy:null,disableCaching:false,headers:{},callbackKey:null,jsonP:null,jsonData:null,xmlData:null,withCredentials:null,username:null,password:null,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(a){this.initConfig(a)}},1,0,0,0,0,0,[Ext.data,"Request"],0));(Ext.cmd.derive("Ext.data.proxy.Server",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ServerProxy",config:{url:null,pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",sortParam:"sort",filterParam:"filter",directionParam:"dir",enablePagingParams:true,simpleSortMode:false,noCache:true,cacheString:"_dc",timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},constructor:create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},destroy:setExtraParam:buildRequest:processResponse:getResponseResult:setException:applyEncoding:encodeSorters:function(d){var b=[],c=d.length,a=0;for(;a<c;a++){b[a]={property:d[a].getProperty(),direction:d[a].getDirection()}}return this.applyEncoding(b)},encodeFilters:getParams:buildUrl:getUrl:doRequest:function(){},afterRequest:Ext.emptyFn},1,0,0,0,["proxy.server"],0,[Ext.data.proxy,"Server",Ext.data,"ServerProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Ajax",Ext.data.proxy.Server,{alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],config:{withCredentials:false,useDefaultXhrHeader:true,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},headers:{}},doRequest:getMethod:createRequestCallback:,0,0,0,0,["proxy.ajax"],0,[Ext.data.proxy,"Ajax",Ext.data,"HttpProxy",Ext.data,"AjaxProxy"],0));(Ext.cmd.derive("Ext.data.association.Association",Ext.Base,{alternateClassName:"Ext.data.Association",config:{ownerModel:null,ownerName:undefined,associatedModel:null,associatedName:undefined,associationKey:undefined,primaryKey:"id",reader:null,type:null,name:undefined},statics:{create:,constructor:function(a){this.initConfig(a)},applyName:applyOwnerModel:applyOwnerName:function(a){if(!a){a=this.getOwnerModel().modelName}a=a.slice(a.lastIndexOf(".")+1);return a},updateOwnerModel:function(a,b){if(b){this.setOwnerName(a.modelName)}},applyAssociatedModel:applyAssociatedName:updateAssociatedModel:applyReader:updateReader:,1,0,0,0,0,0,[Ext.data.association,"Association",Ext.data,"Association"],0));(Ext.cmd.derive("Ext.util.Inflector",Ext.Base,{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^person$/),"people"],[(/^man$/),"men"],[(/^(child)$/),"$1ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/people$/i),"person"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(b,a){this.singulars.unshift([b,a])},plural:clearSingulars:function(){this.singulars=[]},clearPlurals:isTransnumeral:pluralize:function(f){if(this.isTransnumeral(f)){return f}var e=this.plurals,d=e.length,a,c,b;for(b=0;b<d;b++){a=e[b];c=a[0];if(c==f||(c.test&&c.test(f))){return f.replace(c,a[1])}}return f},singularize:classify:ordinalize:,0,0,0,0,0,0,[Ext.util,"Inflector"],);(Ext.cmd.derive("Ext.data.association.HasMany",Ext.data.association.Association,{alternateClassName:"Ext.data.HasManyAssociation",config:{foreignKey:undefined,store:undefined,storeName:undefined,filterProperty:null,autoLoad:false,autoSync:false},constructor:applyName:applyStoreName:function(a){if(!a){a=this.getName()+"Store"}return a},applyForeignKey:function(b){if(!b){var a=this.getInverseAssociation();if(a){b=a.getForeignKey()}else{b=this.getOwnerName().toLowerCase()+"_id"}}return b},applyAssociationKey:updateForeignKey:function(b,d){var a=this.getAssociatedModel().getFields(),c=a.get(b);if(!c){c=new Ext.data.Field({name:b});a.add(c);a.isDirty=true}if(d){c=a.get(d);if(c){a.remove(c);a.isDirty=true}}},applyStore:onAddRecords:onRemoveRecords:updateStore:read:updateInverseInstances:getInverseAssociation:function(){var a=this.getOwnerModel().modelName;return this.getAssociatedModel().associations.findBy(function(b){return b.getType().toLowerCase()==="belongsto"&&b.getAssociatedModel().modelName===a})}},1,0,0,0,["association.hasmany"],0,[Ext.data.association,"HasMany",Ext.data,"HasManyAssociation"],0));(Ext.cmd.derive("Ext.data.association.BelongsTo",Ext.data.association.Association,{alternateClassName:"Ext.data.BelongsToAssociation",config:{foreignKey:undefined,getterName:undefined,setterName:undefined,instanceName:undefined},applyForeignKey:updateForeignKey:applyInstanceName:function(a){if(!a){a=this.getAssociatedName()+"BelongsToInstance"}return a},applyAssociationKey:function(a){if(!a){var b=this.getAssociatedName();a=b[0].toLowerCase()+b.slice(1)}return a},applyGetterName:function(a){if(!a){var b=this.getAssociatedName();a="get"+b[0].toUpperCase()+b.slice(1)}return a},applySetterName:function(a){if(!a){var b=this.getAssociatedName();a="set"+b[0].toUpperCase()+b.slice(1)}return a},updateGetterName:function(b,c){var a=this.getOwnerModel().prototype;if(c){delete a[c]}if(b){a[b]=this.createGetter()}},updateSetterName:function(b,c){var a=this.getOwnerModel().prototype;if(c){delete a[c]}if(b){a[b]=this.createSetter()}},createSetter:createGetter:read:getInverseAssociation:,0,0,0,0,["association.belongsto"],0,[Ext.data.association,"BelongsTo",Ext.data,"BelongsToAssociation"],0));(Ext.cmd.derive("Ext.data.association.HasOne",Ext.data.association.Association,{alternateClassName:"Ext.data.HasOneAssociation",config:{foreignKey:undefined,getterName:undefined,setterName:undefined,instanceName:undefined},applyForeignKey:updateForeignKey:applyInstanceName:applyAssociationKey:applyGetterName:function(a){if(!a){var b=this.getAssociatedName();a="get"+b[0].toUpperCase()+b.slice(1)}return a},applySetterName:updateGetterName:function(b,c){var a=this.getOwnerModel().prototype;if(c){delete a[c]}if(b){a[b]=this.createGetter()}},updateSetterName:createSetter:createGetter:read:getInverseAssociation:,0,0,0,0,["association.hasone"],0,[Ext.data.association,"HasOne",Ext.data,"HasOneAssociation"],0));(Ext.cmd.derive("Ext.data.Error",Ext.Base,{config:{field:null,message:""},constructor:,1,0,0,0,0,0,[Ext.data,"Error"],0));(Ext.cmd.derive("Ext.data.Errors",Ext.util.Collection,{isValid:getByField:add:,0,0,0,0,0,0,[Ext.data,"Errors"],0));(Ext.cmd.derive("Ext.data.Model",Ext.Base,{alternateClassName:"Ext.data.Record",isModel:true,config:{idProperty:"id",data:null,fields:undefined,validations:null,associations:null,hasMany:null,hasOne:null,belongsTo:null,proxy:null,identifier:{type:"simple"},clientIdProperty:"clientId",isErased:false,useCache:true},staticConfigs:["idProperty","fields","validations","associations","hasMany","hasOne","belongsTo","clientIdProperty","identifier","useCache","proxy"],statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",cache:{},generateProxyMethod:generateCacheId:,inheritableStatics:{load:,editing:false,dirty:false,phantom:false,constructor:mergeData:setData:handleInlineAssociationData:setId:getId:setConvertedData:get:set:isEqual:beginEdit:cancelEdit:endEdit:changedWhileEditing:getChanges:isModified:function(a){return this.modified.hasOwnProperty(a)},save:erase:reject:commit:afterEdit:afterReject:function(){this.notifyStores("afterReject")},afterCommit:notifyStores:copy:getData:getAssociatedData:prepareAssociatedData:join:function(a){Ext.Array.include(this.stores,a)},unjoin:setDirty:validate:isValid:toUrl:destroy:applyProxy:updateProxy:applyAssociations:function(a){if(a){this.addAssociations(a,"hasMany")}},applyBelongsTo:function(a){if(a){this.addAssociations(a,"belongsTo")}},applyHasMany:function(a){if(a){this.addAssociations(a,"hasMany")}},applyHasOne:addAssociations:applyValidations:addValidations:applyFields:updateFields:applyIdentifier:getFieldName:function(a){return a.getName()},sortConvertFields:onClassExtended:,1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Model",Ext.data,"Record"],0));(Ext.cmd.derive("Ext.data.StoreManager",Ext.util.Collection,{alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,register:unregister:lookup:getKey:function(a){return a.getStoreId()}},0,0,0,0,0,0,[Ext.data,"StoreManager",Ext,"StoreMgr",Ext.data,"StoreMgr",Ext,"StoreManager"],);(Ext.cmd.derive("Ext.util.Grouper",Ext.util.Sorter,{isGrouper:true,config:{groupFn:null,sortProperty:null,sorterFn:,defaultSortFn:updateProperty:standardGroupFn:getGroupString:,0,0,0,0,0,0,[Ext.util,"Grouper"],0));(Ext.cmd.derive("Ext.data.Store",Ext.Evented,{statics:{create:,isStore:true,config:{storeId:undefined,data:null,autoLoad:null,autoSync:false,model:undefined,proxy:undefined,fields:null,remoteSort:false,remoteFilter:false,remoteGroup:false,filters:null,sorters:null,grouper:null,groupField:null,groupDir:null,getGroupString:null,pageSize:25,totalCount:null,clearOnPageLoad:true,params:{},modelDefaults:{},autoDestroy:false,syncRemovedRecords:true,destroyRemovedRecords:true,buffered:false,plugins:null},currentPage:1,constructor:applyPlugins:updatePlugins:createDataCollection:applyStoreId:updateStoreId:applyModel:updateModel:applyProxy:updateProxy:applyData:clearData:addData:updateAutoLoad:isAutoLoading:updateGroupField:updateGroupDir:applyGetGroupString:applyGrouper:updateGrouper:isGrouped:updateSorters:updateSortTypes:updateFilters:add:insert:remove:removeAt:removeAll:doRemoveAll:each:getCount:function(){return this.data.items.length||0},getAllCount:getAt:function(a){return this.data.getAt(a)},getRange:getById:indexOf:function(a){return this.data.indexOf(a)},indexOfId:afterEdit:afterReject:afterCommit:afterErase:applyRemoteFilter:function(b){var a=this.getProxy();return b||(a&&a.isSQLProxy===true)},applyRemoteSort:function(b){var a=this.getProxy();return b||(a&&a.isSQLProxy===true)},applyRemoteGroup:updateRemoteFilter:function(a){this.data.setAutoFilter(!a)},updateRemoteSort:sort:filter:filterBy:queryBy:clearFilter:isFiltered:function(){return this.data.filtered},isSorted:getSorters:function(){var a=this.data.getSorters();return(a)?a.items:[]},getFilters:getGroups:getGroupString:find:findRecord:findExact:findBy:load:isLoading:function(){return Boolean(this.loading)},isLoaded:function(){return Boolean(this.loaded)},sync:first:function(){return this.data.first()},last:function(){return this.data.last()},sum:min:max:average:getBatchListeners:onBatchComplete:onBatchException:function(b,a){},onProxyLoad:doDataRefresh:onProxyWrite:onCreateRecords:function(b,a,c){},onUpdateRecords:onDestroyRecords:onMetaChange:function(b){var a=this.getProxy().getModel();if(!this.getModel()&&a){this.setModel(a)}this.fireEvent("metachange",this,b)},getNewRecords:getUpdatedRecords:getRemovedRecords:function(){return this.removed},loadPage:nextPage:previousPage:destroy:,1,0,0,0,["store.store"],0,[Ext.data,"Store"],0));(Ext.cmd.derive("Ext.data.ArrayStore",Ext.data.Store,{config:{proxy:{type:"memory",reader:"array"}},loadData:,0,0,0,0,["store.array"],0,[Ext.data,"ArrayStore"],);(Ext.cmd.derive("Ext.data.Validations",Ext.Base,{alternateClassName:"Ext.data.validations",singleton:true,config:{presenceMessage:"must be present",lengthMessage:"is the wrong length",formatMessage:"is the wrong format",inclusionMessage:"is not included in the list of acceptable values",exclusionMessage:"is not an acceptable value",emailMessage:"is not a valid email address"},constructor:function(a){this.initConfig(a)},getMessage:emailRe:/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/,presence:length:email:format:inclusion:exclusion:,1,0,0,0,0,0,[Ext.data,"Validations",Ext.data,"validations"],0));(Ext.cmd.derive("Ext.data.reader.Array",Ext.data.reader.Json,{alternateClassName:"Ext.data.ArrayReader",config:{totalProperty:undefined,successProperty:undefined},createFieldAccessExpression:,0,0,0,0,["reader.array"],0,[Ext.data.reader,"Array",Ext.data,"ArrayReader"],0));(Ext.cmd.derive("Ext.device.communicator.Default",Ext.Base,{SERVER_URL:"http://localhost:3000",callbackDataMap:{},callbackIdMap:{},idSeed:0,globalScopeId:"0",generateId:getId:getCallbackId:getCallbackData:function(a){return this.callbackDataMap[a]},invoke:send:doSend:,0,0,0,0,0,0,[Ext.device.communicator,"Default"],0));(Ext.cmd.derive("Ext.device.communicator.Android",Ext.device.communicator.Default,{doSend:,0,0,0,0,0,0,[Ext.device.communicator,"Android"],0));(Ext.cmd.derive("Ext.device.Communicator",Ext.Base,{singleton:true,constructor:,1,0,0,0,0,0,[Ext.device,"Communicator"],0));(Ext.cmd.derive("Ext.device.connection.Abstract",Ext.Evented,{config:{online:false,type:null},UNKNOWN:"Unknown connection",ETHERNET:"Ethernet connection",WIFI:"WiFi connection",CELL_2G:"Cell 2G connection",CELL_3G:"Cell 3G connection",CELL_4G:"Cell 4G connection",NONE:"No network connection",isOnline:function(){return this.getOnline()}},0,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.device.connection,"Abstract"],0));(Ext.cmd.derive("Ext.device.connection.Sencha",Ext.device.connection.Abstract,{constructor:onConnectionChange:,1,0,0,0,0,0,[Ext.device.connection,"Sencha"],0));(Ext.cmd.derive("Ext.device.connection.Cordova",Ext.device.connection.Abstract,{alternateClassName:"Ext.device.connection.PhoneGap",constructor:syncOnline:getOnline:function(){this.syncOnline();return this._online},getType:,1,0,0,0,0,0,[Ext.device.connection,"Cordova",Ext.device.connection,"PhoneGap"],0));(Ext.cmd.derive("Ext.device.connection.Simulator",Ext.device.connection.Abstract,{getOnline:,0,0,0,0,0,0,[Ext.device.connection,"Simulator"],0));(Ext.cmd.derive("Ext.device.Connection",Ext.Base,{singleton:true,constructor:,1,0,0,0,0,0,[Ext.device,"Connection"],0));(Ext.cmd.derive("Ext.event.Event",Ext.Base,{alternateClassName:"Ext.EventObject",isStopped:false,set:stopEvent:function(){return this.stopPropagation()},stopPropagation:,0,0,0,0,0,0,[Ext.event,"Event",Ext,"EventObject"],0));(Ext.cmd.derive("Ext.event.Dom",Ext.event.Event,{constructor:stopEvent:preventDefault:function(){this.browserEvent.preventDefault()},getPageX:function(){return this.pageX||this.browserEvent.pageX},getPageY:getXY:getTarget:getTime:function(){return this.time},setDelegatedTarget:function(a){this.delegatedTarget=a},makeUnpreventable:,1,0,0,0,0,0,[Ext.event,"Dom"],0));(Ext.cmd.derive("Ext.event.Touch",Ext.event.Dom,{constructor:cloneTouches:,1,0,0,0,0,0,[Ext.event,"Touch"],0));(Ext.cmd.derive("Ext.event.publisher.Publisher",Ext.Base,{targetType:"",idSelectorRegex:/^#([\w\-]+)$/i,constructor:handles:getHandledEvents:function(){return this.handledEvents},setDispatcher:function(a){this.dispatcher=a},subscribe:function(){return false},unsubscribe:function(){return false},unsubscribeAll:notify:function(){return false},getTargetType:function(){return this.targetType},dispatch:,1,0,0,0,0,0,[Ext.event.publisher,"Publisher"],0));(Ext.cmd.derive("Ext.event.publisher.ComponentDelegation",Ext.event.publisher.Publisher,{targetType:"component",optimizedSelectorRegex:/^#([\w\-]+)((?:[\s]*)>(?:[\s]*)|(?:\s*))([\w\-]+)$/i,handledEvents:["*"],getSubscribers:subscribe:unsubscribe:notify:matchesSelector:dispatch:publish:,0,0,0,0,0,0,[Ext.event.publisher,"ComponentDelegation"],0));(Ext.cmd.derive("Ext.event.publisher.ComponentPaint",Ext.event.publisher.Publisher,{targetType:"component",handledEvents:["erased"],eventNames:{painted:"painted",erased:"erased"},constructor:getSubscribers:setDispatcher:subscribe:unsubscribe:onBeforeComponentRenderedChange:onBeforeComponentHiddenChange:onComponentRenderedChange:onComponentHiddenChange:dispatchQueue:publish:,1,0,0,0,0,0,[Ext.event.publisher,"ComponentPaint"],0));(Ext.cmd.derive("Ext.event.publisher.Dom",Ext.event.publisher.Publisher,{targetType:"element",idOrClassSelectorRegex:/^([#|\.])([\w\-]+)$/,handledEvents:["focus","blur","paste","input","change","keyup","keydown","keypress","submit","transitionend","animationstart","animationend"],classNameSplitRegex:/\s+/,SELECTOR_ALL:"*",constructor:getSubscribers:getVendorEventName:bindListeners:bindListener:attachListener:removeListener:doesEventBubble:function(a){return !!this.doBubbleEventsMap[a]},subscribe:unsubscribe:getElementTarget:getBubblingTargets:dispatch:publish:doPublish:matchesSelector:),onEvent:getSubscribersCount:,1,0,0,0,0,0,[Ext.event.publisher,"Dom"],0));(Ext.cmd.derive("Ext.util.paintmonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:bindListeners:function(a){this.monitorElement[a?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,true)},applyElement:function(a){if(a){return Ext.get(a)}},updateElement:onElementPainted:function(){},destroy:,1,0,0,0,0,0,[Ext.util.paintmonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.paintmonitor.CssAnimation",Ext.util.paintmonitor.Abstract,{eventName:Ext.browser.is.WebKit?"webkitAnimationEnd":"animationend",monitorClass:"cssanimation",onElementPainted:,0,0,0,0,0,0,[Ext.util.paintmonitor,"CssAnimation"],0));(Ext.cmd.derive("Ext.util.paintmonitor.OverflowChange",Ext.util.paintmonitor.Abstract,{eventName:Ext.browser.is.Firefox?"overflow":"overflowchanged",monitorClass:"overflowchange",onElementPainted:,0,0,0,0,0,0,[Ext.util.paintmonitor,"OverflowChange"],0));(Ext.cmd.derive("Ext.util.PaintMonitor",Ext.Base,{constructor:,1,0,0,0,0,0,[Ext.util,"PaintMonitor"],0));Ext.define("InfinityMobile.util.PaintMonitor",{override:"Ext.util.PaintMonitor",constructor:,function(){});(Ext.cmd.derive("Ext.event.publisher.ElementPaint",Ext.event.publisher.Publisher,{targetType:"element",handledEvents:["painted"],constructor:function(){this.monitors={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:unsubscribe:onElementPainted:,1,0,0,0,0,0,[Ext.event.publisher,"ElementPaint"],0));(Ext.cmd.derive("Ext.mixin.Templatable",Ext.mixin.Mixin,{mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:getElementTemplate:initElement:linkElement:function(a,b){this.link(a,b)},doInitElement:,0,0,0,0,0,0,[Ext.mixin,"Templatable"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:0,height:0,contentWidth:0,contentHeight:0,constructor:bindListeners:Ext.emptyFn,applyElement:function(a){if(a){return Ext.get(a)}},updateElement:applyArgs:refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.offsetWidth},getContentHeight:function(){return this.detectorsContainer.offsetHeight},refreshSize:refresh:destroy:,1,0,0,0,0,[[Ext.mixin.Templatable.prototype.mixinId||Ext.mixin.Templatable.$className,Ext.mixin.Templatable]],[Ext.util.sizemonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Default",Ext.util.sizemonitor.Abstract,{updateElement:function(a){},bindListeners:getContentBounds:getContentWidth:function(){return this.getElement().getWidth()},getContentHeight:function(){return this.getElement().getHeight()}},0,0,0,0,0,0,[Ext.util.sizemonitor,"Default"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Scroll",Ext.util.sizemonitor.Abstract,{getElementConfig:constructor:bindListeners:forceRefresh:onScroll:refreshMonitors:,1,0,0,0,0,0,[Ext.util.sizemonitor,"Scroll"],0));(Ext.cmd.derive("Ext.util.sizemonitor.OverflowChange",Ext.util.sizemonitor.Abstract,{constructor:getElementConfig:bindListeners:onExpand:onShrink:refreshMonitors:,1,0,0,0,0,0,[Ext.util.sizemonitor,"OverflowChange"],0));(Ext.cmd.derive("Ext.util.SizeMonitor",Ext.Base,{constructor:,1,0,0,0,0,0,[Ext.util,"SizeMonitor"],0));Ext.define("InfinityMobile.util.SizeMonitor",{override:"Ext.util.SizeMonitor",constructor:,function(){});(Ext.cmd.derive("Ext.event.publisher.ElementSize",Ext.event.publisher.Publisher,{targetType:"element",handledEvents:["resize"],constructor:subscribe:unsubscribe:onElementResize:,1,0,0,0,0,0,[Ext.event.publisher,"ElementSize"],0));(Ext.cmd.derive("Ext.event.publisher.TouchGesture",Ext.event.publisher.Dom,{isNotPreventable:/^(select|a)$/i,handledEvents:["touchstart","touchmove","touchend","touchcancel"],mouseToTouchMap:{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},lastEventType:null,config:{moveThrottle:0,recognizers:{}},constructor:function(a){var b=this;this.eventProcessors={touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd};this.eventToRecognizerMap={};this.activeRecognizers=[];this.touchesMap={};this.currentIdentifiers=[];if(Ext.browser.is.Chrome&&Ext.os.is.Android){this.screenPositionRatio=Ext.browser.version.gt("18")?1:1/window.devicePixelRatio}else{if(Ext.browser.is.AndroidStock4){this.screenPositionRatio=1}else{if(Ext.os.is.BlackBerry){this.screenPositionRatio=1/window.devicePixelRatio}else{if(Ext.browser.engineName=="WebKit"&&Ext.os.is.Desktop){this.screenPositionRatio=1}else{this.screenPositionRatio=window.innerWidth/window.screen.width}}}}this.initConfig(a);if(Ext.feature.has.Touch){b.onTargetTouchMove=b.onTargetTouchMove.bind(b);b.onTargetTouchEnd=b.onTargetTouchEnd.bind(b)}return Ext.event.publisher.Dom.prototype.constructor.call(this)},applyRecognizers:handles:doesEventBubble:function(){return true},onEvent:function(f){var d=f.type,b=this.lastEventType,c=[f];if(this.eventProcessors[d]){this.eventProcessors[d].call(this,f);if(d==="touchend"&&b&&b==="touchstart"){f.preventDefault()}this.lastEventType=d;return}if("button" in f&&f.button>0){return}else{if(d==="mousedown"&&b&&b!=="mouseup"){var a=document.createEvent("MouseEvent");a.initMouseEvent("mouseup",f.bubbles,f.cancelable,document.defaultView,f.detail,f.screenX,f.screenY,f.clientX,f.clientY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.metaKey,f.button,f.relatedTarget);this.onEvent(a)}if(d!=="mousemove"){this.lastEventType=d}f.identifier=1;f.touches=(d!=="mouseup")?c:[];f.targetTouches=(d!=="mouseup")?c:[];f.changedTouches=c;this.eventProcessors[this.mouseToTouchMap[d]].call(this,f)}},registerRecognizer:onRecognized:publish:getCommonTargets:invokeRecognizers:getActiveRecognizers:function(){return this.activeRecognizers},updateTouch:updateTouches:factoryEvent:onTouchStart:function(f){var k=f.changedTouches,g=f.target,h=k.length,a=this.isNotPreventable,b=(f.type==="touchstart"),j=this,d,c,l;this.updateTouches(k);f=this.factoryEvent(f);k=f.changedTouches;if(Ext.browser.is.AndroidStock&&this.currentIdentifiers.length>=2){f.preventDefault()}if(b){g.addEventListener("touchmove",j.onTargetTouchMove);g.addEventListener("touchend",j.onTargetTouchEnd);g.addEventListener("touchcancel",j.onTargetTouchEnd)}for(d=0;d<h;d++){c=k[d];this.publish("touchstart",c.targets,f,{touch:c})}if(!this.isStarted){this.isStarted=true;this.invokeRecognizers("onStart",f)}this.invokeRecognizers("onTouchStart",f);l=g.parentNode||{}},onTouchMove:onAnimationFrame:doTouchMove:onTouchEnd:onTargetTouchMove:onTargetTouchEnd:function(d){var b=this,c=d.target,a=0,f;for(identifier in this.touchesMap){f=this.touchesMap[identifier].target;if(f===c){a++}}if(a<=1){c.removeEventListener("touchmove",b.onTargetTouchMove);c.removeEventListener("touchend",b.onTargetTouchEnd);c.removeEventListener("touchcancel",b.onTargetTouchEnd)}if(!Ext.getBody().contains(c)){b.onTouchEnd(d)}}},1,0,0,0,0,0,[Ext.event.publisher,"TouchGesture"],function(){if(Ext.feature.has.Pointer){this.override({pointerToTouchMap:{MSPointerDown:"touchstart",MSPointerMove:"touchmove",MSPointerUp:"touchend",MSPointerCancel:"touchcancel",pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"},touchToPointerMapEdge:{touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},touchToPointerMap:{touchstart:"MSPointerDown",touchmove:"MSPointerMove",touchend:"MSPointerUp",touchcancel:"MSPointerCancel"},attachListener:onEvent:)}else{if(!Ext.browser.is.Ripple&&(Ext.os.is.ChromeOS||!Ext.feature.has.Touch)){this.override({handledEvents:["touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseup"]})}}}));(Ext.cmd.derive("Ext.event.recognizer.Recognizer",Ext.Base,{handledEvents:[],config:{onRecognized:Ext.emptyFn,onFailed:Ext.emptyFn,callbackScope:null},constructor:function(a){this.initConfig(a);return this},getHandledEvents:function(){return this.handledEvents},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,fail:fire:,1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.event.recognizer,"Recognizer"],0));(Ext.cmd.derive("Ext.event.recognizer.Touch",Ext.event.recognizer.Recognizer,{onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn},0,0,0,0,0,0,[Ext.event.recognizer,"Touch"],0));(Ext.cmd.derive("Ext.event.recognizer.SingleTouch",Ext.event.recognizer.Touch,{inheritableStatics:{NOT_SINGLE_TOUCH:1,TOUCH_MOVED:2},onTouchStart:,0,0,0,0,0,0,[Ext.event.recognizer,"SingleTouch"],0));(Ext.cmd.derive("Ext.event.recognizer.DoubleTap",Ext.event.recognizer.SingleTouch,{inheritableStatics:{DIFFERENT_TARGET:3},config:{maxDuration:300,moveDistance:15},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:onTouchMove:onEnd:fireSingleTap:,0,0,0,0,0,0,[Ext.event.recognizer,"DoubleTap"],0));(Ext.cmd.derive("Ext.event.recognizer.Drag",Ext.event.recognizer.SingleTouch,{isStarted:false,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend"],config:{minDistance:8},constructor:onTouchStart:tryDragStart:onTouchMove:onAxisDragEnd:resetInfo:updateInfo:onTouchEnd:,1,0,0,0,0,0,[Ext.event.recognizer,"Drag"],0));(Ext.cmd.derive("Ext.event.recognizer.Swipe",Ext.event.recognizer.SingleTouch,{handledEvents:["swipestart","swipe"],inheritableStatics:{MAX_OFFSET_EXCEEDED:16,MAX_DURATION_EXCEEDED:17,DISTANCE_NOT_ENOUGH:18},config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:onTouchMove:onTouchEnd:,0,0,0,0,0,0,[Ext.event.recognizer,"Swipe"],0));(Ext.cmd.derive("Ext.event.recognizer.EdgeSwipe",Ext.event.recognizer.Swipe,{handledEvents:["edgeswipe","edgeswipestart","edgeswipeend"],inheritableStatics:{NOT_NEAR_EDGE:19},config:{minDistance:60},onTouchStart:onTouchMove:onTouchEnd:,0,0,0,0,0,0,[Ext.event.recognizer,"EdgeSwipe"],0));(Ext.cmd.derive("Ext.event.recognizer.LongPress",Ext.event.recognizer.SingleTouch,{inheritableStatics:{DURATION_NOT_ENOUGH:32},config:{minDuration:1000},handledEvents:["longpress"],fireLongPress:onTouchStart:onTouchMove:onTouchEnd:fail:,0,0,0,0,0,0,[Ext.event.recognizer,"LongPress"],);(Ext.cmd.derive("Ext.event.recognizer.MultiTouch",Ext.event.recognizer.Touch,{requiredTouchesCount:2,isTracking:false,isStarted:false,onTouchStart:onTouchEnd:function(a){this.end(a)},start:end:,0,0,0,0,0,0,[Ext.event.recognizer,"MultiTouch"],0));(Ext.cmd.derive("Ext.event.recognizer.Pinch",Ext.event.recognizer.MultiTouch,{requiredTouchesCount:2,handledEvents:["pinchstart","pinch","pinchend"],startDistance:0,lastTouches:null,onTouchMove:function(c){if(!this.isTracking){return}var b=Array.prototype.slice.call(c.touches),d,a,f;d=b[0].point;a=b[1].point;f=d.getDistanceTo(a);if(f===0){return}if(!this.isStarted){this.isStarted=true;this.startDistance=f;this.fire("pinchstart",c,b,{touches:b,distance:f,scale:1})}else{this.fire("pinch",c,b,{touches:b,distance:f,scale:f/this.startDistance})}this.lastTouches=b},fireEnd:fail:,0,0,0,0,0,0,[Ext.event.recognizer,"Pinch"],0));(Ext.cmd.derive("Ext.event.recognizer.Rotate",Ext.event.recognizer.MultiTouch,{requiredTouchesCount:2,handledEvents:["rotatestart","rotate","rotateend"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(h){if(!this.isTracking){return}var g=Array.prototype.slice.call(h.touches),b=this.lastAngle,d,f,c,a,j,k;d=g[0].point;f=g[1].point;c=d.getAngleTo(f);if(b!==null){k=Math.abs(b-c);a=c+360;j=c-360;if(Math.abs(a-b)<k){c=a}else{if(Math.abs(j-b)<k){c=j}}}this.lastAngle=c;if(!this.isStarted){this.isStarted=true;this.startAngle=c;this.fire("rotatestart",h,g,{touches:g,angle:c,rotation:0})}else{this.fire("rotate",h,g,{touches:g,angle:c,rotation:c-this.startAngle})}this.lastTouches=g},fireEnd:,0,0,0,0,0,0,[Ext.event.recognizer,"Rotate"],0));(Ext.cmd.derive("Ext.event.recognizer.Tap",Ext.event.recognizer.SingleTouch,{handledEvents:["tap","tapcancel"],config:{moveDistance:15},onTouchStart:onTouchMove:onTouchEnd:,0,0,0,0,0,0,[Ext.event.recognizer,"Tap"],0));(Ext.cmd.derive("Ext.slider.Thumb",Ext.Component,{config:{baseCls:"x-thumb",pressedCls:"x-thumb-pressing",draggable:{direction:"horizontal"}},platformConfig:[{platform:["ie10"],draggable:{translatable:{translationMethod:"csstransform"}}}],elementWidth:0,initialize:getTemplate:updatePressedCls:onPress:onRelease:function(a){this.fireAction("release",[this,a],"doRelease")},doRelease:onDragStart:function(){if(this.isDisabled()){return false}this.relayEvent(arguments)},onDrag:function(){if(this.isDisabled()){return false}this.relayEvent(arguments)},onDragEnd:onElementResize:getElementWidth:function(){return this.elementWidth}},0,["thumb"],["component","thumb"],{component:true,thumb:true},["widget.thumb"],0,[Ext.slider,"Thumb"],0));(Ext.cmd.derive("Ext.slider.Slider",Ext.Container,{config:{baseCls:"x-slider",thumbConfig:{draggable:{translatable:{easingX:{duration:300,type:"ease-out"}}}},increment:1,value:0,minValue:0,maxValue:100,allowThumbsOverlapping:false,animation:true,readOnly:false},elementWidth:0,offsetValueRatio:0,activeThumb:null,constructor:initialize:factoryThumb:getThumbs:function(){return this.innerItems},getThumb:refreshOffsetValueRatio:onThumbResize:onResize:refresh:function(){this.refreshValue()},setActiveThumb:onThumbDragStart:onThumbDrag:setIndexValue:onThumbDragEnd:getThumbIndex:function(a){return this.getThumbs().indexOf(a)},refreshThumbConstraints:onTap:updateThumbs:function(a){this.add(a)},applyValue:updateValue:refreshValue:constrainValue:setThumbsCount:setValues:function(a){this.setValue(a)},getValues:function(){return this.getValue()},applyIncrement:updateAllowThumbsOverlapping:function(b,a){if(typeof a!="undefined"){this.refreshValue()}},updateMinValue:function(b,a){if(typeof a!="undefined"){this.refreshValue()}},updateMaxValue:function(b,a){if(typeof a!="undefined"){this.refreshValue()}},updateIncrement:doSetDisabled:,1,["slider"],["component","container","slider"],{component:true,container:true,slider:true},["widget.slider"],0,[Ext.slider,"Slider"],function(){}));(Ext.cmd.derive("Ext.field.Slider",Ext.field.Field,{alternateClassName:"Ext.form.Slider",config:{cls:"x-slider-field",tabIndex:-1,readOnly:false},proxyConfig:{increment:1,value:0,minValue:0,maxValue:100},constructor:initialize:applyComponent:function(a){return Ext.factory(a,Ext.slider.Slider)},updateComponent:onSliderChange:function(){this.fireEvent.apply(this,[].concat("change",this,Array.prototype.slice.call(arguments)))},onSliderDragStart:function(){this.fireEvent.apply(this,[].concat("dragstart",this,Array.prototype.slice.call(arguments)))},onSliderDrag:function(){this.fireEvent.apply(this,[].concat("drag",this,Array.prototype.slice.call(arguments)))},onSliderDragEnd:setValues:function(a){this.setValue(a);this.updateMultipleState()},getValues:function(){return this.getValue()},reset:doSetDisabled:updateReadOnly:function(a){this.getComponent().setReadOnly(a)},isDirty:updateMultipleState:,1,["sliderfield"],["component","field","sliderfield"],{component:true,field:true,sliderfield:true},["widget.sliderfield"],0,[Ext.field,"Slider",Ext.form,"Slider"],0));(Ext.cmd.derive("Ext.slider.Toggle",Ext.slider.Slider,{config:{baseCls:"x-toggle",minValueCls:"x-toggle-off",maxValueCls:"x-toggle-on"},initialize:applyMinValue:function(){return 0},applyMaxValue:function(){return 1},applyIncrement:function(){return 1},updateMinValueCls:function(c,b){var a=this.element;if(b&&a.hasCls(b)){a.replaceCls(b,c)}},updateMaxValueCls:setValue:setIndexValue:onChange:toggle:function(){var a=this.getValue();this.setValue((a==1)?0:1);return this},onTap:,0,0,["component","container","slider"],{component:true,container:true,slider:true},0,0,[Ext.slider,"Toggle"],0));(Ext.cmd.derive("Ext.field.Toggle",Ext.field.Slider,{alternateClassName:"Ext.form.Toggle",config:{cls:"x-toggle-field",labelAlign:"left",activeLabel:null,inactiveLabel:null},platformConfig:[{theme:["Windows"],labelAlign:"left"},{theme:["Blackberry","MountainView"],activeLabel:"On",inactiveLabel:"Off"}],proxyConfig:{minValueCls:"x-toggle-off",maxValueCls:"x-toggle-on"},applyComponent:updateActiveLabel:function(b,a){if(b!=a){this.getComponent().element.dom.setAttribute("data-activelabel",b)}},updateInactiveLabel:setValue:getValue:onSliderChange:toggle:onChange:,0,["togglefield"],["component","field","sliderfield","togglefield"],{component:true,field:true,sliderfield:true,togglefield:true},["widget.togglefield"],0,[Ext.field,"Toggle",Ext.form,"Toggle"],0));(Ext.cmd.derive("Ext.fx.runner.Css",Ext.Evented,{prefixedProperties:{transform:true,"transform-origin":true,perspective:true,"transform-style":true,transition:true,"transition-property":true,"transition-duration":true,"transition-timing-function":true,"transition-delay":true,animation:true,"animation-name":true,"animation-duration":true,"animation-iteration-count":true,"animation-direction":true,"animation-timing-function":true,"animation-delay":true},lengthProperties:{top:true,right:true,bottom:true,left:true,width:true,height:true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,"border-bottom-width":true,"border-left-width":true,"border-right-width":true,"border-spacing":true,"border-top-width":true,"border-width":true,"outline-width":true,"letter-spacing":true,"line-height":true,"text-indent":true,"word-spacing":true,"font-size":true,translate:true,translateX:true,translateY:true,translateZ:true,translate3d:true},durationProperties:{"transition-duration":true,"transition-delay":true,"animation-duration":true,"animation-delay":true},angleProperties:{rotate:true,rotateX:true,rotateY:true,rotateZ:true,skew:true,skewX:true,skewY:true},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",formattedNameCache:{},constructor:getStyleSheet:applyRules:applyStyles:formatName:formatValue:,1,0,0,0,0,0,[Ext.fx.runner,"Css"],0));(Ext.cmd.derive("Ext.fx.runner.CssTransition",Ext.fx.runner.Css,{listenersAttached:false,constructor:attachListeners:onTransitionEnd:onAnimationEnd:onAllAnimationsEnd:hasRunningAnimations:refreshRunningAnimationsData:getRunningData:getTestElement:getCssStyleValue:run:onAnimationStop:,1,0,0,0,0,0,[Ext.fx.runner,"CssTransition"],0));(Ext.cmd.derive("Ext.fx.Runner",Ext.Base,{constructor:,1,0,0,0,0,0,[Ext.fx,"Runner"],0));(Ext.cmd.derive("Ext.log.Base",Ext.Base,{config:{},constructor:function(a){this.initConfig(a);return this}},1,0,0,0,0,0,[Ext.log,"Base"],0));(();(Ext.cmd.derive("Ext.log.formatter.Formatter",Ext.log.Base,{config:{messageFormat:"{message}"},format:substitute:,0,0,0,0,0,0,[Ext.log.formatter,"Formatter"],0));(Ext.cmd.derive("Ext.log.formatter.Default",Ext.log.formatter.Formatter,{config:{messageFormat:"[{priorityName}][{callerDisplayName}] {message}"},format:,0,0,0,0,0,0,[Ext.log.formatter,"Default"],0));(Ext.cmd.derive("Ext.log.writer.Writer",Ext.log.Base,{config:{formatter:null,filters:{}},constructor:updateFilters:write:doWrite:Ext.emptyFn},1,0,0,0,0,0,[Ext.log.writer,"Writer"],0));(Ext.cmd.derive("Ext.log.writer.Console",Ext.log.writer.Writer,{config:{throwOnErrors:true,throwOnWarnings:false},doWrite:,0,0,0,0,0,0,[Ext.log.writer,"Console"],0));(Ext.cmd.derive("Ext.viewport.Default",Ext.Container,{PORTRAIT:"portrait",LANDSCAPE:"landscape",config:{autoMaximize:false,autoBlurInput:true,preventPanning:true,preventZooming:false,autoRender:true,layout:"card",width:"100%",height:"100%",useBodyElement:true,menus:{}},isReady:false,isViewport:true,isMaximizing:false,id:"ext-viewport",isInputRegex:/^(input|textarea|select|a)$/i,focusedElement:null,fullscreenItemCls:"x-fullscreen",constructor:onDomReady:onReady:onElementFocus:onElementBlur:function(){this.focusedElement=null},render:applyAutoBlurInput:function(a){var b=(Ext.feature.has.Touch)?"touchstart":"mousedown";if(a){this.addWindowListener(b,this.doBlurInput,false)}else{this.removeWindowListener(b,this.doBlurInput,false)}return a},applyAutoMaximize:applyPreventPanning:applyPreventZooming:doAutoMaximizeOnReady:doAutoMaximizeOnOrientationChange:doBlurInput:doPreventPanning:function(a){a.preventDefault()},doPreventZooming:addWindowListener:function(b,c,a){window.addEventListener(b,c,Boolean(a))},removeWindowListener:doAddListener:supportsOrientation:function(){return Ext.feature.has.Orientation},onResize:onOrientationChange:fireOrientationChangeEvent:updateSize:waitUntil:maximize:function(){this.fireMaximizeEvent()},fireMaximizeEvent:doSetHeight:function(a){Ext.getBody().setHeight(a);Ext.Container.prototype.doSetHeight.apply(this,arguments)},doSetWidth:scrollToTop:getWindowWidth:function(){return window.innerWidth},getWindowHeight:function(){return window.innerHeight},getWindowOuterHeight:function(){return window.outerHeight},getWindowOrientation:getOrientation:function(){return this.orientation},getSize:determineOrientation:onItemFullscreenChange:setMenu:removeMenu:fixMenuSize:showMenu:hideMenu:hideAllMenus:hideOtherMenus:toggleMenu:sideForDirection:sideForSwipeDirection:onTap:function(a){},onSwipeStart:onEdgeSwipeStart:onEdgeSwipe:onEdgeSwipeEnd:,1,["viewport"],["component","container","viewport"],{component:true,container:true,viewport:true},["widget.viewport"],0,[Ext.viewport,"Default"],0));(Ext.cmd.derive("Ext.viewport.Android",Ext.viewport.Default,{config:{translatable:{translationMethod:"csstransform"}},constructor:getWindowWidth:function(){return this.element.getWidth()},getWindowHeight:function(){return this.element.getHeight()},getDummyInput:doBlurInput:hideKeyboardIfNeeded:doFireOrientationChangeEvent:determineOrientation:getActualWindowOuterHeight:maximize:isHeightMaximized:supportsOrientation:function(){return false},onResize:function(){this.waitUntil(function(){var c=this.windowWidth,f=this.windowHeight,e=this.getWindowWidth(),a=this.getWindowHeight(),d=this.getOrientation(),b=this.determineOrientation();return((c!==e&&f!==a)&&d!==b)},function(){var b=this.getOrientation(),a=this.determineOrientation();this.fireOrientationChangeEvent(a,b)},Ext.emptyFn,250)},doPreventZooming:,1,0,["component","container","viewport"],{component:true,container:true,viewport:true},0,0,[Ext.viewport,"Android"],);(Ext.cmd.derive("Ext.viewport.Ios",Ext.viewport.Default,{isFullscreen:function(){return this.isHomeScreen()},isHomeScreen:constructor:maximize:getScreenHeight:onElementFocus:onElementBlur:onTouchStart:scrollToTop:,1,0,["component","container","viewport"],{component:true,container:true,viewport:true},0,0,[Ext.viewport,"Ios"],);(Ext.cmd.derive("Ext.viewport.WindowsPhone",Ext.viewport.Default,{alternateClassName:"Ext.viewport.WP",config:{translatable:{translationMethod:"csstransform"}},initialize:supportsOrientation:function(){return false},onResize:,0,0,["component","container","viewport"],{component:true,container:true,viewport:true},0,0,[Ext.viewport,"WindowsPhone",Ext.viewport,"WP"],0));(Ext.cmd.derive("Ext.viewport.Viewport",Ext.Base,{constructor:,1,0,0,0,0,0,[Ext.viewport,"Viewport"],0));(Ext.cmd.derive("InfinityMobile.model.MyModel",Ext.data.Model,{config:{fields:[{name:"landscapeBackgroundImage",type:"string"},{name:"showOnPortrait",type:"boolean"},{name:"dataURL",type:"string"},{name:"name",type:"string"},{name:"showOnLandscape",type:"boolean"},{name:"rootKeyPath",type:"string"},{name:"shareBetweenCanvasses",type:"boolean"},{name:"states",type:"auto"},{name:"position",type:"auto"},{name:"customizables",type:"auto"},{name:"anchors",type:"auto"},{name:"globalID",type:"string"},{name:"borders",type:"auto"},{name:"paddings",type:"auto"},{name:"identifier",type:"string"},{name:"defaultState",type:"string"},{name:"events",type:"auto"},{name:"subviews",type:"auto"},{name:"portraitBackgroundImage",type:"string"},{name:"type",type:"string"}]}},0,0,0,0,["model.mymodel"],0,[InfinityMobile.model,"MyModel"],0));(Ext.cmd.derive("InfinityMobile.store.EditionFlatplan",Ext.data.Store,{config:{model:"InfinityMobile.model.MyModel",storeId:"EditionFlatplan",proxy:{type:"ajax",url:"http://localhost/psapp/FlatPlans/c3cb755a-199f-4183-ae5f-82b2ed0980d7.txt",noCache:false,reader:{type:"json"}}}},0,0,0,0,0,0,[InfinityMobile.store,"EditionFlatplan"],0));(Ext.cmd.derive("InfinityMobile.store.LatestEditionFlatplan",Ext.data.Store,{config:{model:"InfinityMobile.model.MyModel",storeId:"LatestEditionFlatplan",proxy:{type:"ajax",url:"http://localhost/psapp/FlatPlans/c3cb755a-199f-4183-ae5f-82b2ed0980d7.txt",noCache:false,reader:{type:"json"}}}},0,0,0,0,0,0,[InfinityMobile.store,"LatestEditionFlatplan"],0));(Ext.cmd.derive("InfinityMobile.store.ArchiveStore",Ext.data.Store,{config:{model:"InfinityMobile.model.MyModel",storeId:"ArchiveStore",proxy:{type:"ajax",noCache:false,reader:{type:"json"}}}},0,0,0,0,0,0,[InfinityMobile.store,"ArchiveStore"],0));(Ext.cmd.derive("InfinityMobile.store.SettingStore",Ext.data.Store,{config:{model:"InfinityMobile.model.MyModel",storeId:"SettingStore",proxy:{type:"ajax",noCache:false,reader:{type:"json"}}}},0,0,0,0,0,0,[InfinityMobile.store,"SettingStore"],0));(Ext.cmd.derive("InfinityMobile.store.SearchStore",Ext.data.Store,{config:{model:"InfinityMobile.model.MyModel",storeId:"SearchStore",proxy:{type:"ajax",noCache:false,reader:{type:"json"}}}},0,0,0,0,0,0,[InfinityMobile.store,"SearchStore"],0));(Ext.cmd.derive("InfinityMobile.store.SearchHighlightStore",Ext.data.Store,{config:{model:"InfinityMobile.model.MyModel",storeId:"SearchHighlightStore",proxy:{type:"ajax",noCache:false,reader:{type:"json"}}}},0,0,0,0,0,0,[InfinityMobile.store,"SearchHighlightStore"],0));(Ext.cmd.derive("InfinityMobile.store.MediaStore",Ext.data.Store,{config:{model:"InfinityMobile.model.MyModel",storeId:"MediaStore",proxy:{type:"ajax",noCache:false,reader:{type:"json"}}}},0,0,0,0,0,0,[InfinityMobile.store,"MediaStore"],0));(Ext.cmd.derive("InfinityMobile.store.ArticleStore",Ext.data.Store,{config:{model:"InfinityMobile.model.MyModel",storeId:"ArticleStore",proxy:{type:"ajax",noCache:false,reader:{type:"json"}}}},0,0,0,0,0,0,[InfinityMobile.store,"ArticleStore"],0));(Ext.cmd.derive("InfinityMobile.store.LanguageStore",Ext.data.Store,{config:{model:"InfinityMobile.model.MyModel",storeId:"LanguageStore",proxy:{type:"ajax",noCache:false,reader:{type:"json"}}}},0,0,0,0,0,0,[InfinityMobile.store,"LanguageStore"],0));(Ext.cmd.derive("InfinityMobile.store.PuzzleArchiveStore",Ext.data.Store,{config:{model:"InfinityMobile.model.MyModel",storeId:"PuzzleArchiveStore",proxy:{type:"ajax",noCache:false,reader:{type:"json"}}}},0,0,0,0,0,0,[InfinityMobile.store,"PuzzleArchiveStore"],0));(Ext.cmd.derive("InfinityMobile.controller.AppController",Ext.app.Controller,{config:{refs:{main:"main"},control:{main:{removeSplash:"removeSplashScreen"}}},init:function(){var a=this;a.initApp();$(document).on("dragstart",function(){return false});a.removedSplash=false;a.setupRenderOptions()},setupRenderOptions:fixOrientationBug:function(){var a=this},initApp:function(){var b=this;currentProfile="tablet";if(this.getApplication().getCurrentProfile()!=null){currentProfile=this.getApplication().getCurrentProfile().getName()}if(typeof(Worker)!=="undefined"){}else{}if(currentProfile=="phone"){if(Ext.os.is.iPhone){$("html").addClass("iphone")}}if(Ext.browser.userAgent.indexOf("CrOS")!=-1){currentProfile="desktop";Ext.os.is.Desktop=true;Ext.os.is.Phone=false;Ext.os.is.Tablet=false}b.setMainPanel();if(Ext.os.is.Android&&Ext.browser.is.Chrome){b.loadDimensionsAndroid()}else{b.loadDimensions()}device=currentProfile;var c=qs.appid;b.initAppReader();try{if(localStorage.getItem("udid")==null){udid=b.createUdid();localStorage.setItem("udid",udid)}else{udid=localStorage.getItem("udid")}}catch(a){udid=b.createUdid()}},checkTribuneCommunity:function(){if(typeof isTribReader!="undefined"&&isTribReader==true){if(settings.reader.showZonesOnLaunch=="true"){try{var a=localStorage.getItem("zones"+publicationguid)}catch(b){var a=null}if(a==null){mainPanel.fireEvent("toolbarZones")}}}},createUdid:initialiseGA:function(a){((window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create",a,"auto")},initialiseComScore:loadDimensions:loadDimensionsAndroid:setMainPanel:setSplashScreen:removeSplashScreen:function(a){var b=this;if(!b.removedSplash){if(a!=null){clearInterval(a.clearSplash)}clearSplash();b.removedSplash=true}},initAppReader:function(){var a=this;a.loadArticleStore()},loadReader:function(e){var c=this;settings=e.data.items[0].raw;language=Ext.getStore("LanguageStore").data.items[0].raw;c.checkTribuneCommunity();mainPanel.fireEvent("settingsLoaded");var a=function(f){c.loadReaderStore(f)};c.loadReaderView(a);c.loadArchiveStore();if(settings.push!=null&&(window.location.protocol=="https:"||document.location.hostname=="localhost")){c.initializePush()}var b=Ext.getStore("SettingStore");if(b.data.items[0].raw.tracking){var d=b.data.items[0].raw.tracking.trackingType;if(d=="GA"){c.initialiseGA(b.data.items[0].raw.tracking.accoundid)}else{if(d=="DA"){c.initialiseComScore(b.data.items[0].raw.tracking.accoundid)}}}if(Ext.os.is.Desktop&&settings.fullscreenPrompt!=null){Ext.create("InfinityMobile.view.FullscreenPrompt",{})}mainPanel.fireEvent("checkDataCapture");mainPanel.fireEvent("createDataCapture");mainPanel.fireEvent("initTracking")},loadReaderView:function(d){var c=this;if(navigator.onLine){var a="";if(stage){a="&stage=true"}var b="";if(typeof latestLM!="undefined"){b="&lm="+latestLM}$.ajax({crossDomain:true,type:"GET",contentType:"application/json; charset=utf-8",async:true,url:"../load_reader_view.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight+a+b}).done(}},modifyReaderView:function(a){var g=this;var f=settings.reader;var h=settings.topbar;var l=a.subviews;for(var c=0;c<l.length;c++){var k=l[c];switch(k.globalID){case"ThumbLogo":case"ThumbLogoSmall":var n=k.states;for(var b=0;b<n.length;b++){var e=n[b];if(e.bindings.url!=null){e.bindings.url=h.logo;if(k.globalID=="ThumbLogoSmall"&&h.smallLogo){e.bindings.url=h.smallLogo}}}if(h.logoUrl!=null&&h.logoUrl!=""){console.log("GOT CUSTOM URL");var m=k.events.onTouch;for(var b=0;b<m.length;b++){var d=m[b];d.action="openURL";d.url=h.logoUrl}}break;case"ThumbLogoSmall":case"TopBar":case"topbar":var n=k.states;for(var b=0;b<n.length;b++){var e=n[b];if(e.bindings.backgroundColor!=null){e.bindings.backgroundColor="#"+h.backgroundColor}}if(currentProfile=="desktop"){k.type="PSLTopBar"}break;case"PreviousPageIcon":var n=k.states;for(var b=0;b<n.length;b++){var e=n[b];if(e.bindings.url!=null&&h.previousicon!="someimage.png"){e.bindings.url=h.previousicon}}break;case"NextPageIcon":var n=k.states;for(var b=0;b<n.length;b++){var e=n[b];if(e.bindings.url!=null&&h.nexticon!="someimage.png"){e.bindings.url=h.nexticon}}break;case"SearchIcon":var n=k.states;for(var b=0;b<n.length;b++){var e=n[b];if(e.bindings.url!=null&&h.searchicon!="someimage.png"){e.bindings.url=h.searchicon}}break;case"MenuIcon":var n=k.states;for(var b=0;b<n.length;b++){var e=n[b];if(e.bindings.url!=null&&h.menuicon!="someimage.png"){e.bindings.url=h.menuicon}}break;case"PageText":var n=k.states;for(var b=0;b<n.length;b++){var e=n[b];if(e.bindings.textColor!=null){e.bindings.textColor="#"+h.color}}break;case"SinglePageToggle":case"DoublePageToggle":if(f.toggleDPS=="false"){k.position.landscape.width=0;k.position.landscape.height=0}break;case"ZoomBar":k.type="PSLZoom";break}}},loadReaderStore:function(a){if(navigator.onLine){var c=Ext.getStore("EditionFlatplan");c.viewjson=a;var b="";if(typeof latestLM!="undefined"){b="&lm="+latestLM}c.setProxy({url:"../get_page_groups_from_eid.aspx?pubid="+publicationguid+"&eid="+editionguid+b});c.load()}},loadArchiveStore:function(){if(navigator.onLine){var e=settings.menu;var d=30;if(e!=null){d=e.archiveLength}var c="";if(typeof latestLM!="undefined"){c="&lm="+latestLM}var b="../../editionshtml5_json.aspx?publicationguid="+publicationguid+"&maxnumber="+d+c;if(currentProfile=="desktop"){b="../../editionsdesktop_json.aspx?publicationguid="+publicationguid+"&maxnumber="+d+c}var a=Ext.getStore("ArchiveStore");a.setProxy({url:b});a.load()}},loadSettingsStore:function(){var g="";try{var f=localStorage.getItem("checkLanguage"+publicationguid)}catch(c){var f=null}if(f!=null){var e=f;if(e!="false"){g="&language="+e}}var d=Ext.getStore("SettingStore");d.on({load:"loadReader",scope:this});var a="&version=production";if(version=="stage"){a="&version=stage"}var b="";if(typeof latestLM!="undefined"){b="&lm="+latestLM}d.setProxy({url:"../get_settings.aspx?pubid="+publicationguid+"&edid="+editionguid+"&device="+currentProfile+a+g+b});d.load()},loadArticleStore:function(){var b=Ext.getStore("ArticleStore");b.on({load:"loadLanguageStore",scope:this});var a="";if(typeof latestLM!="undefined"){a="&lm="+latestLM}b.setProxy({url:"../get_articles.aspx?&edid="+editionguid+"&pubid="+publicationguid+a});b.load()},loadLanguageStore:function(){var c=Ext.getStore("LanguageStore");c.on({load:"loadSettingsStore",scope:this});var a="&version=production";if(version=="stage"){a="&version=stage"}var b="";if(typeof latestLM!="undefined"){b="&lm="+latestLM}c.setProxy({url:"../get_language.aspx?pubid="+publicationguid+a+b});c.load()},initializePush:function(){var a=this;mainPanel.fireEvent("initializepush")}},0,0,0,0,0,0,[InfinityMobile.controller,"AppController"],0));(Ext.cmd.derive("InfinityMobile.controller.LayoutController",Ext.app.Controller,{config:{refs:{mainPanel:"#rootPanel",layoutviewcontroller:"layoutviewcontroller",readerViewController:"#readerViewController",carousel:"infinitecarousel2d",reader:"reader"},control:{main:{trapEvent:"TrapEvent"},layoutviewcontroller:{loadViewController:"layoutViewController"},readerpageviewer:{hideWrapAds:"hideWrapAds",showWrapAds:"showWrapAds"}}},layoutViewController:TrapEvent:function(e,c,g,d,a,b){var f=this;if(c.events[e]!=null){$.each(c.events[e],function(k,w){if(true){switch(w.action){case"removeView":mainPanel.removeView();break;case"loadView":var m=w.target;var s=Ext.getCmp(w.target);if(s!=null){var q="";if(w.viewid=="%Share Link%"){q=g["Share Link"]}else{q=w.viewid}s.loadViewByID(q)}else{if(g!=null&&(g["Share Link"]!=null)){var h="";if(g!=null){if(g["Share Link"]!=null){h=g["Share Link"]}}mainPanel.loadArticle(h)}else{if(w.viewid!=undefined&&w.viewid!=""){if(w.presentationStyle=="lightBox"){mainPanel.loadModalView(w,g,d,a)}else{mainPanel.loadview(w.viewid,g,d,a)}}}}break;case"set text":var o;o=Ext.getCmp(w.target);if(o!=null){o.setHtml(w.text)}else{console.log("No target")}break;case"loadDigitalEdition":var v="";var j="";if(w.publication=="%publicationguid%"||w.publicationguid=="%publicationguid%"){j=g.publicationguid}else{j=w.publication}if(w.edition=="%editionguid%"||w.editionguid=="%editionguid%"){v=g.editionguid}else{v=w.edition}var p=Ext.os.deviceType;if(p=="Desktop"){mainPanel.loadFlashReader(w.publication,v)}else{mainPanel.loadReader(applicatiionPlatformID,w.publication,v)}break;case"left":mainPanel.fireEvent("readerLeft");break;case"right":mainPanel.fireEvent("readerRight");break;case"showTutorial":mainPanel.fireEvent("showTutorial");break;case"openReaderMenu":mainPanel.fireEvent("openReaderMenu",w);break;case"loadURL":if(w.target!=null){Ext.Viewport.setMasked({xtype:"loadmask",message:"Loading"});var x=Ext.getCmp("collection"+w.target);if(x!=null){var t=x.json.templates[0].template;var h=g.url+"&maxarticles=2";$.ajax({crossDomain:true,type:"GET",async:true,data:{base64Url:$.base64.encode(h)},url:"../../API/binary_proxy.aspx"}).done(}}break;case"openURL":window.open(w.url,"_blank");break;case"changeState":var m=Ext.getCmp(w.target);if(m!=null){if(m.updateState!=null){m.updateState(w.state)}else{m.parent.updateState(w.state)}}break;case"download":var l={publicationguid:g.publicationguid,publicationname:g.publicationname,editionguid:g.editionguid,editionname:g.editionname,editiondate:g.editiondate,imageurl:g.imageurl};var u="edition"+g.editionguid;try{if(localStorage.getItem(u)==null){localStorage.setItem(u,JSON.stringify(l))}}catch(n){}break;case"removeDownload":var u="edition"+g.editionguid;try{if(localStorage.getItem(u)!=null){localStorage.removeItem(u)}}catch(n){}break;case"toggle dps mode":mainPanel.fireEvent("toggleDPSMode");break;case"dps mode on":mainPanel.fireEvent("dpsModeOn");break;case"dps mode off":mainPanel.fireEvent("dpsModeOff");break;case"sendFeedback":location.href="mailto:support@pagesuite.co.uk?subject=Feedback&body=Feedback";break;case"refresh":location.reload();break;case"clearCache":try{localStorage.clear()}catch(n){}location.reload();break;case"search":mainPanel.fireEvent("showSearch",g);break;case"jump to page":var r=parseInt(c.events.onTouch[0]["page number"])-1;mainPanel.fireEvent("pagejump",r);break;case"FirstPage":mainPanel.fireEvent("readerFirst");break;case"LastPage":mainPanel.fireEvent("readerLast");break;case"FullScreen":mainPanel.fireEvent("fullscreenMode");break;case"Fit":mainPanel.fireEvent("zoomModeFit");break;case"Fill":mainPanel.fireEvent("zoomModeFill");break;case"pageNumber":mainPanel.fireEvent("pageNumber",b);break;case"Archive":mainPanel.fireEvent("archive");break;case"Sections List":mainPanel.fireEvent("toolbarSectionList");break;case"Zones":mainPanel.fireEvent("toolbarZones");break;default:console.log(w.action)}}})}},GetState:AddBorder:AddText:function(o,c,a,s,g,e){var q=this;var d=q.GetState(o,"text");if(s!=null&&s!=undefined){if(d.indexOf("%")==0&&d.indexOf(".")==-1){d=d.replace(d,s[d.substr(1,d.length-2)])}else{if(d.indexOf("%")==0){var h=$.JSONPath({data:s,resultType:"VALUE",keepHistory:true});var j=h.query("$."+d.substr(1,d.length-2));d=j[0]}}}var p=q.GetState(o,"textSize");var l=q.GetState(o,"justification");var k=q.GetState(o,"textColor");var b=q.GetState(o,"opacity");var n=q.GetState(o,"backgroundColor");var r=q.GetState(o,"objectOpacity");if(n==null){n="#ffffff"}if(r==null){r="1"}if(c==null){c=""}var f=Ext.create("Ext.Label",{html:d,id:o.identifier+c,height:o.position[Ext.Viewport.orientation].height,style:{opacity:r,"vertical-align":"middle",display:"table-cell"}});var m=Ext.create("InfinityMobile.view.LayoutTextView",{json:o,parentContainer:e,listeners:[{element:"element",event:"tap",fn:],items:[{style:"display:inline-block;width:auto;height:100%;text-align:"+l+";font-size:"+p+"px;",items:[f]}]});return m},AddButton:AddTableView:AddCollectionView:AddImage:function(p,d,b,r,j,g){var q=this;var e=q.GetState(p,"url");if(settings.newsday!=null){switch(p.globalID.toLowerCase()){case"firstpageicon":if(settings.newsday.firstPageIcon!=null){if(settings.newsday.firstPageIcon.length>0){e=settings.newsday.firstPageIcon}}break;case"lastpageicon":if(settings.newsday.lastPageIcon!=null){if(settings.newsday.lastPageIcon.length>0){e=settings.newsday.lastPageIcon}}break;case"":if(e=="http://html5.pagesuite.com/reader/assets/reader%20icons/back-transparent.png"){if(settings.newsday.prevPageIcon!=null){if(settings.newsday.prevPageIcon.length>0){e=settings.newsday.prevPageIcon}}}if(e=="http://html5.pagesuite.com/reader/assets/reader%20icons/next-transparent.png"){if(settings.newsday.nextPageIcon!=null){if(settings.newsday.nextPageIcon.length>0){e=settings.newsday.nextPageIcon}}}break}}if(r!=null){if(e.indexOf("%")==0&&e.indexOf(".")==-1){e=e.replace(e,r[e.substr(1,e.length-2)])}else{if(e.indexOf("%")==0){var l=$.JSONPath({data:r,resultType:"VALUE",keepHistory:true});var m=l.query("$."+e.substr(1,e.length-2));if(m.length>0){e=m[0]}else{e=""}}}}if(e.indexOf("{width}")>-1){e=e.replace("{width}","186")}if(e.indexOf("{height}")>-1){e=e.replace("{height}","110")}if(e.indexOf("get_image")>-1){var h=p.position[Ext.Viewport.orientation].height.toString();if(h.indexOf(".")>-1){h=h.substr(0,h.indexOf("."))}var c=(h*window.devicePixelRatio);if(c.toString().indexOf(".")>-1){c=c.toString().substr(0,c.toString().indexOf("."))}e=e+="&h="+c}if(e=="http://origin.media.cdn.pagesuite.com/psapps/images/45/puzzle.png"){}var n=p.borders[Ext.Viewport.orientation]["top"].width.substr(0,p.borders[Ext.Viewport.orientation]["top"].width.length-2)+p.borders[Ext.Viewport.orientation]["bottom"].width.substr(0,p.borders[Ext.Viewport.orientation]["bottom"].width.length-2);var f=p.borders[Ext.Viewport.orientation]["left"].width.substr(0,p.borders[Ext.Viewport.orientation]["left"].width.length-2)+p.borders[Ext.Viewport.orientation]["right"].width.substr(0,p.borders[Ext.Viewport.orientation]["right"].width.length-2);var k=q.GetState(p,"scaleMode");var a="background-size: contain;";if(k!=null&&k=="aspect fill"){var a="background-size: cover;"}if(d==null){d=""}if(p.globalID=="ThumbLogo"){a+="background-position: left center"}var s=Ext.create("Ext.Img",{src:e,scrollable:null,height:"100%",width:"100%",id:p.identifier+d,style:a});var o=Ext.create("InfinityMobile.view.LayoutView",{contenttype:"image",scrollable:null,json:p,parentContainer:g,listeners:[{element:"element",event:"tap",fn:function(t){if(r!=null){q.TrapEvent("onTouch",p,r,j,d)}else{q.TrapEvent("onTouch",p,null,j,d)}t.stopPropagation();t.preventDefault()}}],items:s});return o},AddShape:function(c,b,g,h,e,d){var f=this;var a=Ext.create("InfinityMobile.view.LayoutView",{json:c,parentContainer:d,listeners:[{element:"element",event:"tap",fn:function(j){if(h!=null){f.TrapEvent("onTouch",c,h,e,b)}else{f.TrapEvent("onTouch",c,null,e,b)}j.stopPropagation()}}]});return a},AddSlider:AddTopBar:AddAdvert:function(c,b,g,h,e,d){var f=this;var a=Ext.create("InfinityMobile.view.LayoutAdvertView",{json:c,parentContainer:d,listeners:[{element:"element",event:"tap",fn:function(){if(h!=null){f.TrapEvent("onTouch",c,h,e,b)}else{f.TrapEvent("onTouch",c,null,e,b)}}}]});return a},AddVideo:function(c,b,g,h,e,d){var f=this;var a=Ext.create("InfinityMobile.view.LayoutVideoView",{json:c,parentContainer:d,listeners:[{element:"element",event:"tap",fn:function(){if(h!=null){f.TrapEvent("onTouch",c,h,e,b)}else{f.TrapEvent("onTouch",c,null,e,b)}}}]});return a},AddWebView:AddViewController:AddReader:function(s,k){var y=this;if(settings.topbar.toggleTopBar=="true"){s.position.portrait.y=0;s.position.landscape.y=0;s.position.portrait.height+=40;s.position.landscape.height+=40}k.flatplandata=k.config.flatplandata;var m=k.flatplandata;var j=m.pageGroups;y.editionGuid=m.editionGUID;var n=0;var d=y.retrievePageNumber();if(pageNumber!=""){n=parseInt(pageNumber)-1}else{if(d!=1){n=d-1}}if((settings.reader.reverse!=null&&settings.reader.reverse=="true")||(settings.reader.startAtLastPage!=null&&settings.reader.startAtLastPage=="true")){n=j.length-n-1}var t=settings.reader.defaultPageMode;var v=settings.reader.zoomMode;var c=settings.page.renderMode;var o=Ext.create("InfinityMobile.view.2DInfiniteCarousel",{width:"100%",flex:1,json:s,pageNumber:n,data:j,pageXPath:"pages",landscapePageIncrement:2,mode:t,zoomMode:v,pageTemplate:function(E,G,A){var D=this;if(pageOffset!=0){G=Math.min((G+pageOffset),(A.length-1));E=A[G].pages[0]}var C="";if((G-1)>=0){C=A[(G-1)].pages[0]}var B="";if((G+1)<=(A.length-1)){B=A[(G+1)].pages[0]}G=G-pageOffset;var z="InfinityMobile.view.ReaderPageViewer";if(c=="PDF"){z="InfinityMobile.view.ReaderPageViewerPDF"}var F=Ext.create(z,{page:E,previousPage:C,nextPage:B,pageNo:G,mode:D._mode,editionGuid:m.editionGUID});return F},returnPage:function(z,C){var A=this;var B="";z=z+pageOffset;if(z>=0&&z<A.getData().length-1){B=A.getData()[z].pages[0]}return B}});var q="e1e1e1";if(settings.reader.backgroundColor!=null){q=settings.reader.backgroundColor}var p=Ext.create("InfinityMobile.view.LayoutView",{id:"reader",layout:"vbox",json:s,parentContainer:k,items:[o],style:"background-color:#"+q});if(settings.reader.bannerAd!=null){var f="InfinityMobile.view.tablet.ReaderBannerAd";switch(currentProfile){case"phone":f="InfinityMobile.view.phone.ReaderBannerAd";break;case"tablet":default:f="InfinityMobile.view.tablet.ReaderBannerAd";break}var x=Ext.create(f,{pageNumber:n});if(settings.reader.bannerAd.canBeClosed==null||settings.reader.bannerAd.canBeClosed=="false"){p.add(x)}else{x.setBottom(0);Ext.Viewport.add(x)}}var g=0;if(settings.RSSTicker!=null){var h=settings.RSSTicker.split("|");var w=Ext.create("InfinityMobile.view.ReaderTicker",{url:h[1],num:h[0]});g=40;p.add(w)}y.articles=y.getApplication().getController("ArticleController").getArticles();var u=Ext.getStore("SettingStore");var l=[];if(u.data.items[0].raw.bookmarks!=null){l=u.data.items[0].raw.bookmarks.bookmark}if(y.articles.length>0){if(Ext.os.is.Phone){}else{if(Ext.os.is.Desktop){var a=true;if(settings.newsday!=null){if(settings.newsday.customArticlesContainer!=null){a=false}}if(a){var e=Ext.create("InfinityMobile.view.ArticlesContainer",{articles:y.articles,sections:l,mode:"toggle"})}else{var e=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:y.articles,sections:l,mode:"toggle"})}}else{var e=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:y.articles,sections:l,mode:"toggle"})}Ext.Viewport.add(e)}}else{if(!Ext.os.is.Phone){if(Ext.os.is.Desktop){var a=true;if(settings.newsday!=null){if(settings.newsday.customArticlesContainer!=null){a=false}}if(a){var e=Ext.create("InfinityMobile.view.ArticlesContainer",{articles:y.articles,sections:l,mode:"toggle"})}else{var e=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:y.articles,sections:l,mode:"toggle"})}}else{var e=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:y.articles,sections:l,mode:"toggle"})}Ext.Viewport.add(e)}}if(settings.reader.dataCapture!=null){try{var b=localStorage.getItem("datacapture"+publicationguid)}catch(r){var b=null}if(b==null){if(!Ext.os.is.Phone){e.hideMe()}}}return p},setupDesktopReader:function(j,a){var e=this;if(settings.topbar.toggleTopBar=="true"){j.position.portrait.y=0;j.position.landscape.y=0;j.position.portrait.height+=40;j.position.landscape.height+=40}a.flatplandata=a.config.flatplandata;var d=a.flatplandata;var c=d.pageGroups;e.editionGuid=d.editionGUID;startingPageNumber=0;var h=e.retrievePageNumber();if(pageNumber!=""){startingPageNumber=parseInt(pageNumber)-1}else{if(h!=1){startingPageNumber=h-1}}if((settings.reader.reverse!=null&&settings.reader.reverse=="true")||(settings.reader.startAtLastPage!=null&&settings.reader.startAtLastPage=="true")){startingPageNumber=c.length-startingPageNumber-1}var b=settings.reader.defaultPageMode;var g=settings.reader.zoomMode;var f="0px";if((typeof isTribReader!="undefined"&&isTribReader==true)||settings.reader.enableReaderPadding=="true"){if(settings.reader.wrapAd!=null){f="20px 0px"}else{f="20px 150px"}}if(b=="double"){startingPageNumber=d.pageMapper[startingPageNumber+1]-1}e.desktopReader=Ext.create("InfinityMobile.view.PDFInfiniteCarousel",{width:"100%",flex:1,json:j,pageNumber:startingPageNumber,data:c,pageXPath:"pages",landscapePageIncrement:2,mode:b,zoomMode:g,cls:"pdfinfinitecarousel "+g,style:"padding:"+f+";",pageTemplate:function(o,A,s){var D=this;var C="InfinityMobile.view.ReaderPageViewer";if(currentProfile=="desktop"){C="InfinityMobile.view.desktop.DesktopPageViewer"}var t="";var m="";var r="";var B="";var z="";var l="";var n=A+1;if(n%2==0){n++}n--;n=n+pageOffset;var y=n;if(y<=(s.length-1)){B=s[(y)].pages[0]}var p=(n-1);if(p>=0){if(s[p]!=null){r=s[p].pages[0]}}var E=(n-2);if(E>=0){m=s[E].pages[0]}var w=(n-3);if(w>=0){var k=s[w].pages[0];if(k.type=="page"){t=s[w].pages[0]}}var q=(n+1);if(q<=(s.length-1)){z=s[(q)].pages[0]}var v=(n+2);if(v<=(s.length-1)){var u=s[v].pages[0];if(u.type=="page"){l=s[(v)].pages[0]}}if((B.type=="advert"||r.type=="advert")&&settings.reader.interstitialPageFlow!=null){card=Ext.create("InfinityMobile.view.AdvertPageViewer",{pageNo:A,advertType:settings.reader.interstitialPageFlow.type,networkCode:settings.reader.interstitialPageFlow.networkCode,adUnit:settings.reader.interstitialPageFlow.adUnit,advertSize:settings.reader.interstitialPageFlow.size,adUrl:settings.reader.interstitialPageFlow.url,adLink:settings.reader.interstitialPageFlow.link,targeting:settings.reader.interstitialPageFlow.targeting,side:o.side,previousPage:m,nextPage:z});return card}else{var x=Ext.create(C,{pageNo:A,rightPage:B,leftPage:r,previousPage:m,hiddenLeftPage:t,nextPage:z,hiddenRightPage:l,mode:D._mode,zoomMode:D._zoomMode,editionGuid:d.editionGUID});return x}},returnPage:)},returnAdvertOffset:setupReaderView:function(k,a){var h=this;var c="e1e1e1";if(settings.reader.backgroundColor!=null){c=settings.reader.backgroundColor}var b="none";if(settings.reader.backgroundImage!=""){b="url('"+settings.reader.backgroundImage+"')"}var j="cover";var g="no-repeat";var d="center";switch(settings.reader.backgroundImageLayout){case"cover":default:j="cover";g="no-repeat";d="center";break;case"contain":j="contain";g="no-repeat";d="center";break;case"stretch":j="100% 100%";g="no-repeat";d="center";break;case"repeat":j="auto";g="repeat";d="left top";break}var f="0";var e=Ext.create("InfinityMobile.view.ReaderView",{id:"reader",cls:"dekstopreader",layout:"vbox",json:k,parentContainer:a,fillPadding:f});h.desktopReader.element.dom.style.position="absolute";h.desktopReader.element.dom.style.height="100%";e.readerContainer.add(h.desktopReader);e.setStyle({backgroundColor:"#"+c,backgroundImage:b,backgroundSize:j,backgroundRepeat:g,backgroundPosition:d});return e},setupWrapAds:function(d){var e=this;if(settings.reader.wrapAd!=null){var b=parseInt(startingPageNumber)+1;var a=Ext.create("InfinityMobile.view.BackgroundWrapAdItem",{bottom:0,left:0,side:"left",pageNo:b});d.leftPadding.add(a);var c=Ext.create("InfinityMobile.view.BackgroundWrapAdItem",{bottom:0,right:0,side:"right",pageNo:b});d.rightPadding.add(c)}else{}},setupBannerAd:function(d,a){var g=this;if(settings.reader.bannerAd!=null){var k="InfinityMobile.view.tablet.ReaderBannerAd";switch(currentProfile){case"phone":k="InfinityMobile.view.phone.ReaderBannerAd";break;case"tablet":default:k="InfinityMobile.view.tablet.ReaderBannerAd";break}var b=parseInt(startingPageNumber)+1;var h=g.returnSection(b);var c=Ext.create(k,{pageNumber:b,section:h});if(settings.reader.bannerAd.position=="top"){var j=settings.topbar.backgroundColor.indexOf("#")==0?settings.topbar.backgroundColor:"#"+settings.topbar.backgroundColor;if(typeof g.hexaToRgba==="function"&&typeof g.hexToRgb==="function"){if(j.length>=8){j=g.hexaToRgba(j)}else{var f=g.hexToRgb(j);var e=settings.topbar.opacity!=null?settings.topbar.opacity:"0.9";j="rgba("+f.r+","+f.g+","+f.b+","+e+")"}}c.setStyle({backgroundColor:j});c.setStyle({borderBottom:"1px solid #ffffff"});c.setDocked("top");a.insert(0,c);c.show();d.bottomContainer.setHeight(0)}else{if(settings.reader.bannerAd.canBeClosed==null||settings.reader.bannerAd.canBeClosed=="false"){d.bottomContainer.add(c)}else{d.bottomContainer.setHeight(0);Ext.Viewport.add(c);c.setBottom(0);c.show()}}}else{d.bottomContainer.hide()}},returnSection:function(a){var e=this;var h=settings.bookmarks.bookmark;var f=null;if(h!=null&&h.length>0){for(var c in h){var b=parseInt(h[c].pageNumber);if(h[c].start!=null){b=h[c].start}var g=h[parseInt(c)+1];var d=null;if(g!=null){d=g.pageNumber;if(g.start!=null){d=g.start}}if(parseInt(a)>=b&&(d==null||parseInt(a)<parseInt(d))){f=h[c].name;break}}}return f},hexToRgb:function(b){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},hexaToRgba:function(h){var j=h.match(/.{2}/g);if(j.length!=4){$("<p />",{"class":"user-message warning"}).text("Value provided is invalid.").insertAfter("form").hide().slideDown();$("#hex").addClass("error");$("#rgba").slideUp();return false}else{$("#hex").removeClass("error");$(".user-message").slideUp()}var g=function(a){return parseInt(a,16)};var f=function(a){return parseFloat(parseInt((parseInt(a,16)/255)*1000)/1000)};var b,e=[];b=f(j[3]);$.each(j.slice(0,3),function(c,a){e.push(g(a))});return e.join(",")+","+b},setupArticlesContainer:function(){var d=this;d.articles=d.getApplication().getController("ArticleController").getArticles();var c=Ext.getStore("SettingStore");var e=[];if(c.data.items[0].raw.bookmarks!=null){e=c.data.items[0].raw.bookmarks.bookmark}if(d.articles!=null&&d.articles.length>0){if(Ext.os.is.Phone){var a=Ext.create("InfinityMobile.view.phone.ArticlesContainer",{articles:d.articles,sections:e})}else{if(Ext.os.is.Desktop){var b=true;if(settings.newsday!=null){if(settings.newsday.customArticlesContainer!=null){b=false}}if(b){var a=Ext.create("InfinityMobile.view.ArticlesContainer",{articles:d.articles,sections:e,mode:"toggle"})}else{var a=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:d.articles,sections:e,mode:"toggle"})}}else{var a=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:d.articles,sections:e,mode:"toggle"})}}Ext.Viewport.add(a);a.show()}else{if(Ext.os.is.Desktop){var b=true;if(settings.newsday!=null){if(settings.newsday.customArticlesContainer!=null){b=false}}if(b){var a=Ext.create("InfinityMobile.view.ArticlesContainer",{articles:d.articles,sections:e,mode:"toggle"})}else{var a=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:d.articles,sections:e,mode:"toggle"})}}else{var a=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:d.articles,sections:e,mode:"toggle"})}Ext.Viewport.add(a);a.show()}},setupDataCapture:function(){var c=this;if(settings.reader.dataCapture!=null){try{var b=localStorage.getItem("datacapture"+publicationguid)}catch(a){var b=null}if(b==null){articlesContainer.hideMe()}}},AddDesktopReader:function(c,a){var d=this;d.setupDesktopReader(c,a);var b=d.setupReaderView(c,a);d.setupBannerAd(b,a);d.setupWrapAds(b);d.setupArticlesContainer();d.setupDataCapture();return b},retrievePageNumber:AddTextField:getSubViews:function(g,f,b,a,c){var d=this;var e=[];$.each(g.subviews,function(o,u){switch(u.type){case"PSLImageView":var t=d.AddImage(u,b,0,f,c,a);e.push(t);break;case"PSLLabel":var h=d.AddText(u,b,0,f,c,a);e.push(h);break;case"PSLShape":case"PSLHorizontalKeyline":case"PSLVerticalKeyline":var h=d.AddShape(u,b,0,f,c,a);e.push(h);break;case"PSLButton":var m=d.AddButton(u,b,0,f,c,a);e.push(m);break;case"PSLAdvertView":var p=d.AddAdvert(u,b,0,f,c,a);e.push(p);break;case"PSLVideoPlayerView":var n=d.AddVideo(u,b,0,f,c,a);e.push(n);break;case"PSLWebView":var k=d.AddWebView(u,b,0,f,c,a);e.push(k);break;case"PSLTableView":var r=function(v){var w=d.AddTableView(u,0,v,a);e.push(w)};d.getCollectionType(u,r);break;case"PSLCollectionView":var r=d.getCollectionType(u,r);break;case"PSLViewController":var s=d.AddViewController(u,b,0,f,c,a);e.push(s);break;case"PSLReaderViewController":if(currentProfile=="desktop"){d.myReader=d.AddDesktopReader(u,a)}else{d.myReader=d.AddReader(u,a)}e.push(d.myReader);break;case"PSLTextField":var j=d.AddTextField(u,b,0,f,c,a);e.push(j);break;case"PSLZoom":var l=d.AddSlider(u,b,0,f,c,a);e.push(l);break;case"PSLTopBar":var q=d.AddTopBar(u,b,0,f,c,a);e.push(q);break;default:console.log("Missing "+u.type);break}});return e},getCollectionType:hideWrapAds:function(){var a=this;var b=Ext.ComponentQuery.query(".backgroundwrapaditem");for(ad in b){b[ad].hide()}},showWrapAds:,0,0,0,0,0,0,[InfinityMobile.controller,"LayoutController"],0));(Ext.cmd.derive("InfinityMobile.controller.ReaderController",Ext.app.Controller,{config:{stores:["EditionFlatplan"],refs:{carousel:"infinitecarousel2d",readerView:"#reader",readerPanel:"reader",main:"#rootPanel",readerViewController:"#readerViewController",readerhelper:"readerhelper",readerlanguage:"readerlanguage",downloadEditionButton:"#ReaderMenuDownload",interstitial:"interstitial",readerpageviewer:"readerpageviewer",zoomSlider:"zoomSlider",navbutton:"navbutton",articlecarousel:"articlecarousel",articlescontainer:"articlescontainer",layouttoolbar:"layouttoolbar",readermenutts:"readermenutts",readertoolbarbottom:"readertoolbarbottom",bannerAd:"readerbannerad",layoutviewcontroller:"layoutviewcontroller"},control:{carousel:{pagechange:"readerPageChange",idle:"readerIdle",notidle:"killActiveRequest",showLeft:"showLeft",hideLeft:"hideLeft",showRight:"showRight",hideRight:"hideRight",resizeArticleController:"resizeArticleController",updatePageNumber:"setCurrentPageNumber"},readerPanel:{cacheEdition:"cacheEdition",ready:"readerContainerReady",toggleNavButtons:"toggleNavButtons"},readerhelper:{next:"helperNext",close:"closeHelper",articleHelper:"articleHelper"},articlehelper:{close:"closeHelper"},readerlanguage:{cancel:"languageCancel",update:"languageUpdate"},downloadEditionButton:{click:"downloadEdition"},interstitial:{closeInterstitial:"closeInterstitial"},main:{pagejump:"jumpToPage",checkActivePageInToolbarBottom:"checkActivePageInToolbarBottom"},zoomSlider:{zoomStart:"zoomStart",zoom:"zoom",zoomEnd:"zoomEnd"},navbutton:{jumpToPage:"jumpToPage",scrollLeft:"scrollLeft",scrollRight:"scrollRight",scrollUp:"scrollUp",scrollDown:"scrollDown"},readerpageviewer:{hideNavButtons:"hideNavButtons",showNavButtons:"showNavButtons",hideTop:"hideTop",showTop:"showTop",hideBottom:"hideBottom",showBottom:"showBottom",fitMode:"fitMode",fillMode:"fillMode",checkWrapAd:"checkWrapAd",checkPagesBrowser:"checkPagesBrowser",setupPrintContainer:"setupPrintContainer",setZoom:"setZoom"},articlesectionitemimg:{jumpToPage:"jumpToPage"},articlesectionitem:{jumpToPage:"jumpToPage"},backgroundwrapaditem:{resizeWrapAds:"resizeWrapAds"},articlescontainer:{checkActivePageInBrowser:"checkActivePageInBrowser"},readerbannerad:{bannerAdClose:"bannerAdClose"}}},init:function(){var b=this;b.loadPage=null;b.preRolAd=false;var a=Ext.getStore("EditionFlatplan");a.on({load:"editionFlatplanLoad",scope:this});b.initializeDB();b.initCacheVariables();b.canChangeAd=true;pageOffset=0;b.swipesUntilNewBannerAd=-1;Ext.Viewport.on("orientationchange",function(){b.ttsStateChange()});ttsFlag={status:"STOPPED"}},initCacheVariables:function(){var c=this;var a=document.createElement("canvas");var b=a.getContext("2d");c.needToClearBuffer=false;c.canProgressiveDownload=true;devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1;c.bufferValue=6;c.needToClearBuffer=true;c.canProgressiveDownload=true;activerequest=null},initializeDB:function(){var a=this},editionFlatplanLoad:function(a){var b=this;flatPlanData=a.data.items[0].raw;flatPlanData.sectionPageCount=0;b.storeOriginalNumbers();b.checkLeftHandAdvert();b.checkCheckSectionPages();b.checkAdvertInPageFlow();if(settings.reader.reverse!=null&&settings.reader.reverse=="true"){flatPlanData.pageGroups=flatPlanData.pageGroups.reverse()}b.setFirendlyPageNumbering(flatPlanData);b.setupPdfPageGroups();b.loadEditionMedia(flatPlanData,a);b.mediaController=b.getApplication().getController("MediaController")},setupPdfPageGroups:storeOriginalNumbers:setFirendlyPageNumbering:function(f){if(settings.reader.friendlyNumbering!=null){var l=f.pageGroups.length;f.friendlyPageMapper={};var g=settings.reader.friendlyNumbering;var k=g.split("|");var m=[];var o=0;for(var h=0;h<k.length;h++){var j=k[h];var d=parseInt(k[h].split(":")[1]);if(j!=""){var b={name:k[h].split(":")[0],pageNumber:d};m.push(b);if(h>0){m[h-1].sectionLength=(d-o);if(h==(k.length-2)){m[h].sectionLength=l-d}}o=d}}if(m.length>0){var a=m[0];var e=null;if(m.length>1){e=m[1]}var n=f.pageGroups;var q=1;var c=1;for(var h=0;h<n.length;h++){var p=n[h].pages[0];if(e!=null){if(e.pageNumber==h){q++;c=1;a=e;if(m.length>q){e=m[q]}else{e=null}}}p.pageName=a.name+c;p.sectionLength=a.sectionLength;f.friendlyPageMapper[p.pageName]=h;c++}}}},checkLeftHandAdvert:checkCheckSectionPages:function(){var f=this;if(typeof isTribReader!="undefined"&&isTribReader==true&&settings.reader.sectionFront!="false"){var a=settings.bookmarks;if(a!=null&&a.bookmark!=null&&a.bookmark.length>0){var b=[];for(var d=(a.bookmark.length-1);d>=0;d--){var g=a.bookmark[d];var j=parseInt(g.pageNumber);if(j!=1){b.push(parseInt(g.pageNumber))}b.sort(function(l,k){return k-l})}var c=0;for(var d=0;d<b.length;d++){var j=b[d];if(j%2==1){var j=b[d];var h={image:brandingFolder+"/previous-section@2x.png",pageIndex:j-1,pageNum:j,pdf:"",versionKey:"",view:0,type:"sectionpage"};var e={pages:[h]};flatPlanData.pageGroups.splice(j-1+pageOffset,0,e);c++;var h={image:brandingFolder+"/next-section@2x.png",pageIndex:j-2,pageNum:j-1,pdf:"",versionKey:"",view:0,type:"sectionpage"};var e={pages:[h]};flatPlanData.pageGroups.splice(j-1+pageOffset,0,e);c++}}flatPlanData.sectionPageCount=c;flatPlanData.bookmarks=b}}},checkAdvertInPageFlow:function(){flatPlanData.totalAdvertsAdded=0;if(settings.reader.interstitialPageFlow!=null){var b=settings.reader.interstitialPageFlow;var a=b.count;var e=JSON.parse(JSON.stringify(flatPlanData.pageGroups));var f=0;var g=0;for(var c=pageOffset;c<e.length;c++){var d=flatPlanData.pageGroups[c+g].pages[0];d.pageName=d.pageNum;d.pageNum+=f;d.advertsAdded=f;if(c!=pageOffset&&c%a==pageOffset){flatPlanData.pageGroups.splice(c+1+g,0,{pages:[{type:"advert",advert:b,pdf:"",pageIndex:d.pageNum+1,pageNum:d.pageNum+1,pageName:"Advertisement",side:"left"}]});flatPlanData.pageGroups.splice(c+2+g,0,{pages:[{type:"advert",advert:b,pdf:"",pageIndex:d.pageNum+1,pageNum:d.pageNum+1,pageName:"Advertisement",side:"right"}]});f++;g+=2}}flatPlanData.totalAdvertsAdded=g}},loadEditionMedia:function(e,a){var d=this;var c=Ext.getStore("MediaStore");c.on({load:);var b="";if(typeof latestLM!="undefined"){b="&lm="+latestLM}c.setProxy({url:"../get_media.aspx?edid="+editionguid+b});c.load()},loadEdition:function(f,b){var e=this;editionFlatplanData=f;editionFlatplanData.pageMapper={};editionFlatplanData.reversePageMapper={};var a=editionFlatplanData.pageGroups;e.editionGuid=editionFlatplanData.editionGUID;for(var c=0;c<a.length;c++){var d=a[c].pages[0];d.pageIndex=c+1;if(d.type!="sectionpage"&&d.type!="leftHandAd"){editionFlatplanData.pageMapper[d.pageNum]=d.pageIndex-pageOffset}editionFlatplanData.reversePageMapper[d.pageIndex-pageOffset]=d.pageNum}var h="";if((typeof isTribReader!="undefined"&&isTribReader==true)||settings.reader.enableReaderPadding=="true"){h="20px 150px"}if(settings.reader.wrapAd!=null){h="0px 200px"}var g=function(){if(e.getReaderPanel()==null){var s=Ext.create("InfinityMobile.view.LayoutViewController",{id:"readerViewController",json:b,flatplandata:editionFlatplanData,cls:"reader2",width:"100%",height:"100%",padding:h});e.leftBtn=Ext.create("InfinityMobile.view.NavButton",{itemId:"leftBtn",xtype:"navbutton",left:0,style:"background-image:url('../assets/nav/left-arrow.png');left:0px;top:50%;transform:translateY(-50%);background-size:contain;background-repeat:no-repeat;",direction:"left",pagesLength:a.length-pageOffset});e.rightBtn=Ext.create("InfinityMobile.view.NavButton",{itemId:"rightBtn",xtype:"navbutton",right:0,style:"background-image:url('../assets/nav/right-arrow.png');right:0px;top:50%;transform:translateY(-50%);background-size:contain;background-repeat:no-repeat;",direction:"right",pagesLength:a.length-pageOffset});var u="11";if(settings.reader.bannerAd!=null&&settings.reader.bannerAd.position=="top"){u="122"}e.topBtn=Ext.create("InfinityMobile.view.NavButton",{itemId:"topBtn",xtype:"navbutton",top:u+"px",left:"50%",style:"background-image:url('../assets/nav/right-arrow.png');left:50%;top:"+u+"px;transform:translateX(-50%) rotate(270deg);-webkit-transform:translateX(-50%) rotate(270deg);background-size:contain;background-repeat:no-repeat;",direction:"up",pagesLength:a.Length});if((settings.reader.bannerAd!=null&&((settings.reader.bannerAd.canBeClosed==null)||settings.reader.bannerAd.canBeClosed=="false"))&&settings.RSSTicker!=null&&settings.reader.bannerAd.position!="top"){var j=82}else{if(settings.reader.bannerAd!=null&&((settings.reader.bannerAd.canBeClosed==null)||settings.reader.bannerAd.canBeClosed=="false")&&settings.reader.bannerAd.position!="top"){var j=82}else{if(settings.RSSTicker!=null){var j=-28}else{var j=-28}}}e.toggledOn=true;e.bottomBtn=Ext.create("InfinityMobile.view.NavButton",{itemId:"topBtn",xtype:"navbutton",bottom:j+"px",left:"50%",style:"background-image:url('../assets/nav/right-arrow.png');left:50%;bottom:"+j+"px;transform:translateX(-50%) rotate(90deg);-webkit-transform:translateX(-50%) rotate(90deg);background-size:contain;background-repeat:no-repeat;",direction:"down",pagesLength:a.Length});e.topBtn.hide();if(settings.reader.zoomMode!="fill"){e.bottomBtn.hide();e.fill=false}else{e.fill=true;e.getApplication().getController("MediaController").keyControls()}var y=e.getCarousel();if(y.config.pageNumber==0){e.leftBtn.hide()}if(settings.reader.toggleNavButtons=="true"){if(settings.reader.startToggledNavButtonsOn=="false"){e.toggleNavButtons()}}var n=Ext.create("InfinityMobile.view.Reader",{viewType:"reader",items:[{flex:1,layout:"fit",style:"background-color:white",itemId:"readerItems",items:[{xtype:"readertoolbarbottom",bottom:0,width:"100%",height:190},s]}]});var o=true;if(currentProfile=="desktop"){if(settings.newsday!=null){if(settings.newsday.extraTopBar!=null&&settings.newsday.extraTopBar=="true"){var r=Ext.create("InfinityMobile.view.desktop.ExtraTopBar",{topBarColor:settings.topbar.backgroundColor});var w=e.getLayouttoolbar();if(w!=null){$(w.element.dom).css("top","0px")}n.insert(0,r);o=false}}if(settings.dateSelector!=null&&o){var l=Ext.create("InfinityMobile.view.desktop.ArchiveSelector",{});n.insert(0,l)}}var x=n.getComponent("readerItems");if(x!=null&&currentProfile=="desktop"){x.add(e.leftBtn);x.add(e.rightBtn);x.add(e.topBtn);x.add(e.bottomBtn)}if(settings.reader.ticker!=null){var v=Ext.create("InfinityMobile.view.Ticker",{bottom:0,url:settings.reader.ticker.url})}mainPanel.add(n);if(currentProfile=="phone"){e.leftBtn.destroy();e.rightBtn.destroy();e.topBtn.destroy();e.bottomBtn.destroy()}if(settings.dynamic!=null){var m=Ext.getStore("ArticleStore");m=m.data.items[0].raw;if(settings.dynamic.showDynamicArticleFirst=="true"&&m.length>0){var t="InfinityMobile.view.ArticleReader";var q=Ext.create(t,{orientation:e.returnOrientation()});mainPanel.add(q);mainPanel.setActiveItem(q)}else{mainPanel.setActiveItem(n)}}else{mainPanel.setActiveItem(n)}try{var k=localStorage.getItem("helper"+publicationguid)}catch(p){var k=null}if(k==null){if(Ext.browser.is.IE){if(document.cookie.indexOf("helper"+publicationguid)==-1){e.loadHelperView()}}else{e.loadHelperView()}}else{e.checkLanguage()}var y=e.getCarousel()}};e.cacheThumb(a[0].pages[0]);g()},loadHelperView:function(){var a=this;helperDisabled=false;if(settings.reader.disableHelperScreenOnLaunch!=null&&settings.reader.disableHelperScreenOnLaunch=="true"){helperDisabled=true}if(!helperDisabled){if(settings.dynamic!=null){if(settings.dynamic.showDynamicArticleFirst!="true"){a.helper()}}else{a.helper()}}},helper:function(){var b=this;if(currentProfile=="desktop"){var f=b.getLayouttoolbar();if(f!=null){f.howToTap()}}else{var d="InfinityMobile.view.tablet.ReaderHelper";switch(currentProfile){case"phone":d="InfinityMobile.view.phone.ReaderHelper";break;case"tablet":default:d="InfinityMobile.view.tablet.ReaderHelper";break}var e=Ext.create(d,{});mainPanel.add(e);e.show();var c=b.getCarousel();c.addCls("blur");var a=b.getArticlescontainer();if(a!=null){a.addCls("blur");a.disableEvents()}}},helperNext:function(b){var a=this;b.container.setHtml("<img class='portraitOnly' src='resources/images/branding/mobile-overlay-part2.png' style='width:100%' /><img class='landscapeOnly' src='resources/images/branding/mobile-overlay-landscape-part2.png' style='width:100%' />");b.nextButton.hide();b.continueButton.show()},closeHelper:function(e){var c=this;var d=c.getCarousel();d.removeCls("blur");mainPanel.remove(e,true);try{localStorage.setItem("helper"+publicationguid,"complete")}catch(b){}c.checkLanguage();var a=c.getArticlescontainer();if(a!=null){a.removeCls("blur");a.enableEvents()}if(typeof isTribReader!="undefined"&&isTribReader==true){c.checkTrialScreen()}},checkTrialScreen:checkLanguage:function(){var a=this},checkEdgeBrowser:languageCancel:languageUpdate:latestEditionFlatplanLoad:readerContainerReady:function(b){var c=this;var a=c.getCarousel();c.readerPageChange(a)},trackPage:function(d){var f=this;var e=f.returnCorrectPageNumber(d);var a=e.split("-");if(typeof trackReaderEvent!="undefined"){var j=settings.bookmarks.bookmark;var h=null;if(j!=null&&j.length>0){var g=parseInt(d._pageNumber)+1;for(var c in j){if(g>=j[c].pageNumber&&(j[parseInt(c)+1]==null||g<j[parseInt(c)+1].pageNumber)){h=j[c].name;break}}}trackReaderEvent("pageTurn",{pageNum:e,pageNumArray:a,section:h})}if(settings.tracking!=null){var b=settings.tracking.trackingType;if(b=="GA"){f.gaPageChange(settings.tracking.accoundid,e)}else{if(b=="DA"&&typeof trackDaPageView!="undefined"){trackDaPageView("PDF|"+editionName+"|"+e,"Digital Edition")}}}f.trackTribune(d)},pagesuiteReports:function(a){var d=this;var e=a._pageNumber+1;var b=e-(e%2);var g=e+(1-e%2);var f="&pl="+b+"&pr="+g;if(d.returnOrientation()=="portrait"||a._mode=="single"){f="&pr="+e}if(typeof trackReports!="undefined"){if(trackReports.toLowerCase()=="true"){if(reports!=null&&visitorguid!=null&&startpageNumber!=null){var c=reports+"track.aspx?html5=true&eid="+editionguid+"&vid="+visitorguid+f+"&device="+currentProfile;$.ajax({crossDomain:true,type:"GET",async:true,url:c,cache:false})}}}},checkPageRestriction:function(b){var e=this;if(loggedIn.toLowerCase()!="true"){if(settings.subscription.pageRestriction!=null){var c=b._pageNumber;var d=parseInt(settings.subscription.pageRestriction.pages);var f=d-1;if((settings.reader.reverse!=null&&settings.reader.reverse=="true")||(settings.reader.startAtLastPage!=null&&settings.reader.startAtLastPage=="true")){c=(b.getData().length-c);f=(b.getData().length-f)}if(c>=d){var g=e.getCarousel();g.jumpToPage(f);var a=Ext.create("InfinityMobile.view.PageRestriction",{});if(settings.subscription.pageRestriction.disableRedirect==null){if(settings.subscription.pageRestriction.redirectUrl!=null){window.open(settings.subscription.pageRestriction.redirectUrl,"_blank")}else{window.open("http://subscriber.pagesuite-professional.co.uk/subscribe.aspx?source=4&eid="+editionguid,"_blank")}}}}}},stopAudio:function(){var a=this;a.mediaController.stopAudio()},updatePagesBrowser:function(){var a=this;if(a.getArticlescontainer()!=null){if(a.getArticlescontainer().mode=="pages"){a.checkActivePageInBrowser(a.getArticlescontainer())}}if(Ext.os.is.Phone){if(a.getReadertoolbarbottom()!=null){a.checkActivePageInToolbarBottom(a.getReadertoolbarbottom())}}},readerPageChange:function(b){var v=this;v.trackOmniture(b);mainPanel.fireEvent("removeSplash");v.setCurrentPageNumber(b);var r=v.returnCorrectPageNumber(b);v.checkAdvert();var w=r.split("-");if(typeof trackReaderEvent!="undefined"){var l=settings.bookmarks.bookmark;var e=null;if(l!=null&&l.length>0){var u=parseInt(b._pageNumber)+1;for(var n in l){if(u>=l[n].pageNumber&&(l[parseInt(n)+1]==null||u<l[parseInt(n)+1].pageNumber)){e=l[n].name;break}}}trackReaderEvent("pageTurn",{pageNum:r,pageNumArray:w,section:e})}if(currentProfile=="desktop"){v.setupPrintContainer()}v.checkPayWall(b);v.checkInterstitial();v.killActiveRequest();if(Ext.os.is.Desktop){v.checkNavigationButtons(b)}v.getApplication().getController("MediaController").stopAudio();if(Ext.os.is.Desktop){var h=b.getActiveItem().audioObjects;for(var n in h){if(h[n]){if(b._pageNumber+1==h[n].mediaObject.page){if(h[n].mediaObject.autoPlay=="true"){h[n].playSound()}}}}var j=b.getActiveItem().mp4Objects;for(var n in j){if(j[n]){if(j[n].mediaObject.autoPlay=="true"){if(j[n].videoType=="mp4"){j[n].video.play()}else{if(j[n].videoType=="youtube"){j[n].playVideo()}}}}}}if(v.loadPage!=null){clearInterval(v.loadPage)}var s=300;if(currentProfile=="desktop"){s=100}v.loadPage=setInterval(function(){v.loadImages(v,b)},s);if(v.needToClearBuffer){var g=b._pageNumber;var f=editionFlatplanData.pageGroups;var q=v.bufferValue;var o=Math.max(0,g-q);var p=Math.min(f.length-1,g+q);for(var n=0;n<f.length;n++){if(n<o||n>p){var a=f[n].pages[0];v.clearBuffer(a)}}}var t=Ext.getStore("SettingStore");if(loggedIn.toLowerCase()!="true"){if(t.data.items[0].raw.subscription.pageRestriction!=null){if(b._pageNumber>=t.data.items[0].raw.subscription.pageRestriction.pages){var m=v.getCarousel();m.jumpToPage(t.data.items[0].raw.subscription.pageRestriction.pages-1);var c=Ext.create("InfinityMobile.view.PageRestriction",{});if(t.data.items[0].raw.subscription.pageRestriction.disableRedirect==null){if(t.data.items[0].raw.subscription.pageRestriction.redirectUrl!=null){window.open(t.data.items[0].raw.subscription.pageRestriction.redirectUrl,"_blank")}else{window.open("http://subscriber.pagesuite-professional.co.uk/subscribe.aspx?source=4&eid="+editionguid,"_blank")}}}}}if(settings.tracking!=null){var k=settings.tracking.trackingType;if(k=="GA"){v.gaPageChange(settings.tracking.accoundid,g)}else{if(k=="DA"){trackDaPageView("PDF|"+editionName+"|"+g,"Digital Edition")}else{v.omniturePageChange()}}}else{if(typeof isTribReader!="undefined"&&isTribReader==true){v.trackTribune(b)}}if(typeof trackReports!="undefined"){if(trackReports.toLowerCase()=="true"){var d=reports+"track.aspx?html5=true&eid="+editionguid+"&vid="+visitorguid+"&pl="+startpageNumber+"&pr="+(b._pageNumber+1);$.ajax({crossDomain:true,type:"GET",async:true,url:d,cache:false})}}var m=v.getCarousel();if(m._zoomMode=="fill"){if(m.getActiveItem().id.indexOf("readeradvertpageviewer")==-1){if(m.getActiveItem().scroller.position.y==0){v.hideTop();v.showBottom()}else{if(m.getActiveItem().scroller.position.y==m.getActiveItem().scroller.maxPosition.y){v.showTop();v.hideBottom()}else{v.showTop();v.showBottom()}}}}v.ttsStateChange();if(v.getArticlescontainer()!=null){if(v.getArticlescontainer().mode=="pages"){v.checkActivePageInBrowser(v.getArticlescontainer())}}if(Ext.os.is.Phone){if(v.getReadertoolbarbottom()!=null){v.checkActivePageInToolbarBottom(v.getReadertoolbarbottom())}}v.updateBannerPageSwipes();v.checkFullscreenAdvert();v.checkAdvertPageFlow();v.refreshBannerAd(b._pageNumber+1)},checkAdvertPageFlow:checkFullscreenAdvert:function(){var b=this;if(settings.reader.interstitial!=null&&settings.reader.interstitial.dfpType=="fullscreen"){if(!b.isFullscreenAdInView()&&typeof b.isFullscreenAdInView()!="undefined"){var a=b.getInterstitial();if(a!=null){a.destroy()}}}},isFullscreenAdInView:function(){var c=this;if(settings.reader.interstitial!=null&&settings.reader.interstitial.dfpType=="fullscreen"){var d=$("body").children("div[draggable='false']");if(d.length>1){for(var b=0;b<d.length;b++){if(d[b].style!=null){var a=d[b].style.display;if(a!="none"){return true}else{return false}}}}}else{return false}},checkAdvert:function(){var b=this;var a=1500;if(currentProfile=="desktop"){a=1000}b.canLoadAd=false;if(b.bannerTimeout!=null){clearTimeout(b.bannerTimeout)}b.bannerTimeout=setTimeout(function(){if(currentProfile=="desktop"){var c=b.getApplication().getController("PageTurnController");if(!c.turning){b.canLoadAd=true;b.loadBannerAd();b.refreshWrapAd()}}else{b.canLoadAd=true;b.loadBannerAd();b.refreshWrapAd()}},a)},updateBannerPageSwipes:setupPrintContainer:function(){var g=this;var f=g.getCarousel();var j=(f._pageNumber);var c=editionFlatplanData.pageGroups;var h=c[j].pages[0];var a="";if(!f.isDPS()){j=editionFlatplanData.pageMapper[j+1]-1}if(g.returnOrientation()=="landscape"&&f._mode=="double"&&j>0&&j<(c.length-1)){if(j%2==0){var b=j-1;var d=c[b].pages[0];a="<div style='position:absolute;width:100%;height:100%'>"+g.printPageHtml(d)+"</div>";a+="<div style='position:absolute;width:100%;height:100%;top:100%'>"+g.printPageHtml(h)+"</div>"}else{var b=j+1;var d=c[b].pages[0];a="<div style='position:absolute;width:100%;height:100%'>"+g.printPageHtml(h)+"</div>";a+="<div style='position:absolute;width:100%;height:100%;top:100%'>"+g.printPageHtml(d)+"</div>"}}else{if(currentProfile=="desktop"){j=editionFlatplanData.reversePageMapper[j+1]-1;h=c[j].pages[0]}a=g.printPageHtml(h)}var e=$(".printContainer")[0];e.innerHTML=a},printPageHtml:function(b){var c=this;var a="";var d=b.image;if(settings.page.useMobileFullJpg=="true"){d="http://pages.mobile.cdn.pagesuite.com/images/"+b.guid+"/full.jpg"}else{if(settings.page.highResImage){d=d.replace("page.jpg","largepage.jpg")}}if(Ext.browser.is.IE||navigator.appVersion.indexOf("Edge")!=-1){a='<img src="'+d+'" style="left:50%;transform:translateX(-50%);position:absolute;max-height:100%;max-width:100%;" />'}else{a='<img src="'+d+'" style="position:absolute;width:100%;height:100%;object-fit: contain" />'}return a},setCurrentPageNumber:function(a){var e=this;if(settings.reader.trackPagePosition!=null&&settings.reader.trackPagePosition=="true"){var c=new Date();c=c.setHours(c.getHours());var b=a._pageNumber+1;if(a.isDPS!=null&&a.isDPS()){b=editionFlatplanData.reversePageMapper[b]}var f={pageNumber:b,date:c};try{localStorage.setItem("page"+editionguid,JSON.stringify(f))}catch(d){}}},trackTribune:checkNavigationButtons:function(b){var a=this;if(currentProfile=="desktop"||currentProfile=="tablet"){if(b._pageNumber>0){a.showLeft()}else{a.hideLeft()}if(b._pageNumber==(b.getData().length-1-pageOffset)){a.hideRightIcon()}else{a.showRightIcon()}}},gaPageChange:function(c,a){var b=this;ga("set","page","/"+(a+1));ga("send",{hitType:"pageview",title:publicationName+" - "+editionName})},omniturePageChange:clearBuffer:loadImages:function(j,e){var g=this;clearInterval(j.loadPage);var b="Image";if(currentProfile=="desktop"){b="PDF"}else{b=settings.page.renderMode}if(b=="PDF"){g.loadPDFs(e);g.tryRenderPDFPage(e)}else{var f=e.getItems().items;var d=e.getActiveItem();var k="";var h="";for(var c=0;c<f.length;c++){var a=f[c];if(a.getPageNo()!=d.getPageNo()){if(k==""){k=a}else{h=a}}}g.loadPageImage(d,function(){g.loadPageImage(k,})}},loadPageImage:function(a,b){if(a.completeImageLoaded!=null){a.completeImageLoaded(b)}},loadPDFs:function(c){var g=this;var b=editionFlatplanData.pageGroups;var d=g.returnMappedPageNumber(c,c._pageNumber);var f=b[d+pageOffset].pages[0];g.tryCachePDFPage(f);if(g.returnOrientation()=="landscape"){var e;if(d%2==0){e=Math.max(0,d-1)}else{e=Math.min(b.length-1,d+1)}if(b[e+pageOffset]!=null){var a=b[e+pageOffset].pages[0];g.tryCachePDFPage(a)}}setTimeout(100)},returnMappedPageNumber:bufferPDFS:tryCachePDFPage:function(a){var b=this;if(a.cached==null){b.cachePDF(a);a.cached=true}},cachePDF:function(a){var c=this;if(a.pdf!=""){var e=a.pdf;var d="page.pdf";if(settings.page.pdf!=null){e=e.replace("page.pdf",settings.page.pdf)}else{if(settings.reader.useOrigPDF!=null&&settings.reader.useOrigPDF=="true"){e=e.replace("page.pdf","orig.pdf")}}var b=PDFJS.getDocument(e);b.then(function(f){if(f.pdfInfo.numPages>0){f.getPage(1).then(}});b.pageNo=a.pageNum;a.pdfRequest=b}},tryRenderPDFPage:renderPDFPage:function(b){var a=this;if(b.completePDFLoaded!=null){b.completePDFLoaded()}},killActiveRequest:readerIdle:startCaching:function(c){var h=this;var b=editionFlatplanData.pageGroups;var e=c._pageNumber;var a=Math.max(0,e-h.bufferValue);var d=Math.min(b.length-1,e+h.bufferValue);for(var f=a;f<d;f++){var g=b[f].pages[0];if(!h.isIdle){break}if(g.cached==null){h.cachePage(g,function(){h.startCaching(c)});g.cached=true;break}}},cacheThumb:function(d){var c=this;if(d.image!=null){var b=d.image;if(d.pageNum>1){if(d.image.indexOf("pages.cdn.pagesuite.com")!=-1){b="http://pages.mobile.cdn.pagesuite.com/images/"+c.retrievePageGuid(d)+"/tablet.jpg"}}var a=document.createElement("img");a.src=b}},cachePage:function(e,f){var g=this;var d=g.editionGuid;var c=g.retrievePageGuid(e);g.cacheThumb(e);var j=settings.page;var b=j.lowres;var h=editionFlatplanData.pagesDomain;var a=h+"/"+c[0]+"/"+c[1]+"/"+c+"/tile/page_90_"+b+".json";g.loadInline(d,e,a,c,b,f)},loadWorker:loadInline:function(g,f,b,e,c,a){var d=this;f.request=$.ajax({crossDomain:true,type:"GET",contentType:"application/json",async:true,cache:true,url:b,success:function(h){f.tileImage=d.createImagesArray(h);if(a!=null){a()}},error:function(h){if(h.statusText!="abort"){var j="https://tile.html5.pagesuite-professional.co.uk/get_image_jpg_tile.aspx?pguid="+e+"&dpi="+c;$.ajax({crossDomain:true,type:"GET",contentType:"application/json",async:true,cache:true,url:j,success:function(k){f.tileImage=d.createImagesArray(k);if(a!=null){a()}},error:)}}});activerequest={page:f}},createImagesArray:function(e){var c=this;var d=[];for(var b=0;b<e.images.length;b++){var f=document.createElement("img");var a=e.images[b];f.src=a.url;f.startX=a.startX;f.startY=a.startY;f.width=a.width;f.height=a.height;d.push(f)}return d},retrievePageGuid:function(c){var b=c.image.split("/");var a=b[b.length-2];return a},getPage:changeAdvert:checkInterstitial:function(){var d=this;var c=settings.reader.interstitial;if(c!=null){if(c.launchOnLoad=="true"&&!d.preRollAd){d.preRollAd=true;var f="InfinityMobile.view.tablet.Interstitial";switch(currentProfile){case"phone":f="InfinityMobile.view.phone.Interstitial";break;case"tablet":default:f="InfinityMobile.view.tablet.Interstitial";break}var b=Ext.create(f,{});Ext.Viewport.add(b);b.show();var e=d.getCarousel();e.disableTiling()}}if(c!=null&&(c.mode=="overlay"||c.mode=="swipe")){var a=c.count;if(pageSwipes===null){pageSwipes=0}else{pageSwipes++;if(pageSwipes%a==0){var f="InfinityMobile.view.tablet.Interstitial";switch(currentProfile){case"phone":f="InfinityMobile.view.phone.Interstitial";break;case"tablet":default:f="InfinityMobile.view.tablet.Interstitial";break}var b=Ext.create(f,{});Ext.Viewport.add(b);b.show();var e=d.getCarousel();e.disableTiling()}}}},closeInterstitial:function(){var a=this;var b=a.getCarousel();b.enableTiling()},killBannerAd:loadBannerAd:function(){var d=this;if(d.canChangeAd){var c=d.getBannerAd();var g=d.getCarousel();var a=parseInt(g._pageNumber)+1;var h=g.getActiveItem();var b=h.config.pageNo;var f=currentPageNumber=b;var e=d.returnSection(d.returnCorrectSideNumber(f+pageOffset));if(c!=null){c.loadAdvert(a,e)}if(settings.reader.bannerAd!=null&&settings.reader.bannerAd.refresh!=null&&settings.reader.bannerAd.refresh=="true"){d.canChangeAd=true}else{d.canChangeAd=false}}},returnCorrectSideNumber:function(a){var b=flatPlanData.pageGroups[a].pages[0];if(b.type!="page"){b=a%2==1?flatPlanData.pageGroups[a-1].pages[0]:flatPlanData.pageGroups[a+1].pages[0]}return b.origPageNum},returnSection:refreshWrapAd:function(){var e=this;if(settings.reader.wrapAd!=null&&settings.reader.wrapAd.refreshAdvert!=null&&settings.reader.wrapAd.refreshAdvert=="true"){var g=e.getCarousel();var a=parseInt(g._pageNumber)+1;var b=editionFlatplanData.reversePageMapper[a];var f=Ext.ComponentQuery.query(".backgroundwrapaditem");for(var c in f){var d=f[c];d.destroyAdvert();d.setAdvert(b)}}},refreshBannerAd:function(){var e=this;if(settings.reader.bannerAd!=null&&settings.reader.bannerAd.canBeClosed!=null&&settings.reader.bannerAd.canBeClosed=="true"){if(e.swipesUntilNewBannerAd==0){var b=Ext.Viewport.query("readerbannerad");if(b.length<1){var k=e.getCarousel();var g=parseInt(k._pageNumber)+1;var j="InfinityMobile.view.tablet.ReaderBannerAd";switch(currentProfile){case"phone":j="InfinityMobile.view.phone.ReaderBannerAd";break;case"tablet":default:j="InfinityMobile.view.tablet.ReaderBannerAd";break}var a=Ext.create(j,{pageNumber:g});if(settings.reader.bannerAd.position=="top"){var h=settings.topbar.backgroundColor.indexOf("#")==0?settings.topbar.backgroundColor:"#"+settings.topbar.backgroundColor;if(typeof e.hexaToRgba==="function"&&typeof e.hexToRgb==="function"){if(h.length>=8){h=e.hexaToRgba(h)}else{var f=e.hexToRgb(h);var d=settings.topbar.opacity!=null?settings.topbar.opacity:"0.9";h="rgba("+f.r+","+f.g+","+f.b+","+d+")"}}a.setStyle({borderBottom:"1px solid #ffffff",backgroundColor:h,zIndex:9});a.setDocked("top");var c=e.getReaderViewController();c.insert(0,a);a.show();e.forcePageResizeOnShow()}else{Ext.Viewport.add(a);a.show();a.setBottom(0)}a.loadAdvert(g)}}}},hexToRgb:function(b){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},hexaToRgba:function(h){var j=h.match(/.{2}/g);if(j.length!=4){$("<p />",{"class":"user-message warning"}).text("Value provided is invalid.").insertAfter("form").hide().slideDown();$("#hex").addClass("error");$("#rgba").slideUp();return false}else{$("#hex").removeClass("error");$(".user-message").slideUp()}var g=var f=var b,e=[];b=f(j[3]);$.each(j.slice(0,3),;return e.join(",")+","+b},bannerAdClose:function(a){var b=this;if(settings.reader.bannerAd!=null){if(settings.reader.bannerAd.position=="top"){var c=b.getReaderViewController();a.destroy();b.forcePageResizeOnHide()}else{Ext.Viewport.remove(a);a.destroy()}b.swipesUntilNewBannerAd=settings.reader.bannerAd.swipeCount}},checkPayWall:trackOmniture:returnCorrectPageNumber:returnOrientation:jumpToPage:zoomStart:function(d,c){var b=this;var a=b.getCarousel();b.readerActiveItem=a.getActiveItem();if(b.readerActiveItem!=null&&b.readerActiveItem.onZoomStart!=null){b.readerActiveItem.onZoomStart(d,c)}else{d.sliderElement.dom.value=1}},zoom:function(c,b){var a=this;if(a.readerActiveItem!=null&&a.readerActiveItem.onZoom!=null){a.readerActiveItem.onZoom(c,b)}else{c.sliderElement.dom.value=1}},zoomEnd:function(c,b){var a=this;document.activeElement.blur();if(a.readerActiveItem!=null&&a.readerActiveItem.onZoomEnd!=null){a.readerActiveItem.onZoomEnd(c,b)}else{c.sliderElement.dom.value=1}},hideNavButtons:showNavButtons:hideTop:showTop:hideBottom:showBottom:scrollLeft:function(){var b=this;var a=b.getCarousel();if(a.getActiveItem().getScrollable()==null){return}if(a.getActiveItem().getScrollable().getScroller().position.x-50>0){a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x-50)}else{a.getActiveItem().getScrollable().getScroller().scrollTo(0)}},scrollRight:function(){var b=this;var a=b.getCarousel();if(a.getActiveItem().getScrollable()==null){return}if(a.getActiveItem().getScrollable().getScroller().position.x+50<a.getActiveItem().getScrollable().getScroller().maxPosition.x){a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x+50)}else{a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().maxPosition.x)}},scrollUp:function(){var b=this;var a=b.getCarousel();if(a.getActiveItem().getScrollable().getScroller().position.y-50>0){a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x,a.getActiveItem().getScrollable().getScroller().position.y-50);b.showTop();b.showBottom()}else{a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x,0);b.hideTop();b.showBottom()}},scrollDown:function(){var b=this;var a=b.getCarousel();if(a.getActiveItem().getScrollable().getScroller().position.y+50<a.getActiveItem().getScrollable().getScroller().maxPosition.y){a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x,a.getActiveItem().getScrollable().getScroller().position.y+50);b.showBottom();b.showTop()}else{a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x,a.getActiveItem().getScrollable().getScroller().maxPosition.y);b.hideBottom();b.showTop()}},showLeft:function(){var a=this;if(a.leftBtn.isHidden()){a.leftBtn.show()}},hideLeft:function(){var a=this;if(!a.leftBtn.isHidden()){a.leftBtn.hide()}},showRightIcon:hideRightIcon:fitMode:function(){var a=this;var b=a.getCarousel();if(a.topBtn!=null){if(!a.topBtn.isHidden()||a.topBtn.element.dom.style.display!="none"){a.topBtn.element.dom.style.display="none"}}if(a.bottomBtn!=null){if(!a.bottomBtn.isHidden()){a.bottomBtn.element.dom.style.display="none"}}},fillMode:function(){var a=this;var b=a.getCarousel();var c=b.getActiveItem();if(c.returnActiveImageContainer!=null&&c.element.dom.clientHeight<c.returnActiveImageContainer().clientHeight){if(c.scroller.position.y<=0){a.hideTop();a.showBottom()}else{if(c.scroller.position.y>=c.scroller.maxPosition.y){a.showTop();a.hideBottom()}else{a.showTop();a.showBottom()}}}else{a.hideBottom();a.hideTop()}},resizeArticleController:function(){var a=this;if(a.getArticlecarousel()!=null){a.getArticlecarousel().onSizeChange()}},getZoomValue:resizeWrapAds:function(a){var b=this;a.element.dom.style.display="";if($(window).width()/$(window).height()<=1.4){a.removeCls("showWrapper");a.addCls("hideWrapper")}else{if(a.side=="left"){if(settings.reader.wrapAd!=null){if(settings.reader.wrapAd.hideLeftWrapperOnFirstPage!=null){if(settings.reader.wrapAd.hideLeftWrapperOnFirstPage=="true"){var c=b.getCarousel();if(c!=null){if(c.getActiveItem().getPageNo()==0){a.removeCls("showWrapper");a.addCls("hideWrapper")}else{a.removeCls("hideWraper");a.addCls("showWrapper")}}else{a.removeCls("hideWraper");a.addCls("showWrapper")}}else{a.removeCls("hideWraper");a.addCls("showWrapper")}}else{a.removeCls("hideWraper");a.addCls("showWrapper")}}else{a.removeCls("hideWraper");a.addCls("showWrapper")}}else{a.removeCls("hideWraper");a.addCls("showWrapper")}}},checkWrapAd:function(c){var a=this;var d=a.getCarousel();if(d!=null){if(c.getPageNo()==0&&c.getPageNo()==d.getActiveItem().getPageNo()){if(c.mode=="double"&&c.zoomMode=="fit"){var b=document.getElementsByClassName("leftWrapper");if(b!=null){b[0].style.display="none"}}}}},toggleNavButtons:function(){var b=this;if(b.toggledOn==true){b.bottomBtn.element.dom.style.display="none";b.topBtn.element.dom.style.display="none";b.leftBtn.element.dom.style.display="none";b.rightBtn.element.dom.style.display="none";b.toggledOn=false}else{var c=b.getCarousel();if(c.getActiveItem().scale==1){if(c._pageNumber>0){b.leftBtn.element.dom.style.display=""}if(c._pageNumber<c.getData().length-1){b.rightBtn.element.dom.style.display=""}if(c._zoomMode=="fill"){var a=c.getActiveItem().scroller;if(a.position.y>a.minPosition.y){b.topBtn.element.dom.style.display=""}if(a.position.y<a.maxPosition.y){b.bottomBtn.element.dom.style.display=""}}}else{b.bottomBtn.element.dom.style.display="";b.topBtn.element.dom.style.display="";b.leftBtn.element.dom.style.display="";b.rightBtn.element.dom.style.display=""}b.toggledOn=true}},articleHelper:ttsStateChange:function(){if(settings.tts!=null||(typeof isTribReader!="undefined"&&isTribReader)){var b=this;if(b.getLayouttoolbar()!=null){var a=b.getLayouttoolbar().ttsToggle}else{var a=ttsFlag}if(a!=null){if(window.speechSynthesis!=null){if(window.speechSynthesis.paused==true){window.speechSynthesis.resume();a.status="STOPPED"}if(window.speechSynthesis.speaking==true){window.speechSynthesis.cancel();if(a.status!="STOPPED"){a.status="FINISHED"}a.removeCls("playing")}setTimeout(function(){if(a.status=="FINISHED"&&(settings.tts!=null&&(settings.tts.autoplay==true||settings.tts.autoplay=="true"))){if(a==ttsFlag){var c="noicon";b.getApplication().getController("MediaController").playArticleTTS(a,c)}else{b.getApplication().getController("MediaController").playArticleTTS(a)}}},200)}}}},returnAdvertOffset:function(c){var b=this;var d=0;if(typeof settings!="undefined"&&settings.reader!=null&&settings.reader.interstitialPageFlow!=null){var e=settings.reader.interstitialPageFlow;var a=editionFlatplanData.pageGroups[c];if(a!=null&&a.pages[0]!=null){if(!isNaN(a.pages[0].advertsAdded)){d=a.pages[0].advertsAdded}}}return d},checkActivePageInBrowser:function(m){var l=this;var o=l.getCarousel();if(o!=null){var g=o.getActiveItem();var n=g.getPageNo();var a=flatPlanData.pageGroups[n+pageOffset].pages[0].origPageNum-1;if(g.xtype==="readeradvertpageviewer"){a=-1}if(m.mode=="pages"){var p=m.contentArea.items.items[0].items.items[a];var k=m.contentArea.items.items[0].items.items;if(k!=null){for(var f in k){$(k[f].img).css("border","")}}if(p!=null){var e=p.img;if(e!=null){var d=0;if(Ext.os.is.Desktop){if(o._mode=="double"){if(a%2==1){if(o.getActiveItem().config.rightPage.type!="sectionpage"){if(a+1<k.length){d=$(k[a-1].img).width()+10;$(k[a+1].img).css("border","5px solid #"+settings.reader.buttonColour)}}}else{if(a-1>0){if(o.getActiveItem().config.leftPage.type!="sectionpage"){$(k[a-1].img).css("border","5px solid #"+settings.reader.buttonColour)}}}}else{d=($(e).width()/2)+15}$(e).css("border","5px solid #"+settings.reader.buttonColour)}else{if(Ext.os.is.Tablet){if(l.returnOrientation()=="landscape"){if(o._mode=="double"){if(a%2==1){if(o.getActiveItem().landscapeimage.src.indexOf("resources/images/branding/next-section@2x.png")==-1){if(a+1<k.length){d=$(k[a-1].img).width()+10;$(k[a+1].img).css("border","5px solid #"+settings.reader.buttonColour)}}}else{if(a-1>0){if(o.getActiveItem().image.src.indexOf("resources/images/branding/previous-section@2x.png")==-1){$(k[a-1].img).css("border","5px solid #"+settings.reader.buttonColour)}}}}else{d=($(e).width()/2)+15}}else{d=($(e).width()/2)+15}$(e).css("border","5px solid #"+settings.reader.buttonColour)}}var j=p.element.dom.offsetLeft-($(document).width()/2)+d;if(m.scrollType=="senchaScroller"){var h=m.getComponent("con").getScrollable().getScroller();var c=m.getComponent("con");var b=null;if(j<h.minPosition.x){j=h.minPosition.x}else{if(j>h.maxPosition.x){j=h.maxPosition.x}}h.scrollTo(j,0,{duration:100})}else{if(j<0){j=0}else{if(j>m.contentArea.element.dom.scrollWidth){j=m.contentArea.element.dom.scrollWidth}}m.contentArea.element.dom.scrollLeft=j}}}}}},checkActivePageInToolbarBottom:function(p){var m=this;var o=m.getCarousel();if(o!=null){var e=o.getActiveItem();var b=e._pageNo;var a=p.getItems().items;if(a[1]!=null){a=a[1].items.items;if(a[0]!=null){a=a[0].items.items;for(var f in a){var q=$(a[f].element.dom).find("img");if(q.length>0){var j=q[0];$(j).css("border","")}}var l=$(a[b].element.dom).find("img");var c=0;if(m.returnOrientation()=="landscape"){if(o._mode=="double"){if(b%2==1){if(b+1<a.length){var n=$(a[b+1].element.dom).find("img");if(n.length>0){var k=n[0];$(k).css("border","5px solid #"+settings.reader.buttonColour)}}}else{if(b-1>0){var n=$(a[b-1].element.dom).find("img");if(n.length>0){var k=n[0];$(k).css("border","5px solid #"+settings.reader.buttonColour);c+=$(k).width()+20}}}}}if(l.length>0){var d=l[0];$(d).css("border","5px solid #"+settings.reader.buttonColour);var h=a[b].element.dom.offsetLeft-c;var g=p.scrollerContainer.getScrollable().getScroller();if(h>g.maxPosition.x){h=g.maxPosition.x}g.scrollTo(h,0,{duration:100})}}}}},checkPagesBrowser:forcePageResizeOnHide:function(){var a=this;if(a.showBannerTimeout!=null){clearTimeout(a.showBannerTimeout)}var b=a.getCarousel();if(b._zoomMode=="fit"){a.hideBannerTimeout=setTimeout(function(){a.forceReRender(b);b.onResize()},1000)}else{a.hideBannerTimeout=setTimeout(function(){var c=b.getActiveItem();if(c!=null&&c.xtype=="readeradvertpageviewer"){c.loadAdvert()}},1000)}a.updateTopBtnPosition()},forcePageResizeOnShow:function(){var a=this;if(a.hideBannerTimeout!=null){clearTimeout(a.hideBannerTimeout)}var b=a.getCarousel();if(b._zoomMode=="fit"){a.showBannerTimeout=setTimeout(1000)}a.updateTopBtnPosition()},forceReRender:updateTopBtnPosition:function(){var b=this;if(typeof settings!="undefined"&&settings.reader!=null&&settings.reader.bannerAd!=null&&settings.reader.bannerAd.position=="top"){var a=b.getBannerAd();if(a!=null){b.topBtn.setTop(122)}else{b.topBtn.setTop(12)}}}},0,0,0,0,0,0,[InfinityMobile.controller,"ReaderController"],0));(Ext.cmd.derive("InfinityMobile.controller.ReaderToolbarController",Ext.app.Controller,{config:{refs:{mainPanel:"#rootPanel",readerPanel:"reader",readerView:"#reader",readerMenu:"readermenu",readerToolBar:"readertoolbar",readerToolbarBottom:"readertoolbarbottom",readerPages:"readerpages",readerPagesContainer:"#pagescontainer",readerArchive:"readerarchive",readerArchiveContainer:"#archivecontainer",readerArchiveMonthItem:"archiveMonthItem",readerViewController:"#readerViewController",carousel:"infinitecarousel2d",backButton:"button[action=toolbarback]",menuCloseButton:".ReaderMenuClose",blocker:"blocker",navbutton:"navbutton",readerpageviewer:"readerpageviewer",readerpagenumber:"readerpagenumber",layouttoolbar:"layouttoolbar",layouttoolbartoggleicon:"layouttoolbartoggleicon",articlescontainer:"articlescontainer",sectionListOverlay:"sectionlistoverlay",sectionlistoverlayitem:"sectionlistoverlayitem",zonesOverlay:"zonesoverlay",zonesOverlayItem:"zonesoverlayitem",readerFree:"readerfree",fullscreenprompt:"fullscreenprompt"},control:{readerPanel:{ready:"readerContainerReady",readertap:"readerTap"},carousel:{pagechange:"readerPageChange",updatePageNumber:"readerPageChange"},readerToolbarBottom:{initialized:"toolbarBottomInit"},readerPages:{initialized:"renderPagesLoad"},readerArchive:{initialized:"renderArchiveLoad"},readerArchiveMonthItem:{changeMonth:"changeArchiveMonth"},mainPanel:{openReaderMenu:"toolbarMenu",readerRight:"toolbarNext",readerLeft:"toolbarPrevious",readerFirst:"toolbarFirst",readerLast:"toolbarLast",showTutorial:"toolbarShowTutorial",toggleDPSMode:"toggleDPSMode",dpsModeOn:"dpsModeOn",dpsModeOff:"dpsModeOff",fullscreenMode:"toolbarFullscreen",zoomModeFit:"zoomModeFit",zoomModeFill:"zoomModeFill",pageNumber:"toolbarPageNumber",toolbarShare:"toolbarShare",toolbarHowTo:"toolbarHowTo",toolbarSectionList:"toolbarSectionList",toolbarZones:"toolbarZones",archive:"renderArchive"},navbutton:{toolbarNext:"toolbarNext",toolbarPrevious:"toolbarPrevious"},readerpagenumber:{jumpToPage:"readerPageNumberJumpToPage",hide:"readerPageNumberHide",hideArticlesContainer:"hideArticlesContainer",showArticlesContainer:"showArticlesContainer"},layouttoolbartoggleicon:{addToggleGroup:"addToggleGroup",toggleGroupState:"toggleGroupState"},readertoolbarsharemenu:{loadShare:"toolbarLoadShare",shareMenuClose:"shareMenuClose"},zonesOverlay:{initialized:"zonesInitialized",close:"zonesClose"},zonesOverlayItem:{zoneEdition:"toolbarZoneEdition"},sectionListOverlay:{initialized:"sectionListInitialized",close:"sectionListClose",enableArticlesContainer:"enableArticlesContainer"},sectionlistoverlayitem:{sectionListPage:"toolbarSectionListPage"},readerFree:{close:"closeFree",subscribe:"subscribeFree",login:"loginFree"},fullscreenprompt:{launchfullscreen:"toolbarFullscreen"}}},init:function(){var a=this;a.showToolbar=true;pageSwipes=null;a.checkArchive();a.toggleGroups={}},checkArchive:function(){var b=this;var a=Ext.getStore("ArchiveStore");a.on({load:"archiveLoad",scope:this})},archiveLoad:function(h){var e=this;if(settings.menu!=null){if(settings.menu.archiveUsesTabs!=null){if(h.data.items[0].raw.editions!=null){var d=h.data.items[0].raw.editions.edition;h.months=[];if(d.length>0){var f=d[0];var a=f["@month"];var g=f["@year"];h.editionToLoad="month"+a+g;for(var c=0;c<d.length;c++){var b=d[c];var a=b["@month"];var g=b["@year"];var j="month"+a+g;if(h[j]==null){h.months.push(a+" "+g);h[j]=[b]}else{h[j].push(b)}}}}}}},readerTap:toggleNavButtons:toolbarDisplay:toolbarFullscreen:function(){var a=this;if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement){if(document.documentElement.requestFullscreen){document.documentElement.requestFullscreen()}else{if(document.documentElement.msRequestFullscreen){document.documentElement.msRequestFullscreen()}else{if(document.documentElement.mozRequestFullScreen){document.documentElement.mozRequestFullScreen()}else{if(document.documentElement.webkitRequestFullscreen){document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}}}}else{if(document.exitFullscreen){document.exitFullscreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}}}},toolbarBack:toolbarFirst:function(){var a=this.getCarousel();this.resetZoom();a.jumpToFirst();if(typeof trackReaderEvent!="undefined"){trackReaderEvent("headerNav",{type:"First page icon"})}},toolbarPrevious:function(){var a=this.getCarousel();this.resetZoom();this.getApplication().getController("PageTurnController").goLeft();if(typeof trackReaderEvent!="undefined"){trackReaderEvent("headerNav",{type:"Previous page icon"})}},toolbarNext:function(a){var b=this.getCarousel();this.resetZoom();this.getApplication().getController("PageTurnController").goRight();if(typeof trackReaderEvent!="undefined"){trackReaderEvent("headerNav",{type:"next page icon"})}},toolbarLast:toolbarPageNumber:readerPageNumberJumpToPage:function(a){var b=this;a.hide()},readerPageNumberHide:function(d){var e=this;var a=e.getCarousel();var b=(a._pageNumber+1);var g=e.getPageNumber(d);var f=flatPlanData.pdfPages!=null&&flatPlanData.pdfPages[g-1]!=null?flatPlanData.pdfPages[g-1].pages[0].advertsAdded:0;g+=f;if(g!=-1){var h=d.maxValue;var c=Math.min(g,h);c=Math.max(c,1);if((settings.reader.reverse!=null&&settings.reader.reverse=="true")||(settings.reader.startAtLastPage!=null&&settings.reader.startAtLastPage=="true")){c=(a.getData().length-c)+1}if(b!=c){a.jumpToPage(c-1)}}},getPageNumber:function(a){var b=this;var c=1;if(settings.reader.friendlyNumbering!=null){c=b.getPageNumberFriendly(a)}else{c=b.getPageNumberInt(a)}return c},getPageNumberFriendly:getPageNumberInt:function(a){var b=parseInt(a.pageNumberTextBox.value);if(b<1){b=-1}if(b>flatPlanData.pageGroups.length){b=-1}return b},getPageNumberString:function(b){var a=-1;var b=b.toUpperCase();if(flatPlanData.friendlyPageMapper[b]!=null){a=flatPlanData.friendlyPageMapper[b]+1}return a},returnReversePageMapper:hideScrollNavBtns:resetZoom:function(){var a=this;if($("#slider").val()>1){var b=a.getCarousel();var c=b.getActiveItem();c.resetZoom();c.resetPage()}},toolbarShowTutorial:function(){},toggleDPSMode:dpsModeOn:function(){var c=this;var d=this.getCarousel();if(d.getMode()=="single"){d.toggleDPS();var a=c.getArticlescontainer();if(a!=null){a.fireEvent("checkActivePageInBrowser",a)}if(currentProfile=="desktop"){var b=c.getLayouttoolbar();if(b!=null&&settings.tts!=null){b.fireEvent("stopArticleTTS",b.ttsToggle,"na")}}else{if(settings.tts!=null){mainPanel.fireEvent("stopArticleTTS",ttsFlag,"na")}}}if(typeof trackReaderEvent!="undefined"){trackReaderEvent("headerNav",{type:"Double page mode icon"})}},dpsModeOff:function(){var c=this;var d=this.getCarousel();if(d.getMode()=="double"){d.toggleDPS();var a=c.getArticlescontainer();if(a!=null){a.fireEvent("checkActivePageInBrowser",a)}if(currentProfile=="desktop"){var b=c.getLayouttoolbar();if(b!=null&&settings.tts!=null){b.fireEvent("stopArticleTTS",b.ttsToggle,"na")}}else{if(settings.tts!=null){mainPanel.fireEvent("stopArticleTTS",ttsFlag,"na")}}}if(typeof trackReaderEvent!="undefined"){trackReaderEvent("headerNav",{type:"Single page mode icon"})}},zoomModeFit:function(){var a=this;if(currentProfile=="desktop"){a.desktopTryRemovePadding()}var b=this.getCarousel();if(b.getZoomMode()=="fill"){b.toggleZoomMode()}else{if(b.getActiveItem().scale>1&&b.getZoomMode()=="fit"){b._zoomMode="fill";b.toggleZoomMode()}}if(typeof trackReaderEvent!="undefined"){trackReaderEvent("headerNav",{type:"page fit mode icon"})}},zoomModeFill:desktopTrySetPadding:desktopTryRemovePadding:function(){var b=this;var a=b.getReaderView();if(a.config.fillPadding!=null){a.setPadding(0)}},toolbarMenu:function(){var a=this;var b="right";if(settings.newsday!=null){if(settings.newsday.menuDirection!=null){if(settings.newsday.menuDirection=="left"){b="left"}}}if(typeof trackReaderEvent!="undefined"){trackReaderEvent("headerNav",{type:"menu icon"});trackReaderEvent("menu")}var d="InfinityMobile.view.tablet.ReaderMenu";switch(currentProfile){case"phone":d="InfinityMobile.view.phone.ReaderMenu";break;case"tablet":default:d="InfinityMobile.view.tablet.ReaderMenu";break}var c=Ext.create(d,{direction:b});Ext.Viewport.add(c);c.show()},readerContainerReady:readerPageChange:function(e){var h=this;if(settings.reader.friendlyNumbering!=null){h.readerPageChangeFriendly(e)}else{var j=h.returnCurrentPageNumber(e);var b=e.getData();var f=b.length-pageOffset-flatPlanData.sectionPageCount-flatPlanData.totalAdvertsAdded;if((settings.reader.reverse!=null&&settings.reader.reverse=="true")||(settings.reader.startAtLastPage!=null&&settings.reader.startAtLastPage=="true")){j=b.length-j+1}var a=h.returnPageNumberString(j,f,e);e.json=e.config.json;var d=e.json.events.onValueChange[0];if(d!=null){var k=d.text;var g=d.target;if(a=="Advertisement"){k="Advertisement"}else{k=k.replace("%HPAGE%",a).replace("%HPCOUNT%",f);k=k.replace("Page ","")}var c=Ext.getCmp(g);if(c!=null){c.setHtml(k)}}}},readerPageChangeFriendly:function(f){var k=this;var l=(f._pageNumber+1);var c=f.getData();var h=c.length-pageOffset-flatPlanData.sectionPageCount;f.json=f.config.json;var e=f.json.events.onValueChange[0];if(e!=null){var m=e.text;var j=e.target;if(c[f._pageNumber].pages[0].pageName!=null){if(f._mode=="double"&&k.returnOrientation()=="landscape"){if(l!=1&&l!=h){var b=l;if(l%2==0){b=l+1}else{b=l-1}var g=Math.min(l,b);var a=Math.max(l,b);m=c[g-1].pages[0].pageName+" & "+c[a-1].pages[0].pageName+" / "+c[f._pageNumber].pages[0].sectionLength}else{m=c[f._pageNumber].pages[0].pageName+" / "+c[f._pageNumber].pages[0].sectionLength}}else{m=c[f._pageNumber].pages[0].pageName+" / "+c[f._pageNumber].pages[0].sectionLength}}else{m=m.replace("%HPAGE%",l).replace("%HPCOUNT%",c.length)}var d=Ext.getCmp(j);if(d!=null){d.setHtml(m)}}},returnPageNumberString:function(d,f,b){var e=this;var g=flatPlanData.pageMapper[d]-1;d=flatPlanData.pageGroups[g+pageOffset]!=null&&flatPlanData.pageGroups[g+pageOffset].pages[0].pageName!=null?flatPlanData.pageGroups[g+pageOffset].pages[0].pageName:d;if(b._mode=="double"&&e.returnOrientation()=="landscape"){if(d!="Advertisement"&&d!=1&&(d!=f||(d==f&&d%2==1))){var a=d;if(d%2==0){a=d+1}else{a=d-1}if(flatPlanData.bookmarks==null||(flatPlanData.bookmarks.indexOf(a)==-1&&flatPlanData.bookmarks.indexOf(a+1)==-1)){var c=d+"-"+a;if(d>a){c=a+"-"+d}return c}}}return d.toString()},returnCurrentPageNumber:returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){a="landscape"}}return a},toolbarBottomInit:renderPages:function(){var c=this;var a=c.getReaderToolbarBottom();var b=a.scrollerContainer;b.removeAll(true);var d={xtype:"readerpages"}},renderPagesLoad:function(a){var l=this;var d=l.getCarousel().getData();var j=l.getReaderPages();var m=l.getReaderPagesContainer();var c=l.getReaderToolbarBottom();if(c!=null){var g=c.scroller.getScroller()}else{if(l.getArticlescontainer().scrollType=="senchaScroller"){var g=l.getArticlescontainer().getComponent("con").getScrollable().getScroller()}}for(var h=pageOffset;h<d.length;h++){var n=d[h].pages[0];if(n.type=="page"){var e=n.pageNum;if(settings.reader.reverse!=null&&settings.reader.reverse=="true"){e=d.length-e+1}var b=language.page+" "+(e);if(n.pageName!=null){var b=language.page+" "+n.pageName}var k=n.origPageNum;var f=Ext.create("InfinityMobile.view.ReaderPagesItem",{id:"page"+e,imgSrc:"https://edition.pagesuite-professional.co.uk/get_image.aspx?w=280&eid="+editionguid+"&pnum="+k,html:"<img id='imagepage"+e+"' class='readerPage' style='width:140px'  />",height:"100%",items:[{top:130,height:30,left:10,width:"120px",padding:"5 7 0 0",style:"background-color:rgba(0,0,0,0.7); color:white; border-radius:5px; text-align:center",html:b}]});var o=f.element.down("img").dom;f.element.on({tap:scope:f});m.add(f)}}if(settings.reader.reverse!=null&&settings.reader.reverse=="true"){g.scrollTo(d.length*150,0)}},renderArchive:function(){var a=this;if(typeof trackReaderEvent!="undefined"){trackReaderEvent("archive")}a.disableArticlesContainer();var c="InfinityMobile.view.tablet.ReaderArchive";switch(currentProfile){case"phone":c="InfinityMobile.view.phone.ReaderArchive";break;case"desktop":c="InfinityMobile.view.desktop.ReaderArchive";break;case"tablet":if($(document).height()<700||$(document).width()<700){c="InfinityMobile.view.phone.ReaderArchive";break}default:c="InfinityMobile.view.tablet.ReaderArchive";break}var b=Ext.create(c,{});Ext.Viewport.add(b);b.show()},disableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().disableEvents()}},enableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().enableEvents()}},renderArchiveLoad:renderArchiveMonths:function(g){var h=this;var d=g.archiveMonthsContainer;var c=d.config.monthdirection;if(d!=null){var f=Ext.getStore("ArchiveStore");var b=f.months;for(var e=0;e<b.length;e++){var a=b[e];var j=Ext.create("InfinityMobile.view.ReaderArchiveMonthItem",{month:a,monthDirection:c});d.add(j)}}},changeArchiveMonth:renderArchivePages:function(g){var e=this;var b=Ext.getStore("ArchiveStore");var d=[];if(b.editionToLoad==null){if(b.data.items[0].raw.editions!=null){d=b.data.items[0].raw.editions.edition}g.hideMonthContainer()}else{d=b[b.editionToLoad]}var h=g.archiveItemsContainer;h.removeAll(true,true);if(d.length!=null){for(var c=0;c<d.length;c++){var f=d[c];var a=Ext.create("InfinityMobile.view.ReaderArchiveItem",{editionGuid:f["@editionguid"],editionName:f["@name"]});h.add(a)}}else{var f=d;var a=Ext.create("InfinityMobile.view.ReaderArchiveItem",{editionGuid:f["@editionguid"],editionName:f["@name"]});h.add(a)}},renderArchiveScroll:function(){var k=this;var h=Ext.getStore("ArchiveStore");var j=h.data.items[0].raw.editions.edition;var g=k.getReaderPages();var a=k.getReaderToolbarBottom();var d=a.getScrollable().getScroller();var f=Ext.Viewport.getWindowWidth()+d.position.x;var e=0;for(var c=0;c<j.length;c++){var b=j[c];if(e<f){var l=document.getElementById("imageedition"+(c+1));if(l.src==""){l.src="https://edition.pagesuite-professional.co.uk//get_image.aspx?w=280&eid="+b["@editionguid"]}}e+=150}d.on({scope:this,scrollend:k.renderPagesScroll,single:true})},clickPage:function(d,f){d.stopPropagation();var c=this;var b=parseInt(f.id.replace("imagepage",""));var e=this.getCarousel();e.jumpToPage((b-1));var a=c.getReaderToolbarBottom();if(a!=null){}},toggleTopBar:toggleTopBarDesktop:toggleTopBarMobile:addToggleGroup:toggleGroupState:toolbarShare:function(a){var b=this;if(b.getArticlescontainer()!=null){b.disableArticlesContainer();b.hideArticlesContainer()}var c=Ext.create("InfinityMobile.view.desktop.ReaderToolbarShareMenu");if(settings.newsday!=null){Ext.Viewport.add(c);c.show();c.setLeft("50%");c.setTop("50%");c.setStyle({transform:"translate3d(-50%,-50%,0px)"})}else{c.showBy(a)}},toolbarLoadShare:populateShare:function(e){var d=this;var f=settings.sharing.allSharing;for(var b=0;b<f.length;b++){var a=f[b];var c=settings.sharing[a];d.addShareItem(e,c.icon,c.link,a)}},addShareItem:function(b,l,e,k){var j=this;var m=j.getCarousel();var f=m.getActiveItem();var d=f.config.pageNo+1;if(f.xtype!="readeradvertpageviewer"){d=editionFlatplanData.reversePageMapper[d];var c=flatPlanData.pageMapper[d];var g=flatPlanData.pageGroups!=null&&flatPlanData.pageGroups[c-1]!=null?flatPlanData.pageGroups[c-1].pages[0].advertsAdded:0;d=g!=null?(d-g):d}else{d=null}if(e.indexOf("pinterest")!=-1){e=e.replace("{0}",encodeURIComponent("https://edition.pagesuite-professional.co.uk/get_image.aspx?w=280&eid="+editionguid+"&pnum="+d));e=e.replace("{1}","http://html5.pagesuite.com/desktop/share.aspx?edid="+editionguid+"&title="+encodeURIComponent(publicationName)+"&editionName="+encodeURIComponent(editionName)+"&pnum="+d);e=e.replace("{2}",encodeURIComponent(publicationName+" - "+editionName));var h=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:l,link:e,pnum:d,type:"pinterest",toolbar:true})}else{if(e.indexOf("mailto:")==-1){var a="http://html5.pagesuite.com/desktop/share.aspx?edid="+editionguid+"&title="+encodeURIComponent(publicationName)+"&editionName="+encodeURIComponent(editionName)+"&pnum="+d;var h=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:l,link:e,pnum:d,type:k,toolbar:true})}else{var k="";if(e.indexOf("mailto:")!=null){k="email"}var h=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:l,message:publicationName+" - "+editionName,link:e,pnum:d,type:k,toolbar:true})}}b.sharingContainer.add(h);b.setWidth($(b.element.dom).width()+40)},shareMenuClose:function(){var a=this;a.enableArticlesContainer()},showArticlesContainer:hideArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().hide()}},toolbarHowTo:function(m,r,q,b,g){var t=this;if(t.hasHowTo==null||!t.hasHowTo){var d=window.onkeydown;window.onkeydown=null;t.hasHowTo=true;if(t.getArticlescontainer()!=null){t.getArticlescontainer().hide();t.getArticlescontainer().addCls("blur");t.getArticlescontainer().disableEvents()}var c=Ext.create("InfinityMobile.view.desktop.HowToEditionOptions",{});if(m!=null){c.showBy(m)}var j=Ext.create("InfinityMobile.view.desktop.HowToPageControl",{});if(r!=null){j.showBy(r)}var h=Ext.create("InfinityMobile.view.desktop.HowToViewOptions",{});if(q!=null){h.showBy(q)}var u=Ext.create("InfinityMobile.view.desktop.HowToDPS",{});if(g!=null&&typeof settings!="undefined"&&settings.reader!=null&&(settings.reader.toggleDPS=="true"||settings.reader.toggleDPS=="True")){u.showBy(g)}var k=Ext.create("InfinityMobile.view.desktop.HowToReader",{});Ext.Viewport.add(k);if(settings.newsday==null){var l=Ext.create("InfinityMobile.view.desktop.HowToMenuIcon",{});if(b!=null){l.showBy(b)}}if(t.getArticlescontainer()!=null){var p=true;if(settings.newsday!=null){if(settings.newsday.customArticlesContainer=="true"){p=false}}if(p){var s=Ext.create("InfinityMobile.view.desktop.HowToArticlesContainer",{});s.showBy(t.getArticlescontainer().tab)}}var e=language.continueText;if(settings.newsday!=null){if(settings.newsday.articleHelper=="true"){e="Next"}}var a=typeof settings!="undefined"&&settings.reader!=null&&settings.reader.bannerAd!=null&&settings.reader.bannerAd.position=="top"?50:100;var f=Ext.create("Ext.Container",{height:40,width:160,bottom:a,left:"50%",cls:"btn",html:"<p style='top:50%;left:50%;position:absolute;-webkit-transform:translate3d(-50%, -50%,0);transform:translate3d(-50%, -50%, 0);'>"+e+"</p>",style:"-webkit-transform:translateX(-50%);transform:translateX(-50%);background-color:rgb(69, 143, 187);color:white;"});f.element.on({tap:function(){window.onkeydown=d;var w=this;w.hasHowTo=false;c.destroy();j.destroy();h.destroy();k.destroy();f.destroy();if(s!=null){s.destroy()}if(l){l.destroy()}if(u!=null){u.destroy()}try{localStorage.setItem("helper"+publicationguid,"complete")}catch(x){w.setCookie("helper"+publicationguid,"complete")}if(typeof isTribReader!="undefined"&&isTribReader==true){w.checkTrialScreen()}else{w.removeBlur()}var v=Ext.create("InfinityMobile.view.ReaderArticleHelper",{});if(settings.newsday!=null){if(settings.newsday.articleHelper=="true"){mainPanel.add(v);v.show()}}},scope:t});Ext.Viewport.add(f);var o=t.getCarousel();o.addCls("blur");var n=Ext.ComponentQuery.query(".navbutton");for(btn in n){n[btn].addCls("blur")}}},checkTrialScreen:helperFree:function(b){showTrialScreen=true;var a="InfinityMobile.view.desktop.ReaderFree";var b=Ext.create(a,{});Ext.Viewport.add(b);b.show()},removeBlur:closeFree:function(b){var a=this;a.removeBlur();Ext.Viewport.remove(b,true)},subscribeFree:function(b){var a=this;a.removeBlur();Ext.Viewport.remove(b,true);a.showPayPanel()},loginFree:function(b){var a=this;a.removeBlur();Ext.Viewport.remove(b,true);fncLoginPopupShow()},showPayPanel:setCookie:toolbarZones:zonesInitialized:zonesClose:function(a){var b=this;a.hide()},toolbarZoneEdition:function(b,e,h){var f=this;var g="";if(e!=""){g="?edid="+e}else{g="?pubid="+h}var d="";if(qs.localhost!=null&&qs.localhost=="true"){d="&localhost=true"}var a="default.aspx";if(typeof isTribReader=="undefined"){isTribReader=false}if(isTribReader){try{localStorage.setItem("zones"+h,"true");setCookie("default_zone",h)}catch(c){setCookie("default_zone",h)}}window.location.href=a+g+d},toolbarSectionList:function(c){var b=this;b.disableArticlesContainer();b.hideArticlesContainer();var d="InfinityMobile.view.desktop.SectionListOverlay";switch(currentProfile){case"phone":d="InfinityMobile.view.phone.SectionListOverlay";break;case"tablet":d="InfinityMobile.view.tablet.SectionListOverlay";break;case"desktop":d="InfinityMobile.view.desktop.SectionListOverlay";break}var a=Ext.create(d,{});Ext.Viewport.add(a);a.show()},sectionListInitialized:function(e,g){var c=this;var f=settings.bookmarks.bookmark;for(var b=0;b<f.length;b++){var d=f[b];var a=Ext.create("InfinityMobile.view.desktop.SectionListOverlayItem",{sectionListText:d.name,sectionListPageNumber:d.pageNumber});g.add(a)}},sectionListClose:function(b){var a=this;b.hide()},toolbarSectionListPage:function(b,f){var e=this;var d=e.getSectionListOverlay();d.hide();var c=flatPlanData.pdfPages!=null&&flatPlanData.pdfPages[f-1]!=null?flatPlanData.pdfPages[f-1].pages[0].advertsAdded:0;var a=e.getCarousel();a.jumpToPage(parseInt(parseInt(f)+parseInt(c))-1)},disableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().disableEvents()}},enableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().enableEvents()}}},0,0,0,0,0,0,[InfinityMobile.controller,"ReaderToolbarController"],0));(Ext.cmd.derive("InfinityMobile.controller.ReaderMenuController",Ext.app.Controller,{config:{refs:{mainPanel:"#rootPanel",readerMenu:"readermenu",readerSections:"readermenusection",readerArchive:"readerarchive",readerMenuItem:"readermenuitem",readerMenuSectionItem:"readermenusectionitem",reader:"reader",layouttoolbar:"layouttoolbar",carousel:"infinitecarousel2d",readerToolbarBottom:"readertoolbarbottom",articlereadermenu:"articlereadermenu",articlescontainer:"articlescontainer"},control:{main:{showZones:"renderZones"},readerMenu:{close:"menuClose",loadShare:"menuLoadShare",loadSections:"menuLoadSections",loadSupplements:"menuLoadSupplements",loadZones:"menuLoadZones",loadQuickLinks:"menuLoadQuickLinks",loadPrivacy:"menuLoadPrivacy",sectionclick:"sectionClick",disableArticlesContainer:"disableArticlesContainer",enableArticlesContainer:"enableArticlesContainer",hideArticlesContainer:"hideArticlesContainer"},readerMenuItem:{menuPages:"menuPages",menuArchive:"menuArchive",menuSearch:"menuSearch",menuDownload:"menuDownload",menuAddNote:"menuAddNote",menuCreateClipping:"menuCreateClipping",menuBookmarks:"menuBookmark",menuGames:"menuGames",menuBreakingNews:"menuBreakingNews",menuObituaries:"menuObituaries",menuHowToUse:"menuHowToUse","menuItem menuHowToUse":"menuHowToUse",menuWhatsNew:"menuWhatsNew",menuHelp:"menuHelp","menuItem menuHelp":"menuHelp",menuDynamicArticles:"menuDynamicArticles",menuArticles:"menuArticles",menuPrint:"menuPrint",menuUser:"menuUser",supplementItem:"menuSupplement",quickLinkItem:"menuQuickLink",privacyLinkItem:"menuQuickLink","privacyLinkItem menuItem":"menuQuickLink","quickLinkItem menuItem":"menuQuickLink",zoneItem:"menuZoneClick","zoneItem menuItem":"menuZoneClick",menuTerms:"menuTerms","menuItem menuTerms":"menuTerms",menuAccount:"menuAccount",menuSectionsBtn:"menuSectionsBtn",menuZonesBtn:"menuZonesBtn",menuStoryPref:"menuStoryPref",specialSupplmentMenuItem:"loadSpecialSupplements"},mainPanel:{toolbarInfo:"menuHowToUse",toolbarClipping:"menuCreateClipping",toolbarPrint:"menuPrint",toolbarBookmarks:"menuBookmark",toolbarDownload:"menuDownload",toolbarArchive:"menuArchive"},readerSections:{initialized:"sectionInit",back:"sectionBack",sectionclick:"sectionClick"},readerMenuSectionItem:{sectionclick:"sectionClick"},readerArchive:{close:"closeArchive",enableArticlesContainer:"enableArticlesContainer"},readerToolbarBottom:{close:"closePages"},articlereadermenu:{loadShare:"menuLoadShare"},readerspecialsupplements:{showSupplements:"showSupplements",close:"closeSupplements"}}},menuInit:function(){var b="InfinityMobile.view.tablet.ReaderMenu";switch(currentProfile){case"phone":b="InfinityMobile.view.phone.ReaderMenu";break;case"tablet":default:b="InfinityMobile.view.tablet.ReaderMenu";break}var a=Ext.create(b,{});Ext.Viewport.add(a);a.show()},menuClose:menuDynamicArticles:returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},menuArchive:function(){var a=this;a.menuClose();a.renderArchive()},menuPages:function(){var a=this;a.menuClose();if(a.getArticlescontainer()==null){a.renderPages()}else{a.getArticlescontainer().pagesTabTap()}if(Ext.os.is.Phone){mainPanel.fireEvent("checkActivePageInToolbarBottom",a.getReaderToolbarBottom())}},menuSearch:function(){var a=this;mainPanel.fireEvent("showSearch","");a.menuClose()},menuAddNote:function(){var a=this;a.menuClose();mainPanel.fireEvent("addNote","")},menuCreateClipping:menuBookmark:menuSections:menuLoadShare:populateShare:function(e){var d=this;var f=settings.sharing.allSharing;for(var b=0;b<f.length;b++){var a=f[b];var c=settings.sharing[a];d.addShareItem(e,c.icon,c.link,a)}},addShareItem:function(b,l,e,k){var j=this;var m=j.getCarousel();var f=m.getActiveItem();var d=f.config.pageNo+1;if(f.xtype!="readeradvertpageviewer"){d=editionFlatplanData.reversePageMapper[d];var c=flatPlanData.pageMapper[d];var g=flatPlanData.pageGroups!=null&&flatPlanData.pageGroups[c-1]!=null&&flatPlanData.pageGroups[c-1].pages[0].advertsAdded!=null?flatPlanData.pageGroups[c-1].pages[0].advertsAdded:0;d-=g}else{d=null}if(e.indexOf("pinterest")!=-1){e=e.replace("{0}",encodeURIComponent("https://edition.pagesuite-professional.co.uk/get_image.aspx?w=280&eid="+editionguid+"&pnum="+d));e=e.replace("{1}","http://html5.pagesuite.com/desktop/share.aspx?edid="+editionguid+"&title="+encodeURIComponent(publicationName)+"&editionName="+encodeURIComponent(editionName)+"&pnum="+d);e=e.replace("{2}",encodeURIComponent(publicationName+" - "+editionName));var h=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:l,link:e,pnum:d,type:"pinterest",menu:"true"})}else{if(e.indexOf("mailto:")==-1){var a="http://html5.pagesuite.com/desktop/share.aspx?edid="+editionguid+"&title="+encodeURIComponent(publicationName)+"&editionName="+encodeURIComponent(editionName)+"&pnum="+d;var h=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:l,link:e,type:k,pnum:d,menu:"true"})}else{var h=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{message:publicationName+" - "+editionName,icon:l,link:e,type:k,pnum:d,menu:true})}}b.sharingContainer.add(h)},menuLoadSections:function(b,d,e){var f=this;var j=settings.bookmarks;var a=settings.menu.sectionList;if(settings.menu.hideSectionList==null&&j.bookmark.length>0){if(settings.menu.bookmarkText!=null){e.setHtml(language.menu.sections.toUpperCase())}for(var c=0;c<j.bookmark.length;c++){var g=j.bookmark[c];var h=Ext.create("InfinityMobile.view.ReaderMenuSectionItem",{name:g.name,pageNumber:g.pageNumber});d.add(h)}}else{e.setHidden(true)}},menuLoadSupplements:function(f,c,g){var e=settings.menu.supplements;if(e!=null&&e.supplement.length>0){g.setHtml(language.menu.supplements.toUpperCase());for(var d=0;d<e.supplement.length;d++){var a=e.supplement[d];if(a.guid!=publicationguid){var b=Ext.create("InfinityMobile.view.ReaderMenuItem",{cls:"supplementItem",text:a.name,guid:a.guid,editionguid:a.editionGuid});c.add(b)}}}else{g.setHidden(true)}},loadSpecialSupplements:function(a){var b=this;b.menuClose();var d="InfinityMobile.view.desktop.ReaderSpecialSupplements";var c=Ext.create(d,{supplements:a.config.supplements});Ext.Viewport.add(c);c.show()},showSupplements:closeSupplements:function(a){a.hide()},menuLoadZones:function(b,h,e){var j=this;var g=settings.menu.zones;var c=settings.zones;if(typeof isTribReader=="undefined"){isTribReader=false}if(g!=null&&c!=null&&c.zone.length>0&&!isTribReader){for(var d=0;d<c.zone.length;d++){var k=c.zone[d];var f="zoneItem";if(settings.newsday!=null){f+=" menuItem"}var a=Ext.create("InfinityMobile.view.ReaderMenuItem",{cls:f,text:k.name,guid:k.guid,editionguid:k.editionGuid});h.add(a)}}else{e.setHidden(true)}},menuZoneClick:function(c){var b=this;var a="";if(qs.localhost!=null&&qs.localhost=="true"){a="&localhost=true"}window.location.href="default.aspx?&edid="+c.config.editionguid+a;window.open(quickLink.config.url)},menuLoadQuickLinks:function(a,f,c){var h=this;var e=settings.menu.quickLinks;if(e!=null&&e.quickLink.length>0){for(var g=0;g<e.quickLink.length;g++){var d=e.quickLink[g];var j="quickLinkItem";if(settings.newsday!=null){j+=" menuItem"}var b=Ext.create("InfinityMobile.view.ReaderMenuItem",{cls:j,text:d.name,url:d.value});f.add(b)}}else{c.setHidden(true)}},menuLoadPrivacy:function(a,d,g){var f=this;var h=settings.menu!=null?settings.menu.privacy:null;if(h!=null&&h.privacyLinks.length>0){for(var e=0;e<h.privacyLinks.length;e++){var c=h.privacyLinks[e];var j="privacyLinkItem";if(settings.newsday!=null){j+=" menuItem"}var b=Ext.create("InfinityMobile.view.ReaderMenuItem",{cls:j,text:c.name,url:c.value});d.add(b)}}else{g.setHidden(true)}},menuSupplement:function(a){console.log(a.config);if(a.config.text=="Courant Community"){window.location.href="launch_community.aspx"}else{if(a.config.editionguid!=""){window.location.href="default.aspx?edid="+a.config.editionguid}else{window.location.href="default.aspx?pubid="+a.config.guid}}},menuQuickLink:menuDownload:menuGames:function(){var a=this;a.openLink("http://games.courant.com/")},menuBreakingNews:function(){var a=this;a.openLink("http://www.courant.com/breaking-news/")},menuObituaries:function(){var a=this;a.openLink("http://www.legacy.com/obituaries/hartfordcourant")},openLink:function(a){window.open(a)},renderPages:function(){var c=this;var a=c.getReaderToolbarBottom();var b=a.scrollerContainer;b.removeAll(true);var d={xtype:"readerpages"};b.add(d);a.setStyle({visibility:"visible"})},closePages:renderArchive:function(){var a=this;if(typeof trackReaderEvent!="undefined"){trackReaderEvent("archive")}a.disableArticlesContainer();a.hideArticlesContainer();var c="InfinityMobile.view.tablet.ReaderArchive";switch(currentProfile){case"phone":c="InfinityMobile.view.phone.ReaderArchive";break;case"desktop":c="InfinityMobile.view.desktop.ReaderArchive";break;case"tablet":if($(document).height()<700||$(document).width()<700){c="InfinityMobile.view.phone.ReaderArchive";break}default:c="InfinityMobile.view.tablet.ReaderArchive";break}var b=Ext.create(c,{});Ext.Viewport.add(b);b.show()},closeArchive:function(a){a.hide()},sectionInit:sectionClose:sectionBack:sectionClick:function(b){var a=this;b.element.dom.style.backgroundColor="#458fbb";setTimeout(function(){if(a.getReaderMenu()!=null){a.menuClose()}else{a.sectionClose()}var d=a.getCarousel();var c=flatPlanData.pdfPages[parseInt(b.pageNumber)-1].pages[0].pageNum-1;d.jumpToPage(c)},100)},menuHowToUse:function(){var a=this;a.menuClose();if(a.getArticlescontainer()!=null){a.getArticlescontainer().hide();a.getArticlescontainer().addCls("blur");a.getArticlescontainer().disableEvents()}showTrialScreen=false;if(!Ext.os.is.Desktop){var b="InfinityMobile.view.tablet.ReaderHelper";switch(currentProfile){case"phone":b="InfinityMobile.view.phone.ReaderHelper";break;case"tablet":default:b="InfinityMobile.view.tablet.ReaderHelper";break}var c=Ext.create(b,{});mainPanel.add(c);c.show();a.getCarousel().addCls("blur")}else{a.getLayouttoolbar().howToTap()}},menuWhatsNew:menuHelp:function(){var a=this;a.menuClose();window.location.href="mailto:"+settings.menu.contactUsEmailAddress},menuPrint:menuArticles:function(){var a=this;if(Ext.os.is.Phone){a.menuDynamicArticles()}else{if(a.getArticlescontainer().articleTabTap!=null){a.getArticlescontainer().articleTabTap()}else{a.grabArticles()}}a.menuClose()},grabArticles:function(){var c=this;c.articles=c.getApplication().getController("ArticleController").getArticles();var b=Ext.getStore("SettingStore");var e=[];if(b.data.items[0].raw.menu.bookmarks!=null){e=b.data.items[0].raw.menu.bookmarks.bookmark}if(Ext.os.is.Phone){var a=Ext.create("InfinityMobile.view.phone.ArticlesContainer",{articles:c.articles,sections:e})}else{var d="InfinityMobile.view.ArticlesContainer";if(Ext.os.is.Tablet){d="InfinityMobile.view.tablet.ArticlesContainer"}if(settings.newsday!=null){if(settings.newsday.customArticlesContainer!=null){d="InfinityMobile.view.tablet.ArticlesContainer"}}var a=Ext.create(d,{articles:c.articles,sections:e})}Ext.Viewport.add(a);a.show()},disableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().disableEvents()}},enableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().enableEvents()}},menuUser:function(){$.ajax({url:"logout.aspx?pubid="+publicationguid}).done(},menuTerms:function(){var b=this;if(Ext.os.is.Phone){var a=Ext.create("InfinityMobile.view.phone.readerTerms",{})}else{var a=Ext.create("InfinityMobile.view.desktop.readerTerms",{})}b.menuClose()},menuAccount:menuSectionsBtn:function(){var a=this;a.getMainPanel().fireEvent("toolbarSectionList");a.menuClose()},menuZonesBtn:menuStoryPref:hideArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().hide()}}},0,0,0,0,0,0,[InfinityMobile.controller,"ReaderMenuController"],0));(Ext.cmd.derive("InfinityMobile.controller.ReaderSearchController",Ext.app.Controller,{config:{stores:["SearchStore"],refs:{readerPanel:"reader",mainPanel:"#rootPanel",searchPanel:"search",searchItem:"searchItem",carousel:"infinitecarousel2d",articlescontainer:"articlescontainer"},control:{mainPanel:{toolbarSearch:"toolbarSearch",showSearch:"showSearch"},searchPanel:{close:"close",search:"search",searchCurrentEdition:"searchCurrentEdition",searchAllEditions:"searchAllEditions",showSearchDate:"showSearchDate",searchDate:"searchDate",enableArticlesContainer:"enableArticlesContainer"},searchItem:{click:"selectSearchItem"}}},init:close:function(a){a.hide()},toolbarSearch:function(){var a=this;a.showSearch("")},showSearch:function(b){var c=this;if(typeof trackReaderEvent!="undefined"){trackReaderEvent("headerNav",{type:"search icon"})}c.disableArticlesContainer();c.hideArticlesContainer();if(c.searchContainer!=null){c.searchContainer.show()}else{var d="InfinityMobile.view.tablet.ReaderSearch";switch(currentProfile){case"phone":d="InfinityMobile.view.phone.ReaderSearch";break;case"tablet":default:d="InfinityMobile.view.tablet.ReaderSearch";break}var a=Ext.create(d,{searchTerm:b});Ext.Viewport.add(a);a.show();c.searchContainer=a}},hideArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().hide()}},search:function(){var j=this;var c=j.getSearchPanel();var d=c.searchTerm;var m=encodeBase64(d);j.hideSearchDate();if(d!=""){var k=c.searchType;var e=c.searchResultsContainer;if(typeof trackReaderEvent!="undefined"&&!j.isSearching){trackReaderEvent("search",{search:d,searchType:k})}var f="../../searchjson.aspx?q="+encodeURIComponent(m)+"&eid="+editionguid+"&t="+k+"&p=0&rp=100&f=100&s=r&base64=true&version="+version;if(k=="d"){var h=c.dateFrom;var l=c.dateTo;if(typeof isTribReader!="undefined"){if(isTribReader){var g=h.split("-");h=g[2]+"-"+g[0]+"-"+g[1];var b=l.split("-");l=b[2]+"-"+b[0]+"-"+b[1]}}f="../../searchjson.aspx?q="+encodeURIComponent(m)+"&eid="+editionguid+"&t="+k+"&dfrom="+h+"&dto="+l+"&p=0&rp=100&f=100&s=r&base64=true&version="+version}var a=Ext.getStore("SearchStore");a.setProxy({url:f});a.data.items[0]=null;a.on("load",;j.isSearching=true;a.load();c.setMasked({xtype:"loadmask",message:language.search.searching})}},searchCurrentEdition:function(){var b=this;var a=b.getSearchPanel();a.searchType="e";b.search()},searchAllEditions:showSearchDate:hideSearchDate:searchDate:searchLoad:function(l){var k=this;console.log(l);var b=k.getSearchPanel();var o="Error while searching. Please try another search terms";var h="No results to display. Please try another search term";if(k.isSpanish()){o="Error en su bsqueda. Por favor intente nuevamente con otro trmino de bsqueda.";h="Error en su bsqueda. Por favor intente nuevamente con otro trmino de bsqueda."}if(b!=null){var c=b.searchResultsContainer;c.removeAll(true);if(l.data.items[0]!=null){if(l.data.items[0].raw.search!=null){var j=l.data.items[0].raw.search.results;var a=j["@hitCount"];if(j.result!=null){var f=j.result;if(a==1){var n=Ext.create("InfinityMobile.view.ReaderSearchItem",{pageNumber:f["@pnum"],name:f["@name"],editionGuid:f["@eid"],textString:f["#text"],searchType:b.searchType});c.add(n)}else{for(var d=0;d<f.length;d++){var e=f[d];var n=Ext.create("InfinityMobile.view.ReaderSearchItem",{pageNumber:e["@pnum"],name:e["@name"],editionGuid:e["@eid"],textString:e["#text"],searchType:b.searchType});c.add(n)}}}else{c.add({padding:20,html:h})}}else{c.add({padding:20,html:o})}}else{c.add({padding:20,html:o})}b.setMasked(false);if(Ext.os.is.Desktop&&Ext.browser.is.IE){if(b.searchResultsContainer!=null){var g=b.searchResultsContainer.getItems().items;var m=0;for(d in g){m+=$(g[d].element.dom).height()+1}b.scrollContainer.style.height=m+"px"}}}},isSpanish:function(){if(language.close.toLowerCase()=="cerrar"||language.go.toLowerCase()=="ir"){return true}else{return false}},selectSearchItem:function(d){var e=this;if(d.editionGuid==editionguid){var a=e.getCarousel();var c=parseInt(d.pageNumber)-1;c=flatPlanData.pdfPages!=null&&flatPlanData.pdfPages[c]!=null?flatPlanData.pdfPages[c].pages[0].pageNum-1:c;a.jumpToPage(c);e.loadPageSearchResults(c)}else{window.open("default.aspx?pubid="+publicationguid+"&edid="+d.editionGuid+"&pnum="+d.pageNumber,"_blank")}var b=e.getSearchPanel();e.close(b)},loadPageSearchResults:function(l){var h=this;var a="";var e="";if((l)%2==1){a=l+pageOffset;e=l+1+pageOffset}else{e=l+pageOffset;a=l-1+pageOffset}if(flatPlanData.pdfPages!=null){a=flatPlanData.pdfPages[a].pageNum;e=flatPlanData.pdfPages[e].pageNum}else{a=editionFlatplanData.pageMapper[a+1]-1;e=editionFlatplanData.pageMapper[e+1]-1}var b=editionFlatplanData.pageGroups;var j="";if(a>=0){var k=b[a].pages[0];j=h.retrievePageGuid(k)}var m="";if(e<=(b.length-2)){var g=b[e].pages[0];m=h.retrievePageGuid(g)}var d=h.getSearchPanel();var f=d.searchTerm;var c=Ext.getStore("SearchHighlightStore");c.leftPageNumber=a;c.rightPageNumber=e;c.leftPageGuid=j;c.rightPageGuid=m;c.term=f;c.setProxy({url:"../../searchhighlight.aspx?leftpageguid="+j+"&rightpageguid="+m+"&term="+f});c.load()},returnAdvertOrn d},retrievePagrn a},disableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().disableEvents()}},enableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().enableEvents()}}},0,0,0,0,0,0,[InfinityMobile.controller,"ReaderSearchController"],0));(Ext.cmd.derive("InfinityMobile.controller.ReaderDownloadController",Ext.app.Controller,{config:{refs:{mainPanel:"#rootPanel",reader:"reader",carousel:"infinitecarousel2d",readerDownload:"download",readerDownloadItem:"downloaditem",articlescontainer:"articlescontainer",readerDownloadScreen:"downloadscreen",articlescontainer:"articlescontainer"},control:{mainPanel:{showDownload:"showDownload"},readerDownload:{close:"closeDownload",selectAll:"selectAll",selectNone:"selectNone",download:"download",enableArticlesContainer:"enableArticlesContainer",loadPages:"loadPages"},readerDownloadItem:{toggleCheckBox:"toggleCheckBox"},readerDownloadScreen:{back:"closeDownloadScreen"}}},init:function(){},showDownload:function(){var b=this;b.disableArticlesContainer();b.hideArticlesContainer();var c="InfinityMobile.view.tablet.ReaderDownload";switch(currentProfile){case"phone":c="InfinityMobile.view.phone.ReaderDownload";break;case"desktop":c="InfinityMobile.view.desktop.ReaderDownload";break;case"tablet":default:c="InfinityMobile.view.tablet.ReaderDownload";break}var a=Ext.create(c,{});Ext.Viewport.add(a);a.show()},hideArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().hide()}},closeDownload:function(a){a.hide()},selectAll:function(b){var e=this;var a=e.getAllDownloadItems(b);for(var d=0;d<a.length;d++){var c=a[d];e.checkCheckBox(c)}},selec(c)}},getAllDownloadtems},download:function(d){var g=this;var c=g.getAllDownloadItems(d);var b="";for(var f=0;f<c.length;f++){var e=c[f];if(g.getCheckedStatus(e)){var a=e.getPageIndex();if(b!=""){b+="|"}b+=(a)}}if(b!=""){d.setMasked({xtype:"loadmask",message:"Scheduling PDFs"});g.downloadPDF(b)}if(typeof trackDaEvent!="undefined"){trackDaEvent("Download Edition","Digital Edition")}if(typeof trackReaderEvent!="undefined"){trackReaderEvent("download")}},downlos(g)},postPages:function(c){var b=this;var a="../../Queue_PDF.aspx";$.ajax({crossDomain:true,type:"POST",contentType:"text/xml",data:c,async:true,url:a,cache:false,success:function(e){var d=$(e).find("pdf").text();b.schedulePDF(d)},error:function(d){console.log(d)}})},schedulePDF:function(a){var b=this;$.ajax({crossDomain:true,type:"GET",async:true,url:a,cache:false,success:function(d){var c=b.getReaderDownload();c.setMasked(false);b.showDownloadScreen(a)},error:function(c){console.log(c)}})},showDownloadScreen:function(b){var c=this;var a=c.getReaderDownload();var d=Ext.create("InfinityMobile.view.ReaderDownloadScreen",{downloadUrl:b,startingOrientation:c.returnOrientation()});if(c.getArticlescontainer()!=null){c.getArticlescontainer().hideMe()}a.hide();mainPanel.add(d);mainPanel.setActiveItem(d)},closeDownloadSe()}},retrievePageGuid:function(b){var d=this;var a=d.getCarousel().getData();var c=a[(b-1)];thisActualPage=c.pages[0];return thisActualPage.image.split("/")[5]},loadPages:function(f,b){var h=this;var a=h.getCarousel().getData();for(var e=0;e<a.length;e++){var j=a[e].pages[0];if(j.type=="page"){var c=j.origPageNum!=null?j.origPageNum:j.pageNum;var g=j.pageIndex;var d=Ext.create("InfinityMobile.view.ReaderDownloadItem",{editionGuid:editionguid,pageNo:c,pageIndex:g});b.add(d)}}},checkCheckBox:function(a){a.editionLabelCheckBox.check()},getCheckedSed()},uncheckCheck()},toggleChe(a)}},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},disableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().disableEvents()}},enableArticlesConts()}}},0,0,0,0,0,0,[InfinityMobile.controller,"ReaderDownloadController"],0));(Ext.cmd.derive("InfinityMobile.controller.SubscribeController",Ext.app.Controller,{config:{refs:{main:"#rootPanel",subscribe:"subscribe",login:"login"},control:{main:{checkLogin:"checkLogin"},subscribe:{close:"subscribeClose",login:"subscribeShowLogin",digital:"subscribeDigital",premium:"subscribePremium"},login:{back:"loginBack",login:"tryLogIn"}}}n(){},checkLogin:function(){var a=this},showSubsow()},subscribeClose:function(a){a.hide()},subscribeDial")},subscribePre(a)},subscribe:function(a){var b=this;localStorage.setItem("login","someLogin");b.subscribeClose(a)},subscribeShowLogin:function(a){var b=this;b.subscribeClose(a);b.showLogin()},showow()},logibe()},closede()},tryLogIn:function(){console.log("Logging In")}},0,0,0,0,0,0,[InfinityMobile.controller,"SubscribeController"],0));(Ext.cmd.derive("InfinityMobile.controller.MediaController",Ext.app.Controller,{config:{refs:{main:"main",readerlinkobject:"readerlinkobject",readerarticleobject:"readerarticleobject",readerarticlepopover:"articleview",layouttoolbar:"layouttoolbar",articlecarousel:"articlecarousel",reader:"reader",readerCarousel:"infinitecarousel2d",readerpageviewer:"readerpageviewer",readervideo:"readervideo",readervideocontrols:"readervideocontrols",readerimage:"readerimage",imagegallery:"imagegallery",readerimagelinkobject:"readerimagelinkobject",readervideolinkobject:"readervideolinkobject",readerogalleryobject:"readerogalleryobject",readerovideoobject:"readerovideoobject",zoomSlider:"zoomSlider",sharepopup:"sharepopup",articlereader:"articlereader",articlescontainer:"articlescontainer",imagecarousel:"imagecarousel",lightboxlink:"lightboxlink",readermenutts:"readermenutts",dynamicimagegallery:"dynamicimagegallery",livenewsticker:"livenewsticker",sectionpopup:"sectionpopup",readerMenu:"readermenu"},control:{main:{addNote:"addNote",stopArticleTTS:"stopArticleTTS",trackArticleLinkClick:"trackArticleLinkClick",settingsLoaded:"settingsLoaded"},readerpageviewer:{loadMedia:"loadMediaPage",clearMedia:"clearMediaPage",keyControls:"keyControls",checkAudioOnToggle:"checkAudioOnToggle"},readerlinkobject:{linkClick:"linkClick",setupArticleTooltip:"setupArticleTooltip",hideArticleTooltip:"hideArticleTooltip",updateArticleTooltipPosition:"updateArticleTooltipPosition",popupLink:"popupLinkClick"},readerarticleobject:{articleClick:"articleClick",setupArticleTooltip:"setupArticleTooltip",hideArticleTooltip:"hideArticleTooltip",updateArticleTooltipPosition:"updateArticleTooltipPosition"},readerarticlepopover:{initialized:"readerArticleInitialize",close:"readerArticleClose",hide:"readerArticleHide",previous:"previousArticle",next:"nextArticle",sharepopup:"sharepopup",closeAndReset:"readerArticleCloseAndReset",setArticlePopoverHeight:"setArticlePopoverHeight",toggleTTS:"toggleTTS",playArticleTTS:"playArticleTTS",resumeArticleTTS:"resumeArticleTTS",pauseArticleTTS:"pauseArticleTTS",stopArtclesTTS:"stopArticleTTS",hidden:"onArticleHide",opened:"onArticleOpen",print:"articlePrint",jumpToComics:"jumpToComics",jumpToPuzzles:"jumpToPuzzles",selectTextMode:"selectTextMode",copyToClipboard:"copyToClipboard",sectionPopup:"sectionPopup",translateArticlePopover:"translateArticlePopover",translate:"translate",translateArticle:"translateArticle",readAloudMode:"readAloudMode"},layouttoolbar:{toggleTTS:"toggleTTS",playArticleTTS:"playArticleTTS",resumeArticleTTS:"resumeArticleTTS",pauseArticleTTS:"pauseArticleTTS",stopArtclesTTS:"stopArticleTTS"},readermenutts:{toggleTTS:"toggleTTS",playArticleTTS:"playArticleTTS",resumeArticleTTS:"resumeArticleTTS",pauseArticleTTS:"pauseArticleTTS",stopArtclesTTS:"stopArticleTTS"},readerarticlepopoveritem:{galleryClickFromArticle:"galleryClickFromArticle",ovideoclicked:"ovideoclicked",galleryClick:"galleryClick",fillPrintContainer:"fillPrintContainer",trackOLink:"trackOLink"},articlecarousel:{pagechange:"articleItemChange"},readervideo:{videoloaded:"videoLoaded",timeupdated:"videoTimeUpdated",checkActivePageVideo:"checkActivePageVideo"},readervideocontrols:{videoplay:"videoPlay",videofullscreen:"videoFullscreen"},readerimage:{fullscreenImage:"fullscreenImage",linkClick:"linkClick",setupArticleTooltip:"setupArticleTooltip",hideArticleTooltip:"hideArticleTooltip",updateArticleTooltipPosition:"updateArticleTooltipPosition"},imagegallery:{initialized:"galleryinitialized",close:"closegallery",bottomToolbar:"bottomToolbar"},readerimagelinkobject:{lightbox:"lightbox"},readervideolinkobject:{lightbox:"lightbox"},articlereaderitemlrg:{articleClick:"articleClick"},articlereaderitemsmall:{articleClick:"articleClick"},articlereaderitemmedwide:{articleClick:"articleClick"},articlereaderitemmedtall:{articleClick:"articleClick"},articlereaderitemmedwidetall:{articleClick:"articleClick"},articlereaderitemtopstoryitem:{articleClick:"articleClick"},articlereaderitemphone:{articleClick:"articleClick"},sharepopup:{loadShareIcons:"loadShareIcons"},sharepopupitem:{emailArticleShare:"emailArticleShare"},articlesectionitemimg:{articleClick:"articleClick"},articlesectionitem:{articleClick:"articleClick"},readeraudiomediaobject:{playAudio:"playAudio",pauseAudio:"pauseAudio",stopAudio:"stopAudio",checkActivePage:"checkActivePage"},readerogalleryobject:{galleryClick:"galleryClick"},readerogallery:{closeOGallery:"closeOGallery",ogalleryinitialized:"ogalleryinitialized",ogalleryinitializedArticle:"ogalleryinitializedArticle"},readerovideoobject:{ovideoclicked:"ovideoclicked"},readerovideo:{closeOVideo:"closeOVideo",oVideoError:"oVideoError",ovideoinitialized:"ovideoinitialized"},readerimagegallerythumb:{navigateGallery:"navigateGallery"},readerpuzzlepopoveritem:{puzzleArchive:"puzzleArchive",puzzlePrint:"puzzlePrint",puzzleShare:"puzzleShare",puzzleInteractive:"puzzleInteractive"},readerpuzzlearchive:{initialized:"archiveInitialized",back:"closeArchive",archivePageChange:"archivePageChange",archiveNextPage:"archiveNextPage",archivePreviousPage:"archivePreviousPage"},readerpuzzlearchiveitem:{loadPuzzleItem:"loadPuzzleItem"},readermediaobject:{triggerMedia:"triggerMedia"},articlePopoverInterstitial:{scaleInterstitial:"scaleInterstitial",scaleInterstitialOnDevice:"scaleInterstitialOnDevice"},lightboxlink:{close:"closeLightBoxLink"},dynamicimagegallery:{galleryVisible:"galleryVisible",galleryInvisible:"galleryInvisible"},sectionpopup:{loadSectionsPopup:"loadSectionsPopup"},readersectionpopupitem:{jumpToSectionPage:"jumpToSectionPage"},readaloudcontrols:{playArticleText:"playArticleText",pauseArticleText:"pauseArticleText",restartArticleText:"restartArticleText",stopArticleText:"stopArticleText"}}},selectTextMode:function(){var e=this;var d=e.articleCarousel.items.items;for(var c=0;c<d.length;c++){var b=d[c];var a=e.articleCarousel;if(b==e.articleCarousel.getActiveItem()){b.destoryAdvertMpuSlot()}if(!e.isPuzzleOrComic(b)){b.toggleToTextMode()}}var f=e.getReaderarticlepopover();if(f!=null){if(f.highlightMode){e.highlightDisable();f.highlightMode=false}else{e.highlightInstructions();f.highlightMode=true}}},isPuzzleOrComic:function(a){var b=this;var c=a.config.page.description;if(c.indexOf("Comics - ")!=-1||c.indexOf("Puzzles - ")!=-1){return true}else{return false}},init:function(){var a=this;a.startComic=0;a.startPuzzle=0;readAloud={type:"",status:"STOPPED",text:"",controls:null};a.mediaObjects=new Array();a.mediaStore=Ext.getStore("MediaStore");a.mediaStore.on({load:"mediaLoaded",scope:a});a.searchHighlightStore=Ext.getStore("SearchHighlightStore");a.searchHighlightStore.on({load:"searchHighlightLoaded",scope:a});if(a.getCookie("lang")){a.currentLang=a.getCookie("lang");if(a.currentLang=="es"&&a.getReaderarticlepopover()){a.getReaderarticlepopover().inappTrans.removeCls("spain")}}else{a.currentLang="en"}a.articleStore=Ext.getStore("ArticleStore");a.nextCounter=0;a.previousCounter=0;a.showAdAt=5;a.flippAdvertSetting={}},jumpToComics:function(a){var b=this;b.articleCarousel.jumpToPage(parseFloat(b.startComic))},jumpToPule))},checkTopBar:function(b,a){var c=a.getActiveItem();if(typeof isTribReader!="undefined"&&isTribReader){if(c.id.indexOf("readerarticlepopoveritem")!=-1){if(b.readAloudControls!=null&&b.readAloudMode&&window.SpeechSynthesisUtterance!=undefined){b.readAloudControls.show()}if(b.ttsToggle!=null&&window.SpeechSynthesisUtterance!=undefined){b.ttsToggle.show()}}else{if(b.readAloudControls!=null&&b.readAloudMode&&window.SpeechSynthesisUtterance!=undefined){b.readAloudControls.hide()}if(b.ttsToggle!=null&&window.SpeechSynthesisUtterance!=undefined){b.ttsToggle.hide()}}}},mediaLoaded:function(b){var c=this;var a=b.data.items[0].raw;b.media=a.media;c.setUniqueArticles(b);c.checkPuzzlesAndComics(b.media)},checkPuzzlesAndCak}}},setUniqueArticles:function(e){var f=this;var c=[];var b=[];var a=e.media.article;for(var d=0;d<a.length;d++){var g=a[d];if((uniquearticleindex=$.inArray(g.file,c))==-1){b.push(g);c.push(g.file);g.uniquearticleindex=(b.length-1)}else{g.uniquearticleindex=uniquearticleindex}}f.mediaStore.media.uniquearticle=b;f.mediaStore.media.articleguidarray=c},returnAdvertOrn d},loadMediaPage:function(b,a,g){var f=this;var d=Ext.getStore("MediaStore");var e=f.returnAdvertOffset(b.getPageNo());a=a-e;if(Ext.os.is.Desktop){}if(settings.reader.reverse!=null&&settings.reader.reverse=="true"){a=flatPlanData.pageGroups.length-a+1}f.clearAllExistingMedia(g);f.loadArticleMediaPage(d.media,a,g,b);f.loadImageMediaPage(d.media,a,g,b);var c=Ext.getStore("SettingStore");if(c.data.items[0].raw.leftSideAd!=null){}f.loadVideoMediaPage(d.media,a,g,b);f.loadVimeoMedia(d.media,a,g,b);f.loadAudioMedia(d.media,a,g,b);f.loadHtmlAnim(d.media,a,g);f.loadOGallery(d.media,a,g);f.loadOVideo(d.media,a,g);f.loadOLink(d.media,a,g);f.loadLinkMediaPage(d.media,a,g,b);f.mediaDiv=g;f.pageNumber=a},clearMedia(b)},clearAllExistingld)}},loadOLink:function(g,a,e){var d=this;for(var c=0;c<g.olink.length;c++){var b=g.olink[c];var h=parseInt(b.page);if(h<=a){if(h==a){var f=Ext.create("InfinityMobile.view.ReaderOLinkObject",{mediaObject:b,pageNumber:a});e.appendChild(f.element.dom)}}else{break}if(typeof f!="undefined"){d.mediaObjects.push(f)}}},loadOGallery:function(g,a,e){var d=this;for(var c=0;c<g.ogallery.length;c++){var b=g.ogallery[c];var h=parseInt(b.page);if(h<=a){if(h==a){var f=Ext.create("InfinityMobile.view.ReaderOGalleryObject",{mediaObject:b,pageNumber:a});e.appendChild(f.element.dom)}}else{break}if(typeof f!="undefined"){d.mediaObjects.push(f)}}},loadOVideo:function(g,a,e){var d=this;for(var c=0;c<g.ovideo.length;c++){var b=g.ovideo[c];var h=parseInt(b.page);if(h<=a){if(h==a){var f=Ext.create("InfinityMobile.view.ReaderOVideoObject",{mediaObject:b,pageNumber:a});e.appendChild(f.element.dom)}}else{break}if(typeof f!="undefined"){d.mediaObjects.push(f)}}},loadAudioMedia:function(b,k,g,h){var j=this;j.mediaFiles=[];h.audioObjects=[];if(b.audio!=null){for(var f=0;f<b.audio.length;f++){var m=b.audio[f];var c=parseInt(m.page);if(c<=k){if(k==c){var e=Ext.create("InfinityMobile.view.ReaderAudioMediaObject",{mediaObject:m,page:h});g.appendChild(e.element.dom);console.log(e);if(h.audioObjects!=null){h.audioObjects[h.audioObjects.length]=e}else{h.audioObjects=[];h.audioObjects[0]=e}var n=m.file;var d=n.substr(0,1);var a=n.substr(1,1);var l="http://source.pagesuite.com/media/"+d+"/"+a+"/"+n+".mp3";j.mediaFiles[j.mediaFiles.length]=l;if(typeof e!="undefined"){j.mediaObjects.push(e);e=null}}else{break}}}}},loadHtm)}}}},loadArticleMediaPage:function(b,l,g){var j=this;l=parseInt(l);var h=5;var e=h-1;var m=j.articleStore.allArticles;for(var f=0;f<b.article.length;f++){var d=b.article[f];var a=parseInt(d.page);var k=m[d.file];if(a<=l){if(l==a){var c=Ext.create("InfinityMobile.view.ReaderArticleObject",{mediaObject:d,pageNumber:l,articleIndex:d.uniquearticleindex,article:k});g.appendChild(c.element.dom)}}else{break}}},keyControls:function(){var d=this;var a=d.getReaderCarousel();var c=false;var b=false;window.onkeyup=function(f){f.stopPropagation();if(Ext.browser.is.Firefox&&f.keyCode==9){f.preventDefault()}if(f.keyCode==91){c=false}if(f.keyCode==37||f.keyCode==39){b=false}};window.onkeydown=function(g){if(Ext.browser.is.Firefox&&g.keyCode==9){g.preventDefault()}if($("#reg-overlay")[0]==null){if(g.keyCode==91){c=true}if($("#slider").val()>1){g.stopImmediatePropagation();if(g.keyCode==39){if(a.getActiveItem().getScrollable().getScroller().position.x+50<a.getActiveItem().getScrollable().getScroller().maxPosition.x){a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x+50)}else{a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().maxPosition.x)}}else{if(g.keyCode==37){if(a.getActiveItem().getScrollable().getScroller().position.x-50>0){a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x-50)}else{a.getActiveItem().getScrollable().getScroller().scrollTo(0)}}}}else{g.stopImmediatePropagation();if(g.keyCode==39){if(!c){if(!b){b=true;var f=!d.isFullscreenAdInView();if(f){d.getApplication().getController("PageTurnController").goRight()}}}}else{if(g.keyCode==37){if(a.getActiveItem().config.pageNo>=1){if(!c){if(!b){b=true;var f=!d.isFullscreenAdInView();if(f){d.getApplication().getController("PageTurnController").goLeft()}}}}}}}if(g.keyCode===38){if(a.getActiveItem().getScrollable().getScroller().position.y-50>0){a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x,a.getActiveItem().getScrollable().getScroller().position.y-50);if(a.getActiveItem().zoomMode!="fit"){d.getApplication().getController("ReaderController").showTop();if(a.getActiveItem().getScrollable().getScroller().position.y-30<a.getActiveItem().getScrollable().getScroller().maxPosition.y){d.getApplication().getController("ReaderController").showBottom()}else{d.getApplication().getController("ReaderController").hideBottom()}}}else{a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x,0);if(a.getActiveItem().zoomMode!="fit"){d.getApplication().getController("ReaderController").hideTop();d.getApplication().getController("ReaderController").showBottom()}}}if(g.keyCode===40){if(a.getActiveItem().getScrollable().getScroller().position.y+50<a.getActiveItem().getScrollable().getScroller().maxPosition.y){a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x,a.getActiveItem().getScrollable().getScroller().position.y+50);if(a.getActiveItem().zoomMode!="fit"){d.getApplication().getController("ReaderController").showBottom();if(a.getActiveItem().getScrollable().getScroller().position.y+30>0){d.getApplication().getController("ReaderController").showTop()}else{d.getApplication().getController("ReaderController").hideTop()}}}else{a.getActiveItem().getScrollable().getScroller().scrollTo(a.getActiveItem().getScrollable().getScroller().position.x,a.getActiveItem().getScrollable().getScroller().maxPosition.y);if(a.getActiveItem().zoomMode!="fit"){d.getApplication().getController("ReaderController").hideBottom();d.getApplication().getController("ReaderController").showTop()}}}}}},isFullscreenAdInView:function(){var c=this;if(settings.reader.interstitial!=null&&settings.reader.interstitial.dfpType=="fullscreen"){var d=$("body").children("div[draggable='false']");if(d.length>1){for(var b=0;b<d.length;b++){if(d[b].style!=null){var a=d[b].style.display;if(a!="none"){return true}else{return false}}}}}else{return false}},loadLinkMediaPage:function(a,g,d,e){var f=this;e.linkObjects=[];g=parseInt(g);if(g==0){f.loadLeftHandLinkMediaPage(d,e)}for(var c=0;c<a.link.length;c++){var h=a.link[c];var j=parseInt(h.page);if(j<=g){if(g==j){if(Ext.os.is.Desktop){if(h.x<0&&(g==1||g==0)){if(h.url!=null&&h.url.indexOf("?liveadvert=yes")!=-1){console.log(h);var b=Ext.create("InfinityMobile.view.ReaderLiveAdvertObject",{pageNumber:g,mediaObject:h,page:d,leftSideOverflow:true})}else{var b=Ext.create("InfinityMobile.view.ReaderLinkObject",{pageNumber:g,mediaObject:h,page:d,leftSideOverflow:true})}e.overflowMediaDiv.add(b)}else{if(h.url.indexOf("?liveadvert=yes")!=-1){console.log(h);var b=Ext.create("InfinityMobile.view.ReaderLiveAdvertObject",{pageNumber:g,mediaObject:h,page:d})}else{var b=Ext.create("InfinityMobile.view.ReaderLinkObject",{pageNumber:g,mediaObject:h,page:d})}d.appendChild(b.element.dom)}}else{if(h.url.indexOf("?liveadvert=yes")!=-1){console.log(h);var b=Ext.create("InfinityMobile.view.ReaderLiveAdvertObject",{pageNumber:g,mediaObject:h,page:d})}else{var b=Ext.create("InfinityMobile.view.ReaderLinkObject",{pageNumber:g,mediaObject:h,page:d})}d.appendChild(b.element.dom)}}}else{break}if(typeof b!="undefined"){f.mediaObjects.push(b);e.linkObjects.push(b)}}},loadLeftHandLinkMediom)}},loadImageMediaPage:function(e,p,j,k){var m=this;p=parseInt(p);j.imageObjects=[];var f=0;if(k.overflowMediaDiv!=null){k.overflowMediaDiv.removeAll()}for(var h=0;h<e.image.length;h++){var o=e.image[h];var q=parseInt(o.page);var r={};var c=0;for(var n=0;n<e.link.length;n++){var d=parseFloat(o.x)+parseFloat(o.width);var b=parseFloat(o.y)+parseFloat(o.height);var a=parseFloat(e.link[n].x)+parseFloat(e.link[n].width);var l=parseFloat(e.link[n].y)+parseFloat(e.link[n].height);if((parseFloat(e.link[n].x)>=parseFloat(o.x)&&parseFloat(e.link[n].x)<=parseFloat(d))&&(parseFloat(e.link[n].y)>=parseFloat(o.y)&&parseFloat(e.link[n].y)<=parseFloat(b))){r[c]=e.link[n];c++}}if(q<=p&&o.file!="808a2503-c3d8-43c7-a2a0-017e57123e46"){if(e.image[h].url!="http://LIGHTBOX"){if(p==q){if(Ext.os.is.Desktop){if(o.x<0&&(p==1||p==0)){var g=Ext.create("InfinityMobile.view.ReaderImageObject",{mediaObject:o,pageNumber:p,page:j,links:r,leftSideOverflow:true});k.overflowMediaDiv.show();k.overflowMediaDiv.add(g)}else{var g=Ext.create("InfinityMobile.view.ReaderImageObject",{mediaObject:o,pageNumber:p,page:j,links:r});j.appendChild(g.element.dom)}}else{var g=Ext.create("InfinityMobile.view.ReaderImageObject",{mediaObject:o,pageNumber:p,page:j,links:r});j.appendChild(g.element.dom)}f++}}else{if(p==q){console.log("CREATING IMAGE LINK OBJECT");var g=Ext.create("InfinityMobile.view.ReaderImageLinkObject",{mediaObject:o});j.appendChild(g.element.dom);f++;o.imageObject=g}}}else{break}if(typeof g!="undefined"){m.mediaObjects.push(g)}}},fullscreen)}})},galleryinitiary=a},closegaze()},loadVideoMediaPage:function(a,k,f,h){var j=this;k=parseInt(k);if(f.videoObjects==null){f.videoObjects=[];var b=1}else{var b=f.videoObjects.length}for(var d=0;d<a.video.length;d++){var g=a.video[d];var e=parseInt(g.page);if(a.video[d].param3!="LIGHTBOX"){if(e<=k){if(k==e){if(Ext.os.is.Desktop){if(g.x<0&&(k==1||k==0)){var c=Ext.create("InfinityMobile.view.ReaderVideoObject",{pageNumber:k,mediaObject:g,page:f,leftSideOverflow:true});h.overflowMediaDiv.show();h.overflowMediaDiv.add(c);h.mp4Objects[h.mp4Objects.length]=c}else{var c=Ext.create("InfinityMobile.view.ReaderVideoObject",{pageNumber:k,mediaObject:g,page:f});f.appendChild(c.element.dom);h.mp4Objects[h.mp4Objects.length]=c}}else{var c=Ext.create("InfinityMobile.view.ReaderVideoObject",{pageNumber:k,mediaObject:g,page:f});f.appendChild(c.element.dom);h.mp4Objects[h.mp4Objects.length]=c}b++;g.videoObject=c}}else{break}}else{if(k==e){var c=Ext.create("InfinityMobile.view.ReaderVideoLinkObject",{mediaObject:g});f.appendChild(c.element.dom);b++;g.videoObject=c}}if(typeof c!="undefined"){j.mediaObjects.push(c)}}},loadVimeoMedia:function(a,k,f,h){var j=this;k=parseInt(k);if(f.videoObjects==null){f.videoObjects=[];var b=1}else{var b=f.videoObjects.length}for(var d=0;d<a.vimeo.length;d++){var g=a.vimeo[d];var e=parseInt(g.page);if(e<=k){if(k==e){var c=Ext.create("InfinityMobile.view.ReaderVideoObject",{pageNumber:k,mediaObject:g,page:f});f.appendChild(c.element.dom);h.mp4Objects[h.mp4Objects.length]=c;b++;g.videoObject=c}}else{break}if(typeof c!="undefined"){j.mediaObjects.push(c)}}},videoLoaded:function(f){var d=this;var b=f.video.duration;var a=Math.floor(b/60);var e=Math.floor(b-(a*60));if(e<10){e="0"+e}var c=f.videoControls.totalTime;c.dom.innerHTML=a+":"+e},videoTimeUp:"+a},videalse},videoFullsalse},articleClick:function(a,b){var c=this;if(loggedIn.toLowerCase()!="true"){if(settings.subscription.pageRestriction!=null){if(a.pageNumber>=settings.subscription.pageRestriction.pages){}else{c.showArticlePopover(a,b)}}else{c.showArticlePopover(a,b)}}else{c.showArticlePopover(a,b)}},getSectiorn d},linkClick:function(h,e){var s=this;var n=this.getReaderCarousel();if(!isNaN(e)){var q=Ext.getStore("SettingStore");n.jumpToPage(e-1);var f=n.getActiveItem()}else{if(e.indexOf("mailto:")!=-1){window.location.href=e;if(typeof trackReaderEvent!="undefined"){var r=h.mediaObject.page;var g=s.getSectionName(r);trackReaderEvent("link",{url:e,pageNum:r,section:g})}}else{var b=e.split("//");var a=b[1];var p=h.pageNumber;var k="page"+p+a;var l=false;var d="";var m=Ext.getStore("MediaStore");if(a.indexOf("video")!=-1){var j=parseInt(a.replace("video",""))-1;if(m.media.video.length>j&&m.media.video[j].videoObject!=null){d=m.media.video[j].videoObject;l=true}}else{if(a.indexOf("image")!=-1){var o=parseInt(a.replace("image",""))-1;if(m.media.image.length>o&&m.media.image[o].imageObject!=null){d=m.media.image[o];l=true}}else{if(a.indexOf("animation")!=-1){var c=h.page.animObjects}}}if(d!=""){if(d.getHidden()){d.show()}}if(!l){if(typeof trackReaderEvent!="undefined"){var r=h.mediaObject.page;var g=s.getSectionName(r);trackReaderEvent("link",{url:e,pageNum:r,section:g})}window.open(e,"_blank")}}}},trackArticleLinkClick:function(a){var b=this;if(typeof trackReaderEvent!="undefined"){trackReaderEvent("link",{url:a.url,pageNum:a.pageNum,articleNumber:a.articleNumber,section:b.getSectionName(a.pageNum)})}},popupLink(a)}},closeLightBoll)}},showArticlePopover:function(e,l){var k=this;var b=e.config.articleIndex;var j=5;var n=k.mediaStore.media.article;var m="InfinityMobile.view.tablet.ReaderArticlePopover";switch(currentProfile){case"phone":m="InfinityMobile.view.phone.ReaderArticlePopover";var a=k.getArticlescontainer();if(a!=null){a.hide()}break;case"tablet":m="InfinityMobile.view.tablet.ReaderArticlePopover";var a=k.getArticlescontainer();if(a!=null){a.hide()}break;case"desktop":m="InfinityMobile.view.desktop.ReaderArticlePopover";break;default:m="InfinityMobile.view.tablet.ReaderArticlePopover";break}var h=Ext.create(m,{mediaController:k,articleguid:l,articleIndex:b,hasComics:k.foundComic,hasPuzzles:k.foundPuzzle});if(b==0){h.previousArticleButton.element.dom.style.visibility="hidden"}else{if(b==n.length-1){h.nextArticleButton.element.dom.style.visibility="hidden"}}var f=k.getReaderCarousel();f.fireEvent("notidle",f);if(!Ext.os.is.Desktop){if(articleMode=="dynamic"){mainPanel.add(h);mainPanel.setActiveItem(h)}else{Ext.Anim.run(f.getActiveItem(),{type:"fade",easing:"ease-in",m(h)}})}}var d=Ext.getStore("SettingStore");if(d.data.items[0].raw.tracking!=null){var c=d.data.items[0].raw.tracking.trackingType;if(c=="GA"){ga("set","page","/"+e.pageNumber);ga("send",{hitType:"pageview",title:publicationName+" - "+editionName});if(e.mediaObject==null){var g=e.headline}else{var g=e.mediaObject.description}ga("send","event","Open Article","click",g,e.pageNumber)}else{$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackOmniture.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})}}$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackPageSuite.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight});k.trackOpenArticle(e.config.articleIndex)},trackOpenArticle:function(c){var d=this;if(typeof trackReaderEvent!="undefined"){var e={};var a=d.mediaStore.media.article;if(typeof a!="undefined"){var f=a[c];var b="";if(f!=null&&f.byline!=null&&f.byline.trim()!=""){b=f.byline}else{if(f.ID3_Artist!=null){b=f.ID3_Artist}}e={pageNumArray:[f.page],pageNum:f.page,author:b,articleGuid:f.guid,headline:f.description,section:d.getSectionName(f.page),articleNumber:c,articleExternalId:"externalId" in f&&f.externalId!=null?f.externalId:""}}trackReaderEvent("openArticle",e)}},readerArticleInitialize:function(e){var l=this;var a=e.content;var o=l.mediaStore.media.article;var d=l.mediaStore.media.uniquearticle;l.startArticleOrientation=l.returnOrientation();var c=e.config.articleIndex;var j=d.length;for(var n in d){d[n].articleNumber=parseFloat(n)+1}var g=0;if(settings.newsday!=null){if(settings.newsday.showInterstitialInArticlePopover=="true"){d=jQuery.extend(true,[],l.mediaStore.media.uniquearticle);for(var h=c+5;h<d.length;h=h+5){var m="InfinityMobile.view.desktop.ArticlePopoverInterstitial";switch(currentProfile){case"phone":m="InfinityMobile.view.phone.ArticlePopoverInterstitial";break;case"tablet":m="InfinityMobile.view.tablet.ArticlePopoverInterstitial";break}d.splice(h,0,{isAdvert:true})}for(var h=c-5;h>0;h=h-5){var m="InfinityMobile.view.desktop.ArticlePopoverInterstitial";g++;switch(currentProfile){case"phone":m="InfinityMobile.view.phone.ArticlePopoverInterstitial";break;case"tablet":m="InfinityMobile.view.tablet.ArticlePopoverInterstitial";break}var b=Ext.create(m,{isAdvert:true});d.splice(h,0,{isAdvert:true})}c=c+g}}l.articleCarousel=Ext.create("InfinityMobile.view.ArticleCarousel",{width:"100%",height:"100%",pageNumber:c,offset:g,data:d,numberOfArticles:j,pageTemplate:function(s,u,q){articleguid=s.file;var t=l.articleStore.allArticles[articleguid];if(typeof isTribReader!="undefined"){if(isTribReader){if(s.description.indexOf("Puzzles")!=-1||s.description.indexOf("Comics")!=-1){return Ext.create("InfinityMobile.view.desktop.ReaderPuzzlePopoverItem",{pageNo:u,page:s})}else{if(Ext.os.is.Desktop){return Ext.create("InfinityMobile.view.desktop.ReaderArticlePopoverItem",{pageNo:u,page:q[u],article:t,highlightMode:e.highlightMode,readAloudMode:e.readAloudMode})}else{return Ext.create("InfinityMobile.view.ReaderArticlePopoverItem",{pageNo:u,page:q[u],article:t,highlightMode:e.highlightMode})}}}else{if(Ext.os.is.Desktop){if(this.getData()[u].isAdvert==null){return Ext.create("InfinityMobile.view.desktop.ReaderArticlePopoverItem",{pageNo:u,page:q[u],article:t,highlightMode:e.highlightMode})}else{var r=Ext.create(m,{isAdvert:true});r.pageNo=u;r.config.pageNo=u;return r}}else{if(s.description!=null&&(s.description.indexOf("Puzzles")!=-1||s.description.indexOf("Comics")!=-1)){return Ext.create("InfinityMobile.view.ReaderPuzzlePopoverItem",{pageNo:u,page:s})}else{if(this.getData()[u].isAdvert==null){return Ext.create("InfinityMobile.view.ReaderArticlePopoverItem",{pageNo:u,page:q[u],article:t,highlightMode:e.highlightMode})}else{var r=Ext.create(m,{isAdvert:true});r.pageNo=u;r.config.pageNo=u;return r}}}}}else{if(Ext.os.is.Desktop){if(this.getData()[u].isAdvert==null){return Ext.create("InfinityMobile.view.desktop.ReaderArticlePopoverItem",{pageNo:u,page:q[u],article:t,highlightMode:e.highlightMode})}else{var r=Ext.create(m,{isAdvert:true});r.pageNo=u;r.config.pageNo=u;return r}}else{if(this.getData()[u].isAdvert==null){return Ext.create("InfinityMobile.view.ReaderArticlePopoverItem",{pageNo:u,page:q[u],article:t,highlightMode:e.highlightMode})}else{var r=Ext.create(m,{isAdvert:true});r.pageNo=u;r.config.pageNo=u;return r}}}}});a.add(l.articleCarousel);l.trackArticleChange(c,"Article Click",l.articleCarousel.getActiveItem());var f=d[c];var k="Article";if(language!=null&&language.article!=null){k=language.article}e.articleText.setHtml(k+" "+((d[c].articleNumber))+" / "+j);if(!Ext.os.is.Phone){l.articleLoadShare(e,f)}if(trackOmniture=="True"){trackArticle(f.page,f.description)}l.articleCarousel.on("hide",function(){console.log("hide")});if(Ext.os.is.Desktop){l.articleKeyControl()}if(settings.newsday!=null){if(l.articleCarousel.getActiveItem()!=null){var p=l.articleCarousel.getActiveItem();if(p.loadAdvert!=null){p.loadAdvert()}if(p.loadAdvertMpu!=null){p.loadAdvertMpu()}}}if(typeof isTribReader!="undefined"){if(isTribReader){l.checkTopBar(e,l.articleCarousel)}}},articleKeyControl:function(){var c=this;var a=c.articleCarousel;var b=true;if(settings.reader.disableArticleCarousel!=null&&settings.reader.disableArticleCarousel=="true"){b=false}if(b){window.onkeyup=function(d){if($("#slider").val()==1){if(d.keyCode==39){a.jumpToPage(a.getActiveItem().config.pageNo+1)}else{if(d.keyCode==37){if(a.getActiveItem().config.pageNo>=1){a.jumpToPage(a.getActiveItem().config.pageNo-1)}}}}};window.onkeydown=function(d){if(d.keyCode===38){a.getActiveItem().content.element.dom.scrollTop-=20}if(d.keyCode===40){a.getActiveItem().content.element.dom.scrollTop+=20}}}else{window.onkeyup=function(d){};window.onke(d){}}},articleLoad()}}},populateShare:function(b,f){var h=this;var a="http://"+window.location.hostname+"/infinity/article_share.aspx?guid="+f.guid;var d=f.description;if(d==null){d=f.headline;a=f.url}var g=settings.sharing.allSharing;for(var e=0;e<g.length;e++){var j=g[e];var c=settings.sharing[j];h.addShareItem(b,c.iconDark,c.link,a,d)}},updateArticleShare:function(d,g){var j=this;var b=d.topBarShare;var h=b.query("readermenushareitem");if(g!=null){var c="http://"+window.location.hostname+"/infinity/article_share.aspx?guid="+g.guid;var e=g.description;if(e==null){e=g.headline;c=g.url}for(var f=0;f<h.length;f++){var a=h[f];a.updateMessage(e);a.updateUrl(c)}}},addShareItem:function(b,g,c,a,d){var f="";if(c.indexOf("mailto:")!=-1){f="email"}else{if(c.indexOf("facebook")!=-1){f="Facebook"}else{if(c.indexOf("twitter")!=-1){f="Twitter"}else{if(c.indexOf("pinterest")!=-1){f="Pinterest"}else{if(c.indexOf("google")!=-1){f="Google+"}else{if(c.indexOf("linkedin")!=-1){f="LinkedIn"}}}}}}var j=this.getArticlecarousel();var h=j.getActiveItem();var e=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:g,link:c,url:a,message:d,type:f,isArticle:true,articleItem:h});b.topBarShare.add(e)},sharepopup:function(d){var h=this;var j=h.getArticlecarousel();var g=j.getActiveItem();var c=h.mediaStore.media.uniquearticle;var j=h.getArticlecarousel();var b=j.getPageNumber();var f=c[b];var a="http://"+window.location.hostname+"/infinity/article_share.aspx?guid="+f.guid;var e=f.description;shareMenu=Ext.create("InfinityMobile.view.phone.ReaderSharePopup",{url:a,message:e,articleguid:d._articleguid})},loadShare(h)}},articlePrint:function(){var d=this;var c=d.getArticlecarousel();if(c.getActiveItem()._page.description.indexOf("Puzzles")!=-1||c.getActiveItem()._page.description.indexOf("Comics")!=-1){d.puzzlePrint(c.getActiveItem())}else{var b='<html><head><link rel="stylesheet" type="text/css" href="resources/css/article.css" /><style type="text/css" media="print">@page {size: auto;/* auto is the initial value */margin: 10mm;  /* this affects the margin in the printer settings */}.articleContentHtml5{font-size:'+fontEm+"px !important}</style><script>setText = function () {}<\/script></head><body>{{ARTICLEBODY}}</body></html>";b=b.replace("{{ARTICLEBODY}}",c.getActiveItem().content.getHtml());var a=Ext.create("InfinityMobile.view.PrintPreview",{doc:b,imgCheck:true,delayImages:50});Ext.Viewport.add(a);a.show()}},previousArticle:function(){var a=this;if(a.articleCarousel==null){a.articleCarousel=a.getArticlecarousel()}a.articleCarousel.previous()},nextArticle:function(){var a=this;if(a.articleCarousel==null){a.articleCarousel=a.getArticlecarousel()}a.articleCarousel.next()},articleItemChange:function(o,h,j){var k=this;console.log("ITEM CHANGE",o.destroyed);if(!o.destroyed){var d=k.getReaderarticlepopover();var n=k.mediaStore.media.article;var c=k.mediaStore.media.uniquearticle;var f=o.getActiveItem().config.page;if(h.config.page!=null){var l=h.config.page.page;var m=h.config.page.description}var a="Next Article";if(k.latestArticlePage!=null){if(o.getPageNumber()<k.latestArticlePage){a="Previous Article"}}else{if(o.getPageNumber()<j._pageNo){a="Previous Article"}}if(settings.newsday!=null){if(settings.newsday.showInterstitialInArticlePopover=="true"){}}k.trackArticleChange(o.getPageNumber(),a,h);var e=Ext.getStore("SettingStore");if(loggedIn.toLowerCase()!="true"){if(e.data.items[0].raw.subscription.pageRestriction!=null){console.log(o.getActiveItem().config.page.page,e.data.items[0].raw.subscription.pageRestriction.pages);if(o.getActiveItem().config.page.page>parseInt(e.data.items[0].raw.subscription.pageRestriction.pages)){o.jumpToPage(o.getActiveItem()._pageNo-1)}}}if(d.topBarShare!=null){k.updateArticleShare(d,f)}var g="Article";if(language!=null&&language.article!=null){g=language.article}if(d.config.isLive==null){if(o.getActiveItem().config.isAdvert==null){if(o.getActiveItem().config.page!=null){d.articleText.setHtml(g+" "+(o.getActiveItem().config.page.articleNumber)+" / "+o.config.numberOfArticles)}else{d.articleText.setHtml(g+" "+((o.getPageNumber())+1)+" / "+c.length)}}else{d.articleText.setHtml("Advertisement")}}else{if(k.getReaderarticlepopover().config.articles==null){d.articleText.setHtml(g+" "+((o.getPageNumber())+1)+" / "+k.getApplication().getController("ArticleController").liveArticles.length)}else{d.articleText.setHtml(g+" "+((o.getPageNumber())+1)+" / "+k.getReaderarticlepopover().config.articles.length)}}var e=Ext.getStore("SettingStore");if(e.data.items[0].raw.tracking!=null){var b=e.data.items[0].raw.tracking.trackingType;if(b=="GA"){ga("set","page","/"+o.getActiveItem()._pageNo);ga("send",{hitType:"pageview",title:publicationName+" - "+editionName});if(o.getActiveItem().article!=null){ga("send","event","Swipe Article","click",o.getActiveItem().article.headline,o.getActiveItem().article.pageNumber)}}else{if(b=="DA"){trackDaPageView(m,"Digital Edition")}else{$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackOmniture.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight+stageString})}}}else{if(typeof isTribReader!="undefined"&&isTribReader==true){k.trackTribune(l,m)}}$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackPageSuite.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight});if(window.speechSynthesis!=undefined&&d.readAloudMode){k.stopReading()}if(settings.newsday!=null){if(h.isAdvert==null){if(h.loadAdvert!=null){h.loadAdvert()}if(h.loadAdvertMpu!=null){h.loadAdvertMpu()}}}else{if(settings.reader.popupAdvertMpu!=null&&settings.reader.popupAdvertMpu.type=="dfp"){if(j.destoryAdvertMpuSlot!=null){j.destoryAdvertMpuSlot()}if(h.mode=="html"&&h.loadAdvertMpu!=null){h.loadAdvertMpu()}else{if(h.mode=="frame"&&h.loadIframeAdvertMpu!=null){h.loadIframeAdvertMpu()}}}}if(settings.newsday!=null){if(typeof h.getPageNo=="function"&&h.config.page.articleNumber==1){d.previousArticleButton.element.dom.style.visibility="hidden"}else{d.previousArticleButton.element.dom.style.visibility=""}if(typeof h.getPageNo=="function"&&h.config.page.articleNumber==k.articleStore.data.items[0].raw.articles.length){d.nextArticleButton.element.dom.style.visibility="hidden"}else{d.nextArticleButton.element.dom.style.visibility=""}}else{if(h.getPageNo!=null&&h.getPageNo()==0){d.previousArticleButton.element.dom.style.visibility="hidden"}else{d.previousArticleButton.element.dom.style.visibility=""}if(h.getPageNo!=null&&h.getPageNo()==n.length-1){d.nextArticleButton.element.dom.style.visibility="hidden"}else{d.nextArticleButton.element.dom.style.visibility=""}}if(typeof isTribReader!="undefined"){if(isTribReader){k.checkTopBar(d,k.articleCarousel);if(d.highlightMode){}}}if(Ext.os.is.Android||currentProfile=="desktop"){k.populatePrintContainerAndroid()}if(!!h&&!!h.runFlipp){h.runFlipp()}}},populatePrintContainerAndroid:function(){var c=this;var f=mainPanel.getActiveItem();if(currentProfile!="desktop"){if(f.config.viewType!=null&&f.config.viewType=="reader"){}else{var b=c.getArticlecarousel();var e=b.getActiveItem();var a=e.config.page;if(a.description.indexOf("Puzzles")!=-1||a.description.indexOf("Comics")!=-1){c.prepPuzzlePrintAndroid(e)}else{c.prepArticlePrintAndroid()}}}else{var d=c.getReaderarticlepopover();if(d!=null){var b=c.getArticlecarousel();var e=b.getActiveItem();var a=e.config.page;if(a!=null){if(a.description.indexOf("Puzzles")!=-1||a.description.indexOf("Comics")!=-1){c.prepPuzzlePrintAndroid(e)}else{c.prepArticlePrintAndroid()}}}}},prepPuzzlePrintAndroid:function(d){var a=this;if(d.printImage!=null){var c=d.printImage.dom.src;if(c!=null){c=c.replace("http://origin.misc.pagesuite.com","https://misc.pagesuite.com")}var b="<img class='puzzleImage' src='"+c+"' />";b="<img src='"+c+"' style='position:absolute;width:100%;height:100%;object-fit: contain;' />";a.writePrintHtml(b)}else{if(d.config.page!=null&&d.config.page.ID3_Title!=null&&d.config.page.ID3_Title!=""){a.writePrintHtml("<img src='"+d.config.page.ID3_Title+"' style='position:absolute;width:100%;height:100%;object-fit: contain;' />")}else{a.writePrintHtml("")}}},prepArticlePrintAndroid:function(){var e=this;var d=e.getArticlecarousel();var b="phoneArticle";if(currentProfile=="tablet"){b="tabletArticle"}if(d.getActiveItem().content!=null){var a="<div class='"+b+"'>"+d.getActiveItem().content.getHtml()+"</div>";var c="<style>.printContainer .articleContentHtml5, .articleContent{font-size:"+fontEm+"px !important}</style>"+a}else{var c=""}c=c.replace(/<div*[\sa-zA-Z=\"\'\-0-9:;]* class=[\"\']mpuAdvert[\"\']\s?><\/div>/g,"").replace(/<div\sid\=[\"\']ext-readerarticlepopoveritem-[0-9]*advert[\"\'][a-zA-z0-9\-\=\:\;\s\'\"]*><\/div>/g,"");c=c.replace(/<div\sid\=[\"\']flipp-div-ext-readerarticlepopoveritem-[0-9]*[\"\'][a-zA-z0-9\-\=\:\;\s\'\"]*>.*<\/div>/g,"");e.writePrintHtml(c)},fillPrintContd()}},writePrintHtml:function(c){var d=this;var b=$(".printContainer")[0];if(c!=null){c=c.replace("http://origin.misc.pagesuite.com","https://misc.pagesuite.com")}b.innerHTML=c;if(Ext.os.is.Android&&currentProfile=="phone"){var a=$(b).find(".articleContentHtml5")[0];if(a!=null){$(a).addClass("printAndroid")}}},trackArticleChange:function(d,j,e){var h=this;if(typeof trackReaderEvent!="undefined"&&!e.isAdvert){var l=h.mediaStore.media.article;thisArticle=l[d];var f=e.config.page.page;thisEditionPage=editionFlatplanData.pageGroups[f-1].pages[0];var a="";var c=h.mediaStore.media.allArticles;var k=l[thisArticle.file];if(k!=null){a=k.author}else{if(e.article!=null&&e.article.byline!=null&&e.article.byline.trim()!=""){a=e.article.byline}else{if(thisArticle.ID3_Artist!=null){a=thisArticle.ID3_Artist}}}if(settings.newsday!=null){a=e.article.byline;if(e.article.reporters!=null){for(var b in e.article.reporters){a+=", "+e.article.reporters[b].name}}}var g={pageNum:thisEditionPage.pageNum,pageName:thisEditionPage.pageName,description:thisArticle.description,author:a,type:j,articleGuid:thisArticle.guid,headline:e!=null&&e.article!=null?e.article.headline:thisArticle.description,section:h.getSectionName(thisEditionPage.pageNum),articleExternalId:"externalId" in thisArticle&&thisArticle.externalId!=null?thisArticle.externalId:""};trackReaderEvent("article",g)}},trackTr,b)}},readerArticleClose:function(d){var g=this;var e=g.getReader();var a=g.getReaderCarousel();var m=a.getItems().items;var l=a.getPageNumber()+1;var n=g.getArticlecarousel();var k=true;if(n!=null){if(n.getActiveItem().config.page!=null){var c=n.getActiveItem().config.page.page;c=flatPlanData.pdfPages!=null&&flatPlanData.pdfPages[c-1]!=null?flatPlanData.pdfPages[c-1].pages[0].pageNum:c}else{k=false}}try{if(localStorage.getItem("returnToPage"+publicationguid)!=null){if(localStorage.getItem("returnToPage"+publicationguid)=="false"){k=false}}}catch(f){}d.highlightMode=false;if(k){if(Ext.os.is.Desktop){var j=l;var h=j;if(a._mode=="double"){var h=g.returnLandscapePageNo(l)}if(j!=c&&h!=c){a.jumpToPage(c-1)}Ext.Viewport.remove(d);if(a._mode=="double"&&a._zoomMode=="fit"){g.getApplication().getController("PageTurnController").setupKeys()}else{g.keyControls()}}else{if(Ext.os.is.Phone){if(g.getArticlereader()==null){if(d.isLive==null){var j=l;var h=j;if(g.returnOrientation()=="landscape"&&a._mode=="double"){var h=g.returnLandscapePageNo(l)}if(l!=c&&h!=c){a.jumpToPage(c-1)}}}mainPanel.remove(d,true);if(articleMode=="dynamic"){mainPanel.setActiveItem(g.getArticlereader())}var b=g.getArticlescontainer();if(b!=null){b.element.dom.style.visibility="visible"}}else{var b=g.getArticlescontainer();var j=l;var h=j;if(d.isLive==null){if(g.returnOrientation()=="landscape"&&a._mode=="double"){var h=g.returnLandscapePageNo(l)}if(b!=null){b.element.dom.style.visibility="visible"}if(articleMode!="dynamic"){mainPanel.setActiveItem(e);mainPanel.remove(d,true);if(l!=c&&h!=c){a.jumpToPage(c-1)}}else{if(g.getArticlereader()==null){if(l!=c&&h!=c){a.jumpToPage(c-1)}}}}mainPanel.remove(d,true);mainPanel.setActiveItem(g.getArticlereader())}}}else{d.destroy()}if((typeof isTribReader!="undefined"&&isTribReader)&&window.speechSynthesis!=null){g.stopReading()}a.getActiveItem().fireEvent("setupPrintContainer",a.getActiveItem())},onArticleOpen:function(){var b=this;if(b.getLayouttoolbar()!=null){var a=b.getLayouttoolbar().ttsToggle}else{var a=null}b.onArticleHide(a)},onArticleHide:function(a){var b=this;if(window.speechSynthesis!=undefined&&(typeof isTribReader!=undefined&&isTribReader)){b.stopReading()}},readerArticleHide:function(b){var a=this;if(Ext.os.is.Desktop){if(articleMode=="dynamic"){a.getApplication().getController("ArticleController").readerarticlehide()}else{a.keyControls()}}else{}},returnLandscapePa-1}},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},puzzleArchive:function(f){var c=this;console.log("puzzleArchive");var c=this;var b=c.getArticlecarousel();var e=b.getActiveItem();if(currentProfile=="desktop"){var d="InfinityMobile.view.desktop.ReaderPuzzleArchive"}else{var d="InfinityMobile.view.ReaderPuzzleArchive"}var a=Ext.create(d,{puzzleArchiveParent:e});e.content.add(a);e.content.setActiveItem(a);e.bottomBar.setHeight(0)},archiveInitiag"})},puzzleArchiveStoreLoad:function(f){var g=this;var h=f.puzzleArchive;var d=f.data.items[0].raw;if(d.archive!=null){h.archiveLength=d.archiveLength;for(var e=h.location;e<h.location+9;e++){if(e<d.archive.length){var l=d.archive[e];var j=Ext.create("InfinityMobile.view.ReaderPuzzleArchiveItem",{image:l.image,text:l.name,mediaobject:l.guid,puzzleArchive:h})}h.container.add(j)}var a=h.archiveLength/10;if(a>=9){for(var k=1;k<10;k++){var c=Ext.create("InfinityMobile.view.ReaderArchivePageButton",{pageNo:k,puzzleArchive:h});h.pagesControl.add(c)}}else{for(var k=1;k<a+1;k++){var c=Ext.create("InfinityMobile.view.ReaderArchivePageButton",{pageNo:k,puzzleArchive:h});h.pagesControl.add(c)}}}h.page=1;h.pages=a;var b=g.getReaderarticlepopover();b.setMasked(false)},loadPuzzleItem:function(e){var d=this;var b=e.config.puzzleArchive;var a=b.config.puzzleArchiveParent;var c=a.content;a.articleguid=e.config.mediaobject;a.getContent();a.content.remove(b);a.content.setActiveItem[c];a.element.down(".x-innerhtml").dom.style.height="";a.bottomBar.show();a.bottomBar.setHeight(60)},closeArchive:function(b){var c=this;var a=c.getArticlecarousel();var d=a.getActiveItem();d.content.remove(b);d.content.setActiveItem[0];d.bottomBar.setHeight(60)},puzzlePrint:function(f){var e=this;if(Ext.os.is.Desktop){var b=f.element.down("img").dom.src;var c="print.aspx?edid="+editionguid+"&type=puzzle&url="+encodeURIComponent(b);window.open(c)}else{var b=f.element.down("img").dom.src;var d="<img src='"+b+"' style='max-width:21cm; max-height:26.7cm' />";var a=Ext.create("InfinityMobile.view.PrintPreview",{doc:d});Ext.Viewport.add(a);a.show()}},puzzle100)},puzzleInteractive:function(c){var a=this;console.log("puzzleInteractive");var b="http://games.courant.com/gamedetails/daily-crossword/";if(settings.menu.gamesLink!=null){b=settings.menu.gamesLink}window.open(b)},bottomTow()}},clice(a)},addNote:function(){var b=this;var c=b.getReaderCarousel();var d=c.getActiveItem();var a=Ext.create("InfinityMobile.view.StickyNote",{pageNo:d.config.pageNo+1});d.mediaDiv.appendChild(a.element.dom)},lightbox:function(c,e,a){var b=this;var d=Ext.create("InfinityMobile.view.ReaderLightbox",{mediaObject:e,mediaType:a});Ext.Viewport.add(d);d.show()},createClir=h}},clippings})},DeleteClipngs)},gallerye()}},galleryClickFromArticle:function(c,a,e){var d=this;if(Ext.os.is.Desktop){var b=Ext.create("InfinityMobile.view.desktop.ReaderOGallery",{images:a,article:e,obj:c})}else{var f="InfinityMobile.view.ReaderOGallery";switch(currentProfile){case"tablet":case"largetablet":f="InfinityMobile.view.tablet.ReaderOGallery";break}var b=Ext.create(f,{images:a,article:e,obj:c})}Ext.Viewport.add(b);b.show();if(d.getArticlescontainer()!=null){d.getArticlescontainer().hideMe()}},ovideoclicked:function(c,b){var d=this;var a=Ext.create("InfinityMobile.view.ReaderOVideo",{url:b,obj:c});Ext.Viewport.add(a);a.show();if(d.getArticlescontainer()!=null){d.getArticlescontainer().hideMe()}},playay()},pausese()},stope=0}},searchHighlightLa)}}},searchHighlightPage:function(b,h,k,a){var g=this;var f;if(currentProfile=="desktop"){var j=k.getImageContainer(flatPlanData.pageMapper[h+1-pageOffset]);if(j!=null){f=j.mediaDiv}else{f=null}}else{f=k.returnMediaContainer(h+1)}if(f!=null){if(a!=null&&a.length!=null){for(var d=0;d<a.length;d++){var e=a[d];if(e["@side"]==b){e.x=e["@xpos"];e.y=""+(parseFloat(e["@ypos"]));e.width=e["@width"];e.height=e["@height"];e.backgroundColor="ffff00";e.depthIndex=1;e.backgroundAlpha=50;var c=Ext.create("InfinityMobile.view.ReaderMediaObject",{mediaObject:e,pageNumber:h,cls:"searchHighlight"});f.appendChild(c.element.dom)}}}else{var e=a;if(e!=null&&e["@side"]==b){e.x=e["@xpos"];e.y=""+(parseFloat(e["@ypos"]));e.width=e["@width"];e.height=e["@height"];e.backgroundColor="ffff00";e.depthIndex=1;e.backgroundAlpha=50;var c=Ext.create("InfinityMobile.view.ReaderMediaObject",{mediaObject:e,pageNumber:h,cls:"searchHighlight"});f.appendChild(c.element.dom)}}}},closeOGale"}},closeOVideo:function(b){var a=this;b.destroy();if(a.getArticlescontainer()!=null){a.getArticlescontainer().element.dom.style.visibility="visible"}},readerArticleCloseAndReset:function(d,a){var c=this;c.readerArticleClose(d);var b=c.returnOrientation();if(b!=c.startArticleOrientation){c.getReaderCarousel().onResize(null)}},emailArticleguid},navigateGam(a)},setupArticleTooltip:function(d){var a=this;var b=a.getReaderCarousel();if(b!=null){var c=b.getActiveItem();if(c!=null){c.tooltip.setHtml('<div style="position:absolute;" class="articleTooltip">'+d+"</div>");c.tooltip.show()}}},hideArticleTooltip:function(a){var b=this;var c=b.getReaderCarousel();if(c!=null){var d=c.getActiveItem();if(d!=null&&d.tooltip!=null){d.tooltip.hide()}}},updateArticleTooltipPosition:function(j){var k=this;var l=k.getReaderCarousel();var g=0;if((typeof isTribReader!="undefined"&&isTribReader==true)||settings.reader.enableReaderPadding=="true"){g=150}if(settings.reader.wrapAd!=null){g=180}var d=0;if(settings.reader!=null&&settings.reader.bannerAd!=null&&settings.reader.bannerAd.position=="top"){var f=Ext.Viewport.query("readerbannerad");if(f.length>0){d=f[0].getHeight()}}if(l!=null){var h=l.getActiveItem();if(h!=null){if(j.pageX<($(document).width()/2)){var b=(j.pageX+h.scroller.position.x+20-g);var a=(j.clientY+h.scroller.position.y-40)-d;var c="translate3d("+b+"px, "+a+"px, 0) scale3d(1,1,1)";h.tooltip.element.dom.style.webkitTransform=c;h.tooltip.element.dom.style.MozTransform=c;h.tooltip.element.dom.style.msTransform=c;h.tooltip.element.dom.style.transform=c}else{var b=(j.clientX+h.scroller.position.x-(h.tooltip.element.dom.scrollWidth+15)-g);var a=(j.clientY+h.scroller.position.y-40)-d;var c="translate3d("+b+"px, "+a+"px, 0) scale3d(1,1,1)";h.tooltip.element.dom.style.webkitTransform=c;h.tooltip.element.dom.style.MozTransform=c;h.tooltip.element.dom.style.msTransform=c;h.tooltip.element.dom.style.transform=c}}}},setArticlePopoverHt()}},checkActivePage:function(d){var b=this;var c=b.getReaderCarousel();if(c!=null){if(c.getActiveItem().getPageNo()==d.page.getPageNo()){if(d.mediaObject.autoPlay=="true"){d.playSound()}}else{if(c._mode=="double"){var a=c.getActiveItem().getPageNo()+1+((c.getActiveItem().getPageNo())%2);if(a==d.mediaObject.pageNo){if(d.mediaObject.autoPlay=="true"){d.playSound()}}}}}},checkActivePageVideo:function(b){var c=this;var d=c.getReaderCarousel();if(d!=null){if(d.getActiveItem().getPageNo()+1==b.mediaObject.page){if(b.mediaObject.autoPlay=="true"){if(b.videoType=="youtube"){b.playVideo()}else{b.video.play()}}}else{if(d._mode=="double"){var a=d.getActiveItem().getPageNo()+1+((d.getActiveItem().getPageNo())%2);if(a==b.mediaObject.page){if(b.mediaObject.autoPlay=="true"){if(b.videoType=="youtube"){b.playVideo()}else{b.video.play()}}}}}}},archivePageChange:function(b,a){var e=this;b.location.location=(a*10);var c=b.config.puzzleArchiveParent.getPage().guid;$.ajax({url:"../puzzle_archive.aspx?guid="+c+"&beginning="+((a-1)*10)+"&end="+(((a-1)*10)+9),suge=a}});var d=e.getReaderarticlepopover();d.setMasked({xtype:"loadmask",message:"Loading"})},puzzleArchiveStoreLoadPageClse)},archiveNextPage:function(a){var b=this;if(a.page!=null){if(a.page<a.pages){b.archivePageChange(a,a.page+1)}}},archivePreviou1)}}},triggerMedia:function(b){var d=this;for(var c in d.mediaObjects){if(b==d.mediaObjects[c].mediaObject.animID){var a=d.mediaObjects[c];if(a.mediaObject.appear=="TRIGGER"){a.element.dom.style.visibility="";a.appearAnim();switch(a.mediaType){case"video":if(Ext.os.is.Desktop){if(a.mediaObject.autoPlay=="true"){a.playVideo()}}break}}else{switch(a.mediaType){case"video":a.playVideo();break}}break}}},playArticleTTS:function(o,j){var u=this;o.status="PLAYING";if(j){if(j=="noicon"){}else{if(j=="na"){o.addCls("playing")}else{j.addCls("playing")}}}if(currentProfile=="desktop"){var b=u.getLayouttoolbar();if(b!=null){b.ttsToggle.addCls("playing");b.ttsToggle.status="PLAYING"}var m=u.getReaderMenu();if(m!=null){m.menuLayout.getComponent("editionOptionsSection").getComponent("menuTTS").ttsicon.addCls("playing")}ttsFlag.status="PLAYING"}if(window.speechSynthesis.speaking==true){window.speechSynthesis.cancel()}var l="";if(o.xtype=="layouttoolbaricon"||o==ttsFlag){var a=u.getReaderCarousel();var c="?";var e=0;if(settings.leftSideAd!=null){e=1}if(u.returnOrientation()=="portrait"||a.getMode()!="double"){var h=a.getActiveItem();var q=h.getPageNo();c+="dpsmode=single";if(typeof editionFlatplanData!="undefined"&&editionFlatplanData!=null){var d=editionFlatplanData.pageGroups[q+e];var n=u.retrievePageGuid(d.pages[0].image);c+="&pageguid="+encodeURIComponent(n);$.ajax({url:"../get_page_text.aspx"+c,async:false,success:function(v){u.speak(v,o,j)}})}}else{var h=a.getActiveItem();var q=h.getPageNo();c+="dpsmode=double";if(typeof editionFlatplanData!="undefined"&&editionFlatplanData!=null){var d=editionFlatplanData.pageGroups[q+e];var n=d.pages[0].guid;if(q%2==1){c+="&leftguid="+encodeURIComponent(n);var s=editionFlatplanData.pageGroups[q+1+e];if(s!=null){var f=u.retrievePageGuid(s.pages[0].image);c+="&rightguid="+encodeURIComponent(f)}}else{c+="&rightguid="+encodeURIComponent(n);var k=editionFlatplanData.pageGroups[q-1+e];if(k!=null){var r=u.retrievePageGuid(k.pages[0].image);c+="&leftguid="+encodeURIComponent(r)}}$.ajax({url:"../get_page_text.aspx"+c,async:true,suo,j)}})}}}else{if(u.getArticlecarousel().getActiveItem().articleText){l=u.getArticlecarousel().getActiveItem().articleText;u.speak(l,o,j)}else{if(u.getArticlecarousel().getActiveItem().article){var g=u.getCurrentArticle();var t=g.body;var p=document.createElement("textarea");p.innerHTML=t;var t=p.value;l=g.headline+". "+g.subHeadline+". "+g.byline+". "+t;u.speak(l,o,j);delete p}else{if(u.getArticlecarousel().getActiveItem().initialConfig.page.headline!=null){var g=u.getArticlecarousel().getActiveItem().initialConfig.page;l=g.headline+". "+g.subHeadline+". "+g.byline+". "+g.body;u.speak(l,o,j)}else{u.stopArticleTTS(o,j)}}}}},retrievePag)[5]},resumeArtic(b)}},pauseArticse()},stopArticel()},getCurrentAricle},callbackArtic+a)}},getPaga)})},speak:function(f,b,a){var e=this;f=f.split("'").join("\u2018").replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/\s\s+/g," ").trim();if(!f.startsWith("<<Error>>")){if(f.length>200&&Ext.os.is.Android){sentences=f.split(". ");for(i=0;i<sentences.length;i++){sentence=sentences[i];audio=new SpeechSynthesisUtterance(sentence);if(i==sentences.length-1){audio.onend=function(){b.status="FINISHED";if(a){if(a=="noicon"){}else{if(a=="na"){b.removeCls("playing")}else{a.removeCls("playing")}}}}}window.speechSynthesis.speak(audio)}}else{var d=new SpeechSynthesisUtterance();d.text=f;d.voice=window.speechSynthesis.getVoices()[0];if(typeof isTribReader!="undefined"&&isTribReader){d.lang="en-US"}else{if(settings.tts!=null&&settings.tts.language!=null){d.lang=settings.tts.languaage;window.speechSynthesis.onvoiceschanged=function(){d.voice=jQuery.grep(window.speechSynthesis.getVoilang})[0]}}else{d.lang="en-UK"}}if(settings.tts!=null&&settings.tts.rate!=null){d.rate=parseFloat(settings.tts.rate)}else{d.rate=1}if(settings.tts!=null&&settings.tts.pitch!=null){d.pitch=parseFloat(settings.tts.pitch)}d.onend=function(){if(window.speechSynthesis.speaking==false){if(b.status!="STOPPED"){b.status="FINISHED"}if(a){if(a=="noicon"){}else{if(a=="na"){b.removeCls("playing")}else{a.removeCls("playing")}}}}};d.onerror=function(g){};if(Ext.os.is.iOS&&settings.tts.language!=null){var c=window.speechSynthesis.getVoices();if(c.length==0){c=e.iOsVoices}d.lang=settings.tts.language;d.voice=jQuery.grep(c,function(g){return g.lang==d.lang})[0]}readAloud.utterance=d;console.log(d);window.speechSynthesis.speak(d)}}},scaleInterstitial:function(d,g,a){var f=this;var e=f.getReaderarticlepopover();if(e!=null){var j=e.content;if(j!=null){var b=a.element.dom.clientHeight/d.clientHeight;var c=a.element.dom.clientWidth/d.clientWidth;var h=Math.min(b,c);$(g).css("-ms-transform-origin","50% 0px");$(g).css("-webkit-transform-origin","50% 0px");$(g).css("-moz-transform-origin","50% 0px");$(g).css("transform-origin","50% 0px");$(g).css("-ms-transform","scale3d("+h+", "+h+", 1)");$(g).css("-webkit-transform","scale3d("+h+", "+h+", 1)");$(g).css("-moz-transform","scale3d("+h+", "+h+", 1)");$(g).css("transform","scale3d("+h+", "+h+", 1)")}}},scaleInterstitialOnDevice:function(c,k){var f=this;var e=f.getReaderarticlepopover();if(e!=null){var l=e.content;if(l!=null){if(Ext.os.is.Tablet){if(f.returnOrientation()=="landscape"){var h=768;var b=1024}else{var b=768;var h=1024}}else{if(Ext.os.is.Phone){if(f.returnOrientation()=="landscape"){var h=320;var b=480}else{var b=320;var h=480}}}if(f.returnOrientation()=="portrait"){var d=$(l.element.dom).height()/h;var a=d*b;var j=a/b;if(a>$(document).width()){a=$(document).width();j=a/b;var g=j*h;d=g/h}}else{var j=$(l.element.dom).width()/b;var g=j*h;var d=g/h;if(g>$(document).height()-80){g=$(document).height()-80;d=g/h;var a=d*b;j=a/b}}$(k).css("height",h+"px");$(k).css("width",b+"px");$(k).css("-ms-transform-origin","50% 0px");$(k).css("-webkit-transform-origin","50% 0px");$(k).css("-moz-transform-origin","50% 0px");$(k).css("transform-origin","50% 0px");$(k).css("-ms-transform","scale3d("+j+", "+d+", 1)");$(k).css("-webkit-transform","scale3d("+j+", "+d+", 1)");$(k).css("-moz-transform","scale3d("+j+", "+d+", 1)");$(k).css("transform","scale3d("+j+", "+d+", 1)")}}},galleryVisible:function(){var a=this;if(a.getLivenewsticker()!=null){a.getLivenewsticker().hide()}},galleryInvisible:function(){var a=this;if(a.getLivenewsticker()!=null){a.getLivenewsticker().show()}},checkAudioOnTd()}},copyToClipboard:function(){var c=this;var b="";var d;var a=c.getReaderarticlepopover();if(c.getArticlecarousel().getActiveItem().articleText){b=c.getArticlecarousel().getActiveItem().articleText}else{if(c.getArticlecarousel().getActiveItem().article){var e=c.getCurrentArticle();b=e.headline+String.fromCharCode(13)+e.subHeadline+String.fromCharCode(13)+e.byline+String.fromCharCode(13)+e.body}else{if(c.getArticlecarousel().getActiveItem().initialConfig.page.headline!=null){var e=c.getArticlecarousel().getActiveItem().initialConfig.page;b=e.headline+String.fromCharCode(13)+e.subHeadline+String.fromCharCode(13)+e.byline+String.fromCharCode(13)+e.body}else{}}}d=new Clipboard(".copyButton",{text:function(){if(b.search("contentHead")!=-1){var h=b.split(/<[^>]*contentHead[^>]*>/g);var f=h[1].slice(0,h[1].indexOf("</div>")).replace(/<[^>]*>/g," ");var g=h[1].slice(h[1].indexOf("</div>"));b=h[0]+f+g+String.fromCharCode(13)}if(b.search("contentDeck")!=-1){var h=b.split(/<[^>]*contentDeck[^>]*>/g);var f=h[1].slice(0,h[1].indexOf("</div>")).replace(/<[^>]*>/g," ");var g=h[1].slice(h[1].indexOf("</div>"));b=h[0]+f+g+String.fromCharCode(13)}if(b.search("contentByline")!=-1){var h=b.split(/<[^>]*contentByline[^>]*>/g);var f=h[1].slice(0,h[1].indexOf("</div>")).replace(/<[^>]*>/g," ");var g=h[1].slice(h[1].indexOf("</div>"));b=h[0]+f+g+String.fromCharCode(13)}return b.replace(/<\/?p[^>]*>/g,String.fromCharCode(13)).replace(/<br[^>]*>/g,String.fromCharCode(13)).replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&glt;/g,"<").replace(/  +/g," ").replace(/\s\s+/g,String.fromCharCode(13)).trim().replace("PREVIOUS IMAGE Image NEXT IMAGE","")}});d.on("success",function(j){var f="Article copied to clipboard.";if(language!=null&&language.articlePopover!=null&&language.articlePopover.articleTextCopied!=null){f=language.articlePopover.articleTextCopied}var g=new InfinityMobile.view.Overlay({html:"<div class='tick-icon'></div> "+f,style:{backgroundColor:"#fff",color:"#000",zIndex:211111111111111100000},cls:"copy-alert font15"});g.setZIndex(2147483641);var h=g.getModal();if(h!=null){h.setZIndex(2147483640)}Ext.Viewport.add(g);setTimeout(function(){g.addCls("hideAlert");$(g.element.dom).closest(".x-center").next(".x-mask").addClass("hideAlert")},800);setTimeout(function(){g.destroy()},1800);j.clearSelection();d.destroy()});d.on("error",function(h){if(currentProfile=="desktop"){var f=new InfinityMobile.view.Overlay({html:"Press CTRL + C (on Windows) or CMD + C (on Mac) to copy.",style:{backgroundColor:"#fff",color:"#000",zIndex:211111111111111100000},cls:"copy-alert font15"});a.add(f)}else{var g="Article failed to copy.";if(language!=null&&language.articlePopover!=null&&language.articlePopover.articleCopyFailed!=null){g=language.articlePopover.articleCopyFailed}var f=new InfinityMobile.view.Overlay({html:"<div class='cross-icon'></div> "+g,style:{backgroundColor:"#fff",color:"#000",zIndex:2.111111111111111e+24},cls:"copy-alert font15"});a.add(f);setTimeout(function(){f.addCls("hideAlert");$(f.element.dom).closest(".x-center").next(".x-mask").addClass("hideAlert")},800);setTimeout(function(){f.destroy()},1800)}})},highlightInstructions:function(){var e=this;var a="Close";if(language!=null&&language.close!=null){a=language.close}var f="Highlighted Text Mode";if(language!=null&&language.articlePopover!=null&&language.articlePopover.highlightedTextMode!=null){f=language.articlePopover.highlightedTextMode}var b="Hold down on the text to highlight copy";if(language!=null&&language.articlePopover!=null&&language.articlePopover.highlightedTextModeMessage!=null){b=language.articlePopover.highlightedTextModeMessage}var d=new InfinityMobile.view.Overlay({html:'<div class="highlightClose pointerCursor" style="color:rgb(69, 145, 184);position:absolute;top:0px;right:0px;font-size:11px;display:inline-flex;"><div style="padding:3px">'+a+'</div><img  src="../assets/article view/article-close-btn.png" style="width:15px;height:15px;margin:5px;"></div><span style="font-weight:bold;">'+f+"</span><br />"+b,style:{backgroundColor:"#fff",color:"#000",zIndex:211111111111111100000,textAlign:"center",lineHeight:1.8},padding:15,zIndex:2147483641,cls:"copy-alert font15"});var c=d.getModal();if(c!=null){c.setZIndex(2147483640)}d.hide=function(){d.addCls("hideAlert");$(d.element.dom).closest(".x-center").next(".x-mask").addClass("hideAlert");setTimeout(function(){d.destroy()},1000)};Ext.Viewport.add(d);var g=$(d.element.dom).find(".highlightClose");if(g[0]!=null){g[0].onclick=function(){d.hide()};g[0].addEventListener("touchstart",function(){d.hide()})}},highlightDisable:function(){var c=this;var d="Highlight Text Mode Disabled";if(language!=null&&language.articlePopover!=null&&language.articlePopover.highlightedTextModeDisabled){d=language.articlePopover.highlightedTextModeDisabled}var b=new InfinityMobile.view.Overlay({html:d,style:{backgroundColor:"#fff",color:"#000",zIndex:211111111111111100000,textAlign:"center",lineHeight:1.8},padding:15,zIndex:1e+21,cls:"copy-alert font15"});var a=b.getModal();if(a!=null){a.setZIndex(2147483640)}Ext.Viewport.add(b);setTirt")},1000);setTimeout(function(){b.destroy()},2000)},sectiony(d)},loadSections)}}}},jumpToSectio()}}},translateArticle:function(d){var e=this;var a=e.getArticlecarousel();var h=a.getActiveItem();var b=settings.translateUrl+"?langpair=en|es&u=";var g=window.location.host;var c=window.location.pathname.split("/");var f="http://"+g+"/html5/desktop/article_translate.aspx?guid="+h.articleguid+"&html5="+currentProfile;b+=encodeURIComponent(f);window.open(b)},trann")}},getCrn""},oVideo)})}},ogalleryinitialized:function(a,e,b){var h=this;if(typeof trackReaderEvent!="undefined"){var j=a.config.obj.config.mediaObject.page;if(j==null){j=a.config.obj.config.page.page}var k=h.getSectionName(j);if(e.omniture!=null){var c=e.omniture.author;var l=e.omniture.contentTitle;var f=e.omniture.contentType;var g=e.omniture.hierarchy;var d=e.omniture.pageName}trackReaderEvent("ogallery",{pageNum:j,section:k,author:c,contenttitle:l,contenttype:f,hier:g,pagename:d,photoNum:b})}},ogalleryinitializedArb})}},ovideoinitiac})}},tracke})}},readAloudMode:function(){var e=this;var f=e.getReaderarticlepopover();var d=e.articleCarousel.items.items;if(f!=null){if(f.highlightMode){for(var c=0;c<d.length;c++){var b=d[c];if(!e.isPuzzleOrComic(b)){b.toggleToTextMode()}}f.highlightMode=false}}for(var c=0;c<d.length;c++){var b=d[c];var a=e.articleCarousel;if(b==e.articleCarousel.getActiveItem()){b.destoryAdvertMpuSlot()}if(!e.isPuzzleOrComic(b)){b.toggleToTextMode()}}if(f!=null){if(f.readAloudMode){e.readAloudDisable();e.disableReadAloud(f);e.stopReading()}else{e.readAloudInstructions();f.readAloudMode=true;f.ttsToggle.addCls("playing")}}},disableReadAloud:function(b){var a=this;console.log(b);if(b!=null){a.showArticleTools(b);b.readAloudMode=false;b.ttsToggle.removeCls("playing")}},playArticleText:function(){var a=this;var d=a.getArticlecarousel();var c=d.getActiveItem();if(!a.isPuzzleOrComic(c)){readAloud.type="ARTICLE";a.setPopoverTooltipText("Stop");switch(readAloud.status){case"STOPPED":case"PLAYING":window.speechSynthesis.cancel();a.read(a.getArticleText());break;case"PAUSED":readAloud.status="PLAYING";if(Ext.browser.is.Chrome){if(window.speechSynthesis.paused){window.speechSynthesis.resume()}else{var b=readAloud.offset;a.stopReading();readAloud.offset=b;a.read(a.getArticleText())}}else{window.speechSynthesis.resume()}break}}},setPopoverToolti(c)}},getArticleText:function(){var d=this;var h=d.getArticlecarousel();if(h!=null){var f=h.getActiveItem();if(f!=null){var b=f.element.down("iframe.articleiframe")}}var g="";if(b!=null){var a=b.dom.contentDocument;if(window.getSelection){g=a.getSelection().toString()}else{if(a.selection&&a.selection.type!="Control"){g=a.selection.createRange().text}}if(g.trim().length>0){return g}else{if(d.getArticlecarousel().getActiveItem().articleText){g=d.getArticlecarousel().getActiveItem().articleText.replace("NEXT IMAGE<img","<img").replace("PREVIOUS IMAGE<img","<img").replace(">Image</div>","></div>");return g}else{if(d.getArticlecarousel().getActiveItem().article){var f=d.getCurrentArticle();var e=f.body;var c=document.createElement("textarea");c.innerHTML=e;var e=c.value;g=f.headline+". "+f.subHeadline+". "+f.byline+". "+e;return g;delete c}else{if(d.getArticlecarousel().getActiveItem().initialConfig.page.headline!=null){var f=d.getArticlecarousel().getActiveItem().initialConfig.page;g=f.headline+". "+f.subHeadline+". "+f.byline+". "+f.body;return g}else{d.stopArticleTTS(toggle,alticon)}}}}}},read:function(d){var c=this;if(d!=null){d=d.split("'").join("\u2018").replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/\s\s+/g," ").trim();if(!d.startsWith("<<Error>>")){if(d.length>200&&(Ext.os.is.Android)){sentences=d.split(". ");for(i=0;i<sentences.length;i++){sentence=sentences[i];audio=new SpeechSynthesisUtterance(sentence);audio.lang="en-US";if(navigator.appVersion.indexOf("Edge")==-1){audio.voice=c.getVoice(window.speechSynthesis,"en-US")}if(navigator.appVersion.indexOf("Edge")==-1&&Ext.browser.is.Chrome){audio.rate=0.6}else{audio.rate=0.8}if(i==sentences.length-1){audio.onend=function(){c.stopReading()}}setTimeout(function(){readAloud.utterance=audio;window.speechSynthesis.speak(audio)},0);readAloud.status="PLAYING";readAloud.text=d}}else{if(Ext.browser.is.Chrome){readAloud.offset=0;var b=new SpeechSynthesisUtterance(d);if(navigator.appVersion.indexOf("Edge")==-1){b.voice=c.getVoice(window.speechSynthesis,"en-US")}b.rate=0.7;readAloud.status="PLAYING";readAloud.text=d;c.chunkSpeechUtterance(b,function(){c.stopReading()}),function(){c.stopReading()}}else{var b=new SpeechSynthesisUtterance();b.text=d;b.lang="en-US";if(navigator.appVersion.indexOf("Edge")==-1){b.voice=c.getVoice(window.speechSynthesis,"en-US")}if(settings.tts!=null&&settings.tts.rate!=null){b.rate=parseFloat(settings.tts.rate)}else{if(navigator.appVersion.indexOf("Edge")==-1&&Ext.browser.is.Chrome){b.rate=0.6}else{b.rate=0.8}}if(settings.tts!=null&&settings.tts.pitch!=null){b.pitch=parseFloat(settings.tts.pitch)}b.onend=function(){c.stopReading()};b.onerror=function(f){c.stopReading()};if(Ext.os.is.iOS){var a=window.speechSynthesis.getVoices();if(a.length==0){a=c.iOsVoices}b.lang="en-US";b.voice=c.getVoice(b,"en-US");b.voice=jQuery.glang})[0]}setTik(b)},0);readAloud.status="PLAYING";readAloud.text=d}}}}},chunkSpeechUtterance:function(d,g){var c=this;var b;var h=(readAloud&&readAloud.offset!==undefined?d.text.substring(readAloud.offset):d.text);h.trim();if(d!=null&&d.voice!=null&&d.voice.voiceURI!=null&&d.voice.voiceURI=="native"){b=d;b.text=h;b.addEventListener("end",function(){g()})}else{var j=120;var k=new RegExp("^[\\s\\S]{"+Math.floor(j/2)+","+j+"}[.!?,]{1}|^[\\s\\S]{1,"+j+"}$|^[\\s\\S]{1,"+j+"} ");var a=h.match(k);if(a[0]===undefined||a[0].length<2){if(g!=null){g();readAloud.offset=0}return}var f=a[0];if(f.startsWith(". ")){b=new SpeechSynthesisUtterance(f.replace(". ","  "))}else{b=new SpeechSynthesisUtterance(f)}b.rate=d.rate;b.voice=d.voice;b.lang=d.lang;var e;for(e in d){if(d.hasOwnProperty(e)&&e!=="text"){b[e]=d[e]}}b.addEventListener(,g)}})}console.log(b);setTimeout(function(){if(readAloud.status=="STOPPED"){c.stopReading()}else{readAloud.utterance=b;window.speechSynthesis.speak(b)}},0)},getull}},pauseArticleText:function(){var a=this;readAloud.type="ARTICLE";readAloud.status="PAUSED";console.log("PAUSE ARTICLE TEXT");window.speechSynthesis.pause()},restartArticleText:function(){var a=this;console.log("restart");a.stopReading()},stopReading:function(){var a=this;window.speechSynthesis.cancel();a.setPopoverTooltipText("Play");readAloud.status="STOPPED";if(readAloud.controls!=null&&readAloud.controls.playBtn!=null){readAloud.controls.playBtn.addCls("playReadAloud");if(readAloud.controls.type=="play-stop"){readAloud.controls.playBtn.removeCls("stopReadAloud")}else{readAloud.controls.playBtn.removeCls("pauseReadAloud")}}},clearReadAloudIframeSelection:function(a){var d=this;if(a!=null){}else{var g=d.getArticlecarousel();if(g!=null){var e=g.getActiveItem();if(e!=null){var c=e.element.down("iframe")}}}var f="";if(c!=null){var b=c.dom.contentDocument;if(b.selection){b.selection.empty()}else{if(window.getSelection){b.getSelection().removeAllRanges()}}}},readAloudInstructions:function(b){var f=this;var e="Press the play button to read the article.<br />Alternatively, highlight<br /> the text you wish to be read";if(language!=null&&language.articlePopover!=null&&language.articlePopover.readAloudMessage!=null){e=language.articlePopover.readAloudMessage}var a="Close";if(language!=null&&language.close!=null){a=language.close}var g="Read Aloud Mode";if(language!=null&&language.menu!=null&&language.menu.readAloud!=null){g=language.menu.readAloud}var d=new InfinityMobile.view.Overlay({html:'<div class="highlightClose pointerCursor" style="color:rgb(69, 145, 184);position:absolute;top:0px;right:0px;font-size:11px;display:inline-flex;"><div style="padding:3px">'+a+'</div><img  src="../assets/article view/article-close-btn.png" style="width:15px;height:15px;margin:5px;"></div><span style="font-weight:bold;">'+g+"</span><br />"+e,style:{backgroundColor:"#fff",color:"#000",zIndex:211111111111111100000,textAlign:"center",lineHeight:1.8},padding:15,zIndex:2147483647,cls:"copy-alert font15"});var c=d.getModal();if(c!=null){c.setZIndex(2147483646)}d000)};Ext.Viewport.add(d);var h=$(d.element.dom).find(".highlightClose");if(h[0]!=null){h[0].onclick=function(){d.hide()};h[0].addEventListener("touchstart",function(){d.hide()})}f.setupHighlightListener()},setupHighlightLisw()}},hideArticlee()}},showArticleTools:function(a){if(a!=null){if(!Ext.os.is.iOS){a.topBarTranslate.show()}a.copyButton.show();a.topBarPrint.show();a.topBarSelectText.show();a.readAloudControls.hide()}},readAloudDisable:function(){var b=this;var a="Read Aloud Mode Disabled";if(language!=null&&language.articlePopover!=null&&language.articlePopover.readAloudDisabled!=null){a=language.articlePopover.readAloudDisabled}b.disableMessage(a)},disableMe000)},stopArticleText:function(){var a=this;a.stopReading()},settingsLg()}},getFlippAdvertSern b}},0,0,0,0,0,0,[InfinityMobile.controller,"MediaController"],0));(Ext.cmd.derive("InfinityMobile.controller.DataCaptureController",Ext.app.Controller,{config:{refs:{main:"main",datacaptureform:"datacaptureform",articlescontainer:"articlescontainer"},control:{main:{checkDataCapture:"checkDataCapture",createDataCapture:"createDataCapture"},datacapture:{submitDataCapture:"submitDataCapture"},datacaptureform:{sendData:"sendData",closeDataCapture:"closeDataCapture"}}},init:function(){var a=this},createDataCapture:function(){var c=this;if(settings.reader.dataCapture!=null){try{var b=localStorage.getItem("datacapture"+publicationguid)}catch(a){var b=null}if(b==null){dataCaptureFunc=function(){if(Ext.os.is.Phone){var d=Ext.create("InfinityMobile.view.phone.DataCaptureForm",{logo:settings.reader.dataCapture.logo,welcomeText:settings.reader.dataCapture.welcomeText,settings:settings.reader.dataCapture})}else{var d=Ext.create("InfinityMobile.view.DataCaptureForm",{logo:settings.reader.dataCapture.logo,welcomeText:settings.reader.dataCapture.welcomeText,settings:settings.reader.dataCapture})}console.log("DATA CAPTURE");console.log(d);Ext.Viewport.add(d)};if(Ext.getStore("LanguageStore")==null){console.log("language undefined");Ext.getStore("LanguageStore").on(nc()}})}else{dataCaptureFunc()}}}},closeDataCa=""}},sendData:function(c,d){var b=this;var a="{";if(d.firstname!=null){a+='"firstname":"'+d.firstname+'",'}if(d.surname!=null){a+='"surname":"'+d.surname+'",'}if(d.email!=null){a+='"email":"'+d.email+'",'}if(d.houseNo!=null){a+='"houseNo":"'+d.houseNo+'",'}if(d.address!=null){a+='"address":"'+d.address+'",'}if(d.postcode!=null){a+='"postcode":"'+d.postcode+'",'}if(d.telephone!=null){a+='"telephone":"'+d.telephone+'",'}if(d.keepMeUpdated!=null){a+='"keepMeUpdated":"true",'}a+="}";$.post("../dataCapture.aspx",{dataCaptureJsonStr:btoa(a.substring(0,a.length-2)+"}"),pubid:publicationguid},function(f){try{localStorage.setItem("datacapture"+publicationguid,"true")}catch(e){}});if(b.getArticlescontainer()!=null){b.getArticlescontainer().element.dom.style.visibility=""}},checkDataCal){}},submitDataCae(b)}},0,0,0,0,0,0,[InfinityMobile.controller,"DataCaptureController"],0));(Ext.cmd.derive("InfinityMobile.controller.PrintController",Ext.app.Controller,{config:{refs:{main:"main",printmenu:"printmenu",printItem:"printitem",articlescontainer:"articlescontainer",carousel:"infinitecarousel2d",articleCarousel:"articlecarousel"},control:{main:{loadPrintMenu:"loadPrintMenu"},printmenu:{loadPages:"loadPages",close:"closePrint",selectAll:"selectAll",selectNone:"selectNone",print:"print",enableArticlesContainer:"enableArticlesContainer"},printItem:{toggleCheckBox:"toggleCheckBox"},readerpuzzlepopoveritem:{puzzlePrintMobile:"puzzlePrintInternal"}}},init:function(){var b=this;canResize=true;if(currentProfile!="desktop"||Ext.browser.is.Firefox){b.internalPrint=false;var a=window.matchMedia("print");a.addListener(function(c){if(c.matches){canResize=false;if(b.internalPrint==false){b.browserPrint()}}else{canResize=true;b.internalPrint=false;var d=$(".printContainer")[0];if(!Ext.os.is.Android){d.innerHTML=""}}})}},browserPrint:function(){var c=this;var e=mainPanel.getActiveItem();if(e.config.viewType!=null&&e.config.viewType=="reader"){c.pagePrint(false)}else{if(!Ext.os.is.Android){var b=c.getArticleCarousel();var d=b.getActiveItem();var a=d.config.page;if(a.description.indexOf("Puzzles")!=-1||a.description.indexOf("Comics")!=-1){c.puzzlePrint(d,false)}else{c.articlePrint(d,false)}}}},loadPrintMenu:function(){var b=this;b.disableArticlesContainer();b.hideArticlesContainer();if(Ext.os.is.Desktop){var a=Ext.create("InfinityMobile.view.desktop.PrintMenu",{})}else{var a=Ext.create("InfinityMobile.view.PrintMenu",{})}Ext.Viewport.add(a);a.show()},hideArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().hide()}},loadPages:function(a,j){var g=this;var e=Ext.getStore("EditionFlatplan");g.pages=e.data.items[0].raw.pageGroups;for(var d=0;d<g.pages.length;d++){var h=g.pages[d].pages[0];if(h.type=="page"){var b=h.origPageNum!=null?h.origPageNum:h.pageNum;var f=h.pageIndex;var c=Ext.create("InfinityMobile.view.ReaderPrintItem",{editionGuid:editionguid,pageNo:b,pageIndex:f});j.add(c)}}},closePrint:function(a){a.hide()},selectAll:function(c){var e=this;var a=e.getAllPrintItems(c);for(var d=0;d<a.length;d++){var b=a[d];e.checkCheckBox(b)}},selectNone:function(c){var e=this;var a=e.getAllPrintItems(c);for(var d=0;d<a.length;d++){var b=a[d];e.uncheckCheckBox(b)}},getAllPrintItems:function(a){return a.printItemsContainer.getItems().items},print:function(c){var g=this;var f=g.getAllPrintItems(c);var h=[];for(var e in f){if(g.getCheckedStatus(f[e])){h[h.length]=f[e]}}if(h.length>0){var d="print.aspx?edid="+editionguid+"&type=pages&pages=";var b="";for(var a in h){b+=h[a]._pageNo+","}if(b[b.length]==","){b=b.substring(0,b.length-1)}d+=b;window.open(d)}},toggleCheckBox:function(a,b){var c=this;if(c.getCheckedStatus(a)){c.uncheckCheckBox(a)}else{c.checkCheckBox(a)}},getCheckedStatus:function(a){return a.editionLabelCheckBox.isChecked()},checkCheckBox:function(a){a.editionLabelCheckBox.check()},uncheckCheckBox:function(a){a.editionLabelCheckBox.uncheck()},disableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().disableEvents()}},enableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().enableEvents()}},articlePrintInternal:function(a){var b=this;b.internalPrint=true;b.articlePrint(a,true)},articlePrint:function(f,e){var g=this;var d=g.getArticleCarousel();var b="phoneArticle";if(currentProfile=="tablet"){b="tabletArticle"}var a="<div class='"+b+"'>"+d.getActiveItem().content.getHtml()+"</div>";var c="<style>.articleContentHtml5{font-size:"+fontEm+"px !important}</style>"+a;c=c.replace(/<div*[\sa-zA-Z=\"\'\-0-9:;]* class=[\"\']mpuAdvert[\"\']\s?><\/div>/g,"").replace(/<div\sid\=[\"\']ext-readerarticlepopoveritem-[0-9]*advert[\"\'][a-zA-z0-9\-\=\:\;\s\'\"]*><\/div>/g,"");g.printHtmlAndroid(c,e)},puzzlePrintIntrue)},puzzlePrint:function(e,a){var b=this;var d=e.printImage.dom.src;if(d!=null){d=d.replace("http://origin.misc.pagesuite.com","https://misc.pagesuite.com")}var c="<img class='puzzleImage' src='"+d+"' />";c="<img src='"+d+"' style='position:absolute;width:100%;height:100%;object-fit: contain;' />";b.printHtmlAndroid(c,a)},pagePrint:function(e){var g=this;var f=g.getCarousel();var j=(f._pageNumber);var c=editionFlatplanData.pageGroups;var h=c[j].pages[0];var a="";if(g.returnOrientation()=="landscape"&&f._mode=="double"&&j>0){if(j%2==0){var b=j-1;var d=c[b].pages[0];a="<div style='position:absolute;width:100%;height:100%'>"+g.printPageHtml(d)+"</div>";a+="<div style='position:absolute;width:100%;height:100%;top:100%'>"+g.printPageHtml(h)+"</div>"}else{var b=j+1;var d=c[b].pages[0];a="<div style='position:absolute;width:100%;height:100%'>"+g.printPageHtml(h)+"</div>";a+="<div style='position:absolute;width:100%;height:100%;top:100%'>"+g.printPageHtml(d)+"</div>"}}else{a=g.printPageHtml(h)}g.printHtmlAndroid(a,e)},printPageHtml:function(l){var g=this;var f="";if(l.tileImage!=null){var b=l.tileImage[0];if(b.width/b.height>window.innerWidth/window.innerHeight){var h="bottom:50%";var a="0%;";var e=0;var m="object-position: 100% 0;";for(var d=0;d<2;d++){for(var c=0;c<2;c++){var k=l.tileImage[e].src;f+="<img src='"+k+"' style='position:absolute;"+h+";left:"+a+"width:50%;height:auto;object-fit: contain;"+m+"' />";e++;h="top:50%"}h="bottom:50%";a="50%;";m="object-position: 0 0;"}}else{var h="0";var a="right:50%;";var e=0;var m="object-position: 100% 0;";for(var d=0;d<2;d++){for(var c=0;c<2;c++){var k=l.tileImage[e].src;f+="<img src='"+k+"' style='position:absolute;top:"+h+";"+a+"width:auto;height:50%;object-fit: contain;"+m+"' />";e++;h="50%"}h="0%";a="left:50%;";m="object-position: 0 0;"}}}else{if(l.image!=null){var k=l.image;if(l.pageNum>1){if(l.image.indexOf("pages.cdn.pagesuite.com")!=-1){k="http://pages.mobile.cdn.pagesuite.com/images/"+g.retrievePageGuid(l)+"/tablet.jpg"}}f+="<img src='"+k+"' style='position:absolute;width:100%;height:100%;object-fit: contain' />"}}return f},retrievePageGuid:function(a){return a.image.split("/")[5]},returnOrientrn a},printHtmlAndroid:function(d,b){var e=this;var c=$(".printContainer")[0];if(d!=null){d=d.replace("http://origin.misc.pagesuite.com","https://misc.pagesuite.com")}c.innerHTML=d;if(Ext.os.is.Android&&currentProfile=="phone"){var a=$(c).find(".articleContentHtml5")[0];if(a!=null){$(a).addClass("printAndroid")}}if(b){window.print()}}},0,0,0,0,0,0,[InfinityMobile.controller,"PrintController"],0));(Ext.cmd.derive("InfinityMobile.controller.ClippingController",Ext.app.Controller,{config:{refs:{main:"main",clippingbox:"clippingbox",clippingarea:"clippingarea",clippingmenu:"clippingmenu",readerCarousel:"infinitecarousel2d",reader:"reader",readerpageviewer:"readerpageviewer",clippingmenudeleteprompt:"clippingmenudeleteprompt",clippingoptionsmenu:"clippingoptionsmenu",articlescontainer:"articlescontainer",extratopbar:"extratopbar"},control:{main:{createClipping:"createClippingBox"},clippingbox:{createClipping:"createClipping"},clippingmenu:{DeleteClippings:"DeleteClippings"},clippingmenudeleteprompt:{DeleteClippings:"DeleteClippings",deleteItem:"deleteItem"},clippingarea:{createClip:"createClip",resetClippingArea:"resetClippingArea",enableArticlesContainer:"enableArticlesContainer"},clippingprompt:{createClippingBox:"createClippingBox"},readerpageviewer:{resizeClipping:"resizeClipping"},infinitecarousel:{resizeClipping:"resizeClipping"},clippingitems:{deleteItem:"deleteItem"},clippingoptionsmenu:{enableArticlesContainer:"enableArticlesContainer",close:"close"}}},init:function(){var a=this;a.clippings=[];a.shareClippings=[];a.clippingsWidth=[];a.clippingsHeight=[]},close:function(b){var a=this;window.onkeydown=a.keyDownFunction;b.destroy()},createClippingBox:function(){var j=this;var d;var l=j.getReaderCarousel();var b=l.getActiveItem();var e=j.getReader();var c=j.getReaderpageviewer();j.disableArticlesContainer();try{var k=localStorage.getItem("clippingPrompt"+publicationguid)}catch(g){var k=null}j.hideArticlesContainer();if(k!=null){if(Ext.os.is.Desktop){var a=Ext.create("InfinityMobile.view.ClippingArea",{readerActiveItem:b,reader:e})}else{var a=Ext.create("InfinityMobile.view.tablet.ClippingArea",{readerActiveItem:b,reader:e})}Ext.Viewport.add(a);a.show();if(Ext.os.is.Desktop){if(settings.newsday!=null){if(settings.newsday.extraTopBar=="true"){var h=j.getExtratopbar();if(h!=null){h.setZIndex(0)}}}}}else{if(Ext.os.is.Phone){var f=Ext.create("InfinityMobile.view.phone.clippingPrompt",{readerActiveItem:b,reader:e})}else{var f=Ext.create("InfinityMobile.view.clippingPrompt",{readerActiveItem:b,reader:e})}}if(currentProfile=="desktop"){j.keyDownFunction=window.onkeydown;window.onkeydown=null}},getPrefix:function(){var a=window.getComputedStyle(document.documentElement,"");pre=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||(a.OLink===""&&["","o"]))[1];return{lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}},createClipping:function(m){var h=this;var k=document.getElementById("clipper");var l=m.x;var j=m.y;var a=0;var d=m.readerActiveItem;var f=m.reader;var e=d.zoomDiv.dom.style.transform;var o=e.substring(e.indexOf("scale3d(")+8,e.length-4).split(",");var n=(h.naturalW/d.imagetoload.clientWidth);var g=(h.naturalH/d.imagetoload.clientHeight);if(l!=0&&j!=0){if(document.getElementById("slider").value==1){if(d._mode=="double"){l=m.x-((f.element.dom.clientWidth/2)-d.imagetoload.clientWidth);a=d._pageNo;if(m.x>(f.element.dom.clientWidth/2)){l-=d.imagetoload.clientWidth;a=d._pageNo+1}l=(l*n);if(f.element.dom.clientHeight-40<d.mediaDiv.dom.clientHeight){j=m.y-40+d.getScrollable().getScroller().position.y}else{j=m.y-40;var c=Ext.getStore("SettingStore");if(c.data.items[0].raw.reader.ticker!=null){j=j-(((f.element.dom.clientHeight-80)-d.imagetoload.clientHeight)/2)}else{j=j-(((f.element.dom.clientHeight-40)-d.imagetoload.clientHeight)/2)}}j=j*g}else{l=m.x-(((f.element.dom.clientWidth)-d.imagetoload.clientWidth)/2);l=l*n;a=d._pageNo+1;if(f.element.dom.clientHeight-40<d.mediaDiv.dom.clientHeight){j=m.y-40+d.getScrollable().getScroller().position.y}else{j=m.y-40;var c=Ext.getStore("SettingStore");if(c.data.items[0].raw.reader.ticker!=null){j=j-(((f.element.dom.clientHeight-80)-d.imagetoload.clientHeight)/2)}else{j=j-(((f.element.dom.clientHeight-40)-d.imagetoload.clientHeight)/2)}}j=j*g}a=flatPlanData.reversePageMapper[a];var b="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+a+"&x="+Math.floor(l)+"&y="+Math.floor(j)+"&h="+Math.floor(k.offsetHeight*(h.naturalH/d.imagetoload.clientHeight))+"&w="+Math.floor(k.offsetWidth*(h.naturalW/d.imagetoload.clientWidth))}else{a=d._pageNo;if(m.x>=d.imagetoload.clientWidth){}else{}var b="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+a+"&x="+Math.floor(l)+"&y="+Math.floor(j)+"&h="+Math.floor(k.offsetHeight*(h.naturalH/d.imagetoload.clientHeight)/document.getElementById("slider").value)+"&w="+Math.floor(k.offsetWidth*(h.naturalW/d.imagetoload.clientWidth)/document.getElementById("slider").value)}}h.clippings[h.clippings.length]=b;h.clippingMenu();h.clipper=null;m.destroy()},mapPoslerY},clippingMenu:function(){var a=this;if(Ext.os.is.Phone){var b=Ext.create("InfinityMobile.view.phone.ClippingOptionsMenu",{images:a.clippings,shareImages:a.shareClippings,widths:a.clippingsWidth,heights:a.clippingsHeight});Ext.Viewport.add(b);b.show()}else{if(Ext.os.is.Desktop){var b=Ext.create("InfinityMobile.view.desktop.ClippingOptionsMenu",{images:a.clippings,shareImages:a.shareClippings,widths:a.clippingsWidth,heights:a.clippingsHeight})}else{if($(document).height()<700||$(document).width()<700){var b=Ext.create("InfinityMobile.view.phone.ClippingOptionsMenu",{images:a.clippings,shareImages:a.shareClippings,widths:a.clippingsWidth,heights:a.clippingsHeight});Ext.Viewport.add(b);b.show()}else{var b=Ext.create("InfinityMobile.view.ClippingOptionsMenu",{images:a.clippings,shareImages:a.shareClippings,widths:a.clippingsWidth,heights:a.clippingsHeight})}}}},DeleteClipngs)},createClip:function(f,e,g,d,a){var b=this;var c=b.getReaderCarousel();if(Ext.os.is.Desktop){if(c._mode=="single"){b.clippingSinglePage(f,e,g,d,a)}else{b.clippingDoublePage(f,e,g,d,a)}}else{if(b.returnOrientation()=="portrait"){b.createClipPortrait(f,e,g,d,a)}else{if(c._mode=="single"){b.createClipPortrait(f,e,g,d,a)}else{b.createClipLandscape(f,e,g,d,a)}}}},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},createClipPortrait:function(e,r,k,q,u){var C=this;var B=true;var o=k.image;var j=k.landscapeimage;var s=o;if(s.clientWidth==0){s=j}var d=s.naturalWidth;var c=s.naturalHeight;var g=$(s).offset();var E=k._pageNo+1;if(k.scale==1){var D=c/$(s).height();if(k.scroller.position.y>0){var t=k.scroller.position.y}else{var t=0}var m=parseInt(((parseFloat(e)+5)-g.left+k.scroller.position.x)*D);var l=parseInt(((parseFloat(r)+5)-g.top+k.scroller.position.y-t)*D);var A=parseInt(($(q.element.dom).height()-10)*D);var n=parseInt(($(q.element.dom).width()-10)*D);if(m<0||m+n>k.initialImageWidth*D||l<0||l+A>k.initialImageHeight*D){B=false}else{var f="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+E+"&x="+m+"&y="+l+"&h="+A+"&w="+n+"&nw="+d+"&nh="+c}}else{if(k.scroller.position.y>0){var t=40}else{var t=40}if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){t-=40}}var p=k.scale;var z=k.translateX*p;var b=parseFloat((k.scroller.position.x)+parseFloat(e));var D=c/($(s).height()*p);var a=parseFloat(k.scroller.position.y+parseFloat(r)-t);var m=parseInt(((b+5)-z)*D);var l=parseInt(((a+5))*D);var A=parseInt(($(q.element.dom).height()-10)*D);var n=parseInt(($(q.element.dom).width()-10)*D);if(m<0||m+n>(k.initialImageWidth*p)*D||l<0||l+A>(k.initialImageHeight*p)*D){B=false}else{var f="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+E+"&x="+m+"&y="+l+"&h="+A+"&w="+n+"&nw="+d+"&nh="+c}}if(B){$.ajax({url:f,beforeSend:function(){Ext.Viewport.setMasked({xtype:"loadmask",zIndex:99999999,message:language.clippings.clippingSpinner})}})g})}})}else{var v=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(v);v.show()}},createClipLandscape:function(f,r,l,q,u){var I=this;var D=false;if($(l.image).width()==0||l.image.stayHidden){var j=false}else{var j=true;var k=$(l.image).offset()}if($(l.landscapeimage).width()==0||l.landscapeimage.stayHidden){var A=false}else{var A=true;var G=$(l.landscapeimage).offset()}var t;if(G==null){t=$(l.portraitMediaDiv).offset().left+$(l.portraitMediaDiv).width()}else{t=$(l.landscapeimage).offset().left}if(j){if(l.scale==1){if((parseFloat(f)+5)>=k.left&&(parseFloat(f)+5)<=t){var J=l.image.pageNumber;var d=l.image.naturalWidth;var c=l.image.naturalHeight;var H=d/$(l.image).width();var F=c/$(l.image).height();if(l.scroller.position.y>0){var s=l.scroller.position.y}else{var s=0}var n=parseInt(((parseFloat(f)+5)-k.left+l.scroller.position.x)*H);var m=parseInt(((parseFloat(r)+5)-k.top+l.scroller.position.y-s)*F);var B=parseInt(($(q.element.dom).height()-10)*H);var o=parseInt(($(q.element.dom).width()-10)*F);if(n<0||m<0||m+B>$(l.portraitMediaDiv).height()*F){D=false}else{D=true;var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+J+"&x="+n+"&y="+m+"&h="+B+"&w="+o+"&nw="+d+"&nh="+c}}}else{var p=l.scale;var z=l.translateX*p;var b=parseFloat((l.scroller.position.x)+parseFloat(f));var e=($(l.image).width()*p)+z;if(b+5>=z&&b+5<=e){var J=l.image.pageNumber;var d=l.image.naturalWidth;var c=l.image.naturalHeight;var s=40;if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){s-=40}}var H=d/($(l.image).width()*p);var F=c/($(l.image).height()*p);var a=parseFloat(l.scroller.position.y+parseFloat(r)-s);var n=parseInt(((b+5)-z)*H);var m=parseInt(((a+5))*F);var B=parseInt(($(q.element.dom).height()-10)*H);var o=parseInt(($(q.element.dom).width()-10)*F);if(n<0||m<0||m+B>($(l.landscapeimage).height()*p)*F){D=false}else{D=true;var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+J+"&x="+n+"&y="+m+"&h="+B+"&w="+o+"&nw="+d+"&nh="+c}}}}if(A){if(l.scale==1){if((parseFloat(f)+5)>=G.left&&(parseFloat(f)+5)<=G.left+$(l.landscapeimage).width()){var J=l.landscapeimage.pageNumber;var d=l.landscapeimage.naturalWidth;var c=l.landscapeimage.naturalHeight;var H=d/$(l.landscapeimage).width();var F=c/$(l.landscapeimage).height();if(l.scroller.position.y>0){var s=l.scroller.position.y}else{var s=0}var n=parseInt(((parseFloat(f)+5)-G.left+l.scroller.position.x)*H);var m=parseInt(((parseFloat(r)+5)-G.top+l.scroller.position.y-s)*F);var B=parseInt(($(q.element.dom).height()-10)*H);var o=parseInt(($(q.element.dom).width()-10)*F);if(n<0||n+o>$(l.landscapeimage).width()*H||m<0||m+B>$(l.landscapeimage).height()*F){D=false}else{D=true;var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+J+"&x="+n+"&y="+m+"&h="+B+"&w="+o+"&nw="+d+"&nh="+c}}}else{var p=l.scale;var E=(l.translateX+$(l.landscapeimage).width())*p;var b=parseFloat((l.scroller.position.x)+parseFloat(f));var e=E+($(l.landscapeimage).width()*p);if(b+5>=E&&b+5<=e){var J=l.landscapeimage.pageNumber;var d=l.landscapeimage.naturalWidth;var c=l.landscapeimage.naturalHeight;var s=40;if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){s-=40}}var H=d/($(l.landscapeimage).width()*p);var F=c/($(l.landscapeimage).height()*p);var a=parseFloat(l.scroller.position.y+parseFloat(r)-s);var C=$(l.landscapeimage).height()*p;var n=parseInt(((b+5)-E)*H);var m=parseInt(((a+5))*F);var B=parseInt(($(q.element.dom).height()-10)*H);var o=parseInt(($(q.element.dom).width()-10)*F);if(n+o>($(l.landscapeimage).width()*p)*F||m<0||m+B>($(l.landscapeimage).height()*p)*F){D=false}else{D=true;var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+J+"&x="+n+"&y="+m+"&h="+B+"&w="+o+"&nw="+d+"&nh="+c}}}}if(D){$.ajax({url:g,beforeSend:function(){Ext.Viewport.setMasked({xtype:"loadmask",zIndex:99999999,message:language.clippings.clippingSpinner})}}).done(function(h){Ext.Viewport.setMasked(false);console.log(h.Status);if(h.Status=="success"){I.clippings[I.clippings.length]=h.Value;I.clippingsWidth[I.clippingsWidth.length]=o;I.clippingsHeight[I.clippingsHeight.length]=B;u.selfDestruct();I.clippingMenu()}else{prompt=Ext.create("InfinityMobile.view.ClippingMenuPrompt",{message:language.errorMsg})}})}else{var v=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(v);v.show()}},createClipSingle:function(f,r,l,q,u){var J=this;var j=true;var A=true;if(l.rightSide.element.dom.style.visibility=="hidden"){A=false}else{j=false}var E=true;if(j){var k=$(l.leftSideImg).offset();k.top=k.top;if(k.top<0){k.top=0}var B=J.getReaderCarousel();var s=40;if(B.getActiveItem().zoomMode=="fill"&&$("#slider").val()<=1){s=0}else{if(B.getActiveItem().zoomMode=="fit"&&$("#slider").val()<=1){s=0}else{s=40}}var K=flatPlanData.reversePageMapper[l.leftSideImageContainer.pageNo];var d=l.leftSideImg.naturalWidth;var c=l.leftSideImg.naturalHeight;if($("#slider").val()<=1){var I=d/l.leftSideWidth;var H=c/l.leftSideHeight;if(l.zoomMode=="fill"){if(l.scroller.position.y>0){if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){}else{s+=40}}else{s+=40}if(typeof isTribReader!="undefined"&&isTribReader){s+=20}}}var n=parseInt(((parseFloat(f)+5)-k.left+l.scroller.position.x)*I);var m=parseInt(((parseFloat(r)+5)-k.top+l.scroller.position.y-s)*H);var C=parseInt(($(q.element.dom).height()-10)*I);var o=parseInt(($(q.element.dom).width()-10)*H);if(n<0||n+o>l.leftSideWidth*I||m<0||m+C>l.leftSideHeight*H){E=false;l.failedClipping()}else{var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+K+"&x="+n+"&y="+m+"&h="+C+"&w="+o+"&nw="+d+"&nh="+c}}else{var p=$("#slider").val();if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){s-=40}}if(typeof isTribReader!="undefined"&&isTribReader){s+=20}var z=l.initialTranslateX*p;var b=parseFloat((l.scroller.position.x)+parseFloat(f));var e=z+(l.width*p);var I=d/(l.leftSideWidth*p);var H=c/(l.leftSideHeight*p);var a=parseFloat(l.scroller.position.y+parseFloat(r)-s);var t=l.leftSideHeight*p;var n=parseInt(((b+5)-z)*I);var m=parseInt(((a+5))*I);var C=parseInt(($(q.element.dom).height()-10)*I);var o=parseInt(($(q.element.dom).width()-10)*I);if(n<0||n+o>(l.leftSideWidth*p)*I||m<0||m+C>(l.leftSideHeight*p)*I){E=false}else{var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+K+"&x="+n+"&y="+m+"&h="+C+"&w="+o+"&nw="+d+"&nh="+c}}}else{if(A){var G=$(l.rightSideImg).offset();G.top=G.top;if(G.top<0){G.top=0}var s=40;var B=J.getReaderCarousel();if(B.getActiveItem().zoomMode=="fill"&&$("#slider").val()<=1){s=0}else{if(B.getActiveItem().zoomMode=="fit"&&$("#slider").val()<=1){s=0}else{s=40}}var K=flatPlanData.reversePageMapper[l.rightSideImageContainer.pageNo];var d=l.rightSideImg.naturalWidth;var c=l.rightSideImg.naturalHeight;if($("#slider").val()<=1){var I=d/l.width;var H=c/l.height;if(l.zoomMode=="fill"){if(l.scroller.position.y>0){if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){}else{s+=40}}else{s+=40}}}var n=parseInt(((parseFloat(f)+5)-G.left+l.scroller.position.x)*I);var m=parseInt(((parseFloat(r)+5)-G.top+l.scroller.position.y-s)*I);var C=parseInt(($(q.element.dom).height()-10)*I);var o=parseInt(($(q.element.dom).width()-10)*I);if(n<0||n+o>l.width*I||m<0||m+C>l.height*I){E=false}else{var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+K+"&x="+n+"&y="+m+"&h="+C+"&w="+o+"&nw="+d+"&nh="+c}}else{var p=$("#slider").val();var F=l.initialTranslateX*p;if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){s-=40}}var b=parseFloat((l.scroller.position.x)+parseFloat(f));var e=F+(l.width*p);var I=d/(l.width*p);var H=c/(l.height*p);var a=parseFloat(l.scroller.position.y+parseFloat(r)-s);var D=l.height*p;var n=parseInt(((b+5)-F)*I);var m=parseInt(((a+5))*I);var C=parseInt(($(q.element.dom).height()-10)*I);var o=parseInt(($(q.element.dom).width()-10)*I);if(n<0||n+o>(l.width*p)*I||m<0||m+C>(l.height*p)*I){E=false}else{var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+K+"&x="+n+"&y="+m+"&h="+C+"&w="+o+"&nw="+d+"&nh="+c}}}}if(E){$.ajax({url:g,beforeSend:function(){Ext.Viewport.setMasked({xtype:"loadmask",zIndex:99999999,message:language.clippings.clippingSpinner})}}).done(function(h){Ext.Viewport.setMasked(false);console.log(h);if(h.Status=="success"){J.clippings[J.clippings.length]=h.Value;J.clippingsWidth[J.clippingsWidth.length]=o;J.clippingsHeight[J.clippingsHeight.length]=C;u.selfDestruct();J.clippingMenu()}else{prompt=Ext.create("InfinityMobile.view.ClippingMenuPrompt",{message:language.errorMsg})}})}else{var v=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(v);v.show()}},createClipDouble:function(f,r,l,q,u){var I=this;var j=true;var A=true;if(l.leftPage==null){j=false}if(l.rightPage==null){A=false}if(j){var k=$(l.leftSideImg).offset();k.top=k.top;if(k.top<0){k.top=0}}if(A){var G=$(l.rightSideImg).offset();G.top=G.top;if(G.top<0){G.top=0}}var t;if(G!=null){t=G.left}else{t=k.left+$(l.leftSideImg).width()}var D=true;if(j){if($("#slider").val()<=1){if((parseFloat(f)+5)>=k.left&&(parseFloat(f)+5)<=t){var J=flatPlanData.reversePageMapper[l.leftSideImageContainer.pageNo];var d=l.leftSideImg.naturalWidth;var c=l.leftSideImg.naturalHeight;var H=d/l.width;var F=c/l.height;if(l.scroller.position.y>0){if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){var s=0}else{var s=40}}else{var s=40}}else{var s=0}var n=parseInt(((parseFloat(f)+5)-k.left+l.scroller.position.x)*H);var m=parseInt(((parseFloat(r)+5)-k.top+l.scroller.position.y-s)*H);var B=parseInt(($(q.element.dom).height()-10)*H);var o=parseInt(($(q.element.dom).width()-10)*H);if(n<0||m<0||m+B>l.height*H){D=false}else{D=true;var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+J+"&x="+n+"&y="+m+"&h="+B+"&w="+o+"&nw="+d+"&nh="+c}}else{D=false}}else{var p=$("#slider").val();var z=l.initialTranslateX*p;var b=parseFloat((l.scroller.position.x)+parseFloat(f));var e=(l.width*p)+z;if(b+5>=z&&b+5<=e){var J=flatPlanData.reversePageMapper[l.leftSideImageContainer.pageNo];var d=l.leftSideImg.naturalWidth;var c=l.leftSideImg.naturalHeight;var H=d/(l.width*p);var F=c/(l.height*p);var a=parseFloat(l.scroller.position.y+parseFloat(r));var C=l.height*p;var s=40;if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){s-=40}}var n=parseInt(((b+5)-z)*H);var m=parseInt(((a+5)-s)*H);var B=parseInt(($(q.element.dom).height()-10)*H);var o=parseInt(($(q.element.dom).width()-10)*H);if(n<0||m<0||m+B>(l.height*p)*H){D=false}else{D=true;var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+J+"&x="+n+"&y="+m+"&h="+B+"&w="+o+"&nw="+d+"&nh="+c}}else{D=false}}}if(A){if($("#slider").val()<=1){if((parseFloat(f)+5)>=G.left&&(parseFloat(f)+5)<=G.left+l.width){var J=flatPlanData.reversePageMapper[l.rightSideImageContainer.pageNo];var d=l.rightSideImg.naturalWidth;var c=l.rightSideImg.naturalHeight;var H=d/l.width;var F=c/l.height;if(l.scroller.position.y>0){if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){var s=0}else{var s=40}}else{var s=40}}else{var s=0}var n=parseInt(((parseFloat(f)+5)-G.left+l.scroller.position.x)*H);var m=parseInt(((parseFloat(r)+5)-G.top+l.scroller.position.y-s)*H);var B=parseInt(($(q.element.dom).height()-10)*H);var o=parseInt(($(q.element.dom).width()-10)*H);if((n<0&&!j)||n+o>l.width*H||m<0||m+B>l.height*H){D=false}else{D=true;var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+J+"&x="+n+"&y="+m+"&h="+B+"&w="+o+"&nw="+d+"&nh="+c}}else{if(!j){D=false}}}else{var p=$("#slider").val();var E=(l.initialTranslateX+l.width)*p;var b=parseFloat((l.scroller.position.x)+parseFloat(f));var e=E+(l.width*p);if(b+5>=E&&b+5<=e){var J=flatPlanData.reversePageMapper[l.rightSideImageContainer.pageNo];var d=l.rightSideImg.naturalWidth;var c=l.rightSideImg.naturalHeight;var H=d/(l.width*p);var F=c/(l.height*p);var a=parseFloat(l.scroller.position.y+parseFloat(r));var C=l.height*p;var s=40;if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){s-=40}}var n=parseInt(((b+5)-E)*H);var m=parseInt(((a+5)-s)*H);var B=parseInt(($(q.element.dom).height()-10)*H);var o=parseInt(($(q.element.dom).width()-10)*H);if(n+o>(l.width*p)*H||m<0||m+B>(l.height*p)*H){D=false}else{D=true;var g="http://clippings.pagesuite.com/create_clipping.aspx?eid="+editionguid+"&pnum="+J+"&x="+n+"&y="+m+"&h="+B+"&w="+o+"&nw="+d+"&nh="+c}}else{if(!j){D=false}}}}if(D){$.ajax({url:g,beforeSend:function(){Ext.Viewport.setMasked({xtype:"loadmask",zIndex:99999999,message:language.clippings.clippingSpinner})}}).done(function(h){Ext.Viewport.setMasked(false);console.log(h.Status);if(h.Status=="success"){I.clippings[I.clippings.length]=h.Value;I.clippingsWidth[I.clippingsWidth.length]=o;I.clippingsHeight[I.clippingsHeight.length]=B;u.selfDestruct();I.clippingMenu()}else{prompt=Ext.create("InfinityMobile.view.ClippingMenuPrompt",{message:language.errorMsg})}})}else{var v=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(v);v.show()}},resizeClipping:function(){var a=this;if(a.getClippingarea()!=null){a.getClippingarea().resize()}},resetClippingArea:function(b){var c=b.readerActiveItem;var a=b.reader;b.selfDestruct();if(Ext.os.is.Desktop){var d=Ext.create("InfinityMobile.view.ClippingArea",{readerActiveItem:c,reader:a})}else{var d=Ext.create("InfinityMobile.view.tablet.ClippingArea",{readerActiveItem:c,reader:a})}Ext.Viewport.add(d);d.show()},deletb,1)},disableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().disableEvents()}},enableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().enableEvents()}},hideArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().hide()}},clippingSinglePage:function(e,j,f,a,c){var h=this;var g=true;var b=true;if(f.xtype!="readeradvertpageviewer"){if(f.rightSide.element.dom.style.visibility=="hidden"){b=false}else{g=false}var d=true;if(g){h.clipSideDesktop("single","left",e,j,f,a,c,f.leftSideImg,f.leftSideImageContainer,f.leftSideWidth,f.leftSideHeight)}else{h.clipSideDesktop("single","right",e,j,f,a,c,f.rightSideImg,f.rightSideImageContainer,f.rightSideWidth,f.rightSideHeight)}}},clippingDoublePage:function(d,l,g,k,n){var u=this;var e=true;var q=true;if(g.leftPage==null||g.config.leftPage.type=="sectionpage"){e=false}if(g.rightPage==null||g.config.rightPage.type=="sectionpage"){q=false}if(e){var f=$(g.leftSideImg).offset();f.top=f.top;if(f.top<0){f.top=0}}if(q){var t=$(g.rightSideImg).offset();t.top=t.top;if(t.top<0){t.top=0}}var m;if(t!=null){m=t.left}else{m=f.left+$(g.leftSideImg).width()}var h=false;var r=true;if(e){if($("#slider").val()<=1){if((parseFloat(d)+5)>=f.left&&(parseFloat(d)+5)<=m){var b="double";if(g.config.rightPage==""||g.config.rightPage.type=="sectionpage"){b="single"}u.clipSideDesktop(b,"left",d,l,g,k,n,g.leftSideImg,g.leftSideImageContainer,g.leftSideWidth,g.leftSideHeight)}else{h=true}}else{var j=$("#slider").val();var p=g.initialTranslateX*j;var a=parseFloat((g.scroller.position.x)+parseFloat(d));var c=(g.width*j)+p;if(a+5>=p&&a+5<=c){u.clipDoubleZoomed("left",d,l,g,k,n,g.leftSideImg,g.leftSideImageContainer,g.leftSideWidth,g.leftSideHeight,p,a)}else{if(!q){var o=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(o);o.show()}else{h=true}}}}if(q){if($("#slider").val()<=1){if((parseFloat(d)+5)>=t.left&&(parseFloat(d)+5)<=t.left+g.width){var b="double";if(g.config.leftPage.type=="sectionpage"){b="single"}u.clipSideDesktop(b,"right",d,l,g,k,n,g.rightSideImg,g.rightSideImageContainer,g.rightSideWidth,g.rightSideHeight)}else{if(!e){var o=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(o);o.show()}else{if(h){var o=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(o);o.show()}}}}else{var j=$("#slider").val();var s=(g.initialTranslateX+g.width)*j;var a=parseFloat((g.scroller.position.x)+parseFloat(d));var c=s+(g.width*j);if(a+5>=s&&a+5<=c){u.clipDoubleZoomed("right",d,l,g,k,n,g.rightSideImg,g.rightSideImageContainer,g.rightSideWidth,g.rightSideHeight,s,a)}else{if(!e){var o=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(o);o.show()}else{if(h){var o=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(o);o.show()}}}}}if(h&&!q){var o=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(o);o.show()}},clipSideDesktop:function(j,e,l,u,o,t,z,d,J,b,E){var K=this;var G=true;var m=$(d).offset();m.top=m.top;if(m.top<0){m.top=0}var v=40;var B=K.getReaderCarousel();if(B.getActiveItem().zoomMode=="fill"&&$("#slider").val()<=1){v=0}else{if(B.getActiveItem().zoomMode=="fit"&&$("#slider").val()<=1){v=0}else{v=40}}pageNo=flatPlanData.pageGroups[J.pageNo-1+pageOffset]!=null?flatPlanData.pageGroups[J.pageNo-1+pageOffset].pages[0].origPageNum:pageNo;var g=d.naturalWidth;var f=d.naturalHeight;if($("#slider").val()<=1){var I=g/b;var H=f/E;if(o.zoomMode=="fill"){if(o.scroller.position.y>0){if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar!="true"){v+=40}}else{v+=40}if(typeof isTribReader!="undefined"&&isTribReader){v+=20}}}var q=parseInt(((parseFloat(l)+5)-m.left+o.scroller.position.x)*I);var p=parseInt(((parseFloat(u)+5)-m.top+o.scroller.position.y-v)*H);var C=parseInt(($(t.element.dom).height()-10)*I);var r=parseInt(($(t.element.dom).width()-10)*H);if(j=="single"){if(q<0||q+r>b*I||p<0||p+C>E*H){G=false}}else{if(e=="left"){if(q<0||p<0||p+C>E*I){G=false}}else{if(q<0||p<0||p+C>E*I||q+r>b*I){G=false}}}}else{var s=$("#slider").val();if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){v-=40}}var n=0;if(typeof isTribReader!="undefined"&&isTribReader){v+=20;n+=150}var F=o.initialTranslateX*s+n;var c=parseFloat((o.scroller.position.x)+parseFloat(l));var k=F+(b*s);var I=g/(b*s);var H=f/(E*s);var a=parseFloat(o.scroller.position.y+parseFloat(u)-v);var D=E*s;var q=parseInt(((c+5)-F)*I);var p=parseInt(((a+5))*I);var C=parseInt(($(t.element.dom).height()-10)*I);var r=parseInt(($(t.element.dom).width()-10)*I);if(q<0||q+r>(b*s)*I||p<0||p+C>(E*s)*I){G=false}}if(G){K.getClipping(pageNo,q,p,C,r,g,f,z)}else{var A=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(A);A.show()}},clipDoubleZoomed:function(e,j,s,l,r,u,c,F,b,A,B,d){var G=this;var C=true;var H=flatPlanData.reversePageMapper[F.pageNo];var p=flatPlanData.pageGroups!=null&&flatPlanData.pageGroups[F.pageNo-1]!=null&&flatPlanData.pageGroups[F.pageNo-1].pages[0].advertsAdded!=null?flatPlanData.pageGroups[F.pageNo-1].pages[0].advertsAdded:0;H-=p;var q=$("#slider").val();var g=c.naturalWidth;var f=c.naturalHeight;var E=g/(b*q);var D=f/(A*q);var a=parseFloat(l.scroller.position.y+parseFloat(s));var t=40;if(settings.topbar.toggleTopBar!=null){if(settings.topbar.toggleTopBar=="true"){t-=40}}var k=0;if(typeof isTribReader!="undefined"&&isTribReader){t+=20;k+=150}var n=parseInt(((d+5)-B-k)*E);var m=parseInt(((a+5)-t)*E);var z=parseInt(($(r.element.dom).height()-10)*E);var o=parseInt(($(r.element.dom).width()-10)*E);if(e=="left"){if(n<0||m<0||m+z>(A*q)*E){C=false}}else{if(n<0||m<0||m+z>(A*q)*E||n+o>((b*q)*E)){C=false}}if(C){G.getClipping(H,n,m,z,o,g,f,u)}else{var v=Ext.create("InfinityMobile.view.clippingError");Ext.Viewport.add(v);v.show()}},getClipping:function(a,j,g,d,l,e,k,b){var f=this;var c="http://clippings.pagesuite.com";if(location.protocol=="https:"){c="https://integrations.pagesuite.com"}$.ajax({url:c+"/create_clipping.aspx?eid="+editionguid+"&pnum="+a+"&x="+j+"&y="+g+"&h="+d+"&w="+l+"&nw="+e+"&nh="+k,beforeSend:function(){Ext.Viewport.setMasked({xtype:"loadmask",zIndex:99999999,message:language.clippings.clippingSpinner})}}).done(function(h){Ext.Viewport.setMasked(false);console.log(h);if(h.Status=="success"){f.clippings[f.clippings.length]=h.Value!=null?h.Value.replace("http://media.cdn.pagesuite.com","https://media.pagesuite.com"):h.Value;f.shareClippings[f.shareClippings.length]=c+"/clipping.aspx?url="+encodeURIComponent(h.Value);f.clippingsWidth[f.clippingsWidth.length]=l;f.clippingsHeight[f.clippingsHeight.length]=d;b.selfDestruct();f.clippingMenu()}else{prompt=Ext.create("InfinityMobile.view.ClippingMenuPrompt",{message:language.errorMsg})}})}},0,0,0,0,0,0,[InfinityMobile.controller,"ClippingController"],0));(Ext.cmd.derive("InfinityMobile.controller.ArticleController",Ext.app.Controller,{config:{refs:{articlereader:"articlereader",articlereaderitemlrg:"articlereaderitemlrg",articlereaderitemsmall:"articlereaderitemsmall",articlereaderitemmedwide:"articlereaderitemmedwide",articlereaderitemmedtall:"articlereaderitemmedtall",articlereaderitemmedwidetall:"articlereaderitemmedwidetall",articlereaderitemtopstories:"articlereaderitemtopstories",articleview:"articleview",articlereadersectionbtn:"articlereadersectionbtn",articlereaderlivenewsbtn:"articlereaderlivenewsbtn",articlereadertopbarbtn:"articlereadertopbarbtn",articlereadertoggleviewoptions:"articlereadertoggleviewoptions",articlereadermenu:"articlereadermenu",articlescontainer:"articlescontainer",reader:"infinitecarousel2d",articlescontainer:"articlescontainer",articlereaderpanelcontainer:"articlereaderpanelcontainer",howtoarticlescontainer:"howtoarticlescontainer",howtoreader:"howtoreader",livenewsticker:"livenewsticker",layoutview:"layoutview"},control:{articlereader:{initialized:"readerInitialize"},articlereaderitemlrg:{showArticlePopover:"showArticlePopover",tileTapped:"tileTapped",liveArticleClick:"liveArticleClick"},articlereaderitemsmall:{showArticlePopover:"showArticlePopover",tileTapped:"tileTapped",liveArticleClick:"liveArticleClick"},articlereaderitemmedwide:{showArticlePopover:"showArticlePopover",tileTapped:"tileTapped",liveArticleClick:"liveArticleClick"},articlereaderitemmedtall:{showArticlePopover:"showArticlePopover",tileTapped:"tileTapped",liveArticleClick:"liveArticleClick"},articlereaderitemmedwidetall:{showArticlePopover:"showArticlePopover",tileTapped:"tileTapped",liveArticleClick:"liveArticleClick"},articleview:{initializeArticlePopover:"initializeArticlePopover"},articlereaderitemtopstories:{tileTapped:"tileTapped"},articlereadersectionbtn:{loadSection:"loadSection"},articlereaderlivenewsbtn:{liveNewsTiles:"liveNewsTiles"},articlereadertopbarbtn:{toolbarMenu:"toolbarMenu",toggleReaderOptions:"toggleReaderOptions"},articlereadertoggleviewoptions:{replicaPaperView:"replicaPaperView",dynamicView:"dynamicView"},articleview:{initializeLivePopover:"initializeLivePopover",liveNext:"liveNext",livePrevious:"livePrevious"},livenewsticker:{liveNewsTickerArticle:"liveNewsTickerArticle"},readerpageviewer:{resizeArticlesBrowser:"resizeArticlesBrowser"},infinitecarousel2d:{resizeDynamicArticles:"resizeDynamicArticles"},infinitecarousel:{resizeDynamicArticles:"resizeDynamicArticles"},articlescontainer:{expandArticles:"expandArticles"},articlereaderitemphone:{showArticlePopover:"showArticlePopover",tileTapped:"tileTapped",liveArticleClick:"liveArticleClick"},howtoarticlescontainer:{howToArticlesInit:"howToArticlesInit"},howtoreader:{howToReaderInit:"howToReaderInit"}}},init:function(){var b=this;articleMode="dynamic";var c=Ext.getStore("ArticleStore");c.on({load:"setArticles",scope:this});var a=Ext.getStore("SettingStore");a.on({load:"setSections",scope:this});b.loaded=false},setSections:function(a){var b=this;b.settings=a.data.items[0].raw;b.sections=[];if(a.data.items[0].raw.bookmarks!=null){b.sections=a.data.items[0].raw.bookmarks.bookmark;b.sortSections()}},sortSections:function(){var d=this;var b;for(var c=0;c<d.sections.length;c++){var e=d.sections[c];for(var a=0;a<d.sections.length;a++){if(parseFloat(e.pageNumber)<parseFloat(d.sections[a].pageNumber)){b=d.sections[c];d.sections[c]=d.sections[a];d.sections[a]=b}}}},setArticles:function(a){var b=this;b.setArticleStoreDictionary(a);b.articles=[];b.mediaStore=Ext.getStore("MediaStore");b.mediaStore.on({load:function(z){var e=true;if(settings.newsday!=null){e=false}if(e){var o=z.data.items[0].raw.media.article;var w="";var h=0;for(var A=0;A<o.length;A++){for(var q=0;q<a.data.items[0].raw.articles.length;q++){if(o[A].file==a.data.items[0].raw.articles[q].guid){var m=JSON.parse(JSON.stringify(a.data.items[0].raw.articles[q]));var t=true;for(var p=0;p<b.articles.length;p++){if(b.articles[p].guid==m.guid){h++;t=false;break}}if(t){m.config={};m.config.articleIndex=o[A].uniquearticleindex;var s=/<p[^>]*>/g;var v="";var C=[];while((match1=s.exec(m.body))!=null){C[C.length]=match1.index}s=/<\/p/g;var c=[];while((match=s.exec(m.body))!=null){c[c.length]=match.index}s=/<p[^>]*>/g;for(var A=0;A<C.length;A++){var v=m.body.substring(C[A],c[A]).replace(s,"");if(v.length>0){m.shortStory=v;break}else{var r=/\n|([^\r\n.!?]+([.!?]+|$))/gim;var j=[];while((match2=r.exec(m.body))!=null){if(j.length<2){j[j.length]=match2.index}else{break}}if(j[1]>0){m.shortStory=m.body.substring(0,j[1])}else{m.shortStory=""}}}if(m.shortStory==null){var r=/\n|([^\r\n.!?]+([.!?]+|$))/gim;var j=[];while((match2=r.exec(m.body))!=null){if(j.length<2){j[j.length]=match2.index}else{break}}if(j[1]>0){m.shortStory=m.body.substring(0,j[1])}else{m.shortStory=""}}b.articles.push(m);w=m.guid;break}}}}for(var q=0;q<b.articles.length;q++){var g=/style=["'][^\"]*["']/g;var d=b.articles[q].body.match(g);if(d!=null){for(var A=0;A<d.length;A++){if(d[A].indexOf("font-size")!=-1){var l=d[A].indexOf("font-size");var f=0;for(var p=l;p<d[A].length;p++){if(d[A][p]==";"){f=p;break}}}var B=d[A].substring(0,l)+d[A].substring(f,d[A].length);b.articles[q].body=b.articles[q].body.replace(d[A],B);d[A]=B;if(d[A].indexOf("line-height")!=-1){var n=d[A].indexOf("line-height");var D=0;for(var p=n;p<d[A].length;p++){if(d[A][p]==";"){D=p;break}}}var u=d[A].substring(0,n)+d[A].substring(D,d[A].length);b.articles[q].body=b.articles[q].body.replace(d[A],u)}}var k=/<p/g;while((pTagMatch=k.exec(b.articles[q].body))!=null){var l=pTagMatch.index;b.articles[q].body=b.articles[q].body.substring(0,l)+"<p class='articleText' "+b.articles[q].body.substring(l+2,b.articles[q].body.length)}}try{if(localStorage.getItem("bodyFontSize"+publicationguid)==null){localStorage.setItem("bodyFontSize"+publicationguid,"16")}}catch(E){}try{if(localStorage.getItem("headlineFontSize"+publicationguid)==null){localStorage.setItem("headlineFontSize"+publicationguid,"32")}}catch(E){}try{if(localStorage.getItem("subheadlineFontSize"+publicationguid)==null){localStorage.setItem("subheadlineFontSize"+publicationguid,"20")}}catch(E){}try{if(localStorage.getItem("bylineFontSize"+publicationguid)==null){localStorage.setItem("bylineFontSize"+publicationguid,"18")}}catch(E){}try{if(localStorage.getItem("sectionFontSize"+publicationguid)==null){localStorage.setItem("sectionFontSize"+publicationguid,"18")}}catch(E){}}}})},setArticleStoreDictionary:function(b){var d=this;b.allArticles={};var a=b.data.items[0].raw.articles;for(var c=0;c<a.length;c++){var e=a[c];b.allArticles[e.guid]=e}},getArticles:function(){var a=this;return a.articles},getSectionsWithArtrn d},findArnull},readerInitialize:function(c,b){var a=this;if(Ext.os.is.Phone){a.articleReaderLoadPhone(c,b)}else{a.articleReaderLoad(c,b)}},articleReaderLoadPhone:function(k,m){var y=this;articleMode="dynamic";if(y.getArticlescontainer()!=null){y.getArticlescontainer().destroy()}k.content.removeAll();var s=k.content;var w;var d=true;if(m!=1){var q=Ext.create("InfinityMobile.view.ArticleReaderTopBarBtn",{imageUrl:"../assets/dynamicarticles/dynamic-mode-ic-white@2x.png",left:0,width:60,height:25,top:8,type:"btn",action:"toggleReaderOptions",tooltipText:"Toggle View"});var c=Ext.create("InfinityMobile.view.ArticleReaderTopBarBtn",{imageUrl:y.settings.topbar.logo,left:60,width:120,height:32,top:4,type:"logo"});k.toolBar.add(c);k.toolBar.add(q);y.loadSectionButtons(k)}for(var o=0;o<y.articles.length;o++){y.articles[o].sections=[];for(var t=0;t<y.sections.length;t++){if(y.articles[o].pageNumber>=y.sections[t].page){y.articles[o].sections[0]=y.sections[t].name.toUpperCase()}}}if(y.sections[0]!=null){y.firstSection=y.sections[0].name.toUpperCase();y.loadSection(y.sections[0].name.toUpperCase());setTimeout(function(){k.loadReaderPhone()},800)}else{y.firstSection=language.dynamicArticles.all;var d=true;var s=y.articleReader.content;var w;var r;var t=0;if(y.settings.dynamic.weather==null){}else{if(y.settings.dynamic.weather.url.length>0){var l=Ext.create("InfinityMobile.view.phone.ArticleReaderItemTopStories",{expandAnim:"expandTopStory 0.2s forwards",shrinkAnim:"shrinkTopStory 0.2s ease-out",articles:[]});y.articleReader.content.add(l)}}var a=y.articles;while(t<a.length){if(d){r=Ext.create("InfinityMobile.view.phone.ArticleReaderPanelContainer");var w=Ext.create("InfinityMobile.view.phone.ArticleReaderItemContainer");if(a.length>(t)){var v=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:0%;left:0px;",article:a[t],articleIndex:t});w.add(v)}if(a.length>(t+1)){var p=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:0%;left:50%;",article:a[t+1],articleIndex:t+1});w.add(p)}if(a.length>(t+2)){var n=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:200px;left:0px;",article:a[t+2],articleIndex:t+2});w.add(n)}if(a.length>(t+3)){var n=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:200px;left:50%;",article:a[t+3],articleIndex:t+3});w.add(n)}if(a.length>(t+4)){var n=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:400px;left:0px;",article:a[t+4],articleIndex:t+4});w.add(n)}if(a.length>(t+5)){var n=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:400px;left:50%;",article:a[t+5],articleIndex:t+5});w.add(n)}t+=6;if(t<a.length){d=false;r.add(w);if(y.settings.dynamic.adverts!=null){if(y.settings.dynamic.adverts.bannerAd!=null){var b=Ext.create("InfinityMobile.view.phone.ArticleReaderBannerAd",{style:"height:200px;width:100%;"});r.add(b)}}}else{r.add(w);var f=w.items.length;if(f%2==1){f+=1}var u=f*100;r.element.dom.style.height=u+"px"}}else{var w=Ext.create("InfinityMobile.view.phone.ArticleReaderItemContainer");if(a.length>(t)){var v=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:0%;left:0px;",article:a[t],articleIndex:t});w.add(v)}if(a.length>(t+1)){var p=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:0%;left:50%;",article:a[t+1],articleIndex:t+1});w.add(p)}if(a.length>(t+2)){var n=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:200px;left:0px;",article:a[t+2],articleIndex:t+2});w.add(n)}if(a.length>(t+3)){var j=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:200px;left:50%;",article:a[t+3],articleIndex:t+3});w.add(j)}if(a.length>(t+4)){var g=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:400px;left:0px;",article:a[t+4],articleIndex:t+4});w.add(g)}if(a.length>(t+5)){var e=Ext.create("InfinityMobile.view.phone.ArticleReaderItemPhone",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:400px;left:50%;",article:a[t+5],articleIndex:t+5});w.add(e)}t+=6;d=true;r.add(w);if(t>=a.length){var f=w.items.length;if(f%2==1){f+=1}var u=f*100;if(y.settings.dynamic.adverts!=null){if(y.settings.dynamic.adverts.bannerAd!=null){u+=650}else{u+=600}}else{u+=600}r.element.dom.style.height=u+"px"}}if(d){y.articleReader.content.add(r);if(y.articleReader.content.getScrollable()!=null){y.articleReader.content.getScrollable().getScroller().scrollTo(0,0)}else{y.articleReader.scollDesktop.scrollLeft=0}}}}},articleReaderLoad:function(g,m){var E=this;articleMode="dynamic";if(E.getArticlescontainer()!=null){E.getArticlescontainer().destroy()}g.content.removeAll();var w=true;var v=g.content;var C;if(m!=1){var s=Ext.create("InfinityMobile.view.ArticleReaderTopBarBtn",{imageUrl:"../assets/dynamicarticles/dynamic-mode-ic-white@2x.png",left:0,width:60,height:25,top:8,type:"btn",action:"toggleReaderOptions",tooltipText:"Toggle View"});var c=Ext.create("InfinityMobile.view.ArticleReaderTopBarBtn",{imageUrl:E.settings.topbar.logo,left:60,width:120,height:32,top:4,type:"logo"});g.toolBar.add(c);g.toolBar.add(s);E.loadLiveNews(g);E.loadSectionButtons(g)}for(var o=0;o<E.articles.length;o++){E.articles[o].sections=[];for(var A=0;A<E.sections.length;A++){if(E.articles[o].pageNumber>=E.sections[A].page){E.articles[o].sections[0]=E.sections[A].name.toUpperCase()}}}if($(document).height()>768&&(Ext.os.is.Desktop||currentProfile=="largetablet")){E.tileMode="large";E.currentSection=language.dynamicArticles.all;var t;var A=0;while(A<E.articles.length){if(Ext.os.is.Desktop||Ext.os.is.Tablet){if(w){t=Ext.create("InfinityMobile.view.desktop.ArticleReaderPanelContainer");C=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemContainer");if(E.articles.length>(A)){if(A!=0||(E.getSectionsWithArticles()<2&&E.settings.dynamic.weather==null)){var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemLrg",{expandAnim:"expandTopStory 0.2s ease-in",shrinkAnim:"shrinkTopStory 0.2s ease-out",style:"position:absolute;top:0px;left;0px;",article:E.articles[A],articleIndex:A});C.add(k)}else{if(E.getSectionsWithArticles()<2&&(E.settings.dynamic.weather==null||E.settings.dynamic.weather.url.length==0)){var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemLrg",{expandAnim:"expandTopStory 0.2s ease-in",shrinkAnim:"shrinkTopStory 0.2s ease-out",style:"position:absolute;top:0px;left;0px;",article:E.articles[A],articleIndex:A});C.add(k)}else{var b=[];A-=1;for(var o=0;o<E.sections.length;o++){for(var l=0;l<E.articles.length;l++){if(E.sections[o].pageNumber<=E.articles[l].pageNumber){b[b.length]=E.articles[l];break}}}if(b.length==0){b[0]=E.articles[0];A+=1}var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemTopStories",{expandAnim:"expandTopStory 0.2s forwards",shrinkAnim:"shrinkTopStory 0.2s ease-out",style:"position:absolute;top:0px;left;0px;",articles:b});C.add(k)}}}if(E.articles.length>(A+1)){if(E.settings.dynamic.adverts!=null){if(E.settings.dynamic.adverts.bannerAd!=null){var p=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:60%;left:0px;",article:E.articles[A+1],articleIndex:A+1})}else{var p=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col1LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:0px;",article:E.articles[A+1],articleIndex:A+1})}C.add(p)}else{var p=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col1LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:0px;",article:E.articles[A+1],articleIndex:A+1});C.add(p)}}if(E.articles.length>(A+2)){if(E.settings.dynamic.adverts!=null){if(E.settings.dynamic.adverts.bannerAd!=null){var n=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow3Col2LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col2LeftSmall 0.2s ease-out",style:"position:absolute;top:60%;left:256px;",article:E.articles[A+2],articleIndex:A+2})}else{var n=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col2LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col2LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:256px;",article:E.articles[A+2],articleIndex:A+2})}C.add(n)}else{var n=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col2LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col2LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:256px;",article:E.articles[A+2],articleIndex:A+2});C.add(n)}}if(E.articles.length>(A+3)){if(E.settings.dynamic.adverts!=null){if(E.settings.dynamic.adverts.bannerAd!=null){var j=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow3Col3LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col3LeftSmall 0.2s ease-out",style:"position:absolute;top:60%;left:512px;",article:E.articles[A+3],articleIndex:A+3})}else{var j=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col3LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col3LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:512px;",article:E.articles[A+3],articleIndex:A+3})}C.add(j)}else{var j=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col3LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col3LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:512px;",article:E.articles[A+3],articleIndex:A+3});C.add(j)}}if(E.articles.length>=(A+4)){if(E.settings.dynamic.adverts!=null){if(E.settings.dynamic.adverts.bannerAd!=null){var a=Ext.create("InfinityMobile.view.desktop.ArticleReaderBannerAd",{style:"position:absolute;top:90%;height:100%;width:100%;",height:"15%",settings:E.settings.dynamic.adverts.bannerAd});C.add(a)}}}A+=4;if(A<E.articles.length){w=false;t.add(C)}else{t.add(C);$(t.element.dom).css("width","768px")}}else{C=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemContainer");if(E.articles.length>A){var r=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow1Col1Right 0.2s ease-in",shrinkAnim:"shrinkRow1Col1Right 0.2s ease-out",style:"position:absolute;top:0px;left:0px;",article:E.articles[A],articleIndex:A});C.add(r)}if(E.articles.length>(A+1)){var p=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedWide",{expandAnim:"expandRow1Col2Right 0.2s ease-in",shrinkAnim:"shrinkRow1Col2Right 0.2s ease-out",style:"position:absolute;top:0px;left:256px;",article:E.articles[A+1],articleIndex:A+1});C.add(p)}if(E.articles.length>(A+2)){var n=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow2Col1Right 0.2s ease-in",shrinkAnim:"shrinkRow2Col1Right 0.2s ease-out",style:"position:absolute;top:30%;left:0px;",article:E.articles[A+2],articleIndex:A+2});C.add(n)}if(E.articles.length>(A+3)){var j=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow2Col2Right 0.2s ease-in",shrinkAnim:"shrinkRow2Col2Right 0.2s ease-out",style:"position:absolute;top:30%;left:256px;",article:E.articles[A+3],articleIndex:A+3});C.add(j)}if(E.articles.length>(A+4)){var f=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow2Col3Right 0.2s ease-in",shrinkAnim:"shrinkRow2Col3Right 0.2s ease-out",style:"position:absolute;top:30%;left:512px;",article:E.articles[A+4],articleIndex:A+4});C.add(f)}if(E.articles.length>(A+5)){var e=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col1Right 0.2s ease-in",shrinkAnim:"shrinkRow3Col1Right 0.2s ease-out",style:"position:absolute;top:60%;left:0px;",article:E.articles[A+5],articleIndex:A+5});C.add(e)}if(E.articles.length>(A+6)){var d=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedWideTall",{expandAnim:"expandRow3Col2Right 0.2s ease-in",shrinkAnim:"shrinkRow3Col2Right 0.2s ease-out",style:"position:absolute;top:60%;left:256px;",article:E.articles[A+6],articleIndex:A+6});C.add(d)}t.add(C);A+=7;w=true}}if(w){var u;var z;var D;if(E.settings.dynamic.adverts!=null){if(E.settings.dynamic.adverts.interstitial!=null&&A<E.articles.length){var B=$(document).height()-120;var q=B*0.8;var u=((q*0.3)*2)+(q*0.45)-10;z=Ext.create("InfinityMobile.view.desktop.DynamicArticlesInterstitialContainer");D=Ext.create("InfinityMobile.view.desktop.DynamicArticlesInterstitial",{adHeight:u,settings:E.settings.dynamic.adverts.interstitial})}}g.content.add(t);if(D!=null&&z!=null){z.add(D);g.content.add(z)}}else{}}}else{E.tileMode="small";E.currentSection=language.dynamicArticles.all;E.buildTilesSmall(E.articles,language.dynamicArticles.all)}if(Ext.os.is.Desktop){if(Ext.browser.is.IE){setTimeout(function(){var h=0;var x=Ext.ComponentQuery.query(".articlereaderpanelcontainer");for(t in x){h+=$(x[t].element.dom).width()+10}var y=Ext.ComponentQuery.query(".dynamicarticlesinterstitialcontainer");for(interstitial in y){h+=$(y[interstitial].element.dom).width()+5}if(settings.dynamic.rss==null){E.articleReader.content.element.down(".x-container").next("div").down(".x-scroll-view").down(".x-scroll-container").dom.style.width=h+"px"}else{E.articleReader.content.element.down(".x-container").next("div").next("div").down(".x-scroll-view").down(".x-scroll-container").dom.style.width=h+"px"}},100)}E.dynamicKeyControls(g)}},dynamicKeyControls:function(b){var a=this;window.onkeydown=function(c){if(currentProfile=="desktop"&&!Ext.browser.is.IE){if(c.keyCode==39){if(b.scrollDesktop.scrollLeft+120<b.scrollDesktop.scrollWidth){b.scrollDesktop.scrollLeft=b.scrollDesktop.scrollLeft+120}else{b.scrollDesktop.scrollLeft=b.scrollDesktop.scrollWidth}}else{if(c.keyCode==37){if(b.scrollDesktop.scrollLeft-120>0){b.scrollDesktop.scrollLeft=b.scrollDesktop.scrollLeft-120}else{b.scrollDesktop.scrollLeft=0}}}}else{if(c.keyCode==39){if(b.content.getScrollable().getScroller().position.x+120<b.content.getScrollable().getScroller().maxPosition.x){b.content.getScrollable().getScroller().scrollTo(b.content.getScrollable().getScroller().position.x+120)}else{b.content.getScrollable().getScroller().scrollTo(b.content.getScrollable().getScroller().maxPosition.x)}}else{if(c.keyCode==37){if(b.content.getScrollable().getScroller().position.x-120>0){b.content.getScrollable().getScroller().scrollTo(b.content.getScrollable().getScroller().position.x-120)}else{b.content.getScrollable().getScroller().scrollTo(0)}}}}};window.onkeyup=""},loadLiv)}}}},loadSectionButtons:function(k){var m=this;m.articleReader=k;if(!m.loaded){var j=this;var p=Ext.create("Ext.Container",{docked:"top",height:40,padding:5,width:"100%",style:"border-bottom: 1px solid #929292;text-align:center;"});if(Ext.os.is.Desktop){var a=Ext.create("Ext.Container",{height:40,scrollable:{direction:"horizontal",indicators:false,directionLock:true},layout:{type:"hbox",pack:"middle"}})}else{if(Ext.os.is.Tablet||Ext.os.is.Phone){var a=Ext.create("Ext.Container",{scrollable:{direction:"horizontal",indicators:false,directionLock:true},height:40,layout:{type:"hbox"}})}}m.buttons=[];if(settings.dynamic.rss!=null){if(settings.dynamic.rss.url!=null){if(settings.dynamic.rss.url.length>0){var f=Ext.create("InfinityMobile.view.ArticleReaderLiveNewsBtn",{width:120,height:40,section:language.dynamicArticles.liveNews});if(a!=null){a.add(f);m.buttons[m.buttons.length]=f}}}}if(!Ext.os.is.phone){var g=Ext.create("InfinityMobile.view.ArticleReaderSectionBtn",{section:language.dynamicArticles.all,width:60,height:40});a.add(g);m.buttons[m.buttons.length]=g}else{if(m.sections.length==0){var g=Ext.create("InfinityMobile.view.ArticleReaderSectionBtn",{section:language.dynamicArticles.all,width:60,height:40});a.add(g);m.buttons[m.buttons.length]=g}}for(var h=0;h<m.sections.length;h++){var n=false;for(var o=0;o<m.articles.length;o++){if(m.sections[h+1]!=null){if(parseFloat(m.sections[h].pageNumber)<=parseFloat(m.articles[o].pageNumber)&&parseFloat(m.sections[h+1].pageNumber)>parseFloat(m.articles[o].pageNumber)){n=true;break}}else{if(parseFloat(m.sections[h].pageNumber)<=parseFloat(m.articles[o].pageNumber)){n=true;break}}}if(m.sections[h].name.length==0){n=false}if(n){var e=document.createElement("canvas");var l=e.getContext("2d");l.font="14px Arial";var b=l.measureText(m.sections[h].name.toUpperCase()).width*1.2;var d=Ext.create("InfinityMobile.view.ArticleReaderSectionBtn",{section:m.sections[h].name.toUpperCase(),width:b,height:40});a.add(d);m.buttons[m.buttons.length]=d}}p.add(a);k.content.add(p);m.loaded=true}},liveNewsTiles:function(){var a=this;if(a.settings.dynamic.rss!=null){if(a.settings.dynamic.rss.url!=null){a.currentSection=language.dynamicArticles.liveNews;$.ajax({url:"../../rssWrapper.aspx?base64url="+encodeURIComponent(btoa(a.settings.dynamic.rss.url)),dataType:"json",success:function(d){if(d.feed&&d.feed.entries){var c=[];$.each(d.feed.entries,function(f,g){c.push(g)});a.articleReader.content.removeAll();for(var b=0;b<a.buttons.length;b++){if(a.buttons[b].section==language.dynamicArticles.liveNews){a.buttons[b].element.down("span").dom.style.color="#b22930"}else{a.buttons[b].element.dom.style.color="#929292"}}if(Ext.os.is.Phone){a.buildTiles(c,language.dynamicArticles.liveNews)}else{if($(document).height()>768&&(Ext.os.is.Desktop||currentProfile=="largetablet")){a.buildTiles(c,language.dynamicArticles.liveNews)}else{a.buildTilesSmall(c,language.dynamicArticles.liveNews)}}}}})}}},buildTilesSmall:function(a,d){var t=this;if(d==language.dynamicArticles.liveNews){var g={};for(var o=0;o<a.length;o++){a[o].sections=[];a[o].sections[0]=d;a[o].headline=a[o].title;a[o].body=a[o].content;a[o].subHeadline="";a[o].byline=a[o].author;if(a[o].images!=null){}else{if(a[o].mediaGroups!=null){if(a[o].mediaGroups[0].contents!=null){if(a[o].mediaGroups[0].contents[0].thumbnails!=null){var e=[{url:a[o].mediaGroups[0].contents[0].thumbnails[0].url}];a[o].images=e;a[o].images[0].url="image_resize.aspx?w=700&url="+a[o].images[0].url}else{if(a[o].mediaGroups[0].contents[0].url!=null){var e=[{url:a[o].mediaGroups[0].contents[0].url}];a[o].images=e;a[o].images[0].url="image_resize.aspx?w=700&url="+a[o].images[0].url}else{a[o].images=[]}}}else{a[o].images=[]}}else{a[o].images=[]}}a[o].live=true;a[o].url=a[o].link;a[o].config={};a[o].config.articleIndex=o}t.liveArticles=a}var m=true;var l=t.articleReader.content;var r;var j;var o=0;while(o<a.length){if(Ext.os.is.Desktop||Ext.os.is.Tablet){if(m){j=Ext.create("InfinityMobile.view.desktop.ArticleReaderPanelContainer");r=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemContainer");if(settings.dynamic.weather!=null&&o==0&&d==language.dynamicArticles.all){if(settings.dynamic.weather.url!=null){if(settings.dynamic.weather.url.length>0){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileWeatherContainer",{expandAnim:"expandSmallViewTopLeft 0.2s ease-in",shrinkAnim:"shrinkSmallViewTopLeft 0.2s ease-out",style:"position:absolute;top:0%;left:0px;",weather:settings.dynamic.weather.url});r.add(q);o--}else{if(a.length>o){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileWide",{expandAnim:"expandSmallViewTopLeft 0.2s ease-in",shrinkAnim:"shrinkSmallViewTopLeft 0.2s ease-out",style:"position:absolute;top:0%;left:0px;",article:a[o],articleIndex:o,bannerAdCheck:"true"});r.add(q)}}}else{if(a.length>o){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileWide",{expandAnim:"expandSmallViewTopLeft 0.2s ease-in",shrinkAnim:"shrinkSmallViewTopLeft 0.2s ease-out",style:"position:absolute;top:0%;left:0px;",article:a[o],articleIndex:o,bannerAdCheck:"true"});r.add(q)}}}else{if(a.length>o){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileWide",{expandAnim:"expandSmallViewTopLeft 0.2s ease-in",shrinkAnim:"shrinkSmallViewTopLeft 0.2s ease-out",style:"position:absolute;top:0%;left:0px;",article:a[o],articleIndex:o,bannerAdCheck:"true"});r.add(q)}}if(a.length>(o+1)){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileSmall",{expandAnim:"expandSmallViewTopRight 0.2s ease-in",shrinkAnim:"shrinkSmallViewTopRight 0.2s ease-out",style:"position:absolute;top:0%;left:512px;",article:a[o+1],articleIndex:o+1,bannerAdCheck:"true"});r.add(q)}var c=true;if(settings.dynamic.adverts!=null){if(settings.dynamic.adverts.bannerAd!=null){var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderBannerAd",{style:"position:absolute;top:72.5%;height:100%;width:100%;",height:"32.5%",settings:settings.dynamic.adverts.bannerAd});r.add(b);c=false;o-=2}}if(c){if(a.length>(o+2)){if(a[o+2]!=null){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileMed",{expandAnim:"expandSmallViewBottomLeft 0.2s ease-in",shrinkAnim:"shrinkSmallViewBottomLeft 0.2s ease-out",style:"position:absolute;top:52.5%;left:0px;",article:a[o+2],articleIndex:o+2});r.add(q)}}if(a.length>(o+3)){if(a[o+3]!=null){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileMed",{expandAnim:"expandSmallViewBottomRight 0.2s ease-in",shrinkAnim:"shrinkSmallViewBottomRight 0.2s ease-out",style:"position:absolute;top:52.5%;left:384px;",article:a[o+3],articleIndex:o+3});r.add(q)}}}o+=4;if(o<a.length){m=false;j.add(r)}else{j.add(r);$(j.element.dom).css("width","768px")}}else{r=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemContainer");if(a.length>o){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileSmall",{expandAnim:"expandSmallViewTop1 0.2s ease-in",shrinkAnim:"shrinkSmallViewTop1 0.2s ease-out",style:"position:absolute;top:0%;left:0px;",article:a[o],articleIndex:o});r.add(q)}if(a.length>o+1){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileSmall",{expandAnim:"expandSmallViewTop2 0.2s ease-in",shrinkAnim:"shrinkSmallViewTop2 0.2s ease-out",style:"position:absolute;top:0%;left:256px;",article:a[o+1],articleIndex:o+1});r.add(q)}if(a.length>o+2){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileSmall",{expandAnim:"expandSmallViewTopRight 0.2s ease-in",shrinkAnim:"shrinkSmallViewTopRight 0.2s ease-out",style:"position:absolute;top:0%;left:512px;",article:a[o+2],articleIndex:o+2});r.add(q)}if(a.length>o+3){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileSmall",{expandAnim:"expandSmallViewBottom1 0.2s ease-in",shrinkAnim:"shrinkSmallViewBottom1 0.2s ease-out",style:"position:absolute;top:52.5%;left:0px;",article:a[o+3],articleIndex:o+3});r.add(q)}if(a.length>o+4){var q=Ext.create("InfinityMobile.view.desktop.SmallViewTileWide",{expandAnim:"expandSmallViewBottom2 0.2s ease-in",shrinkAnim:"shrinkSmallViewBottom2 0.2s ease-out",style:"position:absolute;top:52.5%;left:256px;",article:a[o+4],articleIndex:o+4});r.add(q)}j.add(r);o+=5;m=true}}if(m){var n;var s;if(t.settings.dynamic.adverts!=null){if(t.settings.dynamic.adverts.interstitial!=null&&o<a.length){var p=$(document).height()-120;var f=p*0.8;var k=((f*0.3)*2)+(f*0.45)-10;n=Ext.create("InfinityMobile.view.desktop.DynamicArticlesInterstitialContainer");s=Ext.create("InfinityMobile.view.desktop.DynamicArticlesInterstitial",{adHeight:k,settings:t.settings.dynamic.adverts.interstitial})}}t.articleReader.content.add(j);if(s!=null&&n!=null){n.add(s);t.articleReader.content.add(n)}}else{}if(currentProfile=="desktop"){if(Ext.browser.is.IE){setTimeout(function(){var h=0;var u=Ext.ComponentQuery.query(".articlereaderpanelcontainer");for(j in u){h+=$(u[j].element.dom).width()+10}var v=Ext.ComponentQuery.query(".dynamicarticlesinterstitialcontainer");for(interstitial in v){h+=$(v[interstitial].element.dom).width()+5}if(settings.dynamic.rss==null){t.articleReader.content.element.down(".x-container").next("div").down(".x-scroll-view").down(".x-scroll-container").dom.style.width=h+"px"}else{t.articleReader.content.element.down(".x-container").next("div").next("div").down(".x-scroll-view").down(".x-scroll-container").dom.style.width=h+"px"}},100)}if(t.articleReader.scrollDesktop!=null){t.articleReader.scrollDesktop.scrollLeft=0}}else{if(t.articleReader.content.getScrollable()!=null){t.articleReader.content.getScrollable().getScroller().scrollTo(0)}}}},buildTiles200)},buildTiles:function(a,d){var z=this;if(d==language.dynamicArticles.liveNews){var p={};for(var v=0;v<a.length;v++){a[v].sections=[];a[v].sections[0]=d;a[v].headline=a[v].title;a[v].body=a[v].content;a[v].subHeadline="";a[v].byline=a[v].author;if(a[v].images!=null){}else{if(a[v].mediaGroups!=null){if(a[v].mediaGroups[0].contents!=null){if(a[v].mediaGroups[0].contents[0].thumbnails!=null){var n=[{url:a[v].mediaGroups[0].contents[0].thumbnails[0].url}];a[v].images=n;a[v].images[0].url="image_resize.aspx?w=700&url="+a[v].images[0].url}else{if(a[v].mediaGroups[0].contents[0].url!=null){var n=[{url:a[v].mediaGroups[0].contents[0].url}];a[v].images=n;a[v].images[0].url="image_resize.aspx?w=700&url="+a[v].images[0].url}else{a[v].images=[]}}}else{a[v].images=[]}}else{a[v].images=[]}}a[v].live=true;a[v].url=a[v].link;a[v].config={};a[v].config.articleIndex=v}z.liveArticles=a}var t=true;var s=z.articleReader.content;var x;var q;var v=0;while(v<a.length){if(Ext.os.is.Desktop||Ext.os.is.Tablet){if(t){q=Ext.create("InfinityMobile.view.desktop.ArticleReaderPanelContainer");x=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemContainer");if(a.length>(v)){var j=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemLrg",{expandAnim:"expandTopStory 0.2s ease-in",shrinkAnim:"shrinkTopStory 0.2s ease-out",style:"position:absolute;top:0px;left;0px;",article:a[v],articleIndex:v});x.add(j)}if(a.length>(v+1)){if(z.settings.dynamic.adverts!=null){if(z.settings.dynamic.adverts.bannerAd!=null){var l=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow3Col1LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftSmall 0.2s ease-out",style:"position:absolute;top:60%;left:0px;",article:a[v+1],articleIndex:v+1})}else{var l=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col1LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:0px;",article:a[v+1],articleIndex:v+1})}x.add(l)}else{var l=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col1LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col1LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:0px;",article:a[v+1],articleIndex:v+1});x.add(l)}}if(a.length>(v+2)){if(z.settings.dynamic.adverts!=null){if(z.settings.dynamic.adverts.bannerAd!=null){var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow3Col2LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col2LeftSmall 0.2s ease-out",style:"position:absolute;top:60%;left:256px;",article:a[v+2],articleIndex:v+2})}else{var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col2LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col2LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:256px;",article:a[v+2],articleIndex:v+2})}x.add(k)}else{var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col2LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col2LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:256px;",article:a[v+2],articleIndex:v+2});x.add(k)}}if(a.length>(v+3)){if(z.settings.dynamic.adverts!=null){if(z.settings.dynamic.adverts.bannerAd!=null){var g=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow3Col3LeftSmall 0.2s ease-in",shrinkAnim:"shrinkRow3Col3LeftSmall 0.2s ease-out",style:"position:absolute;top:60%;left:512px;",article:a[v+3],articleIndex:v+3})}else{var g=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col3LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col3LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:512px;",article:a[v+3],articleIndex:v+3})}x.add(g)}else{var g=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col3LeftMed 0.2s ease-in",shrinkAnim:"shrinkRow3Col3LeftMed 0.2s ease-out",style:"position:absolute;top:60%;left:512px;",article:a[v+3],articleIndex:v+3});x.add(g)}}if(a.length>(v+4)){if(z.settings.dynamic.adverts!=null){if(z.settings.dynamic.adverts.bannerAd!=null){var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderBannerAd",{height:"15%",style:"position:absolute;top:90%;height:100%;width:100%;",settings:z.settings.dynamic.adverts.bannerAd});x.add(b)}}}v+=4;if(v<a.length){t=false;q.add(x)}else{q.add(x);$(q.element.dom).css("width","768px")}}else{x=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemContainer");if(a.length>v){var o=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow1Col1Right 0.2s ease-in",shrinkAnim:"shrinkRow1Col1Right 0.2s ease-out",style:"position:absolute;top:0px;left:0px;",article:a[v],articleIndex:v});x.add(o)}if(a.length>(v+1)){var l=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedWide",{expandAnim:"expandRow1Col2Right 0.2s ease-in",shrinkAnim:"shrinkRow1Col2Right 0.2s ease-out",style:"position:absolute;top:0px;left:256px;",article:a[v+1],articleIndex:v+1});x.add(l)}if(a.length>(v+2)){var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow2Col1Right 0.2s ease-in",shrinkAnim:"shrinkRow2Col1Right 0.2s ease-out",style:"position:absolute;top:30%;left:0px;",article:a[v+2],articleIndex:v+2});x.add(k)}if(a.length>(v+3)){var g=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow2Col2Right 0.2s ease-in",shrinkAnim:"shrinkRow2Col2Right 0.2s ease-out",style:"position:absolute;top:30%;left:256px;",article:a[v+3],articleIndex:v+3});x.add(g)}if(a.length>(v+4)){var f=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemSmall",{expandAnim:"expandRow2Col3Right 0.2s ease-in",shrinkAnim:"shrinkRow2Col3Right 0.2s ease-out",style:"position:absolute;top:30%;left:512px;",article:a[v+4],articleIndex:v+4});x.add(f)}if(a.length>(v+5)){var e=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedTall",{expandAnim:"expandRow3Col1Right 0.2s ease-in",shrinkAnim:"shrinkRow3Col1Right 0.2s ease-out",style:"position:absolute;top:60%;left:0px;",article:a[v+5],articleIndex:v+5});x.add(e)}if(a.length>(v+6)){var c=Ext.create("InfinityMobile.view.desktop.ArticleReaderItemMedWideTall",{expandAnim:"expandRow3Col2Right 0.2s ease-in",shrinkAnim:"shrinkRow3Col2Right 0.2s ease-out",style:"position:absolute;top:60%;left:256px;",article:a[v+6],articleIndex:v+6});x.add(c)}q.add(x);v+=7;t=true}}if(t){var u;var y;if(z.settings.dynamic.adverts!=null){if(z.settings.dynamic.adverts.interstitial!=null&&v<a.length){var w=$(document).height()-120;var m=w*0.8;var r=((m*0.3)*2)+(m*0.45)-10;u=Ext.create("InfinityMobile.view.desktop.DynamicArticlesInterstitialContainer");y=Ext.create("InfinityMobile.view.desktop.DynamicArticlesInterstitial",{adHeight:r,settings:z.settings.dynamic.adverts.interstitial})}}z.articleReader.content.add(q);if(y!=null&&u!=null){u.add(y);z.articleReader.content.add(u)}}else{}if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){if(Ext.browser.is.IE){setTipx"}},100)}z.articleReader.scrollDesktop.scrollLeft=0}else{z.articleReader.content.getScrollable().getScroller().scrollTo(0)}}},loadSection:function(g){var f=this;var b=true;f.currentSection=g;var c="";switch(g){case language.dynamicArticles.all:if(Ext.os.is.Phone){f.articleReaderLoadPhone(f.articleReader,1)}else{f.articleReaderLoad(f.articleReader,1)}if(f.articleReader.content.getScrollable()!=null){f.articleReader.content.getScrollable().getScroller().scrollTo(0,0)}b=false;for(var a=0;a<f.buttons.length;a++){if(f.buttons[a].section==language.dynamicArticles.all){f.buttons[a].element.dom.style.color="#b22930"}else{if(f.buttons[a].section==language.dynamicArticles.liveNews){f.buttons[a].element.down("span").dom.style.color="#929292"}else{f.buttons[a].element.dom.style.color="#929292"}}}break}if(b){var e=[];for(var d=0;d<f.articles.length;d++){for(var a=0;a<f.articles[d].sections.length;a++){if(f.articles[d].sections[a]==g){e[e.length]=f.articles[d];break}}}for(var a=0;a<f.buttons.length;a++){if(f.buttons[a].section==g){f.buttons[a].element.dom.style.color="#b22930"}else{if(f.buttons[a].section==language.dynamicArticles.liveNews){f.buttons[a].element.down("span").dom.style.color="#929292"}else{f.buttons[a].element.dom.style.color="#929292"}}}f.articleReader.content.removeAll();if(e.length>0){f.displayedArticles=e;if(Ext.os.is.Phone){f.buildTilesPhone(e,g)}else{if($(document).height()>768&&(Ext.os.is.Desktop||currentProfile=="largetablet")){f.buildTiles(e,c)}else{f.buildTilesSmall(e,c)}}}else{f.noTiles(g)}}},noTiles:function(b){var a=this},showArticlePoue})},initializeArticlePoon)}},tileTht"}},toolba()}}},toggleReaderOp()}}},replicaPaperView:function(j){var g=this;articleMode="replica";g.loaded=false;g.getArticlereadertoggleviewoptions().destroy();var c=g.articleReader.config.orientation;g.articleReader.destroy();g.articleReader=null;mainPanel.setActiveItem(0);if(g.getLivenewsticker()!=null){g.getLivenewsticker().show();g.getLivenewsticker().loadTicker()}var a=g.getReader();a.fireEvent("pagechange",a);if(Ext.os.is.Desktop){g.getReader().onResize()}else{if(g.returnOrientation()!=c){g.getReader().onResize()}}if(!Ext.os.is.Phone){g.getApplication().getController("PageTurnController").setupKeys();g.articles=g.getApplication().getController("ArticleController").getArticles();if(g.articles.length>0){var e=Ext.getStore("SettingStore");var b=0;if(e.data.items[0].raw.RSSTicker!=null){b=40}var h=[];if(e.data.items[0].raw.bookmarks!=null){h=e.data.items[0].raw.bookmarks.bookmark}if(Ext.os.is.Phone){var d=Ext.create("InfinityMobile.view.phone.ArticlesContainer",{articles:g.articles,sections:h})}else{if(Ext.os.is.Desktop){var f=true;if(settings.newsday!=null){if(settings.newsday.customArticlesContainer!=null){f=false}}if(f){var d=Ext.create("InfinityMobile.view.ArticlesContainer",{articles:g.articles,sections:h,mode:"toggle"})}else{var d=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:g.articles,sections:h,mode:"toggle"})}}else{var d=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:g.articles,sections:h,mode:"toggle"})}}Ext.Viewport.add(d);d.show()}else{if(Ext.os.is.Desktop){var f=true;if(settings.newsday!=null){if(settings.newsday.customArticlesContainer!=null){f=false}}if(f){var d=Ext.create("InfinityMobile.view.ArticlesContainer",{articles:g.articles,sections:h,mode:"toggle",bottom:b})}else{var d=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:g.articles,sections:h,mode:"toggle",bottom:b})}}else{var d=Ext.create("InfinityMobile.view.tablet.ArticlesContainer",{articles:g.articles,sections:h,mode:"toggle",bottom:b})}Ext.Viewport.add(d);d.show()}}},dynamicView:function(a){var b=this;if(b.articleReader!=null){if(Ext.os.is.Phone){b.articleReaderLoadPhone(b.articleReader,1)}else{b.articleReaderLoad(b.articleReader,1)}}else{var c="InfinityMobile.view.ArticleReader";var d=Ext.create(c,{orientation:b.returnOrientation()});mainPanel.add(d);mainPanel.setActiveItem(d)}if(a!=null){a.hide()}},readerarticlehide:function(){var a=this;a.dynamicKeyControls(a.articleReader)},liveArticleClick:function(e,b){var c=this;var c=this;var d=c.getArticleview();if(d!=null){d.destroy()}var a=e.config.articleIndex;var g=5;var f="InfinityMobile.view.tablet.ReaderArticlePopover";switch(currentProfile){case"phone":f="InfinityMobile.view.phone.ReaderArticlePopover";break;case"tablet":f="InfinityMobile.view.tablet.ReaderArticlePopover";break;case"desktop":f="InfinityMobile.view.desktop.ReaderArticlePopover";break;default:f="InfinityMobile.view.tablet.ReaderArticlePopover";break}if(b.length==null){var e=Ext.create(f,{mediaController:c,isLive:"true",articleIndex:a})}else{var e=Ext.create(f,{mediaController:c,isLive:"true",articleIndex:a,articles:b})}if(!Ext.os.is.Desktop){if(articleMode=="dynamic"){mainPanel.add(e);mainPanel.setActiveItem(e)}else{mainPanel.add(e);mainPanel.setActiveItem(e)}}},initializeLivePopover:function(d,c){var e=this;var b=d.content;if(c.length==null){var f=e.liveArticles}else{var f=c}var a=d.config.articleIndex;e.articleCarousel=Ext.create("InfinityMobile.view.ArticleCarousel",{width:"100%",height:"100%",pageNumber:a,data:f,pageTemplate:function(j,k,h){if(Ext.os.is.Desktop){return Ext.create("InfinityMobile.view.desktop.ReaderLiveArticlePopoverItem",{pageNo:k,page:h[k]})}else{return Ext.create("InfinityMobile.view.ReaderLiveArticlePopoverItem",{pageNo:k,page:h[k]})}}});b.add(e.articleCarousel);var g=f[a];d.articleText.setHtml("Article "+((a)+1)+" / "+f.length);if(!Ext.os.is.Phone){e.getApplication().getController("MediaController").articleLoadShare(d,g)}if(trackOmniture=="True"){trackArticle(g.page,g.description)}e.articleKeyControl();e.articleCarousel.on({hide:function(){e.dynamicKeyControls()}})},liveNext:function(a){a.items.items[1].items.items[0].next(0)},livePrevious:function(a){a.items.items[1].items.items[0].previous()},articleKeyControl:function(){var b=this;var a=b.getArticleview();window.onkeyup=function(c){if($("#slider").val()==1){if(c.keyCode==39){a.items.items[1].items.items[0].next(0)}else{if(c.keyCode==37){a.items.items[1].items.items[0].previous()}}}};window.onke=20}}},liveNewsTickerAr],b)},resizeArticlesBrowser:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().resizeOb()}},resizeDynamicArticles:function(){var c=this;var d=Ext.ComponentQuery.query(".articlereaderpanelcontainer");for(container in d){if(d[container].onResize!=null){d[container].onResize()}}if(!Ext.os.is.Phone){var d=Ext.ComponentQuery.query(".articlereaderpanelcontainer");if(d.length>0){if($(document).height()>768){if(c.tileMode=="small"){if(c.currentSection==language.dynamicArticles.liveNews){c.liveNewsTiles()}else{c.loadSection(c.currentSection)}c.tileMode="large"}}else{if(c.tileMode=="large"){if(c.currentSection==language.dynamicArticles.liveNews){c.liveNewsTiles()}else{c.loadSection(c.currentSection)}c.tileMode="small"}}}}if(!Ext.os.is.Phone){var e=Ext.ComponentQuery.query(".dynamicarticlesinterstitialcontainer");for(container in e){e[container].onResize()}var b=Ext.ComponentQuery.query(".dynamicarticlesinterstitial");for(ad in b){b[ad].onResize()}}var a=Ext.ComponentQuery.query(".articlereaderitemweathertile");for(tile in a){a[tile].onResize()}if(Ext.os.is.Phone){var a=Ext.ComponentQuery.query(".articlereaderbannerad");for(tile in a){a[tile].onResizeFn()}}if(!Ext.os.is.Phone){var a=Ext.ComponentQuery.query(".articlereaderitemmedtall");for(tile in a){a[tile].resize()}a=Ext.ComponentQuery.query(".articlereaderitemmedwidetall");for(tile in a){a[tile].resize()}a=Ext.ComponentQuery.query(".articlereaderitemsmall");for(tile in a){a[tile].resize()}a=Ext.ComponentQuery.query(".articlereaderitemlrg");for(tile in a){a[tile].resize()}a=Ext.ComponentQuery.query(".articlereaderitemtopstoryitem");for(tile in a){a[tile].resize()}a=Ext.ComponentQuery.query(".articlereaderitemmedwide");for(tile in a){a[tile].resize()}a=Ext.ComponentQuery.query(".smallviewtilesmall");for(tile in a){a[tile].resize()}a=Ext.ComponentQuery.query(".smallviewtilemed");for(tile in a){a[tile].resize()}a=Ext.ComponentQuery.query(".smallviewtilewide");for(tile in a){a[tile].resize()}a=Ext.ComponentQuery.query(".smallviewtileweather");for(tile in a){a[tile].resize()}}},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},expandArtew()},howToArticlesInit:function(b){var a=this;if(a.getArticles().length==0){b.setHtml(language.howToUse.browseNoArticleDesc)}},howToReaderInit:function(a){var b=this;if(b.getArticles().length==0){a.hide()}}},0,0,0,0,0,0,[InfinityMobile.controller,"ArticleController"],0));(Ext.cmd.derive("InfinityMobile.controller.PdfController",Ext.app.Controller,{config:{refs:{readerpageviewer:"readerpageviewer",infiniteCarousel:"infinitecarousel2d"},control:{readerpageviewer:{renderPDF:"processPDF",activeItemCheck:"activeItemCheck"},infiniteCarousel:{pausePDF:"pausePage",resumePDF:"resumePage"}}},init:function(){var b=this;pdfRenderQueue=[];b.isBusy=false;b.isPaused=false;b.blocked=false;b.currentRenderPage=null;PDFJS.isPaused=false;PDFJS.workerSrc="resources/js/pdf/pdf.worker.js";b.firstEverRender=true;if(!Ext.browser.is.Chrome){b.firstEverRender=false}var a=Ext.getStore("SettingStore");a.on({load:"initPDFSettings",scope:this,delay:10})},initPDFSettings:function(){if(settings.page.pdfEnableWorker!=null&&settings.page.pdfEnableWorker=="true"){PDFJS.disableWorker=false}else{PDFJS.disableWorker=true}if(settings.page.pdfDisableFontFace!=null&&settings.page.pdfDisableFontFace=="true"){if(Ext.browser.is.IE||navigator.appVersion.indexOf("Edge")!=-1){PDFJS.disableFontFace=true}}},getPDFRenderQueue:function(){return pdfRenderQueue},addToh(a)},insertTo0,a)},checkExistingPageInrn c},removeFrom,1)}},checkck)}},isOnCurrenlse}},selectClosesrn h},proce,b)}},tryRend,g)}},renderPDF:function(f,d,b,a,h,c,g){var e=this;if(e.isOnCurrentPage(a)&&e.checkExistingPageInQueue(b,a)==-1){e.isBusy=true;e.currentRenderPage=f.render(d);e.currentRenderPage.page=f;e.currentRenderPage.pageNumber=b;e.currentRenderPage.imagePageNumber=a;e.currentRenderPage.renderContext=d;e.currentRenderPage.callback=h;e.currentRenderPage.cancelCallback=c;e.currentRenderPage.resetCallback=g;e.currentRenderPageue()},function(j){if(j=="cancelled"){e.isBusy=false;c()}})}else{e.checkQueue()}},setupCanvas:function(b){var e=this;var d=b.canvasContext;var a=d.canvas;a.style.visibility="hidden";if(a.dpi>1){a.width=a.pageWidth*a.dpi;a.height=a.pageHeight*a.dpi;a.style.width=a.pageWidth+"px";a.style.height=a.pageHeight+"px";try{d._transformMatrix=[a.dpi,0,0,a.dpi,0,0];d.setTransform(1,0,0,1,0,0);d.scale(a.dpi,a.dpi)}catch(c){a.width=a.pageWidth;a.height=a.pageHeight;a.style.width=a.pageWidth+"px";a.style.height=a.pageHeight+"px"}}else{a.width=a.pageWidth;a.height=a.pageHeight;a.style.width=a.pageWidth+"px";a.style.height=a.pageHeight+"px"}},isAnotherPageRequestInQueue:function(){var a=this},pausl()}},resumePage:function(){var a=this;a.isPaused=false;a.checkQueue()},activeItemde)}},hideBackground"){}}},0,0,0,0,0,0,[InfinityMobile.controller,"PdfController"],0));(Ext.cmd.derive("InfinityMobile.controller.PageTurnController",Ext.app.Controller,{config:{refs:{pagecontainer2:"readerpageviewer",infinitecarousel:"infinitecarousel2d",navbutton:"navbutton",bannerAd:"readerbannerad"},control:{pagecontainer2:{returnPageRight:"returnPageRight",finishTurnRight:"finishTurnRight",returnPageLeft:"returnPageLeft",finishTurnLeft:"finishTurnLeft",returnPageBottomRight:"returnPageBottomRight",finishTurnBottomRight:"finishTurnBottomRight",returnPageBottomLeft:"returnPageBottomLeft",finishTurnBottomLeft:"finishTurnBottomLeft",autoTurnRight:"autoTurnRight",autoTurnLeft:"autoTurnLeft",autoTurnBottomRight:"autoTurnBottomRight",autoTurnBottomLeft:"autoTurnBottomLeft",setupKeys:"setupKeys",goRight:"goRight",goLeft:"goLeft",killBannerAd:"killBannerAd"},navbutton:{autoTurnRight:"goRight",autoTurnLeft:"goLeft"}}},init:function(){var c=this;var d=c.getInfinitecarousel();var b=$(document).width();var a=$(document).height();pixelMove=b*0.01;c.turning=false;if(Ext.browser.is.IE){flipSound=new Audio("resources/audio/pageTurnShort.mp3")}else{flipSound=new Audio("resources/audio/pageTurnShort.wav")}if(typeof flipSound!="undefined"&&flipSound!=null){flipSound.one=0}}}c.setupKeys()},isFullscreenAdInView:function(){var c=this;if(settings.reader.interstitial!=null&&settings.reader.interstitial.dfpType=="fullscreen"){var d=$("body").children("div[draggable='false']");if(d.length>1){for(var b=0;b<d.length;b++){if(d[b].style!=null){var a=d[b].style.display;if(a!="none"){return true}else{return false}}}}}else{return false}},setupKeys:function(){var a=this;window.onkeydown=function(c){var b=a.getInfinitecarousel();var d=b.getActiveItem();if(Ext.browser.is.Firefox&&c.keyCode==9){c.preventDefault()}if($("#slider").val()<=1){console.log(d);if(c.keyCode==39&&d!=null&&(d.config.nextPage!=null&&d.config.nextPage!="")){if(!a.isFullscreenAdInView()){a.goRight()}}if(c.keyCode==37&&d!=null&&(d.config.nextPage!=null&&d.config.nextPage!="")){if(!a.isFullscreenAdInView()){a.goLeft()}}if(c.keyCode===38){if(d.getScrollable().getScroller().position.y-30>0){d.getScrollable().getScroller().scrollTo(d.getScrollable().getScroller().position.x,d.getScrollable().getScroller().position.y-30);if(d.zoomMode!="fit"){a.getApplication().getController("ReaderController").showTop();if(d.getScrollable().getScroller().position.y-30<d.getScrollable().getScroller().maxPosition.y){a.getApplication().getController("ReaderController").showBottom()}else{a.getApplication().getController("ReaderController").hideBottom()}}}else{d.getScrollable().getScroller().scrollTo(d.getScrollable().getScroller().position.x,0);if(d.zoomMode!="fit"){a.getApplication().getController("ReaderController").hideTop();a.getApplication().getController("ReaderController").showBottom()}}}if(c.keyCode===40){if(d.getScrollable().getScroller().position.y+30<d.getScrollable().getScroller().maxPosition.y){if(d.zoomMode!="fit"){d.getScrollable().getScroller().scrollTo(d.getScrollable().getScroller().position.x,d.getScrollable().getScroller().position.y+30);a.getApplication().getController("ReaderController").showBottom();if(d.getScrollable().getScroller().position.y+30>0){a.getApplication().getController("ReaderController").showTop()}else{a.getApplication().getController("ReaderController").hideTop()}}}else{d.getScrollable().getScroller().scrollTo(d.getScrollable().getScroller().position.x,d.getScrollable().getScroller().maxPosition.y);if(d.zoomMode!="fit"){a.getApplication().getController("ReaderController").hideBottom();a.getApplication().getController("ReaderController").showTop()}}}}else{c.stopImmediatePropagation();if(c.keyCode==39){if(d.getScrollable().getScroller().position.x+30<d.getScrollable().getScroller().maxPosition.x){d.getScrollable().getScroller().scrollTo(d.getScrollable().getScroller().position.x+30)}else{d.getScroller().scrollTo(d.getScrollable().getScroller().maxPosition.x)}}else{if(c.keyCode==37){if(d.getScrollable().getScroller().position.x-30>0){d.getScrollable().getScroller().scrollTo(d.getScrollable().getScroller().position.x-30)}else{d.getScrollable().getScroller().scrollTo(0)}}else{if(c.keyCode===38){if(d.getScrollable().getScroller().position.y-30>0){d.getScrollable().getScroller().scrollTo(d.getScrollable().getScroller().position.x,d.getScrollable().getScroller().position.y-30)}else{d.getScrollable().getScroller().scrollTo(d.getScrollable().getScroller().position.x,0)}}else{if(c.keyCode===40){if(d.getScrollable().getScroller().position.y+30<d.getScrollable().getScroller().maxPosition.y){d.getScrollable().getScroller().scrollTo(d.getScrollable().getScroller().position.x,d.getScrollable().getScroller().position.y+30)}else{d.getScrollable().getScroller().scrollTo(d.getScrollable().getScroller().position.x,d.getScrollable().getScroller().maxPosition.y)}}}}}}}},goRight:function(a){var b=this;b.killBannerAd();var c=b.getInfinitecarousel();if(currentProfile=="desktop"){if(c._mode=="double"){var d=c.getActiveItem();if(!b.checkSectionPageNext(d)&&d.id.indexOf("ext-readeradvertpageviewer")==-1){b.animateRight(d)}else{b.nonAnimateRight(c)}}else{b.nonAnimateRight(c)}}else{b.nonAnimateRight(c)}},killBan)}}}},checkSectionPageNext:function(a){if(a.config.nextPage==null||a.config.nextPage.type=="sectionpage"||a.config.nextPage.type=="advert"){return true}return false},animateRight:function(b){var a=this;if(b.diffX==null){b.diffX=($(b.topRight.element.dom).offset().left+$(b.topRight.element.dom)[0].getBoundingClientRect().width)-width}if(b.diffY==null){b.diffY=$(b.topRight.element.dom).offset().top}$(b.rightSideDiv).css("transform-origin","0% 0% 0px");$(b.rightSideImageContainer).css("transform-origin","0% 0% 0px");$(b.rightNextPage).css("transform-origin","0% 0% 0px");$(b.rightSideDiv).css("bottom","");$(b.rightSideImageContainer).css("top","0%");$(b.rightSideImageContainer).css("bottom","");$(b.rightSideImageContainer).css("left","0%");$(b.rightNextPage).css("top","0%");$(b.rightNextPage).css("bottom","");$(b.rightNextPage).css("left","0% ");$(b.rightSideGradient).css("transform-origin","0% 0% 0px");$(b.rightSideGradient).css("top","0%");$(b.rightSideGradient).css("bottom","");$(b.rightSideGradient).css("left","0% ");$(b.rightSideGradient).css("z-index","11");b.rightSide.element.dom.style.zIndex="8";b.leftSide.element.dom.style.zIndex="8";b.pauseFlashingLinks();b.leftSideMediaDiv.style.visibility="hidden";b.rightSideMediaDiv.style.visibility="hidden";if(b.topRight.element.dom.style.visibility!="hidden"){a.autoTurnRight(b)}},nonAnimateRight:function(a){a.next()},goLeft:function(a){var b=this;b.killBannerAd();var c=b.getInfinitecarousel();if(currentProfile=="desktop"){if(c._mode=="double"){var d=c.getActiveItem();if(!b.checkSectionPagePrevious(d)&&d.id.indexOf("ext-readeradvertpageviewer")==-1){b.animateLeft(d)}else{b.nonAnimateLeft(c)}}else{b.nonAnimateLeft(c)}}else{b.nonAnimateLeft(c)}},checkSectionPagePrealse},animateLeft:function(b){var a=this;if(b.diffX==null){b.diffX=-$(b.topLeft.element.dom).offset().left}if(b.diffY==null){b.diffY=$(b.topLeft.element.dom).offset().top}$(b.leftSideDiv).css("transform-origin","100% 0% 0px");$(b.leftSideImageContainer).css("transform-origin","100% 0% 0px");$(b.leftPrevPage).css("transform-origin","100% 0% 0px");$(b.leftSideGradient).css("transform-origin","100% 0% 0px");$(b.leftSideDiv).css("bottom","");$(b.leftSideImageContainer).css("top","0%");$(b.leftSideImageContainer).css("bottom","");$(b.leftSideImageContainer).css("right","0%");$(b.leftPrevPage).css("top","0%");$(b.leftPrevPage).css("bottom","");$(b.leftPrevPage).css("right","0% ");$(b.leftSideGradient).css("top","0%");$(b.leftSideGradient).css("bottom","");$(b.leftSideGradient).css("right","0% ");$(b.leftSideGradient).css("z-index","11");b.rightSide.element.dom.style.zIndex="8";b.mouseDown=false;b.leftSide.element.dom.style.zIndex="8";b.pauseFlashingLinks();b.leftSideMediaDiv.style.visibility="hidden";b.rightSideMediaDiv.style.visibility="hidden";if(b.topLeft.element.dom.style.visibility!="hidden"){a.autoTurnLeft(b)}},nonAnimateLeft:function(a){a.previous()},checkTurnRight:function(){var a=this},checkTurnLeft:function(){var a=this},returnPageRight:function(c,a){var b=this;if(!b.turning){b.turning=true;b.timer=setInterval(function(){b.turning=true;var e=false;var d=false;if(c.pageX<($(a.element.dom).width()/2)+a.width-1+a.wrapAdOffset){c.pageX+=pixelMove}else{e=true}if(c.pageY>1+a.diffY){c.pageY-=pixelMove}else{d=true}if(c.pageY<1+a.diffY){c.pageY=1+a.diffY}if(c.pageX>($(a.element.dom).width()/2)+a.width-1+a.wrapAdOffset){c.pageX=($(a.element.dom).width()/2)+a.width-1+a.wrapAdOffset}if(e&&d){clearInterval(b.timer);setTimeout(function(){b.turning=false},30);var f=b.getInfinitecarousel().getActiveItem();f.rightSideGradient.style.visibility="hidden";f.leftSideGradient.style.visibility="hidden";$(f.leftSideDiv).css("overflow","visible");$(f.rightSideDiv).css("overflow","visible");$(f.leftSideDiv).css("transform","");$(f.rightSideDiv).css("transform","");$(f.leftSideImageContainer).css("transform","");$(f.rightSideImageContainer).css("transform","");f.leftSideMediaDiv.style.visibility="";f.rightSideMediaDiv.style.visibility="";f.rightSide.element.dom.style.zIndex="8";f.leftSide.element.dom.style.zIndex="8";$(f.rightSideNextPageContainer).css("transform","");$(f.rightNextPage).css("visibility","hidden");if(!Ext.browser.is.IE){if(f.element.dom.parentElement!=null){f.element.dom.parentElement.parentElement.style.overflow="hidden"}}f.mouseDown=false}else{a.drag(c)}},10)}},finishTurnRight:function(c,a){var b=this;clearInterval(b.timer);if(!b.turning){b.turning=true;if(settings.reader.disablePageTurnSound!="true"&&typeof flipSound!="undefined"){flipSound.pause();if(!isNaN(flipSound.duration)){flipSound.currentTime=0}flipSound.play()}b.timer=setInterval(function(){b.turning=true;var e=false;var d=false;if(c.pageX>1+a.diffX){c.pageX-=pixelMove}else{e=true}if(c.pageY>1+a.diffY){c.pageY-=pixelMove}else{d=true}if(c.pageX<1+a.diffX){c.pageX=1+a.diffX}if(c.pageY<1+a.diffY){c.pageY=1+a.diffY}if(e&&d){clearInterval(b.timer);b.timer=null}else{a.drag(c)}if(b.timer==null){b.getInfinitecarousel().getActiveItem().mouseDown=false;setTimeout(function(){b.completeTurnRight()},30)}},10)}},returnPageLeft:function(c,a){var b=this;if(!b.turning){b.turning=true;b.timer=setInterval(function(){b.turning=true;var e=false;var d=false;if(c.pageX>1+(a.diffX*-1)){c.pageX-=pixelMove}else{e=true}if(c.pageY>a.diffY-1){c.pageY-=pixelMove}else{d=true}if(c.pageX<1+(a.diffX*-1)){c.pageX=1+(a.diffX*-1)}if(c.pageY<a.diffY-1){c.pageY=a.diffY-1}if(e&&d){clearInterval(b.timer);setTimeout(function(){b.turning=false},30);b.getInfinitecarousel().getActiveItem().mouseDown=false;var f=b.getInfinitecarousel().getActiveItem();f.rightSideGradient.style.visibility="hidden";f.leftSideGradient.style.visibility="hidden";$(f.leftSideDiv).css("overflow","visible");$(f.rightSideDiv).css("overflow","visible");$(f.leftSideDiv).css("transform","");$(f.rightSideDiv).css("transform","");$(f.leftSideImageContainer).css("transform","");$(f.rightSideImageContainer).css("transform","");f.leftSideMediaDiv.style.visibility="";f.rightSideMediaDiv.style.visibility="";f.rightSide.element.dom.style.zIndex="8";f.leftSide.element.dom.style.zIndex="8";$(f.leftSidePrevPageContainer).css("transform","");$(f.leftPrevPage).css("visibility","hidden");if(!Ext.browser.is.IE){if(f.element.dom.parentElement!=null){f.element.dom.parentElement.parentElement.style.overflow="hidden"}}}else{a.dragLeft(c)}},10)}},finishTurnLeft:function(c,a){var b=this;clearInterval(b.timer);if(!b.turning){b.turning=true;if(settings.reader.disablePageTurnSound!="true"&&typeof flipSound!="undefined"){flipSound.pause();if(!isNaN(flipSound.duration)){flipSound.currentTime=0}flipSound.play()}b.timer=setInterval(function(){b.turning=true;var e=false;var d=false;if(c.pageX<($(a.element.dom).width()/2)+a.width){c.pageX+=pixelMove}else{e=true}if(c.pageY>1+a.diffY){c.pageY-=pixelMove}else{d=true}if(e&&d){clearInterval(b.timer);b.timer=null}if(c.pageX<($(a.element.dom).width()/2)+a.width){c.pageX=($(a.element.dom).width()/2)+a.width}if(c.pageY<1+a.diffY){c.pageY=1+a.diffY}a.dragLeft(c);if(b.timer==null){b.getInfinitecarousel().getActiveItem().mouseDown=false;setTimeout(function(){b.completeTurnLeft()},15)}},10)}},returnPageBottomRight:function(c,a){var b=this;if(!b.turning){b.turning=true;b.timer=setInterval(function(){b.turning=true;var e=false;var d=false;if(c.pageX<($(a.element.dom).width()/2)+a.width-1+a.wrapAdOffset){c.pageX+=pixelMove}else{e=true}if(c.pageY<$(a.element.dom).height()+a.diffY){c.pageY+=pixelMove}else{d=true}if(c.pageX>($(a.element.dom).width()/2)+a.width-1+a.wrapAdOffset){c.pageX=($(a.element.dom).width()/2)+a.width-1+a.wrapAdOffset}if(c.pageY>$(a.element.dom).height()+a.diffY){c.pageY=$(a.element.dom).height()+a.diffY}if(e&&d){clearInterval(b.timer);setTimeout(function(){b.turning=false},30);b.getInfinitecarousel().getActiveItem().mouseDown=false;var f=b.getInfinitecarousel().getActiveItem();f.rightSideGradient.style.visibility="hidden";f.leftSideGradient.style.visibility="hidden";$(b.leftSideDiv).css("overflow","visible");$(b.rightSideDiv).css("overflow","visible");f.leftSideMediaDiv.style.visibility="";f.rightSideMediaDiv.style.visibility="";f.rightSide.element.dom.style.zIndex="8";f.leftSide.element.dom.style.zIndex="8";$(f.rightNextPage).css("visibility","hidden");if(!Ext.browser.is.IE){if(f.element.dom.parentElement!=null){f.element.dom.parentElement.parentElement.style.overflow="hidden"}}}else{a.dragBottomRight(c)}},10)}},finishTurnBottomRight:function(c,a){var b=this;clearInterval(b.timer);if(!b.turning){b.turning=true;if(settings.reader.disablePageTurnSound!="true"&&typeof flipSound!="undefined"){flipSound.pause();if(!isNaN(flipSound.duration)){flipSound.currentTime=0}flipSound.play()}b.timer=setInterval(function(){b.turning=true;var e=false;var d=false;if(c.pageX>1+(a.diffX*-1)){c.pageX-=pixelMove}else{e=true}if(c.pageY<a.height+a.diffY){c.pageY+=pixelMove}else{d=true}if(e&&d){clearInterval(b.timer);b.timer=null}if(c.pageX<1+(a.diffX*-1)){c.pageX=1+(a.diffX*-1)}if(c.pageY>a.height+a.diffY){c.pageY=a.height+a.diffY}a.dragBottomRight(c);if(b.timer==null){b.getInfinitecarousel().getActiveItem().mouseDown=false;setTimeout(function(){b.completeTurnRight()},30)}},15)}},returnPageBottomLeft:function(c,a){var b=this;b.timer=setInterval(function(){b.turning=true;var e=false;var d=false;if(c.pageX>1+(a.diffX*-1)){c.pageX-=pixelMove}else{e=true}if(c.pageY<$(a.element.dom).height()+a.diffY){c.pageY+=pixelMove}else{d=true}if(c.pageX<1+(a.diffX*-1)){c.pageX=1+(a.diffX*-1)}if(c.pageY>$(a.element.dom).height()+(a.diffY*2)){c.pageY=$(a.element.dom).height()+(a.diffY*2)}if(e&&d){clearInterval(b.timer);setTimeout(function(){b.turning=false},30);b.getInfinitecarousel().getActiveItem().mouseDown=false;var f=b.getInfinitecarousel().getActiveItem();f.rightSideGradient.style.visibility="hidden";f.leftSideGradient.style.visibility="hidden";$(b.leftSideDiv).css("overflow","visible");$(b.rightSideDiv).css("overflow","visible");f.leftSideMediaDiv.style.visibility="";f.rightSideMediaDiv.style.visibility="";f.rightSide.element.dom.style.zIndex="8";f.leftSide.element.dom.style.zIndex="8";$(f.leftPrevPage).css("visibility","hidden");if(!Ext.browser.is.IE){if(f.element.dom.parentElement!=null){f.element.dom.parentElement.parentElement.style.overflow="hidden"}}}else{a.dragBottomLeft(c)}},10)},finishTurnBottomLeft:function(c,a){var b=this;clearInterval(b.timer);if(!b.turning){b.turning=true;if(settings.reader.disablePageTurnSound!="true"&&typeof flipSound!="undefined"){flipSound.pause();if(!isNaN(flipSound.duration)){flipSound.currentTime=0}flipSound.play()}b.timer=setInterval(function(){b.turning=true;var e=false;var d=false;if(c.pageX<($(a.element.dom).width()/2)+a.width){c.pageX+=pixelMove}else{e=true}if(c.pageY<a.height+a.diffY){c.pageY+=pixelMove}else{d=true}if(e&&d){clearInterval(b.timer);b.timer=null}if(c.pageX>($(a.element.dom).width()/2)+a.width){c.pageX=($(a.element.dom).width()/2)+a.width}if(c.pageY>a.height+a.diffY){c.pageY=a.height+a.diffY}a.dragBottomLeft(c);if(b.timer==null){b.getInfinitecarousel().getActiveItem().mouseDown=false;setTimeout(function(){b.completeTurnLeft()},15)}},15)}},playSound:function(){var a=this;if(typeof flipSound!="undefined"){if(settings.reader.disablePageTurnSound!=null&&settings.reader.disablePageTurnSound=="true"){return}flipSound.pause();if(!isNaN(flipSound.duration)){flipSound.currentTime=0}flipSound.play()}},autoTurn15)}},completeTurnRight:function(){var b=this;b.turning=false;var a=b.getInfinitecarousel().getActiveItem();$(a.leftSideDiv).css("transform","");$(a.leftSideImageContainer).css("transform","");$(a.leftPrevPage).css("transform","");$(a.leftPrevPage).css("visibility","hidden");$(a.rightSideDiv).css("transform","");$(a.rightSideImageContainer).css("transform","");$(a.rightNextPage).css("transform","");$(a.rightNextPage).css("visibility","hidden");a.rightSideGradient.style.visibility="hidden";a.leftSideGradient.style.visibility="hidden";$(a.leftSideDiv).css("overflow","visible");$(a.rightSideDiv).css("overflow","visible");a.leftSideMediaDiv.style.visibility="";a.rightSideMediaDiv.style.visibility="";a.rightSide.element.dom.style.zIndex="8";a.leftSide.element.dom.style.zIndex="8";b.getInfinitecarousel().next();a.playCssAnimations();$(a.rightSideNextPageContainer).css("display","none");$(a.leftSidePrevPageContainer).css("display","none");if(!Ext.browser.is.IE){if(a.element.dom.parentElement!=null){a.element.dom.parentElement.parentElement.style.overflow="hidden"}}setTimeout(function(){if(!b.turning){b.getApplication().getController("PdfController").resumePage()}},300)},autoTur15)}},completeTurnLeft:function(){var b=this;var a=b.getInfinitecarousel().getActiveItem();$(a.rightSideDiv).css("transform","");$(a.rightSideImageContainer).css("transform","");$(a.rightNextPage).css("transform","");$(a.rightNextPage).css("visibility","hidden");$(a.leftSideDiv).css("transform","");$(a.leftSideImageContainer).css("transform","");$(a.leftPrevPage).css("transform","");$(a.leftPrevPage).css("visibility","hidden");a.rightSideGradient.style.visibility="hidden";a.leftSideGradient.style.visibility="hidden";$(a.leftSideDiv).css("overflow","visible");$(a.rightSideDiv).css("overflow","visible");b.turning=false;a.leftSideMediaDiv.style.visibility="";a.rightSideMediaDiv.style.visibility="";a.rightSide.element.dom.style.zIndex="8";a.leftSide.element.dom.style.zIndex="8";b.getInfinitecarousel().previous();a.playCssAnimations();$(a.rightSideNextPageContainer).css("display","none");$(a.leftSidePrevPageContainer).css("display","none");if(!Ext.browser.is.IE){if(a.element.dom.parentElement!=null){a.element.dom.parentElement.parentElement.style.overflow="hidden"}}setTimeout(function(){if(!b.turning){b.getApplication().getController("PdfController").resumePage()}},300)},autoTurnBottom15)}},completeTurnBottomRight:function(){var b=this;var a=b.getInfinitecarousel().getActiveItem();$(a.leftSideDiv).css("transform","");$(a.leftSideDiv).css("top",0);$(a.leftSideDiv).css("bottom","");$(a.leftSideImageContainer).css("transform","");$(a.leftSideImageContainer).css("top",0);$(a.leftSideImageContainer).css("bottom","");$(a.leftPrevPage).css("transform","");$(a.leftPrevPage).css("visibility","hidden");$(a.rightSideDiv).css("transform","");$(a.rightSideDiv).css("top",0);$(a.rightSideDiv).css("bottom","");$(a.rightSideImageContainer).css("transform","");$(a.rightSideImageContainer).css("top",0);$(a.rightSideImageContainer).css("bottom","");$(a.rightNextPage).css("transform","");$(a.rightNextPage).css("visibility","hidden");a.rightSideGradient.style.visibility="hidden";a.leftSideGradient.style.visibility="hidden";$(a.leftSideDiv).css("overflow","visible");$(a.rightSideDiv).css("overflow","visible");a.bottomRight.element.dom.style.visibility="visible";a.leftSideMediaDiv.style.visibility="";a.rightSideMediaDiv.style.visibility="";a.rightSide.element.dom.style.zIndex="8";a.leftSide.element.dom.style.zIndex="8";setTimeout(function(){a.bottomRightTapped=false},100);b.turning=false;$(a.rightSideNextPageContainer).css("display","none");$(a.leftSidePrevPageContainer).css("display","none");if(!Ext.browser.is.IE){if(a.element.dom.parentElement!=null){a.element.dom.parentElement.parentElement.style.overflow="hidden"}}b.getInfinitecarousel().next();a.playCssAnimations();setTimeout(function(){if(!b.turning){b.getApplication().getController("PdfController").resumePage()}},300)},autoTurnBotto15)}},completeTurnBottomLeft:function(){var b=this;var a=b.getInfinitecarousel().getActiveItem();$(a.rightSideDiv).css("transform","");$(a.rightSideDiv).css("top",0);$(a.rightSideDiv).css("bottom","");$(a.rightSideImageContainer).css("transform","");$(a.rightSideImageContainer).css("top",0);$(a.rightSideImageContainer).css("bottom","");$(a.rightNextPage).css("transform","");$(a.rightNextPage).css("visibility","hidden");$(a.leftSideDiv).css("transform","");$(a.leftSideDiv).css("top",0);$(a.leftSideDiv).css("bottom","");$(a.leftSideImageContainer).css("transform","");$(a.leftSideImageContainer).css("top",0);$(a.leftSideImageContainer).css("bottom","");$(a.leftPrevPage).css("transform","");$(a.leftPrevPage).css("visibility","hidden");a.rightSideGradient.style.visibility="hidden";a.leftSideGradient.style.visibility="hidden";$(a.leftSideDiv).css("overflow","visible");$(a.rightSideDiv).css("overflow","visible");b.turning=false;a.leftSideMediaDiv.style.visibility="";a.rightSideMediaDiv.style.visibility="";a.rightSide.element.dom.style.zIndex="8";a.leftSide.element.dom.style.zIndex="8";b.getInfinitecarousel().previous();a.playCssAnimations();$(a.rightSideNextPageContainer).css("display","none");$(a.leftSidePrevPageContainer).css("display","none");if(!Ext.browser.is.IE){if(a.element.dom.parentElement!=null){a.element.dom.parentElement.parentElement.style.overflow="hidden"}}setTimeout(function(){a.bottomLeftTapped=false},100);setTie()}},300)}},0,0,0,0,0,0,[InfinityMobile.controller,"PageTurnController"],0));(Ext.cmd.derive("InfinityMobile.controller.PushController",Ext.app.Controller,{config:{refs:{main:"main"},control:{main:{initializepush:"initialisePush"}}},init:function(){var a=this;a.isPushEnabled=false},initialisePush:function(){var a=this;a.createManifest();if("serviceWorker" in navigator){}else{console.warn("Service workers aren't supported in this browser.")}},createManest)},intialiseurn}},subs)}))},unsubs})})},sendSubscriptionToS{}})}},0,0,0,0,0,0,[InfinityMobile.controller,"PushController"],0));(Ext.cmd.derive("InfinityMobile.controller.BookmarkController",Ext.app.Controller,{config:{refs:{main:"main",bookmarkContainer:"readerbookmark",bookmarkitem:"bookmarkitem",carousel:"infinitecarousel2d",articlescontainer:"articlescontainer"},control:{main:{bookmark:"showBookmarks"},bookmarkContainer:{close:"closeBookmarks",loadBookmarks:"loadBookmarks",addBookmark:"addBookmark",enableArticlesContainer:"enableArticlesContainer"},bookmarkitem:{loadPage:"loadBookmarkPage",deleteBookmark:"deleteBookmark"}}},init:function(){var a=this},showBookmarks:function(){var b=this;b.disableArticlesContainer();b.hideArticlesContainer();var c="InfinityMobile.view.tablet.ReaderBookmark";switch(currentProfile){case"phone":c="InfinityMobile.view.phone.ReaderBookmark";break;case"desktop":c="InfinityMobile.view.desktop.ReaderBookmark";break;case"tablet":default:c="InfinityMobile.view.tablet.ReaderBookmark";break}var a=Ext.create(c,{});Ext.Viewport.add(a);a.show()},hideArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().hide()}},loadBookmarks:function(b){var d=this;d.bookmarksJson=d.retrieveBookmarks();for(var c=0;c<d.bookmarksJson.length;c++){var a=d.bookmarksJson[c];d.addBookmarkItem(b,a)}},addBookmarkItem:function(b,c){var d=this;var a=Ext.create("InfinityMobile.view.BookmarkItem",{bookmarkItem:c});b.bookmarksContainer.add(a)},retrieveBookmarks:function(){var c=this;var b=[];try{if(localStorage.getItem("bookmarks"+editionguid)!=null){b=JSON.parse(localStorage.getItem("bookmarks"+editionguid))}}catch(a){}return b},setBookmarks:function(){var b=this;try{localStorage.setItem("bookmarks"+editionguid,JSON.stringify(b.bookmarksJson))}catch(a){}},addBookmark:function(h){var f=this;var g=h.addBookmarkTextBox;var j=f.retrievePageNumber();var c=f.getCarousel();if(typeof isTribReader!="undefined"&&isTribReader==true){if(f.getCarousel()._mode=="double"){j=editionFlatplanData.reversePageMapper[parseInt(j)]}j=flatPlanData.pageMapper[j];j=flatPlanData.pageGroups[j-1+pageOffset].pages[0].origPageNum}if(c.getActiveItem().xtype!="readeradvertpageviewer"){if(g.value!=""){var e=h.bookmarksContainer.getItems().items;var k=true;for(var b=0;b<e.length;b++){if(g.value==e[b].bookmarkItem.name){k=false}}if(k){var d={name:g.value,pageNumber:j};f.bookmarksJson.push(d);f.setBookmarks();f.addBookmarkItem(h,d);f.trackBookmarks("bookmarkAdded",d);f.resetTextBox(g)}else{f.setTextBoxValidation(g)}}else{f.setTextBoxValidation(g)}}else{var a=Ext.create("InfinityMobile.view.ReaderMessagePrompt",{message:language.bookmarks.bookmarkInvalidPage});Ext.Viewport.add(a);a.show()}},trackBook,b)}},removeBookmarkItem:function(a){var b=this;b.bookmarksJson.splice(a,1);b.setBookmarks()},setTextBoxValidred"},resetTee=""},retrievePageNrn b},loadBookmarkPage:function(e){var d=this;var b=e.bookmarkItem.pageNumber-1;b=flatPlanData.pdfPages!=null&&flatPlanData.pdfPages[b]!=null?flatPlanData.pdfPages[b].pages[0].pageNum-1:b;var a=d.getCarousel();var c=d.getBookmarkContainer();a.jumpToPage(b);d.closeBookmarks(c)},deleteBooe(c)},closeBookmarks:function(a){var b=this;a.hide()},disableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().disableEvents()}},enableArticlesContainer:function(){var a=this;if(a.getArticlescontainer()!=null){a.getArticlescontainer().enableEvents()}}},0,0,0,0,0,0,[InfinityMobile.controller,"BookmarkController"],0));(Ext.cmd.derive("InfinityMobile.controller.TrackingController",Ext.app.Controller,{config:{refs:{main:"#rootPanel"},control:{main:{initTracking:"initTracking"}}},initTracking:function(){if(typeof(ReplicaAnalyticsDataLayer)!=="undefined"){this.replicaAnalyticsDataLayer=new ReplicaAnalyticsDataLayer(publicationName,publicationguid,null);this.trackEditionLoad()}},trackEditionLoad:function(){if(typeof trackReaderEvent!="undefined"){trackReaderEvent("editionLoad",{"edition-id":editionguid,"pub-id":publicationguid,"edition-name":editionName,"pub-name":publicationName,"edition-date":editionDate,"is-downloaded":false})}}},0,0,0,0,0,0,[InfinityMobile.controller,"TrackingController"],0));(Ext.cmd.derive("InfinityMobile.view.phone.StoryWindowPreferences",Ext.Container,{config:{id:"archivecontainer",width:"100%",height:"100%",style:"padding:0px;",layout:"vbox",items:[{id:"toolbar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{id:"toolbarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"bodyContainer",layout:"vbox",width:"100%",flex:1,style:"background-color:white;border-bottom-left-radius:0.3em;border-bottom-right-radius:0.3em",scrollable:{direction:"vertical"},items:[{itemId:"containerText",margin:20,html:"If you turn this setting off, you will always return to the last page of the paper you viewed."},{itemId:"toggleSetting",padding:"20 20",margin:"0 0 40 0",width:"100%",style:"background-color:#eeeeee;position:relative;",html:"<div style=\"max-width:90%;\" >Return to page featuring last story viewed: </div><input class='pointerCursor' type='checkbox' style='margin-left:5px;position:absolute;right:20px;top:50%;transform:translate3d(0px, -50%, 0px);width:15px;height:15px;' class=\"pointerCursor\" onclick='if(this.checked){ this.checked = false; } else{ this.checked = true }' ></input>"}]}]},initialize:function(){var b=this;var a=b.getComponent("toolbar");b.toolbarClose=a.getComponent("toolbarClose");b.bodyContainer=b.getComponent("bodyContainer");a.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 1)"});b.title=a.getComponent("title");b.title.setHtml("Window Story Preferences");b.setToggleListener();b.setCloseListener();b.checkCurrentSetting()},setCloseListener:function(){var b=this;b.toolbarClose.element.on("tap",function(){b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.toolbarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},close:function(){var a=this;a.destroy()},setToggleListener:function(){var a=this;a.toggle=a.bodyContainer.getComponent("toggleSetting");a.toggle.element.on({tap:a.toggleCheck,scope:a})},toggleCheck:function(){var b=this;var d=$(b.toggle.element.dom).find("input");if(d.length>0){var c=d[0];if(c.checked){c.checked=false;try{localStorage.setItem("returnToPage"+publicationguid,"false")}catch(a){}}else{c.checked=true;try{localStorage.setItem("returnToPage"+publicationguid,"true")}catch(a){}}}},checkCurrentSetting:function(){var c=this;try{var b=localStorage.getItem("returnToPage"+publicationguid);var e=$(c.toggle.element.dom).find("input");if(b!=null&&e.length>0){var d=e[0];if(b=="true"){d.checked=true}else{if(b=="false"){d.checked=false}}}}catch(a){}}},0,["storywindowpreferences"],["component","container","storywindowpreferences"],{component:true,container:true,storywindowpreferences:true},["widget.storywindowpreferences"],0,[InfinityMobile.view.phone,"StoryWindowPreferences"],0));(Ext.cmd.derive("InfinityMobile.view.phone.DataCaptureForm",Ext.Container,{config:{height:"100%",width:"100%",fullscreen:true,modal:true,centered:true,style:"background-color:white;",scrollable:{direction:"vertical"},layout:{type:"vbox",packed:"middle"},items:[{itemId:"brandingLogo",height:120,width:"calc(100% - 10px)",margin:"20 10 20 10"},{itemId:"welcomeMsg",padding:"10 20 10 20",style:"text-align:center;"},{itemId:"form",padding:"20 20 20 20",defaults:{margin:"10 0 10 0"},items:[{itemId:"firstname",width:"100%",height:50,html:'<input type="text" style="padding:20px 10px 20px 10px;height:40px;width:100%;" placeholder="First Name"/>'},{itemId:"surname",width:"100%",height:50,html:'<input type="text" style="padding:20px 10px 20px 10px;height:40px;width:100%;" placeholder="Last Name"/>'},{itemId:"email",width:"100%",height:50,html:'<input type="text" style="padding:20px 10px 20px 10px;height:40px;width:100%;" placeholder="Email Address*"/>'},{itemId:"houseNo",width:"100%",height:50,html:'<input type="text" style="padding:20px 10px 20px 10px;height:40px;width:100%;" placeholder="House No/Name"/>'},{itemId:"address",width:"100%",height:50,html:'<input type="text" style="padding:20px 10px 20px 10px;height:40px;width:100%;" placeholder="Address"/>'},{itemId:"postcode",width:"100%",height:50,html:'<input type="text" style="padding:20px 10px 20px 10px;height:40px;width:100%;" placeholder="Postcode"/>'},{itemId:"telephone",width:"100%",height:50,html:'<input type="text" style="padding:20px 10px 20px 10px;height:40px;width:100%;" placeholder="Telephone No"/>'},{itemId:"required",html:"* Required Field",style:"font-size:12px;"},{itemId:"termsCheckbox",html:"<input type='checkbox' style:'height:10px;'/><label style='padding-left:5px;font-size:14px;'></label><a style='padding-left:5px;font-size:14px;'></a>"},{itemId:"updatedCheckbox",html:"<input type='checkbox' style:'height:10px;'/><label style='padding-left:5px;font-size:14px;'>Keep me updated on the latest news</label>"},{itemId:"errorMsg",hidden:true,html:"*Please make sure the required fields above are completed.",style:"color:red;"}]},{itemId:"buttonContainer",width:"calc(100%-10px)",height:180,layout:{type:"vbox",pack:"middle"},padding:"10 20 10 20",defaults:{margin:"10 0 10 0"},items:[{itemId:"registerBtn",height:60,width:"calc(100%-10px)",style:"text-align:center;vertical-align: middle;line-height:60px;",html:"<p>Register</p>"},{itemId:"skipBtn",height:60,width:"100%",style:"text-align:center;color:rgb(155, 155, 155);background-color:rgb(229, 229, 229;vertical-align:middle;line-height:60px;",html:"Skip"}]}]},initialize:function(){var a=this;if(a.config.logo!=null){a.logo=a.config.logo}if(a.config.welcomeText!=null){a.welcomeText=a.config.welcomeText}if(a.config.settings!=null){a.settings=a.config.settings}a.brandingLogo=a.getComponent("brandingLogo");a.welcomeTextArea=a.getComponent("welcomeMsg");a.form=a.getComponent("form");a.buttonContainer=a.getComponent("buttonContainer");a.registerBtn=a.buttonContainer.getComponent("registerBtn");a.skipBtn=a.buttonContainer.getComponent("skipBtn");a.errorMsg=a.form.getComponent("errorMsg");a.termsCheck=a.form.getComponent("termsCheckbox");a.brandingLogo.setStyle({backgroundImage:"url("+a.logo+")",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"});a.welcomeTextArea.setHtml(language.dataCapture.containerText);a.setupFormFields();a.setupTouchDevices();a.registerBtn.element.on({tap:a.register,scope:a});a.registerBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});a.skipBtn.element.on({tap:function(){this.fireEvent("closeDataCapture",this);this.destroy()},scope:a})},setupTouchDevices:function(){var a=this;var b=function(){this.focus()};a.firstname.element.on({tap:b});a.surname.element.on({tap:b});a.email.element.on({tap:b});a.houseNo.element.on({tap:b});a.address.element.on({tap:b});a.postcode.element.on({tap:b});a.telephone.element.on({tap:b});a.updatedCheckbox.element.on({tap:b});a.termsCheck.element.on({tap:b})},setupFormFields:function(){var a=this;a.firstname=a.form.getComponent("firstname");a.surname=a.form.getComponent("surname");a.email=a.form.getComponent("email");a.houseNo=a.form.getComponent("houseNo");a.address=a.form.getComponent("address");a.postcode=a.form.getComponent("postcode");a.telephone=a.form.getComponent("telephone");a.updatedCheckbox=a.form.getComponent("updatedCheckbox");a.hasTerms=false;$(a.email.element.down("input").dom).attr("placeholder",language.dataCapture.email+"*");a.requiredText=a.form.getComponent("required");a.requiredText.setHtml(language.dataCapture.required);if(a.settings.firstname!=null){if(a.settings.firstname.hasFirstname!=null){if(a.settings.firstname.required=="true"){$(a.firstname.element.down("input").dom).attr("placeholder",language.dataCapture.firstName+"*");a.firstname.required=true}else{$(a.firstname.element.down("input").dom).attr("placeholder",language.dataCapture.firstName);a.firstname.required=false}}else{a.firstname.hide()}}else{a.firstname.hide()}if(a.settings.surname!=null){if(a.settings.surname.hasSurname!=null){if(a.settings.surname.required=="true"){$(a.surname.element.down("input").dom).attr("placeholder",language.dataCapture.lastName+"*");a.surname.required=true}else{$(a.surname.element.down("input").dom).attr("placeholder",language.dataCapture.lastName);a.surname.required=false}}else{a.surname.hide()}}else{a.surname.hide()}if(a.settings.houseNo!=null){if(a.settings.houseNo.hasHouseNo!=null){if(a.settings.houseNo.required=="true"){$(a.houseNo.element.down("input").dom).attr("placeholder",language.dataCapture.houseNo+"*");a.houseNo.required=true}else{$(a.houseNo.element.down("input").dom).attr("placeholder",language.dataCapture.houseNo);a.houseNo.required=false}}else{a.houseNo.hide()}}else{a.houseNo.hide()}if(a.settings.address!=null){if(a.settings.address.hasAddress!=null){if(a.settings.address.required=="true"){$(a.address.element.down("input").dom).attr("placeholder",language.dataCapture.address+"*");a.address.required=true}else{a.address.required=false;$(a.address.element.down("input").dom).attr("placeholder",language.dataCapture.address)}}else{a.address.hide()}}else{a.address.hide()}if(a.settings.postcode!=null){if(a.settings.postcode.hasPostcode!=null){if(a.settings.postcode.required=="true"){$(a.postcode.element.down("input").dom).attr("placeholder",language.dataCapture.postCode+"*");a.postcode.required=true}else{$(a.postcode.element.down("input").dom).attr("placeholder",language.dataCapture.postCode);a.postcode.required=false}}else{a.postcode.hide()}}else{a.postcode.hide()}if(a.settings.telephone!=null){if(a.settings.telephone.hasTelephone!=null){if(a.settings.telephone.required=="true"){$(a.telephone.element.down("input").dom).attr("placeholder",language.dataCapture.telephone+"*");a.telephone.required=true}else{$(a.telephone.element.down("input").dom).attr("placeholder",language.dataCapture.telephone);a.telephone.required=false}}else{a.telephone.hide()}}else{a.telephone.hide()}if(a.settings.hasOptIn=="true"){a.updatedCheckbox.element.down("label").dom.innerHTML=language.dataCapture.optIn}else{a.updatedCheckbox.hide()}if(a.settings.terms!=null){a.hasTerms=true;if(a.settings.terms.termsUrl!=null){a.termsCheck.element.down("a").dom.href=a.settings.terms.termsUrl;a.termsCheck.element.down("a").dom.innerHTML=language.dataCapture.terms}else{a.termsCheck.element.down("label").dom.innerHTML=language.dataCapture.terms}}else{a.termsCheck.hide()}a.registerBtn.setHtml(language.register);if(a.settings.showSkip!="true"){a.skipBtn.hide()}else{a.skipBtn.setHtml(language.skip)}},register:function(){var t=this;var d=false;var l={};var q=null;var k=null;var p=null;var h=null;var e=null;var u=null;var s=null;var f=t.firstname.element.down("input").dom;var n=t.surname.element.down("input").dom;var r=t.email.element.down("input").dom;var c=t.houseNo.element.down("input").dom;var a=t.address.element.down("input").dom;var b=t.postcode.element.down("input").dom;var m=t.telephone.element.down("input").dom;var o=t.updatedCheckbox.element.down("input");var j=t.termsCheck.element.down("input");if(t.firstname.required){if(f.value.length==0){f.style.border="1px solid red";d=true}else{l.firstname=f.value;f.style.border=""}}else{if(f.value.length>0){l.firstname=f.value}}if(t.surname.required){if(n.value.length==0){n.style.border="1px solid red";d=true}else{l.surname=n.value;n.style.border=""}}else{if(n.value.length>0){l.surname=n.value}}if(t.validateEmail(r.value)){if(r.value.length==0){r.style.border="1px solid red";d=true}else{l.email=r.value;r.style.border=""}}else{r.style.border="1px solid red";d=true}if(t.houseNo.required){if(c.value.length==0){c.style.border="1px solid red";d=true}else{l.houseNo=c.value;c.style.border=""}}else{if(c.value.length>0){l.houseNo=c.value}}if(t.address.required){if(a.value.length==0){a.style.border="1px solid red";d=true}else{l.address=a.value;a.style.border=""}}else{if(a.value.length>0){l.houseNo=a.value}}if(t.postcode.required){if(b.value.length==0){b.style.border="1px solid red";d=true}else{l.postcode=b.value;b.style.border=""}}else{if(b.value.length>0){l.postcode=b.value}}if(t.telephone.required){if(m.value.length==0){m.style.border="1px solid red";d=true}else{l.telephone=m.value;m.style.border=""}}else{if(m.value.length>0){l.postcode=m.value}}if(!t.updatedCheckbox.isHidden()){if(o.is(":checked")){l.keepMeUpdated="true"}}var g=true;if(!t.termsCheck.isHidden()){if(j.dom.checked){g=true}else{g=false}}if(d||!g){t.errorMsg.show()}else{t.fireEvent("sendData",t,l);t.destroy()}console.log(l)},validateEmail:function(a){var b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}},0,["datacaptureform"],["component","container","datacaptureform"],{component:true,container:true,datacaptureform:true},["widget.datacaptureform"],0,[InfinityMobile.view.phone,"DataCaptureForm"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticleReaderItemWeatherTile",Ext.Container,{config:{cls:"articlereaderitemweathertile",style:"float:left;z-index:6;background-color:#9fb0b9;",layout:"hbox",items:[{itemId:"title",layout:"vbox",flex:1,items:[{html:"<p class='.thirteen' style='color:white;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;padding:20px 0px 0px 20px;'>WEATHER</p>"},{itemId:"location"},{itemId:"desc"}]},{itemId:"temp",flex:1,items:[{itemId:"tempDisplay",centered:true}]},{itemId:"toggle",layout:"vbox",padding:20,flex:1,items:[{itemId:"toggleContainer",layout:{type:"hbox",pack:"center",align:"middle"},flex:1,items:[{html:"<p style='color:white;font-size:13px;padding-right:5px;padding-top:0.2em;'>&deg;C</p>"},{cls:"toggle",itemId:"toggleField",xtype:"togglefield",style:"background:transparent;"},{html:"<p style='color:white;font-size:13px;padding-left:5px;padding-top:0.2em;'>&deg;F</p>"}]},{itemId:"weatherIcon",flex:5}]}]},initi:d})},onResize:function(){var a=this;a.onResizeFn()}},0,["articlereaderitemweathertile"],["component","container","articlereaderitemweathertile"],{component:true,container:true,articlereaderitemweathertile:true},["widget.articlereaderitemweathertile"],0,[InfinityMobile.view.phone,"ArticleReaderItemWeatherTile"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticleReaderBannerAd",Ext.Panel,{config:{style:"padding:0px:overflow:none;",width:"100%",height:50,items:[{itemId:"advert",cls:"advert"}]},initi,b)}},loadAdvert:function(){var a=this;googletag.cmd.push(function(){var b=googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,[parseInt("320"),parseInt("50")],a.advertDivID);b.addService(googletag.pubads());googletag.enableServices()});googletag.cmd.push(function(){googletag.display(a.advertDivID)})},onRes})}}}},0,["articlereaderbannerad"],["component","container","panel","articlereaderbannerad"],{component:true,container:true,panel:true,articlereaderbannerad:true},["widget.articlereaderbannerad"],0,[InfinityMobile.view.phone,"ArticleReaderBannerAd"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticleReaderItemTopStoryItem",Ext.Panel,{config:{style:"float:left;z-index:6;",layout:"vbox",items:[{itemId:"image",bottom:0,top:0,left:0,right:0,cls:"backgroundImage aspectfill"},{itemId:"title",style:"background-color:rgba(0,0,0,0.5); color:white; font-size:20px; font-weight:bold",bottom:5,top:5,left:5,right:5,height:"100%",padding:10}]},initi:a})},setBackgroundv>")},setNo}}))},im}}},liveTap:function(){var a=this;window.open(a.article.url)},testFunc:function(){console.log("TEST")}},0,["articlereaderitemtopstoryitem"],["component","container","panel","articlereaderitemtopstoryitem"],{component:true,container:true,panel:true,articlereaderitemtopstoryitem:true},["widget.articlereaderitemtopstoryitem"],0,[InfinityMobile.view.phone,"ArticleReaderItemTopStoryItem"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticleReaderItemPhone",Ext.Panel,{config:{padding:5,style:"float:left;background-color:white;z-index:7;overflow:hidden;",layout:"vbox",items:[{itemId:"image",bottom:5,top:5,left:5,right:5,cls:"backgroundImage aspectfill"},{itemId:"title",bottom:5,top:5,left:5,right:5,padding:10,style:"background-color:rgba(0,0,0,0.5); color:white; font-size:20px; font-weight:bold;overflow:hidden;",height:"100%"}]},initi:a})},loadue}}},setBackgroundv>")},setNo}}))},6}}}},liveTap:function(){var a=this;window.open(a.article.url)}},0,["articlereaderitemphone"],["component","container","panel","articlereaderitemphone"],{component:true,container:true,panel:true,articlereaderitemphone:true},["widget.articlereaderitemphone"],0,[InfinityMobile.view.phone,"ArticleReaderItemPhone"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticleReaderItemTopStories",Ext.Container,{config:{width:"100%",style:"float:left;z-index:6;background-color:white;",items:[{itemId:"carousel",xtype:"carousel",top:5,bottom:5,left:5,right:5,margin:10,direction:"horizontal",style:"z-index:6;"}]},initi})}}},handleItemChange:function(){var a=this}},0,["articlereaderitemtopstories"],["component","container","articlereaderitemtopstories"],{component:true,container:true,articlereaderitemtopstories:true},["widget.articlereaderitemtopstories"],0,[InfinityMobile.view.phone,"ArticleReaderItemTopStories"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticleReaderItemContainer",Ext.Container,{config:{width:"calc(100%)",height:600}},0,["articlereaderitemcontainer"],["component","container","articlereaderitemcontainer"],{component:true,container:true,articlereaderitemcontainer:true},["widget.articlereaderitemcontainer"],0,[InfinityMobile.view.phone,"ArticleReaderItemContainer"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticleReaderPanelContainer",Ext.Container,{config:{cls:"articlereaderpanelcontainer",layout:{type:"vbox"},style:"margin: 10px;"},initi80)}}},0,["articlereaderpanelcontainer"],["component","container","articlereaderpanelcontainer"],{component:true,container:true,articlereaderpanelcontainer:true},["widget.articlereaderpanelcontainer"],0,[InfinityMobile.view.phone,"ArticleReaderPanelContainer"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ClippingOptionsMenu",Ext.Container,{config:{id:"clippingmenu",width:"100%",height:"100%",style:"background:white !important;",layout:"vbox",fullscreen:true,items:[{id:"clippingOptionsToolBar",height:40,style:"",items:[{itemId:"title",top:10,left:10},{id:"clippingOptionsToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"clippingOptionsBodyContainer",padding:"20",layout:"vbox",flex:1,scrollable:{direction:"vertical"},items:[{itemId:"clippingOptionsContainerText",margin:"0 0 20px 0",html:"<p style='font-size:14px;'>To download or email your clipping(s), simply select one or more and click the relevant button. To view a clipping at a bigger size, select the thumbnail(s) and then click the 'Preview' button.<p><br /><p style='font-size:10px;color:#444444'>Please note: Once you close your browser or exit the session, your clippings library will be cleared.</p>"},{id:"clippingsContainer",itemId:"clippingsContainer",style:"border: 1px solid #e6e6e6;",flex:1,scrollable:{direction:"vertical",directionLock:true},defaults:{width:140,height:140,margin:"7 8 16 7",cls:"archiveitemphone"}},{itemId:"buttonsContainer",layout:"hbox",height:60,items:[{itemId:"previewBtn",flex:1,cls:"btn",margin:"15 5 5 0",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/preview-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Preview",margin:5,style:"color:white;font-size:10pt;"}]},{itemId:"downloadBtn",flex:1,cls:"btn",margin:"15 0 5 5",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/downloads-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Save",margin:5,style:"color:white;font-size:10pt;"}]}]},{itemId:"printButtonContainer",layout:"hbox",height:50,items:[{itemId:"printBtn",cls:"btn",flex:1,margin:"5 0 5 0",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/print-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Print",margin:5,style:"color:white;font-size:11pt;text-align:center;"}]}]},{itemId:"shareButtonContainer",layout:"hbox",height:60,items:[{itemId:"shareBtn",cls:"btn",flex:2,margin:"5 0 15 0",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/share-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Share",margin:5,style:"color:white;font-size:11pt;"}]}]}]}]},initialize:function(){var b=this;b.clippingsToolbar=b.getComponent("clippingOptionsToolBar");b.clippingsToolbar.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});b.closeBtn=b.clippingsToolbar.getComponent("clippingOptionsToolBarClose");b.clippingsBody=b.getComponent("clippingOptionsBodyContainer");b.clippingsContainer=b.clippingsBody.getComponent("clippingsContainer");b.buttonsContainer=b.clippingsBody.getComponent("buttonsContainer");b.shareButtonContainer=b.clippingsBody.getComponent("shareButtonContainer");b.previewBtn=b.buttonsContainer.getComponent("previewBtn");b.downloadBtn=b.buttonsContainer.getComponent("downloadBtn");b.shareBtn=b.shareButtonContainer.getComponent("shareBtn");b.printButtonContainer=b.clippingsBody.getComponent("printButtonContainer");b.printBtn=b.printButtonContainer.getComponent("printBtn");b.title=b.clippingsToolbar.getComponent("title");b.title.setHtml(language.clippings.clippingsOptions);b.clippingOptionsContainerText=b.clippingsBody.getComponent("clippingOptionsContainerText");b.clippingOptionsContainerText.setHtml("<p style='font-size:16px;'>"+language.clippings.ClippingsOptionsText+"</p><br /><p style='font-size:12px;color:#444444'>"+language.clippings.clippingsPleaseNote+"</p>");b.previewBtn.getComponent("Preview").setHtml(language.clippings.preview);b.downloadBtn.getComponent("Save").setHtml(language.clippings.save);b.shareBtn.getComponent("Share").setHtml(language.clippings.share);b.printBtn.getComponent("Print").setHtml(language.clippings.print);b.previewBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.downloadBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.printBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.shareBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.closeBtn.element.on("tap",function(){b.destroy()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.closeBtn.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}if(b.config.images!=null){b.images=b.config.images}if(b.config.widths!=null){b.widths=b.config.widths}if(b.config.heights!=null){b.heights=b.config.heights}b.addThumbnails();b.previewBtn.element.on({tap:b.preview,scope:b});b.downloadBtn.element.on({tap:b.download,scope:b});b.shareBtn.element.on({tap:b.shareTap,scope:b});b.printBtn.element.on({tap:b.print,scope:b})},preview:function(){var d=this;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){c=true;break}}if(c){var a=Ext.create("InfinityMobile.view.ClippingMenuPreview",{images:d.images,clippingMenu:d})}else{d.promptUser(language.clippings.selectClippings)}},dowgs)}},print:function(){var e=this;var f=false;var d="";for(var c=0;c<e.images.length;c++){var b=e.images[c];if(e.clippingsContainer.innerItems[c].clicked){if(!f){f=true}d+="<div style='width:100%; height:100%; position:relative'>";d+="<img src='"+b+"' style='height:auto;width:auto;max-height:100%;max-width:100%;' />";d+="</div>"}}if(f){var a=Ext.create("InfinityMobile.view.PrintPreview",{doc:d,imgCheck:true});Ext.Viewport.add(a);a.show()}else{e.promptUser(language.clippings.selectClippings)}},shareTap:function(){var d=this;d.shareBtn.removeAll();d.shareBtn.element.dom.style.backgroundColor="#e6e6e6";var b=[{itemId:"email",width:30,height:30,style:'background-image:url("resources/images/reader icons/mail.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"facebook",width:30,height:30,style:'background-image:url("resources/images/reader icons/facebook.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"twitter",width:30,height:30,style:'background-image:url("resources/images/reader icons/twitter.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"linkedin",width:30,height:30,style:'background-image:url("resources/images/reader icons/linkedin.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"google",width:30,height:30,style:'background-image:url("resources/images/reader icons/Google.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"pinterest",width:30,height:30,style:'background-image:url("resources/images/reader icons/pinterest.png");background-size:contain;background-position:center;background-repeat:no-repeat;'}];d.shareBtn.add(b);var a=Ext.getStore("SettingStore");d.emailBtn=d.shareBtn.getComponent("email");d.facebookBtn=d.shareBtn.getComponent("facebook");d.twitterBtn=d.shareBtn.getComponent("twitter");d.linkedinBtn=d.shareBtn.getComponent("linkedin");d.googleBtn=d.shareBtn.getComponent("google");d.pinterestBtn=d.shareBtn.getComponent("pinterest");var c=a.data.items[0].raw.sharing;if(c.allSharing[0]==null){d.emailBtn.hide()}else{d.emailBtn.element.on({tap:d.emailShare,scope:d})}if(c.allSharing[1]==null){d.facebookBtn.hide()}else{d.facebookBtn.element.on({tap:d.facebookShare,scope:d})}if(c.allSharing[2]==null){d.twitterBtn.hide()}else{d.twitterBtn.element.on({tap:d.twitterShare,scope:d})}if(c.allSharing[3]==null){d.linkedinBtn.hide()}else{d.linkedinBtn.element.on({tap:d.linkedinShare,scope:d})}if(c.allSharing[4]==null){d.googleBtn.hide()}else{d.googleBtn.element.on({tap:d.googleShare,scope:d})}if(c.allSharing[5]==null){d.pinterestBtn.hide()}else{d.pinterestBtn.element.on({tap:d.pinterestShare,scope:d})}},addThumbnails:function(){var b=this;for(var a=0;a<b.images.length;a++){var c=Ext.create("InfinityMobile.view.ClippingItems",{image:b.images[a],imgWidth:b.widths[a],imgHeight:b.heights[a],clicked:false});b.clippingsContainer.add(c);c.show()}},promptUser:function(b){var a=this;prompt=Ext.create("InfinityMobile.view.ClippingMenuPrompt",{message:b})},emailShare:function(){var d=this;var e=false;var a="mailto:?subject="+encodeURIComponent("Clippings from "+publicationName)+"&body=";var c="To view a clipping, please select one of the links below:\n";for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){c+=d.images[b]+" \n";e=true}}if(e){window.location.href=a+encodeURIComponent(c)}else{d.promptUser(language.clippings.selectClippings)}},facebookShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=encodeURIComponent(d.images[b]);c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://www.facebook.com/sharer/sharer.php?m2w&u="+a+"&title=Clipping from "+publicationName)}else{d.promptUser(e)}},twitterShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.images[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://twitter.com/intent/tweet?text=Clipping from "+publicationName+" - "+a)}else{d.promptUser(e)}},linkedinShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.images[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://www.linkedin.com/shareArticle?mini=true&url="+a+"&title=Clipping from "+publicationName)}else{d.promptUser(e)}},googleShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.images[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("https://plus.google.com/share?url="+a)}else{d.promptUser(e)}},pinterestShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.images[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://pinterest.com/pin/create/bookmarklet/?media="+a+"&is_video=false&description=Clipping from "+publicationName)}else{d.promptUser(e)}}},0,["clippingoptionsmenu"],["component","container","clippingoptionsmenu"],{component:true,container:true,clippingoptionsmenu:true},["widget.clippingoptionsmenu"],0,[InfinityMobile.view.phone,"ClippingOptionsMenu"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ClippingArea",Ext.Panel,{config:{modal:true,hideOnMaskTap:true,fullscreen:true,style:"position:absolute;top:-100%;",items:[{itemId:"backgroundTop",layout:"hbox"},{itemId:"clipArea",layout:{type:"hbox",align:"stretch"},height:"auto",width:"200%",items:[{itemId:"clipBox",html:'<div class="clipper" style="display:none;position:relative;top:0px;width:30px;overflow:auto;height:30px;border:4px solid rgb(69, 143, 187);"><div class="ui-resizable-handle ui-resizable-se se-handle" ></div></div>'},{itemId:"backgroundRight",flex:1,style:"background-color:rgba(0, 0, 0, 0.5)"}]},{itemId:"backgroundBottom",items:[{itemId:"controlPanel",width:120,height:40,style:{backgroundColor:"rgba(0,0,0,0.7)",borderRadius:"5px",position:"absolute",margin:"5px 0px 5px 0px",zIndex:"999"},hidden:true,layout:"hbox",items:[{itemId:"cancel",width:40,height:40,style:{backgroundImage:'url("resources/images/reader icons/close-white.png")',backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",padding:"5px",zIndex:"10000"}},{itemId:"reset",height:40,width:40,style:{backgroundImage:'url("resources/images/reader icons/refresh-white.png")',backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",padding:"5px",zIndex:"10000"}},{itemId:"confirm",height:40,width:40,style:{backgroundImage:'url("resources/images/reader icons/tick-white.png")',backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",padding:"5px",zIndex:"10000"}}]}]},{itemId:"backgroundLeft"}]},initialize:function(){var b=this;var a=b.getComponent("clipArea");b.clipBox=a.getComponent("clipBox");b.top=b.getComponent("backgroundTop");b.top.setHtml("<div style='position:relative;width:"+$(document).width()*2+"px;height:"+$(document).height()+"px;background-color:rgba(0, 0, 0, 0.5)'></div>");b.left=b.getComponent("backgroundLeft");b.left.setHtml("<div style='position:absolute;left:-200%;top:0%;width:"+$(document).width()*2+"px;height:"+$(document).height()*2.5+"px;background-color:rgba(0, 0, 0, 0.5)'></div>");b.bottom=b.getComponent("backgroundBottom");b.bottom.setHtml("<div style='position:relative;width:"+$(document).width()*2+"px;height:"+$(document).height()*2+"px;background-color:rgba(0, 0, 0, 0.5)'></div>");b.controlPanel=b.getComponent("backgroundBottom").getComponent("controlPanel");b.cancel=b.controlPanel.getComponent("cancel");b.reset=b.controlPanel.getComponent("reset");b.confirm=b.controlPanel.getComponent("confirm");b.origDocH=$(document).height();b.origDocW=$(document).width();if(Ext.os.is.Phone){b.controlPanel.setHeight(30);b.controlPanel.setWidth(90);b.cancel.setHeight(30);b.cancel.setWidth(30);b.reset.setHeight(30);b.reset.setWidth(30);b.confirm.setHeight(30);b.confirm.setWidth(30)}if(b.config.reader!=null){b.reader=b.config.reader}if(b.config.readerActiveItem!=null){b.readerActiveItem=b.config.readerActiveItem}b.confirm.element.on({tap:b.keyPress,scope:b});b.cancel.element.on({tap:b.selfDestruct,scope:b});b.reset.element.on({tap:b.resize,scope:b});b.element.on({dragstart:function(c){c.stopPropagation()},drag:function(c){c.stopPropagation()},dragend:function(c){c.stopPropagation()}});b.clipperDrawn=false;b.element.dom.addEventListener("touchstart",function(c){b.mouseDown(c)});b.element.dom.addEventListener("touchend",function(c){b.mouseUp(c)});b.draggableHandle=b.element.down(".ui-resizable-handle");b.draggableHandle.dom.style.width="50px";b.draggableHandle.dom.style.height="50px";b.draggableHandle.dom.addEventListener("touchstart",function(c){c.stopPropagation();var l=c.changedTouches[0].clientX;var j=c.changedTouches[0].clientY;var d=$(".clipper").width();var k=$(".clipper").height();var e="";switch(b.getPrefix().css){case"-webkit-":e=b.element.dom.style.webkitTransform;break;case"-ms-":e=b.element.dom.style.msTransform;break;default:e=b.element.dom.style.transform;break}var h=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(",");var g=h[0].substring(0,h[0].indexOf("p"));var f=h[1].substring(0,h[1].indexOf("p"));b.move=function(q){q.stopPropagation();q.preventDefault();if(q.changedTouches[0].clientX>parseFloat(g)){var m=d+q.changedTouches[0].clientX-l;var p=g}else{var p=q.changedTouches[0].clientX;var m=parseFloat(g)-q.changedTouches[0].clientX}if(q.changedTouches[0].clientY>parseFloat(f)){var n=k+q.changedTouches[0].clientY-j;var o=f}else{var o=q.changedTouches[0].clientY;var n=parseFloat(f)-q.changedTouches[0].clientY}b.element.dom.style.transform="translate3d("+p+"px, "+(o)+"px, 0px)";b.element.dom.style.webkitTransform="translate3d("+p+"px, "+(o)+"px, 0px)";b.element.dom.style.mozTransform="translate3d("+p+"px, "+(o)+"px, 0px)";b.element.dom.style.msTransform="translate3d("+p+"px, "+(o)+"px, 0px)";$(".clipper").css("height",n);$(".clipper").css("width",m);if(b.controlPanel.element.dom.offsetTop>=(($(document).height()*2)-o-50)){if(m-$(b.controlPanel.element.dom).width()>=0){$(b.controlPanel.element.dom).css("transform","translate3d("+(m-($(b.controlPanel.element.dom).width()+$(b.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-o-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-webkit-transform","translate3d("+(m-($(b.controlPanel.element.dom).width()+$(b.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-o-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-moz-transform","translate3d("+(m-($(b.controlPanel.element.dom).width()+$(b.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-o-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-ms-transform","translate3d("+(m-($(b.controlPanel.element.dom).width()+$(b.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-o-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}else{$(b.controlPanel.element.dom).css("transform","translate3d(0px, "+(($(document).height()*2)-o-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-webkit-transform","translate3d(0px, "+(($(document).height()*2)-o-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-moz-transform","translate3d(0px, "+(($(document).height()*2)-o-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-ms-transform","translate3d(0px, "+(($(document).height()*2)-o-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}}else{if(m-$(b.controlPanel.element.dom).width()>=0){$(b.controlPanel.element.dom).css("transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-webkit-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-moz-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-ms-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)")}else{$(b.controlPanel.element.dom).css("transform","translateX(0px)");$(b.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(b.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(b.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}};document.addEventListener("touchmove",b.move)});b.draggableHandle.dom.addEventListener("touchend",function(c){document.removeEventListener("touchstart",null)})},getPrefix:function(){var a=window.getComputedStyle(document.documentElement,"");pre=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||(a.OLink===""&&["","o"]))[1];return{lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}},bannerAdCheck:function(){var b=this;var a=Ext.getStore("SettingStore");if(a.data.items[0].raw.reader.bannerAd!=null){b.element.dom.style.top="calc(-100% - 110px)"}},fillCheck:function(){var b=this;if(b.readerActiveItem.zoomMode=="fill"){var a=($(b.reader.element.dom).height()/b.readerActiveItem.height)*100;b.element.dom.style.top="calc(-"+a+"% + "+b.readerActiveItem.scroller.position.y+"px)"}},zoomCheck:function(){var b=this;if($("#slider").val()>1){var a=($(b.reader.element.dom).height()/(b.readerActiveItem.height*$("#slider").val()))*100;b.element.dom.style.top="calc(-"+a+"% + "+b.readerActiveItem.scroller.position.y+"px)";b.element.dom.style.left=b.readerActiveItem.scroller.position.x+"px";b.leftBackground.dom.style.left="-"+(($(document).width()*2))+"px"}},keyx,a)},mouseDown:function(g){var d=this;g.preventDefault();if(!d.clipperDrawn){d.element.dom.style.transform="translate3d("+g.changedTouches[0].clientX+"px, "+(g.changedTouches[0].clientY)+"px, 0px)";d.element.dom.style.webkitTransform="translate3d("+g.changedTouches[0].clientX+"px, "+(g.changedTouches[0].clientY)+"px, 0px)";d.element.dom.style.mozTransform="translate3d("+g.changedTouches[0].clientX+"px, "+(g.changedTouches[0].clientY)+"px, 0px)";d.element.dom.style.msTransform="translate3d("+g.changedTouches[0].clientX+"px, "+(g.changedTouches[0].clientY)+"px, 0px)";$(".clipper").css("display","");d.controlPanel.show();var k=g.changedTouches[0].clientX;var j=g.changedTouches[0].clientY;d.clipperDrawn=true;d.move=function(p){p.stopPropagation();p.preventDefault();var o;var n;if(p.changedTouches[0].clientX>k){var l=p.changedTouches[0].clientX-k;var n=k}else{var l=k-p.changedTouches[0].clientX;var n=p.changedTouches[0].clientX}if(p.changedTouches[0].clientY>j){var m=p.changedTouches[0].clientY-j;var o=j}else{var m=j-p.changedTouches[0].clientY;var o=p.changedTouches[0].clientY}d.element.dom.style.transform="translate3d("+n+"px, "+(o)+"px, 0px)";d.element.dom.style.webkitTransform="translate3d("+n+"px, "+(o)+"px, 0px)";d.element.dom.style.mozTransform="translate3d("+n+"px, "+(o)+"px, 0px)";d.element.dom.style.msTransform="translate3d("+n+"px, "+(o)+"px, 0px)";$(".clipper").css("height",m);$(".clipper").css("width",l);if(d.controlPanel.element.dom.offsetTop>=(($(document).height()*2)-o-50)){if(l-$(d.controlPanel.element.dom).width()>=0){$(d.controlPanel.element.dom).css("transform","translate3d("+(l-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-o-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translate3d("+(l-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-o-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-moz-transform","translate3d("+(l-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-o-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-ms-transform","translate3d("+(l-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-o-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}else{$(d.controlPanel.element.dom).css("transform","translate3d(0px, "+(($(document).height()*2)-o-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translate3d(0px, "+(($(document).height()*2)-o-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-moz-transform","translate3d(0px, "+(($(document).height()*2)-o-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-ms-transform","translate3d(0px, "+(($(document).height()*2)-o-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}}else{if(l-$(d.controlPanel.element.dom).width()>=0){$(d.controlPanel.element.dom).css("transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-webkit-transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-moz-transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-ms-transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)")}else{$(d.controlPanel.element.dom).css("transform","translateX(0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(d.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(d.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}};document.addEventListener("touchmove",d.move)}else{var c="";switch(d.getPrefix().css){case"-webkit-":c=d.element.dom.style.webkitTransform;break;case"-ms-":c=d.element.dom.style.msTransform;break;default:c=d.element.dom.style.transform;break}var e=c.substring(c.indexOf("(")+1,c.indexOf(")")).split(",");var h=parseFloat(e[0].substring(0,e[0].indexOf("p")));var f=parseFloat(e[1].substring(0,e[1].indexOf("p")));var b=g.changedTouches[0].clientX;var a=g.changedTouches[0].clientY;d.move=function(n){n.preventDefault();var p=b-n.changedTouches[0].clientX;var o=a-n.changedTouches[0].clientY;var m=h-p;var l=f-o;if(m<0){m=0}if(l<0){l=0}if(m>$(document).width()-$(d.clipBox.element.dom).width()){m=$(document).width()-$(d.clipBox.element.dom).width()}if(l>$(document).height()-$(d.clipBox.element.dom).height()){l=$(document).height()-$(d.clipBox.element.dom).height()}d.element.dom.style.transform="translate3d("+m+"px, "+(l)+"px, 0px)";d.element.dom.style.webkitTransform="translate3d("+m+"px, "+(l)+"px, 0px)";d.element.dom.style.mozTransform="translate3d("+m+"px, "+(l)+"px, 0px)";d.element.dom.style.msTransform="translate3d("+m+"px, "+(l)+"px, 0px)";if(d.controlPanel.element.dom.offsetTop>=(($(document).height()*2)-l-50)){if($(d.clipBox.element.dom).width()-$(d.controlPanel.element.dom).width()>=0){$(d.controlPanel.element.dom).css("transform","translate3d("+($(d.clipBox.element.dom).width()-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translate3d("+($(d.clipBox.element.dom).width()-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-moz-transform","translate3d("+($(d.clipBox.element.dom).width()-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-ms-transform","translate3d("+($(d.clipBox.element.dom).width()-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}else{$(d.controlPanel.element.dom).css("transform","translate3d(0px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translate3d(0px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-moz-transform","translate3d(0px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-ms-transform","translate3d(0px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}}else{if($(d.clipBox.element.dom).width()-150>=0){$(d.controlPanel.element.dom).css("transform","translateX("+($(d.clipBox.element.dom).width()-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-webkit-transform","translateX("+($(d.clipBox.element.dom).width()-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-moz-transform","translateX("+($(d.clipBox.element.dom).width()-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-ms-transform","translateX("+($(d.clipBox.element.dom).width()-$(d.controlPanel.element.dom).width())+"px)")}else{$(d.controlPanel.element.dom).css("transform","translateX(0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(d.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(d.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}};document.addEventListener("touchmove",d.move)}},mouseUp:function(b){var a=this;b.preventDefault();document.removeEventListener("touchmove",a.move)},selfDesoy()},resize:function(){var a=this;a.fireEvent("resetClippingArea",a)}},0,["clippingarea"],["component","container","panel","clippingarea"],{component:true,container:true,panel:true,clippingarea:true},["widget.clippingarea"],0,[InfinityMobile.view.tablet,"ClippingArea"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ClippingArea",Ext.Panel,{config:{modal:true,hideOnMaskTap:true,fullscreen:true,style:"position:absolute;top:-100%;",items:[{itemId:"backgroundTop",layout:"hbox",items:[{itemId:"clipBtn",hidden:false,height:30,width:60,html:"Clip"},{itemId:"resetBtn",hidden:false,height:30,width:60,html:"Reset"},{itemId:"cancelBtn",hidden:false,height:30,width:60,html:"Cancel"}]},{itemId:"clipArea",layout:{type:"hbox",align:"stretch"},height:"auto",width:"200%",items:[{itemId:"clipBox",html:'<div class="clipper" style="display:none;position:relative;top:0px;width:30px;overflow:auto;height:30px;border:4px solid rgb(69, 143, 187);"><div class="ui-resizable-handle ui-resizable-se se-handle" ></div></div>'},{itemId:"backgroundRight",flex:1,style:"background-color:rgba(0, 0, 0, 0.5)"}]},{itemId:"backgroundBottom"},{itemId:"backgroundLeft"}]},initil)})},bannerAdCheck:function(){var b=this;var a=Ext.getStore("SettingStore");if(a.data.items[0].raw.reader.bannerAd!=null){b.element.dom.style.top="calc(-100% - 110px)"}},fillCheck:function(){var b=this;if(b.readerActiveItem.zoomMode=="fill"){var a=($(b.reader.element.dom).height()/b.readerActiveItem.height)*100;b.element.dom.style.top="calc(-"+a+"% + "+b.readerActiveItem.scroller.position.y+"px)"}},zoompx"}},keyx,a)},mousve)}},mouseUp:function(b){var a=this;b.preventDefault();document.removeEventListener("touchmove",a.move)},selfDesoy()},resize:function(){var a=this;a.fireEvent("resetClippingArea",a)}},0,["clippingarea"],["component","container","panel","clippingarea"],{component:true,container:true,panel:true,clippingarea:true},["widget.clippingarea"],0,[InfinityMobile.view.phone,"ClippingArea"],0));(Ext.cmd.derive("InfinityMobile.view.phone.clippingPrompt",Ext.Container,{config:{modal:true,centered:true,width:"80%",style:"background-color:white;border:1px solid black;border-radius:5px;padding:0px;",fullscreen:true,items:[{id:"clippingPromptToolBar",height:40,items:[{itemId:"clippingTitle",top:10,left:10,html:"Create Clipping"}]},{id:"clippingPromptBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"clippingPromptContainerText",margin:"0 0 20px 0"},{itemId:"buttonArea",padding:"20",layout:"hbox",items:[{itemId:"checkbox",flex:1,html:"<input class='check' type='checkbox' ><label style='font-size:8px;padding:5px;'>Don't show again.</label></input>"},{itemId:"button",flex:1,html:"Ok",style:"text-align:center;margin: 5px;border-style:solid;height:30px;width:120px;"}]}]}]},initialize:function(){var b=this;var a=b.getComponent("clippingPromptToolBar");b.clippingTitle=a.getComponent("clippingTitle");b.clippingTitle.setHtml(language.clippings.createClipping);a.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});b.clippingPromptBody=b.getComponent("clippingPromptBodyContainer");b.buttonArea=b.clippingPromptBody.getComponent("buttonArea");b.button=b.buttonArea.getComponent("button");b.checkbox=b.buttonArea.getComponent("checkbox").element.down(".check");b.bodyText=b.clippingPromptBody.getComponent("clippingPromptContainerText");if(b.config.readerActiveItem!=null){b.readerActiveItem=b.config.readerActiveItem}if(b.config.reader!=null){b.reader=b.config.reader}b.buttonArea.getComponent("checkbox").element.onue}}},scope:b.buttonArea.getComponent("checkbox")});b.setupText();b.button.element.on({tap:b.okay,scope:b});b.button.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});if(settings.newsday){b.element.dom.style.borderRadius=""}},okay:function(){var b=this;console.log(b.checkbox.dom.checked);if(b.checkbox.dom.checked){try{localStorage.setItem("clippingPrompt"+publicationguid,"set")}catch(a){}}if(Ext.os.is.Desktop){var c=Ext.create("InfinityMobile.view.ClippingArea",{readerActiveItem:b.readerActiveItem,reader:b.reader})}else{var c=Ext.create("InfinityMobile.view.tablet.ClippingArea",{readerActiveItem:b.readerActiveItem,reader:b.reader})}Ext.Viewport.add(c);c.show();b.destroy()},setu.ok)}},0,["clippingprompt"],["component","container","clippingprompt"],{component:true,container:true,clippingprompt:true},["widget.clippingprompt"],0,[InfinityMobile.view.phone,"clippingPrompt"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ClippingOptions",Ext.Container,{config:{modal:true,hideOnMaskTap:true,centered:true,style:"background-color:white;border:1px solid black;border-radius:5px;padding:0px;",fullscreen:true,items:[{id:"clippingOptionsToolBar",height:40,style:"background-color:#e6e6e6;border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{top:10,left:10,html:"<b>Clipping Options</b>"},{id:"clippingOptionsToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"clippingOptionsBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"clippingOptionsContainerText",margin:"0 0 20px 0",html:"<p style='font-size:12px;'>To download or email your clipping(s), simply select one or more and click the relevant button. To view a clipping at a bigger size, select the thumbnail(s) and then click the 'Preview' button.<p><br /><br /><p style='font-size:10px;color:#444444'>Please note: Once you close your browser or exit the session, your clippings library will be cleared.</p>"},{itemId:"clippingScroller",height:"180px",layout:"hbox",scrollable:{direction:"horizontal"}},{itemId:"options",items:[{itemId:"ButtonsDiv"},{itemId:"EmailDiv"}]}]}]},initi()}}},addThumbnails:function(){var b=this;for(var a=0;a<b.images.length;a++){var c=Ext.create("InfinityMobile.view.ClippingMenuThumb",{image:b.images[a],imgWidth:b.widths[a],imgHeight:b.heights[a],clicked:false});b.clippingScroller.add(c);c.show()}},promptUser:function(){var a=this;prompt=Ext.create("InfinityMobile.view.ClippingMenuPrompt")},updateImages:function(a){var b=this;b.images=a;b.clippingScroller.removeAll(true);b.addThumbnails()}},0,["clippingoptions"],["component","container","clippingoptions"],{component:true,container:true,clippingoptions:true},["widget.clippingoptions"],0,[InfinityMobile.view.phone,"ClippingOptions"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticleSectionItem",Ext.Container,{config:{height:"100%",width:250,layout:"vbox",style:"border:5px solid transparent;",items:[{itemId:"bodyContainer1",height:200,style:"color:white;font-size:15px;border:5px solid transparent;overflow:hidden;"}]},initi:a})},loadArtv>")},returnBodyText:function(f){var e=this;var g="";var d=0;var a=200;for(var c=0;c<f.length;c++){if(d+f[c].innerHTML.length<a){g+="<p>"+f[c].innerHTML+"</p>"}else{var b=a-d;g+="<p>"+f[c].innerHTML.substring(0,b)+"...</p>";break}}return g},body1Tap:function(){var a=this;console.log("ARTICLE TOP TAP");a.fireEvent("jumpToPage",a.article1.pageNumber-1);a.fireEvent("articleClick",a.article1,a.article1.guid);a.container.destroy()}},0,["articlesectionitem"],["component","container","articlesectionitem"],{component:true,container:true,articlesectionitem:true},["widget.articlesectionitem"],0,[InfinityMobile.view.phone,"ArticleSectionItem"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticleSectionItemImg",Ext.Container,{config:{height:"100%",width:280,layout:"vbox",style:"border:5px solid transparent;",items:[{itemId:"image",height:125,style:"border:5px solid transparent;"},{itemId:"bodyContainer",height:75,style:"color:white;font-size:15px;border:5px solid transparent;overflow:hidden;"}]},initi:a})},loadArv>")},onTap:function(){var a=this;console.log("TAP IMAGE ARTICLE");a.fireEvent("jumpToPage",a.article.pageNumber-1);a.fireEvent("articleClick",a.article,a.article.guid);a.container.destroy()}},0,["articlesectionitemimg"],["component","container","articlesectionitemimg"],{component:true,container:true,articlesectionitemimg:true},["widget.articlesectionitemimg"],0,[InfinityMobile.view.phone,"ArticleSectionItemImg"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticlesSectionContainer",Ext.Container,{config:{height:250,layout:"vbox",style:"margin-left:15px solid transparent !important;margin-right:15px solid transparent !important;",items:[{itemId:"sectionTitle",height:40,style:"background-color:black;opacity:0.95;color:white;font-size:18px;font-weight:bold;"},{itemId:"sectionBody",height:360,layout:"hbox",style:"background-color:rgba(0,0,0,0.8);"}]},inities()},loadArtc)}}}},0,["articlesectioncontainer"],["component","container","articlesectioncontainer"],{component:true,container:true,articlesectioncontainer:true},["widget.articlesectioncontainer"],0,[InfinityMobile.view.phone,"ArticlesSectionContainer"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ArticlesContainer",Ext.Container,{config:{width:"100%",height:440,zIndex:100000,bottom:-40,items:[{itemId:"sectionToolbar",width:"100%",height:40,top:0,layout:"hbox",style:"background-color:rgba(0,0,0,0.8);border-bottom:1px solid gray;overflow:hidden;",items:[{itemId:"sectionArea",height:40,width:"100%",layout:"hbox",style:"overflow:hidden;"},{itemId:"expandBtn",cls:"pointerCursor",height:40,width:"40px",right:40,style:'border-left:1px solid gray;background-image:url("resources/images/reader icons/expand ic.png");background-size:60% 50%;background-repeat:no-repeat;background-position:center;'},{itemId:"closeBtn",cls:"pointerCursor",height:40,width:"40px",right:0,style:'border-left:1px solid gray;background-image:url("resources/images/reader icons/close btn.png");background-size:60% 50%;background-repeat:no-repeat;background-position:center;'}]},{itemId:"con",layout:"hbox",top:40,style:"background-color:rgba(0,0,0,0.8);",width:"100%",height:"360px",scrollable:{direction:"horizontal"}}]},initialize:function(){var a=this;a.sectionIndex=null;a.sectionToolbar=a.getComponent("sectionToolbar");a.sectionArea=a.sectionToolbar.getComponent("sectionArea");a.closeBtn=a.sectionToolbar.getComponent("closeBtn");a.expandBtn=a.sectionToolbar.getComponent("expandBtn");a.contentArea=a.getComponent("con");a.pagesHeight=180;a.scrollType="senchaScroller";a.offset=0;if(a.config.articles!=null){a.articles=a.config.articles}if(a.config.sections!=null){a.sections=a.config.sections}if(a.config.mode!=null){a.mode=a.config.mode}a.checkMode();a.sortSections();if(a.articles.length>0&&settings.articles!=null){a.display="articles";a.loadContainer()}else{a.display="articles";a.mode="start"}a.getComponent("con").getScrollable().getScroller().on({scroll:a.onScroll,scope:a});a.element.on({hide:a.hideMe,scope:a});if(Ext.os.is.Tablet){a.tabletMode()}a.closeBtn.element.on({tap:a.hide,scope:a});a.expandBtn.element.on({tap:a.expand,scope:a});if(a.sectionArea.getScrollable()==null){a.sectionArea.setScrollable({direction:"horizontal"})}Ext.Viewport.on("orientationchange",function(){a.resizeOb()})},sortSections:function(){var d=this;var f=[];var b;for(var c=0;c<d.sections.length;c++){var e=d.sections[c];for(var a=0;a<d.sections.length;a++){if(parseFloat(e.pageNumber)<parseFloat(d.sections[a].pageNumber)){b=d.sections[c];d.sections[c]=d.sections[a];d.sections[a]=b}}}},table"})}},checx)"}},loadContainer:function(){var e=this;if(e.sections.length>0){var g=[];if(e.sections[0].pageNumber>1){e.sections.unshift({page:1,pageNumber:1,name:""})}for(var c=0;c<e.sections.length;c++){var d=[];var b=parseInt(e.sections[c].page);for(var a=0;a<e.articles.length;a++){if(e.sections[c+1]!=null){if(e.articles[a].pageNumber>=b&&e.articles[a].pageNumber<parseInt(e.sections[c+1].page)){d.push(e.articles[a])}}else{if(e.articles[a].pageNumber>=b){d.push(e.articles[a])}}}if(d.length>0){var f=Ext.create("InfinityMobile.view.ArticlesSectionContainer",{section:e.sections[c],articles:d,container:e});e.getComponent("con").add(f)}}}else{var f=Ext.create("InfinityMobile.view.ArticlesSectionContainer",{section:"All",articles:e.articles,container:e});e.getComponent("con").add(f)}},loadSectionsBtns:function(){var g=this;g.sectionArea.removeAll();var f=0;for(var d=0;d<g.sections.length;d++){if(d==0){var b="white"}else{var b="gray"}if(g.articles.length>0){var e=[];var c=parseInt(g.sections[d].page);for(var a=0;a<g.articles.length;a++){if(g.sections[d+1]!=null){if(g.articles[a].pageNumber>=c&&g.articles[a].pageNumber<parseInt(g.sections[d+1].page)){e.push(g.articles[a])}}else{if(g.articles[a].pageNumber>=c){e.push(g.articles[a])}}}if(e.length>0){var h=Ext.create("Ext.Container",{cls:"browserBtn",height:40,html:g.sections[d].name.trim(),style:"color:"+b+";font-size:18px;font-weight:bold;margin:10px;white-space:nowrap;",position:f,articleContainer:g});g.sectionArea.add(h);h.element.on({tap:function(){g.sectionTap(this,this.config.articleContainer)},painted:function(){var k=this.config.articleContainer;var j=k.sectionArea.items.items[this.config.position].element.down("div").down("div").dom.clientWidth;this.setWidth(j)},scope:h});f+=1}}else{if(g.sections.length>0){var h=Ext.create("Ext.Panel",{cls:"browserBtn",height:40,html:g.sections[d].name.trim(),style:"color:"+b+";font-size:18px;font-weight:bold;margin:10px;white-space:nowrap;",position:f,articleContainer:g});g.sectionArea.add(h);h.element.on({tap:function(){g.sectionTap(this,this.config.articleContainer)},painted:function(){var k=this.config.articleContainer;var j=k.sectionArea.items.items[this.config.position].element.down("div").down("div").dom.clientWidth;this.setWidth(j)},scope:h});f+=1}}}},loadSectionBtnsPages:function(){var d=this;d.sectionArea.removeAll();var c=0;for(var b=0;b<d.sections.length;b++){if(b==0){var a="white"}else{var a="gray"}var e=Ext.create("Ext.Panel",{cls:"browserBtn",height:40,html:d.sections[b].name.trim(),style:"color:"+a+";font-size:18px;font-weight:bold;margin:10px;white-space:nowrap;",position:c,articleContainer:d});d.sectionArea.add(e);e.element.onner)},painted:function(){var g=this.config.articleContainer;var f=g.sectionArea.items.items[this.config.position].element.down("div").down("div").dom.clientWidth;this.setWidth(f)},scope:e});c+=1}},onScroll:function(n){var o=this;if(o.mode=="articles"){if(n.position.x>0){var m=0;var j;for(var k=0;k<o.getComponent("con").items.items.length;k++){var f=o.getComponent("con").items.items[k].element.dom.offsetLeft;if(o.getComponent("con").items.items[k+1]!=null){var a=o.getComponent("con").items.items[k+1].element.dom.offsetLeft;if(n.position.x>=f&&parseInt(n.position.x)<parseInt(a)){m=k;j=f;break}}else{m=k;j=f;break}}var l=0;for(var k=m;k<o.getComponent("con").items.items.length;k++){if(n.position.x+$(document).width()>=parseFloat(o.getComponent("con").items.items[k].element.dom.offsetLeft)){l=k}}for(var k=0;k<o.getComponent("con").items.items.length;k++){var d=o.sectionArea.items.items[k];if(d!=null){$(d.element.dom).css("color","gray")}}for(var k=m;k<=l;k++){var d=o.sectionArea.items.items[k];if(d!=null){$(d.element.dom).css("color","white")}}var q=o.contentArea.getItems().items;for(var k=m;k<=l;k++){var c=q[k].items.items[0].items.items;for(var p=0;p<c.length;p++){if((n.position.x-350<=c[p].element.dom.offsetLeft&&n.position.x+$(document).width()>=c[p].element.dom.offsetLeft)||c[p].element.dom.offsetLeft==0){if(c[p].loadImage!=null){c[p].loadImage()}}}}}else{m=0;var l=0;for(var k=m;k<o.getComponent("con").items.items.length;k++){if(n.position.x+$(document).width()>=parseFloat(o.getComponent("con").items.items[k].element.dom.offsetLeft)){l=k}}for(var k=0;k<o.getComponent("con").items.items.length;k++){var d=o.sectionArea.items.items[k];if(d!=null){$(d.element.dom).css("color","gray")}}for(var k=m;k<=l;k++){var d=o.sectionArea.items.items[k];if(d!=null){$(d.element.dom).css("color","white")}}}}else{if(o.mode=="pages"){if(n.position.x>0){var m=0;var g=[];for(var k=0;k<o.sectionArea.getItems().length;k++){var h=o.getComponent("con").items.items[0].items.items[o.sections[k].page-1];if(h!=null){g[k]=h.element.dom.offsetLeft}}for(var k=0;k<=g.length;k++){if(g[k+1]!=null){if(parseInt(n.position.x)>=parseInt(g[k])&&parseInt(n.position.x)<parseInt(g[k+1])){m=k;break}}else{m=k;break}}var l=0;for(var k=m;k<g.length;k++){if(n.position.x+$(document).width()>=parseFloat(g[k])){l=k}}for(var k=0;k<o.sectionArea.items.items.length;k++){var d=o.sectionArea.items.items[k];$(d.element.dom).css("color","gray")}for(var k=m;k<=l;k++){var d=o.sectionArea.items.items[k];if(d!=null){$(d.element.dom).css("color","white")}}var b=o.contentArea.getItems().items[0].innerItems;for(var k=0;k<b.length;k++){if((n.position.x<=b[k].element.dom.offsetLeft&&n.position.x+$(document).width()>=b[k].element.dom.offsetLeft)||b[k].element.dom.offsetLeft==0){if(b[k].loadImage!=null){b[k].loadImage()}}}}else{m=0;var l=0;var g=[];for(var k=0;k<o.sections.length;k++){var h=o.getComponent("con").items.items[0].items.items[o.sections[k].page];if(h!=null){g[k]=h.element.dom.offsetLeft}}for(var k=m;k<g.length;k++){if(n.position.x+$(document).width()>=parseFloat(g[k]-150)){l=k}}for(var k=0;k<o.sectionArea.items.items.length;k++){var d=o.sectionArea.items.items[k];$(d.element.dom).css("color","gray")}for(var k=m;k<=l;k++){var d=o.sectionArea.items.items[k];if(d!=null){$(d.element.dom).css("color","white")}}}}}},articleTabTap:function(l){var k=this;if(l!=null){l.stopPropagation()}if(k.display=="pages"){k.getComponent("con").removeAll();k.loadContainer()}var c=Ext.getStore("SettingStore");if(c.data.items[0].raw.dynamic!=null){var d=80;k.expandBtn.show()}else{var d=40;k.expandBtn.hide()}k.sectionArea.setWidth($(document).width()-d);k.display="articles";k.getComponent("con").getScrollable().getScroller().scrollTo(1);var h=0;var g=0;for(var f=h;f<k.getComponent("con").items.items.length;f++){if($(document).width()>=parseFloat(k.getComponent("con").items.items[f].element.dom.offsetLeft)){g=f}}if(k.sections>0){for(var f=0;f<k.getComponent("con").items.items.length;f++){var b=k.sectionArea.items.items[f];$(b.element.dom).css("color","gray")}for(var f=h;f<=g;f++){var b=k.sectionArea.items.items[f];if(b!=null){$(b.element.dom).css("color","white")}}}var n=k.contentArea.getItems().items;for(var f=h;f<=g;f++){if(n[f]!=null){var a=n[f].items.items[0].items.items;if(a!=null){for(var m=0;m<a.length;m++){if((0<=a[m].element.dom.offsetLeft&&$(document).width()>=a[m].element.dom.offsetLeft)||a[m].element.dom.offsetLeft==0){if(a[m].loadImage!=null){a[m].loadImage()}}}}}}if(k.mode=="toggle"){try{switch(k.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes toggleToArticle { 0%{ -webkit-transform:translate3d(0px, 400px, 0px); } 100%{ -webkit-transform:translate3d(0px, 0px, 0px); } }",0);k.element.dom.style.webkitAnimation="toggleToArticle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes toggleToArticle { 0%{ transform:translate3d(0px, 400px, 0px); } 100%{ transform:translate3d(0px, 0px, 0px); } }",0);k.element.dom.style.animation="toggleToArticle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes toggleToArticle { 0%{ -moz-transform:translate3d(0px, 400px, 0px); } 100%{ -moz-transform:translate3d(0px, 0px, 0px); } }",0);k.element.dom.style.mozAnimation="toggleToArticle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes toggleToArticle { 0%{ -ms-transform:translate3d(0px, 400px, 0px); } 100%{ -ms-transform:translate3d(0px, 0px, 0px); } }",0);k.element.dom.style.msAnimation="toggleToArticle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes toggleToArticle { 0%{ transform:translate3d(0px, 400px, 0px); } 100%{ transform:translate3d(0px, 0px, 0px); } }",0);k.element.dom.style.animation="toggleToArticle 0.5s forwards";break}k.mode="articles";$(k.articleTabText.dom).attr("class","pageArticleTab");$(k.pagesTabText.dom).attr("class","");if(Ext.os.is.Desktop){window.onkeydown=null}k.setModal({style:"opacity:0;"});k.setHideOnMaskTap(true)}catch(j){}}else{if(k.mode=="pages"){try{k.mode="articles";switch(k.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes pagesToArticle { 0%{ -webkit-transform:translate3d(0px, 160px, 0px); } 100%{ -webkit-transform:translate3d(0px, 0px, 0px); } }",0);k.element.dom.style.webkitAnimation="pagesToArticle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes pagesToArticle { 0%{ transform:translate3d(0px, 160px, 0px); } 100%{ transform:translate3d(0px, 0px, 0px); } }",0);k.element.dom.style.animation="pagesToArticle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes pagesToArticle { 0%{ -moz-transform:translate3d(0px, 160px, 0px); } 100%{ -moz-transform:translate3d(0px, 0px, 0px); } }",0);k.element.dom.style.mozAnimation="pagesToArticle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes pagesToArticle { 0%{ -ms-transform:translate3d(0px, 160px, 0px); } 100%{ -ms-transform:translate3d(0px, 0px, 0px); } }",0);k.element.dom.style.msAnimation="pagesToArticle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes pagesToArticle { 0%{ transform:translate3d(0px, 160px, 0px); } 100%{ transform:translate3d(0px, 0px, 0px); } }",0);k.element.dom.style.animation="pagesToArticle 0.5s forwards"}$(k.articleTabText.dom).attr("class","pageArticleTab");$(k.pagesTabText.dom).attr("class","");if(Ext.os.is.Desktop){window.onkeydown=null}k.setModal({style:"opacity:0;"});k.setHideOnMaskTap(true)}catch(j){}}else{if(k.mode=="articles"){try{switch(k.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes articleToToggle { 0%{ -webkit-transform:translate3d(0px, 0px, 0px); } 100%{ -webkit-transform:translate3d(0px, 400px, 0px); } }",0);k.element.dom.style.webkitAnimation="articleToToggle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes articleToToggle { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, 400px, 0px); } }",0);k.element.dom.style.animation="articleToToggle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes articleToToggle { 0%{ -moz-transform:translate3d(0px, 0px, 0px); } 100%{ -moz-transform:translate3d(0px, 400px, 0px); } }",0);k.element.dom.style.mozAnimation="articleToToggle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes articleToToggle { 0%{ -ms-transform:translate3d(0px, 0px, 0px); } 100%{ -ms-transform:translate3d(0px, 400px, 0px); } }",0);k.element.dom.style.msAnimation="articleToToggle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes articleToToggle { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, 400px, 0px); } }",0);k.element.dom.style.animation="articleToToggle 0.5s forwards";break}k.mode="toggle";$(k.articleTabText.dom).attr("class","");$(k.pagesTabText.dom).attr("class","");k.setHideOnMaskTap(false);k.setModal(false);if(Ext.os.is.Desktop){if(k.keyDownFunc!=null){window.onkeydown=k.keyDownFunc}}}catch(j){}}}}k.loadSectionsBtns()},pagesTabTap:function(l){var k=this;if(l!=null){l.stopPropagation()}console.log(k.mode);if(k.display=="articles"){k.getComponent("con").removeAll();var a=Ext.create("InfinityMobile.view.ReaderPages",{articlesContainer:k});k.getComponent("con").add(a);k.getComponent("con").setScrollable({direction:"horizontal"});k.getComponent("con").setPadding(10,10,10,10);a.element.on({painted:function(){this.config.articlesContainer.pagesHeight=this.items.items[0].element.down("img").dom.clientHeight},scope:a})}k.expandBtn.hide();var f=(k.pagesHeight);k.sectionArea.setWidth($(document).width()-40);k.display="pages";index=0;var h=0;var c=[];for(var g=0;g<k.sections.length;g++){var d=k.getComponent("con").items.items[0].items.items[k.sections[g].page];if(d!=null){c[g]=d.element.dom.offsetLeft}}for(var g=index;g<c.length;g++){if($(document).width()>=parseFloat(c[g]-150)){h=g}}if(k.sections>0){for(var g=0;g<k.sectionArea.items.items.length;g++){var b=k.sectionArea.items.items[g];$(b.element.dom).css("color","gray")}for(var g=index;g<=h;g++){var b=k.sectionArea.items.items[g];if(b!=null){$(b.element.dom).css("color","white")}}}setTimeout(function(){var e=k.contentArea.getItems().items[0].innerItems;for(var m=0;m<e.length;m++){if((0<=e[m].element.dom.offsetLeft&&$(document).width()>=e[m].element.dom.offsetLeft)){e[m].loadImage()}}},200);if(k.mode=="toggle"||k.mode=="start"){try{switch(k.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes toggleToPages { 0%{ -webkit-transform:translate3d(0px, 400px, 0px); } 100%{ -webkit-transform:translate3d(0px, 160px, 0px); } }",0);k.element.dom.style.webkitAnimation="toggleToPages 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes toggleToPages { 0%{ transform:translate3d(0px, 400px, 0px); } 100%{ transform:translate3d(0px, 160px, 0px); } }",0);k.element.dom.style.animation="toggleToPages 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes toggleToPages { 0%{ -moz-transform:translate3d(0px, 400px, 0px); } 100%{ -moz-transform:translate3d(0px, 160px, 0px); } }",0);k.element.dom.style.mozAnimation="toggleToPages 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes toggleToPages { 0%{ -ms-transform:translate3d(0px, 400px, 0px); } 100%{ -ms-transform:translate3d(0px, 160px, 0px); } }",0);k.element.dom.style.msAnimation="toggleToPages 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes toggleToPages { 0%{ transform:translate3d(0px, 400px, 0px); } 100%{ transform:translate3d(0px, 160px, 0px); } }",0);k.element.dom.style.animation="toggleToPages 0.5s forwards";break}k.mode="pages";$(k.pagesTabText.dom).attr("class","pageArticleTab");$(k.articleTabText.dom).attr("class","");if(Ext.os.is.Desktop){window.onkeydown=null}k.setModal({style:"opacity:0;"});k.setHideOnMaskTap(true)}catch(j){}}else{if(k.mode=="articles"){try{switch(k.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes articlesToPages { 0%{ -webkit-transform:translate3d(0px, 0px, 0px); } 100%{ -webkit-transform:translate3d(0px, 160px, 0px); } }",0);k.element.dom.style.webkitAnimation="articlesToPages 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes articlesToPages { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, 160px, 0px); } }",0);k.element.dom.style.animation="articlesToPages 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes articlesToPages { 0%{ -moz-transform:translate3d(0px, 0px, 0px); } 100%{ -moz-transform:translate3d(0px, 160px, 0px); } }",0);k.element.dom.style.mozAnimation="articlesToPages 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes articlesToPages { 0%{ -ms-transform:translate3d(0px, 0px, 0px); } 100%{ -ms-transform:translate3d(0px, 160px, 0px); } }",0);k.element.dom.style.msAnimation="articlesToPages 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes articlesToPages { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, 160px, 0px); } }",0);k.element.dom.style.animation="articlesToPages 0.5s forwards";break}k.mode="pages";$(k.pagesTabText.dom).attr("class","pageArticleTab");$(k.articleTabText.dom).attr("class","");if(Ext.os.is.Desktop){window.onkeydown=null}k.setModal({style:"opacity:0;"});k.setHideOnMaskTap(true)}catch(j){}}else{if(k.mode=="pages"){try{switch(k.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes pagesToToggle { 0%{ -webkit-transform:translate3d(0px, 160px, 0px); } 100%{ -webkit-transform:translate3d(0px, 400px, 0px); } }",0);k.element.dom.style.webkitAnimation="pagesToToggle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes pagesToToggle { 0%{ transform:translate3d(0px, 160px, 0px); } 100%{ transform:translate3d(0px, 400px, 0px); } }",0);k.element.dom.style.animation="pagesToToggle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes pagesToToggle { 0%{ -moz-transform:translate3d(0px, 160px, 0px); } 100%{ -moz-transform:translate3d(0px, 400px, 0px); } }",0);k.element.dom.style.mozAnimation="pagesToToggle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes pagesToToggle { 0%{ -ms-transform:translate3d(0px, 160px, 0px); } 100%{ -ms-transform:translate3d(0px, 400px, 0px); } }",0);k.element.dom.style.msAnimation="pagesToToggle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes pagesToToggle { 0%{ transform:translate3d(0px, 160px, 0px); } 100%{ transform:translate3d(0px, 400px, 0px); } }",0);k.element.dom.style.animation="pagesToToggle 0.5s forwards";break}k.mode="toggle";$(k.pagesTabText.dom).attr("class","");$(k.articleTabText.dom).attr("class","");k.setHideOnMaskTap(false);k.setModal(false);if(Ext.os.is.Desktop){if(k.keyDownFunc!=null){window.onkeydown=k.keyDownFunc}}}catch(j){}}else{if(k.mode=="start"){k.mode="toggle"}}}}Ext.Viewport.on("orientationchange",function(){k.fireEvent("checkActivePageInBrowser",k)});k.fireEvent("checkActivePageInBrowser",k);k.loadSectionBtnsPages()},setModalTap:function(){var a=this;a.getModal().element.on({tap:a.hideMe,scope:a})},hideMe:function(){var a=this;a.element.dom.style.visibility="hidden"},hide:function(){var a=this;if(a.mode=="articles"){try{switch(a.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes articleToToggle { 0%{ -webkit-transform:translate3d(0px, 0px, 0px); } 100%{ -webkit-transform:translate3d(0px, 400px, 0px); } }",0);a.element.dom.style.webkitAnimation="articleToToggle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes articleToToggle { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, 400px, 0px); } }",0);a.element.dom.style.animation="articleToToggle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes articleToToggle { 0%{ -moz-transform:translate3d(0px, 0px, 0px); } 100%{ -moz-transform:translate3d(0px, 400px, 0px); } }",0);a.element.dom.style.mozAnimation="articleToToggle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes articleToToggle { 0%{ -ms-transform:translate3d(0px, 0px, 0px); } 100%{ -ms-transform:translate3d(0px, 400px, 0px); } }",0);a.element.dom.style.msAnimation="articleToToggle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes articleToToggle { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, 400px, 0px); } }",0);a.element.dom.style.animation="articleToToggle 0.5s forwards";break}a.mode="toggle";$(a.articleTabText.dom).attr("class","");$(a.pagesTabText.dom).attr("class","");a.setHideOnMaskTap(false);a.setModal(false);if(Ext.os.is.Desktop){if(a.keyDownFunc!=null){window.onkeydown=a.keyDownFunc}}}catch(b){}}else{try{switch(a.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes pagesToToggle { 0%{ -webkit-transform:translate3d(0px, 200px, 0px); } 100%{ -webkit-transform:translate3d(0px, 400px, 0px); } }",0);a.element.dom.style.webkitAnimation="pagesToToggle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes pagesToToggle { 0%{ transform:translate3d(0px, 200px, 0px); } 100%{ transform:translate3d(0px, 400px, 0px); } }",0);a.element.dom.style.animation="pagesToToggle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes pagesToToggle { 0%{ -moz-transform:translate3d(0px, 200px, 0px); } 100%{ -moz-transform:translate3d(0px, 400px, 0px); } }",0);a.element.dom.style.mozAnimation="pagesToToggle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes pagesToToggle { 0%{ -ms-transform:translate3d(0px, 200px, 0px); } 100%{ -ms-transform:translate3d(0px, 400px, 0px); } }",0);a.element.dom.style.msAnimation="pagesToToggle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes pagesToToggle { 0%{ transform:translate3d(0px, 200px, 0px); } 100%{ transform:translate3d(0px, 400px, 0px); } }",0);a.element.dom.style.animation="pagesToToggle 0.5s forwards";break}a.mode="toggle";$(a.pagesTabText.dom).attr("class","");$(a.articleTabText.dom).attr("class","");a.setHideOnMaskTap(false);a.setModal(false);if(Ext.os.is.Desktop){if(a.keyDownFunc!=null){window.onkeydown=a.keyDownFunc}}}catch(b){}}},sectionTap:function(b,c){if(c.mode=="articles"){var d=c.getComponent("con").items.items[b.config.position+c.offset].element.dom.offsetLeft;if(d>c.getComponent("con").getScrollable().getScroller().maxPosition.x){d=c.getComponent("con").getScrollable().getScroller().maxPosition.x}c.getComponent("con").getScrollable().getScroller().scrollTo(d+1)}else{if(c.mode=="pages"){console.log(b);var a=c.sections[b.config.position].page;var d=c.getComponent("con").items.items[0].items.items[a-1].element.dom.offsetLeft;if(d>c.getComponent("con").getScrollable().getScroller().maxPosition.x){d=c.getComponent("con").getScrollable().getScroller().maxPosition.x+150}c.getComponent("con").getScrollable().getScroller().scrollTo(d)}}},resizeOb:function(){var b=this;if(b.mode=="pages"){b.sectionArea.element.dom.style.width=($(document).width()-40)+"px"}else{var a=Ext.getStore("SettingStore");if(a.data.items[0].raw.dynamic!=null){var c=80;b.expandBtn.show()}else{var c=40;b.expandBtn.hide()}b.sectionArea.element.dom.style.width=($(document).width()-c)+"px"}},expand:function(b){var a=this;b.stopPropagation();a.fireEvent("expandArticles")},disableEvents:function(){var a=this;a.element.dom.style.pointerEvents="none"},enableEvents:function(){var a=this;a.element.dom.style.pointerEvents=""},getPrefix:function(){var a=window.getComputedStyle(document.documentElement,"");pre=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||(a.OLink===""&&["","o"]))[1];return{lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}}},0,["articlescontainer"],["component","container","articlescontainer"],{component:true,container:true,articlescontainer:true},["widget.articlescontainer"],0,[InfinityMobile.view.tablet,"ArticlesContainer"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticlesContainer",Ext.Container,{config:{width:"100%",height:"250px",bottom:0,modal:{style:"opacity:0;"},hideOnMaskTap:true,layout:"hbox",scrollable:{direction:"horizontal"}},initi:a})},loadContf)}}},onS"")}}},0,["articlescontainer"],["component","container","articlescontainer"],{component:true,container:true,articlescontainer:true},["widget.articlescontainer"],0,[InfinityMobile.view.phone,"ArticlesContainer"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.SplashScreen",Ext.Panel,{config:{id:"splashscreen",layout:{type:"vbox",align:"center",pack:"middle"},width:"100%",height:"100%",style:"background-color:#1e1e1e;",items:[{style:"text-align:center",html:'<img src="resources/images/tablet-loading-logo.png" style="max-width:75%" />'},{style:"text-align:center",html:'<div style="background-image:url(resources/images/loading.gif); background-repeat:no-repeat; background-size:contain"><img src="resources/images/loading-graphic.png" style="height:60px; margin:5px 10px 5px 15px" /></div>'}]}},0,["splashscreen"],["component","container","panel","splashscreen"],{component:true,container:true,panel:true,splashscreen:true},["widget.splashscreen"],0,[InfinityMobile.view.tablet,"SplashScreen"],0));(Ext.cmd.derive("InfinityMobile.view.phone.SplashScreen",Ext.Panel,{config:{id:"splashscreen",layout:{type:"vbox",align:"center",pack:"middle"},width:"100%",height:"100%",style:"background-color:#1e1e1e;",items:[{style:"text-align:center",html:'<img src="resources/images/mobile-loading-logo.png" style="max-width:75%" />'},{style:"text-align:center",html:'<div style="background-image:url(resources/images/loading.gif); background-repeat:no-repeat; background-size:contain"><img src="resources/images/loading-graphic.png" style="height:40px; margin:5px 10px 5px 13px" /></div>'}]}},0,["splashscreen"],["component","container","panel","splashscreen"],{component:true,container:true,panel:true,splashscreen:true},["widget.splashscreen"],0,[InfinityMobile.view.phone,"SplashScreen"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderHelper",Ext.Container,{config:{width:"100%",height:"100%",top:0,left:0,layout:"vbox",items:[{height:40},{itemId:"container",style:"background-color:rgba(0, 0, 0, 0.7)",flex:1,cls:"backgroundImage fillwidth",layout:{type:"vbox",align:"center"},items:[{itemId:"continueButton",cls:"helpertabletButton",width:"100%",style:"text-align:center"}]}]},initialize:function(){var a=this;a.container=a.getComponent("container");a.continueButton=a.container.getComponent("continueButton");a.setImages();a.continueListener()},setImages:function(){var b=this;var c="http://html5.pagesuite.com/desktop/stage/resources/images/helper-portrait-overlay-tablet.png";var a="http://html5.pagesuite.com/desktop/stage/resources/images/helper-landscape-overlay-tablet.png";if(settings.reader.helperScreen!=null){if(settings.reader.helperScreen.portrait!=null){c=settings.reader.helperScreen.portrait}if(settings.reader.helperScreen.landscape!=null){a=settings.reader.helperScreen.landscape}}b.container.setHtml("<img class='portraitOnly' src='"+c+"' style='width:100%' /><img class='landscapeOnly' src='"+a+"' style='width:100%' />")},continueListener:function(){var b=this;var c=true;if(settings.newsday!=null){if(settings.newsday.articleHelper=="true"){c=false;b.continueButton.setHeight(35);b.continueButton.setStyle({textAlign:"center"});b.continueButton.setLayout({type:"hbox",pack:"center",align:"middle"});var d=Ext.create("Ext.Container",{html:"Next >"});var a=Ext.create("Ext.Container",{width:200,height:"100%",style:"background-color:#4591b8; color: white;",layout:{type:"hbox",pack:"center",align:"middle"}});a.add(d);b.continueButton.add(a);b.continueButton.element.on("tap",function(){b.fireEvent("articleHelper",b)})}}if(c){b.continueButton.setHtml("<img src='resources/images/tablet-overlay-btn.png' style='width:200px' />");b.continueButton.element.on("tap",function(){b.fireEvent("close",b)})}}},0,["readerhelper"],["component","container","readerhelper"],{component:true,container:true,readerhelper:true},["widget.readerhelper"],0,[InfinityMobile.view.tablet,"ReaderHelper"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderHelper",Ext.Container,{config:{width:"100%",height:"100%",top:0,left:0,layout:"vbox",items:[{height:40},{itemId:"container",style:"background-color:rgba(230, 230, 230, 0.9)",flex:1,scrollable:{direction:"vertical",directionLock:true},items:[{itemId:"nextButton",cls:"helperphoneButton",html:"<div style='width:100%; text-align:center'><img src='resources/images/mobile-btn1.png' style='width:120px;' /></div>"},{itemId:"continueButton",cls:"helperphoneButton",hidden:true,html:"<div style='width:100%; text-align:center'><img src='resources/images/mobile-btn2.png' style='width:120px;' /></div>"}]}]},initialize:function(){var a=this;a.container=a.getComponent("container");a.nextButton=a.container.getComponent("nextButton");a.continueButton=a.container.getComponent("continueButton");a.setImages();a.nextListener();a.continueListener()},setI/>")},nextListener:function(){var a=this;a.nextButton.element.on("tap",function(){a.fireEvent("next",a)})},continueListener:function(){var a=this;var b=true;if(settings.newsday!=null){if(settings.newsday.articleHelper=="true"){b=false;a.continueButton.setHtml("<div style='width:100%; text-align:center'><img src='resources/images/mobile-btn1.png' style='width:150px;' /></div>");a.continueButton.element.on("tap",function(){a.fireEvent("articleHelper",a)})}}if(b){a.continueButton.setHtml("<div style='width:100%; text-align:center'><img src='resources/images/mobile-btn2.png' style='width:150px;' /></div>");a.continueButton.element.on("tap",function(){a.fireEvent("close",a)})}}},0,["readerhelper"],["component","container","readerhelper"],{component:true,container:true,readerhelper:true},["widget.readerhelper"],0,[InfinityMobile.view.phone,"ReaderHelper"],0));(Ext.cmd.derive("InfinityMobile.view.Overlay",Ext.Panel,{config:{modal:true,hideOnMaskTap:true,centered:true},hide:function(){var a=this;Ext.Panel.prototype.hide.apply(this,arguments);if(a.isSearch==null){Ext.Viewport.remove(a,true)}}},0,["overlay"],["component","container","panel","overlay"],{component:true,container:true,panel:true,overlay:true},["widget.overlay"],0,[InfinityMobile.view,"Overlay"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderMenuItem",Ext.Container,{config:{style:"font-size:14px;color:#cccccc;cursor:pointer",icon:"",text:""},initialize:function(){var a=this;if(a.config.id!=null){a.id=a.config.id}if(a.config.clickType!=null){}a.setupText(a.getText());a.element.on({tap:"onTap",scope:a})},setupText:function(b){var a=this;if(b!=null){switch(b.toLowerCase()){case"edition options":a.setHtml(language.menu.editionOptions);break;case"archive":a.setHtml(language.archive.archive);break;case"download":a.setHtml(language.download.download);break;case"bookmarks":a.setHtml(language.bookmarks.bookmarks);break;case"create clipping":a.setHtml(language.clippings.createClipping);break;case"print":a.setHtml(language.print.print);break;case"sections":if(a.id!="menuSectionsBtn"){a.setHtml(language.menu.sections)}else{a.setHtml(a.getText())}break;case"supplements":a.setHtml(language.menu.supplements);break;case"quick links":a.setHtml(language.menu.quickLinks);break;case"privacy":a.setHtml(language.menu.privacy!=null?language.menu.privacy:"PRIVACY");break;case"info":a.setHtml(language.menu.info);break;case"how to use":a.setHtml(language.howToUse.howToUse);break;case"contact us":a.setHtml(language.menu.contactUs);break;case"user options":a.setHtml(language.menu.userOptions);break;case"logout":a.setHtml(language.menu.logout);break;case"zones":if(a.id!="menuZonesBtn"){a.setHtml(language.menu.zones)}else{a.setHtml(a.getText())}break;case"articles":a.setHtml(language.articlesContainer.articles);break;case"pages":a.setHtml(language.articlesContainer.pages);break;case"terms and conditions":a.setHtml(language.menu.terms);break;case"my account":a.setHtml(language.menu.myAccount);break;case"search":a.setHtml(language.search.search);break;default:a.setHtml(a.getText());break}}},onTap:function(b){var a=this;if(a.config.clickType==null||a.config.clickType=="cls"){if(a.config.cls!=null){a.fireEvent(a.config.cls,a,"")}else{a.fireEvent(a.id,a,"")}}else{a.fireEvent(a.id,a,"")}b.stopPropagation()}},0,["readermenuitem"],["component","container","readermenuitem"],{component:true,container:true,readermenuitem:true},["widget.readermenuitem"],0,[InfinityMobile.view,"ReaderMenuItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderMenuTTS",Ext.Container,{config:{defaults:{width:30,height:30,margin:"0 15 0 0"},items:[{itemId:"TTSicon",status:"STOPPED"}]},initialize:function(){var a=this;a.ttsicon=a.getComponent("TTSicon");if(ttsFlag.status=="PLAYING"){a.ttsicon.addCls("playing")}if(window.SpeechSynthesisUtterance===undefined||settings.tts===undefined||currentProfile=="desktop"){a.hide();a.setHeight(0)}else{a.setTtsToggleListener()}if(settings.newsday!=null&&settings.newsday.menuShareItemSize!=null){a.setDefaults({width:settings.newsday.menuShareItemSize+"px",height:settings.newsday.menuShareItemSize+"px",margin:"0 15 0 0"})}if(settings.newsday!=null&&settings.newsday.useFontAwesome=="true"){a.ttsicon.setHtml('<span class="fa fa-volume-up fa-lg pointerCursor" aria-hidden="true" stlye="color:white;margin:8px;"></span>')}else{a.ttsicon.setStyle({backgroundImage:'url("resources/images/reader%20icons/speech-ic-wht2.png")',backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"})}},setTtsToggleListener:function(){var a=this;if(window.SpeechSynthesisUtterance!=undefined){a.ttsicon.element.on({tap:function(){switch(ttsFlag.status){case"STOPPED":case"FINISHED":a.fireEvent("playArticleTTS",ttsFlag,a.ttsicon);break;case"PAUSED":a.fireEvent("resumeArticleTTS",ttsFlag,a.ttsicon);break;case"PLAYING":a.fireEvent("pauseArticleTTS",ttsFlag,a.ttsicon);break;default:a.fireEvent("stopArticleTTS",ttsFlag,a.ttsicon)}}})}}},0,["readermenutts"],["component","container","readermenutts"],{component:true,container:true,readermenutts:true},["widget.readermenutts"],0,[InfinityMobile.view,"ReaderMenuTTS"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderMenuShare",Ext.Container,{config:{defaults:{width:30,height:30,margin:"0 15 15 0"}},initialize:function(){var a=this;if(settings.newsday!=null){if(settings.newsday.menuShareItemSize!=null){a.setDefaults({width:settings.newsday.menuShareItemSize+"px",height:settings.newsday.menuShareItemSize+"px",margin:"0 15 15 0"})}}},shareL=""}}},0,["readermenushare"],["component","container","readermenushare"],{component:true,container:true,readermenushare:true},["widget.readermenushare"],0,[InfinityMobile.view,"ReaderMenuShare"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderMenuSponsor",Ext.Container,{config:{style:"font-size:14px;color:#cccccc;cursor:pointer",height:50,width:"100%"},initialize:function(){var a=this;if(settings.menu.sponsor!=null){switch(settings.menu.sponsor.type){case"url":a.setupUrlAdvert();break}}},setupUrlAdvert:function(){var f=this;var b=settings.menu.sponsor.url;if(b!=null&&b.length>0){var a=50;var d=320;var e=settings.menu.sponsor;if(e.size!=null){try{d=e.size.split(",")[0];a=e.size.split(",")[1]}catch(c){console.error("[ReaderMenuSponsor]:\n",c)}}var g="pubid="+publicationguid+"&h="+a+"&w="+d+"&pnum=1&elemid="+encodeURIComponent(f.getId())+"&menu=true";b+=b.indexOf("?")==-1?"?"+g:"&"+g;f.setHeight(parseInt(a));f.setHtml("<iframe src='"+b+"' scrolling='no' style='width:"+d+"px;height:"+a+"px;border:none;'></iframe>")}else{this.hide()}}},0,["readermenusponsor"],["component","container","readermenusponsor"],{component:true,container:true,readermenusponsor:true},["widget.readermenusponsor"],0,[InfinityMobile.view,"ReaderMenuSponsor"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderMenu",InfinityMobile.view.Overlay,{config:{width:250,layout:"vbox",style:"background-color:#1e1e1e;padding:0; border-radius:0; height:calc(100% - 40px)",right:0,top:40,items:[{itemId:"menuLayout",cls:"mainMenu",style:"background-color:#1e1e1e;",layout:"vbox",height:"100%",scrollable:{direction:"vertical",directionLock:true},items:[{itemId:"menuHeader",html:"Menu",margin:0,height:40,style:"background-color:#2c2f32; color:#ffffff",padding:"10 15 10 15",items:[{itemId:"menuHeaderClose",cls:"pointerCursor",right:0,top:0,height:40,width:40,padding:10,html:"<img src='../assets/Menu/close-btn-white.png' style='width:20px' />"}]},{id:"menuEditionOptions",cls:"menuSectionHeader menuEditionOptions",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray;",padding:"10 15 10 15",text:"EDITION OPTIONS",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/minimise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"editionOptionsSection",cls:"menuSectionContent menuEditionOptions",style:"overflow:hidden;",margin:"0 0 0 0",layout:"vbox",defaults:{padding:15},minimized:false,items:[{id:"menuPages",cls:"menuItem menuPages",clickType:"id",xtype:"readermenuitem",text:"Pages"},{id:"menuArchive",cls:"menuItem menuArchive",clickType:"id",xtype:"readermenuitem",text:"Archive"},{id:"menuArticles",xtype:"readermenuitem",text:"Articles"},{id:"menuDynamicArticles",cls:"menuItem menuDynamicArticles",clickType:"id",xtype:"readermenuitem",text:"Advanced"},{id:"menuDownload",cls:"menuItem menuDownload",clickType:"id",xtype:"readermenuitem",text:"Download"},{id:"menuSearch",cls:"menuItem menuSearch",clickType:"id",xtype:"readermenuitem",text:"Search"},{id:"menuBookmarks",cls:"menuItem menuBookmarks",clickType:"id",xtype:"readermenuitem",text:"Bookmarks"},{id:"menuCreateClipping",cls:"menuItem menuCreateClipping",clickType:"id",xtype:"readermenuitem",text:"Create Clipping"},{id:"menuPrint",cls:"menuItem menuPrint",clickType:"id",xtype:"readermenuitem",text:"Print"},{id:"menuTTS",cls:"menuItem menuSharing",xtype:"readermenutts",layout:"vbox"},{id:"menuSharing",cls:"menuItem menuSharing",xtype:"readermenushare",layout:"vbox"}]},{itemId:"sponsorEdition",xtype:"readermenusponsor"},{id:"menuSections",cls:"menuSectionHeader menuSections",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray",padding:"10 15 10 15",text:"SECTIONS",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuSectionsContainer",cls:"menuSectionContent menuSections",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true},{id:"menuSupplements",cls:"menuSectionHeader menuSupplements",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray",padding:"10 15 10 15",text:"SUPPLEMENTS",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuSupplementsContainer",cls:"menuSectionContent menuSupplements",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true},{id:"menuZones",cls:"menuSectionHeader menuZones",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray",padding:"10 15 10 15",text:"ZONES",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuZonesContainer",cls:"menuSectionContent menuZones",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true},{id:"menuQuickLinks",cls:"menuSectionHeader menuQuickLinks",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray",padding:"10 15 10 15",text:"QUICK LINKS",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuQuickLinksContainer",cls:"menuSectionContent menuQuickLinks",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true},{id:"menuInfo",cls:"menuSectionHeader menuInfo",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray",padding:"10 15 10 15",text:"INFO",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuInfoContainer",cls:"menuSectionContent menuInfo",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true,items:[{id:"menuHowToUse",xtype:"readermenuitem",cls:"menuItem menuHowToUse",clickType:"id",text:"How to use"},{id:"menuHelp",xtype:"readermenuitem",cls:"menuItem menuHelp",clickType:"id",text:"Contact Us"},{id:"menuTerms",cls:"menuItem menuTerms",clickType:"id",xtype:"readermenuitem",text:"Terms and Conditions"},{id:"menuStoryPref",cls:"menuItem menuStoryPref",clickType:"id",xtype:"readermenuitem",text:"Story Window Preferences"}]},{id:"menuUserOp",cls:"menuSectionHeader menuUserOp",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray",padding:"10 15 10 15",text:"USER OPTIONS",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuUserContainer",cls:"menuSectionContent menuUserOp",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true,items:[{id:"menuAccount",xtype:"readermenuitem",cls:"menuItem menuAccount",clickType:"id",text:"My Account"},{id:"menuUser",xtype:"readermenuitem",cls:"menuItem menuUser",clickType:"id",text:"Logout"}]},{id:"menuPrivacy",cls:"menuSectionHeader menuPrivacy",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray",padding:"10 15 10 15",text:"PRIVACY",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuPrivacyContainer",cls:"menuSectionContent menuPrivacyContainer",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:false}]}]},initialize:function(){var b=this;var a=Ext.getStore("SettingStore");if(b.config.direction!=null){b.direction=b.config.direction}if(b.direction=="left"){b.setRight("");b.setLeft(0);b.setZIndex(999999)}b.menuLayout=b.getComponent("menuLayout");b.menuLayout.setStyle("background-color:#"+settings.menu.background+";");b.menuLayout.getComponent("editionOptionsSection").getComponent("menuDynamicArticles").hide();b.menuHeader=b.menuLayout.getComponent("menuHeader");b.menuHeaderClose=b.menuHeader.getComponent("menuHeaderClose");b.checkArchive();b.checkDownload();b.checkClipping();b.checkPrint();b.checkBookmarks();b.checkHowToUse();b.checkHelp();b.checkLogout();b.checkTerms();b.checkSearch();b.checkPagesContainer();b.checkArticlesContainer();b.checkMenuHeader();b.checkStoryWindowPrefs();b.sharingContainer=b.menuLayout.getComponent("editionOptionsSection").getComponent("menuSharing");b.sectionsHeaderContainer=b.menuLayout.getComponent("menuSections");b.sectionsContainer=b.menuLayout.getComponent("menuSectionsContainer");b.supplementsHeaderContainer=b.menuLayout.getComponent("menuSupplements");b.supplementsContainer=b.menuLayout.getComponent("menuSupplementsContainer");b.zonesHeaderContainer=b.menuLayout.getComponent("menuZones");b.zonesContainer=b.menuLayout.getComponent("menuZonesContainer");b.quickLinksHeaderContainer=b.menuLayout.getComponent("menuQuickLinks");b.quickLinksContainer=b.menuLayout.getComponent("menuQuickLinksContainer");b.privacyHeader=b.menuLayout.getComponent("menuPrivacy");b.privacyContainer=b.menuLayout.getComponent("menuPrivacyContainer");b.sponsorEdition=b.menuLayout.getComponent("sponsorEdition");b.sponsorSetup();b.loadShare();b.loadSections();b.loadSupplements();b.loadZones();b.loadQuickLinks();b.loadPrivacy();b.setupHeaders();b.fireEvent("disableArticlesContainer");b.fireEvent("hideArticlesContainer")},checkStoryWindowPrefs:function(){var a=this;a.menuStoryPref=a.menuLayout.getComponent("menuInfoContainer").getComponent("menuStoryPref");if(settings.newsday==null){a.menuStoryPref.hide()}},setCloseListener:function(){var a=this;a.menuHeaderClose.element.on("tap",function(){a.fireEvent("close")})},checkMenuHe()}},checkPagesCont()}}},checkArticlesCont)}}}},checkS()}}},setupHeaders:function(){var b=this;b.editionOptionsHeaderContainer=b.menuLayout.getComponent("menuEditionOptions");var c=language.menu.editionOptions.toUpperCase();b.editionOptionsHeaderContainer.setHtml(c);b.editionOptionsHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.editionOptionsHeaderContainer.element.on({tap:function(){b.headerTap(b.menuLayout.getComponent("editionOptionsSection"),b.editionOptionsHeaderContainer)},scope:b});if(!b.menuLayout.getComponent("editionOptionsSection").config.minimized){b.calculateSectionHeight(b.menuLayout.getComponent("editionOptionsSection"))}b.sectionsHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.sectionsHeaderContainer.element.on({tap:function(){b.headerTap(b.sectionsContainer,b.sectionsHeaderContainer)},scope:b});b.supplementsHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.supplementsHeaderContainer.element.on({tap:function(){b.headerTap(b.supplementsContainer,b.supplementsHeaderContainer)},scope:b});b.zonesHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.zonesHeaderContainer.element.on({tap:function(){b.headerTap(b.zonesContainer,b.zonesHeaderContainer)},scope:b});b.quickLinksHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.quickLinksHeaderContainer.element.on({tap:function(){b.headerTap(b.quickLinksContainer,b.quickLinksHeaderContainer)},scope:b});b.privacyHeader.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.privacyHeader.element.on({tap:function(){b.headerTap(b.privacyContainer,b.privacyHeader)},scope:b});if(!b.privacyContainer.config.minimized){b.privacyHeader.getComponent("toggleSection").element.dom.style.backgroundImage="url('resources/images/reader icons/minimise-menu-option.png')";b.calculateSectionHeight(b.privacyContainer)}b.menuInfoHeaderContainer=b.menuLayout.getComponent("menuInfo");var a=language.menu.info.toUpperCase();b.menuInfoHeaderContainer.setHtml(a);b.menuInfoHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.menuInfoHeaderContainer.element.on({tap:function(){b.headerTap(b.menuLayout.getComponent("menuInfoContainer"),b.menuLayout.getComponent("menuInfo"))},scope:b});b.menuUserHeaderContainer=b.menuLayout.getComponent("menuUserOp");b.menuUserHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.menuUserHeaderContainer.element.on({tap:function(){b.headerTap(b.menuLayout.getComponent("menuUserContainer"),b.menuLayout.getComponent("menuUserOp"))},scope:b});if(settings.newsday!=null){if(settings.newsday.useFontAwesome=="true"){if(b.editionOptionsHeaderContainer!=null){b.editionOptionsHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.editionOptionsHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-minus pointerCursor" aria-hidden="true"></i>')}if(b.sectionsHeaderContainer!=null){b.sectionsHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.sectionsHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}if(b.supplementsHeaderContainer!=null){b.supplementsHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.supplementsHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}if(b.zonesHeaderContainer!=null){b.zonesHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.zonesHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}if(b.quickLinksHeaderContainer!=null){b.quickLinksHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.quickLinksHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}if(b.menuInfoHeaderContainer!=null){b.menuInfoHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.menuInfoHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}if(b.menuUserHeaderContainer!=null){b.menuUserHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.menuUserHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}}}},calculateSectionHeight:function(d){var b=this;for(var a=0;a<d.items.items.length;a++){var c=d.items.items[a];if(!c.getHidden()){height+=parseFloat($(c.element.dom).height())}}d.element.dom.style.maxHeight=height+"px"},getPrefix:function(){var a=window.getComputedStyle(document.documentElement,"");pre=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||(a.OLink===""&&["","o"]))[1];return{lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}},headerTap:function(f,g){var d=this;if(f.config.minimized){var b=0;f.setDefaults({padding:"15px 0px 15px 0px"});for(var c=0;c<f.items.items.length;c++){var e=f.items.items[c];if(!e.getHidden()){console.log(parseFloat($(e.element.dom).height()));b+=parseFloat($(e.element.dom).height())}}f.setStyle({webkitTransition:"all 0.4s ease",mozTransition:"all 0.4s ease",transition:"all 0.4s ease"});f.element.dom.style.maxHeight=b+"px";setTimeout(function(){var h=d.menuLayout.getScrollable().getScroller();var k=g.element.dom;var j=h.maxPosition.y,l=(k.offsetTop>j)?j:k.offsetTop;h.scrollTo(0,l,true)},420);var a=true;if(settings.newsday!=null){if(settings.newsday.useFontAwesome=="true"){a=false;g.getComponent("toggleSection").setHtml('<i class="fa fa-minus pointerCursor" aria-hidden="true"></i>')}}if(a){g.getComponent("toggleSection").element.dom.style.backgroundImage="url('resources/images/reader icons/minimise-menu-option.png')"}f.config.minimized=false}else{f.setDefaults({padding:"0px 0px 0px 0px"});f.setStyle({webkitTransition:"all 0.4s ease",mozTransition:"all 0.4s ease",transition:"all 0.4s ease"});f.setStyle({maxHeight:"0px"});var a=true;if(settings.newsday!=null){if(settings.newsday.useFontAwesome=="true"){a=false;g.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}}if(a){g.getComponent("toggleSection").element.dom.style.backgroundImage="url('resources/images/reader icons/maximise-menu-option.png')"}f.config.minimized=true}},checkPages:function(){var b=this;var a=b.menuLayout.getComponent("editionOptionsSection").getComponent("menuPages");if(settings.menu.hidePages!=null){if(settings.menu.hidePages){a.hide()}}else{if(settings.menu.pagesText!=null){}}},checkArchive:function(){var d=this;var b=d.menuLayout.getComponent("editionOptionsSection").getComponent("menuArchive");if(settings.menu.hideArchive!=null){if(settings.menu.hideArchive){b.hide()}}else{if(settings.menu.archiveText!=null){var a=Ext.getStore("ArchiveStore");var c=[];if(a.data.items[0]!=null){if(a.data.items[0].raw.editions!=null){c=a.data.items[0].raw.editions.edition;if(c.length==0){b.hide()}else{if(Object.prototype.toString.call(c)==="[object Object]"){if(c["@name"]==editionName){}}}}}}}},checkDownload:function(){var b=this;var a=b.menuLayout.getComponent("editionOptionsSection").getComponent("menuDownload");if(settings.menu.hideDownload!=null){if(settings.menu.hideDownload){a.hide()}}else{if(settings.menu.downloadText!=null){}}},checkClipping:function(){var a=this;var b=a.menuLayout.getComponent("editionOptionsSection").getComponent("menuCreateClipping");if(settings.menu.hideClipping!=null){b.hide()}else{}},checkArt()}}},checkPrint:function(){var b=this;var a=b.menuLayout.getComponent("editionOptionsSection").getComponent("menuPrint");if(!Ext.os.is.Desktop){a.hide()}else{if(settings.menu.hidePrint!=null){if(settings.menu.hidePrint){a.hide()}}else{if(settings.menu.printText!=null){}}}},checkBookmarks:function(){var b=this;var a=b.menuLayout.getComponent("editionOptionsSection").getComponent("menuBookmarks");if(settings.bookmarks==null){a.hide()}else{if(settings.menu.bookmarkText!=null){}}},checkHowToUse:function(){var b=this;var a=b.menuLayout.getComponent("menuInfoContainer").getComponent("menuHowToUse");if(settings.menu.hideHowToUse!=null){if(settings.menu.hideHowToUse){a.hide()}}else{if(settings.menu.howToUseText!=null){}}},checkHelp:function(){var b=this;var a=b.menuLayout.getComponent("menuInfoContainer").getComponent("menuHelp")},loadShare:function(){var a=this;a.fireEvent("loadShare",a)},loadSections:function(){var a=this;a.fireEvent("loadSections",a,a.sectionsContainer,a.sectionsHeaderContainer)},loadSupplements:function(){var a=this;a.fireEvent("loadSupplements",a,a.supplementsContainer,a.supplementsHeaderContainer)},loadZones:function(){var a=this;a.fireEvent("loadZones",a,a.zonesContainer,a.zonesHeaderContainer)},loadQuickLinks:function(){var a=this;a.fireEvent("loadQuickLinks",a,a.quickLinksContainer,a.quickLinksHeaderContainer)},loadPrivacy:function(){var a=this;a.fireEvent("loadPrivacy",a,a.privacyContainer,a.privacyHeader)},checkWhatsNewBanner:function(){var b=this;var a=b.whatsNewContainer.element.down(".bannerIcon").dom;if(localStorage.getItem("versionwhatsnew"+version.replace(/g./g,"_"))!=null){a.style.display="none"}},sponsorSetup:function(){var f=this;if(settings.menu.sponsor!=null){var d=320;var e=settings.menu.sponsor;if(e.size!=null){try{d=e.size.split(",")[0]}catch(c){console.error("[ReaderMenu]:\n",c)}}if(e.position!=null){switch(e.position.toLowerCase()){case"sections":var a=f.sponsorEdition;var b=f.findItemIndex(f.sectionsContainer)+1;f.menuLayout.insert(b,a)}}f.setWidth(parseInt(d))}else{f.sponsorEdition.hide()}},findItemIndex:function(e){var b=-1;var a=this.menuLayout.getItems().items;for(var d=0;d<a.length;d++){var c=a[d];if(c.getId()==e.getId()){b=d;break}}return b},checkLogout:function(){var a=this;if(loggedIn.toLowerCase()!="true"){a.menuLayout.getComponent("menuUserContainer").hide();a.menuLayout.getComponent("menuUserOp").hide()}},hide:function(){var a=this;a.fireEvent("enableArticlesContainer");InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments)},checkTerms:function(){var a=this;a.menuTerms=a.menuLayout.getComponent("menuInfoContainer").getComponent("menuTerms");if(settings.menu.terms==null){a.menuTerms.hide()}}},0,["readermenu"],["component","container","panel","overlay","readermenu"],{component:true,container:true,panel:true,overlay:true,readermenu:true},["widget.readermenu"],0,[InfinityMobile.view.tablet,"ReaderMenu"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderMenu",InfinityMobile.view.Overlay,{config:{width:"100%",layout:"vbox",style:"background-color:#1e1e1e;padding:0; border-radius:0; height:100%",right:0,top:0,height:"100%",items:[{itemId:"menuLayout",cls:"mainMenu",style:"background-color:#1e1e1e;",layout:"vbox",height:"100%",defaults:{margin:15},scrollable:{direction:"vertical",directionLock:true},items:[{itemId:"menuHeader",html:"Menu",margin:0,height:40,style:"background-color:#2c2f32; color:#ffffff",padding:"10 15 10 15",items:[{itemId:"menuHeaderClose",right:0,top:0,height:40,width:40,padding:10,html:"<img src='../assets/Menu/close-btn-white.png' style='width:20px' />"}]},{id:"menuEditionOptions",cls:"menuSectionHeader menuEditionOptions",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray;",margin:"0 0 0 0",padding:"10 15 10 15",text:"EDITION OPTIONS",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/minimise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"editionOptionsSection",cls:"menuSectionContent menuEditionOptions",style:"overflow:hidden;",margin:"0 0 0 0",layout:"vbox",defaults:{padding:15},minimized:false,items:[{id:"menuPages",cls:"menuItem menuPages",clickType:"id",xtype:"readermenuitem",text:"Pages"},{id:"menuArticles",cls:"menuItem menuArticles",clickType:"id",xtype:"readermenuitem",text:"Articles"},{id:"menuArchive",cls:"menuItem menuArchive",clickType:"id",xtype:"readermenuitem",text:"Archive"},{id:"menuDownload",cls:"menuItem menuDownload",clickType:"id",xtype:"readermenuitem",text:"Download"},{id:"menuSearch",cls:"menuItem menuSearch",clickType:"id",xtype:"readermenuitem",text:"Search"},{id:"menuBookmarks",cls:"menuItem menuBookmarks",clickType:"id",xtype:"readermenuitem",text:"Bookmarks"},{id:"menuCreateClipping",cls:"menuItem menuCreateClipping",clickType:"id",xtype:"readermenuitem",text:"Create Clipping"},{id:"menuTTS",cls:"menuItem menuSharing",xtype:"readermenutts",layout:"vbox"},{id:"menuSharing",cls:"menuItem menuSharing",margin:0,xtype:"readermenushare"}]},{id:"sponsorEdition",style:"background-color:rgb(80, 80, 80);font-size:14px;color:#cccccc;border-bottom:0.5px solid gray;cursor:pointer",margin:0,padding:"10 15 10 15",height:40,width:"100%",html:"<img style='height:20px;width:auto;' src='http://humanrobotinteraction.org/2015/wp-content/uploads/2015/01/Honda-logo.png' />",url:"http://www.honda.co.uk/",items:[{html:"SPONSORED",style:"font-size:10px;",top:5,right:5}]},{id:"menuSections",cls:"menuSectionHeader menuSections",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray;",margin:"0 0 0 0",padding:"10 15 10 15",text:"SECTIONS",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuSectionsContainer",cls:"menuSectionContent menuSections",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true},{id:"menuSupplements",cls:"menuSectionHeader menuSupplements",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray;",margin:"0 0 0 0",padding:"10 15 10 15",text:"SUPPLEMENTS",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuSupplementsContainer",cls:"menuSectionContent menuSupplements",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true},{id:"menuZones",cls:"menuSectionHeader menuZones",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray",margin:"0 0 0 0",padding:"10 15 10 15",text:"ZONES",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuZonesContainer",cls:"menuSectionContent menuZones",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true},{id:"menuQuickLinks",cls:"menuSectionHeader menuQuickLinks",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray;",margin:"0 0 0 0",padding:"10 15 10 15",text:"QUICK LINKS",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuQuickLinksContainer",cls:"menuSectionContent menuQuickLinks",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true},{id:"menuInfo",cls:"menuSectionHeader menuInfo",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray;",margin:"0 0 0 0",padding:"10 15 10 15",text:"INFO",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuInfoContainer",cls:"menuSectionContent menuInfo",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true,items:[{id:"menuHowToUse",xtype:"readermenuitem",cls:"menuItem menuHowToUse",text:"How to use"},{id:"menuHelp",xtype:"readermenuitem",cls:"menuItem menuHelp",text:"Contact Us"},{id:"menuTerms",xtype:"readermenuitem",cls:"menuItem menuTerms",text:"Terms and Conditions"},{id:"menuStoryPref",cls:"menuItem menuStoryPref",clickType:"id",xtype:"readermenuitem",text:"Story Window Preferences"}]},{id:"menuUserOp",cls:"menuSectionHeader menuUserOp",xtype:"readermenuitem",margin:0,style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray",padding:"10 15 10 15",text:"USER OPTIONS",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuUserContainer",cls:"menuSectionContent menuUserOp",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;max-height:0px;",minimized:true,items:[{id:"menuAccount",xtype:"readermenuitem",text:"My Account"},{id:"menuUser",xtype:"readermenuitem",text:"Logout"}]},{id:"sponsorInfo",style:"background-color:rgb(80, 80, 80);font-size:14px;color:#cccccc;border-bottom:0.5px solid gray;cursor:pointer ",padding:"10 15 10 15",margin:0,height:40,width:"100%",html:"<img style='height:20px;width:auto;' src='http://humanrobotinteraction.org/2015/wp-content/uploads/2015/01/Honda-logo.png' />",url:"http://www.honda.co.uk/",items:[{html:"SPONSORED",style:"font-size:10px;",top:5,right:5}]}]}]},initialize:function(){var b=this;b.menuLayout=b.getComponent("menuLayout");b.menuLayout.setStyle("background-color:#"+settings.menu.background+";");var c=b.menuLayout.getComponent("menuHeader");b.menuHeaderClose=c.getComponent("menuHeaderClose");var a=Ext.getStore("SettingStore");b.setCloseListener();b.checkPages();b.checkArchive();b.checkDownload();b.checkClipping();b.checkArticles();b.checkBookmarks();b.checkHowToUse();b.checkHelp();b.checkLogout();b.checkTerms();b.checkSearch();b.checkStoryWindowPrefs();b.sharingContainer=b.menuLayout.getComponent("editionOptionsSection").getComponent("menuSharing");b.sectionsHeaderContainer=b.menuLayout.getComponent("menuSections");b.sectionsContainer=b.menuLayout.getComponent("menuSectionsContainer");b.supplementsHeaderContainer=b.menuLayout.getComponent("menuSupplements");b.supplementsContainer=b.menuLayout.getComponent("menuSupplementsContainer");b.zonesHeaderContainer=b.menuLayout.getComponent("menuZones");b.zonesContainer=b.menuLayout.getComponent("menuZonesContainer");b.quickLinksHeaderContainer=b.menuLayout.getComponent("menuQuickLinks");b.quickLinksContainer=b.menuLayout.getComponent("menuQuickLinksContainer");b.sponsorEdition=b.menuLayout.getComponent("sponsorEdition");b.sponsorInfo=b.menuLayout.getComponent("sponsorInfo");b.sponsorSetup();b.loadShare();b.loadSections();b.loadSupplements();b.loadQuickLinks();b.loadZones();b.setupHeaders()},checkStoryWindowPrefs:function(){var a=this;a.menuStoryPref=a.menuLayout.getComponent("menuInfoContainer").getComponent("menuStoryPref");if(settings.newsday==null){a.menuStoryPref.hide()}},checkSearch:function(){var a=this;a.searchBtn=a.menuLayout.getComponent("editionOptionsSection").getComponent("menuSearch");if(settings.newsday!=null){if(settings.newsday.menuSearch=="false"){a.searchBtn.hide()}}else{a.searchBtn.hide()}},setCloseListener:function(){var a=this;a.menuHeaderClose.element.on("tap",function(){a.fireEvent("close")})},setupHeaders:function(){var b=this;b.editionOptionsHeaderContainer=b.menuLayout.getComponent("menuEditionOptions");var c=language.menu.editionOptions.toUpperCase();b.editionOptionsHeaderContainer.setHtml(c);b.editionOptionsHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.editionOptionsHeaderContainer.element.onner)},scope:b});if(!b.menuLayout.getComponent("editionOptionsSection").config.minimized){b.calculateSectionHeight(b.menuLayout.getComponent("editionOptionsSection"))}b.sectionsHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.sectionsHeaderContainer.element.on({tap:function(){b.headerTap(b.sectionsContainer,b.sectionsHeaderContainer)},scope:b});b.supplementsHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.supplementsHeaderContainer.element.on({tap:function(){b.headerTap(b.supplementsContainer,b.supplementsHeaderContainer)},scope:b});b.zonesHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.zonesHeaderContainer.element.on({tap:function(){b.headerTap(b.zonesContainer,b.zonesHeaderContainer)},scope:b});b.quickLinksHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.quickLinksHeaderContainer.element.onner)},scope:b});b.menuInfoHeaderContainer=b.menuLayout.getComponent("menuInfo");var a=language.menu.info.toUpperCase();b.menuInfoHeaderContainer.setHtml(a);b.menuInfoHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.menuInfoHeaderContainer.element.on({tap:function(){b.headerTap(b.menuLayout.getComponent("menuInfoContainer"),b.menuLayout.getComponent("menuInfo"))},scope:b});b.menuUserHeaderContainer=b.menuLayout.getComponent("menuUserOp");b.menuUserHeaderContainer.setStyle("background-color:#"+settings.menu.headerBackground+";font-size:14px;color:#cccccc");b.menuUserHeaderContainer.element.onp"))},scope:b});if(settings.newsday!=null){if(settings.newsday.useFontAwesome=="true"){if(b.editionOptionsHeaderContainer!=null){b.editionOptionsHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.editionOptionsHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-minus pointerCursor" aria-hidden="true"></i>')}if(b.sectionsHeaderContainer!=null){b.sectionsHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.sectionsHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}if(b.supplementsHeaderContainer!=null){b.supplementsHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.supplementsHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}if(b.zonesHeaderContainer!=null){b.zonesHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.zonesHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}if(b.quickLinksHeaderContainer!=null){b.quickLinksHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.quickLinksHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}if(b.menuInfoHeaderContainer!=null){b.menuInfoHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.menuInfoHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}if(b.menuUserHeaderContainer!=null){b.menuUserHeaderContainer.getComponent("toggleSection").element.dom.style.background="";b.menuUserHeaderContainer.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}}}},calculateSectionH"px"},getPrefix:function(){var a=window.getComputedStyle(document.documentElement,"");pre=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||(a.OLink===""&&["","o"]))[1];return{lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}},headerTap:function(f,g){var d=this;if(f.config.minimized){var b=0;f.setDefaults({padding:"15px 0px 15px 0px"});for(var c=0;c<f.items.items.length;c++){var e=f.items.items[c];if(!e.getHidden()){console.log(parseFloat($(e.element.dom).height()));b+=parseFloat($(e.element.dom).height())}}f.setStyle({webkitTransition:"all 0.4s ease",mozTransition:"all 0.4s ease",transition:"all 0.4s ease"});f.element.dom.style.maxHeight=b+"px";setTirue)},420);var a=true;if(settings.newsday!=null){if(settings.newsday.useFontAwesome=="true"){a=false;g.getComponent("toggleSection").setHtml('<i class="fa fa-minus pointerCursor" aria-hidden="true"></i>')}}if(a){g.getComponent("toggleSection").element.dom.style.backgroundImage="url('resources/images/reader icons/minimise-menu-option.png')"}f.config.minimized=false}else{f.setDefaults({padding:"0px 0px 0px 0px"});f.setStyle({webkitTransition:"all 0.4s ease",mozTransition:"all 0.4s ease",transition:"all 0.4s ease"});f.setStyle({maxHeight:"0px"});var a=true;if(settings.newsday!=null){if(settings.newsday.useFontAwesome=="true"){a=false;g.getComponent("toggleSection").setHtml('<i class="fa fa-plus pointerCursor" aria-hidden="true"></i>')}}if(a){g.getComponent("toggleSection").element.dom.style.backgroundImage="url('resources/images/reader icons/maximise-menu-option.png')"}f.config.minimized=true}},checkPages:function(){var b=this;var a=b.menuLayout.getComponent("editionOptionsSection").getComponent("menuPages");if(settings.menu.hidePages!=null){if(settings.menu.hidePages){a.hide()}}else{if(settings.menu.pagesText!=null){}}},checkArchive:function(){var d=this;var b=d.menuLayout.getComponent("editionOptionsSection").getComponent("menuArchive");if(settings.menu.hideArchive!=null){if(settings.menu.hideArchive){b.hide()}}else{if(settings.menu.archiveText!=null){var a=Ext.getStore("ArchiveStore");var c=[];if(a.data.items[0]!=null){if(a.data.items[0].raw.editions!=null){c=a.data.items[0].raw.editions.edition;if(c.length==0){b.hide()}else{if(Object.prototype.toString.call(c)==="[object Object]"){if(c["@name"]==editionName){b.hide()}}}}}}}},checkDownload:function(){var b=this;var a=b.menuLayout.getComponent("editionOptionsSection").getComponent("menuDownload");if(settings.menu.hideDownload!=null){if(settings.menu.hideDownload){a.hide()}}else{if(settings.menu.downloadText!=null){}}},checkClise{}},checkArte{}}},check{}}}},checkBookmarks:function(){var b=this;var a=b.menuLayout.getComponent("editionOptionsSection").getComponent("menuBookmarks");if(settings.bookmarks==null){a.hide()}else{if(settings.menu.bookmarkText!=null){}}},checkHow){}}},checlp")},loadShare:function(){var a=this;a.fireEvent("loadShare",a)},loadSections:function(){var a=this;a.fireEvent("loadSections",a,a.sectionsContainer,a.sectionsHeaderContainer)},loadSupplements:function(){var a=this;a.fireEvent("loadSupplements",a,a.supplementsContainer,a.supplementsHeaderContainer)},loadQuickLinks:function(){var a=this;a.fireEvent("loadQuickLinks",a,a.quickLinksContainer,a.quickLinksHeaderContainer)},loadner)},checkWhatsNewBb){}},sponsor)}}}},checkLogout:function(){var a=this;if(loggedIn.toLowerCase()!="true"){a.menuLayout.getComponent("menuUserContainer").hide();a.menuLayout.getComponent("menuUserOp").hide()}},checke()}}},0,["readermenu"],["component","container","panel","overlay","readermenu"],{component:true,container:true,panel:true,overlay:true,readermenu:true},["widget.readermenu"],0,[InfinityMobile.view.phone,"ReaderMenu"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderMenuSection",InfinityMobile.view.Overlay,{config:{width:250,layout:"vbox",style:"background-color:#1e1e1e;padding:0; border-radius:0; height:calc(100% - 40px)",right:0,top:40,items:[{itemId:"sectionitemscontainer",style:"background-color:#1e1e1e;",layout:"vbox",height:"100%",defaults:{padding:15},items:[{id:"menuSections",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc",margin:"0 0 15 0",padding:"5 15 5 15",text:"SECTIONS"}]}]},initi",a)}},0,["readermenusection"],["component","container","panel","overlay","readermenusection"],{component:true,container:true,panel:true,overlay:true,readermenusection:true},["widget.readermenusection"],0,[InfinityMobile.view.tablet,"ReaderMenuSection"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderMenuSection",InfinityMobile.view.Overlay,{config:{width:"100%",layout:"vbox",style:"background-color:#1e1e1e;padding:0; border-radius:0; height:100%",right:0,top:0,items:[{itemId:"menuHeader",html:"Menu",margin:0,height:40,style:"background-color:#2c2f32; color:#ffffff",padding:"10 15 10 15",items:[{itemId:"menuHeaderClose",right:0,top:0,height:40,width:40,padding:10,html:"<img src='../assets/Menu/close-btn-white.png' style='width:20px' />"}]},{itemId:"sectionitemscontainer",style:"background-color:#1e1e1e;",layout:"vbox",height:"100%",defaults:{padding:15},items:[{id:"menuSections",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc",margin:"0 0 15 0",padding:"5 15 5 15",text:"SECTIONS"}]}]},initi",a)},setCloseListener:function(){var a=this;a.menuHeaderClose.element.on("tap",function(){a.hide()})},backtapped:function(){var a=this;a.fireEvent("back",a)}},0,["readermenusection"],["component","container","panel","overlay","readermenusection"],{component:true,container:true,panel:true,overlay:true,readermenusection:true},["widget.readermenusection"],0,[InfinityMobile.view.phone,"ReaderMenuSection"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArchiveSelector",Ext.Panel,{config:{height:60,padding:"0 10px",layout:{type:"vbox",align:"center"},items:[{itemId:"selectEdition",style:"font-size:11pt;",html:"Select edition:",width:"100%"},{height:10},{itemId:"container",width:"100%",layout:"hbox",items:[{style:"font-size:11pt;",html:"<div class='selectBox'><select id='yearDropDown'></select></div>"},{width:10},{style:"font-size:11pt;",html:"<div class='selectBox'><select id='monthDropDown'></select></div>"},{width:10},{style:"font-size:11pt;",html:"<div class='selectBox'><select id='dayDropDown'></select></div>"},{width:10},{itemId:"change",height:25,cls:"pointerCursor",style:"font-size:11pt;position:relative;",html:'<span style="position:absolute;bottom:0px;text-decoration:underline;">Change</span>'}]}]},initite()},hexToRgb:function(b){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},populateYearDropDown:function(){var c=this;var a=new Date();for(var b=c.earliestDate.getFullYear();b<=a.getFullYear();b++){c.addOption(c.datePickerYear,b,b)}c.datePickerYear.onchange=function(){c.populateMonthDropDown();c.populateDayDropDown()}},populateMonthDropDown:function(){var g=this;var f=g.datePickerMonth.options[g.datePickerMonth.selectedIndex];var b=0;var h=12;var d=new Date();g.datePickerMonth.options.length=0;if(g.datePickerYear.options[g.datePickerYear.selectedIndex].value==d.getFullYear()){h=d.getMonth()+1}if(g.datePickerYear.options[g.datePickerYear.selectedIndex].value==g.earliestDate.getFullYear()){b=g.earliestDate.getMonth()-1}for(var e=b;e<h;e++){var c="Jan";switch(e){case 0:c="Jan";break;case 1:c="Feb";break;case 2:c="Mar";break;case 3:c="Apr";break;case 4:c="May";break;case 5:c="Jun";break;case 6:c="Jul";break;case 7:c="Aug";break;case 8:c="Sep";break;case 9:c="Oct";break;case 10:c="Nov";break;case 11:c="Dec";break}g.addOption(g.datePickerMonth,c,e+1)}g.datePickerMonth.onchange=function(){g.populateDayDropDown()};if(f!=null){for(var a=0;a<g.datePickerMonth.options.length;a++){if(g.datePickerMonth.options[a].value==f.value){g.datePickerMonth.selectedIndex=a;break}}}},populateDayDropDown:function(){var e=this;var b=e.datePickerDay.options[e.datePickerDay.selectedIndex];e.datePickerDay.options.length=0;var c=new Date();var f=32;switch(e.datePickerMonth.options[e.datePickerMonth.selectedIndex].innerHTML){case"Jan":case"Mar":case"May":case"Jul":case"Aug":case"Oct":case"Dec":f=32;break;case"Apr":case"Jun":case"Sep":case"Nov":f=31;break;case"Feb":if(e.datePickerYear.options[e.datePickerYear.selectedIndex].value%4==0){f=30}else{f=29}break}var g=1;if(e.datePickerYear.options[e.datePickerYear.selectedIndex].value==e.earliestDate.getFullYear()&&e.datePickerMonth.options[e.datePickerMonth.selectedIndex].value==e.earliestDate.getMonth()){g=e.earliestDate.getDate()}if(e.datePickerYear.options[e.datePickerYear.selectedIndex].value==c.getFullYear()&&e.datePickerMonth.options[e.datePickerMonth.selectedIndex].value==c.getMonth()+1){f=c.getDate()+1}for(var d=g;d<f;d++){e.addOption(e.datePickerDay,d.toString(),d.toString())}if(b!=null){for(var a=0;a<e.datePickerDay.options.length;a++){if(e.datePickerDay.options[a].value==b.value){e.datePickerDay.selectedIndex=a;break}}}},addOption:function(a,d,c){var b=document.createElement("option");b.text=d;b.value=c;a.add(b)},setTodaysDate:function(){var a=this;a.todaysDate=new Date().yyyymmdd();var b=a.todaysDate.split("-");a.todayDateYear=b[0];a.todayDateMonth=b[1].toString();if(a.todayDateMonth.toString().startsWith("0")){a.todayDateMonth=a.todayDateMonth.replace("0","")}a.todayDateDay=b[2];if(a.todayDateDay.startsWith("0")){a.todayDateDay=a.todayDateDay.replace("0","")}a.datePickerYear.value=a.todayDateYear;a.datePickerMonth.value=a.todayDateMonth;a.datePickerDay.value=a.todayDateDay;a.formatDate()},formatDate:function(a,d,b){var c=this;c.trimDayToMonth();if(b==c.todayDateYear){c.trimMonthToCurrent();if(d==c.todayDateYear){c.trimDayToCurrent()}}},trimMonthToCurrent:function(){var a=this},trimDayToMonth:function(d,b){var c=this;switch(d){case"4":case"6":case"9":case"11":c.trimDays(30);break;case"2":var a=28;if(parseInt(b)%4==0){a=29}c.trimDay(a);break;default:break}},trimDayToCurrent:function(){var a=this;a.trimDay(parseInt(a.todayDateDay))},trimDay:function(a){},changeEdition:function(){var a=this;window.location.href="../get_edition_by_date.aspx?pubid="+publicationguid+"&year="+a.datePickerYear.options[a.datePickerYear.selectedIndex].value+"&month="+a.datePickerMonth.options[a.datePickerMonth.selectedIndex].value+"&day="+a.datePickerDay.options[a.datePickerDay.selectedIndex].value}},0,["archiveselector"],["component","container","panel","archiveselector"],{component:true,container:true,panel:true,archiveselector:true},["widget.archiveselector"],0,[InfinityMobile.view.phone,"ArchiveSelector"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderArchive",InfinityMobile.view.Overlay,{config:{id:"archivecontainer",height:"100%",width:"100%",style:"padding:0px;max-height:700px;max-width:700px;",items:[{id:"archiveToolBar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{id:"archiveToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"archiveBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"archiveSelector",xtype:"archiveselector",style:"background-color:transparent;color:black;"},{itemId:"archiveContainerText",margin:"0 0 20px 0"},{itemId:"archiveMonthContainerHorizontal",layout:"hbox",items:[{html:"<img src='https://media.pagesuite.com/psapps/images/default/LeftArrow_Icon.png' style='width:20px' />"},{itemId:"archiveMonthsContainer",height:30,flex:1,layout:"hbox",margin:"0 15px 0 15px",padding:"0 0 10px 0",monthdirection:"horizontal",scrollable:{direction:"horizontal",directionLock:true},defaults:{width:100,height:20,margin:"0 20px 0 0",padding:0,style:"font-weight:bold",type:"shortDate"},items:[]},{html:"<img src='https://media.pagesuite.com/psapps/images/default/RightArrow_Icon.png' style='width:20px' />"}]},{layout:"hbox",height:560,itemId:"archiveItemsGlobalContainer",items:[{itemId:"archiveMonthsContainer",width:180,height:"100%",monthdirection:"vertical",scrollable:{direction:"vertical",directionLock:true}},{id:"archiveItemsContainer",height:560,flex:1,scrollable:{direction:"vertical",directionLock:true},defaults:{width:145,margin:"0 8 16 7",cls:"archiveitemphone"}}]}]}]},initialize:function(){var g=this;var c=g.getComponent("archiveToolBar");g.archiveToolBarClose=c.getComponent("archiveToolBarClose");c.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});g.title=c.getComponent("title");g.title.setHtml(language.archive.archive);var j=g.getComponent("archiveBodyContainer");g.archiveContainerText=j.getComponent("archiveContainerText");g.archiveContainerText.setHtml(language.archive.archiveContainerText);g.archiveSelector=j.getComponent("archiveSelector");var d=j.getComponent("archiveItemsGlobalContainer");g.archiveItemsContainer=d.getComponent("archiveItemsContainer");var h=j.getComponent("archiveMonthContainerHorizontal");var f=h.getComponent("archiveMonthsContainer");var e=d.getComponent("archiveMonthsContainer");var a=e;if(settings.menu.archiveUsesTabs!=null){if(settings.menu.archiveMonthDirection.toLowerCase()!=null&&settings.menu.archiveMonthDirection.toLowerCase()=="horizontal"){a=f}}if(a==f){e.hide()}else{h.hide()}g.archiveMonthsContainer=a;if(settings.tracking!=null){var b=settings.tracking.trackingType;if(b=="DA"){trackDaPageView("Archive","Digital Edition")}}g.setCloseListener();if(settings.newsday!=null){c.element.dom.style.borderTopLeftRadius="";c.element.dom.style.borderTopRightRadius="";g.setStyle({borderRadius:"0px"});g.element.down("div").dom.style.borderRadius="0px";g.archiveSelector.setStyle({backgroundColor:"transparent"});g.archiveSelector.element.dom.style.color="";g.archiveSelector.setMargin("0 0 10px 0");g.archiveSelector.setPadding(0);g.archiveSelector.element.on("tap",function(){g.archiveSelector.focus()});d.setHeight(520);g.archiveItemsContainer.setHeight(520)}else{g.archiveSelector.hide()}g.fireEvent("initialized",g)},setCloseListener:function(){var b=this;b.archiveToolBarClose.element.on("tap",function(){b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.archiveToolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},close:function(){var a=this;a.fireEvent("close",a)},hideMonthContainer:function(){var a=this;console.log("HIDING MONTH CONTAINER");a.archiveMonthsContainer.hide()},hide:function(){var a=this;a.fireEvent("enableArticlesContainer");InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments)}},0,["readerarchive"],["component","container","panel","overlay","readerarchive"],{component:true,container:true,panel:true,overlay:true,readerarchive:true},["widget.readerarchive"],0,[InfinityMobile.view.tablet,"ReaderArchive"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderArchive",InfinityMobile.view.Overlay,{config:{id:"archivecontainer",width:"100%",height:"100%",style:"padding:0px;",layout:"vbox",items:[{id:"archiveToolBar",height:40,style:"",items:[{itemId:"title",top:10,left:10},{id:"archiveToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"archiveBodyContainer",padding:"20",layout:"vbox",flex:1,style:"font-size:15px",items:[{itemId:"archiveContainerText"},{height:20},{itemId:"archiveMonthContainer",layout:"hbox",items:[{style:"position:absolute; left:5px",html:"<img src='https://media.pagesuite.com/psapps/images/default/LeftArrow_Icon.png' style='width:20px' />"},{style:"position:absolute; right:5px",html:"<img src='https://media.pagesuite.com/psapps/images/default/RightArrow_Icon.png' style='width:20px' />"},{itemId:"archiveMonthsContainer",height:30,flex:1,layout:"hbox",margin:"0 15px 0 15px",padding:"0 0 10px 0",monthdirection:"horizontal",scrollable:{direction:"horizontal",directionLock:true},defaults:{width:90,height:20,margin:"0 20px 0 0",padding:0,style:"font-weight:bold",type:"shortDate"},items:[]}]},{id:"archiveItemsContainer",flex:1,scrollable:{direction:"vertical",directionLock:true},defaults:{cls:"archiveitemphone"}}]}]},initialize:function(){var c=this;var a=c.getComponent("archiveToolBar");c.archiveToolBarClose=a.getComponent("archiveToolBarClose");a.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});c.title=a.getComponent("title");c.title.setHtml(language.archive.archive);var b=c.getComponent("archiveBodyContainer");c.archiveContainerText=b.getComponent("archiveContainerText");c.archiveContainerText.setHtml(language.archive.archiveContainerText);c.archiveItemsContainer=b.getComponent("archiveItemsContainer");c.archiveMonthContainer=b.getComponent("archiveMonthContainer");c.archiveMonthsContainer=c.archiveMonthContainer.getComponent("archiveMonthsContainer");if(settings.tracking!=null){var d=settings.tracking.trackingType;if(d=="DA"){trackDaPageView("Archive","Digital Edition")}}if(settings.newsday!=null){a.element.dom.style.borderTopLeftRadius="";a.element.dom.style.borderTopRightRadius="";c.setStyle({borderRadius:"0px"});c.element.down("div").dom.style.borderRadius="0px";c.archiveSelector=Ext.create("InfinityMobile.view.phone.ArchiveSelector",{});c.archiveSelector.setStyle({backgroundColor:"transparent"});c.archiveSelector.element.dom.style.color="";c.archiveSelector.setMargin("0 0 10px 0");c.archiveSelector.setPadding(0);c.archiveSelector.element.on("tap",function(){c.archiveSelector.focus()});b.insert(0,c.archiveSelector)}else{c.archiveSelector.hide()}c.setCloseListener();c.fireEvent("initialized",c)},setCloseListener:function(){var b=this;b.archiveToolBarClose.element.on("tap",function(){b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.archiveToolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},close:function(){var a=this;a.fireEvent("close",a)},hideMonthContainer:function(){var a=this;console.log("HIDING MONTH CONTAINER");a.archiveMonthContainer.hide()}},0,["readerarchive"],["component","container","panel","overlay","readerarchive"],{component:true,container:true,panel:true,overlay:true,readerarchive:true},["widget.readerarchive"],0,[InfinityMobile.view.phone,"ReaderArchive"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderSearch",InfinityMobile.view.Overlay,{config:{width:"100%",height:"100%",style:"padding:0px;max-height:700px;max-width:700px;",zindex:3,layout:"vbox",searchTerm:"",cls:"searchOverlay",items:[{itemId:"seachToolBar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{id:"searchToolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"searchBar",height:40,padding:5,items:[{id:"searchTerm",xtype:"textfield",height:30,clearIcon:false,style:"color:red; font-size:12px;",width:"100%"},{id:"searchButton",cls:"pointerCursor",html:"<img src='../assets/search/grey-search-ic.png' style='width:20px; height:20px' />",right:10,top:10}]},{itemId:"searchButtonsContainer",layout:{type:"hbox",pack:"center",align:"middle"},height:60,style:"z-index:1",defaults:{height:40,layout:{type:"hbox",align:"middle",pack:"center"}},items:[{itemId:"searchCurrentEdition",cls:"pointerCursor btn",width:150,style:"background-color:#458fbb;color:#ffffff",items:[{itemId:"btnText"}]},{width:25},{itemId:"searchAllEditions",cls:"pointerCursor btn",width:150,style:"background-color:#458fbb;color:#ffffff",items:[{itemId:"btnText"}]},{width:25},{itemId:"showSearchDate",cls:"pointerCursor btn",width:150,style:"background-color:#458fbb;color:#ffffff",items:[{itemId:"btn",width:150,height:40,layout:{type:"hbox",align:"middle",pack:"center"},items:[{itemId:"btnText"}]},{itemId:"searchDateContainer",top:45,cls:"searchDate hidden",layout:"vbox",padding:10,items:[{itemId:"startDateText"},{itemId:"startDate",html:"<input type='date' value='"+new Date().toDateInputValue()+"' />"},{height:20},{itemId:"endDateText"},{itemId:"endDate",html:"<input type='date' value='"+new Date().toDateInputValue()+"' />"},{height:20},{itemId:"searchDate",cls:"pointerCursor btn",width:150,height:40,style:"background-color:#458fbb;color:#ffffff",layout:{type:"hbox",align:"middle",pack:"center"},items:[{itemId:"btnText"}]}]}]}]},{itemId:"searchResults",layout:"vbox",flex:1}]},initialize:function(){var d=this;d.isSearch=true;d.searchTerm=d._searchTerm;d.searchType="e";var c=d.getComponent("seachToolBar");d.searchToolBarClose=c.getComponent("searchToolBarClose");c.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});var g=d.getComponent("searchBar");g.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});d.searchTermBox=g.getComponent("searchTerm");d.searchTermButton=g.getComponent("searchButton");d.searchResultsContainer=d.getComponent("searchResults");var e=d.getComponent("searchButtonsContainer");d.searchCurrentEdition=e.getComponent("searchCurrentEdition");d.searchAllEditions=e.getComponent("searchAllEditions");d.showSearchDate=e.getComponent("showSearchDate");d.dateButton=d.showSearchDate.getComponent("btn");d.showSearchDateButton=d.dateButton.getComponent("btnText");d.searchDateContainer=d.showSearchDate.getComponent("searchDateContainer");var b=d.searchDateContainer.getComponent("startDate");d.startDate=b.element.down("input");var f=d.searchDateContainer.getComponent("endDate");d.endDate=f.element.down("input");b.element.on({tap:function(){var h=this;h.startDate.focus()},scope:d});f.element.on({tap:function(){var h=this;h.endDate.focus()},scope:d});d.searchDate=d.searchDateContainer.getComponent("searchDate");d.title=c.getComponent("title");d.title.setHtml(language.search.search);d.searchTermBox.setPlaceHolder(language.search.enterKeyword);d.searchCurrentEdition.getComponent("btnText").setHtml(language.search.currentEdition);d.searchAllEditions.getComponent("btnText").setHtml(language.search.allEditions);d.dateButton.getComponent("btnText").setHtml(language.search.date);d.searchDateContainer.getComponent("startDateText").setHtml(language.search.startDate);d.searchDateContainer.getComponent("endDateText").setHtml(language.search.endDate);d.searchDate.getComponent("btnText").setHtml(language.search.search);d.setInitialSearchTerm();d.setCloseListener();d.setTextListener();d.setButtonListener();d.setSearchButtons();if(!Ext.os.is.Desktop){d.searchTermBox.element.on("tap",function(){if(navigator.userAgent.toLowerCase().indexOf("silk")!=-1){this.down("input").dom.focus()}if(this.dom.focus!=null){this.dom.focus()}})}else{if(navigator.maxTouchPoints){d.searchTermBox.element.on("tap",function(){var h=$(this.dom).find("input");if(h.length>0){$(h[0]).focus()}})}$(d.searchResultsContainer.element.dom).css("overflow-y","scroll");if(Ext.os.is.Desktop){var a="true";if(settings.menu.searchDisableDateTextFields!=null){a=settings.menu.searchDisableDateTextFields}d.on("painted",function(){var k=$(d.showSearchDate.element.dom).find("input");if(k.length==2){k[0].type="text";k[1].type="text";var h="yy-mm-dd";if(typeof isTribReader!="undefined"){if(isTribReader){h="mm-dd-yy";var j=new Date();k[0].value=(j.getMonth()+1)+"-"+j.getDate()+"-"+j.getFullYear();k[1].value=(j.getMonth()+1)+"-"+j.getDate()+"-"+j.getFullYear()}}$(k[0]).datepicker({dateFormat:h,beforeShow:function(l){if(a=="true"){l.disabled=true}},onClose:function(l){if(a=="true"){if(this!=null){this.disabled=false}}}});$(k[1]).datepicker({dateFormat:h,beforrue}},onse}}}})}})}}if(settings.newsday!=null){c.element.dom.style.borderTopLeftRadius="";c.element.dom.style.borderTopRightRadius="";d.setStyle({borderRadius:"0px"});d.element.down("div").dom.style.borderRadius="0px"}d.search()},handleKeyDown:function(){var a=this;a.keyDownFunction=window.onkeydown;window.onkeydown=null},setInitialSearchTerm:function(){var a=this;a.searchTermBox.setValue(a.searchTerm)},setCloseListener:function(){var b=this;b.searchToolBarClose.element.on("tap",function(){if(currentProfile=="desktop"){window.onkeydown=b.keyDownFunction}b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.searchToolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},setTextListener:function(){var a=this;a.searchTermBox.on("change",function(){a.search()})},setButtonListener:function(){var a=this},setSearchButtons:function(){var a=this;a.searchCurrentEdition.element.on("tap",function(){a.fireEvent("searchCurrentEdition")});a.searchAllEditions.element.on("tap",function(){a.fireEvent("searchAllEditions")});a.dateButton.element.on("tap",function(){a.fireEvent("showSearchDate")});a.searchDate.element.on("tap",function(b){a.fireEvent("searchDate");b.stopPropagation()});a.searchCurrentEdition.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});a.searchAllEditions.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});a.showSearchDate.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});a.searchDate.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"})},close:function(){var a=this;a.fireEvent("close",a)},search:function(){var a=this;a.searchTerm=a.searchTermBox.getValue();if(a.searchTerm!=""){a.fireEvent("search")}},hide:function(){var a=this;if(currentProfile=="desktop"){window.onkeydown=a.keyDownFunction}a.fireEvent("enableArticlesContainer");InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments)},show:function(){var a=this;if(currentProfile=="desktop"){a.handleKeyDown()}InfinityMobile.view.Overlay.prototype.show.apply(this,arguments)},destroy:function(){}},0,["search"],["component","container","panel","overlay","search"],{component:true,container:true,panel:true,overlay:true,search:true},["widget.search"],0,[InfinityMobile.view.tablet,"ReaderSearch"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderSearch",InfinityMobile.view.Overlay,{config:{width:"100%",height:"100%",style:"padding:0px",zindex:3,layout:"vbox",searchTerm:"",items:[{id:"seachToolBar",height:40,style:"",items:[{itemId:"title",top:10,left:10},{id:"searchToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"searchBar",height:40,padding:5,items:[{id:"searchTerm",xtype:"textfield",height:30,clearIcon:false,style:"color:red; font-size:12px;"},{id:"searchButton",html:"<img src='../assets/search/grey-search-ic.png' style='width:20px; height:20px' />",right:10,top:10}]},{itemId:"searchButtonsContainer",layout:{type:"hbox",pack:"center",align:"middle"},height:40,style:"z-index:1",defaults:{height:30,layout:{type:"hbox",align:"middle",pack:"center"}},items:[{itemId:"searchCurrentEdition",cls:"btn",flex:1,style:"font-size:14px",items:[{itemId:"btnText"}]},{width:10},{itemId:"searchAllEditions",cls:"btn",flex:1,style:"font-size:14px",items:[{itemId:"btnText"}]},{width:10},{itemId:"showSearchDate",cls:"btn",flex:1,style:"font-size:14px",items:[{itemId:"btn",width:"100%",height:"100%",layout:{type:"hbox",align:"middle",pack:"center"},items:[{itemId:"btnText"}]},{itemId:"searchDateContainer",top:35,right:0,cls:"searchDate hidden",layout:"vbox",padding:10,items:[{itemId:"startDateText"},{itemId:"startDate",html:"<input type='date' value='"+new Date().toDateInputValue()+"' />"},{height:20},{itemId:"endDateText"},{itemId:"endDate",html:"<input type='date' value='"+new Date().toDateInputValue()+"' />"},{height:20},{itemId:"searchDate",cls:"btn",height:30,layout:{type:"hbox",align:"middle",pack:"center"},items:[{itemId:"btnText"}]}]}]}]},{id:"searchResults",layout:"vbox",flex:1,scrollable:{direction:"vertical",directionLock:true}}]},initialize:function(){var c=this;c.isSearch=true;c.searchTerm=c._searchTerm;c.searchType="e";var b=c.getComponent("seachToolBar");c.searchToolBarClose=b.getComponent("searchToolBarClose");b.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});var f=c.getComponent("searchBar");f.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});c.searchTermBox=f.getComponent("searchTerm");c.searchTermButton=f.getComponent("searchButton");c.searchResultsContainer=c.getComponent("searchResults");var d=c.getComponent("searchButtonsContainer");c.searchCurrentEdition=d.getComponent("searchCurrentEdition");c.searchAllEditions=d.getComponent("searchAllEditions");c.showSearchDate=d.getComponent("showSearchDate");c.dateButton=c.showSearchDate.getComponent("btn");c.showSearchDateButton=c.dateButton.getComponent("btnText");c.searchDateContainer=c.showSearchDate.getComponent("searchDateContainer");var a=c.searchDateContainer.getComponent("startDate");c.startDate=a.element.down("input");var e=c.searchDateContainer.getComponent("endDate");c.endDate=e.element.down("input");a.element.on({tap:function(){var g=this;g.startDate.focus()},scope:c});e.element.on({tap:function(){var g=this;g.endDate.focus()},scope:c});c.searchDate=c.searchDateContainer.getComponent("searchDate");c.title=b.getComponent("title");c.title.setHtml(language.search.search);c.searchTermBox.setPlaceHolder(language.search.enterKeyword);c.searchCurrentEdition.getComponent("btnText").setHtml(language.search.currentEdition);c.searchAllEditions.getComponent("btnText").setHtml(language.search.allEditions);c.dateButton.getComponent("btnText").setHtml(language.search.date);c.searchDateContainer.getComponent("startDateText").setHtml(language.search.startDate);c.searchDateContainer.getComponent("endDateText").setHtml(language.search.endDate);c.searchDate.getComponent("btnText").setHtml(language.search.search);c.setInitialSearchTerm();c.setCloseListener();c.setTextListener();c.setButtonListener();c.setSearchButtons();if(!Ext.os.is.Desktop){c.searchTermBox.element.on("tap",function(){this.focus()})}c.search()},setInitialSearcerm)},setCloseListener:function(){var b=this;b.searchToolBarClose.element.on("tap",function(){b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.searchToolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},setTextLis()})},setButtonListener:function(){var a=this},setSearchButtons:function(){var a=this;a.searchCurrentEdition.element.on("tap",function(){a.fireEvent("searchCurrentEdition")});a.searchAllEditions.element.on("tap",function(){a.fireEvent("searchAllEditions")});a.dateButton.element.on("tap",function(){a.fireEvent("showSearchDate")});a.searchDate.element.on(on()});a.searchCurrentEdition.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});a.searchAllEditions.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});a.showSearchDate.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});a.searchDate.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"})},close:function(){var a=this;a.fireEvent("close",a)},search:function(){var a=this;a.searchTerm=a.searchTermBox.getValue();if(a.searchTerm!=""){a.fireEvent("search")}}},0,["search"],["component","container","panel","overlay","search"],{component:true,container:true,panel:true,overlay:true,search:true},["widget.search"],0,[InfinityMobile.view.phone,"ReaderSearch"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderDownload",InfinityMobile.view.Overlay,{config:{width:"100%",height:"100%",style:"padding:0px;max-height:700px;max-width:700px;",zindex:3,layout:"vbox",searchTerm:"",items:[{itemId:"downloadToolBar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{itemId:"downloadToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"downloadBody",flex:1,padding:25,layout:"vbox",items:[{itemId:"bodyText"},{itemId:"downloadButtonsContainer",layout:{type:"hbox",pack:"center",align:"middle"},height:100,defaults:{height:40,layout:{type:"hbox",align:"middle",pack:"center"}},items:[{itemId:"downloadSelectAll",cls:"btn",width:150,items:[{itemId:"btnText"}]},{width:25},{itemId:"downloadSelectNone",cls:"btn",width:150,items:[{itemId:"btnText"}]},{width:25},{itemId:"download",cls:"btn",width:150,items:[{itemId:"btnText"}]}]},{itemId:"downloadItems",flex:1,scrollable:{direction:"vertical",directionLock:true},defaults:{width:150,height:200,style:"overflow:hidden;",margin:"0 6 10 6"}}]}]},initialize:function(){var c=this;var e=c.getComponent("downloadToolBar");c.downloadToolBarClose=e.getComponent("downloadToolBarClose");e.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});var b=c.getComponent("downloadBody");var a=b.getComponent("downloadButtonsContainer");c.downloadSelectAll=a.getComponent("downloadSelectAll");c.downloadSelectNone=a.getComponent("downloadSelectNone");c.download=a.getComponent("download");c.title=e.getComponent("title");c.title.setHtml(language.download.download);c.bodyContent=b.getComponent("bodyText");c.bodyContent.setHtml(language.download.downloadContainerText);c.downloadSelectAll.getComponent("btnText").setHtml(language.download.downloadSelectAll);c.downloadSelectNone.getComponent("btnText").setHtml(language.download.downloadSelectNone);c.download.getComponent("btnText").setHtml(language.download.download);c.downloadSelectAll.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});c.downloadSelectNone.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});c.download.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});c.setCloseListener();c.setDownloadAllListener();c.setDownloadNoneListener();c.setDownloadListener();if(settings.tracking!=null){var d=settings.tracking.trackingType;if(d=="DA"){trackDaPageView("Downloads","Digital Edition")}}c.downloadItemsContainer=b.getComponent("downloadItems");c.loadPages();if(settings.newsday!=null){e.element.dom.style.borderTopLeftRadius="";e.element.dom.style.borderTopRightRadius="";c.setStyle({borderRadius:"0px"});c.element.down("div").dom.style.borderRadius="0px"}},setCloseListener:function(){var b=this;b.downloadToolBarClose.element.on("tap",function(){b.fireEvent("close",b)});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.downloadToolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},setDownloadAllListener:function(){var a=this;a.downloadSelectAll.element.on("tap",function(){a.fireEvent("selectAll",a)})},setDownloadNoneListener:function(){var a=this;a.downloadSelectNone.element.on("tap",function(){a.fireEvent("selectNone",a)})},setDownloadListener:function(){var a=this;a.download.element.on("tap",function(){a.fireEvent("download",a)})},loadPages:function(){var a=this;a.fireEvent("loadPages",a,a.downloadItemsContainer)},hide:function(){var a=this;a.fireEvent("enableArticlesContainer");InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments)}},0,["download"],["component","container","panel","overlay","download"],{component:true,container:true,panel:true,overlay:true,download:true},["widget.download"],0,[InfinityMobile.view.tablet,"ReaderDownload"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderDownload",InfinityMobile.view.Overlay,{config:{width:"100%",height:"100%",style:"padding:0px",zindex:3,layout:"vbox",searchTerm:"",items:[{itemId:"downloadToolBar",height:40,style:"",items:[{itemId:"title",top:10,left:15},{itemId:"downloadToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"downloadBody",flex:1,padding:15,layout:"vbox",items:[{itemId:"bodyText",style:"font-size:15px"},{itemId:"downloadButtonsContainer",layout:{type:"hbox",pack:"center",align:"middle"},height:70,style:"font-size:15px",defaults:{height:30,layout:{type:"hbox",align:"middle",pack:"center"}},items:[{itemId:"downloadSelectAll",cls:"btn",flex:1,items:[{itemId:"btnText"}]},{width:10},{itemId:"downloadSelectNone",cls:"btn",flex:1,items:[{itemId:"btnText"}]},{width:10},{itemId:"download",cls:"btn",flex:1,items:[{itemId:"btnText"}]}]},{itemId:"downloadItems",flex:1,scrollable:{direction:"vertical",directionLock:true},defaults:{cls:"archiveitemphone"}}]}]},initialize:function(){var c=this;var e=c.getComponent("downloadToolBar");c.downloadToolBarClose=e.getComponent("downloadToolBarClose");e.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});var b=c.getComponent("downloadBody");var a=b.getComponent("downloadButtonsContainer");c.downloadSelectAll=a.getComponent("downloadSelectAll");c.downloadSelectNone=a.getComponent("downloadSelectNone");c.download=a.getComponent("download");c.title=e.getComponent("title");c.title.setHtml(language.download.download);c.bodyContent=b.getComponent("bodyText");c.bodyContent.setHtml(language.download.downloadContainerText);c.downloadSelectAll.getComponent("btnText").setHtml(language.download.downloadSelectAll);c.downloadSelectNone.getComponent("btnText").setHtml(language.download.downloadSelectNone);c.download.getComponent("btnText").setHtml(language.download.download);c.downloadSelectAll.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});c.downloadSelectNone.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});c.download.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});c.setCloseListener();c.setDownloadAllListener();c.setDownloadNoneListener();c.setDownloadListener();if(settings.tracking!=null){var d=settings.tracking.trackingType;if(d=="DA"){trackDaPageView("Downloads","Digital Edition")}}c.downloadItemsContainer=b.getComponent("downloadItems");c.loadPages()},setCloseListener:function(){var b=this;b.downloadToolBarClose.element.on("tap",function(){b.fireEvent("close",b)});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.downloadToolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},setDownloadAllListener:function(){var a=this;a.downloadSelectAll.element.on("tap",function(){a.fireEvent("selectAll",a)})},setDownloadNoneListener:function(){var a=this;a.downloadSelectNone.element.on("tap",function(){a.fireEvent("selectNone",a)})},setDownloadListener:function(){var a=this;a.download.element.on("tap",function(){a.fireEvent("download",a)})},loadPages:function(){var a=this;a.fireEvent("loadPages",a,a.downloadItemsContainer)}},0,["download"],["component","container","panel","overlay","download"],{component:true,container:true,panel:true,overlay:true,download:true},["widget.download"],0,[InfinityMobile.view.phone,"ReaderDownload"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderArticlePopover",Ext.Container,{config:{style:"padding:0px; border-radius:0px; background-color:white;",articleguid:"a3d9d9eb-36b5-46b6-94ee-31978e22dc78",fullscreen:true,layout:"vbox",zIndex:9999999,items:[{itemId:"topBar",height:50,layout:"hbox",padding:"10px 20px 0px 20px",style:"background-color:white;",items:[{itemId:"topBarShare",xtype:"readermenushare",layout:"hbox"},{width:10},{itemId:"textControl",html:'<div class="textSizeHtml5"><img style="cursor:hand;cursor:pointer;width:30px;height:30px;margin-right:15px;" src="../assets/article%20view/Text_Increase_Icon.png" ontouchstart="increaseText()" onclick="increaseText()"><img style="cursor:hand;cursor:pointer;width:30px;height:30px;" src="../assets/article%20view/Text_Decrease_Icon.png" ontouchstart="decreaseText()" onclick="decreaseText()"></div>'},{itemId:"ttsControl",baseCls:"ttsToggle",status:"STOPPED"},{itemId:"closeButton",top:0,right:0,padding:"10px 20px 10px 20px",style:"color:#4291b6",layout:{type:"hbox",align:"center"},items:[{itemId:"closeTxt",cls:"articleClose",style:"font-size:18px",html:"Close"},{width:10},{height:26,html:'<img src="../assets/article view/article-close-btn.png" style="width:26px;" />'}]}]},{itemId:"content",flex:1,cls:"innerhtmlfullheight"},{itemId:"bottomNav",cls:"articleFooter",height:40,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",align:"center"},items:[{itemId:"previousArticleButton",width:150,padding:"10 0 0 20",height:"100%",layout:"hbox",items:[{itemId:"prev",html:"<img style='height:20px' src='../assets/article view/left-article-arrow.png' />"},{html:"Previous Article",padding:"0 0 0 5"}]},{flex:1},{itemId:"articleText",html:"Article X / Y"},{flex:1},{itemId:"nextArticleButton",width:150,padding:"10 20 0 0",height:"100%",layout:{type:"hbox",pack:"end"},items:[{html:"Next Article",padding:"0 5 0 0"},{itemId:"next",html:"<img style='height:20px' src='../assets/article view/right-article-arrow.png' />"}]}]}]},initialize:function(){var b=this;b.highlightMode=false;b.content=b.getComponent("content");var d=b.getComponent("topBar");b.topBarShare=d.getComponent("topBarShare");b.closeButton=d.getComponent("closeButton");b.closeTxt=b.closeButton.getComponent("closeTxt");b.closeTxt.setHtml(language.close);b.setCloseButtonListener();b.ttsToggle=d.getComponent("ttsControl");if(window.SpeechSynthesisUtterance===undefined||settings.tts===undefined){b.ttsToggle.hide()}var c=b.getComponent("bottomNav");b.previousArticleButton=c.getComponent("previousArticleButton");b.nextArticleButton=c.getComponent("nextArticleButton");b.articleText=c.getComponent("articleText");b.topBarTextControls=d.getComponent("textControl");b.setNextButtonListener();b.setPreviousButtonListener();b.setTtsToggleListener();b.on({hide:function(){if(settings.tts!=null&&window.SpeechSynthesisUtterance!=undefined){b.fireEvent("hidden",b.ttsToggle)}},painted:function(){if(settings.tts!=null&&window.SpeechSynthesisUtterance!=undefined){b.fireEvent("opened")}}});if(b.articleReader!=null){b.fireEvent("initializeArticlePopover",b);b.ttsToggle.hide()}else{if(b.config.isLive==null){b.fireEvent("initialized",b)}else{if(b.config.articles==null){b.fireEvent("initializeLivePopover",b);b.ttsToggle.hide()}else{b.fireEvent("initializeLivePopover",b,b.config.articles)}}}b.orientation=b.returnOrientation();if(settings.reader.hideArticleControls!=null){if(settings.reader.hideArticleControls.toLowerCase()=="true"){b.topBarShare.hide();b.topBarTextControls.hide();c.hide()}}if(settings.newsday!=null){b.addCls("popUp");if(settings.newsday.useFontAwesome=="true"){b.prevIcon=b.previousArticleButton.getComponent("prev");if(b.prevIcon!=null){b.prevIcon.setHtml('<i class="fa fa-angle-left fa-lg" style="position:relative;top:-1px;margin:2px;" aria-hidden="true"></i>')}b.nextIcon=b.nextArticleButton.getComponent("next");if(b.nextIcon!=null){b.nextIcon.setHtml('<i class="fa fa-angle-right fa-lg" style="position:relative;top:-1px;margin:2px;" aria-hidden="true"></i>')}}if(settings.newsday.useNewsdayPopover!=null){if(settings.newsday.useNewsdayPopover=="true"){var a=b.hexToRgb(settings.topbar.backgroundColor);if(settings.topbar.backgroundColor!=null){d.setStyle({backgroundColor:"rgba("+a.r+","+a.g+","+a.b+",0.9)"})}b.closeButton.removeAll();var e=Ext.create("Ext.Container",{itemId:"closeTxt",cls:"articleClose",style:"font-size:18px",html:'<img src="resources/images/article-close-btn-white.png" style="width:26px;" />'});b.closeButton.add(e);b.closeButton.setPadding("10px 7px 10px 7px");if(settings.topbar.color!=null){b.closeButton.setStyle({color:"#"+settings.topbar.color})}b.closeButton.setPadding("12px 16px");d.insert(0,b.closeButton);d.setPadding("5px 0px 0px 0px")}}if(settings.newsday.hideShareIcons!=null){if(settings.newsday.hideShareIcons=="true"){b.topBarShare.removeAll();b.topBarTextControls.hide()}}}},hexToRgb:function(b){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},setArticleWidth:function(){var b=this;var a=Math.min(screen.width,screen.height);b.setWidth(a)},setTtsToggleListener:function(){var a=this;if(window.SpeechSynthesisUtterance!=undefined){a.ttsToggle.element.on({tap:function(){switch(a.ttsToggle.status){case"STOPPED":case"FINISHED":a.fireEvent("playArticleTTS",a.ttsToggle,"na");break;case"PAUSED":a.fireEvent("resumeArticleTTS",a.ttsToggle,"na");break;case"PLAYING":a.fireEvent("pauseArticleTTS",a.ttsToggle,"na");break;default:a.fireEvent("stopArticleTTS",a.ttsToggle,"na")}}})}},setCloseButtonListener:function(){var a=this;a.closeButton.element.on({tap:"tap",scope:this})},setPreviousButtonListener:function(){var a=this;a.previousArticleButton.element.on("tap",function(){a.fireEvent("previous")})},setNextButtonListener:function(){var a=this;a.nextArticleButton.element.on("tap",function(){a.fireEvent("next")})},tap:function(){var a=this;if(a.returnOrientation!=a.orientation){a.fireEvent("closeAndReset",a,a.returnOrientation())}else{a.fireEvent("close",a)}},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a}},0,["articleview"],["component","container","articleview"],{component:true,container:true,articleview:true},["widget.articleview"],0,[InfinityMobile.view.tablet,"ReaderArticlePopover"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderArticlePopover",Ext.Container,{config:{fullscreen:true,style:"padding:0px; border-radius:0px; background-color:white;",layout:"vbox",articleguid:"a3d9d9eb-36b5-46b6-94ee-31978e22dc78",items:[{itemId:"topBar",height:48,layout:"hbox",padding:"8px 0 0 0",style:"background-color:white;",items:[{width:10},{itemId:"topBarShare",html:'<div class="textSizeHtml5"><img style="cursor:hand;cursor:pointer;width:28px;height:28px;" src="../assets/article%20view/share-ic-blk.png"></div>'},{width:10},{itemId:"textControl",html:'<div class="textSizeHtml5"><img style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="../assets/article%20view/Text_Increase_Icon.png" ontouchstart="increaseText()" onclick="increaseText()">&nbsp;&nbsp;<img style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="../assets/article%20view/Text_Decrease_Icon.png" ontouchstart="decreaseText()" onclick="decreaseText()"></div>'},{itemId:"ttsControl",baseCls:"ttsToggle",status:"STOPPED"},{itemId:"inappTranslate",baseCls:"inappTranslate",cls:"spain"},{itemId:"closeButton",top:0,right:0,padding:"10px 20px 10px 20px",style:"color:#4291b6",layout:{type:"hbox",align:"center"},items:[{itemId:"closeTxt",cls:"articleClose",style:"font-size:18px",html:"Close"},{width:10},{height:26,html:'<img src="../assets/article view/article-close-btn.png" style="width:26px;" />'}]}]},{itemId:"content",flex:1,cls:"innerhtmlfullheight"},{itemId:"bottomNav",cls:"articleFooter",height:40,style:"background-color:#dfe0df; color: #4591B8; font-size:15px",layout:{type:"hbox",align:"center"},items:[{itemId:"previousArticleButton",flex:1,padding:"0 0 0 5",height:"100%",layout:{type:"hbox",align:"center"},items:[{itemId:"prev",height:20,html:"<img style='height:20px' src='../assets/article view/left-article-arrow.png' />"},{html:"Previous",padding:"0 0 0 5"}]},{width:10},{itemId:"articleText",padding:"0 0 0 0",html:"Article X / Y"},{width:10},{itemId:"nextArticleButton",flex:1,padding:"0 5 0 0",height:"100%",layout:{type:"hbox",pack:"end",align:"center"},items:[{html:"Next",padding:"0 5 0 0"},{itemId:"next",height:20,html:"<img style='height:20px;' src='../assets/article view/right-article-arrow.png' />"}]}]}]},initialize:function(){var b=this;Ext.Container.prototype.initialize.apply(this,arguments);b.highlightMode=false;b.content=b.getComponent("content");console.log(b.mediaController);var d=b.getComponent("topBar");b.topBarShare=d.getComponent("topBarShare");b.topBarFrame=b.topBarShare.element.down("iframe");b.topBarTextControls=d.getComponent("textControl");b.closeButton=d.getComponent("closeButton");b.closeTxt=b.closeButton.getComponent("closeTxt");b.closeTxt.setHtml(language.close);b.setCloseButtonListener();b.ttsToggle=d.getComponent("ttsControl");if(window.SpeechSynthesisUtterance===undefined||settings.tts===undefined){b.ttsToggle.hide()}b.inappTrans=b.getComponent("topBar").getComponent("inappTranslate");b.inappTrans.hide();var c=b.getComponent("bottomNav");b.previousArticleButton=c.getComponent("previousArticleButton");b.nextArticleButton=c.getComponent("nextArticleButton");b.articleText=c.getComponent("articleText");b.setNextButtonListener();b.setPreviousButtonListener();b.topBarShare.element.on({tap:b.share,scope:b});b.setTtsToggleListener();b.on({hide:function(){if(settings.tts!=null&&window.SpeechSynthesisUtterance!=undefined){b.fireEvent("hidden",b.ttsToggle)}},painted:function(){if(settings.tts!=null&&window.SpeechSynthesisUtterance!=undefined){b.fireEvent("opened")}}});if(b.articleReader!=null){b.fireEvent("initializeArticlePopover",b);b.ttsToggle.hide()}else{if(b.config.isLive==null){b.fireEvent("initialized",b)}else{if(b.config.articles==null){b.fireEvent("initializeLivePopover",b);b.ttsToggle.hide()}else{b.fireEvent("initializeLivePopover",b,b.config.articles)}}}b.orientation=b.returnOrientation();if(settings.reader.hideArticleControls!=null){if(settings.reader.hideArticleControls.toLowerCase()=="true"){b.topBarShare.hide();b.topBarTextControls.hide();c.hide()}}if(settings.newsday!=null){b.addCls("popUp");if(settings.newsday.useFontAwesome=="true"){b.prevIcon=b.previousArticleButton.getComponent("prev");if(b.prevIcon!=null){b.prevIcon.setHtml('<i class="fa fa-angle-left fa-lg" style="position:relative;top:-1px;margin:2px;" aria-hidden="true"></i>')}b.nextIcon=b.nextArticleButton.getComponent("next");if(b.nextIcon!=null){b.nextIcon.setHtml('<i class="fa fa-angle-right fa-lg" style="position:relative;top:-1px;margin:2px;" aria-hidden="true"></i>')}}if(settings.newsday.useNewsdayPopover!=null){if(settings.newsday.useNewsdayPopover=="true"){var a=b.hexToRgb(settings.topbar.backgroundColor);if(settings.topbar.backgroundColor!=null){d.setStyle({backgroundColor:"rgba("+a.r+","+a.g+","+a.b+",0.9)"})}b.closeButton.removeAll();var e=Ext.create("Ext.Container",{itemId:"closeTxt",cls:"articleClose",style:"font-size:18px",html:'<img src="resources/images/article-close-btn-white.png" style="width:26px;" />'});b.closeButton.add(e);b.closeButton.setPadding("5px 7px 10px 7px");if(settings.topbar.color!=null){b.closeButton.setStyle({color:"#"+settings.topbar.color})}b.closeButton.setPadding("12px 10px");d.insert(0,b.closeButton)}}if(settings.newsday.hideShareIcons!=null){if(settings.newsday.hideShareIcons=="true"){b.topBarShare.hide();b.topBarTextControls.hide()}}}},hexToRgb:function(b){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},setArticleh(a)},setCloseButtonLisis})},onBeforeUon")},setPreviousButtonListener:function(){var a=this;a.previousArticleButton.element.on("tap",function(){a.fireEvent("previous")})},setNextButtonLis")})},setAppTranslateLis)}})},tap:function(){var a=this;if(a.returnOrientation!=a.orientation){a.fireEvent("closeAndReset",a,a.returnOrientation())}else{a.fireEvent("close",a)}},setShareListener:function(){},share:function(){var a=this;a.fireEvent("sharepopup",a)},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},setTtsToggleListener:function(){var a=this;if(window.SpeechSynthesisUtterance!=undefined){a.ttsToggle.element.on({tap:function(){switch(a.ttsToggle.status){case"STOPPED":case"FINISHED":a.fireEvent("playArticleTTS",a.ttsToggle,"na");break;case"PAUSED":a.fireEvent("resumeArticleTTS",a.ttsToggle,"na");break;case"PLAYING":a.fireEvent("pauseArticleTTS",a.ttsToggle,"na");break;default:a.fireEvent("stopArticleTTS",a.ttsToggle,"na")}}})}}},0,["articleview"],["component","container","articleview"],{component:true,container:true,articleview:true},["widget.articleview"],0,[InfinityMobile.view.phone,"ReaderArticlePopover"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderWhatsNew",InfinityMobile.view.Overlay,{config:{width:700,height:700,style:"padding:0px;",layout:"vbox",items:[{itemId:"toolbar",height:40,style:"background-color:#e6e6e6;border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{top:10,left:10,html:"<b>What's New</b>"},{itemId:"toolbarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"bodyContainer",flex:1,margin:20,layout:"vbox",scrollable:{direction:"vertical",directionLock:true},items:[{html:"<iframe src='whatsnew.html' style='width:100%; border:none; pointer-events: none;' onload='javascript:resizeIframe(this);' />"}]}]},initi",e)},setCloseListener:function(){var a=this;a.toolbarClose.element.on("tap",function(){a.hide()})}},0,["whatsnew"],["component","container","panel","overlay","whatsnew"],{component:true,container:true,panel:true,overlay:true,whatsnew:true},["widget.whatsnew"],0,[InfinityMobile.view.tablet,"ReaderWhatsNew"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderWhatsNew",InfinityMobile.view.Overlay,{config:{width:"100%",height:"100%",style:"padding:0px;",layout:"vbox",items:[{itemId:"toolbar",height:40,style:";border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{top:10,left:10,html:"<b>What's New</b>"},{itemId:"toolbarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"bodyContainer",flex:1,margin:20,layout:"vbox",scrollable:{direction:"vertical",directionLock:true},items:[{html:"<iframe src='whatsnew.html' style='width:100%; border:none; pointer-events: none;' onload='javascript:resizeIframe(this);' />"}]}]},initi",e)},setCloseListener:function(){var a=this;a.toolbarClose.element.on("tap",function(){a.hide()})}},0,["whatsnew"],["component","container","panel","overlay","whatsnew"],{component:true,container:true,panel:true,overlay:true,whatsnew:true},["widget.whatsnew"],0,[InfinityMobile.view.phone,"ReaderWhatsNew"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.Interstitial",Ext.Container,{config:{fullscreen:true,modal:true,hideOnMaskTap:true,centered:true,layout:"vbox",cls:"innerhtmlfullheight",style:"padding:0px",items:[{itemId:"advertContainer",items:[{itemId:"advertisementText",height:30,width:"100%",html:"ADVERTISEMENT",style:"color:white;text-align:center;"},{itemId:"advert",cls:"advert",layout:"fit"}]}]},initialize:function(){var f=this;f.advertContainer=f.getComponent("advertContainer").getComponent("advert");f.advertText=f.getComponent("advertContainer").getComponent("advertisementText");if(currentProfile=="desktop"){f.setUpDesktopCloseBtn()}else{f.setUpTabletCloseBtn()}f.handleKeyDown();f.setUpCloseListener();var e=settings.reader.interstitial;switch(e.type.toLowerCase()){case"dfp":f.setupDfpAdverts(e);break;case"url":if(Ext.os.is.Desktop){var c=settings.reader.interstitial.landscapeUrl;f.advertContainer.setHtml("<iframe width='768' height='576' style='border:none;' scrolling='no' src='"+c+"' />")}else{f.advertContainer.setHtml("<iframe class='interstitialportrait' width='576' height='768' style='border:none;' scrolling='no' src='"+settings.reader.interstitial.portraitUrl+"'> </iframe><iframe class='interstitiallandscape' width='768' height='576' style='border:none;' scrolling='no' src='"+settings.reader.interstitial.landscapeUrl+"' />")}break;case"image":f.advertDivID=f.id+"advert";if(Ext.os.is.Desktop){f.removeCls("interstitialoverlaytablet");f.setCls("x-container x-panel x-sized interstitialoverlaydesktop innerhtmlfullheight x-floating x-fullscreen");f.setWidth(768);f.setHeight(576);var a=576;var d=768;f.advertContainer.setHeight("100%");f.advertContainer.setWidth("100%");f.advertContainer.setHtml("<div id='"+f.advertDivID+"' style='height:"+a+"px;width:"+d+"px;background-image:url("+e.url+");background-repeat:no-repeat;background-size:contain;background-position:center;'></div>");if(e.link!=null){if(e.link.length>0){f.advertContainer.addCls("pointerCursor");f.advertContainer.element.on({tap:function(){window.open(e.link,"_blank")}})}}}else{if(f.returnOrientation()=="portrait"){f.setHeight(768);f.setWidth(576);var a=768;var d=576}else{f.setWidth(768);f.setHeight(576);var a=576;var d=768}f.advertContainer.setHeight("100%");f.advertContainer.setWidth("100%");if(e.portraitUrl!=null){var b=e.portraitUrl}else{var b=e.url}f.advertContainer.setHtml("<div class='interstitialportrait' id='"+f.advertDivID+"' style='height:"+Math.max(d,a)+"px;width:"+Math.min(d,a)+"px;background-image:url("+b+");background-repeat:no-repeat;background-size:contain;background-position:center;'></div><div class='interstitiallandscape' id='"+f.advertDivID+"' style='height:"+Math.min(d,a)+"px;width:"+Math.max(d,a)+"px;background-image:url("+e.url+");background-repeat:no-repeat;background-size:contain;background-position:center;'></div>");if(e.link!=null){if(e.link.length>0){f.advertContainer.addCls("pointerCursor");f.advertContainer.element.on({tap:function(){window.open(e.link,"_blank")}})}}}break}},handleKeyDown:function(){var a=this;a.keyDownFunction=window.onkeydown;if(settings.reader.interstitial.dfpType!="fullscreen"){window.onkeydown=null}},setUpCloseListener:function(){var a=this;if(!(settings.reader.interstitial.type=="dfp"&&settings.reader.interstitial.dfpType=="fullscreen")){a.closeBtn.element.on({tap:"closetap",scope:a})}},setUpTabletCloseBtn:function(){var a=this;a.addCls("interstitialoverlaytablet");a.closeBtn=Ext.create("Ext.Container",{id:"closebtn",top:0,right:-30,width:100,height:100,padding:"10 10 50 50",items:[{html:'<img src="../assets/interstitial/interstitial-close-btn.png" style="width:40px;height:40px" />'}],cls:"backgroundImage"});a.add(a.closeBtn)},setUpDesktopCloseBtn:function(){var a=this;if(!(settings.reader.interstitial.type=="dfp"&&settings.reader.interstitial.dfpType=="fullscreen")){if($(document).height()>=642){a.closeBtn=Ext.create("Ext.Container",{top:0,right:0,layout:"hbox",items:[{html:"Close",style:"color:white;font-size:14px;padding-top:2px;padding-right:2px;"},{html:'<img src="resources/images/reader icons/close-white.png" style="width:16px;height:14px" />'}]})}else{a.closeBtn=Ext.create("Ext.Container",{id:"closebtn",top:-10,right:-10,width:100,height:100,padding:"10 10 50 50",items:[{html:'<img src="../assets/interstitial/interstitial-close-btn.png" style="width:40px;height:40px" />'}],cls:"backgroundImage"})}a.add(a.closeBtn)}else{a.advertText.hide()}},setupDfpAdverts:function(a){var b=this;b.networkCode=a.networkCode;b.adUnit=a.adUnit;b.advertDivID=b.id+"advert";var c="height:100%;";if(settings.reader.interstitial.dfpType=="fullscreen"){c="position:absolute;top:0;left:0;";b.setModal(false)}b.advertContainer.setHtml("<div id='"+b.advertDivID+"' style='"+c+"'></div>");b.advertDiv=b.element.down("#"+b.advertDivID);b.on("painted",b.loadAdvert,b,{delay:10,single:true})},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},onRes:g})},loadAdvert:function(){var a=this;if(settings.reader.interstitial.dfpType=="fullscreen"){googletag.cmd.push(function(){googletag.cmd.push(function(){var b=googletag.defineOutOfPageSlot("/"+a.networkCode+"/"+a.adUnit,a.advertDivID);b.addService(googletag.pubads().updateCorrelator());a.setInterstitialTargeting(settings.reader.interstitial.targeting);googletag.pubads().collapseEmptyDivs();googletag.enableServices()});googletag.cmd.push(function(){googletag.display(a.advertDivID)})})}else{googletag.cmd.push(function(){var b=googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,[parseInt("768"),parseInt("1024")],a.advertDivID);b.addService(googletag.pubads());googletag.enableServices()});googletag.cmd.push(function(){googletag.display(a.advertDivID)});a.iframe=$(a.element.dom).find("iframe")[0];if(a.iframe!=null){a.iframe.oent)};Ext.Viewport.on({resize:a.resizeUrlAdvert,scope:a})}}},setInterstitialTargeting:function(a){var g=this;if(a!=null&&a!=""){var h=a.split("|");for(var c in h){var e=h[c];var j=e.split("*");if(j.length==2){var m=j[0];var l=j[1];if(l.indexOf("{{VAR=")>=0){var d=l.replace("{{VAR=","").replace("}}","");var n=d.split(".");var b=window;for(var k in n){var f=n[k];if(b[f]!=null){l=b[f];b=l}else{console.log("Error: "+j[1]+" does not exist");l="";break}}}if(m!=null&&m!=""&&l!=null&&l!=""){googletag.pubads().setTargeting(m,l)}}}}},resizeUrlAent)},getIframeDimensions:function(e,c){var f=this;var d=$(c).width();var a=$(c).height()+30;var g=1;if(a>$(window).height()-20){var h=a;a=$(window).height()-20;g=a/h}if(d*g>$(window).width()-40){var b=d;d=$(window).width()-40;g=d/b}f.setIframeDimensions(e,g)},setIframeDimensions:function(a,c){var b=this;if(Ext.browser.is.Chrome){b.element.dom.style.webkitTransformOrigin="50% "+((30*c))+"px 0px";b.element.dom.style.mozTransformOrigin="50% "+((30*c))+"0px 0px";b.element.dom.style.msTransformOrigin="50% "+((30*c))+"px 0px";b.element.dom.style.transformOrigin="50% "+((30*c))+"px 0px"}b.element.dom.style.webkitTransform="scale3d("+c+", "+c+", 1)";b.element.dom.style.mozTransform="scale3d("+c+", "+c+", 1)";b.element.dom.style.msTransform="scale3d("+c+", "+c+", 1)";b.element.dom.style.transform="scale3d("+c+", "+c+", 1)"},closetap:function(){var a=this;if(Ext.os.is.Desktop){window.onkeydown=a.keyDownFunction}a.fireEvent("closeInterstitial",a);a.hide()},hide:function(){var a=this;if(Ext.os.is.Desktop){window.onkeydown=a.keyDownFunction}Ext.Container.prototype.hide.apply(this,arguments);Ext.Viewport.remove(a,true)}},0,["interstitial"],["component","container","interstitial"],{component:true,container:true,interstitial:true},["widget.interstitial"],0,[InfinityMobile.view.tablet,"Interstitial"],0));(Ext.cmd.derive("InfinityMobile.view.phone.Interstitial",InfinityMobile.view.Overlay,{config:{fullscreen:true,cls:"interstitialoverlayphone",layout:"fit",style:"padding:0px;max-height:100%",items:[{itemId:"advertLand",cls:"advert",layout:"fit"}]},initialize:function(){var e=this;e.advertContainer=e.getComponent("advertLand");e.advertContainerPortrait=e.getComponent("advertPortrait");var f=Ext.create("Ext.Container",{id:"closebtn",top:0,right:0,width:100,height:100,padding:"10 10 50 50",items:[{html:'<img src="../assets/interstitial/interstitial-close-btn.png" style="width:40px;height:40px" />'}],cls:"backgroundImage"});e.add(f);var d=settings.reader.interstitial;if(d.type.toLowerCase()=="url"){e.advertContainer.setHtml("<iframe class='interstitialportrait' width='320' height='480' style='border:none;' scrolling='no' src='"+settings.reader.interstitial.portraitUrl+"'> </iframe><iframe class='interstitiallandscape' width='480' height='320' style='border:none;' scrolling='no' src='"+settings.reader.interstitial.landscapeUrl+"' />")}else{if(d.type.toLowerCase()=="image"){e.advertDivID=e.id+"advert";if(e.returnOrientation()=="portrait"){e.setHeight(480);e.setWidth(320);var a=480;var c=320}else{e.setWidth(480);e.setHeight(320);var a=320;var c=480}e.advertContainer.setHeight("100%");e.advertContainer.setWidth("100%");if(d.portraitUrl!=null){var b=d.portraitUrl}else{var b=d.url}e.advertContainer.setHtml("<div class='interstitialportrait' id='"+e.advertDivID+"' style='height:"+Math.max(c,a)+"px;width:"+Math.min(c,a)+"px;background-image:url("+b+");background-repeat:no-repeat;background-size:contain;background-position:center;'></div><div class='interstitiallandscape' id='"+e.advertDivID+"' style='height:"+Math.min(c,a)+"px;width:"+Math.max(c,a)+"px;background-image:url("+d.url+");background-repeat:no-repeat;background-size:cover;background-position:center;'></div>");if(d.link!=null){if(d.link.length>0){e.advertContainer.addCls("pointerCursor");e.advertContainer.element.onnk")}})}}f.element.on({tap:"closetap",scope:e})}else{e.networkCode=d.networkCode;e.adUnit=d.adUnit;e.advertDivID=e.id+"advert";e.advertContainer.setHtml("<div id='"+e.advertDivID+"' style='height:100%;'></div>");e.advertDiv=e.element.down("#"+e.advertDivID);f.element.on({tap:"closetap",scope:e});e.on("painted",e.loadAdvert,e,{delay:10,single:true})}}Ext.Viewport.on("orientationchange",e.onResizeFn,e)},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},onRes80}}},loadAdvert:function(){var a=this;googletag.cmd.push(function(){var b=googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,[parseInt("320"),parseInt("480")],a.advertDivID);b.addService(googletag.pubads());googletag.enableServices()});googletag.cmd.push(function(){googletag.display(a.advertDivID)})},clode()},hide:function(){var a=this;InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments);Ext.Viewport.remove(a,true)}},0,["interstitial"],["component","container","panel","overlay","interstitial"],{component:true,container:true,panel:true,overlay:true,interstitial:true},["widget.interstitial"],0,[InfinityMobile.view.phone,"Interstitial"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticlePopoverAd",Ext.Panel,{config:{style:"padding:0px",items:[{itemId:"advert",cls:"advert"}]},initin,b)},loadAdvert:function(){var a=this;console.log("Loading Ad 320x50");googletag.cmd.push(function(){var b=googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,[parseInt("320"),parseInt("50")],a.advertDivID);b.addService(googletag.pubads());googletag.enableServices()});googletag.cmd.push(function(){googletag.display(a.advertDivID)})},onRes})}}}},0,["articlePopoverAd"],["component","container","panel","articlePopoverAd"],{component:true,container:true,panel:true,articlePopoverAd:true},["widget.articlePopoverAd"],0,[InfinityMobile.view.phone,"ArticlePopoverAd"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ArticlePopoverInterstitial",Ext.Panel,{config:{style:"padding:0px",items:[{itemId:"advert",cls:"advert"}]},initialize:function(){var b=this;b.destroyed=false;b.advertTimeout=1000;b.loaded=false;b.advertContainer=b.getComponent("advert");var a=settings.newsday.articlePopoverInterstitial;if(a!=null){b.networkCode=a.networkCode;b.adUnit=a.adUnit;b.advertDivID=b.id+"advert";b.advertContainer.setHtml("<div id='"+b.advertDivID+"' class='interstitialAdvertTablet' style='text-align:center;width:100%;height:100%;margin-left:0;margin-right:0;'></div>");b.advertDiv=b.element.down("#"+b.advertDivID);b.advertDiv.dom.style.visibility="hidden";b.on("painted",b.loadAdvert,b,{delay:10,single:true});b.on("resize",b.onResizeFn,b)}},frameTouchStart:function(b){var a=this;a.articleCarousel=a.returnArticleCarousel();a.articleCarousel.frameDragStart(b)},frameTouchMove:function(b){var a=this;a.articleCarousel.frameDrag(b)},frameTouchEnd:function(b){var a=this;a.articleCarousel.frameDragEnd(b)},returnArticleCarousel:function(){var a=this;return a.parent},loadAdvert:function(){var a=this;if(!a.loaded){setTimeout(function(){if(!a.destroyed){googletag.cmd.push(function(){var b=googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,[parseInt("768"),parseInt("1024")],a.advertDivID);b.addService(googletag.pubads());googletag.enableServices()});googletag.cmd.push(function(){googletag.display(a.advertDivID)});a.setTouchEvents();a.onResizeFn(a);a.advertDiv.dom.style.visibility=""}},a.advertTimeout)}a.loaded=true},setTouchE})}}},onRes,b)}},destroy:function(){var a=this;a.destroyed=true;Ext.Panel.prototype.destroy.apply(this,arguments)}},0,["articlePopoverInterstitial"],["component","container","panel","articlePopoverInterstitial"],{component:true,container:true,panel:true,articlePopoverInterstitial:true},["widget.articlePopoverInterstitial"],0,[InfinityMobile.view.tablet,"ArticlePopoverInterstitial"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ArticlePopoverInterstitial",Ext.Panel,{config:{style:"padding:0px",items:[{itemId:"advert",cls:"advert"}]},initialize:function(){var b=this;b.destroyed=false;b.advertTimeout=1000;b.loaded=false;b.advertContainer=b.getComponent("advert");var a=settings.newsday.articlePopoverInterstitial;if(a!=null){b.networkCode=a.networkCode;b.adUnit=a.adUnit;b.advertDivID=b.id+"advert";b.advertContainer.setHtml("<div id='"+b.advertDivID+"' class='interstitialAdvertPhone' style='text-align:center;width:100%;height:100%;'></div>");b.advertDiv=b.element.down("#"+b.advertDivID);b.advertDiv.dom.style.visibility="hidden";b.on("painted",b.loadAdvert,b,{delay:10,single:true});b.on("resize",b.onResizeFn,b)}},loadAdvert:function(){var a=this;if(!a.loaded){setTimeout(function(){if(!a.destroyed){googletag.cmd.push(function(){var b=googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,[parseInt("320"),parseInt("480")],a.advertDivID);b.addService(googletag.pubads());googletag.enableServices()});googletag.cmd.push(function(){googletag.display(a.advertDivID)});a.onResizeFn(a);a.advertDiv.dom.style.visibility=""}},a.advertTimeout)}a.loaded=true},onResizeFn:function(a){var c=this;if(c.advertDiv.down("iframe")!=null){var b=c.advertDiv.down("iframe").dom;b.of)})};c.fireEvent("scaleInterstitial",b,c.advertDiv.dom,c)}},frameToucht(b)},frameTouchMove:function(b){var a=this;a.articleCarousel.frameDrag(b)},frameToud(b)},returnArticleCarrent},destroy:function(){var a=this;a.destroyed=true;Ext.Panel.prototype.destroy.apply(this,arguments)}},0,["articlePopoverInterstitial"],["component","container","panel","articlePopoverInterstitial"],{component:true,container:true,panel:true,articlePopoverInterstitial:true},["widget.articlePopoverInterstitial"],0,[InfinityMobile.view.phone,"ArticlePopoverInterstitial"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderSharePopup",Ext.Container,{config:{fullscreen:true,modal:true,centered:true,height:"100%;",width:"100%;",style:"background-color:white;width:100%;height:100%;",layout:"vbox",items:[{itemId:"titleBar",style:"",html:"<div style='width:100%;padding:5px;'>Share</div>",items:[{itemId:"ToolBarClose",top:5,right:5,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"sharebtns",width:"100%",flex:1}]},initins()},setCloseButtonListener:function(){var b=this;b.toolbarClose.element.on("tap",function(){b.destroy()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.toolbarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},loadShareButtons:function(){var a=this;a.fireEvent("loadShareIcons",a)},setBuak}}},getURL0]}}},handleChange:function(){var a=this;a.setButtons()}},0,["sharepopup"],["component","container","sharepopup"],{component:true,container:true,sharepopup:true},["widget.sharepopup"],0,[InfinityMobile.view.phone,"ReaderSharePopup"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderSharePopupItem",Ext.Container,{config:{margin:20,cls:"sharepopupitem",layout:{type:"vbox",align:"center",pack:"middle"},items:[{itemId:"iconImage",width:40,height:40}]},initik()}},setor})},setIcon:function(){var a=this;a.iconImage.setHtml("<img src='"+a.icon+"' style='width:100%' />")},setArticleLink:function(){var a=this;a.element.on("tap",function(){var b=a.articleLink.replace("{0}",a.url).replace("{1}",a.message);b=b.replace(/&apos;/g,"'");if(b.indexOf("mailto:")!=-1){var c="http://html5.pagesuite.com/infinity/article_share.aspx?guid=";a.fireEvent("emailArticleShare",b,c)}else{window.open(b)}})}},0,["sharepopupitem"],["component","container","sharepopupitem"],{component:true,container:true,sharepopupitem:true},["widget.sharepopupitem"],0,[InfinityMobile.view.phone,"ReaderSharePopupItem"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderBannerAd",Ext.Container,{config:{width:"100%",cls:"reader-banner-ad",height:110,padding:10,style:"transition: height 1s;",layout:{type:"hbox",align:"center",pack:"middle"}},initialize:function(){var a=this;a.canLoadDFPAdvert=false;a.loadDFPAdvertOnPainted=false;a.bannerAd=a.getComponent("bannerAd");a.position=settings.reader.bannerAd.position;a.on("painted",a.setCanLoadDFPAdvert,a,{delay:10,single:true})},setTargng=a},setCanLoadDFPAdvert:function(){var a=this;a.canLoadDFPAdvert=true;if(a.loadDFPAdvertOnPainted){a.loadDFPAdvert()}},loadAdvert:function(a,d){var c=this;if(c.getItems().items.length>0){c.destroyAdvert()}c.add({itemId:"bannerAd",cls:"readerBannerAd"});c.bannerAd=c.getComponent("bannerAd");if(settings.reader.bannerAd!=null){var b=settings.reader.bannerAd.type.toLowerCase();switch(b){case"dfp":default:c.setDFPAdvert();break;case"image":c.setImageAdvert();break;case"url":c.setUrlAdvert(a,d);break}}},destroyAdvert:function(){var a=this;a.removeAll(true,true)},destroyAdvert2:function(){var a=this},refreshAdvert:function(){var a=this},setDFPAdvert:function(){var b=this;b.networkCode=settings.reader.bannerAd.networkCode;b.adUnit=settings.reader.bannerAd.adUnit;b.advertDivID=b.bannerAd.id+"advert";if(settings.reader.bannerAd.canBeClosed!=null&&settings.reader.bannerAd.canBeClosed=="true"){b.setUpToggleableBanner();b.bannerAdHolder.setHtml("<div id='"+b.advertDivID+"' style=''></div>");b.advertDiv=b.bannerAdHolder.element.down("#"+b.advertDivID);b.loadDFPAdvertOnPainted=true}else{b.bannerAd.setHtml("<div id='"+b.advertDivID+"' style=''></div>");b.advertDiv=b.element.down("#"+b.advertDivID)}var a=false;b.advertDiv.dom.style.height="90px";b.advertDiv.dom.onclick=function(c){b.advertDiv.dom.style.transition="0.8s ease all";if(a){b.advertDiv.dom.style.height="90px";a=false}else{b.advertDiv.dom.style.height="315px";a=true}};if(b.setCanLoadDFPAdvert()){b.loadDFPAdvert()}else{b.loadDFPAdvertOnPainted=true}},loadDFPAdvert:function(){var b=this;var a="top-banner";if(b.targeting!=null){a=b.targeting}googletag.cmd.push(function(){b.adslot=googletag.defineSlot("/"+b.networkCode+"/"+b.adUnit,[parseInt("728"),parseInt("90")],b.advertDivID).addService(googletag.pubads()).setTargeting("pos","1");googletag.pubads().setTargeting("ptype",["sf"]);googletag.enableServices();googletag.display(b.advertDivID)})},setImageAdvert:function(){var b=this;var a=b.bannerAd;if(settings.reader.bannerAd.canBeClosed!=null&&settings.reader.bannerAd.canBeClosed=="true"){b.setUpToggleableBanner();a=b.bannerAdHolder}a.setHtml("<img src='"+settings.reader.bannerAd.url+"' />");a.element.on("tap",function(){window.open(settings.reader.bannerAd.link)})},setUrlAdvert:function(a,e){var d=this;var b=settings.reader.bannerAd.url;var f="edid="+editionguid+"&pubid="+publicationguid+"&pnum="+a+"&w=728&h=90&elemid="+encodeURIComponent(d.getId())+(!!e&&e.trim()!=""?"&section="+encodeURIComponent(e):"");if(b.indexOf("?")==-1){b+="?"+f}else{b+="&"+f}if(settings.reader.bannerAd.canBeClosed!=null&&settings.reader.bannerAd.canBeClosed=="true"){d.setUpToggleableBanner();d.bannerAdHolder.setHtml("<iframe width='728' height='95' style='border:none;overflow:hidden' src='"+b+"' />")}else{d.bannerAd.setHtml("<iframe width='728' height='95' style='border:none;overflow:hidden' src='"+b+"' />")}if(settings.reader.bannerAd.isBannerExpandable=="true"){var c=d.element.down("iframe").dom;c.onload=function(){var g=$(d.bannerAdHolder.element.dom).find(".x-innerhtml")[1];if(g!=null){var j=g.children[1];if(j!=null){d.bannerAdHolder.element.dom.style.transition="1s ease all";var h=j.children[3];if(h!=null){h.style.position="relative";h.style.transform="translateY(-22px)"}}}}}},setUpToggleableBanner:function(){var a=this;var b=-30;if(a.position=="top"){b=0}a.bannerAdHolder=Ext.create("Ext.Container",{style:"display:block; position:relative",items:[{id:"bannerCloseBtn",html:'<div style="height:30px;background:rgba(0,0,0,0.8);position:absolute;right:0;top:'+b+'px;cursor:pointer"><img style="max-width: 100%" src="resources/images/btnAdClose.png"></div>'}]});a.add(a.bannerAdHolder);a.closeBtn=a.bannerAdHolder.getComponent("bannerCloseBtn");a.setupCloseButton()},setupCloseBe()}}},0,["readerbannerad"],["component","container","readerbannerad"],{component:true,container:true,readerbannerad:true},["widget.readerbannerad"],0,[InfinityMobile.view.tablet,"ReaderBannerAd"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderBannerAd",Ext.Container,{config:{style:"text-align:center",width:"100%",padding:"5px 0 5px 0",height:60,layout:{type:"hbox",align:"center",pack:"middle"}},initialize:function(){var a=this;a.canLoadDFPAdvert=false;a.loadDFPAdvertOnPainted=false;a.on("painted",a.setCanLoadDFPAdvert,a,{delay:10,single:true})},loadAdvert:function(){var b=this;if(b.getItems().items.length>0){b.destroyAdvert()}b.add({itemId:"bannerAd"});b.bannerAd=b.getComponent("bannerAd");if(settings.reader.bannerAd!=null){var a=settings.reader.bannerAd.type.toLowerCase();switch(a){case"dfp":default:b.setDFPAdvert();break;case"image":b.setImageAdvert();break;case"url":b.setUrlAdvert();break}}},destroyAdvert:function(){var a=this;a.removeAll(true)},setCanLoadDFPAdvert:function(){var a=this;a.canLoadDFPAdvert=true;if(a.loadDFPAdvertOnPainted){a.loadDFPAdvert()}},setDFPAdvert:function(){var b=this;var a=b.getComponent("bannerAd");b.networkCode=settings.reader.bannerAd.networkCode;b.adUnit=settings.reader.bannerAd.adUnit;b.advertDivID=b.bannerAd.id+"advert";a.setHtml("<div id='"+b.advertDivID+"' style='height:50px;'></div>");b.advertDiv=b.element.down("#"+b.advertDivID);if(b.setCanLoadDFPAdvert()){b.loadDFPAdvert()}else{b.loadDFPAdvertOnPainted=true}},loadDFPAD)})},setImageAdvert:function(){var b=this;var a=b.getComponent("bannerAd");a.setHtml("<img src='"+settings.reader.bannerAd.url+"' style='height:50px' />");a.element.on("tap",function(){window.open(settings.reader.bannerAd.link)})},setUrlAdvert:function(){var c=this;var b=c.getComponent("bannerAd");var a=settings.reader.bannerAd.url;b.setHtml("<iframe width='320' height='30' style='border:none;' scrolling='no' src='"+a+"' />")}},0,["readerbannerad"],["component","container","readerbannerad"],{component:true,container:true,readerbannerad:true},["widget.readerbannerad"],0,[InfinityMobile.view.phone,"ReaderBannerAd"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderBookmark",InfinityMobile.view.Overlay,{config:{itemId:"bookmarkcontainer",width:"100%",height:"100%",style:"padding:0px;max-height:700px;max-width:700px;",layout:"vbox",items:[{itemId:"bookmarkToolBar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{itemId:"bookmarkToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"bookmarkBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"bookmarkHelperText"},{itemId:"bookmarkAddContainer",layout:{type:"hbox",align:"stretch",pack:"middle"},height:35,margin:"10px 0",items:[{flex:1,itemId:"textInput",html:"<input class='bookmarkName' type='text' placeholder='Name' style='width:100%; height:35px; padding-left:10px' />"},{width:20},{itemId:"bookmarkAddButton",width:150,cls:"btn",layout:{type:"hbox",align:"middle",pack:"center"},items:[{itemId:"btnText"}]}]},{itemId:"bookmarksContainer",flex:1,scrollable:{direction:"vertical"},defaults:{width:200,margin:10}}]}]},initialize:function(){var c=this;var b=c.getComponent("bookmarkToolBar");b.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});c.closeButton=b.getComponent("bookmarkToolBarClose");c.setCloseButtonListener();var d=c.getComponent("bookmarkBodyContainer");c.helperTextContainer=d.getComponent("bookmarkHelperText");var a=d.getComponent("bookmarkAddContainer");console.log(a);c.addBookmarkTextBox=a.element.down(".bookmarkName").dom;c.addBookmarkButton=a.getComponent("bookmarkAddButton");c.title=b.getComponent("title");c.title.setHtml(language.bookmarks.bookmarks);c.helperTextContainer.setHtml(language.bookmarks.bookmarksContainerText);c.inputPanel=a.getComponent("textInput");c.input=c.inputPanel.element.down(".bookmarkName").dom;$(c.input).attr("placeholder",language.bookmarks.name);c.addBookmarkButton.getComponent("btnText").setHtml(language.bookmarks.add);c.setAddButtonListener();c.bookmarksContainer=d.getComponent("bookmarksContainer");if(!Ext.os.is.Desktop){a.element.down(".bookmarkName").on("tap",function(){this.focus()})}c.addBookmarkButton.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});if(settings.newsday!=null){b.element.dom.style.borderTopLeftRadius="";b.element.dom.style.borderTopRightRadius="";c.setStyle({borderRadius:"0px"});c.element.down("div").dom.style.borderRadius="0px"}c.fireEvent("loadBookmarks",c)},setCloseButtonListener:function(){var b=this;b.closeButton.element.on("tap",function(){b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.closeButton.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},setAddButtonListener:function(){var a=this;console.log(a.addBookmarkButton);a.addBookmarkButton.element.on("tap",function(){a.fireEvent("addBookmark",a)})},close:function(){var a=this;a.fireEvent("close",a)}nts)}},0,["readerbookmark"],["component","container","panel","overlay","readerbookmark"],{component:true,container:true,panel:true,overlay:true,readerbookmark:true},["widget.readerbookmark"],0,[InfinityMobile.view.tablet,"ReaderBookmark"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderBookmark",InfinityMobile.view.Overlay,{config:{id:"bookmarkcontainer",width:"100%",height:"100%",style:"padding:0px;",layout:"vbox",items:[{id:"bookmarkToolBar",height:40,style:"",items:[{itemId:"title",top:10,left:10},{id:"bookmarkToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"bookmarkBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"bookmarkHelperText"},{itemId:"bookmarkAddContainer",layout:{type:"hbox",align:"stretch",pack:"middle"},height:35,margin:"10px 0",items:[{flex:1,itemId:"textInput",html:"<input class='bookmarkName' type='text' placeholder='' style='width:100%; height:35px; padding-left:10px' />"},{width:20},{itemId:"bookmarkAddButton",width:150,cls:"btn",layout:{type:"hbox",align:"middle",pack:"center"},items:[{itemId:"btnText"}]}]},{itemId:"bookmarksContainer",flex:1,scrollable:{direction:"vertical"},defaults:{cls:"bookmarkitemphone",margin:10}}]}]},initialize:function(){var c=this;var b=c.getComponent("bookmarkToolBar");b.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});c.closeButton=b.getComponent("bookmarkToolBarClose");c.setCloseButtonListener();var d=c.getComponent("bookmarkBodyContainer");c.helperTextContainer=d.getComponent("bookmarkHelperText");var a=d.getComponent("bookmarkAddContainer");c.addBookmarkTextBox=a.element.down(".bookmarkName").dom;c.addBookmarkButton=a.getComponent("bookmarkAddButton");c.title=b.getComponent("title");c.title.setHtml(language.bookmarks.bookmarks);c.helperTextContainer.setHtml(language.bookmarks.bookmarksContainerText);c.inputPanel=a.getComponent("textInput");c.input=c.inputPanel.element.down(".bookmarkName").dom;$(c.input).attr("placeholder",language.bookmarks.name);c.addBookmarkButton.getComponent("btnText").setHtml(language.bookmarks.add);c.setAddButtonListener();c.bookmarksContainer=d.getComponent("bookmarksContainer");if(!Ext.os.is.Desktop){a.element.down(".bookmarkName").on(us()})}c.addBookmarkButton.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});c.fireEvent("loadBookmarks",c)},setCloseButtonListener:function(){var b=this;b.closeButton.element.on("tap",function(){b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.closeButton.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},setAddButtonListener:function(){var a=this;a.addBookmarkButton.element.on("tap",function(){a.fireEvent("addBookmark",a)})},close:function(){var a=this;a.fireEvent("close",a)}},0,["readerbookmark"],["component","container","panel","overlay","readerbookmark"],{component:true,container:true,panel:true,overlay:true,readerbookmark:true},["widget.readerbookmark"],0,[InfinityMobile.view.phone,"ReaderBookmark"],0));(Ext.cmd.derive("InfinityMobile.view.phone.readerTerms",Ext.Container,{config:{modal:true,hideOnMaskTap:true,centered:true,width:"100%",height:"100%",style:"background-color:white;padding:0px;",fullscreen:true,items:[{id:"toolBar",height:40,style:"",items:[{itemId:"title",top:10,left:10},{id:"ToolBarClose",top:8,right:8,html:"<img class='pointerCursor' src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"body",width:"100%"}]},initialize:function(){var b=this;b.topbar=b.getComponent("toolBar");b.title=b.topbar.getComponent("title");b.close=b.topbar.getComponent("ToolBarClose");b.bodyContainer=b.getComponent("body");b.topbar.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});b.element.on({painted:function(){if(settings.menu.terms.url!=null){if(settings.menu.terms.url.length>0){$.ajax({url:"../get_terms_of_service.aspx?url="+encodeURIComponent(settings.menu.terms.url),async:false,success:function(d){b.bodyContainer.setHtml(d);b.bodyContainer.setHeight($(b.element.dom).height()-40);b.bodyContainer.setScrollable(true)},error:function(){b.destroy()}})}}},scope:b});)}})};Ext.Viewport.on({orientationchange:c});b.title.setHtml(language.menu.terms);b.close.element.onoy()}});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.close.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}}},0,["readerTerms"],["component","container","readerTerms"],{component:true,container:true,readerTerms:true},["widget.readerTerms"],0,[InfinityMobile.view.phone,"readerTerms"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.SectionListOverlay",InfinityMobile.view.Overlay,{config:{height:"100%",width:"100%",style:"padding:0px;max-height:700px;width:700px;",layout:"vbox",items:[{itemId:"toolBar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{itemId:"toolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"bodyContainer",padding:"20",layout:"vbox",flex:1,items:[{id:"itemsContainer",flex:1,scrollable:{direction:"vertical",directionLock:true},style:"overflow-y:scroll",defaults:{width:145,margin:"0 8 16 7"}}]}]},initialize:function(){var b=this;var a=b.getComponent("toolBar");b.toolBarClose=a.getComponent("toolBarClose");a.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});var c=b.getComponent("bodyContainer");b.itemsContainer=c.getComponent("itemsContainer");b.title=a.getComponent("title");b.title.setHtml(language.sectionList.sectionList);b.setCloseListener();if(settings.newsday!=null){a.element.dom.style.borderTopLeftRadius="";a.element.dom.style.borderTopRightRadius="";b.setStyle({borderRadius:"0px"});b.element.down("div").dom.style.borderRadius="0px"}b.fireEvent("initialized",b,b.itemsContainer)},setCloseListener:function(){var b=this;b.toolBarClose.element.on("tap",function(){b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.toolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},close:function(){var a=this;a.fireEvent("close",a)},hide:function(){var a=this;a.fireEvent("enableArticlesContainer",a);InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments)}},0,["sectionlistoverlay"],["component","container","panel","overlay","sectionlistoverlay"],{component:true,container:true,panel:true,overlay:true,sectionlistoverlay:true},["widget.sectionlistoverlay"],0,[InfinityMobile.view.tablet,"SectionListOverlay"],0));(Ext.cmd.derive("InfinityMobile.view.phone.SectionListOverlay",InfinityMobile.view.Overlay,{config:{height:"100%",width:"100%",style:"padding:0px;",layout:"vbox",items:[{itemId:"toolBar",height:40,style:"",items:[{itemId:"title",top:10,left:10},{itemId:"toolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"bodyContainer",padding:"20",layout:"vbox",flex:1,items:[{id:"itemsContainer",flex:1,scrollable:{direction:"vertical",directionLock:true},style:"overflow-y:scroll",defaults:{width:145,margin:"0 8 16 7"}}]}]},initialize:function(){var b=this;var a=b.getComponent("toolBar");b.toolBarClose=a.getComponent("toolBarClose");a.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});var c=b.getComponent("bodyContainer");b.itemsContainer=c.getComponent("itemsContainer");b.title=a.getComponent("title");b.title.setHtml(language.sectionList.sectionList);b.setCloseListener();b.fireEvent("initialized",b,b.itemsContainer)},setCloseListener:function(){var b=this;b.toolBarClose.element.on("tap",function(){b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.toolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},close:function(){var a=this;a.fireEvent("close",a)}},0,["sectionlistoverlay"],["component","container","panel","overlay","sectionlistoverlay"],{component:true,container:true,panel:true,overlay:true,sectionlistoverlay:true},["widget.sectionlistoverlay"],0,[InfinityMobile.view.phone,"SectionListOverlay"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ZonesOverlay",InfinityMobile.view.Overlay,{config:{width:"100%",height:"100%",style:"padding:0px;max-height:700px;max-width:700px;min-height:412px;",layout:"vbox",items:[{itemId:"toolBar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em; font-weight:bold",items:[{itemId:"title",top:10,left:10},{itemId:"toolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"bodyContainer",padding:"20",layout:"vbox",flex:1,items:[{id:"itemsContainer",flex:1,scrollable:{direction:"vertical",directionLock:true},defaults:{width:150,margin:"0 8 16 7"}}]}]},initialize:function(){var b=this;var a=b.getComponent("toolBar");b.toolBarClose=a.getComponent("toolBarClose");a.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});b.bodyContainer=b.getComponent("bodyContainer");b.itemsContainer=b.bodyContainer.getComponent("itemsContainer");b.title=a.getComponent("title");if(b.isUpper(language.menu.zones)){b.title.setHtml(language.menu.zones[0].toUpperCase()+language.menu.zones.substring(1,language.menu.zones.length).toLowerCase())}else{b.title.setHtml(language.menu.zones)}b.setCloseListener();b.fireEvent("initialized",b,b.itemsContainer)},isUpper:function(d){var b=this;var c=true;for(var a=0;a<d.length;a++){if(d[a]==d[a].toLowerCase()){c=false}}return c},setHeightOfContainer:function(){var g=this;var e=$(g.itemsContainer.element.dom).height();var j=$(g.itemsContainer.element.dom).width();var b=g.itemsContainer.getItems().items;var k=0;var f=0;var a=0;for(var d in b){f+=$(b[d].element.dom).width();if(a<$(b[d].element.dom).height()){a=$(b[d].element.dom).height()}}k=Math.ceil(f/j);g.setHeight((k*a)+100);if(k==1){var c=0;for(var d in b){c+=$(b[d].element.dom).width()}if(c<700){g.setWidth(c+80)}}g.element.dom.style.visibility="visible"},setCloseListener:function(){var b=this;b.toolBarClose.element.on("tap",function(){b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.toolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},close:function(){var a=this;a.fireEvent("close",a)}},0,["zonesoverlay"],["component","container","panel","overlay","zonesoverlay"],{component:true,container:true,panel:true,overlay:true,zonesoverlay:true},["widget.zonesoverlay"],0,[InfinityMobile.view.tablet,"ZonesOverlay"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ZonesOverlay",InfinityMobile.view.Overlay,{config:{width:"100%",height:"100%",style:"padding:0px;",layout:"vbox",items:[{itemId:"toolBar",height:40,style:"",items:[{itemId:"title",top:10,left:10},{itemId:"toolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"bodyContainer",padding:"20",layout:"vbox",flex:1,items:[{id:"itemsContainer",flex:1,scrollable:{direction:"vertical",directionLock:true},defaults:{width:150,margin:"0 8 16 7"}}]}]},initialize:function(){var b=this;var a=b.getComponent("toolBar");b.toolBarClose=a.getComponent("toolBarClose");a.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});b.bodyContainer=b.getComponent("bodyContainer");b.itemsContainer=b.bodyContainer.getComponent("itemsContainer");b.title=a.getComponent("title");if(b.isUpper(language.menu.zones)){b.title.setHtml(language.menu.zones[0].toUpperCase()+language.menu.zones.substring(1,language.menu.zones.length).toLowerCase())}else{b.title.setHtml(language.menu.zones)}b.setCloseListener();b.fireEvent("initialized",b,b.itemsContainer)},isrn c},setHeightOfContainer:function(){var g=this;var e=$(g.itemsContainer.element.dom).height();var j=$(g.itemsContainer.element.dom).width();var b=g.itemsContainer.getItems().items;var k=0;var f=0;var a=0;for(var d in b){f+=$(b[d].element.dom).width();if(a<$(b[d].element.dom).height()){a=$(b[d].element.dom).height()}}k=Math.ceil(f/j);g.setHeight((k*a)+100);if(k==1){var c=0;for(var d in b){c+=$(b[d].element.dom).width()}if(c<700){g.setWidth(c+80)}}g.element.dom.style.visibility="visible"},setCloseListener:function(){var b=this;b.toolBarClose.element.on("tap",function(){b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.toolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},close:function(){var a=this;a.fireEvent("close",a)}},0,["zonesoverlay"],["component","container","panel","overlay","zonesoverlay"],{component:true,container:true,panel:true,overlay:true,zonesoverlay:true},["widget.zonesoverlay"],0,[InfinityMobile.view.phone,"ZonesOverlay"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderArticlePopoverItem",Ext.Container,{config:{mediaObject:"",pageNo:"",page:"",article:null,cls:"loading",style:"background-color:white",layout:"card",items:[{itemId:"content",flex:1,padding:"0 0 10px 0"},{itemId:"mediaHuis",hidden:true,flex:1},{itemId:"contentIframe",layout:"fit",height:"100%"}]},initialize:function(){var c=this;c.painted=false;c.mode="html";c.destroyed=false;c.advertTimeout=1500;c.content=c.getComponent("content");c.contentIframe=c.getComponent("contentIframe");c.setContentStyle();if((c.config.highlightMode!=null&&c.config.highlightMode==true)||(c.config.readAloudMode!=null&&c.config.readAloudMode)){c.mode="frame";c.setActiveItem(c.contentIframe)}c.popoverType="article";if(InfinityMobile.app.getController("MediaController").currentLang){c.lang=InfinityMobile.app.getController("MediaController").currentLang}if(settings.reader.iframePopover!=null&&settings.reader.iframePopover=="true"){c.intializeForIframe()}else{if(c.getArticle()!=null){c.article=c.getArticle();c.removeInlineStyling();if(settings.newsday!=null&&settings.newsday.useNewsdayTemplate!=null&&settings.newsday.useNewsdayTemplate=="true"){var b=true;c.initializeInlineNewsday()}else{var b=false;c.initializeInline()}if((navigator.maxTouchPoints)){c.content.setScrollable({direction:"vertical",directionLock:true})}else{c.element.down(".x-container").dom.style.overflowY="scroll"}}else{var a=InfinityMobile.app.application.getController("MediaController").flippAdvertSetting;if(!!a&&a.enabled){c.addCls("has-flipp")}c.initializeForWeb();if(c.xtype=="readerpuzzlepopoveritem"&&!!a&&a.enabled){c.element.down(".x-inner").dom.style.overflowY="scroll"}else{c.element.down(".x-container").dom.style.overflow="hidden"}}}},getArticleTem}})}},setUpImageConck=e},removeInlineStyling:function(){var j=this;var l=/style=["'][^\"]*["']/g;var e=j.article.body.match(l);if(e!=null){for(var d=0;d<e.length;d++){if(e[d].indexOf("font-size")!=-1){var g=e[d].indexOf("font-size");var f=0;for(var k=g;k<e[d].length;k++){if(e[d][k]==";"){f=k;break}}}var c=e[d].substring(0,g)+e[d].substring(f,e[d].length);j.article.body=j.article.body.replace(e[d],c);e[d]=c;if(e[d].indexOf("line-height")!=-1){var b=e[d].indexOf("line-height");var h=0;for(var k=b;k<e[d].length;k++){if(e[d][k]==";"){h=k;break}}}var a=e[d].substring(0,b)+e[d].substring(h,e[d].length);j.article.body=j.article.body.replace(e[d],a)}}},initializeInlineNewsday:function(){var e=this;var g="<div class='container'><div class='content'><div class='articleContent'><{{LABEL}}><div class='contenthead font35'><{{HEAD}}></div><{{HEADDECK}}><{{IMAGE}}><div style='margin-bottom:15px;min-height:25px;'><{{BYLINE}}><div class='bylinecontainer' ><{{TEXTCONTROLS}}></div></div><hr /><div class='contentbody'><{{REVIEWBOX}}><div style='position:relative;' ><{{MPU}}><{{BODY}}></div><{{NEWSBOX}}></div><{{BANNERAD}}></div></div></div>";if(e.article.label!=null){g=g.replace("<{{LABEL}}>",'<div class="label labeldesktop" >'+e.article.label+"</div>")}else{g=g.replace("<{{LABEL}}>","")}g=g.replace("<{{HEAD}}>",e.article.headline);g=g.replace("<{{HEADDECK}}>",'<div class="contentdeck font25">'+e.article.subHeadline+"</div>");g=e.newsdayByline(g);if(e.article.reviewBox.trim().length>0){var c="";if(e.article.label=="REVIEWS"){c='<p><span class="BOLD">REVIEW</span></p>'}g=g.replace("<{{REVIEWBOX}}>","<div class='reviewbox' >"+c+e.article.reviewBox+"</div>")}else{g=g.replace("<{{REVIEWBOX}}>","")}g=g.replace("<{{BODY}}>",e.article.body);if(e.article.newsBox.trim().length>0){g=g.replace("<{{NEWSBOX}}>","<div class='newsbox' >"+e.article.newsBox+"</div>")}else{g=g.replace("<{{NEWSBOX}}>","")}g=g.replace("<{{TEXTCONTROLS}}>",'<img style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="resources/images/increase-text-size_newsday.png" ontouchstart="increaseTextNewsday()" onclick="increaseTextNewsday()">&nbsp;&nbsp;<img style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="resources/images/decrease-text-size_newsday.png" ontouchstart="decreaseTextNewsday()" onclick="decreaseTextNewsday()"></div>');var a=settings.newsday.articleCubeAd;if(a!=null){if(a.networkCode!=null&&a.adUnit!=null){e.networkCodeMpu=a.networkCode;e.adUnitMpu=a.adUnit;e.advertDivIDMpu=e.id+"mpu";g=g.replace("<{{MPU}}>",'<div id="'+e.advertDivIDMpu+'" class="mpuAdvert" ></div>')}}else{g=g.replace("<{{MPU}}>","")}var f=settings.newsday.articleBannderAd;if(f!=null){if(f.networkCode!=null&&f.adUnit!=null){e.networkCode=f.networkCode;e.adUnit=f.adUnit;e.advertDivID=e.id+"advert";g=g.replace("<{{BANNERAD}}>","<div id='"+e.advertDivID+"' style='width:728px;height:110px;margin:auto;'></div>")}}var d=e.initializeInlineImagesNewsday();g=g.replace("<{{IMAGE}}>",d);e.content.setHtml(g);e.removeSpinner();e.on("painted",function(){e.setImages();e.fireEvent("fillPrintContainer",e)},e,{});e.hasVideo=false;e.hasLink=false;e.hasGallery=false;var b=$(e.element.dom).find(".articleImg")[0];if(b!=null){b.onload=function(){if(e.element!=null){var l=$(e.element.dom).find(".galleryicon")[0];$(l).css("visibility","visible");$(l).click(function(){e.viewGallery()});l.addEventListener("touchstart",function(){e.viewGallery()})}if(e.article.media!=null){if(e.article.media.length>0){for(var j in e.article.media){if(e.article.media[j].type=="OVIDEO"){var k=$(e.element.dom).find(".articlevideoicon")[0];$(k).css("display","inline");e.oVideo=e.article.media[j];if(!e.hasVideo){$(k).click(function(){e.viewOVideo(e.oVideo)});k.addEventListener("touchstart",function(){e.viewOVideo(e.oVideo)});e.hasVideo=true}}if(e.article.media[j].type=="OLINK"){if(e.element!=null){var h=$(e.element.dom).find(".linkicon")[0];$(h).css("display","inline");e.oLink=e.article.media[j].url;if(!e.hasLink){$(h).click(function(){e.openOLink(e.oLink)});h.addEventListener("touchstart",function(){e.openOLink(e.oLink)});e.hasLink=true}}}if(e.article.media[j].type=="OGALLERY"){var h=$(e.element.dom).find(".ogalleryicon")[0];$(h).css("display","inline");e.oGallery=e.article.media[j];if(!e.hasGallery){$(h).click(function(){e.openOGallery(e.oGallery)});h.addEventListener("touchstart",function(){e.openOGallery(e.oGallery)});e.hasGallery=true}}}}}}}setNewsdayText(e.content.element.dom)},newsdayByline:function(c){var d=this;var e="";if(d.article.byline.length>0){e="<div class=\"contentbyline font15\">By <span class='bylinespan'>"+d.article.byline+"</span>";if(d.validateEmail(d.article.reporterEmail)){e=e.replace("<span class='bylinespan'>","<span class='bylinespan pointerCursor' ontouchstart='window.location.href = \"mailto:"+d.article.reporterEmail+"?subject="+encodeURIComponent(d.article.headline)+"\";' onclick='window.location.href = \"mailto:"+d.article.reporterEmail+"?subject="+encodeURIComponent(d.article.headline)+"\";'>")}else{e=e.replace("<span class='bylinespan'>","<span>")}if(d.article.reporters!=null){for(var b in d.article.reporters){var a="";if(b==d.article.reporters.length-1){a+=" and <span class='bylinespan'>"+d.article.reporters[b].name+"<span>"}else{a+=", <span class='bylinespan'>"+d.article.reporters[b].name+"<span>"}if(d.validateEmail(d.article.reporters[b].email)){a=a.replace("<span class='bylinespan'>","<span class='bylinespan pointerCursor' ontouchstart='window.location.href = \"mailto:"+d.article.reporters[b].email+"?subject="+encodeURIComponent(d.article.headline)+"\";' onclick='window.location.href = \"mailto:"+d.article.reporters[b].email+"?subject="+encodeURIComponent(d.article.headline)+"\";'>")}else{a=a.replace("<span class='bylinespan'>","<span>")}e+=a}}e+="</div>"}c=c.replace("<{{BYLINE}}>",e);return c},validateEmail:function(a){var b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)},viewGallery:function(){var a=this;a.fireEvent("galleryClickFromArticle",a,a.article.images,a.article)},viewOVideo:function(c){var b=this;var a=c.url;if(a.indexOf("http://")==-1){a="http://"+a}b.fireEvent("ovideoclicked",b,a)},openOLink:function(a){var b=this;window.open(a);b.fireEvent("trackOLink",b,a,b.article)},openOGallery:function(a){var b=this;b.fireEvent("galleryClick",b,a.url)},loadAdvert:function(){var a=this;setTimeout(function(){if(!a.destroyed){googletag.cmd.push(function(){var b=googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,[parseInt("728"),parseInt("90")],a.advertDivID);b.addService(googletag.pubads());googletag.enableServices()});googletag.cmd.push(function(){googletag.display(a.advertDivID)})}},a.advertTimeout)},loadAdvertMpu:function(){var a=this;if(settings.reader.popupAdvertMpu!=null&&settings.reader.popupAdvertMpu.type=="dfp"){setTimeout(function(){if(!a.destroyed){googletag.cmd.push(function(){a.dfpAdvertMpuSlot=googletag.defineSlot("/"+a.networkCodeMpu+"/"+a.adUnitMpu,[parseInt("300"),parseInt("250")],a.advertDivIDMpu);googletag.pubads().enableSingleRequest();a.dfpAdvertMpuSlot.addService(googletag.pubads());googletag.enableServices()});googletag.cmd.push(function(){googletag.display(a.advertDivIDMpu)})}},a.advertTimeout)}},destoryAdvertMpuSlot:function(){var a=this;if(a.dfpAdvertMpuSlot!=null&&typeof googletag!="undefined"){googletag.destroySlots([a.dfpAdvertMpuSlot])}},initializeInline:function(){var b=this;var d="<div class='container'><div class='content'><div class='articleContent'><div class='contentHead font35'><{{HEAD}}></div><{{HEADDECK}}><{{IMAGE}}><br /><{{BYLINE}}><br /><div class='contentBody font15'><{{BODY}}></div></div></div></div>";d=d.replace("<{{HEAD}}>",b.article.headline);d=d.replace("<{{HEADDECK}}>",'<div class="contentDeck font25">'+b.article.subHeadline+"</div>");d=d.replace("<{{BYLINE}}>",'<div class="contentByline font15">'+b.article.byline+"</div>");d=d.replace("<{{BODY}}>",b.article.body);var a=b.initializeInlineImages();d=d.replace("<{{IMAGE}}>",a);b.content.setHtml(d);b.removeSpinner();b.on("pai",b)},b,{});if(settings.reader.popupAdvert!=null){if(settings.reader.popupAdvert.position!=null){if(settings.reader.popupAdvert.position=="bottom"){switch(currentProfile){case"phone":var c=Ext.create("InfinityMobile.view.phone.ArticlePopoverAd",{});break;case"tablet":var c=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{});break;case"desktop":var c=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{padding:"10px 0 0 0"});break}b.add(c);c.show()}}}b.createShortStory(b.article);b.on("painted",function(){var e=$(b.element.dom).find(".fullscreengalleryicon");if(e!=null&&e.length>0){$(e).click(function(){b.createFullscreenGallery(b.article)});e[0].addEventListener("touchstart",function(){b.createFullscreenGallery(b.article)})}})},createShortStory:function(g){var h="";var f=/<p[^>]*>/g;var b=[];while((match1=f.exec(g.body))!=null){b[b.length]=match1.index}f=/<\/p/g;var e=[];while((match=f.exec(g.body))!=null){e[e.length]=match.index}f=/<p[^>]*>/g;for(var d=0;d<b.length;d++){var h=g.body.substring(b[d],e[d]).replace(f,"");if(h.length>0){g.shortStory=h;break}else{var a=/\n|([^\r\n.!?]+([.!?]+|$))/gim;var c=[];while((match2=a.exec(g.body))!=null){if(c.length<2){c[c.length]=match2.index}else{break}}if(c[1]>0){g.shortStory=g.body.substring(0,c[1])}else{g.shortStory=""}}}if(g.shortStory==null){var a=/\n|([^\r\n.!?]+([.!?]+|$))/gim;var c=[];while((match2=a.exec(g.body))!=null){if(c.length<2){c[c.length]=match2.index}else{break}}if(c[1]>0){g.shortStory=g.body.substring(0,c[1])}else{g.shortStory=""}}},createFullscreenGallery:function(d){var b=this;var a=[];for(image in d.images){a.push({url:d.images[image].url})}if(Ext.os.is.Desktop){var e="InfinityMobile.view.desktop.ImageGallery"}else{var e="InfinityMobile.view.tablet.ImageGallery"}var c=Ext.create(e,{images:a,article:d,dynamicview:false,zIndex:99999999});Ext.Viewport.add(c);c.show()},initializeInlineImagesNewsday:function(){var d=this;var g=d.article.images;var a="";if(g.length>0){var b="<div class=\"contentImage imagecontainerblack\"><div class=\"imageandiconscontainer\"><div class=\"iconscontainer\" ><div class='articlevideoicon pointerCursor'></div><div class='linkicon pointerCursor' ></div><div class='ogalleryicon pointerCursor' ></div><div class='galleryicon pointerCursor' ></div></div><img class='articleImg' src=\"{{imageurl}}\" alt=\"\" /></div>{{imagecaption}}</div>";var c="";var e=g[0];var f="";if(e.credit!=null){if(e.credit.trim().length>0){f=" ("+e.credit+")"}}c+=b.replace("{{imageurl}}",e.url).replace("{{imagecaption}}",'<div class="contentcaption captionlineheight font13">'+e.caption+f+"</div>");a=c}return a},initializeInlineImages:function(){var g=this;var h=g.article.images;var j="";if(h.length>0){var d="<div class=\"contentImages\" style='position:relative;'><div style='position:absolute;top:0px;right:0px;z-index:1;'><div class='fullscreengalleryicon pointerCursor' ></div></div>{{imagescontent}}</div>";var e='<div class="contentImage"><img src="{{imageurl}}" alt="" />{{imagecaption}}</div>';var a="";for(var f=0;f<h.length;f++){var b=h[f];a+=e.replace("{{imageurl}}",b.url).replace("{{imagecaption}}",'<div class="contentCaption font13">'+b.caption+"</div>")}var c='<div class="imageControls"><a href="javascript:void(0)" class="previousImage">PREVIOUS IMAGE<img class="imgPreviousImage" src="https://edition.pagesuite.com/tribune/left-image-arrow.png" alt="" /></a><div class="imageCount">Image</div><a href="javascript:void(0)" class="nextImage">NEXT IMAGE<img class="imgNextImage" src="https://edition.pagesuite.com/tribune/right-image-arrow.png" alt="" /></a></div>';a+=c;j=d.replace("{{imagescontent}}",a)}return j},checkLanguage:function(){var e=this;var a=navigator.language.substring(0,2);try{var d=localStorage.getItem("checkLanguage"+publicationguid)}catch(c){var d=null}if(d==null){if(settings.reader.language!="en"){e.sourceLanguage="en";e.targetLanguage=settings.reader.language;return false}}else{if(d!="false"){var b=d;if(b!=settings.reader.language){e.sourceLanguage=settings.reader.language;e.targetLanguage=b;return false}}else{if(settings.reader.language!="en"){e.sourceLanguage="en";e.targetLanguage=settings.reader.language;return false}}}return true},initializeLanguage:function(){var a=this;a.on("painted",a.getLanguageContent,a,{delay:10,single:true})},getLanguageContent:function(){var a=this},initializeForWeb:function(){var a=this;if(a.getPage()!=null){if(a.getPage().file==a.getPage().guid){a.popoverType="guid"}a.articleguid=a.getPage().file}a.on("painted",a.getContent,a,{delay:10,single:true})},setContentStyle:function(){var a=this;if(currentProfile=="tablet"){a.content.setPadding("0 20px 0 20px")}},getContent:function(){var e=this;var a=e.articleguid;e.painted=true;e.addCls("DS-layout-detail DS-modus-replica DS-is-online miller-loaded");if(typeof isTribReader!="undefined"&&isTribReader&&(e.lang=="es"||e.lang=="en")){var c="&lang="+e.lang}else{var c=""}var f="";if(settings.reader.popupAdvert!=null){if(settings.reader.popupAdvert.position!=null){f+="&aposition="+settings.reader.popupAdvert.position}if(settings.reader.popupAdvert.type!=null){if(settings.reader.popupAdvert.type=="dfp"){f+="&adtype="+settings.reader.popupAdvert.type+"|"+e.id+"advert"}else{f+="&atype="+settings.reader.popupAdvert.type}}}var b="";if(typeof latestLM!="undefined"){b="&lm="+latestLM}var d="../article.aspx?articleguid="+a+"&html5="+currentProfile+f+b;if(e.popoverType=="guid"){e.content.element.dom.style.overflowY="";d="../article.aspx?guid="+a+"&html5="+currentProfile+f+b}$.ajax({crossDomain:true,type:"GET",contentType:"text/html",async:true,url:d,success:function(o){var p=Ext.getStore("SettingStore");if(settings.reader.popupAdvert!=null){var r=settings.reader.popupAdvert;switch(r.type.toLowerCase()){case"dfp":s=e.setupDfpAdvertContent(s);break;case"image":s=e.setupImageAdvertContent(s);break;case"url":s=e.setupUrlAdvertContent(s);break}}var s=o;var l=s.match(/<body[^>]*>([^<]*(?:(?!<\/?body)<[^<]*)*)<\/body\s*>/i);if(l){s=l[1]}e.articleText=s;s+="<script>setText()<\/script>";s=s.replace("<{{navbar}}>","");var q=false;if(settings.reader.popupAdvert!=null){var r=settings.reader.popupAdvert;switch(r.type.toLowerCase()){case"dfp":s=e.setupDfpAdvertContent(s);break;case"image":s=e.setupImageAdvertContent(s);break;case"url":s=e.setupUrlAdvertContent(s);q=true;break}}if(settings.reader.popupAdvertMpu!=null&&settings.reader.popupAdvertMpu.customClass!=null){var v=settings.reader.popupAdvertMpu;switch(v.type.toLowerCase()){case"dfp":s=e.setupDfpAdvertContentMpu(s);break}}var h=e.returnFlippHtml();s+=h;s=s.replace(/http:\/\/digitaledition.courant.com/g,"https://edition.pagesuite.com");e.removeSpinner();e.unmask();e.content.setHtml(s);e.content.setPadding("0px");e.setupFullscreenGallery(s);if(q){var g=e.content.element.down(".container");if(g!=null){g.dom.style.height="auto"}if(Ext.browser.is.IE||navigator.appVersion.indexOf("Edge")!=-1){var j=e.content.element.down(".x-innerhtml");if(j!=null){j.dom.style.overflowY="auto"}}}if(settings.reader.popupAdvert!=null&&settings.reader.popupAdvert.type=="dfp"){e.loadAdvert()}if(settings.reader.popupAdvertMpu!=null){if(settings.reader.popupAdvertMpu.customClass==null){var v=settings.reader.popupAdvertMpu;switch(v.type.toLowerCase()){case"dfp":e.setUpMpuInline();break}}if(e.parent.getActiveItem()==e){e.loadAdvertMpu()}}if(e.mode=="frame"){e.setFrame()}else{if(e.parent.getActiveItem()==e){e.runFlipp()}}e.setImages();if(e.content.element!=null){setText(e.content.element.dom)}e.setStyle({visibility:"inherit"});e.fireEvent("fillPrintContainer",e);if($(e.element.dom).find(".DS-storyimage__link")!=null){if($(e.element.dom).find(".DS-storyimage__link")[0]!=null){var t=$(e.element.dom).find(".DS-storyimage__link")[0];var n=$(t).find("img")[0];var u=t.parentElement;e.imgUrl=$(t).attr("href");t.remove();u.appendChild(n);$(n).addClass("pointerCursor");n.onclick=function(){e.mediaHuisImgClick()}}}if(typeof isTribReader!="undefined"){if(isTribReader){var k=$(e.element.dom).find(".articleContentHtml5");if(k.length>0){$(k[0]).css("padding-right","25px");$(k[0]).css("padding-left","25px")}}}e.content.element.on({scope:e.content,delegate:"a",tap:function(m){if(typeof m.target=="string"){if(!Ext.os.is.Desktop){window.location.href=m.target}mainPanel.fireEvent("trackArticleLinkClick",{url:m.target,pageNum:e.config.page.page,articleNumber:e.config.pageNo})}else{mainPanel.fireEvent("trackArticleLinkClick",{url:m.target.href,pageNum:e.config.page.page,articleNumber:e.config.pageNo})}}})}})},returnFliprn b},runFlipp:function(){var a=InfinityMobile.app.application.getController("MediaController").flippAdvertSetting;if(!!a&&a.enabled&&!this.hasSetupFlippOnArticle&&!!document.querySelector("#flipp-div-"+this.id)){var c=this;var b=undefined;window.flippxp=window.flippxp||{run:[]};console.log("[FLIPP] Registering flipp-div-"+c.id+" with flippxp");window.flippxp.runr"})});this.hasSetupFlippOnArticle=true}},setupFullscreenGallery:function(e){var g=this;if(settings.articlepopover!=null&&settings.articlepopover.enablePopoverImageGallery=="true"){var d=$(g.element.dom).find(".contentImages")[0];if(d!=null){var j=document.createElement("div");j.className="fullscreengalleryicon pointerCursor";d.style.position="relative";d.appendChild(j);var h=g.getArticleImages(d);var a="";var b=$(g.element.dom).find(".contentHead")[0];if(b!=null){a=b.innerText}var f={headline:a,images:h};$(j).click(function(){g.createFullscreenGallery(f)});if(navigator.maxTouchPoints!=null){var c;j.addEventListener("touchstamp});j.addEventListener("touchend",function(k){if(k.timeStamp-c<200){g.createFullscreenGallery(f)}})}}}},getArticleImages:function(e){var d=this;var g=$(e).find(".contentImage");var a=[];for(var c=0;c<g.length;c++){var f=g[c];var h=$(f).find("img")[0];if(h!=null){var b={url:h.src,caption:f.innerText};a.push(b)}}return a},createFullscreenGallery:function(d){var b=this;var a=[];for(image in d.images){a.push({url:d.images[image].url})}if(Ext.os.is.Desktop){var e="InfinityMobile.view.desktop.ImageGallery"}else{var e="InfinityMobile.view.tablet.ImageGallery"}var c=Ext.create(e,{images:a,article:d,dynamicview:false,zIndex:99999999});Ext.Viewport.add(c);c.show()},setupUrlAdvertContent:function(g){var e=this;var b=settings.reader.popupAdvert;var d="728";var a="90";if(currentProfile=="phone"){d="320";a="50"}if(b!=null&&b.url!=null&&b.position!=null&&g!=null){var c=b.url;e.advertDivID=e.id+"advert";var f=e.returnSection(e.config.page!=null?e.config.page.page:null);var h="edid="+editionguid+"&pubid="+publicationguid+"&pnum=1&w="+d+"&h="+a+"&article=true&elemid="+encodeURIComponent(e.advertDivID)+(!!f&&f.trim()!=""?"&section="+encodeURIComponent(f):"");if(c.indexOf("?")==-1){c+="?"+h}else{c+="&"+h}setTimeout(function(){if(!e.destroyed){var j=$(e.element.dom).find(".advertIframe");if(j[0]!=null){$(j[0]).attr("id",e.advertDivID);$(j[0]).attr("src",c)}}},e.advertTimeout);g=g.replace("articleContentHtml5","articleContentHtml5 articleNoScroll");return g}else{return g}},returnSection:function(a){var e=this;if(a==null){return null}var h=settings.bookmarks.bookmark;var f=null;if(h!=null&&h.length>0){for(var c in h){var b=parseInt(h[c].pageNumber);if(h[c].start!=null){b=h[c].start}var g=h[parseInt(c)+1];var d=null;if(g!=null){d=g.pageNumber;if(g.start!=null){d=g.start}}if(parseInt(a)>=b&&(d==null||parseInt(a)<parseInt(d))){f=h[c].name;break}}}return f},setupDfpAdvertCorn c},setupDfpAdvertContentMpu:function(c){var b=this;var a=settings.reader.popupAdvertMpu;if(a.networkCode!=null&&a.adUnit){b.networkCodeMpu=a.networkCode;b.adUnitMpu=a.adUnit;b.advertDivIDMpu=b.id+"mpu";if(a.customClass!=null&&a.customClass.trim().length>0){var d=new RegExp("<div[\\sa-zA-Z0-9\\'\\\"=\\-\\_]*class=[\\'\\\"]"+a.customClass+"[\\'\\\"]>","g");c=c.replace(d,'<div id="'+b.advertDivIDMpu+"\" class='mpuAdvert' >")}b.on("painted",function(){b.loadAdvert()})}return c},setUpMpuInline:function(){var c=this;var b=$(c.element.dom).find(".contentBody")[0];if(b!=null){var a=settings.reader.popupAdvertMpu;c.networkCodeMpu=a.networkCode;c.adUnitMpu=a.adUnit;c.advertDivIDMpu=c.id+"mpu";b.innerHTML='<div id="'+c.advertDivIDMpu+"\" class='mpuAdvert' ></div>"+b.innerHTML}},setupImageAdvertContent:function(e){var d=this;var b=settings.reader.popupAdvert;d.advertDivID=d.id+"advert";if(b.url!=null){var a="";var c="";if(b.link!=null&&b.link.trim().length>0){a="cursor:pointer;";c="onclick=\"window.open('"+b.link+'\');" ontouchstart="this.start = event.timeStamp" ontouchend="if(event.timeStamp - this.start < 75){window.open(\''+b.link+"');}\"";console.log(c)}if(b.customClass!=null&&b.customClass.trim().length>0){var f=new RegExp("<div[\\sa-zA-Z0-9\\'\\\"=\\-\\_]*class=[\\'\\\"]"+b.customClass+"[\\'\\\"]>","g");e=e.replace(f,"<div "+c+" id='"+d.advertDivID+"' style='"+a+'width:728px;height:110px;margin:auto;background-image:url("'+b.url+"\");background-size:contain;background-position:center;background-repeat:no-repeat;' >")}else{if(b.position!=null&&b.position=="top"){e="<div "+c+" id='"+d.advertDivID+"' style='"+a+"width:728px;height:110px;margin:auto;'></div>"+e;e=e.replace("articleContentHtml5","articleContentHtml5 articleNoScroll")}else{e=e+"<div "+c+" id='"+d.advertDivID+"' style='"+a+"width:728px;height:110px;margin:auto;'></div>";e=e.replace("articleContentHtml5","articleContentHtml5 articleNoScroll")}}}return e},mediaHuisImgw()}},removeSpinner:function(){var a=this;a.removeCls("loading")},setImages:function(){var r=this;var k=1;var o=1;var n=r.id;if(currentProfile=="tablet"){var h=$("#"+n+" img").get(0);if(h!=null){if(h.naturalWidth==0){h.onload=function(){var t=this;if(t.naturalWidth<(screen.width/2)){var u=$("#"+n+" .articleContent")[0];u.className="articleContent float"}}}}}if($("#"+n+" .contentImage").size()>1){if(currentProfile=="phone"){if(typeof isTribReader!="undefined"&&isTribReader&&(r.lang&&r.lang=="es")){$("#"+n+" .nextImage")[0].childNodes[0].textContent="ANTERIOR";$("#"+n+" .previousImage")[0].childNodes[0].textContent="SIGUIENTE"}else{$("#"+n+" .nextImage")[0].childNodes[0].textContent="NEXT";$("#"+n+" .previousImage")[0].childNodes[0].textContent="PREVIOUS"}}else{if(typeof isTribReader!="undefined"&&isTribReader&&(r.lang&&r.lang=="es")){$("#"+n+" .nextImage")[0].childNodes[0].textContent="ANTERIOR IMAGEN";$("#"+n+" .previousImage")[0].childNodes[0].textContent="SIGUIENTE IMAGEN"}}if(currentProfile!="phone"&&language!=null&&language.articlePopover!=null&&language.articlePopover.nextImage!=null&&language.articlePopover.previousImage!=null){$("#"+n+" .nextImage")[0].childNodes[0].textContent=language.articlePopover.nextImage;$("#"+n+" .previousImage")[0].childNodes[0].textContent=language.articlePopover.previousImage}o=$("#"+n+" .contentImage").size();if(o>1){if(settings.reader.galleryMpu!=null&&settings.reader.galleryMpu.type=="dfp"&&settings.reader.galleryMpu.networkCode!=null&&settings.reader.galleryMpu.adUnit!=null){var a=2;var l=settings.reader.galleryMpu;if(l.swipeCount!=null&&!isNaN(l.swipeCount)){a=parseInt(l.swipeCount)}var c=Math.floor(o/a);for(var m=0;m<c;m++){try{var f=document.createElement("div");f.id="pg_advert"+m+r.id;f.style.height="250px";f.className="contentImage galleryAdvert";f.style.display="none";var e=$("#"+n+" .contentImages")[0].childNodes[(a)+(a*m)+(m)];e.parentNode.insertBefore(f,e);var d=l.networkCode;var g=l.adUnit;gptadslots.push(googletag.defineSlot("/"+d+"/"+g,[[300,250]],"pg_advert"+m+r.id).addService(googletag.pubads().updateCorrelator()));if(l.targeting!=null){var p=l.targeting.split("|");for(var j in p){if(p[m].indexOf("*")!=-1){var s=p[j].split("*");googletag.pubads().setTargeting(s[0],s[1])}}}}catch(q){}}}$("#"+n+" .contentImage:gt(0)").hide();$("#"+n+" .previousImage").hide();b()}else{if(o==1){$("#"+n+" .imageControls").hide()}}$("#"+n+" .nextImage").click(function(){var u=$("#"+n+" .contentImage:visible");var t=$("#"+n+" .contentImage:visible").next();u.hide();var v=false;if(t[0].className.indexOf("galleryAdvert")!=-1){googletag.pubads().updateCorrelator();googletag.enableServices();googletag.cmd.push(function(){googletag.display(t[0].id)});$("#"+n+" .imageCount").text("Advertisement");v=true}else{k++}if(!v){b()}t.fadeIn();$("#"+n+" .previousImage").show();if(t.is("#"+n+" .contentImage:last")){$("#"+n+" .nextImage").hide()}});$("#"+n+" .previousImage").click(function(){var u=$("#"+n+" .contentImage:visible");var t=$("#"+n+" .contentImage:visible").prev();u.hide();var v=false;if(t[0].className.indexOf("galleryAdvert")!=-1){googletag.pubads().updateCorrelator();googletag.cmd.id)});$("#"+n+" .imageCount").text("Advertisement");v=true}if(u[0].className.indexOf("galleryAdvert")==-1){k--}if(!v){b()}t.fadeIn();$("#"+n+" .nextImage").show();if(t.is("#"+n+" .contentImage:first")){$("#"+n+" .previousImage").hide()}})}else{$("#"+n+" .imageControls").hide()}function b(){if(typeof isTribReader!="undefined"&&isTribReader&&(r.lang&&r.lang=="es")){var t="Imagen "+k.toString()+" de "+o.toString()}else{var t="Image "+k.toString()+" of "+o.toString()}if(language!=null&&language.image!=null&&language.of!=null){var t=language.image+" "+k.toString()+" "+language.of+" "+o.toString()}$("#"+n+" .imageCount").text(t)}},intializeForIframe:function(){var a=this;if(a.getPage()!=null){if(a.getPage().file==a.getPage().guid){a.popoverType="guid"}a.articleguid=a.getPage().file}a.on("painted",a.getIframeContent,a,{delay:10,single:true})},getIframeContent:function(){var d=this;var a=d.articleguid;d.addCls("DS-layout-detail DS-modus-replica DS-is-online miller-loaded");var c="../article_popover_for_iframe.aspx?guid="+a+"&html5="+currentProfile;if(d.popoverType=="guid"){d.content.element.dom.style.overflowY="";c="../article_popover_for_iframe.aspx?guid="+a+"&html5="+currentProfile}d.content.setHtml('<iframe style="border:none;width:100%;height:100%;" class="iframePopover" src="'+c+'" />');var b=$(d.content.element.dom).find(".iframePopover")[0];b.onload=function(){d.removeSpinner();if(b.contentWindow.SetPlatformType!=null){b.contentWindow.SetPlatformType("web")}}},destroy:function(){var a=this;a.destroyed=true;Ext.Container.prototype.destroy.apply(this,arguments)},setnt()},toggleToTextMode:function(){var a=this;if(a.mode=="html"){if(a.painted){a.setIframeContent()}a.setActiveItem(a.contentIframe);a.mode="frame"}else{if(a.parent.getActiveItem()==a){a.loadAdvertMpu()}a.setActiveItem(a.content);a.mode="html"}},setIframeContent:function(){var k=this;if(k.contentIframe.getHtml()==null){k.contentIframe.setHtml("<iframe class=\"articleiframe\" style='width:100%; height:100%; border:none; -ms-user-select:text; user-select:text;'></iframe>");var f=k.contentIframe.element.down("iframe").dom;var m="phoneArticle";if(currentProfile=="tablet"){m="tabletArticle"}console.log(k.content);var c="<div class='"+m+"'>"+k.content.element.dom.innerHTML+'</div><script>setImages("'+currentProfile+'");<\/script>';var j=settings.reader.popupAdvert;if(j!=null&&j.url!=null&&j.position!=null){var d="728";var n="90";if(currentProfile=="phone"){d="320";n="50"}var b=j.url;var a="edid="+editionguid+"&pubid="+publicationguid+"&pnum=1&w="+d+"&h="+n+"&article=true";if(b.indexOf("?")==-1){b+="?"+a}else{b+="&"+a}setTimeout(function(){if(!k.destroyed){var o=$(k.iframe.document).find(".advertIframe");if(o[0]!=null&&(o[0].src==null||o[0].src=="")){$(o[0]).attr("src",b)}}},k.advertTimeout)}var l="<script>cols[i].style.fontSize = font35Size;<\/script>";var h="<style>body { margin:0 } p { margin:0; padding:0; } .articleContentHtml5 { padding: 0 25px; height: 100% !important; font-size:"+fontEm+"px } .imageControls{ display:none !important; } .contentImage { display:block !important; }</style><script>function setText() {}<\/script><script>function updateText(fontsize) { document.getElementsByClassName('articleContentHtml5')[0].style.fontSize = fontsize + 'px' }<\/script>";var g="<html><head>{{HEAD}}</head><body>{{BODY}}</body></html>";var e="<link rel='stylesheet' type='text/css' href='resources/css/article.css'><\/script><script src=\"resources/js/articleGallery.js\"><\/script>"+h;g=g.replace("{{HEAD}}",e);g=g.replace("{{BODY}}",c);k.iframe=f.contentWindow?f.contentWindow:(f.contentDocument.document?f.contentDocument.document:f.contentDocument);g=k.checkIframeAdvert(g);console.log(k.content.getHtml());k.iframe.document.write(g);if(k.parent.getActiveItem()==k){k.loadIframeAdvertMpu()}}},checkIframeAn a}},setupIframeMpuAeak}},setupIframeAn c}},setupDfpIframeMpuAn g}},setupDfpIframeAn f}},returnGoogletagSt >'},loadIframeAdvertMpu:function(){var a=this;if(typeof settings!="undefined"&&settings.reader!=null&&settings.reader.popupAdvertMpu!=null){switch(settings.reader.popupAdvertMpu.type){case"dfp":a.loadIframeDfpAdvertMpu();break}}},loadIframeAak}}},loadIframeDfpAdvertMpu:function(){var a=this;setTimeout(function(){if(!a.destroyed){if(a.iframe!=null&&a.iframe.loadAdvertMpu!=null){a.iframe.loadAdvertMpu()}}},a.advertTimeout)},loadIframeDfpAout)},translateArng()},getContentLang:function(){var c=this;var a=c.articleguid;c.addCls("DS-layout-detail DS-modus-replica DS-is-online miller-loaded");var b="http://edition.pagesuite.com/tribune/article_popover_phil.aspx?guid="+a+"&html5="+currentProfile+"&lang=es";if(c.popoverType=="guid"){c.content.element.dom.style.overflowY="";b="http://edition.pagesuite.com/tribune/article_popover_phil.aspx?guid="+a+"&html5="+currentProfile+"&lang=es"}$.ajax({crossDomain:true,type:"GET",contentType:"text/html",async:true,url:b,success:function(h){var j=Ext.getStore("SettingStore");if(j.data.items[0].raw.reader.popupAdvert!=null){var k=j.data.items[0].raw.reader.popupAdvert.position;if(k=="top"){switch(currentProfile){case"phone":var l=Ext.create("InfinityMobile.view.phone.ArticlePopoverAd",{});break;case"tablet":var l=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{});break;case"desktop":var l=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{});break}c.add(l);l.show()}}var n=h;var e=n.match(/<body[^>]*>([^<]*(?:(?!<\/?body)<[^<]*)*)<\/body\s*>/i);if(e){n=e[1]}c.articleText=n;n+="<script>setText()<\/script>";c.removeSpinner();c.content.setHtml(n);c.content.setPadding("0px");c.setImages();if(c.content.element!=null){setText(c.content.element.dom)}c.setStyle({visibility:"inherit"});if(j.data.items[0].raw.reader.popupAdvert!=null){if(k=="bottom"){switch(currentProfile){case"phone":var g=Ext.create("InfinityMobile.view.phone.ArticlePopoverAd",{});break;case"tablet":var g=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{});break;case"desktop":var g=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{padding:"10px 0 0 0"});break}c.add(g);g.show()}}if($(c.element.dom).find(".DS-storyimage__link")!=null){if($(c.element.dom).find(".DS-storyimage__link")[0]!=null){var o=$(c.element.dom).find(".DS-storyimage__link")[0];var f=$(o).find("img")[0];var p=o.parentElement;c.imgUrl=$(o).attr("href");o.remove();p.appendChild(f);$(f).addClass("pointerCursor");f.onclick=function(){c.mediaHuisImgClick()}}}if(typeof isTribReader!="undefined"){if(isTribReader){var d=$(c.element.dom).find(".articleContentHtml5");if(d.length>0){$(d[0]).css("padding-right","25px");$(d[0]).css("padding-left","25px")}}}c.content.element.on({scope:c.content,delegate:"a",tap:function(m){if(!Ext.os.is.Desktop){window.location.href=m.target}}})}})}},0,["readerarticlepopoveritem"],["component","container","readerarticlepopoveritem"],{component:true,container:true,readerarticlepopoveritem:true},["widget.readerarticlepopoveritem"],0,[InfinityMobile.view.desktop,"ReaderArticlePopoverItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderArticlePopoverItem",Ext.Container,{config:{mediaObject:"",pageNo:"",page:"",article:null,cls:"loading",style:"background-color:white",layout:"vbox",items:[{itemId:"content",flex:1,scrollable:{direction:"vertical",directionLock:true}}]},initialize:function(){var b=this;b.destroyed=false;b.advertTimeout=2000;b.content=b.getComponent("content");b.setContentStyle();b.popoverType="article";b.mode="html";if(b.config.highlightMode!=null&&b.config.highlightMode==true){b.mode="frame";b.contentCard.setActiveItem(b.contentIframe)}if(InfinityMobile.app.getController("MediaController").currentLang){b.lang=InfinityMobile.app.getController("MediaController").currentLang}if(settings.reader.iframePopover!=null&&settings.reader.iframePopover=="true"){b.intializeForIframe()}else{if(b.getArticle()!=null){b.article=b.getArticle();if(settings.newsday!=null&&settings.newsday.useNewsdayTemplate!=null&&settings.newsday.useNewsdayTemplate=="true"){var a=true;b.initializeInlineNewsday()}else{var a=false;b.initializeInline()}}else{b.initializeForWeb()}}},initializeInlineNewsday:function(){var v=this;var a="<div class='container'><div><div class='textcontent'><{{LABEL}}><div class='contenthead font35'><{{HEAD}}></div><{{HEADDECK}}><div class='articleContent'><{{IMAGE}}><div class='bylineContainer' style='margin-bottom:15px;min-height:25px;'><{{BYLINE}}><div class='bylinecontainer' ><{{TEXTCONTROLS}}></div><hr /><div class='contentbody'><{{REVIEWBOX}}><div class=\"pcontent\" style='position:relative;' ><{{MPU}}><{{BODY}}></div><{{NEWSBOX}}></div><{{BANNERAD}}></div></div></div></div>";if(v.article.label!=null){a=a.replace("<{{LABEL}}>",'<div class="label" >'+v.article.label+"</div>")}else{a=a.replace("<{{LABEL}}>","")}a=a.replace("<{{HEAD}}>",v.article.headline);a=a.replace("<{{HEADDECK}}>",'<div class="contentdeck font25">'+v.article.subHeadline+"</div>");a=v.newsdayByline(a);if(v.article.reviewBox.trim().length>0){a=a.replace("<{{REVIEWBOX}}>","<div class='reviewbox' >"+v.article.reviewBox+"</div>")}else{a=a.replace("<{{REVIEWBOX}}>","")}a=a.replace("<{{BODY}}>",v.article.body);if(v.article.newsBox.trim().length>0){a=a.replace("<{{NEWSBOX}}>","<div class='newsbox' >"+v.article.newsBox+"</div>")}else{a=a.replace("<{{NEWSBOX}}>","")}a=a.replace("<{{TEXTCONTROLS}}>",'<img style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="resources/images/increase-text-size_newsday.png" ontouchstart="increaseTextNewsday()" onclick="increaseTextNewsday()">&nbsp;&nbsp;<img style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="resources/images/decrease-text-size_newsday.png" ontouchstart="decreaseTextNewsday()" onclick="decreaseTextNewsday()"></div>');var u=settings.newsday.articleCubeAd;if(u!=null&&currentProfile!="phone"){if(u.networkCode!=null&&u.adUnit!=null){v.networkCodeMpu=u.networkCode;v.adUnitMpu=u.adUnit;v.advertDivIDMpu=v.id+"mpu";var c="mpuAdvert";if(currentProfile=="phone"){c="mpuPhone"}a=a.replace("<{{MPU}}>",'<div id="'+v.advertDivIDMpu+'" class="'+c+'" ></div>')}}else{a=a.replace("<{{MPU}}>","")}var q=settings.newsday.articleBannderAd;if(q!=null){if(q.networkCode!=null&&q.adUnit!=null){v.networkCode=q.networkCode;v.adUnit=q.adUnit;v.advertDivID=v.id+"advert";var l=728;var r=110;if(currentProfile=="phone"){l=320;r=70}a=a.replace("<{{BANNERAD}}>","<div id='"+v.advertDivID+"' style='width:"+l+"px;height:"+r+"px;margin:auto;'></div>")}}else{a=a.replace("<{{BANNERAD}}>","")}var s=v.initializeInlineImagesNewsday();a=a.replace("<{{IMAGE}}>",s);v.content.setHtml(a);var u=settings.newsday.articleCubeAd;if(u!=null&&currentProfile=="phone"){if(u.networkCode!=null&&u.adUnit!=null){v.networkCodeMpu=u.networkCode;v.adUnitMpu=u.adUnit;v.advertDivIDMpu=v.id+"mpu";var c="mpuPhone";var b=$(v.content.element.dom).find(".pcontent")[0];var k=b.getElementsByTagName("p");if(k.length>0){var j=b;var n=document.createElement("div");n.id=v.advertDivIDMpu;n.className=c;var g;if(k.length>4){g=k[3];j.insertBefore(n,g)}else{g=k[k.length-1];j.appendChild(n)}}}}var t=$(v.content.element.dom).find(".x-scroll-scroller")[0];if(t!=null){$(t).addClass("customscroller")}if(currentProfile=="phone"){var o=$(v.element.dom).find(".bylineContainer")[0];$(o).css("margin-bottom","");var f=$(v.element.dom).find(".bylineContainerNewsday")[0];$(f).removeClass("bylineContainerNewsday")}v.removeSpinner();v.on("painted",function(){v.setImages();if(Ext.os.is.Android){v.fireEvent("fillPrintContainer",v)}},v,{});v.hasVideo=false;v.hasLink=false;v.hasGallery=false;var x=$(v.element.dom).find(".articleImg")[0];if(x!=null){var m=$(v.element.dom).find(".galleryicon")[0];$(m).css("visibility","visible");$(m).click(function(){v.viewGallery()});m.addEventListener("touchstart",function(){v.viewGallery()});if(v.article.media!=null){if(v.article.media.length>0){for(var p in v.article.media){if(v.article.media[p].type=="OVIDEO"){var e=$(v.element.dom).find(".articlevideoicon")[0];$(e).css("display","inline");v.oVideo=v.article.media[p];if(!v.hasVideo){$(e).click(function(){v.viewOVideo(v.oVideo)});e.addEventListener("touchstart",function(){v.viewOVideo(v.oVideo)})}v.hasVideo=true}if(v.article.media[p].type=="OLINK"){var d=$(v.element.dom).find(".linkicon")[0];$(d).css("display","inline");v.oLink=v.article.media[p].url;if(!v.hasLink){$(d).click(function(){v.openOLink(v.oLink)});d.addEventListener("touchstart",function(){v.openOLink(v.oLink)});v.hasLink=true}}if(v.article.media[p].type=="OGALLERY"){var d=$(v.element.dom).find(".ogalleryicon")[0];$(d).css("display","inline");v.oGallery=v.article.media[p];if(!v.hasGallery){$(d).click(function(){v.openOGallery(v.oGallery)});d.addEventListener("touchstart",function(){v.openOGallery(v.oGallery)});v.hasGallery=true}}}}}}setNewsdayText(v.content.element.dom);v.content.element.on({scope:v.content,delegate:"a",tap:function(w){var h=$(w.target).attr("href");if(!h.startsWith("http://")&&!h.startsWith("https://")&&!h.startsWith("mailto:")&&!h.startsWith("tel:")){h="http://"+h}window.location.href=h}})},newsdayByline:function(c){var d=this;var e="";if(d.article.byline.length>0){e="<div class=\"contentbyline font15\">By <span class='bylinespan'>"+d.article.byline+"</span>";if(d.validateEmail(d.article.reporterEmail)){e=e.replace("<span class='bylinespan'>","<span class='bylinespan pointerCursor' ontouchstart='window.location.href = \"mailto:"+d.article.reporterEmail+"?subject="+encodeURIComponent(d.article.headline)+"\";' onclick='window.location.href = \"mailto:"+d.article.reporterEmail+"?subject="+encodeURIComponent(d.article.headline)+"\";'>")}else{e=e.replace("<span class='bylinespan'>","<span>")}if(d.article.reporters!=null){for(var b in d.article.reporters){var a="";if(b==d.article.reporters.length-1){a+=" and <span class='bylinespan'>"+d.article.reporters[b].name+"<span>"}else{a+=", <span class='bylinespan'>"+d.article.reporters[b].name+"<span>"}if(d.validateEmail(d.article.reporters[b].email)){a=a.replace("<span class='bylinespan'>","<span class='bylinespan pointerCursor' ontouchstart='window.location.href = \"mailto:"+d.article.reporters[b].email+"?subject="+encodeURIComponent(d.article.headline)+"\";' onclick='window.location.href = \"mailto:"+d.article.reporters[b].email+"?subject="+encodeURIComponent(d.article.headline)+"\";'>")}else{a=a.replace("<span class='bylinespan'>","<span>")}e+=a}}e+="</div>"}c=c.replace("<{{BYLINE}}>",e);return c},validatet(a)},viewGacle)},viewOVideo:function(c){var b=this;var a=c.url;if(a.indexOf("http://")==-1){a="http://"+a}b.fireEvent("ovideoclicked",b,a)},opencle)},openOGaurl)},loadAdvert:function(){var a=this;setTimeout(function(){if(!a.destroyed){var b=728;var c=90;if(currentProfile=="phone"){b=320;c=50}googletag.cmd.push(function(){var d=googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,[b,c],a.advertDivID);d.addService(googletag.pubads());googletag.enableServices()});googletag.cmd.push(function(){googletag.display(a.advertDivID)})}},a.advertTimeout)},loadAdvertMpu:function(){var a=this;setTimeout(function(){if(!a.destroyed){googletag.cmdes()});googletag.cmd.push(function(){googletag.display(a.advertDivIDMpu)})}},a.advertTimeout)},initializeInline:function(){var b=this;var c="<div class='container'><div class='content'><div class='articleContent'><div class='contentHead font35'><{{HEAD}}></div><{{HEADDECK}}><{{IMAGE}}><br /><{{BYLINE}}><br /><div class='contentBody font15'><{{BODY}}></div></div></div></div>";c=c.replace("<{{HEAD}}>",b.article.headline);c=c.replace("<{{HEADDECK}}>",'<div class="contentDeck font25">'+b.article.subHeadline+"</div>");c=c.replace("<{{BYLINE}}>",'<div class="contentByline font15">'+b.article.byline+"</div>");c=c.replace("<{{BODY}}>",b.article.body);var a=b.initializeInlineImages();c=c.replace("<{{IMAGE}}>",a);b.content.setHtml(c);b.removeSpinner();b.on("painted",function(){b.setImages();if(Ext.os.is.Android){b.fireEvent("fillPrintContainer",b)}},b,{});b.on("painted",function(){var d=$(b.element.dom).find(".fullscreengalleryicon");if(d!=null&&d.length>0){$(d).click(function(){b.createFullscreenGallery(b.article)});d[0].addEventListener("touchstart",function(){b.createFullscreenGallery(b.article)})}})},createFullscreenGallery:function(d){var b=this;var a=[];for(image in d.images){a.push({url:d.images[image].url})}if(Ext.os.is.Desktop){var e="InfinityMobile.view.desktop.ImageGallery"}else{var e="InfinityMobile.view.tablet.ImageGallery"}var c=Ext.create(e,{images:a,article:d,dynamicview:false,zIndex:99999999});Ext.Viewport.add(c);c.show()},k(a)},callback:function(a){var b=this;if(a){console.log(a)}else{console.log("endspeech")}},getArticleTem}})}},setContentHx")}},setUpImageCon",e)},initializeInlineImagesNewsday:function(){var d=this;var g=d.article.images;var a="";if(g.length>0){var b="<div class=\"contentImage imagecontainerblack\"><div class=\"imageandiconscontainer\"><div class=\"iconscontainer\" ><div class='articlevideoicon pointerCursor'></div><div class='linkicon pointerCursor' ></div><div class='ogalleryicon pointerCursor' ></div><div class='galleryicon pointerCursor' ></div></div><img class='articleImg' src=\"{{imageurl}}\" alt=\"\" /></div>{{imagecaption}}</div>";var c="";var e=g[0];var f="";if(e.credit!=null){if(e.credit.trim().length>0){f=" ("+e.credit+")"}}c+=b.replace("{{imageurl}}",e.url).replace("{{imagecaption}}",'<div class="contentcaption captionlineheight font13">'+e.caption+f+"</div>");a=c}return a},initializeInlineImages:function(){var g=this;var h=g.article.images;var j="";if(h.length>0){var d="<div class=\"contentImages\" style='position:relative;'><div style='position:absolute;top:0px;right:0px;z-index:1;'><div class='fullscreengalleryicon pointerCursor' ></div></div>{{imagescontent}}</div>";var e='<div class="contentImage"><img src="{{imageurl}}" alt="" />{{imagecaption}}</div>';var a="";for(var f=0;f<h.length;f++){var b=h[f];a+=e.replace("{{imageurl}}",b.url).replace("{{imagecaption}}",'<div class="contentCaption font13">'+b.caption+"</div>")}var c='<div class="imageControls"><a href="javascript:void(0)" class="previousImage">PREVIOUS IMAGE<img class="imgPreviousImage" src="https://edition.pagesuite.com/tribune/left-image-arrow.png" alt="" /></a><div class="imageCount">Image</div><a href="javascript:void(0)" class="nextImage">NEXT IMAGE<img class="imgNextImage" src="https://edition.pagesuite.com/tribune/right-image-arrow.png" alt="" /></a></div>';a+=c;j=d.replace("{{imagescontent}}",a)}return j},checkLantrue},initializeLanue})},getLanguageCothis},initializeForWeb:function(){var a=this;if(a.getPage()!=null){if(a.getPage().file==a.getPage().guid){a.popoverType="guid"}a.articleguid=a.getPage().file}a.on("painted",a.getContent,a,{delay:10,single:true})},setContentStyle:function(){var a=this;if(currentProfile=="tablet"){}},getContent:function(){var c=this;var a=c.articleguid;c.addCls("DS-layout-detail DS-modus-replica DS-is-online miller-loaded");if((typeof isTribReader!="undefined"&&isTribReader==true)&&(c.lang=="es"||c.lang=="en")){var d="&lang="+c.lang}else{var d=""}var b="../article_popover.aspx?articleguid="+a+"&html5="+currentProfile+d;if(c.popoverType=="guid"){b="../article_popover.aspx?guid="+a+"&html5="+currentProfile+d}$.ajax({crossDomain:true,type:"GET",contentType:"text/html",async:true,url:b,success:function(l){var h=Ext.getStore("SettingStore");var g=l;var f=g.match(/<body[^>]*>([^<]*(?:(?!<\/?body)<[^<]*)*)<\/body\s*>/i);if(f){g=f[1]}g+="<script>setText()<\/script>";if(settings.reader.popupAdvert!=null){var e=settings.reader.popupAdvert;switch(e.type.toLowerCase()){case"dfp":g=c.setupDfpAdvertContent(g);break;case"image":g=c.setupImageAdvertContent(g);break}}if(settings.reader.popupAdvertMpu!=null&&settings.reader.popupAdvertMpu.customClass!=null){var j=settings.reader.popupAdvertMpu;switch(j.type.toLowerCase()){case"dfp":g=c.setupDfpAdvertContentMpu(g);break}}g=g.replace(/http:\/\/digitaledition.courant.com/g,"https://edition.pagesuite.com");c.removeSpinner();c.unmask();c.content.setHtml(g);if(c.mode=="frame"){c.setFrame()}if(settings.reader.popupAdvert!=null){c.loadAdvert()}if(settings.reader.popupAdvertMpu!=null){if(settings.reader.popupAdvertMpu.customClass==null){switch(j.type.toLowerCase()){case"dfp":c.setUpMpuInline();break}}c.loadAdvertMpu()}c.setImages();if(c.element!=null){c.printImage=c.element.down(".printImage")}if(c.content.element!=null){setText(c.content.element.dom)}c.setStyle({visibility:"inherit"});if(Ext.os.is.Android){c.fireEvent("fillPrintContainer",c)}if(c.xtype=="readerpuzzlepopoveritem"){if(Ext.browser.is.IE){var k=$(c.content.element.dom).find(".contentImage")[0];if(k!=null){var n=$(k).find("img")[0];if(n!=null){n.onload=function(){var m=$(n).height();var o=$(c.content.element.dom).find(".x-innerhtml")[0];if(o!=null){o.style.height=m+"px"}}}}}}c.content.element.on({scope:c.content,delegate:"a",tap:function(m){if(!Ext.os.is.Desktop){window.location.href=m.target}}})}})},setupDfpAdvertCorn d},setupDfpAdvertContern c},setUpMpuITML}},setupImageAdvertContent:function(f){var e=this;var b=settings.reader.popupAdvert;e.advertDivID=e.id+"advert";var d="width:728px;height:110px;";switch(currentProfile){case"phone":d="width:320px;height:70px;";break;default:d="width:728px;height:110px;";break}if(b.url!=null){var a="";var c="";if(b.link!=null&&b.link.trim().length>0){a="cursor:pointer;";c="onclick=\"window.open('"+b.link+'\');" ontouchstart="this.start = event.timeStamp" ontouchend="if(event.timeStamp - this.start < 75){window.open(\''+b.link+"');}\""}if(b.customClass!=null&&b.customClass.trim().length>0){var g=new RegExp("<div[\\sa-zA-Z0-9\\'\\\"=\\-\\_]*class=[\\'\\\"]"+b.customClass+"[\\'\\\"]>","g");f=f.replace(g,"<div "+c+" id='"+e.advertDivID+"' style='"+a+d+'margin:auto;background-image:url("'+b.url+"\");background-size:contain;background-position:center;background-repeat:no-repeat;' >")}else{if(b.position!=null&&b.position=="top"){f="<div "+c+" id='"+e.advertDivID+"' style='"+a+d+";margin:auto;'></div>"+f;f=f.replace("articleContentHtml5","articleContentHtml5 articleNoScroll")}else{f=f+"<div "+c+" id='"+e.advertDivID+"' style='"+a+d+"margin:auto;'></div>";f=f.replace("articleContentHtml5","articleContentHtml5 articleNoScroll")}}}return f},removeSpinner:function(){var a=this;a.removeCls("loading")},setImages:function(){var g=this;var d=1;var c=1;var b=g.id;if(currentProfile=="tablet"){var f=$("#"+b+" img").get(0);if(f!=null){h(f)}}if($("#"+b+" .contentImage").size()>1){if(currentProfile=="phone"){if((typeof isTribReader!="undefined"&&isTribReader==true)&&(g.lang&&g.lang=="es")){$("#"+b+" .nextImage")[0].childNodes[0].textContent="ANTERIOR";$("#"+b+" .previousImage")[0].childNodes[0].textContent="SIGUIENTE"}else{$("#"+b+" .nextImage")[0].childNodes[0].textContent="NEXT";$("#"+b+" .previousImage")[0].childNodes[0].textContent="PREVIOUS"}}else{if((typeof isTribReader!="undefined"&&isTribReader==true)&&(g.lang&&g.lang=="es")){$("#"+b+" .nextImage")[0].childNodes[0].textContent="ANTERIOR IMAGEN";$("#"+b+" .previousImage")[0].childNodes[0].textContent="SIGUIENTE IMAGEN"}}c=$("#"+b+" .contentImage").size();if(c>1){$("#"+b+" .contentImage:gt(0)").hide();$("#"+b+" .previousImage").hide();a()}else{if(c==1){$("#"+b+" .imageControls").hide()}}$("#"+b+" .nextImage").on("click touchstart",function(){var l=$("#"+b+" .contentImage:visible");var j=$("#"+b+" .contentImage:visible").next();var k=$(j[0]).find("img:first").get(0);e(k);l.hide();d++;a();j.fadeIn();$("#"+b+" .previousImage").show();if(j.is("#"+b+" .contentImage:last")){$("#"+b+" .nextImage").hide()}});$("#"+b+" .previousImage").on("click touchstart",function(){var l=$("#"+b+" .contentImage:visible");var j=$("#"+b+" .contentImage:visible").prev();var k=$(j[0]).find("img:first").get(0);e(k);l.hide();d--;a();j.fadeIn();$("#"+b+" .nextImage").show();if(j.is("#"+b+" .contentImage:first")){$("#"+b+" .previousImage").hide()}})}else{$("#"+b+" .imageControls").hide()}function a(){if((typeof isTribReader!="undefined"&&isTribReader==true)&&(g.lang&&g.lang=="es")){var j="Imagen "+d.toString()+" de "+c.toString()}else{var j="Image "+d.toString()+" of "+c.toString();$("#"+b+" .imageCount").tex"}}}},intializeForIue})},getIframeContent:function(){var d=this;var a=d.articleguid;d.addCls("DS-layout-detail DS-modus-replica DS-is-online miller-loaded");var c="../article_popover.aspx?articleguid="+a+"&html5="+currentProfile;if(d.popoverType=="guid"){d.content.element.dom.style.overflowY="";c="../article_popover.aspx?guid="+a+"&html5="+currentProfile}d.content.setScrollable("none");d.content.setHtml('<div class=\'iframeWrapper\' style=\'position:absolute; width:100%; height:100%; overflow-y:scroll; -webkit-overflow-scrolling:touch;\'><iframe style="border:none;width:100%; height:100%" class="iframePopover" src="'+c+'" /></div>');var b=$(d.content.element.dom).find(".iframePopover")[0];b.onload=function(){d.removeSpinner();if(b.contentWindow.SetPlatformType!=null){b.contentWindow.SetPlatformType("web")}}},dents)}},0,["readerarticlepopoveritem"],["component","container","readerarticlepopoveritem"],{component:true,container:true,readerarticlepopoveritem:true},["widget.readerarticlepopoveritem"],0,[InfinityMobile.view,"ReaderArticlePopoverItem"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderPuzzlePopoverItem",InfinityMobile.view.ReaderArticlePopoverItem,{config:{mediaObject:"",pageNo:"",page:"",cls:"loading",layout:"vbox",items:[{itemId:"content",flex:1,layout:"card",items:[{scrollable:{direction:"vertical",directionLock:true},itemId:"contentHtml"}]},{itemId:"bottomBar",cls:"bottomBar",height:60,style:"font-size: 14px;",layout:{type:"hbox",pack:"middle",align:"center"},items:[{itemId:"archive",width:170,height:40,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",pack:"middle",align:"center"},items:[{html:"<img src='https://editionn.pagesuite.com/tribune/archive-ic.png' style='height:32px' />"},{width:5},{html:"Archive"}]},{width:10},{itemId:"print",width:170,height:40,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",pack:"middle",align:"center"},items:[{html:"<img src='https://edition.pagesuite.com/tribune/print-icon.png' style='height:32px' />"},{width:5},{html:"Print"}]},{width:10},{itemId:"share",width:170,height:40,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",pack:"middle",align:"center"},items:[{itemId:"shareText",layout:{type:"hbox",pack:"middle",align:"center"},items:[{html:"<img src='https://edition.pagesuite.com/tribune/share-ic.png' style='height:32px' />"},{width:5},{html:"Share"}]},{itemId:"shareFrame",hidden:true,layout:{type:"hbox",pack:"middle",align:"center"}}]},{itemId:"interactivemargin",width:10},{itemId:"interactive",width:170,height:40,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",pack:"middle",align:"center"},items:[{html:"<img src='https://edition.pagesuite.com/tribune/interactive-ic.png' style='height:32px' />"},{width:5},{html:"Interactive Version"}]}]}]},initialize:function(){var a=this;InfinityMobile.view.ReaderArticlePopoverItem.prototype.initialize.apply(this,arguments);a.bottomBar=a.getComponent("bottomBar");a.archiveButton=a.bottomBar.getComponent("archive");a.printButton=a.bottomBar.getComponent("print");a.shareButton=a.bottomBar.getComponent("share");a.shareText=a.shareButton.getComponent("shareText");a.shareFrame=a.shareButton.getComponent("shareFrame");a.interactiveMargin=a.bottomBar.getComponent("interactivemargin");a.interactiveButton=a.bottomBar.getComponent("interactive");a.setArchiveListener();a.setPrintListener();a.setShareListener();a.setInteractiveListener();a.setUpShare();a.checkInteractive()},setUpShare:function(){var e=this;var f="http://"+window.location.hostname+"/infinity/article_share.aspx?guid="+e.articleguid;var d="Check out today's Hartford Courant digital edition";var a=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:"https://edition.pagesuite.com/html5/desktop/assets/article%20view/email-ic.png",linkUrl:"mailto:?body={0}",pageUrl:f,message:d,height:30,width:30});e.shareFrame.add(a);var c=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:"https://edition.pagesuite.com/html5/desktop/assets/article%20view/facebook-ic.png",linkUrl:"http://www.facebook.com/sharer/sharer.php?m2w&u={0}",pageUrl:f,message:d,height:30,width:30});e.shareFrame.add(c);var b=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:"https://edition.pagesuite.com/html5/desktop/assets/article%20view/twitter-ic.png",linkUrl:"http://twitter.com/intent/tweet?text={0}",pageUrl:f,message:d,height:30,width:30});e.shareFrame.add(b)},setArchiveListener:function(){var a=this;a.archiveButton.element.on("tap",function(){a.fireEvent("puzzleArchive",a)})},setPrintListener:function(){var a=this;a.printButton.element.on("tap",function(){a.fireEvent("puzzlePrint",a)})},setShareListener:function(){var a=this;a.shareButton.element.on("tap",function(){a.fireEvent("puzzleShare",a)})},setInteractiveListener:function(){var a=this;a.interactiveButton.element.on("tap",function(){a.fireEvent("puzzleInteractive",a)})},checkInteractive:function(){var a=this;if(a.getPage().title!="Interactive Puzzle"){a.interactiveMargin.setHidden(true);a.interactiveButton.setHidden(true)}}},0,["readerpuzzlepopoveritem"],["component","container","readerarticlepopoveritem","readerpuzzlepopoveritem"],{component:true,container:true,readerarticlepopoveritem:true,readerpuzzlepopoveritem:true},["widget.readerpuzzlepopoveritem"],0,[InfinityMobile.view.tablet,"ReaderPuzzlePopoverItem"],0));(Ext.cmd.derive("InfinityMobile.view.phone.ReaderPuzzlePopoverItem",InfinityMobile.view.ReaderArticlePopoverItem,{config:{mediaObject:"",pageNo:"",page:"",cls:"loading",layout:"vbox",items:[{itemId:"content",flex:1,layout:"card",items:[{scrollable:{direction:"vertical",directionLock:true},itemId:"contentHtml"}]},{itemId:"bottomBar",cls:"bottomBar",height:60,style:"font-size: 12px;",layout:{type:"hbox",pack:"middle",align:"center"},items:[{flex:1},{itemId:"archive",width:90,height:30,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",pack:"middle",align:"center"},items:[{html:"<img src='http://digitaledition.courant.com/tribune/archive-ic.png' style='height:20px' />"},{width:5},{html:"Archive"}]},{flex:1},{itemId:"print",width:90,height:30,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",pack:"middle",align:"center"},items:[{html:"<img src='http://digitaledition.courant.com/tribune/print-icon.png' style='height:20px' />"},{width:5},{html:"Print"}]},{itemId:"interactivemargin",flex:1},{itemId:"interactive",width:90,height:30,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",pack:"middle",align:"center"},items:[{html:"<img src='http://digitaledition.courant.com/tribune/interactive-ic.png' style='height:20px' />"},{width:5},{html:"Interactive"}]},{flex:1}]}]},initialize:function(){var a=this;InfinityMobile.view.ReaderArticlePopoverItem.prototype.initialize.apply(this,arguments);a.bottomBar=a.getComponent("bottomBar");a.archiveButton=a.bottomBar.getComponent("archive");a.printButton=a.bottomBar.getComponent("print");a.interactiveMargin=a.bottomBar.getComponent("interactivemargin");a.interactiveButton=a.bottomBar.getComponent("interactive");a.setArchiveListener();a.setPrintListener();a.setInteractiveListener();a.checkInteractive()},setArchiveListener:function(){var a=this;a.archiveButton.element.on("tap",function(){a.fireEvent("puzzleArchive",a)})},setPrintListener:function(){var a=this;a.printButton.element.on("tap",function(){a.fireEvent("puzzlePrintMobile",a)})},setShareListener:function(){var a=this;a.shareButton.element.on("tap",function(){a.fireEvent("puzzleShare",a)})},setInteractiveLisa)})},checkInteraue)}}},0,["readerpuzzlepopoveritem"],["component","container","readerarticlepopoveritem","readerpuzzlepopoveritem"],{component:true,container:true,readerarticlepopoveritem:true,readerpuzzlepopoveritem:true},["widget.readerpuzzlepopoveritem"],0,[InfinityMobile.view.phone,"ReaderPuzzlePopoverItem"],0));(Ext.cmd.derive("InfinityMobile.profile.phone",Ext.app.Profile,{config:{name:"phone",views:["StoryWindowPreferences","DataCaptureForm","ArticleReaderItemWeatherTile","ArticleReaderBannerAd","ArticleReaderItemTopStoryItem","ArticleReaderItemPhone","ArticleReaderItemTopStories","ArticleReaderItemContainer","ArticleReaderPanelContainer","ClippingOptionsMenu","ClippingArea","clippingPrompt","ClippingOptions","ArticleSectionItem","ArticleSectionItemImg","ArticlesSectionContainer","ArticlesContainer","SplashScreen","ReaderHelper","ReaderMenu","ReaderMenuSection","ReaderArchive","ReaderSearch","ReaderDownload","ReaderArticlePopover","ReaderWhatsNew","Interstitial","ArticlePopoverAd","ArticlePopoverInterstitial","ReaderSharePopup","ReaderSharePopupItem","ReaderBannerAd","ReaderBookmark","readerTerms","SectionListOverlay","ZonesOverlay","ReaderPuzzlePopoverItem","ArchiveSelector"]},viewport:{autoMaximize:true},isActive:function(){var b=Ext.os.is.Phone;var c=navigator.userAgent;var d=/Kindle/i.test(c)||/Silk/i.test(c)||/KFTT/i.test(c)||/KFOT/i.test(c)||/KFJWA/i.test(c)||/KFJWI/i.test(c)||/KFSOWI/i.test(c)||/KFTHWA/i.test(c)||/KFTHWI/i.test(c)||/KFAPWA/i.test(c)||/KFAPWI/i.test(c);if(d){b=true}if(Ext.os.is.Android){if(navigator.userAgent.search(/mobile/i)==-1){var a=Math.min(screen.height,screen.width);if(a>720){b=false}else{b=true}}}return b}},0,0,0,0,0,0,[InfinityMobile.profile,"phone"],0));(Ext.cmd.derive("InfinityMobile.profile.largetablet",Ext.app.Profile,{config:{name:"largetablet"},isActive:function(){var b=false;if(Ext.os.is.Tablet){var a=Math.min(screen.height,screen.width);if(a>800){b=true}}return b}},0,0,0,0,0,0,[InfinityMobile.profile,"largetablet"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ArticlePopoverAd",Ext.Container,{config:{width:"100%",height:110,padding:10,layout:{type:"hbox",align:"center",pack:"middle"}},initiue})},setCanLoadDFPAt()}},loadAak}}},destroyArue)},setDFPArue}},loadDFPAdvert:function(){var a=this;googletag.cmd.push(function(){googletag.defineSlot("/30709998/eedition.dhbusinessledger.com",[300,250],"divMPU").addService(googletag.pubads());googletag.enableServices()});googletag.cmd.push(function(){googletag.display("divMPU")})},setImageAk)})},setUrlA/>")}},0,["readerbannerad"],["component","container","readerbannerad"],{component:true,container:true,readerbannerad:true},["widget.readerbannerad"],0,[InfinityMobile.view.tablet,"ArticlePopoverAd"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ImageGallery",Ext.Container,{config:{modal:true,fullscreen:true,height:"100%",width:"100%",style:"background-color:black;",zIndex:20,baseCls:"dynamicgallery",items:[{itemId:"portrait",height:"100%",width:"100%",layout:"vbox",items:[{itemId:"closeBtnRow",height:50,width:"100%",items:[{itemId:"closeBtn",cls:"pointerCursor",right:0,top:0,margin:10,height:25,width:25,style:{backgroundImage:"url('resources/images/reader icons/close-ic.png')",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}]},{itemId:"imageCarousel",height:"40%",width:"100%",xtype:"carousel",style:"background-color:rgb(75,75,75)"},{itemId:"galleryCounterPanel",width:"100%",height:50,layout:"hbox",items:[{itemId:"previous",height:30,width:30,margin:10,cls:"pointerCursor"},{itemId:"counterPanel",height:"100%",layout:{type:"hbox",pack:"center"},style:{color:"white"},items:[{itemId:"cameraIcon",height:30,width:30,margin:10,style:{backgroundImage:"url('resources/images/reader icons/photo-ic.png')",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},{itemId:"counter",height:50,layout:{type:"vbox",pack:"center"},items:[{itemId:"text"}]}]},{itemId:"next",width:30,height:30,margin:10,cls:"pointerCursor"}]},{itemId:"galleryInfo",width:"100%",padding:10,layout:"vbox",scrollable:{direction:"vertical",indicators:false},style:{color:"white"},items:[{itemId:"title",style:{fontSize:"25px",fontWeight:"bold"},margin:"10 0"},{itemId:"caption",style:{fontSize:"14px"},margin:"10 0"}]},{itemId:"imageScroller",scrollable:{direction:"horizontal"},height:150,width:"100%",layout:"hbox",padding:10}]},{itemId:"landscape",height:"100%",width:"100%",layout:"vbox",items:[{itemId:"closeBtnRow",height:50,width:"100%",items:[{itemId:"counterPanel",height:"100%",layout:{type:"hbox",pack:"center"},style:{color:"white"},items:[{itemId:"cameraIcon",height:30,width:30,margin:10,style:{backgroundImage:"url('resources/images/reader icons/photo-ic.png')",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},{itemId:"counter",height:50,layout:{type:"vbox",pack:"center"},items:[{itemId:"text"}]}]},{itemId:"closeBtn",cls:"pointerCursor",right:0,top:0,margin:10,height:25,width:25,style:{backgroundImage:"url('resources/images/reader icons/close-ic.png')",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}]},{itemId:"galleryPanel",layout:"hbox",width:"100%",items:[{itemId:"previous",width:30,height:"100%",margin:"0 10 0 10",cls:"pointerCursor"},{itemId:"imageCarousel",xtype:"carousel",height:"100%",style:"background-color:rgb(75,75,75)"},{itemId:"next",width:30,height:"100%",margin:"0 10 0 10",cls:"pointerCursor"}]},{height:50,width:"100%"},{itemId:"imageScroller",scrollable:{direction:"horizontal"},height:150,width:"100%",layout:"hbox",padding:10,style:{backgroundColor:"rgba(0,0,0,0.7)"}}]}]},initialize:function(){var b=this;if(b.config.article!=null){b.article=b.config.article}if(b.config.images!=null){b.images=b.config.images}if(b.config.dynamicview!=null){b.dynamicview=b.config.dynamicview}if(b.dynamicview||b.dynamicview==null){b.setCentered(true)}b.portraitImagesLoaded=false;b.landscapeImagesLoaded=false;b.portrait=b.getComponent("portrait");b.landscape=b.getComponent("landscape");b.porGalleryInfo=b.portrait.getComponent("galleryInfo");b.porImageCarousel=b.portrait.getComponent("imageCarousel");b.porGalleryCounterPanel=b.portrait.getComponent("galleryCounterPanel");b.porImageScroller=b.portrait.getComponent("imageScroller");b.title=b.porGalleryInfo.getComponent("title");b.caption=b.porGalleryInfo.getComponent("caption");b.title.setHtml(b.article.headline);b.porCounterPanel=b.porGalleryCounterPanel.getComponent("counterPanel");b.porCounter=b.porCounterPanel.getComponent("counter");b.landCloseBtnRow=b.landscape.getComponent("closeBtnRow");b.landCounterPanel=b.landCloseBtnRow.getComponent("counterPanel");b.landCounter=b.landCounterPanel.getComponent("counter");b.landGalleryPanel=b.landscape.getComponent("galleryPanel");b.landImageCarousel=b.landGalleryPanel.getComponent("imageCarousel");b.landImageScroller=b.landscape.getComponent("imageScroller");b.porImageCarousel.on({activeitemchange:b.handleItemChange,scope:b});b.landImageCarousel.on({activeitemchange:b.handleItemChange,scope:b});b.scrollerHidden=true;b.landImageCarousel.element.on({tap:b.toggleScroller,scope:b});if(!b.portraitImagesLoaded){for(var a in b.images){var c=Ext.create("InfinityMobile.view.ReaderImageGalleryItem",{image:b.images[a],position:a});b.porImageCarousel.add(c);var d=Ext.create("InfinityMobile.view.ReaderImageGalleryThumb",{cls:"pointerCursor",url:b.images[a].url,carousel:b.porImageCarousel,index:a,style:{transition:"all ease 0.5s"}});if(a==0){d.element.dom.style.border="2px solid white"}b.porImageScroller.add(d)}b.portraitImagesLoaded=true}if(!b.landscapeImagesLoaded){for(var a in b.images){var c=Ext.create("InfinityMobile.view.ReaderImageGalleryItem",{image:b.images[a],position:a});b.landImageCarousel.add(c);var d=Ext.create("InfinityMobile.view.ReaderImageGalleryThumb",{cls:"pointerCursor",url:b.images[a].url,carousel:b.landImageCarousel,index:a,style:{transition:"all ease 0.5s"}});if(a==0){d.element.dom.style.border="2px solid white"}b.landImageScroller.add(d)}b.landscapeImagesLoaded=true}if(b.returnOrientation()=="portrait"){b.portraitSetup()}else{b.landscapeSetup()}Ext.Viewport.on({orientationchange:function(){var e=this;console.log("ROTATED");if(e.returnOrientation()=="portrait"){e.portraitSetup()}else{e.landscapeSetup()}},scope:b});b.on({painted:function(){b.fireEvent("galleryVisible")},destroy:function(){b.fireEvent("galleryInvisible")}})},handleItemChange:function(b,d,a){var c=this;if(c.images!=null){c.porCounter.setHtml((parseFloat(d.position)+1)+" of "+c.images.length);c.landCounter.setHtml((parseFloat(d.position)+1)+" of "+c.images.length);c.caption.setHtml("");if(c.article.images[d.position].caption!=null){if(c.article.images[d.position].caption.trim().length>0){c.caption.setHtml(c.article.images[d.position].caption)}else{if(c.article.shortStory!=null){c.caption.setHtml(c.article.shortStory)}}}else{if(c.article.shortStory!=null){c.caption.setHtml(c.article.shortStory)}}}if(c.porImageScroller.getItems().items[d.position]!=null){c.porImageScroller.getItems().items[d.position].element.dom.style.border="2px solid white";c.porImageCarousel.setActiveItem(parseFloat(d.position))}if(a!=null){if(c.porImageScroller.getItems().items[a.position]!=null){c.porImageScroller.getItems().items[a.position].element.dom.style.border=""}}if(c.landImageScroller.getItems().items[d.position]!=null){c.landImageScroller.getItems().items[d.position].element.dom.style.border="2px solid white";c.landImageCarousel.setActiveItem(parseFloat(d.position))}if(a!=null){if(c.landImageScroller.getItems().items[a.position]!=null){c.landImageScroller.getItems().items[a.position].element.dom.style.border=""}}},portraitSetup:function(){var a=this;a.landscape.hide();a.portrait.show();a.closeBtnRow=a.portrait.getComponent("closeBtnRow");a.closeBtn=a.closeBtnRow.getComponent("closeBtn");a.closeBtn.element.on({tap:function(){var b=this;b.destroy()},scope:a});a.previousBtn=a.porGalleryCounterPanel.getComponent("previous");a.previousBtn.setStyle({backgroundImage:"url('resources/images/reader icons/gallery-back-ic.png')",backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat"});a.nextBtn=a.porGalleryCounterPanel.getComponent("next");a.nextBtn.setStyle({backgroundImage:"url('resources/images/reader icons/gallery-next-ic.png')",backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat"});a.previousBtn.element.on({tap:a.previous,scope:a});a.nextBtn.element.on({tap:a.next,scope:a});a.portraitPainted()},portraitPa100)},landscapeed()},toggleScrrue}},landscapePainted:function(){var a=this;a.landImageCarousel.setHeight($(document).height()-100);a.nextBtn.setHeight($(document).height()-100);a.previousBtn.setHeight($(document).height()-100);a.landImageCarousel.setWidth($(document).width()-100)},next:function(){var a=this;if(a.returnOrientation()=="portrait"){a.porImageCarousel.next()}else{a.landImageCarousel.next()}},pres()}},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},getP(1)}}},0,["dynamicimagegallery"],["component","container","dynamicimagegallery"],{component:true,container:true,dynamicimagegallery:true},["widget.dynamicimagegallery"],0,[InfinityMobile.view.tablet,"ImageGallery"],0));(Ext.cmd.derive("InfinityMobile.view.tablet.ReaderOGallery",Ext.Container,{config:{fullscreen:true,modal:true,style:"background-color:black;",height:"100%",width:"100%",zIndex:99999999,layout:{type:"vbox"},items:[{itemId:"content",flex:1,width:"100%",layout:{type:"vbox"},items:[{itemId:"closeBtn",right:10,top:10,width:40,height:40,cls:"backgroundImage pointerCursor",style:"background-image:url('resources/images/article-close-btn-white.png');background-size:contain;"},{itemId:"images",directionLock:true,flex:6,width:"100%",style:"background-color:black;"},{itemId:"caption",width:"100%",style:"background-color:#333333;color:white;padding: 10px;max-height:200px;min-height:40px;",flex:1,scrollable:{directionLock:true,direction:"vertical"}}]},{itemId:"navBar",docked:"bottom",height:40,width:"100%",layout:{type:"hbox",pack:"center",align:"middle"},items:[{itemId:"prev",width:25,style:"text-align:center",html:'<i class="fa fa-angle-left fa-lg" aria-hidden="true"></i>'},{itemId:"counter",margin:"0px 20px 0px 20px"},{itemId:"next",width:25,style:"text-align:center",html:'<i class="fa fa-angle-right fa-lg" aria-hidden="true"></i>'}]}]},initialize:function(){var d=this;d.content=d.getComponent("content");d.navBar=d.getComponent("navBar");d.navBar.setStyle({backgroundColor:"#"+settings.topbar.backgroundColor,color:"#"+settings.topbar.color});if(d.config.article!=null){d.article=d.config.article}d.previousBtn=d.navBar.getComponent("prev");d.nextBtn=d.navBar.getComponent("next");d.counter=d.navBar.getComponent("counter");if(d.config.url!=null){d.url=d.config.url;d.captions=[];d.content.getComponent("closeBtn").element.on({tap:"close",scope:d});var g=Ext.create("InfinityMobile.view.ReaderOGalleryLoading",{});if(d.url.indexOf("http://")!=-1){var b=d.url.substring(7,d.url.length)}else{b=d.url}b="../../Newsday/getatex.aspx?url=http://www.newsday.com/iosfeeds/"+b+"?device=tablet&_dc=1445010088130&limit=25";$.ajax({type:"GET",url:b,data:{get_param:"value"},dataType:"json",complete:function(){g.destroy()},success:function(k){var h=[];for(var j=0;j<k.content.images.length;j++){var m={imageUrl:k.content.images[j].image_path,pageNo:j,config:{pageNo:j}};d.captions[j]=k.content.images[j].caption;h[h.length]=m}d.counter.setHtml("1 of "+d.captions.length);d.setupCarousel(h);d.itemChange(d.carousel);d.data=k;var l="1 of "+d.captions.length;d.fireEvent("ogalleryinitialized",d,k,l)}})}else{if(d.config.images!=null){d.images=d.config.images;d.captions=[];d.content.getComponent("closeBtn").element.on({tap:"close",scope:d});var g=Ext.create("InfinityMobile.view.ReaderOGalleryLoading",{});var a=[];for(var c=0;c<d.images.length;c++){var e={imageUrl:d.images[c].url,pageNo:c,config:{pageNo:c}};a[a.length]=e;var f="";if(d.images[c].credit!=null){if(d.images[c].credit.trim().length>0){f=" ("+d.images[c].credit+")"}}d.captions[c]=d.images[c].caption+f}g.destroy();d.counter.setHtml("1 of "+d.captions.length);d.setupCarousel(a);d.on("paisel)})}}d.previousBtn.element.on({tap:function(){d=this;d.carousel.previous()},scope:d});d.nextBtn.element.onxt()},scope:d})},close:function(){var a=this;a.fireEvent("closeOGallery",a)},setupCar:b})},itemChange:function(c,l,b,h){var k=this;k.index=k.carousel.getActiveItem().getPageNo();if(k.captions[k.index]!=null&&k.captions[k.index].trim().length>0){k.content.getComponent("caption").setHtml("<div class=\"captionText\" style='width:100%;color:white;padding:10px;'><p>"+k.captions[k.index]+"</p></div>");k.content.getComponent("caption").show()}else{k.content.getComponent("caption").hide()}var d=$(k.element.dom).find(".captionText");if(d.length>0){var j=$(d[0]).height();if(j>120){k.content.getComponent("caption").setHeight(140)}else{k.content.getComponent("caption").setHeight(j+20)}}k.content.getComponent("caption").getScrollable().getScroller().scrollTo(0,0);k.counter.setHtml((c.getActiveItem().getPageNo()+1)+" of "+k.captions.length);var g=(c.getActiveItem().getPageNo()+1)+" of "+k.captions.length;if(k.url!=null){if(k.data!=null){k.fireEvent("ogalleryinitialized",k,k.data,g)}}else{var a=k.article.byline;if(k.article.reporters!=null&&k.article.reporters.length>0){for(var f in k.article.reporters){a+=", "+k.article.reporters[f].name}}var e={author:a,contentTitle:k.article.headline,contentType:"photolist"};k.fireEvent("ogalleryinitializedArticle",k,e,g)}}},0,["readerogallery"],["component","container","readerogallery"],{component:true,container:true,readerogallery:true},["widget.readerogallery"],0,[InfinityMobile.view.tablet,"ReaderOGallery"],0));(Ext.cmd.derive("InfinityMobile.profile.tablet",Ext.app.Profile,{config:{name:"tablet",views:["SplashScreen","ReaderHelper","ReaderMenu","ReaderMenuSection","ReaderArchive","ReaderSearch","ReaderDownload","ReaderArticlePopover","ReaderWhatsNew","Interstitial","ArticlePopoverAd","ArticlePopoverInterstitial","ReaderBannerAd","ReaderBookmark","ClippingArea","ImageGallery","SectionListOverlay","ZonesOverlay","ArticlesContainer","ReaderPuzzlePopoverItem","ReaderOGallery"]},isAblet}},0,0,0,0,0,0,[InfinityMobile.profile,"tablet"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderSpecialSupplements",InfinityMobile.view.Overlay,{config:{id:"supplementscontainer",width:700,height:"100%",style:"padding:0px;max-height:700px;",layout:"vbox",items:[{itemId:"toolBar",height:40,style:"background-color:#e6e6e6",items:[{top:10,left:10,html:"<b>Special Supplements</b>"},{id:"toolBarClose",top:8,right:8,cls:"pointerCursor",html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"bodyContainer",padding:"20",layout:"vbox",flex:1,style:"font-size:15px",items:[{itemId:"itemsContainer",flex:1,scrollable:{direction:"vertical",directionLock:true},defaults:{width:150,margin:"0 8 16 7",cls:"archiveitemphone"}}]}]},initi",b)},setCloseLis()})},",a)}},0,["readerspecialsupplements"],["component","container","panel","overlay","readerspecialsupplements"],{component:true,container:true,panel:true,overlay:true,readerspecialsupplements:true},["widget.readerspecialsupplements"],0,[InfinityMobile.view.desktop,"ReaderSpecialSupplements"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderMenu",InfinityMobile.view.Overlay,{config:{width:250,layout:"vbox",style:"background-color:#1e1e1e;padding:0; border-radius:0; height:calc(100% - 40px)",right:0,top:40,items:[{itemId:"menuLayout",style:"background-color:#1e1e1e;",layout:"vbox",height:"100%",defaults:{margin:15},scrollable:{direction:"vertical",directionLock:true},items:[{id:"menuShare",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray;",margin:"0 0 0 0",padding:"10 15 10 15",text:"EDITION OPTIONS",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/minimise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"editionOptionsSection",style:"overflow:hidden;",margin:"0 0 0 0",layout:"vbox",defaults:{padding:15},minimized:false,items:[{id:"menuArchive",xtype:"readermenuitem",text:"Archive"},{id:"menuDownload",xtype:"readermenuitem",text:"Download"},{id:"menuSharing",xtype:"readermenushare"}]},{itemId:"menuQuickLinksContainer",layout:"vbox",margin:0,defaults:{padding:15}},{id:"menuInfo",xtype:"readermenuitem",style:"background-color:#2c2f32;font-size:14px;color:#cccccc;border-bottom:0.5px solid gray;",margin:"0 0 0 0",padding:"10 15 10 15",text:"INFO",items:[{itemId:"toggleSection",right:15,height:16,width:16,top:10,style:"background-image:url('resources/images/reader icons/maximise-menu-option.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"menuInfoContainer",layout:"vbox",margin:0,defaults:{padding:15},style:"overflow:hidden;",minimized:true,height:0,items:[{id:"menuHelp",xtype:"readermenuitem",text:"Contact Us"}]}]}]},initi:f})},head')"}},checkWhatsNewBanner:function(){var c=this;var a=c.whatsNewContainer.element.down(".bannerIcon").dom;try{if(localStorage.getItem("versionwhatsnew"+version.replace(/g./g,"_"))!=null){a.style.display="none"}}catch(b){}},loadShare:function(){var a=this;a.fireEvent("loadShare",a)}},0,["articlereadermenu"],["component","container","panel","overlay","articlereadermenu"],{component:true,container:true,panel:true,overlay:true,articlereadermenu:true},["widget.articlereadermenu"],0,[InfinityMobile.view.desktop,"ArticleReaderMenu"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderItemInterstitialContainer",Ext.Container,{config:{cls:"articlereaderiteminterstitialcontainer",layout:{type:"hbox"},style:"margin: 50px;display:inline;"},initialize:function(){var a=this;a.setStyle("height:"+($(document).height()-120)+"px;")},onResize:function(){var a=this;if(a!=null){a.setStyle("height:"+($(document).height()-120)+"px;")}}},0,["articlereaderiteminterstitialcontainer"],["component","container","articlereaderiteminterstitialcontainer"],{component:true,container:true,articlereaderiteminterstitialcontainer:true},["widget.articlereaderiteminterstitialcontainer"],0,[InfinityMobile.view.desktop,"ArticleReaderItemInterstitialContainer"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderItemInterstitial",Ext.Panel,{config:{style:"padding:5px",cls:"articlereaderiteminterstitial",items:[{itemId:"advert",cls:"advert"}]},initi"}}}},loadAD)})},onResize:function(){var a=this;a.onResizeFn()}},0,["articlereaderiteminterstitial"],["component","container","panel","articlereaderiteminterstitial"],{component:true,container:true,panel:true,articlereaderiteminterstitial:true},["widget.articlereaderiteminterstitial"],0,[InfinityMobile.view.desktop,"ArticleReaderItemInterstitial"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderItemWeatherTile",Ext.Container,{config:{cls:"articlereaderitemweathertile",style:"float:left;z-index:6;background-color:#90A4B0;",layout:"vbox",items:[{itemId:"title",layout:"vbox",style:"position:absolute;top:0px;left:0px;z-index:10;",items:[{html:"<p class='.thirteen' style='color:white;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;padding:20px 0px 0px 20px;'>WEATHER</p>"},{itemId:"location"},{html:"<p class='ten' style='color:white;font-family:Open Sans, sans-serif;font-size:10px;font-weight:normal;padding:5px 0px 0px 20px;'>Source: BBC Weather</p>"}]},{itemId:"toggle",layout:"hbox",padding:20,style:"position:absolute;top:0px;right:0px;z-index:10;",items:[{html:"<p style='color:white;font-size:13px;padding-right:5px;padding-top:0.2em;'>&deg;C</p>"},{cls:"toggle",itemId:"toggleField",xtype:"togglefield",style:"background:transparent;"},{html:"<p style='color:white;font-size:13px;padding-left:5px;padding-top:0.2em;'>&deg;F</p>"}]},{itemId:"weather",width:"100%",layout:"hbox"},{itemId:"extraDetails",width:"100%",layout:"hbox"}]},initi)}})},,5)}},onResize:function(){var a=this;a.onResizeFn()}},0,["articlereaderitemweathertile"],["component","container","articlereaderitemweathertile"],{component:true,container:true,articlereaderitemweathertile:true},["widget.articlereaderitemweathertile"],0,[InfinityMobile.view.desktop,"ArticleReaderItemWeatherTile"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderItemTopStoryItem",Ext.Panel,{config:{style:"float:left;z-index:6;",layout:"vbox",items:[{itemId:"image",bottom:0,top:0,left:0,right:0,cls:"backgroundImage aspectfill"},{itemId:"title",style:"background-color:rgba(0,0,0,0.5); color:white; font-size:20px; font-weight:bold",bottom:0,top:0,left:0,right:0,height:"100%",padding:10}]},initi:a})},setBackgroundImage:function(){var c=this;var a=c.article.images;c.firstImage=a[0];c.imageContainer.element.dom.style.backgroundImage="url('"+c.firstImage.url+"')";c.titleContainer.setStyle("color:white;padding:5px;left:0px;right;0px;top:0px;bottom:0px;");c.titleContainer.element.dom.style.height="";c.imageContainer.element.dom.style.backgroundSize="cover";c.imageContainer.element.dom.style.backgroundPosition="50% 0%";c.imageContainer.element.dom.style.backgroundColor="gray";c.sectionStr="";c.imageAspect=false;if(c.article.sections.length>1){for(var b=0;b<c.article.sections.length;b++){c.sectionStr+=c.article.sections[b]+"/"}c.sectionStr=c.sectionStr.substring(0,c.sectionStr.length-1)}else{if(c.article.sections[0]!=null){c.sectionStr=c.article.sections[0]}}c.titleContainer.setHtml("<div class='tileText' style='word-wrap:break-word;position:absolute;bottom:10px;right:10px;left:10px;' ><p style='color:white;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+c.sectionStr+"</p><p style='font-family:Open Sans, sans-serif;font-size:28px;font-weight:semibold;'>"+c.article.headline+"</p><p style='font-family:Open Sans, sans-serif;font-size:14px;font-weight:semibold;'>"+c.article.subHeadline+"</p><p style='font-family:Open Sans, sans-serif;font-size:13px;font-weight:normal;>"+c.article.byline+"</p></div>");c.image=new Image();c.image.src=c.firstImage.url;c.image.onload=function(){var g=c.image.naturalWidth/c.image.naturalHeight;var e=$(c.element.dom).width()/$(c.element.dom).height();if(g<1.25&&e>1.25){c.imageAspect=true;var f=$(c.element.dom).height()/c.image.naturalHeight;var d=c.image.naturalWidth*f;if(d>$(c.element.dom).width()/2){c.imageContainer.element.dom.style.backgroundSize="50%";c.imageContainer.element.dom.style.backgroundPosition="0% 50%"}else{c.imageContainer.element.dom.style.backgroundSize=" auto 100%";c.imageContainer.element.dom.style.backgroundPosition="0% 0%"}c.titleContainer.element.down(".tileText").dom.style.bottom="";c.titleContainer.element.down(".tileText").dom.style.top="50%";c.titleContainer.element.down(".tileText").dom.style.left="55%";c.titleContainer.element.down(".tileText").dom.style.transform="translate(0%, -50%)"}}},setNoImage:function(){var e=this;e.titleContainer.resetFloating();e.titleContainer.setStyle("background-color:#EEEEEE; color:black;");var d="";if(e.article.sections.length>1){for(var c=0;c<e.article.sections.length;c++){d+=e.article.sections[c]+"/"}d=d.substring(0,d.length-1)}else{if(e.article.sections[0]!=null){d=e.article.sections[0]}}if(e.article.shortStory!=null){var a=e.article.shortStory.replace("<div></div>","");if(a==null){a=""}}else{var a=""}var f=Ext.create("Ext.Container",{itemId:"title",html:"<p class='sectionText' style='color:#B2272A;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+d+"</p><p class='headlineText' style='font-family:Open Sans, sans-serif;font-size:28px;font-weight:semibold;padding-top:5px;padding-bottom:5px;'>"+e.article.headline+"</p><p class='subheadlineText' style='font-family:Open Sans, sans-serif;font-size:14px;font-weight:semibold;padding-bottom:5px;'>"+e.article.subHeadline+"</p><p class='bylineText' style='font-family:Open Sans, sans-serif;font-size:13px;font-weight:normal;padding-bottom:5px;'>"+e.article.byline+"</p><p class='shortStory' style='font-family:Open Sans, sans-serif;font-size:12px;font-weight:normal;'>"+a+"</p>",items:[{itemId:"sharing",top:-20,right:0,defaults:{style:"float:right;",height:30,width:30}}]});f.element.on({parue}},scope:e});e.titleContainer.add(f);if(e.article.body!=null){if(e.article.body.indexOf("<p>")!=-1){e.article.body=e.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}}if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var b=localStorage.getItem("bodyFontSize"+publicationguid)}else{var b=16}e.titleContainer.add(Ext.create("Ext.Container",{itemId:"articleBody",cls:"articleText",flex:1,width:"100%",html:e.article.body,style:"overflow:hidden;font-size:"+b+"px;font-weight:normal;font-family:Open Sans, sans-serif;z-index:16;",hidden:true,overflow:"hidden",layout:{type:"vbox"}}))},resize:function(){var e=this;var h=e.titleContainer.getComponent("title");if(h!=null){var a=h.element.down(".sectionText").dom.clientHeight+h.element.down(".headlineText").dom.clientHeight+h.element.down(".subheadlineText").dom.clientHeight+h.element.down(".bylineText").dom.clientHeight;var c=$(this.element.dom).height()-a;h.element.down(".shortStory").dom.style.maxHeight=(c-(c%14)-26)+"px";if(parseFloat(h.element.down(".bylineText").dom.clientHeight)+parseFloat(h.element.down(".bylineText").dom.offsetTop)>=$(this.element.dom).height()-20){h.element.down(".bylineText").dom.style.visibility="hidden";e.bylineHidden=true}else{h.element.down(".bylineText").dom.style.visibility="";e.bylineHidden=false}if(parseFloat(h.element.down(".subheadlineText").dom.clientHeight)+parseFloat(h.element.down(".subheadlineText").dom.offsetTop)>=$(this.element.dom).height()-20){h.element.down(".subheadlineText").dom.style.visibility="hidden";e.subheadlineHidden=true}else{h.element.down(".subheadlineText").dom.style.visibility="";e.subheadlineHidden=false}}if(e.hasImage){var g=e.image.naturalWidth/e.image.naturalHeight;var d=$(e.element.dom).width()/$(e.element.dom).height();if(g<1.3&&d>1.25){e.imageAspect=true;var f=$(e.element.dom).height()/e.image.naturalHeight;var b=e.image.naturalWidth*f;if(b>$(e.element.dom).width()/2){e.imageContainer.element.dom.style.backgroundSize="50%";e.imageContainer.element.dom.style.backgroundPosition="0% 50%"}else{e.imageContainer.element.dom.style.backgroundSize=" auto 100%";e.imageContainer.element.dom.style.backgroundPosition="0% 0%"}e.titleContainer.element.down(".tileText").dom.style.bottom="";e.titleContainer.element.down(".tileText").dom.style.top="50%";e.titleContainer.element.down(".tileText").dom.style.left="55%";e.titleContainer.element.down(".tileText").dom.style.transform="translate(0%, -50%)"}else{e.imageAspect=false;e.imageContainer.element.dom.style.backgroundSize="cover";e.imageContainer.element.dom.style.backgroundPosition="50% 0%";e.imageContainer.element.dom.style.backgroundColor="gray";e.titleContainer.element.down(".tileText").dom.style.bottom="10px";e.titleContainer.element.down(".tileText").dom.style.top="";e.titleContainer.element.down(".tileText").dom.style.left="10px";e.titleContainer.element.down(".tileText").dom.style.transform=""}}},setupSharing:function(f){var h=this;if(f){h.sharingImage.removeAll()}else{h.sharingContainer.removeAll()}var d=Ext.getStore("SettingStore");var a=d.data.items[0].raw.sharing;if(h.hasImage){var e=Ext.create("InfinityMobile.view.desktop.ArticleReaderFullscreenGalleryIcon",{padding:5,images:h.article.images,article:h.article});h.sharingImage.add(e);var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"white",tile:h});h.sharingImage.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"white",tile:h});h.sharingImage.add(k)}else{var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"black",tile:h});h.sharingContainer.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"black",tile:h});h.sharingContainer.add(k)}if(a.pinterest!=null){if(f){var j=a.pinterest.icon;var c=h.sharingImage}else{var j=a.pinterest.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.pinterest.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.googlePlus!=null){if(f){var j=a.googlePlus.icon;var c=h.sharingImage}else{var j=a.googlePlus.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.googlePlus.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.linkedIn!=null){if(f){var j=a.linkedIn.icon;var c=h.sharingImage}else{var j=a.linkedIn.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.linkedIn.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.twitter!=null){if(f){var j=a.twitter.icon;var c=h.sharingImage}else{var j=a.twitter.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.twitter.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.facebook!=null){if(f){var j=a.facebook.icon;var c=h.sharingImage}else{var j=a.facebook.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.facebook.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.email!=null){if(f){var j=a.email.icon;var c=h.sharingImage}else{var j=a.email.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.email.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}},onTap:function(j){var m=this;var p=m.parent.parent.element;var n=m.titleContainer.getComponent("title");var q=false;if(q){m.fireEvent("articleClick",m.article,m.article.guid)}else{if(!m.hasImage&&!m.expand){if(m.titleContainer.getComponent("articleBody")!=null){if(m.titleContainer.getComponent("articleBody").isHidden()){m.titleContainer.getComponent("articleBody").show()}else{m.titleContainer.getComponent("articleBody").hide()}}}clearInterval(m.timer);if(!m.expand){m.fireEvent("tileTapped",m);m.titleContainer.setPadding(40);if(m.titleContainer.getComponent("title")!=null){var h=m.element.down(".bylineText");if(h!=null){$(h.dom).attr("class","byline");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px")}var b=m.element.down(".headlineText");if(b!=null){$(b.dom).attr("class","headline");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var l=localStorage.getItem("headlineFontSize"+publicationguid)}else{var l=32}$(".headline").css("font-size",l+"px")}var k=m.element.down(".subheadlineText");if(k!=null){$(k.dom).attr("class","subheadline");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px")}var o=m.element.down(".sectionText");if(o!=null){$(o.dom).attr("class","section");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px")}}if(m.article.body.indexOf("<p>")!=-1){m.article.body=m.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}if(m.hasImage){m.articlePop=Ext.create("Ext.Container",{height:"100%",width:"100%",style:"background-color:#929292;z-index:16;",overflow:"scroll",layout:{type:"vbox"},scrollable:{direction:"vertical",directionLock:true,indicators:false},items:[{itemId:"image",width:"100%",height:(p.dom.scrollHeight),cls:"backgroundImage aspectfill"},{itemId:"title",width:"100%",style:"color:white;background-color:#929292",height:"auto",padding:5,html:"<p class='section' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:bold;'>"+m.sectionStr+"</p><p class='headline' style='font-family:Open Sans, sans-serif;font-size:32px;font-weight:bold;padding-top:5px;padding-bottom:5px;'>"+m.article.headline+"</p><p class='subheadline' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:bold;padding-bottom:5px;'>"+m.article.subHeadline+"</p><p class='byline' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:normal;padding-bottom:5px;>"+m.article.byline+"</p><p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;'>"+m.article.body+"</p>",items:[{itemId:"sharing",top:20,right:40,defaults:{style:"float:right;",height:30,width:30}}]}]});var r=m.articlePop.getComponent("title").element.down("div");r.dom.style.padding="40px";m.sharingImage=m.articlePop.getComponent("title").getComponent("sharing");m.setupSharing(true);m.sharingImage.show();m.imageContainer.hide();m.titleContainer.hide();m.articlePop.getComponent("image").element.dom.style.background="url('"+m.firstImage.url+"')";if(m.imageAspect){m.articlePop.getComponent("image").element.dom.style.backgroundSize="contain";m.articlePop.getComponent("image").element.dom.style.backgroundPosition="center"}else{m.articlePop.getComponent("image").element.dom.style.backgroundSize="cover";m.articlePop.getComponent("image").element.dom.style.backgroundPosition="50% 0%"}m.add(m.articlePop);if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var a=localStorage.getItem("bodyFontSize"+publicationguid)}else{var a=16}$(".articleText").css("font-size",a+"px");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var l=localStorage.getItem("headlineFontSize"+publicationguid)}else{var l=32}$(".headline").css("font-size",l+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px");m.articlePop.getComponent("title").element.dom.style.position="relative";m.articlePop.getComponent("title").element.down("div").dom.style.width="758px";if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){m.articlePop.setScrollable(false);m.desktopScroll=m.element.down(".x-scroll-view");if(m.desktopScroll!=null){m.desktopScroll.dom.style.overflowY="scroll";m.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(m.desktopScroll.down(".x-scroll-container")!=null){$(m.element.dom).on("animationend",function(){m.desktopScroll.down(".x-scroll-container").dom.style.height=(m.articlePop.items.items[0].element.dom.clientHeight+m.articlePop.items.items[1].element.dom.clientHeight+40)+"px"})}}m.stopPropFunction=function(s){s.stopPropagation()};m.element.dom.onmousewheel=m.stopPropFunction;m.element.dom.addEventListener("DOMMouseScroll",m.stopPropFunction)}}else{m.articlePop.getScrollable().getScroller().on({scroll:function(v){var u=m.articlePop.getComponent("image").element.dom.style.height.substring(0,m.articlePop.getComponent("image").element.dom.style.height.length-2);var t=m.articlePop.getScrollable().getScroller().position.y;var s=m.articlePop.getComponent("image").element.dom.style.height.substring(0,m.articlePop.getComponent("image").element.dom.style.height.length-2);if(((u-t)/s)>0){m.articlePop.getComponent("image").element.dom.style.top=(t)+"px";m.articlePop.getComponent("image").element.dom.style.opacity=((u-t)/s)}}})}}else{if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){m.titleContainer.setScrollable(false);m.desktopScroll=m.element.down(".x-scroll-view");if(m.desktopScroll!=null){m.desktopScroll.dom.style.overflowY="scroll";m.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(m.desktopScroll.down(".x-scroll-container")!=null){$(m.element.dom).on("animationend",function(){if(m.desktopScroll.down(".x-scroll-indicator-dark")!=null){m.desktopScroll.down(".x-scroll-indicator-dark").dom.style.display="none"}m.desktopScroll.down(".x-scroll-container").dom.style.height=(m.titleContainer.items.items[0].element.dom.clientHeight+m.titleContainer.items.items[1].element.dom.clientHeight+40)+"px"})}}m.stopPropFunction=function(s){s.stopPropagation()};m.element.dom.onmousewheel=m.stopPropFunction;m.element.dom.addEventListener("DOMMouseScroll",m.stopPropFunction)}}else{m.titleContainer.setScrollable(true);m.titleContainer.getScrollable().getScroller().setDirectionLock(true);var f=m.titleContainer.getScrollable().getScroller()}m.titleContainer.element.dom.style.zIndex=14;if(m.sharingContainer=m.titleContainer.getComponent("title")!=null){m.sharingContainer=m.titleContainer.getComponent("title").getComponent("sharing");m.sharingContainer.show();m.setupSharing(false);m.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="none"}if(m.bylineHidden){console.log(m.bylineHidden);n.element.down(".bylineText").dom.style.visibility=""}if(m.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility=""}}m.element.dom.style.position="absolute";m.element.dom.style.left="0px",m.element.dom.style.top="0px";p.dom.style.zIndex=8;m.expand=true;p.dom.style.animation=m.expandAnim;m.element.dom.style.animationFillMode="forwards"}else{if(j.target.className.indexOf("x-scroll-view")==-1){if(m.hasImage){m.titleContainer.setPadding(10);if(m.sharingImage!=null){m.sharingImage.hide()}if(m.sharingContainer!=null){if(m.sharingContainer.hide!=null){m.sharingContainer.hide()}}if(m.titleContainer.getComponent("title")!=null){m.titleContainer.setScrollable(false);if(m.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){m.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}if(m.articlePop!=null){m.articlePop.destroy()}m.imageContainer.show();m.titleContainer.show();if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(m.desktopScroll!=null){if(m.desktopScroll.dom!=null){m.desktopScroll.dom.style.overflowY=""}m.element.dom.onmousewheel=null;m.element.dom.removeEventListener("DOMMouseScroll",m.stopPropFunction)}}m.expand=false;p.dom.style.animation=m.shrinkAnim;setTimeout(function(){m.element.dom.style.zIndex=4},300)}else{m.titleContainer.setPadding(10);if(m.sharingImage!=null){m.sharingImage.hide()}if(m.sharingContainer!=null){if(m.sharingContainer.hide!=null){m.sharingContainer.hide()}}if(m.titleContainer.getComponent("title")!=null){m.titleContainer.setScrollable(false);if(m.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){m.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="28px"}if(m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){m.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}var b=m.element.down(".headline");if(b!=null){$(b.dom).attr("class","headlineText")}var k=m.element.down(".subheadline");if(k!=null){$(k.dom).attr("class","subheadlineText")}var h=m.element.down(".byline");if(h!=null){$(h.dom).attr("class","bylineText")}var o=m.element.down(".section");if(o!=null){$(o.dom).attr("class","sectionText")}if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(m.desktopScroll!=null){m.desktopScroll.dom.style.overflowY="";m.element.dom.onmousewheel=null;m.element.dom.removeEventListener("DOMMouseScroll",m.stopPropFunction);if(Ext.browser.is.IE){m.desktopScroll.down(".x-scroll-container").dom.style.height=""}}}if(m.titleContainer.getComponent("title")!=null){m.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display=""}if(m.bylineHidden){n.element.down(".bylineText").dom.style.visibility="hidden"}if(m.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility="hidden"}if(m.titleContainer.getComponent("articleBody")!=null){if(m.titleContainer.getComponent("articleBody").isHidden()){m.titleContainer.getComponent("articleBody").show()}else{m.titleContainer.getComponent("articleBody").hide()}}m.expand=false;p.dom.style.animation=m.shrinkAnim;setTimeout(function(){m.element.dom.style.zIndex=4},300)}}}}},liveTap:function(){var a=this;window.open(a.article.url)},setupTextSize:function(){var h=this;if(h.expand){if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var j=localStorage.getItem("headlineFontSize"+publicationguid)}else{var j=32}$(".headline").css("font-size",j+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var f=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var f=20}$(".subheadline").css("font-size",f+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px");if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var a=localStorage.getItem("bodyFontSize"+publicationguid)}else{var a=16}$(".articleText").css("font-size",a+"px")}else{if(!h.hasImage){if(h.element!=null){var b=h.element.down(".headline");if(b!=null){$(b.dom).attr("class","headlineText")}var g=h.element.down(".subheadline");if(g!=null){$(g.dom).attr("class","subheadlineText")}var e=h.element.down(".byline");if(e!=null){$(e.dom).attr("class","bylineText")}var k=h.element.down(".section");if(k!=null){$(k.dom).attr("class","sectionText")}}}}},testFunc:function(){console.log("TEST")}},0,["articlereaderitemtopstoryitem"],["component","container","panel","articlereaderitemtopstoryitem"],{component:true,container:true,panel:true,articlereaderitemtopstoryitem:true},["widget.articlereaderitemtopstoryitem"],0,[InfinityMobile.view.desktop,"ArticleReaderItemTopStoryItem"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderItemTopStories",Ext.Container,{config:{width:"768px",style:"float:left;z-index:6;background-color:black;",items:[{itemId:"leftBtn",width:30,height:66.6,style:"background-image:url('../assets/nav/left-arrow.png');position:absolute;left:5px;top:50%;transform:translateY(-50%);background-size:contain;background-repeat:no-repeat;z-index:7;"},{itemId:"carousel",xtype:"carousel",top:5,bottom:5,left:5,right:5,style:"z-index:6;"},{itemId:"rightBtn",width:30,height:66.6,style:"background-image:url('../assets/nav/right-arrow.png');position:absolute;right:5px;top:50%;transform:translateY(-50%);background-size:contain;background-repeat:no-repeat;z-index:7;"}]},initihis)},leftScroll:function(){var a=this;a.carousel.previous()},rightScroll:function(){var a=this;a.carousel.next()},handleItemC()}}},0)}}}},0,["articlereaderitemtopstories"],["component","container","articlereaderitemtopstories"],{component:true,container:true,articlereaderitemtopstories:true},["widget.articlereaderitemtopstories"],0,[InfinityMobile.view.desktop,"ArticleReaderItemTopStories"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticlePopoverItemDynamic",Ext.Container,{config:{mediaObject:"",pageNo:"",page:"",cls:"loading",style:"background-color:white",layout:"vbox",items:[{itemId:"content",flex:1,padding:"0 0 10px 0",style:"overflow-y:scroll;"}]},initint()},setContentStyle:function(){var a=this;if(currentProfile=="tablet"){a.content.setPadding("0 20px 0 20px")}},getCo}}})},removeSpinner:function(){var a=this;a.removeCls("loading")},setImages:function(){var f=this;var d=1;var c=1;var b=f.id;if(currentProfile=="tablet"){var e=$("#"+b+" img").get(0);if(e!=null){if(e.naturalWidth==0){e.onload=function(){var g=this;if(g.naturalWidth<(screen.width/2)){var h=$("#"+b+" .articleContent")[0];h.className="articleContent float"}}}}}if($("#"+b+" .contentImage").size()>1){if(currentProfile=="phone"){$("#"+b+" .nextImage")[0].childNodes[0].textContent="NEXT";$("#"+b+" .previousImage")[0].childNodes[0].textContent="PREVIOUS"}c=$("#"+b+" .contentImage").size();if(c>1){$("#"+b+" .contentImage:gt(0)").hide();$("#"+b+" .previousImage").hide();a()}else{if(c==1){$("#"+b+" .imageControls").hide()}}$("#"+b+" .nextImage").click(function(){var h=$("#"+b+" .contentImage:visible");var g=$("#"+b+" .contentImage:visible").next();h.hide();d++;a();g.fadeIn();$("#"+b+" .previousImage").show();if(g.is("#"+b+" .contentImage:last")){$("#"+b+" .nextImage").hide()}});$("#"+b+" .previousImage").click(function(){var h=$("#"+b+" .contentImage:visible");var g=$("#"+b+" .contentImage:visible").prev();h.hide();d--;a();g.fadeIn();$("#"+b+" .nextImage").show();if(g.is("#"+b+" .contentImage:first")){$("#"+b+" .previousImage").hide()}})}else{$("#"+b+" .imageControls").hide()}function a(){var g="Image "+d.toString()+" of "+c.toString();$("#"+b+" .imageCount").text(g)}}},0,["readerarticlepopoveritemdynamic"],["component","container","readerarticlepopoveritemdynamic"],{component:true,container:true,readerarticlepopoveritemdynamic:true},["widget.readerarticlepopoveritemdynamic"],0,[InfinityMobile.view.desktop,"ArticlePopoverItemDynamic"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderItemMedWideTall",Ext.Panel,{config:{padding:5,style:"float:left;background-color:white;",layout:"vbox",items:[{itemId:"image",bottom:5,top:5,left:5,right:5,cls:"backgroundImage aspectfill"},{itemId:"title",bottom:5,top:5,left:5,right:5,padding:10,style:"background-color:rgba(0,0,0,0.5); color:white; font-size:20px; font-weight:bold;",height:"100%"}]},initialize:function(){var a=this;a.article=a.config.article;a.bylineHidden=false;a.subheadlineHidden=false;a.paintedTitle=false;if(a.config.expandAnim!=null){a.expandAnim=a.config.expandAnim}if(a.config.shrinkAnim!=null){a.shrinkAnim=a.config.shrinkAnim}a.imageContainer=a.getComponent("image");a.titleContainer=a.getComponent("title");a.setStyle("height:45%;overflow:hidden;width:512px;");a.height=45;a.width=512;a.x=a.element.dom.style.left.substring(0,a.element.dom.style.left.length-2);a.y=a.element.dom.style.top.substring(0,a.element.dom.style.top.length-1);a.top=a.y;a.left=a.x;a.timer;a.timer2;a.timer3;a.timer4;a.section=a.getComponent("section");a.height=a.element.dom.clientHeight;if(a.article.images!=null){if(a.article.images.length>0){a.on("painted",a.setBackgroundImage,a,{delay:10,single:true})}else{a.setNoImage()}}else{a.setNoImage()}a.element.on({tap:"onTap",scope:a})},setBackgroundImage:function(){var c=this;var a=c.article.images;c.hasImage=true;c.firstImage=a[0];c.imageContainer.element.dom.style.backgroundImage="url('"+c.firstImage.url+"')";c.titleContainer.setStyle("color:white;padding:5px;");c.titleContainer.element.dom.style.height="";c.imageContainer.element.dom.style.backgroundSize="cover";c.imageContainer.element.dom.style.backgroundPosition="50% 0%";c.imageContainer.element.dom.style.backgroundColor="gray";c.sectionStr="";c.imageAspect=false;if(c.article.sections.length>1){for(var b=0;b<c.article.sections.length;b++){c.sectionStr+=c.article.sections[b]+"/"}c.sectionStr=c.sectionStr.substring(0,c.sectionStr.length-1)}else{if(c.article.sections[0]!=null){c.sectionStr=c.article.sections[0]}}c.titleContainer.setHtml("<div class='tileText' style='word-wrap:break-word;position:absolute;bottom:10px;right:10px;left:10px;' ><p style='color:white;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+c.sectionStr+"</p><p style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:semibold;'>"+c.article.headline+"</p></div>");c.image=new Image();c.image.src=c.firstImage.url;c.image.onload=function(){var g=c.image.naturalWidth/c.image.naturalHeight;if(c.element!=null){var e=$(c.element.dom).width()/$(c.element.dom).height();if(g<1.2&&e>1.25){c.imageAspect=true;var f=$(c.element.dom).height()/c.image.naturalHeight;var d=c.image.naturalWidth*f;if(d>$(c.element.dom).width()/2){c.imageContainer.element.dom.style.backgroundSize="50%";c.imageContainer.element.dom.style.backgroundPosition="0% 50%"}else{c.imageContainer.element.dom.style.backgroundSize=" auto 100%";c.imageContainer.element.dom.style.backgroundPosition="0% 0%"}c.titleContainer.element.down(".tileText").dom.style.bottom="";c.titleContainer.element.down(".tileText").dom.style.top="50%";c.titleContainer.element.down(".tileText").dom.style.left="55%";c.titleContainer.element.down(".tileText").dom.style.transform="translate(0%, -50%)"}}};if(c.sectionStr=="LIVE NEWS"){if(c.article.link!=null){if(c.article.link.length>0){c.article.body+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+c.article.link+"\")' onclick='window.open(\""+c.article.link+"\")'>Click here to view full story</p>"}}}},setNoImage:function(){var d=this;d.titleContainer.resetFloating();d.titleContainer.setStyle("background-color:#EEEEEE; color:black;");d.hasImage=false;d.sectionStr="";if(d.article.sections.length>1){for(var c=0;c<d.article.sections.length;c++){d.sectionStr+=d.article.sections[c]+"/"}d.sectionStr=d.sectionStr.substring(0,d.sectionStr.length-1)}else{if(d.article.sections[0]!=null){d.sectionStr=d.article.sections[0]}}if(d.article.shortStory!=null){var a=d.article.shortStory.replace("<div></div>","");if(a==null){a=""}}else{var a=""}if(d.sectionStr=="LIVE NEWS"){if(d.article.link!=null){if(d.article.link.length>0){d.article.body+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+d.article.link+"\")' onclick='window.open(\""+d.article.link+"\")'>Click here to view full story</p>"}}}var e=Ext.create("Ext.Container",{itemId:"title",html:"<p class='sectionText' style='color:#B2272A;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+d.sectionStr+"</p><p class='headlineText' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:semibold;padding-top:5px;padding-bottom:5px;'>"+d.article.headline+"</p><p class='subheadlineText' style='font-family:Open Sans, sans-serif;font-size:14px;font-weight:semibold;padding-bottom:5px;'>"+d.article.subHeadline+"</p><p class='bylineText' style='font-family:Open Sans, sans-serif;font-size:13px;font-weight:normal;padding-bottom:5px;'>"+d.article.byline+"</p><p class='shortStory' style='font-family:Open Sans, sans-serif;font-size:12px;font-weight:normal;'>"+a+"</p>",items:[{itemId:"sharing",top:-20,right:0,defaults:{style:"float:right;",height:30,width:30}}]});e.element.on({painted:function(){if(!d.paintedTitle){var f=e.element.down(".sectionText").dom.clientHeight+e.element.down(".headlineText").dom.clientHeight+e.element.down(".subheadlineText").dom.clientHeight+e.element.down(".bylineText").dom.clientHeight;var g=$(this.element.dom).height()-f;e.element.down(".shortStory").dom.style.maxHeight=(g-(g%14)-26)+"px";if(e.element.down(".bylineText").dom.clientHeight+e.element.down(".bylineText").dom.offsetTop>=$(this.element.dom).height()-20){e.element.down(".bylineText").dom.style.visibility="hidden";d.bylineHidden=true}if(e.element.down(".subheadlineText").dom.clientHeight+e.element.down(".subheadlineText").dom.offsetTop>=$(this.element.dom).height()-20){e.element.down(".subheadlineText").dom.style.visibility="hidden";d.subheadline=true}d.paintedTitle=true}},scope:d});d.titleContainer.add(e);if(d.article.body!=null){if(d.article.body.indexOf("<p>")!=-1){d.article.body=d.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}}if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var b=localStorage.getItem("bodyFontSize"+publicationguid)}else{var b=16}d.titleContainer.add(Ext.create("Ext.Container",{itemId:"articleBody",cls:"articleText",flex:1,width:"100%",html:d.article.body,style:"overflow:hidden;font-size:"+b+"px;font-weight:normal;font-family:Open Sans, sans-serif;",hidden:true,overflow:"hidden",layout:{type:"vbox"}}))},resize:function(){var e=this;var h=e.titleContainer.getComponent("title");if(h!=null){var a=h.element.down(".sectionText").dom.clientHeight+h.element.down(".headlineText").dom.clientHeight+h.element.down(".subheadlineText").dom.clientHeight+h.element.down(".bylineText").dom.clientHeight;var c=$(this.element.dom).height()-a;h.element.down(".shortStory").dom.style.maxHeight=(c-(c%14)-26)+"px";if(parseFloat(h.element.down(".bylineText").dom.clientHeight)+parseFloat(h.element.down(".bylineText").dom.offsetTop)>=$(this.element.dom).height()-20){h.element.down(".bylineText").dom.style.visibility="hidden";e.bylineHidden=true}else{h.element.down(".bylineText").dom.style.visibility="";e.bylineHidden=false}if(parseFloat(h.element.down(".subheadlineText").dom.clientHeight)+parseFloat(h.element.down(".subheadlineText").dom.offsetTop)>=$(this.element.dom).height()-20){h.element.down(".subheadlineText").dom.style.visibility="hidden";e.subheadline=true}else{h.element.down(".subheadlineText").dom.style.visibility="";e.subheadlineHidden=false}}if(e.hasImage){var g=e.image.naturalWidth/e.image.naturalHeight;var d=$(e.element.dom).width()/$(e.element.dom).height();if(g<1.2&&d>1.25){e.imageAspect=true;var f=$(e.element.dom).height()/e.image.naturalHeight;var b=e.image.naturalWidth*f;if(b>$(e.element.dom).width()/2){e.imageContainer.element.dom.style.backgroundSize="50%";e.imageContainer.element.dom.style.backgroundPosition="0% 50%"}else{e.imageContainer.element.dom.style.backgroundSize=" auto 100%";e.imageContainer.element.dom.style.backgroundPosition="0% 0%"}e.titleContainer.element.down(".tileText").dom.style.bottom="";e.titleContainer.element.down(".tileText").dom.style.top="50%";e.titleContainer.element.down(".tileText").dom.style.left="55%";e.titleContainer.element.down(".tileText").dom.style.transform="translate(0%, -50%)"}else{e.imageAspect=false;e.imageContainer.element.dom.style.backgroundSize="cover";e.imageContainer.element.dom.style.backgroundPosition="50% 0%";e.imageContainer.element.dom.style.backgroundColor="gray";e.titleContainer.element.down(".tileText").dom.style.bottom="10px";e.titleContainer.element.down(".tileText").dom.style.top="";e.titleContainer.element.down(".tileText").dom.style.left="10px";e.titleContainer.element.down(".tileText").dom.style.transform=""}}},setupSharing:function(f){var h=this;if(f){h.sharingImage.removeAll()}else{h.sharingContainer.removeAll()}var d=Ext.getStore("SettingStore");var a=d.data.items[0].raw.sharing;if(h.hasImage){var e=Ext.create("InfinityMobile.view.desktop.ArticleReaderFullscreenGalleryIcon",{padding:5,images:h.article.images,article:h.article});h.sharingImage.add(e);var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"white",tile:h});h.sharingImage.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"white",tile:h});h.sharingImage.add(k)}else{var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"black",tile:h});h.sharingContainer.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"black",tile:h});h.sharingContainer.add(k)}if(a.pinterest!=null){if(f){var j=a.pinterest.icon;var c=h.sharingImage}else{var j=a.pinterest.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.pinterest.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.googlePlus!=null){if(f){var j=a.googlePlus.icon;var c=h.sharingImage}else{var j=a.googlePlus.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.googlePlus.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.linkedIn!=null){if(f){var j=a.linkedIn.icon;var c=h.sharingImage}else{var j=a.linkedIn.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.linkedIn.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.twitter!=null){if(f){var j=a.twitter.icon;var c=h.sharingImage}else{var j=a.twitter.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.twitter.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.facebook!=null){if(f){var j=a.facebook.icon;var c=h.sharingImage}else{var j=a.facebook.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.facebook.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.email!=null){if(f){var j=a.email.icon;var c=h.sharingImage}else{var j=a.email.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.email.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}},onTap:function(j){var l=this;var n=l.titleContainer.getComponent("title");var p=false;if(p&&l.sectionStr.indexOf("LIVE NEWS")==-1){l.fireEvent("articleClick",l.article,l.article.guid)}else{if(p&&l.sectionStr.indexOf("LIVE NEWS")!=1){l.fireEvent("liveArticleClick",l.article)}else{if(!l.hasImage&&!l.expand){if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}}clearInterval(l.timer);clearInterval(l.timer2);clearInterval(l.timer3);clearInterval(l.timer);if(!l.expand){l.fireEvent("tileTapped",l);l.titleContainer.setPadding(40);if(l.titleContainer.getComponent("title")!=null){var h=l.element.down(".bylineText");if(h!=null){$(h.dom).attr("class","byline");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px")}var b=l.element.down(".headlineText");if(b!=null){$(b.dom).attr("class","headline");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px")}var k=l.element.down(".subheadlineText");if(k!=null){$(k.dom).attr("class","subheadline");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px")}var o=l.element.down(".sectionText");if(o!=null){$(o.dom).attr("class","section");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px")}}if(l.article.body.indexOf("<p>")!=-1){l.article.body=l.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}if(l.hasImage){l.articlePop=Ext.create("Ext.Container",{height:"100%",width:"100%",style:"background-color:#929292",overflow:"scroll",layout:{type:"vbox"},scrollable:{direction:"vertical",directionLock:true,indicators:false},items:[{itemId:"image",width:"100%",height:(l.imageContainer.element.dom.scrollHeight*1.2),cls:"backgroundImage aspectfill"},{itemId:"title",width:"100%",style:"color:white;background-color:#929292",height:"auto",padding:5,html:"<p class='section' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:bold;'>"+l.sectionStr+"</p><p class='headline' style='font-family:Open Sans, sans-serif;font-size:32px;font-weight:bold;padding-top:5px;padding-bottom:5px;'>"+l.article.headline+"</p><p class='subheadline' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:bold;padding-bottom:5px;'>"+l.article.subHeadline+"</p><p class='byline' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:normal;padding-bottom:5px;>"+l.article.byline+"</p><p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;'>"+l.article.body+"</p>",items:[{itemId:"sharing",top:20,right:40,defaults:{style:"float:right;",height:30,width:30}}]}]});var q=l.articlePop.getComponent("title").element.down("div");q.dom.style.padding="40px";l.sharingImage=l.articlePop.getComponent("title").getComponent("sharing");l.setupSharing(true);l.sharingImage.show();l.imageContainer.hide();l.titleContainer.hide();l.articlePop.getComponent("image").element.dom.style.background="url('"+l.firstImage.url+"')";if(l.imageAspect){l.articlePop.getComponent("image").element.dom.style.backgroundSize="contain";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="center"}else{l.articlePop.getComponent("image").element.dom.style.backgroundSize="cover";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="50% 0%"}l.add(l.articlePop);if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var a=localStorage.getItem("bodyFontSize"+publicationguid)}else{var a=16}$(".articleText").css("font-size",a+"px");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px");l.articlePop.getComponent("title").element.dom.style.position="relative";l.articlePop.getComponent("title").element.down("div").dom.style.width="758px";if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){l.articlePop.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){if(l.articlePop.items.items[0]!=null&&l.articlePop.items.items[1]!=null){l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.articlePop.items.items[0].element.dom.clientHeight+l.articlePop.items.items[1].element.dom.clientHeight+40)+"px"}})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.articlePop.getScrollable().getScroller().on({scroll:function(u){var t=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);var s=l.articlePop.getScrollable().getScroller().position.y;var r=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);if(((t-s)/r)>0){l.articlePop.getComponent("image").element.dom.style.top=(s)+"px";l.articlePop.getComponent("image").element.dom.style.opacity=((t-s)/r)}}})}}else{if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){l.titleContainer.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){if(l.desktopScroll.down(".x-scroll-indicator-dark")!=null){l.desktopScroll.down(".x-scroll-indicator-dark").dom.style.display="none"}l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.titleContainer.items.items[0].element.dom.clientHeight+l.titleContainer.items.items[1].element.dom.clientHeight+40)+"px"})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.titleContainer.setScrollable(true);l.titleContainer.getScrollable().getScroller().setDirectionLock(true);var f=l.titleContainer.getScrollable().getScroller();f.container.dom.offsetParent.style.zIndex=14}l.sharingContainer=l.titleContainer.getComponent("title").getComponent("sharing");l.sharingContainer.show();l.setupSharing(false);l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="none";if(l.bylineHidden){console.log(l.bylineHidden);n.element.down(".bylineText").dom.style.visibility=""}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility=""}}l.element.dom.style.zIndex=10;l.expand=true;l.element.dom.style.animation=l.expandAnim;l.element.dom.style.animationFillMode="forwards"}else{if(j.target.className.indexOf("x-scroll-view")==-1&&j.target.className.indexOf("fullStoryLink")==-1){if(l.hasImage){l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}l.articlePop.destroy();l.imageContainer.show();l.titleContainer.show();if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction)}}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}else{l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}var b=l.element.down(".headline");if(b!=null){$(b.dom).attr("class","headlineText")}var k=l.element.down(".subheadline");if(k!=null){$(k.dom).attr("class","subheadlineText")}var h=l.element.down(".byline");if(h!=null){$(h.dom).attr("class","bylineText")}var o=l.element.down(".section");if(o!=null){$(o.dom).attr("class","sectionText")}if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="";l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction);if(Ext.browser.is.IE){l.desktopScroll.down(".x-scroll-container").dom.style.height=""}}}l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="";if(l.bylineHidden){n.element.down(".bylineText").dom.style.visibility="hidden"}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility="hidden"}if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}}}}}},liveTap:function(){var a=this;window.open(a.article.url)}},0,["articlereaderitemmedwidetall"],["component","container","panel","articlereaderitemmedwidetall"],{component:true,container:true,panel:true,articlereaderitemmedwidetall:true},["widget.articlereaderitemmedwidetall"],0,[InfinityMobile.view.desktop,"ArticleReaderItemMedWideTall"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderItemMedTall",Ext.Panel,{config:{padding:5,style:"float:left;background-color:white;",layout:"vbox",items:[{itemId:"image",bottom:5,top:5,left:5,right:5,cls:"backgroundImage aspectfill"},{itemId:"title",bottom:5,top:5,left:5,right:5,padding:10,style:"background-color:rgba(0,0,0,0.5); color:white; font-size:20px; font-weight:bold;",height:"100%"}]},initi:a})},setBackgroundImage:function(){var c=this;var a=c.article.images;c.hasImage=true;c.firstImage=a[0];c.imageContainer.element.dom.style.backgroundImage="url('"+c.firstImage.url+"')";c.titleContainer.setStyle("color:white;padding:5px;");c.titleContainer.element.dom.style.height="";c.imageContainer.element.dom.style.backgroundSize="cover";c.imageContainer.element.dom.style.backgroundPosition="50% 0%";c.imageContainer.element.dom.style.backgroundColor="gray";c.sectionStr="";if(c.article.sections.length>1){for(var b=0;b<c.article.sections.length;b++){c.sectionStr+=c.article.sections[b]+"/"}c.sectionStr=c.sectionStr.substring(0,c.sectionStr.length-1)}else{if(c.article.sections[0]!=null){c.sectionStr=c.article.sections[0]}}if(c.sectionStr=="LIVE NEWS"){if(c.article.link!=null){if(c.article.link.length>0){c.article.body+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+c.article.link+"\")' onclick='window.open(\""+c.article.link+"\")'>Click here to view full story</p>"}}}c.titleContainer.setHtml("<div style='position:absolute;bottom:10px;right:10px;left:10px;' ><p style='color:white;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+c.sectionStr+"</p><p style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:semibold;'>"+c.article.headline+"</p></div>")},setNoImage:function(){var d=this;d.titleContainer.resetFloating();d.titleContainer.setStyle("background-color:#EEEEEE; color:black;");d.hasImage=false;d.sectionStr="";if(d.article.sections.length>1){for(var c=0;c<d.article.sections.length;c++){d.sectionStr+=d.article.sections[c]+"/"}d.sectionStr=d.sectionStr.substring(0,d.sectionStr.length-1)}else{if(d.article.sections[0]!=null){d.sectionStr=d.article.sections[0]}}if(d.article.shortStory!=null){var a=d.article.shortStory.replace("<div></div>","");if(a==null){a=""}}else{var a=""}if(d.sectionStr=="LIVE NEWS"){if(d.article.link!=null){if(d.article.link.length>0){d.article.body+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+d.article.link+"\")' onclick='window.open(\""+d.article.link+"\")'>Click here to view full story</p>"}}}var e=Ext.create("Ext.Container",{itemId:"title",html:"<p class='sectionText' style='color:#B2272A;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+d.sectionStr+"</p><p class='headlineText' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:semibold;padding-top:5px;padding-bottom:5px;'>"+d.article.headline+"</p><p class='subheadlineText' style='font-family:Open Sans, sans-serif;font-size:14px;font-weight:semibold;padding-bottom:5px;'>"+d.article.subHeadline+"</p><p class='bylineText' style='font-family:Open Sans, sans-serif;font-size:13px;font-weight:normal;padding-bottom:5px;'>"+d.article.byline+"</p><p class='shortStory' style='font-family:Open Sans, sans-serif;font-size:12px;font-weight:normal;'>"+a+"</p>",items:[{itemId:"sharing",top:-20,right:0,defaults:{style:"float:right;",height:30,width:30}}]});e.element.on({painted:function(){if(!d.paintedTitle){var f=e.element.down(".sectionText").dom.clientHeight+e.element.down(".headlineText").dom.clientHeight+e.element.down(".subheadlineText").dom.clientHeight+e.element.down(".bylineText").dom.clientHeight;var g=$(this.element.dom).height()-f;e.element.down(".shortStory").dom.style.maxHeight=(g-(g%14)-26)+"px";if(e.element.down(".bylineText").dom.clientHeight+e.element.down(".bylineText").dom.offsetTop>=$(this.element.dom).height()-20){e.element.down(".bylineText").dom.style.visibility="hidden";d.bylineHidden=true}if(e.element.down(".subheadlineText").dom.clientHeight+e.element.down(".subheadlineText").dom.offsetTop>=$(this.element.dom).height()-20){e.element.down(".subheadlineText").dom.style.visibility="hidden";d.subheadline=true}d.paintedTitle=true}},scope:d});d.titleContainer.add(e);if(d.article.body!=null){if(d.article.body.indexOf("<p>")!=-1){d.article.body=d.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}}if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var b=localStorage.getItem("bodyFontSize"+publicationguid)}else{var b=16}d.titleContainer.add(Ext.create("Ext.Container",{itemId:"articleBody",cls:"articleText",flex:1,width:"100%",html:d.article.body,style:"overflow:hidden;font-size:"+b+"px;font-weight:normal;font-family:Open Sans, sans-serif;",hidden:true,overflow:"hidden",layout:{type:"vbox"}}))},rse}}},setupSharing:function(f){var h=this;if(f){h.sharingImage.removeAll()}else{h.sharingContainer.removeAll()}var d=Ext.getStore("SettingStore");var a=d.data.items[0].raw.sharing;if(h.hasImage){var e=Ext.create("InfinityMobile.view.desktop.ArticleReaderFullscreenGalleryIcon",{padding:5,images:h.article.images,article:h.article});h.sharingImage.add(e);var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"white",tile:h});h.sharingImage.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"white",tile:h});h.sharingImage.add(k)}else{var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"black",tile:h});h.sharingContainer.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"black",tile:h});h.sharingContainer.add(k)}if(a.pinterest!=null){if(f){var j=a.pinterest.icon;var c=h.sharingImage}else{var j=a.pinterest.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.pinterest.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.googlePlus!=null){if(f){var j=a.googlePlus.icon;var c=h.sharingImage}else{var j=a.googlePlus.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.googlePlus.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.linkedIn!=null){if(f){var j=a.linkedIn.icon;var c=h.sharingImage}else{var j=a.linkedIn.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.linkedIn.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.twitter!=null){if(f){var j=a.twitter.icon;var c=h.sharingImage}else{var j=a.twitter.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.twitter.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.facebook!=null){if(f){var j=a.facebook.icon;var c=h.sharingImage}else{var j=a.facebook.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.facebook.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.email!=null){if(f){var j=a.email.icon;var c=h.sharingImage}else{var j=a.email.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.email.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}},onTap:function(j){var l=this;var n=l.titleContainer.getComponent("title");var p=false;if(p&&l.sectionStr.indexOf("LIVE NEWS")==-1){l.fireEvent("articleClick",l.article,l.article.guid)}else{if(p&&l.sectionStr.indexOf("LIVE NEWS")!=1){l.fireEvent("liveArticleClick",l.article)}else{if(!l.hasImage&&!l.expand){if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}}clearInterval(l.timer);clearInterval(l.timer2);clearInterval(l.timer3);clearInterval(l.timer);if(!l.expand){l.fireEvent("tileTapped",l);l.titleContainer.setPadding(40);if(l.titleContainer.getComponent("title")!=null){var h=l.element.down(".bylineText");if(h!=null){$(h.dom).attr("class","byline");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px")}var b=l.element.down(".headlineText");if(b!=null){$(b.dom).attr("class","headline");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px")}var k=l.element.down(".subheadlineText");if(k!=null){$(k.dom).attr("class","subheadline");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px")}var o=l.element.down(".sectionText");if(o!=null){$(o.dom).attr("class","section");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px")}}if(l.article.body.indexOf("<p>")!=-1){l.article.body=l.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}if(l.hasImage){l.articlePop=Ext.create("Ext.Container",{height:"100%",width:"100%",style:"background-color:#929292",overflow:"scroll",layout:{type:"vbox"},scrollable:{direction:"vertical",directionLock:true,indicators:false},items:[{itemId:"image",width:"100%",height:(l.imageContainer.element.dom.scrollHeight*1.2),cls:"backgroundImage aspectfill"},{itemId:"title",width:"100%",style:"color:white;background-color:#929292",height:"auto",padding:5,html:"<p class='section' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:bold;'>"+l.sectionStr+"</p><p class='headline' style='font-family:Open Sans, sans-serif;font-size:32px;font-weight:bold;padding-top:5px;padding-bottom:5px;'>"+l.article.headline+"</p><p class='subheadline' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:bold;padding-bottom:5px;'>"+l.article.subHeadline+"</p><p class='byline' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:normal;padding-bottom:5px;>"+l.article.byline+"</p><p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;'>"+l.article.body+"</p>",items:[{itemId:"sharing",top:20,right:40,defaults:{style:"float:right;",height:30,width:30}}]}]});var q=l.articlePop.getComponent("title").element.down("div");q.dom.style.padding="40px";l.sharingImage=l.articlePop.getComponent("title").getComponent("sharing");l.setupSharing(true);l.sharingImage.show();l.imageContainer.hide();l.titleContainer.hide();l.articlePop.getComponent("image").element.dom.style.background="url('"+l.firstImage.url+"')";l.articlePop.getComponent("image").element.dom.style.backgroundSize="cover";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="50% 0%";l.add(l.articlePop);if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var a=localStorage.getItem("bodyFontSize"+publicationguid)}else{var a=16}$(".articleText").css("font-size",a+"px");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px");l.articlePop.getComponent("title").element.dom.style.position="relative";l.articlePop.getComponent("title").element.down("div").dom.style.width="758px";if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){l.articlePop.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){if(l.articlePop.items.items[0]!=null&&l.articlePop.items.items[1]!=null){l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.articlePop.items.items[0].element.dom.clientHeight+l.articlePop.items.items[1].element.dom.clientHeight+40)+"px"}})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.articlePop.getScrollable().getScroller().on({scroll:function(u){var t=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);var s=l.articlePop.getScrollable().getScroller().position.y;var r=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);if(((t-s)/r)>0){l.articlePop.getComponent("image").element.dom.style.top=(s)+"px";l.articlePop.getComponent("image").element.dom.style.opacity=((t-s)/r)}}})}}else{if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){l.titleContainer.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){if(l.desktopScroll.down(".x-scroll-indicator-dark")!=null){l.desktopScroll.down(".x-scroll-indicator-dark").dom.style.display="none"}l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.titleContainer.items.items[0].element.dom.clientHeight+l.titleContainer.items.items[1].element.dom.clientHeight+40)+"px"})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.titleContainer.setScrollable(true);l.titleContainer.getScrollable().getScroller().setDirectionLock(true);var f=l.titleContainer.getScrollable().getScroller();f.container.dom.offsetParent.style.zIndex=14}l.sharingContainer=l.titleContainer.getComponent("title").getComponent("sharing");l.sharingContainer.show();l.setupSharing(false);l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="none";if(l.bylineHidden){console.log(l.bylineHidden);n.element.down(".bylineText").dom.style.visibility=""}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility=""}}l.element.dom.style.zIndex=8;l.expand=true;l.element.dom.style.animation=l.expandAnim;l.element.dom.style.animationFillMode="forwards"}else{if(j.target.className.indexOf("x-scroll-view")==-1&&j.target.className.indexOf("fullStoryLink")==-1){if(l.hasImage){l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}l.articlePop.destroy();l.imageContainer.show();l.titleContainer.show();if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction)}}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}else{l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}var b=l.element.down(".headline");if(b!=null){$(b.dom).attr("class","headlineText")}var k=l.element.down(".subheadline");if(k!=null){$(k.dom).attr("class","subheadlineText")}var h=l.element.down(".byline");if(h!=null){$(h.dom).attr("class","bylineText")}var o=l.element.down(".section");if(o!=null){$(o.dom).attr("class","sectionText")}if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="";l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction);if(Ext.browser.is.IE){l.desktopScroll.down(".x-scroll-container").dom.style.height=""}}}l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="";if(l.bylineHidden){n.element.down(".bylineText").dom.style.visibility="hidden"}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility="hidden"}if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}}}}}},liveTap:function(){var a=this;window.open(a.article.url)}},0,["articlereaderitemmedtall"],["component","container","panel","articlereaderitemmedtall"],{component:true,container:true,panel:true,articlereaderitemmedtall:true},["widget.articlereaderitemmedtall"],0,[InfinityMobile.view.desktop,"ArticleReaderItemMedTall"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderItemMedWide",Ext.Panel,{config:{padding:5,style:"float:left;background-color:white;z-index:6;",layout:"vbox",items:[{itemId:"image",bottom:5,top:5,left:5,right:5,cls:"backgroundImage aspectfill"},{itemId:"title",bottom:5,top:5,left:5,right:5,padding:10,style:"background-color:rgba(0,0,0,0.5); color:white; font-size:20px; font-weight:bold;",height:"100%"}]},initialize:function(){var a=this;a.article=a.config.article;a.bylineHidden=false;a.subheadlineHidden=false;a.paintedTitle=false;if(a.config.expandAnim!=null){a.expandAnim=a.config.expandAnim}if(a.config.shrinkAnim!=null){a.shrinkAnim=a.config.shrinkAnim}a.imageContainer=a.getComponent("image");a.titleContainer=a.getComponent("title");a.setStyle("height:30%;overflow:hidden;width:512px;");a.height=30;a.width=512;a.x=a.element.dom.style.left.substring(0,a.element.dom.style.left.length-2);a.y=a.element.dom.style.top.substring(0,a.element.dom.style.top.length-1);a.top=a.y;a.left=a.x;a.timer;a.timer2;a.timer3;a.timer4;a.section=a.getComponent("section");if(a.article.images!=null){if(a.article.images.length>0){a.on("painted",a.setBackgroundImage,a,{delay:10,single:true})}else{a.setNoImage()}}else{a.setNoImage()}a.element.on({tap:"onTap",scope:a})},setBackground"}}}},setNoImage:function(){var d=this;d.titleContainer.resetFloating();d.titleContainer.setStyle("background-color:#EEEEEE; color:black;");d.sectionStr="";if(d.article.sections.length>1){for(var c=0;c<d.article.sections.length;c++){d.sectionStr+=d.article.sections[c]+"/"}d.sectionStr=d.sectionStr.substring(0,sectionStr.length-1)}else{if(d.article.sections[0]!=null){d.sectionStr=d.article.sections[0]}}if(d.article.shortStory!=null){var a=d.article.shortStory.replace("<div></div>","");if(a==null){a=""}}else{var a=""}if(d.sectionStr=="LIVE NEWS"){if(d.article.link!=null){if(d.article.link.length>0){d.article.body+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+d.article.link+"\")' onclick='window.open(\""+d.article.link+"\")'>Click here to view full story</p>"}}}var e=Ext.create("Ext.Container",{itemId:"title",html:"<p class='sectionText' style='color:#B2272A;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+d.sectionStr+"</p><p class='headlineText' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:semibold;padding-top:5px;padding-bottom:5px;'>"+d.article.headline+"</p><p class='subheadlineText' style='font-family:Open Sans, sans-serif;font-size:14px;font-weight:semibold;padding-bottom:5px;'>"+d.article.subHeadline+"</p><p class='bylineText' style='font-family:Open Sans, sans-serif;font-size:13px;font-weight:normal;padding-bottom:5px;'>"+d.article.byline+"</p><p class='shortStory' style='font-family:Open Sans, sans-serif;font-size:12px;font-weight:normal;'>"+a+"</p>",items:[{itemId:"sharing",top:-20,right:0,defaults:{style:"float:right;",height:30,width:30}}]});e.element.on({painted:function(){if(!d.paintedTitle){var f=e.element.down(".sectionText").dom.clientHeight+e.element.down(".headlineText").dom.clientHeight+e.element.down(".subheadlineText").dom.clientHeight+e.element.down(".bylineText").dom.clientHeight;var g=$(this.element.dom).height()-f;e.element.down(".shortStory").dom.style.maxHeight=(g-(g%14)-26)+"px";if(e.element.down(".bylineText").dom.clientHeight+e.element.down(".bylineText").dom.offsetTop>=$(this.element.dom).height()-20){e.element.down(".bylineText").dom.style.visibility="hidden";d.bylineHidden=true}if(e.element.down(".subheadlineText").dom.clientHeight+e.element.down(".subheadlineText").dom.offsetTop>=$(this.element.dom).height()-20){e.element.down(".subheadlineText").dom.style.visibility="hidden";d.subheadlineHidden=true}d.paintedTitle=true}},scope:d});d.titleContainer.add(e);if(d.article.body!=null){if(d.article.body.indexOf("<p>")!=-1){d.article.body=d.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}}if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var b=localStorage.getItem("bodyFontSize"+publicationguid)}else{var b=16}d.titleContainer.add(Ext.create("Ext.Container",{itemId:"articleBody",cls:"articleText",flex:1,width:"100%",html:d.article.body,style:"overflow:hidden;font-size:"+b+"px;font-weight:normal;font-family:Open Sans, sans-serif;",hidden:true,overflow:"hidden",layout:{type:"vbox"}}))},resize:function(){var e=this;var h=e.titleContainer.getComponent("title");if(h!=null){var a=h.element.down(".sectionText").dom.clientHeight+h.element.down(".headlineText").dom.clientHeight+h.element.down(".subheadlineText").dom.clientHeight+h.element.down(".bylineText").dom.clientHeight;var c=$(this.element.dom).height()-a;h.element.down(".shortStory").dom.style.maxHeight=(c-(c%14)-26)+"px";if(parseFloat(h.element.down(".bylineText").dom.clientHeight)+parseFloat(h.element.down(".bylineText").dom.offsetTop)>=$(this.element.dom).height()-20){h.element.down(".bylineText").dom.style.visibility="hidden";e.bylineHidden=true}else{h.element.down(".bylineText").dom.style.visibility="";e.bylineHidden=false}if(parseFloat(h.element.down(".subheadlineText").dom.clientHeight)+parseFloat(h.element.down(".subheadlineText").dom.offsetTop)>=$(this.element.dom).height()-20){h.element.down(".subheadlineText").dom.style.visibility="hidden";e.subheadlineHidden=true}else{h.element.down(".subheadlineText").dom.style.visibility="";e.subheadlineHidden=false}}if(e.hasImage){var g=e.image.naturalWidth/e.image.naturalHeight;var d=$(e.element.dom).width()/$(e.element.dom).height();if(g<1.2&&d>1.25){e.imageAspect=true;var f=$(e.element.dom).height()/e.image.naturalHeight;var b=e.image.naturalWidth*f;if(b>$(e.element.dom).width()/2){e.imageContainer.element.dom.style.backgroundSize="50%";e.imageContainer.element.dom.style.backgroundPosition="0% 50%"}else{e.imageContainer.element.dom.style.backgroundSize=" auto 100%";e.imageContainer.element.dom.style.backgroundPosition="0% 0%"}e.titleContainer.element.down(".tileText").dom.style.bottom="";e.titleContainer.element.down(".tileText").dom.style.top="50%";e.titleContainer.element.down(".tileText").dom.style.left="55%";e.titleContainer.element.down(".tileText").dom.style.transform="translate(0%, -50%)"}else{e.imageAspect=false;e.imageContainer.element.dom.style.backgroundSize="cover";e.imageContainer.element.dom.style.backgroundPosition="50% 0%";e.imageContainer.element.dom.style.backgroundColor="gray";e.titleContainer.element.down(".tileText").dom.style.bottom="10px";e.titleContainer.element.down(".tileText").dom.style.top="";e.titleContainer.element.down(".tileText").dom.style.left="10px";e.titleContainer.element.down(".tileText").dom.style.transform=""}}},setupSharing:function(f){var h=this;if(f){h.sharingImage.removeAll()}else{h.sharingContainer.removeAll()}var d=Ext.getStore("SettingStore");var a=d.data.items[0].raw.sharing;if(h.hasImage){var e=Ext.create("InfinityMobile.view.desktop.ArticleReaderFullscreenGalleryIcon",{padding:5,images:h.article.images,article:h.article});h.sharingImage.add(e);var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"white",tile:h});h.sharingImage.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"white",tile:h});h.sharingImage.add(k)}else{var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"black",tile:h});h.sharingContainer.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"black",tile:h});h.sharingContainer.add(k)}if(a.pinterest!=null){if(f){var j=a.pinterest.icon;var c=h.sharingImage}else{var j=a.pinterest.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.pinterest.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.googlePlus!=null){if(f){var j=a.googlePlus.icon;var c=h.sharingImage}else{var j=a.googlePlus.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.googlePlus.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.linkedIn!=null){if(f){var j=a.linkedIn.icon;var c=h.sharingImage}else{var j=a.linkedIn.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.linkedIn.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.twitter!=null){if(f){var j=a.twitter.icon;var c=h.sharingImage}else{var j=a.twitter.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.twitter.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.facebook!=null){if(f){var j=a.facebook.icon;var c=h.sharingImage}else{var j=a.facebook.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.facebook.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.email!=null){if(f){var j=a.email.icon;var c=h.sharingImage}else{var j=a.email.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.email.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}},onTap:function(j){var l=this;var p=false;var n=l.titleContainer.getComponent("title");if(p&&l.sectionStr.indexOf("LIVE NEWS")==-1){l.fireEvent("articleClick",l.article,l.article.guid)}else{if(p&&l.sectionStr.indexOf("LIVE NEWS")!=1){l.fireEvent("liveArticleClick",l.article)}else{if(!l.hasImage&&!l.expand){if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}}clearInterval(l.timer);clearInterval(l.timer2);clearInterval(l.timer3);clearInterval(l.timer);if(!l.expand){l.fireEvent("tileTapped",l);l.titleContainer.setPadding(40);if(l.titleContainer.getComponent("title")!=null){var h=l.element.down(".bylineText");if(h!=null){$(h.dom).attr("class","byline");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px")}var b=l.element.down(".headlineText");if(b!=null){$(b.dom).attr("class","headline");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px")}var k=l.element.down(".subheadlineText");if(k!=null){$(k.dom).attr("class","subheadline");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px")}var o=l.element.down(".sectionText");if(o!=null){$(o.dom).attr("class","section");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px")}}if(l.article.body.indexOf("<p>")!=-1){l.article.body=l.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}if(l.hasImage){l.articlePop=Ext.create("Ext.Container",{height:"100%",width:"100%",style:"background-color:#929292",overflow:"scroll",layout:{type:"vbox"},scrollable:{direction:"vertical",directionLock:true,indicators:false},items:[{itemId:"image",width:"100%",height:(l.imageContainer.element.dom.scrollHeight*1.5),cls:"backgroundImage aspectfill"},{itemId:"title",width:"100%",style:"color:white;background-color:#929292",height:"auto",padding:5,html:"<p class='section' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:bold;'>"+l.sectionStr+"</p><p class='headline' style='font-family:Open Sans, sans-serif;font-size:32px;font-weight:bold;padding-top:5px;padding-bottom:5px;'>"+l.article.headline+"</p><p class='subheadline' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:bold;padding-bottom:5px;'>"+l.article.subHeadline+"</p><p class='byline' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:normal;padding-bottom:5px;>"+l.article.byline+"</p><p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;'>"+l.article.body+"</p>",items:[{itemId:"sharing",top:20,right:40,defaults:{style:"float:right;",height:30,width:30}}]}]});var q=l.articlePop.getComponent("title").element.down("div");q.dom.style.padding="40px";l.sharingImage=l.articlePop.getComponent("title").getComponent("sharing");l.setupSharing(true);l.sharingImage.show();l.imageContainer.hide();l.titleContainer.hide();l.articlePop.getComponent("image").element.dom.style.background="url('"+l.firstImage.url+"')";if(l.imageAspect){l.articlePop.getComponent("image").element.dom.style.backgroundSize="contain";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="center"}else{l.articlePop.getComponent("image").element.dom.style.backgroundSize="cover";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="50% 0%"}l.add(l.articlePop);if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var a=localStorage.getItem("bodyFontSize"+publicationguid)}else{var a=16}$(".articleText").css("font-size",a+"px");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px");l.articlePop.getComponent("title").element.dom.style.position="relative";l.articlePop.getComponent("title").element.down("div").dom.style.width="758px";if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){l.articlePop.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){if(l.articlePop.items.items[0]!=null&&l.articlePop.items.items[1]!=null){l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.articlePop.items.items[0].element.dom.clientHeight+l.articlePop.items.items[1].element.dom.clientHeight+40)+"px"}})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.articlePop.getScrollable().getScroller().on({scroll:function(u){var t=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);var s=l.articlePop.getScrollable().getScroller().position.y;var r=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);if(((t-s)/r)>0){l.articlePop.getComponent("image").element.dom.style.top=(s)+"px";l.articlePop.getComponent("image").element.dom.style.opacity=((t-s)/r)}}})}}else{if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){l.titleContainer.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){if(l.desktopScroll.down(".x-scroll-indicator-dark")!=null){l.desktopScroll.down(".x-scroll-indicator-dark").dom.style.display="none"}l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.titleContainer.items.items[0].element.dom.clientHeight+l.titleContainer.items.items[1].element.dom.clientHeight+40)+"px"})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.titleContainer.setScrollable(true);l.titleContainer.getScrollable().getScroller().setDirectionLock(true);var f=l.titleContainer.getScrollable().getScroller();f.container.dom.offsetParent.style.zIndex=14}l.sharingContainer=l.titleContainer.getComponent("title").getComponent("sharing");l.sharingContainer.show();l.setupSharing(false);l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="none";if(l.bylineHidden){console.log(l.bylineHidden);n.element.down(".bylineText").dom.style.visibility=""}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility=""}}l.element.dom.style.zIndex=10;l.expand=true;l.element.dom.style.animation=l.expandAnim;l.element.dom.style.animationFillMode="forwards"}else{if(j.target.className.indexOf("x-scroll-view")==-1&&j.target.className.indexOf("fullStoryLink")==-1){if(l.hasImage){l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}l.articlePop.destroy();l.imageContainer.show();l.titleContainer.show();if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction)}}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}else{l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}var b=l.element.down(".headline");if(b!=null){$(b.dom).attr("class","headlineText")}var k=l.element.down(".subheadline");if(k!=null){$(k.dom).attr("class","subheadlineText")}var h=l.element.down(".byline");if(h!=null){$(h.dom).attr("class","bylineText")}var o=l.element.down(".section");if(o!=null){$(o.dom).attr("class","sectionText")}if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="";l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction);if(Ext.browser.is.IE){l.desktopScroll.down(".x-scroll-container").dom.style.height=""}}}l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="";if(l.bylineHidden){n.element.down(".bylineText").dom.style.visibility="hidden"}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility="hidden"}if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}}}}}},liveTap:function(){var a=this;window.open(a.article.url)}},0,["articlereaderitemmedwide"],["component","container","panel","articlereaderitemmedwide"],{component:true,container:true,panel:true,articlereaderitemmedwide:true},["widget.articlereaderitemmedwide"],0,[InfinityMobile.view.desktop,"ArticleReaderItemMedWide"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderBannerAd",Ext.Panel,{config:{style:"padding:0px:overflow:none;",width:"100%",items:[{itemId:"advert",cls:"advert",style:"position:absolute;top:50%;left:50%;transform:translate3d(-50%, -50%, 0px);"}]},initic)}}},loadAD)})},onResx)"}}},0,["articlereaderbannerad"],["component","container","panel","articlereaderbannerad"],{component:true,container:true,panel:true,articlereaderbannerad:true},["widget.articlereaderbannerad"],0,[InfinityMobile.view.desktop,"ArticleReaderBannerAd"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderItemContainer",Ext.Container,{config:{height:"80%",width:768}},0,["articlereaderitemcontainer"],["component","container","articlereaderitemcontainer"],{component:true,container:true,articlereaderitemcontainer:true},["widget.articlereaderitemcontainer"],0,[InfinityMobile.view.desktop,"ArticleReaderItemContainer"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderItemSmall",Ext.Panel,{config:{padding:5,style:"float:left;background-color:white;z-index:7;overflow:hidden;height:30% !important;width: 256px !important",layout:"vbox",items:[{itemId:"image",bottom:5,top:5,left:5,right:5,cls:"backgroundImage aspectfill"},{itemId:"title",bottom:5,top:5,left:5,right:5,padding:10,style:"background-color:rgba(0,0,0,0.5); color:white; font-size:20px; font-weight:bold;",height:"100%"}]},initi:a})},setBackgroundv>")},setNoImage:function(){var d=this;d.titleContainer.resetFloating();d.titleContainer.setStyle("background-color:#EEEEEE; color:black;overflow:hidden;");d.sectionStr="";if(d.article.sections.length>1){for(var c=0;c<d.article.sections.length;c++){d.sectionStr+=d.article.sections[c]+"/"}d.sectionStr=d.sectionStr.substring(0,sectionStr.length-1)}else{if(d.article.sections[0]!=null){d.sectionStr=d.article.sections[0]}}if(d.article.shortStory!=null){var a=d.article.shortStory.replace("<div></div>","");if(a==null){a=""}}else{var a=""}if(d.sectionStr=="LIVE NEWS"){if(d.article.link!=null){if(d.article.link.length>0){d.article.body+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+d.article.link+"\")' onclick='window.open(\""+d.article.link+"\")'>Click here to view full story</p>"}}}var e=Ext.create("Ext.Container",{itemId:"title",html:"<p class='sectionText' style='color:#B2272A;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+d.sectionStr+"</p><p class='headlineText' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:semibold;padding-top:5px;padding-bottom:5px;'>"+d.article.headline+"</p><p class='subheadlineText' style='font-family:Open Sans, sans-serif;font-size:14px;font-weight:semibold;'>"+d.article.subHeadline+"</p><p class='bylineText' style='font-family:Open Sans, sans-serif;font-size:13px;font-weight:normal;margin-bottom:5px;'>"+d.article.byline+"</p><p class='shortStory' style='font-family:Open Sans, sans-serif;font-size:12px !important;font-weight:normal !important;'>"+a+"</p>",items:[{itemId:"sharing",top:-20,right:0,defaults:{style:"float:right;",height:30,width:30}}]});e.element.on({parue}},scope:d});d.titleContainer.add(e);if(d.article.body!=null){if(d.article.body.indexOf("<p>")!=-1){d.article.body=d.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}}if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var b=localStorage.getItem("bodyFontSize"+publicationguid)}else{var b=16}d.titleContainer.add(Ext.create("Ext.Container",{itemId:"articleBody",cls:"articleText",flex:1,width:"100%",html:d.article.body,style:"overflow:hidden;font-size:"+b+"px;font-weight:normal;font-family:Open Sans, sans-serif;padding-bottom:5px;",hidden:true,overflow:"hidden",layout:{type:"vbox"}}))},rse}}},setupSharing:function(f){var h=this;if(f){h.sharingImage.removeAll()}else{h.sharingContainer.removeAll()}if(h.hasImage){var e=Ext.create("InfinityMobile.view.desktop.ArticleReaderFullscreenGalleryIcon",{padding:5,images:h.article.images,article:h.article});h.sharingImage.add(e);var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"white",tile:h});h.sharingImage.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"white",tile:h});h.sharingImage.add(k)}else{var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"black",tile:h});h.sharingContainer.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"black",tile:h});h.sharingContainer.add(k)}var d=Ext.getStore("SettingStore");var a=d.data.items[0].raw.sharing;if(a.pinterest!=null){if(f){var j=a.pinterest.icon;var c=h.sharingImage}else{var j=a.pinterest.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.pinterest.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.googlePlus!=null){if(f){var j=a.googlePlus.icon;var c=h.sharingImage}else{var j=a.googlePlus.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.googlePlus.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.linkedIn!=null){if(f){var j=a.linkedIn.icon;var c=h.sharingImage}else{var j=a.linkedIn.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.linkedIn.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.twitter!=null){if(f){var j=a.twitter.icon;var c=h.sharingImage}else{var j=a.twitter.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.twitter.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.facebook!=null){if(f){var j=a.facebook.icon;var c=h.sharingImage}else{var j=a.facebook.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.facebook.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.email!=null){if(f){var j=a.email.icon;var c=h.sharingImage}else{var j=a.email.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.email.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}},onTap:function(j){var l=this;var p=false;var n=l.titleContainer.getComponent("title");if(p&&l.sectionStr.indexOf("LIVE NEWS")==-1){l.fireEvent("articleClick",l.article,l.article.guid)}else{if(p&&l.sectionStr.indexOf("LIVE NEWS")!=1){l.fireEvent("liveArticleClick",l.article)}else{if(!l.hasImage&&!l.expand){if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}}clearInterval(l.timer);clearInterval(l.timer2);clearInterval(l.timer3);clearInterval(l.timer);if(!l.expand){l.fireEvent("tileTapped",l);l.titleContainer.setPadding(40);if(l.titleContainer.getComponent("title")!=null){var h=l.element.down(".bylineText");if(h!=null){$(h.dom).attr("class","byline");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px")}var b=l.element.down(".headlineText");if(b!=null){$(b.dom).attr("class","headline");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px")}var k=l.element.down(".subheadlineText");if(k!=null){$(k.dom).attr("class","subheadline");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px")}var o=l.element.down(".sectionText");if(o!=null){$(o.dom).attr("class","section");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px")}}if(l.article.body.indexOf("<p>")!=-1){l.article.body=l.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}if(l.hasImage){l.articlePop=Ext.create("Ext.Container",{height:"100%",width:"100%",style:"background-color:#929292",overflow:"scroll",layout:{type:"vbox"},scrollable:{direction:"vertical",directionLock:true,indicators:false},items:[{itemId:"image",width:"100%",height:(l.imageContainer.element.dom.scrollHeight*2.2),cls:"backgroundImage aspectfill"},{itemId:"title",width:"100%",style:"color:white;background-color:#929292",height:"auto",padding:5,html:"<p class='section' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:bold;'>"+l.sectionStr+"</p><p class='headline' style='font-family:Open Sans, sans-serif;font-size:32px;font-weight:bold;padding-top:5px;padding-bottom:5px;'>"+l.article.headline+"</p><p class='subheadline' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:bold;padding-bottom:5px;'>"+l.article.subHeadline+"</p><p class='byline' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:normal;padding-bottom:5px;>"+l.article.byline+"</p><p style='font-family:Open Sans, sans-serif;font-weight:normal;'>"+l.article.body+"</p>",items:[{itemId:"sharing",top:20,right:40,defaults:{style:"float:right;",height:30,width:30}}]}]});var q=l.articlePop.getComponent("title").element.down("div");q.dom.style.padding="40px";l.sharingImage=l.articlePop.getComponent("title").getComponent("sharing");l.setupSharing(true);l.sharingImage.show();l.imageContainer.hide();l.titleContainer.hide();l.articlePop.getComponent("image").element.dom.style.background="url('"+l.firstImage.url+"')";l.articlePop.getComponent("image").element.dom.style.backgroundSize="cover";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="50% 0%";l.add(l.articlePop);if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var a=localStorage.getItem("bodyFontSize"+publicationguid)}else{var a=16}$(".articleText").css("font-size",a+"px");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px");l.articlePop.getComponent("title").element.dom.style.position="relative";l.articlePop.getComponent("title").element.down("div").dom.style.width="758px";if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){l.articlePop.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){if(l.articlePop.items.items[0]!=null&&l.articlePop.items.items[1]!=null){l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.articlePop.items.items[0].element.dom.clientHeight+l.articlePop.items.items[1].element.dom.clientHeight+40)+"px"}})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.articlePop.getScrollable().getScroller().on({scroll:function(u){var t=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);var s=l.articlePop.getScrollable().getScroller().position.y;var r=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);if(((t-s)/r)>0){l.articlePop.getComponent("image").element.dom.style.top=(s)+"px";l.articlePop.getComponent("image").element.dom.style.opacity=((t-s)/r)}}})}}else{if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){l.titleContainer.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.titleContainer.items.items[0].element.dom.clientHeight+l.titleContainer.items.items[1].element.dom.clientHeight+40)+"px"})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.titleContainer.setScrollable(true);l.titleContainer.getScrollable().getScroller().setDirectionLock(true);var f=l.titleContainer.getScrollable().getScroller();f.container.dom.offsetParent.style.zIndex=14}l.sharingContainer=l.titleContainer.getComponent("title").getComponent("sharing");l.sharingContainer.show();l.setupSharing(false);l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="none";if(l.bylineHidden){console.log(l.bylineHidden);n.element.down(".bylineText").dom.style.visibility=""}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility=""}}l.element.dom.style.position="absolute";l.element.dom.style.zIndex=10;l.expand=true;l.element.dom.style.mozAnimation=l.expandAnim;l.element.dom.style.animation=l.expandAnim;l.element.dom.style.animationFillMode="forwards"}else{if(j.target.className.indexOf("x-scroll-view")==-1&&j.target.className.indexOf("fullStoryLink")==-1){if(l.hasImage){l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}l.articlePop.destroy();l.imageContainer.show();l.titleContainer.show();if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction)}}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}else{l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}var b=l.element.down(".headline");if(b!=null){$(b.dom).attr("class","headlineText")}var k=l.element.down(".subheadline");if(k!=null){$(k.dom).attr("class","subheadlineText")}var h=l.element.down(".byline");if(h!=null){$(h.dom).attr("class","bylineText")}var o=l.element.down(".section");if(o!=null){$(o.dom).attr("class","sectionText")}}if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="";l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction);if(Ext.browser.is.IE){l.desktopScroll.down(".x-scroll-container").dom.style.height=""}}}l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="";if(l.bylineHidden){n.element.down(".bylineText").dom.style.visibility="hidden"}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility="hidden"}if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}}}}}},liveTap:function(){var a=this;window.open(a.article.url)}},0,["articlereaderitemsmall"],["component","container","panel","articlereaderitemsmall"],{component:true,container:true,panel:true,articlereaderitemsmall:true},["widget.articlereaderitemsmall"],0,[InfinityMobile.view.desktop,"ArticleReaderItemSmall"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderItemLrg",Ext.Panel,{config:{padding:5,style:"float:left;z-index:6;",layout:"vbox",items:[{itemId:"image",bottom:5,top:5,left:5,right:5,cls:"backgroundImage aspectfill"},{itemId:"title",bottom:5,top:5,left:5,right:5,style:"background-color:rgba(0,0,0,0.5); color:white; font-size:20px; font-weight:bold",padding:10,height:"100%"}]},initialize:function(){var a=this;a.article=a.config.article;a.expand=false;a.bylineHidden=false;a.subheadlineHidden=false;a.paintedTitle=false;a.imageContainer=a.getComponent("image");if(a.config.expandAnim!=null){a.expandAnim=a.config.expandAnim}if(a.config.shrinkAnim!=null){a.shrinkAnim=a.config.shrinkAnim}a.titleContainer=a.getComponent("title");a.setStyle("height:60%;width:768px;overflow:hidden;");a.height=60;a.timer;a.section=a.getComponent("section");if(a.article.images!=null){if(a.article.images.length>0){a.on("painted",a.setBackgroundImage,a,{delay:10,single:true})}else{a.setNoImage()}}else{a.setNoImage()}a.element.on({tap:"onTap",scope:a})},setBackground"}}}},setNoImage:function(){var d=this;d.titleContainer.resetFloating();d.titleContainer.setStyle("background-color:#EEEEEE; color:black;");d.sectionStr="";if(d.article.sections.length>1){for(var c=0;c<d.article.sections.length;c++){d.sectionStr+=d.article.sections[c]+"/"}d.sectionStr=d.sectionStr.substring(0,sectionStr.length-1)}else{if(d.article.sections[0]!=null){d.sectionStr=d.article.sections[0]}}if(d.article.shortStory!=null){var a=d.article.shortStory.replace("<div></div>","");if(a==null){a=""}}else{var a=""}if(d.sectionStr=="LIVE NEWS"){if(d.article.link!=null){if(d.article.link.length>0){d.article.body+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+d.article.link+"\")' onclick='window.open(\""+d.article.link+"\")'>Click here to view full story</p>"}}}var e=Ext.create("Ext.Container",{itemId:"title",html:"<p class='sectionText' style='color:#B2272A;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+d.sectionStr+"</p><p class='headlineText' style='font-family:Open Sans, sans-serif;font-size:28px;font-weight:semibold;padding-top:5px;padding-bottom:5px;'>"+d.article.headline+"</p><p class='subheadlineText' style='font-family:Open Sans, sans-serif;font-size:14px;font-weight:semibold;padding-bottom:5px;'>"+d.article.subHeadline+"</p><p class='bylineText' style='font-family:Open Sans, sans-serif;font-size:13px;font-weight:normal;padding-bottom:5px;'>"+d.article.byline+"</p><p class='shortStory' style='font-family:Open Sans, sans-serif;font-size:12px;font-weight:normal;'>"+a+"</p>",items:[{itemId:"sharing",top:-20,right:0,defaults:{style:"float:right;",height:30,width:30}}]});e.element.on({parue}},scope:d});d.titleContainer.add(e);if(d.article.body!=null){if(d.article.body.indexOf("<p>")!=-1){d.article.body=d.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}}if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var b=localStorage.getItem("bodyFontSize"+publicationguid)}else{var b=16}d.titleContainer.add(Ext.create("Ext.Container",{itemId:"articleBody",cls:"articleText",width:"100%",html:d.article.body,style:"overflow:hidden;font-size:"+b+"px;font-weight:normal;font-family:Open Sans, sans-serif;",flex:1,hidden:true,overflow:"hidden",layout:{type:"vbox"}}))},r""}}},setupSharing:function(f){var h=this;if(f){h.sharingImage.removeAll()}else{h.sharingContainer.removeAll()}var d=Ext.getStore("SettingStore");var a=d.data.items[0].raw.sharing;if(h.hasImage){var e=Ext.create("InfinityMobile.view.desktop.ArticleReaderFullscreenGalleryIcon",{padding:5,images:h.article.images,article:h.article});h.sharingImage.add(e);var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"white",tile:h});h.sharingImage.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"white",tile:h});h.sharingImage.add(k)}else{var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"black",tile:h});h.sharingContainer.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"black",tile:h});h.sharingContainer.add(k)}if(a.pinterest!=null){if(f){var j=a.pinterest.icon;var c=h.sharingImage}else{var j=a.pinterest.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.pinterest.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.googlePlus!=null){if(f){var j=a.googlePlus.icon;var c=h.sharingImage}else{var j=a.googlePlus.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.googlePlus.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.linkedIn!=null){if(f){var j=a.linkedIn.icon;var c=h.sharingImage}else{var j=a.linkedIn.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.linkedIn.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.twitter!=null){if(f){var j=a.twitter.icon;var c=h.sharingImage}else{var j=a.twitter.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.twitter.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.facebook!=null){if(f){var j=a.facebook.icon;var c=h.sharingImage}else{var j=a.facebook.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.facebook.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.email!=null){if(f){var j=a.email.icon;var c=h.sharingImage}else{var j=a.email.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.email.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}},onTap:function(j){var l=this;var n=l.titleContainer.getComponent("title");var p=false;if(p&&l.sectionStr.indexOf("LIVE NEWS")==-1){l.fireEvent("articleClick",l.article,l.article.guid)}else{if(p&&l.sectionStr.indexOf("LIVE NEWS")!=1){l.fireEvent("liveArticleClick",l.article)}else{if(!l.hasImage&&!l.expand){if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}}clearInterval(l.timer);if(!l.expand){l.fireEvent("tileTapped",l);l.titleContainer.setPadding(40);if(l.titleContainer.getComponent("title")!=null){var h=l.element.down(".bylineText");if(h!=null){$(h.dom).attr("class","byline");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px")}var b=l.element.down(".headlineText");if(b!=null){$(b.dom).attr("class","headline");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px")}var k=l.element.down(".subheadlineText");if(k!=null){$(k.dom).attr("class","subheadline");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px")}var o=l.element.down(".sectionText");if(o!=null){$(o.dom).attr("class","section");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px")}}if(l.article.body.indexOf("<p>")!=-1){l.article.body=l.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}if(l.hasImage){l.articlePop=Ext.create("Ext.Container",{height:"100%",width:"100%",style:"background-color:#929292",overflow:"scroll",layout:{type:"vbox"},scrollable:{direction:"vertical",directionLock:true,indicators:false},items:[{itemId:"image",width:"100%",height:(l.imageContainer.element.dom.scrollHeight*1.2),cls:"backgroundImage aspectfill"},{itemId:"title",width:"100%",style:"color:white;background-color:#929292",height:"auto",padding:5,html:"<p class='section' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:bold;'>"+l.sectionStr+"</p><p class='headline' style='font-family:Open Sans, sans-serif;font-size:32px;font-weight:bold;padding-top:5px;padding-bottom:5px;'>"+l.article.headline+"</p><p class='subheadline' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:bold;padding-bottom:5px;'>"+l.article.subHeadline+"</p><p class='byline' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:normal;padding-bottom:5px;>"+l.article.byline+"</p><p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;'>"+l.article.body+"</p>",items:[{itemId:"sharing",top:20,right:40,defaults:{style:"float:right;",height:30,width:30}}]}]});var q=l.articlePop.getComponent("title").element.down("div");q.dom.style.padding="40px";l.sharingImage=l.articlePop.getComponent("title").getComponent("sharing");l.setupSharing(true);l.sharingImage.show();l.imageContainer.hide();l.titleContainer.hide();l.articlePop.getComponent("image").element.dom.style.background="url('"+l.firstImage.url+"')";if(l.imageAspect){l.articlePop.getComponent("image").element.dom.style.backgroundSize="contain";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="center"}else{l.articlePop.getComponent("image").element.dom.style.backgroundSize="cover";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="50% 0%"}l.add(l.articlePop);if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var a=localStorage.getItem("bodyFontSize"+publicationguid)}else{var a=16}$(".articleText").css("font-size",a+"px");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px");l.articlePop.getComponent("title").element.dom.style.position="relative";l.articlePop.getComponent("title").element.down("div").dom.style.width="758px";if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){l.articlePop.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animatiopx"}})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.articlePop.getScrollable().getScroller().on({scroll:function(u){var t=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);var s=l.articlePop.getScrollable().getScroller().position.y;var r=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);if(((t-s)/r)>0){l.articlePop.getComponent("image").element.dom.style.top=(s)+"px";l.articlePop.getComponent("image").element.dom.style.opacity=((t-s)/r)}}})}}else{if(currentProfile=="desktop"&&settings.dynamic.articleBehaviour=="scrollbar"){l.titleContainer.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){if(l.desktopScroll.down(".x-scroll-indicator-dark")!=null){l.desktopScroll.down(".x-scroll-indicator-dark").dom.style.display="none"}l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.titleContainer.items.items[0].element.dom.clientHeight+l.titleContainer.items.items[1].element.dom.clientHeight+40)+"px"})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.titleContainer.setScrollable(true);l.titleContainer.getScrollable().getScroller().setDirectionLock(true);var f=l.titleContainer.getScrollable().getScroller();f.container.dom.offsetParent.style.zIndex=14}l.sharingContainer=l.titleContainer.getComponent("title").getComponent("sharing");l.sharingContainer.show();l.setupSharing(false);l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="none";if(l.bylineHidden){console.log(l.bylineHidden);n.element.down(".bylineText").dom.style.visibility=""}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility=""}}l.element.dom.style.position="absolute";l.element.dom.style.left="0px",l.element.dom.style.top="0px";l.element.dom.style.zIndex=8;l.expand=true;l.element.dom.style.animation=l.expandAnim;l.element.dom.style.animationFillMode="forwards"}else{if(j.target.className.indexOf("x-scroll-view")==-1&&j.target.className.indexOf("fullStoryLink")==-1){if(l.hasImage){l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}l.articlePop.destroy();l.imageContainer.show();l.titleContainer.show();if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction)}}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}else{l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="28px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){1;l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}var b=l.element.down(".headline");if(b!=null){$(b.dom).attr("class","headlineText")}var k=l.element.down(".subheadline");if(k!=null){$(k.dom).attr("class","subheadlineText")}var h=l.element.down(".byline");if(h!=null){$(h.dom).attr("class","bylineText")}var o=l.element.down(".section");if(o!=null){$(o.dom).attr("class","sectionText")}if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="";l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction);if(Ext.browser.is.IE){l.desktopScroll.down(".x-scroll-container").dom.style.height=""}}}l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="";if(l.bylineHidden){n.element.down(".bylineText").dom.style.visibility="hidden"}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility="hidden"}if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}}}}}},liveTap:function(){var a=this;window.open(a.article.url)}},0,["articlereaderitemlrg"],["component","container","panel","articlereaderitemlrg"],{component:true,container:true,panel:true,articlereaderitemlrg:true},["widget.articlereaderitemlrg"],0,[InfinityMobile.view.desktop,"ArticleReaderItemLrg"],0));(Ext.cmd.derive("InfinityMobile.view.ReadAloudControls",Ext.Container,{config:{style:"border-radius:10px;display:inline-block !important;",height:38,width:116,margin:"-3 0 0 10",items:[{itemId:"controlPanel",height:"100%",width:"100%",layout:{type:"hbox"},style:"padding:3%;",items:[{cls:"audioControl",itemId:"play",height:"100%",width:35,style:"background-size:70% 70%;background-position:center;background-repeat:no-repeat;border-radius:10px;display:inline-block !important;",isPlaying:false},{width:"5%",height:"100%"},{width:"5%",height:"100%"},{cls:"audioControl",itemId:"restart",height:"100%",width:"30%",style:'background:url("resources/images/stop-ic.png") black;background-size:80% 80%;background-position:center;background-repeat:no-repeat;border-radius:10px;display:inline-block !important;'}]}]},initialize:function(){var a=this;if(a.config.target!=null){a.target=a.config.target}a.controlPanel=a.getComponent("controlPanel");a.playBtn=a.controlPanel.getComponent("play");a.playBtn.addCls("playReadAloud");a.restartBtn=a.controlPanel.getComponent("restart");a.setPosition();a.setButtonListeners()},setPosition:function(){var a=this;if(a.target!=null){}},setButtonListeners:function(){var a=this;a.restartBtn.hide();a.setWidth(35);a.type="play-stop";a.playBtn.element.on({tap:a.play,scope:a});a.restartBtn.element.on({tap:a.restart,scope:a})}d")}},",a)},re",a)}},0,["readaloudcontrols"],["component","container","readaloudcontrols"],{component:true,container:true,readaloudcontrols:true},["widget.readaloudcontrols"],0,[InfinityMobile.view,"ReadAloudControls"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderArticlePopover",Ext.Container,{config:{style:"padding:0px; border-radius:0px; background-color:white;",articleguid:"a3d9d9eb-36b5-46b6-94ee-31978e22dc78",fullscreen:true,modal:true,centered:true,hideOnMaskTap:true,height:"80%",width:"80%",maxHeight:768,maxWidth:1024,layout:"vbox",zIndex:20,items:[{itemId:"tooltiptool",cls:"tooltiptoolbar",style:"z-index:10000",hidden:true},{itemId:"topBar",height:50,layout:"hbox",padding:"10px 20px 0px 20px",items:[{itemId:"topBarShare",xtype:"readermenushare",layout:"hbox"},{itemId:"copyButton",cls:"topBarCopyButton",baseCls:"copyButton",text:"Copy Article"},{itemId:"topBarSelectText",cls:"topBarSelectText",html:'<div class="textSizeHtml5"><img style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="../assets/article%20view/Text-highlight-ic.png" ></div>',hidden:true,text:"Article Highlight Mode"},{width:10},{layout:"hbox",itemId:"interactiveContent",hidden:true,items:[{itemId:"topBarComic",html:'<img style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="../assets/article%20view/comics-ic.png">',text:"Comics",margin:"0 10 0 0"},{itemId:"topBarPuzzle",html:'<img style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="../assets/article%20view/puzzle-ic.png">',text:"Puzzles",margin:"0 10 0 0"},{itemId:"topBarSections",html:'<img style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="../assets/article%20view/sections-ic-black.png">',hidden:true}]},{itemId:"topBarPrint",html:'<img style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="https://edition.pagesuite.com/tribune/print-icon.png" />',text:"Print"},{width:10},{itemId:"textControls",html:'<div class="textSizeHtml5"><img class="textIncrease" style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="../assets/article%20view/Text_Increase_Icon.png" ontouchstart="increaseText()" onclick="increaseText()">&nbsp;&nbsp;<img class="textDecrease" style="cursor:hand;cursor:pointer;width:32px;height:32px;" src="../assets/article%20view/Text_Decrease_Icon.png" ontouchstart="decreaseText()" onclick="decreaseText()"></div>'},{width:10},{itemId:"topBarTranslate",cls:"topBarTranslate pointerCursor",html:'<div class="textSizeHtml5"><span style="top: -8px;position: relative;margin: 8px;color: rgb(66, 145, 182);">Translate</span><img style="cursor:hand;cursor:pointer;width:28px;height:28px;margin-top:2px;" src="../assets/article view/Spain.png"></div>',right:125,padding:6,hidden:true},{itemId:"inappTranslate",baseCls:"inappTranslate",cls:"spain"},{itemId:"ttsControl",baseCls:"ttsToggle",status:"STOPPED"},{itemId:"readAloudControls",xtype:"readaloudcontrols",hidden:true},{itemId:"closeButton",cls:"pointerCursor",top:0,right:0,padding:"10px 20px 10px 20px",style:"color:#4291b6",layout:{type:"hbox",align:"center"},items:[{itemId:"closeTxt",cls:"articleClose",style:"font-size:18px",html:"Close"},{width:10},{height:26,html:'<img src="../assets/article view/article-close-btn.png" style="width:26px;" />'}]}]},{itemId:"content",flex:1,cls:"innerhtmlfullheight",padding:"0px 20px 0px 20px"},{itemId:"bottomNav",cls:"articleFooter",height:40,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",align:"center"},items:[{itemId:"previousArticleButton",width:155,padding:"10 0 0 20",height:"100%",layout:"hbox",cls:"pointerCursor",items:[{itemId:"prev",html:"<img style='height:20px' src='../assets/article view/left-article-arrow.png' />"},{itemId:"previousTxt",style:"white-space:nowrap;",html:"Previous Article",padding:"0 0 0 5"}]},{flex:1},{itemId:"articleText",html:"Article X / Y"},{flex:1},{itemId:"nextArticleButton",padding:"10 20 0 0",height:"100%",layout:{type:"hbox",pack:"end"},cls:"pointerCursor",items:[{itemId:"nextTxt",html:"Next Article",padding:"0 5 0 0",style:"white-space:nowrap;"},{itemId:"next",html:"<img style='height:20px' src='../assets/article view/right-article-arrow.png' />"}]}]}]},initialize:function(){var d=this;d.highlightMode=false;if(d.config.hasComics!=null){d.hasComics=d.config.hasComics}if(d.config.hasPuzzles!=null){d.hasPuzzles=d.config.hasPuzzles}d.content=d.getComponent("content");var f=d.getComponent("topBar");d.topBarShare=f.getComponent("topBarShare");d.topBarFrame=d.topBarShare.element.down("iframe");d.topBarPrint=f.getComponent("topBarPrint");d.topBarTextControls=f.getComponent("textControls");d.closeButton=f.getComponent("closeButton");d.closeTxt=d.closeButton.getComponent("closeTxt");d.closeTxt.setHtml(language.close);d.setCloseButtonListener();var e=d.getComponent("bottomNav");d.previousArticleButton=e.getComponent("previousArticleButton");d.previousTxt=d.previousArticleButton.getComponent("previousTxt");var a="Previous";if(language!=null&&language.articlePopover!=null&&language.articlePopover.previousArticle!=null){a=language.articlePopover.previousArticle}d.previousTxt.setHtml(a);d.nextArticleButton=e.getComponent("nextArticleButton");d.nextTxt=d.nextArticleButton.getComponent("nextTxt");var c="Next";if(language!=null&&language.articlePopover!=null&&language.articlePopover.nextArticle!=null){c=language.articlePopover.nextArticle}d.nextTxt.setHtml(c);d.articleText=e.getComponent("articleText");d.ttsToggle=f.getComponent("ttsControl");d.copyButton=d.getComponent("topBar").getComponent("copyButton");d.readAloudControls=f.getComponent("readAloudControls");if(window.SpeechSynthesisUtterance!=undefined&&typeof isTribReader!="undefined"&&isTribReader){}else{if(window.SpeechSynthesisUtterance===undefined||settings.tts===undefined){d.ttsToggle.hide()}}d.inappTrans=d.getComponent("topBar").getComponent("inappTranslate");d.inappTrans.hide();if(typeof isTribReader!="undefined"){if(!isTribReader){d.copyButton.hide()}else{d.setCopyButtonListener()}}else{d.copyButton.hide()}d.setPrintListener();d.setNextButtonListener();d.setPreviousButtonListener();d.setTtsToggleListener();d.topBarSelectText=f.getComponent("topBarSelectText");d.topBarSelectText.element.on("tap",function(){d.fireEvent("selectTextMode",d)});d.on({hide:function(){if(window.speechSynthesis!=undefined&&(typeof isTribReader!=undefined&&isTribReader)){d.fireEvent("hidden",d.ttsToggle)}},painted:function(){if(settings.tts!=null&&window.SpeechSynthesisUtterance!=undefined){d.fireEvent("opened")}}});if(d.articleReader!=null){d.fireEvent("initializeArticlePopover",d);d.ttsToggle.hide()}else{if(d.config.isLive==null){d.fireEvent("initialized",d)}else{if(d.config.articles==null){d.fireEvent("initializeLivePopover",d);d.ttsToggle.hide()}else{d.fireEvent("initializeLivePopover",d,d.config.articles)}}}if(settings.reader.hideArticleControls!=null){if(settings.reader.hideArticleControls.toLowerCase()=="true"){d.topBarShare.hide();d.topBarTextControls.hide();e.hide();d.topBarPrint.hide()}}if(settings.newsday!=null){d.addCls("popUp");d.topBarPrint.hide();if(settings.newsday.useFontAwesome=="true"){d.prevIcon=d.previousArticleButton.getComponent("prev");if(d.prevIcon!=null){d.prevIcon.setHtml('<i class="fa fa-angle-left fa-lg" style="position:relative;top:-2px;margin:2px;" aria-hidden="true"></i>')}d.nextIcon=d.nextArticleButton.getComponent("next");if(d.nextIcon!=null){d.nextIcon.setHtml('<i class="fa fa-angle-right fa-lg" style="position:relative;top:-2px;margin:2px;" aria-hidden="true"></i>')}}if(settings.newsday.useNewsdayPopover!=null){if(settings.newsday.useNewsdayPopover=="true"){var b=d.hexToRgb(settings.topbar.backgroundColor);if(settings.topbar.backgroundColor!=null){f.setStyle({backgroundColor:"rgba("+b.r+","+b.g+","+b.b+",0.9)"})}d.closeButton.removeAll();var g=Ext.create("Ext.Container",{itemId:"closeTxt",cls:"articleClose",style:"font-size:18px",html:'<img src="resources/images/article-close-btn-white.png" style="width:26px;" />'});d.closeButton.add(g);if(settings.topbar.color!=null){d.closeButton.setStyle({color:"#"+settings.topbar.color})}d.closeButton.setPadding("12px 16px");f.insert(0,d.closeButton);f.setPadding("5px 0px 0px 0px")}}if(settings.newsday.hideShareIcons!=null){if(settings.newsday.hideShareIcons=="true"){d.topBarShare.removeAll();d.topBarTextControls.hide()}}}d.interactiveContent=f.getComponent("interactiveContent");if(typeof isTribReader!="undefined"){if(isTribReader){d.content.setPadding(0);d.interactiveContent.show();d.topBarComic=d.interactiveContent.getComponent("topBarComic");d.topBarPuzzle=d.interactiveContent.getComponent("topBarPuzzle");d.topBarSections=d.interactiveContent.getComponent("topBarSections");d.setComicPuzzleListener();d.topBarSelectText.show();d.topBarTranslate=f.getComponent("topBarTranslate");d.topBarTranslate.show();d.setTranslateListener()}}d.setTooltips();d.adjustModal()},adjust999)},setTranslateListener:function(){var b=this;var a='<div class="textSizeHtml5"><span style="top: -8px;position: relative;margin: 8px;color: rgb(66, 145, 182);">'+language.articlePopover.translate+'</span><img class="translate-flag tflag" src="../assets/article view/Spain.png"><img class="nant-flag tflag" style="display:none;" src="../assets/article view/mexican_flag_icon.png"></div>';b.topBarTranslate.setHtml(a);b.topBarTranslate.element.on({tap:function(c){c.stopPropagation();b.fireEvent("translateArticle",b)}})},setComicPuzzleLiss)})},setPrintListener:function(){var a=this;a.topBarPrint.element.on("tap",function(){a.fireEvent("print")})},hexToRgb:function(b){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},setArticleWidth:function(){var b=this;var a=Math.min(screen.width,screen.height);b.setWidth(a)},setCloseButtonListener:function(){var a=this;a.closeButton.element.on({tap:"tap",scope:this})},setTtsToggleLis}})}},setCopyButtonListener:function(){var a=this;a.copyButton.element.on({tap:function(){a.fireEvent("copyToClipboard")}})},setPreviousButtonListener:function(){var a=this;if(a.config.isLive!=null){a.previousArticleButton.element.on("tap",function(){a.fireEvent("livePrevious",a)})}else{a.previousArticleButton.element.on("tap",function(){a.fireEvent("previous")})}},setNextButtonLis)})}},setAppTranslateListener:function(){var a=this;a.inappTrans.element.on({tap:function(){a.fireEvent("translate",a.inappTrans)}})},tap:function(){var a=this;a.fireEvent("close",a)},hide:function(){var a=this;a.tap()},setTooltips:function(){var b=this;b.tooltip=b.getComponent("tooltiptool");b.topBarShare.on("paiue)}});b.setupTooltipMouseFunctions(b.copyButton.element.dom,language.articlePopover.copyTool,false);b.setupTooltipMouseFunctions(b.topBarSelectText.element.dom,language.articlePopover.highlightedTextMode,false);if(b.topBarComic!=null){b.setupTooltipMouseFunctions(b.topBarComic.element.dom,"Comics",false)}if(b.topBarPuzzle!=null){b.setupTooltipMouseFunctions(b.topBarPuzzle.element.dom,"Puzzles",false)}b.setupTooltipMouseFunctions(b.topBarPrint.element.dom,language.print.print,false);var d=$(b.topBarTextControls.element.dom).find(".textIncrease")[0];if(d!=null){b.setupTooltipMouseFunctions(d,language.articlePopover.enlargeText,false)}var c=$(b.topBarTextControls.element.dom).find(".textDecrease")[0];if(c!=null){b.setupTooltipMouseFunctions(c,language.articlePopover.reduceText,false)}b.setupTooltipMouseFunctions(b.ttsToggle.element.dom,language.menu.readAloud,false);var a=b.readAloudControls;if(a!=null){a.element.dom.onmouse()}};a.element.dom.onmouseout=function(){b.tooltip.setHtml("");b.tooltip.hide();b.element.dom.onmousemove=null}}},setupTooltipMouseFunctions:function(c,d,b){var a=this;if(b){c.onmouseover=function(){a.tooltip.setHtml(d);a.tooltip.show();a.tooltipShare()};c.onmouseout=function(){a.tooltip.setHtml("");a.tooltip.hide();a.element.dom.onmousemove=null}}else{c.onmousre()};c.onmounull}}},tooltipRight:function(){var a=this;a.element.dom.onmousemove=(function(b){a.getComponent("tooltiptool").element.dom.style.webkitTransform="translate3d("+(b.layerX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltiptool").element.dom.style.MozTransform="translate3d("+(b.layerX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltiptool").element.dom.style.msTransform="translate3d("+(b.layerX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)"})},tooltipShare:function(){var a=this;a.element.dom.onmousemove=(function(b){var c=b.pageX-$(a.element.dom).offset().left;a.getComponent("tooltiptool").element.dom.style.webkitTransform="translate3d("+(c+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltiptool").element.dom.style.MozTransform="translate3d("+(c+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltiptool").element.dom.style.msTransform="translate3d("+(c+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)"})},hide:function(){var a=this;if(window.speechSynthesis!=undefined&&(typeof isTribReader!=undefined&&isTribReader)){a.fireEvent("hidden",a.ttsToggle)}a.tap();a.destroy()}},0,["articleview"],["component","container","articleview"],{component:true,container:true,articleview:true},["widget.articleview"],0,[InfinityMobile.view.desktop,"ReaderArticlePopover"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticlePopoverInterstitial",Ext.Panel,{config:{style:"padding:0px",items:[{itemId:"advert",cls:"advert"}]},initialize:function(){var b=this;b.destroyed=false;b.advertTimeout=1000;b.advertContainer=b.getComponent("advert");var a=settings.newsday.articlePopoverInterstitial;if(a!=null){b.networkCode=a.networkCode;b.adUnit=a.adUnit;b.advertDivID=b.id+"advert";b.advertContainer.setHtml("<div id='"+b.advertDivID+"' style='text-align:center;width:90%;height:100%;margin-left:5%;margin-right:5%;'></div>");b.advertDiv=b.element.down("#"+b.advertDivID);b.advertDiv.dom.style.visibility="hidden";b.on("painted",b.loadAdvert,b,{delay:10,single:true});b.on("resize",b.onResizeFn,b)}else{if(settings.newsday!=null){if(settings.newsday.adUnit!=null&&settings.newsday.networkCode!=null){a=settings.newsday;b.networkCode=a.networkCode;b.adUnit=a.adUnit;b.advertDivID=b.id+"advert";b.advertContainer.setHtml("<div id='"+b.advertDivID+"' style='width:90%;height:100%;margin-left:5%;margin-right:5%;pointer-events:none;'></div>");b.advertDiv=b.element.down("#"+b.advertDivID);b.on("painted",b.loadAdvert,b,{delay:10,single:true});b.on("resize",b.onResizeFn,b)}}}},loadAdvert:function(){var a=this;setTimeout(function(){if(!a.destroyed){googletag.cmd.push(function(){var b=googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,[parseInt("768"),parseInt("1024")],a.advertDivID);b.addService(googletag.pubads());googletag.enableServices()});googletag.cmd.push(function(){googletag.display(a.advertDivID)});a.onResizeFn(a);a.advertDiv.dom.style.visibility=""}},a.advertTimeout)},onResizeFn:function(a){var d=this;if(d.advertDiv.down("iframe")!=null){var c=d.advertDiv.down("iframe").dom;var b=c.contentDocument||c.contentWindow.document;var g=document.createElement("script");g.innerHTML='setTimeout(function(){ document.addEventListener("touchmove", function (e) { e.preventDefault(); }); }, 500)';try{b.addEventListener("touchmove",function(h){h.preventDefault()});b.body.appendChild(g);d.advertDiv.dom.addEventListener("touchmove",function(h){h.preventDefault()})}catch(f){}d.fireEvent("scaleInterstitial",c,d.advertDiv.dom)}},destroy:function(){var a=this;a.destroyed=true;Ext.Panel.prototype.destroy.apply(this,arguments)}},0,["articlePopoverInterstitial"],["component","container","panel","articlePopoverInterstitial"],{component:true,container:true,panel:true,articlePopoverInterstitial:true},["widget.articlePopoverInterstitial"],0,[InfinityMobile.view.desktop,"ArticlePopoverInterstitial"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.DesktopPageViewer",Ext.Panel,{config:{height:"100%",width:"100%",scrollable:"both",maxScale:3,mode:"double",zoomMode:"fit",maxZoomWidth:3500,items:[{itemId:"scrollerDiv",items:[{itemId:"zoomDiv",style:"visibility: hidden",items:[{itemId:"hiddenLeft",left:"0%",top:0,height:"100%",width:"50%",style:"visibility:hidden;",html:"<img id='hiddenLeftImg' src='' style='position:absolute;'/><div class='hiddenGradientLeft' style='position:absolute;right:0%;' ></div>"},{itemId:"leftSide",left:0,top:0,height:"100%",width:"50%",html:"<div class='leftSideDiv' style='position:absolute;top:0%;right:0%;transform-origin:100% 0% 0px;z-index:10000' ><div class='leftPreviousPageContainer' style='z-index:10;position:absolute;transform-origin:100% 0% 0px;visibility:hidden;right:0%;top0%;'><div class='leftSideGradient' style='position:absolute'></div><img class='leftPrevPage' style='position:absolute;' /></div><div class='leftSideImgContainer' style='position:absolute;top:0%;right:0%;'><img class='leftSideImg' style='display:block;' /><div class='mediaDiv'></div><div class='tileDiv'><canvas id='tileCanvas' /></div><div class='tileDiv2'><canvas id='tileCanvas2' /></div></div></div>"},{itemId:"hiddenRight",left:"50%",top:0,height:"100%",width:"50%",style:"visibility:hidden;",html:"<img id='hiddenRightImg' src='' style='position:absolute;' /><div class='hiddenGradientRight' style='position:absolute;' ></div>"},{itemId:"rightSide",left:"50%",top:0,height:"100%",width:"50%",html:"<div class='rightSideDiv' style='position:absolute;top:0%;left:0%;transform-origin:0% 0% 0px;' ><div class='rightNextPageContainer' style='z-index:10;position:absolute;transform-origin:0% 0% 0px;visibility:hidden;' ><div class='rightSideGradient' style='position:absolute;'></div><img class='rightNextPage' style='position:absolute;' /></div><div class='rightSideImgContainer' style='position:absolute;'><img class='rightSideImg' style='display:block;' /><div class='mediaDiv'></div><div class='tileDiv'><canvas id='tileCanvas' /></div><div class='tileDiv2'><canvas id='tileCanvas2' /></div></div></div>"},{itemId:"overflowMediaDiv",left:0,top:0,hidden:true,height:"100%",width:"50%"}]},{itemId:"tooltip",style:"position:absolute !important;left:0px;top:0px;",left:0,top:0,width:0,height:0,hidden:true}]},{cls:"cornerPoint",itemId:"topRight",style:"width:60px;height:60px;position:absolute;right:0%;top:0%;z-index:100001;visibility:visible;overflow:hidden;",html:"<img class='gifRight' loop='false' />"},{cls:"cornerPoint",itemId:"topLeft",style:"width:60px;height:60px;position:absolute;left:0%;top:0%;z-index:100001;visibility:visible;overflow:hidden",html:"<img class='gifLeft' loop='false' />"},{cls:"cornerPoint",itemId:"bottomRight",style:"width:60px;height:60px;position:absolute;right:0%;bottom:0%;z-index:100001;visibility:visible;overflow:hidden;",html:"<img class='gifBottomRight' loop='false' />"},{cls:"cornerPoint",itemId:"bottomLeft",style:"width:60px;height:60px;position:absolute;left:0%;bottom:0%;z-index:100001;visibility:visible;overflow:hidden;",html:"<img class='gifBottomLeft' loop='false' />"}]},beforeInitialize:function(){var a=this;a.isinitialized=false;a.isPageRendered=false;a.hasTiled=false;a.leftThumbnailLoaded=false;a.rightThumbnailLoaded=false;a.scale=1;a.zoomMode=a.config.zoomMode;a.mode=a.config.mode;a.scaledCanvas=false;a.zoomTileInterval=null;a.canDoubleTap=true},initialize:function(){var b=this;var a=Ext.getStore("SettingStore");b.advertCounter=0;b.readerPaddingY=0;b.readerPaddingX=0;b.wrapAdOffset=0;b.topPadding=0;var c=false;if(typeof isTribReader!="undefined"){if(isTribReader){c=true}}if(c||window.settings.reader.enableReaderPadding=="true"){b.wrapAdOffset=150;b.topPadding=20}if(window.settings.reader.wrapAd!=null){b.wrapAdOffset=180}b.audioObjects=[];b.mp4Objects=[];b.topRight=b.getComponent("topRight");b.topLeft=b.getComponent("topLeft");b.bottomRight=b.getComponent("bottomRight");b.bottomLeft=b.getComponent("bottomLeft");b.zoomLevel="none";b.scrollerDivContainer=b.getComponent("scrollerDiv");b.scrollerDiv=b.scrollerDivContainer.element;b.scrollerDiv.addListener({scope:b,doubletap:b.onDoubleTap,pinchstart:b.onPinchStart,pinch:b.onPinch,pinchend:b.onPinchEnd});b.zoomDivContainer=b.scrollerDivContainer.getComponent("zoomDiv");b.zoomDiv=b.zoomDivContainer.element;b.rightSide=b.zoomDivContainer.getComponent("rightSide");b.leftSide=b.zoomDivContainer.getComponent("leftSide");b.hiddenRight=b.zoomDivContainer.getComponent("hiddenRight");b.hiddenLeft=b.zoomDivContainer.getComponent("hiddenLeft");b.overflowMediaDiv=b.zoomDivContainer.getComponent("overflowMediaDiv");b.tooltip=b.scrollerDivContainer.getComponent("tooltip");b.scroller=b.getScrollable().getScroller();b.scroller.setDisabled(true);b.scroller.on({scrollstart:b.onScrollStart,s""}}},scrollend:b.scrollEnd,scope:b});b.zoomDiv.on({touchend:b.onTouchEnd,scope:b});b.setupPages();b.on("painted",b.pagePainted,b,{delay:10,single:true});b.topRight.element.addListener({dragstart:"startDrag",drag:"drag",dragend:"endDrag",scope:b});b.topRight.element.on("tap",function(d){if(d!=null){d.stopPropagation()}b.fireEvent("killBannerAd",b);if(b.diffX==null){b.diffX=($(b.topRight.element.dom).offset().left+$(b.topRight.element.dom)[0].getBoundingClientRect().width)-$(b.element.dom).width()}if(b.diffY==null){b.diffY=$(b.topRight.element.dom).offset().top}$(b.rightSideDiv).css("transform-origin","0% 0% 0px");$(b.rightSideImg).css("transform-origin","0% 0% 0px");$(b.rightNextPage).css("transform-origin","0% 0% 0px");$(b.rightSideGradient).css("transform-origin","0% 0% 0px");$(b.rightSideDiv).css("bottom","");$(b.rightSideImg).css("top","0%");$(b.rightSideImg).css("bottom","");$(b.rightSideImg).css("left","0%");$(b.rightNextPage).css("top","0%");$(b.rightNextPage).css("bottom","");$(b.rightNextPage).css("left","0% ");$(b.rightSideGradient).css("top","0%");$(b.rightSideGradient).css("bottom","");$(b.rightSideGradient).css("left","0% ");$(b.rightSideGradient).css("z-index","11");b.rightSide.element.dom.style.zIndex="10";b.leftSide.element.dom.style.zIndex="8";$(b.gifRight).css("visibility","hidden");b.fireEvent("autoTurnRight",b)});b.enter=false;b.mouseDown=false;b.topRight.element.dom.onmouseenter=function(f){if(!b.mouseDown){if(b.timer!=null){clearInterval(b.timer);b.timer=null}$(b.gifRight).css("visibility","visible");$(b.gifRight).attr("src","resources/images/cornerpeel_00010.png");var d=60;if((navigator.maxTouchPoints)){d=70}$(b.gifRight).css("transform","translate3d("+d+"px, "+d+"px, 0px)");b.timer=setInterval(function(){d--;$(b.gifRight).css("transform","translate3d("+d+"px, "+-d+"px, 0px)");if(d==0){clearInterval(b.timer);b.timer=null}},5);b.mouseDown=false}};b.topRight.element.dom.onmouseleave=function(f){if(!b.mouseDown){if(b.timer!=null){clearInterval(b.timer);b.timer=null}if(!Ext.browser.is.IE){$(b.gifRight).attr("src","resources/images/cornerpeel_00010.png")}var d=0;b.timer=setInterval(function(){d++;$(b.gifRight).css("transform","translate3d("+d+"px, "+-d+"px, 0px)");var e=60;if((navigator.maxTouchPoints)){e=70}if(d==e){clearInterval(b.timer);b.timer=null}},5);b.mouseDown=false}};b.topLeft.element.addListener({dragstart:"startDragLeft",drag:"dragLeft",dragend:"endDragLeft",scope:b});b.topLeft.element.on(",b)});b.topLeft.element.dom.onmouseenter=function(f){if(!b.mouseDown){if(b.timer!=null){clearInterval(b.timer);b.timer=null}$(b.gifLeft).attr("src","resources/images/cornerpeel_00010.png");$(b.gifLeft).css("visibility","visible");var d=60;if((navigator.maxTouchPoints)){d=70}$(b.gifLeft).css("transform","translate3d("+d+"px, "+d+"px, 0px)");b.timer=setInterval(function(){d--;$(b.gifLeft).css("transform","rotate(270deg) scale3d(1, 1, 1) translate3d("+d+"px, "+-d+"px, 0px)");if(d==0){clearInterval(b.timer);b.timer=null}},5);b.mouseDown=false}};b.topLeft.element.dom.onmouseleave=function(f){if(!b.mouseDown){if(b.timer!=null){clearInterval(b.timer);b.timer=null}if(!Ext.browser.is.IE){$(b.gifRight).attr("src","resources/images/cornerpeel_00010.png")}var d=0;b.timer=setInterval(function(){d++;$(b.gifLeft).css("transform","rotate(270deg) scale3d(1, 1, 1) translate3d("+d+"px, "+-d+"px, 0px)");var e=60;if((navigator.maxTouchPoints)){e=70}if(d==e){clearInterval(b.timer);b.timer=null}},5);b.mouseDown=false}};b.bottomRight.element.addListener({dragstart:"startDragBottomRight",drag:"dragBottomRight",dragend:"endDragBottomRight",scope:b});b.bottomRightTapped=false;b.bottomRight.element.on(,b)}});b.bottomLeft.element.addListener({dragstart:"startDragBottomLeft",drag:"dragBottomLeft",dragend:"endDragBottomLeft",scope:b});b.bottomRight.element.dom.onmouseenter=function(f){if(!b.mouseDown){if(b.timer!=null){clearInterval(b.timer);b.timer=null}$(b.gifBottomRight).attr("src","resources/images/cornerpeel_00010.png");$(b.gifBottomRight).css("visibility","visible");var d=60;if((navigator.maxTouchPoints)){d=70}$(b.gifBottomRight).css("transform","translate3d("+d+"px, "+d+"px, 0px)");b.timer=setInterval(function(){d--;$(b.gifBottomRight).css("transform","rotate(90deg) translate3d("+d+"px, "+-d+"px, 0px)");if(d==0){clearInterval(b.timer);b.timer=null}},5);b.mouseDown=false}},b.bottomRight.element.dom.onmouselse}};b.bottomLeftTapped=false;b.bottomLeft.element.on(,b)}});b.bottomLeft.element.dom.onmouselse}};b.bottomLeft.element.dom.onmouselse}};if(b.zoomMode=="fill"){b.topRight.hide();b.topLeft.hide();b.bottomRight.hide();b.bottomLeft.hide();b.element.dom.onmousewheel=(function(d){if(b.scroller.maxPosition.y>0){if(d.wheelDelta>0){if(b.scroller.position.y-120>0){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y-120);b.fireEvent("showTop");b.fireEvent("showBottom")}else{b.scroller.scrollTo(b.scroller.position.x,0);b.fireEvent("hideTop");b.fireEvent("showBottom")}}else{if(b.scroller.position.y+120<b.scroller.maxPosition.y){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y+120);b.fireEvent("showBottom");b.fireEvent("showTop")}else{b.scroller.scrollTo(b.scroller.position.x,b.scroller.maxPosition.y);b.fireEvent("hideBottom");b.fireEvent("showTop")}}}});b.element.dom.addEventListener("DOMMouseScroll",function(d){if(b.zoomMode=="fill"&&b.scroller.maxPosition.y>0){if(d.detail<=0){if(b.scroller.position.y-60>0){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y-60);b.fireEvent("showTop");b.fireEvent("showBottom")}else{b.scroller.scrollTo(b.scroller.position.x,0);b.fireEvent("hideTop");b.fireEvent("showBottom")}}else{if(b.scroller.position.y+60<b.scroller.maxPosition.y){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y+60);b.fireEvent("showBottom");b.fireEvent("showTop")}else{b.scroller.scrollTo(b.scroller.position.x,b.scroller.maxPosition.y);b.fireEvent("hideBottom");b.fireEvent("showTop")}}}})}else{b.toggleZoomMode("fit")}b.pauseFlashingLinks();if((navigator.maxTouchPoints)){$(b.topRight.element.dom).css("height","70px");$(b.topRight.element.dom).css("width","70px");$(b.topLeft.element.dom).css("height","70px");$(b.topLeft.element.dom).css("width","70px");$(b.bottomRight.element.dom).css("height","70px");$(b.bottomRight.element.dom).css("width","70px");$(b.bottomLeft.element.dom).css("height","70px");$(b.bottomLeft.element.dom).css("width","70px")}b.isinitialized=true},setupPages:function(){var b=this;b.rightPageObject=b.config.rightPage;b.rightPage=b.config.rightPage.image;b.leftPageObject=b.config.leftPage;b.leftPage=b.config.leftPage.image;b.prevPageObject=b.config.previousPage;b.prevPage=b.config.previousPage.image;b.hiddenLeftPageObject=b.config.hiddenLeftPage;b.hiddenLeftPage=b.config.hiddenLeftPage.image;b.nextPageObject=b.config.nextPage;b.nextPage=b.config.nextPage.image;b.hiddenRightPageObject=b.config.hiddenRightPage;b.hiddenRightPage=b.config.hiddenRightPage.image;b.initialTranslateX=0;b.initialTranslateY=0;b.offsetX=0;b.offsetY=0;b.activeCanvas=1;b.rightSideDiv=b.rightSide.element.down(".rightSideDiv").dom;b.rightSideNextPageContainer=b.rightSide.element.down(".rightNextPageContainer").dom;b.rightSideGradient=b.rightSide.element.down(".rightSideGradient").dom;b.rightNextPage=b.rightSide.element.down(".rightNextPage").dom;b.rightSideImageContainer=b.rightSide.element.down(".rightSideImgContainer").dom;b.rightSideImg=b.rightSide.element.down(".rightSideImg").dom;b.rightSideMediaDiv=b.rightSide.element.down(".mediaDiv").dom;b.rightSideTileDiv=b.rightSide.element.down(".tileDiv").dom;b.rightSideTileDiv2=b.rightSide.element.down(".tileDiv2").dom;b.rightSideTileCanvas=b.rightSide.element.down("canvas").dom;b.rightSideTileCanvas2=$(b.rightSideTileDiv2).find("canvas")[0];b.rightSideImageContainer.image=b.rightSideImg;b.rightSideImageContainer.mediaDiv=b.rightSideMediaDiv;b.rightSideImageContainer.tileDiv=b.rightSideTileDiv;b.rightSideImageContainer.tileDiv2=b.rightSideTileDiv2;b.rightSideImageContainer.tileCanvas=b.rightSideTileCanvas;b.rightSideImageContainer.tileCanvas2=b.rightSideTileCanvas2;b.rightSideImageContainer.activeCanvas=1;var a=b.getPageNo()+1;if(a%2==1){b.rightSideImageContainer.pageNo=a}else{b.rightSideImageContainer.pageNo=(a+1)}b.hiddenRightImg=b.hiddenRight.element.dom.children[0].children[0].children[0];b.hiddenRightGradient=b.hiddenRight.element.dom.children[0].children[0].children[1];b.leftSideDiv=b.leftSide.element.down(".leftSideDiv").dom;b.leftSidePrevPageContainer=b.leftSide.element.down(".leftPreviousPageContainer").dom;b.leftSideGradient=b.leftSide.element.down(".leftSideGradient").dom;b.leftPrevPage=b.leftSide.element.down(".leftPrevPage").dom;b.leftSideImageContainer=b.leftSide.element.down(".leftSideImgContainer").dom;b.leftSideImg=b.leftSide.element.down(".leftSideImg").dom;b.leftSideMediaDiv=b.leftSide.element.down(".mediaDiv").dom;b.leftSideTileDiv=b.leftSide.element.down(".tileDiv").dom;b.leftSideTileDiv2=b.leftSide.element.down(".tileDiv2").dom;b.leftSideTileCanvas=b.leftSide.element.down("canvas").dom;b.leftSideTileCanvas2=$(b.leftSideTileDiv2).find("canvas")[0];b.leftSideImageContainer.image=b.leftSideImg;b.leftSideImageContainer.mediaDiv=b.leftSideMediaDiv;b.leftSideImageContainer.tileDiv=b.leftSideTileDiv;b.leftSideImageContainer.tileDiv2=b.leftSideTileDiv2;b.leftSideImageContainer.tileCanvas=b.leftSideTileCanvas;b.leftSideImageContainer.tileCanvas2=b.leftSideTileCanvas2;b.leftSideImageContainer.activeCanvas=1;var a=b.getPageNo()+1;if(a%2==1){b.leftSideImageContainer.pageNo=(a-1)}else{b.leftSideImageContainer.pageNo=a}b.hiddenLeftImg=b.hiddenLeft.element.dom.children[0].children[0].children[0];b.hiddenLeftGradient=b.hiddenLeft.element.dom.children[0].children[0].children[1];b.checkPageMode(b.mode)},returnAdvertOffset:function(c){var b=this;var d=0;if(typeof settings!="undefined"&&settings.reader!=null&&settings.reader.interstitialPageFlow!=null){var e=settings.reader.interstitialPageFlow;var a=editionFlatplanData.pageGroups[c-1];if(a!=null&&a.pages[0]!=null){if(!isNaN(a.pages[0].advertsAdded)){d=a.pages[0].advertsAdded}}}return d},pagePainted:function(){var a=this;if(a.element!=null){a.setPageWidth();if(settings.leftSideAd!=null&&a.config.leftPage.type=="leftHandAd"&&(a.config.leftPage.adType=="dfp"||a.config.leftPage.adType=="url")){a.rightSidePainted()}else{a.leftSidePainted();if(a.rightPage!=null){a.rightSidePainted()}else{a.rightSide.element.dom.style.zIndex="8"}}if(settings.reader.wrapAd!=null){if(settings.reader.wrapAd.hideLeftWrapperOnFirstPage!=null){if(settings.reader.wrapAd.hideLeftWrapperOnFirstPage=="true"){a.fireEvent("checkWrapAd",a)}}}a.playCssAnimations()}},setPageWidth:function(){var a=this;a.pageWidth=a.element.dom.clientWidth;a.pageHeight=a.element.dom.clientHeight},leftSidePainted:function(){var b=this;var a=false;$(b.leftSideImg).attr("src",b.getImageUrl(b.leftPage,b.leftPageObject));$(b.leftPrevPage).attr("src",b.getImageUrl(b.prevPage,b.prevPageObject));b.leftSideImg.type=b.config.leftPage.type;if(b.prevPage==null){b.topLeft.element.dom.style.visibility="hidden";b.bottomLeft.element.dom.style.visibility="hidden"}else{if(b.mode=="double"&&b.config.previousPage.type=="page"){b.topLeft.element.dom.style.visibility=""}}console.log(b.config.previousPage);if(b.hiddenLeftPage!=null){if(b.hiddenLeftPage.trim().length>0){$(b.hiddenLeftImg).css("display","none");$(b.hiddenLeftImg).attr("src",b.getImageUrl(b.hiddenLeftPage,b.hiddenLeftPageObject))}else{$(b.hiddenLeftImg).css("visibility","hidden")}}else{$(b.hiddenLeftImg).css("visibility","hidden")}$(b.leftSideImg).css("visibility","hidden");$(b.leftPrevPage).css("display","none");$(b.leftSidePrevPageContainer).css("display","none");$(b.leftSidePrevPageContainer).css("background-color","white");b.leftPrevPage.o,"")};b.leftSideImg.onload=function(){if(b.config.leftPage.type!="sectionpage"){b.leftSideImageLoad()}if(b.config.rightPage.type=="sectionpage"){b.rightSideImageLoad()}if(b.mode=="single"){var c=b.returnActiveImageContainer();if(c!=null&&c.className.indexOf("leftSideImgContainer")!=-1){$(b.leftSideImg).css("visibility","")}else{$(b.leftSideImg).css("visibility","hidden")}}else{$(b.leftSideImg).css("visibility","")}if(a){$(b.hiddenLeftImg).css("display","")}else{b.hiddenLeftImg.onload=function(){$(b.hiddenLeftImg).css("display","")}}};b.hiddenLeftImg.onload=function(){a=true};if(Ext.browser.is.IE||navigator.appVersion.indexOf("Edge")!=-1){b.leftSide.setZIndex(9)}else{b.leftSide.element.dom.style.zIndex="8"}if(b.config.leftPage.type=="leftHandAd"){if(settings.leftSideAd.link!=null){b.leftSideMediaDiv.onclick=function(){window.open(settings.leftSideAd.link,"_blank")};b.leftSideMediaDiv.addEventListener("touchstart",function(){window.open(settings.leftSideAd.link,"_blank")});$(b.leftSideMediaDiv).addClass("pointerCursor")}}},getImageUrl:function(b,c){var a=this;if(b!=null){if(settings.page.useMobileFullJpg){return"http://pages.mobile.cdn.pagesuite.com/images/"+c.guid+"/full.jpg"}else{if(settings.page.highResImage){return b.replace("page.jpg","largepage.jpg")}}}else{if(c.type=="leftHandAd"&&c.adType=="dfp"){a.setupDfpLeftSideAdvert()}}return b},setupDfpLeftSideAer++},setDfp:function(){var d=this;if(d.adSlot1!=null&&typeof googletag!="undefined"){googletag.destroySlots([d.adSlot1])}var b="1024";var a="768";if(settings.leftSideAd.adSizes!=null){var c=settings.leftSideAd.adSizes.split(",");if(c!=null&&c.length==2){a=c[0];b=c[1]}}googletag.cmd.push(function(){try{d.adSlot1=googletag.defineSlot("/"+settings.leftSideAd.networkcode+"/"+settings.leftSideAd.adunit,[parseInt(a),parseInt(b)],d.advertDiv.id);d.adSlot1.addService(googletag.pubads());googletag.pubads().addEventListener("slotRenderEnded",function(g){if(g.slot==d.adSlot1){d.leftHandAdLoaded=!g.isEmpty;d.resizeDfp()}});googletag.enableServices()}catch(f){console.log(f)}});googletag.cmd.id)});var e=$(d.leftSideImageContainer).find("iframe");if(e[0]!=null){d.iframe=e[0];d.thisFrameContent=d.iframe.contentDocument||d.iframe.contentWindow.document;d.resizeDfp()}},resizeDfp:function(){var f=this;var e=f.height;var b=f.width;var c=1024;var a=768;if(settings.leftSideAd.adSizes!=null){var d=settings.leftSideAd.adSizes.split(",");if(d!=null&&d.length==2){c=d[1];a=d[0]}}var g=1;if(c>e){g=e/c}if(a*g>b){g=b/a}f.applyAdvertScale(g)},applyAdvertScale:function(b){var a=this;if(a.advertDiv!=null){a.advertDiv.style.transformOrigin="100% 0%";a.advertDiv.style.transform="scale3d("+b+", "+b+", 1)"}},leftSideImageLoad:function(b){var c=this;if(c.element!=null){if(c.leftPage!=null){var a=c.isActivePage(c.leftSideImageContainer,c.rightSideImageContainer);if(c.zoomMode=="fit"){c.leftSideImageFit()}else{c.leftSideImageFill();c.setUpPageTurnForImageFill()}if(a){c.pageLoaded(c.leftSideImageContainer)}c.leftThumbnailLoaded=true;c.fireEvent("leftThumbnailLoaded");if(c.config.leftPage.type=="sectionpage"){$(c.leftSideImg).addClass("pointerCursor");c.setupSectionTap(c.leftSideImg,function(){c.fireEvent("goLeft")});c.leftSideMediaDiv.style.display="none"}}}},leftSideImageFit:function(){var e=this;var b=e.isActivePage(e.leftSideImageContainer,e.rightSideImageContainer);e.naturalWidth=$(e.leftSideImg)[0].naturalWidth;e.naturalHeight=$(e.leftSideImg)[0].naturalHeight;var f=e.naturalWidth/e.naturalHeight;e.leftSideHeight=e.height=$(e.element.dom).height()-e.readerPaddingY;e.leftSideWidth=e.width=e.height*f;var d=$(e.element.dom).width()/2-e.readerPaddingX;if(e.mode=="single"){d=$(e.element.dom).width()}if(e.config.leftPage.type=="sectionpage"){}if(e.width<d){e.leftSideImageContainer.initialImageWidth=e.width;e.leftSideImageContainer.initialImageHeight=e.height;e.initialTranslateY=e.readerPaddingY;e.leftSideImageContainer.style.width=e.width+"px";if(e.config.leftPage.type!="sectionpage"){$(e.leftSideImg).css("height",e.height)}$(e.leftSideImg).css("width",e.width);$(e.leftSidePrevPageContainer).css("height",e.height);$(e.leftSidePrevPageContainer).css("width",e.width);$(e.leftPrevPage).css("height",e.height+"px");$(e.leftPrevPage).css("width",(e.width)+"px");$(e.leftSideImg).css("transform-origin","100% 0% 0px");$(e.hiddenLeftImg).css("height",e.height);$(e.hiddenLeftImg).css("width",e.width);$(e.hiddenLeftGradient).css("height",e.height);$(e.hiddenLeftGradient).css("width",e.width);$(e.leftSideImageContainer).css("height","");var c=(e.height*e.height)+(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2))*(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));c=Math.sqrt(c);$(e.leftSideDiv).css("height",c+"px");$(e.leftSideDiv).css("width",c+"px");$(e.topLeft.element.dom).css("top",e.top+e.readerPaddingY);$(e.topLeft.element.dom).css("left",($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));$(e.bottomLeft.element.dom).css("left",($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));$(e.hiddenLeftImg).css("left",0);if(b){if(e.mode=="single"){e.initialTranslateX=((d)-e.width)/2;e.rightSide.element.dom.style.visibility="hidden";e.leftSide.element.dom.style.visibility="visible";$(e.rightSideImg).css("z-index","1")}else{e.initialTranslateX=(($(e.element.dom).width()/2)-e.width)}}}else{var f=e.naturalHeight/e.naturalWidth;e.leftSideWidth=e.width=d;e.leftSideHeight=e.height=e.width*f;e.leftSideImageContainer.initialImageWidth=e.width;e.leftSideImageContainer.initialImageHeight=e.height;e.leftSideImageContainer.style.width=e.width+"px";$(e.leftSideImg).css("height",e.height);$(e.leftSideImg).css("width",e.width);$(e.leftSidePrevPageContainer).css("height",e.height);$(e.leftSidePrevPageContainer).css("width",e.width);$(e.leftPrevPage).css("height",e.height);$(e.leftPrevPage).css("width",e.width);$(e.hiddenLeftImg).css("height",e.height);$(e.hiddenLeftImg).css("width",e.width);$(e.hiddenLeftGradient).css("height",e.height);$(e.hiddenLeftGradient).css("width",e.width);var c=(e.height*e.height)+(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2))*(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));c=Math.sqrt(c);$(e.leftSideDiv).css("height",c+"px");$(e.leftSideDiv).css("width",c+"px");if(e.config.leftPage.type!="sectionpage"){e.top=($(e.element.dom).height()-e.height)/2}if(b){e.initialTranslateY=e.top;if(typeof isTribReader!="undefined"&&isTribReader==true){}}$(e.topLeft.element.dom).css("top",e.top+e.readerPaddingY);$(e.topLeft.element.dom).css("left",($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));$(e.bottomLeft.element.dom).css("left",($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));$(e.bottomLeft.element.dom).css("bottom",e.top)}if(e.config.leftPage.type=="sectionpage"){$(e.leftSideImageContainer).css("height","");$(e.leftSideImg).css("height","");$(e.leftSideImageContainer).css("width",$(e.rightSideImageContainer).width());$(e.leftSideImg).css("width",$(e.rightSideImageContainer).width());e.topLeft.hide();e.bottomLeft.hide()}var g=60;if((navigator.maxTouchPoints)){g=70}e.gifLeft=e.topLeft.element.down("img").dom;$(e.gifLeft).css("width",g);$(e.gifLeft).css("height",g);$(e.gifLeft).css("transform","rotate(180deg) scale3d(1, 1, 1) translate3d("+g+"px, "+g+"px, 0px)");e.gifBottomLeft=e.bottomLeft.element.down("img").dom;$(e.gifBottomLeft).css("width",g);$(e.gifBottomLeft).css("height",g);$(e.gifBottomLeft).css("transform","scale3d(-1, 1, 1) translate3d("+g+"px, "+g+"px, 0px)")},failedClihis)},leftSideImageFill:function(){var e=this;var b=e.isActivePage(e.leftSideImageContainer,e.rightSideImageContainer);e.naturalWidth=$(e.leftSideImg)[0].naturalWidth;e.naturalHeight=$(e.leftSideImg)[0].naturalHeight;var f=e.naturalHeight/e.naturalWidth;var d=$(e.element.dom).width()/2-e.readerPaddingX;if(e.mode=="single"){d=$(e.element.dom).width()-(e.readerPaddingX*2);if(b){$(e.rightSideImg).css("z-index","1")}}e.leftSideWidth=e.width=Math.min(d,2000);e.leftSideHeight=e.height=(e.width*f)+e.readerPaddingY;$(e.leftSideImg).css("width",e.width);$(e.leftSideImg).css("height",e.height-e.readerPaddingY);$(e.leftSideImageContainer).css("height",e.height-e.readerPaddingY);$(e.leftSideImageContainer).css("width",e.width);$(e.leftSideDiv).css("width",e.width);$(e.leftSideDiv).css("height",e.height-e.readerPaddingY);e.leftSideImageContainer.initialImageWidth=e.width;e.leftSideImageContainer.initialImageHeight=e.height-e.readerPaddingY;e.initialTranslateY=e.readerPaddingY;e.initialTranslateX=((d)-e.width)/2+e.readerPaddingX;$(e.leftSideImg).css("height",e.height-e.readerPaddingY);$(e.leftSideImg).css("width",e.width);$(e.leftSidePrevPageContainer).css("height",e.height-e.readerPaddingY);$(e.leftSidePrevPageContainer).css("width",e.width);$(e.leftPrevPage).css("height",e.height-e.readerPaddingY);$(e.leftPrevPage).css("width",e.width);$(e.hiddenLeftImg).css("height",e.height-e.readerPaddingY);$(e.hiddenLeftImg).css("width",e.width);$(e.hiddenLeftGradient).css("height",e.height-e.readerPaddingY);$(e.hiddenLeftGradient).css("width",e.width);var c=(e.height*e.height)+(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2))*(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));c=Math.sqrt(c);$(e.leftSideDiv).css("height",c+"px");$(e.leftSideDiv).css("width",c+"px");e.scroller.setDisabled(false);if(e.scroller.maxPosition.x==0){e.scroller.setDirection("vertical")}e.scroller.setDirectionLock(true);var g=60;if((navigator.maxTouchPoints)){g=70}e.gifLeft=e.topLeft.element.down("img").dom;$(e.gifLeft).css("width",g);$(e.gifLeft).css("height",g);$(e.gifLeft).css("transform","rotate(180deg) scale3d(1, 1, 1) translate3d("+g+"px, "+g+"px, 0px)");if(e.config.leftPage.type=="sectionpage"){e.scroller.maxPosition.y=$(e.rightSideImg).height()-($(document).height()-$(e.rightSideImg).offset().top)}else{if(e.config.rightPage.type=="sectionpage"){e.scroller.maxPosition.y=$(e.leftSideImg).height()-($(document).height()-$(e.leftSideImg).offset().top)}}},rightSidePainted:function(){var b=this;var a=false;if(!Ext.browser.is.IE){if(b.element.dom.parentElement!=null){b.element.dom.parentElement.parentElement.style.overflow="hidden"}}b.top=0;$(b.rightSideImg).css("visibility","hidden");$(b.rightNextPage).css("display","none");$(b.rightSideNextPageContainer).css("display","none");$(b.rightSideNextPageContainer).css("background-color","white");b.rightNextPage.o,"")};b.rightSideImg.onload=function(){if(b.config.rightPage.type!="sectionpage"){b.rightSideImageLoad()}if(b.config.leftPage.type=="sectionpage"){b.leftSideImageLoad()}$(b.rightSideImg).css("visibility","");if(a){$(b.hiddenRightImg).css("display","")}else{if(b.hiddenRightImg!=null){b.hiddenRightImg.o,"")}}}if(settings.leftSideAd!=null&&b.config.leftPage!=null&&b.config.leftPage.type=="leftHandAd"&&(b.config.leftPage.adType=="dfp"||b.config.leftPage.adType=="url")){b.leftSidePainted()}};b.hiddenRightImg.otrue};var c=60;if((navigator.maxTouchPoints)){c=70}b.gifRight=b.topRight.element.down("img").dom;b.gifBottomRight=b.bottomRight.element.down("img").dom;$(b.gifRight).css("width",c);$(b.gifRight).css("height",c);$(b.gifBottomRight).css("width",c);$(b.gifBottomRight).css("height",c);$(b.gifRight).css("transform","translate3d("+c+"px, "+c+"px, 0px)");$(b.gifBottomRight).css("transform","translate3d("+c+"px, "+c+"px, 0px)");$(b.rightSideImg).attr("src",b.getImageUrl(b.rightPage,b.rightPageObject));$(b.rightSideImg).css("position","absolute");$(b.rightNextPage).attr("src",b.getImageUrl(b.nextPage,b.nextPageObject));b.rightSideImg.type=b.config.rightPage.type;if(b.nextPage==null){b.topRight.element.dom.style.visibility="hidden";b.bottomRight.element.dom.style.visibility="hidden"}if(b.hiddenRightPage!=null){if(b.hiddenRightPage.length>0){$(b.hiddenRightImg).css("display","none");$(b.hiddenRightImg).attr("src",b.getImageUrl(b.hiddenRightPage,b.hiddenRightPageObject))}else{$(b.hiddenRightImg).css("visibility","hidden")}}else{$(b.hiddenRightImg).css("visibility","hidden")}$(b.rightSideImageContainer).css("transform-origin","0% 0% 0px");b.rightSide.element.dom.style.zIndex="8"},rightSideImageLoad:function(b){var c=this;if(c.element!=null){if(c.rightPage!=null){var a=c.isActivePage(c.rightSideImageContainer,c.leftSideImageContainer);if(c.zoomMode=="fit"){c.rightSideImageFit()}else{c.rightSideImageFill();c.setUpPageTurnForImageFill()}if(a){c.pageLoaded(c.rightSideImageContainer)}c.rightThumbnailLoaded=true;c.fireEvent("rightThumbnailLoaded");if(c.config.rightPage.type=="sectionpage"){$(c.rightSideImg).addClass("pointerCursor");$(c.rightSideImg).css("z-index","99999");c.setupSectionTap(c.rightSideImg,function(){c.fireEvent("goRight")})}}}},rightSideImageFit:function(){var e=this;var b=e.isActivePage(e.rightSideImageContainer,e.leftSideImageContainer);e.naturalWidth=$(e.rightSideImg)[0].naturalWidth;e.naturalHeight=$(e.rightSideImg)[0].naturalHeight;var f=e.naturalWidth/e.naturalHeight;e.rightSideHeight=e.height=$(e.element.dom).height()-e.readerPaddingY;e.rightSideWidth=e.width=e.height*f;if(e.config.rightPage.type=="sectionpage"){if(e.leftSideImg!=null){e.width=$(e.leftSideImg).width()}e.topRight.hide();e.bottomRight.hide()}var d=$(e.element.dom).width()/2-e.readerPaddingX;if(e.mode=="single"){d=$(e.element.dom).width()}if(e.width<d){e.rightSideImageContainer.initialImageWidth=e.width;e.rightSideImageContainer.initialImageHeight=e.height;e.initialTranslateY=e.readerPaddingY;if(e.config.rightPage.type!="sectionpage"){$(e.rightSideImg).css("height",e.height)}else{$(e.rightSideImg).css("height","")}$(e.rightSideImg).css("width",e.width);$(e.rightSideImageContainer).css("height",e.height);$(e.rightSideImageContainer).css("width",e.width);$(e.rightSideNextPageContainer).css("height",e.height);$(e.rightSideNextPageContainer).css("width",e.width);$(e.rightNextPage).css("height",e.height);$(e.rightNextPage).css("width",e.width);$(e.hiddenRightImg).css("height",e.height);$(e.hiddenRightImg).css("width",e.width);$(e.hiddenRightGradient).css("height",e.height);$(e.hiddenRightGradient).css("width",e.width);var c=(e.height*e.height)+(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2))*(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));c=Math.sqrt(c);$(e.rightSideDiv).css("height",c+"px");$(e.rightSideDiv).css("width",c+"px");$(e.topRight.element.dom).css("top",e.top+e.readerPaddingY);$(e.topRight.element.dom).css("right",($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));$(e.bottomRight.element.dom).css("right",($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));if(b){if(e.mode=="single"){e.initialTranslateX=((d)-e.width)/2;e.rightSide.element.dom.style.visibility="visible";e.leftSide.element.dom.style.visibility="hidden"}else{e.initialTranslateX=(($(e.element.dom).width()/2)-e.width)}}}else{var f=e.naturalHeight/e.naturalWidth;e.rightSideWidth=e.width=d;e.rightSideHeight=e.height=e.width*f;e.rightSideImageContainer.initialImageWidth=e.width;e.rightSideImageContainer.initialImageHeight=e.height;$(e.rightSideImg).css("height",e.height);$(e.rightSideImg).css("width",e.width);$(e.rightSideImageContainer).css("height",e.height);$(e.rightSideImageContainer).css("width",e.width);$(e.rightSideNextPageContainer).css("height",e.height);$(e.rightSideNextPageContainer).css("width",e.width);$(e.rightNextPage).css("height",e.height);$(e.rightNextPage).css("width",e.width);$(e.hiddenRightImg).css("height",e.height);$(e.hiddenRightImg).css("width",e.width);$(e.hiddenRightGradient).css("height",e.height);$(e.hiddenRightGradient).css("width",e.width);var c=(e.height*e.height)+(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2))*(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));c=Math.sqrt(c);$(e.rightSideDiv).css("height",c+"px");$(e.rightSideDiv).css("width",c+"px");if(e.config.rightPage.type!="sectionpage"){e.top=($(e.element.dom).height()-e.height)/2}if(b){e.initialTranslateY=e.top;if(typeof isTribReader!="undefined"&&isTribReader==true){}}$(e.topRight.element.dom).css("top",e.top+e.readerPaddingY);$(e.topRight.element.dom).css("right",($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));$(e.bottomRight.element.dom).css("right",($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));$(e.bottomRight.element.dom).css("bottom",e.top)}if(e.config.leftPage.type=="sectionpage"){$(e.leftSideImageContainer).css("height","");$(e.leftSideImageContainer).css("width",e.width);$(e.leftSideImg).css("width",e.width)}},rightSideImageFill:function(){var e=this;var b=e.isActivePage(e.rightSideImageContainer,e.leftSideImageContainer);e.naturalWidth=$(e.rightSideImg)[0].naturalWidth;e.naturalHeight=$(e.rightSideImg)[0].naturalHeight;var f=e.naturalHeight/e.naturalWidth;var d=$(e.element.dom).width()/2-e.readerPaddingX;if(e.mode=="single"){d=$(e.element.dom).width()-(e.readerPaddingX*2)}e.rightSideWidth=e.width=Math.min(d,2000);e.rightSideHeight=e.height=(e.width*f)+e.readerPaddingY;$(e.rightSideImg).css("width",e.width);$(e.rightSideImg).css("height",e.height-e.readerPaddingY);$(e.rightSideImageContainer).css("height",e.height-e.readerPaddingY);$(e.rightSideImageContainer).css("width",e.width);$(e.rightSideDiv).css("width",e.width);$(e.rightSideDiv).css("height",e.height-e.readerPaddingY);e.rightSideImageContainer.initialImageWidth=e.width;e.rightSideImageContainer.initialImageHeight=e.height-e.readerPaddingY;e.initialTranslateY=e.readerPaddingY;e.initialTranslateX=((d)-e.width)/2+e.readerPaddingX;$(e.rightSideImageContainer).css("height",e.height-e.readerPaddingY);$(e.rightSideImageContainer).css("width",e.width);$(e.rightSideNextPageContainer).css("height",e.height-e.readerPaddingY);$(e.rightSideNextPageContainer).css("width",e.width);$(e.rightNextPage).css("height",e.height-e.readerPaddingY);$(e.rightNextPage).css("width",e.width);$(e.hiddenRightImg).css("height",e.height-e.readerPaddingY);$(e.hiddenRightImg).css("width",e.width);$(e.hiddenRightGradient).css("height",e.height-e.readerPaddingY);$(e.hiddenRightGradient).css("width",e.width);var c=(e.height*e.height)+(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2))*(e.width-($(e.element.dom).width())-e.width-($(e.element.dom).width()/2));c=Math.sqrt(c);$(e.rightSideDiv).css("height",c+"px");$(e.rightSideDiv).css("width",c+"px");e.scroller.setDisabled(false);if(e.scroller.maxPosition.x==0){e.scroller.setDirection("vertical")}e.scroller.setDirectionLock(true);if(e.config.rightPage.type=="sectionpage"){e.scroller.maxPosition.y=$(e.leftSideImg).height()-($(document).height()-$(e.leftSideImg).offset().top);e.topRight.hide();e.bottomRight.hide()}else{if(e.config.leftPage.type=="sectionpage"){e.scroller.maxPosition.y=$(e.rightSideImg).height()-($(document).height()-$(e.rightSideImg).offset().top)}}},pageLoaded:function(a){var b=this;b.imagePageHeight=a.initialImageHeight;b.imageNaturalHeight=a.image.naturalHeight;b.zoomDivContainer.setStyle("visibility:visible");var c=(b.getMaxZoomWidth()/a.initialImageWidth);var d=Math.max(1,c);b.setMaxScale(d);$("#slider").attr("max",d);if(Ext.browser.is.IE&&b.zoomMode=="fit"){b.scrollerDiv.dom.style.height=($(b.returnActiveImageContainer()).height()+(b.initialTranslateY*2))+"px"}b.isPageRendered=true;b.resetPage()},isActivrn c},returnActiveImageContrn a},getImageContnull},getThumbnail:function(c,b){var a=this;var d="";if(b.image!=null){d=b.image;if(b.pageNum>1){if(b.image.indexOf("pages.cdn.pagesuite.com")!=-1){d="http://pages.mobile.cdn.pagesuite.com/images/"+a.retrievePageGuid(b)+"/tablet.jpg"}}}c.src=d},completePDFLoaded:function(b){var a=this;if(a.isinitialized&&!a.hasTiled){mainPanel.fireEvent("removeSplash");a.loadPDFs(b);a.tryRenderMedia(true)}else{}},tryRenderrue}},loadPDFs:function(d){var b=this;var a=true;if(settings.page.ignorePDFOnFit!=null){var c=b.returnImageRatio();if(c<1){a=false}}if(a){b.leftSideImageContainer.tileDiv.style.display="";b.rightSideImageContainer.tileDiv.style.display="";b.leftSideImageContainer.tileDiv2.style.display="";b.rightSideImageContainer.tileDiv2.style.display="";if(b.leftThumbnailLoaded){b.loadPDF(b.leftSideImageContainer,b.leftSideImg,d)}else{b.on("leftThumbnailLoaded",function(){b.loadPDF(b.leftSideImageContainer,b.leftSideImg,d)})}if(b.rightThumbnailLoaded){b.loadPDF(b.rightSideImageContainer,b.rightSideImg,d)}else{b.on("rightThumbnailLog,d)})}}else{b.leftSideImageContainer.tileDiv.style.display="none";b.rightSideImageContainer.tileDiv.style.display="none";b.leftSideImageContainer.tileDiv2.style.display="none";b.rightSideImageContainer.tileDiv2.style.display="none"}},loadPDF:function(b,e,f){var c=this;if(b.pageNo>0&&c.imageVisible(e)){if(e!=null){if(e.src.indexOf("pages.mobile.cdn.pagesuite.com")!=-1||e.src.indexOf("pages.cdn.pagesuite.com")!=-1||e.src.indexOf("pages.pagesuite.com")!=-1||e.src.indexOf("pagesn.pagesuite.com")!=-1){var d={tiled:false,pageNumber:b.pageNo,pdfPage:null};b.tilePDF=d;var a=c.returnEditionPage(b);if(a.pdfPage!=null){c.setUpTiledPDFPage(a.pdfPage,b)}else{if(a.pdf!=""){c.requestPage(a,b)}}}else{}}else{}}else{}},imageVirn a},returnEditionull},requestPage:function(a,b){var c=this;if(a.pdfRequest!=null){a.pdfRequest.then(function(d){if(d.pdfInfo.numPages>0){d.getPage(1).then(function(e){c.setUpTiledPDFPage(e,b)})}})}},getCanvases:function(b){var c=this;var a={activeCanvas:b.tileCanvas,nonActiveCanvas:b.tileCanvas2};if(b.activeCanvas==2){a.activeCanvas=b.tileCanvas2;a.nonActiveCanvas=b.tileCanvas}return a},setUpTiledPDFPage:function(j,o,e){var n=this;if(!o.togglingDPS){if(o.activeCanvas==1){o.activeCanvas=2}else{o.activeCanvas=1}}else{o.togglingDPS=false}var h=n.getCanvases(o);var b=h.activeCanvas;var l=h.nonActiveCanvas;if(typeof b!=undefined&&b!=null){n.setUpCanvas(o,b,j);var g=j.pageInfo.view[2]-j.pageInfo.view[0];var m=o.initialImageWidth;var f=(m*n.scale)/g;var k=j.getViewport(f);if(!!window.renderOptions&&window.renderOptions.disableCanvasAlpha){var a=b.getContext("2d",{alpha:false})}else{var a=b.getContext("2d")}var d={canvasContext:a,viewport:k};b.style.visibility="hidden";var p=function(){var r=n.imagetoload;clearTimeout(b.timeout);b.style.animationName="fadeIn";b.style.animationDuration="0.25s";b.style.visibility="visible";l.timeout=setTimeout(function(){l.style.visibility="hidden"},250);n.hasTiled=true};var q=function(){n.loadPDF(o)};var c=function(){n.pdfsLoaded=false;n.hasLoaded=false};if(!n.checkHighResImage(a,f)){n.fireEvent("renderPDF",j,d,n.getPageNo(),o.pageNo,p,q,c)}}},checkHighResImage:function(a,c){var b=this;devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;var d=b.returnImageRatio();if(settings.page.ignorePDFOnFit!=null&&d<1){return true}else{if(devicePixelRatio<=2&&backingStoreRatio<=1&&b.zoomMode=="fit"&&b.scale<=1&&settings.page.highResImage!=null){return true}else{return false}}},returnImage b/d},setUpCanvas:function(h,d,f){var g=this;if(g.element!=null){var b=h.initialImageWidth;var k=h.initialImageHeight;if(h.activeCanvas==1){h.tileDiv.style.width="100%";h.tileDiv.style.height="100%";h.tileDiv.style.top=0+"px";h.tileDiv.style.left=0+"px";h.tileDiv.style.webkitTransform="scale3d("+(1/g.scale)+","+(1/g.scale)+",1)";h.tileDiv.style.MozTransform="scale("+(1/g.scale)+","+(1/g.scale)+")";h.tileDiv.style.msTransform="scale3d("+(1/g.scale)+","+(1/g.scale)+",1)"}else{h.tileDiv2.style.width="100%";h.tileDiv2.style.height="100%";h.tileDiv2.style.top=0+"px";h.tileDiv2.style.left=0+"px";h.tileDiv2.style.webkitTransform="scale3d("+(1/g.scale)+","+(1/g.scale)+",1)";h.tileDiv2.style.MozTransform="scale("+(1/g.scale)+","+(1/g.scale)+")";h.tileDiv2.style.msTransform="scale3d("+(1/g.scale)+","+(1/g.scale)+",1)"}if(!!window.renderOptions&&window.renderOptions.disableCanvasAlpha){var c=d.getContext("2d",{alpha:false})}else{var c=d.getContext("2d")}devicePixelRatio=parseInt(window.devicePixelRatio)||1,backingStoreRatio=c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1;if(devicePixelRatio<1){devicePixelRatio=1}ratio=devicePixelRatio/backingStoreRatio;if(Ext.browser.is.Chrome&&g.getMaxScale()>2&&g.getMaxScale()/2<g.scale){ratio=1}h.tileDiv.style.display="";h.tileDiv2.style.display="";var a=1/ratio;if(a!=1){c.setTransform(a/2,0,0,a/2,0,0)}if(typeof auto==="undefined"){auto=true}if(auto&&devicePixelRatio!==backingStoreRatio){var e=(b*g.scale);var j=(k*g.scale);d.width=e*ratio;d.height=j*ratio;d.style.width=e+"px";d.style.height=j+"px";c._transformMatrix=[ratio,0,0,ratio,0,0];c.setTransform(1,0,0,1,0,0);c.scale(ratio,ratio);g.scaledCanvas=true}else{d.width=b*g.scale;d.height=k*g.scale;d.style.width=(b*g.scale)+"px";d.style.height=(k*g.scale)+"px"}d.desx=(g.scroller.position.x*-1);d.desxland=d.desx+(g.initialImageWidth*g.scale);d.desy=(g.scroller.position.y*-1);d.desw=parseInt(g.initialImageWidth*g.scale);d.desh=parseInt(g.initialImageHeight*g.scale)}},loadMediaImage:function(c,e){var d=this;var a=c.pageNo;if(d.canLoadMedia(a)){var b=flatPlanData.pageGroups[a-1+pageOffset].pages[0].pageNum;d.fireEvent("loadMedia",d,b,e)}d.mediaLoaded=true},canLoadlse}},onZoomStart:function(f,a){var g=this;var c=(g.pageWidth/2);var b=(g.pageHeight/2);var e=c+g.scroller.position.x;var d=b+g.scroller.position.y;var k=g.returnActiveImageContainer();var j=(k.initialImageHeight)*g.scale;var h=0;if(j>$(g.element.dom).height()&&g.zoomMode=="fit"&&!Ext.browser.is.Firefox){h=g.initialTranslateY}g.zoomPointX=((e)/(g.scale));g.zoomPointY=((d)/(g.scale))+h;g.offsetX=(c-g.zoomPointX);g.offsetY=(b-g.zoomPointY);g.offsetScrollerX=g.offsetX+g.scroller.position.x;g.offsetScrollerY=(g.offsetY+g.scroller.position.y);g.initializeTouch(g.zoomPointX,g.zoomPointY);g.translateX+=g.offsetScrollerX;g.translateY+=g.offsetScrollerY;g.applyTransform(g.scale)},onZoom:function(c,b){var a=this;a.currentScale=b.dom.valueAsNumber;a.applyTransform(a.currentScale)},onZoomEnd:function(c,b){var a=this;if(a.currentScale<=1){a.resetPage();a.finishZoom(false);if(a.zoomMode=="fit"&&a.mode=="double"){a.showNavButtons()}else{a.hideNavButtons()}}else{a.scale=a.currentScale;a.finishZoom(false);a.hideNavButtons()}if(a.zoomTileInterval!=null){clearInterval(a.zoomTileInterval)}a.zoomTileInterval=setInterval(function(){a.zoomTile(a)},500)},zoong()},zoomOnPoint:function(b,a){var c=this;if(settings.reader.doubleTapFullZoom!=null&&settings.reader.doubleTapFullZoom!="true"){if(c.scale<c.getMaxScale()/2){c.initializeTouch(b,a);c.scale=c.getMaxScale()/2;c.zoomLevel="mid";if(document.getElementById("slider")!=null){document.getElementById("slider").value=c.getMaxScale()/2;c.hideNavButtons()}}else{if(c.scale<c.getMaxScale()){b=(c.scroller.position.x+event.pageX)/c.scale;a=(c.scroller.position.y+event.pageY)/c.scale;c.initializeTouch(b,a);c.scale=c.getMaxScale();c.zoomLevel="full";if(document.getElementById("slider")!=null){document.getElementById("slider").value=c.getMaxScale();c.hideNavButtons()}}else{c.zoomLevel="none";c.doubleTapReset()}}}else{if(c.scale==1){c.initializeTouch(b,a);c.scale=c.getMaxScale();if(document.getElementById("slider")!=null){document.getElementById("slider").value=c.getMaxScale();c.hideNavButtons()}}else{c.doubleTapReset()}}},doubleTaps()}},onDoubleTap:function(c){var b=this;if(b.canDoubleTap){b.canDoubleTap=false;var a=b.scroller.position;b.zoomPosition=b.scroller.position;b.zoomPointX=(c.pageX-(b.wrapAdOffset)+b.scroller.position.x)/b.scale;b.zoomPointY=(c.pageY-(b.topPadding)+b.scroller.position.y)/b.scale;var f=b.scroller.position.y/b.scroller.maxPosition.y;var e=(b.pageWidth/2);var d=(b.pageHeight/2);b.offsetY=(c.pageY-b.zoomPointY);if(b.mode=="double"&&b.leftPage==null){var g=(b.pageWidth/2);if(b.zoomPointX<g){b.canDoubleTap=true;return}}else{if(b.mode=="double"&&b.rightPage==null){var g=(b.pageWidth/2);if(b.zoomPointX>g){b.canDoubleTap=true;return}}}b.zoomOnPoint(b.zoomPointX,b.zoomPointY);b.finishZoom(true);setTimeout(function(){b.canDoubleTap=true},500)}},resetPage:function(){var c=this;var d=c.returnActiveImageContainer();var b=d.clientWidth;var a=d.clientHeight;var e=(b*2);if(c.mode=="single"){e=b}c.zoomDiv.dom.style.width=e+"px";c.zoomDiv.dom.style.height=a+"px";c.translateX=c.initialTranslateX;c.translateY=c.initialTranslateY;c.scale=1;c.applyTransform(c.scale);if(document.getElementById("slider")!=null){document.getElementById("slider").value=1}},initializeTouch:function(b,a){var c=this;c.elementTouchX=b-c.translateX;c.elementTouchY=a-c.translateY;c.setOrigin(c.elementTouchX,c.elementTouchY)},setOrigin:function(a,c){var b=this;b.zoomDiv.dom.style.webkitTransformOrigin=a+"px "+c+"px";b.zoomDiv.dom.style.MozTransformOrigin=a+"px "+c+"px";b.zoomDiv.dom.style.msTransformOrigin=a+"px "+c+"px";b.zoomDiv.dom.style.transformOrigin=a+"px "+c+"px"},applyTran000"},finisen"}},resetZoom:function(n){var m=this;if(m.rightSideMediaDiv!=null){if(m.rightSideMediaDiv.children.length>0){for(var g=0;g<m.rightSideMediaDiv.children.length;g++){try{var o=m.rightSideMediaDiv.children[g].children[0].children[0].children[0].children[0].children[0];if(o.className=="tool-tip"){o.style.fontSize="12px";o.style.padding="5px";o.style.border="2px solid white";o.style.borderRadius="5px"}}catch(j){}}}}if(m.leftSideMediaDiv!=null){if(m.leftSideMediaDiv.children.length>0){for(var g=0;g<m.leftSideMediaDiv.children.length;g++){try{var o=m.leftSideMediaDiv.children[g].children[0].children[0].children[0].children[0].children[0];if(o.className=="tool-tip"){o.style.fontSize="12px";o.style.padding="5px";o.style.border="2px solid white";o.style.borderRadius="5px"}}catch(j){}}}}m.scrollerDiv.dom.style.width="";if(m.zoomMode=="fit"){if(Ext.browser.is.IE){m.scrollerDiv.dom.style.height=($(m.returnActiveImageContainer()).height()+(m.initialTranslateY*2))+"px"}else{m.scrollerDiv.dom.style.height=""}}else{if(m.mode=="single"){m.scrollerDiv.dom.style.height=$(m.returnActiveImageContainer()).height()+"px"}else{if(m.config.rightPage.type!="sectionpage"&&m.config.leftPage.type!="sectionpage"){var a=Math.max(m.leftSideImg.clientHeight,m.rightSideImg.clientHeight);m.scrollerDiv.dom.style.height=a+"px"}else{m.scrollerDiv.dom.style.height=$(m.returnActiveImageContainer()).height()+"px"}}}if(m.zoomMode=="fit"){m.scrollTo(0,0)}else{var h=m.zoomPointX-m.initialTranslateX;var f=m.zoomPointY-m.initialTranslateY;var l=h*m.scale;var k=f*m.scale;var c=l-m.zoomPointX+m.offsetX;var b=k-m.zoomPointY-m.offsetY;if(m.mode=="single"){m.translateX=m.initialTranslateX}m.translateY=m.initialTranslateY;var d=m.offsetY;m.offsetX=0;m.offsetY=0;b=Math.max(m.scroller.minPosition.y,b);m.scroller.refresh(m.scroller);b=Math.min(m.scroller.maxPosition.y,b);m.scroller.scrollTo(0,b)}if(m.zoomMode=="fill"){m.scroller.setDisabled(false);m.scroller.setDirection("vertical");m.scroller.setDirectionLock(true);m.fireEvent("fillMode",m);if(m.mode=="double"){if(m.config.rightPage.type=="sectionpage"){$(m.topRight.element.dom).css("display","none")}else{$(m.topRight.element.dom).css("display","")}if(m.config.leftPage.type=="sectionpage"){$(m.topLeft.element.dom).css("display","none")}else{$(m.topLeft.element.dom).css("display","")}}}else{m.scroller.setDisabled(true);m.fireEvent("fitMode");if(m.config.rightPage.type=="sectionpage"){}if(m.config.leftPage.type=="sectionpage"){$(m.leftSideImg).css("height","")}}m.offsetX=0;m.offsetY=0;m.scroller.position.x=0;m.zoomDiv.dom.style.position="absolute";m.zoomDiv.dom.style.left="";m.hiddenLeft.element.dom.style.left="";if(m.zoomMode=="fit"){m.fireEvent("fitMode")}else{m.fireEvent("fillMode")}if(settings.leftSideAd!=null&&m.config.leftPage.type=="leftHandAd"&&m.config.leftPage.adType=="dfp"){if(m.isinitialized){m.resizeDfp()}}m.startTiling()},setZoom:function(a){var u=this;currentPageDebug=this;if(u.rightSideMediaDiv!=null){if(u.rightSideMediaDiv.children.length>0){for(var o=0;o<u.rightSideMediaDiv.children.length;o++){try{var f=u.rightSideMediaDiv.children[o].children[0].children[0].children[0].children[0].children[0];if(f.className=="tool-tip"){f.style.fontSize=(12/u.scale)+"px";f.style.padding=(5/u.scale)+"px";f.style.border=(2/u.scale)+"px solid white";f.style.borderRadius=(5/u.scale)+"px";f.style.backfaceVisibility="hidden"}}catch(q){}}}}if(u.leftSideMediaDiv!=null){if(u.leftSideMediaDiv.children.length>0){for(var o=0;o<u.leftSideMediaDiv.children.length;o++){try{var f=u.leftSideMediaDiv.children[o].children[0].children[0].children[0].children[0].children[0];if(f.className=="tool-tip"){f.style.fontSize=(12/u.scale)+"px";f.style.padding=(5/u.scale)+"px";f.style.border=(2/u.scale)+"px solid white";f.style.borderRadius=(5/u.scale)+"px";f.style.backfaceVisibility="hidden"}}catch(q){}}}}var t=u.returnActiveImageContainer();u.zoomDiv.dom.style.width=(100/u.scale)+"%";var c=(t.initialImageWidth)*u.scale*2;var h=(u.pageWidth*u.scale);if(u.mode=="single"){c=(t.initialImageWidth)*u.scale}var l=(t.initialImageHeight)*u.scale;var b=(u.pageHeight*u.scale);var v=Math.max(c,h);var s=Math.max(l,b);u.scrollerDiv.dom.style.width=v+"px";u.scrollerDiv.dom.style.height=s+"px";u.setOrigin(0,0);var d=true;u.zoomDiv.dom.style.position="absolute";u.zoomDiv.dom.style.left="";if(u.mode=="single"){u.translateX=u.initialTranslateX*u.scale;u.translateY=u.initialTranslateY*u.scale;u.offsetX=(u.offsetX*-1)+(u.initialTranslateX*u.scale);u.offsetY=(u.offsetY)+(u.initialTranslateY*u.scale)}else{u.translateX=0;u.translateY=u.initialTranslateY*u.scale;u.offsetX=(u.offsetX*-1)+(u.initialTranslateX*u.scale);u.offsetY=((u.offsetY*-1)+(u.initialTranslateY*u.scale))*-1}u.applyTransform(u.scale);u.scroller.setDisabled(false);u.scroller.setDirection("both");var m=u.zoomPointX-u.initialTranslateX;var j=u.zoomPointY-u.initialTranslateY;var r=m*u.scale;var p=j*u.scale;var n=r-u.zoomPointX+u.offsetX;var k=p-u.zoomPointY-u.offsetY;if(u.mode=="single"){u.translateX=u.initialTranslateX}u.translateY=u.initialTranslateY;var g=u.offsetY;u.offsetX=0;u.offsetY=0;if(Ext.browser.is.Firefox){if(u.scrollerDiv.setScrollable!=null){u.scrollerDiv.setScrollable({direction:"both"});u.scrollerDiv.getScrollable().getScroller().scrollTo(n,k)}else{if(u.zoomMode=="fit"){u.scroller.maxPosition.x=h-$(u.element.dom).width();u.scroller.maxPosition.y=b-$(u.element.dom).height();if(k<=0){k=0}else{if(k>=b-$(u.element.dom).height()){k=b-$(u.element.dom).height()}}if(n<=0){n=0}else{if(n>=h-$(u.element.dom).width()){n=h-$(u.element.dom).width()}}}else{u.scroller.maxPosition.x=h-$(u.element.dom).width();u.scroller.maxPosition.y=l-$(u.element.dom).height();if(k<=0){k=0}else{if(k>=l-$(u.element.dom).height()){k=l-$(u.element.dom).height()}}if(n<=0){n=0}else{if(n>=h-$(u.element.dom).width()){n=h-$(u.element.dom).width()}}}u.scroller.getMaxPosition()}}else{u.scrollerDiv.dom.style.height=(l)+"px";if(u.zoomMode=="fit"){u.resetTop(l);k-=(u.translateY)*u.scale}}u.scroller.scrollTo(n,k);if(a){u.startTiling()}},resetTop:function(a){var b=this;var c=0;if(a<$(b.element.dom).height()){c=($(b.element.dom).height()-a)/2}b.zoomDiv.dom.style.transform="translate3d("+(b.translateX*b.scale)+"px, "+c+"px, 0) scale3d("+b.scale+","+b.scale+",1)"},scrollTo:function(a,c){var b=this;b.scroller.scrollTo(a,c)},hideNavButtons:function(){var a=this;a.topRight.setHidden(true);a.topLeft.setHidden(true);a.bottomRight.setHidden(true);a.bottomLeft.setHidden(true)},showNavBulse)},startTiling:function(){var a=this;a.loadPDFs()},toggleDPS:function(c,a){var b=this;b.checkPageMode(c);b.rightSideImageContainer.togglingDPS=true;b.leftSideImageContainer.togglingDPS=true;b.initialTranslateX=0;b.initialTranslateY=0;b.fireEvent("checkAudioOnToggle",b);b.resetZoom()},checkPage()}},toggleDPSDouble:function(){var c=this;c.mode="double";c.leftSide.element.dom.style.visibility="visible";$(c.leftSideImg).css("visibility","");c.leftSide.element.dom.style.right="0%";c.leftSide.setWidth("50%");c.leftSideDiv.style.left="";c.leftSideImageContainer.style.left="";c.rightSide.element.dom.style.visibility="visible";$(c.rightSideImg).css("visibility","");c.rightSide.element.dom.style.left="50%";c.rightSide.setWidth("50%");c.rightSideDiv.style.left="";c.rightSideImageContainer.style.left="";var a=c.getPageNo();a=flatPlanData.pageMapper[a+1];c.rightSide.setLeft("50%");c.hiddenRight.setHidden(false);c.hiddenLeft.setHidden(false);if(a+pageOffset==0){c.leftSide.element.dom.style.visibility="hidden"}else{if(a==2){c.hiddenLeftImg.style.visibility="hidden"}}c.rightSide.element.down("canvas").show();c.leftSide.element.down("canvas").show();var b=Ext.getStore("SettingStore");if(c.zoomMode=="fill"){c.setUpPageTurnForImageFill()}else{c.hiddenRight.show();c.hiddenLeft.show();c.showNavButtons();c.fireEvent("setupKeys");$(c.topRight.element.dom).css("top",c.top);$(c.topRight.element.dom).css("right",($(c.element.dom).width())-c.width-($(c.element.dom).width()/2))}if(b.leftSideAd!=null&&c.config.leftPage.type=="leftHandAd"&&c.config.leftPage.adType=="dfp"){if(c.isinitialized){c.resizeDfp()}}},toggleDPSSingle:function(){var g=this;g.mode="single";var c=g.leftSide;var f=g.leftSideDiv;var k=g.leftSideImageContainer;var h=g.rightSide;var b=g.rightSideDiv;var e=g.rightSideImageContainer;var a=g.getPageNo();if(a==-1){a=0}a=flatPlanData.reversePageMapper[a+1];var d=g.getPageNo()+1;var j=g.returnAdvertOffset(d+pageOffset);if((a+j)%2==0){c=g.rightSide;f=g.rightSideDiv;k=g.rightSideImageContainer;h=g.leftSide;b=g.leftSideDiv;e=g.leftSideImageContainer;g.rightSide.element.down("canvas").hide()}else{g.leftSide.element.down("canvas").hide()}c.element.dom.style.visibility="hidden";h.element.dom.style.left="0%";if(g.returnActiveImageContainer().className.indexOf("leftSideImgContainer")!=-1){$(g.leftSideImg).css("visibility","")}else{$(g.leftSideImg).css("visibility","hidden")}b.style.left="0%";e.style.left="0%";g.rightSide.setLeft(0);g.hiddenRight.setHidden(true);g.hiddenLeft.setHidden(true);g.hideNavButtons()},toggleDPSNonA(c)}},toggleDPSPageNumber:function(g,f){var e=this;var a=e.returnReverseMappedPageNumber(e.getPageNo());var c=e.returnReverseMappedPageNumber(f.getPageNo());var b=a-c;var d=0;if(g=="double"){if(flatPlanData.bookmarks!=null){if(flatPlanData.bookmarks.indexOf(c+2)!=-1&&b>0){d=0}else{if(flatPlanData.bookmarks.indexOf(c+1)!=-1&&b<0){d=0}else{d=b}}}else{d=b}}else{d=parseInt(b/-2)}e.adjustPageNo(d,g)},returnMappedPageN]+1)},returnReverseMappedPageN]-1)},needToReloatrue},reloadPage:function(b){var a=this;a.mode=b;a.leftThumbnailLoaded=false;a.rightThumbnailLoaded=false;if(settings.leftSideAd!=null&&a.config.leftPage!=null&&a.config.leftPage.type=="leftHandAd"&&a.config.leftPage.adType=="dfp"){a.destroyDfpLeftHandAd()}a.disableTiling();a.asignPages();a.setupPages();if(a.isPageRendered){a.pagePainted();if(a.mode!="single"&&a.zoomMode!="fill"){a.finishZoom(true)}}},destroyDfpLeftHandAd:function(){var a=this;var b=a.advertDiv;if(b!=null){$(a.advertDiv).remove();if(a.adSlot1!=null&&typeof googletag!="undefined"){googletag.destroySlots([a.adSlot1])}delete a.advertDiv}},asignPages:function(){var n=this;var l=editionFlatplanData.pageGroups;var h=n.getPageNo()+1+pageOffset;var e="";var a="";var k="";var c="";var o="";var r="";var g=n.getPageNo()+1;var q=n.returnAdvertOffset(g);if((parseInt(h)+parseInt(0))%2==pageOffset){h++}h--;h=Math.max(0,parseInt(h));var m=h;if(m<=(l.length-1)){c=l[(m)].pages[0]}var j=(h-1);if(j>=0){k=l[j].pages[0]}var b=(h-2);if(b>=0){a=l[b].pages[0]}var d=(h-3);if(d>=0){e=l[d].pages[0]}var p=(h+1);if(p<=(l.length-1)){o=l[(p)].pages[0]}var f=(h+2);if(f<=(l.length-1)){r=l[(f)].pages[0]}n.config.rightPage=c;n.config.leftPage=k;n.config.previousPage=a;n.config.hiddenLeftPage=e;n.config.nextPage=o;n.config.hiddenRightPage=r},setInitialVarieY=0},toggleZoomMode:function(c){var b=this;b.zoomMode=c;if(b.zoomMode=="fit"){b.fireEvent("fitMode");if(b.mode=="double"){b.hiddenRight.show();b.hiddenLeft.show();b.showNavButtons();b.fireEvent("setupKeys");$(b.topRight.element.dom).css("top",b.top);$(b.topRight.element.dom).css("right",($(b.element.dom).width())-b.width-($(b.element.dom).width()/2))}else{b.fireEvent("setupKeys");b.hideNavButtons()}b.element.dom.onmousewheel=(function(d){if(b.scale>1){if(d.wheelDelta>0){if(b.scroller.position.y-120>0){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y-120);b.fireEvent("showTop");b.fireEvent("showBottom")}else{b.scroller.scrollTo(b.scroller.position.x,0);b.fireEvent("hideTop");b.fireEvent("showBottom")}}else{if(b.scroller.position.y+120<b.scroller.maxPosition.y){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y+120);b.fireEvent("showBottom");b.fireEvent("showTop")}else{b.scroller.scrollTo(b.scroller.position.x,b.scroller.maxPosition.y);b.fireEvent("hideBottom");b.fireEvent("showTop")}}}});b.element.dom.addEventListener("DOMMouseScroll",function(d){if(b.scale>1){if(d.detail<=0){if(b.scroller.position.y-60>0){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y-60);b.fireEvent("showTop");b.fireEvent("showBottom")}else{b.scroller.scrollTo(b.scroller.position.x,0);b.fireEvent("hideTop");b.fireEvent("showBottom")}}else{if(d.detail>=0){if(b.scroller.position.y+60<b.scroller.maxPosition.y){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y+60);b.fireEvent("showBottom");b.fireEvent("showTop")}else{b.scroller.scrollTo(b.scroller.position.x,b.scroller.maxPosition.y);b.fireEvent("hideBottom");b.fireEvent("showTop")}}}}})}else{b.hideNavButtons();b.fireEvent("fillMode");b.fireEvent("keyControls");b.element.dom.onmousewheel=(function(d){if(b.scroller.maxPosition.y>0){if(d.wheelDelta>0){if(b.scroller.position.y-120>0){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y-120);b.fireEvent("showTop");b.fireEvent("showBottom")}else{b.scroller.scrollTo(b.scroller.position.x,0);b.fireEvent("hideTop");b.fireEvent("showBottom")}}else{if(b.scroller.position.y+120<b.scroller.maxPosition.y){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y+120);b.fireEvent("showBottom");b.fireEvent("showTop")}else{b.scroller.scrollTo(b.scroller.position.x,b.scroller.maxPosition.y);b.fireEvent("hideBottom");b.fireEvent("showTop")}}}});b.element.dom.addEventListener("DOMMouseScroll",function(d){if(b.scroller.maxPosition.y>0){if(d.detail<=0){if(b.scroller.position.y-60>0){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y-60);b.fireEvent("showTop");b.fireEvent("showBottom")}else{b.scroller.scrollTo(b.scroller.position.x,0);b.fireEvent("hideTop");b.fireEvent("showBottom")}}else{if(b.scroller.position.y+60<b.scroller.maxPosition.y){b.scroller.scrollTo(b.scroller.position.x,b.scroller.position.y+60);b.fireEvent("showBottom");b.fireEvent("showTop")}else{b.scroller.scrollTo(b.scroller.position.x,b.scroller.maxPosition.y);b.fireEvent("hideBottom");b.fireEvent("showTop")}}}});if(b.mode=="double"){b.setUpPageTurnForImageFill();if(b.config.rightPage.type=="sectionpage"){b.topRight.hide();b.bottomRight.hide()}}}b.initialTranslateX=0;b.initialTranslateY=0;b.rightSideImageContainer.togglingDPS=true;b.leftSideImageContainer.togglingDPS=true;if(b.isPageRendered){b.leftSideImageLoad();b.rightSideImageLoad();b.resetZoom();$(b.rightSideDiv).css("transform","");$(b.rightSideImageContainer).css("transform","")}if(Ext.browser.is.Firefox&&b.zoomMode=="fill"){var a=b.returnActiveImageContainer().clientHeight;b.scroller.maxPosition.y=a-b.getScrollable()._indicators.y._length}if(settings.leftSideAd!=null&&b.config.leftPage.type=="leftHandAd"&&b.config.leftPage.adType=="dfp"){if(b.isinitialized){b.resizeDfp()}}},setUpPageTurnForImageFill:function(){var a=this;if(a.mode=="double"){a.topRight.setHidden(false);a.topLeft.setHidden(false);a.topRight.element.dom.style.visible="visible";a.topLeft.element.dom.style.visible="visible";if(a.config.rightPage.type=="sectionpage"){a.topRight.setHidden(true);a.bottomRight.setHidden(true)}if(a.config.leftPage.type=="sectionpage"){a.topLeft.setHidden(true);a.bottomLeft.setHidden(true)}}$(a.topRight.element.dom).css("top","0px");$(a.topRight.element.dom).css("right",0+a.readerPaddingX);$(a.topLeft.element.dom).css("top","0px");$(a.topLeft.element.dom).css("left",0+a.readerPaddingX)},getPageNo:function(){return this.config.pageNo},adjustPageNo:function(c,d){var b=this;var e=flatPlanData.pageGroups.length-1-pageOffset;var a=Math.min(e,Math.max(0,(b.config.pageNo+c)));console.log("adjusting",a);b.config.pageNo=a},startDrag:function(d){var c=this;if(d!=null){if(d.stopPropagation!=null){d.stopPropagation()}}$(c.rightSideNextPageContainer).css("display","");$(c.leftSidePrevPageContainer).css("display","");if(c.zoomMode=="fit"){c.addCls("desktoppageviewer")}c.hiddenRight.setStyle("visibility:visible;");c.leftPrevPage.style.visibility="hidden";c.pauseFlashingLinks();InfinityMobile.app.getController("PdfController").pausePage();$(c.rightSideDiv).css("transform-origin","0% 0% 0px");$(c.rightSideImageContainer).css("transform-origin","0% 0% 0px");$(c.rightSideNextPageContainer).css("transform-origin","0% 0% 0px");$(c.rightSideGradient).css("transform-origin","0% 0% 0px");$(c.rightSideDiv).css("transform","");$(c.rightSideImageContainer).css("transform","");$(c.rightSideNextPageContainer).css("transform","");$(c.rightSideGradient).css("transform","");$(c.rightSideDiv).css("bottom","");$(c.rightSideImageContainer).css("top","0%");$(c.rightSideImageContainer).css("bottom","");$(c.rightSideImageContainer).css("left","0%");$(c.rightSideNextPageContainer).css("visibility","hidden");$(c.rightSideNextPageContainer).css("overflow","hidden");$(c.rightSideNextPageContainer).css("top","0%");$(c.rightSideNextPageContainer).css("bottom","");$(c.rightSideNextPageContainer).css("left","0% ");$(c.rightSideGradient).css("top","0%");$(c.rightSideGradient).css("bottom","");$(c.rightSideGradient).css("left","0% ");$(c.rightSideGradient).css("visibility","hidden");$(c.rightSideGradient).css("z-index","11");c.rightSide.element.dom.style.zIndex="10";c.leftSide.element.dom.style.zIndex="8";c.rightSide.setZIndex(10);c.leftSide.setZIndex(8);c.leftSideMediaDiv.style.visibility="hidden";c.rightSideMediaDiv.style.visibility="hidden";var a=270;var b=0.3;$(c.rightSideGradient).css("background","-webkit-linear-gradient("+a+"deg,  rgba(0,0,0,"+b+") "+(((b*100)*0.9))+"%, rgba(76,76,76,0) 100%)");$(c.rightSideGradient).css("height","70px");$(c.rightSideGradient).css("width",$(c.rightSideDiv).width());$(c.gifRight).css("visibility","hidden");$(c.rightSideDiv).css("overflow","hidden");c.diffX=($(c.topRight.element.dom).offset().left+$(c.topRight.element.dom)[0].getBoundingClientRect().width)-$(c.element.dom).width()-c.wrapAdOffset;c.diffY=$(c.topRight.element.dom).offset().top;if(!Ext.browser.is.IE){if(c.element.dom.parentElement!=null&&settings.reader.wrapAd==null){c.element.dom.parentElement.parentElement.style.overflowY="visible"}}c.addCls("disableIframe")},startDragLeft:function(d){var c=this;if(d!=null){if(d.stopPropagation!=null){d.stopPropagation()}}$(c.rightSideNextPageContainer).css("display","");$(c.leftSidePrevPageContainer).css("display","");if(c.zoomMode=="fit"){c.addCls("desktoppageviewer")}c.hiddenLeft.setStyle("visibility:visible;");c.rightNextPage.style.visibility="hidden";c.pauseFlashingLinks();InfinityMobile.app.getController("PdfController").pausePage();$(c.leftSideDiv).css("transform-origin","100% 0% 0px");$(c.leftSideImageContainer).css("transform-origin","100% 0% 0px");$(c.leftSidePrevPageContainer).css("transform-origin","100% 0% 0px");$(c.leftSideGradient).css("transform-origin","100% 0% 0px");$(c.leftSideDiv).css("transform","");$(c.leftSideImageContainer).css("transform","");$(c.leftSidePrevPageContainer).css("transform","");$(c.leftSideGradient).css("transform","");$(c.leftSideDiv).css("bottom","");$(c.leftSideImageContainer).css("top","0%");$(c.leftSideImageContainer).css("bottom","");$(c.leftSideImageContainer).css("right","0%");$(c.leftSidePrevPageContainer).css("visibility","hidden");$(c.leftSidePrevPageContainer).css("overflow","hidden");$(c.leftSidePrevPageContainer).css("top","0%");$(c.leftSidePrevPageContainer).css("bottom","");$(c.leftSidePrevPageContainer).css("right","0% ");$(c.leftSideGradient).css("top","0%");$(c.leftSideGradient).css("bottom","");$(c.leftSideGradient).css("right","0% ");$(c.leftSideGradient).css("visibility","hidden");$(c.leftSideGradient).css("z-index","11");c.rightSide.element.dom.style.zIndex="8";c.leftSide.element.dom.style.zIndex="10";c.rightSide.setZIndex(8);c.leftSide.setZIndex(10);c.leftSideMediaDiv.style.visibility="hidden";c.rightSideMediaDiv.style.visibility="hidden";var a=270;var b=0.3;$(c.leftSideGradient).css("background","-webkit-linear-gradient("+a+"deg,  rgba(0,0,0,"+b+") "+(((b*100)*0.9))+"%, rgba(76,76,76,0) 100%)");$(c.leftSideGradient).css("height","70px");$(c.leftSideGradient).css("width",$(c.leftSideDiv).width());$(c.gifLeft).css("visibility","hidden");$(c.leftSideDiv).css("overflow","hidden");c.diffX=$(c.topLeft.element.dom).offset().left*-1+c.wrapAdOffset;c.diffY=$(c.topLeft.element.dom).offset().top;if(!Ext.browser.is.IE){if(c.element.dom.parentElement!=null&&settings.reader.wrapAd==null){c.element.dom.parentElement.parentElement.style.overflow="visible"}}c.addCls("disableIframe")},startDragBottomRight:function(d){var c=this;if(c.zoomMode=="fit"){c.addCls("desktoppageviewer")}$(c.rightSideNextPageContainer).css("display","");$(c.leftSidePrevPageContainer).css("display","");c.hiddenRight.setStyle("visibility:visible;");c.pauseFlashingLinks();InfinityMobile.app.getController("PdfController").pausePage();$(c.rightSideDiv).css("transform-origin","0% 100% 0px");$(c.rightSideImageContainer).css("transform-origin","0% 100% 0px");$(c.rightSideNextPageContainer).css("transform-origin","0% 100% 0px");$(c.rightSideGradient).css("transform-origin","0% 100% 0px");$(c.rightSideDiv).css("transform","");$(c.rightSideImageContainer).css("transform","");$(c.rightSideNextPageContainer).css("transform","");$(c.rightSideGradient).css("transform","");$(c.rightSideDiv).css("top","");$(c.rightSideDiv).css("bottom",0);$(c.rightSideImageContainer).css("top","");$(c.rightSideImageContainer).css("bottom","0%");$(c.rightSideImageContainer).css("left","0%");$(c.rightSideNextPageContainer).css("visibility","hidden");$(c.rightSideNextPageContainer).css("overflow","hidden");$(c.rightSideNextPageContainer).css("top","");$(c.rightSideNextPageContainer).css("bottom","0%");$(c.rightSideNextPageContainer).css("left","0% ");$(c.rightSideGradient).css("top","");$(c.rightSideGradient).css("bottom","0%");$(c.rightSideGradient).css("left","0% ");$(c.rightSideGradient).css("visibility","hidden");$(c.rightSideGradient).css("z-index","11");c.rightSide.element.dom.style.zIndex="10";c.leftSide.element.dom.style.zIndex="8";c.rightSide.setZIndex(10);c.leftSide.setZIndex(8);c.leftSideMediaDiv.style.visibility="hidden";c.rightSideMediaDiv.style.visibility="hidden";var a=90;var b=0.3;$(c.rightSideGradient).css("background","-webkit-linear-gradient("+a+"deg,  rgba(0,0,0,"+b+") "+(((b*100)*0.9))+"%, rgba(76,76,76,0) 100%)");$(c.rightSideGradient).css("height","70px");$(c.rightSideGradient).css("width",$(c.rightSideDiv).width());$(c.gifBottomRight).css("visibility","hidden");$(c.rightSideDiv).css("overflow","hidden");c.diffX=($(c.topRight.element.dom).offset().left+$(c.topRight.element.dom)[0].getBoundingClientRect().width)-$(c.element.dom).width()-c.wrapAdOffset;c.diffY=$(c.topRight.element.dom).offset().top;if(!Ext.browser.is.IE){if(c.element.dom.parentElement!=null&&settings.reader.wrapAd==null){c.element.dom.parentElement.parentElement.style.overflow="visible"}}c.addCls("disableIframe")},startDragBottomLeft:function(d){var c=this;if(c.zoomMode=="fit"){c.addCls("desktoppageviewer")}$(c.rightSideNextPageContainer).css("display","");$(c.leftSidePrevPageContainer).css("display","");c.hiddenLeft.setStyle("visibility:visible;");c.pauseFlashingLinks();InfinityMobile.app.getController("PdfController").pausePage();$(c.leftSideDiv).css("transform-origin","100% 100% 0px");$(c.leftSideImageContainer).css("transform-origin","100% 100% 0px");$(c.leftSidePrevPageContainer).css("transform-origin","100% 100% 0px");$(c.leftSideGradient).css("transform-origin","100% 100% 0px");$(c.leftSideDiv).css("transform","");$(c.leftSideImageContainer).css("transform","");$(c.leftSidePrevPageContainer).css("transform","");$(c.leftSideGradient).css("transform","");$(c.leftSideDiv).css("top","");$(c.leftSideDiv).css("bottom",0);$(c.leftSideImageContainer).css("top","");$(c.leftSideImageContainer).css("bottom","0%");$(c.leftSideImageContainer).css("right","0%");$(c.leftSidePrevPageContainer).css("visibility","hidden");$(c.leftSidePrevPageContainer).css("overflow","hidden");$(c.leftSidePrevPageContainer).css("top","");$(c.leftSidePrevPageContainer).css("bottom","0%");$(c.leftSidePrevPageContainer).css("right","0% ");$(c.leftSideGradient).css("top","");$(c.leftSideGradient).css("bottom","0%");$(c.leftSideGradient).css("right","0% ");$(c.leftSideGradient).css("visibility","hidden");$(c.leftSideGradient).css("z-index","11");c.rightSide.element.dom.style.zIndex="8";c.leftSide.element.dom.style.zIndex="10";c.rightSide.setZIndex(8);c.leftSide.setZIndex(10);c.leftSideMediaDiv.style.visibility="hidden";c.rightSideMediaDiv.style.visibility="hidden";var a=90;var b=0.3;$(c.leftSideGradient).css("background","-webkit-linear-gradient("+a+"deg,  rgba(0,0,0,"+b+") "+(((b*100)*0.9))+"%, rgba(76,76,76,0) 100%)");$(c.leftSideGradient).css("height","70px");$(c.leftSideGradient).css("width",$(c.leftSideDiv).width());$(c.gifBottomLeft).css("visibility","hidden");$(c.leftSideDiv).css("overflow","hidden");c.diffX=$(c.bottomLeft.element.dom).offset().left*-1+c.wrapAdOffset;c.diffY=$(c.topLeft.element.dom).offset().top;if(!Ext.browser.is.IE){if(c.element.dom.parentElement!=null&&settings.reader.wrapAd==null){c.element.dom.parentElement.parentElement.style.overflow="visible"}}c.addCls("disableIframe")},drag:function(A){var G=this;if(A!=null){if(A.stopPropagation!=null){A.stopPropagation()}}G.mouseDown=true;G.rightSide.element.dom.style.zIndex=10;G.leftSide.element.dom.style.zIndex=8;var l=$(G.element.dom).width();var k=0;var h=(((A.pageX-G.diffX-G.wrapAdOffset)+l)/2);var g=(((A.pageY-G.diffY)+k)/2);var t=Math.atan2(g-k,h-l);var z=t*114.6;var E=Math.sin(t);var D=Math.sin(t-(Math.PI/2));var f=h-E*g/D+G.diffX;var c=k;var s=l+G.diffX;var q=g+D*(l-h)/E;var x=t*(180/Math.PI)+180;if(f>$(G.element.dom).width()/2&&A.pageY>G.diffY&&A.pageX<$(G.element.dom).width()+G.diffX+G.wrapAdOffset){var w=true}else{if(A.pageY>G.diffY){var F=A.pageX-($(G.element.dom).width()/2)-G.wrapAdOffset;var C=A.pageY-G.diffY;var u=F*F+C*C;var j=Math.atan2(C,F);var r=($(G.element.dom).width()/2)+Math.cos(j)*G.rightSideWidth;var p=G.diffY+Math.sin(j)*G.width;var l=$(G.element.dom).width();var k=0;var h=(((r-G.diffX)+l)/2);var g=(((p-G.diffY)+k)/2);var t=Math.atan2(g-k,h-l);var z=t*114.6;var E=Math.sin(t);var D=Math.sin(t-(Math.PI/2));var f=h-E*g/D+G.diffX;var c=k;var s=l+G.diffX;var q=g+D*(l-h)/E;var x=t*(180/Math.PI)+180;var w=true}else{if(A.pageX>-G.diffX+G.wrapAdOffset){h=(((A.pageX-G.diffX-G.wrapAdOffset)+l)/2);g=((0+k)/2);t=Math.atan2(g-k,h-l);z=t*114.6;E=Math.sin(t);D=Math.sin(t-(Math.PI/2));f=h-E*g/D+G.diffX;c=k;s=l+G.diffX;q=g+D*(l-h)/E;x=t*(180/Math.PI)+180;var w=true}}}if(w){adj=(l)-(f-G.diffX);opp=q;hyp=(adj*adj)+(opp*opp);hyp=Math.sqrt(hyp);trigAngle=Math.acos(adj/hyp);trigAngle=trigAngle*(180/Math.PI);var v=G.returnOffset(f-(($(G.element.dom).width())/2),trigAngle);$(G.rightSideDiv).css("transform","translate3d("+v.x+"px, "+(v.y*-1)+"px, 0px) rotate("+trigAngle+"deg)");$(G.rightSideImageContainer).css("transform","rotate("+(trigAngle*-1)+"deg) translate3d("+(v.x*-1)+"px, "+(v.y)+"px, 0px) ");nextPageRotateAngle=((z)-trigAngle);nextPageCosAngle=(90-(nextPageRotateAngle-180));newExtraLength=Math.tan(nextPageCosAngle/(180/Math.PI))*v.y;$(G.rightSideNextPageContainer).css("transform","rotate("+nextPageRotateAngle+"deg) translate3d("+((adj+newExtraLength)*-1)+"px, "+(v.y)+"px, 0px)");$(G.rightSideGradient).css("transform","translate3d("+((adj+newExtraLength))+"px, "+(v.y*-1)+"px, 0px) rotate("+(nextPageRotateAngle*-1)+"deg) ");var n=s-f;var d=c-q;var m=d/n;var o=m*f*-1;if(q>G.height){var y=(-(G.height/2)-o)/m}else{var y=(-(q/2)-o)/m}var B=(((y)-($(G.element.dom).width()/2))/($(G.element.dom).width()/2))}if(G.rightSideNextPageContainer.style.visibility!="visible"){G.rightSideNextPageContainer.style.visibility="visible"}if(G.rightNextPage.style.visibility!="visible"){G.rightNextPage.style.visibility="visible"}if(G.rightSideGradient.style.visibility!="visible"){G.rightSideGradient.style.visibility="visible"}},dragLeft:function(A){var G=this;if(A!=null){if(A.stopPropagation!=null){A.stopPropagation()}}G.mouseDown=true;G.rightSide.element.dom.style.zIndex=8;G.leftSide.element.dom.style.zIndex=10;var l=0;var k=0;var h=((A.pageX+G.diffX-G.wrapAdOffset)+l)/2;var g=((A.pageY-G.diffY)+k)/2;var t=Math.atan2(g-k,h-l);var z=t*114.6;var E=Math.sin(t);var C=Math.sin(t-(Math.PI/2));var f=h+E*(k-g)/C-G.diffX;var c=k;var s=l-G.diffX;if(E!=0){var q=g+C*(l-h)/E}else{var q=0}if(f<$(G.element.dom).width()/2&&A.pageY>=G.diffY&&A.pageX>-G.diffX+G.wrapAdOffset){var w=true}else{if(A.pageY>=G.diffY){var F=A.pageX-($(G.element.dom).width()/2)-G.wrapAdOffset;var D=A.pageY-G.diffY;var u=F*F+D*D;var j=Math.atan2(D,F);var r=($(G.element.dom).width()/2)+Math.cos(j)*G.width;var p=G.diffY+Math.sin(j)*G.width;h=((r+G.diffX)+l)/2;g=((p-G.diffY)+k)/2;t=Math.atan2(g-k,h-l);z=t*114.6;E=Math.sin(t);C=Math.sin(t-(Math.PI/2));f=h+E*(k-g)/C-G.diffX;c=k;s=l-G.diffX;q=g+C*(l-h)/E;var w=true}else{if(A.pageX<$(G.element.dom).width()+G.diffX+G.wrapAdOffset){h=((A.pageX+G.diffX-G.wrapAdOffset)+l)/2;g=(0.1+k)/2;t=Math.atan2(g-k,h-l);z=t*114.6;E=Math.sin(t);C=Math.sin(t-(Math.PI/2));f=h+E*(k-g)/C-G.diffX;c=k;s=l-G.diffX;q=g+C*(l-h)/E;var w=true}}}if(w){adj=f+G.diffX;opp=q;hyp=(adj*adj)+(opp*opp);hyp=Math.sqrt(hyp);trigAngle=Math.acos(adj/hyp);trigAngle=trigAngle*(180/Math.PI);edge1XOffset=f-($(G.element.dom).width()/2);var v=G.returnOffset((edge1XOffset),trigAngle*-1);$(G.leftSideDiv).css("transform","translate3d("+(v.x)+"px, "+(v.y*-1)+"px, 0px) rotate("+(trigAngle*-1)+"deg)");$(G.leftSideImageContainer).css("transform","rotate("+(trigAngle)+"deg) translate3d("+(v.x*-1)+"px, "+(v.y)+"px, 0px) ");nextPageRotateAngle=((z)-(trigAngle*-1));nextPageCosAngle=(90-(nextPageRotateAngle-180));newExtraLength=Math.tan(nextPageCosAngle/(180/Math.PI))*(v.y*-1);$(G.leftSidePrevPageContainer).css("transform","rotate("+(nextPageRotateAngle)+"deg) translate3d("+((adj+newExtraLength))+"px, "+(v.y)+"px, 0px)");$(G.leftSideGradient).css("transform","translate3d("+((adj+newExtraLength)*-1)+"px, "+(v.y*-1)+"px, 0px) rotate("+(nextPageRotateAngle*-1)+"deg) ");var x=t*(180/Math.PI);var n=s-f;var d=c-q;var m=d/n;var o=m*f;if(q>G.height){var y=((G.height/2)-o)/m*-1}else{var y=((q/2)-o)/m*-1}var B=1-(((y))/($(G.element.dom).width()/2))}if(G.leftSidePrevPageContainer.style.visibility!="visible"){G.leftSidePrevPageContainer.style.visibility="visible"}if(G.leftPrevPage.style.visibility!="visible"){G.leftPrevPage.style.visibility="visible"}if(G.leftSideGradient.style.visibility!="visible"){G.leftSideGradient.style.visibility="visible"}},dragBottomRight:function(B){var H=this;H.mouseDown=true;H.rightSide.element.dom.style.zIndex=10;H.leftSide.element.dom.style.zIndex=8;var l=$(H.element.dom).width();var k=H.height;var h=((B.pageX-H.diffX-H.wrapAdOffset)+l)/2;var g=((B.pageY-H.diffY)+k)/2;var t=Math.atan2(g-k,h-l);var A=t*114.6;var F=Math.sin(t+(Math.PI/2));var D=Math.sin(t);var f=h-D*(k-g)/F+H.diffX;var c=k;var s=l+H.diffX;var q=g-F*(l-h)/D;if(f>$(H.element.dom).width()/2&&B.pageY<=H.height+H.diffY&&B.pageX<$(H.element.dom).width()+H.diffX+H.wrapAdOffset){var w=true}else{if(B.pageY<=H.height+H.diffY){var G=B.pageX-($(H.element.dom).width()/2)-H.wrapAdOffset;var E=B.pageY-(H.height+H.diffY);var u=G*G+E*E;var j=Math.atan2(E,G);var r=($(H.element.dom).width()/2)+Math.cos(j)*H.width;var p=(H.height+H.diffY)+Math.sin(j)*H.width;h=((r-H.diffX)+l)/2;g=((p-H.diffY)+k)/2;t=Math.atan2(g-k,h-l);A=t*114.6;F=Math.sin(t+(Math.PI/2));D=Math.sin(t);f=h-D*(k-g)/F+H.diffX;c=k;s=l+H.diffX;q=g-F*(l-h)/D;var w=true}else{if(B.pageX>-H.diffX+H.wrapAdOffset){h=((B.pageX-H.diffX-H.wrapAdOffset)+l)/2;g=((H.height-0.1)+k)/2;t=Math.atan2(g-k,h-l);A=t*114.6;F=Math.sin(t+(Math.PI/2));D=Math.sin(t);f=h-D*(k-g)/F+H.diffX;c=k;s=l+H.diffX;q=g-F*(l-h)/D;var w=true}}}if(w){adj=(l)-(f-H.diffX);opp=H.height-q;hyp=(adj*adj)+(opp*opp);hyp=Math.sqrt(hyp);trigAngle=Math.acos(adj/hyp);trigAngle=trigAngle*(180/Math.PI);edge1XOffset=f-($(H.element.dom).width()/2);var v=H.returnOffset((edge1XOffset),trigAngle*-1);$(H.rightSideDiv).css("transform","translate3d("+(v.x)+"px, "+((v.y*-1))+"px, 0px) rotate("+(trigAngle*-1)+"deg)");$(H.rightSideImageContainer).css("transform","rotate("+(trigAngle)+"deg) translate3d("+(v.x*-1)+"px, "+(v.y)+"px, 0px) ");nextPageRotateAngle=((A)-(trigAngle*-1));nextPageCosAngle=(90-(nextPageRotateAngle-180));newExtraLength=Math.tan(nextPageCosAngle/(180/Math.PI))*(v.y);$(H.rightSideNextPageContainer).css("transform","rotate("+nextPageRotateAngle+"deg) translate3d("+((adj+newExtraLength)*-1)+"px, "+(v.y)+"px, 0px)");$(H.rightSideGradient).css("transform","translate3d("+((adj+newExtraLength))+"px, "+(v.y*-1)+"px, 0px) rotate("+(nextPageRotateAngle*-1)+"deg) ");var x=t*(180/Math.PI)+180;var n=s-f;var d=c-q;var m=d/n;var o=(-H.height-(m*f))*-1;if(q<0){var y=((H.height/2)-o)/m*-1}else{var z=((H.height-q)/2)+q;var y=(z-o)/m*-1}var C=(((y)-($(H.element.dom).width()/2))/($(H.element.dom).width()/2))}if(H.rightSideNextPageContainer.style.visibility!="visible"){H.rightSideNextPageContainer.style.visibility="visible"}if(H.rightNextPage.style.visibility!="visible"){H.rightNextPage.style.visibility="visible"}if(H.rightSideGradient.style.visibility!="visible"){H.rightSideGradient.style.visibility="visible"}},dragBottomLeft:function(B){var H=this;H.mouseDown=true;H.rightSide.element.dom.style.zIndex=8;H.leftSide.element.dom.style.zIndex=10;var l=0;var k=H.height;var h=((B.pageX+H.diffX-H.wrapAdOffset)+l)/2;var g=((B.pageY-H.diffY)+k)/2;var t=Math.atan2(g-k,h-l);var A=t*114.6;var F=Math.sin(t);var D=Math.sin(t-(Math.PI/2));var f=h+F*(k-g)/D-H.diffX;var c=k;var s=l-H.diffX;var q=g+D*(l-h)/F;if(f<$(H.element.dom).width()/2&&B.pageY<=H.height+H.diffY&&B.pageX>-H.diffX+H.wrapAdOffset){var w=true}else{if(B.pageY<=H.height+H.diffY){var G=B.pageX-($(H.element.dom).width()/2)-H.wrapAdOffset;var E=B.pageY-(H.height+H.diffY);var u=G*G+E*E;var j=Math.atan2(E,G);var r=($(H.element.dom).width()/2)+Math.cos(j)*H.width;var p=(H.height+H.diffY)+Math.sin(j)*H.width;h=((r+H.diffX)+l)/2;g=((p-H.diffY)+k)/2;t=Math.atan2(g-k,h-l);A=t*114.6;F=Math.sin(t);D=Math.sin(t-(Math.PI/2));f=h+F*(k-g)/D-H.diffX;c=k;s=l-H.diffX;q=g+D*(l-h)/F;var w=true}else{if(B.pageX<$(H.element.dom).width()+H.diffX+H.wrapAdOffset){h=((B.pageX+H.diffX-H.wrapAdOffset)+l)/2;g=((H.height-0.1)+k)/2;t=Math.atan2(g-k,h-l);A=t*114.6;F=Math.sin(t);D=Math.sin(t-(Math.PI/2));f=h+F*(k-g)/D-H.diffX;c=k;s=l-H.diffX;q=g+D*(l-h)/F;var w=true}}}if(w){adj=f+H.diffX;opp=H.height-q;hyp=(adj*adj)+(opp*opp);hyp=Math.sqrt(hyp);trigAngle=Math.acos(adj/hyp);trigAngle=trigAngle*(180/Math.PI);edge1XOffset=f-($(H.element.dom).width()/2);var v=H.returnOffset((edge1XOffset),trigAngle);$(H.leftSideDiv).css("transform","translate3d("+(v.x)+"px, "+((v.y*-1))+"px, 0px) rotate("+(trigAngle)+"deg)");$(H.leftSideImageContainer).css("transform","rotate("+(trigAngle*-1)+"deg) translate3d("+(v.x*-1)+"px, "+(v.y)+"px, 0px) ");nextPageRotateAngle=((A)-(trigAngle));nextPageCosAngle=(90-(nextPageRotateAngle-180));newExtraLength=Math.tan(nextPageCosAngle/(180/Math.PI))*(v.y*-1);$(H.leftSidePrevPageContainer).css("transform","rotate("+(nextPageRotateAngle)+"deg) translate3d("+((adj+newExtraLength))+"px, "+(v.y)+"px, 0px)");$(H.leftSideGradient).css("transform","translate3d("+((adj+newExtraLength)*-1)+"px, "+(v.y*-1)+"px, 0px) rotate("+(nextPageRotateAngle*-1)+"deg) ");var x=t*(180/Math.PI);var n=s-f;var d=c-q;var m=d/n;var o=(-H.height-(m*f))*-1;if(q<0){var y=((H.height/2)-o)/m*-1}else{var z=((H.height-q)/2)+q;var y=(z-o)/m*-1}var C=1-(((y))/($(H.element.dom).width()/2))}if(H.leftSidePrevPageContainer.style.visibility!="visible"){H.leftSidePrevPageContainer.style.visibility="visible"}if(H.leftPrevPage.style.visibility!="visible"){H.leftPrevPage.style.visibility="visible"}if(H.leftSideGradient.style.visibility!="visible"){H.leftSideGradient.style.visibility="visible"}},endDrag:function(b){var a=this;if(b!=null){if(b.stopPropagation!=null){b.stopPropagation()}}a.removeCls("desktoppageviewer");a.topRight.element.dom.style.transform="";a.playCssAnimations();if(b.pageX>=($(a.element.dom).width()/2)+a.wrapAdOffset){a.fireEvent("returnPageRight",b,a)}else{a.fireEvent("finishTurnRight",b,a)}if(!Ext.browser.is.IE){if(a.element.dom.parentElement!=null){a.element.dom.parentElement.parentElement.style.overflow="hidden"}}a.removeCls("disableIframe")},endDragLeft:function(b){var a=this;if(b!=null){if(b.stopPropagation!=null){b.stopPropagation()}}a.removeCls("desktoppageviewer");a.topLeft.element.dom.style.transform="";a.playCssAnimations();if(b.pageX<=($(a.element.dom).width()/2)+a.wrapAdOffset){a.fireEvent("returnPageLeft",b,a)}else{a.fireEvent("finishTurnLeft",b,a)}if(!Ext.browser.is.IE){if(a.element.dom.parentElement!=null){a.element.dom.parentElement.parentElement.style.overflow="hidden"}}a.removeCls("disableIframe")},endDragBottomRight:function(b){var a=this;a.removeCls("desktoppageviewer");a.bottomRight.element.dom.style.transform="";a.playCssAnimations();if(b.pageX>=($(a.element.dom).width()/2)+a.wrapAdOffset){a.fireEvent("returnPageBottomRight",b,a)}else{a.fireEvent("finishTurnBottomRight",b,a)}if(!Ext.browser.is.IE){if(a.element.dom.parentElement!=null){a.element.dom.parentElement.parentElement.style.overflow="hidden"}}a.removeCls("disableIframe")},endDragBottomLeft:function(b){var a=this;a.removeCls("desktoppageviewer");a.bottomLeft.element.dom.style.transform="";a.playCssAnimations();if(b.pageX<=($(a.element.dom).width()/2)+a.wrapAdOffset){a.fireEvent("returnPageBottomLeft",b,a)}else{a.fireEvent("finishTurnBottomLeft",b,a)}if(!Ext.browser.is.IE){if(a.element.dom.parentElement!=null){a.element.dom.parentElement.parentElement.style.overflow="hidden"}}a.removeCls("disableIframe")},returnOrn e},toRa180)},pageResize:function(e){var f=this;if(!videoFull){if(f.isPageRendered){var c=$(f.rightSideImg).width();var d=$(f.rightSideImg).height();var j=c/d;if($(f.element.dom).height()*j<$(f.element.dom).width()/2){f.height=$(f.element.dom).height();f.width=f.height*j;$(f.rightSideDiv).css("bottom","");$(f.rightSideTileCanvas).css("height",f.height);$(f.rightSideTileCanvas).css("width",f.width);$(f.rightSideTileCanvas).attr("height",f.height);$(f.rightSideTileCanvas).attr("width",f.width);$(f.rightSideImg).css("height",f.height);$(f.rightSideImg).css("width",f.width);$(f.rightSideImageContainer).css("height",f.height);$(f.rightSideImageContainer).css("width",f.width);$(f.rightNextPage).css("height",f.height);$(f.rightNextPage).css("width",f.width);$(f.hiddenRightImg).css("height",f.height);$(f.hiddenRightImg).css("width",f.width);$(f.hiddenRightGradient).css("height",f.height);$(f.hiddenRightGradient).css("width",f.width);var b=(f.height*f.height)+(f.width-($(f.element.dom).width())-f.width-($(f.element.dom).width()/2))*(f.width-($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));b=Math.sqrt(b);$(f.rightSideDiv).css("height",b+"px");$(f.rightSideDiv).css("width",b+"px");f.top=0;f.initialTranslateY=f.top;$(f.rightSideDiv).css("top","");$(f.hiddenRightImg).css("top",f.top);$(f.topRight.element.dom).css("top",f.top+f.readerPaddingY);$(f.topRight.element.dom).css("right",($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));$(f.bottomRight.element.dom).css("right",($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));$(f.bottomRight.element.dom).css("bottom",f.top);f.initialImageWidth=f.width;f.initialImageHeight=f.height}else{j=d/c;f.width=$(f.element.dom).width()/2;f.height=f.width*j;$(f.rightSideDiv).css("bottom","");$(f.rightSideTileCanvas).css("height",f.height);$(f.rightSideTileCanvas).css("width",f.width);$(f.rightSideTileCanvas).attr("height",f.height);$(f.rightSideTileCanvas).attr("width",f.width);$(f.rightSideImg).css("height",f.height);$(f.rightSideImg).css("width",f.width);$(f.rightSideImageContainer).css("height",f.height);$(f.rightSideImageContainer).css("width",f.width);$(f.rightNextPage).css("height",f.height);$(f.rightNextPage).css("width",f.width);$(f.hiddenRightImg).css("height",f.height);$(f.hiddenRightImg).css("width",f.width);$(f.hiddenRightGradient).css("height",f.height);$(f.hiddenRightGradient).css("width",f.width);var b=(f.height*f.height)+(f.width-($(f.element.dom).width())-f.width-($(f.element.dom).width()/2))*(f.width-($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));b=Math.sqrt(b);$(f.rightSideDiv).css("height",b+"px");$(f.rightSideDiv).css("width",b+"px");f.top=($(f.element.dom).height()-f.height)/2;f.initialTranslateY=f.top;$(f.topRight.element.dom).css("top",f.top+f.readerPaddingY);$(f.topRight.element.dom).css("right",($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));$(f.bottomRight.element.dom).css("right",($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));$(f.bottomRight.element.dom).css("bottom",f.top);$(f.hiddenRightImg).css("left",($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));f.initialImageWidth=f.width;f.initialImageHeight=f.height}var g=$(f.leftSideImg).attr("src");if(g==null){g=""}else{g=g.length}c=$(f.leftSideImg).width();d=$(f.leftSideImg).height();j=c/d;if($(f.element.dom).height()*j<$(f.element.dom).width()/2&&g>0){f.height=$(f.element.dom).height();f.width=f.height*j;$(f.leftSideDiv).css("bottom","");$(f.leftSideImg).css("height",f.height);$(f.leftSideImg).css("width",f.width);$(f.leftSideTileCanvas).css("height",f.height);$(f.leftSideTileCanvas).css("width",f.width);$(f.leftPrevPage).css("height",f.height+"px");$(f.leftPrevPage).css("width",(f.width)+"px");$(f.leftSideImg).css("transform-origin","100% 0% 0px");$(f.hiddenLeftImg).css("height",f.height);$(f.hiddenLeftImg).css("width",f.width);$(f.hiddenLeftGradient).css("height",f.height);$(f.hiddenLeftGradient).css("width",f.width);var b=(f.height*f.height)+(f.width-($(f.element.dom).width())-f.width-($(f.element.dom).width()/2))*(f.width-($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));b=Math.sqrt(b);$(f.leftSideDiv).css("height",b+"px");$(f.leftSideDiv).css("width",b+"px");f.top=0;f.initialTranslateY=f.top;$(f.leftSideDiv).css("top",f.top);$(f.hiddenLeftImg).css("top",f.top);$(f.topLeft.element.dom).css("top",f.top+f.readerPaddingY);$(f.topLeft.element.dom).css("left",($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));$(f.bottomLeft.element.dom).css("left",($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));$(f.hiddenLeftImg).css("left",0);$(f.bottomLeft.element.dom).css("bottom",f.top);f.rightSideImageContainer.initialImageWidth=f.width;f.rightSideImageContainer.initialImageHeight=f.height}else{if(g>0){j=d/c;f.width=$(f.element.dom).width()/2;f.height=f.width*j;$(f.leftSideDiv).css("bottom","");$(f.leftSideImg).css("height",f.height);$(f.leftSideImg).css("width",f.width);$(f.leftSideTileCanvas).css("height",f.height);$(f.leftSideTileCanvas).css("width",f.width);$(f.leftPrevPage).css("height",f.height);$(f.leftPrevPage).css("width",f.width);$(f.hiddenLeftImg).css("height",f.height);$(f.hiddenLeftImg).css("width",f.width);$(f.hiddenLeftGradient).css("height",f.height);$(f.hiddenLeftGradient).css("width",f.width);var b=(f.height*f.height)+(f.width-($(f.element.dom).width())-f.width-($(f.element.dom).width()/2))*(f.width-($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));b=Math.sqrt(b);$(f.leftSideDiv).css("height",b+"px");$(f.leftSideDiv).css("width",b+"px");f.top=($(f.element.dom).height()-f.height)/2;$(f.topLeft.element.dom).css("top",f.top+f.readerPaddingY);$(f.topLeft.element.dom).css("left",($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));$(f.bottomLeft.element.dom).css("left",($(f.element.dom).width())-f.width-($(f.element.dom).width()/2));$(f.bottomLeft.element.dom).css("bottom",f.top);f.top=0;$(f.leftSideDiv).css("top",f.top);$(f.hiddenLeftImg).css("top",f.top);$(f.hiddenLeftImg).css("left",0);f.rightSideImageContainer.initialImageWidth=f.width;f.rightSideImageContainer.initialImageHeight=f.height}}pixelMove=$(f.element.dom).width()*0.01;$(f.rightSideDiv).css("transform","");$(f.rightSideImageContainer).css("transform","");$(f.rightNextPage).css("transform","");$(f.rightNextPage).css("visibility","hidden");$(f.leftSideDiv).css("transform","");$(f.leftSideImageContainer).css("transform","");$(f.leftSideImageContainer).css("bottom","");$(f.rightSideImageContainer).css("bottom","");$(f.rightNextPage).css("bottom","");$(f.leftPrevPage).css("bottom","");$(f.leftPrevPage).css("transform","");$(f.leftPrevPage).css("visibility","hidden");if(f.rightSideImageContainer!=null){f.rightSideImageContainer.initialImageWidth=f.width;f.rightSideImageContainer.initialImageHeight=f.height}else{f.rightSideImageContainer=f.rightSide.element.down(".rightSideImgContainer").dom;f.rightSideImageContainer.initialImageWidth=f.width;f.rightSideImageContainer.initialImageHeight=f.height}if(f.leftSideImageContainer!=null){f.leftSideImageContainer.initialImageWidth=f.width;f.leftSideImageContainer.initialImageHeight=f.height}else{f.leftSideImageContainer=f.leftSide.element.down(".leftSideImgContainer").dom;f.leftSideImageContainer.initialImageWidth=f.width;f.leftSideImageContainer.initialImageHeight=f.height}f.initialTranslateX=(($(f.element.dom).width()/2)-f.width);f.setPageWidth();if(f.scale>1){f.resetPage();f.finishZoom(false);if(f.zoomMode=="fit"&&f.mode=="double"){f.showNavButtons()}else{f.hideNavButtons()}}f.fireEvent("activeItemCheck",f)}if(settings.leftSideAd!=null&&f.config.leftPage.type=="leftHandAd"&&f.config.leftPage.adType=="dfp"){f.resizeDfp()}f.fireEvent("resizeClipping");f.fireEvent("resizeArticlesBrowser")}},disableTiling:function(){var a=this;a.leftSideTileCanvas.width=0;a.leftSideTileCanvas.height=0;a.leftSideTileCanvas2.width=0;a.leftSideTileCanvas2.height=0;a.rightSideTileCanvas.width=0;a.rightSideTileCanvas.height=0;a.rightSideTileCanvas2.width=0;a.rightSideTileCanvas2.height=0},destroy:function(){var a=this;a.isinitialized=false;a.element.dom.innerHTML="";a.disableTiling();if(settings.leftSideAd!=null&&a.config.leftPage!=null&&a.config.leftPage.type=="leftHandAd"&&a.config.leftPage.adType=="dfp"){a.destroyDfpLeftHandAd()}delete a.leftSideTileCanvas;delete a.rightSideTileCanvas;delete a.scroller;delete a.scrollerDivContainer;delete a.scrollerDiv;delete a.zoomDivContainer;delete a.zoomDiv;delete a.tileDiv;delete a.rightNextPage;delete a.rightSideDiv;delete a.rightSideGradient;delete a.rightSideImageContainer;delete a.rightSideImg;delete a.rightSideMediaDiv;delete a.rightSideTileDiv;delete a.leftPrevPage;delete a.leftSideDiv;delete a.leftSideGradient;delete a.leftSideImageContainer;delete a.leftSideImg;delete a.leftSideMediaDiv;delete a.leftSideTileDiv;delete a.hiddenLeftGradient;delete a.hiddenLeftImg;delete a.hiddenRightGradient;delete a.hiddenRightImg;delete a.rightSide;delete a.leftSide;delete a.hiddenRight;delete a.hiddenLeft;delete a.topRight;delete a.topLeft;delete a.bottomRight;delete a.bottomLeft;delete a.previousPage;Ext.Panel.prototype.destroy.apply(this,arguments);delete a},hoverRight:function(){var a=this;a.rightSide.element.dom.style.zIndex="10";a.leftSide.element.dom.style.zIndex="8"},hove"10"},scrollEnd:function(){var a=this;if(a.scroller.position.y<=0){a.fireEvent("hideTop")}else{a.fireEvent("showTop")}if(a.scroller.position.y>=a.scroller.maxPosition.y){a.fireEvent("hideBottom")}else{a.fireEvent("showBottom")}Ext.Viewport.removeCls("scrolling-page")},onPinchale)},onale)},onPinchEnd:function(b){var a=this;$("#slider").val(a.currentScale);if(a.currentScale<=1){a.resetPage();a.finishZoom(true);a.showNavButtons()}else{a.scale=a.currentScale;a.finishZoom(true);a.hideNavButtons()}},pauseFlashingd")}},playCssAnima")}}},pauseVideos:function(){var e=this;if(e.rightSideMediaDiv!=null){for(var b=0;b<e.rightSideMediaDiv.children.length;b++){if(e.rightSideMediaDiv.children[b].className.indexOf("readerVideo")!=-1){var d=e.rightSideMediaDiv.children[b];$(e.element.dom).removeClass("disableIframe");if(d.className.indexOf("mp4Video")!=-1){var c=d.getElementsByTagName("iframe")[0];c.contentDocument.getElementsByTagName("video")[0].pause()}else{if(d.className.indexOf("youtubeVideo")!=-1){var c=d.getElementsByTagName("iframe")[0];if(YT.get(c.id)!=null){YT.get(c.id).pauseVideo()}}else{if(d.className.indexOf("vimeoVideo")!=-1){var c=d.getElementsByClassName("vimeoPlayer")[0];c.contentWindow.postMessage({method:"pause",value:""},"*")}}}}}}if(e.leftSideMediaDiv!=null){for(var b=0;b<e.leftSideMediaDiv.children.length;b++){if(e.leftSideMediaDiv.children[b].className.indexOf("readerVideo")!=-1){var d=e.leftSideMediaDiv.children[b];$(e.element.dom).removeClass("disableIframe");if(d.className.indexOf("mp4Video")!=-1){var c=d.getElementsByTagName("iframe")[0];c.contentDocument.getElementsByTagName("video")[0].pause()}else{if(d.className.indexOf("youtubeVideo")!=-1){var c=d.getElementsByTagName("iframe")[0];if(YT.get(c.id)!=null){YT.get(c.id).pauseVideo()}}else{if(d.className.indexOf("vimeoVideo")!=-1){var c=d.getElementsByClassName("vimeoPlayer")[0];c.contentWindow.postMessage({method:"pause",value:""},"*")}}}}}}if(!e.overflowMediaDiv.isHidden()){if(e.overflowMediaDiv.element!=null){var a=e.overflowMediaDiv.element.dom.getElementsByClassName("mp4Video");for(var b=0;b<a.length;b++){var c=a[b].getElementsByTagName("iframe")[0];c.contentDocument.getElementsByTagName("video")[0].pause()}var g=e.overflowMediaDiv.element.dom.getElementsByClassName("youtubeVideo");for(var b=0;b<g.length;b++){var c=g[b].getElementsByTagName("iframe")[0];YT.get(c.id).pauseVideo()}var f=e.overflowMediaDiv.element.dom.getElementsByClassName("vimeoVideo");for(var b=0;b<f.length;b++){var c=f[b].getElementsByClassName("vimeoPlayer")[0];c.contentWindow.postMessage({method:"pause",value:""},"*")}}}},onScrollge")},onTouge")},setupSectionTap:function(g,d){var k=this;var c=10;var a=5;var j=250;var h=false;var n;var l;var b;var f=null;var e=function(o){if(f!=null){clearTimeout(f);f=null;h=false}else{h=true}if(o.pageX!=null&&o.pageY!=null){n=o.pageX;l=o.pageY}else{if(o.changedTouches!=null&&o.changedTouches.length>0){var p=o.changedTouches[0];n=p.pageX;l=p.pageY}}b=o.timeStamp};var m=function(s){if(s.pageX!=null&&s.pageY!=null){var q=s.pageX;var p=s.pageY}else{if(s.changedTouches!=null&&s.changedTouches.length>0){var u=s.changedTouches[0];var q=u.pageX;var p=u.pageY}}var r=Math.sqrt((Math.pow(n-q,2))+(Math.pow(l-p,2)));var o=s.timeStamp;var t=o-b;if(r<=a&&t>=c){f=setTimeout(function(){if(h){d()}clearTimeout(f);f=null},j)}};g.onmousedown=e;g.addEventListener("touchstart",e);g.onmouseup=m;g.addEventListener("touchend",m)}},0,["readerpageviewer"],["component","container","panel","readerpageviewer"],{component:true,container:true,panel:true,readerpageviewer:true},["widget.readerpageviewer"],0,[InfinityMobile.view.desktop,"DesktopPageViewer"],0));(Ext.cmd.derive("InfinityMobile.view.LayoutView",Ext.Container,{config:{ignorePosition:false,cls:"toolbar"},initialize:function(){var a=this;a.json=a.config.json;a.parentContainer=a.config.parentContainer;a.layoutViewStyle();a.checkDPS();var b=Ext.create("Ext.Container",{itemId:"tooltip",style:"position:absolute !important;"});a.add(b);if(a.json.events.onTouch!=null&&Ext.os.is.Desktop){a.element.dom.style.cursor="pointer";switch(a.json.events.onTouch[0].action){case"openReaderMenu":b.setHtml('<div style="position:absolute;" class="tooltip">Menu</div>');a.tooltipLeft(15);break;case"search":b.setHtml('<div style="position:absolute;" class="tooltip">Search</div>');a.tooltipRight();break;case"right":b.setHtml('<div style="position:absolute;" class="tooltip">Next Page</div>');a.tooltipRight();break;case"left":b.setHtml('<div style="position:absolute;" class="tooltip">Previous Page</div>');a.tooltipRight();break;case"dps mode off":b.setHtml('<div style="position:absolute;" class="tooltip">Single Page</div>');a.tooltipRight("dps");break;case"dps mode on":b.setHtml('<div style="position:absolute;" class="tooltip">Double Page</div>');a.tooltipRight("dps");break;case"FirstPage":b.setHtml('<div style="position:absolute;" class="tooltip">First Page</div>');a.tooltipRight();break;case"LastPage":b.setHtml('<div style="position:absolute;" class="tooltip">Last Page</div>');a.tooltipRight();break}}if(Ext.os.is.Desktop&&a.json.globalID=="ZoomBar"){a.innerElement.dom.style.cursor="pointer"}},tooltip"}})},toolti)"})},layoutViewd(b)},layoutViewStyleOrientrn l},layoutViewPosition:function(q,d){var u=this;var k=q.anchors[d];var v=q.position[d];var l="";var s=v.x;var r=v.y;var e=v.width;var c=v.height;var f=768;var b=1024;var j=u.json;if(u.parentContainer!=null){j=u.parentContainer.json}f=j.position[d].width;b=j.position[d].height;var n=window.innerWidth;var h=window.innerHeight;l+="position: absolute;";if(k.anchorLeft||k.anchorRight||k.anchorWidth){if(!k.anchorLeft&&!k.anchorRight&&!k.anchorWidth){var a=s/f*100;l+="left: "+a+"%;";l+="width: "+e+"px;"}else{if(!k.anchorLeft&&!k.anchorRight&&k.anchorWidth){var a=s/f*100;var o=e/f*100;l+="left: "+a+"%;";l+="width: "+o+"%;"}else{if(!k.anchorLeft&&k.anchorRight&&!k.anchorWidth){var t=s+e;l+="right: "+(f-t)+"px;";l+="width: "+e+"px;"}else{if(!k.anchorLeft&&k.anchorRight&&k.anchorWidth){var t=s+e;var o=e/f*100;l+="right: "+(f-t)+"px;";l+="width: "+o+"%;"}else{if(k.anchorLeft&&!k.anchorRight&&!k.anchorWidth){l+="left: "+s+"px;";l+="width: "+e+"px;"}else{if(k.anchorLeft&&!k.anchorRight&&k.anchorWidth){var o=e/f*100;l+="left: "+s+"px;";l+="width: "+o+"%;"}else{if(k.anchorLeft&&k.anchorRight){l+="left:"+s+"px;";var t=s+e;l+="width:calc(100% - "+s+"px - "+(f-t)+"px);"}}}}}}}}if(k.anchorTop||k.anchorBottom||k.anchorHeight){if(!k.anchorTop&&!k.anchorBottom&&!k.anchorHeight){var g=r/b*100;l+="top: "+g+"%;";l+="height: "+c+"px;"}else{if(!k.anchorTop&&!k.anchorBottom&&k.anchorHeight){var g=r/b*100;var m=c/b*100;l+="top: "+g+"%;";l+="height: "+m+"%;"}else{if(!k.anchorTop&&k.anchorBottom&&!k.anchorHeight){var p=r+e;l+="top: "+(b-p)+"px;";l+="height: "+c+"px;"}else{if(!k.anchorTop&&k.anchorBottom&&k.anchorHeight){var p=r+e;var m=c/b*100;l+="top: "+(b-p)+"px;";l+="height: "+m+"%;"}else{if(k.anchorTop&&!k.anchorBottom&&!k.anchorHeight){l+="top:"+r+"px;";l+="height:"+c+"px;"}else{if(k.anchorTop&&!k.anchorBottom&&k.anchorHeight){var m=c/b*100;l+="top:"+r+"px;";l+="height:"+m+"%;"}else{if(k.anchorTop&&k.anchorBottom){l+="top:"+r+"px;";var p=r+c;l+="height:calc(100% - "+r+"px - "+(b-p)+"px);"}}}}}}}}return l},addBolor},getState:function(c,d,a,b){if(b==null){b="default"}if(c.states.length==1){return c.states[0].bindings[d]}else{var e=null;$.each(c.s=g}}});if(e.bindings[d]==undefined){return c.states[0].bindings[d]}else{return e.bindings[d]}}},updateState:function(c){var b=this;var d=b.items.items[0];var a=b.getState(b.json,"url","landscape",c);d.setSrc(a)},che)}}}}},0,["layoutview"],["component","container","layoutview"],{component:true,container:true,layoutview:true},["widget.layoutview"],0,[InfinityMobile.view,"LayoutView"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.LayoutToolBarIconView",InfinityMobile.view.LayoutView,{config:{width:30,height:40,style:"background-size: contain; background-repeat: no-repeat; background-position: center; cursor:pointer",items:[{itemId:"tooltip",cls:"tooltiptoolbar",style:"z-index:10000"}]},initialize:function(){var a=this;if(a.config.setting!=null){a.setting=a.config.setting;a.iconUrl=a.config.iconUrl;a.loadIcon()}else{if(a.config.iconUrl!=null){a.iconUrl=a.config.iconUrl;a.loadIcon()}}if(a.config.event!=null){a.event=a.config.event;a.setupEvent()}a.tooltip=a.getComponent("tooltip");a.tooltip.hide();a.element.dom.onmous)){}};a.element.dom.onmou)){}}},loadTooltip:function(){var a=this;console.log(settings);if(a.setting=="fullscreenicon"){a.tooltip.setHtml("Fullscreen");a.tooltipRight()}else{if(a.setting=="fitpageicon"){a.tooltip.setHtml("Page Fit");a.tooltipRight()}else{if(a.setting=="fillpageicon"){a.tooltip.setHtml("Page Fill");a.tooltipRight()}else{if(a.setting=="singlepageicon"){a.tooltip.setHtml("Single Page");a.tooltipRight()}else{if(a.setting=="doublepageicon"){a.tooltip.setHtml("Double Page");a.tooltipRight()}else{if(a.setting=="firsticon"){a.tooltip.setHtml("First Page");a.tooltipRight()}else{if(a.setting=="previousicon"){a.tooltip.setHtml("Previous Page");a.tooltipRight()}else{if(a.setting=="nexticon"){a.tooltip.setHtml("Next Page");a.tooltipRight()}else{if(a.setting=="lasticon"){a.tooltip.setHtml("Last Page");a.tooltipRight()}else{if(a.setting=="menuicon"){a.tooltip.setHtml("Menu");a.tooltipLeft()}else{if(a.setting=="searchicon"){a.tooltip.setHtml("Search");a.tooltipRight()}else{if(a.setting=="shareicon"){a.tooltip.setHtml("Share");a.tooltipRight()}else{if(a.setting=="archiveicon"){if(settings.menu.archiveText==null){a.tooltip.setHtml("Archive")}else{a.tooltip.setHtml(settings.menu.archiveText)}a.tooltipRight()}else{if(a.setting=="downloadicon"){if(settings.menu.downloadText==null){a.tooltip.setHtml("Download")}else{a.tooltip.setHtml(settings.menu.downloadText)}a.tooltipRight()}else{if(a.setting=="bookmarksicon"){if(settings.menu.bookmarkText==null){a.tooltip.setHtml("Bookmarks")}else{a.tooltip.setHtml(settings.menu.bookmarkText)}a.tooltipRight()}else{if(a.setting=="printicon"){if(settings.menu.printText==null){a.tooltip.setHtml("Print")}else{a.tooltip.setHtml(settings.menu.printText)}a.tooltipRight()}else{if(a.setting=="clippingicon"){if(settings.menu.clippingText==null){a.tooltip.setHtml("Create Clipping")}else{a.tooltip.setHtml(settings.menu.clippingText)}a.tooltipRight()}else{if(a.setting=="infoicon"){if(settings.menu.howToUseText==null){a.tooltip.setHtml("How To Use")}else{a.tooltip.setHtml(settings.menu.howToUseText)}a.tooltipRight()}else{a.tooltip.hide();a.setWidth("100%");console.log("-------------------- LOGO -------------------")}}}}}}}}}}}}}}}}}}},tooltipRight:function(){var a=this;a.element.dom.onmousemove=(function(b){a.getComponent("tooltip").element.dom.style.webkitTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltip").element.dom.style.MozTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltip").element.dom.style.msTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)"})},toolti"}})},loadIcon:function(){var b=this;var a="";if(b.iconUrl!=null){a=b.iconUrl}else{a=settings.topbar[b.setting]}if(b.setting=="archiveicon"){if(settings.newsday!=null){if(settings.newsday.archiveIcon!=null){if(settings.newsday.archiveIcon.length>0){a=settings.newsday.archiveIcon}}}}if(b.setting=="sectionlisticon"){if(settings.newsday!=null){if(settings.newsday.sectionsIcon!=null){if(settings.newsday.sectionsIcon.length>0){a=settings.newsday.sectionsIcon;b.setWidth(70)}}}}if(b.setting=="zonesicon"){if(settings.newsday!=null){if(settings.newsday.zonesIcon!=null){if(settings.newsday.zonesIcon.length>0){a=settings.newsday.zonesIcon;b.setWidth(50)}}}}if(b.setting=="firsticon"){if(settings.newsday!=null){if(settings.newsday.firstPageIcon!=null){if(settings.newsday.firstPageIcon.length>0){a=settings.newsday.firstPageIcon}}}}if(b.setting=="previousicon"){if(settings.newsday!=null){if(settings.newsday.prevPageIcon!=null){if(settings.newsday.prevPageIcon.length>0){a=settings.newsday.prevPageIcon}}}}if(b.setting=="nexticon"){if(settings.newsday!=null){if(settings.newsday.nextPageIcon!=null){if(settings.newsday.nextPageIcon.length>0){a=settings.newsday.nextPageIcon}}}}if(b.setting=="lasticon"){if(settings.newsday!=null){if(settings.newsday.lastPageIcon!=null){if(settings.newsday.lastPageIcon.length>0){a=settings.newsday.lastPageIcon}}}}if(a!=""){b.setStyle({backgroundImage:"url("+a+")"})}},setupEvent:function(){var a=this;if(a.event!="toolbarShare"){a.element.on("tap",function(){if(typeof trackReaderEvent!="undefined"){}mainPanel.fireEvent(a.event,a)})}}},0,["layouttoolbaricon"],["component","container","layoutview","layouttoolbaricon"],{component:true,container:true,layoutview:true,layouttoolbaricon:true},["widget.layouttoolbaricon"],0,[InfinityMobile.view.desktop,"LayoutToolBarIconView"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderZoomSlider",Ext.Container,{config:{style:"color:white;display:inline-block;max-width: 90px;",items:[{itemId:"sliderContainer",layout:"hbox",width:"100%",height:"100%",items:[{itemId:"zoomOut",cls:"zoomBtn",width:20,height:24,left:0,style:"background-image:url(../assets/zoomSlider/decrease-ic.png);background-size:contain;background-position:center;background-repeat:no-repeat;"},{itemId:"zoomSlider",flex:4},{itemId:"zoomIn",cls:"zoomBtn",width:20,height:24,right:0,style:"background-image:url(../assets/zoomSlider/increase-ic.png);background-size:contain;background-position:center;background-repeat:no-repeat;"}]},{itemId:"tooltipZoomIn",cls:"tooltip",hidden:true,style:"z-index:10000"},{itemId:"tooltipZoomOut",cls:"tooltip",hidden:true,style:"z-index:10000"}]},initialize:function(){var c=this;if(c.config.json!=null){Ext.Container.prototype.initialize.apply(this,arguments)}var a=InfinityMobile.app.getController("LayoutController");var b=Ext.getStore("SettingStore");var e="2px";var d="0px";c.sliderContainer=c.getComponent("sliderContainer");c.slider=c.sliderContainer.getComponent("zoomSlider");c.zoomOutBtn=c.sliderContainer.getComponent("zoomOut");c.zoomInBtn=c.sliderContainer.getComponent("zoomIn");c.slider.setHtml('<div style:"text-align:center;color:white;"><input id="slider" type="range" min="1" max="'+settings.page.maxZoomLevel+'" step="0.01" style="background:none;cursor:pointer;z-index:5;position:absolute;left:17.5%;top:'+e+";margin-top:"+d+';width:65%;" value="1"/></div>');c.firstTap=false;c.sliderElement=c.element.down("input");if(Ext.browser.name!="IE"){$(c.sliderElement.dom).mouseup(function(){if(!c.firstTap){c.firstTap=true;c.zooming()}c.zooming();c.zoomEnd()});c.sliderElement.dom.addEventListener("touchend",function(){if(!c.firstTap){c.firstTap=true;c.zooming()}c.zooming();c.zoomEnd()});c.sliderElement.dom.oninput=function(){c.zooming()}}else{$(c.sliderElement.dom).mouseup(function(){if(!c.firstTap){c.firstTap=true;c.zooming()}c.zooming();c.zoomEnd()});c.sliderElement.dom.addEventListener("toucnd()});c.sliderElement.dom.onchange=function(){c.zooming()}}c.startedZoom=false;mer)}m()}};zooe}}}};zoomOue}}}};zoomStorue}};zom()}};c.zoomInBtn.canTap=true;c.zoomInBtn.element.on({tap:function(){if(c.zoomInBtn.canTap){c.zoomInBtn.canTap=false;var f=(parseFloat(c.sliderElement.dom.max)-1)/4;if(parseFloat(c.sliderElement.dom.max)>f){if(parseFloat(c.sliderElement.dom.value)+parseFloat(f)<=parseFloat(c.sliderElement.dom.max)){c.sliderElement.dom.value=parseFloat(c.sliderElement.dom.value)+parseFloat(f);c.zoom()}else{c.sliderElement.dom.value=parseFloat(c.sliderElement.dom.max-0.01);c.zoom()}c.zoomEnd()}setTimeout(function(){c.zoomInBtn.canTap=true},300)}}});c.zoomOutBtn.canTap=true;c.zoomOutBtn.element.on({tap:function(){if(c.zoomOutBtn.canTap){c.zoomOutBtn.canTap=false;var f=((parseFloat(c.sliderElement.dom.max)-1)/4);if(parseFloat(c.sliderElement.dom.value)>1){if(parseFloat(c.sliderElement.dom.value)-f>=1){c.sliderElement.dom.value=parseFloat(c.sliderElement.dom.value)-parseFloat(f);c.zoom()}else{c.sliderElement.dom.value=1;c.zoom()}c.zoomEnd()}setTimeout(function(){c.zoomOutBtn.canTap=true},300)}}});Ext.Viewport.on({resize:c.onResize,scope:c})},onResize:function(){var a=this;if($("#slider").width()>$(a.element.dom).width()-30){a.zoomInBtn.setWidth(10);a.zoomOutBtn.setWidth(10)}else{if($("#slider").width()>$(a.element.dom).width()-40){a.zoomInBtn.setWidth(14);a.zoomOutBtn.setWidth(14)}else{if($(a.element.dom).width()*0.65<=$(a.element.dom).width()-40){$("#slider").show();a.zoomInBtn.setWidth(20);a.zoomOutBtn.setWidth(20)}}}},tooltip)"})}ent)},zont)}},zoalse}},0,["zoomSlider"],["component","container","zoomSlider"],{component:true,container:true,zoomSlider:true},["widget.zoomSlider"],0,[InfinityMobile.view,"ReaderZoomSlider"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.LayoutToolBarToggleIconView",InfinityMobile.view.desktop.LayoutToolBarIconView,{config:{},initialize:function(){var a=this;if(a.config.toggleGroup!=null){a.toggleGroup=a.config.toggleGroup;a.fireEvent("addToggleGroup",a,a.toggleGroup)}a.currentState="";if(a.config.selectedSetting!=null){a.selectedSetting=a.config.selectedSetting}else{if(a.config.iconSelectedUrl){a.iconSelectedUrl=a.config.iconSelectedUrl}}InfinityMobile.view.desktop.LayoutToolBarIconView.prototype.initialize.call(this)},setupEvent:function(){var a=this;a.element.on("tap",function(){a.toggleState();mainPanel.fireEvent(a.event,a)})},toggleup)}},updateState:function(b){var a=this;if(b!=a.currentState){a.currentState=b;switch(a.currentState){case"selected":a.loadSelectedIcon();break;case"":default:a.loadIcon();break}}},loadSelectedIcon:function(){var b=this;var a="";if(b.iconSelectedUrl!=null){a=b.iconSelectedUrl}else{a=settings.topbar[b.selectedSetting]}if(a!=""){b.setStyle({backgroundImage:"url("+a+")"})}}},0,["layouttoolbartoggleicon"],["component","container","layoutview","layouttoolbaricon","layouttoolbartoggleicon"],{component:true,container:true,layoutview:true,layouttoolbaricon:true,layouttoolbartoggleicon:true},["widget.layouttoolbartoggleicon"],0,[InfinityMobile.view.desktop,"LayoutToolBarToggleIconView"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.LayoutToolBarView",InfinityMobile.view.LayoutView,{config:{padding:8,layout:{type:"hbox"},items:[{itemId:"tooltiptool",cls:"tooltiptoolbar",style:"z-index:10000"},{flex:1,itemId:"viewOptions",layout:"hbox",style:"overflow:hidden;",defaults:{margin:"0 10px 0 0"},items:[{id:"toolbarIcon",cls:"toolbarIcon",defaults:{width:"100%",height:"100%",left:0,top:0},items:[{cls:"toolbarIconLarge",itemId:"toolbarIconLarge",style:"background-position: left center; background-size: contain; background-repeat: no-repeat;"},{cls:"toolbarIconSmall",itemId:"toolbarIconSmall",style:"background-position: left center; background-size: contain; background-repeat: no-repeat;"}]},{itemId:"toolbarReaderViewModes",width:0,style:"background-color:green"},{itemId:"fullscreenIcon",xtype:"layouttoolbaricon",setting:"fullscreenicon",event:"fullscreenMode",height:24},{cls:"toolbarZoomBar",itemId:"toolbarZoomBar",xtype:"zoomSlider",height:24},{itemId:"zoomFit",xtype:"layouttoolbartoggleicon",toggleGroup:"zoom",setting:"fitpageicon",selectedSetting:"fitpageselectedicon",event:"zoomModeFit",height:24},{itemId:"zoomFill",xtype:"layouttoolbartoggleicon",toggleGroup:"zoom",setting:"fillpageicon",selectedSetting:"fillpageselectedicon",event:"zoomModeFill",height:24},{itemId:"dpsSingle",xtype:"layouttoolbartoggleicon",toggleGroup:"dps",setting:"singlepageicon",selectedSetting:"singlepageselectedicon",event:"dpsModeOff",height:24},{itemId:"dpsDouble",xtype:"layouttoolbartoggleicon",toggleGroup:"dps",setting:"doublepageicon",selectedSetting:"doublepageselectedicon",event:"dpsModeOn",height:24}]},{width:275,style:"border-left: 1px solid #e1e1e1; border-right: 1px solid #e1e1e1; margin-top:-8px; margin-bottom:-8px",layout:"hbox",padding:"0 10px 0 10px",itemId:"readerPageControlContainer",items:[{itemId:"firstPageIcon",xtype:"layouttoolbaricon",setting:"firsticon",event:"readerFirst"},{itemId:"previousPageIcon",xtype:"layouttoolbaricon",setting:"previousicon",event:"readerLeft"},{flex:1,padding:"12px 0 0 0",style:"text-align:center; font-size:16px; cursor:pointer",html:"32 / 64",id:"1ab7241b-dac9-0eb5-d6f8-14ea7114913c",itemId:"readerPageNumberContainer"},{itemId:"nextPageIcon",xtype:"layouttoolbaricon",setting:"nexticon",event:"readerRight"},{itemId:"lastPageIcon",xtype:"layouttoolbaricon",setting:"lasticon",event:"readerLast"}]},{itemId:"iconsContainer",cls:"toolbarRightContainer",flex:1,style:"overflow:hidden",defaults:{margin:"0 10px 0 10px",style:"float:right; background-size: contain; background-repeat: no-repeat; background-position: center; cursor:pointer;",height:24},items:[{xtype:"layouttoolbaricon",setting:"menuicon",event:"openReaderMenu",itemId:"menuicon"},{xtype:"layouttoolbaricon",setting:"zonesicon",event:"toolbarZones",itemId:"menuZones",cls:"toolbarIconRight"},{xtype:"layouttoolbaricon",setting:"sectionlisticon",event:"toolbarSectionList",itemId:"menuSectionList",cls:"toolbarIconRight"},{xtype:"layouttoolbaricon",setting:"searchicon",event:"toolbarSearch",itemId:"menuSearch"},{xtype:"layouttoolbaricon",setting:"shareicon",event:"toolbarShare",itemId:"menuShare",cls:"toolbarIconRight"},{xtype:"layouttoolbaricon",setting:"archiveicon",event:"toolbarArchive",itemId:"menuArchive",cls:"toolbarIconRight"},{xtype:"layouttoolbaricon",setting:"downloadicon",event:"toolbarDownload",itemId:"menuDownload",cls:"toolbarIconRight"},{xtype:"layouttoolbaricon",setting:"bookmarksicon",event:"toolbarBookmarks",itemId:"menuBookmarks",cls:"toolbarIconRight"},{xtype:"layouttoolbaricon",setting:"printicon",event:"toolbarPrint",itemId:"menuPrint",cls:"toolbarIconRight"},{xtype:"layouttoolbaricon",setting:"clippingicon",event:"toolbarClipping",itemId:"menuClipping",cls:"toolbarIconRight"},{xtype:"layouttoolbaricon",setting:"infoicon",event:"toolbarInfo",itemId:"menuInfo",cls:"toolbarIconRight"},{xtype:"layouttoolbaricon",setting:"infoicon",iconUrl:"resources/images/reader%20icons/speech-ic-wht2.png",event:"toggleTTS",itemId:"menuTTS",status:"STOPPED",cls:"toolbarIconRight"}]}]},initialize:function(){var b=this;var a="#ffffff";if(settings.topbar.color!=null){a="#"+settings.topbar.color.replace("#","")}b.setStyle({color:a});var c=b.getComponent("viewOptions");b.topBarIconContainer=c.getComponent("toolbarIcon");b.topBarIconLarge=b.topBarIconContainer.getComponent("toolbarIconLarge");b.topBarIconSmall=b.topBarIconContainer.getComponent("toolbarIconSmall");b.setUpTopBarIcon();b.ttsToggle=b.getComponent("iconsContainer").getComponent("menuTTS");if(window.SpeechSynthesisUtterance===undefined||settings.tts===undefined){b.ttsToggle.hide()}b.setTtsToggleListener();if(settings.newsday!=null){if(settings.newsday.extraTopBar=="true"){b.topBarIconContainer.hide()}}InfinityMobile.view.LayoutView.prototype.initialize.apply(this,arguments);b.dpsSingle=c.getComponent("dpsSingle");b.dpsDouble=c.getComponent("dpsDouble");b.setDPS();b.zoomFit=c.getComponent("zoomFit");b.zoomFill=c.getComponent("zoomFill");b.setZoom();b.readerPageControlContainer=b.getComponent("readerPageControlContainer");b.readerPageNumberContainer=b.readerPageControlContainer.getComponent("readerPageNumberContainer");b.setPageNumber();b.setIcons();b.setShare();b.setHowTo();b.setupZoomSlider(c);b.setupTooltips();if(settings.newsday!=null){if(settings.newsday.menuDirection=="left"){b.menuIcon.hide()}}},setupTooltips:function(){var a=this;a.tooltip=a.getComponent("tooltiptool");a.fullscreenIcon=a.getComponent("viewOptions").getComponent("fullscreenIcon");a.firstPageIcon=a.readerPageControlContainer.getComponent("firstPageIcon");a.previousPageIcon=a.readerPageControlContainer.getComponent("previousPageIcon");a.nextPageIcon=a.readerPageControlContainer.getComponent("nextPageIcon");a.lastPageIcon=a.readerPageControlContainer.getComponent("lastPageIcon");$(a.tooltip.element.dom).css("visibility","hidden");var b=settings.topbar.toolTips;a.topBarIconContainer.element.dom.onmouseover=function(){a.tooltip.setHtml(publicationName);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.topBarIconContainer.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.fullscreenIcon.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.fullscreen);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.fullscreenIcon.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.zoomFit.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.pageFit);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.zoomFit.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.zoomFill.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.pageFill);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.zoomFill.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.dpsSingle.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.singlePage);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.dpsSingle.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.dpsDouble.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.doublePage);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.dpsDouble.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.firstPageIcon.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.firstPage);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.firstPageIcon.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.previousPageIcon.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.previousPage);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.previousPageIcon.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.nextPageIcon.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.nextPage);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.nextPageIcon.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.lastPageIcon.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.lastPage);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.lastPageIcon.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.menuInfo.element.dom.onmouseover=function(){a.tooltip.setHtml(language.howToUse.howToUse);a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.menuInfo.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.menuClipping.element.dom.onmouseover=function(){a.tooltip.setHtml(language.clippings.createClipping);a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.menuClipping.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.menuPrint.element.dom.onmouseover=function(){a.tooltip.setHtml(language.print.print);a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.menuPrint.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.menuBookmarks.element.dom.onmouseover=function(){a.tooltip.setHtml(language.bookmarks.bookmarks);a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.menuBookmarks.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.menuDownload.element.dom.onmouseover=function(){a.tooltip.setHtml(language.download.download);a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.menuDownload.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.menuArchive.element.dom.onmouseover=function(){a.tooltip.setHtml(language.archive.archive);a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.menuArchive.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.menuShare.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.share);a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.menuShare.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.menuSearch.element.dom.onmouseover=function(){a.tooltip.setHtml(language.search.search);a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.menuSearch.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.menuIcon.element.dom.onmouseover=function(){a.tooltip.setHtml(language.menu.menu);a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.menuIcon.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.zoomContainer.zoomInBtn.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.zoomIn);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.zoomContainer.zoomInBtn.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.zoomContainer.zoomOutBtn.element.dom.onmouseover=function(){a.tooltip.setHtml(language.topbar.zoomOut);a.tooltipRight();$(a.tooltip.element.dom).css("visibility","")};a.zoomContainer.zoomOutBtn.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.menuZones.element.dom.onmouseover=function(){a.tooltip.setHtml(language.menu.zones.capitalizeFirst());a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.menuZones.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")};a.menuSectionList.element.dom.onmouseover=function(){a.tooltip.setHtml(language.sectionList.sectionList);a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.menuSectionList.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")},a.ttsToggle.element.dom.onmouseover=function(){a.tooltip.setHtml(language.menu.readAloud);a.tooltipLeft();$(a.tooltip.element.dom).css("visibility","")};a.ttsToggle.element.dom.onmouseout=function(){$(a.tooltip.element.dom).css("visibility","hidden")}},tooltipRight:function(){var a=this;a.element.dom.onmousemove=(function(b){a.getComponent("tooltiptool").element.dom.style.webkitTransform="translate3d("+(b.clientX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltiptool").element.dom.style.MozTransform="translate3d("+(b.clientX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltiptool").element.dom.style.msTransform="translate3d("+(b.clientX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)"})},tooltipLeft:function(){var a=this;a.element.dom.onmousemove=(function(b){if(b.target.className.indexOf("tooltiptoolbar")==-1){a.getComponent("tooltiptool").element.dom.style.webkitTransform="translate3d("+(b.clientX-$(a.getComponent("tooltiptool").element.dom).width()-25)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltiptool").element.dom.style.MozTransform="translate3d("+(b.clientX-$(a.getComponent("tooltiptool").element.dom).width()-25)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltiptool").element.dom.style.msTransform="translate3d("+(b.clientX-$(a.getComponent("tooltiptool").element.dom).width()-25)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)"}})},setupZoomSlider:function(b){var a=this;a.zoomContainer=b.getComponent("toolbarZoomBar");if(Ext.browser.is.Chrome){if(navigator.appVersion.indexOf("Edge")!=-1){a.zoomContainer.element.dom.style.top="0%"}else{}}else{a.zoomContainer.element.dom.style.top="0%"}},setUpTopBarIcon:function(){var b=this;var a=settings.topbar;b.topBarIconLarge.setStyle({backgroundImage:"url("+a.logo+")"});if(a.smallLogo!=null){var c=a.smallLogo;b.topBarIconContainer.addCls("hasSmallLogo");b.topBarIconSmall.setStyle({backgroundImage:"url("+c+")"})}else{b.topBarIconContainer.addCls("hasSmallLogo");b.topBarIconSmall.setStyle({backgroundImage:"url("+a.logo+")"})}b.topBarIconContainer.element.on("tap",function(){if(settings.topbar.logoUrl!=null){window.open(settings.topbar.logoUrl,"_blank")}else{mainPanel.fireEvent("readerFirst")}})},setDPS:function(){var b=this;var a=settings.reader;if(a.toggleDPS=="True"||a.toggleDPS=="true"){if(a.defaultPageMode=="double"){b.dpsDouble.updateState("selected")}else{b.dpsSingle.updateState("selected")}}else{b.dpsSingle.setHidden(true);b.dpsDouble.setHidden(true)}},setZoom:function(){var b=this;var a=settings.reader;if(a.zoomMode=="fit"){b.zoomFit.updateState("selected")}else{b.zoomFill.updateState("selected")}},setPageNumber:function(){var a=this;a.readerPageNumberContainer.element.on("tap",function(){mainPanel.fireEvent("pageNumber",this)})},sets)})},set:a})},howToTap:function(){mainPanel.fireEvent("toolbarHowTo",this.menuShare,this.readerPageNumberContainer,this.fullscreenIcon,this.menuIcon,this.dpsSingle)},setIcons:function(){var c=this;c.iconsContainer=c.getComponent("iconsContainer");c.menuIcon=c.iconsContainer.getComponent("menuicon");c.menuSearch=c.iconsContainer.getComponent("menuSearch");c.menuShare=c.iconsContainer.getComponent("menuShare");c.menuArchive=c.iconsContainer.getComponent("menuArchive");c.menuDownload=c.iconsContainer.getComponent("menuDownload");c.menuBookmarks=c.iconsContainer.getComponent("menuBookmarks");c.menuPrint=c.iconsContainer.getComponent("menuPrint");c.menuClipping=c.iconsContainer.getComponent("menuClipping");c.menuInfo=c.iconsContainer.getComponent("menuInfo");c.menuZones=c.iconsContainer.getComponent("menuZones");c.menuSectionList=c.iconsContainer.getComponent("menuSectionList");if(settings.clippings==null){c.menuClipping.hide()}if(settings.sharing==null){c.menuShare.hide()}if(settings.menu==null){c.menuIcon.hide();c.menuArchive.hide();c.menuDownload.hide();c.menuBookmarks.hide();c.menuPrint.hide()}else{if(settings.menu.hideArchive!=null){c.menuArchive.hide()}else{var a=Ext.getStore("ArchiveStore");var b=[];if(a.data.items[0]!=null){if(a.data.items[0].raw.editions!=null){b=a.data.items[0].raw.editions.edition;if(b.length==0){c.menuArchive.hide()}else{if(Object.prototype.toString.call(b)==="[object Object]"){if(b["@name"]==editionName){}}}}}}if(settings.menu.hideDownload!=null){c.menuDownload.hide()}if(settings.menu.hidePrint!=null){c.menuPrint.hide()}if(settings.menu.hideBookmarks!=null){c.menuBookmarks.hide()}}if(settings.bookmarks.bookmark.length==0){c.menuSectionList.hide()}if(settings.menu.zones==null||settings.zones.zone.length==0||settings.newsday!=null){c.menuZones.hide()}},capit()})},setTtsToggleListener:function(){var a=this;if(a.ttsToggle.config.status!=null){a.ttsToggle.status=a.ttsToggle.config.status}if(window.SpeechSynthesisUtterance!=undefined){a.ttsToggle.element.on({tap:function(){switch(a.ttsToggle.status){case"STOPPED":case"FINISHED":a.fireEvent("playArticleTTS",a.ttsToggle,"na");break;case"PAUSED":a.fireEvent("resumeArticleTTS",a.ttsToggle,"na");break;case"PLAYING":a.fireEvent("pauseArticleTTS",a.ttsToggle,"na");break;default:a.fireEvent("stopArticleTTS",a.ttsToggle,"na")}}})}}},0,["layouttoolbar"],["component","container","layoutview","layouttoolbar"],{component:true,container:true,layoutview:true,layouttoolbar:true},["widget.layouttoolbar"],0,[InfinityMobile.view.desktop,"LayoutToolBarView"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderToolbarShareMenu",Ext.Container,{config:{modal:true,width:0,height:40,hideOnMaskTap:true,style:"background:black;display:inline;",items:[{itemId:"menuSharing",xtype:"readermenushare",layout:"hbox",defaults:{margin:5}}]},initi:a})},load",a)},hide:function(){var a=this;if(a.loaded){a.fireEvent("shareMenuClose");Ext.Container.prototype.hide.apply(this,arguments)}}},0,["readertoolbarsharemenu"],["component","container","readertoolbarsharemenu"],{component:true,container:true,readertoolbarsharemenu:true},["widget.readertoolbarsharemenu"],0,[InfinityMobile.view.desktop,"ReaderToolbarShareMenu"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.HowToViewOptions",Ext.Container,{config:{height:50,width:0,modal:{opacity:0},cls:"how-to-item how-to-view-options",items:[{itemId:"graphic",width:270,height:165,left:-100,top:-30,style:"background-image:url(resources/images/howTo/full_screen_icon.png);background-size:contain;background-position:center;background-repeat:no-repeat;"},{itemId:"explainationTitle",cls:"howtoview-explainationTitle",style:"color:white;text-align:center;font-size:18px;",left:10,width:200,top:140},{itemId:"explainationText",cls:"howtoview-explainationText",style:"color:white;text-align:center;font-size:14px;",left:10,width:200,top:160}]},initialize:function(){var a=this;a.getModal().setStyle({opacity:0});a.explainationTitle=a.getComponent("explainationTitle");a.explainationText=a.getComponent("explainationText");a.explainationTitle.setHtml(language.howToUse.viewOptionsTitle);a.explainationText.setHtml(language.howToUse.viewOptionsDesc);if(typeof settings!="undefined"&&settings.reader!=null&&(settings.reader.toggleDPS!="true"&&settings.reader.toggleDPS!="True")){a.explainationTitle.setLeft(-25);a.explainationText.setLeft(-25)}a.setupResizeListener()},setStartingLeftValues:function(){var a=this;if((typeof settings!="undefined"&&settings.reader!=null&&(settings.reader.toggleDPS=="true"||settings.reader.toggleDPS=="True"))&&a.returnOrientation()=="landscape"){a.explainationTitle.setLeft(10);a.explainationText.setLeft(10)}else{a.explainationTitle.setLeft(-25);a.explainationText.setLeft(-25)}},setupResizeListener:function(){var a=this;a.resizeListener=function(){if(a.resizeTimeout!=null){clearTimeout(a.resizeTimeout)}a.resizeTimeout=setTimeout(function(){if(a.returnOrientation()=="portrait"){a.explainationTitle.setLeft(-25);a.explainationText.setLeft(-25)}else{a.setStartingLeftValues()}},250)};$(window).on("resize",a.resizeListener)},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(currentProfile=="desktop"){if(window.innerWidth>window.innerHeight){a="landscape"}else{a="portrait"}}}return a},destroy:function(){$(window).off("resize",this.resizeListener);Ext.Container.prototype.destroy.apply(this,arguments)}},0,["howtoeditionoptions"],["component","container","howtoeditionoptions"],{component:true,container:true,howtoeditionoptions:true},["widget.howtoeditionoptions"],0,[InfinityMobile.view.desktop,"HowToViewOptions"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.HowToEditionOptions",Ext.Container,{config:{height:50,cls:"how-to-item how-to-edition-options",width:0,modal:true,items:[{itemId:"graphic",width:270,height:165,right:-70,top:-30,style:"background-image:url(resources/images/howTo/edition-options2.png);background-size:contain;background-position:center;background-repeat:no-repeat;"},{itemId:"explainationTitle",style:"color:white;text-align:center;font-size:18px;white-space:nowrap;",left:-240,width:200,top:140},{itemId:"explainationText",style:"color:white;text-align:center;font-size:14px;",left:-240,width:200,top:160}]},initiesc)}},0,["howtoeditionoptions"],["component","container","howtoeditionoptions"],{component:true,container:true,howtoeditionoptions:true},["widget.howtoeditionoptions"],0,[InfinityMobile.view.desktop,"HowToEditionOptions"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.HowToPageControl",Ext.Container,{config:{height:50,width:0,modal:{opacity:0},cls:"how-to-item",items:[{itemId:"graphic",width:270,height:160,right:-112,top:-38,style:"background-image:url(resources/images/howTo/navigate-pages2.png);background-size:contain;background-position:center;background-repeat:no-repeat;"},{itemId:"explainationTitle",style:"color:white;text-align:center;font-size:18px;",left:-185,width:200,top:135},{itemId:"explainationText",style:"color:white;text-align:center;font-size:14px;",left:-185,width:200,top:155}]},initialize:function(){var a=this;console.log(a);a.getModal().setStyle({opacity:0});a.explainationTitle=a.getComponent("explainationTitle");a.explainationText=a.getComponent("explainationText");a.explainationTitle.setHtml(language.howToUse.navPagesTitle);a.explainationText.setHtml(language.howToUse.navPagesDesc)}},0,["howtoeditionoptions"],["component","container","howtoeditionoptions"],{component:true,container:true,howtoeditionoptions:true},["widget.howtoeditionoptions"],0,[InfinityMobile.view.desktop,"HowToPageControl"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.HowToReader",Ext.Container,{config:{height:200,width:700,modal:{opacity:0},centered:true,layout:{type:"hbox",pack:"middle"},cls:"how-to-item",items:[{itemId:"touchscreenHowTo",width:250,height:200,style:"background-image:url(resources/images/howTo/touch-screen-friendly.png);background-position:center;background-repeat:no-repeat;",items:[{itemId:"explainationTitle",style:"color:white;text-align:center;font-size:18px;",left:30,width:200,top:130,hidden:true},{itemId:"explainationText",style:"color:white;text-align:center;font-size:14px;",left:30,width:200,top:150,hidden:true}]},{itemId:"articleHowTo",width:250,height:200,style:"background-image:url(resources/images/howTo/article-popouts.png);background-position:center;background-repeat:no-repeat;",items:[{itemId:"explainationTitle",style:"color:white;text-align:center;font-size:18px;",left:30,width:200,top:130,hidden:true},{itemId:"explainationText",style:"color:white;text-align:center;font-size:14px;",left:30,width:200,top:150,hidden:true}]}]},initialize:function(){var b=this;b.getModal().setStyle({opacity:0});b.articleHowTo=b.getComponent("articleHowTo");b.articleTitle=b.articleHowTo.getComponent("explainationTitle");b.articleDesc=b.articleHowTo.getComponent("explainationText");b.touchscreenHowTo=b.getComponent("touchscreenHowTo");b.touchscreenTitle=b.touchscreenHowTo.getComponent("explainationTitle");b.touchscreenDesc=b.touchscreenHowTo.getComponent("explainationText");b.articleTitle.setHtml(language.howToUse.articleTitle);b.articleDesc.setHtml(language.howToUse.articleDesc);b.touchscreenTitle.setHtml(language.howToUse.touchscreenTitle);var a=language.howToUse.touchscreenDesc;if(settings.newsday!=null){a=a.replace("Optimised","Optimized")}b.touchscreenDesc.setHtml(a);b.fireEvent("howToReaderInit",b.articleHowTo);b.on({painted:function(){var d=typeof settings!="undefined"&&settings.reader!=null&&settings.reader.bannerAd!=null&&settings.reader.bannerAd.position=="top"?170:0;var c=document.getElementsByClassName("reader-banner-ad");if(d!=0&&(c!=null&&c.length>0)){b.element.dom.style.marginTop=d+"px"}if(Ext.browser.is.IE||navigator.appVersion.indexOf("Edge")!=-1||Ext.browser.is.Safari){b.touchscreenDesc.setTop(150+$(b.touchscreenTitle.element.dom).height())}else{b.touchscreenDesc.setTop(130+$(b.touchscreenTitle.element.dom).height())}b.touchscreenDesc.show();b.touchscreenTitle.show();if(Ext.browser.is.IE||navigator.appVersion.indexOf("Edge")!=-1||Ext.browser.is.Safari){b.articleDesc.setTop(150+$(b.articleTitle.element.dom).height())}else{b.articleDesc.setTop(130+$(b.articleTitle.element.dom).height())}b.articleDesc.show();b.articleTitle.show()},scope:b})}},0,["howtoreader"],["component","container","howtoreader"],{component:true,container:true,howtoreader:true},["widget.howtoreader"],0,[InfinityMobile.view.desktop,"HowToReader"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.DynamicArticlesInterstitialContainer",Ext.Container,{config:{margin:"50 0 0 0"},initialize:function(){var a=this;a.setStyle("height:"+($(document).height()-120)+"px;")},onResize:function(){var a=this;if(a!=null){a.setStyle("height:"+($(document).height()-120)+"px;")}}},0,["dynamicarticlesinterstitialcontainer"],["component","container","dynamicarticlesinterstitialcontainer"],{component:true,container:true,dynamicarticlesinterstitialcontainer:true},["widget.dynamicarticlesinterstitialcontainer"],0,[InfinityMobile.view.desktop,"DynamicArticlesInterstitialContainer"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.DynamicArticlesInterstitial",Ext.Container,{config:{style:"padding:5px 0px 0px 0px",cls:"articlereaderiteminterstitial",items:[{itemId:"advert",cls:"advert"}]},initi}}}}},loadAD)})},onResize:function(){var a=this;a.onResizeFn()}},0,["dynamicarticlesinterstitial"],["component","container","dynamicarticlesinterstitial"],{component:true,container:true,dynamicarticlesinterstitial:true},["widget.dynamicarticlesinterstitial"],0,[InfinityMobile.view.desktop,"DynamicArticlesInterstitial"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.HowToMenuIcon",Ext.Container,{config:{height:50,width:0,modal:{opacity:0},cls:"how-to-item",items:[{itemId:"graphic",width:270,height:300,right:-90,top:-30,style:"background-image:url(resources/images/howTo/menu-options2.png);background-size:contain;background-position:center;background-repeat:no-repeat;"},{itemId:"explainationTitle",html:"Main Menu",style:"color:white;text-align:center;font-size:18px;",left:-200,width:200,top:275},{itemId:"explainationText",html:"Use the menu to access a full list of options and sections for the edition",style:"color:white;text-align:center;font-size:14px;",left:-200,width:200,top:295}]},initiesc)}},0,["howtomenuicon"],["component","container","howtomenuicon"],{component:true,container:true,howtomenuicon:true},["widget.howtomenuicon"],0,[InfinityMobile.view.desktop,"HowToMenuIcon"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.HowToArticlesContainer",Ext.Container,{config:{height:50,width:0,modal:{opacity:0},cls:"how-to-item howToArticlesContainer",items:[{itemId:"graphic",width:270,height:235,left:20,bottom:-15,style:"background-image:url(resources/images/howTo/browse-content.png);background-size:contain;background-position:center;background-repeat:no-repeat;"},{itemId:"explainationTitle",style:"color:white;text-align:center;font-size:18px;",left:165,width:200,bottom:145},{itemId:"explainationText",style:"color:white;text-align:center;font-size:14px;",left:165,width:200,top:-95}]},initiext)}},0,["howtoarticlescontainer"],["component","container","howtoarticlescontainer"],{component:true,container:true,howtoarticlescontainer:true},["widget.howtoarticlescontainer"],0,[InfinityMobile.view.desktop,"HowToArticlesContainer"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.SmallViewTileWide",Ext.Panel,{config:{padding:5,style:"float:left;z-index:6;",layout:"vbox",items:[{itemId:"image",bottom:5,top:5,left:5,right:5,cls:"backgroundImage aspectfill"},{itemId:"title",bottom:5,top:5,left:5,right:5,style:"background-color:rgba(0,0,0,0.5); color:white; font-size:20px; font-weight:bold;overflow:hidden;",padding:10,height:"100%"}]},initialize:function(){var a=this;a.article=a.config.article;a.expand=false;a.bylineHidden=false;a.subheadlineHidden=false;a.paintedTitle=false;a.imageContainer=a.getComponent("image");if(a.config.expandAnim!=null){a.expandAnim=a.config.expandAnim}if(a.config.shrinkAnim!=null){a.shrinkAnim=a.config.shrinkAnim}a.titleContainer=a.getComponent("title");a.setStyle("height:52.5%;width:512px;overflow:hidden;");a.height=52.5;a.imageHeight=1.6;if(a.config.bannerAdCheck!=null){if(a.config.bannerAdCheck=="true"){if(settings.dynamic.adverts!=null){if(settings.dynamic.adverts.bannerAd!=null){a.setStyle("height:72.5%;width:512px;overflow:hidden;");a.height=72.5;a.expandAnim="expandSmallViewTopLeftBanner 0.2s ease-in";a.shrinkAnim="shrinkSmallViewTopLeftBanner 0.2s ease-in";a.imageHeight=1.2}}}}a.timer;a.section=a.getComponent("section");if(a.article.images!=null){if(a.article.images.length>0){a.on("painted",a.setBackgroundImage,a,{delay:10,single:true})}else{a.setNoImage()}}else{a.setNoImage()}a.element.on({tap:"onTap",scope:a})},setBackground"}}}},setNoImage:function(){var d=this;d.titleContainer.resetFloating();d.titleContainer.setStyle("background-color:#EEEEEE; color:black;");d.sectionStr="";if(d.article.sections.length>1){for(var c=0;c<d.article.sections.length;c++){d.sectionStr+=d.article.sections[c]+"/"}d.sectionStr=d.sectionStr.substring(0,sectionStr.length-1)}else{if(d.article.sections[0]!=null){d.sectionStr=d.article.sections[0]}}if(d.article.shortStory!=null){var a=d.article.shortStory.replace("<div></div>","");if(a==null){a=""}}else{var a=""}if(d.sectionStr=="LIVE NEWS"){if(d.article.link!=null){if(d.article.link.length>0){d.article.body+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+d.article.link+"\")' onclick='window.open(\""+d.article.link+"\")'>Click here to view full story</p>"}}}d.headlineTextSize=28;var e=Ext.create("Ext.Container",{itemId:"title",html:"<p class='sectionText' style='color:#B2272A;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+d.sectionStr+"</p><p class='headlineText' style='font-family:Open Sans, sans-serif;font-size:28px;font-weight:semibold;padding-top:5px;padding-bottom:5px;'>"+d.article.headline+"</p><p class='subheadlineText' style='font-family:Open Sans, sans-serif;font-size:14px;font-weight:semibold;padding-bottom:5px;'>"+d.article.subHeadline+"</p><p class='bylineText' style='font-family:Open Sans, sans-serif;font-size:13px;font-weight:normal;padding-bottom:5px;'>"+d.article.byline+"</p><p class='shortStory' style='font-family:Open Sans, sans-serif;font-size:12px;font-weight:normal;'>"+a+"</p>",items:[{itemId:"sharing",top:-20,right:0,defaults:{style:"float:right;",height:30,width:30}}]});e.element.on({painted:function(){if(!d.paintedTitle){var f=e.element.down(".sectionText").dom.clientHeight+e.element.down(".headlineText").dom.clientHeight+e.element.down(".subheadlineText").dom.clientHeight+e.element.down(".bylineText").dom.clientHeight;var j=$(this.element.dom).height()-f;e.element.down(".shortStory").dom.style.maxHeight=(j-(j%14)-26)+"px";if(e.element.down(".bylineText").dom.clientHeight+e.element.down(".bylineText").dom.offsetTop>=$(this.element.dom).height()-20){e.element.down(".bylineText").dom.style.visibility="hidden";d.bylineHidden=true}if(e.element.down(".subheadlineText").dom.clientHeight+e.element.down(".subheadlineText").dom.offsetTop>=$(this.element.dom).height()-20){e.element.down(".subheadlineText").dom.style.visibility="hidden";d.subheadline=true}var h=false;while(!h){var g=d.titleContainer.element.down(".sectionText").dom.clientHeight+d.titleContainer.element.down(".headlineText").dom.clientHeight+20;if(g>$(d.element.dom).height()){d.headlineTextSize=d.headlineTextSize-4;$(d.titleContainer.element.down(".headlineText").dom).css("font-size",d.headlineTextSize+"px")}else{h=true;break}}d.paintedTitle=true}},scope:d});d.titleContainer.add(e);if(d.article.body!=null){if(d.article.body.indexOf("<p>")!=-1){d.article.body=d.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}}if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var b=localStorage.getItem("bodyFontSize"+publicationguid)}else{var b=16}d.titleContainer.add(Ext.create("Ext.Container",{itemId:"articleBody",cls:"articleText",width:"100%",html:d.article.body,style:"overflow:hidden;font-size:"+b+"px;font-weight:normal;font-family:Open Sans, sans-serif;",padding:5,flex:1,hidden:true,overflow:"hidden",layout:{type:"vbox"}}))},resize:function(){var f=this;var g=f.titleContainer.getComponent("title");var c=false;var e=false;while(!e){if(f.titleContainer.element.down(".sectionText")!=null||f.titleContainer.element.down(".headlineText")){var b=f.titleContainer.element.down(".sectionText").dom.clientHeight+f.titleContainer.element.down(".headlineText").dom.clientHeight+20;if(b>$(f.element.dom).height()){f.headlineTextSize=f.headlineTextSize-4;$(f.titleContainer.element.down(".headlineText").dom).css("font-size",f.headlineTextSize+"px")}else{c=true;e=true;break}}else{e=true}}if(f.hasImage){if(c){var b=f.titleContainer.element.down(".sectionText").dom.clientHeight+f.titleContainer.element.down(".headlineText").dom.clientHeight+20;while(c){if(b<$(f.element.dom).height()){if(f.headlineTextSize+4<=20){f.headlineTextSize+=4;$(f.titleContainer.element.down(".headlineText").dom).css("font-size",(f.headlineTextSize)+"px");b=f.titleContainer.element.down(".sectionText").dom.clientHeight+f.titleContainer.element.down(".headlineText").dom.clientHeight+20}else{c=false;break}}else{$(f.titleContainer.element.down(".headlineText").dom).css("font-size",(f.headlineTextSize-4)+"px");c=false;break}}}}else{if(c){var b=f.titleContainer.element.down(".sectionText").dom.clientHeight+f.titleContainer.element.down(".headlineText").dom.clientHeight+20;while(c){if(b<$(f.element.dom).height()){if(f.headlineTextSize+4<=28){f.headlineTextSize+=4;console.log(f.headlineTextSize);$(f.titleContainer.element.down(".headlineText").dom).css("font-size",(f.headlineTextSize)+"px");b=f.titleContainer.element.down(".sectionText").dom.clientHeight+f.titleContainer.element.down(".headlineText").dom.clientHeight+20}else{c=false;break}}else{$(f.titleContainer.element.down(".headlineText").dom).css("font-size",(f.headlineTextSize-4)+"px");f.headlineTextSize-=4;c=false;break}}}}if(g!=null){var j=g.element.down(".sectionText").dom.clientHeight+g.element.down(".headlineText").dom.clientHeight+g.element.down(".subheadlineText").dom.clientHeight+g.element.down(".bylineText").dom.clientHeight;var h=$(this.element.dom).height()-j;g.element.down(".shortStory").dom.style.maxHeight=(h-(h%14)-26)+"px";if(parseFloat(g.element.down(".bylineText").dom.clientHeight)+parseFloat(g.element.down(".bylineText").dom.offsetTop)>=$(this.element.dom).height()-20){g.element.down(".bylineText").dom.style.visibility="hidden";f.bylineHidden=true}else{g.element.down(".bylineText").dom.style.visibility="";f.bylineHidden=false}if(parseFloat(g.element.down(".subheadlineText").dom.clientHeight)+parseFloat(g.element.down(".subheadlineText").dom.offsetTop)>=$(this.element.dom).height()-20){g.element.down(".subheadlineText").dom.style.visibility="hidden";f.subheadlineHidden=true}else{g.element.down(".subheadlineText").dom.style.visibility="";f.subheadlineHidden=false}}if(f.hasImage){if(f.imageAspect){var d=$(f.element.dom).height()/f.image.naturalHeight;var a=f.image.naturalWidth*d;if(a>$(f.element.dom).width()/2){f.imageContainer.element.dom.style.backgroundSize="50%";f.imageContainer.element.dom.style.backgroundPosition="0% 50%"}else{f.imageContainer.element.dom.style.backgroundSize=" auto 100%";f.imageContainer.element.dom.style.backgroundPosition="0% 0%"}}}},setupSharing:function(f){var h=this;if(f){h.sharingImage.removeAll()}else{h.sharingContainer.removeAll()}var d=Ext.getStore("SettingStore");var a=d.data.items[0].raw.sharing;if(h.hasImage){var e=Ext.create("InfinityMobile.view.desktop.ArticleReaderFullscreenGalleryIcon",{padding:5,images:h.article.images,article:h.article});h.sharingImage.add(e);var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"white",tile:h});h.sharingImage.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"white",tile:h});h.sharingImage.add(k)}else{var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"black",tile:h});h.sharingContainer.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"black",tile:h});h.sharingContainer.add(k)}if(a.pinterest!=null){if(f){var j=a.pinterest.icon;var c=h.sharingImage}else{var j=a.pinterest.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.pinterest.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.googlePlus!=null){if(f){var j=a.googlePlus.icon;var c=h.sharingImage}else{var j=a.googlePlus.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.googlePlus.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.linkedIn!=null){if(f){var j=a.linkedIn.icon;var c=h.sharingImage}else{var j=a.linkedIn.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.linkedIn.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.twitter!=null){if(f){var j=a.twitter.icon;var c=h.sharingImage}else{var j=a.twitter.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.twitter.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.facebook!=null){if(f){var j=a.facebook.icon;var c=h.sharingImage}else{var j=a.facebook.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.facebook.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.email!=null){if(f){var j=a.email.icon;var c=h.sharingImage}else{var j=a.email.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.email.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}},onTap:function(j){var l=this;var n=l.titleContainer.getComponent("title");var p=false;if(p&&l.sectionStr.indexOf("LIVE NEWS")==-1){l.fireEvent("articleClick",l.article,l.article.guid)}else{if(p&&l.sectionStr.indexOf("LIVE NEWS")!=1){l.fireEvent("liveArticleClick",l.article)}else{if(!l.hasImage&&!l.expand){if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}}clearInterval(l.timer);if(!l.expand){l.fireEvent("tileTapped",l);l.titleContainer.setPadding(40);if(l.titleContainer.getComponent("title")!=null){var h=l.element.down(".bylineText");if(h!=null){$(h.dom).attr("class","byline");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px")}var b=l.element.down(".headlineText");if(b!=null){$(b.dom).attr("class","headline");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px")}var k=l.element.down(".subheadlineText");if(k!=null){$(k.dom).attr("class","subheadline");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px")}var o=l.element.down(".sectionText");if(o!=null){$(o.dom).attr("class","section");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px")}}if(l.article.body.indexOf("<p>")!=-1){l.article.body=l.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}if(l.hasImage){l.articlePop=Ext.create("Ext.Container",{height:"100%",width:"100%",style:"background-color:#929292",overflow:"scroll",layout:{type:"vbox"},scrollable:{direction:"vertical",directionLock:true,indicators:false},items:[{itemId:"image",width:"100%",height:(l.imageContainer.element.dom.scrollHeight*l.imageHeight),cls:"backgroundImage aspectfill"},{itemId:"title",width:"100%",style:"color:white;background-color:#929292",height:"auto",padding:5,html:"<p class='section' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:bold;'>"+l.sectionStr+"</p><p class='headline' style='font-family:Open Sans, sans-serif;font-size:32px;font-weight:bold;padding-top:5px;padding-bottom:5px;'>"+l.article.headline+"</p><p class='subheadline' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:bold;padding-bottom:5px;'>"+l.article.subHeadline+"</p><p class='byline' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:normal;padding-bottom:5px;>"+l.article.byline+"</p><p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;'>"+l.article.body+"</p>",items:[{itemId:"sharing",top:20,right:40,defaults:{style:"float:right;",height:30,width:30}}]}]});var q=l.articlePop.getComponent("title").element.down("div");q.dom.style.padding="40px";l.sharingImage=l.articlePop.getComponent("title").getComponent("sharing");l.setupSharing(true);l.sharingImage.show();l.imageContainer.hide();l.titleContainer.hide();l.articlePop.getComponent("image").element.dom.style.backgroundImage="url('"+l.firstImage.url+"')";if(l.imageAspect){l.articlePop.getComponent("image").element.dom.style.backgroundSize="contain";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="center"}else{l.articlePop.getComponent("image").element.dom.style.backgroundSize="cover";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="50% 0%"}l.add(l.articlePop);if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var a=localStorage.getItem("bodyFontSize"+publicationguid)}else{var a=16}$(".articleText").css("font-size",a+"px");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px");l.articlePop.getComponent("title").element.dom.style.position="relative";l.articlePop.getComponent("title").element.down("div").dom.style.width="758px";if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){l.articlePop.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.articlePop.items.items[0].element.dom.clientHeight+l.articlePop.items.items[1].element.dom.clientHeight+40)+"px"})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.articlePop.getScrollable().getScroller().on({scroll:function(u){var t=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);var s=l.articlePop.getScrollable().getScroller().position.y;var r=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);if(((t-s)/r)>0){l.articlePop.getComponent("image").element.dom.style.top=(s)+"px";l.articlePop.getComponent("image").element.dom.style.opacity=((t-s)/r)}}})}}else{if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){l.titleContainer.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){if(l.desktopScroll.down(".x-scroll-indicator-dark")!=null){l.desktopScroll.down(".x-scroll-indicator-dark").dom.style.display="none"}l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.titleContainer.items.items[0].element.dom.clientHeight+l.titleContainer.items.items[1].element.dom.clientHeight+40)+"px"})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.titleContainer.setScrollable(true);l.titleContainer.getScrollable().getScroller().setDirectionLock(true);var f=l.titleContainer.getScrollable().getScroller();f.container.dom.offsetParent.style.zIndex=14}l.sharingContainer=l.titleContainer.getComponent("title").getComponent("sharing");l.sharingContainer.show();l.setupSharing(false);l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="none";if(l.bylineHidden){console.log(l.bylineHidden);n.element.down(".bylineText").dom.style.visibility=""}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility=""}}l.element.dom.style.position="absolute";l.element.dom.style.zIndex=8;l.expand=true;l.element.dom.style.animation=l.expandAnim;l.element.dom.style.animationFillMode="forwards"}else{if(j.target.className.indexOf("x-scroll-view")==-1&&j.target.className.indexOf("fullStoryLink")==-1){if(l.hasImage){l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}l.articlePop.destroy();l.imageContainer.show();l.titleContainer.show();if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction)}}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}else{l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="28px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}var b=l.element.down(".headline");if(b!=null){$(b.dom).attr("class","headlineText")}var k=l.element.down(".subheadline");if(k!=null){$(k.dom).attr("class","subheadlineText")}var h=l.element.down(".byline");if(h!=null){$(h.dom).attr("class","bylineText")}var o=l.element.down(".section");if(o!=null){$(o.dom).attr("class","sectionText")}if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="";l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction);if(Ext.browser.is.IE){l.desktopScroll.down(".x-scroll-container").dom.style.height=""}}}l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="";if(l.bylineHidden){n.element.down(".bylineText").dom.style.visibility="hidden"}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility="hidden"}if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}}}}}},liveTap:function(){var a=this;window.open(a.article.url)}},0,["smallviewtilewide"],["component","container","panel","smallviewtilewide"],{component:true,container:true,panel:true,smallviewtilewide:true},["widget.smallviewtilewide"],0,[InfinityMobile.view.desktop,"SmallViewTileWide"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.SmallViewTileSmall",Ext.Panel,{config:{padding:5,style:"float:left;z-index:6 !important;",layout:"vbox",items:[{itemId:"image",bottom:5,top:5,left:5,right:5,cls:"backgroundImage aspectfill"},{itemId:"title",bottom:5,top:5,left:5,right:5,style:"background-color:rgba(0,0,0,0.5); color:white; font-size:20px; font-weight:bold;overflow:hidden;",padding:10,height:"100%"}]},initi:a})},setBackground"}}}},setNoImage:function(){var d=this;d.titleContainer.resetFloating();d.titleContainer.setStyle("background-color:#EEEEEE; color:black;");d.hasImage=false;d.sectionStr="";if(d.article.sections.length>1){for(var c=0;c<d.article.sections.length;c++){d.sectionStr+=d.article.sections[c]+"/"}d.sectionStr=d.sectionStr.substring(0,sectionStr.length-1)}else{if(d.article.sections[0]!=null){d.sectionStr=d.article.sections[0]}}if(d.article.shortStory!=null){var a=d.article.shortStory.replace("<div></div>","");if(a==null){a=""}}else{var a=""}if(d.sectionStr=="LIVE NEWS"){if(d.article.link!=null){if(d.article.link.length>0){d.article.body+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+d.article.link+"\")' onclick='window.open(\""+d.article.link+"\")'>Click here to view full story</p>"}}}var e=Ext.create("Ext.Container",{itemId:"title",html:"<p class='sectionText' style='color:#B2272A;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+d.sectionStr+"</p><p class='headlineText' style='font-family:Open Sans, sans-serif;font-size:28px;font-weight:semibold;padding-top:5px;padding-bottom:5px;'>"+d.article.headline+"</p><p class='subheadlineText' style='font-family:Open Sans, sans-serif;font-size:14px;font-weight:semibold;padding-bottom:5px;'>"+d.article.subHeadline+"</p><p class='bylineText' style='font-family:Open Sans, sans-serif;font-size:13px;font-weight:normal;padding-bottom:5px;'>"+d.article.byline+"</p><p class='shortStory' style='font-family:Open Sans, sans-serif;font-size:12px;font-weight:normal;'>"+a+"</p>",items:[{itemId:"sharing",top:-20,right:0,defaults:{style:"float:right;",height:30,width:30}}]});d.headlineTextSize=28;e.element.on({painted:function(){if(!d.paintedTitle){var f=e.element.down(".sectionText").dom.clientHeight+e.element.down(".headlineText").dom.clientHeight+e.element.down(".subheadlineText").dom.clientHeight+e.element.down(".bylineText").dom.clientHeight;var j=$(this.element.dom).height()-f;e.element.down(".shortStory").dom.style.maxHeight=(j-(j%14)-26)+"px";if(e.element.down(".bylineText").dom.clientHeight+e.element.down(".bylineText").dom.offsetTop>=$(this.element.dom).height()-20){e.element.down(".bylineText").dom.style.visibility="hidden";d.bylineHidden=true}if(e.element.down(".subheadlineText").dom.clientHeight+e.element.down(".subheadlineText").dom.offsetTop>=$(this.element.dom).height()-20){e.element.down(".subheadlineText").dom.style.visibility="hidden";d.subheadline=true}var h=false;while(!h){var g=d.titleContainer.element.down(".sectionText").dom.clientHeight+d.titleContainer.element.down(".headlineText").dom.clientHeight+20;if(g>$(d.element.dom).height()){d.headlineTextSize=d.headlineTextSize-4;$(d.titleContainer.element.down(".headlineText").dom).css("font-size",d.headlineTextSize+"px")}else{h=true;break}}d.paintedTitle=true}},scope:d});d.titleContainer.add(e);if(d.article.body!=null){if(d.article.body.indexOf("<p>")!=-1){d.article.body=d.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}}if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var b=localStorage.getItem("bodyFontSize"+publicationguid)}else{var b=16}d.titleContainer.add(Ext.create("Ext.Container",{itemId:"articleBody",cls:"articleText",width:"100%",html:d.article.body,style:"overflow:hidden;font-size:"+b+"px;font-weight:normal;font-family:Open Sans, sans-serif;",padding:5,flex:1,hidden:true,overflow:"hidden",layout:{type:"vbox"}}))},rse}}},setupSharing:function(f){var h=this;if(f){h.sharingImage.removeAll()}else{h.sharingContainer.removeAll()}var d=Ext.getStore("SettingStore");var a=d.data.items[0].raw.sharing;if(h.hasImage){var e=Ext.create("InfinityMobile.view.desktop.ArticleReaderFullscreenGalleryIcon",{padding:5,images:h.article.images,article:h.article});h.sharingImage.add(e);var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"white",tile:h});h.sharingImage.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"white",tile:h});h.sharingImage.add(k)}else{var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"black",tile:h});h.sharingContainer.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"black",tile:h});h.sharingContainer.add(k)}if(a.pinterest!=null){if(f){var j=a.pinterest.icon;var c=h.sharingImage}else{var j=a.pinterest.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.pinterest.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.googlePlus!=null){if(f){var j=a.googlePlus.icon;var c=h.sharingImage}else{var j=a.googlePlus.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.googlePlus.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.linkedIn!=null){if(f){var j=a.linkedIn.icon;var c=h.sharingImage}else{var j=a.linkedIn.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.linkedIn.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.twitter!=null){if(f){var j=a.twitter.icon;var c=h.sharingImage}else{var j=a.twitter.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.twitter.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.facebook!=null){if(f){var j=a.facebook.icon;var c=h.sharingImage}else{var j=a.facebook.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.facebook.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.email!=null){if(f){var j=a.email.icon;var c=h.sharingImage}else{var j=a.email.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.email.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}},onTap:function(j){var l=this;var n=l.titleContainer.getComponent("title");var p=false;if(p&&l.sectionStr.indexOf("LIVE NEWS")==-1){l.fireEvent("articleClick",l.article,l.article.guid)}else{if(p&&l.sectionStr.indexOf("LIVE NEWS")!=1){l.fireEvent("liveArticleClick",l.article)}else{if(!l.hasImage&&!l.expand){if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}}clearInterval(l.timer);if(!l.expand){l.fireEvent("tileTapped",l);l.titleContainer.setPadding(40);if(l.titleContainer.getComponent("title")!=null){var h=l.element.down(".bylineText");if(h!=null){$(h.dom).attr("class","byline");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px")}var b=l.element.down(".headlineText");if(b!=null){$(b.dom).attr("class","headline");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px")}var k=l.element.down(".subheadlineText");if(k!=null){$(k.dom).attr("class","subheadline");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px")}var o=l.element.down(".sectionText");if(o!=null){$(o.dom).attr("class","section");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px")}}if(l.article.body.indexOf("<p>")!=-1){l.article.body=l.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}if(l.hasImage){l.articlePop=Ext.create("Ext.Container",{height:"100%",width:"100%",style:"background-color:#929292",overflow:"scroll",layout:{type:"vbox"},scrollable:{direction:"vertical",directionLock:true,indicators:false},items:[{itemId:"image",width:"100%",height:(l.imageContainer.element.dom.scrollHeight*l.imageHeight),cls:"backgroundImage aspectfill"},{itemId:"title",width:"100%",style:"color:white;background-color:#929292",height:"auto",padding:5,html:"<p class='section' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:bold;'>"+l.sectionStr+"</p><p class='headline' style='font-family:Open Sans, sans-serif;font-size:32px;font-weight:bold;padding-top:5px;padding-bottom:5px;'>"+l.article.headline+"</p><p class='subheadline' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:bold;padding-bottom:5px;'>"+l.article.subHeadline+"</p><p class='byline' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:normal;padding-bottom:5px;>"+l.article.byline+"</p><p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;'>"+l.article.body+"</p>",items:[{itemId:"sharing",top:20,right:40,defaults:{style:"float:right;",height:30,width:30}}]}]});var q=l.articlePop.getComponent("title").element.down("div");q.dom.style.padding="40px";l.sharingImage=l.articlePop.getComponent("title").getComponent("sharing");l.setupSharing(true);l.sharingImage.show();l.imageContainer.hide();l.titleContainer.hide();l.articlePop.getComponent("image").element.dom.style.background="url('"+l.firstImage.url+"')";l.articlePop.getComponent("image").element.dom.style.backgroundSize="cover";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="50% 0%";l.add(l.articlePop);if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var a=localStorage.getItem("bodyFontSize"+publicationguid)}else{var a=16}$(".articleText").css("font-size",a+"px");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px");l.articlePop.getComponent("title").element.dom.style.position="relative";l.articlePop.getComponent("title").element.down("div").dom.style.width="758px";if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){l.articlePop.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.articlePop.items.items[0].element.dom.clientHeight+l.articlePop.items.items[1].element.dom.clientHeight+40)+"px"})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.articlePop.getScrollable().getScroller().on({scroll:function(u){var t=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);var s=l.articlePop.getScrollable().getScroller().position.y;var r=l.articlePop.getComponent("image").element.dom.style.height.substring(0,l.articlePop.getComponent("image").element.dom.style.height.length-2);if(((t-s)/r)>0){l.articlePop.getComponent("image").element.dom.style.top=(s)+"px";l.articlePop.getComponent("image").element.dom.style.opacity=((t-s)/r)}}})}}else{if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){l.titleContainer.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animationend",function(){if(l.desktopScroll.down(".x-scroll-indicator-dark")!=null){l.desktopScroll.down(".x-scroll-indicator-dark").dom.style.display="none"}l.desktopScroll.down(".x-scroll-container").dom.style.height=(l.titleContainer.items.items[0].element.dom.clientHeight+l.titleContainer.items.items[1].element.dom.clientHeight+40)+"px"})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.titleContainer.setScrollable(true);l.titleContainer.getScrollable().getScroller().setDirectionLock(true);var f=l.titleContainer.getScrollable().getScroller();f.container.dom.offsetParent.style.zIndex=14}l.sharingContainer=l.titleContainer.getComponent("title").getComponent("sharing");l.sharingContainer.show();l.setupSharing(false);l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="none";if(l.bylineHidden){console.log(l.bylineHidden);n.element.down(".bylineText").dom.style.visibility=""}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility=""}}l.element.dom.style.position="absolute";l.element.dom.style.zIndex=8;l.expand=true;l.element.dom.style.animation=l.expandAnim;l.element.dom.style.animationFillMode="forwards"}else{if(j.target.className.indexOf("x-scroll-view")==-1&&j.target.className.indexOf("fullStoryLink")==-1){if(l.hasImage){l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}l.articlePop.destroy();l.imageContainer.show();l.titleContainer.show();if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction)}}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}else{l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="28px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}var b=l.element.down(".headline");if(b!=null){$(b.dom).attr("class","headlineText")}var k=l.element.down(".subheadline");if(k!=null){$(k.dom).attr("class","subheadlineText")}var h=l.element.down(".byline");if(h!=null){$(h.dom).attr("class","bylineText")}var o=l.element.down(".section");if(o!=null){$(o.dom).attr("class","sectionText")}if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="";l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction);if(Ext.browser.is.IE){l.desktopScroll.down(".x-scroll-container").dom.style.height=""}}}l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="";if(l.bylineHidden){n.element.down(".bylineText").dom.style.visibility="hidden"}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility="hidden"}if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}}}}}},liveTap:function(){var a=this;window.open(a.article.url)}},0,["smallviewtilesmall"],["component","container","panel","smallviewtilesmall"],{component:true,container:true,panel:true,smallviewtilesmall:true},["widget.smallviewtilesmall"],0,[InfinityMobile.view.desktop,"SmallViewTileSmall"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.SmallViewTileMed",Ext.Panel,{config:{padding:5,style:"float:left;z-index:6 !important;",layout:"vbox",items:[{itemId:"image",bottom:5,top:5,left:5,right:5,cls:"backgroundImage aspectfill"},{itemId:"title",bottom:5,top:5,left:5,right:5,style:"background-color:rgba(0,0,0,0.5); color:white; font-size:20px; font-weight:bold;overflow:hidden;",padding:10,height:"100%"}]},initi:a})},setBackgroundImage:function(){var c=this;var a=c.article.images;c.hasImage=true;c.firstImage=a[0];c.imageContainer.element.dom.style.backgroundImage="url('"+c.firstImage.url+"')";c.titleContainer.setStyle("color:white;padding:5px;");c.titleContainer.element.dom.style.height="";c.titleContainer.element.dom.style.height="";c.imageContainer.element.dom.style.backgroundSize="cover";c.imageContainer.element.dom.style.backgroundPosition="50% 0%";c.imageContainer.element.dom.style.backgroundColor="gray";c.imageAspect=false;c.sectionStr="";if(c.article.sections.length>1){for(var b=0;b<c.article.sections.length;b++){c.sectionStr+=c.article.sections[b]+"/"}c.sectionStr=c.sectionStr.substring(0,c.sectionStr.length-1)}else{if(c.article.sections[0]!=null){c.sectionStr=c.article.sections[0]}}c.headlineTextSize=28;c.titleContainer.setHtml("<div class='tileText' style='word-wrap:break-word;position:absolute;bottom:10px;right:10px;left:10px;' ><p  class='sectionText' style='color:white;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+c.sectionStr+"</p><p class='headlineText' style='font-family:Open Sans, sans-serif;font-size:28px;font-weight:semibold;'>"+c.article.headline+"</p><p style='font-family:Open Sans, sans-serif;font-size:14px;font-weight:semibold;'>"+c.article.subHeadline+"</p><p style='font-family:Open Sans, sans-serif;font-size:13px;font-weight:normal;>"+c.article.byline+"</p></div>");var d=new Image();d.src=c.firstImage.url;d.onload=function(){var g=d.naturalWidth/d.naturalHeight;if(g<1){c.imageAspect=true;var f=$(c.element.dom).height()/c.image.naturalHeight;var e=c.image.naturalWidth*f;if(e>$(c.element.dom).width()/2){c.imageContainer.element.dom.style.backgroundSize="50%";c.imageContainer.element.dom.style.backgroundPosition="0% 50%"}else{c.imageContainer.element.dom.style.backgroundSize=" auto 100%";c.imageContainer.element.dom.style.backgroundPosition="0% 0%"}c.imageContainer.element.dom.style.backgroundSize="50%";c.imageContainer.element.dom.style.backgroundPosition="0% 50%";c.titleContainer.element.down(".tileText").dom.style.bottom="";c.titleContainer.element.down(".tileText").dom.style.top="50%";c.titleContainer.element.down(".tileText").dom.style.left="55%";c.titleContainer.element.down(".tileText").dom.style.transform="translate(0%, -50%)"}};if(c.sectionStr=="LIVE NEWS"){if(c.article.link!=null){if(c.article.link.length>0){c.article.body+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+c.article.link+"\")' onclick='window.open(\""+c.article.link+"\")'>Click here to view full story</p>"}}}c.titleContainer.element.on({parue}},scope:c})},setNoImage:function(){var d=this;d.titleContainer.resetFloating();d.titleContainer.setStyle("background-color:#EEEEEE; color:black;");d.sectionStr="";if(d.article.sections.length>1){for(var c=0;c<d.article.sections.length;c++){d.sectionStr+=d.article.sections[c]+"/"}d.sectionStr=d.sectionStr.substring(0,sectionStr.length-1)}else{if(d.article.sections[0]!=null){d.sectionStr=d.article.sections[0]}}if(d.article.shortStory!=null){var a=d.article.shortStory.replace("<div></div>","");if(a==null){a=""}}else{var a=""}if(d.sectionStr=="LIVE NEWS"){if(d.article.link!=null){if(d.article.link.length>0){d.article.body+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+d.article.link+"\")' onclick='window.open(\""+d.article.link+"\")'>Click here to view full story</p>"}}}var e=Ext.create("Ext.Container",{itemId:"title",html:"<p class='sectionText' style='color:#B2272A;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;'>"+d.sectionStr+"</p><p class='headlineText' style='font-family:Open Sans, sans-serif;font-size:28px;font-weight:semibold;padding-top:5px;padding-bottom:5px;'>"+d.article.headline+"</p><p class='subheadlineText' style='font-family:Open Sans, sans-serif;font-size:14px;font-weight:semibold;padding-bottom:5px;'>"+d.article.subHeadline+"</p><p class='bylineText' style='font-family:Open Sans, sans-serif;font-size:13px;font-weight:normal;padding-bottom:5px;'>"+d.article.byline+"</p><p class='shortStory' style='font-family:Open Sans, sans-serif;font-size:12px;font-weight:normal;'>"+a+"</p>",items:[{itemId:"sharing",top:-20,right:0,defaults:{style:"float:right;",height:30,width:30}}]});d.headlineTextSize=28;e.element.on({parue}},scope:d});d.titleContainer.add(e);if(d.article.body!=null){if(d.article.body.indexOf("<p>")!=-1){d.article.body=d.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}}if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var b=localStorage.getItem("bodyFontSize"+publicationguid)}else{var b=16}d.titleContainer.add(Ext.create("Ext.Container",{itemId:"articleBody",cls:"articleText",width:"100%",html:d.article.body,style:"overflow:hidden;font-size:"+b+"px;font-weight:normal;font-family:Open Sans, sans-serif;",padding:5,flex:1,hidden:true,overflow:"hidden",layout:{type:"vbox"}}))},r"}}}},setupSharing:function(f){var h=this;if(f){h.sharingImage.removeAll()}else{h.sharingContainer.removeAll()}var d=Ext.getStore("SettingStore");var a=d.data.items[0].raw.sharing;if(h.hasImage){var e=Ext.create("InfinityMobile.view.desktop.ArticleReaderFullscreenGalleryIcon",{padding:5,images:h.article.images,article:h.article});h.sharingImage.add(e);var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"white",tile:h});h.sharingImage.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"white",tile:h});h.sharingImage.add(k)}else{var b=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"decrease",color:"black",tile:h});h.sharingContainer.add(b);var k=Ext.create("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",{type:"increase",color:"black",tile:h});h.sharingContainer.add(k)}if(a.pinterest!=null){if(f){var j=a.pinterest.icon;var c=h.sharingImage}else{var j=a.pinterest.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.pinterest.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.googlePlus!=null){if(f){var j=a.googlePlus.icon;var c=h.sharingImage}else{var j=a.googlePlus.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.googlePlus.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.linkedIn!=null){if(f){var j=a.linkedIn.icon;var c=h.sharingImage}else{var j=a.linkedIn.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.linkedIn.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.twitter!=null){if(f){var j=a.twitter.icon;var c=h.sharingImage}else{var j=a.twitter.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.twitter.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.facebook!=null){if(f){var j=a.facebook.icon;var c=h.sharingImage}else{var j=a.facebook.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.facebook.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}if(a.email!=null){if(f){var j=a.email.icon;var c=h.sharingImage}else{var j=a.email.iconDark;var c=h.sharingContainer}var g=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:j,link:a.email.link,message:h.article.headline,padding:3,cls:"articleViewBtn"});c.add(g)}},onTap:function(j){var l=this;var n=l.titleContainer.getComponent("title");var p=false;if(p&&l.sectionStr.indexOf("LIVE NEWS")==-1){l.fireEvent("articleClick",l.article,l.article.guid)}else{if(p&&l.sectionStr.indexOf("LIVE NEWS")!=1){l.fireEvent("liveArticleClick",l.article)}else{if(!l.hasImage&&!l.expand){if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}}clearInterval(l.timer);if(!l.expand){l.fireEvent("tileTapped",l);l.titleContainer.setPadding(40);if(l.titleContainer.getComponent("title")!=null){var h=l.element.down(".bylineText");if(h!=null){$(h.dom).attr("class","byline");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px")}var b=l.element.down(".headlineText");if(b!=null){$(b.dom).attr("class","headline");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px")}var k=l.element.down(".subheadlineText");if(k!=null){$(k.dom).attr("class","subheadline");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px")}var o=l.element.down(".sectionText");if(o!=null){$(o.dom).attr("class","section");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px")}}if(l.article.body.indexOf("<p>")!=-1){l.article.body=l.article.body.replace(/<p>/g,"<p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;margin-bottom:8px;'>")}if(l.hasImage){l.articlePop=Ext.create("Ext.Container",{height:"100%",width:"100%",style:"background-color:#929292",overflow:"scroll",layout:{type:"vbox"},scrollable:{direction:"vertical",directionLock:true,indicators:false},items:[{itemId:"image",width:"100%",height:(l.imageContainer.element.dom.scrollHeight*1.6),cls:"backgroundImage aspectfill"},{itemId:"title",width:"100%",style:"color:white;background-color:#929292",height:"auto",padding:5,html:"<p class='section' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:bold;'>"+l.sectionStr+"</p><p class='headline' style='font-family:Open Sans, sans-serif;font-size:32px;font-weight:bold;padding-top:5px;padding-bottom:5px;'>"+l.article.headline+"</p><p class='subheadline' style='font-family:Open Sans, sans-serif;font-size:20px;font-weight:bold;padding-bottom:5px;'>"+l.article.subHeadline+"</p><p class='byline' style='font-family:Open Sans, sans-serif;font-size:18px;font-weight:normal;padding-bottom:5px;>"+l.article.byline+"</p><p style='font-family:Open Sans, sans-serif;font-size:16px;font-weight:normal;'>"+l.article.body+"</p>",items:[{itemId:"sharing",top:20,right:40,defaults:{style:"float:right;",height:30,width:30}}]}]});var q=l.articlePop.getComponent("title").element.down("div");q.dom.style.padding="40px";l.sharingImage=l.articlePop.getComponent("title").getComponent("sharing");l.setupSharing(true);l.sharingImage.show();l.imageContainer.hide();l.titleContainer.hide();l.articlePop.getComponent("image").element.dom.style.backgroundImage="url('"+l.firstImage.url+"')";if(l.imageAspect){l.articlePop.getComponent("image").element.dom.style.backgroundSize="contain";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="center"}else{l.articlePop.getComponent("image").element.dom.style.backgroundSize="cover";l.articlePop.getComponent("image").element.dom.style.backgroundPosition="50% 0%"}l.add(l.articlePop);if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var a=localStorage.getItem("bodyFontSize"+publicationguid)}else{var a=16}$(".articleText").css("font-size",a+"px");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}$(".byline").css("font-size",d+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var m=localStorage.getItem("headlineFontSize"+publicationguid)}else{var m=32}$(".headline").css("font-size",m+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var g=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var g=20}$(".subheadline").css("font-size",g+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}$(".section").css("font-size",c+"px");l.articlePop.getComponent("title").element.dom.style.position="relative";l.articlePop.getComponent("title").element.down("div").dom.style.width="758px";if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){l.articlePop.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animatio"px"})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.articlePop.getScrollable().getScroller().on({s/r)}}})}}else{if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){l.titleContainer.setScrollable(false);l.desktopScroll=l.element.down(".x-scroll-view");if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="scroll";l.desktopScroll.dom.style.zIndex="14";if(Ext.browser.is.IE){if(l.desktopScroll.down(".x-scroll-container")!=null){$(l.element.dom).on("animatio"px"})}}l.stopPropFunction=function(r){r.stopPropagation()};l.element.dom.onmousewheel=l.stopPropFunction;l.element.dom.addEventListener("DOMMouseScroll",l.stopPropFunction)}}else{l.titleContainer.setScrollable(true);l.titleContainer.getScrollable().getScroller().setDirectionLock(true);var f=l.titleContainer.getScrollable().getScroller();f.container.dom.offsetParent.style.zIndex=14}l.sharingContainer=l.titleContainer.getComponent("title").getComponent("sharing");l.sharingContainer.show();l.setupSharing(false);l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="none";if(l.bylineHidden){console.log(l.bylineHidden);n.element.down(".bylineText").dom.style.visibility=""}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility=""}}l.element.dom.style.position="absolute";l.element.dom.style.zIndex=8;l.expand=true;l.element.dom.style.animation=l.expandAnim;l.element.dom.style.animationFillMode="forwards"}else{if(j.target.className.indexOf("x-scroll-view")==-1&&j.target.className.indexOf("fullStoryLink")==-1){if(l.hasImage){l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="20px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}l.articlePop.destroy();l.imageContainer.show();l.titleContainer.show();if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction)}}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTimeout(function(){l.element.dom.style.zIndex=4},300)}else{l.titleContainer.setPadding(10);if(l.sharingImage!=null){l.sharingImage.hide()}if(l.sharingContainer!=null){l.sharingContainer.hide()}if(l.titleContainer.getComponent("title")!=null){l.titleContainer.setScrollable(false);if(l.titleContainer.getComponent("title").innerHtmlElement.down("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").dom.style.fontSize="13px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").dom.style.fontSize="28px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").dom.style.fontSize="14px"}if(l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p")!=null){l.titleContainer.getComponent("title").innerHtmlElement.down("p").next("p").next("p").next("p").dom.style.fontSize="13px"}}var b=l.element.down(".headline");if(b!=null){$(b.dom).attr("class","headlineText")}var k=l.element.down(".subheadline");if(k!=null){$(k.dom).attr("class","subheadlineText")}var h=l.element.down(".byline");if(h!=null){$(h.dom).attr("class","bylineText")}var o=l.element.down(".section");if(o!=null){$(o.dom).attr("class","sectionText")}if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(l.desktopScroll!=null){l.desktopScroll.dom.style.overflowY="";l.element.dom.onmousewheel=null;l.element.dom.removeEventListener("DOMMouseScroll",l.stopPropFunction);if(Ext.browser.is.IE){l.desktopScroll.down(".x-scroll-container").dom.style.height=""}}}l.titleContainer.getComponent("title").element.down(".shortStory").dom.style.display="";if(l.bylineHidden){n.element.down(".bylineText").dom.style.visibility="hidden"}if(l.subheadlineHidden){n.element.down(".subheadlineText").dom.style.visibility="hidden"}if(l.titleContainer.getComponent("articleBody").isHidden()){l.titleContainer.getComponent("articleBody").show()}else{l.titleContainer.getComponent("articleBody").hide()}l.expand=false;l.element.dom.style.animation=l.shrinkAnim;setTiex=4},300)}}}}}},liurl)}},0,["smallviewtilemed"],["component","container","panel","smallviewtilemed"],{component:true,container:true,panel:true,smallviewtilemed:true},["widget.smallviewtilemed"],0,[InfinityMobile.view.desktop,"SmallViewTileMed"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.SmallViewTileWeather",Ext.Container,{config:{cls:"articlereaderitemweathertile",height:"100%",width:"100%",style:"float:left;z-index:3;background-color:#90A4B0;overflow:hidden;",items:[{itemId:"title",layout:"vbox",style:"position:absolute;top:0px;left:0px;z-index:10;",items:[{html:"<p class='.thirteen' style='color:white;font-family:Open Sans, sans-serif;font-size:13px;font-weight:bold;padding:20px 0px 0px 20px;'>WEATHER</p>"},{itemId:"location"},{html:"<p class='ten' style='color:white;font-family:Open Sans, sans-serif;font-size:10px;font-weight:normal;padding:5px 0px 0px 20px;'>Source: BBC Weather</p>"}]},{itemId:"toggle",layout:"hbox",padding:20,style:"position:absolute;top:0px;right:0px;z-index:10;",items:[{html:"<p style='color:white;font-size:13px;padding-right:5px;padding-top:0.2em;'>&deg;C</p>"},{cls:"toggle",itemId:"toggleField",xtype:"togglefield",style:"background:transparent;"},{html:"<p style='color:white;font-size:13px;padding-left:5px;padding-top:0.2em;'>&deg;F</p>"}]},{itemId:"weather",width:"100%",layout:"hbox"}]},initi}}})},rt()}}},0,["smallviewtileweather"],["component","container","smallviewtileweather"],{component:true,container:true,smallviewtileweather:true},["widget.smallviewtileweather"],0,[InfinityMobile.view.desktop,"SmallViewTileWeather"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.SmallViewTileWeatherContainer",Ext.Panel,{config:{style:"float:left;z-index:6;padding:5px;",layout:"vbox"},initile()},setWeathe)}})}},0,["smallviewtileweathercontainer"],["component","container","panel","smallviewtileweathercontainer"],{component:true,container:true,panel:true,smallviewtileweathercontainer:true},["widget.smallviewtileweathercontainer"],0,[InfinityMobile.view.desktop,"SmallViewTileWeatherContainer"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.SectionListOverlay",InfinityMobile.view.Overlay,{config:{width:700,height:"100%",style:"padding:0px;max-height:700px;",layout:"vbox",items:[{itemId:"toolBar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{itemId:"toolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"bodyContainer",padding:"20",layout:"vbox",flex:1,items:[{id:"itemsContainer",flex:1,defaults:{width:145,margin:"0 8 16 7"}}]}]},initialize:function(){var b=this;var a=b.getComponent("toolBar");b.toolBarClose=a.getComponent("toolBarClose");a.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});var c=b.getComponent("bodyContainer");b.itemsContainer=c.getComponent("itemsContainer");b.title=a.getComponent("title");b.title.setHtml(language.sectionList.sectionList);b.handleKeyDown();b.setCloseListener();if(navigator.maxTouchPoints){b.itemsContainer.setScrollable({direction:"vertical",directionLock:true})}else{b.itemsContainer.setStyle({overflowY:"scroll"})}if(settings.newsday!=null){a.element.dom.style.borderTopLeftRadius="";a.element.dom.style.borderTopRightRadius="";b.setStyle({borderRadius:"0px"});b.element.down("div").dom.style.borderRadius="0px"}b.fireEvent("initialized",b,b.itemsContainer)},handleKeyDown:function(){var a=this;a.keyDownFunction=window.onkeydown;window.onkeydown=null},setCloseListener:function(){var b=this;b.toolBarClose.element.on("tap",function(){window.onkeydown=b.keyDownFunction;b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.toolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},close:function(){var a=this;a.fireEvent("close",a)},hide:function(){var a=this;window.onkeydown=a.keyDownFunction;a.fireEvent("enableArticlesContainer",a);InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments)}},0,["sectionlistoverlay"],["component","container","panel","overlay","sectionlistoverlay"],{component:true,container:true,panel:true,overlay:true,sectionlistoverlay:true},["widget.sectionlistoverlay"],0,[InfinityMobile.view.desktop,"SectionListOverlay"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.SectionListOverlayItem",Ext.Container,{config:{height:40,style:"float:left;border:1px solid grey; overflow:hidden",cls:"sectionlistitem",height:175,items:[{itemId:"itemLabel",cls:"thumbInfo",bottom:0,width:"100%",padding:"5 0 0 0",style:"background-color:rgba(0,0,0,0.7); color:white; text-align:center; border-radius:5px"}]},initit()}},seext)},setImage:function(){var b=this;var a="";if(typeof latestLM!="undefined"){a="&lm="+latestLM}var c="https://edition.pagesuite-professional.co.uk//get_image.aspx?w=280&eid="+editionguid+"&pnum="+b.sectionListPageNumber+a;b.setHtml("<img style='width:100%' src='"+c+"' />")},setClickr)})}},0,["sectionlistoverlayitem"],["component","container","sectionlistoverlayitem"],{component:true,container:true,sectionlistoverlayitem:true},["widget.sectionlistoverlayitem"],0,[InfinityMobile.view.desktop,"SectionListOverlayItem"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ZonesOverlay",InfinityMobile.view.Overlay,{config:{style:"padding:0px;",zindex:3,layout:"vbox",items:[{itemId:"toolBar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em;",items:[{itemId:"title",top:10,left:10},{itemId:"toolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"bodyContainer",padding:25,items:[{id:"itemsContainer",style:"text-align:center;overflow-y:auto;max-height:75vh;max-width:700px; min-height:200px;",defaults:{width:150,height:175,margin:"0 8 16 7",style:"float:left;"}}]}]},initialize:function(){var b=this;var a=b.getComponent("toolBar");b.toolBarClose=a.getComponent("toolBarClose");a.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});b.bodyContainer=b.getComponent("bodyContainer");b.itemsContainer=b.bodyContainer.getComponent("itemsContainer");b.title=a.getComponent("title");if(b.isUpper(language.menu.zones)){b.title.setHtml(language.menu.zones[0].toUpperCase()+language.menu.zones.substring(1,language.menu.zones.length).toLowerCase())}else{b.title.setHtml(language.menu.zones)}b.handleKeyDown();b.setCloseListener();b.fireEvent("initialized",b,b.itemsContainer);if(settings.newsday!=null){toolbar.element.dom.style.borderTopLeftRadius="";toolbar.element.dom.style.borderTopRightRadius="";b.setStyle({borderRadius:"0px"});b.element.down("div").dom.style.borderRadius="0px"}if(navigator.maxTouchPoints){b.itemsContainer.element.dom.style.webkitOverlowScrolling="touch"}},isUpper:function(d){var b=this;var c=true;for(var a=0;a<d.length;a++){if(d[a]==d[a].toLowerCase()){c=false}}return c},setWidthOfContainer:function(){var c=this;var f=40;var e=145+f;var a=0;var b=c.itemsContainer.getItems().items;var d=b.length/4;if(d>1){a=e*4}else{a=e*b.length}c.setWidth(a);c.element.dom.style.visibility="visible"},handleKeyDown:function(){var a=this;a.keyDownFunction=window.onkeydown;window.onkeydown=null},setCloseListener:function(){var b=this;b.toolBarClose.element.on("tap",function(){window.onkeydown=b.keyDownFunction;b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.toolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},close:function(){var a=this;a.fireEvent("close",a)},hide:function(){var a=this;window.onkeydown=a.keyDownFunction;InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments)}},0,["zonesoverlay"],["component","container","panel","overlay","zonesoverlay"],{component:true,container:true,panel:true,overlay:true,zonesoverlay:true},["widget.zonesoverlay"],0,[InfinityMobile.view.desktop,"ZonesOverlay"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ZonesOverlayItem",Ext.Container,{config:{style:"float:left;border:1px solid grey; overflow:hidden",cls:"sectionlistitem",items:[{itemId:"itemLabel",cls:"thumbInfo",bottom:0,width:"100%",padding:"5 0 0 0",style:"background-color:rgba(0,0,0,0.7); color:white; text-align:center; border-radius:5px"}]},initit()}},seame)},setImage:function(){var a=this;var c="";if(a.zoneItem.editionGuid!=null&&a.zoneItem.editionGuid!=""){c="&eid="+a.zoneItem.editionGuid}else{c="&pbid="+a.zoneItem.guid}var b="https://edition.pagesuite-professional.co.uk//get_image.aspx?w=280&"+c;a.setHtml("<img style='width:100%' src='"+b+"' />")},setClickd)})}},0,["zonesoverlayitem"],["component","container","zonesoverlayitem"],{component:true,container:true,zonesoverlayitem:true},["widget.zonesoverlayitem"],0,[InfinityMobile.view.desktop,"ZonesOverlayItem"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderArchive",InfinityMobile.view.Overlay,{config:{id:"archivecontainer",width:700,height:"100%",style:"padding:0px;max-height:700px;",items:[{id:"archiveToolBar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{id:"archiveToolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"archiveBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"archiveContainerText",margin:"0 0 20px 0"},{itemId:"archiveMonthContainerHorizontal",layout:"hbox",items:[{html:"<img src='https://media.pagesuite.com/psapps/images/default/LeftArrow_Icon.png' style='width:20px' />"},{itemId:"archiveMonthsContainer",height:30,flex:1,layout:"hbox",margin:"0 15px 0 15px",padding:"0 0 10px 0",monthdirection:"horizontal",scrollable:{direction:"horizontal",directionLock:true},defaults:{width:100,height:20,margin:"0 20px 0 0",padding:0,style:"font-weight:bold",type:"shortDate"},items:[]},{html:"<img src='https://media.pagesuite.com/psapps/images/default/RightArrow_Icon.png' style='width:20px' />"}]},{layout:"hbox",itemId:"archiveItemsGlobalContainer",items:[{itemId:"archiveMonthsContainer",width:180,height:"100%",monthdirection:"vertical",style:"overflow-y:scroll"},{id:"archiveItemsContainer",flex:1,defaults:{width:145,margin:"0 8 16 7",cls:"archiveitemphone pointerCursor"}}]}]}]},initialize:function(){var g=this;var c=g.getComponent("archiveToolBar");g.archiveToolBarClose=c.getComponent("archiveToolBarClose");c.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});g.title=c.getComponent("title");g.title.setHtml(language.archive.archive);var j=g.getComponent("archiveBodyContainer");g.archiveContainerText=j.getComponent("archiveContainerText");g.archiveContainerText.setHtml(language.archive.archiveContainerText);var d=j.getComponent("archiveItemsGlobalContainer");g.archiveItemsContainer=d.getComponent("archiveItemsContainer");var h=j.getComponent("archiveMonthContainerHorizontal");var f=h.getComponent("archiveMonthsContainer");var e=d.getComponent("archiveMonthsContainer");var a=e;if(settings.menu.archiveUsesTabs!=null){if(settings.menu.archiveMonthDirection.toLowerCase()!=null&&settings.menu.archiveMonthDirection.toLowerCase()=="horizontal"){a=f}if(settings.menu.archiveMonthDirection!=null){if(settings.menu.archiveMonthDirection=="Vertical"){g.archiveItemsContainer.setDefaults({width:135,margin:"0 8 16 7",cls:"archiveitemphone pointerCursor"})}}}if(a==f){e.hide()}else{h.hide()}g.archiveMonthsContainer=a;if(settings.tracking!=null){var b=settings.tracking.trackingType;if(b=="DA"){trackDaPageView("Archive","Digital Edition")}}g.handleKeyDown();g.setCloseListener();g.fireEvent("initialized",g);g.archiveItemsContainer.element.down(".x-inner").dom.style.width="100%";g.archiveItemsContainer.element.down(".x-inner").dom.style.display="inline";g.archiveItemsContainer.element.dom.style.overflowY="scroll";g.resizeFunc=function(){if($(g.element.dom).height>=700){d.element.dom.style.height="560px";g.archiveItemsContainer.element.dom.style.height="560px"}else{if(settings.menu.archiveUsesTabs!=null){if(settings.menu.archiveMonthDirection!=null){if(settings.menu.archiveMonthDirection=="Vertical"){d.element.dom.style.height=($(g.element.dom).height()-$(g.archiveContainerText.element.dom).height()-$(h.element.dom).height()-80)+"px";g.archiveItemsContainer.element.dom.style.height=($(g.element.dom).height()-$(g.archiveContainerText.element.dom).height()-$(h.element.dom).height()-80)+"px"}else{d.element.dom.style.height=($(g.element.dom).height()-$(g.archiveContainerText.element.dom).height()-80)+"px";g.archiveItemsContainer.element.dom.style.height=($(g.element.dom).height()-$(g.archiveContainerText.element.dom).height()-80)+"px"}}else{d.element.dom.style.height=($(g.element.dom).height()-$(g.archiveContainerText.element.dom).height()-80)+"px";g.archiveItemsContainer.element.dom.style.height=($(g.element.dom).height()-$(g.archiveContainerText.element.dom).height()-80)+"px"}}else{d.element.dom.style.height=($(g.element.dom).height()-$(g.archiveContainerText.element.dom).height()-80)+"px";g.archiveItemsContainer.element.dom.style.height=($(g.element.dom).height()-$(g.archiveContainerText.element.dom).height()-80)+"px"}}};g.on({painted:g.resizeFunc});Ext.Viewport.on({resize:g.resizeFunc});if(settings.newsday!=null){c.element.dom.style.borderTopLeftRadius="";c.element.dom.style.borderTopRightRadius="";g.setStyle({borderRadius:"0px"});g.element.down("div").dom.style.borderRadius="0px"}},handleKeyDown:function(){var a=this;a.keyDownFunction=window.onkeydown;window.onkeydown=null},setCloseListener:function(){var b=this;b.archiveToolBarClose.element.on("tap",function(){window.onkeydown=b.keyDownFunction;b.close()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.archiveToolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},close:function(){var a=this;a.fireEvent("close",a)},hideMonthContainer:function(){var a=this;console.log("HIDING MONTH CONTAINER");a.archiveMonthsContainer.hide()},hide:function(){var a=this;window.onkeydown=a.keyDownFunction;a.fireEvent("enableArticlesContainer");InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments)}},0,["readerarchive"],["component","container","panel","overlay","readerarchive"],{component:true,container:true,panel:true,overlay:true,readerarchive:true},["widget.readerarchive"],0,[InfinityMobile.view.desktop,"ReaderArchive"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderDownload",InfinityMobile.view.Overlay,{config:{width:700,height:"100%",style:"padding:0px;max-height:700px;",zindex:3,layout:"vbox",searchTerm:"",items:[{itemId:"downloadToolBar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{itemId:"downloadToolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"downloadBody",flex:1,padding:25,layout:"vbox",items:[{itemId:"bodyText"},{itemId:"downloadButtonsContainer",layout:{type:"hbox",pack:"center",align:"middle"},height:100,defaults:{height:40,layout:{type:"hbox",align:"middle",pack:"center"}},items:[{itemId:"downloadSelectAll",cls:"pointerCursor btn",width:150,items:[{itemId:"btnText"}]},{width:25},{itemId:"downloadSelectNone",cls:"pointerCursor btn",width:150,items:[{itemId:"btnText"}]},{width:25},{itemId:"download",cls:"pointerCursor btn",width:150,items:[{itemId:"btnText"}]}]},{itemId:"downloadItems",flex:1,defaults:{width:145,margin:"0 6 10 6"}}]}]},initialize:function(){var c=this;var e=c.getComponent("downloadToolBar");c.downloadToolBarClose=e.getComponent("downloadToolBarClose");e.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});var b=c.getComponent("downloadBody");var a=b.getComponent("downloadButtonsContainer");c.downloadSelectAll=a.getComponent("downloadSelectAll");c.downloadSelectNone=a.getComponent("downloadSelectNone");c.download=a.getComponent("download");c.title=e.getComponent("title");c.title.setHtml(language.download.download);c.bodyContent=b.getComponent("bodyText");c.bodyContent.setHtml(language.download.downloadContainerText);c.downloadSelectAll.getComponent("btnText").setHtml(language.download.downloadSelectAll);c.downloadSelectNone.getComponent("btnText").setHtml(language.download.downloadSelectNone);c.download.getComponent("btnText").setHtml(language.download.download);c.downloadSelectAll.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});c.downloadSelectNone.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});c.download.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});c.handleKeyDown();c.setCloseListener();c.setDownloadAllListener();c.setDownloadNoneListener();c.setDownloadListener();if(settings.tracking!=null){var d=settings.tracking.trackingType;if(d=="DA"){trackDaPageView("Downloads","Digital Edition")}}c.downloadItemsContainer=b.getComponent("downloadItems");c.loadPages();c.downloadItemsContainer.element.down(".x-inner").dom.style.width="100%";c.downloadItemsContainer.element.down(".x-inner").dom.style.display="inline";c.downloadItemsContainer.element.dom.style.overflowY="scroll";c.downloadItemsContainer.element.dom.style.overflowX="hidden";if(settings.newsday!=null){e.element.dom.style.borderTopLeftRadius="";e.element.dom.style.borderTopRightRadius="";c.setStyle({borderRadius:"0px"});c.element.down("div").dom.style.borderRadius="0px"}},handleKeyDown:function(){var a=this;a.keyDownFunction=window.onkeydown;window.onkeydown=null},setCloseListener:function(){var b=this;b.downloadToolBarClose.element.on("tap",function(){window.onkeydown=b.keyDownFunction;b.fireEvent("close",b)});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.downloadToolBarClose.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}},setDownloadAllListener:function(){var a=this;a.downloadSelectAll.element.on("tap",function(){a.fireEvent("selectAll",a)})},setDownloadNoneListener:function(){var a=this;a.downloadSelectNone.element.on("tap",function(){a.fireEvent("selectNone",a)})},setDownloadListener:function(){var a=this;a.download.element.on("tap",function(){a.fireEvent("download",a)})},loadPages:function(){var a=this;a.fireEvent("loadPages",a,a.downloadItemsContainer)},hide:function(){var a=this;window.onkeydown=a.keyDownFunction;a.fireEvent("enableArticlesContainer");InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments)}},0,["download"],["component","container","panel","overlay","download"],{component:true,container:true,panel:true,overlay:true,download:true},["widget.download"],0,[InfinityMobile.view.desktop,"ReaderDownload"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderBookmark",InfinityMobile.view.Overlay,{config:{itemId:"bookmarkcontainer",width:700,height:"100%",style:"padding:0px;max-height:700px;",layout:"vbox",items:[{itemId:"bookmarkToolBar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{itemId:"bookmarkToolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"bookmarkBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"bookmarkHelperText"},{itemId:"bookmarkAddContainer",layout:{type:"hbox",align:"stretch",pack:"middle"},height:35,margin:"10px 0",items:[{flex:1,itemId:"textInput",html:"<input class='bookmarkName' type='text' placeholder='' style='width:100%; height:35px; padding-left:10px' />"},{width:20},{itemId:"bookmarkAddButton",cls:"pointerCursor btn",width:150,layout:{type:"hbox",align:"middle",pack:"center"},items:[{itemId:"btnText"}]}]},{itemId:"bookmarksContainer",flex:1,defaults:{width:194,margin:10}}]}]},initialize:function(){var c=this;var b=c.getComponent("bookmarkToolBar");b.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});c.handleKeyDown();c.closeButton=b.getComponent("bookmarkToolBarClose");c.setCloseButtonListener();var d=c.getComponent("bookmarkBodyContainer");c.helperTextContainer=d.getComponent("bookmarkHelperText");var a=d.getComponent("bookmarkAddContainer");c.addBookmarkTextBox=a.element.down(".bookmarkName").dom;c.addBookmarkButton=a.getComponent("bookmarkAddButton");if(c.addBookmarkTextBox!=null){c.addBookmarkTextBox.addEventListener("touchs,e)}})}c.title=b.getComponent("title");c.title.setHtml(language.bookmarks.bookmarks);c.helperTextContainer.setHtml(language.bookmarks.bookmarksContainerText);c.inputPanel=a.getComponent("textInput");c.input=c.inputPanel.element.down(".bookmarkName").dom;$(c.input).attr("placeholder",language.bookmarks.name);c.addBookmarkButton.getComponent("btnText").setHtml(language.bookmarks.add);c.setAddButtonListener();c.bookmarksContainer=d.getComponent("bookmarksContainer");a.element.down(".bookmarkName").on("tap",function(){if(this.focus!=null){this.focus()}});c.addBookmarkButton.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});c.fireEvent("loadBookmarks",c);c.bookmarksContainer.element.down(".x-inner").dom.style.width="100%";c.bookmarksContainer.element.down(".x-inner").dom.style.display="inline";c.bookmarksContainer.element.dom.style.overflowY="scroll";if(settings.newsday!=null){b.element.dom.style.borderTopLeftRadius="";b.element.dom.style.borderTopRightRadius="";c.setStyle({borderRadius:"0px"});c.element.down("div").dom.style.borderRadius="0px"}},handleKeyDown:function(){var a=this;a.keyDownFunction=window.onkeydown;window.onkeydown=null},setCloseButtonLis"}}}},setAddButtonListener:function(){var a=this;console.log(a.addBookmarkButton);a.addBookmarkButton.element.on("tap",function(){a.fireEvent("addBookmark",a)})},close:function(){var a=this;a.fireEvent("close",a)},hide:function(){var a=this;window.onkeydown=a.keyDownFunction;a.fireEvent("enableArticlesContainer");InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments)}},0,["readerbookmark"],["component","container","panel","overlay","readerbookmark"],{component:true,container:true,panel:true,overlay:true,readerbookmark:true},["widget.readerbookmark"],0,[InfinityMobile.view.desktop,"ReaderBookmark"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.PrintMenu",InfinityMobile.view.Overlay,{config:{width:700,height:"100%",style:"padding:0px;max-height:700px;",layout:"vbox",items:[{itemId:"toolbar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{itemId:"toolbarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"body",flex:1,padding:25,layout:"vbox",items:[{itemId:"desc"},{itemId:"buttonsContainer",layout:{type:"hbox",pack:"center",align:"middle"},height:100,defaults:{height:40,layout:{type:"hbox",align:"middle",pack:"center"}},items:[{itemId:"selectAll",cls:"pointerCursor btn",width:150,items:[{itemId:"btnText"}]},{width:25},{itemId:"selectNone",cls:"pointerCursor btn",width:150,items:[{itemId:"btnText"}]},{width:25},{itemId:"print",cls:"pointerCursor btn",width:150,items:[{itemId:"btnText"}]}]},{itemId:"printItems",flex:1,defaults:{width:145,margin:"0 6 10 6"}}]}]},initialize:function(){var d=this;var c=d.getComponent("toolbar");d.toolbarClose=c.getComponent("toolbarClose");c.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});var a=d.getComponent("body");var b=a.getComponent("buttonsContainer");d.selectAll=b.getComponent("selectAll");d.selectNone=b.getComponent("selectNone");d.print=b.getComponent("print");d.handleKeyDown();d.setCloseListener();d.setSelectAllListener();d.setSelectNoneListener();d.setPrintListener();d.title=c.getComponent("title");d.title.setHtml(language.print.print);d.desc=a.getComponent("desc");d.desc.setHtml(language.print.printContainerText);d.selectAll.getComponent("btnText").setHtml(language.print.selectAll);d.selectNone.getComponent("btnText").setHtml(language.print.printSelectNone);d.print.getComponent("btnText").setHtml(language.print.print);d.printItemsContainer=a.getComponent("printItems");d.loadPages();d.printItemsContainer.element.down(".x-inner").dom.style.width="100%";d.printItemsContainer.element.down(".x-inner").dom.style.display="inline";d.printItemsContainer.element.dom.style.overflowY="scroll";d.printItemsContainer.element.dom.style.overflowX="hidden";if(settings.newsday!=null){c.element.dom.style.borderTopLeftRadius="";c.element.dom.style.borderTopRightRadius="";d.setStyle({borderRadius:"0px"});d.element.down("div").dom.style.borderRadius="0px"}},handleKeyDown:function(){var a=this;a.keyDownFunction=window.onkeydown;window.onkeydown=null},setCloseLis"}}}},setSelectAllListener:function(){var a=this;a.selectAll.element.on("tap",function(){a.fireEvent("selectAll",a)});a.selectAll.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"})},setSelectNoneListener:function(){var a=this;a.selectNone.element.on("tap",function(){a.fireEvent("selectNone",a)});a.selectNone.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"})},setPrintLis)"})},loadner)}nts)}},0,["printmenu"],["component","container","panel","overlay","printmenu"],{component:true,container:true,panel:true,overlay:true,printmenu:true},["widget.printmenu"],0,[InfinityMobile.view.desktop,"PrintMenu"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ClippingOptionsMenu",Ext.Container,{config:{modal:true,hideOnMaskTap:true,centered:true,width:700,height:"100%",style:"background-color:white;border:1px solid black;border-radius:5px;padding:0px;max-height:650px;",fullscreen:true,zIndex:999998,items:[{id:"clippingOptionsToolBar",height:40,items:[{itemId:"title",top:10,left:10},{id:"clippingOptionsToolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"clippingOptionsBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"clippingOptionsContainerText",margin:"0 0 20px 0"},{itemId:"clippingsContainer",style:"border: 1px solid #e6e6e6;max-height:400px;",defaults:{width:198,height:150,margin:"7 8 16 7",cls:"archiveitemphone pointerCursor"}},{itemId:"buttonsContainer",layout:"hbox",height:60,items:[{itemId:"previewBtn",flex:1,cls:"pointerCursor btn",margin:"15 5 5 0",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/preview-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Preview",margin:5,style:"font-size:11pt;text-align:center;"}]},{itemId:"downloadBtn",flex:1,cls:"pointerCursor btn",margin:"15 5 5 5",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/downloads-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Save",margin:5,style:"font-size:11pt;text-align:center;"}]},{itemId:"printBtn",flex:1,cls:"pointerCursor btn",margin:"15 5 5 5",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/print-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Print",margin:5,style:"font-size:11pt;text-align:center;"}]},{itemId:"shareBtn",flex:2,cls:"pointerCursor btn",margin:"15 0 5 5",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/share-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Share",margin:5,style:"font-size:11pt;"}]}]}]}]},initialize:function(){var b=this;b.clippingsToolbar=b.getComponent("clippingOptionsToolBar");b.clippingsToolbar.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});b.closeBtn=b.clippingsToolbar.getComponent("clippingOptionsToolBarClose");b.clippingsBody=b.getComponent("clippingOptionsBodyContainer");b.clippingsContainer=b.clippingsBody.getComponent("clippingsContainer");b.buttonsContainer=b.clippingsBody.getComponent("buttonsContainer");b.previewBtn=b.buttonsContainer.getComponent("previewBtn");b.downloadBtn=b.buttonsContainer.getComponent("downloadBtn");b.printBtn=b.buttonsContainer.getComponent("printBtn");b.shareBtn=b.buttonsContainer.getComponent("shareBtn");b.title=b.clippingsToolbar.getComponent("title");b.title.setHtml(language.clippings.clippingsOptions);b.clippingOptionsContainerText=b.clippingsBody.getComponent("clippingOptionsContainerText");b.clippingOptionsContainerText.setHtml("<p style='font-size:16px;'>"+language.clippings.ClippingsOptionsText+"</p><br /><p style='font-size:12px;color:#444444'>"+language.clippings.clippingsPleaseNote+"</p>");b.previewBtn.getComponent("Preview").setHtml(language.clippings.preview);b.downloadBtn.getComponent("Save").setHtml(language.clippings.save);b.printBtn.getComponent("Print").setHtml(language.clippings.print);b.shareBtn.getComponent("Share").setHtml(language.clippings.share);b.previewBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.downloadBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.printBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.shareBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.closeBtn.element.on("tap",function(){b.fireEvent("close",b)});if(b.config.images!=null){b.images=b.config.images}if(b.config.shareImages!=null){b.shareImages=b.config.shareImages}if(b.config.widths!=null){b.widths=b.config.widths}if(b.config.heights!=null){b.heights=b.config.heights}b.addThumbnails();b.previewBtn.element.on({tap:b.preview,scope:b});b.downloadBtn.element.on({tap:b.download,scope:b});b.printBtn.element.on({tap:b.print,scope:b});b.shareBtn.element.on({tap:b.shareTap,scope:b});if(!Ext.os.is.Desktop){b.printBtn.hide()}b.clippingsContainer.element.down(".x-inner").dom.style.width="100%";b.clippingsContainer.element.down(".x-inner").dom.style.display="inline";b.clippingsContainer.element.dom.style.overflowY="scroll";b.resizeFunc=function(){if($(b.element.dom).height>=650){b.clippingsContainer.element.dom.style.height="400px"}else{b.clippingsContainer.element.dom.style.height=($(b.element.dom).height()-80-$(b.clippingOptionsContainerText.element.dom).height()-$(b.buttonsContainer.element.dom).height())+"px"}};b.on({painted:b.resizeFunc});Ext.Viewport.on({resize:b.resizeFunc});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.closeBtn.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}b.element.dom.style.borderRadius=""}},setupImageUrls:function(){var b=this;for(var a in b.images){if(b.images[a].indexOf("clippings.pagesuite.com")==-1){b.images[a]="http://clippings.pagesuite.com/clipping.aspx?b64url="+btoa(b.images[a])}}},preview:function(){var d=this;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){c=true;break}}if(c){var a=Ext.create("InfinityMobile.view.ClippingMenuPreview",{images:d.images,clippingMenu:d})}else{d.promptUser(language.clippings.selectClippings)}},download:function(){var h=this;var k=false;if(Ext.os.is.Desktop&&!Ext.browser.is.Safari){for(var e=0;e<h.images.length;e++){if(h.clippingsContainer.innerItems[e].clicked){if(Ext.browser.is.IE){try{var d=document.createElement("canvas");var l=d.getContext("2d");var f=new Image();f.src="../get_clipping_download.aspx?b64Url="+encodeURIComponent(btoa(h.images[e]));f.opg")}}catch(g){console.log(g)}k=true}else{var j=document.createElement("a");j.target="_blank";var b=h.images[e];if(Ext.browser.is.Firefox){b="../get_clipping_download.aspx?b64Url="+encodeURIComponent(btoa(h.images[e]))}else{if(Ext.browser.is.Safari){b="../get_clipping_download.aspx?b64Url="+encodeURIComponent(btoa(h.images[e]))+"&attachmentHeader=true"}}j.href=b;j.download="clipping"+e+".jpg";var a=document.createEvent("MouseEvents");a.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null);j.dispatchEvent(a);k=true}}}}else{var a=document.createEvent("MouseEvents");var j=null;var c=false;for(var e=0;e<h.images.length;e++){if(h.clippingsContainer.innerItems[e].clicked){if(!k){j=document.createElement("a");j.target="_blank";var b=h.images[e];if(Ext.browser.is.Safari&&currentProfile=="desktop"){b="../get_clipping_download.aspx?b64Url="+encodeURIComponent(btoa(h.images[e]))+"&attachmentHeader=true"}j.href=b;j.download="clipping"+e+".jpg";a.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null);k=true}else{c=true;break}}}if(c){h.promptUser(language.clippings.selectOneClipping)}else{if(j!=null){j.dispatchEvent(a)}}}if(!k){h.promptUser(language.clippings.selectClippings)}},print:function(){var h=this;if(Ext.os.is.Desktop){var e=false;var g=[];for(var f=0;f<h.images.length;f++){var j=h.images[f];if(h.clippingsContainer.innerItems[f].clicked){if(!e){e=true}g[g.length]=j}}if(e){var d="print.aspx?edid="+editionguid+"&type=clipping&clippingurls=";var b="";for(var k in g){b+=encodeURIComponent(g[k])+","}if(b[b.length]==","){b=b.substring(0,b.length-1)}d+=b;window.open(d)}else{h.promptUser(language.clippings.selectClippings)}}else{var e=false;var c="";for(var f=0;f<h.images.length;f++){var j=h.images[f];if(h.clippingsContainer.innerItems[f].clicked){if(!e){e=true}c+="<div style='width:100%; height:100%; position:relative'>";c+="<img src='"+j+"' style='height:auto;width:auto;max-height:100%;max-width:100%;' />";c+="</div>"}}if(e){var a=Ext.create("InfinityMobile.view.PrintPreview",{doc:c,imgCheck:true});Ext.Viewport.add(a);a.show()}else{h.promptUser(language.clippings.selectClippings)}}},shareTap:function(){var d=this;d.shareBtn.removeAll();d.shareBtn.element.dom.style.backgroundColor="#e6e6e6";$(d.shareBtn.element.dom).removeClass("pointerCursor");var b=[{itemId:"email",width:30,height:30,cls:"pointerCursor",style:'background-image:url("resources/images/reader icons/mail.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"facebook",width:30,height:30,cls:"pointerCursor",style:'background-image:url("resources/images/reader icons/facebook.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"twitter",width:30,height:30,cls:"pointerCursor",style:'background-image:url("resources/images/reader icons/twitter.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"linkedin",width:30,height:30,cls:"pointerCursor",style:'background-image:url("resources/images/reader icons/linkedin.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"google",width:30,height:30,cls:"pointerCursor",style:'background-image:url("resources/images/reader icons/Google.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"pinterest",width:30,height:30,cls:"pointerCursor",style:'background-image:url("resources/images/reader icons/pinterest.png");background-size:contain;background-position:center;background-repeat:no-repeat;'}];d.shareBtn.add(b);var a=Ext.getStore("SettingStore");d.emailBtn=d.shareBtn.getComponent("email");d.facebookBtn=d.shareBtn.getComponent("facebook");d.twitterBtn=d.shareBtn.getComponent("twitter");d.linkedinBtn=d.shareBtn.getComponent("linkedin");d.googleBtn=d.shareBtn.getComponent("google");d.pinterestBtn=d.shareBtn.getComponent("pinterest");var c=a.data.items[0].raw.sharing;if(c.allSharing[0]==null){d.emailBtn.hide()}else{d.emailBtn.element.on({tap:d.emailShare,scope:d})}if(c.allSharing[1]==null){d.facebookBtn.hide()}else{d.facebookBtn.element.on({tap:d.facebookShare,scope:d})}if(c.allSharing[2]==null){d.twitterBtn.hide()}else{d.twitterBtn.element.on({tap:d.twitterShare,scope:d})}if(c.allSharing[3]==null){d.linkedinBtn.hide()}else{d.linkedinBtn.element.on({tap:d.linkedinShare,scope:d})}if(c.allSharing[4]==null){d.googleBtn.hide()}else{d.googleBtn.element.on({tap:d.googleShare,scope:d})}if(c.allSharing[5]==null){d.pinterestBtn.hide()}else{d.pinterestBtn.element.on({tap:d.pinterestShare,scope:d})}},addThumbnails:function(){var b=this;for(var a=0;a<b.images.length;a++){var c=Ext.create("InfinityMobile.view.ClippingItems",{image:b.images[a],imgWidth:b.widths[a],imgHeight:b.heights[a],clicked:false});b.clippingsContainer.add(c);c.show()}},promptUser:function(b){var a=this;prompt=Ext.create("InfinityMobile.view.ClippingMenuPrompt",{message:b})},emailShare:function(){var d=this;var e=false;var a="mailto:?subject="+encodeURIComponent("Clippings from "+publicationName)+"&body=";var c="To view a clipping, please select one of the links below:\n";for(var b=0;b<d.shareImages.length;b++){if(d.clippingsContainer.innerItems[b].clicked){c+=d.shareImages[b]+" \n";e=true}}if(e){window.location.href=a+encodeURIComponent(c)}else{d.promptUser(language.clippings.selectClippings)}},facebookShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.shareImages.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=encodeURIComponent(d.shareImages[b]);c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://www.facebook.com/sharer/sharer.php?m2w&u="+a+"&title=Clipping from "+publicationName)}else{d.promptUser(e)}},twitterShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.shareImages.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.shareImages[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://twitter.com/intent/tweet?text=Clipping from "+publicationName+" - "+a)}else{d.promptUser(e)}},linkedinShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.shareImages.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.shareImages[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://www.linkedin.com/shareArticle?mini=true&url="+a+"&title=Clipping from "+publicationName)}else{d.promptUser(e)}},googleShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.shareImages.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.shareImages[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("https://plus.google.com/share?url="+a)}else{d.promptUser(e)}},pinterestShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.shareImages.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.shareImages[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://pinterest.com/pin/create/bookmarklet/?media="+a+"&is_video=false&description=Clipping from "+publicationName)}else{d.promptUser(e)}},hide:function(){var a=this;a.fireEvent("enableArticlesContainer");a.fireEvent("close",a);Ext.Container.prototype.hide.apply(this,arguments)}},0,["clippingoptionsmenu"],["component","container","clippingoptionsmenu"],{component:true,container:true,clippingoptionsmenu:true},["widget.clippingoptionsmenu"],0,[InfinityMobile.view.desktop,"ClippingOptionsMenu"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderFullscreenGalleryIcon",Ext.Container,{config:{cls:"articleViewBtn",style:"float:left"},initialize:function(){var a=this;if(a.config.images!=null){a.images=a.config.images}if(a.config.article!=null){a.article=a.config.article}a.setHtml("<img src='resources/images/reader icons/expand-gallery-icon.png' style='width:100%; height:auto;' />");a.element.on({tap:function(d){d.stopPropagation();var b=[];for(image in a.images){b.push({url:a.images[image].url})}if(Ext.os.is.Desktop){var f="InfinityMobile.view.desktop.ImageGallery"}else{var f="InfinityMobile.view.tablet.ImageGallery"}var c=Ext.create(f,{images:b,article:a.article});Ext.Viewport.add(c)},scope:a})}},0,["fullscreengalleryicon"],["component","container","fullscreengalleryicon"],{component:true,container:true,fullscreengalleryicon:true},["widget.fullscreengalleryicon"],0,[InfinityMobile.view.desktop,"ArticleReaderFullscreenGalleryIcon"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderTextSizeIcon",Ext.Container,{config:{cls:"articleViewBtn",style:"float:left"},initi:a})},increaseSize:function(){var f=this;if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var b=localStorage.getItem("bodyFontSize"+publicationguid)}else{var b=16}b=parseInt(b)+2;if(b<=66){localStorage.setItem("bodyFontSize"+publicationguid,b);$(".articleText").css("font-size",b+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var a=localStorage.getItem("headlineFontSize"+publicationguid)}else{var a=32}a=parseInt(a)+2;localStorage.setItem("headlineFontSize"+publicationguid,a);$(".headline").css("font-size",a+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var e=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var e=20}e=parseInt(e)+2;localStorage.setItem("subheadlineFontSize"+publicationguid,e);$(".subheadline").css("font-size",e+"px");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}d=parseInt(d)+2;localStorage.setItem("bylineFontSize"+publicationguid,d);$(".byline").css("font-size",d+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}c=parseInt(c)+2;localStorage.setItem("sectionFontSize"+publicationguid,c);$(".section").css("font-size",c+"px");if(Ext.browser.is.IE){if(f.tile.hasImage){if(f.tile.articlePop.items.items[0]!=null&&f.tile.articlePop.items.items[1]!=null){f.tile.desktopScroll.down(".x-scroll-container").dom.style.height=(f.tile.articlePop.items.items[0].element.dom.clientHeight+f.tile.articlePop.items.items[1].element.dom.clientHeight+40)+"px"}}else{f.tile.desktopScroll.down(".x-scroll-container").dom.style.height=(f.tile.titleContainer.items.items[0].element.dom.clientHeight+f.tile.titleContainer.items.items[1].element.dom.clientHeight+40)+"px"}}}},decreaseSize:function(){var f=this;if(localStorage.getItem("bodyFontSize"+publicationguid)!=null){var b=localStorage.getItem("bodyFontSize"+publicationguid)}else{var b=16}b=parseInt(b)-2;if(b>=8){localStorage.setItem("bodyFontSize"+publicationguid,b);$(".articleText").css("font-size",b+"px");if(localStorage.getItem("headlineFontSize"+publicationguid)!=null){var a=localStorage.getItem("headlineFontSize"+publicationguid)}else{var a=32}a=parseInt(a)-2;localStorage.setItem("headlineFontSize"+publicationguid,a);$(".headline").css("font-size",a+"px");if(localStorage.getItem("subheadlineFontSize"+publicationguid)!=null){var e=localStorage.getItem("subheadlineFontSize"+publicationguid)}else{var e=20}e=parseInt(e)-2;localStorage.setItem("subheadlineFontSize"+publicationguid,e);$(".subheadline").css("font-size",e+"px");if(localStorage.getItem("bylineFontSize"+publicationguid)!=null){var d=localStorage.getItem("bylineFontSize"+publicationguid)}else{var d=18}d=parseInt(d)-2;localStorage.setItem("bylineFontSize"+publicationguid,d);$(".byline").css("font-size",d+"px");if(localStorage.getItem("sectionFontSize"+publicationguid)!=null){var c=localStorage.getItem("sectionFontSize"+publicationguid)}else{var c=18}c=parseInt(c)-2;localStorage.setItem("sectionFontSize"+publicationguid,c);$(".section").css("font-size",c+"px");if(Ext.browser.is.IE){if(f.tile.hasImage){if(f.tile.articlePop.items.items[0]!=null&&f.tile.articlePop.items.items[1]!=null){f.tile.desktopScroll.down(".x-scroll-container").dom.style.height=(f.tile.articlePop.items.items[0].element.dom.clientHeight+f.tile.articlePop.items.items[1].element.dom.clientHeight+40)+"px"}}else{f.tile.desktopScroll.down(".x-scroll-container").dom.style.height=(f.tile.titleContainer.items.items[0].element.dom.clientHeight+f.tile.titleContainer.items.items[1].element.dom.clientHeight+40)+"px"}}}}},0,["articlereadertextsizeicon"],["component","container","articlereadertextsizeicon"],{component:true,container:true,articlereadertextsizeicon:true},["widget.articlereadertextsizeicon"],0,[InfinityMobile.view.desktop,"ArticleReaderTextSizeIcon"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ImageGallery",Ext.Container,{config:{modal:true,fullscreen:true,centered:true,height:"100%",width:"100%",style:"background-color:black;",zIndex:20,layout:"vbox",items:[{itemId:"topPanel",layout:"hbox",flex:5,items:[{itemId:"image",flex:3,layout:"hbox",items:[{itemId:"previous",width:30,height:"100%",margin:"0 10 0 10",cls:"pointerCursor"},{itemId:"imageCarousel",flex:1,height:"100%",style:"background-color:rgb(75,75,75)"},{itemId:"next",width:30,height:"100%",margin:"0 10 0 10",cls:"pointerCursor"}]},{itemId:"galleryContent",flex:1,layout:"vbox",items:[{itemId:"closeBtnRow",width:"100%",height:50,items:[{itemId:"closeBtn",cls:"pointerCursor",right:0,top:0,margin:10,height:25,width:25,style:{backgroundImage:"url('resources/images/reader icons/close-ic.png')",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}]},{itemId:"galleryCounter",height:50,margin:"10 0",width:"100%",layout:"hbox",style:{color:"white",fontSize:"20px",fontWeight:"bold"},items:[{itemId:"cameraIcon",height:30,width:30,margin:10,style:{backgroundImage:"url('resources/images/reader icons/photo-ic.png')",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},{itemId:"counter",height:50,layout:{type:"vbox",pack:"center"},items:[{itemId:"text"}]}]},{itemId:"galleryInfo",width:"100%",layout:"vbox",scrollable:{direction:"vertical",indicators:false},style:{color:"white"},items:[{itemId:"title",style:{fontSize:"40px",fontWeight:"bold"},margin:"10 0"},{itemId:"caption",style:{fontSize:"14px"},margin:"10 0"}]}]}]},{itemId:"imageScroller",flex:1,width:"100%",layout:"hbox",padding:10,scrollable:{direction:"horizontal"}}]},initialize:function(){var a=this;if(a.config.article!=null){a.article=a.config.article}if(a.config.images!=null){a.images=a.config.images}a.imageLength=a.images.length;a.topPanel=a.getComponent("topPanel");a.image=a.topPanel.getComponent("image");a.previousBtn=a.image.getComponent("previous");a.previousBtn.setStyle({backgroundImage:"url('resources/images/reader icons/gallery-back-ic.png')",backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat"});a.nextBtn=a.image.getComponent("next");a.nextBtn.setStyle({backgroundImage:"url('resources/images/reader icons/gallery-next-ic.png')",backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat"});a.previousBtn.element.on({tap:a.previous,scope:a});a.nextBtn.element.on({tap:a.next,scope:a});a.galleryContent=a.topPanel.getComponent("galleryContent");a.galleryCounterPanel=a.galleryContent.getComponent("galleryCounter");a.counter=a.galleryCounterPanel.getComponent("counter");a.counterText=a.counter.getComponent("text");a.closeBtnRow=a.galleryContent.getComponent("closeBtnRow");a.closeBtn=a.closeBtnRow.getComponent("closeBtn");a.closeBtn.element.onoy()},scope:a});a.imageScroller=a.getComponent("imageScroller");a.galleryInfo=a.galleryContent.getComponent("galleryInfo");a.title=a.galleryInfo.getComponent("title");a.title.setHtml(a.article.headline);a.caption=a.galleryInfo.getComponent("caption");Ext.Viewport.on({resize:a.resizeGallery,scope:a});a.on({pasel)},scope:a,destroy:function(){a.fireEvent("galleryInvisible")}})},handleItemChange:function(e){var d=this;var b=(e._pageNumber);if(d.images!=null){var g=0;for(var c=0;c<b;c++){var a=d.images[c];if(a!=null&&a.type=="advert"){g++}}var f=e.getActiveItem();if(f.type=="advert"){d.counter.setHtml("Advertisement");if(f.adType=="dfp"){f.loadDfp()}}else{d.counter.setHtml((parseFloat(b)+1-g)+" of "+d.imageLength)}d.caption.setHtml("");if(d.article!=null){if(d.article.images[b-g].caption!=null){if(d.article.images[b-g].caption.trim().length>0){var h="";if(d.article.images[b-g].credit!=null){if(d.article.images[b-g].credit.trim().length>0){h=" ("+d.article.images[b-g].credit+")"}}if(f.type=="advert"){d.caption.setHtml("")}else{d.caption.setHtml(d.article.images[b-g].caption+h)}}else{if(d.article.shortStory!=null){d.caption.setHtml(d.article.shortStory)}}}else{if(d.article.shortStory!=null){d.caption.setHtml(d.article.shortStory)}}if(f.type=="advert"){d.setSelectedImage(d.images.length)}else{d.setSelectedImage(b-g)}}else{if(d.images[b].caption!=null){if(d.images[b].caption.trim().length>0){d.caption.setHtml(d.images[b].caption)}else{d.caption.setHtml("")}}d.setSelectedImage(b-g)}}mainPanel.fireEvent("trackImageChange")},setSelectedImage:function(a){var d=this;var c=d.imageScroller.getItems().items;for(var b=0;b<c.length;b++){if(c[b].element.dom.style.border!=""){c[b].element.dom.style.border=""}}if(c[a]!=null){c[a].element.dom.style.border="2px solid white"}},next:function(){var a=this;a.carousel.next()},previous:function(){var a=this;a.carousel.previous()},resizeGalleryChrome:function(){var a=this;a.galleryInfo.setWidth("calc(100% - 10px)");a.galleryInfo.setHeight($(a.galleryContent.element.dom).height()-$(a.closeBtnRow.element.dom).height()-$(a.galleryCounterPanel.element.dom).height()-10)},resizeGallery:function(){var a=this;a.carousel.onSizeChange();a.galleryInfo.setWidth("calc(100% - 10px)");a.galleryInfo.setHeight($(a.galleryContent.element.dom).height()-$(a.closeBtnRow.element.dom).height()-$(a.galleryCounterPanel.element.dom).height()-10)},setupCarousel:function(){var a=this;a.checkAdverts();a.carousel=Ext.create("InfinityMobile.view.ImageCarousel",{width:"100%",height:"100%",data:a.images,pageNo:1,pageTemplate:function(c,e,b){if(c!=null){if(c.type=="advert"){return Ext.create("InfinityMobile.view.ReaderImageGalleryAdvert",{type:"advert",pageNo:e})}else{var d=Ext.create("InfinityMobile.view.ReaderImageGalleryItem",{image:c,position:parseInt(c.index),pageNo:e});return d}}}});a.carousel.onDragStart=function(){};a.imageCarousel.add(a.carousel);a.carousel.on({activeitemchange:a.handleItemChange,scope:a})},checkAdverts:function(){var h=this;if(settings.reader.galleryMpu!=null&&settings.reader.galleryMpu.type=="dfp"&&settings.reader.galleryMpu.networkCode!=null&&settings.reader.galleryMpu.adUnit!=null){var a=2;var e=h.images.length;var g=settings.reader.galleryMpu;if(g.swipeCount!=null&&!isNaN(g.swipeCount)){a=parseInt(g.swipeCount)}var b=Math.floor(e/a);for(var d=0;d<b;d++){var c=(a)+(a*d)+(d);var f={type:"advert"};h.images.splice(c,0,f)}}},setupThumbnails:function(){var b=this;for(var a in b.images){if(b.images[a].type!="advert"){var c=Ext.create("InfinityMobile.view.ReaderImageGalleryThumb",{cls:"pointerCursor",url:b.images[a].url,carousel:b.carousel,index:a,style:{transition:"all ease 0.5s"}});if(a==0){c.element.dom.style.border="2px solid white"}b.imageScroller.add(c)}}}},0,["dynamicimagegallery"],["component","container","dynamicimagegallery"],{component:true,container:true,dynamicimagegallery:true},["widget.dynamicimagegallery"],0,[InfinityMobile.view.desktop,"ImageGallery"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArchiveSelector",Ext.Panel,{config:{height:40,padding:"0 10px",layout:{type:"hbox",align:"center"},items:[{itemId:"selectEdition",style:"font-size:11pt;",html:"Select edition:"},{width:10},{style:"font-size:11pt;",html:"<div class='selectBox'><select id='yearDropDown'></select></div>"},{width:10},{style:"font-size:11pt;",html:"<div class='selectBox'><select id='monthDropDown'></select></div>"},{width:10},{style:"font-size:11pt;",html:"<div class='selectBox'><select id='dayDropDown'></select></div>"},{width:10},{itemId:"change",cls:"pointerCursor",style:"text-decoration:underline;font-size:11pt;",html:"Change"}]},initialize:function(){var c=this;c.datePickerYear=c.element.down("#yearDropDown").dom;c.datePickerMonth=c.element.down("#monthDropDown").dom;c.datePickerDay=c.element.down("#dayDropDown").dom;c.changeBtn=c.getComponent("change");var b=c.hexToRgb(settings.topbar.backgroundColor);if(settings.topbar!=null){c.setStyle({backgroundColor:"rgba("+b.r+","+b.g+","+b.b+",0.9)",color:"#"+settings.topbar.color})}c.changeBtn.element.on({tap:c.changeEdition,scope:c});var a=settings.dateSelector.oldestEdition.split("/");c.earliestDate=new Date(a[2],a[1],a[0]);c.on({path-1}});c.setTodaysDate()},hexToRgb:function(b){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},populateYearDron()}},populateMonthDrok}}}},populateDayDrok}}}},addOd(b)},setTodayte()},forma()}}},trimMonthToCurrent:function(){var a=this},trimDayToeak}},trimDayToCuay))},trimDay:function(a){},changeEdalue}},0,["archiveselector"],["component","container","panel","archiveselector"],{component:true,container:true,panel:true,archiveselector:true},["widget.archiveselector"],0,[InfinityMobile.view.desktop,"ArchiveSelector"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.readerTerms",Ext.Container,{config:{modal:true,hideOnMaskTap:true,centered:true,width:700,style:"background-color:white;border:1px solid black;border-radius:5px;padding:0px;",fullscreen:true,items:[{id:"toolBar",height:40,items:[{itemId:"title",top:10,left:10},{id:"ToolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img class='pointerCursor' src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"body",width:"100%",height:"100%",style:"max-height:600px;"}]},initialize:function(){var b=this;b.topbar=b.getComponent("toolBar");b.title=b.topbar.getComponent("title");b.close=b.topbar.getComponent("ToolBarClose");b.bodyContainer=b.getComponent("body");b.topbar.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});if(settings.menu.terms.url!=null){if(settings.menu.terms.url.length>0){$.ajax({url:"../get_terms_of_service.aspx?url="+encodeURIComponent(settings.menu.terms.url),async:false,success:function(c){b.bodyContainer.setHtml(c);if(Ext.os.is.Desktop){b.bodyContainer.element.dom.style.overflowY="scroll"}else{b.bodyContainer.setScrollable(true)}},error:function(){b.destroy()}})}}b.title.setHtml(language.menu.terms);b.close.element.on({tap:function(){b.destroy()}});if(settings.newsday!=null){b.element.dom.style.borderRadius="0px";if(currentProfile=="largetablet"||currentProfile=="tablet"){b.bodyContainer.setHeight("200px")}if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.close.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}}}},0,["readerTerms"],["component","container","readerTerms"],{component:true,container:true,readerTerms:true},["widget.readerTerms"],0,[InfinityMobile.view.desktop,"readerTerms"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderFree",Ext.Container,{config:{width:"100%",height:"100%",top:0,left:0,layout:"vbox",items:[{height:40},{itemId:"container",style:"background-color:rgba(200, 200, 200, 0.9); font-size:28px;",flex:1,layout:{type:"vbox",align:"center",pack:"middle"},items:[{itemId:"content",width:700,height:650,layout:{type:"vbox",align:"center"},defaults:{margin:"15px 0 15px 0"},items:[{height:100,width:"100%",style:'background-image:url("resources/images/branding/logo_black.png"); background-repeat:no-repeat; background-size:contain; background-position:center'},{itemId:"freeTrialText"},{itemId:"actionContainer",height:250,margin:"15px 0",layout:"hbox",items:[{itemId:"logInContainer",width:300,height:250,style:"background-color:white; text-align:center",padding:20,layout:"vbox",items:[{margin:"20px 0 0 0",style:"font-size:20px; font-weight:bold",html:"SUBSCRIBERS"},{margin:"20px 0 0 0",style:"font-size:20px;",html:"Enjoy Unlimited Access as part of your subscription"},{itemId:"logInButton",margin:"30px 0 0 0",width:"100%",height:50,style:"line-height:50px; color:white; font-size:20px; text-align:center; background-color: rgb(25, 153, 206);",html:"Log In Now"}]},{width:20},{itemId:"trialContainer",width:300,height:250,style:"background-color:white; text-align:center",padding:20,layout:"vbox",items:[{margin:"20px 0 0 0",style:"font-size:20px; font-weight:bold",html:"NEW USERS"},{itemId:"trialText",margin:"20px 0 0 0",style:"font-size:20px;",html:"Read 30 pages free each month"},{itemId:"trialButton",margin:"30px 0 0 0",width:"100%",height:50,style:"line-height:50px; color:white; font-size:20px; text-align:center; background-color: rgb(25, 153, 206);",html:"Start Your Trial"}]}]},{itemId:"freeText",style:"text-align:center",html:"<span style='color:#1999ce;' id='subscribeEvent'>Subscribe</span> now for unlimited access<br />Already a subscriber? <span style='color:#1999ce;' id='loginEvent'>Log In</span>"}]}]}]},initier()},continueListener:function(){var a=this;if(a.trialButton!=null){a.trialButton.element.on("tap",function(){a.fireEvent("close",a)})}},subscribeLis)})}},loginLis)})}}},0,["readerfree"],["component","container","readerfree"],{component:true,container:true,readerfree:true},["widget.readerfree"],0,[InfinityMobile.view.desktop,"ReaderFree"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderPuzzlePopoverItem",InfinityMobile.view.desktop.ReaderArticlePopoverItem,{config:{mediaObject:"",pageNo:"",page:"",height:"100%",cls:"readerpuzzle",layout:"vbox",style:"overflow-y:auto;",items:[{itemId:"content",layout:"card",items:[{itemId:"contentHtml"}]},{itemId:"bottomBar",cls:"bottomBar",height:60,style:"font-size: 14px;min-height:60px;",layout:{type:"hbox",pack:"middle",align:"center"},items:[{itemId:"archive",cls:"pointerCursor",width:170,height:40,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",pack:"middle",align:"center"},items:[{html:"<img src='https://edition.pagesuite.com/tribune/archive-ic.png' style='height:32px' />"},{width:5},{html:"Archive"}]},{width:10},{itemId:"print",cls:"pointerCursor",width:170,height:40,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",pack:"middle",align:"center"},items:[{html:"<img src='https://edition.pagesuite.com/tribune/print-icon.png' style='height:32px' />"},{width:5},{html:"Print"}]},{width:10},{itemId:"share",cls:"pointerCursor",width:170,height:40,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",pack:"middle",align:"center"},items:[{itemId:"shareText",layout:{type:"hbox",pack:"middle",align:"center"},items:[{html:"<img src='https://edition.pagesuite.com/tribune/share-ic.png' style='height:32px' />"},{width:5},{html:"Share"}]},{itemId:"shareFrame",hidden:true,layout:{type:"hbox",pack:"middle",align:"center"}}]},{itemId:"interactivemargin",width:10},{itemId:"interactive",width:170,height:40,style:"background-color:#dfe0df; color: #4591B8",layout:{type:"hbox",pack:"middle",align:"center"},items:[{html:"<img src='https://edition.pagesuite.com/tribune/interactive-ic.png' style='height:32px' />"},{width:5},{html:"Interactive Version"}]}]}]},initialize:function(){var b=this;InfinityMobile.view.desktop.ReaderArticlePopoverItem.prototype.initialize.apply(this,arguments);b.bottomBar=b.getComponent("bottomBar");var a=InfinityMobile.app.application.getController("MediaController").flippAdvertSetting;var c=a.enabled;if(c){b.bottomBar.setDocked("bottom")}b.archiveButton=b.bottomBar.getComponent("archive");b.printButton=b.bottomBar.getComponent("print");b.shareButton=b.bottomBar.getComponent("share");b.shareText=b.shareButton.getComponent("shareText");b.shareFrame=b.shareButton.getComponent("shareFrame");b.interactiveMargin=b.bottomBar.getComponent("interactivemargin");b.interactiveButton=b.bottomBar.getComponent("interactive");b.setArchiveListener();b.setPrintListener();b.setShareListener();b.setInteractiveListener();b.setUpShare();b.checkInteractive();if(typeof isTribReader!="undefined"){if(isTribReader){b.setPadding("0px 25px")}}b.on({painted:function(){}})},setUpShare:function(){var d=this;var e="http://"+window.location.hostname+"/infinity/article_share.aspx?guid="+d.articleguid;message=d.config.page.description;var a=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:"https://edition.pagesuite.com/html5/desktop/assets/article%20view/email-ic.png",link:"mailto:?message={0}&subject={1}",url:e,message:message,height:30,width:30,type:"email"});d.shareFrame.add(a);var c=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:"https://edition.pagesuite.com/html5/desktop/assets/article%20view/facebook-ic.png",link:"http://www.facebook.com/sharer/sharer.php?u={0}&title={1}",url:e,message:message,height:30,width:30});d.shareFrame.add(c);var b=Ext.create("InfinityMobile.view.ReaderMenuShareItem",{icon:"https://edition.pagesuite.com/html5/desktop/assets/article%20view/twitter-ic.png",link:"http://twitter.com/intent/tweet?status={0} - {1}",url:e,message:message,height:30,width:30});d.shareFrame.add(b)},setArchiveListener:function(){var a=this;a.archiveButton.element.on("tap",function(){a.fireEvent("puzzleArchive",a)})},setPrintListener:function(){var a=this;a.printButton.element.on("tap",function(){a.fireEvent("puzzlePrint",a)})},setShareListener:function(){var a=this;a.shareButton.element.on("tap",function(){a.fireEvent("puzzleShare",a)})},setInteractiveListener:function(){var a=this;a.interactiveButton.element.on("tap",function(){a.fireEvent("puzzleInteractive",a)})},checkInteractive:function(){var a=this;if(a.getPage().title!="Interactive Puzzle"){a.interactiveMargin.setHidden(true);a.interactiveButton.setHidden(true)}}},0,["readerpuzzlepopoveritem"],["component","container","readerarticlepopoveritem","readerpuzzlepopoveritem"],{component:true,container:true,readerarticlepopoveritem:true,readerpuzzlepopoveritem:true},["widget.readerpuzzlepopoveritem"],0,[InfinityMobile.view.desktop,"ReaderPuzzlePopoverItem"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderPuzzleArchive",Ext.Container,{config:{layout:"vbox",height:"100%",cls:"puzzleArchive",items:[{itemId:"topbar",height:40,style:"color: #4591B8",layout:{type:"hbox",align:"center"},items:[{itemId:"back",cls:"pointerCursor",width:150,padding:"10 0 0 20",height:"100%",layout:"hbox",style:"font-size:18px",items:[{html:"<img style='height:20px' src='../assets/article view/left-article-arrow.png' />"},{html:"Back",padding:"0 0 0 5"}]},{itemId:"title",flex:1,style:"text-align:center; font-size:22px; font-weight:bold; color:black",html:"Archive"},{width:150}]},{itemId:"containerScroll",style:"overflow-y:scroll;",items:[{itemId:"container",style:"overflow-y:auto;",defaults:{cls:"puzzlearchiveitem"}}]},{itemId:"archiveControl",bottom:0,width:"100%",height:40,layout:{type:"hbox",pack:"center",align:"middle"},items:[{itemId:"previous",style:"color:#4591B8",html:"Previous",cls:"pointerCursor",zIndex:6,flex:1,left:0,top:20},{itemId:"pages",style:"color:#4591B8;text-align:center;",top:20,width:"100%",layout:{type:"hbox",pack:"center",align:"middle"}},{itemId:"next",style:"color:#4591B8",html:"Next",flex:1,right:0,top:20,cls:"pointerCursor"}]}]},initialize:function(){var a=this;var b=a.getComponent("topbar");a.backButton=b.getComponent("back");a.archiveControl=a.getComponent("archiveControl");a.containerScroll=a.getComponent("containerScroll");a.container=a.getComponent("containerScroll").getComponent("container");a.setBackListener();a.config.puzzleArchiveParent.bottomBar.hide();a.setHeight($(a.config.puzzleArchiveParent.element.dom).height());a.config.puzzleArchiveParent.element.down(".x-innerhtml").dom.style.height=$(a.config.puzzleArchiveParent.element.dom).height()+"px";a.containerScroll.setHeight($(a.element.dom).height()-80);a.resizeFunction=function(){a.setHeight($(a.config.puzzleArchiveParent.element.dom).height());a.config.puzzleArchiveParent.element.down(".x-innerhtml").dom.style.height=$(a.config.puzzleArchiveParent.element.dom).height()+"px";a.containerScroll.setHeight($(a.element.dom).height()-80)};Ext.Viewport.on({resize:a.resizeFunction});a.location=0;a.pagesControl=a.archiveControl.getComponent("pages");a.previous=a.archiveControl.getComponent("previous");a.next=a.archiveControl.getComponent("next");a.next.element.on({tap:function(){a.fireEvent("archiveNextPage",a)}});a.previous.element.on({tap:function(){a.fireEvent("archivePreviousPage",a)}});a.fireEvent("initialized",a)},setBackListener:function(){var a=this;a.backButton.element.on("tap",function(){a.config.puzzleArchiveParent.bottomBar.show();a.config.puzzleArchiveParent.element.down(".x-innerhtml").dom.style.height="";Ext.Viewport.removeListener("resize",a.resizeFunction);a.fireEvent("back",a)})}},0,["readerpuzzlearchive"],["component","container","readerpuzzlearchive"],{component:true,container:true,readerpuzzlearchive:true},["widget.readerpuzzlearchive"],0,[InfinityMobile.view.desktop,"ReaderPuzzleArchive"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ExtraTopBar",Ext.Container,{config:{height:40,width:"100%",padding:8,zIndex:2,layout:{type:"hbox"},defaults:{margin:"0 10px 0 10px",style:"float:right; background-size: contain; background-repeat: no-repeat; background-position: center; cursor:pointer;",height:24},items:[{itemId:"tooltiptool",cls:"tooltiptoolbar",style:"z-index:10000",margin:0,height:""},{xtype:"layouttoolbaricon",setting:"menuicon",event:"openReaderMenu",itemId:"menuicon"},{itemId:"toolbarIcon",cls:"toolbarIcon",defaults:{width:"100%",height:"100%",left:0,top:0},items:[{cls:"toolbarIconLarge",itemId:"toolbarIconLarge",style:"background-position: left center; background-size: contain; background-repeat: no-repeat;"},{cls:"toolbarIconSmall",itemId:"toolbarIconSmall",style:"background-position: left center; background-size: contain; background-repeat: no-repeat;"}]}]},initips()},setupToon")}},tooltip)"})},setupIcons:function(){var a=this;a.menuIcon=a.getComponent("menuicon");if(settings.newsday.menuDirection!="left"){a.menuIcon.hide()}a.setupLogo();a.archiveSelector=Ext.create("InfinityMobile.view.desktop.ArchiveSelector",{});a.add(a.archiveSelector);a.archiveSelector.setStyle({backgroundColor:""});if(settings.newsday!=null){if(settings.newsday.weatherIcon!=null){if(settings.newsday.weatherIcon.length>0){a.weatherPlaceholder=Ext.create("Ext.Container",{right:18,height:40,width:60,style:'background-image:url("'+settings.newsday.weatherIcon+'");background-position:center;background-size:contain;background-repeat:no-repeat;'});a.add(a.weatherPlaceholder)}}}},setupLogo:function(){var b=this;b.topBarIconContainer=b.getComponent("toolbarIcon");b.topBarIconLarge=b.topBarIconContainer.getComponent("toolbarIconLarge");b.topBarIconSmall=b.topBarIconContainer.getComponent("toolbarIconSmall");var a=settings.topbar;b.topBarIconLarge.setStyle({backgroundImage:"url("+a.logo+")"});if(a.smallLogo!=null){var c=a.smallLogo;b.topBarIconContainer.addCls("hasSmallLogo");b.topBarIconSmall.setStyle({backgroundImage:"url("+c+")"})}else{b.topBarIconContainer.addCls("hasSmallLogo");b.topBarIconSmall.setStyle({backgroundImage:"url("+a.logo+")"})}b.topBarIconContainer.element.on(t")}})},hexnull}},0,["extratopbar"],["component","container","extratopbar"],{component:true,container:true,extratopbar:true},["widget.extratopbar"],0,[InfinityMobile.view.desktop,"ExtraTopBar"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderOGallery",Ext.Container,{config:{modal:true,fullscreen:true,centered:true,height:"100%",width:"100%",style:"background-color:black;",zIndex:99999999,layout:"vbox",items:[{itemId:"topPanel",layout:"hbox",flex:5,items:[{itemId:"image",flex:3,layout:"hbox",height:"100%",items:[{itemId:"previous",width:30,height:"100%",margin:"0 10 0 10",cls:"pointerCursor"},{itemId:"imageCarousel",height:"100%",flex:1,style:"background-color:rgb(75,75,75)"},{itemId:"next",width:30,height:"100%",margin:"0 10 0 10",cls:"pointerCursor"}]},{itemId:"galleryContent",flex:1,layout:"vbox",items:[{itemId:"closeBtnRow",width:"100%",height:50,items:[{itemId:"closeBtn",cls:"pointerCursor",right:0,top:0,margin:10,height:25,width:25,style:{backgroundImage:"url('resources/images/article-close-btn-white.png')",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}]},{itemId:"galleryCounter",height:60,margin:"10 0",width:"100%",layout:"hbox",style:{color:"white",fontSize:"20px",fontWeight:"bold"},items:[{itemId:"cameraIcon",height:30,width:30,margin:10,style:{backgroundImage:"url('resources/images/reader icons/photo-ic.png')",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},{itemId:"counter",height:50,layout:{type:"vbox",pack:"center"},items:[{itemId:"text"}]}]},{itemId:"galleryInfo",cls:"galleryInfo",width:"100%",layout:"vbox",padding:10,style:{color:"white",overflowY:"auto"},items:[{itemId:"title",width:"100%",style:{fontSize:"40px",fontWeight:"bold"},margin:"10 0"},{itemId:"caption",flex:1,width:"100%",style:{fontSize:"14px"},margin:"10 0"}]}]}]},{itemId:"imageScroller",flex:1,width:"100%",layout:"hbox",padding:10,scrollable:{direction:"horizontal"}}]},initialize:function(){var a=this;if(a.config.article!=null){a.article=a.config.article}if(a.config.images!=null){a.images=a.config.images}if(a.config.url!=null){a.url=a.config.url}a.topPanel=a.getComponent("topPanel");a.image=a.topPanel.getComponent("image");a.previousBtn=a.image.getComponent("previous");a.previousBtn.setStyle({backgroundImage:"url('resources/images/reader icons/gallery-back-ic.png')",backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat"});a.nextBtn=a.image.getComponent("next");a.nextBtn.setStyle({backgroundImage:"url('resources/images/reader icons/gallery-next-ic.png')",backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat"});a.previousBtn.element.on({tap:a.previous,scope:a});a.nextBtn.element.on({tap:a.next,scope:a});a.galleryContent=a.topPanel.getComponent("galleryContent");a.galleryCounterPanel=a.galleryContent.getComponent("galleryCounter");a.counter=a.galleryCounterPanel.getComponent("counter");a.counterText=a.counter.getComponent("text");a.closeBtnRow=a.galleryContent.getComponent("closeBtnRow");a.closeBtn=a.closeBtnRow.getComponent("closeBtn");a.closeBtn.element.on({tap:function(){a.fireEvent("closeOGallery",a)},scope:a});a.imageScroller=a.getComponent("imageScroller");a.galleryInfo=a.galleryContent.getComponent("galleryInfo");if(navigator.appVersion.indexOf("Edge")!=-1){a.galleryInfo.setStyle({overflowY:"scroll"})}a.title=a.galleryInfo.getComponent("title");if(Ext.browser.is.IE){a.title.setStyle({flexShrink:0})}a.caption=a.galleryInfo.getComponent("caption");if(Ext.browser.is.Chrome){Ext.Viewport.on({resize:a.resizeGalleryChrome,scope:a})}else{Ext.Viewport.on({resize:a.resizeGallery,scope:a})}a.imageCarousel=a.image.getComponent("imageCarousel");a.on({painted:function(){if(a.url!=null){if(a.url.indexOf("http://")!=-1){var b=a.url.substring(7,a.url.length)}else{b=a.url}b="../../Newsday/getatex.aspx?url=http://www.newsday.com/iosfeeds/"+b+"?device=desktop&_dc=1445010088130&limit=25";$.ajax({type:"GET",url:b,data:{get_param:"value"},dataType:"json",success:function(d){a.title.setHtml(d.content.name);a.images=[];for(var c in d.content.images){a.images[c]={url:d.content.images[c].image_path,caption:d.content.images[c].caption,index:c}}a.setupCarousel();a.setupThumbnails();if(a.images[0].caption.trim().length>0){var f="";if(a.images[0].credit!=null){if(a.images[0].credit.trim().length>0){f=" ("+a.images[0].credit+")"}}a.caption.setHtml(a.images[0].caption+f)}a.galleryInfo.setHeight($(a.galleryContent.element.dom).height()-$(a.closeBtnRow.element.dom).height()-$(a.galleryCounterPanel.element.dom).height()-10);a.handleItemChange(a.carousel);a.data=d;var e="1 of "+a.images.length;a.fireEvent("ogalleryinitialized",a,d,e)}})}else{a.title.setHtml(a.article.headline);a.setupCarousel();a.setupThumbnails();a.galleryInfo.setHeight($(a.galleryContent.element.dom).height()-$(a.closeBtnRow.element.dom).height()-$(a.galleryCounterPanel.element.dom).height()-10);a.handleItemChange(a.carousel)}},scope:a})},setupThumbnails:function(){var b=this;for(var a in b.images){var c=Ext.create("InfinityMobile.view.ReaderImageGalleryThumb",{cls:"pointerCursor",url:b.images[a].url,carousel:b.carousel,index:a,style:{transition:"all ease 0.5s"}});if(a==0){c.element.dom.style.border="2px solid white"}b.imageScroller.add(c)}},setupGalleryInfo:function(){},handleItemChange:function(g){var d=this;var a=(g._pageNumber);if(d.images!=null){d.counter.setHtml((parseFloat(a)+1)+" of "+d.images.length);d.caption.setHtml("");if(d.article!=null){if(d.article.images[a].caption!=null){if(d.article.images[a].caption.trim().length>0){var h="";if(d.article.images[a].credit!=null){if(d.article.images[a].credit.trim().length>0){h=" ("+d.article.images[a].credit+")"}}d.caption.setHtml(d.article.images[a].caption+h)}else{if(d.article.shortStory!=null){d.caption.setHtml(d.article.shortStory)}}}else{if(d.article.shortStory!=null){d.caption.setHtml(d.article.shortStory)}}d.setSelectedImage(a)}else{if(d.images[a].caption!=null){if(d.images[a].caption.trim().length>0){d.caption.setHtml(d.images[a].caption)}else{d.caption.setHtml("")}}d.setSelectedImage(a)}}var f=(parseFloat(a)+1)+" of "+d.images.length;if(d.url!=null){if(d.data!=null){d.fireEvent("ogalleryinitialized",d,d.data,f)}}else{var c=d.article.byline;if(d.article.reporters!=null&&d.article.reporters.length>0){for(var b in d.article.reporters){c+=", "+d.article.reporters[b].name}}var e={author:c,contentTitle:d.article.headline,contentType:"photolist"};d.fireEvent("ogalleryinitializedArticle",d,e,f)}},setSelectedc)}}},next:function(){var a=this;a.carousel.next()},preus()},resizeGalleryC-10)},resizeGa-10)},setupCar:a})}},0,["readerogallery"],["component","container","readerogallery"],{component:true,container:true,readerogallery:true},["widget.readerogallery"],0,[InfinityMobile.view.desktop,"ReaderOGallery"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.LightboxLink",Ext.Container,{config:{style:"padding:0px; border-radius:0px; background-color:white;",cls:"innerhtmlfullheight",modal:true,centered:true,hideOnMaskTap:true,height:1000,width:1000,maxHeight:"80%",maxWidth:"80%",layout:"vbox",zIndex:20,items:[{itemId:"topBar",height:40,layout:"hbox",items:[{itemId:"toolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{flex:1,itemId:"content"}]},initit()}},setCloseButtonListenter:function(){var a=this;a.closeButton.element.on("tap",function(){a.hide()})},loadMediaO>")}}},0,["lightboxlink"],["component","container","lightboxlink"],{component:true,container:true,lightboxlink:true},["widget.lightboxlink"],0,[InfinityMobile.view.desktop,"LightboxLink"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.HowToDPS",Ext.Container,{config:{height:50,width:0,cls:"howto-dps how-to-item",modal:{opacity:0},items:[{itemid:"graphic2",cls:"dps-howto",width:270,height:165,left:-141,top:-30,style:"background-image:url(resources/images/howto/double_page_icon.png);background-size:contain;background-position:center;background-repeat:no-repeat;"}]},initialize:function(){var a=this;a.getModal().setStyle({opacity:0})}},0,["howtoeditionoptions"],["component","container","howtoeditionoptions"],{component:true,container:true,howtoeditionoptions:true},["widget.howtoeditionoptions"],0,[InfinityMobile.view.desktop,"HowToDPS"],0));(Ext.cmd.derive("InfinityMobile.profile.desktop",Ext.app.Profile,{config:{name:"desktop",views:["ReaderSpecialSupplements","ArticleReaderMenu","ArticleReaderItemInterstitialContainer","ArticleReaderItemInterstitial","ArticleReaderItemWeatherTile","ArticleReaderItemTopStoryItem","ArticleReaderItemTopStories","ArticlePopoverItemDynamic","ArticleReaderItemMedWideTall","ArticleReaderItemMedTall","ArticleReaderItemMedWide","ArticleReaderBannerAd","ArticleReaderItemContainer","ArticleReaderItemSmall","ArticleReaderItemLrg","ReaderArticlePopover","ArticlePopoverInterstitial","ReaderArticlePopoverItem","DesktopPageViewer","LayoutToolBarView","LayoutToolBarIconView","LayoutToolBarToggleIconView","ReaderToolbarShareMenu","HowToEditionOptions","HowToPageControl","HowToViewOptions","HowToReader","DynamicArticlesInterstitialContainer","DynamicArticlesInterstitial","HowToMenuIcon","HowToArticlesContainer","SmallViewTileWide","SmallViewTileSmall","SmallViewTileMed","SmallViewTileWeather","SmallViewTileWeatherContainer","SectionListOverlay","SectionListOverlayItem","ZonesOverlay","ZonesOverlayItem","ReaderArchive","ReaderDownload","ReaderBookmark","PrintMenu","ClippingOptionsMenu","ArticleReaderFullscreenGalleryIcon","ArticleReaderTextSizeIcon","ImageGallery","ArchiveSelector","readerTerms","ReaderFree","ReaderPuzzlePopoverItem","ReaderPuzzleArchive","ExtraTopBar","ReaderOGallery","LightboxLink","HowToDPS"]},viewport:{autoMaximize:true},isActive:function(){return Ext.os.is.Desktop},launch:function(){}},0,0,0,0,0,0,[InfinityMobile.profile,"desktop"],0));(Ext.cmd.derive("InfinityMobile.view.CustomCheckbox",Ext.Container,{config:{checked:false,height:30,width:30,html:'<i class="fa fa-check" aria-hidden="true"></i>',style:"font-size:25px;"},initiTap)},isChcked},check:function(){this.checked=true;this.addCls("checkbox-checked")},uned")}},0,["customcheckbox"],["component","container","customcheckbox"],{component:true,container:true,customcheckbox:true},["widget.customcheckbox"],0,[InfinityMobile.view,"CustomCheckbox"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderView",InfinityMobile.view.LayoutView,{config:{layout:"vbox",items:[{itemId:"mainContainer",layout:"hbox",flex:1,items:[{itemId:"leftPadding",width:180},{itemId:"readerContainer",flex:1,style:"position:relative;overflow-x:hidden;overflow-y:visible;"},{itemId:"rightPadding",width:180}]},{itemId:"bottomContainer",height:110}]},initialize:function(){var a=this;InfinityMobile.view.LayoutView.prototype.initialize.apply(this,arguments);a.mainContainer=a.getComponent("mainContainer");a.leftPadding=a.mainContainer.getComponent("leftPadding");a.readerContainer=a.mainContainer.getComponent("readerContainer");a.rightPadding=a.mainContainer.getComponent("rightPadding");a.bottomContainer=a.getComponent("bottomContainer");if(settings.reader.wrapAd==null){a.leftPadding.hide();a.rightPadding.hide()}else{a.setupWrapAdPadding()}},setupWrapAdPadding:function(){var a=this;if((typeof isTribReader!="undefined"&&isTribReader==true)||settings.reader.enableReaderPadding=="true"){a.leftPadding.element.dom.style.padding="10px 0px";a.rightPadding.element.dom.style.padding="10px 0px"}}},0,["readerview"],["component","container","layoutview","readerview"],{component:true,container:true,layoutview:true,readerview:true},["widget.readerview"],0,[InfinityMobile.view,"ReaderView"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderSpecialSupplementsItem",Ext.Container,{config:{style:"float:left;border:1px solid grey",editionGuid:"",editionName:"",items:[{itemId:"archiveItemLabel",bottom:0,width:"100%",padding:"5 0 0 0",style:"background-color:rgba(0,0,0,0.7); color:white; text-align:center; border-radius:5px"}]},initialize:function(){var a=this;a.publicationGuid=a.config.publicationGuid;a.publicationName=a.config.publicationName;a.editionGuid=a.config.editionGuid;a.editionLabel=a.getComponent("archiveItemLabel");var b="https://edition.pagesuite-professional.co.uk//get_image.aspx?w=280&eid="+a.editionGuid;a.setHtml("<img class=\"pointerCursor\" style='width:100%' src='"+b+"' />");a.editionLabel.setHtml(a.publicationName);a.addCls("pointerCursor");if(a.config.type==null){a.element.on({tap:"onTap",scope:a})}else{if(a.config.type=="zones"){a.element.onGuid}})}}},onTap:function(){var a=this;window.open("default.aspx?pubid="+a.publicationGuid+"&edid="+a.editionGuid)}},0,["specialsupplementsitem"],["component","container","specialsupplementsitem"],{component:true,container:true,specialsupplementsitem:true},["widget.specialsupplementsitem"],0,[InfinityMobile.view,"ReaderSpecialSupplementsItem"],0));(Ext.cmd.derive("InfinityMobile.view.StoryWindowPreferences",Ext.Container,{config:{id:"archivecontainer",modal:true,fullscreen:true,centered:true,width:700,style:"padding:0px;max-height:700px;",items:[{id:"toolbar",height:40,items:[{itemId:"title",top:10,left:10},{id:"toolbarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"bodyContainer",layout:"vbox",flex:1,style:"background-color:white;",items:[{itemId:"containerText",margin:20,html:"If you turn this setting off, you will always return to the last page of the paper you viewed."},{itemId:"toggleSetting",padding:"20 20",margin:"0 0 40 0",style:"background-color:#eeeeee;",html:"Return to page featuring last story viewed: <input class='pointerCursor' type='checkbox' style='margin-left:5px;top:2px;float:right;width:15px;height:15px;' class=\"pointerCursor\" onclick='if(this.checked){ this.checked = false; } else{ this.checked = true }' ></input>"}]}]},initing()},setCloseLis"}}}},close:function(){var a=this;a.destroy()},setToggleLis:a})},toggle{}}}},checkCurrentSea){}}},0,["storywindowpreferences"],["component","container","storywindowpreferences"],{component:true,container:true,storywindowpreferences:true},["widget.storywindowpreferences"],0,[InfinityMobile.view,"StoryWindowPreferences"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderPuzzleArchive",Ext.Container,{config:{layout:"vbox",height:"100%",cls:"puzzleArchive",items:[{itemId:"topbar",height:40,style:"color: #4591B8",layout:{type:"hbox",align:"center"},items:[{itemId:"back",cls:"pointerCursor",width:150,padding:"10 0 0 20",height:"100%",layout:"hbox",style:"font-size:18px",items:[{html:"<img style='height:20px' src='../assets/article view/left-article-arrow.png' />"},{html:"Back",padding:"0 0 0 5"}]},{itemId:"title",flex:1,style:"text-align:center; font-size:22px; font-weight:bold; color:black",html:"Archive"},{width:150}]},{itemId:"containerScroll",flex:1,scrollable:{direction:"vertical",directionLock:true,indicators:false},items:[{itemId:"container",flex:1,defaults:{cls:"puzzlearchiveitem"}}]},{itemId:"archiveControl",bottom:0,width:"100%",height:40,layout:{type:"hbox",pack:"center",align:"middle"},items:[{itemId:"previous",style:"color:#4591B8",html:"Previous",cls:"pointerCursor",zIndex:6,flex:1,left:0,top:20},{itemId:"pages",style:"color:#4591B8;text-align:center;",top:20,width:"100%",layout:{type:"hbox",pack:"center",align:"middle"}},{itemId:"next",style:"color:#4591B8",html:"Next",flex:1,right:0,top:20,cls:"pointerCursor"}]}]},initi",a)},setBackLisa)})}},0,["readerpuzzlearchive"],["component","container","readerpuzzlearchive"],{component:true,container:true,readerpuzzlearchive:true},["widget.readerpuzzlearchive"],0,[InfinityMobile.view,"ReaderPuzzleArchive"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderSectionPopupItem",Ext.Container,{config:{style:"font-size:14px;color:#cccccc;border-bottom:1px solid #e1e1e1;",height:50,padding:"15px 5px",width:"100%",cls:"pointerCursor",name:"",pageNumber:""},initi:a})},dex)}},0,["readersectionpopupitem"],["component","container","readersectionpopupitem"],{component:true,container:true,readersectionpopupitem:true},["widget.readersectionpopupitem"],0,[InfinityMobile.view,"ReaderSectionPopupItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderSectionPopup",Ext.Container,{config:{width:200,height:300,layout:"hbox",style:"transition:all 0.5s ease;background-color:rgba(30,30,30,0.9);transform:translateX(40%);max-height:0px;overflow:hidden;",modal:{cls:"transparentMask sectionpopupmask"},cls:"sectionpopup",centered:true,hideOnMaskTap:true,items:[{layout:"vbox",itemId:"sectionbtns",width:"100%",flex:1,items:[{itemId:"sectionsHeader",width:"100%",height:30,padding:5,style:"background-color:#e1e1e1;",html:"Sections",items:[{itemId:"closeBtn",padding:7,top:0,right:0,html:'<img class="pointerCursor" src="../assets/reader icons/close-btn-black.png" style="height:15px;" />'}]},{itemId:"sectionsContainer",flex:1,style:"overflow-y:auto",width:"100%"}]}]},initix"})}500)}},0,["sectionpopup"],["component","container","sectionpopup"],{component:true,container:true,sectionpopup:true},["widget.sectionpopup"],0,[InfinityMobile.view,"ReaderSectionPopup"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderEdgeBrowserPopup",InfinityMobile.view.Overlay,{config:{width:300,height:450,style:"padding:0px",layout:"vbox",hideOnMaskTap:false,items:[{itemId:"languageToolBar",height:40,style:"background-color:#e6e6e6;border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{top:10,left:10,html:"<b>Microsoft Edge</b>"},{itemId:"downloadToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"languageContent",layout:"vbox",padding:20,flex:1,items:[{flex:1,html:'We have noticed that you\'re using Microsoft Edge. If you are using a touchscreen device, please make sure you enable touch events to make use of the touch features on the reader.<br /><br />To achieve this, open a new tab and type "about:flags", scroll down to the "Touch" section and select "Always on" or "Only on when a touchscreen is detected" for "Enable touch events". '},{itemId:"languageButtonsContainer",height:40,layout:"hbox",defaults:{height:40,layout:{type:"hbox",align:"middle",pack:"center"}},items:[{itemId:"updateButton",flex:1,style:"background-color:#458fbb; color:white",items:[{html:"Ok"}]}]}]}]},initier()},setCloseListener:function(){var a=this;a.closeButton.element.on("tap",function(){a.destroy();try{localStorage.setItem("edgePrompt"+publicationguid,"true")}catch(b){}})},setUpdateLis{}})}},0,["readeredgebrowser"],["component","container","panel","overlay","readeredgebrowser"],{component:true,container:true,panel:true,overlay:true,readeredgebrowser:true},["widget.readeredgebrowser"],0,[InfinityMobile.view,"ReaderEdgeBrowserPopup"],0));(Ext.cmd.derive("InfinityMobile.view.BackgroundWrapAdItem",Ext.Container,{config:{width:160,margin:10,zIndex:10000,cls:"pointerCursor wrap-ad",items:[{itemId:"adContainer"}]},initialize:function(){var a=this;if(a.config.side!=null){a.side=a.config.side}if(a.config.bottom!=null){a.bottom=a.config.bottom}if(a.side=="left"){a.addCls("leftWrapper")}else{if(a.side=="right"){a.addCls("rightWrapper")}}if(a.config.pageNo!=null){a.pageNo=a.config.pageNo}a.setAdvert(a.pageNo);if(settings.reader.wrapAd.hideWrapperOnPortrait!=null){if(settings.reader.wrapAd.hideWrapperOnPortrait=="true"){if($(window).width()/$(window).height()<=1.4){a.addCls("hideWrapper")}Ext.Viewport.on("resize",function(){a.fireEvent("resizeWrapAds",a)})}}},setAdvert:function(c){var b=this;var a=settings.reader.wrapAd.type;switch(a){case"image":b.setupImageAdvert();break;case"dfp":b.setupDfpAdvert();break;case"url":b.setupUrlAdvert(c);break}},destroyAdvert:function(){var a=this;a.removeAll(true,true)},setupUrlAdvert:function(a){var c=this;c.advertDivId=c.id+"wrapadvert";var b="";if(settings.reader.wrapAd.url!=null){b=settings.reader.wrapAd.url}if(b.indexOf("?")==-1){b+="?side="+c.side+"&pubid="+publicationguid+"&pnum="+a}else{b+="&side="+c.side+"&pubid="+publicationguid+"&pnum="+a}c.setHtml("<iframe id='"+c.advertDivId+"' style='border:none;width:160px;height:600px;float:"+c.side+";' src='"+b+"' scrolling='no'></iframe>");c.on("painted",c.loadUrlAdvert,c,{delay:10,single:true})},loadUrlAdvert:function(){var b=this;var a=$(b.element.dom).find("iframe");b.resizeAdvert();Ext.Viewport.on({resize:b.resizeAdvert,scope:b})},setupDfpAdvert:function(){var a=this;a.networkCode=settings.reader.wrapAd.networkCode;a.adUnit=settings.reader.wrapAd.adUnit;a.advertDivID=a.id+"wrapadvert";if(settings.reader.wrapAd.dfpAdType=="skyscraper"){a.adWidth="160";a.adHeight="600"}else{a.adWidth="300";a.adHeight="250"}a.setHtml("<div id='"+a.advertDivID+"'  ></div>");a.on("painted",a.loadDfpAdvert,a,{delay:10,single:true});Ext.Viewport.on({resize:a.resizeAdvert,scope:a})},loadDfpAdvert:function(){var a=this;googletag.cmd.push(function(){a.adslot=googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,[parseInt(a.adWidth),parseInt(a.adHeight)],a.advertDivID).addService(googletag.pubads().updateCorrelator());googletag.enableServices();googletag.display(a.advertDivID)});a.resizeAdvert()},resizeAdvert:function(){var c=this;var b=$(c.element.dom).find("iframe");if(b[0]!=null){var f=$("#"+c.advertDivID)[0];var a=b[0].contentDocument;var e=c.element.dom.offsetParent;var d=1;if(settings.reader.wrapAd.type=="dfp"){if(settings.reader.wrapAd.dfpAdType=="skyscraper"){if($(a).height()>$(e).height()-40){d=($(e).height()-40)/$(a).height()}}else{if($(a).width()>$(e).width()-20){d=($(e).width()-20)/$(a).width()}}}else{if(settings.reader.wrapAd.type=="url"){if($(a).height()>$(e).height()-40){d=($(e).height()-40)/$(a).height()}}}c.applyTransform(f,d)}},applyTransform:function(c,b){var a=this;if(settings.reader.wrapAd.dfpAdType=="skyscraper"){a.element.dom.style.transformOrigin="50% 100%"}else{if(a.side=="left"){a.element.dom.style.transformOrigin="0% 100%"}else{a.element.dom.style.transformOrigin="100% 100%"}}a.element.dom.style.transform="scale3d("+b+", "+b+", 1)"},setupImageAdvert:function(){var a=this;if(a.side=="left"){a.img=settings.reader.wrapAd.leftSideImage;a.url=settings.reader.wrapAd.leftSideLink}else{a.img=settings.reader.wrapAd.rightSideImage;a.url=settings.reader.wrapAd.rightSideLink}a.setStyle({backgroundImage:"url("+a.img+")",backgroundPosition:"bottom center",backgroundSize:"contain",backgroundRepeat:"no-repeat",height:"calc(100% - "+(a.bottom+50)+"px)"});a.element.on({tap:a.imgTap,scope:a})},iurl)}},0,["backgroundwrapaditem"],["component","container","backgroundwrapaditem"],{component:true,container:true,backgroundwrapaditem:true},["widget.backgroundwrapaditem"],0,[InfinityMobile.view,"BackgroundWrapAdItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderPagesItem",Ext.Panel,{config:{style:"text-align:center;",cls:"reader-pages-item"},initialize:function(){var b=this;if(b.config.imgSrc!=null){b.imgSrc=b.config.imgSrc}b.img=b.element.down("img").dom;if(!Ext.os.is.Phone){var a=Ext.getStore("SettingStore").data.items[0].raw;if(a.topbar.smallLogo!=null){var c=a.topbar.smallLogo}else{var c=a.topbar.logo}b.img.src=c;b.img.style.maxWidth="140px";b.img.style.maxHeight="180px";b.img.style.width="";b.imgLoaded=false}else{b.img.src=b.imgSrc}},loadImage:function(){var b=this;if(!b.imgLoaded){var a="";if(typeof latestLM!="undefined"){a="&lm="+latestLM}b.img.src=b.imgSrc+a;b.img.o0px"};b.imgLoaded=true}}},0,["readerpagesitem"],["component","container","panel","readerpagesitem"],{component:true,container:true,panel:true,readerpagesitem:true},["widget.readerpagesitem"],0,[InfinityMobile.view,"ReaderPagesItem"],0));(Ext.cmd.derive("InfinityMobile.view.PrintPreview",Ext.Container,{config:{height:"0px",width:"0%",modal:true,fullscreen:true,hideOnMaskTap:true,centered:true,style:"border-radius:10px",zIndex:11111},initialize:function(){var c=this;c.delayImage=800;if(c.config.delayImages!=null){c.delayImage=c.config.delayImages}if(c.config.imgCheck!=null){c.imgCheck=c.config.imgCheck}else{c.imgCheck=false}var a="0px";var b="0px";if(Ext.os.is.Android){a=$(document).height()+"px";b=$(document).width();$(c.element.dom).css("visibility","hidden")}if(!Ext.os.is.Desktop){c.setLeft(0)}c.setHtml("<iframe id='printIframe' name='printIframe' style='height:"+a+";width:"+b+";border:none;' ></iframe>");c.element.on({pant()},scope:c})},print:function(){var b=this;b.iframe.focus();if(b.imgCheck&&!Ext.browser.is.Firefox){var a=$(b.iframe.document).find("img");var c=1000+(a.length*b.delayImage);Ext.Viewport.setMasked({xtype:"loadmask",message:"Loading"});setTimeout(function(){Ext.Viewport.setMasked(false);if(Ext.browser.is.IE){b.iframe.document.execCommand("print",false,null);b.hide()}else{if(Ext.os.is.Android){$(b.element.dom).css("visibility","visible")}b.iframe.print();if(Ext.os.is.Desktop){b.hide()}else{$(b.element.dom).css("visibility","hidden")}}},c)}else{if(Ext.browser.is.IE){b.iframe.document.execCommand("print",false,null);b.hide()}else{b.iframe.print();b.hide()}}},hide:function(){var a=this;a.destroy()}},0,["printpreview"],["component","container","printpreview"],{component:true,container:true,printpreview:true},["widget.printpreview"],0,[InfinityMobile.view,"PrintPreview"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingLoad",Ext.Container,{config:{fullscreen:true,modal:true,items:[{itemID:"container",centered:true,height:150,width:150,layout:"vbox",defaults:{margin:10},style:{backgroundColor:"rgba(0,0,0,0.7)",borderRadius:"5px"},items:[{flex:2,style:{backgroundImage:"url('resources/images/loading.gif')",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"}},{flex:1,style:{color:"white",textAlign:"center"},html:"Clipping"}]}]}},0,["clippingload"],["component","container","clippingload"],{component:true,container:true,clippingload:true},["widget.clippingload"],0,[InfinityMobile.view,"ClippingLoad"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingOptionsMenu",Ext.Container,{config:{modal:true,hideOnMaskTap:true,centered:true,width:700,style:"background-color:white;border:1px solid black;border-radius:5px;padding:0px;",fullscreen:true,items:[{id:"clippingOptionsToolBar",height:40,items:[{itemId:"title",top:10,left:10},{id:"clippingOptionsToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"clippingOptionsBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"clippingOptionsContainerText",margin:"0 0 20px 0",html:"<p style='font-size:16px;'>To download or email your clipping(s), simply select one or more and click the relevant button. To view a clipping at a bigger size, select the thumbnail(s) and then click the 'Preview' button.<p><br /><p style='font-size:12px;color:#444444'>Please note: Once you close your browser or exit the session, your clippings library will be cleared.</p>"},{itemId:"clippingsContainer",style:"border: 1px solid #e6e6e6;",height:400,scrollable:{direction:"vertical",directionLock:true},defaults:{width:203,height:150,margin:"7 8 16 7",cls:"archiveitemphone"}},{itemId:"buttonsContainer",layout:"hbox",height:60,items:[{itemId:"previewBtn",flex:1,cls:"btn",margin:"15 5 5 0",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/preview-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Preview",margin:5,style:"font-size:11pt;text-align:center;"}]},{itemId:"downloadBtn",flex:1,cls:"btn",margin:"15 5 5 5",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/downloads-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Save",margin:5,style:"font-size:11pt;text-align:center;"}]},{itemId:"printBtn",flex:1,cls:"btn",margin:"15 5 5 5",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/print-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Print",margin:5,style:"font-size:11pt;text-align:center;"}]},{itemId:"shareBtn",flex:2,cls:"btn",margin:"15 0 5 5",padding:5,layout:{type:"hbox",pack:"center",align:"middle"},items:[{height:30,width:30,style:'background-image:url("resources/images/reader icons/share-white.png");background-size:contain;background-position:center;background-repeat;no-repeat;'},{itemId:"Share",margin:5,style:"font-size:11pt;"}]}]}]}]},initialize:function(){var b=this;b.clippingsToolbar=b.getComponent("clippingOptionsToolBar");b.clippingsToolbar.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});b.closeBtn=b.clippingsToolbar.getComponent("clippingOptionsToolBarClose");b.clippingsBody=b.getComponent("clippingOptionsBodyContainer");b.clippingsContainer=b.clippingsBody.getComponent("clippingsContainer");b.buttonsContainer=b.clippingsBody.getComponent("buttonsContainer");b.previewBtn=b.buttonsContainer.getComponent("previewBtn");b.downloadBtn=b.buttonsContainer.getComponent("downloadBtn");b.printBtn=b.buttonsContainer.getComponent("printBtn");b.shareBtn=b.buttonsContainer.getComponent("shareBtn");b.title=b.clippingsToolbar.getComponent("title");b.title.setHtml(language.clippings.clippingsOptions);b.clippingOptionsContainerText=b.clippingsBody.getComponent("clippingOptionsContainerText");b.clippingOptionsContainerText.setHtml("<p style='font-size:16px;'>"+language.clippings.ClippingsOptionsText+"</p><br /><p style='font-size:12px;color:#444444'>"+language.clippings.clippingsPleaseNote+"</p>");b.previewBtn.getComponent("Preview").setHtml(language.clippings.preview);b.downloadBtn.getComponent("Save").setHtml(language.clippings.save);b.printBtn.getComponent("Print").setHtml(language.clippings.print);b.shareBtn.getComponent("Share").setHtml(language.clippings.share);b.previewBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.downloadBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.printBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.shareBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});b.closeBtn.element.on("tap",function(){b.destroy()});if(settings.newsday!=null){if(settings.newsday.whiteCloseIcon=="true"){var a=$(b.closeBtn.element.dom).find("img");if(a.length>0){a[0].src="resources/images/article-close-btn-white.png"}}b.element.dom.style.borderRadius=""}if(b.config.images!=null){b.images=b.config.images}if(b.config.widths!=null){b.widths=b.config.widths}if(b.config.heights!=null){b.heights=b.config.heights}b.addThumbnails();b.previewBtn.element.on({tap:b.preview,scope:b});b.downloadBtn.element.on({tap:b.download,scope:b});b.printBtn.element.on({tap:b.print,scope:b});b.shareBtn.element.on({tap:b.shareTap,scope:b});if(!Ext.os.is.Desktop){}},prgs)}},download:function(){var f=this;var c=false;if(Ext.os.is.Desktop){for(var b=0;b<f.images.length;b++){if(f.clippingsContainer.innerItems[b].clicked){var e=document.createElement("a");e.target="_blank";e.href=f.images[b];e.download="clipping"+b+".jpg";var d=document.createEvent("MouseEvents");d.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null);e.dispatchEvent(d);c=true}}}else{var d=document.createEvent("MouseEvents");var e=null;var a=false;for(var b=0;b<f.images.length;b++){if(f.clippingsContainer.innerItems[b].clicked){if(!c){e=document.createElement("a");e.target="_blank";e.href=f.images[b];e.download="clipping"+b+".jpg";d.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null);c=true}else{a=true;break}}}if(a){f.promptUser(language.clippings.selectOneClipping)}else{if(e!=null){e.dispatchEvent(d)}}}if(!c){f.promptUser(language.clippings.selectClippings)}},print:function(){var e=this;var f=false;var d="";for(var c=0;c<e.images.length;c++){var b=e.images[c];if(e.clippingsContainer.innerItems[c].clicked){if(!f){f=true}d+="<div style='width:100%; height:100%; position:relative'>";d+="<img src='"+b+"' style='height:auto;width:auto;max-height:100%;max-width:100%;' />";d+="</div>"}}if(f){var a=Ext.create("InfinityMobile.view.PrintPreview",{imgCheck:true,doc:d});Ext.Viewport.add(a);a.show()}else{e.promptUser(language.clippings.selectClippings)}},shareTap:function(){var d=this;d.shareBtn.removeAll();d.shareBtn.element.dom.style.backgroundColor="#e6e6e6";var b=[{itemId:"email",width:30,height:30,style:'background-image:url("resources/images/reader icons/mail.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"facebook",width:30,height:30,style:'background-image:url("resources/images/reader icons/facebook.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"twitter",width:30,height:30,style:'background-image:url("resources/images/reader icons/twitter.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"linkedin",width:30,height:30,style:'background-image:url("resources/images/reader icons/linkedin.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"google",width:30,height:30,style:'background-image:url("resources/images/reader icons/Google.png");background-size:contain;background-position:center;background-repeat:no-repeat;'},{itemId:"pinterest",width:30,height:30,style:'background-image:url("resources/images/reader icons/pinterest.png");background-size:contain;background-position:center;background-repeat:no-repeat;'}];d.shareBtn.add(b);var a=Ext.getStore("SettingStore");d.emailBtn=d.shareBtn.getComponent("email");d.facebookBtn=d.shareBtn.getComponent("facebook");d.twitterBtn=d.shareBtn.getComponent("twitter");d.linkedinBtn=d.shareBtn.getComponent("linkedin");d.googleBtn=d.shareBtn.getComponent("google");d.pinterestBtn=d.shareBtn.getComponent("pinterest");var c=a.data.items[0].raw.sharing;if(c.allSharing[0]==null){d.emailBtn.hide()}else{d.emailBtn.element.on({tap:d.emailShare,scope:d})}if(c.allSharing[1]==null){d.facebookBtn.hide()}else{d.facebookBtn.element.on({tap:d.facebookShare,scope:d})}if(c.allSharing[2]==null){d.twitterBtn.hide()}else{d.twitterBtn.element.on({tap:d.twitterShare,scope:d})}if(c.allSharing[3]==null){d.linkedinBtn.hide()}else{d.linkedinBtn.element.on({tap:d.linkedinShare,scope:d})}if(c.allSharing[4]==null){d.googleBtn.hide()}else{d.googleBtn.element.on({tap:d.googleShare,scope:d})}if(c.allSharing[5]==null){d.pinterestBtn.hide()}else{d.pinterestBtn.element.on({tap:d.pinterestShare,scope:d})}},addThumbnails:function(){var b=this;for(var a=0;a<b.images.length;a++){var c=Ext.create("InfinityMobile.view.ClippingItems",{image:b.images[a],imgWidth:b.widths[a],imgHeight:b.heights[a],clicked:false});b.clippingsContainer.add(c);c.show()}},promp:b})},emailShare:function(){var d=this;var e=false;var a="mailto:?subject="+encodeURIComponent("Clippings from "+publicationName)+"&body=";var c="To view a clipping, please select one of the links below:\n";for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){c+=d.images[b]+" \n";e=true}}if(e){window.location.href=a+encodeURIComponent(c)}else{d.promptUser(language.clippings.selectClippings)}},facebookShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=encodeURIComponent(d.images[b]);c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://www.facebook.com/sharer/sharer.php?m2w&u="+a+"&title=Clipping from "+publicationName)}else{d.promptUser(e)}},twitterShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.images[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://twitter.com/intent/tweet?text=Clipping from "+publicationName+" - "+a)}else{d.promptUser(e)}},linkedinShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.images[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://www.linkedin.com/shareArticle?mini=true&url="+a+"&title=Clipping from "+publicationName)}else{d.promptUser(e)}},googleShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.images[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("https://plus.google.com/share?url="+a)}else{d.promptUser(e)}},pinterestShare:function(){var d=this;var a="";var e=null;var c=false;for(var b=0;b<d.images.length;b++){if(d.clippingsContainer.innerItems[b].clicked){if(!c){a=d.images[b];c=true}else{c=false;e=language.clippings.selectOneClipping;break}}}if(c){window.open("http://pinterest.com/pin/create/bookmarklet/?media="+a+"&is_video=false&description=Clipping from "+publicationName)}else{d.promptUser(e)}},hide:function(){var a=this;a.fireEvent("enableArticlesContainer");Ext.Container.prototype.hide.apply(this,arguments)}},0,["clippingoptionsmenu"],["component","container","clippingoptionsmenu"],{component:true,container:true,clippingoptionsmenu:true},["widget.clippingoptionsmenu"],0,[InfinityMobile.view,"ClippingOptionsMenu"],0));(Ext.cmd.derive("InfinityMobile.view.liveNewsTicker",Ext.Container,{config:{padding:"5px"},initi000)}},0,["livenewsticker"],["component","container","livenewsticker"],{component:true,container:true,livenewsticker:true},["widget.livenewsticker"],0,[InfinityMobile.view,"liveNewsTicker"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderTicker",Ext.Container,{config:{height:40,padding:"5px",style:"background-color:black;color:white;",zIndex:10000000,cls:"tickerLive"},initialize:function(){var a=this;Ext.Container.prototype.initialize.apply(this,arguments);if(a.config.url!=null){a.url=a.config.url}if(a.config.num!=null){a.num=a.config.num}a.ruleAdded=false;a.str="";setTimeout(function(){a.loadTicker=function(){$.ajax({url:"../../rssWrapper.aspx?base64url="+encodeURIComponent(btoa(a.url)),dataType:"json",success:function(d){if(d.responseData!=null&&d.responseData.feed&&d.responseData.feed.entries){a.articles=[];a.str="";$.each(d.responseData.feed.enh]=h})}for(var c=0;c<a.articles.length;c++){a.articles[c].sections=[];a.articles[c].sections[0]="LIVE NEWS";a.articles[c].headline=a.articles[c].title;a.articles[c].body=a.articles[c].content;a.articles[c].subHeadline="";a.articles[c].byline=a.articles[c].author;if(a.articles[c].images!=null){var b={url:a.articles[c].images};a.articles[c].images=b}else{if(a.articles[c].mediaGroups!=null){if(a.articles[c].mediaGroups[0].contents!=null){if(a.articles[c].mediaGroups[0].contents[0].thumbnails!=null){var b=[{url:a.articles[c].mediaGroups[0].contents[0].thumbnails[0].url}];a.articles[c].images=b}else{if(a.articles[c].mediaGroups[0].contents[0].url!=null){var b=[{url:a.articles[c].mediaGroups[0].contents[0].url}];a.articles[c].images=b}}}}else{a.articles[c].images=[]}}a.articles[c].live=true;a.articles[c].url=a.articles[c].link;a.articles[c].config={};a.articles[c].config.articleIndex=c}s,e)};a.str=a.str.substring(0,a.str.length-18);a.setHtml('<p class="marquee">'+a.str+"</p>");if(a.elememt!=null){a.element.dom.style.color="black";a.element.dom.style.overflow="hidden"}try{document.styleSheets[0].insertRule("@keyframes marqueeAnim {0% { text-indent:100%;} 100% {text-indent:-"+a.element.dom.children[0].scrollWidth+"px}}",0);if(window.navigator.appName=="Netscape"||window.navigator.appName=="Microsoft Internet Explorer"){a.element.dom.style.animation="marqueeAnim 80s linear infinite;";a.element.dom.style.animationDelay="5s"}a.element.down(".marquee").dom.style.display="none";a.element.down(".marquee").dom.offsetHeight;a.element.down(".marquee").dom.style.display="block"}catch(f){console.log(f)}}})};a.loadTicker();setInterval(a.loadTicker,180000)},3000)}},0,["livenewsticker"],["component","container","livenewsticker"],{component:true,container:true,livenewsticker:true},["widget.livenewsticker"],0,[InfinityMobile.view,"ReaderTicker"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderMediaObject",Ext.Container,{config:{baseCls:"mediaObject",mediaObject:""},beforeInitig=""},initialize:function(){var b=this;b.mediaObject=b.getMediaObject();b.setMediaObjectStyle();if(b.mediaObject.animType!=null&&b.mediaObject.animType!=""){b.setAnimations()}if(b.mediaObject.isTrigger=="true"){var a=b.mediaObject.url.replace("http://","");if(a.length>0){b.addCls("pointerCursor");b.element.on("tap",function(){b.fireEvent("triggerMedia",a)})}}},setAnimaa})}},setMediaObjectStyle:function(){var b=this;var a="";a="position:absolute;";a+="top:"+b.mediaObject.y+"%;";a+="left:"+b.mediaObject.x+"%;";a+="width:"+b.mediaObject.width+"%;";a+="height:"+b.mediaObject.height+"%;";a+="z-index:"+b.mediaObject.depthIndex+";";var d=hexToRgb(b.mediaObject.backgroundColor);var c=b.mediaObject.backgroundAlpha;if(b.mediaObject.backgroundAlpha!=""){if(b.mediaObject.backgroundAlpha>1){c=(b.mediaObject.backgroundAlpha/100)}}else{c=0}a+="background:rgba("+d+","+c+");";b.element.dom.style.border="none";if(b.mediaObject.showBorder){a+="border:1px solid #"+b.mediaObject.borderColor+";"}b.styleString+=a;b.setStyle(b.styleString)},getPrefix:function(){var a=window.getComputedStyle(document.documentElement,"");pre=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||(a.OLink===""&&["","o"]))[1];return{lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}},appean))}},fadeInAnim:function(){var a=this;switch(a.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes fadeIn { 0%{ opacity:0; } 100%{ opacity:1; } }",0);a.element.dom.style.webkitAnimation="fadeIn "+a.mediaObject.duration+"s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes fadeIn { 0%{ opacity:0; } 100%{ opacity:1; } }",0);a.element.dom.style.animation="fadeIn "+a.mediaObject.duration+"s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes fadeIn { 0%{ opacity:0; } 100%{ opacity:1; } }",0);a.element.dom.style.mozAnimation="fadeIn "+a.mediaObject.duration+"s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes fadeIn { 0%{ opacity:0; } 100%{ opacity:1; } }",0);a.element.dom.style.msAnimation="fadeIn "+a.mediaObject.duration+"s forwards";break;default:document.styleSheets[0].insertRule("@keyframes fadeIn { 0%{ opacity:0; } 100%{ opacity:1; } }",0);a.element.dom.style.animation="fadeIn "+a.mediaObject.duration+"s forwards";break}},flyInAnim:function(){var b=this;var c="LEFT";var a="flyInLeft";if(b.mediaObject.entryDir!=null&&b.mediaObject.entryDir!=""&&b.mediaObject.entryDir!="NONE"){c=b.mediaObject.entryDir}switch(c){case"LEFT":a="flyInLeft";break;case"TOP":a="flyInTop";break;case"RIGHT":a="flyInRight";break;case"BOTTOM":a="flyInBottom";break}switch(b.getPrefix().css){case"-webkit-":b.element.dom.style.webkitAnimation=a+" "+b.duration+"s forwards";break;case"-moz-":if(Ext.os.is.Desktop){b.element.dom.style.animation=a+" "+b.duration+"s 0s forwards"}else{b.element.dom.style.mozAnimation=a+" "+b.duration+"s forwards"}break;case"-ms-":b.element.dom.style.msAnimation=a+" "+b.duration+"s forwards";break;default:b.element.dom.style.animation=a+" "+b.duration+"s forwards"}},bounceInAnim:function(){var c=this;var a=c.element.dom.style.left;if(a.indexOf("%")!=-1){a=parseFloat(a.substring(0,a.length-1))-30;a=a+"%"}var d=c.element.dom.style.left;if(d.indexOf("%")!=-1){d=parseFloat(d.substring(0,d.length-1))-15;d=d+"%"}var b=c.element.dom.style.left;if(b.indexOf("%")!=-1){b=parseFloat(b.substring(0,b.length-1))-7;b=b+"%"}var e=c.element.dom.style.left;if(e.indexOf("%")!=-1){e=parseFloat(e.substring(0,e.length-1))-2;e=e+"%"}switch(c.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes bounceIn { 0%{ -webkit-transform:translate3d(-300%,0px,0px);opacity:0.2; } 30%{ -webkit-transform:translate3d(0%,0px,0px);opacity:1; }  50%{ -webkit-transform:translate3d("+a+",0px,0px);opacity:1; }  65%{ -webkit-transform:translate3d(0%,0px,0px);opacity:1; }  75%{ -webkit-transform:translate3d("+d+",0px,0px);opacity:1; }  87%{ -webkit-transform:translate3d(0%,0px,0px);opacity:1; }  92%{ -webkit-transform:translate3d("+b+",0px,0px);opacity:1; } 95%{ -webkit-transform:translate3d(0%,0px,0px);opacity:1; } 97%{ -webkit-transform:translate3d("+e+",0px,0px);opacity:1; } 100%{ opacity:1; } }",0);c.element.dom.style.webkitAnimation="bounceIn "+c.mediaObject.duration+"s linear forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes bounceIn { 0%{ transform:translate3d(-300%,0px,0px);opacity:0.2; } 30%{ transform:translate3d(0%,0px,0px);opacity:1; }  50%{ transform:translate3d("+a+",0px,0px);opacity:1; }  65%{ transform:translate3d(0%,0px,0px);opacity:1; }  75%{ transform:translate3d("+d+",0px,0px);opacity:1; }  87%{ transform:translate3d(0%,0px,0px);opacity:1; }  92%{ transform:translate3d("+b+",0px,0px);opacity:1; } 95%{ transform:translate3d(0%,0px,0px);opacity:1; } 97%{ transform:translate3d("+e+",0px,0px);opacity:1; } 100%{ opacity:1; } }",0);c.element.dom.style.animation="bounceIn "+c.mediaObject.duration+"s linear forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes bounceIn { 0%{ -moz-transform:translate3d(-300%,0px,0px);opacity:0.2; } 30%{ -moz-transform:translate3d(0%,0px,0px);opacity:1; }  50%{ -moz-transform:translate3d("+a+",0px,0px);opacity:1; }  65%{ -moz-transform:translate3d(0%,0px,0px);opacity:1; }  75%{ -moz-transform:translate3d("+d+",0px,0px);opacity:1; }  87%{ -moz-transform:translate3d(0%,0px,0px);opacity:1; }  92%{ -moz-transform:translate3d("+b+",0px,0px);opacity:1; } 95%{ -moz-transform:translate3d(0%,0px,0px);opacity:1; } 97%{ -moz-transform:translate3d("+e+",0px,0px);opacity:1; } 100%{ opacity:1; } }",0);c.element.dom.style.mozAnimation="bounceIn "+c.mediaObject.duration+"s linear forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes bounceIn { 0%{ -ms-transform:translate3d(-300%,0px,0px);opacity:0.2; } 30%{ -ms-transform:translate3d(0%,0px,0px);opacity:1; }  50%{ -ms-transform:translate3d("+a+",0px,0px);opacity:1; }  65%{ -ms-transform:translate3d(0%,0px,0px);opacity:1; }  75%{ -ms-transform:translate3d("+d+",0px,0px);opacity:1; }  87%{ -ms-transform:translate3d(0%,0px,0px);opacity:1; }  92%{ -ms-transform:translate3d("+b+",0px,0px);opacity:1; } 95%{ -ms-transform:translate3d(0%,0px,0px);opacity:1; } 97%{ -ms-transform:translate3d("+e+",0px,0px);opacity:1; } 100%{ opacity:1; } }",0);c.element.dom.style.msAnimation="bounceIn "+c.mediaObject.duration+"s linear forwards";break;default:document.styleSheets[0].insertRule("@keyframes bounceIn { 0%{ transform:translate3d(-300%,0px,0px);opacity:0.2; } 30%{ transform:translate3d(0%,0px,0px);opacity:1; }  50%{ transform:translate3d("+a+",0px,0px);opacity:1; }  65%{ transform:translate3d(0%,0px,0px);opacity:1; }  75%{ transform:translate3d("+d+",0px,0px);opacity:1; }  87%{ transform:translate3d(0%,0px,0px);opacity:1; }  92%{ transform:translate3d("+b+",0px,0px);opacity:1; } 95%{ transform:translate3d(0%,0px,0px);opacity:1; } 97%{ transform:translate3d("+e+",0px,0px);opacity:1; } 100%{ opacity:1; } }",0);c.element.dom.style.animation="bounceIn "+c.mediaObject.duration+"s linear forwards"}},elasticIn:function(){var e=this;var h=e.element.dom.style.left;if(h.indexOf("%")!=-1){h=parseFloat(h.substring(0,h.length))-150;h=h+"%"}var f=e.element.dom.style.left;if(f.indexOf("%")!=-1){f=parseFloat(f.substring(0,f.length))+75;f=f+"%"}var b=e.element.dom.style.left;if(b.indexOf("%")!=-1){b=parseFloat(b.substring(0,b.length))-50;b=b+"%"}var g=e.element.dom.style.left;if(g.indexOf("%")!=-1){g=parseFloat(g.substring(0,g.length))+50;g=g+"%"}var c=e.element.dom.style.left;if(c.indexOf("%")!=-1){c=parseFloat(c.substring(0,c.length))-25;c=c+"%"}var j=e.element.dom.style.left;if(j.indexOf("%")!=-1){j=parseFloat(j.substring(0,j.length))+25;j=j+"%"}var d=e.element.dom.style.left;if(d.indexOf("%")!=-1){d=parseFloat(d.substring(0,d.length))-12;d=d+"%"}var a=e.element.dom.style.left;if(a.indexOf("%")!=-1){a=parseFloat(a.substring(0,a.length))+12;a=a+"%"}switch(e.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes elasticIn { 0%{-webkit-transform:translate3d(-300%,0px,0px);opacity:1;} 12%{-webkit-transform:translate3d("+f+",0px,0px);opacity:1;} 25%{-webkit-transform:translate3d("+b+",0px,0px);opacity:1;} 37%{-webkit-transform:translate3d("+g+",0px,0px);opacity:1;} 50%{-webkit-transform:translate3d("+c+",0px,0px);opacity:1;} 62%{-webkit-transform:translate3d("+j+",0px,0px);opacity:1;} 75%{ -webkit-transform:translate3d("+d+",0px,0px);opacity:1;} 87%{ -webkit-transform:translate3d("+a+",0px,0px);opacity:1;} 100%{-webkit-transform:translate3d(0%,0px,0px);opacity:1;} }",0);e.element.dom.style.webkitAnimation="elasticIn "+e.mediaObject.duration+"s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes elasticIn { 0%{transform:translate3d(-300%,0px,0px);opacity:1;} 12%{transform:translate3d("+f+",0px,0px);opacity:1;} 25%{transform:translate3d("+b+",0px,0px);opacity:1;} 37%{transform:translate3d("+g+",0px,0px);opacity:1;} 50%{transform:translate3d("+c+",0px,0px);opacity:1;} 62%{transform:translate3d("+j+",0px,0px);opacity:1;} 75%{ transform:translate3d("+d+",0px,0px);opacity:1;} 87%{ transform:translate3d("+a+",0px,0px);opacity:1;} 100%{transform:translate3d(0%,0px,0px);opacity:1;} }",0);e.element.dom.style.animation="elasticIn "+e.mediaObject.duration+"s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes elasticIn { 0%{-moz-transform:translate3d(-300%,0px,0px);opacity:1;} 12%{-moz-transform:translate3d("+f+",0px,0px);opacity:1;} 25%{-moz-transform:translate3d("+b+",0px,0px);opacity:1;} 37%{-moz-transform:translate3d("+g+",0px,0px);opacity:1;} 50%{-moz-transform:translate3d("+c+",0px,0px);opacity:1;} 62%{-moz-transform:translate3d("+j+",0px,0px);opacity:1;} 75%{ -moz-transform:translate3d("+d+",0px,0px);opacity:1;} 87%{ -moz-transform:translate3d("+a+",0px,0px);opacity:1;} 100%{-moz-transform:translate3d(0%,0px,0px);opacity:1;} }",0);e.element.dom.style.mozAnimation="elasticIn "+e.mediaObject.duration+"s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes elasticIn { 0%{-ms-transform:translate3d(-300%,0px,0px);opacity:1;} 12%{-ms-transform:translate3d("+f+",0px,0px);opacity:1;} 25%{-ms-transform:translate3d("+b+",0px,0px);opacity:1;} 37%{-ms-transform:translate3d("+g+",0px,0px);opacity:1;} 50%{-ms-transform:translate3d("+c+",0px,0px);opacity:1;} 62%{-ms-transform:translate3d("+j+",0px,0px);opacity:1;} 75%{ -ms-transform:translate3d("+d+",0px,0px);opacity:1;} 87%{ -ms-transform:translate3d("+a+",0px,0px);opacity:1;} 100%{-ms-transform:translate3d(0%,0px,0px);opacity:1;} }",0);e.element.dom.style.msAnimation="elasticIn "+e.mediaObject.duration+"s forwards";break;default:document.styleSheets[0].insertRule("@keyframes elasticIn { 0%{transform:translate3d(-300%,0px,0px);opacity:1;} 12%{transform:translate3d("+f+",0px,0px);opacity:1;} 25%{transform:translate3d("+b+",0px,0px);opacity:1;} 37%{transform:translate3d("+g+",0px,0px);opacity:1;} 50%{transform:translate3d("+c+",0px,0px);opacity:1;} 62%{transform:translate3d("+j+",0px,0px);opacity:1;} 75%{ transform:translate3d("+d+",0px,0px);opacity:1;} 87%{ transform:translate3d("+a+",0px,0px);opacity:1;} 100%{transform:translate3d(0%,0px,0px);opacity:1;} }",0);e.element.dom.style.animation="elasticIn "+e.mediaObject.duration+"s forwards"}},removeak}},flyOutAnim:function(){var b=this;var c="LEFT";var a="flyOutLeft";if(b.mediaObject.entryDir!=null&&b.mediaObject.entryDir!=""&&b.mediaObject.entryDir!="NONE"){c=b.mediaObject.entryDir}switch(c){case"LEFT":a="flyOutLeft";break;case"TOP":a="flyOutTop";break;case"RIGHT":a="flyOutRight";break;case"BOTTOM":a="flyOutBottom";break}switch(b.getPrefix().css){case"-webkit-":b.element.dom.style.webkitAnimation=a+" "+b.duration+"s forwards";break;case"-moz-":if(Ext.os.is.Desktop){b.element.dom.style.animation=a+" "+b.duration+"s forwards"}else{b.element.dom.style.mozAnimation=a+" "+b.duration+"s forwards"}break;case"-ms-":b.element.dom.style.msAnimation=a+" "+b.duration+"s forwards";break;default:b.element.dom.style.animation=a+" "+b.duration+"s forwards";break}setTimeout(function(){b.hide()},b.durationMili)},fadeOutAnim:function(){var a=this;switch(a.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes fadeOut { 0%{ opacity:1; } 100%{ opacity:0; } }",0);a.element.dom.style.webkitAnimation="fadeOut "+a.mediaObject.duration+"s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes fadeOut { 0%{ opacity:1; } 100%{ opacity:0; } }",0);a.element.dom.style.animation="fadeOut "+a.mediaObject.duration+"s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes fadeOut { 0%{ opacity:1; } 100%{ opacity:0; } }",0);a.element.dom.style.mozAnimation="fadeOut "+a.mediaObject.duration+"s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes fadeOut { 0%{ opacity:1; } 100%{ opacity:0; } }",0);a.element.dom.style.msAnimation="fadeOut "+a.mediaObject.duration+"s forwards";break;default:document.styleSheets[0].insertRule("@keyframes fadeOut { 0%{ opacity:1; } 100%{ opacity:0; } }",0);a.element.dom.style.animation="fadeOut "+a.mediaObject.duration+"s forwards";break}},setupFlash:function(){var d=this;if(d.mediaObject.flash=="true"||d.mediaObject.flash){var c=hexToRgb(d.mediaObject.backgroundColor);var e=d.mediaObject.backgroundAlpha;var b="infinite";var a=true;if(d.mediaObject.flashOnce=="true"&&d.mediaObject.backgroundAlpha==0){a=false;b=(d.mediaObject.flashSpeed*2)+"s"}else{if(d.mediaObject.flashOnce=="true"){b=(d.mediaObject.flashSpeed*2)+"s forwards"}}switch(d.getPrefix().css){case"-webkit-":d.styleString+="-webkit-animation: flash "+(d.mediaObject.flashSpeed*2)+"s "+b+";";break;case"-moz-":if(Ext.os.is.Desktop){d.styleString+="animation: flash "+(d.mediaObject.flashSpeed*2)+"s "+b+";"}else{d.styleString+="-moz-animation: flash "+(d.mediaObject.flashSpeed*2)+"s "+b+";"}break;case"-ms-":d.styleString+="-ms-animation: flash "+(d.mediaObject.flashSpeed*2)+"s "+b+";";break;default:d.styleString+="animation: flash "+(d.mediaObject.flashSpeed*2)+"s "+b+";";break}}}},0,["readermediaobject"],["component","container","readermediaobject"],{component:true,container:true,readermediaobject:true},["widget.readermediaobject"],0,[InfinityMobile.view,"ReaderMediaObject"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderAudioMediaObject",InfinityMobile.view.ReaderMediaObject,{config:{mediaObject:"",style:"border-radius:10px;display:inline-block !important;",height:"100%",width:"100%",items:[{itemId:"controlPanel",height:"100%",width:"100%",style:"padding:3%;",items:[{cls:"audioControl",itemId:"play",height:"100%",width:"30%",style:'background:url("resources/images/play-ic.png") black;background-size:80% 80%;background-position:center;background-repeat:no-repeat;border-radius:10px;display:inline-block !important;',isPlaying:false},{width:"5%",height:"100%"},{cls:"audioControl",itemId:"stop",height:"100%",width:"30%",style:'background:url("resources/images/back-to-start-ic.png") black;background-size:80% 80%;background-position:center;background-repeat:no-repeat;border-radius:10px;display:inline-block !important;'},{width:"5%",height:"100%"},{cls:"audioControl",itemId:"mute",height:"100%",width:"30%",style:'background:url("resources/images/unmute-ic.png") black;background-size:80% 80%;background-position:center;background-repeat:no-repeat;border-radius:10px;display:inline-block !important;'}]},{itemId:"closeBtn",right:10,top:-25,height:25,style:"background-color:#e1e1e1",html:"<div style='margin-right:28px; margin-left:5px; padding-top:5px; font-size:12px'>Close</div>",items:[{top:2,right:5,width:20,height:20,cls:"backgroundImage",style:'background-image:url("../assets/article view/article-close-btn.png");background-size:contain;'}]}]},initialize:function(){var a=this;InfinityMobile.view.ReaderMediaObject.prototype.initialize.apply(this,arguments);a.controlPanel=a.getComponent("controlPanel");a.playBtn=a.controlPanel.getComponent("play");a.stopBtn=a.controlPanel.getComponent("stop");a.muteBtn=a.controlPanel.getComponent("mute");a.loadSound();if(a.config.page!=null){a.page=a.config.page}a.playBtn.element.on({tap:a.playSound,scope:a});a.stopBtn.element.on({tap:a.stopSound,scope:a});a.muteBtn.element.on({tap:a.muteSound,scope:a});a.getComponent("closeBtn").element.on(de()});if(a.mediaObject.remove!="CLOSEBTN"){a.getComponent("closeBtn").hide()}if(Ext.os.is.Desktop){if(a.mediaObject.autoPlay=="true"){a.fireEvent("checkActivePage",a)}}a.audioFile.onack"}},loadSound:function(){var b=this;b.fileGuid=b.mediaObject.file;var c=b.fileGuid.substr(0,1);var a=b.fileGuid.substr(1,1);var d="http://source.pagesuite.com/media/"+c+"/"+a+"/"+b.fileGuid+".mp3";b.audioFile=new Audio(d)},playck"}},stopack"},muteck"}}},0,["readeraudiomediaobject"],["component","container","readermediaobject","readeraudiomediaobject"],{component:true,container:true,readermediaobject:true,readeraudiomediaobject:true},["widget.readeraudiomediaobject"],0,[InfinityMobile.view,"ReaderAudioMediaObject"],0));(Ext.cmd.derive("InfinityMobile.view.ArticleSectionItemImg",Ext.Container,{config:{height:"100%",width:350,layout:"vbox",style:"border:5px solid transparent;",items:[{itemId:"image",height:160,style:"border:5px solid transparent;"},{itemId:"bodyContainer",height:190,style:"color:white;font-size:15px;border:5px solid transparent;overflow:hidden;"}]},initialize:function(){var a=this;a.image=a.getComponent("image");a.bodyContainer=a.getComponent("bodyContainer");if(a.config.article!=null){a.article=a.config.article}if(a.config.container!=null){a.container=a.config.container}a.loadArticle();a.element.on({tap:a.onTap,scope:a});a.imageLoaded=false},loadImage:function(){var b=this;var a="cover";if(settings.reader.thumbnailImageMode!=null){if(settings.reader.thumbnailImageMode=="fit"){a="contain"}}if(!b.imageLoaded){if(b.article.images[0]!=null){b.article.images[0].url=b.article.images[0].url.replace(/ /g,"%20")}$(b.image.element.dom).css("background-image","url(image_resize.aspx?w=350&url="+b.article.images[0].url+")");$(b.image.element.dom).css("background-size",a);$(b.image.element.dom).css("background-position","center");$(b.image.element.dom).css("background-repeat","no-repeat");$(b.image.element.dom).css("background-color","gray");$(b.image.element.dom).css("border","");if(a=="contain"){b.imageDummy=new Image();b.imageDummy.src=b.article.images[0].url;b.imageDummy.onload=function(){var c=b.imageDummy.naturalWidth/b.imageDummy.naturalHeight;if(c>1.75){$(b.image.element.dom).css("background-size","cover");$(b.image.element.dom).css("background-position","50% 0%")}}}b.imageLoaded=true}},loadArticle:function(){var d=this;var c=Ext.getStore("SettingStore").data.items[0].raw;if(c.topbar.smallLogo!=null){var e=c.topbar.smallLogo;var f=true}else{var e=c.topbar.logo;var f=false}if(c.topbar.backgroundColor!=null){var a="#"+c.topbar.backgroundColor}else{var a="transparent"}$(d.image.element.dom).css("background","url('"+e+"')");$(d.image.element.dom).css("background-repeat","no-repeat");$(d.image.element.dom).css("background-position","center");if(!f){$(d.image.element.dom).css("background-size","contain")}$(d.image.element.dom).css("background-color","gray");var b=document.createElement("div");b.innerHTML=d.article.body;d.bodyContainer.setHtml("<div class='articleItem' style='line-height:20px;oveflow:hidden;' ><b style='font-size:18px !important;'>"+d.article.headline+"</b><br />"+d.article.shortStory+"</div>")},onTap:function(){var a=this;console.log("TAP IMAGE ARTICLE");a.fireEvent("jumpToPage",a.article.pageNumber-1);a.fireEvent("articleClick",a.article,a.article.guid);a.container.articleTabTap()}},0,["articlesectionitemimg"],["component","container","articlesectionitemimg"],{component:true,container:true,articlesectionitemimg:true},["widget.articlesectionitemimg"],0,[InfinityMobile.view,"ArticleSectionItemImg"],0));(Ext.cmd.derive("InfinityMobile.view.ArticleSectionItem",Ext.Container,{config:{height:"100%",width:350,layout:"vbox",style:"border:5px solid transparent;",items:[{itemId:"bodyContainer1",height:180,style:"color:white;font-size:15px;border:5px solid transparent;overflow:hidden;"},{itemId:"bodyContainer2",height:170,style:"color:white;font-size:15px;border:5px solid transparent;overflow:hidden;"}]},initi:a})},loadArticles:function(){var a=this;a.body1.setHtml("<div class='articleItem1' style='line-height:20px;overflow:hidden;height:140px;'><b style='font-size:18px !important;'>"+a.article1.headline+"</b><br />"+a.article1.shortStory+"</div>");if(a.article2!=null){a.body2.setHtml("<div class='articleItem2' style='line-height:20px;overflow:hidden;height:140px;'><b style='font-size:18px !important;'>"+a.article2.headline+"</b><br />"+a.article2.shortStory+"</div>")}},returnBodrn g},bodap()},body2Tap:function(){var a=this;if(a.article2!=null){console.log("ARTICLE BOTTOM TAP");a.fireEvent("jumpToPage",a.article2.pageNumber-1);a.fireEvent("articleClick",a.article2,a.article2.guid);a.container.articleTabTap()}}},0,["articlesectionitem"],["component","container","articlesectionitem"],{component:true,container:true,articlesectionitem:true},["widget.articlesectionitem"],0,[InfinityMobile.view,"ArticleSectionItem"],0));(Ext.cmd.derive("InfinityMobile.view.ArticlesSectionContainer",Ext.Container,{config:{height:400,layout:"vbox",style:"margin-left:15px solid transparent !important;margin-right:15px solid transparent !important;",items:[{itemId:"sectionBody",height:360,layout:"hbox"}]},inities()},loadArticles:function(){var d=this;for(var c=0;c<d.articles.length;c++){if(d.articles[c].images.length>0){var e=Ext.create("InfinityMobile.view.ArticleSectionItemImg",{article:d.articles[c],container:d.container});d.sectionBody.add(e)}else{var a=false;if(d.articles[c+1]!=null){if(d.articles[c+1].images.length>0){var b=null}else{var b=d.articles[c+1];a=true}}else{var b=null}var e=Ext.create("InfinityMobile.view.ArticleSectionItem",{article1:d.articles[c],article2:b,container:d.container});d.sectionBody.add(e);if(a){c++}}}}},0,["articlesectioncontainer"],["component","container","articlesectioncontainer"],{component:true,container:true,articlesectioncontainer:true},["widget.articlesectioncontainer"],0,[InfinityMobile.view,"ArticlesSectionContainer"],0));(Ext.cmd.derive("InfinityMobile.view.ArticlesContainer",Ext.Container,{config:{width:"100%",height:440,zIndex:100000,bottom:-40,items:[{itemId:"tab",cls:"pagesTab",height:40,left:0,top:-40,style:"background-color:rgba(0,0,0,0.8);border-top-right-radius:10px;color: white;",layout:"hbox",items:[{cls:"browserBtn",itemId:"pages",padding:12,height:40,style:"min-width:100px;text-align:center;font-size:11pt;"},{cls:"browserBtn",itemId:"articles",padding:12,height:40,style:"min-width:100px;text-align:center;font-size:11pt;"}]},{itemId:"sectionToolbar",width:"100%",height:40,top:0,layout:"hbox",cls:"section-toolbar",style:"background-color:rgba(0,0,0,0.8);border-bottom:1px solid gray;overflow:hidden;",items:[{itemId:"previousBtn",height:40,width:40,style:'border-right:1px solid gray;background-size:60% 50%;background-repeat:no-repeat;background-position:center;background-image:url("../assets/reader icons/back.png");',cls:"pointerCursor"},{itemId:"sectionArea",height:40,width:"100%",layout:"hbox",style:"overflow:hidden;"},{itemId:"nextBtn",height:40,width:40,right:80,style:'border-left:1px solid gray;background-size:60% 50%;background-repeat:no-repeat;background-position:center;background-image:url("../assets/reader icons/next.png");',cls:"pointerCursor"},{itemId:"expandBtn",cls:"pointerCursor",height:40,width:"40px",right:40,style:'border-left:1px solid gray;background-image:url("resources/images/reader icons/expand ic.png");background-size:60% 50%;background-repeat:no-repeat;background-position:center;'},{itemId:"closeBtn",cls:"pointerCursor",height:40,width:"40px",right:0,style:'border-left:1px solid gray;background-image:url("resources/images/reader icons/close btn.png");background-size:60% 50%;background-repeat:no-repeat;background-position:center;'}]},{itemId:"con",cls:"articles-pages-container",layout:"hbox",top:40,style:"background-color:rgba(0,0,0,0.8);",width:"100%",height:"370px"}]},initialize:function(){var b=this;b.sectionIndex=null;var a=false;if(settings.newsday!=null){if(settings.newsday.customArticlesContainer=="true"){a=true}}b.articlesHeight=400;b.tab=b.getComponent("tab");b.pagesTab=b.tab.getComponent("pages");b.pagesTabText=b.pagesTab.element.down("p");b.articleTabText=b.tab.getComponent("articles").element.down("p");b.pagesTab=b.tab.getComponent("pages");b.articleTab=b.tab.getComponent("articles");b.sectionToolbar=b.getComponent("sectionToolbar");b.sectionArea=b.sectionToolbar.getComponent("sectionArea");b.closeBtn=b.sectionToolbar.getComponent("closeBtn");b.expandBtn=b.sectionToolbar.getComponent("expandBtn");b.nextBtn=b.sectionToolbar.getComponent("nextBtn");b.previousBtn=b.sectionToolbar.getComponent("previousBtn");b.contentArea=b.getComponent("con");if(b.config.articles!=null){b.articles=b.config.articles}if(b.config.sections!=null){b.sections=b.config.sections}if(b.config.mode!=null){b.mode=b.config.mode}b.setupBrowser();var c=((navigator.maxTouchPoints)?true:false);if(Ext.browser.is.Firefox&&!c){setTimeout(function(){var d=$(b.contentArea.element.dom).jScrollPane();b.scrollApi=d.data("jsp");$(b.contentArea.element.dom).bind("jsp-scrog(f)});$(b.contentArea.element.dom).on("DOMMouseScroll",function(e){if(e.originalEvent.detail){b.scrollApi.scrollByX(e.originalEvent.detail*15)}})},1000)}},firefoxScrolling:function(c){var b=this;var a={position:{x:c}};b.onScroll(a)},setupBrowser:function(){var a=this;a.checkPages();a.pagesHeight=180;a.scrollType=a.setUpScrolling();a.offset=0;a.checkMode();a.sortSections();a.checkArticles();a.checkScroller();a.setupTabListeners();a.setUpSectionNavigation();a.deviceSetup()},devicedown},setUpSectionNavigation:function(){var a=this;if(a.sections.length>1){a.nextBtn.element.on({tap:a.nextSection,scope:a});a.previousBtn.element.on({tap:a.previousSection,scope:a})}else{a.nextBtn.hide();a.previousBtn.hide()}},getActiveSern a},nextSection:function(){var g=this;var b=g.getActiveSection();var f=g.sectionArea.items.items;var e=parseInt(b.pos)+1;if(e<f.length){var d=f[e];g.sectionTap(d,g);var h=d.element.dom.offsetLeft;var a=g.sectionArea.getScrollable().getScroller();var c=a.position.x}},previousSec,e)},scrollSectionsArea:function(k,h){var e=this;if(k!=null){var b=k.element.dom.offsetLeft;var g=e.sectionArea.getScrollable();if(g!=null&&g.getScroller()!=null){var d=g.getScroller();var c=d.position.x;if(h=="back"){if(c+40>b){var a=Math.max(b-10,0);d.scrollTo(a)}}else{if(h=="next"){var l=$(k.element.dom).width()+b;var j=($(document).width()-120);if(j+c<l){var f=(l+10)-j;var a=Math.min(f,d.maxPosition.x);d.scrollTo(a)}}}}}},setupTabListeners:function(){var a=this;a.articleTab.element.on({tap:a.articleTabTap,scope:a});a.pagesTab.element.on({tap:a.pagesTabTap,scope:a});a.element.on({hide:a.hideMe,scope:a});a.closeBtn.element.on({tap:a.hide,scope:a});a.expandBtn.element.on({tap:a.expand,scope:a})},checkScroller:function(){var a=this;if(!Ext.browser.is.Firefox){if(a.scrollType=="senchaScroller"){a.getComponent("con").getScrollable().getScroller().on({scroll:a.onScroll,scope:a})}}if(a.sectionArea.getScrollable()==null){a.sectionArea.setScrollable({direction:"horizontal"})}},checkPages:function(){var a=this;if(settings.menu!=null&&settings.menu.hidePages!=null){a.pagesTab.hide()}else{a.pagesTab.setHtml(language.articlesContainer.pages)}},checkArticles:function(){var a=this;if(a.articles.length>0&&settings.articles!=null){a.display="articles";a.articleTab.setHtml(language.articlesContainer.articles);a.loadContainer()}else{a.display="articles";a.mode="start";a.pagesTabTap();a.articleTab.hide()}},setUpScrolling:function(){var a=this;if(currentProfile=="desktop"){if(navigator.maxTouchPoints){a.contentArea.setScrollable({direction:"horizontal"});return"senchaScroller"}else{a.contentArea.element.dom.style.overflowX="auto";a.contentArea.element.dom.style.overflowY="hidden";a.articlesHeight=410;a.setBottom(-30);a.contentArea.element.dom.style.transition="0.1s ease all";if(!Ext.browser.is.Firefox){$(a.contentArea.element.dom).on({scroll:function(b){a.onDesktopScroll(b)}})}a.element.dom.onmouse=0}}};if(Ext.browser.is.Firefox){a.element.dom.addEventListener("DOMMouseSc=0}}})}return"desktopScroller"}}else{a.contentArea.setScrollable({direction:"horizontal"});return"senchaScroller"}},sortSections:function(){var d=this;var f=[];var b;for(var c=0;c<d.sections.length;c++){var e=d.sections[c];for(var a=0;a<d.sections.length;a++){if(parseFloat(e.pageNumber)<parseFloat(d.sections[a].pageNumber)){b=d.sections[c];d.sections[c]=d.sections[a];d.sections[a]=b}}}},checx)"}},loadContainer:function(){var e=this;if(e.sections.length>0){var g=[];if(e.sections[0].pageNumber>1){e.sections.unshift({page:1,pageNumber:1,name:""})}for(var c=0;c<e.sections.length;c++){var d=[];var b=parseInt(e.sections[c].page);for(var a=0;a<e.articles.length;a++){if(e.sections[c+1]!=null){if(e.articles[a].pageNumber>=b&&e.articles[a].pageNumber<parseInt(e.sections[c+1].page)){d.push(e.articles[a])}}else{if(e.articles[a].pageNumber>=b){d.push(e.articles[a])}}}if(d.length>0){var f=Ext.create("InfinityMobile.view.ArticlesSectionContainer",{section:e.sections[c],articles:d,container:e});e.getComponent("con").add(f)}}}else{var f=Ext.create("InfinityMobile.view.ArticlesSectionContainer",{section:"All",articles:e.articles,container:e});e.getComponent("con").add(f)}},loadSectionsBtns:function(){var g=this;g.sectionArea.removeAll();var e=0;for(var d=0;d<g.sections.length;d++){if(d==0){var b="white";var j=true}else{var b="gray";var j=false}if(g.articles.length>0){var c=[];var f=parseInt(g.sections[d].page);for(var h=0;h<g.articles.length;h++){if(g.sections[d+1]!=null){if(g.articles[h].pageNumber>=f&&g.articles[h].pageNumber<parseInt(g.sections[d+1].page)){c.push(g.articles[h])}}else{if(g.articles[h].pageNumber>=f){c.push(g.articles[h])}}}if(c.length>0){var a=Ext.create("Ext.Container",{cls:"browserBtn",height:40,html:g.sections[d].name.trim(),style:"color:"+b+";font-size:18px;font-weight:bold;margin:10px;white-space:nowrap;",position:e,articleContainer:g,isActive:j});g.sectionArea.add(a);a.element.on({tap:function(){g.sectionTap(this,this.config.articleContainer)},painted:function(){var l=this.config.articleContainer;var k=l.sectionArea.items.items[this.config.position].element.down("div").down("div").dom.clientWidth;this.setWidth(k)},scope:a});e+=1}}else{if(g.sections.length>0){var a=Ext.create("Ext.Panel",{cls:"browserBtn",height:40,html:g.sections[d].name.trim(),style:"color:"+b+";font-size:18px;font-weight:bold;margin:10px;white-space:nowrap;",position:e,articleContainer:g,isActive:j});g.sectionArea.add(a);a.element.on({tap:function(){g.sectionTap(this,this.config.articleContainer)},painted:function(){var l=this.config.articleContainer;var k=l.sectionArea.items.items[this.config.position].element.down("div").down("div").dom.clientWidth;this.setWidth(k)},scope:a});e+=1}}}},setActiveSections:function(b,h){var d=this;var f=d.getActiveSection();for(var c=0;c<d.sectionArea.items.items.length;c++){var g=d.sectionArea.items.items[c];if(g!=null){$(g.element.dom).css("color","gray");g.config.isActive=false}}for(var c=b;c<=h;c++){var g=d.sectionArea.items.items[c];if(g!=null){$(g.element.dom).css("color","white");g.config.isActive=true}}var a=d.getActiveSection();var e="back";if(a.pos>f.pos){e="next"}d.scrollSectionsArea(a.sectionBtn,e)},loadSectionBtnsPages:function(){var e=this;e.sectionArea.removeAll();var d=0;for(var b=0;b<e.sections.length;b++){if(b==0){var a="white";var c=true}else{var a="gray";var c=false}var f=Ext.create("Ext.Panel",{cls:"browserBtn",height:40,html:e.sections[b].name.trim(),style:"color:"+a+";font-size:18px;font-weight:bold;margin:10px;white-space:nowrap;",position:d,articleContainer:e,isActive:c});e.sectionArea.add(f);f.element.onner)},pah(g)},scope:f});d+=1}},onDesktopScroll:function(m){var n=this;if(n.mode=="articles"){if(n.contentArea.element.dom.scrollLeft>0){var l=0;var h;for(var j=0;j<n.getComponent("con").items.items.length;j++){var d=n.getComponent("con").items.items[j].element.dom.offsetLeft;if(n.getComponent("con").items.items[j+1]!=null){var a=n.getComponent("con").items.items[j+1].element.dom.offsetLeft;if(n.contentArea.element.dom.scrollLeft>=d&&parseInt(n.contentArea.element.dom.scrollLeft)<parseInt(a)){l=j;h=d;break}}else{l=j;h=d;break}}var k=0;for(var j=l;j<n.getComponent("con").items.items.length;j++){if(n.contentArea.element.dom.scrollLeft+$(document).width()>=parseFloat(n.getComponent("con").items.items[j].element.dom.offsetLeft)){k=j}}n.setActiveSections(l,k);var p=n.contentArea.getItems().items;for(var j=l;j<=k;j++){var c=p[j].items.items[0].items.items;for(var o=0;o<c.length;o++){if((n.contentArea.element.dom.scrollLeft-350<=c[o].element.dom.offsetLeft&&n.contentArea.element.dom.scrollLeft+$(document).width()>=c[o].element.dom.offsetLeft)||c[o].element.dom.offsetLeft==0){if(c[o].loadImage!=null){c[o].loadImage()}}}}}else{l=0;var k=0;for(var j=l;j<n.getComponent("con").items.items.length;j++){if(n.contentArea.element.dom.scrollLeft+$(document).width()>=parseFloat(n.getComponent("con").items.items[j].element.dom.offsetLeft)){k=j}}n.setActiveSections(l,k)}}else{if(n.mode=="pages"){if(n.contentArea.element.dom.scrollLeft>0){var l=0;var f=[];for(var j=0;j<n.sectionArea.getItems().length;j++){var g=n.getComponent("con").items.items[0].items.items[n.sections[j].page-1];if(g!=null){f[j]=g.element.dom.offsetLeft}}for(var j=0;j<=f.length;j++){if(f[j+1]!=null){if(parseInt(n.contentArea.element.dom.scrollLeft)>=parseInt(f[j])&&parseInt(n.contentArea.element.dom.scrollLeft)<parseInt(f[j+1])){l=j;break}}else{l=j;break}}var k=0;for(var j=l;j<f.length;j++){if(n.contentArea.element.dom.scrollLeft+$(document).width()>=parseFloat(f[j])){k=j}}n.setActiveSections(l,k);var b=n.contentArea.getItems().items[0].innerItems;for(var j=0;j<b.length;j++){if((n.contentArea.element.dom.scrollLeft<=b[j].element.dom.offsetLeft&&n.contentArea.element.dom.scrollLeft+$(document).width()>=b[j].element.dom.offsetLeft)||b[j].element.dom.offsetLeft==0){if(b[j].loadImage!=null){b[j].loadImage()}}}}else{l=0;var k=0;var f=[];for(var j=0;j<n.sections.length;j++){var g=n.getComponent("con").items.items[0].items.items[n.sections[j].page];if(g!=null){f[j]=g.element.dom.offsetLeft}}for(var j=l;j<f.length;j++){if(n.contentArea.element.dom.scrollLeft+$(document).width()>=parseFloat(f[j]-150)){k=j}}n.setActiveSections(l,k)}}}},onS)}}}},articleTabTap:function(k){var j=this;if(k!=null){k.stopPropagation()}if(j.display=="pages"){j.getComponent("con").removeAll();j.loadContainer()}var b=Ext.getStore("SettingStore");if(b.data.items[0].raw.dynamic!=null){var c=80;j.expandBtn.show();j.nextBtn.setRight(80)}else{var c=40;j.expandBtn.hide();j.nextBtn.setRight(40)}j.sectionArea.setWidth($(document).width()-c);j.display="articles";if(j.scrollType=="senchaScroller"){j.getComponent("con").getScrollable().getScroller().scrollTo(1)}else{j.contentArea.setHeight(370)}var g=0;var f=0;for(var d=g;d<j.getComponent("con").items.items.length;d++){if($(document).width()>=parseFloat(j.getComponent("con").items.items[d].element.dom.offsetLeft)){f=d}}j.setActiveSections(g,f);var m=j.contentArea.getItems().items;for(var d=g;d<=f;d++){if(m[d]!=null){var a=m[d].items.items[0].items.items;if(a!=null){for(var l=0;l<a.length;l++){if((0<=a[l].element.dom.offsetLeft&&$(document).width()>=a[l].element.dom.offsetLeft)||a[l].element.dom.offsetLeft==0){if(a[l].loadImage!=null){a[l].loadImage()}}}}}}if(j.mode=="toggle"){try{switch(j.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes toggleToArticle { 0%{ -webkit-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } 100%{ -webkit-transform:translate3d(0px, 0px, 0px); } }",0);j.element.dom.style.webkitAnimation="toggleToArticle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes toggleToArticle { 0%{ transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } 100%{ transform:translate3d(0px, 0px, 0px); } }",0);j.element.dom.style.animation="toggleToArticle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes toggleToArticle { 0%{ -moz-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } 100%{ -moz-transform:translate3d(0px, 0px, 0px); } }",0);j.element.dom.style.mozAnimation="toggleToArticle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes toggleToArticle { 0%{ -ms-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } 100%{ -ms-transform:translate3d(0px, 0px, 0px); } }",0);j.element.dom.style.msAnimation="toggleToArticle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes toggleToArticle { 0%{ transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } 100%{ transform:translate3d(0px, 0px, 0px); } }",0);j.element.dom.style.animation="toggleToArticle 0.5s forwards";break}j.mode="articles";$(j.articleTabText.dom).attr("class","pageArticleTab");$(j.pagesTabText.dom).attr("class","");if(Ext.os.is.Desktop){window.onkeydown=null}j.setModal({style:"opacity:0;"});j.setHideOnMaskTap(true)}catch(h){}}else{if(j.mode=="pages"){try{j.mode="articles";switch(j.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes pagesToArticle { 0%{ -webkit-transform:translate3d(0px, 160px, 0px); } 100%{ -webkit-transform:translate3d(0px, 0px, 0px); } }",0);j.element.dom.style.webkitAnimation="pagesToArticle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes pagesToArticle { 0%{ transform:translate3d(0px, 160px, 0px); } 100%{ transform:translate3d(0px, 0px, 0px); } }",0);j.element.dom.style.animation="pagesToArticle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes pagesToArticle { 0%{ -moz-transform:translate3d(0px, 160px, 0px); } 100%{ -moz-transform:translate3d(0px, 0px, 0px); } }",0);j.element.dom.style.mozAnimation="pagesToArticle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes pagesToArticle { 0%{ -ms-transform:translate3d(0px, 160px, 0px); } 100%{ -ms-transform:translate3d(0px, 0px, 0px); } }",0);j.element.dom.style.msAnimation="pagesToArticle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes pagesToArticle { 0%{ transform:translate3d(0px, 160px, 0px); } 100%{ transform:translate3d(0px, 0px, 0px); } }",0);j.element.dom.style.animation="pagesToArticle 0.5s forwards"}$(j.articleTabText.dom).attr("class","pageArticleTab");$(j.pagesTabText.dom).attr("class","");if(Ext.os.is.Desktop){window.onkeydown=null}j.setModal({style:"opacity:0;"});j.setHideOnMaskTap(true)}catch(h){}}else{if(j.mode=="articles"){try{switch(j.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes articleToToggle { 0%{ -webkit-transform:translate3d(0px, 0px, 0px); } 100%{ -webkit-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } }",0);j.element.dom.style.webkitAnimation="articleToToggle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes articleToToggle { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } }",0);j.element.dom.style.animation="articleToToggle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes articleToToggle { 0%{ -moz-transform:translate3d(0px, 0px, 0px); } 100%{ -moz-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } }",0);j.element.dom.style.mozAnimation="articleToToggle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes articleToToggle { 0%{ -ms-transform:translate3d(0px, 0px, 0px); } 100%{ -ms-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } }",0);j.element.dom.style.msAnimation="articleToToggle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes articleToToggle { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } }",0);j.element.dom.style.animation="articleToToggle 0.5s forwards";break}j.mode="toggle";$(j.articleTabText.dom).attr("class","");$(j.pagesTabText.dom).attr("class","");j.setHideOnMaskTap(false);j.setModal(false);if(Ext.os.is.Desktop){if(j.keyDownFunc!=null){window.onkeydown=j.keyDownFunc}}}catch(h){}}}}j.loadSectionsBtns()},pagesTabTap:function(k){var j=this;if(k!=null){k.stopPropagation()}if(j.display=="articles"){j.getComponent("con").removeAll();var a=Ext.create("InfinityMobile.view.ReaderPages",{articlesContainer:j});j.getComponent("con").add(a);if(j.scrollType=="senchaScroller"){j.getComponent("con").setScrollable({direction:"horizontal"})}else{j.contentArea.setHeight(210)}j.getComponent("con").setPadding(10,10,10,10);a.element.on({painted:function(){this.config.articlesContainer.pagesHeight=this.items.items[0].element.down("img").dom.clientHeight},scope:a})}j.expandBtn.hide();j.nextBtn.setRight(40);var d=(j.pagesHeight);j.sectionArea.setWidth($(document).width()-120);j.display="pages";index=0;var g=0;var b=[];for(var f=0;f<j.sections.length;f++){var c=j.getComponent("con").items.items[0].items.items[j.sections[f].page];if(c!=null){b[f]=c.element.dom.offsetLeft}}for(var f=index;f<b.length;f++){if($(document).width()>=parseFloat(b[f]-150)){g=f}}if(j.sections>0){j.setActiveSections(index,g)}setTimeout(function(){var e=j.contentArea.getItems().items[0].innerItems;for(var l=0;l<e.length;l++){if((0<=e[l].element.dom.offsetLeft&&$(document).width()>=e[l].element.dom.offsetLeft)){e[l].loadImage()}}},200);if(j.mode=="toggle"){try{switch(j.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes toggleToPages { 0%{ -webkit-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } 100%{ -webkit-transform:translate3d(0px, 160px, 0px); } }",0);j.element.dom.style.webkitAnimation="toggleToPages 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes toggleToPages { 0%{ transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } 100%{ transform:translate3d(0px, 160px, 0px); } }",0);j.element.dom.style.animation="toggleToPages 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes toggleToPages { 0%{ -moz-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } 100%{ -moz-transform:translate3d(0px, 160px, 0px); } }",0);j.element.dom.style.mozAnimation="toggleToPages 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes toggleToPages { 0%{ -ms-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } 100%{ -ms-transform:translate3d(0px, 160px, 0px); } }",0);j.element.dom.style.msAnimation="toggleToPages 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes toggleToPages { 0%{ transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } 100%{ transform:translate3d(0px, 160px, 0px); } }",0);j.element.dom.style.animation="toggleToPages 0.5s forwards";break}j.mode="pages";$(j.pagesTabText.dom).attr("class","pageArticleTab");$(j.articleTabText.dom).attr("class","");if(Ext.os.is.Desktop){window.onkeydown=null}j.setModal({style:"opacity:0;"});j.setHideOnMaskTap(true)}catch(h){}}else{if(j.mode=="articles"){try{switch(j.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes articlesToPages { 0%{ -webkit-transform:translate3d(0px, 0px, 0px); } 100%{ -webkit-transform:translate3d(0px, 160px, 0px); } }",0);j.element.dom.style.webkitAnimation="articlesToPages 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes articlesToPages { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, 160px, 0px); } }",0);j.element.dom.style.animation="articlesToPages 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes articlesToPages { 0%{ -moz-transform:translate3d(0px, 0px, 0px); } 100%{ -moz-transform:translate3d(0px, 160px, 0px); } }",0);j.element.dom.style.mozAnimation="articlesToPages 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes articlesToPages { 0%{ -ms-transform:translate3d(0px, 0px, 0px); } 100%{ -ms-transform:translate3d(0px, 160px, 0px); } }",0);j.element.dom.style.msAnimation="articlesToPages 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes articlesToPages { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, 160px, 0px); } }",0);j.element.dom.style.animation="articlesToPages 0.5s forwards";break}j.mode="pages";$(j.pagesTabText.dom).attr("class","pageArticleTab");$(j.articleTabText.dom).attr("class","");if(Ext.os.is.Desktop){window.onkeydown=null}j.setModal({style:"opacity:0;"});j.setHideOnMaskTap(true)}catch(h){}}else{if(j.mode=="pages"){try{switch(j.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes pagesToToggle { 0%{ -webkit-transform:translate3d(0px, 160px, 0px); } 100%{ -webkit-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } }",0);j.element.dom.style.webkitAnimation="pagesToToggle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes pagesToToggle { 0%{ transform:translate3d(0px, 160px, 0px); } 100%{ transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } }",0);j.element.dom.style.animation="pagesToToggle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes pagesToToggle { 0%{ -moz-transform:translate3d(0px, 160px, 0px); } 100%{ -moz-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } }",0);j.element.dom.style.mozAnimation="pagesToToggle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes pagesToToggle { 0%{ -ms-transform:translate3d(0px, 160px, 0px); } 100%{ -ms-transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } }",0);j.element.dom.style.msAnimation="pagesToToggle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes pagesToToggle { 0%{ transform:translate3d(0px, 160px, 0px); } 100%{ transform:translate3d(0px, "+j.articlesHeight+"px, 0px); } }",0);j.element.dom.style.animation="pagesToToggle 0.5s forwards";break}j.mode="toggle";$(j.pagesTabText.dom).attr("class","");$(j.articleTabText.dom).attr("class","");j.setHideOnMaskTap(false);j.setModal(false);if(Ext.os.is.Desktop){if(j.keyDownFunc!=null){window.onkeydown=j.keyDownFunc}}}catch(h){}}else{if(j.mode=="start"){j.mode="toggle"}}}}j.fireEvent("checkActivePageInBrowser",j);j.loadSectionBtnsPages()},setMod:a})},hideMe:function(){var a=this;a.element.dom.style.visibility="hidden"},hide:function(){var b=this;var a=false;if(settings.newsday!=null){if(settings.newsday.customArticlesContainer=="true"){a=true}}if(!a){if(b.mode=="articles"){try{switch(b.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes articleToToggle { 0%{ -webkit-transform:translate3d(0px, 0px, 0px); } 100%{ -webkit-transform:translate3d(0px, "+b.articlesHeight+"px, 0px); } }",0);b.element.dom.style.webkitAnimation="articleToToggle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes articleToToggle { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, "+b.articlesHeight+"px, 0px); } }",0);b.element.dom.style.animation="articleToToggle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes articleToToggle { 0%{ -moz-transform:translate3d(0px, 0px, 0px); } 100%{ -moz-transform:translate3d(0px, "+b.articlesHeight+"px, 0px); } }",0);b.element.dom.style.mozAnimation="articleToToggle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes articleToToggle { 0%{ -ms-transform:translate3d(0px, 0px, 0px); } 100%{ -ms-transform:translate3d(0px, "+b.articlesHeight+"px, 0px); } }",0);b.element.dom.style.msAnimation="articleToToggle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes articleToToggle { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, "+b.articlesHeight+"px, 0px); } }",0);b.element.dom.style.animation="articleToToggle 0.5s forwards";break}b.mode="toggle";$(b.articleTabText.dom).attr("class","");$(b.pagesTabText.dom).attr("class","");b.setHideOnMaskTap(false);b.setModal(false);if(Ext.os.is.Desktop){if(b.keyDownFunc!=null){window.onkeydown=b.keyDownFunc}}}catch(c){}}else{try{switch(b.getPrefix().css){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes pagesToToggle { 0%{ -webkit-transform:translate3d(0px, 200px, 0px); } 100%{ -webkit-transform:translate3d(0px, "+b.articlesHeight+"px, 0px); } }",0);b.element.dom.style.webkitAnimation="pagesToToggle 0.5s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes pagesToToggle { 0%{ transform:translate3d(0px, 200px, 0px); } 100%{ transform:translate3d(0px, "+b.articlesHeight+"px, 0px); } }",0);b.element.dom.style.animation="pagesToToggle 0.5s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes pagesToToggle { 0%{ -moz-transform:translate3d(0px, 200px, 0px); } 100%{ -moz-transform:translate3d(0px, "+b.articlesHeight+"px, 0px); } }",0);b.element.dom.style.mozAnimation="pagesToToggle 0.5s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes pagesToToggle { 0%{ -ms-transform:translate3d(0px, 200px, 0px); } 100%{ -ms-transform:translate3d(0px, "+b.articlesHeight+"px, 0px); } }",0);b.element.dom.style.msAnimation="pagesToToggle 0.5s forwards";break;default:document.styleSheets[0].insertRule("@keyframes pagesToToggle { 0%{ transform:translate3d(0px, 200px, 0px); } 100%{ transform:translate3d(0px, "+b.articlesHeight+"px, 0px); } }",0);b.element.dom.style.animation="pagesToToggle 0.5s forwards";break}b.mode="toggle";$(b.pagesTabText.dom).attr("class","");$(b.articleTabText.dom).attr("class","");b.setHideOnMaskTap(false);b.setModal(false);if(Ext.os.is.Desktop){if(b.keyDownFunc!=null){window.onkeydown=b.keyDownFunc}}}catch(c){}}}else{b.setStyle({bottom:"165px",width:"40px"});b.content.setStyle({maxWidth:"0%"});b.sectionToolbar.setStyle({maxWidth:"0%"});b.setHideOnMaskTap(false);b.setModal(false);b.mode="toggle"}},sectionTap:function(b,c){if(Ext.browser.is.Firefox){if(c.mode=="articles"){var d=c.getComponent("con").items.items[b.config.position+c.offset].element.dom.offsetLeft;c.scrollApi.scrollToX(d+1)}else{if(c.mode=="pages"){var a=c.sections[b.config.position].page;var d=c.getComponent("con").items.items[0].items.items[a-1].element.dom.offsetLeft;c.scrollApi.scrollToX(d+1)}}}else{if(c.scrollType=="senchaScroller"){if(c.mode=="articles"){var d=c.getComponent("con").items.items[b.config.position+c.offset].element.dom.offsetLeft;if(d>c.getComponent("con").getScrollable().getScroller().maxPosition.x){d=c.getComponent("con").getScrollable().getScroller().maxPosition.x}c.getComponent("con").getScrollable().getScroller().scrollTo(d+1)}else{if(c.mode=="pages"){var a=c.sections[b.config.position].page;var d=c.getComponent("con").items.items[0].items.items[a-1].element.dom.offsetLeft;if(d>c.getComponent("con").getScrollable().getScroller().maxPosition.x){d=c.getComponent("con").getScrollable().getScroller().maxPosition.x+150}c.getComponent("con").getScrollable().getScroller().scrollTo(d)}}}else{if(c.mode=="articles"){var d=c.getComponent("con").items.items[b.config.position+c.offset].element.dom.offsetLeft;if(d>c.contentArea.element.dom.scrollWidth){d=c.contentArea.element.dom.scrollWidth}c.contentArea.element.dom.scrollLeft=parseFloat(d+1)}else{if(c.mode=="pages"){var a=c.sections[b.config.position].page;var d=c.getComponent("con").items.items[0].items.items[a-1].element.dom.offsetLeft;if(d>c.contentArea.element.dom.scrollWidth){d=c.contentArea.element.dom.scrollWidth+150}c.contentArea.element.dom.scrollLeft=d}}}}},resizeOb:function(){var b=this;if(Ext.browser.is.Firefox){b.contentArea.element.dom.style.width=$(document).width()+"px";var f=$(b.contentArea.element.dom).children().first();if(f!=null){$(f).css("width",$(window).width()+"px");b.scrollApi.reinitialise();var e=f.children().first()[0];if(e!=null){e.style.top="0px"}var d=b.scrollApi.getContentPositionX();b.onScroll({position:{x:d+1}})}}else{if(b.scrollType=="senchaScroller"){var d=b.getComponent("con").getScrollable().getScroller().position.x}else{var d=b.contentArea.element.dom.scrollLeft}b.onScroll({position:{x:d+1}})}if(b.mode=="pages"){b.sectionArea.element.dom.style.width=($(document).width()-120)+"px"}else{var a=Ext.getStore("SettingStore");if(a.data.items[0].raw.dynamic!=null){var c=160;b.expandBtn.show()}else{var c=120;b.expandBtn.hide()}b.sectionArea.element.dom.style.width=($(document).width()-c)+"px"}},ees")},disableEvents:function(){var a=this;a.element.dom.style.pointerEvents="none"},enableEs=""},getPrefix:function(){var a=window.getComputedStyle(document.documentElement,"");pre=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||(a.OLink===""&&["","o"]))[1];return{lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}},pagesTabTapNewsday:function(g){var f=this;if(g!=null){g.stopPropagation()}if(f.display=="articles"){f.getComponent("con").removeAll();var a=Ext.create("InfinityMobile.view.ReaderPages",{articlesContainer:f});f.getComponent("con").add(a);f.getComponent("con").setScrollable({direction:"horizontal"});f.getComponent("con").setPadding(10,10,10,10);a.element.on({paight},scope:a})}f.expandBtn.hide();var b=(f.pagesHeight);f.sectionArea.setWidth($(document).width()-80);f.display="pages";index=0;var h=0;var e=[];for(var d=0;d<f.sections.length;d++){var c=f.getComponent("con").items.items[0].items.items[f.sections[d].page];if(c!=null){e[d]=c.element.dom.offsetLeft}}for(var d=index;d<e.length;d++){if($(document).width()>=parseFloat(e[d]-150)){h=d}}if(f.sections>0){f.setActiveSections(index,h)}setTi()}}},200);if(f.mode=="toggle"){f.content.setStyle({maxWidth:"100%"});f.sectionToolbar.setStyle({maxWidth:"100%"});f.setStyle({bottom:"180px",width:"calc(100% - 40px)"});f.mode="pages";if(Ext.os.is.Desktop){window.onkeydown=null}f.setHideOnMaskTap(true)}else{if(f.mode=="articles"){f.content.setStyle({maxWidth:"100%"});f.sectionToolbar.setStyle({maxWidth:"100%"});f.setStyle({bottom:"180px",width:"calc(100% - 40px)"});f.mode="pages";if(Ext.os.is.Desktop){window.onkeydown=null}f.setHideOnMaskTap(true)}else{if(f.mode=="pages"){f.content.setStyle({maxWidth:"0%"});f.sectionToolbar.setStyle({maxWidth:"0%"});f.setStyle({bottom:"165px",width:"40px"});f.mode="toggle";f.setHideOnMaskTap(false);if(Ext.os.is.Desktop){if(f.keyDownFunc!=null){window.onkeydown=f.keyDownFunc}}}else{if(f.mode=="start"){f.mode="toggle"}}}}f.loadSectionBtnsPages()},articleTabTapNewsday:function(h){var g=this;if(h!=null){h.stopPropagation()}if(g.display=="pages"){g.getComponent("con").removeAll();g.loadContainer()}var b=Ext.getStore("SettingStore");if(b.data.items[0].raw.dynamic!=null){var c=80;g.expandBtn.show()}else{var c=40;g.expandBtn.hide()}g.sectionArea.setWidth($(document).width()-c-40);g.display="articles";if(g.scrollType=="senchaScroller"){g.getComponent("con").getScrollable().getScroller().scrollTo(1)}var f=0;var e=0;for(var d=f;d<g.getComponent("con").items.items.length;d++){if($(document).width()>=parseFloat(g.getComponent("con").items.items[d].element.dom.offsetLeft)){e=d}}if(g.sections>0){g.setActiveSections(f,e)}var k=g.contentArea.getItems().items;for(var d=f;d<=e;d++){if(k[d]!=null){var a=k[d].items.items[0].items.items;if(a!=null){for(var j=0;j<a.length;j++){if((0<=a[j].element.dom.offsetLeft&&$(document).width()>=a[j].element.dom.offsetLeft)||a[j].element.dom.offsetLeft==0){if(a[j].loadImage!=null){a[j].loadImage()}}}}}}if(g.mode=="toggle"){g.content.setStyle({maxWidth:"100%"});g.sectionToolbar.setStyle({maxWidth:"100%"});g.setStyle({bottom:"340px",width:"calc(100% - 40px)"});g.mode="articles";if(Ext.os.is.Desktop){window.onkeydown=null}g.setModal({style:"opacity:0;"});g.setHideOnMaskTap(true)}else{if(g.mode=="pages"){g.content.setStyle({maxWidth:"100%"});g.sectionToolbar.setStyle({maxWidth:"100%"});g.setStyle({bottom:"340px",width:"calc(100% - 40px)"});g.mode="articles";if(Ext.os.is.Desktop){window.onkeydown=null}g.setModal({style:"opacity:0;"});g.setHideOnMaskTap(true)}else{if(g.mode=="articles"){g.content.setStyle({maxWidth:"0%"});g.sectionToolbar.setStyle({maxWidth:"0%"});g.setStyle({bottom:"165px",width:"40px"});g.mode="toggle";g.setHideOnMaskTap(false);g.setModal(false);if(Ext.os.is.Desktop){if(g.keyDownFunc!=null){window.onkeydown=g.keyDownFunc}}}}}g.loadSectionsBtns()}},0,["articlescontainer"],["component","container","articlescontainer"],{component:true,container:true,articlescontainer:true},["widget.articlescontainer"],0,[InfinityMobile.view,"ArticlesContainer"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingOptions",Ext.Container,{config:{modal:true,hideOnMaskTap:true,centered:true,width:"60%",style:"background-color:white;border:1px solid black;border-radius:5px;padding:0px;",fullscreen:true,items:[{id:"clippingOptionsToolBar",height:40,style:"background-color:#e6e6e6;border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{top:10,left:10,html:"<b>Clipping Options</b>"},{id:"clippingOptionsToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{id:"clippingOptionsBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"clippingOptionsContainerText",margin:"0 0 20px 0",html:"<p style='font-size:12px;'>To download or email your clipping(s), simply select one or more and click the relevant button. To view a clipping at a bigger size, select the thumbnail(s) and then click the 'Preview' button.<p><br /><br /><p style='font-size:10px;color:#444444'>Please note: Once you close your browser or exit the session, your clippings library will be cleared.</p>"},{itemId:"clippingScroller",height:"180px",layout:"hbox",scrollable:{direction:"horizontal"}},{itemId:"options",items:[{itemId:"ButtonsDiv"},{itemId:"EmailDiv"}]}]}]},initialize:function(){var a=this;a.toolbar=a.getComponent("clippingOptionsToolBar");a.closeBtn=a.toolbar.getComponent("clippingOptionsToolBarClose");a.bodyContainer=a.getComponent("clippingOptionsBodyContainer");a.clippingScroller=a.bodyContainer.getComponent("clippingScroller");a.options=a.bodyContainer.getComponent("options");if(a.config.images!=null){a.images=a.config.images}if(a.config.widths!=null){a.widths=a.config.widths}if(a.config.heights!=null){a.heights=a.config.heights}a.addThumbnails();a.closeBtn.element.on("tap",function(){a.destroy()});a.options.getComponent("ButtonsDiv").setHtml('<div style="width:100%;background-color:white;padding:10px;height:70px;"><input type="button" onclick="parent.download()" style="margin: 5px;float:right;border-style:solid;font-size:12px;height:30px;margin-color:#458FBB;background-color:#458FBB;border-color:#458FBB;width:120px;color:white;" type="button" value="Download" /><input type="button" onclick="parent.preview()" value="Preview" style="margin:5px;float:right;border-style:solid;font-size:12px;height:30px;margin-color:#E6E6E6;background-color:#E6E6E6;border-color:#e6e6e6;width:120px;" type="button" /><input type="button" onclick="parent.deleteClip()"  style="margin:5px;float:right;border-style:solid;font-size:12px;height:30px;margin-color:#e6e6e6;background-color:#e6e6e6;border-color:#e6e6e6;width:120px;" type="button" value="Delete" /></div>');a.options.getComponent("EmailDiv").setHtml('<div style="height:210px;width:100%;background-color:white;padding:10px;"><div><div style="font-size:12px;width:40%;float:left;padding:10px;"><form>Recipient email address:<br /><input id="emailTxt" style="width:90%" type="textfield" /><br /><br />Subject:<br /><input id="subjectTxt" style="width:90%" type="textfield" /></form></div><div style="font-size:12px;float:right;width:50%;padding:10px;"><form>Message:<br /><textarea id="messageTxt" style="resize:none;width:90%;" rows="4" ></textarea></form></div></div><div style="padding:10px;float:right;"><input type="button" onclick="parent.email()" value="Send" style="margin: 5px;float:right;border-style:solid;font-size:12px;height:30px;margin-color:#458FBB;background-color:#458FBB;border-color:#458FBB;width:120px;color:white;" type="button" /></div></div>');deletr()}};prr()}};t")}};dowr()}}},addThumbw()}},promppt")},updateIls()}},0,["clippingoptions"],["component","container","clippingoptions"],{component:true,container:true,clippingoptions:true},["widget.clippingoptions"],0,[InfinityMobile.view,"ClippingOptions"],0));(Ext.cmd.derive("InfinityMobile.view.clippingPrompt",Ext.Container,{config:{modal:true,centered:true,width:"400px",style:"background-color:white;border:1px solid black;border-radius:5px;padding:0px;",fullscreen:true,zIndex:999998,items:[{id:"clippingPromptToolBar",height:40,items:[{itemId:"clippingTitle",top:10,left:10}]},{id:"clippingPromptBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"clippingPromptContainerText",margin:"0 0 20px 0"},{itemId:"buttonArea",padding:"20",layout:"hbox",items:[{itemId:"checkbox",flex:1,html:"<input class='check' type='checkbox' ><label style='font-size:10px;padding:5px;'></label></input>"},{itemId:"button",flex:1,cls:"pointerCursor btn",style:"text-align:center;margin: 5px;border-style:solid;height:30px;",layout:{type:"hbox",pack:"center",align:"middle"},items:[{itemId:"btnText",margin:5,style:"font-size:11pt;"}]}]}]}]},initialize:function(){var b=this;var a=b.getComponent("clippingPromptToolBar");a.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});b.clippingPromptBody=b.getComponent("clippingPromptBodyContainer");b.buttonArea=b.clippingPromptBody.getComponent("buttonArea");b.button=b.buttonArea.getComponent("button");b.checkbox=b.buttonArea.getComponent("checkbox").element.down(".check");b.bodyText=b.clippingPromptBody.getComponent("clippingPromptContainerText");b.clippingPromptToolBar=b.getComponent("clippingPromptToolBar");b.clippingTitle=b.clippingPromptToolBar.getComponent("clippingTitle");b.clippingTitle.setHtml(language.clippings.createClipping);if(b.config.readerActiveItem!=null){b.readerActiveItem=b.config.readerActiveItem}if(b.config.reader!=null){b.reader=b.config.reader}b.setupText();b.button.element.on({tap:b.okay,scope:b});b.button.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});if(Ext.os.is.Desktop){if(navigator.maxTouchPoints){b.buttonArea.getComponent("checkbox").element.onue}}},scope:b.buttonArea.getComponent("checkbox")})}}if(settings.newsday){b.element.dom.style.borderRadius=""}},okay:function(){var b=this;console.log(b.checkbox.dom.checked);if(b.checkbox.dom.checked){try{localStorage.setItem("clippingPrompt"+publicationguid,"set")}catch(a){}b.fireEvent("createClippingBox")}else{if(Ext.os.is.Desktop){var d=Ext.create("InfinityMobile.view.ClippingArea",{readerActiveItem:b.readerActiveItem,reader:b.reader})}else{var d=Ext.create("InfinityMobile.view.tablet.ClippingArea",{readerActiveItem:b.readerActiveItem,reader:b.reader})}Ext.Viewport.add(d);d.show();if(Ext.os.is.Desktop){if(settings.newsday!=null){if(settings.newsday.extraTopBar=="true"){var c=InfinityMobile.app.getController("ClippingController").getExtratopbar();if(c!=null){c.setZIndex(0)}}}}}b.destroy()},setupText:function(){var a=this;if(Ext.os.is.Desktop){a.bodyText.setHtml(language.clippings.clippingsHelper+"<br /><br />"+language.clippings.clippingsExplain)}else{a.bodyText.setHtml(language.clippings.clippingsHelperMobile+"<br /><br />"+language.clippings.clippingsExplainMobile)}a.buttonArea.element.down("label").dom.innerHTML=language.clippings.clippingsDontShow;a.button.getComponent("btnText").setHtml(language.ok)}},0,["clippingprompt"],["component","container","clippingprompt"],{component:true,container:true,clippingprompt:true},["widget.clippingprompt"],0,[InfinityMobile.view,"clippingPrompt"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingBox",Ext.Container,{config:{height:"1px",width:"100px",fullscreen:true,draggable:{direction:"both",constraint:null},style:"zIndex:10;"},initi:a})},onDragentY},oon()},onDragFintY}}}},0,["clippingbox"],["component","container","clippingbox"],{component:true,container:true,clippingbox:true},["widget.clippingbox"],0,[InfinityMobile.view,"ClippingBox"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderLiveAdvertObject",InfinityMobile.view.ReaderMediaObject,{config:{mediaObject:"",items:[{itemId:"closeBtn",right:0,top:0,height:25,style:"background-color:#e1e1e1",html:"<div style='margin-right:28px; margin-left:5px; padding-top:5px; font-size:12px'>Close</div>",items:[{top:2,right:5,width:20,height:20,cls:"backgroundImage",style:'background-image:url("../assets/article view/article-close-btn.png")'}]}]},initialize:function(){var a=this;InfinityMobile.view.ReaderMediaObject.prototype.initialize.apply(this,arguments);if(a.config.mediaObject!=null){a.mediaObject=a.config.mediaObject}a.setHtml("<iframe style='height:100%;width:100%;' src='"+a.mediaObject.url+"' ></iframe>");a.closeBtn=a.getComponent("closeBtn");a.closeBtn.element.on("tap",function(){a.hide()})}},0,["readerliveadvertobject"],["component","container","readermediaobject","readerliveadvertobject"],{component:true,container:true,readermediaobject:true,readerliveadvertobject:true},["widget.readerliveadvertobject"],0,[InfinityMobile.view,"ReaderLiveAdvertObject"],0));(Ext.cmd.derive("InfinityMobile.view.LeftSideAdvertCover",Ext.Container,{config:{height:"100%",width:"100%",top:0,style:"display:block !important;",cls:"leftsidead",items:[{itemId:"tooltip",style:"position:absolute !important;"}]},initi>")}},setMediaLink"}})}},0,["leftsideadvertcover"],["component","container","leftsideadvertcover"],{component:true,container:true,leftsideadvertcover:true},["widget.leftsideadvertcover"],0,[InfinityMobile.view,"LeftSideAdvertCover"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderLiveArticlePopoverItem",Ext.Container,{config:{mediaObject:"",pageNo:"",page:"",cls:"loading",style:"background-color:white",layout:"vbox",items:[{itemId:"content",flex:1,padding:"0 0 10px 0",scrollable:{direction:"vertical",directionLock:true}}]},initialize:function(){var a=this;a.content=a.getComponent("content");a.setContentStyle();console.log("Content Styled");a.on("painted",a.getContent,a,{delay:10,single:true})},setContentx")}},getContent:function(){var j=this;console.log("PAINTED");var e=Ext.getStore("SettingStore");if(e.data.items[0].raw.reader.popupAdvert!=null){var f=e.data.items[0].raw.reader.popupAdvert.position;if(f=="top"){switch(currentProfile){case"phone":var g=Ext.create("InfinityMobile.view.phone.ArticlePopoverAd",{});break;case"tablet":var g=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{});break;case"desktop":var g=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{});break}j.add(g);g.show()}}var k="";if(j.getPage().headdeck!=null){k="<div class='contentDeck font25'></div><br />"}var b="";if(j.getPage().images!=null){b="<div class='contentImages' >";for(var d=0;d<j.getPage().images.length;d++){b+="<div class='contentImage'><img src='"+j.getPage().images[d].url+"' /></div>"}b+="</div><br />"}var h="<div class='contentHead font35' >"+j.getPage().headline+"</div><br />"+k+b+"<div class='contentByline font15'>"+j.getPage().byline+"</div><br /><div class='contentBody font15'>"+j.getPage().content+"</div><br />";var a=h.match(/<body[^>]*>([^<]*(?:(?!<\/?body)<[^<]*)*)<\/body\s*>/i);if(a){h=a[1]}h+="<script>setText()<\/script>";j.removeSpinner();j.content.setHtml(h);j.setImages();if(j.content.element!=null){setText(j.content.element.dom)}j.setStyle({visibility:"inherit"});if(e.data.items[0].raw.reader.popupAdvert!=null){if(f=="bottom"){switch(currentProfile){case"phone":var c=Ext.create("InfinityMobile.view.phone.ArticlePopoverAd",{});break;case"tablet":var c=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{});break;case"desktop":var c=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{padding:"10px 0 0 0"});break}j.add(c);c.show()}}},removeSpinner:function(){var a=this;a.removeCls("loading")},setI(g)}}},0,["readerlivearticlepopoveritemtablet"],["component","container","readerlivearticlepopoveritemtablet"],{component:true,container:true,readerlivearticlepopoveritemtablet:true},["widget.readerlivearticlepopoveritemtablet"],0,[InfinityMobile.view,"ReaderLiveArticlePopoverItem"],0));(Ext.cmd.derive("InfinityMobile.view.ArticleReader",Ext.Panel,{showToolBar:true,config:{fullscreen:true,layout:{type:"vbox"},items:[{itemId:"topBar",height:40,style:"background-color:#1e1e1e;z-index:4;"},{itemId:"content",layout:{type:"hbox"},flex:1}]},initialize:function(){var b=this;var c=b.getComponent("topBar");b.toolBar=c;b.content=b.getComponent("content");b.hasPainted=false;if(Ext.os.is.Phone){b.content.setLayout({type:"vbox"});b.content.setScrollable({direction:"vertical",directionLock:true})}$(b.toolBar.element.dom).css("background-color","#"+settings.topbar.backgroundColor);if(settings.dynamic.articleBehaviour=="device"){if("ontouchstart" in window||navigator.msMaxTouchPoints){settings.dynamic.articleBehaviour="momentum"}else{settings.dynamic.articleBehaviour="scrollbar"}}b.element.on({painted:function(){var e=this;if(!e.hasPainted){e.fireEvent("initialized",e);mainPanel.fireEvent("removeSplash");if(Ext.os.is.Desktop&&settings.dynamic.articleBehaviour=="scrollbar"){if(settings.dynamic.rss==null){e.scrollDesktop=e.content.element.down(".x-container").next("div").dom}else{e.scrollDesktop=e.content.element.down(".x-container").next("div").next("div").dom}e.scrollDesktop.style.overflowX="scroll";if(Ext.browser.is.IE){e.content.setScrollable(false);e.scrollDesktop.style.overflowX="";if(settings.dynamic.rss==null){e.scrollDesktop=e.content.element.down(".x-container").next("div").down(".x-scroll-view").dom}else{e.scrollDesktop=e.content.element.down(".x-container").next("div").next("div").down(".x-scroll-view").dom}e.scrollDesktop.style.overflowX="scroll";var d=0;var f=Ext.ComponentQuery.query(".articlereaderpanelcontainer");for(container in f){d+=$(f[container].element.dom).width()+10}var g=Ext.ComponentQuery.query(".dynamicarticlesinterstitialcontainer");for(interstitial in g){d+=$(g[interstitial].element.dom).width()+5}if(settings.dynamic.rss==null){e.content.element.down(".x-container").next("div").down(".x-scroll-view").down(".x-scroll-container").dom.style.width=d+"px"}else{e.content.element.down(".x-container").next("div").next("div").down(".x-scroll-view").down(".x-scroll-container").dom.style.width=d+"px"}}e.element.dom.onmousewth}}});e.element.dom.addEventListener("DOMMouseScth}}})}else{if(!Ext.os.is.Phone){e.content.setScrollable({direction:"horizontal",directionLock:true})}e.element.dom.onmousewx)}}});e.element.dom.addEventListener("DOMMouseScx)}}})}e.hasPainted=true}},scope:b});if(Ext.os.is.Phone){b.content.getScrollable().getScroller().on({ss(d)},scope:b});var a={position:{y:0}};b.on("pais(a)})}},loadPhoneI}}}}},loadReader}}}}}},0,["articlereader"],["component","container","panel","articlereader"],{component:true,container:true,panel:true,articlereader:true},["widget.articlereader"],0,[InfinityMobile.view,"ArticleReader"],0));(Ext.cmd.derive("InfinityMobile.view.NavButton",Ext.Container,{config:{cls:"pointerCursor",width:45,height:100},initialize:function(){var a=this;Ext.Container.prototype.initialize.apply(this,arguments);if(a.config.direction!=null){a.direction=a.config.direction}if(!Ext.browser.is.Firefox){a.setShowAnimation("fade");a.setHideAnimation("fadeOut")}a.duration=30;a.timer=null;a.touchTimer=null;a.isTouch=false;if(Ext.os.is.Desktop){a.element.on("touchstart",function(d){d.stopPropagation();var f=InfinityMobile.app.getController("ReaderController").getZoomValue();if(a.direction=="left"){if(f<=1){var c=Ext.getStore("SettingStore");if(c.data.items[0].raw.reader.zoomMode=="fill"){var b=true}else{var b=false}a.fireEvent("autoTurnLeft",b)}else{a.timer=setInterval(function(){a.fireEvent("scrollLeft")},a.duration)}}else{if(a.direction=="right"){if(f<=1){var c=Ext.getStore("SettingStore");if(c.data.items[0].raw.reader.zoomMode=="fill"){var b=true}else{var b=false}a.fireEvent("autoTurnRight",b)}else{a.timer=setInterval(function(){a.fireEvent("scrollRight")},a.duration)}}else{if(a.direction=="up"){a.timer=setInterval(function(){a.fireEvent("scrollUp")},a.duration)}else{a.timer=setInterval(function(){a.fireEvent("scrollDown")},a.duration)}}}});a.element.on("touchend",function(b){b.stopPropagation();clearInterval(a.timer);a.timer=null});a.element.on("touchleave",function(b){b.stopPropagation();clearInterval(a.timer);a.timer=null})}else{a.element.dom.addEventListener("touchleave",function(){clearInterval(a.timer);a.timer=null});a.element.dom.addEventListener("touchstart",function(d){d.stopPropagation();var f=InfinityMobile.app.getController("ReaderController").getZoomValue();if(a.direction=="left"){if(f<=1){var c=Ext.getStore("SettingStore");if(c.data.items[0].raw.reader.zoomMode=="fill"){var b=true}else{var b=false}a.fireEvent("autoTurnLeft",b)}else{a.timer=setInterval(function(){a.fireEvent("scrollLeft")},a.duration)}}else{if(a.direction=="right"){if(f<=1){var c=Ext.getStore("SettingStore");if(c.data.items[0].raw.reader.zoomMode=="fill"){var b=true}else{var b=false}a.fireEvent("autoTurnRight",b)}else{a.timer=setInterval(function(){a.fireEvent("scrollRight")},a.duration)}}else{if(a.direction=="up"){a.timer=setInterval(function(){a.fireEvent("scrollUp")},a.duration)}else{a.timer=setIntwn")},a.duration)}}}});a.element.dom.addEventListener("toucnull})}}},0,["navbutton"],["component","container","navbutton"],{component:true,container:true,navbutton:true},["widget.navbutton"],0,[InfinityMobile.view,"NavButton"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingMenuEmailPrompt",Ext.Container,{config:{modal:true,centered:true,width:"30%",style:"background-color:white;border:1px solid black;border-radius:5px;padding:5px;",fullscreen:true},initiy()}}},0,["clippingmenuemailprompt"],["component","container","clippingmenuemailprompt"],{component:true,container:true,clippingmenuemailprompt:true},["widget.clippingmenuemailprompt"],0,[InfinityMobile.view,"ClippingMenuEmailPrompt"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingMenuPreview",Ext.Container,{config:{modal:true,hideOnMaskTap:true,centered:true,height:"100%",width:"100%",fullscreen:true,style:"background-color:#000000",zIndex:999999,items:[{itemId:"close",right:5,top:5,height:40,width:40,style:'background-image:url("resources/images/reader icons/close btn.png");background-size:contain;background-position:center;background-repeat:no-repeat;cursor:pointer;'},{itemId:"carousel",xtype:"carousel",ui:"light",height:"100%",width:"100%"}]},initialize:function(){var b=this;Ext.Container.prototype.initialize.apply(this,arguments);if(b.config.images!=null){b.images=b.config.images}if(b.config.clippingMenu!=null){b.clippingMenu=b.config.clippingMenu}for(var a=0;a<b.images.length;a++){if(b.clippingMenu.clippingsContainer.innerItems[a].clicked){var c=Ext.create("Ext.Container",{style:{maxHeight:($(document).height()-80),maxWidth:($(document).width()-80),padding:"10px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",webkitTransform:"translate(-50%,-50%)",mozTransform:"translate(-50%,-50%)",msTransform:"translate(-50%,-50%)",backgroundImage:"url('"+b.images[a]+"')",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"}});b.getComponent("carousel").add(c)}}b.getComponent("close").element.on({tap:function(){b.destroy()},scope:b})}},0,["clippingmenupreview"],["component","container","clippingmenupreview"],{component:true,container:true,clippingmenupreview:true},["widget.clippingmenupreview"],0,[InfinityMobile.view,"ClippingMenuPreview"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingMenuPrompt",Ext.Container,{config:{modal:true,centered:true,width:300,style:"background-color:white;border:1px solid black;border-radius:5px;padding:5px;",fullscreen:true,zIndex:9999999},initi=""}}},0,["clippingmenuprompt"],["component","container","clippingmenuprompt"],{component:true,container:true,clippingmenuprompt:true},["widget.clippingmenuprompt"],0,[InfinityMobile.view,"ClippingMenuPrompt"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingMenuDeletePrompt",Ext.Container,{config:{modal:true,centered:true,width:300,style:"background-color:white;border:1px solid black;border-radius:5px;padding:5px;",fullscreen:true,zIndex:9999999},initi=""}},deletetem)}},0,["clippingmenudeleteprompt"],["component","container","clippingmenudeleteprompt"],{component:true,container:true,clippingmenudeleteprompt:true},["widget.clippingmenudeleteprompt"],0,[InfinityMobile.view,"ClippingMenuDeletePrompt"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingMenuThumb",Ext.Panel,{config:{height:"180px"},initie}})}},0,["clippingmenuthumb"],["component","container","panel","clippingmenuthumb"],{component:true,container:true,panel:true,clippingmenuthumb:true},["widget.clippingmenuthumb"],0,[InfinityMobile.view,"ClippingMenuThumb"],0));(Ext.cmd.derive("InfinityMobile.view.StickyNote",Ext.Container,{draggable:{direction:"both",constraint:null},config:{height:"1px",width:"1px",style:"position:absolute;top:0px;left0px;",items:[{itemId:"textF"}]},initialize:function(){var b=this;if(b.textData==null){b.textData=""}console.log(b);console.log("Position");console.log(b.xAxis+"     "+b.yAxis);if(b.xAxis==null){var c=0}if(b.yAxis==null){var a=0}this.setHtml('<textarea id="note" style="font-size:8pt;background-color:yellow;" onkeyup="parent.typing()" onkeydown="parent.stopTyping()" rows="5" cols="15">'+b.textData+"</textarea>");b.timer;b.done=1000;typing=function(){clearTimeout(b.timer);b.timer=setTimeout(doneTyping,b.done)};stopTyping=function(){clearTimeout(b.timer)};doneTyping=function(){console.log("PageNo");console.log(document.getElementById("note"));if(b.x==null){var d=0}else{var d=b.x}if(b.y==null){var f=0}else{var f=b.y}var e='{"x":'+d+',"y":'+f+', "text":"'+document.getElementById("note").value+'", "page":'+b.pageNo+"}"};b.element.on("drag",function(d){d.stopPropagation();b.x=d.pageX;b.y=d.pageY});b.element.on("dragstart",function(d){d.stopPropagation()});b.element.on("dragend",function(g){g.stopPropagation();console.log(g);b.x=g.pageX-g.event.offsetX;b.y=g.pageY-g.event.offsetY;var f='{"x":'+b.x+',"y":'+b.y+', "text":"'+document.getElementById("note").value+'", "page":'+b.pageNo+', "docWidth":'+$(document).width()+', "docHeight":'+$(document).height()+"}";try{localStorage.setItem("note"+b.pageNo,f)}catch(d){console.log(d)}});b.element.dom.offsetTop=0;b.element.dom.offsetLeft=0}},0,0,["component","container"],{component:true,container:true},0,0,[InfinityMobile.view,"StickyNote"],0));(Ext.cmd.derive("InfinityMobile.view.PrintMenu",InfinityMobile.view.Overlay,{config:{width:700,height:700,style:"padding:0px",layout:"vbox",items:[{itemId:"toolbar",height:40,style:"border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{itemId:"title",top:10,left:10},{itemId:"toolbarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"body",flex:1,padding:25,layout:"vbox",items:[{itemId:"desc"},{itemId:"buttonsContainer",layout:{type:"hbox",pack:"center",align:"middle"},height:100,defaults:{height:40,layout:{type:"hbox",align:"middle",pack:"center"}},items:[{itemId:"selectAll",cls:"pointerCursor",width:150,items:[{itemId:"btnText"}]},{width:25},{itemId:"selectNone",cls:"pointerCursor",width:150,items:[{itemID:"btnText"}]},{width:25},{itemId:"print",cls:"pointerCursor",width:150,items:[{itemId:"btnText"}]}]},{itemId:"printItems",flex:1,scrollable:{direction:"vertical",directionLock:true},defaults:{width:150,margin:"0 6 10 6"}}]}]},initialize:function(){var d=this;var c=d.getComponent("toolbar");d.toolbarClose=c.getComponent("toolbarClose");c.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});var a=d.getComponent("body");var b=a.getComponent("buttonsContainer");d.selectAll=b.getComponent("selectAll");d.selectNone=b.getComponent("selectNone");d.print=b.getComponent("print");d.title=c.getComponent("title");d.title.setHtml(language.print.print);d.desc=a.getComponent("desc");d.desc.setHtml(language.print.printContainerText);d.selectAll.getComponent("btnText").setHtml(language.print.selectAll);d.selectNone.getComponent("btnText").setHtml(language.print.printSelectNone);d.print.getComponent("btnText").setHtml(language.print.print);d.setCloseListener();d.setSelectAllListener();d.setSelectNoneListener();d.setPrintListener();d.printItemsContainer=a.getComponent("printItems");d.loadPages()},setCloseListener:function(){var a=this;a.toolbarClose.element.on("tap",function(){a.fireEvent("close",a)})},setSelectAllListener:function(){var a=this;a.selectAll.element.on("tap",function(){a.fireEvent("selectAll",a)});a.selectAll.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"})},setSelectNoneListener:function(){var a=this;a.selectNone.element.on("tap",function(){a.fireEvent("selectNone",a)})},setPrintListener:function(){var a=this;a.print.element.on("tap",function(){a.fireEvent("print",a)})},loadPages:function(){var a=this;a.fireEvent("loadPages",a,a.printItemsContainer)},hide:function(){var a=this;a.fireEvent("enableArticlesContainer");InfinityMobile.view.Overlay.prototype.hide.apply(this,arguments)}},0,["printmenu"],["component","container","panel","overlay","printmenu"],{component:true,container:true,panel:true,overlay:true,printmenu:true},["widget.printmenu"],0,[InfinityMobile.view,"PrintMenu"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderAudioObject",InfinityMobile.view.ReaderMediaObject,{config:{items:[{itemId:"closeBtn",right:0,top:-25,height:25,style:"background-color:#e1e1e1",html:"<div style='margin-right:28px; margin-left:5px; padding-top:5px; font-size:12px'>Close</div>",items:[{top:2,right:5,width:20,height:20,cls:"backImage",style:'background-size:contain;background-image:url("../assets/article view/article-close-btn.png");'}]}],mediaObject:""},initialize:function(){var b=this;InfinityMobile.view.ReaderMediaObject.prototype.initialize.apply(this,arguments);b.fileGuid=b.mediaObject.file;var c=b.fileGuid.substr(0,1);var a=b.fileGuid.substr(1,1);console.log(b);var d="http://source.pagesuite.com/media/"+c+"/"+a+"/"+b.fileGuid+".mp3";b.setHtml('<audio controls ><source src="'+d+'" type="audio/mpeg"></audio>');b.setHeight(0);b.getComponent("closeBtn").element.on("tap",function(){b.hide()})}},0,0,["component","container","readermediaobject"],{component:true,container:true,readermediaobject:true},0,0,[InfinityMobile.view,"ReaderAudioObject"],0));(Ext.cmd.derive("InfinityMobile.view.LayoutZoomSlider",InfinityMobile.view.LayoutView,{config:{style:"color:white;top:25%;display:inline-block;",items:[{itemId:"tooltipZoomIn",cls:"tooltip",hidden:true,style:"z-index:10000"},{itemId:"tooltipZoomOut",cls:"tooltip",hidden:true,style:"z-index:10000"}]},initi:c})},tooltipRight:function(){var a=this;a.element.dom.onmousemove=(function(b){a.tooltipZoomIn.element.dom.style.webkitTransform="translate3d("+(b.offsetX+$(a.element.dom).width())+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.tooltipZoomIn.element.dom.style.MozTransform="translate3d("+(b.offsetX+$(a.element.dom).width())+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.tooltipZoomIn.element.dom.style.msTransform="translate3d("+(b.offsetX+$(a.element.dom).width())+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.tooltipZoomOut.element.dom.style.webkitTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.tooltipZoomOut.element.dom.style.MozTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.tooltipZoomOut.element.dom.style.msTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)"})},zoom:function(){var a=this;if(!a.startedZoom){a.fireEvent("zoomStart",a,a.sliderElement.dom.value);a.startedZoom=true}else{a.fireEvent("zoom",a,a.sliderElement)}},zooming:function(){var a=this;if(!a.startedZoom){a.fireEvent("zoomStart",a,a.sliderElement.dom.value);a.startedZoom=true}else{a.fireEvent("zoom",a,a.sliderElement)}},zoomEnd:function(){var a=this;if(a.sliderElement.dom.value==1){a.fireEvent("zoomEnd",a,a.sliderElement)}else{a.fireEvent("zoomEnd",a,a.sliderElement)}a.startedZoom=false}},0,["zoomslider"],["component","container","layoutview","zoomslider"],{component:true,container:true,layoutview:true,zoomslider:true},["widget.zoomslider"],0,[InfinityMobile.view,"LayoutZoomSlider"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingMenuImageScroller",Ext.Container,{config:{flex:1,itemId:"scrollerContainer",scrollable:"horizontal",indicator:false,layout:"hbox"}},0,["clippingmenuimagescroller"],["component","container","clippingmenuimagescroller"],{component:true,container:true,clippingmenuimagescroller:true},["widget.clippingmenuimagescroller"],0,[InfinityMobile.view,"ClippingMenuImageScroller"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingMenu",Ext.Container,{config:{modal:true,hideOnMaskTap:true,centered:true,width:"60%",height:"wrap",fullscreen:true,items:[{itemId:"header",items:[{itemId:"title",items:[{id:"clippingToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"description",html:"<div style='background-color:white;border: 1px solid black;border-top:none;border-bottom:none;padding:10px;'><p style='font-size:12px;'>To download or email your clipping(s), simply select one or more and click the relevant button. To view a clipping at a bigger size, select the thumbnail(s) and then click the 'Preview' button.<p><br /><br /><p style='font-size:10px;color:#444444'>Please note: Once you close your browser or exit the session, your clippings library will be cleared.</p></div>"}]},{itemId:"clipping",xtype:"clippingmenuimagescroller",height:"180px",layout:"hbox",width:"100%",style:"background-color:red;padding:10px;border: 1px solid black;border-top:none;border-bottom:none;"},{itemId:"options",style:"background-color:white;height:wrap;",items:[{itemId:"ButtonsDiv"},{itemId:"EmailDiv"}]}]},initialize:function(){var a=this;var b=a;if(a.config.images!=null){a.images=a.config.images}a.getComponent("header").getComponent("title").getComponent("clippingToolBarClose").element.on("tap",function(){a.destroy()});a.getComponent("header").getComponent("title").setHtml('<div style="background-color:#E6E6E6;padding-top:10px;padding-left:5px;padding-right:5px;padding-bottom:10px;border:1px solid black;border-bottom:none;border-top-left-radius:5px;border-top-right-radius:5px;"><h1 style="font-size:16px;">Clipping Options</h1></div>');a.addThumbnails();a.getComponent("options").getComponent("ButtonsDiv").setHtml('<div style="width:100%;background-color:white;padding:10px;height:70px;border: 1px solid black;border-top:none;border-bottom:none;"><input type="button" onclick="parent.download()" style="margin: 5px;float:right;border-style:solid;font-size:12px;height:30px;margin-color:#458FBB;background-color:#458FBB;border-color:#458FBB;width:120px;color:white;" type="button" value="Download" /><input type="button" onclick="parent.preview()" value="Preview" style="margin:5px;float:right;border-style:solid;font-size:12px;height:30px;margin-color:#E6E6E6;background-color:#E6E6E6;border-color:#e6e6e6;width:120px;" type="button" /><input type="button" onclick="parent.deleteClip()"  style="margin:5px;float:right;border-style:solid;font-size:12px;height:30px;margin-color:#e6e6e6;background-color:#e6e6e6;border-color:#e6e6e6;width:120px;" type="button" value="Delete" /></div>');a.getComponent("options").getComponent("EmailDiv").setHtml('<div style="height:210px;width:100%;background-color:white;padding:10px;border: 1px solid black;border-top:none;border-bottom:none;border-bottom-left-radius:5px;border-bottom-right-radius:5px;"><div><div style="font-size:12px;width:40%;float:left;padding:10px;"><form>Recipient email address:<br /><input id="emailTxt" style="width:90%" type="textfield" /><br /><br />Subject:<br /><input id="subjectTxt" style="width:90%" type="textfield" /></form></div><div style="font-size:12px;float:right;width:50%;padding:10px;"><form>Message:<br /><textarea id="messageTxt" style="resize:none;width:90%;" rows="4" ></textarea></form></div></div><div style="padding:10px;float:right;"><input type="button" onclick="parent.email()" value="Send" style="margin: 5px;float:right;border-style:solid;font-size:12px;height:30px;margin-color:#458FBB;background-color:#458FBB;border-color:#458FBB;width:120px;color:white;" type="button" /></div></div>');dowr()}};deletr()}};prr()}};email=function(){if(document.getElementById("emailTxt").value!=""){var e=false;var c="mailto:"+document.getElementById("emailTxt").value+"?subject='"+document.getElementById("subjectTxt").value+"'&body='"+document.getElementById("messageTxt").value+"<br /><br />";for(var d=0;d<b.images.length;d++){if(b.getComponent("clipping").innerItems[d].clicked){c+="<img src='"+a.images[d]+"' /><br /><br />";e=true}}if(e){c+="'";window.location.href=c}else{a.promptUser()}}else{prompt=Ext.create("InfinityMobile.view.ClippingMenuEmailPrompt")}}},addThumbw()}},deleteItems:function(b){var a=this;a.fireEvent("DeleteClippings",a,b)},promptUser:function(){var a=this;prompt=Ext.create("InfinityMobile.view.ClippingMenuPrompt")},updateIg"))}},0,["clippingmenu"],["component","container","clippingmenu"],{component:true,container:true,clippingmenu:true},["widget.clippingmenu"],0,[InfinityMobile.view,"ClippingMenu"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderLanguagePopup",InfinityMobile.view.Overlay,{config:{width:300,height:300,style:"padding:0px",layout:"vbox",hideOnMaskTap:false,items:[{itemId:"languageToolBar",height:40,style:"background-color:#e6e6e6;border-top-left-radius:0.3em;border-top-right-radius:0.3em",items:[{top:10,left:10,html:"<b>Language</b>"},{itemId:"downloadToolBarClose",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"languageContent",layout:"vbox",padding:20,flex:1,items:[{flex:1,html:"We have noticed your Browser Language is different to the language of your publication. Would you like us to update the text to match your Browser Language."},{itemId:"languageButtonsContainer",height:40,layout:"hbox",defaults:{height:40,layout:{type:"hbox",align:"middle",pack:"center"}},items:[{itemId:"updateButton",flex:1,style:"background-color:#458fbb; color:white",items:[{html:"Update"}]},{width:20},{itemId:"cancelButton",flex:1,style:"background-color:#458fbb; color:white",items:[{html:"Cancel"}]}]}]}]},initialize:function(){var d=this;console.log("INITIALIZE");var b=d.getComponent("languageToolBar");d.closeButton=b.getComponent("downloadToolBarClose");var a=d.getComponent("languageContent");var c=a.getComponent("languageButtonsContainer");d.updateButton=c.getComponent("updateButton");d.cancelButton=c.getComponent("cancelButton");d.setCancelListener();d.setUpdateListener()},setCancelLisa)})},setUpdateListener:function(){var a=this;a.updateButton.element.on("tap",function(){a.fireEvent("update")})}},0,["readerlanguage"],["component","container","panel","overlay","readerlanguage"],{component:true,container:true,panel:true,overlay:true,readerlanguage:true},["widget.readerlanguage"],0,[InfinityMobile.view,"ReaderLanguagePopup"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderOLinkObject",InfinityMobile.view.ReaderMediaObject,{config:{mediaObject:"",html:'<img class="newsdayObject" style="height100%;width:100%;" src="../assets/newsday/link.jpg" />'},initialize:function(){var a=this;InfinityMobile.view.ReaderMediaObject.prototype.initialize.apply(this,arguments);a.element.dom.style.background="none";a.element.on({tap:"onTap",scope:a})},onTap:function(){var c=this;var b=c.mediaObject.url;window.open(b);if(typeof trackReaderEvent!="undefined"){var a=c.mediaObject.page;var d=InfinityMobile.app.getController("MediaController").getSectionName(a);trackReaderEvent("link",{url:b,pageNum:a,section:d})}}},0,["readerolinkobject"],["component","container","readermediaobject","readerolinkobject"],{component:true,container:true,readermediaobject:true,readerolinkobject:true},["widget.readerolinkobject"],0,[InfinityMobile.view,"ReaderOLinkObject"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderOVideo",Ext.Container,{config:{fullscreen:true,modal:true,style:"background-color:black;",height:"100%",width:"100%",layout:"vbox",zIndex:99999999,items:[{itemId:"closeBtn",right:10,top:10,width:40,height:40,cls:"backgroundImage pointerCursor",style:"background-image:url('resources/images/article-close-btn-white.png');background-size:contain;"},{itemId:"videoArea",flex:1,layout:"vbox",items:[{itemId:"video",style:"background-color:black;",flex:2},{itemId:"caption",width:"100%",style:"background-color:#333333;color:white;padding: 10px;",docked:"bottom",flex:1}]}]},initialize:function(){var b=this;if(b.config.url!=null){b.url=b.config.url;b.getComponent("closeBtn").element.on({tap:"close",scope:b});var c=Ext.create("Ext.Panel",{config:{modal:true,height:"100%",width:"100%",centered:true},initi0%)"}});c.show();if(b.url.indexOf("http://")!=-1){var a=b.url.substring(7,b.url.length);a="../../Newsday/getatex.aspx?url=http://www.newsday.com/iosfeeds/"+a+"?device=ipad2&_dc=1445010088130&limit=25";$.ajax({type:"GET",url:a,data:{get_param:"value"},dataType:"json",complete:function(){},success:function(e){var f="video.aspx?url="+e.content.mp4+"&newsday=true";b.videoArea=b.getComponent("videoArea");b.video=b.videoArea.getComponent("video");b.video.setHtml("<iframe id='newsdayVideo' onload='parent.onload()'  allowfullscreen='true' webkitallowfullscreen='true' mozallowfullscreen='true' src='"+f+"' width='100%' height='100%' frameborder='0' scrolling='no' />");var d=$(b.videoArea.element.dom).find(".x-innerhtml")[0];$(d).css("height","100%");b.getComponent("videoArea").getComponent("caption").setHtml("<div style='width:100%;color:white;padding:10px;'><p>"+e.content.caption+"</p></div>");onload=function(){c.destroy()};videoplay=function(){console.log("play")};b.fireEvent("ovideoinitialized",b,e)},error:function(){c.destroy();b.fireEvent("oVideoError",b)}})}}},close:function(){var a=this;a.fireEvent("closeOVideo",a)}},0,["readerovideo"],["component","container","readerovideo"],{component:true,container:true,readerovideo:true},["widget.readerovideo"],0,[InfinityMobile.view,"ReaderOVideo"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderOGallery",Ext.Container,{config:{fullscreen:true,modal:true,style:"background-color:black;",height:"100%",width:"100%",zIndex:99999999,layout:{type:"vbox"},items:[{itemId:"content",flex:1,width:"100%",layout:{type:"hbox"},items:[{itemId:"closeBtn",right:10,top:10,width:40,height:40,cls:"backgroundImage pointerCursor",style:"background-image:url('resources/images/article-close-btn-white.png');background-size:contain;"},{itemId:"images",directionLock:true,height:"100%",width:"100%",style:"background-color:black;"},{itemId:"caption",bottom:0,width:"100%",style:"background-color:black;opacity:0.8;color:white;padding: 10px;max-height:200px;",hidden:true,flex:1,scrollable:{directionLock:true,direction:"vertical"}}]},{itemId:"navBar",docked:"bottom",height:40,width:"100%",layout:{type:"hbox",pack:"center",align:"middle"},items:[{itemId:"prev",width:25,style:"text-align:center",html:'<i class="fa fa-angle-left fa-lg" aria-hidden="true"></i>'},{itemId:"counter",margin:"0px 20px 0px 20px"},{itemId:"next",width:25,style:"text-align:center",html:'<i class="fa fa-angle-right fa-lg" aria-hidden="true"></i>'},{itemId:"captionIcon",cls:"captionicon",right:0,padding:10,html:'<i class="fa fa-info-circle fa-lg" aria-hidden="true"></i>'}]}]},initialize:function(){var k=this;k.content=k.getComponent("content");k.navBar=k.getComponent("navBar");k.navBar.setStyle({backgroundColor:"#"+settings.topbar.backgroundColor,color:"#"+settings.topbar.color});if(k.config.article!=null){k.article=k.config.article}k.captionIcon=k.navBar.getComponent("captionIcon");k.captionIcon.element.on({tap:k.caption,scope:k});k.previousBtn=k.navBar.getComponent("prev");k.nextBtn=k.navBar.getComponent("next");k.counter=k.navBar.getComponent("counter");if(k.config.url!=null){k.url=k.config.url;k.captions=[];k.content.getComponent("closeBtn").element.on({tap:"close",scope:k});var b=Ext.create("InfinityMobile.view.ReaderOGalleryLoading",{});if(k.url.indexOf("http://")!=-1){var c=k.url.substring(7,k.url.length)}else{c=k.url}c="../../Newsday/getatex.aspx?url=http://www.newsday.com/iosfeeds/"+c+"?device=phone&_dc=1445010088130&limit=25";$.ajax({type:"GET",url:c,data:{get_param:"value"},dataType:"json",complete:function(){b.destroy()},success:function(n){var l=[];for(var m=0;m<n.content.images.length;m++){var p={imageUrl:n.content.images[m].image_path,pageNo:m,config:{pageNo:m}};k.captions[m]=n.content.images[m].caption;l[l.length]=p}k.counter.setHtml("1 of "+k.captions.length);if(k.captions[0]!=null){if(k.captions[0].trim().length>0){k.captionIcon.show()}else{k.captionIcon.hide()}}else{k.captionIcon.hide()}k.setupCarousel(l);k.data=n;var o="1 of "+k.captions.length;k.fireEvent("ogalleryinitialized",k,n,o)}})}else{if(k.config.images!=null){k.images=k.config.images;k.captions=[];k.content.getComponent("closeBtn").element.on({tap:"close",scope:k});var b=Ext.create("InfinityMobile.view.ReaderOGalleryLoading",{});var d=[];for(var h=0;h<k.images.length;h++){var f={imageUrl:k.images[h].url,pageNo:h,config:{pageNo:h}};d[d.length]=f;var e="";if(k.images[h].credit!=null){if(k.images[h].credit.trim().length>0){e=" ("+k.images[h].credit+")"}}k.captions[h]=k.images[h].caption+e}b.destroy();k.counter.setHtml("1 of "+k.captions.length);if(k.captions[0]!=null){if(k.captions[0].trim().length>0){k.captionIcon.show()}else{k.captionIcon.hide()}}else{k.captionIcon.hide()}k.setupCarousel(d);var j="1 of "+k.captions.length;var a=k.article.byline;if(k.article.reporters!=null&&k.article.reporters.length>0){for(var h in k.article.reporters){a+=", "+k.article.reporters[h].name}}var g={author:a,contentTitle:k.article.headline,contentType:"photolist"};k.fireEvent("ogalleryinitializedArticle",k,g,j)}}k.previousBtn.element.on({tap:function(){k=this;k.carousel.previous()},scope:k});k.nextBtn.element.on({tap:function(){k=this;k.carousel.next()},scope:k})},close:function(){var a=this;a.fireEvent("closeOGallery",a)},caption:function(){var b=this;if(b.content.getComponent("caption").isHidden()){b.index=b.carousel.getActiveItem().getPageNo();if(b.captions[b.index].length>0){b.content.getComponent("caption").setHtml("<div style='width:100%;color:white;padding:10px;'><p>"+b.captions[b.index]+"</p></div>");b.content.getComponent("caption").show();var a=$(b.content.getComponent("caption").element.down(".x-innerhtml").dom).height();if(a>120){b.content.getComponent("caption").setHeight(140)}else{b.content.getComponent("caption").setHeight(a+20)}b.content.getComponent("caption").getScrollable().getScroller().scrollTo(0,0)}}else{b.content.getComponent("caption").hide()}},itemChange:function(c,k,b,g){var j=this;j.index=j.carousel.getActiveItem().getPageNo();if(!j.content.getComponent("caption").isHidden()){j.content.getComponent("caption").setHtml("<div style='width:100%;color:white;padding:10px;'><p>"+j.captions[j.index]+"</p></div>");var h=$(j.content.getComponent("caption").element.down(".x-innerhtml").dom).height();if(h>120){j.content.getComponent("caption").setHeight(140)}else{j.content.getComponent("caption").setHeight(h+20)}j.content.getComponent("caption").getScrollable().getScroller().scrollTo(0,0)}if(j.captions[j.index]!=null){if(j.captions[j.index].trim().length>0){j.captionIcon.show()}else{j.captionIcon.hide()}}else{j.captionIcon.hide()}j.counter.setHtml((c.getActiveItem().getPageNo()+1)+" of "+j.captions.length);var f=(c.getActiveItem().getPageNo()+1)+" of "+j.captions.length;if(j.url!=null){if(j.data!=null){j.fireEvent("ogalleryinitialized",j,j.data,f)}}else{var a=j.article.byline;if(j.article.reporters!=null&&j.article.reporters.length>0){for(var e in j.article.reporters){a+=", "+j.article.reporters[e].name}}var d={author:a,contentTitle:j.article.headline,contentType:"photolist"};j.fireEvent("ogalleryinitializedArticle",j,d,f)}},setupCar:b})}},0,["readerogallery"],["component","container","readerogallery"],{component:true,container:true,readerogallery:true},["widget.readerogallery"],0,[InfinityMobile.view,"ReaderOGallery"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderOGalleryItem",Ext.Container,{config:{pageNo:0},initiat"}}},0,["readerogalleryitem"],["component","container","readerogalleryitem"],{component:true,container:true,readerogalleryitem:true},["widget.readerogalleryitem"],0,[InfinityMobile.view,"ReaderOGalleryItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderOGalleryLoading",Ext.Container,{config:{modal:true,fullscreen:true,centered:true,zIndex:999999999},initieat"}},0,["readerogalleryloading"],["component","container","readerogalleryloading"],{component:true,container:true,readerogalleryloading:true},["widget.readerogalleryloading"],0,[InfinityMobile.view,"ReaderOGalleryLoading"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderOVideoObject",InfinityMobile.view.ReaderMediaObject,{config:{html:'<img class="newsdayObject" style="height100%;width:100%;" src="../assets/newsday/watch_video.jpg" />'},initialize:function(){var a=this;InfinityMobile.view.ReaderMediaObject.prototype.initialize.apply(this,arguments);a.element.dom.style.background="none";a.element.on({tap:a.onTap,scope:a})},onTap:function(){var b=this;var a=b.mediaObject.url;b.fireEvent("ovideoclicked",b,a)}},0,["readerovideoobject"],["component","container","readermediaobject","readerovideoobject"],{component:true,container:true,readermediaobject:true,readerovideoobject:true},["widget.readerovideoobject"],0,[InfinityMobile.view,"ReaderOVideoObject"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderOGalleryObject",InfinityMobile.view.ReaderMediaObject,{config:{mediaObject:"",html:'<img class="newsdayObject" style="height100%;width:100%;" src="../assets/newsday/view_gallery.jpg" />'},initialize:function(){var a=this;InfinityMobile.view.ReaderMediaObject.prototype.initialize.apply(this,arguments);a.element.dom.style.background="none";a.element.on({tap:"onTap",scope:a})},b,a)}},0,["readerogalleryobject"],["component","container","readermediaobject","readerogalleryobject"],{component:true,container:true,readermediaobject:true,readerogalleryobject:true},["widget.readerogalleryobject"],0,[InfinityMobile.view,"ReaderOGalleryObject"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderVideoLinkObject",InfinityMobile.view.ReaderMediaObject,{config:{mediaObject:"",style:"background-color:black;text-align:center;overflow:hidden",cls:"readerLightbox",layout:"vbox",padding:"25%"},initialize:function(){var c=this;InfinityMobile.view.ReaderMediaObject.prototype.initialize.apply(this,arguments);var d=hexToRgb("000000");c.element.dom.style.background="rgba("+d+","+0+")";var b="";if(c.mediaObject.param2!=null){if(c.mediaObject.param2.length>0){var a=c.mediaObject.param2.split("|");if(a.length>1){b=a[1]}else{b="Play Video"}}else{b="Play Video"}}else{b="Play Video"}c.element.on({tap:"onTap",scope:c})},onTap:function(){var a=this;if(a.mediaObject.url=="http://LIGHTBOX"||a.mediaObject.param3=="LIGHTBOX"){a.fireEvent("lightbox",a,a.mediaObject,"video")}}},0,["readervideolinkobject"],["component","container","readermediaobject","readervideolinkobject"],{component:true,container:true,readermediaobject:true,readervideolinkobject:true},["widget.readervideolinkobject"],0,[InfinityMobile.view,"ReaderVideoLinkObject"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderLightbox",Ext.Container,{config:{modal:true,centered:true,hideOnMaskTap:true,height:1000,width:1000,maxHeight:"80%",maxWidth:"80%",layout:"vbox",items:[{itemId:"topBar",height:40,layout:"hbox",items:[{id:"toolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{itemId:"content",flex:1,cls:"innerhtmlfullheight",style:"background-color:white"}]},initi()}}},setCloseButtonListenter:function(){var a=this;a.closeButton.element.on("tap",function(){a.close()})},setImageContent:function(){var b=this;b.fileGuid=b.mediaObject.file;var c=b.fileGuid.substr(0,1);var a=b.fileGuid.substr(1,1);b.imageurl="http://pages.cdn.pagesuite.com/media/"+c+"/"+a+"/"+b.fileGuid+".jpg";b.setStyle({maxHeight:"80%",maxWidth:"80%"});b.content.setHtml("<img src='"+b.imageurl+"' style='width:100%;height:100%' />")},setVideoContent:function(){var a=this;if(a.mediaObject!=""){if(a.mediaObject.url.indexOf("http://www.youtube.com/watch")!=-1){a.initializeYoutube()}else{if(a.mediaObject.url.indexOf("http://")!=-1){a.initialiseVimeo()}else{if(a.mediaObject.file!=""){a.initializeMP4()}}}}},initializeMP4:function(){var b=this;b.fileGuid=b.mediaObject.file;var c=b.fileGuid.substr(0,1);var a=b.fileGuid.substr(1,1);b.videoUrl="http://source.pagesuite.com/media/"+c+"/"+a+"/"+b.fileGuid+".mp4";videoUrl="video.aspx?guid="+b.fileGuid;b.setHtml("<iframe allowfullscreen='true' webkitallowfullscreen='true' mozallowfullscreen='true' src='"+videoUrl+"' width='100%' height='100%'  frameborder='0' scrolling='no' />");videoplay=function(){b.videoPlayListener()}},initializeYoutube:function(){var b=this;b.youtubeCode=b.mediaObject.url.substr(b.mediaObject.url.length-11);var a="http://www.youtube.com/embed/"+b.youtubeCode;b.content.setHtml("<iframe onload='parent.youtubeplay()' src='"+a+"?enablejsapi=1' width='100%' height='100%' frameborder='0' id='"+a+"'/>");youtubeplay=function(){var c=new YT.Player(document.getElementById(a),{events:{onStateChange:b.onPlayerStateChange}})}},videoPlayListener:function(){var b=this;var a=Ext.getStore("SettingStore");console.log(b);if(a.data.items[0].raw.tracking!=null){var c=a.data.items[0].raw.tracking.trackingType;if(c=="GA"){ga("set","page","/"+b.mediaObject.page);ga("send","pageview");ga("send","event","MP4","play",b.mediaObject.name,b.mediaObject.page)}else{$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackOmniture.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})}}$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackPageSuite.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})},onPlayerStateChange:function(c){var b=this;if(c.data==1){var b=this;var a=Ext.getStore("SettingStore");if(a.data.items[0].raw.tracking!=null){var d=a.data.items[0].raw.tracking.trackingType;if(d=="GA"){ga("set","page","/"+b.startpageNumber);ga("send","pageview");ga("send","event","Youtube","play",c.target.getVideoData().title,b.startpageNumber)}else{$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackOmniture.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})}}$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackPageSuite.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})}},close:function(){var a=this;a.destroy()},fue})},fa)}})}},0,["readerlightbox"],["component","container","readerlightbox"],{component:true,container:true,readerlightbox:true},["widget.readerlightbox"],0,[InfinityMobile.view,"ReaderLightbox"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderImageLinkObject",InfinityMobile.view.ReaderMediaObject,{config:{mediaObject:"",cls:"readerLightbox",items:[{itemId:"tooltip",style:"position:absolute !important;"}]},initialize:function(){var a=this;InfinityMobile.view.ReaderMediaObject.prototype.initialize.apply(this,arguments);a.element.on({tap:"onTap",scope:a});if(a.mediaObject!=""){a.getComponent("tooltip").setHtml('<div style="position:absolute;" class="tool-tip">Click here</div>');a.element.dom.onmousemove=(function(b){if(b.clientX<($(document).width()/2)){a.getComponent("tooltip").element.dom.style.webkitTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-15)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltip").element.dom.style.MozTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-15)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltip").element.dom.style.msTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-15)+"px, 0) scale3d("+1+","+1+",1)"}else{a.getComponent("tooltip").element.dom.style.MozTransform="translate3d("+(b.offsetX-(a.getComponent("tooltip").element.dom.scrollWidth+15))+"px, "+(b.offsetY-15)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltip").element.dom.style.webkitTransform="translate3d("+(b.offsetX-(a.getComponent("tooltip").element.dom.scrollWidth+15))+"px, "+(b.offsetY-15)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltip").element.dom.style.msTransform="translate3d("+(b.offsetX-(a.getComponent("tooltip").element.dom.scrollWidth+15))+"px, "+(b.offsetY-15)+"px, 0) scale3d("+1+","+1+",1)"}})}},e")}}},0,["readerimagelinkobject"],["component","container","readermediaobject","readerimagelinkobject"],{component:true,container:true,readermediaobject:true,readerimagelinkobject:true},["widget.readerimagelinkobject"],0,[InfinityMobile.view,"ReaderImageLinkObject"],0));(Ext.cmd.derive("InfinityMobile.view.Note",Ext.Container,{height:"1px",width:"1px",fullscreen:true,draggable:{direction:"both",constraint:null},config:{items:[{itemId:"textF"}]},initialize:function(){var b=this;if(b.textData==null){b.textData=""}console.log("Position");console.log(b.xAxis+"     "+b.yAxis);if(b.xAxis==null){var c=0}if(b.yAxis==null){var a=0}this.getComponent("textF").setHtml('<textarea id="note" style="font-size:8pt;background-color:yellow;position:absolute;left:'+b.xAxis+"px;top:"+b.yAxis+'px;" onkeyup="parent.typing()" onkeydown="parent.stopTyping()" rows="5" cols="15">'+b.textData+"</textarea>");b.timer;b.done=1000;typing=function(){clearTimeout(b.timer);b.timer=setTimeout(doneTyping,b.done)};stopTyping=function(){clearTimeout(b.timer)};doneTyping=function(){console.log("PageNo");console.log(document.getElementById("note"));if(b.x==null){var d=0}else{var d=b.x}if(b.y==null){var h=0}else{var h=b.y}var f='{"x":'+d+',"y":'+h+', "text":"'+document.getElementById("note").value+'", "page":'+b.pageNo+"}";try{localStorage.setItem("note"+b.pageNo,f)}catch(g){console.log(g)}};b.element.on("ageY});b.element.on("dragstart",function(d){d.stopPropagation()});b.element.on("dragend",function(g){g.stopPropagation();console.log(g);b.x=g.pageX-g.event.offsetX;b.y=g.pageY-g.event.offsetY;var f='{"x":'+b.x+',"y":'+b.y+', "text":"'+document.getElementById("note").value+'", "page":'+b.pageNo+', "docWidth":'+$(document).width()+', "docHeight":'+$(document).height()+"}";try{localStorage.setItem("note"+b.pageNo,f)}catch(d){console.log(d)}})}},0,0,["component","container"],{component:true,container:true},0,0,[InfinityMobile.view,"Note"],0));(Ext.cmd.derive("InfinityMobile.view.Main",Ext.Panel,{config:{layout:"card",pageNo:""},loadArticle:function(a){var b=this;console.log("Loading Article!");b.fireEvent("loadArticle",a)},loadRd,a)},loadFlashRc,a)},cacheLatestEd",b)},loab,a)},loadModalView:function(b){var a=this;a.fireEvent("loadModalView",b)},removeView:function(){var a=this;a.fireEvent("removeView")}},0,["main"],["component","container","panel","main"],{component:true,container:true,panel:true,main:true},["widget.main"],0,[InfinityMobile.view,"Main"],0));(Ext.cmd.derive("InfinityMobile.view.Reader",Ext.Panel,{showToolBar:true,config:{fullscreen:true,layout:"vbox",showToolBar:true,style:"transition: .4s ease-out;"},beforeInitialize:function(){var a=this;a.element.on({singletap:"onTap",scope:this})},initialize:function(){var a=this;a.fireEvent("ready",a);if(window.SpeechSynthesisUtterance!=undefined){window.speechSynthesis.cancel();$(window).uPED"});window.document.addEventListener("visibilitychPED"})}},onTap:function(){var a=this;a.fireEvent("readertap",a)}},0,["reader"],["component","container","panel","reader"],{component:true,container:true,panel:true,reader:true},["widget.reader"],0,[InfinityMobile.view,"Reader"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderToolbar",Ext.Toolbar,{beforeInitialize:function(){var a=this;a.element.on({tap:"onTap",scope:this})},config:{cls:"toolbar",items:[{xtype:"button",text:"Back",action:"toolbarback"},{xtype:"container",flex:1},{xtype:"button",text:"<",action:"toolbarprevious"},{xtype:"textfield",id:"toolbarpages",placeHolder:"1 / 76",width:"105px"},{xtype:"button",text:">",action:"toolbarnext"},{xtype:"container",flex:1},{xtype:"button",text:"Menu",action:"toolbarmenu"},{itemId:"tooltip",html:'<div style="position:absolute;" class="tool-tip"></div>'}]},onTap:function(a){a.stopPropagation()}},0,["readertoolbar"],["component","container","toolbar","readertoolbar"],{component:true,container:true,toolbar:true,readertoolbar:true},["widget.readertoolbar"],0,[InfinityMobile.view,"ReaderToolbar"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderToolbarBottom",Ext.Container,{beforeInitiis})},config:{style:"background-color:rgba(0, 0, 0, 0.7) !important; padding:8px; padding-top:26px; padding-bottom:0",layout:"vbox",items:[{itemId:"toolbarClose",height:26,width:75,right:-8,top:-26,padding:"0 8px 0 0",style:"font-family:arial;color:#cccccc",layout:{type:"hbox",align:"center",pack:"right"},items:[{itemId:"closeTxt",html:"Close",height:18,style:"font-size:16px;margin-right:5px"},{height:18,html:"<img src='../assets/article view/article-close-btn.png' style='width:16px' />"}]},{flex:1,itemId:"scrollerContainer",scrollable:"horizontal"}]},initint()},setCloseEvent:function(){var a=this;a.toolbarClose.element.on("tap",function(){a.fireEvent("close",a)})},onTap:function(a){a.stopPropagation()}},0,["readertoolbarbottom"],["component","container","readertoolbarbottom"],{component:true,container:true,readertoolbarbottom:true},["widget.readertoolbarbottom"],0,[InfinityMobile.view,"ReaderToolbarBottom"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderPages",Ext.Container,{initialize:function(){var a=this;a.fireEvent("initialized",a)},config:{id:"pagescontainer",layout:"hbox",height:"100%",defaults:{width:150}}},0,["readerpages"],["component","container","readerpages"],{component:true,container:true,readerpages:true},["widget.readerpages"],0,[InfinityMobile.view,"ReaderPages"],0));(Ext.cmd.derive("InfinityMobile.view.Blocker",Ext.Container,{config:{top:0,left:0,width:"100%",height:"100%",layout:"fit",style:"background:rgba(0, 0, 0, 0.75)"}},0,["blocker"],["component","container","blocker"],{component:true,container:true,blocker:true},["widget.blocker"],0,[InfinityMobile.view,"Blocker"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderMenuClose",Ext.Container,{config:{html:"Close",style:"color:white; margin-bottom:25px"},initi:a})},on()}},0,["readermenuclose"],["component","container","readermenuclose"],{component:true,container:true,readermenuclose:true},["widget.readermenuclose"],0,[InfinityMobile.view,"ReaderMenuClose"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderMenuSection",InfinityMobile.view.Overlay,{config:{width:250,layout:"vbox",style:"background-color:#1e1e1e;padding:0; border-radius:0; height:calc(100% - 40px)",right:0,top:40,items:[{itemId:"sectionitemscontainer",style:"background-color:#1e1e1e;",layout:"vbox",height:"100%",defaults:{padding:15,style:"color:#ffffff"},items:[{style:"color:#cccccc; font-size:14px",id:"sectionitemback",html:"<img src='../assets/menu/menu-arrow-left-ic.png' style='height:13px; margin-right:10px' />BACK"}]}]},initi",a)},backtapped:function(){var a=this;a.fireEvent("back",a)}},0,["readermenusection"],["component","container","panel","overlay","readermenusection"],{component:true,container:true,panel:true,overlay:true,readermenusection:true},["widget.readermenusection"],0,[InfinityMobile.view,"ReaderMenuSection"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderMenuSectionItem",Ext.Container,{config:{style:"font-size:14px;color:#cccccc;cursor:pointer",name:"",pageNumber:""},initialize:function(){var a=this;a.name=a._name;a.pageNumber=a._pageNumber;a.setHtml(a.name);if(settings.newsday!=null){a.addCls("menuItem")}a.element.on({tap:"onTap",scope:a})},onTap:function(b){var a=this;a.fireEvent("sectionclick",a);b.stopPropagation()}},0,["readermenusectionitem"],["component","container","readermenusectionitem"],{component:true,container:true,readermenusectionitem:true},["widget.readermenusectionitem"],0,[InfinityMobile.view,"ReaderMenuSectionItem"],0));(Ext.cmd.derive("InfinityMobile.view.InfiniteCarousel",Ext.Carousel,{initialize:function(){var a=this;Ext.carousel.Carousel.prototype.initialize.call(this);a.on("activeitemchange","handleItemChange",this);a._visiblePages=Math.min(a._visiblePages,a.getData().length);a.setCards();a.setOrientationChange();a.canChangeOrientation=true;a.element.onBefore("touchstart","beforeTap",this);a.element.onAfter("touchend","beforeTouchEnd",this)},config:{indicator:false,data:false,pageNumber:0,skipActiveItemChange:true,pageTemplate:false,visiblePages:3,directionLock:true,landscapePageIncrement:1,mode:"double"},setPageTemplate:function(a){this.pageTemplate=a},setCards:function(){var e=this;if(Ext.os.is.Desktop){e.setStyle("background-color:#e1e1e1;")}if(e._mode=="single"){e._landscapePageIncrement=1}e._skipActiveItemChange=true;var c=1;if(e.returnOrientation()=="landscape"){c=e.getLandscapePageIncrement()}if(e._pageNumber==0){for(var b=0;b<e._visiblePages;b++){var d=Math.min((b*c),(e.getData().length-1));e.add(e.createCard(e.getData()[d],d,e.getData()))}e.setActiveItem(0)}else{if(e._pageNumber==(e.getData().length-1-pageOffset)){for(var b=(e._pageNumber-2);b<e.getData().length;b++){e.add(e.createCard(e.getData()[b],b,e.getData()))}e.setActiveItem(2)}else{if(c==2){var a=0;for(var b=(e._pageNumber-(1*c));b<(e._pageNumber+(2*c));b+=c){if(b>=0){e.add(e.createCard(e.getData()[b],b,e.getData(),a));a++}}}else{for(var b=(e._pageNumber-(1*c));b<(e._pageNumber+(2*c));b+=c){e.add(e.createCard(e.getData()[b],b,e.getData()))}}e.setActiveItem(1)}}e._skipActiveItemChange=false},handleItemChange:function(h,g,d,e){var f=this;var f=this;var j=1;if(f.returnOrientation()=="landscape"){j=f.getLandscapePageIncrement()}if(!f._skipActiveItemChange){if(g.getPageNo()>d.getPageNo()){var c=Math.max(d.getPageNo(),0);var b=1;var a=Math.max(g.getPageNo(),0);if(f.getData().length%2==1&&a==f.getData().length-2&&f._mode=="double"&&f.returnOrientation()=="landscape"){b=2}if(c==0||g.getPageNo()>=(f.getData().length-b-pageOffset)){}else{f.addCardToFront(h,h.getItems().items[0],j)}f._pageNumber+=j;f._pageNumber=Math.min(f._pageNumber,(f.getData().length-1-pageOffset))}else{var a=Math.max(g.getPageNo(),0);if(a==0||d.getPageNo()>=(f.getData().length-1-pageOffset)){if(a==0&&d.getPageNo()==1&&f._mode=="double"&&f.returnOrientation()=="landscape"&&f.getData().length>3){d.setPageNo(2);d.mappedPageNumber=flatPlanData.reversePageMapper[3]-1;d.imagetoload=d.landscapeimage;d.portraitTileImage=d.landscapeTileImage;h.getItems().items[2].setPageNo(4);h.getItems().items[2].mappedPageNumber=flatPlanData.reversePageMapper[5]-1;h.getItems().items[2].imagetoload=h.getItems().items[2].landscapeimage;h.getItems().items[2].portraitTileImage=h.getItems().items[2].landscapeTileImage}if(d.getPageNo()>=(f.getData().length-1-pageOffset)&&a%2==0&&d.getPageNo()>=(f.getData().length-1-pageOffset)&&(f.getData().length-pageOffset)%2==0){j=1}}else{if(d.getPageNo()==(f.getData().length-2-pageOffset)&&f.getData().length-pageOffset%2==1&&f._mode=="double"&&f.returnOrientation()=="landscape"){f.addCardToFront(h,h.getItems().items[pageOffset],0)}f.addCardToBack(h,h.getItems().items[2],j)}f._pageNumber-=j;f._pageNumber=Math.max(f._pageNumber,0)}}if(d!=null){if(d.pauseVideos!=null){d.pauseVideos()}}},updateItemCSS:function(f,d){var e=this;var a=f.getItems().items;for(var c=0;c<a.length;c++){var b=a[c];if(b._itemId!=d._itemId){b.setCls("")}}d.setCls("selecteditem")},createCard:function(f,b,a,c){var e=this;var d;if(!e.pageTemplate){d={pageNo:b,html:"Page: "+b}}else{d=e.pageTemplate(f,b,a)}return d},addCardToFront:function(f,c,b){var d=this;c._skipActiveItemChange=true;f.remove(c,true);var a=1;if(d.returnOrientation()=="landscape"){a=d.getLandscapePageIncrement()}var e=(d._pageNumber+b+a);e=Math.min(parseInt(e),(d.getData().length-1));f.add(d.createCard(d.getData()[e],e,d.getData()))},addCardToBack:function(f,a,c){var d=this;var b=1;if(d.returnOrientation()=="landscape"){b=d.getLandscapePageIncrement()}a._skipActiveItemChange=true;f.remove(a,true);var e=(d._pageNumber-c-b);e=Math.max(e,0);f.insert(0,d.createCard(d.getData()[e],e,d.getData()))},jumpToFirst:function(){this.jumpToPage(0)},jumpToLast:function(){this.jumpToPage((this.getData().length-1))},jumpToPage:function(b){var c=this;if((settings.reader.reverse!=null&&settings.reader.reverse=="true")||(settings.reader.startAtLastPage!=null&&settings.reader.startAtLastPage=="true")){b=(this.getData().length-b)-1}var a=b;var a=Math.max(a,(this.getData().length-1));a=Math.min(a,0);if(b!=c._pageNumber){if(c._mode=="single"||c.returnOrientation()=="portrait"){if(b==(c._pageNumber+1)){c.next()}else{if(b==(c._pageNumber-1)){c.previous()}else{c.removeAll(true);c._pageNumber=b;c.setCards()}}}else{if(b==(c._pageNumber+2)){c.next()}else{if(b==(c._pageNumber-2)){c.previous()}else{c.removeAll(true);c._pageNumber=b;c.setCards()}}}}},setOrientationChange:function(){var a=this;var b=(function(){var c=0;return function(e,d){clearTimeout(c);c=setTimeout(e,d)}})();if(Ext.os.is.Desktop){$(window).on("resize",function(){b(function(){a.onResize()},250)})}else{if(Ext.os.is.Android){$(window).on("resize",function(){setTimeout(function(){a.onResize()},0)})}else{Ext.Viewport.on("orientationchze()})}}},isDPS:function(){var a=this;return(a.returnOrientation()=="landscape"&&a._mode=="double")},onResize:function(){var e=this;e.onSizeChange();e.fireEvent("resizeArticleController");e.fireEvent("resizeDynamicArticles");e.fireEvent("resizeClipping");if(e.element.dom.clientWidth!=0){var d=e.getActiveItem();if(d.onResize!=null){d.onResize()}var a=e.getItems().items;for(var b=0;b<a.length;b++){var c=a[b];if(c.getPageNo()!=d.getPageNo()){var c=a[b];if(c.onResize!=null){c.onResize()}}}}e.fireEvent("updatePageNumber",e)},disableTiling:function(){var b=this;if(b.element.dom.clientWidth!=0){var a=b.getActiveItem();a.stopTiling();setTimeout(function(){var c=b.getItems().items;for(var d=0;d<c.length;d++){var e=c[d];if(e.getPageNo()!=a.getPageNo()){var e=c[d];e.stopTiling()}}},100)}},enableTiling:function(){var b=this;if(b.element.dom.clientWidth!=0){var a=b.getActiveItem();a.setTiling();setTimeout(function(){var c=b.getItems().items;for(var d=0;d<c.length;d++){var e=c[d];if(e.getPageNo()!=a.getPageNo()){var e=c[d];e.setTiling()}}},100)}},toggleDPS:function(){var b=this;if(b._mode=="single"){b._mode="double";b.setLandscapePageIncrement(2)}else{b._mode="single";b.setLandscapePageIncrement(1)}var a=b.getActiveItem();a.toggleDPS();setTimeout(function(){var c=b.getItems().items;for(var d=0;d<c.length;d++){var e=c[d];if(e.getPageNo()!=a.getPageNo()){var e=c[d];e.toggleDPS()}}},100);b.fireEvent("updatePageNumber",b)},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},beforeTap:function(){var a=this;PDFJS.isPaused=true},beforeTouchEnd:function(){var a=this;PDFJS.isPaused=false;a.fireEvent("resumePDF",a)}},0,["infinitecarousel"],["component","container","carousel","infinitecarousel"],{component:true,container:true,carousel:true,infinitecarousel:true},["widget.infinitecarousel"],0,[InfinityMobile.view,"InfiniteCarousel"],0));(Ext.cmd.derive("InfinityMobile.view.PDFInfiniteCarousel",Ext.Carousel,{initialize:function(){var a=this;Ext.carousel.Carousel.prototype.initialize.call(this);a.on("activeitemchange","handleItemChange",this);a.disable();a._visiblePages=Math.min(a._visiblePages,a.getData().length);a.setCards();a.setOrientationChange()},updateVisibility:function(){var c=this;var a=c.carouselItems;for(var b=0;b<a.length;b++){if(a[b].element.dom.style.transform=="translate3d(0px, 0px, 0px)"){a[b].element.dom.style.visibility="visible"}else{a[b].element.dom.style.visibility="hidden"}}},config:{indicator:false,data:false,pageNumber:0,skipActiveItemChange:true,pageTemplate:false,visiblePages:3,directionLock:true,landscapePageIncrement:1,mode:"double",zoomMode:"fit",cls:"pdfinfinitecarousel fit"},setPageTemplate:function(a){this.pageTemplate=a},setCards:function(){var f=this;if(f._mode=="single"){f._landscapePageIncrement=1}f._skipActiveItemChange=true;var d=f._landscapePageIncrement;var a=f.returnMappedPageNumber(f._pageNumber);if(f._pageNumber==0){for(var c=0;c<f._visiblePages;c++){var e=Math.min((c*d),(f.getData().length-1-pageOffset));f.add(f.createCard(f.getData()[e],e,f.getData()))}f.setActiveItem(0)}else{if(a==(f.getData().length-1-pageOffset)){if(f._mode=="single"){for(var c=0;c<3;c++){var h=f._pageNumber-2+c;f.add(f.createCard(f.getData()[h],h,f.getData()))}f.setActiveItem(2)}else{for(var c=0;c<3;c++){var h=f._pageNumber-4+(2*c);f.add(f.createCard(f.getData()[h],h,f.getData()))}f.setActiveItem(2)}}else{if(d==2){var b=0;for(var c=(f._pageNumber-(1*d));c<(f._pageNumber+(2*d));c+=d){var g=Math.max(c,0);g=Math.min(c,(f.getData().length-1));g=Math.max(0,g);f.add(f.createCard(f.getData()[g],g,f.getData(),b));b++}}else{for(var c=(f._pageNumber-(1*d));c<(f._pageNumber+(2*d));c+=d){f.add(f.createCard(f.getData()[c],c,f.getData()))}}f.setActiveItem(1)}}f._skipActiveItemChange=false},handleItemChange:function(j,h,c,f){var g=this;var k=g.getLandscapePageIncrement();if(!g._skipActiveItemChange){for(var e=0;e<j.carouselItems.length;e++){if(j.carouselItems[e].element.dom.style.transform=="translate3d(0px, 0px, 0px)"){j.carouselItems[e].element.dom.style.zIndex="10002"}else{j.carouselItems[e].element.dom.style.zIndex="10000"}}var b=h.getPageNo();var a=c.getPageNo();if(b>a){if(a==0||b==(g.getData().length-1-pageOffset)){}else{g.addCardToFront(j,j.getItems().items[0],k)}g._pageNumber+=k;g._pageNumber=Math.min(g._pageNumber,(g.getData().length-1-pageOffset))}else{if(b==0||a==(g.getData().length-1-pageOffset)){}else{g.addCardToBack(j,j.getItems().items[2],k)}g._pageNumber-=k;g._pageNumber=Math.max(g._pageNumber,0)}}if(g._mode=="double"){if(settings.reader.wrapAd!=null){if(settings.reader.wrapAd.hideLeftWrapperOnFirstPage!=null){if(settings.reader.wrapAd.hideLeftWrapperOnFirstPage=="true"){if(g.getActiveItem().getPageNo()==0){var d=document.getElementsByClassName("leftWrapper");if(d!=null){d[0].style.display="none"}}else{if($(window).width()/$(window).height()<=1.4){var d=document.getElementsByClassName("leftWrapper");if(d!=null){d[0].style.display="none"}}else{var d=document.getElementsByClassName("leftWrapper");if(d!=null){d[0].style.display="inline"}}}}else{var d=document.getElementsByClassName("leftWrapper");if(d!=null){d[0].style.display="inline"}}}}}if(c!=null){if(c.pauseVideos!=null){c.pauseVideos()}}g.fireEvent("pagechange",g)},returnMappedPageN]-1)},returnReverseMappedPageNumber:function(a){var b=this;if(b.returnOrientation()=="landscape"&&b._mode=="double"){return(flatPlanData.pageMapper[parseInt(a)+1]-1)}return a},creatrn d},createAdvertCard:function(a){card=Ext.create("InfinityMobile.view.AdvertPageViewer",{pageNo:a.pageNum});return card},addCardToFront:function(f,c,b){var d=this;c._skipActiveItemChange=true;f.remove(c,true);var a=d.getLandscapePageIncrement();var e=Math.min((d._pageNumber+b+a),d.getData().length-1-pageOffset);e=Math.min(parseInt(e),(d.getData().length-1));f.add(d.createCard(d.getData()[e],e,d.getData()))},addCardToBack:function(f,a,c){var d=this;var b=d.getLandscapePageIncrement();a._skipActiveItemChange=true;f.remove(a,true);var e=(d._pageNumber-c-b);e=Math.max(e,0);f.insert(0,d.createCard(d.getData()[e],e,d.getData()))},jumpToFirst:function(){this.jumpToPage(0)},jumpToLast:function(){var a=(this.getData().length-1-pageOffset);a=flatPlanData.reversePageMapper[a+1]-1;this.jumpToPage(a)},jumpToPage:function(b){var c=this;b=c.returnReverseMappedPageNumber(b);if(!isNaN(b)){if((settings.reader.reverse!=null&&settings.reader.reverse=="true")||(settings.reader.startAtLastPage!=null&&settings.reader.startAtLastPage=="true")){}var a=b;var a=Math.max(a,(this.getData().length-1));a=Math.min(a,0);if(b!=c._pageNumber){if(c._mode=="single"){if(b==(c._pageNumber+1)){c.next()}else{if(b==(c._pageNumber-1)){c.previous()}else{c.removeAll(true);c._pageNumber=b;c.setCards()}}}else{if(b==(c._pageNumber+2)){c.next()}else{if(b==(c._pageNumber-2)){c.previous()}else{c.removeAll(true);c._pageNumber=b;c.setCards()}}}}}},setOrientationChange:function(){var a=this;var b=(function(){var c=0;return function(e,d){clearTimeout(c);c=setTimeout(e,d)}})();if(Ext.os.is.Desktop){$(window).on("resize",function(){b(function(){a.onResize()},250)})}else{if(Ext.os.is.Android){$(window).on("resize",function(){setTimeout(function(){a.onResize()},0)})}else{Ext.Viewport.on("orientationchange","onResize",a)}}},le")},onR00)}},disableTiling:function(){var b=this;if(b.element.dom.clientWidth!=0){var a=b.getActiveItem();setTimeout(function(){var c=b.getItems().items;for(var d=0;d<c.length;d++){var e=c[d];if(e.getPageNo!=null){if(e.getPageNo()!=a.getPageNo()){var e=c[d]}}}},1000)}},enableTiling:function(){var b=this;if(b.element.dom.clientWidth!=0){var a=b.getActiveItem();setTimeout(function(){var c=b.getItems().items;for(var d=0;d<c.length;d++){var e=c[d];if(e.getPageNo!=null){if(e.getPageNo()!=a.getPageNo()){var e=c[d]}}}},1000)}},toggleDPS:function(){var f=this;if(f._mode=="single"){f._mode="double";f._pageNumber=flatPlanData.pageMapper[f._pageNumber+1]-1;f.setLandscapePageIncrement(2);if(f._zoomMode=="fit"){if(settings.reader.wrapAd!=null){if(settings.reader.wrapAd.hideLeftWrapperOnFirstPage!=null){if(settings.reader.wrapAd.hideLeftWrapperOnFirstPage=="true"){if(f.getActiveItem().getPageNo()==0){var g=document.getElementsByClassName("leftWrapper");if(g!=null){g[0].style.display="none"}}}else{var g=document.getElementsByClassName("leftWrapper");if(g!=null){g[0].style.display="inline"}}}else{var g=document.getElementsByClassName("leftWrapper");if(g!=null){g[0].style.display="inline"}}var c=document.getElementsByClassName("rightWrapper");if(c!=null){c[0].style.display="inline"}}}}else{f._mode="single";f._pageNumber=flatPlanData.reversePageMapper[f._pageNumber+1]-1;f.setLandscapePageIncrement(1);if(f._zoomMode=="fit"){var g=document.getElementsByClassName("leftWrapper");if(g[0]!=null){g[0].style.display="inline"}var c=document.getElementsByClassName("rightWrapper");if(c[0]!=null){c[0].style.display="inline"}}}var e=f.getActiveItem();e.toggleDPS(f._mode);var a=f.getItems().items;for(var b=0;b<a.length;b++){var d=a[b];if(d.getPageNo()!=e.getPageNo()){d.toggleDPSNonActive(f._mode,e)}}f.checkAdvertReplacement();f.fireEvent("updatePageNumber",f)},checkAdvertReplact()}},checkAdvertPlacement:function(){var g=this;var d=g.getItems().items;console.log(g,d);var f=g.getLandscapePageIncrement();var e=1;var a=(g._pageNumber+e+f)-1;a=Math.min(parseInt(a),(g.getData().length-1));var b=g.getData()[a].pages[0];var h=(g._pageNumber-e-f)+1;h=Math.max(h,0);var c=g.getData()[h].pages[0];g.checkPageReplacement(c,d[0],function(){d[0]._skipActiveItemChange=true;g.remove(d[0],true);g.insert(0,g.createCard(g.getData()[h],h,g.getData()))});g.checkPageReplacement(b,d[2],function(){d[2]._skipActiveItemChange=true;g.remove(d[2],true);g.add(g.createCard(g.getData()[a],a,g.getData()))})},checkPageReplacc()}},replaceLas()))},replaceFirs()))},toggleZoomMode:function(){var e=this;if(e._zoomMode=="fit"){e._zoomMode="fill";e.setCls("pdfinfinitecarousel fill")}else{e._zoomMode="fit";e.setCls("pdfinfinitecarousel fit")}e.onSizeChange();var d=e.getActiveItem();d.toggleZoomMode(e._zoomMode);var a=e.getItems().items;for(var b=0;b<a.length;b++){var c=a[b];if(c.getPageNo()!=d.getPageNo()){var c=a[b];c.toggleZoomMode(e._zoomMode)}}},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){a="landscape"}}return a},onDragStart:function(){var a=this},onDrag:function(a){},onDragEnd:function(){var a=this}x+1)},prex-1)}},0,["infinitecarousel2d"],["component","container","carousel","infinitecarousel2d"],{component:true,container:true,carousel:true,infinitecarousel2d:true},["widget.infinitecarousel2d"],0,[InfinityMobile.view,"PDFInfiniteCarousel"],0));(Ext.cmd.derive("InfinityMobile.view.2DInfiniteCarousel",InfinityMobile.view.InfiniteCarousel,{config:{direction:"horizontal",pageXPath:""},initialize:function(){var a=this;InfinityMobile.view.InfiniteCarousel.prototype.initialize.call(this);if(a.config.backgroundColor!=null){a.element.dom.style.background="#"+a.config.backgroundColor}a._zoomMode=a.config.zoomMode},creat,d)}},handleItemChange:function(e,c,d,a){var b=this;InfinityMobile.view.InfiniteCarousel.prototype.handleItemChange.apply(this,arguments);b.fireEvent("pagechange",b)}},0,["infinitecarousel2d"],["component","container","carousel","infinitecarousel","infinitecarousel2d"],{component:true,container:true,carousel:true,infinitecarousel:true,infinitecarousel2d:true},["widget.infinitecarousel2d"],0,[InfinityMobile.view,"2DInfiniteCarousel"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderPageViewer",Ext.Container,{config:{pageNo:"",page:false,previousPage:"",nextPage:"",style:"overflow:hidden",html:'<figure><div class="scrollerDiv"><div class="zoomDiv"><img style="visibility:hidden;vertical-align:middle" /><img style="visibility:hidden;vertical-align:middle" /><div class="mediaDiv"><div class="portrait"></div><div class="landscape"></div></div><div class="tileDiv" ><div class="portrait"><canvas /></div><div class="landscape"><canvas /></div></div></div></div></figure>',maxScale:3,scrollable:"both",editionGuid:"",cls:"readerpage animate",mode:"double"},beforeInitialize:function(){var a=this;a.isinitialized=false;a.mediaLoaded=false;a.thumbnailLoaded=false;a.usesCanvas=true;if(settings.page.maxZoomLevel!=null){a.setMaxScale(parseInt(settings.page.maxZoomLevel))}a.zoomMode=settings.reader.zoomMode},initialize:function(){var a=this;a.zoomLevel="none";a.on("painted",a.initializePage,a,{delay:10,single:true});a.mp4Objects=[];a.scroller=a.getScrollable().getScroller();a.scroller.setDisabled(true);a.figure=a.element.down("figure");a.scrollerDiv=a.figure.down("div");a.zoomDiv=a.scrollerDiv.down("div");a.image=a.zoomDiv.down("img").dom;a.landscapeimage=a.zoomDiv.down("img").next("img").dom;a.mediaDiv=a.zoomDiv.down("div");a.portraitMediaDiv=a.mediaDiv.down("div").dom;a.landscapeMediaDiv=a.mediaDiv.down("div").next("div").dom;a.portraitMediaDiv.style.zIndex=10;a.landscapeMediaDiv.style.zIndex=8;a.tileDiv=a.element.down(".tileDiv");a.tileCanvas=a.tileDiv.down("canvas").dom;a.element.addListener({dragstart:"onDragStart",drag:"onDrag",dragend:"onDragFinished",scope:a});a.scrollerDiv.addListener({scope:a,doubletap:a.onDoubleTap,pinchstart:a.onPinchStart,pinch:a.onPinch,pinchend:a.onPinchEnd});a.scroller.on({scope:a,scrollend:a.onScrollEnd})},initializePage:function(){var b=this;b.canvasInitialized=false;b.canTile=false;b.hasLoaded=false;b.orientation=b.returnOrientation();var a=b.getPageNo();if(b.returnOrientation=="landscape"){a=a-pageOffset}if(a%2==0){b.imagetoload=b.landscapeimage;b.landscapeimage.onload=function(){b.imageLoaded(this,"landscape")}}else{b.imagetoload=b.image;b.image.onload=function(){b.imageLoaded(this,"portrait")}}b.setUpImages();b.isinitialized=true},setUpImagesCSS:function(){var a=this;a.image.className="";a.landscapeimage.className="";a.portraitMediaDiv.className="";a.landscapeMediaDiv.className="";if((a.getPageNo()%2)==0){a.landscapeimage.portraitshow=true;a.image.portraitshow=false;a.image.className=a.returnLandscapeImageType();a.portraitMediaDiv.className=a.returnLandscapeImageType();if(a.getPreviousPage()==""){a.image.stayHidden=true}}else{a.image.portraitshow=true;a.landscapeimage.portraitshow=false;a.landscapeimage.className=a.returnLandscapeImageType();a.landscapeMediaDiv.className=a.returnLandscapeImageType();if(a.getNextPage()==""){a.landscapeimage.stayHidden=true}}},setUpImagesURL:function(){var a=this;if(((a.getPageNo())%2)==0){a.landscapeimage.pageNumber=a.getPage().pageIndex;a.getThumbnail(a.landscapeimage,a.getPage());if(a.getPreviousPage()!=""&&a.getPreviousPage().pageIndex!=-1){a.image.pageNumber=a.getPage().pageIndex-1;a.getThumbnail(a.image,a.getPreviousPage())}else{if(a.getPreviousPage()==""){a.image.pageNumber=0;a.getThumbnail(a.image,a.getPage())}else{a.image.pageNumber=-1;a.getThumbnail(a.image,a.getPreviousPage())}}}else{a.image.pageNumber=a.getPage().pageIndex;a.getThumbnail(a.image,a.getPage());if(a.getNextPage()!=""&&a.getNextPage().pageIndex!=-1){a.landscapeimage.pageNumber=a.getPage().pageIndex+1;a.getThumbnail(a.landscapeimage,a.getNextPage())}else{if(a.getNextPage()==""){a.landscapeimage.pageNumber=0;a.getThumbnail(a.landscapeimage,a.getPage())}else{a.landscapeimage.pageNumber=-1;a.getThumbnail(a.landscapeimage,a.getNextPage())}}}},setUpImages:function(){var a=this;a.setUpImagesCSS();a.setUpImagesURL()},returnLandscapeImageType:function(){var a=this;if(a._mode=="single"){return"singlepagelandscapeimage"}return"landscapeimage"},getThumbnail:function(c,b){var a=this;var d="";if(b.image!=null){d=b.image}c.src=d;c.type=b.type},imageLoaded:function(d){var b=this;var a=b.image;var c=b.landscapeimage;if(b.element!=null){b.layoutImages(d,a,c);b.resetPage();b.resetZoom();b.loadMediaImage("portrait",a);b.loadMediaImage("landscape",c);b.thumbnailLoaded=true;b.fireEvent("thumbnailLoaded")}},layoutImages:function(h,c,e){var d=this;var b=d.returnOrientation();if(h.clientWidth==0){if(c.clientWidth!=0){h=c}else{h=e}}d.pageWidth=d.element.dom.clientWidth;d.pageHeight=d.element.dom.clientHeight;d.imageWidth=h.naturalWidth;d.imageHeight=h.naturalHeight;d.imagePageWidth=d.pageWidth;d.imagePageHeight=d.pageHeight;d.initialTranslateX=0;d.initialTranslateY=0;if(b=="landscape"&&d._mode=="double"){d.layoutImagesDoublePageMode(c,e)}else{d.layoutImagesSinglePageMode(c,e)}if(h.clientWidth!=0&&h.pageNumber!=-1){d.initialImageWidth=h.clientWidth;d.initialImageHeight=h.clientHeight}else{if(c.clientWidth!=0&&c.pageNumber!=-1){if(c.clientWidth%2==1){d.initialImageWidth=c.clientWidth-0.5}else{d.initialImageWidth=c.clientWidth}if(c.clientHeight%2==1){d.initialImageWidth=c.clientHeight-0.5}else{d.initialImageWidth=c.clientHeight}}else{if(e.clientWidth!=0&&e.pageNumber!=-1){if(e.clientWidth%2==1){d.initialImageWidth=e.clientWidth-0.5}else{d.initialImageWidth=e.clientWidth}if(e.clientHeight%2==1){d.initialImageWidth=e.clientHeight-0.5}else{d.initialImageWidth=e.clientHeight}}}}if(d.initialImageHeight<d.imagePageHeight){var g=(d.imagePageHeight-d.initialImageHeight)/2;d.initialTranslateY=g}d.offsetX=0;d.offsetY=0;if(c.stayHidden==null){c.style.visibility="inherit"}else{c.style.visibility="hidden"}if(e.stayHidden==null){e.style.visibility="inherit"}else{e.style.visibility="hidden"}var f=d.portraitMediaDiv;var a=d.landscapeMediaDiv;f.style.height=a.style.height=parseInt(d.initialImageHeight)+"px";f.style.width=a.style.width=parseInt(d.initialImageWidth)+"px"},layoutImagesDoublePageMode:function(c,e){var d=this;d.imagePageWidth=(d.pageWidth/2);d.widthRatio=d.imagePageWidth/d.imageWidth;d.heightRatio=d.imagePageHeight/d.imageHeight;d.scale=1;if(d.zoomMode=="fit"&&d.widthRatio>d.heightRatio){c.style.height=d.imagePageHeight+"px";c.style.width="auto";e.style.height=c.style.height;e.style.width=c.style.width;var b=Math.max(c.clientWidth,e.clientWidth);if(c.type=="leftHandAd"){c.style.height="";c.style.width="";e.style.height="";e.style.width="";e.style.height=d.imagePageHeight+"px";e.style.width="auto";c.style.height="auto";c.style.width=$(e).width()+"px";var a=((e.clientWidth-c.clientWidth)/2);if(a>0||a<0){c.style.marginLeft=a+"px";c.style.marginRight=(a-1)+"px"}d.initialTranslateX=($(document).width()-($(e).width()*2))/2}else{d.initialTranslateX=((d.pageWidth-((b*2)*d.scale))/2)}}else{c.style.width=d.imagePageWidth+"px";c.style.height="auto";e.style.width=c.style.width;e.style.height=c.style.height;if(c.type=="leftHandAd"){if(c.clientHeight>e.clientHeight){c.style.width="auto";c.style.height=e.clientHeight+"px";var a=((e.clientWidth-c.clientWidth)/2);if(a>0){c.style.marginLeft=a+"px";c.style.marginRight=(a-1)+"px"}}}}},layoutImagesSinglePageMode:function(a,c){var b=this;b.widthRatio=b.imagePageWidth/b.imageWidth;b.heightRatio=b.imagePageHeight/b.imageHeight;b.scale=1;if(b.zoomMode=="fit"&&b.widthRatio>b.heightRatio){a.style.height=b.imagePageHeight+"px";a.style.width="auto";c.style.height=a.style.height;c.style.width=a.style.width;b.initialTranslateX=((b.pageWidth-(b.zoomDiv.dom.clientWidth*b.scale))/2)}else{a.style.width=b.imagePageWidth+"px";a.style.height="auto";c.style.width=a.style.width;c.style.height=a.style.height}},completeImageLoaded:function(c){var a=this;mainPanel.fireEvent("removeSplash");if(a.isinitialized){var b=a.imagetoload;if(a.thumbnailLoaded){a.loadTileImages(c)}else{a.on("thumbnailLoaded",function(){a.loadTileImages(c)})}}else{a.on("thumbnailLo){})});c()}},loadTileImages:function(e){var b=this;if(!b.hasLoaded){var d=b.imagetoload;var a=b.image;var c=b.landscapeimage;if(d.pageNumber==a.pageNumber){b.loadTileImage(a,function(){b.loadTileImage(c,function(){b.hasLoaded=true;b.canTile=true;e()})})}else{b.loadTileImage(c,function(){b.loadTileIm;e()})})}}else{e()}},loadTileImage:function(b,j){var f=this;if(f.isinitialized){if(b.pageNumber>0){if(b.src.indexOf("pages.mobile.cdn.pagesuite.com")!=-1||b.src.indexOf("pages.cdn.pagesuite.com")!=-1){if(b.tiled==null){b.largecached=false;var c={tiled:false,pageNumber:b.pageNumber,portraitshow:b.portraitshow,imageparts:[]};if(b.portraitshow){f.portraitTileImage=c}else{f.landscapeTileImage=c}if(c.pageNumber>=1){var h=f.checkDataForTileImage(b);if(h){if(h.largecached){b.largecached=true}f.setUpTiledImage(c,h.tileImage);j()}else{var d=f.retrievePageGuidImage(b);var g=settings.page;var a=g.lowres;var e=function(){j()};f.requestPage(a,b,c,f.loadedTileImage,false,e)}}}else{j()}}else{j()}}else{j()}}},loadLargeTileImage:function(e){var d=this;if(e.pageNumber>=1){if(e.src.indexOf("pages.mobile.cdn.pagesuite.com")!=-1||e.src.indexOf("pages.cdn.pagesuite.com")!=-1){if(!e.largecached){var c={tiled:false,pageNumber:e.pageNumber,portraitshow:e.portraitshow,imageparts:[]};var a=settings.page;var b=a.highres;d.requestPage(b,e,c,d.loadedTileImage,true,function(){})}}}},requestPage:function(b,c,d,k,l,j){var g=this;var e=g.retrievePageGuidImage(c);var f="http://pages.cdn.pagesuite.com/";if(window.location.protocol=="https:"){f="https://s3-eu-west-1.amazonaws.com/origin.pages.cdn.pagesuite.com/"}var a=f+e[0]+"/"+e[1]+"/"+e+"/tile/page_90_"+b+".json";var h=g.returnEditionPage(c);if(h.request==null||l){h.request=$.ajax({crossDomain:true,type:"GET",contentType:"application/json",async:true,cache:true,url:a,success:function(m){k(g,c,d,m,l,j);$(h.request).trigger("loaded")},error:function(m){if(m.statusText!="abort"){var n="https://tile.html5.pagesuite-professional.co.uk/get_image_jpg_tile.aspx?pguid="+e+"&dpi="+b;$.ajax({crossDomain:true,type:"GET",contentType:"application/json",async:true,cache:true,url:n,sued")}})}}});activerequest={page:h}}else{$(h.request).on("lo;j()})}},loadedTileImage:function(g,h,b,f,a,e){var d=g;var c=d.createImagesArray(f);d.setCache(h,c,a);d.setUpTiledImage(b,c);if(h.portraitshow){d.portraitTileImage=b}else{d.landscapeTileImage=b}e()},createImagesArray:function(e){var c=this;var d=[];for(var b=0;b<e.images.length;b++){var f=document.createElement("img");var a=e.images[b];f.src=a.url;f.startX=a.startX;f.startY=a.startY;f.width=a.width;f.height=a.height;d.push(f)}return d},setue}}},retrievePageGuid:function(c){var b=c.image.split("/");var a=b[b.length-2];return a},retrievePageGuidImage:function(f){var e=this;var c=editionFlatplanData.pageGroups;if(f.pageNumber>=1){var a=c[(f.pageNumber-1)].pages[0];var d=a.image.split("/");var b=d[d.length-2];return b}return""},returnEditionull},checkDataForTilealse},setUpTiledImage:function(b,e){var d=this;var c=e;if(!d.canvasInitialized){d.setUpCanvas()}for(var a=0;a<c.length;a++){var g=c[a];if(g.naturalWidth!=0){if(!(d.returnOrientation()=="portrait"&&!b.portraitshow)){100)};f(g)}}else{$(g),b)}})}}b.imageparts=c;b.tiled=true},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},toggleDPS:function(){var a=this;a.disableTiling();if(a._mode=="double"){a._mode="single"}else{a._mode="double"}a.adjustPageOnToggleDPS();a.resetPage();a.resetZoom();if(Ext.os.is.Phone){a.fireEvent("checkPagesBrowser")}},adjustPageOnToggleDPS:function(){var d=this;var b=d.image;var e=d.landscapeimage;var h=d.parent.getActiveItem();var g=d.getPageNo();var a=g-h.getPageNo();if(d.image.pageNumber==-1||d.landscapeimage.pageNumber==-1&&(a==1||a==-1)){if(d.isinitialized){d.setUpImagesCSS();d.layoutImages(d.imagetoload,d.image,d.landscapeimage)}return}if(a==0){if(d.isinitialized){d.setUpImagesCSS();d.layoutImages(d.imagetoload,d.image,d.landscapeimage)}return}else{if(a>0){if(d._mode=="single"){if(a%2==1){if(a==1){if(d.isinitialized){d.setUpImagesCSS();d.layoutImages(d.imagetoload,d.image,d.landscapeimage)}return}else{var f=a-2;var c=g-f;d.setPageNo(c)}}else{var f=a/2;var c=g-f;d.setPageNo(c)}}else{var c=g+a;d.setPageNo(c)}}else{if(d._mode=="single"){if(a%2==-1){if(a==-1){if(d.isinitialized){d.setUpImagesCSS();d.layoutImages(d.imagetoload,d.image,d.landscapeimage)}return}else{var f=a+1;var c=g-f;d.setPageNo(c)}}else{var f=a/2;var c=g-f;d.setPageNo(c)}}else{var c=Math.max(0,(g+a));d.setPageNo(c)}}}d.parent.returnPage=d.parent.config.returnPage;d.setPage(d.parent.returnPage(d.getPageNo(),false));d.setPreviousPage(d.parent.returnPage(d.getPageNo()-1,true));d.setNextPage(d.parent.returnPage(d.getPageNo()+1,true));d.resetImages()},resetImages:function(){var a=this;a.image.src="";a.landscapeimage.src="";if(a.portraitTileImage!=null){a.portraitTileImage.src="";a.portraitTileImage.tiled=false}if(a.landscapeTileImage!=null){a.landscapeTileImage.src="";a.landscapeTileImage.tiled=false}if(a.isinitialized){a.setUpImages()}a.mediaLoaded=false;a.thumbnailLoaded=false;a.hasLoaded=false;a.completeImageLoaded(function(){})},onResize:function(b){var a=this;var c=0;if(a.returnOrientation()!=a.orientation){a.orientation=a.returnOrientation();a.disableTiling();a.adjustPageOnResize();a.resetPage();a.resetZoom();a.fireEvent("resizeClipping");if(Ext.os.is.Phone){a.fireEvent("checkPagesBrowser")}}},adjustPageOnResize:function(){var d=this;var b=d.image;var e=d.landscapeimage;if(d._mode=="single"){if(d.isinitialized){d.setUpImagesCSS();d.layoutImages(d.imagetoload,d.image,d.landscapeimage)}return}if(d.image.pageNumber==-1||d.landscapeimage.pageNumber==-1&&(a==1||a==-1)){if(d.isinitialized){d.setUpImagesCSS();d.layoutImages(d.imagetoload,d.image,d.landscapeimage)}return}var h=d.parent.getActiveItem();var g=d.getPageNo();var a=g-h.getPageNo();if(a==0){if(d.isinitialized){d.setUpImagesCSS();d.layoutImages(d.imagetoload,d.image,d.landscapeimage)}return}else{if(a>0){if(d.returnOrientation()=="portrait"){if(a%2==1){if(a==1){if(d.isinitialized){d.setUpImagesCSS();d.layoutImages(d.imagetoload,d.image,d.landscapeimage)}return}else{var f=a-2;var c=g-f;d.setPageNo(c)}}else{var f=a/2;var c=g-f;d.setPageNo(c)}}else{var c=g+a;d.setPageNo(c)}}else{if(d.returnOrientation()=="portrait"){if(a%2==-1){if(a==-1){if(d.isinitialized){d.setUpImagesCSS();d.layoutImages(d.imagetoload,d.image,d.landscapeimage)}return}else{var f=a+1;var c=g-f;d.setPageNo(c)}}else{var f=a/2;var c=g-f;d.setPageNo(c)}}else{var c=g+a;d.setPageNo(c)}}}d.parent.returnPage=d.parent.config.returnPage;d.setPage(d.parent.returnPage(d.getPageNo()));d.setPreviousPage(d.parent.returnPage(d.getPageNo()-1));d.setNextPage(d.parent.returnPage(d.getPageNo()+1));d.resetImages()},onDragStart:function(b){var a=this;if(a.scale>1){b.stopPropagation()}},onDrag:function(b){var a=this;if(a.scale>1){b.stopPropagation()}},onDragFinished:function(c){var b=this;var a=b.scroller.position;b.zoomPosition=b.scroller.position;if(b.scale>1){c.stopPropagation()}},onDoubleTap:function(c){var b=this;var a=b.scroller.position;b.zoomPosition=b.scroller.position;b.zoomPointX=c.pageX;b.zoomPointY=c.pageY-40+b.scroller.position.y;if(settings.reader.doubleTapFullZoom!=null){if(settings.reader.doubleTapFullZoom=="true"){if(b.scale==1){b.initializeTouch(b.zoomPointX,b.zoomPointY);b.scale=b.getMaxScale();if(document.getElementById("slider")!=null){document.getElementById("slider").value=b.getMaxScale();b.hideNavButtons();b.fireEvent("hideWrapAds")}}else{b.resetPage();b.fireEvent("showWrapAds");if(b.zoomMode=="fit"&&b.mode=="double"){b.showNavButtons()}else{b.hideNavButtons()}}}else{if(b.scale<b.getMaxScale()/2){b.initializeTouch(b.zoomPointX,b.zoomPointY);b.scale=b.getMaxScale()/2;b.zoomLevel="mid";if(document.getElementById("slider")!=null){document.getElementById("slider").value=b.getMaxScale()/2;b.hideNavButtons();b.fireEvent("hideWrapAds")}}else{if(b.scale<b.getMaxScale()){b.zoomPointX=(b.scroller.position.x+c.pageX)/b.scale;b.zoomPointY=(b.scroller.position.y+c.pageY)/b.scale;b.initializeTouch(b.zoomPointX,b.zoomPointY);b.scale=b.getMaxScale();b.zoomLevel="full";if(document.getElementById("slider")!=null){document.getElementById("slider").value=b.getMaxScale();b.hideNavButtons();b.fireEvent("hideWrapAds")}}else{b.zoomLevel="none";b.resetPage();b.fireEvent("showWrapAds");if(b.zoomMode=="fit"&&b.mode=="double"){b.showNavButtons()}else{b.hideNavButtons()}}}}}else{if(b.scale==1){b.initializeTouch(b.zoomPointX,b.zoomPointY);b.scale=b.getMaxScale();if(document.getElementById("slider")!=null){document.getElementById("slider").value=b.getMaxScale();b.hideNavButtons();b.fireEvent("hideWrapAds")}}else{b.resetPage();b.fireEvent("showWrapAds");if(b.zoomMode=="fit"&&b.mode=="double"){b.showNavButtons()}else{b.hideNavButtons()}}}b.finishZoom()},onPinchStart:function(d){var c=this;c.disableTiling();c.startDistance=d.distance;var f=((d.touches[0].pageX+d.touches[1].pageX)/2);var e=((d.touches[0].pageY+d.touches[1].pageY)/2);var b=f+c.scroller.position.x;var a=e+c.scroller.position.y;c.zoomPointX=((b)/(c.scale));c.zoomPointY=((a)/(c.scale));c.offsetX=(f-c.zoomPointX);c.offsetY=(e-c.zoomPointY);c.offsetScrollerX=c.offsetX+c.scroller.position.x;c.offsetScrollerY=c.offsetY+c.scroller.position.y;c.initializeTouch(c.zoomPointX,c.zoomPointY);c.translateX+=c.offsetScrollerX;c.translateY+=c.offsetScrollerY;c.applyTransform(c.scale)},onPinch:function(b){var a=this;if(a.dontPinch==true){return}a.currentScale=Math.min(((b.distance/a.startDistance)*a.scale),a.getMaxScale());a.applyTransform(a.currentScale)},onPinchEnd:function(b){var a=this;if(a.currentScale<=1){a.resetPage();a.finishZoom()}else{a.scale=a.currentScale;a.finishZoom()}},onZoomStart:function(g,d){var c=this;console.log(c);console.log(c.zoomDiv);c.scale=d;var f=(c.pageWidth/2);var e=(c.pageHeight/2);var b=f+c.scroller.position.x;var a=e+c.scroller.position.y;c.zoomPointX=((b)/(c.scale));c.zoomPointY=((a)/(c.scale));c.offsetX=0;c.offsetY=0;c.offsetScrollerX=c.offsetX+c.scroller.position.x;c.offsetScrollerY=c.offsetY+c.scroller.position.y;c.initializeTouch(c.zoomPointX,c.zoomPointY);c.translateX+=c.offsetScrollerX;c.translateY+=c.offsetScrollerY;c.applyTransform(c.scale)},onZoom:function(c,b){var a=this;a.currentScale=b.dom.valueAsNumber;a.applyTransform(a.currentScale)},onZom()}},onCion}},resee=1}},initializeTouch:function(b,a){var c=this;c.elementTouchX=b-c.translateX;c.elementTouchY=a-c.translateY;c.setOrigin(c.elementTouchX,c.elementTouchY)},setOrigin:function(a,c){var b=this;b.zoomDiv.dom.style.webkitTransformOrigin=a+"px "+c+"px";b.zoomDiv.dom.style.MozTransformOrigin=a+"px "+c+"px";b.zoomDiv.dom.style.msTransformOrigin=a+"px "+c+"px";b.zoomDiv.dom.style.transformOrigin=a+"px "+c+"px"},applyTranslate:function(b){var a=this;a.zoomDiv.dom.style.webkitTransform="translate3d("+a.translateX+"px, "+a.translateY+"px, 0) scale3d("+4+","+4+",1)";a.zoomDiv.dom.style.MozTransform="translate3d("+a.translateX+"px, "+a.translateY+"px, 0) scale3d("+4+","+4+",1)";a.zoomDiv.dom.style.msTransform="translate3d("+a.translateX+"px, "+a.translateY+"px, 0) scale3d("+4+","+4+",1)"},applyTransform:function(b){var a=this;a.zoomDiv.dom.style.webkitTransform="translate3d("+a.translateX+"px, "+a.translateY+"px, 0) scale3d("+b+","+b+",1)";a.zoomDiv.dom.style.MozTransform="translate3d("+a.translateX+"px, "+a.translateY+"px, 0) scale3d("+b+","+b+",1)";a.zoomDiv.dom.style.msTransform="translate3d("+a.translateX+"px, "+a.translateY+"px, 0) scale3d("+b+","+b+",1)"},finism()}},sliderZoom:function(){var d=this;console.log(d);if(d.mediaDiv.dom.children[0].children.length>0){for(var c=0;c<d.mediaDiv.dom.children[0].children.length;c++){try{var f=d.mediaDiv.dom.children[0].children[c].children[0].children[0].children[0].children[0].children[0];if(f.className=="tool-tip"){f.style.fontSize=(12/d.scale)+"px";f.style.padding=(5/d.scale)+"px"}}catch(g){}}}if(d.mediaDiv.dom.children[1].children.length>0){for(var c=0;c<d.mediaDiv.dom.children[1].children.length;c++){try{var f=d.mediaDiv.dom.children[1].children[c].children[0].children[0].children[0].children[0].children[0];if(f.className=="tool-tip"){f.style.fontSize=(12/d.scale)+"px";f.style.padding=(5/d.scale)+"px"}}catch(g){}}}d.scrollerDiv.dom.style.width=((d.initialImageWidth+(d.initialTranslateX/2))*d.scale)+"px";if(d.returnOrientation()=="landscape"&&d._mode=="double"){d.scrollerDiv.dom.style.width=((d.initialImageWidth+d.initialTranslateX)*d.scale*2)+"px"}d.scrollerDiv.dom.style.height=((d.initialImageHeight+d.initialTranslateY)*d.scale)+"px";console.log(d.scrollerDiv);d.setOrigin(0,0);d.translateX=d.initialTranslateX;d.translateY=d.initialTranslateY;d.applyTransform(d.scale);d.scroller.setDisabled(false);d.scroller.setDirection("both");var b=d.elementTouchX*d.scale;var j=b-d.zoomPointX-d.offsetX;var a=d.elementTouchY*d.scale;var h=a-d.zoomPointY-d.offsetY;d.scroller.scrollTo(j,h);if(d.canTile){d.startTiling()}d.loadLargeTileImage(d.image);d.loadLargeTileImage(d.landscapeimage)},setZoom:function(){var d=this;if(d.mediaDiv.dom.children[0].children.length>0){for(var c=0;c<d.mediaDiv.dom.children[0].children.length;c++){try{var f=d.mediaDiv.dom.children[0].children[c].children[0].children[0].children[0].children[0].children[0];if(f.className=="tool-tip"){f.style.fontSize=(12/d.scale)+"px";f.style.padding=(5/d.scale)+"px"}}catch(g){}}}if(d.mediaDiv.dom.children[1].children.length>0){for(var c=0;c<d.mediaDiv.dom.children[1].children.length;c++){try{var f=d.mediaDiv.dom.children[1].children[c].children[0].children[0].children[0].children[0].children[0];if(f.className=="tool-tip"){f.style.fontSize=(12/d.scale)+"px";f.style.padding=(5/d.scale)+"px"}}catch(g){}}}d.scrollerDiv.dom.style.width=((d.initialImageWidth)*d.scale)+"px";if(d.returnOrientation()=="landscape"&&d._mode=="double"){d.scrollerDiv.dom.style.width=((d.initialImageWidth)*d.scale*2)+"px"}d.scrollerDiv.dom.style.height=(d.initialImageHeight*d.scale)+"px";d.setOrigin(0,0);d.translateX=0;d.translateY=0;d.applyTransform(d.scale);d.scroller.setDisabled(false);d.scroller.setDirection("both");var b=d.elementTouchX*d.scale;var a=d.elementTouchY*d.scale;var j=b-d.zoomPointX-d.offsetX;var h=a-d.zoomPointY-d.offsetY;d.scroller.scrollTo(j,h);if(d.canTile){d.startTiling()}d.loadLargeTileImage(d.image);d.loadLargeTileImage(d.landscapeimage)},resetZoom:function(){var b=this;if(b.mediaDiv.dom.children[0].children.length>0){for(var a=0;a<b.mediaDiv.dom.children[0].children.length;a++){try{var c=b.mediaDiv.dom.children[0].children[a].children[0].children[0].children[0].children[0].children[0];if(c.className=="tool-tip"){c.style.fontSize="12px";c.style.padding="5px"}}catch(d){}}}if(b.mediaDiv.dom.children[1].children.length>0){for(var a=0;a<b.mediaDiv.dom.children[1].children.length;a++){try{var c=b.mediaDiv.dom.children[1].children[a].children[0].children[0].children[0].children[0].children[0];if(c.className=="tool-tip"){c.style.fontSize="12px";c.style.padding="5px"}}catch(d){}}}b.scrollerDiv.dom.style.width="";b.scrollerDiv.dom.style.height="";b.scrollTo(0,0);if(b.zoomMode=="fill"){b.scroller.setDisabled(false);b.scroller.setDirection("vertical");b.scroller.setDirectionLock(true)}else{b.scroller.setDisabled(true)}b.scroller.position.x=0;if(b.canTile){b.startTiling()}},stopTiling:function(){var a=this;a.disableTiling();a.canTile=false},setTiling:function(){var a=this;a.canTile=true;a.resetZoom()},enableScroller:function(){var a=this;if(a.scroller.getDisabled()&&a.scroller.manuallyDisabled!=null&&a.scroller.manuallyDisabled==true){a.scroller.setDisabled(false);a.scroller.manuallyDisabled=false}},scrollTo:function(a,c){var b=this;b.scroller.scrollTo(a,c)},onScrollEnd:function(){var a=this;a.startTiling()},startTiling:function(){var a=this;if(a.canTile){a.setUpCanvas(a.portraitTileImage);a.tryTilePageImage(a.portraitTileImage);if(a.returnOrientation()=="landscape"){a.tryTilePageImage(a.landscapeTileImage)}}},setUpCanvas:function(){var e=this;e.canvasInitialized=true;if(e.element!=null){var d=Math.min(e.pageWidth,e.scrollerDiv.dom.clientWidth);var a=Math.min(e.pageHeight,e.scrollerDiv.dom.clientHeight);e.tileDiv.dom.style.width=d+"px";e.tileDiv.dom.style.height=a+"px";e.tileDiv.dom.style.top=(e.scroller.position.y/e.scale)+"px";e.tileDiv.dom.style.left=(e.scroller.position.x/e.scale)+"px";e.tileDiv.dom.style.webkitTransform="scale3d("+(1/e.scale)+","+(1/e.scale)+",1)";e.tileDiv.dom.style.MozTransform="scale("+(1/e.scale)+","+(1/e.scale)+")";e.tileDiv.dom.style.msTransform="scale3d("+(1/e.scale)+","+(1/e.scale)+",1)";var c=e.tileCanvas.getContext("2d");devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1,ratio=devicePixelRatio/backingStoreRatio;if(typeof auto==="undefined"){auto=true}if(auto&&devicePixelRatio!==backingStoreRatio){var b=d;var f=a;e.tileCanvas.width=b*ratio;e.tileCanvas.height=f*ratio;e.tileCanvas.style.width=b+"px";e.tileCanvas.style.height=f+"px";c.scale(ratio,ratio)}else{e.tileCanvas.width=d;e.tileCanvas.height=a;e.tileCanvas.style.width=d+"px";e.tileCanvas.style.height=a+"px"}e.tileCanvas.desx=(e.scroller.position.x*-1);e.tileCanvas.desxland=e.tileCanvas.desx+(e.initialImageWidth*e.scale);e.tileCanvas.desy=(e.scroller.position.y*-1);e.tileCanvas.desw=parseInt(e.initialImageWidth*e.scale);e.tileCanvas.desh=parseInt(e.initialImageHeight*e.scale)}},tryTilePageImage:function(d){var c=this;if(d!=null){for(var b=0;b<d.imageparts.length;b++){var a=d.imageparts[b];a.pageNumber=d.pageNumber;if(d.tiled){c.tilePageImage(a,d)}else{a.ohis)}}}}},tilePagea))}},tilePageImageCanvas:function(d,n){var k=this;if(k.tileCanvas!=null){var a=k.tileCanvas.getContext("2d");var o=d.naturalWidth*2;var h=d.naturalHeight*2;var c=d.startX/o;var m=d.startY/h;var b=d.naturalWidth;var l=d.naturalHeight;var g=k.tileCanvas.desx;g=g+(k.tileCanvas.desw*c);var f=k.tileCanvas.desy;f=f+(k.tileCanvas.desh*m);if(k.returnOrientation()=="landscape"){if(k._mode=="double"){if((n.pageNumber-pageOffset)%2==1){g=k.tileCanvas.desxland+(k.tileCanvas.desw*c)}}}var j=k.tileCanvas.desw/2;var e=k.tileCanvas.desh/2;if(k.returnOrientation()=="landscape"&&k._mode=="single"&&n.pageNumber!=(k.getPageNo()+1)){}else{a.drawImage(d,0,0,b,l,g,f,j,e)}}},tilePageImageNonCanvas:function(d,b){var c=this;if(c.returnOrientation()=="landscape"&&c._mode=="single"&&b.pageNumber!=(c.getPageNo()+1)){return}else{var a=0;if(d.startX==0){if(d.startY==0){a=0}else{a=2}}else{if(d.startY==0){a=1}else{a=3}}var e=c.tileDivImage.children[a];e.appendChild(d);console.log(c.tileDivImage.children[a]);console.log(d.startX,d.startY)}},disableTiling:function(){var a=this;a.tileCanvas.width=0;a.tileCanvas.height=0},destroy:function(){var a=this;a.isinitialized=false;a.element.dom.innerHTML="";delete a.figure;delete a.scrollerDiv;delete a.zoomDiv;delete a.image;delete a.landscapeimage;delete a.tileDiv;a.tileCanvas.width=0;a.tileCanvas.height=0;delete a.tileCanvas;delete a.portraitTileImage;delete a.landscapeTileImage;Ext.Container.prototype.destroy.apply(this,arguments);delete a},loadMediatrue},returnMediaContainer:function(a){var b=this;if(a==b.image.pageNumber){return b.portraitMediaDiv}else{if(a==b.landscapeimage.pageNumber){return b.landscapeMediaDiv}}return null},hideNavButtons:function(){var a=this},showNavButtons:function(){var a=this},pauseVideos:function(){var d=this;if(d.portraitMediaDiv!=null){for(var a=0;a<d.portraitMediaDiv.children.length;a++){if(d.portraitMediaDiv.children[a].className.indexOf("readerVideo")!=-1){var c=d.portraitMediaDiv.children[a];if(d.element!=null){$(d.element.dom).removeClass("disableIframe")}if(c.className.indexOf("mp4Video")!=-1){var b=c.getElementsByTagName("iframe")[0];if(b.contentDocument){b.contentDocument.getElementsByTagName("video")[0].pause()}}else{if(c.className.indexOf("youtubeVideo")!=-1){var b=c.getElementsByTagName("iframe")[0];YT.get(b.id).pauseVideo()}else{if(c.className.indexOf("vimeoVideo")!=-1){var b=c.getElementsByClassName("vimeoPlayer")[0];b.contentWindow.postMessage({method:"pause",value:""},"*")}}}}}}if(d.landscapeMediaDiv!=null){for(var a=0;a<d.landscapeMediaDiv.children.length;a++){if(d.landscapeMediaDiv.children[a].className.indexOf("readerVideo")!=-1){var c=d.landscapeMediaDiv.children[a];$(d.element.dom).removeClass("disableIframe");if(c.className.indexOf("mp4Video")!=-1){var b=c.getElementsByTagName("iframe")[0];b.contentDocument.getElementsByTagName("video")[0].pause()}else{if(c.className.indexOf("youtubeVideo")!=-1){var b=c.getElementsByTagName("iframe")[0];b.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}else{if(c.className.indexOf("vimeoVideo")!=-1){var b=c.getElementsByClassName("vimeoPlayer")[0];b.contentWindow.postMessage({method:"pause",value:""},"*")}}}}}}}},0,["readerpageviewer"],["component","container","readerpageviewer"],{component:true,container:true,readerpageviewer:true},["widget.readerpageviewer"],0,[InfinityMobile.view,"ReaderPageViewer"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderPageViewerPDF",Ext.Container,{config:{pageNo:"",page:false,previousPage:"",nextPage:"",style:"overflow:hidden",html:'<figure><div class="scrollerDiv"><div class="zoomDiv" ><img style="visibility:hidden;vertical-align:middle" /><img style="visibility:hidden;vertical-align:middle" /><div class="mediaDiv"><div class="portrait"></div><div class="landscape"></div></div><div class="tileDiv" ><div class="portrait"><canvas /></div><div class="landscape"><canvas /></div></div></div></div></figure>',maxScale:3,scrollable:"both",editionGuid:"",cls:"readerpage animate",mode:"double"},beforeInitialize:function(){var a=this;a.isinitialized=false;a.mediaLoaded=false;a.thumbnailLoaded=false;a.pdfsLoaded=false;a.usesCanvas=true;a.canTile=false;a.zoomMode=settings.reader.zoomMode},initialize:function(){var a=this;a.zoomLevel="none";a.on("painted",a.initializePage,a,{delay:10,single:true});a.scroller=a.getScrollable().getScroller();a.scroller.setDisabled(true);a.figure=a.element.down("figure");a.scrollerDiv=a.figure.down("div");a.zoomDiv=a.scrollerDiv.down("div");a.image=a.zoomDiv.down("img").dom;a.landscapeimage=a.zoomDiv.down("img").next("img").dom;a.mediaDiv=a.zoomDiv.down("div");a.portraitMediaDiv=a.mediaDiv.down("div").dom;a.landscapeMediaDiv=a.mediaDiv.down("div").next("div").dom;a.tileDiv=a.element.down(".tileDiv");a.portraitTileDiv=a.tileDiv.down(".portrait");a.image.tileCanvas=a.portraitTileDiv.down("canvas").dom;a.landscapeTileDiv=a.tileDiv.down(".landscape");a.landscapeimage.tileCanvas=a.landscapeTileDiv.down("canvas").dom;a.element.addListener({dragstart:"onDragStart",drag:"onDrag",dragend:"onDragFinished",scope:a});a.scrollerDiv.addListener({scope:a,doubletap:a.onDoubleTap,pinchstart:a.onPinchStart,pinch:a.onPinch,pinchend:a.onPinchEnd});a.scroller.on({scope:a,scrollend:a.onScrollEnd})},initializtrue},setUpImague}}},setUpImag)}}}},setUpImages:function(){var a=this;a.setUpImagesCSS();a.setUpImagesURL()},returnLandscapeImagage"},getThumbnail:function(c,b){var a=this;var d="";if(b.image!=null){d=b.image;if(b.pageNum>1){if(b.image.indexOf("pages.cdn.pagesuite.com")!=-1){d="http://pages.mobile.cdn.pagesuite.com/images/"+a.retrievePageGuid(b)+"/tablet.jpg"}}}c.src=d;c.type=b.type},retrievePag)[5]},imageLd")}},layoutI"px"},layoutImagesDoublePag}}}}},layoutImagesSinglePagght}},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},completePDFLtrue},loaue}}},lo}}}}},imageVirn a},returnEditionull},reques)}})},setUpTiledPDo,c)},toggm()}},adjustPageOnToggalse},resetIalse},onRm()}},adjustPageOnRalse},onDragStart:function(b){var a=this;if(a.scale>1){b.stopPropagation()}},on()}},onDragFinn()}},onDoubom()},onPinchds")},onale)},onPins")}},onZoomds")},oale)},onZos")}},onCs()}},resee=1}},initializechY)},setO"px"},applyTran,1)"},applyTran,1)"},finiss")}},seng()},reseng()},setPDFContatY=d},stopTalse},setTom()},enableScrlse}},scra,c)},onScrong()},startT(c)}},setUpCle)}},disableTht=0},dete a},loadMediatrue},returnMediaContnull},hideNavButtons:function(){var a=this},showNavButtons:function(){var a=this},pauseVideos:function(){var d=this;if(d.portraitMediaDiv!=null){for(var a=0;a<d.portraitMediaDiv.children.length;a++){if(d.portraitMediaDiv.children[a].className.indexOf("readerVideo")!=-1){var c=d.portraitMediaDiv.children[a];$(d.element.dom).removeClass("disableIframe");if(c.className.indexOf("mp4Video")!=-1){var b=c.getElementsByTagName("iframe")[0];b.contentDocument.getElementsByTagName("video")[0].pause()}else{if(c.className.indexOf("youtubeVideo")!=-1){var b=c.getElementsByTagName("iframe")[0];YT.get(b.id).pauseVideo()}else{if(c.className.indexOf("vimeoVideo")!=-1){var b=c.getElementsByClassName("vimeoPlayer")[0];b.contentWindow.postMessage({method:"pause",value:""},"*")}}}}}}if(d.landscapeMediaDiv!=null){for(var a=0;a<d.landscapeMediaDiv.children.length;a++){if(d.landscapeMediaDiv.children[a].className.indexOf("readerVideo")!=-1){var c=d.landscapeMediaDiv.children[a];$(d.element.dom).removeClass("disableIframe");if(c.className.indexOf("mp4Video")!=-1){var b=c.getElementsByTagName("iframe")[0];b.contentDocument.getElementsByTagName("video")[0].pause()}else{if(c.className.indexOf("youtubeVideo")!=-1){var b=c.getElementsByTagName("iframe")[0];YT.get(b.id).pauseVideo()}else{if(c.className.indexOf("vimeoVideo")!=-1){var b=c.getElementsByClassName("vimeoPlayer")[0];b.contentWindow.postMessage({method:"pause",value:""},"*")}}}}}}}},0,["readerpageviewer"],["component","container","readerpageviewer"],{component:true,container:true,readerpageviewer:true},["widget.readerpageviewer"],0,[InfinityMobile.view,"ReaderPageViewerPDF"],0));(Ext.cmd.derive("InfinityMobile.view.LayoutViewController",InfinityMobile.view.LayoutView,{config:{pageNo:""},initir()}},layoutViewStyleOrientrn f},loadViewController:function(){var a=this;a.fireEvent("loadViewController",a)},loadVie)}})}},0,["layoutviewcontroller"],["component","container","layoutview","layoutviewcontroller"],{component:true,container:true,layoutview:true,layoutviewcontroller:true},["widget.layoutviewcontroller"],0,[InfinityMobile.view,"LayoutViewController"],0));(Ext.cmd.derive("InfinityMobile.view.LayoutTextView",InfinityMobile.view.LayoutView,{initie})}},layoutViewStyleOrientrn f},initializodes},runEllrit"},ell}}}}},ellipsisWord:function(a,b){}},0,["layouttextview"],["component","container","layoutview","layouttextview"],{component:true,container:true,layoutview:true,layouttextview:true},["widget.layouttextview"],0,[InfinityMobile.view,"LayoutTextView"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderSearchItem",Ext.Container,{config:{height:160,style:"background-color:white; border-bottom:1px solid #ececec",layout:"hbox",pageNumber:"",name:"",editionGuid:"",textString:"",searchType:"",items:[{itemId:"searchItemImage",width:125,margin:15,style:"border:1px solid #f0f0f0"},{itemId:"searchItemDescription",flex:1,margin:"35 15 35 15"}]},initialize:function(){var a=this;a.searchItemImage=a.getComponent("searchItemImage");a.searchItemDescription=a.getComponent("searchItemDescription");a.pageNumber=a._pageNumber;a.name=a._name;a.editionGuid=a._editionGuid;a.textString=a._textString;a.searchType=a._searchType;if(a.textString==null){a.textString=""}a.element.on({tap:"onTap",scope:a});a.on("painted",a.initializePage,a,{delay:10,single:true})},",a)},initializePage:function(){var b=this;var a="https://edition.pagesuite-professional.co.uk/get_image.aspx?h=125&eid="+b.editionGuid+"&pnum="+b.pageNumber;var c="";if(b.searchType=="e"){c="<div style='font-size:16px'><b>Page "+b.pageNumber+"</b></div><br /><div style='font-size:14px'>"+b.textString+"</div>"}else{c="<div style='font-size:16px'><b>"+b.name+" Page "+b.pageNumber+"</b></div><br /><div style='font-size:14px'>"+b.textString+"</div>"}if(currentProfile=="phone"){b.searchItemDescription.setMargin("15 15 15 15");c=c.replace("<br />","");b.searchItemDescription.addCls("fadeSearchItem")}b.searchItemDescription.setHtml(c);b.showImage()},showImage:function(){var e=this;var d=e.element.dom.offsetTop;var c=e.parent;var b=c.element.dom.clientHeight;var g=c.element.dom;var f=g.scrollTop;if(d<parseFloat(b)+parseFloat(f)||currentProfile=="desktop"){if(e.searchItemImage.getHtml()==null){var a="https://edition.pagesuite-professional.co.uk/get_image.aspx?w=250&eid="+e.editionGuid+"&pnum="+e.pageNumber;e.searchItemImage.setHtml("<div style='height:127px; overflow:hidden'><img style='width:100%' src='"+a+"' /></div>")}}}},0,["searchItem"],["component","container","searchItem"],{component:true,container:true,searchItem:true},["widget.searchItem"],0,[InfinityMobile.view,"ReaderSearchItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderArchiveItem",Ext.Container,{config:{style:"float:left;border:1px solid grey; overflow:hidden",editionGuid:"",editionName:"",height:175,items:[{itemId:"archiveItemLabel",cls:"thumbInfo",bottom:0,height:30,width:"100%",padding:"5 0 0 0",style:"background-color:rgba(0,0,0,0.7); color:white; text-align:center; border-radius:5px"}]},initialize:function(){var a=this;a.editionGuid=a._editionGuid;a.editionName=a._editionName;a.editionLabel=a.getComponent("archiveItemLabel");var b="https://edition.pagesuite-professional.co.uk//get_image.aspx?w=280&eid="+a.editionGuid;a.setHtml("<img style='width:100%' src='"+b+"' />");a.editionLabel.setHtml(a.editionName);a.element.on({tap:"onTap",scope:a})},onTap:function(){var b=this;var a="";if(qs.localhost!=null&&qs.localhost=="true"){a="&localhost=true"}window.location.href="default.aspx?&edid="+b.editionGuid+a}},0,["archiveItem"],["component","container","archiveItem"],{component:true,container:true,archiveItem:true},["widget.archiveItem"],0,[InfinityMobile.view,"ReaderArchiveItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderAnimationObject",InfinityMobile.view.ReaderMediaObject,{config:{mediaObject:"",cls:"readeranimationobject"},initin()}},setAnims()}},setFrameDimenble"}},0,["readeranimationobject"],["component","container","readermediaobject","readeranimationobject"],{component:true,container:true,readermediaobject:true,readeranimationobject:true},["widget.readeranimationobject"],0,[InfinityMobile.view,"ReaderAnimationObject"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderLinkObject",InfinityMobile.view.ReaderMediaObject,{config:{mediaObject:"",cls:"readerLink",items:[{itemId:"tooltip",style:"position:absolute !important;"}]},initialize:function(){var a=this;InfinityMobile.view.ReaderMediaObject.prototype.initialize.apply(this,arguments);if(a.mediaObject!=""){a.setMediaLinkStyle()}if(Ext.os.is.Desktop){if(a.config.leftSideOverflow!=null){if(a.config.leftSideOverflow){a.mediaObject.x=100+a.mediaObject.x;a.setMediaObjectStyle()}}}},setMediaObjectStyle:function(){var a=this;a.mediaObject.showBorder=false;a.setupFlash();InfinityMobile.view.ReaderMediaObject.prototype.setMediaObjectStyle.apply(this,arguments)},setMediaLinkStyle:function(){var a=this;if(Ext.os.is.Desktop){if(a.config.disableToolTip==null||!a.config.disableToolTip){if(a.mediaObject.description.length==0){a.mediaObject.description=a.mediaObject.url}a.element.dom.onmouseenter=function(){a.fireEvent("setupArticleTooltip",a.mediaObject.description)};a.element.dom.onmouseleave=function(){a.fireEvent("hideArticleTooltip",a)};a.element.dom.onmousemove=function(b){a.fireEvent("updateArticleTooltipPosition",b)}}}if(a.mediaObject.url!=null){if(a.mediaObject.param1!=null&&a.mediaObject.param1=="POPUPURL"){a.element.on({tap:"onPopupTap",scope:a})}else{a.element.on({tap:"onTap",scope:a})}}},onTap:function(){var c=this;var b=Ext.getStore("SettingStore");if(b.data.items[0].raw.tracking!=null){var d=b.data.items[0].raw.tracking.trackingType;if(d=="GA"){ga("send","event","Open URL","click",c.mediaObject.url,c.mediaObject.pageNumber)}else{$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackOmniture.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})}}var a="mo";if(c.mediaObject.param1!=null&&c.mediaObject.param1=="LINKOBJECT"){a="ll"}if(typeof trackReports!="undefined"){if(trackReports.toLowerCase()=="true"){$.ajax({crossDomain:true,type:"GET",async:true,url:"https://reports.pagesuite-professional.co.uk/track.aspx?html5=true&link="+a+"_"+c.mediaObject.guid})}}c.fireEvent("linkClick",c,c.mediaObject.url)},onPopupTap:function(){var a=this;a.fireEvent("popupLink",a,a.mediaObject)}},0,["readerlinkobject"],["component","container","readermediaobject","readerlinkobject"],{component:true,container:true,readermediaobject:true,readerlinkobject:true},["widget.readerlinkobject"],0,[InfinityMobile.view,"ReaderLinkObject"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderArticleObject",InfinityMobile.view.ReaderMediaObject,{config:{mediaObject:"",cls:"readerArticle"},initie()}},setMediaLinkStyle:function(){var b=this;if(currentProfile=="desktop"){b.add({itemId:"tooltip",style:"position:absolute !important;"});var a=b.mediaObject.description;if(b.article!=null){a=b.article.headline}if(b.mediaObject.description.trim().length>0){b.element.dom.onmouseenter=function(){b.fireEvent("setupArticleTooltip",a)};b.element.dom.onmouseleave=function(){b.fireEvent("hideArticleTooltip",b)};$("body").on("touchstart",function(){b.fireEvent("hideArticleTooltip",b)});b.element.dom.onmousemove=function(c){b.fireEvent("updateArticleTooltipPosition",c)}}}if(b.mediaObject.guid!=null){b.element.on({singletap:"onTap",scope:b})}},uid)}},0,["readerarticleobject"],["component","container","readermediaobject","readerarticleobject"],{component:true,container:true,readermediaobject:true,readerarticleobject:true},["widget.readerarticleobject"],0,[InfinityMobile.view,"ReaderArticleObject"],0));(Ext.cmd.derive("InfinityMobile.view.ArticleCarousel",Ext.Carousel,{initialize:function(){var a=this;Ext.carousel.Carousel.prototype.initialize.call(this);a.on("activeitemchange","handleItemChange",this);a.destroyed=false;a._visiblePages=Math.min(a._visiblePages,a.getData().length);a.setCards();a.setOrientationChange();if(settings.reader.disableArticleCarousel!=null){if(settings.reader.disableArticleCarousel=="true"){a.locked=true;a.onDragOrig=a.onDrag;a.o(b)}}}}a.showAdAt=5},config:{indicator:false,data:false,pageNumber:0,skipActiveItemChange:true,pageTemplate:false,visiblePages:3,directionLock:true,landscapePageIncrement:1,mode:"single"},destroy:function(){var a=this;a.destroyed=true;Ext.carousel.Carousel.prototype.destroy.apply(this,arguments)},setPageTemplate:function(a){this.pageTemplate=a},setCards:function(){var j=this;j._skipActiveItemChange=true;var k=1;if(j._pageNumber==0){for(var e=0;e<j._visiblePages;e++){var b=(e*k);j.add(j.createCard(j.getData()[b],b,j.getData()))}j.setActiveItem(0)}else{if(j._pageNumber==(j.getData().length-1)){for(var e=(j._pageNumber-2);e<j.getData().length;e++){j.add(j.createCard(j.getData()[e],e,j.getData()))}j.setActiveItem(2)}else{var f=j._pageNumber;var a=j.createCard(j.getData()[f],f,j.getData());j.add(a);var c=j._pageNumber-(1*k);var d=j.createCard(j.getData()[c],c,j.getData());j.insert(0,d);var h=parseInt(j._pageNumber)+(1*k);var g=j.createCard(j.getData()[h],h,j.getData());j.add(g);j.setActiveItem(1)}}j.articleNo=j.getActiveItem()._pageNo;j._skipActiveItemChange=false},handleItemCd,e)},updateItemCSS:function(f,d){var e=this;var a=f.getItems().items;for(var c=0;c<a.length;c++){var b=a[c];if(b._itemId!=d._itemId){b.setCls("")}}d.setCls("selecteditem")},creatrn d},addCardToFront:function(f,c,b){var d=this;c._skipActiveItemChange=true;f.remove(c,true);var a=1;var e=(d._pageNumber+b+a);e=Math.min(parseInt(e),(d.getData().length-1));f.add(d.createCard(d.getData()[e],e,d.getData()))},addInterstitialTot"))},addInterstitialT"))}},createInterstrn d},addCardToBack:function(f,a,c){var d=this;var b=1;if(a!=null){a._skipActiveItemChange=true;f.remove(a,true);var e=(d._pageNumber-c-b);e=Math.max(e,0);f.insert(0,d.createCard(d.getData()[e],e,d.getData()))}},jumpToFirst:function(){this.jumpToPage(0)},jumpToLast:function(){this.jumpToPage((this.getData().length-1))},jumpToPage:function(b){var c=this;var a=b;var a=Math.max(a,(this.getData().length-1));a=Math.min(a,0);if(b!=c._pageNumber){if(b==(c._pageNumber+1)){c.next()}else{if(b==(c._pageNumber-1)){c.previous()}else{c.removeAll(true);c._pageNumber=b;c.setCards()}}}},injectInterstb)}}},frameDragon=0},frameDrag:function(b){var c=b.changedTouches[0].screenX;var a=c-this.startXPointFrame;this.setOffset(a)},frameDragEnd:function(k){this.frameDrag(k);var a=Ext.Date.now(),j=this.itemLength,g=j/2,f=this.offset,n=this.getActiveIndex(),c=this.getMaxItemIndex(),h=0,m=f-this.flickStartOffset,b=a-this.flickStartTime,l=this.getIndicator(),d;if(h===0){if(n<c&&f<-g){h=-1}else{if(n>0&&f>g){h=1}}}this.animationDirection=h;this.setOffsetAnimated(h*j)},setOrientationChange:function(){var a=this;v,d)}})();if(Ext.os.is.Desktop){$(window).on("resize",function(){b(function(){a.onResize()},250)})}else{if(Ext.os.is.Android){$(window).on("resize",function(){setTimeout(function(){a.onResize()},0)})}else{Ext.Viewport.on("orientationchange",function(d,f,e,c){if(parseFloat(iOSVersion())>11){setTimeout(function(){a.onResize()},400)}else{a.onResize()}},a)}}},onRe()}}},0,["articlecarousel"],["component","container","carousel","articlecarousel"],{component:true,container:true,carousel:true,articlecarousel:true},["widget.articlecarousel"],0,[InfinityMobile.view,"ArticleCarousel"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderVideoObject",InfinityMobile.view.ReaderMediaObject,{config:{items:[{itemId:"closeBtn",right:0,top:0,height:25,style:"background-color:#e1e1e1",html:"<div style='margin-right:28px; margin-left:5px; padding-top:5px; font-size:12px'>Close</div>",items:[{top:2,right:5,width:20,height:20,cls:"backImage",style:'background-image:url("../assets/article view/article-close-btn.png");background-repeat:no-repeat;background-size:contain;background-position:center;'}]}],mediaObject:"",cls:"readerVideo"},initialize:function(){var a=this;InfinityMobile.view.ReaderMediaObject.prototype.initialize.apply(this,arguments);if(a.mediaObject!=""){if(a.mediaObject.url.indexOf("http://www.youtube.com/watch")!=-1){a.initializeYoutube();a.videoType="youtube"}else{if(a.mediaObject.url.indexOf("http://")!=-1&&$.isNumeric(a.mediaObject.url.replace("http://",""))){a.initialiseVimeo();a.videoType="vimeo"}else{if(a.mediaObject.file!=""){a.initialiseMP4();a.videoType="mp4"}}}}a.mediaType="video";a.closeBtn=a.getComponent("closeBtn");a.closeBtn.element.on({tap:function(){var c=this;if(c.mediaObject.remove=="CLOSEBTN"){if(c.videoType=="mp4"){c.video.pause()}else{if(c.videoType=="youtube"){if(c.ytplayer!=null){c.ytplayer.pauseVideo()}else{c.youtubeFrame.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}}else{if(c.videoType=="vimeo"){var b=c.element.dom.getElementsByClassName("vimeoPlayer")[0];b.contentWindow.postMessage({method:"pause",value:""},"*")}}}c.removeAnim()}else{if(c.videoType=="mp4"){c.video.pause()}else{if(c.videoType=="youtube"){if(c.ytplayer!=null){c.ytplayer.pauseVideo()}else{c.youtubeFrame.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}}else{if(c.videoType=="vimeo"){var b=c.element.dom.getElementsByClassName("vimeoPlayer")[0];b.contentWindow.postMessage({method:"pause",value:""},"*")}}}c.hide()}},scope:a});if(a.mediaObject.remove!="CLOSEBTN"){a.closeBtn.hide()}a.mp4FirstPlay=false;if(Ext.os.is.Desktop){if(a.config.leftSideOverflow!=null){if(a.config.leftSideOverflow){a.mediaObject.x=100+a.mediaObject.x;a.setMediaObjectStyle()}}}$(a.element.dom.getElementsByClassName("x-innerhtml")[1]).css("height","100%");$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChe}}}})},initializeYoutube:function(){var d=this;d.youtubeCode=d.mediaObject.url.substr(d.mediaObject.url.length-11);var c="http://www.youtube.com/embed/"+d.youtubeCode;var b="";if(d.mediaObject.autoPlay!=null&&d.mediaObject.autoPlay=="true"&&d.mediaObject.appear!="TRIGGER"){}var a="";if(d.mediaObject.param6.length>0){if(d.mediaObject.param6.indexOf("rel")!=-1){a=d.mediaObject.param6;if(a.indexOf("&")==-1){a="&"+a}}}d.addCls("youtubeVideo");d.setHtml("<iframe onload='parent.youtubeplay()' src='"+c+"?enablejsapi=1"+b+a+"' width='100%' height='100%' frameborder='0' id='"+c+"' allowfullscreen/>");d.youtubeFrame=d.element.down("iframe").dom;youtubeplay=function(){d.ytplayer=new YT.Player(document.getElementById(c),{events:{onStateChange:d.onPlayerStateChange,onReady:function(){if(Ext.os.is.Desktop){if(d.mediaObject.autoPlay=="true"&&d.mediaObject.appear!="TRIGGER"){d.fireEvent("checkActivePageVideo",d)}}}}})}},onPlayerStateChange:function(c){var b=this;if(c.data==1){var b=this;var a=Ext.getStore("SettingStore");if(a.data.items[0].raw.tracking!=null){var d=a.data.items[0].raw.tracking.trackingType;if(d=="GA"){ga("set","page","/"+b.startpageNumber);ga("send",{hitType:"pageview",title:publicationName+" - "+editionName});ga("send","event","Youtube","play",c.target.getVideoData().title,b.startpageNumber)}else{$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackOmniture.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})}}$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackPageSuite.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})}},initialiseVimeo:function(){var b=this;b.vimeoId=b.mediaObject.url.substr(7-b.mediaObject.url.length);b.addCls("vimeoVideo");var c="//player.vimeo.com/video/"+b.vimeoId;b.setHtml("<iframe class='vimeoPlayer' src='"+c+"?api=1&amp;player_id="+c+"' allowfullscreen='true' webkitallowfullscreen='true' mozallowfullscreen='true' width='100%' height='100%' frameborder='0' id='"+c+"'/>");var a=b.element.dom.getElementsByClassName("vimeoPlayer")[0]},initialiseMP4:function(){var b=this;b.fileGuid=b.mediaObject.file;var c=b.fileGuid.substr(0,1);var a=b.fileGuid.substr(1,1);var d="http://source.pagesuite.com/media/"+c+"/"+a+"/"+b.fileGuid+".mp4";b.addCls("mp4Video");openLink=function(){if(b.mediaObject.url.length>0&&b.mediaObject.url.indexOf("http://")!=-1){if(Ext.os.is.Desktop){window.open(b.mediaObject.url)}else{if(!b.mp4FirstPlay){window.open(b.mediaObject.url);b.mp4FirstPlay=true}}}};d="video.aspx?guid="+b.fileGuid;b.setHtml("<iframe allowfullscreen='true' webkitallowfullscreen='true' mozallowfullscreen='true' src='"+d+"' width='100%' height='100%' frameborder='0' scrolling='no' />");b.element.down("iframe").dom.onload=function(){if(this.contentDocument!=null){this.contentDocument.getElementsByTagName("video")[0].onclick=openLink;this.contentDocument.getElementsByTagName("video")[0].addEventListener("touchstart",openLink)}b.video=this.contentDocument.getElementsByTagName("video")[0];if(Ext.os.is.Desktop){if(b.mediaObject.autoPlay=="true"&&b.mediaObject.appear!="TRIGGER"){b.fireEvent("checkActivePageVideo",b)}}};videoplay=function(){b.videoPlayListener()}},videoPlayListener:function(){var b=this;var a=Ext.getStore("SettingStore");if(a.data.items[0].raw.tracking!=null){var c=a.data.items[0].raw.tracking.trackingType;if(c=="GA"){ga("set","page","/"+b.mediaObject.page);ga("send",{hitType:"pageview",title:publicationName+" - "+editionName});ga("send","event","MP4","play",b.mediaObject.name,b.mediaObject.page)}else{$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackOmniture.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})}}$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackPageSuite.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})},createCustomConols)},setVideoLista)})},playVideo:function(){var a=this;switch(a.videoType){case"youtube":a.ytplayer.playVideo();break;case"vimeo":break;case"mp4":a.video.play();break}}},0,["readervideo"],["component","container","readermediaobject","readervideo"],{component:true,container:true,readermediaobject:true,readervideo:true},["widget.readervideo"],0,[InfinityMobile.view,"ReaderVideoObject"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderVideoObjectControls",Ext.Container,{config:{cls:"readercontrols",layout:{type:"hbox",align:"center"},bottom:-20,style:"background-color:rgba(0, 0, 0, 0.5)",padding:7,width:"100%",height:40,html:"<div class='playbutton play'></div><div class='togglebox'><div class='currentTime'>0:00</div><div class='timeBar'></div><div class='totalTime'>0:00</div></div><div class='fullscreenbutton'></div>"},initier()},setPlayLiso)})},fullscreenButtonListener:function(){var a=this;a.fullscreenButton.on("tap",function(){a.fireEvent("videofullscreen",a,a.video)})}},0,["readervideocontrols"],["component","container","readervideocontrols"],{component:true,container:true,readervideocontrols:true},["widget.readervideocontrols"],0,[InfinityMobile.view,"ReaderVideoObjectControls"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderImageObject",InfinityMobile.view.ReaderMediaObject,{config:{mediaObject:"",cls:"backgroundImage",items:[{itemId:"closeBtn",right:0,top:0,height:25,style:"background-color:#e1e1e1",html:"<div style='margin-right:28px; margin-left:5px; padding-top:5px; font-size:12px'>Close</div>",items:[{top:2,right:5,width:20,height:20,cls:"backImage",style:'background-image:url("../assets/article view/article-close-btn.png")'}]}]},initialize:function(){var a=this;InfinityMobile.view.ReaderMediaObject.prototype.initialize.apply(this,arguments);a.setImage();a.setLinks();if(Ext.os.is.Desktop){a.checkUrl()}a.closeBtn=a.getComponent("closeBtn");if(Ext.os.is.Desktop){if(a.config.leftSideOverflow!=null){if(a.config.leftSideOverflow){a.mediaObject.x=100+a.mediaObject.x;a.setMediaObjectStyle()}}}a.closeBtn.element.one()}},scope:a});if(a.mediaObject.remove!="CLOSEBTN"){a.closeBtn.hide()}},setImage:function(){var b=this;b.fileGuid=b.mediaObject.file;if(b.fileGuid!=null){var c=b.fileGuid.substr(0,1);var a=b.fileGuid.substr(1,1);var d=".jpg";if(b.mediaObject.fileType!=null){switch(b.mediaObject.fileType){case"image/gif":d=".gif";break;case"image/png":d=".png";break;default:break}}b.imageurl="http://pages.cdn.pagesuite.com/media/"+c+"/"+a+"/"+b.fileGuid+d;b.setHtml("<div class='backImage' style='width:100%;height:100%;background:url("+b.imageurl+")'></div>")}},setLinks:function(){var a=this;a.imageClickUrl=a.mediaObject.url;if(a.imageClickUrl!=null&&a.imageClickUrl!=""&&a.imageClickUrl!="NONE"&&a.imageClickUrl!="http://"&&a.mediaObject.isTrigger=="false"){a.element.on(Url)})}},setFullScreenButtonListener:function(){var a=this;a.fullscreenButton.element.on("tap",function(){a.fireEvent("fullscreenImage",a);var b=Ext.getStore("SettingStore");if(b.data.items[0].raw.tracking!=null){var c=b.data.items[0].raw.tracking.trackingType;if(c=="GA"){ga("send","pageview")}else{$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackOmniture.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})}}$.ajax({crossDomain:true,type:"POST",contentType:"application/json; charset=utf-8",async:true,data:"pageview",url:"../trackPageSuite.aspx?pubid="+publicationguid+"&device="+device+"&width="+width+"&height="+height+"&landscapeWidth="+landscapeWidth+"&landscapeHeight="+landscapeHeight})})},che}}}}}},0,["readerimage"],["component","container","readermediaobject","readerimage"],{component:true,container:true,readermediaobject:true,readerimage:true},["widget.readerimage"],0,[InfinityMobile.view,"ReaderImageObject"],0));(Ext.cmd.derive("InfinityMobile.view.PageRestriction",Ext.Container,{config:{style:"background-color:#FFFFFF;border: 2px solid black;border-radius:5px;",width:"500px",height:"wrap",fullscreen:true,modal:true,centered:true,hideOnMaskTap:true,items:[{itemId:"title",items:[{id:"Close",cls:"pointerCursor",top:4,right:4,html:"<img src='../assets/article view/article-close-btn.png' onclick='parent.onClose()' ontouchstart='parent.onClose()' style='width:24px; height:24px' />"}]},{itemId:"image",style:"text-align:center"},{itemId:"textArea"},{itemId:"BtnArea",style:"width:100%;",padding:10,layout:{type:"hbox",pack:"center",align:"middle"},items:[{itemId:"register",cls:"pointerCursor",style:"padding:5px 10px;text-align:center;"}]}]},initialize:function(){var b=this;var e=b.getComponent("title");var d=b.getComponent("textArea");var a=b.getComponent("BtnArea");b.image=b.getComponent("image");var c=e.getComponent("Close");if(Ext.os.is.Phone){b.setWidth("90%")}b.btn=a.getComponent("register");b.btn.setHtml(language.register);if(settings.subscription.pageRestriction!=null){if(settings.subscription.pageRestriction.logo!=null){if(settings.subscription.pageRestriction.logo.length>0){b.image.setHtml('<img style="max-width:100%" src="'+settings.subscription.pageRestriction.logo+'" />');b.image.setPadding(20)}}if(settings.subscription.pageRestriction.title!=null){e.setHtml("<div style='padding:5px;border-top-left-radius:5px;border-top-right-radius:5px;' >"+settings.subscription.pageRestriction.title+"</div>")}else{e.setHtml("<div style='padding:5px;border-top-left-radius:5px;border-top-right-radius:5px;' >Please Subscribe</div>")}e.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});if(settings.subscription.pageRestriction.desc!=null){d.setHtml("<div style'padding:10px;'><p style='padding:10px;text-align:center;font-size:10pt;padding-bottom:10px;'>"+settings.subscription.pageRestriction.desc+"</p></div>")}else{d.setHtml("<div style'padding:10px;'><p style='padding:10px;text-align:center;font-size:10pt;padding-bottom:10px;'>Register now to gain access to the full digital edition! You'll be able to continue browsing through all of the pages of the magazine, and access all of the digital content.</p></div>")}d.element.on({scope:d,delegate:"a",tap:function(f){if(!Ext.os.is.Desktop){if(Ext.browser.is.Safari){window.location.href=f.target}}}})}register=function(){if(settings.subscription.pageRestriction!=null){if(settings.subscription.pageRestriction.redirectUrl!=null){window.open(settings.subscription.pageRestriction.redirectUrl,"_blank")}else{window.open("http://subscriber.pagesuite-professional.co.uk/subscribe.aspx?source=4&eid="+editionguid,"_blank")}}else{window.open("http://subscriber.pagesuite-professional.co.uk/subscribe.aspx?source=4&eid="+editionguid,"_blank")}};b.btn.element.on("tap",register);b.btn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});onClose=function(f){b.hide()}}},0,["pagerestriction"],["component","container","pagerestriction"],{component:true,container:true,pagerestriction:true},["widget.pagerestriction"],0,[InfinityMobile.view,"PageRestriction"],0));(Ext.cmd.derive("InfinityMobile.view.FullscreenPrompt",Ext.Container,{config:{style:"background-color:#FFFFFF;border: 2px solid black;border-radius:5px;",width:"500px",height:"wrap",fullscreen:true,modal:true,centered:true,hideOnMaskTap:true,items:[{itemId:"title",items:[{id:"Close",cls:"pointerCursor",top:4,right:4,html:"<img src='../assets/article view/article-close-btn.png' onclick='parent.onClose()' ontouchstart='parent.onClose()' style='width:24px; height:24px' />"}]},{itemId:"textArea"},{itemId:"BtnArea",style:"width:100%;",padding:10,layout:{type:"hbox",pack:"center",align:"middle"},items:[{itemId:"yesbtn",cls:"pointerCursor",style:"padding:5px 10px;text-align:center;"},{itemId:"nobtn",cls:"pointerCursor",style:"padding:5px 10px;text-align:center;"}]}]},initialize:function(){var b=this;var e=b.getComponent("title");var d=b.getComponent("textArea");var a=b.getComponent("BtnArea");b.image=b.getComponent("image");var c=e.getComponent("Close");if(Ext.os.is.Phone){b.setWidth("90%")}b.ybtn=a.getComponent("yesbtn");b.nbtn=a.getComponent("nobtn");b.ybtn.setHtml(language.yes);b.nbtn.setHtml(language.no);if(settings.fullscreenPrompt!=null){if(settings.fullscreenPrompt.title!=null){e.setHtml("<div style='padding:5px;border-top-left-radius:5px;border-top-right-radius:5px;' >"+settings.fullscreenPrompt.title+"</div>")}else{e.setHtml("<div style='padding:5px;border-top-left-radius:5px;border-top-right-radius:5px;' >Fullscreen Mode</div>")}e.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});if(settings.fullscreenPrompt.message!=null){d.setHtml("<div style'padding:10px;'><p style='padding:10px;text-align:center;font-size:10pt;padding-bottom:10px;'>"+settings.fullscreenPrompt.message+"</p></div>")}else{d.setHtml("<div style'padding:10px;'><p style='padding:10px;text-align:center;font-size:10pt;padding-bottom:10px;'>Would you like to start in fullscreen mode?</p></div>")}d.element.on({scope:d,delegate:"a",tap:function(f){if(!Ext.os.is.Desktop){if(Ext.browser.is.Safari){window.location.href=f.target}}}})}regk")}};b.ybtn.element.on(de()});b.nbtn.element.on("tap",function(){b.hide()});b.ybtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)",marginRight:"10px"});b.nbtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)",marginLeft:"10px"});onClose=function(f){b.hide()}}},0,["fullscreenprompt"],["component","container","fullscreenprompt"],{component:true,container:true,fullscreenprompt:true},["widget.fullscreenprompt"],0,[InfinityMobile.view,"FullscreenPrompt"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderArchiveMonthItem",Ext.Container,{config:{padding:10,style:"border-bottom:1px solid black"},initib})}},setUpHorizontal:function(b){var e=this;var a=b.split(" ")[0];a=e.checkTranslation(a);var c=b.split(" ")[1];var d=a.substring(0,3);b=d+" - "+c;e.setWidth(100);return b},setUpVertical:function(b){var d=this;var a=b.split(" ")[0];var c=b.split(" ")[1];a=d.checkTranslation(a);monthString=a+" "+c;return monthString},onTap:function(){var a=this;a.fireEvent("changeMonth",a)},checkTranslrn a}},0,["archiveMonthItem"],["component","container","archiveMonthItem"],{component:true,container:true,archiveMonthItem:true},["widget.archiveMonthItem"],0,[InfinityMobile.view,"ReaderArchiveMonthItem"],0));(Ext.cmd.derive("InfinityMobile.view.ArticleReaderTopBarBtn",Ext.Container,{config:{cls:"toolbar"},initil){}},tooltipRight:function(){var a=this;a.element.dom.onmousemove=(function(b){a.getComponent("tooltip").element.dom.style.webkitTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltip").element.dom.style.MozTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)";a.getComponent("tooltip").element.dom.style.msTransform="translate3d("+(b.offsetX+15)+"px, "+(b.offsetY-5)+"px, 0) scale3d("+1+","+1+",1)"})},toolti)"})}},0,["articlereadertopbarbtn"],["component","container","articlereadertopbarbtn"],{component:true,container:true,articlereadertopbarbtn:true},["widget.articlereadertopbarbtn"],0,[InfinityMobile.view,"ArticleReaderTopBarBtn"],0));(Ext.cmd.derive("InfinityMobile.view.BookmarkItem",Ext.Container,{config:{style:"float:left;",layout:"vbox",cls:"pointerCursor",items:[{maxHeight:250,style:"overflow:hidden",itemId:"bookmarkImage",html:"<img style='width:100%' />"},{itemId:"bookmarkText",cls:"thumbInfo",bottom:0,padding:5,width:"100%",style:"background-color:rgba(0, 0, 0, 0.5); color:white",html:"Page -1"},{itemId:"bookmarkDelete",top:5,right:5,width:30,height:30,padding:5,style:"background-color:rgba(0, 0, 0, 0.5); color:white",html:"<img style='width:20px; height:20px' src='../assets/article view/article-close-btn.png' />"}]},initialize:function(){var a=this;if(a.config.bookmarkItem!=null){a.bookmarkItem=a.config.bookmarkItem;a.loadBookmark();a.setPageDelete();a.setPageClick()}},loadBookmark:function(){var b=this;b.bookmarkImageContainer=b.getComponent("bookmarkImage");b.bookmarkImage=b.bookmarkImageContainer.element.down("img").dom;var a="";if(typeof latestLM!="undefined"){a="&lm="+latestLM}b.bookmarkImage.src="https://edition.pagesuite-professional.co.uk/get_image.aspx?w=280&eid="+editionguid+"&pnum="+(b.bookmarkItem.pageNumber)+a;b.bookmarkTextContainer=b.getComponent("bookmarkText");b.bookmarkTextContainer.setHtml(b.bookmarkItem.name)},setPageDa)})},setPageClick:function(){var a=this;a.element.on("tap",function(){a.fireEvent("loadPage",a)})}},0,["bookmarkitem"],["component","container","bookmarkitem"],{component:true,container:true,bookmarkitem:true},["widget.bookmarkitem"],0,[InfinityMobile.view,"BookmarkItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderMenuShareItem",Ext.Container,{config:{cls:"readermenushareitem shareItems pointerCursor",style:"float:left"},initialize:function(){var b=this;b.message="";if(b.config.pnum!=null){b.pnum=b.config.pnum}var a=window.location.href.substring(0,window.location.href.indexOf("?"));if(b.pnum!=null){b.url=encodeURIComponent(a+"?pnum="+b.pnum+"&edid="+editionguid)}else{b.url=encodeURIComponent(a+"?edid="+editionguid)}if(b.config.message!=null){b.message=b.config.message}if(b.config.url!=null){b.url=b.config.url}if(b.config.icon!=null){b.icon=b.config.icon;b.loadIcon()}b.type="";if(b.config.type!=null){b.type=b.config.type}if(b.config.link!=null){b.link=b.config.link;b.setLink()}if(b.config.menu!=null){b.menu=b.config.menu}if(b.config.toolbar!=null){b.toolbar=b.config.toolbar}if(settings.newsday!=null){if(settings.newsday.useFontAwesome=="true"){if(b.menu!=null){switch(b.type){case"email":b.setHtml('<i class="fa fa-envelope fa-lg pointerCursor" aria-hidden="true"></i>');break;case"facebook":b.setHtml('<i class="fa fa-facebook-official fa-lg pointerCursor" aria-hidden="true"></i>');break;case"twitter":b.setHtml('<i class="fa fa-twitter fa-lg pointerCursor" aria-hidden="true"></i>');break;case"googlePlus":b.setHtml('<i class="fa fa-google-plus fa-lg pointerCursor" aria-hidden="true"></i>');break;case"pinterest":b.setHtml('<i class="fa fa-pinterest fa-lg pointerCursor" aria-hidden="true"></i>')}}if(b.toolbar!=null){b.setStyle({backgroundColor:"transparent"});switch(b.type){case"email":b.setHtml('<i class="fa fa-envelope fa-lg pointerCursor" aria-hidden="true" style="color:white;margin:8px;" ></i>');break;case"facebook":b.setHtml('<i class="fa fa-facebook-official fa-lg pointerCursor" aria-hidden="true" style="color:white;margin:8px;" ></i>');break;case"twitter":b.setHtml('<i class="fa fa-twitter fa-lg pointerCursor" aria-hidden="true" style="color:white;margin:8px;" ></i>');break;case"googlePlus":b.setHtml('<i class="fa fa-google-plus fa-lg pointerCursor" aria-hidden="true" style="color:white;margin:8px;" ></i>');break;case"pinterest":b.setHtml('<i class="fa fa-pinterest fa-lg pointerCursor" aria-hidden="true" style="color:white;margin:8px;" ></i>');break}}}}},loa/>")},setLink:function(){var a=this;a.element.on("tap",function(d){d.stopPropagation();var c=a.link.replace("{0}",a.url).replace("{1}",a.message);c=c.replace("message=","body=");c=c.replace(/&apos;/g,"'");if(settings.tracking!=null&&settings.tracking.trackingType=="DA"){trackDaEvent("Share via "+a.type,"Social")}if(c.indexOf("mailto:")!=-1){window.location.href=c;if(typeof trackReaderEvent!="undefined"){var f={pageNum:a.pnum,description:a.message,socialType:a.type,shareType:a.config.isArticle?"article":"edition"};if(a.config.articleItem!=null){var b=a.config.articleItem;f.articleGuid=b.config.page.file;f.headline=b.config.page.description;f.author=b.config.page.byline;f.articleNumber=b.config.pageNo;f.pageNum=b.config.page.page}trackReaderEvent("email",f)}}else{window.open(c);if(typeof trackReaderEvent!="undefined"){if(c.indexOf("facebook")!=-1){a.type="facebook"}else{if(c.indexOf("twitter")!=-1){a.type="twitter"}else{if(c.indexOf("google")!=-1){a.type="google+"}else{if(c.indexOf("linkedin")!=-1){a.type="linkedin"}else{if(c.indexOf("pinterest")!=-1){a.type="pinterest"}}}}}var f={pageNum:a.pnum,description:a.message,socialType:a.type};f.shareType=a.config.isArticle?"article":"edition";if(a.config.articleItem!=null){var b=a.config.articleItem;f.articleGuid=b.config.page.file;f.headline=b.config.page.description;f.author=b.config.page.byline;f.articleNumber=b.config.pageNo;f.pageNum=b.config.page.page}trackReaderEvent("social",f)}}})},updateMessage:function(b){var a=this;a.message=b},updateUrl:function(a){var b=this;b.url=a}},0,["readermenushareitem"],["component","container","readermenushareitem"],{component:true,container:true,readermenushareitem:true},["widget.readermenushareitem"],0,[InfinityMobile.view,"ReaderMenuShareItem"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingArea",Ext.Panel,{config:{fullscreen:true,zIndex:999999,style:"position:absolute;top:-100%;display:inline-block;",items:[{itemId:"backgroundTop",html:"<div style='position:relative;width:"+$(document).width()*2+"px;height:"+$(document).height()+"px;background-color:rgba(0, 0, 0, 0.5)'></div>"},{itemId:"clipArea",layout:{type:"hbox",align:"stretch"},height:"auto",width:"200%",items:[{itemId:"clipBox",html:'<div class="clipper" style="display:none;position:relative;top:0px;width:30px;overflow:auto;height:30px;border:4px solid rgb(69, 143, 187);"><div class="ui-resizable-handle ui-resizable-se se-handle" ></div></div>'},{itemId:"backgroundRight",flex:1,style:"background-color:rgba(0, 0, 0, 0.5)"}]},{itemId:"backgroundBottom",html:"<div style='position:relative;width:"+$(document).width()*2+"px;height:"+$(document).height()*2+"px;background-color:rgba(0, 0, 0, 0.5)'></div>",items:[{itemId:"controlPanel",width:150,height:50,style:{backgroundColor:"rgba(0,0,0,0.7)",borderRadius:"5px",position:"absolute",margin:"5px 0px 5px 0px",zIndex:"999"},hidden:true,layout:"hbox",items:[{itemId:"cancel",width:50,height:50,style:{backgroundImage:'url("resources/images/reader icons/close-white.png")',backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",padding:"5px",zIndex:"10000"}},{itemId:"reset",height:50,width:50,style:{backgroundImage:'url("resources/images/reader icons/refresh-white.png")',backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",padding:"5px",zIndex:"10000"}},{itemId:"confirm",height:50,width:50,style:{backgroundImage:'url("resources/images/reader icons/tick-white.png")',backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",padding:"5px",zIndex:"10000"}}]}]},{itemId:"backgroundLeft",html:"<div style='position:absolute;left:-200%;top:0%;width:"+$(document).width()*2+"px;height:"+$(document).height()*3+"px;background-color:rgba(0, 0, 0, 0.5)'></div>"}]},initialize:function(){var b=this;var a=b.getComponent("clipArea");b.clipBox=a.getComponent("clipBox");b.leftBackground=b.getComponent("backgroundLeft").element.down("div").down("div").down("div");b.top=b.getComponent("backgroundTop").element.down("div").down("div").down("div");b.left=b.getComponent("backgroundLeft").element.down("div").down("div").down("div");b.bottom=b.getComponent("backgroundBottom").element.down("div").down("div").down("div");b.origDocH=$(document).height();b.origDocW=$(document).width();b.controlPanel=b.getComponent("backgroundBottom").getComponent("controlPanel");b.cancel=b.controlPanel.getComponent("cancel");b.reset=b.controlPanel.getComponent("reset");b.confirm=b.controlPanel.getComponent("confirm");b.confirm.element.on({tap:b.keyPress,scope:b});b.confirm.addCls("pointerCursor");b.cancel.element.on({tap:b.selfDestruct,scope:b});b.cancel.addCls("pointerCursor");b.reset.element.on({tap:b.resize,scope:b});b.reset.addCls("pointerCursor");if(b.config.reader!=null){b.reader=b.config.reader}if(b.config.readerActiveItem!=null){b.readerActiveItem=b.config.readerActiveItem}b.element.on({dragstart:function(c){c.stopPropagation()},drag:function(c){c.stopPropagation()},dragend:function(c){c.stopPropagation()}});window.onkey()}}};b.clipperDrawn=false;b.element.dom.onmousedown=function(c){b.mouseDown(c)};b.element.dom.onmouseup=function(c){b.mouseUp(c)};b.element.dom.addEventListener("touchstart",function(c){b.mouseDownTouch(c)});b.element.dom.addEventListener("touchend",function(c){b.mouseUp(c)});b.draggableHandle=b.element.down(".ui-resizable-handle");b.draggableHandle.dom.addEventListener("touchstart",function(c){c.stopPropagation();var l=c.changedTouches[0].clientX;var j=c.changedTouches[0].clientY;var d=$(".clipper").width();var k=$(".clipper").height();var e="";switch(b.getPrefix().css){case"-webkit-":e=b.element.dom.style.webkitTransform;break;case"-ms-":e=b.element.dom.style.msTransform;break;default:e=b.element.dom.style.transform;break}var h=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(",");var g=h[0].substring(0,h[0].indexOf("p"));var f=h[1].substring(0,h[1].indexOf("p"));b.move=function(r){r.stopPropagation();r.preventDefault();if(r.changedTouches[0].clientX>parseFloat(g)){var m=d+r.changedTouches[0].clientX-l;var q=g}else{var q=r.changedTouches[0].clientX;var m=parseFloat(g)-r.changedTouches[0].clientX}if(r.changedTouches[0].clientY>parseFloat(f)){var o=k+r.changedTouches[0].clientY-j;var p=f}else{var p=r.changedTouches[0].clientY;var o=parseFloat(f)-r.changedTouches[0].clientY}b.element.dom.style.transform="translate3d("+q+"px, "+(p)+"px, 0px)";b.element.dom.style.webkitTransform="translate3d("+q+"px, "+(p)+"px, 0px)";b.element.dom.style.mozTransform="translate3d("+q+"px, "+(p)+"px, 0px)";b.element.dom.style.msTransform="translate3d("+q+"px, "+(p)+"px, 0px)";$(".clipper").css("height",o);$(".clipper").css("width",m);if(Ext.browser.is.Chrome){if(b.controlPanel.element.dom.offsetTop>=(($(document).height()*2)-p-50)){if(m-$(b.controlPanel.element.dom).width()>=0){$(b.controlPanel.element.dom).css("transform","translate3d("+(m-($(b.controlPanel.element.dom).width()+$(b.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-p-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-webkit-transform","translate3d("+(m-($(b.controlPanel.element.dom).width()+$(b.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-p-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-moz-transform","translate3d("+(m-($(b.controlPanel.element.dom).width()+$(b.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-p-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-ms-transform","translate3d("+(m-($(b.controlPanel.element.dom).width()+$(b.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-p-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}else{$(b.controlPanel.element.dom).css("transform","translate3d(0px, "+(($(document).height()*2)-p-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-webkit-transform","translate3d(0px, "+(($(document).height()*2)-p-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-moz-transform","translate3d(0px, "+(($(document).height()*2)-p-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-ms-transform","translate3d(0px, "+(($(document).height()*2)-p-$(b.controlPanel.element.dom).height()-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}}else{if(m-$(b.controlPanel.element.dom).width()>=0){$(b.controlPanel.element.dom).css("transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-webkit-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-moz-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-ms-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)")}else{$(b.controlPanel.element.dom).css("transform","translateX(0px)");$(b.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(b.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(b.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}}else{var n=b.controlPanel.element.dom.getBoundingClientRect().top;var s=$(window).height()-50;if(n>=s){$(b.controlPanel.element.dom).css("-moz-transform","translate3d(0px,-50px,0px)");$(b.controlPanel.element.dom).css("-ms-transform","translate3d(0px,-50px,0px)");$(b.controlPanel.element.dom).css("transform","translate3d(0px,-50px,0px)")}else{if(m-$(b.controlPanel.element.dom).width()>=0){$(b.controlPanel.element.dom).css("transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-webkit-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-moz-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-ms-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)")}else{$(b.controlPanel.element.dom).css("transform","translateX(0px)");$(b.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(b.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(b.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}}};document.addEventListener("touchmove",b.move)});b.draggableHandle.dom.addEventListener("toucull)});b.draggableHandle.dom.onmousedown=function(c){c.stopPropagation();var l=c.clientX;var j=c.clientY;var d=$(".clipper").width();var k=$(".clipper").height();var e="";switch(b.getPrefix().css){case"-webkit-":e=b.element.dom.style.webkitTransform;break;case"-ms-":e=b.element.dom.style.msTransform;break;default:e=b.element.dom.style.transform;break}var h=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(",");var g=h[0].substring(0,h[0].indexOf("p"));var f=h[1].substring(0,h[1].indexOf("p"));document.onmousemove=function(r){r.stopPropagation();if(r.clientX>parseFloat(g)){var m=d+r.clientX-l;var q=g}else{var q=r.clientX;var m=parseFloat(g)-r.clientX}if(r.clientY>parseFloat(f)){var o=k+r.clientY-j;var p=f}else{var p=r.clientY;var o=parseFloat(f)-r.clientY}b.element.dom.style.transform="translate3d("+q+"px, "+(p)+"px, 0px)";b.element.dom.style.webkitTransform="translate3d("+q+"px, "+(p)+"px, 0px)";b.element.dom.style.mozTransform="translate3d("+q+"px, "+(p)+"px, 0px)";b.element.dom.style.msTransform="translate3d("+q+"px, "+(p)+"px, 0px)";$(".clipper").css("height",o);$(".clipper").css("width",m);if(Ext.browser.is.Chrome){if(b.controlPanel.element.dom.offsetTop>=(($(document).height()*2)-p-50)){if(m-150>=0){$(b.controlPanel.element.dom).css("transform","translate3d("+(m-180)+"px, "+(($(document).height()*2)-p-50-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-webkit-transform","translate3d("+(m-180)+"px, "+(($(document).height()*2)-p-50-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-moz-transform","translate3d("+(m-180)+"px, "+(($(document).height()*2)-p-50-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-ms-transform","translate3d("+(m-180)+"px, "+(($(document).height()*2)-p-50-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}else{$(b.controlPanel.element.dom).css("transform","translate3d(0px, "+(($(document).height()*2)-p-50-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-webkit-transform","translate3d(0px, "+(($(document).height()*2)-p-50-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-moz-transform","translate3d(0px, "+(($(document).height()*2)-p-50-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(b.controlPanel.element.dom).css("-ms-transform","translate3d(0px, "+(($(document).height()*2)-p-50-b.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}}else{if(m-150>=0){$(b.controlPanel.element.dom).css("transform","translateX("+(m-150)+"px)");$(b.controlPanel.element.dom).css("-webkit-transform","translateX("+(m-150)+"px)");$(b.controlPanel.element.dom).css("-moz-transform","translateX("+(m-150)+"px)");$(b.controlPanel.element.dom).css("-ms-transform","translateX("+(m-150)+"px)")}else{$(b.controlPanel.element.dom).css("transform","translateX(0px)");$(b.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(b.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(b.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}}else{var n=b.controlPanel.element.dom.getBoundingClientRect().top;var s=$(window).height()-50;if(n>=s){$(b.controlPanel.element.dom).css("-moz-transform","translate3d(0px,-50px,0px)");$(b.controlPanel.element.dom).css("-ms-transform","translate3d(0px,-50px,0px)");$(b.controlPanel.element.dom).css("transform","translate3d(0px,-50px,0px)")}else{if(m-$(b.controlPanel.element.dom).width()>=0){$(b.controlPanel.element.dom).css("transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-webkit-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-moz-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)");$(b.controlPanel.element.dom).css("-ms-transform","translateX("+(m-$(b.controlPanel.element.dom).width())+"px)")}else{$(b.controlPanel.element.dom).css("transform","translateX(0px)");$(b.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(b.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(b.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}}}};b.draggableHandle.dom.onmonull};b.element.on("paix;")})},getPrefix:function(){var a=window.getComputedStyle(document.documentElement,"");pre=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||(a.OLink===""&&["","o"]))[1];return{lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}},bannerAdx)"}},fillx)"}},zoompx"}},keyPress:function(){var a=this;var e="";switch(a.getPrefix().css){case"-webkit-":e=a.element.dom.style.webkitTransform;break;case"-ms-":e=a.element.dom.style.msTransform;break;default:e=a.element.dom.style.transform;break}var d=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(",");var c=d[0].substring(0,d[0].indexOf("p"));var b=d[1].substring(0,d[1].indexOf("p"));if(Ext.os.is.Desktop){if(settings.newsday!=null){if(settings.newsday.extraTopBar=="true"){var f=InfinityMobile.app.getController("ClippingController").getExtratopbar();if(f!=null){f.setZIndex(2)}}}}a.fireEvent("createClip",c,b,a.readerActiveItem,a.clipBox,a)},mouseDownTouch:function(g){var d=this;g.preventDefault();if(!d.clipperDrawn){d.element.dom.style.transform="translate3d("+g.changedTouches[0].clientX+"px, "+(g.changedTouches[0].clientY)+"px, 0px)";d.element.dom.style.webkitTransform="translate3d("+g.changedTouches[0].clientX+"px, "+(g.changedTouches[0].clientY)+"px, 0px)";d.element.dom.style.mozTransform="translate3d("+g.changedTouches[0].clientX+"px, "+(g.changedTouches[0].clientY)+"px, 0px)";d.element.dom.style.msTransform="translate3d("+g.changedTouches[0].clientX+"px, "+(g.changedTouches[0].clientY)+"px, 0px)";$(".clipper").css("display","");d.controlPanel.show();var k=g.changedTouches[0].clientX;var j=g.changedTouches[0].clientY;d.clipperDrawn=true;d.move=function(q){q.stopPropagation();q.preventDefault();var p;var o;if(q.changedTouches[0].clientX>k){var l=q.changedTouches[0].clientX-k;var o=k}else{var l=k-q.changedTouches[0].clientX;var o=q.changedTouches[0].clientX}if(q.changedTouches[0].clientY>j){var n=q.changedTouches[0].clientY-j;var p=j}else{var n=j-q.changedTouches[0].clientY;var p=q.changedTouches[0].clientY}d.element.dom.style.transform="translate3d("+o+"px, "+(p)+"px, 0px)";d.element.dom.style.webkitTransform="translate3d("+o+"px, "+(p)+"px, 0px)";d.element.dom.style.mozTransform="translate3d("+o+"px, "+(p)+"px, 0px)";d.element.dom.style.msTransform="translate3d("+o+"px, "+(p)+"px, 0px)";$(".clipper").css("height",n);$(".clipper").css("width",l);if(Ext.browser.is.Chrome){if(d.controlPanel.element.dom.offsetTop>=(($(document).height()*2)-p-50)){if(l-$(d.controlPanel.element.dom).width()>=0){$(d.controlPanel.element.dom).css("transform","translate3d("+(l-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-p-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translate3d("+(l-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-p-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-moz-transform","translate3d("+(l-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-p-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-ms-transform","translate3d("+(l-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-p-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}else{$(d.controlPanel.element.dom).css("transform","translate3d(0px, "+(($(document).height()*2)-p-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translate3d(0px, "+(($(document).height()*2)-p-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-moz-transform","translate3d(0px, "+(($(document).height()*2)-p-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-ms-transform","translate3d(0px, "+(($(document).height()*2)-p-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}}else{if(l-$(d.controlPanel.element.dom).width()>=0){$(d.controlPanel.element.dom).css("transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-webkit-transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-moz-transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-ms-transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)")}else{$(d.controlPanel.element.dom).css("transform","translateX(0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(d.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(d.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}}else{var m=d.controlPanel.element.dom.getBoundingClientRect().top;var r=$(window).height()-50;if(m>=r){$(d.controlPanel.element.dom).css("-moz-transform","translate3d(0px,-50px,0px)");$(d.controlPanel.element.dom).css("-ms-transform","translate3d(0px,-50px,0px)");$(d.controlPanel.element.dom).css("transform","translate3d(0px,-50px,0px)")}else{if(l-$(d.controlPanel.element.dom).width()>=0){$(d.controlPanel.element.dom).css("transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-webkit-transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-moz-transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-ms-transform","translateX("+(l-$(d.controlPanel.element.dom).width())+"px)")}else{$(d.controlPanel.element.dom).css("transform","translateX(0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(d.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(d.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}}};document.addEventListener("touchmove",d.move)}else{var c="";switch(d.getPrefix().css){case"-webkit-":c=d.element.dom.style.webkitTransform;break;case"-ms-":c=d.element.dom.style.msTransform;break;default:c=d.element.dom.style.transform;break}var e=c.substring(c.indexOf("(")+1,c.indexOf(")")).split(",");var h=parseFloat(e[0].substring(0,e[0].indexOf("p")));var f=parseFloat(e[1].substring(0,e[1].indexOf("p")));var b=g.changedTouches[0].clientX;var a=g.changedTouches[0].clientY;d.move=function(n){n.preventDefault();var p=b-n.changedTouches[0].clientX;var o=a-n.changedTouches[0].clientY;var m=h-p;var l=f-o;if(m<0){m=0}if(l<0){l=0}if(m>$(document).width()-$(d.clipBox.element.dom).width()){m=$(document).width()-$(d.clipBox.element.dom).width()}if(l>$(document).height()-$(d.clipBox.element.dom).height()){l=$(document).height()-$(d.clipBox.element.dom).height()}d.element.dom.style.transform="translate3d("+m+"px, "+(l)+"px, 0px)";d.element.dom.style.webkitTransform="translate3d("+m+"px, "+(l)+"px, 0px)";d.element.dom.style.mozTransform="translate3d("+m+"px, "+(l)+"px, 0px)";d.element.dom.style.msTransform="translate3d("+m+"px, "+(l)+"px, 0px)";if(d.controlPanel.element.dom.offsetTop>=(($(document).height()*2)-l-50)){if($(d.clipBox.element.dom).width()-$(d.controlPanel.element.dom).width()>=0){$(d.controlPanel.element.dom).css("transform","translate3d("+($(d.clipBox.element.dom).width()-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translate3d("+($(d.clipBox.element.dom).width()-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-moz-transform","translate3d("+($(d.clipBox.element.dom).width()-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-ms-transform","translate3d("+($(d.clipBox.element.dom).width()-($(d.controlPanel.element.dom).width()+$(d.confirm.element.dom).width()))+"px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}else{$(d.controlPanel.element.dom).css("transform","translate3d(0px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translate3d(0px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-moz-transform","translate3d(0px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(d.controlPanel.element.dom).css("-ms-transform","translate3d(0px, "+(($(document).height()*2)-l-$(d.controlPanel.element.dom).height()-d.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}}else{if($(d.clipBox.element.dom).width()-150>=0){$(d.controlPanel.element.dom).css("transform","translateX("+($(d.clipBox.element.dom).width()-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-webkit-transform","translateX("+($(d.clipBox.element.dom).width()-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-moz-transform","translateX("+($(d.clipBox.element.dom).width()-$(d.controlPanel.element.dom).width())+"px)");$(d.controlPanel.element.dom).css("-ms-transform","translateX("+($(d.clipBox.element.dom).width()-$(d.controlPanel.element.dom).width())+"px)")}else{$(d.controlPanel.element.dom).css("transform","translateX(0px)");$(d.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(d.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(d.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}};document.addEventListener("touchmove",d.move)}},mouseDown:function(f){var e=this;if(!e.clipperDrawn){e.element.dom.style.transform="translate3d("+f.clientX+"px, "+(f.clientY)+"px, 0px)";e.element.dom.style.webkitTransform="translate3d("+f.clientX+"px, "+(f.clientY)+"px, 0px)";e.element.dom.style.mozTransform="translate3d("+f.clientX+"px, "+(f.clientY)+"px, 0px)";e.element.dom.style.msTransform="translate3d("+f.clientX+"px, "+(f.clientY)+"px, 0px)";$(".clipper").css("display","");var d=f.clientX;var c=f.clientY;e.clipperDrawn=true;e.controlPanel.show();document.onmousemove=function(o){o.stopPropagation();var n;var m;if(o.clientX>d){var j=o.clientX-d;var m=d}else{var j=d-o.clientX;var m=o.clientX}if(o.clientY>c){var l=o.clientY-c;var n=c}else{var l=c-o.clientY;var n=o.clientY}e.element.dom.style.transform="translate3d("+m+"px, "+(n)+"px, 0px)";e.element.dom.style.webkitTransform="translate3d("+m+"px, "+(n)+"px, 0px)";e.element.dom.style.mozTransform="translate3d("+m+"px, "+(n)+"px, 0px)";e.element.dom.style.msTransform="translate3d("+m+"px, "+(n)+"px, 0px)";$(".clipper").css("height",l);$(".clipper").css("width",j);if(Ext.browser.is.Chrome){if(e.controlPanel.element.dom.offsetTop>=(($(document).height()*2)-n-50)){if(j-150>=0){$(e.controlPanel.element.dom).css("transform","translate3d("+(j-180)+"px, "+(($(document).height()*2)-n-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-webkit-transform","translate3d("+(j-180)+"px, "+(($(document).height()*2)-n-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-moz-transform","translate3d("+(j-180)+"px, "+(($(document).height()*2)-n-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-ms-transform","translate3d("+(j-180)+"px, "+(($(document).height()*2)-n-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}else{$(e.controlPanel.element.dom).css("transform","translate3d(0px, "+(($(document).height()*2)-n-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-webkit-transform","translate3d(0px, "+(($(document).height()*2)-n-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-moz-transform","translate3d(0px, "+(($(document).height()*2)-n-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-ms-transform","translate3d(0px, "+(($(document).height()*2)-n-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}}else{if(j-150>=0){$(e.controlPanel.element.dom).css("transform","translateX("+(j-150)+"px)");$(e.controlPanel.element.dom).css("-webkit-transform","translateX("+(j-150)+"px)");$(e.controlPanel.element.dom).css("-moz-transform","translateX("+(j-150)+"px)");$(e.controlPanel.element.dom).css("-ms-transform","translateX("+(j-150)+"px)")}else{$(e.controlPanel.element.dom).css("transform","translateX(0px)");$(e.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(e.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(e.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}}else{var k=e.controlPanel.element.dom.getBoundingClientRect().top;var p=$(window).height()-50;if(k>=p){$(e.controlPanel.element.dom).css("-moz-transform","translate3d(0px,-50px,0px)");$(e.controlPanel.element.dom).css("-ms-transform","translate3d(0px,-50px,0px)");$(e.controlPanel.element.dom).css("transform","translate3d(0px,-50px,0px)")}else{if($(e.clipBox.element.dom).width()-150>=0){$(e.controlPanel.element.dom).css("transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)");$(e.controlPanel.element.dom).css("-webkit-transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)");$(e.controlPanel.element.dom).css("-moz-transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)");$(e.controlPanel.element.dom).css("-ms-transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)")}else{$(e.controlPanel.element.dom).css("transform","translateX(0px)");$(e.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(e.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(e.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}}}}else{if(f.target.id!="se-handle"){console.log("move");var g="";switch(e.getPrefix().css){case"-webkit-":g=e.element.dom.style.webkitTransform;break;case"-ms-":g=e.element.dom.style.msTransform;break;default:g=e.element.dom.style.transform;break}var b=g.substring(g.indexOf("(")+1,g.indexOf(")")).split(",");var a=parseFloat(b[0].substring(0,b[0].indexOf("p")));var h=parseFloat(b[1].substring(0,b[1].indexOf("p")));document.onmousemove=function(m){var p=f.clientX-m.clientX;var n=f.clientY-m.clientY;var l=a-p;var j=h-n;if(l<0){l=0}if(j<0){j=0}if(l>$(document).width()-$(e.clipBox.element.dom).width()){l=$(document).width()-$(e.clipBox.element.dom).width()}if(j>$(window).height()-$(e.clipBox.element.dom).height()){j=$(window).height()-$(e.clipBox.element.dom).height()}$(e.element.dom).css("-webkit-transform","translate3d("+l+"px, "+(j)+"px, 0px)");$(e.element.dom).css("-moz-transform","translate3d("+l+"px, "+(j)+"px, 0px)");$(e.element.dom).css("-ms-transform","translate3d("+l+"px, "+(j)+"px, 0px)");$(e.element.dom).css("transform","translate3d("+l+"px, "+(j)+"px, 0px)");if(Ext.browser.is.Chrome){if(e.controlPanel.element.dom.offsetTop>=(($(document).height()*2)-j-50)){if($(e.clipBox.element.dom).width()-150>=0){$(e.controlPanel.element.dom).css("transform","translate3d("+($(e.clipBox.element.dom).width()-180)+"px, "+(($(document).height()*2)-j-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-webkit-transform","translate3d("+($(e.clipBox.element.dom).width()-180)+"px, "+(($(document).height()*2)-j-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-moz-transform","translate3d("+($(e.clipBox.element.dom).width()-180)+"px, "+(($(document).height()*2)-j-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-ms-transform","translate3d("+($(e.clipBox.element.dom).width()-180)+"px, "+(($(document).height()*2)-j-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}else{$(e.controlPanel.element.dom).css("transform","translate3d(0px, "+(($(document).height()*2)-j-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-webkit-transform","translate3d(0px, "+(($(document).height()*2)-j-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-moz-transform","translate3d(0px, "+(($(document).height()*2)-j-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)");$(e.controlPanel.element.dom).css("-ms-transform","translate3d(0px, "+(($(document).height()*2)-j-50-e.getComponent("backgroundBottom").element.dom.offsetTop)+"px, 0px)")}}else{if($(e.clipBox.element.dom).width()-150>=0){$(e.controlPanel.element.dom).css("transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)");$(e.controlPanel.element.dom).css("-webkit-transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)");$(e.controlPanel.element.dom).css("-moz-transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)");$(e.controlPanel.element.dom).css("-ms-transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)")}else{$(e.controlPanel.element.dom).css("transform","translateX(0px)");$(e.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(e.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(e.controlPanel.element.dom).css("-ms-transform","translateX(0px)")}}}else{var k=e.clipBox.element.dom.getBoundingClientRect().top;var o=$(window).height()-$(e.clipBox.element.dom).height()-50;if(k>=o){$(e.controlPanel.element.dom).css("-webkit-transform","translate3d(0px,-50px,0px)");$(e.controlPanel.element.dom).css("-moz-transform","translate3d(0px,-50px,0px)");$(e.controlPanel.element.dom).css("-ms-transform","translate3d(0px,-50px,0px)");$(e.controlPanel.element.dom).css("transform","translate3d(0px,-50px,0px)")}else{if($(e.clipBox.element.dom).width()-150>=0){$(e.controlPanel.element.dom).css("-webkit-transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)");$(e.controlPanel.element.dom).css("-moz-transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)");$(e.controlPanel.element.dom).css("-ms-transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)");$(e.controlPanel.element.dom).css("transform","translateX("+($(e.clipBox.element.dom).width()-150)+"px)")}else{$(e.controlPanel.element.dom).css("-webkit-transform","translateX(0px)");$(e.controlPanel.element.dom).css("-moz-transform","translateX(0px)");$(e.controlPanel.element.dom).css("-ms-transform","translateX(0px)");$(e.controlPanel.element.dom).css("transform","translateX(0px)")}}}}}else{}}},moove)},selfDestruct:function(){var a=this;window.onkeypress=null;if(!Ext.os.is.Phone){a.fireEvent("enableArticlesContainer")}if(Ext.os.is.Desktop){if(settings.newsday!=null){if(settings.newsday.extraTopBar=="true"){var b=InfinityMobile.app.getController("ClippingController").getExtratopbar();if(b!=null){b.setZIndex(2)}}}}Ext.Viewport.remove(a);a.destroy()},resize:function(){var a=this;a.fireEvent("resetClippingArea",a)}},0,["clippingarea"],["component","container","panel","clippingarea"],{component:true,container:true,panel:true,clippingarea:true},["widget.clippingarea"],0,[InfinityMobile.view,"ClippingArea"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderImageGallery",Ext.Carousel,{config:{modal:true,fullscreen:true,centered:true,height:"100%",width:"100%",style:"background-color:black;",zIndex:20,items:[{itemId:"close",right:10,top:10,width:30,height:30,cls:"backgroundImage",style:"background-image:url('../assets/article view/article-close-btn.png');background-position:center;background-size:center;background-repeat:no-repeat;"}]},initi:b})},setUpNavi:b})},showNavigator:function(){var a=this;var b=a.getPrefix().css;if(a.toolbarHidden){if(a.bottomToolbar.isHidden()){a.bottomToolbar.show()}switch(b){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes toolbarRaise { 0%{ -webkit-transform:translate3d(0px, 190px, 0px); } 100%{ -webkit-transform:translate3d(0px, 0px, 0px); } }",0);a.bottomToolbar.element.dom.style.webkitAnimation="toolbarRaise 0.3s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes toolbarRaise { 0%{ transform:translate3d(0px, 190px, 0px); } 100%{ transform:translate3d(0px, 0px, 0px); } }",0);a.bottomToolbar.element.dom.style.animation="toolbarRaise 0.3s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes toolbarRaise { 0%{ -moz-transform:translate3d(0px, 190px, 0px); } 100%{ -moz-transform:translate3d(0px, 0px, 0px); } }",0);a.bottomToolbar.element.dom.style.mozAnimation="toolbarRaise 0.3s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes toolbarRaise { 0%{ -ms-transform:translate3d(0px, 190px, 0px); } 100%{ -ms-transform:translate3d(0px, 0px, 0px); } }",0);a.bottomToolbar.element.dom.style.msAnimation="toolbarRaise 0.3s forwards";default:document.styleSheets[0].insertRule("@keyframes toolbarRaise { 0%{ transform:translate3d(0px, 190px, 0px); } 100%{ transform:translate3d(0px, 0px, 0px); } }",0);a.bottomToolbar.element.dom.style.animation="toolbarRaise 0.3s forwards"}a.toolbarHidden=false}else{if(a.bottomToolbar.isHidden()){a.bottomToolbar.show()}switch(b){case"-webkit-":document.styleSheets[0].insertRule("@-webkit-keyframes toolbarHide { 0%{ -webkit-transform:translate3d(0px, 0px, 0px); } 100%{ -webkit-transform:translate3d(0px, 190px, 0px); } }",0);a.bottomToolbar.element.dom.style.webkitAnimation="toolbarHide 0.3s forwards";break;case"-moz-":if(Ext.os.is.Desktop){document.styleSheets[0].insertRule("@keyframes toolbarHide { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, 190px, 0px); } }",0);a.bottomToolbar.element.dom.style.animation="toolbarHide 0.3s forwards"}else{document.styleSheets[0].insertRule("@-moz-keyframes toolbarHide { 0%{ -moz-transform:translate3d(0px, 0px, 0px); } 100%{ -moz-transform:translate3d(0px, 190px, 0px); } }",0);a.bottomToolbar.element.dom.style.mozAnimation="toolbarHide 0.3s forwards"}break;case"-ms-":document.styleSheets[0].insertRule("@-ms-keyframes toolbarHide { 0%{ -ms-transform:translate3d(0px, 0px, 0px); } 100%{ -ms-transform:translate3d(0px, 190px, 0px); } }",0);a.bottomToolbar.element.dom.style.msAnimation="toolbarHide 0.3s forwards";default:document.styleSheets[0].insertRule("@keyframes toolbarHide { 0%{ transform:translate3d(0px, 0px, 0px); } 100%{ transform:translate3d(0px, 190px, 0px); } }",0);a.bottomToolbar.element.dom.style.animation="toolbarHide 0.3s forwards"}a.toolbarHidden=true}},getPrefix:function(){var a=window.getComputedStyle(document.documentElement,"");pre=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||(a.OLink===""&&["","o"]))[1];return{lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}}},0,["readerimagegallery"],["component","container","carousel","readerimagegallery"],{component:true,container:true,carousel:true,readerimagegallery:true},["widget.readerimagegallery"],0,[InfinityMobile.view,"ReaderImageGallery"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderImageGalleryItem",Ext.Container,{config:{height:"100%",width:"100%",pageNo:0},initit"})}},0,["readerimagegalleryitem"],["component","container","readerimagegalleryitem"],{component:true,container:true,readerimagegalleryitem:true},["widget.readerimagegalleryitem"],0,[InfinityMobile.view,"ReaderImageGalleryItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderPuzzleArchiveItem",Ext.Container,{config:{layout:"vbox",items:[{itemId:"image",height:150},{itemId:"text",style:"text-align:center; font-size:18px; font-weight:bold"}]},initier()},setClickLisa)})}},0,["readerpuzzlearchiveitem"],["component","container","readerpuzzlearchiveitem"],{component:true,container:true,readerpuzzlearchiveitem:true},["widget.readerpuzzlearchiveitem"],0,[InfinityMobile.view,"ReaderPuzzleArchiveItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderArchivePageButton",Ext.Container,{config:{cls:"pointerCursor",margin:"0px 5px"},initi)}})},selected:function(){var a=this;a.element.dom.style.color="black"},unselected:function(){var a=this;a.element.dom.style.color=""}},0,["readerarchivepagebutton"],["component","container","readerarchivepagebutton"],{component:true,container:true,readerarchivepagebutton:true},["widget.readerarchivepagebutton"],0,[InfinityMobile.view,"ReaderArchivePageButton"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderArticleHelper",Ext.Container,{config:{width:"100%",height:"100%",top:0,left:0,layout:{type:"vbox",pack:"center",align:"middle"},hideMaskOnTap:false,style:"color:white;",items:[{itemId:"space",height:40},{flex:1,width:"100%",layout:{type:"vbox",pack:"center",align:"middle"},itemId:"outerCounter",style:"background-color:rgba(0,0,0,0.7);",items:[{itemId:"headingBar",width:"100%",top:0,style:"font-size:30px;text-align:center;color:black;background-color:rgba(218,218,218,0.6);",padding:10,layout:{type:"hbox",pack:"center",align:"middle"},items:[{itemId:"heading",style:"max-width:500px;",html:"There's a new way to view stories in today's paper"}]},{flex:1},{itemId:"container",width:"100%",style:"max-width:500px;max-height:700px;",layout:{type:"vbox",pack:"center",align:"middle"},defaults:{margin:"20 0"},items:[{itemId:"description",layout:{type:"vbox",pack:"center",align:"middle"},items:[{itemId:"icon",layout:{type:"vbox",pack:"center",align:"middle"},margin:"10 0",items:[{height:40,width:40,style:"background-image:url('resources/images/howTo/touch-screen-friendly.png');background-position:center;background-size:contain;background-repeat:no-repeat;"}]},{itemId:"tapDesc",style:"font-size:20px;text-align:center;font-weight:bold;max-width:400px;",html:"Tap any story on any page to read it in a mobile-friendly format. Tap 'X' to return to the digital paper or swipe to the next story"}]},{itemId:"toggleSettingArea",layout:{type:"vbox",pack:"center",align:"middle"},items:[{itemId:"toggleDesc",style:"font-size:18px;text-align:center;max-width:500px;",html:"Going back to the paper? You can return to the page containing the story you just read or to the last page you viewed. Toggle your preference below",margin:"10 0"},{itemId:"toggle",cls:"pointerCursor",style:"font-size:18px;text-align:center;max-width:600px;",html:"Return to page featuring last story viewed: <input class='pointerCursor' type='checkbox' checked=\"true\" style='margin-left:5px;top:2px;position:relative;width:15px;height:15px;' onclick='if(this.checked){ this.checked = false; } else{ this.checked = true }' ></input>"}]},{itemId:"continueContainer",layout:{type:"hbox",pack:"center"},items:[{itemId:"continueBtn",cls:"pointerCursor btn",height:35,style:"background-color:#4591b8; color: white;",padding:"5 30 5 30",layout:{type:"vbox",pack:"center",align:"middle"},items:[{html:"Continue to paper"}]}]}]},{flex:1}]}]},initialize:function(){var a=this;a.space=a.getComponent("space");a.outerContainer=a.getComponent("outerCounter");a.headingBar=a.outerContainer.getComponent("headingBar");a.heading=a.headingBar.getComponent("heading");a.container=a.outerContainer.getComponent("container");a.desc=a.container.getComponent("description");a.tapDesc=a.desc.getComponent("tapDesc");a.toggleSettingArea=a.container.getComponent("toggleSettingArea");a.toggleDesc=a.toggleSettingArea.getComponent("toggleDesc");a.toggle=a.toggleSettingArea.getComponent("toggle");a.continueContainer=a.container.getComponent("continueContainer");a.continueBtn=a.continueContainer.getComponent("continueBtn");a.setupListeners();a.setupCurrentValue();if(Ext.os.is.Desktop){a.tapDesc.setHtml("Tap any story on any page to read it in a desktop-friendly format. Tap 'X' to return to the digital paper or swipe to the next story");a.setDesktopFontSize()}if(Ext.os.is.Phone){a.setPhoneFontSize();Ext.Viewport.on("orientationchange",function(){a.setPhoneFontSize()})}},returnOrientation:function(){var a=Ext.Viewport.getOrientation();if(Ext.os.is.Android){if(screen.width>screen.height){a="landscape"}else{a="portrait"}}else{if(Ext.os.is.Desktop){if($(document).width()>$(document).height()){a="landscape"}else{a="portrait"}}}return a},setupList:a})},setupCurrenta){}},setDesktopFonde()},setPhoneFon(5)}},continueTo",b)},toggleue}}}},0,["articlehelper"],["component","container","articlehelper"],{component:true,container:true,articlehelper:true},["widget.articlehelper"],0,[InfinityMobile.view,"ReaderArticleHelper"],0));(Ext.cmd.derive("InfinityMobile.view.LightboxLink",Ext.Container,{config:{style:"padding:0px; border-radius:0px; background-color:white;",cls:"innerhtmlfullheight",height:"100%",width:"100%",layout:"vbox",zIndex:20,items:[{itemId:"topBar",height:40,layout:"hbox",items:[{id:"toolBarClose",cls:"pointerCursor",top:8,right:8,html:"<img src='../assets/article view/article-close-btn.png' style='width:24px; height:24px' />"}]},{flex:1,itemId:"content"}]},initialize:function(){var a=this;a.topBar=a.getComponent("topBar");a.topBar.setStyle({color:"#"+settings.reader.overlayTitleBarTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.overlayTitleBarColour)+", 0.9)"});a.closeButton=a.topBar.getComponent("toolBarClose");a.setCloseButtonListenter();a.content=a.getComponent("content");if(a.config.mediaObject!=null){a.mediaObject=a.config.mediaObject;a.loadMediaObject()}},setCloseButtonListenter:function(){var a=this;a.closeButton.element.on("tap",function(){a.fireEvent("close",a)})},loadMediaObject:function(){var b=this;if(b.mediaObject.url!=null){var a=b.mediaObject.url;b.content.setHtml('<div class=\'iframeWrapper\' style=\'position:absolute; width:100%; height:100%; overflow-y:scroll; -webkit-overflow-scrolling:touch;\'><iframe style="border:none;width:100%; height:100%" class="iframePopover" src="'+a+'" /></div>')}}},0,["lightboxlink"],["component","container","lightboxlink"],{component:true,container:true,lightboxlink:true},["widget.lightboxlink"],0,[InfinityMobile.view,"LightboxLink"],0));(Ext.cmd.derive("InfinityMobile.view.ClippingItems",Ext.Container,{config:{items:[{itemId:"deleteBtn",right:0,top:0,height:20,width:20,style:"background-image:url('resources/images/reader icons/close btn.png');background-size:contain;background-position:center;background-repeat:no-repeat;background-color:rgba(0,0,0,0.7);",hidden:true}]},initialize:function(){var a=this;Ext.Container.prototype.initialize.apply(this,arguments);if(a.config.image!=null){a.image=a.config.image}if(a.config.clicked!=null){a.clicked=a.config.clicked}a.deleteBtn=a.getComponent("deleteBtn");if(Ext.os.is.Phone){a.deleteBtn.setHeight(30);a.deleteBtn.setWidth(30)}a.setStyle({"float":"left",border:"1px solid gray",backgroundImage:"url('"+a.image+"')",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"});a.element.on(w()}});a.deleteBtn.element.on({tap:a.deleteItem,scope:a});a.addCls("pointerCursor")},delet:a})}},0,["clippingitems"],["component","container","clippingitems"],{component:true,container:true,clippingitems:true},["widget.clippingitems"],0,[InfinityMobile.view,"ClippingItems"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderPrintItem",Ext.Container,{config:{style:"float:left;border:1px solid grey;overflow:hidden;",editionGuid:"2193eb4d-6dcd-42bf-a8bf-8c7ce0e0eecf",pageNo:1,pageIndex:1,height:175,cls:"pointerCursor",items:[{itemId:"printItemLabel",bottom:0,height:30,width:"100%",padding:"5 0 0 0",style:"background-color:rgba(0,0,0,0.7); color:white; border-radius:5px; padding-left:7px",items:[{itemId:"printItemCheckBox",xtype:"customcheckbox",right:30,top:2}]}]},initialize:function(){var c=this;var d=c.getEditionGuid();var a=c.getPageNo();var b="";if(typeof latestLM!="undefined"){b="&lm="+latestLM}var e="https://edition.pagesuite-professional.co.uk/get_image.aspx?w=280&eid="+d+"&pnum="+a+b;c.setHtml("<img style='width:100%' src='"+e+"' />");c.editionLabel=c.getComponent("printItemLabel");c.editionLabelCheckBox=c.editionLabel.getComponent("printItemCheckBox");if(Ext.browser.is.Firefox){c.editionLabelCheckBox.setRight(5)}c.editionLabel.setHtml(language.page+" "+a);if(settings.newsday!=null){c.addCls("thumbInfo");c.editionLabel.setStyle({borderRadius:"0px"})}if(!Ext.browser.is.Firefox){c.editionLabelCheckBox.setWidth(0)}c.setClickListener()},setClickListener:function(){var a=this;a.element.on("tap",function(){a.fireEvent("toggleCheckBox",a,a.editionLabelCheckBox)})}},0,["printitem"],["component","container","printitem"],{component:true,container:true,printitem:true},["widget.printitem"],0,[InfinityMobile.view,"ReaderPrintItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderDownloadItem",Ext.Container,{config:{style:"float:left;border:1px solid grey;overflow:hidden",editionGuid:"2193eb4d-6dcd-42bf-a8bf-8c7ce0e0eecf",pageNo:1,pageIndex:1,cls:"pointerCursor",height:175,items:[{itemId:"downloadItemLabel",bottom:0,height:30,width:"100%",padding:"5 0 0 0",style:"background-color:rgba(0,0,0,0.7); color:white; border-radius:5px; padding-left:7px",items:[{itemId:"downloadItemCheckBox",xtype:"customcheckbox",right:30,top:2}]}]},initialize:function(){var d=this;var e=d.getEditionGuid();var b=d.getPageNo();var a=d.getPageIndex();var c="";if(typeof latestLM!="undefined"){c="&lm="+latestLM}var f="https://edition.pagesuite-professional.co.uk/get_image.aspx?w=280&eid="+e+"&pnum="+b+c;d.setHtml("<img style='width:100%' src='"+f+"' />");d.editionLabel=d.getComponent("downloadItemLabel");d.editionLabelCheckBox=d.editionLabel.getComponent("downloadItemCheckBox");if(Ext.browser.is.Firefox){d.editionLabelCheckBox.setRight(5)}d.editionLabel.setHtml(language.page+" "+b);if(settings.newsday!=null){d.addCls("thumbInfo");d.editionLabel.setStyle({borderRadius:"0px"})}if(!Ext.browser.is.Firefox){d.editionLabelCheckBox.setWidth(0)}d.setClickListener()},setClickLis)})}}},0,["downloaditem"],["component","container","downloaditem"],{component:true,container:true,downloaditem:true},["widget.downloaditem"],0,[InfinityMobile.view,"ReaderDownloadItem"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderImageGalleryAdvert",Ext.Container,{config:{height:"100%",width:"100%",pageNo:"",type:""},initialize:function(){var a=this;a.setupVars();a.setupAdvert()},setupVars:function(){var a=this;if(a.config.type!=null){a.type=a.config.type}},setupAdvert:function(){var b=this;if(settings.reader.galleryMpu!=null&&settings.reader.galleryMpu.type=="dfp"&&settings.reader.galleryMpu.networkCode!=null&&settings.reader.galleryMpu.adUnit!=null){}var a=settings.reader.galleryMpu;b.adType=a.type;if(a!=null){switch(a.type){case"dfp":default:b.networkCode=a.networkCode;b.adUnit=a.adUnit;b.targeting=a.targeting;b.setupDfp();break}}},setupDfp:function(){var a=this;if(a.networkCode!=null&&a.adUnit!=null){a.advertId="ig_advert"+a.id;a.setHtml("<div class='gallery-ad-container'><div id='"+a.advertId+"' class='fg-gallery-mpu'></div></div>");gptadslots.push(googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,[[300,250]],a.advertId).addService(googletag.pubads().updateCorrelator()));if(a.targeting!=null){a.setTargeting(a.targeting)}}},setTargeting:function(a){var g=this;if(a!=null&&a!=""){var h=a.split("|");for(var c in h){var e=h[c];var j=e.split("*");if(j.length==2){var m=j[0];var l=j[1];if(l.indexOf("{{VAR=")>=0){var d=l.replace("{{VAR=","").replace("}}","");var n=d.split(".");var b=window;for(var k in n){var f=n[k];if(b[f]!=null){l=b[f];b=l}else{console.log("Error: "+j[1]+" does not exist");l="";break}}}if(m!=null&&m!=""&&l!=null&&l!=""){googletag.pubads().setTargeting(m,l)}}}}},loadDfp:function(){var a=this;googletag.enableServices();googletag.cmd.push(function(){googletag.display(a.advertId)})}},0,["readerimagegalleryadvert"],["component","container","readerimagegalleryadvert"],{component:true,container:true,readerimagegalleryadvert:true},["widget.readerimagegalleryadvert"],0,[InfinityMobile.view,"ReaderImageGalleryAdvert"],0));(Ext.cmd.derive("InfinityMobile.view.AdvertPageViewer",Ext.Panel,{config:{height:"100%",width:"100%",pageNo:"",items:[{itemId:"advert"}]},beforeInitie"})},initiype)},setupVars:function(){var d=this;d.advertId=this.id+"advert";if(d.config.advertType!=null){d.advertType=d.config.advertType}if(d.config.networkCode!=null){d.networkCode=d.config.networkCode}if(d.config.adUnit!=null){d.adUnit=d.config.adUnit}if(d.config.advertSize!=null){d.advertSize=[];var a=d.config.advertSize.split("|");if(a){for(var c=0;c<a.length;c++){var b=a[c].split(",");if(b!=null&&b.length==2){d.advertSize.push([parseInt(b[0]),parseInt(b[1])])}}}}if(d.config.adUrl!=null){d.adUrl=d.config.adUrl}if(d.config.adLink!=null){d.adLink=d.config.adLink}if(d.config.targeting!=null){d.targeting=d.config.targeting}d.advertComponent=d.getComponent("advert");d.scale=1},setAdvertHtml:function(a){var b=this;switch(a){case"dfp":b.setupDfpAdvert();break;case"image":b.setupImageAdvert();break;case"url":b.setupUrlAdvert();break}b.hasHtmlSetup=true},setupDfpAdvert:function(){var a=this;a.advertComponent.setHtml("<div id='"+a.advertId+"' class='page-flow-advert'></div>");if(typeof googletag!="undefined"&&googletag!=null&&googletag.pubads!=null){googletag.pubads().addEventListener("slotRenderEnded",function(b){if(!b.isEmpty){if(a.adslot==b.slot){a.loadedSize=b.size;a.resizeAdvert();a.setDfpTouchEventListeners()}}else{if(a.adslot==b.slot){a.setDfpTouchEventListeners()}}})}else{}},setupDfpTargetting:function(){},setupUrlAdvert:function(){var a=this;a.on("painted",function(){a.advertComponent.setHeight("100%");a.advertComponent.setWidth("100%");var b=a.advertComponent.element.dom.getElementsByClassName("x-innerhtml")[0];if(b!=null){b.style.height="100%";b.style.width="100%"}});a.advertComponent.setHtml("<iframe id='"+a.advertId+"' class='page-flow-advert' style='position:relative;width:100%; height:100%;border:none;' src='"+a.adUrl+"'></iframe>")},setupImageAdvert:function(){var a=this;a.on("pai0%"}});a.advertComponent.setHtml("<div id='"+a.advertId+"' class='page-flow-advert' style='position:relative;width:100%; height:100%;cursor: pointer;background:url(\""+a.adUrl+"\");background-size:contain;background-repeat:no-repeat;background-position:center;'></div>");a.advertComponent.element.on("tap",function(){window.open(a.adLink,"_blank")})},loadAdvert:function(){var a=this;switch(a.advertType){case"dfp":a.loadDfpAdvert();break;case"image":case"url":break}},loadDfpAdvert:function(){var a=this;if(googletag!=null){if(a.hasLoaded){googletag.pubads().refresh([a.adslot])}else{googletag.cmd.push(function(){console.log(a.advertSize);a.adslot=googletag.defineSlot("/"+a.networkCode+"/"+a.adUnit,a.advertSize,a.advertId).addService(googletag.pubads().updateCorrelator());if(a.targeting!=null&&a.targeting.length>0){var b=a.targeting.split("|");for(var d in b){var e=b[d];var c=e.split("*");if(c!=null&&c.length>=2){a.adslot.setTargeting(c[0],c[1])}}}googletag.enableServices();googletag.display(a.advertId);a.hasLoaded=true})}}},refreshAdvert:function(){},pageResize:function(){var a=this;a.resizeAdvert()},onResize:function(){var a=this;a.resizeAdvert()},resizeAdvert:function(){var e=this;var c=e.advertComponent.element.dom.clientHeight;var a=e.advertComponent.element.dom.clientWidth;var d=e.element.dom.clientHeight;var b=e.element.dom.clientWidth;var f=e.getScale(c,d);var h=e.getScale(a,b);var g=e.returnTranslate(f,h);f>h?e.applyTransform(h,g):e.applyTransform(f,g)},returnTranslate:function(a,b){var s=this;var u=a>b?b:a;var d=a>b?"width":"height";var j=s.advertComponent.element.dom;var h=s.element.dom;var g=0;var e=0;try{var v=s.loadedSize!=null&&s.loadedSize.length==2?s.loadedSize[1]:s.advertSize[0][1];var r=s.loadedSize!=null&&s.loadedSize.length==2?s.loadedSize[0]:s.advertSize[0][0];if((u*j.clientWidth)<h.clientWidth&&v>h.clientHeight){var f=h.clientWidth;var m=(r*a);var q=(f-m)/2;var l=Math.max(0,(f-r))/2;g=q-l}if((u*j.clientHeight)<h.clientHeight&&r>h.clientWidth){var n=h.clientHeight;var t=(v*u);var p=(n-t)/2;var c=Ext.browser.is.IE?s.advertComponent.element.dom.offsetTop:0;var k=(Math.max(0,(n-v))/2)+c;e=p-k}else{if(Ext.browser.is.IE){e=(u*j.clientHeight)<h.clientHeight?0:Math.abs(s.advertComponent.element.dom.offsetTop)}}}catch(o){console.error("[AdvertPageViewer]:\n",o)}return"translate3d("+g+"px, "+e+"px, 0)"},getb/a)},applyTranb})}},setDfpTouchEventListb)}}},dragt(b)}g(b)},drd(c)},getPageNo:function(){return this.config.pageNo},toggleZoomMode:function(){},toggleDPS:function(){},toggleDPSNonActive:function(){},completeImageLoaded:function(){},completePDFLoaded:function(){},stopTiling:function(){},destroy:function(){if(typeof googletag!="undefined"&&googletag.destroySlots!=null){googletag.destroySlots([this.adslot])}Ext.Panel.prototype.destroy.apply(this,arguments)}},0,["readeradvertpageviewer"],["component","container","panel","readeradvertpageviewer"],{component:true,container:true,panel:true,readeradvertpageviewer:true},["widget.readeradvertpageviewer"],0,[InfinityMobile.view,"AdvertPageViewer"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderMessagePrompt",Ext.Container,{config:{modal:{zIndex:999999998},centered:true,width:300,style:"background-color:white;border:1px solid black;border-radius:5px;padding:5px;",fullscreen:true,zIndex:999999999},initiage)},setuage}},setupP00)}}},0,["readerMessagePrompt"],["component","container","readerMessagePrompt"],{component:true,container:true,readerMessagePrompt:true},["widget.readerMessagePrompt"],0,[InfinityMobile.view,"ReaderMessagePrompt"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderPageNumber",Ext.Container,{config:{width:200,height:60,modal:true,hideOnMaskTap:true,padding:5,layout:"hbox",style:"background-color:black; border: 1px solid white",items:[{itemId:"pageNumberTextContainer",flex:1,height:48,style:"background-color:white",html:"<input type='number' style='border:none; width: 100%; height:100%; font-size: 32px; padding:5px;' />"},{width:5},{itemId:"pageNumberGo",width:48,height:48,padding:"10px 0",style:"border: 1px solid white; font-size: 24px; color:white; text-align:center; cursor: pointer",html:"GO"}]},initialize:function(){var a=this;a.loaded=false;a.fireEvent("hideArticlesContainer");a.pageNumberTextContainer=a.getComponent("pageNumberTextContainer");a.pageNumberTextBox=a.pageNumberTextContainer.element.down("input").dom;a.pageNumberTextBox.addEventListener("touchsus()});a.initialiseFriendlyTextBox();a.pageNumberGoButton=a.getComponent("pageNumberGo");a.pageNumberGoButton.setHtml(language.go.toUpperCase());a.setGoListener();a.element.on({painted:function(){this.loaded=true},scope:a})},initialiseTer()}},initialiseFriendlyTeer()},setOnChangeListener:function(){var a=this;$(a.pageNumberTextBox).keyup(function(b){if(b.keyCode==13){a.fireEvent("jumpToPage",a)}})},setGoListener:function(){var a=this;a.pageNumberGoButton.element.on("tap",function(){a.fireEvent("jumpToPage",a)})}ts)}}},0,["readerpagenumber"],["component","container","readerpagenumber"],{component:true,container:true,readerpagenumber:true},["widget.readerpagenumber"],0,[InfinityMobile.view,"ReaderPageNumber"],0));Ext.application({name:"InfinityMobile",profiles:["phone","largetablet","tablet","desktop"],models:["MyModel"],stores:["EditionFlatplan","LatestEditionFlatplan","ArchiveStore","SettingStore","SearchStore","SearchHighlightStore","MediaStore","ArticleStore","LanguageStore","PuzzleArchiveStore"],views:["ReaderMenuSponsor","CustomCheckbox","ReaderView","ReaderSpecialSupplementsItem","ReadAloudControls","StoryWindowPreferences","ReaderPuzzleArchive","ReaderSectionPopupItem","ReaderSectionPopup","ReaderEdgeBrowserPopup","ReaderZoomSlider","BackgroundWrapAdItem","ReaderPagesItem","PrintPreview","ClippingLoad","ClippingOptionsMenu","ReaderTicker","ReaderAudioMediaObject","ArticleSectionItemImg","ArticleSectionItem","ArticlesSectionContainer","ArticlesContainer","ClippingOptions","clippingPrompt","ClippingBox","ReaderLiveAdvertObject","LeftSideAdvertCover","ReaderLiveArticlePopoverItem","ArticleReader","NavButton","ClippingMenuEmailPrompt","ClippingMenuPreview","ClippingMenuPrompt","ClippingMenuDeletePrompt","ClippingMenuThumb","StickyNote","PrintMenu","ReaderAudioObject","LayoutZoomSlider","ClippingMenuImageScroller","ClippingMenu","ReaderLanguagePopup","ReaderOLinkObject","ReaderOVideo","ReaderOGallery","ReaderOGalleryItem","ReaderOGalleryLoading","ReaderOVideoObject","ReaderOGalleryObject","ReaderVideoLinkObject","ReaderLightbox","ReaderImageLinkObject","Note","Main","Reader","ReaderToolbar","ReaderToolbarBottom","ReaderPages","Blocker","ReaderMenuItem","ReaderMenuClose","ReaderMenuSection","ReaderMenuSectionItem","2DInfiniteCarousel","InfiniteCarousel","ReaderPageViewer","ReaderPageViewerPDF","LayoutView","LayoutViewController","LayoutTextView","ReaderSearchItem","ReaderArchiveItem","ReaderMediaObject","ReaderAnimationObject","ReaderLinkObject","ReaderArticleObject","ArticleCarousel","ReaderArticlePopoverItem","ReaderVideoObject","ReaderVideoObjectControls","Overlay","ReaderImageObject","PageRestriction","FullscreenPrompt","ReaderArchiveMonthItem","PDFInfiniteCarousel","ArticleReaderTopBarBtn","BookmarkItem","ReaderMenuShare","ReaderMenuShareItem","ReaderMenuTTS","ClippingArea","ReaderImageGallery","ReaderImageGalleryItem","ReaderPuzzleArchiveItem","ReaderArchivePageButton","ReaderArticleHelper","LightboxLink","ClippingItems","ReaderPrintItem","ReaderDownloadItem","ReaderImageGalleryAdvert","AdvertPageViewer","ReaderMessagePrompt","ReaderPageNumber"],controllers:["AppController","LayoutController","ReaderController","ReaderToolbarController","ReaderMenuController","ReaderSearchController","ReaderDownloadController","SubscribeController","MediaController","DataCaptureController","PrintController","ClippingController","ArticleController","PdfController","PageTurnController","PushController","BookmarkController","TrackingController"]});(Ext.cmd.derive("InfinityMobile.view.ArticleReaderLiveNewsBtn",Ext.Container,{config:{cls:"sectionBtn"},initialize:function(){var a=this;Ext.Container.prototype.initialize.apply(this,arguments);if(a.config.section!=null){a.section=a.config.section}a.setHtml('<img class="sectionBtn" style="height:30px;" src="../assets/dynamicarticles/live-news-icon.gif"/><span style="margin:0px 5px;white-space:nowrap;position:relative;top:-3px;font-family:Open Sans, sans-serif;font-size:14px;font-weight:bold;color:#929292;">'+language.dynamicArticles.liveNews+"</span>");a.element.on({tap:function(){a.fireEvent("liveNewsTiles",a)},painted:function(){var b=$(a.element.down("span").dom).width()+40;a.setWidth(b)}})}},0,["articlereaderlivenewsbtn"],["component","container","articlereaderlivenewsbtn"],{component:true,container:true,articlereaderlivenewsbtn:true},["widget.articlereaderlivenewsbtn"],0,[InfinityMobile.view,"ArticleReaderLiveNewsBtn"],0));(Ext.cmd.derive("InfinityMobile.view.ArticleReaderSectionBtn",Ext.Container,{config:{style:"padding-left:10px;padding-right:10px;",cls:"sectionBtn"},initi)}})}},0,["articlereadersectionbtn"],["component","container","articlereadersectionbtn"],{component:true,container:true,articlereadersectionbtn:true},["widget.articlereadersectionbtn"],0,[InfinityMobile.view,"ArticleReaderSectionBtn"],0));(Ext.cmd.derive("InfinityMobile.view.ArticleReaderToggleViewOptions",Ext.Container,{config:{top:40,modal:true,hideOnMaskTap:true,zIndex:12,items:[{itemId:"paperViewBtn",top:40,height:40,width:200,layout:"hbox",style:"background-color:#d2d2d2;cursor:pointer;",items:[{height:25,top:8,width:60,style:"background-image:url('../assets/dynamicarticles/replica-paper-ic-grey@2x.png');background-position:50% 50%;background-repeat:no-repeat;background-size:contain;"},{itemId:"text",height:25,top:12.5,left:60}]},{itemId:"dynamicViewBtn",top:80,height:40,width:200,layout:"hbox",style:"background-color:#d2d2d2;cursor:pointer;",items:[{height:25,top:8,width:60,style:"background-image:url('../assets/dynamicarticles/dynamic-mode-ic-grey@2x.png');background-position:50% 50%;background-repeat:no-repeat;background-size:contain;"},{itemId:"text",height:25,top:12.5,left:60}]}]},initial")}},0,["articlereadertoggleviewoptions"],["component","container","articlereadertoggleviewoptions"],{component:true,container:true,articlereadertoggleviewoptions:true},["widget.articlereadertoggleviewoptions"],0,[InfinityMobile.view,"ArticleReaderToggleViewOptions"],0));(Ext.cmd.derive("InfinityMobile.view.DataCaptureForm",Ext.Container,{config:{height:"80%",width:600,fullscreen:true,modal:true,centered:true,style:"background-color:white;border-radius:5px;",layout:{type:"vbox",packed:"middle"},items:[{itemId:"brandingLogo",height:120,width:"calc(100% - 10px)",margin:"20 10 20 10"},{itemId:"welcomeMsg",padding:"20 60 20 60",style:"text-align:center;"},{itemId:"form",padding:"20 40 20 40",defaults:{margin:"10 0 10 0"},items:[{itemId:"firstname",width:"100%",height:50,html:'<input type="text" style="height:40px;width:100%;" placeholder="First Name"/>'},{itemId:"surname",width:"100%",height:50,html:'<input type="text" style="height:40px;width:100%;" placeholder="Last Name"/>'},{itemId:"email",width:"100%",height:50,html:'<input type="text" style="height:40px;width:100%;" placeholder="Email Address*"/>'},{itemId:"houseNo",width:"100%",height:50,html:'<input type="text" style="height:40px;width:100%;" placeholder="House No/Name"/>'},{itemId:"address",width:"100%",height:50,html:'<input type="text" style="height:40px;width:100%;" placeholder="Address"/>'},{itemId:"postcode",width:"100%",height:50,html:'<input type="text" style="height:40px;width:100%;" placeholder="Postcode"/>'},{itemId:"telephone",width:"100%",height:50,html:'<input type="text" style="height:40px;width:100%;" placeholder="Telephone No"/>'},{itemId:"required",html:"* Required Field",style:"font-size:12px;"},{itemId:"termsCheckbox",html:"<input type='checkbox' style:'height:10px;'/><label style='padding-left:5px;font-size:14px;'></label><a style='padding-left:5px;font-size:14px;'></a>"},{itemId:"updatedCheckbox",html:"<input type='checkbox' style:'height:10px;'/><label style='padding-left:5px;font-size:14px;'>Keep me updated on the latest news</label>"},{itemId:"errorMsg",hidden:true,html:"*Please make sure the required fields above are completed.",style:"color:red;"}]},{itemId:"buttonContainer",width:"calc(100%-10px)",height:180,layout:{type:"vbox",pack:"middle"},padding:"10 40 10 40",defaults:{margin:"10 0 10 0"},items:[{itemId:"registerBtn",cls:"pointerCursor",height:60,width:"calc(100%-10px)",style:"text-align:center;vertical-align: middle;line-height:60px;",html:"<p>Register</p>"},{itemId:"skipBtn",cls:"pointerCursor",height:60,width:"100%",style:"text-align:center;color:rgb(155, 155, 155);background-color:rgb(229, 229, 229);vertical-align:middle;line-height:60px;",html:"Skip"}]}]},initialize:function(){var a=this;if(a.config.logo!=null){a.logo=a.config.logo}if(a.config.welcomeText!=null){a.welcomeText=a.config.welcomeText}if(a.config.settings!=null){a.settings=a.config.settings}a.brandingLogo=a.getComponent("brandingLogo");a.welcomeTextArea=a.getComponent("welcomeMsg");a.form=a.getComponent("form");a.buttonContainer=a.getComponent("buttonContainer");a.registerBtn=a.buttonContainer.getComponent("registerBtn");a.skipBtn=a.buttonContainer.getComponent("skipBtn");a.errorMsg=a.form.getComponent("errorMsg");a.termsCheck=a.form.getComponent("termsCheckbox");if(Ext.os.is.Desktop){a.element.dom.style.overflowY="scroll";if(Ext.browser.is.IE){a.brandingLogo.element.dom.style.minHeight="120px";a.registerBtn.element.dom.style.minHeight="60px";a.skipBtn.element.dom.style.minHeight="60px"}}else{a.setScrollable({direction:"vertical"})}a.brandingLogo.setStyle({backgroundImage:"url("+a.logo+")",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"});a.welcomeTextArea.setHtml(language.dataCapture.containerText);a.setupFormFields();if(!Ext.os.is.Desktop){a.setupTouchDevices()}a.registerBtn.element.on({tap:a.register,scope:a});a.registerBtn.setStyle({color:"#"+settings.reader.buttonTextColour,backgroundColor:"rgba("+hexToRgb(settings.reader.buttonColour)+",0.9)"});a.skipBtn.element.onoy()},scope:a})},setupTouchDevices:function(){var a=this;var b=function(){this.focus()};a.firstname.element.on({tap:b});a.surname.element.on({tap:b});a.email.element.on({tap:b});a.houseNo.element.on({tap:b});a.address.element.on({tap:b});a.postcode.element.on({tap:b});a.telephone.element.on({tap:b});a.updatedCheckbox.element.on({tap:b});a.termsCheck.element.on({tap:b})},setupFormFields:function(){var a=this;a.firstname=a.form.getComponent("firstname");a.surname=a.form.getComponent("surname");a.email=a.form.getComponent("email");a.houseNo=a.form.getComponent("houseNo");a.address=a.form.getComponent("address");a.postcode=a.form.getComponent("postcode");a.telephone=a.form.getComponent("telephone");a.updatedCheckbox=a.form.getComponent("updatedCheckbox");a.hasTerms=false;$(a.email.element.down("input").dom).attr("placeholder",language.dataCapture.email+"*");a.requiredText=a.form.getComponent("required");a.requiredText.setHtml(language.dataCapture.required);if(a.settings.firstname!=null){if(a.settings.firstname.hasFirstname!=null){if(a.settings.firstname.required=="true"){$(a.firstname.element.down("input").dom).attr("placeholder",language.dataCapture.firstName+"*");a.firstname.required=true}else{a.firstname.required=false;$(a.firstname.element.down("input").dom).attr("placeholder",language.dataCapture.firstName)}}else{a.firstname.hide()}}else{a.firstname.hide()}if(a.settings.surname!=null){if(a.settings.surname.hasSurname!=null){if(a.settings.surname.required=="true"){$(a.surname.element.down("input").dom).attr("placeholder",language.dataCapture.lastName+"*");a.surname.required=true}else{$(a.surname.element.down("input").dom).attr("placeholder",language.dataCapture.lastName);a.surname.required=false}}else{a.surname.hide()}}else{a.surname.hide()}if(a.settings.houseNo!=null){if(a.settings.houseNo.hasHouseNo!=null){if(a.settings.houseNo.required=="true"){$(a.houseNo.element.down("input").dom).attr("placeholder",language.dataCapture.houseNo+"*");a.houseNo.required=true}else{$(a.houseNo.element.down("input").dom).attr("placeholder",language.dataCapture.houseNo);a.houseNo.required=false}}else{a.houseNo.hide()}}else{a.houseNo.hide()}if(a.settings.address!=null){if(a.settings.address.hasAddress!=null){if(a.settings.address.required=="true"){$(a.address.element.down("input").dom).attr("placeholder",language.dataCapture.address+"*");a.address.required=true}else{$(a.address.element.down("input").dom).attr("placeholder",language.dataCapture.address);a.address.required=false}}else{a.address.hide()}}else{a.address.hide()}if(a.settings.postcode!=null){if(a.settings.postcode.hasPostcode!=null){if(a.settings.postcode.required=="true"){$(a.postcode.element.down("input").dom).attr("placeholder",language.dataCapture.postCode+"*");a.postcode.required=true}else{$(a.postcode.element.down("input").dom).attr("placeholder",language.dataCapture.postCode);a.postcode.required=false}}else{a.postcode.hide()}}else{a.postcode.hide()}if(a.settings.telephone!=null){if(a.settings.telephone.hasTelephone!=null){if(a.settings.telephone.required=="true"){$(a.telephone.element.down("input").dom).attr("placeholder",language.dataCapture.telephone+"*");a.telephone.required=true}else{$(a.telephone.element.down("input").dom).attr("placeholder",language.dataCapture.telephone);a.telephone.required=false}}else{a.telephone.hide()}}else{a.telephone.hide()}if(a.settings.hasOptIn=="true"){a.updatedCheckbox.element.down("label").dom.innerHTML=language.dataCapture.optIn}else{a.updatedCheckbox.hide()}if(a.settings.terms!=null){a.hasTerms=true;if(a.settings.terms.termsUrl!=null){a.termsCheck.element.down("a").dom.href=a.settings.terms.termsUrl;a.termsCheck.element.down("a").dom.innerHTML=language.dataCapture.terms}else{a.termsCheck.element.down("label").dom.innerHTML=language.dataCapture.terms}}else{a.termsCheck.hide()}a.registerBtn.setHtml(language.register);if(a.settings.showSkip!="true"){a.skipBtn.hide()}else{a.skipBtn.setHtml(language.skip)}},register:function(){var t=this;var d=false;var l={};var q=null;var k=null;var p=null;var h=null;var e=null;var u=null;var s=null;var f=t.firstname.element.down("input").dom;var n=t.surname.element.down("input").dom;var r=t.email.element.down("input").dom;var c=t.houseNo.element.down("input").dom;var a=t.address.element.down("input").dom;var b=t.postcode.element.down("input").dom;var m=t.telephone.element.down("input").dom;var o=t.updatedCheckbox.element.down("input");var j=t.termsCheck.element.down("input");if(t.firstname.required){if(f.value.length==0){f.style.border="1px solid red";d=true}else{l.firstname=f.value;f.style.border=""}}else{if(f.value.length>0){l.firstname=f.value}}if(t.surname.required){if(n.value.length==0){n.style.border="1px solid red";d=true}else{l.surname=n.value;n.style.border=""}}else{if(n.value.length>0){l.surname=n.value}}if(t.validateEmail(r.value)){if(r.value.length==0){r.style.border="1px solid red";d=true}else{l.email=r.value;r.style.border=""}}else{r.style.border="1px solid red";d=true}if(t.houseNo.required){if(c.value.length==0){c.style.border="1px solid red";d=true}else{l.houseNo=c.value;c.style.border=""}}else{if(c.value.length>0){l.houseNo=c.value}}if(t.address.required){if(a.value.length==0){a.style.border="1px solid red";d=true}else{l.address=a.value;a.style.border=""}}else{if(a.value.length>0){l.houseNo=a.value}}if(t.postcode.required){if(b.value.length==0){b.style.border="1px solid red";d=true}else{l.postcode=b.value;b.style.border=""}}else{if(b.value.length>0){l.postcode=b.value}}if(t.telephone.required){if(m.value.length==0){m.style.border="1px solid red";d=true}else{l.telephone=m.value;m.style.border=""}}else{if(m.value.length>0){l.postcode=m.value}}if(!t.updatedCheckbox.isHidden()){if(o.is(":checked")){l.keepMeUpdated="true"}}var g=true;if(!t.termsCheck.isHidden()){console.log(j);if(j.dom.checked){g=true}else{g=false}}console.log(d,g);if(d||!g){t.errorMsg.show()}else{t.fireEvent("sendData",t,l);t.destroy()}},validateEmail:function(a){var b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}},0,["datacaptureform"],["component","container","datacaptureform"],{component:true,container:true,datacaptureform:true},["widget.datacaptureform"],0,[InfinityMobile.view,"DataCaptureForm"],0));(Ext.cmd.derive("InfinityMobile.view.FullscreenImageGalleryItem",Ext.Container,{config:{pageNo:"",page:"",style:"color:white",cls:"innerhtmlfullheight"},initialize:function(){var a=this;a.on("painted",a.setImage,a,{delay:10,single:true})},setv>")}},0,["imagegalleryitem"],["component","container","imagegalleryitem"],{component:true,container:true,imagegalleryitem:true},["widget.imagegalleryitem"],0,[InfinityMobile.view,"FullscreenImageGalleryItem"],0));(Ext.cmd.derive("InfinityMobile.view.ImageCarousel",Ext.Carousel,{initi)}})},config:{indicator:false,data:false,pageNumber:0,skipActiveItemChange:true,pageTemplate:false,visiblePages:3,directionLock:true,landscapePageIncrement:1,mode:"single"},setPageTemte=a},setCards:function(){var j=this;j._skipActiveItemChange=true;var k=1;if(j._pageNumber==0){for(var e=0;e<j._visiblePages;e++){var b=(e*k);j.add(j.createCard(j.getData()[b],b,j.getData()))}j.setActiveItem(0)}else{if(j._pageNumber==(j.getData().length-1)){for(var e=(j._pageNumber-2);e<j.getData().length;e++){j.add(j.createCard(j.getData()[e],e,j.getData()))}j.setActiveItem(2)}else{var f=j._pageNumber;var a=j.createCard(j.getData()[f],f,j.getData());j.add(a);var c=parseFloat(j._pageNumber-(1*k));var d=j.createCard(j.getData()[c],c,j.getData());j.insert(0,d);var h=parseFloat(j._pageNumber)+(1*k);var g=j.createCard(j.getData()[h],h,j.getData());j.add(g);j.setActiveItem(1)}}j._skipActiveItemChange=false},handleItemCc,d)},updateItem")},creatrn d},addCardTo()))},addCardT)))}},jumpToFirst:function(){this.jumpToPage(0)},jumpT-1))},jumpT)}}}}},0,["imagecarousel"],["component","container","carousel","imagecarousel"],{component:true,container:true,carousel:true,imagecarousel:true},["widget.imagecarousel"],0,[InfinityMobile.view,"ImageCarousel"],0));(Ext.cmd.derive("InfinityMobile.view.LayoutAdvertView",InfinityMobile.view.LayoutView,{config:{advertState:false,style:"text:align:center"},initi:a})},initializAd()},loadock"},toge())}},0,["layoutadvertview"],["component","container","layoutview","layoutadvertview"],{component:true,container:true,layoutview:true,layoutadvertview:true},["widget.layoutadvertview"],0,[InfinityMobile.view,"LayoutAdvertView"],0));(Ext.cmd.derive("InfinityMobile.view.LayoutTextFieldView",InfinityMobile.view.LayoutView,{config:{html:"<input style='width:100%; height:100%; border:none; background-color:rgba(0,0,0,0); color:red; padding:5px' placeholder='Searching' />"},initits()},layoutViewStyleOrientrn g},checkE)})}},fireCustomull)}},0,["layouttextfieldview"],["component","container","layoutview","layouttextfieldview"],{component:true,container:true,layoutview:true,layouttextfieldview:true},["widget.layouttextfieldview"],0,[InfinityMobile.view,"LayoutTextFieldView"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderDownloadScreen",Ext.Container,{config:{fullscreen:true,style:"padding:0px; border-radius:0px;background-color:white;color: #4591B8; font-size:15px",layout:"vbox",pagesXml:"",items:[{itemId:"topBar",height:40,style:"background-color:#e6e6e6;",layout:"hbox",items:[{itemId:"backButton",height:"100%",width:"75px",padding:"10 10 10 5",layout:{type:"hbox",align:"center"},items:[{html:"<img src='../assets/download/back-arrow.png' style='height:20px' />",height:20},{width:5},{html:"Back"}]}]},{itemId:"content",flex:1,cls:"innerhtmlfullheight"}]},initialize:function(){var a=this;a.topBar=a.getComponent("topBar");a.backButton=a.topBar.getComponent("backButton");a.content=a.getComponent("content");a.pagesXml=a.getPagesXml();a.setBackListener();if(a.config.downloadUrl!=null){a.downloadUrl=a.config.downloadUrl;a.loadFrame()}},setBackListener:function(){var a=this;a.backButton.element.on("tap",function(){a.fireEvent("back",a)})},load/>")}},0,["downloadscreen"],["component","container","downloadscreen"],{component:true,container:true,downloadscreen:true},["widget.downloadscreen"],0,[InfinityMobile.view,"ReaderDownloadScreen"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderImageGalleryThumb",Ext.Container,{config:{width:140,margin:5},initi:a})}},0,["readerimagegallerythumb"],["component","container","readerimagegallerythumb"],{component:true,container:true,readerimagegallerythumb:true},["widget.readerimagegallerythumb"],0,[InfinityMobile.view,"ReaderImageGalleryThumb"],0));(Ext.cmd.derive("InfinityMobile.view.ReaderPrompt",Ext.Container,{config:{modal:true,centered:true,width:"300px",style:"background-color:white;border:1px solid black;border-radius:5px;padding:0px;",fullscreen:true,items:[{id:"promptToolBar",height:40,padding:8,items:[{top:10,left:10}]},{id:"promptBodyContainer",padding:"10 20",layout:"vbox",flex:1,items:[{itemId:"promptContainerText",margin:"0 0 20px 0"},{itemId:"buttonArea",padding:"0 20px",layout:"hbox",items:[{itemId:"okBtn",cls:"pointerCursor",flex:1,padding:8,style:"text-align:center;margin: 5px;border-style:solid;background-color:#458FBB;width:120px;color:white;"}]}]}]},initits()},handleKenull},checkVage}},setMetle)},setupE:a})}},0,["readerprompt"],["component","container","readerprompt"],{component:true,container:true,readerprompt:true},["widget.readerprompt"],0,[InfinityMobile.view,"ReaderPrompt"],0));(Ext.cmd.derive("InfinityMobile.view.Ticker",Ext.Container,{config:{padding:"5px",zIndex:"1000000"},initialize:function(){var b=this;var a=b.config.url;b.str="";$.ajax({url:document.location.protocol+"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q="+encodeURIComponent(a),dataType:"json",async:true,success:function(c){if(c.responseData.feed&&c.responseData.feed.entries){$.each(c.responseData.feed.enp  "})}b.str=b.str.substring(0,b.str.length-18);b.setHtml('<p class="marquee" style="color:white;">'+b.str+"</p>");b.element.dom.style.backgroundColor="#1e1e1e";b.element.dom.style.color="white";b.element.dom.style.overflow="hidden";try{document.styleSheets[0].insertRule("@keyframes marquee {0% { text-indent:100% ;} 100% {text-indent:"+(b.element.dom.children[0].scrollWidth*-1)+"px}}",0);if(window.navigator.appName=="Netscape"||window.navigator.appName=="Microsoft Internet Explorer"){b.element.dom.style.animation="marquee 50s linear infinite;"}}catch(d){console.log(d)}}})}},0,["ticker"],["component","container","ticker"],{component:true,container:true,ticker:true},["widget.ticker"],0,[InfinityMobile.view,"Ticker"],0));(Ext.cmd.derive("InfinityMobile.view.clippingError",Ext.Container,{config:{modal:true,centered:true,width:"300px",style:"background-color:white;border:1px solid black;border-radius:5px;padding:0px;",fullscreen:true,zIndex:1000000,items:[{id:"clippingPromptToolBar",height:40,items:[{top:10,left:10}]},{id:"clippingPromptBodyContainer",padding:"20",layout:"vbox",flex:1,items:[{itemId:"clippingPromptContainerText",margin:"0 0 20px 0"},{itemId:"buttonArea",padding:"20",layout:"hbox",items:[{itemId:"okBtn",cls:"pointerCursor",flex:1,style:"text-align:center;margin: 5px;border-style:solid;height:30px;background-color:#458FBB;width:120px;color:white;"}]}]}]},initinull},oy()}},0,["clippingerror"],["component","container","clippingerror"],{component:true,container:true,clippingerror:true},["widget.clippingerror"],0,[InfinityMobile.view,"clippingError"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ArticleReaderPanelContainer",Ext.Container,{config:{cls:"articlereaderpanelcontainer",layout:{type:"hbox"},margin:"50 5 5 5",style:"display:inline;width:1540px;"},initix;")},onR;")}}},0,["articlereaderpanelcontainer"],["component","container","articlereaderpanelcontainer"],{component:true,container:true,articlereaderpanelcontainer:true},["widget.articlereaderpanelcontainer"],0,[InfinityMobile.view.desktop,"ArticleReaderPanelContainer"],0));(Ext.cmd.derive("InfinityMobile.view.desktop.ReaderLiveArticlePopoverItem",Ext.Container,{config:{mediaObject:"",pageNo:"",page:"",cls:"loading",style:"background-color:white",layout:"vbox",items:[{itemId:"content",flex:1,padding:"0 0 10px 0"}]},initialize:function(){var a=this;a.content=a.getComponent("content");a.setContentStyle();a.on("painted",a.getContent,a,{delay:10,single:true});a.element.down(".x-container").dom.style.overflow="hidden";a.element.down(".x-container").dom.style.overflowY="scroll"},setContentStyle:function(){var a=this;if(currentProfile=="tablet"){a.content.setPadding("0 20px 0 20px")}},getContent:function(){var j=this;var e=Ext.getStore("SettingStore");if(e.data.items[0].raw.reader.popupAdvert!=null){var f=e.data.items[0].raw.reader.popupAdvert.position;if(f=="top"){switch(currentProfile){case"phone":var g=Ext.create("InfinityMobile.view.phone.ArticlePopoverAd",{});break;case"tablet":var g=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{});break;case"desktop":var g=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{});break}j.add(g);g.show()}}var k="";if(j.getPage().headdeck!=null){k="<div class='contentDeck font25'></div><br />"}var b="";if(j.getPage().images!=null){b="<div class='contentImages' >";for(var d=0;d<j.getPage().images.length;d++){b+="<div class='contentImage'><img src='"+j.getPage().images[d].url+"' /></div>"}b+="</div><br />"}var h="<div class='contentHead font35' >"+j.getPage().headline+"</div><br />"+k+b+"<div class='contentByline font15'>"+j.getPage().byline+"</div><br /><div class='contentBody font15'>"+j.getPage().content+"</div><br />";var a=h.match(/<body[^>]*>([^<]*(?:(?!<\/?body)<[^<]*)*)<\/body\s*>/i);if(a){h=a[1]}h+="<script>setText()<\/script>";console.log(j.getPage());if(j.getPage().link!=null){h+="<br /><br /><p class='fullStoryLink' ontouchstart='window.open(\""+j.getPage().link+"\")' onclick='window.open(\""+j.getPage().link+"\")'>Click here to view full story</p>"}j.removeSpinner();j.content.setHtml(h);j.setImages();if(j.content.element!=null){setText(j.content.element.dom)}j.setStyle({visibility:"inherit"});if(e.data.items[0].raw.reader.popupAdvert!=null){if(f=="bottom"){switch(currentProfile){case"phone":var c=Ext.create("InfinityMobile.view.phone.ArticlePopoverAd",{});break;case"tablet":var c=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{});break;case"desktop":var c=Ext.create("InfinityMobile.view.tablet.ArticlePopoverAd",{padding:"10px 0 0 0"});break}j.add(c);c.show()}}},removeSpinner:function(){var a=this;a.removeCls("loading")},setImages:function(){var f=this;var d=1;var c=1;var b=f.id;if(currentProfile=="tablet"){var e=$("#"+b+" img").get(0);if(e!=null){if(e.naturalWidth==0){e.onload=function(){var g=this;if(g.naturalWidth<(screen.width/2)){var h=$("#"+b+" .articleContent")[0];h.className="articleContent float"}}}}}if($("#"+b+" .contentImage").size()>1){if(currentProfile=="phone"){$("#"+b+" .nextImage")[0].childNodes[0].textContent="NEXT";$("#"+b+" .previousImage")[0].childNodes[0].textContent="PREVIOUS"}c=$("#"+b+" .contentImage").size();if(c>1){$("#"+b+" .contentImage:gt(0)").hide();$("#"+b+" .previousImage").hide();a()}else{if(c==1){$("#"+b+" .imageControls").hide()}}$("#"+b+" .nextImage").click(function(){var h=$("#"+b+" .contentImage:visible");var g=$("#"+b+" .contentImage:visible").next();h.hide();d++;a();g.fadeIn();$("#"+b+" .previousImage").show();if(g.is("#"+b+" .contentImage:last")){$("#"+b+" .nextImage").hide()}});$("#"+b+" .previousImage").click(function(){var h=$("#"+b+" .contentImage:visible");var g=$("#"+b+" .contentImage:visible").prev();h.hide();d--;a();g.fadeIn();$("#"+b+" .nextImage").show();if(g.is("#"+b+" .contentImage:first")){$("#"+b+" .previousImage").hide()}})}else{$("#"+b+" .imageControls").hide()}function a(){var g="Image "+d.toString()+" of "+c.toString();$("#"+b+" .imageCount").text(g)}}},0,["readerlivearticlepopoveritem"],["component","container","readerlivearticlepopoveritem"],{component:true,container:true,readerlivearticlepopoveritem:true},["widget.readerlivearticlepopoveritem"],0,[InfinityMobile.view.desktop,"ReaderLiveArticlePopoverItem"],0));