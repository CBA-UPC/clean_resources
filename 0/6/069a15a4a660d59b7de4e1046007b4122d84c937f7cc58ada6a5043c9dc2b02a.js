!{1:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Destinations=void 0;var i=e("./producers");t.Destinations={DEFAULT:{id:"596068",defaultProducer:i.Producers.BBC},ACCOUNT:{id:"598250",defaultProducer:i.Producers.ACCOUNT},ACCOUNT_TEST:{id:"598252",defaultProducer:i.Producers.ACCOUNT},AUDIENCE_PORTAL:{id:"602136",defaultProducer:i.Producers.AUDIENCE_SERVICES},AUDIENCE_PORTAL_TEST:{id:"602137",defaultProducer:i.Producers.AUDIENCE_SERVICES},AUDIENCE_SERVICES_PS:{id:"602167",defaultProducer:i.Producers.AUDIENCE_SERVICES},AUDIENCE_SERVICES_PS_TEST:{id:"602168",defaultProducer:i.Producers.AUDIENCE_SERVICES},BBC_ARCHIVE_PS:{id:"605565",defaultProducer:i.Producers.BBC_ARCHIVE},BBC_ARCHIVE_PS_TEST:{id:"605566",defaultProducer:i.Producers.BBC_ARCHIVE},BBC_CORPORATE_PS:{id:"603550",defaultProducer:i.Producers.BBC},BBC_CORPORATE_PS_TEST:{id:"603551",defaultProducer:i.Producers.BBC},BBC_OTHER_NONJS:{id:"598253",defaultProducer:i.Producers.BBC_OTHER_NONJS},BBC_OTHER_NONJS_TEST:{id:"598254",defaultProducer:i.Producers.BBC_OTHER_NONJS},BBC_STUDIOS_PLAYER:{id:"606296",defaultProducer:i.Producers.BBC_STUDIOS},BBC_STUDIOS_PLAYER_TEST:{id:"606293",defaultProducer:i.Producers.BBC_STUDIOS},BBC_SYNDICATION:{id:"601718",defaultProducer:i.Producers.BBC},BBC_SYNDICATION_TEST:{id:"601719",defaultProducer:i.Producers.BBC},BBC_THREE:{id:"598255",defaultProducer:i.Producers.BBC_THREE},BBC_THREE_TEST:{id:"598256",defaultProducer:i.Producers.BBC_THREE},BBCS_BBC:{id:"637014",defaultProducer:i.Producers.BBC_STUDIOS},BBCS_BBC_TEST:{id:"637015",defaultProducer:i.Producers.BBC_STUDIOS},BITESIZE:{id:"598257",defaultProducer:i.Producers.BITESIZE},BITESIZE_TEST:{id:"598258",defaultProducer:i.Producers.BITESIZE},BLOGS_PS:{id:"603546",defaultProducer:i.Producers.BBC},BLOGS_PS_TEST:{id:"603547",defaultProducer:i.Producers.BBC},BRITBOX:{id:"598259",defaultProducer:i.Producers.BRITBOX},BRITBOX_TEST:{id:"598260",defaultProducer:i.Producers.BRITBOX},CBBC:{id:"598261",defaultProducer:i.Producers.CBBC},CBBC_TEST:{id:"598262",defaultProducer:i.Producers.CBBC},CBEEBIES:{id:"598263",defaultProducer:i.Producers.CBEEBIES},CBEEBIES_TEST:{id:"598264",defaultProducer:i.Producers.CBEEBIES},FEATURE_SITES_GNL:{id:"598265",defaultProducer:i.Producers.GNL_HOMEPAGE},FEATURE_SITES_GNL_TEST:{id:"598266",defaultProducer:i.Producers.GNL_HOMEPAGE},FOOD:{id:"598267",defaultProducer:i.Producers.BBC_FOOD},FOOD_TEST:{id:"598268",defaultProducer:i.Producers.BBC_FOOD},GAMES_PS:{id:"599452",defaultProducer:i.Producers.BBC},GAMES_PS_TEST:{id:"599454",defaultProducer:i.Producers.BBC},GATEWAY:{id:"598269",defaultProducer:i.Producers.GATEWAY},GATEWAY_TEST:{id:"598270",defaultProducer:i.Producers.GATEWAY},HOMEPAGE_GNL:{id:"598271",defaultProducer:i.Producers.GNL_HOMEPAGE},HOMEPAGE_GNL_TEST:{id:"598272",defaultProducer:i.Producers.GNL_HOMEPAGE},HOMEPAGE_PS:{id:"598273",defaultProducer:i.Producers.PS_HOMEPAGE},HOMEPAGE_PS_TEST:{id:"598274",defaultProducer:i.Producers.PS_HOMEPAGE},IDEAS:{id:"598275",defaultProducer:i.Producers.BBC},IDEAS_TEST:{id:"598276",defaultProducer:i.Producers.BBC},IPLAYER:{id:"598277",defaultProducer:i.Producers.IPLAYER},IPLAYER_TEST:{id:"598278",defaultProducer:i.Producers.IPLAYER},MEDIA_ACTION:{id:"598279",defaultProducer:i.Producers.MEDIA_ACTION},MEDIA_ACTION_TEST:{id:"598280",defaultProducer:i.Producers.MEDIA_ACTION},MONITORING:{id:"598281",defaultProducer:i.Producers.MONITORING},MONITORING_TEST:{id:"598282",defaultProducer:i.Producers.MONITORING},MUSIC:{id:"598283",defaultProducer:i.Producers.BBC_MUSIC},MUSIC_TEST:{id:"598284",defaultProducer:i.Producers.BBC_MUSIC},NATIONAL_MOMENTS_PS:{id:"605567",defaultProducer:i.Producers.BBC},NATIONAL_MOMENTS_PS_TEST:{id:"605568",defaultProducer:i.Producers.BBC},NEWS_PS:{id:"598285",defaultProducer:i.Producers.NEWS},NEWS_PS_TEST:{id:"598286",defaultProducer:i.Producers.NEWS},NEWS_GNL:{id:"598287",defaultProducer:i.Producers.NEWS},NEWS_GNL_TEST:{id:"598288",defaultProducer:i.Producers.NEWS},NEWS_LANGUAGES_GNL:{id:"598289",defaultProducer:i.Producers.NEWS},NEWS_LANGUAGES_GNL_TEST:{id:"598290",defaultProducer:i.Producers.NEWS},NEWS_LANGUAGES_PS:{id:"598291",defaultProducer:i.Producers.NEWS},NEWS_LANGUAGES_PS_TEST:{id:"598292",defaultProducer:i.Producers.NEWS},NEWSROUND:{id:"598293",defaultProducer:i.Producers.NEWSROUND},NEWSROUND_TEST:{id:"598294",defaultProducer:i.Producers.NEWSROUND},OTHER:{id:"598295",defaultProducer:i.Producers.OTHER},OTHER_TEST:{id:"598297",defaultProducer:i.Producers.OTHER},OWN_IT:{id:"598298",defaultProducer:i.Producers.CBBC},OWN_IT_TEST:{id:"598299",defaultProducer:i.Producers.CBBC},PROGRAMMES_PS:{id:"598300",defaultProducer:i.Producers.PROGRAMMES},PROGRAMMES_PS_TEST:{id:"598301",defaultProducer:i.Producers.PROGRAMMES},PS_AUDIENCE_ENGAGEMENT:{id:"609581",defaultProducer:i.Producers.PARTICIPATION},PS_AUDIENCE_ENGAGEMENT_TEST:{id:"609582",defaultProducer:i.Producers.PARTICIPATION},RED_BUTTON_PS:{id:"601192",defaultProducer:i.Producers.BBC},RED_BUTTON_PS_TEST:{id:"601193",defaultProducer:i.Producers.BBC},REWIND_PS:{id:"603552",defaultProducer:i.Producers.BBC},REWIND_PS_TEST:{id:"603553",defaultProducer:i.Producers.BBC},R_AND_D_PS:{id:"607103",defaultProducer:i.Producers.RD},R_AND_D_PS_TEST:{id:"607104",defaultProducer:i.Producers.RD},SEARCH_GNL:{id:"598302",defaultProducer:i.Producers.SEARCH},SEARCH_GNL_TEST:{id:"598303",defaultProducer:i.Producers.SEARCH},SEARCH_PS:{id:"598304",defaultProducer:i.Producers.SEARCH},SEARCH_PS_TEST:{id:"598305",defaultProducer:i.Producers.SEARCH},SILVER_PS:{id:"607105",defaultProducer:i.Producers.BBC},SILVER_PS_TEST:{id:"607106",defaultProducer:i.Producers.BBC},SOUNDS:{id:"598306",defaultProducer:i.Producers.SOUNDS},SOUNDS_TEST:{id:"598307",defaultProducer:i.Producers.SOUNDS},SPORT_GNL:{id:"598308",defaultProducer:i.Producers.SPORT},SPORT_GNL_TEST:{id:"598309",defaultProducer:i.Producers.SPORT},SPORT_PS:{id:"598310",defaultProducer:i.Producers.SPORT},SPORT_PS_TEST:{id:"598311",defaultProducer:i.Producers.SPORT},STORYWORKS_GNL:{id:"598312",defaultProducer:i.Producers.GNL_STORYWORKS},STORYWORKS_GNL_TEST:{id:"598313",defaultProducer:i.Producers.GNL_STORYWORKS},SUBTITLES_PS:{id:"603548",defaultProducer:i.Producers.PROGRAMMES},SUBTITLES_PS_TEST:{id:"603549",defaultProducer:i.Producers.PROGRAMMES},SYNDICATION_PARTNERS_GNL:{id:"598314",defaultProducer:i.Producers.WS_PARTNERS_B2B},SYNDICATION_PARTNERS_GNL_TEST:{id:"598315",defaultProducer:i.Producers.WS_PARTNERS_B2B},TASTER:{id:"598316",defaultProducer:i.Producers.TASTER},TASTER_TEST:{id:"598317",defaultProducer:i.Producers.TASTER},TEACH:{id:"598318",defaultProducer:i.Producers.BBC},TEACH_TEST:{id:"598320",defaultProducer:i.Producers.BBC},TOPICS_GNL:{id:"612991",defaultProducer:i.Producers.BBC},TOPICS_GNL_TEST:{id:"614559",defaultProducer:i.Producers.BBC},TOPICS_PS:{id:"612261",defaultProducer:i.Producers.BBC},TOPICS_PS_TEST:{id:"612262",defaultProducer:i.Producers.BBC},VOICE:{id:"598326",defaultProducer:i.Producers.VOICE},VOICE_TEST:{id:"598328",defaultProducer:i.Producers.VOICE},WEATHER_GNL:{id:"598330",defaultProducer:i.Producers.WEATHER},WEATHER_GNL_TEST:{id:"598332",defaultProducer:i.Producers.WEATHER},WEATHER_PS:{id:"598338",defaultProducer:i.Producers.WEATHER},WEATHER_PS_TEST:{id:"598339",defaultProducer:i.Producers.WEATHER},WS_LEARNING_ENGLISH:{id:"598340",defaultProducer:i.Producers.WS_LEARNING_ENGLISH},WS_LEARNING_ENGLISH_TEST:{id:"598341",defaultProducer:i.Producers.WS_LEARNING_ENGLISH},WS_NEWS_LANGUAGES:{id:"598342",defaultProducer:i.Producers.BBC_WORLD_NEWS},WS_NEWS_LANGUAGES_TEST:{id:"598343",defaultProducer:i.Producers.BBC_WORLD_NEWS},WS_PARTNERS_B2B:{id:"598820",defaultProducer:i.Producers.WS_PARTNERS_B2B},WS_PARTNERS_B2B_TEST:{id:"598823",defaultProducer:i.Producers.WS_PARTNERS_B2B},WS_PROGRAMMES:{id:"598344",defaultProducer:i.Producers.PROGRAMMES},WS_PROGRAMMES_TEST:{id:"598345",defaultProducer:i.Producers.PROGRAMMES},WS_SYNDICATION_PARTNERS:{id:"598346",defaultProducer:i.Producers.WS_PARTNERS_B2B},WS_SYNDICATION_PARTNERS_TEST:{id:"598347",defaultProducer:i.Producers.WS_PARTNERS_B2B},get:function(e){var r;return e&&(r=this[e.toUpperCase()]),r}}},{"./producers":4}],2:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ATILabelKeys=void 0;t.ATILabelKeys={BBC_COUNTER_NAME:"name",LEVEL_1_SITE:"site",LEVEL_2_SITE:"level2",SECTION:"section",CHAPTER_1:"chapter1",CHAPTER_2:"chapter2",CHAPTER_3:"chapter3",CONTENT_ID:"bbc_content_id",APP_TYPE:"app_type",APP_NAME:"app_name",LANGUAGE:"language",URL:"bbc_url",REFERRER_URL:"bbc_referrer_url",CONTENT_TYPE:"bbc_content_type",NATIONS_PRODUCER:"nations_producer",LIBRARY_VERSION:"bbc_library_version",PAGE_TITLE:"page_title",CUSTOM_VAR_1:"custom_var_1",CUSTOM_VAR_2:"custom_var_2",CUSTOM_VAR_3:"custom_var_3",CUSTOM_VAR_4:"custom_var_4",CUSTOM_VAR_5:"custom_var_5",CUSTOM_VAR_6:"custom_var_6",CUSTOM_VAR_7:"custom_var_7",CUSTOM_VAR_8:"custom_var_8",CUSTOM_VAR_9:"custom_var_9",CUSTOM_VAR_10:"custom_var_10",SOURCE:"source",CONTAINER:"container",METADATA:"metadata",PERSONALISATION:"personalisation",RESULT:"result",COLLECT_DOMAIN:"collectDomain",COLLECT_DOMAIN_SSL:"collectDomainSSL"}},{}],3:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NationsProducers=void 0;t.NationsProducers={WALES:"wales",ENGLAND:"england",SCOTLAND:"scotland",NORTHERN_IRELAND:"northern_ireland",NONE:"",getName:function(e){var r;return e&&(r=this[e.toUpperCase()]),r}}},{}],4:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Producers=void 0;t.Producers={ACADEMY:125,ACCOUNT:1,AFAAN_OROMOO:2,AFRIQUE:3,AMHARIC:4,ARABIC:5,AZERI:6,BBC:7,BBC_ALBA:8,BBC_ARCHIVE:127,BBC_ARTS:9,BBC_ASIAN_NETWORK:10,BBC_FOOD:11,BBC_FOUR:12,BBC_HD:13,BBC_MUSIC:14,BBC_NEWS_CHANNEL:15,BBC_ONE:16,BBC_PARLIAMENT_CHANNEL:17,BBC_RADIO:18,BBC_RADIO_1:19,BBC_RADIO_1XTRA:20,BBC_RADIO_2:21,BBC_RADIO_3:22,BBC_RADIO_4:23,BBC_RADIO_4_EXTRA:24,BBC_RADIO_5_LIVE:25,BBC_RADIO_6_MUSIC:26,BBC_SCOTLAND:120,BBC_SEND:121,BBC_STUDIOS:128,BBC_OTHER_NONJS:27,BBC_THREE:28,BBC_TWO:29,BBC_WORLD_NEWS:30,BENGALI:31,BITESIZE:32,BRASIL:33,BRITBOX:34,BRITBOX_AU:132,BURMESE:35,CBBC:36,CBEEBIES:37,CHINESE:38,ENGLISH_REGIONS:39,GAHUZA:40,GATEWAY:41,GNL_AUTOS:42,GNL_CAPITAL:43,GNL_CULTURE:44,GNL_EARTH:45,GNL_FUTURE:46,GNL_HOMEPAGE:47,GNL_STORYWORKS:48,GNL_TRAVEL:49,GUJARATI:50,HAUSA:51,HINDI:52,IGBO:53,INDONESIAN:54,IPLAYER:55,JAPANESE:56,KOREAN:57,KYRGYZ:58,MARATHI:59,MEDIA_ACTION:60,MONITORING:61,MUNDO:62,NEPALI:63,NEWS:64,NEWS_LABS:129,NEWSROUND:65,NORTHERN_IRELAND:66,OTHER:67,OWN_IT:118,PARTICIPATION:130,PASHTO:68,PERSIAN:69,PIDGIN:70,PROGRAMMES:71,PS_HOMEPAGE:72,PUNJABI:73,RD:126,RECEPTION:124,REEL:74,RUSSIAN:75,S4C:76,SCHOOL_RADIO:77,SCHOOL_REPORT:78,SCOTLAND:79,SEARCH:80,SERBIAN:81,SINHALA:82,SOMALI:83,SOUNDS:84,SPORT:85,SWAHILI:86,TAMIL:87,TASTER:88,TEACH:119,TELUGU:89,THAI:90,TIGRINYA:91,TURKISH:92,TV_CERTIFICATION:131,UK_CHINA:93,UKRAINIAN:94,URDU:95,UZBEK:96,VIETNAMESE:97,VOICE:98,VOICE_FIRST_FORMATS:99,VOLT:122,WALES:100,WEATHER:101,WEATHER_WATCHERS:102,WEB_APPS:133,WORLD_SERVICE_ENGLISH:103,WORKLIFE:104,WS_LEARNING_ENGLISH:105,WS_PARTNERS_B2B:106,YORUBA:107,NEWS_ENGLISH_REGIONS:108,SPORT_ENGLISH_REGIONS:109,NEWS_SCOTLAND:110,SPORT_SCOTLAND:111,NEWS_WALES:112,SPORT_WALES:113,NEWS_NORTHERN_IRELAND:114,SPORT_NORTHERN_IRELAND:115,AUDIENCE_SERVICES:116,WORLD_NEWS_PROGRAMMES:117,getId:function(e){var r;return e&&(r=this[e.toUpperCase()]),r}}},{}],5:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomVariables=void 0;var i,o=e("./versions.json"),n=e("./util/label-cleanser"),a=e("./config/label-keys");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,r,t){var i;return(r="symbol"===s(i=function(e,r){if("object"!==s(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===r?String:Number)(e);var i=t.call(e,r||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(r,"string"))?i:String(i))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t.CustomVariables=(u(i={},a.ATILabelKeys.CONTENT_ID,1),u(i,a.ATILabelKeys.APP_TYPE,2),u(i,a.ATILabelKeys.APP_NAME,3),u(i,a.ATILabelKeys.LANGUAGE,4),u(i,a.ATILabelKeys.URL,5),u(i,a.ATILabelKeys.REFERRER_URL,6),u(i,a.ATILabelKeys.CONTENT_TYPE,7),u(i,a.ATILabelKeys.LIBRARY_VERSION,8),u(i,a.ATILabelKeys.PAGE_TITLE,9),u(i,a.ATILabelKeys.CUSTOM_VAR_1,11),u(i,a.ATILabelKeys.CUSTOM_VAR_2,12),u(i,a.ATILabelKeys.CUSTOM_VAR_3,13),u(i,a.ATILabelKeys.CUSTOM_VAR_4,14),u(i,a.ATILabelKeys.CUSTOM_VAR_5,15),u(i,a.ATILabelKeys.CUSTOM_VAR_6,16),u(i,a.ATILabelKeys.CUSTOM_VAR_7,17),u(i,a.ATILabelKeys.CUSTOM_VAR_8,18),u(i,a.ATILabelKeys.CUSTOM_VAR_9,19),u(i,a.ATILabelKeys.CUSTOM_VAR_10,20),u(i,"create",function(r,e,t){var i,o=this;return i=this._setCustomVariable(i,a.ATILabelKeys.APP_TYPE,"responsive"),i=this._setCustomVariable(i,a.ATILabelKeys.APP_NAME,this._getAppName(null,"bbc_website")),i=this._setCustomVariable(i,a.ATILabelKeys.LIBRARY_VERSION,this.getLibraryVersion()),e&&(i=this._setOrbitCustomVariables(i,e)),t&&(i=this._setDocumentCustomVariables(i,t)),r&&Object.keys(r).forEach(function(e){o._isCustomVariable(e)&&(i=o._setCustomVariable(i,e,r[e]),delete r[e])},this),i}),u(i,"_initialise",,u(i,"_getAppName",function(e,r){return e&&r?"".concat(e,"-").concat(r):r}),u(i,"getLibraryVersion",,u(i,"_isCustomVariable",function(e){return void 0!==this[e]&&this.hasOwnProperty(e)&&"function"!=typeof this[e]}),u(i,"_setCustomVariable",function(e,r,t){var i=this[r];if(i){if(null!=t){e||(e=this._initialise());var o=n.LabelCleanser.removeSensitiveInfo(t),a=n.LabelCleanser.cleanCustomVariable(o);a?e.site[i]="["+encodeURIComponent(a)+"]":delete e.site[i]}return e}}),u(i,"_setDocumentCustomVariables",function(e,r){return r&&(e=this._setCustomVariable(e,a.ATILabelKeys.URL,r.URL),e=this._setCustomVariable(e,a.ATILabelKeys.PAGE_TITLE,r.title)),e}),u(i,"_setOrbitCustomVariables",function(e,r){return r&&(e=this._setCustomVariable(e,a.ATILabelKeys.CONTENT_ID,r.contentId),e=this._setCustomVariable(e,a.ATILabelKeys.CONTENT_TYPE,r.contentType),e=this._setCustomVariable(e,a.ATILabelKeys.LANGUAGE,r.language),e=this._setCustomVariable(e,a.ATILabelKeys.REFERRER_URL,r.referrer),e=this._setProductCustomVariables(e,r.additionalProperties)),e}),u(i,"_setProductCustomVariables",function(e,r){return r&&(e=this._setCustomVariable(e,a.ATILabelKeys.APP_TYPE,r.app_type),e=this._setCustomVariable(e,a.ATILabelKeys.APP_NAME,this._getAppName(r.app_category,r.app_name)),r.content_language&&(e=this._setCustomVariable(e,a.ATILabelKeys.LANGUAGE,r.content_language)),r.referrer_url&&(e="none"===r.referrer_url?this._setCustomVariable(e,a.ATILabelKeys.REFERRER_URL,""):this._setCustomVariable(e,a.ATILabelKeys.REFERRER_URL,r.referrer_url)),e=this._setCustomVariable(e,a.ATILabelKeys.CUSTOM_VAR_1,r.custom_var_1),e=this._setCustomVariable(e,a.ATILabelKeys.CUSTOM_VAR_2,r.custom_var_2),e=this._setCustomVariable(e,a.ATILabelKeys.CUSTOM_VAR_3,r.custom_var_3),e=this._setCustomVariable(e,a.ATILabelKeys.CUSTOM_VAR_4,r.custom_var_4),e=this._setCustomVariable(e,a.ATILabelKeys.CUSTOM_VAR_5,r.custom_var_5),e=this._setCustomVariable(e,a.ATILabelKeys.CUSTOM_VAR_6,r.custom_var_6),e=this._setCustomVariable(e,a.ATILabelKeys.CUSTOM_VAR_7,r.custom_var_7),e=this._setCustomVariable(e,a.ATILabelKeys.CUSTOM_VAR_8,r.custom_var_8),e=this._setCustomVariable(e,a.ATILabelKeys.CUSTOM_VAR_9,r.custom_var_9),e=this._setCustomVariable(e,a.ATILabelKeys.CUSTOM_VAR_10,r.custom_var_10)),e}),i)},{"./config/label-keys":2,"./util/label-cleanser":11,"./versions.json":13}],6:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReverbClient=void 0;var _=e("./config/label-keys"),s=e("./util/label-cleanser"),u=e("./custom-variables"),i=e("./config/destinations"),o=e("./config/producers"),n=e("./config/nations-producers"),E=e("./user-action-event"),l=e("./util/debug"),c=e("./util/helpers"),d=e("./versions.json");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===P(a=function(e,r){if("object"!==P(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===r?String:Number)(e);var i=t.call(e,r||"default");if("object"!==P(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(o,"string"))?a:String(a)),i)}var o,a}var T="library_version",S="user_id",b="language",A="responsive",p="bbc_website";(t.ReverbClient=function(){function a(e){var r=e.staticLocation,t=e.smarttagVersion,i=e.getPageVariables,o=e.getUserVariables;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,a),this.staticLocation=r||"".concat(d.staticHost,"/reverb-client-js/"),this.smarttagVersion=t||d.smarttagVersion,this.counterName="",this.referrer="",this.tag,this.ready=!1,this.pageValues={},this.customParams={},this.echoDeviceId=null,this.bbcHid,this.signedIn=!1,this.atiInitPromise=null,this.echoDeviceIdCookie="ckns_echo_device_id",this.eventHistory=[],this.suppressView=!1,this.getUserVariables=o,this.getPageVariables=i,this.nationsProducer,this.pageSentPromise=this._resetPageSentPromise(),this.__resolvePageSent}var e,r,t;return e=a,(r=[{key:"_resetPageSentPromise",value:function(){var r=this;return new Promise(function(e){r.__resolvePageSent=e})}},{key:"_readCookie",value:function(e){var r=document.cookie.split(";");if(r)for(var t=0;t<r.length;t++){var i=r[t];if(0===(i=i.trim()).indexOf(e+"=")){var o=i.split("=");if(1<o.length)return encodeURIComponent(o[1])}}return null}},{key:"_setPageValues",value:function(){var n=this;return this.getPageVariables().then(function(e){if(n.pageValues={},e){n._setReferrer(e),n.setDestination(e.destination),e.producer&&n.setProducer(e.producer),n.setCounterName(e.name||n._generateCounterName()),n.addLabel(_.ATILabelKeys.BBC_COUNTER_NAME,n.getCounterName()),e.additionalProperties?(e.additionalProperties.app_type?"none"===e.additionalProperties.app_type?e.additionalProperties.app_type="":e.additionalProperties.app_type=e.additionalProperties.app_type:e.additionalProperties.app_type=A,e.additionalProperties.app_name?"none"===e.additionalProperties.app_name?e.additionalProperties.app_name="":e.additionalProperties.app_name=e.additionalProperties.app_name:e.additionalProperties.app_name=p):(e.additionalProperties={},e.additionalProperties.app_type=A,e.additionalProperties.app_name=p);var r=u.CustomVariables.create(void 0,e,document),t=n.pageValues,i={};if(e&&e[_.ATILabelKeys.SECTION]){var o=s.LabelCleanser.cleanCustomVariable(e[_.ATILabelKeys.SECTION]).split("::",3);t[_.ATILabelKeys.CHAPTER_1]=o[0],o[1]&&(t[_.ATILabelKeys.CHAPTER_2]=o[1]),o[2]&&(t[_.ATILabelKeys.CHAPTER_3]=o[2])}if(r&&n.tag.customVars.set(r),n.tag&&(n._setGlobalProps(e),n.tag.setProp(T,d.name+"-"+d.version,!0)),e.additionalProperties){var a=e.additionalProperties;n.appType=a.app_type,n.appName=a.app_name,n.tag&&(n._setCustomProperties(a),n._setGlobalProps(a),n.tag.setProp(_.ATILabelKeys.APP_NAME,u.CustomVariables._getAppName(a.app_category,a.app_name),!0)),!0!==a.suppressView&&"true"!==a.suppressView||(n.suppressView=!0),n._setDebug(a),e.additionalProperties.testDomain&&n._setDomains(e),e.additionalProperties.hasOwnProperty(_.ATILabelKeys.NATIONS_PRODUCER)&&n.setNationsProducer(e.additionalProperties.nations_producer),n._setTestParams(e)}0<Object.keys(i).length&&(t.customObject=i),n.tag.page.set(t)}})}},{key:"_setGlobalProps",value:function(e){var r={};for(var t in r[_.ATILabelKeys.APP_NAME]="app_name",r[_.ATILabelKeys.APP_TYPE]="app_type",r.contentType="content_type",r[_.ATILabelKeys.LIBRARY_VERSION]=T,r[_.ATILabelKeys.LANGUAGE]=b,r.content_language=b,e){var i=r[t];i&&this.tag.setProp(i,e[t],!0)}}},{key:"_setCustomProperties",value:function(i){var o=this,e=["custom_var_","content_language","referrer_url","suppressView","trace","testDomain","app_name","app_category","app_type","nations_producer"];Object.keys(i).filter(function(r){return!e.some(function(e){return!r||c.Helpers.startsWith(r,e)})}).forEach(function(e){if(e){var r=s.LabelCleanser.cleanCustomVariable(e),t=s.LabelCleanser.cleanCustomVariable(i[e]);Array.isArray(t)&&(r="a:s:"+r),o.tag.setProp(r,t,!1)}})}},{key:"_setTestParams",value:function(e){this.tag&&e.additionalProperties.trace&&this.tag.setProp("trace",e.additionalProperties.trace,!0)}},{key:"_setDomains",value:function(e){this.tag&&(this.tag.setConfig(_.ATILabelKeys.COLLECT_DOMAIN,e.additionalProperties.testDomain),this.tag.setConfig(_.ATILabelKeys.COLLECT_DOMAIN_SSL,e.additionalProperties.testDomain))}},{key:"_setReferrer",value:function(e){if(this.tag){var r=e.additionalProperties;r&&void 0!==r.referrer_url&&null!==r.referrer_url?this.referrer=r.referrer_url:null!==e.referrer&&void 0!==e.referrer?this.referrer=e.referrer:this.tag.getParam("ref")&&(this.referrer=this.tag.getParam("ref")),this.referrer=s.LabelCleanser.cleanCustomVariable(this.referrer)}}},{key:"_setUserValues",value:function(){var r=this;return this.getUserVariables().then(function(e){e&&(e.hashedId&&e.isSignedIn?r.bbcHid=encodeURIComponent(e.hashedId):e.isSignedIn?r.bbcHid="unidentified-user":r.bbcHid=null,r.signedIn=e.isSignedIn,r.bbcHid?r._setTagHid(r.bbcHid):r._removeTagHid())})}},{key:"_getCookieDomain",value:function(e){return e&&e.location&&e.location.hostname&&e.location.hostname.match(/.bbc.com$/)?"bbc.com":"bbc.co.uk"}},{key:"_createOnTrackerLoadEvent",value:function(e){e&&(window.ATInternet={onTrackerLoad:)}},{key:"_loadATI",value:function(){var t=this;return this.atiInitPromise||(this.atiInitPromise=new Promise(function(e){t._createOnTrackerLoadEvent(;var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="".concat(t.staticLocation,"smarttag-").concat(t.smarttagVersion,".min.js"),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode).insertBefore(r,null)})),this.atiInitPromise}},{key:"_createTag",value:function(e){var a=this,r=e||{};this.tag=new ATInternet.Tracker.Tag(r),this.tag.builder.atiSendUrl=this.tag.builder.sendUrl,this.tag.builder.sendUrl=function(e,r,t,i){var o=e.replace(/&ref=?[^&]+/g,"&ref=".concat(a.referrer));o=s.LabelCleanser.removeSensitiveInfo(o),a.tag.builder.atiSendUrl(o,r,t,i)},this.tag.onTrigger("Tracker:Hit:Sent:Ok",this._storeEvent.bind(this))}},{key:"_removeTagHid",value:function(){this.tag&&(this.tag.delProp("at"),this.tag.delProp(S))}},{key:"_setTagHid",value:function(e){this.tag&&(this.tag.setProp("at",e),this.tag.setProp(S,e,!0))}},{key:"_setTagDeviceId",value:,{key:"initialise",value:function(){var r=this;return this.isReady()?new Promise(:(this.echoDeviceId=this._readCookie(this.echoDeviceIdCookie),this._loadATI().then()}},{key:"_initAtiTag",value:function(){var e={secure:!0,sameSite:"none",cookieSecure:!0,sameSiteStrict:!0,cookieDomain:this._getCookieDomain(window)};this._createTag(e),this.echoDeviceId&&this._setTagDeviceId(this.echoDeviceId),this._contentLoaded(),this.ready=!0,this.suppressView=!1}},{key:"isReady",value:function(){return this.ready}},{key:"viewEvent",value:function(){return Promise.all([this._setUserValues(),this._setPageValues()]).then(this._sendViewEvent.bind(this))}},{key:"_sendViewEvent",value:function(){var r=this;return new Promise(function(e){r.suppressView&&"false"!==r.suppressView?r.pageSentPromise=r._resetPageSentPromise():(r.tag.dispatch(),l.Debug.isEnabled()&&l.Debug.info("Sending page view event"),r.__resolvePageSent()),e(r.tag)})}},{key:"userActionEvent",value:function(e,r,t,i,o,a){var n=this;return this.pageSentPromise.then(}},{key:"_sendUserActionEvent",value:function(a,n,s,u,l,c){var d=this;return new Promise(function(e){var r=s||{},t=new E.UserActionEvent(d.tag),i={};for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);"viewability"===a&&(d._constructCustomEventData(i,n),t.sendCustomEvent(i,u,l)),i.actionName=n,i.actionType=a,(i.actionName||i.container)&&(i.userId=d.bbcHid,i[_.ATILabelKeys.BBC_COUNTER_NAME]=d.getCounterName(),u&&(i.anchorElement=u),l&&(i.originalEvent=l),u&&l||c?t.sendClickEvent(i):t.sendImpressionEvent(i)),e()})}},{key:"_constructCustomEventData",value:function(e,r){e.user=e.user||{},e.user.id=this.bbcHid,e.app={},e.app.type=this.appType||A,e.app.name=this.appName||p,e.event=e.event||{},e.event.category=e.event.category||"viewability",e.event.action=e.event.action||r}},{key:"setCounterName",value:,{key:"getCounterName",value:,{key:"_generateCounterName",value:function(){var e=new RegExp(/\/$/),r=new RegExp(/^\//),t=new RegExp(/\//g),i=window.location.pathname.replace(r,"").replace(e,"").replace(t,".");if(""===i){var o=new RegExp(/ \- /),a=new RegExp(/BBC /gi);i=document.title.replace(o,"").replace(a,"")}return s.LabelCleanser.cleanPageName(i)}},{key:"_contentLoaded",value:,{key:"getSiteId",value:,{key:"addLabel",value:function(e,r){e===_.ATILabelKeys.BBC_COUNTER_NAME||e===_.ATILabelKeys.LEVEL_2_SITE?this.pageValues[e]=r:this.customParams[e]=s.LabelCleanser.cleanCustomVariable(r)}},{key:"setDestination",value:function(e){var r=i.Destinations.get(e);return r&&(this.addLabel(_.ATILabelKeys.LEVEL_2_SITE,r.defaultProducer),this.tag.setConfig(_.ATILabelKeys.LEVEL_1_SITE,r.id),e.toUpperCase().match(/TEST$/)||"DEFAULT"===e.toUpperCase()||(this.tag.setConfig(_.ATILabelKeys.COLLECT_DOMAIN,"a1.api.BBC.co.uk"),this.tag.setConfig(_.ATILabelKeys.COLLECT_DOMAIN_SSL,"a1.api.BBC.co.uk"))),this}},{key:"setProducer",value:function(e){var r;return((r=e?o.Producers.getId(e):0)||0===r)&&this.addLabel(_.ATILabelKeys.LEVEL_2_SITE,r),this}},{key:"setNationsProducer",value:function(e){var r;return void 0!==(r=e?n.NationsProducers.getName(e):n.NationsProducers.NONE)&&(this.nationsProducer=r),this.tag&&void 0!==this.nationsProducer&&(this.nationsProducer!==n.NationsProducers.NONE?this.tag.setProp(_.ATILabelKeys.NATIONS_PRODUCER,this.nationsProducer,!0):this.tag.delProp(_.ATILabelKeys.NATIONS_PRODUCER)),this}},{key:"getProperties",value:,{key:"_storeEvent",value:function(e,r){var t,i=(new Date).getTime();if(r&&r.details&&r.details.hit){var o=r.details.hit.split("?");if(o&&o.length){var a=o[1].split("&");if(a&&a.length){t={timestamp:i,params:{}};for(var n=0;n<a.length;n++){var s=a[n].split("=");t.params[s[0]]=s[1]}}t&&this.eventHistory.push(t)}}}},{key:"getEventHistory",value:function(){return l.Debug.isEnabled()&&l.Debug.info("Event history",this.eventHistory),this.eventHistory}},{key:"resetEventHistory",value:,{key:"_setDebug",value:function(e){if(!0===e.enableDebug||"true"===e.enableDebug?l.Debug.enable():l.Debug.disable(),!0===e.throwOnError||"true"===e.throwOnError?l.Debug.setThrowOnError(!0):l.Debug.setThrowOnError(!1),e.debugLevel)if("number"==typeof e.debugLevel)l.Debug.setLevel(e.debugLevel);else if("string"==typeof e.debugLevel)switch(e.debugLevel.toLowerCase()){case"info":l.Debug.setLevel(l.Debug.DebugLevels.INFO);break;case"warn":l.Debug.setLevel(l.Debug.DebugLevels.WARN);break;case"error":l.Debug.setLevel(l.Debug.DebugLevels.ERROR)}}}])&&f(e.prototype,r),t&&f(e,t),Object.defineProperty(e,"prototype",{writable:!1}),a}()).Debug=l.Debug},{"./config/destinations":1,"./config/label-keys":2,"./config/nations-producers":3,"./config/producers":4,"./custom-variables":5,"./user-action-event":8,"./util/debug":9,"./util/helpers":10,"./util/label-cleanser":11,"./versions.json":13}],7:[function(e,r,t){"use strict";var i=e("./reverb-client"),o=e("./util/orbit-variables");window.__reverb.__reverbTimeout&&clearTimeout(window.__reverb.__reverbTimeout),window.__reverb.__resolveReverbLoaded(new i.ReverbClient({staticLocation:window.__reverbStaticLocation,smarttagVersion:window.__smarttagVersion,getPageVariables:o.OrbitVariables.getPageVariables,getUserVariables:o.OrbitVariables.getUserVariables}))},{"./reverb-client":6,"./util/orbit-variables":12}],8:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserActionEvent=void 0;var n=e("./config/label-keys"),s=e("./util/label-cleanser"),u=e("./util/debug");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===l(a=function(e,r){if("object"!==l(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===r?String:Number)(e);var i=t.call(e,r||"default");if("object"!==l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(o,"string"))?a:String(a)),i)}var o,a}var c={ACTION_NAME:"unknown",COMPAIGN_ID:"Page",VARIANT:{},FORMAT:{},GENERAL_PLACEMENT:"unknown",DETAILED_PLACEMENT:"",ADVERTISER_ID:"",URL:"unknown"},d="click",a="impression";t.UserActionEvent=function(){ar e,t,i;return e=r,(t=[{key:"_buildCreation",value:function(e){var r=e&&e.actionName||c.ACTION_NAME;return e&&e.type&&(r+="~"+e.type),r}},{key:"_formatEventValue",value:function(e){var r="";return null!=e&&(r=s.LabelCleanser.cleanCustomVariable(e)),"["+encodeURIComponent(r)+"]"}},{key:"_serialiseObjectForAti",value:function(i){return Object.keys(i).map(function(e){var r="".concat(e,"="),t=i[e];return null!=t&&(r+=t.toString().substring(0,255).replace(/(\~|\=)/g,"_")),r}).join("~")}},{key:"_sendEvent",value:function(e,r){var t=e[n.ATILabelKeys.RESULT]||c.URL;try{t=decodeURIComponent(t)}catch(e){u.Debug.isEnabled()&&u.Debug.error("Error decoding url: ".concat(e))}var i={creation:this._formatEventValue(this._buildCreation(e)),campaignId:this._formatEventValue(e[n.ATILabelKeys.CONTAINER]||c.COMPAIGN_ID),variant:this._formatEventValue(this._serialiseObjectForAti(e[n.ATILabelKeys.PERSONALISATION]||c.VARIANT)),format:this._formatEventValue(this._serialiseObjectForAti(e[n.ATILabelKeys.METADATA]||c.FORMAT)),generalPlacement:this._formatEventValue(e[n.ATILabelKeys.BBC_COUNTER_NAME]||c.GENERAL_PLACEMENT),detailedPlacement:this._formatEventValue(e.userId||c.DETAILED_PLACEMENT),advertiserId:this._formatEventValue(e[n.ATILabelKeys.SOURCE]||c.ADVERTISER_ID),url:this._formatEventValue(s.LabelCleanser.removeSensitiveInfo(t))},o={};if(r===d?(o.click=i,e.anchorElement&&(o.elem=e.anchorElement),e.originalEvent&&(o.event=e.originalEvent)):o.impression=i,this._tag){this._tag.publisher.send(o);var a=o.click?"click":"impression";u.Debug.isEnabled()&&u.Debug.info("Sending user action ".concat(a," event"),i)}}},{key:"_formatSupplementary",value:function(e){for(var r={},t=0;t<e.length;t++)r[(t+1).toString()]=e[t];return r}},{key:"_extractLabelsForCustomEvent",value:function(e){var r=e.group,t=e.user,i=e.app,o=e.event,a=e.experience,n=e.error,s=e.uploader,u=e.subitem,l={};return r&&(l.group=r),l.event=o,a&&(l.experience=a),n&&(l.error=n),s&&(l.uploader=s),u&&(l.subitem=u),l.user=t,l.app=i||{},l}},{key:"sendCustomEvent",value:function(e,r,t){var i=e.item,o=e.event;if(i){var a=[o.category,o.subcategory,o.action,o.type].filter(.join("."),n=this._extractLabelsForCustomEvent(e);if(this._tag)if(Array.isArray(i)){this._tag.event.set(n);for(var s=0;s<i.length;s++){var u={};i[s].supplementary&&Array.isArray(i[s].supplementary)&&(i[s].supplementary=this._formatSupplementary(i[s].supplementary)),u.item=i[s],this._tag.event.add(a,u)}this._tag.dispatch()}else i.supplementary&&Array.isArray(i.supplementary)&&(i.supplementary=this._formatSupplementary(i.supplementary)),n.item=i,this._tag.event.send(a,n,{elem:r,event:t})}}},{key:"sendClickEvent",value:function(e){this._sendEvent(e,d)}},{key:"sendImpressionEvent",value:])&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}()},{"./config/label-keys":2,"./util/debug":9,"./util/label-cleanser":11}],9:[function(e,r,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===n(a=function(e,r){if("object"!==n(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===r?String:Number)(e);var i=t.call(e,r||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Debug=void 0;var i=t.Debug=function(){function r(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r)}var e,t,i;return e=r,i=[{key:"callConsole",value:function(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"log";"object"===("undefined"==typeof console?"undefined":n(console))&&"function"==typeof console[t]&&(r?console[t](e,r):console[t](e))}},{key:"enable",value:function(){r.enabled=!0}},{key:"disable",value:,{key:"isEnabled",value:function(){return r.enabled}},{key:"getLevel",value:function(){return r.level}},{key:"getThrowOnError",value:,{key:"setThrowOnError",value:,{key:"setLevel",value:function(e){r.level=e>=this.DebugLevels.ERROR?this.DebugLevels.ERROR:e<=this.DebugLevels.INFO?this.DebugLevels.INFO:this.DebugLevels.WARN}},{key:"info",value:function(e,r){this.enabled&&this.level===this.DebugLevels.INFO&&this.callConsole("REVERB_DEBUG [INFO]: "+e,r)}},{key:"warn",value:function(e,r){this.enabled&&this.level<=this.DebugLevels.WARN&&this.callConsole("REVERB_DEBUG [WARN]: "+e,r)}},{key:"error",value:function(e,r){if(this.enabled&&this.level<=this.DebugLevels.ERROR&&(this.callConsole("REVERB_DEBUG [ERROR]: "+e,r),this.throwOnError))throw"REVERB_DEBUG [ERROR]: "+e}}],(t=null)&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}();i.throwOnError=!1,i.enabled=!1,i.DebugLevels={INFO:0,WARN:1,ERROR:2},i.level=i.DebugLevels.ERROR},{}],10:[function(e,r,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===n(a=function(e,r){if("object"!==n(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===r?String:Number)(e);var i=t.call(e,r||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Helpers=void 0;t.Helpers=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,i;return r=e,i=[{key:"startsWith",value:function(e,r){return!(!e||!r)&&0===e.indexOf(r)}}],(t=null)&&o(r.prototype,t),i&&o(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}()},{}],11:[function(e,r,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===n(a=function(e,r){if("object"!==n(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===r?String:Number)(e);var i=t.call(e,r||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.LabelCleanser=void 0,(t.LabelCleanser=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,i;return r=e,i=[{key:"cleanPageName",value:function(e){var r=new RegExp(/[^a-z0-9\.]+/g),t=new RegExp(/\.+/g),i=new RegExp(/(^_+)|(_+$)/g),o=e&&e.toLowerCase().replace(r,"_").replace(t,".").replace(i,"")||"no.name.page";if(e!==o&&("string"!=typeof e||0===e.replace(/ */,"").length))throw new Error("REVERB-ERROR: Countername must be a non-empty string");return-1===o.search(/\.page$/)&&(o+=".page"),o}},{key:"cleanCustomVariable",value:function(e){var t=this;if(Array.isArray(e)){var i=[];return e.forEach(,i}return e&&e.toString().replace(/[\u200B-\u200D\uFEFF]+/g,"").trim().replace(/\[|\]/g,"").replace(/&/g,"$").replace(/\s{1,}/g," ")}},{key:"stripCommaFromValues",value:,{key:"removeSensitiveInfo",value:function(e){if(e&&"string"==typeof e)for(var r=0;r<this.sensitiveParams.length;r++){var t=this.sensitiveParams[r],i=new RegExp("".concat(t,"=[^(&|$)]*"),"g");e=e.replace(i,"".concat(t,"=XXXX"))}return e}}],(t=null)&&o(r.prototype,t),i&&o(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}()).sensitiveParams=["token","guardianToken","nonce","dateOfBirthDay","dateOfBirthMonth","dateOfBirthYear","dateOfBirth","permissionToken"]},{}],12:[function(e,r,t){"use strict";unction o(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===n(a=function(e,r){if("object"!==n(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===r?String:Number)(e);var i=t.call(e,r||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.OrbitVariables=void 0;t.OrbitVariables=function(){ar e,t,i;return e=r,i=[{key:"wrapMethod",value:function(e,r){return e[r]&&"function"==typeof e[r]?e[r]():Promise.resolve(null)}},{key:"getPageVariables",value:function(){return window&&window.bbcpage?Promise.all(["getName","getDestination","getProducer","getSection","getContentId","getContentType","getLanguage","getAdditionalProperties","getReferrer"].map(function(e){return r.wrapMethod(window.bbcpage,e)})).then(function(e){var r=JSON.parse(JSON.stringify(e));return{name:r[0],destination:r[1],producer:r[2],section:r[3],contentId:r[4],contentType:r[5],language:r[6],additionalProperties:r[7],referrer:r[8]}}):Promise.resolve(void 0)}},{key:"getUserVariables",value:function(){return window&&window.bbcuser?Promise.all(["getHashedId","isSignedIn"].map().then(:Promise.resolve(void 0)}}],(t=null)&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}()},{}],13:[{}]},{},[7]);