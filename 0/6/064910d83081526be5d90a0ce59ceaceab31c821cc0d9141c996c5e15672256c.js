yolWPJsonp([34],{343:function(t,n,o){"use strict";var a=o(1);a(function(){var t=a(".scrap-articles-num span"),n=a(".scrap-folder-list"),o=a(".scrap-folder-detail"),e=a(".scrap-modal"),i=a(".scrap-modal-screen",e),l=a(".scrap-modal-folder",e),c=a(".scrap-modal-edit",e),r=a(".scrap-modal-message",e),d=a(".scrap-modal-comp",e),s=f=function(t,n){!t||t.length<=0||t.find(".scrap-modal-message-detail__text-caution").text(n)},u=p=function(t,n,o){var e=JSON.stringify(n);a.ajax({url:t,type:"POST",data:e,dataType:"json",contentType:"application/json",timeout:3e4,success:error:function(t,n,a){o({result_code:3,error_message:"通信エラーが発生しました。"})}})},m=function(t,n,o,a){p("/y_ajax/scrap/",{action:"scrap",method:t,others:n},function(t){if(0!=t.result_code){var n="エラーが発生しました。";t.messurn n.find("a.is-open").attr("data-folder_id")},v=function(){var t=[];return o.find(tion()ncx60;",'"':"&quot;","<":"&lt;",">":"&gt;",o,a){sion(t){return t}),a||(a=function(t,n){return n});for(var e="",i=0;i<n.length;i++){var l=t,c=o(n[i]);for(var r in c){var d="\\(\\("+r+"\\)\\)",f=new RegExp(d,"g"),u=b(c[r]n[i],l),e+=l}return e},x=function(n){t.text(n)},g=function(t,o){var e=t.shift(),i=a(".scrap-folder-list-item-template",n).html(),l=k(i,t,null,function(t,n){var e=a(n);return t.folder_id==o&&e.find("a").addClass("is-open"),e.prop("outerHTML")});a(".scrap-folder-list-me span",n).text(e.article_count),a(".scrap-folder-list-item",n).empty().append(l)},y=function(t,n){var o=a(".scrap-modal-folder-scroll ul.template",l).html(),e=k(o,t,null,function(t,o){return t.folder_id==n?"":o});a(".scrap-modal-folder-scroll ul:not(.template)",l).empty().append(e)},C=function(){var t=n.find("a.is-open"),e=t.find("p").text(),i=t.find("span").text(),l=b(e)+"　[<span>"+i+"</span>本]";a(".scrap-folder-detail-title h2",o).html(l)},w=function(t){a(".scrap-folder-detail-list",o).empty().append(t.html)},S=function(t){a(".paginate-area").empty().append(t.html),history.replaceState(null,null,t.currentUrl)},j=function(){var t=c.find('input[name="folder_name"]'),n=t.val();return n?n!=t.attr("data-folder_name")||(f(c,"変更前と新しいフォルダ名が同じです"),!1):(f(c,"フォルダ名を入力してください"),!1)},T=function(t){if(j()){var n=c.find('input[name="folder_name"]').val(),o={folder_id:t,folder_name:n};m(t?"updateFolder":"createFolder",o,c,function(t){g(t.data.folders,_()),C(),U()})}},F=function(t){e.find(".scrap-modal-common").css("display","none"),e.find(".scrap-modat.css("display","flex"):t.css("display","block"),e.css("display","block")},O=function(t){e.css("display","none")},J=function(t,n,o,e,i){u(l),l.find(".scrap-modal-common-head").text(t),l.find(".scrap-modal-folder-button__new").text(n),l.off("click","ul:not(.template) li"),o?l.find(".scrap-modal-folder-scroll-button").show():(l.find(".scrap-modal-folder-scroll-button").hide(),l.on("click","ul:not(.template) li",function(t){var n=a(this),o=n.attr("data-folder_id"),e=n.find("p").text();N(o,e)})),l.off("click","button.scrap-modal-folder-button__new"),l.on("click","button.scrap-modal-folder-button__new",function(t){e&&e(t)}),l.off("click","button.scrap-modal-folder-button__cansel"),l.on("click","button.scrap-modal-folder-button__cansel",function(t){if(!i)return void O();i(t)}),F(l)},P=function(t,n,o,a,e,i){u(c),c.find(".scrap-modal-common-head").text(t),c.find(".scrap-modal-edit-detail__title").text(n),c.find(".scrap-modal-common-button__perform").text(o);var l=c.find('input[name="folder_name"]');l.val(a),l.attr("data-folder_name",a),c.off("click","button.scrap-modal-common-button__perform"),c.on("click","button.scrap-modal-common-button__perform",function(t){e&&e(t)}),c.off("click","button.scrap-modal-common-button__cansel"),c.on("click","button.scrap-modal-common-button__cansel",function(t){if(!i)return void O();i(t)}),F(c)},q=function(t,n,o,a,e,i){u(r),r.find(".scrap-modal-common-head").text(t),r.find(".scrap-modal-message-detail__title").text(n),r.find(".scrap-modal-message-detail__text").html(o),r.find(".scrap-modal-common-button__perform").text(a),r.crap-modal-common-button__perform"),r.on("click","button.scrap-modal-common-button__perform",function(t){e&&e(t)}),r.off("click","button.scrap-modal-common-button__cansel"),r.on("click","button.scrap-modal-common-button__cansel",function(t){if(!i)return void O();i(t)}),F(r)},A=function(){J("フォルダの編集・新規作成","新規フォルtion(t){E()})},D=function(){J("移動先フォルダを適ルダを作成して移動 ",!1,function(t){L()})},E=function(){P("フォルダの編集・新規作成","-新規フォルダを作成","作成",null,function(t){T(null)})},H=function(t,n){P("フォルダの編集・新規作成","-フォルダ名を変更","名前を変更",n,function(n){T(t)})},L=function(){P("移動先フォルダを選択","-新規フォルダを作成","新規フォルダに移動",null,function(t){if(j()){var n=_(),o=c.find('input[name="folder_name"]').val(),a={folder_id:n,folder_name:o,article_ids:v()};m("moveScraps",a,r,function(t){g(t.data.folders,n),C(),w(t.data.scraps),S(t.data.paginate),U()})}})},M=function(t,o){q("フォルダの編集・新規作成","-フォルダの削除","「"+b(o)+'」フォルダを削除してもよろしいですか？<span class="scrap-modal-message-detail__text-caution">フォルダに含まれる記事も削除されます</span>',"削除",function(o){m("deleteFolder",{folder_id:t},r,function(o){var a=_();x(o.data.total),g(o.data.folders,a),C(),w(o.data.scraps),S(o.data.paginate),U(),t==a&&n.find(".scrap-folder-list-me a").trigger("click")t,n){q("移動先フォルダを選択",null,"「"+b(n)+"」に移動しますか？","移動",function(n){var o=_(),a={folder_id:o,move_to_folder_id:t,article_ids:v()};m("moveScraps",a,r,function(t){g(t.data.folders,o),C(),w(t.data.scraps),S(t.data.paginate),U()})})},R=function(){q("記事の削除",null,"選択した記事を削除してもよろしいですか？","削除",function(t){var n=_(),o={folder_id:n,article_ids:v()};m("deleteScraps",o,r,function(t){x(t.data.total),g(t.data.folders,n),C(),w(t.data.scraps),S(t.data.paginate),U()})})},U=function(){F(d)};a("a",n).off("click"),n.on("click","a",function(t){t.preventDefault();var o=a(this);if(!o.hasClass("is-open")){n.find("a").removeClass("is-open"),o.addClass("is-open");var e=o.attr("data-folder_id");m("selectScraps",{folder_id:e},n,function(t){Y(),C(),w(t.data.scraps),S(t.data.paginate)})}}),n.on("click",'button[name="edit_folder"]',function(t){var o=[];n.find(em a").each(function(t,n){var e=a(this);o.push({folder_id:e.attr("data-folder_id"),folder_name:e.find("p").text()})}),y(o,null),A()}),o.on("click",".scrap-folder-detail-edit-button__move",function(t){if(h()){var o=[],e=n.find(".scrap-folder-list-me a");o.push({folder_id:e.attr("data-folder_id"),folder_name:e.find("p").text()}),n.find(".scrap-folder-list-item a").each(function(t,n){var e=a(this);o.push({folder_id:e.attr("data-foldee:e.find("p").text()})}),y(o,_()),D()}}),o.on("click",".scrap-folder-detail-edit-button__remove",function(t){h()&&R()}),e.on("click","button.scrap-modal-common-head__close",function(t){O()}),l.on("click","button.scrap-modal-folder-scroll-button__edit",function(t){var n=a(this).closest("li"),o=n.attr("data-folder_id"),e=n.find("p").text();H(o,e)}),l.on("click","button.scrap-modal-folder-scroll-button__remove",function(t){var n=a(this).closest("li"),o=n.attr("data-folder_id"),e=n.find("p").text();M(o,e)}),d.on("click",function(t){O()}),i.on("click",function(t){O()});var W=window.ontouchstart?"touchstart":"mousedown",z=a(".scrap-folder-detai"),B=a(""),G=!1,I=!1,K=a(".scrap-folder-detail-edit__all-select"),Q=a(".scrap-folder-detail-list"),V=function(t){var n=a(".scrap-folder-detail-list-item",Q);return t?(K.text("すべて選択"),K.removeClass("on"),n.removeClass("is-checked"),!1):(K.text("すべて解除"),K.addClass("on"),n.addClass("is-checked"),!0)},X=function(){B.addClass("on"),z.text("完了"),Q.addClass("is-edit"),G=!0},Y=function(){B.removeClass("on"),z.text("設定"),Q.removeClass("is-edit"),I?I=V(I):a(".scrap-folder-detail-list-item",Q).removeClass("is-checked"),G=!1};z.on(W,function(t){G?Y():X()}),K.on(W,function(t){I=V(I)}),Q.on(W,".scrap-folder-detail-list-item-check",function(){a(this).parent("li").toggleClass("is-checked"),I&&(K.text("すべて選択"),K.removeClass("on"),I=!1)})})}},[343]);