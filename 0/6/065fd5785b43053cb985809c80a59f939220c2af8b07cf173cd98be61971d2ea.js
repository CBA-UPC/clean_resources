/*! For license information please see 3514.85f0f81e.chunk.js.LICENSE.txt */
(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[3514],{15444:function(e,t,n){"use strict";n.d(t,{$a:function(){return _T},A:function(){return iT},Ca:function(){return lC},Ea:function(){return cC},Ha:function(){return fC},I:function(){return uS},Ja:function(){return gC},K:function(){return hS},Ka:function(){return mC},La:function(){return a},Ma:function(){return PC},N:function(){return fS},Na:function(){return SC},Oa:function(){return MC},Pa:function(){return TC},Qa:function(){return NC},Ra:function(){return HC},S:function(){return yS},Sa:function(){return AC},Ta:function(){return GC},U:function(){return _S},Ua:function(){return qC},Va:function(){return VC},Wa:function(){return YC},Xa:function(){return XC},Y:function(){return kS},Ya:function(){return QC},Z:function(){return wS},Za:function(){return $C},_a:function(){return J},a:function(){return z},ab:function(){return ST},b:function(){return U},bb:function(){return ET},c:function(){return H},cb:function(){return DT},d:function(){return bx},da:function(){return PS},db:function(){return OT},e:function(){return Vx},ea:function(){return ZS},eb:function(){return FT},f:function(){return Jx},fb:function(){return AT},g:function(){return sk},gb:function(){return PT},h:function(){return lk},ha:function(){return BS},hb:function(){return ZT},i:function(){return gk},ib:function(){return MT},j:function(){return Pk},jb:function(){return av},k:function(){return Wk},kb:function(){return zT},l:function(){return Yk},lb:function(){return tE},m:function(){return Xk},ma:function(){return VS},mb:function(){return nE},n:function(){return ew},nb:function(){return iE},o:function(){return nw},ob:function(){return rE},p:function(){return uw},pa:function(){return YS},pb:function(){return sE},q:function(){return Kw},qa:function(){return XS},qb:function(){return lE},r:function(){return r},rb:function(){return ME},s:function(){return vC},sb:function(){return HE},t:function(){return _C},tb:function(){return jE},u:function(){return bC},ua:function(){return $S},v:function(){return xC},w:function(){return kC},x:function(){return wC},xa:function(){return nC},y:function(){return tT},z:function(){return nT}});var i,r,o,a,s,l,u,c,h,d,f=n(11752),p=n(61120),g=n(4942),m=n(29439),y=n(15861),v=n(93433),_=n(15671),b=n(43144),x=n(97326),k=n(60136),w=n(29388),S=n(98737),C=n(1413),T=n(37762),E=n(64687),D=n.n(E),I=Object.create,R=Object.defineProperty,O=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyNames,A=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty,Z=M=z=B=L=function(e,t,n,i){if(t&&"object"===typeof t||"function"===typeof t){var r,o=(0,T.Z)(F(t));try{var a=function(){var o=r.value;P.call(e,o)||!n&&"default"===o||R(e,o,{get:function(){return t[o]},enumerable:!(i=O(t,o))||i.enumerable})};for(o.s();!(r=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}}return e},U=function(e,t){return L(Z(R(null!=e?I(A(e)):{},"default",!t&&e&&e.__esModule?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},N=function(e){return function(t,n){return e&&e.get(t)||(n=L(Z({}),t,1),e&&e.set(t,n),n)}}("undefined"!==typeof WeakMap?new WeakMap:0),H=j=W=M((function(){r=function(e){if(e){e.width=1,e.height=1;var t=e.getContext("2d");t&&t.clearRect(0,0,1,1)}}})),V=M((function(){o={imgly_font_bernier_regular:"imgly_font_sancreek",imgly_font_cheque_regular:"imgly_font_kumar_one_outline",imgly_font_gagalin_regular:"imgly_font_permanent_marker",imgly_font_hagin_caps_thin:"imgly_font_nixie_one",imgly_font_intro_inline:"imgly_font_bungee_inline",imgly_font_nexa_script:"imgly_font_molle",imgly_font_panton_blackitalic_caps:"imgly_font_roboto_black_italic",imgly_font_panton_lightitalic_caps:"imgly_font_roboto_light_italic",imgly_font_perfograma:"imgly_font_codystar",imgly_font_panton_black_caps:"imgly_font_roboto_black",imgly_font_panton_light_caps:"imgly_font_roboto_light",imgly_font_summer_font_light:"imgly_font_sue_ellen_francisco"},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o[e]?(t&&console.warn("Font ".concat(e," was deprecated. Please use ").concat(o[e]," instead.")),o[e]):e}})),G=z((),q=z((function(e,t){t.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;if(n=(0,C.Z)({indent:" ",includeEmptyLines:!1},n),"string"!==typeof e)throw new TypeError("Expected `input` to be a `string`, got `".concat(typeof e,"`"));if("number"!==typeof t)throw new TypeError("Expected `count` to be a `number`, got `".concat(typeof t,"`"));if("string"!==typeof n.indent)throw new TypeError("Expected `options.indent` to be a `string`, got `".concat(typeof n.indent,"`"));if(0===t)return e;var i=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return e.replace(i,n.indent.repeat(t))}})),Y=z((function(){})),X=z((function(e,t){var n=Y(),i=/\s+at.*(?:\(|\s)(.*)\)?/,r=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,o="undefined"===typeof n.homedir?"":n.homedir();t.exports=function(e,t){return t=Object.assign({pretty:!1},t),e.replace(/\\/g,"/").split("\n").filter((function(e){var t=e.match(i);if(null===t||!t[1])return!0;var n=t[1];return!n.includes(".app/Contents/Resources/electron.asar")&&!n.includes(".app/Contents/Resources/default_app.asar")&&!r.test(n)})).filter(().map((function(e){return t.pretty?e.replace(i,():e})).join("\n")}})),K=z((function(e,t){var n=q(),i=X(),r=function(e,t){(0,k.Z)(o,e);var r=(0,w.Z)(o);function o(e){var t;if((0,_.Z)(this,o),!Array.isArray(e))throw new TypeError("Expected input to be an Array, got ".concat(typeof e));var a=(e=(0,v.Z)(e).map((function(e){return e instanceof Error?e:null!==e&&"object"===typeof e?Object.assign(new Error(e.message),e):new Error(e)}))).map((function(e){return"string"===typeof e.stack?function(e){return e.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"")}(i(e.stack)):String(e)})).join("\n");return a="\n"+n(a,4),(t=r.call(this,a)).name="AggregateError",Object.defineProperty((0,x.Z)(t),"_errors",{value:e}),t}return(0,b.Z)(o,[{key:t,value:D().mark((function e(){var t,n,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,T.Z)(this._errors),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return i=n.value,e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))}]),o}((0,S.Z)(Error),Symbol.iterator);t.exports=r})),J=z((function(e,t){var n=K();t.exports=function(){var e=(0,y.Z)(D().mark((function e(t,i){var r,o,a,s,l,u=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},o=r.concurrency,a=void 0===o?1/0:o,s=r.stopOnError,l=void 0===s||s,e.abrupt("return",new Promise((function(e,r){if("function"!==typeof i)throw new TypeError("Mapper function is required");if(!Number.isSafeInteger(a)&&a!==1/0||!(a>=1))throw new TypeError("Expected `concurrency` to be an integer from 1 and up or `Infinity`, got `".concat(a,"` (").concat(typeof a,")"));for(var o=[],s=[],u=t[Symbol.iterator](),c=!1,h=!1,d=0,f=0,p=function t(){if(!c){var a=u.next(),p=f;if(f++,a.done)return h=!0,void(0===d&&(l||0===s.length?e(o):r(new n(s))));d++,(0,y.Z)(D().mark((function e(){var n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.value;case 3:return n=e.sent,e.next=6,i(n,p);case 6:o[p]=e.sent,d--,t(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),l?(c=!0,r(e.t0)):(s.push(e.t0),d--,t());case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}},g=0;g<a&&(p(),!h);g++);})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})),Q={};B(Q,{FragmentPrecision:function(){return d},ImageFormat:function(){return l},OptionType:function(){return u},RenderType:function(){return s},RendererType:function(){return h},UniformType:function(){return c}});var $,ee,te,ne,ie,re,oe,ae,se=M((function(){var e,t,n;s={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},l={PNG:"image/png",JPEG:"image/jpeg",RAW:"raw"},(e=u||{}).NUMBER="number",e.VECTOR2="vector2",e.COLOR_MATRIX="color-matrix",e.COLOR="color",e.ARRAY="array",e.OBJECT="object",e.STRING="string",e.BOOLEAN="boolean",e.CONFIGURABLE="configurable",e.IMAGE="image",e.FUNCTION="function",e.TEXTURE="texture",e.ALL="*",u=e,c=c||{}),(t=h||{}).WEBGL="webgl",t.CANVAS="canvas",h=t,(n=d||{}).High="highp",n.Medium="mediump",n.Low="lowp",d=n})),le=M((function(){$=ee=function(e,t){var n=t||$();n.width=e.width,n.height=e.height;var i=n.getContext("2d");if(!i)throw new Error("Cannot render context");return i.clearRect(0,0,n.width,n.height),i.drawImage(e,0,0,e.width,e.height),n}})),ue=M((function(){te=(0,b.Z)(()})),ce={};B(ce,{glGet:function(){return ne},webUtils:function(){return ae}});var he,de,fe,pe,ge,me,ye,ve,_e,be,xe,ke,we,Se,Ce,Te,Ee,De,Ie,Re,Oe,Fe,Ae,Pe,Ze,Me,ze,Be,Le,Ue,Ne,He,je,We=M((function(){le(),W(),ue(),ne=function(e){var t={preserveDrawingBuffer:!0};return e.getContext("webgl",t)||e.getContext("experimental-webgl",t)},ie=function(){var e=$(),t=ne(e),n=t.getParameter(t.MAX_TEXTURE_SIZE),i=t.getExtension("WEBGL_lose_context");return i&&i.loseContext(),r(e),n},re=function(e,t){if(t instanceof te)e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,e.UNSIGNED_BYTE,t.data);else{var n=ee(t);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),r(n)}},oe=function(e){return Boolean(e.tagName&&"IMG"===e.tagName.toUpperCase())},ae={isSupported:isCanvas:function(e){return"Canvas"===e.constructor.name||Boolean(e.tagName&&"CANVAS"===e.tagName.toUpperCase())},isImage:oe,Image:"undefined"!==typeof window?window.Image:void 0,glMaxTexture:ie,glGet:ne,createCanvas:$,glResize:function(e,t){return e},glTexImage:re}})),Ve=M((function(){se(),he=(We(),N(ce)).webUtils,de=he,fe=function(e){return"webgl"===e._type},pe=function(e){return Boolean(e&&"tagName"in e&&e.tagName&&"CANVAS"===e.tagName.toUpperCase())},ge=function(e){return Boolean("tagName"in e&&"IMG"===e.tagName.toUpperCase())}})),Ge=M((function(){me=function(){function e(){(0,_.Z)(this,e)}return(0,b.Z)(e,null,[{key:"head",value:,{key:"tail",value:,{key:"last",value:,{key:"init",value:,{key:"remove",value:function(e,t){return e.filter(()}},{key:"findIndex",value:,{key:"find",value:,{key:"flatten",value:function(e){return e.reduce((,[])}},{key:"range",value:function(e,t){var n=[];if(t>e)for(var i=e;i<t;i++)n.push(i);return n}},{key:"repeat",value:,{key:"zip",value:function(e,t){for(var n=Math.min(e.length,t.length),i=[],r=0;r<n;r++)i[r]=[e[r],t[r]];return i}}]),e}(),ye=me})),qe=M((function(){ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_e={encode:function(e){var t,n,i,r,o,a,s,l="",u=0;do{r=(t=e[u++])>>2,o=(3&t)<<4|(n=e[u++])>>4,a=(15&n)<<2|(i=e[u++])>>6,s=63&i,isNaN(n)?a=s=64:isNaN(i)&&(s=64),l=l+ve.charAt(r)+ve.charAt(o)+ve.charAt(a)+ve.charAt(s),t=n=i="",r=o=a=s=""}while(u<e.length);return l},decode:function(e){var t,n,i,r,o,a,s=0,l=[];if(/[^A-Za-z0-9+/=]/g.exec(e))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");e=e.replace(/[^A-Za-z0-9+/=]/g,"");do{t=ve.indexOf(e.charAt(s++))<<2|(r=ve.indexOf(e.charAt(s++)))>>4,n=(15&r)<<4|(o=ve.indexOf(e.charAt(s++)))>>2,i=(3&o)<<6|(a=ve.indexOf(e.charAt(s++))),l.push(t),64!==o&&l.push(n),64!==a&&l.push(i),t=n=i="",r=o=a=""}while(s<e.length);return l}},be=_e})),Ye=M((function(){Ve(),Ge(),qe(),xe=function(){function e(){(0,_.Z)(this,e)}return(0,b.Z)(e,null,[{key:"mapRange",value:function(e,t,n){return(e-t.getMin())*n.getLength()/t.getLength()+n.getMin()}},{key:"isPlainObject",value:function(e){if("object"!==typeof e||!e)return!1;if("function"===typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isMobile",value:function(){if("undefined"===typeof navigator)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}},{key:"isBrowser",value:,{key:"values",value:,{key:"generateUUID",value:function(){var e=(new Date).getTime();return"undefined"!==typeof window.performance&&"function"===typeof window.performance.now&&(e+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,()}},{key:"resizeVectorToFit",value:function(e,t){var n=Math.min(t.x/e.x,t.y/e.y);return e.clone().multiply(n)}},{key:"resizeVectorToFill",value:function(e,t){var n=e.x/e.y;return n>t.x/t.y?t.clone().set(t.y*n,t.y):t.clone().set(t.x,t.x/n)}},{key:"isExtendable",value:function(e){return"undefined"!==typeof e&&null!==e&&("object"===typeof e||"function"===typeof e)}},{key:"defaults",value:function(e){var t={};for(var n in e)t[n]=e[n];for(var i=0;i<(arguments.length<=1?0:arguments.length-1);i++){var r=i+1<1||arguments.length<=i+1?void 0:arguments[i+1];for(var o in r)"undefined"===typeof t[o]&&(t[o]=r[o])}return t}},{key:"deepMerge",value:function(e){for(var t=function e(t,n){if(void 0===n)return e(null,t);if(Array.isArray(n))return(0,v.Z)(n);if(!xe.isPlainObject(n))return n;if(!xe.isPlainObject(t))return(0,C.Z)({},n);var i=(0,C.Z)({},t);return Object.keys(n).forEach((function(r){var o=n[r];void 0!==o&&(i[r]=e(t[r],o))})),i},n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce(t,e)}},{key:"deepDefaults",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=[].concat(i).reverse();return(t=xe).deepMerge.apply(t,(0,v.Z)(o).concat([e]))}},{key:"deepClone",value:function(e){var t={};for(var n in e)xe.isExtendable(e[n])?t[n]=xe.deepClone(e[n]):t[n]=e[n];return t}},{key:"extend",value:function(e){var t={};for(var n in e)t[n]=e[n];for(var i=0;i<(arguments.length<=1?0:arguments.length-1);i++){var r=i+1<1||arguments.length<=i+1?void 0:arguments[i+1];for(var o in r)t[o]=r[o]}return t}},{key:"clone",value:,{key:"getUUID",value:,{key:"createCanvas",value:function(){return de.createCanvas()}},{key:"isPowerOfTwo",value:function(e){return 0===(e.x&e.x-1)&&0===(e.y&e.y-1)}},{key:"nextLowestPOT",value:function(e){for(var t=1;t<32;t<<=1)e|=e>>t;return e-(e>>1)}},{key:"nextHighestPOT",value:function(e){e--;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1}},{key:"moveArrayItem",value:function(e,t,n){if(n>=e.length)for(var i=n-e.length;1+i--;)e.push(void 0);e.splice(n,0,e.splice(t,1)[0])}},{key:"ensureCanvasDimensions",value:function(e,t){return(e.width!==t.x||e.height!==t.y)&&(e.width=t.x,e.height=t.y,!0)}},{key:"byteArrayToString",value:,{key:"clamp",value:,{key:"wildCardMatch",value:function(e,t){return new RegExp("^".concat(t.split("*").join(".*"),"$")).test(e)}},{key:"flipObject",value:,{key:"ISODateString",value:function(e){eturn"".concat(e.getUTCFullYear(),"-").concat(t(e.getUTCMonth()+1),"-").concat(t(e.getUTCDate()),"T").concat(t(e.getUTCHours()),":").concat(t(e.getUTCMinutes()),":").concat(t(e.getUTCSeconds()),"Z")}},{key:"getCrossOriginValue",value:function(e){return e?"none"!==e?e:void 0:"anonymous"}},{key:"invariant",value:,{key:"executePromises",value:function(e){var t=e.length,n=0,i=[],r=[];return new Promise((function(o,a){var s=function(){++n>=t&&(r.length<=0?o(i):a(r))},l=function(e){i.push(e),s()},u=function(e){r.push(e),s()};e.forEach(()}))}}]),e}(),j(ke=xe,"Array",ye),we=ke})),Xe=M((function(){Ye(),Se=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],Ce=function(){return console&&console.group&&console.groupCollapsed&&console.groupEnd},Te=function(){return"undefined"!==typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},Ee=function(e,t){return["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: ".concat(e,"; color: ").concat(t,"; line-height: 20px; padding: 4px 0; font-weight: bold"),"background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"]},De=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warn",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se;(0,_.Z)(this,e),this._levels=(0,v.Z)(i),this._maxLevel=this.getLevelIndexByName(n),this._consoleFuncs={trace:function(){var e,t;Ce()?((e=console).groupCollapsed.apply(e,arguments),console.trace(),console.groupEnd()):(t=console).trace.apply(t,arguments)}},this._levels.forEach((function(e){var n=e.name;t[n]=))}return(0,b.Z)(e,[{key:"getLevelIndexByName",value:function(e){return we.Array.findIndex(this._levels,(function(t){return t.name===e}))}},{key:"getLevelObjectByName",value:,{key:"canLog",value:function(e){var t=this.getLevelIndexByName(e);return!(t<0)&&t>=this._maxLevel}},{key:"setLevel",value:function(e){var t=this.getLevelIndexByName(e);t<0||(this._maxLevel=t)}},{key:"_log",value:function(e,t){var n=this.getLevelObjectByName(e);if(n&&this.canLog(e)){n.name;for(var i=n.type,r=n.background,o=n.color,a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];var u,c=s.filter(().map((function(e){return e.toObject?JSON.parse(JSON.stringify(e.toObject())):e})),h=this._consoleFuncs[i]||console[i]?function(){var e;return(e=console)[i].apply(e,arguments)}:d=c.length,f=Ee(r,o);if(!Te()){var p=c.length;return p<=0?void h("PhotoEditorSDK | ".concat(t," ")):1===p&&"string"===typeof c[0]?void h("PhotoEditorSDK | ".concat(t," | ").concat(c[0])):void h.apply(void 0,["PhotoEditorSDK | ".concat(t," | ")].concat((0,v.Z)(c)))}if(d<=0)h.apply(void 0,["%c  %c PhotoEditorSDK %c  %c ".concat(t," %c %c  ")].concat((0,v.Z)(f)));else if(1!==d||"string"!==typeof c[0])Ce()?((u=console).groupCollapsed.apply(u,["%c  %c PhotoEditorSDK %c  %c ".concat(t," %c")].concat((0,v.Z)(we.Array.init(f)))),h.apply(void 0,(0,v.Z)(c)),console.groupEnd()):h.apply(void 0,["%c  %c PhotoEditorSDK %c  %c ".concat(t," %c")].concat((0,v.Z)(we.Array.init(f)),(0,v.Z)(c)));else h.apply(void 0,["%c  %c PhotoEditorSDK %c  %c ".concat(t," %c  ").concat(c[0],"  %c  ")].concat((0,v.Z)(f)))}}},{key:"image",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=new window.Image,i=function(){var t=n.width,i=n.height;e&&console.log(e),console.log("%c+","\n        font-size: 1px;\n        padding: 0px ".concat(Math.floor(t/2),"px;\n        line-height: ").concat(i,"px;\n        background: url(").concat(n.src,");\n        color: transparent;\n        background-repeat: no-repeat;\n        background-size: ").concat(t,"px ").concat(i,"px;"))};return n.onload=i,t instanceof window.HTMLCanvasElement?n.src=t.toDataURL():t instanceof window.Image?(n=t,i()):"string"===typeof t?n.src=t:this.log(e,t),n}},{key:"texture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(t){var n=t.getBaseTexture(),i=n.getRenderers(),r=we.Array.find(i,(),o=n.getFrame(),a=o.width,s=o.height;if(r){var l=r.getContext(),u=n.getGLTextureForRenderer(r);this.logGlTexture(l,u,a,s,e)}else Ie.image(e,n.getSource())}else this.log(e,"texture: null or undefined")}},{key:"logGlTexture",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:150,r=arguments.length>4?arguments[4]:void 0;e.bindTexture(e.TEXTURE_2D,t);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);var a=new Uint8Array(n*i*4);e.readPixels(0,0,n,i,e.RGBA,e.UNSIGNED_BYTE,a),e.deleteFramebuffer(o);var s=document.createElement("canvas");s.width=n,s.height=i;var l=s.getContext("2d"),u=l.createImageData(n,i);return u.data.set(a),l.putImageData(u,0,0),Ie.image(r,s)}}]),e}(),Ie=new De("warn"),Re=Ie})),Ke=M((function(){Oe={load:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"},i=return i().then(()},loadImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return this._loadWithoutExif(e,t)},_loadWithoutExif:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return new Promise((function(n,i){var r=new window.Image;r.addEventListener("load",(function(){n(r)})),r.addEventListener("error",(function(){i(new Error("Failed to load image at ".concat(e)))})),t.cors&&(r.crossOrigin=t.value),r.src=e}))},_createAndLoadImage:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{cors:!0,value:"anonymous"};return new Promise((function(e,r){var o=n._loadWithoutExif(t,i).then((function(t){return e(t)})),a=new Promise((function(e,r){n._loadAsDataURL(t,i).then((function(t){var n=new window.Image;n.addEventListener("load",(function(){e(n)})),n.src=t,n.rawSource=t})).catch((function(t){o.then((function(t){return e(t)}))}))}));return n._stringEndsWith(t,".svg")?o.then((function(t){return e(t)})):a.then((function(t){return e(t)}))}))},_stringEndsWith:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t},_loadAsDataURL:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return new Promise((function(n,i){var r=new XMLHttpRequest;r.onload=function(){var e=new FileReader;e.onloadend=function(){e.error&&i(e.error),n(e.result)},e.readAsDataURL(r.response)},r.open("GET",e),r.responseType="blob",r.withCredentials=t.cors&&"use-credentials"===t.value,r.send()}))},loadXHR:function(e,t){return new Promise((function(n,i){var r;window.XDomainRequest?(r=new window.XDomainRequest,t&&r.overrideMimeType(t),r.onload=function(){n(r)},r.onerror=function(e){i(e)}):window.XMLHttpRequest&&(r=new window.XMLHttpRequest,t&&r.overrideMimeType(t),r.onreadystatechange=function(e){4===r.readyState&&(200===r.status?n(r):i(new Error("HTTP Status ".concat(r.status))))}),r.open("GET",e,!0),r.send()}))}}})),Je=z((function(e,t){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=)),Qe=z((function(e,t){var n=t.exports=)),$e=z((function(e){e.decode=e.parse=Je(),e.encode=e.stringify=Qe()}));function et(e){"string"==typeof e&&(e=it(e));var t=e,Fe.default,Ae);return""+t.protocol+t.host+t.pathname+t.search+t.hash}unction nt(){}function it(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),e&&"object"==typeof e&&e instanceof nt)return e;var i=(e=e.trim()).match(Ue);e=i?i[1].replace(/\\/g,"/")+i[2]:e.replace(/\\/g,"/"),je.test(e)&&"/"!==e.slice(-1)&&(e+="/");var r=!/(^javascript)/.test(e)&&e.match(Ne),o=He.test(e),a="";r&&(Le.test(r[1])||(a=r[1].toLowerCase(),e=""+r[2]+r[3]),r[2]||(o=!1,Le.test(r[1])?(a=r[1],e=""+r[3]):e="//"+r[3]),3!==r[2].length&&1!==r[2].length||(a=r[1],e="/"+r[3]));var s,l=(i?i[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),u=l&&l[1],c=new nt,h="",d="";try{s=new URL(e)}catch(g){h=g,a||n||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(d="/",e=e.substr(1));try{s=new URL(e,Me)}catch(m){return c.protocol=a,c.href=a,c}}c.slashes=o&&!d,c.host=s.host===Ze?"":s.host,c.hostname=s.hostname===Ze?"":s.hostname.replace(/(\[|\])/g,""),c.protocol=h?a||null:s.protocol,c.search=s.search.replace(/\\/g,"%5C"),c.hash=s.hash.replace(/\\/g,"%5C");var f=e.split("#");!c.search&&~f[0].indexOf("?")&&(c.search="?"),c.hash||""!==f[1]||(c.hash="#"),c.query=t?Fe.default.decode(s.search.substr(1)):c.search.substr(1),c.pathname=d+(r?s.pathname):s.pathname),"about:"===c.protocol&&"blank"===c.pathname&&(c.protocol="",c.pathname=""),h&&"/"!==e[0]&&(c.pathname=c.pathname.substr(1)),a&&!Le.test(a)&&"/"!==e.slice(-1)&&"/"===c.pathname&&(c.pathname=""),c.path=c.pathname+c.search,c.auth=[s.username,s.password].map(decodeURIComponent).filter(Boolean).join(":"),c.port=s.port,u&&!c.host.endsWith(u)&&(c.host+=u,c.port=u.slice(1)),c.href=d?""+c.pathname+c.search+c.hash:et(c);var p=/^(file)/.test(c.href)?["host","hostname"]:[];return Object.keys(c).forEach((),c}var rt,ot,at=M((function(){Fe=U($e(),1),Ae=/https?|ftp|gopher|file/,Me=(Pe="http://")+(Ze="w.w"),ze=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,Be=/https?|ftp|gopher|file/,nt.prototype.parse=it,nt.prototype.format=et,nt.prototype.resolve=tt,nt.prototype.resolveObject=tt,Le=/^https?|ftp|gopher|file/,Ue=/^(.*?)([#?].*)/,Ne=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,He=/^([a-z0-9.+-]*:)?\/\/\/*/i,je=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i})),st=M((function(){at(),5e3,rt="undefined"!==typeof window?window:n.g,ot=function(){function e(t){(0,_.Z)(this,e),this._url=t,this._parsedUrl=it(this._url,!0)}return(0,b.Z)(e,[{key:"_isJSONPRequest",value:function(){var e=this._parsedUrl.query;for(var t in e){if("?"===e[t])return!0}return!1}},{key:"load",value:,{key:"_loadJSON",value:function(){var e=this;return new Promise((function(t,n){var i;rt.XDomainRequest?((i=new rt.XDomainRequest).onload=i.onerror=function(e){n(e)},i.open("GET",e._url,!0),i.send()):rt.XMLHttpRequest&&((i=new XMLHttpRequest).onreadystatechange=function(e){if(4===i.readyState)if(200===i.status){var r=JSON.parse(i.responseText);t(r)}else n(new Error("HTTP Status ".concat(i.status)))},i.open("GET",e._url,!0),i.send())}))}},{key:"_loadJSONP",value:function(){var e=this,t=!1,n=!1,i="pesdk".concat(Math.round(99999999999999*Math.random()));return new Promise((function(r,o){var a=e._createJSONPNode(i);rt[i]=rt.setTimeout((function(){n||(e._removeJSONPNode(a),t=!0,o(new Error("Timeout of 5 seconds exceeded.")))}),5e3)}))}},{key:"_createJSONPNode",value:function(e){var t=this._buildJSONPUrl(e),n=document.querySelector("head"),i=document.createElement("script");return i.src=t,n.appendChild(i),i}},{key:"_removeJSONPNode",value:function(e){e.parentNode.removeChild(e)}},{key:"_buildJSONPUrl",value:function(e){var t=this._parsedUrl.query,n=null;for(var i in t)if("?"===t[i]){n=i;break}return delete this._parsedUrl.search,t[n]=e,et(this._parsedUrl)}}]),e}()})),lt={};B(lt,{ImageLoader:function(){return Oe},JSONLoader:function(){return ot}});var ut,ct,ht,dt,ft,pt,gt,mt,yt,vt,_t,bt,xt,kt,wt,St,Ct,Tt,Et=M((function(){Ke(),st()})),Dt=M((function(){ut=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,_.Z)(this,e),this.r=t,this.g=n,this.b=i,this.a=r}return(0,b.Z)(e,[{key:"toRGBA",value:function(){var e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)];return"rgba(".concat(e.join(","),")")}},{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=e,this.g=t,this.b=n,this.a=i,this}},{key:"toRGB",value:function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]}},{key:"toHex",value:function(){var e=[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))];return"#".concat(e.join(""))}},{key:"toGLColor",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toArray",value:function(){return this.toGLColor()}},{key:"toRGBGLColor",value:,{key:"toHSV",value:function(){var e,t,n=Math.max(this.r,this.g,this.b),i=Math.min(this.r,this.g,this.b),r=n,o=n-i;if(t=0===n?0:o/n,n===i)e=0;else{switch(n){case this.r:e=(this.g-this.b)/o,this.g<this.b&&(e+=6);break;case this.g:e=(this.b-this.r)/o+2;break;case this.b:e=(this.r-this.g)/o+4}e/=6}return[e,t,r]}},{key:"fromHSV",value:function(e,t,n){return this.copy(ut.fromHSV(e,t,n)),this}},{key:"clone",value:function(){return new ut(this.r,this.g,this.b,this.a)}},{key:"cloneRGB",value:function(){return new ut(this.r,this.g,this.b,1)}},{key:"add",value:,{key:"minus",value:,{key:"multiplyScalar",value:,{key:"divideScalar",value:function(e){return this.r/=e,this.g/=e,this.b/=e,this.a/=e,this}},{key:"clamp",value:function(e,t){return this.r=Math.min(Math.max(this.r,e),t),this.g=Math.min(Math.max(this.g,e),t),this.b=Math.min(Math.max(this.b,e),t),this.a=Math.min(Math.max(this.a,e),t),this}},{key:"mix",value:function(e,t){return this.r=(1-t)*this.r+t*e.r,this.g=(1-t)*this.g+t*e.g,this.b=(1-t)*this.b+t*e.b,this.a=(1-t)*this.a+t*e.a,this}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}},{key:"equals",value:,{key:"_componentToHex",value:,{key:"toString",value:function(){return"Color(".concat(this.r,", ").concat(this.g,", ").concat(this.b,", ").concat(this.a,")")}}],[{key:"fromHSV",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=[],o=r[0],a=r[1],s=r[2],l=Math.floor(6*e),u=6*e-l,c=n*(1-t),h=n*(1-u*t),d=n*(1-(1-u)*t);switch(l%6){case 0:o=n,a=d,s=c;break;case 1:o=h,a=n,s=c;break;case 2:o=c,a=n,s=d;break;case 3:o=c,a=h,s=n;break;case 4:o=d,a=c,s=n;break;case 5:o=n,a=c,s=h}return new ut(o,a,s,i)}},{key:"fromArray",value:,{key:"fromHex",value:function(e){var t=e.match(/[0-9A-fa-f]{1,2}/g),n=(0,m.Z)(t,3),i=n[0],r=n[1],o=n[2];return new ut(parseInt(i,16)/255,parseInt(r,16)/255,parseInt(o,16)/255,1)}},{key:"TRANSPARENT",get:function(){return new ut(0,0,0,0)}},{key:"WHITE",get:function(){return new ut(1,1,1,1)}},{key:"BLACK",get:function(){return new ut(0,0,0,1)}},{key:"RED",get:function(){return new ut(1,0,0,1)}},{key:"BLUE",get:function(){return new ut(0,0,1,1)}},{key:"GREEN",get:function(){return new ut(0,1,0,1)}}]),e}(),ct=ut})),It=M((function(){Xe(),12,ht=function(){eturn(0,b.Z)(e,[{key:"pipeEvents",value:function(e){this._pipeDestinations.push(e)}},{key:"unpipeEvents",value:,{key:"on",value:function(e,t){if("undefined"===typeof e)throw new Error("Invalid event type: `".concat(e,"`"));if("function"!==typeof t)throw new TypeError;var n=this._events[e]||(this._events[e]=[]);return-1!==n.indexOf(t)||(n.push(t),this._maxListeners&&n.length>this._maxListeners&&(Re.warn("EventEmitter","Possible memory leak detected, added ".concat(n.length," `").concat(e,"` listeners (current limit is ").concat(this._maxListeners,")")),"undefined"!==typeof console&&console.trace())),this}},{key:"once",value:function(e,t){if("undefined"===typeof e)throw new Error("Invalid event type: `".concat(e,"`"));var n=this;return this.on(e,()}},{key:"off",value:function(e){if("undefined"===typeof e)throw new Error("Invalid event type: `".concat(e,"`"));if(0===(arguments.length<=1?0:arguments.length-1))return this._events[e]=null,this;var t=arguments.length<=1?void 0:arguments[1];if("function"!==typeof t)throw new TypeError;var n=this._events[e];if(!n||!n.length)return this;var i=n.indexOf(t);return-1===i||n.splice(i,1),this}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("undefined"===typeof e)throw new Error("Invalid event type: `".concat(e,"`"));this._pipeDestinations.forEach((function(t){t.emit.apply(t,[e].concat(n))}));var r=this._events[e];return!(!r||!r.length)&&(r.slice(0).forEach((function(e){return e.apply(null,n)})),!0)}},{key:"setMaxListeners",value:function(e){if(parseInt(e,10)!==e)throw new TypeError;this._maxListeners=e}}]),e}(),dt=ht})),Rt=M((function(){Xe(),W(),ft={checkFramebufferStatus:function(e,t){var n,i=t.checkFramebufferStatus(t.FRAMEBUFFER),r=(n={},(0,g.Z)(n,t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),(0,g.Z)(n,t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),(0,g.Z)(n,t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),(0,g.Z)(n,t.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),n);i!==t.FRAMEBUFFER_COMPLETE&&Re.warn(e,"Framebuffer incomplete: ".concat(r[i]))},determineGPUName:function(e){var t=null,n=null;e||(e=(n=document.createElement("canvas")).getContext("experimental-webgl")||n.getContext("webgl"));var i=e&&e.getExtension("WEBGL_debug_renderer_info");return i&&(t=e.getParameter(i.UNMASKED_RENDERER_WEBGL),n&&n.remove()),r(n),t},isGPUBlacklisted:function(e){return!1}}})),Ot=M((function(){pt=function(e){return"number"===typeof e}})),Ft=M((function(){Ot(),gt=function(e){return e instanceof vt},mt=function(e,t){return gt(e)?{x:e.x,y:e.y}:{x:e,y:pt(t)?t:e}},yt=function(e,t){return function(n,i){var r=mt(n,i),o=r.x,a=r.y;return e.x=t(e.x,o),e.y=t(e.y,a),e}},vt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,_.Z)(this,e),this.add=yt(this,(),this.subtract=yt(this,(function(e,t){return e-t})),this.divide=yt(this,(),this.multiply=yt(this,(),this.x=t,this.y=n}return(0,b.Z)(e,[{key:"set",value:function(e,t){var n=mt(e,t),i=n.x,r=n.y;return this.x=i,this.y=r,this}},{key:"clone",value:function(){return new vt(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"clamp",value:function(e,t){return pt(e)&&(e=new vt(e,e)),pt(t)&&(t=new vt(t,t)),e&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),t&&(this.x=Math.min(t.x,this.x),this.y=Math.min(t.y,this.y)),this}},{key:"dot",value:function(e,t){var n=mt(e,t),i=n.x,r=n.y;return this.x*i+this.y*r}},{key:"equals",value:function(e,t){var n=mt(e,t),i=n.x,r=n.y;return i===this.x&&r===this.y}},{key:"flip",value:function(){var e=this.x;return this.x=this.y,this.y=e,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"floor",value:function(){return this.x|=0,this.y|=0,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"min",value:function(){return Math.min(this.x,this.y)}},{key:"max",value:function(){return Math.max(this.x,this.y)}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}},{key:"toString",value:function(){return"Vector2({ x: ".concat(this.x,", y: ").concat(this.y," })")}},{key:"roundDecimal",value:function(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this}},{key:"asArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?[this.y,this.x]:[this.x,this.y]}}],[{key:"fromObject",value:function(e){return new vt(e.x,e.y)}},{key:"NULL",get:function(){return new vt(0,0)}}]),e}()})),At=M((function(){Ft(),_t=function(){function e(){(0,_.Z)(this,e),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.reset()}return(0,b.Z)(e,[{key:"multiply",value:function(e){var t,n,i,r,o,a;return t=this.a*e.a+this.b*e.c,n=this.a*e.b+this.b*e.d,i=this.c*e.a+this.d*e.c,r=this.c*e.b+this.d*e.d,o=this.tx*e.a+this.ty*e.c+e.tx,a=this.tx*e.b+this.ty*e.d+e.ty,this.a=t,this.b=n,this.c=i,this.d=r,this.tx=o,this.ty=a,this}},{key:"applyToVector",value:function(e){var t=e,n=t.x,i=t.y;return(e=e.clone()).x=this.a*n+this.c*i+this.tx,e.y=this.b*n+this.d*i+this.tx,e}},{key:"applyInverseToVector",value:function(e){var t=1/(this.a*this.d+this.c*-this.b),n=e,i=n.x,r=n.y;return(e=e.clone()).x=this.d*t*i+-this.c*t*r+(this.ty*this.c-this.tx*this.d)*t,e.y=this.a*t*r+-this.b*t*i+(-this.ty*this.a+this.tx*this.b)*t,e}},{key:"rectangleToCoordinates",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vt(0,0),n=e.width*(1-t.x),i=e.width*-t.x,r=e.height*(1-t.y),o=e.height*-t.y,a=[];return a.push(new vt(this.a*i+this.c*o+this.tx,this.d*o+this.b*i+this.ty)),a.push(new vt(this.a*n+this.c*o+this.tx,this.d*o+this.b*n+this.ty)),a.push(new vt(this.a*n+this.c*r+this.tx,this.d*r+this.b*n+this.ty)),a.push(new vt(this.a*i+this.c*r+this.tx,this.d*r+this.b*i+this.ty)),a}},{key:"reset",value:,{key:"toArray",value:function(){var e=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"===typeof Float32Array?e:new Float32Array(e)}},{key:"toString",value:function(){return"Matrix({ a: ".concat(this.a,", b: ").concat(this.b,", c: ").concat(this.c,", d: ").concat(this.d,", tx: ").concat(this.tx,", ty: ").concat(this.ty," })")}}],[{key:"IDENTITY",get:function(){return new _t}}]),e}()})),Pt=M((function(){Ft(),bt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,_.Z)(this,e),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=n,this.width=i,this.height=r}return(0,b.Z)(e,[{key:"set",value:,{key:"clone",value:function(){return new bt(this.x,this.y,this.width,this.height)}},{key:"copy",value:,{key:"equals",value:function(e,t,n,i){return e instanceof bt?e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height:e===this.x&&t===this.y&&n===this.width&&i===this.height}},{key:"translate",value:function(e,t){var n=mt(e,t),i=n.x,r=n.y;return this.x+=i,this.y+=r,this}},{key:"scale",value:function(e,t){var n=mt(e,t),i=n.x,r=n.y;return this.width*=i,this.height*=r,this}},{key:"round",value:,{key:"getPosition",value:function(){return new vt(this.x,this.y)}},{key:"getSize",value:function(){return new vt(this.width,this.height)}},{key:"insetBy",value:function(e,t){return this.x+=e,this.y+=t,this.width-=2*e,this.height-=2*t,this}},{key:"intersects",value:function(e){var t=new vt(this.x,this.y),n=new vt(this.x+this.width,this.y+this.height),i=new vt(e.x,e.y),r=new vt(e.x+e.width,e.y+e.height);return!(i.x>n.x||t.x>r.x||r.y<t.y||n.y<i.y)}},{key:"toString",value:],[{key:"FromDiagonalPoints",value:function(e,t){var n=!1;t.x-e.x<0&&(n=!0);var i=n?t:e,r=n?e:t,o=r.x-i.x,a=r.y-i.y;return new bt(i.x,i.y,o,a)}}]),e}()})),Zt=M((function(){Xe(),se(),Dt(),It(),Rt(),At(),Pt(),Ft(),Ye(),xt=2e3,5,kt=20})),Mt=M((function(){Zt(),wt=function(){function e(){(0,_.Z)(this,e),this._position=new vt(0,0),this._scale=new vt(1,1),this._pivot=new vt(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new _t,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new bt(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new bt(0,0,1,1),this._filterRectangle=new bt(0,0,0,0)}return(0,b.Z)(e,[{key:"renderWebGL",value:function(e){Re.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}},{key:"renderCanvas",value:function(e){Re.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}},{key:"updateTransform",value:function(){var e=this._parent?this._parent.getWorldTransform():_t.IDENTITY,t=this._worldTransform,n=Math.sin(this._rotation),i=Math.cos(this._rotation);t.a=i*this._scale.x,t.b=n*this._scale.x,t.c=-n*this._scale.y,t.d=i*this._scale.y,t.tx=this._position.x,t.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(t.tx-=this._pivot.x*t.a+this._pivot.y*t.c,t.ty-=this._pivot.x*t.b+this._pivot.y*t.d),t.multiply(e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"addShader",value:function(e){this._shaders.push(e)}},{key:"removeShader",value:function(e){var t=this._shaders.indexOf(e);return-1!==t&&(this._shaders.splice(t,1),!0)}},{key:"removeShaderAt",value:function(e){return!!this._shaders[e]&&(this._shaders.splice(e,1),!0)}},{key:"getBounds",value:function(){return this._bounds.clone()}},{key:"getPosition",value:function(){return this._position}},{key:"setPosition",value:function(e,t){this._position.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getScale",value:function(){return this._scale}},{key:"setScale",value:function(e,t){this._scale.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getPivot",value:function(){return this._pivot}},{key:"setPivot",value:function(e,t){this._pivot.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotation",value:,{key:"getAlpha",value:function(){return this._alpha}},{key:"setAlpha",value:function(e){this._alpha=e}},{key:"getWorldAlpha",value:function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}},{key:"getWorldTransform",value:function(){return this._worldTransform}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(e){this._parent=e}},{key:"getFilterRectangle",value:function(){return this._filterRectangle}},{key:"setFilterRectangle",value:function(e){this._filterRectangle.copy(e)}},{key:"isVisible",value:function(){return this._visible}},{key:"setVisible",value:function(e){this._visible=e}}]),e}()})),zt=M((function(){Zt(),Mt(),St=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._children=[],e._filters=[],e}return(0,b.Z)(n,[{key:"addFilter",value:function(e){this._filters.push(e)}},{key:"removeFilter",value:,{key:"setFilters",value:function(e){this._filters=e}},{key:"addChild",value:function(e){var t=e.getParent();t instanceof St&&t.removeChild(e),e.setParent(this),this._children.push(e)}},{key:"prependChild",value:function(e){var t=e.getParent();t instanceof St&&t.removeChild(e),e.setParent(this),this._children.unshift(e)}},{key:"hasChild",value:,{key:"removeChild",value:function(e){var t=this._children.indexOf(e);-1!==t?(this._children.splice(t,1),e.setParent(null)):Re.info(this.constructor.name,"Tried to remove a child that does not exist")}},{key:"clearChildren",value:function(){this._children=[]}},{key:"renderWebGL",value:function(e){if(this._visible){var t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),e.getCurrentObjectRenderer().start(),this._renderWebGL(e),this._children.forEach((function(t){t.renderWebGL(e)})),e.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&t.popFilters(),e.getCurrentObjectRenderer().start()}}},{key:"_renderWebGL",value:function(e){}},{key:"renderCanvas",value:function(e){if(this._visible){var t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),this._renderCanvas(e),this._children.forEach((function(t){t.renderCanvas(e)})),this._filters&&this._filters.length&&t.popFilters()}}},{key:"_renderCanvas",value:function(e){}},{key:"updateTransform",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"updateTransform",this).call(this),this._children.forEach((function(e){e.updateTransform()}))}},{key:"getLocalBounds",value:function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}},{key:"getBounds",value:function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}},{key:"getChildren",value:function(){return this._children}},{key:"getFilters",value:function(){return this._filters}},{key:"dispose",value:function(){}}]),n}(wt)}));ar Lt,Ut,Nt,Ht,jt,Wt,Vt,Gt,qt,Yt,Xt,Kt,Jt,Qt,$t,en,tn,nn,rn,on,an,sn,ln,un,cn,hn,dn,fn,pn,gn=M((function(){Ct=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Tt=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]})),mn=M((function(){Dt(),Lt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,g=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,m=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,y=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,v=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,x=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;(0,_.Z)(this,e),this.set(t,n,i,r,o,a,s,l,u,c,h,d,f,p,g,m,y,v,b,x)}return(0,b.Z)(e,[{key:"set",value:function(e,t,n,i,r,o,a,s,l,u,c,h,d,f,p,g,m,y,v,_){this.a=e,this.b=t,this.c=n,this.d=i,this.e=r,this.f=o,this.g=a,this.h=s,this.i=l,this.j=u,this.k=c,this.l=h,this.m=d,this.n=f,this.o=p,this.p=g,this.q=m,this.r=y,this.s=v,this.t=_}},{key:"reset",value:,{key:"apply",value:function(e){var t=this.a*e.r+this.b*e.g+this.c*e.b+this.d*e.a+this.e,n=this.f*e.r+this.g*e.g+this.h*e.b+this.i*e.a+this.j,i=this.k*e.r+this.l*e.g+this.m*e.b+this.n*e.a+this.o,r=this.p*e.r+this.q*e.g+this.r*e.b+this.s*e.a+this.t;return new ct(t,n,i,r)}},{key:"multiply",value:function(e){var t,n,i,r,o,a,s,l,u,c,h,d,f,p,g,m,y,v,_,b,x=e,k=this;return t=x.a*k.a+x.b*k.f+x.c*k.k+x.d*k.p,n=x.a*k.b+x.b*k.g+x.c*k.l+x.d*k.q,i=x.a*k.c+x.b*k.h+x.c*k.m+x.d*k.r,r=x.a*k.d+x.b*k.i+x.c*k.n+x.d*k.s,a=x.f*k.a+x.g*k.f+x.h*k.k+x.i*k.p,s=x.f*k.b+x.g*k.g+x.h*k.l+x.i*k.q,l=x.f*k.c+x.g*k.h+x.h*k.m+x.i*k.r,u=x.f*k.d+x.g*k.i+x.h*k.n+x.i*k.s,h=x.k*k.a+x.l*k.f+x.m*k.k+x.n*k.p,d=x.k*k.b+x.l*k.g+x.m*k.l+x.n*k.q,f=x.k*k.c+x.l*k.h+x.m*k.m+x.n*k.r,p=x.k*k.d+x.l*k.i+x.m*k.n+x.n*k.s,m=x.p*k.a+x.q*k.f+x.r*k.k+x.s*k.p,y=x.p*k.b+x.q*k.g+x.r*k.l+x.s*k.q,v=x.p*k.c+x.q*k.h+x.r*k.m+x.s*k.r,_=x.p*k.d+x.q*k.i+x.r*k.n+x.s*k.s,o=x.a*k.e+x.b*k.j+x.c*k.o+x.d*k.t+x.e,c=x.f*k.e+x.g*k.j+x.h*k.o+x.i*k.t+x.j,g=x.k*k.e+x.l*k.j+x.m*k.o+x.n*k.t+x.o,b=x.p*k.e+x.q*k.j+x.r*k.o+x.s*k.t+x.t,this.a=t,this.b=n,this.c=i,this.d=r,this.e=o,this.f=a,this.g=s,this.h=l,this.i=u,this.j=c,this.k=h,this.l=d,this.m=f,this.n=p,this.o=g,this.p=m,this.q=y,this.r=v,this.s=_,this.t=b,this}},{key:"clone",value:function(){var e=new Lt;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e}},{key:"equals",value:function(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f&&this.g===e.g&&this.h===e.h&&this.i===e.i&&this.j===e.j&&this.k===e.k&&this.l===e.l&&this.m===e.m&&this.n===e.n&&this.o===e.o&&this.p===e.p&&this.q===e.q&&this.r===e.r&&this.s===e.s&&this.t===e.t}},{key:"getOffsets",value:,{key:"toString",value:function(){return"ColorMatrix( ".concat(this.a,", ").concat(this.b,", ").concat(this.c,", ").concat(this.d,", ").concat(this.e,",\n      ").concat(this.f,", ").concat(this.g,", ").concat(this.h,", ").concat(this.i,", ").concat(this.j,",\n      ").concat(this.k,", ").concat(this.l,", ").concat(this.m,", ").concat(this.n,", ").concat(this.o,",\n      ").concat(this.p,", ").concat(this.q,", ").concat(this.r,", ").concat(this.s,", ").concat(this.t," )")}},{key:"toArray",value:function(){var e=this;return"abcdefghijklmnopqrst".split("").map((function(t){return e[t]}))}}],[{key:"IDENTITY",get:function(){return new Lt}},{key:"createBrightnessMatrix",value:function(e){var t=new Lt;return t.e=e,t.j=e,t.o=e,t}},{key:"createContrastMatrix",value:function(e){var t=new Lt,n=(1-e)/2;return t.a=t.g=t.m=e,t.e=t.j=t.o=n,t}},{key:"createSaturationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Lt,n=1-e,i=.213*n,r=.715*n,o=.072*n;return t.a=i+e,t.b=r,t.c=o,t.f=i,t.g=r+e,t.h=o,t.k=i,t.l=r,t.m=o+e,t}},{key:"createExposureMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.pow(2,e);return new Lt(t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0)}},{key:"createLinearMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Lt;return n.a=n.g=n.m=e,n.e=n.j=n.o=t,n}}]),e}(),Ut=Lt})),yn=M((function(){se(),Ve(),Dt(),It(),mn(),Ft(),Ye(),Nt=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.Z)(this,n),(e=t.call(this)).availableOptions=(0,C.Z)((0,C.Z)({},Object.getPrototypeOf((0,x.Z)(e)).availableOptions),r),e._onConfigurableUpdate=e._onConfigurableUpdate.bind((0,x.Z)(e)),e._initOptions(i),e}return(0,b.Z)(n,[{key:"_buildConfigError",value:function(e){var t="";return this.constructor.name&&(t="".concat(this.constructor.name,": ")),t+=e,new Error(t)}},{key:"_onOptionsChange",value:function(){}},{key:"validateSettings",value:function(){var e=this;return new Promise((function(t,n){for(var i in e.availableOptions){if(e.availableOptions[i].required&&"undefined"===typeof e._options[i])return n(e._buildConfigError("Option `".concat(i,"` is required.")))}t()}))}},{key:"_initOptions",value:function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var r=this;for(e in this.availableOptions){if(n=e.charAt(0).toUpperCase()+e.slice(1),t=this.availableOptions[e],-1===["string","number","boolean","object","vector2","color","configurable","color-matrix","array","image","function","*"].indexOf(t.type))throw this._buildConfigError("Unknown option type: `".concat(t.type,"`"));var o=function(e){r["set".concat(n)]=r["get".concat(n)]=function(){return r.getOption(e)}};if(o(e),"configurable"===t.type&&(this._options[e]=new Nt(void 0,t.structure||{}),this._options[e].on("update",this._onConfigurableUpdate)),!(e in i)||"undefined"===typeof i[e])if("undefined"!==typeof t.default){var a=t.default;"function"===typeof t.default&&(a=t.default()),this["set".concat(n)](a,!1,!0)}else"configurable"!==t.type&&(this._options[e]=void 0)}for(e in i){if("undefined"===typeof this.availableOptions[e])throw new Error("Invalid option: ".concat(e));"undefined"!==typeof i[e]&&(n=e.charAt(0).toUpperCase()+e.slice(1),this["set".concat(n)](i[e],!1,!0))}}},{key:"set",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object.keys(e).forEach((),this._onOptionsChange(),n&&this.emit("update",this,e)}},{key:"getOption",value:function(e){return this._options[e]}},{key:"hasOption",value:function(e){return!!this.availableOptions[e]}},{key:"getOptionDefault",value:function(e){var t=this.availableOptions[e];if(!t)throw new Error("Invalid option: ".concat(e));return t.default}},{key:"resetOptions",value:function(){this.set(this.getDefaultOptions())}},{key:"getDefaultOptions",value:function(){var e={};for(var t in this.availableOptions){var n=this.availableOptions[t].default;"undefined"!==typeof n&&(e[t]=n)}return e}},{key:"getOptions",value:,{key:"equals",value:,{key:"optionsEqual",value:function(e){for(var t in e){var n=e[t];if(!this._optionEquals(t,n))return!1}return!0}},{key:"_optionEquals",value:function(e,t){if("undefined"===typeof this.availableOptions[e])throw new Error("Invalid option: ".concat(e));var n=this.availableOptions[e].type,i=this._options[e];if(i===t)return!0;if("undefined"===typeof t||"undefined"===typeof i)return!1;switch(n){case"object":return"function"===typeof i.optionsEqual?i.optionsEqual(t._options):i===t;case"string":case"number":case"boolean":case"function":case"*":return i===t;case"vector2":return i.equals(t);case"color":case"color-matrix":return t.equals(i);case"configurable":return i.optionsEqual(t);case"array":return this._arrayOptionEquals(e,t);case"image":return i.src===t.src}}},{key:"_arrayOptionEquals",value:function(e,t){var n=this._options[e];if(t.length!==n.length)return!1;for(var i=!0,r=0;r<n.length;r++){var o=n[r],a=t[r];if(o instanceof Nt){if("undefined"===typeof a||!o.optionsEqual(a)){i=!1;break}}else if(a!==o){i=!1;break}}return i}},{key:"serializeOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this._options),n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={};return t.forEach((function(t){if("undefined"===typeof e.availableOptions[t])return Log.warn("Trying to serialize a key that does not exist: ".concat(t));!1!==e.availableOptions[t].serializable&&(i[t]=e.serializeOption(t,n))})),i}},{key:"serializeOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.availableOptions[e],i=n.type,r=this._options[e];if(!r)return r;if(!1===n.serializable)throw new Error("Option `".concat(e,"` is not serializable."));switch(i){case"string":case"number":case"boolean":case"object":case"function":case"*":return r;case"vector2":return t?r.toObject():r.clone();case"color":case"color-matrix":return t?r.toArray():r.clone();case"configurable":return r.serializeOptions(void 0,t);case"array":return r.slice(0);case"image":return t?r.src:r}}},{key:"setOption",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.availableOptions[e];if(!r)throw new Error("Invalid option: ".concat(e));if("undefined"!==typeof r.setter&&(t=r.setter.call(this,t,i)),"undefined"!==typeof r.validation&&r.validation(t),null===t||"undefined"===typeof t){if(r.required)throw this._buildConfigError("Option `".concat(e,"` is required."));this._options[e]=t}else switch(r.type){case"string":if("string"!==typeof t)throw this._buildConfigError("Option `".concat(e,"` has to be a string."));var o=r.available;if("undefined"!==typeof o&&-1===o.indexOf(t))throw this._buildConfigError("Invalid value for `".concat(e,"` (valid values are: ").concat(r.available.join(", "),")"));this._options[e]=t;break;case"number":if("number"!==typeof t)throw this._buildConfigError("Option `".concat(e,"` has to be a number."));this._options[e]=t;break;case"boolean":if("boolean"!==typeof t)throw this._buildConfigError("Option `".concat(e,"` has to be a boolean."));this._options[e]=t;break;case"vector2":if(!(t instanceof vt)&&("object"!==typeof t||!("x"in t)||!("y"in t)))throw this._buildConfigError("Option `".concat(e,"` has to be an instance of Vector2 or an Object holding x and y values."));this._options[e]=t instanceof vt?t.clone():vt.fromObject(t);break;case"color":if(!(t instanceof ct))throw this._buildConfigError("Option `".concat(e,"` has to be an instance of Color."));this._options[e]=t;break;case"color-matrix":if(!(t instanceof Ut))throw this._buildConfigError("Option `".concat(e,"` has to be an instance of ColorMatrix."));this._options[e]=t.clone();break;case"function":if("function"!==typeof t)throw this._buildConfigError("Option `".concat(e,"` has to be a function."));this._options[e]=t;break;case"object":case"*":this._options[e]=t;break;case"image":var a=de,s=a.Image;if("string"===typeof t){var l=new s;ge(l)&&(l.crossOrigin=we.getCrossOriginValue(r.crossOrigin)),l.src=t,this._options[e]=l}else{if(!(t instanceof s||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement))throw this._buildConfigError("Option `".concat(e,"` has to be an Image, Canvas or String."));this._options[e]=t}break;case"configurable":t instanceof Nt?this._options[e]=t:this._options[e].set(t);break;case"array":if(!(t instanceof Array))throw this._buildConfigError("Option `".concat(e,"` has to be an Array."));this._options[e]=t.slice(0);break;default:throw this._buildConfigError("Unknown option type: `".concat(r.type,"`"))}n&&(this._onOptionsChange(),this.emit("update",this,(0,g.Z)({},e,t)))}},{key:"_onConfigurableUpdate",value:,{key:"hasChanges",value:function(){var e=this.getDefaultOptions();return!this.optionsEqual(e)}}]),n}(dt),Ht=Nt})),vn=M((function(){se(),Zt(),Zt(),jt=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];(0,_.Z)(this,e),this._program=null,this._renderer=t,this._vertexSource=n,this._fragmentSource=i,this._uniforms=r,this._uniformLocations={},this._attributes=o,this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}return(0,b.Z)(e,[{key:"_init",value:function(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}},{key:"_onContextChange",value:function(){this._init()}},{key:"setupBuffers",value:function(e,t){var n=this._renderer.getContext();n.bindBuffer(n.ARRAY_BUFFER,e),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),n.vertexAttribPointer(this._attributeLocations.a_position,2,n.FLOAT,!1,kt,0),n.vertexAttribPointer(this._attributeLocations.a_texCoord,2,n.FLOAT,!1,kt,8),n.vertexAttribPointer(this._attributeLocations.a_color,4,n.UNSIGNED_BYTE,!0,kt,16)}},{key:"syncUniforms",value:,{key:"syncUniform",value:function(e){var t=this._renderer.getContext(),n=this._uniforms[e],i=this._uniformLocations[e];switch(n.type){case"sampler2d":case"i":case"1i":t.uniform1i(i,n.value);break;case"2i":t.uniform2i(i,n.value[0],n.value[1]);break;case"3i":t.uniform3i(i,n.value[0],n.value[1],n.value[2]);break;case"4i":t.uniform4i(i,n.value[0],n.value[1],n.value[2],n.value[3]);break;case"f":case"1f":t.uniform1f(i,n.value);break;case"2f":t.uniform2f(i,n.value[0],n.value[1]);break;case"3f":t.uniform3f(i,n.value[0],n.value[1],n.value[2]);break;case"4f":t.uniform4f(i,n.value[0],n.value[1],n.value[2],n.value[3]);break;case"2fv":t.uniform2fv(i,n.value);break;case"mat3":case"mat3fv":t.uniformMatrix3fv(i,!1,n.value);break;case"mat4":t.uniformMatrix4fv(i,!1,n.value);break;default:Re.warn(this.constructor.name,"Unknown uniform type: ".concat(n.type))}}},{key:"_cacheAttributeLocations",value:function(){var e=this,t=this._renderer.getContext();this._attributes.forEach((function(n){e._program&&(e._attributeLocations[n]=t.getAttribLocation(e._program,n))}))}},{key:"_cacheUniformLocations",value:function(){var e=this,t=this._renderer.getContext();Object.keys(this._uniforms).forEach((function(n){if(e._program){var i=t.getUniformLocation(e._program,n);i&&(e._uniformLocations[n]=i)}}))}},{key:"_addPrecisionToSource",value:function(e){var t=this._renderer.getMaxFloatPrecision(),n="mediump";return we.isMobile()&&"highp"===t&&(n="highp"),"precision ".concat(n," float;\n").concat(e)}},{key:"_compile",value:function(){var e=this._renderer.getContext(),t=this._compileShader(e.VERTEX_SHADER,this._vertexSource);this._vertexShader=t;var n=this._addPrecisionToSource(this._fragmentSource),i=this._compileShader(e.FRAGMENT_SHADER,n);this._fragmentShader=i;var r=e.createProgram();if(r)if(e.attachShader(r,t),e.attachShader(r,i),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))this._program=r;else{var o=e.getProgramInfoLog(r);e.isContextLost()&&(o="WebGL context lost"),e.deleteProgram(r),Re.error(this.constructor.name,"WebGL program linking error: ".concat(o))}}},{key:"_compileShader",value:function(e,t){var n=this._renderer.getContext(),i=n.createShader(e);if(!i)throw new Error("Cannot create shared: ".concat(JSON.stringify(e)));if(n.shaderSource(i,t),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS)){var r=n.getShaderInfoLog(i);n.isContextLost()&&(r="WebGL context lost"),n.deleteShader(i),Re.error(this.constructor.name,"WebGL shader compilation error: ".concat(r))}return i}},{key:"setUniform",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[e].value=t,n&&this.syncUniform(e)}},{key:"setUniforms",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object.keys(e).forEach((function(i){t._uniforms[i].value=e[i],n&&t.syncUniform(i)}))}},{key:"getUniforms",value:function(){return this._uniforms}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getAttributeLocations",value:function(){return this._attributeLocations}},{key:"getProgram",value:function(){return this._program}},{key:"dispose",value:function(){var e=this._renderer.getContext();e.deleteProgram(this._program),e.deleteShader(this._vertexShader),e.deleteShader(this._fragmentShader),this._renderer.off("context",this._onContextChange)}}]),e}()})),_n=M((function(){Wt="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"})),bn=M((function(){Vt="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"})),xn=M((function(){se(),Zt(),vn(),_n(),bn(),Gt=new _t,qt={vertexSource:Vt,fragmentSource:Wt,uniforms:{u_image:{type:"sampler2d",value:0},u_projMatrix:{type:"mat3",value:Gt.toArray()}},attributes:["a_position","a_texCoord","a_color"]},Yt=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qt.vertexSource,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qt.fragmentSource;return(0,_.Z)(this,n),t.call(this,e,i,r,qt.uniforms,qt.attributes)}return(0,b.Z)(n)}(jt)})),kn=M((function(){vn(),xn()})),wn=M((function(){W(),gn(),se(),yn(),Zt(),kn(),Ve(),Xt=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.Z)(this,n),(e=t.call(this,i,r))._initOptions(i),e}return(0,b.Z)(n,[{key:"_initOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=qt.uniforms,this._attributes=qt.attributes,this._vertexSource=qt.vertexSource,this._fragmentSource=qt.fragmentSource,this._initUniforms(),(0,f.Z)((0,p.Z)(n.prototype),"_initOptions",this).call(this,e)}},{key:"_initUniforms",value:function(){for(var e in this._uniforms={},this._availableUniforms){var t=this._availableUniforms[e];this._uniforms[e]={type:t.type,value:t.default||null}}for(var n in this.availableOptions){var i=this.availableOptions[n];i.uniformType?this._uniforms["u_".concat(n)]={type:i.uniformType,value:i.default||null}:Re.trace(this.constructor.name,"Option `".concat(n,"` is missing a `uniformType`!"))}}},{key:"setOption",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,f.Z)((0,p.Z)(n.prototype),"setOption",this).call(this,e,t,i);var r=t,o=this.availableOptions[e];if(o.uniformType){var a="u_".concat(e);switch(o.type){case"color":"4f"===o.uniformType?r=t.toGLColor():"3f"===o.uniformType&&(r=t.toRGBGLColor());break;case"vector2":r=[t.x,t.y];break;case"color-matrix":r=[t.a,t.b,t.c,t.d,t.f,t.g,t.h,t.i,t.k,t.l,t.m,t.n,t.p,t.q,t.r,t.s];var s=[t.e,t.j,t.o,t.t];this._uniforms["".concat(a,"_vec")]={value:s,type:"4f"}}this.setUniform(a,r)}}},{key:"setUniform",value:,{key:"setUniforms",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object.entries(e).forEach((function(e){var i=(0,m.Z)(e,2),r=i[0],o=i[1];t._uniforms[r].value=o,n&&t.syncUniform(r)}))}},{key:"syncUniform",value:,{key:"syncUniforms",value:,{key:"getShaderForRenderer",value:function(e){var t=e.id;this._shaders||(this._shaders=[]);var n=this._shaders[t];return n||(n=new jt(e,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[t]=n),n}},{key:"apply",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];fe(e)?this._applyWebGL(e,t,n,i):this._applyCanvas(e,t,n,i)}},{key:"_applyWebGL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.getContext(),o=this.getShaderForRenderer(e);e.setRenderTarget(n),i&&n.clear(),e.setShader(o);var a=e.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",a),o.syncUniforms(),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.getTexture()),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)}},{key:"_applyCanvas",value:function(e,t,n){var i=t.getCanvas(),r=n.getContext();Re.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),r.clearRect(0,0,i.width,i.height),r.drawImage(i,0,0)}},{key:"dispose",value:,{key:"_blurImage",value:function(e,t,n){var i=e.getCanvas(),o=Math.min(1,10/(n*Math.min(i.width,i.height))),a=we.createCanvas();a.width=Math.round(i.width*o),a.height=Math.round(i.height*o);var s=a.getContext("2d");s.drawImage(i,0,0,i.width,i.height,0,0,a.width,a.height);var l=n*Math.min(a.width,a.height),u=s.getImageData(0,0,a.width,a.height);!function(e,t,n,i,r,o){if(!(isNaN(o)||o<1)){o|=0;var a,s,l,u,c,h,d,f,p,g,m,y,v,_,b,x,k,w,S,C,T,E,D,I,R,O=e.data,F=o+o+1,A=i-1,P=r-1,Z=o+1,M=Z*(Z+1)/2,z=new Bt,B=z;for(l=1;l<F;l++)B=B.next=new Bt,l==Z&&(R=B);B.next=z;var L=null,U=null;d=h=0;var N=Ct[o],H=Tt[o];for(s=0;s<r;s++){for(x=k=w=S=f=p=g=m=0,y=Z*(C=O[h]),v=Z*(T=O[h+1]),_=Z*(E=O[h+2]),b=Z*(D=O[h+3]),f+=M*C,p+=M*T,g+=M*E,m+=M*D,B=z,l=0;l<Z;l++)B.r=C,B.g=T,B.b=E,B.a=D,B=B.next;for(l=1;l<Z;l++)u=h+((A<l?A:l)<<2),f+=(B.r=C=O[u])*(I=Z-l),p+=(B.g=T=O[u+1])*I,g+=(B.b=E=O[u+2])*I,m+=(B.a=D=O[u+3])*I,x+=C,k+=T,w+=E,S+=D,B=B.next;for(L=z,U=R,a=0;a<i;a++)O[h+3]=D=m*N>>H,0!==D?(D=255/D,O[h]=(f*N>>H)*D,O[h+1]=(p*N>>H)*D,O[h+2]=(g*N>>H)*D):O[h]=O[h+1]=O[h+2]=0,f-=y,p-=v,g-=_,m-=b,y-=L.r,v-=L.g,_-=L.b,b-=L.a,u=d+((u=a+o+1)<A?u:A)<<2,f+=x+=L.r=O[u],p+=k+=L.g=O[u+1],g+=w+=L.b=O[u+2],m+=S+=L.a=O[u+3],L=L.next,y+=C=U.r,v+=T=U.g,_+=E=U.b,b+=D=U.a,x-=C,k-=T,w-=E,S-=D,U=U.next,h+=4;d+=i}for(a=0;a<i;a++){for(k=w=S=x=p=g=m=f=0,y=Z*(C=O[h=a<<2]),v=Z*(T=O[h+1]),_=Z*(E=O[h+2]),b=Z*(D=O[h+3]),f+=M*C,p+=M*T,g+=M*E,m+=M*D,B=z,l=0;l<Z;l++)B.r=C,B.g=T,B.b=E,B.a=D,B=B.next;for(c=i,l=1;l<=o;l++)h=c+a<<2,f+=(B.r=C=O[h])*(I=Z-l),p+=(B.g=T=O[h+1])*I,g+=(B.b=E=O[h+2])*I,m+=(B.a=D=O[h+3])*I,x+=C,k+=T,w+=E,S+=D,B=B.next,l<P&&(c+=i);for(h=a,L=z,U=R,s=0;s<r;s++)O[3+(u=h<<2)]=D=m*N>>H,D>0?(D=255/D,O[u]=f*N>>H,O[u+1]=p*N>>H,O[u+2]=g*N>>H):O[u]=O[u+1]=O[u+2]=0,f-=y,p-=v,g-=_,m-=b,y-=L.r,v-=L.g,_-=L.b,b-=L.a,u=a+((u=s+Z)<P?u:P)*i<<2,f+=x+=L.r=O[u],p+=k+=L.g=O[u+1],g+=w+=L.b=O[u+2],m+=S+=L.a=O[u+3],L=L.next,y+=C=U.r,v+=T=U.g,_+=E=U.b,b+=D=U.a,x-=C,k-=T,w-=E,S-=D,U=U.next,h+=i}}}(u,0,0,a.width,a.height,l),s.putImageData(u,0,0),t.getContext().drawImage(a,0,0,a.width,a.height,0,0,i.width,i.height),r(a)}}]),n}(Ht)})),Sn=M((function(){Kt="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"})),Cn=M((function(){wn(),Sn(),Jt=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=Kt,e}return(0,b.Z)(n)}(Xt)})),Tn=M((function(){Qt="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"})),En=M((function(){Zt(),wn(),Tn(),$t=Q.OptionType,en=Q.UniformType,tn=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._fragmentSource=Qt,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=this._options.color,s=r.getImageData(0,0,i.width,i.height),l=o.getImageData(0,0,i.width,i.height),u=i.width*i.height,c=new ct,h=new ct,d=0;d<4*u;d+=4){c.set(s.data[d]/255,s.data[d+1]/255,s.data[d+2]/255,s.data[d+3]/255),h.set(l.data[d]/255,l.data[d+1]/255,l.data[d+2]/255,l.data[d+3]/255);var f=h.r+c.a*(c.r-h.r);l.data[d]=255*(f+c.a*(a.r-f));var p=h.g+c.a*(c.g-h.g);l.data[d+1]=255*(p+c.a*(a.g-p));var g=h.b+c.a*(c.b-h.b);l.data[d+2]=255*(g+c.a*(a.b-g))}o.putImageData(l,0,0)}}]),n}(Xt),tn.prototype.availableOptions={color:{type:$t.COLOR,default:ct.WHITE,uniformType:en.FLOAT4}},nn=tn})),Dn=M((function(){rn="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\nconst float EPSILON = 0.0000001;\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord); // Is premultiplied.\n    color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha.\n    vec4 newColor;\n    if (u_mode == 0) {\n        newColor = vec4(color.rgb, 1.0); // We use alpha 1.0 becaue color is not premultiplied.\n        newColor *= color.a; // Premultiply the result\n    } else if (u_mode == 1) {\n        newColor = vec4(u_color.rgb, 1.0); // Use alpha 1.0 because it is not premultiplied.\n        newColor *= color.a * u_color.a; // Changed alpha and premultiplied the result.\n    } else if (u_mode == 2) {\n        float luminance = dot(color.rgb, W); // Convert to color to gray value.\n        newColor = vec4(vec3(luminance) * u_color.rgb, 1.0); // Colorize and with alpha 1.0 because it is not premultiplied.\n        newColor *= color.a * u_color.a; // Changed alpha and premultiplied the result.\n    }\n    gl_FragColor = newColor;\n}"})),In=M((function(){Zt(),wn(),Dn(),on=Q.OptionType,an=Q.UniformType,sn=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._fragmentSource=rn,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options,l=s.mode,u=s.color,c=u.r,h=u.g,d=u.b,f=u.a,p=[.2125,.7154,.0721];switch(l){case sn.MODES.SOLID:for(var g=0;g<i.width*i.height;g++){var m=4*g;a.data[m]+=(255*c-a.data[m])*f,a.data[m+1]+=(255*h-a.data[m+1])*f,a.data[m+2]+=(255*d-a.data[m+2])*f}break;case sn.MODES.COLORIZED:for(var y=0;y<i.width*i.height;y++){var v=4*y,_=a.data[v]/255*p[0]+a.data[v+1]/255*p[1]+a.data[v+2]/255*p[2],b=new ct(_*c,_*h,_*d);a.data[v]+=(255*b.r-a.data[v])*f,a.data[v+1]+=(255*b.g-a.data[v+1])*f,a.data[v+2]+=(255*b.b-a.data[v+2])*f}}o.putImageData(a,0,0)}}]),n}(Xt),sn.MODES={NONE:0,SOLID:1,COLORIZED:2},sn.prototype.availableOptions={color:{type:on.COLOR,default:ct.WHITE,uniformType:an.FLOAT4},mode:{type:on.NUMBER,default:sn.MODES.NONE,uniformType:an.INT}},ln=sn})),Rn=M((function(){un="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"})),On=M((function(){Zt(),wn(),Rn(),cn=Q.OptionType,hn=Q.UniformType,dn=1e-6,fn=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._fragmentSource=un,e._lastImage=null,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=this._options.overlayTexture.getRenderTarget().getContext(),r=t.getCanvas(),o=t.getContext(),a=n.getContext(),s=o.getImageData(0,0,r.width,r.height),l=i.getImageData(0,0,r.width,r.height),u=this._options,c=u.blendMode,h=u.alpha,d=new ct,f=new ct,p=new ct,g=0;g<r.width*r.height*4;g+=4){d.set(s.data[g]/255,s.data[g+1]/255,s.data[g+2]/255,s.data[g+3]/255),f.set(l.data[g]/255,l.data[g+1]/255,l.data[g+2]/255,l.data[g+3]/255);var m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,x=void 0,k=void 0,w=void 0,S=void 0;switch(c){case fn.BLEND_MODES.NORMAL:p.set(d.r+f.a*h*(f.r-d.r),d.g+f.a*h*(f.g-d.g),d.b+f.a*h*(f.b-d.b),d.a);break;case fn.BLEND_MODES.OVERLAY:m=1-2*(1-d.r)*(1-f.r),y=2*d.r*f.r,v=m+(d.r<.5?1:0)*(y-m),_=1-2*(1-d.g)*(1-f.g),b=2*d.g*f.g,x=_+(d.g<.5?1:0)*(b-_),k=1-2*(1-d.b)*(1-f.b),w=2*d.b*f.b,S=k+(d.b<.5?1:0)*(w-k),p.set(d.r+f.a*h*(v-d.r),d.g+f.a*h*(x-d.g),d.b+f.a*h*(S-d.b),d.a);break;case fn.BLEND_MODES.HARD_LIGHT:m=1-2*(1-f.r)*(1-d.r),y=2*f.r*d.r,v=m+(f.r<.5?1:0)*(y-m),_=1-2*(1-f.g)*(1-d.g),b=2*f.g*d.g,x=_+(f.g<.5?1:0)*(b-_),k=1-2*(1-f.b)*(1-d.b),w=2*f.b*d.b,S=k+(f.b<.5?1:0)*(w-k),p.set(d.r+f.a*h*(v-d.r),d.g+f.a*h*(x-d.g),d.b+f.a*h*(S-d.b),d.a);break;case fn.BLEND_MODES.SOFT_LIGHT:m=2*d.r*(1-f.r)+(2*f.r-1)*Math.sqrt(d.r),y=2*d.r*f.r+d.r*d.r*(1-2*f.r),v=m+(f.r<.5?1:0)*(y-m),_=2*d.g*(1-f.g)+(2*f.g-1)*Math.sqrt(d.g),b=2*d.g*f.g+d.g*d.g*(1-2*f.g),x=_+(f.g<.5?1:0)*(b-_),k=2*d.b*(1-f.b)+(2*f.b-1)*Math.sqrt(d.b),w=2*d.b*f.b+d.b*d.b*(1-2*f.b),S=k+(f.b<.5?1:0)*(w-k),p.set(d.r+f.a*h*(v-d.r),d.g+f.a*h*(x-d.g),d.b+f.a*h*(S-d.b),d.a);break;case fn.BLEND_MODES.MULTIPLY:v=d.r*f.r,x=d.g*f.g,S=d.b*f.b,p.set(d.r+f.a*h*(v-d.r),d.g+f.a*h*(x-d.g),d.b+f.a*h*(S-d.b),d.a);break;case fn.BLEND_MODES.DARKEN:v=Math.min(d.r,f.r),x=Math.min(d.g,f.g),S=Math.min(d.b,f.b),p.set(d.r+f.a*h*(v-d.r),d.g+f.a*h*(x-d.g),d.b+f.a*h*(S-d.b),d.a);break;case fn.BLEND_MODES.LIGHTEN:v=Math.max(d.r,f.r),x=Math.max(d.g,f.g),S=Math.max(d.b,f.b),p.set(d.r+f.a*h*(v-d.r),d.g+f.a*h*(x-d.g),d.b+f.a*h*(S-d.b),d.a);break;case fn.BLEND_MODES.SCREEN:v=1-(1-d.r)*(1-f.r),x=1-(1-d.g)*(1-f.g),S=1-(1-d.b)*(1-f.b),p.set(d.r+f.a*h*(v-d.r),d.g+f.a*h*(x-d.g),d.b+f.a*h*(S-d.b),d.a);break;case fn.BLEND_MODES.COLOR_BURN:v=Math.max(0,Math.min(1,1-(1-d.r)/Math.max(f.r,dn))),x=Math.max(0,Math.min(1,1-(1-d.g)/Math.max(f.g,dn))),S=Math.max(0,Math.min(1,1-(1-d.b)/Math.max(f.b,dn))),p.set(d.r+f.a*h*(v-d.r),d.g+f.a*h*(x-d.g),d.b+f.a*h*(S-d.b),d.a)}s.data[g]=255*p.r,s.data[g+1]=255*p.g,s.data[g+2]=255*p.b,s.data[g+3]=255*p.a}a.putImageData(s,0,0)}}]),n}(Xt),fn.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},fn.prototype.availableOptions={blendMode:{type:cn.NUMBER,default:fn.BLEND_MODES.NORMAL,uniformType:hn.INT},overlayImage:{type:cn.NUMBER,required:!0,uniformType:hn.SAMPLER2D},overlayTexture:{type:cn.OBJECT,required:!0},alpha:{type:cn.NUMBER,default:1,uniformType:hn.FLOAT}},pn=fn})),Fn={};B(Fn,{ColorOverlayFilter:function(){return nn},OverlayFilter:function(){return pn},TintFilter:function(){return ln},UnpremultiplyFilter:function(){return Jt}});var An,Pn,Zn,Mn,zn,Bn,Ln,Un,Nn,Hn,jn,Wn,Vn,Gn,qn,Yn,Xn,Kn,Jn,Qn,$n,ei,ti,ni,ii,ri,oi,ai,si,li,ui,ci,hi,di,fi,pi,gi,mi,yi=M((),vi=M((function(){var e;Zt(),Ve(),e={},(0,g.Z)(e,1,"LINEAR"),(0,g.Z)(e,0,"NEAREST"),(0,g.Z)(e,2,"LINEAR_MIPMAP_NEAREST"),(0,g.Z)(e,3,"LINEAR_MIPMAP_LINEAR"),An=e,Pn=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i;return(0,_.Z)(this,n),(i=t.call(this))._renderers=[],i._glTextures={},i._dirty=!0,i._mipMapping=!1,i._glUnit=0,i._magFilter=Pn.DefaultMagFilter,i._minFilter=Pn.DefaultMinFilter,i._repeatX=0,i._repeatY=0,i._pixelRatio=1,i._loaded=!1,i._frame=new bt(0,0,100,100),i._onSourceLoaded=i._onSourceLoaded.bind((0,x.Z)(i)),i._source=e,i._loadSource(),i}return(0,b.Z)(n,[{key:"resizeTo",value:function(e){this._frame.width===e.x&&this._frame.height===e.y||(this._frame.width=e.x,this._frame.height=e.y,this._dirty=!0)}},{key:"_loadSource",value:function(){var e=this._source;if(e)return de.isCanvas(e)||e.complete?this._onSourceLoaded():void(e.addEventListener&&e.addEventListener("load",this._onSourceLoaded))}},{key:"_onSourceLoaded",value:,{key:"_updateGLFilters",value:function(){if(this._source){var e=new vt(this._source.width,this._source.height);we.isPowerOfTwo(e)?(Re.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=Pn.TrilinearFilter,this._mipMapping=!0):(this._minFilter=Pn.LinearFilter,this._mipMapping=!1)}}},{key:"update",value:function(){this._source&&(this._frame.width===this._source.width&&this._frame.height===this._source.height||(this._frame=new bt(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update"))}},{key:"getRenderers",value:function(){return(0,v.Z)(this._renderers)}},{key:"getGLFilter",value:function(e,t){switch(t){case"min":return e[An[this._minFilter]];case"mag":return e[An[this._magFilter]]}}},{key:"isLoaded",value:function(){return this._loaded}},{key:"setLoaded",value:function(e){this._loaded=e}},{key:"getSource",value:function(){return this._source}},{key:"setSource",value:function(e){this._source=e}},{key:"getGLTextureForRenderer",value:,{key:"setGLTextureForRenderer",value:function(e,t){this._renderers[t.id]=t,this._glTextures[t.id]=e}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(e){this._frame=e}},{key:"getDimensions",value:function(){return new vt(this._frame.width,this._frame.height)}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e}},{key:"getGLUnit",value:function(){return this._glUnit}},{key:"setGLUnit",value:function(e){this._glUnit=e}},{key:"setMinFilter",value:function(e){this._minFilter=e}},{key:"getMinFilter",value:function(){return this._minFilter}},{key:"setMagFilter",value:function(e){this._magFilter=e}},{key:"getMagFilter",value:function(){return this._magFilter}},{key:"setRepeatX",value:function(e){this._repeatX=e}},{key:"getRepeatX",value:function(){return this._repeatX}},{key:"setRepeatY",value:function(e){this._repeatY=e}},{key:"getRepeatY",value:function(){return this._repeatY}},{key:"getGLRepeat",value:function(e,t){switch("x"===t?this.getRepeatX():this.getRepeatY()){case 0:return e.CLAMP_TO_EDGE;case 1:return e.REPEAT;case 2:return e.MIRRORED_REPEAT;default:return 0}}},{key:"isDirty",value:function(){return this._dirty}},{key:"setDirty",value:function(e){this._dirty=e}},{key:"disposeGLTextures",value:function(){var e=this;this._renderers.forEach(()}},{key:"disposeGLTexturesForRenderer",value:function(e){this._glTextures[e.id]&&(e.getContext().deleteTexture(this._glTextures[e.id]),delete this._glTextures[e.id],this._renderers[e.id]||delete this._renderers[e.id])}},{key:"isMipMappingEnabled",value:function(){return this._mipMapping}},{key:"setMipMappingEnabled",value:function(e){this._mipMapping=e}},{key:"dispose",value:]),n}(dt),(Zn=Pn).NearestFilter=0,Zn.LinearFilter=1,Zn.BilinearFilter=2,Zn.TrilinearFilter=3,Zn.DefaultMagFilter=1,Zn.DefaultMinFilter=1,Zn.Repeat=1,Zn._id=0})),_i=M((function(){Zt(),vi(),Ve(),Mn=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:de.createCanvas(),o=arguments.length>4?arguments[4]:void 0;(0,_.Z)(this,e),this._width=t,this._height=n,this._pixelRatio=i,this._baseTexture=new Zn,this._canvas=r;var a=o||this._canvas.getContext("2d");if(!a)throw new Error("Cannot get canvas context");this._context=a,this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filters:[]}]}return(0,b.Z)(e,[{key:"clear",value:function(){var e=this._context;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"resizeTo",value:function(e){this._baseTexture.resizeTo(e),this._width!==e.x&&(this._width=e.x,this._canvas.width=this._width*this._pixelRatio),this._height!==e.y&&(this._height=e.y,this._canvas.height=this._height*this._pixelRatio)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getContext",value:function(){return this._context}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e}},{key:"getDimensions",value:function(){return new vt(this._width,this._height)}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:]),e}()})),bi=M((function(){Zt(),_i(),zn=function(){function e(t){(0,_.Z)(this,e),this._renderer=t,this._filterStack=[{renderTarget:t.getCurrentRenderTarget(),filters:[]}],this._textures=[],this._textureFrame=new bt(0,0,t.getWidth(),t.getHeight())}return(0,b.Z)(e,[{key:"resizeTo",value:function(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._textures.forEach((function(t){return t.resizeTo(e)}))}},{key:"pushFilters",value:function(e,t){this._currentFrame=e.getBounds();var n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n),this._filterStack.push({renderTarget:n,filters:t}),n.clear()}},{key:"popFilters",value:function(){var e=this._filterStack.pop();if(e){var t=e.filters,n=e.renderTarget,i=this._filterStack[this._filterStack.length-1].renderTarget;if(1===t.length)t[0].apply(this._renderer,n,i),this._textures.push(n);else this._applyFilters(t,n,i);return t}}},{key:"_applyFilters",value:function(e,t,n){var i=this,r=t,o=this._getOrCreateRenderTarget(!0),a=e[e.length-1];e.forEach((function(e){if(e===a)e.apply(i._renderer,r,n);else{e.apply(i._renderer,r,o);var t=r;r=o,o=t}})),this._textures.push(r),this._textures.push(o)}},{key:"_getOrCreateRenderTarget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._textures.pop();return t||(t=new Mn(this._textureFrame.width,this._textureFrame.height,1)),e&&t.clear(),t}},{key:"setFilterStack",value:function(e){this._filterStack=e}},{key:"dispose",value:function(){}}]),e}()})),xi=z((function(e,t){(.call(e)})),ki=M((function(){Zt(),Bn="undefined"!==typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):xi(),Ln=function(){function e(t){var n=this;(0,_.Z)(this,e),this._context=t,this._tracking=!1;var i=this,r=function(e){"function"===typeof t[e]?n[e]=function(){for(var n=t[e],r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];if(!i._tracking)return n.apply(t,o);var s=Bn(),l=n.apply(t,o),u=Bn()-s,c={functionName:e,arguments:o,duration:u};return i._trackedCalls.push(c),l}:n._makePropertyWrapper(e)};for(var o in t)r(o)}return(0,b.Z)(e,[{key:"_makePropertyWrapper",value:function(e){if(-1===["_context","_trackedCalls","_tracking"].indexOf(e)){var t=this._context;this.__defineGetter__(e,(function(){return t[e]})),this.__defineSetter__(e,(function(n){t[e]=n}))}}},{key:"startFrame",value:,{key:"endFrame",value:function(){var e="Rendering";Re.log(e,"Frame rendering results:"),Re.log(e,"Context calls: ".concat(this._trackedCalls.length));var t={};this._trackedCalls.forEach((function(e){var n=e.functionName,i=e.duration;t[n]=t[n]||{totalDuration:0,calls:0},t[n].totalDuration+=i,t[n].calls++}));var n=[];for(var i in t){var r=t[i];r.averageDuration=r.totalDuration/r.calls,n.push({functionName:i,data:r})}n.sort((),(n=n.slice(0,3)).forEach((function(t){Re.log(e,"".concat(t.functionName,": ").concat(t.data.calls," calls, ").concat(t.data.totalDuration.toFixed(2),"ms"))}))}}]),e}(),Un=Ln})),wi=M((function(){Zt(),Nn=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,o=arguments.length>2?arguments[2]:void 0;return(0,_.Z)(this,n),(e=t.call(this))._maxTextureSize=null,e._options=(0,C.Z)((0,C.Z)({debug:!1,transparent:!1,clearColor:ct.TRANSPARENT},o),{},{pixelRatio:1}),e.setMaxListeners(0),e._width=i,e._height=r,e._dimensions=new vt(e._width,e._height),e._maxTextureSize=null,e._pixelRatio=e._options.pixelRatio,e._canvas=e._options.canvas,e._clearColor=e._options.transparent?ct.TRANSPARENT:e._options.clearColor||ct.BLACK,e}return(0,b.Z)(n,[{key:"setCanvas",value:function(e){var t=this._canvas;this._canvas=e,t!==e&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new vt(this._width,this._height))}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_onBeforeContext",value:function(){}},{key:"resizeTo",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._width=e.x*this._pixelRatio,this._height=e.y*this._pixelRatio,t&&this._canvas&&(this._canvas.width=this._width,this._canvas.height=this._height,"style"in this._canvas&&(this._canvas.style.width="".concat(this._width/this._pixelRatio,"px"),this._canvas.style.height="".concat(this._height/this._pixelRatio,"px"))),this._dimensions=e.clone()}},{key:"_createContext",value:function(){Re.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}},{key:"_setupContext",value:function(){Re.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}},{key:"render",value:,{key:"getMaxDimensions",value:function(){return null}},{key:"getContext",value:function(){return this._context}},{key:"getWidth",value:function(){return this._dimensions.x}},{key:"getHeight",value:function(){return this._dimensions.y}},{key:"getDimensions",value:function(){return this._dimensions}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:,{key:"getMaxTextureSize",value:function(){return this._maxTextureSize}},{key:"getFilterManager",value:function(){return this._filterManager}},{key:"setFilterManager",value:function(e){this._filterManager=e}},{key:"setClearColor",value:function(e){this._clearColor=e}},{key:"getClearColor",value:function(){return this._clearColor}},{key:"isOfType",value:,{key:"dispose",value:]),n}(dt)})),Si=M((function(){W(),Mt(),Zt(),bi(),_i(),ki(),Ve(),wi(),Hn=Q.RendererType,jn=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,o=arguments.length>2?arguments[2]:void 0;return(0,_.Z)(this,n),(e=t.call(this,i,r,(0,C.Z)({},o))).id=0,e.setCanvas((null==o?void 0:o.canvas)||de.createCanvas()),e._type=Hn.CANVAS,e}return(0,b.Z)(n,[{key:"_createContext",value:function(){var e=this._canvas.getContext("2d");if(e)return this._options.debug&&(e=new Un(e)),this.id=jn.contextId++,this._context=e,this.emit("context",e),e}},{key:"_setupContext",value:function(){var e=this._context;"imageSmoothingEnabled"in e?e.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach((),this._defaultRenderTarget=new Mn(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new zn(this)}},{key:"render",value:function(e){var t=this._renderTarget.getContext(),n=e.getParent();e.setParent(new wt),e.updateTransform(),n&&e.setParent(n),t.setTransform(1,0,0,1,0,0),t.globalAlpha=1;var i=this._canvas,r=i.width,o=i.height;t.clearRect(0,0,r,o),0!==this._clearColor.a&&(t.save(),t.fillStyle=this._clearColor.toRGBA(),t.fillRect(0,0,r,o),t.restore()),this.renderDisplayObject(e,this._renderTarget)}},{key:"renderDisplayObject",value:function(e,t){var n=this._renderTarget;this._filterManager.setFilterStack(t.getFilterStack()),this.setRenderTarget(t),e.renderCanvas(this),this.setRenderTarget(n)}},{key:"getCurrentRenderTarget",value:function(){return this._renderTarget}},{key:"setRenderTarget",value:function(e){this._renderTarget=e}},{key:"getContext",value:function(){return this._renderTarget.getContext()}},{key:"dispose",value:]),n}(Nn),(Wn=jn).contextId=0,Wn.type=Hn.CANVAS})),Ci=M((function(){Vn=function(e){if("undefined"!==typeof window){var t=window.WebGLDebugUtils;if(t){e=t.makeDebugContext(e,null,(function(e,n){console.error("gl.".concat(e,"(").concat(t.glFunctionArgsToString(e,n),")"))}))}}return e}})),Ti=M((function(){Gn=function(){function e(t){(0,_.Z)(this,e),this.vertices=new Float32Array([0,0,100,0,100,100,0,100]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.vertexBuffer=null,this.indexBuffer=null,this.gl=t,this.initBuffers(),this.uploadBuffers()}return(0,b.Z)(e,[{key:"map",value:function(e,t){var n=t.x,i=t.y;this.uvs[2]=t.width/e.width,this.uvs[4]=this.uvs[2],this.uvs[5]=t.height/e.height,this.uvs[7]=this.uvs[5],this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+t.width,this.vertices[3]=i,this.vertices[4]=this.vertices[2],this.vertices[5]=i+t.height,this.vertices[6]=n,this.vertices[7]=this.vertices[5],this.uploadBuffers()}},{key:"getVertexBuffer",value:function(){return this.vertexBuffer}},{key:"getIndexBuffer",value:function(){return this.indexBuffer}},{key:"dispose",value:function(){this.cleanBuffer()}},{key:"initBuffers",value:function(){var e=this.gl;this.cleanBuffer(),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,128,e.DYNAMIC_DRAW),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)}},{key:"uploadBuffers",value:function(){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),e.bufferSubData(e.ARRAY_BUFFER,32,this.uvs),e.bufferSubData(e.ARRAY_BUFFER,64,this.colors)}},{key:"cleanBuffer",value:]),e}()})),Ei=M((function(){Zt(),vi(),qn=function(){function e(t,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,_.Z)(this,e),this._renderer=t,this._gl=t.getContext(),this._width=n,this._height=i,this._frame=null,this._pixelRatio=r,this._projectionMatrix=new _t,this._mipMapping=!1,this._baseTexture=new Zn;var a=this._baseTexture.getFrame();a.width=n,a.height=i,this._baseTexture.setPixelRatio(r),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=o,this._filterStack=[{renderTarget:this,filters:[]}],o||this._initFrameBuffer()}return(0,b.Z)(e,[{key:"resizeTo",value:function(e){this._width=0|e.x,this._height=0|e.y,this._baseTexture.resizeTo(e),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}},{key:"_getMinFilter",value:function(){var e=Zn.DefaultMinFilter;return this._mipMapping&&(e=Zn.TrilinearFilter),e}},{key:"_getMagFilter",value:function(){return Zn.DefaultMagFilter}},{key:"_resizeTexture",value:function(){var e=this._gl,t=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._texture&&this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this._renderer._options.debug&&ft.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e);var i=new vt(this._width,this._height);we.isPowerOfTwo(i)?(Re.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}},{key:"activate",value:function(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),e.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),e.disable(e.STENCIL_TEST)}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct.TRANSPARENT,t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._renderer._options.debug&&ft.checkFramebufferStatus("WebGLRenderTarget#clear",t),t.clearColor.apply(t,e.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)}},{key:"_calculateProjectionMatrix",value:function(){var e=this._projectionMatrix;e.reset();var t=this._frame||new bt(0,0,this._width,this._height),n=t.x,i=t.y;this._isRoot?(e.a=1/this._width*2,e.d=-1/this._height*2,e.tx=-1-n*e.a,e.ty=1-i*e.d):(e.a=1/this._width*2,e.d=1/this._height*2,e.tx=-1-n*e.a,e.ty=-1-i*e.d)}},{key:"_initFrameBuffer",value:function(){var e=this._gl;this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._framebuffer=e.createFramebuffer(),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._texture&&this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new vt(this._width,this._height)),this._renderer._options.debug&&ft.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e)}},{key:"getProjectionMatrix",value:function(){return this._projectionMatrix}},{key:"getTexture",value:function(){return this._texture}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(e){this._frame=e}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:,{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){var e=this._gl;this._baseTexture.dispose(),this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null)}}]),e}()})),Di=M((function(){yi(),Zt(),Ti(),Ve(),Ei(),Yn=function(){function e(t){(0,_.Z)(this,e),this._renderer=t,this._filterStack=[],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new bt(0,0,t.getWidth(),t.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}return(0,b.Z)(e,[{key:"resizeTo",value:function(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._renderTargets.forEach((function(t){return t.resizeTo(e)}))}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"setFilterStack",value:function(e){this._filterStack=e}},{key:"_getOrCreateRenderTarget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._renderTargets.pop();return t||(t=new qn(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),this._currentFrame&&t.setFrame(this._currentFrame),e&&t.clear(),t}},{key:"pushFilters",value:function(e,t){var n=e.getBounds();this._currentFrame=n;var i=e.getFilterRectangle();i.width>0&&i.height>0&&(this._currentFrame=i);var r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),t[0]instanceof Jt?r.clear(this._renderer.getClearColor()):r.clear(),this._filterStack.push({renderTarget:r,filters:t})}},{key:"popFilters",value:function(){var e=this._filterStack.pop();if(e){var t=e.filters,n=e.renderTarget,i=this._filterStack[this._filterStack.length-1].renderTarget,r=n.getFrame();r&&this._quad.map(this._textureFrame,r);var o=t[0].getShaderForRenderer(this._renderer),a=this._quad.getVertexBuffer(),s=this._quad.getIndexBuffer(),l=this._renderer.getContext();l.bindBuffer(l.ARRAY_BUFFER,a),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,s);var u=o.getAttributeLocations();return l.vertexAttribPointer(u.a_position,2,l.FLOAT,!1,0,0),l.vertexAttribPointer(u.a_texCoord,2,l.FLOAT,!1,0,32),l.vertexAttribPointer(u.a_color,4,l.FLOAT,!1,0,64),this._renderer.updateTexture(n.getBaseTexture(),!1),1===t.length?(t[0].apply(this._renderer,n,i),this._renderTargets.push(n)):this._applyFilters(t,n,i),t}}},{key:"_applyFilters",value:function(e,t,n){var i=this,r=t,o=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(o.getBaseTexture(),!1);var a=e[e.length-1];e.forEach((function(e){if(e===a)e.apply(i._renderer,r,n,!0);else{e.apply(i._renderer,r,o,!0);var t=r;r=o,o=t}})),this._renderTargets.push(r),this._renderTargets.push(o)}},{key:"_onContextChange",value:function(){this._renderTargets.length=0,fe(this._renderer)&&(this._quad&&this._quad.dispose(),this._quad=new Gn(this._renderer.getContext()))}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach((function(e){e.dispose()}))}}]),e}()})),Ii=z((function(e,t){var n=function e(){r i=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(,!1);var o=(performance||Date).now(),a=o,s=0,l=t(new e.Panel("FPS","#0ff","#002")),u=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:r,addPanel:t,showPanel:n,begin:end:update:domElement:r,setMode:n}};n.Panel="object"===typeof t&&(t.exports=n)})),Ri=M((function(){Xn=U(Ii()),Kn=function(){function e(t){(0,_.Z)(this,e),this._context=t,this._domAvailable="undefined"!==typeof document,this._hookIntoContext(),this._textures={},this._framebuffers={},this._programs={},this._shaders={},this._buffers={},this._boundTexture=null,this._id=0,this._enums={},this._setupStats(),this._createEnumMap(),this._updateMemoryStats=this._updateMemoryStats.bind(this),this._updateMemoryStats()}return(0,b.Z)(e,[{key:"_createEnumMap",value:function(){for(var e in this._context){var t=this._context[e];"number"===typeof t&&(this._enums[t]=e)}}},{key:"_enumValueToString",value:function(e){var t=this._enums[e];return"undefined"===typeof t?e:t}},{key:"_setupStats",value:function(){this._domAvailable&&(this._stats=new Xn.default,this._stats.showPanel(3),this._memPanel=this._stats.addPanel(new Xn.default.Panel("MB [WebGL]","#43ADEB","#282828")),this._texPanel=this._stats.addPanel(new Xn.default.Panel("Textures","#43ADEB","#282828")),this._bufPanel=this._stats.addPanel(new Xn.default.Panel("Buffers","#43ADEB","#282828")),this._fboPanel=this._stats.addPanel(new Xn.default.Panel("FBOs","#43ADEB","#282828")),this._prgPanel=this._stats.addPanel(new Xn.default.Panel("Programs","#43ADEB","#282828")),this._shdPanel=this._stats.addPanel(new Xn.default.Panel("Shaders","#43ADEB","#282828")))}},{key:"_updatePanel",value:function(e){if(this._domAvailable){switch(this._stats.begin(),e){case"tex":this._texPanel.update(this.getTexturesCount(),50);break;case"buf":this._bufPanel.update(this.getBuffersCount(),50);break;case"fbo":this._fboPanel.update(this.getFBOCount(),50);break;case"prg":this._prgPanel.update(this.getProgramCount(),50);break;case"shd":this._shdPanel.update(this.getShaderCount(),50)}this._stats.end()}}},{key:"getTexturesCount",value:function(){return Object.keys(this._textures).length}},{key:"getBuffersCount",value:function(){return Object.keys(this._buffers).length}},{key:"getFBOCount",value:function(){return Object.keys(this._framebuffers).length}},{key:"getProgramCount",value:function(){return Object.keys(this._programs).length}},{key:"getShaderCount",value:,{key:"_updateMemoryStats",value:function(){if(this._domAvailable){var e=this._getMemoryUsage()/1e3/1e3;this._memPanel.update(e,400),setTimeout(this._updateMemoryStats,1e3)}}},{key:"_getMemoryUsage",value:function(){var e=0;for(var t in this._textures)e+=this._textures[t].memory;for(var n in this._buffers)e+=this._buffers[n].memory;return e}},{key:"_hookIntoContext",value:function(){var e=this,t=function(t){"function"===typeof e._context[t]?e[t]=function(){for(var e=this._context[t],n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return this._trackGLCall(e,t,i)}:e._makePropertyWrapper(t)};for(var n in this._context)t(n)}},{key:"_makePropertyWrapper",value:function(e){if(-1===["_context"].indexOf(e)){var t=this._context;this.__defineGetter__(e,(function(){return t[e]})),this.__defineSetter__(e,(function(n){t[e]=n}))}}},{key:"_trackGLCall",value:function(e,t,n){var i;i=-1!==["texImage2D","bindTexture","createTexture","deleteTexture","createBuffer","bindBuffer","bufferData","deleteBuffer","createFramebuffer","deleteFramebuffer","createProgram","deleteProgram","createShader","deleteShader"].indexOf(t)?this["_".concat(t)](n):e.apply(this._context,n);var r=this._context.getError();if(0!==r){var o=n.join(", ");o.length>100&&(o="".concat(o.substr(0,100),"...")),console.error(new Error("WebGL Error ".concat(this._enumValueToString(r)," in ").concat(t,"(").concat(o,")")))}return i}},{key:"_createProgram",value:function(){var e=this._context.createProgram();return e._wmmId=this._id++,this._programs[e._wmmId]=e,this._updatePanel("prg"),e}},{key:"_deleteProgram",value:function(e){var t=(0,m.Z)(e,1)[0];t&&this._programs[t._wmmId]&&(delete this._programs[t._wmmId],this._context.deleteProgram(t),this._updatePanel("prg"))}},{key:"_createShader",value:function(e){var t=(0,m.Z)(e,1)[0],n=this._context.createShader(t);return n._wmmId=this._id++,this._shaders[n._wmmId]=n,this._updatePanel("shd"),n}},{key:"_deleteShader",value:function(e){var t=(0,m.Z)(e,1)[0];t&&this._shaders[t._wmmId]&&(delete this._shaders[t._wmmId],this._context.deleteShader(t),this._updatePanel("shd"))}},{key:"_createFramebuffer",value:function(){var e=this._context.createFramebuffer();return e._wmmId=this._id++,this._framebuffers[e._wmmId]=e,this._updatePanel("fbo"),e}},{key:"_deleteFramebuffer",value:function(e){var t=(0,m.Z)(e,1)[0];t&&this._framebuffers[t._wmmId]&&(delete this._framebuffers[t._wmmId],this._context.deleteFramebuffer(t),this._updatePanel("fbo"))}},{key:"_createBuffer",value:function(){var e=this._context.createBuffer();return e._wmmId=this._id++,this._buffers[e._wmmId]={buffer:e,memory:0},this._updatePanel("buf"),e}},{key:"_bindBuffer",value:function(e){var t=(0,m.Z)(e,2),n=t[0],i=t[1];this._context.bindBuffer(n,i),this._boundBuffer=i._wmmId}},{key:"_bufferData",value:function(e){var t,n=(0,m.Z)(e,3),i=n[0],r=n[1],o=n[2];this._context.bufferData(i,r,o),"number"===typeof r?t=r:"byteLength"in r?t=r.byteLength:"length"in r&&(t=r.length),this._buffers[this._boundBuffer].memory=t}},{key:"_deleteBuffer",value:function(e){var t=(0,m.Z)(e,1)[0];t&&this._buffers[t._wmmId]&&(delete this._buffers[t._wmmId],this._context.deleteBuffer(t),this._updatePanel("buf"))}},{key:"_createTexture",value:function(){var e=this._context.createTexture();return e._wmmId=this._id++,this._textures[e._wmmId]={texture:e,memory:0},this._updatePanel("tex"),e}},{key:"_deleteTexture",value:function(e){var t=(0,m.Z)(e,1)[0];t&&this._textures[t._wmmId]&&(delete this._textures[t._wmmId],this._context.deleteTexture(t),this._updatePanel("tex"))}},{key:"_bindTexture",value:function(e){var t=(0,m.Z)(e,2),n=t[0],i=t[1];this._context.bindTexture(n,i),this._boundTexture=i._wmmId}},{key:"_texImage2D",value:function(e){var t=(0,m.Z)(e,9),n=t[2],i=t[3],r=t[4],o=t[5],a=t[8];"undefined"===typeof a&&(a=o),this._context.texImage2D.apply(this._context,e);var s=this._calculateByteCountForTexture(n,i,r,a);this._textures[this._boundTexture].memory=s}},{key:"_calculateByteCountForTexture",value:function(e,t,n,i){if(null!==i){if(!("width"in i))return i.length;t=i.width,n=i.height}var r=1;switch(e){case this._context.ALPHA:r=1;break;case this._context.RGB:r=3;break;case this._context.RGBA:r=4}return t*n*r}}]),e}()})),Oi=M((function(){Jn=function(){function e(t){(0,_.Z)(this,e),this._renderer=t,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}return(0,b.Z)(e,[{key:"_onContextChange",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"flush",value:function(){}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),delete this._renderer}}]),e}()})),Fi=M((function(){Zt(),Oi(),Qn=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i;(0,_.Z)(this,n),(i=t.call(this,e))._vertexBuffer=null,i._indexBuffer=null,i._maxBatchSize=xt,i._vertices=new ArrayBuffer(4*xt*kt),i._positions=new Float32Array(i._vertices),i._colors=new Uint32Array(i._vertices),i._indices=new Uint16Array(6*xt);for(var r=0,o=0;r<6*xt;r+=6,o+=4)i._indices[r+0]=o+0,i._indices[r+1]=o+1,i._indices[r+2]=o+2,i._indices[r+3]=o+0,i._indices[r+4]=o+2,i._indices[r+5]=o+3;return i._sprites=[],i._currentBatchSize=0,i._onContextChange(),i}return(0,b.Z)(n,[{key:"render",value:function(e){var t=e.getTexture();if(t){var n=t.getFrame();t.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&this.flush();var i=t.getUVs();if(i){var r=this._currentBatchSize*kt;this._addVertexCoordinates(e,r,n),this._addTextureUVs(e,r,i),this._addColors(e,r),this._sprites[this._currentBatchSize]=e,this._currentBatchSize++}}}},{key:"_addColors",value:function(e,t){var n=this._colors,i=16777215+(255*e.getWorldAlpha()<<24);n[t+4]=n[t+9]=n[t+14]=n[t+19]=i}},{key:"_addTextureUVs",value:function(e,t,n){var i=this._positions,r=(0,m.Z)(n,4),o=r[0],a=r[1],s=r[2],l=r[3];i[t+2]=o.x,i[t+3]=o.y,i[t+7]=a.x,i[t+8]=a.y,i[t+12]=s.x,i[t+13]=s.y,i[t+17]=l.x,i[t+18]=l.y}},{key:"_addVertexCoordinates",value:function(e,t,n){for(var i=this._positions,r=e.getWorldTransform(),o=e.getAnchor(),a=r.rectangleToCoordinates(n,o),s=0;s<4;s++)i[t+5*s]=a[s].x,i[t+5*s+1]=a[s].y}},{key:"_onContextChange",value:function(){var e=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer&&(this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer=null),this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW)}},{key:"start",value:,{key:"flush",value:function(){var e,t=this._renderer,n=t.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*xt)n.bufferSubData(n.ARRAY_BUFFER,0,this._vertices);else{var i=this._positions.subarray(0,this._currentBatchSize*kt);n.bufferSubData(n.ARRAY_BUFFER,0,i)}for(var r=0,o=null,a=null,s=null,l=null,u=!1,c=null,h=0,d=0,f=this._currentBatchSize;d<f;d++){if(a=null==(e=(c=this._sprites[d]).getTexture())?void 0:e.getBaseTexture(),u=s!==(l=c.getShader()||this._shader),(o!==a||u)&&(o&&this._renderBatch(o,r,h),h=d,r=0,o=a,u)){s=l,t.setShader(s);var p=t.getCurrentRenderTarget().getProjectionMatrix().toArray();s.setUniform("u_projMatrix",p),s.syncUniforms(),n.activeTexture(n.TEXTURE0)}r++}o&&this._renderBatch(o,r,h),this._currentBatchSize=0,this._sprites=[]}}},{key:"_renderBatch",value:function(e,t,n){if(0!==t){var i=this._renderer,r=i.getContext(),o=e.getGLTextureForRenderer(i);o||(o=i.getOrCreateGLTexture(e)),e.isDirty()&&(i.updateTexture(e),e.setDirty(!1)),r.activeTexture(r.TEXTURE0+e.getGLUnit()),r.bindTexture(r.TEXTURE_2D,o);var a=6*t,s=6*n*2;r.drawElements(r.TRIANGLES,a,r.UNSIGNED_SHORT,s)}}},{key:"dispose",value:function(){var e=this._renderer.getContext();this._sprites.forEach((function(e){e.dispose()})),this._vertexBuffer&&(e.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(e.deleteBuffer(this._indexBuffer),this._indexBuffer=null),delete this._vertices,delete this._positions,delete this._colors,delete this._indices,(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this)}}]),n}(Jn)})),Ai=M((function(){Ci(),W(),se(),Mt(),Zt(),Di(),kn(),ki(),Ve(),Ei(),Ri(),wi(),Oi(),Fi(),$n=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,o=arguments.length>2?arguments[2]:void 0;return(0,_.Z)(this,n),(e=t.call(this,i,r,o)).type="webgl",e.maxTextureDimensions=null,e._type="webgl",e._onContextLost=e._onContextLost.bind((0,x.Z)(e)),e._onContextRestored=e._onContextRestored.bind((0,x.Z)(e)),e.setCanvas(e._options.canvas||de.createCanvas()),e.shaders={default:new Yt((0,x.Z)(e),void 0,void 0)},e.renderers={sprite:new Qn((0,x.Z)(e))},e}return(0,b.Z)(n,[{key:"_onContextLost",value:function(e){e.preventDefault(),Re.warn(this.constructor.name,"WebGL context has been lost - trying to restore."),this.emit("context-lost")}},{key:"_onContextCreationError",value:function(e){e.preventDefault(),Re.warn(this.constructor.name,"Failed to create WebGL context: ".concat(e.statusMessage||"Unknown error"))}},{key:"_onContextRestored",value:function(){Re.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._createContext(),this._setupContext(),this.emit("context-restored")}},{key:"_onBeforeContext",value:function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new Yn(this),this._currentObjectRenderer=new Jn(this)}},{key:"setShader",value:function(e){this._currentShader=e,this._context.useProgram(e.getProgram()),this._setAttributesForShader(e)}},{key:"setCanvas",value:function(e){this._canvas&&this._removeContextEventListeners(),(0,f.Z)((0,p.Z)(n.prototype),"setCanvas",this).call(this,e),this._addContextEventListeners()}},{key:"_addContextEventListeners",value:function(){pe(this._canvas)&&(this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError))}},{key:"_removeContextEventListeners",value:function(){pe(this._canvas)&&(this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError))}},{key:"_setAttributesForShader",value:function(e){if(this._canvas){var t=this._context,n=e.getAttributes(),i=e.getAttributeLocations();n.forEach(()}}},{key:"_createContext",value:function(){if(this._canvas){var e=de.glGet(this._canvas);return this._options.debug&&Vn(e),this._options.debug&&(e=new Un(e),e=new Kn(e)),this.id=$n.contextId++,this._context=e,this._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.emit("context",e),e}}},{key:"_setupContext",value:function(){var e=this._context;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new qn(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}},{key:"getContext",value:function(){return this._context}},{key:"_getMaxPrecision",value:function(){var e=this._context,t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);this._maxFloatPrecision=0!==(null==t?void 0:t.precision)?"highp":"mediump";var n=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT);this._maxIntPrecision=0!==(null==n?void 0:n.rangeMax)?"highp":"lowp"}},{key:"resizeTo",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,f.Z)((0,p.Z)(n.prototype),"resizeTo",this).call(this,e,t),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(e),this._context=de.glResize(this._context,e)}},{key:"setRenderTarget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=e,this._currentRenderTarget.activate()}},{key:"setObjectRenderer",value:function(e){this._currentObjectRenderer.stop(),this._currentObjectRenderer=e,this._currentObjectRenderer.start()}},{key:"render",value:function(e){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var t=e.getParent();e.setParent(new wt),e.updateTransform(),t&&e.setParent(t),this.renderDisplayObject(e,this._defaultRenderTarget)}},{key:"renderDisplayObject",value:function(e,t){this.setRenderTarget(t),this._filterManager.setFilterStack(t.getFilterStack()),e.renderWebGL(this),this._currentObjectRenderer.flush()}},{key:"clear",value:function(){var e=this._context;e.clearColor.apply(e,this._clearColor.toGLColor),e.clear(e.COLOR_BUFFER_BIT)}},{key:"save",value:,{key:"restore",value:function(e){this.setRenderTarget(e.renderTarget),this._filterManager.setFilterStack(e.filterStack),this._currentObjectRenderer=e.objectRenderer}},{key:"getOrCreateGLTexture",value:function(e){var t=this._context,n=e.getGLTextureForRenderer(this);return n||(n=t.createTexture(),e.setGLTextureForRenderer(n,this)),n}},{key:"updateTexture",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.getSource(),i=this._context,r=e.getGLUnit(),o=this.getOrCreateGLTexture(e);i.activeTexture(i.TEXTURE0+r),i.bindTexture(i.TEXTURE_2D,o),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t&&n&&de.glTexImage(i,n),e.isMipMappingEnabled()?i.generateMipmap(i.TEXTURE_2D):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e.getGLRepeat(i,"x")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e.getGLRepeat(i,"y"))),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,e.getGLFilter(i,"min")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e.getGLFilter(i,"mag")),i.activeTexture(i.TEXTURE0)}},{key:"getMaxDimensions",value:,{key:"getCurrentRenderTarget",value:function(){return this._currentRenderTarget}},{key:"getCurrentObjectRenderer",value:function(){return this._currentObjectRenderer}},{key:"getMaxFloatPrecision",value:function(){return this._maxFloatPrecision}},{key:"getMaxIntPrecision",value:function(){return this._maxIntPrecision}},{key:"dispose",value:function(){for(var e in this._canvas&&r(this._canvas),this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this.shaders)this.shaders[e].dispose(),delete this.shaders[e];this._removeContextEventListeners();var t=this._context.getExtension("WEBGL_lose_context");t&&t.loseContext()}}]),n}(Nn),(ei=$n).contextId=0})),Pi=M((function(){Ft(),ti=function(e,t,n){var i=(0,m.Z)(e,4),r=i[0],o=i[1],a=i[2],s=i[3];return r.x=t.x/n.width,r.y=t.y/n.height,o.x=(t.x+t.width)/n.width,o.y=t.y/n.height,a.x=(t.x+t.width)/n.width,a.y=(t.y+t.height)/n.height,s.x=t.x/n.width,s.y=(t.y+t.height)/n.height,e},ni={create:function(){return[new vt(0,0),new vt(1,0),new vt(1,1),new vt(0,1)]},updateViaFrames:ti}})),Zi=M((function(){Pi(),Zt(),vi(),ii=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i){var r;if((0,_.Z)(this,n),r=t.call(this),!(e instanceof Zn))throw new Error("`baseTexture` should be an instance of BaseTexture");return r._uvs=ni.create(),r._frame=i?i.clone():new bt(0,0,1,1),r._frameLocked=Boolean(i),r._onBaseTextureLoaded=r._onBaseTextureLoaded.bind((0,x.Z)(r)),r._onBaseTextureUpdated=r._onBaseTextureUpdated.bind((0,x.Z)(r)),r.setBaseTexture(e),r}return(0,b.Z)(n,[{key:"_onBaseTextureLoaded",value:function(){if(!this._frameLocked){var e=this._baseTexture.getFrame().clone();this.setFrame(e)}this._baseTexture.on("update",this._onBaseTextureUpdated)}},{key:"_onBaseTextureUpdated",value:function(){var e=this._baseTexture.getFrame(),t=e.width,n=e.height;this._frame.width=t,this._frame.height=n,this.emit("update")}},{key:"_updateUVs",value:function(){this._uvs=ni.updateViaFrames(this._uvs,this._frame,this._baseTexture.getFrame())}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"setBaseTexture",value:function(e){if(this._baseTexture=e,this._baseTexture.isLoaded()){var t=e.getFrame(),n=t.width,i=t.height;this._frameLocked||(this._frame=new bt(0,0,n,i)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:,{key:"getWidth",value:function(){return this._frame.width}},{key:"getHeight",value:function(){return this._frame.height}},{key:"getUVs",value:function(){return this._uvs}},{key:"getDimensions",value:,{key:"dispose",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this._baseTexture.dispose()}}],[{key:"fromImage",value:function(e){var t=new Zn(e);return new ii(t)}},{key:"fromCanvas",value:function(e){var t=new Zn(e);return new ii(t)}}]),n}(dt)})),Mi=M((function(){se(),Zt(),bi(),Di(),_i(),Ei(),vi(),Zi(),ri=function(e){return"webgl"===e._type},oi=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,_.Z)(this,n),(i=t.call(this,new Zn,new bt(0,0,r,o)))._loaded=!0,i._width=r,i._height=o,i._pixelRatio=a,i._renderer=e,i._setupFilterManager(),i._setupBuffer(),i.setBaseTexture(i._renderTarget.getBaseTexture()),i._updateUVs(),i}return(0,b.Z)(n,[{key:"_setupFilterManager",value:function(){this._filterManager&&this._filterManager.dispose(),ri(this._renderer)?this._filterManager=new Yn(this._renderer):this._filterManager=new zn(this._renderer),this._filterManager.resizeTo(new vt(this._width,this._height))}},{key:"_setupBuffer",value:function(){this._renderTarget&&this._renderTarget.dispose(),ri(this._renderer)?this._renderTarget=new qn(this._renderer,this._width,this._height,this._pixelRatio):this._renderTarget=new Mn(this._width,this._height,this._pixelRatio)}},{key:"clear",value:function(e){this._renderTarget.clear(e)}},{key:"resizeTo",value:function(e){this._width===e.x&&this._height===e.y||(this._width=e.x,this._height=e.y,this._frame.width=e.x,this._frame.height=e.y,this._renderTarget.resizeTo(e),this._filterManager.resizeTo(e))}},{key:"render",value:function(e){ri(this._renderer)?this._renderWebGL(e):this._renderCanvas(e)}},{key:"_renderWebGL",value:function(e){if(ri(this._renderer)){this._renderTarget.activate(),e.getWorldTransform().reset(),e.getChildren().forEach((function(e){e.updateTransform()}));var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}}},{key:"_renderCanvas",value:function(e){if(!ri(this._renderer)){e.getWorldTransform().reset(),e.getChildren().forEach(();var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}}},{key:"getRenderTarget",value:function(){return this._renderTarget}},{key:"dispose",value:]),n}(ii)})),zi=M((function(){ai={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"},si={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_duotone",defaultName:"DuoTone",assetFileName:"duotone",filters:[{identifier:"imgly_duotone_desert",defaultName:"Desert",lightColor:"#e1de9a",darkColor:"#cb2129"},{identifier:"imgly_duotone_peach",defaultName:"Peach",lightColor:"#e9abb8",darkColor:"#0040ff"},{identifier:"imgly_duotone_clash",defaultName:"Clash",lightColor:"#f41a0f",darkColor:"#23007c"},{identifier:"imgly_duotone_plum",defaultName:"Plum",lightColor:"#74d7ff",darkColor:"#23007c"},{identifier:"imgly_duotone_breezy",defaultName:"Breezy",lightColor:"#68fdff",darkColor:"#c20000"},{identifier:"imgly_duotone_deepblue",defaultName:"Deep Blue",lightColor:"#2de9eb",darkColor:"#58007c"},{identifier:"imgly_duotone_frog",defaultName:"Frog",lightColor:"#5bff60",darkColor:"#7f23a9"},{identifier:"imgly_duotone_sunset",defaultName:"Sunset",lightColor:"#f8ea46",darkColor:"#c400be"}]},{identifier:"imgly_filters_bw",assetFileName:"b&w",defaultName:"Black & White",filters:[{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"Greyed",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"Dusty",lutImage:"filters/imgly_lut_dusty_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia",lutImage:"filters/imgly_lut_sepia_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Weathered",lutImage:"filters/imgly_lut_weathered_5_5_128.png"},{identifier:"imgly_lut_sin",defaultName:"Hard Stuff",lutImage:"filters/imgly_lut_hard_stuff_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filters_retro",assetFileName:"vintage",defaultName:"Vintage",filters:[{identifier:"imgly_lut_blues",defaultName:"Polaroid",lutImage:"filters/imgly_lut_polaroid_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Sunny 70s",lutImage:"filters/imgly_lut_sunny_70s_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",defaultName:"Oldtimer",lutImage:"filters/imgly_lut_oldtimer_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",defaultName:"Inferno",lutImage:"filters/imgly_lut_inferno_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",defaultName:"Snappy",lutImage:"filters/imgly_lut_snappy_5_5_128.png"}]},{identifier:"imgly_filters_analog",assetFileName:"smooth",defaultName:"Smooth",filters:[{identifier:"imgly_lut_chest",defaultName:"Chestnut",lutImage:"filters/imgly_lut_chestnut_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",defaultName:"Softly",lutImage:"filters/imgly_lut_softly_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"Pebble",lutImage:"filters/imgly_lut_pebble_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Moss",lutImage:"filters/imgly_lut_moss_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lemon",lutImage:"filters/imgly_lut_lemon_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Green Gap",lutImage:"filters/imgly_lut_green_gap_5_5_128.png"}]},{identifier:"imgly_filters_winter",assetFileName:"cold",defaultName:"Cold",filters:[{identifier:"imgly_lut_elder",defaultName:"Colla",lutImage:"filters/imgly_lut_colla_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Solanus",lutImage:"filters/imgly_lut_solanus_5_5_128.png"},{identifier:"imgly_lut_bleached",defaultName:"Kalmen",lutImage:"filters/imgly_lut_kalmen_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Joran",lutImage:"filters/imgly_lut_joran_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Levante",lutImage:"filters/imgly_lut_levante_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Zephyr",lutImage:"filters/imgly_lut_zephyr_5_5_128.png"}]},{identifier:"imgly_filters_summer",assetFileName:"warm",defaultName:"Warm",filters:[{identifier:"imgly_lut_sunset",defaultName:"Golden",lutImage:"filters/imgly_lut_golden_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Low Fire",lutImage:"filters/imgly_lut_low_fire_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Sunrise",lutImage:"filters/imgly_lut_sunrise_5_5_128.png"},{identifier:"imgly_lut_k2",defaultName:"Flat Black",lutImage:"filters/imgly_lut_flat_black_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",defaultName:"Pumpkin",lutImage:"filters/imgly_lut_pumpkin_5_5_128.png"}]},{identifier:"imgly_filters_legacy",defaultName:"Legacy",assetFileName:"legacy",filters:[{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"Hicon",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_lomo",defaultName:"Lomo",lutImage:"filters/imgly_lut_lomo_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}}));on gr(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function mr(e,t){e.squareTo(t),this.reduce(t)}ion kr(e,t){e.squareTo(t),this.reduce(t)}function wr(e,t,n){e.multiplyTo(t,n),this.reduce(n)}ction Er(){var e=Li();return this.copyTo(e),e}unction Ir(){return 0==this.t?this.s:this[0]<<24>>24}e){var t=Li();return this.bitwiseTo(e,Nr,t),t}unction Wr(e){var t=Li();return this.bitwiseTo(e,jr,t),t}unction Gr(e){var t=Li();return this.bitwiseTo(e,Vr,t),t}ction Kr(e){var t=Li();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}n ro(e){return this.changeBit(e,jr)}function oo(e){return this.changeBit(e,qr)}nction lo(e){var t=Li();return this.addTo(e,t),t}function uo(e){var t=Li();return this.subTo(e,t),t}n vo(){}function _o(e){return e}n(){for(li={},li="undefined"!==typeof window?window.navigator:{},0xdeadbeefcafe,!0,"Microsoft Internet Explorer"==li.appName?(Bi.prototype.am=Ni,ui=30):"Netscape"!=li.appName?(Bi.prototype.am=Ui,ui=26):(Bi.prototype.am=Hi,ui=28),Bi.prototype.DB=ui,Bi.prototype.DM=(1<<ui)-1,Bi.prototype.DV=1<<ui,52,Bi.prototype.FV=Math.pow(2,52),Bi.prototype.F1=52-ui,Bi.prototype.F2=2*ui-52,ci="0123456789abcdefghijklmnopqrstuvwxyz",hi=new Array,di="0".charCodeAt(0),fi=0;fi<=9;++fi)hi[di++]=fi;for(di="a".charCodeAt(0),fi=10;fi<36;++fi)hi[di++]=fi;for(di="A".charCodeAt(0),fi=10;fi<36;++fi)hi[di++]=fi;hr.prototype.convert=dr,hr.prototype.revert=fr,hr.prototype.reduce=pr,hr.prototype.mulTo=gr,hr.prototype.sqrTo=mr,vr.prototype.convert=_r,vr.prototype.revert=br,vr.prototype.reduce=xr,vr.prototype.mulTo=wr,vr.prototype.sqrTo=kr,Bi.prototype.copyTo=Vi,Bi.prototype.fromInt=Gi,Bi.prototype.fromString=Yi,Bi.prototype.clamp=Xi,Bi.prototype.dlShiftTo=nr,Bi.prototype.drShiftTo=ir,Bi.prototype.lShiftTo=rr,Bi.prototype.rShiftTo=or,Bi.prototype.subTo=ar,Bi.prototype.multiplyTo=sr,Bi.prototype.squareTo=lr,Bi.prototype.divRemTo=ur,Bi.prototype.invDigit=yr,Bi.prototype.isEven=Sr,Bi.prototype.exp=Cr,Bi.prototype.toString=Ki,Bi.prototype.negate=Ji,Bi.prototype.abs=Qi,Bi.prototype.compareTo=$i,Bi.prototype.bitLength=tr,Bi.prototype.mod=cr,Bi.prototype.modPowInt=Tr,Bi.ZERO=qi(0),Bi.ONE=qi(1),vo.prototype.convert=_o,vo.prototype.revert=_o,vo.prototype.mulTo=bo,vo.prototype.sqrTo=xo,Co.prototype.convert=To,Co.prototype.revert=Eo,Co.prototype.reduce=Do,Co.prototype.mulTo=Ro,Co.prototype.sqrTo=Io,gi=(1<<26)/(pi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997])[pi.length-1],Bi.prototype.chunkSize=Or,Bi.prototype.toRadix=Ar,Bi.prototype.fromRadix=Pr,Bi.prototype.fromNumber=Zr,Bi.prototype.bitwiseTo=Ur,Bi.prototype.changeBit=io,Bi.prototype.addTo=so,Bi.prototype.dMultiply=mo,Bi.prototype.dAddOffset=yo,Bi.prototype.multiplyLowerTo=wo,Bi.prototype.multiplyUpperTo=So,Bi.prototype.modInt=Ao,Bi.prototype.millerRabin=Mo,Bi.prototype.clone=Er,Bi.prototype.intValue=Dr,Bi.prototype.byteValue=Ir,Bi.prototype.shortValue=Rr,Bi.prototype.signum=Fr,Bi.prototype.toByteArray=Mr,Bi.prototype.equals=zr,Bi.prototype.min=Br,Bi.prototype.max=Lr,Bi.prototype.and=Hr,Bi.prototype.or=Wr,Bi.prototype.xor=Gr,Bi.prototype.andNot=Yr,Bi.prototype.not=Xr,Bi.prototype.shiftLeft=Kr,Bi.prototype.shiftRight=Jr,Bi.prototype.getLowestSetBit=$r,Bi.prototype.bitCount=to,Bi.prototype.testBit=no,Bi.prototype.setBit=ro,Bi.prototype.clearBit=oo,Bi.prototype.flipBit=ao,Bi.prototype.add=lo,Bi.prototype.subtract=uo,Bi.prototype.multiply=co,Bi.prototype.divide=fo,Bi.prototype.remainder=po,Bi.prototype.divideAndRemainder=go,Bi.prototype.modPow=Oo,Bi.prototype.modInverse=Po,Bi.prototype.pow=ko,Bi.prototype.gcd=Fo,Bi.prototype.isProbablePrime=Zo,Bi.prototype.square=ho,mi=Bi}));var Bo,Lo,Uo,No,Ho,jo,Wo,Vo,Go,qo,Yo,Xo,Ko=M((function(){})),Jo=M((function(){Bo=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,Lo=/^(0|[1-9]\d*)\.(0|[1-9]\d*)(\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,Uo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,_.Z)(this,e);var i=n?Lo:Bo,r=i.exec(t);i.lastIndex=0,this._major=r[1],this._minor=r[2],this._patch=r[3]||0}return(0,b.Z)(e,[{key:"major",get:function(){return this._major}},{key:"minor",get:function(){return this._minor}},{key:"patch",get:function(){return this._patch}},{key:"equals",value:,{key:"isMoreRecentThan",value:function(e){return!(this._major<e.major)&&(this._major>e.major||!(this._minor<e.minor)&&(this._minor>e.minor||!(this._patch<=e.patch)&&(this._patch>e.patch||void 0)))}}]),e}()}));var Qo,$o,ea,ta,na,ia,ra,oa,aa,sa,la,ua=M((function(){st(),zo(),Ko(),qe(),Jo(),Ye(),No="TDNSeVlXTnJQMkZ3YVV0bGVUMD0=","ZW50ZXJwcmlzZV9saWNlbnNl",Ho="YXBwX2lkZW50aWZpZXJz","cGxhdGZvcm0=",jo="ZmVhdHVyZXM=",Wo="ZXhwaXJlc19hdA==","ZG9tYWlucw==","YXBpX3Rva2Vu",Vo="c2lnbmF0dXJl",Go="dmVyc2lvbg==",qo=function(){function e(t){(0,_.Z)(this,e),this._version="2.4",this._l="string"===typeof t?t.trim():t,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}return(0,b.Z)(e,[{key:"v",value:,{key:"_jsonValid",value:function(){try{this._decLic=JSON.parse(this._l)}catch(OC){return this._decLic={},!1}return!0}},{key:"_hostnameValid",value:function(){if("undefined"===typeof window)return!0;if(!this._decLic[No(Ho)].length)return!0;var e=window.location.hostname,t=!1;return this._decLic[No(Ho)].forEach((),t}},{key:"_platformValid",value:function(){return"HTML5"===this._decLic[No("cGxhdGZvcm0=")]}},{key:"c",value:function(){var e=this;return new Promise((function(t,n){var i=e._validateError();null!==i&&n(i),t()}))}},{key:"validate",value:,{key:"_validateError",value:function(){if("string"!==typeof this._l||!this._jsonValid()){var e=new Error;return e.code="ELICINVFMT",e}if(!this._sigValid()){var t=new Error;return t.code="ELICINV",t}if(!this._hostnameValid()){var n=new Error;return n.code="ELICINVHOST",n}if(!this._platformValid()){var i=new Error;return i.code="ELICINVPLAT",i}if(this.isExp()){var r=new Error;return r.code="ELICEXP",r}return null}},{key:"isToolAllowed",value:,{key:"isWhiteLabel",value:function(){return this._includesFeature("whitelabel",new Uo("2.4",!0))}},{key:"areCustomAssetsAllowed",value:function(){return this._includesFeature("customassets",new Uo("2.4",!0))}},{key:"t",value:function(){if(this._decLic.enterprise_license)return Promise.resolve();if(this._includesFeature("noexporttracking",new Uo("2.4",!0)))return Promise.resolve();var e=this._decLic[No("ZG9tYWlucw==")][0]+No(No("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[No("YXBpX3Rva2Vu")],t=new ot(e);return t.load().catch((function(){}))}},{key:"isENT",value:function(){return!!this._decLic&&this._decLic[No("ZW50ZXJwcmlzZV9saWNlbnNl")]}},{key:"_sigValid",value:,{key:"exp",value:function(){return!!this._decLic[No(Wo)]}},{key:"dl",value:function(){return Math.ceil((this._expAt()-Date.now())/864e5)}},{key:"isExp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[No(Wo)]&&e>this._expAt()}},{key:"_expAt",value:function(){return 1e3*this._decLic[No(Wo)]}},{key:"_verify",value:function(e,t){return this._encodeMessage(e)===this._decodeSignature(t).substr(-64)}},{key:"_encodeMessage",value:function(e){var t=function(e){ion a(e){return n(e,2)^n(e,13)^n(e,22)}function s(e){return n(e,6)^n(e,11)^n(e,25)}function l(e){return n(e,7)^n(e,18)^i(e,3)}eturn e=e)),8*e.length))}(e);return t}},{key:"_decodeSignature",value:function(e){return e=function(e){return e.map((function(e){return"0".concat((255&e).toString(16)).slice(-2)})).join("")}(e=be.decode(e)),(e=this._parseBigInt(e,16)).modPowInt(this._e,this._n).toString(16)}},{key:"_parseBigInt",value:,{key:"_parseLicense",value:function(){"string"===typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[No(Vo)]||"",delete this._decLic[No(Vo)],this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,""),this._message=this._l.replace(new RegExp(',"'.concat(No(Vo),'":"([^"]*)"')),""))}},{key:"_includesFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uo("1.0",!0),n=new Uo(this._decLic[No(Go)],!0);return!!t.isMoreRecentThan(n)||this._decLic[No(jo)]&&-1!==this._decLic[No(jo)].indexOf(e)}}]),e}(),Yo=function(){eturn(0,b.Z)(e,[{key:"v",value:function(){return!0}},{key:"c",value:function(){return Promise.resolve()}},{key:"isToolAllowed",value:,{key:"isWhiteLabel",value:function(){return!1}},{key:"areCustomAssetsAllowed",value:function(){return!0}},{key:"t",value:function(){return Promise.resolve()}},{key:"isENT",value:function(){return!1}},{key:"exp",value:function(){return!1}},{key:"dl",value:function(){return 0}},{key:"isExp",value:function(){arguments.length>0&&void 0!==arguments[0]||Date.now();return!1}}]),e}(),Xo=qo})),ca=M((function(){Qo="undefined"===typeof window?n.g:window,$o=Qo.requestAnimationFrame,ea=Qo.cancelAnimationFrame,ta=0,na=["ms","moz","webkit","o"];for(var e=0;e<na.length&&!$o;++e)$o=Qo["".concat(na[e],"RequestAnimationFrame")],ea=Qo["".concat(na[e],"CancelAnimationFrame")]||Qo["".concat(na[e],"CancelRequestAnimationFrame")];$o&&($o=$o.bind(Qo)),ea&&(ea=ea.bind(Qo)),$o||($o=,ea||(ea=function(e){clearTimeout(e)})})),ha=M((function(){Xe(),Ft(),ia=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vt(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vt(1,1),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vt(2,-1),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new vt(2,0);(0,_.Z)(this,e),this._p0=t.clone(),this._p1=n.clone(),this._p2=i.clone(),this._p3=r.clone(),this._segments=[],this._length=-1,this._sample=[]}return(0,b.Z)(e,[{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vt(0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vt(1,1),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vt(2,1),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new vt(2,0);this._p0=e.clone(),this._p1=t.clone(),this._p2=n.clone(),this._p3=i.clone()}},{key:"getLength",value:function(){return this._length}},{key:"calculateSegments",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=0,n=0,i=[],r=1/e,o=this._p0.clone(),a=1;a<=e;a++){var s=[];s.push({t:t,s:n,point:o}),t+=r,t=Math.min(t,1);var l=this.evalAt(t),u=l.clone().subtract(o);n+=u.len(),s.push({t:t,s:n,point:l}),i.push(s),o=l}return this._segments=i,this._length=n,n}},{key:"evalAt",value:function(e){e=this.normalizeParameter(e);var t=this._p0.clone().multiply(Math.pow(1-e,3)),n=this._p1.clone().multiply(3*(1-e)*(1-e)*e),i=this._p2.clone().multiply(3*(1-e)*e*e),r=this._p3.clone().multiply(e*e*e);return t.add(n).add(i).add(r)}},{key:"isInSegment",value:function(e,t){return(e=this.normalizeArcLength(e))>=t[0].s&&e<=t[1].s}},{key:"getArcLengthSegment",value:function(e){e=this.normalizeArcLength(e);for(var t=0;t<this._segments.length;t++){var n=this._segments[t];if(this.isInSegment(e,n))return n}return null}},{key:"normalizeArcLength",value:function(e){return Math.max(Math.min(this._length,e),0)}},{key:"normalizeParameter",value:,{key:"getParameterForArcLength",value:function(e){var t=this.normalizeArcLength(e),n=this.getArcLengthSegment(t);if(!n)return Re.warn("CubicBezierCurve#getParameterForArcLength","Segment not found."),-1;var i=(t-n[1].s)/(n[0].s-n[1].s);return i*n[0].t+(1-i)*n[1].t}},{key:"evalAtArcLength",value:,{key:"approximateAtArcLength",value:function(e){var t=this.normalizeArcLength(e),n=this.getArcLengthSegment(t);if(!n)return-1;var i=(t-n[1].s)/(n[0].s-n[1].s);return n[0].point.clone().multiply(i).add(n[1].point.clone().multiply(1-i))}},{key:"parameterSample",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=1/e,n=[],i=0,r=0;r<=e+1;r++)n.push(this.evalAt(i)),i+=t;return this._sample=n,[].concat(n)}},{key:"arcLengthApproxSample",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._length/e,r=[],o=0,a=t?1:0;a<e+1;a++)r.push(this.approximateAtArcLength(o)),o+=i;return n&&r.pop(),this._sample=r,[].concat(r)}}]),e}(),ra=ia})),da=M((function(){oa=function(){function e(t,n){(0,_.Z)(this,e),this.min=t,this.max=n}return(0,b.Z)(e,[{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"getLength",value:,{key:"contains",value:function(e){return this.min<=e&&e<=this.max}}]),e}(),aa=oa})),fa=M((function(){sa=function(){function e(t,n,i){(0,_.Z)(this,e),this.x=t,this.y=n,this.z=i,"undefined"===typeof this.x&&(this.x=0),"undefined"===typeof this.y&&(this.y=0),"undefined"===typeof this.z&&(this.z=0)}return(0,b.Z)(e,[{key:"set",value:,{key:"clone",value:,{key:"copy",value:,{key:"clamp",value:function(e,t){var n=null!==e&&"undefined"!==typeof e,i=null!==t&&"undefined"!==typeof t;return e instanceof sa||!n||(e=new sa(e,e,e)),t instanceof sa||!i||(t=new sa(t,t,t)),n&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y),this.z=Math.max(e.z,this.z)),i&&(this.x=Math.min(t.x,this.x),this.y=Math.min(t.y,this.y),this.z=Math.min(t.z,this.z)),this}},{key:"divide",value:function(e){return e instanceof sa?(this.x/=e.x,this.y/=e.y,this.z/=e.z):(this.x/=e,this.y/=e,this.z/=e),this}},{key:"subtract",value:function(e){return e instanceof sa?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=e,this.z-=e),this}},{key:"multiply",value:function(e){return e instanceof sa?(this.x*=e.x,this.y*=e.y,this.z*=e.z):(this.x*=e,this.y*=e,this.z*=e),this}},{key:"add",value:function(e){return e instanceof sa?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=e,this.z+=e),this}},{key:"equals",value:function(e){return e instanceof sa?e.x===this.x&&e.y===this.y&&e.z===this.z:e===this.x&&e===this.y&&e===this.z}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"fract",value:function(){return this.x%=1,this.y%=1,this.z%=1,this}},{key:"toInt",value:function(){return this.x|=0,this.y|=0,this.z|=0,this}},{key:"abs",value:,{key:"len",value:,{key:"min",value:function(){return Math.min(Math.min(this.x,this.y),this.z)}},{key:"max",value:,{key:"toObject",value:,{key:"toString",value:,{key:"roundDecimal",value:function(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this.z=parseFloat(this.z.toFixed(e)),this}}],[{key:"fromObject",value:,{key:"NULL",get:]),e}(),la=sa})),pa={};B(pa,{ColorMatrix:function(){return Ut},CubicBezierCurve:function(){return ra},Matrix:function(){return _t},Range:function(){return aa},Rectangle:function(){return bt},Vector2:function(){return vt},Vector3:function(){return la}});var ga=M((),ma={};B(ma,{Base64:function(){return be},Color:function(){return ct},ColorMatrix:function(){return Ut},Configurable:function(){return Ht},Constants:function(){return Q},CubicBezierCurve:function(){return ra},Engine:function(){return ba},EventEmitter:function(){return dt},Events:function(){return ai},FreeLicenseChecker:function(){return Yo},GLUtils:function(){return ft},LicenseChecker:function(){return Xo},Log:function(){return Re},Matrix:function(){return _t},Range:function(){return aa},Rectangle:function(){return bt},Utils:function(){return we},Vector2:function(){return vt},Vector3:function(){return la},cancelAnimationFrame:function(){return ea},requestAnimationFrame:function(){return $o}});var ya,va,_a,ba,xa,ka,wa,Sa,Ca,Ta,Ea,Da,Ia,Ra,Oa,Fa,Aa,Pa,Za,Ma,za,Ba,La,Ua,Na,Ha,ja,Wa,Va,Ga,qa,Ya,Xa,Ka=M((function(){Xe(),zi(),se(),$a(),qe(),Dt(),yn(),It(),Rt(),ua(),Ye(),ca(),ga()})),Ja=M((function(){zt(),Qa(),Mi(),Ka(),ya=function(){function e(){(0,_.Z)(this,e),this._container=new St,this._sprite=new va,this._container.addChild(this._sprite)}return(0,b.Z)(e,[{key:"render",value:function(e,t,n){var i=n.getDimensions(),r=this._getNextHighestPOT(i);this._renderTexture?this._renderTexture.resizeTo(r):this._renderTexture=new oi(e,r.x,r.y);var o=this._renderTexture.getDimensions();this._sprite.setTexture(n),this._sprite.updateTransform(),this._renderTexture.clear(),this._renderTexture.render(this._container),this._updateSprite(e,t,i,o)}},{key:"_updateSprite",value:function(e,t,n,i){t.setTexture(this._renderTexture),this._renderTexture.setFrame(new bt(0,0,n.x,n.y))}},{key:"_getNextHighestPOT",value:,{key:"getRenderTexture",value:function(){return this._renderTexture}},{key:"dispose",value:]),e}()})),Qa=M((function(){Ja(),zt(),Zt(),va=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i;return(0,_.Z)(this,n),(i=t.call(this))._shader=null,i._width=0,i._height=0,i._anchor=new vt(0,0),i._canvasSmoothingEnabled=!0,i._smoothDownscaling=!1,i._onTextureUpdate=i._onTextureUpdate.bind((0,x.Z)(i)),i.setTexture(e),i}return(0,b.Z)(n,[{key:"_onTextureUpdate",value:function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"_renderWebGL",value:function(e){var t=e.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new ya),this._texture&&this._potRenderer.render(e,this,this._texture)),e.restore(t),e.setObjectRenderer(e.renderers.sprite),e.renderers.sprite.render(this)}},{key:"_renderCanvas",value:function(e){if(this._texture){var t=this._worldTransform,n=this._texture.getFrame(),i=n.width,r=n.height,o=e.getCurrentRenderTarget().getPixelRatio(),a=this._anchor.x*-i|0,s=this._anchor.y*-r|0,l=e.getContext();if(l.setTransform(t.a,t.b,t.c,t.d,t.tx*o,t.ty*o),l.globalAlpha=this.getWorldAlpha(),this._texture){var u=this._texture.getBaseTexture(),c=u.getPixelRatio(),h=u.getSource();l.imageSmoothingEnabled=this._canvasSmoothingEnabled,"beforeDraw"in e&&e.beforeDraw(l),l.drawImage(h,0,0,(h.naturalWidth||i)*c,(h.naturalHeight||r)*c,a*o,s*o,i*o,r*o)}}}},{key:"isAtPosition",value:function(e){if(this._texture){var t=this._worldTransform.applyInverseToVector(e),n=this._texture.getFrame(),i=n.width,r=n.height,o=new vt(-i,-r);o.multiply(this._anchor);var a=o.clone().add(i,r);return!(t.x<o.x||t.x>a.x||t.y<o.y||t.y>a.y)}}},{key:"getLocalBounds",value:function(){if(this._localBoundsNeedUpdate&&this._texture){var e=this._localBounds,t=this._texture.getFrame();e.x=-t.width*this._anchor.x,e.y=-t.height*this._anchor.y,e.width=t.width,e.height=t.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}},{key:"getBounds",value:function(){if(this._boundsNeedUpdate&&this._texture){var e=this._bounds,t=this._texture.getFrame(),n=this._worldTransform,i=this._anchor,r=n.rectangleToCoordinates(t,i),o=r[0].x,a=r[0].y,s=o,l=a;r.forEach((function(e){var t=e.x,n=e.y;o=Math.min(o,t),a=Math.min(a,n),s=Math.max(s,t),l=Math.max(l,n)})),e.x=o,e.width=Math.abs(s-o),e.y=a,e.height=Math.abs(l-a),this._boundsNeedUpdate=!1}return this._bounds.clone()}},{key:"getTexture",value:function(){return this._texture}},{key:"clearTexture",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._texture&&(this._texture.off("update",this._onTextureUpdate),e&&this._texture.dispose(),this._texture=null,this._potRenderer&&(e&&this._potRenderer.dispose(),delete this._potRenderer))}},{key:"setTexture",value:function(e){e&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=e,e.getBaseTexture().isLoaded()&&this._onTextureUpdate(),e.on("update",this._onTextureUpdate))}},{key:"getShader",value:function(){return this._shader}},{key:"setShader",value:function(e){this._shader=e}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(e){this._texture&&(this._scale.x=e/this._texture.getFrame().width,this._width=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0)}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(e){this._texture&&(this._scale.y=e/this._texture.getFrame().height,this._height=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0)}},{key:"getDimensions",value:function(){return new vt(this._width,this._height)}},{key:"getAnchor",value:function(){return this._anchor}},{key:"setAnchor",value:function(e,t){this._anchor.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"isSmoothDownscaling",value:function(){return this._smoothDownscaling}},{key:"setSmoothDownscaling",value:function(e){this._smoothDownscaling=e}},{key:"dispose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off("update",this._onTextureUpdate),(e||t)&&this._texture&&this._texture.dispose(t),this._potRenderer&&this._potRenderer.dispose()}}]),n}(St)})),$a=M((function(){zt(),yi(),wn(),bi(),Si(),Ai(),Qa(),vi(),Mi(),Zi(),_i(),ue(),Ve(),Ei(),_a={CanvasFilterManager:zn,Container:St,BaseTexture:Zn,Texture:ii,RenderTexture:oi,WebGLRenderTarget:qn,CanvasRenderTarget:Mn,Sprite:va,Filter:Xt,Filters:Fn,PixelArrayImage:te,autoDetectRenderer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return de.isSupported()?new ei(e,t,n):new Wn(e,t,n)},canvasRenderer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Wn(e,t,n)}},ba=_a})),es=M((function(){xa=function(){function e(){(0,_.Z)(this,e)}return(0,b.Z)(e,null,[{key:"current",value:function(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.ENV}},{key:"isTest",value:function(){return"test"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.ENV}},{key:"isDevelopment",value:function(){return"development"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.ENV}},{key:"isProduction",value:function(){return"production"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.ENV||!this.isTest()&&!this.isDevelopment()}}]),e}()})),ts=M((function(){ka=function(){eturn(0,b.Z)(e,[{key:"peekInt8",value:,{key:"peekInt16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],n=this._buf[this._head+1];return e?(n<<8)+t:(t<<8)+n}},{key:"peekInt24",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],n=this._buf[this._head+1],i=this._buf[this._head+2];return e?(i<<16)+(n<<8)+t:(t<<16)+(n<<8)+i}},{key:"peekInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],n=this._buf[this._head+1],i=this._buf[this._head+2],r=this._buf[this._head+3];return e?(r<<32)+(i<<16)+(n<<8)+t:(t<<32)+(n<<16)+(i<<8)+r}},{key:"writeInt8",value:function(e){this._buf[this._head]=255&e}},{key:"writeInt16",value:function(e){this._buf[this._head]=e>>8,this._buf[this._head+1]=255&e}},{key:"readInt8",value:,{key:"readInt16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt16(e);return this._head+=2,t}},{key:"readInt24",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt24(e);return this._head+=3,t}},{key:"readInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt32(e);return this._head+=4,t}},{key:"readString",value:function(e){for(var t="",n=0;n<e;n++){var i=this.readInt8();t+=String.fromCharCode(i)}return t}},{key:"getHead",value:function(){return this._head}},{key:"setHead",value:function(e){this._head=e}}]),e}(),wa=ka})),ns=M((function(){Sa={MARKERS:{SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},EXIF_TAGS:{256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"}}})),is=M((function(){ts(),Ye(),ns(),Ca=we.invariant;var e=Sa;Ta=e.MARKERS,Ea=e.EXIF_TAGS,Da=function(){function e(t){(0,_.Z)(this,e),this._buf=t,this._stream=new wa(this._buf),this._stream.setHead(0),this._parse(),this._bigEndian=!1}return(0,b.Z)(e,[{key:"isValid",value:function(){return this._stream.setHead(0),this._stream.readInt16()===Ta.EXIF&&(this._stream.readInt16()>0&&"Exif"===this._stream.readString(4))}},{key:"_parse",value:function(){if(this.isValid()){this._stream.setHead(10);var e=this._stream.getHead();this._bigEndian=!1;var t=this._stream.readInt16();18761===t?this._bigEndian=!1:19789===t?this._bigEndian=!0:Ca(!1,"Invalid TIFF data: No endian type found"),Ca(42===this._stream.readInt16(!this._bigEndian),"Invalid TIFF data: No 0x002A");var n=this._stream.readInt32(!this._bigEndian);Ca(n>=8,"Invalid TIFF data: First IFD offset < 8");var i=e+n,r=this._readTags(this._stream,e,i,this._bigEndian);this._tags=r.tags,this._tagData=r.tagData}}},{key:"getTags",value:function(){return this._tags}},{key:"getTagData",value:function(){return this._tagData}},{key:"setOrientation",value:function(e){if(this._tagData.Orientation){var t=this._tagData.Orientation.entryOffset;this._stream.setHead(t+8),this._stream.writeInt16(this._bigEndian?e:(255&e)<<8|e>>8&255)}}},{key:"_readTags",value:function(e,t,n,i){e.setHead(n);for(var r=e.readInt16(!i),o={},a=[],s=0;s<r;s++){var l=n+12*s+2;e.setHead(l);var u=e.readInt16(!i),c=void 0,h=void 0,d=void 0;if(Ea[u]){u=Ea[u],c=e.readInt16(!i),h=e.readInt32(!i),d=e.readInt32(!i)+t;var f=null;switch(c){case 1:case 7:if(1===h)f=e.readInt8(!i);else{f=[];for(var p=0;p<h;p++)f.push(e.readInt8(!i))}break;case 2:e.setHead(h>4?d:l+8),f=e.readString(h);break;case 3:if(e.setHead(h>2?d:l+8),1===h)f=e.readInt16(!i);else{f=[];for(var g=0;g<h;g++)f.push(e.readInt16(!i))}break;case 4:case 9:if(e.setHead(h>1?d:l+8),1===h)f=e.readInt32(!i);else{f=[];for(var m=0;m<h;m++)f.push(e.readInt32(!i))}break;case 5:case 10:if(e.setHead(d),1===h){f=e.readInt32(!i)/e.readInt32(!i)}else{f=[];for(var y=0;y<h;y++){var v=e.readInt32(!i)/e.readInt32(!i);f.push(v)}}}o[u]=f,a[u]={value:f,numValues:h,entryOffset:l,valueOffset:d,type:c}}}return{tags:o,tagData:a}}},{key:"getBuffer",value:function(){return this._buf}}]),e}(),Ia=Da})),rs=M((function(){ts(),ns(),Ra=Sa.MARKERS,Oa=function(){function e(t){(0,_.Z)(this,e),this._buf=t,this._stream=new wa(this._buf),this._stream.setHead(0)}return(0,b.Z)(e,[{key:"isValid",value:function(){if(this._stream.setHead(0),this._stream.readInt16()!==Ra.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;var e=this._stream.readString(4),t=this._stream.readInt8();return"JFIF"===e&&0===t}},{key:"setUnitDensity",value:function(e){this._stream.setHead(11),this._stream.writeInt8(e)}},{key:"setDensityX",value:function(e){this._stream.setHead(12),this._stream.writeInt16(e)}},{key:"setDensityY",value:,{key:"getUnitDensity",value:function(){return this._stream.setHead(11),this._stream.readInt8()}},{key:"getDensityX",value:function(){return this._stream.setHead(12),this._stream.readInt16()}},{key:"getDensityY",value:,{key:"getBuffer",value:function(){return this._buf}}]),e}(),Fa=Oa})),os=M((function(){ts(),qe(),ns(),is(),rs(),Ye(),we.invariant,Aa=Sa.MARKERS,Pa="data:image/jpeg;base64,",Za=new RegExp("^".concat(Pa),"i"),Ma=function(){function e(t){(0,_.Z)(this,e),this._buf=t,this._stream=new wa(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new Ia(this._getMarkerBuffer(Aa.EXIF)),this._jfifData=new Fa(this._getMarkerBuffer(Aa.JFIF))}return(0,b.Z)(e,[{key:"restoreSegmentsInArray",value:,{key:"restoreSegments",value:function(e){var t=Ma.fromDataURL(e);return t=this.restoreSegmentsInArray(t),Ma.toDataURL(t)}},{key:"restoreExifTagsToImageData",value:function(e){if(!this._exifData.isValid())return e;var t=this._sliceIntoSegments(e)[1][0],n=e.slice(0,t),i=e.slice(t),r=n.concat(this._exifData.getBuffer());return r=r.concat(i)}},{key:"restoreJfifSegmentToImageData",value:function(e){if(!this._jfifData.isValid())return e;var t=this._sliceIntoSegments(e),n=this._findSegment(Aa.JFIF,t);if(!n)return e;var i=n[0],r=n[1],o=e.slice(0,i),a=e.slice(i,r),s=e.slice(r),l=new Fa(a);return l.setDensityX(this._jfifData.getDensityX()),l.setDensityY(this._jfifData.getDensityY()),l.setUnitDensity(this._jfifData.getUnitDensity()),o.concat(a).concat(s)}},{key:"restoreExifTags",value:function(e){var t=Ma.fromDataURL(e),n=this.restoreExifTagsToImageData(t);return Ma.toDataURL(n)}},{key:"restoreJfifSegment",value:function(e){if(!this._jfifData.isValid())return e;var t=Ma.fromDataURL(e),n=this.restoreJfifSegmentToImageData(t);return Ma.toDataURL(n)}},{key:"setOrientation",value:function(e){return this._exifData.setOrientation(e)}},{key:"_findSegment",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=0;n<t.length;n++){var i=t[n][0],r=t[n][1];this._stream.setHead(i);var o=this._stream.peekInt16();if(o===e)return[i,r]}return!1}},{key:"_getLastSegment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._segments;return e[e.length-1]}},{key:"_getMarkerBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=this._findSegment(e,t);if(n){var i=n[0],r=n[1];return this._buf.slice(i,r)}return!1}},{key:"_sliceIntoSegments",value:function(e){for(var t=new wa(e),n=[];t.getHead()<e.length;){var i=t.readInt16();if(i!==Aa.SOI){if(i===Aa.SOS)break;if(!(i>=65280&&i<=65535))throw new Error("Invalid marker: 0x".concat(i.toString(16)));var r=t.readInt16(),o=t.getHead()+r-2;n.push([t.getHead()-4,o]),t.setHead(o)}}return this._stream.setHead(0),n}},{key:"getTags",value:function(){return this._exifData.getTags()}},{key:"getTagData",value:function(){return this._exifData.getTagData()}},{key:"dispose",value:],[{key:"toDataURL",value:,{key:"fromDataURL",value:,{key:"isJPEG",value:function(e){return Za.test(e)}},{key:"bufferIsJPEG",value:,{key:"fromBase64String",value:function(e){var t=e.replace(Pa,""),n=be.decode(t);return new Ma(n)}}]),e}(),za=Ma})),as=M((function(){Ba="undefined"!==typeof window&&window.Image,La=Ba})),ss=M((function(){Ka(),It(),Ua=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,_.Z)(this,n),(e=t.call(this))._onOperationUpdate=e._onOperationUpdate.bind((0,x.Z)(e)),e._cacheEnabled=!0,e._stack=i,e._stack.forEach((function(t){t.on("update",e._onOperationUpdate)})),e}return(0,b.Z)(n,[{key:"clear",value:function(){var e=this;this.forEach((function(t){return e.remove(t)})),this._stack=[]}},{key:"hasChanges",value:function(){return this._stack.filter((function(e){return!!e})).some((function(e){return e.hasChanges()}))}},{key:"_onOperationUpdate",value:,{key:"enableCache",value:function(){this._cacheEnabled=!0}},{key:"disableCache",value:function(){this._cacheEnabled=!1}},{key:"forEach",value:function(e){return this._stack.filter((function(e){return!!e})).forEach(e)}},{key:"render",value:function(e,t){var n=this,i=t,r=this._stack.filter((function(e){return!!e})).filter((function(e){return e.getEnabled()}));r.reverse();var o=r.filter(()[0],a=r.indexOf(o);r.reverse();var s=0;-1!==a&&(s=r.length-a-1);for(var l=0;l<s;l++)Re.info(this.constructor.name,"Skipping ".concat(r[l].constructor.name));for(var u=Promise.resolve(i),c=function(e){var t=r[e],i=void 0,o=void 0;u=u.then((function(e){return t.render(e).then((function(e){return i&&e!==i&&!n._cacheEnabled&&o.disposeRenderTextures(),i=e,o=t,e}))}))},h=s;h<r.length;h++)c(h);return u.then((function(t){return{outputTexture:t,renderDone:!r.some(()}}))}},{key:"validateSettings",value:function(){return Promise.all(this._stack.filter(().map((function(e){return e.validateSettings()})))}},{key:"setAllToDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach(()}},{key:"updateDirtinessForRenderer",value:function(e){for(var t=!1,n=0;n<this._stack.length;n++){var i=this._stack[n];i&&(i.isDirtyForRenderer(e)&&(t=!0),t&&i.setDirtyForRenderer(!0,e))}}},{key:"push",value:function(e){this._stack.push(e),e.on("update",this._onOperationUpdate)}},{key:"pop",value:function(){var e=this._stack.pop();e&&(e.off("update",this._onOperationUpdate),e.dispose())}},{key:"unshift",value:,{key:"clone",value:,{key:"get",value:function(e){return this._stack[e]}},{key:"getByIdentifier",value:function(e){return we.Array.find(this._stack,(function(t){return t&&t.constructor.identifier===e}))}},{key:"getIndexByIdentifier",value:function(e){return we.Array.findIndex(this._stack,(function(t){return t&&t.constructor.identifier===e}))}},{key:"moveToTop",value:function(e){var t=we.Array.findIndex(this._stack,();if(!(t<0||t===this._stack.length-1)){var n=this.getByIdentifier(e);this._stack.splice(t,1),this._stack[this._stack.length]=n}}},{key:"set",value:function(e,t){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack[e]=t,t.on("update",this._onOperationUpdate)}},{key:"remove",value:function(e){var t=this._stack.indexOf(e);-1!==t&&(this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack.splice(t,1))}},{key:"removeAt",value:function(e){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),delete this._stack[e]}},{key:"getStack",value:function(){return this._stack}},{key:"dispose",value:]),n}(dt),Na=Ua})),ls=M((function(){Ka(),Ha="undefined"!==typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):xi(),ja=function(){function e(t,n){(0,_.Z)(this,e),this._tag=t,this._name=n,this._start=Ha()}return(0,b.Z)(e,[{key:"stop",value:function(){var e=Ha()-this._start,t=Math.round(1e3/e);Re.info(this._tag,"".concat(this._name," took ").concat(e.toFixed(2),"ms (").concat(t," FPS)"))}}]),e}(),Wa=ja})),us=M((function(){Xe(),se(),$a(),yn(),ls(),Va=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.Z)(this,n),(i=t.call(this,r,{enabled:{type:"boolean",default:!0,serializable:!1}}))._sdk=e,i._cacheEnabled=!1,i._dirtiness={},i._sprite=new ba.Sprite,i._container=new ba.Container,i._container.addChild(i._sprite),i}return(0,b.Z)(n,[{key:"_onOptionsChange",value:,{key:"render",value:function(e){var t=this;if(!this.getEnabled())return Re.info(this.constructor.name,"Disabled - skipping"),Promise.resolve(e);if(!this._renderTexture){var n=e.getDimensions().floor();this._renderTexture=new ba.RenderTexture(this._sdk.getRenderer(),n.x,n.y)}var i,r,o=this._sdk.getRenderer();if(Re.canLog("info")&&(r=new Wa(this.constructor.name,"Rendering")),this.isDirtyForRenderer(o)){this._sprite.setTexture(e);var a=this.getNewDimensions(e.getDimensions()).floor();this._renderTexture.resizeTo(a),this._renderTexture.clear(),i=this._render(e).then((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.setDirtyForRenderer(e,o),t._renderTexture}))}else Re.info(this.constructor.name,"Rendering from cache"),i=Promise.resolve(this._renderTexture);return i.then(()}},{key:"_render",value:function(e){return(this._sdk.getRenderer().isOfType("webgl")?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(e)}},{key:"_renderWebGL",value:function(e){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}},{key:"_renderCanvas",value:,{key:"getNewDimensions",value:function(e){return e.clone()}},{key:"onBeforeExport",value:function(){this.transform&&this._tempTransformChange&&this.transform(this._tempTransformChange),this._onBeforeExport()}},{key:"onAfterExport",value:function(){this.transform&&this._tempInverseTransformChange&&this.transform(this._tempInverseTransformChange),this._onAfterExport()}},{key:"_onBeforeExport",value:function(){}},{key:"_onAfterExport",value:function(){}},{key:"setTemporaryTransformChange",value:function(e,t){this._tempTransformChange=e,this._tempInverseTransformChange=t}},{key:"reset",value:,{key:"isDirtyForRenderer",value:function(e){var t=this._dirtiness[e.id];return"undefined"===typeof t||t}},{key:"setDirtyForRenderer",value:function(e,t){this._dirtiness[t.id]=e}},{key:"setDirty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(e,{id:n},t)}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){var e,t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=this._sdk.getInputDimensions();return n&&i.multiply(this._sdk.getZoom()).floor(),this._sdk.getOperationsStack().forEach((function(n){e||(n!==t?i=n.getNewDimensions(i):e=!0)})),i.floor()}},{key:"clone",value:function(){return new(0,this.constructor)(this._sdk,this.serializeOptions())}},{key:"disposeRenderTextures",value:,{key:"dispose",value:]),n}(Ht),Va.identifier=null,Ga=Va})),cs=M((function(){Ka(),Ft(),us(),qa=Q.OptionType,Ya=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"getRotation",value:function(){var e=0;switch(this.getTags().Orientation){case 7:case 8:e=-90;break;case 3:case 4:e=-180;break;case 5:case 6:e=90}return e}},{key:"_getFlipVertically",value:function(){var e=this.getTags().Orientation;return-1!==[5,7].indexOf(e)}},{key:"_getFlipHorizontally",value:function(){var e=this.getTags().Orientation;return-1!==[2,4].indexOf(e)}},{key:"_getFinalOptions",value:,{key:"_render",value:function(e){var t=this._getFinalOptions(),n=t.rotation%360*(Math.PI/180);this._sprite.setScale(t.flipHorizontally?-1:1,t.flipVertically?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var i=this._sprite.getBounds();return this._renderTexture.resizeTo(new vt(i.width,i.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),Promise.resolve()}},{key:"getNewDimensions",value:function(e){var t=this._getFinalOptions();return e=e.clone(),t.rotation%180&&e.flip(),e}},{key:"applyTo",value:function(e){var t=this._getFinalOptions(),n=we.createCanvas();90===Math.abs(t.rotation%180)?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var i=n.getContext("2d"),r=t.rotation*Math.PI/180,o=.5*(n.width-e.width),a=.5*(n.height-e.height);return i.translate(o,a),i.translate(.5*e.width,.5*e.height),i.rotate(r),i.translate(-.5*e.width,-.5*e.height),t.flipVertically&&(i.translate(0,e.height),i.scale(1,-1)),t.flipHorizontally&&(i.translate(e.width,0),i.scale(-1,1)),i.drawImage(e,0,0),n}}]),n}(Ga),Ya.identifier="exif-orientation",Ya.prototype.availableOptions={tags:{type:qa.OBJECT,default:{}}},Xa=Ya})),hs={};B(hs,{ExifOrientationOperation:function(){return Xa}});var ds,fs,ps,gs,ms,ys,vs,_s,bs,xs,ks,ws,Ss,Cs,Ts,Es,Ds,Is,Rs,Os,Fs,As,Ps,Zs,Ms,zs=M((function(){cs()})),Bs=M((function(){W(),se(),$a(),Dt(),yn(),as(),Ye(),ds=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.Z)(this,n),(i=t.call(this,r))._sdk=e,i}return(0,b.Z)(n,[{key:"export",value:function(){var e=this,t=this._options,n=t.imageFormat,i=t.transparent,r=function t(n){return n.renderDone?n:e._sdk.render().then((function(e){return t(e)}))};return this.validateSettings().then(().then((function(t){var r=t.outputTexture,o=(t.renderDone,e._sdk.getRenderer()),a=o.getClearColor();"image/png"===n&&i&&o.setClearColor(new ct(0,0,0,0));var s=o.getCanvas();return o.isOfType("webgl")&&(s=e._createCanvasFromTexture(r)),o.setClearColor(a),e._encodeImageFormat(s)})).then((function(t){return e._restoreExifMetadata(t,n)})).then(()}},{key:"_restoreExifMetadata",value:function(e,t,n){if(t===l.JPEG){var i=this._sdk.getExif();if(i)"string"===typeof e&&(e=i.restoreSegments(e))}return Promise.resolve(e)}},{key:"_encodeAsDataURL",value:function(e,t,n){if(we.isBrowser){var i=e.toDataURL(t,n);return r(e),Promise.resolve(i)}try{var o=e.toDataURL(t,n);return r(e),Promise.resolve(o)}catch(i){return Promise.error(i)}}},{key:"_encodeAsHTMLImage",value:function(e,t,n){return this._encodeAsDataURL(e,t,n).then((function(t){var n=new La;return n.src=t,r(e),Promise.resolve(n)}))}},{key:"_encodeAsBuffer",value:,{key:"_encodeAsMSBlob",value:function(e,t,n){var i=e.msToBlob();return r(e),Promise.resolve(i)}},{key:"_encodeAsBLOB",value:function(e,t,n){return new Promise((function(i,r){e.toBlob((function(e){i(e)}),t,n)}))}},{key:"_encodeImageFormat",value:function(e){var t=this._options,n=t.imageFormat,i=t.quality,r=this._options.renderType;switch(r===s.BLOB&&e.msToBlob&&!e.toBlob&&(r=s.MSBLOB),r){case s.IMAGE:return this._encodeAsHTMLImage(e,n,i);case s.DATAURL:return this._encodeAsDataURL(e,n,i);case s.BUFFER:return this._encodeAsBuffer(e,n,i);case s.MSBLOB:return this._encodeAsMSBlob(e,n,i);case s.BLOB:return this._encodeAsBLOB(e,n,i)}return Promise.reject(new Error("Unsupported RenderType: ".concat(r,"!")))}},{key:"_prepareSDK",value:function(){var e=this._sdk.getRenderer();this._sdkSettings={dimensions:e.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),rendererPixelRatio:e.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var t=e.isOfType("canvas");e.setPixelRatio(1),e.resizeTo(this._sdk.getFinalDimensions(),t),this._sdk.setAllOperationsToDirty(!0);var n=this._sdk.getOperationsStack();return n.forEach((function(e){e.disposeRenderTextures()})),n.disableCache(),this._sdk.render()}},{key:"_restoreSDK",value:function(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var e=this._sdk.getRenderer(),t=e.isOfType("canvas");return e.setPixelRatio(this._sdkSettings.rendererPixelRatio),e.resizeTo(this._sdkSettings.dimensions,t),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}},{key:"_createCanvasFromTexture",value:function(e){var t=this._sdk.getRenderer(),n=this._sdk.getFinalDimensions(),i=this._sdk.getRenderer().getContext(),r=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,r);var o=e.getBaseTexture().getGLTextureForRenderer(t);i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o,0);var a,s=new Uint8Array(n.x*n.y*4);if(i.readPixels(0,0,n.x,n.y,i.RGBA,i.UNSIGNED_BYTE,s),this._checkPixelsForTransparency(s)){var l=new ba.Sprite(e);l.setFilters([new ba.Filters.UnpremultiplyFilter]);var u=new ba.Container;u.addChild(l),(a=new ba.RenderTexture(t,n.x,n.y)).render(u);var c=a.getBaseTexture().getGLTextureForRenderer(t);i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,c,0),i.readPixels(0,0,n.x,n.y,i.RGBA,i.UNSIGNED_BYTE,s),t.setRenderTarget(),a.dispose()}var h=we.createCanvas();h.width=n.x,h.height=n.y;var d=h.getContext("2d"),f=d.createImageData(n.x,n.y);return f.data.set(s),d.putImageData(f,0,0),i.deleteFramebuffer(r),h}},{key:"_checkPixelsForTransparency",value:function(e){for(var t=this._sdk.getFinalDimensions(),n=t.x*t.y*4,i=3;i<n;i+=4)if(255!==e[i])return!0;return!1}}]),n}(Ht),ds.prototype.availableOptions={renderType:{type:"string",available:we.values(s),default:s.IMAGE},imageFormat:{type:"string",available:we.values(l),default:l.PNG},quality:{type:"number",default:.8},transparent:{type:"boolean",default:!0}},fs=ds})),Ls=M((function(){Ka(),os(),as(),Bs(),ss(),ls(),zs(),ps=ma.Rectangle,gs=ma.Constants,ms=ma.Engine,ys=ma.Utils,vs=ma.EventEmitter,_s=ma.Events,bs=ma.Vector2,xs=ma.Log,ks=ma.Base64,ma.Color,ws=function(e){return ys.byteArrayToString(ks.decode(e))};var e=gs;Ss=e.RenderType,Cs=e.ImageFormat,Ts=e.RendererType,Es=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,_.Z)(this,n),i=t.call(this),j((0,x.Z)(i),"_onContextLost",(function(){i.emit("context-lost")})),j((0,x.Z)(i),"_initWatermark",(function(){i._options.watermark&&i._options.watermark.watermarkURI&&(i._watermarkOperation=i.createOperation("watermark",{watermarkURI:i._options.watermark.watermarkURI,alignment:i._options.watermark.alignment,inset:i._options.watermark.inset,size:i._options.watermark.size,crossOrigin:i._options.crossOrigin}))})),i._onOperationUpdate=i._onOperationUpdate.bind((0,x.Z)(i)),i._onContextRestored=i._onContextRestored.bind((0,x.Z)(i)),i.version="3.9.0",i[ws("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,i._preferredRenderer=e,i._options=(0,C.Z)((0,C.Z)({},r),{},{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:Math.max("undefined"!==typeof window&&window.devicePixelRatio||1,1)}),i._options.smoothUpscaling&&(ms.BaseTexture.DefaultMagFilter=ms.BaseTexture.LinearFilter),i._options.extensions=Object.assign(i._options.extensions,{operations:[],controls:[],languages:[]}),xs.setLevel(i._options.logLevel),i[ws("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!1,i[ws("X29wdGlvbnM=")][ws("bGljZW5zZQ==")]){var o=ma[ws("TGljZW5zZUNoZWNrZXI=")];i._l=new o(i[ws("X29wdGlvbnM=")][ws("bGljZW5zZQ==")]),i._cv(!0).then((function(){i._ct()})).catch((function(e){xs.error(ws("TGljZW5zaW5n"),e.message)}))}else i[ws("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!0,i._l=new(ma[ws("RnJlZUxpY2Vuc2VDaGVja2Vy")]);i._defaultRenderMode=i._options.renderMode,i._renderMode=i._options.renderMode,i._textureQuality=i._options.textureQuality,i._offset=new bs,i._zoom=i._options.zoom,i._spriteScale=i._options.spriteScale,i._rotation=i._options.rotation,i._operations={},i._operationsStack=null,i.setOperationsStack(new Na),i._container=new ms.Container,i._sprite=new ms.Sprite,i._container.addChild(i._sprite),i._inputTexture=i._options.inputTexture,i._currentInputTexture=null,i._currentTexture=null,i._resizedTexture=null,i._resizedContainer=new ms.Container,i._resizedSprite=new ms.Sprite,i._resizedContainer.addChild(i._resizedSprite),i._texturesToDispose=[],i.setSmoothDownscaling(i._options.smoothDownscaling),i._registerOperations(),i._initRenderer();i._renderer.constructor.type;return i._options.displayWelcomeMessage,i[ws("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&xs.log(ws("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LmltZy5seS9zaWdudXAgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LmltZy5seS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2ltZy5seS9kb2NzL3Blc2RrL3dlYi9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg==")),i._options.image&&i.setImage(i._options.image,i._options.exif),i}return(0,b.Z)(n,[{key:"_ct",value:function(){this._l.exp()&&(this._l.isExp()?xs.error(ws("TGljZW5zaW5n"),ws("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5Lg==")):xs.warn(ws("TGljZW5zaW5n"),ws("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl())))}},{key:"_cv",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch((function(n){e[ws("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;var i=ws("SW52YWxpZCBsaWNlbnNlLg==");throw t&&(i="ELICEXP"===n.code?ws("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5Lg=="):"ELICINVHOST"===n.code?ws("VGhlIGJ1bmRsZSBpZGVudGlmaWVycyB0aGF0IHlvdSBzcGVjaWZpZWQgaW4geW91ciBsaWNlbnNlIGZpbGUgZG8gbm90IG1hdGNoIHRoZSBhcHAncyBidW5kbGUgaWRlbnRpZmllci4gUGxlYXNlIHVwZGF0ZSBhbmQgcmVkb3dubG9hZCB5b3VyIGxpY2Vuc2UgZnJvbSB5b3VyIGN1c3RvbWVyIGRhc2hib2FyZCBhdCBodHRwczovL3d3dy5pbWcubHkvbG9naW4u"):"ELICINVPLAT"===n.code?ws("VGhlIGxpY2Vuc2UgdGhhdCB5b3Ugc3BlY2lmaWVkIGlzIGZvciBhbm90aGVyIHBsYXRmb3JtLiBQbGVhc2UgZG93bmxvYWQgeW91ciBsaWNlbnNlIGZvciB0aGUgd2ViIHBsYXRmb3JtIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cuaW1nLmx5L2xvZ2luLg=="):"ELICINVFMT"===n.code?ws("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",typeof e._options.license):"ELICINV"===n.code?ws("VGhlIHNpZ25hdHVyZSBvZiB5b3VyIGxpY2Vuc2UgaXMgbm90IHZhbGlkLiBQbGVhc2UgdHJ5IHRvIHJlZG93bmxvYWQgeW91ciBsaWNlbnNlIGZyb20geW91ciBjdXN0b21lciBkYXNoYm9hcmQgYXQgaHR0cHM6Ly93d3cuaW1nLmx5L2xvZ2luLg=="):ws("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAaW1nLmx5IHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),n.message=i,new Error(n)}))}},{key:"_t",value:function(){this._l.t()}},{key:"_fl",value:,{key:"_onOperationUpdate",value:,{key:"_onContextRestored",value:function(){xs.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach((function(e){e.disposeRenderTextures()})),this.render()}},{key:"export",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ss.DATAURL,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cs.PNG,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this._cv(!0).then((function(){return e.hasChanges()&&e._t(),e._operationsStack.forEach((function(e){e.onBeforeExport()})),new fs(e,{renderType:t,imageFormat:n,quality:i,transparent:r}).export().then((function(t){return e._operationsStack.forEach((function(e){e.onAfterExport()})),Promise.resolve(t)}))}))}},{key:"render",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var n,i=this._renderer.getContext();i.startFrame&&i.startFrame(),xs.canLog("info")&&(n=new Wa("\u26a1\u26a1\u26a1","Frame rendering")),xs.info("\u26a1\u26a1\u26a1","Rendering starts");var r=this._operationsStack;return r.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then((function(t){"export"===e._renderMode&&(t=e._inputTexture),e._currentTexture=t,e._sprite.setTexture(t),e._container.updateTransform()})).then((function(){return r.validateSettings()})).then((function(){return!e._fl()&&e[ws("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]||(r.getByIdentifier("license-watermark")?r.moveToTop("license-watermark"):e.createOperation("license-watermark")),r.getByIdentifier("watermark")?r.moveToTop("watermark"):e._initWatermark(),r.render(e,e._currentTexture)})).then((function(n){var i=n.outputTexture;switch(e._currentTexture=i,e._sprite.setTexture(e._currentTexture),e._renderMode){case"dynamic":var r=e._renderer.getDimensions().clone().divide(2).add(e._offset);e._container.setScale(e._zoom/e.getTextureScale(),e._zoom/e.getTextureScale()),e._container.setPosition(r),e._sprite.setAnchor(.5,.5),e._sprite.setScale(e._spriteScale,e._spriteScale),e._sprite.setRotation(e._rotation);break;case"export":e._container.setScale(1,1),e._container.setPosition(0,0),e._sprite.setAnchor(0,0),e._sprite.setPosition(0,0),e._sprite.setScale(e._spriteScale,e._spriteScale),e._sprite.setRotation(0);break;case"adapter":e._container.setScale(1,1),e._container.setPosition(0,0),e._sprite.setAnchor(0,0),e._sprite.setPosition(0,0),e._sprite.setScale(1,1),e._sprite.setRotation(0)}return t&&e._renderer.render(e._container),n})).then((function(t){return n&&n.stop(),i.endFrame&&i.endFrame(),e._disposeTextures(),t}))}},{key:"getTextureScale",value:function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}},{key:"_prepareTexture",value:function(){var e=this;return new Promise((function(t,n){var i=e.getTextureScale();if(1===e._textureQuality)return t(e._inputTexture);var r,o=e.getInputDimensions().multiply(i).floor();e._resizedTexture?e._resizedTexture.getDimensions().equals(o)||(e._resizedTexture.resizeTo(o),r=!0):(e._resizedTexture=new ms.RenderTexture(e._renderer,o.x,o.y),r=!0),r&&(e._resizedSprite.setScale(i,i),e._resizedSprite.setTexture(e._inputTexture),e._resizedTexture.render(e._resizedContainer)),t(e._resizedTexture)}))}},{key:"_registerOperations",value:function(){for(var e in this._operations={},hs){var t=hs[e];this._operations[t.identifier]=t}this._operations=(0,C.Z)((0,C.Z)({},this._operations),this._options.extensions.operations)}},{key:"registerOperations",value:,{key:"setAllOperationsToDirty",value:,{key:"createOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this._operations[e];if(!i)throw new Error("No operation with identifier `".concat(e,"` found."));var r=new i(this,t);return n&&this.addOperation(r),r}},{key:"addOperation",value:function(e){this._operationsStack.push(e)}},{key:"removeOperation",value:function(e){this._operationsStack.remove(e)}},{key:"getInputDimensions",value:function(){var e=this._inputTexture.getFrame();return new bs(e.width,e.height)}},{key:"getFinalDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getInputDimensions(),n=this._operationsStack;return n.forEach((),e&&t.multiply(this._spriteScale),t.floor()}},{key:"getOutputDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(e).clone().multiply(this._zoom).floor()}},{key:"getOutputTextureDimensions",value:function(){var e=this.getTextureScale(),t=this.getInputDimensions().multiply(e).floor();return this._operationsStack.forEach((),t}},{key:"getCrossOrigin",value:function(){return ys.getCrossOrigin(this._options.crossOrigin||"Anonymous")}},{key:"_initRenderer",value:function(){var e,t,n={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor};if("export"!==this._renderMode&&this._options.canvas){var i=this._options.canvas;e=i.width,t=i.height}else if(this._inputTexture){var r=this.getFinalDimensions();e=r.x,t=r.y}else e=1,t=1;switch(this._preferredRenderer){case Ts.WEBGL:this._renderer=ms.autoDetectRenderer(e,t,n),this._renderer.on("context-restored",this._onContextRestored),this._renderer.on("context-lost",this._onContextLost);break;case Ts.CANVAS:this._renderer=ms.canvasRenderer(e,t,n),this._renderer.on("context-restored",this._onContextRestored);break;default:xs.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `".concat(this._preferredRenderer,"` not supported. Falling back to automatically detected renderer.")),this._renderer=ms.autoDetectRenderer(e,t,n)}}},{key:"resizeTo",value:,{key:"reset",value:function(){this._operationsStack.clear()}},{key:"parseExif",value:function(e){if(e){var t=e.src,n=null;if(n=t,za.isJPEG(t)){var i=null;try{i=za.fromBase64String(n)}catch(ES){}if(!i)return;return i}}}},{key:"_handleExifOrientation",value:function(){var e=this._exif.getTags();if(e&&e.Orientation){var t=1!==e.Orientation&&2!==e.Orientation,n=-1!==[2,4,5,7].indexOf(e.Orientation);if(t||n){if("undefined"===typeof navigator)this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(e);else{var i=window&&window.navigator&&window.navigator.userAgent||"";!i.match(/msie|trident/i)&&-1===i.indexOf("Edge")&&CSS.supports("image-orientation","from-image")||(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(e))}this._exif.setOrientation(1)}}}},{key:"correctExifOrientation",value:function(e){var t=this.parseExif(e);if(!t)return e;var n=t.getTags();if(n&&n.Orientation){var i=1!==n.Orientation&&2!==n.Orientation,r=-1!==[2,4,5,7].indexOf(n.Orientation);if(i||r){if("undefined"===typeof navigator){var o=this.createOperation("exif-orientation",{},!1);o.setTags(n),e=o.applyTo(e)}else{var a=window&&window.navigator&&window.navigator.userAgent||"";if(a.match(/msie|trident/i)||-1!==a.indexOf("Edge")||!CSS.supports("image-orientation","from-image")){var s=this.createOperation("exif-orientation",{},!1);s.setTags(n),e=s.applyTo(e)}}return t.setOrientation(1),n.Orientation=1,e}}return e}},{key:"hasImage",value:function(){return null!==this._image&&"undefined"!==typeof this._image}},{key:"getImage",value:function(){return this._image}},{key:"disposeTexture",value:function(e){this._texturesToDispose.push(e)}},{key:"_disposeTextures",value:,{key:"setImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._disposeTextures(),this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=e,this._image=e,this._exif=t||this.parseExif(e),this._exif&&this._handleExifOrientation();var i=new ms.BaseTexture(this._image),r=new ps(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);n&&(r.width=n.x,r.height=n.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this.disposeTexture(this._inputTexture.getBaseTexture()),this._inputTexture=new ms.Texture(i,r),this._currentTexture=this._inputTexture,this._sprite.clearTexture(!1),this._sprite.setTexture(this._inputTexture),this.emit("new-image"),this.setAllOperationsToDirty(!0)}},{key:"setInputTexture",value:function(e){this._inputTexture=e}},{key:"getCanvas",value:function(){return this._renderer.getCanvas()}},{key:"setCanvas",value:function(e){this._renderer.setCanvas(e)}},{key:"getSprite",value:function(){return this._sprite}},{key:"getContainer",value:function(){return this._container}},{key:"getOperationsStack",value:function(){return this._operationsStack}},{key:"setOperationsStack",value:function(e){this._operationsStack&&this._operationsStack.off(_s.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=e,this._operationsStack.on(_s.OPERATION_UPDATED,this._onOperationUpdate)}},{key:"getOperations",value:function(){return this._operations}},{key:"getRenderer",value:function(){return this._renderer}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(e,t){e instanceof bs?this._offset.copy(e):this._offset.set(e,t)}},{key:"getRenderMode",value:function(){return this._renderMode}},{key:"setRenderMode",value:function(e){this._renderMode=e}},{key:"getZoom",value:function(){return this._zoom}},{key:"setZoom",value:function(e){this._zoom=e,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}},{key:"getTextureQuality",value:,{key:"setTextureQuality",value:function(e){e!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,e),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}},{key:"getSpriteScale",value:function(){return this._spriteScale}},{key:"setSpriteScale",value:function(e){this._spriteScale=e,this._sprite.setScale(e,e),this._sprite.updateTransform()}},{key:"getPixelRatio",value:function(){return this._options.pixelRatio}},{key:"getExif",value:function(){return this._exif}},{key:"getOptions",value:function(){return this._options}},{key:"getInputTexture",value:function(){return this._inputTexture}},{key:"setSmoothDownscaling",value:function(e){this._options.smoothDownscaling=e,this._sprite.setSmoothDownscaling(e),this._resizedSprite.setSmoothDownscaling(e)}},{key:"setRotation",value:function(e){this._rotation=e}},{key:"getRotation",value:function(){return this._rotation}},{key:"hasChanges",value:function(){return this.getOperationsStack().hasChanges()}},{key:"dispose",value:function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}}]),n}(vs),Ds=Es})),Us=M((function(){Xe(),Et(),se(),$a(),qe(),Dt(),yn(),es(),It(),os(),as(),ua(),ga(),ss(),Ye(),zs(),us(),Ls(),Ds.version="3.9.0",Ds.Math=pa,Ds.Operations=hs,Ds.Engine=ba,Ds.Color=ct,Ds.LicenseChecker=Xo,Ds.Operation=Ga,Ds.EventEmitter=dt,Ds.Utils=we,Ds.Env=xa,Ds.OperationsStack=Na,Ds.EXIF=za,Ds.Image=La,Ds.Configurable=Ht,Ds.Log=Re,Ds.Loaders=lt,Ds.RenderType=s,Ds.ImageFormat=l,Ds.OptionType=u,Ds.RendererType=h,Ds.UniformType=c,Ds.Base64=be,Is={},Ds.UI=Is,Rs=Ds})),Ns=M((),Hs=M((function(){Os="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform float u_whites;\nuniform float u_blacks;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n\n  float offset = luminance + shadowContrast + highlight;\n  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n  \n  // Apply Color Matrix\n  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);\n  color = clamp(color, 0.0, 1.0);\n  color.rgb *= color.a; // Reset premultiplied alpha\n\n  gl_FragColor = color;\n}\n"}));ar Ws,Vs,Gs,qs,Ys,Xs,Ks,Js,Qs,$s,el,tl,nl,il,rl,ol,al,sl,ll,ul,cl,hl,dl,fl,pl,gl,ml,yl,vl,_l,bl,xl,kl,wl,Sl,Cl,Tl,El,Dl,Il,Rl,Ol,Fl,Al,Pl,Zl,Ml,zl,Bl,Ll,Ul,Nl,Hl,jl,Wl,Vl,Gl,ql,Yl,Xl,Kl,Jl,Ql,$l,eu,tu,nu,iu,ru,ou,au,su,lu,uu,cu,hu,du,fu,pu,gu,mu,yu,vu,_u,bu,xu,ku,wu,Su,Cu,Tu,Eu,Du,Iu,Ru,Ou,Fu=M((function(){Ns(),Hs(),Fs=pa.ColorMatrix,As=1e-7,Ps=function(e){return(Math.max(e.r,e.g,e.b)+Math.min(e.r,e.g,e.b))/2},(Zs=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=Os,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options,l=s.colorMatrix,u=s.gamma,c=s.shadows,h=s.highlights,d=s.whites,f=s.blacks,p=1!==u,g=0!==c||0!==h,m=new ct(0,0,0,0),y=0;y<i.width*i.height;y++){var v=4*y;if(m.r=a.data[v]/255,m.g=a.data[v+1]/255,m.b=a.data[v+2]/255,p&&(m.r=Math.pow(m.r,1/Math.max(u,As)),m.g=Math.pow(m.g,1/Math.max(u,As)),m.b=Math.pow(m.b,1/Math.max(u,As))),g){var _=Ps(m),b=c>=0?we.clamp(Math.pow(_,1/(c+1))+-.76*Math.pow(_,2/(c+1))-_,0,Math.max(c,1)):-we.clamp(Math.pow(_,1/(1-c))+-.76*Math.pow(_,2/(1-c))-_,0,Math.max(-c,1)),x=h<0?we.clamp(1-Math.pow(1-_,1/(1-h))- -.8*Math.pow(1-_,2/(1-h))-_,-1,0):-we.clamp(1-Math.pow(1-_,1/(1+h))- -.8*Math.pow(1-_,2/(1+h))-_,-1,0),k=b*_*_,w=b-k,S=_+k+x;m.r=we.clamp(S*((m.r+w)/Math.max(_,As)),0,1),m.g=we.clamp(S*((m.g+w)/Math.max(_,As)),0,1),m.b=we.clamp(S*((m.b+w)/Math.max(_,As)),0,1)}(m=l.apply(m).clamp(0,1)).r=js(m.r,0,1,f/2,1+d/2),m.g=js(m.g,0,1,f/2,1+d/2),m.b=js(m.b,0,1,f/2,1+d/2),a.data[v]=255*m.r,a.data[v+1]=255*m.g,a.data[v+2]=255*m.b}o.putImageData(a,0,0)}}]),n}(ba.Filter)).prototype.availableOptions={gamma:{type:"number",default:1,uniformType:"f"},shadows:{type:"number",default:0,uniformType:"f"},highlights:{type:"number",default:1,uniformType:"f"},whites:{type:"number",default:0,uniformType:"f"},blacks:{type:"number",default:0,uniformType:"f"},colorMatrix:{type:"color-matrix",default:new Fs,uniformType:"mat4"},colorOffset:{type:"array",default:[],uniformType:"4f"}},Ms=Zs})),Au=M((function(){Ws="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvec4 unpremultiply(vec4 col) {\n    col.rgb /= max(col.a, EPSILON);\n    return col;\n}\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n    color = unpremultiply(color);\n\n    // L = Left, R = Right, C = Center, T = Top, B = Bottom\n    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n    \n    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 mergedColor = color;\n    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;\n    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;\n    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;\n\n    mergedColor /= 9.0;\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n\n    color.rgb *= color.a; // Premultiply alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"})),Pu=M((function(){Ns(),Au(),Vs=pa.Vector2,Gs=pa.ColorMatrix,qs=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=Ws,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){var i=n.getContext(),r=t.getCanvas(),o=t.getContext(),a=this._options.clarity,s=this._options.colorMatrix,l=new ct(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),u=r.width,c=r.height,h=o.getImageData(0,0,u,c),d=i.createImageData(u,c);this.canvasShader(h,d,a,s,l),i.putImageData(d,0,0)}},{key:"canvasShader",value:function(e,t,n,i,r){for(var o=function(e,t,n){return Math.min(Math.max(e,t),n)},a=s=4*e.width,l=e.data.length,u=l-1,c=e.data,h=t.data,d=new ct,f=2295,p=function(e){return c[e=(e=e<0?0:e)>u?u:e]},g=0;g<l;g+=4){var m=p(g+0),y=p(g+1),v=p(g+2),_=p(g+3),b=(m+p(g-4-s+0)+p(g-4+0)+p(g-4+s+0)+p(g-s+0)+p(g+s+0)+p(g+4-s+0)+p(g+4+0)+p(g+4+s))/f,x=(y+p(g-4-s+1)+p(g-4+1)+p(g-4+s+1)+p(g-s+1)+p(g+s+1)+p(g+4-s+1)+p(g+4+1)+p(g+4+s+1))/f,k=(v+p(g-4-s+2)+p(g-4+2)+p(g-4+s+2)+p(g-s+2)+p(g+s+2)+p(g+4-s+2)+p(g+4+2)+p(g+4+s+2))/f,w=(_+p(g-4-s+3)+p(g-4+3)+p(g-4+s+3)+p(g-s+3)+p(g+s+3)+p(g+4-s+3)+p(g+4+3)+p(g+4+s+3))/f;_/=255;var S=o(.3*(m/=255)+.59*(y/=255)+.1*(v/=255),.111111,.999999),C=Math.min(a(1-S,0,.11),a(S,0,.11)),T=3.7*n*C,E=Math.pow(2,.27*n*C),D=o(m+o((m-b)*T,0,10),0,1)*E,I=o(y+o((y-x)*T,0,10),0,1)*E,R=o(v+o((v-k)*T,0,10),0,1)*E,O=o(_+o((_-w)*T,0,10),0,1);d.set(D,I,R,O);var F=i.apply(d).clamp(0,1);h[g+0]=255*F.r,h[g+1]=255*F.g,h[g+2]=255*F.b,h[g+3]=255*F.a}}}]),n}(ba.Filter),qs.prototype.availableOptions={clarity:{type:"number",default:0,uniformType:"f"},pixelDimension:{type:"vector2",default:new Vs(100,100),uniformType:"2f"},colorMatrix:{type:"color-matrix",default:new Gs,uniformType:"mat4"},colorOffset:{type:"array",default:[],uniformType:"4f"}},Ys=qs})),Zu=M((function(){Xs="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec2 u_pixelDimension;\nuniform float u_sharpness;\n \nconst float EPSILON = 0.000001;\n \nvoid main() {\n    vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n\n    float factor        = mix(0.2, -1.0, float(u_sharpness > 0.0));\n    vec4 sharpenedColor = mix(0.2,  5.0, float(u_sharpness > 0.0)) * color;\n \n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2(-1.0,  0.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0, -1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0,  1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 1.0,  0.0)), 0.0, 1.0);\n \n    color.rgb /= max(color.a, EPSILON); // unpremultiply\n    sharpenedColor.rgb /= max(sharpenedColor.a, EPSILON); // unpremultiply\n \n    sharpenedColor = clamp(sharpenedColor, 0.0, 1.0);\n \n    color = clamp(mix(color, sharpenedColor, abs(u_sharpness)), 0.0, 1.0);\n      \n    gl_FragColor = vec4(color.rgb * color.a, color.a); // premultiply\n}"})),Mu=M((function(){Ns(),Zu(),Ks=pa.Vector2,Js=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=Xs,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){var i=n.getContext(),r=t.getCanvas(),o=t.getContext(),a=this._options.sharpness,s=r.width,l=r.height,u=o.getImageData(0,0,s,l),c=i.createImageData(s,l);this.canvasShader(u,c,a),i.putImageData(c,0,0)}},{key:"canvasShader",value:function(e,t,n){for(var i=function(e,t,n){return Math.min(Math.max(e,t),n)},r=e.width,o=e.height,a=e.data,s=t.data,l=function(e,t,n){return e*(1-n)+t*n},u=function(e){return i(a[e]/255,0,1)},c=function(e,t){var n=i(e,0,r-1),a=i(t,0,o-1);return 4*(n+r*a)},h=[],d=[],f=[-1,0,0,1],p=[0,-1,1,0],g=n>0?-1:.2,m=n>0?5:.2,y=Math.abs(n),v=0;v<r;v++)for(var _=0;_<o;_++){var b=c(v,_);h[0]=u(b+0),h[1]=u(b+1),h[2]=u(b+2),h[3]=u(b+3),d[0]=m*h[0]*h[3],d[1]=m*h[1]*h[3],d[2]=m*h[2]*h[3],d[3]=m*h[3];for(var x=0;x<4;x++){var k=c(v+f[x],_+p[x]),w=u(k+3);d[3]+=g*w;for(var S=0;S<3;S++)d[S]+=g*u(k+S)*w}for(var C=0;C<3;C++)d[C]/=Math.max(d[3],1e-6),d[C]=i(d[C],0,1);d[3]=i(d[3],0,1);for(var T=0;T<4;T++)h[T]=i(l(h[T],d[T],y),0,1),s[b+T]=255*h[T]}}}]),n}(ba.Filter),Js.prototype.availableOptions={sharpness:{type:"number",default:0,uniformType:"f"},pixelDimension:{type:"vector2",default:new Ks(100,100),uniformType:"2f"}},Qs=Js})),zu=M((function(){$s="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Range (-1.0 - 1.0)\nuniform float u_temperature;\n\nconst lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);\n\nconst mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);\nconst mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);\n\nconst float EPSILON = 0.0000001;\n\nvarying vec2 v_texCoord;\nvoid main() {\n  float temperature = u_temperature;\n  const float tint = 0.0;\n  vec4 source = texture2D(u_image, v_texCoord);\n\n  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha\n\n  vec3 yiq = RGBtoYIQ * source.rgb;\n  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);\n  vec3 rgb = YIQtoRGB * yiq;\n\n  vec3 processed = mix(\n    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),\n    (2.0 * rgb * warmFilter),\n    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)\n  );\n\n  vec4 color = vec4(mix(rgb, processed, temperature), source.a);\n\n  color.rgb *= color.a;   // Premultiply alpha again\n\n  gl_FragColor = color;\n}\n"})),Bu=M((function(){Ns(),zu(),pa.Vector3,el=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=$s,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){var i=n.getContext(),r=t.getCanvas(),o=t.getContext(),a=this._options.temperature,s=r.width,l=r.height,u=o.getImageData(0,0,s,l),c=i.createImageData(s,l);this.canvasShader(u,c,a),i.putImageData(c,0,0)}},{key:"canvasShader",value:function(e,t,n){for(var i=r=o=a=e.data.length,s=a-1,l=e.data,u=t.data,c=function(e){return l[e=(e=e<0?0:e)>s?s:e]},h=[.93,.54,0],d=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311],f=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702],p=0;p<a;p+=4){var g=c(p+0)/255,m=c(p+1)/255,y=c(p+2)/255,v=c(p+3)/255,_=o(d,[g,m,y]);_.z=i(_.z+0,-.5226,.5226);var b=o(f,_),x=[b[0]<.5?2*b[0]*h[0]:1-2*(1-b[0])*(1-h[0]),b[1]<.5?2*b[1]*h[1]:1-2*(1-b[1])*(1-h[1]),b[2]<.5?2*b[2]*h[2]:1-2*(1-b[2])*(1-h[2])];u[p+0]=255*r(b[0],x[0],n),u[p+1]=255*r(b[1],x[1],n),u[p+2]=255*r(b[2],x[2],n),u[p+3]=255*v}}}]),n}(ba.Filter),el.prototype.availableOptions={temperature:{type:"number",default:0,uniformType:"f"}},tl=el})),Lu=M((function(){Ns(),Fu(),Pu(),Mu(),Bu(),nl=pa.ColorMatrix,il=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._clarityFilter=new Ys,e._temperatureFilter=new tl,e._sharpnessFilter=new Qs,e._filter=new Ms,e._sprite.setFilters([e._clarityFilter,e._temperatureFilter,e._filter]),e}return(0,b.Z)(n,[{key:"_render",value:function(e){var t=e.getDimensions();t.x=1/t.x,t.y=1/t.y;var n=new nl;n.multiply(nl.createSaturationMatrix(-.3*this._options.clarity+1)),n.multiply(nl.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:t,colorMatrix:n,colorOffset:n.getOffsets()}),this._temperatureFilter.set({temperature:this._options.temperature}),this._sharpnessFilter.set({sharpness:this._options.sharpness,pixelDimension:t});var i=new nl;i.multiply(nl.createExposureMatrix(this._options.exposure)),i.multiply(nl.createSaturationMatrix(this._options.saturation+1)),i.multiply(nl.createContrastMatrix((this._options.contrast>0?2*this._options.contrast:this._options.contrast)+1)),i.multiply(nl.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:i,colorOffset:i.getOffsets()});var r=[];return 0!==this._options.clarity&&r.push(this._clarityFilter),0!==this._options.sharpness&&r.push(this._sharpnessFilter),0!==this._options.temperature&&r.push(this._temperatureFilter),r.push(this._filter),this._sprite.setFilters(r),this._renderTexture.render(this._container),Promise.resolve()}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._filter.dispose(),this._clarityFilter.dispose(),this._temperatureFilter.dispose(),this._sharpnessFilter.dispose()}}]),n}(Ga),il.identifier="adjustments",il.prototype.availableOptions={brightness:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:"number",default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:"number",default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1},sharpness:{type:"number",default:0,minValue:-1,midValue:0,maxValue:1}},Rs.Operations.AdjustmentsOperation=il,rl=il})),Uu=M((function(){ol="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    const float steps = 30.0;\n\n    for (float t = -steps; t <= steps; t++) {\n        float percent = (t + offset - 0.5) / steps;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"})),Nu=M((function(){Ns(),Uu(),al=pa.Vector2,sl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._fragmentSource=ol,e._lastBlurRadius=null,e._lastDimensions=new al(0,0),e._blurredRenderTarget=new ba.CanvasRenderTarget(100,100,1),e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("low"!==this._options.blurQuality){var o=t.getCanvas(),a=t.getContext(),s=n.getContext();this._lastBlurRadius===this._options.blurRadius&&s.drawImage(o,0,0);for(var l=a.getImageData(0,0,o.width,o.height),u=s.getImageData(0,0,o.width,o.height),c=this._options.blurRadius,h=this._options.delta,d=30,f=0;f<o.width;f++)for(var p=0;p<o.height;p++){var g=f+p*o.width,m=4*g,y=0,v=0,_=0,b=0,x=0;r&&(c=r(f/o.width,p/o.height));for(var k=this._random(f,1-p/o.height),w=-d;w<=d;w++){var S=(w+k-.5)/d,C=1-Math.abs(S),T=h.x*S*c,E=h.y*S*c,D=Math.max(Math.min(f+T,o.width-1),0),I=Math.max(Math.min(p+E,o.height-1),0),R=4*(Math.round(I)*o.width+Math.round(D)),O=l.data[R+3],F=O*l.data[R],A=O*l.data[R+1],P=O*l.data[R+2];y+=F*C,v+=A*C,_+=P*C,b+=O*C,x+=C}y/=x,v/=x,_/=x,b/=x,u.data[m]=y/b,u.data[m+1]=v/b,u.data[m+2]=_/b,u.data[m+3]=b}s.putImageData(u,0,0),this._lastDimensions.copy(new al(o.width,o.height))}else this._renderLQBlur(e,t,n,i)}},{key:"_renderLQBlur",value:function(e,t,n,i){var r=t.getDimensions(),o=!this._lastDimensions.equals(r);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),n.setPixelRatio(t.getPixelRatio()),n.resizeTo(t.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||o)&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),n.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(r)}},{key:"_random",value:function(e,t){var n=12.9898*e+78.233*t,i=n-3.14*Math.floor(n/3.14),r=43758.5453*Math.sin(i);return r-Math.floor(r)}}]),n}(ba.Filter),sl.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},delta:{type:"vector2",default:new al(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new al(100,100),uniformType:"2f"},blurQuality:{type:"string",default:"low"}},ll=sl})),Hu=M((function(){Ns(),Nu(),ul=pa.Vector2,cl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];(e=t.call.apply(t,[this].concat(r)))._lastBlurRadius=e._options.blurRadius;var a={blurQuality:{type:"string"}};return e._horizontalFilter=new ll({},a),e._verticalFilter=new ll({},a),e._sprite.setFilters([e._horizontalFilter,e._verticalFilter]),e._horizontalFilter.setDelta(new ul(.5,.5)),e._verticalFilter.setDelta(new ul(-.5,.5)),e._filter=new ll({},a),e}return(0,b.Z)(n,[{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:,{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i={blurRadius:this._options.blurRadius*n,texSize:t,blurQuality:"high"};return this._horizontalFilter.set(i),this._verticalFilter.set(i),this._renderTexture.render(this._container),Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=this._options.blurRadius,n=e.getDimensions();return this._filter.set({blurRadius:t,texSize:n,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}},{key:"transform",value:function(e){var t=this.getBlurRadius(),n=e.applyToRelativeSize(t);this.set({blurRadius:n},!1)}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),n}(Ga),cl.identifier="blur",cl.prototype.availableOptions={blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:!1}},Rs.Operations.BlurOperation=cl,hl=cl})),ju=M((function(){dl="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"})),Wu=M((function(){Ns(),ju(),(fl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=dl,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){var i=t.getCanvas(),r=n.getContext(),o=this._options.filteredCanvas;r.save(),r.drawImage(i,0,0),r.globalAlpha=this._options.intensity,r.drawImage(o,0,0),r.restore()}}]),n}(ba.Filter)).prototype.availableOptions={filteredImage:{type:"number",default:1,uniformType:"i"},filteredCanvas:{type:"object",default:null},intensity:{type:"number",default:1,uniformType:"f"}},pl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,_.Z)(this,e),this._intensity=t,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new ba.Container,this._sprite=new ba.Sprite,this._container.addChild(this._sprite),this._blendFilter=new fl}return(0,b.Z)(e,[{key:"push",value:function(e){this._stack.push(e)}},{key:"clear",value:function(){this._stack=[]}},{key:"render",value:function(e,t,n){if(this.isEmpty())return Promise.resolve();var i=e.getRenderer();this._sprite.setTexture(t);var r=this._renderTextures[i.id];if(!r){var o=e.getSprite().getTexture().getFrame();r=new ba.RenderTexture(e.getRenderer(),o.width,o.height),this._renderTextures[i.id]=r}var a=n.getDimensions();r.resizeTo(a);var s=this.isDirtyForRenderer(i);if(s){this._stack.forEach((function(t){t.update(e)}));var l=this._stack.map((function(e){return e.getFilter()}));this._sprite.setFilters(l),r.render(this._container),this.setDirtyForRenderer(!1,i)}if(this._blendFilter.setIntensity(this._intensity),i.isOfType("canvas"))this._blendFilter.setFilteredCanvas(r.getRenderTarget().getCanvas());else if(i.isOfType("webgl")){var u=r.getBaseTexture();u.setGLUnit(this._blendFilter.getFilteredImage()),i.updateTexture(u,!1)}return this._sprite.setFilters([this._blendFilter]),n.clear(ct.TRANSPARENT),n.render(this._container),s&&this.disposeRenderTextures(),Promise.resolve()}},{key:"setIntensity",value:function(e){this._intensity=e}},{key:"isEmpty",value:function(){return 0===this._stack.length}},{key:"isDirtyForRenderer",value:function(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}},{key:"setDirtyForRenderer",value:,{key:"setDirty",value:function(e){for(var t in this._dirtiness)this._dirtiness[t]=e}},{key:"disposeRenderTextures",value:,{key:"dispose",value:function(){this.disposeRenderTextures(),this._stack.forEach((function(e){return e.dispose()})),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}}]),e}(),gl=pl})),Vu=M((function(){Ns(),Wu(),ml=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.Z)(this,n),(e=t.call(this,i,(0,C.Z)({intensity:{type:"number",default:1,setter:function(e){return this._stack&&this._stack.setIntensity(e),e}},dirty:{type:"boolean",default:!0}},r)))._stack=new gl(e._options.intensity),e}return(0,b.Z)(n,[{key:"render",value:function(e,t,n){var i=this;return this._stack.render(e,t,n).then(()}},{key:"setDirtyForRenderer",value:,{key:"disposeRenderTextures",value:function(){this._stack.disposeRenderTextures()}},{key:"dispose",value:]),n}(Ht),ml.identifier=null,ml.isIdentity=!1,ml.displayName=null,ml.PrimitivesStack=gl,yl=ml})),Gu=M((function(){vl="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"})),qu=M((function(){Ns(),_l=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"update",value:function(){}},{key:"getFilter",value:function(){return this._filter}},{key:"dispose",value:]),n}(Ht),bl=_l})),Yu=M((function(){Ns(),Gu(),qu(),(xl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=vl,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.brightness;if(0!==s){s*=255;for(var l=0;l<i.width*i.height;l++){var u=4*l;a.data[u]+=s,a.data[u+1]+=s,a.data[u+2]+=s}o.putImageData(a,0,0)}else o.putImageData(a,0,0)}}]),n}(ba.Filter)).prototype.availableOptions={brightness:{type:"number",default:0,uniformType:"f"}},kl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new xl,e}return(0,b.Z)(n,[{key:"update",value:function(){this._filter.setBrightness(this._options.brightness)}}]),n}(bl),kl.prototype.availableOptions=xl.prototype.availableOptions,wl=kl})),Xu=M((function(){Sl="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"})),Ku=M((function(){Ns(),Xu(),qu(),(Cl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=Sl,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.contrast;if(1!==s){for(var l=0;l<i.width*i.height;l++){var u=4*l;a.data[u]=(a.data[u]-127)*s+127,a.data[u+1]=(a.data[u+1]-127)*s+127,a.data[u+2]=(a.data[u+2]-127)*s+127}o.putImageData(a,0,0)}}}]),n}(ba.Filter)).prototype.availableOptions={contrast:{type:"number",default:1,uniformType:"f"}},Tl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new Cl,e}return(0,b.Z)(n,[{key:"update",value:function(){this._filter.setContrast(this._options.contrast)}}]),n}(bl),Tl.prototype.availableOptions=Cl.prototype.availableOptions,El=Tl})),Ju=M((function(){Dl="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"})),Qu=M((function(){Ns(),Ju(),qu(),Il=pa.ColorMatrix,(Rl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=Dl,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.colorMatrix,l=new ct(0,0,0,0),u=0;u<i.width*i.height;u++){var c=4*u;l.r=a.data[c]/255,l.g=a.data[c+1]/255,l.b=a.data[c+2]/255,l=s.apply(l),a.data[c]=255*l.r,a.data[c+1]=255*l.g,a.data[c+2]=255*l.b}o.putImageData(a,0,0)}}]),n}(ba.Filter)).prototype.availableOptions={colorMatrix:{type:"color-matrix",default:new Il,uniformType:"mat4"},colorMatrixOffset:{type:"array",default:[],uniformType:"4f"}},Ol=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new Rl,e}return(0,b.Z)(n,[{key:"update",value:function(){this._filter.setColorMatrix(this._options.colorMatrix)}}]),n}(bl),Ol.prototype.availableOptions=Rl.prototype.availableOptions,Fl=Ol})),$u=M((function(){Al="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"})),ec=M((function(){Ns(),$u(),qu(),(Pl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=Al,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=[.3,.59,.11],l=this._options.desaturation,u=0;u<i.width*i.height;u++){var c=4*u,h=s[0]*a.data[c]/255+s[1]*a.data[c+1]/255+s[2]*a.data[c+2]/255;a.data[c]+=(255*h-a.data[c])*l,a.data[c+1]+=(255*h-a.data[c+1])*l,a.data[c+2]+=(255*h-a.data[c+2])*l}o.putImageData(a,0,0)}}]),n}(ba.Filter)).prototype.availableOptions={desaturation:{type:"number",default:1,uniformType:"f"}},Zl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new Pl,e}return(0,b.Z)(n,[{key:"update",value:function(){this._filter.setDesaturation(this._options.desaturation)}}]),n}(bl),Zl.prototype.availableOptions=Pl.prototype.availableOptions,Ml=Zl})),tc=M((function(){zl='precision highp float;\n\nuniform sampler2D u_image;\nuniform vec4 u_lightColor;\nuniform vec4 u_darkColor;\nuniform float u_intensity;\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.0000001;\nconst vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);\n\nvec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {\n  vec4 color = clamp(sampledCol, 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON);\n  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES\n \n  // Apply intensity as "symmetric gamma"\n  if (intensity > 0.0) {\n    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));\n  } else {\n    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));\n  }\n \n  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion\n  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale\n  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);\n \n  // Apply DuoTone\n  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));\n  duotone.a *= color.a;\n  \n  duotone.rgb *= duotone.a;\n\n  return duotone;\n}\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);\n}'})),nc=M((function(){Ns(),tc(),qu(),Bl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=zl,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options,l=s.lightColor,u=s.darkColor,c=s.intensity,h=0;h<i.width*i.height;h++){var d=4*h,f=a.data[d]/255,p=a.data[d+1]/255,g=a.data[d+2]/255,m=a.data[d+3]/255,y=new ct(f,p,g,m),v=this._duoToneKernel(y,l,u,c);a.data[d]=255*v.r,a.data[d+1]=255*v.g,a.data[d+2]=255*v.b,a.data[d+3]=255*v.a}o.putImageData(a,0,0)}},{key:"_duoToneKernel",value:function(e,t,n,i){if(e.clone().clamp(0,1),i>0){var r=Math.max(i+1,1e-7);e.r=1-Math.pow(1-e.r,r),e.g=1-Math.pow(1-e.g,r),e.b=1-Math.pow(1-e.b,r)}else{var o=Math.max(1-i,1e-7);e.r=Math.pow(e.r,o),e.g=Math.pow(e.g,o),e.b=Math.pow(e.b,o)}var a=.2126*e.r+.7152*e.g+.0722*e.b,s=Math.min(Math.max(a,0),1),l=n.clone().mix(t,s);return l.a*=e.a,l}}]),n}(ba.Filter),Bl.prototype.availableOptions={lightColor:{type:"color",default:ct.RED,uniformType:"4f"},darkColor:{type:"color",default:ct.BLACK,uniformType:"4f"},intensity:{type:"number",default:.5,uniformType:"f"}},Ll=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new Bl,e}return(0,b.Z)(n,[{key:"update",value:function(){this._filter.setLightColor(this._options.lightColor),this._filter.setDarkColor(this._options.darkColor);var e=2*this._options.intensity-1;this._filter.setIntensity(e)}}]),n}(bl),Ll.prototype.availableOptions=Bl.prototype.availableOptions,Ul=Ll})),ic=M((function(){Nl="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"})),rc=M((function(){Ns(),ic(),qu(),(Hl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=Nl,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.gamma,l=new Float32Array(256),u=0;u<256;u++)l[u]=255*Math.pow(u/255,s.r);for(var c=new Float32Array(256),h=0;h<256;h++)c[h]=255*Math.pow(h/255,s.g);for(var d=new Float32Array(256),f=0;f<256;f++)d[f]=255*Math.pow(f/255,s.b);for(var p=0;p<i.width*i.height;p++){var g=4*p;a.data[g]=l[a.data[g]],a.data[g+1]=c[a.data[g+1]],a.data[g+2]=d[a.data[g+2]]}o.putImageData(a,0,0)}}]),n}(ba.Filter)).prototype.availableOptions={gamma:{type:"color",default:ct.WHITE,uniformType:"3f"}},jl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new Hl,e}return(0,b.Z)(n,[{key:"update",value:function(){this._filter.setGamma(this._options.gamma)}}]),n}(bl),jl.prototype.availableOptions=Hl.prototype.availableOptions,Wl=jl})),oc=M((function(){Vl="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"})),ac=M((function(){Ns(),oc(),qu(),(Gl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=Vl,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i,r=t.getCanvas(),o=t.getContext(),a=n.getContext(),s=o.getImageData(0,0,r.width,r.height),l=this._options.color,u=0;u<r.width;u++)for(var c=0;c<r.height;c++){var h=4*(r.width*c+u),d=u/r.width,f=c/r.height,p=(d-.5)/.75,g=(f-.5)/.75,m=p*p,y=g*g;i=1-(m+y),i=Math.min(Math.max(i,.1),1),s.data[h]*=i*l.r,s.data[h+1]=s.data[h+1]*(i*l.g),s.data[h+2]=s.data[h+2]*(i*l.b),s.data[h+3]=255}a.putImageData(s,0,0)}}]),n}(ba.Filter)).prototype.availableOptions={color:{type:"color",default:ct.WHITE,uniformType:"3f"}},ql=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new Gl,e}return(0,b.Z)(n,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),n}(bl),ql.prototype.availableOptions=Gl.prototype.availableOptions,Yl=ql})),sc=M((function(){Xl="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"})),lc=M((function(){Ns(),sc(),qu(),Kl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=Xl,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var l=0;l<i.height;l++){var u=4*(i.width*l+s);a.data[u+2]=.33*a.data[u+1],a.data[u]*=.6,a.data[u+2]+=.33*a.data[u],a.data[u+1]=.7*a.data[u+1],a.data[u+3]=255}o.putImageData(a,0,0)}}]),n}(ba.Filter),Jl=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new Kl,e}return(0,b.Z)(n)}(bl),Ql=Jl})),uc=M((function(){$l="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"})),cc=M((function(){Ns(),uc(),qu(),eu=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=$l,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var l=0;l<i.height;l++){var u=4*(i.width*l+s),c=.2125*a.data[u]+.7154*a.data[u+1]+.0721*a.data[u+2];a.data[u]=c,a.data[u+1]=c,a.data[u+2]=c}o.putImageData(a,0,0)}}]),n}(ba.Filter),tu=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new eu,e}return(0,b.Z)(n)}(bl),nu=tu})),hc=M((function(){iu="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"})),dc=M((function(){Ns(),hc(),qu(),ru=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._fragmentSource=iu,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.lookupTableData,l=0;l<i.width*i.height;l++){var u=4*l,c=a.data[u];a.data[u]=s[4*c];var h=a.data[u+1];a.data[u+1]=s[1+4*h];var d=a.data[u+2];a.data[u+2]=s[2+4*d]}o.putImageData(a,0,0)}}]),n}(ba.Filter),ru.prototype.availableOptions={lookupTable:{type:"number",default:1,uniformType:"i"},lookupTableData:{type:"array",default:[]}},ou=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new ru({lookupTable:e._options.textureGLUnit}),e._textures={},e._renderers={},e}return(0,b.Z)(n,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType("webgl")?this._updateWebGLTexture(e):t.isOfType("canvas")&&this._filter.setLookupTableData(this._options.data)}},{key:"_updateWebGLTexture",value:function(e){if("undefined"===typeof this._options.data)throw new Error("LookupTable: No data specified.");var t=new Uint8Array(this._options.data),n=e.getRenderer(),i=n.id;this._renderers[i]=n,this._textures[i]||(this._textures[i]=new ba.BaseTexture);var r=this._textures[i],o=new ba.PixelArrayImage(256,1,t);r.setSource(o),r.setGLUnit(this._options.textureGLUnit),n.isOfType("webgl")&&n.updateTexture(r)}},{key:"dispose",value:function(){for(var e in(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._textures)this._textures[e].dispose(),delete this._textures[e];delete this._options.data}}]),n}(bl),au=ou})),fc=M((function(){su="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"})),pc=M((function(){Ns(),fc(),qu(),lu=pa.Vector2,3,uu=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._precomputeQuads(),e._fragmentSource=su,e}return(0,b.Z)(n,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var e=0;e<256;e++){var t=e/255*63,n=new lu;n.y=.125*(0|t)|0,n.x=(0|t)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=this._options.lookupTableImage,s=this._createImageCanvas(a),l=s.getContext("2d"),u=r.getImageData(0,0,i.width,i.height),c=l.getImageData(0,0,a.width,a.height),h=new lu,d=0;d<i.width*i.height*4;d+=4){var f=u.data[d],p=u.data[d+1],g=u.data[d+2],m=u.data[d+3]/255,y=this._quads[g],v=64;h.x=y.x*v,h.y=y.y*v,h.x+=Math.floor(f/4),h.y+=Math.floor(p/4);var _=4*(a.width*h.y+h.x)|0,b=c.data[_];b=f*(1-m)+b*m;var x=c.data[_+1];x=p*(1-m)+x*m;var k=c.data[_+2];k=g*(1-m)+k*m,u.data[d]=b,u.data[d+1]=x,u.data[d+2]=k}o.putImageData(u,0,0)}},{key:"_createImageCanvas",value:function(e){var t=we.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}}]),n}(ba.Filter),uu.prototype.availableOptions={lookupTable:{type:"number",default:3,uniformType:"i"},lookupTableImage:{type:"image",uniformType:null}},cu=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new uu,e._textures={},e}return(0,b.Z)(n,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType("webgl")?this._updateWebGLTexture(e):t.isOfType("canvas")&&this._filter.setLookupTableImage(this._options.image)}},{key:"_updateWebGLTexture",value:function(e){var t=e.getRenderer(),n=t.id;this._textures[n]||(this._textures[n]=new ba.BaseTexture);var i=this._textures[n];i.setSource(this._options.image),i.setGLUnit(3),t.updateTexture(i)}},{key:"dispose",value:function(){for(var e in(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._textures)delete this._textures[e]}}]),n}(bl),cu.prototype.availableOptions={image:{type:"image"}},hu=cu})),gc=M((function(){du="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"})),mc=M((function(){Ns(),gc(),qu(),(fu=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=du,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.saturation,l=0;l<i.width;l++)for(var u=0;u<i.height;u++){var c=4*(i.width*u+l),h=.2125*a.data[c]+.7154*a.data[c+1]+.0721*a.data[c+2];a.data[c]=h*(1-s)+a.data[c]*s,a.data[c+1]=h*(1-s)+a.data[c+1]*s,a.data[c+2]=h*(1-s)+a.data[c+2]*s}o.putImageData(a,0,0)}}]),n}(ba.Filter)).prototype.availableOptions={saturation:{type:"number",default:0,uniformType:"f"}},pu=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new fu,e}return(0,b.Z)(n,[{key:"update",value:]),n}(bl),pu.prototype.availableOptions=fu.prototype.availableOptions,gu=pu})),yc=M((),vc=M((function(){Ns(),yc(),qu(),(yu=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=mu,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var l=0;l<i.height;l++){var u=4*(i.width*l+s);a.data[u]=Math.max(255*this._options.color.r,a.data[u]),a.data[u+1]=Math.max(255*this._options.color.g,a.data[u+1]),a.data[u+2]=Math.max(255*this._options.color.b,a.data[u+2])}o.putImageData(a,0,0)}}]),n}(ba.Filter)).prototype.availableOptions={color:{type:"color",default:ct.WHITE,uniformType:"3f"}},vu=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new yu,e}return(0,b.Z)(n,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),n}(bl),vu.prototype.availableOptions=yu.prototype.availableOptions,_u=vu})),_c=M((function(){Ns(),dc(),bu=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._options.rgbControlPoints||(e._options.rgbControlPoints={red:e._options.controlPoints,green:e._options.controlPoints,blue:e._options.controlPoints}),e._updateLookupTable(),e}return(0,b.Z)(n,[{key:"_updateLookupTable",value:function(){var e=this._calculateSplineCurve(this._options.rgbControlPoints.red),t=this._calculateSplineCurve(this._options.rgbControlPoints.green),n=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(e,t,n)}},{key:"_buildLookupTable",value:function(e,t,n){for(var i=[],r=0;r<256;r++)i.push(Math.min(Math.max(r+e[r],0),255)),i.push(Math.min(Math.max(r+t[r],0),255)),i.push(Math.min(Math.max(r+n[r],0),255)),i.push(255);return i}},{key:"_calculateSplineCurve",value:function(e){e=e.sort(();var t,n=this._getSplineCurve(e),i=n[0];if(i[0]>0)for(t=0;t<i[0];t++)n.unshift([0,0]);var r=[];for(t=0;t<n.length;t++){var o=n[t],a=[o[0],o[0]],s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));a[1]>o[1]&&(s=-s),r.push(s)}return r}},{key:"_getSplineCurve",value:function(e){var t,n=this._secondDerivative(e),i=n.length,r=[];for(t=0;t<i;t++)r[t]=n[t];var o=[];for(t=0;t<i-1;t++)for(var a=e[t],s=e[t+1],l=a[0];l<s[0];l++){var u=(l-a[0])/(s[0]-a[0]),c=1-u,h=u,d=s[0]-a[0],f=c*a[1]+h*s[1]+d*d/6*((c*c*c-c)*r[t]+(h*h*h-h)*r[t+1]);f>255?f=255:f<0&&(f=0),o.push([l,f])}return 255===o.length&&o.push(e[e.length-1]),o}},{key:"_secondDerivative",value:function(e){var t=e.length;if(t<=0||1===t)return null;var n,i,r=[],o=[];for(r[0]=[0,1,0],n=1;n<t-1;n++){var a=e[n-1],s=e[n],l=e[n+1];r[n]=r[n]||[],r[n][0]=(s[0]-a[0])/6,r[n][1]=(l[0]-a[0])/3,r[n][2]=(l[0]-s[0])/6,o[n]=(l[1]-s[1])/(l[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(o[0]=0,o[t-1]=0,r[t-1]=[0,1,0],n=1;n<t;n++)i=r[1][0]/r[n-1][1],r[n][1]-=i*r[n-1][2],r[n][0]=0,o[n]-=i*o[n-1];for(n=t-2;n>0;n--)i=r[n][2]/r[n+1][1],r[n][1]-=i*r[n+1][0],r[n][2]=0,o[n]-=i*o[n+1];var u=[];for(n=0;n<t;n++)u[n]=o[n]/r[n][1];return u}}]),n}(au),bu.prototype.availableOptions={rgbControlPoints:{type:"object"},controlPoints:{type:"array",default:[]},textureGLUnit:{type:"number",default:1}},xu=bu})),bc=M((function(){ku="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"})),xc=M((function(){Ns(),bc(),qu(),wu=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=ku,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var l=0;l<i.height;l++){var u=4*(i.width*l+s),c=a.data[u]/255*.3+a.data[u+1]/255*.3+a.data[u+2]/255*.3;c-=.2,c=Math.max(0,Math.min(1,c)),c+=.15,c*=1.4,c*=255,a.data[u]=c,a.data[u+1]=c,a.data[u+2]=c}o.putImageData(a,0,0)}}]),n}(ba.Filter),Su=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new wu,e}return(0,b.Z)(n)}(bl),Cu=Su})),kc=M((function(){Tu="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"})),wc=M((function(){Ns(),kc(),qu(),Eu=pa.Vector2,Du=pa.Vector3,3,Iu=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._precomputeQuads(),e._fragmentSource=Tu,e}return(0,b.Z)(n,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var e=0;e<256;e++){var t=e/255*63,n=new Eu;n.y=.125*(0|t)|0,n.x=(0|t)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(e,t,n){var i=this._options,r=i.resolution,o=i.horizontalTileCount,a=i.verticalTileCount,s=t.getCanvas(),l=t.getContext(),u=n.getContext(),c=this._options.lookupTableImage,h=this._createImageCanvas(c),d=h.getContext("2d"),f={width:128,height:128};r?f={width:r,height:r}:c.width&&c.height&&(f={width:c.width,height:c.height});for(var p=l.getImageData(0,0,s.width,s.height),g=d.getImageData(0,0,f.width,f.height),m=new Du(f.width/o-1|0,f.height/a-1|0,o*a-1|0),y=new ct,v=new ct,_=new ct,b=new ct,x=new ct,k=new ct,w=new ct,S=new ct,C=new Eu,T=new Eu,E=function(e,t,n,i){e.r=t.r*(1-i)+n.r*i,e.g=t.g*(1-i)+n.g*i,e.b=t.b*(1-i)+n.b*i},D=function(e,t,n){t=.5+t|0;var i=4*((n=.5+n|0)*f.width+t);e.r=g.data[i]/255,e.g=g.data[i+1]/255,e.b=g.data[i+2]/255,e.a=g.data[i+3]/255},I=new ct,R=new ct,O=function(e,t,n,i,r,o,a){E(I,t,i,o),E(R,n,r,o),E(e,I,R,a)},F=new Eu(f.width,f.height).divide(o,a).floor(),A=0;A<s.width*s.height*4;A+=4){y.set(p.data[A]/255,p.data[A+1]/255,p.data[A+2]/255,p.data[A+3]/255);var P=new Du(y.r*m.x,y.g*m.y,y.b*m.z),Z=P.clone().floor().toInt(),M=P.clone().ceil().toInt(),z=P.clone().fract();C.y=Z.z/o|0,C.x=Z.z-C.y*o|0,T.y=M.z/o|0,T.x=M.z-T.y*o|0,C.multiply(F),T.multiply(F),D(x,C.x+Z.x,C.y+Z.y),D(k,C.x+Z.x,C.y+M.y),D(w,C.x+M.x,C.y+Z.y),D(S,C.x+M.x,C.y+M.y),O(_,x,k,w,S,z.x,z.y),D(x,T.x+Z.x,T.y+Z.y),D(k,T.x+Z.x,T.y+M.y),D(w,T.x+M.x,T.y+Z.y),D(S,T.x+M.x,T.y+M.y),O(b,x,k,w,S,z.x,z.y),E(v,_,b,z.z),p.data[A]=Math.ceil(255*v.r),p.data[A+1]=Math.ceil(255*v.g),p.data[A+2]=Math.ceil(255*v.b)}u.putImageData(p,0,0)}},{key:"_createImageCanvas",value:function(e){var t=we.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}}]),n}(ba.Filter),Iu.prototype.availableOptions={lookupTable:{type:"number",default:3,uniformType:"i"},lookupTableImage:{type:"image",uniformType:null},resolution:{type:"number",uniformType:"f"},horizontalTileCount:{type:"number",default:5,uniformType:"f"},verticalTileCount:{type:"number",default:5,uniformType:"f"}},Ru=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._filter=new Iu,e._textures={},e}return(0,b.Z)(n,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType("webgl")?this._updateWebGLTexture(e):t.isOfType("canvas")&&this._filter.setLookupTableImage(this._options.image);var n=this._options,i=n.resolution,r=n.verticalTileCount,o=n.horizontalTileCount,a=n.image;this._filter.set({resolution:i||a.width,verticalTileCount:r,horizontalTileCount:o})}},{key:"_updateWebGLTexture",value:function(e){var t=e.getRenderer(),n=t.id;this._textures[n]||(this._textures[n]=new ba.BaseTexture);var i=this._textures[n];i.setSource(this._options.image),i.setGLUnit(3),i.setMinFilter(ba.BaseTexture.NearestFilter),t.updateTexture(i)}},{key:"dispose",value:function(){for(var e in(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._textures)delete this._textures[e]}}]),n}(bl),Ru.prototype.availableOptions={image:{type:"image"},resolution:{type:"number"},horizontalTileCount:{type:"number",default:5},verticalTileCount:{type:"number",default:5}},Ou=Ru})),Sc={};B(Sc,{Brightness:function(){return wl},ColorMatrixPrimitive:function(){return Fl},Contrast:function(){return El},Desaturation:function(){return Ml},DuoTone:function(){return Ul},Gamma:function(){return Wl},Glow:function(){return Yl},Gobblin:function(){return Ql},Grayscale:function(){return nu},LookupTable:function(){return au},LookupTableImage:function(){return hu},Saturation:function(){return gu},SoftColorOverlay:function(){return _u},ThreeDLookupTableImage:function(){return Ou},ToneCurve:function(){return xu},X400:function(){return Cu}});var Cc,Tc,Ec,Dc,Ic,Rc,Oc,Fc,Ac,Pc,Zc,Mc,zc,Bc,Lc,Uc,Nc,Hc,jc,Wc,Vc,Gc,qc,Yc,Xc,Kc,Jc,Qc,$c,eh,th,nh,ih,rh,oh,ah,sh,lh,uh,ch,hh,dh,fh,ph,gh,mh,yh,vh,_h,bh,xh,kh,wh,Sh,Ch,Th,Eh,Dh,Ih,Rh,Oh,Fh,Ah,Ph,Zh,Mh,zh,Bh=M((function(){Yu(),Ku(),Qu(),ec(),nc(),rc(),ac(),lc(),cc(),dc(),pc(),mc(),vc(),_c(),xc(),wc()})),Lh=M((function(){Vu(),Bh(),Cc=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new wl({brightness:0})),e}return(0,b.Z)(n,[{key:"render",value:function(e,t,i){return this._stack.isEmpty()&&this._stack.push(new wl({brightness:0})),(0,f.Z)((0,p.Z)(n.prototype),"render",this).call(this,e,t,i)}}]),n}(yl),Cc.isIdentity=!0,Cc.identifier="identity",Tc=Cc})),Uh=M((function(){Vu(),Bh(),Ec=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new El({contrast:.63})),e._stack.push(new wl({brightness:.12})),e._stack.push(new xu({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),e}return(0,b.Z)(n)}(yl),Ec.identifier="a15",Dc=Ec})),Nh=M((function(){Vu(),Bh(),Ic=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new Ml({desaturation:.5})),e._stack.push(new xu({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),e}return(0,b.Z)(n)}(yl),Ic.identifier="breeze",Rc=Ic})),Hh=M((function(){Vu(),Bh(),Oc=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new nu),e}return(0,b.Z)(n)}(yl),Oc.identifier="bw",Fc=Oc})),jh=M((function(){Vu(),Bh(),Ac=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new nu),e._stack.push(new El({contrast:1.5})),e}return(0,b.Z)(n)}(yl),Ac.identifier="bwhard",Pc=Ac})),Wh=M((function(){Vu(),Bh(),Zc=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),e}return(0,b.Z)(n)}(yl),Zc.identifier="celsius",Mc=Zc})),Vh=M((function(){Vu(),Bh(),zc=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),e}return(0,b.Z)(n)}(yl),zc.identifier="chest",Bc=zc})),Gh=M((function(){Ns(),Vu(),Bh(),Lc=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r,[{intensity:{type:"number",default:.5,required:!0,setter:function(e){return this._filterPrimitive&&(this._filterPrimitive.setIntensity(e),this._stack.setIntensity(1)),this._dirty=!0,e}}}])))._filterPrimitive=new Ul({lightColor:e._options.lightColor||ct.WHITE,darkColor:e._options.darkColor||ct.BLACK,intensity:e._options.intensity||.5}),e._stack.push(e._filterPrimitive),e}return(0,b.Z)(n)}(yl),Lc.prototype.availableOptions={lightColor:{type:"color",default:ct.WHITE,required:!0,setter:function(e){return this._filterPrimitive&&this._filterPrimitive.setLightColor(e),this.setDirty&&this.setDirty(!0),e}},darkColor:{type:"color",default:ct.BLACK,required:!0,setter:function(e){return this._filterPrimitive&&this._filterPrimitive.setDarkColor(e),this.setDirty&&this.setDirty(!0),e}},intensity:{type:"number",default:.5,required:!0}},Lc.identifier="duotone",Uc=Lc})),qh=M((function(){Vu(),Bh(),Nc=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),e}return(0,b.Z)(n)}(yl),Nc.identifier="fixie",Hc=Nc})),Yh=M((function(){Vu(),Bh(),jc=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new gu({saturation:1.35})),e._stack.push(new El({contrast:1.1})),e}return(0,b.Z)(n)}(yl),jc.identifier="food",Wc=jc})),Xh=M((function(){Vu(),Bh(),Vc=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),e}return(0,b.Z)(n)}(yl),Vc.identifier="fridge",Gc=Vc})),Kh=M((function(){Vu(),Bh(),qc=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),e}return(0,b.Z)(n)}(yl),qc.identifier="front",Yc=qc})),Jh=M((function(){Vu(),Bh(),Xc=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new El({contrast:1.1})),e._stack.push(new xu({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),e}return(0,b.Z)(n)}(yl),Xc.identifier="glam",Kc=Xc})),Qh=M((function(){Vu(),Bh(),Jc=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new Ql),e}return(0,b.Z)(n)}(yl),Jc.identifier="gobblin",Qc=Jc})),$h=M((function(){Vu(),Bh(),$c=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),e._stack.push(new gu({saturation:.9})),e}return(0,b.Z)(n)}(yl),$c.identifier="k1",eh=$c})),ed=M((function(){Ns(),Vu(),Bh(),th=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),e._stack.push(new _u({color:new ct(40/255,40/255,40/255)})),e}return(0,b.Z)(n)}(yl),th.identifier="k2",nh=th})),td=M((function(){Vu(),Bh(),ih=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new gu({saturation:.5})),e}return(0,b.Z)(n)}(yl),ih.identifier="k6",rh=ih})),nd=M((function(){Vu(),Bh(),oh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),e._stack.push(new gu({saturation:.7})),e}return(0,b.Z)(n)}(yl),oh.identifier="kdynamic",ah=oh})),id=M((function(){Vu(),Bh(),sh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new Ml({desaturation:.4})),e._stack.push(new xu({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),e}return(0,b.Z)(n)}(yl),sh.identifier="lenin",lh=sh})),rd=M((function(){Vu(),Bh(),uh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),e}return(0,b.Z)(n)}(yl),uh.identifier="lomo",ch=uh})),od=M((function(){Vu(),Bh(),hh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),e}return(0,b.Z)(n)}(yl),hh.identifier="mellow",dh=hh})),ad=M((function(){Ns(),Vu(),Bh(),fh=pa.ColorMatrix,ph=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];e=t.call.apply(t,[this].concat(r));var a=new fh(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);e._stack.push(new Fl({colorMatrix:a}));var s=new ct(.8,.6,.9);return e._stack.push(new Wl({gamma:s})),e}return(0,b.Z)(n)}(yl),ph.identifier="metal",gh=ph})),sd=M((function(){Vu(),Bh(),mh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),e._stack.push(new Yl),e}return(0,b.Z)(n)}(yl),mh.identifier="morning",yh=mh})),ld=M((function(){Vu(),Bh(),vh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),e._stack.push(new xu({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),e._stack.push(new Ml({desaturation:.65})),e}return(0,b.Z)(n)}(yl),vh.identifier="orchid",_h=vh})),ud=M((function(){Vu(),Bh(),bh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),e._stack.push(new gu({saturation:.8})),e._stack.push(new El({contrast:1.5})),e}return(0,b.Z)(n)}(yl),bh.identifier="pola",xh=bh})),cd=M((function(){Vu(),Bh(),kh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),e._stack.push(new gu({saturation:.8})),e._stack.push(new El({contrast:1.5})),e}return(0,b.Z)(n)}(yl),kh.identifier="pola669",wh=kh})),hd=M((function(){Vu(),Bh(),Sh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new Ml({desaturation:.65})),e._stack.push(new xu({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),e}return(0,b.Z)(n)}(yl),Sh.identifier="quozi",Ch=Sh})),dd=M((function(){Vu(),Bh(),Th=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),e._stack.push(new Yl),e}return(0,b.Z)(n)}(yl),Th.identifier="semired",Eh=Th})),fd=M((function(){Vu(),Bh(),Dh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),e._stack.push(new xu({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),e}return(0,b.Z)(n)}(yl),Dh.identifier="sunny",Ih=Dh})),pd=M((function(){Vu(),Bh(),Rh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new xu({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),e}return(0,b.Z)(n)}(yl),Rh.identifier="texas",Oh=Rh})),gd=M((function(){Vu(),Bh(),Fh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._stack.push(new Cu),e}return(0,b.Z)(n)}(yl),Fh.identifier="x400",Ah=Fh})),md=M((function(){Ns(),Vu(),Bh(),Ph=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._lutPrimitive=new hu({image:e._options.image}),e._stack.push(e._lutPrimitive),e}return(0,b.Z)(n)}(yl),Ph.prototype.availableOptions={image:{type:"image",required:!0,setter:function(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}}},Ph.identifier="lut",Zh=Ph})),yd=M((function(){Ns(),Vu(),Bh(),Mh=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=(e=t.call.apply(t,[this].concat(r)))._options,s=a.image,l=a.resolution,u=a.verticalTileCount,c=a.horizontalTileCount;return e._lutPrimitive=new Ou({image:s,resolution:l,verticalTileCount:u,horizontalTileCount:c}),e._stack.push(e._lutPrimitive),e}return(0,b.Z)(n)}(yl),Mh.prototype.availableOptions={image:{type:"image",required:!0,setter:function(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}},resolution:{type:"number"},horizontalTileCount:{type:"number",default:5},verticalTileCount:{type:"number",default:5}},Mh.identifier="3d-lut",zh=Mh})),vd={};B(vd,{A15Filter:function(){return Dc},BWFilter:function(){return Fc},BWHardFilter:function(){return Pc},BreezeFilter:function(){return Rc},CelsiusFilter:function(){return Mc},ChestFilter:function(){return Bc},DuoToneFilter:function(){return Uc},FixieFilter:function(){return Hc},FoodFilter:function(){return Wc},FridgeFilter:function(){return Gc},FrontFilter:function(){return Yc},GlamFilter:function(){return Kc},GobblinFilter:function(){return Qc},IdentityFilter:function(){return Tc},K1Filter:function(){return eh},K2Filter:function(){return nh},K6Filter:function(){return rh},KDynamicFilter:function(){return ah},LUTFilter:function(){return Zh},LeninFilter:function(){return lh},LomoFilter:function(){return ch},MellowFilter:function(){return dh},MetalFilter:function(){return gh},MorningFilter:function(){return yh},OrchidFilter:function(){return _h},Pola669Filter:function(){return wh},PolaFilter:function(){return xh},QuoziFilter:function(){return Ch},SemiredFilter:function(){return Eh},SunnyFilter:function(){return Ih},TexasFilter:function(){return Oh},ThreeDLUTFilter:function(){return zh},X400Filter:function(){return Ah}});var _d,bd,xd,kd,wd,Sd,Cd,Td,Ed,Dd,Id,Rd,Od,Fd,Ad,Pd,Zd,Md,zd,Bd,Ld,Ud,Nd,Hd,jd,Wd,Vd,Gd,qd,Yd,Xd,Kd,Jd,Qd,$d,ef,tf,nf,rf,of,af,sf,lf,uf,cf,hf,df,ff,pf,gf,mf,yf,vf,_f,bf,xf,kf,wf,Sf,Cf,Tf,Ef,Df,If,Rf,Of,Ff,Af,Pf,Zf,Mf,zf,Bf,Lf,Uf,Nf,Hf,jf,Wf,Vf,Gf,qf,Yf,Xf,Kf,Jf,Qf,$f,ep,tp,np,ip,rp,op,ap,sp,lp,up,cp,hp,dp,fp,pp,gp,mp,yp,vp,_p,bp,xp,kp,wp,Sp,Cp,Tp,Ep,Dp,Ip,Rp,Op,Fp,Ap,Pp,Zp,Mp,zp,Bp,Lp,Up,Np,Hp,jp,Wp,Vp,Gp,qp,Yp,Xp,Kp,Jp,Qp,$p,eg,tg,ng,ig,rg,og,ag,sg,lg,ug,cg,hg,dg,fg,pg,gg,mg,yg,vg,_g,bg,xg,kg,wg,Sg,Cg,Tg,Eg,Dg,Ig,Rg,Og,Fg,Ag,Pg,Zg,Mg,zg,Bg,Lg,Ug,Ng,Hg,jg,Wg,Vg,Gg=M((function(){Lh(),Uh(),Nh(),Hh(),jh(),Wh(),Vh(),Gh(),qh(),Yh(),Xh(),Kh(),Jh(),Qh(),$h(),ed(),td(),nd(),id(),rd(),od(),ad(),sd(),ld(),ud(),cd(),hd(),dd(),fd(),pd(),gd(),md(),yd()})),qg=M((function(){Ns(),Gg(),Vu(),Lh(),Bh(),_d=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_render",value:,{key:"render",value:function(e){return this._selectedFilter.getDirty()&&this.setDirty(!0),this.getEnabled()?(0,f.Z)((0,p.Z)(n.prototype),"render",this).call(this,e):(this.setDirtyForRenderer(!1,this._sdk.getRenderer()),Promise.resolve(e))}},{key:"setDirtyForRenderer",value:function(e,t){(0,f.Z)((0,p.Z)(n.prototype),"setDirtyForRenderer",this).call(this,e,t),this._selectedFilter.setDirtyForRenderer(e,t)}},{key:"disposeRenderTextures",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"disposeRenderTextures",this).call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}},{key:"dispose",value:,{key:"restoreSnapshot",value:function(e){var t=(0,C.Z)({},e);if(delete t.filter,e.filter){var n=e.filter.constructor;"3d-lut"===n.identifier?this.setFilter(new n({image:e.filter.getImage(),resolution:e.filter.getResolution(),horizontalTileCount:e.filter.getHorizontalTileCount(),verticalTileCount:e.filter.getVerticalTileCount()})):"duotone"===n.identifier?this.setFilter(new n({lightColor:e.filter.getLightColor(),darkColor:e.filter.getDarkColor(),intensity:e.filter.getIntensity()})):this.setFilter(new n)}this.set(t)}},{key:"resetToDefaultFilterIntensity",value:function(){var e=this._selectedFilter&&this._selectedFilter.availableOptions,t=e&&e.intensity.default;this.setIntensity(t||1)}}]),n}(Ga),_d.identifier="filter",_d.prototype.availableOptions={identifier:{type:"string",default:"identity"},intensity:{type:"number",default:1,setter:function(e){return this._selectedFilter&&this._selectedFilter.setIntensity(e),e}},filter:{type:"object",default:new Tc,setter:function(e){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=e,"undefined"!==typeof this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),e}}},_d.FilterPrimitives=Sc,_d.Filters=vd,_d.Filter=yl,Rs.Operations.FilterOperation=_d,bd=_d})),Yg=M((function(){Ns(),pa.Vector2,xd=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._flipContainer=new ba.Container,e}return(0,b.Z)(n,[{key:"_render",value:function(e){var t=this._options,n=(t.outputResolution,t.flipHorizontally),i=t.flipVertically;if(n||i){var r=e.getDimensions();this._flipRenderTexture?this._flipRenderTexture.resizeTo(r):(this._flipRenderTexture=new ba.RenderTexture(this._sdk.getRenderer(),r.x,r.y),this._flipSprite=new ba.Sprite(this._flipRenderTexture),this._flipContainer.addChild(this._flipSprite));var o=n?-1:1,a=i?-1:1;this._flipSprite.setScale(o,a),this._flipSprite.setPivot(0,0),this._flipSprite.setPosition(r.x*(1-o)*.5,r.y*(1-a)*.5),this._flipRenderTexture.clear(),this._flipRenderTexture.render(this._container),this._renderTexture.render(this._flipContainer)}else this._renderTexture.render(this._container);return Promise.resolve()}}]),n}(Ga),xd.identifier="flip",xd.prototype.availableOptions={flipHorizontally:{type:"boolean",default:!1},flipVertically:{type:"boolean",default:!1}},Rs.Operations.FlipOperation=xd,kd=xd})),Xg=M((function(){Ns(),wd=pa.Vector2,Sd=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._colorOverlayFilter=new ba.Filters.ColorOverlayFilter({color:e.getTintColor()}),e._frameContainer=new ba.Container,e._resetSprites(),e._options.frame&&e._createSpritesForFrame(e._options.frame),e}return(0,b.Z)(n,[{key:"_resetSprites",value:function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}},{key:"_createSpritesForFrame",value:function(e){var t=this;if(!e)return this._disposeSprites();var n=e.imageGroups,i=e.layoutMode;this._layoutMode=i||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach((function(e){"undefined"!==typeof n[e]&&["start","mid","end"].forEach((function(i){if("undefined"!==typeof n[e][i]){var r=n[e][i];"image"in r&&(r=r.image);var o=ba.Texture.fromImage(r),a=new ba.Sprite(o);t._spriteGroups[e][i]=a,t._sprites.push(a),t._frameContainer.addChild(a)}}))}))}},{key:"_render",value:function(e){var t=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(e)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(t):(this._frameRenderTexture=new ba.RenderTexture(this._sdk.getRenderer(),t.x,t.y),this._frameSprite=new ba.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),Promise.resolve()}},{key:"_updateSprites",value:function(e){var t=e.getDimensions();this._frameWidth=Math.ceil(e.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(e,"top",0),this._updateHorizontalSpriteGroup(e,"bottom",t.y-this._frameWidth),this._updateVerticalSpriteGroup(e,"left",0),this._updateVerticalSpriteGroup(e,"right",t.x-this._frameWidth)}},{key:"_updateHorizontalSpriteGroup",value:function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e.getDimensions(),a="vertical-inside"===this._layoutMode,s=this._spriteGroups[t].start,l=this._spriteGroups[t].mid,u=this._spriteGroups[t].end,c=0,h=0;if(s){i=(n=s.getTexture().getDimensions()).y/n.x,c=Math.floor(this._frameWidth/i);var d=new wd(0,r);d.x=a?this._frameWidth:0,s.setPosition(d),s.setHeight(this._frameWidth),s.setWidth(c)}if(u){i=(n=u.getTexture().getDimensions()).y/n.x,h=Math.floor(this._frameWidth*i);var f=new wd(o.x-h,r);f.x-=a?this._frameWidth:0,u.setPosition(f),u.setHeight(this._frameWidth),u.setWidth(h)}if(l){i=(n=l.getTexture().getDimensions()).y/n.x;var p=new wd(c,r),g=o.x-c-h;if(a&&(p.x+=this._frameWidth,g-=2*this._frameWidth),l.setPosition(p),l.setWidth(g),l.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[t].mid.mode){var m=this._frameWidth/i,y=Math.ceil(g/m),v=0;if(-1!==y){var _=Math.round(g/y);l.setWidth(_),v+=_,this._ensureRepeatSpritesExist(y-1,t,l);for(var b=0;b<y-1;b++){_=Math.round((g-v)/(y-b-1));var x=this._repeatSprites[t][b],k=p.clone().add(v,0).floor();x.setPosition(k),x.setWidth(_),x.setHeight(this._frameWidth),v+=_}}}}}},{key:"_ensureRepeatSpritesExist",value:function(e,t,n){var i=this;n.getTexture().setMaxListeners(e+1);var r=this._repeatSprites[t].length;if(e>r)for(var o=e-r,a=0;a<o;a++){var s=new ba.Sprite(n.getTexture());this._repeatSprites[t].push(s),this._frameContainer.addChild(s),this._sprites.push(s)}else if(e<r){this._repeatSprites[t].splice(e).forEach((function(e){var t=i._sprites.indexOf(e);-1!==t&&(i._sprites.splice(t,1),i._frameContainer.removeChild(e),e.dispose())}))}}},{key:"_updateVerticalSpriteGroup",value:function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e.getDimensions(),a="horizontal-inside"===this._layoutMode,s=this._spriteGroups[t].start,l=this._spriteGroups[t].mid,u=this._spriteGroups[t].end,c=0,h=0;if(s){i=(n=s.getTexture().getDimensions()).y/n.x,c=Math.floor(this._frameWidth*i);var d=new wd(r,0);d.y=a?this._frameWidth:0,s.setPosition(d),s.setWidth(this._frameWidth),s.setHeight(c)}if(u){i=(n=u.getTexture().getDimensions()).y/n.x,h=Math.floor(this._frameWidth*i);var f=new wd(r,o.y-h);f.y-=a?this._frameWidth:0,u.setPosition(f),u.setWidth(this._frameWidth),u.setHeight(h)}if(l){i=(n=l.getTexture().getDimensions()).y/n.x;var p=new wd(r,c),g=o.y-c-h;if(a&&(p.y+=this._frameWidth,g-=2*this._frameWidth),l.setPosition(p),l.setHeight(g),l.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[t].mid.mode){var m=this._frameWidth*i,y=Math.ceil(g/m),v=0;if(-1!==y){var _=Math.round(g/y);l.setHeight(_),v+=_,this._ensureRepeatSpritesExist(y-1,t,l);for(var b=0;b<y-1;b++){_=Math.round((g-v)/(y-b-1));var x=this._repeatSprites[t][b],k=p.clone().add(0,v).floor();x.setPosition(k),x.setHeight(_),x.setWidth(this._frameWidth),v+=_}}}}}},{key:"_disposeSprites",value:function(){var e=this;this._sprites.forEach((function(t){e._frameContainer.removeChild(t),t.getTexture().dispose(),t.dispose()})),this._resetSprites()}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._disposeSprites(),this._colorOverlayFilter&&this._colorOverlayFilter.dispose(),this._frameRenderTexture&&this._frameRenderTexture.dispose()}}],[{key:"validateFrame",value:function(e){if(e){var t=e.imageGroups,n=e.layoutMode;if("string"!==typeof e.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==typeof e.imageGroups)throw new Error("Frame needs a property `imageGroups` of type Object.");var i=function(e){var n=t[e],i=n.start,r=n.end,o=n.mid;if("undefined"!==typeof t[e]){if("object"!==typeof t[e])throw new Error("Frame: `imageGroups.".concat(e,"` needs to be of type Object."));if("undefined"!==typeof i&&!(i instanceof La||"undefined"!==typeof HTMLImageElement&&i instanceof HTMLImageElement))throw new Error("Frame: `imageGroups.".concat(e,".start` needs to be of type Image."));if("undefined"!==typeof o&&!(i instanceof La||"undefined"!==typeof HTMLImageElement&&i instanceof HTMLImageElement)&&"object"!==typeof o)throw new Error("Frame: `imageGroups.".concat(e,".mid` needs to be of type Image or Object."));if("undefined"!==typeof r&&!(r instanceof La||"undefined"!==typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error("Frame: `imageGroups.".concat(e,".end` needs to be of type Image."))}};if("undefined"!==typeof n&&-1===["vertical-inside","horizontal-inside"].indexOf(n))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!==typeof tintable&&"boolean"!==typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");i("top"),i("left"),i("right"),i("bottom")}}}]),n}(Ga),Sd.identifier="frame",Sd.prototype.availableOptions={frame:{type:"object",validation:Sd.validateFrame,setter:function(e,t){return t||this._createSpritesForFrame(e),e},default:null},alpha:{type:"number",default:1},tintColor:{type:"color",default:new ct(1,1,1,0)},scale:{type:"number",default:.1}},Rs.Operations.FrameOperation=Sd,Cd=Sd})),Kg=M((function(){Td="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAAAAADRE4smAAAsTElEQVR4Ae1d4bHjOM5ECAgBISgEZLDOwMrAysDMwMpAzkCTAUNQCAyBIfCr2ifI1DNh+c1tfTMg3b9udtZXC7tJdgMgCP8foJAUBIJx92eoEy5puAKkHH1jX0AchqoJcLwGlv1fDVAnyKtfQMoB1WLQKBBCyuCgVvQhvQGoF3RPb2Bs/AsgEDS6BqbGvwACaHsT+AV1AK/4W18AQy3gCxTAR2vAQxW4xHSD3/kC/qlI9NK7hqg6H8SLspiPv4C+kv0v6ouZQuUEEMfndUtcOQH6qJ9nR2sg1kD+FSdQ4GLS4MA82B+uZvJJRQXkFwT8uRp2VQl99xuGiOyTX4//+AuYqtj/BBGPiVITATjtEel4pdRFAJ/2uP08K9KBYXwPaT5OC9Vlg/kneQ0cUwHcQvz6F7BAXVuA/3GNsG8ofqBQmw3uUg7dCglcZQSgJHizvO1qy4OM3wPCH64BV1fnR8QfdkqAcWD86Q86KP9+o/EjGMfwrhVSpPPUWvy9YoMbsEIqAVrSgXBSCFC3FdK/sV+txc/Kv93OEpgrawiYfybsSWkIaMcK3SurB1P8Ufyk2OB2rNCoEKCV+BW2tGOFXG2N0RiUkkgZUfmumrFCfW0EgNOPKlxB6YtvQAcqRrix+BfFBjdjhVgnQL3xk+cyWwYQVG6FLjOs6PTjotaSCF5T8iUXJLSo3gqxT4kLPig6BKheB1/+/dvzEwGi/KParSDN+arAtMFTA/Gz3+8KTiF/tVZoaxx034zwwlAPvsc/7cifx+8U8tdqhfqwXxVihOMAgnp1sJA/lzu9Tv4KrRD7fFVki2VE+IuB3anvT0z/Y/x9KBRKexPkJ+77njv835YA3kvuaPm79z+6zDGtiP5Mv1sSObMv7gr8l5MfkMclCZaJf9sK0TUWd4U58N8b/NWnb5jo9+KPShM4EvzN4DGmPcL5p1ZIgVghhr8VNBZjuP4P8Rsr/fReGW72UyukIKDJeRYz/rQkoiAYHWkSTz+2QgrOVq657bG8xYAlHWBEQzcdf+OH43SAcPp7o3/N3un34zeS98Vbeonu51ZIYCHve/tPhvl4e+QXdP/JMB9KOkRN/42gJf0ni5eiNfILzjH9J4t3NLn/0QH737etzhj5Bdf0GhP9XlXMRt2Lwu+TX4/fUtH3+t+Jl0H/Co3+/hPmQomPjJQV8iu//9Hi5fk3rJAnU3VMnfyXeJzI8HbIL7i8vf+RT8m9a4WsFH3vzzFPzo3LM/mXlN6P3wT5NeXqJ+fmIP/9+0xJfHsJ2Cj69tqap/BE/lILG49z8CMXCGWl6Bu0Ne/2//19LDa942lalvlMZUKNaOBhA0Xw4578xZQQzvJT0y5+Qx0PFz1b2ZXThFxMoF0LVsh3IDCSALqjPg1QwEX6hC1Wp5DfxAqIp+MyiS/rx+m7FQps7l7j+E6O3Jf1Y8DdPxXy23IAsXunTHIqH6BD/k/lJDGlABaN/Epd5FpuBD5ZIL8gHJd8TkGr6VIoN8J6cc/Gwqf3aoRz+dMRBLNDm62c03s1wshlBe0en2GLQ84mhfyaTOQKZl7e9RWg1ggnVO4D/TJ+q5UV8mstLX0Fjz/E1wW/Uo/EoGb9gu1O5vhWgTzqBGAwAER9C3RKj4SqlIO5sacEpPNfJ38OBstHAIdJlwD/vDXk3wNYPQLwFmHO/6wE9rKwPWilv2DkcRNWy9esng45olr9PhuYbQ+JtQ3Qq4VdTSo6S+FvZ5pXNSC/1+NL2ZdkpuNXDjTI42f9BNPj90ohMRh42UyYqhRuemUJ6GJ3MLMC5ECDlAaFAPG9MnEoN9IFMvCymaxUhQCjniXL0ZeXiTPR8Qqi449nNnL5ik8oCqURDb1l7RQCeM0kRX2jGIKBxP8lJgHk8XdpB1eO32F8ofV49H6+oKWXfVIkpRkCi0sgcP/qpOhn7ye2sfmlBLmKobK8FbB0RATbo037qCazx9dL4L4WtXtrCS/dzcLuN4yvbcy4bmzRMgHQv0hmDOoSEB044pMaYMvsh10I/nUqE4fCRjFazfaWWNwdXF7tu8JGgXbHdwkBgvK3DgowvQFq15WGstWLeFw0DaYn14DEf/zwn1ozNoZRKWm8//Bfb3i0JZYJIPHHN24BX5NxDfjqzdrhjQkGFCxvgaFIgHRTVsd01DR5tj7OX0D7M0CXeLiYrvneiwSQ0h0fzoK4Ku0AhhBfpbTno1kQtNh+7HZQCOA1hRToVUnU2Z/jK2BtpsFVSaLZ1ECsEECPP02kNgQGsj/NXxBUkxDOek+UA2NAjQABdZPkXX/qR68PSrG8BjYM+t+G+XLq+zEqrDGFRSFAcppE0jGBRWAqI6JmE3WQ9Unu8BS/SwewpADZB3p/eNdNqXtbHXOHt3Q9ssHwvJ6X9CYCWah7BDq+AK1YoUO4v7/j5Xpgg+FZB1Os4/cXyRo6RQWqVnCs4fdnr031jBoBJH6u4vfvo+bks5KPL2d9vPXfP/frE2rFkCWmBCVR36djeAQ7Qx4HbXKRi0VVg0s6RBysdLwspKjA6FKCoqrrjZ9+eE97XBUn5IdyXMcMCJ2dmn8gpSDIIUH5dz2F4zlxpobcXpU1AF6p/45mh9yyks0tqMChT6DUfynYnHCqXuCasOiEmLXUxhBNDrnFosWJXdEG/wIPapf/EEwOeew0AbdQcQ08VQb4cFh6OMNfC3XC97lUDInAcNfiB3IFCsSRrOV5BYEKTsg/uV5/MC7cn420O+mH4JAnPlCLv/BcQvQXNFbvVhiQrQFwL9YK3UPKEUa2NOFBYQDv7JF7md1EdrMPIYRlujDaerNSV+5Z0AwYXia4u370SwghzGNPxjL9Snsb7u4vY1B0sFW4N6a8nnK+99YrvDr/leaeZdf3zjXEj1d+a9bt9fsa8HJwmn6+mafCAa8L4fu++uHtlzgvMS1lHagwIORrgBUrZAXkc/EejvP3w/7A72zHL2p9KEhh9SS857ZHt0I2Nr+9cuHjCk73Le0xWo4faM7Fi8SnY8anNaBbIRObn3bFWU8JbfFGoEL8wRT/47a2VSnsn05CzoTwgRUyUvSKqPW9h+fhlz4JYJAzwaYO7PPgOk0KB/d9H8QkiGDXCtFccHmFzMY+umu+QmASX2AvfmVqcYnRw/CNAVnEnS0rpBe9WOV/950BfRJALAoHYZOxtJcqhSP2307CMd/ubVohWf7H/Hffyts3SgJYI/UmdeC91KWqMLqLiiz4VSSTN8j/k6YDI+KeLXNGgKHUCBjPNtNeuhRm9SnIWBSOHu2lfXX+T2qNBNJUEA4zGU376lLY6z0O3TOZ4mCc/4Uit1MIEOX/TG93MPTEmS6FWWOAeL7BzstmgkGb51AocisMgE3uDAr5jZX/dSmMGgN+fSuReDJ3zUsw61ZQYUA2KNIL+U3Bvy+FtUeR445Mgc3zX81suCIBpJDEOvkrkcLajLDu8YE41ML/U0kf9CUCxE04LDr565DCYh2VxC/FEcEWKCqxKEVujs8E2HIeevD1SOHiPvgL7H4Dig9Si9xdeCZADzoqk8JlBkQQVMN/vchL4YkAE+ioTAorDOgq4n8ijRsLFBgAevW3Vil8XP21rwOVMAsMAL32V6UUVh74a4v/uRkG/U3LOqWwMCPqN32sTz0LKjduz6MOQc/7ViqFV3RRz/tWy//0/DAC6KhZCstJeFz3qq0kJhiVza8RKSwMsL//6SUxhf8Cp2x+DUhhAS0D1IGT4mtf9vs6ZfNrRQofo9KSmIrWpDA0wf/3+30blMI6Ki6JKfxvUwq/j6q6IxW0I4W7tvgfj940b0wK+w5qRFAHeTtlvGGbUjgw6KjUB0VlvF2DUjg6bJD/vbL5tSeFp5r5T/pkOK9sfo1JYc/N8l/Z/JqSwvHcMP/vyubXkBRmhHpx3B3JoKANHdgAlO5IDQ1JYQUf/rcmhQUf/rcqhVsAxWb5r0hhT9AU3NGzNm1J4cAN8l/J+zYohaOD9tD/DZvfnyUe/3n+I8Ifg//jmx/58Oel8B/N+/Z/cu/hP7z54e2Pdx5STOEEfwzs/2zn3f3PHv7zX9B5ODj80zJs+pPzY/nPZ2Ju0CrEifEn/laBsc0cHLYXv/IN9E3m4Pp43WViTtAY8Ba3aWON5aBlbvuMz/ETNIJrfFxG4awdA7GJ6LNHqfL4Ox8RWgCG3ZNU960d4xKnlkpwgTIrSHhrxw/E7DaK6KD5a2PklhLQoXsUJZfYkB9Y8iepxAr5NmryMq81PMSvU14eqBf37QsI9O2emkeoFnilx0Ocp7AdgxhaqUjy7WF9fP9gADexAK4xzY8dcKAHA06///KAwSc7ZQ/E/nEO+tpvIsmUJd52QL/NXcKv+MOp+txHSml57IH/iBgaVkZ4qt/6+G0HjCgMWAi4bvLnfn/Y9sARoM+e5lu4kfhlB2S4xM0O9tRKE27ETQUC3pMwAIdm4pcdcPZJMEETkNKnJMBvMQn+qTrvG1OcSF7rcPtGvFC/9cOrT2m5kGTAut3LJUvlhz/N35+gpWz06Ii01H74c5CDLit94sP29YFrJn9MgnMW/yC2r3p0Pr90MmzZzlCr7dMf645Z/Czjh6ov+n67f71I6fMuJ38D5J8uX0d+v/I+rDtggMohNic697Xgs9LnIJaoWuD2sJ4YgCmLP3z54KpB4FehIwWvTqzQ15dT+eE/SLCS650yK3iv/hoe+Yji+0T2sjBhAqxXAIjyjbj6PiHAmFnhE9du/f4N8+H7vPwP6YJ1VP3hL/HTVgeQ+CO1cfh3m+85i+hZrdDYgvL14vtWLzjRGn/1RV8vJn/1PYPPHtzoK099bQl+3l++li9gEPdfd+pLCL8kwfbizFz34S+hFudwTQSC6lNfJymBtTSD4ZYEAfP4fWil4yskgcvvX8dx/Yula2XulNuXAF1sYgOA8fvYPfF9dK99A5D4w2nO4xcrTN5zI1f9PIv4391+7MOI9ccfHK6kn9+4/VkhJYaFt6CPbz8i16J888O9EP8vRS8PUAl4waf+t+Xw9ieHiJUo3/Acv89aoEnRyxGrSX255/dIhk0HRYdKwuxWS9F3F3+/i39hvVTsqkl9RVL6/4DTiHrCrKsj7RUH0OLHF59yWE3qy3dPfkiWd/fiU1xH3nfCkh90x58yD17KGR6pg+gJsypsYU5jhAx3PX4RhvHfT3FXw0VXh/IFvDf6xT0WAF7R8JAT9+hz9f4p/tAdTQbqvOXZGLj7nS9xeIpx1oLbbMIlJmdV+fot/q9N/Vv8+gEvNgFvpnXgJQ6yBZwK8/5C8nx0TYa9yEeTh/9Z6n1TfJr3h8W0FxLhI/5oeEjc+ovLiJv5WfTwAOVvQGSyIJ6sKt8t/jcFbf81lvUs8RuWwXSXXzyvf+BhxiSk9HVNhvRP2VK+nBf7jz8ldyS6/FNosugr7L2r87aVT8k1GfmUtS+A/I6582O0Q3c7/pQwYFTkowWcQj5imzJPc+GDTwmmVT4tIiYMYc74fpL4py9ZwMfk37eLiZiwBIyZ9esyT8OKpxHJkGOQazIiJuyAokg39om3+C9Rv+zRxfV37/u7XBTL5WNAm/Nt8RrD5mlo1j2NNMdF11+CXJRaFPloJf5/A172I45id5j56cQ5B7ONUlLs4vBlfk+Zp5mV/f9pKNgAbPCRenfakh8hyineHwpaKYlmi4GA7clgvjjHWzhLklPcK88OKdURvy4Bb+uxIuwdpBTE/GdKwB/L4HwgbFwvRnr5lC31u9AWsZSzOP+DQKmOyP8Om3x0aGa8LaxVXr9nLms05svk5wt9i19uxpJ8ythN3yC716OcNWq1LR5nP55R/pVI24youB4GExrq94Z11+e0tfmwJ4B7isML4TtRPhAXZukXcnEwlfoSeDH/538NzgyAMXnWPxSuu6oBytGB0bMp6w8Sv/R90vzvH9Gh1iMu2lAG4kohBE3NxpYk1ipc+REOh6+Oz4KTpSVtWDBrlOu3wUhkavOLad3HNvN/jXrH55QyxO4R/1XCN1f09bxecxw3KS/aRp2MKBDbs2QjE60giFeTfYwkfhl1qc+EFwTxTp1fTYAZIEmT5+bn/N78zqT//hucVAAvsnnYwJbp+ueh5kni1zUsbbnyPmTxC5ylAZ9LbmM7Ocn5oJx1F4tLd8n8+DwZbsb5cN7kS1u677TJYD38WTKHYnsFg62WxyGzsZeNv/5lEgtlLE6W+SFTv79k8ANmQz6zfm+vkR+3Y4PyE5SAraW9HotXbOwqhxhkL3CofAGn/DqEX/8w2kp99WvRY0tjMWT85fJVT1688D/sOgdZrPDZ3E3fEcXGbk99fDl75b7DWVa9yxPBYbOCZGrMwcIy2DKsNlCGvKPiF3mVABFWeKmdREuN4FK+9ZSVAPOcL7LyqSDdkmOuiMJXGjywpc1PjrgxzwPozucqtT2UnXJHAHCewAzu+zy9S3uMimbK58B5UdKbifDO1kXvEXclcJi6+yvlG5LEL1bn4QjAGih71pe7VQpHpiDfjP61RQLOloBkfkwhT10PUv8BD8BBL9/KtoEwbicF4GIsfKV5fZPCTu9kRMkMSMmUHhVwNvqmLV5jOq2LG9IZAHsEBYMk/8XxTMyXYC3zozWvbxVd4sMJIbzSJ1z4tJ4lRvnPIT2sIKSIr56D4rTFP37PgxlE3ugRsnn3BZDb7YHJ56lCo6PxwiP6dP7iP5QzGBzWfDBmme/F/O+fp65G3Iq+xQUg3T6DeMUBurgvhhge+BN4lXLgFL8o9n5JaZLh8LP92VicZ3ul6KtVfRda9f64HhVdSAJPhvkfnZwJUd0nRfGNKXknR2UfzN8BH/eZ6+GstkmL4ospDXHd9Ogek1yFsQiSSrZc9iJVLQoD+pQiSfwAXe8ujGAXIoVfYsgz/D6lsd9kL/LF9WSc/x28GX+6/ssZHlTRY9cKvoTPTvoxpQBeoU1l/BcsW5p8wpiSsxu/fo/7JfjRJDz0KSWULJB5DBLIYfzrybeElDxYjl8J7o3LUotL6UsD93Cv5EkUeePmHbXopQUmAsxS9K0AXkzgYdZ4cFuZgGIlM+F5LQe+Fb8wgIFiPVOB6R0PtzoflyRp5ORT1uFVD1+In4Lsl4xQDbq3s8Y3EcQIyLXwH99Xiw5oEfnXGsT59dI/2Wj8uMiR0RrE+XRRJEOb8cM4QJPgrXY8c8vxtwtxfk3HP0G7wCgjENoExRQYWoaTJ1EaxeCgbaCBw98KPvjggw8++OCDDz744IMPPvjggw8++OCDDz744IMP8NZD22APDeMaU9sEIN9w+4k81dAu8CpjdxqAPoqpVcgYcmyY/A01oOlz+Klh8rdLAJqTgNokv+AXtAH9AT5ul/zN3kAKSdDiDaQh5QjQHkLK0TfH/+YJsKQcAzSGLuWIrd6/EbRnhCntAO1hVAZWt4KYchBA2yqoPSMcWifAqXECzClHB82hS40ZYTzrGqiNPAjvosSUY2kh7xsIHnAt2WCpe11VFRQaKPru3W7fFAGk7hVIUUGxhaJvyq/dc8rhWql7hbOigmonvyB0xUSAa6bulW5YVEFYPfkFcg4244Kk7iUIVFJBVD/5BQs9H4FTE0VfwbWggromyJ+fg0vK4Nso+u6kUFe/ERbyP+EmR2DlBOh8KiMwANXvgygkBYFgbMEGu6ThCqAQoI0vIA6DToAm1sBCoYWGAPLqF9CIDR40CoTQhhHuQ3oDUC/ont7A2PgXQCBodA1MjX8BBND2JvCrmrwHvvsFVGqD+aJUw17DV5P3vcHvfAH/VCR66V1DVJ0P4kVZzMdfQF9R3tfrjlBHqMfxedUS106APurn2dEaiBUVPU6gwMWkwdVU9wov14iCCsgvCPhzNTxWJfTdbxgiqqjo637uCKeqir4RD4hSGQE47RHpYKVURwBfKHf+cA10NdzyEMwHaaHqbDD/JK+BYyqAW4hf/wIWqGsL8D+uEfYtxK9/AaGqez5ihXS4yghA6RuGHzYKhLou++pWSF0Drq7Oj4g/7JQA48D40x900P/9FuNHMI7hXSukSOeptfh73QY3YIV0ArSiA+GkEKBuK6R/Y79ai5/1f7uRJTBX1hAw/0zYk94Q0IgVuldWD6b4o/hJt8GNWKFRJ0AT8etsacQKudoaozHoJZECov5dtWGF+toIAKcfVbiC3hDQhg7UjXAb8S+6DW7DCrFCgKrjJ89ltgwgqNwKXWZlXK4QoNaSiEyL8SUXJLSo3gqxT4kLPig6BKhcB8u0mPMTAaL8o9qtIM35qsC0wVMD8bPf7wpOIX+1VmhrHHTfjPDCFc4AFkw5+XfxO4X8tVqhPuxXhRjhOICgXh0s5M/lTq+Qv04rxD5fFdliGRH+YmB36vsT0/8Yfx8KhdLeBPmJ+77nDv+3JYD3kjta/u79jy5zTCuiP9PvlkTO7Iu7Av/l5AfkcUmCZeLftkJ0jcVdYQ789wZ/9YXZZr8Vf1SawJHgbwaPsTje7n0rpEKsEMPfChqLMVz/h/iNlX56rww3+6kVUhDQ5DyLGX9aElEQjI40iacfWyEFZ1OzTTcs+LMX0RSMaGm87c9/OE4HCKe/fbK/hun34zeS98Vbeonu51ZIYCHve/tPhvl4e+QXdP/JMB9KOkRN/42gJf0ni5eiNfILzjH9J4t3NLn/0QH737etzhj5Bdf0GhP9XlXMRt2Lwu+TX4/fUtH3+t+Jl0H/Co3+/hPmQomPjJQJ8uu//9Hi5fk3rJAnU3VMnfyXeJzI8HbIL7i8vf+RT8m9a4WsFH3vzzFPzo3LM/mXlN6I3xL5NeXqJ+fmIP/9+0xJfHsJ2Cj69tqap/BE/lILG49z8CMXCGWl6Bu0Ne/2//19LDa942lalvlMZUKNaOBhA0Xw4578xZQQzvsXoSR+Qx0PFz1b2ZXThFxMoF0LVsh3IDCSALqjPg1QwEX6hC1WZ4L8ygqIp+MyiS/rx+m7FQps7l7j+E6O3Jf1Y8DdPxXy23IAsXunTHIqH6BD/k/lJDGlABaN/Epd5FpuBD4J+S0gHJd8TkGr6VIoN8J6cc/Gwqf3aoRz+dMRBLNDm62c03s1wshlBe0en2GLQ84mjfyKTOQKZl7e9RWg1ggnVO4D/TJ+q5U18istLX0Fjz9EreCnP4E5qFm/YLuTOb5VII86ARgMAFHfAp3aI6Eo5WBu7CkB6fzXyZ+DwfIRwGHSJcA/bw359wBWjwC8RZjzP2uBvSpsD1rpLxh53ITV8jWrp0OOqFa/zwZm20NibQP0emFXkYrOUvjbmeZVDcjv9fhS9iWZ6fiVAw3y+Fk/wfT4vVJIDAZeNhOmKoWbXlsCqtgdzKwAOdAgpUEhQHyvTBzKjXSBDLxsJitVIcCoZ8ly9OVl4kx0vILo+OOZjVy+4hOKQmlEQ29ZO4UAXjNJUd8ohmAg8X+JSQB5/F3awZXjdxhfaD0evZ8vaOllnxRJaYbA4hII3L86KfrZ+4ltbH4pQa5iqCxvBSwdEcH2aNM+qsns8fUSuK9F7d5gwktxs7D7DeNrGzOuG1u0TAD0L5IZg7oERAeO+KQG2DL7YReCf53KxKGwUYxWs70lFncHl1f7rrBRoN3xXUKAoPytgwIMb4D6daWhbPUiHhdNg+nJNSDxHz/8p9aMjWFUShrvP/zXGx5tiWUCSPzxjVvA12RcA756tHh4Y4IBBctbYCgSIN2U1TEdNU2erY/zF9D+DNAlHi6ma773IgGkdMeHsyCuSjuAIcRXKe35aBYELbYfux0UAnhNIQV6VRJ19uf4ClibaXBVkmg2NRArBNDjTxOpDYGB7E/zFwTVJISz3hPlwBhQI0BA3SR515/60WuDUmyvgQ2D/rdhvpz6fowKa0xhUQiQnC6RNExgEZjKiKjbRA1kfZI7PMXv0gEsKUD2gd4f3nXT694mx9zhLV2PbDA8r+clvYlAFuoegY4vQCtW6BDu7+94uR7YYHjWwRTr+P1FsoZOVYGKFRxr+P3Za1M9o0YAiZ+r+P37qDj5vOTjy1kfb/33z/36hFoxZIkpQUnU9+kYHsHOkMdBm1zkYlHV4JIOEQcrHS8LKSowupSgqOp646cf3tMeV8UJ+aEc1zEDQmen5h9IKQhySFD+XU/heE6cqSG3V2UNgFfqv6PZIbesZHMLKnDoEyj1XwomJ5zqF7gmLDohZi21MUSTQ26xaHFiV7TBv8CD2uU/BJNDHjtNwC1UXANPlQE+HJYezvDXQp3wfS4VQyIw3LX4gVyBAnEka3leQaCCE/JPrtcfjAv3ZyPtTvohOOSJDyzErz2XEP0FbdW7FQbkawDci7VC95ByhJEtTXhQGMA7e+ReZjeR3exDCGGZLozW3qxUlHseNAOGlwnurh/9EkII89iTsUy/0t6Gu/vLGBQdbBXujSmvp5zvvfUKr85/pbln2fW9cw3x45XfmnV7/b4GvBycpp9v5qlwwOtC+L6vfnj7Jc5LTEtZByoMCPkaYMUKWQH5XLyH4/z9sD/wO9vxi1ofClJYPQnvue1RrJCZzW+vXPi4gtN9S3uMluMHmnPxIvHpmPFpDShWyMjmp15x1lNCW7wRqBB/MMX/uK1tVQr7p5OQMyF8YIWMFL0ian3v4Xn4pU8CGORMsKkD+zy4TpPCwX3fBzEJIti1QjQXXF4hs7GP7pqvEJjEFxiLX59aXGL0MHxjQBZxZ84KKUUvVvnffWdAnwQQi8JB2GQs7aVK4Yj9t5NwzLZ7o1ZIlv8x/9238vaNkgDWSL1JHXgvdakqjO6iIgt+FcnkDfL/pOnAiLhny5wRYCg1AsazzbSXLoVZfQoyFoWjR3tpX53/k1ojgTQVhMNMRtO+uhT2eo9D90ymOBjnf6HI7RQCRPk/09odTD1xpkth1hggnm+w87KZYNDmORSK3AoDYJM7g0J+Y+V/XQqjxoBf30oknsxd8xLMuhVUGJANivRCflPw70th7VHkuCNTYPP8VzMbrkgAKSSxQv56pLA2I6x7fCAOtfD/VNIHfYkAcRMOi0L+aqSwWEcl8UtxRLAFikosSpGb4zMBtpyHEnxVUri4D/4C5Ruw7IOUIncXngnQg4L6pHCZAREENfFfKfJSeCLABDoqk8IKA7qK+J9I48YCBQaAXv2tVQofV3/t60AlzAIDQK/9VSuF9Qf+GuF/boZBf9OyTikszIjaTR/7U8+Cyo3b86hD0PO+lUrhFV1U8r418z89P4wAOqqVwnISHte9KiyJCUZl82tECgsD7O9/eklM4b/AKZtfA1JYQMsAdeCk+NqX/b5O2fxakcIHqLckpqI1KQxN8P/9ft/mpLCOqktiCv/blMLvo6ruSAXtSOGuLf7HozfNG5PCvoMaEdRB3k4Zb9imFA4MCur1QVEZb9egFI4OG+R/r2x+7UnhqWb+kz4ZziubX2NS2HOz/Fc2v6akcDw3zP+7svk1JIUZoWocdEcyKGhABzYAvTtSQ0NSWMGH/61J4Q//Bc1J4YZAsU3+61LYEzQFd/SsTVtSOHCD/Ffyvg1K4eigPfTK5tcQuG3++9Y2P+Ur8Nwy/6ODhkExhRM0i7tsfu1icNgy/2eGD+zDMhAaByI0DPIB2kbfsgbDmxSiWwV7aURoErNy/aSxXNwErYKU6yetpeP5E3/bW4BvL+724le+gb7JQmwfr7ty3Kk99Ru7PBcdsDXlm2Z8jp+gBci77UNejnINpQSu2cukefydb8QPYNi9S3rfenIvcWqpDytQZgUJb+34gZhdSRYdNH9tjNxSF0LoHp1pS2zIDyz5u6RihXwbjZkytD88xK/Tn5+qFPftCwj0bViBR6gWeKXHa+ynsB2DGFppS+Pbw/r4/sEAbmIBXGOaHzvgQA8GnH7/+SmD77bLHoj94xz0tV9Hl1GbvO2Afhu+iV/xh1P1uY+U0vLYA/8RMTSsjPBUv/Xx2w4YURiwEHDd5M/9/rDtgSNAn73PvHAj8csOyHCJmx3sqZX204ibCgS8J2EADs3ELzvg7JNgaqv0KQnwW0yCf6rO+8YUJ5In29z+Nkao3/rh1ae0XEgyYN3u+bql8sOfZtnlJH7K5s+PSEvthz8HOeiy0ic+bF8fuGbyxyQ4Z/EP1ds+Qefzm8fDlu0MVds+QR/SAzGLn2UGZQstjxscwCKlz7uc/A2Qf7p8Hfn9yvuw7oABKofYnOjc14LPSp+DWKJqgdvrymIApiz+8OWDqwaBX4WOFLw6sUJfX07lh/8gwUqud8qs4L3668jkI4rvE9nLwoQJsF4BIMo3ovi+lQBjZoVPXLv1+zfMh+/z8j+kC9ZR9Ye/xE9bHUDij9TG4d9tvucsome1QmMLyteL71u94ERr/NUXfb2Y/NX3DD57da2vPPW1Jfh5P4FHvoChbvcvqS8h/JI2yLODc92Hv4RaHMY6EQiqT32dpATW0iCuWxIEzOP3oZWOr5AELh/CE8f1L5auleGjbl8CdLGJDQDG77OXxffRvfYNQOIPpzmPX6wwec+NXPXzLOJ/d/uxDyPWH39wuJJ+fuP2Z4WUGBbegj6+/Yhci/LND/dC/L8UvTxAJeAFn/rflsPbnxwiVqJ8w3P8PmuBJkUvR6wm9eWeH6UbNh0UHSoJs1stRd9d/P0u/oX1UrGrJvUVSen/A04j6gmzro60VxxAix9ffMphNakv3z35IVne3YtPcR153wlLftAdf8o8eClneKQOoifMqrCFOY0RMtz1+EUYxn8/xV0NF10dyhfw3ugX91gAeEXDQ07co8/V+6f4Q3c0Gajzlmdj4O53vsThKcZZC26zCZeYnFXl67f4vzb1b/HrB7zYBLyZ1oGXOMgWcCrM+wvJ89E1GfYiH00e/mep903xad4fFtNeSISP+KMoJbsTHmXEzfwseniA8jcgMlkQT1aV7xb/m4K2/5rNf5b4Dctgussvntc/8DBjElL6uiZD+qdsKV/Oi/3Hn5I7El3+KTRZ9BX23oXK9Oan5JqMfMraF0B+x9z5Mdqhux1/ShgwavLRAE4hf2eFMk9z4YNPCaZVPi0iJgxhzvh+kvinL1nAx+Tft4uJmLAEjJn16zJPw+JpFMmQY5BrMvbGRVMU6cY+8Rb/JeqXPbq4/u59f5eLYrl8DGhzvi1eY9g8Dc26p5HmuOj6S5CLUosmH43E/2/Ay37EUewOMz+dOOdgtlFKil0cvszvKfM0s7L/Pw0FG3L56DuwAXfakh8hyineHwpaKYlmi4GA7clgvjjHWzhLklPcK29PKtURvy4Bb+vFSuwdpBTE/GdKwB/L4HwgbFwvRnr5lC31u9AWsZSzOP+DQKmOyP8Om3x0aGa8LaxVXr9nLms05svk5wt9i19uxpJ8ythN3yC716OcNWq1LR5nP55R/pVI24youB4GExrq94Z11+e0tfmwJ4B7isML4TtRPhAXZukXcnEwlfoSeDH/538NzgyAMXnWPxSuu6oBytGB0bMp6w8Sv/R90vzvH9Gh1iMu2lAG4kohBE3NxpYk1ipc+REOh6+Oz4KTpSVtWDBrlOu3wUhkavOLad3HNvN/jXrH55QyxO4R/1XCN1f09bxecxw3KS/aRp2MKBDbs+QjE40giFeTfYwkfhl1qc+EFwTxTp1fTYAZIEmT5+bn/N78zqT//hucVAAvsnnYwJbp+ueh5kni1zUsbbnyPmTxC5ylAZ9LbmM7Ocn5oJx1F4tLd8n8+DwZbsb5cN7kS1u677TJYD38WTKHYnsFg62WxyGzsZeNv/5lEgtlLE6W+SFTv79k8ANmQz6zfm+vkR+3Y4PyE5SAraW9HotXbOwqhxhkL3CofAGn/DqEX/8w2kp99WvRY0tjMWT85fJVT1688D/sOgdZrPDZ3E3fEcXGbk99fDl75b7DWVa9yxPBYbOCZGrMwcIy2DKsNlCGvKPiF3mVABFWeKmdREuN4FK+9ZSVAPOcL7LyqSDdkmOuiMJXGjywpc1PjrgxzwPozucqtT2UnXJHAHCewAzu+zy9S3uMimbK58B5UdKbifDO1kXvEXclcJi6+yvlG5LEL1bn4QjAGih71pe7VQpHpiDfjP61RQLOl4BkfiwhT10PUv8BD8BBL9/KtoEwbicF4GIpfL15fZPCTu9kRMkMSMmUHhVwNvqmLV5jOq2LG9IZAHsEBYMk/8XxTMyXYCvzozevbxVd4sMJIbzSJ1z4tJ4lRvnPIT2sIKSIr56D4rTFP37PgxlE3ugRsnn3BZDb7YHJ56lCo6PxwiP6dP7iP5QzGBzWfDBmme/F/O+fp65G3Iq+xQUg3T6DeMUBurgrhlge+BN4lXLgFL8o9n5JaZLh8LP92VicZ3ul6KtVfRda9f64HhVdSAJPhvkfnZwJUd0nRfGNKXknR2UfzN8BH/eZ6+GstkmL4ospDXHd9Ogek1yFsQiSSrZc9iJVLQoD+pQiSfwAXe8ujGAXIoVfYsgz/D6lsd9kL/LF9WSc/x28GX+6/ssZHlTRY9cKvoTPTvoxpQBeoU1l/BcsW5p8wpiSMx2/co/7JfjRJDz0KSWULJB5DIeBSPzrybeElDyYjV8P7o3LUotL6UsD93Cv5EkUeePmHbXopQUmAsxS9K0AXkzgYdZ4cFuZgGIlM+F5LQe+Fb8wgIFiPVOB6R0PtzoflyRp5ORT1uFVD1+In4Lsl4xQDbq3s8Y3EcQIyLXwH99Xiw5oEfnXGsT59dI/2Wj8uMiR0RrE+XRRJEOb8cM4QJPgrXY8c8vxNwtxfm3HP0G7wCgjENoExRQYWoaTJ1EaxeCgbaC5w/+DDz744IMPPvjggw8++OCDDz744IMPDABvPbQN9tAwrjG1TQDyDdceZU53u8CrzFxoAPocjlYhM2ixXfK31H2gD2GmhsnfLgFoTgJqk/yCX9AMlNeXuF3yN9t+HpKgxfbzIeUI0B5CytE3x//mCbCkHAM0hi7liK02XwvaM8KUdoD2MCrTSltBTDkIoG0V1J4RDq0T4NQ4AeaUo4Pm0KXGjDCeFQ3UTB6Ed1FiyrG0kPcNBA+4lmyw1L2uqgoKLRR9d263b4oAUvcKpKig2ELRN+V3LjnlcK3UvcJZUUG1k18QumIiwDVT90o3LKogrJ78AjkHm3FBUvcSBCqpIKqf/IKFno/AqYmir+BaUEFdE+TPz8ElZfBtFH13Uqir3wgL+Z9wkyOwcgJ0PpURGID+qA/6P9HpZtdg1QgHAAAAAElFTkSuQmCC"})),Jg=M((function(){Ed="uniform sampler2D u_image;\nuniform sampler2D u_watermarkTex;\n\nvarying vec2 v_texCoord;\n\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);\n\n  if (watermarkColor.r > 0.8) {\n    gl_FragColor = mix(color, watermarkColor, 0.3);\n  } else {\n    gl_FragColor = color;\n  }\n}\n"})),Qg=M((function(){Ns(),Jg(),Dd=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._fragmentSource=Ed,e}return(0,b.Z)(n,[{key:"_applyWebGL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.getContext(),o=(r.canvas,this.getShaderForRenderer(e)),a=t.getFrame(),s=this._watermarkCanvas;s&&a.width===s.width&&a.height===s.height||this._createWatermarkCanvas(a.width,a.height);var l=ba.Texture.fromCanvas(this._watermarkCanvas),u=l.getBaseTexture();e.updateTexture(u),u.setGLUnit(1),e.setRenderTarget(n),i&&n.clear(),e.setShader(o);var c=e.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",c),o.syncUniforms(),r.uniform1i(r.getUniformLocation(o.getProgram(),"u_watermarkTex"),1),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.getTexture()),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,u.getGLTextureForRenderer(e)),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),l.dispose()}},{key:"_createWatermarkCanvas",value:function(e,t){var n=this._options.watermarkImage,i=we.createCanvas();i.width=e,i.height=t;var r=i.getContext("2d"),o=r.createPattern(n,"repeat");r.fillStyle=o,r.fillRect(0,0,i.width,i.height),this._watermarkCanvas=i,this._watermarkContext=r}},{key:"_applyCanvas",value:function(e,t,n){var i=t.getCanvas(),r=t.getContext(),o=n.getContext();this._options.watermarkImage;this._createWatermarkCanvas(i.width,i.height);for(var a=r.getImageData(0,0,i.width,i.height),s=this._watermarkContext.getImageData(0,0,i.width,i.height),l=new ct,u=new ct,c=new ct,h=0;h<i.width*i.height*4;h+=4)l.set(a.data[h]/255,a.data[h+1]/255,a.data[h+2]/255,a.data[h+3]/255),u.set(s.data[h]/255,s.data[h+1]/255,s.data[h+2]/255,s.data[h+3]/255),u.r>.8?c.copy(l.clone().mix(u,.3)):c.copy(l),a.data[h]=255*c.r,a.data[h+1]=255*c.g,a.data[h+2]=255*c.b,a.data[h+3]=255*c.a;o.putImageData(a,0,0)}}]),n}(ba.Filter),Dd.prototype.availableOptions={watermarkImage:{type:"object",required:!0}}})),$g=M((function(){Ns(),Kg(),Qg(),Id=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),j((0,x.Z)(e),"_applyWatermarkFilter",(function(){return e._watermarkFilter||(e._watermarkFilter=new Dd({watermarkImage:e._watermarkImage})),e._sprite.setFilters([e._watermarkFilter]),e._renderTexture.render(e._container),Promise.resolve()})),j((0,x.Z)(e),"_loadWatermarkImage",(function(){return e._watermarkImage?Promise.resolve():new Promise((function(t,n){e._watermarkImage=new La,e._watermarkImage.onload=t,e._watermarkImage.src=Td}))})),e._watermarkFilter=null,e._watermarkImage=null,e}return(0,b.Z)(n,[{key:"_render",value:function(e){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}},{key:"dispose",value:function(){this._watermarkFilter&&this._watermarkFilter.dispose(),(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this)}}]),n}(Ga),Id.identifier="license-watermark",Id.prototype.availableOptions={},Rs.Operations.LicenseWatermarkOperation=Id,Rd=Id})),em=M((function(){Od="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"})),tm=M((function(){Ns(),Nu(),em(),Fd=pa.Vector2,Ad=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._fragmentSource=Od,e._lastBlurRadius=null,e._lastControlPoint1=new Fd,e._lastControlPoint2=new Fd,e._blurFilter=new ll,e._blurredRenderTarget=new ba.CanvasRenderTarget(100,100,1),e._maskRenderTarget=new ba.CanvasRenderTarget(100,100,1),e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=t.getDimensions(),a=!n.getDimensions().equals(o),s=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||a;if(s){var l=new Fd(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(l);var u={blurRadius:this._options.blurRadius,texSize:o},c=function(e,t,n){return Math.min(Math.max(e,t),n)},h=function(e,t,n){var i=c((n-e)/(t-e),0,1);return i*i*(3-2*i)},d=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone()),f=this._options.blurRadius,p=function(e,t){return h(0,1,Math.abs(c(new Fd(e,t).subtract(i._options.controlPoint1).dot(d)/d.dot(d),0,1)))*f};this._blurFilter.set(u),this._blurFilter._applyCanvas(e,t,n,r,p),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(e,t,n,r)}},{key:"_renderLQBlur",value:function(e,t,n){var i=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(i);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());var o=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||r,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||r;o&&(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),a&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,n)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),n=new Fd(e.width,e.height),i=this._options.controlPoint1.clone().multiply(n),r=this._options.controlPoint2.clone().multiply(n),o=t.createLinearGradient(i.x,i.y,r.x,r.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),t.fillStyle=o,t.fillRect(0,0,e.width,e.height)}},{key:"_applyMask",value:function(e,t){for(var n,i=t.getContext(),r=e.getCanvas(),o=e.getContext(),a=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),l=o.getImageData(0,0,r.width,r.height),u=l.data,c=a.getImageData(0,0,r.width,r.height).data,h=s.getImageData(0,0,r.width,r.height).data,d=0;d<r.width*r.height*4;d+=4)n=h[d]/255,u[d]=n*u[d]+(1-n)*c[d],u[d+1]=n*u[d+1]+(1-n)*c[d+1],u[d+2]=n*u[d+2]+(1-n)*c[d+2];i.putImageData(l,0,0)}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}]),n}(ba.Filter),Ad.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},controlPoint1:{type:"vector2",default:new Fd(0,.5),uniformType:"2f"},controlPoint2:{type:"vector2",default:new Fd(1,.5),uniformType:"2f"},delta:{type:"vector2",default:new Fd(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new Fd(100,100),uniformType:"2f"}},Pd=Ad})),nm=M((function(){Ns(),tm(),Zd=pa.Vector2,Md=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];(e=t.call.apply(t,[this].concat(r)))._lastBlurRadius=e._options.blurRadius,e._lastControlPoint1=e._options.controlPoint1.clone(),e._lastControlPoint2=e._options.controlPoint2.clone();var a={blurQuality:{type:"string"}};return e._horizontalFilter=new Pd({},a),e._verticalFilter=new Pd({},a),e._sprite.setFilters([e._horizontalFilter,e._verticalFilter]),e._horizontalFilter.setDelta(new Zd(.5,.5)),e._verticalFilter.setDelta(new Zd(-.5,.5)),e._filter=new Pd({},a),e}return(0,b.Z)(n,[{key:"rotate",value:function(e){var t=this._options.controlPoint1,n=this._options.controlPoint2;90===e?(t.flip(),t.x=1-t.x,n.flip(),n.x=1-n.x):-90===e&&(t.flip(),t.y=1-t.y,n.flip(),n.y=1-n.y),this.set({controlPoint1:t,controlPoint2:n})}},{key:"flip",value:function(e){var t=this._options.controlPoint1,n=this._options.controlPoint2;switch(e){case"horizontal":t.x=1-t.x,n.x=1-n.x;break;case"vertical":t.y=1-t.y,n.y=1-n.y}this.set({controlPoint1:t,controlPoint2:n})}},{key:"transform",value:function(e){var t=this,n={};["controlPoint1","controlPoint2"].forEach((function(i){var r=t.getOption(i);n[i]=e.applyToRelativePoint(r)})),["blurRadius"].forEach((function(i){var r=t.getOption(i);n[i]=e.applyToRelativeSize(r)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:function(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i=this._options,r=i.blurRadius,o=i.controlPoint1,a=i.controlPoint2,s={blurRadius:r*n,controlPoint1:o.clone(),controlPoint2:a.clone(),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(s),this._verticalFilter.set(s),this._renderTexture.render(this._container),Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=e.getDimensions(),n=this._options,i=n.blurRadius,r=n.controlPoint1,o=n.controlPoint2;return this._filter.set({blurRadius:i,controlPoint1:r.clone(),controlPoint2:o.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),n}(Ga),Md.identifier="linear-focus",Md.prototype.availableOptions={controlPoint1:{type:"vector2",default:new Zd(0,.5)},controlPoint2:{type:"vector2",default:new Zd(1,.5)},blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:!1}},Rs.Operations.LinearFocusOperation=Md,zd=Md})),im=M((function(){Bd="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"})),rm=M((function(){Ns(),Nu(),im(),Ld=pa.Vector2,Ud=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._fragmentSource=Bd,e._lastBlurRadius=null,e._lastGradientRadius=null,e._lastStart=new Ld,e._lastEnd=new Ld,e._blurFilter=new ll,e._blurredRenderTarget=new ba.CanvasRenderTarget(100,100,1),e._maskRenderTarget=new ba.CanvasRenderTarget(100,100,1),e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var r=t.getDimensions(),o=!n.getDimensions().equals(r),a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o;if(a){var s=new Ld(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(s);var l={blurRadius:this._options.blurRadius,texSize:r},u=function(e,t,n){return Math.min(Math.max(e,t),n)},c=function(e,t,n){var i=u((n-e)/(t-e),0,1);return i*i*(3-2*i)},h=this._options,d=h.blurRadius,f=h.gradientSize,p=h.size,g=h.start,m=h.end,y=h.texSize,v=new Ld(g.y-m.y,m.x-g.x);v.divide(v.len());var _=function(e,t){return c(0,1,(Math.abs(y.clone().multiply(e,t).subtract(g).dot(v))-p)/f)*d};this._blurFilter.set(l),this._blurFilter._applyCanvas(e,t,n,i,_),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(e,t,n,i)}},{key:"_renderLQBlur",value:function(e,t,n){var i=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(i);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());var o=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||r,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||r;o&&(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),a&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,n)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),n=this._maskRenderTarget.getPixelRatio(),i=new Ld(e.width,e.height),r=this._options.size*i.min()*n,o=this._options.gradientSize*i.min()*n,a=this._options.start.clone().multiply(i),s=this._options.end.clone().multiply(i).clone().subtract(a),l=a.clone().add(s.clone().divide(2)),u=s.len(),c=s.clone().divide(u),h=l.clone().add((r+o)*c.y,-(r+o)*c.x),d=l.clone().add(-(r+o)*c.y,(r+o)*c.x),f=t.createLinearGradient(h.x,h.y,d.x,d.y),p=d.clone().subtract(h).len();f.addColorStop(0,"#000000"),f.addColorStop(o/2/p,"#FFFFFF"),f.addColorStop(1-o/2/p,"#FFFFFF"),f.addColorStop(1,"#000000"),t.fillStyle=f,t.fillRect(0,0,e.width,e.height)}},{key:"_applyMask",value:function(e,t){for(var n,i=t.getContext(),r=e.getCanvas(),o=e.getContext(),a=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),l=o.getImageData(0,0,r.width,r.height),u=l.data,c=a.getImageData(0,0,r.width,r.height).data,h=s.getImageData(0,0,r.width,r.height).data,d=0;d<r.width*r.height*4;d+=4)n=h[d]/255,u[d]=n*u[d]+(1-n)*c[d],u[d+1]=n*u[d+1]+(1-n)*c[d+1],u[d+2]=n*u[d+2]+(1-n)*c[d+2];i.putImageData(l,0,0)}},{key:"dispose",value:]),n}(ba.Filter),Ud.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},size:{type:"number",default:50,uniformType:"f"},gradientSize:{type:"number",default:50,uniformType:"f"},start:{type:"vector2",default:new Ld(0,.5),uniformType:"2f"},end:{type:"vector2",default:new Ld(1,.5),uniformType:"2f"},delta:{type:"vector2",default:new Ld(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new Ld(100,100),uniformType:"2f"}},Nd=Ud})),om=M((function(){Ns(),rm(),Hd=pa.Vector2,jd=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];(e=t.call.apply(t,[this].concat(r)))._lastBlurRadius=e._options.blurRadius,e._lastSize=e._options.size,e._lastGradientSize=e._options.gradientSize;var a={blurQuality:{type:"string"}};return e._horizontalFilter=new Nd({},a),e._verticalFilter=new Nd({},a),e._sprite.setFilters([e._horizontalFilter,e._verticalFilter]),e._horizontalFilter.setDelta(new Hd(.5,.5)),e._verticalFilter.setDelta(new Hd(-.5,.5)),e._filter=new Nd({},a),e._renderBlur.bind((0,x.Z)(e)),e}return(0,b.Z)(n,[{key:"rotate",value:function(e){var t=this._options.start,n=this._options.end;90===e?(t.flip(),t.x=1-t.x,n.flip(),n.x=1-n.x):-90===e&&(t.flip(),t.y=1-t.y,n.flip(),n.y=1-n.y),this.set({start:t,end:n})}},{key:"flip",value:function(e){var t=this._options.start,n=this._options.end;switch(e){case"horizontal":t.x=1-t.x,n.x=1-n.x;break;case"vertical":t.y=1-t.y,n.y=1-n.y}this.set({start:t,end:n})}},{key:"transform",value:function(e){var t=this,n={};["start","end"].forEach((function(i){var r=t.getOption(i);n[i]=e.applyToRelativePoint(r)})),["blurRadius","size","gradientSize"].forEach((function(i){var r=t.getOption(i);n[i]=e.applyToRelativeSize(r)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:function(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i=this._options.start.clone(),r=this._options.end.clone(),o=this._options,a={blurRadius:o.blurRadius*n,size:o.size*n,gradientSize:o.gradientSize*n,start:i.clone().multiply(t),end:r.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=e.getDimensions(),n=this._options,i=n.blurRadius,r=n.size,o=n.gradientSize,a=n.start,s=n.end;return this._filter.set({blurRadius:i,gradientSize:o,size:r,start:a.clone(),end:s.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),n}(Ga),jd.identifier="mirrored-focus",jd.prototype.availableOptions={start:{type:"vector2",default:new Hd(0,.5)},end:{type:"vector2",default:new Hd(1,.5)},blurRadius:{type:"number",default:.025},size:{type:"number",default:.1},gradientSize:{type:"number",default:.1},highQualityCanvasBlur:{type:"boolean",default:!1}},Rs.Operations.MirroredFocusOperation=jd,Wd=jd})),am=M((function(){Ns(),Vd=pa.Vector2,Gd=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_render",value:function(e){var t=this._options.rotation%360,n=t*(Math.PI/180),i=90===t||270===t,r=this._options.flipHorizontally!==this._options.flipVertically,o=i&&r?!this._options.flipVertically:this._options.flipVertically,a=i&&r?!this._options.flipHorizontally:this._options.flipHorizontally;this._sprite.setScale(a?-1:1,o?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var s=this._sprite.getBounds();return this._renderTexture.resizeTo(new Vd(s.width,s.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),Promise.resolve()}},{key:"getNewDimensions",value:function(e){return e=e.clone(),this._options.rotation%180&&e.flip(),e}},{key:"flip",value:function(e){var t=this._options.rotation;switch(90!==t&&270!==t||(e="vertical"===e?"horizontal":"vertical"),e){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}}}]),n}(Ga),Gd.identifier="orientation",Gd.prototype.availableOptions={rotation:{type:"number",default:0,validation:function(e){if(e%90!==0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:,flipVertically:{type:"boolean",default:!1},flipHorizontally:{type:"boolean",default:!1}},Rs.Operations.OrientationOperation=Gd,qd=Gd})),sm=M((function(){Ns(),Yd=pa.Vector2,Xd=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._flipContainer=new ba.Container,e}return(0,b.Z)(n,[{key:"_render",value:function(e){var t=this._options,n=t.position,i=t.rotation,r=t.scale,o=t.pivot,a=t.outputResolution,s=this._sdk.getTextureScale(),l=a.clone().multiply(s).ceil();return this._renderTexture.resizeTo(l),this._sprite.setRotation(i),this._sprite.setPosition(n),this._sprite.setPivot(o),this._sprite.setScale(r),this._renderTexture.render(this._container),Promise.resolve()}},{key:"getNewDimensions",value:function(e){var t=this._sdk.getTextureScale();return this._options.outputResolution.clone().multiply(t).ceil()}}]),n}(Ga),Xd.identifier="output",Xd.prototype.availableOptions={position:{type:"vector2",default:new Yd(0,0)},rotation:{type:"number",default:0},scale:{type:"vector2",default:new Yd(1,1)},pivot:{type:"vector2",default:new Yd(0,0)},outputResolution:{type:"vector2",default:new Yd(100,100)}},Rs.Operations.OutputOperation=Xd,Kd=Xd})),lm=M((function(){Ns(),Jd=ba.Filters.OverlayFilter,Qd=pa.Vector2,4,$d=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._overlayTexture=ba.Texture.fromImage(e._options.image),e._overlayContainer=new ba.Container,e._overlaySprite=new ba.Sprite,e._overlaySprite.setTexture(e._overlayTexture),e._overlaySprite.setAnchor(0,0),e._overlayContainer.addChild(e._overlaySprite),e._overlayFilter=new ba.Filters.OverlayFilter({overlayImage:e._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:e._overlayTexture}),e._sprite.setFilters([e._overlayFilter]),e._renderedOverlaySprite=new ba.Sprite,e._renderedOverlayContainer=new ba.Container,e._renderedOverlayContainer.addChild(e._renderedOverlaySprite),e._overlayRendered=!1,e._lastInputDimensions=new Qd(0,0),e}return(0,b.Z)(n,[{key:"setOption",value:function(e,t){if((0,f.Z)((0,p.Z)(n.prototype),"setOption",this).call(this,e,t),"image"===e&&t&&this._sdk){var i=this._sdk.getRenderer(),r=this._overlayTexture.getBaseTexture();r.setSource(t),i.isOfType("webgl")&&i.updateTexture(r),this._overlayRendered=!1}}},{key:"_render",value:function(e){var t=e.getDimensions(),n=this._options,i=n.image,r=n.alpha,o=n.blendMode;return i?(this._overlayRendered&&this._lastInputDimensions.equals(t)||(this._renderOverlayToRenderTexture(e),this._overlayRendered=!0,this._lastInputDimensions.copy(t)),this._overlayFilter.set({blendMode:o,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:r}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),Promise.resolve()):(this._sprite.setFilters([]),this._renderTexture.render(this._container),Promise.resolve())}},{key:"_renderOverlayToRenderTexture",value:function(e){var t=this._sdk.getRenderer(),n=e.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new ba.RenderTexture(t,n.x,n.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var i=this._options.image,r=i.width,o=i.height,a=we.resizeVectorToFill(new Qd(r,o),n),s=this._options,l=s.flipHorizontally?-1:1,u=s.flipVertically?-1:1;this._overlaySprite.setWidth(a.x*l),this._overlaySprite.setHeight(a.y*u),this._overlaySprite.setPosition(n.x*(1-l)*.5,n.y*(1-u)*.5);var c=this._overlayRenderTexture.getBaseTexture();this._overlayRenderTexture.resizeTo(n),t.isOfType("webgl")&&(c.setGLUnit(4),t.updateTexture(c,!1)),this._overlayRenderTexture.render(this._overlayContainer)}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._overlaySprite&&this._overlaySprite.dispose(),this._overlayRenderTexture&&this._renderedOverlaySprite.dispose(),this._overlayFilter&&this._overlayFilter.dispose(),this._overlayTexture&&this._overlayTexture.dispose(),this._overlayRenderTexture&&this._overlayRenderTexture.dispose(),this._renderedOverlaySprite&&this._renderedOverlaySprite.dispose()}}]),n}(Ga),$d.identifier="overlay",$d.BLEND_MODES=Jd.BLEND_MODES,$d.prototype.availableOptions={identifier:{type:"string"},image:{type:"image"},blendMode:{type:"number",default:Jd.BLEND_MODES.MULTIPLY,available:Object.keys(Jd.BLEND_MODES).map((function(e){return Jd.BLEND_MODES[e]}))},alpha:{type:"number",default:1},flipHorizontally:{type:"boolean",default:!1},flipVertically:{type:"boolean",default:!1}},Rs.Operations.OverlayOperation=$d,ef=$d})),um=M((function(){tf="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nconst float blurSteps = 30.0;\nconst float EPSILON = 0.000000001;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 coord = v_texCoord * u_texSize;\n    vec2 diff = coord - u_position;\n    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);\n\n    float blurPercentage = smoothstep( \n      0.0, 1.0,\n      (abs(dist) - u_radius) / u_gradientRadius\n    );\n\n    float radius = blurPercentage * u_blurRadius;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    for (float t = -blurSteps; t <= blurSteps; t++) {\n        float percent = (t + offset - 0.5) / blurSteps;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / max(total, EPSILON);\n}\n"})),cm=M((function(){Ns(),Nu(),um(),nf=pa.Vector2,rf=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._fragmentSource=tf,e._lastBlurRadius=null,e._lastGradientRadius=null,e._lastPosition=new nf,e._blurFilter=new ll,e._blurredRenderTarget=new ba.CanvasRenderTarget(100,100,1),e._maskRenderTarget=new ba.CanvasRenderTarget(100,100,1),e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=t.getDimensions(),a=!n.getDimensions().equals(o),s=this._options,l=s.blurRadius,u=s.position,c=s.texSize,h=s.gradientRadius,d=t.getBaseTexture().isDirty()||this._lastBlurRadius!==l||a;if(d){var f=new nf(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(f);var p={blurRadius:l,texSize:o},g=function(e,t,n){return Math.min(Math.max(e,t),n)},m=function(e,t,n){var i=g((n-e)/(t-e),0,1);return i*i*(3-2*i)},y=function(e,t){return m(0,1,(Math.abs(c.clone().multiply(e,t).subtract(u).len())-i._options.radius)/(2*h))*l};this._blurFilter.set(p),this._blurFilter._applyCanvas(e,t,n,r,y),this._lastBlurRadius=l}}else this._renderLQBlur(e,t,n,r)}},{key:"_renderLQBlur",value:function(e,t,n){var i=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(i);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());var o=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||r,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||r;o&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),a&&(this._blurImage(t,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,n)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),n=new nf(e.width,e.height),i=this._maskRenderTarget.getPixelRatio(),r=this._options.position.clone().multiply(n),o=this._options,a=o.radius,s=o.gradientRadius;a*=e.height,s*=e.height;var l=t.createRadialGradient(r.x,r.y,0,r.x,r.y,(a+s)*i);l.addColorStop(0,"#FFFFFF"),l.addColorStop(a/(a+s),"#FFFFFF"),l.addColorStop(1,"#000000"),t.fillStyle=l,t.fillRect(0,0,n.x,n.y)}},{key:"_applyMask",value:function(e,t){for(var n,i=t.getContext(),r=e.getCanvas(),o=e.getContext(),a=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),l=o.getImageData(0,0,r.width,r.height),u=l.data,c=a.getImageData(0,0,r.width,r.height).data,h=s.getImageData(0,0,r.width,r.height).data,d=0;d<r.width*r.height*4;d+=4)n=h[d]/255,u[d]=n*u[d]+(1-n)*c[d],u[d+1]=n*u[d+1]+(1-n)*c[d+1],u[d+2]=n*u[d+2]+(1-n)*c[d+2];i.putImageData(l,0,0)}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}]),n}(ba.Filter),rf.prototype.availableOptions={blurRadius:{type:"number",default:30,uniformType:"f"},radius:{type:"number",default:50,uniformType:"f"},gradientRadius:{type:"number",default:25,uniformType:"f"},position:{type:"vector2",default:new nf(.5,.5),uniformType:"2f"},delta:{type:"vector2",default:new nf(1,1),uniformType:"2f"},texSize:{type:"vector2",default:new nf(100,100),uniformType:"2f"}},of=rf})),hm=M((function(){Ns(),cm(),af=pa.Vector2,sf=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];(e=t.call.apply(t,[this].concat(r)))._lastBlurRadius=e._options.blurRadius,e._lastGradientRadius=e._options.gradientRadius;var a={blurQuality:{type:"string"}};return e._horizontalFilter=new of({},a),e._verticalFilter=new of({},a),e._sprite.setFilters([e._horizontalFilter,e._verticalFilter]),e._horizontalFilter.setDelta(new af(.5,.5)),e._verticalFilter.setDelta(new af(-.5,.5)),e._filter=new of({},a),e}return(0,b.Z)(n,[{key:"rotate",value:function(e){var t=this._options.position;90===e?(t.flip(),t.x=1-t.x):-90===e&&(t.flip(),t.y=1-t.y),this.set({position:t})}},{key:"flip",value:function(e){var t=this._options.position;switch(e){case"horizontal":t.x=1-t.x;break;case"vertical":t.y=1-t.y}this.set({position:t})}},{key:"transform",value:function(e){var t=this,n={},i=this.getPosition();n.position=e.applyToRelativePoint(i),["radius","blurRadius","gradientRadius"].forEach((function(i){var r=t.getOption(i);n[i]=e.applyToRelativeSize(r)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:function(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i=this._options,r=i.position,o={blurRadius:i.blurRadius*n,radius:i.radius*n,gradientRadius:i.gradientRadius*n,position:r.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(o),this._verticalFilter.set(o),this._renderTexture.render(this._container),Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=this._options,n=t.blurRadius,i=t.radius,r=t.gradientRadius,o=t.position,a=e.getDimensions();return this._filter.set({blurRadius:n,radius:i,gradientRadius:r,position:o,texSize:a,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),n}(Ga),sf.identifier="radial-focus",sf.prototype.availableOptions={position:{type:"vector2",default:new af(.5,.5)},radius:{type:"number",default:.25},gradientRadius:{type:"number",default:.125},blurRadius:{type:"number",default:.025},highQualityCanvasBlur:{type:"boolean",default:!1}},Rs.Operations.RadialFocusOperation=sf,lf=sf})),dm=M((function(){uf="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"})),fm=M((function(){Ns(),dm(),(cf=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.call(this))._fragmentSource=uf,e}return(0,b.Z)(n,[{key:"_applyCanvas",value:function(e,t,n){for(var i,r=t.getCanvas(),o=t.getContext(),a=n.getContext(),s=this._options,l=s.maskCanvas,u=s.filterCanvas,c=l.getContext("2d"),h=u.getContext("2d"),d=c.getImageData(0,0,r.width,r.height).data,f=o.getImageData(0,0,r.width,r.height),p=f.data,g=h.getImageData(0,0,r.width,r.height).data,m=0;m<r.width*r.height*4;m+=4)i=d[m]/255,p[m]=i*g[m]+(1-i)*p[m],p[m+1]=i*g[m+1]+(1-i)*p[m+1],p[m+2]=i*g[m+2]+(1-i)*p[m+2];a.putImageData(f,0,0)}}]),n}(ba.Filter)).prototype.availableOptions={maskImage:{type:"number",default:1,uniformType:"i"},maskCanvas:{type:"object",default:null},filterImage:{type:"number",default:2,uniformType:"i"},filterCanvas:{type:"object",default:null}},hf=cf})),pm=M((function(){Ns(),df=pa.Vector2,ff=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i){var r;return(0,_.Z)(this,n),(r=t.call(this,i))._isDisposed=!1,r._operation=e,r._dirtiness={},r.id=we.getUUID(),r._renderTextures={},r._identitySprite=new ba.Sprite,r._sprite=new ba.Sprite,r._hitTestSprite=new ba.Sprite,r._renderers=[],r}return(0,b.Z)(n,[{key:"applyScale",value:function(e){}},{key:"applyRotation",value:function(e){var t=this._operation.getInputDimensions(),n=180*this.getRotation()/Math.PI;n+=e,this.setRotation(n*Math.PI/180);var i=(e+360)%360*Math.PI/180,r=Math.cos(i),o=Math.sin(i),a=this._options.position.clone().subtract(.5).multiply(t),s=new df(a.x*r-a.y*o,a.x*o+a.y*r).divide(t.clone().flip());this.setPosition(new df(.5,.5).add(s))}},{key:"applyFlip",value:function(e){var t=this.getPosition().clone();switch(e){case"horizontal":t.x=1-this._options.position.x;break;case"vertical":t.y=1-this._options.position.y}this.setPosition(t)}},{key:"applyTransform",value:function(e){var t={};t.rotation=e.applyToRotation(this.getRotation()),t.position=e.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(t.dimensions=e.applyToDimensions(this.getDimensions())),this.set(t,!1)}},{key:"getDisplayObject",value:function(){return this._sprite}},{key:"getHitTestDisplayObject",value:function(){return this._sprite}},{key:"_getTexture",value:function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}},{key:"_prepareRenderTexture",value:function(e){if(this._renderTexture)this._renderTexture.clear();else{var t=this._getTexture();this._renderTextureContainer=new ba.Container,this._renderTextureSprite=new ba.Sprite(t),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(e.getRenderer(),t.getDimensions())}}},{key:"_rendersToRenderTexture",value:function(e){return e.getOptions().smoothDownscaling&&e.getRenderer().isOfType("webgl")}},{key:"_optionEquals",value:function(e,t){return"type"===e||(0,f.Z)((0,p.Z)(n.prototype),"_optionEquals",this).call(this,e,t)}},{key:"update",value:function(e,t){this._isDisposed||(this._rendersToRenderTexture(e)&&(this._prepareRenderTexture(e),this._renderToRenderTexture(e)),this._updateSprite(t))}},{key:"_updateSprite",value:function(e){var t=this;[this._sprite,this._hitTestSprite].forEach((function(n){if(n.getTexture()){n.setAnchor(t._options.anchor),n.setPosition(t._options.position.clone().multiply(e)),"undefined"!==typeof t._options.alpha&&n.setAlpha(t._options.alpha);var i=t._options.dimensions;i&&(i=i.clone().multiply(t._operation.getSDK().getTextureScale()),n.setWidth(i.x),n.setHeight(i.y)),n.updateTransform();var r=n.getTexture().getFrame(),o=new df(r.width,r.height);n.setPivot(t._options.pivot.clone().multiply(o)),n.setRotation(t._options.rotation),n.updateTransform()}}))}},{key:"_renderToRenderTexture",value:function(e){var t=this._getTexture().getDimensions(),n=this._getRenderTexture(e.getRenderer(),t),i=t.clone();if(this._options.smoothDownscaling&&(i.x=we.nextHighestPOT(i.x),i.y=we.nextHighestPOT(i.y)),this._renderTexture.resizeTo(i),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var r=i.clone().subtract(t.x,t.y).divide(i),o=n.getUVs().getUVs();o[0].x=o[3].x=0,o[1].x=o[2].x=1-r.x,o[0].y=o[1].y=0,o[2].y=o[3].y=1-r.y}this._sprite.setTexture(n)}},{key:"isDirtyForRenderer",value:function(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}},{key:"setDirtyForRenderer",value:function(e,t){this._renderers[t.id]=t,this._dirtiness[t.id]=e}},{key:"setDirty",value:function(e){for(var t in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[t])}},{key:"_getRenderTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new df(100,100);return this._renderTextures[e.id]||(this._renderTextures[e.id]=new ba.RenderTexture(e,t.x,t.y,1)),this._renderTextures[e.id]}},{key:"dispose",value:function(){for(var e in this._isDisposed=!0,this._renderTextures)this._renderTextures[e].dispose()}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canBeDeleted",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}},{key:"canBeTakenToFront",value:function(){return!0}},{key:"canBeFlippedHorizontally",value:function(){return!0}}]),n}(Ht),pf=ff})),gm=M((function(){Ns(),gf=pa.Vector2,mf=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._lastOptions={},e._lastInputDimensions=new gf(0,0),e._brush=null,e}return(0,b.Z)(n,[{key:"getBrushImage",value:function(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;var t=this._options,n=t.image,i=t.size;n.width=n.height=Math.ceil(i*e.min());var r=we.createCanvas();r.width=n.width,r.height=n.height;var o=r.getContext("2d");o.drawImage(n,0,0,r.width,r.height);var a=this._tintImageData(o.getImageData(0,0,r.width,r.height),r.width,r.height);return o.putImageData(a,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=r,this._lastInputDimensions=e.clone(),r}},{key:"_tintImageData",value:function(e){for(var t=this._options.color,n=0;n<e.data.length;n+=4)e.data[n]+=(255*t.r-e.data[n])*t.a,e.data[n+1]+=(255*t.g-e.data[n+1])*t.a,e.data[n+2]+=(255*t.b-e.data[n+2])*t.a;return e}},{key:"clone",value:]),n}(Ht),mf.prototype.availableOptions={identifier:{type:"string"},image:{type:"image"},size:{type:"number",default:.05},color:{type:"color",default:ct.RED}}})),mm=M((function(){Ns(),gm(),yf=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"getBrushImage",value:function(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;var t=this._options,n=t.size,i=t.hardness,r=t.color,o=we.createCanvas();o.width=o.height=Math.ceil(n*e.min());var a=o.getContext("2d");if((r=r.clone()).a=1,1===o.width)a.fillStyle=r.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*i),o.width/2,o.height/2,o.width/2);s.addColorStop(0,r.toRGBA());var l=r.clone();l.a=0,s.addColorStop(1,l.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=o,this._lastInputDimensions=e.clone(),o}}]),n}(mf),yf.identifier="imgly_brush_radial",yf.prototype.availableOptions=(0,C.Z)((0,C.Z)({},mf.prototype.availableOptions),{},{hardness:{type:"number",default:1}})})),ym=M((function(){Ns(),vf=pa.Vector2,_f=pa.CubicBezierCurve,bf=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;(0,_.Z)(this,e),this._path=t,this._drawnCanvases=[],this._position=n,this._smooth=i}return(0,b.Z)(e,[{key:"getBezierCurve",value:function(e,t,n,i){if(!t)return null;var r,o,a,s;i?(r=(i.x-t.x)/this._smooth,o=(i.y-t.y)/this._smooth):(r=(n.x-t.x)/this._smooth,o=(n.y-t.y)/this._smooth),e?(a=(n.x-e.x)/this._smooth,s=(n.y-e.y)/this._smooth):(a=(n.x-t.x)/this._smooth,s=(n.y-t.y)/this._smooth);var l=t.clone().add(a,s),u=n.clone().subtract(r,o);return new _f(t,l,u,n)}},{key:"renderToCanvas",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(-1===this._drawnCanvases.indexOf(t)){var a,s=new vf(t.width,t.height),l=t.getContext("2d"),u=this._position.clone().multiply(s),c=i?i.getPosition().clone().multiply(s):null,h=n?n.getPosition().clone().multiply(s):null,d=r?r.getPosition().clone().multiply(s):null,f=(u.clone().subtract(c).len(),e.width/10),p=this.getBezierCurve(h,c,u,d);if(p){p.calculateSegments(20);var g=p.getLength();a=p.arcLengthApproxSample(Math.ceil(g/f))}else a=[u];for(var m=0;m<a.length;m++){var y=a[m],v=.5*e.width/(2*f);v=1/(1+(v*=1-o)),l.globalAlpha=v,l.drawImage(e,y.x-e.width/2,y.y-e.height/2,e.width,e.height)}l.globalAlpha=1,this._drawnCanvases.push(t)}}},{key:"setPosition",value:function(e){this._position=e}},{key:"getPosition",value:function(){return this._position.clone()}},{key:"setDirty",value:function(){this._drawnCanvases=[]}}]),e}(),xf=bf})),vm=M((function(){Ns(),ym(),kf=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r){var o;return(0,_.Z)(this,n),(o=t.call(this,i))._operation=e,o._canvas=r||we.createCanvas(),o._context=o._canvas.getContext("2d"),o}return(0,b.Z)(n,[{key:"serializeOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===e?this._options.controlPoints.map((function(e){var n=e.getPosition();return t?n.toObject():n.clone()})):(0,f.Z)((0,p.Z)(n.prototype),"serializeOption",this).call(this,e,t)}},{key:"_optionEquals",value:function(e,t){if("controlPoints"===e){for(var i=this._options.controlPoints,r=0,o=i.length;r<o;r++)if(!i[r].getPosition().equals(t[r]))return!1;return!0}return(0,f.Z)((0,p.Z)(n.prototype),"_optionEquals",this).call(this,e,t)}},{key:"render",value:function(e){var t=this._options,n=t.controlPoints,i=t.size;if(!(n.length<2)){var r,o,a,s,l=this.getBrush(),u=l&&l.getHardness?l.getHardness():1;we.ensureCanvasDimensions(this._canvas,e),this._brush&&this._lastBrushSize===i&&e.equals(this._brushInputDimensions)||(this._brushInputDimensions=e.clone(),this._lastBrushSize=i);for(var c=0;c<n.length;c++)r=n[c-2],o=n[c-1],a=n[c],s=n[c+1],a.renderToCanvas(this._options.brush.getBrushImage(e),this._canvas,r,o,s,u)}}},{key:"_createBrush",value:function(e){var t=this._options,n=t.size,i=t.hardness,r=t.color,o=we.createCanvas();o.width=o.height=Math.ceil(n*e.min());var a=o.getContext("2d");if((r=r.clone()).a=1,1===o.width)a.fillStyle=r.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*i),o.width/2,o.height/2,o.width/2);s.addColorStop(0,r.toRGBA());var l=r.clone();l.a=0,s.addColorStop(1,l.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return o}},{key:"addControlPoint",value:function(e){var t=new xf(this,e);this._options.controlPoints.push(t),this.emit("update",this)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"setCanvas",value:function(e){this._canvas=e,this._context=e.getContext("2d")}},{key:"setDirty",value:function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach((function(e){e.setDirty()}))}},{key:"forEachControlPoint",value:,{key:"renderToCanvas",value:function(e){var t=e.getContext("2d");t.save(),t.globalAlpha=this._options.brush.getColor().a,t.drawImage(this._canvas,0,0),t.restore()}},{key:"getCanvasDimensions",value:function(){return this._canvasDimensions}}]),n}(Ht),kf.prototype.availableOptions={id:{type:"string",default:function(){return we.getUUID()}},brush:{type:"object",required:!0},controlPoints:{type:"array",default:[]},closed:{type:"boolean",default:!1}},wf=kf})),_m=M((function(){Ns(),pm(),gm(),mm(),vm(),Sf=pa.Vector2,Cf=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._persistedPaths=[],e._outputCanvasDirty=!0,e._outputCanvas=we.createCanvas(),e._outputContext=e._outputCanvas.getContext("2d"),e._persistCanvas=we.createCanvas(),e._persistContext=e._persistCanvas.getContext("2d"),e._nextCanvas=we.createCanvas(),e._texture=ba.Texture.fromCanvas(e._outputCanvas),e._sprite.setTexture(e._texture),e._onPathUpdate=e._onPathUpdate.bind((0,x.Z)(e)),e}return(0,b.Z)(n,[{key:"applyFlip",value:function(e){this._options.paths.forEach((function(t){t.forEachControlPoint((function(t){var n=t.getPosition().clone();switch(e){case"horizontal":n.x=1-n.x;break;case"vertical":n.y=1-n.y}t.setPosition(n)})),t.setDirty(!0)})),this._reset()}},{key:"applyRotation",value:function(e){this._options.paths.forEach((function(t){t.forEachControlPoint((function(t){var n=t.getPosition().clone();90===e?(n.flip(),n.x=1-n.x):-90===e&&(n.flip(),n.y=1-n.y),t.setPosition(n)})),t.setDirty(!0)})),this._reset()}},{key:"applyTransform",value:function(e){var t=null;this._options.paths.forEach((function(n){n.forEachControlPoint(();var i=n.getBrush();i!==t&&(i.setSize(e.applyToRelativeSize(i.getSize())),t=i),n.setDirty(!0)})),this._reset()}},{key:"clearCanvas",value:function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var e=this._outputCanvas,t=e.width,n=e.height;this._outputContext.clearRect(0,0,t,n)}}},{key:"clearPersistCanvas",value:function(){if(this._persistCanvas){var e=this._persistCanvas,t=e.width,n=e.height;this._persistContext.clearRect(0,0,t,n)}}},{key:"serializeOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(0,f.Z)((0,p.Z)(n.prototype),"serializeOptions",this).call(this,e,t);return e||(i.type="brush"),i}},{key:"serializeOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===e?this._options.paths.map((function(e){return e.serializeOptions(void 0,t)})):(0,f.Z)((0,p.Z)(n.prototype),"serializeOption",this).call(this,e,t)}},{key:"createPath",value:function(e){var t=new wf(this._operation,{brush:e},this._nextCanvas);return t.on("update",this._onPathUpdate),this._options.paths.push(t),this.setDirty(!0),t}},{key:"_onPathUpdate",value:function(){this._operation.setDirty(!0),this.setDirty(!0)}},{key:"_onPathPersist",value:function(e){e.renderToCanvas(this._persistCanvas),this._nextCanvas=e.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(e)}},{key:"_getTexture",value:function(){return this._texture}},{key:"setDirtyForRenderer",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,f.Z)((0,p.Z)(n.prototype),"setDirtyForRenderer",this).call(this,e,t,i),e&&i&&(this._persistedPaths=[],this.clearPersistCanvas(),this._options.paths.forEach(())}},{key:"setDirty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[n],t)}},{key:"render",value:function(e){var t=this,n=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(n)&&(we.ensureCanvasDimensions(this._outputCanvas,e),we.ensureCanvasDimensions(this._persistCanvas,e),this._options.paths.forEach((function(n){n.render(e),n.getClosed()&&-1===t._persistedPaths.indexOf(n)&&t._onPathPersist(n)})),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach((),this.setDirtyForRenderer(!1,n))}},{key:"update",value:function(e,t){t&&(we.ensureCanvasDimensions(this._outputCanvas,t),we.ensureCanvasDimensions(this._persistCanvas,t),this._texture.getBaseTexture().update()),this.render(t);var i=e.getRenderer();i.isOfType("webgl")&&i.updateTexture(this._texture.getBaseTexture()),(0,f.Z)((0,p.Z)(n.prototype),"update",this).call(this,e,t)}},{key:"_reset",value:function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}},{key:"getCanvas",value:function(){return this._outputCanvas}},{key:"_createRadialBrush",value:,{key:"_getTempCanvas",value:function(){return this._nextCanvas}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._texture&&this._texture.getBaseTexture().dispose()}}]),n}(pf),Cf.prototype.availableOptions={id:{type:"string",default:function(){return we.getUUID()}},position:{type:"vector2",default:new Sf(0,0)},scale:{type:"vector2",default:new Sf(1,1)},anchor:{type:"vector2",default:new Sf(0,0)},pivot:{type:"vector2",default:new Sf(0,0)},rotation:{type:"number",default:0},paths:{type:"array",default:[],setter:function(e){var t=this;return e=e.map((function(e){if(e instanceof wf)return e;var n=e.brush,i=e.closed,r=new wf(t._operation,{brush:n,closed:i},t._nextCanvas);return e.controlPoints.forEach((function(e){r.addControlPoint(e)})),r})),this._reset(),e}}},Cf.type="brush",Cf.Brush=mf,Cf.Path=wf,Cf.Brushes={RadialBrush:yf},Tf=Cf})),bm=M((function(){Ns(),Nu(),fm(),_m(),Ef=pa.Vector2,Df=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=(e=t.call.apply(t,[this].concat(r)))._sdk.getRenderer();e._lastBlurRadius=null,e._blurredRenderTexture=new ba.RenderTexture(a,100,100,1),e._maskRenderTexture=new ba.RenderTexture(a,100,100,1),e._brushSprite=new Tf((0,x.Z)(e)),e._brushSpriteContainer=new ba.Container;var s=e._brushSprite.getDisplayObject();if(e._brushSpriteContainer.addChild(s),e._outputSprite=new ba.Sprite,e._outputContainer=new ba.Container,e._outputContainer.addChild(e._outputSprite),e._maskFilter=new hf,a.isOfType("webgl")){e._horizontalFilter=new ll,e._verticalFilter=new ll,e._sprite.setFilters([e._horizontalFilter,e._verticalFilter]),e._horizontalFilter.setDelta(new Ef(1,1)),e._verticalFilter.setDelta(new Ef(-1,1));var l=e._maskRenderTexture.getBaseTexture();l.setGLUnit(e._maskFilter.getMaskImage()),a.updateTexture(l,!1),(l=e._blurredRenderTexture.getBaseTexture()).setGLUnit(e._maskFilter.getFilterImage()),a.updateTexture(l,!1)}else a.isOfType("canvas")&&(e._blurFilter=new ll,e._sprite.setFilters([e._blurFilter]),e._maskFilter.setMaskCanvas(e._maskRenderTexture.getRenderTarget().getCanvas()),e._maskFilter.setFilterCanvas(e._blurredRenderTexture.getRenderTarget().getCanvas()));return e._outputSprite.setFilters([e._maskFilter]),e}return(0,b.Z)(n,[{key:"flip",value:function(e){this._brushSprite.applyFlip(e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"rotate",value:function(e){this._brushSprite.applyRotation(e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"transform",value:function(e,t){this._brushSprite.applyTransform(e,t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"_render",value:function(e){return this._renderBlur(e),this._renderMask(e),this._outputSprite.setTexture(e),this._renderTexture.render(this._outputContainer),Promise.resolve()}},{key:"_renderMask",value:function(e){var t=e.getDimensions();this._maskRenderTexture.getDimensions().equals(t)||this._maskRenderTexture.resizeTo(t),this._brushSprite.update(this._sdk,t),this._maskRenderTexture.clear(ct.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var n=this._sdk.getRenderer();n.isOfType("webgl")&&n.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=this._blurredRenderTexture.getDimensions();n.equals(t)||this._blurredRenderTexture.resizeTo(t);var i=this._options.blurRadius;if(this._lastBlurRadius!==i||!n.equals(t)){var r,o=this._sdk.getRenderer();if(o.isOfType("webgl"))r={blurRadius:i*t.min(),texSize:t},this._horizontalFilter.set(r),this._verticalFilter.set(r);else o.isOfType("canvas")&&(r={blurRadius:i},this._blurFilter.set(r));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=i}var a=this._sdk.getRenderer();a.isOfType("webgl")&&a.updateTexture(this._blurredRenderTexture.getBaseTexture(),!1)}},{key:"getBrush",value:function(){return this._brushSprite}},{key:"createPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new Tf.Brushes.RadialBrush({size:e,hardness:t,color:ct.WHITE}),i=this._brushSprite.createPath(n);return this._options.paths.push(i),this.setDirty(!0),i}},{key:"setDirtyForRenderer",value:function(e,t,i){(0,f.Z)((0,p.Z)(n.prototype),"setDirtyForRenderer",this).call(this,e,t,i),this._brushSprite.setDirtyForRenderer(e,t,i)}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._sdk.getRenderer().isOfType("webgl")?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}},{key:"hasChanges",value:function(){return!0}}]),n}(Ga),Df.identifier="selective-blur",Df.prototype.availableOptions={blurRadius:{type:"number",default:.05},paths:{type:"array",default:[],setter:},Rs.Operations.SelectiveBlurOperation=Df,If=Df})),xm=M((function(){Ns(),Fu(),pm(),Rf=pa.Vector2,Of=pa.ColorMatrix,Ff=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=(e=t.call.apply(t,[this].concat(r)))._options.image,s=a.src||a.filePath||a.toDataUrl&&a.toDataURL();return e._isSVG=s&&(!!s.match(/\w+\.svg(?=\?|$)/i)||s.match(/data:image\/svg/i)),e._isSVG&&(e._canvas=we.createCanvas(),e._context=e._canvas.getContext("2d"),e._options.smoothDownscaling=!1),a&&e._onImageUpdate(),e._tintFilter=new ba.Filters.TintFilter,e._adjustmentsFilter=new Ms,e._lastRenderedDimensions=Rf.NULL,e._lastRenderedInputDimensions=Rf.NULL,e._onOptionsChange=e._onOptionsChange.bind((0,x.Z)(e)),e._options.adjustments.on("update",e._onOptionsChange),e}return(0,b.Z)(n,[{key:"applyScale",value:,{key:"serializeOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(0,f.Z)((0,p.Z)(n.prototype),"serializeOptions",this).call(this,e,t);return e||(i.type="sticker"),i}},{key:"_rendersToRenderTexture",value:function(e){return this._options.smoothDownscaling&&!this._isSVG&&e.getRenderer().isOfType("webgl")||this._hasAdjustments()||"none"!==this._options.tintMode}},{key:"_getTexture",value:function(){return this._inputTexture}},{key:"update",value:function(e,t){var n=this._options,i=n.dimensions,r=n.image;if(i.equals(Rf.NULL)&&i.set(r.width,r.height),this._sprite.setSmoothDownscaling(!this._isSVG&&this.getSmoothDownscaling()),(!this._lastRenderedInputDimensions.equals(t)||!this._lastRenderedDimensions.equals(i)||this._lastRenderedImage!==r)&&this._isSVG&&e.getRenderer().isOfType("webgl")){r.width=Math.round(i.x),r.height=Math.round(i.y);var o=4096,a=r.width/r.height;r.width>o&&(r.width=o,r.height=Math.round(r.width/a)),r.height>o&&(r.height=o,r.width=Math.round(r.height*a)),this._canvas.width=r.width,this._canvas.height=r.height,this._context.clearRect(0,0,r.width,r.height),this._context.drawImage(r,0,0,r.width,r.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(e)&&this._prepareRenderTexture(e);var s=[];if(this._rendersToRenderTexture(e)){if(this._hasAdjustments()){s.push(this._adjustmentsFilter);var l=this._options.adjustments,u=new Of;u.multiply(Of.createBrightnessMatrix(l.getBrightness())),u.multiply(Of.createSaturationMatrix(l.getSaturation())),u.multiply(Of.createContrastMatrix(l.getContrast())),this._adjustmentsFilter.set({colorMatrix:u})}this._options.tintMode&&"none"!==this._options.tintMode&&(s.push(this._tintFilter),this._tintFilter.set({mode:ba.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor}),this._sprite.getTexture()&&this._sprite.getTexture()._baseTexture&&this._sprite.getTexture()._baseTexture.setDirty(!0)),this._renderTextureSprite.setFilters(s)}this._rendersToRenderTexture(e)?this._renderToRenderTexture(e):this._sprite.setTexture(this._inputTexture),this._updateSprite(t),this._applyFlip(),this._lastRenderedDimensions.copy(i),this._lastRenderedInputDimensions.copy(t),this._lastRenderedImage=r}},{key:"_applyFlip",value:function(){var e=this._sprite.getScale(),t=this._options,n=t.flipHorizontally,i=t.flipVertically;(n&&e.x>0||!n&&e.x<0)&&(e.x*=-1),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}},{key:"applyFlip",value:function(e){(0,f.Z)((0,p.Z)(n.prototype),"applyFlip",this).call(this,e);var t={rotation:this._options.rotation},i=-1*(t.rotation/Math.PI*180);switch(t.rotation=i*Math.PI/180,e){case"horizontal":t.flipHorizontally=!this._options.flipHorizontally,this.set(t);break;case"vertical":t.flipVertically=!this._options.flipVertically,this.set(t)}}},{key:"_hasAdjustments",value:function(){var e=this._options.adjustments;return 0!==e.getBrightness()||1!==e.getSaturation()||1!==e.getContrast()}},{key:"_onImageUpdate",value:function(){var e=this._options.image,t=this._operation.getSDK().getRenderer();this._isSVG&&t.isOfType("webgl")&&(e=this._canvas),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._inputTexture=ba.Texture.fromImage(e),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}},{key:"scalesUniformly",value:,{key:"setOption",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,f.Z)((0,p.Z)(n.prototype),"setOption",this).call(this,e,t,i),"image"===e&&this._identitySprite&&this._onImageUpdate()}},{key:"_onOptionsChange",value:function(){var e=this._dirtiness;for(var t in e)e[t]=!0}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._tintFilter.dispose(),this._adjustmentsFilter.dispose(),this._options.adjustments.off("updated",this._onOptionsChange)}}]),n}(pf),Ff.prototype.availableOptions={id:{type:"string",default:function(){return we.getUUID()}},identifier:{type:"string",default:""},image:{type:"image",required:!0},position:{type:"vector2",default:Rf.NULL},dimensions:{type:"vector2",default:Rf.NULL},anchor:{type:"vector2",default:new Rf(0,0)},pivot:{type:"vector2",default:new Rf(.5,.5)},rotation:{type:"number",default:0},flipHorizontally:{type:"boolean",default:!1},flipVertically:{type:"boolean",default:!1},smoothDownscaling:{type:"boolean",default:!1},tintColor:{type:"color",default:ct.WHITE},tintMode:{type:"string",default:"none",available:["none","solid","colorized"]},resizeMode:{type:"string",default:"keepAspect",available:["keepAspect","unrestricted"]},alpha:{type:"number",default:1},adjustments:{type:"configurable",structure:{brightness:{type:"number",default:0},saturation:{type:"number",default:1},contrast:{type:"number",default:1}}}},Ff.type="sticker",Af=Ff})),km=M((function(){Pf=function(){function e(t){(0,_.Z)(this,e),this._seed=void 0===t?Pf.TimeSeed():t}return(0,b.Z)(e,[{key:"seed",value:function(e){this._seed=void 0===e?Pf.TimeSeed():e}},{key:"next",value:function(){var e=0|this._seed,t=e/Pf.SEED_DIVIDER|0,n=e%Pf.SEED_DIVIDER|0;return(e=Pf.SEED_LOW_MULTIPLY*n-Pf.SEED_HIGH_MULTIPLY*t)<=0&&(e+=Pf.MAX),-1===e&&(e=Pf.MAX-1),this._seed=e,e}},{key:"nextInRange",value:function(e,t){return void 0===t&&(t=e,e=0),e+this.next()%(t-e+1)}},{key:"nextBool",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.nextInRange(e+t-1)>=e}},{key:"pickNext",value:function(e){return Array.isArray(e)?e[this.next()%e.length]:null}}],[{key:"TimeSeed",value:function(){return Date.now()}}]),e}(),j(Zf=Pf,"MAX",2147483647),j(Zf,"SEED_DIVIDER",127773),j(Zf,"SEED_LOW_MULTIPLY",16807),j(Zf,"SEED_HIGH_MULTIPLY",2836)})),wm=M((function(){Ns(),Mf=pa.Rectangle,zf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,_.Z)(this,e),this.width=t,this.height=n}return(0,b.Z)(e,[{key:"set",value:,{key:"aspect",value:,{key:"rectangle",value:,{key:"clone",value:function(){return new zf(this.width,this.height)}},{key:"scale",value:,{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this}},{key:"fitInWidthWithOther",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zf;return this.copy(zf.fitTwoInWidth(e,this,t)[0]),this}}],[{key:"fitTwoInWidth",value:function(e,t,n){var i=t.width*n.height+t.height*n.width,r=n.height*e/i,o=t.width*r,a=t.height*r;return[new zf(o,a),new zf(e-o,a)]}}]),e}()})),Sm=M((function(){Ns(),Bf=U(J()),Lf=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"loadImages",value:function(){var e=(0,y.Z)(D().mark((function e(t){var n=this;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Bf.default)(t,function(){var e=(0,y.Z)(D().mark((function e(t){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.addImage(t.path,t.fullPath,t.image));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addImage",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"anonymous",r=this.getImages();return n?(r[e]={fullPath:t,image:n},Promise.resolve({fullPath:t,image:n})):new Promise((function(o,a){(n=new La).onload=function(){r[e]={fullPath:t,image:n},o({fullPath:t,image:n})},n.crossOrigin=we.getCrossOriginValue(i),n.onerror=a,n.src=t}))}},{key:"getImage",value:,{key:"getVariation",value:,{key:"addFont",value:function(e,t){return this.getFonts()[e]=t,t}}]),n}(Ht),Lf.prototype.availableOptions={images:{type:"object",default:{}},fonts:{type:"object",default:{}}},Uf=new Lf})),Cm=M((function(){Ns(),wm(),Sm(),Nf=function(e,t,n,i){var r=n*(4*i)+4*t;return{r:e[r],g:e[r+1],b:e[r+2],a:e[r+3]}},Hf=jf=function(e,t,n){for(var i=!0,r=0;r<n;r++){var o=Nf(e,r,t,n);if(!Hf(o)){i=!1;break}}return i},Wf=function(e,t,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=i+1;a<n;a++)if(jf(e,a,t)){if(r)break}else o=a-i+1;return o},Vf=function(e,t,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=i-1;a>=0;a--)if(jf(e,a,t)){if(r)break}else o=i-a;return o},Gf=qf=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"red";e.save(),e.strokeStyle=r,Gf(e,n,t,i,t),e.restore()},Yf=function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"blue";e.save(),e.strokeStyle=o,e.strokeRect(t,n,i,r),e.restore()},Xf=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i;(0,_.Z)(this,n),i=t.call(this,e);var r=Uf.getVariation(i.getFontIdentifier());return r||Re.warn("TextDesignFont: Unable to find font '".concat(i._fontIdentifier,"'")),i.set({fontVariation:r}),i._metrics=null,i._canvas=we.createCanvas(),i._context=i._canvas.getContext("2d"),i._isDirty=!0,i}return(0,b.Z)(n,[{key:"_onOptionsChange",value:,{key:"setOption",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,f.Z)((0,p.Z)(n.prototype),"setOption",this).call(this,e,t,i,r),"fontIdentifier"!==e||r||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var e=Uf.getVariation(this.getFontIdentifier());return e||Re.warn("TextDesignFont: Unable to find font '".concat(this._fontIdentifier,"'")),this.setFontVariation(e),e}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=(0,C.Z)((0,C.Z)({},this._options),e),this._isDirty=!0}},{key:"_applyTextOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,C.Z)((0,C.Z)({},this._options),t),i=n.fontSize,r=n.fontVariation,o=n.lineHeight,a=n.textColor,s=n.alignment,l=r.serializeOptions(),u=l.fontStyle,c=l.fontWeight,h=l.fontFamily;e.font="".concat(u," ").concat(c," ").concat(i,"px / ").concat(o," ").concat(h),e.fillStyle=a,e.textBaseline="alphabetic",e.textAlign=s||"left"}},{key:"getTextMetrics",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),(0,C.Z)({},this._metrics)}},{key:"getSizeValue",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),new zf(this._metrics.width,this._metrics.height)}},{key:"fitWidth",value:function(e){if(this.getFontVariation()){this._applyTextOptions(this._context,{fontSize:50});var t=e/this._context.measureText(this.getText()).width,n=Math.floor(50*t);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}Re.warn("TextDesignFont#fitText: missing font variation")}},{key:"fitHeight",value:function(e){if(this.getFontVariation()){var t=e/this._calculateTextMetrics({fontSize:50}).height,n=Math.floor(50*t);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}Re.warn("TextDesignFont#fitText: missing font variation")}},{key:"_calculateTextMetrics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._canvas,n=this._context,i=(0,C.Z)((0,C.Z)({},this._options),e),r=this.getText();this._applyTextOptions(n,i);var o=Math.ceil(n.measureText(r).width),a=Math.floor(o+2*i.fontSize),s=Math.floor(3*i.fontSize);t.width=a,t.height=s;var l=Math.floor(i.fontSize),u=Math.floor(.6*s);this._applyTextOptions(n,i),n.fillText(r,l,u);var c=n.getImageData(0,0,t.width,t.height).data,h=Vf(c,a,s,u,this._options.excludeAccents),d=Wf(c,a,s,u,this._options.excludeAccents),f=o,p=h+d;return this._metrics={width:f,height:p,ascender:h,descender:d},this._isDirty=!1,(0,C.Z)({},this._metrics)}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.save(),this._metrics&&!this._isDirty||this._calculateTextMetrics(),this._applyTextOptions(e,i),e.fillText(this.getText(),t,n+this._metrics.ascender),r&&(Yf(e,t,n,this._metrics.width,this._metrics.height),qf(e,n+this._metrics.ascender,t,t+this._metrics.width)),e.restore()}}]),n}(Ht),Xf.prototype.availableOptions={text:{type:"string",default:""},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},fontVariation:{type:"object",default:null},lineHeight:{type:"number",default:1},fontSize:{type:"number",default:22},textColor:{type:"string",default:"black"},strokeStyle:{type:"string",default:"black"},outlineWidth:{type:"number",default:0},textBaseline:{type:"string",default:"alphabetic"},excludeAccents:{type:"boolean",default:!1}}})),Tm=M((function(){Ns(),Kf=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}(Ht),Kf.prototype.availableOptions={text:{type:"string",default:""},frame:{type:"object",default:null},font:{type:"object",default:null}}})),Em=M((function(){Ns(),Jf=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}(Ht),Jf.prototype.availableOptions={tintColor:{type:"color",default:ct.BLACK},textColor:{type:"color",default:ct.BLACK},alignment:{type:"string",default:"left",available:["left","center","right"]},lineSpacing:{type:"number",default:1},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"}}})),Dm=M((function(){Ns(),wm(),Em(),Qf=pa.Rectangle,$f=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i;return(0,_.Z)(this,n),(i=t.call(this,e)).setSize(new zf(i.getWidth(),0)),i.serverImageSmoothingFix=!1,i}return(0,b.Z)(n,[{key:"_getFrame",value:function(){var e=this.getSize();return new Qf(0,0,e.width,e.height)}},{key:"_getTextFrame",value:function(){return this._getFrame()}},{key:"_getTextFrameForElement",value:,{key:"_calculateLayoutElements",value:function(){Re.warn("TextDesignRow is an abstract class.")}},{key:"_getLayoutElements",value:function(){return this._options.elements.length<=0&&this.layout(),this.getElements()}},{key:"_fontSize",value:,{key:"layout",value:,{key:"textFrame",value:,{key:"willRender",value:function(e){}},{key:"didRender",value:,{key:"render",value:function(e){var t=this;e.save(),this._getLayoutElements().forEach((function(n){var i=n.serializeOptions(),r=(i.text,i.frame),o=i.font,a=t.getAttributes();o.draw(e,r.x,r.y,{textColor:a.getTextColor().toRGBA(),alignment:a.getAlignment()})})),e.restore()}}]),n}(Ht),$f.prototype.availableOptions={words:{type:"object",default:null},width:{type:"number",default:100},attributes:{type:"configurable",default:new Jf},shearingAngle:{type:"number",default:0},elements:{type:"array",default:[]},size:{type:"object",default:null}}})),Im=M((function(){Ns(),Cm(),Tm(),Dm(),ep=pa.Rectangle,tp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_calculateLayoutElements",value:function(){if(this.getWords().size()<=0)return[];var e=this.serializeOptions(),t=e.orientation,n=e.width,i=e.size,r=e.relativeRowOffset,o=e.attributes.fontIdentifier,a=this.getWords().joined(3),s=t===tp.Orientations.Left?[a[0],a[1],a[2]]:[a[1],a[2],a[0]],l=we.Array.range(0,2).map((function(e){return new Xf({text:s[e],fontIdentifier:o,fontSize:60})})),u=l.map((function(e){return e.getSizeValue()})),c=u[0].width>u[1].width?0:1,h=(c+1)%2;l[h].fitWidth(u[c].width),u[h]=l[h].getSizeValue();var d=(u[h].height+u[c].height)/(1-r),f=new Xf({text:s[2],fontIdentifier:o});f.fitHeight(d);var p=f.getSizeValue().width,g=u[c].width,m=n/(p+g),y=m*p,v=m*g,_=m*d,b=r*_;i.set(n,_);var x=we.Array.range(0,3).map((function(e){return new Xf({text:s[e],fontIdentifier:o})}));x[0].fitWidth(v),x[1].fitWidth(v),x[2].fitWidth(y);var k=t===tp.Orientations.Left?0:y,w=[k,k,t===tp.Orientations.Left?v:0],S=[0,x[0].getSizeValue().height+b,0],C=x.map((function(e,t){return new ep(w[t],S[t],e.getSizeValue().width,e.getSizeValue().height)}));return x.map((function(e,t){return new Kf({text:s[t],font:x[t],frame:C[t]})}))}}]),n}($f),j(np=tp,"Orientations",{Right:"RIGHT",Left:"LEFT"}),np.prototype.availableOptions=(0,C.Z)((0,C.Z)({},$f.prototype.availableOptions),{},{orientation:{type:"string",default:np.Orientations.Left,available:[np.Orientations.Right,np.Orientations.Left]},relativeRowOffset:{type:"number",default:.05}})})),Rm=M((function(){Ns(),ip=pa.Rectangle,rp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,_.Z)(this,e),this.top=t,this.left=n,this.bottom=i,this.right=r}return(0,b.Z)(e,[{key:"multiply",value:function(e){this.top*=e,this.left*=e,this.bottom*=e,this.right*=e}},{key:"toObject",value:function(){return(0,C.Z)({},this)}},{key:"equals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.abs(e.top-this.top)<=t&&Math.abs(e.left-this.left)<=t&&Math.abs(e.bottom-this.bottom)<=t&&Math.abs(e.right-this.right)<=t}},{key:"scale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return void 0===t&&(t=e),this.top*=t,this.bottom*=t,this.left*=e,this.right*=e,this}},{key:"clone",value:,{key:"applyToRectangle",value:function(e){return new ip(e.x+this.left,e.y+this.top,e.width-this.left-this.right,e.height-this.top-this.bottom)}}],[{key:"ZERO",get:]),e}()})),Om=M((function(){Ns(),Cm(),Rm(),Tm(),Dm(),op=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_calculateLayoutElements",value:function(){var e=this.serializeOptions(),t=e.attributes,n=e.imageInsets,i=e.size,r=(e.width,this.getWords().joined(1)[0]||""),o=t.fontIdentifier,a=new Xf({text:r,fontIdentifier:o});a.fitWidth(this._getTextFrame().width);var s=a.getTextMetrics().height+n.top+n.bottom;i.height=s;var l=this._getTextFrame();return[new Kf({text:r,frame:l,font:a})]}}]),n}($f),op.prototype.availableOptions=(0,C.Z)((0,C.Z)({},$f.prototype.availableOptions),{},{imageInsets:{type:"object",default:new rp}})})),Fm=M((function(){Ns(),ap=pa.Rectangle,sp=pa.Vector2,lp=function(e,t,n,i){e.drawImage(t,n.x,n.y,n.width,n.height,i.x,i.y,i.width,i.height)},up=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.save(),e.fillStyle=n.toRGBA(),e.globalCompositeOperation=i,e.fillRect(t.x,t.y,t.width,t.height),r&&(e.strokeStyle=n.toRGBA(),e.strokeWith=1,e.strokeRect(t.x,t.y,t.width,t.height)),e.restore()},cp=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-over",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e.save(),e.fillStyle=i.toRGBA(),e.globalCompositeOperation=r,n=Math.min(Math.max(n,0),.5*Math.min(t.height,t.width));var a=t.x,s=t.x+t.width,l=t.y,u=t.y+t.height;e.beginPath(),e.moveTo(a+n,l),e.arcTo(s,l,s,u,n),e.arcTo(s,u,a,u,n),e.arcTo(a,u,a,l,n),e.arcTo(a,l,s,l,n),e.closePath(),e.fill(),o&&e.stroke(),e.restore()},hp=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;e.save(),e.strokeStyle=n.toRGBA(),e.lineWidth=i,e.strokeRect(t.x,t.y,t.width,t.height),e.restore()},dp=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over";e.save();var r=t.height/2,o=t.y+r,a=t.x+r,s=t.x+t.width;for(e.fillStyle=n.toRGBA(),e.globalCompositeOperation=i;a<s;)e.beginPath(),e.arc(a,o,r,0,2*Math.PI),e.fill(),a+=4*r;e.restore()},fp=function(e,t){var n=t.applyToRectangle(e),i=e.x,r=e.y,o=e.width,a=e.height;return{corners:[ap.FromDiagonalPoints(new sp(0,0),new sp(n.x,n.y)),ap.FromDiagonalPoints(new sp(0,n.y+n.height),new sp(n.x,a)),ap.FromDiagonalPoints(new sp(n.x+n.width,n.y+n.height),new sp(o,a)),ap.FromDiagonalPoints(new sp(n.x+n.width,0),new sp(o,n.y))].map((function(e){return e.translate(i,r)})),bars:[ap.FromDiagonalPoints(new sp(n.x,0),new sp(n.x+n.width,n.y)),ap.FromDiagonalPoints(new sp(0,n.y),new sp(n.x,n.y+n.height)),ap.FromDiagonalPoints(new sp(n.x,n.y+n.height),new sp(n.x+n.width,a)),ap.FromDiagonalPoints(new sp(n.x+n.width,n.y),new sp(o,n.y+n.height))].map((function(e){return e.translate(i,r)})),center:n}},pp=function(e,t,n,i){var r=t.naturalWidth||t.width,o=t.naturalHeight||t.height,a=fp(new ap(0,0,r,o),i),s=fp(n,i);lp(e,t,a.center,s.center),we.Array.zip(a.corners,s.corners).forEach((function(n){var i=(0,m.Z)(n,2),r=i[0],o=i[1];return lp(e,t,r,o)})),we.Array.zip(a.bars,s.bars).forEach((function(n){var i=(0,m.Z)(n,2),r=i[0],o=i[1];return lp(e,t,r,o)}))},gp=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-atop";if(e.save(),i&&(e.globalAlpha=i.a),e.drawImage(t,n.x,n.y,n.width,n.height),i&&(e.globalAlpha=1),i){var o=i.clone();o.a=1,up(e,n,o,r)}e.restore()}})),Am=M((function(){Ns(),Fm(),Rm(),Om(),mp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_getTextColor",value:function(){return this.getAutoAdjustTextColor()&&!this.getIsMasked()?this.getBackgroundColor().equals(ct.WHITE)?ct.BLACK:ct.WHITE:this.getAttributes().getTextColor().clone()}},{key:"_getTextFrame",value:,{key:"_getTextFrameForElement",value:function(e){var t=(0,f.Z)((0,p.Z)(n.prototype),"_getTextFrameForElement",this).call(this,e),i=this.getImageInsets();return(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&(t.y-=i.top),t}},{key:"willRender",value:function(e){this.getAttributes().setTextColor(this._getTextColor());var t=this.getImage();if(t){var n=this.getCapInsets(),i=this._getFrame();n&&!n.equals(rp.ZERO)?pp(e,t,i,n):e.drawImage(t,i.x,i.y,i.width,i.height),up(e,i,this.getBackgroundColor(),"source-atop",!0)}(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&t&&(e.save(),e.globalCompositeOperation="destination-out")}},{key:"didRender",value:function(e){(0,f.Z)((0,p.Z)(n.prototype),"didRender",this).call(this,e),(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&e.restore()}}]),n}(op),mp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},op.prototype.availableOptions),{},{image:{type:"image",default:null},capInsets:{type:"object",default:new rp},backgroundColor:{type:"color",default:ct.WHITE},autoAdjustTextColor:{type:"boolean",default:!0},isMasked:{type:"boolean",default:!0},isUsedInInvertedLayout:{type:"boolean",default:!1}})})),Pm=M((function(){Ns(),Rm(),yp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"insetsForWidth",value:function(e){return this.getRelativeInsets().clone().scale(e)}}],[{key:"Small",get:function(){return new yp({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new rp(.05,.2,.05,.2)})}},{key:"Rectangle",get:function(){return new yp({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new rp(.05,.05,.05,.05),needsImageSmoothingFix:!0})}},{key:"Celebrate1",get:function(){return new yp({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new rp(.05,.2,.05,.2)})}},{key:"Celebrate2",get:function(){return new yp({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new rp(.05,.2,.05,.2)})}}]),n}(Ht),yp.prototype.availableOptions={image:{type:"image",default:null},imagePath:{type:"string",default:null},relativeInsets:{type:"object",default:new rp},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:"boolean",default:!1}}})),Zm=M((function(){Ns(),Rm(),wm(),vp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"getSize",value:function(){var e=this.getRows(),t=this.getWidth(),n=e.length-1,i=e.reduce((,0);i+=(n+1)*this.getRelativeLineSpacing()*t;var r=this.getRelativeInsets().clone().scale(t);return i+=r.top+r.bottom,new zf(t,i)}}]),n}(Ht),vp.prototype.availableOptions={text:{type:"string",default:""},lines:{type:"array",default:[]},relativeInsets:{type:"object",default:new rp},relativeLineSpacing:{type:"number",default:0},rows:{type:"object",default:[]},background:{type:"object",default:null},width:{type:"number",default:0}}})),Mm=M((function(){Ns(),_p=function(){function e(t){(0,_.Z)(this,e),this.words=[],t&&this.splitIntoWords(t)}return(0,b.Z)(e,[{key:"splitIntoWords",value:function(e){return this.words=e.match(/\S+/g)||[],(0,v.Z)(this.words)}},{key:"get",value:,{key:"getWord",value:,{key:"set",value:function(e){return this.words=(0,v.Z)(e),this}},{key:"slice",value:,{key:"getLowerCase",value:function(){return this.words.map((function(e){return e.toLowerCase()}))}},{key:"getUpperCase",value:function(){return this.words.map((function(e){return e.toUpperCase()}))}},{key:"size",value:function(){return this.words.length}},{key:"countNumberOfCharacters",value:,{key:"joined",value:function(e){var t=this,n=this.size(),i=Math.floor(n/e),r=n%e,o=0,a=0;return we.Array.range(0,e).map((function(e){o=a;var s=i+(e<r?1:0);return a=Math.min(o+s,n),we.Array.range(o,a).reduce((function(e,n){return e+(n===o?"":" ")+t.words[n]}),"")}))}}],[{key:"fromWords",value:function(e){var t=new _p;return t.words=(0,v.Z)(e),t}}]),e}()})),zm=M((function(){Ns(),km(),Rm(),Om(),Em(),Zm(),Mm(),10,4,.4,bp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i;return(0,_.Z)(this,n),(i=t.call(this,e))._relativeInsets=new rp,i._background=null,i._fontRandomizer=new Zf(0),i._lineNumberRandomizer=new Zf(0),i._wordsPerLineRandomizer=new Zf(0),i._seedPool=[i._fontRandomizer,i._lineNumberRandomizer,i._wordsPerLineRandomizer],i}return(0,b.Z)(n,[{key:"seed",value:,{key:"getImagePaths",value:,{key:"onImagesLoaded",value:function(){}},{key:"getMaximumNumberOfTries",value:function(){return 10}},{key:"getMinLineCountOfRandom",value:function(){return 4}},{key:"getRandomAdditionalLinePercentage",value:function(){return.4}},{key:"_fontForRow",value:function(e,t){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}},{key:"_modifiedText",value:,{key:"_minimumNumberOfLines",value:,{key:"_maximumNumberOfLines",value:function(e){return e.size()}},{key:"_calculatedNumberOfLines",value:function(e){var t=this._minimumNumberOfLines(e);if(e.size()>=this.getMinLineCountOfRandom()){var n=Math.floor(Math.max(1,t*this.getRandomAdditionalLinePercentage()));t+=this._lineNumberRandomizer.nextInRange(0,n)}return Math.min(t,this._maximumNumberOfLines(e))}},{key:"_randomizedNumberOfWordsPerLine",value:function(e,t){var n=this;if(e>t)return Re.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines"),t;var i=we.Array.repeat(1,e);return we.Array.range(e,t).forEach((function(t){var r=n._wordsPerLineRandomizer.nextInRange(0,e-1);i[r]+=1})),i}},{key:"_textLines",value:function(e){var t=new _p(e),n=this._calculatedNumberOfLines(t);return this._randomizedNumberOfWordsPerLine(n,t.size()).reduce((function(e,n){return{index:e.index+n,lines:[].concat((0,v.Z)(e.lines),[t.slice(e.index,Math.min(e.index+n,t.size()))])}}),{index:0,lines:[]}).lines}},{key:"_validTextLines",value:function(e){var t=this._textLines(e),n=0;do{if(n=we.Array.findIndex(t,(),n>=0){var i=t[n-1],r=t[n+1];(i?i.countNumberOfCharacters():Number.MAX_SAFE_INTEGER)<(r?r.countNumberOfCharacters():Number.MAX_SAFE_INTEGER)&&i?(i.words=[].concat((0,v.Z)(i.words),(0,v.Z)(t[n].words)),t=[].concat((0,v.Z)(t.slice(0,n)),(0,v.Z)(t.slice(n+1)))):r&&(r.words=[].concat((0,v.Z)(t[n].words),(0,v.Z)(r.words)),t=[].concat((0,v.Z)(t.slice(0,n)),(0,v.Z)(t.slice(n+1))))}}while(n>-1&&t.length>1);return t}},{key:"_modifiedLines",value:,{key:"_getBackground",value:function(){return this._background}},{key:"generateLayoutData",value:function(e,t){var n=this._modifiedText(e),i=this._modifiedLines(this._validTextLines(n)),r=t*(1-this._relativeInsets.left-this._relativeInsets.right),o=this._layoutRows(i,r);return new vp({text:n,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:i,rows:o,width:t})}},{key:"_layoutRows",value:function(e,t){var n=this;return e.map((function(e,i){return n._randomLayoutRow(e,i,t,new Jf({fontIdentifier:n._fontForRow(i,e)})).layout()}))}},{key:"_randomLayoutRow",value:function(e,t,n,i){return new op({words:e,width:n,attributes:i})}}]),n}(Ht),j(bp,"defaultFontIdentifiers",[]),j(bp,"identifier","textdesign"),bp.prototype.availableOptions={fontIdentifiers:{type:"array",default:[]},relativeLineSpacing:{type:"number",default:0}}})),Bm=M((function(){Ns(),km(),Im(),Om(),Am(),Em(),Pm(),Sm(),zm(),xp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),j((0,x.Z)(e),"getImagePaths",(function(){var t=e.getBanderoles();return t&&t.map((function(e){return e.getImagePath()}))||[]})),j((0,x.Z)(e),"onImagesLoaded",(function(){var t=e.getBanderoles();t&&t.forEach((function(e){var t=Uf.getImage(e.getImagePath());t?e.setImage(t):Re.warn("TextDesignBlocks#onImagesLoaded: Image not found '".concat(e.getImagePath(),"'"))}))})),e._rowTypeLessThan3WordsRandomizer=new Zf(0),e._rowTypeMoreThan3WordsRandomizer=new Zf(0),e._banderolesRandomizer=new Zf(0),e._seedPool=[].concat((0,v.Z)(e._seedPool),[e._rowTypeLessThan3WordsRandomizer,e._rowTypeMoreThan3WordsRandomizer,e._banderolesRandomizer]),e}return(0,b.Z)(n,[{key:"_modifiedText",value:function(e){return(0,f.Z)((0,p.Z)(n.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"generateLayoutData",value:function(e,t){return this._options.hasMaskedText=!1,(0,f.Z)((0,p.Z)(n.prototype),"generateLayoutData",this).call(this,e,t)}},{key:"_randomLayoutRow",value:function(e,t,n,i){if(e.size()<3){var r=0===this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2);return this._layoutRow(e,n,i,r)}var o=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(o){case 0:return new np({words:e,width:n,attributes:i,orientation:np.Orientations.Left});case 1:return new np({words:e,width:n,attributes:i,orientation:np.Orientations.Right});case 2:return this._layoutRow(e,n,i,!0);case 3:return new op({words:e,width:n,attributes:i});default:throw new Error("TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: ".concat(o,"."))}}},{key:"_layoutRow",value:function(e,t,n,i){if(this.getHasMaskedText()&&(i=!1),i){this.setHasMaskedText(!0);var r=this._banderolesRandomizer.pickNext(this.getBanderoles()),o=new mp({words:e,width:t,attributes:new Jf({alignment:"left",fontIdentifier:r.getFontIdentifier()}),image:r.getImage(),imageInsets:r.insetsForWidth(t),capInsets:null,backgroundColor:ct.WHITE});return r.getNeedsImageSmoothingFix()&&(o.serverImageSmoothingFix=!0),o}return new op({words:e,width:t,attributes:n})}}]),n}(bp),j(xp,"defaultFontIdentifiers",["imgly_font_campton_bold"]),j(xp,"identifier","imgly_text_design_blocks"),j(xp,"defaultBanderoles",[yp.Rectangle,yp.Small]),xp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},bp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:xp.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3},hasMaskedText:{type:"boolean",default:!1},banderoles:{type:"array",default:xp.defaultBanderoles}})})),Lm=M((function(){Ns(),Om(),Bm(),kp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);eturn(0,b.Z)(n,[{key:"generateLayoutData",value:function(e,t){return this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers()),(0,f.Z)((0,p.Z)(n.prototype),"generateLayoutData",this).call(this,e,t)}},{key:"_fontForRow",value:function(e,t){return this._exclusiveFont||(0,f.Z)((0,p.Z)(n.prototype),"_fontForRow",this).call(this,e,t)}},{key:"_layoutRow",value:function(e,t,n,i){return new op({words:e,width:t,attributes:n})}}]),n}(xp),j(kp,"defaultFontIdentifiers",["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"]),j(kp,"identifier","imgly_text_design_blocks_condensed"),kp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},xp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:kp.defaultFontIdentifiers}})})),Um=M((function(){Ns(),Fm(),wm(),Tm(),Dm(),wp=pa.Rectangle,Sp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).setSize(new zf(e.getWidth(),e.getHeight())),e}return(0,b.Z)(n,[{key:"_calculateLayoutElements",value:function(){return[new Kf({frame:this._getTextFrame()})]}},{key:"render",value:function(e){var t=this._getFrame(),n=this.getType(),i=this.getAttributes().getTextColor(),r=t.height/3,o=new wp(t.x,t.y,t.width,r),a=new wp(t.x,t.y+2*r,t.width,r);switch(n){case Sp.FormType.Rect:up(e,t,i);break;case Sp.FormType.DoubleRect:up(e,o,i),up(e,a,i);break;case Sp.FormType.DoubleRectFirstPunctuated:dp(e,o,i),up(e,a,i);break;case Sp.FormType.DoubleRectSecondPunctuated:up(e,o,i),dp(e,a,i);break;case Sp.FormType.LongLine:var s=t.height/2,l=new wp(t.x,t.y,t.width,s);cp(e,l,.5*l.height,i);break;case Sp.FormType.LongAndShortLine:var u=.2*t.height,c=.75*u;o=new wp(t.x,t.y+u,t.width,u);var h=t.x+.25*t.width,d=t.y+t.height-c;a=new wp(h,d,.5*t.width,c),cp(e,o,.5*o.height,i),cp(e,a,.5*a.height,i)}}}]),n}($f),j(Cp=Sp,"FormType",{Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED",LongLine:"LONG_LINE",LongAndShortLine:"LONG_AND_SHORT_LINE"}),Cp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},$f.prototype.availableOptions),{},{height:{type:"number",default:100},type:{type:"string",default:Cp.FormType.Rect,available:we.values(Cp.FormType)}})})),Nm=M((function(){Ns(),Om(),Um(),Bm(),Tp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_layoutRow",value:function(e,t,n,i){return new op({words:e,width:t,attributes:n})}},{key:"_layoutRows",value:function(e,t){var i=(0,f.Z)((0,p.Z)(n.prototype),"_layoutRows",this).call(this,e,t),r=.08*t,o=new Cp({width:t,height:.032*t,type:Cp.FormType.LongLine,shearingAngle:0}).layout(),a=new Cp({width:t,height:r,type:Cp.FormType.LongAndShortLine,shearingAngle:0}).layout();return[o].concat((0,v.Z)(i),[a])}}]),n}(xp),j(Tp,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),j(Tp,"identifier","imgly_text_design_blocks_light"),Tp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},xp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:Tp.defaultFontIdentifiers}})})),Hm=M((function(){Ns(),Om(),Em(),Nm(),Ep=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_layoutRows",value:function(e,t){var n=this;return e.map((function(e,i){return n._randomLayoutRow(e,i,t,new Jf({fontIdentifier:n._fontForRow(i,e)})).layout()}))}},{key:"_layoutRow",value:function(e,t,n,i){return new op({words:e,width:t,attributes:n})}}]),n}(Tp),j(Ep,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),j(Ep,"identifier","imgly_text_design_blocks_light-v3_1_0"),Ep.prototype.availableOptions=(0,C.Z)((0,C.Z)({},Tp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:Ep.defaultFontIdentifiers}})})),jm=M((function(){Ns(),Cm(),Fm(),wm(),Tm(),Om(),Dp=pa.Rectangle,Ip=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"getImageSize",value:function(){var e=this.getLeftImage(),t=this.getRightImage(),n=this.getWords(),i=this.getAttributes().getFontIdentifier(),r=e?new zf(e.width,e.height):new zf,o=n.joined(1)[0];if(!o)return r;var a=new Xf({text:o,fontIdentifier:i,fontSize:50}).getSizeValue(),s=t?2:1;r.scale(s,1);var l=r.clone().fitInWidthWithOther(this._getFrame().width,a);return l.scale(1/s,1),l}},{key:"_getTextFrame",value:function(){var e=(0,f.Z)((0,p.Z)(n.prototype),"_getTextFrame",this).call(this).clone(),t=this.getImageSize(),i=this.getRightImage(),r=this.getImagePosition();return i?(e.x+=t.width,e.width-=2*t.width):r===Ip.ImagePosition.Left&&(e.x+=t.width),e}},{key:"_calculateLayoutElements",value:function(){var e=(0,f.Z)((0,p.Z)(n.prototype),"_calculateLayoutElements",this).call(this),t=this._getFrame(),i=this.getRightImage(),r=this.getImageSize(),o=this.getImagePosition(),a=this._getTextFrame(),s=this.getAttributes().getFontIdentifier(),l=new Xf({text:"stickerClock",fontIdentifier:s});l.fitWidth(this._getTextFrame().width);var u=(new Dp).set(t.x,t.y,r.width,r.height);if(i||o!==Ip.ImagePosition.Right||(u.x+=a.width),e.push(new Kf({text:"stickerClock",frame:u,font:l})),i){var c=e[0];if(c){var h=u.clone();h.translate(c.getFrame().width+h.width,0),e.push(new Kf({text:"stickerClock",frame:h,font:l}))}}return e}},{key:"render",value:function(e){var t=this._getLayoutElements(),n=this.getAttributes(),i=n.getTextColor(),r=this.getLeftImage(),o=this.getRightImage(),a=t[0],s=t[1],l=a.serializeOptions().font,u=this._getTextFrameForElement(a);if(l.draw(e,u.x,u.y,{textColor:n.getTextColor().toRGBA(),alignment:n.getAlignment()}),r){var c=s.getFrame();e.drawImage(r,c.x,c.y,c.width,c.height),up(e,c,i,"source-atop")}if(t.length>2){var h=t[2].getFrame().clone();e.drawImage(o,h.x,h.y,h.width,h.height),up(e,h,i,"source-atop")}}}]),n}(op),j(Rp=Ip,"ImagePosition",{Left:"LEFT",right:"RIGHT"}),Rp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},op.prototype.availableOptions),{},{leftImage:{type:"image",default:null},rightImage:{type:"image",default:null},imagePosition:{type:"string",default:Rp.ImagePosition.Left,available:[Rp.ImagePosition.Left,Rp.ImagePosition.Right]}})})),Wm=M((function(){Ns(),Om(),jm(),Pm(),Mm(),Bm(),Op=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_fontForRow",value:function(e,t){var n=this.getFontIdentifiers();return n[e%n.length]}},{key:"_minimumNumberOfLines",value:function(e){return Math.max(Math.floor(.7*(0,f.Z)((0,p.Z)(n.prototype),"_minimumNumberOfLines",this).call(this,e)),1)}},{key:"_maximumNumberOfLines",value:,{key:"_randomLayoutRow",value:function(e,t,n,i){return this._createSingleRow(Op.RowType.Single,e,n,i)}},{key:"_createSingleRow",value:function(e,t,n,i){var r=i.getFontIdentifier(),o="imgly_font_amberlight"===r||"imgly_font_handycheera_regular"===r?(new _p).set(t.getLowerCase()):t;switch(e){case Op.RowType.Single:return new op({words:o,width:n,attributes:i});case Op.RowType.SingleImage:return new Rp({words:o,width:n,attributes:i});default:return Re.warn("TextDesignCelebrate#_createSingleRow: Invalid row type '".concat(e,"'")),null}}}]),n}(xp),j(Fp=Op,"defaultFontIdentifiers",["imgly_font_handycheera_regular","imgly_font_rasa_regular"]),j(Fp,"defaultBanderoles",[yp.Celebrate1,yp.Celebrate2]),j(Fp,"identifier","imgly_text_design_celebrate"),j(Fp,"RowType",{Single:"SINGLE",SingleImage:"SINGLE_IMAGE"}),Fp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},xp.prototype.availableOptions),{},{relativeLineSpacing:{type:"number",default:.01875},fontIdentifiers:{type:"array",default:Fp.defaultFontIdentifiers},banderoles:{type:"array",default:Fp.defaultBanderoles}})})),Vm=M((function(){Ns(),Cm(),Mm(),Fm(),wm(),Em(),Tm(),Dm(),Ap=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).setSize(new zf(e.getWidth(),e.getHeight())),e}return(0,b.Z)(n,[{key:"_getImageFrame",value:function(){var e=this._getTextFrame().clone(),t=this.getImage();if(this.getDrawingModeAspectFit()&&t){var n=Math.min(e.width/t.width,e.height/t.height),i=t.width*n,r=t.height*n;e.x+=(e.width-i)/2,e.y+=(e.height-r)/2,e.width=i,e.height=r}return e}},{key:"_calculateLayoutElements",value:function(){return[new Kf({text:"",frame:this._getImageFrame(),font:new Xf})]}},{key:"render",value:function(e){var t=this.getImage(),n=this._getImageFrame(),i=this.getAttributes().getTextColor();gp(e,t,n,i)}}]),n}($f),j(Ap,"RowImages",{decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"}),Ap.prototype.availableOptions=(0,C.Z)((0,C.Z)({},$f.prototype.availableOptions),{},{words:{type:"object",default:new _p},height:{type:"number",default:0},image:{type:"image",default:null},imagePath:{type:"string",default:Ap.RowImages.decorative1},drawingModeAspectFit:{type:"boolean",default:!1},attributes:{type:"configurable",default:new Jf}})})),Gm=M((function(){Ns(),km(),Om(),jm(),Vm(),Pm(),Sm(),Mm(),Bm(),Wm(),Pp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),j((0,x.Z)(e),"getImagePaths",(function(){var t=e.getBanderoles();return[].concat((0,v.Z)(t&&t.map((function(e){return e.getImagePath()}))||[]),(0,v.Z)(e._celebrateTypes))})),j((0,x.Z)(e),"onImagesLoaded",(function(){var t=e.getBanderoles();t&&t.forEach((function(e){var t=Uf.getImage(e.getImagePath());t?e.setImage(t):Re.warn("TextDesignBlocks#onImagesLoaded: Image not found '".concat(e.getImagePath(),"'"))}))})),e._celebrateTypes=[Ap.RowImages.celebrate1,Ap.RowImages.celebrate2,Ap.RowImages.celebrate3],e._exclusiveFont=null,e._typeRandomizer=new Zf(0),e._useMaskedRandomizer=new Zf(0),e._seedPool.push(e._typeRandomizer),e._seedPool.push(e._useMaskedRandomizer),e}return(0,b.Z)(n,[{key:"_fontForRow",value:function(e,t){var n=this.getFontIdentifiers();return n[e%(n.length-1)]}},{key:"_layoutRows",value:function(e,t){var i=this._typeRandomizer.pickNext(this._celebrateTypes),r=Uf.getImage(i);r||Re.warn("TextDesignCelebrateSimple#_layoutRows: Image not fount '".concat(i,"'"));var o=new Ap({width:t,height:.5*t,drawingModeAspectFit:!0,image:r}).layout(),a=(0,f.Z)((0,p.Z)(n.prototype),"_layoutRows",this).call(this,e,t);return[o].concat((0,v.Z)(a))}},{key:"_randomLayoutRow",value:function(e,t,i,r){var o=e.countNumberOfCharacters();o<4&&r.setFontIdentifier("imgly_font_rasa_regular");var a=this._useMaskedRandomizer.nextBool(2,1);return o<13&&a&&!this.getHasMaskedText()?this._layoutRow(e,i,r,!0):(0,f.Z)((0,p.Z)(n.prototype),"_randomLayoutRow",this).call(this,e,t,i,r)}}]),n}(Fp),j(Pp,"identifier","imgly_text_design_celebrate_simple"),j(Pp,"defaultFontIdentifiers",["imgly_font_amberlight","imgly_font_rasa_regular","imgly_font_rasa_500"]),Pp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},Fp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:Pp.defaultFontIdentifiers}})})),qm=M((function(){Ns(),Zp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"render",value:]),n}(Ht),Zp.prototype.availableOptions={}})),Ym=M((function(){Ns(),Sm(),Fm(),qm(),Mp=pa.Rectangle,zp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"getImagePaths",value:function(){var e=this._options;return[e.topImagePath,e.bottomImagePath,e.leftImagePath,e.rightImagePath].filter(()}},{key:"render",value:function(e,t,n,i,r){var o=n.clone().scale(t.width),a=t.rectangle(0,0),s=Uf.getImage(this.getTopImagePath()),l=Uf.getImage(this.getLeftImagePath()),u=Uf.getImage(this.getRightImagePath()),c=Uf.getImage(this.getBottomImagePath());if(s){var h=s.width/s.height,d=o.top*this.getTopImageFillRate(),f=d*h,p=a.width/2,g=new Mp(p-f/2,0,f,d);gp(e,s,g,i)}if(c){var m=c.width/c.height,y=o.bottom*this.getBottomImageFillRate(),v=y*m,_=a.width/2,b=new Mp(_-v/2,a.height-y,v,y);gp(e,c,b,i)}if(l){var x=l.width/l.height,k=o.left*this.getLeftImageFillRate(),w=k/x,S=a.height/2,C=new Mp(0,S-w/2,k,w);gp(e,l,C,i)}if(u){var T=u.width/u.height,E=o.right*this.getRightImageFillRate(),D=E/T,I=a.height/2-D/2,R=new Mp(a.width-E,I,E,D);gp(e,u,R,i)}}}]),n}(Zp),zp.prototype.availableOptions={topImagePath:{type:"string",default:""},leftImagePath:{type:"string",default:""},bottomImagePath:{type:"string",default:""},rightImagePath:{type:"string",default:""},topImageFillRate:{type:"number",default:1},leftImageFillRate:{type:"number",default:1},bottomImageFillRate:{type:"number",default:1},rightImageFillRate:{type:"number",default:1}},zp.Backgrounds=[new zp({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new zp({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new zp({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new zp({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})]})),Xm=M((function(){Ns(),Ym(),km(),Rm(),Om(),Mm(),zm(),Bp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._relativeInsets=new rp(.1,.1,.1,.1),e._alreadyContainsARowWithScriptFont=!1,e._backgroundsRandomizer=new Zf(0),e._seedPool.push(e._backgroundsRandomizer),e}return(0,b.Z)(n,[{key:"getImagePaths",value:function(){return we.Array.flatten(zp.Backgrounds.map((function(e){return e.getImagePaths()})))}},{key:"_getBackground",value:function(){return this._backgroundsRandomizer.pickNext(zp.Backgrounds)}},{key:"generateLayoutData",value:function(e,t){return this._alreadyContainsARowWithScriptFont=!1,this._background=this._getBackground(),(0,f.Z)((0,p.Z)(n.prototype),"generateLayoutData",this).call(this,e,t)}},{key:"_modifiedText",value:function(e){return(0,f.Z)((0,p.Z)(n.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_fontForRow",value:function(e,t){var i=(0,f.Z)((0,p.Z)(n.prototype),"_fontForRow",this).call(this,e,t);return"imgly_font_petit_formal_script"===i&&(this._alreadyContainsARowWithScriptFont&&(i="imgly_font_bungee_inline"),this._alreadyContainsARowWithScriptFont=!0),i}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r="imgly_font_petit_formal_script"===i.getFontIdentifier();return new op({words:r?(new _p).set(e.getLowerCase()):e,width:n,attributes:i})}}]),n}(bp),j(Bp,"identifier","imgly_text_design_equal_width"),j(Bp,"defaultFontIdentifiers",["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"]),Bp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},bp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:Bp.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025}})})),Km=M((function(){Ns(),Rm(),Xm(),Lp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);eturn(0,b.Z)(n,[{key:"_getBackground",value:function(){return null}}]),n}(Bp),j(Lp,"defaultFontIdentifiers",["imgly_font_ultra"]),j(Lp,"identifier","imgly_text_design_equal_width_fat"),Lp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},Bp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:Lp.defaultFontIdentifiers}})})),Jm=M((function(){Ns(),Rm(),Up=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"insetsForWidth",value:]),n}(Ht),Up.prototype.availableOptions={imagePath:{type:"string",default:""},minimumHeightRatio:{type:"number",default:0},sizeToFitContent:{type:"boolean",default:!0},capInsets:{type:"object",default:new rp},relativeInsets:{type:"object",default:new rp}},Up.Box=new Up({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new rp(.1,.1,.1,.1)}),Up.Badge1=new Up({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new rp(.3,.18,.2,.18)}),Up.Badge2=new Up({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new rp(.3,.18,.2,.18)}),Up.Badge3=new Up({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new rp(.3,.18,.2,.18)}),Up.Badge4=new Up({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new rp(.3,.18,.2,.18)}),Up.SpeechBubble1=new Up({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new rp(.04,.07,.12,.07),capInsets:new rp(57,171,123,51)}),Up.SpeechBubble2=new Up({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new rp(.04,.07,.12,.07),capInsets:new rp(6,105,87,15)}),Up.SpeechBubble3=new Up({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new rp(.165664675,.2,.165664675,.2),minimumHeightRatio:.7}),Up.SpeechBubble4=new Up({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new rp(.124800224,.2,.291200523,.2),minimumHeightRatio:.7}),Up.SpeechBubble5=new Up({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new rp(.114892823,.27,.15984926,.27)}),Up.Watercolor1=new Up({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new rp(.2,.25,.2,.25)}),Up.Watercolor2=new Up({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new rp(.08,.25,.3,.25)}),Up.Watercolor3=new Up({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new rp(.1,.2,.15,.2)})})),Qm=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.arabic=void 0;var t="[".concat("\u0620-\u064a\u066e-\u066f\u0671-\u06d5\u06ee-\u06ef\u06fa-\u06ff").concat("\u0750-\u077f","]"),n="".concat(t).concat("[\u064b-\u065f\u0670]","*");e.arabic=n})),$m=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bengali=void 0;var t="[\\u{0980}-\\u{09FF}]",n="".concat(t,"(").concat("\\u{09CD}").concat(t,"|").concat("[\\u{0980}-\\u{0983}\\u{09BC}-\\u{09D7}\\u{09E2}\\u{09E3}\\u{09FE}]",")*");e.bengali=n})),ey=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.devanagari=void 0;var t="[\\u{0900}-\\u{097F}]",n="".concat(t,"(").concat("\\u{094D}").concat(t,"|").concat("[\\u{0900}-\\u{0903}\\u{093A}-\\u{0957}\\u{0962}\\u{0963}]",")*");e.devanagari=n})),ty=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.gujarati=void 0;var t="[\\u{0A80}-\\u{0AFF}]",n="".concat(t,"(").concat("\\u{0ACD}").concat(t,"|").concat("[\\u{0A81}-\\u{0A83}\\u{0ABC}\\u{0ABE}-\\u{0ACD}\\u{0AE2}\\u{0AE3}\\u{0AFA}-\\u{0AFF}]",")*");e.gujarati=n})),ny=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hebrew=void 0;var t="".concat("[\u05d0-\u05ea]").concat("[\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7]","*");e.hebrew=t})),iy=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.japaneseKana=void 0;var t="((".concat("[\\u{30A0}-\\u{30FF}]","|").concat("[\\u{3041}-\\u{3096}\\u{309D}-\\u{309F}]",")").concat("[\\u{3099}-\\u{309A}]","?|").concat("[\\u{309B}-\\u{309C}]",")");e.japaneseKana=t})),ry=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.kannada=void 0;var t="[\\u{0C80}-\\u{0CFF}]",n="".concat(t,"(").concat("\\u{0CCD}").concat(t,"|").concat("[\\u{0C81}-\\u{0C83}\\u{0CBC}\\u{0CBE}-\\u{0CCD}\\u{0CD5}\\u{0CD6}\\u{0CE2}\\u{0CE3}]",")*");e.kannada=n})),oy=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.khmer=void 0;var t="[\\u{1780}-\\u{17FF}]",n="".concat(t,"(").concat("\\u{17D2}").concat(t,"|").concat("[\\u{17B6}-\\u{17D1}\\u{17D3}\\u{17DD}]",")*");e.khmer=n})),ay=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.lao=void 0;var t="".concat("[\\u{0E80}-\\u{0EFF}]").concat("[\\u{0EB1}\\u{0EB4}-\\u{0EBC}\\u{0EC8}-\\u{0ECD}]","*");e.lao=t})),sy=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.malayalam=void 0;var t="[\\u{0D00}-\\u{0D7F}]",n="".concat(t,"(").concat("\\u{0D4D}").concat(t,"|").concat("[\\u{0D00}-\\u{0D03}\\u{0D3B}\\u{0D3C}\\u{0D3E}-\\u{0D4D}\\u{0D57}\\u{0D62}-\\u{0D63}]",")*");e.malayalam=n})),ly=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.myanmar=void 0;var t="[\\u{1000}-\\u{109F}]",n="[".concat(["\\u{102B}-\\u{1038}","\\u{103A}-\\u{103E}","\\u{1056}-\\u{1059}","\\u{105E}-\\u{1060}","\\u{1062}-\\u{1064}","\\u{1067}-\\u{106D}","\\u{1071}-\\u{1074}","\\u{1082}-\\u{108D}","\\u{108F}","\\u{109A}-\\u{109D}"].join(""),"]"),i="".concat(t,"(").concat("\\u{1039}").concat(t,"|").concat(n,")*");e.myanmar=i})),uy=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.tamil=void 0;var t="".concat("[\\u{0B80}-\\u{0BFF}]").concat("[\\u{0B82}-\\u{0B83}\\u{0BBE}-\\u{0BD7}\\u{0962}\\u{0963}]","*");e.tamil=t})),cy=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.telugu=void 0;var t="[\\u{0C00}-\\u{0C7F}]",n="".concat(t,"(").concat("\\u{0C4D}").concat(t,"|").concat("[\\u{0C00}-\\u{0C04}\\u{0C3E}-\\u{0C56}\\u{0C62}\\u{0C63}]",")*");e.telugu=n})),hy=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.thai=void 0;var t="".concat("[\\u0E00-\\u0E7F]").concat("[\\u0E31\\u0E33-\\u0E3A\\u0E47-\\u0E4E]","*");e.thai=t})),dy=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.tibetan=void 0;var t="".concat("[\\u{0F00}-\\u{0FFF}]").concat("[\\0F18\\0F19\\0F35\\0F37\\0F39\\0F3E\\0F3F\\u{0F71}-\\u{0F87}\\u{0F8D}-\\u{0FBC}\\u{0FC6}]","*");e.tibetan=t})),fy=z((function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.emojiVariation=e.keyCap=e.countryFlag=void 0;e.countryFlag="[\\u{1F1E6}-\\u{1F1FF}]{2}";e.keyCap="[0-9#\\*][\\u{FE0F}]?\\u{20E3}";var t="(".concat(["[\\u{2600}-\\u{26FF}]","[\\u{2700}-\\u{27BF}]","[\\u{1F300}-\\u{1F5FF}]","[\\u{1F600}-\\u{1F64F}]","[\\u{1F680}-\\u{1F6FF}]","[\\u{1F700}-\\u{1F77F}]","[\\u{1F900}-\\u{1F9FF}]"].join("|"),")"),n="".concat(t,"(").concat("\\u{200D}").concat(t,"|").concat("[\\u{1F3FB}-\\u{1F3FF}]","|").concat("[\\u{FE0E}\\u{FE0F}]",")*");e.emojiVariation=n})),py=z((function(e,t){var n=Qm(),i=$m(),r=ey(),o=ty(),a=ny(),s=iy(),l=ry(),u=oy(),c=ay(),h=sy(),d=ly(),f=uy(),p=cy(),g=hy(),m=dy(),y=fy(),v=[y.countryFlag,y.keyCap,y.emojiVariation,n.arabic,i.bengali,r.devanagari,o.gujarati,a.hebrew,s.japaneseKana,l.kannada,u.khmer,c.lao,h.malayalam,d.myanmar,f.tamil,p.telugu,g.thai,m.tibetan,"."],_=new RegExp("(".concat(v.join("|"),")"),"gu");t.exports={splitGraphemes:})),gy=M((function(){Np=U(py()),Hp=function(){eturn(0,b.Z)(e,[{key:"getLines",value:function(){for(var e=this,t=[],n=[],i=this._lines.length,r=0;r<i;r++){for(var o=this._lines[r],a=this._buildWords(o),s=a.length,l=0;l<s;l++){var u=a[l],c=n.concat(u).join("").replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){n.length>0&&(t.push(n.join("")),n=[u]);var h=u.replace(/\s+$/i,"");if(this._getWidth(h)>this._maxWidth){var d=this._splitWord(u);t=t.concat(d.lines),d.rest&&(n=[d.rest])}}else n.push(u)}t.push(n.join("")),n=[]}return t.map(()}},{key:"_trimLine",value:function(e,t){return e}},{key:"_buildWords",value:function(e){for(var t=[],n="",i=e.length,r=0;r<i;r++){var o=e[r];n+=o," "!==o&&"-"!==o&&r!==i-1||(t.push(n),n="")}return t}},{key:"_splitWord",value:function(e){for(var t={lines:[],rest:null},n=(0,Np.splitGraphemes)(e),i=n.length,r=[],o=0;o<i;o++){var a=n[o];this._getWidth(r.concat(a).join(""))>this._maxWidth?(r.length>0&&t.lines.push(r.join("")),r=[a]):r.push(a),o===i-1&&r.length>0&&(t.rest=r.join(""))}return t}},{key:"_fontStyleChanged",value:function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)}},{key:"_getWidth",value:,{key:"setText",value:,{key:"setMaxWidth",value:]),e}(),jp=Hp})),my=M((function(){Ns(),gy(),Wp=pa.Vector2,Vp=function(){function e(t,n){(0,_.Z)(this,e),this._text=t,this._operation=n,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}return(0,b.Z)(e,[{key:"_createCanvas",value:function(){this._canvas=we.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new jp(this._context),this._finalCanvas=we.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}},{key:"_createTexture",value:,{key:"_applyTextOptions",value:function(e,t){t.font="".concat(this._text.getFontStyle()," ").concat(this._text.getFontWeight()," ").concat(e.fontSize,'px "').concat(this._text.getFontFamily(),'"'),this._text.getTextMetrics()?t.textBaseline="alphabetic":t.textBaseline="top",t.textAlign=this._text.getAlignment(),t.fillStyle=this._text.getColor().toRGBA(),t.strokeStyle=this._text.getOutlineColor().toRGBA();var n=this._text.getOutlineWidth();n>0&&(t.lineWidth=n)}},{key:"_buildOutputLines",value:function(e){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines().map(()}},{key:"_renderTextLine",value:function(e,t,n){var i=this._text.getAlignment(),r=new Wp(0,t);switch(i){case"left":r.x=n;break;case"center":r.x=this._canvas.width/2;break;case"right":r.x=this._canvas.width-n}this._context.save(),this._context.translate(r.x,r.y),this._context.fillText(e,0,0),this._context.restore(),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(e,r.x,r.y))}},{key:"update",value:function(e,t){var n=this.calculateFontStyles(e,t);if(n){var i=this._calculateText(e,n,t),r=i.dimensions,o=i.lines;this._renderText(e,r,o,n,t),this._updateFinalTexture()}}},{key:"_updateFinalTexture",value:function(){var e=this._canvas,t=e.width,n=e.height,i=this.rotation,r=Math.cos(i),o=Math.sin(i),a=new Wp(Math.abs(t*r)+Math.abs(n*o),Math.abs(t*o)+Math.abs(n*r));this._finalCanvas.width=a.x,this._finalCanvas.height=a.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(i),this._finalContext.drawImage(this._canvas,-t/2,-n/2),this._finalContext.restore()}},{key:"_renderText",value:function(e,t,n,i,r){this._canvas.width=t.x,this._canvas.height=t.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*r.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,t.x,t.y),this._applyTextOptions(i,this._context);for(var o=this._padding(r),a=this._text.getTextMetrics(),s=this._text.getFontSize()*r.y,l=1/a.unitsPerEm*s,u=a.ascender*l,c=0;c<n.length;c++){var h=n[c];this._renderTextLine(h,i.topPadding+i.lineHeight*c+o+u,o)}}},{key:"calculateFontStyles",value:function(e,t){var n=this._text.getFontFamily(),i=this._text.getFontSize()*t.y,r=this._text.getAbsoluteTextHeight(t),o=r*this._text.getLineHeight(),a={fontFamily:n,fontSize:i,lineHeight:o,topPadding:r*(this._text.getLineHeight()-1)/2};return this._textOptions.fontFamily===n&&this._textOptions.fontSize===i&&this._textOptions.lineHeight===o||(this._textOptions=a),a}},{key:"_calculateText",value:function(e,t,n){var i=this._text.getMaxWidth()*n.x;this._applyTextOptions(t,this._context);var r=new Wp,o=this._text.getText().split("\n");"undefined"!==typeof i&&(r.x=i,o=this._buildOutputLines(i));for(var a=0;a<o.length;a++){var s=o[a];r.x=Math.max(r.x,this._context.measureText(s).width)}var l=t.lineHeight;r.y=o.length*l;var u=this._padding(n);return r.y+=2*u,r.x+=2*u,{dimensions:r,lines:o}}},{key:"_padding",value:function(e){return.2*this._text.getAbsoluteTextHeight(e)}},{key:"getTexture",value:function(){return this._texture}},{key:"getFinalTexture",value:function(){return this._finalTexture}},{key:"getDimensions",value:function(e,t){var n=this.calculateFontStyles(e,t);return this._calculateText(e,n,t).dimensions}},{key:"dispose",value:function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture&&(this._texture.dispose(),this._texture=null),this._finalTexture&&(this._finalTexture.dispose(),this._finalTexture=null)}}]),e}(),Gp=Vp})),yy=M((function(){Ns(),gy(),wm(),Sm(),qp=pa.Vector2,Yp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i;return(0,_.Z)(this,n),(i=t.call(this,e))._textOptions={},i._createCanvas(),i}return(0,b.Z)(n,[{key:"_createCanvas",value:function(){this._canvas=we.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new jp(this._context),this._finalCanvas=we.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d"),this.updateFontVariation()}},{key:"setOption",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,f.Z)((0,p.Z)(n.prototype),"setOption",this).call(this,e,t,i,r),"fontIdentifier"!==e||r||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var e=Uf.getVariation(this.getFontIdentifier());return e||Re.warn("TextDesignFont: Unable to find font '".concat(this._fontIdentifier,"'")),this.setFontVariation(e),e}},{key:"_applyTextOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._context,n=(0,C.Z)((0,C.Z)({},this._options),e),i=n.fontSize,r=n.fontVariation,o=(n.lineHeight,n.textColor),a=n.alignment,s=r.serializeOptions(),l=s.fontStyle,u=s.fontWeight,c=s.fontFamily;t.font="".concat(l," ").concat(u," ").concat(i,'px "').concat(c,'"'),t.fillStyle=o,t.textBaseline="top",t.textAlign=a||"left"}},{key:"_buildOutputLines",value:function(e){return this._textSplitter.setText(this.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines()}},{key:"_renderTextLine",value:function(e,t){var n=this.getAlignment(),i=new qp(0,t);switch(n){case"center":i.x=this._canvas.width/2;break;case"right":i.x=this._canvas.width}this._context.fillText(e,i.x,i.y)}},{key:"update",value:function(){var e=this.calculateFontStyles();if(e){var t=this._calculateText(e),n=t.dimensions,i=t.lines;this._dimensions=n,this._renderText(n,i,e)}}},{key:"draw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.update(),e.drawImage(this._canvas,t,n,this._dimensions.x,this._dimensions.y)}},{key:"_renderText",value:function(e,t,n){this._canvas.width=e.x,this._canvas.height=e.y,this._context=this._canvas.getContext("2d"),this._applyTextOptions(n,this._context);for(var i=0;i<t.length;i++){var r=t[i];this._renderTextLine(r,n.topPadding+n.lineHeight*i)}}},{key:"getFontFamily",value:function(){return this.getFontVariation().getFontFamily()}},{key:"calculateFontStyles",value:function(){var e=this.getFontFamily(),t=this.getFontSize(),n=this.getAbsoluteTextHeight(),i={fontFamily:e,fontSize:t,textHeight:n,lineHeight:n*this.getLineHeight(),topPadding:n*(this.getLineHeight()-1)/2};return this._textOptions=(0,C.Z)({},i),i}},{key:"getTextMetrics",value:,{key:"getAbsoluteTextHeight",value:function(){var e=this.getFontSize(),t=this.getTextMetrics();if(t){var n=1/t.unitsPerEm*e,i=t.ascender*n,r=t.descender*n;return i+Math.abs(r)}return e*this.getLineHeight()*1.1}},{key:"_calculateText",value:function(e){this._applyTextOptions(e,this._context);for(var t=new qp,n=this.getText().split("\n"),i=0;i<n.length;i++){var r=n[i];t.x=Math.max(t.x,this._context.measureText(r).width)}var o=e.lineHeight;return t.y=n.length*o,{dimensions:t,lines:n}}},{key:"getDimensions",value:function(){var e=this.calculateFontStyles();return this._calculateText(e).dimensions}},{key:"fitMaxHeight",value:function(){this.update();var e=this.getDimensions();this.getText().split("\n"),this.getMaxHeight(),e.y}},{key:"fitMaxWidth",value:function(){var e=this.getDimensions().x,t=this.getMaxWidth()/e;this.setFontSize(this.getFontSize()*t),this._textOptions.fontSize=this.getFontSize()}},{key:"fitInFrame",value:function(e){this.setMaxWidth(e.width),this.setMaxHeight(e.height),this.fitMaxWidth(),this.fitMaxHeight()}},{key:"getSize",value:function(){var e=this.getDimensions();return new zf(e.x,e.y)}}]),n}(Ht),Yp.prototype.availableOptions={text:{type:"string",default:""},fontIdentifier:{type:"string",default:"imgly_font_open_sans_bold"},fontVariation:{type:"object",default:null},lineHeight:{type:"number",default:1},fontSize:{type:"number",default:22},textColor:{type:"string",default:"black"},strokeStyle:{type:"string",default:"black"},outlineWidth:{type:"number",default:0},textBaseline:{type:"string",default:"alphabetic"},excludeAccents:{type:"boolean",default:!0},maxWidth:{type:"number",default:100},maxHeight:{type:"number",default:0},alignment:{type:"string",default:"left",available:["left","center","right"]}}})),vy=M((function(){Ns(),my(),Cm(),yy(),Tm(),Am(),Xp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_calculateLayoutElements",value:function(){var e=this.getWords(),t=this._getTextFrame(),n=this.getAttributes().getFontIdentifier(),i=this.getImageInsets(),r=new Xf({text:e.getWord(0),fontIdentifier:n});r.fitWidth(t.width);var o=new Kf({text:e.getWord(0),frame:t,font:r});o.setFrame(this._getTextFrameForElement(o));var a=this.getSize();return(this.getSizeToFitContent()||a.height<=1)&&(a.height=i.top+o.getFrame().height+i.bottom),a.height=Math.max(a.height,this.getMinimumHeight()),[o]}},{key:"_getTextFrameForElement",value:function(e){var t=this.getWords().getWord(0),n=this.getAttributes(),i=n.getFontIdentifier(),r=this.getImageInsets(),o=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor()),a=new Yp({text:t,fontIdentifier:i,alignment:n.getAlignment(),lineHeight:1});a.fitInFrame(o);var s=a.getSize();o.height=s.height;var l=s.height*this.getRowScaleFactor();this.getSizeToFitContent()&&(l+=r.top+r.bottom);var u=this._getFrame(),c=n.getAlignment();if(this.getCenteredVertically())o.y=u.height/2-l/2+r.top;else switch(c){case"left":o.y=u.height-l-r.bottom;break;case"center":o.y=u.height/2-l/2+l*this.getCenterOffset(),o.x=(u.width-o.width)/2;break;case"right":o.x=u.width-o.width-r.right}return o}},{key:"render",value:function(e){var t=this;e.save(),this._getLayoutElements().forEach((function(n){var i=n.serializeOptions(),r=i.text,o=i.frame,a=t.getAttributes(),s=a.getFontIdentifier(),l=new Yp({text:r,fontIdentifier:s,alignment:a.getAlignment(),lineHeight:1,textColor:a.getTextColor().toRGBA()});o=t._getTextFrameForElement(n),l.fitInFrame(o),l.draw(e,o.x,o.y)})),e.restore()}}]),n}(mp),Xp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},mp.prototype.availableOptions),{},{centerOffset:{type:"number",default:0},sizeToFitContent:{type:"boolean",default:!1},textScaleFactor:{type:"number",default:.95},rowScaleFactor:{type:"number",default:1},minimumHeight:{type:"number",default:0},centeredVertically:{type:"boolean",default:!1}})})),_y=M((function(){Ns(),Jm(),km(),vy(),Sm(),Mm(),zm(),Kp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._rowType=Up.Box,e._alignmentRandomizer=new Zf(0),e._isMaskedRandomizer=new Zf(0),e._seedPool.push(e._alignmentRandomizer),e._seedPool.push(e._isMaskedRandomizer),e}return(0,b.Z)(n,[{key:"getImagePaths",value:,{key:"_modifiedText",value:function(e){return(0,f.Z)((0,p.Z)(n.prototype),"_modifiedText",this).call(this,e).toLowerCase()}},{key:"_modifiedLines",value:function(e){var t=new _p;return t.set([e.reduce((function(e,t){return"".concat(e).concat(""===e?"":"\n").concat(t.joined(1)[0])}),"")]),[t]}},{key:"_layoutRows",value:function(e,t){var i=(0,f.Z)((0,p.Z)(n.prototype),"_layoutRows",this).call(this,e,t),r=i[0];if(r&&this.getSquareLayout()){var o=r.getSize();o.height=o.width}return i}},{key:"getAlignment",value:function(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||Kp.ValidAlignments)}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r=this.getAlignment(),o=this._rowType,a=Uf.getImage(o.getImagePath());i.setAlignment(r);var s=new Xp({words:e,width:n,attributes:i,image:a,imageInsets:o.insetsForWidth(n),capInsets:o.getCapInsets(),backgroundColor:ct.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});this._rowType===Up.Box&&(s.serverImageSmoothingFix=!0);var l=s.getSize();return this.getSquareLayout()?l.height=l.width:l.height=Math.max(l.height,l.width*o.getMinimumHeightRatio()),s}}]),n}(bp),j(Jp=Kp,"defaultFontIdentifiers",["imgly_font_galano_grotesque_bold"]),j(Jp,"Alignment",{Left:"left",Center:"center",Right:"right"}),j(Jp,"ValidAlignments",[Kp.Alignment.Left,Kp.Alignment.Center,Kp.Alignment.Right]),j(Jp,"identifier","imgly_text_design_masked"),Jp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},bp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:Jp.defaultFontIdentifiers},squareLayout:{type:"boolean",default:!0}})})),by=M((function(){Ns(),Jm(),km(),_y(),Qp=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._possibleRowTypes=[Up.Badge1,Up.Badge2,Up.Badge3,Up.Badge4],e._rowTypesRandomizer=new Zf(0),e._isMaskedRandomizer=new Zf(0),e._seedPool.push(e._rowTypesRandomizer),e._seedPool.push(e._isMaskedRandomizer),e}return(0,b.Z)(n,[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map((function(e){return e.getImagePath()}))}},{key:"_randomLayoutRow",value:function(e,t,i,r){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes),r.setLineSpacing(.9);var o=(0,f.Z)((0,p.Z)(n.prototype),"_randomLayoutRow",this).call(this,e,t,i,r);return o.set({textScaleFactor:.9}),o}}]),n}(Jp),j(Qp,"defaultFontIdentifiers",["imgly_font_campton_bold"]),j(Qp,"identifier","imgly_text_design_masked_badge"),j(Qp,"ValidAlignments",[Jp.Alignment.Center]),Qp.prototype.availableOptions=(0,C.Z)((0,C.Z)({},Jp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:Qp.defaultFontIdentifiers}})})),xy=M((function(){Ns(),Jm(),km(),_y(),$p=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._possibleRowTypes=[Up.SpeechBubble1,Up.SpeechBubble3],e._rowTypesRandomizer=new Zf(0),e._isMaskedRandomizer=new Zf(0),e._seedPool.push(e._rowTypesRandomizer),e._seedPool.push(e._isMaskedRandomizer),e}return(0,b.Z)(n,[{key:"getImagePaths",value:,{key:"_rowTypes",value:,{key:"_randomLayoutRow",value:function(e,t,i,r){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(e)),r.setLineSpacing(.9);var o=(0,f.Z)((0,p.Z)(n.prototype),"_randomLayoutRow",this).call(this,e,t,i,r);return o.set({textScaleFactor:1,minimumHeight:i*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:!0}),o}}]),n}(Jp),j($p,"defaultFontIdentifiers",["imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_roboto_black","imgly_font_roboto_light"]),j($p,"identifier","imgly_text_design_masked_speech_bubble"),$p.prototype.availableOptions=(0,C.Z)((0,C.Z)({},Jp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:$p.defaultFontIdentifiers},squareLayout:{type:"boolean",default:!1},alignment:{type:"string",default:"left",available:Jp.ValidAlignments}})})),ky=M((function(){Ns(),Jm(),_y(),xy(),eg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._possibleRowTypes=[Up.SpeechBubble2,Up.SpeechBubble4,Up.SpeechBubble2,Up.SpeechBubble4,Up.SpeechBubble5],e._possibleRowTypesForMin15=e._possibleRowTypes.slice(0,2),e._possibleRowTypesForMax14=e._possibleRowTypes.slice(2),e}return(0,b.Z)(n,[{key:"_rowTypes",value:function(e){return e.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}}]),n}($p),j(eg,"defaultFontIdentifiers",["imgly_font_permanent_marker"]),j(eg,"identifier","imgly_text_design_masked_speech_bubble_comic"),eg.prototype.availableOptions=(0,C.Z)((0,C.Z)({},$p.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:eg.defaultFontIdentifiers}})})),wy=M((function(){Ns(),vy(),_y(),tg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_modifiedText",value:function(e){return(0,f.Z)((0,p.Z)(n.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r=this._alignmentRandomizer.pickNext(Jp.ValidAlignments);return i.setAlignment(r),new Xp({words:e,width:n,attributes:i,image:null,backgroundColor:ct.WHITE,centerOffset:0,sizeToFitContent:!0,isMasked:!1,autoAdjustTextColor:!1})}}]),n}(Jp),j(tg,"defaultFontIdentifiers",["imgly_font_abril_fatface_regular"]),j(tg,"identifier","imgly_text_design_multiline"),tg.prototype.availableOptions=(0,C.Z)((0,C.Z)({},Jp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:tg.defaultFontIdentifiers}})})),Sy=M((function(){Ns(),ng=pa.Rectangle,ig=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"getContentFrame",value:function(){var e=this.getFrame().clone(),t=.1*e.width;return e.insetBy(t,t)}},{key:"intersects",value:]),n}(Ht),ig.prototype.availableOptions={frame:{type:"object",default:new ng}}})),Cy=M((function(){Ns(),Sm(),Fm(),qm(),Sy(),rg=pa.Rectangle,og=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._MAX_TRIES=1e3,e._PRECISION=1e3,e}return(0,b.Z)(n,[{key:"render",value:function(e,t,n,i,r){var o=this._options,a=o.imagePaths,s=o.relativeParticleSize;if(!(a.length<=0)){var l=t.width/t.height,u=new rg(Math.round(n.left*this._PRECISION),Math.round(n.top*this._PRECISION*l),this._PRECISION,this._PRECISION);u.width-=u.x+Math.round(n.right*this._PRECISION),u.height-=u.y+Math.round(n.bottom*this._PRECISION*l);for(var c=[],h=0,d=0;h<this.getParticleCount()&&d<this._MAX_TRIES;){var f=s/2,p=Math.round(f*this._PRECISION),g=Math.round(f*this._PRECISION*l),m=Math.floor(this._PRECISION)-p,y=Math.floor(this._PRECISION)-g,v=r.nextInRange(p,m),_=r.nextInRange(g,y),b=new rg(v-p,_-g,2*p,2*g);b.intersects(u)||this.hasCollision(c,b)||(c.push(new ig({frame:b})),h+=1),d+=1}for(var x=0;x<c.length;x++){var k=c[x],w=r.pickNext(a),S=Uf.getImage(w),C=r.nextInRange(140,230)/255,T=t.width/this._PRECISION,E=t.height/this._PRECISION,D=k.getContentFrame();D.x*=T,D.y*=E,D.width*=T,D.height*=E;var I=i.clone();I.a=C,gp(e,S,D,I,"source-atop")}}}},{key:"hasCollision",value:function(e,t){for(var n=0;n<e.length;n++)if(t.intersects(e[n].getFrame()))return!0;return!1}}]),n}(Zp),og.prototype.availableOptions=(0,C.Z)((0,C.Z)({},Zp.prototype.availableOptions),{},{particleCount:{type:"number",default:50},relativeParticleSize:{type:"number",default:.08},imagePaths:{type:"array",default:[]}})})),Ty=M((function(){Ns(),Cy(),ag=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}(og),j(ag,"Images",["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"]),ag.prototype.availableOptions=(0,C.Z)((0,C.Z)({},og.prototype.availableOptions),{},{imagePaths:{type:"array",default:(0,v.Z)(ag.Images)},relativeParticleSize:{type:"number",default:.12}})})),Ey=M((function(){Ns(),Cy(),sg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}(og),j(sg,"Images",["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"]),sg.prototype.availableOptions=(0,C.Z)((0,C.Z)({},og.prototype.availableOptions),{},{imagePaths:{type:"array",default:(0,v.Z)(sg.Images)},relativeParticleSize:{type:"number",default:.12}})})),Dy=M((function(){Ns(),Cy(),lg=og),j(lg,"Images",["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"]),lg.prototype.availableOptions=(0,C.Z)((0,C.Z)({},og.prototype.availableOptions),{},{imagePaths:{type:"array",default:(0,v.Z)(lg.Images)}})})),Iy=M((function(){Ns(),km(),Rm(),Om(),jm(),Vm(),Sm(),Mm(),zm(),ug=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._relativeInsets=new rp(0,0,0,0),e._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"],e._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_wolesbro"],e._lineCount=0,e._decorativeRowCreated=!1,e._useImageRowRandomizer=new Zf(0),e._rowTypeRandomizer=new Zf(0),e._lineDecorativeTypeRandomizer=new Zf(0),e._seedPool.push(e._useImageRowRandomizer),e._seedPool.push(e._rowTypeRandomizer),e._seedPool.push(e._lineDecorativeTypeRandomizer),e}return(0,b.Z)(n,[{key:"getImagePaths",value:function(){return[].concat((0,v.Z)(ug.DecoratorImages),(0,v.Z)(ug.RowImages))}},{key:"_fontForRow",value:function(e,t){var n=this,i=t.countNumberOfCharacters(),r=this.getFontIdentifiers();return i<4?r=r.filter((function(e){return n._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(e)<0})):i<5&&(r=r.filter(()),r[e%r.length]}},{key:"_modifiedText",value:function(e){return(0,f.Z)((0,p.Z)(n.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_modifiedLines",value:,{key:"generateLayoutData",value:function(e,t){return this._decorativeRowCreated=!1,(0,f.Z)((0,p.Z)(n.prototype),"generateLayoutData",this).call(this,e,t)}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r=e;switch(i.getFontIdentifier()){case"imgly_font_wolesbro":r=(new _p).set(e.getLowerCase());break;case"imgly_font_permanent_marker":r=(new _p).set(e.getUpperCase())}var o=this.getDecorativeRowsInTheMiddleOnly()&&(0===t||t===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||o)return new op({words:r,width:n,attributes:i});this._decorativeRowCreated=!0;var a=this._randomDecoratorImages(),s=(0,m.Z)(a,2),l=s[0],u=s[1];return new Rp({words:e,width:n,attributes:i,leftImage:l,rightImage:u})}},{key:"_layoutRows",value:function(e,t){var i=(0,f.Z)((0,p.Z)(n.prototype),"_layoutRows",this).call(this,e,t);if(!this.getDecorationsVisible())return i;var r=.0625*t,o=new Ap({width:t,height:r,image:Uf.getImage(this._rowTypeRandomizer.pickNext(ug.RowImages))}).layout(),a=new Ap({width:t,height:r,image:Uf.getImage(this._rowTypeRandomizer.pickNext(ug.RowImages))}).layout();return[o].concat((0,v.Z)(i),[a])}},{key:"_randomDecoratorImages",value:function(){return this._lineDecorativeTypeRandomizer.nextInRange(0,1)?ug.DecoratorImages.slice(0,2).map((function(e){return Uf.getImage(e)})):ug.DecoratorImages.slice(2).map((function(e){return Uf.getImage(e)}))}}]),n}(bp),j(cg=ug,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),j(cg,"identifier","imgly_text_design_sunshine"),j(cg,"RowImages",[Ap.RowImages.decorative1,Ap.RowImages.decorative2,Ap.RowImages.decorative3,Ap.RowImages.decorative4]),j(cg,"DecoratorImages",["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"]),cg.prototype.availableOptions=(0,C.Z)((0,C.Z)({},bp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:cg.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3*4},decorationsVisible:{type:"boolean",default:!0},decorativeRowsInTheMiddleOnly:{type:"boolean",default:!1}})})),Ry=M((function(){Ns(),Ty(),Ey(),Dy(),km(),Rm(),Sm(),Iy(),hg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._relativeInsets=new rp(.3,.3,.3,.3),e._backgroundRandomizer=new Zf(0),e._decoTypeRandomizer=new Zf(0),e._seedPool.push(e._backgroundRandomizer),e._seedPool.push(e._decoTypeRandomizer),e}return(0,b.Z)(n,[{key:"getImagePaths",value:function(){return[].concat((0,v.Z)(cg.RowImages),(0,v.Z)(we.Array.flatten(hg.Backgrounds.map((function(e){return e.getImagePaths()})))),(0,v.Z)(hg.DecoratorImages))}},{key:"_getBackground",value:,{key:"_randomDecoratorImages",value:function(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return hg.DecoratorImages.slice(0,2).map((function(e){return Uf.getImage(e)}));case 1:case 2:return hg.DecoratorImages.slice(2).map((function(e){return Uf.getImage(e)}));default:return Re.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range."),hg.DecoratorImages.slice(2).map((function(e){return Uf.getImage(e)}))}}}]),n}(cg),j(dg=hg,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),j(dg,"identifier","imgly_text_design_particles"),j(dg,"Backgrounds",[new ag,new sg,new lg]),j(dg,"DecoratorImages",["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"]),dg.prototype.availableOptions=(0,C.Z)((0,C.Z)({},cg.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:dg.defaultFontIdentifiers},decorationsVisible:{type:"boolean",default:!1},decorativeRowsInTheMiddleOnly:{type:"boolean",default:!0}})})),Oy=M((function(){Ns(),km(),Rm(),Um(),zm(),fg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._relativeInsets=new rp(.1,0,0,0),e._rowTypeRandomizer=new Zf(0),e._seedPool.push(e._rowTypeRandomizer),e}return(0,b.Z)(n,[{key:"_modifiedText",value:function(e){return(0,f.Z)((0,p.Z)(n.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_randomLayoutRow",value:function(e,t,i,r){var o=(0,f.Z)((0,p.Z)(n.prototype),"_randomLayoutRow",this).call(this,e,t,i,r);return o.setShearingAngle(this.getShearingAngle()),o}},{key:"_layoutRows",value:function(e,t){var i=(0,f.Z)((0,p.Z)(n.prototype),"_layoutRows",this).call(this,e,t),r=we.values(Cp.FormType),o=new Cp({width:t,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout(),a=new Cp({width:t,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout();return[o].concat((0,v.Z)(i),[a])}}]),n}(bp),j(fg,"defaultFontIdentifiers",["imgly_font_campton_bold"]),j(fg,"identifier","imgly_text_design_rotated"),fg.prototype.availableOptions=(0,C.Z)((0,C.Z)({},bp.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:fg.defaultFontIdentifiers},relativeLineSpacing:{type:"number",default:.025/3},shearingAngle:{type:"number",default:-.1}})})),Fy=M((function(){Rm(),Vm(),Sm(),Iy(),pg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._relativeInsets=new rp(0,.3,0,.3),e}return(0,b.Z)(n,[{key:"_layoutRows",value:function(e,t){var i=(0,f.Z)((0,p.Z)(n.prototype),"_layoutRows",this).call(this,e,t);if(!this.getDecorationsVisible())return i;var r=new Ap({width:t,height:25,image:Uf.getImage(this._rowTypeRandomizer.pickNext(cg.RowImages))}).layout(),o=new Ap({width:t,height:25,image:Uf.getImage(this._rowTypeRandomizer.pickNext(cg.RowImages))}).layout();return[r].concat((0,v.Z)(i),[o])}}]),n}(cg),j(pg,"identifier","imgly_text_design_sunshine-v3_1_0")})),Ay=M((function(){Ns(),Jm(),_y(),xy(),gg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._possibleRowTypes=[Up.Watercolor1,Up.Watercolor2,Up.Watercolor3],e}return(0,b.Z)(n)}($p),j(gg,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro"]),j(gg,"identifier","imgly_text_design_watercolor"),gg.prototype.availableOptions=(0,C.Z)((0,C.Z)({},$p.prototype.availableOptions),{},{fontIdentifiers:{type:"array",default:gg.defaultFontIdentifiers},alignment:{type:"string",default:Jp.Alignment.Center,available:Jp.ValidAlignments}})})),Py=M((function(){Ns(),km(),Am(),vy(),wm(),Fm(),mg=pa.Rectangle,yg=1e3,vg=function(){function e(){(0,_.Z)(this,e),this._layoutData=null,this._layout=null,this._text="",this._seed=0,this._debugMode=!1,this.randomizer=new Zf}return(0,b.Z)(e,[{key:"createLayout",value:function(e,t,n){this._layout=e,this._text=t,this._seed=n,e.seed(n),this._layoutData=e.generateLayoutData(t,yg)}},{key:"calculateAspect",value:function(){return this._layoutData?this._layoutData.getSize().aspect():(Re.warn("TextDesignRenderer#calculateAspect: No layout data"),1)}},{key:"draw",value:function(e,t,n,i){var r=this,o=this._layoutData;if(this._layoutData){var a=new zf(yg,yg/t.aspect()),s=t.width/yg,l=o.getRelativeInsets().clone().scale(a.width),u=o.getRelativeLineSpacing()*a.width,c=l.top;e.save(),this.randomizer.seed(this._seed);var h=o.getBackground();h&&h.render(e,t,o.getRelativeInsets(),i?ct.WHITE:n,this.randomizer),e.scale(s,s),o.getRows().forEach((function(t){e.save();var o=t.getAttributes();if(e.transform(1,t.getShearingAngle(),0,1,l.left,c),o.setTextColor(i?ct.WHITE:n.clone()),o.setTintColor(i?ct.WHITE:n.clone()),(t instanceof mp||t instanceof Xp)&&(t.setBackgroundColor(i?ct.WHITE:n.clone()),t.setIsUsedInInvertedLayout(i)),r._debugMode&&(t._debugMode=!0),t.willRender(e),t.render(e),t.didRender(e),r._debugMode){var a=t._getFrame(),s=t._getTextFrame();hp(e,a,ct.GREEN),hp(e,s,ct.BLUE),t._getLayoutElements().forEach((function(n){var i=n.getFrame(),r=t._getTextFrameForElement(n);hp(e,i,new ct(1,1,0)),hp(e,r,new ct(0,1,1))}))}c+=t.getSize().height+u,e.restore()})),this._debugMode&&hp(e,new mg(0,0,a.width,a.height),ct.RED),e.restore()}}}]),e}()})),Zy=M((function(){Ns(),pm(),Bm(),Lm(),Nm(),Hm(),Wm(),Gm(),Xm(),Km(),_y(),by(),xy(),ky(),wy(),Ry(),Oy(),Iy(),Fy(),Ay(),km(),wm(),Sm(),Py(),_g=pa.Vector2,bg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i){var r;return(0,_.Z)(this,n),(r=t.call(this,e,i))._isDisposed=!1,r._renderer=new vg,r._canvas=we.createCanvas(),r._context=r._canvas.getContext("2d"),r._texture=ba.Texture.fromCanvas(r._canvas),r._sprite.setTexture(r._texture),r._aspect=1,r._isLayoutDirty=!0,r.getSeed()<0&&r.setSeed(Zf.TimeSeed()),r}return(0,b.Z)(n,[{key:"seed",value:function(e){this.setSeed(e||Zf.TimeSeed()),this._isLayoutDirty=!0}},{key:"_updateLayout",value:function(){var e=this.getLayout();return e?(this._renderer.createLayout(e,this.getText(),this.getSeed()),this._aspect=this._renderer.calculateAspect(),this._isLayoutDirty=!1,!0):null}},{key:"applyTransform",value:function(e){(0,f.Z)((0,p.Z)(n.prototype),"applyTransform",this).call(this,e);var t={};this._options.dimensions&&(t.width=e.applyToRelativeSize(this.getWidth())),this.set(t,!1)}},{key:"applyFlip",value:function(e){(0,f.Z)((0,p.Z)(n.prototype),"applyFlip",this).call(this,e);var t=this._options.rotation;switch(e){case"horizontal":t+=2*(Math.PI-t),this.setRotation(t);break;case"vertical":t+=2*(Math.PI/2-t),this.setRotation(t)}}},{key:"update",value:function(e,t){var i=this._isLayoutDirty;if(!(this._isDisposed||i&&!this._updateLayout())){var r=this.getWidth()*t.min()/e.getTextureScale(),o=r/this._aspect,a=new _g(r,o),s=new _g(Math.round(2*r),Math.round(2*o)).clamp(new _g(1,1),new _g(1/0,1/0)),l=e.getRenderer(),u=l.getMaxDimensions()||1/0;s.x>u&&(s.x=u,s.y=Math.round(s.x/this._aspect)),s.y>u&&(s.y=u,s.x=Math.round(s.y*this._aspect));var c=we.ensureCanvasDimensions(this._canvas,s);(i||c)&&(this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._renderer.draw(this._context,new zf(s.x,s.y),this.getColor(),this.getInverted()),this.setDimensions(a),this._texture.getBaseTexture().update(),l.isOfType("webgl")&&l.updateTexture(this._texture.getBaseTexture())),(0,f.Z)((0,p.Z)(n.prototype),"update",this).call(this,e,t),this._applyFlip()}}},{key:"_applyFlip",value:function(){var e=this._sprite.getScale(),t=this._options,n=t.flipHorizontally,i=t.flipVertically;(n&&e.x>0||!n&&e.x<0)&&(e.x*=-1),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}},{key:"_optionEquals",value:function(e,t){if("layout"===e){var i=this._options.layout;return!(!i&&t||!t&&i)&&(!(!t.constructor||!i.constructor)&&i.constructor.identifier===t.constructor.identifier)}return(0,f.Z)((0,p.Z)(n.prototype),"_optionEquals",this).call(this,e,t)}},{key:"serializeOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&this.getPadding()<0){var i=e.indexOf("padding");i>-1&&e.splice(i,1)}var r=(0,f.Z)((0,p.Z)(n.prototype),"serializeOptions",this).call(this,e,t);return e||(r.type="textdesign"),r}},{key:"_getTexture",value:function(){return this._texture}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!0}},{key:"canAdjustPadding",value:function(){return!0}},{key:"dispose",value:]),n}(pf),bg.Layouts={TextDesignBlocks:xp,TextDesignBlocksCondensed:kp,TextDesignBlocksLight:Tp,TextDesignCelebrate:Fp,TextDesignCelebrateSimple:Pp,TextDesignEqualWidth:Bp,TextDesignEqualWidthFat:Lp,TextDesignMasked:Jp,TextDesignMaskedBadge:Qp,TextDesignMaskedSpeechBubble:$p,TextDesignMaskedSpeechBubbleComic:eg,TextDesignMultiline:tg,TextDesignWatercolor:gg,TextDesignSunshine:cg,TextDesignParticles:dg,TextDesignRotated:fg},bg.LegacyLayouts={TextDesignBlocksLightV310:Ep,TextDesignSunshineV310:pg},bg.AssetManager=Uf,bg.prototype.availableOptions={id:{type:"string",default:function(){return we.getUUID()}},position:{type:"vector2",default:new _g(.5,.5)},dimensions:{type:"vector2",default:_g.NULL},anchor:{type:"vector2",default:new _g(0,0)},pivot:{type:"vector2",default:new _g(.5,.5)},rotation:{type:"number",default:0},flipHorizontally:{type:"boolean",default:!1},flipVertically:{type:"boolean",default:!1},layout:{type:"object",default:null,setter:function(e){return this._isLayoutDirty=!0,e}},text:{type:"string",default:"",setter:function(e){return this._isLayoutDirty=!0,e}},color:{type:"color",default:ct.BLACK,setter:function(e){return this._isLayoutDirty=!0,e}},padding:{type:"number",default:.01,minValue:.01},width:{type:"number",default:.8},inverted:{type:"boolean",default:!1,setter:,seed:{type:"number",default:-1}},xg=bg})),My=M((function(){Ns(),pm(),my(),kg=pa.Vector2,wg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._textRenderer=new Gp((0,x.Z)(e),e._operation),e._textRenderer.rotation=e.getRotation(),e._sprite.setTexture(e._textRenderer.getFinalTexture()),e._hitTestSprite.setTexture(e._textRenderer.getTexture()),e}return(0,b.Z)(n,[{key:"serializeOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(0,f.Z)((0,p.Z)(n.prototype),"serializeOptions",this).call(this,e,t);return e||(i.type="text"),i}},{key:"getDOMStyle",value:function(e,t){var n=this.getFontSize()*t.y;return{fontWeight:this._options.fontWeight,fontSize:"".concat(n,"px"),fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:"".concat(this.getAbsoluteTextHeight(t)*this.getLineHeight(),"px"),color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}},{key:"getAbsoluteTextHeight",value:function(e){var t=this.getFontSize()*e.y,n=this.getTextMetrics();if(n){var i=1/n.unitsPerEm*t,r=n.ascender*i,o=n.descender*i;return r+Math.abs(o)}return t*this.getLineHeight()*1.1}},{key:"getDimensions",value:,{key:"applyFlip",value:function(e){(0,f.Z)((0,p.Z)(n.prototype),"applyFlip",this).call(this,e);var t=this._options.rotation;switch(e){case"horizontal":t+=2*(Math.PI-t),this.setRotation(t);break;case"vertical":t+=2*(Math.PI/2-t),this.setRotation(t)}}},{key:"applyTransform",value:function(e){(0,f.Z)((0,p.Z)(n.prototype),"applyTransform",this).call(this,e),this.set({fontSize:e.scaleSize(this.getFontSize(),"y"),maxWidth:e.scaleSize(this.getMaxWidth(),"x")},!1)}},{key:"applyRotation",value:function(e){(0,f.Z)((0,p.Z)(n.prototype),"applyRotation",this).call(this,e);var t=(e+360)%360,i=this._operation.getInputDimensions();90!==t&&270!==t||(this.setMaxWidth(this.getMaxWidth()/i.x*i.y),this.setFontSize(this.getFontSize()/i.y*i.x))}},{key:"setOption",value:function(e,t){var i=this._options,r=i.flipHorizontally,o=i.flipVertically;if("rotation"===e){var a=t;return r&&(a=2*Math.PI-a),o&&(a=2*Math.PI-a),this._options.rotation=a,this._textRenderer&&(this._textRenderer.rotation=a),this._rotation=a,void this.emit("update")}(0,f.Z)((0,p.Z)(n.prototype),"setOption",this).call(this,e,t)}},{key:"getOption",value:function(e){return"rotation"===e?this._rotation:(0,f.Z)((0,p.Z)(n.prototype),"getOption",this).call(this,e)}},{key:"getHitTestDisplayObject",value:function(){return this._hitTestSprite}},{key:"update",value:function(e,t){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(e,t);var i=this._textRenderer.getFinalTexture();i.getBaseTexture().update();var r=e.getRenderer();r.isOfType("webgl")&&r.updateTexture(i.getBaseTexture()),(0,f.Z)((0,p.Z)(n.prototype),"update",this).call(this,e,t),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform(),this._applyFlip()}}},{key:"_applyFlip",value:function(){var e=this._sprite.getScale(),t=this._options,n=t.flipHorizontally,i=t.flipVertically;(n&&e.x>0||!n&&e.x<0)&&(e.x*=-1,this.setRotation(this._rotation)),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1,this.setRotation(this._rotation)),this._sprite.setScale(e)}},{key:"_getTexture",value:function(){return this._textRenderer.getFinalTexture()}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._textRenderer.dispose(),this._hitTestSprite.dispose(),this._sprite.dispose()}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canAdjustPadding",value:]),n}(pf),wg.prototype.availableOptions={id:{type:"string",default:function(){return we.getUUID()}},fontSize:{type:"number",default:.1},characterSpacing:{type:"number",default:0},lineHeight:{type:"number",default:1.1},fontIdentifier:{type:"string"},fontFamily:{type:"string",default:"Times New Roman"},fontWeight:{type:"*",default:"normal"},fontStyle:{type:"string",default:"normal"},textMetrics:{type:"object",default:null},outlineWidth:{type:"number",default:0},outlineColor:{type:"color",default:ct.BLACK},alignment:{type:"string",default:"left",available:["left","center","right"]},verticalAlignment:{type:"string",default:"top",available:["top","center","bottom"]},color:{type:"color",default:new ct(1,0,0,1)},backgroundColor:{type:"color",default:ct.TRANSPARENT},position:{type:"vector2",default:new kg(.5,.5)},anchor:{type:"vector2",default:new kg(0,0)},pivot:{type:"vector2",default:new kg(.5,.5)},rotation:{type:"number",default:0},text:{type:"string",required:!0},maxWidth:{type:"number",default:.5},maxHeight:{type:"number",default:0},visible:{type:"boolean",default:!0},flipHorizontally:{type:"boolean",default:!1},flipVertically:{type:"boolean",default:!1}},wg.type="text",Sg=wg})),zy=M((function(){Ns(),pm(),_m(),xm(),Zy(),My(),Cg=pa.Vector2,Tg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];(e=t.call.apply(t,[this].concat(r))).setSmoothDownscaling(e._sdk.getOptions().smoothDownscaling),e._onSpriteUpdate=e._onSpriteUpdate.bind((0,x.Z)(e)),e._maskCanvas=we.createCanvas();var a=e._options.sprites.slice();return a.forEach((),e}return(0,b.Z)(n,[{key:"getSpritesOfType",value:function(e){return this._options.sprites.filter(()}},{key:"rotate",value:function(e){this._options.sprites.forEach((function(t){t.applyRotation(e)}))}},{key:"flip",value:function(e){this._options.sprites.forEach(()}},{key:"_onSpriteUpdate",value:function(e,t){this.emit("update",this),this.setDirty(!0)}},{key:"_applyRotation",value:function(e,t){this._options.sprites.forEach((function(n){return n.applyRotation(e,t)}))}},{key:"transform",value:function(e){this._options.sprites.forEach((function(t){return t.applyTransform(e)}))}},{key:"scale",value:function(e){this._options.sprites.forEach((function(t){return t.applyScale(e)}))}},{key:"serializeOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===e?this._options.sprites.map(():(0,f.Z)((0,p.Z)(n.prototype),"serializeOption",this).call(this,e,t)}},{key:"createSticker",value:function(e){return new Af(this,e)}},{key:"createText",value:function(e){return new Sg(this,e)}},{key:"createBrush",value:function(e){return new Tf(this,e)}},{key:"createTextDesign",value:,{key:"addSprite",value:function(e){this._options.sprites.push(e);var t=this.getSmoothDownscaling();e.setSmoothDownscaling&&e.setSmoothDownscaling(t),this._container.addChild(e.getDisplayObject()),this.setDirty(!0),e.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}},{key:"removeSprite",value:function(e){var t=this._options.sprites,n=t.indexOf(e);return-1!==n&&(e.off("update",this._onSpriteUpdate),this._container.removeChild(e.getDisplayObject()),t.splice(n,1),this.setDirty(!0),!0)}},{key:"_getOrientatedStageSize",value:function(){var e=this._sdk.getSprite().getTexture().getFrame(),t=this._sdk.getOperationsStack().getByIdentifier("orientation");if(t){var n=t?t.getRotation():0;return 270===n||90===n?new Cg(e.height,e.width):new Cg(e.width,e.height)}var i=this._sdk.getOperationsStack().getByIdentifier("output");return i?i.getOutputResolution():new Cg(e.width,e.height)}},{key:"_render",value:function(e){var t=this,n=this._container,i=this._options.sprites,r=e.getDimensions().clone().floor(),o=new ba.Container;return o.addChild(this._sprite),Promise.all(i.map(()).then((function(){i.forEach(()})).then((function(){t._renderTexture.clear(),i.forEach((function(e){e.getInverted&&e.getInverted()?(t._renderTexture.render(o),t._renderTexture.render(t._renderMaskedSprite(e.getDisplayObject(),e.getColor?e.getColor():ct.WHITE,e.getPadding?e.getPadding():-1)),o=new ba.Container):o.addChild(e.getDisplayObject())})),t._renderTexture.render(o),n.addChild(t._sprite),i.forEach((function(e){return n.addChild(e.getDisplayObject())}))}))}},{key:"_renderMaskedSprite",value:function(e,t,n){var i=this._maskCanvas,r=e.getWorldTransform(),o=this._getOrientatedStageSize();we.ensureCanvasDimensions(i,o);var a=i.getContext("2d");if(a.clearRect(0,0,i.width,i.height),a.save(),a.fillStyle=t.toRGBA(),n<0)a.fillRect(0,0,o.x,o.y);else{var s=Math.abs(e.getWidth()/e.getScale().x),l=Math.abs(e.getHeight()/e.getScale().y),u=s*n;a.transform(r.a,r.b,r.c,r.d,r.tx,r.ty),a.fillRect(-u,-u,s+2*u,l+2*u)}a.restore(),a.save(),a.globalCompositeOperation="destination-out",e._renderCanvas({getCurrentRenderTarget:beforeDraw:function(t){var n=e.getWidth(),i=e.getHeight(),r=e.getScale(),o=r.x<0,a=r.y<0;t.translate(n,i),t.scale(o?-1:1,a?-1:1),t.translate(-n,-i)},getContext:function(){return a}}),a.restore();var c=new ba.Container,h=new ba.Sprite(ba.Texture.fromCanvas(i));return c.addChild(h),c}},{key:"takeSpriteToFront",value:function(e){var t=this._options.sprites,n=t.indexOf(e);if(-1!==n){we.moveArrayItem(t,n,t.length-1);var i=e.getDisplayObject();this._container.removeChild(i),this._container.addChild(i),this.setDirty(!0)}}},{key:"getSpritesAtPosition",value:function(e,t){var n=this,i=[];this._options.sprites.forEach((function(e){return e.update(n._sdk,t)}));var r=this._sdk.getSprite(),o=r.getWorldTransform().applyInverseToVector(e),a=r.getTexture().getFrame(),s=a.width,l=a.height,u=r.getAnchor().clone().multiply(-s,-l);o.subtract(u);for(var c=this._options.sprites.slice(0).reverse(),h=0,d=c.length;h<d;h++){var f=c[h];f.getHitTestDisplayObject().isAtPosition(o)&&i.push(f)}return i}},{key:"setDirtyForRenderer",value:function(e,t,i){(0,f.Z)((0,p.Z)(n.prototype),"setDirtyForRenderer",this).call(this,e,t,i),this._options.sprites.forEach(()}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._options.sprites.forEach((function(e){e.dispose()}))}}]),n}(Ga),Tg.StickerSprite=Af,Tg.TextSprite=Sg,Tg.BrushSprite=Tf,Tg.TextDesignSprite=xg,Tg.identifier="sprite",Tg.prototype.availableOptions={sprites:{type:"array",default:[],setter:function(e,t){var n=this;if(e=e.map((function(e,t){if(e instanceof pf)return e;var i=(0,C.Z)({},e);switch(delete i.type,e.type){case"text":return new Sg(n,i);case"sticker":return new Af(n,i);case"brush":return new Tf(n,i);case"textdesign":return new xg(n,i);default:return Re.error(n.constructor.name,"Invalid sprite type: ".concat(e.type)),null}})),!t){if(this._options.sprites)this._options.sprites.slice().forEach((function(e){e.dispose(),n.removeSprite(e)}));e.forEach((function(e){n.addSprite(e)}))}return e}},smoothDownscaling:{type:"boolean",default:!1}},Rs.Operations.SpriteOperation=Tg,Eg=Tg})),By=M((function(){Ns(),Dg=pa.Vector2,Ig=function(){function e(t,n){(0,_.Z)(this,e),this._options=n,this._oldOptions={start:t.getStart().clone(),end:t.getEnd().clone(),rotation:t.getRotation(),textureScale:t.getTextureScale()},this._inputDimensions=t.getInputDimensions(!1),this._rotationDelta=n.rotation-t.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions),this._newAbsoluteSize=n.end.clone().subtract(n.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._oldOptions.start.clone().subtract(n.start).multiply(this._inputDimensions),this._scaleRatio=t.calculateScale(n.rotation)/t.calculateScale(),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/t.getTextureScale()}return(0,b.Z)(e,[{key:"applyToRelativePoint",value:function(e){var t=this._oldOptions.start,n=this._oldOptions.end,i=t.clone().add(n.clone().subtract(t).divide(2)).multiply(this._inputDimensions),r=e.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),o=i.clone().add(r).clone().subtract(this._inputDimensions.clone().divide(2)),a=new Dg(o.x*this._deltaCos-o.y*this._deltaSin,o.x*this._deltaSin+o.y*this._deltaCos),s=this._inputDimensions.clone().divide(2).add(a),l=this._options.start.clone().multiply(this._inputDimensions);return s.clone().subtract(l).divide(this._newAbsoluteSize)}},{key:"applyToRelativeSize",value:function(e){return e*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}},{key:"applyToDimensions",value:function(e){return e=e.clone().multiply(this._scaleRatio),this._options.textureScale&&e.multiply(this._textureScaleFactor),e}},{key:"scaleSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return e/this._sizeFactor[t]}},{key:"applyToRotation",value:function(e){return(e+this._rotationDelta)%(2*Math.PI)}},{key:"invert",value:function(){var e=this._options.start.clone(),t=this._options.end.clone(),n=this._inputDimensions,i=-this._rotationDelta,r=Math.cos(i),o=Math.sin(i),a=this._oldAbsoluteSize,s=this._newAbsoluteSize,l=e.clone().subtract(t).multiply(n),u=1/this._scaleRatio,c=new Dg(1/this._sizeFactor.x,1/this._sizeFactor.y),h=1/this._textureScaleFactor,d=this._oldOptions;return this._oldOptions=this._options,this._options=d,this._inputDimensions=n,this._rotationDelta=i,this._deltaCos=r,this._deltaSin=o,this._oldAbsoluteSize=s,this._newAbsoluteSize=a,this._absoluteStartDiff=l,this._scaleRatio=u,this._sizeFactor=c,this._textureScaleFactor=h,this}}]),e}(),Rg=Ig})),Ly=M((function(){Ns(),By(),Og=pa.Vector2,Fg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_render",value:function(e){this._sprite.setRotation(0);var t=e.getDimensions(),n=this._options,i=n.start,r=n.end,o=n.rotation,a=n.textureScale,s=r.clone().subtract(i).clone().divide(2),l=i.clone().add(s),u=this.calculateScale()*a,c=t.clone().multiply(u).multiply(s);return this._sprite.setAnchor(l),this._sprite.setRotation(o),this._sprite.setScale(u,u),this._sprite.setPosition(c),this._renderTexture.render(this._container),Promise.resolve()}},{key:"calculateScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,t=this.getInputDimensions(!1),n=new Og(Math.abs(t.x*Math.cos(e))+Math.abs(t.y*Math.sin(e)),Math.abs(t.x*Math.sin(e))+Math.abs(t.y*Math.cos(e))),i=t.clone().subtract(n.clone()).divide(2).abs();return i.y>i.x?2*i.y/t.y+1:2*i.x/t.x+1}},{key:"getNewDimensions",value:function(e){var t=this._options,n=t.start,i=t.end,r=t.textureScale,o=this.calculateScale();return e.clone().multiply(r*o).multiply(i.clone().subtract(n)).round()}},{key:"flip",value:function(e){var t=this._options,n=t.start,i=t.end,r=n.clone();"horizontal"===e?(n.set(1-i.x,n.y),i.set(1-r.x,i.y)):"vertical"===e&&(n.set(n.x,1-i.y),i.set(i.x,1-r.y))}},{key:"rotate",value:function(e){for(var t=this._options,n=t.start,i=t.end,r=(e+360)%360,o=Math.floor(r/90),a=0;a<o;a++){var s=n.clone();n.set(1-i.y,s.x),i.set(1-s.y,i.x)}}},{key:"_onBeforeExport",value:function(){this._wasEnabledBeforeExport=this.getEnabled(),this.setEnabled(!0)}},{key:"_onAfterExport",value:]),n}(Ga),Fg.identifier="transform",Fg.prototype.availableOptions={start:{type:"vector2",default:new Og(0,0)},end:{type:"vector2",default:new Og(1,1)},textureScale:{type:"number",default:1},rotation:{type:"number",default:0}},Fg.TransformChange=Rg,Rs.Operations.TransformOperation=Fg,Ag=Fg})),Uy=M((function(){Mv(),Ns(),Ka(),Pg=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._watermarkImage=null,e._watermarkTexture=null,e._loadWatermarkImage=function(){if(!e._watermarkImage){if(!(e._options.watermarkURI instanceof window.Image)){var t={value:e._options.crossOrigin,cors:!0};return Oe.loadImage(e._options.watermarkURI,t).then((function(t){e._watermarkImage=t}))}e._watermarkImage=e._options.watermarkURI}return Promise.resolve()},e._setWatermarkalignment=function(t,n){var i=Math.min(n.x,n.y)*we.clamp(e._options.inset,0,1);switch(e._options.alignment){case"center":e._watermarkSprite.setPosition(new vt(n.x-t.x,n.y-t.y).divide(2));break;case"top-left":e._watermarkSprite.setPosition(new vt(i,i));break;case"top-right":e._watermarkSprite.setPosition(new vt(n.x-t.x-i,i));break;case"bottom-left":e._watermarkSprite.setPosition(new vt(i,n.y-t.y-i));break;case"bottom-right":e._watermarkSprite.setPosition(new vt(n.x-t.x-i,n.y-t.y-i));break;default:e._watermarkSprite.setPosition(new vt(0,0))}},e._watermarkSprite=new ba.Sprite,e._watermarkSprite.setAnchor(0,0),e._container.addChild(e._watermarkSprite),e}return(0,b.Z)(n,[{key:"_render",value:function(e){var t=this,n=this._options,i=n.alpha,r=n.size;return this._loadWatermarkImage().then((function(){if(t._watermarkImage){t._watermarkTexture||(t._watermarkTexture=ba.Texture.fromImage(t._watermarkImage),t._watermarkSprite.setTexture(t._watermarkTexture));var n=e.getDimensions(),o=t._watermarkImage,a=o.width,s=o.height,l=we.resizeVectorToFit(new vt(a,s),n.clone().multiply(we.clamp(r,0,1)));t._setWatermarkalignment(l,n),t._watermarkSprite.setWidth(l.x),t._watermarkSprite.setHeight(l.y),t._watermarkSprite.setAlpha(i),t._renderTexture&&t._renderTexture.render(t._container)}return Promise.resolve()}))}},{key:"dispose",value:function(){(0,f.Z)((0,p.Z)(n.prototype),"dispose",this).call(this),this._watermarkSprite.dispose()}}]),n}(Ga),Pg.identifier="watermark",Pg.prototype.availableOptions={watermarkURI:{type:"string",required:!0},alignment:{type:"string",default:"top-right"},inset:{type:"number",default:"0.05"},size:{type:"number",default:"0.2"},alpha:{type:"number",default:1},crossOrigin:{type:"string",default:"anonymous"}},Rs.Operations.WatermarkOperation=Pg,Zg=Pg})),Ny=M((function(){Ns(),Lu(),Hu(),qg(),Yg(),Xg(),$g(),nm(),om(),am(),sm(),lm(),hm(),bm(),zy(),Ly(),Uy(),Mg=[rl,hl,bd,Cd,Rd,zd,Wd,qd,ef,lf,If,Eg,Ag,Zg,Kd,kd],Rs.AllOperations=Mg})),Hy=M((),jy=M((function(){zg=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}}]},{fontFamily:"Archivo",variations:[{identifier:"imgly_font_archivo_black",fontWeight:"normal",filePath:"fonts/imgly_font_archivo_black.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_bungee_inline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_campton_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Carter",variations:[{identifier:"imgly_font_carter_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_carter_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}}]},{fontFamily:"Codystar",variations:[{identifier:"imgly_font_codystar",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_codystar.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}}]},{fontFamily:"Fira Sans",variations:[{identifier:"imgly_font_fira_sans_regular",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_fira_sans_regular.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Krona One",variations:[{identifier:"imgly_font_krona_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_krona_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}}]},{fontFamily:"Kumar One Outline",variations:[{identifier:"imgly_font_kumar_one_outline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_kumar_one_outline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}}]},{fontFamily:"Molle",variations:[{identifier:"imgly_font_molle",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_molle.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}}]},{fontFamily:"Monoton",variations:[{identifier:"imgly_font_monoton",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_monoton.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}}]},{fontFamily:"Nixie One",variations:[{identifier:"imgly_font_nixie_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_nixie_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}}]},{fontFamily:"Notable",variations:[{identifier:"imgly_font_notable",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_notable.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}}]},{fontFamily:"Oswald SemiBold",variations:[{identifier:"imgly_font_oswald_semi_bold",fontWeight:600,fontStyle:"normal",filePath:"fonts/imgly_font_oswald_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}}]},{fontFamily:"Palanquin Dark SemiBold",variations:[{identifier:"imgly_font_palanquin_dark_semi_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_palanquin_dark_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}}]},{fontFamily:"Poppins",variations:[{identifier:"imgly_font_poppins",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_poppins.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_permanent_marker.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sancreek",variations:[{identifier:"imgly_font_sancreek",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sancreek.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}}]},{fontFamily:"Stint Ultra Expanded",variations:[{identifier:"imgly_font_stint_ultra_expanded",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_stint_ultra_expanded.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}}]},{fontFamily:"VT323",variations:[{identifier:"imgly_font_vt323",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_vt323.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Yeseva One",variations:[{identifier:"imgly_font_yeseva_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_yeseva_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}}]}]})),Wy=M((function(){Bg=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Amberlight",variations:[{identifier:"imgly_font_amberlight",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_amberlight.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_bungee_inline.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_campton_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_handycheera_regular.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_petit_formal_script.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_regular.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_500.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_black.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_light.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sue Ellen Francisco",variations:[{identifier:"imgly_font_sue_ellen_francisco",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sue_ellen_francisco.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_ultra.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Wolesbro",variations:[{identifier:"imgly_font_wolesbro",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_wolesbro.woff",textMetrics:{unitsPerEm:1e3,ascender:925,descender:-575}}]}]})),Vy=M((function(){Lg=[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",dimensions:{x:300,y:300},forceDimensions:!1,lockDimensions:!0},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:{x:1200,y:627}},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:{x:940,y:788}},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:{x:851,y:315}}]}]})),Gy=M((function(){Hy(),jy(),Wy(),Vy(),Ug=[],"undefined"!==typeof Rs.Operations.SpriteOperation&&Ug.push(Rs.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush),Ng={TRANSFORM_RATIO_CATEGORIES:Lg,FONTS:zg,TEXT_DESIGN_FONTS:Bg,BRUSHES:Ug}})),qy=M((function(){zi(),Hg=(0,C.Z)((0,C.Z)({},ai),{},{LOAD:"load",SAVE:"save",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_AFTER_EDIT:"transform:after-edit",ADDED_STICKER:"sticker:added-sticker",SPRITES_DESELECTED:"editor:sprite:deselected-all",CANVAS_FOCUS:"canvas:focus"}),jg=Hg})),Yy=M((function(){Gy(),qy(),Wg={EVENTS:jg,DEFAULTS:Ng}}));function Xy(){var e=navigator,t=e.userAgent,n=e.appVersion;return-1!==n.indexOf("MSIE")?n.match(/MSIE\s+?([0-9]+)/i)[1]:-1!==t.indexOf("Trident")&&t.match(/rv:([0-9]+)/i)[1]}var Ky,Jy,Qy,$y,ev,tv,nv,iv,rv,ov,av,sv,lv,uv,cv,hv,dv,fv,pv,gv,mv,yv,vv,_v,bv,xv,kv,wv,Sv,Cv,Tv,Ev,Dv,Iv,Rv,Ov,Fv,Av,Pv=M((),Zv=M((function(){Hy(),st(),Xe(),W(),Pv(),Ky=Rs.Utils,Jy=Rs.Math.Vector2,Qy={getInnerDimensionsForElement:function(e){var t=new Jy(e.offsetWidth,e.offsetHeight),n=window.getComputedStyle(e,null);return t.x-=parseInt(n.getPropertyValue("padding-left"),10),t.x-=parseInt(n.getPropertyValue("padding-right"),10),t.y-=parseInt(n.getPropertyValue("padding-top"),10),t.y-=parseInt(n.getPropertyValue("padding-bottom"),10),t},getEventPosition:function(e){var t=e.clientX,n=e.clientY;if(-1!==e.type.indexOf("touch")){if(!e.touches.length)return;t=e.touches[0].clientX,n=e.touches[0].clientY}return new Jy(t,n)},createTransparentPatternCanvas:function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=10,e.height=10,t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.fillStyle="#cccccc",t.fillRect(0,0,e.width/2,e.height/2),t.fillRect(e.width/2,e.height/2,e.width,e.height),e},supportsMSBlob:function(){var e=document.createElement("canvas"),t="undefined"!==typeof e.msToBlob;return r(e),t},translate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.fetch(e,t);if(!i)return Re.info("Utils#translate","Unable to translate `".concat(t,"`")),null;for(var r in n)i=i.replace("${".concat(r,"}"),n[r]);return i},fetch:function(e,t,n){for(var i=(t=(t=t.replace(/\[(\w+)]/g,".$1")).replace(/^\./,"")).split("."),r=0;r<i.length;r++){if(!(e=e[i[r]]))break}return"undefined"!==typeof e&&e},isMobile:select:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n||(n=function(e){return e});var i=[];return t.forEach((function(t){e.forEach(()})),i},getJSONP:cloneCategories:function(e,t){return e.map((function(e){return(e=Ky.clone(e))[t]=e[t].slice(0),e}))},mergeCategories:function(e,t,n){e=this.cloneCategories(e,n);var i=null;return t.forEach((function(t){e.forEach((),i?i[n]=i[n].concat(t[n]):e.push(t)})),e},wrapFiltersInCategories:function(e,t){return e.map((function(e){var n=e;return t in n||(n=(0,g.Z)({identifier:"imgly_filters_wrapped-".concat(e.identifier),displayFlat:!0},t,[e])),n}))},getStyleObject:function(e){var t=window.getComputedStyle(e),n={};for(var i in t){var r=t.getPropertyValue(i),o=i.replace(/-([a-z])/g,();""!==r&&(n[o]=r)}return n},styleElement:debounce:function(e,t,n){var i;return function(){for(var r=this,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];var l=u=n&&!i;clearTimeout(i),i=setTimeout(l,t),u&&e.apply(this,a)}},getScrollbarWidth:findIntegerFraction:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=Number.MAX_VALUE,i=0,r=0,o=1,a=1,s=0;s<t;s++){var l=o/a-e;if(l<0)o++;else{if(!(l>0))return new Jy(o,a);a++}var u=Math.abs(o/a-e);u<n&&(n=u,i=o,r=a)}return new Jy(i,r)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.toFixed(t);return parseFloat(n)},capitalize:flipObject:function(e){var t={};for(var n in e)t[e[n]]=n;return t},Browser:Vg},$y=Qy})),Mv=M((function(){Hy(),zi(),Ke(),Xe(),Yy(),Zv(),ev=Rs.Base64,tv=Rs.Color,Rs.Math.ColorMatrix,nv=Rs.EventEmitter,Rs.EXIF,Rs.OptionType,iv=Rs.Utils,rv=Rs.RenderType,ov=Rs.ImageFormat,av=Rs,Rs.UniformType,sv=Rs.Math.Vector2,Rs.Math.Rectangle,Rs.Math.Range,"undefined"!==typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):xi()})),zv=M((function(){Mv(),lv=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,_.Z)(this,e),this._ui=t,this._options=n,this._categoriesById={},this._filtersByIdentifier={identity:av.Operations.FilterOperation.Filters.IdentityFilter},this._categories=$y.wrapFiltersInCategories(si.DEFAULTS.FILTERS.slice(0),lv.CATEGORY_ITEMS_PROPERTY),this._customAssetsAllowed=i||t.getEditor().getSDK()._l.areCustomAssetsAllowed(),this._customAssetsAllowed&&this._options.categories&&(this._options.categories=$y.wrapFiltersInCategories(this._options.categories,lv.CATEGORY_ITEMS_PROPERTY)),this._initCategories()}return(0,b.Z)(e,[{key:"instantiateFilterWithIdentifier",value:function(e){var t=this,n={value:this._ui._options.crossOrigin,cors:!0},i=this.getFilterByIdentifier(e);if(!i)return Promise.reject(new Error("Unknown filter with identifier `".concat(e,"`!")));if(!(i.prototype instanceof av.Operations.FilterOperation.Filter)){var r,o=i.lutImage,a=i.resolution,s=i.horizontalTileCount,l=i.verticalTileCount,u=i.lightColor,c=i.darkColor;return u&&c?(u=tv.fromHex(u),c=tv.fromHex(c),Promise.resolve(new av.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:u,darkColor:c}))):(this._ui.getPreloader&&(r=this._ui.getPreloader().getAsset(o)),(r?Promise.resolve(r):Oe.loadImage(this._ui.getAssetPath(o),n)).then((function(){return Oe.loadImage(t._ui.getAssetPath(o),n).then((function(e){return new av.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:e,resolution:a,horizontalTileCount:s,verticalTileCount:l})}))})))}return Promise.resolve(new i)}},{key:"_initCategories",value:function(){var e=this;if(this._customAssetsAllowed&&this._options.categories&&(this._options.replaceCategories?this._categories=$y.wrapFiltersInCategories(this._options.categories,lv.CATEGORY_ITEMS_PROPERTY):this._categories=$y.mergeCategories(this._categories,this._options.categories,lv.CATEGORY_ITEMS_PROPERTY)),this._customAssetsAllowed&&this._options.availableFilters){var t=[];this._categories.forEach((function(n){var i=n.filters.filter((function(t){return-1!==e._options.availableFilters.indexOf(t.identifier)}));i.length>0&&t.push({identifier:n.identifier,defaultName:n.defaultName,filters:i})})),this._categories=t}var n={identifier:"all",defaultName:"All",visible:!1,filters:this._categories.length<=0?[]:this._categories.map((function(e){return e.filters})).reduce((function(e,t){return e.concat(t)}))};this._categories.unshift(n),this._categoriesById.all=n,this._categories.forEach((function(t){e._categoriesById[t.identifier]=t})),n.filters.forEach((function(t){e._filtersByIdentifier[t.identifier]=t}))}},{key:"getFiltersForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown filter category '".concat(e,"'"));return this._categoriesById[e].filters}},{key:"getItemsByCategory",value:function(e){return this.getFiltersForCategory(e)}},{key:"getFilterByIdentifier",value:function(e){return this._filtersByIdentifier[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategoryByIdentifier",value:function(e){return this._categoriesById[e]}}]),e}(),j(uv=lv,"CATEGORY_ITEMS_PROPERTY","filters")})),Bv=M((function(){Hy(),cv=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}(Ht),cv.prototype.availableOptions={fontFamily:{type:"string",required:!0},variations:{type:"array",required:!0}}})),Lv=M((function(){Hy(),hv={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"},dv=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"getLabel",value:function(){var e=hv[this._options.fontWeight];if("italic"===this._options.fontStyle)e+=" Italic";return e}}]),n}(Ht),dv.prototype.availableOptions={identifier:{type:"string",required:!0},fontFamily:{type:"string",required:!0},fontWeight:{type:"*",default:400},fontStyle:{type:"string",default:"normal"},textMetrics:{type:"object",default:null},provider:{type:"string",available:["google","file"]},filePath:{type:"string"},default:{type:"boolean",default:!1},font:{type:"object"}}})),Uv=M((function(){Mv(),Bv(),Lv(),Xe(),V(),fv=function(){function e(t,n){(0,_.Z)(this,e),this._ui=t,this._options=n,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}return(0,b.Z)(e,[{key:"_initFonts",value:function(){var e=this,t=this._options,n=t.fonts,i=t.replaceFonts,r=t.availableVariations,s=t.isTextDesign,l=!0;l=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed(),n&&l&&n.forEach((function(e,t){var i=e.variations;i&&i.forEach((function(e,i){if(o[e.identifier]){var r=a(e.identifier,!0);n[t].variations[i].identifier=r;var s=Wg.DEFAULTS.FONTS.find(().fontFamily;n[t].fontFamily=s}}))}));var u,c=s?Wg.DEFAULTS.TEXT_DESIGN_FONTS:Wg.DEFAULTS.FONTS;if(l&&(c=i?n:c.concat(n||[])),c=c.map((function(t){var n=t.fontFamily,i=t.variations;if(l&&r&&(i=i.filter((function(e){return-1!==r.indexOf(e.identifier)}))),0===i.length)return null;var o=new cv({fontFamily:n});return i=i.map((function(t){var i=new dv(t);return i.setFontFamily(n),i.setFont(o),t.default&&!u&&(u=i),null==i.getTextMetrics()&&Re.warn("Missing font metrics for ".concat(i.getIdentifier(),". The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details.")),e._variationsByIdentifier[i.getIdentifier()]=i,i})),o.setVariations(i),e._fontsByFontFamily[n]=o,o})).filter((function(e){return e})),!u){var h=c[0].getVariations(),d=(0,m.Z)(h,1);u=d[0]}this._defaultVariation=u,this._fonts=c}},{key:"getFonts",value:function(){return this._fonts}},{key:"getFontByFontFamily",value:function(e){return this._fontsByFontFamily[e]}},{key:"getVariationByIdentifier",value:,{key:"getVariationsByIdentifier",value:function(){return(0,C.Z)({},this._variationsByIdentifier)}},{key:"getDefaultVariation",value:function(){return this._defaultVariation}}]),e}()})),Nv=M((function(){Mv(),pv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_.Z)(this,e),this._ui=t,this._options=n,this._defaultLayouts=av.Operations.SpriteOperation.TextDesignSprite.Layouts,this._legacyLayouts=av.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts,this._layouts=[],this._init()}return(0,b.Z)(e,[{key:"_init",value:function(){var e=this._options.availableLayouts,t=(0,C.Z)((0,C.Z)({},this._defaultLayouts),this._legacyLayouts);this._layouts=Object.keys(t).map((),e&&(e.push.apply(e,(0,v.Z)(Object.values(this._legacyLayouts).map((function(e){return e.identifier})))),this._layouts=this._layouts.filter(())}},{key:"getLayoutByIdentifier",value:function(e){var t=iv.Array.find(this._layouts,(function(t){return t.identifier===e}));return t&&t.layout}},{key:"getLayouts",value:function(){return(0,v.Z)(this._layouts)}},{key:"getDefaultLayout",value:]),e}()})),Hv=M((function(){Lv(),30,"abcdefghijklmnopqrstuvwxzy",gv=function(){function e(t){(0,_.Z)(this,e),this._fontVariation=t||new dv({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"}),this._createRuler()}return(0,b.Z)(e,[{key:"_createRuler",value:function(){this._ruler=document.createElement("div"),this._ruler.innerText="abcdefghijklmnopqrstuvwxzy",document.body.appendChild(this._ruler),this._setRulerStyle()}},{key:"_setRulerStyle",value:function(){this._ruler.style.cssText="\n      position: absolute;\n      top: -9999px;\n      left: -9999px;\n      opacity: 0;\n      display: inline-block;\n      font: ".concat(this._fontVariation.getFontStyle()," ").concat(this._fontVariation.getFontWeight()," ").concat(30,"px ").concat(this._fontVariation.getFontFamily(),";\n    ")}},{key:"setFontVariation",value:function(e){this._fontVariation=e,this._setRulerStyle()}},{key:"getWidth",value:,{key:"dispose",value:]),e}()})),jv=M((function(){Hv(),mv="undefined"!==typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):xi(),50,5e3,yv=function(){function e(t){(0,_.Z)(this,e),this._fontVariation=t,this._defaultFontRuler=new gv,this._customFontRuler=new gv(this._fontVariation)}return(0,b.Z)(e,[{key:"observe",value:function(){var e=this,t=mv();return new Promise((function(n,i){var r=window.setInterval((function(){if(e._defaultFontRuler.getWidth()!==e._customFontRuler.getWidth())return window.clearInterval(r),n();if(mv()-t>=5e3){var o=new Error("Failed to load font ".concat(e._fontVariation.getFontFamily(),"."));return o.font=e._fontVariation,i(o)}}),50)}))}},{key:"dispose",value:function(){this._defaultFontRuler.dispose(),this._customFontRuler.dispose()}}]),e}()})),Wv=M((function(){Hy(),jv(),vv=function(){function e(t){(0,_.Z)(this,e),this._ui=t,this._fonts=[],this._observers=[]}return(0,b.Z)(e,[{key:"add",value:function(e){this._fonts.push(e)}},{key:"load",value:function(){var e=this;return 0===this._fonts.length?Promise.resolve():(this._observers=[],this._fonts.forEach((),we.executePromises(this._observers.map((function(e){return e.observe()}))))}},{key:"dispose",value:]),e}()})),Vv=M((function(){Wv(),_v=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"load",value:function(){return Promise.resolve()}}]),n}(vv)})),Gv=M((function(){Wv(),bv={italic:"i"},xv=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"load",value:function(){return this._fonts.length&&this._addStylesheetTag(),(0,f.Z)((0,p.Z)(n.prototype),"load",this).call(this)}},{key:"_addStylesheetTag",value:function(){var e=this._getFamiliesString(),t=document.createElement("link");t.rel="stylesheet",t.href="https://fonts.googleapis.com/css?family=".concat(e),document.getElementsByTagName("head")[0].appendChild(t)}},{key:"_getFamiliesString",value:function(){var e={};this._fonts.forEach((function(t){var n=t.getFontFamily(),i=t.getFontStyle(),r=t.getFontWeight();e[n]=e[n]||[],"undefined"!==typeof r?e[n].push("".concat(r).concat(bv[i]||"")):e[n].push(400)}));var t=[];for(var n in e){var i=e[n],r=i.length?":".concat(i.join(",")):"",o=n.replace(" ","+")+r;t.push(o)}return t.join("|")}}]),n}(vv)})),qv=M((function(){Vv(),Gv(),kv=function(){function e(t,n){(0,_.Z)(this,e),this._ui=t,this._fonts=n,this._loadedFonts=[]}return(0,b.Z)(e,[{key:"setFonts",value:function(e){this._fonts=e}},{key:"needsToLoad",value:function(){for(var e=this,t=function(t){var n=void 0;return e._fonts[t].getVariations().forEach((function(e){n=n||e.getProvider()})),n?{v:!0}:"continue"},n=0;n<this._fonts.length;n++){var i=t(n);if("continue"!==i&&"object"===typeof i)return i.v}}},{key:"fontLoaded",value:function(e){var t=e.getFontFamily();return-1!==this._loadedFonts.indexOf(t)}},{key:"setFontLoaded",value:function(e){if(!this.fontLoaded(e)){var t=e.getFontFamily();this._loadedFonts.push(t)}}},{key:"load",value:function(){var e=this,t=this._fonts,n={google:new xv(this._ui),file:new _v(this._ui)},i=t.filter((function(t){return!e.fontLoaded(t)})).forEach((function(e){e.getVariations().forEach(()}));var r=[];for(var o in n)r.push(n[o].load());return Promise.all(r).then((function(){i(),t.forEach((function(t){e.setFontLoaded(t)}))})).catch(()}}]),e}()})),Yv=M((function(){Mv(),wv=function(){function e(t,n){(0,_.Z)(this,e),this._ui=t,this._options=n,this._brushes=[],this._brushesById={},this._addBrushes(Wg.DEFAULTS.BRUSHES);var i=this._options,r=i.brushes,o=i.replaceBrushes,a=i.availableBrushes;this._options.brushes&&this._addBrushes(r,o),a&&(this._brushes=this._brushes.filter((function(e){return-1!==a.indexOf(e.identifier)})))}return(0,b.Z)(e,[{key:"_addBrushes",value:function(e,t){var n=this;t&&(this._brushes=[],this._brushesById={}),e.forEach((function(e){n._brushes.push(e),n._brushesById[e.identifier]=e}))}},{key:"getBrushByIdentifier",value:function(e){return this._brushesById[e]}},{key:"getBrushes",value:function(){return this._brushes}},{key:"getFirstBrush",value:]),e}()})),Xv=M((function(){Sv=function(){eturn(0,b.Z)(e,[{key:"addAsset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._assetsByGroupId[e]?n?this._assetsByGroupId[e].unshift(t):this._assetsByGroupId[e].push(t):this._assetsByGroupId[e]=[t]}},{key:"setAssets",value:,{key:"getAssets",value:]),e}(),Cv=Sv})),Kv=M((function(){Mv(),Hy(),Xv(),zi(),st(),Tv="imgly_sticker_custom",Ev=function(){function e(t,n,i){(0,_.Z)(this,e),this._ui=t,this._options=n,this._dynamicAssetsLibrary=i||this._ui.getEditor().getDynamicAssetsLibrary()||new Cv,this._categoriesById={},this._categories=[],this._stickersById={},this._customStickerCanvas=we.createCanvas(),this.reload()}return(0,b.Z)(e,[{key:"reload",value:function(){this._categoriesById={},this._categories=[],this._stickersById={};var e=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();this._addCategories(si.DEFAULTS.STICKER_CATEGORIES);var t=this._options,n=t.categories,i=t.replaceCategories;if(e&&this._options.categories?this._addCategories(n,i):(this._updateCategoriesMap(),this._updateAllCategory()),e){var r=this._dynamicAssetsLibrary.getAssets("sticker");if(r.length>0){var o=this._createCustomStickerCategory(r);this._addCategories([o],!1,!0)}}}},{key:"loadExternal",value:function(e){var t=this;return new ot(e).load().then(()}},{key:"_addCategories",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._categories=t?e.slice(0):n?this._mergeCategories(e,this._categories):this._mergeCategories(this._categories,e),this._updateCategoriesMap(),this._updateAllCategory()}},{key:"_mergeCategories",value:function(e,t){e=$y.cloneCategories(e,"stickers");var n,i=(0,T.Z)(t);try{for(i.s();!(n=i.n()).done;){var r,o=n.value,a=!1,s=(0,T.Z)(e);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(o.identifier===l.identifier){var u,c=(0,T.Z)(o.stickers);try{for(c.s();!(u=c.n()).done;){var h,d=u.value,f=!1,p=(0,T.Z)(l.stickers);try{for(p.s();!(h=p.n()).done;){var g=h.value;if(d.identifier===g.identifier){Object.assign(g,d),f=!0;break}}}catch(m){p.e(m)}finally{p.f()}f||l.stickers.push(d)}}catch(m){c.e(m)}finally{c.f()}a=!0;break}}}catch(m){s.e(m)}finally{s.f()}a||e.push(o)}}catch(m){i.e(m)}finally{i.f()}return e}},{key:"_updateCategoriesMap",value:function(){var e=this;this._categoriesById={},this._categories.forEach((function(t){e._categoriesById[t.identifier]=t})),this._categories.forEach((function(t){t.stickers.forEach((function(t){e._stickersById[t.identifier]=t}))})),"undefined"!==typeof this._options.availableStickers&&null!==this._options.availableStickers&&(this._categories.forEach((function(t){t.identifier!==Tv&&(t.stickers=t.stickers.filter(())})),this._categories=this._categories.filter((function(e){return e.stickers.length>0}))),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map((function(e){return e.stickers})).reduce((function(e,t){return e.concat(t)}),[])},this._categoriesById.all=this._allCategory}},{key:"renderStickerThumbnailFromImage",value:function(e){var t=this._customStickerCanvas,n=t.getContext("2d");n.save();var i=62/e.width,r=i*e.height;t.width=62,t.height=62,n.clearRect(0,0,e.width,e.height),n.translate(0,.5*(t.height-r)),n.scale(i,i),n.drawImage(e,0,0);var o=t.toDataURL("image/png");return n.restore(),{data:o,width:62,height:r}}},{key:"addCustomStickerFromImage",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",r=function(e){var t=n._ui.getEditor().getSDK().getRenderer(),i=new sv(e.width,e.height),r=1e6*n._ui.getEditor().getMaxMegapixels(),o=t.getMaxDimensions(),a=i.x*i.y>r,s=null!==o&&(i.x>o||i.y>o);if(a){var l=e.width/e.height,u=e.height/e.width;o=new sv(Math.sqrt(r*l),Math.sqrt(r*u)).floor().max()}var c=i.clone();return(a||s)&&(i.x/i.y>1?(c.x=o,c.y=o/i.x*i.y):(c.x=o/i.y*i.x,c.y=o)),c},o=function(e,t){var n=e.x/e.y;return n>1?new sv(t,t/n):new sv(t*n,t)},a="data:image/svg"===e.src.substring(0,14),s=this._ui.getEditor().getSDK();e=s.correctExifOrientation(e);var l=o(new sv(e.width,e.height),2048),u=a?l:r(e),c=this._customStickerCanvas,h=c.getContext("2d");h.save();var d=this.renderStickerThumbnailFromImage(e);a?(e.width>e.height?(c.width=2048,c.height=2048/e.width*e.height):(c.height=2048,c.width=2048/e.height*e.width),e.width=c.width,e.height=c.height):(c.width=u.x,c.height=u.y,h.scale(u.x/e.width,u.y/e.height)),h.drawImage(e,0,0,e.width,e.height);var f=c.toDataURL();h.restore();var p={identifier:we.generateUUID(),defaultName:t||"",tintMode:i,images:{mediaThumb:{uris:[d.data],rawData:!0,width:d.width,height:d.height},mediaBase:{uris:a?[f,e.src]:[f],rawData:!0,isSVG:a,width:u.x,height:u.y}}},g=this._dynamicAssetsLibrary;g.addAsset("sticker",p,!0);var m=g.getAssets("sticker");if(1===m.length){var y=this._createCustomStickerCategory(m);this._addCategories([y],!1,!0)}else this.getCategory(Tv).stickers=m,this._updateAllCategory();this._updateCategoriesMap()}},{key:"_createCustomStickerCategory",value:function(e){return{identifier:Tv,defaultName:"Custom",metaData:{backgroundImage:e[e.length-1].images.mediaBase.uris[0],rawData:!0},stickers:e}}},{key:"getStickersForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown sticker category '".concat(e,"'"));return this._categoriesById[e].stickers}},{key:"getStickerByIdentifier",value:function(e){return this._stickersById[e]}},{key:"getCategories",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?[this._allCategory].concat(this._categories):this._categories}},{key:"getCategory",value:function(e){return this._categoriesById[e]}}],[{key:"getURLForSticker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base",n=e.images,i="base"===t&&n.mediaBase||n.mediaThumb,r=i.uris||[i.uri];if(!$y.Browser.getIEVersion()){var o=r.filter(();return o.length?o[0]:r[0]}var a=r.filter(();return a.length?a[0]:r[0]}}]),e}()})),Jv=M((function(){Mv(),qv(),Yv(),zv(),Uv(),Kv(),Dv=U(J()),"undefined"!==typeof av.Operations.SpriteOperation&&(Iv=av.Operations.SpriteOperation.BrushSprite),Rv=function(){function e(t,n){(0,_.Z)(this,e),this._editor=t,this._ui=this._editor.getUI(),this._data=n,this._filterManager=new uv(this._ui,this._getOptions("filter")),this._stickerManager=new Ev(this._ui,this._getOptions("sticker")),this._brushManager=new wv(this._ui,this._getOptions("brush")),this._fontManager=new fv(this._ui,this._getOptions("text"))}return(0,b.Z)(e,[{key:"_getOptions",value:function(e){var t=this._editor.controls,n={};t&&t.get(e)&&(n=t.get(e).defaultOptions);var i=this._editor.getOptions();return iv.deepDefaults({},i.editor.controlsOptions[e]||{},n)}},{key:"deserialize",value:function(){var e=this;return this._validateVersion().then((function(){return e._deserializeInputImage()})).then((function(){return e._deserializeOperations()}))}},{key:"_validateVersion",value:function(){return this._data.version!==this.constructor.version?Promise.reject(new Error("Invalid version ".concat(this._data.version,", expected ").concat(this.constructor.version))):Promise.resolve()}},{key:"_deserializeInputImage",value:function(){var e=this;return new Promise((function(t,n){var i=e._data.inputImage,r=i.data,o=i.type;if(r&&o){var a=new window.Image;a.addEventListener("load",(),a.src="data:".concat(o,";base64,").concat(r)}else t()}))}},{key:"_deserializeOperations",value:function(){var e=(0,y.Z)(D().mark((function e(){var t,n=this;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._data.operations,e.abrupt("return",(0,Dv.default)(t,)));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_deserializeOperation",value:function(e){switch(e.type){case"crop":return this._deserializeCropOperation(e);case"orientation":return this._deserializeOrientationOperation(e);case"filter":return this._deserializeFilterOperation(e);case"adjustments":return this._deserializeAdjustmentsOperation(e);case"sprite":return this._deserializeSpriteOperation(e);case"focus":return this._deserializeFocusOperation(e)}}},{key:"_deserializeCropOperation",value:function(e){var t=e.options,n=t.rotation,i=sv.fromObject(t.start),r=sv.fromObject(t.end);n>Math.PI&&(n-=2*Math.PI);var o={start:i,end:r};"undefined"!==typeof n&&(o.rotation=n);var a=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(a,o),a.set(o),Promise.resolve(a)}},{key:"_deserializeOrientationOperation",value:function(e){var t=e.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(t),Promise.resolve(n)):Promise.resolve()}},{key:"_deserializeFilterOperation",value:function(e){var t=this,n=e.options;return this._filterManager.getFilterByIdentifier(n.name)?this._filterManager.instantiateFilterWithIdentifier(n.name).then((function(e){var i=t._editor.operations.getOrCreate("filter");return i.set({identifier:n.name,filter:e,intensity:n.intensity}),i})):(Re.warn("Deserializer","Unknown filter `".concat(n.name,"`")),Promise.resolve())}},{key:"_deserializeAdjustmentsOperation",value:function(e){var t=av.Operations.AdjustmentsOperation,n=e.options,i={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach((function(e){if("undefined"!==typeof n[e]){var r=t.prototype.availableOptions[e],o=r.minValue,a=r.midValue,s=r.maxValue,l=n[e];l=l<0?a+(a-o)*l:a+(s-a)*l,i[e]=l}})),Promise.resolve(this._editor.operations.getOrCreate("adjustments",i))}},{key:"_deserializeSpriteOperation",value:function(e){var t=this,n=e.options,i=this._editor.operations.getOrCreate("sprite");if(!i)return Promise.resolve();var r=n.sprites.map((function(e){return t._deserializeSprite(i,e)})).filter((function(e){return e}));return Promise.all(r).then((function(e){return i.setSprites(e.filter((function(e){return e}))),i}))}},{key:"_deserializeSprite",value:function(e,t){switch(t.type){case"sticker":return this._deserializeSticker(e,t);case"text":return this._deserializeText(e,t);case"brush":return this._deserializeBrush(e,t);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(e,t)}}},{key:"_deserializeSticker",value:function(e,t){var n=this,i=av.Operations.SpriteOperation,r=t.options,o=this._stickerManager.getStickerByIdentifier(r.name),a=this._stickerManager.getURLForSticker(o);return o?new Promise((function(t,o){var s=new window.Image;s.addEventListener("load",(function(){var n=i.StickerSprite.prototype.availableOptions.adjustments.structure,o=r.rotation,a=r.flipHorizontally,l=r.flipVertically,u={identifier:r.name,image:s,position:sv.fromObject(r.position),dimensions:sv.fromObject(r.dimensions),rotation:o,flipHorizontally:a,flipVertically:l,adjustments:{}};"undefined"!==typeof r.adjustments&&["brightness","contrast","saturation"].forEach((function(e){"undefined"!==typeof r.adjustments[e]&&(u.adjustments[e]=r.adjustments[e]+n[e].default)})),t(e.createSticker(u))})),s.crossOrigin=n._editor.getCrossOrigin(),s.src=n._editor.getUI().getAssetPath(a)})):(Re.warn("Deserializer","Unknown sticker '".concat(r.name,"'. Skipping sprite.")),Promise.resolve())}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,r=n.lineHeight,o=n.fontFamily,a=n.fontWeight,s=n.alignment,l=n.rotation,u=n.maxWidth,c=n.color,h=n.backgroundColor,d=new kv(this._ui),f=this._fontManager.getFontByFontFamily(o);return f||(f=this._fontManager.getDefaultFont()),d.setFonts([f]),d.load().then((function(){var t=e.createText({fontSize:i,lineHeight:r,fontFamily:o,fontWeight:a,alignment:s,rotation:l,maxWidth:u,text:n.text,color:tv.fromArray(c),backgroundColor:tv.fromArray(h),position:sv.fromObject(n.position)});return t._edited=!0,t}))}},{key:"_deserializeBrush",value:function(e,t){var n=this,i=t.options.paths,r=e.createBrush();return i.forEach((),Promise.resolve(r)}},{key:"_deserializeBrushPath",value:function(e,t){var n=t.points,i=this._createBrushForPath(t),r=e.createPath(i);r.setClosed(!0),n.forEach(()}},{key:"_createBrushForPath",value:function(e){var t=e.color,n=e.size,i={color:tv.fromArray(t),size:n},r=this._brushManager.getFirstBrush();if(r.prototype&&r.prototype instanceof Iv)return new r(i);var o=(0,C.Z)({},r);delete o.image;var a=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}(Iv);return a.identifier=r.identifier,new a((0,C.Z)((0,C.Z)({},o),i))}},{key:"_deserializeFocusOperation",value:function(e){var t=e.options.options;switch(e.options.type){case"radial":var n=t.position,i=t.radius,r=t.gradientRadius,o=t.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:sv.fromObject(n),radius:i,gradientRadius:r,blurRadius:o}));case"linear":var a=t.start,s=t.end,l=t.size,u=t.gradientSize,c=t.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:sv.fromObject(a),end:sv.fromObject(s),size:l,gradientSize:u,blurRadius:c}))}}},{key:"_getInputDimensionsForOperation",value:function(e){var t=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach((function(i){i===e&&(t=!0),t||(n=i.getNewDimensions(n))})),n}}]),e}(),Rv.version="1.0.0"})),Qv=M((function(){Mv(),Ov=2*Math.PI,Fv=function(){eturn(0,b.Z)(e,[{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=(0,C.Z)((0,C.Z)({},e),{},{image:!0});var t={version:this.constructor.version};return this._serializeInputImage(t).then(this._serializeOperations)}},{key:"_serializeInputImage",value:function(e){var t=this._editor.getImage(),n=t.width,i=t.height;if(!this._options.image)return e.inputImage={width:n,height:i},Promise.resolve(e);var r=iv.createCanvas();r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0);var o=r.toDataURL(ov.PNG);return e.inputImage={type:ov.PNG,data:o.replace(/^data:image\/(.*?);base64,/,""),width:n,height:i},Promise.resolve(e)}},{key:"_serializeOperations",value:function(e){var t=this,n=[];return this._editor.operations.getStack().forEach((),e.operations=n.filter((function(e){return e})),Promise.resolve(e)}},{key:"_serializeOperation",value:function(e,t){switch(e.constructor.identifier){case"transform":return this._serializeTransformOperation(e);case"orientation":return this._serializeOrientationOperation(e);case"filter":return this._serializeFilterOperation(e);case"adjustments":return this._serializeAdjustmentsOperation(e);case"sprite":return this._serializeSpriteOperation(e,t);case"radial-focus":return this._serializeRadialFocusOperation(e);case"mirrored-focus":return this._serializeLinearFocusOperation(e);default:Re.warn("Unable to serialize operation of type ".concat(e.constructor.identifier))}}},{key:"_serializeTransformOperation",value:function(e){var t=e.serializeOptions(["start","end","rotation"],!0);return t.rotation=(t.rotation+Ov)%Ov,{type:"crop",options:t}}},{key:"_serializeOrientationOperation",value:function(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeFilterOperation",value:function(e){return"identity"===e.getIdentifier()?null:{type:"filter",options:{intensity:e.getIntensity(),name:e.getIdentifier()}}}},{key:"_serializeAdjustmentsOperation",value:function(e){var t=e.availableOptions,n={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach((function(i){var r=t[i],o=e.getOption(i),a=r.minValue,s=r.midValue,l=r.maxValue;n[i]=o<=s?(o-a)/(s-a)-1:(o-s)/(l-s)})),{type:"adjustments",options:n}}},{key:"_serializeSpriteOperation",value:function(e,t){var n,i=this,r=t.filter((function(e){return"sprite"===e.type})),o=!0;if(r.length?(n=r.pop(),o=!1):n={type:"sprite",options:{sprites:[]}},e.getSprites().forEach((function(t){var r=null;t instanceof e.constructor.StickerSprite?r=i._serializeSticker(e,t):t instanceof e.constructor.TextSprite?r=i._serializeText(e,t):t instanceof e.constructor.BrushSprite?r=i._serializeBrush(e,t):t instanceof e.constructor.TextDesignSprite&&(r=i._serializeTextDesign&&i._serializeTextDesign(e,t)),r&&n.options.sprites.push(r)})),o)return n}},{key:"_serializeSticker",value:function(e,t){var n=t.getAdjustments(),i=t.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);i.name=i.identifier,delete i.identifier,i.rotation=(i.rotation+Ov)%Ov;var r=n.availableOptions;return i.adjustments={brightness:n.getBrightness()-r.brightness.default,saturation:n.getSaturation()-r.saturation.default,contrast:n.getContrast()-r.contrast.default},{type:"sticker",options:i}}},{key:"_serializeText",value:function(e,t){var n=t.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return n.rotation=(n.rotation+Ov)%Ov,{type:"text",options:n}}},{key:"_serializeBrush",value:function(e,t){var n=this;return{type:"brush",options:{paths:t.getPaths().map((function(e){return n._serializePath(e)}))}}}},{key:"_serializePath",value:function(e){var t=e.getBrush().serializeOptions(["color","size"],!0);return t.points=e.getControlPoints().map((function(e){return e.getPosition().toObject()})),t}},{key:"_serializeRadialFocusOperation",value:function(e){return{type:"focus",options:{type:"radial",options:e.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(e){return{type:"focus",options:{type:"linear",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_getInputDimensionsForOperation",value:function(e){var t=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach((function(i){i===e&&(t=!0),t||(n=i.getNewDimensions(n))})),n}}]),e}(),Fv.version="1.0.0"})),$v={};B($v,{default:function(){return Av}});var e_,t_,n_,i_,r_=M((function(){Jv(),Qv(),Av=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new Fv(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new Rv(this._editor,e).deserialize()}}]),e}(),Av.version="1.0.0"})),o_=M((function(){Mv(),Jv(),e_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_deserializeOperation",value:function(e){return"selective-blur"===e.type?this._deserializeSelectiveBlurOperation(e):(0,f.Z)((0,p.Z)(n.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeCropOperation",value:function(e){var t=e.options,n=t.rotation,i=sv.fromObject(t.start),r=sv.fromObject(t.end),o=t.dimensions?sv.fromObject(t.dimensions):null;if(r.x-i.x<=0||r.y-i.y<=0)throw new Error("A crop should not result in negative or zero dimensions - start: ".concat(i," - end: ").concat(r));n>Math.PI&&(n-=2*Math.PI);var a={start:i,end:r};"undefined"!==typeof n&&(a.rotation=n);var s=this._editor.operations.getOrCreate("transform");if(!s)return Promise.resolve();if(this._editor.broadcastTransform(s,a),s.set(a),o){var l=r.clone().subtract(i),u=s.getInputDimensions(!1).multiply(l);s.setTextureScale(o.x/u.x)}return Promise.resolve(s)}}]),n}(Rv),e_.version="1.0.1"})),a_=M((function(){Qv(),t_=2*Math.PI,n_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_serializeTransformOperation",value:function(e){var t=e.serializeOptions(["start","end","rotation","textureScale"],!0);return t.rotation=(t.rotation+t_)%t_,1!==t.textureScale&&(t.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete t.textureScale,{type:"crop",options:t}}}]),n}(Fv),n_.version="1.0.1"})),s_={};B(s_,{default:function(){return i_}});var l_,u_,c_,h_,d_,f_,p_,g_,m_,y_,v_=M((function(){o_(),a_(),i_=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new n_(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new e_(this._editor,e).deserialize()}}]),e}(),i_.version="1.0.1"})),__=M((function(){Ke(),Mv(),l_=av.OptionType,u_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.Z)(this,n),(i=t.call(this,r))._loaded=!1,i._loading=!1,i._ui=e,i._frame=av.Utils.deepClone(i._options),i}return(0,b.Z)(n,[{key:"load",value:function(){var e=this;if(this._loaded)return Promise.resolve();if(this._loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;var t=this._frame.imageGroups,n=[];return["top","left","right","bottom"].forEach((function(i){if(i in t){var r=t[i];["start","mid","end"].forEach((function(t){t in r&&n.push(e._loadPart(i,t))}))}})),Promise.all(n).then((function(){e._loaded=!0,e._loading=!1})).catch(()}},{key:"_loadPart",value:function(e,t){var n=this,i=this._frame.imageGroups[e][t],r=i;return"string"!==typeof i&&"image"in i&&(r=i.image),Oe.load(this._ui.getAssetPath(r)).then((function(r){return"string"!==typeof i?n._frame.imageGroups[e][t].image=r:n._frame.imageGroups[e][t]=r,r}))}},{key:"getFrame",value:function(){return this._frame}}]),n}(av.Configurable),u_.prototype.availableOptions={identifier:{type:l_.STRING,required:!0},defaultName:{type:l_.STRING},thumbnail:{type:l_.STRING},tintable:{type:l_.BOOLEAN,default:!1},layoutMode:{type:l_.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:l_.OBJECT,required:!0}}})),b_=M((function(){Mv(),c_=function(){function e(t,n){(0,_.Z)(this,e),this._ui=t,this._options=n,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(si.DEFAULTS.FRAME_CATEGORIES),this._customAssetsAllowed=t.getEditor().getSDK()._l.areCustomAssetsAllowed();var i=this._options,r=i.categories,o=i.replaceCategories;this._customAssetsAllowed&&this._options.categories?this._addCategories(r,o):this._updateAllCategory()}return(0,b.Z)(e,[{key:"_addCategories",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=n?e.slice(0):$y.mergeCategories(this._categories,e,"frames"),this._categoriesById={},this._categories.forEach((function(e){t._categoriesById[e.identifier]=e}));var i=this._options.availableFrames;this._customAssetsAllowed&&i&&this._categories.forEach((function(e){e.frames=e.frames.filter(()})),this._categories.forEach((function(e){e.frames.forEach((function(e){t._framesById[e.identifier]=e}))})),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map((function(e){return e.frames})).reduce((function(e,t){return e.concat(t)}),[])},this._categoriesById.all=this._allCategory}},{key:"getFramesForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown frame category '".concat(e,"'"));return this._categoriesById[e].frames}},{key:"getFrameByIdentifier",value:function(e){return this._framesById[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategory",value:function(e){return this._categoriesById[e]}}]),e}()})),x_=M((function(){Mv(),h_=function(){function e(t,n){var i=this;(0,_.Z)(this,e),this._ui=t,this._options=n,this._overlays=si.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={};var r=t.getEditor().getSDK()._l.areCustomAssetsAllowed();r&&n.overlays&&(n.replaceOverlays?this._overlays=n.overlays:this._overlays=this._overlays.concat(n.overlays)),r&&n.availableOverlays&&(this._overlays=this._overlays.filter(()),this._overlays.forEach((function(e){i._overlaysByIdentifier[e.identifier]=e}))}return(0,b.Z)(e,[{key:"getOverlays",value:function(){return this._overlays}},{key:"getOverlayByIdentifier",value:function(e){return this._overlaysByIdentifier[e]}}]),e}()})),k_=M((function(){var e;Mv(),d_=av.Engine.Filters.OverlayFilter,e={},(0,g.Z)(e,d_.BLEND_MODES.NORMAL,"normal"),(0,g.Z)(e,d_.BLEND_MODES.OVERLAY,"overlay"),(0,g.Z)(e,d_.BLEND_MODES.HARD_LIGHT,"hard light"),(0,g.Z)(e,d_.BLEND_MODES.SOFT_LIGHT,"soft light"),(0,g.Z)(e,d_.BLEND_MODES.MULTIPLY,"multiply"),(0,g.Z)(e,d_.BLEND_MODES.DARKEN,"darken"),(0,g.Z)(e,d_.BLEND_MODES.LIGHTEN,"lighten"),(0,g.Z)(e,d_.BLEND_MODES.SCREEN,"screen"),(0,g.Z)(e,d_.BLEND_MODES.COLOR_BURN,"color burn"),f_=e})),w_=M((function(){Mv(),qv(),__(),Ke(),b_(),x_(),Kv(),o_(),k_(),p_=iv.flipObject(f_),g_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e;(0,_.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];(e=t.call.apply(t,[this].concat(r)))._frameManager=new c_(e._ui,e._getOptions("frame"));var a=e._getOptions("overlay");return a&&(e._overlayManager=new h_(e._ui,a)),e}return(0,b.Z)(n,[{key:"_deserializeSprite",value:function(e,t){return"frame"===t.type?this._deserializeFrame(e,t):"overlay"===t.type?this._deserializeOverlay(e,t):(0,f.Z)((0,p.Z)(n.prototype),"_deserializeSprite",this).call(this,e,t)}},{key:"_deserializeOperation",value:function(e){return"transform"===e.type?this._deserializeTransformOperation(e):(0,f.Z)((0,p.Z)(n.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeOrientationOperation",value:function(e){if(this._data.meta&&"html5"!==this._data.meta.platform)return(0,f.Z)((0,p.Z)(n.prototype),"_deserializeOrientationOperation",this).call(this,e);var t=e.options,i=t.rotation,r=t.flipHorizontally,o=t.flipVertically,a=90===i&&!r&&!o;return a|=90===i&&r&&o,a|=270===i&&!r&&!o,(a|=270===i&&r&&o)&&(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),(0,f.Z)((0,p.Z)(n.prototype),"_deserializeOrientationOperation",this).call(this,e)}},{key:"_deserializeTransformOperation",value:function(e){var t=this;return(0,f.Z)((0,p.Z)(n.prototype),"_deserializeCropOperation",this).call(this,e).then((function(e){if(e){var n=iv.Array.find(t._data.operations,(function(e){return"orientation"===e.type}));if(n){var i=n.options,r=i.rotation,o=i.flipHorizontally,a=i.flipVertically;90!==r&&270!==r||(!o&&a||o&&!a)&&(o=!o,a=!a),e.rotate(i.rotation),o&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation())),a&&(e.flip("vertical"),e.setRotation(-1*e.getRotation()))}return e}}))}},{key:"_deserializeFrame",value:function(e,t){var n=this,i=t.options.identifier,r=this._frameManager.getFrameByIdentifier(i);if(!r)return Re.warn("Deserializer","Unknown frame `".concat(i,"`. Skipping frame.")),Promise.resolve();var o=new u_(this._ui,r);return o.load().then((function(){n._editor.operations.getOrCreate("frame",{frame:o.getFrame()})}))}},{key:"_deserializeOverlay",value:function(e,t){var n=this,i=t.options,r=i.blendMode,o=i.intensity,a=i.identifier,s=this._overlayManager.getOverlayByIdentifier(a);if(!s)return Re.warn("Deserializer","Unknown overlay `".concat(a,"`. Skipping overlay.")),Promise.resolve();var l=this._editor.getUI().getAssetPath(s.image);return Oe.load(l).then((function(e){n._editor.operations.getOrCreate("overlay",{alpha:o,identifier:a,blendMode:parseInt(p_[r||s.blendMode],10),image:e})}))}},{key:"_createBrushForPath",value:function(e){var t=(0,f.Z)((0,p.Z)(n.prototype),"_createBrushForPath",this).call(this,e);return"undefined"!==typeof e.hardness&&t.hasOption("hardness")&&t.setHardness(e.hardness),t}},{key:"_deserializeSticker",value:function(e,t){var n=this,i=av.Operations.SpriteOperation,r=t.options,o=this._stickerManager.getStickerByIdentifier(r.identifier),a=Ev.getURLForSticker(o,"base");if(!o)return Re.warn("Deserializer","Unknown sticker `".concat(r.identifier,"`. Skipping sprite.")),Promise.resolve();var s=e.getInputDimensions(!1);return new Promise((function(t,l){var u=new window.Image;u.addEventListener("load",(function(){var n=i.StickerSprite.prototype.availableOptions.adjustments.structure,a=r.rotation,l=r.flipHorizontally,c=r.flipVertically,h={identifier:r.identifier,image:u,position:sv.fromObject(r.position),dimensions:sv.fromObject(r.dimensions).multiply(s.min()),rotation:a,flipHorizontally:l,flipVertically:c,adjustments:{}};"undefined"!==typeof r.adjustments&&["brightness","contrast","saturation"].forEach((function(e){"undefined"!==typeof r.adjustments[e]&&(h.adjustments[e]=r.adjustments[e]+n[e].default)})),"undefined"!==typeof r.tintColor&&"undefined"!==typeof o.tintMode&&(h.tintColor=tv.fromArray(r.tintColor),h.tintMode=o.tintMode),t(e.createSticker(h))})),u.crossOrigin=n._editor.getCrossOrigin(),u.src=n._editor.getUI().getAssetPath(a)}))}},{key:"_deserializeFilterOperation",value:function(e){var t=this,n=e.options;return this._filterManager.getFilterByIdentifier(n.identifier)?this._filterManager.instantiateFilterWithIdentifier(n.identifier).then((function(e){var i=t._editor.operations.getOrCreate("filter");if(i)return i.set({identifier:n.identifier,filter:e,intensity:n.intensity}),i})):(Re.warn("Deserializer","Unknown filter `".concat(n.identifier,"`")),Promise.resolve())}},{key:"_deserializeFocusOperation",value:function(e){var t=e.options,i=t.options;if("radial"!==t.type)return(0,f.Z)((0,p.Z)(n.prototype),"_deserializeFocusOperation",this).call(this,e);var r=this._editor.getImage(),o=r.width/r.height,a=i.start,s=i.end,l=i.gradientRadius,u=i.blurRadius,c=sv.fromObject(s).subtract(sv.fromObject(a)).multiply(o,1).len();return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:sv.fromObject(a),radius:c,gradientRadius:l,blurRadius:u}))}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,r=n.lineHeight,o=n.fontIdentifier,a=n.alignment,s=n.rotation,l=n.maxWidth,u=n.color,c=n.backgroundColor,h=new kv(this._ui),d=this._fontManager.getVariationByIdentifier(o);return d?h.setFonts([d.getFont()]):d=this._fontManager.getDefaultFont(),h.load().then((function(){var t=e.getInputDimensions(!1),o=l*t.min()/t.x,h=e.createText({fontSize:i,lineHeight:r,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),alignment:a,rotation:s,maxWidth:o,text:n.text,color:tv.fromArray(u),backgroundColor:tv.fromArray(c),position:sv.fromObject(n.position)});return h._edited=!0,h}))}}]),n}(e_),g_.version="2.0.0"})),S_=M((function(){a_(),k_(),m_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_serializeSticker",value:function(e,t){var i=e.getInputDimensions(!1),r=(0,f.Z)((0,p.Z)(n.prototype),"_serializeSticker",this).call(this,e,t);return"none"!==t.getTintMode()&&(r.options.tintColor=t.serializeOption("tintColor",!0)),r.options.dimensions=t.getDimensions().clone().divide(i.min()).toObject(),r.options.identifier=r.options.name,delete r.options.name,r}},{key:"_serializePath",value:function(e){var t=(0,f.Z)((0,p.Z)(n.prototype),"_serializePath",this).call(this,e),i=e.getBrush();return i.hasOption("hardness")&&(t.hardness=i.getOption("hardness")),t}},{key:"_serializeOperation",value:function(e,t){return"frame"===e.constructor.identifier?(this._serializeFrameOperation(e,t),null):"overlay"===e.constructor.identifier?(this._serializeOverlayOperation(e,t),null):(0,f.Z)((0,p.Z)(n.prototype),"_serializeOperation",this).call(this,e,t)}},{key:"_serializeFrameOperation",value:function(e,t){var n,i=t.filter((function(e){return"sprite"===e.type}));i.length?n=i.pop():(n={type:"sprite",options:{sprites:[]}},t.push(n)),n.options.sprites.push({type:"frame",options:this._getFrameOptions(e)})}},{key:"_serializeOverlayOperation",value:function(e,t){if(e.getIdentifier()){var n,i=t.filter((function(e){return"sprite"===e.type}));i.length?n=i.pop():(n={type:"sprite",options:{sprites:[]}},t.push(n)),n.options.sprites.push({type:"overlay",options:{identifier:e.getIdentifier(),intensity:e.getAlpha(),blendMode:f_[e.getBlendMode()]}})}}},{key:"_getFrameOptions",value:,{key:"_serializeOrientationOperation",value:function(e){var t=(0,f.Z)((0,p.Z)(n.prototype),"_serializeOrientationOperation",this).call(this,e);return 90!==t.options.rotation&&270!==t.options.rotation||(t.options.flipHorizontally=!t.options.flipHorizontally,t.options.flipVertically=!t.options.flipVertically),t}},{key:"_serializeTransformOperation",value:function(e){var t=this._editor.operations;if(t.exists("orientation")){e=e.clone();var i=t.get("orientation");e.rotate(-i.getRotation()),i.getFlipVertically()&&(e.flip("vertical"),e.setRotation(-1*e.getRotation())),i.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation()))}var r=(0,f.Z)((0,p.Z)(n.prototype),"_serializeTransformOperation",this).call(this,e);return r.type="transform",r}},{key:"_serializeText",value:function(e,t){var i=(0,f.Z)((0,p.Z)(n.prototype),"_serializeText",this).call(this,e,t),r=e.getInputDimensions(!1);return i.options.fontIdentifier=t.getFontIdentifier(),i.options.maxWidth=i.options.maxWidth*r.x/r.min(),delete i.options.fontFamily,i}},{key:"_serializeFilterOperation",value:function(e){var t=(0,f.Z)((0,p.Z)(n.prototype),"_serializeFilterOperation",this).call(this,e);return t?(t.options.identifier=t.options.name,delete t.options.name,t):null}},{key:"_serializeRadialFocusOperation",value:function(e){var t=(0,f.Z)((0,p.Z)(n.prototype),"_serializeRadialFocusOperation",this).call(this,e),i=t.options.options;return i.start=i.position,delete i.position,i.end={x:i.start.x+i.radius,y:i.start.y},delete i.radius,t}}]),n}(n_),m_.version="2.0.0"})),C_={};B(C_,{default:function(){return y_}});var T_,E_,D_,I_,R_,O_=M((function(){w_(),S_(),y_=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new m_(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new g_(this._editor,e).deserialize()}}]),e}(),y_.version="2.0.0"})),F_=M((function(){Mv(),Ke(),Uv(),Kv(),Nv(),w_(),"undefined"!==typeof av.Operations.SpriteOperation&&(T_=av.Operations.SpriteOperation.BrushSprite.Brush),E_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_deserializeSticker",value:function(e,t){var n=av.Operations.SpriteOperation,i=t.options,r=this._stickerManager.getStickerByIdentifier(i.identifier);if(!r)return Re.warn("Deserializer","Unknown sticker `".concat(i.identifier,"`. Skipping sprite.")),Promise.resolve();var o=r.images.mediaBase,a=Ev.getURLForSticker(r,"base"),s=o.rawData?o.uris[0]:this._editor.getUI().getAssetPath(a),l=e.getInputDimensions(!1);return Oe.load(s).then((function(t){var o=n.StickerSprite.prototype.availableOptions.adjustments.structure,a=i.rotation,s=i.flipHorizontally,u=i.flipVertically,c={identifier:i.identifier,image:t,position:sv.fromObject(i.position),dimensions:sv.fromObject(i.dimensions).multiply(l.min()),rotation:a||0,flipHorizontally:s,flipVertically:u,resizeMode:r.resizeMode||"keepAspect",adjustments:{}};return"undefined"!==typeof i.adjustments&&["brightness","contrast","saturation"].forEach((function(e){"undefined"!==typeof i.adjustments[e]&&(c.adjustments[e]=i.adjustments[e]+o[e].default)})),"undefined"!==typeof i.tintMode&&"undefined"!==typeof i.tintColor?(c.tintColor=tv.fromArray(i.tintColor.rgba),c.tintMode=i.tintMode):"undefined"!==typeof i.tintColor&&"undefined"!==typeof r.tintMode&&(c.tintColor=tv.fromArray(i.tintColor.rgba),c.tintMode=r.tintMode),"undefined"!==typeof i.alpha&&(c.alpha=i.alpha),e.createSticker(c)}))}},{key:"_deserializeTransformOperation",value:function(e){return(0,f.Z)((0,p.Z)(n.prototype),"_deserializeTransformOperation",this).call(this,e).then((function(e){if(e)return e._ratio=null,e}))}},{key:"_deserializeInputImage",value:function(){var e=this,t=this._data.image,n=t.data,i=t.type,r=t.uri;return n&&i&&(r="data:".concat(i,";base64,").concat(n)),r?Oe.load(r).then((function(t){e._editor.setImage(t)})):Promise.resolve()}},{key:"_deserializeAdjustmentsOperation",value:function(e){var t=av.Operations.AdjustmentsOperation;return(0,f.Z)((0,p.Z)(n.prototype),"_deserializeAdjustmentsOperation",this).call(this,e).then((function(n){if(!n)return null;var i=e.options,r={};return["gamma","whites","blacks","temperature"].forEach((function(e){if("undefined"!==typeof i[e]){var n=t.prototype.availableOptions[e],o=n.minValue,a=n.midValue,s=n.maxValue,l=i[e];l=l<0?a+(a-o)*l:a+(s-a)*l,r[e]=l}})),n.set(r),n}))}},{key:"_deserializeFocusOperation",value:function(e){var t=e.options.options;switch(e.options.type){case"radial":return(0,f.Z)((0,p.Z)(n.prototype),"_deserializeFocusOperation",this).call(this,e);case"linear":var i=t.start,r=t.end,o=t.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:sv.fromObject(i),controlPoint2:sv.fromObject(r),blurRadius:o}));case"mirrored":var a=t.start,s=t.end,l=t.size,u=t.gradientSize,c=t.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:sv.fromObject(a),end:sv.fromObject(s),size:l,gradientSize:u,blurRadius:c}));case"gaussian":var h=t.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:h}))}}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,r=n.lineHeight,o=n.fontIdentifier,a=n.alignment,s=n.rotation,l=n.maxWidth,u=n.color,c=n.backgroundColor,h=this._ui.getFontLoader(),d=this._fontManager.getVariationByIdentifier(o);return d?h.setFonts([d.getFont()]):d=this._fontManager.getDefaultVariation(),h.load().then((function(){var t=e.getInputDimensions(!1),o=l*t.min()/t.x,h=e.createText({fontSize:i,lineHeight:r,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),textMetrics:d.getTextMetrics(),alignment:a,rotation:s,maxWidth:o,text:n.text,color:tv.fromArray(u.rgba),backgroundColor:tv.fromArray(c.rgba),position:sv.fromObject(n.position)});return h._edited=!0,h}))}},{key:"_createBrushForPath",value:function(e){var t=e.brush,n=t.identifier,i=t.color,r=t.size,o=t.hardness,a={color:tv.fromArray(i.rgba),size:r};"undefined"!==typeof o&&(a.hardness=o);var s=this._brushManager.getBrushByIdentifier(n);if(s||(s=this._brushManager.getFirstBrush()),s.prototype&&s.prototype instanceof T_)return new s(a);var l=(0,C.Z)({},s);delete l.image;var u=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}(T_);return u.identifier=s.identifier,new u((0,C.Z)((0,C.Z)({},l),a))}},{key:"_deserializeFrame",value:function(e,t){var i=this;return(0,f.Z)((0,p.Z)(n.prototype),"_deserializeFrame",this).call(this,e,t).then((function(){var e=i._editor.operations.get("frame"),n=t.options,r=n.size,o=n.alpha,a=n.tintColor,s={};"undefined"!==typeof r&&(s.scale=r),"undefined"!==typeof o&&(s.alpha=o),"undefined"!==typeof a&&(s.tintColor=tv.fromArray(a.rgba)),e.set(s)}))}},{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,l=i.text,u=i.color,c=i.width,h=i.seed,d=i.inverted,f=i.identifier;f===av.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?f=av.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:f===av.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(f=av.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var p=new pv(this._ui,this._getOptions("textdesign")),g=new fv(this._ui,{fonts:Wg.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),m=e.constructor.TextDesignSprite.AssetManager,y=this._ui.getFontLoader(),v=new(p.getLayoutByIdentifier(f));return y.setFonts(g.getFonts()),m.setFonts((0,C.Z)((0,C.Z)({},m.getFonts()),g.getVariationsByIdentifier())),y.load().then((function(){var t=v.getImagePaths().map((function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}}));return m.loadImages(t).then((function(){return v.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:l,color:tv.fromArray(u.rgba),width:c,seed:h,inverted:d,layout:v})}))}))}}]),n}(g_),E_.version="3.0.0"})),A_=M((function(){Hy(),D_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}(Ht),D_.prototype.availableOptions={identifier:{type:"string",required:!0},defaultName:{type:"string",required:!0},ratio:{type:"*",required:!1,default:null},selected:{type:"boolean",required:!1},dimensions:{type:"vector2",required:!1},lockDimensions:{type:"boolean",required:!1,default:null},forceDimensions:{type:"boolean",required:!1,default:null}}})),P_=M((function(){Mv(),A_(),S_(),I_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"serialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.Z)((0,p.Z)(n.prototype),"serialize",this).call(this,t).then((function(t){return t.meta={platform:"html5",version:e._editor.getSDK().version,createdAt:iv.ISODateString(new Date)},t.image=t.inputImage,delete t.inputImage,t}))}},{key:"_serializeSticker",value:function(e,t){var i=(0,f.Z)((0,p.Z)(n.prototype),"_serializeSticker",this).call(this,e,t);return i.options.alpha=t.getAlpha(),i.options.tintColor&&(i.options.tintColor={rgba:i.options.tintColor}),i}},{key:"_serializeText",value:function(e,t){var i=(0,f.Z)((0,p.Z)(n.prototype),"_serializeText",this).call(this,e,t);return i.options.color={rgba:i.options.color},i.options.backgroundColor={rgba:i.options.backgroundColor},i.options.flipHorizontally=!1,i.options.flipVertically=!1,delete i.options.fontWeight,i}},{key:"_serializePath",value:function(e){var t=(0,f.Z)((0,p.Z)(n.prototype),"_serializePath",this).call(this,e);delete t.hardness,delete t.size,delete t.color;var i=e.getBrush();t.brush=i.serializeOptions(["identifier","size","color"],!0),"undefined"===typeof t.brush.identifier&&delete t.brush.identifier,t.brush.color={rgba:t.brush.color};var r=i.getOption("hardness");return"undefined"!==r&&(t.brush.hardness=r),t}},{key:"_serializeFrameOperation",value:function(e,t){(0,f.Z)((0,p.Z)(n.prototype),"_serializeFrameOperation",this).call(this,e,t);var i=t.filter((function(e){return"sprite"===e.type}));if(i.length){var r=i.pop().options.sprites.filter((function(e){return"frame"===e.type}))[0];e.getTintColor().equals(new tv(1,1,1,0))||(r.options.tintColor={rgba:e.serializeOption("tintColor",!0)});var o=e.serializeOptions(["scale","alpha"],!0);r.options=(0,C.Z)((0,C.Z)({},r.options),o),r.options.size=r.options.scale,delete r.options.scale}}},{key:"_serializeTransformOperation",value:function(e){var t,i=(0,f.Z)((0,p.Z)(n.prototype),"_serializeTransformOperation",this).call(this,e);e._ratio&&(t=e._ratio instanceof D_?e._ratio.getIdentifier():e._ratio.identifier,i.options.meta={identifier:t});return delete i.options.scale,i}},{key:"_serializeAdjustmentsOperation",value:function(e){var t=(0,f.Z)((0,p.Z)(n.prototype),"_serializeAdjustmentsOperation",this).call(this,e),i=e.availableOptions,r={};return["gamma","whites","blacks","temperature"].forEach((function(t){var n=i[t],o=e.getOption(t),a=n.minValue,s=n.midValue,l=n.maxValue;r[t]=o<=s?(o-a)/(s-a)-1:(o-s)/(l-s)})),t.options=(0,C.Z)((0,C.Z)({},t.options),r),t}},{key:"_serializeOperation",value:function(e,t){switch(e.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(e);case"linear-focus":return this._serializeLinearFocusOperation(e);case"blur":return this._serializeBlurOperation(e);default:return(0,f.Z)((0,p.Z)(n.prototype),"_serializeOperation",this).call(this,e,t)}}},{key:"_serializeMirroredFocusOperation",value:function(e){return{type:"focus",options:{type:"mirrored",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(e){var t=e.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return t.start=t.controlPoint1,delete t.controlPoint1,t.end=t.controlPoint2,delete t.controlPoint2,{type:"focus",options:{type:"linear",options:t}}}},{key:"_serializeBlurOperation",value:function(e){return{type:"focus",options:{type:"gaussian",options:e.serializeOptions(["blurRadius"],!0)}}}}]),n}(m_),I_.version="3.0.0"})),Z_={};B(Z_,{default:function(){return R_}});var M_,z_,B_,L_=M((function(){F_(),P_(),R_=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new I_(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new E_(this._editor,e).deserialize()}}]),e}(),R_.version="3.0.0"})),U_=M((function(){Mv(),Uv(),Nv(),F_(),M_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,l=i.text,u=i.color,c=i.width,h=i.seed,d=i.inverted,f=i.identifier;f===av.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?f=av.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:f===av.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(f=av.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var p=new pv(this._ui,this._getOptions("textdesign")),g=new fv(this._ui,{fonts:Wg.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),m=e.constructor.TextDesignSprite.AssetManager,y=this._ui.getFontLoader(),v=new(p.getLayoutByIdentifier(f));return y.setFonts(g.getFonts()),m.setFonts((0,C.Z)((0,C.Z)({},m.getFonts()),g.getVariationsByIdentifier())),y.load().then((function(){var t=v.getImagePaths().map((function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}}));return m.loadImages(t).then((function(){return v.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:l,color:tv.fromArray(u.rgba),width:c,seed:h,inverted:d,layout:v})}))}))}}]),n}(E_),M_.version="3.1.0"})),N_=M((function(){Mv(),P_(),z_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_serializeTextDesign",value:function(e,t){var n=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],!0);n.color={rgba:n.color};var i=t.getLayout();return i&&(n.identifier=i.constructor.identifier),{type:"textdesign",options:n}}}]),n}(I_),z_.version="3.1.0"})),H_={};B(H_,{default:function(){return B_}});var j_,W_,V_,G_=M((function(){U_(),N_(),B_=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new z_(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new M_(this._editor,e).deserialize()}}]),e}(),B_.version="3.1.0"})),q_=M((function(){Mv(),Uv(),Nv(),U_(),j_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,l=i.text,u=i.color,c=i.width,h=i.seed,d=i.inverted,f=i.identifier;f===av.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?f=av.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:f===av.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(f=av.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var p="padding"in i?i.padding/c:-1,g=new pv(this._ui,this._getOptions("textdesign")),m=new fv(this._ui,{fonts:Wg.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),y=e.constructor.TextDesignSprite.AssetManager,v=this._ui.getFontLoader(),_=new(g.getLayoutByIdentifier(f));return v.setFonts(m.getFonts()),y.setFonts((0,C.Z)((0,C.Z)({},y.getFonts()),m.getVariationsByIdentifier())),v.load().then((function(){var t=_.getImagePaths().map((function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}}));return y.loadImages(t).then((function(){return _.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:l,color:tv.fromArray(u.rgba),width:c,seed:h,inverted:d,layout:_,padding:p})}))}))}}]),n}(M_),j_.version="3.2.0"})),Y_=M((function(){N_(),W_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_serializeTextDesign",value:function(e,t){var n=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],!0);n.color={rgba:n.color};var i=t.getLayout();return i&&(n.identifier=i.constructor.identifier),n.padding*=n.width,{type:"textdesign",options:n}}}]),n}(z_),W_.version="3.2.0"})),X_={};B(X_,{default:function(){return V_}});var K_,J_,Q_,$_=M((function(){q_(),Y_(),V_=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new W_(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new j_(this._editor,e).deserialize()}}]),e}(),V_.version="3.2.0"})),eb=M((function(){q_(),K_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_deserializeOperation",value:,{key:"_deserializeOrientationOperation",value:function(e){var t=e.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(t),Promise.resolve(n)):Promise.resolve()}}]),n}(j_),K_.version="3.4.0"})),tb=M((function(){k_(),Y_(),J_=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_serializeOperation",value:function(e,t){return"artfilter"===e.constructor.identifier?this._serializeStyle(e):(0,f.Z)((0,p.Z)(n.prototype),"_serializeOperation",this).call(this,e,t)}},{key:"_serializeOrientationOperation",value:function(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeStyle",value:function(e){var t=e.getOptions(),n=t.identifier,i=t.intensity,r=t.blendMode,o=e.getStyleTransferModel().getOptions(),a=o.tileEdgeLength,s=o.overlappingFactor;return{type:"artFilter",options:{identifier:n,intensity:i,blendMode:f_[r],tileEdgeLength:a,overlappingFactor:s}}}}]),n}(W_),J_.version="3.4.0"})),nb={};B(nb,{default:function(){return Q_}});var ib,rb,ob,ab=M((function(){eb(),tb(),Q_=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new J_(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new K_(this._editor,e).deserialize()}}]),e}(),Q_.version="3.4.0"})),sb=M((function(){Mv(),Uv(),Nv(),eb(),ib=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,l=i.text,u=i.color,c=i.width,h=i.seed,d=i.inverted,f=i.identifier,p="padding"in i?i.padding/c:-1,g=new pv(this._ui,this._getOptions("textdesign")),m=new fv(this._ui,{fonts:Wg.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),y=e.constructor.TextDesignSprite.AssetManager,v=this._ui.getFontLoader(),_=new(g.getLayoutByIdentifier(f));return v.setFonts(m.getFonts()),y.setFonts((0,C.Z)((0,C.Z)({},y.getFonts()),m.getVariationsByIdentifier())),v.load().then((function(){var t=_.getImagePaths().map((function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}}));return y.loadImages(t).then((function(){return _.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:l,color:tv.fromArray(u.rgba),width:c,seed:h,inverted:d,layout:_,padding:p})}))}))}}]),n}(K_),ib.version="3.5.0"})),lb=M((function(){tb(),rb=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}(J_),rb.version="3.5.0"})),ub={};B(ub,{default:function(){return ob}});var cb,hb,db,fb=M((function(){sb(),lb(),ob=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new rb(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new ib(this._editor,e).deserialize()}}]),e}(),ob.version="3.5.0"})),pb=M((function(){Mv(),sb(),cb=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_deserializeAdjustmentsOperation",value:function(e){var t=av.Operations.AdjustmentsOperation;return(0,f.Z)((0,p.Z)(n.prototype),"_deserializeAdjustmentsOperation",this).call(this,e).then((function(n){if(!n)return null;var i=e.options,r="sharpness",o={};if("undefined"!==typeof i[r]){var a=t.prototype.availableOptions[r],s=a.minValue,l=a.midValue,u=a.maxValue,c=i[r];return c=c<0?l+(l-s)*c:l+(u-l)*c,o[r]=c,n.set(o),n}}))}}]),n}(ib),cb.version="3.6.0"})),gb=M((function(){lb(),hb=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_serializeAdjustmentsOperation",value:function(e){var t=(0,f.Z)((0,p.Z)(n.prototype),"_serializeAdjustmentsOperation",this).call(this,e),i="sharpness",r={},o=e.availableOptions[i],a=e.getOption(i),s=o.minValue,l=o.midValue,u=o.maxValue;return r[i]=a<=l?(a-s)/(l-s)-1:(a-l)/(u-l),t.options=(0,C.Z)((0,C.Z)({},t.options),r),t}}]),n}(rb),hb.version="3.6.0"})),mb={};B(mb,{default:function(){return db}});var yb,vb,_b,bb=M((function(){pb(),gb(),db=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new hb(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new cb(this._editor,e).deserialize()}}]),e}(),db.version="3.6.0"})),xb=M((function(){Hy(),pb(),yb=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"deserialize",value:function(){var e=this;return this._validateVersion().then((function(){return e._deserializeAssetLibrary()})).then((function(){return e._deserializeInputImage()})).then((function(){return e._deserializeOperations()}))}},{key:"_deserializeAssetLibrary",value:function(){var e=this;return new Promise((function(t,n){var i=e._data;if(i.assetLibrary){var r=i.assetLibrary.assets,o=[];for(var a in r)o.push(e._deserializeCustomAssets(a,r[a]));return Promise.all(o).then((function(){t()})).catch((function(e){console.error(e),n(e)}))}t()}))}},{key:"_deserializeCustomAssets",value:function(e,t){return"stickers"===e?this._deserializeCustomStickerAssets(t):Promise.reject(new Error("Unknown asset type: ".concat(e)))}},{key:"_deserializeCustomStickerAssets",value:function(e){var t=this,n="none",i=this._editor.getOptions().editor;i&&i.controlsOptions&&i.controlsOptions.sticker&&(n=i.controlsOptions.sticker.customStickerTintMode||"none");var r=e.map((function(e){return new Promise((function(i,r){var o=e.identifier,a=e.raster,s=void 0!==e.svg,l="data:".concat(a.type,";base64,").concat(a.data),u=new La;u.onload=function(){var r=t._editor.getSDK();(u=r.correctExifOrientation(u)).toDataURL&&(l=u.toDataURL());var a={data:"",width:1,height:1};a=t._stickerManager.renderStickerThumbnailFromImage(u);var c={identifier:o,defaultName:e.name||"",tintMode:n,images:{mediaBase:{uris:[l],rawData:!0,isSVG:s,width:u.width,height:u.height},mediaThumb:{uris:[a.data],rawData:!0,width:a.width,height:a.height}}};if(s){var h="data:image/svg+xml;base64,".concat(e.svg.data);c.images.mediaBase.uris.push(h)}i(c)},u.onerror=u.src=l}))}));return Promise.all(r).then((function(e){t._editor.getDynamicAssetsLibrary().setAssets("sticker",e),t._stickerManager.reload()}))}}]),n}(cb),yb.version="3.7.0"})),kb=M((function(){gb(),vb=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"serialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.Z)((0,p.Z)(n.prototype),"serialize",this).call(this,t).then(()}},{key:"_serializeAssetLibrary",value:function(e){if(!this._editor.getDynamicAssetsLibrary)return Promise.resolve(e);var t=this._editor.getDynamicAssetsLibrary(),n=this._serializeCustomStickerAssets(e,t);return 0===n.length||(e.assetLibrary={assets:{stickers:n}}),Promise.resolve(e)}},{key:"_serializeCustomStickerAssets",value:function(e,t){var n=t.getAssets("sticker");if(0===n.length)return[];var i=e.operations.filter((function(e){return"sprite"===e.type})).flatMap((function(e){return e.options.sprites})).filter((function(e){return"sticker"===e.type})).map((function(e){return e.options.identifier})),r={};return i.forEach((function(e){r[e]=!0})),n.filter((function(e){return r[e.identifier]})).map((function(e){var t=e.identifier,n=e.defaultName,i=e.images,r=i.mediaBase.uris[0],o=i.mediaBase.isSVG,a=/^data:(image\/(jpeg|png));base64,(.*)$/g.exec(r),s={identifier:t,name:n,raster:{type:a[1],data:a[3]}};return n&&(s.name=n),o&&(s.svg={data:i.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}),s}))}}]),n}(hb),vb.version="3.7.0"})),wb={};B(wb,{default:function(){return _b}});var Sb,Cb,Tb,Eb=M((function(){xb(),kb(),_b=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new vb(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new yb(this._editor,e).deserialize()}}]),e}(),_b.version="3.7.0"})),Db=M((function(){xb(),Sb=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}(yb),Sb.version="3.8.0"})),Ib=M((function(){kb(),Cb=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_serializeSticker",value:function(e,t){var i=(0,f.Z)((0,p.Z)(n.prototype),"_serializeSticker",this).call(this,e,t);return i.options.tintMode=t.getTintMode(),i}}]),n}(vb),Cb.version="3.8.0"})),Rb={};B(Rb,{default:function(){return Tb}});var Ob,Fb,Ab,Pb,Zb=M((function(){Db(),Ib(),Tb=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new Cb(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new Sb(this._editor,e).deserialize()}}]),e}(),Tb.version="3.8.0"})),Mb=M((function(){Mv(),Db(),Ob=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_deserializeTransformOperation",value:function(e){var t=this;return(0,f.Z)((0,p.Z)(n.prototype),"_deserializeCropOperation",this).call(this,e).then((function(e){if(e){var n=iv.Array.find(t._data.operations,(function(e){return"orientation"===e.type}));if(n){var i=n.options;e.rotate(i.rotation),i.flipHorizontally&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation())),i.flipVertically&&(e.flip("vertical"),e.setRotation(-1*e.getRotation()))}return e._ratio=null,e}}))}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,r=n.lineHeight,o=n.fontIdentifier,a=n.alignment,s=n.rotation,l=n.maxWidth,u=n.color,c=n.backgroundColor,h=this._ui.getFontLoader(),d=this._fontManager.getVariationByIdentifier(o);return d?h.setFonts([d.getFont()]):d=this._fontManager.getDefaultVariation(),h.load().then((function(){var t=e.getInputDimensions(!1),o=t.min(),h=t.x,f=t.y,p=l*o/h,g=i*o/f,m=e.createText({fontSize:g,lineHeight:r,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),textMetrics:d.getTextMetrics(),alignment:a,rotation:s,maxWidth:p,text:n.text,color:tv.fromArray(u.rgba),backgroundColor:tv.fromArray(c.rgba),position:sv.fromObject(n.position)});return m._edited=!0,m}))}}]),n}(Sb),Ob.version="3.9.0"})),zb=M((function(){A_(),Ib(),Fb=2*Math.PI,Ab=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_serializeTransformOperation",value:function(e){var t=this._editor.operations;if(t.exists("orientation")){e=e.clone();var n=t.get("orientation");n.getFlipVertically()&&(e.flip("vertical"),e.setRotation(-1*e.getRotation())),n.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation())),e.rotate(-n.getRotation())}var i=e.serializeOptions(["start","end","rotation","textureScale"],!0);i.rotation=(i.rotation+Fb)%Fb,1!==i.textureScale&&(i.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete i.textureScale;var r,o={type:"transform",options:i};e._ratio&&(r=e._ratio instanceof D_?e._ratio.getIdentifier():e._ratio.identifier,o.options.meta={identifier:r});return delete o.options.scale,o}},{key:"_serializeText",value:function(e,t){var i=e.getInputDimensions(!1),r=(0,f.Z)((0,p.Z)(n.prototype),"_serializeText",this).call(this,e,t);return r.options.fontSize=r.options.fontSize*i.y/i.min(),r}}]),n}(Cb),Ab.version="3.9.0"})),Bb={};B(Bb,{default:function(){return Pb}});var Lb,Ub,Nb,Hb=M((function(){Mb(),zb(),Pb=function(){function e(t){(0,_.Z)(this,e),this._editor=t}return(0,b.Z)(e,[{key:"serialize",value:function(){var e=new Ab(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new Ob(this._editor,e).deserialize()}}]),e}(),Pb.version="3.9.0"})),jb=M((function(){Mb(),Lb=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}(Ob),Lb.version="3.12.0"})),Wb=M((function(){zb(),Ub=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"_serializeCustomStickerAssets",value:function(e,t){var n=t.getAssets("sticker");if(0===n.length)return[];var i=e.operations.filter((function(e){return"sprite"===e.type})).flatMap((function(e){return e.options.sprites})).filter((function(e){return"sticker"===e.type})).map((function(e){return e.options.identifier})),r={};return i.forEach((),n.filter(().map((function(e){var t=e.identifier,n=e.defaultName,i=e.images,r=i.mediaBase.uris[0],o=i.mediaBase.isSVG,a=/^data:(image\/(jpeg|png|gif));base64,(.*)$/g.exec(r),s={identifier:t,name:n,raster:{type:a[1],data:a[3]}};return n&&(s.name=n),o&&(s.svg={data:i.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}),s}))}}]),n}(Ab),Ub.version="3.12.0"})),Vb={};B(Vb,{default:function(){return Nb}});var Gb=M((function(){jb(),Wb(),Nb=function(){eturn(0,b.Z)(e,[{key:"serialize",value:function(){var e=new Ub(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new Lb(this._editor,e).deserialize()}}]),e}(),Nb.version="3.12.0"})),qb=[];Object.freeze(qb);var Yb={};Object.freeze(Yb);var Xb={};function Kb(){return"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:Xb}tx=function(){};nction rx(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}ction lx(e){return e instanceof Set}unction cx(){return"function"===typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}nction fx(){return"function"===typeof Symbol&&Symbol.iterator||"@@iterator"}vx=),_x=ax("Atom",vx);function bx(e,t,n){void 0===t&&(t=tx),void 0===n&&(n=tx);var i=new vx(e);return i,t),Qk(i,n),i}ar kx={identity:xx,structural:default:shallow:,wx=ar Cx=r Dx={},Ix={};ion Zx(e){return e}function Mx(e){$b(e);var t=Fx(!0,(function(t,n,i,r,o){(function(e,t,n,i){var r=zw(e);if(dw(r)){var o=pw(r,{object:e,name:t,type:"add",newValue:n});if(!o)return;n=o.newValue}var a=r.values[t]=new vk(n,i,r.name+"."+t,!1);n=a.value,Object.defineProperty(e,t,t)),r.keys&&r.keys.push(t);!r,e,t,n)})(t,n,i?i.initializer?i.initializer.call(t):i.value:void 0,e)})),n=t;return n.enhancer=e,n}var zx={deep:!0,name:void 0,defaultDecorator:void 0};ject.freeze(zx),Object.freeze({deep:!1,name:void 0,defaultDecorator:void 0});var Ux=Mx(Px),Nx=Mx((),Hx=Mx(Zx),jx=Mx(();var Wx={box:shallowBox:function(e,t){return arguments.length>2&&Gx("shallowBox"),Vx.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&Gx("array");var n=Bx(t);return new kw(e,Lx(n),n.name)},shallowArray:function(e,t){return arguments.length>2&&Gx("shallowArray"),Vx.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&Gx("map");var n=Bx(t);return new Rw(e,Lx(n),n.name)},shallowMap:set:object:shallowObject:function(e,t){return"string"===typeof arguments[1]&&Gx("shallowObject"),Vx.object(e,{},{name:t,deep:!1})},ref:Hx,shallow:Nx,deep:Ux,struct:jx},Vx=bject.keys(Wx).forEach(();var qx,Yx,Xx=Fx(!1,(),Kx=Xx({equals:kx.structural}),Jx=Jx.struct=Kx,qx||(qx={})),Yx||(Yx={}));var Qx=function(e){this.cause=e};n ak(e){Ck.trackingDerivation=e}function sk(e){var t=Ck.allowStateReads;return Ck.allowStateReads=e,t}function lk(e){Ck.allowStateReads=e}ar ck=0,hk=1,dk=Object.getOwnPropertyDescriptor((function(){}),"name");dk&&dk.configurable;k=vx);vk.prototype[cx()]=vk.prototype.valueOf;var _k=ax("ObservableValue",vk),bk=function(){eturn e.prototype.onBecomeStale=e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=e.prototype.peek=e.prototype.set=e.prototype.trackAndCompute=e.prototype.computeValue=e.prototype.suspend=e.prototype.observe=function(e,t){var n=this,i=!0,r=void 0;return function(e,t){void 0===t&&(t=Yb);0;var n,i=t&&t.name||e.name||"Autorun@"+Jb();if(t.scheduler||t.delay){var r=t),o=!1;n=new Pk(i,(,t.onError,t.requiresObservable)}else n=new Pk(i,(,t.onError,t.requiresObservable);eturn n.schedule(),n.getDisposer()}(()},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=e.prototype.valueOf=e}();bk.prototype[cx()]=bk.prototype.valueOf;var xk=ax("ComputedValue",bk),kk=wk=!0,Sk=!1,Ck=);unction(){eturn e.prototype.onBecomeStale=e.prototype.schedule=e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=e.prototype.track=e.prototype.reportExceptionInDerivation=e.prototype.dispose=e.prototype.getDisposer=e.prototype.toString=e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"===typeof e[e.length-1]&&(n=e.pop());var i=cw(e);if(!i)return Qb(!1);i.isTracing===Yx.NONE&&console.log("[mobx.trace] '"+i.name+"' tracing enabled");i.isTracing=n?Yx.BREAK:Yx.LOG}(this,e)},e}(),Zk=function(e){return e()};r Bk=ax("Reaction",Pk); Hk={spyReportEnd:!0};k=.bound=var Jk=function(e){return e()};nction ew(e){var t=e.enforceActions,n=e.computedRequiresReaction,i=e.computedConfigurable,r=e.disableErrorBoundaries,o=e.arrayBuffer,a=e.reactionScheduler,s=e.reactionRequiresObservable,l=e.observableRequiresReaction;if(!0===e.isolateGlobalState&&((Ck.pendingReactions.length||Ck.inBatch||Ck.isRunningReactions)&&Qb("isolateGlobalState should be called before MobX is running any reactions"),Sk=!0,wk&&(0===--Kb().__mobxInstanceCount&&(Kb().__mobxGlobals=void 0),Ck=new kk)),void 0!==t){var u=void 0;switch(t){case!0:case"observed":u=!0;break;case!1:case"never":u=!1;break;case"strict":case"always":u="strict";break;default:Qb("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}Ck.enforceActions=u,Ck.allowStateChanges=!0!==u&&"strict"!==u}void 0!==n&&(Ck.computedRequiresReaction=!!n),void 0!==s&&(Ck.reactionRequiresObservable=!!s),void 0!==l&&(Ck.observableRequiresReaction=!!l,Ck.allowStateReads=!Ck.observableRequiresReaction),void 0!==i&&(Ck.computedConfigurable=!!i),void 0!==r&&(!0===r&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),Ck.disableErrorBoundaries=!!r),"number"===typeof o&&Tw(o),a&&a)}t.create(Error.prototype);var aw={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};unction lw(e,t,n){if(!t.recurseEverything&&!ow(e))return e;if("object"!==typeof e)return e;if(null===e)return null;if(e instanceof Date)return e;if(_k(e))return lw(e.get(),t,n);if(ow(e)&&function(e){Hw(e)?e.$mobx.getKeys():Fw(e)||Zw(e)?ux(e.keys()):Dw(e)?e.map(():Qb(!1)}(e),!0===t.detectCycles&&null!==e&&n.has(e))return n.get(e);if(Dw(e)||Array.isArray(e)){var i=sw(n,e,[],t),r=e.map(();i.length=r.length;for(var o=0,a=r.length;o<a;o++)i[o]=r[o];return i}if(Zw(e)||Object.getPrototypeOf(e)===Set.prototype){if(!1===t.exportMapsAsObjects){var s=sw(n,e,new Set,t);return e.forEach((function(e){s.add(lw(e,t,n))})),s}var l=sw(n,e,[],t);return e.forEach((),l}if(Fw(e)||Object.getPrototypeOf(e)===Map.prototype){if(!1===t.exportMapsAsObjects){var u=sw(n,e,new Map,t);return e.forEach((),u}var c=sw(n,e,{},t);return e.forEach((),c}var h=sw(n,e,{},t);for(var d in e)h[d]=lw(e[d],t,n);return h}function uw(e,t){var n;return"boolean"===typeof t&&(t={detectCycles:t}),t||(t=aw),t.detectCycles=void 0===t.detectCycles?!0===t.recurseEverything:!0===t.detectCycles,t.detectCycles&&(n=new Map),lw(e,t,n)}nction dw(e){return void 0!==e.interceptors&&e.interceptors.length>0}function fw(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),ex((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}vw=),_w=0,bw=function(){};!function(e,t){"undefined"!==typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):"undefined"!==typeof e.prototype.__proto__?e.prototype.__proto__=t:e.prototype=t}(bw,Array.prototype),Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(();var xw=),kw=bw);px(kw.prototype,(),Object.defineProperty(kw.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),rx(kw.prototype,mx(),"Array"),["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach((),["every","filter","forEach","map","some"].forEach((function(e){$b("function"===typeof Array.prototype[e],"Base function not defined on Array prototype: '"+e+"'"),rx(kw.prototype,e,()})),["reduce","reduceRight"].forEach((),kw.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var ww=Sw(0);1e3);var Ew=ax("ObservableArrayAdministration",xw);ar Iw={},Rw=function(){function e(e,t,n){if(void 0===t&&(t=Px),void 0===n&&(n="ObservableMap@"+Jb()),this.enhancer=t,this.name=n,this.$mobx=Iw,this._keysAtom=bx(this.name+".keys()"),"function"!==typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=e.prototype.has=e.prototype.set=e.prototype.delete=e.prototype._updateHasMapEntry=e.prototype._updateValue=e.prototype._addValue=e.prototype.get=e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=e.prototype.values=e.prototype.entries=e.prototype.forEach=e.prototype.merge=function(e){var t=this;return Fw(e)&&(e=e.toJS()),hw((function(){var n=mk(!0);try{ix(e)?Object.keys(e).forEach(():Array.isArray(e)?e.forEach(():sx(e)?e.constructor!==Map?Qb("Cannot initialize from classes that inherit from Map: "+e.constructor.name):e.forEach((function(e,n){return t.set(n,e)})):null!==e&&void 0!==e&&Qb("Cannot initialize map from "+e)}finally{yk(n)}})),this},e.prototype.clear=e.prototype.replace=Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e=this,t={};return this.forEach((function(n,i){return t["symbol"===typeof i?i:Ow(i)]=e.get(i)})),t},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=e.prototype.observe=function(e,t){return mw(this,e)},e.prototype.intercept=function(e){return fw(this,e)},e}();x(Rw.prototype,(function(){return this.entries()})),ox(Rw.prototype,mx(),"Map");var Fw=ax("ObservableMap",Rw),Aw={},Pw=function(){eturn e.prototype.dehanceValue=e.prototype.clear=e.prototype.forEach=Object.defineProperty(e.prototype,"size",{get:enumerable:!0,configurable:!0}),e.prototype.add=e.prototype.delete=e.prototype.has=e.prototype.entries=e.prototype.keys=function(){return this.values()},e.prototype.values=e.prototype.replace=e.prototype.observe=function(e,t){return mw(this,e)},e.prototype.intercept=function(e){return fw(this,e)},e.prototype.toJS=e.prototype.toString=e}();px(Pw.prototype,(),ox(Pw.prototype,mx(),"Set");var Zw=ax("ObservableSet",Pw),Mw=);ar Bw=Object.create(null),Lw=Object.create(null);ar Nw=ax("ObservableObjectAdministration",Mw);unction jw(e,t){if("object"===typeof e&&null!==e){if(Dw(e))return void 0!==t&&Qb(!1),e.$mobx.atom;if(Zw(e))return e.$mobx;if(Fw(e)){var n=e;return void 0===t?n._keysAtom:((i=n._data.get(t)||n._hasMap.get(t))||Qb(!1),i)}var i;if(Ox(e),t&&!e.$mobx&&e[t],Hw(e))return t?((i=e.$mobx.values[t])||Qb(!1),i):Qb(!1);if(_x(e)||xk(e)||Bk(e))return e}else if("function"===typeof e&&Bk(e.$mobx))return e.$mobx;return Qb(!1)}ar Vw=Object.prototype.toString;unction qw(e,t,n,i,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var o=typeof e;if("function"!==o&&"object"!==o&&"object"!=typeof t)return!1;e=Yw(e),t=Yw(t);var a=Vw.call(e);if(a!==Vw.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t)}var s="[object Array]"===a;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!("function"===typeof l&&l instanceof l&&"function"===typeof u&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var c=(i=i||[]).length;c--;)if(i[c]===e)return r[c]===t;if(i.push(e),r.push(t),s){if((c=e.length)!==t.length)return!1;for(;c--;)if(!qw(e[c],t[c],n-1,i,r))return!1}else{var h=Object.keys(e),d=void 0;if(c=h.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!Xw(t,d=h[c])||!qw(e[d],t[d],n-1,i,r))return!1}return i.pop(),r.pop(),!0}r Kw="$mobx";"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Wk,extras:{getDebugName:,$mobx:Kw});var Jw,Qw,$w,eS,tS,nS=((Jw=nS||{}).UNDO="undo",Jw.REDO="redo",Jw.DELETE="delete",Jw.BRING_TO_FRONT="bringtofront",Jw.EDIT="edit",Jw.DUPLICATE="duplicate",Jw.ADD="add",Jw.FLIP="flip",Jw.INVERT="invert",Jw.CLOSE="close",Jw.EXPORT="export",Jw),iS=function(e){return e.LIBRARY="library",e.TRANSFORM="transform",e.FILTER="filter",e.ADJUSTMENT="adjustment",e.FOCUS="focus",e.STICKER="sticker",e.TEXT="text",e.TEXT_DESIGN="textdesign",e.OVERLAY="overlay",e.FRAME="frame",e.BRUSH="brush",e.CUSTOM="customTool",e}(iS||{}),rS=((Qw=rS||{}).TEXT="text",Qw.CARD="card",Qw),oS=(($w=oS||{}).LARGE="large",$w.MEDIUM="medium",$w.SMALL="small",$w),aS=function(e){return e.ERROR="error",e.WARNING="warning",e.INFO="info",e.TEXT_EDIT="textEdit",e}(aS||{}),sS=(0,b.Z)((function e(){(0,_.Z)(this,e),this.enabled=!0,this.threshold=20,this.snapToHorizontalCenter=!0,this.snapToVerticalCenter=!0,this.snapToLeft=.1,this.snapToRight=.1,this.snapToTop=.1,this.snapToBottom=.1})),lS=(0,b.Z)((function e(){(0,_.Z)(this,e),this.enabled=!0,this.threshold=20,this.angles=[0,45,90,135,180,225,270,315]})),uS=(0,b.Z)((function e(){(0,_.Z)(this,e),this.position=new sS,this.rotation=new lS})),cS=((eS=cS||{}).CENTER="center",eS.TOP_LEFT="top-left",eS.TOP_RIGHT="top-right",eS.BOTTOM_LEFT="bottom-left",eS.BOTTOM_RIGHT="bottom-right",eS),hS=(0,b.Z)((function e(){(0,_.Z)(this,e),this.watermarkURI="",this.alignment="top-right",this.inset=.05,this.size=.2})),dS=dS||{}),fS=function(e){return e.IMAGE="image",e.DATA_URL="data-url",e.BLOB="blob",e.MSBLOB="ms-blob",e}(fS||{}),pS=pS||{}),gS=((tS=gS||{}).BMP="image/bmp",tS.GIF="image/gif",tS.ICO="image/x-icon",tS.JPEG="image/jpeg",tS.PNG="image/png",tS.SVG="image/svg+xml",tS.TIFF="image/tiff",tS.WEBP="image/webp",tS),mS=mS||{}),yS=Object.values(mS).reduce((,{}),vS=vS||{}),_S=(0,b.Z)((function e(){(0,_.Z)(this,e),this.categories=[],this.flattenCategories=!1,this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeAdjustmentButton","separator"]},"items"]})),bS=function(e){return e.RemoveFilterButton="removeFilterButton",e.FilterIntensitySlider="filterIntensitySlider",e.Expandable="expandable",e.Separator="separator",e.Items="items",e}(bS||{}),xS=function(e){return e.FilterIntensity="filterIntensity",e}(xS||{}),kS=(0,b.Z)((function e(){(0,_.Z)(this,e),this.categories=[],this.flattenCategories=!1,this.categoryHeaderType="card",this.enablePreviewThumbnails=!1,this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFilterButton","filterIntensitySlider","separator"]},"items"],this.basicUIToolControlBarTabsOrder=["filterIntensity"]}));function wS(e){return void 0!==e.lightColor}function SS(e){return void 0!==e.lutURI}var CS,TS,ES,DS,IS,RS=((CS=RS||{}).Desert="imgly_duotone_desert",CS.Peach="imgly_duotone_peach",CS.Clash="imgly_duotone_clash",CS.Plum="imgly_duotone_plum",CS.Breezy="imgly_duotone_breezy",CS.DeepBlue="imgly_duotone_deepblue",CS.Frog="imgly_duotone_frog",CS.Sunset="imgly_duotone_sunset",CS.AD1920="imgly_lut_ad1920",CS.Greyed="imgly_lut_bw",CS.Dusty="imgly_lut_x400",CS.Litho="imgly_lut_litho",CS.Sepia="imgly_lut_sepiahigh",CS.Weathered="imgly_lut_plate",CS.HardStuff="imgly_lut_sin",CS.Polaroid="imgly_lut_blues",CS.Sunny70s="imgly_lut_front",CS.Oldtimer="imgly_lut_texas",CS.Inferno="imgly_lut_celsius",CS.Snappy="imgly_lut_cool",CS.Chestnut="imgly_lut_chest",CS.Softy="imgly_lut_winter",CS.Pebble="imgly_lut_kdynamic",CS.Moss="imgly_lut_fall",CS.Lemon="imgly_lut_lenin",CS.GreenGap="imgly_lut_pola669",CS.Colla="imgly_lut_elder",CS.Solanus="imgly_lut_orchid",CS.Kalmen="imgly_lut_bleached",CS.Joran="imgly_lut_bleachedblue",CS.Levante="imgly_lut_breeze",CS.Zephyr="imgly_lut_blueshadows",CS.Golden="imgly_lut_sunset",CS.LowFire="imgly_lut_eighties",CS.Sunrise="imgly_lut_evening",CS.FlatBlack="imgly_lut_k2",CS.Pumpkin="imgly_lut_nogreen",CS.Ancient="imgly_lut_ancient",CS.Candy="imgly_lut_cottoncandy",CS.Classic="imgly_lut_classic",CS.Colorful="imgly_lut_colorful",CS.Creamy="imgly_lut_creamy",CS.Fixie="imgly_lut_fixie",CS.Food="imgly_lut_food",CS.Fridge="imgly_lut_fridge",CS.Glam="imgly_lut_glam",CS.Gobblin="imgly_lut_gobblin",CS.Hicon="imgly_lut_highcontrast",CS.HighCarb="imgly_lut_highcarb",CS.K1="imgly_lut_k1",CS.K6="imgly_lut_k6",CS.Keen="imgly_lut_keen",CS.Lomo="imgly_lut_lomo",CS.Lomo100="imgly_lut_lomo100",CS.Lucid="imgly_lut_lucid",CS.Mellow="imgly_lut_mellow",CS.Neat="imgly_lut_neat",CS.Pale="imgly_lut_pale",CS.Pitched="imgly_lut_pitched",CS.PolaSX="imgly_lut_polasx",CS.Pro400="imgly_lut_pro400",CS.Quozi="imgly_lut_quozi",CS.Settled="imgly_lut_settled",CS.Seventies="imgly_lut_seventies",CS.Soft="imgly_lut_soft",CS.Steel="imgly_lut_steel",CS.Summer="imgly_lut_summer",CS.Tender="imgly_lut_tender",CS.Twilight="imgly_lut_twilight",CS),OS=((TS=OS||{}).DuoTone="imgly_filter_category_duotone",TS.BW="imgly_filter_category_bw",TS.Vintage="imgly_filter_category_vintage",TS.Smooth="imgly_filter_category_smooth",TS.Cold="imgly_filter_category_cold",TS.Warm="imgly_filter_category_warm",TS.Legacy="imgly_filter_category_legacy",TS),FS=function(e){return e.RemoveFocusButton="removeFocusButton",e.FocusIntensitySlider="focusIntensitySlider",e.Expandable="expandable",e.Separator="separator",e.Items="items",e}(FS||{}),AS=function(e){return e.FocusIntensity="focusIntensity",e}(AS||{}),PS=(0,b.Z)((function e(){(0,_.Z)(this,e),this.items=[],this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFocusButton","focusIntensitySlider","separator"]},"items"],this.basicUIToolControlBarTabsOrder=["focusIntensity"]})),ZS=function(e){return e.RADIAL="radial",e.LINEAR="linear",e.MIRRORED="mirrored",e.GAUSSIAN="gaussian",e}(ZS||{}),MS=MS||{}),zS=function(e){return e.FrameSize="frameSize",e.FrameOpacity="frameOpacity",e.FrameColor="frameColor",e}(zS||{}),BS=(0,b.Z)((function e(){(0,_.Z)(this,e),this.items=[],this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeFrameButton","frameOpacitySlider","frameSizeSlider","frameColorList","separator"]},"items"],this.basicUIToolControlBarTabsOrder=["frameOpacity","frameSize","frameColor"]})),LS=function(){function e(t){(0,_.Z)(this,e),this.name=t.name,this.coverImageUrl=t.coverImageUrl}return(0,b.Z)(e,[{key:"loadCoverImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"anonymous";return new Promise((function(n,i){var r=new Image;r.addEventListener("load",(function(){n(r)})),r.addEventListener("error",(function(){i(new Error("Failed to load image at ".concat(e.coverImage)))})),r.crossOrigin=t,r.src=e.coverImageUrl,e.coverImage=r}))}}]),e}(),US=function(){function e(t){(0,_.Z)(this,e),this.title=t.title,this.category=t.category||t.title,this.thumbUrl=t.thumbUrl,this.rawUrl=t.rawUrl,this.authorName=t.authorName,this.authorAvatar=t.authorAvatar}return(0,b.Z)(e,[{key:"loadThumbImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"anonymous";return new Promise((function(n,i){var r=new Image;r.addEventListener("load",(function(){n(r)})),r.addEventListener("error",(function(){i(new Error("Failed to load image at ".concat(e.thumbUrl)))})),r.crossOrigin=t,r.src=e.thumbUrl,e.thumbImage=r}))}},{key:"getThumbImage",value:function(){return this.thumbUrl}}]),e}(),NS=function(){function e(){(0,_.Z)(this,e)}return(0,b.Z)(e,[{key:"getData",value:function(e){return new Promise((function(t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="json",i.onload=function(){var e=i.status;200===e?t(i.response):n(new Error("HTTP Status ".concat(e)))},i.send()}))}}]),e}(),HS=function(){function e(){(0,_.Z)(this,e)}return(0,b.Z)(e,[{key:"loadJSON",value:function(e){return(new NS).getData(e)}},{key:"getCategories",value:,{key:"searchImages",value:]),e}(),jS=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n,[{key:"loadData",value:function(){var e=this;return this.data?Promise.resolve(this.data):this.loadJSON("https://img.ly/static/libraries/unsplash/metadata.json").then((function(t){return"string"===typeof t&&(t=JSON.parse(t)),e.data=t,t}))}},{key:"getCategories",value:function(){return this.loadData().then((function(e){return e.categories.map(()}))}},{key:"searchImages",value:function(e){return this.loadData().then((function(t){return t.images.filter((function(t){for(var n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").split(/\s+/),i=0;i<n.length;i+=1){var r=n[i];if(!new RegExp(r,"i").test(t.title))return!1}return!0})).map((function(e){return new US(e)}))}))}}]),n}(HS),WS=function(e){return e.UploadImageButton="uploadImageButton",e.OpenWebcamButton="openWebcamButton",e.SearchFieldInput="searchFieldInput",e.Separator="separator",e.Items="items",e}(WS||{}),VS=(0,b.Z)((function e(){(0,_.Z)(this,e),this.enableWebcam=!1,this.enableUpload=!1,this.provider=jS,this.flattenCategories=!1,this.categoryHeaderType="card",this.advancedUIToolControlBarOrder=["searchFieldInput","uploadImageButton","openWebcamButton","separator","items"]})),GS=((ES=GS||{}).RemoveOverlayButton="removeOverlayButton",ES.OverlayOpacitySlider="overlayOpacitySlider",ES.OverlayBlendModeCarousel="overlayBlendModeCarousel",ES.Expandable="expandable",ES.Separator="separator",ES.Items="items",ES),qS=function(e){return e.OverlayOpacity="overlayOpacity",e.OverlayBlendMode="overlayBlendMode",e}(qS||{}),YS=(0,b.Z)((function e(){(0,_.Z)(this,e),this.items=[],this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeOverlayButton","overlayBlendModeCarousel","overlayOpacitySlider","separator"]},"items"],this.basicUIToolControlBarTabsOrder=["overlayBlendMode","overlayOpacity"]})),XS=((DS=XS||{}).NORMAL="normal",DS.OVERLAY="overlay",DS.SOFT_LIGHT="softLight",DS.HARD_LIGHT="hardLight",DS.MULTIPLY="multiply",DS.DARKEN="darken",DS.COLOR_BURN="colorBurn",DS.SCREEN="screen",DS.LIGHTEN="lighten",DS),KS=((IS=KS||{}).Bokeh="imgly_overlay_bokeh",IS.Chop="imgly_overlay_chop",IS.Clouds="imgly_overlay_clouds",IS.Golden="imgly_overlay_golden",IS.Grain="imgly_overlay_grain",IS.Hearts="imgly_overlay_hearts",IS.LightLeak1="imgly_overlay_lightleak1",IS.LightLeak2="imgly_overlay_lightleak2",IS.Metal="imgly_overlay_metal",IS.Mosaic="imgly_overlay_mosaic",IS.Painting="imgly_overlay_painting",IS.Paper="imgly_overlay_paper",IS.Rain="imgly_overlay_rain",IS.Vintage="imgly_overlay_vintage",IS.Wall1="imgly_overlay_wall1",IS.Wall2="imgly_overlay_wall2",IS.Wood="imgly_overlay_wood",IS),JS=function(e){return e.UploadStickerButton="uploadStickerButton",e.StickerOpacitySlider="stickerOpacitySlider",e.StickerColorList="stickerColorList",e.Separator="separator",e.Items="items",e}(JS||{}),QS=function(e){return e.StickerColor="stickerColor",e.StickerOpacity="stickerOpacity",e}(QS||{}),$S=(0,b.Z)((function e(){(0,_.Z)(this,e),this.categories=[],this.canvasActions=["bringtofront","flip","duplicate","delete"],this.flattenCategories=!1,this.categoryHeaderType="card",this.enableCustomUpload=!0,this.customStickerResizeMode="keepAspect",this.customStickerTintMode="none",this.advancedUIToolControlBarOrder=["uploadStickerButton","stickerOpacitySlider","stickerColorList","separator","items"],this.basicUIToolControlBarTabsOrder=["stickerColor","stickerOpacity"]})),eC=eC||{}),tC=function(e){return e.FontSize="fontSize",e.TextAligment="textAlignment",e.TextColor="textColor",e.BackgroundColor="backgroundColor",e.LineSpacing="lineSpacing",e}(tC||{}),nC=(0,b.Z)((function e(){(0,_.Z)(this,e),this.fonts=[],this.canvasActions=["edit","bringtofront","duplicate","delete"],this.allowEmojis=!1,this.disableAutoScaling=!1,this.addDefaultTextOnEnter=!0,this.advancedUIToolControlBarOrder=["newTextButton","fontFamilyDropdown",{type:"inline",children:["fontSizeInput","textAlignmentList"]},"separator","textColorList","backgroundColorList","separator","lineSpacingSlider"],this.basicUIToolControlBarTabsOrder=["fontSize","textAlignment","textColor","backgroundColor","lineSpacing"]}));r oC,aC=aC||{}),sC=function(e){return e.BrushSize="brushSize",e.BrushHardness="brushHardness",e.BrushColor="brushColor",e}(sC||{}),lC=(0,b.Z)((function e(){(0,_.Z)(this,e),this.defaultSize=.05,this.defaultHardness=.5,this.advancedUIToolControlBarOrder=[{type:"expandable",children:["removeBrushButton","separator"]},"brushHardnessSlider","brushSizeSlider","brushColorList"],this.basicUIToolControlBarTabsOrder=["brushColor","brushSize","brushHardness"]})),uC=function(e){return e.NewTextDesignButton="newTextDesignButton",e.ShuffleLayoutButton="shuffleLayoutButton",e.TextDesignColorList="textDesignColorList",e.Separator="separator",e.Items="items",e}(uC||{}),cC=(0,b.Z)((function e(){(0,_.Z)(this,e),this.items=[],this.canvasActions=["edit","bringtofront","invert","duplicate","delete"],this.allowEmojis=!1,this.addDefaultTextOnEnter=!0,this.advancedUIToolControlBarOrder=["newTextDesignButton","shuffleLayoutButton","textDesignColorList","separator","items"]})),hC=hC||{}),dC=dC||{}),fC=(0,b.Z)((function e(){(0,_.Z)(this,e),this.categories=[],this.enableRotation=!0,this.enableFlip=!0,this.flattenCategories=!1,this.categoryHeaderType="text",this.advancedUIToolControlBarOrder=["resetTransformButton","keepResolutionCheckbox","cropSizeInput","separator","items"],this.basicUIToolControlBarTabsOrder=["cropSize","flipRotate","resolution"]})),pC=((oC=pC||{}).CommonCategory="imgly_transforms_common",oC.FacebookCategory="imgly_transforms_facebook",oC.TwitterCategory="imgly_transforms_twitter",oC.InstagramCategory="imgly_transforms_instagram",oC.Custom="imgly_transform_common_custom",oC.Square="imgly_transform_common_square",oC.ThreeByFour="imgly_transform_common_3",oC.FourByThree="imgly_transform_common_4",oC.NineBySixteen="imgly_transform_common_9",oC.SixteenByNine="imgly_transform_common_16",oC.FacebookPost="imgly_transform_facebook_post",oC.FacebookProfile="imgly_transform_facebook_profile",oC.FacebookTitle="imgly_transform_facebook_title",oC.InstagramLandscape="imgly_transform_instagram_landscape",oC.InstagramPortrait="imgly_transform_instagram_portrait",oC.InstagramSquare="imgly_transform_instagram_square",oC.InstagramStory="imgly_transform_instagram_story",oC.TwitterPost="imgly_transform_twitter_post",oC.TwitterProfile="imgly_transform_twitter_profile",oC.TwitterTitle="imgly_transform_twitter_title",oC),gC=function(e){return e.EXPORT="export",e.CLOSE="close",e.HISTORY_UNDO="historyUndo",e.HISTORY_REDO="historyRedo",e.HISTORY_CHANGE="historyChange",e.EDITOR_READY="editorReady",e.ERROR_IMAGE_LOADING="errorImageLoading",e.IMAGE_LOAD="imageLoad",e.TOOL_ENTER="toolEnter",e.STICKER_UPLOAD_ADD="stickerUploadAdd",e.ERROR_WEBGL_CONTEXT_LOST="errorWebGLContextLost",e.CROP_DIMENSIONS_CHANGE="cropDimensionsChange",e}(gC||{}),mC=function(){function e(){(0,_.Z)(this,e),this.events={}}return(0,b.Z)(e,[{key:"addListener",value:function(e,t){return(this.events[e]||(this.events[e]=[])).push(t),this}},{key:"removeListener",value:function(e,t){var n=this.events[e];if(!n)return this;var i=n.lastIndexOf(t);return-1===i||n.splice(i,1),this}},{key:"removeAllListeners",value:function(e){return this.events[e]=void 0,this}},{key:"on",value:function(e,t){return this.addListener(e,t)}},{key:"off",value:,{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=this.events[e];return!(!r||!r.length)&&(r.slice(0).forEach((),!0)}}]),e}();W();var yC=function(){return"undefined"!==typeof window&&window.navigator&&window.navigator.userAgent||""},vC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yC();return-1!==e.indexOf("Edge")},_C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yC();return!!e.match(/msie|trident/i)},bC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yC();return!!e.match(/windows/i)},xC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yC();return-1!==e.indexOf("Safari")&&-1===e.indexOf("Chrome")},kC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yC();return!!e.match(/iP(hone|od|ad)|AppleWebKit/)},wC=function(){if("undefined"===typeof document)return!1;var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl"),n=t&&t instanceof WebGLRenderingContext;return r(e),n};ar CC=function(){function e(t,n){(0,_.Z)(this,e),"number"===typeof t?(this.x=t,this.y=n):(this.x=t.x,this.y=t.y)}return(0,b.Z)(e,[{key:"magnitude",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalized",get:function(){var t=this.magnitude;return new e(this.x/t,this.y/t)}},{key:"floored",get:function(){return new e(Math.floor(this.x),Math.floor(this.y))}},{key:"rounded",get:function(){return new e(Math.round(this.x),Math.round(this.y))}},{key:"min",get:function(){return Math.min(this.x,this.y)}},{key:"max",get:function(){return Math.max(this.x,this.y)}},{key:"abs",get:,{key:"swapped",get:function(){return new e(this.y,this.x)}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"add",value:function(t,n){return"number"===typeof t?new e(this.x+t,this.y+n):new e(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t,n){return"number"===typeof t?new e(this.x-t,this.y-n):new e(this.x-t.x,this.y-t.y)}},{key:"multiply",value:function(t,n){return"number"===typeof t?new e(this.x*t,this.y*(void 0===n?t:n)):new e(this.x*t.x,this.y*t.y)}},{key:"divide",value:function(t,n){return"number"===typeof t?new e(this.x/t,this.y/(void 0===n?t:n)):new e(this.x/t.x,this.y/t.y)}},{key:"equals",value:,{key:"clamp",value:function(t,n){return new e(Math.max(t.x,Math.min(n.x,this.x)),Math.max(t.y,Math.min(n.y,this.y)))}}],[{key:"fromSize",value:function(t){return new e(t.width,t.height)}},{key:"distance",value:,{key:"dot",value:,{key:"lerp",value:function(t,n,i){var r=Math.min(Math.max(i,0),1);return new e(t.x*r+n.x*(1-r),t.y*r+n.y*(1-r))}},{key:"lerpUnclamped",value:function(t,n,i){return new e(t.x*i+n.x*(1-i),t.y*i+n.y*(1-i))}},{key:"proportionalFit",value:function(e,t){return e.x/e.y>t.x/t.y?t.multiply(e.y/t.y):t.multiply(e.x/t.x)}}]),e}(),TC=CC;TC.ZERO=new CC(0,0),TC.ONE=new CC(1,1),TC.UP=new CC(0,1),TC.DOWN=new CC(0,-1),TC.RIGHT=new CC(1,0),TC.LEFT=new CC(-1,0);var EC,DC=((EC=DC||{})[EC.EditorContainer=0]="EditorContainer",EC[EC.ToolControlBar=1]="ToolControlBar",EC[EC.ToolControlBarExpandableControls=2]="ToolControlBarExpandableControls",EC[EC.CanvasContainer=3]="CanvasContainer",EC[EC.Canvas=4]="Canvas",EC[EC.MainBarButtonClose=5]="MainBarButtonClose",EC[EC.MainBarButtonExport=6]="MainBarButtonExport",EC[EC.MainBarButtonUndo=7]="MainBarButtonUndo",EC[EC.MainBarButtonRedo=8]="MainBarButtonRedo",EC[EC.MainBarButtonZoom=9]="MainBarButtonZoom",EC[EC.Tooltip=10]="Tooltip",EC[EC.Cursor=11]="Cursor",EC[EC.CursorContainer=12]="CursorContainer",EC[EC.NummericInput=13]="NummericInput",EC[EC.BrushSize=14]="BrushSize",EC[EC.BrushHardness=15]="BrushHardness",EC[EC.Dialog=16]="Dialog",EC[EC.DialogBody=17]="DialogBody",EC[EC.CardContainer=18]="CardContainer",EC[EC.CategoryItemsContainer=19]="CategoryItemsContainer",EC[EC.ToolbarItem=20]="ToolbarItem",EC[EC.ColorList=21]="ColorList",EC[EC.NoResult=22]="NoResult",EC[EC.CardLabel=23]="CardLabel",EC[EC.CardAvatar=24]="CardAvatar",EC[EC.Dropdown=25]="Dropdown",EC[EC.DropdownList=26]="DropdownList",EC[EC.TextAlignment=27]="TextAlignment",EC[EC.Sprite=28]="Sprite",EC[EC.SpriteTopLeft=29]="SpriteTopLeft",EC[EC.SpriteTopRight=30]="SpriteTopRight",EC[EC.SpriteBottomLeft=31]="SpriteBottomLeft",EC[EC.SpriteBottomRight=32]="SpriteBottomRight",EC[EC.Knob=33]="Knob",EC[EC.TextWidth=34]="TextWidth",EC[EC.ToolbarWrapper=35]="ToolbarWrapper",EC[EC.MainCanvasActionBar=36]="MainCanvasActionBar",EC[EC.SpriteActions=37]="SpriteActions",EC[EC.CarouselSlider=38]="CarouselSlider",EC[EC.CropMask=39]="CropMask",EC[EC.FlipRotateControls=40]="FlipRotateControls",EC[EC.RotateSlider=41]="RotateSlider",EC[EC.CropTopRight=42]="CropTopRight",EC[EC.CropTopLeft=43]="CropTopLeft",EC[EC.CropBottomRight=44]="CropBottomRight",EC[EC.CropBottomLeft=45]="CropBottomLeft",EC[EC.Watermark=46]="Watermark",EC[EC.Toolbar=47]="Toolbar",EC[EC.CanvasBar=48]="CanvasBar",EC[EC.Checkbox=49]="Checkbox",EC[EC.Focus=50]="Focus",EC[EC.SnappingLine=51]="SnappingLine",EC[EC.LibraryUploadButton=52]="LibraryUploadButton",EC[EC.LibraryWebcamButton=53]="LibraryWebcamButton",EC[EC.ZoomLevel=54]="ZoomLevel",EC[EC.BasicToolControlBar=55]="BasicToolControlBar",EC[EC.SliderTrack=56]="SliderTrack",EC[EC.SliderLabel=57]="SliderLabel",EC),IC={};for(var RC in DC){var OC=DC[RC];"string"===typeof OC&&(IC[OC]=OC)}var FC,AC=IC;Boolean("undefined"!==typeof window&&(null==(FC=window.Cypress)?void 0:FC.env("pesdk")));V();var PC={};function ZC(){if("undefined"===typeof navigator)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}B(PC,{isMobile:function(){return ZC}});var MC=zC=("undefined"!==typeof window&&window.performance.now.bind(window.performance),function(){function e(t){(0,_.Z)(this,e),this.text=t,this.lastOffsetWidth=-1;var n="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(t)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.collapsible.style.cssText=n,this.expandable.style.cssText=n,this.expandableInner.style.cssText=n,this.collapsibleInner.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}return(0,b.Z)(e,[{key:"getElement",value:function(){return this.element}},{key:"setFont",value:function(e){this.element.style.cssText="max-width:none;\n      min-width:20px;\n      min-height:20px;\n      display:inline-block;\n      overflow:hidden;\n      position:absolute;\n      width:auto;\n      margin:0;\n      padding:0;\n      top:-999px;\n      white-space:nowrap;\n      font-synthesis:none;\n      font:".concat(e,";")}},{key:"getWidth",value:function(){return this.element.offsetWidth}},{key:"setWidth",value:,{key:"onResize",value:function(e){var t=this,n=function(){t.onScroll(e)};this.collapsible.addEventListener("scroll",n),this.expandable.addEventListener("scroll",n),this.reset()}},{key:"reset",value:function(){var e=this.getWidth(),t=e+100;return this.expandableInner.style.width="".concat(t,"px"),this.expandable.scrollLeft=t,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==e&&(this.lastOffsetWidth=e,!0)}},{key:"onScroll",value:function(e){this.reset()&&null!==this.element.parentNode&&e(this.lastOffsetWidth)}}]),e}()),BC=function(){function e(t){(0,_.Z)(this,e),this.font=(0,C.Z)({fontFamily:"normal",fontStyle:"normal",fontWeight:"normal",fontStretch:"normal"},t)}return(0,b.Z)(e,[{key:"load",value:function(t,n){var i=this,r="BESbswy",o=null,a=n||e.DEFAULT_TIMEOUT,s=this.getTime();return new Promise((function(t,n){if(e.supportsNativeFontLoading()&&!e.hasSafari10Bug()){var l=new Promise((function(e,t){!function o(){i.getTime()-s>=a?t(new Error(a+"ms timeout exceeded")):document.fonts.load(i.getStyle('"'.concat(i.font.fontFamily,'"')),r).then((function(t){t.length>=1?e():setTimeout(o,25)}),n)}()})),u=new Promise((function(e,t){o=setTimeout((,a)}));Promise.race([u,l]).then((,n)}else{var c=new zC(r),h=new zC(r),d=new zC(r),f=-1,p=-1,g=-1,m=-1,y=-1,v=-1,_=document.createElement("div"),b=x=function(){if((-1!==f&&-1!==p||-1!==f&&-1!==g||-1!==p&&-1!==g)&&(f===p||f===g||p===g)){if(e.hasWebKitFallbackBug()&&(f===m&&p===m&&g===m||f===y&&p===y&&g===y||f===v&&p===v&&g===v))return;b(),clearTimeout(o),t(i)}};_.dir="ltr",c.setFont(i.getStyle("sans-serif")),h.setFont(i.getStyle("serif")),d.setFont(i.getStyle("monospace")),_.appendChild(c.getElement()),_.appendChild(h.getElement()),_.appendChild(d.getElement()),document.body.appendChild(_),m=c.getWidth(),y=h.getWidth(),v=d.getWidth();!function e(){if(i.getTime()-s>=a)b(),n(new Error("".concat(a," ms timeout exceeded")));else{var t=document.hidden;!0!==t&&void 0!==t||(f=c.getWidth(),p=h.getWidth(),g=d.getWidth(),x()),o=setTimeout(e,50)}}(),c.onResize((function(e){f=e,x()})),c.setFont(i.getStyle('"'.concat(i.font.fontFamily,'",sans-serif'))),h.onResize((function(e){p=e,x()})),h.setFont(i.getStyle('"'.concat(i.font.fontFamily,'",serif'))),d.onResize((),d.setFont(i.getStyle('"'.concat(i.font.fontFamily,'",monospace')))}}))}},{key:"getStyle",value:function(t){return[this.font.fontStyle,this.font.fontWeight,e.supportsStretch()?this.font.fontStretch:"","100px",t].join(" ")}},{key:"getTime",value:function(){return(new Date).getTime()}}],[{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getNavigatorVendor",value:function(){return window.navigator.vendor}},{key:"hasWebKitFallbackBug",value:function(){if(null===e.HAS_WEBKIT_FALLBACK_BUG){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(e.getUserAgent());e.HAS_WEBKIT_FALLBACK_BUG=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)}return e.HAS_WEBKIT_FALLBACK_BUG}},{key:"hasSafari10Bug",value:function(){if(null===e.HAS_SAFARI_10_BUG)if(e.supportsNativeFontLoading()&&/Apple/.test(e.getNavigatorVendor())){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(e.getUserAgent());e.HAS_SAFARI_10_BUG=!!t&&parseInt(t[1],10)<603}else e.HAS_SAFARI_10_BUG=!1;return e.HAS_SAFARI_10_BUG}},{key:"supportsNativeFontLoading",value:function(){return null===e.SUPPORTS_NATIVE_FONT_LOADING&&(e.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),e.SUPPORTS_NATIVE_FONT_LOADING}},{key:"supportsStretch",value:function(){if(null===e.SUPPORTS_STRETCH){var t=document.createElement("div");try{t.style.font="condensend 100px sans-serif"}catch(Qw){e.SUPPORTS_STRETCH=!1}e.SUPPORTS_STRETCH=""!==t.style.font}return e.SUPPORTS_STRETCH}}]),e}(),LC=BC;LC.HAS_WEBKIT_FALLBACK_BUG=null,LC.HAS_SAFARI_10_BUG=null,LC.SUPPORTS_STRETCH=null,LC.SUPPORTS_NATIVE_FONT_LOADING=null,LC.DEFAULT_TIMEOUT=6e4;var UC=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);eturn(0,b.Z)(n,[{key:"needsResize",value:function(){var e=this.resizedDimensions();return e.x<this.image.width||e.y<this.image.height}},{key:"resizedDimensions",value:function(){var e=this.options,t={width:this.image.width,height:this.image.height},n=TC.fromSize(t),i=TC.fromSize(t),r=e.maxMegaPixels;if(r){var o=1e6*(ZC()?r.mobile:r.desktop),a=t.width/t.height,s=t.height/t.width,l=new TC(Math.floor(Math.sqrt(o*a)),Math.floor(Math.sqrt(o*s)));l.x<=t.width&&l.y<=t.height&&(n=l)}var u=e.maxDimensions;u&&(u.height<t.height||u.width<t.width)&&(i=new TC(u.width,u.height));var c=new TC(Math.min(n.x,i.x),Math.min(n.y,i.y));return TC.proportionalFit(c,TC.fromSize(t)).floored}},{key:"downscaleIfNecessary",value:function(){var e=this.resizedDimensions();if(!(e.x<this.image.width||e.y<this.image.height))return this.image;this.emit("beganImageDownscaling",this.image);var t=document.createElement("canvas");t.width=e.x,t.height=e.y;var n=t.getContext("2d"),i=this.image;return n.imageSmoothingQuality="high",n.drawImage(i,0,0,i.width,i.height,0,0,e.x,e.y),this.emit("imageDownscaled",{width:e.x,height:e.y}),t}},{key:"downscaleImageIfNecessary",value:function(){var e=this.image,t=this.resizedDimensions();if(!(t.x<this.image.width||t.y<this.image.height))return e;this.emit("beganImageDownscaling",e);var n=new Image;return n.width=t.x,n.height=t.y,n.src=e.src,this.emit("imageDownscaled",{width:t.x,height:t.y}),n}}]),n}(mC),NC=function(e){return function(t){(function(e){return"Enter"===e.key})(t)&&e(t)}},HC=function(e){return function(t){(function(e){return"Escape"===e.key})(t)&&e(t)}};function jC(e){var t=e),n="/"===e.substr(-1);return e=e.split("/").filter(Boolean),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}var WC=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jC(t.join("/"))},VC=U(G()),GC=function(e,t,n){var i=(0,m.Z)(n,2),r=i[0],o=i[1],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=e[t];if(s){if(s<r)return console.error("".concat(t," must be greater than or equal to ").concat(r)),r;if(s>o)return console.error("".concat(t," must be less than or equal to ").concat(o)),o}return s||a},qC=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1,1],i=e[t],r=!0;return i&&i.forEach((function(e){e<0&&(console.error("".concat(e," in ").concat(t," must be greater than or equal to 0")),r=!1),e>1&&(console.error("".concat(e," in ").concat(t," must be less than or equal to 1")),r=!1)})),r&&i||n},YC=function(e){return.08*e},XC=KC={},JC=function(e){var t=e.src,n=e.crossOrigin,i=e.key,r=e.resolve,o=e.reject;KC[i]=t;var a=new Image;a.onload=function(){KC[i]===t&&(r(a),delete KC[i])},a.onerror=function(e){KC[i]===t&&(o(e),delete KC[i])},a.crossOrigin=n,a.src=t},QC=(0,S.Z)(Error)),$C=function(){return Math.max(window.devicePixelRatio||1,1)},eT=new RegExp(/\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69(?:\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68\u200D(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDDD1\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC68(?:\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|(?:\uD83D[\uDC67-\uDC69])\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]\uFE0F)|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83C\uDFF3\uFE0F\u200D\u26A7|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF]))\u200D[\u2695\u2696\u2708]\uFE0F|\uD83D\uDC69\u200D(?:\uD83D[\uDC67\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D\uDC3B\u200D\u2744|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83E\uDDD1\u200D[\u2695\u2696\u2708]\uFE0F|(?:\uD83D[\uDC68\uDC69])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D[\u2695\u2696\u2708]\uFE0F)|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDC66\uDC67\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC3\uDFC7]|\uD83D[\uDC43\uDC4A-\uDC4C\uDC4F\uDC50\uDC66-\uDC69\uDC6B-\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270C\u270D]|\uD83C[\uDFC2\uDFC4\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC46-\uDC49\uDC4D\uDC4E\uDD74\uDD75\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9\u23EA\u23ED-\u23EF\u23F1-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7\u26F8\u26FA\u26FD\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2753\u2757\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF0D-\uDF0F\uDF15\uDF1C\uDF21\uDF24-\uDF2C\uDF36\uDF78\uDF7D\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFA7\uDFAC-\uDFAE\uDFC6\uDFCD\uDFCE\uDFD4-\uDFE0\uDFED\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC08\uDC15\uDC1F\uDC26\uDC3F\uDC41\uDC53\uDC6A\uDC7D\uDCA3\uDCB0\uDCB3\uDCBB\uDCBF\uDCCB\uDCDA\uDCDF\uDCE4-\uDCE6\uDCEA-\uDCED\uDCF7\uDCF9-\uDCFB\uDCFD\uDD08\uDD0D\uDD12\uDD13\uDD49\uDD4A\uDD50-\uDD67\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDE10\uDE87\uDE8D\uDE91\uDE94\uDE98\uDEAD\uDEB2\uDEB9\uDEBA\uDEBC\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|[\u23E9-\u23F3\u23F8-\u23FA\u25FB-\u25FE\u2614\u2615\u267F\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]/g),tT=function(e){return e.replace(eT,"")},nT=iT=function(e){return e instanceof HTMLImageElement},rT=[{identifier:"basics",name:"Basics",items:[{identifier:"brightness"},{identifier:"contrast"},{identifier:"saturation"},{identifier:"gamma"}]},{identifier:"refinements",name:"Refinements",items:[{identifier:"clarity"},{identifier:"shadows"},{identifier:"highlights"},{identifier:"exposure"},{identifier:"blacks"},{identifier:"whites"},{identifier:"temperature"},{identifier:"sharpness"}]}],oT=[{identifier:"imgly_filter_category_duotone",name:"DuoTone",thumbnailURI:"./categories/duotone.jpg",items:[{identifier:"imgly_duotone_desert",name:"Desert",thumbnailURI:"./items/imgly_duotone_desert.jpg",lightColor:"#e1de9a",darkColor:"#cb2129",defaultIntensity:.5},{identifier:"imgly_duotone_peach",name:"Peach",thumbnailURI:"./items/imgly_duotone_peach.jpg",lightColor:"#e9abb8",darkColor:"#0040ff",defaultIntensity:.5},{identifier:"imgly_duotone_clash",name:"Clash",thumbnailURI:"./items/imgly_duotone_clash.jpg",lightColor:"#f41a0f",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_plum",name:"Plum",thumbnailURI:"./items/imgly_duotone_plum.jpg",lightColor:"#74d7ff",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_breezy",name:"Breezy",thumbnailURI:"./items/imgly_duotone_breezy.jpg",lightColor:"#68fdff",darkColor:"#c20000",defaultIntensity:.5},{identifier:"imgly_duotone_deepblue",name:"Deep Blue",thumbnailURI:"./items/imgly_duotone_deepblue.jpg",lightColor:"#2de9eb",darkColor:"#58007c",defaultIntensity:.5},{identifier:"imgly_duotone_frog",name:"Frog",thumbnailURI:"./items/imgly_duotone_frog.jpg",lightColor:"#5bff60",darkColor:"#7f23a9",defaultIntensity:.5},{identifier:"imgly_duotone_sunset",name:"Sunset",thumbnailURI:"./items/imgly_duotone_sunset.jpg",lightColor:"#f8ea46",darkColor:"#c400be",defaultIntensity:.5}]},{identifier:"imgly_filter_category_bw",name:"B & W",thumbnailURI:"./categories/b&w.jpg",items:[{identifier:"imgly_lut_ad1920",name:"1920 A.D.",thumbnailURI:"./items/imgly_lut_ad1920.jpg",lutURI:"./items/imgly_lut_ad1920_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bw",name:"Greyed",thumbnailURI:"./items/imgly_lut_bw.jpg",lutURI:"./items/imgly_lut_bw_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_x400",name:"Dusty",thumbnailURI:"./items/imgly_lut_x400.jpg",lutURI:"./items/imgly_lut_dusty_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_litho",name:"Litho",thumbnailURI:"./items/imgly_lut_litho.jpg",lutURI:"./items/imgly_lut_litho_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sepiahigh",name:"Sepia",thumbnailURI:"./items/imgly_lut_sepiahigh.jpg",lutURI:"./items/imgly_lut_sepia_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_plate",name:"Weathered",thumbnailURI:"./items/imgly_lut_plate.jpg",lutURI:"./items/imgly_lut_weathered_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sin",name:"Hard Stuff",thumbnailURI:"./items/imgly_lut_sin.jpg",lutURI:"./items/imgly_lut_hard_stuff_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filter_category_vintage",name:"Vintage",thumbnailURI:"./categories/vintage.jpg",items:[{identifier:"imgly_lut_blues",name:"Polaroid",thumbnailURI:"./items/imgly_lut_blues.jpg",lutURI:"./items/imgly_lut_polaroid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_front",name:"Sunny 70s",thumbnailURI:"./items/imgly_lut_front.jpg",lutURI:"./items/imgly_lut_sunny_70s_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",name:"Oldtimer",thumbnailURI:"./items/imgly_lut_texas.jpg",lutURI:"./items/imgly_lut_oldtimer_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",name:"Inferno",thumbnailURI:"./items/imgly_lut_celsius.jpg",lutURI:"./items/imgly_lut_inferno_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",name:"Snappy",thumbnailURI:"./items/imgly_lut_cool.jpg",lutURI:"./items/imgly_lut_snappy_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_smooth",name:"Smooth",thumbnailURI:"./categories/smooth.jpg",items:[{identifier:"imgly_lut_chest",name:"Chestnut",thumbnailURI:"./items/imgly_lut_chest.jpg",lutURI:"./items/imgly_lut_chestnut_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",name:"Softy",thumbnailURI:"./items/imgly_lut_winter.jpg",lutURI:"./items/imgly_lut_softly_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_kdynamic",name:"Pebble",thumbnailURI:"./items/imgly_lut_kdynamic.jpg",lutURI:"./items/imgly_lut_pebble_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fall",name:"Moss",thumbnailURI:"./items/imgly_lut_fall.jpg",lutURI:"./items/imgly_lut_moss_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lenin",name:"Lemon",thumbnailURI:"./items/imgly_lut_lenin.jpg",lutURI:"./items/imgly_lut_lemon_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pola669",name:"Green Gap",thumbnailURI:"./items/imgly_lut_pola669.jpg",lutURI:"./items/imgly_lut_green_gap_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_cold",name:"Cold",thumbnailURI:"./categories/cold.jpg",items:[{identifier:"imgly_lut_elder",name:"Colla",thumbnailURI:"./items/imgly_lut_elder.jpg",lutURI:"./items/imgly_lut_colla_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_orchid",name:"Solanus",thumbnailURI:"./items/imgly_lut_orchid.jpg",lutURI:"./items/imgly_lut_solanus_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleached",name:"Kalmen",thumbnailURI:"./items/imgly_lut_bleached.jpg",lutURI:"./items/imgly_lut_kalmen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleachedblue",name:"Joran",thumbnailURI:"./items/imgly_lut_bleachedblue.jpg",lutURI:"./items/imgly_lut_joran_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_breeze",name:"Levante",thumbnailURI:"./items/imgly_lut_breeze.jpg",lutURI:"./items/imgly_lut_levante_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_blueshadows",name:"Zephyr",thumbnailURI:"./items/imgly_lut_blueshadows.jpg",lutURI:"./items/imgly_lut_zephyr_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_warm",name:"Warm",thumbnailURI:"./categories/warm.jpg",items:[{identifier:"imgly_lut_sunset",name:"Golden",thumbnailURI:"./items/imgly_lut_sunset.jpg",lutURI:"./items/imgly_lut_golden_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_eighties",name:"Low Fire",thumbnailURI:"./items/imgly_lut_eighties.jpg",lutURI:"./items/imgly_lut_low_fire_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_evening",name:"Sunrise",thumbnailURI:"./items/imgly_lut_evening.jpg",lutURI:"./items/imgly_lut_sunrise_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k2",name:"Flat Black",thumbnailURI:"./items/imgly_lut_k2.jpg",lutURI:"./items/imgly_lut_flat_black_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",name:"Pumpkin",thumbnailURI:"./items/imgly_lut_nogreen.jpg",lutURI:"./items/imgly_lut_pumpkin_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_legacy",name:"Legacy",thumbnailURI:"./categories/legacy.jpg",items:[{identifier:"imgly_lut_ancient",name:"Ancient",thumbnailURI:"./items/imgly_lut_ancient.jpg",lutURI:"./items/imgly_lut_ancient_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_cottoncandy",name:"Candy",thumbnailURI:"./items/imgly_lut_cottoncandy.jpg",lutURI:"./items/imgly_lut_cottoncandy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_classic",name:"Classic",thumbnailURI:"./items/imgly_lut_classic.jpg",lutURI:"./items/imgly_lut_classic_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_colorful",name:"Colorful",thumbnailURI:"./items/imgly_lut_colorful.jpg",lutURI:"./items/imgly_lut_colorful_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_creamy",name:"Creamy",thumbnailURI:"./items/imgly_lut_creamy.jpg",lutURI:"./items/imgly_lut_creamy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fixie",name:"Fixie",thumbnailURI:"./items/imgly_lut_fixie.jpg",lutURI:"./items/imgly_lut_fixie_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",name:"Food",thumbnailURI:"./items/imgly_lut_food.jpg",lutURI:"./items/imgly_lut_food_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fridge",name:"Fridge",thumbnailURI:"./items/imgly_lut_fridge.jpg",lutURI:"./items/imgly_lut_fridge_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",name:"Glam",thumbnailURI:"./items/imgly_lut_glam.jpg",lutURI:"./items/imgly_lut_glam_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_gobblin",name:"Gobblin",thumbnailURI:"./items/imgly_lut_gobblin.jpg",lutURI:"./items/imgly_lut_gobblin_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcontrast",name:"Hicon",thumbnailURI:"./items/imgly_lut_highcontrast.jpg",lutURI:"./items/imgly_lut_highcontrast_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcarb",name:"High Carb",thumbnailURI:"./items/imgly_lut_highcarb.jpg",lutURI:"./items/imgly_lut_highcarb_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k1",name:"K1",thumbnailURI:"./items/imgly_lut_k1.jpg",lutURI:"./items/imgly_lut_k1_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k6",name:"K6",thumbnailURI:"./items/imgly_lut_k6.jpg",lutURI:"./items/imgly_lut_k6_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_keen",name:"Keen",thumbnailURI:"./items/imgly_lut_keen.jpg",lutURI:"./items/imgly_lut_keen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lomo",name:"Lomo",thumbnailURI:"./items/imgly_lut_lomo.jpg",lutURI:"./items/imgly_lut_lomo_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",name:"Lomo 100",thumbnailURI:"./items/imgly_lut_lomo100.jpg",lutURI:"./items/imgly_lut_lomo100_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lucid",name:"Lucid",thumbnailURI:"./items/imgly_lut_lucid.jpg",lutURI:"./items/imgly_lut_lucid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_mellow",name:"Mellow",thumbnailURI:"./items/imgly_lut_mellow.jpg",lutURI:"./items/imgly_lut_mellow_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",name:"Neat",thumbnailURI:"./items/imgly_lut_neat.jpg",lutURI:"./items/imgly_lut_neat_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pale",name:"Pale",thumbnailURI:"./items/imgly_lut_pale.jpg",lutURI:"./items/imgly_lut_pale_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pitched",name:"Pitched",thumbnailURI:"./items/imgly_lut_pitched.jpg",lutURI:"./items/imgly_lut_pitched_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_polasx",name:"Pola SX",thumbnailURI:"./items/imgly_lut_polasx.jpg",lutURI:"./items/imgly_lut_polasx_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pro400",name:"Pro 400",thumbnailURI:"./items/imgly_lut_pro400.jpg",lutURI:"./items/imgly_lut_pro400_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_quozi",name:"Quozi",thumbnailURI:"./items/imgly_lut_quozi.jpg",lutURI:"./items/imgly_lut_quozi_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_settled",name:"Settled",thumbnailURI:"./items/imgly_lut_settled.jpg",lutURI:"./items/imgly_lut_settled_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_seventies",name:"Seventies",thumbnailURI:"./items/imgly_lut_seventies.jpg",lutURI:"./items/imgly_lut_seventies_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_soft",name:"Soft",thumbnailURI:"./items/imgly_lut_soft.jpg",lutURI:"./items/imgly_lut_soft_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_steel",name:"Steel",thumbnailURI:"./items/imgly_lut_steel.jpg",lutURI:"./items/imgly_lut_steel_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_summer",name:"Summer",thumbnailURI:"./items/imgly_lut_summer.jpg",lutURI:"./items/imgly_lut_summer_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_tender",name:"Tender",thumbnailURI:"./items/imgly_lut_tender.jpg",lutURI:"./items/imgly_lut_tender_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_twilight",name:"Twilight",thumbnailURI:"./items/imgly_lut_twilight.jpg",lutURI:"./items/imgly_lut_twilight_5_5_128.png",defaultIntensity:1}]}],aT=[{identifier:"radial",thumbnailURI:"./items/radial.png"},{identifier:"mirrored",thumbnailURI:"./items/mirrored.png"},{identifier:"linear",thumbnailURI:"./items/linear.png"},{identifier:"gaussian",thumbnailURI:"./items/gaussian.png"}],sT=[{identifier:"imgly_font_open_sans_bold",fontFamily:"Open Sans",fontWeight:"bold",fontURI:"./fonts/imgly_font_open_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}},{identifier:"imgly_font_aleo_bold",fontFamily:"Aleo",fontWeight:"bold",fontURI:"./fonts/imgly_font_aleo_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}},{identifier:"imgly_font_amaticsc",fontFamily:"Amatic SC",fontWeight:"normal",fontURI:"./fonts/imgly_font_amaticsc.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}},{identifier:"imgly_font_archivo_black",fontFamily:"Archivo",fontWeight:"normal",fontURI:"./fonts/imgly_font_archivo_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}},{identifier:"imgly_font_bungee_inline",fontFamily:"Bungee Inline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_bungee_inline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}},{identifier:"imgly_font_fira_sans_regular",fontFamily:"Fira Sans",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}},{identifier:"imgly_font_campton_bold",fontFamily:"Campton Book",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_campton_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}},{identifier:"imgly_font_carter_one",fontFamily:"Carter One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_carter_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}},{identifier:"imgly_font_codystar",fontFamily:"Codystar",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_codystar.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}},{identifier:"imgly_font_galano_grotesque_bold",fontFamily:"Galano Grotesque",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_galano_grotesque_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_krona_one",fontFamily:"Krona One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_krona_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}},{identifier:"imgly_font_kumar_one_outline",fontFamily:"Kumar One Outline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_kumar_one_outline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}},{identifier:"imgly_font_lobster",fontFamily:"Lobster",fontWeight:"normal",fontURI:"./fonts/imgly_font_lobster.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}},{identifier:"imgly_font_molle",fontFamily:"Molle",fontWeight:"normal",fontStyle:"italic",fontURI:"./fonts/imgly_font_molle.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}},{identifier:"imgly_font_monoton",fontFamily:"Monoton",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_monoton.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}},{identifier:"imgly_font_nixie_one",fontFamily:"Nixie One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_nixie_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}},{identifier:"imgly_font_notable",fontFamily:"Notable",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_notable.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}},{identifier:"imgly_font_ostrich_sans_black",fontFamily:"Ostrich",fontWeight:800,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontFamily:"Ostrich",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_oswald_semi_bold",fontFamily:"Oswald SemiBold",googleFamily:"Oswald",fontWeight:600,fontStyle:"normal",fontURI:"./fonts/imgly_font_oswald_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}},{identifier:"imgly_font_palanquin_dark_semi_bold",fontFamily:"Palanquin Dark SemiBold",googleFamily:"Palanquin Dark",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_palanquin_dark_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}},{identifier:"imgly_font_poppins",fontFamily:"Poppins",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_poppins.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}},{identifier:"imgly_font_permanent_marker",fontFamily:"Permanent Marker",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_permanent_marker.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}},{identifier:"imgly_font_roboto_black_italic",fontFamily:"Roboto Black",fontWeight:"bold",fontStyle:"italic",googleFamily:"Roboto",fontURI:"./fonts/imgly_font_roboto_black_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontFamily:"Roboto Light",googleFamily:"Roboto",fontWeight:300,fontStyle:"italic",fontURI:"./fonts/imgly_font_roboto_light_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sancreek",fontFamily:"Sancreek",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sancreek.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}},{identifier:"imgly_font_stint_ultra_expanded",fontFamily:"Stint Ultra Expanded",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_stint_ultra_expanded.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}},{identifier:"imgly_font_trash_hand",fontFamily:"Trash Hand",fontWeight:"normal",fontURI:"./fonts/imgly_font_trash_hand.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}},{identifier:"imgly_font_vt323",fontFamily:"VT323",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_vt323.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_yeseva_one",fontFamily:"Yeseva One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_yeseva_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}},{identifier:"imgly_font_abril_fatface_regular",fontFamily:"Abril Fatface",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_abril_fatface_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}},{identifier:"imgly_font_amberlight",fontFamily:"Amberlight",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_amberlight.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}},{identifier:"imgly_font_montserrat_light",fontFamily:"Montserrat Light",googleFamily:"Montserrat",fontWeight:300,fontStyle:"normal",fontURI:"./fonts/imgly_font_montserrat_light.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}},{identifier:"imgly_font_handycheera_regular",fontFamily:"Handycheera",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_handycheera_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}},{identifier:"imgly_font_ostrich_sans_heavy",fontFamily:"Ostrich",fontWeight:900,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_heavy.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}},{identifier:"imgly_font_petit_formal_script",fontFamily:"Petit Formal Script",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_petit_formal_script.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}},{identifier:"imgly_font_rasa_500",fontFamily:"Rasa",fontWeight:500,fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_500.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_regular",fontFamily:"Rasa",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_regular.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_roboto_black",fontFamily:"Roboto Black",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light",fontFamily:"Roboto Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_light.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sue_ellen_francisco",fontFamily:"Sue Ellen Francisco",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sue_ellen_francisco.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}},{identifier:"imgly_font_ultra",fontFamily:"Ultra",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_ultra.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}},{identifier:"imgly_font_wolesbro",fontFamily:"Wolesbro",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_wolesbro.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:925,descender:-575}}],lT=["imgly_font_open_sans_bold","imgly_font_aleo_bold","imgly_font_amaticsc","imgly_font_archivo_black","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_carter_one","imgly_font_codystar","imgly_font_fira_sans_regular","imgly_font_galano_grotesque_bold","imgly_font_krona_one","imgly_font_kumar_one_outline","imgly_font_lobster","imgly_font_molle","imgly_font_monoton","imgly_font_nixie_one","imgly_font_notable","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_oswald_semi_bold","imgly_font_palanquin_dark_semi_bold","imgly_font_poppins","imgly_font_permanent_marker","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sancreek","imgly_font_stint_ultra_expanded","imgly_font_trash_hand","imgly_font_vt323","imgly_font_yeseva_one"],uT=["imgly_font_abril_fatface_regular","imgly_font_amberlight","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_galano_grotesque_bold","imgly_font_handycheera_regular","imgly_font_montserrat_light","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_heavy","imgly_font_permanent_marker","imgly_font_petit_formal_script","imgly_font_rasa_500","imgly_font_rasa_regular","imgly_font_roboto_black","imgly_font_roboto_light","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sue_ellen_francisco","imgly_font_ultra","imgly_font_wolesbro"],cT=[{identifier:"imgly_frame_dia",name:"Dia",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_left.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_right.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",name:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",name:"Black Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",name:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",name:"Low Poly",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}}],hT=[{identifier:"imgly_overlay_golden",name:"Golden",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_golden.jpg",thumbnailURI:"./items/imgly_overlay_golden_thumb.jpg"},{identifier:"imgly_overlay_lightleak1",name:"Lightleak",defaultBlendMode:"screen",overlayURI:"./items/imgly_overlay_lightleak1.jpg",thumbnailURI:"./items/imgly_overlay_lightleak1_thumb.jpg"},{identifier:"imgly_overlay_rain",name:"Rain",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_rain.jpg",thumbnailURI:"./items/imgly_overlay_rain_thumb.jpg"},{identifier:"imgly_overlay_mosaic",name:"Mosaic",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_mosaic.jpg",thumbnailURI:"./items/imgly_overlay_mosaic_thumb.jpg"},{identifier:"imgly_overlay_vintage",name:"Vintage",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_vintage.jpg",thumbnailURI:"./items/imgly_overlay_vintage_thumb.jpg"},{identifier:"imgly_overlay_paper",name:"Paper",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_paper.jpg",thumbnailURI:"./items/imgly_overlay_paper_thumb.jpg"},{identifier:"imgly_overlay_bokeh",name:"Bokeh",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_bokeh.jpg",thumbnailURI:"./items/imgly_overlay_bokeh_thumb.jpg"},{identifier:"imgly_overlay_hearts",name:"Hearts",defaultBlendMode:"screen",overlayURI:"./items/imgly_overlay_hearts.jpg",thumbnailURI:"./items/imgly_overlay_hearts_thumb.jpg"},{identifier:"imgly_overlay_lightleak2",name:"Lightleak 2",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_lightleak2.jpg",thumbnailURI:"./items/imgly_overlay_lightleak2_thumb.jpg"},{identifier:"imgly_overlay_wood",name:"Wood",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_wood.jpg",thumbnailURI:"./items/imgly_overlay_wood_thumb.jpg"},{identifier:"imgly_overlay_chop",name:"Chop",defaultBlendMode:"multiply",overlayURI:"./items/imgly_overlay_chop.jpg",thumbnailURI:"./items/imgly_overlay_chop_thumb.jpg"},{identifier:"imgly_overlay_metal",name:"Metal",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_metal.jpg",thumbnailURI:"./items/imgly_overlay_metal_thumb.jpg"},{identifier:"imgly_overlay_painting",name:"Painting",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_painting.jpg",thumbnailURI:"./items/imgly_overlay_painting_thumb.jpg"},{identifier:"imgly_overlay_grain",name:"Grain",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_grain.jpg",thumbnailURI:"./items/imgly_overlay_grain_thumb.jpg"},{identifier:"imgly_overlay_clouds",name:"Clouds",defaultBlendMode:"softLight",overlayURI:"./items/imgly_overlay_clouds.jpg",thumbnailURI:"./items/imgly_overlay_clouds_thumb.jpg"},{identifier:"imgly_overlay_wall1",name:"Wall",defaultBlendMode:"lighten",overlayURI:"./items/imgly_overlay_wall1.jpg",thumbnailURI:"./items/imgly_overlay_wall1_thumb.jpg"},{identifier:"imgly_overlay_wall2",name:"Wall 2",defaultBlendMode:"overlay",overlayURI:"./items/imgly_overlay_wall2.jpg",thumbnailURI:"./items/imgly_overlay_wall2_thumb.jpg"}],dT=[{identifier:"imgly_sticker_emoticons",name:"Emoticons",thumbnailURI:"./categories/emoticons.png",items:[{identifier:"imgly_sticker_emoticons_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_grin.svg",tintMode:"none",name:"Grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_laugh",stickerURI:"./emoticons/imgly_sticker_emoticons_laugh.svg",tintMode:"none",name:"Laugh",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smile",stickerURI:"./emoticons/imgly_sticker_emoticons_smile.svg",tintMode:"none",name:"Smile",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_wink.svg",tintMode:"none",name:"Wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tongue_out_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_tongue_out_wink.svg",tintMode:"none",name:"Tongue out wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angel",stickerURI:"./emoticons/imgly_sticker_emoticons_angel.svg",tintMode:"none",name:"Angel",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kisses",stickerURI:"./emoticons/imgly_sticker_emoticons_kisses.svg",tintMode:"none",name:"Kisses",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loving",stickerURI:"./emoticons/imgly_sticker_emoticons_loving.svg",tintMode:"none",name:"Loving",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kiss",stickerURI:"./emoticons/imgly_sticker_emoticons_kiss.svg",tintMode:"none",name:"Kiss",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wave",stickerURI:"./emoticons/imgly_sticker_emoticons_wave.svg",tintMode:"none",name:"Wave",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_nerd",stickerURI:"./emoticons/imgly_sticker_emoticons_nerd.svg",tintMode:"none",name:"Nerd",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cool",stickerURI:"./emoticons/imgly_sticker_emoticons_cool.svg",tintMode:"none",name:"Cool",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_blush",stickerURI:"./emoticons/imgly_sticker_emoticons_blush.svg",tintMode:"none",name:"Blush",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_duckface",stickerURI:"./emoticons/imgly_sticker_emoticons_duckface.svg",tintMode:"none",name:"Duckface",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_furious.svg",tintMode:"none",name:"Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angry",stickerURI:"./emoticons/imgly_sticker_emoticons_angry.svg",tintMode:"none",name:"Angry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_steaming_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_steaming_furious.svg",tintMode:"none",name:"Steaming Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sad",stickerURI:"./emoticons/imgly_sticker_emoticons_sad.svg",tintMode:"none",name:"Sad",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_anxious",stickerURI:"./emoticons/imgly_sticker_emoticons_anxious.svg",tintMode:"none",name:"Anxious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_cry.svg",tintMode:"none",name:"Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sobbing",stickerURI:"./emoticons/imgly_sticker_emoticons_sobbing.svg",tintMode:"none",name:"Sobbing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loud_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_loud_cry.svg",tintMode:"none",name:"Loud Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wide_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_wide_grin.svg",tintMode:"none",name:"Wide grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_impatient",stickerURI:"./emoticons/imgly_sticker_emoticons_impatient.svg",tintMode:"none",name:"Impatient",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tired",stickerURI:"./emoticons/imgly_sticker_emoticons_tired.svg",tintMode:"none",name:"Tired",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_asleep",stickerURI:"./emoticons/imgly_sticker_emoticons_asleep.svg",tintMode:"none",name:"Asleep",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sleepy",stickerURI:"./emoticons/imgly_sticker_emoticons_sleepy.svg",tintMode:"none",name:"Sleepy",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_deceased",stickerURI:"./emoticons/imgly_sticker_emoticons_deceased.svg",tintMode:"none",name:"Deceased",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_attention",stickerURI:"./emoticons/imgly_sticker_emoticons_attention.svg",tintMode:"none",name:"Attention",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_question",stickerURI:"./emoticons/imgly_sticker_emoticons_question.svg",tintMode:"none",name:"Question",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",stickerURI:"./emoticons/imgly_sticker_emoticons_not_speaking_to_you.svg",tintMode:"none",name:"Not speaking to you",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sick",stickerURI:"./emoticons/imgly_sticker_emoticons_sick.svg",tintMode:"none",name:"Sick",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pumpkin",stickerURI:"./emoticons/imgly_sticker_emoticons_pumpkin.svg",tintMode:"none",name:"Pumpkin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_boxer",stickerURI:"./emoticons/imgly_sticker_emoticons_boxer.svg",tintMode:"none",name:"Boxer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_idea",stickerURI:"./emoticons/imgly_sticker_emoticons_idea.svg",tintMode:"none",name:"Idea",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smoking",stickerURI:"./emoticons/imgly_sticker_emoticons_smoking.svg",tintMode:"none",name:"Smoking",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_beer",stickerURI:"./emoticons/imgly_sticker_emoticons_beer.svg",tintMode:"none",name:"Beer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skateboard",stickerURI:"./emoticons/imgly_sticker_emoticons_skateboard.svg",tintMode:"none",name:"Skateboard",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_guitar",stickerURI:"./emoticons/imgly_sticker_emoticons_guitar.svg",tintMode:"none",name:"Guitar",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_music",stickerURI:"./emoticons/imgly_sticker_emoticons_music.svg",tintMode:"none",name:"Music",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sunbathing",stickerURI:"./emoticons/imgly_sticker_emoticons_sunbathing.svg",tintMode:"none",name:"Sunbathing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hippie",stickerURI:"./emoticons/imgly_sticker_emoticons_hippie.svg",tintMode:"none",name:"Hippie",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_humourous",stickerURI:"./emoticons/imgly_sticker_emoticons_humourous.svg",tintMode:"none",name:"Humourous",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hitman",stickerURI:"./emoticons/imgly_sticker_emoticons_hitman.svg",tintMode:"none",name:"Hitman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_harry_potter",stickerURI:"./emoticons/imgly_sticker_emoticons_harry_potter.svg",tintMode:"none",name:"Harry Potter",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_business",stickerURI:"./emoticons/imgly_sticker_emoticons_business.svg",tintMode:"none",name:"Business",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_batman",stickerURI:"./emoticons/imgly_sticker_emoticons_batman.svg",tintMode:"none",name:"Batman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skull",stickerURI:"./emoticons/imgly_sticker_emoticons_skull.svg",tintMode:"none",name:"Skull",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_ninja",stickerURI:"./emoticons/imgly_sticker_emoticons_ninja.svg",tintMode:"none",name:"Ninja",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_masked",stickerURI:"./emoticons/imgly_sticker_emoticons_masked.svg",tintMode:"none",name:"Masked",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_alien",stickerURI:"./emoticons/imgly_sticker_emoticons_alien.svg",tintMode:"none",name:"Alien",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wrestler",stickerURI:"./emoticons/imgly_sticker_emoticons_wrestler.svg",tintMode:"none",name:"Wrestler",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_devil",stickerURI:"./emoticons/imgly_sticker_emoticons_devil.svg",tintMode:"none",name:"Devil",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_star",stickerURI:"./emoticons/imgly_sticker_emoticons_star.svg",tintMode:"none",name:"Star",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_baby_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_baby_chicken.svg",tintMode:"none",name:"Baby Chicken",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_rabbit",stickerURI:"./emoticons/imgly_sticker_emoticons_rabbit.svg",tintMode:"none",name:"Rabbit",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pig",stickerURI:"./emoticons/imgly_sticker_emoticons_pig.svg",tintMode:"none",name:"Pig",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_chicken.svg",tintMode:"none",name:"Chicken",resizeMode:"keepAspect"}]},{identifier:"imgly_sticker_shapes",name:"Shapes",thumbnailURI:"./categories/shapes.png",items:[{identifier:"imgly_sticker_shapes_badge_01",stickerURI:"./shapes/imgly_sticker_shapes_badge_01.svg",tintMode:"solid",name:"Shape Badge 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_04",stickerURI:"./shapes/imgly_sticker_shapes_badge_04.svg",tintMode:"solid",name:"Shape Badge 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_12",stickerURI:"./shapes/imgly_sticker_shapes_badge_12.svg",tintMode:"solid",name:"Shape Badge 12",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_06",stickerURI:"./shapes/imgly_sticker_shapes_badge_06.svg",tintMode:"solid",name:"Shape Badge 06",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_13",stickerURI:"./shapes/imgly_sticker_shapes_badge_13.svg",tintMode:"solid",name:"Shape Badge 13",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_36",stickerURI:"./shapes/imgly_sticker_shapes_badge_36.svg",tintMode:"solid",name:"Shape Badge 36",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_08",stickerURI:"./shapes/imgly_sticker_shapes_badge_08.svg",tintMode:"solid",name:"Shape Badge 08",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_11",stickerURI:"./shapes/imgly_sticker_shapes_badge_11.svg",tintMode:"solid",name:"Shape Badge 11",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_35",stickerURI:"./shapes/imgly_sticker_shapes_badge_35.svg",tintMode:"solid",name:"Shape Badge 35",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_28",stickerURI:"./shapes/imgly_sticker_shapes_badge_28.svg",tintMode:"solid",name:"Shape Badge 28",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_32",stickerURI:"./shapes/imgly_sticker_shapes_badge_32.svg",tintMode:"solid",name:"Shape Badge 32",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_15",stickerURI:"./shapes/imgly_sticker_shapes_badge_15.svg",tintMode:"solid",name:"Shape Badge 15",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_20",stickerURI:"./shapes/imgly_sticker_shapes_badge_20.svg",tintMode:"solid",name:"Shape Badge 20",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_18",stickerURI:"./shapes/imgly_sticker_shapes_badge_18.svg",tintMode:"solid",name:"Shape Badge 18",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_19",stickerURI:"./shapes/imgly_sticker_shapes_badge_19.svg",tintMode:"solid",name:"Shape Badge 19",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_02",stickerURI:"./shapes/imgly_sticker_shapes_arrow_02.svg",tintMode:"solid",name:"Shape Arrow 02",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_03",stickerURI:"./shapes/imgly_sticker_shapes_arrow_03.svg",tintMode:"solid",name:"Shape Arrow 03",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_01",stickerURI:"./shapes/imgly_sticker_shapes_spray_01.svg",tintMode:"solid",name:"Shape Spray 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_04",stickerURI:"./shapes/imgly_sticker_shapes_spray_04.svg",tintMode:"solid",name:"Shape Spray 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_03",stickerURI:"./shapes/imgly_sticker_shapes_spray_03.svg",tintMode:"solid",name:"Shape Spray 03",resizeMode:"keepAspect"}]}],fT=[{thumbnailURI:"./items/dark/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/dark/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/dark/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/dark/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/dark/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/dark/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/dark/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/dark/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/dark/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/dark/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/dark/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/dark/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/dark/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/dark/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],pT=[{thumbnailURI:"./items/light/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/light/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/light/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/light/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/light/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/light/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/light/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/light/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/light/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/light/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/light/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/light/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/light/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/light/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],gT=[{identifier:"imgly_transforms_common",name:"Common",items:[{identifier:"imgly_transform_common_custom",name:"Custom",thumbnailURI:"",ratio:"*"},{identifier:"imgly_transform_common_square",name:"Square",thumbnailURI:"",ratio:1},{identifier:"imgly_transform_common_4",name:"4:3",thumbnailURI:"",ratio:4/3},{identifier:"imgly_transform_common_16",name:"16:9",thumbnailURI:"",ratio:16/9},{identifier:"imgly_transform_common_3",name:"3:4",thumbnailURI:"",ratio:3/4},{identifier:"imgly_transform_common_9",name:"9:16",thumbnailURI:"",ratio:9/16}]},{identifier:"imgly_transforms_facebook",name:"Facebook",items:[{identifier:"imgly_transform_facebook_profile",name:"Profile",thumbnailURI:"",dimensions:{x:300,y:300},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_title",name:"Title",thumbnailURI:"",dimensions:{x:1200,y:627},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_post",name:"Post",thumbnailURI:"",dimensions:{x:940,y:788},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_instagram",name:"Instagram",items:[{identifier:"imgly_transform_instagram_landscape",name:"Landscape",thumbnailURI:"",dimensions:{x:1080,y:566},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_portrait",name:"Portrait",thumbnailURI:"",dimensions:{x:1080,y:1350},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_square",name:"Square",thumbnailURI:"",dimensions:{x:1080,y:1080},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_story",name:"Story",thumbnailURI:"",dimensions:{x:1080,y:1920},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_twitter",name:"Twitter",items:[{identifier:"imgly_transform_twitter_post",name:"Post",thumbnailURI:"",dimensions:{x:1024,y:512},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_profile",name:"Profile",thumbnailURI:"",dimensions:{x:400,y:400},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_title",name:"Title",thumbnailURI:"",dimensions:{x:1500,y:500},forceDimensions:!0,lockDimensions:!0}]}],mT=U(J()),yT={italic:"i"},vT=function(){function e(t){var n=this;(0,_.Z)(this,e),this.assetManager=t,this.injectedFonts={},this.loadedFonts={},this.isFontLoaded=this.getGoogleFamiliesString=function(e){var t=e.reduce((function(e,t){var n=t.fontFamily,i=t.fontStyle,r=t.fontWeight,o=void 0===r?400:r;return e[n]=(e[n]||[]).concat("".concat(o).concat(yT[i]||"")),e}),{});return Object.keys(t).map((function(e){var n=t[e].length?":".concat(t[e].join(",")):"";return e.replace(" ","+")+n})).join("|")}}return(0,b.Z)(e,[{key:"getFontWithId",value:,{key:"injectAllFonts",value:,{key:"loadAllFonts",value:function(){var e=(0,y.Z)(D().mark((function e(){var t;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.assetManager.getFontAssets(),e.abrupt("return",this.loadFonts(t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFontsWithIdentifiers",value:function(){var e=(0,y.Z)(D().mark((function e(t){var n,i=this;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return i.getFontWithId(e)})),e.abrupt("return",this.loadFonts(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadFonts",value:function(){var e=(0,y.Z)(D().mark((function e(t){var n=this;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.injectFonts(t),e.abrupt("return",(0,mT.default)(t,(,{stopOnError:!1}).then((function(){})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadFont",value:function(){var e=(0,y.Z)(D().mark((function e(t){var n,i=this,r=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(r.length>1&&void 0!==r[1])||r[1],e.abrupt("return",new Promise((function(e,r){i.isFontLoaded(t.identifier)&&e(),n&&i.injectFonts([t]),new LC(t).load().then((function(){i.loadedFonts[t.identifier]=t,e()})).catch((function(e){r(t.identifier)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadFontWithIdentifier",value:function(){var e=(0,y.Z)(D().mark((function e(t){var n,i,r=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(r.length>1&&void 0!==r[1])||r[1],i=this.assetManager.getFontAsset(t)){e.next=4;break}throw new Error("The requested font asset with identifier ".concat(t," does not exist!"));case 4:return e.abrupt("return",this.loadFont(i,n));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"injectFonts",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.assetManager.getPathForCategory("font"),n=e.filter(rC),i=e.filter(iC);n.length>0&&this.addGoogleFontLinks(n),i.length>0&&this.addWebFontCSS(i,t)}},{key:"addGoogleFontLinks",value:function(e){var t=this,n=e.filter((function(e){return!t.injectedFonts[e.identifier]}));if(0!==n.length){var i=this.getGoogleFamiliesString(n),r=document.createElement("link");r.rel="stylesheet",r.href="https://fonts.googleapis.com/css?family=".concat(i),document.getElementsByTagName("head")[0].appendChild(r),e.forEach((function(e){t.injectedFonts[e.identifier]=e}))}}},{key:"addWebFontCSS",value:function(t,n){var i=this,r=t.filter(();if(0!==r.length){var o=e.createFontFacesCSS(r,n),a="\n      /* Injected by PhotoEditorSDK */\n      ".concat(o.join("\n"),"\n    "),s=document.createElement("style");s.innerHTML=a,document.head.appendChild(s),t.forEach((function(e){i.injectedFonts[e.identifier]=e}))}}}],[{key:"createFontFacesCSS",value:function(e,t){return e.map((function(e){var n=t(e.fontURI);return'@font-face {\n        font-family: "'.concat(e.fontFamily,"\";\n        src: url('").concat(n,"') format('").concat(e.format||"woff","');\n        font-weight: ").concat(e.fontWeight||"normal",";\n        font-style: ").concat(e.fontStyle||"normal",";\n      }")}))}}]),e}(),_T=function(){function e(t){var n,i,r=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=arguments.length>2?arguments[2]:void 0;(0,_.Z)(this,e),this.assetResolver=l,this.basePath="assets/",this.areCustomAssetsAllowed=!1,this.getAssets=function(e){switch(e){case"overlay":return r.overlayAssets;case"filter":return r.filterCategories;case"font":return r.fontAssets;case"focus":return r.focusAssets;case"adjustment":return r.adjustmentCategories;case"sticker":return r.stickerCategories;case"textdesign":return r.textDesignAssets;case"frame":return r.frameAssets;case"transform":return r.transformCategories;default:return[]}return[]},this.getPath=function(e,t){var n=r.assetResolver,i=void 0===n?{}:n,o=t&&i.item?i.item(t,e):t;if(null==o?void 0:o.match(/data:image/g))return o;if((null==o?void 0:o.match(/(ftp|http|https):\/\//))&&nT(o))return o;if(!o&&nT(e))return e;var a,s=o?WC(e,o):WC(e);if(r.basePath.match(/(ftp|http|https):\/\//)){var l=r.basePath.length;"/"!==r.basePath[l-1]&&(r.basePath="".concat(r.basePath,"/")),a=r.basePath+s}else a=WC(r.basePath,s);return i.path?i.path(a,e,o):a},this.getPathForCategory=function(e){return ,this.addCustomStickerAsset=function(e,t,n){e.forEach((function(e){var i=e.thumbnailURI,o=e.name,a=e.stickerURI,s=e.identifier,l=e.tintMode,u=e.resizeMode,c=r.stickerCategories.find((function(e){return e.identifier===t})),h={identifier:s,name:o,thumbnailURI:i,stickerURI:a,tintMode:l,resizeMode:u};if(c)c.items.push(h),c.thumbnailURI=i;else{var d={identifier:t,name:n,thumbnailURI:i,items:[h]};r.stickerCategories=[d].concat((0,v.Z)(r.stickerCategories))}})),r.stickerAssets=r.stickerCategories.reduce(r.allOptions,[])},this.getItemPath=function(e,t,n){var i=e.find((function(e){return e.identifier===t}));return i&&(i[n]||i.path)||""},this.isNonExistingFont=function(e){return!sT.find((function(t){return t.identifier===e.identifier}))&&!o[e.identifier]},this.replaceDeprecatedFont=function(e){return o[e.identifier]?sT.find((function(t){return t.identifier===a(e.identifier,!0)})):e},(null==t?void 0:t.basePath)&&(this.basePath=t.basePath),this.areCustomAssetsAllowed=s;var u=oT.reduce(this.allOptions,[]);t&&t.filter?this.filterCategories=this.configuredCategory(oT,t.filter,u):this.filterCategories=oT,this.lutFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter((function(e){return SS(e)})),this.duoToneFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter((function(e){return wS(e)}));var c=rT.reduce(this.allOptions,[]);t&&t.adjustment?this.adjustmentCategories=this.configuredCategory(rT,t.adjustment,c):this.adjustmentCategories=rT,this.fontAssets=sT.reduce(this.allOptions,[]);var h=lT.map((function(e){return r.getFontAsset(e)}));if((null==(i=null==(n=null==t?void 0:t.text)?void 0:n.fonts)?void 0:i.length)>0){h=t.text.fonts.map((function(e){if(r.isNonExistingFont(e))return e;var t=r.replaceDeprecatedFont(e);return r.getFontAsset(t.identifier)}));var d=t.text.fonts.filter(this.isNonExistingFont);this.fontAssets=t.text.fonts?[].concat((0,v.Z)(this.fontAssets),(0,v.Z)(d)):this.fontAssets}this.textToolFontAssets=h;var f=t&&t.focus&&t.focus.items&&t.focus.items.length?t.focus.items.map((function(e){return aT.find((function(t){return t.identifier===e.identifier}))})):aT;this.focusAssets=f,t&&t.overlay&&t.overlay.items?this.overlayAssets=this.configuredItem(t.overlay.items,hT,hT):this.overlayAssets=hT,t&&t.frame&&t.frame.items?this.frameAssets=this.configuredItem(t.frame.items,cT,cT):this.frameAssets=cT;var p=dT.reduce(this.allOptions,[]);t&&t.sticker?this.stickerCategories=this.configuredCategory(dT,t.sticker,p):this.stickerCategories=dT,this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[]);var g=fT;t&&"light"===t.theme&&(g=pT),this.textDesignAssets=t&&t.textdesign&&t.textdesign.items&&t.textdesign.items.length?t.textdesign.items.map(():g,this.textDesignToolFontAssets=uT.map((function(e){return r.getFontAsset(e)}));var m=gT.reduce(this.allOptions,[]);t&&t.transform?this.transformCategories=this.configuredCategory(gT,t.transform,m,"transform"):this.transformCategories=gT,this.transformAssets=this.transformCategories.reduce(this.allOptions,[]),this.fontManager=new vT(this)}return(0,b.Z)(e,[{key:"getFontManager",value:function(){return this.fontManager}},{key:"getAssetSource",value:function(e,t){switch(e){case"filter":if(this.getLUTFilterAsset(t))return this.getPath(e,this.getItemPath(this.lutFilterAssets,t,"lutURI"));break;case"overlay":return this.getPath(e,this.getItemPath(this.overlayAssets,t,"overlayURI"));case"font":return this.getPath(e,this.getItemPath(this.fontAssets,t,"fontURI"));case"sticker":var n=this.stickerAssets.find((function(e){return e.identifier===t}));if(n){if("data:image"===n.stickerURI.substr(0,10))return n.stickerURI;if(t.includes("imgly_sticker")&&n.stickerURI.includes(".svg")&&_C()){var i=this.getPath(e,this.getItemPath(this.stickerAssets,t,"stickerURI")).split("/");return i.splice(i.length-1,0,"base"),i[i.length-1]=i[i.length-1].replace(".svg",".png"),i.join("/")}return this.getPath(e,this.getItemPath(this.stickerAssets,t,"stickerURI"))}throw new Error("Cannot resolve this type of sticker asset yet");case"textdesign":return this.getPath(WC(e,"engine"),t);case"frame":return this.getPath(e,t)}throw new Error("Cannot resolve this type of asset yet")}},{key:"getDuotoneFilterAsset",value:function(e){return this.duoToneFilterAssets.filter((function(t){return t.identifier===e}))[0]}},{key:"getLUTFilterAsset",value:function(e){return this.lutFilterAssets.filter((function(t){return t.identifier===e}))[0]}},{key:"getOverlayAsset",value:function(e){return this.overlayAssets.filter((function(t){return t.identifier===e}))[0]}},{key:"getStickerAsset",value:function(e){return this.stickerAssets.filter((function(t){return t.identifier===e}))[0]}},{key:"getFontAsset",value:function(e){return this.fontAssets.filter((function(t){return t.identifier===e}))[0]}},{key:"getTextDesignAssets",value:function(e){return this.textDesignAssets.filter((function(t){return t.identifier===e}))[0]}},{key:"getFrameAsset",value:,{key:"getFontAssets",value:function(){return this.fontAssets}},{key:"getFontAssetsForText",value:function(){return this.textToolFontAssets}},{key:"getFontAssetsForTextDesign",value:function(){return this.textDesignToolFontAssets}},{key:"getFrameAssets",value:function(){return this.frameAssets}},{key:"allOptions",value:function(e,t){return Object.prototype.hasOwnProperty.call(t,"items")?[].concat((0,v.Z)(e),(0,v.Z)(t.items)):[].concat((0,v.Z)(e),[t])}},{key:"configuredCategory",value:function(e,t,n,i){var r=this;return t.categories&&t.categories.length?t.categories.reduce((function(t,o){var a=e.find((function(e){return e.identifier===o.identifier}));return a?t.push((0,C.Z)((0,C.Z)((0,C.Z)({},a),o),{},{items:r.configuredItem(o.items,n,a.items,i).filter(Boolean)})):(r.areCustomAssetsAllowed||"transform"===i)&&t.push((0,C.Z)((0,C.Z)({},o),{},{items:r.configuredItem(o.items,n,o.items,i).filter(Boolean)})),t}),[]):e}},{key:"configuredItem",value:function(e,t,n,i){var r=this;return e&&e.length?e.reduce((function(e,n){var o=t.find((function(e){return e.identifier===n.identifier}));return o?e.push((0,C.Z)((0,C.Z)({},o),n)):(r.areCustomAssetsAllowed||"transform"===i)&&e.push(n),e}),[]).filter(Boolean):n}}]),e}(),bT=function(){function e(t,n,i,r){if((0,_.Z)(this,e),"number"===typeof t){if("number"!==typeof n||void 0===i||void 0===r)throw new Error("Invalid arguments passed to Rect. Expected (number, number, number, number)");this.origin={x:t,y:n},this.size={width:i||0,height:r||0}}else{if(this.origin=t,"number"===typeof n)throw new Error("Invalid arguments passed to Rect. Expected (Float2, Size)");this.size=n}}return(0,b.Z)(e,[{key:"minX",get:function(){return this.origin.x}},{key:"minY",get:function(){return this.origin.y}},{key:"midX",get:function(){return this.origin.x+.5*this.size.width}},{key:"midY",get:function(){return this.origin.y+.5*this.size.height}},{key:"maxX",get:function(){return this.origin.x+this.size.width}},{key:"maxY",get:,{key:"width",get:function(){return this.size.width}},{key:"height",get:function(){return this.size.height}}],[{key:"contains",value:]),e}(),xT=bT;xT.ZERO=new bT({x:0,y:0},{width:0,height:0});var kT=function(){eturn(0,b.Z)(e,null,[{key:"fromScale",value:,{key:"fromRotation",value:function(t){var n=Math.cos(t),i=Math.sin(t);return new e(n,-i,i,n,0,0)}},{key:"fromRotationDeg",value:function(e){var t=Math.PI*e/180;return this.fromRotation(t)}},{key:"fromTranslation",value:,{key:"fromTRS",value:function(t,n,i,r,o){var a=Math.cos(i),s=Math.sin(i);return new e(r*a,-o*s,r*s,o*a,t,n)}},{key:"multiply",value:function(t,n){return new e(t.a*n.a+t.b*n.c,t.a*n.b+t.b*n.d,t.c*n.a+t.d*n.c,t.c*n.b+t.d*n.d,t.a*n.tx+t.b*n.ty+t.tx,t.c*n.tx+t.d*n.ty+t.ty)}},{key:"transformPoint",value:function(e,t){return{x:e.a*t.x+e.b*t.y+e.tx,y:e.c*t.x+e.d*t.y+e.ty}}},{key:"getInverted",value:function(t){var n=t.a*t.d-t.b*t.c;if(0===n)return t;var i=1/n;return new e(i*t.d,-i*t.b,-i*t.c,i*t.a,i*(t.b*t.ty-t.d*t.tx),i*(t.c*t.tx-t.a*t.ty))}}]),e}(),wT=kT;T.IDENTITY=kT.fromScale(1,1);var CT=TT=function(e){return CT(e)?-e:e},ET=DT=IT=(i={},(0,g.Z)(i,0,ET(0)),(0,g.Z)(i,90,ET(90)),(0,g.Z)(i,180,ET(180)),(0,g.Z)(i,270,ET(270)),i),RT=Object.values(IT),OT=function(e){var t=Math.round(DT(TT(e)));return CT(e)&&(270===t?t=90:90===t&&(t=270)),IT[t%360]},FT=function(e){return 0===e?e:360-TT(e)},AT=function(e){return function(e,t){var n=e.indexOf(t);if(-1!==n&&e.length)return n===e.length-1?e[0]:e[n+1]}(RT,OT(e))},PT=function(e){return function(e,t){var n=e.indexOf(t);if(-1!==n&&e.length)return 0===n?e[e.length-1]:e[n-1]}(RT,OT(e))},ZT=function(e){var t=OT(e);return t===IT[270]||t===IT[90]},MT=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1,y:1},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,_.Z)(this,e),this.position=t,this.scale=n,this.rotation=i}return(0,b.Z)(e,null,[{key:"IDENTITY",get:]),e}();W();var zT={};function BT(e){return void 0!==e.x}function LT(e){return wT.fromTRS(e.position.x,e.position.y,e.rotation,e.scale.x,e.scale.y)}function UT(e){var t=e.getParent(),n=function(e){return e.getBaseLocalToParentMatrix?e.getBaseLocalToParentMatrix():LT(e.getTransform())}(e);if(void 0===t)return n;var i=UT(t);return wT.multiply(i,n)}unction HT(e){var t=e.getParent(),n=NT(e);if(void 0===t)return n;var i=HT(t);return wT.multiply(i,n)}function jT(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r="output"===t.type&&i?UT(t):HT(t),o="output"===n.type&&i?UT(n):HT(n),a=wT.getInverted(o);return wT.transformPoint(a,wT.transformPoint(r,e))}function WT(e,t,n){var i=new TC(e,0),r=new TC(jT(i,t,n)),o=new TC(jT(TC.ZERO,t,n));return TC.distance(o,r)}function VT(e,t,n){var i=BT(e)?e.x:e.width,r=BT(e)?e.y:e.height;return{width:WT(i,t,n),height:WT(r,t,n)}}unction qT(e,t){var n=new TC(e,0),i=new TC(GT(n,t)),r=new TC(GT(TC.ZERO,t));return TC.distance(i,r)}function YT(e){var t=HT(e),n=e.getBounds(),i={x:n.width,y:0},r={x:0,y:n.height},o=new TC(wT.transformPoint(t,TC.ZERO)),a=new TC(wT.transformPoint(t,i)),s=new TC(wT.transformPoint(t,r));return{width:TC.distance(o,a),height:TC.distance(o,s)}}function XT(e,t){var n=YT(e),i=t.getTransform().scale,r=1/i.x,o=1/i.y;return{width:n.width*r,height:n.height*o}}function KT(e,t){var n=t.getBounds();return{width:e.width*n.width,height:e.height*n.height}}function JT(e,t){var n=t.getBounds();return{width:e.width/n.width,height:e.height/n.height}}function QT(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.getBounds();return{x:e.x*i.width+(n?0:i.minX),y:e.y*i.height+(n?0:i.minY)}}function $T(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.getBounds();return{x:(e.x-(n?0:i.minX))/i.width,y:(e.y-(n?0:i.minY))/i.height}}function eE(e,t){var n=jT({x:1,y:0},e,t,!0),i=jT(TC.ZERO,e,t,!0);return Math.atan2(n.y-i.y,n.x-i.x)}function tE(e){return"string"!==typeof e&&!Array.isArray(e)&&void 0===e.a}function nE(e){return"string"!==typeof e&&Array.isArray(e)&&3===e.length}function iE(e){return"string"!==typeof e&&!Array.isArray(e)&&void 0!==e.a}function rE(e){return"string"!==typeof e&&Array.isArray(e)&&4===e.length}B(zT,{absoluteToRelativePoint:function(){return $T},absoluteToRelativeSize:function(){return JT},getBaseLocalToWorldMatrix:function(){return UT},getLocalToParentMatrix:function(){return NT},getLocalToWorldMatrix:function(){return HT},getPointInWorldSpace:function(){return GT},getRotationBetweenCoordinateSpaces:function(){return eE},getScalarInWorldSpace:function(){return qT},getSizeInOutputSpace:function(){return XT},getSizeInWorldSpace:function(){return YT},pointFromSpaceToSpace:function(){return jT},rectTransformToAffineTransform:function(){return LT},relativeToAbsolutePoint:function(){return QT},relativeToAbsoluteSize:function(){return KT},scalarFromSpaceToSpace:function(){return WT},sizeFromSpaceToSpace:function(){return VT}});var oE=function(){function e(t,n){(0,_.Z)(this,e),this.engine=n,this.transform=MT.IDENTITY,this.canvasPivot={x:0,y:0},this.previewQuality=1,this.canvas=t}return(0,b.Z)(e,[{key:"quality",get:function(){return this.previewQuality}},{key:"setQuality",value:,{key:"getTransform",value:function(){return this.transform}},{key:"setTransform",value:function(e){this.transform=e}},{key:"getPosition",value:function(){return this.transform.position}},{key:"setPosition",value:function(e,t){var n;n="number"===typeof e?{x:e,y:void 0===t?e:t}:e;var i=this.transform.scale,r=this.transform.rotation;this.setTransform(new MT(n,i,r))}},{key:"getScale",value:function(){return this.transform.scale}},{key:"setScale",value:function(e,t){var n;n="number"!==typeof e?e:{x:e,y:void 0===t?e:t};var i=this.transform.position,r=this.transform.rotation;this.setTransform(new MT(i,n,r))}},{key:"getRotation",value:function(){return this.transform.rotation}},{key:"setRotation",value:function(e){var t=this.transform.position,n=this.transform.scale;this.setTransform(new MT(t,n,e))}},{key:"getCanvasPivot",value:function(){return this.canvasPivot}},{key:"setCanvasPivot",value:function(e,t){this.canvasPivot="number"===typeof e?{x:e,y:void 0===typeof t?e:t}:e}},{key:"getCanvasBounds",value:function(){var e=this.canvasPivot,t=this.canvas,n=t.width,i=t.height;return new xT(-e.x*n,-e.y*i,n,i)}}]),e}();ar sE=function(e){return 2*Math.PI-e},lE=function(e){var t=e.rotation,n=e.outputRotation,i=void 0===n?0:n,r=e.flipHorizontally,o=e.flipVertically,a=t;return r&&(a=sE(a)),o&&(a=a)),a+i};Mv(),st(),zv(),Uv(),Nv(),Mv();var uE=function(){function e(){(0,_.Z)(this,e)}return(0,b.Z)(e,null,[{key:"downloadDataURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export",n=this.createBlobURLFromDataURL(e),i=this.getExtensionFromDataURL(e),r=document.createElement("a");r.download="".concat(t,".").concat(i),r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},{key:"downloadMSBlob",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export";navigator.msSaveBlob&&navigator.msSaveBlob(e,"".concat(t,".png"))}},{key:"getExtensionFromDataURL",value:function(e){return e.split(",")[0].split(":")[1].split(";")[0].split("/").pop()}},{key:"createBlobURLFromDataURL",value:function(e){if(!window.Blob||!window.URL||!ArrayBuffer||!Uint8Array)return e;for(var t=ev.decode(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=0;o<t.length;o++)r[o]=t[o];var a=new window.Blob([i],{type:n});return window.URL.createObjectURL(a)}}]),e}();Mv();var cE=function(){function e(t,n,i){(0,_.Z)(this,e),this._sdk=t,this._options=n,this._download=i}return(0,b.Z)(e,[{key:"export",value:function(){var e=this,t=this._getRenderType();return this._sdk.export(t,this._options.format,this._options.quality).then((function(n){return e._download&&e._downloadData(t,n),n}))}},{key:"_downloadData",value:function(e,t){switch(e){case rv.DATAURL:uE.downloadDataURL(t,this._options.fileBasename);break;case rv.MSBLOB:uE.downloadMSBlob(t,this._options.fileBasename)}}},{key:"_getRenderType",value:function(){var e=this._options;return e.type===rv.IMAGE&&this._download?$y.supportsMSBlob()?rv.MSBLOB:rv.DATAURL:e.type}}]),e}();Uv(),W(),Mv(),Mv();var hE=function(){function e(t,n,i){(0,_.Z)(this,e),this._editor=t,this._sdk=n,this._mediator=i,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}return(0,b.Z)(e,[{key:"exists",value:,{key:"add",value:function(e){var t=this,n=e.constructor.identifier;e.on("update",();var i=this._preferredOrder.indexOf(n);if(-1===i)throw new Error("EditorOperations#add: `".concat(n,"` does not appear in `operationsOrder`"));this._stack.set(i,e),this._map[n]=e,this._mediator.emit(Wg.EVENTS.OPERATION_CREATED,e)}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="object"===typeof e?e.constructor.identifier:e,i=this._stack.getStack();e=this.get(n),delete this._map[n];var r=i.map((function(e){return e.constructor.identifier})).indexOf(n);if(-1!==r){this._stack.removeAt(r);for(var o=r+1;o<i.length;o++){var a=i[o];a&&a.setDirty(!0)}t&&this._mediator.emit(Wg.EVENTS.OPERATION_REMOVED,e)}}},{key:"get",value:function(e){return this._map[e]}},{key:"getOrCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._map[e]){var n=this._map[e];return n.set(t,!1),n}var i=this._available[e],r=new i(this._sdk,t);return this.add(r),r}},{key:"getStack",value:function(){return this._stack}},{key:"reset",value:,{key:"_fixStack",value:function(){var e=this,t=this._stack.getStack().slice();this._stack.clear(),t.forEach((function(t){e.add(t)}))}}]),e}();Mv();var dE=function(){eturn(0,b.Z)(e,[{key:"needsResize",value:function(){var e=new sv(this._image.width,this._image.height),t=e.x*e.y>this._maxPixels,n=null!==this._maxDimensions&&(e.x>this._maxDimensions||e.y>this._maxDimensions);return t||n}},{key:"resize",value:function(){var e=this,t=null,n=null,i=this._maxDimensions;return new Promise((function(r,o){window.setTimeout((function(){var o=new sv(e._image.width,e._image.height).clone();if(o.x*o.y>e._maxPixels&&(o.copy(e._getDimensionsByMaxPixels()),t="maxMegaPixels"),null!==i&&(o.x>i||o.y>i)){var a=Math.min(i/o.x,i/o.y);o.multiply(a),t="maxDimensions"}o.floor(),n=e._createResizedImageCanvas(o),r({canvas:n,dimensions:o,reason:t})}),1e3)}))}},{key:"_createResizedImageCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this._image,i=document.createElement("canvas");i.width=e.x,i.height=e.y;var r=e.clone().subtract(t).divide(2),o=i.getContext("2d");return o.drawImage(n,0,0,n.width,n.height,r.x,r.y,t.x,t.y),i}},{key:"_getDimensionsByMaxPixels",value:function(){var e=this._image,t=this._maxPixels,n=e.width/e.height,i=e.height/e.width;return new sv(Math.sqrt(t*n),Math.sqrt(t*i)).floor()}}]),e}(),fE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r){var o,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,_.Z)(this,n),(o=t.call(this))._ui=e,o._options=i,o._mediator=r,o._shallow=a,a||(o._initSDK(),o.operations=new hE((0,x.Z)(o),o._sdk,o._mediator)),o}return(0,b.Z)(n,[{key:"_initFonts",value:function(){var e=iv.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:!1,availableVariations:null});this._fontManager=new fv(this._ui,e);var t=this._fontManager.getFonts(),n=this._ui.getFontLoader();n.setFonts(t),n.load()}},{key:"setImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.reset();var n=null;n=this._sdk.parseExif(e),this._setImage(e,n)}},{key:"_initSDK",value:function(){var e,t=this._options,n=t.logLevel,i=t.displayWelcomeMessage,r=t.debug,o=t.license,a=t.crossOrigin,s=t.watermark,l=this._options.editor,u=l.smoothDownscaling,c=l.smoothUpscaling,h=l.preferredRenderer,d=l.pixelRatio,f=l.transparent,p=l.clearColor;Array.isArray(p)?e=tv.fromArray(p):"string"===typeof p?e=tv.fromHex(p):p instanceof tv&&(e=p.clone());var g={logLevel:n,debug:r,displayWelcomeMessage:i,pixelRatio:d,smoothDownscaling:u,smoothUpscaling:c,transparent:f,crossOrigin:a,clearColor:e,license:o,watermark:s};this._sdk=new av(h,g)}},{key:"getMaxMegapixels",value:function(){return this._options.editor.maxMegaPixels}},{key:"getCrossOrigin",value:,{key:"getOutputDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputDimensions(e)}},{key:"getOutputTextureDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputTextureDimensions(e)}},{key:"getFinalDimensions",value:,{key:"_setImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._sdk.setAllOperationsToDirty(),this._options.editor.image=e,this._sdk.setImage(e,t)}},{key:"_ensureImageIsResized",value:function(){var e=this,t=this._sdk.getImage(),n=this._sdk.getRenderer(),i=this.getMaxMegapixels(),r=i?1e6*i:null,o=n.getMaxDimensions(),a=new dE(t,r,o);return!this._resizedImage&&a.needsResize()?a.resize().then((function(t){var n=t.canvas;t.dimensions,t.reason;return e._resizedImage=n,e._sdk.setImage(n),n})):Promise.resolve(t)}},{key:"export",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty(),this._ensureImageIsResized().then((function(n){var i=e._options.editor.export;return new cE(e._sdk,i,t).export().then((function(t){return e.emit("export",t),e._mediator.emit(Wg.EVENTS.EXPORT,t,e),e._watermarkOperation&&(e._watermarkOperation.setEnabled(!0),e._sdk.render()),e._sdk.setAllOperationsToDirty(),t}))}))}},{key:"broadcastTransform",value:function(e,t){var n=this,i=new av.Operations.TransformOperation.TransformChange(e,t);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach((function(e){var t=n.operations.get(e);t&&t.transform(i)}))}},{key:"broadcastFlip",value:function(e){var t=this;["mirrored-focus","radial-focus","linear-focus","sprite","selective-blur"].forEach((function(n){var i=t.operations.get(n);i&&i.flip(e)}))}},{key:"broadcastRotate",value:function(e){var t=this;["transform","mirrored-focus","linear-focus","radial-focus","sprite","selective-blur"].forEach(()}},{key:"_initSerializers",value:function(){this._serializers={"1.0.0":(r_(),N($v)).default,"1.0.1":(v_(),N(s_)).default,"2.0.0":(O_(),N(C_)).default,"3.0.0":(L_(),N(Z_)).default,"3.1.0":(G_(),N(H_)).default,"3.2.0":($_(),N(X_)).default,"3.4.0":(ab(),N(nb)).default,"3.5.0":(fb(),N(ub)).default,"3.6.0":(bb(),N(mb)).default,"3.7.0":(Eb(),N(wb)).default,"3.8.0":(Zb(),N(Rb)).default,"3.9.0":(Hb(),N(Bb)).default,"3.12.0":(Gb(),N(Vb)).default}}},{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3.12.0",n=this._serializers[t];if(!n)return Promise.reject(new Error("No serializer for version ".concat(t," found.")));var i=new n(this);return i.serialize(e)}},{key:"deserialize",value:function(e){var t=this._serializers[e.version];return t?new t(this).deserialize(e):Promise.reject(new Error("No serializer for version ".concat(e.version," found.")))}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._options.editor.save;return this.serialize({image:t}).then((function(t){var i=JSON.stringify(t,null,2);if(e){var r="data:text/json;charset=utf-8;base64,".concat(window.encodeURI(window.btoa(i)));uE.downloadDataURL(r,n.fileBasename)}return i}))}},{key:"reset",value:,{key:"dispose",value:function(){this.stop(),this._resizedImage&&r(this._resizedImage),this._sdk.dispose()}},{key:"getRenderer",value:function(){return this._sdk.getRenderer()}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){return this._sdk.getInputDimensions()}},{key:"getImage",value:function(){return this._sdk.getImage()}},{key:"getOptions",value:function(){return this._options}},{key:"getUI",value:function(){return this._ui}},{key:"getMediator",value:function(){return this._mediator}}]),n}(nv),pE=fE;qv();var gE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,_.Z)(this,n),(e=t.call(this))._mediator=new nv,e._fontLoader=new kv((0,x.Z)(e)),e._options=i,e._initOptions(),e._initEvents(),e._disposed=!1,e._isReady=!1,e._editor=new pE((0,x.Z)(e),e._options,e._mediator),e._options.editor.image&&e._editor.setImage(e._options.editor.image),e._mediator.once(Wg.EVENTS.EDITOR_READY,(),Re.setLevel(e._options.logLevel),e}return(0,b.Z)(n,[{key:"export",value:function(){var e;return(e=this._editor).export.apply(e,arguments)}},{key:"serialize",value:,{key:"deserialize",value:function(e){return this._editor.deserialize(e)}},{key:"getEditor",value:function(){return this._editor}},{key:"isReady",value:function(){return this._isReady}},{key:"onReady",value:function(e){this._isReady?e():this._mediator.once(Wg.EVENTS.EDITOR_READY,e)}},{key:"createFilter",value:function(e){return new uv(this,this._getOptions("filter")).instantiateFilterWithIdentifier(e)}},{key:"getTextDesignLayoutByID",value:function(e){return new(new pv(this,this._getOptions("textDesign")).getLayoutByIdentifier(e))}},{key:"getTextDesignAssetManager",value:,{key:"getTextDesignFontManager",value:function(){return new fv(this,{fonts:Wg.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0,isTextDesign:!0})}},{key:"_getOptions",value:function(e){var t=this.getEditor(),n=t.controls,i={};n&&n.get(e)&&(i=n.get(e).defaultOptions);var r=t.getOptions();return iv.deepDefaults({},r.editor.controlsOptions[e]||{},i)}},{key:"_initOptions",value:function(){if(this._options=iv.defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:!1,preloader:!0,autoRun:!0}),this._options.editor=iv.defaults(this._options.editor||{},{enableZoom:!0,enableDrag:!0,enableExport:!0,enableKeyboardControls:!0,enablePositionSnapping:!0,enableRotationSnapping:!0,enableSave:!1,enableLoad:!1,pixelRatio:Math.max("undefined"!==typeof window&&window.devicePixelRatio||1,1),preferredRenderer:"webgl",transparent:!0,clearColor:[0,0,0,0],displayResizeMessage:!0,maxMegaPixels:{},displayCloseButton:!1,undoMode:"global",defaultControl:"filter",forceCrop:!1,snappingOptions:{},tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library","artfilter"],controlsOrder:[["library"],["artfilter","transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","artfilter","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame"],controlsOptions:{focus:{highQualityCanvasBlur:!1}}}),this._options.editor.snappingOptions=iv.defaults(this._options.editor.snappingOptions,{position:{},rotation:{}}),this._options.editor.snappingOptions.position=iv.defaults(this._options.editor.snappingOptions.position,{padding:{},threshold:20}),this._options.editor.snappingOptions.position.padding=iv.defaults(this._options.editor.snappingOptions.position.padding,{left:.1,right:.1,top:.1,bottom:.1}),this._options.editor.snappingOptions.rotation=iv.defaults(this._options.editor.snappingOptions.rotation,{angles:[0,45,90,135,180,225,270,315],threshold:20}),this._options.editor.controlsOptions.focus=iv.defaults(this._options.editor.controlsOptions.focus,{highQualityCanvasBlur:!1}),this._options.editor.maxMegaPixels=iv.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor.export=iv.defaults(this._options.editor.export||{},{format:"image/png",type:rv.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.editor.save=iv.defaults(this._options.editor.save||{},{format:"text/json",download:!0,fileBasename:"photoeditorsdk-save"}),this._options.extensions=iv.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=iv.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null}),!(this._options.editor.image instanceof window.Image)){var e=new window.Image;this._options.editor.image&&(e.src=this._options.editor.image,this._options.editor.image=e)}}},{key:"_initEvents",value:function(){this._mediator.pipeEvents(this)}},{key:"_disposeEvents",value:,{key:"setImage",value:function(e){this._editor.setImage(e)}},{key:"getAssetPath",value:function(e){var t=this._options.assets,n=t.baseUrl,i=t.resolver,r="".concat(n,"/").concat(e);i=i||function(e){return e},e.match(/(ftp|http|https):\/\//)&&(r=e);var o=e.replace(/assets\//,"").split("/"),a=o[0];switch(a){case"art-filters":return i("art-filter",{identifier:o[1],type:o[2].split(".")[0]});case"filters":return i("filter",{identifier:o[1].replace(/\.png$/g,"")});case"fonts":return i("font",{identifier:o[1].replace(/\.(woff|otf|ttf)$/g,"")});case"frames":return i("frame",{identifier:o[1],filename:o[2]});case"overlays":return i("overlay",{identifier:o[1].replace(/\.(png|jpg|jpeg)$/g,"")});case"stickers":var s=o[3].endsWith(".svg"),l="thumbs"===o[3];return i("sticker",{category:o[1],identifier:(s?o[3]:o[4]).replace(/\.(png|svg)$/g,""),variant:s?"svg":l?"thumb":"base"});case"text-design":return i("text-design",{type:"fonts"===o[1]?"font":"image",identifier:o[2].replace(/\.(png|otf|ttf|woff2?)$/g,"")})}return"undefined"!==typeof i&&null!==i&&(r=i(r)),r}},{key:"getFontLoader",value:function(){return this._fontLoader}},{key:"dispose",value:function(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._disposeEvents()}},{key:"render",value:function(e){var t=this;return this.deserialize(e).then((function(){return t.export()}))}}]),n}(nv);gE.prototype.identifier="engine-wrapper",gE.Constants=Wg,gE.Events=Wg.EVENTS,gE.Utils=$y,gE.JSONLoader=ot,gE.SDK=av;var mE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);eturn(0,b.Z)(n,[{key:"getOutputDimensions",value:function(){var e=this.getOutputContainer();return e?e.getResolution():{width:0,height:0}}},{key:"getSmallerOutputSide",value:function(){var e=this.getOutputContainer();if(!e)return 0;var t=e.getResolution();return Math.min(t.width,t.height)}},{key:"convertPointFromPreviewIntoOutputSpace",value:function(e,t){var n=wT.getInverted(zT.rectTransformToAffineTransform(t));return wT.transformPoint(n,e)}},{key:"convertPointFromPreviewIntoWorldSpace",value:function(e,t,n){var i=wT.getInverted(zT.rectTransformToAffineTransform(t)),r=n?this.getOutputContainer().getBaseLocalToParentMatrix():this.getOutputContainer().getLocalToParentMatrix(),o=wT.multiply(r,i);return wT.transformPoint(o,e)}},{key:"convertPointFromPreviewIntoFlippedPreviewSpace",value:function(e){var t=this.getOutputContainer().getFlipTransformMatrix();return wT.transformPoint(t,e)}},{key:"convertPointFromWorldIntoPreviewSpace",value:function(e,t){var n=zT.rectTransformToAffineTransform(t),i=wT.getInverted(this.getOutputContainer().getLocalToParentMatrix()),r=wT.multiply(n,i);return wT.transformPoint(r,e)}},{key:"convertPointFromOutputIntoPreviewSpace",value:,{key:"getContainersAtPreviewPoint",value:function(e,t){var n,i=new Array,r=this.convertPointFromPreviewIntoWorldSpace(e,t),o=this.getRootContainers(),a=(0,T.Z)(o);try{for(a.s();!(n=a.n()).done;){var s=n.value;this.accumulateContainersAtWorldPointInHierarchy(r,s,i)}}catch(l){a.e(l)}finally{a.f()}return i}},{key:"isPreviewPointInContainer",value:,{key:"isWorldPointInContainer",value:function(e,t){var n=zT.getLocalToWorldMatrix(t),i=wT.getInverted(n),r=wT.transformPoint(i,e);return xT.contains(t.getBounds(),r)}},{key:"accumulateContainersAtWorldPointInHierarchy",value:function(e,t,n){this.isWorldPointInContainer(e,t)&&n.push(t);var i,r=t.getChildren(),o=(0,T.Z)(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;aE(a)&&this.accumulateContainersAtWorldPointInHierarchy(e,a,n)}}catch(s){o.e(s)}finally{o.f()}}}]),n}(mC),yE=function(){function e(t){(0,_.Z)(this,e),this.engine=t,this.id=SC()}return(0,b.Z)(e,[{key:"getID",value:function(){return this.id}},{key:"getContainer",value:,{key:"getIndexInParent",value:function(){for(var e=this.engine.rootOperations,t=0;t<e.length;t+=1)if(e[t].getID()===this.id)return t;return-1}},{key:"setIndexInParent",value:function(e){this.engine.moveIndex(this,e)}},{key:"isValid",value:function(){return-1!==this.getIndexInParent()}}]),e}(),vE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r){var o;return(0,_.Z)(this,n),(o=t.call(this,i)).operation=r,o.type="adjustments",o.setProperties(e),o}return(0,b.Z)(n,[{key:"getProperties",value:function(){var e=this.operation.getOptions(),t=e.gamma-1;return{brightness:e.brightness||0,saturation:e.saturation||0,contrast:e.contrast||0,gamma:(t<0?2*t:t)||0,clarity:e.clarity||0,exposure:e.exposure||0,shadows:.5*e.shadows||0,highlights:e.highlights||0,whites:e.whites||0,blacks:e.blacks||0,temperature:e.temperature||0,sharpness:e.sharpness||0}}},{key:"setProperties",value:function(e){void 0!==e.gamma&&(e.gamma=1+(e.gamma<0?.5*e.gamma:e.gamma)),e.shadows&&(e.shadows=2*e.shadows),this.operation.set(e)}},{key:"getOperation",value:function(){return this.operation}},{key:"getTypeIdentifier",value:function(){return"adjustments"}}]),n}(yE),_E=function(e){if(iE(e))return new av.Color(e.r,e.g,e.b,e.a);if(rE(e))return new av.Color(e[0],e[1],e[2],e[3]);if(tE(e))return new av.Color(e.r,e.g,e.b,1);if(nE(e))return new av.Color(e[0],e[1],e[2],1);if(e)){var t=e.match(/[0-9A-fa-f]{1,2}/g),n=(0,m.Z)(t,3),i=n[0],r=n[1],o=n[2];return new av.Color(parseInt(i,16)/255,parseInt(r,16)/255,parseInt(o,16)/255,1)}throw new Error("Invalid color type")},bE=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,_.Z)(this,e),this._x=t,this._y=n}return(0,b.Z)(e,[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"set",value:,{key:"clone",value:,{key:"copy",value:,{key:"clamped",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n="number"===typeof e?{x:e,y:e}:e,i="number"===typeof t?{x:t,y:t}:t;return this._x=Math.max(n.x,this._x),this._y=Math.max(n.y,this._y),this._x=Math.min(i.x,this._x),this._y=Math.min(i.y,this._y),this}},{key:"divide",value:function(e,t){return"number"===typeof e||null===e?(this._x/=e,this._y/="undefined"===typeof t?e:t):(this._x/=e.x,this._y/=e.y),this}},{key:"subtract",value:function(e,t){return"number"===typeof e||null===e?(this._x-=e,this._y-="undefined"===typeof t?e:t):(this._x-=e.x,this._y-=e.y),this}},{key:"multiply",value:function(e,t){return"number"===typeof e||null===e?(this._x*=e,this._y*="undefined"===typeof t?e:t):(this._x*=e.x,this._y*=e.y),this}},{key:"add",value:function(e,t){return"number"===typeof e||null===e?(this._x+=e,this._y+="undefined"===typeof t?e:t):(this._x+=e.x,this._y+=e.y),this}},{key:"dot",value:function(e,t){return"number"===typeof e||null===e?this._x*e+this._y*("undefined"===typeof t?e:t):this._x*e.x+this._y*e.y}},{key:"equals",value:function(e,t){return"number"===typeof e||null===e?e===this._x&&t===this._y:e.x===this._x&&e.y===this._y}},{key:"flip",value:function(){var e=this._x;return this._x=this._y,this._y=e,this}},{key:"round",value:function(){return this._x=Math.round(this._x),this._y=Math.round(this._y),this}},{key:"ceil",value:function(){return this._x=Math.ceil(this._x),this._y=Math.ceil(this._y),this}},{key:"floor",value:function(){return this._x=0|this._x,this._y=0|this._y,this}},{key:"abs",value:,{key:"len",value:,{key:"min",value:function(){return Math.min(this._x,this._y)}},{key:"max",value:,{key:"toObject",value:,{key:"toString",value:,{key:"roundDecimal",value:function(e){return this._x=parseFloat(this._x.toFixed(e)),this._y=parseFloat(this._y.toFixed(e)),this}},{key:"asArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?[this._y,this._x]:[this._x,this._y]}}],[{key:"fromObject",value:function(t){return new e(t.x,t.y)}},{key:"fromSize",value:,{key:"NULL",get:]),e}(),xE=function(){function e(t){(0,_.Z)(this,e),this.engine=t,this.id=SC(),this.transform=MT.IDENTITY,this.bounds=xT.ZERO}return(0,b.Z)(e,[{key:"getID",value:function(){return this.id}},{key:"getParent",value:function(){var e=this.engine.getRootContainers();if(0!==e.length&&this.id!==e[0].id)return e[0]}},{key:"getIndexInParent",value:function(){for(var e=this.engine.rootOperations,t=0;t<e.length;t+=1)if(e[t].getID()===this.id)return t;return-1}},{key:"setIndexInParent",value:,{key:"getChildren",value:function(){var e=this.engine.getRootContainers();return e.length>0&&(this.id===e[0].id||this.id===this.engine.getOutputContainer().id)?this.engine.rootOperations:[]}},{key:"getBounds",value:function(){return this.bounds}},{key:"setPivotOnSelfAndSprite",value:function(e,t,n){"number"===typeof t?(this.setPivotInternal(t,n),e.setPivot(new bE(t,n))):(this.setPivotInternal(t),e.setPivot(bE.fromObject(t)))}},{key:"setPivot",value:function(e,t){this.setPivotInternal(e,t)}},{key:"getPivot",value:function(){var e=this.getBounds();return{x:-e.minX/e.width,y:-e.minY/e.height}}},{key:"getTransform",value:function(){return this.transform}},{key:"setTransform",value:function(e){this.transform=e}},{key:"updateTransform",value:,{key:"getPosition",value:function(){return this.transform.position}},{key:"setPosition",value:function(e,t){var n;n="number"===typeof e?{x:e,y:void 0===t?e:t}:e;var i=this.transform.scale,r=this.transform.rotation;this.setTransform(new MT(n,i,r))}},{key:"getScale",value:function(){return this.transform.scale}},{key:"setScale",value:function(e,t){var n;n="number"!==typeof e?e:{x:e,y:void 0===t?e:t};var i=this.transform,r=i.position,o=i.rotation;this.setTransform(new MT(r,n,o))}},{key:"getRotation",value:function(){return this.transform.rotation}},{key:"setRotation",value:function(e){var t=this.transform,n=t.position,i=t.scale;this.setTransform(new MT(n,i,e))}},{key:"getSizeInWorldSpace",value:function(){return zT.getSizeInWorldSpace(this)}},{key:"getSizeInOutputSpace",value:function(){return zT.getSizeInOutputSpace(this,this.engine.getOutputContainer())}},{key:"setSizeInWorldSpace",value:function(e){var t=this.getBounds();this.setScale(e.width/t.width,e.height/t.height)}},{key:"setSizeInOutputSpace",value:function(e){var t=this.engine.getOutputContainer().getScale();this.setSizeInWorldSpace({width:e.width/t.x,height:e.height/t.y})}},{key:"isValid",value:,{key:"setPivotInternal",value:function(e,t){var n=this.getBounds();"number"===typeof e?this.setBoundsFromSize(n.width,n.height,{x:e,y:t}):this.setBoundsFromSize(n.width,n.height,e)}},{key:"setBoundsFromSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getPivot();this.bounds=new xT(-n.x*e,-n.y*t,e,t)}}]),e}(),kE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i){var r;(0,_.Z)(this,n),(r=t.call(this,i)).type="drawing",r.drawing=e,r.operation=i.createSpriteOperation(),r.sprite=r.operation.createBrush({}),r.operation.addSprite(r.sprite),r.radialBrush=r.sprite._createRadialBrush();var o=i.getRootContainers()[0].getBounds();return r.bounds=new xT(0,0,o.width,o.height),r.setTransform(MT.IDENTITY),r.operation.setDirty(!0),r.setData(e),r}return(0,b.Z)(n,[{key:"beginStroke",value:function(e){if(this.currentStroke)throw new Error("A brush stroke has already been started but not finished.");if("imgly_brush_radial"!==e.id)throw new Error("This adapter does not support any brush faces other than the radial img.ly brush.");this.currentBrush=e,this.currentStroke={brush:e,path:{controlPoints:[]}},this.radialBrush.setColor(_E(e.color)),this.radialBrush.setHardness(e.hardness),this.radialBrush.setSize(e.size),this.currentPath=this.sprite.createPath(this.radialBrush.clone())}},{key:"addPointToCurrentStroke",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.currentStroke||!this.currentBrush||!this.currentPath)throw new Error('A brush stroke has to first be started with a call to "beginStroke(brush:Brush)"');if(this.currentStroke.path.controlPoints.length){var n=this.currentStroke.path.controlPoints,i=n[n.length-1],r=this.currentBrush.size/10,o=Math.sqrt(e.x-Math.pow(i.x,2)+(e.y-Math.pow(i.y,2)));if(o<r)return}var a=this.engine.getOutputContainer(),s=this.engine.getRootContainers()[0],l=zT.pointFromSpaceToSpace(e,s,a,!0),u=zT.absoluteToRelativePoint(l,a,!1),c=a.getBounds();this.currentPath.addControlPoint(bE.fromObject(u)),this.currentStroke.path.controlPoints.push(e),t&&this.sprite.render(bE.fromObject({x:c.width,y:c.height}))}},{key:"endStroke",value:function(){if(this.currentStroke&&this.currentPath&&this.currentBrush){this.currentStroke.path.controlPoints.length&&this.drawing.strokes.push(this.currentStroke),this.currentStroke=void 0,this.currentBrush=void 0,this.currentPath.setClosed(!0);var e=this.engine.getOutputContainer().getBounds();this.sprite.render(bE.fromObject({x:e.width,y:e.height})),this.currentPath=void 0}}},{key:"setData",value:function(e){this.drawing=(0,C.Z)((0,C.Z)({},this.drawing),e),this.drawing.strokes&&(this.drawing.strokes=[]),this.sprite.clearPersistCanvas(),this.sprite.clearCanvas(),this.sprite.setPaths([]),this.drawStrokes(e.strokes)}},{key:"getData",value:function(){return this.drawing}},{key:"updateData",value:function(){this.setData(this.getData())}},{key:"getOperation",value:function(){return this.operation}},{key:"drawStrokes",value:function(e){var t=this;e.forEach((function(e){t.beginStroke(e.brush),e.path.controlPoints.forEach((),t.endStroke()}))}}]),n}(xE),wE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r,o){var a;return(0,_.Z)(this,n),(a=t.call(this,o)).filterOperation=i,a.type="duotone-filter",i.set({intensity:r.colorIntensity}),i.set({filter:e}),o.pesdk.setAllOperationsToDirty(),a}return(0,b.Z)(n,[{key:"getProperties",value:function(){return{colorIntensity:this.filterOperation.getOptions().intensity}}},{key:"setProperties",value:function(e){var t=this.filterOperation.getOptions().intensity;void 0!==e.colorIntensity&&(t=Math.min(Math.max(e.colorIntensity,0),1)),this.filterOperation.set({intensity:t})}},{key:"getOperation",value:function(){return this.filterOperation}},{key:"getTypeIdentifier",value:function(){return"filter"}}]),n}(yE),SE=function(){function e(t,n){(0,_.Z)(this,e),this.engine=n,this.loaded=!1,this.loading=!1,this.asset=(0,C.Z)({},t)}return(0,b.Z)(e,[{key:"load",value:function(){var e=(0,y.Z)(D().mark((function e(){var t,n,i=this;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loaded){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if(!this.loading){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Called Frame#load while it's already loading")));case 4:return this.loading=!0,t=this.asset.imageGroups,n=[],["top","left","right","bottom"].forEach((function(e){if(t[e]){var r=t[e];["start","mid","end"].forEach((function(t){t in r&&n.push(i.loadPart(e,t))}))}})),e.abrupt("return",Promise.all(n).then((function(){i.loaded=!0,i.loading=!1})).catch(());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFrame",value:function(){return(0,C.Z)((0,C.Z)({},this.asset),{},{defaultName:this.asset.name,thumbnail:this.asset.thumbnailURI})}},{key:"getIdentifier",value:function(){return this.asset.identifier}},{key:"getDefaultName",value:function(){return this.asset.name}},{key:"getThumbnail",value:function(){return this.asset.thumbnailURI}},{key:"getTintable",value:,{key:"getLayoutMode",value:function(){return this.asset.layoutMode}},{key:"getImageGroups",value:function(){return this.asset.imageGroups}},{key:"loadPart",value:function(){var e=(0,y.Z)(D().mark((function e(t,n){var i=this;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var o=i.asset.imageGroups[t][n],a=o;"string"!==typeof o&&"image"in o&&(a=o.image);var s=new Image;s.addEventListener("load",(function(){"string"!==typeof o?i.asset.imageGroups[t][n].image=s:i.asset.imageGroups[t][n]=s,e(s)})),s.addEventListener("error",(),s.crossOrigin=i.engine.configuration.crossOrigin||"anonymus",s.src=i.engine.assetProvider.getAssetSource("frame",a)})));case 1:case"end":return e.stop()}}),e)})));return ()}]),e}(),CE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r){var o;return(0,_.Z)(this,n),(o=t.call(this,r)).frameOperation=e,o.type="frame",o.setProperties(i),r.pesdk.setAllOperationsToDirty(),o}return(0,b.Z)(n,[{key:"setProperties",value:function(e){if(this.props=(0,C.Z)((0,C.Z)({},this.props),e),"number"===typeof e.opacity&&this.frameOperation.set({alpha:e.opacity}),e.tintColor&&this.frameOperation.set({tintColor:_E(e.tintColor)}),e.width){var t=this.engine.getOutputContainer().getBounds(),n=Math.min(t.width,t.height),i=e.width/n;this.frameOperation.set({scale:i})}this.frameOperation.setDirty(!0)}},{key:"getProperties",value:function(){return this.props}},{key:"getOperation",value:function(){return this.frameOperation}},{key:"getTypeIdentifier",value:function(){return"frame"}}]),n}(yE),TE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r){var o;return(0,_.Z)(this,n),(o=t.call(this,i)).blurOperation=r,o.type="gaussian-blur",o.setProperties(e),o}return(0,b.Z)(n,[{key:"getProperties",value:function(){var e=this.engine.getOutputContainer(),t=e.getBounds(),n=Math.min(t.size.width,t.size.height);return{blurRadius:zT.scalarFromSpaceToSpace(this.blurOperation.getOptions().blurRadius*n,e,this.getContainer())}}},{key:"setProperties",value:function(e){if(void 0!==e.blurRadius){var t=this.engine.pesdk.getOutputDimensions(),n=Math.min(t.x,t.y),i=this.getContainer(),r=this.engine.getOutputContainer(),o=zT.scalarFromSpaceToSpace(e.blurRadius,i,r)/n;this.blurOperation.set({blurRadius:o})}}},{key:"getOperation",value:function(){return this.blurOperation}},{key:"getTypeIdentifier",value:function(){return"blur"}}]),n}(yE),EE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i){var o;(0,_.Z)(this,n),(o=t.call(this,i)).data=e,o.type="image",o.dispose=function(){var e;(null==(e=o.data)?void 0:e.image)instanceof HTMLCanvasElement&&r(o.data.image)};var a=i.configuration.downscaleOptions;if(a){var s=a.maxDimensions;o.downscaleOptions={maxMegaPixels:a.maxMegaPixels,maxDimensions:{width:Math.min(i.maxTextureDimension,s?s.width:Number.MAX_VALUE),height:Math.min(i.maxTextureDimension,s?s.height:Number.MAX_VALUE)}}}else o.downscaleOptions={maxDimensions:{width:i.maxTextureDimension,height:i.maxTextureDimension}};o.setData(e);var l=o.data.image;return o.bounds=new xT(TC.ZERO,{width:l.width,height:l.height}),o}return(0,b.Z)(n,[{key:"setData",value:function(e){var t=this;if(this.data=(0,C.Z)((0,C.Z)({},this.data),e),e.image){var n,i=e.image;if(i instanceof HTMLImageElement&&(n=this.engine.pesdk.parseExif(i))){var r=n.getTags();if(r&&r.Orientation){var o=1!==r.Orientation&&2!==r.Orientation,a=-1!==[2,4,5,7].indexOf(r.Orientation);if(o||a){if(_C()||vC()||!CSS.supports("image-orientation","from-image")){var s=this.engine.pesdk.createOperation("exif-orientation",{},!1);s.setTags(r),i=s.applyTo(i)}n.setOrientation(1),r.Orientation=1}}}var l=new UC(i,this.downscaleOptions);l.on("imageDownscaled",(),l.on("beganImageDownscaling",(function(){t.engine.emit("beganImageDownscaling")})),i=l.downscaleIfNecessary(),this.data.image=i,this.engine.pesdk.setImage(i,n),this.setBoundsFromSize(i.width,i.height)}}},{key:"getData",value:function(){return this.data}},{key:"setPivot",value:,{key:"getOperation",value:]),n}(xE),DE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r){var o;return(0,_.Z)(this,n),(o=t.call(this,i)).props=e,o.blurOperation=r,o.type="linear-blur",o.setProperties(e),o}return(0,b.Z)(n,[{key:"getProperties",value:function(){return this.props}},{key:"setProperties",value:function(e){this.props=(0,C.Z)((0,C.Z)({},this.props),e);var t=this.blurOperation.getOptions(),n=this.engine.getOutputContainer(),i=n.getBounds(),r=this.getContainer(),o=n.getBaseLocalToParentMatrix(),a=zT.getBaseLocalToWorldMatrix(r),s=wT.multiply(wT.getInverted(o),a),l=Math.min(i.size.width,i.size.height);if(void 0!==e.blurRadius){var u=zT.scalarFromSpaceToSpace(e.blurRadius,r,n);t.blurRadius=u/l}if(void 0!==e.start){var c=wT.transformPoint(s,e.start),h=zT.absoluteToRelativePoint(c,n,!1);t.controlPoint1=h}if(void 0!==e.end){var d=wT.transformPoint(s,e.end),f=zT.absoluteToRelativePoint(d,n,!1);t.controlPoint2=f}this.blurOperation.set(t)}},{key:"updateProperties",value:function(){var e=this.getProperties();this.setProperties(e)}},{key:"getOperation",value:function(){return this.blurOperation}},{key:"getTypeIdentifier",value:function(){return"linear-focus"}}]),n}(yE),IE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r,o){var a;return(0,_.Z)(this,n),(a=t.call(this,o)).filter=e,a.filterOperation=i,a.props=r,a.type="lut-filter",i.set({intensity:r.intensity}),i.set({filter:e}),o.pesdk.setAllOperationsToDirty(),a}return(0,b.Z)(n,[{key:"getProperties",value:function(){return{intensity:this.filterOperation.getOptions().intensity,lutImage:this.props.lutImage,horizontalTileCount:this.props.horizontalTileCount,verticalTileCount:this.props.verticalTileCount}}},{key:"setProperties",value:function(e){var t=this.filterOperation.getOptions(),n="number"===typeof e.intensity?e.intensity:t.intensity;this.filterOperation.set({intensity:n})}},{key:"getOperation",value:function(){return this.filterOperation}},{key:"getTypeIdentifier",value:function(){return"filter"}}]),n}(yE),RE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r){var o;return(0,_.Z)(this,n),(o=t.call(this,i)).props=e,o.blurOperation=r,o.type="mirrored-blur",o.setProperties(e),o}return(0,b.Z)(n,[{key:"getProperties",value:function(){return this.props}},{key:"setProperties",value:function(e){this.props=(0,C.Z)((0,C.Z)({},this.props),e);var t=this.blurOperation.getOptions(),n=this.engine.getOutputContainer(),i=n.getBounds(),r=this.getContainer(),o=n.getBaseLocalToParentMatrix(),a=zT.getBaseLocalToWorldMatrix(r),s=wT.multiply(wT.getInverted(o),a),l=Math.min(i.size.width,i.size.height);if(void 0!==e.blurRadius){var u=zT.scalarFromSpaceToSpace(e.blurRadius,r,n);t.blurRadius=u/l}if(void 0!==e.gradientSize){var c=zT.scalarFromSpaceToSpace(e.gradientSize,r,n)/l;t.gradientSize=c}if(void 0!==e.clearAreaWidth){var h=zT.scalarFromSpaceToSpace(e.clearAreaWidth,r,n)/l;t.size=.5*h}if(void 0!==e.mirrorAxisOrigin){var d=wT.transformPoint(s,e.mirrorAxisOrigin),f=zT.absoluteToRelativePoint(d,n,!1);t.start=f}if(void 0!==e.mirrorAxisDirection){var p=wT.transformPoint(s,e.mirrorAxisDirection),g=zT.absoluteToRelativePoint(p,n,!1);t.end=g}this.blurOperation.set(t)}},{key:"updateProperties",value:function(){var e=this.getProperties();this.setProperties(e)}},{key:"getOperation",value:function(){return this.blurOperation}},{key:"getTypeIdentifier",value:function(){return"mirrored-focus"}}]),n}(yE),OE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r,o){var a;return(0,_.Z)(this,n),(a=t.call(this,o)).settings=e,a.operation=i,a.flipOperation=r,a.type="output",a.flipTransform=wT.IDENTITY,a.blockTransformUpdate=!1,a.transformUpdateWhileBlock=!1,a.bounds=new xT({x:0,y:0},a.settings.resolution),a.setData(e),a}return(0,b.Z)(n,[{key:"pauseChildrenUpdates",value:,{key:"resumeChildrenUpdates",value:,{key:"setData",value:function(e){if(this.settings=(0,C.Z)((0,C.Z)({},this.settings),e),e.resolution&&(this.setBoundsFromSize(e.resolution.width,e.resolution.height),this.setTransform(this.transform),this.operation.set({outputResolution:new bE(e.resolution.width,e.resolution.height)})),void 0!==e.flipHorizontally){var t=e.flipHorizontally;this.updateFlipTransform(),this.flipOperation.set({flipHorizontally:t})}if(void 0!==e.flipVertically){var n=e.flipVertically;this.updateFlipTransform(),this.flipOperation.set({flipVertically:n})}this.operation.setDirty(!0),this.flipOperation.setDirty(!0)}},{key:"getData",value:function(){return this.settings}},{key:"setResolution",value:,{key:"getResolution",value:,{key:"setTransform",value:function(e){if(this.transform.rotation!==e.rotation||this.transform.position!==e.position||this.transform.scale!==e.scale){this.transform=e;var t=this.flipTransform;this.flipTransform=wT.IDENTITY;var n=this.engine.getRootContainers()[0],i=zT.pointFromSpaceToSpace({x:0,y:0},n,this),r=-e.rotation,o=bE.fromObject(i).clone().subtract(bE.fromObject(this.getBounds().origin));this.operation.set({pivot:new bE(0,0),position:o,scale:new bE(1/e.scale.x,1/e.scale.y),rotation:r}),this.flipTransform=t,this.operation.setDirty(!0),this.updateChildrenContainers()}}},{key:"rotate",value:function(e,t){var n=this.getPivot(),i=this.getBounds(),r={x:i.midX,y:i.midY},o=zT.getPointInWorldSpace(r,this);this.setPivot(.5,.5),this.setPosition(o),this.setRotation(e),this.setResolution(t);var a={x:-t.width*(.5-n.x),y:-t.height*(.5-n.y)},s=zT.getPointInWorldSpace(a,this);this.setPivot(n),this.setPosition(s),this.updateChildrenContainers()}},{key:"setPivot",value:function(e,t){(0,f.Z)((0,p.Z)(n.prototype),"setPivotInternal",this).call(this,e,t),this.setTransform(this.transform)}},{key:"getTransform",value:function(){return this.transform}},{key:"getBaseLocalToParentMatrix",value:,{key:"getLocalToParentMatrix",value:function(){var e=zT.rectTransformToAffineTransform(this.getTransform());return wT.multiply(e,this.flipTransform)}},{key:"getFlipTransformMatrix",value:function(){return this.flipTransform}},{key:"isValid",value:function(){return!0}},{key:"getOperation",value:function(){return this.operation}},{key:"updateFlipTransform",value:function(){var e=this.settings,t=e.flipHorizontally,n=e.flipVertically;if(t||n){var i=this.getPivot(),r=this.getBounds(),o=t?-1:1,a=t?-2*(i.x-.5)*r.width:0,s=n?-1:1,l=n?-2*(i.y-.5)*r.height:0;this.flipTransform=new wT(o,0,0,s,a,l)}else this.flipTransform=wT.IDENTITY}},{key:"updateChildrenContainers",value:function(){this.blockTransformUpdate?this.transformUpdateWhileBlock=!0:this.engine.rootOperations.forEach((function(e){aE(e)?(e.updateTransform(),"updateData"in e&&e.updateData()):"updateProperties"in e&&e.updateProperties()}))}}]),n}(xE),FE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r){var o;(0,_.Z)(this,n),(o=t.call(this,r)).overlayOperation=e,o.type="overlay";var a=i.blendMode||r.mapBlendMode(e.getBlendMode());return e.set({blendMode:r.reverseMapBlendMode(a)}),e.set({image:i.image}),r.pesdk.setAllOperationsToDirty(),o}return(0,b.Z)(n,[{key:"getProperties",value:function(){var e=this.overlayOperation.getOptions();return{image:e.image,blendMode:this.engine.mapBlendMode(e.blendMode),opacity:e.alpha}}},{key:"setProperties",value:function(e){var t=this.overlayOperation.getOptions();"number"===typeof e.opacity&&(t.alpha=e.opacity),void 0!==e.blendMode&&(t.blendMode=this.engine.reverseMapBlendMode(e.blendMode)),this.overlayOperation.set(t),this.overlayOperation.setDirty(!0)}},{key:"getOperation",value:function(){return this.overlayOperation}},{key:"getTypeIdentifier",value:function(){return"overlay"}},{key:"setFlipHorizontally",value:function(e){this.overlayOperation.setFlipHorizontally(e)}},{key:"setFlipVertically",value:function(e){this.overlayOperation.setFlipVertically(e)}},{key:"getFlipHorizontally",value:function(){return this.overlayOperation.getFlipHorizontally()}},{key:"getFlipVertically",value:function(){return this.overlayOperation.getFlipVertically()}}]),n}(yE),AE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r){var o;return(0,_.Z)(this,n),(o=t.call(this,i)).props=e,o.blurOperation=r,o.type="radial-blur",o.setProperties(e),o}return(0,b.Z)(n,[{key:"getProperties",value:function(){return this.props}},{key:"setProperties",value:function(e){this.props=(0,C.Z)((0,C.Z)({},this.props),e);var t=this.blurOperation.getOptions(),n=this.engine.getOutputContainer(),i=n.getBounds(),r=this.getContainer(),o=n.getBaseLocalToParentMatrix(),a=zT.getBaseLocalToWorldMatrix(r),s=wT.multiply(wT.getInverted(o),a),l=Math.min(i.size.width,i.size.height);if(void 0!==e.blurRadius){var u=zT.scalarFromSpaceToSpace(e.blurRadius,r,n);t.blurRadius=u/l}if(void 0!==e.center){var c=wT.transformPoint(s,e.center),h=zT.absoluteToRelativePoint(c,n,!1);t.position=h}if(void 0!==e.radius){var d=zT.scalarFromSpaceToSpace(e.radius,r,n)/l;t.radius=d}if(void 0!==e.gradientSize){var f=zT.scalarFromSpaceToSpace(e.gradientSize,r,n)/l;t.gradientRadius=f}this.blurOperation.set(t)}},{key:"updateProperties",value:,{key:"getOperation",value:function(){return this.blurOperation}},{key:"getTypeIdentifier",value:function(){return"radial-focus"}}]),n}(yE),PE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i){var r;(0,_.Z)(this,n),(r=t.call(this,i)).data=e,r.type="sticker";var o=e.image,a=r.engine.pesdk.parseExif(e.image);if(a){var s=a.getTags();if(s&&s.Orientation){var l=1!==s.Orientation&&2!==s.Orientation,u=-1!==[2,4,5,7].indexOf(s.Orientation);if(l||u){var c=r.engine.pesdk.createOperation("exif-orientation",{},!1);c.setTags(s),o=c.applyTo(e.image),a.setOrientation(1),s.Orientation=1}}}return o=new UC(o,{maxMegaPixels:{desktop:10,mobile:5}}).downscaleImageIfNecessary(),r.operation=i.createSpriteOperation(),r.sprite=r.operation.createSticker({identifier:"",image:o,position:new bE(0,0),dimensions:new bE(1,1),rotation:0,smoothDownscaling:!1}),r.operation.addSprite(r.sprite),r.bounds=new xT({x:0,y:0},{width:o.width,height:o.height}),r.setTransform(MT.IDENTITY),r.sprite.setPivot(new bE(0,0)),r.operation.setDirty(!0),r.setData(e),r}return(0,b.Z)(n,[{key:"setData",value:function(e){this.data=(0,C.Z)((0,C.Z)({},this.data),e),e.id&&(this.id=e.id),ST(e.opacity)&&e.opacity>=0&&this.sprite.setAlpha(e.opacity),e.tintColor&&this.sprite.setTintColor(_E(e.tintColor)),e.tintMode&&this.sprite.setTintMode(e.tintMode),this.operation.setDirty(!0)}},{key:"getData",value:function(){return this.data}},{key:"updateData",value:function(){this.setData(this.getData())}},{key:"setTransform",value:function(e){(0,f.Z)((0,p.Z)(n.prototype),"setTransform",this).call(this,e);var t=this.engine.getOutputContainer(),i=this.getParent(),r={width:this.bounds.width*e.scale.x,height:this.bounds.height*e.scale.y},o=zT.sizeFromSpaceToSpace(r,i,t);this.sprite.setDimensions(bE.fromSize(o));var a=zT.pointFromSpaceToSpace(e.position,i,t,!0),s=zT.absoluteToRelativePoint(a,t,!1);this.sprite.setPosition(new bE(s.x,s.y));var l=zT.getRotationBetweenCoordinateSpaces(i,t),u=e.rotation+l;this.sprite.setRotation(u),this.operation.setDirty(!0)}},{key:"setPivot",value:function(e,t){this.setPivotOnSelfAndSprite(this.sprite,e,t)}},{key:"getOperation",value:function(){return this.operation}},{key:"setFlipHorizontally",value:function(e){this.sprite.setFlipHorizontally(e)}},{key:"setFlipVertically",value:function(e){this.sprite.setFlipVertically(e)}},{key:"getFlipHorizontally",value:function(){return this.sprite.getFlipHorizontally()}},{key:"getFlipVertically",value:function(){return this.sprite.getFlipVertically()}}]),n}(xE);var ZE=function(){function e(t){(0,_.Z)(this,e),this.context=t,this.sourceLines=[],this.maxWidth=100}return(0,b.Z)(e,[{key:"getLines",value:function(){for(var t=[],n=[],i=this.sourceLines.length,r=0;r<i;r+=1){for(var o=this.sourceLines[r],a=e.buildWords(o),s=a.length,l=0;l<s;l+=1){var u=a[l],c=n.concat(u).join("").replace(/\s+$/i,"");if(this.getWidth(c)>this.maxWidth){n.length>0&&(t.push(n.join("")),n=[u]);var h=u.replace(/\s+$/i,"");if(this.getWidth(h)>this.maxWidth){var d=this.splitWord(u);t=t.concat(d.lines),d.rest&&(n=[d.rest])}}else n.push(u)}t.push(n.join("")),n=[]}return t}},{key:"splitWord",value:function(e){for(var t={lines:[],rest:null},n=e.length,i=[],r=0;r<n;r+=1){var o=e[r];this.getWidth(i.concat(o).join(""))>this.maxWidth?(i.length>0&&t.lines.push(i.join("")),i=[o]):i.push(o),r===n-1&&i.length>0&&(t.rest=i.join(""))}return t}},{key:"getWidth",value:function(e){return this.context.measureText(e).width}},{key:"setText",value:,{key:"setMaxWidth",value:function(e){this.maxWidth=e}}],[{key:"buildWords",value:function(e){for(var t=[],n="",i=e.length,r=0;r<i;r+=1){var o=e[r];n+=o," "!==o&&"-"!==o&&r!==i-1||(t.push(n),n="")}return t}}]),e}();function ME(e,t,n,i,r,o,a){e.font="".concat(n.fontStyle||"normal"," ").concat(n.fontWeight||"normal"," ").concat(i,'px "').concat(n.fontFamily,'"');var s=new ZE(e);s.setText(t),s.setMaxWidth(o);var l=s.getLines().map((function(e){return e.replace(/\s+$/i,"")})),u=function(e,t){if(t){var n=1/t.unitsPerEm*e,i=t.ascender*n,r=t.descender*n;return i+Math.abs(r)}return 1.1*e}(i,a),c=u*r,h=u/5;return{width:o+2*h,height:l.length*c+2*h}}var zE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i){var r;if((0,_.Z)(this,n),(r=t.call(this,i)).text=e,r.type="text",!n.measureContext){var o=document.createElement("canvas");n.measureContext=o.getContext("2d")}r.operation=i.createSpriteOperation();var a=r.engine.getOutputContainer(),s=r.getParent(),l=a.getBounds();r.sprite=r.operation.createText({text:e.text,position:new bE(0,0),rotation:0,fontSize:zT.scalarFromSpaceToSpace(e.fontSize/l.height,s,a),lineHeight:e.lineHeight,fontIdentifier:e.fontIdentifier,alignment:e.alignment,color:_E(e.textColor),backgroundColor:_E(e.backgroundColor),maxWidth:zT.scalarFromSpaceToSpace(e.width/l.width,s,a)});var u=i.assetProvider.getFontManager().getFontWithId(e.fontIdentifier);r.sprite.setFontFamily(u.fontFamily),r.sprite.setFontWeight(u.fontWeight||"normal"),r.sprite.setFontStyle(u.fontStyle||"normal"),r.sprite.setFontIdentifier(u.identifier),r.sprite.setTextMetrics(u.textMetrics),r.sprite.setPivot(new bE(0,0)),r.operation.addSprite(r.sprite);var c=ME(n.measureContext,e.text,u,e.fontSize,e.lineHeight,e.width,u.textMetrics);return r.bounds=new xT(0,0,c.width,c.height),r.setTransform(MT.IDENTITY),r.operation.setDirty(!0),r}return(0,b.Z)(n,[{key:"setData",value:function(e){this.text=(0,C.Z)((0,C.Z)({},this.text),e);var t=this.engine.assetProvider.getFontManager().getFontWithId(e.fontIdentifier||this.text.fontIdentifier);if(e.fontIdentifier&&(this.sprite.setFontFamily(t.fontFamily),this.sprite.setFontWeight(t.fontWeight||"normal"),this.sprite.setFontStyle(t.fontStyle||"normal"),this.sprite.setFontIdentifier(t.identifier),this.sprite.setTextMetrics(t.textMetrics)),e.id&&(this.id=e.id),e.text&&this.sprite.setText(e.text),e.fontSize){var i=this.engine.getOutputContainer(),r=this.getParent(),o=zT.scalarFromSpaceToSpace(e.fontSize,r,i),a=i.getBounds();this.sprite.setFontSize(o/a.height)}if(e.alignment&&this.sprite.setAlignment(e.alignment),e.lineHeight&&this.sprite.setLineHeight(e.lineHeight),e.textColor&&this.sprite.setColor(_E(e.textColor)),e.backgroundColor&&this.sprite.setBackgroundColor(_E(e.backgroundColor)),e.width){var s=this.engine.getOutputContainer(),l=this.getParent(),u=zT.scalarFromSpaceToSpace(e.width,l,s),c=s.getBounds();this.sprite.setMaxWidth(u/c.width)}var h=ME(n.measureContext,this.text.text,t,this.text.fontSize,this.text.lineHeight,this.text.width,t.textMetrics);this.setBoundsFromSize(h.width,h.height),this.operation.setDirty(!0)}},{key:"getData",value:function(){return this.text}},{key:"updateData",value:function(){this.setData(this.getData())}},{key:"setTransform",value:function(e){(0,f.Z)((0,p.Z)(n.prototype),"setTransform",this).call(this,e);var t=this.engine.getOutputContainer(),i=this.getParent(),r=zT.pointFromSpaceToSpace(e.position,i,t,!0),o=zT.absoluteToRelativePoint(r,t,!1);this.sprite.setPosition(new bE(o.x,o.y));var a=zT.getRotationBetweenCoordinateSpaces(i,t);this.sprite.setRotation(e.rotation+a),this.operation.setDirty(!0)}},{key:"setPivot",value:,{key:"getOperation",value:function(){return this.operation}},{key:"setFlipHorizontally",value:function(e){this.sprite.setRotation(this.getFlippedRotation({flipHorizontally:e})),this.sprite.setFlipHorizontally(e)}},{key:"setFlipVertically",value:function(e){this.sprite.setRotation(this.getFlippedRotation({flipVertically:e})),this.sprite.setFlipVertically(e)}},{key:"getFlipHorizontally",value:function(){return this.sprite.getFlipHorizontally()}},{key:"getFlipVertically",value:function(){return this.sprite.getFlipVertically()}},{key:"getFlippedRotation",value:function(e){var t=e.flipVertically,n=e.flipHorizontally,i=t||this.getFlipVertically(),r=n||this.getFlipHorizontally(),o=this.getRotation();return(i||r)&&(o=sE(o)),o}}]),n}(xE),BE=1e3,LE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e,i,r){var o;(0,_.Z)(this,n),(o=t.call(this,r)).textDesign=e,o.layout=i,o.type="text-design",o.currentLayoutSize=void 0,o.layoutID=i.identifier,o.operation=r.createSpriteOperation();var a=o.engine.getOutputContainer(),s=o.getParent(),l=a.getBounds(),u=Math.min(l.width,l.height);i.seed(e.seed),o.bounds=o.calculateBounds(o.textDesign,o.layout);var c=e.width;return o.sprite=o.operation.createTextDesign({text:e.text,layout:i,inverted:e.inverted,color:_E(e.color),width:zT.scalarFromSpaceToSpace(e.width/u,s,a),padding:e.padding/c,seed:e.seed}),o.updatePivot(),o.operation.addSprite(o.sprite),o.setTransform(MT.IDENTITY),o.operation.setDirty(!0),o}return(0,b.Z)(n,[{key:"calculateBounds",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.inverted&&n?Math.max(0,2*e.padding):0,r=e.width/BE;if(void 0===this.currentLayoutSize){t.seed(e.seed);var o=t.generateLayoutData(e.text,BE);this.currentLayoutData=o,this.currentLayoutSize=o.getSize()}return new xT(0,0,this.currentLayoutSize.width*r+i,this.currentLayoutSize.height*r+i)}},{key:"findNextUniqueSeed",value:function(e,t,i){for(var r,o=i,a=this.currentLayoutData?n.stringify(this.currentLayoutData.getRows()):"",s=0;s<20&&(t.seed(o),r=t.generateLayoutData(e.text,BE),a===n.stringify(r.getRows()));s+=1)o+=1;return t.seed(o),this.currentLayoutData=r,o}},{key:"setData",value:function(e){if(this.textDesign=(0,C.Z)((0,C.Z)({},this.textDesign),e),e.id&&(this.id=e.id),void 0!==e.padding){var t=this.textDesign.width;this.sprite.setPadding(e.padding/t)}else e.width&&(this.textDesign.padding=this.sprite.getPadding()*this.textDesign.width);if(void 0!==e.seed&&(e.seed<0&&(e.seed=this.findNextUniqueSeed(this.textDesign,this.layout,Date.now()),this.textDesign.seed=e.seed),this.currentLayoutSize=void 0,this.layout.seed(e.seed),this.sprite.setSeed(e.seed),this.sprite.setLayout(this.layout)),e.color&&this.sprite.setColor(_E(e.color)),void 0!==e.inverted&&this.sprite.setInverted(e.inverted),e.text&&(this.currentLayoutSize=void 0,this.sprite.setText(e.text)),e.width){var n=this.engine.getOutputContainer(),i=this.getParent(),r=n.getBounds(),o=Math.min(r.width,r.height),a=zT.scalarFromSpaceToSpace(e.width/o,i,n);this.sprite.setWidth(a)}if(void 0!==e.padding||void 0!==e.seed||void 0!==e.inverted||e.text||e.width){var s=this.calculateBounds(this.textDesign,this.layout);this.setBoundsFromSize(s.width,s.height),this.updatePivot()}this.operation.setDirty(!0)}},{key:"getData",value:function(){return this.textDesign}},{key:"updateData",value:,{key:"setTransform",value:function(e){(0,f.Z)((0,p.Z)(n.prototype),"setTransform",this).call(this,e);var t=this.engine.getOutputContainer(),i=this.getParent();if(1!==e.scale.x||1!==e.scale.y)throw new Error("This engine doesn't support scaling TextDesign containers! You can change the bounds using the width property of the TextDesign data.");var r=zT.pointFromSpaceToSpace(e.position,i,t,!0),o=zT.absoluteToRelativePoint(r,t,!1);this.sprite.setPosition(new bE(o.x,o.y));var a=zT.getRotationBetweenCoordinateSpaces(i,t);this.sprite.setRotation(e.rotation+a),this.operation.setDirty(!0)}},{key:"setPivot",value:function(e,t){"number"===typeof e?(0,f.Z)((0,p.Z)(n.prototype),"setPivot",this).call(this,e,t):(0,f.Z)((0,p.Z)(n.prototype),"setPivot",this).call(this,e),this.updatePivot()}},{key:"getOperation",value:function(){return this.operation}},{key:"getLayoutID",value:function(){return this.layoutID}},{key:"setFlipHorizontally",value:function(e){this.sprite.setFlipHorizontally(e)}},{key:"setFlipVertically",value:function(e){this.sprite.setFlipVertically(e)}},{key:"getFlipHorizontally",value:function(){return this.sprite.getFlipHorizontally()}},{key:"getFlipVertically",value:function(){return this.sprite.getFlipVertically()}},{key:"updatePivot",value:function(){var e=this.textDesign.inverted?Math.max(0,this.textDesign.padding):0,t=new TC(this.bounds.width-2*e,this.bounds.height-2*e),n=this.getPivot(),i=new TC(n.x*this.bounds.width,n.y*this.bounds.height),r=new TC(e,e),o=i.subtract(r).divide(t);this.sprite.setPivot(new bE(o.x,o.y))}}],[{key:"stringify",value:,{key:"serializer",value:function(){var e=[],t=[],n=function(n,i){return e[0]===i?"[Circular ~]":"[Circular ~.".concat(t.slice(0,e.indexOf(i)).join("."),"]")};return function(i,r){var o=this;if(e.length>0){var a=e.indexOf(o);~a?(e.splice(a+1),t.splice(a,1/0,i)):(e.push(o),t.push(i)),~e.indexOf(r)&&(r=n.call(o,i,r))}else e.push(r);return r}}}]),n}(xE),UE=av.Operations.OverlayOperation.BLEND_MODES,NE="imgly_font_open_sans_bold",HE=function(e){(0,k.Z)(n,e);var t=(0,w.Z)(n);function n(e){var i,o,a,s;if((0,_.Z)(this,n),(i=t.call(this,e)).previews=Array(),i.rootOperationStack=[],i.deferredRenderQueue=[],i.operationStackOffset=1,i.enforceOperationOrder=i.isSpriteTop=function(e){var t=i.rootOperationStack.findIndex((),n=1;return i.rootOperationStack.find(()&&(n+=1),t+n===i.rootOperationStack.length},i.setWatermarkOpacity=function(e){var t=i.sdk.getOperationsStack().getByIdentifier("watermark");t&&t.set({alpha:e})},i.assetProvider=e.assetProvider||new _T,(null==(o=null==e?void 0:e.watermark)?void 0:o.watermarkURI)&&"string"===typeof e.watermark.watermarkURI&&"data:"===e.watermark.watermarkURI.slice(0,5)?s=e.watermark.watermarkURI:(null==(a=null==e?void 0:e.watermark)?void 0:a.watermarkURI)&&"string"===typeof e.watermark.watermarkURI&&e.watermark.watermarkURI.trim()&&(s=nT(e.watermark.watermarkURI)?e.watermark.watermarkURI:i.assetProvider.getPath(e.watermark.watermarkURI)),i.wrapper=new gE({license:e.license,crossOrigin:e.crossOrigin,assets:{resolver:function(e,t){return i.resolveAssetForSDK(e,t)}},editor:{preferredRenderer:e.preferredRenderer,pixelRatio:1,clearColor:uw(e.backgroundColor)},watermark:(0,C.Z)((0,C.Z)({},uw(e.watermark)),{},{watermarkURI:s})}),i.editor=i.wrapper.getEditor(),i.sdk=i.editor.getSDK(),i.sdk.setRenderMode("adapter"),i.tempCanvas=document.createElement("canvas"),i.sdk.setCanvas(i.tempCanvas),"webgl"===e.preferredRenderer){var l=document.createElement("canvas"),u=l.getContext("webgl")||l.getContext("experimental-webgl");i.maxTextureDimension=u.getParameter(u.MAX_TEXTURE_SIZE),r(l)}else i.maxTextureDimension=1/0;return i}return(0,b.Z)(n,[{key:"configuration",get:function(){return this.config}},{key:"pesdk",get:function(){return this.sdk}},{key:"rootOperations",get:function(){return this.rootOperationStack}},{key:"dispose",value:,{key:"render",value:function(e){var t=this;return new Promise((function(n){var i=function(){return new Promise((function(i){var r=e.canvas,o=e.getTransform(),a=t.outputContainer.getPivot(),s=e.getCanvasBounds(),l=e.quality,u=t.tempCanvas;t.sdk.setTextureQuality(l);var c=t.sdk.getOutputDimensions();return u.width=c.x,u.height=c.y,t.sdk.getRenderer().resizeTo(new bE(u.width,u.height)),t.sdk.render(!0).then((function(){var l=r.getContext("2d");l.clearRect(0,0,r.width,r.height),l.save(),l.translate(-s.minX,-s.minY),l.translate(o.position.x,o.position.y),l.rotate(o.rotation),l.scale(o.scale.x,o.scale.y),l.translate(-a.x*u.width,-a.y*u.height),l.scale(1/e.quality,1/e.quality),l.drawImage(u,0,0),l.restore(),n(),t.deferredRenderQueue.shift(),t.deferredRenderQueue.length?(t.sdk.setAllOperationsToDirty(),Promise.resolve(t.deferredRenderQueue[0]().then(i))):i()}))}))};t.deferredRenderQueue.push(i),1===t.deferredRenderQueue.length&&i()}))}},{key:"createPreview",value:function(e){var t=new oE(e,this);return this.previews.push(t),t}},{key:"export",value:function(){var e=(0,y.Z)(D().mark((function e(){var t,n,i,r,o=this,a=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"image",n=a.length>1&&void 0!==a[1]?a[1]:"image/png",i=a.length>2&&void 0!==a[2]?a[2]:1,r=!(a.length>3&&void 0!==a[3])||a[3],e.abrupt("return",new Promise((function(e){var a=function(){return new Promise((function(a){return o.sdk.export(o.mapToRenderType(t),o.mapToImageFormat(n),i,r).then((function(t){e(t),o.deferredRenderQueue.shift(),o.deferredRenderQueue.length?Promise.resolve(o.deferredRenderQueue[0]().then(a)):a()}))}))};o.deferredRenderQueue.push(a),1===o.deferredRenderQueue.length&&a()})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getRootContainers",value:,{key:"getOutputContainer",value:function(){return this.outputContainer}},{key:"findContainerByID",value:function(e){return e===this.rootContainer.getID()?this.rootContainer:this.rootOperationStack.find((function(t){return t.getID()===e}))}},{key:"findEffectByID",value:,{key:"addImage",value:function(e,t,n){if(this.rootContainer)throw new Error("A background image already exists - did you mean to use addSticker?");var i=new EE(e,this);if(this.rootContainer=i,!this.outputContainer){var r=i.getBounds(),o={resolution:{width:r.width,height:r.height},flipHorizontally:!1,flipVertically:!1},a=this.sdk.createOperation("output",{},!1),s=this.sdk.createOperation("flip",{},!1);this.insertIntoOperationsStack(a,this.operationStackOffset-1),this.insertIntoOperationsStack(s,this.operationStackOffset),this.outputContainer=new OE(o,a,s,this)}return i}},{key:"addSticker",value:function(e,t,n){if(!t)throw new Error("This engine does not support adding stickers as root elements.");this.ensureContainerIsRoot(t);var i=new PE(e,this);return this.addToStackAtIndex(i,n),i}},{key:"addStickerFromAssets",value:function(e,t,n){var i=this;if(!t)throw new Error("This engine does not support adding stickers as root elements.");return this.ensureContainerIsRoot(t),new Promise((function(t,r){var o=new Image;o.onload=function(){var e=new PE({image:o,opacity:1},i);i.addToStackAtIndex(e,n),t(e)},o.onerror=o.crossOrigin=i.config.crossOrigin||null,o.src=i.assetProvider.getAssetSource("sticker",e)}))}},{key:"addText",value:function(e,t,n){if(!t)throw new Error("This engine does not support adding text as root elements.");if(!this.assetProvider.getFontManager().isFontLoaded(e.fontIdentifier||NE))throw new Error("Adding text synchronously only works if the required font is already loded! Consider using the asynchronous addTextWithFontLoading function instead!");this.ensureContainerIsRoot(t);var i=(0,C.Z)({text:"",fontIdentifier:NE,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},e),r=new zE(i,this);return this.addToStackAtIndex(r,n),r}},{key:"addTextWithFontLoading",value:function(e,t,n){var i=this;if(!t)throw new Error("This engine does not support adding text as root elements.");var r=this.assetProvider.getFontManager(),o=e.fontIdentifier||NE;return new Promise((function(a,s){r.loadFontWithIdentifier(o).then((function(){i.ensureContainerIsRoot(t);var r=(0,C.Z)({text:"",fontIdentifier:NE,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},e),o=new zE(r,i);i.addToStackAtIndex(o,n),a(o)})).catch(s)}))}},{key:"addTextDesignAsync",value:function(){var e=(0,y.Z)(D().mark((function e(){var t,n,i,r,o,a,s,l,u,c,h,d,f=this,p=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:"imgly_text_design_blocks",n=p.length>1?p[1]:void 0,i=p.length>2?p[2]:void 0,r=p.length>3?p[3]:void 0,i){e.next=6;break}throw new Error("This engine does not support adding TextDesign as a root element.");case 6:if(o=(0,C.Z)({seed:Date.now(),padding:0,text:"",color:[0,0,0],inverted:!1,width:100},n),a=this.wrapper.getTextDesignLayoutByID(t)){e.next=10;break}throw new Error("The layout could not be loaded for the given id: ".concat(t));case 10:return s=a.getImagePaths().map((function(e){var t=e.split("/").pop()||"";return{path:e,fullPath:f.assetProvider.getAssetSource("textdesign",t)}})),l=this.wrapper.getTextDesignAssetManager(),u=this.wrapper.getTextDesignFontManager(),c=u.getVariationsByIdentifier(),l.setFonts(c),e.next=17,l.loadImages(s);case 17:return a.onImagesLoaded(),h=Object.keys(c),d=this.assetProvider.getFontManager(),e.abrupt("return",d.loadFontsWithIdentifiers(h).then((function(){f.ensureContainerIsRoot(i);var e=new LE(o,a,f);return f.addToStackAtIndex(e,r),Promise.resolve(e)})));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addDrawing",value:function(e,t,n){if(!t)throw new Error("This engine does not support DrawingContainers as root elements.");this.ensureContainerIsRoot(t);var i=new kE(e,this);return this.addToStackAtIndex(i,n),i}},{key:"addGaussianBlur",value:function(e,t,n){this.ensureContainerIsRoot(t);var i=new TE(e,this,this.sdk.createOperation("blur",{},!1));return this.addToStackAtIndex(i,n),i}},{key:"addRadialBlur",value:function(e,t,n){this.ensureContainerIsRoot(t);var i=new AE(e,this,this.sdk.createOperation("radial-focus",{},!1));return this.addToStackAtIndex(i,n),i}},{key:"addMirroredBlur",value:function(e,t,n){this.ensureContainerIsRoot(t);var i=new RE(e,this,this.sdk.createOperation("mirrored-focus",{},!1));return this.addToStackAtIndex(i,n),i}},{key:"addLinearBlur",value:function(e,t,n){this.ensureContainerIsRoot(t);var i=new DE(e,this,this.sdk.createOperation("linear-focus",{},!1));return this.addToStackAtIndex(i,n),i}},{key:"addDuoToneFilter",value:function(e,t,n){throw new Error("Not supported! Use addDuoToneFilterFromAssets instead")}},{key:"addDuoToneFilterFromAssets",value:function(e,t,n){var i=this;this.ensureContainerIsRoot(t);var r=this.sdk.getOperationsStack().getByIdentifier("filter");r&&r.getIdentifier()!==e&&this.sdk.removeOperation(r);var o=r||this.sdk.createOperation("filter",{identifier:e},!1);return new Promise((function(t,r){try{var a=i.assetProvider.getDuotoneFilterAsset(e),s={colorIntensity:a.defaultIntensity||0},l=new av.Operations.FilterOperation.Filters.DuoToneFilter({intensity:s.colorIntensity,lightColor:av.Color.fromHex(a.lightColor),darkColor:av.Color.fromHex(a.darkColor)}),u=new wE(l,o,s,i);i.addToStackAtIndex(u,n),t(u)}catch(a){a&&r(a)}}))}},{key:"addLUTFilter",value:function(e,t,n){throw new Error("Not supported! Use addLUTFilterFromAssets instead")}},{key:"addLUTFilterFromAssets",value:function(e,t,n){var i=this;this.ensureContainerIsRoot(t);var r=this.sdk.getOperationsStack().getByIdentifier("filter");r&&r.getIdentifier()!==e&&this.sdk.removeOperation(r);var o=r||this.sdk.createOperation("filter",{identifier:e},!1);return this.getLutFilterImage(e).then((function(t){var r=i.assetProvider.getLUTFilterAsset(e),a={horizontalTileCount:r.horizontalTileCount||5,verticalTileCount:r.verticalTileCount||5,intensity:r.defaultIntensity||1},s=new av.Operations.FilterOperation.Filters.ThreeDLUTFilter((0,C.Z)((0,C.Z)({},a),{},{image:t})),l=(0,C.Z)((0,C.Z)({},a),{},{lutImage:new Image}),u=new IE(s,o,l,i);return i.addToStackAtIndex(u,n),u}))}},{key:"getLutFilterImage",value:function(e){var t=this;return new Promise((function(n,i){JC({src:t.assetProvider.getAssetSource("filter",e),crossOrigin:t.config.crossOrigin||null,key:"filter",resolve:n,reject:i})}))}},{key:"addAdjustments",value:function(e,t,n){this.ensureContainerIsRoot(t);var i=new vE(e,this,this.sdk.createOperation("adjustments",{},!1));return this.addToStackAtIndex(i,n),i}},{key:"addOverlay",value:function(e,t,n){this.ensureContainerIsRoot(t);var i=new FE(this.sdk.createOperation("overlay",{},!1),e,this);return this.addToStackAtIndex(i,n),i}},{key:"addOverlayFromAssets",value:function(e,t,n){var i=this;return this.ensureContainerIsRoot(t),new Promise((function(t,r){JC({src:i.assetProvider.getAssetSource("overlay",e),crossOrigin:i.config.crossOrigin||null,key:"overlay",resolve:function(r){var o=i.sdk.getOperationsStack(),a=o.getByIdentifier("overlay");a&&a.getIdentifier()!==e&&o.remove(a);var s=a||i.sdk.createOperation("overlay",{},!1),l=new FE(s,{image:r,opacity:1,blendMode:"normal"},i);i.addToStackAtIndex(l,n),t(l)},reject:r})}))}},{key:"addFrame",value:,{key:"addFrameFromAssets",value:function(){var e=(0,y.Z)(D().mark((function e(t,n,i){var r,o,a,s,l,u,c;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureContainerIsRoot(n),r=this.assetProvider.getFrameAsset(t)){e.next=4;break}throw new Error("The requested asset does not exist! ".concat(t));case 4:return o=new SE(r,this),e.next=7,o.load();case 7:return a=this.getOutputContainer().getBounds(),s=Math.min(a.width,a.height),(l=this.sdk.createOperation("frame",{},!1)).setFrame(o.getFrame()),u={opacity:1,tintColor:[1,1,1],tintable:!1,width:Math.max(1,.1*s),imageGroups:o.getFrame().imageGroups},c=new CE(l,u,this),this.addToStackAtIndex(c,i),e.abrupt("return",Promise.resolve(c));case 15:case"end":return e.stop()}}),e,this)})));return ()},{key:"removeEffect",value:function(e){if(e.isValid()){var t=e.getOperation();this.sdk.removeOperation(t),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(e.getIndexInParent(),1)}}},{key:"removeContainer",value:function(e){if(e.isValid()&&"output"!==e.type){var t=e.getOperation();this.sdk.removeOperation(t),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(e.getIndexInParent(),1)}}},{key:"refreshOutputIndex",value:function(){var e=this.sdk.getOperationsStack().getIndexByIdentifier("output");this.moveInOperationsStack(e,this.operationStackOffset-1)}},{key:"refreshFlipIndex",value:function(){var e=this.sdk.getOperationsStack().getIndexByIdentifier("flip"),t=this.sdk.getOperationsStack().getStack().length-1;e!==t&&this.moveInOperationsStack(e,t)}},{key:"refreshFrameIndex",value:function(){var e=this.sdk.getOperationsStack().getIndexByIdentifier("frame"),t=this.sdk.getOperationsStack().getStack().length-1;-1!==e&&e!==t&&this.moveInOperationsStack(e,t)}},{key:"mapToRenderType",value:function(e){switch(e){case"image":default:return av.RenderType.IMAGE;case"data-url":return av.RenderType.DATAURL;case"blob":return av.RenderType.BLOB;case"ms-blob":return av.RenderType.MSBLOB}}},{key:"mapToImageFormat",value:,{key:"mapBlendMode",value:function(e){switch(e){case UE.NORMAL:return"normal";case UE.OVERLAY:return"overlay";case UE.HARD_LIGHT:return"hardLight";case UE.SOFT_LIGHT:return"softLight";case UE.MULTIPLY:return"multiply";case UE.DARKEN:return"darken";case UE.LIGHTEN:return"lighten";case UE.SCREEN:return"screen";case UE.COLOR_BURN:return"colorBurn";default:return"normal"}}},{key:"reverseMapBlendMode",value:function(e){switch(e){case"normal":default:return UE.NORMAL;case"overlay":return UE.OVERLAY;case"hardLight":return UE.HARD_LIGHT;case"softLight":return UE.SOFT_LIGHT;case"multiply":return UE.MULTIPLY;case"darken":return UE.DARKEN;case"lighten":return UE.LIGHTEN;case"screen":return UE.SCREEN;case"colorBurn":return UE.COLOR_BURN}}},{key:"createSpriteOperation",value:function(){return this.sdk.createOperation("sprite",{},!1)}},{key:"moveIndex",value:function(e,t){var n=this.getSiblingIndex(e);if(-1===n)throw new Error("The item to be moved is not part of any stack.");this.moveInStack(this.rootOperationStack,n,t);var i=this.operationStackOffset;this.moveInOperationsStack(n+i,t+i),this.enforceOperationOrder()}},{key:"ensureContainerIsRoot",value:function(e){if(e.getID()!==this.rootContainer.getID())throw new Error("This engine doesn't support adding this effect/container to anything other than the root image container")}},{key:"addToStackAtIndex",value:function(e,t){if(t&&t<0)throw new Error("The given index may not be negative: ".concat(t));void 0===t?this.rootOperationStack.push(e):this.rootOperationStack.splice(t,0,e);var n=this.rootOperationStack.length-1,i=void 0!==t?t:n;i+=this.operationStackOffset,e),this.insertIntoOperationsStack(e.getOperation(),i),this.sdk.setAllOperationsToDirty()}},{key:"insertIntoOperationsStack",value:function(e,t){for(var n=this.sdk.getOperationsStack().getStack(),i=n.length,r=Math.max(Math.min(t,i),0),o=i-1;o>=r;o-=1){var a=n[o];n[o+1]=a}n[r]=e,this.sdk.setAllOperationsToDirty(),this.enforceOperationOrder()}},{key:"moveInStack",value:function(e,t,n){var i=e.length,r=Math.max(Math.min(t,i-1),0),o=Math.max(Math.min(n,i-1),0);if(r!==o){var a=e[r];if(r<o)for(var s=r+1;s<=o;s+=1)e[s-1]=e[s];else for(var l=r-1;l>=o;l-=1)e[l+1]=e[l];e[o]=a}}},{key:"moveInOperationsStack",value:function(e,t){var n=this.sdk.getOperationsStack().getStack(),i=n.length,r=Math.min(Math.max(0,e),i-1),o=Math.min(Math.max(0,t),i-1);if(r!==o){var a=n[r];if(r<o)for(var s=r+1;s<=o;s+=1)n[s-1]=n[s];else for(var l=r-1;l>=o;l-=1)n[l+1]=n[l];n[o]=a,this.sdk.getOperationsStack().setAllToDirty()}}},{key:"getSiblingIndex",value:function(e){return e.getIndexInParent()}},{key:"resolveAssetForSDK",value:function(e,t){switch(t=t,e){case"filter":return this.assetProvider.getAssetSource("filter",t.identifier);case"overlay":return this.assetProvider.getAssetSource("overlay",t.identifier);case"font":return this.assetProvider.getAssetSource("font",t.identifier);default:return""}return""}}]),n}(mE),jE=function(){function e(t){var n=this;(0,_.Z)(this,e),this.isEmpty=!1,this.isValid=!1,this.isWhiteLabel=this.areCustomAssetsAllowed=function(){return n.isEmpty||!n.isValid||n.licenseChecker.areCustomAssetsAllowed()},t&&0!==t.length?(this.licenseChecker=new av.LicenseChecker(t),this.isValid=this.licenseChecker.validate()):""===t&&(this.isEmpty=!0)}return(0,b.Z)(e,[{key:"isToolAllowed",value:function(e){return!this.licenseChecker||!this.isValid||"customTool"===e||this.licenseChecker.isToolAllowed(e)}}]),e}()},52286:function(e,t,n){"use strict";n.d(t,{A:function(){return vp},C:function(){return vh},F:function(){return Bd},G:function(){return qp},H:function(){return Wg},I:function(){return $m},J:function(){return gy},L:function(){return my},M:function(){return yy},N:function(){return ky},O:function(){return qy},P:function(){return Yy},Q:function(){return Xy},R:function(){return Qd},S:function(){return Vy},a:function(){return Ts},b:function(){return Is},c:function(){return Fs},e:function(){return du},g:function(){return To},l:function(){return lc},m:function(){return Ho},n:function(){return jo},o:function(){return fc},p:function(){return pc},q:function(){return mc},t:function(){return $d},u:function(){return Nf},v:function(){return hp},w:function(){return dp},x:function(){return fp},y:function(){return gp},z:function(){return mp}});var i,r,o,a,s,l,u,c,h,d,f,p,g,m,y,v,_,b,x,k,w,S,C,T,E,D,I,R,O,F,A,P,Z,M,z,B,L,U,N,H,j,W,V,G,q,Y,X,K,J,Q,$,ee,te,ne,ie,re,oe,ae,se,le,ue,ce,he,de,fe,pe,ge,me,ye,ve,_e,be,xe,ke,we,Se,Ce,Te,Ee,De,Ie,Re,Oe,Fe,Ae,Pe,Ze,Me,ze,Be,Le,Ue,Ne,He,je,We,Ve,Ge,qe,Ye,Xe,Ke,Je,Qe,$e,et,tt,nt,it,rt,ot,at,st,lt,ut,ct,ht,dt,ft,pt,gt,mt,yt,vt,_t,bt,xt,kt,wt,St,Ct,Tt,Et,Dt,It,Rt,Ot,Ft,At,Pt,Zt,Mt,zt,Bt,Lt,Ut,Nt,Ht,jt,Wt,Vt,Gt,qt,Yt,Xt,Kt,Jt,Qt,$t,en,tn,nn,rn,on,an,sn,ln,un,cn,hn,dn,fn,pn,gn,mn,yn,vn,_n,bn,xn,kn,wn,Sn,Cn,Tn,En,Dn,In,Rn,On,Fn,An,Pn,Zn,Mn,zn,Bn,Ln,Un,Nn,Hn,jn,Wn,Vn,Gn,qn,Yn,Xn,Kn,Jn,Qn,$n,ei,ti,ni,ii,ri,oi,ai,si,li,ui,ci,hi,di,fi,pi,gi,mi,yi,vi,_i,bi,xi,ki,wi,Si,Ci,Ti,Ei,Di,Ii,Ri,Oi,Fi,Ai,Pi,Zi,Mi,zi,Bi,Li,Ui,Ni,Hi,ji,Wi,Vi,Gi,qi,Yi,Xi,Ki,Ji,Qi,$i,er,tr,nr,ir,rr,or,ar,sr,lr,ur,cr,hr,dr,fr,pr,gr,mr,yr,vr,_r,br,xr,kr,wr,Sr,Cr,Tr,Er,Dr,Ir,Rr,Or,Fr,Ar,Pr,Zr=n(15861),Mr=n(93433),zr=n(97326),Br=n(4942),Lr=n(29439),Ur=n(1413),Nr=n(45987),Hr=n(15671),jr=n(43144),Wr=n(60136),Vr=n(29388),Gr=n(30168),qr=n(64687),Yr=n.n(qr),Xr=n(15444),Kr=n(53115),Jr=n(47313),Qr=n(1168),$r=["isActive","isDisabled","label","ariaLabel","children","className"],eo=["label","children","icon","fullWidth","isDisabled"],to=["label","icon","children"],no=["position","defaultPosition","rotation","defaultClassName","defaultClassNameDragging","defaultClassNameDragged"],io=["enableRotation","enableFlip"],ro=["preventExportEvent"],oo=["type"],ao=["style","children"],so=(0,Xr.a)((function(e,t){var i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),h=Object.prototype.toString,d=Math.max,f=Math.min,p=function(){return c.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=o.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):r.test(e)?NaN:+e}t.exports=)),lo=(0,Xr.a)((function(e,t){var i="Expected a function",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,h=u||c||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,g=xports=)),uo=Kr.ZP.div(i||(i=(0,Gr.Z)(["\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n  right: 0;\n  top: 13px;\n"])),(function(e){return e.theme.dropdown.caretColor}),(function(e){return e.rotation||0})),co=(0,Kr.iv)(r||(r=(0,Gr.Z)(["\n  &:focus {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n  &:-moz-focusring {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n"])),(function(e){return e.theme.focusOutlineColor}),(function(e){return e.theme.focusOutlineColor})),ho=(0,Kr.iv)(o||(o=(0,Gr.Z)(["\n  position: absolute !important;\n  height: 1px;\n  width: 1px;\n  overflow: hidden;\n  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n  clip: rect(1px, 1px, 1px, 1px);\n"]))),fo=(0,Kr.F4)(a||(a=(0,Gr.Z)(["\nfrom {\n  opacity: 1;\n  transform: scale(0);\n}\nto {\n  opacity: 0;\n  transform: scale(10);\n}\n"]))),po=Kr.ZP.span(s||(s=(0,Gr.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]))),go=(0,Kr.ZP)(po)(l||(l=(0,Gr.Z)([""]))),mo=(0,Kr.ZP)(po)(u||(u=(0,Gr.Z)([""]))),yo=(0,Kr.ZP)(po)(c||(c=(0,Gr.Z)([""]))),vo={display:"none",left:0,top:0},_o=(0,Kr.ZP)(po)(h||(h=(0,Gr.Z)(["\n  display: ",";\n  left: ","px;\n  top: ","px;\n  pointer-events: none;\n  border-radius: 50%;\n  background-color: rgba(255, 255, 255, 0.12);\n  animation: "," 1.2s;\n  width: 100px;\n  height: 100px;\n  margin-top: -50px;\n  margin-left: -50px;\n  opacity: 0;\n"])),(function(e){return e.display}),(function(e){return e.left}),(function(e){return e.top}),fo),bo=(0,Kr.iv)(d||(d=(0,Gr.Z)(["\n  color: ",";\n  border-color: ",";\n\n  svg {\n    color: ",";\n  }\n"])),(function(e){return e.theme.button.activeForeground}),(function(e){return e.theme.button.activeForeground}),(function(e){return e.theme.button.activeForeground})),xo=Kr.ZP.button(f||(f=(0,Gr.Z)(["\n  &&& {\n    box-sizing: border-box;\n  }\n  text-align: center;\n  position: relative;\n  padding: 4px 8px;\n  min-height: 32px;\n  border-radius: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-family: ",", sans-serif;\n  cursor: pointer;\n  border: none;\n  background-color: transparent;\n  overflow: hidden;\n  ","\n\n  /* Active */\n\n  &:active {\n    ","\n  }\n\n  ","\n\n  /* Disabled */\n\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n\n    "," {\n      background-color: ",";\n    }\n  }\n\n  /* Hover */\n\n  &:hover {\n    "," {\n      background-color: ",";\n    }\n  }\n\n  div {\n    font-size: ","px;\n    letter-spacing: ","px;\n  }\n"])),(function(e){return e.theme.shape.radiusMedium}),(function(e){return e.theme.measurements.fontSystem.button1.size}),(function(e){return e.theme.measurements.fontSystem.button1.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.button1.case}),(function(e){return e.theme.typography.fontFamily}),co,bo,(function(e){return e.isActive&&bo}),mo,(function(e){return e.theme.button.outlinedInactiveOverlayColor}),yo,(function(e){return e.theme.button.hoverOverlayColor}),(function(e){return e.theme.measurements.fontSystem.button1.size}),(function(e){return e.theme.measurements.fontSystem.button1.letterSpacing})),ko=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(){var e;return(0,Hr.Z)(this,n),(e=t.apply(this,arguments)).state=vo,e.timeout=null,e.onClick=function(t){var n=t.currentTarget.getBoundingClientRect(),i=t.pageX-n.left,r=t.pageY-n.top;"block"===e.state.display?e.setState({display:"none"},():e.setRippleState(i,r),e.props.onClick(t)},e.setRippleState=function(t,n){e.setState({left:t,top:n,display:"block"}),e.timeout=setTimeout((,1200)},e}return(0,jr.Z)(n,[{key:"componentWillUnmount",value:,{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.isDisabled,i=e.label,r=e.ariaLabel,o=e.children,a=e.className,s=(0,Nr.Z)(e,$r),l=this.state,u=l.left,c=l.top,h=l.display;return Jr.createElement(xo,(0,Ur.Z)((0,Ur.Z)({"data-test":r,className:a,isActive:t,disabled:n,"aria-label":r},s),{},{onClick:this.onClick}),i,o,Jr.createElement(_o,{display:h,left:u,top:c}),Jr.createElement(mo,null),Jr.createElement(yo,null))}}]),n}(Jr.Component);ko.defaultProps={type:"button",isDisabled:!1,isActive:!1};var wo,So,Co=(0,Kr.ZP)(ko)(p||(p=(0,Gr.Z)(["\n  color: ",";\n\n  svg {\n    color: ",";\n  }\n\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"])),(function(e){return e.theme.button.textPrimaryForeground}),(function(e){return e.theme.button.textPrimaryForeground}),(function(e){return e.isActive&&bo}),mo,(function(e){return e.theme.button.textInactiveOpacity})),To=(0,Kr.ZP)(ko)(g||(g=(0,Gr.Z)(["\n  color: ",";\n\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n\n  svg {\n    color: ",";\n  }\n"])),(function(e){return e.theme.button.textSecondaryForeground}),(function(e){return e.isActive&&bo}),mo,(function(e){return e.theme.button.textInactiveOpacity}),(function(e){return e.theme.button.textSecondaryForeground})),Eo=(0,Kr.ZP)(ko)(m||(m=(0,Gr.Z)(["\n  ","\n"])),(function(e){return e.fullWidth&&(0,Kr.iv)(y||(y=(0,Gr.Z)(["\n      width: 100%;\n    "])))})),Do=Kr.ZP.div(v||(v=(0,Gr.Z)(["\n  &:focus {\n    outline: none;\n  }\n\n  > img {\n    height: 18px;\n    width: 18px;\n  }\n\n  > svg {\n    height: 18px;\n    width: 18px;\n  }\n  display: none;\n\n  @media all and (min-width: 0) and (max-width: 599px) {\n    display: flex;\n  }\n"]))),Io=Kr.ZP.div(_||(_=(0,Gr.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &:focus {\n    outline: none;\n  }\n  font-size: inherit;\n  text-spacing: inherit;\n  color: inherit;\n\n  ","\n  ","\n"])),(function(e){return e.isDisabled&&(0,Kr.iv)(b||(b=(0,Gr.Z)(["\n      opacity: ",";\n    "])),(function(e){return e.theme.button.textInactiveOpacity}))}),(function(e){return e.hasIcon&&(0,Kr.iv)(x||(x=(0,Gr.Z)(["\n      @media all and (min-width: 0) and (max-width: 599px) {\n        display: none;\n      }\n    "])))})),Ro=function(e){var t=e.label,n=e.children,i=e.icon,r=e.fullWidth,o=e.isDisabled,a=(0,Nr.Z)(e,eo),s=Jr.createElement(Io,{hasIcon:!!i,isDisabled:o},t,n);return Jr.createElement(Eo,(0,Ur.Z)({fullWidth:r,isDisabled:o},a),i&&Jr.createElement(Do,null,i),(n||t)&&s)},Oo=(0,Kr.ZP)(Ro)(k||(k=(0,Gr.Z)(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  min-width: 32px;\n\n  svg {\n    color: ",";\n  }\n"])),(function(e){return e.theme.button.outlinedPrimaryBackground}),(function(e){return e.theme.button.outlinedPrimaryForeground}),(function(e){return e.theme.button.outlinedBorderColor}),(function(e){return e.theme.button.outlinedPrimaryForeground})),Fo=(0,Kr.ZP)(Ro)(w||(w=(0,Gr.Z)(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n\n  svg {\n    color: ",";\n  }\n\n  ","\n"])),(function(e){return e.theme.button.outlinedSecondaryBackground}),(function(e){return e.theme.button.outlinedSecondaryForeground}),(function(e){return e.theme.button.outlinedBorderColor}),(function(e){return e.theme.button.outlinedSecondaryForeground}),(function(e){return e.isActive&&bo})),Ao=(0,Kr.ZP)(ko)(S||(S=(0,Gr.Z)(["\n  color: ",";\n\n  svg {\n    color: ",";\n  }\n\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"])),(function(e){return e.theme.foreground}),(,(,mo,(function(e){return e.theme.button.textInactiveOpacity})),Po=Kr.ZP.div(C||(C=(0,Gr.Z)(["\n  display: flex;\n  &:focus {\n    outline: none;\n  }\n"]))),Zo=function(e){e.label;var t=e.icon,n=(e.children,(0,Nr.Z)(e,to));return Jr.createElement(Ao,(0,Ur.Z)({},n),Jr.createElement(Po,null,t))},Mo=(0,Kr.ZP)(Ro)(T||(T=(0,Gr.Z)(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n\n  &:active {\n    color: ",";\n  }\n\n  svg {\n    color: ",";\n\n    &:active {\n      color: ",";\n    }\n  }\n"])),(function(e){return e.theme.button.containedPrimaryBackground}),(function(e){return e.theme.button.containedPrimaryForeground}),(function(e){return e.theme.button.containedPrimaryBackground}),(function(e){return e.theme.button.containedPrimaryForeground}),(function(e){return e.theme.button.containedPrimaryForeground}),(function(e){return e.theme.button.containedPrimaryForeground})),zo=Kr.ZP.div(E||(E=(0,Gr.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 4px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  ","\n"])),(function(e){return e.theme.measurements.fontSystem.label.size}),(function(e){return e.theme.measurements.fontSystem.label.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.label.case}),(function(e){return e.withBackground?(0,Kr.iv)(D||(D=(0,Gr.Z)(["\n          color: ",";\n        "])),e.theme.card.labelForeground):(0,Kr.iv)(I||(I=(0,Gr.Z)(["\n          color: ",";\n        "])),e.theme.card.foreground)})),Bo=Kr.ZP.div(R||(R=(0,Gr.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  bottom: 0px;\n  border-radius: ","px;\n  left: 0;\n  ","\n  width: 100%;\n  cursor: pointer;\n"])),(function(e){return e.theme.shape.radiusMedium}),(function(e){return e.withBackground?(0,Kr.iv)(O||(O=(0,Gr.Z)(["\n          color: ",";\n          height: 40px;\n          background: ",";\n        "])),e.theme.card.labelForeground,e.theme.card.labelBackground):(0,Kr.iv)(F||(F=(0,Gr.Z)(["\n          color: ",";\n          height: 32px;\n        "])),e.theme.card.foreground)})),Lo=Kr.ZP.div(A||(A=(0,Gr.Z)(["\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  ","\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n"])),(,(function(e){return e.withBackground?(0,Kr.iv)(P||(P=(0,Gr.Z)(["\n          border-top-color: ",";\n        "])),e.theme.card.labelForeground):(0,Kr.iv)(Z||(Z=(0,Gr.Z)(["\n          border-top-color: ",";\n        "])),e.theme.card.foreground)}),(),Uo=Kr.ZP.span(M||(M=(0,Gr.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-left: 10px;\n"]))),No=Kr.ZP.div(z||(z=(0,Gr.Z)(["\n  ","\n"])),ho),Ho=function(e){var t=e.children,n=e.className,i=e.caret,r=e.isActive,o=e.style,a=e.withBackground;if(e.hidden)return Jr.createElement(No,null,t);return Jr.createElement(Bo,{className:n,withBackground:a,style:o},Jr.createElement(zo,{"data-test":Xr.Sa.CardLabel,withBackground:a},t,i&&Jr.createElement(Uo,null,Jr.createElement(Lo,{"aria-hidden":!0,rotation:r?180:0,withBackground:a}))))},jo=Kr.ZP.div.attrs((function(e){return{"data-test":Xr.Sa.CardAvatar,style:{backgroundImage:"url(".concat(e.url,")")}}}))(B||(B=(0,Gr.Z)(["\n  position: absolute;\n  top: 4px;\n  left: 4px;\n  height: 28px;\n  width: 28px;\n  border-radius: 50%;\n"]))),Wo=(0,Kr.F4)(L||(L=(0,Gr.Z)(["\n  0% {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"]))),Vo=(0,Kr.F4)(U||(U=(0,Gr.Z)(["\n  0% {\n    opacity: 0;\n    transform: scale(0.9) translateY(-20px);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n"]))),Go=[],qo="ResizeObserver loop completed with undelivered notifications.";(So=wo||(wo={})).BORDER_BOX="border-box",So.CONTENT_BOX="content-box",So.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";var Yo,Xo=),Ko=Jo=Qo=$o="undefined"!==typeof window?window:{},ea=new WeakMap,ta=/auto|scroll/,na=/^tb|vertical/,ia=/msie|trident/i.test($o.navigator&&$o.navigator.userAgent),ra=oa=aa=Object.freeze({devicePixelContentBoxSize:oa(),borderBoxSize:oa(),contentBoxSize:oa(),contentRect:new Xo(0,0,0,0)}),sa=la=ua=ca=ha=da=fa=pa=[],ga=ma=0,ya={attributes:!0,characterData:!0,childList:!0,subtree:!0},va=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],_a=ba=!1,xa=),ka=new xa,wa=Sa=),Ca=Ta=new WeakMap,Ea=Da=),Ia=),Ra=(0,Xr.b)(so()),Oa=Jr.createContext({}),Fa=Kr.ZP.div(N||(N=(0,Gr.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  background: ",";\n  color: ",";\n  display: flex;\n  flex-direction: row;\n  overflow: hidden;\n  -webkit-touch-callout: none;\n  user-select: none;\n  * {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    font-family: '","', sans-serif;\n    /* css reset for a global box-sizing: border-box */\n    box-sizing: content-box;\n\n    scrollbar-width: thin;\n    scrollbar-color: "," transparent;\n\n    &::-webkit-scrollbar-track {\n      border-radius: 10px;\n      background-color: transparent;\n      margin: 1px;\n    }\n\n    &::-webkit-scrollbar {\n      width: 6px;\n      height: 6px;\n      background-color: transparent;\n    }\n\n    &::-webkit-scrollbar-thumb {\n      border-radius: 10px;\n      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);\n      background-color: ",";\n    }\n\n    &::-webkit-scrollbar-thumb:hover {\n      background-color: ",";\n    }\n  }\n\n  /* This will be applied first in some cases and should be treated as such */\n  h1,\n  h2,\n  h3,\n  input,\n  textarea,\n  label,\n  span,\n  div,\n  p {\n    line-height: normal;\n  }\n"])),(function(e){return e.theme.background}),(function(e){return e.theme.foreground}),(function(e){return e.theme.typography.fontFamily}),(function(e){return e.theme.scrollbar.handleColor}),(function(e){return e.theme.scrollbar.handleColor}),(function(e){return e.theme.scrollbar.handleColor})),Aa=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i,r;if((0,Hr.Z)(this,n),(i=t.call(this,e)).node=Jr.createRef(),i.saveEditorDimensions=function(e){i.setState({contextValue:{element:e,rect:e.getBoundingClientRect()}})},null==(r=Jr)?void 0:r.version){var o=Number.parseInt(Jr.version.split(".")[0],10),a=Number.parseInt(Jr.version.split(".")[1],10);(o<16||16===o&&a<8)&&console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}return i.saveEditorDimensions=(0,Ra.default)(i.saveEditorDimensions,100),i.resizeObserver=new Ia((function(e){var t=(0,Lr.Z)(e,1)[0];i.saveEditorDimensions(t.target)})),i.state={contextValue:{element:null,rect:null}},i}return(0,jr.Z)(n,[{key:"componentDidMount",value:function(){var e;(null==(e=this.node)?void 0:e.current)&&this.resizeObserver.observe(this.node.current)}},{key:"componentWillUnmount",value:function(){var e;(null==(e=this.node)?void 0:e.current)&&this.resizeObserver.unobserve(this.node.current)}},{key:"render",value:function(){var e=this.props.children,t=this.state.contextValue;return Jr.createElement(Fa,{ref:this.node,"data-test":Xr.Sa.EditorContainer},Jr.createElement(Oa.Provider,{value:t},e))}}]),n}(Jr.Component);if(!Jr.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!Xr.k)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");function Pa(){var e=(0,Jr.useState)(0),2),t=e[1];return(0,Jr.useCallback)((,[])}var Za={};var Ma=function(e){return"function"===typeof Symbol?Symbol.for(e):"__$mobx-react "+e+"__"}("observerBatching");r La,Ua=1e4,Na=new Set;r Wa=!1,Va=[];var Ga={};unction Ya(e,t,n){void 0===t&&(t="observed"),void 0===n&&(n=Ga);var i=(n.useForceUpdate||Pa)()),r=Jr.useRef(null);if(!r.current){var o=new Xr.j(qa(t),(),a=o);r.current=a,function(e){Na.add(e),Ha()}(r)}var s=r.current.reaction;return Jr.useDebugValue(s,Ba),Jr.useEffect((function(){return function(e){Na.delete(e)}(r),r.current?r.current.mounted=!0:(r.current={reaction:new Xr.j(qa(t),(function(){i()})),cleanAt:1/0},i()),),[]),()}var Xa=function(){return Xa=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Xa.apply(this,arguments)};function Ka(e,t){var n,i=Xa({forwardRef:!1},t),r=e.displayName||e.name,o=return o.displayName=r,n=i.forwardRef?(0,Jr.memo)((0,Jr.forwardRef)(o)):(0,Jr.memo)(o),e,n),n.displayName=r,n}var Ja={$$typeof:!0,render:!0,compare:!0,type:!0};.propTypes={children:$a,render:$a},Qa.displayName="Observer",function(e){e||(e=za),(0,Xr.n)({reactionScheduler:e}),("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:Za)[Ma]=!0}(Qr.unstable_batchedUpdates);var es=0;var ts={}; os={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};ar ss=ns("patchMixins"),ls=ns("patchedDefinition");fs=Xr.q||"$mobx",ps=ns("isMobXReactObserver"),gs=ns("isUnmounted"),ms=ns("skipRender"),ys=ns("isForcingUpdate");function vs(e){var t=e.prototype;if(e[ps]){var n=_s(t);console.warn("The provided component class ("+n+") \n                has already been declared as an observer component.")}else e[ps]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==Jr.PureComponent)if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==xs)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=xs;ks(t,"props"),ks(t,"state");var i=t.render;return t.render=function(){return bs.call(this,i)},hs(t,"componentWillUnmount",(function(){var e;if(null===(e=this.render[fs])||void 0===e||e.dispose(),this[gs]=!0,!this.render[fs]){var t=_s(this);console.warn("The reactive render of an observer class component ("+t+") \n                was overriden after MobX attached. This may result in a memory leak if the \n                overriden reactive render was not properly disposed.")}})),e}unction bs(e){var t=this;as(this,ms,!1),as(this,ys,!1);var n=_s(this),i=e.bind(this),r=!1,o=new Xr.j(n+".render()",();eturn o.reactComponent=this,a[fs]=o,this.render=a,a.call(this)}function xs(e,t){return this.state!==t||!is(this.props,e)}ar ws="function"===typeof Symbol&&Symbol.for,Ss=ws?Symbol.for("react.forward_ref"):"function"===typeof Jr.forwardRef&&(0,Jr.forwardRef)((function(e){return null})).$$typeof,Cs=ws?Symbol.for("react.memo"):"function"===typeof Jr.memo&&(0,Jr.memo)(().$$typeof;function Ts(e){if(!0===e.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),Cs&&e.$$typeof===Cs)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Ss&&e.$$typeof===Ss){var t=e.render;if("function"!==typeof t)throw new Error("render property of ForwardRef was not a function");return(0,Jr.forwardRef)(()}return"function"!==typeof e||e.prototype&&e.prototype.render||e.isReactClass||Object.prototype.isPrototypeOf.call(Jr.Component,e)?vs(e):Ka(e)}ar Ds=Jr.createContext({});unction Rs(e,t,n,i){var r=Jr.forwardRef(();return i&&(r=Ts(r)),r.isMobxInjector=!0,t,r),r.wrappedComponent=t,r.displayName=t,n),r}(Is.displayName="MobXProvider",!Jr.Component)throw new Error("mobx-react requires React to be available");if(!Xr.e)throw new Error("mobx-react requires mobx to be available");var As=(0,Kr.iv)(H||(H=(0,Gr.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: ","px;\n  width: ","px;\n  border-radius: ",";\n  pointer-events: none;\n"])),(function(e){return e.theme.measurements.colorItem.size}),(function(e){return e.theme.measurements.colorItem.size}),(function(e){return e.theme.colorItem.borderRadius||"".concat(e.theme.shape.radiusSmall,"px")})),Ps=Kr.ZP.div.attrs(()(j||(j=(0,Gr.Z)(["\n  ","\n  z-index: ",";\n"])),As,(function(e){return e.theme.measurements.zIndex.colorItem.background})),Zs=Ps,Ms=Kr.ZP.div(W||(W=(0,Gr.Z)(["\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: ",";\n\n  box-sizing: border-box;\n  border: 2px solid transparent;\n  border-radius: ",";\n  transition: border-color 300ms ease-in-out;\n  ","\n"])),As,(function(e){return e.theme.measurements.zIndex.colorItem.overlay}),(function(e){return e.theme.colorItem.borderRadius||"".concat(e.theme.shape.radiusSmall,"px")}),(function(e){return e.isActive&&(0,Kr.iv)(V||(V=(0,Gr.Z)(["\n      border-color: ",";\n    "])),e.theme.selectColor.activeBorderColor)})),zs=Kr.ZP.span(G||(G=(0,Gr.Z)(["\n  display: inline-block;\n  height: 2px;\n  width: 2px;\n  border-radius: 50%;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);\n  background: rgba(255, 255, 255, 0.87);\n  margin: 1px;\n  pointer-events: none;\n"]))),Bs=function(e){var t=e.isActive,n=e.className,i=e.style;return Jr.createElement(Ms,{isActive:t,className:n,style:i},t&&Jr.createElement(Jr.Fragment,null,Jr.createElement(zs,null),Jr.createElement(zs,null),Jr.createElement(zs,null)))},Ls=Kr.ZP.button.attrs({type:"button"})(q||(q=(0,Gr.Z)(["\n  &&& {\n    box-sizing: border-box;\n  }\n  position: relative;\n  background: transparent;\n  border: none;\n  height: ","px;\n  width: ","px;\n  margin: ",";\n  padding: 0;\n  cursor: pointer;\n  border-radius: ",";\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  ","\n\n  &:disabled {\n    opacity: ",";\n    cursor: default;\n  }\n"])),(function(e){return e.theme.measurements.colorItem.size}),(function(e){return e.theme.measurements.colorItem.size}),(function(e){return e.theme.colorItem.margin}),(function(e){return e.theme.colorItem.borderRadius||"".concat(e.theme.shape.radiusSmall,"px")}),co,(function(e){return e.theme.selectColor.inactiveOpacity})),Us=Ls,Ns=Kr.ZP.div.attrs((function(e){var t=e.url?{backgroundImage:"url(".concat(e.url,")")}:{};return(0,Ur.Z)({style:t},e.style)}))(Y||(Y=(0,Gr.Z)(["\n  ","\n  z-index: ",";\n"])),As,(function(e){return e.theme.measurements.zIndex.colorItem.tiledBackground})),Hs=Ns,js=Fs("config")(Ts((function(e){var t=e.isActive,n=e.onClick,i=e.color,r=e.label,o=e.isDisabled,a=e.tiledBackgroundUrl,s=e.className,l=e.style,u=e.children;return Jr.createElement(Us,{disabled:o,onClick:n,"aria-label":r,className:s,style:l},Jr.createElement(Hs,{url:a}),Jr.createElement(Zs,{color:i}),Jr.createElement(Bs,{isActive:t}),u)}))),Ws=Kr.ZP.div(X||(X=(0,Gr.Z)(["\n  display: block;\n  opacity: 1;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: ",";\n  text-align: left;\n  background: ",";\n  height: 100%;\n  width: 100%;\n"])),(function(e){return e.theme.measurements.zIndex.dialog.backdrop}),(function(e){return e.theme.modal.backdrop})),Vs=Ws,Gs=Kr.ZP.div(K||(K=(0,Gr.Z)(["\n  display: none;\n  visibility: hidden;\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: ",";\n  transition: opacity 100s ease-in-out;\n\n  ",";\n"])),(function(e){return e.theme.measurements.zIndex.dialog.base}),(function(e){return e.isVisible&&(0,Kr.iv)(J||(J=(0,Gr.Z)(["\n      opacity: 1;\n      display: block;\n      visibility: visible;\n    "])))})),qs=Ys=Kr.ZP.div.attrs((function(e){return{role:"dialog","aria-hidden":!1,style:e.style}}))(Q||(Q=(0,Gr.Z)(["\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  transition: top 0.25s ease;\n  position: absolute;\n  top: calc(50% + ","px);\n  left: calc(50% + ","px);\n  width: ",";\n  height: ",";\n  transform: translate(-50%, -50%);\n  border-radius: ","px;\n  background: ",";\n  color: ",";\n  z-index: ",";\n\n  @media all and (min-width: 0) and (max-width: 640px) {\n    text-align: center;\n    width: auto;\n    min-width: 200px;\n    height: auto;\n    top: 50%;\n    left: 50%;\n  }\n"])),(function(e){return e.top}),(function(e){return e.left}),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.theme.shape.radiusLarge}),(function(e){return e.theme.modal.background}),(function(e){return e.theme.modal.bodyForeground}),(function(e){return e.theme.measurements.zIndex.dialog.container})),Xs=Ys,Ks=function(e){var t=e.isVisible,n=void 0!==t&&t,i=e.width,r=void 0===i?"350px":i,o=e.height,a=void 0===o?"fit-content":o,s=e.position,l=e.header,u=e.body,c=e.footer,h=e.className,d=e.style,f=e.children;return Jr.createElement(qs,{isVisible:n},Jr.createElement(Vs,null),Jr.createElement(Xs,{height:a,width:r,left:s.x,top:s.y,className:h,style:d,"data-test":Xr.Sa.Dialog},l,u,f,c))},Js=Kr.ZP.div($||($=(0,Gr.Z)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  box-sizing: border-box;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  padding: 0px 20px 11px;\n  &:first-child {\n    padding-top: 11px;\n  }\n\n  @media all and (min-width: 0) and (max-width: 640px) {\n    align-items: center;\n  }\n"])),(function(e){return e.theme.measurements.fontSystem.body.size}),(function(e){return e.theme.measurements.fontSystem.body.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.body.case}),(function(e){return e.theme.modal.bodyForeground})),Qs=Js,$s=Kr.ZP.div(ee||(ee=(0,Gr.Z)(["\n  display: flex;\n  border-top: 2px solid\n    ",";\n\n  min-height: 40px;\n  justify-content: flex-end;\n  @media all and (min-width: 0) and (max-width: 640px) {\n    height: auto;\n    flex-direction: column;\n    justify-content: space-around;\n  }\n"])),(),el=$s,tl=Kr.ZP.h3(te||(te=(0,Gr.Z)(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  padding: 11px 20px 0px;\n"])),(function(e){return e.theme.measurements.fontSystem.headline2.size}),(function(e){return e.theme.measurements.fontSystem.headline2.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.headline2.case}),(function(e){return e.theme.modal.headerForeground})),nl=tl,il=(0,Kr.F4)(ne||(ne=(0,Gr.Z)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),rl=Kr.ZP.div(ie||(ie=(0,Gr.Z)(["\n  display: inline-block;\n  position: relative;\n  width: 45px;\n  height: 45px;\n"]))),ol=Kr.ZP.div(re||(re=(0,Gr.Z)(["\n  box-sizing: border-box;\n  display: block;\n  position: absolute;\n  width: 40px;\n  height: 40px;\n  margin: 2.5px;\n  border: 2.5px solid ",";\n  border-radius: 50%;\n  animation: "," 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  border-color: "," transparent transparent\n    transparent;\n\n  :nth-child(1) {\n    animation-delay: -0.45s;\n  }\n  :nth-child(2) {\n    animation-delay: -0.3s;\n  }\n  :nth-child(3) {\n    animation-delay: -0.15s;\n  }\n"])),(function(e){return e.theme.primary}),il,(function(e){return e.theme.primary})),al=function(e){var t=e.className,n=e.style;return Jr.createElement(rl,{className:t,style:n},Jr.createElement(ol,null),Jr.createElement(ol,null),Jr.createElement(ol,null),Jr.createElement(ol,null))},sl=["Moz","Webkit","O","ms"];function ll(e,t){return t?"".concat(t).concat(function(e){var t,n="",i=!0;for(t=0;t<e.length;t+=1)i?(n+=e[t].toUpperCase(),i=!1):"-"===e[t]?i=!0:n+=e[t];return n}(e)):e}var ul=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"===typeof window||"undefined"===typeof window.document)return"";var t,n=window.document.documentElement.style;if(e in n)return"";for(t=0;t<sl.length;t+=1)if(ll(e,sl[t])in n)return sl[t];return""}();function cl(e,t){for(var n=0,i=e.length;n<i;n+=1)if(t.apply(t,[e[n],n,e]))return e[n];return null}nction fl(e){return parseInt(e,10)}var pl="";nction yl(e,t,n){e&&(e.attachEvent?e.attachEvent("on".concat(t),n):e.addEventListener?e.addEventListener(t,n,!0):e["on".concat(t)]=n)}function vl(e,t,n){e&&(e.detachEvent?e.detachEvent("on".concat(t),n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on".concat(t)]=null)}function _l(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=fl(n.borderTopWidth),t+=fl(n.borderBottomWidth)}unction xl(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=fl(n.paddingTop),t-=fl(n.paddingBottom)}unction wl(e,t){var n=null;return e.targetTouches&&(n=cl(e.targetTouches,(function(e){return t===e.identifier}))),e.changedTouches&&!n&&(n=cl(e.changedTouches,(function(e){return t===e.identifier}))),n}function Sl(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:null}function Cl(e){var t=e.findDOMNode();return t||null}unction El(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}}function Dl(e){return"both"===e.props.axis||"x"===e.props.axis}unction Rl(e,t){var n=Cl(t);if(!n)return{x:0,y:0};var i=t.props.offsetParent;return!i&&n instanceof HTMLElement&&(i=n.offsetParent||n.ownerDocument.body),function(e,t){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:e.clientX+t.scrollLeft-n.left,y:e.clientY+t.scrollTop-n.top}}(e,i)}var Ol={start:"touchstart",move:"touchmove",stop:"touchend"},Fl={start:"mousedown",move:"mousemove",stop:"mouseup"},Al=Fl,Pl={cancel:null,disabled:!1,offsetParent:null,handle:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}},Zl=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(){var e;return(0,Hr.Z)(this,n),(e=t.apply(this,arguments)).state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:void 0},e.findDOMNode=function(){var t=e.props.nodeRef;return(null==t?void 0:t.current)||null},e.getTouchFromEvent=function(t){var n=Sl(t);return e.setState({touchIdentifier:n}),wl(t,n)},e.preventDefault=e.handleDragStart=function(t){var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var i=n.ownerDocument;if(e.props.disabled||!(t.target instanceof Node)||e.props.handle&&!ml(t.target,e.props.handle,n)||e.props.cancel&&ml(t.target,e.props.cancel,n))return!1;var r=Rl(t,(0,zr.Z)(e));if(null==r)return!1;var o=r.x,a=r.y,s=Tl((0,zr.Z)(e),o,a);if(!1===e.props.onStart(t,s))return!1;e.setState({dragging:!0,lastX:o,lastY:a}),"touchmove"===Al.move?yl(i,Al.move,e.onTouchDrag):yl(i,Al.move,e.onMouseDrag),yl(i,Al.stop,e.handleDragStop)},e.handleDrag=function(t){var n=Rl(t,(0,zr.Z)(e));if(null!=n){var i=n.x,r=n.y,o=Tl((0,zr.Z)(e),i,r);if(!1!==e.props.onDrag(t,o))e.setState({lastX:i,lastY:r});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(s){var a=document.createEvent("MouseEvents");a.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(a)}}},e.handleDragStop=function(t){if(e.state.dragging){var n=Rl(t,(0,zr.Z)(e));if(null!=n){var i=n.x,r=n.y,o=Tl((0,zr.Z)(e),i,r),a=e.findDOMNode();e.setState({dragging:!1,lastX:NaN,lastY:NaN}),e.props.onStop(t,o),a&&("touchmove"===Al.move?vl(a.ownerDocument,Al.move,e.onTouchDrag):vl(a.ownerDocument,Al.move,e.onMouseDrag),vl(a.ownerDocument,Al.stop,e.handleDragStop))}}},e.onMouseDown=function(t){return e.preventDefault(t),Al=Fl,e.props.onMouseDown(t),(!t.button||"number"!==typeof t.button||0===t.button)&&e.handleDragStart(t)},e.onMouseDrag=e.onMouseUp=function(t){return e.preventDefault(t),Al=Fl,e.handleDragStop(t)},e.onTouchStart=function(t){e.preventDefault(t),Al=Ol;var n=e.getTouchFromEvent(t);return e.handleDragStart(n)},e.onTouchDrag=function(t){e.preventDefault(t),Al=Ol;var n=e.getTouchFromEvent(t);return e.handleDrag(n)},e.onTouchEnd=function(t){e.preventDefault(t),Al=Ol;var n=e.getTouchFromEvent(t);return e.handleDragStop(n)},e}return(0,jr.Z)(n,[{key:"componentWillUnmount",value:function(){var e=this.findDOMNode();if(e){var t=e.ownerDocument;vl(t,Fl.move,this.onMouseDrag),vl(t,Ol.move,this.onTouchDrag),vl(t,Fl.stop,this.handleDragStop),vl(t,Ol.stop,this.handleDragStop)}}},{key:"render",value:function(){return Jr.cloneElement(Jr.Children.only(this.props.children),{style:(0,Ur.Z)({touchAction:"none"},this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),n}(Jr.Component);Zl.defaultProps=Pl,Zl.displayName="DraggableCore";var Ml=(0,Ur.Z)((0,Ur.Z)({},Pl),{},{axis:"both",bounds:!1,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:!1}),zl=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).onDragStart=function(e,t){if(!1===i.props.onStart(e,El((0,zr.Z)(i),t)))return!1;i.setState({dragging:!0,dragged:!0})},i.onDrag=function(e,t){var n=i.props,r=n.position,o=n.defaultPosition,a=n.onDrag,s=n.bounds;if(!i.state.dragging)return!1;var l=El((0,zr.Z)(i),t),u=Boolean(r),c={x:u?l.x:o.x,y:u?l.y:o.y,slackX:0,slackY:0};if(s){var h=c.x,d=c.y;c.x+=i.state.slackX,c.y+=i.state.slackY;var f=function(e,t,n){if(!e.props.bounds)return[t,n];var i=e.props.bounds;i="string"===typeof i?i:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(i);var r=Cl(e);if(!r)return[t,n];if("string"===typeof i){var o,a=r.ownerDocument,s=a.defaultView;o="parent"===i?r.parentNode:a.querySelector(i);var l=s.getComputedStyle(r),u=s.getComputedStyle(o);i={left:-r.offsetLeft+fl(u.paddingLeft)+fl(l.marginLeft),top:-r.offsetTop+fl(u.paddingTop)+fl(l.marginTop),right:kl(o)-bl(r)-r.offsetLeft+fl(u.paddingRight)-fl(l.marginRight),bottom:xl(o)-_l(r)-r.offsetTop+fl(u.paddingBottom)-fl(l.marginBottom)}}return dl(i.right)&&(t=Math.min(t,i.right)),dl(i.bottom)&&(n=Math.min(n,i.bottom)),dl(i.left)&&(t=Math.max(t,i.left)),dl(i.top)&&(n=Math.max(n,i.top)),[t,n]}((0,zr.Z)(i),c.x,c.y),p=(0,Lr.Z)(f,2),g=p[0],m=p[1];c.x=g,c.y=m,c.slackX=i.state.slackX+(h-c.x),c.slackY=i.state.slackY+(d-c.y),l.x=c.x,l.y=c.y,l.deltaX=c.x-i.state.x,l.deltaY=c.y-i.state.y}if(!1===a(e,l))return!1;i.setState(c)},i.onDragStop=function(e,t){if(!i.state.dragging)return!1;if(!1===i.props.onStop(e,El((0,zr.Z)(i),t)))return!1;var n={dragging:!1,slackX:0,slackY:0,x:0,y:0};if(Boolean(i.props.position)){var r=i.props.position,o=r.x,a=r.y;n.x=o,n.y=a}i.setState(n)},i.findDOMNode=function(){var e=i.props.nodeRef;return(null==e?void 0:e.current)||null},i.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0},i}return(0,jr.Z)(n,[{key:"componentDidUpdate",value:function(e){Boolean(this.props.position)&&(this.props.updateOnPosition?(e.position&&e.position.x!==this.props.position.x||e.position.y!==this.props.position.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}):(e.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}))}},{key:"componentWillUnmount",value:,{key:"render",value:function(){var e,t=this.props,n=t.position,i=t.defaultPosition,r=t.rotation,o=t.defaultClassName,a=t.defaultClassNameDragging,s=t.defaultClassNameDragged,l=(0,Nr.Z)(t,no),u=this.state,c=u.x,h=u.y,d=u.dragging,f=u.dragged,p=!Boolean(n)||d,g=n||i;e=function(e){var t=e.x,n=e.y,i=e.rotation,r="translate(".concat(t,"px,").concat(n,"px) rotate(").concat(i,"rad)");return(0,Br.Z)({},ll("transform",ul),r)}({x:Dl(this)&&p?c:g.x,y:Il(this)&&p?h:g.y,rotation:r});var m=Jr.Children.only(this.props.children),y=[m.props.className||"",o,d?a:"",f?s:""].join(" ").trim(),v=Jr.cloneElement(m,{className:y,style:(0,Ur.Z)((0,Ur.Z)({},m.props.style),e)});return Jr.createElement(Zl,(0,Ur.Z)((0,Ur.Z)({},l),{},{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),v)}}]),n}(Jr.Component);zl.defaultProps=Ml,zl.displayName="Draggable";var Bl=zl,Ll=(0,Xr.b)(lo()),Ul=Kr.ZP.label(oe||(oe=(0,Gr.Z)(["\n  ","\n"])),ho),Nl=Kr.ZP.label(ae||(ae=(0,Gr.Z)(["\n  display: block;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  margin: 0;\n  padding-bottom: 8px;\n\n  ","\n"])),(function(e){return e.theme.measurements.fontSystem.label.size}),(function(e){return e.theme.measurements.fontSystem.label.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.label.case}),(function(e){return e.theme.toolControlBar.inputLabelForeground}),(function(e){return e.isDisabled&&(0,Kr.iv)(se||(se=(0,Gr.Z)(["\n      opacity: ",";\n      cursor: default;\n      pointer-events: none;\n    "])),(function(e){return e.theme.toolControlBar.inputLabelInactiveOpacity}))})),Hl=function(e){var t=e["data-test"],n=e.label,i=e.htmlFor,r=e.show,o=e.style,a=e.isDisabled,s=e.className,l=r?Nl:Ul,u=i||(n?n.replace(" ","-"):void 0);return Jr.createElement(l,{"data-test":t,style:o,isDisabled:a,htmlFor:u,className:s},n)};Hl.defaultProps={show:!0};var jl=Kr.ZP.div(le||(le=(0,Gr.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),Wl=(0,Kr.ZP)(Hl)(ue||(ue=(0,Gr.Z)(["\n  align-self: flex-start;\n"]))),Vl=(0,Kr.ZP)(ko)(ce||(ce=(0,Gr.Z)(["\n  color: ",";\n  padding: 1px 7px 2px;\n"])),(function(e){return e.theme.button.textSecondaryForeground})),Gl=Kr.ZP.div(he||(he=(0,Gr.Z)(["\n  display: flex;\n  justify-content: space-between;\n  width: ","px;\n"])),(function(e){return e.theme.measurements.advancedUIToolControlBar.width-48})),ql=Kr.ZP.article(de||(de=(0,Gr.Z)(["\n  /* 0.6 of width here refers to the width of the container without padding */\n  width: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  text-align: center;\n  margin-top: 7px;\n  display: inline-block;\n  color: ",";\n"])),(function(e){return.6*e.theme.measurements.advancedUIToolControlBar.width}),(function(e){return e.theme.measurements.fontSystem.body.size}),(function(e){return e.theme.measurements.fontSystem.body.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.body.case}),(function(e){return e.theme.toolControlBar.inputLabelForeground})),Yl=Kr.ZP.div(fe||(fe=(0,Gr.Z)(["\n  width: ","px;\n  transform: translateZ(0);\n  overflow: hidden;\n  transition: all 500ms ease-out;\n"])),(function(e){return.6*e.theme.measurements.advancedUIToolControlBar.width})),Xl=Kr.ZP.span(pe||(pe=(0,Gr.Z)(["\n  width: ","px;\n  margin-left: -","px;\n  position: relative;\n  display: inline-block;\n  transform: translateZ(0);\n  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);\n  font-family: '","', sans-serif;\n"])),(function(e){return Math.round(.6*e.length*e.theme.measurements.advancedUIToolControlBar.width)}),(function(e){return.6*e.activeIndex*e.theme.measurements.advancedUIToolControlBar.width}),(function(e){return e.theme.typography.fontFamily})),Kl=Kr.ZP.div(ge||(ge=(0,Gr.Z)(["\n  border: solid ",";\n  border-width: 0 2px 2px 0;\n  padding: 3px;\n  height: 0;\n  width: 0;\n\n  ","\n"])),(function(e){return e.theme.card.foreground}),(function(e){return"left"===e.direction?(0,Kr.iv)(me||(me=(0,Gr.Z)(["\n          margin-left: 2px;\n          transform: rotate(135deg);\n        "]))):(0,Kr.iv)(ye||(ye=(0,Gr.Z)(["\n          margin-right: 2px;\n          transform: rotate(-45deg);\n        "])))})),Jl=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).updateIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e+(t?-1:1),r=i.props.list.length-1;n>r&&(n=0),n<0&&(n=r),i.props.onSelect(i.props.list[n].identifier)},i.getActiveIndex=function(e){var t=i.props.list.findIndex((function(t){return t.identifier===e}));return-1!==t?t:0},i.throttledUpdateIndex=(0,Ll.default)(i.updateIndex,600),i}return(0,jr.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.list,i=t.label,r=t.showLabel,o=void 0===r||r,a=this.getActiveIndex(this.props.defaultIdentifier),s=n.length<=1;return Jr.createElement(jl,{"data-test":Xr.Sa.CarouselSlider},Jr.createElement(Wl,{show:o,label:i}),Jr.createElement(Gl,{id:"photoeditorsdk-".concat(i.replace(" ","-"))},Jr.createElement(Vl,{ariaLabel:"Select Previous",isDisabled:s,onClick:,Jr.createElement(Kl,{direction:"left"})),Jr.createElement(Yl,null,Jr.createElement(Xl,{activeIndex:a,length:n.length},n.map(())),Jr.createElement(Vl,{ariaLabel:"Select Next",isDisabled:s,onClick:function(){return e.throttledUpdateIndex(a)}},Jr.createElement(Kl,{direction:"right"}))))}}]),n}(Jr.PureComponent);Jl.defaultProps={showLabel:!0};var Ql=Jl,$l=Kr.ZP.div(ve||(ve=(0,Gr.Z)(["\n  display: flex;\n  position: relative;\n  margin-bottom: 12px;\n  max-width: ","px;\n"])),(function(e){return e.theme.measurements.inputs.checkbox.maxWidth})),eu=$l,tu=Kr.ZP.div.attrs({tabIndex:0})(_e||(_e=(0,Gr.Z)(["\n  position: relative;\n  height: 16px;\n  width: 16px;\n  cursor: pointer;\n  background-color: ",";\n  border-radius: ","px;\n  transition-timing-function: ease-in;\n  transition-duration: 0.3s;\n  &::after {\n    content: '';\n    position: absolute;\n    display: inline-block;\n    left: 5px;\n    width: 5px;\n    height: 10px;\n    border-style: solid;\n    border-width: 0 2px 2px 0;\n    border-color: transparent;\n    transform: rotate(45deg) scale(0.8);\n  }\n\n  &:first-child {\n    margin-right: 8px;\n  }\n\n  &:last-child {\n    margin-left: 8px;\n  }\n\n  ","\n\n  &:hover {\n    opacity: ",";\n  }\n  ","\n  ","\n"])),(function(e){return e.theme.checkbox.background}),(function(e){return e.theme.shape.radiusSmall}),co,(function(e){return e.theme.checkbox.hoverOpacity}),(function(e){return e.isChecked&&(0,Kr.iv)(be||(be=(0,Gr.Z)(["\n      background-color: ",";\n      &::after {\n        color: ",";\n        border-color: ",";\n      }\n      &:hover {\n        background-color: ",";\n        opacity: 0.8;\n      }\n    "])),e.theme.checkbox.activeBackground,e.theme.checkbox.activeForeground,e.theme.checkbox.foreground,e.theme.checkbox.activeBackground)}),(function(e){return e.isDisabled&&(0,Kr.iv)(xe||(xe=(0,Gr.Z)(["\n      opacity: 0.5;\n      cursor: default;\n      pointer-events: none;\n    "])))})),nu=tu,iu=Kr.ZP.input.attrs({type:"checkbox",tabIndex:0})(ke||(ke=(0,Gr.Z)(["\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0;\n  margin: 0;\n  padding: 0;\n  ","\n"])),co),ru=function(e){var t=e.label,n=e.value,i=e.checkMarkPosition,r=e.onClick,o=e.isDisabled,a=e.className,s=e.style,l="photoeditorsdk-".concat(t.replace(" ","-"));return Jr.createElement(eu,{"data-test":Xr.Sa.Checkbox,className:a,style:s},"left"===i&&Jr.createElement(nu,{onClick:r,isDisabled:o,isChecked:n}),Jr.createElement(Hl,{isDisabled:o,label:t,htmlFor:l}),Jr.createElement(iu,{id:l,disabled:o,checked:n,onChange:r}),"right"===i&&Jr.createElement(nu,{onClick:r,isDisabled:o,isChecked:n}))},ou=ru;ru.defaultProps={value:!1,checkMarkPosition:"left"};var au=(0,Kr.iv)(we||(we=(0,Gr.Z)(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  height: 100%;\n  width: 100%;\n  min-height: 26px;\n  color: ",";\n  padding-bottom: 7px;\n  border: none;\n  appearance: none;\n  border-bottom: 1px solid ",";\n  background: ",";\n  font-family: '","', sans-serif;\n  transition: border-color 0.4s ease-in-out;\n\n  &::-webkit-search-decoration,\n  &::-webkit-search-cancel-button,\n  &::-webkit-search-results-button,\n  &::-webkit-search-results-decoration {\n    -webkit-appearance: none;\n  }\n\n  &::-webkit-inner-spin-button,\n  &::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  &:-moz-focusring {\n    outline: none;\n    border-color: ",";\n  }\n\n  &::-ms-clear,\n  &::-ms-reveal {\n    display: none;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:disabled {\n    opacity: ",";\n    pointer-events: none;\n  }\n\n  &:hover {\n    border-color: ",";\n  }\n"])),(function(e){return e.theme.measurements.fontSystem.body.size}),(function(e){return e.theme.measurements.fontSystem.body.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.body.case}),(function(e){return e.theme.textInput.foreground}),(function(e){return e.theme.textInput.borderColor}),(function(e){return e.theme.textInput.background}),(function(e){return e.theme.typography.fontFamily}),(function(e){return e.theme.textInput.hoverBorderColor}),(function(e){return e.theme.textInput.hoverBorderColor}),(function(e){return e.theme.textInput.inactiveOpacity}),(function(e){return e.theme.textInput.hoverBorderColor})),su=(0,Kr.iv)(Se||(Se=(0,Gr.Z)(["\n  opacity: ",";\n  pointer-events: none;\n"])),(function(e){return e.theme.dropdown.inactiveOpacity})),lu=Kr.ZP.div(Ce||(Ce=(0,Gr.Z)(["\n  display: block;\n  position: relative;\n  width: 100%;\n  white-space: nowrap;\n  transition-duration: 0.5s;\n\n  &:disabled {\n    ","\n  }\n\n  ","\n"])),su,(function(e){return e.isDisabled&&su})),uu=Kr.ZP.li(Te||(Te=(0,Gr.Z)(["\n  padding: 10px 16px;\n  text-overflow: ellipsis;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  white-space: nowrap;\n  color: ",";\n\n  &:hover {\n    cursor: pointer;\n    background: ",";\n  }\n\n  ","\n\n  ","\n"])),(function(e){return e.theme.measurements.fontSystem.button2.size}),(function(e){return e.theme.measurements.fontSystem.button2.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.button2.case}),(function(e){return e.theme.dropdown.foreground}),(function(e){return e.theme.dropdown.listItemHoverBackground}),(function(e){return e.isActive&&(0,Kr.iv)(Ee||(Ee=(0,Gr.Z)(["\n      border-left: 2px solid ",";\n    "])),(function(e){return e.theme.primary}))}),co),cu=Kr.ZP.div(De||(De=(0,Gr.Z)(["\n  display: flex;\n  ",";\n"])),(function(e){return(0,Xr.t)()||(0,Xr.s)()?(0,Kr.iv)(Ie||(Ie=(0,Gr.Z)(["\n        overflow: hidden;\n      "]))):"vertical"===e.direction?(0,Kr.iv)(Re||(Re=(0,Gr.Z)(["\n        flex-direction: column;\n        flex: 1 1 auto;\n        overflow-y: auto;\n        overflow-x: hidden;\n      "]))):(0,Kr.iv)(Oe||(Oe=(0,Gr.Z)(["\n      overflow-y: hidden;\n      overflow-x: auto;\n    "])))})),hu=Kr.ZP.ul.attrs(()(Fe||(Fe=(0,Gr.Z)(["\n  display: flex;\n  flex-direction: ",";\n\n  list-style: none;\n  padding: 0;\n  margin: 0;\n\n  ","\n"])),(,(function(e){return(0,Xr.t)()||(0,Xr.s)()?(0,Kr.iv)(Ae||(Ae=(0,Gr.Z)(["\n        ","\n\n        scrollbar-face-color: ",";\n        scrollbar-track-color: ",";\n        scrollbar-base-color: ",";\n        scrollbar-3dlight-color: ",";\n        scrollbar-highlight-color: ",";\n        scrollbar-arrow-color: ",";\n        scrollbar-shadow-color: ",";\n        scrollbar-dark-shadow-color: ",";\n      "])),(function(){return"vertical"===e.direction?(0,Kr.iv)(Pe||(Pe=(0,Gr.Z)(["\n              width: 100%;\n              overflow-y: auto;\n              overflow-x: hidden;\n\n              /* hidde the arrows */\n              margin-top: -10px;\n              margin-bottom: -10px;\n              padding-top: 10px;\n              padding-bottom: 10px;\n\n              /* hide the scrollbar */\n              padding-right: 10px;\n              margin-right: -10px;\n            "]))):(0,Kr.iv)(Ze||(Ze=(0,Gr.Z)(["\n            height: 100%;\n            overflow-y: hidden;\n            overflow-x: auto;\n\n            margin-right: -10px;\n            margin-left: -10px;\n            padding-right: 10px;\n            padding-left: 10px;\n\n            padding-bottom: 10px;\n            margin-bottom: -10px;\n          "])))}),e.theme.scrollbar.handleColor,e.theme.toolbar.background,e.theme.toolbar.background,e.theme.scrollbar.handleColor,e.theme.scrollbar.handleColor,e.theme.toolbar.background,e.theme.scrollbar.handleColor,e.theme.scrollbar.handleColor):""})),du=function(e){var t=e.direction,n=void 0===t?"horizontal":t,i=e["data-test"],r=e.className,o=e.children;return Jr.createElement(cu,{direction:n,className:r},Jr.createElement(hu,{direction:n,"data-test":i},o))},fu=(0,Kr.ZP)(du)(Me||(Me=(0,Gr.Z)(["\n  position: absolute;\n\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  box-shadow: ",";\n\n  visibility: hidden;\n  opacity: 0;\n  ","\n\n  transition: all 0.5s ease;\n\n  width: 100%;\n  max-height: 160px;\n  margin: 5px 0;\n\n  /* had to add these changes to get the dropdown working in IE11 */\n  ","\n\n  border-radius: 0 0 ","px\n    ","px;\n  z-index: ",";\n"])),(function(e){return e.theme.dropdown.listBackground}),(function(e){return e.theme.dropdown.listForeground}),(function(e){return e.theme.dropdown.listBorderColor}),(function(e){return e.theme.dropdown.listShadow}),(function(e){return e.isOpen?(0,Kr.iv)(ze||(ze=(0,Gr.Z)(["\n        visibility: visible;\n        opacity: 1;\n        display: flex;\n      "]))):""}),(function(){return(0,Xr.t)()?(0,Kr.iv)(Be||(Be=(0,Gr.Z)(["\n        > ul {\n          height: 160px;\n          margin-bottom: 0px;\n          margin-top: 0px;\n          padding-bottom: 0px;\n          padding-top: 0px;\n        }\n      "]))):""}),(function(e){return e.theme.shape.radiusMedium}),(function(e){return e.theme.shape.radiusMedium}),(function(e){return e.theme.measurements.zIndex.input.list}));fu.defaultProps={direction:"vertical"};var pu=Kr.ZP.div(Le||(Le=(0,Gr.Z)(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-bottom: 1px solid ",";\n  padding: 5px 0;\n  cursor: ",";\n  transition: border-color 0.4s ease-in-out;\n\n  &:hover {\n    border-color: ",";\n  }\n\n  ","\n"])),(function(e){return e.theme.measurements.fontSystem.body.size}),(function(e){return e.theme.measurements.fontSystem.body.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.body.case}),(function(e){return e.theme.dropdown.foreground}),(function(e){return e.theme.dropdown.background}),(function(e){return e.theme.dropdown.borderColor}),(function(e){return e.showList?"pointer":"default"}),(function(e){return e.theme.dropdown.hoverBorderColor}),co),gu=Kr.ZP.div(Ue||(Ue=(0,Gr.Z)([""]))),mu=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).state={isOpen:!1},i.handleOutsideClick=function(e){i.node&&i.node.contains(e.target)||i.setState({isOpen:!1})},i.onSelect=function(e){(0,i.props.onSelect)(e),i.setState({isOpen:!1})},i.onClick=function(){i.setState((function(e){return{isOpen:!e.isOpen}}))},i.listItem=function(e){var t=i.props,n=t.itemStyle,r=t.selectedItem,o=i.state.isOpen,a=e.value,s=e.label,l={};return"function"===typeof n?l=n(e):null!==n&&"object"===typeof n&&(l=n),Jr.createElement(uu,{"aria-hidden":!o,tabIndex:0,style:l,onClick:function(){return i.onSelect(a)},key:a,isActive:r===a},s)},i.onKeyDown=i.nodeRef=function(e){i.node=e},i}return(0,jr.Z)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleOutsideClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)}},{key:"render",value:function(){var e=this.props,t=e.selectedItem,n=e.list,i=e.label,r=e.style,o=e.isDisabled,a=this.state.isOpen,s=n.length>1,l=o?{}:{tabIndex:0};return Jr.createElement(gu,null,Jr.createElement(Hl,{isDisabled:o,style:{paddingLeft:"0px"},label:i}),Jr.createElement("div",{ref:this.nodeRef},Jr.createElement(lu,{isOpen:a,isDisabled:o},Jr.createElement(pu,(0,Ur.Z)((0,Ur.Z)({"data-test":Xr.Sa.Dropdown,"aria-hidden":o},l),{},{showList:s,style:r,onClick:s?this.onClick:void 0,onKeyDown:this.onKeyDown}),t,s&&Jr.createElement(uo,{rotation:a?180:0})),Jr.createElement(fu,{"data-test":Xr.Sa.DropdownList,isOpen:a},s&&n.map(this.listItem)))))}}]),n}(Jr.PureComponent),yu=Kr.ZP.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})(Ne||(Ne=(0,Gr.Z)(["\n  display: none;\n"]))),vu=function(e){var t=e.children;return Jr.createElement("form",{onSubmit:function(e){e.preventDefault()}},t)},_u=Kr.ZP.input(He||(He=(0,Gr.Z)(["\n  ","\n  /* override user agent style */\n  padding: 0;\n  &:disabled {\n    opacity: ",";\n    cursor: default;\n    pointer-events: none;\n  }\n"])),au,(function(e){return e.theme.textInput.inactiveOpacity})),bu=Kr.ZP.div(je||(je=(0,Gr.Z)(["\n  position: relative;\n  &:first-child {\n    margin-right: 15px;\n  }\n"]))),xu=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(){var e;return(0,Hr.Z)(this,n),(e=t.apply(this,arguments)).onChange=e}return(0,jr.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.testId,i=e.value,r=e.type,o=e.min,a=e.max,s=e.onBlur,l=e.onFocus,u=e.onKeyUp,c=e.onKeyDown,h=e.onMouseUp,d=e.onTouchEnd,f=e.isDisabled,p=e.className,g=e.children;return Jr.createElement(bu,{className:p},Jr.createElement(_u,{id:t,"data-test":n,"aria-hidden":f,disabled:f,value:i,type:r,min:o,max:a,onChange:this.onChange,onBlur:s,onFocus:l,onKeyUp:u,onKeyDown:c,onMouseUp:h,onTouchEnd:d}),g)}}]),n}(Jr.Component);xu.defaultProps={type:"text"};var ku=xu,wu=Kr.ZP.div(We||(We=(0,Gr.Z)(["\n  ","\n"])),(0,Xr.t)()?(0,Kr.iv)(Ve||(Ve=(0,Gr.Z)([""]))):(0,Kr.iv)(Ge||(Ge=(0,Gr.Z)(["\n        display: flex;\n        flex: 0 1 auto;\n        flex-direction: column;\n      "])))),Su=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).node=null,i.handleOutsideClick=function(e){i.node&&i.node.current&&i.node.current.contains(e.target)||i.onSubmit()},i.onSubmit=function(){var e=i.props.onSubmit,t=i.state,r=t.value,o=t.isActive;if(e){var a=parseFloat(n.cleanValue(r));!Number.isNaN(a)&&o&&e("".concat(a))}i.setState({isActive:!1})},i.onBlur=function(){i.onSubmit()},i.onFocus=i.onKeyDown=function(e){var t=i.state.value;if("Enter"===e.key)i.onSubmit();else if("ArrowUp"===e.key){var r=parseFloat(n.cleanValue(t));"number"===typeof r&&i.setState({value:(r+1).toString(),isActive:!0})}else if("ArrowDown"===e.key){var o=parseFloat(n.cleanValue(t));"number"===typeof o&&i.setState({value:(o-1).toString(),isActive:!0})}},i.onChange=function(e){i.setState({value:e.replace(/[^\d.,-]/g,""),isActive:!0})},i.state={value:i.props.value||"",isActive:!1},i.node=Jr.createRef(),i}return(0,jr.Z)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1)}},{key:"componentWillUnmount",value:,{key:"render",value:function(){var e=this.props,t=e.id,n=e.label,i=e.isDisabled,r=e.ariaHidden,o=e.onMouseUp,a=e.onTouchEnd,s=e.className,l=e.style,u=this.state.value;return Jr.createElement(wu,{ref:this.node,"data-test":Xr.Sa.NummericInput,className:s,style:l},Jr.createElement(Hl,{htmlFor:t,label:n,show:!!n,isDisabled:i}),Jr.createElement(ku,{id:t,value:u,isDisabled:i,"aria-hidden":r,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:o,onTouchEnd:a}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.value,i=t.value,r=t.isActive;return n===i||r?null:{value:n}}},{key:"cleanValue",value:]),n}(Jr.Component);Su.defaultProps={showLabel:!0};var Cu=Su,Tu=Kr.ZP.input.attrs({type:"search"})(qe||(qe=(0,Gr.Z)(["\n  ","\n"])),au),Eu=(0,Jr.forwardRef)((function(e,t){var n=e.value,i=e.onChange,r=e.onKeyDown,o=e.placeholder,a=e.className,s=e.style;return Jr.createElement("div",{className:a,style:s},Jr.createElement(Hl,{show:!1,label:"photoeditorsdk-Search"}),Jr.createElement(Tu,{ref:t,id:"photoeditorsdk-Search",value:n,onChange:onKeyDown:r,placeholder:o,autoComplete:"off"}))})),Du=Kr.ZP.div(Ye||(Ye=(0,Gr.Z)([""]))),Iu=function(e){var t=e.label,n=e.children,i=e.inline,r=e.showLabel,o=e.isDisabled,a=e["data-test"];return Jr.createElement(Du,{"data-test":a},Jr.createElement(Hl,{isDisabled:o,label:t,show:r}),Jr.createElement(Ru,{id:"photoeditorsdk-".concat(t.replace(" ","-")),inline:!!i},n))},Ru=Kr.ZP.div(Xe||(Xe=(0,Gr.Z)(["\n  display: inline-flex;\n  ","\n"])),(function(e){return!e.inline&&(0,Kr.iv)(Ke||(Ke=(0,Gr.Z)(["\n        flex-wrap: wrap;\n      "])))||""}));Iu.defaultProps={showLabel:!0};var Ou=Iu,Fu=Kr.ZP.div(Je||(Je=(0,Gr.Z)(["\n  display: flex;\n  flex-direction: column;\n  /* needed for IE11 to properly calculate the width */\n  min-width: 1px;\n"]))),Au=Kr.ZP.div(Qe||(Qe=(0,Gr.Z)(["\n  display: flex;\n  align-items: center;\n  height: 26px;\n  margin-right: ","px;\n"])),(),Pu=(0,Kr.ZP)(Cu)($e||($e=(0,Gr.Z)(["\n  max-width: 50px;\n  padding-left: 16px;\n  > div > input {\n    text-align: center;\n  }\n"]))),Zu=function(e){var t=e.id,n=e.value,i=e.min,r=e.max,o=e.divider,a=e.suffix,s=e.decimal,l=e.isDisabled,u=e["aria-hidden"],c=e.onChange,h=e.onMouseUp,d=e.onTouchEnd,f=e.className,p=e.style,g="".concat(t,"-input"),m="".concat((n*o).toFixed(s)).concat(a),y=(0,Jr.useCallback)((function(e){var t=e.replace(a,"");if(t){var n=parseFloat(t)/o,s=Math.max(i,Math.min(r,n));Number.isNaN(s)||(c(s),h?h(s):d&&d(s))}}),[i,r,a,c,h,d]);return Jr.createElement(Pu,{className:f,style:p,id:g,value:m,isDisabled:l,"aria-hidden":u,onSubmit:y})},Mu=(0,Kr.ZP)(Hl)(et||(et=(0,Gr.Z)(["\n  padding-bottom: 2px;\n"]))),zu=(0,Kr.iv)(tt||(tt=(0,Gr.Z)(["\n  ","\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 50%;\n  cursor: pointer;\n"])),(0,Xr.s)()||(0,Xr.t)()?(0,Kr.iv)(nt||(nt=(0,Gr.Z)(["\n        width: 16px;\n        height: 16px;\n      "]))):(0,Kr.iv)(it||(it=(0,Gr.Z)(["\n        width: 20px;\n        height: 20px;\n      "]))),(function(e){return e.theme.slider.thumbBackground}),(function(e){return e.theme.slider.thumbBorderColor})),Bu=Kr.ZP.input(rt||(rt=(0,Gr.Z)(["\n  display: flex;\n  flex: 1 0 auto;\n  appearance: none;\n  max-width: ",";\n  outline: none;\n  border-radius: 0; /* iOS */\n\n  padding: 0;\n  margin: 0;\n  border: none;\n\n  ","\n\n  ","\n  &::-moz-focus-outer {\n    /** This is to remove the dotted focus lines in firefox */\n    border: 0;\n  }\n  &:disabled {\n    opacity: ",";\n    pointer-events: none;\n  }\n  &:hover {\n    opacity: ",";\n  }\n  &::-webkit-slider-runnable-track {\n    cursor: pointer;\n    appearance: none;\n  }\n  &::-moz-range-track {\n    appearance: none;\n    cursor: pointer;\n  }\n  &::-ms-track {\n    cursor: pointer;\n    height: 2px;\n    appearance: none;\n    background: transparent;\n    color: transparent;\n    border-color: transparent;\n    border-width: 6px 0;\n  }\n  &::-webkit-slider-thumb {\n    appearance: none;\n    ","\n  }\n  &::-moz-range-thumb {\n    appearance: none;\n    ","\n  }\n  &::-ms-thumb {\n    appearance: none;\n    ","\n  }\n  &::-ms-fill-lower {\n    background: ",";\n  }\n  &::-ms-fill-upper {\n    background: ",";\n  }\n  &::-ms-tooltip {\n    display: none;\n  }\n  @media all and (min-width: 0) and (max-width: 599px) {\n    width: 200px;\n  }\n"])),(function(e){return e.showInput?"calc(100% - 50px)":"100%"}),co,(0,Xr.s)()||(0,Xr.t)()?(0,Kr.iv)(ot||(ot=(0,Gr.Z)(["\n        margin-top: 10px;\n        height: 20px;\n        /* remove once we have a better concept for focus in all browser */\n        &:focus {\n          box-shadow: none;\n        }\n      "]))):(0,Kr.iv)(at||(at=(0,Gr.Z)(["\n        height: 2px;\n        background: ",";\n      "])),(function(e){return"linear-gradient(to right, ".concat(function(e){var t=100*(e.value-e.min)/(e.max-e.min);return e.adjust?e.value>0?(t=e.value*(e.max/2)*100,"".concat(e.theme.slider.trackColor," 0%,\n      ").concat(e.theme.slider.trackColor," 50%,\n      ").concat(e.theme.slider.activeTrackColor," 50%,\n      ").concat(e.theme.slider.activeTrackColor," ").concat(50+t,"%,\n      ").concat(e.theme.slider.trackColor," ").concat(50+t,"%,\n      ").concat(e.theme.slider.trackColor," 100%\n      ")):e.value<0?(t=e.value*(e.min/2)*100,"".concat(e.theme.slider.trackColor," 0%,\n      ").concat(e.theme.slider.trackColor," ").concat(50-t,"%,\n      ").concat(e.theme.slider.activeTrackColor," ").concat(50-t,"%,\n      ").concat(e.theme.slider.activeTrackColor," 50%,\n      ").concat(e.theme.slider.trackColor," 50%,\n      ").concat(e.theme.slider.trackColor," 100%\n      ")):"".concat(e.theme.slider.trackColor," 0%,\n    ").concat(e.theme.slider.trackColor," 100%"):"".concat(e.theme.slider.activeTrackColor," 0%,\n    ").concat(e.theme.slider.activeTrackColor," ").concat(t,"%,\n    ").concat(e.theme.slider.trackColor," ").concat(t,"%,\n    ").concat(e.theme.slider.trackColor," 100%")}(e),")")})),(function(e){return e.theme.slider.inactiveOpacity}),(function(e){return e.theme.slider.hoverOpacity}),zu,zu,zu,(function(e){return"".concat(e.theme.slider.activeTrackColor)}),(),Lu=function(e){var t=e.id,n=e.label,i=e.value,r=e.min,o=e.max,a=e.step,s=e.adjust,l=e.showInput,u=e["aria-hidden"],c=e.isDisabled,h=e.onChange,d=e.onMouseUp,f=e.onTouchEnd,p=e["data-test"],g=e.className,m=e.style,y=(0,Jr.useCallback)((,[h]),v=(0,Jr.useCallback)((function(e){var t=e.target.value,n=parseFloat(t);f&&f(n)}),[f]),_=(0,Jr.useCallback)((function(e){var t=e.target.value,n=parseFloat(t);d&&d(n)}),[f]);return Jr.createElement(Bu,{type:"range",role:"slider","data-test":p,id:t,name:n,tabIndex:0,value:i,min:r,max:o,step:a,style:m,className:g,adjust:s,showInput:l,disabled:c,"aria-hidden":u,onChange:y,onKeyUp:y,onKeyDown:y,onMouseUp:_,onTouchEnd:v})},Uu=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(){var e;return(0,Hr.Z)(this,n),(e=t.apply(this,arguments)).onDismiss=function(){var t=e.props,n=t.handleClose,i=t.handleDismiss;n&&n(),i&&i()},e.onConfirm=e}return(0,jr.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.headerLabel,n=e.bodyLabel,i=e.confirmLabel,r=e.dismissLabel,o=e.type,a=e.children,s=Jr.Children.toArray(a)[0];if(!Jr.isValidElement(s))throw new Error("Child is not a valid react element");return Jr.cloneElement(s,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:Jr.createElement(nl,null,t),body:Jr.createElement(Qs,{"data-test":Xr.Sa.DialogBody},n),footer:Jr.createElement(el,{type:o},r&&Jr.createElement(To,{label:r,ariaLabel:r,onClick:this.onDismiss}),i&&Jr.createElement(Co,{label:i,ariaLabel:i,onClick:this.onConfirm}))})}}]),n}(Jr.Component),Nu=Kr.ZP.div(st||(st=(0,Gr.Z)(["\n  display: flex;\n"]))),Hu=(0,Kr.ZP)(nl)(lt||(lt=(0,Gr.Z)(["\n  padding: 0;\n"]))),ju=Kr.ZP.div(ut||(ut=(0,Gr.Z)(["\n  display: flex;\n  flex-direction: column;\n  margin-left: 8px;\n  @media all and (min-width: 640px) {\n    margin-left: 30px;\n  }\n"]))),Wu=(0,Kr.ZP)(Qs)(ct||(ct=(0,Gr.Z)(["\n  padding: 0;\n  margin: 0;\n"]))),Vu=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(){return(0,Hr.Z)(this,n),t.apply(this,arguments)}return(0,jr.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.headerLabel,n=e.bodyLabel,i=e.children,r=Jr.Children.toArray(i)[0];if(!Jr.isValidElement(r))throw new Error("Child is not a valid react element");return Jr.cloneElement(r,{height:"90px",body:Jr.createElement(Qs,{"data-test":Xr.Sa.DialogBody},Jr.createElement(Nu,null,Jr.createElement(al,null),Jr.createElement(ju,null,Jr.createElement(Hu,null,t),Jr.createElement(Wu,null,n))))})}}]),n}(Jr.PureComponent),Gu=Kr.ZP.form(ht||(ht=(0,Gr.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]))),qu=Kr.ZP.textarea(dt||(dt=(0,Gr.Z)(["\n  display: flex;\n  caret-color: ",";\n  ","\n  min-height: 100%;\n  padding: 0px;\n  outline-offset: -8px;\n  color: ",";\n  resize: none;\n  font-family: '","', sans-serif;\n\n  &:selection,\n  &:-moz-selection {\n    background-color: ",";\n    color: ",";\n  }\n"])),(function(e){return e.theme.primary}),au,(function(e){return e.theme.modal.bodyForeground}),(function(e){return e.theme.typography.fontFamily}),(function(e){return e.theme.primary}),(function(e){return e.theme.foreground})),Yu=Kr.ZP.label(ft||(ft=(0,Gr.Z)(["\n  padding: 11px 20px 8px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n"])),(function(e){return e.theme.measurements.fontSystem.label.size}),(function(e){return e.theme.measurements.fontSystem.label.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.label.case}),(function(e){return e.theme.modal.headerForeground})),Xu=(0,Kr.ZP)(Qs)(pt||(pt=(0,Gr.Z)(["\n  height: 100%;\n"]))),Ku=(0,Kr.ZP)(el)(gt||(gt=(0,Gr.Z)(["\n  border-top: none;\n"]))),Ju=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(){var e;return(0,Hr.Z)(this,n),(e=t.apply(this,arguments)).state={value:""},e.input=Jr.createRef(),e.handleKeydown=function(t){(0,Xr.Ra)(e.handleDismiss)(t)},e.handleDismiss=e.handleConfirm=function(){var t=e.props.handleConfirm,n=e.input.current.value;n&&(t&&t(n),e.handleDismiss())},e.onChange=function(t){var n=e.props.allowEmojis?t.target.value:(0,Xr.y)(t.target.value);e.input.current.value=n,e.setState({value:n})},e.onSubmit=function(e){e.preventDefault()},e}return(0,jr.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.text,n=e.defaultText;this.input.current.focus(),this.input.current.value=t||n||"",this.setState({value:this.input.current.value}),document.addEventListener("keydown",this.handleKeydown,!1),t===n&&this.input.current.select()}},{key:"componentDidUpdate",value:function(e){var t=this.props.isVisible;e.isVisible!==t&&t&&this.input.current.focus()}},{key:"componentWillUnmount",value:,{key:"render",value:function(){var e=this.props,t=e.headerLabel,n=e.dismissLabel,i=e.confirmLabel,r=e.maxLength,o=e.type,a=e.children,s=this.state.value,l=Jr.Children.toArray(a)[0];if(!Jr.isValidElement(l))throw new Error("Child is not a valid react element");return Jr.cloneElement(l,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!s,height:"150px",header:Jr.createElement(Yu,{htmlFor:"photoeditorsdk-TextInput"},t),body:Jr.createElement(Xu,null,Jr.createElement(Gu,{onSubmit:this.onSubmit},Jr.createElement(qu,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:!0,onChange:this.onChange,maxLength:r}))),footer:Jr.createElement(Ku,{type:o},Jr.createElement(To,{label:n,ariaLabel:n,onClick:this.handleDismiss}),Jr.createElement(Co,{label:i,ariaLabel:i,isDisabled:!s,onClick:this.handleConfirm}))})}}]),n}(Jr.Component);Ju.defaultProps={defaultText:"Write Something",allowEmojis:!1};var Qu=Ju,$u=Kr.ZP.div(mt||(mt=(0,Gr.Z)(["\n  padding-bottom: ","px;\n"])),(function(e){return 8*(e.count||1)}));$u.defaultProps={count:1};var ec=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(){return(0,Hr.Z)(this,n),t.apply(this,arguments)}return(0,jr.Z)(n,[{key:"getChildren",value:function(){var e=this,t=[],n=[];return Jr.Children.forEach(this.props.children,(function(i){switch(i.type.componentName){case"case":e.props.type===i.props.value&&t.push(i);break;case"default":n.push(i)}})),t.length>0?t:n}},{key:"render",value:function(){var e=this.getChildren();return 0===e.length?null:Jr.createElement(Jr.Fragment,null,e)}}]),n}(Jr.Component),tc=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(){return(0,Hr.Z)(this,n),t.apply(this,arguments)}return(0,jr.Z)(n,[{key:"render",value:function(){return this.props.children}}]),n}(Jr.Component);tc.componentName="case";var nc=Jr.Component);nc.componentName="default";var ic=(0,Kr.F4)(yt||(yt=(0,Gr.Z)(["\n  from { transform: translate(-50%, 0%); }\n  to { transform: translate(-50%, 50%); }\n"]))),rc=Kr.ZP.div(vt||(vt=(0,Gr.Z)(["\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  transform: translate(-50%, 50%);\n  background: black;\n  color: white;\n  border-radius: ","px;\n  padding: 10px 16px;\n  text-align: center;\n  z-index: ",";\n  visibility: hidden;\n\n  ","\n"])),(function(e){return e.position.y}),(function(e){return e.position.x}),(function(e){return e.theme.shape.radiusMedium}),(function(e){return e.theme.measurements.zIndex.toast}),(),oc=rc,ac=(0,Kr.iv)(xt||(xt=(0,Gr.Z)(["\n  border: 1px solid ",";\n  "," {\n    background-color: ",";\n  }\n"])),(function(e){return e.theme.card.activeBorderColor}),go,(function(e){return e.theme.card.activeOverlayColor})),sc=Kr.ZP.button.attrs((function(e){var t={};return e.image&&(t.backgroundImage="url(".concat(e.image,")")),(0,Ur.Z)({style:t},e.style)}))(kt||(kt=(0,Gr.Z)(["\n  &&& {\n    box-sizing: border-box;\n  }\n\n  /* basic ui text items use position absolute */\n  position: relative;\n\n  padding: 0;\n  cursor: pointer;\n  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */\n  vertical-align: top;\n  border: none;\n  box-sizing: border-box;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: ",";\n  color: ",";\n\n  border-radius: ","px;\n  ",";\n  animation-fill-mode: both;\n  overflow: hidden;\n\n  ","\n\n  /* Active */\n\n  /* No :active styles on purpose. */\n\n  ","\n\n  /* Disabled */\n\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n\n    "," {\n      background-color: ",";\n    }\n  }\n\n  /* Hover */\n\n  &:hover {\n    "," {\n      background-color: ",";\n    }\n  }\n"])),(function(e){return e.theme.card.background}),(function(e){return e.theme.card.foreground}),(function(e){return e.theme.shape.radiusMedium}),(function(){return(0,Kr.iv)(bt||(bt=(0,Gr.Z)(["\n    animation: "," 0.2s linear;\n  "])),Vo)}),co,(function(e){return e.isActive&&ac}),mo,(function(e){return e.theme.card.inactiveOverlayColor}),yo,(function(e){return e.theme.card.hoverOverlayColor})),lc=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(){var e;return(0,Hr.Z)(this,n),(e=t.apply(this,arguments)).state=vo,e.timeout=null,e.onKeyDown=function(t){"Space"!==t.key&&"Enter"!==t.key||e.props.onClick&&e.props.onClick()},e.onClick=function(t){var n=t.currentTarget.getBoundingClientRect(),i=t.pageX-n.left,r=t.pageY-n.top;"block"===e.state.display?e.setState({display:"none"},(function(){e.setRippleState(i,r)})):e.setRippleState(i,r),e.props.onClick(t)},e.setRippleState=function(t,n){e.setState({left:t,top:n,display:"block"}),e.timeout=setTimeout((function(){e.setState({display:"none"})}),1200)},e}return(0,jr.Z)(n,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.label,i=e.isActive,r=e.isDisabled,o=e.image,a=e.style,s=e.className,l=this.state,u=l.left,c=l.top,h=l.display;return Jr.createElement(sc,{isActive:i,"aria-label":n,"data-test":n,disabled:r,image:o,onClick:this.onClick,onKeyDown:this.onKeyDown,style:a,className:s},t,Jr.createElement(_o,{display:h,left:u,top:c}),Jr.createElement(go,null),Jr.createElement(mo,null),Jr.createElement(yo,null))}}]),n}(Jr.Component);lc.defaultProps={isActive:!1};var uc,cc=hc=dc=function(e){return"string"===typeof e&&e.search("%")===e.length-1&&hc(e.substr(0,e.length-1))},fc=(uc=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;(0,Hr.Z)(this,n),(i=t.call(this,e)).contentRef=null,i.contentRef=Jr.createRef(),i.animationFrameIDs=[];var r="auto",o="visible";return hc(e.height)?(r=e.height<0||"0"===e.height?0:e.height,o="hidden"):dc(e.height)&&(r="0%"===e.height?0:e.height,o="hidden"),"undefined"!==typeof window&&window.matchMedia&&(i.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion)").matches),i.state={height:r,overflow:o,shouldUseTransitions:!1},i}return(0,jr.Z)(n,[{key:"componentDidMount",value:function(){var e=this.state.height;this.contentRef.current&&this.contentRef.current.style&&this.hideContent(e)}},{key:"componentDidUpdate",value:function(e,t){var n=this,i=this.props.height,r=this.getTimings(),o=r.duration,a=r.delay;if(this.contentRef.current&&i!==e.height){this.showContent(t.height),this.contentRef.current.style.overflow="hidden";var s=this.contentRef.current.offsetHeight;this.contentRef.current.style.overflow="";var l=o+a,u=null,c={height:null,overflow:"hidden"},h="auto"===t.height;hc(i)?(u=i<0||"0"===i?0:i,c.height=u):dc(i)?(u="0%"===i?0:i,c.height=u):(u=s,c.height="auto",c.overflow=null),h&&(c.height=u,u=s),this.setState({height:u,overflow:"hidden",shouldUseTransitions:!h}),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),h?(cc(this.animationFrameIDs),this.animationFrameIDs=(),this.animationClassesTimeoutID=setTimeout((,l)):this.timeoutID=setTimeout((function(){n.setState({height:c.height,overflow:"visible",shouldUseTransitions:!1}),"auto"!==i&&n.hideContent(u)}),l)}}},{key:"componentWillUnmount",value:,{key:"getTimings",value:,{key:"showContent",value:function(e){0===e&&(this.contentRef.current.style.display="")}},{key:"hideContent",value:function(e){0===e&&(this.contentRef.current.style.display="none")}},{key:"render",value:function(){var e=this.props,t=e.animateOpacity,n=e.children,i=e.className,r=e.easing,o=this.state,a=o.height,s=o.overflow,l=o.shouldUseTransitions,u=this.getTimings(),c=u.duration,h=u.delay,d={height:a,overflow:s};l&&(d.transition="height ".concat(c,"ms ").concat(r," ").concat(h,"ms"),d.WebkitTransition=d.transition);var f={};return t&&(f.transition="opacity ".concat(c,"ms ").concat(r," ").concat(h,"ms"),f.WebkitTransition=f.transition,0===a&&(f.opacity=0)),Jr.createElement("div",{"aria-hidden":0===a,className:i,style:d},Jr.createElement("div",{style:f,ref:this.contentRef},n))}}]),n}(Jr.Component),uc.defaultProps={animateOpacity:!1,duration:250,delay:0,easing:"ease"},uc),pc={Focused:co,VisuallyHidden:ho},gc={ripple:fo,scale:Wo,slide:Vo},mc={Container:Aa,ColorItem:js,ColorItemBase:Us,ColorItemBackground:Zs,ColorItemTiledBackground:Hs,ColorItemActiveOverlay:Bs,Dialog:Ks,DialogBase:qs,DialogContainer:Xs,DialogBackdrop:Vs,DialogHeader:nl,DialogBody:Qs,DialogFooter:el,DialogSpinner:al,TextEditModal:Qu,ActionModal:Uu,InfoModal:Vu,Spacer:$u,Draggable:Bl,DraggableCore:Zl,Toast:oc,Input:{Label:Hl,File:yu,Search:Eu,Slider:function(e){var t=e["data-test"],n=e.label,i=e.identifier,r=e.showLabel,o=void 0===r||r,a=e.showInput,s=void 0===a||a,l=e.centerSlider,u=void 0!==l&&l,c=e.min,h=void 0===c?-1:c,d=e.max,f=void 0===d?1:d,p=e.value,g=void 0===p?0:p,m=e.step,y=void 0===m?.01:m,v=e.decimal,_=void 0===v?0:v,b=e.divider,x=void 0===b?100:b,k=e.suffix,w=void 0===k?"":k,S=e.adjust,C=void 0!==S&&S,T=e["aria-hidden"],E=e.isDisabled,D=e.onChange,I=e.onMouseUp,R=e.onTouchEnd,O=e.style,F=e.className,A=(0,Jr.useState)("photoeditorsdk-slider-".concat((0,Xr.Na)())),P=(0,Lr.Z)(A,1)[0];return Jr.createElement(Fu,{className:F,"data-test":t||i||P,style:O},Jr.createElement(Mu,{isDisabled:E,label:n,show:o}),Jr.createElement(Au,{centerSlider:s&&u},Jr.createElement(Lu,{id:P,label:n,value:g,min:h,max:f,step:y,adjust:C,showInput:s,isDisabled:E,"aria-hidden":T,onChange:D,onMouseUp:I,onTouchEnd:R}),s&&Jr.createElement(Zu,{id:P,value:g,min:h,max:f,divider:x,suffix:w,decimal:_,isDisabled:E,"aria-hidden":T,onChange:D,onMouseUp:I,onTouchEnd:R})))},SliderBase:Fu,SliderContainer:Au,SliderInput:Zu,SliderTrack:Lu,SliderLabel:Mu,CarouselSlider:Ql,Selection:Ou,Checkbox:ou,CheckboxBase:eu,CheckboxInput:iu,CheckboxCheckMark:nu,Dropdown:mu,Text:ku,NumericInput:Cu,Form:vu},Switch:{Index:ec,Case:tc,Default:nc}},yc=(0,Kr.ZP)(Ro)(wt||(wt=(0,Gr.Z)(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"])),(function(e){return e.theme.measurements.fontSystem.button2.size}),(function(e){return e.theme.measurements.fontSystem.button2.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.button2.case}),(function(e){return e.theme.button.textSecondaryForeground}),mo,(function(e){return e.theme.button.textInactiveOpacity})),vc=Kr.ZP.div(St||(St=(0,Gr.Z)(["\n  display: inline-flex;\n"]))),_c=(0,Kr.ZP)(Ro)(Ct||(Ct=(0,Gr.Z)(["\n  background: ",";\n  color: ",";\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  padding: 4px 10px;\n  position: relative;\n  /* for safari */\n  margin: 0;\n  &:last-child:after {\n    opacity: 0;\n  }\n"])),(function(e){return e.theme.canvasActionBar.background}),(function(e){return e.theme.canvasActionBar.foreground}),(function(e){return e.theme.measurements.fontSystem.button2.size}),(function(e){return e.theme.measurements.fontSystem.button2.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.button2.case})),bc=Kr.ZP.div(Tt||(Tt=(0,Gr.Z)(["\n  ",";\n  position: absolute;\n  transform: translate(-50%, -100%);\n  background: ",";\n  color: ",";\n  border-radius: ","px;\n  white-space: nowrap;\n  transition: opacity 0.3s ease-in-out;\n  z-index: ",";\n\n  "," {\n    &:after {\n      content: '';\n      position: absolute;\n      right: 0px;\n      top: 6px;\n      height: calc(100% - 12px);\n      border-right: 1px solid\n        ",";\n      &:last-child {\n        border-right: unset;\n      }\n    }\n  }\n"])),(function(e){return e.show?(0,Kr.iv)(Et||(Et=(0,Gr.Z)(["\n          opacity: 1;\n        "]))):(0,Kr.iv)(Dt||(Dt=(0,Gr.Z)(["\n          opacity: 0;\n        "])))}),(function(e){return e.theme.canvasActionBar.background}),(function(e){return e.theme.canvasActionBar.foreground}),(function(e){return e.theme.canvasActionBar.borderRadius?e.theme.canvasActionBar.borderRadius:e.theme.shape.radiusMedium}),(function(e){return e.theme.measurements.zIndex.buttonGroup}),_c,(function(e){return e.theme.canvasActionBar.separatorColor})),xc=(0,Kr.ZP)(ko)(It||(It=(0,Gr.Z)(["\n  width: 60px;\n  height: 60px;\n  background-color: gray;\n  border-radius: 50%;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: ",";\n  padding: 2px;\n"])),(function(e){return e.theme.measurements.zIndex.button.float})),kc=Kr.ZP.div(Rt||(Rt=(0,Gr.Z)(["\n  height: 56px;\n  width: 56px;\n  border-radius: 50%;\n  background-color: ",";\n"])),(function(e){return e.theme.webcam.floatButton})),wc=["library",["transform","filter","adjustment"],["focus","frame","overlay"],["text","textdesign","sticker","brush"]],Sc={image:"",license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:["undo","redo","export","close"],displayResizeWarning:!1,displayCloseWarning:!0,displayCanvasRendererWarning:!0,displayToolControlBarTitle:!0,displaySerializationModal:!0,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:(0,Xr.x)()?"webgl":"canvas",backgroundColor:[0,0,0,1]},enableZoom:!0,scaleImageToFit:!0,restrictZoomOutToDefault:!0,forceCrop:!1,assetBaseUrl:"assets/",defaultTool:"filter",tools:wc,snapping:new Xr.I,filter:new Xr.Y,focus:new Xr.da,adjustment:new Xr.U,library:new Xr.ma,overlay:new Xr.pa,sticker:new Xr.ua,text:new Xr.xa,textdesign:new Xr.Ea,frame:new Xr.ha,brush:new Xr.Ca,transform:new Xr.Ha,export:{image:{exportType:"image",format:"image/png",quality:.9,enableDownload:!0,transparent:!0},filename:"photoeditorsdk-export"},custom:{},watermark:new Xr.K},Cc="function"===typeof Symbol&&Symbol.for;function Tc(e){return e&&"object"===typeof e&&!function(e){return"[object RegExp]"===Object.prototype.toString.call(e)||"[object Date]"===Object.prototype.toString.call(e)||Object.prototype.toString.call(e).includes("HTML")||"[object Array]"===Object.prototype.toString.call(e)}(e)&&!e)&&!function(e){return!(!Cc||!Object.hasOwnProperty.call(e,"$$typeof"))&&(e.$$typeof===Symbol.for("react.element")||e.$$typeof===Symbol.for("react.forward_ref"))}(e)}unction Dc(e,t,n){return Array.isArray(t)?Array.isArray(e)?t:Ec(t,n):function(e,t,n){var i={};return Tc(e)&&Object.keys(e).forEach((),Object.keys(t).forEach((function(r){var o=Tc(t[r])&&e[r];i[r]=o?Dc(e[r],t[r],n):Ec(t[r],n)})),i}(e,t,n)}function Ic(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return Dc(e,n,t)}))}var Rc={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:14,letterSpacing:0,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}},Oc={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}},Fc=function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=3*t,i=e-2*n,r=(i-2*t)/3,o=(i-t)/2;return{advancedUIToolControlBar:{width:e,paddingTop:2*t,paddingBottom:2*t,paddingLeft:n,paddingRight:n,marginBottom:0,controls:{gutter:2*t}},advancedUICard:{small:{height:r,width:r},medium:{height:o,width:o},large:{height:86,width:i}},advancedUISpacer:t,inputs:{cropSize:{maxWidth:e},checkbox:{maxWidth:e}}}}(230);return Ic([e,{advancedUIToolbar:{width:55,itemHeight:48,separatorHeight:20,marginBottom:0},basicCanvasOffset:28,basicUIToolbar:{openHeight:88,closeHeight:40},basicUIToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:116,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:Rc,zIndex:Oc}])},Ac=function(e){var t=Number(e).toString(16);return t.length<2&&(t="0".concat(t)),t},Pc=function(e,t,n){var i=Ac(255*e),r=Ac(255*t),o=Ac(255*n);return"#".concat(i).concat(r).concat(o)},Zc=function(e){if((0,Xr.ob)(e)){var t=(0,Lr.Z)(e,4),n=t[0],i=t[1],r=t[2],o=t[3];return"rgba(".concat(255*n,", ").concat(255*i,", ").concat(255*r,", ").concat(o,")")}if((0,Xr.nb)(e)){var a=e.r,s=e.g,l=e.b,u=e.a;return"rgba(".concat(255*a,", ").concat(255*s,", ").concat(255*l,", ").concat(u,")")}if((0,Xr.mb)(e)){var c=(0,Lr.Z)(e,3),h=c[0],d=c[1],f=c[2];return Pc(h,d,f)}if((0,Xr.lb)(e)){var p=e.r,g=e.g,m=e.b;return Pc(p,g,m)}return e},Mc=function(e){return e.map(()},zc={black:[0,0,0,1],white:[1,1,1,1],gray:[191/255,191/255,191/255,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},Bc={transparent:[0,0,0,0],black:[0,0,0,1],white:[1,1,1,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},Lc=(Ot={},(0,Br.Z)(Ot,"brightness",0),(0,Br.Z)(Ot,"saturation",0),(0,Br.Z)(Ot,"contrast",0),(0,Br.Z)(Ot,"gamma",0),(0,Br.Z)(Ot,"clarity",0),(0,Br.Z)(Ot,"exposure",0),(0,Br.Z)(Ot,"shadows",0),(0,Br.Z)(Ot,"highlights",0),(0,Br.Z)(Ot,"whites",0),(0,Br.Z)(Ot,"blacks",0),(0,Br.Z)(Ot,"temperature",0),(0,Br.Z)(Ot,"sharpness",0),Ot),Uc=function(){function e(t,n){var i=this;(0,Hr.Z)(this,e),this.assets=[],this.entityMapper=function(e){return"items"in e?i.categoryMapper(e):i.itemMapper(e)},this.categoryMapper=function(e){return e?(0,Ur.Z)((0,Ur.Z)({},e),{},{thumbnailURI:i.getCategoryThumbnailURI(e),name:i.config.locale[e.identifier]||e.name,items:e.items.map(i.itemMapper)}):null},this.itemMapper=function(e){return(0,Ur.Z)((0,Ur.Z)({},e),{},{thumbnailURI:i.getItemThumbnailURI(e),name:i.config.locale[e.identifier]||("name"in e?e.name:"")})},this.getCategoryThumbnailURI=function(e){return e.thumbnailURI?(0,Xr.z)(e.thumbnailURI)||"data:image"===e.thumbnailURI.substr(0,10)?e.thumbnailURI:i.config.getAssetPath(e.thumbnailURI||""):""},this.getItemThumbnailURI=function(e){var t;if(null==(t=e.thumbnailURI)?void 0:t.trim())return(0,Xr.z)(e.thumbnailURI)||"data:image"===e.thumbnailURI.substr(0,10)?e.thumbnailURI:i.config.getAssetPath(e.thumbnailURI||"");var n=e[i.config.itemFallbackKey];return n?i.config.getAssetPath(n):""},this.config=n,this.assets=t.map(this.entityMapper).filter(Boolean)}return(0,jr.Z)(e,[{key:"categories",get:function(){return this.assets.reduce((function(t,n){if(e.isCategory(n))return[].concat((0,Mr.Z)(t),[n])}),[]).filter(Boolean)}},{key:"items",get:function(){return this.assets.reduce((function(t,n){return e.isCategory(n)?[].concat((0,Mr.Z)(t),(0,Mr.Z)(n.items)):[].concat((0,Mr.Z)(t),[n])}),[]).filter(Boolean)}}],[{key:"isCategory",value:]),e}(),Nc=function(){eturn(0,jr.Z)(e,[{key:"contains",value:,{key:"clamp",value:function(e){return Math.min(Math.max(this.from,e),this.to)}}]),e}(),Hc=new Nc(-1,1),jc=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.editAdjustments=function(e){var t=e.type,i=e.value,r=Hc.clamp(i);n.state[t]=r},this.reset=function(){(0,Xr.m)((function(){-1===n.indexInContainer&&(Object.keys(Lc).forEach((),n.orderHelper.removeIndex("adjustment"))}))},this.setAdjustmentEffect=function(e){var t=n.orderHelper.addIndex("adjustment");return n.effect?n.effect.setProperties(e):n.effect=n.engineMediator.engine.addAdjustments(e,n.engineMediator.image.container,t),n.effect.getProperties()},this.removeAdjustmentEffect=function(){n.effect&&(n.engineMediator.engine.removeEffect(n.effect),-1===n.indexInContainer&&(n.effect=void 0))},this.engineMediator=t,this.state=Lc}return(0,jr.Z)(e,[{key:"indexInContainer",get:function(){return this.effect?this.effect.getIndexInParent():-1}},{key:"orderHelper",get:function(){return this.engineMediator.orderHelper}}]),e}();(0,Xr.c)([Xr.e],jc.prototype,"state",2),(0,Xr.c)([Xr.l],jc.prototype,"editAdjustments",2),(0,Xr.c)([Xr.l],jc.prototype,"reset",2);var Wc=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.dirty=Xr.e.box(!1),this.isHistoryChanged=!1,this.editAdjustments=function(e){var t=e.type,i=e.value;n.isHistoryChanged=!(0,Xr.Va.default)(n.state[t],i),n.pureSetAdjustment({type:t,value:i}),n.editor.render()},this.toolSnapshot=function(){(0,Xr.Va.default)(n.state,Lc)?n.dirty.set(!1):n.dirty.set(!0),n.isHistoryChanged&&(n.addSnapshot("edit","adjustment"),n.isHistoryChanged=!1)},this.addSnapshot=function(e,t){n.editor.addSnapshot(void 0,e,t)},this.toggleOptionSelection=function(e){n.selectedOption=e},this.pureSetAdjustment=function(e){var t=e.type,i=e.value,r=n.adjustmentsStore.setAdjustmentEffect((0,Br.Z)({},t,i));n.adjustmentsStore.editAdjustments({type:t,value:r[t]})},this.pureReset=function(){n.dirty.set(!1),n.adjustmentsStore.removeAdjustmentEffect(),n.adjustmentsStore.reset(),n.selectedOption=""},this.reset=function(){n.pureReset(),n.addSnapshot("delete",n.locale.controls.buttonReset),n.editor.render()},this.updateStateFromHistory=function(e){(0,Xr.Va.default)(e,n.state)||((0,Xr.Va.default)(e,Lc)?n.pureReset():(0,Xr.m)((function(){n.dirty.set(Object.values(e).some((function(e){return 0!==e}))),Object.keys(e).forEach(()})))},this.updateStateFromSerialization=function(e){n.updateStateFromHistory(e)},this.editor=t,this.adjustmentsStore=new jc(this.editor.engineMediator),this.selectedOption="";var i=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new Uc(i,(0,Ur.Z)((0,Ur.Z)({},this.config),{},{locale:(0,Ur.Z)((0,Ur.Z)({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("adjustment")}))}return(0,jr.Z)(e,[{key:"selectedAdjustmentType",get:function(){return this.selectedOption}},{key:"isDirty",get:function(){return this.dirty.get()}},{key:"state",get:function(){return this.adjustmentsStore.state}},{key:"selectedOptionLabel",get:function(){var e=this,t=this.items.find(();return t?t.name:""}},{key:"brightness",get:function(){return this.state.brightness}},{key:"saturation",get:function(){return this.state.saturation}},{key:"contrast",get:function(){return this.state.contrast}},{key:"gamma",get:function(){return this.state.gamma}},{key:"clarity",get:function(){return this.state.clarity}},{key:"exposure",get:function(){return this.state.exposure}},{key:"shadows",get:function(){return this.state.shadows}},{key:"highlights",get:function(){return this.state.highlights}},{key:"whites",get:function(){return this.state.whites}},{key:"blacks",get:function(){return this.state.blacks}},{key:"temperature",get:function(){return this.state.temperature}},{key:"sharpness",get:function(){return this.state.sharpness}},{key:"categories",get:function(){return this.entityManager.categories}},{key:"items",get:function(){return this.entityManager.items}},{key:"config",get:function(){return this.editor.configStore.config.adjustment}},{key:"locale",get:function(){return this.editor.configStore.locale.adjustment}}]),e}();(0,Xr.c)([Xr.e],Wc.prototype,"selectedOption",2),(0,Xr.c)([Xr.e],Wc.prototype,"dirty",2),(0,Xr.c)([Xr.l],Wc.prototype,"editAdjustments",2),(0,Xr.c)([Xr.l],Wc.prototype,"toggleOptionSelection",2),(0,Xr.c)([Xr.l],Wc.prototype,"pureSetAdjustment",2),(0,Xr.c)([Xr.l],Wc.prototype,"pureReset",2),(0,Xr.c)([Xr.l],Wc.prototype,"reset",2),(0,Xr.c)([Xr.l],Wc.prototype,"updateStateFromHistory",2),(0,Xr.c)([Xr.l],Wc.prototype,"updateStateFromSerialization",2),(0,Xr.c)([Xr.f],Wc.prototype,"selectedAdjustmentType",1),(0,Xr.c)([Xr.f],Wc.prototype,"isDirty",1),(0,Xr.c)([Xr.f],Wc.prototype,"state",1),(0,Xr.c)([Xr.f],Wc.prototype,"selectedOptionLabel",1),(0,Xr.c)([Xr.f],Wc.prototype,"brightness",1),(0,Xr.c)([Xr.f],Wc.prototype,"saturation",1),(0,Xr.c)([Xr.f],Wc.prototype,"contrast",1),(0,Xr.c)([Xr.f],Wc.prototype,"gamma",1),(0,Xr.c)([Xr.f],Wc.prototype,"clarity",1),(0,Xr.c)([Xr.f],Wc.prototype,"exposure",1),(0,Xr.c)([Xr.f],Wc.prototype,"shadows",1),(0,Xr.c)([Xr.f],Wc.prototype,"highlights",1),(0,Xr.c)([Xr.f],Wc.prototype,"whites",1),(0,Xr.c)([Xr.f],Wc.prototype,"blacks",1),(0,Xr.c)([Xr.f],Wc.prototype,"temperature",1),(0,Xr.c)([Xr.f],Wc.prototype,"sharpness",1),(0,Xr.c)([Xr.f],Wc.prototype,"categories",1),(0,Xr.c)([Xr.f],Wc.prototype,"items",1),(0,Xr.c)([Xr.f],Wc.prototype,"config",1),(0,Xr.c)([Xr.f],Wc.prototype,"locale",1);var Vc={identifier:"identity",intensity:1,isDuotone:!1},Gc=new Nc(0,1),qc=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.changeIdentifier=function(e){n.state.identifier=e},this.changeIfDuotone=function(e){n.state.isDuotone=e},this.changeIntensity=function(e){var t=Gc.clamp(e);n.state.intensity=t},this.reset=function(){-1===n.indexInContainer&&(n.state.identifier=Vc.identifier,n.state.intensity=Vc.intensity,n.removeIndex())},this.setFilterEffect=function(e){var t=e.identifier,i=e.intensity,r=e.isDuotone,o=n.state,a=n.removeFilterEffect();var s=n.engineMediator.orderHelper.addIndex("filter");return new Promise(r?function(e,r){n.engineMediator.engine.addDuoToneFilterFromAssets(t,n.engineMediator.image.container,s).then((function(t){a(),n.effect=t,n.effect.setProperties({colorIntensity:i}),e()})).catch((function(e){n.fallbackOnError(o),r(e)}))}:function(e,r){n.engineMediator.engine.addLUTFilterFromAssets(t,n.engineMediator.image.container,s).then((function(t){a(),n.effect=t,n.effect.setProperties({intensity:i}),e()})).catch(()})},this.removeFilterEffect=function(){n.effect&&(n.engineMediator.engine.removeEffect(n.effect),-1===n.indexInContainer&&(n.effect=void 0))},this.setEffectProperties=function(e){var t=e.intensity;return n.effect?(n.state.isDuotone?n.effect.setProperties({colorIntensity:t}):n.effect.setProperties({intensity:t}),n.effect.getProperties()):null},this.removeIndex=function(){n.engineMediator.orderHelper.removeIndex("filter")},this.fallbackOnError=function(e){n.changeIdentifier(e.identifier),n.changeIntensity(e.intensity),"identity"===e.identifier&&n.removeIndex()},this.engineMediator=t,this.state=Vc}return(0,jr.Z)(e,[{key:"indexInContainer",get:function(){return this.effect?this.effect.getIndexInParent():-1}}]),e}();(0,Xr.c)([Xr.e],qc.prototype,"state",2),(0,Xr.c)([Xr.l],qc.prototype,"changeIdentifier",2),(0,Xr.c)([Xr.l],qc.prototype,"changeIfDuotone",2),(0,Xr.c)([Xr.l],qc.prototype,"changeIntensity",2),(0,Xr.c)([Xr.l],qc.prototype,"reset",2);var Yc="identity",Xc=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.selectFilter=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i,r,o=arguments;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.length>1&&void 0!==o[1]?o[1]:1,t===n.identifier){e.next=8;break}return r=n.selectedCategory,e.next=5,n.filterStore.setFilterEffect({identifier:t,intensity:i,isDuotone:n.isOptionDuoTone(t)});case 5:n.selectedCategory===Yc&&(n.selectedCategory=r),n.editor.render(),n.addSnapshot("add","filter");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.changeIntensity=function(e){var t=n.isOptionDuoTone(n.identifier),i=n.filterStore.setEffectProperties({intensity:e});if(i){var r=t?i.colorIntensity:i.intensity;n.filterStore.changeIntensity(r),n.editor.render()}},this.setImageAndGetPreviews=(0,Zr.Z)(Yr().mark((function e(){var t;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.editor.activeStore.state.image,e.next=3,n.editor.previewThumbnails.addImageToContainer(t);case 3:return e.next=5,n.getAllFilterPreview();case 5:case"end":return e.stop()}}),e)}))),this.getAllFilterPreview=(0,Zr.Z)(Yr().mark((function e(){var t,i,r,o;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.entityManager.items.map((),e.next=3,n.editor.previewThumbnails.getAllFilterPreviewThumbnails(t);case 3:return i=e.sent,e.next=6,n.editor.wait();case 6:r=n.config,o=n.editor.configStore.assetProvider.getAssets("filter").map((function(e){return(0,Ur.Z)((0,Ur.Z)({},e),{},{items:e.items.map((function(e){return(0,Ur.Z)((0,Ur.Z)({},e),{},{thumbnailURI:i[e.identifier]})}))})})),n.entityManager=new Uc(o,(0,Ur.Z)((0,Ur.Z)({},r),{},{locale:n.locale.items,getAssetPath:n.editor.getAssetPath("filter")}));case 9:case"end":return e.stop()}}),e)}))),this.toolSnapshot=function(){n.addSnapshot("edit",n.locale.controls.sliderIntensity)},this.addSnapshot=function(e,t){n.editor.addSnapshot(void 0,e,t)},this.pureReset=function(){n.selectedCategory=Yc,n.filterStore.removeFilterEffect(),n.filterStore.reset()},this.reset=function(){n.pureReset(),n.addSnapshot("delete",n.locale.controls.buttonReset),n.editor.render()},this.toggleCategorySelection=function(e){n.selectedCategory=n.selectedCategory===e?Yc:e},this.updateStateFromSerialization=function(e){var t=e.identifier,i=e.intensity,r=n.doesFilterAssetExist(t);if(r){var o=(0,Xr.Z)(r);return n.filterStore.setFilterEffect({identifier:t,intensity:i,isDuotone:o})}throw new Xr.Ya(t)},this.updateStateFromHistory=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("identity"!==t.identifier){e.next=3;break}return n.pureReset(),e.abrupt("return",new Promise((function(e){e()})));case 3:return e.abrupt("return",n.filterStore.setFilterEffect(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.doesFilterAssetExist=function(e){return n.entityManager.items.find(()},this.isOptionDuoTone=function(e){var t=n.doesFilterAssetExist(e);return!!t&&(0,Xr.Z)(t)},this.editor=t,this.selectedCategory=Yc,this.filterStore=new qc(this.editor.engineMediator);var i=this.config,r=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new Uc(r,(0,Ur.Z)((0,Ur.Z)({},i),{},{locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))}return(0,jr.Z)(e,[{key:"state",get:function(){return this.filterStore.state}},{key:"identifier",get:function(){return this.state.identifier}},{key:"intensity",get:function(){return this.state.intensity}},{key:"isDuotone",get:function(){return this.state.isDuotone}},{key:"selectedCategoryIdentifier",get:function(){return this.selectedCategory}},{key:"isOptionSelected",get:function(){return"identity"!==this.identifier}},{key:"config",get:function(){return this.editor.configStore.config.filter}},{key:"locale",get:function(){return this.editor.configStore.locale.filter}},{key:"categories",get:function(){return this.entityManager.categories}},{key:"items",get:function(){return this.entityManager.items}}]),e}();(0,Xr.c)([Xr.e],Xc.prototype,"selectedCategory",2),(0,Xr.c)([Xr.e],Xc.prototype,"entityManager",2),(0,Xr.c)([Xr.l],Xc.prototype,"selectFilter",2),(0,Xr.c)([Xr.l],Xc.prototype,"changeIntensity",2),(0,Xr.c)([Xr.l],Xc.prototype,"pureReset",2),(0,Xr.c)([Xr.l],Xc.prototype,"reset",2),(0,Xr.c)([Xr.l],Xc.prototype,"toggleCategorySelection",2),(0,Xr.c)([Xr.l],Xc.prototype,"updateStateFromSerialization",2),(0,Xr.c)([Xr.l],Xc.prototype,"updateStateFromHistory",2),(0,Xr.c)([Xr.f],Xc.prototype,"state",1),(0,Xr.c)([Xr.f],Xc.prototype,"identifier",1),(0,Xr.c)([Xr.f],Xc.prototype,"intensity",1),(0,Xr.c)([Xr.f],Xc.prototype,"isDuotone",1),(0,Xr.c)([Xr.f],Xc.prototype,"selectedCategoryIdentifier",1),(0,Xr.c)([Xr.f],Xc.prototype,"isOptionSelected",1),(0,Xr.c)([Xr.f],Xc.prototype,"config",1),(0,Xr.c)([Xr.f],Xc.prototype,"locale",1),(0,Xr.c)([Xr.f],Xc.prototype,"categories",1),(0,Xr.c)([Xr.f],Xc.prototype,"items",1);var Kc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=Math.tan(t),r=Math.sqrt(Math.pow(i,2)+1);return{x:e.x+n/r,y:e.y+n*i/r}},Jc={blurRadius:40,gradientSize:.2},Qc={identifier:"identity",linear:(0,Ur.Z)({start:{x:0,y:0},end:{x:0,y:0}},Jc),radial:(0,Ur.Z)({center:{x:0,y:0},radius:0},Jc),mirrored:(0,Ur.Z)({origin:{x:0,y:0},rotation:0,size:0},Jc),gaussian:Jc},$c=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.selectFocus=function(e,t){(0,Xr.m)((function(){n.state.identifier=e,t&&(n.state[e].blurRadius=t)}))},this.changeBlurRadius=function(e,t){"identity"!==e&&(n.state[e].blurRadius=t)},this.reset=function(){-1===n.indexInContainer&&(n.state.identifier=Qc.identifier,"identity"!==n.state.identifier&&(n.state[n.state.identifier].blurRadius=Qc[n.state.identifier].blurRadius))},this.setLinear=function(e){var t=e.start,i=e.end;n.state.linear.start.x=t.x,n.state.linear.start.y=t.y,n.state.linear.end.x=i.x,n.state.linear.end.y=i.y},this.setLinearStart=function(e){n.state.linear.start.x=e.x,n.state.linear.start.y=e.y},this.setLinearEnd=function(e){n.state.linear.end.x=e.x,n.state.linear.end.y=e.y},this.setRadialCenter=function(e){n.state.radial.center.x=e.x,n.state.radial.center.y=e.y},this.setRadialRadius=function(e){n.state.radial.radius=e},this.setMirroredOrigin=function(e){n.state.mirrored.origin.x=e.x,n.state.mirrored.origin.y=e.y},this.setMirroredRotation=function(e){n.state.mirrored.rotation=e},this.setMirroredSize=this.getEffectProperties=this.setLinearFocus=function(e){n.effect=n.engineMediator.engine.addLinearBlur(e,n.imageContainer,n.order),n.updateLinearState(n.effect.getProperties())},this.setGaussianFocus=function(e){n.effect=n.engineMediator.engine.addGaussianBlur(e,n.imageContainer,n.order),n.updateGaussianState(n.effect.getProperties())},this.setRadialFocus=function(e){n.effect=n.engineMediator.engine.addRadialBlur(e,n.imageContainer,n.order),n.updateRadialState(n.effect.getProperties())},this.setMirroredFocus=function(e){n.effect=n.engineMediator.engine.addMirroredBlur(e,n.imageContainer,n.order),n.updateMirroredState(n.effect.getProperties())},this.updateFromEngineState=function(e){var t=n.getEffectProperties();if(t&&"identity"!==e)switch(e){case"linear":n.updateLinearState(t);break;case"radial":n.updateRadialState(t);break;case"mirrored":n.updateMirroredState(t)}},this.updateGaussianState=this.updateMirroredState=function(e){var t=n.editor.worldToPreview(e.mirrorAxisOrigin),i=new Xr.Pa(n.editor.worldToPreview(e.mirrorAxisDirection)).subtract(t),r=Math.atan2(i.y,i.x);n.setMirroredOrigin(n.editor.worldToPreview(e.mirrorAxisOrigin)),n.setMirroredRotation(r),n.setMirroredSize(n.editor.worldToPreview(e.clearAreaWidth)),n.changeBlurRadius("mirrored",e.blurRadius)},this.updateRadialState=function(e){n.setRadialCenter(n.editor.worldToPreview(e.center)),n.setRadialRadius(n.editor.worldToPreview(e.radius)),n.changeBlurRadius("radial",e.blurRadius)},this.updateLinearState=function(e){n.setLinearStart(n.editor.worldToPreview(e.start)),n.setLinearEnd(n.editor.worldToPreview(e.end)),n.changeBlurRadius("linear",e.blurRadius)},this.setEffectProperties=function(e){return n.effect?(n.effect.setProperties(e),n.effect.getProperties()):null},this.removeFocus=function(){n.effect&&(n.engineMediator.engine.removeEffect(n.effect),n.engineMediator.orderHelper.removeIndex("focus"))},this.editor=t,this.engineMediator=this.editor.engineMediator,this.state=Qc}return(0,jr.Z)(e,[{key:"indexInContainer",get:function(){return this.effect?this.effect.getIndexInParent():-1}},{key:"order",get:,{key:"imageContainer",get:function(){return this.engineMediator.image.container}}]),e}();(0,Xr.c)([Xr.e],$c.prototype,"state",2),(0,Xr.c)([Xr.l],$c.prototype,"selectFocus",2),(0,Xr.c)([Xr.l],$c.prototype,"changeBlurRadius",2),(0,Xr.c)([Xr.l],$c.prototype,"reset",2),(0,Xr.c)([Xr.l],$c.prototype,"setLinear",2),(0,Xr.c)([Xr.l],$c.prototype,"setLinearStart",2),(0,Xr.c)([Xr.l],$c.prototype,"setLinearEnd",2),(0,Xr.c)([Xr.l],$c.prototype,"setRadialCenter",2),(0,Xr.c)([Xr.l],$c.prototype,"setRadialRadius",2),(0,Xr.c)([Xr.l],$c.prototype,"setMirroredOrigin",2),(0,Xr.c)([Xr.l],$c.prototype,"setMirroredRotation",2),(0,Xr.c)([Xr.l],$c.prototype,"setMirroredSize",2),(0,Xr.c)([Xr.l],$c.prototype,"updateFromEngineState",2);var eh=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.selectFocus=function(e){if(e!==n.identifier){n.focusStore.removeFocus();var t=.2*n.maxIntensity,i=n.editor.engine.getOutputContainer().getBounds().width,r=.2*n.editor.shortestOutputSide;switch(e){case"linear":var o=n.editor.outputToWorld({x:-i/2,y:0}),a=n.editor.outputToWorld({x:i/2,y:0});n.setLinearFocus({start:o,end:a,blurRadius:t});break;case"radial":var s=n.editor.outputToWorld({x:0,y:0});n.setRadialFocus({center:s,radius:r,blurRadius:t});break;case"mirrored":var l=n.editor.outputToWorld({x:0,y:0}),u=r,c=n.editor.outputToWorld(Kc({x:0,y:0},0));n.setMirroredFocus({mirrorAxisOrigin:l,clearAreaWidth:u,blurRadius:t,mirrorAxisDirection:c});break;case"gaussian":n.setGaussianFocus({blurRadius:t})}n.focusStore.selectFocus(e,t),n.editor.render(),n.addSnapshot("add","focus")}},this.changeIntensity=function(e){var t=n.focusStore.setEffectProperties({blurRadius:e});t&&(n.focusStore.changeBlurRadius(n.identifier,t.blurRadius),n.editor.render())},this.changeRelativeIntensity=function(t){var i=(n.maxIntensity-e.minIntensity)*t/100+e.minIntensity,r=n.focusStore.setEffectProperties({blurRadius:i});r&&(n.focusStore.changeBlurRadius(n.identifier,r.blurRadius),n.editor.render())},this.toolSnapshot=function(e){n.addSnapshot("edit",e)},this.addSnapshot=function(e,t){n.editor.addSnapshot(void 0,e,t)},this.clickableCanvas=this.pureReset=function(){n.focusStore.removeFocus(),n.focusStore.reset()},this.reset=function(){n.pureReset(),n.editor.render(),n.addSnapshot("delete",n.locale.controls.buttonReset)},this.setStart=function(e){var t=n.focusStore.setEffectProperties({start:n.editor.previewToWorld(e)});t&&(n.focusStore.setLinearStart(n.editor.worldToPreview(t.start)),n.editor.render())},this.setEnd=function(e){var t=n.focusStore.setEffectProperties({end:n.editor.previewToWorld(e)});t&&(n.focusStore.setLinearEnd(n.editor.worldToPreview(t.end)),n.editor.render())},this.setCenter=function(e){var t=n.focusStore.setEffectProperties({center:n.editor.previewToWorld(e)});t&&(n.focusStore.setRadialCenter(n.editor.worldToPreview(t.center)),n.editor.render())},this.setRadius=function(e){var t=n.focusStore.setEffectProperties({radius:n.editor.previewToWorld(e)});t&&(n.focusStore.setRadialRadius(n.editor.worldToPreview(t.radius)),n.editor.render())},this.setOrigin=function(e){var t=n.focusStore.setEffectProperties({mirrorAxisOrigin:n.editor.previewToWorld(e),mirrorAxisDirection:n.editor.previewToWorld(Kc(e,n.rotation))});t&&(n.focusStore.setMirroredOrigin(n.editor.worldToPreview(t.mirrorAxisOrigin)),n.editor.render())},this.setSize=function(e){var t=n.focusStore.setEffectProperties({clearAreaWidth:n.editor.previewToWorld(e)});t&&(n.focusStore.setMirroredSize(n.editor.worldToPreview(t.clearAreaWidth)),n.editor.render())},this.setRotation=function(e){n.focusStore.setEffectProperties({mirrorAxisDirection:n.editor.previewToWorld(Kc(n.origin,e))}),n.focusStore.setMirroredRotation(e),n.editor.render()},this.updateStateFromHistory=function(e,t){n.focusStore.removeFocus();var i=t.magnitude;(0,Xr.m)((function(){switch(n.focusStore.selectFocus(e.identifier),e.identifier){case"linear":n.setLinearFocus({start:n.editor.previewToWorld(new Xr.Pa(e.linear.start).multiply(t)),end:n.editor.previewToWorld(new Xr.Pa(e.linear.end).multiply(t)),blurRadius:e.linear.blurRadius});break;case"gaussian":n.setGaussianFocus({blurRadius:e.gaussian.blurRadius});break;case"radial":n.setRadialFocus({center:n.editor.previewToWorld(new Xr.Pa(e.radial.center).multiply(t)),radius:n.editor.previewToWorld(e.radial.radius*i),blurRadius:e.radial.blurRadius});break;case"mirrored":var r=new Xr.Pa(e.mirrored.origin).multiply(t);n.setMirroredFocus({mirrorAxisOrigin:n.editor.previewToWorld(r),mirrorAxisDirection:n.editor.previewToWorld(Kc(r,e.mirrored.rotation)),clearAreaWidth:n.editor.previewToWorld(e.mirrored.size*i),blurRadius:e.mirrored.blurRadius});break;case"identity":n.pureReset()}}))},this.updateStateFromSerialization=function(){var t=(0,Zr.Z)(Yr().mark((function t(i){return Yr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.doesFocusIdentifierExist(i.identifier)){t.next=5;break}n.focusStore.removeFocus(),(0,Xr.m)((function(){switch(n.focusStore.selectFocus(i.identifier),i.identifier){case"linear":n.setLinearFocus(i.linear);break;case"gaussian":n.setGaussianFocus(i.gaussian);break;case"radial":n.setRadialFocus(i.radial);break;case"mirrored":n.setMirroredFocus({mirrorAxisOrigin:i.mirrored.origin,clearAreaWidth:i.mirrored.size,blurRadius:i.mirrored.blurRadius,mirrorAxisDirection:Kc(i.mirrored.origin,i.mirrored.rotation)})}})),t.next=6;break;case 5:throw new Xr.Ya(i.identifier);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.updateCanvasControls=this.getFocusStateForHistory=function(){var e=n.editor.canvasStore.sizeVector,t=n.focusStore.state.linear,i=n.focusStore.state.radial,r=n.focusStore.state.mirrored,o=e,a=o.magnitude;return(0,Ur.Z)((0,Ur.Z)({},n.focusStore.state),{},{linear:(0,Ur.Z)((0,Ur.Z)({},t),{},{start:new Xr.Pa(t.start).divide(o),end:new Xr.Pa(t.end).divide(o)}),radial:(0,Ur.Z)((0,Ur.Z)({},i),{},{center:new Xr.Pa(i.center).divide(o),radius:i.radius/a}),mirrored:(0,Ur.Z)((0,Ur.Z)({},r),{},{origin:new Xr.Pa(r.origin).divide(o),size:r.size/a}),gaussian:(0,Ur.Z)({},n.focusStore.state.gaussian)})},this.editor=t,this.focusStore=new $c(this.editor);var i=this.editor.assetProvider.getAssets("focus");this.entityManager=new Uc(i,(0,Ur.Z)((0,Ur.Z)({},this.config),{},{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")}))}return(0,jr.Z)(e,[{key:"state",get:function(){return this.focusStore.state}},{key:"serializableState",get:function(){switch(this.identifier){case"linear":return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case"radial":return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case"mirrored":var e=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:e.blurRadius,origin:e.mirrorAxisOrigin,rotation:(0,Xr.p)(this.state.mirrored.rotation),size:e.clearAreaWidth}};case"gaussian":return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return Qc}}},{key:"start",get:function(){return this.focusStore.state.linear.start}},{key:"startOnPreview",get:function(){var e=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(e.x),y:Math.abs(e.y)}}},{key:"end",get:function(){return this.focusStore.state.linear.end}},{key:"endOnPreview",get:function(){var e=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(e.x),y:Math.abs(e.y)}}},{key:"center",get:function(){return this.focusStore.state.radial.center}},{key:"radius",get:function(){return this.focusStore.state.radial.radius}},{key:"origin",get:function(){return this.focusStore.state.mirrored.origin}},{key:"rotation",get:function(){return this.focusStore.state.mirrored.rotation}},{key:"rotationOnPreview",get:function(){var e=this.editor.outputContainer.getData(),t=e.flipHorizontally,n=e.flipVertically;return(0,Xr.qb)({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:t,flipVertically:n})}},{key:"size",get:function(){return this.focusStore.state.mirrored.size}},{key:"mirroredAreaWidth",get:function(){var e=this.editor.canvasStore.canvasSize,t=e.width,n=e.height;return 2*Math.sqrt(Math.pow(t,2)+Math.pow(n,2))}},{key:"identifier",get:function(){return this.state.identifier}},{key:"intensity",get:function(){return"identity"===this.identifier?Qc.gaussian.blurRadius:this.state[this.identifier].blurRadius}},{key:"relativeIntensity",get:function(){return 100*(("identity"===this.identifier?this.state.gaussian:this.state[this.identifier]).blurRadius-e.minIntensity)/(this.maxIntensity-e.minIntensity)}},{key:"maxIntensity",get:,{key:"isOptionSelected",get:function(){return"identity"!==this.identifier}},{key:"config",get:function(){return this.editor.configStore.config.focus}},{key:"locale",get:function(){return this.editor.configStore.locale.focus}},{key:"items",get:function(){return this.entityManager.items}},{key:"setGaussianFocus",value:,{key:"setLinearFocus",value:function(e){var t=e.start,n=e.end,i=e.blurRadius;this.focusStore.setLinearFocus({start:t,end:n,blurRadius:i})}},{key:"setRadialFocus",value:function(e){var t=e.center,n=e.radius,i=e.blurRadius;this.focusStore.setRadialFocus({center:t,radius:n,blurRadius:i})}},{key:"setMirroredFocus",value:],[{key:"minIntensity",get:function(){return 0}},{key:"doesFocusIdentifierExist",value:function(e){return-1!==Object.keys(Xr.ea).map((function(e){return Xr.ea[e]})).findIndex(()}}]),e}(),th=eh;(0,Xr.c)([Xr.l],th.prototype,"selectFocus",2),(0,Xr.c)([Xr.l],th.prototype,"changeIntensity",2),(0,Xr.c)([Xr.l],th.prototype,"changeRelativeIntensity",2),(0,Xr.c)([Xr.l],th.prototype,"clickableCanvas",2),(0,Xr.c)([Xr.l],th.prototype,"pureReset",2),(0,Xr.c)([Xr.l],th.prototype,"reset",2),(0,Xr.c)([Xr.l],th.prototype,"setStart",2),(0,Xr.c)([Xr.l],th.prototype,"setEnd",2),(0,Xr.c)([Xr.l],th.prototype,"setCenter",2),(0,Xr.c)([Xr.l],th.prototype,"setRadius",2),(0,Xr.c)([Xr.l],th.prototype,"setOrigin",2),(0,Xr.c)([Xr.l],th.prototype,"setSize",2),(0,Xr.c)([Xr.l],th.prototype,"setRotation",2),(0,Xr.c)([Xr.l],th.prototype,"updateStateFromHistory",2),(0,Xr.c)([Xr.l],th.prototype,"updateStateFromSerialization",2),(0,Xr.c)([Xr.l],th.prototype,"updateCanvasControls",2),(0,Xr.c)([Xr.f],th.prototype,"state",1),(0,Xr.c)([Xr.f],th.prototype,"start",1),(0,Xr.c)([Xr.f],th.prototype,"startOnPreview",1),(0,Xr.c)([Xr.f],th.prototype,"end",1),(0,Xr.c)([Xr.f],th.prototype,"endOnPreview",1),(0,Xr.c)([Xr.f],th.prototype,"center",1),(0,Xr.c)([Xr.f],th.prototype,"radius",1),(0,Xr.c)([Xr.f],th.prototype,"origin",1),(0,Xr.c)([Xr.f],th.prototype,"rotation",1),(0,Xr.c)([Xr.f],th.prototype,"rotationOnPreview",1),(0,Xr.c)([Xr.f],th.prototype,"size",1),(0,Xr.c)([Xr.f],th.prototype,"mirroredAreaWidth",1),(0,Xr.c)([Xr.f],th.prototype,"identifier",1),(0,Xr.c)([Xr.f],th.prototype,"intensity",1),(0,Xr.c)([Xr.f],th.prototype,"relativeIntensity",1),(0,Xr.c)([Xr.f],th.prototype,"maxIntensity",1),(0,Xr.c)([Xr.f],th.prototype,"isOptionSelected",1),(0,Xr.c)([Xr.f],th.prototype,"config",1),(0,Xr.c)([Xr.f],th.prototype,"locale",1),(0,Xr.c)([Xr.f],th.prototype,"items",1);var nh={identifier:"identity",opacity:1,blendMode:"lighten"},ih=new Nc(0,1),rh=function(){function e(t,n){var i=this;(0,Hr.Z)(this,e),this.changeIdentifier=function(e){i.state.identifier=e},this.changeOpacity=function(e){var t=ih.clamp(e);i.state.opacity=t},this.changeBlendMode=function(e){i.state.blendMode=e},this.reset=function(){-1===i.indexInContainer&&(i.state.identifier=nh.identifier,i.state.opacity=nh.opacity,i.state.blendMode=nh.blendMode,i.removeIndex())},this.correctOverlayFlip=function(){var e=i.editor.outputContainer.getData(),t=e.flipHorizontally,n=e.flipVertically;i.effect&&(i.effect.setFlipHorizontally(t),i.effect.setFlipVertically(n))},this.removeOverlayEffect=function(){i.effect&&(i.engineMediator.engine.removeEffect(i.effect),i.removeIndex(),i.effect=void 0)},this.setEffectProperties=function(e){return i.effect?(i.effect.setProperties(e),i.effect.getProperties()):null},this.setOverlayEffect=function(e){var t=e.identifier,n=e.blendMode,r=e.opacity,o=(0,Ur.Z)({},i.state);i.removeOverlayEffect();var a=i.engineMediator.orderHelper.addIndex("overlay");return new Promise((function(e,s){i.engineMediator.engine.addOverlayFromAssets(t,i.engineMediator.image.container,a).then((function(o){i.changeIdentifier(t),i.changeOpacity(r),i.changeBlendMode(n),i.effect=o,i.effect.setProperties({blendMode:n,opacity:r}),i.correctOverlayFlip(),e()})).catch((function(e){i.changeIdentifier(o.identifier),i.changeOpacity(o.opacity),i.changeBlendMode(o.blendMode),"identity"===o.identifier&&i.removeIndex(),s(e)}))}))},this.removeIndex=this.engineMediator=t,this.editor=n,this.state=nh}return(0,jr.Z)(e,[{key:"indexInContainer",get:function(){return this.effect?this.effect.getIndexInParent():-1}}]),e}();(0,Xr.c)([Xr.e],rh.prototype,"state",2),(0,Xr.c)([Xr.l],rh.prototype,"changeIdentifier",2),(0,Xr.c)([Xr.l],rh.prototype,"changeOpacity",2),(0,Xr.c)([Xr.l],rh.prototype,"changeBlendMode",2),(0,Xr.c)([Xr.l],rh.prototype,"reset",2),(0,Xr.c)([Xr.l],rh.prototype,"correctOverlayFlip",2);var oh=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.selectOverlay=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===n.identifier){e.next=6;break}return i=n.defaultBlendModeForIdentifier(t),e.next=4,n.overlayStore.setOverlayEffect({identifier:t,opacity:1,blendMode:i});case 4:n.addSnapshot("add","overlay"),n.editor.render();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.changeOpacity=function(e){var t=n.overlayStore.setEffectProperties({opacity:e});t&&(n.overlayStore.changeOpacity(t.opacity),n.editor.render())},this.toolSnapshot=function(){n.addSnapshot("edit",n.locale.controls.sliderOpacity)},this.addSnapshot=function(e,t){n.editor.addSnapshot(void 0,e,t)},this.changeBlendMode=function(e){var t=n.overlayStore.setEffectProperties({blendMode:e});t&&(n.overlayStore.changeBlendMode(t.blendMode),n.addSnapshot("edit",n.locale.controls.carouselBlendMode),n.editor.render())},this.pureReset=function(){n.overlayStore.removeOverlayEffect(),n.overlayStore.reset()},this.reset=function(){n.pureReset(),n.addSnapshot("delete",n.locale.controls.buttonReset),n.editor.render()},this.updateStateFromSerialization=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.entityManager.items.find((function(e){return e.identifier===t.identifier})),!i){e.next=3;break}return e.abrupt("return",n.overlayStore.setOverlayEffect(t).then((function(){n.editor.transformToolStore.setOverlayOpacity(t.opacity)})));case 3:throw new Xr.Ya(t.identifier);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateStateFromHistory=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("identity"!==t.identifier){e.next=3;break}return n.pureReset(),e.abrupt("return",new Promise((function(e){e()})));case 3:return e.abrupt("return",n.overlayStore.setOverlayEffect(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.correctOverlayFlip=function(){n.overlayStore.correctOverlayFlip()},this.defaultBlendModeForIdentifier=function(e){var t=n.entityManager.items.findIndex((function(t){return t.identifier===e}));return-1!==t?n.entityManager.items[t].defaultBlendMode:"lighten"},this.editor=t,this.overlayStore=new rh(this.editor.engineMediator,t);var i=this.editor.assetProvider.getAssets("overlay"),r=this.config;this.entityManager=new Uc(i,(0,Ur.Z)((0,Ur.Z)({},r),{},{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")}))}return(0,jr.Z)(e,[{key:"state",get:function(){return this.overlayStore.state}},{key:"identifier",get:function(){return this.overlayStore.state.identifier}},{key:"opacity",get:function(){return this.overlayStore.state.opacity}},{key:"blendMode",get:function(){return this.overlayStore.state.blendMode}},{key:"isOptionSelected",get:function(){return"identity"!==this.identifier}},{key:"config",get:function(){return this.editor.configStore.config.overlay}},{key:"locale",get:function(){return this.editor.configStore.locale.overlay}},{key:"items",get:function(){return this.entityManager.items}},{key:"allBlendModes",get:function(){var e=this.locale.controls;return Object.keys(Xr.qa).map((function(t){var n=Xr.qa[t],i="blendMode".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));return{identifier:n,value:e[i]}}))}}]),e}();(0,Xr.c)([Xr.l],oh.prototype,"selectOverlay",2),(0,Xr.c)([Xr.l],oh.prototype,"changeOpacity",2),(0,Xr.c)([Xr.l],oh.prototype,"changeBlendMode",2),(0,Xr.c)([Xr.l],oh.prototype,"pureReset",2),(0,Xr.c)([Xr.l],oh.prototype,"reset",2),(0,Xr.c)([Xr.l],oh.prototype,"updateStateFromSerialization",2),(0,Xr.c)([Xr.l],oh.prototype,"updateStateFromHistory",2),(0,Xr.c)([Xr.l],oh.prototype,"correctOverlayFlip",2),(0,Xr.c)([Xr.f],oh.prototype,"state",1),(0,Xr.c)([Xr.f],oh.prototype,"identifier",1),(0,Xr.c)([Xr.f],oh.prototype,"opacity",1),(0,Xr.c)([Xr.f],oh.prototype,"blendMode",1),(0,Xr.c)([Xr.f],oh.prototype,"isOptionSelected",1),(0,Xr.c)([Xr.f],oh.prototype,"config",1),(0,Xr.c)([Xr.f],oh.prototype,"locale",1),(0,Xr.c)([Xr.f],oh.prototype,"items",1),(0,Xr.c)([Xr.f],oh.prototype,"allBlendModes",1);var ah={identifier:"identity",opacity:1,tintColor:zc.white,tintMode:"none",resizeMode:"keepAspect"},sh={},lh=function(){return Object.keys(zc).map((function(e){var t=zc[e];return{identifier:e,color:t,colorString:Zc(t)}}))};function uh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,i){var r=new Image;r.addEventListener("load",(function(){var e=document.createElement("canvas"),i=e.getContext("2d");e.width=r.width,e.height=r.height,t&&(e.width=t,e.height=t*r.height/r.width),i.drawImage(r,0,0,e.width,e.height);var o=e.toDataURL("image/png");(0,Xr.r)(e),n(o)})),r.addEventListener("error",(),r.src=e}))}var ch=function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){var i=(0,Zr.Z)(Yr().mark((function i(r){var o,a;return Yr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,o=r.target.result,i.next=4,uh(o,150);case 4:a=i.sent,t({stickerURI:o,thumbnailURI:a,name:e.name||"",type:e.type,identifier:(0,Xr.Na)()}),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),n(i.t0);case 11:case"end":return i.stop()}}),i,null,[[0,8]])})));return function(e){return i.apply(this,arguments)}}(),i.onerror=function(e){n(e)},i.readAsDataURL(e)}))},hh="identity",dh="imgly_sticker_custom",fh=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.state=Xr.e.map(sh),this.customStickers=[],this.colorList=lh(),this.selectLast=function(){n.editor.spriteStore.selectHighestOrderSprite(Array.from(n.state.keys()))},this.doesStickerAssetExist=function(e){return-1!==n.entityManager.items.findIndex((function(t){return t.identifier===e}))},this.add=function(e){var t=n.entityManager.items.find((function(t){return t.identifier===e})),i=t?t.tintMode:ah.tintMode,r=t?t.resizeMode:ah.resizeMode;n.editor.spriteStore.addSticker({state:{identifier:e,tintMode:i,tintColor:ah.tintColor,opacity:ah.opacity,resizeMode:r}})},this.duplicate=function(){if(n.id){var e=n.editor.spriteStore.getDuplicateContainerTransform(n.id),t=n.editor.spriteStore.getDuplicateContainerFlip(n.id),i=n.editor.outputContainer.getData(),r=i.flipHorizontally,o=i.flipVertically;n.editor.spriteStore.addSticker({state:{identifier:n.identifier,tintColor:(0,Xr.p)(n.tintColor),tintMode:n.tintMode,resizeMode:n.resizeMode,opacity:n.opacity,flipHorizontally:r!==t.flipHorizontally,flipVertically:o!==t.flipVertically},transform:e})}},this.bringToFront=function(){n.id&&n.editor.spriteStore.bringToFront(n.id)},this.flipHorizontally=function(){n.id&&n.editor.spriteStore.flipHorizontally(n.id)},this.delete=function(){if(n.id){var e=n.id;n.editor.spriteStore.removeSprite(e),n.state.delete(e),n.selectLast()}},this.updateStateFromHistory=function(e,t){(0,Xr.Va.default)(t,n.state.get(e))||(n.setState(e,t),n.editor.spriteStore.setContainerProperties(e,t))},this.setState=function(e,t){var i=n.state.get(e);i?("opacity"in t&&(i.opacity=t.opacity),t.tintColor&&(i.tintColor=t.tintColor),t.tintMode&&(i.tintMode=t.tintMode),t.resizeMode&&(i.resizeMode=t.resizeMode),n.state.set(e,i)):n.state.set(e,{identifier:t.identifier,opacity:t.opacity,tintMode:t.tintMode,resizeMode:t.resizeMode,tintColor:t.tintColor?t.tintColor:ah.tintColor})},this.changeOpacity=function(e){if(n.id){var t=n.state.get(n.id);if(t){n.editor.spriteStore.setContainerProperties(n.id,{opacity:e});var i=n.editor.spriteStore.getContainerProperties(n.id);t.opacity=i.opacity,n.state.set(n.id,t)}}},this.changeTintColor=function(e){if(n.id){var t=n.state.get(n.id);if(t){var i=n.entityManager.items.find((function(e){return e.identifier===n.identifier})).tintMode;n.editor.spriteStore.setContainerProperties(n.id,{tintColor:e,tintMode:i});var r=n.editor.spriteStore.getContainerProperties(n.id);t.tintColor=r.tintColor,t.tintMode=r.tintMode||ah.tintMode,n.state.set(n.id,t)}}},this.tintColorSnapshot=function(){n.addSnapshot("edit",n.locale.history.color)},this.addFiles=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i,r,o;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.editor.modalStore.showInfoModal("loading"),!t.length){e.next=17;break}for(i=0,r=[],i=0;i<t.length;i+=1)r.push(ch(t[i]));return e.prev=5,e.next=8,Promise.all(r);case 8:o=e.sent,n.addCustomStickerAsset(o),n.editor.configStore.events.onStickerUploadedAdd(o.map(()),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),n.editor.modalStore.hideModal(),n.editor.modalStore.showInfoModal("stickerLoading");case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),this.addCustomStickerAsset=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i,r,o,a;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],t.forEach((function(e){var t=e.stickerURI,r=e.thumbnailURI,o=e.name,a=e.identifier,s=e.type;i.push({stickerURI:t,thumbnailURI:r,name:o,tintMode:n.customStickerTintMode,resizeMode:n.customStickerResizeMode,identifier:a}),n.customStickers.push({identifier:a,type:s,stickerURI:t,name:o})})),r=n.locale.categories[dh],n.editor.assetProvider.addCustomStickerAsset(i,dh,r),o=n.editor.assetProvider.getAssets("sticker"),a=n.config,n.entityManager=new Uc(o,(0,Ur.Z)((0,Ur.Z)({},a),{},{itemFallbackKey:"stickerURI",locale:n.locale.items,getAssetPath:n.editor.getAssetPath("sticker")})),n.selectedCategory=dh,n.editor.modalStore.hideModal();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.toolSnapshot=function(){n.addSnapshot("edit",n.locale.history.opacity)},this.addSnapshot=function(e,t){var i=n.editor.historyStore.getCurrentSpritesState();(null==i?void 0:i.sticker)&&(0,Xr.Va.default)(i.sticker,(0,Xr.p)(n.state))||n.currentSticker&&n.editor.spriteStore.addSnapshot(e,t)},this.toggleCategorySelection=function(e){n.selectedCategory=n.selectedCategory===e?hh:e},this.pureReset=function(){n.state=Xr.e.map(sh)},this.dispose=function(){n.state=null,n.selectedCategory=null,n.editor=null,n.entityManager=null},this.editor=t,this.selectedCategory=hh;var i=this.config,r=this.editor.assetProvider.getAssets("sticker");this.entityManager=new Uc(r,(0,Ur.Z)((0,Ur.Z)({},i),{},{itemFallbackKey:"stickerURI",locale:(0,Ur.Z)((0,Ur.Z)({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("sticker")})),ah.tintColor=(0,Xr.p)((0,Xr.Ua)(this.config,"defaultTintColor",ah.tintColor)),this.config.colors&&this.config.colors.length>0&&(this.colorList=Mc((0,Xr.p)(this.config.colors)))}return(0,jr.Z)(e,[{key:"isStickerSelected",get:function(){return this.editor.spriteStore.isSpriteSticker}},{key:"isCustomStickerEnabled",get:function(){return this.config.enableCustomUpload}},{key:"customStickerTintMode",get:function(){return this.config.customStickerTintMode}},{key:"customStickerResizeMode",get:function(){return this.config.customStickerResizeMode}},{key:"currentSticker",get:function(){if(this.isStickerSelected){var e=this.state.get(this.id);if(e)return e}}},{key:"identifier",get:function(){if(this.isStickerSelected){var e=this.state.get(this.id);if(e)return e.identifier}return"none"}},{key:"id",get:function(){if(this.isStickerSelected)return this.editor.spriteStore.id}},{key:"opacity",get:function(){return this.currentSticker?this.currentSticker.opacity:ah.opacity}},{key:"tintMode",get:function(){return this.currentSticker?this.currentSticker.tintMode:ah.tintMode}},{key:"resizeMode",get:function(){return this.currentSticker?this.currentSticker.resizeMode:ah.resizeMode}},{key:"tintable",get:function(){return!!this.currentSticker&&("solid"===this.currentSticker.tintMode||"colorized"===this.currentSticker.tintMode)}},{key:"tintColor",get:function(){return this.currentSticker?this.currentSticker.tintColor:ah.tintColor}},{key:"config",get:function(){return this.editor.configStore.config.sticker}},{key:"locale",get:function(){return this.editor.configStore.locale.sticker}},{key:"localeColor",get:function(){return this.editor.configStore.locale.common.color}},{key:"selectedCategoryIdentifier",get:function(){return this.selectedCategory}},{key:"items",get:function(){return this.entityManager.items}},{key:"categories",get:function(){return this.entityManager.categories}}]),e}();(0,Xr.c)([Xr.e],fh.prototype,"selectedCategory",2),(0,Xr.c)([Xr.e],fh.prototype,"entityManager",2),(0,Xr.c)([Xr.l],fh.prototype,"selectLast",2),(0,Xr.c)([Xr.l],fh.prototype,"add",2),(0,Xr.c)([Xr.l],fh.prototype,"duplicate",2),(0,Xr.c)([Xr.l],fh.prototype,"bringToFront",2),(0,Xr.c)([Xr.l],fh.prototype,"flipHorizontally",2),(0,Xr.c)([Xr.l],fh.prototype,"delete",2),(0,Xr.c)([Xr.l],fh.prototype,"updateStateFromHistory",2),(0,Xr.c)([Xr.l],fh.prototype,"setState",2),(0,Xr.c)([Xr.l],fh.prototype,"changeOpacity",2),(0,Xr.c)([Xr.l],fh.prototype,"changeTintColor",2),(0,Xr.c)([Xr.l],fh.prototype,"addFiles",2),(0,Xr.c)([Xr.l],fh.prototype,"addCustomStickerAsset",2),(0,Xr.c)([Xr.l],fh.prototype,"toggleCategorySelection",2),(0,Xr.c)([Xr.l],fh.prototype,"pureReset",2),(0,Xr.c)([Xr.l],fh.prototype,"dispose",2),(0,Xr.c)([Xr.f],fh.prototype,"isStickerSelected",1),(0,Xr.c)([Xr.f],fh.prototype,"isCustomStickerEnabled",1),(0,Xr.c)([Xr.f],fh.prototype,"customStickerTintMode",1),(0,Xr.c)([Xr.f],fh.prototype,"customStickerResizeMode",1),(0,Xr.c)([Xr.f],fh.prototype,"currentSticker",1),(0,Xr.c)([Xr.f],fh.prototype,"identifier",1),(0,Xr.c)([Xr.f],fh.prototype,"id",1),(0,Xr.c)([Xr.f],fh.prototype,"opacity",1),(0,Xr.c)([Xr.f],fh.prototype,"tintMode",1),(0,Xr.c)([Xr.f],fh.prototype,"resizeMode",1),(0,Xr.c)([Xr.f],fh.prototype,"tintable",1),(0,Xr.c)([Xr.f],fh.prototype,"tintColor",1),(0,Xr.c)([Xr.f],fh.prototype,"config",1),(0,Xr.c)([Xr.f],fh.prototype,"locale",1),(0,Xr.c)([Xr.f],fh.prototype,"localeColor",1),(0,Xr.c)([Xr.f],fh.prototype,"selectedCategoryIdentifier",1),(0,Xr.c)([Xr.f],fh.prototype,"items",1),(0,Xr.c)([Xr.f],fh.prototype,"categories",1);var ph={text:"Write Something",identifier:"imgly_font_open_sans_bold",fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:zc.white,backgroundColor:zc.transparent||[0,0,0,0],width:0},gh={},mh={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"},yh=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.state=Xr.e.map(gh),this.colorList=lh(),this.backgroundColorList=Object.keys(Bc).map((function(e){var t=Bc[e];return{identifier:e,color:t,colorString:Zc(t)}})),this.fontsLoadStatus=Xr.e.object({pending:!1,loaded:!1}),this.doesTextAssetExist=function(e){return-1!==n.editor.assetProvider.getFontAssets().findIndex((function(t){return t.identifier===e}))},this.validFontWithConfig=function(e){return n.fonts.find((function(t){return t.identifier===e}))||n.fonts[0]},this.addOrselect=function(){n.state.size?(n.selectLast(),n.loadFonts()):n.add()},this.selectLast=function(){n.editor.spriteStore.selectHighestOrderSprite(Array.from(n.state.keys()))},this.add=(0,Zr.Z)(Yr().mark((function e(){var t,i,r;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.fontsLoadStatus,i=function(){n.editor.spriteStore.addText({state:{identifier:ph.identifier,text:ph.text,textColor:ph.textColor,backgroundColor:ph.backgroundColor,lineHeight:ph.lineHeight,alignment:ph.alignment,fontSize:0}})},t.pending||t.loaded){e.next=18;break}return n.fontsLoadStatus.pending=!0,r=n.editor.assetProvider.getFontManager(),e.prev=5,e.next=8,r.loadFontsWithIdentifiers([ph.identifier]);case 8:i(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),n.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:ph.identifier});case 14:return e.next=16,n.loadFonts();case 16:e.next=19;break;case 18:i();case 19:case"end":return e.stop()}}),e,null,[[5,11]])}))),this.duplicate=function(){if(n.id){var e=n.editor.spriteStore.getDuplicateContainerTransform(n.id);n.editor.spriteStore.addText({state:{identifier:n.identifier,text:n.text,textColor:(0,Xr.p)(n.textColor),lineHeight:n.lineHeight,alignment:n.alignment,fontSize:n.fontSize,backgroundColor:(0,Xr.p)(n.backgroundColor),width:n.width},transform:e})}},this.bringToFront=function(){n.id&&n.editor.spriteStore.bringToFront(n.id)},this.delete=function(){if(n.id){var e=n.id;n.editor.spriteStore.removeSprite(e),n.state.delete(e),n.selectLast()}},this.setEditMode=function(e){n.editor.spriteStore.setEditMode(e)},this.changeFont=function(e){var t=n.fonts.find((function(t){return t.identifier===e}));n.changeIdentifier(t,n.id),n.id&&n.addSnapshot("edit",n.locale.history.fontFamily)},this.changeIdentifier=function(e,t){(0,Xr.m)((function(){if(e&&t){var i=n.state.get(t);if(i){n.editor.spriteStore.setContainerProperties(t,{fontIdentifier:e.identifier},!0);var r=n.editor.spriteStore.getContainerProperties(t);i.identifier=r.fontIdentifier,i.fontFamily=e.fontFamily,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.fontSize=r.fontSize,i.width=r.width,i.defaultFontSize=i.fontSize,n.state.set(t,i)}}}))},this.changeFontSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.id){var i=n.state.get(n.id);i&&(i.fontSize=e,t&&(i.defaultFontSize=e),n.state.set(n.id,i))}},this.updateDefaultFontSize=function(){if(n.id){var e=n.state.get(n.id);e&&(e.defaultFontSize=e.fontSize,n.state.set(n.id,e))}},this.changeSize=function(e,t){var i=n.state.get(e);i&&(i.width=t.width,i.fontSize=t.fontSize,i.defaultFontSize=t.fontSize,n.state.set(e,i))},this.changeWidth=function(e){if(n.id){var t=n.state.get(n.id);t&&(t.width=e,n.state.set(n.id,t))}},this.changeText=function(e){if(n.id){var t=n.state.get(n.id);if(t){n.editor.spriteStore.setContainerProperties(n.id,{text:e},!0);var i=n.editor.spriteStore.getContainerProperties(n.id),r=n.editor.outputContainer.getSizeInOutputSpace(),o=n.editor.spriteStore.getSize(n.id);n.config.disableAutoScaling||o.height>r.height&&n.editor.spriteStore.setContainerProperties(n.id,{fontSize:n.calculateFitFontSize(n.id,r.height)},!0),i=n.editor.spriteStore.getContainerProperties(n.id),t.text=i.text,t.fontSize=i.fontSize,t.defaultFontSize=i.fontSize,n.state.set(n.id,t),n.addSnapshot("edit",n.locale.history.edit)}}},this.calculateFitFontSize=function(t,i){if(!e.measureContext){var r=document.createElement("canvas");e.measureContext=r.getContext("2d")}for(var o=n.editor.spriteStore.getContainerProperties(t),a=n.editor.engine.assetProvider.getFontManager().getFontWithId(o.fontIdentifier),s=n.config.minFontSizeForAutoScaling,l=(0,Xr.rb)(e.measureContext,o.text,a,o.fontSize,o.lineHeight,o.width,a.textMetrics),u=Math.min(Math.floor(o.fontSize*(i/l.height)),1),c=Math.round(o.fontSize),h=0,d=c-u,f=Math.floor(2*(c-u)),p=d;h<=f;){d=h+Math.floor((f-h)/2);var g=(0,Xr.rb)(e.measureContext,o.text,a,d,o.lineHeight,o.width,a.textMetrics);if(i<g.height)f=d-1,p=d-1;else{if(!(i>g.height)){p=d;break}if(h=d+1,u+d>=c)return c}}return s&&p<s?s:p},this.changeLineHeight=function(e){if(n.id){var t=n.state.get(n.id);if(t&&e){n.editor.spriteStore.setContainerProperties(n.id,{lineHeight:e},!0);var i=n.editor.spriteStore.getContainerProperties(n.id);t.lineHeight=i.lineHeight,n.state.set(n.id,t)}}},this.changeColor=function(e){if(n.id){var t=n.state.get(n.id);if(t){n.editor.spriteStore.setContainerProperties(n.id,{textColor:e});var i=n.editor.spriteStore.getContainerProperties(n.id);t.textColor=i.textColor,n.state.set(n.id,t)}}},this.changeBackgroundColor=function(e){if(n.id){var t=n.state.get(n.id);if(t){n.editor.spriteStore.setContainerProperties(n.id,{backgroundColor:e});var i=n.editor.spriteStore.getContainerProperties(n.id);t.backgroundColor=i.backgroundColor,n.state.set(n.id,t)}}},this.colorSnapshot=function(){n.addSnapshot("edit",n.locale.history.textColor)},this.backgroundColorSnapshot=function(){n.addSnapshot("edit",n.locale.history.backgroundColor)},this.changeAlignment=function(e){if(n.id){var t=n.state.get(n.id);if(t){n.editor.spriteStore.setContainerProperties(n.id,{alignment:e});var i=n.editor.spriteStore.getContainerProperties(n.id);t.alignment=i.alignment,n.state.set(n.id,t),n.addSnapshot("edit",n.locale.history.alignment)}}},this.toolSnapshot=function(){n.addSnapshot("edit",n.locale.history.lineSpacing)},this.addSnapshot=function(e,t){var i=n.editor.historyStore.getCurrentSpritesState();(null==i?void 0:i.text)&&(0,Xr.Va.default)(i.text,(0,Xr.p)(n.state))||n.currentText&&n.editor.spriteStore.addSnapshot(e,t)},this.updateStateFromHistory=function(e,t){(0,Xr.Va.default)(t,n.state.get(e))||(n.setState(e,t),n.editor.spriteStore.setContainerProperties(e,t))},this.setState=function(e,t){var i=n.state.get(e);if(i)t.alignment&&(i.alignment=t.alignment),t.text&&(i.text=t.text),t.lineHeight&&(i.lineHeight=t.lineHeight),t.textColor&&(i.textColor=t.textColor),t.backgroundColor&&(i.backgroundColor=t.backgroundColor),t.fontIdentifier&&(i.identifier=t.fontIdentifier),t.fontSize&&(i.fontSize=t.fontSize,i.defaultFontSize=t.fontSize),t.width&&(i.width=t.width);else{var r=n.validFontWithConfig(t.fontIdentifier);r&&n.state.set(e,{text:t.text,identifier:r.identifier,alignment:t.alignment,textColor:t.textColor?t.textColor:ph.textColor,backgroundColor:t.backgroundColor?t.backgroundColor:ph.backgroundColor,fontFamily:r.fontFamily,fontStyle:r.fontStyle,fontSize:t.fontSize,fontWeight:r.fontWeight,lineHeight:t.lineHeight,width:t.width,defaultFontSize:t.fontSize})}},this.setFontSize=function(e){if(n.id){var t=n.state.get(n.id);if(t){n.editor.spriteStore.setContainerProperties(n.id,{fontSize:e},!0);var i=n.editor.spriteStore.getContainerProperties(n.id);t.fontSize=i.fontSize,t.defaultFontSize=i.fontSize,n.state.set(n.id,t)}}},this.pureReset=function(){n.state=Xr.e.map(gh)},this.dispose=this.editor=t,this.fonts.find((function(e){return e.identifier===ph.identifier}))||(ph.identifier=this.fonts[0].identifier),ph.textColor=(0,Xr.p)((0,Xr.Ua)(this.config,"defaultColor",ph.textColor)),ph.backgroundColor=(0,Xr.p)((0,Xr.Ua)(this.config,"defaultBackgroundColor",ph.backgroundColor)),ph.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=Mc((0,Xr.p)(this.config.colors))),this.config.backgroundColors&&this.config.backgroundColors.length>0&&(this.backgroundColorList=Mc((0,Xr.p)(this.config.backgroundColors)))}return(0,jr.Z)(e,[{key:"loadFonts",value:function(){var e=(0,Zr.Z)(Yr().mark((function e(){var t,n,i,r;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.fontsLoadStatus).loaded){e.next=3;break}return e.abrupt("return");case 3:return n=this.editor.assetProvider.getFontManager(),i=this.editor.assetProvider.getFontAssetsForText().map((function(e){return e.identifier})),e.prev=5,e.next=8,n.loadFontsWithIdentifiers(i);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),r=i.filter((function(e){return!n.isFontLoaded(e)})).join(", "),this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:r});case 14:t.loaded=!0;case 15:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"isEditMode",get:function(){return this.editor.spriteStore.isEditMode}},{key:"isTextSelected",get:function(){return this.editor.spriteStore.isSpriteText}},{key:"fontsLoaded",get:function(){return this.fontsLoadStatus.loaded}},{key:"currentText",get:function(){if(this.isTextSelected){var e=this.state.get(this.id);if(e)return e}}},{key:"text",get:function(){return this.currentText?this.currentText.text:ph.text}},{key:"fontSize",get:function(){return this.currentText?this.currentText.fontSize:ph.fontSize}},{key:"defaultFontSize",get:function(){return this.currentText?this.currentText.defaultFontSize:ph.defaultFontSize}},{key:"width",get:function(){return this.currentText?this.currentText.width:ph.width}},{key:"fontFamily",get:function(){return this.currentText?this.currentText.fontFamily:ph.fontFamily}},{key:"fontStyle",get:function(){return this.currentText?this.currentText.fontStyle:ph.fontStyle}},{key:"fontWeight",get:function(){return this.currentText?this.currentText.fontWeight:ph.fontWeight}},{key:"lineHeight",get:function(){return this.currentText?this.currentText.lineHeight:ph.lineHeight}},{key:"identifier",get:function(){return this.currentText?this.currentText.identifier:ph.identifier}},{key:"id",get:function(){if(this.isTextSelected)return this.editor.spriteStore.id}},{key:"alignment",get:function(){return this.currentText?this.currentText.alignment:ph.alignment}},{key:"textColor",get:function(){return this.currentText?this.currentText.textColor:ph.textColor}},{key:"backgroundColor",get:function(){return this.currentText?this.currentText.backgroundColor:ph.backgroundColor}},{key:"config",get:function(){return this.editor.configStore.config.text}},{key:"locale",get:function(){return this.editor.configStore.locale.text}},{key:"localeColor",get:function(){return this.editor.configStore.locale.common.color}},{key:"rawOptions",get:,{key:"fonts",get:function(){var e=this;return this.rawOptions.reduce((function(t,n){return e.rawOptions.find((function(e){return e.identifier===n.identifier}))?[].concat((0,Mr.Z)(t),[{identifier:n.identifier,fontFamily:n.fontFamily,fontStyle:n.fontStyle||"",fontWeight:n.fontWeight||""}]):t}),[])}},{key:"fontFamilies",get:function(){return(0,Mr.Z)(new Set(this.fonts))}}],[{key:"defaultText",value:function(){return ph.text}},{key:"getDisplayFontStyle",value:function(e){var t=e.fontWeight&&"regular"!==mh[e.fontWeight].toLowerCase()?mh[e.fontWeight]:"",n=e.fontStyle&&"normal"!==e.fontStyle.toLowerCase()?e.fontStyle:"";return"".concat(e.fontFamily.toLowerCase().includes(t.toLowerCase())?"":t," ").concat(n).trim()}}]),e}(),vh=yh;(0,Xr.c)([Xr.l],vh.prototype,"addOrselect",2),(0,Xr.c)([Xr.l],vh.prototype,"selectLast",2),(0,Xr.c)([Xr.l],vh.prototype,"add",2),(0,Xr.c)([Xr.l],vh.prototype,"duplicate",2),(0,Xr.c)([Xr.l],vh.prototype,"bringToFront",2),(0,Xr.c)([Xr.l],vh.prototype,"delete",2),(0,Xr.c)([Xr.l],vh.prototype,"setEditMode",2),(0,Xr.c)([Xr.l],vh.prototype,"changeFont",2),(0,Xr.c)([Xr.l],vh.prototype,"changeIdentifier",2),(0,Xr.c)([Xr.l],vh.prototype,"changeFontSize",2),(0,Xr.c)([Xr.l],vh.prototype,"updateDefaultFontSize",2),(0,Xr.c)([Xr.l],vh.prototype,"changeSize",2),(0,Xr.c)([Xr.l],vh.prototype,"changeWidth",2),(0,Xr.c)([Xr.l],vh.prototype,"changeText",2),(0,Xr.c)([Xr.l],vh.prototype,"changeLineHeight",2),(0,Xr.c)([Xr.l],vh.prototype,"changeColor",2),(0,Xr.c)([Xr.l],vh.prototype,"changeBackgroundColor",2),(0,Xr.c)([Xr.l],vh.prototype,"changeAlignment",2),(0,Xr.c)([Xr.l],vh.prototype,"updateStateFromHistory",2),(0,Xr.c)([Xr.l],vh.prototype,"setState",2),(0,Xr.c)([Xr.l],vh.prototype,"setFontSize",2),(0,Xr.c)([Xr.l],vh.prototype,"pureReset",2),(0,Xr.c)([Xr.l],vh.prototype,"dispose",2),(0,Xr.c)([Xr.f],vh.prototype,"isEditMode",1),(0,Xr.c)([Xr.f],vh.prototype,"isTextSelected",1),(0,Xr.c)([Xr.f],vh.prototype,"fontsLoaded",1),(0,Xr.c)([Xr.f],vh.prototype,"currentText",1),(0,Xr.c)([Xr.f],vh.prototype,"text",1),(0,Xr.c)([Xr.f],vh.prototype,"fontSize",1),(0,Xr.c)([Xr.f],vh.prototype,"defaultFontSize",1),(0,Xr.c)([Xr.f],vh.prototype,"width",1),(0,Xr.c)([Xr.f],vh.prototype,"fontFamily",1),(0,Xr.c)([Xr.f],vh.prototype,"fontStyle",1),(0,Xr.c)([Xr.f],vh.prototype,"fontWeight",1),(0,Xr.c)([Xr.f],vh.prototype,"lineHeight",1),(0,Xr.c)([Xr.f],vh.prototype,"identifier",1),(0,Xr.c)([Xr.f],vh.prototype,"id",1),(0,Xr.c)([Xr.f],vh.prototype,"alignment",1),(0,Xr.c)([Xr.f],vh.prototype,"textColor",1),(0,Xr.c)([Xr.f],vh.prototype,"backgroundColor",1),(0,Xr.c)([Xr.f],vh.prototype,"config",1),(0,Xr.c)([Xr.f],vh.prototype,"locale",1),(0,Xr.c)([Xr.f],vh.prototype,"localeColor",1),(0,Xr.c)([Xr.f],vh.prototype,"rawOptions",1),(0,Xr.c)([Xr.f],vh.prototype,"fonts",1),(0,Xr.c)([Xr.f],vh.prototype,"fontFamilies",1);var _h={identifier:"imgly_text_design_blocks",color:zc.white,isInverted:!1,text:"Write Something With Style",seed:0,padding:0,width:0},bh={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831},xh={},kh=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.state=Xr.e.map(xh),this.colorList=lh(),this.fontsLoaded=!1,this.doesTextDesignAssetExist=function(e){return-1!==n.entityManager.items.findIndex(()},this.addOrselect=(0,Zr.Z)(Yr().mark((function e(){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.loadFonts();case 2:n.state.size?n.selectLast():n.add();case 3:case"end":return e.stop()}}),e)}))),this.selectLast=function(){n.editor.spriteStore.selectHighestOrderSprite(Array.from(n.state.keys()))},this.add=function(){n.editor.spriteStore.addTextDesign({state:{identifier:_h.identifier,text:_h.text,color:_h.color,isInverted:_h.isInverted,seed:bh[_h.identifier]||_h.seed,padding:0}})},this.updateStateFromHistory=function(e,t){if(!(0,Xr.Va.default)(t,n.state.get(e))){var i=n.state.get(e);t.identifier===i.identifier?(n.setState(e,t),n.editor.spriteStore.setContainerProperties(e,t)):n.changeIdentifier(t.identifier,!1,t.seed,e)}},this.setState=function(e,t){var i=n.state.get(e);i?(t.inverted&&(i.isInverted=t.inverted),t.seed&&(i.seed=t.seed),t.color&&(i.color=t.color),t.padding&&(i.padding=t.padding),t.width&&(i.width=t.width)):n.state.set(e,{width:t.width,text:t.text,isInverted:t.inverted,identifier:t.identifier,seed:t.seed,color:t.color?t.color:_h.color,padding:t.padding})},this.changeText=function(e){if(n.id){var t=n.state.get(n.id);if(t){n.editor.spriteStore.setContainerProperties(n.id,{text:e},!0);var i=n.editor.spriteStore.getContainerProperties(n.id);t.text=i.text,n.state.set(n.id,t),n.addSnapshot("edit",n.locale.history.edit)}}},this.setEditMode=this.duplicate=function(){if(n.id){var e=n.editor.spriteStore.getDuplicateContainerTransform(n.id);n.editor.spriteStore.addTextDesign({state:{identifier:n.identifier,text:n.text,color:(0,Xr.p)(n.color),isInverted:n.isInverted,seed:n.seed,padding:n.padding,width:n.width},transform:e})}},this.bringToFront=this.addSnapshot=function(e,t){var i=n.editor.historyStore.getCurrentSpritesState();(null==i?void 0:i.textdesign)&&(0,Xr.Va.default)(i.textdesign,(0,Xr.p)(n.state))||n.currentTextDesign&&n.editor.spriteStore.addSnapshot(e,t)},this.delete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.id;e&&(n.editor.spriteStore.removeSprite(e),n.state.delete(e),n.selectLast())},this.changeSeed=function(){if(n.id){var e=n.state.get(n.id);if(e){n.editor.spriteStore.setContainerProperties(n.id,{seed:-1},!0);var t=n.editor.spriteStore.getContainerProperties(n.id);e.seed=t.seed,n.state.set(n.id,e),n.addSnapshot("edit",n.locale.history.shuffle)}}},this.changeIdentifier=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.id;if(r&&e!==n.identifier){var o=n.state.get(r),a=n.editor.spriteStore.getContainerTransform(r);n.editor.spriteStore.addTextDesign({spriteId:r,state:{identifier:e,text:o.text,color:(0,Xr.p)(o.color),isInverted:o.isInverted,seed:i||bh[e]||o.seed,padding:o.padding,width:o.width},transform:a},t,!0)}},this.changeColor=function(e){if(n.id){var t=n.state.get(n.id);if(t){n.editor.spriteStore.setContainerProperties(n.id,{color:e});var i=n.editor.spriteStore.getContainerProperties(n.id);t.color=i.color,n.state.set(n.id,t)}}},this.colorSnapshot=function(){n.addSnapshot("edit",n.locale.history.color)},this.invertBackground=function(){if(n.id){var e=n.state.get(n.id);if(e){n.editor.spriteStore.setContainerProperties(n.id,{inverted:!e.isInverted},!0);var t=n.editor.spriteStore.getContainerProperties(n.id);e.isInverted=t.inverted,n.state.set(n.id,e),n.addSnapshot("edit",n.locale.history.invert)}}},this.changeWidth=function(e){if(n.id){var t=n.state.get(n.id);t&&(t.width=e,n.state.set(n.id,t))}},this.changePadding=function(e){if(n.id){var t=n.state.get(n.id);t&&(t.padding=e,n.state.set(n.id,t))}},this.pureReset=this.dispose=this.editor=t;var i=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new Uc(i,(0,Ur.Z)((0,Ur.Z)({},this.config),{},{flattenCategories:!0,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")})),this.entityManager.items.find((function(e){return e.identifier===_h.identifier}))||(_h.identifier=this.entityManager.items[0].identifier),_h.text=this.locale.canvasControls.placeholderText,_h.color=(0,Xr.p)((0,Xr.Ua)(this.config,"defaultColor",_h.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=Mc((0,Xr.p)(this.config.colors)))}return(0,jr.Z)(e,[{key:"loadFonts",value:function(){var e=(0,Zr.Z)(Yr().mark((function e(){var t,n,i;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.fontsLoaded){e.next=2;break}return e.abrupt("return");case 2:return t=this.editor.assetProvider.getFontManager(),n=this.editor.assetProvider.getFontAssetsForTextDesign().map((function(e){return e.identifier})),e.prev=4,e.next=7,t.loadFontsWithIdentifiers(n);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),i=n.filter(().join(", "),this.editor.modalStore.showActionModal({type:"error",identifier:"fontLoading",error:i});case 13:this.fontsLoaded=!0;case 14:case"end":return e.stop()}}),e,this,[[4,9]])})));return ()},{key:"isTextDesignSelected",get:function(){return this.editor.spriteStore.isSpriteTextDesign}},{key:"isEditMode",get:function(){return this.editor.spriteStore.isEditMode}},{key:"currentTextDesign",get:function(){if(this.isTextDesignSelected&&this.id){var e=this.state.get(this.id);if(e)return e}}},{key:"id",get:,{key:"text",get:function(){return this.currentTextDesign?this.currentTextDesign.text:_h.text}},{key:"seed",get:function(){return this.currentTextDesign?this.currentTextDesign.seed:_h.seed}},{key:"padding",get:function(){return this.currentTextDesign?this.currentTextDesign.padding:_h.padding}},{key:"width",get:function(){return this.currentTextDesign?this.currentTextDesign.width:_h.width}},{key:"identifier",get:,{key:"isInverted",get:function(){return this.currentTextDesign?this.currentTextDesign.isInverted:_h.isInverted}},{key:"color",get:,{key:"config",get:function(){return this.editor.configStore.config.textdesign}},{key:"locale",get:function(){return this.editor.configStore.locale.textdesign}},{key:"localeColor",get:function(){return this.editor.configStore.locale.common.color}},{key:"items",get:function(){return this.entityManager.items}}],[{key:"defaultText",value:function(){return _h.text}}]),e}();(0,Xr.c)([Xr.l],kh.prototype,"addOrselect",2),(0,Xr.c)([Xr.l],kh.prototype,"selectLast",2),(0,Xr.c)([Xr.l],kh.prototype,"add",2),(0,Xr.c)([Xr.l],kh.prototype,"updateStateFromHistory",2),(0,Xr.c)([Xr.l],kh.prototype,"setState",2),(0,Xr.c)([Xr.l],kh.prototype,"changeText",2),(0,Xr.c)([Xr.l],kh.prototype,"setEditMode",2),(0,Xr.c)([Xr.l],kh.prototype,"duplicate",2),(0,Xr.c)([Xr.l],kh.prototype,"bringToFront",2),(0,Xr.c)([Xr.l],kh.prototype,"delete",2),(0,Xr.c)([Xr.l],kh.prototype,"changeSeed",2),(0,Xr.c)([Xr.l],kh.prototype,"changeIdentifier",2),(0,Xr.c)([Xr.l],kh.prototype,"changeColor",2),(0,Xr.c)([Xr.l],kh.prototype,"invertBackground",2),(0,Xr.c)([Xr.l],kh.prototype,"changeWidth",2),(0,Xr.c)([Xr.l],kh.prototype,"changePadding",2),(0,Xr.c)([Xr.l],kh.prototype,"pureReset",2),(0,Xr.c)([Xr.l],kh.prototype,"dispose",2),(0,Xr.c)([Xr.f],kh.prototype,"isTextDesignSelected",1),(0,Xr.c)([Xr.f],kh.prototype,"isEditMode",1),(0,Xr.c)([Xr.f],kh.prototype,"currentTextDesign",1),(0,Xr.c)([Xr.f],kh.prototype,"id",1),(0,Xr.c)([Xr.f],kh.prototype,"text",1),(0,Xr.c)([Xr.f],kh.prototype,"seed",1),(0,Xr.c)([Xr.f],kh.prototype,"padding",1),(0,Xr.c)([Xr.f],kh.prototype,"width",1),(0,Xr.c)([Xr.f],kh.prototype,"identifier",1),(0,Xr.c)([Xr.f],kh.prototype,"isInverted",1),(0,Xr.c)([Xr.f],kh.prototype,"color",1),(0,Xr.c)([Xr.f],kh.prototype,"config",1),(0,Xr.c)([Xr.f],kh.prototype,"locale",1),(0,Xr.c)([Xr.f],kh.prototype,"localeColor",1),(0,Xr.c)([Xr.f],kh.prototype,"items",1);var wh={identifier:"identity",opacity:1,width:0,color:zc.white},Sh=new Nc(0,1),Ch=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.changeIdentifier=function(e){n.state.identifier=e},this.changeOpacity=this.changeWidth=function(e){n.state.width=e},this.changeColor=function(e){n.state.color=e},this.reset=function(){-1===n.indexInContainer&&(n.state.identifier=wh.identifier,n.state.opacity=wh.opacity,n.state.width=wh.width,n.state.color=wh.color,n.removeIndex())},this.removeFrameEffect=function(){n.effect&&(n.engine.removeEffect(n.effect),n.effect=void 0)},this.setEffectProperties=function(e){return n.effect?(n.removeIndex(),n.effect.setProperties(e),n.effect.getProperties()):null},this.setFrameEffect=function(e){var t=e.identifier,i=e.width,r=e.opacity,o=e.color,a=(0,Ur.Z)({},n.state);return n.changeIdentifier(t),n.changeWidth(i),n.changeOpacity(r),n.changeColor(o),n.removeFrameEffect(),new Promise((function(e,s){n.engine.addFrameFromAssets(t,n.engineMediator.image.container).then((function(t){n.effect=t,n.effect.setProperties({tintColor:o,opacity:r,width:i}),e()})).catch((function(e){n.changeIdentifier(a.identifier),n.changeOpacity(a.opacity),n.changeWidth(a.width),n.changeColor(a.color),"identity"===a.identifier&&n.removeIndex(),s(e)}))}))},this.removeIndex=this.engineMediator=t,this.state=wh}return(0,jr.Z)(e,[{key:"engine",get:function(){return this.engineMediator.engine}},{key:"imageContainer",get:,{key:"indexInContainer",get:]),e}();(0,Xr.c)([Xr.e],Ch.prototype,"state",2),(0,Xr.c)([Xr.l],Ch.prototype,"changeIdentifier",2),(0,Xr.c)([Xr.l],Ch.prototype,"changeOpacity",2),(0,Xr.c)([Xr.l],Ch.prototype,"changeWidth",2),(0,Xr.c)([Xr.l],Ch.prototype,"changeColor",2),(0,Xr.c)([Xr.l],Ch.prototype,"reset",2);var Th=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.colorList=lh(),this.selectFrame=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===n.identifier){e.next=6;break}return i=.1*n.editor.shortestOutputSide,e.next=4,n.frameStore.setFrameEffect({identifier:t,width:i,opacity:1,color:wh.color});case 4:n.editor.render(),n.addSnapshot("add","frame");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.changeOpacity=function(e){var t=n.frameStore.setEffectProperties({opacity:e});t&&(n.frameStore.changeOpacity(t.opacity),n.editor.render())},this.changeWidth=function(e){var t=n.frameStore.setEffectProperties({width:e});t&&(n.frameStore.changeWidth(t.width),n.editor.render())},this.changeColor=function(e){var t=n.frameStore.setEffectProperties({tintColor:e});t&&(n.frameStore.changeColor(t.tintColor),n.editor.render())},this.colorSnapshot=this.toolSnapshot=this.addSnapshot=function(e,t){n.editor.addSnapshot(void 0,e,t)},this.pureReset=this.reset=function(){n.pureReset(),n.addSnapshot("delete",n.locale.controls.buttonReset),n.editor.render()},this.updateStateFromHistory=function(e){return"identity"===e.identifier?(n.pureReset(),new Promise(()):n.frameStore.setFrameEffect(e)},this.updateStateFromSerialization=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.entityManager.items.find((function(e){return e.identifier===t.identifier})),!i){e.next=3;break}return e.abrupt("return",n.frameStore.setFrameEffect(t).then(());case 3:return e.abrupt("return",new Promise(());case 4:case"end":return e.stop()}}),e)})));return (),this.editor=t,this.frameStore=new Ch(this.editor.engineMediator);var i=this.editor.assetProvider.getAssets("frame"),r=this.config;this.entityManager=new Uc(i,(0,Ur.Z)((0,Ur.Z)({},r),{},{flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")})),wh.color=(0,Xr.p)((0,Xr.Ua)(this.config,"defaultColor",wh.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=Mc((0,Xr.p)(this.config.colors)))}return(0,jr.Z)(e,[{key:"state",get:function(){return this.frameStore.state}},{key:"identifier",get:function(){return this.state.identifier}},{key:"color",get:function(){return this.state.color}},{key:"size",get:function(){return this.state.width}},{key:"tintable",get:function(){var e=this,t=this.entityManager.items.find(();return t&&t.tintable||!1}},{key:"opacity",get:function(){return this.state.opacity}},{key:"minSize",get:function(){return.05*this.editor.shortestOutputSide}},{key:"maxSize",get:,{key:"config",get:function(){return this.editor.configStore.config.frame}},{key:"locale",get:function(){return this.editor.configStore.locale.frame}},{key:"localeColor",get:function(){return this.editor.configStore.locale.common.color}},{key:"items",get:function(){return this.entityManager.items}},{key:"isOptionSelected",get:]),e}();(0,Xr.c)([Xr.l],Th.prototype,"selectFrame",2),(0,Xr.c)([Xr.l],Th.prototype,"changeOpacity",2),(0,Xr.c)([Xr.l],Th.prototype,"changeWidth",2),(0,Xr.c)([Xr.l],Th.prototype,"changeColor",2),(0,Xr.c)([Xr.l],Th.prototype,"pureReset",2),(0,Xr.c)([Xr.l],Th.prototype,"reset",2),(0,Xr.c)([Xr.l],Th.prototype,"updateStateFromHistory",2),(0,Xr.c)([Xr.l],Th.prototype,"updateStateFromSerialization",2),(0,Xr.c)([Xr.f],Th.prototype,"state",1),(0,Xr.c)([Xr.f],Th.prototype,"identifier",1),(0,Xr.c)([Xr.f],Th.prototype,"color",1),(0,Xr.c)([Xr.f],Th.prototype,"size",1),(0,Xr.c)([Xr.f],Th.prototype,"tintable",1),(0,Xr.c)([Xr.f],Th.prototype,"opacity",1),(0,Xr.c)([Xr.f],Th.prototype,"minSize",1),(0,Xr.c)([Xr.f],Th.prototype,"maxSize",1),(0,Xr.c)([Xr.f],Th.prototype,"config",1),(0,Xr.c)([Xr.f],Th.prototype,"locale",1),(0,Xr.c)([Xr.f],Th.prototype,"localeColor",1),(0,Xr.c)([Xr.f],Th.prototype,"items",1),(0,Xr.c)([Xr.f],Th.prototype,"isOptionSelected",1);var Eh={size:0,color:zc.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0},Dh=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.strokes={strokes:[]},this.colorList=lh(),this.dirty=Xr.e.box(!1),this.id="",this.containerId=this.initSize=function(){var e=n.state,t=e.minimumSize,i=e.maximumSize;0===n.size&&n.changeSize((0,Xr.Ta)(n.config,"defaultSize",[t,i]))},this.changeColor=function(e){n.state.color=e},this.changeSize=function(e){n.state.size=e},this.changeRelativeSize=function(e){var t=n.state,i=t.maximumSize,r=t.minimumSize;n.state.size=(i-r)*e/100+r},this.changeHardness=this.reset=function(){n.pureReset(),n.addSnapshot("delete",n.locale.controls.buttonReset),n.editor.render()},this.editor=t,this.state=(0,Ur.Z)((0,Ur.Z)({},Eh),{},{hardness:(0,Xr.Ta)(this.config,"defaultHardness",[Eh.minimumHardness,Eh.maximumHardness]),color:(0,Xr.p)((0,Xr.Ua)(this.config,"defaultColor",Eh.color))}),this.config.colors&&this.config.colors.length>0&&(this.colorList=Mc((0,Xr.p)(this.config.colors)))}return(0,jr.Z)(e,[{key:"addSnapshot",value:function(e,t){this.editor.addSnapshot(void 0,e,t)}},{key:"clickableCanvas",value:,{key:"beginStroke",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.drawingContainer){var t=this.editor.orderHelper.addSprite("brush");this.drawingContainer=this.editor.engine.addDrawing({strokes:e},this.editor.imageContainer,t)}this.id=this.drawingContainer.getID(),this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:(0,Xr.p)(this.state.color),size:this.state.size,hardness:this.state.hardness})}},{key:"strokePosition",value:function(e){if(this.drawingContainer){var t=this.editor.previewToWorld(e,!1);this.drawingContainer.addPointToCurrentStroke(t),this.editor.render()}}},{key:"endStroke",value:function(){this.drawingContainer&&(this.drawingContainer.endStroke(),this.editor.render(),this.strokes=this.drawingContainer.getData(),this.addSnapshot("edit",this.locale.history.brushStroke),this.dirty.set(!0))}},{key:"updateStateFromHistory",value:function(e){if(!(0,Xr.Va.default)(e,this.strokes))if(!(0,Xr.Va.default)(e,{strokes:[]})&&e){if(this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===e.strokes.length)return void this.dirty.set(!1);this.strokes=e,this.drawingContainer.setData(this.strokes)}else{var t=this.editor.orderHelper.addSprite("brush");this.drawingContainer=this.editor.engine.addDrawing({strokes:e.strokes},this.editor.imageContainer,t),this.strokes=this.drawingContainer.getData()}this.dirty.set(0!==this.strokes.strokes.length),this.id=this.drawingContainer.getID()}else this.pureReset()}},{key:"pureReset",value:function(){this.dirty.set(!1),this.strokes={strokes:[]},this.drawingContainer&&(this.editor.engine.removeContainer(this.drawingContainer),this.drawingContainer=void 0)}},{key:"config",get:function(){return this.editor.configStore.config.brush}},{key:"locale",get:,{key:"localeColor",get:,{key:"color",get:function(){return this.state.color}},{key:"size",get:function(){return this.state.size}},{key:"relativeSize",get:function(){var e=this.state,t=e.size,n=e.maximumSize,i=e.minimumSize;return 100*(t-i)/(n-i)}},{key:"sizeOnScreenSpace",get:function(){var e=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*e)}},{key:"hardness",get:,{key:"isDirty",get:]),e}();(0,Xr.c)([Xr.e],Dh.prototype,"state",2),(0,Xr.c)([Xr.e],Dh.prototype,"dirty",2),(0,Xr.c)([Xr.l],Dh.prototype,"initSize",2),(0,Xr.c)([Xr.l],Dh.prototype,"changeColor",2),(0,Xr.c)([Xr.l],Dh.prototype,"changeSize",2),(0,Xr.c)([Xr.l],Dh.prototype,"changeRelativeSize",2),(0,Xr.c)([Xr.l],Dh.prototype,"changeHardness",2),(0,Xr.c)([Xr.l],Dh.prototype,"clickableCanvas",1),(0,Xr.c)([Xr.l],Dh.prototype,"beginStroke",1),(0,Xr.c)([Xr.l],Dh.prototype,"strokePosition",1),(0,Xr.c)([Xr.l],Dh.prototype,"endStroke",1),(0,Xr.c)([Xr.l],Dh.prototype,"updateStateFromHistory",1),(0,Xr.c)([Xr.l],Dh.prototype,"reset",2),(0,Xr.c)([Xr.f],Dh.prototype,"config",1),(0,Xr.c)([Xr.f],Dh.prototype,"locale",1),(0,Xr.c)([Xr.f],Dh.prototype,"localeColor",1),(0,Xr.c)([Xr.f],Dh.prototype,"color",1),(0,Xr.c)([Xr.f],Dh.prototype,"size",1),(0,Xr.c)([Xr.f],Dh.prototype,"relativeSize",1),(0,Xr.c)([Xr.f],Dh.prototype,"sizeOnScreenSpace",1),(0,Xr.c)([Xr.f],Dh.prototype,"hardness",1),(0,Xr.c)([Xr.f],Dh.prototype,"isDirty",1);var Ih={position:{x:0,y:0},size:{height:0,width:0},lockResolution:!1,forceDimensions:!1,ratio:"*"},Rh=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(){var e;return(0,Hr.Z)(this,n),(e=t.apply(this,arguments)).prevDimensions={width:0,height:0},e}return(0,jr.Z)(n,[{key:"onExport",value:function(e){this.emit("export",e)}},{key:"onClose",value:function(){this.emit("close")}},{key:"onUndo",value:function(){this.emit("historyUndo")}},{key:"onRedo",value:function(){this.emit("historyRedo")}},{key:"onHistoryChange",value:function(){this.emit("historyChange")}},{key:"onEditorReady",value:function(){this.emit("editorReady")}},{key:"onErrorImageLoading",value:function(e){this.emit("errorImageLoading",e)}},{key:"onImageLoaded",value:function(){this.emit("imageLoad")}},{key:"onStickerUploadedAdd",value:function(e){this.emit("stickerUploadAdd",e)}},{key:"onToolChanged",value:,{key:"onErrorWebGLContextLost",value:,{key:"onCropDimensionsChanged",value:function(e){this.prevDimensions.width===e.width&&this.prevDimensions.height===e.height||(this.emit("cropDimensionsChange",e),this.prevDimensions=e)}}]),n}(Xr.Ka),Oh=Ic([Sc,{layout:"basic",defaultTool:null}]),Fh=(0,Br.Z)({common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"R\xfcckg\xe4ngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlie\xdfen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gr\xfcnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterst\xfctzt",buttonYes:"Neu Laden",buttonNo:"Schlie\xdfen"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden",buttonNo:"Schlie\xdfen"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlie\xdfen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlie\xdfen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlie\xdfen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden",buttonNo:"Schlie\xdfen"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild \xfcbersteigt die maximale Gr\xf6sse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xc4nderungen verwerfen wollen?",buttonYes:"\xc4nderungen verwerfen",buttonNo:"\xc4nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xc4nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlie\xdfen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und k\xf6nnten anders aussehen",buttonYes:"\xc4nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten f\xfchren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam \xd6ffnen",buttonWebcamClose:"Webcam Schlie\xdfen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zur\xfccksetzen",sliderIntensity:"Filter Intensit\xe4t"},categories:(Ft={},(0,Br.Z)(Ft,"imgly_filter_category_duotone","DuoTone"),(0,Br.Z)(Ft,"imgly_filter_category_bw","B & W"),(0,Br.Z)(Ft,"imgly_filter_category_vintage","Vintage"),(0,Br.Z)(Ft,"imgly_filter_category_smooth","Smooth"),(0,Br.Z)(Ft,"imgly_filter_category_cold","Cold"),(0,Br.Z)(Ft,"imgly_filter_category_warm","Warm"),(0,Br.Z)(Ft,"imgly_filter_category_legacy","Legacy"),Ft),items:(At={},(0,Br.Z)(At,"imgly_lut_celsius","Inferno"),(0,Br.Z)(At,"imgly_lut_chest","Chestnut"),(0,Br.Z)(At,"imgly_lut_fixie","Fixie"),(0,Br.Z)(At,"imgly_lut_fridge","Fridge"),(0,Br.Z)(At,"imgly_lut_front","Sunny 70s"),(0,Br.Z)(At,"imgly_lut_k2","Flat Black"),(0,Br.Z)(At,"imgly_lut_mellow","Mellow"),(0,Br.Z)(At,"imgly_lut_sin","Hard Stuff"),(0,Br.Z)(At,"imgly_lut_texas","Oldtimer"),(0,Br.Z)(At,"imgly_lut_ad1920","1920 A.D."),(0,Br.Z)(At,"imgly_lut_ancient","Ancient"),(0,Br.Z)(At,"imgly_lut_bleached","Kalmen"),(0,Br.Z)(At,"imgly_lut_bleachedblue","Joran"),(0,Br.Z)(At,"imgly_lut_blues","Polaroid"),(0,Br.Z)(At,"imgly_lut_blueshadows","Zephyr"),(0,Br.Z)(At,"imgly_lut_breeze","Levante"),(0,Br.Z)(At,"imgly_lut_bw","Greyed"),(0,Br.Z)(At,"imgly_lut_classic","Classic"),(0,Br.Z)(At,"imgly_lut_colorful","Colorful"),(0,Br.Z)(At,"imgly_lut_cool","Snappy"),(0,Br.Z)(At,"imgly_lut_cottoncandy","Candy"),(0,Br.Z)(At,"imgly_lut_creamy","Creamy"),(0,Br.Z)(At,"imgly_lut_eighties","Low Fire"),(0,Br.Z)(At,"imgly_lut_elder","Colla"),(0,Br.Z)(At,"imgly_lut_evening","Sunrise"),(0,Br.Z)(At,"imgly_lut_fall","Moss"),(0,Br.Z)(At,"imgly_lut_food","Food"),(0,Br.Z)(At,"imgly_lut_glam","Glam"),(0,Br.Z)(At,"imgly_lut_gobblin","Gobblin"),(0,Br.Z)(At,"imgly_lut_highcarb","High Carb"),(0,Br.Z)(At,"imgly_lut_highcontrast","Hicon"),(0,Br.Z)(At,"imgly_lut_k1","K1"),(0,Br.Z)(At,"imgly_lut_k6","K6"),(0,Br.Z)(At,"imgly_lut_kdynamic","Pebble"),(0,Br.Z)(At,"imgly_lut_keen","Keen"),(0,Br.Z)(At,"imgly_lut_lenin","Lemon"),(0,Br.Z)(At,"imgly_lut_litho","Litho"),(0,Br.Z)(At,"imgly_lut_lomo","Lomo"),(0,Br.Z)(At,"imgly_lut_lomo100","Lomo 100"),(0,Br.Z)(At,"imgly_lut_lucid","Lucid"),(0,Br.Z)(At,"imgly_lut_neat","Neat"),(0,Br.Z)(At,"imgly_lut_nogreen","Pumpkin"),(0,Br.Z)(At,"imgly_lut_orchid","Solanus"),(0,Br.Z)(At,"imgly_lut_pale","Pale"),(0,Br.Z)(At,"imgly_lut_pitched","Pitched"),(0,Br.Z)(At,"imgly_lut_plate","Weathered"),(0,Br.Z)(At,"imgly_lut_pola669","Green Gap"),(0,Br.Z)(At,"imgly_lut_polasx","Pola SX"),(0,Br.Z)(At,"imgly_lut_pro400","Pro 400"),(0,Br.Z)(At,"imgly_lut_quozi","Quozi"),(0,Br.Z)(At,"imgly_lut_sepiahigh","Sepia"),(0,Br.Z)(At,"imgly_lut_settled","Settled"),(0,Br.Z)(At,"imgly_lut_seventies","Seventies"),(0,Br.Z)(At,"imgly_lut_soft","Soft"),(0,Br.Z)(At,"imgly_lut_steel","Steel"),(0,Br.Z)(At,"imgly_lut_summer","Summer"),(0,Br.Z)(At,"imgly_lut_sunset","Golden"),(0,Br.Z)(At,"imgly_lut_tender","Tender"),(0,Br.Z)(At,"imgly_lut_twilight","Twilight"),(0,Br.Z)(At,"imgly_lut_winter","Softy"),(0,Br.Z)(At,"imgly_lut_x400","Dusty"),(0,Br.Z)(At,"imgly_duotone_desert","Desert"),(0,Br.Z)(At,"imgly_duotone_peach","Peach"),(0,Br.Z)(At,"imgly_duotone_clash","Clash"),(0,Br.Z)(At,"imgly_duotone_plum","Plum"),(0,Br.Z)(At,"imgly_duotone_breezy","Breezy"),(0,Br.Z)(At,"imgly_duotone_deepblue","Deep Blue"),(0,Br.Z)(At,"imgly_duotone_frog","Frog"),(0,Br.Z)(At,"imgly_duotone_sunset","Sunset"),At)},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zur\xfccksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"S\xe4ttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Sch\xe4rfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei\xdf",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zur\xfccksetzen",sliderIntensity:"Focus Intensit\xe4t"},items:{radial:"Kreisf\xf6rmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gau\xdfsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gr\xf6\xdfe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zur\xfccksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"\xdcberblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:(Pt={},(0,Br.Z)(Pt,"imgly_overlay_bokeh","Bokeh"),(0,Br.Z)(Pt,"imgly_overlay_chop","Chop"),(0,Br.Z)(Pt,"imgly_overlay_clouds","Clouds"),(0,Br.Z)(Pt,"imgly_overlay_golden","Golden"),(0,Br.Z)(Pt,"imgly_overlay_grain","Grain"),(0,Br.Z)(Pt,"imgly_overlay_hearts","Hearts"),(0,Br.Z)(Pt,"imgly_overlay_lightleak1","Light Leak 1"),(0,Br.Z)(Pt,"imgly_overlay_lightleak2","Light Leak 2"),(0,Br.Z)(Pt,"imgly_overlay_metal","Metal"),(0,Br.Z)(Pt,"imgly_overlay_mosaic","Mosaic"),(0,Br.Z)(Pt,"imgly_overlay_painting","Painting"),(0,Br.Z)(Pt,"imgly_overlay_paper","Paper"),(0,Br.Z)(Pt,"imgly_overlay_rain","Rain"),(0,Br.Z)(Pt,"imgly_overlay_vintage","Vintage"),(0,Br.Z)(Pt,"imgly_overlay_wall1","Wall"),(0,Br.Z)(Pt,"imgly_overlay_wall2","Wall 2"),(0,Br.Z)(Pt,"imgly_overlay_wood","Wood"),Pt)},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"L\xf6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgr\xf6\xdfe",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenh\xf6he",tabFontSize:"Schriftgr\xf6\xdfe"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"L\xf6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlie\xdfen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"L\xf6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zur\xfccksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zur\xfccksetzen",sliderSize:"Dicke",sliderHardness:"H\xe4rte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"H\xe4rte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zur\xfccksetzen",checkboxKeepResolution:"Fixiere Aufl\xf6sung",inputCropSize:"Bildgr\xf6\xdfe",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Aufl\xf6sung",tabCropSize:"Bildgr\xf6\xdfe"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}}},"customTool",{title:"Benutzerdefiniert"}),Ah=(0,Br.Z)({common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Retry",buttonNo:"Close"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Retry",buttonNo:"Close"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Retry",buttonNo:"Close"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:(Zt={},(0,Br.Z)(Zt,"imgly_filter_category_duotone","DuoTone"),(0,Br.Z)(Zt,"imgly_filter_category_bw","B & W"),(0,Br.Z)(Zt,"imgly_filter_category_vintage","Vintage"),(0,Br.Z)(Zt,"imgly_filter_category_smooth","Smooth"),(0,Br.Z)(Zt,"imgly_filter_category_cold","Cold"),(0,Br.Z)(Zt,"imgly_filter_category_warm","Warm"),(0,Br.Z)(Zt,"imgly_filter_category_legacy","Legacy"),Zt),items:(Mt={},(0,Br.Z)(Mt,"imgly_lut_celsius","Inferno"),(0,Br.Z)(Mt,"imgly_lut_chest","Chestnut"),(0,Br.Z)(Mt,"imgly_lut_fixie","Fixie"),(0,Br.Z)(Mt,"imgly_lut_fridge","Fridge"),(0,Br.Z)(Mt,"imgly_lut_front","Sunny 70s"),(0,Br.Z)(Mt,"imgly_lut_k2","Flat Black"),(0,Br.Z)(Mt,"imgly_lut_mellow","Mellow"),(0,Br.Z)(Mt,"imgly_lut_sin","Hard Stuff"),(0,Br.Z)(Mt,"imgly_lut_texas","Oldtimer"),(0,Br.Z)(Mt,"imgly_lut_ad1920","1920 A.D."),(0,Br.Z)(Mt,"imgly_lut_ancient","Ancient"),(0,Br.Z)(Mt,"imgly_lut_bleached","Kalmen"),(0,Br.Z)(Mt,"imgly_lut_bleachedblue","Joran"),(0,Br.Z)(Mt,"imgly_lut_blues","Polaroid"),(0,Br.Z)(Mt,"imgly_lut_blueshadows","Zephyr"),(0,Br.Z)(Mt,"imgly_lut_breeze","Levante"),(0,Br.Z)(Mt,"imgly_lut_bw","Greyed"),(0,Br.Z)(Mt,"imgly_lut_classic","Classic"),(0,Br.Z)(Mt,"imgly_lut_colorful","Colorful"),(0,Br.Z)(Mt,"imgly_lut_cool","Snappy"),(0,Br.Z)(Mt,"imgly_lut_cottoncandy","Candy"),(0,Br.Z)(Mt,"imgly_lut_creamy","Creamy"),(0,Br.Z)(Mt,"imgly_lut_eighties","Low Fire"),(0,Br.Z)(Mt,"imgly_lut_elder","Colla"),(0,Br.Z)(Mt,"imgly_lut_evening","Sunrise"),(0,Br.Z)(Mt,"imgly_lut_fall","Moss"),(0,Br.Z)(Mt,"imgly_lut_food","Food"),(0,Br.Z)(Mt,"imgly_lut_glam","Glam"),(0,Br.Z)(Mt,"imgly_lut_gobblin","Gobblin"),(0,Br.Z)(Mt,"imgly_lut_highcarb","High Carb"),(0,Br.Z)(Mt,"imgly_lut_highcontrast","Hicon"),(0,Br.Z)(Mt,"imgly_lut_k1","K1"),(0,Br.Z)(Mt,"imgly_lut_k6","K6"),(0,Br.Z)(Mt,"imgly_lut_kdynamic","Pebble"),(0,Br.Z)(Mt,"imgly_lut_keen","Keen"),(0,Br.Z)(Mt,"imgly_lut_lenin","Lemon"),(0,Br.Z)(Mt,"imgly_lut_litho","Litho"),(0,Br.Z)(Mt,"imgly_lut_lomo","Lomo"),(0,Br.Z)(Mt,"imgly_lut_lomo100","Lomo 100"),(0,Br.Z)(Mt,"imgly_lut_lucid","Lucid"),(0,Br.Z)(Mt,"imgly_lut_neat","Neat"),(0,Br.Z)(Mt,"imgly_lut_nogreen","Pumpkin"),(0,Br.Z)(Mt,"imgly_lut_orchid","Solanus"),(0,Br.Z)(Mt,"imgly_lut_pale","Pale"),(0,Br.Z)(Mt,"imgly_lut_pitched","Pitched"),(0,Br.Z)(Mt,"imgly_lut_plate","Weathered"),(0,Br.Z)(Mt,"imgly_lut_pola669","Green Gap"),(0,Br.Z)(Mt,"imgly_lut_polasx","Pola SX"),(0,Br.Z)(Mt,"imgly_lut_pro400","Pro 400"),(0,Br.Z)(Mt,"imgly_lut_quozi","Quozi"),(0,Br.Z)(Mt,"imgly_lut_sepiahigh","Sepia"),(0,Br.Z)(Mt,"imgly_lut_settled","Settled"),(0,Br.Z)(Mt,"imgly_lut_seventies","Seventies"),(0,Br.Z)(Mt,"imgly_lut_soft","Soft"),(0,Br.Z)(Mt,"imgly_lut_steel","Steel"),(0,Br.Z)(Mt,"imgly_lut_summer","Summer"),(0,Br.Z)(Mt,"imgly_lut_sunset","Golden"),(0,Br.Z)(Mt,"imgly_lut_tender","Tender"),(0,Br.Z)(Mt,"imgly_lut_twilight","Twilight"),(0,Br.Z)(Mt,"imgly_lut_winter","Softy"),(0,Br.Z)(Mt,"imgly_lut_x400","Dusty"),(0,Br.Z)(Mt,"imgly_duotone_desert","Desert"),(0,Br.Z)(Mt,"imgly_duotone_peach","Peach"),(0,Br.Z)(Mt,"imgly_duotone_clash","Clash"),(0,Br.Z)(Mt,"imgly_duotone_plum","Plum"),(0,Br.Z)(Mt,"imgly_duotone_breezy","Breezy"),(0,Br.Z)(Mt,"imgly_duotone_deepblue","Deep Blue"),(0,Br.Z)(Mt,"imgly_duotone_frog","Frog"),(0,Br.Z)(Mt,"imgly_duotone_sunset","Sunset"),Mt)},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:(zt={},(0,Br.Z)(zt,"imgly_overlay_bokeh","Bokeh"),(0,Br.Z)(zt,"imgly_overlay_chop","Chop"),(0,Br.Z)(zt,"imgly_overlay_clouds","Clouds"),(0,Br.Z)(zt,"imgly_overlay_golden","Golden"),(0,Br.Z)(zt,"imgly_overlay_grain","Grain"),(0,Br.Z)(zt,"imgly_overlay_hearts","Hearts"),(0,Br.Z)(zt,"imgly_overlay_lightleak1","Light Leak 1"),(0,Br.Z)(zt,"imgly_overlay_lightleak2","Light Leak 2"),(0,Br.Z)(zt,"imgly_overlay_metal","Metal"),(0,Br.Z)(zt,"imgly_overlay_mosaic","Mosaic"),(0,Br.Z)(zt,"imgly_overlay_painting","Painting"),(0,Br.Z)(zt,"imgly_overlay_paper","Paper"),(0,Br.Z)(zt,"imgly_overlay_rain","Rain"),(0,Br.Z)(zt,"imgly_overlay_vintage","Vintage"),(0,Br.Z)(zt,"imgly_overlay_wall1","Wall"),(0,Br.Z)(zt,"imgly_overlay_wall2","Wall 2"),(0,Br.Z)(zt,"imgly_overlay_wood","Wood"),zt)},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlie\xdfen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}}},"customTool",{title:"Custom"}),Ph=Zh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"},t=e.primary,n=void 0===t?"#365afc":t,i=e.background,r=void 0===i?"#0B0B0B":i,o=e.foreground,a=void 0===o?"#FFFFFF":o,s="rgba(255, 255, 255, 0.90)",l="rgba(255, 255, 255, 0.60)",u="rgba(255, 255, 255, 0.38)",c="#424242",h="#333333",d="#242424",f="#171717",p="#0B0B0B",g="rgba(255, 255, 255, 0.08)",m="rgba(0, 0, 0, 0.3)",y="rgba(89, 121, 252, 0.20)",v="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:r,foreground:a,primary:n,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:h,activeForeground:n,containedPrimaryBackground:n,containedPrimaryForeground:s,outlinedPrimaryBackground:d,outlinedPrimaryForeground:s,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:l,textPrimaryForeground:n,textSecondaryForeground:l,outlinedInactiveOverlayColor:m,textInactiveOpacity:"0.5",hoverOverlayColor:g},checkbox:{background:h,foreground:a,activeForeground:a,activeBackground:n,inactiveOpacity:v,hoverOpacity:"0.8"},modal:{background:d,bodyForeground:s,headerForeground:l,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:h,foreground:s,activeBorderColor:n,activeOverlayColor:y,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:s,inactiveOverlayColor:m,hoverOverlayColor:g},tabTitle:{foreground:l,background:"transparent",activeBackground:"transparent",activeBorderColor:n,activeForeground:s},dropdown:{background:"transparent",foreground:s,hoverBorderColor:l,borderColor:h,caretColor:u,listBackground:h,listBorderColor:h,listItemHoverBackground:c,listForeground:l,listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)",inactiveOpacity:v},textInput:{foreground:s,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:h,inactiveOpacity:v},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:n,thumbBackground:f,thumbBorderColor:n,inactiveOpacity:v,hoverOpacity:"0.7"},selectColor:{activeBorderColor:n,inactiveOpacity:v},toolbar:{foreground:s,background:d,activeBackground:"transparent",activeForeground:n,borderColor:"transparent"},tooltip:{background:c,foreground:s},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:h,titleForeground:l,inputLabelForeground:l,inputLabelInactiveOpacity:v},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:s,borderColor:"none"},canvasActionBar:{background:c,foreground:s,separatorColor:u},canvas:{background:p,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:h,listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)",controlsColor:"#ffffff",inputBorderColor:c},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:a,background:p},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}},Mh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"},t=e.primary,n=void 0===t?"#1e47fb":t,i=e.background,r=void 0===i?"#FBFBFB":i,o=e.foreground,a=void 0===o?"#000000":o,s="rgba(0, 0, 0, 0.90)",l="rgba(0, 0, 0, 0.60)",u="rgba(0, 0, 0, 0.38)",c="#CCCCCC",h="#D4D4D4",d="#E6E6E6",f="#EEEEEE",p="#FBFBFB",g="rgba(125, 125, 125, 0.12)",m="rgba(30, 71, 251, 0.2)",y="rgba(0, 0, 0, 0.1)",v="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:r,foreground:a,primary:n,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:h,activeForeground:n,containedPrimaryBackground:n,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:d,outlinedPrimaryForeground:s,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:l,textPrimaryForeground:n,textSecondaryForeground:l,outlinedInactiveOverlayColor:y,textInactiveOpacity:"0.5",hoverOverlayColor:g},checkbox:{background:h,foreground:a,activeForeground:a,activeBackground:n,inactiveOpacity:v,hoverOpacity:"0.8"},modal:{background:d,bodyForeground:s,headerForeground:l,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:h,foreground:s,activeBorderColor:n,activeOverlayColor:m,labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:y,hoverOverlayColor:g},tabTitle:{foreground:l,background:"transparent",activeBackground:"transparent",activeBorderColor:n,activeForeground:s},dropdown:{background:"transparent",foreground:s,hoverBorderColor:l,borderColor:h,listBackground:h,caretColor:u,listForeground:l,listBorderColor:h,listItemHoverBackground:c,listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)",inactiveOpacity:v},textInput:{foreground:s,hoverBorderColor:s,background:"transparent",borderColor:h,inactiveOpacity:v},slider:{trackColor:c,activeTrackColor:n,thumbBackground:f,thumbBorderColor:n,inactiveOpacity:v,hoverOpacity:"0.7"},selectColor:{activeBorderColor:n,inactiveOpacity:v},toolbar:{foreground:s,background:h,activeBackground:"transparent",activeForeground:n,borderColor:"transparent"},tooltip:{background:c,foreground:s},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:f,shadow:"none",separatorColor:h,titleForeground:l,inputLabelForeground:l,inputLabelInactiveOpacity:v},mainCanvasActionBar:{background:"transparent",foreground:s,borderColor:"none"},canvasActionBar:{background:c,foreground:s,separatorColor:u},canvas:{background:p,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:h,listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)",controlsColor:"#ffffff",inputBorderColor:c},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:a,background:p},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}},zh=Zh(),Bh=Fc(),Lh=(0,Ur.Z)((0,Ur.Z)({},zh),{},{measurements:Bh}),Uh=function(e,t){var n=function(e){return"light"===e?Mh:Zh}(e);if(t&&t[e]){var i=t[e],r={primary:i.primary,background:i.background,foreground:i.foreground};return Ic([n(Object.keys(r).reduce((function(e,t){return r[t]?(0,Ur.Z)((0,Ur.Z)({},e),{},(0,Br.Z)({},t,r[t])):e}),{})),t[e]])}return n()||zh},Nh=["canvas","advancedUIToolbar","advancedUIToolControlBar","advancedUICard","advancedUISpacer","basicUIToolbar","basicUIToolControlBar","mainCanvasActionBar","inputs","colorItem","fontSystem"],Hh={config:Sc,locale:Ah,theme:zh,measurements:Bh,initialMeasurements:Bh},jh=function(){function e(){var t=this;(0,Hr.Z)(this,e),this.dispose=function(){t.state=null,t.events=null,t.assetProvider=null},this.checkDefaultToolAvailability=this.state=(0,Xr.e)(Hh),this.events=new Rh,this.licenseChecker=null}return(0,jr.Z)(e,[{key:"saveConfig",value:function(e){var t=this;e.mainCanvasActions&&4!==e.mainCanvasActions.length&&(e.mainCanvasActions.length=4);var n=Ic([e.layout&&"basic"===e.layout?Oh:Sc,e],{clone:!0});this.licenseChecker=new Xr.tb(n.license),this.licenseChecker.areCustomAssetsAllowed()||(n.sticker.enableCustomUpload=!1);var i=function(e,t){return t&&t[e]?Ic([Ph(e),t[e]]):Ph(e)||Ah}(n.language,n.custom.languages),r=Uh(n.theme,n.custom.themes),o=function(e){var t=Fc();if(e){var n={};return Object.keys(e).forEach((),Ic([t,n])}return t}(n.custom.measurements),a=n.library.provider,s=[];n.adjustment.categories=n.adjustment.categories.reduce((function(e,t){return e.push((0,Ur.Z)((0,Ur.Z)({},t),{},{items:t.items.filter((function(e){return!!Xr.S[e.identifier]||(s.push(e.identifier),!1)}))})),e}),[]),0!==s.length&&console.error("The following identifier are incorrect for the adjustment tool: ".concat(s.join(", "))),delete n.language,delete n.custom.languages,delete n.custom.themes,delete n.library.provider;var l=n.tools.reduce((function(e,t){return[].concat((0,Mr.Z)(e),"object"===typeof t?(0,Mr.Z)(t):[t])}),[]);if((l.length||(console.error("Empty list input for tools"),l=wc.reduce((function(e,t){return[].concat((0,Mr.Z)(e),"object"===typeof t?(0,Mr.Z)(t):[t])}),[])),l=l.filter((function(e){return t.licenseChecker.isToolAllowed(e)})),n.defaultTool)&&!this.checkDefaultToolAvailability(n.defaultTool,l)){this.licenseChecker.isToolAllowed(n.defaultTool)&&console.warn("Configured default tool ".concat(n.defaultTool," is not a part of configured list of tools: [").concat(l.join(" "),"]"));var u=l,c=(0,Lr.Z)(u,1);n.defaultTool=c[0]}n.tools=l,this.state.config=n,this.state.locale=i,this.state.theme=r,this.state.measurements=o,this.state.initialMeasurements=o;var h=this.buildCustomAssetsConfig();return this.assetProvider=new Xr.$a(h,this.licenseChecker.areCustomAssetsAllowed(),n.assetResolver),this.loadThemeFont(),a}},{key:"config",get:function(){return this.state.config}},{key:"locale",get:function(){return this.state.locale}},{key:"theme",get:function(){return this.state.theme}},{key:"measurements",get:function(){return this.state.measurements}},{key:"initialMeasurements",get:function(){return this.state.initialMeasurements}},{key:"tools",get:function(){return this.config.tools.reduce((function(e,t){return"string"===typeof t?[].concat((0,Mr.Z)(e),[t]):[].concat((0,Mr.Z)(e),[""],(0,Mr.Z)(t))}),[])}},{key:"defaultTool",get:function(){return this.config.defaultTool}},{key:"isOrderDefault",get:function(){return"default"===this.config.order}},{key:"isLayoutAdvanced",get:function(){return"advanced"===this.config.layout}},{key:"displayCloseButton",get:,{key:"loadThemeFont",value:function(){var e=this.theme.typography;e.skipLoading||this.assetProvider.getFontManager().injectFonts([e])}},{key:"buildCustomAssetsConfig",value:function(){var e=this.tools,t=(0,Xr.p)(this.state.config),n=this.state.config.assetBaseUrl,i=this.state.theme,r=-1!==e.indexOf("filter")?t.filter:void 0,o=-1!==e.indexOf("focus")?t.focus:void 0,a=-1!==e.indexOf("adjustment")?t.adjustment:void 0;return{basePath:n,theme:i,filter:r,focus:o,sticker:-1!==e.indexOf("sticker")?t.sticker:void 0,frame:-1!==e.indexOf("frame")?t.frame:void 0,overlay:-1!==e.indexOf("overlay")?t.overlay:void 0,transform:-1!==e.indexOf("transform")?t.transform:void 0,text:-1!==e.indexOf("text")?t.text:void 0,adjustment:a,textdesign:-1!==e.indexOf("textdesign")?t.textdesign:void 0}}}]),e}();(0,Xr.c)([Xr.l],jh.prototype,"saveConfig",1),(0,Xr.c)([Xr.l],jh.prototype,"dispose",2),(0,Xr.c)([Xr.f],jh.prototype,"config",1),(0,Xr.c)([Xr.f],jh.prototype,"locale",1),(0,Xr.c)([Xr.f],jh.prototype,"theme",1),(0,Xr.c)([Xr.f],jh.prototype,"measurements",1),(0,Xr.c)([Xr.f],jh.prototype,"initialMeasurements",1),(0,Xr.c)([Xr.f],jh.prototype,"tools",1),(0,Xr.c)([Xr.f],jh.prototype,"defaultTool",1),(0,Xr.c)([Xr.f],jh.prototype,"isOrderDefault",1),(0,Xr.c)([Xr.f],jh.prototype,"isLayoutAdvanced",1),(0,Xr.c)([Xr.f],jh.prototype,"displayCloseButton",1);var Wh=function(){function e(t){(0,Hr.Z)(this,e),this.editor=t}return(0,jr.Z)(e,[{key:"setBackgroundImage",value:function(e){this.container?this.container.setData({image:e,originalImage:e}):this.container=this.engine.addImage({image:e,originalImage:e,blendMode:"normal",opacity:1})}},{key:"getchildren",value:function(){return this.container.getChildren()}},{key:"addImageToContainer",value:function(){var e=this;return new Promise((function(t,n){var i=e.editor.activeStore.image;if((0,Xr.A)(i))e.setBackgroundImage(i),t();else{var r=e.editor.libraryStore.getRawUrl(i);e.getImageElement(r).then((function(n){e.setBackgroundImage(n),t()})).catch((function(e){n({identifier:"imageLoading",message:e.message})}))}}))}},{key:"getImageElement",value:function(e){var t=this;return new Promise((function(n,i){var r=new Image;r.addEventListener("load",(function(){n(r)})),r.addEventListener("error",(function(e){i(e)})),r.crossOrigin=t.editor.configStore.config.engine.crossOrigin,r.src=e}))}},{key:"getImgageContainerId",value:,{key:"engine",get:function(){return this.editor.engine}}]),e}(),Vh=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.applyNewImageTransform=function(){var e=n.editor.engineMediator.image.container.getBounds(),t=e.size,i=e.width,r=e.height,o=n.container;o.setTransform(Xr.ib.IDENTITY),o.setResolution(t),o.setPivot(.5,.5),o.setPosition({x:i/2,y:r/2})},this.editor=t}return(0,jr.Z)(e,[{key:"engine",get:function(){return this.editor.engine}},{key:"container",get:function(){return this.engine.getOutputContainer()}}]),e}();function Gh(e,t){return e.width/e.height>t.width/t.height?e.height/t.height:e.width/t.width}var qh={transform:Xr.ib.IDENTITY},Yh=function(){function e(t){(0,Hr.Z)(this,e),this.initialTransform=Xr.ib.IDENTITY,this.editor=t,this.state=(0,Xr.e)(qh)}return(0,jr.Z)(e,[{key:"createPreview",value:,{key:"updateTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.calculateTransform(e);return!!n.scale.x&&(t?this.saveInitialTransform(n):this.savePreviewTransform(n),this.container.setTransform(this.state.transform),!0)}},{key:"saveInitialTransform",value:,{key:"savePreviewTransform",value:function(e){var t=this;(0,Xr.m)((function(){t.state.transform.position=e.position,t.state.transform.scale=e.scale,t.state.transform.rotation=e.rotation;var n=(0,Xr.Za)(),i=new Xr.Pa(e.scale).divide(n);t.previewTransformWithoutDpr={position:new Xr.Pa(e.position).divide(n),scale:i,rotation:e.rotation}}))}},{key:"transform",get:function(){return this.state.transform}},{key:"position",get:function(){return this.state.transform.position}},{key:"scale",get:function(){return this.state.transform.scale}},{key:"rotation",get:function(){return this.state.transform.rotation}},{key:"calculateTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(0,Xr.Za)(),n=this.editor.configStore.config.scaleImageToFit,i=this.editor.canvasStore.canvasSize,r=i.width,o=i.height,a=this.editor.engine.getOutputDimensions(),s=Gh({width:r,height:o},a),l=n?s:Math.min(1,s),u=o-a.height*l,c=2*this.editor.configStore.measurements.mainCanvasActionBar.height;u<c&&(l=Gh({width:r,height:o-c},a));var h=.95;a.height*l>o*h&&(l=Gh({width:r,height:o*h},a)),a.width*l>r*h&&(l=Gh({width:r*h,height:o},a));var d={x:r*t/2,y:o*t/2},f={x:l*=t,y:l};return new Xr.ib(d,f,e)}}]),e}();(0,Xr.c)([Xr.l],Yh.prototype,"updateTransform",1),(0,Xr.c)([Xr.l],Yh.prototype,"savePreviewTransform",1),(0,Xr.c)([Xr.f],Yh.prototype,"transform",1),(0,Xr.c)([Xr.f],Yh.prototype,"position",1),(0,Xr.c)([Xr.f],Yh.prototype,"scale",1),(0,Xr.c)([Xr.f],Yh.prototype,"rotation",1);var Xh=function(){eturn(0,jr.Z)(e,[{key:"addIndex",value:function(t){e.checkTool(t);var n=e.indexForOrder(e.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,t),i=n.index,r=n.order;return this.imageContainerOrder=r,i}},{key:"removeIndex",value:function(t){e.checkTool(t),e.remove(t,this.imageContainerOrder)}},{key:"addSprite",value:function(e){return this.spriteContainerOrder.push(e),this.imageContainerOrder.length+this.spriteContainerOrder.length-1}},{key:"removeSprite",value:,{key:"renameSprite",value:function(e,t){var n=this.spriteContainerOrder.findIndex((function(t){return t===e}));-1!==n&&(this.spriteContainerOrder[n]=t)}},{key:"bringToFront",value:function(e){var t=this.spriteContainerOrder.findIndex((function(t){return t===e}));return-1!==t&&(this.spriteContainerOrder.splice(t,1),this.spriteContainerOrder.push(e)),this.getLastSpriteIndex()}},{key:"getLastSpriteId",value:,{key:"getSpriteIndex",value:function(e){return this.spriteContainerOrder.findIndex((function(t){return t===e}))+this.imageContainerOrder.length-1}},{key:"getLastSpriteIndex",value:function(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}}],[{key:"checkTool",value:function(e){if(-1!==["sticker","text","textdesign","brush"].indexOf(e))throw new Error("addIndex is used for non sprites, for sprites use addSprite")}},{key:"remove",value:function(e,t){var n=t.findIndex((function(t){return t===e}));-1!==n&&t.splice(n,1)}},{key:"indexForOrder",value:function(e,t,n){var i=e[n],r=t.findIndex((function(e){return e===n}));if(-1!==r)return{index:r,order:t};var o,a=t.length;if(a)for(o=0;o<a;o+=1){if(i<e[t[o]])return{index:o,order:t=[].concat((0,Mr.Z)(t.slice(0,o)),[n],(0,Mr.Z)(t.slice(o)))}}return t.push(n),{index:t.length-1,order:t}}}]),e}();Xh.IMAGE_CONTAINER_INDEX=(Bt={},(0,Br.Z)(Bt,"filter",0),(0,Br.Z)(Bt,"adjustment",1),(0,Br.Z)(Bt,"focus",2),(0,Br.Z)(Bt,"overlay",3),Bt);var Kh=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.orderHelper=new Xh,this.init=function(){var e=n.editor.configStore.config.engine;n.engine=new Xr.sb((0,Ur.Z)((0,Ur.Z)({},e),{},{license:n.editor.configStore.config.license,assetProvider:n.editor.configStore.assetProvider,watermark:n.editor.configStore.config.watermark})),n.image=new Wh(n.editor),n.output=new Vh(n.editor),n.preview=new Yh(n.editor)},this.dispose=function(){n.engine&&(n.engine.dispose(),n.engine=null),n.image=null,n.output=null,n.preview=null},this.editor=t}return(0,jr.Z)(e,[{key:"render",value:function(e){return this.engine.render(e)}},{key:"previewSpaceToWorldSpace",value:function(e,t){var n=this.preview.previewTransformWithoutDpr;if((0,Xr.ab)(e)){var i=this.editor.engine.convertPointFromPreviewIntoWorldSpace(Xr.Pa.ZERO,n,t),r=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:e,y:0},n,t);return Xr.Pa.distance(new Xr.Pa(i),new Xr.Pa(r))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(e,n,t)}},{key:"worldSpaceToPreviewSpace",value:function(e){var t=this.preview.previewTransformWithoutDpr;if((0,Xr.ab)(e)){var n=this.editor.engine.convertPointFromWorldIntoPreviewSpace(Xr.Pa.ZERO,t),i=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:e,y:0},t);return Xr.Pa.distance(new Xr.Pa(n),new Xr.Pa(i))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(e,t)}},{key:"outputSpaceToWorldSpace",value:function(e){return(0,Xr.ab)(e)?Xr.kb.getScalarInWorldSpace(e,this.editor.engine.getOutputContainer()):Xr.kb.getPointInWorldSpace(e,this.editor.engine.getOutputContainer())}},{key:"previewSpaceToOutputSpace",value:function(e){var t=this.preview.previewTransformWithoutDpr;if((0,Xr.ab)(e)){var n=this.editor.engine.convertPointFromPreviewIntoOutputSpace(Xr.Pa.ZERO,t),i=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:e,y:0},t);return Xr.Pa.distance(new Xr.Pa(n),new Xr.Pa(i))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(e,t)}},{key:"previewSpaceToFlippedPreviewSpace",value:]),e}(),Jh=function(){function e(){(0,Hr.Z)(this,e),this.snapshots=[],this.observeIndex=Xr.e.box(-1)}return(0,jr.Z)(e,[{key:"addSnapshot",value:function(e){this.index===this.snapshots.length-1?this.snapshots=this.snapshots.concat(JSON.stringify(e)):this.snapshots=[].concat((0,Mr.Z)(this.snapshots.slice(0,this.index+1)),[JSON.stringify(e)]),this.observeIndex.set(this.snapshots.length-1)}},{key:"getCurrentState",value:function(){return this.snapshots[this.index]}},{key:"reset",value:function(){this.snapshots=[],this.observeIndex.set(-1)}},{key:"undo",value:function(){return this.canUndo?(this.observeIndex.set(this.index-1),JSON.parse(this.getCurrentState())):null}},{key:"redo",value:function(){return this.canRedo?(this.observeIndex.set(this.index+1),JSON.parse(this.getCurrentState())):null}},{key:"discardSnapshotsfromIndex",value:function(e){e>0&&e<this.snapshots.length-1&&(this.snapshots=this.snapshots.slice(0,e),this.observeIndex.set(this.snapshots.length-1))}},{key:"index",get:function(){return this.observeIndex.get()}},{key:"canUndo",get:,{key:"canRedo",get:function(){return this.snapshots.length-1>this.index}}]),e}();(0,Xr.c)([Xr.f],Jh.prototype,"index",1),(0,Xr.c)([Xr.f],Jh.prototype,"canUndo",1),(0,Xr.c)([Xr.f],Jh.prototype,"canRedo",1);var Qh=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.awaitHistoryChange=!1,this.isDirtySinceSave=!1,this.undo=(0,Zr.Z)(Yr().mark((function e(){var t;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.awaitHistoryChange){e.next=8;break}return n.editor.configStore.events.onUndo(),n.awaitHistoryChange=!0,t=n.appHistoryManager.undo(),e.next=6,n.applyState(t);case 6:n.awaitHistoryChange=!1,n.canUndo||(n.isDirtySinceSave=!1);case 8:case"end":return e.stop()}}),e)}))),this.redo=(0,Zr.Z)(Yr().mark((function e(){var t;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.awaitHistoryChange){e.next=7;break}return n.editor.configStore.events.onRedo(),n.awaitHistoryChange=!0,t=n.appHistoryManager.redo(),e.next=6,n.applyState(t);case 6:n.awaitHistoryChange=!1;case 7:case"end":return e.stop()}}),e)}))),this.editor=t,this.appHistoryManager=new Jh}return(0,jr.Z)(e,[{key:"canUndo",get:function(){return this.appHistoryManager.canUndo}},{key:"canRedo",get:function(){return this.appHistoryManager.canRedo}},{key:"getHistoryState",value:function(){var e,t=(0,Xr.p)(this.editor.adjustmentsToolStore.state),n=(0,Xr.p)(this.editor.filterToolStore.state),i=this.editor.focusToolStore.getFocusStateForHistory(),r=(0,Xr.p)(this.editor.overlayToolStore.state),o=(0,Xr.p)(this.editor.frameToolStore.state),a=this.editor.brushToolStore.strokes,s=this.editor.spriteStore.getSpriteHistoryState(),l=this.editor.transformToolStore.serializableState;return e={},(0,Br.Z)(e,"adjustment",t),(0,Br.Z)(e,"filter",n),(0,Br.Z)(e,"focus",i),(0,Br.Z)(e,"overlay",r),(0,Br.Z)(e,"frame",o),(0,Br.Z)(e,"brush",a),(0,Br.Z)(e,"sprite",s),(0,Br.Z)(e,"transform",l),e}},{key:"addInitialSnapshot",value:function(){var e=this.getHistoryState();this.appHistoryManager.addSnapshot({state:e,type:"add",description:"Initial State"})}},{key:"addSnapshot",value:function(e,t,n){var i;i=e?e.sprite||e.transform?(0,Ur.Z)((0,Ur.Z)({},this.getHistoryState()),e):e:this.getHistoryState(),this.appHistoryManager.addSnapshot({state:i,type:t,description:n}),this.editor.configStore.events.onHistoryChange(),this.isDirtySinceSave||(this.isDirtySinceSave=!0)}},{key:"applyState",value:function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var n,i,r,o,a,s=this;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,e.prev=1,!n){e.next=47;break}i=Object.keys(n),r=0,o=i;case 5:if(!(r<o.length)){e.next=45;break}a=o[r],e.t0=a,e.next="filter"===e.t0?10:"adjustment"===e.t0?13:"overlay"===e.t0?16:"frame"===e.t0?19:"focus"===e.t0?22:"brush"===e.t0?25:"sprite"===e.t0?28:"transform"===e.t0?31:41;break;case 10:return e.next=12,this.editor.filterToolStore.updateStateFromHistory(n[a]);case 12:return e.abrupt("break",42);case 13:return e.next=15,this.editor.adjustmentsToolStore.updateStateFromHistory(n[a]);case 15:return e.abrupt("break",42);case 16:return e.next=18,this.editor.overlayToolStore.updateStateFromHistory(n[a]);case 18:return e.abrupt("break",42);case 19:return e.next=21,this.editor.frameToolStore.updateStateFromHistory(n[a]);case 21:return e.abrupt("break",42);case 22:return e.next=24,this.editor.focusToolStore.updateStateFromHistory(n[a],this.editor.canvasStore.sizeVector);case 24:return e.abrupt("break",42);case 25:return e.next=27,this.editor.brushToolStore.updateStateFromHistory(n[a]);case 27:return e.abrupt("break",42);case 28:return e.next=30,this.editor.spriteStore.updateStateFromHistory(n[a]);case 30:return e.abrupt("break",42);case 31:return this.editor.outputContainer.pauseChildrenUpdates(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(n[a]),this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.onLeave(),this.editor.outputContainer.resumeChildrenUpdates(),e.next=40,this.editor.wait();case 40:case 41:return e.abrupt("break",42);case 42:r++,e.next=5;break;case 45:return e.next=47,this.editor.renderPromise();case 47:e.next=53;break;case 49:e.prev=49,e.t1=e.catch(1),console.error(e.t1),this.editor.modalStore.showActionModal({type:"error",identifier:"unexpectedError",error:e.t1,handleConfirm:);case 53:case"end":return e.stop()}}),e,this,[[1,49]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isDirty",value:,{key:"reset",value:,{key:"getCurrentSpritesState",value:function(){var e,t;return null==(t=null==(e=JSON.parse(this.appHistoryManager.getCurrentState()))?void 0:e.state)?void 0:t.sprite}}]),e}();(0,Xr.c)([Xr.l],Qh.prototype,"undo",2),(0,Xr.c)([Xr.l],Qh.prototype,"redo",2),(0,Xr.c)([Xr.f],Qh.prototype,"canUndo",1),(0,Xr.c)([Xr.f],Qh.prototype,"canRedo",1);var $h=function(e,t){return new Promise((function(n,i){var r=new Image;r.onload=function(){n(r)},r.onerror=function(){i(new Error("Failed to load image with src:".concat(e)))},r.crossOrigin=t,r.src=e}))},ed=function(e,t){return new Promise((function(n,i){(function(e,t){return new Promise((function(n,i){var r=new XMLHttpRequest;r.onload=function(){var t=new FileReader;t.onloadend=function(){"string"===typeof t.result&&"data:image"===t.result.substr(0,10)?n(t.result):i(new Error("The image could not be loaded from ".concat(e)))},t.onerror=function(e){i(e)},t.readAsDataURL(r.response)},r.open("GET",e),r.responseType="blob",r.withCredentials="use-credentials"===t,r.send()}))})(e,t).then((function(e){var t=new Image;t.addEventListener("load",(function(){n(t)})),t.src=e})).catch((function(){$h(e,t).then((function(e){return n(e)})).catch((function(e){i(e)}))}))}))},td=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var n,i,r,o;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,i=t.image,r=t.crossOrigin,o=void 0===r?"anonymous":r,e.prev=1,!(i&&i.src&&"data:"===i.src.substr(0,5)||i&&i.src&&i.src.includes(".svg"))){e.next=4;break}return e.abrupt("return",i);case 4:if(!("string"===typeof n&&"data:"===n.substr(0,5)||"string"===typeof n&&n.includes(".svg"))){e.next=6;break}return e.abrupt("return",$h(n,o));case 6:return e.abrupt("return",ed(n||i.src,o));case 9:throw e.prev=9,e.t0=e.catch(1),new Error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),nd={tool:null,isWebcam:!1,image:"",imageLoadedToEngine:!1},id=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.setImage=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=n.editor.configStore.config.engine.crossOrigin,("string"!==typeof t||t.trim())&&void 0!==t&&null!==t){e.next=6;break}n.state.image=null,e.next=16;break;case 6:if("string"!==typeof t){e.next=12;break}return e.next=9,td({url:(0,Xr.z)(t)?t:n.editor.assetProvider.getPath(t),crossOrigin:i});case 9:n.state.image=e.sent,e.next=16;break;case 12:if(!(t instanceof HTMLImageElement)){e.next=16;break}return e.next=15,td({image:t,crossOrigin:i});case 15:n.state.image=e.sent;case 16:n.isWebcam&&(n.state.isWebcam=!1),e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(0),new Error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),this.setImageLoadedToEngine=function(e){n.state.imageLoadedToEngine=e},this.newImage=function(e){n.editor.init(e)},this.dispose=function(){n.state=null,n.editor=null},this.editor=t,this.state=(0,Xr.e)(nd)}return(0,jr.Z)(e,[{key:"selectTool",value:function(e){var t,n,i,r=this.editor.configStore.licenseChecker;if(this.state.tool!==e&&(null==r?void 0:r.isToolAllowed(e))&&(this.image||"library"===e||"customTool"===e)){if(this.editor.configStore.isLayoutAdvanced){var o=null==(i=null==(n=null==(t=this.editor.configStore.state.config.customTool)?void 0:t.measurements)?void 0:n.advancedUIToolControlBar)?void 0:i.width;o&&("customTool"===e?this.editor.configStore.measurements.advancedUIToolControlBar.width=o:"customTool"===this.state.tool&&(this.editor.configStore.measurements.advancedUIToolControlBar.width=this.editor.configStore.initialMeasurements.advancedUIToolControlBar.width))}switch(this.editor.onToolChange(this.state.tool,e),this.state.tool=e,this.editor.configStore.events.onToolChanged(e),e){case"text":this.editor.configStore.config.text.addDefaultTextOnEnter?this.editor.spriteStore.textToolStore.addOrselect():this.editor.spriteStore.textToolStore.loadFonts();break;case"textdesign":this.editor.configStore.config.textdesign.addDefaultTextOnEnter&&this.editor.spriteStore.textDesignToolStore.addOrselect();break;case"brush":this.editor.brushToolStore.initSize();break;case"transform":this.editor.transformToolStore.applyDefaultCrop()}}}},{key:"selectWebcam",value:function(e){this.state.isWebcam=e}},{key:"webcamLabel",get:function(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}},{key:"tool",get:function(){return this.state.tool}},{key:"isWebcam",get:function(){return this.state.isWebcam}},{key:"image",get:function(){return this.state.image}},{key:"imageLoadedToEngine",get:function(){return this.state.imageLoadedToEngine}}]),e}();(0,Xr.c)([Xr.l],id.prototype,"selectTool",1),(0,Xr.c)([Xr.l],id.prototype,"selectWebcam",1),(0,Xr.c)([Xr.l],id.prototype,"setImage",2),(0,Xr.c)([Xr.l],id.prototype,"setImageLoadedToEngine",2),(0,Xr.c)([Xr.l],id.prototype,"newImage",2),(0,Xr.c)([Xr.l],id.prototype,"dispose",2),(0,Xr.c)([Xr.f],id.prototype,"webcamLabel",1),(0,Xr.c)([Xr.f],id.prototype,"tool",1),(0,Xr.c)([Xr.f],id.prototype,"isWebcam",1),(0,Xr.c)([Xr.f],id.prototype,"image",1),(0,Xr.c)([Xr.f],id.prototype,"imageLoadedToEngine",1);var rd={height:0,width:0},od=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.canvasClickDisabled=Xr.e.box(!1),this.resizeCanvas=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=n.editor.activeStore.tool,i="transform"===e||!e&&"transform"===t,r=n.editor.configStore,o=r.isLayoutAdvanced,a=r.measurements,s=n.editor.canvasStore.storedSize,l=0;!o&&i&&(l=-1*a.basicUIToolControlBar.controlsBarHeight,"transform"===e&&"brush"===t&&(l-=a.basicUIToolControlBar.itemsBarHeight+4)),n.setCanvasSize({width:s.width,height:s.height+l})},this.setCanvasSize=function(e){n.state.canvasSize=e},this.dispose=function(){n.state=null,n.canvas=null,n.canvasClickDisabled=null,n.editor=null},this.editor=t,this.state=(0,Xr.e)(e.initialState)}return(0,jr.Z)(e,[{key:"setCanvasElement",value:function(e){this.canvas=e,this.editor.engineMediator.preview.createPreview(e),this.editor.activeStore.image&&this.editor.init(this.editor.activeStore.image)}},{key:"saveDimensions",value:function(e){var t=e.height,n=e.width,i=e.render,r=this.editor.activeStore.imageLoadedToEngine;t>rd.height&&n>rd.width&&(this.state.storedSize={width:n,height:t},0===this.state.canvasSize.height&&(this.state.canvasSize={width:n,height:t}),i&&r&&this.editor.resize())}},{key:"disableCanvasClick",value:function(){this.canvasClickDisabled.set(!0)}},{key:"enableCanvasClick",value:,{key:"isCanvasClickable",get:,{key:"canvasSize",get:function(){return this.state.canvasSize}},{key:"storedSize",get:function(){return this.state.storedSize}},{key:"sizeVector",get:,{key:"sizeVectorMagnitude",get:function(){return this.sizeVector.magnitude}},{key:"getContainersAtPreviewPoint",value:function(e){var t=this,n=this.editor.engine.getContainersAtPreviewPoint(e,this.editor.engineMediator.preview.previewTransformWithoutDpr).map((function(e){return e.getID()})).filter((function(e){return e!==t.editor.engineMediator.image.getImgageContainerId()}));this.editor.spriteStore.onCanvasClick(n)}}]),e}(),ad=od;ad.initialState={canvasSize:rd,storedSize:{height:150,width:150}},(0,Xr.c)([Xr.l],ad.prototype,"setCanvasElement",1),(0,Xr.c)([Xr.l],ad.prototype,"saveDimensions",1),(0,Xr.c)([Xr.l],ad.prototype,"resizeCanvas",2),(0,Xr.c)([Xr.l],ad.prototype,"disableCanvasClick",1),(0,Xr.c)([Xr.l],ad.prototype,"enableCanvasClick",1),(0,Xr.c)([Xr.l],ad.prototype,"setCanvasSize",2),(0,Xr.c)([Xr.l],ad.prototype,"dispose",2),(0,Xr.c)([Xr.f],ad.prototype,"isCanvasClickable",1),(0,Xr.c)([Xr.f],ad.prototype,"canvasSize",1),(0,Xr.c)([Xr.f],ad.prototype,"storedSize",1),(0,Xr.c)([Xr.f],ad.prototype,"sizeVector",1),(0,Xr.c)([Xr.f],ad.prototype,"sizeVectorMagnitude",1);var sd={type:null,identifier:null,isVisible:!1,error:""},ld=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.showActionModal=function(e){var t=e.type,i=e.identifier,r=e.error,o=e.handleConfirm,a=e.handleDismiss;n.resetHandlers(),n.state.isVisible=!0,n.state.identifier=i,n.state.type=t,n.state.error=r||"",n.handleConfirm=o,n.handleDismiss=a},this.hideModal=function(){n.state.isVisible=!1,n.state.type=null,n.state.error="",n.state.identifier=null,n.resetHandlers()},this.dispose=function(){n.state=null,n.configStore=null},this.resetHandlers=function(){n.handleConfirm=null,n.handleDismiss=null},this.configStore=t.configStore,this.state=(0,Xr.e)(sd)}return(0,jr.Z)(e,[{key:"showInfoModal",value:function(e){this.resetHandlers(),this.state.isVisible=!0,this.state.type="info",this.state.identifier=e,this.state.error=""}},{key:"showTextEditModal",value:function(){this.resetHandlers(),this.state.isVisible=!0,this.state.type="textEdit",this.state.identifier="inputText",this.state.error=""}},{key:"modalProps",get:function(){var e=this.state.isVisible,t=this.getModalLocale();if(t){var n=t.bodyLabel;return{headerLabel:t.headerLabel,bodyLabel:n,confirmLabel:t.buttonYes,dismissLabel:t.buttonNo,isVisible:e,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:!1}}},{key:"isVisible",get:function(){return this.state.isVisible}},{key:"type",get:function(){return this.state.type}},{key:"identifier",get:function(){return this.state.identifier}},{key:"positionOffset",get:function(){var e=this.configStore,t=e.isLayoutAdvanced,n=e.measurements,i=n.basicCanvasOffset,r=n.advancedUIToolControlBar,o=n.advancedUIToolbar,a=e.isOrderDefault,s=(r.width+o.width)*(a?1:-1);return t?{x:s/2,y:0}:{x:0,y:-i}}},{key:"getModalLocale",value:function(){var e=this.state,t=e.identifier,n=e.error,i=e.type,r=this.configStore.locale;if(!i||!t||"textEdit"===i)return null;if(i&&t&&r["".concat(i,"Modals")]&&r["".concat(i,"Modals")][t]){var o=r["".concat(i,"Modals")][t],a=o.body;a&&"object"===typeof n?Object.keys(n).forEach(():a&&(a=a.replace("${error}",n));var s=o.heading;if("error"===i||"warning"===i){var l={error:r.common.error,warning:r.common.warning};s="".concat("error"===i?l.error:l.warning).concat(o.headingDelimiter||""," ").concat(o.header||"")}return{bodyLabel:a,headerLabel:s,buttonYes:o.buttonYes,buttonNo:o.buttonNo}}return null}}]),e}();(0,Xr.c)([Xr.l],ld.prototype,"showActionModal",2),(0,Xr.c)([Xr.l],ld.prototype,"showInfoModal",1),(0,Xr.c)([Xr.l],ld.prototype,"showTextEditModal",1),(0,Xr.c)([Xr.l],ld.prototype,"hideModal",2),(0,Xr.c)([Xr.l],ld.prototype,"dispose",2),(0,Xr.c)([Xr.f],ld.prototype,"modalProps",1),(0,Xr.c)([Xr.f],ld.prototype,"isVisible",1),(0,Xr.c)([Xr.f],ld.prototype,"type",1),(0,Xr.c)([Xr.f],ld.prototype,"identifier",1),(0,Xr.c)([Xr.f],ld.prototype,"positionOffset",1);var ud=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.defaultScale=1,this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map((),this.state={position:{x:0,y:0},scaleIndex:-1},this.offset={x:0,y:0},this.in=function(){n.canZoomIn&&(n.state.scaleIndex+=1,n.scaleRender())},this.out=function(){if(n.canZoomOut){n.state.scaleIndex-=1;var e=n.checkOffset({x:0,y:0}),t=e.maxOffsetX,i=e.maxOffsetY;n.state.scaleIndex===n.defaultIndex&&(n.offset.y=i),n.state.scaleIndex===n.defaultIndex&&(n.offset.x=t),n.savePosition(),n.scaleRender()}},this.setOffset=function(e){var t=n.checkOffset(e),i=t.canDragX,r=t.canDragY;i&&(n.offset.x=e.x),r&&(n.offset.y=e.y),n.scaleRender()},this.editor=t}return(0,jr.Z)(e,[{key:"setInitialTransform",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,Xr.Za)(),i=this.editor.configStore.config.scaleImageToFit,r=this.editor.engineMediator.preview.transform;(0,Xr.m)((function(){var o=Math.abs(t||r.scale.x);e.setDefaultScale(i?o:Math.min(1*n,o)),e.setPosition(r.position)}))}},{key:"resetScale",value:,{key:"resetPosition",value:function(){var e=this.editor.canvasStore.canvas,t=e.width,n=e.height;this.setPosition({x:t/2,y:n/2})}},{key:"resetOffset",value:,{key:"setPosition",value:function(e){this.state.position.x=e.x,this.state.position.y=e.y}},{key:"savePosition",value:function(){this.setPosition(this.getPositionWithOffset()),this.offset={x:0,y:0}}},{key:"setDefaultScale",value:function(e){var t=this;if(1!==this.defaultScale){var n=this.SCALE_LEVELS.findIndex((function(e){return e===t.defaultScale}));-1!==n&&(this.SCALE_LEVELS=[].concat((0,Mr.Z)(this.SCALE_LEVELS.slice(0,n)),(0,Mr.Z)(this.SCALE_LEVELS.slice(n+1))))}var i=this.SCALE_LEVELS.findIndex((function(t){return t===e}));if(-1!==i)this.state.scaleIndex=i;else{var r=this.SCALE_LEVELS.findIndex((function(n,i){return(0===i||t.SCALE_LEVELS[i-1]<e)&&e<n}));-1!==r?(this.SCALE_LEVELS=[].concat((0,Mr.Z)(this.SCALE_LEVELS.slice(0,r)),[e],(0,Mr.Z)(this.SCALE_LEVELS.slice(r))),this.state.scaleIndex=r):(this.SCALE_LEVELS=[].concat((0,Mr.Z)(this.SCALE_LEVELS),[e]),this.state.scaleIndex=this.SCALE_LEVELS.length-1)}this.defaultScale=e}},{key:"setScaleToDefault",value:,{key:"checkOffset",value:function(e){var t=(0,Xr.Za)(),n=this.scaledSize,i=this.previewSize,r=this.editor.engineMediator.preview.initialTransform.position,o=this.getPositionWithOffset(e),a=(n.width-i.width)*t/2,s=(n.height-i.height)*t/2,l=r.x-o.x,u=r.y-o.y,c=Math.abs(l)-a,h=Math.abs(u)-s;return{canDragX:c<0,canDragY:h<0,maxOffsetX:l>0?-c:c,maxOffsetY:u>0?-h:h}}},{key:"calculateScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.previewSize,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaultScale,i=t.width,r=t.height,o=new Xr.Pa({x:i,y:r}),a=new Xr.Pa(Math.abs(o.x*Math.cos(e))+Math.abs(o.y*Math.sin(e)),Math.abs(o.x*Math.sin(e))+Math.abs(o.y*Math.cos(e))),s=o.subtract(a).divide(2).multiply(n).abs;return s.y>s.x?2*s.y/o.y+n:2*s.x/o.x+n}},{key:"defaultIndex",get:function(){var e=this;return this.SCALE_LEVELS.findIndex((function(t){return t===e.defaultScale}))}},{key:"getPositionWithOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.offset,t=this.position;return{x:t.x-e.x,y:t.y-e.y}}},{key:"scaleRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.editor.scale.getPositionWithOffset(),n=e?this.defaultScale:this.scale,i={x:n,y:n};this.editor.engineMediator.preview.container.setScale(i),this.editor.engineMediator.preview.container.setPosition(t),this.editor.engineMediator.preview.savePreviewTransform({scale:i,position:t,rotation:0}),e||this.editor.render()}},{key:"scale",get:function(){var e=this.state.scaleIndex;return-1!==e?this.SCALE_LEVELS[e]:this.defaultScale}},{key:"zoomLevel",get:function(){var e=(0,Xr.Za)();return(this.scale/e*100).toFixed(1)}},{key:"canDrag",get:,{key:"canZoomOut",get:function(){return this.editor.configStore.config.restrictZoomOutToDefault?this.state.scaleIndex>this.defaultIndex:0!==this.state.scaleIndex}},{key:"canZoomIn",get:function(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}},{key:"position",get:function(){return this.state.position}},{key:"scaledSize",get:function(){var e=this.state.scaleIndex,t=-1!==e?this.SCALE_LEVELS[e]:this.defaultScale,n=this.previewSize;return{width:n.width*t/this.defaultScale,height:n.height*t/this.defaultScale}}},{key:"previewSize",get:function(){return this.editor.getPreviewSize()}}]),e}();(0,Xr.c)([Xr.e],ud.prototype,"state",2),(0,Xr.c)([Xr.l],ud.prototype,"in",2),(0,Xr.c)([Xr.l],ud.prototype,"out",2),(0,Xr.c)([Xr.l],ud.prototype,"setInitialTransform",1),(0,Xr.c)([Xr.l],ud.prototype,"resetScale",1),(0,Xr.c)([Xr.l],ud.prototype,"resetPosition",1),(0,Xr.c)([Xr.l],ud.prototype,"setPosition",1),(0,Xr.c)([Xr.l],ud.prototype,"savePosition",1),(0,Xr.c)([Xr.l],ud.prototype,"setDefaultScale",1),(0,Xr.c)([Xr.l],ud.prototype,"setScaleToDefault",1),(0,Xr.c)([Xr.f],ud.prototype,"scale",1),(0,Xr.c)([Xr.f],ud.prototype,"zoomLevel",1),(0,Xr.c)([Xr.f],ud.prototype,"canDrag",1),(0,Xr.c)([Xr.f],ud.prototype,"canZoomOut",1),(0,Xr.c)([Xr.f],ud.prototype,"canZoomIn",1),(0,Xr.c)([Xr.f],ud.prototype,"position",1),(0,Xr.c)([Xr.f],ud.prototype,"scaledSize",1);var cd=[[0,0],[0,1],[1,0],[1,1]],hd=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]],dd=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Hr.Z)(this,e),this.considerRotation=!0,this.considerFlip=!0,this.store=n,this.m="center"===i?e.movePivotTo([.5,.5]):cd,this.considerRotation=r,this.considerFlip=o,this.configStore=t.configStore}return(0,jr.Z)(e,[{key:"position",get:function(){return this.store.position}},{key:"size",get:function(){return this.store.size}},{key:"rotation",get:function(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}},{key:"flipHorizontally",get:function(){return!!this.considerFlip&&this.store.isFlippedHorizontal}},{key:"flipVertically",get:,{key:"flipCenter",get:function(){return this.considerFlip?this.store.flipCenter:null}},{key:"handleOrigin",value:function(t,n,i){var r=e.getFlippedEdgeIndex(t,n,i);return{width:this.m[r][0]*this.size.width,height:this.m[r][1]*this.size.height}}},{key:"leftTop",get:function(){var t=this.position,n=this.flipHorizontally,i=this.flipVertically,r=this.handleOrigin(0,n,i);return e.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}},{key:"leftBottom",get:function(){var t=this.position,n=this.flipHorizontally,i=this.flipVertically,r=this.handleOrigin(1,n,i);return e.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}},{key:"rightTop",get:function(){var t=this.position,n=this.flipHorizontally,i=this.flipVertically,r=this.handleOrigin(2,n,i);return e.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}},{key:"rightBottom",get:function(){var t=this.position,n=this.flipHorizontally,i=this.flipVertically,r=this.handleOrigin(3,n,i);return e.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}},{key:"leftBottomHandle",get:function(){var t=this.position,n=this.flipHorizontally,i=this.flipVertically,r=this.handleOrigin(1,n,i);return r.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,e.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}},{key:"rightBottomHandle",get:function(){var t=this.position,n=this.flipHorizontally,i=this.flipVertically,r=this.handleOrigin(3,n,i);return r.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,e.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}},{key:"leftMid",get:function(){var e=new Xr.Pa(this.leftTop),t=new Xr.Pa(this.leftBottom);return e.add(t).divide(2)}},{key:"rightMid",get:function(){var e=new Xr.Pa(this.rightTop),t=new Xr.Pa(this.rightBottom);return e.add(t).divide(2)}}],[{key:"getFlippedEdgeIndex",value:function(e,t,n){return hd[(t?1:0)+(n?2:0)][e]}},{key:"movePivotTo",value:function(e){return cd.map(()}}]),e}(),fd=dd;fd.coordinatesWithRotation=function(e,t,n,i,r,o){var a=e.width,s=e.height,l=a*Math.cos(t)-s*Math.sin(t)+o.x,u=a*Math.sin(t)+s*Math.cos(t)+o.y;return n&&(l=2*r.x-l),i&&(u=2*r.y-u),new Xr.Pa({x:l,y:u}).rounded},(0,Xr.c)([Xr.f],fd.prototype,"position",1),(0,Xr.c)([Xr.f],fd.prototype,"size",1),(0,Xr.c)([Xr.f],fd.prototype,"rotation",1),(0,Xr.c)([Xr.f],fd.prototype,"flipHorizontally",1),(0,Xr.c)([Xr.f],fd.prototype,"flipVertically",1),(0,Xr.c)([Xr.f],fd.prototype,"flipCenter",1),(0,Xr.c)([Xr.f],fd.prototype,"leftTop",1),(0,Xr.c)([Xr.f],fd.prototype,"leftBottom",1),(0,Xr.c)([Xr.f],fd.prototype,"rightTop",1),(0,Xr.c)([Xr.f],fd.prototype,"rightBottom",1),(0,Xr.c)([Xr.f],fd.prototype,"leftBottomHandle",1),(0,Xr.c)([Xr.f],fd.prototype,"rightBottomHandle",1),(0,Xr.c)([Xr.f],fd.prototype,"leftMid",1),(0,Xr.c)([Xr.f],fd.prototype,"rightMid",1);var pd=function(){function e(t,n){var i=this;(0,Hr.Z)(this,e),this.minCropSize=0,this.id="",this.dispose=function(){i.state=null,i.defaults=null,i.configStore=null},this.state={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:!1,flipVertically:!1,cropState:Xr.e.map({})},this.configStore=t.configStore,this.id=(0,Xr.Na)(),this.minCropSize=this.configStore.measurements.crop.minSize,this.defaults=n}return(0,jr.Z)(e,[{key:"changeIdentifier",value:function(e){this.state.identifier=e,this.state.cropState.get("".concat(this.id,"-").concat(e))||this.state.cropState.set("".concat(this.id,"-").concat(e),(0,Ur.Z)({},Ih))}},{key:"changeRatio",value:function(e){var t=this.state.cropState.get("".concat(this.id,"-").concat(this.identifier));t&&this.state.cropState.set("".concat(this.id,"-").concat(this.identifier),(0,Ur.Z)((0,Ur.Z)({},t),{},{ratio:e}))}},{key:"changeSize",value:function(e){var t=this.state.cropState.get("".concat(this.id,"-").concat(this.identifier));t&&(e.width&&e.width>0&&(t.size.width=Math.round(e.width)),e.height&&e.height>0&&(t.size.height=Math.round(e.height)),this.state.cropState.set("".concat(this.id,"-").concat(this.identifier),t))}},{key:"changeHeight",value:function(e){var t=this.state.cropState.get("".concat(this.id,"-").concat(this.identifier));t&&e&&(t.size.height=Math.round(e),this.state.cropState.set("".concat(this.id,"-").concat(this.identifier),t))}},{key:"changeWidth",value:function(e){var t=this.state.cropState.get("".concat(this.id,"-").concat(this.identifier));t&&e&&(t.size.width=Math.round(e),this.state.cropState.set("".concat(this.id,"-").concat(this.identifier),t))}},{key:"changePositionX",value:function(e,t){var n=this.state.cropState.get("".concat(this.id,"-").concat(this.identifier));return!!(n&&e<=t-this.minCropSize&&e>=0)&&(n.position.x=Math.round(e),this.state.cropState.set("".concat(this.id,"-").concat(this.identifier),n),!0)}},{key:"changePositionY",value:function(e,t){var n=this.state.cropState.get("".concat(this.id,"-").concat(this.identifier));return!!(n&&e<=t-this.minCropSize&&e>=0)&&(n.position.y=Math.round(e),this.state.cropState.set("".concat(this.id,"-").concat(this.identifier),n),!0)}},{key:"changePosition",value:function(e,t){var n=this.state.cropState.get("".concat(this.id,"-").concat(this.identifier));return!!(n&&e.x<=t.width-this.minCropSize&&e.x>=0&&e.y<=t.height-this.minCropSize&&e.y>=0)&&(n.position.x=Math.round(e.x),n.position.y=Math.round(e.y),this.state.cropState.set("".concat(this.id,"-").concat(this.identifier),n),!0)}},{key:"changeLockResolution",value:function(e){var t=this.state.cropState.get("".concat(this.id,"-").concat(this.identifier));t&&(t.lockResolution=void 0!==e?e:!t.lockResolution,this.state.cropState.set("".concat(this.id,"-").concat(this.identifier),t))}},{key:"changeForceDimensions",value:function(e){var t=this.state.cropState.get("".concat(this.id,"-").concat(this.identifier));t&&(t.forceDimensions=e,this.state.cropState.set("".concat(this.id,"-").concat(this.identifier),t))}},{key:"clearState",value:function(){var e=this;this.state.cropState.forEach((function(t,n){return n.startsWith(e.id)&&e.state.cropState.delete(n)}))}},{key:"setRotation",value:function(e){this.state.rotationInDegrees=e}},{key:"resetRotation",value:function(){this.state.rotationInDegrees=0}},{key:"resetOutputRotation",value:,{key:"resetFlip",value:,{key:"updateFlip",value:,{key:"setOutputRotation",value:,{key:"flipHorizontally",value:function(){this.state.flipHorizontally=!this.state.flipHorizontally}},{key:"flipVertically",value:,{key:"flipCenter",get:function(){var e=this.defaults.maxCropMaskSize,t=e.width,n=e.height;return new Xr.Pa(t/2,n/2)}},{key:"isFlippedHorizontal",get:function(){return this.state.flipHorizontally}},{key:"isFlippedVertical",get:function(){return this.state.flipVertically}},{key:"identifier",get:function(){return this.state.identifier}},{key:"height",get:function(){return this.selectedCrop?this.selectedCrop.size.height:Ih.size.height}},{key:"width",get:function(){return this.selectedCrop?this.selectedCrop.size.width:Ih.size.width}},{key:"position",get:function(){return this.selectedCrop?this.selectedCrop.position:Ih.position}},{key:"ratio",get:function(){return this.selectedCrop?this.selectedCrop.ratio:Ih.ratio}},{key:"size",get:function(){return this.selectedCrop?this.selectedCrop.size:Ih.size}},{key:"x",get:function(){return this.selectedCrop?this.selectedCrop.position.x:Ih.position.x}},{key:"y",get:,{key:"lockResolution",get:function(){return this.selectedCrop?this.selectedCrop.lockResolution:Ih.lockResolution}},{key:"forceDimensions",get:function(){return this.selectedCrop?this.selectedCrop.forceDimensions:Ih.forceDimensions}},{key:"selectedCrop",get:function(){return this.state.cropState.get("".concat(this.id,"-").concat(this.identifier))}},{key:"rotationInDegrees",get:function(){return this.state.rotationInDegrees}},{key:"outputRotation",get:function(){return this.state.outputRotation}}]),e}();(0,Xr.c)([Xr.e],pd.prototype,"state",2),(0,Xr.c)([Xr.l],pd.prototype,"changeIdentifier",1),(0,Xr.c)([Xr.l],pd.prototype,"changeRatio",1),(0,Xr.c)([Xr.l],pd.prototype,"changeSize",1),(0,Xr.c)([Xr.l],pd.prototype,"changeHeight",1),(0,Xr.c)([Xr.l],pd.prototype,"changeWidth",1),(0,Xr.c)([Xr.l],pd.prototype,"changePositionX",1),(0,Xr.c)([Xr.l],pd.prototype,"changePositionY",1),(0,Xr.c)([Xr.l],pd.prototype,"changePosition",1),(0,Xr.c)([Xr.l],pd.prototype,"changeLockResolution",1),(0,Xr.c)([Xr.l],pd.prototype,"changeForceDimensions",1),(0,Xr.c)([Xr.l],pd.prototype,"clearState",1),(0,Xr.c)([Xr.l],pd.prototype,"setRotation",1),(0,Xr.c)([Xr.l],pd.prototype,"resetRotation",1),(0,Xr.c)([Xr.l],pd.prototype,"resetOutputRotation",1),(0,Xr.c)([Xr.l],pd.prototype,"resetFlip",1),(0,Xr.c)([Xr.l],pd.prototype,"updateFlip",1),(0,Xr.c)([Xr.l],pd.prototype,"setOutputRotation",1),(0,Xr.c)([Xr.l],pd.prototype,"flipHorizontally",1),(0,Xr.c)([Xr.l],pd.prototype,"flipVertically",1),(0,Xr.c)([Xr.l],pd.prototype,"dispose",2),(0,Xr.c)([Xr.f],pd.prototype,"flipCenter",1),(0,Xr.c)([Xr.f],pd.prototype,"isFlippedHorizontal",1),(0,Xr.c)([Xr.f],pd.prototype,"isFlippedVertical",1),(0,Xr.c)([Xr.f],pd.prototype,"identifier",1),(0,Xr.c)([Xr.f],pd.prototype,"height",1),(0,Xr.c)([Xr.f],pd.prototype,"width",1),(0,Xr.c)([Xr.f],pd.prototype,"position",1),(0,Xr.c)([Xr.f],pd.prototype,"ratio",1),(0,Xr.c)([Xr.f],pd.prototype,"size",1),(0,Xr.c)([Xr.f],pd.prototype,"x",1),(0,Xr.c)([Xr.f],pd.prototype,"y",1),(0,Xr.c)([Xr.f],pd.prototype,"lockResolution",1),(0,Xr.c)([Xr.f],pd.prototype,"forceDimensions",1),(0,Xr.c)([Xr.f],pd.prototype,"selectedCrop",1),(0,Xr.c)([Xr.f],pd.prototype,"rotationInDegrees",1),(0,Xr.c)([Xr.f],pd.prototype,"outputRotation",1);var gd=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.transforms={output:JSON.stringify(Xr.ib.IDENTITY),preview:JSON.stringify(Xr.ib.IDENTITY)},this.setFrameOpacity=function(e){n.frameOpacity=e,n.entered&&"identity"!==n.editor.frameToolStore.identifier&&n.editor.frameToolStore.changeOpacity(0)},this.setOverlayOpacity=function(e){n.overlayOpacity=e,n.entered&&"identity"!==n.editor.overlayToolStore.identifier&&n.editor.overlayToolStore.changeOpacity(0)},this.editor=t,this.overlayOpacity=0,this.frameOpacity=0,this.entered=!1}return(0,jr.Z)(e,[{key:"onLeave",value:function(){var e=this.transformToolStore.rotateFlipState,t=e.flipHorizontally,n=e.flipVertically,i=e.rotation,r=e.outputRotation;this.entered=!1,"identity"!==this.editor.overlayToolStore.identifier&&this.editor.overlayToolStore.changeOpacity(this.overlayOpacity),"identity"!==this.editor.frameToolStore.identifier&&this.editor.frameToolStore.changeOpacity(this.frameOpacity),this.editor.engine.setWatermarkOpacity(1);var o=this.editor.previewToWorld(new Xr.Pa(this.transformToolStore.leftTopRespectFlip).add(new Xr.Pa(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new Xr.Pa(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),!0),a=this.engineMediator.preview.container,s=this.editor.outputContainer;s.setResolution((0,Xr.p)(this.transformToolStore.localOutputImageSize)),s.setData({flipVertically:n,flipHorizontally:t});var l=a.getScale();this.editor.overlayToolStore.correctOverlayFlip(),this.saveTransforms();var u=1;if(this.transformToolStore.lockResolution){var c=this.transformToolStore,h=c.cropMaskSize,d=c.defaultImageSize,f=this.transformToolStore.maxCropMaskSize;u={height:h.height*d.height/f.height,width:h.width*d.width/f.width}.width/this.transformToolStore.localOutputImageSize.width}var p=u/(Math.abs(l.x)/this.transformToolStore.defaultScale),g={x:p,y:p},m=-(i-r);s.setTransform({scale:g,position:o,rotation:m}),this.editor.engineMediator.preview.updateTransform(0,!1),this.editor.scale.setInitialTransform(),this.editor.spriteStore.updateCanvasControls(),this.editor.focusToolStore.updateCanvasControls()}},{key:"resetTransforms",value:function(e){this.transforms=e}},{key:"onEnter",value:function(){this.entered=!0,"identity"!==this.editor.overlayToolStore.identifier&&(this.overlayOpacity=this.editor.overlayToolStore.opacity,this.editor.overlayToolStore.changeOpacity(0)),"identity"!==this.editor.frameToolStore.identifier&&(this.frameOpacity=this.editor.frameToolStore.opacity,this.editor.frameToolStore.changeOpacity(0)),this.editor.engine.setWatermarkOpacity(0),this.editor.scale.setScaleToDefault();var e=this.engineMediator.preview.container,t=this.editor.outputContainer,n=JSON.parse(this.transforms.preview);t.setResolution((0,Xr.p)(this.transformToolStore.defaultImageSize)),e.setTransform(n),t.setTransform(JSON.parse(this.transforms.output));var i=n.scale;t.setData({flipVertically:!1,flipHorizontally:!1}),this.transformToolStore.transformStore.updateFlip({flipVertically:i.y<0,flipHorizontally:i.x<0}),this.engineMediator.preview.savePreviewTransform(n);var r=this.engineMediator.preview.calculateTransform().scale;this.editor.scale.setInitialTransform(r.x)}},{key:"rotateOutputContainer",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.editor.engineMediator.image.container.getBounds(),r=i.width,o=i.height,a=(0,Xr.hb)(e)?{width:o,height:r}:{width:r,height:o};this.editor.outputContainer.rotate(e,a),this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());var s=this.transformToolStore.rotateFlipState.rotation;this.engineMediator.preview.updateTransform(s),(0,Xr.m)((function(){t.editor.scale.setInitialTransform();var e=t.getScaleWithFlip(s);t.engineMediator.preview.container.setScale(e),t.transformToolStore.setCropDefaults(!0),t.transformToolStore.updateCropMask()})),n&&this.editor.render()}},{key:"applyPreviewTransform",value:function(){var e=this.transformToolStore.rotateFlipState,t=e.rotation,n=e.flipHorizontally,i=e.flipVertically,r=this.editor.scale.getPositionWithOffset(),o=this.getScaleWithFlip(),a=t;n&&(a=(0,Xr.pb)(a)),i&&(a=(0,Xr.pb)(a));var s={position:r,rotation:a,scale:o};this.engineMediator.preview.savePreviewTransform(s),this.engineMediator.preview.container.setTransform(s)}},{key:"getScaleWithFlip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.transformToolStore.rotateFlipState.rotation,t=this.transformToolStore.rotateFlipState,n=t.flipHorizontally,i=t.flipVertically,r=n?-1:1,o=i?-1:1,a=this.editor.scale.calculateScale(e);return{x:a*r,y:a*o}}},{key:"saveTransforms",value:function(){var e=JSON.stringify(this.engineMediator.preview.container.getTransform()),t=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:e,output:t}}},{key:"saveTransformsBasedOnFlip",value:function(){var e=this.engineMediator.preview.container.getTransform(),t=e.scale,n=this.editor.outputContainer.getData(),i=n.flipVertically,r=n.flipHorizontally,o=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify((0,Ur.Z)((0,Ur.Z)({},e),{},{scale:{x:r?-t.x:t.x,y:i?-t.y:t.y}})),output:o}}},{key:"engineMediator",get:function(){return this.editor.engineMediator}},{key:"transformToolStore",get:function(){return this.editor.transformToolStore}}]),e}(),md=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.store=t,this.initialState={},this.state={},this.dispose=return(0,jr.Z)(e,[{key:"init",value:function(){this.initialState=this.store.serializableState,this.state=(0,Ur.Z)({},this.initialState)}},{key:"trackChanges",value:,{key:"isEqual",value:function(){return(0,Xr.Va.default)(this.state,this.initialState)}},{key:"hasChanges",value:]),e}(),yd="identity",vd=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1},this.defaultAngle=0,this.dragMode=Xr.e.box(!1),this.minCropSize=0,this.transformHistory=new md(this),this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1},this.localOutputSize={width:0,height:0},this.checkIfTransformThumbnailExits=function(e){if(!e.trim())return!1;var t=n.editor.configStore.config.assetBaseUrl;if("/"!==t[t.length-1]&&(t+="/"),"".concat(t,"transform")===e)return!1;var i=new Image;try{return i.src=e,!0}catch(o){return!1}},this.reset=function(){n.transformStore.resetRotation(),n.transformStore.resetOutputRotation(),n.transformStore.resetFlip(),n.resetCrop(),n.editor.spriteStore.correctTextFlip(),n.editor.overlayToolStore.correctOverlayFlip(),n.setDefaultAngle(0),0!==n.editor.outputContainer.getRotation()&&n.engineMediator.output.applyNewImageTransform(),n.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),n.engineMediator.preview.updateTransform(),n.editor.scale.setInitialTransform(),n.setCropDefaults(),n.applyInitialCrop(),n.editor.render(),n.trackChanges()},this.changeLocalOutputSize=function(e){n.localOutputSize.height=Math.round(e.height),n.localOutputSize.width=Math.round(e.width),n.editor.configStore.events.onCropDimensionsChanged({width:Math.round(e.width),height:Math.round(e.height)})},this.changeDefaultScale=function(e){n.defaults.scale=e},this.changeLocalOutputHeight=function(e){n.localOutputSize.height=Math.round(e)},this.changeLocalOutputWidth=this.changeLockResolution=this.rotateClockwise=function(){var e=n.editor.outputContainer.getRotation(),t=n.isFlippedVertical?Xr.fb:Xr.gb;n.rotateOutputContainer(t(e))},this.rotateAntiClockwise=function(){var e=n.editor.outputContainer.getRotation(),t=n.isFlippedVertical?Xr.gb:Xr.fb;n.rotateOutputContainer(t(e))},this.flipHorizontally=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.transformStore.flipHorizontally(),n.editor.spriteStore.reverseTextHorizontally(n.transformStore.isFlippedHorizontal),n.transformRender(e),e&&n.trackChanges()},this.flipVertically=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.transformStore.flipVertically(),n.editor.spriteStore.reverseTextVertically(n.transformStore.isFlippedVertical),n.transformRender(e),e&&n.trackChanges()},this.applyDefaultCrop=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("identity"===n.identifier){var t=n.getMatchingItem(),i=t.identifier;n.changeIdentifier(i,e)}},this.updateCropMask=this.onLeftTop=function(e){var t=e.x,i=e.y,r=n.getRatio(),o=n.rightBottom,a=n.minCropMaskSize,s=n.maxCropMaskSize,l=Math.min(Math.max(0,t),o.x-a.width),u=Math.min(Math.max(0,i),o.y-a.height),c=o.x-l,h=o.y-u,d={width:Math.max(n.minCropSize,Math.min(c,s.width-l)),height:Math.max(n.minCropSize,Math.min(h,s.height-u))};if("*"===r)n.changePosition({x:l,y:u})&&n.changeCropAndOutputSize(d);else{var f=n.proportionalSize(r,d),p=new Xr.Pa(o).subtract({x:f.width,y:f.height});n.changePosition(p)&&n.changeCropAndOutputSize(f,r)}},this.onLeftBottom=function(e){var t=e.x,i=e.y,r=n.getRatio(),o=n.rightTop,a=n.minCropMaskSize,s=n.maxCropMaskSize,l=Math.min(Math.max(0,t),o.x-a.width),u=Math.max(0,i,o.y+a.height),c=o.x-l,h=u-o.y,d={width:Math.max(1,Math.min(c,s.width-l)),height:Math.max(1,Math.min(h,s.height-o.y))};if("*"===r)n.changePositionX(l)&&n.changeCropAndOutputSize(d);else{var f=n.proportionalSize(r,d);n.changePositionX(o.x-f.width)&&n.changeCropAndOutputSize(f,r)}},this.onRightTop=function(e){var t=e.x,i=e.y,r=n.getRatio(),o=n.leftBottom,a=n.minCropMaskSize,s=n.maxCropMaskSize,l=Math.max(0,t,o.x+a.width),u=Math.min(Math.max(0,i),o.y-a.height),c=l-o.x,h=o.y-u,d={width:Math.max(1,Math.min(c,s.width-o.x)),height:Math.max(1,Math.min(h,s.height-u))};if("*"===r)n.changePositionY(u)&&n.changeCropAndOutputSize(d);else{var f=n.proportionalSize(r,d);n.changePositionY(o.y-f.height)&&n.changeCropAndOutputSize(f,r)}},this.onRightBottom=function(e){var t=e.x,i=e.y,r=n.getRatio(),o=n.leftTop,a=n.minCropMaskSize,s=n.maxCropMaskSize,l=Math.max(0,t,o.x+a.width),u=Math.max(0,i,o.y+a.height),c=l-o.x,h=u-o.y,d={width:Math.max(1,Math.min(c,s.width-o.x)),height:Math.max(1,Math.min(h,s.height-o.y))};if("*"===r)n.changeCropAndOutputSize(d);else{var f=n.proportionalSize(r,d);n.changeCropAndOutputSize(f,r)}},this.onPixelWidth=function(t){var i=JSON.stringify((0,Xr.p)(n.localOutputSize)),r=n.entityManager.items.find((function(e){return e.identifier===n.identifier})),o=n.defaults.imageSize;if(r&&r.ratio){var a=t,s=n.localOutputSize.height,l=r.ratio;if("*"===l&&n.lockResolution&&(l=n.localOutputSize.width/n.localOutputSize.height),"*"!==l||n.lockResolution){var u=e.placeCropMask(l,o);s=(a=Math.max(Math.min(a,u.width),n.minCropSize))/l,n.changeLocalOutputSize({height:s,width:a})}else a=Math.max(Math.min(t,o.width),n.minCropSize),n.changeLocalOutputWidth(a),n.editor.configStore.events.onCropDimensionsChanged({width:Math.round(a),height:Math.round(s)});return n.lockResolution||n.updatePreviewSizeWRTImageSize(),n.checkAndAddSnapshot(JSON.parse(i)),Math.round(a)}return t},this.onPixelHeight=function(t){var i=JSON.stringify((0,Xr.p)(n.localOutputSize)),r=n.entityManager.items.find((function(e){return e.identifier===n.identifier})),o=n.defaults.imageSize;if(r&&r.ratio){var a=t,s=n.localOutputSize.width,l=r.ratio;if("*"===l&&n.lockResolution&&(l=n.localOutputSize.width/n.localOutputSize.height),"*"!==l||n.lockResolution){var u=e.placeCropMask(l,o);s=(a=Math.max(Math.min(a,u.height),n.minCropSize))*l,n.changeLocalOutputSize({height:a,width:s})}else a=Math.max(Math.min(t,o.height),n.minCropSize),n.changeLocalOutputHeight(a),n.editor.configStore.events.onCropDimensionsChanged({width:Math.round(s),height:Math.round(a)});return n.lockResolution||n.updatePreviewSizeWRTImageSize(),n.checkAndAddSnapshot(JSON.parse(i)),Math.round(a)}return t},this.dispose=function(){n.transformStore&&(n.transformStore.dispose(),n.transformStore=null),n.transformHistory&&(n.transformHistory.dispose(),n.transformHistory=null),n.editor=null,n.dragMode=null,n.selectedCategory=null,n.defaults=null,n.localOutputSize=null,n.rect=null,n.transformations=null,n.entityManager=null},this.setFrameOpacity=function(e){n.transformations.setFrameOpacity(e)},this.setOverlayOpacity=function(e){n.transformations.setOverlayOpacity(e)},this.closestRatioReducer=function(e){return function(t,n){return null===n||Math.abs(e-t.ratio)<Math.abs(e-n.ratio)?-1:1}},this.closestDimensionsReducer=function(e){return function(t,n){if(null===n)return-1;var i=Math.abs(t.dimensions.x/t.dimensions.y),r=Math.abs(n.dimensions.x/n.dimensions.y);return i===r?t.dimensions.x*t.dimensions.y>n.dimensions.x*n.dimensions.y?-1:1:Math.abs(e-i)<Math.abs(e-r)?-1:1}},this.getMatchingItem=function(){var e=n.entityManager.items.findIndex((function(e){return"imgly_transform_common_custom"===e.identifier}));if(-1!==e)return n.entityManager.items[e];var t=n.entityManager.items.findIndex((function(e){return"*"===e.ratio}));if(-1!==t)return n.entityManager.items[t];var i=(0,Xr.p)(n.editor.outputContainer.getResolution()),r=Math.abs(i.width/i.height),o=n.entityManager.items.filter(().sort(n.closestRatioReducer(r)),a=(0,Lr.Z)(o,1)[0],s=n.entityManager.items.filter(().sort(n.closestDimensionsReducer(r)),l=(0,Lr.Z)(s,1)[0];if(!a||!l||!a.ratio&&!l.dimensions)return n.entityManager.items[0];if(!l||!l.dimensions)return a;if(!a||!a.ratio)return l;var u=Math.abs(l.dimensions.x/l.dimensions.y);return u===a.ratio||Math.abs(r-a.ratio)<Math.abs(r-u)?a:l},this.getTransform=function(e){var t=n.entityManager.items.find((function(t){return t.identifier===e}));return t||(t=n.getMatchingItem()),t},this.editor=t,this.selectedCategory=yd,this.transformStore=new pd(t,this.defaults),this.transformations=new gd(t);var i=this.config,r=(i.enableRotation,i.enableFlip,(0,Nr.Z)(i,io)),o=this.editor.assetProvider.getAssets("transform");this.entityManager=new Uc(o,(0,Ur.Z)((0,Ur.Z)({},r),{},{locale:(0,Ur.Z)((0,Ur.Z)({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("transform")})),this.rect=new fd(this.editor,this.transformStore,"topLeft",!1,!1),this.rectForUi=new fd(this.editor,this.transformStore,"topLeft",!1,!0),this.minCropSize=this.editor.configStore.measurements.crop.minSize}return(0,jr.Z)(e,[{key:"changeIdentifier",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.transformStore.changeIdentifier(e);var n=this.getCropMask(e,this.defaults.imageSize);n&&(this.transformStore.changeRatio(n.ratio),this.changeLocalOutputSize(n),this.updatePreviewSizeWRTImageSize(),void 0!==n.yChanged&&this.updateInitialCropMaskPosition(n.yChanged),n.dimensions&&this.changeLocalOutputSize({width:n.dimensions.x,height:n.dimensions.y}),t&&this.trackChanges())}},{key:"setDragMode",value:function(e){this.dragMode.set(e)}},{key:"getCropMask",value:function(t,n){var i=this.getTransform(t);if(i){var r=i.ratio,o=i.forceDimensions,a=i.lockDimensions,s=i.dimensions,l=void 0===s?null:s;if(o&&this.transformStore.changeForceDimensions(o),a&&this.transformStore.changeLockResolution(a),r)return"*"===r?(this.changePosition({x:0,y:0}),(0,Ur.Z)((0,Ur.Z)({},n),{},{yChanged:void 0,ratio:"*",dimensions:l})):(0,Ur.Z)((0,Ur.Z)({},e.placeCropMask(i.ratio,n)),{},{ratio:i.ratio,dimensions:l});var u=i.dimensions,c=u.x,h=u.y;return(0,Ur.Z)((0,Ur.Z)({},e.placeCropMask(c/h,n)),{},{ratio:null,dimensions:l})}return null}},{key:"setCropDefaults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.editor.outputContainer.getResolution();this.setDefaultImageSize(t);var n=this.editor.getPreviewSize(),i=this.editor.engineMediator.preview.previewTransformWithoutDpr.position;this.setMaxCropSize(n),this.setDefaultCropPosition({x:i.x-n.width/2,y:i.y-n.height/2}),this.changeDefaultScale(this.editor.scale.defaultScale),e||(this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition,this.unRotatedDefaults.scale=this.defaultScale)}},{key:"setDefaultImageSize",value:function(e){this.defaults.imageSize=(0,Ur.Z)({},(0,Xr.p)(e)),this.lockResolution||(this.localOutputSize=(0,Ur.Z)({},(0,Xr.p)(e)))}},{key:"setMaxCropSize",value:function(e){this.defaults.maxCropMaskSize.height=e.height,this.defaults.maxCropMaskSize.width=e.width}},{key:"setDefaultCropPosition",value:,{key:"resetCrop",value:,{key:"toggleCategorySelection",value:function(e){this.selectedCategory=this.selectedCategory===e?yd:e}},{key:"pureReset",value:function(){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();var e=JSON.stringify(this.engineMediator.preview.container.getTransform()),t=JSON.stringify(this.editor.outputContainer.getTransform());this.transformations.resetTransforms({preview:e,output:t})}},{key:"changePosition",value:,{key:"changePositionX",value:function(e){return this.transformStore.changePositionX(e,this.defaults.maxCropMaskSize.width)}},{key:"changePositionY",value:function(e){return this.transformStore.changePositionY(e,this.defaults.maxCropMaskSize.height)}},{key:"changeCropAndOutputSize",value:function(e,t){var n=e.width,i=e.height,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.transformStore.changeWidth(n),this.transformStore.changeHeight(i),!this.lockResolution){var o=this.defaults.maxCropMaskSize,a=o.height,s=o.width,l=this.defaults.imageSize,u=l.height,c=l.width,h=u/a*i,d=c/s*n;t&&(h=d/t),r&&this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(d),height:Math.round(h)}),i>=this.minCropSize&&this.changeLocalOutputHeight(h),n>=this.minCropSize&&this.changeLocalOutputWidth(d)}}},{key:"transformRender",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.transformations.applyPreviewTransform(),e&&this.editor.render()}},{key:"addSnapshot",value:function(){this.transformHistory.isEqual()||this.editor.addSnapshot((0,Br.Z)({},"transform",this.serializableState),"edit","Transform edit")}},{key:"trackChanges",value:function(){this.transformHistory.trackChanges()}},{key:"serializableState",get:function(){var e=this.rotateFlipState,t=e.flipHorizontally,n=e.flipVertically,i=this.identifier,r=this.rotationInDegrees,o=(0,Xr.bb)(r),a=(0,Xr.eb)((0,Xr.cb)(this.editor.engineMediator.output.container.getRotation())+r),s=this.convertUIToOperationOptions(o,a);return{flipHorizontally:t,flipVertically:n,rotation:o,start:s.start,end:s.end,identifier:i,outputRotation:a}}},{key:"getStartEndForOperation",value:function(e){var t=this.leftTop,n=this.rightBottom,i=this.maxCropMaskSize,r=t.y,o=t.x,a=n.x,s=n.y;switch(e){case 270:return{leftTop:{x:i.height-s,y:o},rightBottom:{x:i.height-r,y:a}};case 180:return{leftTop:{x:i.width-a,y:i.height-s},rightBottom:{x:i.width-o,y:i.height-r}};case 90:return{leftTop:{x:r,y:i.width-a},rightBottom:{x:s,y:i.width-o}};default:return{leftTop:{x:o,y:r},rightBottom:{x:a,y:s}}}}},{key:"getStartEndForUI",value:function(e,t,n){var i=this.maxCropMaskSize,r=t.y,o=t.x,a=n.x,s=n.y;switch(e){case 90:return{leftTop:{x:i.width-s,y:o},rightBottom:{x:i.width-r,y:a}};case 180:return{leftTop:{x:i.width-a,y:i.height-s},rightBottom:{x:i.width-o,y:i.height-r}};case 270:return{leftTop:{x:r,y:i.height-a},rightBottom:{x:s,y:i.height-o}};default:return{leftTop:{x:o,y:r},rightBottom:{x:a,y:s}}}}},{key:"convertOperationOptionsToUI",value:function(e){var t=e.start,n=e.end,i=e.rotation,r=e.outputRotation,o=90===r||270===r,a=o?Xr.Pa.fromSize(this.defaultImageSize).swapped:Xr.Pa.fromSize(this.defaultImageSize),s=Math.cos(i),l=Math.sin(i),u=this.calculateScale(i),c=new Xr.Pa(Math.min(t.x,n.x),Math.min(t.y,n.y)),h=new Xr.Pa(Math.max(t.x,n.x),Math.max(t.y,n.y)).subtract(c).divide(2),d=c.add(h).multiply(a).subtract(a.multiply(.5)),f=new Xr.Pa(d.x*s-d.y*l,d.x*l+d.y*s).multiply(u),p=a.multiply(.5).add(f).divide(a),g=p.subtract(h.multiply(u)),m=p.add(h.multiply(u)),y=o?Xr.Pa.fromSize(this.maxCropMaskSize).swapped:Xr.Pa.fromSize(this.maxCropMaskSize),v=g.multiply(y),_=m.multiply(y),b=this.getStartEndForUI(r,v,_),x=b.leftTop,k=b.rightBottom;return{start:new Xr.Pa(x),end:new Xr.Pa(k)}}},{key:"convertUIToOperationOptions",value:function(e,t){var n=90===t||270===t,i=n?Xr.Pa.fromSize(this.defaultImageSize).swapped:Xr.Pa.fromSize(this.defaultImageSize),r=n?Xr.Pa.fromSize(this.maxCropMaskSize).swapped:Xr.Pa.fromSize(this.maxCropMaskSize),o=Math.cos(-e),a=Math.sin(-e),s=this.calculateScale(e,n),l=this.getStartEndForOperation(t),u=l.leftTop,c=l.rightBottom,h=new Xr.Pa(u).divide(r),d=new Xr.Pa(c).divide(r).subtract(h).divide(2),f=h.add(d).multiply(i).subtract(i.multiply(.5)),p=new Xr.Pa(f.x*o-f.y*a,f.x*a+f.y*o).divide(s),g=i.multiply(.5).add(p).divide(i);return{start:g.subtract(d.divide(s)),end:g.add(d.divide(s))}}},{key:"calculateScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?Xr.Pa.fromSize(this.defaultImageSize).swapped:Xr.Pa.fromSize(this.defaultImageSize),i=new Xr.Pa(Math.abs(n.x*Math.cos(e))+Math.abs(n.y*Math.sin(e)),Math.abs(n.x*Math.sin(e))+Math.abs(n.y*Math.cos(e))),r=n.subtract(i.clone()).divide(2).abs;return r.y>r.x?2*r.y/n.y+1:2*r.x/n.x+1}},{key:"updateStateFromSerialization",value:function(e){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.setDefaultAngle(0),0!==this.editor.outputContainer.getRotation()&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();var t=Math.round((0,Xr.cb)(e.rotation));if(this.transformStore.setRotation(t>180?t-360:t),this.transformations.rotateOutputContainer((0,Xr.bb)((0,Xr.eb)(e.outputRotation||0))),e.identifier&&this.transformStore.changeIdentifier(e.identifier),e.start&&e.end){0!==e.end.x&&0!==e.end.y||(e.end.x=1,e.end.y=1);var n=this.convertOperationOptionsToUI({start:new Xr.Pa(e.start),end:new Xr.Pa(e.end),rotation:e.rotation,outputRotation:e.outputRotation}),i=n.start,r=n.end;this.changePositionX(i.x),this.changePositionY(i.y);var o=r.x-i.x,a=r.y-i.y;this.transformStore.changeSize({width:o,height:a});var s=this.defaults,l=s.maxCropMaskSize,u=s.imageSize,c={height:a*u.height/l.height,width:o*u.width/l.width};this.changeLocalOutputSize(c)}e.flipHorizontally&&this.flipHorizontally(!1),e.flipVertically&&this.flipVertically(!1),this.editor.overlayToolStore.correctOverlayFlip()}},{key:"setDefaultAngle",value:function(e){this.defaultAngle=e}},{key:"updateCanvasControls",value:function(e){var t=(0,Xr.p)(this.cropMaskPosition),n=(0,Xr.p)(this.cropMaskSize),i=(0,Xr.p)(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:i.height*n.height/e.height,width:i.width*n.width/e.width},void 0,!1),this.changePosition({y:i.height*t.y/e.height,x:i.width*t.x/e.width})}},{key:"onLeave",value:function(){this.transformations.onLeave()}},{key:"onEnter",value:function(){this.transformations.onEnter(),this.transformHistory.init()}},{key:"saveTransforms",value:function(){this.transformations.saveTransforms()}},{key:"saveTransformsBasedOnFlip",value:function(){this.transformations.saveTransformsBasedOnFlip()}},{key:"setRotation",value:,{key:"rotateOutputContainer",value:function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var n,i=arguments;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],this.setDragMode(!0),this.transformations.rotateOutputContainer(t,n),e.next=5,this.editor.wait();case 5:this.setDragMode(!1);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"applyInitialCrop",value:function(){var e=this.getMatchingItem().identifier;this.changeIdentifier(e,!1)}},{key:"clickableCanvas",value:function(e){this.editor.clickableCanvas(e)}},{key:"proportionalSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaults.maxCropMaskSize,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.minCropSize,r=t.height*e,o=t.height;return(r>n.width||r<i||o<i)&&(r=t.width,o=t.width/e),{width:Math.round(r),height:Math.round(o)}}},{key:"checkAndAddSnapshot",value:function(e){var t=(0,Xr.p)(this.localOutputSize);e.width===t.width&&e.height===t.height||this.trackChanges()}},{key:"updateInitialCropMaskPosition",value:function(e){var t=this.cropMaskSize,n=this.defaults.maxCropMaskSize;e?this.changePosition({x:0,y:Math.abs(n.height-t.height)/2}):this.changePosition({x:Math.abs(n.width-t.width)/2,y:0})}},{key:"updatePreviewSizeWRTImageSize",value:function(){var e=(0,Xr.p)(this.localOutputSize),t=(0,Xr.p)(this.defaults.imageSize),n=(0,Xr.p)(this.defaults.maxCropMaskSize),i={height:n.height*e.height/t.height,width:n.width*e.width/t.width};this.transformStore.changeSize(i)}},{key:"getScaleWithFlip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotateFlipState.rotation;return this.transformations.getScaleWithFlip(e)}},{key:"cropState",get:function(){return this.transformStore.selectedCrop}},{key:"identifier",get:function(){return this.transformStore.identifier}},{key:"ratio",get:function(){return this.transformStore.ratio}},{key:"height",get:function(){return this.transformStore.height}},{key:"width",get:function(){return this.transformStore.width}},{key:"localOutputImageSize",get:function(){return this.localOutputSize}},{key:"localOutputHeight",get:function(){return this.localOutputSize.height}},{key:"localOutputWidth",get:function(){return this.localOutputSize.width}},{key:"lockResolution",get:function(){return this.transformStore.lockResolution}},{key:"forceDimensions",get:function(){return this.transformStore.forceDimensions}},{key:"rotationInDegrees",get:function(){return this.transformStore.rotationInDegrees}},{key:"outputRotation",get:function(){return this.transformStore.outputRotation}},{key:"isDragMode",get:function(){return this.dragMode.get()}},{key:"rotateFlipState",get:function(){var t=this.transformStore.state,n=t.flipHorizontally,i=t.flipVertically,r=t.rotationInDegrees,o=t.outputRotation;return{flipHorizontally:n,flipVertically:i,rotation:e.inRadians(r),outputRotation:o}}},{key:"selectedCategoryIdentifier",get:function(){return this.selectedCategory}},{key:"categories",get:function(){return this.entityManager.categories}},{key:"items",get:function(){return this.entityManager.items}},{key:"config",get:function(){return this.editor.configStore.config.transform}},{key:"locale",get:function(){return this.editor.configStore.locale.transform}},{key:"isOptionSelected",get:function(){return"identity"!==this.identifier}},{key:"leftTop",get:function(){return this.rect.leftTop}},{key:"leftBottom",get:function(){return this.rect.leftBottom}},{key:"rightTop",get:function(){return this.rect.rightTop}},{key:"rightBottom",get:function(){return this.rect.rightBottom}},{key:"isFlippedHorizontal",get:function(){return this.transformStore.isFlippedHorizontal}},{key:"isFlippedVertical",get:function(){return this.transformStore.isFlippedVertical}},{key:"leftTopRespectFlip",get:function(){return this.rectForUi.leftTop}},{key:"leftBottomRespectFlip",get:function(){return this.rectForUi.leftBottom}},{key:"rightTopRespectFlip",get:function(){return this.rectForUi.rightTop}},{key:"rightBottomRespectFlip",get:function(){return this.rectForUi.rightBottom}},{key:"cropMaskPosition",get:function(){return this.transformStore.position}},{key:"cropMaskSize",get:function(){return this.transformStore.size}},{key:"state",get:function(){return this.transformStore.state}},{key:"defaultImageSize",get:function(){return this.defaults.imageSize}},{key:"maxCropMaskSize",get:function(){return this.defaults.maxCropMaskSize}},{key:"minCropMaskSize",get:function(){var e=this.getRatio();return"*"===e||1===e?{width:this.minCropSize,height:this.minCropSize}:e>1?{width:this.minCropSize*e,height:this.minCropSize}:{width:this.minCropSize,height:this.minCropSize*e}}},{key:"defaultCropMaskPosition",get:function(){return this.defaults.cropMaskPosition}},{key:"defaultScale",get:function(){return this.defaults.scale}},{key:"engineMediator",get:function(){return this.editor.engineMediator}},{key:"getRatio",value:function(){var e=this.getTransform(this.identifier);if(e){if(Object.prototype.hasOwnProperty.call(e,"ratio"))return this.lockResolution?this.localOutputWidth/this.localOutputHeight:e.ratio;var t=e.dimensions;return t.x/t.y}return"*"}}],[{key:"inRadians",value:,{key:"placeCropMask",value:function(e,t){if(t.height*e>t.width)return{height:t.width/e,width:t.width,yChanged:!0};var n=t.height*e;return{height:t.height,width:n,yChanged:!1}}}]),e}(),_d=vd;(0,Xr.c)([Xr.e],_d.prototype,"selectedCategory",2),(0,Xr.c)([Xr.e],_d.prototype,"defaults",2),(0,Xr.c)([Xr.e],_d.prototype,"localOutputSize",2),(0,Xr.c)([Xr.l],_d.prototype,"changeIdentifier",1),(0,Xr.c)([Xr.l],_d.prototype,"setDragMode",1),(0,Xr.c)([Xr.l],_d.prototype,"setCropDefaults",1),(0,Xr.c)([Xr.l],_d.prototype,"setDefaultImageSize",1),(0,Xr.c)([Xr.l],_d.prototype,"setMaxCropSize",1),(0,Xr.c)([Xr.l],_d.prototype,"setDefaultCropPosition",1),(0,Xr.c)([Xr.l],_d.prototype,"resetCrop",1),(0,Xr.c)([Xr.l],_d.prototype,"toggleCategorySelection",1),(0,Xr.c)([Xr.l],_d.prototype,"pureReset",1),(0,Xr.c)([Xr.l],_d.prototype,"reset",2),(0,Xr.c)([Xr.l],_d.prototype,"changePosition",1),(0,Xr.c)([Xr.l],_d.prototype,"changePositionX",1),(0,Xr.c)([Xr.l],_d.prototype,"changePositionY",1),(0,Xr.c)([Xr.l],_d.prototype,"changeCropAndOutputSize",1),(0,Xr.c)([Xr.l],_d.prototype,"onLeave",1),(0,Xr.c)([Xr.l],_d.prototype,"onEnter",1),(0,Xr.c)([Xr.l],_d.prototype,"changeLocalOutputSize",2),(0,Xr.c)([Xr.l],_d.prototype,"changeDefaultScale",2),(0,Xr.c)([Xr.l],_d.prototype,"changeLocalOutputHeight",2),(0,Xr.c)([Xr.l],_d.prototype,"changeLocalOutputWidth",2),(0,Xr.c)([Xr.l],_d.prototype,"changeLockResolution",2),(0,Xr.c)([Xr.l],_d.prototype,"setRotation",1),(0,Xr.c)([Xr.l],_d.prototype,"rotateClockwise",2),(0,Xr.c)([Xr.l],_d.prototype,"rotateAntiClockwise",2),(0,Xr.c)([Xr.l],_d.prototype,"rotateOutputContainer",1),(0,Xr.c)([Xr.l],_d.prototype,"flipHorizontally",2),(0,Xr.c)([Xr.l],_d.prototype,"flipVertically",2),(0,Xr.c)([Xr.l],_d.prototype,"applyDefaultCrop",2),(0,Xr.c)([Xr.l],_d.prototype,"applyInitialCrop",1),(0,Xr.c)([Xr.l],_d.prototype,"updateCropMask",2),(0,Xr.c)([Xr.l],_d.prototype,"clickableCanvas",1),(0,Xr.c)([Xr.l],_d.prototype,"onLeftTop",2),(0,Xr.c)([Xr.l],_d.prototype,"onLeftBottom",2),(0,Xr.c)([Xr.l],_d.prototype,"onRightTop",2),(0,Xr.c)([Xr.l],_d.prototype,"onRightBottom",2),(0,Xr.c)([Xr.l],_d.prototype,"proportionalSize",1),(0,Xr.c)([Xr.l],_d.prototype,"onPixelWidth",2),(0,Xr.c)([Xr.l],_d.prototype,"onPixelHeight",2),(0,Xr.c)([Xr.l],_d.prototype,"updateInitialCropMaskPosition",1),(0,Xr.c)([Xr.l],_d.prototype,"updatePreviewSizeWRTImageSize",1),(0,Xr.c)([Xr.l],_d.prototype,"dispose",2),(0,Xr.c)([Xr.f],_d.prototype,"cropState",1),(0,Xr.c)([Xr.f],_d.prototype,"identifier",1),(0,Xr.c)([Xr.f],_d.prototype,"ratio",1),(0,Xr.c)([Xr.f],_d.prototype,"height",1),(0,Xr.c)([Xr.f],_d.prototype,"width",1),(0,Xr.c)([Xr.f],_d.prototype,"localOutputImageSize",1),(0,Xr.c)([Xr.f],_d.prototype,"localOutputHeight",1),(0,Xr.c)([Xr.f],_d.prototype,"localOutputWidth",1),(0,Xr.c)([Xr.f],_d.prototype,"lockResolution",1),(0,Xr.c)([Xr.f],_d.prototype,"forceDimensions",1),(0,Xr.c)([Xr.f],_d.prototype,"rotationInDegrees",1),(0,Xr.c)([Xr.f],_d.prototype,"outputRotation",1),(0,Xr.c)([Xr.f],_d.prototype,"isDragMode",1),(0,Xr.c)([Xr.f],_d.prototype,"rotateFlipState",1),(0,Xr.c)([Xr.f],_d.prototype,"selectedCategoryIdentifier",1),(0,Xr.c)([Xr.f],_d.prototype,"categories",1),(0,Xr.c)([Xr.f],_d.prototype,"items",1),(0,Xr.c)([Xr.f],_d.prototype,"config",1),(0,Xr.c)([Xr.f],_d.prototype,"locale",1),(0,Xr.c)([Xr.f],_d.prototype,"isOptionSelected",1),(0,Xr.c)([Xr.f],_d.prototype,"leftTop",1),(0,Xr.c)([Xr.f],_d.prototype,"leftBottom",1),(0,Xr.c)([Xr.f],_d.prototype,"rightTop",1),(0,Xr.c)([Xr.f],_d.prototype,"rightBottom",1),(0,Xr.c)([Xr.f],_d.prototype,"isFlippedHorizontal",1),(0,Xr.c)([Xr.f],_d.prototype,"isFlippedVertical",1),(0,Xr.c)([Xr.f],_d.prototype,"leftTopRespectFlip",1),(0,Xr.c)([Xr.f],_d.prototype,"leftBottomRespectFlip",1),(0,Xr.c)([Xr.f],_d.prototype,"rightTopRespectFlip",1),(0,Xr.c)([Xr.f],_d.prototype,"rightBottomRespectFlip",1),(0,Xr.c)([Xr.f],_d.prototype,"cropMaskPosition",1),(0,Xr.c)([Xr.f],_d.prototype,"cropMaskSize",1),(0,Xr.c)([Xr.f],_d.prototype,"state",1),(0,Xr.c)([Xr.f],_d.prototype,"defaultImageSize",1),(0,Xr.c)([Xr.f],_d.prototype,"maxCropMaskSize",1),(0,Xr.c)([Xr.f],_d.prototype,"minCropMaskSize",1),(0,Xr.c)([Xr.f],_d.prototype,"defaultCropMaskPosition",1),(0,Xr.c)([Xr.f],_d.prototype,"defaultScale",1);var bd=(0,Xr.b)((0,Xr._a)()),xd={},kd="none",wd={x:0,y:0},Sd=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.state=Xr.e.map(xd),this.selectedId=Xr.e.box(kd),this.editMode=Xr.e.box(!1),this.dragMode=Xr.e.box(!1),this.minLength=0,this.counter=0,this.addSticker=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i,r=arguments;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!(r.length>1&&void 0!==r[1])||r[1],e.next=3,n.addStickerAsync(t,i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addStickerAsync=function(){var t=(0,Zr.Z)(Yr().mark((function t(i){var r,o,a,s,l=arguments;return Yr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.spriteId,o=i.state,a=i.transform,s=!(l.length>1&&void 0!==l[1])||l[1],t.abrupt("return",new Promise((function(t,i){a=n.getInitialTransform(a);var l=o.identifier,u=n.editor.orderHelper.addSprite(l);n.editor.engine.addStickerFromAssets(l,n.editor.engineMediator.image.container,u).then(function(){var i=(0,Zr.Z)(Yr().mark((function i(u){var c,h,d,f,p,g,m,y,v;return Yr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r&&u.setData({id:r}),c=u.getID(),n.container[c]=u,n.editor.orderHelper.renameSprite(l,c),(h=n.getSize(c)).width*=u.getScale().x,h.height*=u.getScale().y,u.setPivot(.5,.5),a.scale?d=a.scale:a.size?d={x:a.size.width/h.width,y:a.size.height/h.height}:(f=.4*n.editor.shortestOutputSide,p=e.magnitude(f)/e.sizeMagnitude(u.getSizeInWorldSpace()),d={x:p,y:p}),g=n.editor.outputContainer.getData(),m=g.flipHorizontally,y=g.flipVertically,u.setFlipHorizontally(m),u.setFlipVertically(y),u.setTransform({position:a.position,scale:d,rotation:a.rotation}),void 0!==o.flipHorizontally&&u.setFlipHorizontally(o.flipHorizontally!==m),void 0!==o.flipVertically&&u.setFlipVertically(o.flipVertically!==y),n.setContainerProperties(c,(0,Ur.Z)({},o)),v=u.getData(),n.setInitialSpriteState(c,"sticker"),n.stickerToolStore.setState(c,(0,Ur.Z)((0,Ur.Z)({},v),{},{identifier:l})),i.next=21,n.editor.renderPromise();case 21:s&&(n.setId(c),n.addSnapshot("add",n.stickerLocale.add)),t();case 23:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()).catch((function(e){console.error(e),i()}))})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.addText=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i,r=arguments;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!(r.length>1&&void 0!==r[1])||r[1],e.next=3,n.addTextAsync(t,i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addTextAsync=function(e){var t=e.spriteId,i=e.state,r=e.transform,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(e,a){r=n.getInitialTransform(r);var s=n.editor.orderHelper.addSprite(i.identifier),l=n.editor.shortestOutputSide,u={fontIdentifier:i.identifier,text:i.text,width:i.width||.6*l,fontSize:i.fontSize||.1*l,lineHeight:i.lineHeight,alignment:i.alignment,textColor:i.textColor,backgroundColor:i.backgroundColor};n.editor.engine.addTextWithFontLoading(u,n.editor.engineMediator.image.container,s).then(function(){var a=(0,Zr.Z)(Yr().mark((function a(s){var l,u,c,h,d;return Yr().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t&&s.setData({id:t}),l=s.getID(),n.container[l]=s,n.editor.orderHelper.renameSprite(i.identifier,l),u=n.editor.outputContainer.getData(),c=u.flipHorizontally,h=u.flipVertically,s.setFlipHorizontally(c),s.setFlipVertically(h),s.setPivot(.5,.5),s.setPosition(r.position),s.setRotation(r.rotation),n.setInitialSpriteState(l,"text"),d=s.getData(),n.textToolStore.setState(l,(0,Ur.Z)({},d)),a.next=15,n.editor.renderPromise();case 15:o&&(n.setId(l),n.addSnapshot("add",n.textLocale.add)),e();case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.error(e),a()}))}))},this.addTextDesign=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i,r,o=arguments;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!(o.length>1&&void 0!==o[1])||o[1],r=o.length>2&&void 0!==o[2]&&o[2],e.next=4,n.addTextDesignAsync(t,i,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addTextDesignAsync=function(e){var t=e.spriteId,i=e.state,r=e.transform,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(e,s){r=n.getInitialTransform(r);var l=n.editor.orderHelper.addSprite(i.identifier),u=n.editor.shortestOutputSide,c={width:i.width||.6*u,text:i.text,color:i.color,inverted:i.isInverted,seed:i.seed,padding:i.padding};n.editor.engine.addTextDesignAsync(i.identifier,c,n.editor.engineMediator.image.container,l).then(function(){var s=(0,Zr.Z)(Yr().mark((function s(l){var u,c,h,d,f;return Yr().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t&&(a&&(n.pureRemoveSprite(t),n.textDesignToolStore.state.delete(t)),l.setData({id:t})),u=l.getID(),n.container[u]=l,n.editor.orderHelper.renameSprite(i.identifier,u),c=n.editor.outputContainer.getData(),h=c.flipHorizontally,d=c.flipVertically,l.setFlipHorizontally(h),l.setFlipVertically(d),l.setPivot(.5,.5),l.setPosition(r.position),l.setRotation(r.rotation),n.setInitialSpriteState(u,"textdesign"),f=l.getData(),n.textDesignToolStore.setState(u,(0,Ur.Z)((0,Ur.Z)({},f),{},{identifier:i.identifier})),s.next=15,n.editor.renderPromise();case 15:o&&(n.setId(u),n.addSnapshot("add",n.textDesignLocale.add)),e();case 17:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()).catch(()}))},this.spriteLocalTransform=function(){return{position:n.editor.previewToOutput(n.position),size:n.size,rotation:n.rotation}},this.clickableCanvas=function(e){n.editor.clickableCanvas(e)},this.setContainerProperties=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.container[e].setData(t),i&&n.updatePositionAndSize(),n.editor.render()},this.setContainerPosition=this.pureRemoveSprite=function(e){return n.editor.engine.removeContainer(n.container[e]),-1===n.container[e].getIndexInParent()&&(delete n.container[e],n.state.delete(e),n.editor.orderHelper.removeSprite(e),!0)},this.deleteSprite=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.id,t=n.state.get(e);"sticker"===t.tool?n.stickerToolStore.delete():"text"===t.tool?n.textToolStore.delete():"textdesign"===t.tool&&n.textDesignToolStore.delete()},this.removeSprite=function(e){n.pureRemoveSprite(e)&&(n.selectLast(),n.spriteSnapshot("delete"),n.editor.render())},this.addSnapshot=function(e,t){n.editor.addSnapshot(void 0,e,t)},this.spriteSnapshot=this.addNewText=function(){var e=(0,Zr.Z)(Yr().mark((function e(t,i){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.textToolStore.doesTextAssetExist(i.identifier)){e.next=5;break}return e.next=3,n.addTextAsync((0,Ur.Z)((0,Ur.Z)({},t),{},{state:i}),!1);case 3:e.next=6;break;case 5:throw new Xr.Ya(i.identifier);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.addNewTextDesign=function(){var e=(0,Zr.Z)(Yr().mark((function e(t,i){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.textDesignToolStore.doesTextDesignAssetExist(i.identifier)){e.next=5;break}return e.next=3,n.addTextDesignAsync((0,Ur.Z)((0,Ur.Z)({},t),{},{state:i}),!1);case 3:e.next=6;break;case 5:throw new Xr.Ya(i.identifier);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.addNewSticker=function(){var e=(0,Zr.Z)(Yr().mark((function e(t,i){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.stickerToolStore.doesStickerAssetExist(i.identifier)){e.next=5;break}return e.next=3,n.addStickerAsync((0,Ur.Z)((0,Ur.Z)({},t),{},{state:i}),!1);case 3:e.next=6;break;case 5:throw new Xr.Ya(i.identifier);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getSpriteHistoryState=function(){var e,t=(0,Xr.p)(n.textToolStore.state),i=(0,Xr.p)(n.textDesignToolStore.state),r=(e={common:(0,Xr.p)(n.state)},(0,Br.Z)(e,"sticker",(0,Xr.p)(n.stickerToolStore.state)),(0,Br.Z)(e,"text",t),(0,Br.Z)(e,"textdesign",i),(0,Br.Z)(e,"spriteIdList",Object.keys(n.container)),e);return Object.keys(r.common).forEach((function(e){r.common[e].size=n.container[e].getSizeInWorldSpace(),r.common[e].position=n.container[e].getPosition(),r.common[e].order=n.container[e].getIndexInParent()})),r},this.updateStateFromSerialization=function(){var e=(0,Zr.Z)(Yr().mark((function e(t,i,r){var o;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.length){e.next=13;break}return e.prev=1,e.next=4,Promise.all(i.map(function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var n,i,r,o,a,s,l;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.svg,i=t.raster,r=t.name,o=t.identifier,a=(null==n?void 0:n.data)?"image/svg+xml":i.type,s="data:".concat(a,";base64,").concat((null==n?void 0:n.data)||i.data),e.next=5,uh(s,150);case 5:return l=e.sent,e.abrupt("return",{stickerURI:s,thumbnailURI:l,name:r,type:a,identifier:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return o=e.sent,e.next=7,n.stickerToolStore.addCustomStickerAsset(o);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n.editor.modalStore.hideModal(),n.editor.modalStore.showInfoModal("stickerLoading");case 13:if(!t.text){e.next=16;break}return e.next=16,n.textToolStore.loadFonts();case 16:if(!t.textdesign){e.next=19;break}return e.next=19,n.textDesignToolStore.loadFonts();case 19:return e.next=21,n.updateStateByHistoryState(t.spriteIdList,t,r);case 21:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.updateStateFromHistory=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object.keys(n.container),i.filter(().forEach((function(e){n.pureRemoveSprite(e)})),e.next=5,n.updateStateByHistoryState(t.spriteIdList,t,0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.serializableState=(0,Zr.Z)(Yr().mark((function e(){var t,i;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.editor.spriteStore.getSpriteHistoryState(),Object.keys(t.common).forEach((function(e){var i=n.editor.outputContainer.getData(),r=i.flipHorizontally,o=i.flipVertically,a=n.editor.outputContainer.getRotation(),s=o!==r?-t.common[e].rotation:t.common[e].rotation;t.common[e].rotation=o!==r?s+a:s-a})),e.next=4,Promise.all(n.editor.spriteStore.stickerToolStore.customStickers.map(function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var n,i,r,o,a,s,l,u,c,h;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.identifier,i=t.type,r=t.stickerURI,o=t.name,a={identifier:n,name:o,raster:{data:"",type:"image/jpeg"}},"image/svg+xml"===i&&(a.svg={data:r.split(",")[1]}),"image/jpeg"!==i&&"image/png"!==i&&"image/gif"!==i){e.next=10;break}s=r.split(","),l=(0,Lr.Z)(s,2),a.raster.data=l[1],a.raster.type=i,e.next=17;break;case 10:return e.next=12,uh(r);case 12:u=e.sent,c=u.split(","),h=(0,Lr.Z)(c,2),a.raster.data=h[1],a.raster.type="image/png";case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return i=e.sent,e.abrupt("return",{sprite:t,customStickers:i});case 6:case"end":return e.stop()}}),e)}))),this.updateCanvasControls=function(){Object.keys(n.container).forEach((function(e){n.updatePositionAndSize(e,!0);var t=n.state.get(e);if(t)if("text"===t.tool){var i=n.getContainerProperties(e);n.textToolStore.changeSize(e,i)}else if("textdesign"===t.tool){var r=n.getContainerProperties(e);n.textToolStore.changeWidth(r.width)}}))},this.setEditMode=function(e){n.currentSprite&&-1!==["text","textdesign"].indexOf(n.tool)&&(e?n.editor.modalStore.showTextEditModal():n.editor.modalStore.hideModal(),n.editMode.set(e))},this.setDragMode=function(e){n.dragMode.set(e)},this.setPosition=function(e){var t=n.currentSprite,i=n.container[n.id];if(t&&i){i.setPosition(n.editor.previewToWorld(e));var r=n.getSizePositionFromContainer().position;t.position.x=r.x,t.position.y=r.y,n.state.set(n.id,t),n.editor.render()}},this.setSize=function(e){var t=n.currentSprite;t&&(t.size.width=e.width,t.size.height=e.height,n.state.set(n.id,t))},this.setRotation=function(e){var t=n.currentSprite;if(t){var i=n.editor.outputContainer.getData(),r=i.flipHorizontally,o=i.flipVertically,a=n.editor.outputContainer.getRotation(),s=(0,Xr.qb)({rotation:e,outputRotation:a,flipHorizontally:r,flipVertically:o});n.container[n.id].setRotation(s),t.rotation=n.container[n.id].getRotation(),n.state.set(n.id,t),n.editor.render()}},this.onCanvasClick=this.select=function(e){var t=n.state.get(e);t&&(n.editor.activeStore.tool!==t.tool&&n.editor.activeStore.selectTool(t.tool),n.setId(e))},this.selectLast=function(){var e=n.editor.orderHelper.getLastSpriteId();e&&n.select(e)},this.selectNext=function(){if(n.currentSprite){var e=n.container[n.id].getIndexInParent();if(e){var t=Object.keys(n.container).find((function(t){return n.container[t].getIndexInParent()===e-1}));t&&n.select(t)}}},this.deselect=function(){n.setId(kd)},this.bringToFront=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var i;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.editor.orderHelper.bringToFront(t),n.container[t].setIndexInParent(i),n.spriteSnapshot("order"),e.next=5,n.editor.render();case 5:n.counter+=1;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.flipHorizontally=function(e){var t=n.state.get(e),i=n.container[e];i.setFlipHorizontally(!i.getFlipHorizontally()),t.flipHorizontally=i.getFlipHorizontally(),n.spriteSnapshot("flip"),n.state.set(e,t),n.editor.render()},this.pureReset=function(){n.deselect(),Array.from(n.state.keys()).forEach((function(e){n.pureRemoveSprite(e)})),n.stickerToolStore.pureReset(),n.textToolStore.pureReset(),n.textDesignToolStore.pureReset()},this.selectHighestOrderSprite=function(e){var t=n.editor.brushToolStore.containerId();if((e=e.filter((function(e){return e!==t}))).length<1)n.deselect();else{var i="",r=0;e.forEach((function(e){var t=n.container[e],o=t&&t.getIndexInParent()||0;o>=r&&(r=o,i=e)})),n.select(i)}},this.onCornerDrag=function(t){var i=t.x,r=t.y;if(n.currentSprite){var o=new Xr.Pa(n.currentSprite.position),a=new Xr.Pa(i,r),s=a.subtract(o).magnitude,l=n.getSize(),u=2*s/e.sizeMagnitude(l);if(s>n.minLength)if(n.isSpriteSticker)if("unrestricted"!==n.stickerToolStore.resizeMode)n.setStickerSize({width:l.width*u,height:l.height*u});else{var c=n.rotationWRTOutputRotation,h=a.subtract(o),d=Math.cos(c),f=Math.sin(c),p=Math.max(Math.abs(h.x*d*2+h.y*f*2),n.minLength),g=Math.max(Math.abs(h.x*-f*2+h.y*d*2),n.minLength);n.setStickerSize({width:p,height:g})}else n.isSpriteText?n.setTextSize(l.width*u):n.isSpriteTextDesign&&n.setTextDesignScale(u);n.editor.render()}},this.onWidthDrag=function(e){var t=e.x,i=e.y,r=new Xr.Pa(n.currentSprite.position),o=new Xr.Pa(t,i).subtract(r).magnitude,a=n.editor.previewToWorld(2*o);if(a>n.minLength&&(n.setContainerProperties(n.id,{width:a},!0),n.isSpriteText)){var s=n.getContainerProperties(n.id);n.textToolStore.changeWidth(s.width)}},this.onPaddingDrag=function(e){var t=e.x,i=e.y;if(n.isSpriteTextDesign){var r=n.getContainerProperties(n.id),o=new Xr.Pa(n.currentSprite.position),a=new Xr.Pa(t,i).subtract(o).magnitude,s=Math.max(n.editor.previewToWorld(a)-r.width/2,0);n.setContainerProperties(n.id,{padding:s},!0),n.isSpriteTextDesign&&(r=n.getContainerProperties(n.id),n.textDesignToolStore.changePadding(r.padding))}},this.correctTextFlip=function(){var e=n.editor.outputContainer.getData(),t=e.flipHorizontally,i=e.flipVertically;Object.values(n.container).forEach((function(e){"text"!==e.type&&"text-design"!==e.type||(e.setFlipHorizontally(t),e.setFlipVertically(i))}))},this.reverseTextHorizontally=function(e){Object.values(n.container).forEach((function(t){"text"!==t.type&&"text-design"!==t.type||t.setFlipHorizontally(e)}))},this.reverseTextVertically=function(e){Object.values(n.container).forEach(()},this.dispose=function(){n.state=null,n.stickerToolStore&&(n.stickerToolStore.dispose(),n.stickerToolStore=null),n.textToolStore&&(n.textToolStore.dispose(),n.textToolStore=null),n.textDesignToolStore&&(n.textDesignToolStore.dispose(),n.textDesignToolStore=null),n.selectedId=null,n.editMode=null,n.dragMode=null,n.editor=null,n.rect=null},this.getOutputProperties=this.getContainerProperties=function(e){return n.container[e].getData()},this.getContainerTransform=this.getDuplicateContainerTransform=function(e){var t=n.container[e].getTransform(),i=.1*n.editor.shortestOutputSide,r=new Xr.Pa(t.position).add(new Xr.Pa(i,i));return(0,Ur.Z)((0,Ur.Z)({},t),{},{position:r})},this.getDuplicateContainerFlip=function(e){return{flipHorizontally:n.container[e].getFlipHorizontally(),flipVertically:n.container[e].getFlipVertically()}},this.updatePositionAndSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.id,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n.getSizePositionFromContainer(e),r=i.position,o=i.size,a=n.state.get(e);if(a){if(a.position.x=r.x,a.position.y=r.y,a.size.width=o.width,a.size.height=o.height,t){var s=n.container[e].getRotation();n.container[e].setRotation(s),a.rotation=n.container[e].getRotation()}n.state.set(e,a)}},this.getInitialTransform=function(e){var t=n.editor.outputToWorld(wd);return e?(0,Ur.Z)({position:t},e):{rotation:n.editor.outputContainer.getRotation(),position:t}},this.setInitialSpriteState=function(e,t){var i=n.container[e],r=n.getSizePositionFromContainer(e),o=r.position,a=r.size,s=i.getRotation(),l="sticker"===t&&i.getFlipHorizontally(),u="sticker"===t&&i.getFlipVertically();n.state.set(e,{tool:t,position:o,rotation:s,size:a,flipHorizontally:l,flipVertically:u})},this.setStickerSize=function(e){var t=n.container[n.id];t.setSizeInWorldSpace(n.editor.previewSizeToWorld(e));var i=n.currentSprite;i&&(i.size=n.editor.worldSizeToPreview(t.getSizeInWorldSpace()),n.state.set(n.id,i))},this.setTextSize=function(e){var t=n.getContainerProperties(n.id),i={width:n.editor.previewToWorld(e)},r=i.width/t.width,o={fontSize:Math.round(t.fontSize*r)},a=n.isSpriteText?(0,Ur.Z)((0,Ur.Z)({},i),o):i;i.width>n.minLength&&o.fontSize&&(n.setContainerProperties(n.id,a,!0),t=n.getContainerProperties(n.id),n.textToolStore.changeFontSize(t.fontSize,!0),n.textToolStore.changeWidth(t.width))},this.setTextDesignScale=function(e){var t=n.getContainerProperties(n.id),i=t.width*e;if(i>n.minLength){n.setContainerProperties(n.id,{width:i},!0);var r=n.getContainerProperties(n.id).width;n.textDesignToolStore.changeWidth(r),t=n.getContainerProperties(n.id),n.textDesignToolStore.changePadding(t.padding)}},this.getSizePositionFromContainer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.id,t=n.container[e];if(t){var i=n.editor.worldToPreview(t.getPosition()),r=n.editor.worldSizeToPreview(t.getSizeInWorldSpace());return{position:i,size:r}}return{position:{x:0,y:0},size:{height:1,width:1}}},this.getSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.id,t=n.container[e];return t?n.editor.worldSizeToPreview(t.getSizeInWorldSpace()):{width:0,height:0}},this.editor=t,this.container={},this.stickerToolStore=new fh(t),this.textToolStore=new vh(t),this.textDesignToolStore=new kh(t),this.rect=new fd(this.editor,this),this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}return(0,jr.Z)(e,[{key:"updateStateByHistoryState",value:function(){var e=(0,Zr.Z)(Yr().mark((function e(t,n,i){var r=this;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,bd.default)(t,function(){var e=(0,Zr.Z)(Yr().mark((function e(t){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.common[t]){e.next=3;break}return e.abrupt("return");case 3:if(!r.state.get(t)){e.next=7;break}r.updateExistingItem(t,n),e.next=9;break;case 7:return e.next=9,r.addNewItem(t,n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:t.forEach((function(e){var t=n.common[e],o=r.container[e];t&&o&&o.setIndexInParent(t.order+i)})),this.counter+=1;case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"addNewItem",value:function(){var e=(0,Zr.Z)(Yr().mark((function e(t,n){var i,r,o,a,s,l,u,c,h,d,f,p;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.common[t],r=i.size?{width:this.editor.worldToPreview(i.size.width),height:this.editor.worldToPreview(i.size.height)}:void 0,o=this.editor.outputContainer.getData(),a=o.flipHorizontally,s=o.flipVertically,l=this.editor.outputContainer.getRotation(),u=s!==a?i.rotation-l:i.rotation+l,c=s!==a?-u:u,h={spriteId:t,transform:{size:r,position:new Xr.Pa(i.position),rotation:c}},!n.text[t]){e.next=14;break}return d=n.text[t],f=this.textToolStore.validFontWithConfig(d.identifier),d.identifier=null==f?void 0:f.identifier,e.next=13,this.addNewText(h,d);case 13:case 17:return e.abrupt("return");case 14:if(!n.textdesign[t]){e.next=18;break}return e.next=17,this.addNewTextDesign(h,n.textdesign[t]);case 18:if(!n.sticker[t]){e.next=22;break}return p=this.stickerToolStore.items.find((),e.next=22,this.addNewSticker(h,(0,Ur.Z)((0,Ur.Z)({},n.sticker[t]),{},{flipHorizontally:i.flipHorizontally,flipVertically:i.flipVertically,resizeMode:n.sticker[t].resizeMode||(null==p?void 0:p.resizeMode)||"keepAspect"}));case 22:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateExistingItem",value:function(e,t){var n=t.common[e],i=this.state.get(e);this.state.set(e,i);var r=this.container[e];if(r.setPosition(new Xr.Pa(n.position)),r.setRotation(n.rotation),i.rotation=r.getRotation(),void 0!==n.flipHorizontally&&r.setFlipHorizontally(n.flipHorizontally),void 0!==n.flipVertically&&r.setFlipVertically(n.flipVertically),t.text[e]){var o=t.text[e];this.textToolStore.updateStateFromHistory(e,(0,Ur.Z)((0,Ur.Z)({},o),{},{fontIdentifier:o.identifier}))}if(t.textdesign[e]){var a=t.textdesign[e];this.textDesignToolStore.updateStateFromHistory(e,(0,Ur.Z)((0,Ur.Z)({},a),{},{inverted:a.isInverted}))}t.sticker[e]&&(r.setSizeInWorldSpace(n.size),this.stickerToolStore.updateStateFromHistory(e,t.sticker[e])),this.updatePositionAndSize(e)}},{key:"currentSprite",get:,{key:"padding",get:function(){return this.textDesignToolStore.padding}},{key:"isEditMode",get:function(){return this.editMode.get()}},{key:"isDragMode",get:function(){return this.dragMode.get()}},{key:"id",get:function(){return this.selectedId.get()}},{key:"isSpriteSelected",get:,{key:"position",get:function(){if(this.currentSprite)return this.currentSprite.position}},{key:"tool",get:function(){if(this.currentSprite)return this.currentSprite.tool}},{key:"size",get:function(){if(this.currentSprite)return this.currentSprite.size}},{key:"rotation",get:function(){if(this.currentSprite)return this.currentSprite.rotation}},{key:"rotationWRTOutputRotation",get:function(){if(this.currentSprite){var e=this.editor.outputContainer.getData(),t=e.flipHorizontally,n=e.flipVertically,i=this.editor.outputContainer.getRotation();return(0,Xr.qb)({rotation:this.currentSprite.rotation-i,flipHorizontally:t,flipVertically:n})}}},{key:"flipHorizontal",get:function(){if(this.currentSprite)return this.currentSprite.flipHorizontally}},{key:"isSpriteSticker",get:function(){return"sticker"===this.tool}},{key:"isSpriteText",get:function(){return"text"===this.tool}},{key:"isSpriteTextDesign",get:,{key:"isOnTop",get:function(){this.counter;return this.editor.engine.isSpriteTop(this.id)}},{key:"spritePosition",get:function(){if(this.currentSprite){var e=this.currentSprite.position,t=e.x,n=e.y,i=this.currentSprite.size,r=i.height,o=i.width;return{x:Math.round(t-o/2),y:Math.round(n-r/2)}}}},{key:"currentRect",get:,{key:"leftTopPosition",get:function(){if(this.currentSprite)return this.rect.leftTop}},{key:"leftBottomPosition",get:function(){if(this.currentSprite)return this.rect.leftBottom}},{key:"leftMidPosition",get:function(){if(this.currentSprite)return this.rect.leftMid}},{key:"leftMidPadPosition",get:function(){if(this.currentSprite){var e=this.rect.leftMid;return{x:e.x-this.editor.worldToPreview(this.padding),y:e.y}}}},{key:"rightTopPosition",get:function(){if(this.currentSprite)return this.rect.rightTop}},{key:"rightBottomPosition",get:function(){if(this.currentSprite)return this.rect.rightBottom}},{key:"rightMidPosition",get:function(){if(this.currentSprite)return this.rect.rightMid}},{key:"rightMidPadPosition",get:function(){if(this.currentSprite){var e=this.rect.rightMid;return{x:e.x+this.editor.worldToPreview(this.padding),y:e.y}}}},{key:"leftBottomHandlePosition",get:function(){if(this.currentSprite)return this.rect.leftBottomHandle}},{key:"rightBottomHandlePosition",get:,{key:"historyLocale",get:,{key:"stickerLocale",get:function(){return this.editor.configStore.locale.sticker.history}},{key:"textLocale",get:function(){return this.editor.configStore.locale.text.history}},{key:"textDesignLocale",get:function(){return this.editor.configStore.locale.textdesign.history}},{key:"setId",value:function(e){this.selectedId.set(e)}}],[{key:"magnitude",value:function(e,t){return new Xr.Pa(e,t||e).magnitude}},{key:"sizeMagnitude",value:]),e}(),Cd=Sd;(0,Xr.c)([Xr.e],Cd.prototype,"counter",2),(0,Xr.c)([Xr.l],Cd.prototype,"addSticker",2),(0,Xr.c)([Xr.l],Cd.prototype,"addStickerAsync",2),(0,Xr.c)([Xr.l],Cd.prototype,"addText",2),(0,Xr.c)([Xr.l],Cd.prototype,"addTextAsync",2),(0,Xr.c)([Xr.l],Cd.prototype,"addTextDesign",2),(0,Xr.c)([Xr.l],Cd.prototype,"addTextDesignAsync",2),(0,Xr.c)([Xr.l],Cd.prototype,"clickableCanvas",2),(0,Xr.c)([Xr.l],Cd.prototype,"setContainerProperties",2),(0,Xr.c)([Xr.l],Cd.prototype,"setContainerPosition",2),(0,Xr.c)([Xr.l],Cd.prototype,"pureRemoveSprite",2),(0,Xr.c)([Xr.l],Cd.prototype,"deleteSprite",2),(0,Xr.c)([Xr.l],Cd.prototype,"removeSprite",2),(0,Xr.c)([Xr.l],Cd.prototype,"addSnapshot",2),(0,Xr.c)([Xr.l],Cd.prototype,"addNewText",2),(0,Xr.c)([Xr.l],Cd.prototype,"addNewTextDesign",2),(0,Xr.c)([Xr.l],Cd.prototype,"addNewSticker",2),(0,Xr.c)([Xr.l],Cd.prototype,"updateStateFromSerialization",2),(0,Xr.c)([Xr.l],Cd.prototype,"updateStateFromHistory",2),(0,Xr.c)([Xr.l],Cd.prototype,"updateCanvasControls",2),(0,Xr.c)([Xr.l],Cd.prototype,"setEditMode",2),(0,Xr.c)([Xr.l],Cd.prototype,"setDragMode",2),(0,Xr.c)([Xr.l],Cd.prototype,"setPosition",2),(0,Xr.c)([Xr.l],Cd.prototype,"setSize",2),(0,Xr.c)([Xr.l],Cd.prototype,"setRotation",2),(0,Xr.c)([Xr.l],Cd.prototype,"onCanvasClick",2),(0,Xr.c)([Xr.l],Cd.prototype,"select",2),(0,Xr.c)([Xr.l],Cd.prototype,"selectLast",2),(0,Xr.c)([Xr.l],Cd.prototype,"selectNext",2),(0,Xr.c)([Xr.l],Cd.prototype,"deselect",2),(0,Xr.c)([Xr.l],Cd.prototype,"bringToFront",2),(0,Xr.c)([Xr.l],Cd.prototype,"flipHorizontally",2),(0,Xr.c)([Xr.l],Cd.prototype,"pureReset",2),(0,Xr.c)([Xr.l],Cd.prototype,"onCornerDrag",2),(0,Xr.c)([Xr.l],Cd.prototype,"onWidthDrag",2),(0,Xr.c)([Xr.l],Cd.prototype,"onPaddingDrag",2),(0,Xr.c)([Xr.l],Cd.prototype,"correctTextFlip",2),(0,Xr.c)([Xr.l],Cd.prototype,"reverseTextHorizontally",2),(0,Xr.c)([Xr.l],Cd.prototype,"reverseTextVertically",2),(0,Xr.c)([Xr.l],Cd.prototype,"dispose",2),(0,Xr.c)([Xr.f],Cd.prototype,"currentSprite",1),(0,Xr.c)([Xr.f],Cd.prototype,"padding",1),(0,Xr.c)([Xr.f],Cd.prototype,"isEditMode",1),(0,Xr.c)([Xr.f],Cd.prototype,"isDragMode",1),(0,Xr.c)([Xr.f],Cd.prototype,"id",1),(0,Xr.c)([Xr.f],Cd.prototype,"isSpriteSelected",1),(0,Xr.c)([Xr.f],Cd.prototype,"position",1),(0,Xr.c)([Xr.f],Cd.prototype,"tool",1),(0,Xr.c)([Xr.f],Cd.prototype,"size",1),(0,Xr.c)([Xr.f],Cd.prototype,"rotation",1),(0,Xr.c)([Xr.f],Cd.prototype,"rotationWRTOutputRotation",1),(0,Xr.c)([Xr.f],Cd.prototype,"flipHorizontal",1),(0,Xr.c)([Xr.f],Cd.prototype,"isSpriteSticker",1),(0,Xr.c)([Xr.f],Cd.prototype,"isSpriteText",1),(0,Xr.c)([Xr.f],Cd.prototype,"isSpriteTextDesign",1),(0,Xr.c)([Xr.f],Cd.prototype,"isOnTop",1),(0,Xr.c)([Xr.f],Cd.prototype,"spritePosition",1),(0,Xr.c)([Xr.f],Cd.prototype,"currentRect",1),(0,Xr.c)([Xr.f],Cd.prototype,"leftTopPosition",1),(0,Xr.c)([Xr.f],Cd.prototype,"leftBottomPosition",1),(0,Xr.c)([Xr.f],Cd.prototype,"leftMidPosition",1),(0,Xr.c)([Xr.f],Cd.prototype,"leftMidPadPosition",1),(0,Xr.c)([Xr.f],Cd.prototype,"rightTopPosition",1),(0,Xr.c)([Xr.f],Cd.prototype,"rightBottomPosition",1),(0,Xr.c)([Xr.f],Cd.prototype,"rightMidPosition",1),(0,Xr.c)([Xr.f],Cd.prototype,"rightMidPadPosition",1),(0,Xr.c)([Xr.f],Cd.prototype,"leftBottomHandlePosition",1),(0,Xr.c)([Xr.f],Cd.prototype,"rightBottomHandlePosition",1),(0,Xr.c)([Xr.f],Cd.prototype,"historyLocale",1),(0,Xr.c)([Xr.f],Cd.prototype,"stickerLocale",1),(0,Xr.c)([Xr.f],Cd.prototype,"textLocale",1),(0,Xr.c)([Xr.f],Cd.prototype,"textDesignLocale",1);var Td={categories:[],query:""},Ed=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.initProvider=function(e){e&&(n.libraryProvider=new e)},this.fetchImages=(0,Zr.Z)(Yr().mark((function e(){var t,i,r,o,a=arguments;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:"",!n.libraryProvider){e.next=17;break}return i=null,e.prev=3,e.next=6,n.libraryProvider.getCategories();case 6:return r=e.sent,e.next=9,n.libraryProvider.searchImages(t);case 9:o=e.sent,i=r.map((function(e,t){var n=o.filter((function(t){return t.category===e.name}));return{identifier:e.name,name:e.name,thumbnailURI:e.coverImageUrl,items:n.map((function(n){return{name:n.title||"image".concat(t),identifier:"".concat(e.name,"-").concat(n.title,"-").concat(t),thumbnailURI:n.thumbUrl,rawUrl:n.rawUrl,authorName:n.authorName,authorAvatar:n.authorAvatar}}))}})).filter((function(e){return e.items.length})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:(0,Xr.m)(();case 17:case"end":return e.stop()}}),e,null,[[3,13]])}))),this.toggleCategorySelection=function(e){n.selectedCategory=n.selectedCategory!==e?e:""},this.dispose=function(){n.state=null,n.configStore=null,n.libraryProvider=null,n.selectedCategory=null},this.getRawUrl=function(e){var t=n.items.findIndex((function(t){return t.identifier===e}));return-1!==t?n.items[t].rawUrl:e},this.configStore=t.configStore,this.state=(0,Xr.e)(Td),this.selectedCategory=""}return(0,jr.Z)(e,[{key:"selectedCategoryIdentifier",get:function(){return this.selectedCategory}},{key:"categories",get:function(){return this.state.categories}},{key:"items",get:function(){return this.state.categories.map((function(e){return e.items})).reduce((,[])}},{key:"query",get:function(){return this.state.query}},{key:"config",get:function(){return this.configStore.config.library}},{key:"locale",get:function(){return this.configStore.locale.library}}]),e}();(0,Xr.c)([Xr.e],Ed.prototype,"selectedCategory",2),(0,Xr.c)([Xr.l],Ed.prototype,"initProvider",2),(0,Xr.c)([Xr.l],Ed.prototype,"fetchImages",2),(0,Xr.c)([Xr.l],Ed.prototype,"toggleCategorySelection",2),(0,Xr.c)([Xr.l],Ed.prototype,"dispose",2),(0,Xr.c)([Xr.f],Ed.prototype,"selectedCategoryIdentifier",1),(0,Xr.c)([Xr.f],Ed.prototype,"categories",1),(0,Xr.c)([Xr.f],Ed.prototype,"items",1),(0,Xr.c)([Xr.f],Ed.prototype,"query",1),(0,Xr.c)([Xr.f],Ed.prototype,"config",1),(0,Xr.c)([Xr.f],Ed.prototype,"locale",1);var Dd=/^data:image\/(.+?);base64,/,Id=Rd=Od=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.applySerialization=function(){var e=(0,Zr.Z)(Yr().mark((function e(t,i,r,o){var a,s,l,u,c,h;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.editor.resetToolStates(),(a="transform"===n.editor.activeStore.tool)||n.editor.transformToolStore.onEnter(),n.editor.transformToolStore.reset(),a||n.editor.transformToolStore.onLeave(),s="Unexpected error occured",!(l=i.deserializeImage(t)).image||!l.image.data){e.next=23;break}return u=l.image.data,e.next=11,n.editor.setImage(u);case 11:return n.editor.scale.defaultScale=1,n.editor.scale.resetOffset(),n.editor.transformToolStore.reset(),n.editor.activeStore.setImage(u),e.next=17,n.editor.engineMediator.image.addImageToContainer();case 17:n.editor.engineMediator.output.applyNewImageTransform(),n.editor.engineMediator.preview.updateTransform(),n.editor.scale.setInitialTransform(),n.editor.transformToolStore.setCropDefaults(),n.editor.historyStore.addInitialSnapshot(),n.editor.transformToolStore.saveTransforms();case 23:if(c=i.deserializeTransformation(t)){e.next=27;break}return o(s),e.abrupt("return");case 27:return e.next=29,n.applyStateOnUI(c);case 29:if(h=i.deserialize(t)){e.next=33;break}return o(s),e.abrupt("return");case 33:return e.next=35,n.applyStateOnUI(h);case 35:return n.editor.historyStore.addInitialSnapshot(),a&&n.editor.transformToolStore.onEnter(),e.next=39,n.editor.render();case 39:"loading"===n.editor.modalStore.identifier&&n.editor.modalStore.hideModal(),r();case 41:case"end":return e.stop()}}),e)})));return (),this.editor=t}return(0,jr.Z)(e,[{key:"serialize",value:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{image:!1},r=i.image,o="transform"===this.editor.activeStore.tool,a=this.editor.configStore.config.displaySerializationModal;return a&&this.editor.modalStore.showInfoModal("saving"),new Promise((function(i,s){n.e(6505).then(n.bind(n,66505)).then(function(){var n=(0,Zr.Z)(Yr().mark((function n(l){var u,c,h,d,f,p,g,m,y,v,_,b,x,k;return Yr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=l.Serializer,n.prev=1,o&&t.editor.transformToolStore.onLeave(),n.next=5,t.editor.wait();case 5:return t.editor.transformToolStore.applyDefaultCrop(!1),h=t.editor.imageContainer.getData(),d=h.originalImage,f=t.editor.engineMediator.output.container.getResolution(),p={width:d.width,height:d.height},g=new u(t.editor.transformToolStore.defaultCropMaskPosition,t.editor.transformToolStore.maxCropMaskSize,f,p,t.editor.engine.getRootContainers()[0],t.editor.engine.getOutputContainer()),c={},(0,Br.Z)(c,"adjustment",(0,Xr.p)(t.editor.adjustmentsToolStore.state)),(0,Br.Z)(c,"filter",(0,Xr.p)(t.editor.filterToolStore.state)),(0,Br.Z)(c,"focus",(0,Xr.p)(t.editor.focusToolStore.serializableState)),(0,Br.Z)(c,"overlay",(0,Xr.p)(t.editor.overlayToolStore.state)),(0,Br.Z)(c,"frame",(0,Xr.p)(t.editor.frameToolStore.state)),(0,Br.Z)(c,"brush",t.editor.brushToolStore.strokes||{strokes:[]}),m=c,n.next=13,t.editor.spriteStore.serializableState();case 13:y=n.sent,v=y.sprite,_=y.customStickers,v.spriteIdList=v.spriteIdList.sort((),m.sprite=v,m.customStickers=_,m.transform=t.editor.transformToolStore.serializableState,r&&(k=e.getDataURL(d),x=Id(k),b=Rd(k)),a&&t.editor.modalStore.hideModal(),i(g.serialise(m,b,x)),o&&t.editor.transformToolStore.onEnter(),n.next=30;break;case 26:n.prev=26,n.t0=n.catch(1),a&&t.editor.modalStore.hideModal(),s(n.t0);case 30:case"end":return n.stop()}}),n,null,[[1,26]])})));return function(e){return n.apply(this,arguments)}}())}))}},{key:"deserialize",value:function(e){var t=this;return this.editor.modalStore.showInfoModal("loading"),new Promise((function(i,r){try{n.e(6505).then(n.bind(n,66505)).then((function(n){var o=n.Deserializers,a=e.version.match(/[0-3].[0-8].[0-9]/i),s=null;s=a&&o["3.9.0"]?new o["3.9.0"](t.editor):o[e.version]?new o[e.version](t.editor):new o["3.12.0"](t.editor),a?(t.editor.modalStore.hideModal(),t.editor.modalStore.showActionModal({type:"warning",identifier:"unsupportedSerializationVersion",handleConfirm:)):t.applySerialization(e,s,i,r)}))}catch(o){"loading"===t.editor.modalStore.identifier&&t.editor.modalStore.hideModal(),r(o)}}))}},{key:"applyStateOnUI",value:function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var n,i,r=this;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="transform"===this.editor.activeStore.tool,e.prev=1,!t.transform){e.next=13;break}return n||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(t.transform),e.next=7,this.editor.wait();case 7:if(this.editor.transformToolStore.onLeave(),n){e.next=13;break}return this.editor.transformToolStore.onEnter(),e.next=12,this.editor.wait();case 12:this.editor.transformToolStore.onLeave();case 13:if(!t.filter){e.next=16;break}return e.next=16,this.editor.filterToolStore.updateStateFromSerialization(t.filter);case 16:if(t.adjustment&&this.editor.adjustmentsToolStore.updateStateFromSerialization(t.adjustment),!t.focus){e.next=20;break}return e.next=20,this.editor.focusToolStore.updateStateFromSerialization(t.focus);case 20:if(!t.overlay){e.next=23;break}return e.next=23,this.editor.overlayToolStore.updateStateFromSerialization(t.overlay);case 23:if(!t.sprite){e.next=29;break}return i=Object.keys(t).length-1,t.customStickers&&(i-=1),t.sprite.spriteIdList=t.sprite.spriteIdList.sort((),e.next=29,this.editor.spriteStore.updateStateFromSerialization(t.sprite,t.customStickers,Math.max(0,i));case 29:if(t.brush&&this.editor.brushToolStore.updateStateFromHistory(t.brush),!t.frame){e.next=33;break}return e.next=33,this.editor.frameToolStore.updateStateFromSerialization(t.frame);case 33:this.editor.outputContainer.updateChildrenContainers(),e.next=39;break;case 36:e.prev=36,e.t0=e.catch(1),"AssetNotFoundError"===e.t0.name?console.error(e.t0):(console.error(e.t0),this.editor.modalStore.showActionModal({type:"error",identifier:"unexpectedError",error:e.t0.message,handleConfirm:function(){r.applyStateOnUI(t)}}));case 39:case"end":return e.stop()}}),e,this,[[1,36]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getDataURL",value:function(e){if(e instanceof HTMLImageElement){var t=e.src;if(function(e){return Dd.test(e)}(t))return t}if(e instanceof HTMLCanvasElement)return e.toDataURL("image/png");var n=document.createElement("canvas");n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0);var i=n.toDataURL("image/png");return(0,Xr.r)(n),i}}]),e}(),Fd=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=0;o<t.length;o+=1)r[o]=t.charCodeAt(o);return new Blob([i],{type:n})},Ad=function(e){return e.split(",")[0].split(":")[1].split(";")[0]},Pd=(0,Xr.b)((0,Xr._a)()),Zd=function(){function e(t){var n=t.license,i=t.assetProvider,r=t.crossOrigin;(0,Hr.Z)(this,e),this.crossOrigin=r,this.engine=new Xr.sb({license:n,crossOrigin:r,assetProvider:i,downscaleOptions:{maxDimensions:{width:100,height:100}}})}return(0,jr.Z)(e,[{key:"getAllFilterPreviewThumbnails",value:function(e){var t=this;return new Promise((function(n,i){var r=[],o=[];e.forEach((),t.getAllDuotonePreview(r).then((function(e){t.getAllLutPreview(o).then(().catch((function(e){i(e)}))})).catch((function(e){i(e)}))}))}},{key:"getAllDuotonePreview",value:function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var n,i,r=this;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},t.length){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,this.engine.addDuoToneFilterFromAssets(t[0],this.container);case 5:return i=e.sent,e.next=8,(0,Pd.default)(t,function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var o,a;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.engine.assetProvider.getDuotoneFilterAsset(t),i.filterOperation.getFilter().set({intensity:.5,lightColor:Xr.jb.Color.fromHex(o.lightColor),darkColor:Xr.jb.Color.fromHex(o.darkColor)}),e.next=5,r.engine.export("data-url","image/png");case 5:a=e.sent,n[t]=a;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{concurrency:1});case 8:return this.engine.removeEffect(i),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadLutAssets",value:function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var n,i=this;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,(0,Pd.default)(t,function(){var e=(0,Zr.Z)(Yr().mark((function e(t){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getImageElement(i.engine.assetProvider.getAssetSource("filter",t));case 2:n[t]=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllLutPreview",value:function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var n,i,r,o=this;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},t.length){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,this.loadLutAssets(t);case 5:return i=e.sent,e.next=8,this.engine.addLUTFilterFromAssets(t[0],this.container);case 8:return r=e.sent,e.next=11,(0,Pd.default)(t,function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var a,s,l,u;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.engine.assetProvider.getLUTFilterAsset(t),s=r.filterOperation.getFilter(),l={horizontalTileCount:a.horizontalTileCount||5,verticalTileCount:a.verticalTileCount||5,image:i[t]},s.set((0,Ur.Z)((0,Ur.Z)({},l),{},{intensity:a.defaultIntensity||1})),r.setProperties({intensity:1}),s._lutPrimitive.set(l),e.next=8,o.engine.export("data-url","image/png");case 8:u=e.sent,n[t]=u;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{concurrency:1});case 11:return this.engine.removeEffect(r),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addImageToContainer",value:function(t){var n=this;return new Promise((function(i,r){var o;e.isImageElement(t)?(o=t,n.setBackgroundImage(o),i()):n.getImageElement(t).then((function(e){o=e,n.setBackgroundImage(o),i()})).catch(()}))}},{key:"getImageElement",value:function(e){var t=this;return new Promise((function(n,i){var r=new Image;r.addEventListener("load",(function(){n(r)})),r.addEventListener("error",(function(e){i(e)})),r.crossOrigin=t.crossOrigin,r.src=e}))}},{key:"setBackgroundImage",value:function(e){this.container?this.container.setData({image:e}):this.container=this.engine.addImage({image:e,blendMode:"normal",opacity:1});var t=this.container.getBounds().size;this.engine.getOutputContainer().setResolution(t)}}],[{key:"isImageElement",value:function(e){return e instanceof HTMLImageElement}}]),e}(),Md={horizontalGuides:[],verticalGuides:[],rotationGuides:[]},zd=function(){function e(t){var n=this;(0,Hr.Z)(this,e),this.previewTopLeftPosition={x:0,y:0},this.init=function(){n.state.horizontalGuides=n.getHorizontalGuidesFromConfig(),n.state.verticalGuides=n.getVerticalGuidesFromConfig(),n.state.rotationGuides=n.getRotationGuidesFromConfig()},this.getGuideValue=function(e,t){var i=n.editor.getPreviewSize(),r=i.height,o=i.width,a=n.configStore.config.snapping.position,s=a.snapToLeft,l=a.snapToRight,u=a.snapToTop,c=a.snapToBottom,h=Math.min(r,o),d=0;return"bottom"===t?d=Math.round(r-h*c):"top"===t?d=Math.round(h*u):"right"===t?d=Math.round(o-h*l):"left"===t?d=Math.round(h*s):"vertical"===e&&"center"===t?d=Math.round(o/2):"horizontal"===e&&"center"===t&&(d=Math.round(r/2)),d},this.getVerticalGuidesFromConfig=function(){var e=n.configStore.config.snapping.position,t=e.snapToVerticalCenter,i=e.snapToLeft,r=e.snapToRight,o=[];return t&&o.push({value:n.getGuideValue("vertical","center"),edge:"center",isVisible:!1,direction:"vertical"}),i&&o.push({value:n.getGuideValue("vertical","left"),edge:"leading",isVisible:!1,direction:"vertical"}),r&&o.push({value:n.getGuideValue("vertical","right"),edge:"trailing",isVisible:!1,direction:"vertical"}),o},this.getHorizontalGuidesFromConfig=function(){var e=n.configStore.config.snapping.position,t=e.snapToHorizontalCenter,i=e.snapToTop,r=e.snapToBottom,o=[];return t&&o.push({value:n.getGuideValue("horizontal","center"),edge:"center",isVisible:!1,direction:"horizontal"}),i&&o.push({value:n.getGuideValue("horizontal","top"),edge:"leading",isVisible:!1,direction:"horizontal"}),r&&o.push({value:n.getGuideValue("horizontal","bottom"),edge:"trailing",isVisible:!1,direction:"horizontal"}),o},this.getRotationGuidesFromConfig=function(){var e=n.configStore.config.snapping.rotation.angles,t=[];return e.forEach((function(e){t.push(e),t.push(e+360),t.push(e-360)})),t.filter(().map((function(e){return{value:e*Math.PI/180,edge:"center",isVisible:!1,position:{x:0,y:0}}}))},this.getSpriteDimensions=function(e){var t=e.leftTop,n=e.leftBottom,i=e.rightTop,r=e.rightBottom,o=Math.min(t.y,i.y,n.y,r.y),a=Math.max(t.y,i.y,n.y,r.y),s=Math.min(t.x,i.x,n.x,r.x),l=Math.max(t.x,i.x,n.x,r.x);return{height:Math.round(a-o),width:Math.round(l-s)}},this.mapRange=function(e){var t=e.value,n=e.fromMin,i=e.fromLength,r=e.toMin;return(t-n)*e.toLength/i+r},this.updateGuides=function(){n.state.horizontalGuides=n.getHorizontalGuidesFromConfig(),n.state.verticalGuides=n.getVerticalGuidesFromConfig()},this.mapToSnapSystem=function(e,t,i,r){if(0===t.length)return e;if(t[0]>e)return e-i;for(var o=0;o<t.length-1;o+=1){var a=t[o],s=t[o+1],l=a+i,u=s-i,c=0;r&&(l+=c=o*i*2,u+=c+2*i);var h=1e-5;if(a<=e&&e<=s)return e<=a+h?a+c:e>=s-h?s+c+(r?2*i:0):n.mapRange({value:e,fromMin:a,fromLength:s-a,toMin:l,toLength:u-l})}return r?e+(t.length-1)*i*2+i:e},this.mapFromSnapSystem=function(e,t,i,r){if(0===t.length)return e;if(t[0]>e)return e>=t[0]-i?t[0]:e+i;for(var o=e,a=0;a<t.length-1;a+=1){var s=t[a],l=t[a+1],u=s+i,c=l-i,h=l;if(r&&(c+=2*i,h+=2*i,o=e-a*i*2),s<=o&&o<=h)return u<=o&&o<=c?n.mapRange({value:o,fromMin:u,fromLength:c-u,toMin:s,toLength:l-s}):o<u?s:l}o-=3*i;var d=t[t.length-1];return o<=d?d:o},this.centerSnapValue=function(e,t){var n=.5*t,i=e.value,r=e.edge,o=i;return"leading"===r?o+=n:"trailing"===r&&(o-=n),o},this.mapSnappingGuidesToCenter=this.calcSnapThresholdInRadians=function(e,t){return 0===e?0:t/e},this.calculatePreviewTopLeftPosition=function(){var e=n.editor.engineMediator.preview.container.getPosition(),t=n.editor.getPreviewSize(),i=(0,Xr.Za)();n.previewTopLeftPosition={x:e.x/i-t.width/2,y:e.y/i-t.height/2}},this.snapToRotation=function(e,t,i){var r=n.state.rotationGuides,o=n.configStore.config.snapping.rotation,a=o.enabled,s=o.threshold,l=n.previewTopLeftPosition,u=l.x,c=l.y,h=n.editor.getPreviewSize().width,d=(e+2*Math.PI)%(2*Math.PI);if(a){var f=new Xr.Pa(t).magnitude,p=r.map((function(e){return e.value})).sort((function(e,t){return e-t})),g=n.calcSnapThresholdInRadians(f,s);if(!n.rotationOffset){var m=n.mapToSnapSystem(e,p,g,!1);n.rotationOffset=m-d}d=n.mapFromSnapSystem(d+n.rotationOffset,p,g,!1);var y={x:i.position.x-u-h,y:i.position.y-c};return r.forEach((function(e){e.isVisible=e.value===d,e.position=y})),d}return e},this.snapToPosition=function(e,t){var i=n.state,r=i.horizontalGuides,o=i.verticalGuides,a=n.configStore.config.snapping.position,s=a.enabled,l=a.threshold,u=new Xr.Pa(n.previewTopLeftPosition),c=n.getSpriteDimensions(t),h=c.height,d=c.width,f=new Xr.Pa(e).subtract(u),p=f.x,g=f.y;if(s){var m=n.mapSnappingGuidesToCenter(r,h).sort((function(e,t){return e-t})),y=n.mapSnappingGuidesToCenter(o,d).sort(();if(!n.positionOffset){var v=n.mapToSnapSystem(p,y,l,!0),_=n.mapToSnapSystem(g,m,l,!0);n.positionOffset=new Xr.Pa(v,_).subtract(new Xr.Pa(p,g))}var b=n.mapFromSnapSystem(p+n.positionOffset.x,y,l,!0),x=n.mapFromSnapSystem(g+n.positionOffset.y,m,l,!0);return b=Math.round(b),x=Math.round(x),r.forEach((function(e){var t=Math.round(n.centerSnapValue(e,h));e.isVisible=t===x})),o.forEach((function(e){var t=Math.round(n.centerSnapValue(e,d));e.isVisible=t===b})),new Xr.Pa(b,x).add(u)}return{x:p,y:g}},this.dispose=this.editor=t,this.configStore=t.configStore,this.state=(0,Xr.e)(Md),this.rotationOffset=null,this.positionOffset=null}return(0,jr.Z)(e,[{key:"hidePositionGuides",value:function(){this.positionOffset=null,this.state.verticalGuides=this.state.verticalGuides.map((function(e){return(0,Ur.Z)((0,Ur.Z)({},e),{},{isVisible:!1})})),this.state.horizontalGuides=this.state.horizontalGuides.map((function(e){return(0,Ur.Z)((0,Ur.Z)({},e),{},{isVisible:!1})}))}},{key:"hideRotationGuides",value:function(){this.rotationOffset=null,this.state.rotationGuides=this.state.rotationGuides.map(()}},{key:"positionGuides",get:function(){var e=this.state,t=e.verticalGuides,n=e.horizontalGuides;return[].concat((0,Mr.Z)(t),(0,Mr.Z)(n))}},{key:"rotationGuides",get:function(){return this.state.rotationGuides}}]),e}();(0,Xr.c)([Xr.e],zd.prototype,"state",2),(0,Xr.c)([Xr.l],zd.prototype,"snapToRotation",2),(0,Xr.c)([Xr.l],zd.prototype,"snapToPosition",2),(0,Xr.c)([Xr.l],zd.prototype,"hidePositionGuides",1),(0,Xr.c)([Xr.l],zd.prototype,"hideRotationGuides",1),(0,Xr.c)([Xr.l],zd.prototype,"dispose",2),(0,Xr.c)([Xr.f],zd.prototype,"positionGuides",1),(0,Xr.c)([Xr.f],zd.prototype,"rotationGuides",1);var Bd=function(){function e(t,n){var i=this;(0,Hr.Z)(this,e),this.initWithImage=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var n;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i.modalStore.showInfoModal("loading"),i.engineMediator.init(),i.snappingStore.init(),e.next=6,i.activeStore.setImage(t);case 6:i.configStore.config.displayResizeWarning&&i.checkImageResize(),i.configStore.config.filter.enablePreviewThumbnails&&"webgl"===i.configStore.config.engine.preferredRenderer&&(n=i.configStore.config.engine,i.previewThumbnails=new Zd((0,Ur.Z)((0,Ur.Z)({},n),{},{license:i.configStore.config.license,assetProvider:i.configStore.assetProvider}))),i.engine&&i.engine.pesdk.on("context-lost",(),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),i.configStore.events.onErrorImageLoading(e.t0),i.modalStore.hideModal(),i.modalStore.showActionModal({type:"error",identifier:e.t0.identifier?e.t0.identifier:"rendering",error:e.t0,handleConfirm:function(){i.initWithImage(t)},handleDismiss:function(){i.activeStore.setImage(void 0)}});case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),this.checkImageResize=function(){i.engine.on("beganImageDownscaling",(),i.engine.on("imageDownscaled",(function(e){var t=e.width,n=e.height,r=i.configStore.config.engine.downscaleOptions.maxMegaPixels,o=Xr.Ma.isMobile()?r.mobile:r.desktop;i.modalStore.hideModal(),i.modalStore.showActionModal({type:"warning",identifier:"imageResized",handleConfirm:function(){i.modalStore.hideModal()},error:{megapixels:"".concat(o),width:"".concat(t),height:"".concat(n)}})}))},this.init=function(e){i.activeStore.image?i.historyStore.isDirty()?i.modalStore.showActionModal({type:"warning",identifier:"discardChanges",handleConfirm:handleDismiss:):(i.historyStore.reset(),i.setImage(e,!0).then((function(){"imageResized"!==i.modalStore.identifier&&i.modalStore.hideModal();var e=i.configStore.config,t=e.engine,n=e.displayCanvasRendererWarning;"canvas"===t.preferredRenderer&&n&&i.modalStore.showActionModal({type:"warning",identifier:"unsupportedWebGLRenderer",handleConfirm:)})).catch((function(){return null}))):i.initWithImage(e)},this.setImage=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){var n,r,o,a,s,l=arguments;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]&&l[1],e.prev=1,i.activeStore.image){e.next=6;break}i.initWithImage(t),e.next=34;break;case 6:return i.activeStore.setImageLoadedToEngine(!1),i.modalStore.showInfoModal(i.configStore.config.displayResizeWarning?"resizing":"loading"),i.scale.defaultScale=1,i.scale.resetOffset(),e.next=12,i.activeStore.setImage(t);case 12:return e.next=14,i.engineMediator.image.addImageToContainer();case 14:return i.canvasStore.resizeCanvas(),i.engineMediator.output.applyNewImageTransform(),i.engineMediator.preview.updateTransform(),i.scale.setInitialTransform(),i.transformToolStore.setCropDefaults(),r=i.transformToolStore.rotateFlipState,o=r.flipHorizontally,a=r.flipVertically,s=r.outputRotation,i.outputContainer.setData({flipVertically:a,flipHorizontally:o}),e.next=23,i.transformToolStore.rotateOutputContainer((0,Xr.db)(s),!1);case 23:return n?(i.focusToolStore.updateCanvasControls(),i.spriteStore.updateCanvasControls(),i.transformToolStore.resetCrop(),i.transformToolStore.applyDefaultCrop(),i.transformToolStore.saveTransforms(),i.transformToolStore.onEnter(),i.transformToolStore.setRotation(i.transformToolStore.rotationInDegrees),i.transformToolStore.onLeave(),i.transformToolStore.onEnter(),i.transformToolStore.onLeave()):i.transformToolStore.saveTransforms(),i.snappingStore.calculatePreviewTopLeftPosition(),i.historyStore.addInitialSnapshot(),e.next=28,i.renderPromise();case 28:i.configStore.config.filter.enablePreviewThumbnails&&"webgl"===i.configStore.config.engine.preferredRenderer&&i.filterToolStore.setImageAndGetPreviews(),i.activeStore.tool?i.configStore.events.onImageLoaded():i.onReady(),"imageResized"!==i.modalStore.identifier&&i.modalStore.hideModal(),i.activeStore.setImageLoadedToEngine(!0),i.resize();case 34:e.next=42;break;case 36:throw e.prev=36,e.t0=e.catch(1),i.configStore.events.onErrorImageLoading(e.t0),i.modalStore.hideModal(),i.modalStore.showActionModal({type:"error",identifier:e.t0.identifier?e.t0.identifier:"rendering",error:e.t0,handleConfirm:function(){i.setImage(t,n)},handleDismiss:function(){i.activeStore.setImage(void 0)}}),new Error(e.t0);case 42:case"end":return e.stop()}}),e,null,[[1,36]])})));return function(t){return e.apply(this,arguments)}}(),this.onToolChange=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e!==r&&(null==(n=null==(t=i.engineMediator)?void 0:t.preview)?void 0:n.container)&&(-1!==[e,r].indexOf("transform")?("transform"===e?(i.transformToolStore.onLeave(),i.transformToolStore.addSnapshot(),i.snappingStore.calculatePreviewTopLeftPosition()):"transform"===r&&i.transformToolStore.onEnter(),i.resize(r)):(i.scale.resetOffset(),i.scale.resetPosition(),i.scale.setScaleToDefault(),i.scale.scaleRender(!0)),o&&i.render())},this.resize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(i.engineMediator)try{var t=i.activeStore.tool,r="transform"===e||!e&&"transform"===t;i.canvasStore.resizeCanvas(e),i.transformToolStore.applyDefaultCrop();var o=(0,Xr.p)(i.transformToolStore.maxCropMaskSize);r||i.transformToolStore.onEnter();var a=i.engineMediator.preview.container.getRotation(),s=i.engineMediator.preview.updateTransform(a);if(s){i.scale.setInitialTransform(),i.transformToolStore.setCropDefaults(),i.transformToolStore.updateCanvasControls(o),i.focusToolStore.updateCanvasControls(),i.spriteStore.updateCanvasControls();var l=i.transformToolStore.getScaleWithFlip(a);i.engineMediator.preview.container.setScale(l),r||(i.transformToolStore.onLeave(),i.transformToolStore.onEnter(),i.transformToolStore.onLeave()),i.snappingStore.calculatePreviewTopLeftPosition(),i.render()}}catch(n){i.configStore.events.onErrorImageLoading(n),i.modalStore.showActionModal({type:"error",identifier:"rendering",handleConfirm:handleDismiss:)}},this.export=(0,Zr.Z)(Yr().mark((function e(){var t,n,r,o,a,s,l,u,c,h,d,f,p=arguments;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},n=t.preventExportEvent,r=(0,Nr.Z)(t,ro),o="transform"===i.activeStore.tool,e.prev=2,i.modalStore.showInfoModal("exporting"),o&&i.transformToolStore.onLeave(),a=i.configStore.config,s=(0,Ur.Z)((0,Ur.Z)({},a.export.image),r),l=s.exportType,u=s.format,c=s.quality,h=s.enableDownload,d=s.transparent,e.next=10,i.engineMediator.engine.export(l,u,c,d);case 10:if(f=e.sent,!o||!i.transformToolStore){e.next=15;break}return i.transformToolStore.onEnter(),e.next=15,i.render();case 15:return i.historyStore&&(i.historyStore.isDirtySinceSave=!1),i.modalStore&&i.modalStore.hideModal(),h&&i.triggerFileDownload(a.export.filename,u,l,f),n||i.configStore.events.onExport(f),e.abrupt("return",f);case 22:if(e.prev=22,e.t0=e.catch(2),i.modalStore&&i.modalStore.hideModal(),!o||!i.transformToolStore){e.next=29;break}return i.transformToolStore.onEnter(),e.next=29,i.render();case 29:throw new Error(e.t0);case 30:case"end":return e.stop()}}),e,null,[[2,22]])}))),this.serialize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{image:!0},t=e.image;return i.serializationMediator?i.serializationMediator.serialize({image:t}):Promise.resolve({})},this.deserialize=this.close=function(){var e,t,n,r;(null==(e=i.historyStore)?void 0:e.isDirtySinceSave)&&(null==(n=null==(t=i.configStore)?void 0:t.config)?void 0:n.displayCloseWarning)&&i.modalStore?i.modalStore.showActionModal({type:"warning",identifier:"unsavedChanges",handleConfirm:function(){var e;(null==(e=i.configStore)?void 0:e.events)&&i.configStore.events.onClose()}}):(null==(r=i.configStore)?void 0:r.events)&&i.configStore.events.onClose()},this.hasChanges=this.getImageDimensions=function(){if(i.engine){var e=i.engine.getOutputDimensions();return{width:e.width,height:e.height}}return{width:0,height:0}},this.wait=this.clickableCanvas=function(){var e=(0,Zr.Z)(Yr().mark((function e(t){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,new Promise(();case 3:i.canvasStore.enableCanvasClick(),e.next=7;break;case 6:i.canvasStore.disableCanvasClick();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.onReady=(0,Zr.Z)(Yr().mark((function e(){var t,n,r,o;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.configStore.config.forceCrop,i.activeStore.selectTool(i.configStore.defaultTool),t&&(n=i.transformToolStore.localOutputImageSize,r=n.width/n.height,-1!==(o=i.transformToolStore.entityManager.items.map((function(e){return e.ratio?e.ratio:e.dimensions.x/e.dimensions.y}))).indexOf("*")?console.error('ForceCrop will not work if "*" is one of the ratios'):-1===o.indexOf(parseFloat(r.toFixed(2)))&&i.activeStore.selectTool("transform")),i.configStore.events.onEditorReady();case 4:case"end":return e.stop()}}),e)}))),this.addSnapshot=this.resetToolStates=function(){i.transformToolStore.pureReset(),i.filterToolStore.pureReset(),i.focusToolStore.pureReset(),i.adjustmentsToolStore.pureReset(),i.overlayToolStore.pureReset(),i.frameToolStore.pureReset(),i.brushToolStore.pureReset(),i.spriteStore.pureReset(),i.historyStore.reset(),i.render()},this.getAssetPath=this.render=(0,Zr.Z)(Yr().mark(()),this.applyFlipToPreview=function(e){return i.engineMediator?i.engineMediator.previewSpaceToFlippedPreviewSpace(e):{x:0,y:0}},this.getPreviewSize=function(){if(!i.engine)return{width:0,height:0};var e=i.engine.getOutputDimensions(),t=e.width,n=e.height;return t&&n?{width:Math.round(i.worldToPreview(i.outputToWorld(t))),height:Math.round(i.worldToPreview(i.outputToWorld(n)))}:{height:n,width:t}},this.getImageMimeType=function(){return function(e){return"string"===typeof e?Ad(e):e.src.includes(".svg")?"image/svg+xml":e.src?Ad(e.src):"image/jpeg"}(i.activeStore.image)},this.cleanUpCanvasMemory=function(){var e,t,n;null==(n=null==(t=null==(e=i.engineMediator)?void 0:e.image)?void 0:t.container)||n.dispose()},this.dispose=function(){i.engineMediator&&(i.engineMediator.dispose(),i.engineMediator=null),i.serializationMediator=null,i.spriteStore&&(i.spriteStore.dispose(),i.spriteStore=null),i.scale=null,i.filterToolStore=null,i.adjustmentsToolStore=null,i.focusToolStore=null,i.overlayToolStore=null,i.frameToolStore=null,i.brushToolStore=null,i.transformToolStore&&(i.transformToolStore.dispose(),i.transformToolStore=null),i.libraryStore&&(i.libraryStore.dispose(),i.libraryStore=null),i.modalStore&&(i.modalStore.dispose(),i.modalStore=null),i.snappingStore&&(i.snappingStore.dispose(),i.snappingStore=null),i.activeStore&&(i.activeStore.dispose(),i.activeStore=null),i.canvasStore&&(i.canvasStore.dispose(),i.canvasStore=null),i.historyStore=null,i.configStore&&(i.configStore.dispose(),i.configStore=null)},this.triggerFileDownload=function(e,t,n,r){var o=e+("image/jpeg"===t&&"ms-blob"!==n?".jpeg":".png"),a=i.blobFromExportData(r);i.triggerBlobDownload(o,a)},this.triggerBlobDownload=function(e,t){if(navigator.msSaveBlob)navigator.msSaveBlob(t,e);else{var n=document.createElement("a"),i=URL.createObjectURL(t);n.href=i,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),(0,Xr.w)()||URL.revokeObjectURL(i)}},this.blobFromExportData=function(e){return"string"===typeof e?Fd(e):e instanceof HTMLImageElement?Fd(e.src):e},this.configStore=new jh,n&&Object.entries(n).forEach((function(e){var t=(0,Lr.Z)(e,2),n=t[0],r=t[1];i.configStore.events.on(n,r)}));var r=this.configStore.saveConfig(t);this.engineMediator=new Kh(this),this.serializationMediator=new Od(this),this.spriteStore=new Cd(this),this.scale=new ud(this),this.filterToolStore=new Xc(this),this.adjustmentsToolStore=new Wc(this),this.focusToolStore=new th(this),this.overlayToolStore=new oh(this),this.frameToolStore=new Th(this),this.brushToolStore=new Dh(this),this.transformToolStore=new _d(this),this.libraryStore=new Ed(this),this.modalStore=new ld(this),this.snappingStore=new zd(this),this.activeStore=new id(this),this.canvasStore=new ad(this),this.historyStore=new Qh(this),this.libraryStore.initProvider(r),this.libraryStore.fetchImages(),this.configStore.config.image?this.initWithImage(this.configStore.config.image):(this.configStore.events.onEditorReady(),"library"!==this.configStore.defaultTool&&"customTool"!==this.configStore.defaultTool||this.activeStore.selectTool(this.configStore.defaultTool))}return(0,jr.Z)(e,[{key:"shortestOutputSide",get:function(){var e=this.outputContainer.getBounds();return Math.min(e.width,e.height)}},{key:"assetProvider",get:function(){return this.configStore.assetProvider}},{key:"engine",get:function(){return this.engineMediator?this.engineMediator.engine:null}},{key:"imageContainer",get:,{key:"orderHelper",get:function(){return this.engineMediator?this.engineMediator.orderHelper:null}},{key:"renderPromise",value:function(){return this.engineMediator?this.engineMediator.render(this.engineMediator.preview.container):null}},{key:"previewToWorld",value:function(e,t){return this.engineMediator?((0,Xr.ab)(e),this.engineMediator.previewSpaceToWorldSpace(e,t)):{x:0,y:0}}},{key:"worldToPreview",value:function(e){return this.engineMediator?((0,Xr.ab)(e),this.engineMediator.worldSpaceToPreviewSpace(e)):{x:0,y:0}}},{key:"worldSizeToPreview",value:function(e){return this.engineMediator?{width:this.engineMediator.worldSpaceToPreviewSpace(e.width),height:this.engineMediator.worldSpaceToPreviewSpace(e.height)}:{width:0,height:0}}},{key:"previewSizeToWorld",value:function(e,t){return this.engineMediator?{width:this.engineMediator.previewSpaceToWorldSpace(e.width,t),height:this.engineMediator.previewSpaceToWorldSpace(e.height,t)}:{width:0,height:0}}},{key:"outputToWorld",value:function(e){return this.engineMediator?((0,Xr.ab)(e),this.engineMediator.outputSpaceToWorldSpace(e)):{x:0,y:0}}},{key:"previewToOutput",value:function(e){return this.engineMediator?((0,Xr.ab)(e),this.engineMediator.previewSpaceToOutputSpace(e)):{x:0,y:0}}},{key:"outputContainer",get:function(){return this.engineMediator.output.container}}]),e}();(0,Xr.c)([Xr.l],Bd.prototype,"resize",2),(0,Xr.c)([Xr.l],Bd.prototype,"export",2),(0,Xr.c)([Xr.l],Bd.prototype,"clickableCanvas",2);var Ld=Ud=(0,Kr.ZP)(lc)(Lt||(Lt=(0,Gr.Z)(["\n  margin: 2px;\n  min-width: ","px;\n  height: ","px;\n  color: ",";\n"])),(function(e){return e.theme.measurements.basicCard.large.width}),(function(e){return e.theme.measurements.basicCard.large.height}),(function(e){return e.theme.card.foreground})),Nd=(0,Kr.ZP)(lc)(Ut||(Ut=(0,Gr.Z)(["\n  margin: 2px;\n  min-width: ","px;\n  height: ","px;\n  color: ",";\n"])),(function(e){return e.theme.measurements.basicCard.medium.width}),(function(e){return e.theme.measurements.basicCard.medium.height}),(function(e){return e.theme.card.foreground})),Hd=(0,Kr.ZP)(du).attrs((function(){return{"data-test":Xr.Sa.CardContainer}}))(Nt||(Nt=(0,Gr.Z)(["\n  transition-property: width;\n  transition-duration: 0.4s;\n  transition-timing-function: ease-in;\n  height: ","px;\n"])),(function(e){return e.theme.measurements.basicUIToolControlBar.itemsBarHeight})),jd=(0,Kr.ZP)(Ho)(Ht||(Ht=(0,Gr.Z)(["\n  &&& {\n    min-height: 32px;\n    font-size: ","px;\n    letter-spacing: ","px;\n    text-transform: ",";\n  }\n"])),(function(e){return e.theme.measurements.fontSystem.basicUICardLabel.size}),(function(e){return e.theme.measurements.fontSystem.basicUICardLabel.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.basicUICardLabel.case})),Wd=Kr.ZP.div(jt||(jt=(0,Gr.Z)(["\n  display: flex;\n  /* This fixes an IE11 issue where the items are behind the category */\n  flex: 1 0 auto;\n"]))),Vd=Kr.ZP.div.attrs((function(){return{"data-test":Xr.Sa.BasicToolControlBar}}))(Wt||(Wt=(0,Gr.Z)(["\n  position: relative;\n  display: flex;\n  flex-shrink: 0;\n  height: auto;\n  transition: max-height 0.4s ease-in-out;\n  ","\n"])),(function(e){return e.show?(0,Kr.iv)(Vt||(Vt=(0,Gr.Z)(["\n          max-height: 80px;\n        "]))):(0,Kr.iv)(Gt||(Gt=(0,Gr.Z)(["\n          max-height: 0px;\n        "])))})),Gd=Vd;Vd.defaultProps={show:!0};var qd=Kr.ZP.div(qt||(qt=(0,Gr.Z)(["\n  text-align: -moz-center;\n  text-align: center;\n  text-align: -webkit-center;\n  margin: 0 10vw;\n  height: auto;\n  box-shadow: ",";\n  @media all and (min-width: 0) and (max-width: 599px) {\n    margin: 0 5vw;\n  }\n"])),(function(e){return e.theme.toolControlBar.shadow})),Yd=qd,Xd=Kr.ZP.div(Yt||(Yt=(0,Gr.Z)(["\n  width: 100px;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    width: 42px;\n  }\n"]))),Kd=Kr.ZP.div.attrs((function(){return{"data-test":Xr.Sa.ToolControlBarExpandableControls}}))(Xt||(Xt=(0,Gr.Z)(["\n  position: absolute;\n  left: 0%;\n  transform: translateY(0%) scaleY(0);\n  justify-content: center;\n  padding: 0 5vw;\n  width: 90%;\n  height: ","px;\n  display: flex;\n  align-items: center;\n  transition: transform 0.4s ease-in-out;\n  z-index: ",";\n  background: ",";\n  color: ",";\n\n  ","\n"])),(function(e){return e.theme.measurements.basicUIToolControlBar.controlsBarHeight}),(function(e){return e.theme.measurements.zIndex.controlsBar}),(function(e){return e.theme.toolControlBar.background}),(function(e){return e.theme.toolControlBar.inputLabelForeground}),(function(e){return e.show&&(0,Kr.iv)(Kt||(Kt=(0,Gr.Z)(["\n      transform: translateY(-100%) scaleY(1);\n    "])))})),Jd=Kr.ZP.div(Jt||(Jt=(0,Gr.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),Qd=function(e){var t=e.label,n=e.className,i=e.children;return Jr.createElement(Jd,{"aria-label":t,className:n},i)};ar ef=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"})))},tf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),Jr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",null,Jr.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),Jr.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"})))},nf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"})))},rf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"})))},of=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"})))},af=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"#fff"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"})))},sf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"})))},lf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"})))},uf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"})))},cf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"})))},hf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"})))},df=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"})))},ff=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),Jr.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"})))};var pf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",{fill:"#fff"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),Jr.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))},gf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),Jr.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"})))},mf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),Jr.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"})))};var yf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",{fill:"#fff"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),Jr.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))},vf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",{fill:"#fff"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),Jr.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"})))};var _f=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H48V48H0z"}),Jr.createElement("mask",{fill:"#fff"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),Jr.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))},bf=function(){return Jr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Jr.createElement("g",{fill:"none",fillRule:"evenodd"},Jr.createElement("g",null,Jr.createElement("g",{fill:"#D8D8D8",opacity:"0"},Jr.createElement("rect",{width:"48",height:"48"})),Jr.createElement("g",{transform:"translate(12 12)"},Jr.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),Jr.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},Jr.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),Jr.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),Jr.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),Jr.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},Jr.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),Jr.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},Jr.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),Jr.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"}))))))};var xf=function(){return Jr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),Jr.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),Jr.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),Jr.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),Jr.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))},kf=function(){return Jr.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Jr.createElement("g",{fill:"none",fillRule:"evenodd"},Jr.createElement("g",null,Jr.createElement("g",{fill:"#D8D8D8",opacity:"0"},Jr.createElement("rect",{width:"48",height:"48"})),Jr.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},Jr.createElement("g",null,Jr.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),Jr.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),Jr.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"}))))))},wf=function(){return Jr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Jr.createElement("g",{fill:"none",fillRule:"evenodd"},Jr.createElement("g",null,Jr.createElement("g",{fill:"#D8D8D8",opacity:"0"},Jr.createElement("rect",{width:"48",height:"48"})),Jr.createElement("g",{transform:"translate(12 12)"},Jr.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),Jr.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},Jr.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),Jr.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),Jr.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"}))))))},Sf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Jr.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),Jr.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),Jr.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),Jr.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"})))},Cf=function(){return Jr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Jr.createElement("g",{fill:"none",fillRule:"evenodd"},Jr.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},Jr.createElement("g",null,Jr.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),Jr.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),Jr.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),Jr.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),Jr.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),Jr.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},Jr.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),Jr.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"}))))))},Tf=function(){return Jr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Jr.createElement("g",{fill:"none",fillRule:"evenodd"},Jr.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},Jr.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),Jr.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"}))))},Ef=function(){return Jr.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},Jr.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Jr.createElement("g",null,Jr.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},Jr.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},Jr.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),Jr.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),Jr.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),Jr.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"})))))},Df=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},Jr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),Jr.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),Jr.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"})))},If=function(){return Jr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Jr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),Jr.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),Jr.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"})))};var Rf=function(){return Jr.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},Jr.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),Jr.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),Jr.createElement("g",{fillOpacity:"0.2"},Jr.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),Jr.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))},Of=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),Jr.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"})))},Ff=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Jr.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"}))},Af=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Jr.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"}))};var Pf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))},Zf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),Jr.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"})))},Mf=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{d:"M0 0H24V24H0z"}),Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"})))},zf=function(e){var t=e.highlight,n=void 0===t?"currentColor":t,i=e.width,r=void 0===i?48:i,o=e.height,a=void 0===o?48:o;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:a,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("g",{fill:n,transform:"translate(13 13)"},Jr.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),Jr.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),Jr.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),Jr.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),Jr.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),Jr.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),Jr.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),Jr.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),Jr.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),Jr.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),Jr.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),Jr.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),Jr.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),Jr.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),Jr.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),Jr.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"}))))},Bf=function(e){var t=e.highlight,n=void 0===t?"currentColor":t,i=e.width,r=void 0===i?48:i,o=e.height,a=void 0===o?48:o;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:a,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{fill:n,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"})))},Lf=function(e){var t=e.highlight,n=void 0===t?"currentColor":t,i=e.width,r=void 0===i?48:i,o=e.height,a=void 0===o?48:o;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:a,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("g",{fill:n,transform:"translate(13 13)"},Jr.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),Jr.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),Jr.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"}))))},Uf=function(e){var t=e.highlight,n=void 0===t?"currentColor":t,i=e.width,r=void 0===i?48:i,o=e.height,a=void 0===o?48:o;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:a,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("path",{fill:n,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"})))},Nf=Kr.ZP.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})(Qt||(Qt=(0,Gr.Z)([""]))),Hf=function(e){var t=e.highlight,n=void 0===t?"#565656":t,i=e.width,r=void 0===i?32:i,o=e.height,a=void 0===o?32:o;return Jr.createElement(Nf,{width:r,height:a,viewBox:"0 0 32 32"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("g",{fill:n,transform:"translate(-8 -8)"},Jr.createElement("g",{transform:"translate(8 8)"},Jr.createElement("g",null,Jr.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),Jr.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),Jr.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),Jr.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),Jr.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),Jr.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),Jr.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),Jr.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),Jr.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),Jr.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),Jr.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),Jr.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),Jr.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),Jr.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),Jr.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),Jr.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),Jr.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),Jr.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),Jr.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),Jr.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),Jr.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),Jr.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),Jr.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),Jr.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"}))))))},jf=function(e){var t=e.highlight,n=void 0===t?"#565656":t,i=e.width,r=void 0===i?32:i,o=e.height,a=void 0===o?48:o;return Jr.createElement(Nf,{width:r,height:a,viewBox:"0 0 42 32"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("g",{fill:n,transform:"translate(-3 -8)"},Jr.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"}))))},Wf=function(e){var t=e.highlight,n=void 0===t?"#565656":t,i=e.width,r=void 0===i?26:i,o=e.height,a=void 0===o?46:o;return Jr.createElement(Nf,{width:r,height:a,viewBox:"0 0 26 46"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("g",{fill:n,transform:"translate(-11 -1)"},Jr.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"}))))},Vf=function(e){var t=e.highlight,n=void 0===t?"#565656":t,i=e.width,r=void 0===i?26:i,o=e.height,a=void 0===o?46:o;return Jr.createElement(Nf,{width:r,height:a,viewBox:"0 0 26 46"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("g",{fill:n,transform:"translate(-11 -1)"},Jr.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"}))))},Gf=function(e){var t=e.highlight,n=void 0===t?"#565656":t,i=e.mask,r=void 0===i?"#fff":i,o=e.width,a=void 0===o?32:o,s=e.height,l=void 0===s?32:s;return Jr.createElement(Nf,{width:a,height:l,viewBox:"0 0 32 32"},Jr.createElement("defs",null,Jr.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("g",{transform:"translate(-8 -8)"},Jr.createElement("g",{transform:"translate(7.08 7.293)"},Jr.createElement("mask",{fill:r},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),Jr.createElement("use",{fill:n,xlinkHref:"#photoeditorsdk-square-icon"})))))},qf=function(e){var t=e.highlight,n=void 0===t?"#565656":t,i=e.width,r=void 0===i?32:i,o=e.height,a=void 0===o?42:o;return Jr.createElement(Nf,{width:r,height:a,viewBox:"0 0 32 42"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("g",{fill:n,transform:"translate(-8 -3)"},Jr.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"}))))},Yf=function(e){var t=e.main,n=void 0===t?"#424242":t,i=e.highlight,r=void 0===i?"#565656":i,o=e.width,a=void 0===o?"48px":o,s=e.height,l=void 0===s?"48px":s;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:l,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),Jr.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:r,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),Jr.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),Jr.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),Jr.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:n,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),Jr.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),Jr.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:n,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"})))},Xf=function(e){var t=e.main,n=void 0===t?"#424242":t,i=e.highlight,r=void 0===i?"#565656":i,o=e.width,a=void 0===o?"48px":o,s=e.height,l=void 0===s?"48px":s;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:l,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("g",null,Jr.createElement("path",{fill:n,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),Jr.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:n,rx:"1"}),Jr.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:n,rx:"1"}),Jr.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:n,rx:"1"}),Jr.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:r,rx:"1"}),Jr.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:n,rx:"1"}))))},Kf=function(e){var t=e.main,n=void 0===t?"#424242":t,i=e.highlight,r=void 0===i?"#565656":i,o=e.width,a=void 0===o?"48px":o,s=e.height,l=void 0===s?"48px":s;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:l,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("g",{transform:"translate(5 5)"},Jr.createElement("path",{fill:r,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),Jr.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:n,rx:"1"}),Jr.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:n,rx:"1"}),Jr.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:n,rx:"1"}),Jr.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:n,rx:"1"}),Jr.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:n,rx:"1"}))))},Jf=function(e){var t=e.main,n=void 0===t?"#424242":t,i=e.highlight,r=void 0===i?"#565656":i,o=e.width,a=void 0===o?"48px":o,s=e.height,l=void 0===s?"48px":s;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:l,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:n,rx:"1"}),Jr.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:n,rx:"1"}),Jr.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:n,rx:"1"}),Jr.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:n,rx:"1"}),Jr.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:n,rx:"1"}),Jr.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:r,rx:"1"})))},Qf=function(e){var t=e.main,n=void 0===t?"#424242":t,i=e.highlight,r=void 0===i?"#565656":i,o=e.width,a=void 0===o?"48px":o,s=e.height,l=void 0===s?"48px":s;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:l,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:n,rx:"1"}),Jr.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:r,rx:"1"}),Jr.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:n,rx:"1"}),Jr.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:n,rx:"1"}),Jr.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:n,rx:"1"}),Jr.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:n,rx:"1"})))},$f=function(e){var t=e.main,n=void 0===t?"#424242":t,i=e.highlight,r=void 0===i?"#565656":i,o=e.width,a=void 0===o?"48px":o,s=e.height,l=void 0===s?"48px":s;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:l,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:n,rx:"1"}),Jr.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:r,rx:"1"}),Jr.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:n,rx:"1"}),Jr.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:n,rx:"1"}),Jr.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:n,rx:"1"}),Jr.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:n,rx:"1"})))},ep=function(e){var t=e.main,n=void 0===t?"#424242":t,i=e.highlight,r=void 0===i?"#565656":i,o=e.width,a=void 0===o?"48px":o,s=e.height,l=void 0===s?"48px":s;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:l,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:r,rx:"1.5"}),Jr.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:n,rx:"1"})))},tp=function(e){var t=e.main,n=void 0===t?"#424242":t,i=e.highlight,r=void 0===i?"#565656":i,o=e.shadow,a=void 0===o?"#333333":o,s=e.width,l=void 0===s?"48px":s,u=e.height,c=void 0===u?"48px":u;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:l,height:c,viewBox:"0 0 48 48"},Jr.createElement("defs",null,Jr.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},Jr.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:r,rx:"0.5"}),Jr.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:a,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),Jr.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:n,rx:"1"})))},np=function(e){var t=e.main,n=void 0===t?"#424242":t,i=e.highlight,r=void 0===i?"#565656":i,o=e.width,a=void 0===o?"48px":o,s=e.height,l=void 0===s?"48px":s;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:l,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:r,rx:"1"})))},ip=function(e){var t=e.main,n=void 0===t?"#424242":t,i=e.highlight,r=void 0===i?"#565656":i,o=e.width,a=void 0===o?"48px":o,s=e.height,l=void 0===s?"48px":s;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:l,viewBox:"0 0 48 48"},Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:r,rx:"0.5"}),Jr.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:n,rx:"0.5"}),Jr.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:n,rx:"1"})))},rp=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"})))},op=function(e){var t=e.height,n=void 0===t?3:t,i=e.width,r=void 0===i?102:i,o=e.x,a=void 0===o?-102:o,s=e.className,l=e.style;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:n,viewBox:"0 0 102 3",className:s,style:l},Jr.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},Jr.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),Jr.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),Jr.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),Jr.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),Jr.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),Jr.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),Jr.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),Jr.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),Jr.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),Jr.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:1.5*-r,y:"0",width:4*r,height:"3",transform:"translate(".concat(a,", 0)")}))},ap=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},Jr.createElement("mask",{fill:"currentColor"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"})))},sp=function(){return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Jr.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"}))},lp=function(e){var t=e.className;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:t},Jr.createElement("title",null,"Flip Horizontal"),Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},Jr.createElement("mask",{fill:"none"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})))},up=function(e){var t=e.className;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:t},Jr.createElement("title",null,"Flip Vertical"),Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},Jr.createElement("mask",{fill:"none"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"})))},cp=function(e){var t=e.alt,n=void 0===t?"Rotate":t,i=e.className;return Jr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:i},Jr.createElement("title",null,n),Jr.createElement("defs",null,Jr.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),Jr.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},Jr.createElement("mask",{fill:"none"},Jr.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),Jr.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"})))},hp=($t={},(0,Br.Z)($t,"adjustment",bf),(0,Br.Z)($t,"filter",kf),(0,Br.Z)($t,"library",Cf),(0,Br.Z)($t,"overlay",Tf),(0,Br.Z)($t,"focus",wf),(0,Br.Z)($t,"sticker",Ef),(0,Br.Z)($t,"text",Df),(0,Br.Z)($t,"textdesign",If),(0,Br.Z)($t,"frame",Sf),(0,Br.Z)($t,"transform",Rf),(0,Br.Z)($t,"brush",xf),$t),dp={left:vf,right:_f,center:yf},fp={addText:Of,openWebcam:Ff,reset:Af,shuffle:Pf,uploadImage:Zf},pp={undo:mf,redo:gf,close:ff,export:pf},gp={categories:(en={},(0,Br.Z)(en,"imgly_transforms_common",zf),(0,Br.Z)(en,"imgly_transforms_facebook",Bf),(0,Br.Z)(en,"imgly_transforms_twitter",Uf),(0,Br.Z)(en,"imgly_transforms_instagram",Lf),en),crops:(tn={},(0,Br.Z)(tn,"imgly_transform_common_custom",Hf),(0,Br.Z)(tn,"imgly_transform_common_square",Gf),(0,Br.Z)(tn,"imgly_transform_common_3",qf),(0,Br.Z)(tn,"imgly_transform_common_4",jf),(0,Br.Z)(tn,"imgly_transform_common_9",Wf),(0,Br.Z)(tn,"imgly_transform_common_16",Vf),(0,Br.Z)(tn,"imgly_transform_facebook_post",Yf),(0,Br.Z)(tn,"imgly_transform_facebook_profile",Xf),(0,Br.Z)(tn,"imgly_transform_facebook_title",Kf),(0,Br.Z)(tn,"imgly_transform_instagram_landscape",Jf),(0,Br.Z)(tn,"imgly_transform_instagram_portrait",Qf),(0,Br.Z)(tn,"imgly_transform_instagram_square",$f),(0,Br.Z)(tn,"imgly_transform_instagram_story",ep),(0,Br.Z)(tn,"imgly_transform_twitter_post",tp),(0,Br.Z)(tn,"imgly_transform_twitter_profile",np),(0,Br.Z)(tn,"imgly_transform_twitter_title",ip),tn),dots:op,duplicate:ap,edit:sp,bringToFront:Mf,delete:rp,flipHorizontal:lp,flipVertical:up,rotate:cp},mp=(nn={},(0,Br.Z)(nn,"brightness",tf),(0,Br.Z)(nn,"contrast",rf),(0,Br.Z)(nn,"saturation",lf),(0,Br.Z)(nn,"clarity",nf),(0,Br.Z)(nn,"shadows",uf),(0,Br.Z)(nn,"highlights",sf),(0,Br.Z)(nn,"exposure",of),(0,Br.Z)(nn,"gamma",af),(0,Br.Z)(nn,"blacks",ef),(0,Br.Z)(nn,"whites",df),(0,Br.Z)(nn,"temperature",hf),(0,Br.Z)(nn,"sharpness",cf),nn),yp=Kr.ZP.div(rn||(rn=(0,Gr.Z)(["\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  max-width: calc(100% - ","px);\n"])),(function(e){return e.maxWidth})),vp=function(e){var t=e.children,n=$d().config,i=0;return n.isLayoutAdvanced&&(i=n.measurements.advancedUIToolbar.width+n.measurements.advancedUIToolControlBar.width),Jr.createElement(yp,{maxWidth:i},t)},_p=Kr.ZP.div.attrs((function(){return{"data-test":Xr.Sa.MainCanvasActionBar}}))(on||(on=(0,Gr.Z)(["\n  &&& {\n    display: ",";\n    flex-direction: row;\n    align-items: center;\n    height: ","px;\n    color: ",";\n    border-bottom: 1px solid\n      ",";\n    padding: 8px 24px;\n    box-sizing: border-box;\n    position: absolute;\n    width: 100%;\n    z-index: ",";\n    background: ",";\n    ","\n  }\n"])),(,(function(e){return e.theme.measurements.mainCanvasActionBar.height}),(function(e){return e.theme.mainCanvasActionBar.foreground}),(function(e){return e.theme.mainCanvasActionBar.borderColor}),(function(e){return e.theme.measurements.zIndex.canvas.bar}),(,(),bp=Kr.ZP.canvas(ln||(ln=(0,Gr.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]))),xp=Kr.ZP.div.attrs({role:"main"})(un||(un=(0,Gr.Z)(["\n  background-color: ",";\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-basis: auto;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  /* added this for safari, else the webcam overlay did not know the height */\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  margin-top: ","px;\n"])),(function(e){return e.theme.canvas.background}),(),kp=Kr.ZP.div.attrs((function(e){var t=e.height,n=e.width;return{style:{height:"".concat(t,"px"),width:"".concat(n,"px")}}}))(cn||(cn=(0,Gr.Z)(["\n  border-style: solid;\n  border-width: 2px 0 2px 0;\n  border-color: ",";\n  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),\n    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);\n  cursor: move;\n  position: absolute;\n"])),(function(e){return e.theme.canvas.controlsOutline})),wp=Kr.ZP.div.attrs((function(e){var t=e.radius;return{style:{height:"".concat(2*t,"px"),width:"".concat(2*t,"px")}}}))(hn||(hn=(0,Gr.Z)(["\n  border-radius: 50%;\n  border: 2px solid ",";\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),\n    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n  cursor: move;\n"])),(function(e){return e.theme.canvas.controlsOutline})),Sp=Kr.ZP.div(dn||(dn=(0,Gr.Z)(["\n  position: relative;\n  height: inherit;\n  width: inherit;\n"]))),Cp=Kr.ZP.div((function(e){var t=e.theme.measurements.canvasControls.corner.touchable,n=t.desktop,i=t.mobile,r=n/4,o=i/2;return(0,Kr.iv)(fn||(fn=(0,Gr.Z)(["\n    position: absolute;\n    width: ","px;\n    height: ","px;\n    ","\n    ","\n  ","\n  ","\n  @media all and (min-width: 0) and (max-width: 599px) {\n      width: ","px;\n      height: ","px;\n      ","\n      ","\n    }\n  "])),n,n,(function(e){return"top"===e.vertical?(0,Kr.iv)(pn||(pn=(0,Gr.Z)(["\n            top: 0px;\n          "]))):(0,Kr.iv)(gn||(gn=(0,Gr.Z)(["\n            bottom: 0px;\n          "])))}),(function(e){return"left"===e.horizontal?(0,Kr.iv)(mn||(mn=(0,Gr.Z)(["\n            left: 0px;\n          "]))):(0,Kr.iv)(yn||(yn=(0,Gr.Z)(["\n            right: 0px;\n          "])))}),(function(e){return"top"===e.vertical?(0,Kr.iv)(vn||(vn=(0,Gr.Z)(["\n            margin-top: -","px;\n          "])),r):(0,Kr.iv)(_n||(_n=(0,Gr.Z)(["\n            margin-bottom: -","px;\n          "])),r)}),(function(e){return"left"===e.horizontal?(0,Kr.iv)(bn||(bn=(0,Gr.Z)(["\n            margin-left: -","px;\n          "])),r):(0,Kr.iv)(xn||(xn=(0,Gr.Z)(["\n            margin-right: -","px;\n          "])),r)}),i,i,(function(e){return"top"===e.vertical?(0,Kr.iv)(kn||(kn=(0,Gr.Z)(["\n              margin-top: -","px;\n            "])),o):(0,Kr.iv)(wn||(wn=(0,Gr.Z)(["\n              margin-bottom: -","px;\n            "])),o)}),(function(e){return"left"===e.horizontal?(0,Kr.iv)(Sn||(Sn=(0,Gr.Z)(["\n              margin-left: -","px;\n            "])),o):(0,Kr.iv)(Cn||(Cn=(0,Gr.Z)(["\n              margin-right: -","px;\n            "])),o)}))})),Tp=(0,Kr.ZP)(Cp)((function(e){var t="right"===e.horizontal?e.borderWidth:0,n="bottom"===e.vertical?e.borderWidth:0,i="left"===e.horizontal?e.borderWidth:0,r="top"===e.vertical?e.borderWidth:0,o="".concat(r,"px ").concat(t,"px ").concat(n,"px ").concat(i,"px"),a="left"===e.horizontal&&"bottom"===e.vertical||"right"===e.horizontal&&"top"===e.vertical?"nesw-resize":"nwse-resize",s=e.theme.measurements.canvasControls.corner.touchable.desktop/4-e.borderWidth,l=e.theme.measurements.canvasControls.corner.touchable.mobile/4+e.borderWidth;return(0,Kr.iv)(Tn||(Tn=(0,Gr.Z)(["\n    &:before {\n      display: block;\n      position: absolute;\n      content: '';\n      width: ","px;\n      height: ","px;\n      z-index: ",";\n      border-color: ",";\n      border-style: solid;\n      border-width: ",";\n      pointer-events: auto;\n      ","\n      ","\n      @media all and (min-width: 0) and (max-width: 599px) {\n        ","\n        ","\n      }\n    }\n    cursor: ",";\n    pointer-events: none;\n  "])),(function(e){return e.theme.measurements.canvasControls.corner.size}),(function(e){return e.theme.measurements.canvasControls.corner.size}),(function(e){return e.theme.measurements.zIndex.canvas.controls}),(function(e){return e.theme.canvas.controlsColor}),o,"top"===e.vertical?(0,Kr.iv)(En||(En=(0,Gr.Z)(["\n            top: ","px;\n          "])),s):(0,Kr.iv)(Dn||(Dn=(0,Gr.Z)(["\n            bottom: ","px;\n          "])),s),"left"===e.horizontal?(0,Kr.iv)(In||(In=(0,Gr.Z)(["\n            left: ","px;\n          "])),s):(0,Kr.iv)(Rn||(Rn=(0,Gr.Z)(["\n            right: ","px;\n          "])),s),"top"===e.vertical?(0,Kr.iv)(On||(On=(0,Gr.Z)(["\n              margin-top: ","px;\n            "])),l):(0,Kr.iv)(Fn||(Fn=(0,Gr.Z)(["\n              margin-bottom: ","px;\n            "])),l),"left"===e.horizontal?(0,Kr.iv)(An||(An=(0,Gr.Z)(["\n              margin-left: ","px;\n            "])),l):(0,Kr.iv)(Pn||(Pn=(0,Gr.Z)(["\n              margin-right: ","px;\n            "])),l),a)})),Ep=Kr.ZP.div.attrs((function(){return{"data-test":Xr.Sa.Knob}}))(Zn||(Zn=(0,Gr.Z)(["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  margin-left: -10px;\n  margin-top: -10px;\n  z-index: ",";\n  will-change: transform;\n  cursor: ew-resize;\n  &:before {\n    display: block;\n    position: absolute;\n    content: '';\n    background: ",";\n    border-radius: 50%;\n    width: ","px;\n    height: ","px;\n    top: ","px;\n    left: ","px;\n    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);\n  }\n"])),(function(e){return e.theme.measurements.canvasControls.knob.touchable.desktop}),(function(e){return e.theme.measurements.canvasControls.knob.touchable.desktop}),(function(e){return e.theme.measurements.zIndex.canvas.knob}),(function(e){return e.theme.canvas.controlsColor}),(function(e){return e.theme.measurements.canvasControls.knob.size}),(function(e){return e.theme.measurements.canvasControls.knob.size}),(function(e){return e.theme.measurements.canvasControls.knob.size/4}),(function(e){return e.theme.measurements.canvasControls.knob.size/4})),Dp=Kr.ZP.div(Mn||(Mn=(0,Gr.Z)(["\n  position: absolute;\n  color: ",";\n"])),(function(e){return e.theme.canvas.controlsOutline})),Ip=Kr.ZP.div.attrs((function(e){return{style:{left:"".concat(e.x,"px")}}}))(zn||(zn=(0,Gr.Z)(["\n  position: absolute;\n  bottom: -","px;\n  height: ","px;\n  width: 2px;\n  background-color: ",";\n"])),(function(e){return e.theme.measurements.canvasControls.sprite.rotateHandle.height}),(function(e){return e.theme.measurements.canvasControls.sprite.rotateHandle.height}),(function(e){return e.theme.canvas.controlsOutline})),Rp=Kr.ZP.div.attrs((function(e){var t=e.height,n=e.width,i=e.theme;return{style:{height:"".concat(t+i.measurements.canvasControls.sprite.controlPadding,"px"),width:"".concat(n+i.measurements.canvasControls.sprite.controlPadding,"px")}}}))(Bn||(Bn=(0,Gr.Z)(["\n  left: -","px;\n  top: -","px;\n  transform-origin: center center;\n  border-style: solid;\n  border-width: 2px;\n  border-color: ",";\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),\n    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n  cursor: move;\n  will-change: transform;\n  position: absolute;\n"])),(function(e){return e.theme.measurements.canvasControls.sprite.controlPadding/2}),(function(e){return e.theme.measurements.canvasControls.sprite.controlPadding/2}),(function(e){return e.theme.canvas.controlsColor})),Op=Kr.ZP.div.attrs(()(Ln||(Ln=(0,Gr.Z)(["\n  position: absolute;\n  height: ","px;\n  width: 4px;\n  z-index: ",";\n  background: ",";\n  cursor: pointer;\n"])),(function(e){return e.theme.measurements.canvasControls.width.size}),(function(e){return e.theme.measurements.zIndex.canvas.controls}),(function(e){return e.theme.canvas.controlsColor})),Fp=Kr.ZP.div.attrs({tabIndex:0})(Un||(Un=(0,Gr.Z)(["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  top: 0;\n  left: 0;\n  &:focus {\n    outline: 0;\n  }\n"])),(function(e){return e.height}),(function(e){return e.width})),Ap=(0,Xr.v)()?(0,Kr.iv)(Nn||(Nn=(0,Gr.Z)(["\n      transition: unset;\n    "]))):(0,Kr.iv)(Hn||(Hn=(0,Gr.Z)(["\n      transition: all 0.4s ease-in-out;\n    "]))),Pp=Kr.ZP.div(jn||(jn=(0,Gr.Z)(["\n  position: absolute;\n  background: ",";\n  z-index: ",";\n  ","\n"])),(function(e){return e.theme.canvas.cropBackdrop}),(function(e){return e.theme.measurements.zIndex.canvas.crop.backdrop}),Ap),Zp=Kr.ZP.div.attrs({"data-test":Xr.Sa.CropMask})(Wn||(Wn=(0,Gr.Z)(["\n  position: absolute;\n  box-shadow: inset 0 0 0 2px ",";\n  cursor: move;\n  ","\n"])),(function(e){return e.theme.canvas.controlsOutline}),Ap),Mp=Kr.ZP.div(Vn||(Vn=(0,Gr.Z)(["\n  position: absolute;\n  background: ",";\n  z-index: ",";\n  ","\n"])),(function(e){return e.theme.canvas.controlsOutline}),(function(e){return e.theme.measurements.zIndex.canvas.crop.grid}),Ap),zp=(0,Kr.ZP)(Tp)(Gn||(Gn=(0,Gr.Z)(["\n  z-index: ",";\n  ",";\n"])),(function(e){return e.theme.measurements.zIndex.canvas.controls}),Ap),Bp=Kr.ZP.canvas(qn||(qn=(0,Gr.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]))),Lp=Kr.ZP.video(Yn||(Yn=(0,Gr.Z)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n"]))),Up=Kr.ZP.div(Xn||(Xn=(0,Gr.Z)(["\n  position: relative;\n  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);\n  height: 100%;\n  width: 100%;\n  z-index: ",";\n  background-color: ",";\n"])),(,(function(e){return e.theme.webcam.background})),Np={Index:bp,Area:vp,Bar:{Index:_p,ButtonGroup:vc},Button:{TextSecondary:yc,Float:function(e){return Jr.createElement(xc,(0,Ur.Z)({},e),Jr.createElement(kc,null))}},Container:xp,Element:Bp,Wrapper:Up,Webcam:Lp,Controls:{Knob:Ep,Circle:wp,Corner:Tp,Line:Dp,Area:kp,Sprite:Rp,RotateHandle:Ip,Container:Sp,Wrapper:Fp,SpriteActionsWrapper:bc,SpriteActionButton:_c,Width:Op},Crop:{Mask:Zp,GridLine:Mp,Backdrop:Pp,Control:zp}},Hp=Np.Button.TextSecondary,jp=Kr.ZP.span(Kn||(Kn=(0,Gr.Z)(["\n  font-size: 14px;\n  padding: 3px 1px 2px;\n  color: ",";\n  letter-spacing: ","px;\n  display: flex;\n  align-self: center;\n"])),(function(e){return e.theme.canvasActionBar.foreground}),(),Wp=Kr.ZP.div(Jn||(Jn=(0,Gr.Z)(["\n  display: inline-flex;\n  ","\n"])),(),Vp=Fs("scale","active")(Ts((function(e){var t=e.isDisabled,n=e.scale,i=e.active,r=n.canZoomIn,o=n.canZoomOut,a=n.zoomLevel;return-1!==["transform","brush","focus","sticker","text","textdesign"].indexOf(i.tool)?null:Jr.createElement(Wp,{isDisabled:t},Jr.createElement(Hp,{"data-test":Xr.Sa.MainBarButtonZoom,ariaLabel:"Zoom out",isDisabled:!o,onClick:n.out},"-"),Jr.createElement(jp,{"data-test":Xr.Sa.ZoomLevel},a," %"),Jr.createElement(Hp,{ariaLabel:"Zoom in",isDisabled:!r,onClick:n.in},"+"))})));jp.defaultProps={theme:Lh};var Gp=(0,Kr.ZP)(Np.Bar.ButtonGroup)($n||($n=(0,Gr.Z)(["\n  > :last-child {\n    margin-left: 10px;\n  }\n  > :first-child {\n    margin-left: 0;\n  }\n"]))),qp=Ts((function(){var e=$d(),t=e.config,n=e.editor,i=e.history,r=e.custom,o=e.active,a=t.locale.mainCanvasActions,s=i.canUndo,l=i.canRedo,u=t.config.mainCanvasActions,c=h=function(){if("transform"===n.activeStore.tool)return null;var e=r.getButton("mainCanvasActionUndo");return Jr.createElement(e,{key:"mainCanvasActionUndo","data-test":Xr.Sa.MainBarButtonUndo,onClick:i.undo,isDisabled:!s||!o.image,label:a.buttonUndo,ariaLabel:a.buttonUndo,icon:Jr.createElement(pp.undo,null)})},d=function(){if("transform"===n.activeStore.tool)return null;var e=r.getButton("mainCanvasActionRedo");return Jr.createElement(e,{key:"mainCanvasActionRedo","data-test":Xr.Sa.MainBarButtonRedo,onClick:i.redo,isDisabled:!l||!o.image,label:a.buttonRedo,ariaLabel:a.buttonRedo,icon:Jr.createElement(pp.redo,null)})},f=function(){var e=r.getButton("mainCanvasActionExport");return Jr.createElement(e,{key:"mainCanvasActionExport","data-test":Xr.Sa.MainBarButtonExport,onClick:c,isDisabled:!o.image,label:a.buttonExport,ariaLabel:a.buttonExport,icon:Jr.createElement(pp.export,null)})},p=function(){if(!t.displayCloseButton)return null;var e=r.getButton("mainCanvasActionClose");return Jr.createElement(e,{key:"mainCanvasActionClose","data-test":Xr.Sa.MainBarButtonClose,onClick:n.close,isDisabled:!o.image,label:a.buttonClose,ariaLabel:a.buttonClose,icon:Jr.createElement(pp.close,null)})},g=u.map(();return Jr.createElement(Np.Bar.Index,null,Jr.createElement(Gp,null,g[0]&&g[0]()||null,g[1]&&g[1]()||null),t.config.enableZoom?Jr.createElement(Vp,{isDisabled:!o.image}):null,Jr.createElement(Gp,null,g[2]&&g[2]()||null,g[3]&&g[3]()||null))}));function Yp(e,t){(function(e){return"string"===typeof e&&e.includes(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function Xp(e){return e=parseFloat(e),(Number.isNaN(e)||e<0||e>1)&&(e=1),e}unction Jp(e){return 1===e.length?"0".concat(e):String(e)}ction tg(e,t,n,i){var r=[Jp(Math.round(e).toString(16)),Jp(Math.round(t).toString(16)),Jp(Math.round(n).toString(16))];return i&&r[0].charAt(0)===r[0].charAt(1)&&r[1].charAt(0)===r[1].charAt(1)&&r[2].charAt(0)===r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}ction og(e,t,n,i,r){var o=[Jp(Math.round(e).toString(16)),Jp(Math.round(t).toString(16)),Jp(Math.round(n).toString(16)),Jp(ng(i))];return r&&o[0].charAt(0)===o[0].charAt(1)&&o[1].charAt(0)===o[1].charAt(1)&&o[2].charAt(0)===o[2].charAt(1)&&o[3].charAt(0)===o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}var ag={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},sg="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),lg="[\\s|\\(]+(".concat(sg,")[,|\\s]+(").concat(sg,")[,|\\s]+(").concat(sg,")\\s*\\)?"),ug="[\\s|\\(]+(".concat(sg,")[,|\\s]+(").concat(sg,")[,|\\s]+(").concat(sg,")[,|\\s]+(").concat(sg,")\\s*\\)?"),cg={CSS_UNIT:new RegExp(sg),rgb:new RegExp("rgb".concat(lg)),rgba:new RegExp("rgba".concat(ug)),hsl:new RegExp("hsl".concat(lg)),hsla:new RegExp("hsla".concat(ug)),hsv:new RegExp("hsv".concat(lg)),hsva:new RegExp("hsva".concat(ug)),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};unction dg(e){var t={r:0,g:0,b:0},n=1,i=null,r=null,o=null,a=!1,s=!1;if("string"===typeof e&&(e=e)),Array.isArray(e)){var l=e,u=(0,Lr.Z)(l,3),c=u[0],h=u[1],d=u[2];hg(c)&&hg(h)&&hg(d)&&(t=Qp(255*c,255*h,255*d),a=!0,s="rgb"),4===e.length&&(n=e[3])}return"object"===typeof e&&(hg(e.r)&&hg(e.g)&&hg(e.b)?(t=Qp(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):hg(e.h)&&hg(e.s)&&hg(e.v)?(i=Kp(e.s),r=Kp(e.v),t=e.h,i,r),a=!0,s="hsv"):hg(e.h)&&hg(e.s)&&hg(e.l)&&(i=Kp(e.s),o=Kp(e.l),t=function(e,t,n){var i,r,o;f(e=Yp(e,360),t=Yp(t,100),n=Yp(n,100),0===t)r=n,o=n,i=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;i=a(l,s,e+1/3),r=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*i,g:255*r,b:255*o}}(e.h,i,o),a=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=Xp(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var fg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,Hr.Z)(this,e),t instanceof e)return t;this.originalInput=t;var i=dg(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=n.format||i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return(0,jr.Z)(e,[{key:"getAlpha",value:,{key:"setAlpha",value:,{key:"toHsv",value:function(){var e=eg(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}}},{key:"toHsvString",value:function(){var e=eg(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),i=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(i,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")}},{key:"toHsl",value:,{key:"toHslString",value:,{key:"toHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return tg(this.r,this.g,this.b,e)}},{key:"toHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"#".concat(this.toHex(e))}},{key:"toHex8",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return og(this.r,this.g,this.b,this.a,e)}},{key:"toHex8String",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"#".concat(this.toHex8(e))}},{key:"toRgb",value:,{key:"toRgbArray",value:function(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]}},{key:"toRgbString",value:function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")}},{key:"toPercentageRgb",value:,{key:"toPercentageRgbString",value:,{key:"toName",value:function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#".concat(tg(this.r,this.g,this.b,!1)),t=0,n=Object.keys(ag);t<n.length;t++){var i=n[t];if(ag[i]===e)return i}return!1}},{key:"toString",value:function(e){var t=Boolean(e);e=e||this.format;var n=this.a<1&&this.a>=0;if(!t&&n&&e&&(e.startsWith("hex")||"name"===e))return"name"===e&&0===this.a?this.toName():this.toRgbString();switch(e){case"rgb":return this.toRgbString();case"prgb":return this.toPercentageRgbString();case"hex":case"hex6":default:return this.toHexString();case"hex3":return this.toHexString(!0);case"hex4":return this.toHex8String(!0);case"hex8":return this.toHex8String();case"hsl":return this.toHslString();case"hsv":return this.toHsvString();case"name":return this.toName()}}},{key:"clone",value:]),e}(),pg=Kr.ZP.div(ei||(ei=(0,Gr.Z)(["\n  position: absolute;\n  width: ","px;\n  height: ","px;\n  overflow: hidden;\n  pointer-events: none;\n  ","\n  left: ","px;\n  :after {\n    content: '';\n    position: absolute;\n    width: ","px;\n    height: ","px;\n    left: 50%;\n    ","\n    background-color: ",";\n    pointer-events: none;\n  }\n"])),(function(e){return e.theme.measurements.color.colorPicker.arrow.width}),(function(e){return e.theme.measurements.color.colorPicker.arrow.width/2}),(function(e){return"bottom"===e.direction?(0,Kr.iv)(ti||(ti=(0,Gr.Z)(["\n          bottom: 100%;\n        "]))):(0,Kr.iv)(ni||(ni=(0,Gr.Z)(["\n          top: 100%;\n        "])))}),(function(e){return e.arrowOffset}),(function(e){return e.theme.measurements.color.colorPicker.arrow.width/2}),(function(e){return e.theme.measurements.color.colorPicker.arrow.width/2}),(function(e){return"bottom"===e.direction?(0,Kr.iv)(ii||(ii=(0,Gr.Z)(["\n            transform: translate(-50%, 50%) rotate(45deg);\n          "]))):(0,Kr.iv)(ri||(ri=(0,Gr.Z)(["\n            transform: translate(-50%, -50%) rotate(45deg);\n          "])))}),(function(e){return e.theme.colorPicker.listBackground})),gg=pg,mg=Kr.ZP.div(oi||(oi=(0,Gr.Z)(["\n  text-align: center;\n  width: 28px;\n  padding-left: 4px;\n"]))),yg=(0,Kr.ZP)(mc.Input.Text)(ai||(ai=(0,Gr.Z)(["\n  input {\n    text-align: center;\n    border-bottom: 1px solid\n      ",";\n  }\n"])),(function(e){return e.theme.colorPicker.inputBorderColor})),vg=function(e){var t=e.value,n=e.label,i=e.onChange;return Jr.createElement(mg,null,Jr.createElement(mc.Input.Label,{label:n}),Jr.createElement(yg,{min:0,max:255,value:t,onChange:i}))},_g=Kr.ZP.div(si||(si=(0,Gr.Z)(["\n  text-align: left;\n  width: 62px;\n"]))),bg=(0,Kr.ZP)(mc.Input.Text)(li||(li=(0,Gr.Z)(["\n  input {\n    text-align: left;\n    border-bottom: 1px solid\n      ",";\n  }\n"])),(function(e){return e.theme.colorPicker.inputBorderColor})),xg=function(e){var t=e.value,n=e.label,i=e.onChange;return Jr.createElement(_g,null,Jr.createElement(mc.Input.Label,{label:n}),Jr.createElement(bg,{value:t.toUpperCase(),onChange:i}))},kg=Kr.ZP.div.attrs((function(e){return{style:{left:e.position[0]||"".concat(0,"px"),top:e.position[1]||"".concat(0,"px")}}}))(ui||(ui=(0,Gr.Z)(["\n  &&& {\n    position: absolute;\n    height: ","px;\n    width: ","px;\n    border-radius: 50%;\n    border: 2px solid ",";\n    box-sizing: border-box;\n    cursor: pointer;\n    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.11), 0 1px 3px 0 rgba(0, 0, 0, 0.46);\n    z-index: 2;\n    pointer-events: none;\n  }\n"])),(function(e){return e.theme.measurements.color.colorPicker.thumb.size}),(function(e){return e.theme.measurements.color.colorPicker.thumb.size}),(function(e){return e.theme.colorPicker.controlsColor}));kg.defaultProps={theme:Lh};var wg=(0,Xr.b)(so()),Sg=Kr.ZP.div(ci||(ci=(0,Gr.Z)(["\n  position: relative;\n  height: 14px;\n  width: 100%;\n"]))),Cg=Tg=(0,Jr.forwardRef)((function(e,t){var n=e.surface,i=e.onChange,r=e.className,o=e.children,a=(0,Jr.useRef)(null),s=(0,Jr.useRef)(null),l=$d().config,u=(0,Jr.useState)(!1),c=(0,Lr.Z)(u,2),h=c[0],d=c[1],f=function(e){var t,n,r=l.measurements.color.colorPicker.thumb.size/2,o=l.measurements.color.colorPicker.thumb.size;t=e.clientX,n=e.clientY;var s=a.current.getBoundingClientRect(),u=s.top,c=s.left,h=s.width,d=s.height,f=t-c-r,p=n-u-r;f=Math.max(0,Math.min(h-o,f)),p=Math.max(0,Math.min(d-o,p)),i&&i([f,p])},p=(0,Jr.useCallback)((0,wg.default)((,10),[h]);return Jr.createElement(Sg,{ref:Cg([a,t]),className:r},Jr.createElement(mc.DraggableCore,{nodeRef:s,onStart:onDrag:p,onStop:,Jr.createElement("div",{ref:s},n)),o)})),Eg=(0,Kr.iv)(hi||(hi=(0,Gr.Z)(["\n  position: absolute;\n  top: 3px;\n  left: 0;\n  width: 100%;\n  height: 8px;\n  cursor: pointer;\n  -webkit-tap-highlight-color: transparent;\n"]))),Dg=Kr.ZP.div(di||(di=(0,Gr.Z)(["\n  ","\n  background: linear-gradient(90deg, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);\n  height: 8px;\n"])),Eg),Ig=Kr.ZP.div.attrs((function(e){return{style:{background:"linear-gradient(to left, ".concat(e.transparentColor," 0%, ").concat(e.opaqueColor," 100%)")}}}))(fi||(fi=(0,Gr.Z)(["\n  ","\n  z-index: 1;\n"])),Eg),Rg=Kr.ZP.div.attrs((function(e){return{style:{backgroundImage:"url(".concat(e.url,")")}}}))(pi||(pi=(0,Gr.Z)(["\n  ","\n  z-index: 0;\n  background-repeat: repeat-x;\n  background-size: contain;\n  background-position: left;\n"])),Eg),Og=Kr.ZP.div.attrs((function(e){return{style:{backgroundColor:"hsl(".concat(e.hue,", 100%, 50%)")}}}))(gi||(gi=(0,Gr.Z)(["\n  ","\n  background: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)),\n   linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));\n  height: ","px;\n  top: 0px;\n"])),Eg,(function(e){return e.theme.measurements.color.colorPicker.saturationSlider.height})),Fg=(0,Kr.ZP)(Tg)(mi||(mi=(0,Gr.Z)(["\n  height: ","px;\n  margin-top: 0px;\n"])),(function(e){return e.theme.measurements.color.colorPicker.saturationSlider.height})),Ag=function(e){var t=e.color,n=e.hue,i=e.onChange,r=(0,Jr.useState)([0,0]),o=(0,Lr.Z)(r,2),a=o[0],s=o[1],l=(0,Jr.useRef)(null),u=$d().config;(0,Jr.useEffect)((function(){var e=t.toHsv(),n=e.s,i=e.v;if(l.current){var r=l.current,o=r.offsetWidth,a=r.offsetHeight,c=o-u.measurements.color.colorPicker.thumb.size,h=a-u.measurements.color.colorPicker.thumb.size;s([n*o*c/o,(1-i)*a*h/a])}}),[t.toString()]);return Jr.createElement(Fg,{ref:l,surface:Jr.createElement(Og,{hue:n}),onChange:function(e){if(l.current){var t=(0,Lr.Z)(e,2),n=t[0],r=t[1],o=l.current,a=o.offsetHeight,c=o.offsetWidth,h=n*c/(c-u.measurements.color.colorPicker.thumb.size),d=r*a/(a-u.measurements.color.colorPicker.thumb.size),f=Math.min(1,Math.max(0,h/c)),p=Math.min(1,Math.max(0,(a-d)/a));i(f,p),s([n,r])}}},Jr.createElement(kg,{position:a}))},Pg=Kr.ZP.div(yi||(yi=(0,Gr.Z)(["\n  position: absolute;\n  left: ","px;\n  top: ","px;\n  z-index: ",";\n  display: none;\n  opacity: 0;\n  transition: opacity 0.3s ease-out;\n  ","\n"])),(function(e){return e.leftOffset}),(function(e){return e.topOffset}),(function(e){return e.theme.measurements.zIndex.input.list}),(function(e){return e.show&&(0,Kr.iv)(vi||(vi=(0,Gr.Z)(["\n      display: block;\n      opacity: 1;\n      transition: opacity 0.3s ease-out;\n    "])))})),Zg=Kr.ZP.div(_i||(_i=(0,Gr.Z)(["\n  &&& {\n    position: absolute;\n    ","\n    padding: 16px;\n    box-sizing: border-box;\n    box-shadow: ",";\n    background: ",";\n    border-radius: ","px;\n    width: ","px;\n    height: ","px;\n    left: 8px;\n    z-index: 1;\n  }\n"])),(,(function(e){return e.theme.colorPicker.listShadow}),(function(e){return e.theme.colorPicker.listBackground}),(function(e){return e.theme.shape.radiusMedium}),(function(e){return e.theme.measurements.color.colorPicker.width}),(function(e){return e.theme.measurements.color.colorPicker.height})),Mg=(0,Kr.ZP)((function(e){var t=e.hue,n=e.onChange,i=(0,Jr.useState)(0),r=(0,Lr.Z)(i,2),o=r[0],a=r[1],s=(0,Jr.useRef)(null),l=$d().config;return(0,Jr.useEffect)((function(){if(s.current){var e=s.current.offsetWidth,n=e-l.measurements.color.colorPicker.thumb.size;a(t*e/360*n/e)}}),[t]),Jr.createElement(Tg,{surface:Jr.createElement(Dg,null),ref:s,onChange:function(e){if(s.current){var t=(0,Lr.Z)(e,1)[0],i=s.current.offsetWidth,r=t*i/(i-l.measurements.color.colorPicker.thumb.size),o=Math.max(0,Math.min(360,r/i*360));n(o),a(t)}}},Jr.createElement(kg,{position:[o,0]}))}))(xi||(xi=(0,Gr.Z)(["\n  margin-top: 8px;\n"]))),zg=(0,Kr.ZP)((function(e){var t=e.color,n=e.opaqueColor,i=e.transparentColor,r=e.onChange,o=$d().config,a=(0,Jr.useState)(0),s=(0,Lr.Z)(a,2),l=s[0],u=s[1],c=(0,Jr.useRef)(null),h=o.assetProvider.getPath("controls","/tiled-background.png");return(0,Jr.useEffect)((function(){if(c.current){var e,n=c.current.offsetWidth,i=n-o.measurements.color.colorPicker.thumb.size;e=(1-t.toHsv().a)*n,u(e*i/n)}}),[t.toString()]),Jr.createElement(Tg,{ref:c,surface:Jr.createElement(Ig,{opaqueColor:n,transparentColor:i}),onChange:function(e){if(c.current){var t=c.current.offsetWidth,n=(0,Lr.Z)(e,1)[0],i=(t-n*t/(t-o.measurements.color.colorPicker.thumb.size))/t,a=Math.round(100*(i+Number.EPSILON))/100,s=Math.min(1,Math.max(0,a));r(s),u(n)}}},Jr.createElement(Rg,{url:h}),Jr.createElement(kg,{position:[l,0]}))}))(ki||(ki=(0,Gr.Z)(["\n  margin-top: 8px;\n"]))),Bg=Kr.ZP.div(wi||(wi=(0,Gr.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 30px;\n"]))),Lg=Kr.ZP.div(Si||(Si=(0,Gr.Z)(["\n  display: flex;\n"]))),Ug=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;(0,Hr.Z)(this,n),(i=t.call(this,e)).node=Jr.createRef(),i.checkId=function(e,t,n){for(var i=e,r=0;i.parentElement&&r<n;)if(r+=1,(i=i.parentElement).id===t)return!0;return!1},i.handleOutsideClick=function(e){var t,n=i.props,r=n.onRequestClose,o=n.onAddSnapshot,a=n.show,s=i.state.color;if(a){if(null==(t=i.node.current)?void 0:t.contains(e.target))return;i.setState({hexInputValue:s.toHexString()}),r&&r(),o&&o()}},i.onChange=function(e){(0,i.props.onChange)({color:e.toRgbArray(),colorString:e.toRgbString()})},i.onHexValueChange=function(e){if(e.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){var t=new fg(e);i.onChange(t),i.setState({color:t,hue:t.toHsl().h})}i.setState({hexInputValue:e})},i.onAlphaChange=function(e){var t=i.state.color.setAlpha(e);i.onChange(t),i.setState({color:t,hexInputValue:t.toHexString()})},i.onHueChange=function(e){var t=i.state.color.toHsv(),n=t.s,r=t.v,o=t.a,a=new fg({h:e,s:n,v:r,a:o});i.onChange(a),i.setState({color:a,hexInputValue:a.toHexString(),hue:e})},i.onSaturationBrightnessChange=function(e,t){var n=i.state,r=n.color,o=n.hue,a=r.toHsv().a,s=new fg({h:o,s:e,v:t,a:a});i.onChange(s),i.setState({color:s,hexInputValue:s.toHexString()})},i.onInputChange=function(e){return function(t){var n=i.state.color;if(t.match(/0*([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/g)||!t.trim()){var r=n.toRgb();r[e]=parseInt(t,10)||0;var o=new fg(r);i.onChange(o),i.setState({color:o,hexInputValue:o.toHexString(),hue:o.toHsl().h})}}};var r=i.props.color,o=new fg(r);return i.state={color:o,hue:o.toHsl().h,hexInputValue:o.toHexString()},i}return(0,jr.Z)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1),document.addEventListener("keydown",this.handleOutsideClick,!1)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.color;if(t.show&&!e.show){var i=new fg(n);this.setState({color:i,hue:i.toHsl().h,hexInputValue:i.toHexString()})}}},{key:"componentWillUnmount",value:,{key:"render",value:function(){var e=this.props,t=e.show,n=e.showArrow,i=e.direction,r=e.arrowOffset,o=e.topOffset,a=e.leftOffset,s=e.labelHex,l=e.labelR,u=e.labelG,c=e.labelB,h=e.labelSliderHue,d=e.labelSliderOpacity,f=this.state,p=f.color,g=f.hexInputValue,m=f.hue,y=p.toRgb(),v=y.r,_=y.g,b=y.b,x=p.clone().setAlpha(1).toRgbString(),k=p.clone().setAlpha(0).toRgbString();return Jr.createElement("div",{ref:this.node},Jr.createElement(Pg,{show:t,direction:i,leftOffset:a,topOffset:o},Jr.createElement(Zg,{direction:i},n&&Jr.createElement(gg,{direction:i,arrowOffset:r}),Jr.createElement(Ag,{color:p,hue:m,onChange:this.onSaturationBrightnessChange}),Jr.createElement(mc.Spacer,{count:2}),Jr.createElement(mc.Input.Label,{label:h}),Jr.createElement(Mg,{hue:m,onChange:this.onHueChange}),Jr.createElement(mc.Spacer,{count:2}),Jr.createElement(mc.Input.Label,{label:d}),Jr.createElement(zg,{color:p,opaqueColor:x,transparentColor:k,onChange:this.onAlphaChange}),Jr.createElement(Bg,null,Jr.createElement(xg,{value:g,label:s,onChange:this.onHexValueChange}),Jr.createElement(Lg,null,Jr.createElement(vg,{value:v,label:l,onChange:this.onInputChange("r")}),Jr.createElement(vg,{value:_,label:u,onChange:this.onInputChange("g")}),Jr.createElement(vg,{value:b,label:c,onChange:this.onInputChange("b")}))))))}}]),n}(Jr.Component);Ug.defaultProps={direction:"bottom",showArrow:!0},Zg.defaultProps={theme:Lh};var Ng=Kr.ZP.div(Ci||(Ci=(0,Gr.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  position: relative;\n"]))),Hg=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;(0,Hr.Z)(this,n),(i=t.call(this,e)).containerRef=null,i.onClick=function(e){return function(t){var n=i.props,r=n.onAddSnapshot,o=n.config,a=n.onChange,s=n.colorPickerDirection,l=n.rect,u=i.state,c=u.activeIdentifier,h=u.showColorPicker,d=u.colorList.find((function(t){return t.identifier===e}));if(c!==d.identifier||h)h?i.setState({showColorPicker:!1}):(a(d.color),i.setState({activeIdentifier:e}),r&&r());else{var f=t.currentTarget.getBoundingClientRect(),p=f.left,g=f.width,m=f.top,y=f.height,v=i.containerRef.current.getBoundingClientRect(),_=v.left,b=v.top,x=o.measurements.color.colorPicker,k=x.arrow.width/2,w=p-_+g/2-2,S="bottom"===s?m-b+y+k:m-b-k,C=-24,T=x.width-x.arrow.width-12;w>T&&(w-=C+=w-T);var E=!0;if("bottom"===s&&l){var D=l.height,I=m-l.top,R=D-(I+y),O=o.measurements.color.colorPicker.height+k;R<O&&(S=R-O),I+S<I+y/2&&(S+=k,E=!1)}i.setState({showColorPicker:!0,showColorPickerArrow:E,arrowOffset:w,topOffset:S,leftOffset:C})}}},i.onChange=function(e){var t=e.color,n=e.colorString,r=i.props.onChange,o=i.state,a=o.activeIdentifier,s=o.colorList,l=s.findIndex((function(e){return e.identifier===a}));if(-1!==l){var u=(0,Mr.Z)(s);u[l]={identifier:s[l].identifier,colorString:n,color:t},i.setState({colorList:u})}r(t)},i.onChangeColorPicker=function(e){var t=e.color,n=e.colorString;i.onChange({color:[t[0]/255,t[1]/255,t[2]/255,t[3]],colorString:n})},i.closeColorPicker=function(){i.setState({showColorPicker:!1})},i.getColorPicker=function(){var e=i.props,t=e.activeColor,n=e.labelsColor,r=e.colorPickerDirection,o=e.onAddSnapshot,a=i.state,s=a.showColorPicker,l=a.showColorPickerArrow,u=a.arrowOffset,c=a.leftOffset,h=a.topOffset;return Jr.createElement(Ug,{color:(0,Xr.p)(t),show:s,showArrow:l,direction:r,arrowOffset:u,leftOffset:c,topOffset:h,labelHex:n.hex,labelR:n.r,labelG:n.g,labelB:n.b,labelSliderOpacity:n.sliderOpacity,labelSliderHue:n.sliderHue,onChange:i.onChangeColorPicker,onRequestClose:i.closeColorPicker,onAddSnapshot:o})};var r=i.props.colors;return i.containerRef=Jr.createRef(),i.state={activeIdentifier:"",activeSprite:"",colorList:(0,Mr.Z)(r),showColorPicker:!1,showColorPickerArrow:!1,arrowOffset:0,leftOffset:0,topOffset:0},i}return(0,jr.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.tool,i=t.isDisabled,r=t.custom,o=t.config,a=this.state,s=a.activeIdentifier,l=a.colorList,u=r.getColorItem(),c=o.assetProvider.getPath("controls","/tiled-background.png"),h=l.map((function(t){return u?Jr.createElement(u,{tool:n,key:"".concat(t.colorString,"-item-").concat(t.identifier),isActive:t.identifier===s,isDisabled:i,onClick:e.onClick(t.identifier),color:t.colorString,label:t.identifier,tiledBackgroundUrl:c}):null}));return Jr.createElement(Ng,{"data-test":Xr.Sa.ColorList,ref:this.containerRef},h,this.getColorPicker())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.activeSprite,i=e.activeColor,r=t.activeSprite,o=t.colorList;if(n!==r||!n){var a=Zc((0,Xr.p)(i)),s=o.find((function(e){return e.colorString===a}));return{activeSprite:n,activeIdentifier:s?s.identifier:""}}return null}}]),n}(Jr.Component);Hg.defaultProps={colorPickerDirection:"bottom",isDisabled:!1};var jg=Fs("config","custom")(Ts(Hg)),Wg=function(e){return Jr.createElement(Oa.Consumer,null,(function(t){var n=t.rect;return Jr.createElement(jg,(0,Ur.Z)((0,Ur.Z)({},e),{},{rect:n}))}))},Vg=(0,Xr.b)(so()),Gg=(0,Kr.ZP)(Np.Controls.Container)(Ti||(Ti=(0,Gr.Z)(["\n  cursor: none;\n"]))),qg=Kr.ZP.div(Ei||(Ei=(0,Gr.Z)(["\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  transform: translate(-50%, -50%);\n  border-radius: 50%;\n  border-width: 2px;\n  border-style: solid;\n  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);\n  color: ",";\n"])),(function(e){return e.theme.foreground})),Yg=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).INITIAL_POSITION={x:void 0,y:void 0},i.state=(0,Ur.Z)((0,Ur.Z)({},i.INITIAL_POSITION),{},{isDrawing:!1}),i.containerElementRef=null,i.getCursorCoordinates=function(e){var t=0,n=0;if(-1!==e.type.indexOf("touch")){var r=e;if(!r.touches.length)return(0,Ur.Z)((0,Ur.Z)({},i.INITIAL_POSITION),{},{height:0,width:0});t=r.touches[0].clientX,n=r.touches[0].clientY}else{var o=e;t=o.clientX,n=o.clientY}var a=i.containerElementRef.current.getBoundingClientRect();return{x:t-a.left,y:n-a.top,height:a.height,width:a.width}},i.draw=i.touchDraw=function(e){var t=i.getCursorCoordinates(e),n=t.x,r=t.y;void 0!==n&&void 0!==r&&(i.setState({x:n,y:r}),i.state.isDrawing&&i.brushTool.strokePosition({x:n,y:r}))},i.touchStart=function(){i.brushTool.clickableCanvas(!1),i.setState({isDrawing:!0}),i.brushTool.beginStroke()},i.start=function(e){0===e.button?i.touchStart():i.stop(e)},i.stop=function(e){i.state.isDrawing&&(e.preventDefault(),e.stopPropagation(),i.setState({isDrawing:!1}),i.brushTool.endStroke(),i.brushTool.clickableCanvas(!0))},i.setInitialPosition=function(){i.setState((0,Ur.Z)({},i.INITIAL_POSITION))},i.mouseOut=function(e){var t=i.props.config;e.preventDefault(),e.stopPropagation();var n=i.brushTool.sizeOnScreenSpace/2,r=i.getCursorCoordinates(e),o=r.x,a=r.y,s=r.height,l=r.width;o&&a&&(o<0||a<0||o>l-n||a>s-n||a<t.measurements.mainCanvasActionBar.height)&&i.setInitialPosition()},i.touchEnd=function(e){e.preventDefault(),e.stopPropagation();var t=i.state,n=t.x,r=t.y;n&&r&&i.setInitialPosition()},i.getCursor=function(){var e=i.state,t=e.x,n=e.y;if(t&&n){var r=Zc(i.brushTool.color),o="".concat(i.brushTool.sizeOnScreenSpace,"px"),a={left:"".concat(i.state.x,"px"),top:"".concat(i.state.y,"px"),borderColor:r,height:o,width:o};return Jr.createElement(qg,{style:a,"data-test":Xr.Sa.Cursor})}return null},i.containerElementRef=Jr.createRef(),i}return(0,jr.Z)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!1})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}},{key:"brushTool",get:function(){return this.props.brushTool}},{key:"render",value:function(){return Jr.createElement(Gg,{ref:this.containerElementRef,"data-test":Xr.Sa.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.touchStart,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}}]),n}(Jr.Component),Xg=Fs("brushTool","config")(Ts(Yg)),Kg=function(e,t){return void 0!==e&&void 0!==t&&!Number.isNaN(e)&&!Number.isNaN(t)},Jg=(0,Kr.ZP)(Np.Controls.Knob)(Di||(Di=(0,Gr.Z)(["\n  margin-top: -","px;\n  margin-left: -","px;\n"])),(function(e){return e.theme.measurements.canvasControls.knob.touchable.desktop/2}),(function(e){return e.theme.measurements.canvasControls.knob.touchable.desktop/2})),Qg=Np.Controls.Container,$g=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).start=function(e,t){var n=t.x,r=t.y;Kg(n,r)&&i.focusTool.setStart({x:n,y:r})},i.end=function(e,t){var n=t.x,r=t.y;Kg(n,r)&&i.focusTool.setEnd({x:n,y:r})},i.onKnob1DragStart=function(e,t){i.focusTool.clickableCanvas(!1),i.start(e,t)},i.onKnob1DragStop=function(e,t){i.addSnapshot(t,i.historyLocale.focusPosition),i.start(e,t),i.focusTool.clickableCanvas(!0)},i.onKnob2DragStart=function(e,t){i.focusTool.clickableCanvas(!1),i.end(e,t)},i.onKnob2DragStop=function(e,t){i.addSnapshot(t,i.historyLocale.focusPosition),i.end(e,t),i.focusTool.clickableCanvas(!0)},i.addSnapshot=function(e,t){var n=e.x,r=e.y;Kg(n,r)&&i.focusTool.toolSnapshot(t)},i.getLine=function(){var e=i.props.canvas.canvasSize,t=e.height,n=e.width,r=i.focusTool.startOnPreview,o=i.focusTool.endOnPreview;return Jr.createElement("svg",{focusable:"false",height:t,width:n},Jr.createElement("line",{x1:r.x,y1:r.y,x2:o.x,y2:o.y,strokeWidth:"2",stroke:"currentColor"}))},i.startRef=Jr.createRef(),i.endRef=Jr.createRef(),i}return(0,jr.Z)(n,[{key:"focusTool",get:function(){return this.props.focusTool}},{key:"historyLocale",get:function(){return this.focusTool.locale.history}},{key:"render",value:function(){return Jr.createElement(Qg,null,Jr.createElement(Np.Controls.Line,null,this.getLine()),Jr.createElement(mc.Draggable,{nodeRef:this.startRef,bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},Jr.createElement(Jg,{ref:this.startRef})),Jr.createElement(mc.Draggable,{nodeRef:this.endRef,bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},Jr.createElement(Jg,{ref:this.endRef})))}}]),n}(Jr.Component);Jg.defaultProps={theme:Lh};var em=Fs("canvas","focusTool")(Ts($g)),tm=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).getKnobPosition=function(){var e=i.props.focusTool,t=e.origin,n=e.size/2,r=Math.PI/2+e.rotation;return{x:t.x+n*Math.cos(r),y:t.y+n*Math.sin(r)}},i.onArea=function(e,t){var n=t.x,r=t.y,o=i.props.editor.configStore.measurements.canvasControls.knob.size;if(Kg(n,r)){var a=i.props,s=a.canvas,l=a.focusTool,u=l.size,c=n+l.mirroredAreaWidth/2,h=r+u/2,d=new Xr.Pa(i.getKnobPosition()),f=new Xr.Pa({x:n,y:r}).subtract(new Xr.Pa(i.areaPosition)),p=d.add(f);p.x>o&&p.x<s.canvasSize.width-o&&p.y>o&&p.y<s.canvasSize.height-o&&l.setOrigin({x:c,y:h})}},i.onKnob=function(e,t){var n=t.x,r=t.y,o=i.props.focusTool;if(Kg(n,r)){o.clickableCanvas(!1);var a=new Xr.Pa(o.origin),s=new Xr.Pa(n,r),l=a.subtract(s),u=l.magnitude,c=Math.PI/2+Math.atan2(l.y,l.x);o.setSize(2*u),o.setRotation(c)}},i.onAreaDragStop=function(e,t){var n=i.props.focusTool;i.addSnapshot(t,n.locale.history.focusPosition),i.onArea(e,t),n.clickableCanvas(!0)},i.onKnobDragStop=function(e,t){var n=i.props.focusTool;i.addSnapshot(t,n.locale.history.focusSize),i.onKnob(e,t),n.clickableCanvas(!0)},i.addSnapshot=function(e,t){var n=e.x,r=e.y,o=i.props.focusTool;Kg(n,r)&&o.toolSnapshot(t)},i.knobRef=Jr.createRef(),i.areaRef=Jr.createRef(),i}return(0,jr.Z)(n,[{key:"areaPosition",get:function(){var e=this.props.focusTool,t=e.origin,n=e.size,i=e.mirroredAreaWidth;return{x:t.x-i/2,y:t.y-n/2}}},{key:"render",value:function(){var e=this.areaPosition,t=e.x,n=e.y,i=this.props.focusTool;return Jr.createElement(Np.Controls.Container,null,Jr.createElement(mc.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},Jr.createElement(Np.Controls.Knob,{ref:this.knobRef})),Jr.createElement(mc.Draggable,{nodeRef:this.areaRef,onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:t,y:n},rotation:i.rotation},Jr.createElement(Np.Controls.Area,{ref:this.areaRef,"data-test":Xr.Sa.Focus,height:i.size,width:i.mirroredAreaWidth})))}}]),n}(Jr.Component);tm=(0,Xr.c)([Fs("focusTool","canvas","editor"),Ts],tm);var nm=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).state={knobAngle:2.35},i.onCircle=function(e,t){var n=t.x,r=t.y;if(Kg(n,r)){var o=i.props.focusTool;o.setCenter({x:n+o.radius,y:r+o.radius})}},i.onKnob=function(e,t){var n=t.x,r=t.y;if(Kg(n,r)){var o=i.props.focusTool,a=new Xr.Pa(n,r),s=new Xr.Pa(o.center.x,o.center.y).subtract(a),l=s.magnitude,u=-Math.atan2(s.y,s.x);i.setState({knobAngle:u}),o.setRadius(l)}},i.onCircleDragStart=function(e,t){i.props.focusTool.clickableCanvas(!1),i.onCircle(e,t)},i.onCircleDragStop=function(e,t){var n=i.props.focusTool;i.addSnapshot(t,n.locale.history.focusPosition),i.onCircle(e,t),n.clickableCanvas(!0)},i.onKnobDragStart=function(e,t){i.props.focusTool.clickableCanvas(!1),i.onKnob(e,t)},i.onKnobDragStop=function(e,t){var n=i.props.focusTool;i.addSnapshot(t,n.locale.history.focusSize),i.onKnob(e,t),n.clickableCanvas(!0)},i.addSnapshot=function(e,t){var n=e.x,r=e.y,o=i.props.focusTool;Kg(n,r)&&o.toolSnapshot(t)},i.knobRef=Jr.createRef(),i.circleRef=Jr.createRef(),i}return(0,jr.Z)(n,[{key:"componentDidMount",value:,{key:"render",value:function(){var e=this.props.focusTool,t=this.state.knobAngle,n=e.center,i=e.radius,r={x:n.x-i,y:n.y-i},o=Math.PI-t,a={x:n.x+i*Math.cos(o),y:n.y+i*Math.sin(o)};return Jr.createElement(Np.Controls.Container,null,Jr.createElement(mc.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:a},Jr.createElement(Np.Controls.Knob,{ref:this.knobRef})),Jr.createElement(mc.Draggable,{nodeRef:this.circleRef,onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:r},Jr.createElement(Np.Controls.Circle,{ref:this.circleRef,"data-test":Xr.Sa.Focus,radius:i})))}}]),n}(Jr.Component);nm=(0,Xr.c)([Fs("focusTool","canvas"),Ts],nm);var im=Ts((function(){var e=$d().focusTool,t=e.state,n=function(){switch(t.identifier){case"linear":return em;case"radial":return nm;case"mirrored":return tm;default:return null}}();return e.isOptionSelected&&n?Jr.createElement(n,null):null})),rm=function(e){var t=e.customButtonKey,n=e.onClick,i=e.label,r=e.icon,o=e.disabled,a=$d().custom.getButton(t);return a?Jr.createElement(a,{onClick:n,label:i,ariaLabel:i,icon:r,isDisabled:o}):null},om=function(e){var t=e.availableKeys,n=e.actions;return Jr.createElement(Np.Bar.ButtonGroup,{onClick:Xr.Oa},t.map((function(e){var t=n[e];return t?Jr.createElement(rm,(0,Ur.Z)({key:e},t)):null})))},am=Fs("sprite","stickerTool")(Ts((function(e){var t,n=e.sprite,i=e.stickerTool,r=i.locale.canvasActions,o=(t={},(0,Br.Z)(t,"bringtofront",{customButtonKey:"canvasActionBringToFront",onClick:i.bringToFront,label:r.buttonBringToFront,icon:Jr.createElement(gp.bringToFront,null),disabled:n.isOnTop}),(0,Br.Z)(t,"flip",{customButtonKey:"canvasActionFlip",onClick:i.flipHorizontally,label:r.buttonFlipHorizontal,icon:Jr.createElement(gp.flipHorizontal,null)}),(0,Br.Z)(t,"duplicate",{customButtonKey:"canvasActionDuplicate",onClick:function(){return i.duplicate()},label:r.buttonDuplicate,icon:Jr.createElement(gp.duplicate,null)}),(0,Br.Z)(t,"delete",{customButtonKey:"canvasActionDelete",onClick:i.delete,label:r.buttonDelete,icon:Jr.createElement(gp.delete,null)}),t);return i.isStickerSelected?Jr.createElement(om,{availableKeys:i.config.canvasActions,actions:o}):null}))),sm=Fs("textTool","sprite")(Ts((function(e){var t,n=e.textTool,i=e.sprite,r=n.locale.canvasActions,o=(t={},(0,Br.Z)(t,"edit",{customButtonKey:"canvasActionEdit",onClick:function(){return n.setEditMode(!0)},label:r.buttonEdit,icon:Jr.createElement(gp.edit,null)}),(0,Br.Z)(t,"bringtofront",{customButtonKey:"canvasActionBringToFront",onClick:n.bringToFront,label:r.buttonBringToFront,icon:Jr.createElement(gp.bringToFront,null),disabled:i.isOnTop}),(0,Br.Z)(t,"duplicate",{customButtonKey:"canvasActionDuplicate",onClick:n.duplicate,label:r.buttonDuplicate,icon:Jr.createElement(gp.duplicate,null)}),(0,Br.Z)(t,"delete",{customButtonKey:"canvasActionDelete",onClick:n.delete,label:r.buttonDelete,icon:Jr.createElement(gp.delete,null)}),t);return i.isSpriteText?Jr.createElement(om,{availableKeys:n.config.canvasActions,actions:o}):null}))),lm=Fs("sprite","textDesignTool")(Ts((function(e){var t,n=e.sprite,i=e.textDesignTool,r=i.locale.canvasActions,o=(t={},(0,Br.Z)(t,"edit",{customButtonKey:"canvasActionEdit",onClick:label:r.buttonEdit,icon:Jr.createElement(gp.edit,null)}),(0,Br.Z)(t,"bringtofront",{customButtonKey:"canvasActionBringToFront",onClick:i.bringToFront,label:r.buttonBringToFront,icon:Jr.createElement(gp.bringToFront,null),disabled:n.isOnTop}),(0,Br.Z)(t,"invert",{customButtonKey:"canvasActionInvert",onClick:i.invertBackground,label:r.buttonInvert,icon:Jr.createElement(gp.flipHorizontal,null)}),(0,Br.Z)(t,"duplicate",{customButtonKey:"canvasActionDuplicate",onClick:i.duplicate,label:r.buttonDuplicate,icon:Jr.createElement(gp.duplicate,null)}),(0,Br.Z)(t,"delete",{customButtonKey:"canvasActionDelete",onClick:function(){return i.delete()},label:r.buttonDelete,icon:Jr.createElement(gp.delete,null)}),t);return i.isTextDesignSelected?Jr.createElement(om,{availableKeys:i.config.canvasActions,actions:o}):null}))),um=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).actionsRef=null,i.spriteControlPosition=function(){var e=i.props,t=e.config,n=e.sprite,r=e.canvas.canvasSize,o=t.measurements.canvasControls.sprite,a=o.controlPadding,s=o.controlOffset,l=n.position,u=l.x,c=l.y,h=n.currentSprite.size,d=h.height,f=h.width,p=n.rotationWRTOutputRotation,g=i.actionsRef.current,m=new Xr.Pa(0,0);if(g){var y=g.getBoundingClientRect();m=new Xr.Pa(y.width/2+s,y.height+s)}var v=Math.abs(f*Math.sin(p))+Math.abs(d*Math.cos(p)),_=new Xr.Pa(u,c-v/2-a-s).clamp(m,new Xr.Pa(r.width,r.height).subtract(m));return{left:_.x,top:_.y}},i.getSpriteControls=function(){switch(i.props.sprite.tool){case"text":return Jr.createElement(sm,null);case"textdesign":return Jr.createElement(lm,null);case"sticker":return Jr.createElement(am,null);default:return null}},i.actionsRef=Jr.createRef(),i.state={isMounted:!1},i}return(0,jr.Z)(n,[{key:"componentDidMount",value:function(){this.setState({isMounted:!0})}},{key:"render",value:function(){var e=this.props.sprite,t=this.state.isMounted,n=!e.isDragMode&&!e.isEditMode,i=this.spriteControlPosition();return Jr.createElement(Np.Controls.SpriteActionsWrapper,{"data-test":Xr.Sa.SpriteActions,ref:this.actionsRef,show:n&&t,style:(0,Ur.Z)({},i)},this.getSpriteControls())}}]),n}(Jr.Component);um=(0,Xr.c)([Fs("sprite","config","editor","canvas"),Ts],um);var cm=Np.Controls.Corner,hm=mc.Draggable,dm=new Xr.Pa(0,0),fm=new Xr.Pa(0,0),pm=Ts((function(){var e=(0,Jr.useRef)(null),t=(0,Jr.useRef)(null),n=(0,Jr.useRef)(null),i=(0,Jr.useRef)(null),r=$d(),o=r.config,a=r.sprite,s=a.leftTopPosition,l=a.leftBottomPosition,u=a.rightTopPosition,c=a.rightBottomPosition,h=o.measurements.canvasControls.corner.borderWidth,d=function(e){var t=e.clientX,n=e.clientY;void 0!==t&&void 0!==n&&a.onCornerDrag(fm.subtract(dm.subtract(new Xr.Pa(t,n))))},f=function(e,t){var n=e.clientX,i=e.clientY;dm=new Xr.Pa(n,i),fm=new Xr.Pa(function(e){switch(e){case"leftTop":default:return s;case"leftBottom":return l;case"rightTop":return u;case"rightBottom":return c}}(t)),a.clickableCanvas(!1),a.setDragMode(!0)},p=function(){a.clickableCanvas(!0),a.setDragMode(!1),a.spriteSnapshot("size"),dm=new Xr.Pa(0,0),fm=new Xr.Pa(0,0)};return Jr.createElement(Jr.Fragment,null,Jr.createElement(hm,{nodeRef:e,onStop:p,onDrag:d,onStart:function(e){return f(e,"leftTop")}},Jr.createElement(cm,{ref:e,"data-test":Xr.Sa.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:h})),Jr.createElement(hm,{nodeRef:n,onStop:p,onDrag:d,onStart:function(e){return f(e,"leftBottom")}},Jr.createElement(cm,{ref:n,"data-test":Xr.Sa.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:h})),Jr.createElement(hm,{nodeRef:t,onStop:p,onDrag:d,onStart:function(e){return f(e,"rightTop")}},Jr.createElement(cm,{ref:t,"data-test":Xr.Sa.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:h})),Jr.createElement(hm,{nodeRef:i,onStop:p,onDrag:d,onStart:function(e){return f(e,"rightBottom")}},Jr.createElement(cm,{ref:i,"data-test":Xr.Sa.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:h})))})),gm=Kr.ZP.img(Ii||(Ii=(0,Gr.Z)(["\n  position: absolute;\n  left: -24px;\n  top: calc(50% - 12px);\n  cursor: ew-resize;\n"]))),mm=Kr.ZP.img(Ri||(Ri=(0,Gr.Z)(["\n  position: absolute;\n  right: -24px;\n  top: calc(50% - 12px);\n  cursor: ew-resize;\n"]))),ym=new Xr.Pa(0,0),vm=new Xr.Pa(0,0),_m=Fs("sprite","config")(Ts((function(e){var t=e.sprite,n=e.config,i=(0,Jr.useRef)(null),r=(0,Jr.useRef)(null),o=t.leftMidPosition,a=t.rightMidPosition,s=n.assetProvider.getPath("controls","/arrow-left.png"),l=n.assetProvider.getPath("controls","/arrow-right.png"),u=function(e,n){t.setDragMode(!0),t.clickableCanvas(!1);var i=e.clientX,r=e.clientY;ym=new Xr.Pa(i,r),vm=new Xr.Pa("left"===n?o:a)},c=function(){t.clickableCanvas(!0),t.setDragMode(!1),t.addSnapshot("edit",t.textDesignLocale.padding),ym=new Xr.Pa(0,0),vm=new Xr.Pa(0,0)},h=function(e){var n=e.clientX,i=e.clientY;if(void 0!==n&&void 0!==i){var r=vm.subtract(ym.subtract(new Xr.Pa(n,i)));t.onPaddingDrag(r)}};return Jr.createElement(Jr.Fragment,null,Jr.createElement(mc.Draggable,{nodeRef:i,onStart:function(e){return u(e,"left")},onDrag:h,onStop:c},Jr.createElement(gm,{ref:i,src:s})),Jr.createElement(mc.Draggable,{nodeRef:r,onStart:function(e){return u(e,"right")},onDrag:h,onStop:c},Jr.createElement(mm,{ref:r,src:l})))}))),bm=(0,Kr.ZP)(Np.Controls.Knob)(Oi||(Oi=(0,Gr.Z)(["\n  margin-left: -11px;\n  margin-top: 0px;\n  cursor: url(",") 9 9, ew-resize;\n  &:before {\n    top: unset;\n    bottom: 0px;\n    left: calc(\n      50% - ","px\n    );\n  }\n"])),(function(e){return e.url}),(function(e){return e.theme.measurements.canvasControls.knob.size/2})),xm=new Xr.Pa(0,0),km=new Xr.Pa(0,0);bm.defaultProps={theme:Lh};var wm=Fs("sprite","snapping","config")(Ts((function(e){var t=e.config,n=e.sprite,i=e.snapping,r=(0,Jr.useRef)(null),o=n.rightBottomHandlePosition,a=n.leftBottomHandlePosition,s={x:(o.x+a.x)/2,y:(o.y+a.y)/2},l=t.assetProvider.getPath("controls","/".concat((0,Xr.u)()?"rotate-windows":"rotate-osx",".png"));return Jr.createElement(mc.Draggable,{nodeRef:r,onStart:function(e){var t=e.clientX,i=e.clientY;xm=new Xr.Pa(t,i),km=new Xr.Pa(s),n.setDragMode(!0),n.clickableCanvas(!1)},onDrag:function(e){!function(e){var t=e.clientX,r=e.clientY;if(void 0!==t&&void 0!==r){var o=km.subtract(xm.subtract(new Xr.Pa(t,r))),a=n.position,s=new Xr.Pa(a.x,a.y),l=o.subtract(s),u=Math.atan2(l.y,l.x)-Math.PI/2,c=i.snapToRotation(u,l,n.currentRect);n.setRotation(c)}}(e)},onStop:function(){n.clickableCanvas(!0),n.setDragMode(!1),n.spriteSnapshot("rotation"),i.hideRotationGuides(),xm=new Xr.Pa(0,0),km=new Xr.Pa(0,0)}},Jr.createElement(bm,{ref:r,url:l}))}))),Sm=(0,Kr.ZP)(Np.Controls.Width)(Fi||(Fi=(0,Gr.Z)(["\n  cursor: ew-resize;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    display: none;\n  }\n"]))),Cm=(0,Kr.ZP)(Sm)(Ai||(Ai=(0,Gr.Z)(["\n  left: -3px;\n  top: calc(\n    50% - ","px\n  );\n"])),(function(e){return e.theme.measurements.canvasControls.width.size/2})),Tm=(0,Kr.ZP)(Sm)(Pi||(Pi=(0,Gr.Z)(["\n  right: -3px;\n  top: calc(\n    50% - ","px\n  );\n"])),(function(e){return e.theme.measurements.canvasControls.width.size/2})),Em=new Xr.Pa(0,0),Dm=new Xr.Pa(0,0);Cm.defaultProps={theme:Lh},Tm.defaultProps={theme:Lh};var Im=Fs("sprite","textTool")(Ts((function(e){var t=e.sprite,n=e.textTool,i=(0,Jr.useRef)(null),r=(0,Jr.useRef)(null),o=t.leftMidPadPosition,a=t.rightMidPadPosition,s=function(e,n){t.setDragMode(!0),t.clickableCanvas(!1);var i=e.clientX,r=e.clientY;Em=new Xr.Pa(i,r),Dm=new Xr.Pa("left"===n?o:a)},l=function(){t.clickableCanvas(!0),t.setDragMode(!1),t.addSnapshot("edit",t.textLocale.width),n.updateDefaultFontSize(),Em=new Xr.Pa(0,0),Dm=new Xr.Pa(0,0)},u=function(e){var n=e.clientX,i=e.clientY;if(void 0!==n&&void 0!==i){var r=Dm.subtract(Em.subtract(new Xr.Pa(n,i)));t.onWidthDrag(r)}};return Jr.createElement(Jr.Fragment,null,Jr.createElement(mc.Draggable,{nodeRef:i,onStart:function(e){return s(e,"left")},onDrag:u,onStop:l},Jr.createElement(Cm,{ref:i})),Jr.createElement(mc.Draggable,{nodeRef:r,onStart:function(e){return s(e,"right")},onDrag:u,onStop:l},Jr.createElement(Tm,{ref:r})))}))),Rm=mc.Draggable,Om=new Xr.Pa(0,0),Fm=new Xr.Pa(0,0),Am=Ts((function(){var e=(0,Jr.useRef)(),t=$d(),n=t.active,i=t.config,r=t.snapping,o=t.sprite;if(!function(){var e=n.tool,t=o.tool;return o.isSpriteSelected&&e===t}())return null;var a=o.isSpriteText,s=o.isSpriteTextDesign&&o.textDesignToolStore.isInverted,l=o.size,u=l.height,c=l.width,h=o.spritePosition,d=o.rotationWRTOutputRotation,f=i.measurements.canvasControls.sprite.controlPadding;return Jr.createElement(Np.Controls.Container,null,Jr.createElement(Rm,{nodeRef:e,onStart:function(e){var t=e.clientX,n=e.clientY;Om=new Xr.Pa(t,n),Fm=new Xr.Pa(o.position),o.setDragMode(!0),r.updateGuides()},onDrag:function(e){var t=e.clientX,n=e.clientY,i=Fm.subtract(Om.subtract(new Xr.Pa(t,n))),a=r.snapToPosition({x:i.x,y:i.y},o.currentRect),s=a.x,l=a.y;o.setPosition({x:s,y:l})},onStop:function(e){var t=e.clientX,n=e.clientY,i=Om,a=i.x,s=i.y;Om=new Xr.Pa(0,0),Fm=new Xr.Pa(0,0),o.setDragMode(!1),a!==t&&s!==n&&o.spriteSnapshot("position"),r.hidePositionGuides()},rotation:d,position:h},Jr.createElement(Np.Controls.Sprite,{ref:e,"data-test":Xr.Sa.Sprite,onDoubleClick:height:u,width:c},a&&Jr.createElement(Im,null)||null,s&&Jr.createElement(_m,null)||null,Jr.createElement(pm,null),Jr.createElement(Np.Controls.RotateHandle,{x:c/2+f/2},Jr.createElement(wm,null)))),Jr.createElement(um,null))})),Pm=Np.Crop.GridLine,Zm=Np.Crop.Mask,Mm=mc.Draggable,zm=(0,Kr.ZP)(zp)(Zi||(Zi=(0,Gr.Z)(["\n  left: ","px;\n  top: ","px;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    left: 6px;\n    top: 6px;\n  }\n"])),3,3),Bm=(0,Kr.ZP)(zp)((function(e){var t=e.theme.measurements.canvasControls.corner.touchable.desktop,n=t/4-e.borderWidth;return(0,Kr.iv)(Mi||(Mi=(0,Gr.Z)(["\n    left: ","px;\n    top: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      left: -30px;\n      top: 6px;\n    }\n  "])),n-t,3)})),Lm=(0,Kr.ZP)(zp)((function(e){var t=e.theme.measurements.canvasControls.corner.touchable.desktop,n=t/4-e.borderWidth;return(0,Kr.iv)(zi||(zi=(0,Gr.Z)(["\n    left: ","px;\n    top: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      left: -30px;\n      top: -30px;\n    }\n  "])),n-t,n-t)})),Um=(0,Kr.ZP)(zp)((function(e){var t=e.theme.measurements.canvasControls.corner.touchable.desktop,n=t/4-e.borderWidth;return(0,Kr.iv)(Bi||(Bi=(0,Gr.Z)(["\n    top: ","px;\n    left: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      top: -30px;\n      left: 6px;\n    }\n  "])),n-t,3)})),Nm=Fs("transformTool")(Ts((function(e){var t=e.transformTool,n=(0,Jr.useRef)(null),i=(0,Jr.useRef)(null),r=(0,Jr.useRef)(null),o=(0,Jr.useRef)(null),a=(0,Jr.useRef)(null),s=t.leftTopRespectFlip,l=t.leftBottomRespectFlip,u=t.rightTopRespectFlip,c=t.rightBottomRespectFlip,h=t.cropMaskSize,d=h.height,f=h.width,p=t.maxCropMaskSize,g=t.defaultCropMaskPosition,m=t.isFlippedHorizontal,y=t.isFlippedVertical,v=p.width/2,_=p.height/2,b=(0,Ur.Z)((0,Ur.Z)({},p),{},{left:g.x,top:g.y}),x={height:d,width:f},k=t.isDragMode?{transition:"unset"}:{},w=function(e){return m?2*v-e:e},S=function(e){return y?2*_-e:e},C=function(e,n,i){var r=w(e),o=S(n);switch(fd.getFlippedEdgeIndex(i,m,y)){case 0:t.onLeftTop({x:r,y:o});break;case 1:t.onLeftBottom({x:r,y:o});break;case 2:t.onRightTop({x:r,y:o});break;case 3:t.onRightBottom({x:r,y:o})}},T=function(e,n,i){t.setDragMode(!0),t.clickableCanvas(!1),C(e,n,i)},E=D=function(e,n,i){t.setDragMode(!1),C(e,n,i),t.clickableCanvas(!0),t.trackChanges()},I=function(e,n){var i=w(e+f/2)-f/2,r=S(n+d/2)-d/2;t.changePosition({x:i,y:r})};return Jr.createElement("div",{style:(0,Ur.Z)((0,Ur.Z)({},b),{},{position:"absolute"})},Jr.createElement(Mm,{nodeRef:a,bounds:"parent",position:s,onStart:function(e,n){var i=n.x,r=n.y;t.setDragMode(!0),t.clickableCanvas(!1),I(i,r)},onDrag:onStop:function(e,n){var i=n.x,r=n.y;t.setDragMode(!1),I(i,r),t.clickableCanvas(!0),t.trackChanges()}},Jr.createElement(Zm,{ref:a,style:(0,Ur.Z)((0,Ur.Z)({},x),k)})),Jr.createElement(Pm,{style:(0,Ur.Z)({left:s.x+f/3,top:s.y,height:d,width:1},k)}),Jr.createElement(Pm,{style:(0,Ur.Z)({left:s.x+f/3*2,top:s.y,height:d,width:1},k)}),Jr.createElement(Pm,{style:(0,Ur.Z)({left:s.x,top:s.y+d/3,height:1,width:f},k)}),Jr.createElement(Pm,{style:(0,Ur.Z)({left:s.x,top:s.y+d/3*2,height:1,width:f},k)}),Jr.createElement(Mm,{nodeRef:n,bounds:"parent",position:(0,Ur.Z)({},s),onStart:function(e,t){var n=t.x,i=t.y;T(n,i,0)},onDrag:function(e,t){var n=t.x,i=t.y;E(n,i,0)},onStop:function(e,t){var n=t.x,i=t.y;D(n,i,0)}},Jr.createElement(zm,{ref:n,"data-test":Xr.Sa.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:3,style:k})),Jr.createElement(Mm,{nodeRef:r,bounds:"parent",position:l,onStart:function(e,t){var n=t.x,i=t.y;T(n,i,1)},onDrag:function(e,t){var n=t.x,i=t.y;E(n,i,1)},onStop:function(e,t){var n=t.x,i=t.y;D(n,i,1)}},Jr.createElement(Um,{ref:r,"data-test":Xr.Sa.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:3,style:k})),Jr.createElement(Mm,{nodeRef:i,bounds:"parent",position:u,onStart:function(e,t){var n=t.x,i=t.y;T(n,i,2)},onDrag:function(e,t){var n=t.x,i=t.y;E(n,i,2)},onStop:function(e,t){var n=t.x,i=t.y;D(n,i,2)}},Jr.createElement(Bm,{ref:i,"data-test":Xr.Sa.CropTopRight,vertical:"top",horizontal:"right",borderWidth:3,style:k})),Jr.createElement(Mm,{nodeRef:o,bounds:"parent",position:c,onStart:function(e,t){var n=t.x,i=t.y;T(n,i,3)},onDrag:function(e,t){var n=t.x,i=t.y;E(n,i,3)},onStop:function(e,t){var n=t.x,i=t.y;D(n,i,3)}},Jr.createElement(Lm,{ref:o,"data-test":Xr.Sa.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:3,style:k})))}))),Hm=Kr.ZP.div(Li||(Li=(0,Gr.Z)(["\n  overflow: hidden;\n  display: none;\n  position: relative;\n  transform: unset !important;\n  vertical-align: bottom;\n  ","\n\n  svg {\n    color: ",";\n  }\n"])),(function(e){return e.isVisible&&(0,Kr.iv)(Ui||(Ui=(0,Gr.Z)(["\n      display: inline-block;\n    "])))}),(function(e){return e.theme.foreground})),jm=Kr.ZP.div(Ni||(Ni=(0,Gr.Z)(["\n  position: relative;\n  cursor: pointer;\n  display: flex;\n  align-self: center;\n"]))),Wm=Kr.ZP.div(Hi||(Hi=(0,Gr.Z)(["\n  font-size: 15px;\n  display: none;\n  width: 33px;\n  text-align: right;\n  color: ",";\n  z-index: 1;\n  margin: 2px;\n  ","\n"])),(function(e){return e.theme.foreground}),(function(e){return e.isVisible&&(0,Kr.iv)(ji||(ji=(0,Gr.Z)(["\n      display: inline-block;\n    "])))})),Vm=Kr.ZP.div(Wi||(Wi=(0,Gr.Z)(["\n  transform: translate(0, 0) !important;\n"]))),Gm=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).SLIDER_WIDTH=213,i.MAX_ROTATION=45,i.DEGREES_PER_PIXEL=2*i.MAX_ROTATION/i.SLIDER_WIDTH,i.drag=function(e,t){var n=t.x,r=i.transformTool.rotateFlipState;r.flipHorizontally!==r.flipVertically&&(n*=-1);var o=i.transformTool.defaultAngle-n*i.DEGREES_PER_PIXEL,a=Math.min(i.MAX_ROTATION,Math.max(o,-1*i.MAX_ROTATION));i.transformTool.setRotation(parseInt("".concat(a),10))},i.stop=i.rotateRef=Jr.createRef(),i}return(0,jr.Z)(n,[{key:"transformTool",get:function(){return this.props.transformTool}},{key:"render",value:function(){var e=this.props,t=e.config,n=e.canvasWidth,i=e.transformTool,r=this.transformTool.rotateFlipState,o=r.flipHorizontally,a=r.flipVertically,s=!t.isLayoutAdvanced||t.isLayoutAdvanced&&n>t.measurements.canvas.transform.minSliderWidth,l=!t.isLayoutAdvanced||t.isLayoutAdvanced&&n>t.measurements.canvas.transform.minValueWidth,u=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle,c=o===a?-1*u:u,h=o!==a?-1*i.rotationInDegrees:i.rotationInDegrees;return Jr.createElement(jm,{"data-test":Xr.Sa.RotateSlider},Jr.createElement(mc.Draggable,{nodeRef:this.rotateRef,axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:!0,disabled:!s},Jr.createElement(Vm,{ref:this.rotateRef},Jr.createElement(Hm,{isVisible:s},Jr.createElement(gp.dots,{width:90,height:15,x:c})),Jr.createElement(Wm,{isVisible:l},h,"\xb0"),Jr.createElement(Hm,{isVisible:s},Jr.createElement(gp.dots,{width:90,height:15,x:c})))))}}]),n}(Jr.Component),qm=Fs("transformTool","config")(Ts(Gm)),Ym=(0,Kr.ZP)(gp.rotate)(Vi||(Vi=(0,Gr.Z)(["\n  height: 16px;\n  width: 16px;\n  transform: scaleX(-1);\n"]))),Xm=(0,Kr.ZP)(gp.rotate)(Gi||(Gi=(0,Gr.Z)(["\n  height: 16px;\n  width: 16px;\n"]))),Km=(0,Kr.ZP)(gp.flipHorizontal)(qi||(qi=(0,Gr.Z)(["\n  height: 16px;\n  width: 16px;\n"]))),Jm=(0,Kr.ZP)(gp.flipVertical)(Yi||(Yi=(0,Gr.Z)(["\n  height: 16px;\n  width: 16px;\n"]))),Qm=Kr.ZP.div(Xi||(Xi=(0,Gr.Z)(["\n  display: inline-flex;\n  transform: scale(0.9);\n\n  svg {\n    color: ",";\n  }\n"])),(function(e){return e.theme.foreground})),$m=Fs("transformTool","config","custom","canvas")(Ts((function(e){var t=e.transformTool,n=e.config,i=e.custom,r=e.canvas,o=t.locale.transformActions,a=r.canvasSize.width,s=!n.isLayoutAdvanced||n.isLayoutAdvanced&&a>n.measurements.canvas.transform.minFlipWidth,l=function(e){var t=e.customButtonKey,n=e.onClick,r=e.label,o=e.icon,a=i.getButton(t);return Jr.createElement(a,{key:r,onClick:n,label:r,ariaLabel:r,icon:o,style:{margin:"0 5px"}})},u=l({label:o.buttonFlipHorizontal,icon:Jr.createElement(Km,null),onClick:function(){t.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"}),c=l({label:o.buttonFlipVertical,icon:Jr.createElement(Jm,null),onClick:function(){t.flipVertically()},customButtonKey:"transformActionFlipVertical"}),h=l({label:o.buttonRotateClockwise,icon:Jr.createElement(Ym,null),onClick:t.rotateClockwise,customButtonKey:"transformActionRotateClockwise"}),d=l({label:o.buttonRotateAntiClockwise,icon:Jr.createElement(Xm,null),onClick:t.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"}),f=n.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return Jr.createElement(Qm,{style:f,"data-test":Xr.Sa.FlipRotateControls},t.config.enableFlip&&s&&u||null,t.config.enableFlip&&s&&c||null,t.config.enableRotation&&Jr.createElement(qm,{canvasWidth:a})||null,t.config.enableRotation&&d||null,t.config.enableRotation&&h||null)}))),ey=Np.Bar.Index,ty=Np.Crop.Backdrop,ny=Fs("transformTool","canvas","config")(Ts((function(e){var t=e.transformTool,n=e.canvas,i=e.config,r=t.leftTopRespectFlip,o=t.leftBottomRespectFlip,a=t.rightTopRespectFlip,s=t.cropMaskSize.height,l=n.canvasSize,u=l.height,c=l.width,h=t.defaultCropMaskPosition,d=t.isDragMode?{transition:"unset"}:{};return Jr.createElement(Np.Controls.Container,null,Jr.createElement(ty,{style:(0,Ur.Z)({left:0,top:0,width:c,height:r.y+h.y},d)}),Jr.createElement(ty,{style:(0,Ur.Z)({left:0,top:r.y+h.y,width:h.x+r.x,height:s},d)}),Jr.createElement(ty,{style:(0,Ur.Z)({left:a.x+h.x,top:a.y+h.y,width:c-a.x-h.x,height:s},d)}),Jr.createElement(ty,{style:(0,Ur.Z)({left:0,top:o.y+h.y,width:c,height:u-o.y-h.y+i.measurements.basicUIToolControlBar.controlsBarHeight},d)}),Jr.createElement(Nm,null),i.isLayoutAdvanced?Jr.createElement(ey,{bottom:!0},Jr.createElement($m,null)):null)}))),iy=(0,Kr.ZP)(Np.Controls.Container)(Ki||(Ki=(0,Gr.Z)(["\n  ","\n  z-index: ",";\n"])),(function(e){return e.activeCursor?(0,Kr.iv)(Ji||(Ji=(0,Gr.Z)(["\n          cursor: move;\n        "]))):""}),(function(e){return e.theme.measurements.zIndex.canvas.crop.dragImage})),ry=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).INITIAL_POSITION={x:void 0,y:void 0},i.state=(0,Ur.Z)((0,Ur.Z)({},i.INITIAL_POSITION),{},{isDragging:!1}),i.containerRef=null,i.getCursorCoordinates=function(e){var t=0,n=0;if(-1!==e.type.indexOf("touch")){var r=e;if(!r.touches.length)return i.INITIAL_POSITION;t=r.touches[0].clientX,n=r.touches[0].clientY}else{var o=e;t=o.clientX,n=o.clientY}var a=i.containerRef.current.getBoundingClientRect();return{x:t-a.left,y:n-a.top}},i.move=function(e){if(i.scale.canDrag){var t=i.getCursorCoordinates(e),n=t.x,r=t.y;if(void 0!==n&&void 0!==r&&i.state.isDragging){var o={x:i.state.x-n,y:i.state.y-r};i.scale.setOffset(o)}}},i.touchDrag=function(e){if(i.scale.canDrag){var t=i.getCursorCoordinates(e),n=t.x,r=t.y;void 0!==n&&void 0!==r&&i.setState({x:n,y:r,isDragging:!0})}},i.drag=i.stop=function(){i.scale.canDrag&&(i.scale.savePosition(),i.setState((0,Ur.Z)((0,Ur.Z)({},i.INITIAL_POSITION),{},{isDragging:!1})))},i.touchEnd=function(e){e.preventDefault(),e.stopPropagation();var t=i.state,n=t.x,r=t.y;n&&r&&i.setState((0,Ur.Z)((0,Ur.Z)({},i.INITIAL_POSITION),{},{isDragging:!1}))},i.containerRef=Jr.createRef(),i}return(0,jr.Z)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!0})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}},{key:"scale",get:function(){return this.props.scale}},{key:"render",value:function(){return Jr.createElement(iy,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}}]),n}(Jr.Component),oy=Fs("scale")(Ts(ry)),ay=Ts((function(e){var t=e.children,n=(0,Jr.useRef)(null),i=$d(),r=i.active,o=i.sprite,a=i.canvas,s=a.canvasSize;return Jr.createElement(Np.Controls.Wrapper,{"aria-hidden":!0,ref:n,onClick:function(e){if(e.preventDefault(),e.stopPropagation(),null==a?void 0:a.isCanvasClickable){var t=e.clientX,i=e.clientY;if(-1!==e.type.indexOf("touch")){var r=e;if(!r.touches.length)return;t=r.touches[0].clientX,i=r.touches[0].clientY}var o=n.current.getBoundingClientRect(),s=t-o.left,l=i-o.top;a.getContainersAtPreviewPoint({x:s,y:l})}},onKeyDown:height:s.height,width:s.width},t,function(){switch(r.tool){case"focus":return Jr.createElement(im,null);case"text":case"textdesign":case"sticker":return Jr.createElement(Am,null);case"brush":return Jr.createElement(Xg,null);case"transform":return Jr.createElement(ny,null);default:return Jr.createElement(Np.Controls.Container,null,Jr.createElement(oy,null))}}())})),sy=Kr.ZP.div(Qi||(Qi=(0,Gr.Z)(["\n  display: ",";\n  position: absolute;\n  z-index: ",";\n"])),(function(e){return e.isVisible?"block":"none"}),(function(e){return e.theme.measurements.zIndex.canvas.snappingGuide})),ly=uy=(0,Kr.ZP)(ly)($i||($i=(0,Gr.Z)(["\n  background: ",";\n  ","\n"])),(function(e){return e.theme.snapping.positionGuideColor}),(function(e){return"horizontal"===e.direction?(0,Kr.iv)(er||(er=(0,Gr.Z)(["\n        width: 100%;\n        height: 2px;\n        top: ","px;\n      "])),(function(){return e.position})):(0,Kr.iv)(tr||(tr=(0,Gr.Z)(["\n      width: 2px;\n      height: 100%;\n      left: ","px;\n    "])),(function(){return e.position}))})),cy=(0,Kr.ZP)(ly)(nr||(nr=(0,Gr.Z)(["\n  border: none;\n  border-top: 2px dashed ",";\n  background: transparent;\n  left: ","px;\n  top: ","px;\n  transform: rotate(","rad);\n  width: 200%;\n"])),(function(e){return e.theme.snapping.rotationGuideColor}),(function(e){return e.position.x}),(function(e){return e.position.y}),(function(e){return e.rotation})),hy=Kr.ZP.div(ir||(ir=(0,Gr.Z)(["\n  position: absolute;\n  width: ","px;\n  height: ","px;\n  top: ","px;\n  left: ","px;\n  overflow: hidden;\n"])),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.top}),(function(e){return e.left})),dy=Fs("snapping","editor")(Ts((function(e){var t=e.snapping,n=e.editor.getPreviewSize(),i=n.width,r=n.height,o=t.previewTopLeftPosition,a=o.x,s=o.y,l=t.positionGuides.map((function(e,t){var n=e.direction,i=e.value,r=e.isVisible;return Jr.createElement(uy,{key:"positionGuide-".concat(t),direction:n,position:i,isVisible:r})})),u=t.rotationGuides.find((function(e){return e.isVisible}));return Jr.createElement(hy,{"data-test":Xr.Sa.SnappingLine,width:i,height:r,left:a,top:s},l,Jr.createElement(cy,{key:"rotationGuide",rotation:u?u.value:0,position:u?u.position:{x:0,y:0},isVisible:!!u}))}))),fy=Kr.ZP.img(rr||(rr=(0,Gr.Z)(["\n  z-index: 5;\n  position: absolute;\n  width: 100px;\n  bottom: 30px;\n  right: 30px;\n"]))),py=function(){return Jr.createElement(fy,{alt:"watermark","data-test":Xr.Sa.Watermark,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaQAAACMCAYAAAAzxN3aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMZSURBVHgB7d1tbFTXmQfw4xTXJsZk4hc8LAYPNWDTxOvZJMITNSkInGaTdOUmRWsTdUsrJYvafsh+yDcUqft9VSkftlLYqMRqpJAVQbJ2SeRiU5NCPKAEm1rBr5BxYpKxwNjGJrZxovb+SaYi1Daee8+59zkz/59k0aoUv83c/32e89xzcl7av//XioiIKEA5OTnqLkVERCQAA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCTCCkWUhUYuXQoNJxJl45OToSuXL6+dn5/Pu379euiL+fn8mbm50EL/nxUrVszmfutbsytyc2dznY+CgoLJVYWF42vLypIlJSUTVVVVo4qIXGMgUVa4du1a/rsnT9YifJyPisVCZylffPFFPj7U3NzN/351fPzmn729vTf/RGCtLixMVkQifZsrKxMMKKL0WBFI//3b3+6d+fzztC8gi6n+7nfjP3zyydPL/ftnz56NHD9+vEEZdk8olHz+uefeVD5qa2ur7e7u3qEMa9qzp7l83boJ5aNUCDmVULUTHhFlGMIKnwcfXV1dauXKlROlxcWJWCwWz9ZwMvHe0fVa+v+3367rO38+pkzIyVEbv/Od7h8//fQJpZH296vzdZaWlib2/vSnLUoAKwLpuhNGcy7uaBczOzubr9I0o/HzL/o5RkdDuIiuXr16Vvnkk0uXIn58b35CO+7dP/2pbnh4OHqzognIzMxM6OORkejHhw9HC1etSt5fUxOv37nznMoyUl9f33/kkXM9PT07TL1GBgYGYs77+bTO93P/wEBU98/zusabfa841CAM7uiVj5LJZLXKEAiig83NDQdfe+2FCxcuxIIMo9tNTU+HOzs7f/Rfv/nNC23Hj/v6O6aFISgeevDBVmUIXn/H2tvrlCYjIyMhPyr9IDGQhEF7SfnkVGdnlaSLtluoKo8cObL996+/vs9500aVYKiaUsHU398fVhSox+rru1fm5RlrJX9dJWl5jznhtl1lOAaSMNempsK6XsB34rxZrK+OcFE/cODAvg97e3fYFK4Ipv89fHjfG4cOPe7X75sWVhuNal3nuRVek2fef79KeYTqyNTN1pYtW8S0kRlIwuh6AS+H7e26o0ePxnBRt3kNbMhpLR549dV9aDcqCoTxKqmvz3OQ9PX1VSgDMHjjrGt2KyEYSAL1a3gB3wmmn2xu16GyONvd/bjKAKiW0G48deqULzci9Pd27txpbMpszFn3wftNedBlaBJ248aNYsIIGEgC+dG2O9fTY+XCOn4ueAwAlYXKILg5ON7R0dTe3i56DSxTPfDAA4mie+9NKEPi8bjr9R+Mes8a6AKgOqrbtk3U1CcDSSA/2nZjly9HlGUQRr87eHBvJk8avRePNzCUgvFwLGZsLQlVktshFox6KwNQHfn9bOCdMJCEunjxorH1HbQPbFx3cdpajRifVhkOoeS1xUPpM10lfdDVlXZXwtSot8TqCBhIQo2NjUVMte1sbNdhzSjTn8G4VeuxY40cdPCfySoJD2qn+542NeotsToCBpJQaNsNDQ0ZqQZsa9e9deTIjkxbM7oT/P5bWlqMb1dF32SySkr3QVlTo95SqyNgIAnWY6CSsa1dhyrhfG9vxj8QuBBUhNzVwX8mq6R0HpQ1NeottToCBpJgnyaT1brbdja16/C9H3rjjb0qi2EjTT446y/TVdJyB5ZMjHpLro6Ax08Ilmrb4Q2iNLGpXXesrS3mZzWH4yNKSkqGCwoKxgsLCydX5uXNpP63iWvXQjdu3MgfHx8PX716NaJ8gmeUsL9hOrvTk3eoko6+805EGYAHZe+0ye7J996rMjHqLbk6AgaScGjb6QokjJ3a0q7zq1WHEKqoqOiu3rKlf7k/Z1Qsp8+cqT7X3b3dj5/n1/sbMpB8hNdCZzyeMDFIk3pQdqnXm/Pa0r5mKr06ArbshPtU4/Y+bsZOg+JUR8bDqLKyMv6rX/zi5WebmlrTCX3sEo3tZl588cWXY3V1LSa3nYGrGp70p/Q1NDQY271hqQdlTY16S6+OgIEkHNp2ui5Gn46MWLF3Hb5fk7t2407xqSeeaEYQeT2rBsGEA+PCa9b0K4MuJhJGFrhpcbh4l5eXG9laZ6kHZU2MettQHQEDyQJ9AwOed22wqV1ncvACb8ymxsZmnetyuHA9//zzh0w+VDmaTEYU+c654TA2cbdQxwLVkYlNj22ojoCBZAE8UKc8GhgaiigLYO3IVHWUCiNTb8x/+8lP3sSalDIA+xsq8h1eK2jtKgMWelAWo966Nz22pToCBpIFdLTtLly4YMX6EY4eV4aYDCNA+2/z5s1Ghg/wGuDODcH44ZNPnjBxo7HQg7ImRr1LS0oSNlRHwECyhJe2HS5kU5bcYZta59q6dWuHH2/KH9TXG7mbhuvT03weKQAmbzTwoGzqP5sa9d61a5extqNuHPu2xNdtu1blgnPXZcUwg6l1LrQsdj/zjC9vSly8Xtq//z8VZRTcaAwODtbpbqfh38NuHHguycSo94b1661YO0phhWQJL227j4eHrTj4refDD418nbW1tdbcIZJMJqskHMhpatTbpuoIGEgWcdO2Q7vOll2yTUySoTp6bNcuUadikp1QJZlYS8L78/BbbzUqzWyrjoCBFAC3L2o303Z9vb2unl/BhVz5zERwlhYXJxSRBiarJBPnfNlWHQEDKQBrw2FXD1G6adu5PW3S7wu5qZ0IampqrBh3JTuYqpJ0s7E6AgZSAMrXr//I7Ys6nSf23bbrCletShYUFvr6Yr702WdGpgB1PgBLZLJK0snG6ggYSAHBhp7KhUQiseyKx227bk1ZWUL5bGpq6h6lWVFRUUIRaSa9SrK1OgIGUkCwu7RyAccRLLe95bZd5/Zr82J6elr7uHdubq741grZR3qVZGt1BAykgGzatClpsm3ntl2HrymINtf8jRvaH/p0KqSkIjIAVZLpXd7dsLk6Aj4YGxDcZa0uLEy6CY2v23ZL3gW5bdcVBzSVdv3zz7VXSKFQSOsb88CrrzZem5gQt+MFjsFQ5Cu8f2uj0RPx06cblCA2V0fAQArQhoqKfjeBhLYdKqCl7oQufnWoW9o2btzoe7sOvvzyS/Hb4qCKs2XHdDIPR4/4dUjjctheHQFbdgHa/uijrh/YdO7MFt0sFTsIj46OugqkrdXVCRUA3VuyEPkBVZISwvbqCBhIAULZ7/YMnaV2NThz5oyrLXgw7m37HRaRn1AlmTwHa7kyoToCBlLAysLhYeUCWn2LHUfgtl0XxLg3ke0ejsUCr0wyoToCBlLAYnV12tt2Y2NjEeVCEOPeRLbDVGqQVVKmVEfAQAoYXkh5LsdHF2rbnersrHKzHhPUuHdKnoER2omJCQ4gkC+CrJIypToCBpIA5eXlfcoFtO1uPwJ5YGDAVbuuOAM3Ib0+NcVAIl8EVSVlUnUEDCQBvLTK3j158httu2QyadW4d0rB3Xdrf1Nddtm6JHIjFkCVlEnVETCQBMDdlesjKW4ZYMCWQm7Hp4Ma9065u6BAeyDhea3bK0giUx70uUrKtOoIGEhChMNhz227cz09tW7+DQnj3iUlJaPKgD/39EQUkU/8rJIyrToCBpIQtR7O7Um17cYuX44oFySMexcVFY0rA3p7e12FNJEbflVJmVgdAQNJCC+braJth3ad2y1MJIx7V2zYYKRCuuKsI7FtR37yo0rKxOoIGEhCpDZbVS6gbfdBV1edcgFHlUs4xM7L+PtSsKb2h7Y2Vz+b22GdCz+v5XyYOC8H/+ZCn0uRKKiSwmvWGLvJy9TqCLi5qiBuN1sFt9N1pYLGvUtLSxMjIyOuznBayuDgYMypkk4j9JUHP9+7t2W5f/dgc3OD7u/loYcean1s1y7XD1KTfyYmJ8uUIZlaHQErJEG8bLbq1j+Ul7vausiE9evWJZQBqJKOvv32duUTbOlkIlg3lJfzfCcLtLW11c4a2gE8k6sjYCAJ4mWzVbeCHve+1bZt2/pNHQ09dOFCrL29XXtILORYW5v28ENrrqqqykggYY0NIcq1Nj26urt3KEMyuToCtuyEwWarbtt26SoqKkpIutvycmjhcpx5//3Hy50qw9SFHU6dOlVlojrS3VrF13m+tzeKoY9bn13DDQF+B1XV1d31O3e6nvzMVqyOvGEgCYPNVnt7e31pL1VUVLh69skk7Al29J13IsoAXHj/7+jRxoJVq5pNvLFRZXR2dv6zMqDGw2MBt0IQ4WtcbCITPyPcEDh/J9Lt3OlHo9EOBtPysTryhi07YUxNmy1kc2WlmPWjFEz8rTT4/WP3ht+//vq+tuPHtT6fdLarqwL/ronTQ3VNQr5x6NDjxzs6mpb7NeJn5QTTj/4HR7eznXdHrI68Y4UkEDZbveCseSiDTK5JeIVTOOOnTzcoQ1AF4EJ76ZNPIrvq6094eaPjQo2BiSGDv6/a2lrPd8YII7dfY3J0tPp3Bw+G/uOFF15RArS0tGh5bfzql79sVhqxOvKOgSQQHlQ1HUiSxr1vh1M4z3V3b58xdLeZ8rGz1nPwtdeiG8rLu9ESS6cKQUWU+OijSP/gYMzk8eu4cfA6ePLWkSM7vAbm1PR0GKG2p6mpVQXMrzXWdLA60oOBJBAujK3Hjs2avNBVbtok+jC+2MMPt/6xo6NR+QDBhA/8zEucoL63qCiZn58/m//tb/9t4m/2xo18pxoKXZ+eDt0+CGBSJBLxdDHCutZ5TWuSCLWzZ8/2S3iQWhpWR3owkITCZqsmprVS/rGmJqEEe+R73+s7d+5cws+7YYQM2lP4UAKgOorV1XkaKNA9gt4Zj29nIH0TqyN9ONQg1JYtW4xNwGHc2+uuBX5oaGhoMfVckg2wduT1YuR2B4/FLHQoZLZjdaQPA0momvvuGzZ1MZY47r0QXIzvv//+rHpDpqA68rpNkJfzsZZy+6GQ2YzVkV4MJKG8bLZ6JxLHvRfzL089FS8vL8+q/dtwI9LU2Oh5AuzSZ5+FlQFYS1N0U//AgLG2erZVR8BAEgybrSrNJI97L+bHTz/dikMEVZZAVajjznhubi5PGTA/N8eWneMDpwI1tcaZjdURMJAEM7HZquRx78WgWty9e/ebK316YDhIW7du7UBVqEi8eDxubEeVbKyOgIEkmInNVqWPey8Gd4tNe/Y0Z3IoVVZWxnc/84y2C1FeXt6cMiA3Ly9rB01SWB2ZwUASDputKo2kj3svJZNDCetkz2p+6HTd2rVG2pylpaVGTve1CasjMxhIwtXcd5+2iThbxr2XkgqlTFpTQpsuncP/lmvTpk1JE5Oako4sCQKrI3MYSMJhAEHXZqu2jHvfCd6w2FcNLS5luWg02qqzTXcr3Hw4v3Ot65DSjiwJwp97eoyNvWdzdQQMJAtgs1WlgU3j3suBFlesrq7FxhYeph3/dffuV0wPMHz/0UdP66yS6nfuDHwvuyCNjIyETO2gUlxcnPVhz0CyADZbVR7ZOO69HNiIFS08m55Vclp0J/79uede8eP3ofPhYlSkmfgaSsex9nZja0exbduyujoCBpIFsHeY17tcG8e9lwsXXazBPPXEE6IHHtDu+vnPfvay06Lr8HMtT8fDxVize1bATt9BMl0dcY9Abq5qDa+brdo67p0OvKGdj5ePtbVFBwYHa69evRpRArg53kI3BPbhI0cm3ZxGjDDDw8kqy7E6Ms+KQCooKJi46y59xVy6z2c4n38WLS+lSb6L50M2O4EyNjYWUS6lO+6Nn5HO79lPaOPhA0cvYLfrscuXI6bPVrodqqGysrLhH9TXx6VMNqIyc34eE8s9awpVOdp9Xta5dL93gjI5OZmP95+J7+We1auTrI6+kvPS/v2/VkQZDhuN9g0MVI2Pj4dNVE64eK8Nh/uLS0qS/xSN9klfnEYVmRgerr5y5UrFrRuw4vtwAjS5YcOGfuwUYvtjAmSPnJwcBhJlHxyfMDQ0FMbmo1NTU/cgpObn5/NxYZ6ZmVmwcsCFOjc3dxZ/Onf9k7nOnwife0OhiUgkkrR5Ogo/j2tTU/mrCwtnGUAUFAQS15Ao6+Cie3O9SamEoq92lmcQkQCcsiMiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEiEFYqIKAvl5OQoEuUvfwUYvyPZHkPjVwAAAABJRU5ErkJggg=="})},gy=Ts((function(){var e=(0,Jr.useRef)(null),t=$d(),n=t.canvas,i=t.config,r=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null==e?void 0:e.current){var i=e.current,r=i.clientWidth,o=i.clientHeight,a=(0,Xr.Za)();e.current.width=r*a,e.current.height=o*a,n.saveDimensions({width:r,height:o,render:t})}},o=new Ia((0,Vg.default)((function(){return r()}),100,{trailing:!0}));(0,Jr.useEffect)((function(){var t=e.current;return n.setCanvasElement(t),function(){o.disconnect()}}),[]),(0,Jr.useLayoutEffect)(();var a=i.licenseChecker;return Jr.createElement(Jr.Fragment,null,a&&a.isWhiteLabel()?null:Jr.createElement(py,null),Jr.createElement(Np.Element,{ref:e,"aria-label":"Canvas","data-test":Xr.Sa.Canvas}),Jr.createElement(ay,null,Jr.createElement(dy,null)))})),my=(0,jr.Z)((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Hr.Z)(this,e),this.getAdvancedCategoryCard=function(){return t.components.advancedUICategoryCard},this.getAdvancedItemCard=function(){return t.components.advancedUIItemCard},this.getAdvancedToolbarItem=function(){return t.components.advancedUIToolbarItem},this.getAdvancedToolbar=function(){return t.components.advancedUIToolbar},this.getAdvancedToolControlBar=function(){return t.components.advancedUIToolControlBar},this.getBasicToolbar=function(){return t.components.basicUIToolbar},this.getBasicToolControlBar=function(){return t.components.basicUIToolControlBar},this.getBasicToolItemsBar=function(){return t.components.basicUIToolItemsBar},this.getDialog=function(){return t.components.dialog},this.getButton=function(e){return t.components.buttons[e]},this.getColorItem=function(){return t.components.colorItem},this.getCheckbox=function(){return t.components.checkbox},this.getWindowContainer=function(){return t.components.windowContainer},this.getSlider=var r={dialog:mc.Dialog,colorItem:mc.ColorItem,checkbox:mc.Input.Checkbox,slider:mc.Input.Slider,buttons:{mainCanvasActionUndo:Np.Button.TextSecondary,mainCanvasActionRedo:Np.Button.TextSecondary,mainCanvasActionExport:Mo,mainCanvasActionClose:Fo,canvasActionEdit:Np.Controls.SpriteActionButton,canvasActionBringToFront:Np.Controls.SpriteActionButton,canvasActionDuplicate:Np.Controls.SpriteActionButton,canvasActionDelete:Np.Controls.SpriteActionButton,canvasActionInvert:Np.Controls.SpriteActionButton,canvasActionFlip:Np.Controls.SpriteActionButton,transformActionFlipHorizontal:Zo,transformActionFlipVertical:Zo,transformActionRotateClockwise:Zo,transformActionRotateAntiClockwise:Zo,textAlignment:Zo,toolControlBarPrimaryButton:Oo,toolControlBarSecondaryButton:Fo},windowContainer:Ld};this.components=Ic([r,i,n])})),yy=Fs("textTool","textDesignTool","modal","custom")(Ts((function(e){var t=e.modal,n=e.textTool,i=e.textDesignTool,r=e.custom,o=t.type,a=t.identifier,s=t.isVisible,l=t.modalProps,u=t.positionOffset,c=l.headerLabel,h=l.bodyLabel,d=l.confirmLabel,f=l.dismissLabel,p=l.handleClose,g=l.handleConfirm,m=l.handleDismiss,y=r.getDialog();if("info"===o)return Jr.createElement(mc.InfoModal,{headerLabel:c,bodyLabel:h},Jr.createElement(y,{type:o,isVisible:s,identifier:a,position:u,handleClose:p,headerLabel:c,bodyLabel:h}));if("textEdit"===o){var v=n.locale.canvasControls,_=v.buttonSave,b=v.buttonClose,x={type:o,isVisible:t.isVisible,confirmLabel:_,dismissLabel:b,headerLabel:n.locale.canvasControls.inputText};if(n.isTextSelected)return Jr.createElement(mc.TextEditModal,(0,Ur.Z)((0,Ur.Z)({},x),{},{defaultText:vh.defaultText(),handleConfirm:n.changeText,handleDismiss:n.setEditMode,text:n.text,maxLength:n.config.maxCharacterLimit,allowEmojis:n.config.allowEmojis}),Jr.createElement(y,{type:o,isVisible:s,identifier:a,position:u,handleClose:p,confirmLabel:_,dismissLabel:b,headerLabel:n.locale.canvasControls.inputText}));if(i.isTextDesignSelected)return Jr.createElement(mc.TextEditModal,(0,Ur.Z)((0,Ur.Z)({},x),{},{defaultText:kh.defaultText(),handleConfirm:i.changeText,handleDismiss:i.setEditMode,text:i.text,maxLength:i.config.maxCharacterLimit,allowEmojis:i.config.allowEmojis}),Jr.createElement(y,{type:o,isVisible:s,identifier:a,position:u,handleClose:p,confirmLabel:_,dismissLabel:b,headerLabel:n.locale.canvasControls.inputText}))}return Jr.createElement(mc.ActionModal,{type:o,headerLabel:c,bodyLabel:h,confirmLabel:d,dismissLabel:f,handleClose:p,handleConfirm:g,handleDismiss:m},Jr.createElement(y,{type:o,isVisible:s,identifier:a,position:u,confirmLabel:d,dismissLabel:f,headerLabel:c,bodyLabel:h,handleClose:p}))}))),vy=Kr.ZP.div(or||(or=(0,Gr.Z)(["\n  position: absolute;\n  right: 8px;\n  top: 8px;\n"]))),_y=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).onChange=function(e){i.setState({value:e.replace(/[^\d.,-]/g,""),isSubmitted:!1})},i.onSubmit=function(){var e=i.props.getCorrectValue,t=i.state,n=t.isSubmitted,r=t.value;n||i.setState({value:e(parseInt(r,10)||0).toString(),isSubmitted:!0})},i.state={isSubmitted:!1,value:e.value.toString()},i}return(0,jr.Z)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.value;e.value!==t&&this.setState({value:t.toString()})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.isDisabled,i=e.label,r=this.state.value;return Jr.createElement(mc.Input.Text,{id:t,value:r,isDisabled:n,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:(0,Xr.Qa)(this.onSubmit)},Jr.createElement(vy,null,Jr.createElement(mc.Input.Label,{label:i,htmlFor:t})))}}]),n}(Jr.Component),by=Kr.ZP.div(ar||(ar=(0,Gr.Z)(["\n  display: inline-flex;\n  justify-content: space-between;\n  max-width: ","px;\n"])),(function(e){return e.theme.measurements.inputs.cropSize.maxWidth})),xy=Kr.ZP.span(sr||(sr=(0,Gr.Z)(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  margin-top: 10px;\n  margin-right: 13px;\n"])),(function(e){return e.theme.measurements.fontSystem.body.size}),(function(e){return e.theme.measurements.fontSystem.body.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.body.case}),(function(e){return e.theme.textInput.foreground})),ky=function(e){var t=e.showLabel,n=void 0===t||t,i=e.label,r=e.isDisabled,o=e.valueHeight,a=e.valueWidth,s=e.labelWidth,l=e.labelHeight,u=e.onSubmitWidth,c=e.onSubmitHeight;return Jr.createElement("div",null,Jr.createElement(mc.Input.Label,{label:i,show:n}),Jr.createElement(by,null,Jr.createElement(_y,{id:"photoeditorsdk-transformScaleWidth",value:a,getCorrectValue:u,label:s,isDisabled:r}),Jr.createElement(xy,null,"x"),Jr.createElement(_y,{id:"photoeditorsdk-transformScaleHeight",value:o,getCorrectValue:c,label:l,isDisabled:r})))},wy=Kr.ZP.div(lr||(lr=(0,Gr.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  animation: "," 0.2s linear;\n  animation-fill-mode: both;\n  height: 40px;\n  min-width: 350px;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    min-width: 280px;\n  }\n"])),gc.scale),Sy=(0,Kr.iv)(ur||(ur=(0,Gr.Z)(["\n  background: ",";\n  color: ",";\n  border-bottom: 1px solid ",";\n"])),(function(e){return e.theme.tabTitle.activeBackground}),(function(e){return e.theme.tabTitle.activeForeground}),(function(e){return e.theme.tabTitle.activeBorderColor})),Cy=(0,Kr.ZP)(_c)(cr||(cr=(0,Gr.Z)(["\n  display: inline-flex;\n  align-items: center;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  border-radius: 0px;\n  padding: 1px 12px 2px;\n  background: ",";\n\n  ","\n\n  &:active {\n    ","\n  }\n\n  @media all and (min-width: 0) and (max-width: 599px) {\n    max-width: 150px;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n"])),(function(e){return e.theme.measurements.fontSystem.basicUITabLabel.size}),(function(e){return e.theme.measurements.fontSystem.basicUITabLabel.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.basicUITabLabel.case}),(function(e){return e.theme.tabTitle.foreground}),(function(e){return e.theme.tabTitle.background}),(function(e){return e.isActive&&Sy}),Sy),Ty=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(){var e;return(0,Hr.Z)(this,n),(e=t.apply(this,arguments)).onClick=e}return(0,jr.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.activeTab,n=e.label;return Jr.createElement(Cy,{ariaLabel:n,isActive:t===n,onClick:this.onClick},n)}}]),n}(Jr.Component),Ey=(0,Kr.ZP)(To)(hr||(hr=(0,Gr.Z)(["\n  display: inline-flex;\n  padding: 0 4px;\n  height: 20px;\n  font-size: 16px;\n"]))),Dy=(0,Kr.ZP)(bc)(dr||(dr=(0,Gr.Z)(["\n  display: inline-flex;\n  justify-content: center;\n  transform: translate(-100%, -100%);\n  @media all and (min-width: 0) and (max-width: 499px) {\n    left: 0;\n    right: 0;\n    transform: translateY(-120%);\n    background: transparent;\n    button {\n      &:first-child {\n        border-bottom-right-radius: 0;\n        border-top-right-radius: 0;\n      }\n      &:last-child {\n        border-bottom-left-radius: 0;\n        border-top-left-radius: 0;\n      }\n      &:not(:first-child):not(:last-child) {\n        border-radius: 0;\n      }\n    }\n  }\n"]))),Iy=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;(0,Hr.Z)(this,n),(i=t.call(this,e)).onTabClick=i.getDropUp=function(){var e=i.props.length,t=i.state.toggleExtend,n=Jr.Children.toArray(i.props.children),r=Jr.Children.count(i.props.children),o=n.slice(e,r);return Jr.createElement(Dy,{show:t},o.map((function(e){var t=e.props.label||"";return Jr.createElement(_c,{onClick:function(){return i.onTabClick(t)},key:t,ariaLabel:"More Options"},t)})))},i.extend=i.getExtension=function(){return Jr.createElement(Ey,{onClick:i.extend,ariaLabel:"Select Next"},"...")};var r=Jr.Children.count(i.props.children),o=Jr.Children.toArray(i.props.children);return i.state={activeTab:r&&o[0].props&&o[0].props.label||"",toggleExtend:!1},i}return(0,jr.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.length,n=this.state,i=n.activeTab,r=n.toggleExtend,o=Jr.Children.toArray(this.props.children).slice(0,t),a=Jr.Children.count(this.props.children)>t;return Jr.createElement("div",null,o.map((function(t){if(t){var n=t.props.label||"";return Jr.createElement(Ty,{activeTab:i,key:n,label:n,onClick:e.onTabClick})}return null})),a?this.getExtension():null,r?this.getDropUp():null,Jr.Children.map(this.props.children,(function(e){return!e||e.props&&e.props.label!==i?null:Jr.createElement(wy,{key:e.props.label},e.props.children)})))}}]),n}(Jr.Component),Ry=Kr.ZP.div(fr||(fr=(0,Gr.Z)(["\n  position: relative;\n  white-space: nowrap;\n  display: flex;\n  transition: all 0.2s linear;\n"]))),Oy=function(e){(0,Wr.Z)(n,e);var t=(0,Vr.Z)(n);function n(e){var i;return(0,Hr.Z)(this,n),(i=t.call(this,e)).updateLength=function(){var e=i.props,t=e.maxWidth,r=e.children,o=0;if(t)o=t;else{var a=window.innerWidth;o=a-(a>600?300:200)}var s=Jr.Children.count(r),l=o-s*n.TAB_WIDTH;if(l<0){var u=Math.round(Math.abs(l/n.TAB_WIDTH));i.setState({length:s-u})}},i.state={length:Jr.Children.count(i.props.children)},i}return(0,jr.Z)(n,[{key:"componentDidMount",value:,{key:"componentWillUnmount",value:,{key:"render",value:function(){var e=this.props.children,t=this.state.length;return t?Jr.createElement(Ry,null,Jr.createElement(Iy,{length:t},e)):null}}]),n}(Jr.Component);Oy.TAB_WIDTH=120;var Fy=Kr.ZP.div(pr||(pr=(0,Gr.Z)(["\n  &:after {\n    content: '';\n    position: absolute;\n    bottom: 0px;\n    ","\n    border-bottom: 1px solid ",";\n  }\n"])),(function(e){return e.full?(0,Kr.iv)(gr||(gr=(0,Gr.Z)(["\n            left: -24px;\n            width: calc(100% + 48px);\n          "]))):"\n      left: 24px;\n      width: calc(100% - 48px);\n    "}),(function(e){return e.theme.toolControlBar.separatorColor})),Ay=Fy,Py=Kr.ZP.div.attrs((function(){return{"data-test":Xr.Sa.CategoryItemsContainer}}))(mr||(mr=(0,Gr.Z)(["\n  visibility: hidden;\n  opacity: 0;\n  display: none;\n\n  ","\n"])),(function(e){return e.show&&(0,Kr.iv)(yr||(yr=(0,Gr.Z)(["\n      opacity: 1;\n      visibility: visible;\n      display: flex;\n    "])))})),Zy=Kr.ZP.div.attrs((function(){return{"data-test":Xr.Sa.ToolControlBar}}))(vr||(vr=(0,Gr.Z)(["\n  display: flex;\n  flex-shrink: 0;\n  justify-content: center;\n  position: relative;\n  width: 100%;\n  z-index: ",";\n\n  ","\n"])),(function(e){return e.theme.measurements.zIndex.toolControlBar}),(function(e){return e.show?(0,Kr.iv)(_r||(_r=(0,Gr.Z)(["\n          transition-timing-function: ease-in;\n          transition-duration: 0.3s;\n          transition-property: all;\n          padding: 2px 0px;\n          background: ",";\n          color: ",";\n        "])),e.theme.toolControlBar.background,e.theme.toolControlBar.inputLabelForeground):(0,Kr.iv)(br||(br=(0,Gr.Z)(["\n          max-height: 0px;\n        "])))}));Zy.defaultProps={show:!0};var My=Kr.ZP.div(xr||(xr=(0,Gr.Z)(["\n  height: ","px;\n  width: 2px;\n  margin: 0 10px;\n  display: inline-flex;\n  position: relative;\n  &:after {\n    content: ' ';\n    right: 0px;\n    position: absolute;\n    top: 8px;\n    height: calc(100% - 16px);\n    border-right: 1px solid\n      ",";\n  }\n"])),(function(e){return e.theme.measurements.basicUIToolControlBar.itemsBarHeight}),(function(e){return e.theme.toolControlBar.separatorColor})),zy=My,By=Kr.ZP.span(kr||(kr=(0,Gr.Z)(["\n  display: flex;\n  cursor: pointer;\n  z-index: ",";\n  transition: bottom 0.3s linear;\n\n  color: ",";\n  letter-spacing: ",";\n  font-size: ","px;\n\n  ","\n\n  &:active {\n    color: ",";\n  }\n"])),(function(e){return e.theme.measurements.zIndex.label}),(function(e){return e.theme.toolbar.foreground}),(function(e){return e.theme.measurements.fontSystem.body.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.body.size}),(function(e){return e.isActive&&(0,Kr.iv)(wr||(wr=(0,Gr.Z)(["\n      color: ",";\n    "])),(function(e){return e.theme.toolbar.activeForeground}))}),(function(e){return e.theme.toolbar.activeForeground})),Ly=(0,Kr.iv)(Sr||(Sr=(0,Gr.Z)(["\n  background-color: ",";\n  color: ",";\n\n  svg {\n    color: ",";\n  }\n"])),(function(e){return e.theme.toolbar.activeBackground}),(function(e){return e.theme.toolbar.activeForeground}),(function(e){return e.theme.toolbar.activeForeground})),Uy=(0,Kr.ZP)(ko)(Cr||(Cr=(0,Gr.Z)(["\n  display: block;\n  height: 100%;\n  width: 100%;\n  color: ",";\n  background-color: ",";\n  border: unset;\n  box-shadow: unset;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-family: '","', sans-serif;\n\n  ","\n  ","\n\n  &:active {\n    ","\n  }\n\n  svg {\n    display: flex;\n    transition: visibility 0s, opacity 0.5s linear;\n    visibility: visible;\n    opacity: 1;\n  }\n"])),(function(e){return e.theme.toolbar.foreground}),(function(e){return e.theme.toolbar.background}),(function(e){return e.theme.measurements.fontSystem.label.size}),(function(e){return e.theme.measurements.fontSystem.label.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.label.case}),(function(e){return e.theme.typography.fontFamily}),(function(e){return e.isActive&&Ly}),(function(e){return e.isDisabled&&(0,Kr.iv)(Tr||(Tr=(0,Gr.Z)(["\n      &:disabled {\n        cursor: default;\n        pointer-events: none;\n        opacity: ",";\n      }\n    "])),(function(e){return e.theme.button.textInactiveOpacity}))}),Ly),Ny=Kr.ZP.div(Er||(Er=(0,Gr.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  svg {\n    color: ",";\n  }\n"])),(function(e){return e.theme.toolbar.foreground})),Hy=Kr.ZP.div.attrs({role:"none"})(Dr||(Dr=(0,Gr.Z)(["\n  display: flex;\n  height: ","px;\n  text-align: center;\n  min-width: 100px;\n  /* Allow the text to grow in this limit */\n  max-width: 150px;\n  position: relative;\n  /* Position inline-block box at the top of the line box */\n  vertical-align: top;\n  /* Allow text to wrap again, overwriting the Toolbar style */\n  white-space: normal;\n  margin: 1px;\n"])),(function(e){return e.theme.measurements.basicUIToolbar.openHeight-2})),jy=Kr.ZP.div(Ir||(Ir=(0,Gr.Z)(["\n  display: flex;\n  flex-shrink: 0;\n  justify-content: center;\n  position: relative;\n  width: 100%;\n  transition: height 0.2s ease-out, display 0.1s fade-out;\n  background-color: ",";\n  color: ",";\n  z-index: ",";\n\n  ","\n"])),(function(e){return e.theme.toolbar.background}),(function(e){return e.theme.toolbar.foreground}),(function(e){return e.theme.measurements.zIndex.toolbar}),(function(e){return e.show?(0,Kr.iv)(Rr||(Rr=(0,Gr.Z)(["\n          height: ","px;\n          "," {\n            svg {\n              visibility: hidden;\n              opacity: 0;\n              height: 0;\n            }\n          }\n          "," {\n            height: ","px;\n          }\n        "])),e.theme.measurements.basicUIToolbar.closeHeight,Uy,Hy,e.theme.measurements.basicUIToolbar.closeHeight):(0,Kr.iv)(Or||(Or=(0,Gr.Z)(["\n          height: ","px;\n        "])),e.theme.measurements.basicUIToolbar.openHeight)})),Wy=Kr.ZP.li.attrs({role:"none"})(Fr||(Fr=(0,Gr.Z)(["\n  ","\n  width: 2px;\n  display: inline-block;\n  position: relative;\n  &:after {\n    content: ' ';\n    right: 0px;\n    position: absolute;\n    top: 8px;\n    height: calc(100% - 16px);\n    border-right: 1px solid\n      ",";\n  }\n"])),(function(e){return e.active?(0,Kr.iv)(Pr||(Pr=(0,Gr.Z)(["\n          height: ","px;\n        "])),e.theme.measurements.basicUIToolbar.closeHeight):(0,Kr.iv)(Ar||(Ar=(0,Gr.Z)(["\n          height: ","px;\n        "])),e.theme.measurements.basicUIToolbar.openHeight)}),(function(e){return e.theme.toolControlBar.separatorColor})),Vy={CardContainer:Hd,ExpandableContainer:Py,CategoryContainer:Wd,Card:function(e){var t=e.type,n=void 0===t?"medium":t,i=(0,Nr.Z)(e,oo),r=Nd;return"large"===n&&(r=Ud),Jr.createElement(r,(0,Ur.Z)({type:n},i))},CardAvatar:jo,CardLabel:jd,Toolbar:{Index:function(e){var t=e.show,n=void 0!==t&&t,i=e.className,r=e.style,o=e.children;return Jr.createElement(jy,{"data-test":Xr.Sa.Toolbar,show:n,className:i,style:r},Jr.createElement(du,null,o))},Item:function(e){var t=e.children,n=e.label,i=e.isActive,r=e.isDisabled,o=e.onClick;return Jr.createElement(Hy,{"aria-haspopup":!0,"aria-expanded":i},Jr.createElement(Uy,{"data-test":Xr.Sa.ToolbarItem,ariaLabel:n,onClick:o,isActive:i,isDisabled:r},Jr.createElement(Ny,null,t,Jr.createElement(By,{isActive:i},n))))},Separator:Wy},BarSeparator:Ay,ItemsSeparator:zy,Itemsbar:Zy,Controlsbar:Gd,ControlsbarContainer:Kd,ResponsiveTabWrapper:Oy,Slider:function(e){var t=e.style,n=e.children,i=(0,Nr.Z)(e,ao),r=$d().custom.getSlider();return r?Jr.createElement(r,(0,Ur.Z)({centerSlider:!0,style:(0,Ur.Z)({maxWidth:"224px"},t)},i),n):null},TabWrapper:Iy,Tab:Qd,Other:{ControlsWrapper:Yd,EmptyDiv:Xd}},Gy=(0,Xr.b)(so()),qy=Ts((function(){var e=$d(),t=e.active,n=e.modal,i=e.editor,r=(0,Jr.useRef)(null),o=(0,Jr.useRef)(null),a=(0,Jr.useState)(0),s=(0,Lr.Z)(a,2),l=s[0],u=s[1],c=(0,Jr.useState)(null),h=(0,Lr.Z)(c,2),d=h[0],f=h[1],p=(0,Jr.useState)(0),g=(0,Lr.Z)(p,2),m=g[0],y=g[1],v=(0,Jr.useState)(0),_=(0,Lr.Z)(v,2),b=_[0],x=_[1];(0,Jr.useLayoutEffect)((function(){var e=function(){var e=i.configStore.measurements,t=o.current.getBoundingClientRect(),n=t.height,r=.95*n,a=.95*t.width,s=(n-r)/2;u(s<24+e.buttons.float.size?n-48-e.buttons.float.size/2:n-s+24),y(r),x(a)},a=new Ia((0,Gy.default)((,100,{trailing:!0}));navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){r.current.srcObject=e})).catch((function(){n.showActionModal({type:"error",identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:function(){t.selectWebcam(!1)}})})):n.showActionModal({type:"error",identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:function(){t.selectWebcam(!1)}}),e(),a.observe(o.current);var s=document.createElement("canvas");return f(s),),[i,n,t]);var k=function(){r.current.srcObject.getTracks().forEach((function(e){e.stop()})),r.current.srcObject=null,t.selectWebcam(!1)},w=t.webcamLabel;return Jr.createElement(Np.Wrapper,{ref:o},Jr.createElement(Np.Bar.Index,{transparentBackgound:!0,style:{justifyContent:"flex-end"}},Jr.createElement(Np.Bar.ButtonGroup,null,Jr.createElement(Fo,{ariaLabel:w,onClick:k},w))),Jr.createElement(Np.Webcam,{style:{height:m,width:b},autoPlay:!0,ref:r}),Jr.createElement(Np.Button.Float,{ariaLabel:"Click and Save",style:{top:l},onClick:function(){d&&(d.width=r.current.videoWidth,d.height=r.current.videoHeight,d.getContext("2d").drawImage(r.current,0,0),t.newImage(d.toDataURL("image/webp")),k())}}))})),Yy=function(e){var t=e.children;return Jr.createElement(Np.Container,{"data-test":Xr.Sa.CanvasContainer},t)},Xy=Ts((function(e){var t=e.tool,n=e.fullWidth,i=void 0!==n&&n,r=e.icon,o=e.label,a=e.onClick,s=$d().custom,l=function(){var e=(0,Jr.useState)([]),t=(0,Lr.Z)(e,2),n=t[0],i=t[1];return(0,Jr.useEffect)((function(){var e;if(void 0!==typeof window&&(null==(e=window.navigator)?void 0:e.mediaDevices)){var t=!0,n=function(){window.navigator.mediaDevices.enumerateDevices().then((function(e){t&&i(e.map(())})).catch((function(){return null}))};return window.navigator.mediaDevices.addEventListener("devicechange",n),n(),function(){t=!1,window.navigator.mediaDevices.removeEventListener("devicechange",n)}}return null}),[]),n}();if(!l.some((function(e){return"videoinput"===e.kind})))return null;var u=s.getButton("toolControlBarSecondaryButton");return u?Jr.createElement(u,{"data-test":Xr.Sa.LibraryWebcamButton,tool:t,label:o,ariaLabel:o,onClick:a,fullWidth:i,icon:r}):null}))},93514:function(e,t,n){"use strict";n.d(t,{T2:function(){return ne.N},M:function(){return Zn},mX:function(){return ne.Ja}});var i,r,o,a,s,l,u,c,h,d,f,p,g,m,y,v,_,b,x,k,w,S,C,T,E,D,I,R,O,F,A,P,Z,M,z,B,L,U,N,H,j,W,V=n(29439),G=n(97326),q=n(15671),Y=n(43144),X=n(60136),K=n(29388),J=n(4942),Q=n(1413),$=n(45987),ee=n(30168),te=n(52286),ne=n(15444),ie=n(47313),re=n(53115),oe=n(1168),ae=n(84389),se=["isActive"],le=["type"],ue=(0,ne.a)((function(e,t){var n=function(){};t.exports=n})),ce=(0,ne.a)((function(e,t){t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"})),he=(0,ne.a)((function(e,t){var n=ce();function i(){}function r(){}r.resetWarningCache=i,t.exports=)),de=(0,ne.a)((function(e,t){t.exports=he()()})),fe=(0,re.ZP)(te.l)(i||(i=(0,ee.Z)(["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n"])),(function(e){return e.theme.measurements.advancedUICard.large.width}),(function(e){return e.theme.measurements.advancedUICard.large.height}),(function(e){return e.theme.measurements.advancedUISpacer}),(function(e){return e.theme.card.foreground})),pe=function(e){e.isActive;var t=(0,$.Z)(e,se);return ie.createElement(fe,(0,Q.Z)({},t))},ge=(0,re.ZP)(te.l)(r||(r=(0,ee.Z)(["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n  &:nth-child(2n + 1) {\n    margin-right: ","px;\n  }\n"])),(function(e){return e.theme.measurements.advancedUICard.medium.width}),(function(e){return e.theme.measurements.advancedUICard.medium.height}),(function(e){return e.theme.measurements.advancedUISpacer}),(function(e){return e.theme.card.foreground}),(function(e){return e.theme.measurements.advancedUISpacer})),me=(0,re.ZP)(te.l)(o||(o=(0,ee.Z)(["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n  &:nth-child(3n + 1),\n  &:nth-child(3n + 2) {\n    margin-right: ","px;\n  }\n"])),(function(e){return e.theme.measurements.advancedUICard.small.width}),(function(e){return e.theme.measurements.advancedUICard.small.height}),(function(e){return e.theme.measurements.advancedUISpacer}),(function(e){return e.theme.card.foreground}),(function(e){return e.theme.measurements.advancedUISpacer})),ye=function(e){var t=e.type,n=(0,$.Z)(e,le),i=ge;return"large"===t?i=pe:"small"===t&&(i=me),ie.createElement(i,(0,Q.Z)({type:t},n))},ve=re.ZP.div.attrs((function(e){return{"data-test":e["data-test"]||ne.Sa.CardContainer}}))(a||(a=(0,ee.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  /* width - padding on both sides */\n  width: ","px;\n"])),(function(e){return e.theme.measurements.advancedUIToolControlBar.width-48})),_e=re.ZP.div(s||(s=(0,ee.Z)(["\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n\n  position: relative;\n  width: ","px;\n  /* for Firefox */\n  min-height: 0;\n  margin-bottom: ","px;\n\n  z-index: ",";\n\n  background: ",";\n  transition: width 0.4s ease-in;\n  ","\n"])),(function(e){return e.theme.measurements.advancedUIToolControlBar.width}),(function(e){return e.theme.measurements.advancedUIToolControlBar.marginBottom}),(function(e){return e.theme.measurements.zIndex.toolControlBar}),(function(e){return e.theme.toolControlBar.background}),(function(e){return e.reverse?(0,re.iv)(u||(u=(0,ee.Z)(["\n          border-left: 1px solid ",";\n        "])),e.theme.toolControlBar.borderColor):(0,re.iv)(l||(l=(0,ee.Z)(["\n          border-right: 1px solid ",";\n        "])),e.theme.toolControlBar.borderColor)})),be=re.ZP.div.attrs((function(){return{"data-test":ne.Sa.CategoryItemsContainer}}))(c||(c=(0,ee.Z)(["\n  transition: max-height 0.8s ease-out, transform 0.8s ease-out;\n  background: ",";\n  visibility: hidden;\n  opacity: 0;\n  transform-origin: 0 0;\n  display: none;\n  flex-wrap: wrap;\n\n  ","\n"])),(function(e){return e.theme.toolControlBar.background}),(function(e){return e.show&&(0,re.iv)(h||(h=(0,ee.Z)(["\n      opacity: 1;\n      visibility: visible;\n      ","\n    "])),(0,ne.t)()?(0,re.iv)(d||(d=(0,ee.Z)(["\n            display: block;\n          "]))):(0,re.iv)(f||(f=(0,ee.Z)(["\n            display: flex;\n          "]))))})),xe=(0,re.ZP)(te.o)(p||(p=(0,ee.Z)(["\n  color: ",";\n\n  /* the padding and margin should only be applied to the children */\n  margin: 0 !important;\n  padding: 0 !important;\n"])),(function(e){return e.theme.toolControlBar.inputLabelForeground})),ke=re.ZP.div(g||(g=(0,ee.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  > * {\n    margin-left: ","px;\n    margin-right: ","px;\n    margin-bottom: ","px;\n  }\n"])),(function(e){return e.theme.measurements.advancedUIToolControlBar.paddingLeft}),(function(e){return e.theme.measurements.advancedUIToolControlBar.paddingRight}),(function(e){return e.theme.measurements.advancedUIToolControlBar.controls.gutter})),we=(0,re.ZP)(te.e)(m||(m=(0,ee.Z)(["\n  position: relative;\n\n  box-sizing: border-box;\n\n  /* for Firefox */\n  min-height: 0;\n\n  transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);\n  color: ",";\n\n  /* compensate the padding in IE and Edge */\n  ","\n"])),(function(e){return e.theme.toolControlBar.inputLabelForeground}),(function(){return(0,ne.t)()||(0,ne.s)()?(0,re.iv)(y||(y=(0,ee.Z)(["\n        > ul {\n          padding-right: 34px;\n          margin-right: -34px;\n        }\n      "]))):""}));we.defaultProps={direction:"vertical"};var Se=re.ZP.div(v||(v=(0,ee.Z)(["\n  position: relative;\n  &:after {\n    content: '';\n    position: absolute;\n    bottom: 0px;\n    ","\n    border-bottom: 2px solid ",";\n  }\n"])),(function(e){return e.full?(0,re.iv)(_||(_=(0,ee.Z)(["\n            left: -","px;\n            width: calc(\n              100% + ","px\n            );\n          "])),3*e.theme.measurements.advancedUISpacer/2,3*e.theme.measurements.advancedUISpacer):"\n      left: ".concat(3*e.theme.measurements.advancedUISpacer/2,"px;\n      width: calc(100% - ").concat(3*e.theme.measurements.advancedUISpacer,"px);\n    ")}),(function(e){return e.theme.toolControlBar.separatorColor})),Ce=re.ZP.h2(b||(b=(0,ee.Z)(["\n  color: ",";\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-weight: 500;\n  min-height: ","px;\n  margin-top: 0;\n"])),(function(e){return e.theme.toolControlBar.titleForeground}),(function(e){return e.theme.measurements.fontSystem.headline2.size}),(function(e){return e.theme.measurements.fontSystem.headline2.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.headline2.case}),(),Te=re.ZP.div(x||(x=(0,ee.Z)(["\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  width: 100%;\n  flex: 1 0 auto;\n"]))),Ee=re.ZP.h1(k||(k=(0,ee.Z)(["\n  /* Center text horizontally and vertically */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-grow: 0;\n  padding: 0 4px;\n  margin: 0;\n  min-height: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  background: ",";\n  color: ",";\n  border-bottom: 1px solid ",";\n  font-weight: 500;\n  text-align: center;\n  /* prevent the padding from leaving the width of the parent  */\n  box-sizing: border-box;\n"])),(function(e){return e.theme.measurements.mainCanvasActionBar.height-2}),(function(e){return e.theme.measurements.fontSystem.headline1.size}),(function(e){return e.theme.measurements.fontSystem.headline1.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.headline1.case}),(function(e){return e.theme.toolControlBar.background}),(function(e){return e.theme.toolControlBar.titleForeground}),(function(e){return e.theme.toolControlBar.separatorColor})),De=re.ZP.div(w||(w=(0,ee.Z)(["\n  display: flex;\n  flex: 1 0 auto;\n  flex-direction: column;\n\n  overflow-y: auto;\n  overflow-x: hidden;\n\n  /* calculate the max-height based on the padding and if the heading is used */\n  max-height: calc(\n    100% -\n      ","px -\n      ","px\n  );\n\n  padding-top: ","px;\n  padding-bottom: ","px;\n\n  > * {\n    margin-left: ","px;\n    margin-right: ","px;\n  }\n\n  /* The scrollable content needs a padding for the scrollbar position */\n  > "," {\n    margin-left: 0px;\n    margin-right: 0px;\n    padding-left: ","px;\n    padding-right: ","px;\n  }\n\n  > :not(:last-child) {\n    margin-bottom: ","px;\n  }\n"])),(function(e){return e.theme.measurements.advancedUIToolControlBar.paddingBottom+e.theme.measurements.advancedUIToolControlBar.paddingTop}),(function(e){return e.displayTitle?e.theme.measurements.mainCanvasActionBar.height-2:"0"}),(function(e){return e.theme.measurements.advancedUIToolControlBar.paddingTop}),(function(e){return e.theme.measurements.advancedUIToolControlBar.paddingBottom}),(function(e){return e.theme.measurements.advancedUIToolControlBar.paddingLeft}),(function(e){return e.theme.measurements.advancedUIToolControlBar.paddingRight}),we,(function(e){return e.theme.measurements.advancedUIToolControlBar.paddingLeft}),(function(e){return e.theme.measurements.advancedUIToolControlBar.paddingRight}),(function(e){return e.theme.measurements.advancedUIToolControlBar.controls.gutter})),Ie=re.ZP.div(S||(S=(0,ee.Z)(["\n  display: flex;\n  flex: 1 0 auto;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n  width: ","px;\n\n  z-index: ",";\n\n  background-color: ",";\n  color: ",";\n  ","\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.measurements.advancedUIToolbar.width}),(function(e){return e.theme.measurements.zIndex.toolbar}),(function(e){return e.theme.toolbar.background}),(function(e){return e.theme.toolbar.foreground}),(function(e){var t=e.theme.toolbar.border?e.theme.toolbar.border:(0,re.iv)(C||(C=(0,ee.Z)(["\n          1px solid ",";\n        "])),e.theme.toolbar.borderColor);return e.reverse?(0,re.iv)(E||(E=(0,ee.Z)(["\n          border-left: ",";\n        "])),t):(0,re.iv)(T||(T=(0,ee.Z)(["\n          border-right: ",";\n        "])),t)}),(function(e){return e.theme.measurements.advancedUIToolbar.marginBottom})),Re=(0,re.ZP)(te.g)(D||(D=(0,ee.Z)(["\n  width: inherit;\n  height: inherit;\n  padding: 0;\n  margin: 0;\n  ","\n\n  ","\n"])),(0,ne.t)()?(0,re.iv)(I||(I=(0,ee.Z)(["\n        background-color: transparent;\n      "]))):(0,re.iv)(R||(R=(0,ee.Z)(["\n        background-color: inherit;\n      "]))),(function(e){return e.isActive&&(0,re.iv)(O||(O=(0,ee.Z)(["\n      background-color: ",";\n      color: ",";\n\n      svg {\n        color: ",";\n      }\n    "])),e.theme.toolbar.activeBackground,e.theme.toolbar.activeForeground,e.theme.toolbar.activeForeground)})),Oe=re.ZP.li.attrs({"aria-haspopup":!0,"aria-hidden":!0,role:"menuitem"})(F||(F=(0,ee.Z)(["\n  height: ","px;\n  cursor: pointer;\n  position: relative;\n"])),(function(e){return e.theme.measurements.advancedUIToolbar.itemHeight})),Fe=re.ZP.li.attrs({role:"none"})(A||(A=(0,ee.Z)(["\n  height: ","px;\n  cursor: pointer;\n  position: relative;\n"])),(function(e){return e.theme.measurements.advancedUIToolbar.separatorHeight})),Ae=((0,ne.b)(ue()),"undefined"!==typeof window&&window.document&&window.document.createElement?ie.useLayoutEffect:ie.useEffect);"undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();var Pe=function(e){var t=e.children,n=e.type,i=void 0===n?"reach-portal":n,r=(0,ie.useRef)(null),o=(0,ie.useRef)(null),a=);return Ae((function(){if(r.current){var e=r.current.ownerDocument;return o.current=null===e||void 0===e?void 0:e.createElement(i),e.body.appendChild(o.current),a(),}),[i,a]),o.current?(0,oe.createPortal)(t,o.current):(0,ie.createElement)("span",{ref:r})};(0,ne.b)(de());var Ze=!1,Me=ie.createContext(null),ze="unmounted",Be="exited",Le="entering",Ue="entered",Ne="exiting",He=function(e){t,e),t.getDerivedStateFromProps=var n=t.prototype;return n.componentDidMount=n.componentDidUpdate=n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=n.updateStatus=n.performEnter=n.performExit=n.cancelNextCallback=n.safeSetState=n.setNextCallback=n.onTransitionEnd=n.render=function(){var e=this.state.status;if(e===ze)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return ie.createElement(Me.Provider,{value:null},"function"===typeof n?n(e,i):ie.cloneElement(ie.Children.only(n),i))},t}(ie.Component);function je(){}He.contextType=Me,He.propTypes={},He.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:je,onEntering:je,onEntered:je,onExit:je,onExiting:je,onExited:je},He.UNMOUNTED=ze,He.EXITED=Be,He.ENTERING=Le,He.ENTERED=Ue,He.EXITING=Ne;var We=He,Ve=re.ZP.div(P||(P=(0,ee.Z)(["\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  /* added line-height reset from appContainer */\n  font-family: '","', sans-serif;\n\n  ","\n  top: ","px;\n  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out,\n    right 0.25s ease-in-out;\n  z-index: ",";\n  pointer-events: none;\n  cursor: pointer;\n\n  &:before {\n    content: ' ';\n    position: absolute;\n    top: 10px;\n    left: -8px;\n    width: 0;\n    height: 0;\n    border-right: 8px solid ",";\n    border-bottom: 6px solid transparent;\n    border-top: 6px solid transparent;\n  }\n\n  &:after {\n    content: '","';\n    position: absolute;\n    color: ",";\n    background: ",";\n    padding: 8px 12px;\n    text-align: center;\n    vertical-align: super;\n    font-size: ","px;\n    letter-spacing: ","px;\n    text-transform: ",";\n    border-radius: ","px;\n    white-space: nowrap;\n  }\n\n  ","\n"])),(function(e){return e.theme.typography.fontFamily}),(0,ne.t)()?(0,re.iv)(Z||(Z=(0,ee.Z)(["\n        position: -ms-device-fixed;\n      "]))):(0,re.iv)(M||(M=(0,ee.Z)(["\n        position: fixed;\n      "]))),(,(function(e){return e.theme.measurements.zIndex.toolbar}),(function(e){return e.theme.tooltip.background}),(function(e){return e.label}),(function(e){return e.theme.tooltip.foreground}),(function(e){return e.theme.tooltip.background}),(function(e){return e.theme.measurements.fontSystem.label.size}),(function(e){return e.theme.measurements.fontSystem.label.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.label.case}),(function(e){return e.theme.shape.radiusSmall}),(function(e){return e.reverse&&(0,re.iv)(z||(z=(0,ee.Z)(["\n      direction: rtl;\n\n      &:before {\n        border-left: 8px solid ",";\n        border-right: none;\n        right: -8px;\n        left: unset;\n        top: 10px;\n      }\n    "])),e.theme.tooltip.background)})),Ge=re.ZP.span(B||(B=(0,ee.Z)(["\n  display: none;\n"]))),qe={Card:ye,CardContainer:ve,Toolbar:{Index:function(e){var t=e.reverse,n=e.style,i=e.className,r=e.children;return ie.createElement(Ie,{reverse:t,"data-test":ne.Sa.Toolbar,className:i,style:n},ie.createElement(te.e,{direction:"vertical"},r))},Item:function(e){return ie.createElement(Oe,null,ie.createElement(Re,(0,Q.Z)((0,Q.Z)({},e),{},{"data-test":ne.Sa.ToolbarItem})))},Separator:Fe,Tooltip:function(e){var t=e.show,n=void 0===t||t,i=e.reverse,r=e.position,o=e.children,a=(0,ie.useRef)(null),s=(0,te.t)().config.measurements,l="string"===typeof o?o:"",u=r.x+s.advancedUIToolbar.width-10,c=r.x+s.advancedUIToolbar.width+16,h=i?"right":"left",d={entering:(0,J.Z)({opacity:0},h,"".concat(u,"px")),entered:(0,J.Z)({opacity:1},h,"".concat(c,"px")),exiting:(0,J.Z)({opacity:0},h,"".concat(u,"px")),exited:(0,J.Z)({opacity:0},h,"".concat(u,"px"))};return ie.createElement(We,{nodeRef:a,in:n,timeout:{exit:500}},(function(e){return"exited"!==e&&ie.createElement(Pe,null,ie.createElement(Ve,{ref:a,style:d[e],"data-test":ne.Sa.Tooltip,reverse:i,position:r,label:l},ie.createElement(Ge,null,l)))}))}},Itemsbar:we,BarSeparator:"",ItemsSeparator:Se,Controlsbar:function(e){var t=e.show,n=e.children;return ie.createElement(xe,{duration:300,height:t?"auto":0,easing:"ease-in-out",animateOpacity:!0},ie.createElement(ke,{"data-test":ne.Sa.ToolControlBarExpandableControls},n))},ToolControlBarItems:function(e){var t=e.children,n=(0,te.t)().config.config.displayToolControlBarTitle;return ie.createElement(De,{displayTitle:n},t)},Sidebar:{Index:function(e){var t=e.reverse,n=void 0!==t&&t,i=e.style,r=e.className,o=e.children;return ie.createElement(_e,{"data-test":ne.Sa.ToolControlBar,reverse:n,className:r,style:i},o)},Heading:Ee,SubHeading:Ce,TextCategory:function(e){var t=e.name,n=e.isFirstCategory,i=e.isLastCategory,r=e.children;return ie.createElement(Te,null,!n&&ie.createElement(te.q.Spacer,{count:2}),ie.createElement(Ce,{"data-test":t},t),ie.createElement(ve,{"data-test":ne.Sa.CategoryItemsContainer},r),!i&&ie.createElement(ie.Fragment,null,ie.createElement(te.q.Spacer,{count:2}),ie.createElement(Se,{full:!0})))},ExpandableContainer:be}},Ye=function(e){(0,X.Z)(n,e);var t=(0,K.Z)(n);function n(){var e;return(0,q.Z)(this,n),(e=t.apply(this,arguments)).renderIcon=function(t){var n=e.props,i=n.tool,r=n.config.state.config[i];if("icon"in r){var o=r.icon;return ie.createElement(o,null)}var a=te.v[t];return ie.createElement(a,null)||null},e.update=function(t){e.props.active.selectTool(t)},e}return(0,Y.Z)(n,[{key:"getToolTitle",value:,{key:"render",value:function(){var e=this,t=this.props,n=t.tool,i=t.disabled,r=t.custom,o=t.active,a=t.isReverse,s=o.tool;if(n){var l=r.getAdvancedToolbarItem();return l?ie.createElement(l,{key:n,isDisabled:i,isActive:n===s,isReverse:a,icon:this.renderIcon(n),onClick:function(){return e.update(n)},tool:n,label:this.getToolTitle(n)}):null}return ie.createElement(qe.Toolbar.Separator,null)}}]),n}(ie.Component),Xe=Ye=(0,ne.c)([(0,te.c)("active","config","custom"),te.a],Ye),Ke=(0,te.a)((function(){var e=(0,te.t)(),t=e.custom,n=e.config,i=e.active,r="reverse"===n.config.order,o=t.getAdvancedToolbar();return o?ie.createElement(o,{reverse:r},n.tools.map((function(e,t){return ie.createElement(Xe,{key:e||t,tool:e,isReverse:r,disabled:!(i.image||"library"===e||"customTool"===e)})}))):null})),Je=(0,te.a)((function(){var e=(0,te.t)(),t=e.adjustmentsTool,n=e.custom,i=t.categories,r=t.items,o=t.config,a=t.locale,s=function(e){var i=t[e.identifier],r=t.locale.categories[e.identifier]||e.name,o=n.getSlider();return o?ie.createElement(o,{tool:"adjustment",identifier:e.identifier,adjust:!0,key:e.identifier,label:r,value:i,onChange:onMouseUp:function(){return t.toolSnapshot()},onTouchEnd:function(){return t.toolSnapshot()},snap:0,style:{paddingBottom:"16px",width:"100%"}}):null};return o.flattenCategories?ie.createElement(ie.Fragment,null,r.map(s)):ie.createElement(ie.Fragment,null,i.map((function(e,t){var n=a.categories[e.identifier]||e.name;return e.items?ie.createElement(qe.Sidebar.TextCategory,{key:e.identifier,name:n,isFirstCategory:0===t,isLastCategory:t===i.length-1},e.items.map(s)):null})))})),Qe=$e=(0,te.a)((function(){var e=(0,te.t)(),t=e.adjustmentsTool,n=e.custom,i=t.locale.controls,r=n.getButton("toolControlBarSecondaryButton");return r?ie.createElement(r,{tool:"adjustment",label:i.buttonReset,ariaLabel:i.buttonReset,isDisabled:!t.isDirty,onClick:function(){t.reset()}}):null})),et=(0,te.a)((function(){var e=(0,te.t)().adjustmentsTool,t=e.config.advancedUIToolControlBarOrder,n=function t(n){if("string"===typeof n)switch(n){case"items":return ie.createElement(Qe,{key:n});case"separator":return ie.createElement(qe.ItemsSeparator,{full:!0,key:(0,ne.Na)()});case"removeAdjustmentButton":return ie.createElement($e,{key:n});default:return null}else if("object"===typeof n)return ie.createElement(qe.Controlsbar,{key:n.type,show:e.isDirty},n.children.map((function(e){return t(e)})));return null};return ie.createElement(qe.ToolControlBarItems,null,t.map((function(e){return n(e)})))})),tt=(0,te.a)((function(e){var t=e.displayTitle,n=(0,te.t)().adjustmentsTool;return ie.createElement(ie.Fragment,null,t&&ie.createElement(qe.Sidebar.Heading,null,n.locale.title),ie.createElement(et,null))})),nt=(0,te.a)((function(){var e=(0,te.t)().brushTool,t=e.locale.controls,n=e.localeColor.colorPicker,i=e.colorList;return ie.createElement(te.q.Input.Selection,{label:t.selectColor},ie.createElement(te.H,{tool:"brush",activeColor:e.color,colors:i,labelsColor:n,onChange:e.changeColor}))})),it=(0,te.a)((function(){var e=(0,te.t)(),t=e.brushTool,n=e.custom,i=t.locale.controls,r=n.getSlider();return r?ie.createElement(r,{tool:"brush","data-test":ne.Sa.BrushHardness,label:i.sliderHardness,value:t.hardness,min:0,max:1,onChange:t.changeHardness}):null})),rt=(0,te.a)((function(){var e=(0,te.t)(),t=e.brushTool,n=e.custom,i=t.locale.controls,r=n.getSlider();return r?ie.createElement(r,{tool:"brush","data-test":ne.Sa.BrushSize,label:i.sliderSize,value:t.relativeSize,min:1,max:100,divider:1,onChange:t.changeRelativeSize}):null})),ot=(0,te.a)((function(){var e=(0,te.t)(),t=e.brushTool,n=e.custom,i=t.locale.controls,r=n.getButton("toolControlBarSecondaryButton");return r?ie.createElement(r,{tool:"brush",label:i.buttonReset,ariaLabel:i.buttonReset,isDisabled:!t.isDirty,onClick:function(){t.reset()}}):null})),at=(0,te.a)((function(){var e=(0,te.t)().brushTool,t=e.config.advancedUIToolControlBarOrder,n=function t(n){if("string"===typeof n)switch(n){case"brushColorList":return ie.createElement(nt,{key:n});case"brushHardnessSlider":return ie.createElement(it,{key:n});case"brushSizeSlider":return ie.createElement(rt,{key:n});case"separator":return ie.createElement(qe.ItemsSeparator,{full:!0,key:(0,ne.Na)()});case"removeBrushButton":return ie.createElement(ot,{key:n});default:return null}else if("object"===typeof n)return ie.createElement(qe.Controlsbar,{key:n.type,show:e.isDirty},n.children.map((function(e){return t(e)})));return null};return ie.createElement(qe.ToolControlBarItems,null,t.map((function(e){return n(e)})))})),st=(0,te.c)("brushTool")((0,te.a)((function(e){var t=e.brushTool,n=e.displayTitle;return ie.createElement(ie.Fragment,null,n&&ie.createElement(qe.Sidebar.Heading,null,t.locale.title),ie.createElement(at,null))}))),lt=function(e){var t=e.displayTitle,n=(0,te.t)().config,i=n.state.config.customTool.toolControlBar,r=n.state.locale.customTool.title;return ie.createElement(ie.Fragment,null,t&&ie.createElement(qe.Sidebar.Heading,null,r),ie.createElement(i,{language:n.state.locale.customTool}))},ut=(0,te.a)((function(){var e=(0,te.t)(),t=e.filterTool,n=e.custom,i=t.locale.controls,r=t.state,o=function(){t.toolSnapshot()},a=n.getSlider();return a?ie.createElement(a,{tool:"filter","aria-hidden":!t.isOptionSelected,label:i.sliderIntensity,value:r.intensity,min:0,max:1,onChange:t.changeIntensity,onMouseUp:o,onTouchEnd:o,snap:r.isDuotone?.5:null,isDisabled:!t.isOptionSelected}):null})),ct=(0,te.a)((function(){var e=(0,te.t)(),t=e.filterTool,n=e.custom,i=t.categories,r=t.config,o=t.items,a=t.locale,s=n.getAdvancedItemCard(),l=n.getAdvancedCategoryCard(),u=function(e,n){var i=a.items[e.identifier]||e.name;return s?ie.createElement(s,{tool:"filter",type:"medium",onClick:key:e.identifier,image:e.thumbnailURI,label:i,style:{animationDelay:"".concat((0,ne.Wa)(n),"s")},isActive:t.identifier===e.identifier},ie.createElement(te.m,{withBackground:!0},i)):null};return r.flattenCategories?ie.createElement(ie.Fragment,null,o.map(u)):"card"===r.categoryHeaderType?ie.createElement(ie.Fragment,null,i.map((function(e,n){var i=t.selectedCategoryIdentifier===e.identifier,r=a.categories[e.identifier]||e.name;return e.items&&l?ie.createElement("div",{key:e.identifier},ie.createElement(l,{isActive:i,tool:"filter",type:"large",onClick:function(){return t.toggleCategorySelection(e.identifier)},image:e.thumbnailURI,label:r,style:{animationDelay:"".concat((0,ne.Wa)(n),"s")}},ie.createElement(te.m,{withBackground:!0,caret:!0,isActive:i},r)),ie.createElement(qe.Sidebar.ExpandableContainer,{show:i},e.items.map(u))):null}))):"text"===r.categoryHeaderType?ie.createElement(ie.Fragment,null,i.map((function(e,t){var n=a.categories[e.identifier]||e.name;return e.items?ie.createElement(qe.Sidebar.TextCategory,{key:e.identifier,name:n,isFirstCategory:0===t,isLastCategory:t===i.length-1},e.items.map(u)):null}))):null})),ht=function(){return ie.createElement(qe.Itemsbar,null,ie.createElement(qe.CardContainer,null,ie.createElement(ct,null)))},dt=(0,te.a)((function(){var e=(0,te.t)(),t=e.filterTool,n=e.custom,i=t.locale.controls,r=n.getButton("toolControlBarSecondaryButton");return r?ie.createElement(r,{tool:"filter",label:i.buttonReset,ariaLabel:i.buttonReset,isDisabled:!t.isOptionSelected,onClick:function(){t.reset()}}):null})),ft=(0,te.a)((function(){var e=(0,te.t)().filterTool,t=e.config.advancedUIToolControlBarOrder,n=function t(n){if("string"===typeof n)switch(n){case"items":return ie.createElement(ht,{key:n});case"separator":return ie.createElement(qe.ItemsSeparator,{full:!0,key:(0,ne.Na)()});case"removeFilterButton":return ie.createElement(dt,{key:n});case"filterIntensitySlider":return ie.createElement(ut,{key:n});default:return null}else if("object"===typeof n)return ie.createElement(qe.Controlsbar,{key:n.type,show:e.isOptionSelected},n.children.map((function(e){return t(e)})));return null};return ie.createElement(qe.ToolControlBarItems,null,t.map((function(e){return n(e)})))})),pt=(0,te.a)((function(e){var t=e.displayTitle,n=(0,te.t)().filterTool;return ie.createElement(ie.Fragment,null,t&&ie.createElement(qe.Sidebar.Heading,null,n.locale.title),ie.createElement(ft,null))})),gt=(0,te.a)((function(){var e=(0,te.t)(),t=e.focusTool,n=e.custom,i=t.locale.controls,r=o=n.getSlider();return o?ie.createElement(o,{tool:"focus","aria-hidden":!t.isOptionSelected,label:i.sliderIntensity,value:t.relativeIntensity,min:0,max:100,divider:1,onChange:t.changeRelativeIntensity,onMouseUp:r,onTouchEnd:r,isDisabled:!t.isOptionSelected}):null})),mt=(0,te.a)((function(){var e=(0,te.t)(),t=e.focusTool,n=e.custom,i=t.items;return ie.createElement(ie.Fragment,null,i.map((function(e,i){var r=t.locale.items[e.identifier]||e.name,o=n.getAdvancedItemCard();return o?ie.createElement(o,{tool:"focus",type:"large",onClick:function(){return t.selectFocus(e.identifier)},key:e.identifier,image:e.thumbnailURI,label:r,style:{animationDelay:"".concat((0,ne.Wa)(i),"s")},isActive:e.identifier===t.identifier},ie.createElement(te.m,{withBackground:!0},r)):null})))})),yt=function(){return ie.createElement(qe.Itemsbar,null,ie.createElement(qe.CardContainer,null,ie.createElement(mt,null)))},vt=(0,te.a)((function(){var e=(0,te.t)(),t=e.focusTool,n=e.custom,i=t.locale.controls,r=n.getButton("toolControlBarSecondaryButton");return r?ie.createElement(r,{tool:"focus",label:i.buttonReset,ariaLabel:i.buttonReset,isDisabled:!t.isOptionSelected,onClick:function(){t.reset()}}):null})),_t=(0,te.a)((function(){var e=(0,te.t)().focusTool,t=e.config.advancedUIToolControlBarOrder,n=function t(n){if("string"===typeof n)switch(n){case"separator":return ie.createElement(qe.ItemsSeparator,{full:!0,key:(0,ne.Na)()});case"removeFocusButton":return ie.createElement(vt,{key:n});case"focusIntensitySlider":return ie.createElement(gt,{key:n});case"items":return ie.createElement(yt,{key:n});default:return null}else if("object"===typeof n)return ie.createElement(qe.Controlsbar,{key:n.type,show:e.isOptionSelected},n.children.map((function(e){return t(e)})));return null};return ie.createElement(qe.ToolControlBarItems,null,t.map((function(e){return n(e)})))})),bt=(0,te.a)((function(e){var t=e.displayTitle,n=(0,te.t)().focusTool;return ie.createElement(ie.Fragment,null,t&&ie.createElement(qe.Sidebar.Heading,null,n.locale.title),ie.createElement(_t,null))})),xt=(0,te.a)((function(){var e=(0,te.t)().frameTool,t=e.locale.controls,n=e.localeColor.colorPicker,i=e.colorList,r=e.tintable;return ie.createElement(te.q.Input.Selection,{isDisabled:!r,label:t.selectColor},ie.createElement(te.H,{tool:"frame",activeColor:e.color,colors:i,labelsColor:n,isDisabled:!r,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))})),kt=(0,te.a)((function(){var e=(0,te.t)(),t=e.frameTool,n=e.custom,i=t.items,r=t.state?t.state.identifier:null;return ie.createElement(qe.Itemsbar,null,ie.createElement(qe.CardContainer,null,i.map((function(e,i){var o=t.locale.items[e.identifier]||e.name,a=n.getAdvancedItemCard();return a?ie.createElement(a,{tool:"frame",type:"medium",onClick:function(){return t.selectFrame(e.identifier)},key:e.identifier,image:e.thumbnailURI,label:o,style:{backgroundSize:"75%",animationDelay:"".concat((0,ne.Wa)(i),"s")},isActive:e.identifier===r},ie.createElement(te.m,{hidden:!0},o)):null}))))})),wt=(0,te.a)((function(){var e=(0,te.t)(),t=e.frameTool,n=e.custom,i=t.locale.controls,r=function(e){t.toolSnapshot(e)},o=n.getSlider();return o?ie.createElement(o,{tool:"frame","aria-hidden":!t.isOptionSelected,label:i.sliderOpacity,value:t.opacity,min:0,max:1,onChange:t.changeOpacity,onMouseUp:function(){r(i.sliderOpacity)},onTouchEnd:function(){r(i.sliderOpacity)},isDisabled:!t.isOptionSelected}):null})),St=(0,te.a)((function(){var e=(0,te.t)(),t=e.frameTool,n=e.custom,i=t.locale.controls,r=function(e){t.toolSnapshot(e)},o=n.getSlider();return o?ie.createElement(o,{tool:"frame","aria-hidden":!t.isOptionSelected,label:i.sliderSize,value:t.size,min:t.minSize,max:t.maxSize,divider:1,onChange:t.changeWidth,onMouseUp:function(){r(i.sliderSize)},onTouchEnd:function(){r(i.sliderSize)},isDisabled:!t.isOptionSelected}):null})),Ct=(0,te.a)((function(){var e=(0,te.t)(),t=e.frameTool,n=e.custom,i=t.locale.controls,r=n.getButton("toolControlBarSecondaryButton");return r?ie.createElement(r,{tool:"frame",ariaLabel:i.buttonReset,onClick:function(){t.reset()},isDisabled:!t.isOptionSelected,label:i.buttonReset}):null})),Tt=(0,te.a)((function(){var e=(0,te.t)().frameTool,t=e.config.advancedUIToolControlBarOrder,n=function t(n){if("string"===typeof n)switch(n){case"items":return ie.createElement(kt,{key:n});case"separator":return ie.createElement(qe.ItemsSeparator,{full:!0,key:(0,ne.Na)()});case"frameOpacitySlider":return ie.createElement(wt,{key:n});case"frameSizeSlider":return ie.createElement(St,{key:n});case"frameColorList":return ie.createElement(xt,{key:n});case"removeFrameButton":return ie.createElement(Ct,{key:n});default:return null}else if("object"===typeof n)return ie.createElement(qe.Controlsbar,{key:n.type,show:e.isOptionSelected},n.children.map((function(e){return t(e)})));return null};return ie.createElement(qe.ToolControlBarItems,null,t.map((function(e){return n(e)})))})),Et=(0,te.a)((function(e){var t=e.displayTitle,n=(0,te.t)().frameTool;return ie.createElement(ie.Fragment,null,t&&ie.createElement(qe.Sidebar.Heading,null,n.locale.title),ie.createElement(Tt,null))})),Dt=(0,te.a)((function(){var e=(0,te.t)(),t=e.active,n=e.library,i=e.custom,r=n.query,o=n.config,a=n.selectedCategoryIdentifier,s=n.categories,l=n.items,u=i.getAdvancedCategoryCard(),c=i.getAdvancedItemCard(),h=function(e,n){return c?ie.createElement(c,{tool:"library",type:"medium",onClick:function(){return t.newImage(e.rawUrl)},key:"".concat(e.identifier,"-").concat(n),image:e.thumbnailURI,label:e.name,style:{animationDelay:"".concat((0,ne.Wa)(n),"s")},authorAvatar:e.authorAvatar,authorName:e.authorName},e.authorAvatar&&ie.createElement(te.n,{url:e.authorAvatar}),e.authorName&&ie.createElement(te.m,{withBackground:!0},e.authorName)):null};return r?l.length?ie.createElement(ie.Fragment,null,l.map(h)):ie.createElement("p",{"data-test":ne.Sa.NoResult},n.locale.controls.noResults):o.flattenCategories?ie.createElement(ie.Fragment,null,l.map(h)):"card"===o.categoryHeaderType?ie.createElement(ie.Fragment,null,s.map((function(e,t){var i=a===e.identifier;return e.items&&u?ie.createElement("div",{key:e.identifier},ie.createElement(u,{isActive:i,tool:"library",type:"large",onClick:function(){return n.toggleCategorySelection(e.identifier)},image:e.thumbnailURI,label:e.name,style:{animationDelay:"".concat((0,ne.Wa)(t),"s")}},ie.createElement(te.m,{withBackground:!0,caret:!0,isActive:i},e.name)),ie.createElement(qe.Sidebar.ExpandableContainer,{show:i},e.items.map(h))):null}))):"text"===o.categoryHeaderType?ie.createElement(ie.Fragment,null,s.map((function(e,t){return e.items?ie.createElement(qe.Sidebar.TextCategory,{key:e.identifier,name:e.name,isFirstCategory:0===t,isLastCategory:t===s.length-1},e.items.map(h)):null}))):null})),It=function(){return ie.createElement(qe.Itemsbar,null,ie.createElement(qe.CardContainer,null,ie.createElement(Dt,null)))},Rt=(0,te.a)((function(){var e=(0,te.t)(),t=e.library,n=e.active,i=t.config,r=t.locale.controls;return i.enableWebcam?ie.createElement(te.Q,{tool:"library",onClick:label:r.buttonWebcamOpen}):null})),Ot=(0,te.a)((function(){var e=(0,te.t)().library,t=e.libraryProvider,n=e.locale.controls;return t?ie.createElement(te.q.Input.Search,{onChange:function(t){e.fetchImages(t)},placeholder:n.placeholderSearch}):null})),Ft=(0,te.a)((function(){var e=(0,te.t)(),t=e.library,n=e.active,i=e.custom,r=t.config,o=t.locale.controls,a=i.getButton("toolControlBarPrimaryButton");return r.enableUpload&&a?ie.createElement(a,{"data-test":ne.Sa.LibraryUploadButton,tool:"library",ariaLabel:o.buttonUpload,onClick:label:o.buttonUpload},ie.createElement(te.q.Input.File,{onChange:function(e){var t=e.target.files;if(t.length){var i=new FileReader;i.onload=i.readAsDataURL(t[0])}}})):null})),At=(0,te.a)((function(){var e=(0,te.t)().library.config.advancedUIToolControlBarOrder;return ie.createElement(qe.ToolControlBarItems,null,e.map((function(e){return function(e){switch(e){case"items":return ie.createElement(It,{key:e});case"openWebcamButton":return ie.createElement(Rt,{key:e});case"searchFieldInput":return ie.createElement(Ot,{key:e});case"separator":return ie.createElement(qe.ItemsSeparator,{full:!0,key:(0,ne.Na)()});case"uploadImageButton":return ie.createElement(Ft,{key:e});default:return null}}(e)})))})),Pt=(0,te.a)((function(e){var t=e.displayTitle,n=(0,te.t)().library;return ie.createElement(ie.Fragment,null,t&&ie.createElement(qe.Sidebar.Heading,null,n.locale.title),ie.createElement(At,null))})),Zt=(0,te.a)((function(){var e=(0,te.t)().overlayTool,t=e.allBlendModes,n=e.blendMode,i=e.locale.controls;return ie.createElement(te.q.Input.CarouselSlider,{label:i.carouselBlendMode,defaultIdentifier:n,onSelect:function(t){e.changeBlendMode(t)},list:t})})),Mt=(0,te.a)((function(){var e=(0,te.t)(),t=e.overlayTool,n=e.custom,i=t.items,r=t.locale,o=t.identifier,a=t.selectOverlay;return ie.createElement(ie.Fragment,null,i.map((function(e,t){var i=r.items[e.identifier]||e.name,s=n.getAdvancedItemCard();return s?ie.createElement(s,{tool:"overlay",type:"medium",onClick:key:e.identifier,image:e.thumbnailURI,label:i,style:{animationDelay:"".concat((0,ne.Wa)(t),"s")},isActive:e.identifier===o},ie.createElement(te.m,{withBackground:!0},i)):null})))})),zt=function(){return ie.createElement(qe.Itemsbar,null,ie.createElement(qe.CardContainer,null,ie.createElement(Mt,null)))},Bt=(0,te.a)((function(){var e=(0,te.t)(),t=e.overlayTool,n=e.custom,i=t.locale.controls,r=function(){t.toolSnapshot()},o=n.getSlider();return o?ie.createElement(o,{tool:"overlay","aria-hidden":!t.isOptionSelected,label:i.sliderOpacity,value:t.opacity,min:0,max:1,onChange:t.changeOpacity,onMouseUp:r,onTouchEnd:r,isDisabled:!t.isOptionSelected}):null})),Lt=(0,te.a)((function(){var e=(0,te.t)(),t=e.overlayTool,n=e.custom,i=t.locale.controls,r=n.getButton("toolControlBarSecondaryButton");return r?ie.createElement(r,{tool:"overlay",label:i.buttonReset,ariaLabel:i.buttonReset,isDisabled:!t.isOptionSelected,onClick:function(){t.reset()}}):null})),Ut=(0,te.a)((function(){var e=(0,te.t)().overlayTool,t=e.config.advancedUIToolControlBarOrder,n=function t(n){if("string"===typeof n)switch(n){case"items":return ie.createElement(zt,{key:n});case"separator":return ie.createElement(qe.ItemsSeparator,{full:!0,key:(0,ne.Na)()});case"overlayBlendModeCarousel":return ie.createElement(Zt,{key:n});case"overlayOpacitySlider":return ie.createElement(Bt,{key:n});case"removeOverlayButton":return ie.createElement(Lt,{key:n});default:return null}else if("object"===typeof n)return ie.createElement(qe.Controlsbar,{key:n.type,show:e.isOptionSelected},n.children.map((function(e){return t(e)})));return null};return ie.createElement(qe.ToolControlBarItems,null,t.map((function(e){return n(e)})))})),Nt=(0,te.a)((function(e){var t=e.displayTitle,n=(0,te.t)().overlayTool;return ie.createElement(ie.Fragment,null,t&&ie.createElement(qe.Sidebar.Heading,null,n.locale.title),ie.createElement(Ut,null))})),Ht=(0,te.a)((function(){var e=(0,te.t)().stickerTool,t=e.colorList,n=e.locale.controls,i=e.localeColor.colorPicker,r=!e.isStickerSelected||!e.tintable&&e.isStickerSelected;return ie.createElement(te.q.Input.Selection,{isDisabled:r,label:n.selectColor},ie.createElement(te.H,{tool:"sticker",activeSprite:e.id,activeColor:e.tintColor,colors:t,labelsColor:i,isDisabled:r,onChange:e.changeTintColor,onAddSnapshot:e.tintColorSnapshot}))})),jt=(0,te.a)((function(){var e=(0,te.t)(),t=e.stickerTool,n=e.custom,i=t.categories,r=t.selectedCategoryIdentifier,o=t.config,a=t.items,s=t.locale,l=n.getAdvancedCategoryCard(),u=n.getAdvancedItemCard(),c=function(e,n){var i=s.items[e.identifier]||e.name;return u?ie.createElement(u,{key:e.identifier,tool:"sticker",type:"small",onClick:function(){return t.add(e.identifier)},image:e.thumbnailURI,label:i,style:{backgroundSize:"75%",animationDelay:"".concat((0,ne.Xa)(n),"s")}},ie.createElement(te.m,{hidden:!0},i)):null};return o.flattenCategories?ie.createElement(ie.Fragment,null,a.map(c)):"card"===o.categoryHeaderType?ie.createElement(ie.Fragment,null,i.map((function(e,n){var i=r===e.identifier,o=s.categories[e.identifier]||e.name;return e.items&&l?ie.createElement("div",{key:e.identifier},ie.createElement(l,{isActive:i,tool:"sticker",type:"large",onClick:function(){return t.toggleCategorySelection(e.identifier)},image:e.thumbnailURI,label:o,style:{animationDelay:"".concat((0,ne.Wa)(n),"s")}},ie.createElement(te.m,{withBackground:!0,caret:!0,isActive:i},o)),ie.createElement(qe.Sidebar.ExpandableContainer,{show:i,key:"".concat(e.identifier,"-items")},e.items.map(c))):null}))):"text"===o.categoryHeaderType?ie.createElement(ie.Fragment,null,i.map((function(e,t){var n=s.categories[e.identifier]||e.name;return e.items?ie.createElement(qe.Sidebar.TextCategory,{key:e.identifier,name:n,isFirstCategory:0===t,isLastCategory:t===i.length-1},e.items.map(c)):null}))):null})),Wt=function(){return ie.createElement(qe.Itemsbar,null,ie.createElement(qe.CardContainer,null,ie.createElement(jt,null)))},Vt=(0,te.a)((function(){var e=(0,te.t)(),t=e.stickerTool,n=e.custom,i=t.locale.controls,r=function(){t.toolSnapshot()},o=n.getSlider();return o?ie.createElement(o,{tool:"sticker",isDisabled:!t.isStickerSelected,label:i.sliderOpacity,value:t.opacity,min:0,max:1,onChange:t.changeOpacity,onMouseUp:r,onTouchEnd:r}):null})),Gt=re.ZP.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})(L||(L=(0,ee.Z)(["\n  ","\n"])),te.p.VisuallyHidden),qt=(0,te.a)((function(){var e=(0,te.t)(),t=e.stickerTool,n=e.custom,i=t.locale.controls,r=n.getButton("toolControlBarPrimaryButton");return t.isCustomStickerEnabled&&r?ie.createElement(r,{tool:"sticker",ariaLabel:i.buttonUpload,onClick:function(){var e=document.getElementById("fileUpload");e&&(e.value=null,e.click())},label:i.buttonUpload},ie.createElement(Gt,{onChange:)):null})),Yt=(0,te.a)((function(){var e=(0,te.t)().stickerTool.config.advancedUIToolControlBarOrder;return ie.createElement(qe.ToolControlBarItems,null,e.map((function(e){return function(e){switch(e){case"items":return ie.createElement(Wt,{key:e});case"separator":return ie.createElement(qe.ItemsSeparator,{full:!0,key:(0,ne.Na)()});case"uploadStickerButton":return ie.createElement(qt,{key:e});case"stickerColorList":return ie.createElement(Ht,{key:e});case"stickerOpacitySlider":return ie.createElement(Vt,{key:e});default:return null}}(e)})))})),Xt=(0,te.a)((function(e){var t=e.displayTitle,n=(0,te.t)().stickerTool;return ie.createElement(ie.Fragment,null,t&&ie.createElement(qe.Sidebar.Heading,null,n.locale.title),ie.createElement(Yt,null))})),Kt=(0,te.a)((function(){var e=(0,te.t)().textTool,t=e.locale.controls,n=e.localeColor.colorPicker,i=e.isTextSelected,r=e.backgroundColorList;return ie.createElement(te.q.Input.Selection,{isDisabled:!i,label:t.selectBackgroundColor},ie.createElement(te.H,{tool:"text",activeSprite:e.id,activeColor:e.backgroundColor,colors:r,labelsColor:n,isDisabled:!i,onChange:e.changeBackgroundColor,onAddSnapshot:e.backgroundColorSnapshot}))})),Jt=(0,te.a)((function(){var e=(0,te.t)().textTool,t=e.locale.controls,n=e.fontFamily,i=e.fontStyle,r=e.fontWeight,o=e.fontFamilies,a=e.isTextSelected,s=o.map((function(e){return{label:"".concat(e.fontFamily," ").concat(te.C.getDisplayFontStyle(e)),fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily,value:e.identifier}})),l=s.filter((function(t){return t.value===e.identifier}))[0];return ie.createElement(te.q.Input.Dropdown,{isDisabled:!a,style:{fontFamily:n,fontStyle:i,fontWeight:r},itemStyle:label:t.dropdownFontFamily,list:s,onSelect:e.changeFont,selectedItem:l.label})})),Qt=(0,re.ZP)(te.q.Input.NumericInput)(U||(U=(0,ee.Z)(["\n  max-width: 50%;\n  margin-right: 16px;\n"]))),$t=(0,te.a)((function(){var e=(0,te.t)().textTool,t=e.locale.controls,n=e.isTextSelected;return ie.createElement(Qt,{value:e.fontSize.toFixed(0),onSubmit:function(t){var n=t?parseFloat(t):0;e.setFontSize(Math.max(10,Math.min(690,n)))},label:t.textFontSize,isDisabled:!n})})),en=(0,te.a)((function(){var e=(0,te.t)(),t=e.textTool,n=e.custom,i=t.locale.controls,r=t.isTextSelected,o=function(){t.toolSnapshot()},a=n.getSlider();return a?ie.createElement(a,{tool:"text",isDisabled:!r,label:i.sliderLineSpacing,value:t.lineHeight,min:.5,max:3,onChange:t.changeLineHeight,onMouseUp:o,onTouchEnd:o,snap:1,divider:1,decimal:1}):null})),tn=(0,te.a)((function(){var e=(0,te.t)(),t=e.textTool,n=e.custom,i=t.locale.controls,r=n.getButton("toolControlBarPrimaryButton");return r?ie.createElement(r,{tool:"text",ariaLabel:i.buttonNew,onClick:function(){t.add()},label:i.buttonNew}):null})),nn=(0,re.ZP)(te.q.Input.Selection)(N||(N=(0,ee.Z)(["\n  width: 50%;\n"]))),rn=(0,te.a)((function(){var e=(0,te.t)(),t=e.textTool,n=e.custom,i=t.locale.controls,r=t.isTextSelected,o=t.alignment,a=n.getButton("textAlignment");return ie.createElement(nn,{isDisabled:!r,inline:!0,label:i.selectAlignment,"data-test":ne.Sa.TextAlignment},["left","center","right"].map((function(e){var n=te.w[e];return ie.createElement(a,{tool:e,isDisabled:!r,ariaLabel:"Align ".concat(e),isActive:e===o,key:e,style:{padding:"1px 3px 2px"},icon:ie.createElement(n,null),onClick:function(){return t.changeAlignment(e)}})})))})),on=(0,te.a)((function(){var e=(0,te.t)().textTool,t=e.locale.controls,n=e.localeColor.colorPicker,i=e.isTextSelected,r=e.colorList;return ie.createElement(te.q.Input.Selection,{isDisabled:!i,label:t.selectFontColor},ie.createElement(te.H,{tool:"text",activeSprite:e.id,activeColor:e.textColor,colors:r,labelsColor:n,isDisabled:!i,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))})),an=re.ZP.div(H||(H=(0,ee.Z)(["\n  display: flex;\n  justify-content: space-between;\n"]))),sn=(0,te.c)("textTool")((0,te.a)((function(e){var t=e.textTool.config.advancedUIToolControlBarOrder,n=function e(t){if("string"===typeof t)switch(t){case"newTextButton":return ie.createElement(tn,{key:t});case"fontFamilyDropdown":return ie.createElement(Jt,{key:t});case"separator":return ie.createElement(qe.ItemsSeparator,{full:!0,key:(0,ne.Na)()});case"textColorList":return ie.createElement(on,{key:t});case"backgroundColorList":return ie.createElement(Kt,{key:t});case"lineSpacingSlider":return ie.createElement(en,{key:t});case"textAlignmentList":return ie.createElement(rn,{key:t});case"fontSizeInput":return ie.createElement($t,{key:t});default:return null}else if("object"===typeof t)return ie.createElement(an,{key:t.type},t.children.map((function(t){return e(t)})));return null};return ie.createElement(qe.ToolControlBarItems,null,t.map(())}))),ln=(0,te.a)((function(e){var t=e.displayTitle,n=(0,te.t)().textTool;return ie.createElement(ie.Fragment,null,t&&ie.createElement(qe.Sidebar.Heading,null,n.locale.title),ie.createElement(sn,null))})),un=(0,te.a)((function(){var e=(0,te.t)(),t=e.textDesignTool,n=e.custom,i=t.locale.controls,r=n.getButton("toolControlBarPrimaryButton");return r?ie.createElement(r,{tool:"textdesign",ariaLabel:i.buttonNew,onClick:function(){t.add()},label:i.buttonNew}):null})),cn=(0,te.a)((function(){var e=(0,te.t)(),t=e.textDesignTool,n=e.custom,i=t.locale.controls,r=t.isTextDesignSelected,o=n.getButton("toolControlBarSecondaryButton");return o?ie.createElement(o,{tool:"textdesign",ariaLabel:i.buttonShuffle,isDisabled:!r,onClick:function(){t.changeSeed()},label:i.buttonShuffle}):null})),hn=(0,te.a)((function(){var e=(0,te.t)().textDesignTool,t=e.locale.controls,n=e.localeColor.colorPicker,i=e.isTextDesignSelected,r=e.colorList;return ie.createElement(te.q.Input.Selection,{isDisabled:!i,label:t.selectColor},ie.createElement(te.H,{tool:"textdesign",activeSprite:e.id,activeColor:e.color,colors:r,labelsColor:n,isDisabled:!i,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))})),dn=(0,te.a)((function(){var e=(0,te.t)(),t=e.textDesignTool,n=e.custom,i=t.items,r=t.identifier;return ie.createElement(ie.Fragment,null,i.map((function(e,i){var o=n.getAdvancedItemCard();return o?ie.createElement(o,{key:e.identifier,tool:"textdesign",type:"medium",onClick:function(){return function(e){t.changeIdentifier(e)}(e.identifier)},image:e.thumbnailURI,label:e.name||"",style:{animationDelay:"".concat((0,ne.Wa)(i),"s"),backgroundSize:"60%"},isDisabled:!t.isTextDesignSelected,isActive:r===e.identifier},ie.createElement(te.m,{hidden:!0},e.name)):null})))})),fn=function(){return ie.createElement(qe.Itemsbar,null,ie.createElement(qe.CardContainer,null,ie.createElement(dn,null)))},pn=(0,te.a)((function(){var e=(0,te.t)().textDesignTool.config.advancedUIToolControlBarOrder;return ie.createElement(qe.ToolControlBarItems,null,e.map((function(e){return function(e){switch(e){case"items":return ie.createElement(fn,{key:e});case"separator":return ie.createElement(qe.ItemsSeparator,{full:!0,key:(0,ne.Na)()});case"newTextDesignButton":return ie.createElement(un,{key:e});case"shuffleLayoutButton":return ie.createElement(cn,{key:e});case"textDesignColorList":return ie.createElement(hn,{key:e});default:return null}}(e)})))})),gn=(0,te.a)((function(e){var t=e.displayTitle,n=(0,te.t)().textDesignTool;return ie.createElement(ie.Fragment,null,t&&ie.createElement(qe.Sidebar.Heading,null,n.locale.title),ie.createElement(pn,null))})),mn=(0,te.a)((function(){var e=(0,te.t)().transformTool,t=e.locale.controls,n=e.forceDimensions,i=e.localOutputHeight,r=e.localOutputWidth;return ie.createElement(te.N,{isDisabled:n,showLabel:!0,valueHeight:i,valueWidth:r,onSubmitWidth:e.onPixelWidth,onSubmitHeight:e.onPixelHeight,label:t.inputCropSize,labelHeight:t.inputHeight,labelWidth:t.inputWidth})})),yn=(0,te.a)((function(){var e=(0,te.t)(),t=e.transformTool,n=e.custom,i=t.locale.controls,r=t.forceDimensions,o=t.lockResolution,a=n.getCheckbox();return a?ie.createElement(a,{tool:"transform",isDisabled:r,value:o,label:i.checkboxKeepResolution,checkMarkPosition:"right",onClick:t.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}}):null})),vn=(0,te.a)((function(){var e=(0,te.t)(),t=e.transformTool,n=e.custom,i=t.locale.controls,r=n.getButton("toolControlBarSecondaryButton");return r?ie.createElement(r,{tool:"transform",ariaLabel:i.buttonReset,onClick:function(){t.reset()},label:i.buttonReset}):null})),_n=(0,te.a)((function(){var e=(0,te.t)(),t=e.transformTool,n=e.custom,i=e.editor,r=t.categories,o=t.items,a=t.identifier,s=t.config,l=t.locale,u=n.getAdvancedItemCard(),c=n.getAdvancedCategoryCard(),h=function(e,n){var r=i.configStore,o=r.theme,s=r.measurements,c=l.items[e.identifier]||e.name,h=e.thumbnailURI||"",d="80%";if(!t.checkIfTransformThumbnailExits(e.thumbnailURI)){var f=e.identifier.includes("imgly_transform_common"),p=te.y.crops[e.identifier]||te.y.crops.imgly_transform_common_custom,g=ie.createElement(p,{width:s.advancedUICard.medium.width-(f?42:0),height:s.advancedUICard.medium.height-(f?42:0),main:o.transform.crops.main,highlight:o.transform.crops.highlight,shadow:o.transform.crops.shadow});h="'data:image/svg+xml,".concat(encodeURIComponent((0,ae.renderToStaticMarkup)(g)),"'"),d=(0,ne.t)()||(0,ne.s)()?"auto":"unset"}return u?ie.createElement(u,{key:e.identifier,tool:"transform",type:"medium",onClick:image:h,label:c,style:{backgroundSize:d,animationDelay:"".concat((0,ne.Wa)(n),"s")},isActive:e.identifier===a},ie.createElement(te.m,null,c)):null};return s.flattenCategories?ie.createElement(ie.Fragment,null,o.map(h)):"card"===s.categoryHeaderType?ie.createElement(ie.Fragment,null,r.map((function(e,n){var r=i.configStore,o=r.theme,a=r.measurements,s=t.selectedCategoryIdentifier===e.identifier,u=l.categories[e.identifier]||e.name,d=e.thumbnailURI||"";if(!e.items||!c)return null;if(!t.checkIfTransformThumbnailExits(e.thumbnailURI)){var f=te.y.categories[e.identifier]||te.y.crops.imgly_transform_common_custom,p=ie.createElement(f,{width:a.advancedUICard.large.width-42,height:a.advancedUICard.large.height-42,main:o.transform.crops.main,highlight:o.transform.crops.highlight,shadow:o.transform.crops.shadow});d="'data:image/svg+xml,".concat(encodeURIComponent((0,ae.renderToStaticMarkup)(p)),"'")}return ie.createElement("div",{key:e.identifier},ie.createElement(c,{type:"large",onClick:key:e.identifier,image:d,style:{animationDelay:"".concat((0,ne.Wa)(n),"s")},label:e.name,tool:"transform"},ie.createElement(te.m,{caret:!0,isActive:s},u)),ie.createElement(qe.Sidebar.ExpandableContainer,{show:s},e.items.map(h)))}))):"text"===s.categoryHeaderType?ie.createElement(ie.Fragment,null,r.map((function(e,t){var n=l.categories[e.identifier]||e.name;return e.items?ie.createElement(qe.Sidebar.TextCategory,{key:e.identifier,name:n,isFirstCategory:0===t,isLastCategory:t===r.length-1},e.items.map(h)):null}))):null})),bn=function(){return ie.createElement(qe.Itemsbar,null,ie.createElement(qe.CardContainer,null,ie.createElement(_n,null)))},xn=(0,te.a)((function(){var e=(0,te.t)().transformTool.config.advancedUIToolControlBarOrder;return ie.createElement(qe.ToolControlBarItems,null,e.map((function(e){return function(e){switch(e){case"items":return ie.createElement(bn,{key:e});case"separator":return ie.createElement(qe.ItemsSeparator,{full:!0,key:(0,ne.Na)()});case"resetTransformButton":return ie.createElement(vn,{key:e});case"keepResolutionCheckbox":return ie.createElement(yn,{key:e});case"cropSizeInput":return ie.createElement(mn,{key:e});default:return null}}(e)})))})),kn=(0,te.a)((function(e){var t=e.displayTitle,n=(0,te.t)().transformTool;return ie.createElement(ie.Fragment,null,t&&ie.createElement(qe.Sidebar.Heading,null,n.locale.title),ie.createElement(xn,null))})),wn=(0,te.a)((function(){var e=(0,te.t)(),t=e.active,n=e.config,i=e.custom,r=t.tool,o=n.config.displayToolControlBarTitle,a=i.getAdvancedToolControlBar();return a?ie.createElement(a,{reverse:"reverse"===n.config.order,tool:r},ie.createElement(te.q.Switch.Index,{type:r},ie.createElement(te.q.Switch.Case,{value:"library"},ie.createElement(Pt,{displayTitle:o})),ie.createElement(te.q.Switch.Case,{value:"filter"},ie.createElement(pt,{displayTitle:o})),ie.createElement(te.q.Switch.Case,{value:"focus"},ie.createElement(bt,{displayTitle:o})),ie.createElement(te.q.Switch.Case,{value:"adjustment"},ie.createElement(tt,{displayTitle:o})),ie.createElement(te.q.Switch.Case,{value:"overlay"},ie.createElement(Nt,{displayTitle:o})),ie.createElement(te.q.Switch.Case,{value:"sticker"},ie.createElement(Xt,{displayTitle:o})),ie.createElement(te.q.Switch.Case,{value:"text"},ie.createElement(ln,{displayTitle:o})),ie.createElement(te.q.Switch.Case,{value:"textdesign"},ie.createElement(gn,{displayTitle:o})),ie.createElement(te.q.Switch.Case,{value:"frame"},ie.createElement(Et,{displayTitle:o})),ie.createElement(te.q.Switch.Case,{value:"brush"},ie.createElement(st,{displayTitle:o})),ie.createElement(te.q.Switch.Case,{value:"transform"},ie.createElement(kn,{displayTitle:o})),ie.createElement(te.q.Switch.Case,{value:"customTool"},ie.createElement(lt,{displayTitle:o})))):null})),Sn=re.ZP.div(j||(j=(0,ee.Z)(["\n  position: absolute;\n  height: 100%;\n  width: ","px;\n  top: 0;\n  background: ",";\n  z-index: ",";\n"])),(function(e){return e.theme.measurements.advancedUIToolbar.width+e.theme.measurements.advancedUIToolControlBar.width}),(function(e){return e.theme.webcam.backdrop}),(function(e){return e.theme.measurements.zIndex.disable})),Cn=function(e){(0,X.Z)(n,e);var t=(0,K.Z)(n);function n(){return(0,q.Z)(this,n),t.apply(this,arguments)}return(0,Y.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.active,i=e.canvas,r=e.custom.getWindowContainer();return t.isOrderDefault?ie.createElement(te.q.Container,null,n.isWebcam?ie.createElement(Sn,{style:{left:0}}):null,ie.createElement(te.M,null),ie.createElement(Ke,null),ie.createElement(wn,null),ie.createElement(te.A,null,ie.createElement(te.G,null),r&&ie.createElement(r,{tool:n.tool},ie.createElement(te.P,null,n.isWebcam?ie.createElement(te.O,null):null,n.image&&i&&ie.createElement(te.J,null))))):ie.createElement(te.q.Container,null,n.isWebcam?ie.createElement(Sn,{style:{right:0}}):null,ie.createElement(te.M,null),ie.createElement(te.A,null,ie.createElement(te.G,null),r&&ie.createElement(r,{tool:n.tool},ie.createElement(te.P,null,n.isWebcam?ie.createElement(te.O,null):null,n.image&&i&&ie.createElement(te.J,null)))),ie.createElement(wn,null),ie.createElement(Ke,null))}}],[{key:"getDerivedStateFromError",value:]),n}(ie.Component);Cn=(0,ne.c)([(0,te.c)("config","active","canvas","custom"),te.a],Cn);var Tn=function(e){(0,X.Z)(n,e);var t=(0,K.Z)(n);function n(e){var i;return(0,q.Z)(this,n),(i=t.call(this,e)).ref=null,i.updatePosition=function(){var e=i.props.isReverse,t={x:0,y:0};if(i.ref.current){var n=i.ref.current.getBoundingClientRect(),r=n.top,o=n.height,a=n.left,s=n.right;t.y=r+o/4,t.x=e?window.innerWidth-s:a}i.setState({tooltipPosition:t})},i.mouseOver=i.mouseOut=function(){i.setState({hoverTool:null})},i.state={hoverTool:null,tooltipPosition:{x:0,y:0}},i.ref=ie.createRef(),i}return(0,Y.Z)(n,[{key:"componentDidMount",value:function(){this.updatePosition()}},{key:"componentDidUpdate",value:,{key:"render",value:function(){var e=this,t=this.props,n=t.tool,i=t.isActive,r=t.isReverse,o=t.isDisabled,a=t.icon,s=t.label,l=t.onClick,u=t.className,c=t.children,h=this.state,d=h.hoverTool,f=h.tooltipPosition;return ie.createElement(Dn,{ref:this.ref,onMouseOver:function(){return e.mouseOver(n)},onMouseOut:function(){return e.mouseOut()},onFocus:onBlur:function(){return e.mouseOut()},className:u},ie.createElement(qe.Toolbar.Item,{ariaLabel:s,isActive:i,isDisabled:o,onClick:function(){return l(n)}},a,c),ie.createElement(qe.Toolbar.Tooltip,{position:f,reverse:r,show:d===n},s))}}]),n}(ie.Component),En=Tn,Dn=re.ZP.div(W||(W=(0,ee.Z)(["\n  position: relative;\n"]))),In=function(e){(0,X.Z)(n,e);var t=(0,K.Z)(n);function n(){var e;return(0,q.Z)(this,n),(e=t.apply(this,arguments)).componentWillUnmount=function(){e.editor.cleanUpCanvasMemory()},e}return(0,Y.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.editor,n=e.storeProps;this.editor=t,this.storeProps=n;var i=new te.L(this.editor.configStore.config.custom.components,{advancedUICategoryCard:qe.Card,advancedUIItemCard:qe.Card,advancedUIToolbarItem:En,advancedUIToolbar:qe.Toolbar.Index,advancedUIToolControlBar:qe.Sidebar.Index}),r={getAdvancedCategoryCard:i.getAdvancedCategoryCard,getAdvancedItemCard:i.getAdvancedItemCard,getAdvancedToolbarItem:i.getAdvancedToolbarItem,getAdvancedToolbar:i.getAdvancedToolbar,getAdvancedToolControlBar:i.getAdvancedToolControlBar,getDialog:i.getDialog,getButton:i.getButton,getColorItem:i.getColorItem,getCheckbox:i.getCheckbox,getWindowContainer:i.getWindowContainer,getSlider:i.getSlider};this.storeProps.custom=r,this.forceUpdate()}},{key:"render",value:function(){return this.storeProps?ie.createElement(te.b,(0,Q.Z)({},this.storeProps),ie.createElement(re.f6,{theme:(0,Q.Z)((0,Q.Z)({},this.editor.configStore.theme),{},{measurements:this.editor.configStore.measurements})},ie.createElement(Cn,null))):null}}]),n}(ie.Component),Rn=ie.lazy((),On=function(e){var t=e.editor,n=(0,ie.useMemo)((function(){return function(e){return{filterTool:e.filterToolStore,focusTool:e.focusToolStore,adjustmentsTool:e.adjustmentsToolStore,overlayTool:e.overlayToolStore,frameTool:e.frameToolStore,brushTool:e.brushToolStore,transformTool:e.transformToolStore,scale:e.scale,sprite:e.spriteStore,stickerTool:e.spriteStore.stickerToolStore,textTool:e.spriteStore.textToolStore,textDesignTool:e.spriteStore.textDesignToolStore,library:e.libraryStore,modal:e.modalStore,snapping:e.snappingStore,config:e.configStore,active:e.activeStore,canvas:e.canvasStore,history:e.historyStore,editor:e}}(t)}),[t]);return"basic"===t.configStore.config.layout?ie.createElement(ie.Suspense,{fallback:ie.createElement("div",null)},ie.createElement(Rn,{editor:t,storeProps:n})):ie.createElement(In,{editor:t,storeProps:n})},Fn=function(e){(0,X.Z)(n,e);var t=(0,K.Z)(n);function n(e,i,r){var o,a;(0,q.Z)(this,n),(a=t.call(this)).dispose=function(){a.container&&(oe.unmountComponentAtNode(a.container),a.removeAllListeners("export"),a.removeAllListeners("historyUndo"),a.removeAllListeners("historyRedo"),a.removeAllListeners("historyChange"),a.removeAllListeners("editorReady"),a.removeAllListeners("errorImageLoading"),a.removeAllListeners("imageLoad"),a.removeAllListeners("toolEnter"),a.removeAllListeners("stickerUploadAdd"),a.removeAllListeners("errorWebGLContextLost"),a.removeAllListeners("cropDimensionsChange"),a.editor&&a.editor.dispose())},a.serialize=function(e){return a.editor.serialize(e)},a.deserialize=function(e){return a.editor.deserialize(e)},a.export=function(e){return a.editor.export(e)},a.close=function(){return a.editor.close()},a.setImage=a.getImageDimensions=function(){return a.editor.getImageDimensions()},a.getImageMimeType=function(){return a.editor.getImageMimeType()},a.reset=function(){a.editor.resetToolStates(),a.editor.resize()},a.container=i;var s=(o={},(0,J.Z)(o,"export",(function(e){a.emit("export",e)})),(0,J.Z)(o,"close",(),(0,J.Z)(o,"historyUndo",(function(){a.emit("historyUndo")})),(0,J.Z)(o,"historyRedo",(function(){a.emit("historyRedo")})),(0,J.Z)(o,"historyChange",(function(){a.emit("historyChange")})),(0,J.Z)(o,"stickerUploadAdd",(function(e){a.emit("stickerUploadAdd",e)})),(0,J.Z)(o,"cropDimensionsChange",(function(e){a.emit("cropDimensionsChange",e)})),o);return r&&Object.entries(r).forEach((function(e){var t=(0,V.Z)(e,2),n=t[0],i=t[1];s[n]=i((0,G.Z)(a))})),a.editor=new te.F((0,Q.Z)({},e),s),a}return(0,Y.Z)(n,[{key:"hasChanges",value:function(){return this.editor.hasChanges()}}]),n}(ne.Ka),An=function(){eturn(0,Y.Z)(e,[{key:"init",value:function(e){var t=this;return new Promise((function(n,i){var r;"undefined"!==typeof window?(t.container="string"===typeof e.container?document.querySelector(e.container):e.container,t.container?(t.editorApi=new Fn(e,t.container,(r={},(0,J.Z)(r,"editorReady",(function(e){return function(){setTimeout((function(){e.emit("editorReady")}),0),n(e)}})),(0,J.Z)(r,"errorImageLoading",(function(e){return function(t){setTimeout((function(){e.emit("errorImageLoading",t)}),0),n(e)}})),(0,J.Z)(r,"errorWebGLContextLost",(function(e){return function(t){setTimeout((function(){e.emit("errorWebGLContextLost",t)}),0),n(e)}})),(0,J.Z)(r,"imageLoad",(function(e){return function(){setTimeout((,0),n(e)}})),(0,J.Z)(r,"toolEnter",(function(e){return function(t){setTimeout((,0),n(e)}})),r)),oe.render(ie.createElement(Pn,{editor:t.editorApi.editor}),t.container)):i(new Error("Provide a container"))):n()}))}}]),e}(),Pn=function(e){var t=e.editor;return(0,ie.useEffect)((function(){return function(){var e;(null==(e=null==t?void 0:t.configStore)?void 0:e.events)&&(t.configStore.events.removeAllListeners("export"),t.configStore.events.removeAllListeners("close"),t.configStore.events.removeAllListeners("historyUndo"),t.configStore.events.removeAllListeners("historyRedo"),t.configStore.events.removeAllListeners("historyChange"),t.configStore.events.removeAllListeners("editorReady"),t.configStore.events.removeAllListeners("errorImageLoading"),t.configStore.events.removeAllListeners("imageLoad"),t.configStore.events.removeAllListeners("toolEnter"),t.configStore.events.removeAllListeners("stickerUploadAdd"),t.configStore.events.removeAllListeners("errorWebGLContextLost"),t.configStore.events.removeAllListeners("cropDimensionsChange"))}}),[]),ie.createElement(On,{editor:t})},Zn={init:;ie.Component;(0,ne.n)({isolateGlobalState:!0});te.q.Container;var Mn=te.q.Input,zn=(te.q.ColorItem,te.q.ColorItemBase,te.q.ColorItemBackground,te.q.ColorItemTiledBackground,te.q.ColorItemActiveOverlay,te.q.Dialog,te.q.DialogBase,te.q.DialogContainer,te.q.DialogBackdrop,te.q.DialogHeader,te.q.DialogBody,te.q.DialogFooter,te.q.DialogSpinner,Mn.Search,Mn.Label,Mn.Checkbox,Mn.CheckboxBase,Mn.CheckboxInput,Mn.CheckboxCheckMark,Mn.Dropdown,Mn.Slider,Mn.SliderBase,Mn.SliderContainer,Mn.SliderInput,Mn.SliderTrack,Mn.SliderLabel,qe.Toolbar.Index,qe.Sidebar.Index,te.S.Toolbar.Index,te.S.Controlsbar,te.S.Itemsbar,(0,ne.a)((function(e,t){.exports=i;var r,o=[],a=0;ar l="undefined"!==typeof n.g?n.g:self,u=l.MutationObserver||l.WebKitMutationObserver;="function"===typeof u?s):c(s),i.requestFlush=r,i.makeRequestCallFromTimer=c}))),Bn=(0,ne.a)((function(e,t){var n=zn();function i(){}var r=null,o={};ts=a,a._Y=null,a._Z=null,a._0=i,a.prototype.then=)),Ln=(0,ne.a)((function(e){var t=Bn(),n=[ReferenceError,TypeError,RangeError],i=!1;disable=r,e.enable=)),Un=(0,ne.a)((function(e,t){var n=Bn();t.exports=n;var i=u(!0),r=u(!1),o=u(null),a=u(void 0),s=u(0),l=u("");.resolve=var c=n.all=n.reject=n.race=n.prototype.catch=)),Nn=(0,ne.a)((function(e,t){!function(i,r){"object"===typeof e&&"undefined"!==typeof t?r(e):"function"===typeof define&&n.amdO?define(["exports"],r):r(i.WHATWGFetch={})}(e,(function(e){var t="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof t&&t,n="URLSearchParams"in t,i="Symbol"in t&&"iterator"in Symbol,r="FileReader"in t&&"Blob"in t&&),o="FormData"in t,a="ArrayBuffer"in t;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView|| y(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:r&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&r&&e)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=this.arrayBuffer=,this.text=o&&(this.formData=,this.json=this}d.prototype.append=d.prototype.delete=d.prototype.get=d.prototype.has=d.prototype.set=d.prototype.forEach=d.prototype.keys=d.prototype.values=d.prototype.entries=i&&(d.prototype[Symbol.iterator]=d.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];ototype.clone=y.call(_.prototype),y.call(k.prototype),k.prototype.clone=k.error=var w=[301,302,303,307,308];k.redirect=e.DOMException=t.DOMException;try{new e.DOMException}catch(C){e.DOMException=e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function S(n,i){return new Promise((function(o,s){var l=new _(n,i);if(l.signal&&l.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;.onload=u.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.ontimeout=u.onabort=u.open(l.method,l.url),!0),"include"===l.credentials?u.withCredentials=!0:"omit"===l.credentials&&(u.withCredentials=!1),"responseType"in u&&(r?u.responseType="blob":a&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!i||"object"!==typeof i.headers||i.headers instanceof d?l.headers.forEach(():Object.getOwnPropertyNames(i.headers).forEach((),l.signal&&(l.signal.addEventListener("abort",h),u.onreadystatechange=,u.send("undefined"===typeof l._bodyInit?null:l._bodyInit)}))}S.polyfill=!0,t.fetch||(t.fetch=S,t.Headers=d,t.Request=_,t.Response=k),e.Headers=d,e.Request=_,e.Response=k,e.fetch=S,Object.defineProperty(e,"__esModule",{value:!0})}))})),Hn=(0,ne.a)((function(e,t){var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;.exports=)?Object.assign:)),jn=(0,ne.a)((),Wn=(0,ne.a)((),Vn=(0,ne.a)((),Gn=(0,ne.a)((function(e){var t={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!t.call({1:2},1);e.f=i?t})),qn=(0,ne.a)((),Yn=(0,ne.a)((),Xn=(0,ne.a)((function(e,t){var n=Wn(),i=Yn(),r="".split;t.exports=n(()?Object})),Kn=(0,ne.a)((),Jn=(0,ne.a)((),Qn=(0,ne.a)((),$n=(0,ne.a)((function(e,t){var n=Qn();t.exports=)),ei=(0,ne.a)((),ti=(0,ne.a)((),ni=(0,ne.a)((),ii=(0,ne.a)((function(e){var t=Vn(),n=Gn(),i=qn(),r=Jn(),o=$n(),a=ei(),s=ni(),l=Object.getOwnPropertyDescriptor;e.f=t?l:)),ri=(0,ne.a)((function(e,t){var n=Qn();t.exports=)),oi=(0,ne.a)((function(e){var t=Vn(),n=ni(),i=ri(),r=$n(),o=Object.defineProperty;e.f=t?o:)),ai=(0,ne.a)((),si=(0,ne.a)((function(e,t){var n=jn(),i=ai();t.exports=)),li=(0,ne.a)((),ui=(0,ne.a)((function(e,t){var n=li(),i=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=,t.exports=n.inspectSource})),ci=(0,ne.a)((function(e,t){var n=jn(),i=ui(),r=n.WeakMap;t.exports="function"===typeof r&&/native code/.test(i(r))})),hi=(0,ne.a)((),di=(0,ne.a)((function(e,t){var n=hi(),i=li();(t.exports=("versions",[]).push({version:"3.6.5",mode:n?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})})),fi=(0,ne.a)((),pi=(0,ne.a)((),gi=(0,ne.a)((),mi=(0,ne.a)((function(e,t){var n,i,r,o,a,s,l,u,c=ci(),h=jn(),d=Qn(),f=ai(),p=ei(),g=pi(),m=gi(),y=h.WeakMap;c?(o=new y,a=o.get,s=o.has,l=o.set,n=i=r=:(m[u=g("state")]=!0,n=i=r=,t.exports={set:n,get:i,has:r,enforce:getterFor:})),yi=(0,ne.a)((function(e,t){var n=jn(),i=ai(),r=ei(),o=si(),a=ui(),s=mi(),l=s.get,u=s.enforce,c=String(String).split("String");(t.exports=(Function.prototype,"toString",()})),vi=(0,ne.a)((),_i=(0,ne.a)((function(e,t){var n=vi(),i=jn(),r=t.exports=)),bi=(0,ne.a)((),xi=(0,ne.a)((),ki=(0,ne.a)((),wi=(0,ne.a)((function(e,t){var n=Jn(),i=xi(),r=ki(),o=t.exports={includes:o(!0),indexOf:o(!1)}})),Si=(0,ne.a)((function(e,t){var n=ei(),i=Jn(),r=wi().indexOf,o=gi();t.exports=)),Ci=(0,ne.a)((),Ti=(0,ne.a)((function(e){var t=Si(),n=Ci().concat("length","prototype");e.f=Object.getOwnPropertyNames||function(e){return t(e,n)}})),Ei=(0,ne.a)((),Di=(0,ne.a)((function(e,t){var n=_i(),i=Ti(),r=Ei(),o=ri();t.exports=n("Reflect","ownKeys")||)),Ii=(0,ne.a)((function(e,t){var n=ei(),i=Di(),r=ii(),o=oi();t.exports=)),Ri=(0,ne.a)((function(e,t){var n=Wn(),i=/#|\.prototype\./,r=o=r.normalize=a=r.data={},s=r.NATIVE="N",l=r.POLYFILL="P";t.exports=r})),Oi=(0,ne.a)((function(e,t){var n=jn(),i=ii().f,r=ai(),o=yi(),a=si(),s=Ii(),l=Ri();t.exports=)),Fi=(0,ne.a)((function(e,t){var n=Yn();t.exports=Array.isArray||)),Ai=(0,ne.a)((function(e,t){var n=Kn();t.exports=function(e){return Object(n(e))}})),Pi=(0,ne.a)((function(e,t){var n=$n(),i=oi(),r=qn();t.exports=)),Zi=(0,ne.a)((function(e,t){var n=Wn();t.exports=!!Object.getOwnPropertySymbols&&!n(()})),Mi=(0,ne.a)((function(e,t){var n=Zi();t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator})),zi=(0,ne.a)((function(e,t){var n=jn(),i=di(),r=ei(),o=fi(),a=Zi(),s=Mi(),l=i("wks"),u=n.Symbol,c=s?u:u&&u.withoutSetter||o;t.exports=)),Bi=(0,ne.a)((function(e,t){var n=Qn(),i=Fi(),r=zi()("species");t.exports=)),Li=(0,ne.a)((),Ui=(0,ne.a)((function(e,t){var n,i,r=jn(),o=Li(),a=r.process,s=a&&a.versions,l=s&&s.v8;l?i=(n=l.split("."))[0]+n[1]:o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(i=n[1]),t.exports=i&&+i})),Ni=(0,ne.a)((function(e,t){var n=Wn(),i=zi(),r=Ui(),o=i("species");t.exports=)),Hi=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Fi(),i=Qn(),r=Ai(),o=xi(),a=Pi(),s=Bi(),l=Ni(),u=zi(),c=Ui(),h=u("isConcatSpreadable"),d=9007199254740991,f="Maximum allowed index exceeded",p=c>=51||!t((),g=l("concat"),m=e({target:"Array",proto:!0,forced:!p||!g},{concat:)})),ji=(0,ne.a)((function(e,t){var n={};n[zi()("toStringTag")]="z",t.exports="[object z]"===String(n)})),Wi=(0,ne.a)((function(e,t){var n=ji(),i=Yn(),r=zi()("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=n?i:)),Vi=(0,ne.a)((function(e,t){var n=ji(),i=Wi();t.exports=n?{}.toString:)),Gi=(0,ne.a)((),qi=(0,ne.a)((),Yi=(0,ne.a)((function(e,t){var n=Vn(),i=oi(),r=ri(),o=qi();t.exports=n?Object.defineProperties:)),Xi=(0,ne.a)((),Ki=(0,ne.a)((function(e,t){var n,i=ri(),r=Yi(),o=Ci(),a=gi(),s=Xi(),l=ti(),u=pi(),c="prototype",h="script",d=u("IE_PROTO"),f=function(){},p=g=a[d]=!0,t.exports=Object.create||)),Ji=(0,ne.a)((function(e,t){var n=Jn(),i=Ti().f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=)),Qi=(0,ne.a)((function(e){var t=zi();e.f=t})),$i=(0,ne.a)((function(e,t){var n=vi(),i=ei(),r=Qi(),o=oi().f;t.exports=)),er=(0,ne.a)((function(e,t){var n=oi().f,i=ei(),r=zi()("toStringTag");t.exports=)),tr=(0,ne.a)((),nr=(0,ne.a)((function(e,t){var n=tr();t.exports=)),ir=(0,ne.a)((function(e,t){var n=nr(),i=Xn(),r=Ai(),o=xi(),a=Bi(),s=[].push,l=t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}})),rr=(0,ne.a)((function(){var e=Oi(),t=jn(),n=_i(),i=hi(),r=Vn(),o=Zi(),a=Mi(),s=Wn(),l=ei(),u=Fi(),c=Qn(),h=ri(),d=Ai(),f=Jn(),p=$n(),g=qn(),m=Ki(),y=qi(),v=Ti(),_=Ji(),b=Ei(),x=ii(),k=oi(),w=Gn(),S=ai(),C=yi(),T=di(),E=pi(),D=gi(),I=fi(),R=zi(),O=Qi(),F=$i(),A=er(),P=mi(),Z=ir().forEach,M=E("hidden"),z="Symbol",B="prototype",L=R("toPrimitive"),U=P.set,N=P.getterFor(z),H=Object[B],j=t.Symbol,W=n("JSON","stringify"),V=x.f,G=k.f,q=_.f,Y=w.f,X=T("symbols"),K=T("op-symbols"),J=T("string-to-symbol-registry"),Q=T("symbol-to-string-registry"),$=T("wks"),ee=t.QObject,te=!ee||!ee[B]||!ee[B].findChild,ne=r&&s(()?G,ie=re=a?oe=ae=se=le=ue=ce=o||(j=C(j[B],"toString",(function(){return N(this).tag})),C(j,"withoutSetter",(function(e){return ie(I(e),e)})),w.f=se,k.f=oe,x.f=le,v.f=_.f=ue,b.f=ce,O.f=r&&(G(j[B],"description",{configurable:!0,get:function(){return N(this).description}}),i||C(H,"propertyIsEnumerable",se,{unsafe:!0}))),e({global:!0,wrap:!0,forced:!o,sham:!o},{Symbol:j}),Z(y($),(function(e){F(e)})),e({target:z,stat:!0,forced:!o},{for:keyFor:useSetter:function(){te=!0},useSimple:function(){te=!1}}),e({target:"Object",stat:!0,forced:!o,sham:!r},{create:defineProperty:oe,defineProperties:ae,getOwnPropertyDescriptor:le}),e({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:ue,getOwnPropertySymbols:ce}),e({target:"Object",stat:!0,forced:s((function(){b.f(1)}))},{getOwnPropertySymbols:),W&&e({target:"JSON",stat:!0,forced:!o||s(()},{stringify:),j[B][L]||S(j[B],L,j[B].valueOf),A(j,z),D[M]=!0})),or=(0,ne.a)((function(){$i()("asyncIterator")})),ar=(0,ne.a)((function(){var e,t,n,i,r,o,a=Oi(),s=Vn(),l=jn(),u=ei(),c=Qn(),h=oi().f,d=Ii(),f=l.Symbol;!s||"function"!=typeof f||"description"in f.prototype&&void 0===f().description||(e={},t=d(t,f),(n=t.prototype=f.prototype).constructor=t,i=n.toString,r="Symbol(test)"==String(f("test")),o=/^Symbol\((.*)\)[^)]+$/,h(n,"description",{configurable:!0,get:),a({global:!0,forced:!0},{Symbol:t}))})),sr=(0,ne.a)((function(){$i()("hasInstance")})),lr=(0,ne.a)((function(){$i()("isConcatSpreadable")})),ur=(0,ne.a)((function(){$i()("iterator")})),cr=(0,ne.a)((function(){$i()("match")})),hr=(0,ne.a)((function(){$i()("matchAll")})),dr=(0,ne.a)((function(){$i()("replace")})),fr=(0,ne.a)((function(){$i()("search")})),pr=(0,ne.a)((function(){$i()("species")})),gr=(0,ne.a)((function(){$i()("split")})),mr=(0,ne.a)((function(){$i()("toPrimitive")})),yr=(0,ne.a)((function(){$i()("toStringTag")})),vr=(0,ne.a)((function(){$i()("unscopables")})),_r=(0,ne.a)((function(){er()(Math,"Math",!0)})),br=(0,ne.a)((function(){var e=jn();er()(e.JSON,"JSON",!0)})),xr=(0,ne.a)((function(e,t){Hi(),Gi(),rr(),or(),ar(),sr(),lr(),ur(),cr(),hr(),dr(),fr(),pr(),gr(),mr(),yr(),vr(),_r(),br();var n=vi();t.exports=n.Symbol})),kr=(0,ne.a)((function(){$i()("asyncDispose")})),wr=(0,ne.a)((function(){$i()("dispose")})),Sr=(0,ne.a)((function(){$i()("observable")})),Cr=(0,ne.a)((function(){$i()("patternMatch")})),Tr=(0,ne.a)((function(){$i()("replaceAll")})),Er=(0,ne.a)((function(e,t){var n=xr();kr(),wr(),Sr(),Cr(),Tr(),t.exports=n})),Dr=(0,ne.a)((function(e,t){var n=bi(),i=Kn(),r=t.exports={codeAt:r(!1),charAt:r(!0)}})),Ir=(0,ne.a)((),Rr=(0,ne.a)((function(e,t){var n=ei(),i=Ai(),r=pi(),o=Ir(),a=r("IE_PROTO"),s=Object.prototype;t.exports=o?Object.getPrototypeOf:)),Or=(0,ne.a)((function(e,t){var n,i,r,o=Rr(),a=ai(),s=ei(),l=zi(),u=hi(),c=l("iterator"),h=!1;[].keys&&("next"in(r=[].keys())?(i=o(o(r)))!==Object.prototype&&(n=i):h=!0),void 0==n&&(n={}),u||s(n,c)||a(n,c,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:h}})),Fr=(0,ne.a)((function(e,t){t.exports={}})),Ar=(0,ne.a)((function(e,t){var n=Or().IteratorPrototype,i=Ki(),r=qn(),o=er(),a=Fr(),s=function(){return this};t.exports=)),Pr=(0,ne.a)((function(e,t){var n=Qn();t.exports=)),Zr=(0,ne.a)((function(e,t){var n=ri(),i=Pr();t.exports=Object.setPrototypeOf||("__proto__"in{}?):void 0)})),Mr=(0,ne.a)((function(e,t){var n=Oi(),i=Ar(),r=Rr(),o=Zr(),a=er(),s=ai(),l=yi(),u=zi(),c=hi(),h=Fr(),d=Or(),f=d.IteratorPrototype,p=d.BUGGY_SAFARI_ITERATORS,g=u("iterator"),m="keys",y="values",v="entries",_=function(){return this};t.exports=)),zr=(0,ne.a)((function(){var e=Dr().charAt,t=mi(),n=Mr(),i="String Iterator",r=t.set,o=t.getterFor(i);n(String,"String",(,()})),Br=(0,ne.a)((function(e,t){var n=ri();t.exports=)),Lr=(0,ne.a)((function(e,t){var n=zi(),i=Fr(),r=n("iterator"),o=Array.prototype;t.exports=)),Ur=(0,ne.a)((function(e,t){var n=Wi(),i=Fr(),r=zi()("iterator");t.exports=)),Nr=(0,ne.a)((function(e,t){var n=nr(),i=Ai(),r=Br(),o=Lr(),a=xi(),s=Pi(),l=Ur();t.exports=)),Hr=(0,ne.a)((function(e,t){var n,i,r=zi()("iterator"),o=!1;try{n=0,(i={next:return:function(){o=!0}})[r]=function(){return this},Array.from(i,(function(){throw 2}))}catch(a){}t.exports=)),jr=(0,ne.a)((function(){var e=Oi(),t=Nr();e({target:"Array",stat:!0,forced:!Hr()((function(e){Array.from(e)}))},{from:t})})),Wr=(0,ne.a)((function(e,t){zr(),jr();var n=vi();t.exports=n.Array.from})),Vr=(0,ne.a)((function(e,t){var n=Wr();t.exports=n})),Gr=(0,ne.a)((function(e,t){var n=Vn(),i=Wn(),r=qi(),o=Ei(),a=Gn(),s=Ai(),l=Xn(),u=Object.assign,c=Object.defineProperty;t.exports=!u||i(()?u})),qr=(0,ne.a)((function(){var e=Oi(),t=Gr();e({target:"Object",stat:!0,forced:Object.assign!==t},{assign:t})})),Yr=(0,ne.a)((function(){Oi()({target:"Object",stat:!0,sham:!Vn()},{create:Ki()})})),Xr=(0,ne.a)((function(){var e=Oi(),t=Vn();e({target:"Object",stat:!0,forced:!t,sham:!t},{defineProperty:oi().f})})),Kr=(0,ne.a)((function(){var e=Oi(),t=Vn();e({target:"Object",stat:!0,forced:!t,sham:!t},{defineProperties:Yi()})})),Jr=(0,ne.a)((function(e,t){var n=Vn(),i=qi(),r=Jn(),o=Gn().f,a=t.exports={entries:a(!0),values:a(!1)}})),Qr=(0,ne.a)((function(){var e=Oi(),t=Jr().entries;e({target:"Object",stat:!0},{entries:function(e){return t(e)}})})),$r=(0,ne.a)((),eo=(0,ne.a)((function(e,t){var n=gi(),i=Qn(),r=ei(),o=oi().f,a=fi(),s=$r(),l=a("meta"),u=0,c=Object.isExtensible||function(){return!0},h=d=t.exports={REQUIRED:!1,fastKey:getWeakData:onFreeze:;n[l]=!0})),to=(0,ne.a)((function(){var e=Oi(),t=$r(),n=Wn(),i=Qn(),r=eo().onFreeze,o=Object.freeze;e({target:"Object",stat:!0,forced:n((function(){o(1)})),sham:!t},{freeze:function(e){return o&&i(e)?o(r(e)):e}})})),no=(0,ne.a)((function(e,t){var n=ri(),i=Lr(),r=xi(),o=nr(),a=Ur(),s=Br(),l=function(e,t){this.stopped=e,this.result=t},u=t.exports=u.stop=)),io=(0,ne.a)((function(){var e=Oi(),t=no(),n=Pi();e({target:"Object",stat:!0},{fromEntries:)})),ro=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Jn(),i=ii().f,r=Vn(),o=t((function(){i(1)}));e({target:"Object",stat:!0,forced:!r||o,sham:!r},{getOwnPropertyDescriptor:)})),oo=(0,ne.a)((function(){var e=Oi(),t=Vn(),n=Di(),i=Jn(),r=ii(),o=Pi();e({target:"Object",stat:!0,sham:!t},{getOwnPropertyDescriptors:)})),ao=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Ji().f;e({target:"Object",stat:!0,forced:t(()},{getOwnPropertyNames:n})})),so=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Ai(),i=Rr(),r=Ir();e({target:"Object",stat:!0,forced:t((function(){i(1)})),sham:!r},{getPrototypeOf:function(e){return i(n(e))}})})),lo=(0,ne.a)((),uo=(0,ne.a)((function(){Oi()({target:"Object",stat:!0},{is:lo()})})),co=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Qn(),i=Object.isExtensible;e({target:"Object",stat:!0,forced:t((function(){i(1)}))},{isExtensible:)})),ho=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Qn(),i=Object.isFrozen;e({target:"Object",stat:!0,forced:t((function(){i(1)}))},{isFrozen:function(e){return!n(e)||!!i&&i(e)}})})),fo=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Qn(),i=Object.isSealed;e({target:"Object",stat:!0,forced:t((function(){i(1)}))},{isSealed:)})),po=(0,ne.a)((function(){var e=Oi(),t=Ai(),n=qi();e({target:"Object",stat:!0,forced:Wn()((function(){n(1)}))},{keys:function(e){return n(t(e))}})})),go=(0,ne.a)((function(){var e=Oi(),t=Qn(),n=eo().onFreeze,i=$r(),r=Wn(),o=Object.preventExtensions;e({target:"Object",stat:!0,forced:r((function(){o(1)})),sham:!i},{preventExtensions:function(e){return o&&t(e)?o(n(e)):e}})})),mo=(0,ne.a)((function(){var e=Oi(),t=Qn(),n=eo().onFreeze,i=$r(),r=Wn(),o=Object.seal;e({target:"Object",stat:!0,forced:r((function(){o(1)})),sham:!i},{seal:)})),yo=(0,ne.a)((function(){Oi()({target:"Object",stat:!0},{setPrototypeOf:Zr()})})),vo=(0,ne.a)((function(){var e=Oi(),t=Jr().values;e({target:"Object",stat:!0},{values:function(e){return t(e)}})})),_o=(0,ne.a)((function(e,t){var n=hi(),i=jn(),r=Wn();t.exports=n||!r(()})),bo=(0,ne.a)((function(){var e=Oi(),t=Vn(),n=_o(),i=Ai(),r=tr(),o=oi();t&&e({target:"Object",proto:!0,forced:n},{__defineGetter__:function(e,t){o.f(i(this),e,{get:r(t),enumerable:!0,configurable:!0})}})})),xo=(0,ne.a)((function(){var e=Oi(),t=Vn(),n=_o(),i=Ai(),r=tr(),o=oi();t&&e({target:"Object",proto:!0,forced:n},{__defineSetter__:)})),ko=(0,ne.a)((function(){var e=Oi(),t=Vn(),n=_o(),i=Ai(),r=$n(),o=Rr(),a=ii().f;t&&e({target:"Object",proto:!0,forced:n},{__lookupGetter__:function(e){var t,n=i(this),s=r(e,!0);do{if(t=a(n,s))return t.get}while(n=o(n))}})})),wo=(0,ne.a)((function(){var e=Oi(),t=Vn(),n=_o(),i=Ai(),r=$n(),o=Rr(),a=ii().f;t&&e({target:"Object",proto:!0,forced:n},{__lookupSetter__:)})),So=(0,ne.a)((function(e,t){var n=tr(),i=Qn(),r=[].slice,o={},a=t.exports=Function.bind||)),Co=(0,ne.a)((function(){Oi()({target:"Function",proto:!0},{bind:So()})})),To=(0,ne.a)((function(){var e=Vn(),t=oi().f,n=Function.prototype,i=n.toString,r=/^\s*function ([^ (]*)/,o="name";e&&!(o in n)&&t(n,o,{configurable:!0,get:)})),Eo=(0,ne.a)((function(){var e=Qn(),t=oi(),n=Rr(),i=zi()("hasInstance"),r=Function.prototype;i in r||t.f(r,i,{value:)})),Do=(0,ne.a)((function(){Oi()({global:!0},{globalThis:jn()})})),Io=(0,ne.a)((function(){Oi()({target:"Array",stat:!0},{isArray:Fi()})})),Ro=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Pi();e({target:"Array",stat:!0,forced:t(()},{of:)})),Oo=(0,ne.a)((function(e,t){var n=Ai(),i=ki(),r=xi(),o=Math.min;t.exports=[].copyWithin||)),Fo=(0,ne.a)((function(e,t){var n=zi(),i=Ki(),r=oi(),o=n("unscopables"),a=Array.prototype;void 0==a[o]&&r.f(a,o,{configurable:!0,value:i(null)}),t.exports=)),Ao=(0,ne.a)((function(){var e=Oi(),t=Oo(),n=Fo();e({target:"Array",proto:!0},{copyWithin:t}),n("copyWithin")})),Po=(0,ne.a)((function(e,t){var n=Wn();t.exports=)),Zo=(0,ne.a)((function(e,t){var n=Vn(),i=Wn(),r=ei(),o=Object.defineProperty,a={},s=t.exports=)),Mo=(0,ne.a)((function(){var e=Oi(),t=ir().every,n=Po(),i=Zo(),r=n("every"),o=i("every");e({target:"Array",proto:!0,forced:!r||!o},{every:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}})})),zo=(0,ne.a)((function(e,t){var n=Ai(),i=ki(),r=xi();t.exports=)),Bo=(0,ne.a)((function(){var e=Oi(),t=zo(),n=Fo();e({target:"Array",proto:!0},{fill:t}),n("fill")})),Lo=(0,ne.a)((function(){var e=Oi(),t=ir().filter,n=Ni(),i=Zo(),r=n("filter"),o=i("filter");e({target:"Array",proto:!0,forced:!r||!o},{filter:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}})})),Uo=(0,ne.a)((function(){var e=Oi(),t=ir().find,n=Fo(),i=Zo(),r="find",o=!0,a=i(r);r in[]&&Array(1)[r]((function(){o=!1})),e({target:"Array",proto:!0,forced:o||!a},{find:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}}),n(r)})),No=(0,ne.a)((function(){var e=Oi(),t=ir().findIndex,n=Fo(),i=Zo(),r="findIndex",o=!0,a=i(r);r in[]&&Array(1)[r]((function(){o=!1})),e({target:"Array",proto:!0,forced:o||!a},{findIndex:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}}),n(r)})),Ho=(0,ne.a)((function(e,t){var n=Fi(),i=xi(),r=nr();t.exports=)),jo=(0,ne.a)((function(){var e=Oi(),t=Ho(),n=Ai(),i=xi(),r=bi(),o=Bi();e({target:"Array",proto:!0},{flat:)})),Wo=(0,ne.a)((function(){var e=Oi(),t=Ho(),n=Ai(),i=xi(),r=tr(),o=Bi();e({target:"Array",proto:!0},{flatMap:)})),Vo=(0,ne.a)((function(e,t){var n=ir().forEach,i=Po(),r=Zo(),o=i("forEach"),a=r("forEach");t.exports=o&&a?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})),Go=(0,ne.a)((function(){var e=Oi(),t=Vo();e({target:"Array",proto:!0,forced:[].forEach!=t},{forEach:t})})),qo=(0,ne.a)((function(){var e=Oi(),t=wi().includes,n=Fo();e({target:"Array",proto:!0,forced:!Zo()("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")})),Yo=(0,ne.a)((function(){var e=Oi(),t=wi().indexOf,n=Po(),i=Zo(),r=[].indexOf,o=!!r&&1/[1].indexOf(1,-0)<0,a=n("indexOf"),s=i("indexOf",{ACCESSORS:!0,1:0});e({target:"Array",proto:!0,forced:o||!a||!s},{indexOf:)})),Xo=(0,ne.a)((function(){var e=Oi(),t=Xn(),n=Jn(),i=Po(),r=[].join,o=t!=Object,a=i("join",",");e({target:"Array",proto:!0,forced:o||!a},{join:)})),Ko=(0,ne.a)((function(e,t){var n=Jn(),i=bi(),r=xi(),o=Po(),a=Zo(),s=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,c=o("lastIndexOf"),h=a("indexOf",{ACCESSORS:!0,1:0}),d=u||!c||!h;t.exports=d?l})),Jo=(0,ne.a)((function(){var e=Oi(),t=Ko();e({target:"Array",proto:!0,forced:t!==[].lastIndexOf},{lastIndexOf:t})})),Qo=(0,ne.a)((function(){var e=Oi(),t=ir().map,n=Ni(),i=Zo(),r=n("map"),o=i("map");e({target:"Array",proto:!0,forced:!r||!o},{map:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}})})),$o=(0,ne.a)((function(e,t){var n=tr(),i=Ai(),r=Xn(),o=xi(),a=t.exports={left:a(!1),right:a(!0)}})),ea=(0,ne.a)((function(){var e=Oi(),t=$o().left,n=Po(),i=Zo(),r=n("reduce"),o=i("reduce",{1:0});e({target:"Array",proto:!0,forced:!r||!o},{reduce:function(e){return t(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})})),ta=(0,ne.a)((function(){var e=Oi(),t=$o().right,n=Po(),i=Zo(),r=n("reduceRight"),o=i("reduce",{1:0});e({target:"Array",proto:!0,forced:!r||!o},{reduceRight:)})),na=(0,ne.a)((function(){var e=Oi(),t=Fi(),n=[].reverse,i=[1,2];e({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:)})),ia=(0,ne.a)((function(){var e=Oi(),t=Qn(),n=Fi(),i=ki(),r=xi(),o=Jn(),a=Pi(),s=zi(),l=Ni(),u=Zo(),c=l("slice"),h=u("slice",{ACCESSORS:!0,0:0,1:2}),d=s("species"),f=[].slice,p=Math.max;e({target:"Array",proto:!0,forced:!c||!h},{slice:)})),ra=(0,ne.a)((function(){var e=Oi(),t=ir().some,n=Po(),i=Zo(),r=n("some"),o=i("some");e({target:"Array",proto:!0,forced:!r||!o},{some:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}})})),oa=(0,ne.a)((function(){var e=Oi(),t=tr(),n=Ai(),i=Wn(),r=Po(),o=[],a=o.sort,s=i((),l=i((function(){o.sort(null)})),u=r("sort");e({target:"Array",proto:!0,forced:s||!l||!u},{sort:)})),aa=(0,ne.a)((function(){var e=Oi(),t=ki(),n=bi(),i=xi(),r=Ai(),o=Bi(),a=Pi(),s=Ni(),l=Zo(),u=s("splice"),c=l("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,d=Math.min,f=9007199254740991,p="Maximum allowed length exceeded";e({target:"Array",proto:!0,forced:!u||!c},{splice:)})),sa=(0,ne.a)((function(e,t){var n=_i(),i=oi(),r=zi(),o=Vn(),a=r("species");t.exports=)),la=(0,ne.a)((function(){sa()("Array")})),ua=(0,ne.a)((function(){Fo()("flat")})),ca=(0,ne.a)((),ha=(0,ne.a)((function(e,t){var n=Jn(),i=Fo(),r=Fr(),o=mi(),a=Mr(),s="Array Iterator",l=o.set,u=o.getterFor(s);t.exports=a(Array,"Array",(,(,"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")})),da=(0,ne.a)((function(){var e=Oi(),t=ki(),n=String.fromCharCode,i=String.fromCodePoint;e({target:"String",stat:!0,forced:!!i&&1!=i.length},{fromCodePoint:)})),fa=(0,ne.a)((function(){var e=Oi(),t=Jn(),n=xi();e({target:"String",stat:!0},{raw:)})),pa=(0,ne.a)((function(){var e=Oi(),t=Dr().codeAt;e({target:"String",proto:!0},{codePointAt:function(e){return t(this,e)}})})),ga=(0,ne.a)((function(e,t){var n=Qn(),i=Yn(),r=zi()("match");t.exports=)),ma=(0,ne.a)((function(e,t){var n=ga();t.exports=)),ya=(0,ne.a)((function(e,t){var n=zi()("match");t.exports=)),va=(0,ne.a)((function(){var e=Oi(),t=ii().f,n=xi(),i=ma(),r=Kn(),o=ya(),a=hi(),s="".endsWith,l=Math.min,u=o("endsWith");e({target:"String",proto:!0,forced:!(!a&&!u&&!!function(){var e=t(String.prototype,"endsWith");return e&&!e.writable}())&&!u},{endsWith:)})),_a=(0,ne.a)((function(){var e=Oi(),t=ma(),n=Kn();e({target:"String",proto:!0,forced:!ya()("includes")},{includes:)})),ba=(0,ne.a)((function(e,t){var n=ri();t.exports=)),xa=(0,ne.a)((function(e){var t=Wn();.UNSUPPORTED_Y=t((function(){var e=n("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),e.BROKEN_CARET=t(()})),ka=(0,ne.a)((function(e,t){var n=ba(),i=xa(),r=RegExp.prototype.exec,o=String.prototype.replace,a=r,s=),l=i.UNSUPPORTED_Y||i.BROKEN_CARET,u=void 0!==/()??/.exec("")[1];(s||u||l)&&(a=,t.exports=a})),wa=(0,ne.a)((function(){var e=Oi(),t=ka();e({target:"RegExp",proto:!0,forced:/./.exec!==t},{exec:t})})),Sa=(0,ne.a)((function(e,t){wa();var n=yi(),i=Wn(),r=zi(),o=ka(),a=ai(),s=r("species"),l=!i((),u="$0"==="a".replace(/./,"$0"),c=r("replace"),h=!!/./[c]&&""===/./[c]("a","$0"),d=!i(();t.exports=)),Ca=(0,ne.a)((function(e,t){var n=Dr().charAt;t.exports=)),Ta=(0,ne.a)((function(e,t){var n=Yn(),i=ka();t.exports=)),Ea=(0,ne.a)((function(){var e=Sa(),t=ri(),n=xi(),i=Kn(),r=Ca(),o=Ta();e("match",1,()})),Da=(0,ne.a)((function(e,t){var n=ri(),i=tr(),r=zi()("species");t.exports=)),Ia=(0,ne.a)((function(){var e=Oi(),t=Ar(),n=Kn(),i=xi(),r=tr(),o=ri(),a=Yn(),s=ga(),l=ba(),u=ai(),c=Wn(),h=zi(),d=Da(),f=Ca(),p=mi(),g=hi(),m=h("matchAll"),y="RegExp String",v=y+" Iterator",_=p.set,b=p.getterFor(v),x=RegExp.prototype,k=x.exec,w="".matchAll,S=!!w&&!c((),C=t((,y,(),T=e({target:"String",proto:!0,forced:S},{matchAll:),g||m in x||u(x,m,T)})),Ra=(0,ne.a)((function(e,t){var n=bi(),i=Kn();t.exports="".repeat||)),Oa=(0,ne.a)((function(e,t){var n=xi(),i=Ra(),r=Kn(),o=Math.ceil,a=t.exports={start:a(!1),end:a(!0)}})),Fa=(0,ne.a)((function(e,t){var n=Li();t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)})),Aa=(0,ne.a)((function(){var e=Oi(),t=Oa().end;e({target:"String",proto:!0,forced:Fa()},{padEnd:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}})})),Pa=(0,ne.a)((function(){var e=Oi(),t=Oa().start;e({target:"String",proto:!0,forced:Fa()},{padStart:)})),Za=(0,ne.a)((function(){Oi()({target:"String",proto:!0},{repeat:Ra()})})),Ma=(0,ne.a)((function(){var e=Sa(),t=ri(),n=Ai(),i=xi(),r=bi(),o=Kn(),a=Ca(),s=Ta(),l=Math.max,u=Math.min,c=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,d=/\$([$&'`]|\d\d?)/g,f=e("replace",2,(function(e,p,g,m){var y=m.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=m.REPLACE_KEEPS_$0,_=y?"$":"$0";return[function(t,n){var i=o(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,i,n):p.call(String(i),t,n)},function(e,n){if(!y&&v||"string"===typeof n&&-1===n.indexOf(_)){var o=g(p,e,this,n);if(o.done)return o.value}var c=t(e),h=String(this),d="function"===typeof n;d||(n=String(n));var m=c.global;if(m){var x=c.unicode;c.lastIndex=0}for(var k=[];;){var w=s(c,h);if(null===w)break;if(k.push(w),!m)break;""===String(w[0])&&(c.lastIndex=a(h,i(c.lastIndex),x))}for(var S="",C=0,T=0;T<k.length;T++){w=k[T];for(var E=String(w[0]),D=l(u(r(w.index),h.length),0),I=[],R=1;R<w.length;R++)I.push(f(w[R]));var O=w.groups;if(d){var F=[E].concat(I,D,h);void 0!==O&&F.push(O);var A=String(n.apply(void 0,F))}else A=b(E,h,D,I,O,n);D>=C&&(S+=h.slice(C,D)+A,C=D+E.length)}return S+h.slice(C)}];))})),za=(0,ne.a)((function(){var e=Sa(),t=ri(),n=Kn(),i=lo(),r=Ta();e("search",1,()})),Ba=(0,ne.a)((function(){var e=Sa(),t=ga(),n=ri(),i=Kn(),r=Da(),o=Ca(),a=xi(),s=Ta(),l=ka(),u=Wn(),c=[].push,h=Math.min,d=4294967295,f=!u(();e("split",2,(,!f)})),La=(0,ne.a)((function(){var e=Oi(),t=ii().f,n=xi(),i=ma(),r=Kn(),o=ya(),a=hi(),s="".startsWith,l=Math.min,u=o("startsWith");e({target:"String",proto:!0,forced:!(!a&&!u&&!!))&&!u},{startsWith:)})),Ua=(0,ne.a)((),Na=(0,ne.a)((function(e,t){var n=Kn(),i="["+Ua()+"]",r=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),a=t.exports={start:a(1),end:a(2),trim:a(3)}})),Ha=(0,ne.a)((function(e,t){var n=Wn(),i=Ua();t.exports=)),ja=(0,ne.a)((function(){var e=Oi(),t=Na().trim;e({target:"String",proto:!0,forced:Ha()("trim")},{trim:function(){return t(this)}})})),Wa=(0,ne.a)((function(){var e=Oi(),t=Na().start,n=Ha()("trimStart"),i=n?function(){return t(this)}:"".trimStart;e({target:"String",proto:!0,forced:n},{trimStart:i,trimLeft:i})})),Va=(0,ne.a)((function(){var e=Oi(),t=Na().end,n=Ha()("trimEnd"),i=n?function(){return t(this)}:"".trimEnd;e({target:"String",proto:!0,forced:n},{trimEnd:i,trimRight:i})})),Ga=(0,ne.a)((function(e,t){var n=Kn(),i=/"/g;t.exports=)),qa=(0,ne.a)((function(e,t){var n=Wn();t.exports=)),Ya=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("anchor")},{anchor:function(e){return t(this,"a","name",e)}})})),Xa=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("big")},{big:function(){return t(this,"big","","")}})})),Ka=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("blink")},{blink:function(){return t(this,"blink","","")}})})),Ja=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("bold")},{bold:function(){return t(this,"b","","")}})})),Qa=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("fixed")},{fixed:function(){return t(this,"tt","","")}})})),$a=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("fontcolor")},{fontcolor:function(e){return t(this,"font","color",e)}})})),es=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("fontsize")},{fontsize:function(e){return t(this,"font","size",e)}})})),ts=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("italics")},{italics:function(){return t(this,"i","","")}})})),ns=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("link")},{link:)})),is=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("small")},{small:function(){return t(this,"small","","")}})})),rs=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("strike")},{strike:function(){return t(this,"strike","","")}})})),os=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("sub")},{sub:function(){return t(this,"sub","","")}})})),as=(0,ne.a)((function(){var e=Oi(),t=Ga();e({target:"String",proto:!0,forced:qa()("sup")},{sup:)})),ss=(0,ne.a)((function(e,t){var n=Qn(),i=Zr();t.exports=)),ls=(0,ne.a)((function(){var e,t,n,i,r=Vn(),o=jn(),a=Ri(),s=ss(),l=oi().f,u=Ti().f,c=ga(),h=ba(),d=xa(),f=yi(),p=Wn(),g=mi().set,m=sa(),y=zi()("match"),v=o.RegExp,_=v.prototype,b=/a/g,x=/a/g,k=new v(b)!==b,w=d.UNSUPPORTED_Y;if(r&&a("RegExp",!k||w||p(())){for(e=t=n=u(v),i=0;n.length>i;)t(n[i++]);_.constructor=e,e.prototype=_,f(o,"RegExp",e)}m("RegExp")})),us=(0,ne.a)((function(){var e=Vn(),t=oi(),n=ba(),i=xa().UNSUPPORTED_Y;e&&("g"!=/./g.flags||i)&&t.f(RegExp.prototype,"flags",{configurable:!0,get:n})})),cs=(0,ne.a)((function(){var e=Vn(),t=xa().UNSUPPORTED_Y,n=oi().f,i=mi().get,r=RegExp.prototype;e&&t&&n(RegExp.prototype,"sticky",{configurable:!0,get:)})),hs=(0,ne.a)((function(){wa();var e=Oi(),t=Qn(),n=),i=/./.test;e({target:"RegExp",proto:!0,forced:!n},{test:)})),ds=(0,ne.a)((function(){var e=yi(),t=ri(),n=Wn(),i=ba(),r="toString",o=RegExp.prototype,a=o[r],s=n((),l=a.name!=r;(s||l)&&e(RegExp.prototype,r,(,{unsafe:!0})})),fs=(0,ne.a)((function(e,t){var n=jn(),i=Na().trim,r=Ua(),o=n.parseInt,a=/^[+-]?0[Xx]/,s=8!==o(r+"08")||22!==o(r+"0x16");t.exports=s?o})),ps=(0,ne.a)((function(){var e=Oi(),t=fs();e({global:!0,forced:parseInt!=t},{parseInt:t})})),gs=(0,ne.a)((function(e,t){var n=jn(),i=Na().trim,r=Ua(),o=n.parseFloat,a=1/o(r+"-0")!==-1/0;t.exports=a?o})),ms=(0,ne.a)((function(){var e=Oi(),t=gs();e({global:!0,forced:parseFloat!=t},{parseFloat:t})})),ys=(0,ne.a)((function(){var e,t,n,i,r=Vn(),o=jn(),a=Ri(),s=yi(),l=ei(),u=Yn(),c=ss(),h=$n(),d=Wn(),f=Ki(),p=Ti().f,g=ii().f,m=oi().f,y=Na().trim,v="Number",_=o[v],b=_.prototype,x=u(f(b))==v,k=if(a(v,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(e=t=r?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),n=0;t.length>n;n++)l(_,i=t[n])&&!l(e,i)&&m(e,i,g(_,i));e.prototype=b,b.constructor=e,s(o,v,e)}})),vs=(0,ne.a)((function(){Oi()({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})})),_s=(0,ne.a)((function(e,t){var n=jn().isFinite;t.exports=Number.isFinite||)),bs=(0,ne.a)((function(){Oi()({target:"Number",stat:!0},{isFinite:_s()})})),xs=(0,ne.a)((function(e,t){var n=Qn(),i=Math.floor;t.exports=)),ks=(0,ne.a)((function(){Oi()({target:"Number",stat:!0},{isInteger:xs()})})),ws=(0,ne.a)((function(){Oi()({target:"Number",stat:!0},{isNaN:)})),Ss=(0,ne.a)((function(){var e=Oi(),t=xs(),n=Math.abs;e({target:"Number",stat:!0},{isSafeInteger:)})),Cs=(0,ne.a)((function(){Oi()({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})})),Ts=(0,ne.a)((function(){Oi()({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})})),Es=(0,ne.a)((function(){var e=Oi(),t=gs();e({target:"Number",stat:!0,forced:Number.parseFloat!=t},{parseFloat:t})})),Ds=(0,ne.a)((function(){var e=Oi(),t=fs();e({target:"Number",stat:!0,forced:Number.parseInt!=t},{parseInt:t})})),Is=(0,ne.a)((function(e,t){var n=Yn();t.exports=)),Rs=(0,ne.a)((function(){var e=Oi(),t=bi(),n=Is(),i=Ra(),r=Wn(),o=1..toFixed,a=Math.floor,s=e({target:"Number",proto:!0,forced:o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){o.call({})}))},{toFixed:function(e){var r,o,l,u,c=n(this),h=t(e),d=[0,0,0,0,0,0],f="",p="0",g=m=y=if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(f="-",c=-c),c>1e-21)if(r=c*s(2,69,1))-69,o=r<0?c*s(2,-r,1):c/s(2,r,1),o*=4503599627370496,(r=52-r)>0){for(g(0,o),l=h;l>=7;)g(1e7,0),l-=7;for(g(s(10,l,1),0),l=r-1;l>=23;)m(1<<23),l-=23;m(1<<l),g(1,1),m(2),p=y()}else g(0,o),g(1<<-r,0),p=y()+i.call("0",h);return p=h>0?f+((u=p.length)<=h?"0."+i.call("0",h-u)+p:p.slice(0,u-h)+"."+p.slice(u-h)):f+p}})})),Os=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Is(),i=1..toPrecision;e({target:"Number",proto:!0,forced:t(()||!t((function(){i.call({})}))},{toPrecision:)})),Fs=(0,ne.a)((),As=(0,ne.a)((function(){var e=Oi(),t=Fs(),n=Math.acosh,i=Math.log,r=Math.sqrt,o=Math.LN2;e({target:"Math",stat:!0,forced:!n||710!=Math.floor(n(Number.MAX_VALUE))||n(1/0)!=1/0},{acosh:)})),Ps=(0,ne.a)((function(){var e=Oi(),t=Math.asinh,n=Math.log,i=Math.sqrt;e({target:"Math",stat:!0,forced:!(t&&1/t(0)>0)},{asinh:)})),Zs=(0,ne.a)((function(){var e=Oi(),t=Math.atanh,n=Math.log;e({target:"Math",stat:!0,forced:!(t&&1/t(-0)<0)},{atanh:)})),Ms=(0,ne.a)((),zs=(0,ne.a)((function(){var e=Oi(),t=Ms(),n=Math.abs,i=Math.pow;e({target:"Math",stat:!0},{cbrt:)})),Bs=(0,ne.a)((function(){var e=Oi(),t=Math.floor,n=Math.log,i=Math.LOG2E;e({target:"Math",stat:!0},{clz32:)})),Ls=(0,ne.a)((),Us=(0,ne.a)((function(){var e=Oi(),t=Ls(),n=Math.cosh,i=Math.abs,r=Math.E;e({target:"Math",stat:!0,forced:!n||n(710)===1/0},{cosh:)})),Ns=(0,ne.a)((function(){var e=Oi(),t=Ls();e({target:"Math",stat:!0,forced:t!=Math.expm1},{expm1:t})})),Hs=(0,ne.a)((function(e,t){var n=Ms(),i=Math.abs,r=Math.pow,o=r(2,-52),a=r(2,-23),s=r(2,127)*(2-a),l=r(2,-126);t.exports=Math.fround||)),js=(0,ne.a)((function(){Oi()({target:"Math",stat:!0},{fround:Hs()})})),Ws=(0,ne.a)((function(){var e=Oi(),t=Math.hypot,n=Math.abs,i=Math.sqrt;e({target:"Math",stat:!0,forced:!!t&&t(1/0,NaN)!==1/0},{hypot:)})),Vs=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Math.imul;e({target:"Math",stat:!0,forced:t(()},{imul:)})),Gs=(0,ne.a)((function(){var e=Oi(),t=Math.log,n=Math.LOG10E;e({target:"Math",stat:!0},{log10:)})),qs=(0,ne.a)((function(){Oi()({target:"Math",stat:!0},{log1p:Fs()})})),Ys=(0,ne.a)((function(){var e=Oi(),t=Math.log,n=Math.LN2;e({target:"Math",stat:!0},{log2:)})),Xs=(0,ne.a)((function(){Oi()({target:"Math",stat:!0},{sign:Ms()})})),Ks=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Ls(),i=Math.abs,r=Math.exp,o=Math.E;e({target:"Math",stat:!0,forced:t(()},{sinh:)})),Js=(0,ne.a)((function(){var e=Oi(),t=Ls(),n=Math.exp;e({target:"Math",stat:!0},{tanh:)})),Qs=(0,ne.a)((function(){var e=Oi(),t=Math.ceil,n=Math.floor;e({target:"Math",stat:!0},{trunc:)})),$s=(0,ne.a)((function(){Oi()({target:"Date",stat:!0},{now:)})),el=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Ai(),i=$n();e({target:"Date",proto:!0,forced:t(()},{toJSON:)})),tl=(0,ne.a)((function(e,t){var n=Wn(),i=Oa().start,r=Math.abs,o=Date.prototype,a=o.getTime,s=o.toISOString;t.exports=n(()||!n(()?s})),nl=(0,ne.a)((function(){var e=Oi(),t=tl();e({target:"Date",proto:!0,forced:Date.prototype.toISOString!==t},{toISOString:t})})),il=(0,ne.a)((function(){var e=yi(),t=Date.prototype,n="Invalid Date",i="toString",r=t[i],o=t.getTime;new Date(NaN)+""!=n&&e(t,i,()})),rl=(0,ne.a)((function(e,t){var n=ri(),i=$n();t.exports=)),ol=(0,ne.a)((function(){var e=ai(),t=rl(),n=zi()("toPrimitive"),i=Date.prototype;n in i||e(i,n,t)})),al=(0,ne.a)((function(){var e=Oi(),t=_i(),n=Wn(),i=t("JSON","stringify"),r=/[\uD800-\uDFFF]/g,o=/^[\uD800-\uDBFF]$/,a=/^[\uDC00-\uDFFF]$/,s=l=n(();i&&e({target:"JSON",stat:!0,forced:l},{stringify:)})),sl=(0,ne.a)((),ll=(0,ne.a)((),ul=(0,ne.a)((),cl=(0,ne.a)((),hl=(0,ne.a)((function(e,t){var n,i,r,o=jn(),a=Wn(),s=Yn(),l=nr(),u=Xi(),c=ti(),h=cl(),d=o.location,f=o.setImmediate,p=o.clearImmediate,g=o.process,m=o.MessageChannel,y=o.Dispatch,v=0,_={},b="onreadystatechange",x=k=w=S=f&&p||(f=p="process"==s(g)?n=function(e){g.nextTick(k(e))}:y&&y.now?n=m&&!h?(r=(i=new m).port2,i.port1.onmessage=w,n=l(r.postMessage,r,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||a(S)||"file:"===d.protocol?n=b in c("script")?(n=S,o.addEventListener("message",w,!1))),t.exports={set:f,clear:p}})),dl=(0,ne.a)((function(e,t){var n,i,r,o,a,s,l,u,c=jn(),h=ii().f,d=Yn(),f=hl().set,p=cl(),g=c.MutationObserver||c.WebKitMutationObserver,m=c.process,y=c.Promise,v="process"==d(m),_=h(c,"queueMicrotask"),b=_&&_.value;b||(n=v?o=function(){m.nextTick(n)}:g&&!p?(a=!0,s=document.createTextNode(""),new g(n).observe(s,{characterData:!0}),o=:y&&y.resolve?(l=y.resolve(void 0),u=l.then,o=function(){u.call(l,n)}):o=function(){f.call(c,n)}),t.exports=b||)),fl=(0,ne.a)((function(e,t){var n=tr(),i=t.exports.f=)),pl=(0,ne.a)((function(e,t){var n=ri(),i=Qn(),r=fl();t.exports=)),gl=(0,ne.a)((function(e,t){var n=jn();t.exports=)),ml=(0,ne.a)((),yl=(0,ne.a)((function(){var e,t,n,i,r=Oi(),o=hi(),a=jn(),s=_i(),l=sl(),u=yi(),c=ll(),h=er(),d=sa(),f=Qn(),p=tr(),g=ul(),m=Yn(),y=ui(),v=no(),_=Hr(),b=Da(),x=hl().set,k=dl(),w=pl(),S=gl(),C=fl(),T=ml(),E=mi(),D=Ri(),I=zi(),R=Ui(),O=I("species"),F="Promise",A=E.get,P=E.set,Z=E.getterFor(F),M=l,z=a.TypeError,B=a.document,L=a.process,U=s("fetch"),N=C.f,H=N,j="process"==m(L),W=!!(B&&B.createEvent&&a.dispatchEvent),V="unhandledrejection",G=D(F,(),q=G||!_((),Y=X=K=J=Q=$=ee=te=ne=G&&(M=(e=.prototype=c(M.prototype,{then:catch:),t=C.f=N=o||"function"!=typeof l||(i=l.prototype.then,u(l.prototype,"then",(,{unsafe:!0}),"function"==typeof U&&r({global:!0,enumerable:!0,forced:!0},{fetch:))),r({global:!0,wrap:!0,forced:G},{Promise:M}),h(M,F,!1,!0),d(F),n=s(F),r({target:F,stat:!0,forced:G},{reject:),r({target:F,stat:!0,forced:o||G},{resolve:),r({target:F,stat:!0,forced:q},{all:race:)})),vl=(0,ne.a)((function(){var e=Oi(),t=tr(),n=fl(),i=ml(),r=no();e({target:"Promise",stat:!0},{allSettled:)})),_l=(0,ne.a)((function(){var e=Oi(),t=hi(),n=sl(),i=Wn(),r=_i(),o=Da(),a=pl(),s=yi();e({target:"Promise",proto:!0,real:!0,forced:!!n&&i(()},{finally:),t||"function"!=typeof n||n.prototype.finally||s(n.prototype,"finally",r("Promise").prototype.finally)})),bl=(0,ne.a)((function(e,t){var n=Oi(),i=jn(),r=Ri(),o=yi(),a=eo(),s=no(),l=ul(),u=Qn(),c=Wn(),h=Hr(),d=er(),f=ss();t.exports=)),xl=(0,ne.a)((function(e,t){var n=oi().f,i=Ki(),r=ll(),o=nr(),a=ul(),s=no(),l=Mr(),u=sa(),c=Vn(),h=eo().fastKey,d=mi(),f=d.set,p=d.getterFor;t.exports={getConstructor:setStrong:})),kl=(0,ne.a)((function(e,t){var n=bl(),i=xl();t.exports=n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)})),wl=(0,ne.a)((function(e,t){var n=bl(),i=xl();t.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)})),Sl=(0,ne.a)((function(e,t){var n=ll(),i=eo().getWeakData,r=ri(),o=Qn(),a=ul(),s=no(),l=ir(),u=ei(),c=mi(),h=c.set,d=c.getterFor,f=l.find,p=l.findIndex,g=0,m=y=v=y.prototype={get:has:set:delete:,t.exports={getConstructor:})),Cl=(0,ne.a)((function(e,t){var n,i,r,o,a,s,l=jn(),u=ll(),c=eo(),h=bl(),d=Sl(),f=Qn(),p=mi().enforce,g=ci(),m=!l.ActiveXObject&&"ActiveXObject"in l,y=Object.isExtensible,v=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},_=t.exports=h("WeakMap",v,d);g&&m&&(n=d.getConstructor(v,"WeakMap",!0),c.REQUIRED=!0,i=_.prototype,r=i.delete,o=i.has,a=i.get,s=i.set,u(i,{delete:function(e){if(f(e)&&!y(e)){var t=p(this);return t.frozen||(t.frozen=new n),r.call(this,e)||t.frozen.delete(e)}return r.call(this,e)},has:get:set:))})),Tl=(0,ne.a)((function(){bl()("WeakSet",(,Sl())})),El=(0,ne.a)((),Dl=(0,ne.a)((function(e,t){var n=bi(),i=xi();t.exports=)),Il=(0,ne.a)((function(e,t){var n=1/0,i=Math.abs,r=Math.pow,o=Math.floor,a=Math.log,s=Math.LN2;t.exports={pack:unpack:})),Rl=(0,ne.a)((function(e,t){var n,i,r,o,a,s,l=jn(),u=Vn(),c=El(),h=ai(),d=ll(),f=Wn(),p=ul(),g=bi(),m=xi(),y=Dl(),v=Il(),_=Rr(),b=Zr(),x=Ti().f,k=oi().f,w=zo(),S=er(),C=mi(),T=C.get,E=C.set,D="ArrayBuffer",I="DataView",R="prototype",O="Wrong index",F=l[D],A=F,P=l[I],Z=P&&P[R],M=Object.prototype,z=l.RangeError,B=v.pack,L=v.unpack,U=N=H=j=W=function(e){return B(e,23,4)},V=G=q=Y=if(c){if(!f((function(){F(1)}))||!f((function(){new F(-1)}))||f(()){for(n=(A=[R]=F[R],i=x(F),r=0;i.length>r;)(o=i[r++])in A||h(A,o,F[o]);n.constructor=A}b&&_(Z)!==M&&b(Z,M),a=new P(new A(2)),s=Z.setInt8,a.setInt8(0,2147483648),a.setInt8(1,2147483649),!a.getInt8(0)&&a.getInt8(1)||d(Z,{setInt8:function(e,t){s.call(this,e,t<<24>>24)},setUint8:,{unsafe:!0})}else A=P=u&&(G(A,"byteLength"),G(P,"buffer"),G(P,"byteLength"),G(P,"byteOffset")),d(P[R],{getInt8:getUint8:getInt16:getUint16:getInt32:getUint32:getFloat32:function(e){return L(q(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:setInt8:function(e,t){Y(this,1,e,U,t)},setUint8:setInt16:function(e,t){Y(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Y(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Y(this,4,e,H,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Y(this,4,e,H,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Y(this,4,e,W,t,arguments.length>2?arguments[2]:void 0)},setFloat64:);S(A,D),S(P,I),t.exports={ArrayBuffer:A,DataView:P}})),Ol=(0,ne.a)((function(){var e=Oi(),t=jn(),n=Rl(),i=sa(),r="ArrayBuffer",o=n[r];e({global:!0,forced:t[r]!==o},{ArrayBuffer:o}),i(r)})),Fl=(0,ne.a)((function(e,t){var n,i=El(),r=Vn(),o=jn(),a=Qn(),s=ei(),l=Wi(),u=ai(),c=yi(),h=oi().f,d=Rr(),f=Zr(),p=zi(),g=fi(),m=o.Int8Array,y=m&&m.prototype,v=o.Uint8ClampedArray,_=v&&v.prototype,b=m&&d(m),x=y&&d(y),k=Object.prototype,w=k.isPrototypeOf,S=p("toStringTag"),C=g("TYPED_ARRAY_TAG"),T=i&&!!f&&"Opera"!==l(o.opera),E=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},I=for(n in D)o[n]||(T=!1);if((!T||"function"!=typeof b||b===Function.prototype)&&(b=T))for(n in D)o[n]&&f(o[n],b);if((!T||!x||x===k)&&(x=b.prototype,T))for(n in D)o[n]&&f(o[n].prototype,x);if(T&&d(_)!==x&&f(_,x),r&&!s(x,S))for(n in E=!0,h(x,S,{get:),D)o[n]&&u(o[n],C,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:E&&C,aTypedArray:aTypedArrayConstructor:exportTypedArrayMethod:exportTypedArrayStaticMethod:isView:isTypedArray:I,TypedArray:b,TypedArrayPrototype:x}})),Al=(0,ne.a)((function(){var e=Oi(),t=Fl();e({target:"ArrayBuffer",stat:!0,forced:!t.NATIVE_ARRAY_BUFFER_VIEWS},{isView:t.isView})})),Pl=(0,ne.a)((function(){var e=Oi(),t=Wn(),n=Rl(),i=ri(),r=ki(),o=xi(),a=Da(),s=n.ArrayBuffer,l=n.DataView,u=s.prototype.slice;e({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:t(()},{slice:)})),Zl=(0,ne.a)((function(){var e=Oi(),t=Rl();e({global:!0,forced:!El()},{DataView:t.DataView})})),Ml=(0,ne.a)((function(e,t){var n=jn(),i=Wn(),r=Hr(),o=Fl().NATIVE_ARRAY_BUFFER_VIEWS,a=n.ArrayBuffer,s=n.Int8Array;t.exports=!o||!i(()||!i(()||!r((,!0)||i(()})),zl=(0,ne.a)((function(e,t){var n=bi();t.exports=)),Bl=(0,ne.a)((function(e,t){var n=zl();t.exports=)),Ll=(0,ne.a)((function(e,t){var n=Ai(),i=xi(),r=Ur(),o=Lr(),a=nr(),s=Fl().aTypedArrayConstructor;t.exports=)),Ul=(0,ne.a)((function(e,t){var n=Oi(),i=jn(),r=Vn(),o=Ml(),a=Fl(),s=Rl(),l=ul(),u=qn(),c=ai(),h=xi(),d=Dl(),f=Bl(),p=$n(),g=ei(),m=Wi(),y=Qn(),v=Ki(),_=Zr(),b=Ti().f,x=Ll(),k=ir().forEach,w=sa(),S=oi(),C=ii(),T=mi(),E=ss(),D=T.get,I=T.set,R=S.f,O=C.f,F=Math.round,A=i.RangeError,P=s.ArrayBuffer,Z=s.DataView,M=a.NATIVE_ARRAY_BUFFER_VIEWS,z=a.TYPED_ARRAY_TAG,B=a.TypedArray,L=a.TypedArrayPrototype,U=a.aTypedArrayConstructor,N=a.isTypedArray,H="BYTES_PER_ELEMENT",j="Wrong length",W=V=G=q=Y=X=r?(M||(C.f=Y,S.f=X,V(L,"buffer"),V(L,"byteOffset"),V(L,"byteLength"),V(L,"length")),n({target:"Object",stat:!0,forced:!M},{getOwnPropertyDescriptor:Y,defineProperty:X}),t.exports=:t.exports=function(){}})),Nl=(0,ne.a)((function(){Ul()("Int8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))})),Hl=(0,ne.a)((function(){Ul()("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))})),jl=(0,ne.a)((function(){Ul()("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}),!0)})),Wl=(0,ne.a)((function(){Ul()("Int16",(function(e){return function(t,n,i){return e(this,t,n,i)}}))})),Vl=(0,ne.a)((function(){Ul()("Uint16",(function(e){return function(t,n,i){return e(this,t,n,i)}}))})),Gl=(0,ne.a)((function(){Ul()("Int32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))})),ql=(0,ne.a)((function(){Ul()("Uint32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))})),Yl=(0,ne.a)((function(){Ul()("Float32",(function(e){return function(t,n,i){return e(this,t,n,i)}}))})),Xl=(0,ne.a)((function(){Ul()("Float64",()})),Kl=(0,ne.a)((function(){var e=Ml();(0,Fl().exportTypedArrayStaticMethod)("from",Ll(),e)})),Jl=(0,ne.a)((function(){var e=Fl(),t=Ml(),n=e.aTypedArrayConstructor;(0,e.exportTypedArrayStaticMethod)("of",(,t)})),Ql=(0,ne.a)((function(){var e=Fl(),t=Oo(),n=e.aTypedArray;(0,e.exportTypedArrayMethod)("copyWithin",()})),$l=(0,ne.a)((function(){var e=Fl(),t=ir().every,n=e.aTypedArray;(0,e.exportTypedArrayMethod)("every",(function(e){return t(n(this),e,arguments.length>1?arguments[1]:void 0)}))})),eu=(0,ne.a)((function(){var e=Fl(),t=zo(),n=e.aTypedArray;(0,e.exportTypedArrayMethod)("fill",(function(e){return t.apply(n(this),arguments)}))})),tu=(0,ne.a)((function(){var e=Fl(),t=ir().filter,n=Da(),i=e.aTypedArray,r=e.aTypedArrayConstructor;(0,e.exportTypedArrayMethod)("filter",()})),nu=(0,ne.a)((function(){var e=Fl(),t=ir().find,n=e.aTypedArray;(0,e.exportTypedArrayMethod)("find",(function(e){return t(n(this),e,arguments.length>1?arguments[1]:void 0)}))})),iu=(0,ne.a)((function(){var e=Fl(),t=ir().findIndex,n=e.aTypedArray;(0,e.exportTypedArrayMethod)("findIndex",(function(e){return t(n(this),e,arguments.length>1?arguments[1]:void 0)}))})),ru=(0,ne.a)((function(){var e=Fl(),t=ir().forEach,n=e.aTypedArray;(0,e.exportTypedArrayMethod)("forEach",()})),ou=(0,ne.a)((function(){var e=Fl(),t=wi().includes,n=e.aTypedArray;(0,e.exportTypedArrayMethod)("includes",(function(e){return t(n(this),e,arguments.length>1?arguments[1]:void 0)}))})),au=(0,ne.a)((function(){var e=Fl(),t=wi().indexOf,n=e.aTypedArray;(0,e.exportTypedArrayMethod)("indexOf",(function(e){return t(n(this),e,arguments.length>1?arguments[1]:void 0)}))})),su=(0,ne.a)((function(){var e=jn(),t=Fl(),n=ha(),i=zi()("iterator"),r=e.Uint8Array,o=n.values,a=n.keys,s=n.entries,l=t.aTypedArray,u=t.exportTypedArrayMethod,c=r&&r.prototype[i],h=!!c&&("values"==c.name||void 0==c.name),d=function(){return o.call(l(this))};u("entries",(function(){return s.call(l(this))})),u("keys",(),u("values",d,!h),u(i,d,!h)})),lu=(0,ne.a)((function(){var e=Fl(),t=e.aTypedArray,n=e.exportTypedArrayMethod,i=[].join;n("join",(function(e){return i.apply(t(this),arguments)}))})),uu=(0,ne.a)((function(){var e=Fl(),t=Ko(),n=e.aTypedArray;(0,e.exportTypedArrayMethod)("lastIndexOf",(function(e){return t.apply(n(this),arguments)}))})),cu=(0,ne.a)((function(){var e=Fl(),t=ir().map,n=Da(),i=e.aTypedArray,r=e.aTypedArrayConstructor;(0,e.exportTypedArrayMethod)("map",()})),hu=(0,ne.a)((function(){var e=Fl(),t=$o().left,n=e.aTypedArray;(0,e.exportTypedArrayMethod)("reduce",(function(e){return t(n(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))})),du=(0,ne.a)((function(){var e=Fl(),t=$o().right,n=e.aTypedArray;(0,e.exportTypedArrayMethod)("reduceRight",()})),fu=(0,ne.a)((function(){var e=Fl(),t=e.aTypedArray,n=e.exportTypedArrayMethod,i=Math.floor;n("reverse",()})),pu=(0,ne.a)((function(){var e=Fl(),t=xi(),n=Bl(),i=Ai(),r=Wn(),o=e.aTypedArray;(0,e.exportTypedArrayMethod)("set",(,r(())})),gu=(0,ne.a)((function(){var e=Fl(),t=Da(),n=Wn(),i=e.aTypedArray,r=e.aTypedArrayConstructor,o=e.exportTypedArrayMethod,a=[].slice;o("slice",(,n(())})),mu=(0,ne.a)((function(){var e=Fl(),t=ir().some,n=e.aTypedArray;(0,e.exportTypedArrayMethod)("some",()})),yu=(0,ne.a)((function(){var e=Fl(),t=e.aTypedArray,n=e.exportTypedArrayMethod,i=[].sort;n("sort",()})),vu=(0,ne.a)((function(){var e=Fl(),t=xi(),n=ki(),i=Da(),r=e.aTypedArray;(0,e.exportTypedArrayMethod)("subarray",()})),_u=(0,ne.a)((function(){var e=jn(),t=Fl(),n=Wn(),i=e.Int8Array,r=t.aTypedArray,o=t.exportTypedArrayMethod,a=[].toLocaleString,s=[].slice,l=!!i&&n(();o("toLocaleString",(,n(()||!n(())})),bu=(0,ne.a)((function(){var e=Fl().exportTypedArrayMethod,t=Wn(),n=jn().Uint8Array,i=n&&n.prototype||{},r=[].toString,o=[].join;t(()&&(r=;var a=i.toString!=r;e("toString",r,a)})),xu=(0,ne.a)((function(){var e=Oi(),t=_i(),n=tr(),i=ri(),r=Wn(),o=t("Reflect","apply"),a=Function.apply;e({target:"Reflect",stat:!0,forced:!r((function(){o((function(){}))}))},{apply:)})),ku=(0,ne.a)((function(){var e=Oi(),t=_i(),n=tr(),i=ri(),r=Qn(),o=Ki(),a=So(),s=Wn(),l=t("Reflect","construct"),u=s((),c=!s((),h=u||c;e({target:"Reflect",stat:!0,forced:h,sham:h},{construct:)})),wu=(0,ne.a)((function(){var e=Oi(),t=Vn(),n=ri(),i=$n(),r=oi();e({target:"Reflect",stat:!0,forced:Wn()((),sham:!t},{defineProperty:)})),Su=(0,ne.a)((function(){var e=Oi(),t=ri(),n=ii().f;e({target:"Reflect",stat:!0},{deleteProperty:)})),Cu=(0,ne.a)((function(){var e=Oi(),t=Qn(),n=ri(),i=ei(),r=ii(),o=Rr();e({target:"Reflect",stat:!0},{get:)})),Tu=(0,ne.a)((function(){var e=Oi(),t=Vn(),n=ri(),i=ii();e({target:"Reflect",stat:!0,sham:!t},{getOwnPropertyDescriptor:)})),Eu=(0,ne.a)((function(){var e=Oi(),t=ri(),n=Rr();e({target:"Reflect",stat:!0,sham:!Ir()},{getPrototypeOf:function(e){return n(t(e))}})})),Du=(0,ne.a)((function(){Oi()({target:"Reflect",stat:!0},{has:)})),Iu=(0,ne.a)((function(){var e=Oi(),t=ri(),n=Object.isExtensible;e({target:"Reflect",stat:!0},{isExtensible:)})),Ru=(0,ne.a)((function(){Oi()({target:"Reflect",stat:!0},{ownKeys:Di()})})),Ou=(0,ne.a)((function(){var e=Oi(),t=_i(),n=ri();e({target:"Reflect",stat:!0,sham:!$r()},{preventExtensions:)})),Fu=(0,ne.a)((function(){var e=Oi(),t=ri(),n=Qn(),i=ei(),r=Wn(),o=oi(),a=ii(),s=Rr(),l=qn();e({target:"Reflect",stat:!0,forced:r(()},{set:)})),Au=(0,ne.a)((function(){var e=Oi(),t=ri(),n=Pr(),i=Zr();i&&e({target:"Reflect",stat:!0},{setPrototypeOf:)})),Pu=(0,ne.a)((function(e,t){rr(),or(),ar(),sr(),lr(),ur(),cr(),hr(),dr(),fr(),pr(),gr(),mr(),yr(),vr(),qr(),Yr(),Xr(),Kr(),Qr(),to(),io(),ro(),oo(),ao(),so(),uo(),co(),ho(),fo(),po(),go(),mo(),yo(),vo(),Gi(),bo(),xo(),ko(),wo(),Co(),To(),Eo(),Do(),jr(),Io(),Ro(),Hi(),Ao(),Mo(),Bo(),Lo(),Uo(),No(),jo(),Wo(),Go(),qo(),Yo(),Xo(),Jo(),Qo(),ea(),ta(),na(),ia(),ra(),oa(),aa(),la(),ua(),ca(),ha(),da(),fa(),pa(),va(),_a(),Ea(),Ia(),Aa(),Pa(),Za(),Ma(),za(),Ba(),La(),ja(),Wa(),Va(),zr(),Ya(),Xa(),Ka(),Ja(),Qa(),$a(),es(),ts(),ns(),is(),rs(),os(),as(),ls(),wa(),us(),cs(),hs(),ds(),ps(),ms(),ys(),vs(),bs(),ks(),ws(),Ss(),Cs(),Ts(),Es(),Ds(),Rs(),Os(),As(),Ps(),Zs(),zs(),Bs(),Us(),Ns(),js(),Ws(),Vs(),Gs(),qs(),Ys(),Xs(),Ks(),Js(),_r(),Qs(),$s(),el(),nl(),il(),ol(),al(),br(),yl(),vl(),_l(),kl(),wl(),Cl(),Tl(),Ol(),Al(),Pl(),Zl(),Nl(),Hl(),jl(),Wl(),Vl(),Gl(),ql(),Yl(),Xl(),Kl(),Jl(),Ql(),$l(),eu(),tu(),nu(),iu(),ru(),ou(),au(),su(),lu(),uu(),cu(),hu(),du(),fu(),pu(),gu(),mu(),yu(),vu(),_u(),bu(),xu(),ku(),wu(),Su(),Cu(),Tu(),Eu(),Du(),Iu(),Ru(),Ou(),Fu(),Au();var n=vi();t.exports=n})),Zu=(0,ne.a)((),Mu=(0,ne.a)((function(){var e,t,n,i=jn(),r=Zu(),o=Vo(),a=ai();for(n in r)if((t=(e=i[n])&&e.prototype)&&t.forEach!==o)try{a(t,"forEach",o)}catch(s){t.forEach=o}})),zu=(0,ne.a)((function(){var e,t,n,i,r=jn(),o=Zu(),a=ha(),s=ai(),l=zi(),u=l("iterator"),c=l("toStringTag"),h=a.values;for(i in o)if(t=(e=r[i])&&e.prototype){if(t[u]!==h)try{s(t,u,h)}catch(d){t[u]=h}if(t[c]||s(t,c,i),o[i])for(n in a)if(t[n]!==a[n])try{s(t,n,a[n])}catch(d){t[n]=a[n]}}})),Bu=(0,ne.a)((function(){var e=Oi(),t=jn(),n=hl();e({global:!0,bind:!0,enumerable:!0,forced:!t.setImmediate||!t.clearImmediate},{setImmediate:n.set,clearImmediate:n.clear})})),Lu=(0,ne.a)((function(){var e=Oi(),t=jn(),n=dl(),i=Yn(),r=t.process,o="process"==i(r);e({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:)})),Uu=(0,ne.a)((function(){var e=Oi(),t=jn(),n=Li(),i=[].slice,r=e({global:!0,bind:!0,forced:/MSIE .\./.test(n)},{setTimeout:r(t.setTimeout),setInterval:r(t.setInterval)})})),Nu=(0,ne.a)((function(e,t){var n=Wn(),i=zi(),r=hi(),o=i("iterator");t.exports=!n(()})),Hu=(0,ne.a)((function(e,t){var n=2147483647,i=/[^\0-\u007E]/,r=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,l=u=c=t.exports=)),ju=(0,ne.a)((function(e,t){var n=ri(),i=Ur();t.exports=)),Wu=(0,ne.a)((function(e,t){ha();var n=Oi(),i=_i(),r=Nu(),o=yi(),a=ll(),s=er(),l=Ar(),u=mi(),c=ul(),h=ei(),d=nr(),f=Wi(),p=ri(),g=Qn(),m=Ki(),y=qn(),v=ju(),_=Ur(),b=zi(),x=i("fetch"),k=i("Headers"),w=b("iterator"),S="URLSearchParams",C=S+"Iterator",T=u.set,E=u.getterFor(S),D=u.getterFor(C),I=/\+/g,R=Array(4),O=F=A=P=/[!'()~]|%20/g,Z={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},M=z=B=L=U=N=l((,"Iterator",(),H=j=H.prototype;a(j,{append:delete:get:getAll:has:set:sort:forEach:keys:function(){return new N(this,"keys")},values:function(){return new N(this,"values")},entries:,{enumerable:!0}),o(j,w,j.entries),o(j,"toString",(,{enumerable:!0}),s(H,S),n({global:!0,forced:!r},{URLSearchParams:H}),r||"function"!=typeof x||"function"!=typeof k||n({global:!0,enumerable:!0,forced:!0},{fetch:),t.exports={URLSearchParams:H,getState:E}})),Vu=(0,ne.a)((function(){zr();var e,t,n,i=Oi(),r=Vn(),o=Nu(),a=jn(),s=Yi(),l=yi(),u=ul(),c=ei(),h=Gr(),d=Nr(),f=Dr().codeAt,p=Hu(),g=er(),m=Wu(),y=mi(),v=a.URL,_=m.URLSearchParams,b=m.getState,x=y.set,k=y.getterFor("URL"),w=Math.floor,S=Math.pow,C="Invalid scheme",T="Invalid host",E="Invalid port",D=/[A-Za-z]/,I=/[\d+-.A-Za-z]/,R=/\d/,O=/^(0x|0X)/,F=/^[0-7]+$/,A=/^\d+$/,P=/^[\dA-Fa-f]+$/,Z=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,M=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,z=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,B=/[\u0009\u000A\u000D]/g,L=U=N=H=j={},W=h({},j,{" ":1,'"':1,"<":1,">":1,"`":1}),V=h({},W,{"#":1,"?":1,"{":1,"}":1}),G=h({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),q=Y={ftp:21,file:null,http:80,https:443,ws:80,wss:443},X=function(e){return c(Y,e.scheme)},K=J=Q=$=ee=te=ne=ie={},re={},oe={},ae={},se={},le={},ue={},ce={},he={},de={},fe={},pe={},ge={},me={},ye={},ve={},_e={},be={},xe={},ke={},we={},Se=function(t,n,i,r){var o,a,s,l,u=i||ie,h=0,f="",p=!1,g=!1,m=!1;for(i||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,n=n.replace(z,"")),n=n.replace(B,""),o=d(n);h<=o.length;){switch(a=o[h],u){case ie:if(!a||!D.test(a)){if(i)return C;u=oe;continue}f+=a.toLowerCase(),u=re;break;case re:if(a&&(I.test(a)||"+"==a||"-"==a||"."==a))f+=a.toLowerCase();else{if(":"!=a){if(i)return C;f="",u=oe,h=0;continue}if(i&&(X(t)!=c(Y,f)||"file"==f&&(K(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=f,i)return void(X(t)&&Y[t.scheme]==t.port&&(t.port=null));f="","file"==t.scheme?u=me:X(t)&&r&&r.scheme==t.scheme?u=ae:X(t)?u=ce:"/"==o[h+1]?(u=se,h++):(t.cannotBeABaseURL=!0,t.path.push(""),u=xe)}break;case oe:if(!r||r.cannotBeABaseURL&&"#"!=a)return C;if(r.cannotBeABaseURL&&"#"==a){t.scheme=r.scheme,t.path=r.path.slice(),t.query=r.query,t.fragment="",t.cannotBeABaseURL=!0,u=we;break}u="file"==r.scheme?me:le;continue;case ae:if("/"!=a||"/"!=o[h+1]){u=le;continue}u=he,h++;break;case se:if("/"==a){u=de;break}u=be;continue;case le:if(t.scheme=r.scheme,a==e)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query;else if("/"==a||"\\"==a&&X(t))u=ue;else if("?"==a)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query="",u=ke;else{if("#"!=a){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.path.pop(),u=be;continue}t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=we}break;case ue:if(!X(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,u=be;continue}u=de}else u=he;break;case ce:if(u=he,"/"!=a||"/"!=f.charAt(h+1))continue;h++;break;case he:if("/"!=a&&"\\"!=a){u=de;continue}break;case de:if("@"==a){p&&(f="%40"+f),p=!0,s=d(f);for(var y=0;y<s.length;y++){var v=s[y];if(":"!=v||m){var _=q(v,G);m?t.password+=_:t.username+=_}else m=!0}f=""}else if(a==e||"/"==a||"?"==a||"#"==a||"\\"==a&&X(t)){if(p&&""==f)return"Invalid authority";h-=d(f).length+1,f="",u=fe}else f+=a;break;case fe:case pe:if(i&&"file"==t.scheme){u=ve;continue}if(":"!=a||g){if(a==e||"/"==a||"?"==a||"#"==a||"\\"==a&&X(t)){if(X(t)&&""==f)return T;if(i&&""==f&&(K(t)||null!==t.port))return;if(l=L(t,f))return l;if(f="",u=_e,i)return;continue}"["==a?g=!0:"]"==a&&(g=!1),f+=a}else{if(""==f)return T;if(l=L(t,f))return l;if(f="",u=ge,i==pe)return}break;case ge:if(!R.test(a)){if(a==e||"/"==a||"?"==a||"#"==a||"\\"==a&&X(t)||i){if(""!=f){var b=parseInt(f,10);if(b>65535)return E;t.port=X(t)&&b===Y[t.scheme]?null:b,f=""}if(i)return;u=_e;continue}return E}f+=a;break;case me:if(t.scheme="file","/"==a||"\\"==a)u=ye;else{if(!r||"file"!=r.scheme){u=be;continue}if(a==e)t.host=r.host,t.path=r.path.slice(),t.query=r.query;else if("?"==a)t.host=r.host,t.path=r.path.slice(),t.query="",u=ke;else{if("#"!=a){$(o.slice(h).join(""))||(t.host=r.host,t.path=r.path.slice(),ee(t)),u=be;continue}t.host=r.host,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=we}}break;case ye:if("/"==a||"\\"==a){u=ve;break}r&&"file"==r.scheme&&!$(o.slice(h).join(""))&&(Q(r.path[0],!0)?t.path.push(r.path[0]):t.host=r.host),u=be;continue;case ve:if(a==e||"/"==a||"\\"==a||"?"==a||"#"==a){if(!i&&Q(f))u=be;else if(""==f){if(t.host="",i)return;u=_e}else{if(l=L(t,f))return l;if("localhost"==t.host&&(t.host=""),i)return;f="",u=_e}continue}f+=a;break;case _e:if(X(t)){if(u=be,"/"!=a&&"\\"!=a)continue}else if(i||"?"!=a)if(i||"#"!=a){if(a!=e&&(u=be,"/"!=a))continue}else t.fragment="",u=we;else t.query="",u=ke;break;case be:if(a==e||"/"==a||"\\"==a&&X(t)||!i&&("?"==a||"#"==a)){if(ne(f)?(ee(t),"/"==a||"\\"==a&&X(t)||t.path.push("")):te(f)?"/"==a||"\\"==a&&X(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&Q(f)&&(t.host&&(t.host=""),f=f.charAt(0)+":"),t.path.push(f)),f="","file"==t.scheme&&(a==e||"?"==a||"#"==a))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==a?(t.query="",u=ke):"#"==a&&(t.fragment="",u=we)}else f+=q(a,V);break;case xe:"?"==a?(t.query="",u=ke):"#"==a?(t.fragment="",u=we):a!=e&&(t.path[0]+=q(a,j));break;case ke:i||"#"!=a?a!=e&&("'"==a&&X(t)?t.query+="%27":t.query+="#"==a?"%23":q(a,j)):(t.fragment="",u=we);break;case we:a!=e&&(t.fragment+=q(a,W))}h++}},Ce=Te=Ce.prototype,Ee=De=Ie=Re=function(){return k(this).username},Oe=function(){return k(this).password},Fe=Ae=function(){var e=k(this).host;return null===e?"":H(e)},Pe=Ze=Me=function(){var e=k(this).query;return e?"?"+e:""},ze=function(){return k(this).searchParams},Be=Le=r&&s(Te,{href:Le(Ee,(),origin:Le(De),protocol:Le(Ie,(),username:Le(Re,(function(e){var t=k(this),n=d(String(e));if(!J(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=q(n[i],G)}})),password:Le(Oe,(),host:Le(Fe,(function(e){var t=k(this);t.cannotBeABaseURL||Se(t,String(e),fe)})),hostname:Le(Ae,(),port:Le(Pe,(),pathname:Le(Ze,(),search:Le(Me,(),searchParams:Le(ze),hash:Le(Be,()}),l(Te,"toJSON",(function(){return Ee.call(this)}),{enumerable:!0}),l(Te,"toString",(function(){return Ee.call(this)}),{enumerable:!0}),v&&(t=v.createObjectURL,n=v.revokeObjectURL,t&&l(Ce,"createObjectURL",(function(e){return t.apply(v,arguments)})),n&&l(Ce,"revokeObjectURL",(function(e){return n.apply(v,arguments)}))),g(Ce,"URL"),i({global:!0,forced:!o,sham:!r},{URL:Ce})})),Gu=(0,ne.a)((function(){Oi()({target:"URL",proto:!0,enumerable:!0},{toJSON:)})),qu=(0,ne.a)((function(e,t){Mu(),zu(),Bu(),Lu(),Uu(),Vu(),Gu(),Wu();var n=vi();t.exports=n})),Yu=(0,ne.a)((function(e,t){Pu(),qu();var n=vi();t.exports=n})),Xu=(0,ne.a)((function(e,t){var n=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";ry{l({},"")}catch(O){l=wrap=u;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={};function m(){}function y(){}function v(){}var _={};_[o]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(I([])));x&&x!==n&&i.call(x,o)&&(_=x);var k=v.prototype=m.prototype=Object.create(_);.prototype=k.constructor=v,v.constructor=y,y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=e.mark=e.awrap=w(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=w(k),l(k,s,"Generator"),k[o]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=e.values=I,D.prototype={constructor:D,reset:stop:dispatchException:abrupt:complete:finish:catch:delegateYield:,e}("object"===typeof t?t.exports:{});try{regeneratorRuntime=n}catch(i){Function("r","regeneratorRuntime = r")(n)}})),Ku=(0,ne.a)((function(e,t){var n=jn(),i=nr(),r=Function.call;t.exports=)),Ju=(0,ne.a)((function(e,t){Uo();var n=Ku();t.exports=n("Array","find")})),Qu=(0,ne.a)((function(e,t){var n=Ju();t.exports=n})),$u=(0,ne.a)((function(e,t){Qo();var n=Ku();t.exports=n("Array","map")})),ec=(0,ne.a)((function(e,t){var n=$u();t.exports=n}));"undefined"===typeof Promise&&(Ln().enable(),self.Promise=Un()),"undefined"!==typeof window&&Nn(),Object.assign=Hn(),Er(),Vr(),Yu(),Xu();(0,ne.b)(Qu()),(0,ne.b)(ec())},29845:function(e,t,n){"use strict";var i=n(71843),r=n(47313);ar a=60106,s=60107,l=60108,u=60114,c=60109,h=60110,d=60112,f=60113,p=60120,g=60115,m=60116,y=60121,v=60117,_=60119,b=60129,x=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;a=k("react.portal"),s=k("react.fragment"),l=k("react.strict_mode"),u=k("react.profiler"),c=k("react.provider"),h=k("react.context"),d=k("react.forward_ref"),f=k("react.suspense"),p=k("react.suspense_list"),g=k("react.memo"),m=k("react.lazy"),y=k("react.block"),v=k("react.fundamental"),_=k("react.scope"),b=k("react.debug_trace_mode"),x=k("react.legacy_hidden")}ar S=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C={};or(var E=new Uint16Array(16),D=0;15>D;D++)E[D]=D+1;E[15]=0;var I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R=Object.prototype.hasOwnProperty,O={},F={};r Z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Z[e]=new P(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Z[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Z[e]=new P(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Z[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Z[e]=new P(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){Z[e]=new P(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((),["rowSpan","start"].forEach((function(e){Z[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)}));var M=/[\-:]([a-z])/g;accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(M,z);Z[t]=new P(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(M,z);Z[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((),["tabIndex","crossOrigin"].forEach((function(e){Z[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)})),Z.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(();var B=/["'&<>]/;r N="function"===typeof Object.is?Object.is:H=null,j=null,W=null,V=!1,G=!1,q=null,Y=0;re(){}var oe=null,ae={readContext:useContext:useMemo:ne,useReducer:te,useRef:useState:function(e){return te(ee,e)},useLayoutEffect:function(){},useCallback:useImperativeHandle:re,useEffect:re,useDebugValue:re,useDeferredValue:useTransition:useOpaqueIdentifier:useMutableSource:,se="http://www.w3.org/1999/xhtml";ar ue={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ce=i({menuitem:!0},ue),he={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];Object.keys(he).forEach(();var fe=/([A-Z])/g,pe=/^ms-/,ge=r.Children.toArray,me=S.ReactCurrentDispatcher,ye={listing:!0,pre:!0,textarea:!0},ve=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,_e={},be={};var xe=Object.prototype.hasOwnProperty,ke={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};r Ce=);t.renderToStaticMarkup=,84389:59767:53115:function(e,t,n){"use strict";n.d(t,{f6:function(){return De},iv:function(){return me},ZP:function(){return Ae},F4:function(){return Fe}});var i=n(96214),r=n(47313),o=n(59767),a=n.n(o);var s=l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},u=n(81097),c=n(67861),h=n.n(c);ar f=p=g=Object.freeze([]),m=Object.freeze({}); b="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.SC_ATTR)||"data-styled",x="undefined"!=typeof window&&"HTMLElement"in window,k=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OAUTH:"https://photobucket.com",REACT_APP_CLOUDWATCH_IDENTITY_POOL:"us-east-1:cfc568d8-7e86-4de4-96e7-5cdc3b872ef9",REACT_APP_FIREBASE_APPCHECK_DEBUG_TOKEN:"false",REACT_APP_ENVIRONMENT:"production",REACT_APP_CLOUDWATCH_ID:"88eeef77-7b5c-4b1b-9a1d-b6bf442282e6",REACT_APP_CLOUDWATCH_UNAUTH_ROLE:"arn:aws:iam::700469014627:role/RUM-Monitor-us-east-1-700469014627-8049555579361-Unauth",REACT_APP_VERSION:"1.173.0",REACT_APP_NAME:"photobucket-web"}.SC_DISABLE_SPEEDY)));ar S=),C=new Map,T=new Map,E=1,D=I=function(e){return T.get(e)},R=O="style["+b+'][data-styled-version="5.3.10"]',F=new RegExp("^"+b+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),A=P=Z=function(){return n.nc},M=z=),B=),L=),U=x,N={isServer:!x,useCSSOMInjection:!k},H=),j=/(a)(d)/gi,W=ar G=q=ar X=q("5.3.10"),K=),J=/^\s*\/\/.*$/gm,Q=[":","[",".","#"];ar ee=r.createContext(),te=(ee.Consumer,r.createContext()),ne=(te.Consumer,new H),ie=$();function re(){return(0,r.useContext)(ee)||ne}r se=),le=/([A-Z])/,ue=/([A-Z])/g,ce=/^ms-/,he=ar fe=ar ge=ew Set;var ye=ve=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,_e=/(^-|-$)/g;ar xe=ar we=Se=r Ee=r.createContext();Ee.Consumer;ar Ie={};ar Oe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(();!););var Ae=Oe}}]);