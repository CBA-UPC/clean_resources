(()=>{var t={757:666:,e={};.n=n.d=n.o=(()=>{"use strict";n(757),c=n.n(s);const u="amEventSid",l="amEventSid_cookieless",d="_recordTime",h="amUtmSource",p="amUtmMedium",v="amUtmContent",f="amUtmCampaign",m="amUtmSCP",g="_ama",w="_am_id",y="/";function _(t){let e=[];try{e=document.cookie.split(";")}catch(t){}const n=`${t}=`;for(let t of e)if(t=t.trim(),t.substring(0,n.length)===n)return t.substring(n.length);return""}function b(t,e,n){let r=`${t}=${e}`;void 0!==(null==n?void 0:n.path)&&(r+=`;path=${n.path}`),void 0!==(null==n?void 0:n.domain)&&(r+=`;domain=${n.domain}`),void 0!==(null==n?void 0:n.maxAge)&&(r+=`;max-age=${n.maxAge}`),(null==n?void 0:n.secure)&&(r+=";secure"),void 0!==(null==n?void 0:n.sameSite)&&(r+=`;samesite=${n.sameSite}`);try{document.cookie=r}catch(t){}}function k(t,e){(function(t){let e=[];try{e=document.cookie.split(";")}catch(t){}const n=`${t}=`;for(let t of e)if(t=t.trim(),t.substring(0,n.length)===n)return!0;return!1})(t)&&b(t,"deleted",Object.assign({},e,{expires:new Date("1970-01-01")}))}var S;function x(){let t="";try{t=URL.createObjectURL(new Blob)}catch(t){}const e=t.toString();try{URL.revokeObjectURL(t)}catch(t){}const n=e.split(/[:/]/g).pop();return n?n.toLowerCase():)}S||(S={}));var L,C;function O(t,e){var n;const r=null!==(n=null==e?void 0:e.expires)&&void 0!==n?n:1800,o=Date.now();let i=sessionStorage.getItem(t);const a=Number(sessionStorage.getItem(t+d));return i&&(!1===r||o-a<r)||(i=x(),sessionStorage.setItem(t,i),sessionStorage.setItem(t+d,`${o}`)),i}function T(){return t=this,e=void 0,r=function*(){return new Promise((t=>{"complete"===document.readyState?t(!0):document.addEventListener("readystatechange",()}))},new((n=void 0)||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r}unction q(t){return!t||isNaN(parseFloat(t))?0:Math.round(100*parseFloat(t))}unction P(t){const e=localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(t){return null}return null}||(L={})),function(t){t.cart="/cart.js",t.cartCheckout="/cart"}(C||(C={}));const A=[{page_type:"home",regexp:/^\/$/,page_sn:L.Home},{page_type:"collections",regexp:/^\/collections\/((?!products\/).)*$/,page_sn:L.Collections},{page_type:"collection",regexp:/\/collections\/((?!products\/).)*$/,page_sn:L.Collections},{page_type:"searchresults",regexp:/.*a?\/search$/,page_sn:L.SearchResults},{page_type:"product",regexp:/^\/products\/[^/]+$/,page_sn:L.Product},{page_type:"",regexp:/^\/cart$/,page_sn:L.Cart},{page_type:"",regexp:/.*\/checkouts\/.+thank_you/,page_sn:L.ThankYou}];function M(){var t,e,n;const r=window.location.pathname,o=null===(n=null===(e=null===(t=window.ShopifyAnalytics)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.page)||void 0===n?void 0:n.pageType;return A.find((t=>t.regexp.test(r)||o===t.page_type))||{page_type:o,regexp:/.+/,page_sn:""}}function $(){var t,e,n;const r=(null===(n=null===(e=null===(t=window.ShopifyAnalytics)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.page)||void 0===n?void 0:n.customerId)||"";return{userId:r,isLogged:Boolean(r)}}var K;function(t){t.woo="woocommerce",t.shopify="shopify"}(K||(K={}));const Q=U=()=>{var t,e;const{hostname:n}=window.location;let r="";return N()&&(r=(null===(e=null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.shop)||void 0===e?void 0:e.split(".")[0])||n.includes("myshopify.com")&&n.split(".")[0]),Q(),r};function B(){var t,e,n,r,o;return e=this,n=void 0,o=function*(){return N()?M().page_sn===L.ThankYou||("function"==typeof(null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.loadFeatures)?new Promise(((t,e)=>{window.Shopify.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],(function(n){n?e(n):t(F())}))})):F()):!(!document.querySelector('meta[name="as-btp"][content="true"]')&&"object"!=typeof window.AM_CONSENT_SDK)||new Promise(((t,e)=>{fetch(function(t){if(t||(t="production"),!t)throw new Error("APP_ENV not found");const e={testing:"bff-api.aftership.io",staging:"bff-api.aftership.com",production:"bff-api.aftership.com"};return`https://${e[t||"testing"]||e.testing}/business/compliance/v1/requirement`}(),{}).then((t=>t.json())).then((e=>{const n=e.data.ccpa,r=e.data.gdpr,o=e.data.uk_gdpr;t(!(n||r||o))})).catch(()}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}))}function F(){var t,e,n,r;let o=!1;"function"==typeof(null===(e=null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.customerPrivacy)||void 0===e?void 0:e.userDataCanBeSold)&&(o=window.Shopify.customerPrivacy.userDataCanBeSold());let i=!1;return"function"==typeof(null===(r=null===(n=null===window||void 0===window?void 0:window.Shopify)||void 0===n?void 0:n.customerPrivacy)||void 0===r?void 0:r.userCanBeTracked)&&(i=window.Shopify.customerPrivacy.userCanBeTracked()),i&&o}var H=function t(){r(this,t),a(this,"state",{}),a(this,"appEntries",{}),a(this,"eventMap",new WeakMap),a(this,"singleEvent",{})},X="dataCollect",z="dataCollectByCookieless";function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cookie",e="cookieless"!==t?X:z;return window.amStorefrontKit[e]=window.amStorefrontKit[e]||new H}function Y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cookie",e="cookieless"!==t?X:z,n=window.amStorefrontKit[e];return n}r V,Z=N()?K.shopify:Q()?K.woo:"",tt=U(),et={};function nt(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cookie",o=Y(r);if(o){var i=o.eventMap,a=i.get(t);a||(a={data:[],sentDataLen:-1,sentAppLen:-1},i.set(t,a)),a.eventId||(a.eventId=x());var s=Object.keys(o.state).length;if(a.sentDataLen!==a.data.length||a.sentAppLen!==s){a.sentDataLen=a.data.length,a.sentAppLen=s;var c=ot(a,o);null===(e=window.amStorefrontKit.dataLayer)||void 0===e||e.push([t.type,c]);var u=rt(c);null===(n=o.collector)||void 0===n||n.pushEvent(t.type,u)}}}function rt(t){var e=[],n={};for(var r in t){var o=t[r];if("object"===D(o)){var i=e.length,a=Array.isArray(o);for(var s in e.push(r),o){var c=parseInt(s,10);if(!a||!isNaN(c)&&"".concat(c)===s){var u=void 0,l=void 0;"object"===D(o[s])?(u="".concat(i).concat(s,"+"),l=JSON.stringify(o[s])):(u="".concat(i).concat(s),l=o[s]),n[u]=l}}}else"_"===r[0]?n["-".concat(r)]=o:n[r]=o}return n.km=e.join(","),n}function ot(t,e){var n,r,o,i=M(),a=[],s={},c={},u=J(t.data);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(l.ecommerce&&!c.ecommerce&&(c.ecommerce=l.ecommerce),l.params&&!c.params&&(c.params=l.params),l.page&&!c.page&&(c.page=l.page),l.user_id&&!c.user_id&&(c.user_id=l.user_id),l.promotion){var d=Object.assign({},l.promotion);a.push(d),d.app_name&&(s[d.app_name]=!0)}}}catch(t){u.e(t)}finally{u.f()}if(et.promotions){var g,y=J(et.promotions);try{for(y.s();!(g=y.n()).done;){var b=g.value;b.app_name&&!0!==s[b.app_name]&&a.push(b)}}catch(t){y.e(t)}finally{y.f()}}a.length>0&&(c.promotions=a);var k,S={kit:"3.3",event_time:(k=(new Date).getTime(),"number"==typeof k?k:0),platform:"WEB",user_id:$().userId,session_id:e.collector.getSessionId(),log_id:t.eventId||"",environment:"production",product_code:"automizely",collector:"GTAG",app_connections:{app_platform:Z||et.app_platform||"",app_key:tt||et.app_key||"",app_names:Object.keys(e.state),__organization_id:et.__organization_id||""},page:Object.assign(j({page_referrer:document.referrer,page_location:window.location.href,page_id:e.pageId||"",page_type:null!==(n=null==i?void 0:i.page_type)&&void 0!==n?n:"",page_sn:null!==(r=null==i?void 0:i.page_sn)&&void 0!==r?r:"",utm_source:sessionStorage.getItem(h),utm_medium:sessionStorage.getItem(p),utm_content:sessionStorage.getItem(v),utm_campaign:sessionStorage.getItem(f),_sc_p:sessionStorage.getItem(m)}),c.page)},x=_(w);return x&&(S._am_id=x),delete c.page,Object.assign(S,c)}function it(t){var e;for(e in t)"promotion"===e?t.promotion&&(et.promotions=et.promotions||[],et.promotions.push(t.promotion)):et[e]||(et[e]=t[e])}class at{istener(t){const e=[];for(let n of this.listeners){const[r,o]=n;r.call(this,t),o.once||e.push(n)}this.listeners=e}}class st extends EventTarget{ddEventListener(t,e,n){if("object"==typeof n&&n.finally&&e){if("object"==typeof e&&e.handleEvent&&(e=e.handleEvent),"function"==typeof e){let r=this.finalListeners[t];return r?super.removeEventListener(t,r.listener):r=this.finalListeners[t]=new at,r.listeners.push([e,n]),super.addEventListener(t,r.listener)}return}const r=super.addEventListener(t,e,n);return this.finalListeners[t]&&(super.removeEventListener(t,this.finalListeners[t].listener),super.addEventListener(t,this.finalListeners[t].listener)),r}V||(V={}));class ct extends Event{constructor(t,e){super(t),this.context=e}}class ut extends st{}class lt{constructor(){this.eventTarget=new ut,window.addEventListener("beforeunload",(()=>{this.eventTarget.dispatchEvent(new ct(V.page_leave,{data:null}))}))}}const dt={"2021 BlackFriday Meinekette":".site-nav.site-navigation"},ht=N()?class extends lt{constructor(){var t,e,n;super(),this.isSendViewItem=!1,this.currencyCode=null===(n=null===(e=null===(t=window)||void 0===t?void 0:t.Shopify)||void 0===e?void 0:e.currency)||void 0===n?void 0:n.active,this.eventTarget=new ut,this.caches=new Map,this.queue={page_sn:"",items:[]},this.intersectionObserver=new IntersectionObserver(this.intersectionCallback.bind(this),{threshold:.7}),this.mutationObserver=new MutationObserver(this.mutationCallback.bind(this)),T().then((()=>{this.mutationCallback(),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0,attributes:!0})}))}mutationCallback(){var t,e,n,r,o,i,a,s,c,u,l;const d=null===(n=null===(e=null===(t=null===window||void 0===window?void 0:window.amStorefrontKit)||void 0===t?void 0:t.eventData)||void 0===e?void 0:e.ecommerce_item)||void 0===n?void 0:n.byUrl;if(this.queue.page_sn=null!==(o=null===(r=M())||void 0===r?void 0:r.page_sn)&&void 0!==o?o:"",this.queue.page_sn===L.Product&&!this.isSendViewItem){this.isSendViewItem=!0;const{product:t}=null===(a=null===(i=window)||void 0===i?void 0:i.ShopifyAnalytics)||void 0===a?void 0:a.meta,{id:e,variants:n}=t,r=new URLSearchParams(location.search).get("variant"),o=r?parseInt(r,10):void 0;let s=o?n.find((t=>t.id===o)):n[0];s||(s={}),s.quantity=1;const c={item_url:window.location.href,item_name:s.name,item_id:`${e||""}`,price:q(s.price),currency_code:this.currencyCode};this.queue.items.push(c),this.debounceSendEventData()}let h=Array.from(document.querySelectorAll('a[href*="/products/"]'));const p=new RegExp(`^(${window.location.origin}${(null===(s=window.Shopify)||void 0===s?void 0:s.shop)?`|https?://${null===(c=window.Shopify)||void 0===c?void 0:c.shop}`:""}|/products|/collections)\\S+`),v=dt[null===(l=null===(u=null===window||void 0===window?void 0:window.Shopify)||void 0===u?void 0:u.theme)||void 0===l?void 0:l.name];let f=[];if(v&&(f=Array.from(document.querySelectorAll(`${v} a[href*="/products/"]`))),h=h.filter((t=>p.test(t.href)&&!this.caches.has(t.href)&&!f.some((e=>e===t)))),0!==h.length){for(let t of h)this.caches.set(t.href,!1);h.forEach((t=>{t.addEventListener("click",(t=>{const e=Object.assign({},this.queue),n=t.currentTarget.href;e.items=[Object.assign({},null==d?void 0:d[n],{item_url:n.startsWith("/")?window.location.origin+n:n,currency_code:this.currencyCode})];const r=new ct(V.click_item,{data:e});this.eventTarget.dispatchEvent(r)}))})),h.forEach(()}}intersectionCallback(t){var e,n,r;const o=null===(r=null===(n=null===(e=null===window||void 0===window?void 0:window.amStorefrontKit)||void 0===e?void 0:e.eventData)||void 0===n?void 0:n.ecommerce_item)||void 0===r?void 0:r.byUrl,i=t.filter((t=>{const e=(t.target.getAttribute("href")||"").split("#");return t.isIntersecting&&!this.caches.get(null==e?void 0:e[0])})).map((t=>{var e;return null===(e=(t.target.getAttribute("href")||"").split("#"))||void 0===e?void 0:e[0]})),a=Array.from(new Set(i)).map((t=>{const e=t.split("?")[0],n=e.replace(window.location.origin,""),r=o&&Object.keys(o).find(();let i=r&&(null==o?void 0:o[r]);return i&&(i.item_id&&(i.item_id=`${i.item_id||""}`),i.price&&(i.price=q(i.price)),i.compare_at_price&&(i.compare_at_price=q(i.compare_at_price))),this.caches.set(t,!0),Object.assign({},i,{currency_code:this.currencyCode,item_url:t.startsWith("/")?window.location.origin+t:t})}));a.length&&(this.queue.items.push(...a),this.debounceSendEventData())}debounceSendEventData(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{const t=new ct(V.view_item,{data:Object.assign({},this.queue)});this.eventTarget.dispatchEvent(t),this.queue.items=[]}),500)}}:lt;var pt,vt,ft;!function(t){t[void 0]="undefined",t.cart="cart",t.add_cart="add_cart",t.checkout="checkouts.json"}(pt||(pt={})),function(t){t.XMLHttpRequest="XMLHttpRequest",t.XDomainRequest="XDomainRequest",t.fetch="fetch"}(vt||(vt={})),function(t){t.respond="respond",t.open="open",t.error="error"}(ft||(ft={}));const mt={errorEventIsReliable:!0};class gt extends Event{constructor(t,e){super(t),this.context=e}}class wt extends st{}function yt(t,e,n){if("function"==typeof t[e]){const r=t[e];t[e]=function(...e){r.apply(t,e),n.apply(t,e)}}else t[e]=n}function _t(){return"object"==typeof window.amStorefrontKit&&window.amStorefrontKit.hRequestEventTarget||(window.amStorefrontKit=window.amStorefrontKit||{},function(t){if(window.XMLHttpRequest){const e=window.XMLHttpRequest.prototype.open;"onerror"in window.XMLHttpRequest.prototype&&"onabort"in window.XMLHttpRequest.prototype&&"ontimeout"in window.XMLHttpRequest.prototype||(mt.errorEventIsReliable=!1),window.XMLHttpRequest.prototype.open=function(...n){const[r,o]=n,i={method:r,url:o,reqFn:vt.XMLHttpRequest};t.dispatchEvent(new gt(ft.open,i));const a=()=>{if(4===this.readyState&&this.status){i.response={type:this.responseType,status:this.status};let e=!1;try{e="string"==typeof this.responseText}catch(t){}if(e)try{i.response.json=JSON.parse(this.responseText)}catch(t){i.response.text=this.responseText}t.dispatchEvent(new gt(ft.respond,i))}},s=e=>{i.error=new Error(`XMLHttpRequest ${e.type}`),t.dispatchEvent(new gt(ft.error,i))};return this.addEventListener?(this.addEventListener("readystatechange",a),this.addEventListener("abort",s),this.addEventListener("error",s),this.addEventListener("timeout",s)):(yt(this,"onreadystatechange",a),yt(this,"onabort",s),yt(this,"onerror",s),yt(this,"ontimeout",s)),e.apply(this,n)}}if(window.fetch){const e=window.fetch.bind(window);window.fetch=function(n,...r){const o=e(n,...r),i={method:"",url:"",reqFn:vt.fetch};return"string"==typeof n?(i.method="GET",i.url=n):(i.method=n.method,i.url=n.url),t.dispatchEvent(new gt(ft.open,i)),o.then(().then((t=>(i.response={headers:t.headers,type:t.type,status:t.status},t.text()))).then((e=>{try{i.response.json=JSON.parse(e)}catch(t){i.response.text=e}t.dispatchEvent(new gt(ft.respond,i))})).catch((e=>{i.error=e,t.dispatchEvent(new gt(ft.error,i))})),o}}}(window.amStorefrontKit.hRequestEventTarget=new wt)),window.amStorefrontKit.hRequestEventTarget}var bt,kt;bt||(bt={})),kt||(kt={}));r Lt=const Ct=N()?class{constructor(){this.getCartOpened=!1,this.hReqEventTarget=new wt,this.cachedCart=null,this.checkoutDomCache=[],this.eventTarget=new Et,this.initCartWatch();const t=this.hReqEventTarget=_t();t.addEventListener(ft.open,(t=>{this.getRequestType(t.context.url)===pt.cart&&(this.getCartOpened=!0)})),t.addEventListener(ft.respond,(t=>{var e;switch(this.getRequestType(t.context.url)){case pt.cart:this.getCartOpened=!1,this.cacheCartData(null===(e=t.context.response)||void 0===e?void 0:e.json);break;case pt.add_cart:this.getCart({fromCache:!1})}})),t.addEventListener(ft.error,(t=>{this.getRequestType(t.context.url)===pt.cart&&(this.getCartOpened=!1)})),this.getCartOpened||this.getCart({fromCache:!1})}cacheCartData(t){const e=this.formatCartData(t),n=P(bt.cart);if(function(t,e){var n,r;if(!St(t)&&!St(e))return!1;if(!(null===(n=null==t?void 0:t.items)||void 0===n?void 0:n.length)&&!(null===(r=null==e?void 0:e.items)||void 0===r?void 0:r.length))return!1;if(!St(t)||!St(e)||t.items.length!==e.items.length||t.currency!==e.currency)return!0;const o=t=>t?t.items.map((t=>{const{item_list_name:e}=t,n=t,["item_list_name"]);return Object.assign({},n)})):t;return Object.assign(t,{items:o(t)}),Object.assign(e,{items:o(e)}),JSON.stringify(t)!==JSON.stringify(e)}(n,e)){this.cachedCart=e,e?I(bt.cart,e):R(bt.cart),null==e||e.items.forEach((t=>{t.is_updated=!(null==n?void 0:n.items.some(())}));const t={data:e};this.eventTarget.dispatchEvent(new xt(kt.cart_updated,t))}}getRequestType(t){return/^(\/cart\.js|\/cart\/(change|update|clear)(\.js)?)($|\?)/.test(t)?pt.cart:/^(\/cart\/add(\.js)?)($|\?)/.test(t)?pt.add_cart:/^(\/wallets\/checkouts(\.json)?)($|\?)/.test(t)?pt.checkout:pt.undefined}formatCartData(t){return St(t)?{currency:t.currency,token:t.token,items:t.items.map(((e,n)=>{const r=this.formatItemData(e,n);return r&&Object.assign(r,{currencyCode:t.currency}),r}))}:null}formatItemData(t,e){var n,r,o,i;return(i=t)&&"number"==typeof(null==i?void 0:i.product_id)?{item_name:t.product_title||"",item_id:`${t.product_id||""}`,item_variant_id:`${t.variant_id||""}`,quantity:t.quantity,price:q(t.price),currency_code:(null===(o=null===(r=null===(n=window)||void 0===n?void 0:n.Shopify)||void 0===r?void 0:r.currency)||void 0===o?void 0:o.active)||"",item_brand:t.vendor||"",item_category:"",item_list_name:window.document.title||"",idx:void 0!==e?e+1:0,item_url:t.url}:null}getCart(t){return(null==t?void 0:t.fromCache)?Promise.resolve(P(bt.cart)):(this.getCartOpened||(e=C.cart,n={body:void 0},window.fetch(e,n)),new Promise(((t,e)=>{const n=()=>{this.hReqEventTarget.removeEventListener(ft.error,r),t(this.cachedCart)},r=t=>{this.hReqEventTarget.removeEventListener(ft.respond,n),e(t.context.error)};this.hReqEventTarget.addEventListener(ft.respond,n,{once:!0}),this.hReqEventTarget.addEventListener(ft.error,r,{once:!0})})));var e,n}initCartWatch(){return Lt(this,void 0,void 0,(function*(){yield T();const t=M();(null==t?void 0:t.page_sn)===L.ThankYou&&this.thankYouCheckout(),this.buyItNowCheckout(),this.cartCheckout(),this.watchCartForm().then(()}))}thankYouCheckout(){var t;return Lt(this,void 0,void 0,(function*(){const{customer_id:e,order_id:n,total_price:r,total_tax:o,shipping_rate:i,currency:a,discount:s,line_items:c,token:u}=(null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.checkout)||{},{price:l}=i||{},d={order_id:n,total_value:Math.round(100*r),total_tax:Math.round(100*o),total_shipping:Math.round(100*l),currency_code:a,items:[],user_id:e,token:u};if(s){const{code:t,rate:e,amount:n}=s;d.coupon={coupon_code:t,discount_rate:e,discount_amount:Math.round(100*n)}}d.items=null==c?void 0:c.map((t=>({item_name:t.title,item_id:`${t.product_id||""}`,price:Math.round(100*t.compare_at_price),pay_value:Math.round(100*t.price),item_brand:t.vendor,item_variant_id:t.variant_id,quantity:t.quantity})));const h=new xt(kt.purchase,{data:d});this.eventTarget.dispatchEvent(h)}))}dispatchCheckoutEvent(t){return Lt(this,void 0,void 0,(function*(){const e=yield this.getCart({fromCache:!0});e&&this.updateQueue(kt.checkout,{data:e});const n=new xt(kt.checkout,{data:e});t&&Object.defineProperty(n,"target",{value:t,enumerable:!0}),this.eventTarget.dispatchEvent(n)}))}cartCheckout(){let t=[],e=Array.from(document.querySelectorAll('[name="checkout"][type="submit"],form[action^="/checkout"] [type="submit"]'));e=e.filter((),e.length&&t.push(...e);const n=document.querySelectorAll('a[href^="/checkout"]');return n.length&&t.push(...n),t=t.filter((t=>!this.checkoutDomCache.some((e=>t===e)))),this.checkoutDomCache.push(...e),t.map((t=>{t.addEventListener("click",this.dispatchCheckoutEvent.bind(this,t),!0)})),t.length}buyItNowCheckout(){Promise.all([this.buyItNowClick(),this.buyItNowToken()]).then((([t,e])=>{t.data.token=e,this.updateQueue(kt.checkout,{data:t.data});const n=new xt(kt.checkout,{data:t.data});t.target&&Object.defineProperty(n,"target",{value:t.target,enumerable:!0}),this.eventTarget.dispatchEvent(n)}))}buyItNowToken(){return new Promise((t=>{(this.hReqEventTarget=_t()).addEventListener(ft.respond,(e=>{var n,r,o,i;if(this.getRequestType(e.context.url)===pt.checkout){const a=null!==(i=null===(o=null===(r=null===(n=e.context.response)||void 0===n?void 0:n.headers)||void 0===r?void 0:r.get("location"))||void 0===o?void 0:o.replace(/\S*\/(\S*).json/,"$1"))&&void 0!==i?i:"";t(a)}}))}))}buyItNowClick(){return new Promise((t=>{const e=Array.from(document.querySelectorAll('[data-testid=Checkout-button],[data-checkout="checkout"]')).filter((t=>!this.checkoutDomCache.some(()));this.checkoutDomCache.push(...e),null==e||e.map((e=>{e.addEventListener("click",(()=>{var n,r;const{currency:o,product:i}=null===(r=null===(n=window)||void 0===n?void 0:n.ShopifyAnalytics)||void 0===r?void 0:r.meta,{id:a,variants:s}=i||{},c=new URLSearchParams(location.search).get("variant"),u=c?parseInt(c,10):void 0;let l=u?null==s?void 0:s.find(():null==s?void 0:s[0];l||(l={}),l.quantity=1;const d={token:"",currency:o,items:[{item_name:l.name,item_id:`${a||""}`,price:q(l.price),currency_code:o,item_variant_id:l.id,quantity:l.quantity}]};t({data:d,target:e})}),!0)}))}))}updateQueue(t,e){const n=P(bt.pendingQueue)||[];n.push({event:t,data:e}),I(bt.pendingQueue,n)}watchCartForm(){return new Promise((t=>{const e=()=>{this.buyItNowCheckout();let t=Array.from(document.querySelectorAll("form[action^='/cart'],form[action^='/checkout']")).filter((t=>/^\/cart$|^\/cart\?\S*/.test(t.getAttribute("action")||"")||/^\/checkout$|^\/checkout\?\S*/.test(t.getAttribute("action")||"")));for(let e of t)n.observe(e)},n=new IntersectionObserver((e=>{e.some(()&&t(!0)}),{threshold:.3}),r=new MutationObserver(e);e(),r.observe(document.body,{childList:!0,subtree:!0,attributes:!0})}))}}:class{tCart;function Ot(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cookie",r=Y(n);if(!r)throw new Error("Should call initDataCollect() first.");var o=r.eventMap,i=o.get(t);i||(i={data:[],sentDataLen:-1,sentAppLen:-1},o.set(t,i)),i.data.push(Object.assign({},e))}r qt={_:"ep",event_time:"epn"},It=function(){function t(e){var n=this;r(this,t),a(this,"maxDataQueueCount",10),a(this,"maxDataQueueSize",16e3),a(this,"flushIntervalMs",1250),a(this,"userPseudoId",void 0),a(this,"options",void 0),a(this,"maxQueryDataLength",void 0),a(this,"dataQueue",[]),a(this,"dataQueueSize",0),a(this,"reqBase",void 0),a(this,"reqProductShortCode",""),a(this,"flushing",!1),this.options=e,this.userPseudoId=this.isCookieless?null:function(){const t=function(){const t=_("_ga");let e=t.indexOf(".");if(e>-1&&(e=t.indexOf(".",e+1),e>-1)){const n=t.substring(e+1);return n.length>=12?n:""}return""}()||_(g)||x();return b(g,t,{path:y,maxAge:31536e3}),t}(),this.reqBase=this.generateReqBase(e.userTrackingMechanism),this.maxQueryDataLength=2048-this.reqBase.length-1,this.activeQueue(),this.flush=this.flush.bind(this),window.addEventListener("pagehide",this.flush),setTimeout(()}return i(t,[{key:"isCookieless",get:,{key:"activeQueue",value:,{key:"queueAvailable",value:,{key:"pushEvent",value:function(t,e){var n=this.gtmFlattenData(t,e);this.setProductShortCodeList(),this.queueAvailable()?(this.dataQueue.push(n),this.dataQueueSize+=n.length,(this.dataQueue.length>=this.maxDataQueueCount||this.dataQueueSize>=this.maxDataQueueSize)&&this.flush()):this.sendNow(n)}},{key:"flush",value:function(){if(!this.flushing&&0!==this.dataQueue.length){this.flushing=!0;var t=this.dataQueue;this.dataQueue=[],this.dataQueueSize=0,this.flushing=!1,this.sendBatch(t)}}},{key:"getReqUrl",value:,{key:"sendNow",value:function(t){if(t.length<=this.maxQueryDataLength)new Image(1,1).src="".concat(this.getReqUrl(),"&").concat(t);else{var e=new window.XMLHttpRequest;e.withCredentials=!0,e.open("POST",this.getReqUrl()),e.send(t)}}},{key:"sendBatch",value:function(t){navigator.sendBeacon(this.getReqUrl(),t.join("\r\n"))}},{key:"setProductShortCodeList",value:function(){var t=[];for(var e in this.options.state)this.options.state[e].shortCode&&t.push(this.options.state[e].shortCode);t.sort(),this.maxQueryDataLength+=this.reqProductShortCode.length,this.reqProductShortCode="&_psc=".concat(t.join(",")),this.maxQueryDataLength-=this.reqProductShortCode.length}},{key:"getSessionId",value:function(){return this.isCookieless?O(l,{expires:!1}):O(u)}},{key:"generateReqBase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cookie",n={cookie:"https://www.automizely-analytics.com/analytics/collect",cookieless:"https://www.automizely-analytics.com/cookieless/collect"},r=n[e]+"?"+t.flattenData(this.gtmCommonData());return r}},{key:"gtmCommonData",value:function(){var e=t.getCommonData(this.options.userTrackingMechanism);return jt(jt({v:"2",gtm:"amwcp1",sr:e.screenResolution,ul:e.language},this.userPseudoId?{cid:this.userPseudoId}:void 0),{},{dl:e.pageLocation,dr:e.pageReferrer,dt:e.pageTitle,sid:e.sessionId})}},{key:"gtmFlattenData",value:function(t,e){var n="en=".concat(encodeURIComponent(t));for(var r in e)n+="&".concat(qt[r]||qt._,".").concat(encodeURIComponent(r),"=").concat(encodeURIComponent(e[r]));return n}}],[{key:"getCommonData",value:function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cookie";return n="cookieless"===r?O(l,{expires:!1}):O(u),{pageLocation:location.href,pageReferrer:document.referrer,pageTitle:document.title,screenResolution:"".concat((null===(t=window.screen)||void 0===t?void 0:t.width)||0,"x").concat((null===(e=window.screen)||void 0===e?void 0:e.height)||0),language:navigator.language||"",sessionId:n}}},{key:"flattenData",value:function(t){var e="";for(var n in t)e+=(e?"&":"")+"".concat(n,"=").concat(encodeURIComponent(t[n]));return e}}]),t}();function Pt(t){var e;t.pageId||(t.pageId="".concat((e=new Date,e.getSeconds()+60*e.getMinutes()+3600*e.getHours()),".").concat(function(t){let e=`${E(1,9)}`;for(let t=1;t<8;t++)e+=E(0,9);return e}()))}var Rt=function(){eturn i(t,[{key:"cart",get:function(){return this.cartEventTarget||(this.cartEventTarget=(window.amStorefrontKit=window.amStorefrontKit||{},"object"==typeof window.amStorefrontKit&&window.amStorefrontKit.cart?window.amStorefrontKit.cart:window.amStorefrontKit.cart=new Ct).eventTarget)}},{key:"view",get:function(){return this.viewEventTarget||(this.viewEventTarget=(window.amStorefrontKit=window.amStorefrontKit||{},"object"==typeof window.amStorefrontKit&&window.amStorefrontKit.view?window.amStorefrontKit.view:window.amStorefrontKit.view=new ht).eventTarget)}}]),t}();function Dt(){return{eventTarget:new Rt,pushData:Ot}}function At(){return At=e(c().mark((function t(e,n,r){var o,i,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.amStorefrontKit=window.amStorefrontKit||{},o=U(),!["kadensse","bad-no"].includes(o)){t.next=6;break}return k(w,{path:y}),k(g,{path:y}),t.abrupt("return");case 6:return t.next=8,T();case 8:if(!1===(null==r?void 0:r.requiresUserConsent)){t.next=21;break}return i=!1,t.prev=10,t.next=13,B();case 13:i=t.sent,t.next=18;break;case 16:t.prev=16,t.t0=t.catch(10);case 18:if(i){t.next=21;break}return window.amStorefrontKit.collect=t.abrupt("return");case 21:if(window.amStorefrontKit.dataLayer=[],(a=G(null==r?void 0:r.mode)).state[e]={shortCode:(null==r?void 0:r.productShortCode)||""},a.collector=a.collector||new It({gaMeasurementId:"G-S8VXCC5E20",state:a.state,userTrackingMechanism:null==r?void 0:r.mode}),s="".concat(e,".").concat((null==r?void 0:r.entry)||""),a.appEntries=a.appEntries||{},!a.appEntries.hasOwnProperty(s)){t.next=29;break}return t.abrupt("return");case 29:a.appEntries[s]=1,Pt(a),Kt(),u=Dt(),(null==r?void 0:r.basicData)&&it(r.basicData),(null==r?void 0:r.mappedOrgId)&&it({__organization_id:r.mappedOrgId}),a.singleEvent.pageEnter||(a.singleEvent.pageEnter=new ct(V.page_enter),Mt(u,a,null==r?void 0:r.mode),$t(u)),n&&n(u),u.eventTarget.view.addEventListener(V.page_enter,(,{finally:!0,once:!0}),u.eventTarget.view.dispatchEvent(a.singleEvent.pageEnter);case 39:case"end":return t.stop()}}),t,null,[[10,16]])}))),At.apply(this,arguments)}function Mt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cookie";t.eventTarget.view.addEventListener(V.page_leave,(),t.eventTarget.view.addEventListener(S.view_item,(function(t){var e,r;null!=t&&null!==(e=t.context)&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.items&&Ot(t,{ecommerce:{items:t.context.data.items}},n),nt(t,n)})),t.eventTarget.view.addEventListener(S.click_item,(function(t){var e,r;null!=t&&null!==(e=t.context)&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.items&&Ot(t,{ecommerce:{items:t.context.data.items}},n),nt(t,n)})),t.eventTarget.cart.addEventListener(S.checkout,(function(t){var e,r=null==t||null===(e=t.context)||void 0===e?void 0:e.data;r&&Ot(t,{ecommerce:j({checkout_token:r.token,items:r.items})},n),nt(t,n)})),t.eventTarget.cart.addEventListener(S.purchase,(function(t){var r;t&&(e.singleEvent.purchase=t);var o=null==t||null===(r=t.context)||void 0===r?void 0:r.data;o&&Ot(t,{user_id:o.user_id,ecommerce:j({order_id:o.order_id,total_value:o.total_value,total_tax:o.total_tax,total_shipping:o.total_shipping,currency_code:o.currency_code,checkout_token:o.token,coupon:o.coupon,items:o.items})},n),nt(t,n)})),t.eventTarget.cart.addEventListener(S.cart_updated,(function(t){var e,r=null==t||null===(e=t.context)||void 0===e?void 0:e.data;r&&Ot(t,{ecommerce:j({cart_token:r.token,carts:r.items})},n),nt(t,n)}))}function $t(t){(P(bt.pendingQueue)||[]).forEach((function(e){var n=new xt(e.event,e.data);t.eventTarget.cart.dispatchEvent(n)})),R(bt.pendingQueue)}function Kt(){var t=new URLSearchParams(location.search),e=t.get("utm_source"),n=t.get("utm_medium"),r=t.get("utm_content"),o=t.get("utm_campaign"),i=t.get("_sc_p");e&&sessionStorage.setItem(h,e),n&&sessionStorage.setItem(p,n),r&&sessionStorage.setItem(v,r),o&&sessionStorage.setItem(f,o),i&&function(t){sessionStorage.setItem(m,t);var e=t.split("*").reduce((,{});e.lid&&b(w,e.lid,{path:y,maxAge:7884e3})}(i)}var Nt=function(t){return function(e,n){var r,o=Y(t);if(!o)throw new Error("Should call initDataCollect() first.");for(var i=0,a=Object.values(o.singleEvent);i<a.length;i++){var s=a[i];if((null==s?void 0:s.type)===e){r=s;break}}var c=r||("string"==typeof e?new Event(e):e);n&&Ot(c,n,t),nt(c,t)}},Qt=Nt("cookie"),Ut=Nt("cookieless");window.amStorefrontKit=window.amStorefrontKit||{},window.amStorefrontKit.collect=Qt,window.amStorefrontKit.collectByCookieless=Ut,window.amStorefrontKit.initCollect=)()})();