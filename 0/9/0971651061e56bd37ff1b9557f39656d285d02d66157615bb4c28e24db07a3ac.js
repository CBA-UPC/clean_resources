(()=>{var t={586:()=>{!function(t,e,n){"use strict";if(!t.PushStream){var s={},r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=s.dateToUTCString=function(t){var e=o(t.getUTCHours())+":"+o(t.getUTCMinutes())+":"+o(t.getUTCSeconds());return r[t.getUTCDay()]+", "+o(t.getUTCDate())+" "+i[t.getUTCMonth()]+" "+t.getUTCFullYear()+" "+e+" GMT"};var a=function(){for(var t=arguments[0]||{},e=0;e<arguments.length;e++){var n=arguments[e];for(var s in n)n.hasOwnProperty&&!n.hasOwnProperty(s)||(t[s]=n[s])}return t},c=/^[\],:{}\s]*$/,u=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,h=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,l=/(?:^|:|,)(?:\s*\[)+/g;s.parseJSON=function(e){if(!e||!v(e))return null;if(e=e.replace(/^\s*/,"").replace(/\s*$/,""),t.JSON&&t.JSON.parse)try{return t.JSON.parse(e)}catch(t){throw"Invalid JSON: "+e}if(c.test(e.replace(u,"@").replace(h,"]").replace(l,"")))return new Function("return "+e)();throw"Invalid JSON: "+e};var d=function(t){var e={};return e[t.tagArgument]="",e[t.timeArgument]="",e[t.eventIdArgument]="",t.messagesControlByArgument&&(e[t.tagArgument]=Number(t._etag),t._lastModified?e[t.timeArgument]=t._lastModified:t._lastEventId&&(e[t.eventIdArgument]=t._lastEventId)),e},p=m=f=function(t){var e=t;if("object"==typeof t){for(var n in e="",t)t.hasOwnProperty&&!t.hasOwnProperty(n)||(e+="&"+n+"="+C(t[n]));e=e.substring(1)}return e||""},g=function(t,e){return t+(t.indexOf("?")<0?"?":"&")+f(e)},b=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},v=function(t){return"[object String]"===Object.prototype.toString.call(t)},y=_={logger:null,debug:function(){"debug"===U.LOG_LEVEL&&_._log.apply(_._log,arguments)},info:function(){"info"!==U.LOG_LEVEL&&"debug"!==U.LOG_LEVEL||_._log.apply(_._log,arguments)},error:_initLogger:function(){var e=t.console;e&&e.log&&(e.log.apply?_.logger=e.log:"object"==typeof e.log&&Function.prototype.bind?_.logger=Function.prototype.bind.call(e.log,e):"object"==typeof e.log&&Function.prototype.call&&(_.logger=function(){Function.prototype.call.call(e.log,e,Array.prototype.slice.call(arguments))}))},_log:function(){if(_.logger||_._initLogger(),_.logger)try{_.logger.apply(t.console,arguments)}catch(e){_._initLogger(),_.logger&&_.logger.apply(t.console,arguments)}var n=e.getElementById(U.LOG_OUTPUT_ELEMENT_ID);if(n){for(var s="",r=0;r<arguments.length;r++)s+=arguments[r]+" ";n.innerHTML+=s+"\n";var i=n.innerHTML.split("\n");i.length>100&&(n.innerHTML=i.slice(-100).join("\n"))}}},S={_getXHRObject:function(e){var n=!1;if(e){try{n=new t.XDomainRequest}catch(t){}if(n)return n}try{n=new t.XMLHttpRequest}catch(e){try{n=new t.ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{n=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(t){n=!1}}}return n},_send:function(e,n){(e=e||{}).timeout=e.timeout||3e4;var s=S._getXHRObject(e.crossDomain);if(s&&e.url){S.clear(e),e.xhr=s,t.XDomainRequest&&s instanceof t.XDomainRequest?(s.onload=function(){e.afterReceive&&e.afterReceive(s),e.success&&e.success(s.responseText)},s.onerror=s.ontimeout=function(){e.afterReceive&&e.afterReceive(s),e.error&&e.error(s.status)}):s.onreadystatechange=function(){4===s.readyState&&(S.clear(e),e.afterReceive&&e.afterReceive(s),200===s.status?e.success&&e.success(s.responseText):e.error&&e.error(s.status))},e.beforeOpen&&e.beforeOpen(s);var r={},i=null,o="GET";n?(i=f(e.data),o="POST"):r=e.data||{},s.open(o,g(e.url,a({},r,m())),!0),e.beforeSend&&e.beforeSend(s);return n?s.setRequestHeader&&(s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-type","application/x-www-form-urlencoded")):e.timeoutId=t.setTimeout((function(){S.clear(e);try{s.abort()}catch(t){}e.error(304)}),e.timeout+2e3),s.send(i),s}},_clear_xhr:_clear_script:function(t){t&&(t.onerror=t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t))},_clear_timeout:_clear_jsonp:function(e){var n=e.data.callback;n&&(t[n]=},clear:function(t){S._clear_timeout(t),S._clear_jsonp(t),S._clear_script(e.getElementById(t.scriptId)),S._clear_xhr(t.xhr)},jsonp:function(n){n.timeout=n.timeout||3e4,S.clear(n);var s=e.head||e.getElementsByTagName("head")[0],r=e.createElement("script"),i=p(),o=function(){S.clear(n);var t=p();n.error(t-i>n.timeout/2?304:403)};return r.onerror=o,r.onload=r.onreadystatechange=function(t){r.readyState&&!/loaded|complete/.test(r.readyState)||(n.afterSuccess?(S.clear(n),n.load()):o())},n.beforeOpen&&n.beforeOpen({}),n.beforeSend&&n.beforeSend({}),n.timeoutId=t.setTimeout(o,n.timeout+2e3),n.scriptId=n.scriptId||p(),n.afterSuccess=null,n.data.callback=n.scriptId+"_onmessage_"+p(),t[n.data.callback]=function(){n.afterSuccess=!0,n.success.apply(null,arguments)},r.setAttribute("src",g(n.url,a({},n.data,m()))),r.setAttribute("async","async"),r.setAttribute("id",n.scriptId),s.insertBefore(r,s.firstChild),n},load:function(t){return S._send(t,!1)},post:,C=function(e){return e?t.encodeURIComponent(e):""},A=s.parseMessage=function(t,e){var n=t;return v(t)&&(n=s.parseJSON(t)),{id:n[e.jsonIdKey],channel:n[e.jsonChannelKey],text:v(n[e.jsonTextKey])?A(n[e.jsonTextKey]):n[e.jsonTextKey],tag:n[e.jsonTagKey],time:n[e.jsonTimeKey],eventid:n[e.jsonEventIdKey]||""}};var T=function(t,e){var n,s="";for(var r in t)t.hasOwnProperty&&!t.hasOwnProperty(r)||(s+="/"+r+(e?(n=t[r]).backtrack?".b"+Number(n.backtrack):"":""));return s},E=function(t,e,n,s){var r=t.wrapper.type===j.TYPE,i=t.useSSL,o=P(i,t.port),c=r?i?"wss://":"ws://":i?"https://":"http://";c+=t.host,c+=o?":"+o:"",c+=e;var u=T(t.channels,s);if(t.channelsByArgument){var h={};h[t.channelsArgument]=u.substring(1),n=a({},n,h)}else c+=u;return g(c,n)},w=function(t){var e=P(t.useSSL,t.port),n=t.useSSL?"https://":"http://";return n+=t.host,n+=e?":"+e:"",n+=t.urlPrefixPublisher,n+="?id="+T(t.channels,!1)};s.extract_xss_domain=function(t){if(t.match(/^(\d{1,3}\.){3}\d{1,3}$/))return t;var e=t.split("."),n=Math.max(e.length-1,t.match(/(\w{4,}\.\w{2}|\.\w{3,})$/)?2:3);return e.slice(-1*n).join(".")};var P=function(t,e){return e=Number(e||(t?443:80)),!t&&80===e||t&&443===e?"":e};s.isCrossDomainUrl=function(n){if(!n)return!1;var s=e.createElement("a");s.href=n;var r=P("https:"===t.location.protocol,t.location.port),i=P("https:"===s.protocol,s.port);return t.location.protocol!==s.protocol||t.location.hostname!==s.hostname||r!==i};var O=x=function(e){return e&&t.clearTimeout(e),null},I=function(t){_.info("["+this.type+"] message received",arguments);var e=s.parseMessage(t.data,this.pushstream);e.tag&&(this.pushstream._etag=e.tag),e.time&&(this.pushstream._lastModified=e.time),e.eventid&&(this.pushstream._lastEventId=e.eventid),this.pushstream._onmessage(e.text,e.id,e.channel,e.eventid,!0,e.time)},M=function(){this.pushstream._onopen(),_.info("["+this.type+"] connection opened")},L=function(e){_.info("["+this.type+"] error (disconnected by server):",e),this.pushstream.readyState===U.OPEN&&this.type===k.TYPE&&"error"===e.type&&this.connection.readyState===t.EventSource.CONNECTING||(this._closeCurrentConnection(),this.pushstream._onerror({type:e&&("load"===e.type||"close"===e.type&&1006===e.code)||this.pushstream.readyState===U.CONNECTING?"load":"timeout"}))},j=function(e){if(!t.WebSocket&&!t.MozWebSocket)throw"WebSocket not supported";this.type=j.TYPE,this.pushstream=e,this.connection=null};j.TYPE="WebSocket",j.prototype={connect:function(){this._closeCurrentConnection();var e=a({},this.pushstream.extraParams(),m(),d(this.pushstream)),n=E(this.pushstream,this.pushstream.urlPrefixWebsocket,e,!this.pushstream._useControlArguments());this.connection=t.WebSocket?new t.WebSocket(n):new t.MozWebSocket(n),this.connection.onerror=O(L,this),this.connection.onclose=O(L,this),this.connection.onopen=O(M,this),this.connection.onmessage=O(I,this),_.info("[WebSocket] connecting to:",n)},disconnect:function(){this.connection&&(_.debug("[WebSocket] closing connection to:",this.connection.url),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.connection){try{this.connection.close()}catch(t){}this.connection=null}},sendMessage:;var k=function(e){if(!t.EventSource)throw"EventSource not supported";this.type=k.TYPE,this.pushstream=e,this.connection=null};k.TYPE="EventSource",k.prototype={connect:function(){this._closeCurrentConnection();var e=a({},this.pushstream.extraParams(),m(),d(this.pushstream)),n=E(this.pushstream,this.pushstream.urlPrefixEventsource,e,!this.pushstream._useControlArguments());this.connection=new t.EventSource(n),this.connection.onerror=O(L,this),this.connection.onopen=O(M,this),this.connection.onmessage=O(I,this),_.info("[EventSource] connecting to:",n)},disconnect:function(){this.connection&&(_.debug("[EventSource] closing connection to:",this.connection.url),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:;var N=function(t){this.type=N.TYPE,this.pushstream=t,this.connection=null,this.url=null,this.frameloadtimer=null,this.pingtimer=null,this.iframeId="PushStreamManager_"+t.id};N.TYPE="Stream",N.prototype={connect:function(){this._closeCurrentConnection();var t=s.extract_xss_domain(this.pushstream.host);try{e.domain=t}catch(e){_.error("[Stream] (warning) problem setting document.domain = "+t+" (OBS: IE8 does not support set IP numbers as domain)")}var n=a({},this.pushstream.extraParams(),m(),{streamid:this.pushstream.id},d(this.pushstream));this.url=E(this.pushstream,this.pushstream.urlPrefixStream,n,!this.pushstream._useControlArguments()),_.debug("[Stream] connecting to:",this.url),this.loadFrame(this.url)},disconnect:function(){this.connection&&(_.debug("[Stream] closing connection to:",this.url),this._closeCurrentConnection(),this.pushstream._onclose())},_clear_iframe:function(){var t=e.getElementById(this.iframeId);t&&(t.onload=null,t.src="about:blank",t.parentNode&&t.parentNode.removeChild(t))},_closeCurrentConnection:function(){this._clear_iframe(),this.connection&&(this.pingtimer=x(this.pingtimer),this.frameloadtimer=x(this.frameloadtimer),this.connection=null,this.transferDoc=null,"function"==typeof t.CollectGarbage&&t.CollectGarbage())},loadFrame:function(n){this._clear_iframe();var s=null;if("ActiveXObject"in t){var r=new t.ActiveXObject("htmlfile");r.open(),r.write("<html><script>document.domain='"+e.domain+"';<\/script>"),r.write("<body><iframe id='"+this.iframeId+"' src='"+n+"'></iframe></body></html>"),r.parentWindow.PushStream=U,r.close(),s=r.getElementById(this.iframeId),this.transferDoc=r}else(s=e.createElement("IFRAME")).style.width="1px",s.style.height="1px",s.style.border="none",s.style.position="absolute",s.style.top="-10px",s.style.marginTop="-10px",s.style.zIndex="-20",s.PushStream=U,e.body.appendChild(s),s.setAttribute("src",n),s.setAttribute("id",this.iframeId);s.onload=O(L,this),this.connection=s,this.frameloadtimer=t.setTimeout(O(L,this),this.pushstream.timeout)},register:function(t){this.frameloadtimer=x(this.frameloadtimer),t.p=O(this.process,this),this.connection.onload=O(this._onframeloaded,this),this.pushstream._onopen(),this.setPingTimer(),_.info("[Stream] frame registered")},process:function(t,e,n,s,r,i){this.pingtimer=x(this.pingtimer),_.info("[Stream] message received",arguments),-1!==t&&(i&&(this.pushstream._etag=i),r&&(this.pushstream._lastModified=r),s&&(this.pushstream._lastEventId=s)),this.pushstream._onmessage(A(n),t,e,s||"",!0,r),this.setPingTimer()},_onframeloaded:function(){_.info("[Stream] frame loaded (disconnected by server)"),this.pushstream._onerror({type:"timeout"}),this.connection.onload=null,this.disconnect()},setPingTimer:function(){this.pingtimer&&x(this.pingtimer),this.pingtimer=t.setTimeout(O(L,this),this.pushstream.pingtimeout)}};var R=function(t){this.type=R.TYPE,this.pushstream=t,this.connection=null,this.opentimer=null,this.messagesQueue=[],this._linkedInternalListen=O(this._internalListen,this),this.xhrSettings={timeout:this.pushstream.timeout,data:{},url:null,success:O(this.onmessage,this),error:O(this.onerror,this),load:O(this.onload,this),beforeSend:O(this.beforeSend,this),afterReceive:O(this.afterReceive,this)}};R.TYPE="LongPolling",R.prototype={connect:function(){this.messagesQueue=[],this._closeCurrentConnection(),this.urlWithBacktrack=E(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!0),this.urlWithoutBacktrack=E(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!1),this.xhrSettings.url=this.urlWithBacktrack,this.useJSONP=this.pushstream._crossDomain||this.pushstream.useJSONP,this.xhrSettings.scriptId="PushStreamManager_"+this.pushstream.id,this.useJSONP&&(this.pushstream.messagesControlByArgument=!0),this._listen(),this.opentimer=t.setTimeout(O(M,this),150),_.info("[LongPolling] connecting to:",this.xhrSettings.url)},_listen:function(){this._internalListenTimeout&&x(this._internalListenTimeout),this._internalListenTimeout=t.setTimeout(this._linkedInternalListen,100)},_internalListen:function(){this.pushstream._keepConnected&&(this.xhrSettings.url=this.pushstream._useControlArguments()?this.urlWithoutBacktrack:this.urlWithBacktrack,this.xhrSettings.data=a({},this.pushstream.extraParams(),this.xhrSettings.data,d(this.pushstream)),this.useJSONP?this.connection=S.jsonp(this.xhrSettings):this.connection||(this.connection=S.load(this.xhrSettings)))},disconnect:function(){this.connection&&(_.debug("[LongPolling] closing connection to:",this.xhrSettings.url),this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.opentimer=x(this.opentimer),this.connection){try{this.connection.abort()}catch(t){try{S.clear(this.connection)}catch(t){}}this.connection=null,this.xhrSettings.url=null}},beforeSend:function(t){this.pushstream.messagesControlByArgument||(t.setRequestHeader("If-None-Match",this.pushstream._etag),t.setRequestHeader("If-Modified-Since",this.pushstream._lastModified))},afterReceive:function(t){this.pushstream.messagesControlByArgument||(this.pushstream._etag=t.getResponseHeader("Etag"),this.pushstream._lastModified=t.getResponseHeader("Last-Modified")),this.connection=null},onerror:function(t){this._closeCurrentConnection(),this.pushstream._keepConnected&&(304===t?this._listen():(_.info("[LongPolling] error (disconnected by server):",t),this.pushstream._onerror({type:403===t||this.pushstream.readyState===U.CONNECTING?"load":"timeout"})))},onload:onmessage:function(t){this._internalListenTimeout&&x(this._internalListenTimeout),_.info("[LongPolling] message received",t);for(var e=null,n=b(t)?t:t.replace(/\}\{/g,"}\r\n{").split("\r\n"),r=0;r<n.length;r++)n[r]&&(e=s.parseMessage(n[r],this.pushstream),this.messagesQueue.push(e),this.pushstream.messagesControlByArgument&&e.time&&(this.pushstream._etag=e.tag,this.pushstream._lastModified=e.time));for(this._listen();this.messagesQueue.length>0;){var i=this.messagesQueue.shift();this.pushstream._onmessage(i.text,i.id,i.channel,i.eventid,0===this.messagesQueue.length,i.time)}}};var D=[],U=function(e){e=e||{},this.id=D.push(this)-1,this.useSSL=e.useSSL||!1,this.host=e.host||t.location.hostname,this.port=Number(e.port||(this.useSSL?443:80)),this.timeout=e.timeout||3e4,this.pingtimeout=e.pingtimeout||3e4,this.reconnectOnTimeoutInterval=e.reconnectOnTimeoutInterval||3e3,this.reconnectOnChannelUnavailableInterval=e.reconnectOnChannelUnavailableInterval||6e4,this.autoReconnect=!1!==e.autoReconnect,this.lastEventId=e.lastEventId||null,this.messagesPublishedAfter=e.messagesPublishedAfter,this.messagesControlByArgument=e.messagesControlByArgument||!1,this.tagArgument=e.tagArgument||"tag",this.timeArgument=e.timeArgument||"time",this.eventIdArgument=e.eventIdArgument||"eventid",this.useJSONP=e.useJSONP||!1,this._reconnecttimer=null,this._etag=0,this._lastModified=null,this._lastEventId=null,this.urlPrefixPublisher=e.urlPrefixPublisher||"/pub",this.urlPrefixStream=e.urlPrefixStream||"/sub",this.urlPrefixEventsource=e.urlPrefixEventsource||"/ev",this.urlPrefixLongpolling=e.urlPrefixLongpolling||"/lp",this.urlPrefixWebsocket=e.urlPrefixWebsocket||"/ws",this.jsonIdKey=e.jsonIdKey||"id",this.jsonChannelKey=e.jsonChannelKey||"channel",this.jsonTextKey=e.jsonTextKey||"text",this.jsonTagKey=e.jsonTagKey||"tag",this.jsonTimeKey=e.jsonTimeKey||"time",this.jsonEventIdKey=e.jsonEventIdKey||"eventid",this.modes=(e.modes||"eventsource|websocket|stream|longpolling").split("|"),this.wrappers=[],this.wrapper=null,this.onchanneldeleted=e.onchanneldeleted||null,this.onmessage=e.onmessage||null,this.onerror=e.onerror||null,this.onstatuschange=e.onstatuschange||null,this.extraParams=e.extraParams||this.channels={},this.channelsCount=0,this.channelsByArgument=e.channelsByArgument||!1,this.channelsArgument=e.channelsArgument||"channels",this._crossDomain=s.isCrossDomainUrl(w(this));for(var n=0;n<this.modes.length;n++)try{var r=null;switch(this.modes[n]){case"websocket":r=new j(this);break;case"eventsource":r=new k(this);break;case"longpolling":r=new R(this);break;case"stream":r=new N(this)}this.wrappers[this.wrappers.length]=r}catch(t){_.info(t)}this.readyState=0};U.LOG_LEVEL="error",U.LOG_OUTPUT_ELEMENT_ID="Log4jsLogOutput",U.CLOSED=0,U.CONNECTING=1,U.OPEN=2,U.prototype={addChannel:function(t,e){if(C(t)!==t)throw"Invalid channel name! Channel has to be a set of [a-zA-Z0-9]";if(_.debug("entering addChannel"),void 0!==this.channels[t])throw"Cannot add channel "+t+": already subscribed";e=e||{},_.info("adding channel",t,e),this.channels[t]=e,this.channelsCount++,this.readyState!==U.CLOSED&&this.connect(),_.debug("leaving addChannel")},removeChannel:function(t){this.channels[t]&&(_.info("removing channel",t),delete this.channels[t],this.channelsCount--)},removeAllChannels:function(){_.info("removing all channels"),this.channels={},this.channelsCount=0},_setState:function(t){this.readyState!==t&&(_.info("status changed",t),this.readyState=t,this.onstatuschange&&this.onstatuschange(this.readyState))},connect:function(){if(_.debug("entering connect"),!this.host)throw"PushStream host not specified";if(isNaN(this.port))throw"PushStream port not specified";if(!this.channelsCount)throw"No channels specified";if(0===this.wrappers.length)throw"No available support for this browser";this._keepConnected=!0,this._lastUsedMode=0,this._connect(),_.debug("leaving connect")},disconnect:function(){_.debug("entering disconnect"),this._keepConnected=!1,this._disconnect(),this._setState(U.CLOSED),_.info("disconnected"),_.debug("leaving disconnect")},_useControlArguments:function(){return this.messagesControlByArgument&&(null!==this._lastModified||null!==this._lastEventId)},_connect:function(){if(null===this._lastEventId&&(this._lastEventId=this.lastEventId),null===this._lastModified){var t=this.messagesPublishedAfter;if(!y(t)){var e=Number(this.messagesPublishedAfter);e>0?(t=new Date).setTime(t.getTime()-1e3*e):e<0&&(t=new Date(0))}y(t)&&(this._lastModified=s.dateToUTCString(t))}this._disconnect(),this._setState(U.CONNECTING),this.wrapper=this.wrappers[this._lastUsedMode++%this.wrappers.length];try{this.wrapper.connect()}catch(t){this.wrapper&&this.wrapper.disconnect()}},_disconnect:function(){this._reconnecttimer=x(this._reconnecttimer),this.wrapper&&this.wrapper.disconnect()},_onopen:function(){this._reconnecttimer=x(this._reconnecttimer),this._setState(U.OPEN),this._lastUsedMode>0&&this._lastUsedMode--},_onclose:function(){this._reconnecttimer=x(this._reconnecttimer),this._setState(U.CLOSED),this._reconnect(this.reconnectOnTimeoutInterval)},_onmessage:function(t,e,n,s,r,i){_.debug("message",t,e,n,s,r,i),-2===e?this.onchanneldeleted&&this.onchanneldeleted(n):e>0&&this.onmessage&&this.onmessage(t,e,n,s,r,i)},_onerror:function(t){this._setState(U.CLOSED),this._reconnect("timeout"===t.type?this.reconnectOnTimeoutInterval:this.reconnectOnChannelUnavailableInterval),this.onerror&&this.onerror(t)},_reconnect:function(e){this.autoReconnect&&this._keepConnected&&!this._reconnecttimer&&this.readyState!==U.CONNECTING&&(_.info("trying to reconnect in",e),this._reconnecttimer=t.setTimeout(O(this._connect,this),e))},sendMessage:function(t,e,n){t=C(t),this.wrapper.type===j.TYPE?(this.wrapper.sendMessage(t),e&&e()):S.post({url:w(this),data:t,success:e,error:n,crossDomain:this._crossDomain})}},U.sendMessage=function(t,e,n,s){S.post({url:t,data:C(e),success:n,error:s})},U.register=function(t){var e=t.window.location.href.match(/streamid=([0-9]*)&?/);e[1]&&D[e[1]]&&D[e[1]].wrapper.register(t)},U.unload=t.PushStream=U,t.PushStreamManager=D,t.attachEvent&&t.attachEvent("onunload",U.unload),t.addEventListener&&t.addEventListener.call(t,"unload",U.unload,!1)}}(window,document)}},e={};()=>{"use strict";n(586);nction(t){!c,t);var n,r,i,o=s(c);function c(){var t;return this,c),(t=o.call(this)).attachShadow({mode:"open"}),t.pushStream=null,t.updateMessage=null,t.status=null,t}return n=c,(r=[{key:"connectedCallback",value:,{key:"buildRender",value:function(t,e,n,s){var r;this.status||(this.status=null==s?"true"===this.getAttribute("status"):s);var i=this.createContainer();i.innerHTML=this.renderContent(t,e,n);var o=this.getAttribute("timeToExpire"),a=e||this.getAttribute("modified"),c=document.querySelector(".".concat(this.getAttribute("class"))),u=null==c||null===(r=c.shadowRoot)||void 0===r?void 0:r.getElementById("container-pushstream-alert"),h=this.convertHour(a,"compare");!0!==this.status||u||o&&!(h<parseInt(o))||this.shadowRoot.appendChild(i)}},{key:"createContainer",value:function(){var t=document.createElement("div");return t.id="container-pushstream-alert",t.classList.add(this.getAttribute("class")),t&&t.setAttribute("part","".concat(this.getAttribute("class"),"-container")),t}},{key:"renderContent",value:function(t,e,n){return n||this.getAttribute("url")?'\n      <img src="'.concat(this.getAttribute("logo"),'" class="').concat(this.getAttribute("class"),'-image" part="').concat(this.getAttribute("class"),'-image">\n      <article class="').concat(this.getAttribute("class"),'-content" part="').concat(this.getAttribute("class"),'-content">\n        <a href="').concat(n||this.getAttribute("url"),'" class="').concat(this.getAttribute("class"),'-anchor" part="').concat(this.getAttribute("class"),'-anchor">').concat(t||this.getAttribute("text")||"",'</a>\n        <span class="').concat(this.getAttribute("class"),'-hour" part="').concat(this.getAttribute("class"),'-hour">').concat(this.convertHour(e||this.getAttribute("modified"),"convert"),"</span>\n      </article>\n    "):'\n      <img src="'.concat(this.getAttribute("logo"),'" class="').concat(this.getAttribute("class"),'-image" part="').concat(this.getAttribute("class"),'-image">\n      <article class="').concat(this.getAttribute("class"),'-content" part="').concat(this.getAttribute("class"),'-content">\n        <h1 class="').concat(this.getAttribute("class"),'-title" part="').concat(this.getAttribute("class"),'-title">').concat(t||this.getAttribute("text")||"",'</h1>\n        <span class="').concat(this.getAttribute("class"),'-hour" part="').concat(this.getAttribute("class"),'-hour">').concat(this.convertHour(e||this.getAttribute("modified"),"convert"),"</span>\n      </article>\n    ")}},{key:"convertHour",value:function(t,e){var n,s=new Date(t),r=new Date(function(){var t=new Date,e=t.getUTCFullYear(),n=String(t.getUTCMonth()+1).padStart(2,"0"),s=String(t.getUTCDate()).padStart(2,"0"),r=String(t.getUTCHours()).padStart(2,"0"),i=String(t.getUTCMinutes()).padStart(2,"0"),o=String(t.getUTCSeconds()).padStart(2,"0"),a=String(t.getUTCMilliseconds()).padStart(3,"0");return"".concat(e,"-").concat(n,"-").concat(s,"T").concat(r,":").concat(i,":").concat(o,".").concat(a,"Z")}()),i=Math.abs(r-s),o=!1,a=parseInt(i/1e3);return 0===a?(n="agora",o=!0):n=a<60&&!o?"há ".concat(a,"s"):a>59&&a<3600?"há ".concat(parseInt(a/60),"min"):"há ".concat(parseInt(a/3600),"h"),"compare"===e?a:n}},{key:"startPush",value:function(){var t,e=this.getAttribute("host"),n={host:(t=e,"prod"===t?"stream.push.globoi.com":"stream.push.qa.globoi.com"),useSSL:!0,modes:"eventsource|websocket|longpolling",reconnectOnChannelUnavailableInterval:6e4,reconnectOnTimeoutInterval:6e4,onchanneldeleted:this.onChannelDeleted.bind(this),onstatuschange:this.onStatusChange.bind(this),onmessage:this.onMessage.bind(this),onerror:this.onError.bind(this),messagesPublishedAfter:300,messagesControlByArgument:!0};this.pushStream||(this.pushStream=new PushStream(n),this.createConnect())}},{key:"createConnect",value:function(){var t=this.getAttribute("channel");this.pushStream.addChannel(t),this.pushStream.connect()}},{key:"onMessage",value:function(t){var e=this;console.info("PushStream/RoundMatches message received.",t);var n=".".concat(this.getAttribute("class")),s=document.querySelector(n),r=s.shadowRoot,i=r.querySelector("".concat(n," article")),o=r.querySelector("".concat(n," a")),a=r.querySelector("".concat(n," h1")),c=r.querySelector("".concat(n," span"));if(t.resource&&r&&(!0===t.resource.status_alert?(this.status=!0,s.setAttribute("status",!0),function(t){if(i||e.buildRender(t.text_alert,t.modified,t.url_alert,t.status_alert),t.url_alert)if(a&&a.remove(),i)if(o)s.setAttribute("text",t.text_alert),s.setAttribute("url",""),o.innerHTML=t.text_alert,o.setAttribute("href",t.url_alert);else{var c=function(t,n){var s=document.createElement("a");return s.classList.add("".concat(e.getAttribute("class"),"-anchor")),s.setAttribute("part","".concat(e.getAttribute("class"),"-anchor")),s.href=t,s.innerHTML=n,s}(t.url_alert,t.text_alert);s.setAttribute("text",t.text_alert),s.setAttribute("url",t.url_alert),i.prepend(c)}else{var u=t.modified;!function(t,n,s,r){e.convertHour(n,"compare")<parseInt(e.getAttribute("timeToExpire"))&&e.buildRender(t,n,s,r)}(t.text_alert,u,t.url_alert,t.status_alert)}else{var h=r.querySelector("".concat(n," a"));h&&h.remove(),function(t,n,s,r){if(a)a.innerHTML=t;else if(i){var o=document.createElement("h1");o.classList.add("".concat(e.getAttribute("class"),"-title")),o.setAttribute("part","".concat(e.getAttribute("class"),"-title")),o.innerHTML=t,i.prepend(o)}else e.buildRender(t,n,s,r)}(t.text_alert,t.modified,t.url_alert,t.status_alert)}e.updateMessage=t.modified,r.dispatchEvent(new CustomEvent("update-alert-component",{detail:{message:t}}))}(t.resource)):function(){var t=r.getElementById("container-pushstream-alert");t&&t.remove(),e.status=!1,s.setAttribute("status",!1)}()),!t.resource&&this.convertHour(this.updateMessage||this.getAttribute("modified"),"compare")>parseInt(this.getAttribute("timeToExpire"))){var u=r.getElementById("container-pushstream-alert");u&&u.remove()}var h=this.convertHour(this.updateMessage||this.getAttribute("modified"),"convert");s.setAttribute("modified",this.updateMessage||this.getAttribute("modified")),c&&(c.innerHTML=h)}},{key:"onChannelDeleted",val)}},{key:"onError",val)}},{key:"onStatusChange",val)}}])&&e(n.prototype,r),i&&e(n,i),Object.defineProperty(n,"prototype",{writable:!1}),c}(r(HTMLElement));customElements.define("pushstream-alert",u)})()})();