(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[25],{426:function(e,t,s){"use strict";s.r(t);var i,r=s(2),n=s.n(r),o=s(3),a=s.n(o),c=s(37),l=s(21),h=s(105),p=s(4),d=s(797),u=s(860),m=s(902),b=s(903),j=s(904),v=s(0);var f,O,y,x=()=>i||(i=Object(v.jsx)("div",{className:"emailNotice molecule",children:Object(v.jsxs)("p",{children:["To withdraw your consent or learn more about your rights, see the"," ",Object(v.jsx)("a",{href:"https://www.warnermediaprivacy.com/policycenter/b2c/wm/",children:"Privacy Policy"}),"."]})})),g=(s(53),s(13)),C=s.n(g);class P extends a.a.PureComponent{constructor(e){super(e),this.state={isBioTooLong:!1,value:this.props.value||"",loading:!1,isError:!1},this.onChange=this.onChange.bind(this),this.onSubmit=this.onSubmit.bind(this)}onChange(){const e=this._bio.value,t=e.length>=161;this.setState({value:e,isError:!1,isBioTooLong:t})}onSubmit(e){e.preventDefault(),this.setState({loading:!0},()=>{const e={bio:this._bio.value};this.props.updateAccount(e).then(.catch(})}render(){const e=C()({molecule:!0,profileBio:!0}),t=C()({charCount:!0,error:this.state.isBioTooLong}),{value:s,loading:i,isBioTooLong:r,isError:n}=this.state;return Object(v.jsxs)("form",{className:e,onSubmit:this.onSubmit,children:[f||(f=Object(v.jsx)("h2",{children:"Edit Bio"})),O||(O=Object(v.jsx)("p",{children:"Enter bio. What are you a fan of?"})),Object(v.jsx)("textarea",{name:"bio",type:"text",value:s,ref:onChange:this.onChange,title:"Please enter a bio between 0 and 160 characters"}),Object(v.jsx)("p",{className:t,children:160-s.length}),n&&(y||(y=Object(v.jsx)("p",{className:"errorMessage",children:"Error saving, please try again."}))),Object(v.jsx)(l.Button,{classes:"submitBio",type:"submit",disabled:r||i,loading:i,children:this.props.btnText}),this.props.children]})}}P.defaultProps={onUserEdit:!1,value:"",btnText:"Save"};var S,U=P,w=s(824),k=s(748);var E,_,A,B,T,N=()=>S||(S=Object(v.jsx)("div",{className:"emailNotice molecule",children:Object(v.jsxs)("p",{children:["By entering your email address, you agree to receive updates/news, ads, and offers from Bleacher Report and"," ",Object(v.jsx)("a",{href:"https://www.warnermediaprivacy.com/policycenter/b2c/affiliateslist",children:"its affiliates"}),"."]})}));function D(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}class F extends a.a.PureComponent{constructor(e){super(e),this.onSubmit=this.onSubmit.bind(this),this.onChange=this.onChange.bind(this),this.onCheckboxChange=this.onCheckboxChange.bind(this),this.handleMParticleTracking=this.handleMParticleTracking.bind(this),this.isInternationalUser=this.isInternationalUser.bind(this),this.state={value:this.props.value,loading:!1,termsOfUseAndPrivacyPolicyConsent:!1,affiliatesConsent:!1}}nCheckboxChange(e){const t=e.target.name;this.setState(}isInternationalUserisabledButton(){return!!this.isInternationalUser()&&!1===this.state.termsOfUseAndPrivacyPolicyConsent}handleMParticleTracking(e){const t={},s={};this.props.value!==e.email&&(t.email=e.email,this.props.mParticleModifyIdentity({},t))),this.isInternationalUser()&&(s.intl_tou_pp_date=(new Date).toISOString(),s.intl_tou_pp_locale=this.props.accountCountry||"ZZ",s.intl_tou_pp_accepted=`${this.state.termsOfUseAndPrivacyPolicyConsent}`,this.props.mParticleUpdateAttributes(s))}onSubmit(e){e.preventDefault();const t=this._email.value.trim(),s={email:t};!this.state.termsOfUseAndPrivacyPolicyConsent&&this.isInternationalUser()||(this.setState({loading:!0},()=>this.props.onSubmit?this.props.onSubmit(e,{email:t,termsOfUseAndPrivacyPolicyConsent:this.state.termsOfUseAndPrivacyPolicyConsent,affiliatesConsent:!this.isInternationalUser()||this.state.affiliatesConsent}):null),this.handleMParticleTracking(s),this.props.trackEvent({tag_manager_event:"resend_verification",accountType:"email"}))}render(){const e=C()({molecule:!0,emailInput:!0}),{loading:t,value:s,termsOfUseAndPrivacyPolicyConsent:i,affiliatesConsent:r}=this.state;return Object(v.jsxs)("form",{className:e,onSubmit:this.onSubmit,children:[E||(E=Object(v.jsx)("h2",{children:"Update Your Email"})),_||(_=Object(v.jsx)("p",{children:"Enter your email address."})),Object(v.jsx)("input",{ref:e=>{this._email=e},name:"email",type:"email",required:!0,placeholder:"Email",pattern:"^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$",value:s,onChange:this.onChange}),!this.isInternationalUser()&&(A||(A=Object(v.jsx)(N,{}))),this.isInternationalUser()&&Object(v.jsxs)("div",{className:"internationalUser",children:[Object(v.jsxs)("div",{className:"internationalUser__container",children:[Object(v.jsx)("input",{className:"internationalUser__input",type:"checkbox",checked:r,name:"affiliatesConsent",onChange:this.onCheckboxChange}),B||(B=Object(v.jsxs)("p",{className:"internationalUser__label",children:["Bleacher Report and"," ",Object(v.jsx)("a",{href:"https://www.warnermediaprivacy.com/policycenter/b2c/affiliateslist",children:"its affiliates"})," ","may use my email address to send updates/news, ads, and offers"]}))]}),Object(v.jsxs)("div",{className:"internationalUser__container",children:[Object(v.jsx)("input",{className:"internationalUser__input",type:"checkbox",checked:i,name:"termsOfUseAndPrivacyPolicyConsent",onChange:this.onCheckboxChange}),T||(T=Object(v.jsxs)("p",{className:"internationalUser__label",children:["I agree to the ",Object(v.jsx)("a",{href:"/pages/terms",children:"Terms of Use "})," and acknowledge the"," ",Object(v.jsx)("a",{href:"https://www.warnermediaprivacy.com/policycenter/b2c/wm/",children:"Privacy Policy"})]}))]})]}),Object(v.jsx)(k.a,{errors:this.props.errors,errorSet:"email"}),Object(v.jsx)(l.Button,{type:"submit",disabled:t||this.disabledButton(),loading:t,children:this.props.btnText}),this.props.children]})}}F.defaultProps={errors:[],value:"",btnText:"Submit"};var I=F,L=s(825),M=s(826);class V extends a.a.PureComponent{constructor(e){super(e),this.editField=this.editField.bind(this),this.isEmail="email"===this.props.field,this.isPhone="phone"===this.props.field,this.isEmailVerified="email"===this.props.field&&"verified"===this.props.identities.email,this.isPhoneVerified="phone"===this.props.field&&"verified"===this.props.identities.phone,this.isButtonDisabled=!this.props.permissions.includes("USE_SOCIAL_FEATURES")&&"bio"===this.props.field}etermineFieldState(){const e=this.isEmail&&!this.isEmailVerified||this.isPhone&&!this.isPhoneVerified?"Verify":"Edit";return this.props.content?e:"Add"}render(){return Object(v.jsxs)("li",{className:this.props.content?"":"empty",children:[Object(v.jsx)(l.SVG,{type:"icon",target:"name"===this.props.field?"user":this.props.field}),Object(v.jsx)("input",{type:"text",name:this.props.field,value:this.props.content||"",placeholder:this.props.field,disabled:!0}),Object(v.jsx)(l.Button,{onClick:this.editField,disabled:this.isButtonDisabled,children:this.determineFieldState()})]},this.props.field)}}var K,G,R=V,q=s(96);var Z,z,$,H,Y=e=>{let{tveAuthContext:t,setTveProviderLogo:s,setTveAuthContext:i,tveProviderLogo:r}=e;const n=t.context,o=n&&n.authenticatedState&&"authenticated"===n.authenticatedState,a=C()({noTveAccess:!o,tveAccess:o});return Object(v.jsxs)("li",{className:a,children:[K||(K=Object(v.jsx)(l.SVG,{type:"icon",target:"youtube"})),Object(v.jsxs)("span",{className:a,children:[G||(G=Object(v.jsx)("span",{className:"tveText",children:"TV Provider"})),r&&Object(v.jsx)("div",{className:"tveLogo",children:Object(v.jsx)("img",{src:r,alt:"",role:"presentation"})})]}),Object(v.jsx)(l.Button,{onClick:function(){const e=t.authBlock;o?((e,t,s)=>{q.g({authBlock:e,setTveAuthContext:t,setTveProviderLogo:s})})(e,i,s):((e,i,s)},children:o?"Unlink":"Link"})]})};const W=["username","name","bio","phone","email"];class J extends a.a.PureComponent{dFields(){return W.map(e=>{const t=this.props[e];return(Object(v.jsx)(R,{field:e,content:t,handler:this.props.stepCompleted,identities:this.props.identities,permissions:this.props.permissions},e))})}render(){const e=this.props.email&&"string"==typeof this.props.email,t=this.props.facebook_id,s=this.props.showTve,i=this.props.tveAuthContext&&this.props.tveAuthContext.authBlock;return Object(v.jsxs)("div",{className:"molecule editProfile",children:[Z||(Z=Object(v.jsx)("h1",{children:"Settings"})),Object(v.jsxs)("ul",{children:[this.buildFields(),Object(v.jsxs)("li",{children:[z||(z=Object(v.jsx)(l.SVG,{type:"icon",target:"facebookFilled"})),Object(v.jsx)("span",{children:t?"Connected":"Facebook"}),!t&&Object(v.jsx)(M.a,{attemptFbLogin:this.props.linkFB,loadScript:this.props.loadScript,children:"Link"})]}),i&&s&&Object(v.jsx)(Y,{setTveAuthContext:this.props.setTveAuthContext,tveAuthContext:this.props.tveAuthContext,setTveProviderLogo:this.props.setTveProviderLogo,tveProviderLogo:this.props.tveProviderLogo}),Object(v.jsxs)("li",{className:"my-events",children:[$||($=Object(v.jsx)(l.SVG,{type:"icon",target:"youtube"})),H||(H=Object(v.jsx)("span",{children:" My Events "})),Object(v.jsx)(l.SVG,{type:"icon",target:"rightArrow",onClick:this.onEventsClick})]})]}),!!e&&Object(v.jsx)(l.Button,{onClick:this.onClick,children:"Reset Password"})]})}}var Q,X,ee=J,te=s(71),se=s(28),ie=s(67),re=s(8);ass ae extends a.a.PureComponent{constructor(e){super(e),this.updateAccount=this.updateAccount.bind(this),this.saveUsername=this.saveUsername.bind(this),this.onPhoneUpdate=this.onPhoneUpdate.bind(this),this.onEmailUpdate=this.onEmailUpdate.bind(this),this.onCancel=this.onCancel.bind(this),this.state={phoneErrors:[],emailErrors:[]}}pdateAccount(e){const t=this.props.id;return this.props.updateUserInfo({info:e,userID:t})}saveUsername(e){const t=this.props.id,s={username:e};return this.props.saveUsername({info:s,userID:t})}onEmailUpdate(e,t){const s=this.props.id,{email:i}=t,r={email:i};return this.props.updateUserEmail({info:r,userID:s}).then(e=>(this.props.updateSubscriptionGroup(t),this._emailFlow.stepCompleted(),e)).catch(e=>{var t,s,i;this.setState({emailErrors:[e]}),this.props.trackEvent({tag_manager_event:"user_error",errorType:"account_management",errorMessage:(null===(t=e.output)||void 0===t?void 0:null===(s=t.payload)||void 0===s?void 0:s.error)||e.message,errorCode:null===(i=e.data)||void 0===i?void 0:i.errorCode,page:"email-verification"})})}onPhoneUpdate(e,t){const s=this.props.id,i={phone:t};return this.props.updateUserInfo({info:i,userID:s}).then(()=>(p.a.remove("br_user",!0),this.props.requestPhoneVerify(t,s).then(()=>{this.setState({phoneErrors:[]}),p.a.set("br_phone",t),this._phoneFlow.stepCompleted()}))).catch(e=>{this.setState({phoneErrors:[e]}),this.props.trackEvent({tag_manager_event:"user_error",errorType:"account_management",errorMessage:e.output.payload.error||e.message,errorCode:e.data.errorCode,page:"phone-verification"})})}render(){const e=Object(v.jsxs)(l.Button,{classes:"flowBack",onClick:this.onCancel,children:[Q||(Q=Object(v.jsx)(l.SVG,{type:"icon",target:"leftArrow"})),"Back"]});return(Object(v.jsx)("div",{className:"page editAccountPage",children:Object(v.jsxs)(d.a,{ref:e=>{this._mainFlow=e},children:[Object(v.jsx)(ee,oe({flowKey:"editProfile",linkFB:this.props.linkFB,loadScript:this.props.loadScript},this.props)),Object(v.jsx)(b.a,{flowKey:"username",onUserEdit:!0,checkUsername:this.props.checkUsername,saveUsername:this.saveUsername,value:this.props.username,btnText:"Save",children:e}),Object(v.jsx)(U,{flowKey:"bio",onUserEdit:!0,updateAccount:this.updateAccount,value:this.props.bio,btnText:"Save",children:e}),Object(v.jsxs)(d.a,{flowKey:"phone",ref:e=>{this._phoneFlow=e},children:[Object(v.jsx)(w.a,{errors:this.state.phoneErrors,flowKey:"phone",onSubmit:this.onPhoneUpdate,buttonText:"Send SMS Verification",title:"Update Your Phone Number",value:this.props.phone,onUserEdit:!0,children:e}),Object(v.jsx)(L.a,{userID:this.props.id,authorizePhone:this.props.authorizePhoneAccount,errors:this.state.phoneErrors,onEditUser:!0,trackEvent:this.props.trackEvent,verifyPhone:this.props.verifyPhoneAccount,children:e})]}),Object(v.jsxs)(d.a,{flowKey:"email",ref:children:[Object(v.jsxs)(I,{onSubmit:this.onEmailUpdate,onUserEdit:!0,errors:this.state.emailErrors,value:this.props.email,btnText:"Save",trackEvent:this.props.trackEvent,mParticleModifyIdentity:this.props.mParticleModifyIdentity,mParticleUpdateAttributes:this.props.mParticleUpdateAttributes,accountCountry:this.props.accountCountry,uiCountryCode:this.props.uiCountryCode,children:[e,X||(X=Object(v.jsx)(x,{}))]}),Object(v.jsx)(j.a,{onEditUser:!0,children:e})]}),Object(v.jsx)(m.a,{field:this.props.field,flowKey:"name",onUserEdit:!0,status:this.props.status,updateData:this.updateAccount,firstName:this.props.first_name,lastName:this.props.last_name,btnText:"Save",validateName:this.props.validateName,children:e}),Object(v.jsx)(u.a,{flowKey:"resetPassword",onSubmit:this.props.requestPasswordReset,trackEvent:this.props.trackEvent,children:e})]})}))}}t.default=Object(c.b)((function(e){const t=re.t(e),s=re.s(e),i=(null==t?void 0:t.country)||"ZZ",r=(null==s?void 0:s.countryCode)||"ZZ";return oe(oe({},t),{},{accountCountry:i,uiCountryCode:r})}),(function(e){const t={authorizePhoneAccount:(t,s)=>e(te.p(t,s)),checkUsername:linkFB:t=>e(te.l(t)),loadScript:t=>e(se.d(t)),mParticleModifyIdentity:t=>e(ie.d(t)),mParticleUpdateAttributes:t=>e(ie.e(t)),requestPasswordReset:t=>e(te.o(t)),requestPhoneVerify:saveUsername:e=>{let{info:s,userID:i}=e;return h.e(s.username).then(},trackEvent:t=>e(ie.f(t)),updateSubscriptionGroup:t=>e(te.u(t)),updateUserEmail:t=>e(te.v(t)),updateUserInfo:t=>e(te.t(t)),validateName:t=>e(te.w(t)),verifyPhoneAccount:;return t}))(ae)},860:function(e,t,s){"use strict";var i,r,n,o,a,c=s(3),l=s.n(c),h=s(21),p=s(0);class d extends l.a.PureComponent{constructor(e){super(e),this.onSubmit=this.onSubmit.bind(this),this.state={error:!1,success:!1}}componentDidMount(){const e=this.props.returnUrl&&this.props.returnUrl.includes("bracketchallenge")?"BCG":"BR";this.props.trackEvent({accountType:"email",app:e,tag_manager_event:"forgot_password"})}onSubmit(e){e.preventDefault();const t=e.target.querySelector("input[name='email']");this.setState({error:!1,success:!1}),this.props.onSubmit({email:t.value}).then(.catch(e=>{e&&e.output&&401===e.output.statusCode&&this.setState({error:"No account found."})})}render(){const e=i||(i=Object(p.jsx)("p",{children:"Enter your email and we'll send you a link to reset your password."}));return(Object(p.jsxs)("div",{className:"atom requestPasswordResetForm",children:[r||(r=Object(p.jsx)("h1",{children:"Reset Password"})),this.state.success?n||(n=Object(p.jsx)("div",{className:"success",children:Object(p.jsx)("p",{children:"Link sent! Please check your email."})})):Object(p.jsxs)("form",{onSubmit:this.onSubmit,children:[this.state.error?Object(p.jsx)("p",{className:"errorMessage",children:this.state.error}):e,o||(o=Object(p.jsx)("input",{name:"email",autoFocus:!0,type:"email",required:!0,placeholder:"Email",pattern:"^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$"})),a||(a=Object(p.jsx)(h.Button,{classes:"submit",type:"submit",children:"Send Link"}))]}),this.props.children]}))}}t.a=d}}]);
//# sourceMappingURL=https://static-assets.bleacherreport.net/js/editAccountPage-dbce13d2.js.map