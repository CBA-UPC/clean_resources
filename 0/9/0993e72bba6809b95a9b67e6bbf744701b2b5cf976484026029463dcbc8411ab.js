(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1071:function(t,e,n){"use strict";var o=n(354),l=n.n(o);e.default=l.a},1136:function(t,e,n){"use strict";n.r(e);var o=n(2),l=n(278),r=n(252),c={components:{TeamMembers:l.a},computed:{members(){return this.configuration?this.configuration["management-board"].map(t=>({photo:t.photo,title:t.name,small:t["position_".concat(this.$i18n.locale)],description:t["bio_".concat(this.$i18n.locale)]})):[]},configuration(){return this.$store.state.configuratorN2cr.configuration[6741100079096896]}},asyncData:t=>Object(o.a)((function*(){var{store:e}=t;yield e.dispatch("configuratorN2cr/getConfig",{configName:"6741100079096896",hasTitle:!0}),yield e.dispatch("dynamicConfig/updateConfig",{page:{imgUrl:"https://holding.wpcdn.pl/backgrounds/14.jpg"},lineMenu:[{url:{name:"media"},title:{pl:"WP Media",en:"WP Media"}},{url:{name:"media-zespol-zarzadzajacy"},title:{pl:"Zespół Zarządzający",en:"Management Board"}},{url:{name:"media-nasze-serwisy"},title:{pl:"Serwisy, radio, telewizja",en:"Websites, radio, television"}},{url:{name:"media-statystyki"},title:{pl:"Statystyki",en:"Statistics"}},{url:{name:"media-ogloszenia"},title:{pl:"Ogłoszenia",en:"Announcements"}}]})}))(),head(){return Object(r.a)(this.$route.path,this.$t("seo.title"),this.$t("seo.desc"))},nuxtI18n:{paths:{en:"/media/management-board"}}},d=n(3),m=n(1071),component=Object(d.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-lg-12"},[e("team-members",{attrs:{members:this.members}})],1)}),[],!1,null,"2db108e6",null);"function"==typeof m.default&&Object(m.default)(component);e.default=component.exports},252:function(t,e,n){"use strict";e.a=(path,title,t)=>({title:title,link:[{rel:"canonical",href:"https://holding.wp.pl"+path}],meta:[{hid:"description",name:"description",content:t},{hid:"og:title",property:"og:title",content:title},{hid:"og:description",property:"og:description",content:t}]})},259:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"pl":{"close":"Zamknij"},"en":{"close":"Close"}}'),delete t.options._Ctor}},266:function(t,e,n){},267:function(t,e,n){},275:function(t,e,n){"use strict";n(266)},276:function(t,e,n){"use strict";var o=n(259),l=n.n(o);e.default=l.a},277:function(t,e,n){"use strict";n(267)},278:function(t,e,n){"use strict";var o=n(21),l={data:()=>({member:{}}),methods:{setMember(t){this.member=t}}},r=(n(275),n(3)),c=n(276),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal modal-auto-open p-20",attrs:{id:"modalAboutMe","data-delay":"99999999"}},[n("div",{staticClass:"row m-l-0 m-r-0"},[n("div",{staticClass:"col-md-12 d-sm-block no-padding"},[n("div",{staticClass:"bg",style:"background: transparent url("+t.member.photo+") no-repeat scroll center top / cover;"}),t._v(" "),n("div",[n("h2",{staticClass:"m-t-30"},[t._v(t._s(t.member.title)+" "),n("br"),n("small",{staticClass:"m-t-15 d-block",domProps:{innerHTML:t._s(t.member.small+(t.member.text?".<br>"+t.member.text:""))}})]),t._v(" "),n("p",{staticClass:"m-b-20",domProps:{innerHTML:t._s(t.member.description)}}),t._v(" "),n("a",{staticClass:"btn btn-light modal-close",attrs:{href:"#"}},[t._v(t._s(t.$t("close")))])])])])])}),[],!1,null,"4a130c8c",null);"function"==typeof c.default&&Object(c.default)(component);var d={components:{ModalAboutMe:component.exports,Linker:o.a},props:["members","carousel"],data(){return{isCarousel:this.carousel&&this.members.length>4}},methods:{onMemberClick(t){this.$refs.modalAboutMe.setMember(t)}}},m=(n(277),Object(r.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.members?n("div",{staticClass:"team-members mt-5 m-b-80",class:{carousel:t.isCarousel,row:!t.isCarousel,en:"en"===t.$i18n.locale},attrs:{"data-arrows":"true","data-lazy-load":"true","data-margin":"20","data-items":"4"}},t._l(t.members,(function(e,o){return n("div",{key:o,class:{"col-lg-3":!t.isCarousel}},[n("div",{staticClass:"team-member",class:{"team-member-modal":e.description}},[n("a",{attrs:{href:e.description?"#modalAboutMe":null,"data-lightbox":!!e.description&&"inline"},on:{click:function(n){return t.onMemberClick(e)}}},[n("div",{staticClass:"team-image"},[n("img",{attrs:{src:t.isCarousel?"":e.photo,"data-flickity-lazyload":t.isCarousel?e.photo:"",alt:e.title}})]),t._v(" "),n("div",{staticClass:"team-desc"},[n("h3",[t._v(t._s(e.title))]),t._v(" "),n("span",{domProps:{innerHTML:t._s(e.small)}}),t._v(" "),n("p",[t._v(t._s(e.text))]),t._v(" "),n("div",{staticClass:"align-center"},[e.fb?n("linker",{staticClass:"btn btn-xs btn-slide btn-light",attrs:{link:{url:e.fb,external:!0,blank:!0},"data-width":"95"}},[n("i",{staticClass:"fab fa-facebook-f"}),t._v(" "),n("span",[t._v("Facebook")])]):t._e(),t._v(" "),e.tw?n("linker",{staticClass:"btn btn-xs btn-slide btn-light",attrs:{link:{url:e.tw,external:!0,blank:!0},"data-width":"86"}},[n("i",{staticClass:"fab fa-twitter"}),t._v(" "),n("span",[t._v("Twitter")])]):t._e(),t._v(" "),e.ig?n("linker",{staticClass:"btn btn-xs btn-slide btn-light",attrs:{link:{url:e.ig,external:!0,blank:!0},"data-width":"105"}},[n("i",{staticClass:"fab fa-instagram"}),t._v(" "),n("span",[t._v("Instagram")])]):t._e(),t._v(" "),e.li?n("linker",{staticClass:"btn btn-xs btn-slide btn-light",attrs:{link:{url:e.li,external:!0,blank:!0},"data-width":"90"}},[n("i",{staticClass:"fab fa-linkedin"}),t._v(" "),n("span",[t._v("LinkedIn")])]):t._e(),t._v(" "),e.email?n("a",{staticClass:"btn btn-xs btn-slide btn-light",attrs:{href:"mailto:"+e.email,"data-width":"80"}},[n("i",{staticClass:"icon-mail"}),t._v(" "),n("span",[t._v("e-mail")])]):t._e()],1)])])])])})),0):t._e(),t._v(" "),n("modal-about-me",{ref:"modalAboutMe"})],1)}),[],!1,null,"0d8aefda",null));e.a=m.exports},354:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"pl":{"seo":{"title":"Zespół Zarządzający","desc":"Skład oraz kompetencje Zespołu Zarządzającego WP Media"}},"en":{"seo":{"title":"Management Board","desc":"Members and competences of the WP Media Management Board"}}}'),delete t.options._Ctor}}}]); n&&t(e.prototype,n),a&&t(e,a),e}}(),i=function t(e,n,a){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,a)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(a):void 0},o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"getJSON",value:function(){if(this.props.children)return i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parseChildren",this).call(this,!0)}}]),e}(((a=n(7986))&&a.__esModule?a:{default:a}).default);e.Z=o},5854:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{w:()=>o});var r=n(43658),i=n(46596);function o(t){return t.filter((t=>{let{chunkIdentity:e,props:n}=t;var a;return!(null===(a=s[e.type])||void 0===a?void 0:a.call(s,n))}))}const s={[r.I.PHOTO]:t=>t.images.some(l),[r.I.TEASER]:t=>(0,i.k)(t.materialUrl)},l=t=>(0,i.k)(t.width)||(0,i.k)(t.height);a()}catch(c){a(c)}}))},34542:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{l:()=>m});var r=n(85893),i=n(67294),o=n(84048),s=n(14784),l=n(57482),c=n(61334),d=n(86010),u=n(35745);const h=i.lazy((()=>n.e(9482).then(n.bind(n,99482)).then((t=>({default:t.Comments})))));function m(t){let{contentId:e,commentsCount:n,contentAuthorsIds:a,wrapperClassName:m,initialCommentsLimit:p,customElement:v,reviewMode:f=!1,ratingContentType:g}=t;return(0,r.jsxs)(s.Z,{validateHash:l.Z,children:[(0,r.jsx)("div",{className:u.Z.countContainer,children:`${f?"Opinie":"Komentarze"} (${n})`}),v,(0,r.jsx)(c.Z,{className:(0,d.Z)(u.Z.mainWrapper,m),children:(0,r.jsx)(i.Suspense,{fallback:(0,r.jsx)(o.O,{isLoading:!0,numberOfRows:1,rowHeight:"190px"}),children:(0,r.jsx)(h,{contentId:e,commentsCount:n,contentAuthorsIds:a,initialCommentsLimit:p,ratingContentType:g,reviewMode:f})})})]})}a()}catch(p){a(p)}}))},28478:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{p:()=>c});var r=n(85893),i=n(2106),o=n(95328),s=n(3905),l=t([i,s]);function c(t){let{publishedOn:e,modifiedOn:n}=t;return(0,r.jsx)(i.HY,{className:o.Z.dateContent,children:(0,s.E)({publishedOn:e,modifiedOn:n})})}[i,s]=l.then?(await l)():l,a()}catch(d){a(d)}}))},3905:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{E:()=>c});var r=n(83936),i=n(23743),o=n(27484),s=n.n(o),l=t([i,r]);[i,r]=l.then?(await l)():l;const d=10;function c(t){let{publishedOn:e,modifiedOn:n}=t;const a=n&&s()(n).isAfter(s()(e).add(d,"minute")),o=(0,i.p)(e,r.k.articleDateFormat);if(a){const t=(0,i.p)(n,r.k.articleDateFormat);return`${o}, ${r.I.updated}: ${t}`}return o}a()}catch(u){a(u)}}))},2215:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{y:()=>m});var r=n(85893),i=n(51442),o=n(22592),s=n(90787),l=n(28478),c=n(43270),d=n(91666),u=t([d,l,s]);function m(t){let{publishedOn:e,modifiedOn:n,url:a,authors:u,actionElement:m}=t;const{platform:{isMobile:h}}=(0,i.eb)();return(0,r.jsxs)("div",{className:c.Z.contentContainer,children:[u?(0,r.jsx)(d.o,{authors:u,additionalContent:(0,r.jsx)(l.p,{publishedOn:e,modifiedOn:n})}):(0,r.jsx)(l.p,{publishedOn:e,modifiedOn:n}),(0,r.jsxs)("div",{className:c.Z.actionWrapper,children:[m,(0,r.jsx)(s.D,{url:a,withLabel:!0,...h&&{dropdownAlign:o.r.LEFT}})]})]})}[d,l,s]=u.then?(await u)():u,a()}catch(h){a(h)}}))},91666:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{o:()=>v});var r=n(85893),i=n(51442),o=n(14697),s=n(83936),l=n(1675),c=n(2749),d=n(2955),u=n(2106),m=n(36081),h=n(11010),p=t([d,u,o,s]);function v(t){let{authors:e,additionalContent:n}=t;const{generateUrl:a}=(0,i.eb)(),p=e.map((t=>{let{id:e,name:n,image:a}=t;return(0,r.jsx)(d.q,{alt:n,src:null==a?void 0:a.file,size:d.D.MEDIUM,className:m.Z.avatar},e)})),v=!(0,c.x)(e),f=e.length>1,g=e.some((t=>t.elaborator)),y=e.map((t=>{let{id:e,name:n,slug:i}=t;const s=f?(0,h.o)(n):n,c=e&&a(l.x.AUTHOR_PUBLICATIONS,{id:e,slug:i});return(0,r.jsx)(u.E1,{bold:!0,children:c?(0,r.jsx)(o.r,{plainStyles:!0,title:n,to:c,className:m.Z.authorAnchor,children:s}):s},e)})),b=v?m.Z.contentContainer:"";return(0,r.jsxs)("div",{className:b,children:[v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:m.Z.avatarWrapper,children:p}),(0,r.jsxs)("div",{children:[g&&(0,r.jsxs)(u.E1,{bold:!0,children:[s.I.elaborationPrefix," "]}),(0,r.jsx)("span",{className:m.Z.nameWrapper,children:y})]})]}),n]})}[d,u,o,s]=p.then?(await p)():p,a()}catch(f){a(f)}}))},11010:(t,e,n)=>{n.d(e,{o:()=>r});const a="Ch";function r(t){const e=t.split(" ");return e.map(((t,n)=>n===e.length-1?t:`${t.startsWith(a)?a:t.charAt(0)}.`)).join(" ")}},99158:(t,e,n)=>{n.d(e,{ThreeColumnsGrid:()=>r});var a=n(77994);const r={Row:(0,a.R)("EDnx"),ContentColumn:(0,a.R)("EDo9"),WideContentColumn:(0,a.R)("EDo-"),SidebarColumn:(0,a.R)("EDf3"),AdditionalSidebarColumn:(0,a.R)("EDo7")}},47293:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{D:()=>t});var r=n(33050);const t=t=>t.filter(r.O$).filter((0,r.g6)(["id","relativeProductUrl"])).map((t=>({type:t.type,cardData:{id:t.id,relativeProductUrl:t.relativeProductUrl,title:t.title,thumbnailUrl:t.image,authorName:t.author,url:t.url}})));a()}catch(t){a(t)}}))},71212:(t,e,n)=>{n.d(e,{x:()=>a});const a=n(19098).Ps`
  fragment BasicCollectionRelationAuthor on CollectionRelationAuthor {
    id
    name
    slug
    elaborator
    image {
      file: url
    }
  }
`},22453:(t,e,n)=>{n.d(e,{C:()=>a});const a=n(19098).Ps`
  fragment BasicCollectionRelationTag on CollectionRelationTag {
    id
    name
    slug
  }
`},52820:(t,e,n)=>{n.d(e,{W:()=>a});const a=n(19098).Ps`
  fragment CategoryData on CollectionRelationTag {
    id
    name
    secondaryCid
    primary
    path {
      id
      name
      slug
    }
  }
`},79633:(t,e,n)=>{n.d(e,{k:()=>d});var a=n(19098),r=n(71212),i=n(22453),o=n(52820),s=n(86711),l=n(19902),c=n(23773);const d=a.Ps`
  fragment PublicationData on CollectionContent {
    id
    slug
    relativeProductUrl
    title: name
    type
    nonIndexable
    publishedOn: publishedFrom
    modifiedOn: modified
    status
    sponsor {
      name
      logo {
        ...Image
      }
      url
      description
    }
    sponsored
    sponsoredInfo
    premium
    authorHidden
    sources {
      id
      name
      url
      image {
        url
      }
    }
    sourcesHidden
    lifespan
    authors {
      ...BasicCollectionRelationAuthor
    }
    creativeWork {
      republication
    }
    description
    commentsCount
    opinionsEnabled
    tags(taxonomies: [TAG]) {
      ...BasicCollectionRelationTag
    }
    technicalTags: tags(taxonomies: [TECHNICAL]) {
      name
    }
    categories: tags(taxonomies: [CATEGORY]) {
      ...CategoryData
    }
    mainMedia: contentParts(types: [MAIN_MEDIA], platform: $platform) {
      ... on ContentPartMainMedia {
        images {
          ...Image
        }
        mediaId
        liveId
        contentPartSubtype
        autoplay
        advertisement
        clip {
          duration
        }
      }
    }
    canonicalUrl
    productUrl
    metaParts(types: [TITLE, DESCRIPTION, SCRIPT, OG_PHOTO]) {
      ...SupportedMetaParts
    }
    ...PublicationActions
  }
  ${r.x}
  ${i.C}
  ${o.W}
  ${s._}
  ${c.Z}
  ${l.I}
`},9150:(t,e,n)=>{n.d(e,{e:()=>a});const a=n(19098).Ps`
  fragment RecordStats on RecordStats {
    contentPartsCount
    characterCount
    characterCountBucket
    insertCount
    photoCount
    interactiveElement
    linkCount
    lifespan
    isPremium
    editorialType
    title
    internalSuppliers
    externalSuppliers
    internalAuthors
    externalAuthors
    firstPublicationDate
    firstPublicationQuarter
    lastModificationDate
    lastModificationQuarter
    publicationVersion
    isPromoted
    ageRestriction
    isDrastic
    siteCategory
    categoryIAB
    categoryGemius
    software {
      platform
      name
      category
      subCategory
      version
    }
    cOrigin
  }
`},10926:(t,e,n)=>{n.d(e,{P:()=>i});var a=n(19098),r=n(63047);const i=a.Ps`
  query getSimilarRecommendations(
    $productId: String!
    $contentId: String!
    $similarContentTypes: [RecommendationContentType!] = [ARTICLE]
    $similarLimit: Int = 8
  ) {
    recommendations(productId: $productId, contentId: $contentId) {
      similar(
        productIds: [$productId]
        contentTypes: $similarContentTypes
        limit: $similarLimit
        version: v2
      ) {
        teasers {
          ...RecommendationTeaser
        }
      }
    }
  }
  ${r.A}
`},77076:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{x:()=>d});var r=n(85893),i=n(77544),o=n(14111),s=n(82216),l=n(90675),c=t([s,l,i]);function d(t){let{url:e,title:n,contentId:a,contentType:c}=t;const{hasSavedRecord:d,recordAction:u,savePostLoginRecordData:m,waveClick:h}=(0,s.i)({url:e,title:n,contentId:a,contentType:c}),p=d?"Artykuł zapisany na później":l.Y;return(0,r.jsx)(i.u,{content:p,position:o.DU.BOTTOM,children:(0,r.jsx)(l.R,{withLabel:!0,hasSavedRecord:d,recordAction:u,savePostLoginRecordData:m,waveClick:h})})}[s,l,i]=c.then?(await c)():c,a()}catch(u){a(u)}}))},82216:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{i:()=>f});var r=n(51442),i=n(82989),o=n(83051),s=n(81873),l=n(14111),c=n(39292),d=n(54992),u=n(64316),m=n(27314),h=n(65126),p=n(81778),v=t([m,h,p]);function f(t){let{url:e,title:n,contentId:a,contentType:v}=t;var f,g;const{productId:y}=(0,r.eb)(),{deleteRecordFromSaved:b}=(0,m.m)(),{saveRecord:C}=(0,h.V)({contentId:a}),{saveDelayedAction:x}=(0,o.f)(),{data:I}=(0,u.a)(p.n,{variables:{productIds:[y],articleId:a},fetchPolicy:"cache-only"}),w=null==I||null===(g=I.collections)||void 0===g||null===(f=g.article)||void 0===f?void 0:f.recordActions.actions.find((t=>{let{type:e}=t;return e===s.U.LIKE})),j=Boolean(w);return{hasSavedRecord:j,recordAction:()=>j?(async()=>{await b({variables:{id:(null==w?void 0:w.id)||"",contentId:a,productId:y},update(t){t.modify({id:t.identify(w||{}),fields:(t,e)=>{let{DELETE:n}=e;return n}})}})})():(async()=>{(0,i.X)(l.HA.SAVE_FOR_LATER),await C({variables:{url:e,title:n,contentId:a,productId:y,contentType:v}})})(),savePostLoginRecordData:()=>{x({type:c.D.SAVE_RECORD,data:{url:e,title:n,contentId:a,contentType:v}})},waveClick:t=>{WP.stat.wave(d.R.SAVED_ARTICLES,{event:j?"undo":"click",area:"service_intext",state:t?"logged":"not_logged",target:a})}}}[m,h,p]=v.then?(await v)():v,a()}catch(g){a(g)}}))},81778:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{n:()=>t});var r=n(19902);const t=n(19098).Ps`
  query GetPublicationActions($productIds: [String!]!, $articleId: String!) {
    collections(productIds: $productIds) {
      article(id: $articleId) {
        ...PublicationActions
      }
    }
  }

  ${r.I}
`;a()}catch(t){a(t)}}))},58981:(t,e,n)=>{n.d(e,{n:()=>r});var a=n(10790);function r(t){let{errors:e,errorCounter:n,errorFieldNames:r,withCriticalFallback:i=!1}=t;e.forEach((t=>{let{path:e}=t;const o=r.find((t=>null==e?void 0:e.includes(t)));var s;if(o)null===(s=(0,a.y)())||void 0===s||s[n].inc({error_type:o});else if(i){var l;null===(l=(0,a.y)())||void 0===l||l[n].inc({error_type:"critical"})}}))}},50253:(t,e,n)=>{var a;n.d(e,{W:()=>a}),function(t){t.BLOG_ACTION_ERRORS_COUNTER="blogActionErrorsCounter",t.LISTING_ACTION_ERRORS_COUNTER="listingActionErrorsCounter",t.RECOMMENDATIONS_ERRORS_COUNTER="recommendationsErrorsCounter",t.RECORDS_ACTION_ERRORS_COUNTER="recordsActionErrorsCounter",t.WIDGET_ERRORS_COUNTER="widgetErrorsCounter"}(a||(a={}))},67754:(t,e,n)=>{n.d(e,{T:()=>o});var a=n(85893),r=n(67294),i=n(86010);const o=(0,r.forwardRef)(((t,e)=>{let{visible:n=!1}=t;return(0,a.jsx)("div",{ref:e,className:(0,i.Z)("M5afr",{M5r3:n})})}))},92061:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{r:()=>d});var r=n(67549),i=n(50731),o=n(45697),s=n(51282),l=n(84583),c=t([s]);s=(c.then?(await c)():c)[0];const d={type:(0,o.oneOf)(Array.from(new Set([...Object.values(i.p),...Object.values(r.qw)]))).isRequired,cardData:(0,o.oneOfType)([(0,o.shape)({publishDate:o.string,authorUrl:o.string,authorName:o.string,...l.Z}),(0,o.shape)(s.U)]).isRequired,nativeSlotNumber:o.number,nativeContent:(0,o.oneOfType)([(0,o.shape)({data:(0,o.shape)({src:o.string.isRequired,url:o.string.isRequired,text:o.string.isRequired,hideLabel:o.bool,labelText:o.string,privacyIcon:o.string,privacyLink:o.string})}),(0,o.shape)({data:(0,o.shape)({})})]),withStaticTeasersUrl:o.bool};a()}catch(t){a(t)}}))},26884:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{e:()=>m,w:()=>h});var r=n(85893),i=n(62175),o=n(50731),s=n(51282),l=n(73189),c=n(90495),d=n(77374),u=t([s,l,i,c]);[s,l,i,c]=u.then?(await u)():u;const h=new Map([[o.p.SOFTWARE_APP,s.Z],[o.p.ARTICLE,l.G],[o.p.BLOG,l.G]]);function m(t){let{type:e,cardData:n,nativeSlotNumber:a,nativeContent:o,withStaticTeasersUrl:s=!1}=t;const l=h.get(e);return(0,r.jsxs)("div",{className:d.Z.relatedItemContainer,role:"listitem",children:[a&&(0,r.jsx)(i.SP,{slotNumber:a}),(0,r.jsx)(c.I,{nativeData:o,children:l&&(0,r.jsx)(l,{...n,withStaticTeasersUrl:s})})]})}a()}catch(p){a(p)}}))},73189:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{G:()=>m});var r=n(85893),i=n(14697),o=n(83936),s=n(44016),l=n(23743),c=n(5945),d=n(62671),u=t([c,l,o,i]);function m(t){let{thumbnailUrl:e,title:n,commentsCount:a,publishDate:u,relativeProductUrl:m,authorName:h,authorUrl:p,url:v,withStaticTeasersUrl:f}=t;const g=f&&v?v:m,y=h||s.c5;return(0,r.jsxs)(c.Z,{relatedUrl:g,commentsUrl:`${g}#komentarze`,title:n,thumbnailUrl:e,commentsCount:a,children:[u&&(0,r.jsx)("span",{className:d.Z.infoElement,children:(0,l.p)(u,o.k.listingDateFormat)}),p?(0,r.jsx)(i.r,{className:d.Z.infoElement,title:y,to:p,plainStyles:!0,children:y}):(0,r.jsx)("span",{className:d.Z.infoElement,children:y})]})}[c,l,o,i]=u.then?(await u)():u,a()}catch(h){a(h)}}))},90495:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{I:()=>m});var r=n(85893),i=n(67294),o=n(83810),s=n(67754),l=n(5945),c=n(62671),d=t([l]);l=(d.then?(await d)():d)[0];const u=(0,i.forwardRef)(((t,e)=>{let{nativeData:{data:{url:n,src:a,text:i,hideLabel:o,labelText:s,privacyIcon:d,privacyLink:u}}}=t;return(0,r.jsx)(l.Z,{relatedUrl:n,thumbnailUrl:a,title:i,privacyIcon:d,privacyLink:u,wrapperRef:e,nativeAd:!0,children:(0,r.jsx)("span",{className:c.Z.infoElement,children:!o&&(s??"Reklama")})})})),m=(0,o.Z)(u,s.T);a()}catch(t){a(t)}}))},44399:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{T:()=>j});var r=n(67549),i=n(95654),o=n(88414),s=n(33050),l=n(75984),c=n(59339),d=n(23743),u=n(79680),m=n(58999),h=n(95145),p=n(40817),v=n(46596),f=n(86486),g=n(88126),y=n(2749),b=n(73268),C=n(76497),x=n(85560),I=n(85424),w=t([l,x,d,I]);[l,x,d,I]=w.then?(await w)():w;const T=/-(\d{16})/,O=(t,e)=>e===i.F.WPMOTO?t.replace(T,",$1"):t,R=2,Z=t=>(0,u.q)((0,m.v)(t),(0,h.UI)((0,p.v)("name"))),P=t=>(0,v.k)(t)?void 0:(0,f.Y)(t.images),A=t=>(null==t?void 0:t.contentPartSubtype)===r.bc.WIDEOWPPL?(0,g.C)("images",t):void 0;function j(t){let{data:e,categoryRootId:n,siteId:a=i.F.NONE}=t;var r,u,m,h,p;const g=e.status!==o.r.ACCEPTED,w=(null===(r=e.metaParts.find((0,s.Hn)("MetaPartTitle")))||void 0===r?void 0:r.value)??void 0,j=(0,l.L)(e.publishedOn??e.modifiedOn),T=e.mainMedia.find((0,s.Hn)("ContentPartMainMedia")),E=P(T),S=A(T),N=!(0,v.k)(e.authors)&&!(0,y.x)(e.authors)&&!e.authorHidden,U=(0,b.q)(R,e.authors??[]),k=(0,C.d)({categories:e.categories,categoryRootId:n}),L=null===(u=(0,f.Y)(k))||void 0===u?void 0:u.name,D=null===(m=e.metaParts.find((0,s.Hn)("MetaPartOgPhoto")))||void 0===m?void 0:m.images[0],M={title:e.title,metaTitle:w,...e.nonIndexable&&{headers:c.Z.NOINDEX_FOLLOW},description:(0,x.f)({metaParts:e.metaParts,description:e.description,contentParts:e.blocks}),canonicalUrl:O(e.canonicalUrl||"",a),openGraphInfo:{pubType:e.type,publishedOn:j,authors:U,tags:e.tags||[],primaryImage:D??E}},{recordStats:_}=e,$={cdate:(0,d.p)(j,"YYYY-MM-DD"),ctags:Z(",")(e.tags||[]),csource:Z(",")(e.sources||[]),cauthor:Z(",")(U),ccategory:L,csystem:"ncr",cpageno:1,cpagemax:1,ciab:null==_||null===(h=_.categoryIAB)||void 0===h?void 0:h.replace(/\|/g,","),ctlength:null==_?void 0:_.characterCount,corigin:((null==_?void 0:_.cOrigin)??[]).join(","),crepub:(null===(p=e.creativeWork)||void 0===p?void 0:p.republication)?1:0,...e.premium&&{cpremium:1}},H={id:e.id,title:e.title,slug:e.slug,relativeProductUrl:e.relativeProductUrl,type:e.type,metaTitle:w,sponsor:e.sponsor,sponsored:e.sponsored,sponsoredInfo:e.sponsoredInfo,premium:e.premium,publishedOn:j,modifiedOn:(0,l.L)(e.modifiedOn),primaryImage:E,primaryVideo:S,authors:N?U.map((t=>({...t,avatar:t.image?t.image.file:void 0}))):[],blocks:e.blocks,tags:e.tags||[],commentsCount:e.commentsCount,opinionsEnabled:e.opinionsEnabled,metaScripts:e.metaParts.filter((0,s.Hn)("MetaPartScript")),technicalTags:e.technicalTags||[],isDraft:g,lifespan:e.lifespan,canonicalUrl:O(e.canonicalUrl||"",a),categoryPath:k,sources:e.sources,sourcesHidden:e.sourcesHidden};return{slug:e.slug,metaData:M,dotData:$,gtmData:(0,I.w)({recordStats:e.recordStats,commentsCount:e.commentsCount,recordType:e.type}),viewData:H}}a()}catch(E){a(E)}}))},531:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{T:()=>h});var r=n(85893),i=n(99158),o=n(49693),s=n(2215),l=n(77076),c=n(4674),d=n(62483),u=n(72486),m=t([d,o,s,l,c]);[d,o,s,l,c]=m.then?(await m)():m;const{WideContentColumn:p,ContentColumn:v,SidebarColumn:f}=i.ThreeColumnsGrid;function h(t){let{url:e,tags:n,title:a,authors:i,contentId:m,publishedOn:h,modifiedOn:g,leadContent:y,contentType:b,materialType:C,sidebarHeaderElement:x,shouldShowEditorLink:I=!1,editorialType:w,...j}=t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(p,{className:u.Z.relativeColumn,children:[I&&(0,r.jsx)(d.R,{contentId:m,materialType:C,className:u.Z.editorLinkButton}),(0,r.jsx)(o.y,{title:a,...j,contentHeaderInfoBar:(0,r.jsx)(s.y,{url:e,authors:i,publishedOn:h,modifiedOn:g,actionElement:(0,r.jsx)(l.x,{url:e,title:a,contentId:m,contentType:b})})})]}),x&&(0,r.jsx)(f,{className:u.Z.sidebarColumn,children:x}),(0,r.jsxs)(v,{children:[y,(0,r.jsx)(c.w,{tags:n,editorialType:w})]})]})}a()}catch(g){a(g)}}))},21443:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{x:()=>C});var r=n(85893),i=n(56105),o=n(66447),s=n(57031),l=n(51442),c=n(67549),d=n(83936),u=n(68167),m=n(1675),h=n(73484),p=n(2749),v=n(97290),f=n(24212),g=n(63085),y=n(33289),b=t([y,f,d]);[y,f,d]=b.then?(await b)():b;const x=t=>t===c.IQ.NEWS?v.H.NEWS_ARTICLE:v.H.ARTICLE;function C(t){let{title:e,publishedOn:n,modifiedOn:a,canonicalUrl:v,authors:b,primaryImage:C,lifespan:I,video:w}=t;const{generateUrl:j,publicSiteDetails:T,isAmp:O}=(0,l.eb)(),R=x(I??c.IQ.NEWS),Z=(0,y.g)(C,T.domain),P=null==b?void 0:b.some((t=>t.elaborator));return(0,r.jsx)(i.ZP,{dangerouslyExposeHtml:!0,children:(0,r.jsxs)(o.Z,{type:R,jsonldtype:(0,u.Z)(R),schema:(0,f.K)({title:e,publishedOn:n,modifiedOn:a}),children:[!(0,p.x)(b)&&(0,r.jsx)(s.Z,{type:"author",children:null==b?void 0:b.map((t=>{let{id:e,slug:n,name:a}=t;const i=P?`${d.I.elaborationPrefix} ${a}`:a,s=e&&n&&`${O?"":T.domain}${j(m.x.AUTHOR_PUBLICATIONS,{id:e,slug:n})}`;return(0,r.jsx)(o.Z,{jsonldtype:"Person",schema:{name:i,...(0,h.To)(Boolean(s),{url:s})}},a)}))}),w&&!(0,p.x)(w.description)&&(0,r.jsx)(o.Z,{type:"video",jsonldtype:"videoObject",schema:{name:e,description:w.description,thumbnailUrl:Z,duration:w.duration&&`P${w.duration}S`,uploadDate:n}}),(0,g.AN)(T),(0,g.gJ)(Z),(0,g.VJ)(v)]})})}a()}catch(I){a(I)}}))},97290:(t,e,n)=>{var a;n.d(e,{H:()=>a}),function(t){t.ARTICLE="article",t.BLOG_POSTING="blogPosting",t.NEWS_ARTICLE="newsArticle"}(a||(a={}))},24212:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{K:()=>t});var r=n(73484),i=n(27484),o=n.n(i);const t=t=>{let{title:e,publishedOn:n,modifiedOn:a}=t;const i=a&&o()(a).isAfter(o()(n));return{headline:e,datePublished:n,...(0,r.To)(Boolean(i),{dateModified:a})}};a()}catch(t){a(t)}}))},63085:(t,e,n)=>{n.d(e,{AN:()=>i,VJ:()=>s,gJ:()=>o});var a=n(85893),r=n(66447);const i=t=>{let{title:e,domain:n}=t;return(0,a.jsx)(r.Z,{type:"publisher",jsonldtype:"Organization",schema:{name:e},children:(0,a.jsx)(r.Z,{type:"logo",jsonldtype:"ImageObject",schema:{url:`${n}/logo.png`}})})},o=t=>(0,a.jsx)(r.Z,{type:"image",jsonldtype:"ImageObject",schema:{url:t}}),s=t=>(0,a.jsx)(r.Z,{type:"mainEntityOfPage",jsonldtype:"WebPage",schema:{"@id":t}})},33289:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{g:()=>i});var r=n(42458);const o=1500,s=(t,e)=>e?`${t}${e}`:t;function i(t,e){return t?(0,r.f2)({file:t.file,maxWidth:t.width||o})(t.width||o,t.height||r.r7):`${s(e,"")}/tile-wide.png`}a()}catch(l){a(l)}}))},9530:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{J:()=>c});var r=n(85893),i=n(14697),o=n(86010),s=n(13058),l=t([i]);function c(t){let{Icon:e,title:n,content:a}=t;const l=(0,o.Z)(s.Z.icon,{[s.Z.opinion]:"opinie"===n,[s.Z.magazine]:"magazyn"===n});return(0,r.jsxs)("aside",{className:s.Z.labelContainer,children:[(0,r.jsxs)(i.r,{to:`https://${n}.wp.pl/`,title:`WP ${n}`,className:s.Z.anchorContainer,plainStyles:!0,children:[(0,r.jsx)(e,{className:l}),n]}),(0,r.jsx)("div",{className:s.Z.labelContent,children:a})]})}i=(l.then?(await l)():l)[0],a()}catch(d){a(d)}}))},4674:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{w:()=>m});var r=n(85893),i=n(79947),o=n(41726),s=n(72722),l=n(88727),c=n(9530),d=n(3604),u=t([c]);function m(t){let{tags:e,editorialType:n,technicalTags:a}=t;const u=e.some((t=>t.name===s.M.GOES_GREEN)),m="wp-opinion"===n,h=!!(null==a?void 0:a.some((t=>t.name===l.f.WP_MAGAZINE)));if(!(u||m||h))return null;const p=[{Icon:i.Z,content:(0,r.jsxs)(r.Fragment,{children:["Materiał powstał w ramach",(0,r.jsx)("b",{children:" akcji ekologicznej"})]}),title:"naturalnie",visible:u},{Icon:o.Z,content:(0,r.jsxs)(r.Fragment,{children:["Przedstawiamy",(0,r.jsx)("b",{children:" różne "}),"punkty widzenia"]}),title:"opinie",visible:m},{Icon:o.Z,content:(0,r.jsxs)(r.Fragment,{children:["Artykuł powstał w ramach",(0,r.jsx)("b",{children:" cyklu"})]}),title:"magazyn",visible:h}];return(0,r.jsx)("div",{className:d.Z.labelBars,children:p.map((t=>{let{Icon:e,content:n,title:a,visible:i}=t;return i?(0,r.jsx)(c.J,{Icon:e,content:n,title:a},a):null}))})}c=(u.then?(await u)():u)[0],a()}catch(h){a(h)}}))},62483:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{R:()=>h});var r=n(85893),i=n(40830),o=n(51442),s=n(24953),l=n(86035),c=n(47103),d=n(86010),u=n(61077),m=t([i,s]);[i,s]=m.then?(await m)():m;const h=t=>{let{materialType:e,contentId:n,className:a}=t;const m=(0,i.d)(),{getN2CREditUrl:h}=(0,o.eb)(),p=(null==m?void 0:m.belongsTo(c.P.EDITORS))??!1;return h&&p?(0,r.jsx)(s.hU,{className:(0,d.Z)(u.Z.button,a),leftIcon:(0,r.jsx)(l.Z,{}),link:{to:h(n,e),title:"Przejdź do edytora N2CR"}}):null};a()}catch(t){a(t)}}))},17794:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{N:()=>p});var r=n(85893),i=n(51442),o=n(2106),s=n(14697),l=n(83936),c=n(42458),d=n(2749),u=n(46596),m=n(50542),h=t([o,l,s]);[o,l,s]=h.then?(await h)():h;const v=128,f=30;function p(t){let{sources:e}=t;const{isAmp:n,messer:a}=(0,i.eb)();if((0,d.x)(e))return null;const{name:h,url:p,image:g}=e[0],y=null==g?void 0:g.url,b=!n&&!(0,u.k)(y)&&!(0,d.x)(y),C=b?m.Z.sourceImageLink:m.Z.sourceUrlLink,x=b?(0,r.jsx)("img",{width:v,height:f,src:(0,c.bB)({file:y,messer:a})(v,f),alt:h,className:m.Z.sourceImage,title:h}):h;return(0,r.jsxs)("div",{className:m.Z.labelContainer,children:[(0,r.jsxs)(o.HY,{className:m.Z.labelText,children:[l.I.articleSource,":"]}),(0,r.jsx)(s.r,{to:p,className:C,children:x})]})}a()}catch(g){a(g)}}))},12536:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{K:()=>v});var r=n(85893),i=n(67294),o=n(60678),s=n(47660),l=n(86905),c=n(51442),d=n(2106),u=n(29323),m=n(83936),h=n(2749),p=t([m,s,d,u]);[m,s,d,u]=p.then?(await p)():p;const f=2,g=8,y=g/2,b=[o.U.x80,o.U.x81],C=[o.U.x70,o.U.x71];function v(t){let{headerText:e=m.I.selectedForYou,withStaticTeasersUrl:n=!1,relations:a,stAreaValue:o}=t;const{isAmp:p,platform:{isMobile:v}}=(0,c.eb)(),x=!p,I=v?C:b,{nativeContentPosition:w}=(0,s.Z)(I,y,x,v),j=p?f:g,T=(0,i.useMemo)((()=>null==a?void 0:a.slice(0,j)),[a,j]);return(0,h.x)(a)?null:(0,r.jsxs)("div",{children:[(0,r.jsx)(d.UO,{align:"center",children:e}),(0,r.jsx)(l.Z,{nativeContentPosition:w,children:t=>{let{nativeSlotPosition:e,nativeContent:a}=t;return(0,r.jsx)(u.Z,{relatedItems:T,rowLength:p?f:y,nativeSlotPosition:e,nativeContent:a,withStaticTeasersUrl:n,stAreaValue:o})}})]})}a()}catch(x){a(x)}}))},47054:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{Kd:()=>p});var r=n(85893),i=n(67294),o=n(51442),s=n(10926),l=n(47293),c=n(10790),d=n(64316),u=n(12536),m=t([l,u]);function h(t){let{contentId:e,headerText:n,withStaticTeasersUrl:a}=t;const{productId:m}=(0,o.eb)(),{data:h,error:p}=(0,d.a)(s.P,{variables:{productId:m,contentId:e}});var v;p&&(null===(v=(0,c.y)())||void 0===v||v.recommendationsErrorsCounter.inc());const f=(0,i.useMemo)((()=>{var t,e;const n=(null==h||null===(e=h.recommendations)||void 0===e||null===(t=e.similar)||void 0===t?void 0:t.teasers)||[];return(0,l.D)(n)}),[h]);return(0,r.jsx)(u.K,{relations:f,headerText:n,withStaticTeasersUrl:a,stAreaValue:"list-selected4you-similar"})}[l,u]=m.then?(await m)():m;const p=function(){let{headerText:t,withStaticTeasersUrl:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n=>{let{contentId:a}=n;return(0,r.jsx)(h,{contentId:a,headerText:t,withStaticTeasersUrl:e})}}();a()}catch(v){a(v)}}))},62121:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{k:()=>m});var r=n(85893),i=n(19023),o=n(2106),s=n(14697),l=n(42458),c=n(86010),d=n(77558),u=t([i,o,s]);[i,o,s]=u.then?(await u)():u;const h=[{width:l.r7,height:37}];function m(t){let{sponsoredInfo:e,sponsor:n}=t;const{name:a,url:l,logo:u,description:m}=n??{},p=Boolean(u||m),v=u?(0,r.jsx)(i.t,{image:u,sourcesInput:h}):null,f=(0,c.Z)(d.Z.sponsoredMessageContent,{[d.Z.hasMultipleItems]:p});return(0,r.jsx)(o.fw,{as:"aside",className:d.Z.sponsoredMessage,children:(0,r.jsxs)("div",{className:f,children:[(0,r.jsx)("div",{...p&&{className:d.Z.sponsoredInfo},children:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{children:[e.trim()," "]}),(0,r.jsx)(s.r,{to:l,withPlainOnClick:!0,children:a})]}):e}),p&&(0,r.jsxs)("div",{className:d.Z.sponsor,children:[v&&(l?(0,r.jsx)(s.r,{to:l,withPlainOnClick:!0,children:v}):v),m&&(0,r.jsx)("div",{...u&&{className:d.Z.sponsorDetails},children:m})]})]})})}a()}catch(p){a(p)}}))},31348:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{R:()=>l});var r=n(85893),i=n(11171),o=n(47875),s=t([i]);function l(t){let{slotNumber:e,slotMinHeight:n=i.wO.H300}=t;return(0,r.jsx)("div",{className:o.Z.twoColumnWideboardAd,children:(0,r.jsx)(i.Fl,{slotNumber:e,options:{fixed:!0},minHeight:n})})}i=(s.then?(await s)():s)[0],a()}catch(c){a(c)}}))},67484:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{i:()=>d});var r=n(85893),i=n(67294),o=n(51442),s=n(84048),l=n(61334),c=n(81412);const t=i.lazy((()=>n.e(1234).then(n.bind(n,1234)).then((t=>({default:t.BrandSocials}))))),d=()=>{const{publicSiteDetails:{social:e}}=(0,o.eb)(),{facebook:n,instagram:a}=e??{};return(null==n?void 0:n.accountName)&&(null==a?void 0:a.accountName)?(0,r.jsx)(l.Z,{inactiveClassName:c.Z.placeholderHeight,children:(0,r.jsx)(i.Suspense,{fallback:(0,r.jsx)(s.O,{isLoading:!0,numberOfRows:1,className:c.Z.placeholderHeight}),children:(0,r.jsx)(t,{})})}):null};a()}catch(t){a(t)}}))},63267:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{b:()=>d});var r=n(85893),i=n(42731),o=n(40679),s=n(17794),l=n(37877),c=t([s,i]);[s,i]=c.then?(await c)():c;const d=(0,o.K)({on:["visible"]})((function(t){let{tagsProps:e,sourcesHidden:n,sources:a,withTags:o}=t;return(0,r.jsxs)(r.Fragment,{children:[!n&&(0,r.jsx)(s.N,{sources:a}),o&&(0,r.jsx)("div",{className:l.Z.tagsContainer,children:(0,r.jsx)(i.$,{collapse:!0,...e})})]})}));a()}catch(t){a(t)}}))},17817:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{x:()=>d});var r=n(85893),i=n(67294),o=n(84048),s=n(69836),l=n(4573),c=n(70053);function d(t){let{renderComponent:e}=t;const[n,a]=(0,i.useState)(!0);return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(o.O,{className:c.Z.skeleton,isLoading:n,children:(0,r.jsx)(s.Z,{rowHeight:"100%"})}),e((()=>a(!1)))]})}a()}catch(u){a(u)}}))},19074:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{O:()=>l});var r=n(51442),i=n(67462),o=n(51726),s=t([o]);function l(t){let{data:e,withCommentsAds:n=!1}=t;const{generateUrl:a,platform:{isMobile:s}}=(0,r.eb)();return{breadcrumbPath:(0,i.y)({generateUrl:a,categoryPath:e.categoryPath,title:e.title}),hasCommentsWithAds:n&&!s&&e.commentsCount>2,contentAuthorsIds:(0,o.y)(e.authors)}}o=(s.then?(await s)():s)[0],a()}catch(c){a(c)}}))},24022:(t,e,n)=>{n.d(e,{X:()=>r});var a=n(67294);function r(t){let{shouldTrack:e,contentId:n}=t;const r=(0,a.useRef)(null);return(0,a.useEffect)((()=>{if(e&&r.current){const t=t=>{const e=t.target.getAttribute("data-fb-event");window.fbq("trackCustom",e)},e=r.current.querySelectorAll("a[data-fb-event]");return null==e||e.forEach((e=>{e.addEventListener("click",t)})),()=>{null==e||e.forEach((e=>{e.removeEventListener("click",t)}))}}}),[e,n]),{dataFbEventRef:r}}},57466:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{k:()=>d});var r=n(85893),i=n(67294),o=n(28905),s=n(46596),l=n(17817),c=t([l,o]);function d(t){let{primaryVideo:e,isIntentional:n=!1}=t;const{mediaId:a,liveId:c,clip:d}=e??{},u=!(0,s.k)(e),m=(0,i.useMemo)((()=>u?(0,r.jsx)(l.x,{renderComponent:t=>(0,r.jsx)(o.ZP,{mid:a,lid:c,mediaEmbed:n?"editorial":"intext",autoplay:!0,forcesound:n,onLoad:t})}):null),[u,a,c,n]);return{hasPrimaryVideo:u,primaryVideoComponent:m,duration:null==d?void 0:d.duration}}[l,o]=c.then?(await c)():c,a()}catch(u){a(u)}}))},51726:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{y:()=>i});var r=n(33050);function i(t){return t.map((t=>t.id)).filter(r.O$)}a()}catch(o){a(o)}}))},85424:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{w:()=>o});var r=n(67549),i=n(88126);function o(t){let{recordStats:e,commentsCount:n=0,recordType:a}=t;return{content:{title:null==e?void 0:e.title,author:{internalName:null==e?void 0:e.internalAuthors,externalName:null==e?void 0:e.externalAuthors},firstPublication:{date:null==e?void 0:e.firstPublicationDate,quarter:null==e?void 0:e.firstPublicationQuarter},lastModification:{date:null==e?void 0:e.lastModificationDate,quarter:null==e?void 0:e.lastModificationQuarter},internalSuppliers:null==e?void 0:e.internalSuppliers,externalSuppliers:null==e?void 0:e.externalSuppliers,commentCount:n.toString(),contentPartsCount:null==e?void 0:e.contentPartsCount,characterCount:null==e?void 0:e.characterCount,characterCountBucket:null==e?void 0:e.characterCountBucket,insertCount:null==e?void 0:e.insertCount,photoCount:null==e?void 0:e.photoCount,interactiveElement:null==e?void 0:e.interactiveElement,linkCount:null==e?void 0:e.linkCount,lifespan:null==e?void 0:e.lifespan,editorialType:null==e?void 0:e.editorialType,isPremium:null==e?void 0:e.isPremium,publicationVersion:null==e?void 0:e.publicationVersion,isPromoted:null==e?void 0:e.isPromoted,ageRestriction:null==e?void 0:e.ageRestriction,isDrastic:null==e?void 0:e.isDrastic,siteCategory:null==e?void 0:e.siteCategory,category:{IAB:null==e?void 0:e.categoryIAB,Gemius:null==e?void 0:e.categoryGemius},pageCount:"1",...a===r.oX.SOFTWARE_APP&&{software:(0,i.C)("__typename",null==e?void 0:e.software)}}}}a()}catch(s){a(s)}}))},76497:(t,e,n)=>{n.d(e,{d:()=>i});var a=n(88126),r=n(2749);function i(t){let{categoryRootId:e,categories:n}=t;const i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=>{const n=e=>{let{id:n}=e;return n===t},a=e.find((t=>t.find(n)));if(!a)return[];const r=a.findIndex(n)+1;return a.slice(r)}}(e),[o,s]=n.reduce(((t,e)=>{let[n,r]=t,{primary:i,path:o}=e;const s=o.map((0,a.C)("__typename"));return i?[[...n,s],r]:[n,[...r,s]]}),[[],[]]),l=i(o);return(0,r.x)(l)?i(s):l}},1043:(t,e,n)=>{function a(t){let{errors:e,optionalFieldNames:n=[]}=t;return e.some((t=>{let{path:e}=t;return!n.some((t=>null==e?void 0:e.includes(t)))}))}n.d(e,{n:()=>a})},67462:(t,e,n)=>{n.d(e,{y:()=>i});var a=n(73268),r=n(1675);function i(t){let{generateUrl:e,categoryPath:n=[],title:i}=t;const o=null==n?void 0:n.map((t=>t.slug)),s=n.map(((t,n)=>{let{id:i,slug:s,name:l}=t;return{label:l,href:e(r.x.PUBLICATION_CATEGORY,{id:i,slug:s,categories:(0,a.q)(n+1,o)})}}));return i?[...s,{label:i,href:""}]:s}},72722:(t,e,n)=>{var a;n.d(e,{M:()=>a}),function(t){t.GOES_GREEN="goesgreen"}(a||(a={}))},88727:(t,e,n)=>{var a;n.d(e,{f:()=>a}),function(t){t.LISTING_FEATURED="featuredListing",t.SLIDER_FEATURED="featuredSlider",t.SCAM_RAPORT="technologie:scamReport",t.WP_MAGAZINE="magazynwp:external",t.TILE_LARGE="tileLarge",t.TILE_MEDIUM="tileMedium",t.TILE_SMALL="tileSmall",t.RUSSIAN_SOFTWARE="technologie:russianSoftware"}(a||(a={}))},24026:(t,e,n)=>{function a(t,e){return[e.slice(0,t+1),e.slice(t+1)]}n.d(e,{Z:()=>a})},57482:(t,e,n)=>{function a(t){return"komentarze"===t||/^komentarz-[0-9]*$/g.test(t)}n.d(e,{Z:()=>a})},47660:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{Z:()=>l});var r=n(67294),i=n(51442),o=n(24106),s=n(52721);function l(t,e,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{isInitialRender:l,ssrTimestamp:c}=(0,i.eb)(),d=(0,r.useMemo)((()=>(0,o.Z)(l?c:(new Date).getTime())),[l,c]),u=(0,r.useCallback)(((t,n)=>{const r=e*t,i=e*(t+1)-1,o=a?(0,s.Z)(r+1,i-1,d):(0,s.Z)(r,i,d);return o%e==n%e?u(t,n):o}),[a,d,e]),m=(0,r.useCallback)((()=>{let e=-1;return t.reduce(((t,n,a)=>{const r=u(a,e);return e=r,{...t,[n]:[r,r]}}),{})}),[u,t]),h=n&&e>1;return{nativeContentPosition:(0,r.useMemo)((()=>h?m():{}),[m,h])}}a()}catch(c){a(c)}}))},51282:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{U:()=>v,Z:()=>p});var r=n(85893),i=n(51442),o=n(14697),s=n(27757),l=n(1675),c=n(45697),d=n(5945),u=n(84583),m=n(62671),h=t([d,o]);function p(t){let{appData:e,url:n,relativeProductUrl:a,withStaticTeasersUrl:c,...u}=t;const{generateUrl:h}=(0,i.eb)(),p=e?s.gM.get(e.platform):"",v=c?n:a,f=h(l.x.APPS_CATEGORY,{id:e.category.id,slug:e.category.slug,platform:p});return(0,r.jsx)(d.Z,{relatedUrl:v,commentsUrl:`${v}#komentarze`,iconUrl:e.iconUrl,...u,children:(0,r.jsx)(o.r,{className:m.Z.infoElement,to:f,plainStyles:!0,children:e.category.name})})}[d,o]=h.then?(await h)():h;const v={appData:(0,c.shape)({platform:c.number.isRequired,iconUrl:c.string,category:(0,c.shape)({id:c.number.isRequired,name:c.string.isRequired,slug:c.string.isRequired})}).isRequired,url:c.string,withStaticTeasersUrl:c.bool,...u.Z};p.propTypes={...v},p.defaultProps={thumbnailUrl:""},a()}catch(f){a(f)}}))},84211:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{Z:()=>h});var r=n(85893),i=n(67294),o=n(51442),s=n(86010),l=n(45697),c=n(26884),d=n(92061),u=n(16161),m=t([c,d]);function h(t){let{rowItems:e,stAreaValue:n,className:a,withStaticTeasersUrl:l}=t;const{isAmp:d}=(0,o.eb)(),m=(0,s.Z)(u.Z.relatedRow,{[u.Z.wide]:!d},a);return(0,r.jsx)("div",{className:m,role:"list","data-st-area":n,children:e.map((t=>(0,i.createElement)(c.e,{...t,key:t.cardData.id,withStaticTeasersUrl:l})))})}[c,d]=m.then?(await m)():m,h.propTypes={rowItems:(0,l.arrayOf)((0,l.shape)(d.r)).isRequired,stAreaValue:l.string.isRequired,className:l.string,withStaticTeasersUrl:l.bool},h.defaultProps={className:"",withStaticTeasersUrl:!1},a()}catch(p){a(p)}}))},29323:(t,e,n)=>{n.a(t,(async(t,a)=>{try{n.d(e,{Z:()=>g});var r=n(85893),i=n(67294),o=n(11171),s=n(60678),l=n(51442),c=n(24026),d=n(45697),u=n(2749),m=n(26884),h=n(92061),p=n(84211),v=n(22256),f=t([m,p,o,h]);function g(t){let{relatedItems:e,rowLength:n,nativeSlotPosition:a,nativeContent:d,stAreaValue:h,withStaticTeasersUrl:f}=t;const{isAmp:g,platform:{isMobile:y}}=(0,l.eb)(),[b,C]=(0,i.useMemo)((()=>{const t=e.filter((t=>{let{type:e}=t;return m.w.has(e)})).map(((t,e)=>({...t,nativeSlotNumber:a[e],nativeContent:d[e]})));return(0,c.Z)(n-1,t)}),[e,a,d,n]),x=!(0,u.x)(C)&&y&&!g;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{rowItems:b,className:v.Z.withMargin,withStaticTeasersUrl:f,stAreaValue:h}),x?(0,r.jsx)(o.Fl,{className:v.Z.withMargin,slotNumber:s.U.x15}):null,(0,r.jsx)(p.Z,{rowItems:C,withStaticTeasersUrl:f,stAreaValue:h})]})}[m,p,o,h]=f.then?(await f)():f,g.propTypes={relatedItems:(0,d.arrayOf)((0,d.shape)(h.r)),rowLength:d.number.isRequired,nativeSlotPosition:(0,d.objectOf)(d.any).isRequired,nativeContent:(0,d.objectOf)(d.any).isRequired,stAreaValue:d.string.isRequired,withStaticTeasersUrl:d.bool},g.defaultProps={relatedItems:[],withStaticTeasersUrl:!1},a()}catch(y){a(y)}}))},84583:(t,e,n)=>{n.d(e,{Z:()=>r});var a=n(45697);const r={id:(0,a.oneOfType)([a.string,a.number]).isRequired,thumbnailUrl:a.string,title:a.string.isRequired,commentsCount:a.number,url:a.string}},14784:(t,e,n)=>{n.d(e,{Z:()=>d});var a=n(85893),r=n(67294),i=n(51442),o=n(45697),s=n(35217);const l={childList:!0,subtree:!0},c=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=1;return(a,r)=>{a.some((e=>{const n=Array.from(e.addedNodes).find((e=>e.id===t));return n?(n.scrollIntoView(),r.disconnect(),!0):null})),n===e&&r.disconnect(),n+=1}};function d(t){let{children:e,validateHash:n}=t;var o,d,u,m;const h=null===(m=(0,i.eb)())||void 0===m||null===(u=m.history)||void 0===u||null===(d=u.location)||void 0===d||null===(o=d.hash)||void 0===o?void 0:o.substr(1),p=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(n(h)){const t=new MutationObserver(c(h));return setTimeout((()=>{const e=p.current;e&&(e.scrollIntoView(),t.observe(e,l))}),0),()=>t.disconnect()}return s.Z}),[p,h,n]),(0,a.jsx)("div",{ref:p,children:e})}d.propTypes={children:o.node.isRequired,validateHash:o.func.isRequired}},52721:(t,e,n)=>{function a(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random;return Math.floor(n()*(e-t+1))+t}n.d(e,{Z:()=>a})},24106:(t,e,n)=>{function a(t){return()=>(2**31-1&(t=Math.imul(48271,t)))/2**31}n.d(e,{Z:()=>a})}};                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           alCVEqo",btnText:"iuvb-Yid",icon:"i3zbmGKK",topBarCounter:"i2SzPs_e",topBar:"i2T-mIMT",branding:"iZ0s2jts",wpLogo:"i1FwjWIN",serviceLogo:"i2-uuEkb",topBarBtns:"iAN4Ai6m",topBarBtn:"i1Adnd2N",topBarBtnDisabled:"i2rFD6wE",goFirst:"i34MvDvS",goNext:"i1uxmTWA",goNextDisabled:"i1U6YMGW",close:"i2bmdhJW",wrapPhoto:"i9eEPauK",btnPhotoNext:"i2BQT8To"}},function(e,t){e.exports={titleWithLead:"iQCL9yqp",withLead:"i3Tl6Nvn",wrapWithLead:"ikWTRfRe",wrapTitleAndLead:"iWpb9TDY",isBig:"i2V5Apvk",mobile:"i1_gcTVp",teaserMark:"i1NHjzjw",gallery:"i_HUcyg8",wideo:"i3DdPPTR",titleIn:"i3KKDBFx",advLabel:"i11Tt46t",link:"i1Fd2juY",desktop:"i3brEpa-",figure:"i3OPJ4X_"}},function(e,t){"use strict";t.__esModule=!0;var n="PUSH";t.PUSH=n;var r="REPLACE";t.REPLACE=r;var o="POP";t.POP=o,t.default={PUSH:n,REPLACE:r,POP:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.match(/^https?:\/\/[^\/]*/);return null==t?e:e.substring(t[0].length)}function i(e){var t=o(e),n="",r="",i=t.indexOf("#");i!==-1&&(r=t.substring(i),t=t.substring(0,i));var a=t.indexOf("?");return a!==-1&&(n=t.substring(a),t=t.substring(0,a)),""===t&&(t="/"),{pathname:t,search:n,hash:r}}t.__esModule=!0,t.extractPath=o,t.parsePath=i;var a=n(80);r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(){return e.apply(this,arguments)}}t.__esModule=!0;var i=n(80);r(i);t.default=o,e.exports=t.default},,,function(e,t,n){function r(e){return null==e?void 0===e?u:s:l&&l in Object(e)?i(e):a(e)}var o=n(227),i=n(2119),a=n(2148),s="[object Null]",u="[object Undefined]",l=o?o.toStringTag:void 0;e.exports=r},function(e,t,n){function r(e,t){var n=i(e,t);return o(n)?n:void 0}var o=n(2079),i=n(2121);e.exports=r},function(e,t){function n(e){return e}e.exports=n},[2467,23],function(e,t,n){"use strict";function r(){o.attachRefs(this,this._currentElement)}var o=n(2307),i=(n(79),n(17),{mountComponent:function(e,t,n,o,i,a){var s=e.mountComponent(t,n,o,i,a);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(r,e),s},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){o.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,i){var a=e._currentElement;if(t!==a||i!==e._context){var s=o.shouldUpdateRefs(a,t);s&&o.detachRefs(e,a),e.receiveComponent(t,n,i),s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});e.exports=i},function(e,t,n){"use strict";function r(e,t,n){if(e[t])return new Error("<"+n+'> should not have a "'+t+'" prop')}t.__esModule=!0,t.routes=t.route=t.components=t.component=t.history=void 0,t.falsy=r;var o=n(1),i=o.PropTypes.func,a=o.PropTypes.object,s=o.PropTypes.arrayOf,u=o.PropTypes.oneOfType,l=o.PropTypes.element,c=o.PropTypes.shape,f=o.PropTypes.string,d=(t.history=c({listen:i.isRequired,push:i.isRequired,replace:i.isRequired,go:i.isRequired,goBack:i.isRequired,goForward:i.isRequired}),t.component=u([i,f])),p=(t.components=u([d,a]),t.route=u([a,l]));t.routes=u([p,s(p)])},function(e,t,n){"use strict";function r(e){return this instanceof r?(l.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",o)):new r(e)}function o(){this.allowHalfOpen||this._writableState.ended||s(i,this)}function i(e){e.end()}var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var s=n(454),u=n(215);u.inherits=n(47);var l=n(841),c=n(484);u.inherits(r,l);for(var f=a(c.prototype),d=0;d<f.length;d++){var p=f[d];r.prototype[p]||(r.prototype[p]=c.prototype[p])}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommentsContainer=t.commentsContainerCreator=void 0;var o=n(1),i=(r(o),n(5)),a=n(25),s=n(337),u=n(69),l=function(e,t,n,r,o,i,a,s){var u=e.userComments,l=e.comments.items,c=e.info,f=e.votes,d=e.reports,p=e.replies,h=e.scroll,m=e.settings.scrollSwitch;return{info:c,item:t,title:r,reports:d,enabled:n,userComments:u,materialType:o,scrollSwitch:m,comments:l,voteStore:f,list:s,topList:a,repliesStore:p,scrollTo:h.scrollTo,expanded:i}},c=(0,a.createSelector)(s.commentsSelector,s.itemSelector,s.enabledSelector,s.titleSelector,s.materialTypeSelector,s.expandedSelector,s.topListSelector,s.listSelector,l),f=t.commentsContainerCreator=(0,i.connect)(c);t.CommentsContainer=f(u.CommentsWrapper)},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r,o="THEME",i={name:"wp_dark",defaultValue:"0",allowedValues:["0","1",""]},a={DEFAULT:"DEFAULT",DARK:"DARK"},s=(r={},n(r,a.DEFAULT,{name:a.DEFAULT,className:"theme-default",cookie:"0",dotParams:"0",statistics:"off"}),n(r,a.DARK,{name:a.DARK,className:"theme-dark",cookie:"1",dotParams:"1",statistics:"on"}),r);t.THEME_COOKIE=o,t.THEME_COOKIE_CONFIGURATION=i,t.THEME_MODE=a,t.THEME_MODE_CONFIGURATION=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getSectionTags=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},i=[];return t&&t.forEach(function(e){e&&i.push(e)}),!r&&e&&i.length>0&&(i=i.filter(function(t){return t.slug!==e.slug})),!r&&e?(o=n({},e),o.type="sections"):i.length>0&&(o=n({},i.shift()),o.type="tags"),{sectionObj:o,tagsArr:i}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isQuizTeaser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"quiz"===e.toLowerCase()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1133),i=n(51),a=r(i),s=function(e){return e?e.scrollTop:(0,a.default)()},u=function(e,t){return e?e.scrollTop=t:window.scrollTo(0,t)};t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=arguments[5];if(e=Math.round(e),t=Math.round(t),t<0)return Promise.reject("bad duration");if(0===t)return u(n,e),Promise.resolve();var l=Date.now(),c=l+t,f=s(n),d=e-f,p=function(e,t,n){if(n<=e)return 0;if(n>=t)return 1;var r=(n-e)/(t-e);return r*r*(3-2*r)},h=(0,o.isSafari)(),m=0;return new Promise(function(e,o){var v=s(n),y=function y(){if(i&&!h&&s(n)!==v&&(m+=1,m>i))return void o("interrupted");var g=Date.now(),b=void 0;b=r?r((g-l)/t):p(l,c,g);var A=Math.round(f+d*b);return u(n,A),g>=c?("function"==typeof a&&a(),void e()):s(n)===v&&s(n)!==A?("function"==typeof a&&a(),void e()):(v=s(n),void setTimeout(y,0,!0))};setTimeout(y,0,!0)})},e.exports=t.default},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTeasersListing=t.fetchTeasersListingFailure=t.fetchTeasersListingSuccess=t.fetchTeasersListingRequest=t.names=void 0;var o=n(18),i=n(119),a=n(1152),s=n(381),u=t.names={TEASERS_LISTING_FETCH_REQUEST:"TEASERS_LISTING_FETCH_REQUEST",TEASERS_LISTING_FETCH_SUCCESS:"TEASERS_LISTING_FETCH_SUCCESS",TEASERS_LISTING_FETCH_FAILURE:"TEASERS_LISTING_FETCH_FAILURE"},l=t.fetchTeasersListingRequest=(0,o.createAction)(u.TEASERS_LISTING_FETCH_REQUEST),c=t.fetchTeasersListingSuccess=(0,o.createAction)(u.TEASERS_LISTING_FETCH_SUCCESS),f=t.fetchTeasersListingFailure=(0,o.createAction)(u.TEASERS_LISTING_FETCH_FAILURE);t.fetchTeasersListing=function(e){var t=e.options,n=e.timestamp,o=void 0===n?0:n;return function(){var e=r(regeneratorRuntime.mark(function e(n,r){var u,d,p,h,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(0,s.getTeasersListingCache)({getState:r,name:t.key,page:t.page,timestamp:o})){e.next=16;break}return n(l()),e.next=5,(0,i.promiseTimeout)(4e3,(0,a.getTeasersListing)({options:t}));case 5:if(d=e.sent,!(0,s.isValidRecordsResponse)(d)){e.next=14;break}return p=d.collections.records,h=p.pageInfo,m=(0,s.adaptMaterial)({records:p,pageIndex:t.page,teasersPerPage:25}),n(c({key:t.key,page:t.page,info:h,teasers:m})),e.abrupt("return",!0);case 14:throw n(f({key:t.key,message:"404 Not Found - response is not valid",status:404})),{message:"404 Not Found - response is not valid",status:404};case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activeItemSelector=t.configSelector=t.tagsSelector=t.sourcesSelector=t.authorsSelector=t.activeMaterialSelector=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(25),i=n(251),a=t.activeMaterialSelector=function(e){return e.content.items[e.content.active]},s=t.authorsSelector=function(e){return e.authors},u=t.sourcesSelector=function(e){return e.sources},l=t.tagsSelector=function(e){return e.tags},c=t.configSelector=function(e,t){var n=t.config;return n};t.activeItemSelector=(0,o.createSelector)(a,s,u,l,c,function(e,t,n,o,a){var s=r({},e),u=(s.data.authors||[]).map(function(e){return r({},e,{elaborator:e.elaborator})}).filter(function(e){return void 0!=e}),l=[];s.data.sources&&s.data.sources.forEach(function(e){n[e.id]&&(0,i.isValidSource)(n[e.id],a)&&l.push(n[e.id])});var c=(s.data.tags||[]).map(function(e){return o.list[e]});return s.data=r({},s.data,{authors:u,sources:l,tags:c}),s})},function(e,t,n){var r=n(84),o=n(33)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){e.exports={}},function(e,t,n){var r=n(40).f,o=n(72),i=n(33)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(3),o=n(98),i=n(20),a=n(406),s="["+a+"]",u="​",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),f=function(e,t,n){var o={},s=i(function(){return!!a[e]()||u[e]()!=u}),l=o[e]=s?t(d):a[e];n&&(o[n]=l),r(r.P+r.F*s,"String",o)},d=f.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=f},function(e,t){e.exports={desktop:"i2r8YuX6",header:"i3xpTc_T",wrapMainPhoto:"i1wxoY6w",caption:"i3VyDrhy",photoDescription:"ib3ZJrzb",overlay:"i5yVVyZL",articleIntro:"i25GG-Id",titleSection:"iE-6D5YE",sourceBackground:"ijZg6N_k",sourceBox:"i3j24YJ1",noSource:"ifV75gey",titleBox:"iZ6ey8k8",title:"iIOAZZZs",wrapTagsSection:"iAzzVcPM",wrapTagsList:"i3NPaTGC",authorsWrap:"i3pEKqV4",mobile:"i3duLF_-",authorsOverlay:"i3cMI-qa",authorItem:"i1zBYOKq",authorPhoto:"iWmcGNtT",article:"i2HdZb-S",lead:"i2HCOG_s",reactions:"ihlPI90x",sourcesPremium:"i2q0N7aJ",premiumFull:"i_k0xu3g"}},function(e,t){e.exports={title:"i1y3nic2",desktop:"i1pOcmQ4",popular:"iXi0vlAX",chosenForYou:"i2Vxyzm6",mostPopular:"i9_BQj-o",related:"i2a0z0zP","last-slide":"i1Wz09n9",mobileVideoTeasers:"i1Ax4SZu",wrap:"icT1MaIp",tab:"i1N15HjH",teasers:"i2B3ie5k",teasersMobile:"i1eVsdr9",teasersContainer:"i1juiO19",mobile:"iCq28TY2",wrapReadMore:"i3uafGrt",readMore:"iDnkKHGM",special:"i-lfEuhf",record:"i2Bz6sZd",wrapIn:"i3Cthn9E",collection:"i1a-5vh0",short:"i2R0NQvx"}},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function r(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(!o.call(t,r[a])||!n(e[r[a]],t[r[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return u.stringify(e).replace(/%20/g,"+")}function i(e){return function(){function t(e){if(null==e.query){var t=e.search;e.query=_(t.substring(1)),e[h]={search:t,searchBase:""}}return e}function n(e,t){var n,r=e[h],o=t?w(t):"";if(!r&&!o)return e;"string"==typeof e&&(e=f.parsePath(e));var i=void 0;i=r&&e.search===r.search?r.searchBase:e.search||"";var s=i;return o&&(s+=(s?"&":"?")+o),a({},e,(n={search:s},n[h]={search:s,searchBase:i},n))}function r(e){return A.listenBefore(function(n,r){c.default(e,t(n),r)})}function i(e){return A.listen(function(n){e(t(n))})}function s(e){A.push(n(e,e.query))}function u(e){A.replace(n(e,e.query))}function l(e,t){return A.createPath(n(e,t||e.query))}function d(e,t){return A.createHref(n(e,t||e.query))}function v(e){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var a=A.createLocation.apply(A,[n(e,e.query)].concat(o));return e.query&&(a.query=e.query),t(a)}function y(e,t,n){"string"==typeof t&&(t=f.parsePath(t)),s(a({state:e},t,{query:n}))}function g(e,t,n){"string"==typeof t&&(t=f.parsePath(t)),u(a({state:e},t,{query:n}))}var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],A=e(b),w=b.stringifyQuery,_=b.parseQueryString;return"function"!=typeof w&&(w=o),"function"!=typeof _&&(_=m),a({},A,{listenBefore:r,listen:i,push:s,replace:u,createPath:l,createHref:d,createLocation:v,pushState:p.default(y,"pushState is deprecated; use push instead"),
replaceState:p.default(g,"replaceState is deprecated; use replace instead")})}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(80),u=(r(s),n(2210)),l=n(431),c=r(l),f=n(161),d=n(162),p=r(d),h="$searchBase",m=u.parse;t.default=i,e.exports=t.default},,,function(e,t,n){function r(e){if(!i(e))return!1;var t=o(e);return t==s||t==u||t==a||t==l}var o=n(165),i=n(78),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",l="[object Proxy]";e.exports=r},function(e,t,n){function r(e){return null==e?"":o(e)}var o=n(2095);e.exports=r},function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="isolation:isolate"\n    viewBox="0 0 155.42 90.637" width="155.42pt" height="90.637pt">\n    <desc>Wirtualna Polska</desc>\n    <g>\n        <path\n            d=" M 121.889 24.857 C 121.689 26.457 121.489 27.957 121.389 29.557 C 121.189 31.957 120.889 34.257 120.689 36.657 C 120.289 40.157 119.989 43.657 119.589 47.057 C 119.189 51.157 118.689 55.357 118.289 59.457 C 118.089 61.457 117.889 63.457 117.489 65.457 C 116.689 69.057 115.189 72.257 112.489 74.757 C 110.289 76.957 107.589 78.357 104.589 79.257 C 102.389 79.957 100.189 80.157 97.889 80.057 C 93.389 79.757 89.789 77.757 87.289 74.057 C 86.089 72.357 85.289 70.357 84.889 68.357 C 83.889 64.257 82.989 60.157 81.989 55.957 C 81.089 51.857 80.089 47.657 79.189 43.557 C 78.189 38.957 77.189 34.457 76.089 29.857 C 75.789 28.357 75.389 26.757 75.089 25.257 C 75.089 25.057 74.989 24.957 74.989 24.757 C 74.689 24.257 74.289 23.957 73.689 24.057 C 73.189 24.157 72.889 24.457 72.789 25.057 C 72.689 25.657 72.689 26.257 72.589 26.857 C 72.189 30.657 71.789 34.357 71.489 38.157 C 71.189 41.457 70.889 44.757 70.489 47.957 C 70.089 51.957 69.689 55.957 69.289 60.057 C 68.989 63.057 68.689 66.157 68.389 69.157 C 68.089 72.057 67.489 74.857 66.189 77.457 C 64.389 81.257 61.489 84.057 57.989 86.257 C 54.389 88.457 50.289 89.757 46.089 90.257 C 43.689 90.557 41.189 90.757 38.689 90.557 C 34.189 90.157 30.089 88.857 26.489 86.057 C 24.089 84.157 22.289 81.857 21.089 79.057 C 19.989 76.557 19.189 74.057 18.389 71.457 C 17.789 69.357 17.089 67.357 16.489 65.257 C 15.689 62.857 14.989 60.357 14.189 57.957 C 13.489 55.757 12.889 53.557 12.189 51.357 L 9.789 43.557 C 8.989 40.957 8.189 38.257 7.389 35.657 C 6.489 32.657 5.589 29.557 4.589 26.557 C 3.789 23.957 2.989 21.357 2.189 18.857 C 1.489 16.657 0.889 14.557 0.289 12.357 C -0.111 10.857 -0.111 9.257 0.389 7.657 C 0.989 5.557 2.389 3.957 4.089 2.757 C 7.689 0.257 11.789 -0.443 16.089 0.257 C 19.789 0.857 23.089 2.357 25.889 4.757 C 28.289 6.757 29.789 9.357 30.589 12.357 C 31.189 14.657 31.789 16.957 32.389 19.157 C 33.289 22.357 34.089 25.557 34.989 28.857 C 35.889 32.157 36.689 35.357 37.589 38.657 L 40.589 50.657 L 42.689 59.357 C 43.389 62.157 43.989 65.057 44.689 67.857 C 44.889 68.757 45.089 69.657 45.289 70.457 C 45.489 71.257 46.089 71.657 46.889 71.557 C 47.589 71.457 47.889 71.157 47.889 70.457 L 48.189 67.457 C 48.489 64.657 48.689 61.757 48.989 58.957 C 49.289 55.457 49.589 52.057 49.989 48.557 C 50.389 44.157 50.789 39.757 51.189 35.457 L 52.089 25.257 C 52.289 22.657 52.689 20.057 53.489 17.557 C 54.189 15.357 55.189 13.257 56.689 11.457 C 58.789 8.857 61.389 7.257 64.489 6.357 C 70.389 4.757 76.189 5.257 81.689 8.057 C 85.489 9.957 88.289 13.057 90.189 16.757 C 91.489 19.257 92.189 21.857 92.689 24.557 C 93.889 30.557 95.089 36.657 96.289 42.657 L 100.189 62.457 C 100.289 62.857 100.389 63.357 100.489 63.757 C 100.589 64.257 101.089 64.557 101.589 64.557 C 101.889 64.557 102.089 64.257 102.189 63.757 C 102.289 63.157 102.289 62.657 102.389 62.057 C 102.589 58.857 102.889 55.757 103.089 52.557 C 103.389 49.257 103.589 45.957 103.889 42.657 C 104.089 40.057 104.389 37.357 104.589 34.757 C 104.889 31.557 105.189 28.457 105.489 25.257 C 105.789 22.257 106.089 19.357 106.389 16.357 C 106.489 15.257 106.689 14.057 107.089 12.957 C 108.389 9.357 111.989 7.857 114.989 8.157 C 116.389 8.357 117.889 8.357 119.289 8.557 C 120.789 8.657 122.189 8.757 123.689 8.957 C 125.589 9.057 127.489 9.257 129.389 9.357 C 131.389 9.557 133.289 9.657 135.289 9.857 C 136.489 9.957 137.789 10.057 138.989 10.257 C 145.989 11.657 150.789 15.757 153.489 22.357 C 154.289 24.357 154.789 26.457 155.089 28.557 C 155.489 30.957 155.489 33.457 155.289 35.957 C 155.089 39.157 154.589 42.257 153.489 45.257 C 151.389 50.757 147.489 54.257 141.889 56.057 C 140.489 56.457 139.089 56.757 137.589 56.857 C 135.289 57.157 133.089 57.457 130.789 57.657 C 130.189 57.757 129.589 57.757 129.089 57.857 C 127.889 57.957 126.789 57.557 125.989 56.657 C 125.189 55.857 124.789 54.857 124.489 53.757 C 123.889 51.357 124.089 48.957 125.189 46.657 C 125.489 46.057 125.889 45.557 126.289 44.957 C 127.089 43.957 128.089 43.457 129.389 43.357 C 131.289 43.257 133.089 43.157 134.989 42.957 C 136.089 42.857 137.189 42.757 138.289 42.557 C 143.889 41.657 144.989 25.757 137.589 25.157 C 136.589 25.057 135.589 25.057 134.589 25.057 C 130.589 24.957 126.589 24.957 122.489 24.857 L 121.889 24.857 L 121.889 24.857 Z " />\n    </g>\n</svg>\n'},function(e,t,n){e.exports=n(2375)},function(e,t,n){"use strict";function r(e){if(v){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)y(t,n[r],null);else null!=e.html?f(t,e.html):null!=e.text&&p(t,e.text)}}function o(e,t){e.parentNode.replaceChild(t.node,e),r(t)}function i(e,t){v?e.children.push(t):e.node.appendChild(t.node)}function a(e,t){v?e.html=t:f(e.node,t)}function s(e,t){v?e.text=t:p(e.node,t)}function u(){return this.node.nodeName}function l(e){return{node:e,children:[],html:null,text:null,toString:u}}var c=n(460),f=n(316),d=n(468),p=n(822),h=1,m=11,v="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),y=d(function(e,t,n){t.node.nodeType===m||t.node.nodeType===h&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(r(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),r(t))});l.insertTreeBefore=y,l.replaceChildWithTree=o,l.queueChild=i,l.queueHTML=a,l.queueText=s,e.exports=l},function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var o=n(23),i=(n(12),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=i,n=e.Properties||{},a=e.DOMAttributeNamespaces||{},u=e.DOMAttributeNames||{},l=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var f in n){s.properties.hasOwnProperty(f)?o("48",f):void 0;var d=f.toLowerCase(),p=n[f],h={attributeName:d,attributeNamespace:null,propertyName:f,mutationMethod:null,mustUseProperty:r(p,t.MUST_USE_PROPERTY),hasBooleanValue:r(p,t.HAS_BOOLEAN_VALUE),hasNumericValue:r(p,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(p,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(p,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(h.hasBooleanValue+h.hasNumericValue+h.hasOverloadedBooleanValue<=1?void 0:o("50",f),u.hasOwnProperty(f)){var m=u[f];h.attributeName=m}a.hasOwnProperty(f)&&(h.attributeNamespace=a[f]),l.hasOwnProperty(f)&&(h.propertyName=l[f]),c.hasOwnProperty(f)&&(h.mutationMethod=c[f]),s.properties[f]=h}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},injection:i};e.exports=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(e){for(var t="",n=[],r=[],i=void 0,a=0,s=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)/g;i=s.exec(e);)i.index!==a&&(r.push(e.slice(a,i.index)),t+=o(e.slice(a,i.index))),i[1]?(t+="([^/]+)",n.push(i[1])):"**"===i[0]?(t+="(.*)",n.push("splat")):"*"===i[0]?(t+="(.*?)",n.push("splat")):"("===i[0]?t+="(?:":")"===i[0]&&(t+=")?"),r.push(i[0]),a=s.lastIndex;return a!==e.length&&(r.push(e.slice(a,e.length)),t+=o(e.slice(a,e.length))),{pattern:e,regexpSource:t,paramNames:n,tokens:r}}function a(e){return p[e]||(p[e]=i(e)),p[e]}function s(e,t){"/"!==e.charAt(0)&&(e="/"+e);var n=a(e),r=n.regexpSource,o=n.paramNames,i=n.tokens;"/"!==e.charAt(e.length-1)&&(r+="/?"),"*"===i[i.length-1]&&(r+="$");var s=t.match(new RegExp("^"+r,"i"));if(null==s)return null;var u=s[0],l=t.substr(u.length);if(l){if("/"!==u.charAt(u.length-1))return null;l="/"+l}return{remainingPathname:l,paramNames:o,paramValues:s.slice(1).map(function(e){return e&&decodeURIComponent(e)})}}function u(e){return a(e).paramNames}function l(e,t){var n=s(e,t);if(!n)return null;var r=n.paramNames,o=n.paramValues,i={};return r.forEach(function(e,t){i[e]=o[t]}),i}function c(e,t){t=t||{};for(var n=a(e),r=n.tokens,o=0,i="",s=0,u=void 0,l=void 0,c=void 0,f=0,p=r.length;f<p;++f)u=r[f],"*"===u||"**"===u?(c=Array.isArray(t.splat)?t.splat[s++]:t.splat,null!=c||o>0?void 0:(0,d.default)(!1),null!=c&&(i+=encodeURI(c))):"("===u?o+=1:")"===u?o-=1:":"===u.charAt(0)?(l=u.substring(1),c=t[l],null!=c||o>0?void 0:(0,d.default)(!1),null!=c&&(i+=encodeURIComponent(c))):i+=u;return i.replace(/\/+/g,"/")}t.__esModule=!0,t.compilePattern=a,t.matchPattern=s,t.getParamNames=u,t.getParams=l,t.formatPattern=c;var f=n(48),d=r(f),p=Object.create(null)},function(e,t,n){"use strict";function r(e){return void 0!==e.ref}function o(e){return void 0!==e.key}var i=n(26),a=n(115),s=(n(17),n(836),Object.prototype.hasOwnProperty),u=n(834),l={key:!0,ref:!0,__self:!0,__source:!0},c=function(e,t,n,r,o,i,a){var s={$$typeof:u,type:e,key:t,ref:n,props:a,_owner:i};return s};c.createElement=function(e,t,n){var i,u={},f=null,d=null,p=null,h=null;if(null!=t){r(t)&&(d=t.ref),o(t)&&(f=""+t.key),p=void 0===t.__self?null:t.__self,h=void 0===t.__source?null:t.__source;for(i in t)s.call(t,i)&&!l.hasOwnProperty(i)&&(u[i]=t[i])}var m=arguments.length-2;if(1===m)u.children=n;else if(m>1){for(var v=Array(m),y=0;y<m;y++)v[y]=arguments[y+2];u.children=v}if(e&&e.defaultProps){var g=e.defaultProps;for(i in g)void 0===u[i]&&(u[i]=g[i])}return c(e,f,d,p,h,a.current,u)},c.createFactory=function(e){var t=c.createElement.bind(null,e);return t.type=e,t},c.cloneAndReplaceKey=function(e,t){var n=c(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},c.cloneElement=function(e,t,n){var u,f=i({},e.props),d=e.key,p=e.ref,h=e._self,m=e._source,v=e._owner;if(null!=t){r(t)&&(p=t.ref,v=a.current),o(t)&&(d=""+t.key);var y;e.type&&e.type.defaultProps&&(y=e.type.defaultProps);for(u in t)s.call(t,u)&&!l.hasOwnProperty(u)&&(void 0===t[u]&&void 0!==y?f[u]=y[u]:f[u]=t[u])}var g=arguments.length-2;if(1===g)f.children=n;else if(g>1){for(var b=Array(g),A=0;A<g;A++)b[A]=arguments[A+2];f.children=b}return c(e.type,d,p,h,m,v,f)},c.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===u},e.exports=c},23,function(e,t,n){function r(e,t){this._block=o.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}var o=n(130).Buffer;r.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=o.from(e,t));for(var n=this._block,r=this._blockSize,i=e.length,a=this._len,s=0;s<i;){for(var u=a%r,l=Math.min(i-s,r-u),c=0;c<l;c++)n[u+c]=e[s+c];a+=l,s+=l,a%r===0&&this._update(n)}return this._len+=i,this},r.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,o=(n-r)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=r},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="\n    id\n    secondaryId\n    text\n    nick\n    created\n    modified\n    votesUp\n    votesDown\n    replies\n    pluses\n    minuses\n    appVersion\n    rating\n";t.CommentQuery="\n    edges {\n        node {\n            "+n+"\n        }\n    }\n    pageInfo {\n        totalCount\n    }\n",t.ReportQuery="\n    mutation material($id: String!, $productId: String!) {\n        reportComment(id: $id, productId: $productId) {\n            Success\n        }\n    }\n",t.UpVoteQuery="\n    mutation material($id: String!) {\n        upVoteComment(id: $id) {\n            Success,\n        }\n    }\n",t.DownVoteQuery="\n    mutation material($id: String!) {\n        downVoteComment(id: $id) {\n            Success\n        }\n    }\n",t.AddCommentQuery="\n    mutation material(\n        $productId: String!,\n        $contentId: String!,\n        $parentId: String,\n        $topicUri: String!,\n        $text: String!,\n        $nick: String!,\n        $stAc: String,\n    ) {\n        addComment(\n            productId: $productId,\n            contentId: $contentId,\n            parentId: $parentId,\n            topicUri: $topicUri,\n            text: $text,\n            nick: $nick\n            stAc: $stAc,\n        ) {\n            "+n+"        \n        }\n    }\n",t.CommentQueryModel={productId:{type:"String!",name:"productId",asParam:!0},contentId:{type:"String!",name:"contentId",asParam:!0},parentId:{type:"String",name:"parentId",asParam:!0},first:{type:"Int!",name:"first",asParam:!0},offset:{type:"Int",name:"offset",asParam:!0},sort:{type:"CommentsSortType!",name:"sort",asParam:!0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(10),u=r(s),l=(0,u.default)(function(e){var t=e.tagName,n=e.children,r=o(e,["tagName","children"]);switch(t){case"h1":return a.default.createElement("h1",r,n);case"h2":return a.default.createElement("h2",r,n);case"span":return a.default.createElement("span",r,n);default:return a.default.createElement("h3",r,n)}});l.displayName="HTag",l.propTypes={tagName:a.default.PropTypes.string.isRequired,children:a.default.PropTypes.node.isRequired,rest:a.default.PropTypes.any},t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),f=n(9),d=n(2),p=r(d),h=n(21),m=n(19),v=n(62),y=r(v),g=n(31),b=r(g),A=n(1072),w=r(A),_=n(706),E=r(_),T=n(547),x=function(e){return e&&e[0]},P=function(e){var t=e.children,n=e.style,r=e.isMobile;return c.default.createElement("span",{className:(0,p.default)("teaserSubject",n,r?"mobile":"desktop",E.default.wrap,E.default[n],s({},E.default.desktop,!r))},t)};P.displayName="Label",P.propTypes={children:l.PropTypes.node.isRequired,isMobile:l.PropTypes.bool,style:l.PropTypes.string};var S=t.Tag=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={tagsActive:!1},r.mouseOutTimeout=void 0,r.handleShowTags=function(e){e.preventDefault(),e.stopPropagation(),r.setState({tagsActive:!r.state.tagsActive})},r.handleMouseOut=function(){r.clearTimeout(),r.mouseOutTimeout=setTimeout(function(){r.setState({tagsActive:!1})},2e3)},r.handleMouseOver=function(){r.clearTimeout()},a=n,i(r,a)}return a(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e,t){this.context&&this.context.containerNumber!==t.containerNumber&&this.forceUpdate()}},{key:"shouldComponentUpdate",value:function(e){return e.to!==this.props.to||x(this.props.tags)!==x(e.tags)}},{key:"componentWillUnmount",value:function(){this.clearTimeout()}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){clearTimeout(this.mouseOutTimeout)})},{key:"render",value:function(){var e=this.props,t=e.tags,n=e.style,r=e.additionalTags,o=e.to,i=void 0===o?"sections":o,a=e.isMobile,s=e.config,u=this.state.tagsActive,l=[],d=null,p="";if("promo"===i){var v=this.props.label,y=void 0===v?"ARTYKUŁ SPONSOROWANY":v;return c.default.createElement(P,{style:n,isMobile:a},y)}if(d=x(t),!d||!d.name)return null;var g=(0,T.extractCollectionLinkFromTag)(d,this.props.config.BASE_URL);p=d.name.toLowerCase();var b="sections"===i?(0,m.section)(d):(0,m.tag)(d);void 0!==d.link&&"collectionrecord"===d.link.type&&(b=(0,m.record)(d.link)),g&&(b=g);var A=g?g:s.BASE_URL+b;return!a&&"undefined"!=typeof r&&(l=r.filter(function(e){return e.name&&p!==e.name.toLowerCase()}),l.length>0)?c.default.createElement("div",{className:E.default.tagContainer},c.default.createElement(h.WpjslibRegisterBox,{type:"textlink",index:1,url:A},c.default.createElement(f.Link,{to:b},c.default.createElement(P,{style:n,isMobile:a},d.name,c.default.createElement("svg",{viewBox:"0 0 13 13",onClick:this.handleShowTags},c.default.createElement("polygon",{points:"0,13 13,13 13,0"}))))),c.default.createElement(w.default,{style:n,active:u,additionalTags:l,mouseOut:this.handleMouseOut,mouseOver:this.handleMouseOver})):c.default.createElement(h.WpjslibRegisterBox,{type:"textlink",index:1,url:A},c.default.createElement(f.Link,{to:b},c.default.createElement(P,{style:n,isMobile:a},d.name)))}}]),t}(l.Component);S.contextTypes={containerNumber:l.PropTypes.number},S.displayName="Tag",S.propTypes={tags:c.default.PropTypes.arrayOf(c.default.PropTypes.object),style:c.default.PropTypes.string,to:l.PropTypes.string,isMobile:l.PropTypes.bool},t.default=(0,y.default)((0,b.default)(S))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getForcedDomain=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(46),s=n(39),u=(r(s),function(e){return Array.isArray(e)&&e.length>0}),l=(t.getForcedDomain=function(e){var t=e;if(e.endsWith(a.STAGE_HOST_SUFFIX))t=e.replace(a.STAGE_HOST_SUFFIX,a.STAGE_AAB_HOST_SUFFIX);else if(e.endsWith(a.STAGE_HOST_NGNIX_SUFFIX))try{var n=e.match("staging-(.*)-front");u(n)&&(t=n[1]+"."+a.STAGE_AAB_HOST_SUFFIX)}catch(e){console.error("failed to force host domain")}return t},function(){var e={HOSTNAME:"",HOSTNAME_SUBDIRECTORY:"",DEFAULT_PATH:"/api/v2"},t=function(t){var n=t.HOSTNAME,r=t.HOSTNAME_SUBDIRECTORY,o=t.BASE_URL,a="undefined"==typeof window;e=i({},e,{IS_SERVERSIDE:a,BASE_URL:o,HOSTNAME:n,HOSTNAME_SUBDIRECTORY:r})},n=function(){var t=e,n=t.HOSTNAME,r=t.HOSTNAME_SUBDIRECTORY,o=n?"https://"+n:"",i=r?"/"+r:"";return o+i},r=function(e,t){if(!e)throw new Error("ApiHostManager couldn't fetch data from not defined hostname");return e+t},a=function(e){return n()+e},s=function(e){t(e)},u=function(t){var n=e,r=n.DEFAULT_PATH;switch("undefined"==typeof t?"undefined":o(t)){case"string":return{client:t,server:t};case"object":return{client:Object.keys(t).find(function(e){return"client"===e})?t.client:r,server:Object.keys(t).find(function(e){return"server"===e})?t.server:r};default:return{client:t||r,server:t||r}}},l=function(t,n){var o=e,i=o.IS_SERVERSIDE,s=u(n),l=t||!1;return i?r(l,s.server):a(s.client)};return{initialize:s,getHost:l}}),c=l();t.default=c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.isLiveblogDataValid=function(e){return e&&e.content&&e.content.params&&"liveblog"===e.content.params.type&&!!e.content.params.id},r=t.getLiveblogData=function(e){var t=e.elements,r=void 0===t?[]:t;return Array.isArray(r)?r.filter(function(e){return n(e)}):[]};t.isLiveblog=function(e){var t=e.elements,n=void 0===t?[]:t,o=r({elements:n});return!!o.length}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(91),u=r(s),l=n(2),c=r(l),f=n(535),d=r(f),p=n(377),h=n(1321),m=r(h),v=n(1319),y=r(v),g=n(76),b=r(g),A=n(592),w=r(A),_=n(265),E=r(_),T=n(139),x=r(T),P=n(63),S=r(P),C=n(9),O=n(1327),M=r(O),R=function(e){var t=e.alt,n=e.authors,r=e.canonical,i=e.elementsAmount,s=e.external,u=e.gloTitle,l=e.hTagName,f=void 0===l?"h2":l,h=e.id,v=e.index,g=e.interviewee,A=e.isMobile,_=e.isQuiz,T=e.isWithLead,P=e.lead,O=e.listingMode,R=void 0!==O&&O,k=e.mainPhoto,I=e.placeholders,L=e.published,N=e.question,j=e.quiz,D=e.section,F=e.sectionBgColor,U=e.setBoxRef,B=e.setTeaserRef,z=e.shouldDisplay,H=e.slug,V=e.sources,q=e.sponsored,G=e.subtype,W=e.teaserConfig,X=e.teaserType,Y=e.title,Q=e.type,K=e.url,Z=e.useGlo,J=Boolean(n&&n.length),$=(0,p.isTeaserBg)(W,A)&&"ranking"!==G,ee=function(){return T?a.default.createElement(M.default,{alt:t,canonical:r,elementsAmaunt:i,external:s,hTagName:f,icon:"ranking"===G&&E.default,id:h,index:v,interviewee:g,isMobile:A,isQuiz:_,lead:P,mainPhoto:k,placeholders:I,published:L,question:N,section:D,setBoxRef:U,slug:H,subtype:G,teaserConfig:W,teaserType:X,title:Y,type:Q,url:K,sponsored:q}):a.default.createElement(C.Link,{canonical:r,className:b.default.link,external:s,id:h,isQuiz:_,question:N,setBoxRef:U,slug:H,sources:V,title:Y,type:Q,to:K},a.default.createElement(d.default,{sponsored:q}),a.default.createElement(x.default,{alt:t,elementsAmount:i,icon:"ranking"===G&&E.default,index:v,isMobile:A,mainPhoto:k,placeholders:I,section:D,teaserConfig:W,teaserType:X}),a.default.createElement("div",{className:(0,c.default)(b.default.wrapTitle,{teaserBg:$})},a.default.createElement("div",{className:(0,c.default)(b.default.title,{teaserBg:W.styles.isVertical})},a.default.createElement(w.default,{teaserType:X,style:b.default.teaserMarkInTitle}),a.default.createElement("div",{className:b.default.titleIn},S.default.isEnabled("authors")&&a.default.createElement(y.default,{authors:n,borderColor:F,isRanking:"ranking"===G,isLarge:!A&&W.styles.isGlonews&&W.styles.isBig}),a.default.createElement(m.default,{teaserConfig:W,isAuthor:J,isMobile:A,title:Y,gloTitle:u,subtype:G,interviewee:g,useGlo:Z,hTagName:f}),_&&j))))},te=function(){var e;if(R)return a.default.createElement("div",{className:(0,c.default)(b.default.link,o({},b.default.hidden,!z)),ref:B},ee());var t={};return Object.keys(W.styles).forEach(function(e){t[b.default[e]]=!0}),a.default.createElement("div",{className:(0,c.default)(b.default.wrap,t,b.default[X],(e={},o(e,b.default.desktop,!A),o(e,"teaserBgColor",$),o(e,b.default.quiz,_),e))},ee())};return te()};R.displayName="Section",R.propTypes={isMobile:i.PropTypes.bool,id:i.PropTypes.string,title:i.PropTypes.string.isRequired,type:i.PropTypes.string,subtype:i.PropTypes.string,slug:i.PropTypes.string,sources:i.PropTypes.array,mainPhoto:i.PropTypes.object.isRequired,teaserType:i.PropTypes.string,section:i.PropTypes.object,authors:i.PropTypes.array,teaserConfig:i.PropTypes.object.isRequired,useGlo:i.PropTypes.bool.isRequired,index:i.PropTypes.number.isRequired,gloTitle:i.PropTypes.string,interviewee:i.PropTypes.string,sectionBgColor:i.PropTypes.string,url:i.PropTypes.string,external:i.PropTypes.bool,placeholders:i.PropTypes.object.isRequired,elementsAmount:i.PropTypes.number,isQuiz:i.PropTypes.bool,question:i.PropTypes.number,quiz:i.PropTypes.node,alt:i.PropTypes.string,hTagName:i.PropTypes.string},R.defaultTypes={isMobile:!1,url:"",elementsAmount:0,isQuiz:!1,alt:""},t.default=(0,u.default)(function(e,t){return e.title!==t.title||e.shouldDisplay!==t.shouldDisplay||e.quiz!==t.quiz})(R),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1351),a=r(i),s=n(1178),u=r(s),l=(0,o.withConfig)((0,a.default)(u.default));t.default=l,e.exports=t.default},,function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(this&&this[r]||r);else if(Array.isArray(r))e.push(n.apply(this,r));else if("object"===o)for(var a in r)i.call(r,a)&&r[a]&&e.push(this&&this[a]||a)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?(n.default=n,e.exports=n):(r=[],o=function(){return n}.apply(t,r),!(void 0!==o&&(e.exports=o)))}()},function(e,t,n){"use strict";var r=n(11);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(84);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(85),o=n(14),i="__core-js_shared__",a=o[i]||(o[i]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(125)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(11),o=n(57),i=n(33)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},function(e,t,n){function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===y(e)}function o(e){return"boolean"==typeof e}function i(e){return null===e}function a(e){return null==e}function s(e){return"number"==typeof e}function u(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function c(e){return void 0===e}function f(e){return"[object RegExp]"===y(e)}function d(e){return"object"==typeof e&&null!==e}function p(e){return"[object Date]"===y(e)}function h(e){return"[object Error]"===y(e)||e instanceof Error}function m(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function y(e){return Object.prototype.toString.call(e)}t.isArray=r,t.isBoolean=o,t.isNull=i,t.isNullOrUndefined=a,t.isNumber=s,t.isString=u,t.isSymbol=l,t.isUndefined=c,t.isRegExp=f,t.isObject=d,t.isDate=p,t.isError=h,t.isFunction=m,t.isPrimitive=v,t.isBuffer=n(32).Buffer.isBuffer},function(e,t,n){function r(e,t){var n=o(e),r=Number(t);return n.setDate(n.getDate()+r),n}var o=n(6);e.exports=r},function(e,t,n){function r(e,t){var n=o(e).getTime(),r=Number(t);return new Date(n+r)}var o=n(6);e.exports=r},function(e,t,n){function r(e,t){var n=o(e),r=n.getTime(),i=o(t),a=i.getTime();return r<a?-1:r>a?1:0}var o=n(6);e.exports=r},function(e,t,n){function r(e){var t=o(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var r=i(n);return r}var o=n(153),i=n(155);e.exports=r},function(e,t,n){"use strict";var r=n(786),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,u=function(e){return"function"==typeof e&&"[object Function]"===i.call(e)},l=n(1976)(),c=s&&l,f=function(e,t,n,r){if(t in e)if(r===!0){if(e[t]===n)return}else if(!u(r)||!r())return;c?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n},d=function(e,t){var n=arguments.length>2?arguments[2]:{},i=r(t);o&&(i=a.call(i,Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;s+=1)f(e,i[s],t[i[s]],n[i[s]])};d.supportsDescriptors=!!c,e.exports=d},function(e,t){e.exports={mainWrap:"i3iPBXrb",wrap:"iRQvycma",flexHeight:"i2G32N3L",simpleType:"i1GNX_fA",link:"i1H56GIO",category:"i14TVSlN",active:"iZklwbme",figure:"i3bBevUs",figureEmpty:"i14ajXM_",name:"i1lXcfrU",nameText:"i1N2JOH4",subcategoryNameText:"i3LFcvqK",submenu:"i3vdzA_z",empty:"i2ItIxBN",links:"i1MeU6hf",oneColumn:"i1B_Rch1",subcategoryLink:"ixrmFy72",iconFallback:"i3qGRkW5"}},,function(e,t){"use strict";t.__esModule=!0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.canUseDOM=n},,,,function(e,t,n){var r=n(104),o=r.Symbol;e.exports=o},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?i(e[0],e[1]):o(e):u(e)}var o=n(2083),i=n(2084),a=n(167),s=n(42),u=n(2183);e.exports=r},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e,t){var n=s(e)?o:i;return n(e,a(t))}var o=n(2063),i=n(301),a=n(2100),s=n(42);e.exports=r},function(e,t,n){var r=n(2075),o=n(128),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){function r(e,t){return o(e,t)}var o=n(447);e.exports=r},function(e,t,n){function r(e){if(!a(e)||o(e)!=s)return!1;var t=i(e);if(null===t)return!0;var n=f.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}var o=n(165),i=n(765),a=n(128),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,f=l.hasOwnProperty,d=c.call(Object);e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||i(e)&&o(e)==a}var o=n(165),i=n(128),a="[object Symbol]";e.exports=r},function(e,t,n){function r(e){return a(e)?o(e):i(e)}var o=n(752),i=n(758),a=n(112);e.exports=r},function(e,t){e.exports='<svg version="1.1" id="Warstwa_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 16 10" style="enable-background:new 0 0 16 10;" xml:space="preserve">\n\t <polygon points="0,2.1 2.1,0 8,5.9 13.9,0 16,2.1 8.2,10 7.8,10 "/>\n</svg>\n'},function(e,t,n){"use strict";function r(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}function o(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(t));default:return!1}}var i=n(23),a=n(461),s=n(462),u=n(466),l=n(816),c=n(817),f=(n(12),{}),d=null,p=function(e,t){e&&(s.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},h=function(e){return p(e,!0)},m=function(e){return p(e,!1)},v=function(e){return"."+e._rootNodeID;
},y={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n?i("94",t,typeof n):void 0;var r=v(e),o=f[t]||(f[t]={});o[r]=n;var s=a.registrationNameModules[t];s&&s.didPutListener&&s.didPutListener(e,t,n)},getListener:function(e,t){var n=f[t];if(o(t,e._currentElement.type,e._currentElement.props))return null;var r=v(e);return n&&n[r]},deleteListener:function(e,t){var n=a.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=f[t];if(r){var o=v(e);delete r[o]}},deleteAllListeners:function(e){var t=v(e);for(var n in f)if(f.hasOwnProperty(n)&&f[n][t]){var r=a.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(e,n),delete f[n][t]}},extractEvents:function(e,t,n,r){for(var o,i=a.plugins,s=0;s<i.length;s++){var u=i[s];if(u){var c=u.extractEvents(e,t,n,r);c&&(o=l(o,c))}}return o},enqueueEvents:function(e){e&&(d=l(d,e))},processEventQueue:function(e){var t=d;d=null,e?c(t,h):c(t,m),d?i("95"):void 0,u.rethrowCaughtError()},__purge:function(){f={}},__getListenerBank:function(){return f}};e.exports=y},function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return y(e,r)}function o(e,t,n){var o=r(e,n,t);o&&(n._dispatchListeners=m(n._dispatchListeners,o),n._dispatchInstances=m(n._dispatchInstances,e))}function i(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.traverseTwoPhase(e._targetInst,o,e)}function a(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?h.getParentInstance(t):null;h.traverseTwoPhase(n,o,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,o=y(e,r);o&&(n._dispatchListeners=m(n._dispatchListeners,o),n._dispatchInstances=m(n._dispatchInstances,e))}}function u(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function l(e){v(e,i)}function c(e){v(e,a)}function f(e,t,n,r){h.traverseEnterLeave(n,r,s,e,t)}function d(e){v(e,u)}var p=n(237),h=n(462),m=n(816),v=n(817),y=(n(17),p.getListener),g={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:f};e.exports=g},function(e,t){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(114),i=n(471),a={view:function(e){if(e.view)return e.view;var t=i(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};o.augmentClass(r,a),e.exports=r},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var r=t[t.length-1];return function(){for(var e=r.apply(void 0,arguments),n=t.length-2;n>=0;n--){var o=t[n];e=o(e)}return e}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TagBox=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(2),p=r(d),h=n(31),m=r(h),v=n(38),y=n(37),g=n(1099),b=n(1781),A=r(b),w=t.TagBox=function(e){function t(){var e,n,r,o;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.handleClick=function(){r.context.store.dispatch((0,y.toggleMenu)({value:"Tematy"})),WP.stat.wave("viewCategories")},o=n,a(r,o)}return s(t,e),l(t,[{key:"render",value:function(){var e,t=this.props,n=t.name,r=t.mobile,i=t.titleSize,a=void 0===i?"large":i,s=t.config,l=t.image,c=r?140:90,d={width:c,height:c},h=n&&n.toLowerCase().includes("self")&&n.toLowerCase().includes("care")?"Samodbałość":n,m=s.colors.gradient||s.colors.sectionsMenuDefaultFigureBg||s.colors.header.main;return f.default.createElement("div",{className:(0,p.default)("sectionPage",A.default.wrap,(e={},o(e,A.default.desktop,!r),o(e,"desktop",!r),o(e,A.default.smallWrap,"small"===a),e))},l&&l.url&&f.default.createElement("figure",{className:A.default.figure,style:(0,g.applyCustomBackground)(l,m)},f.default.createElement(v.Picture,u({src:l.url},d,{useIr:!0,mainPhoto:!0,isTeaser:!0,irOptions:"O"}))),"small"!==a&&f.default.createElement("h1",{className:(0,p.default)("sectionPage--title",A.default.name)},h),"small"===a&&f.default.createElement("h2",{className:(0,p.default)("sectionPage--title",A.default.name,A.default.smallName)},h))}}]),t}(c.Component);w.propTypes={name:c.PropTypes.string.isRequired,thumbnail:c.PropTypes.string,mobile:c.PropTypes.bool.isRequired,titleSize:c.PropTypes.string,image:c.PropTypes.object},w.contextTypes={store:c.PropTypes.object.isRequired},t.default=(0,m.default)(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.View=t.ViewComponent=t.slots=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),f=n(5),d=n(2),p=r(d),h=n(46),m=n(122),v=n(599),y=r(v),g=n(529),b=r(g),A=n(13),w=n(83),_=n(123),E=n(121),T=r(E),x=n(1184),P=r(x),S=n(1158),C=r(S),O=n(973),M=n(956),R=r(M),k=n(957),I=r(k),L=n(959),N=r(L),j=n(958),D=r(j),F=n(960),U=r(F),B=n(292),z=r(B),H={},V=function(e,t){H[t]=e},q=t.slots={contentRight:34,contentRightArticle:36,advRail:37,rightSlotPreviewTeaser:35,rightSlotHolder:28,bottomTeasers:29,bottom1:80,bottom2:81},G=t.ViewComponent=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={isGallery:!1},r}return a(t,e),u(t,[{key:"componentDidUpdate",value:function(e,t,n){var r="gallery"===this.props.content.data.type,o=this.props.content.loaded;r&&!this.state.isGallery?this.setState({isGallery:!0}):o&&!r&&this.state.isGallery&&this.setState({isGallery:!1})}},{key:"getDesktopViewType",value:function(){var e=this.state.isGallery,t=this.props,n=t.params,r=t.content,o=t.setRef,i=n.id,a=n.slug,s=n.type,u=n.slide,l=r.data,f=r.loading,d=l.subtype===h.TYPE_ARTICLE.sub.premium,p=e&&f?"gallery":l.type,m=[i];switch(p){case"gallery":return c.default.createElement(N.default,{id:i,slug:a,type:s,slide:u,advHolders:H,setHolder:V,excludeIds:m,slots:q,setRef:o,loading:f});case"collectionlisting":case"collectionrecord":return c.default.createElement(D.default,{id:i,type:s,advHolders:H,setHolder:V,excludeIds:m,slots:q,setRef:o});case"video":return c.default.createElement(U.default,{id:i,type:s,advHolders:H,setHolder:V,excludeIds:m,slots:q,setRef:o});default:return d?c.default.createElement(I.default,{id:i,slug:a,type:s,advHolders:H,setHolder:V,excludeIds:m,slots:q,setRef:o}):c.default.createElement(R.default,{id:i,slug:a,type:s,advHolders:H,setHolder:V,excludeIds:m,slots:q,setRef:o})}}},{key:"getMobileViewType",value:function(){var e=this.props,t=e.params,n=e.content,r=(e.config,e.setRef),o=t.id,i=t.slug,a=t.type,s=n.data,u=s.subtype===h.TYPE_ARTICLE.sub.premium,l=[o],f=s.cssCritical,d=s.sponsored;switch(this.props.content.data.type){case"collectionlisting":case"collectionrecord":return[c.default.createElement("div",{key:o+"wrapper"},c.default.createElement(m.ContentContainer,null)),c.default.createElement(y.default,{id:o,storeKey:"collections/"+o,infiniteScroll:!0,title:"Zobacz więcej",setHolder:V,excludeIds:l,stArea:"list-linked",customStyle:"record",setRef:r,key:o+"collections"})];case"video":return[c.default.createElement("div",{key:o+"wrapper"},c.default.createElement(m.ContentContainer,{type:a,excludeIds:l})),c.default.createElement(P.default,{contentId:o,categories:["newest","seenAfterContent","similar"],advSlots:{5:15,10:16,15:17,20:18,25:19},sectionPositions:{2:1,6:2,8:3,10:4,12:5},limit:"30",mode:"accordion",key:o+"cockroach"})];default:var p=!d||f?c.default.createElement(_.ContentQualityPoll,{mobile:!0,articleId:this.props.content.data.id}):null;return[c.default.createElement("div",{key:o+"wrapper"},c.default.createElement(m.ContentContainer,null),!u&&c.default.createElement(A.AdvHolder,{slot:"32"}),p,c.default.createElement(w.ReactionsContainer,{key:o+"reactions",main:!0,type:"likeNfollow"}),c.default.createElement(b.default,{key:o+"comments",listId:o,paginated:!1,push:this.context.router.push,slug:i,type:a})),c.default.createElement(P.default,{contentId:o,categories:["newest","seenAfterContent","similar"],advSlots:{5:15,10:16,15:17,20:18,25:19},sectionPositions:{2:1,6:2,8:3,10:4,12:5},limit:"30",mode:"accordion",key:o+"cockroach",hideFirstSection:!1})]}}},{key:"render",value:function(){var e=this.state.isGallery,t=this.props.params,n=t.type,r=t.slide,o=this.props,i=o.content,a=o.mobile,u=o.config,l=i.data,f=l.type,d=l.ageRestrictions,h=void 0===d?0:d,m=l.drastic,v=void 0!==m&&m,y=!!u.dynamic.BOT;if(!(e||i&&f))return null;var g=function(){return v||h>=18?y?c.default.createElement(T.default,{data:i.data}):c.default.createElement(C.default,{ageRestrictions:h,drastic:v,metaData:i.data}):null};return"q"===n?c.default.createElement(O.View,s({},this.props,{params:s({},this.props.params,{question:r})})):a?c.default.createElement("div",{className:(0,p.default)(z.default.wrap)},g(),this.getMobileViewType()):c.default.createElement("div",null,g(),this.getDesktopViewType())}}]),t}(l.Component);G.propTypes={config:l.PropTypes.object,content:l.PropTypes.object,mobile:l.PropTypes.bool,params:l.PropTypes.object},G.contextTypes={router:l.PropTypes.object.isRequired,params:l.PropTypes.object,cookies:l.PropTypes.object};var W=function(e,t){var n=e.content.items[t.params.id];return{content:n}};t.View=(0,f.connect)(W)(G)},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.post=t.postFailure=t.postSuccess=t.postRequest=t.names=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(18),a=n(336),s=t.names={COMMENTS_POST_COMMENT_REQUEST:"COMMENTS_POST_COMMENT_REQUEST",COMMENTS_POST_COMMENT_SUCCESS:"COMMENTS_POST_COMMENT_SUCCESS",COMMENTS_POST_COMMENT_FAILURE:"COMMENTS_POST_COMMENT_FAILURE"},u=t.postRequest=(0,i.createAction)(s.COMMENTS_POST_COMMENT_REQUEST),l=t.postSuccess=(0,i.createAction)(s.COMMENTS_POST_COMMENT_SUCCESS),c=t.postFailure=(0,i.createAction)(s.COMMENTS_POST_COMMENT_FAILURE);t.post=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){var n=r(regeneratorRuntime.mark(function n(r){var i,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=Math.floor((new Date).getTime()),r(u({params:o({},e,{timestamp:i})})),n.prev=2,n.next=5,a.comment.post(e,t);case 5:s=n.sent,r(l({data:s,params:o({},e,{timestamp:i})})),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),r(c({message:n.t0.message,status:n.t0.status,params:o({},e,{timestamp:i})}));case 12:case"end":return n.stop()}},n,void 0,[[2,9]])}));return function(e){return n.apply(this,arguments)}}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearSetting=t.setSetting=t.names=void 0;var r=n(18),o=t.names={COMMENTS_SET_SETTING:"COMMENTS_SET_SETTING",COMMENTS_CLEAR_SETTING:"COMMENTS_CLEAR_SETTING"};t.setSetting=(0,r.createAction)(o.COMMENTS_SET_SETTING),t.clearSetting=(0,r.createAction)(o.COMMENTS_CLEAR_SETTING)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showAdvGrid=t.setIsFirstLoad=t.unlockAdvSlots=t.lockAdvSlots=t.names=void 0;var r=n(18),o=t.names={ADV_LOCK_SLOTS:"ADV_LOCK_SLOTS",ADV_UNLOCK_SLOTS:"ADV_UNLOCK_SLOTS",SET_IS_FIRST_LOAD:"SET_IS_FIRST_LOAD",SHOW_ADV_GRID:"SHOW_ADV_GRID"};t.lockAdvSlots=(0,r.createAction)(o.ADV_LOCK_SLOTS),t.unlockAdvSlots=(0,r.createAction)(o.ADV_UNLOCK_SLOTS),t.setIsFirstLoad=(0,r.createAction)(o.SET_IS_FIRST_LOAD),t.showAdvGrid=(0,r.createAction)(o.SHOW_ADV_GRID)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1067),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(44),p=r(d),h=n(2),m=r(h),v=n(342),y=r(v),g=n(5),b=n(25),A=n(62),w=r(A),_=n(50),E=r(_),T=n(252),x=n(37),P=n(357),S=n(1827),C=r(S),O=n(536),M=n(537),R=r(M),k="https://std.wpcdn.pl/images/adv/placeholder_wp.svg",I=["released","transparent","hidden","height","width","isRegistered","backgroundColor","shouldRegister","shouldDisplay"],L=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r._ref=null,r._classNamePlaceholder=null,r._placeholderConfiguration=null,r.state={released:!1,transparent:!1,hidden:!1,height:0,width:0,isRegistered:!1},r.isInRegistrationQueue=!1,r.setHolder=function(e){var t=r.props,n=t.setHolder,o=t.slot;r.holderRef=e,n&&n(e,o)},r.mutationObserverCallback=function(){if(r._ref){var e=r.props.updateMutationObservers,t=(0,P.calculateMutationObserverData)(r._ref);e({id:"slot-"+r.props.slot,data:t})}},r.setRef=function(e){var t=r.context.mutationObserver;r._ref=e,r.props.observe&&r._ref&&t.observe({elementRef:r._ref,eventCallback:r.mutationObserverCallback}),r.props.setAdvRef&&r.props.setAdvRef(r._ref)};var o=e.shouldRegister,s=n.isServerSide;r.state=u({},r.state,{hidden:r.props.hidden,isRegistered:"undefined"!=typeof o?!!o:s||r.isRegisteredAsAdsFirst()});try{var l=e.isMobile,c=e.slot;r._classNamePlaceholder=(0,T.genClassName)(c,l?"m":"d"),r._placeholderConfiguration=(0,O.getPlaceholderConfiguration)(c,e)}catch(e){console.log("SlotComponent",e)}return r}return s(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.slot,n=e.options,r=void 0===n?{}:n,o=this.context,i=o.config.dynamic.ADS_FIRST_SLOTS,a=void 0===i?{}:i,s=o.isServerSide,l=this._placeholderConfiguration,c=l.fixed,f=l.sticky;s&&(a[t]=a[t]||{placeholder:null,slot:null},a[t].placeholder="."+this._classNamePlaceholder,a[t].placeholderOpts=u({},r,{fixed:!!c,sticky:!!f}))}},{key:"componentDidMount",value:function(){var e=this.props.slot;return!this.isRegisteredAsAdsFirst()&&(e&&(window.__advHolders=window.__advHolders||{},window.__advHolders[e+""]=this),void this.registerPlaceholder())}},{key:"componentWillUnmount",value:function(){this.props.observe&&this.disconnectObserver()}},{key:"disconnectObserver",value:function(){this.context.mutationObserver.unobserve({elementRef:this._ref})}},{key:"registerPlaceholder",value:function(){var e=this,t=this.props,n=t.slot,r=t.options,o=this._placeholderConfiguration,i=o.fixed,a=o.sticky,s="undefined"==typeof this.props.shouldRegister||this.props.shouldRegister;s&&(this.isInRegistrationQueue=!0,window.WP.push(function(){var t=r||{fixed:!!i,sticky:!!a};PAKO_MANAGER.gaf.placeholder.register(n,e.holderRef,t)}),this.setState(function(e){return u({},e,{isRegistered:!0})},function(){e.isInRegistrationQueue=!1}))}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,r=!1;return I.forEach(function(e){t[e]!==n.state[e]&&(r=!0)}),r?r:(Object.keys(e).forEach(function(t){e[t]!==n.props[t]&&(r=!0)}),r)}},{key:"shouldRegister",value:function(e){var t=e.shouldRegister,n=this.props.shouldRegister;return"undefined"==typeof t||"undefined"==typeof n||!t&&n}},{key:"componentDidUpdate",value:function(e){this.shouldRegister(e)&&(this.state.isRegistered||this.isInRegistrationQueue||this.registerPlaceholder())}},{key:"isRegisteredAsAdsFirst",value:function(){var e=this.props.isFirstLoad,t=this.context,n=t.config.dynamic.ADS_FIRST_SLOTS,r=void 0===n?{}:n,o=t.isServerSide;return!o&&e&&!!r[this.props.slot]}},{key:"calculateHeight",value:function(e){return"string"==typeof e?e:e+"px"}},{key:"getStyle",value:function(e){var t=this._placeholderConfiguration,n=t.height,r=t.width,o=this.props.customHeight,i=o?o:n?this.calculateHeight(n):"auto",a=r&&"auto"!==r?"px":"auto",s={"min-height":i};this.props.wide||(s.width=a);var u=Object.keys(s).map(function(e){return e+":"+s[e]+";"}).join("");return"\n            div."+e+" {\n                "+u+"\n            }\n        "}},{key:"getHolderBackgroundClass",value:function(){var e=this._placeholderConfiguration.theme;switch(e){case O.THEME.LIGHT:return"holderLightTheme";default:return"holderNormalTheme"}}},{key:"render",value:function(){var e=this.context,t=e.random,n=e.messer,r=this.props,i=r.narrow,a=r.inMobileHeader,s=r.inMobileContent,u=r.isMobile,l=r.isLocked,c=r.inMobileList,d=r.slot,h=r.bellowGlo,v=r.isSticky,g=r.noStyle,b=r.shouldDisplay,A=this.state.isRegistered,w=!!parseInt(this.props.frame,10),_=!!parseInt(this.props.moved,10),T=!!parseInt(this.props.space,10),x=!!parseInt(this.props.teaser,10),P=!!parseInt(this.props.top10,10),S=[(0,E.default)(t,"holder")],O=(0,E.default)(t,d+"adv"),M=this.getStyle(O),R=this.getHolderBackgroundClass();return u||S.push((0,E.default)(t,"desktop")),x&&S.push((0,E.default)(t,"teaser")),P&&S.push((0,E.default)(t,"top10")),a&&S.push((0,E.default)(t,"inMobileHeader")),s&&S.push((0,E.default)(t,"inMobileContent")),c&&S.push((0,E.default)(t,"inMobileList")),w&&S.push((0,E.default)(t,"frame")),T&&S.push((0,E.default)(t,"space")),_&&S.push((0,E.default)(t,"moved")),i&&S.push((0,E.default)(t,"narrow")),h&&S.push((0,E.default)(t,"bellowGlo")),g&&S.push((0,E.default)(t,"nostyle")),v&&S.push((0,E.default)(t,"sticky")),f.default.createElement("div",{className:(0,m.default)((0,E.default)(t,"holderWrapper"),(0,E.default)(t,R),o({},(0,E.default)(t,"wrapTop10"),P),o({},(0,E.default)(t,"mobileWithLead"),u)),ref:this.setRef},f.default.createElement(p.default,{style:[{cssText:M}]}),f.default.createElement("div",{ref:this.setHolder,className:(0,m.default)(S,O,this._classNamePlaceholder)},f.default.createElement("div",{className:(0,m.default)((0,E.default)(t,"holderBg"),(0,E.default)(t,"holderBgColor"))}),f.default.createElement("img",{className:(0,E.default)(t,"holderImg"),src:n.mess(k),alt:(0,E.default)(t,"holderName")}),!l&&A&&f.default.createElement(y.default,{slot:d}),this.props.children,v&&b&&f.default.createElement("button",{className:C.default.CloseButton,onClick:this.props.closeHandler},"reklama")))}}]),t}(f.default.Component);L.propTypes={updateMutationObservers:c.PropTypes.func,bunchName:c.PropTypes.string},L.contextTypes={random:c.PropTypes.number.isRequired,messer:c.PropTypes.any.isRequired,config:c.PropTypes.object.isRequired,isServerSide:c.PropTypes.bool.isRequired,mutationObserver:c.PropTypes.any.isRequired},L.displayName="AdvHolder",L.propTypes={children:c.PropTypes.object,options:c.PropTypes.object,slot:c.PropTypes.any,noStyle:c.PropTypes.bool,hidden:c.PropTypes.any,frame:c.PropTypes.any,moved:c.PropTypes.any,space:c.PropTypes.any,teaser:c.PropTypes.any,top10:c.PropTypes.any,wide:c.PropTypes.any,narrow:c.PropTypes.any,isMobile:c.PropTypes.bool,bellowGlo:c.PropTypes.bool,inMobileHeader:c.PropTypes.bool,inMobileContent:c.PropTypes.bool,inMobileList:c.PropTypes.bool,setHolder:c.PropTypes.func,shouldRegister:c.PropTypes.bool,shouldDisplay:c.PropTypes.bool,logoutSlot:c.PropTypes.bool};var N=function(e){return e.adv.isLocked},j=function(e){return e.adv.isFirstLoad},D=(0,b.createSelector)(N,j,function(e,t){return{isLocked:e,isFirstLoad:t}}),F=function(e){return{updateMutationObservers:function(t){return e((0,x.updateMutationObservers)(t))}}};t.default=(0,R.default)((0,w.default)((0,g.connect)(D,F)(L))),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1),s=r(a),u=n(5),l=n(94),c=r(l),f=n(37),d=n(173),p=function(e){return{theme:e.ui.theme}},h=function(e){return{changeTheme:function(t){e((0,f.setTheme)(t))}}},m=function(e,t){return e.name===t},v=function(e){var t=function(t){var n=t.theme,r=o(t,["theme"]);return s.default.createElement(e,i({},r,{isThemeDefault:m(n,d.THEME_MODE.DEFAULT),isThemeDark:m(n,d.THEME_MODE.DARK),theme:n}))};return t.displayName="withTheme("+(0,c.default)(e)+")",(0,u.connect)(p,h)(t)};t.default=v,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"wp_dark_c",defaultValue:"[0,0,0,0]",allowedValues:[]},r={lastSet:0,lastViewCount:0,viewCount:0,closeCount:0};t.ACQUISITION_COOKIE_CONFIGURATION=n,t.ACQUISITION_CAPPING_DEFAULT=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.isValidSource=function(e,t){return e&&""!==e.name&&t.excludeSourceIds.indexOf(e.id)===-1};t.isInvalidSource=function(e,t){return!n(e,t)},t.excludeSources=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];return e.filter(function(e){return n(e,t)})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.genL=function(e){return String.fromCharCode(65+e%25)};t.genClassName=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=new Date,o=r.getDate(),i=r.getDay(),a=r.getMonth(),s=[];return s.push(n(e+o)),s.push(n(e+i)),s.push(n(e+a)),i%3?(s.push(e),s.push(n(e*i)),s.push(e%3),s.push(n(e*o))):(s.push(n(e*i)),s.push(n(e*o)),s.push(e),s.push(e%2)),s.push((o+i+a)*e),s.push(t),s.join("").toLocaleLowerCase()}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=new RegExp("(^|;) ?"+t+"=([^;]*)(;|$)"),r=e.match(n);return r?r[2]:""};t.default=n,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=e.desktop,r=e.mobile;return n&&r?t?r:n:e};t.default=n,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getValidatedSchemaProps=function(e,t){return e?{itemProp:e,content:t}:e},t.getValidatedSchemaType=function(e){return e?{itemType:"http://schema.org/"+e,itemScope:!0}:e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(t.REF_FB="facebook.com",t.REF_WP="wp.pl",t.ALLOWED_HOSTS=["google","facebook","bing.com","t.co","instagram","youtube.com","linkedin.com","pinterest.com"]);t.isReferrerWP=function(){if("undefined"==typeof window)return!1;if("undefined"!=typeof document&&document.referrer){var e=document.referrer;if(null!==e.match(/https?:\/\/([w.]+)?(wp.pl)/))return!0}var t=window.location.search.includes("deb=wp");return!!t},t.isReferrerFB=function(){if("undefined"==typeof window)return!1;if("undefined"!=typeof document&&document.referrer){var e=document.referrer;if(null!==e.match(/https?:\/\/([a-z-.]+)?(facebook.com)/))return!0}var t=window.location.search.includes("deb=fb");return!!t},t.isReferrerWPDomain=function(e){var t="undefined"!=typeof document&&document.referrer,n="undefined"!=typeof e?e:t?document.referrer:"";return!!n.match(/https?:\/\/([w.]+)?([a-z.]+)?(wp.pl)/)},t.isAllowedReferrer=function(e){var t="undefined"!=typeof document&&document.referrer,n="undefined"!=typeof e?e:t?document.referrer:"";return r.some(function(e){return n.includes(e)})},t.isDirectVisit=function(e){var t="undefined"!=typeof document&&document.referrer,n="undefined"!=typeof e?e:t?document.referrer:"";return!n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},r=function(e,t){var r=e.width/t.width,o=e.height/t.height;return r>=o?n.HORIZONTAL:n.VERTICAL},o=function(e,t,r){var o={width:t.width,height:t.height},i=1;switch(e){case n.HORIZONTAL:return i=t.width/t.height,o.width=r.maxWidth,o.height=r.maxHeight?r.maxWidth/i:"auto",o;case n.VERTICAL:return i=t.height/t.width,o.width=r.maxWidth?r.maxHeight/i:"auto",o.height=r.maxHeight,o;default:return o}};t.resizeAspectRatio=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxWidth:0,maxHeight:0},i={width:e.width,height:e.height},a=t.maxWidth||0,s=t.maxHeight||0,u=!!a&&e.width>a,l=!!s&&e.height>s;if(u&&l){var c=r(e,t);i=o(c,e,t)}else u?i=o(n.HORIZONTAL,e,t):l&&(i=o(n.VERTICAL,e,t));return i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1128),u=r(s),l=n(1161),c=r(l),f=n(1160),d=r(f),p={RANDOM_POSITIONS:!1},h=function e(){o(this,e),this.slots=new c.default},m=function(){function e(t){var n=this,r=t.randomPositions,i=t.slotsToRegister,a=t.refreshListing,s=t.parentId;o(this,e),this.registerSlots=function(){n.store.slots.list.map(function(e){n.registerSlot(e)}),n.refreshListing()},this.unregisterSlots=function(){n.store.slots.list.map(function(e){n.unregisterSlot(e)}),n.store.slots.list.length=0,n.slotsToRegister.length=0},this.store=new h,this.randomPositions=r||p.RANDOM_POSITIONS,this.slotsToRegister=i||[],this.refreshListing=a,this.parentId=s,this.randomPositions&&u.default.initialize(3,2),this.prepareSlotsToRegister()}return a(e,[{key:"prepareSlotsToRegister",value:function(){var e=this;this.slotsToRegister.map(function(t,n){var r=e.preparePosition(t,n),o=new d.default(i({},t,{position:r,parentId:e.parentId}));window.nativeSlot=window.nativeSlot||[],window.nativeSlot[t.number]=o,e.store.slots.add(o)}),this.refreshListing&&this.refreshListing(this.registerSlots)}},{key:"registerSlot",value:function(e){e.shouldRegister&&e.register()}},{key:"unregisterSlot",value:function(e){e.unregister()}},{key:"updateSlot",value:function(e,t,n){var r=this;this.store.slots.list.map(function(o){o.number===e&&(o.update(t,n),r.registerSlot(o))})}},{key:"preparePosition",value:function(e,t){return this.randomPositions?u.default.getRandomizedPosition(t+1):e.position||null}},{key:"checkPosition",value:function(e){return function(t){return t.position===e}}},{key:"getSlotByPosition",value:function(e){return this.store.slots.list.find(this.checkPosition(e))||null}}]),e}();t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.hasArticleUnwantedTags=t.stripHTMLTags=t.getRenderVars=t.arrayMoveElement=t.getMainMedia=void 0;var i=n(174),a=n(364),s=n(63),u=r(s),l=function(e){return"ContentPartMainMedia"===e.type&&e.content&&e.content.subtype},c=function(e){return l(e)&&a.mainMediaVideoTypes.find(function(t){return t===e.content.subtype})},f=function(e){return l(e)&&a.mainMediaSocialTypes.find(function(t){return t===e.content.subtype})};t.getMainMedia=function(e){for(var t=[].concat(o(e)),n=null,r=0;!n&&r<t.length;)"ContentPartMainMedia"===t[r].type?n=t[r]:r++;return t.splice(r,1),{parsedElements:t,mainMedia:n}},t.arrayMoveElement=function(e,t,n){if(n>=e.length)for(var r=n-e.length+1;r--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e},t.getRenderVars=function(e,t){var n=t.hideSubjects,r=t.dynamic,o=r.IS_MOBILE,a=e.section,s=e.tags,u=e.authors,l=e.mainPhoto,d=e.published,p=e.subtype,h=e.sources,m="1"===p||!!e.elements.find(function(e){return c(e)}),v=!!e.elements.find(function(e){return f(e)}),y={width:null,height:null};l.width&&l.height&&(y.width=+l.width,y.height=+l.height);var g=o?640:644,b=1.7,A=Math.round(g/b);y.height&&(A=Math.min(A,Math.round(g*y.height/y.width)));var w=(0,i.getSectionTags)(a,s,n),_=w.sectionObj,E=w.tagsArr,T=!!_,x=E&&E.length>0,P=!!(u&&u.length&&u[0]),S=!!(h&&h.length&&h[0]),C=T||x||P||!!d||S,O=l.title;
return{isIntroBar:C,sectionObj:_,mainPhotoTitle:O,isArticleVideo:m,imgWidth:g,imgHeight:A,originalSize:y,isAuthor:P,isSource:S,isSection:T,isTag:x,tagsArr:E,isMainMediaSocial:v}},t.stripHTMLTags=function(e){return null!==e&&""!==e&&"undefined"!=typeof e&&(e=e.toString(),e.replace(/<[^>]*>/g,""))},t.hasArticleUnwantedTags=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=u.default.isEnabled("tagsValidation"),r=u.default.getConfig("tagsValidation"),o=r.dateFromWhichTagsAreValidated,i=void 0===o?0:o,a=r.unwantedTags,s=void 0===a?[]:a,l=i<t;if(n&&s.length&&l){var c=s,f=e.map(function(e){return e.name});return f.some(function(e){return c.includes(e)})}return!1}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=t.getStatsKey=t.scrollWindow=t.getTopPosition=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(51),f=r(c),d=(t.getTopPosition=function(e){return e&&Math.ceil(e.getBoundingClientRect().top+(0,f.default)())},t.scrollWindow=function(e){window.preventScrollEvent=!0,window.scrollTo(0,e),setTimeout(function(){delete window.preventScrollEvent},300)},t.getStatsKey=function(e){return e.statsKey||e.stArea||""},t.Observer=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.element=null,r.observer=null,r.onChange=function(e){var t=r.props.onChange;e&&e[0]&&t&&t(e[0].isIntersecting)},r.setRef=function(e){r.element=e},a=n,i(r,a)}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props.getRef;this.element&&(this.observer=new IntersectionObserver(this.onChange),this.observer.observe(this.element),e&&e(this.element))}},{key:"componentWillUnmount",value:function(){this.observer&&this.element&&this.observer.unobserve(this.element)}},{key:"render",value:function(){return l.default.createElement("div",{ref:this.setRef})}}]),t}(l.default.Component));d.propTypes={getRef:u.PropTypes.func,onChange:u.PropTypes.func.isRequired}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getSlidesAmount=function(e){var t=0;if(e&&e.data&&e.data.elements){var n=e.data.elements,r=n.find(function(e){return"ContentPartContainer"===e.type});t=r&&r.parsedContent&&r.parsedContent.length}return t+1}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Image=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),f=n(1119),d=r(f),p=n(1231),h=r(p),m=n(138),v=n(1229),y=r(v),g=t.Image=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={anchor:(0,d.default)((0,m.getSrc)(r.props))},a=n,i(r,a)}return a(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){(0,m.getSrc)(e)!==(0,m.getSrc)(this.props)&&this.setState({anchor:(0,d.default)((0,m.getSrc)(this.props))})}},{key:"shouldComponentUpdate",value:function(e){return(0,m.getSrc)(e)!==(0,m.getSrc)(this.props)||this.props.shouldBeLoaded!==e.shouldBeLoaded}},{key:"getAuthor",value:function(e){var t=e.content;return t.params&&t.params.source?t.params.source:""}},{key:"render",value:function(){var e=(0,m.getSrc)(this.props),t=this.getAuthor(this.props),n=this.props,r=n.content.title,o=void 0===r?null:r,i=n.isInSlide,a=n.mobile,u=(0,m.getOriginalSize)(this.props.content),l=this.props.index>2;if(""===e)return null;var f=this.props.displayMode,d=void 0===f?null:f,p=i&&!a?Math.min(Math.max(644*u.height/u.width,0),690)+"px":"auto";return c.default.createElement("div",{style:{minHeight:p}},o&&!i&&c.default.createElement(y.default,{title:o,mobile:a}),c.default.createElement(h.default,s({},this.props,{ssrLazy:l,src:e,author:t,anchor:this.state.anchor,title:o,originalSize:u,displayMode:d})))}}]),t}(l.Component);g.displayName="Image",g.propTypes={index:l.PropTypes.number,content:l.PropTypes.object},t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(4),s=n(8),u=n(236),l=r(u),c=n(1900),f=r(c),d=function(e){var t=e.isInSlide,n=e.slideHandler,r=e.direction;return t&&n&&n[r]&&n[r].handle?i.default.createElement("a",{className:f.default[r],href:n[r].href,onClick:(0,a.stLogger)("gallery-"+r,n[r].onClick),"data-st-area":"gallery-"+r,"data-slide-button":r},i.default.createElement(s.Icon,{data:l.default})):null};d.displayName="PhotoArrows",d.propTypes={isInSlide:o.PropTypes.bool,slideHandler:o.PropTypes.object,direction:o.PropTypes.string.isRequired},t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(2),u=r(s),l=n(202),c=r(l),f=n(139),d=r(f),p=n(76),h=r(p),m=n(159),v=r(m),y=n(593),g=r(y),b=n(9),A=function(e){var t=e.index,n=e.isMobile,r=e.isWithLead,i=e.isAccordion,s=void 0!==i&&i,l=e.listingMode,f=void 0!==l&&l,p=e.placeholders,m=e.setNativeRef,y=e.shouldDisplay,A=void 0===y||y,w=e.src,_=e.teaserConfig,E=e.text,T=e.typeWrap,x=e.url,P=e.privacyIcon,S=e.privacyLink,C={},O={};Object.keys(_.styles).forEach(function(e){C[h.default[e]]=!0,O["teaserTitle--"+e]=!0});var M=function(){if(A){var e;if(r){var i;return a.default.createElement(b.Link,{external:!0,title:E,to:x,className:h.default.link+" "+v.default.wrapWithLead+" "+(n?v.default.mobile:v.default.desktop)},a.default.createElement(g.default,{index:t,mainPhoto:{url:w},teaserConfig:_,isMobile:n,useIr:!1,placeholders:p}),a.default.createElement("div",{className:(0,u.default)(h.default.wrapTitle)},a.default.createElement("div",{className:(0,u.default)(h.default.title,{teaserBg:_.styles.isVertical})},a.default.createElement("div",{className:(0,u.default)(h.default.titleIn,v.default.titleIn)},a.default.createElement(c.default,{tagName:_.tagName,className:(0,u.default)(v.default.titleWithLead,O,(i={},o(i,h.default.noAuthor,!1),o(i,"teaserTitle--noAuthor",!1),o(i,"isMobile",n),o(i,"desktop",!n),i))},E)))),a.default.createElement("span",{className:h.default.advLabel+" "+v.default.advLabel},"REKLAMA"))}return a.default.createElement(b.Link,{external:!0,title:E,to:x,className:h.default.link},a.default.createElement(d.default,{index:t,mainPhoto:{url:w},teaserConfig:_,isMobile:n,useIr:!1,placeholders:p}),a.default.createElement("div",{className:(0,u.default)(h.default.wrapTitle)},a.default.createElement("div",{className:(0,u.default)(h.default.title,{teaserBg:_.styles.isVertical})},a.default.createElement("div",{className:h.default.titleIn},a.default.createElement(c.default,{tagName:_.tagName,className:(0,u.default)(h.default.titleTxt,O,(e={},o(e,h.default.noAuthor,!1),o(e,"teaserTitle--noAuthor",!1),o(e,"isMobile",n),o(e,"desktop",!n),e))},E)))),a.default.createElement("span",{className:h.default.advLabel},"REKLAMA"))}return a.default.createElement("div",null)},R=function(){return S&&P?a.default.createElement("a",{href:S,className:h.default.privacyLink,target:"_blank"},a.default.createElement("img",{src:P,className:h.default.privacyIcon,alt:"Privacy Icon"})):null},k=function(){var e;if(f){var t;return a.default.createElement("div",{className:(0,u.default)(h.default.listingMode,(t={},o(t,h.default.hidden,!A),o(t,h.default.desktop,!n),o(t,h.default.accordionMode,s),t)),ref:m,"data-native-adv":"true"},R(),M())}return a.default.createElement("div",{className:(0,u.default)(h.default.wrap,C,h.default[T],h.default.article,(e={},o(e,h.default.desktop,!n),o(e,h.default.hidden,!A),o(e,h.default.accordionMode,s),e)),ref:m,"data-native-adv":"true"},R(),M())},I=function(){return k()},L=function(){return I()};return L()};A.displayName="TeaserAdv",A.propTypes={placeholders:i.PropTypes.object.isRequired,isMobile:i.PropTypes.bool,index:i.PropTypes.number.isRequired,teaserConfig:i.PropTypes.object.isRequired,src:i.PropTypes.string.isRequired,text:i.PropTypes.string.isRequired,typeWrap:i.PropTypes.string,url:i.PropTypes.string.isRequired,setRef:i.PropTypes.func},t.default=A,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(2),s=r(a),u=n(76),l=r(u),c=function(e){var t=e.elementsAmount;return i.default.createElement("div",{className:(0,s.default)("teaserMark",l.default.teaserMark,l.default.teaserMarkInFigure,l.default.teaserMarkRanking)},i.default.createElement("div",{className:l.default.teaserMarkTxt},"TOP",i.default.createElement("b",null,t)))};c.displayName="IconRanking",c.propTypes={elementsAmount:o.PropTypes.number},c.defaultProps={elementsAmount:10},t.default=c,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return{tagName:"",styles:{}}},r={};r.glonews=function(e){var t=n();return t.styles.isGlonews=!0,0===e?t.styles.isBig=!0:2===e?t.styles.isVertical=!0:(t.styles.isLeft=!0,1===e&&(t.styles.isLeftTop=!0),3===e&&(t.styles.isLeftBottom=!0)),t},r.popular=function(){var e=n();return e.styles.isPopular=!0,e},r.lastSlide=function(e,t){var r=n();return t?r.styles.isLastSlide=!0:0===e?r.styles.isLastSlideBig=!0:r.styles.isSmall=!0,r},r.smallLastSlide=function(e,t){var r=n();return t?r.styles.isLastSlide=!0:r.styles.isSmall=!0,r},r.chosenForYou=function(e,t){var r=n();return t?r.styles.isSmall=!0:r.styles.isChosenForYou=!0,r},r.cockroach=function(e,t){var r=n();return t?r.styles.isSmall=!0:r.styles.isCockroach=!0,r.tagName="span",r},r.cockroachSmall=function(e,t){var r=n();return t?r.styles.isSmall=!0:r.styles.isPopular=!0,r.tagName="span",r},r.mostPopular=function(){var e=n();return e.styles.isMostPopular=!0,e},r.default=function(e){var t=n();return e%5?t.styles.isSmall=!0:t.styles.isBig=!0,t};var o=function(e,t,n){return"function"==typeof r[e]?r[e](t,n):r.default(t,n)};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n(1),d=r(f),p=n(2),h=r(p),m=n(565),v=n(70),y=n(263),g=r(y),b=n(1924),A=r(b),w=n(1343),_=r(w),E=void 0,T=void 0,x=void 0,P=!1,S=!0,C=327,O=78,M=function(e){return(e+"?").split("?")[1].split("&").reduce(function(e,t){return function(t,n){return t?c({},e,s({},t,n)):e}.apply(void 0,u((t+"=").split("=").map(decodeURIComponent)))},{})},R=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.checkAutoplay=function(e){return n.props.playerAutoplay||"1"===e||"true"===e||e===!0},n.checkForceSound=function(){return!(!n.isVideoPage&&!n.props.isArticleVideo)},n.setPlayerMounted=function(e){window.pakoMountedIds||(window.pakoMountedIds={}),window.pakoMountedIds[n.id]=e},n.isPlayerMounted=function(){return window.pakoMountedIds&&window.pakoMountedIds[n.id]},n.checkResize=function(){clearTimeout(T),T=setTimeout(n.resizeEnd,1e3)},n.resizeEnd=function(){if(!P){var e=new Event("resize-end");window.dispatchEvent(e),P=!0}},n.doneResizing=function(){var e=E.getBoundingClientRect().left-C,t={left:e,top:O};n.player&&n.player.openFloatingPlayer&&n.player.openFloatingPlayer(t),clearTimeout(x),x=setTimeout(function(){P=!1},1e3)},n.receiveMessage=function(e){e.data&&e.data.creation&&"scrollBillboard"===e.data.creation&&(e.data&&e.data.floating&&e.data.floating===!0?n.player.deactivateFloating():n.player.activateFloating())},n.renderXNews=function(e,t,r){var o='<div style="position:absolute;top:0;width:100%;height:100%;"><script class="XlinkEmbedScript" data-width="100%" data-height="100%" data-url="'+e+'" type="application/javascript" src="//prodxnews1blob.blob.core.windows.net/cdn/js/xlink-i.js?v1"></script><div>',i=document.createRange().createContextualFragment(o),a=document.getElementById((0,m.getVideoTarget)(n.id));a.style.paddingTop=r/t*100+"%",a.appendChild(i)},n.player=null,n.id=n.props.content.params&&n.props.content.params.mid?n.props.content.params.mid+"-"+n.props.index:n.props.content.params.id,n.isVideoPage="editorial"===n.props.playerMediaEmbed,n}return a(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this.checkAutoplay(this.props.content.params.autoplay),t=this.props.playerMediaEmbed||this.props.content.params.mediaEmbed,n=this.props.index&&this.props.index>5?"btf":"atf";this.context.store.dispatch((0,v.setVhbConfig)("#"+(0,m.getVideoTarget)(this.id),n,e,t,this.checkForceSound()))}},{key:"componentDidMount",value:function(){var e=this;E=document.querySelector("article"),this.props.content.videoParams&&"XNEWS"===this.props.content.videoParams.type?this.renderXNews(this.props.content.url,this.props.content.videoParams.width||16,this.props.content.videoParams.height||9):window.WP.push(function(){return e.initPlayer()}),!this.props.isMobile&&S&&(window.addEventListener("resize",this.checkResize),window.addEventListener("resize-end",this.doneResizing),window.addEventListener("message",this.receiveMessage))}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.context.store.dispatch((0,v.clearVhbConfig)()),this.player&&("function"==typeof this.player.destroy&&this.player.destroy(),this.player=null,WP.gaf.removeEnv("hasVideo"));var e=this.isPlayerMounted();e&&("function"==typeof e.destroy&&e.destroy(),e=null,this.setPlayerMounted(e),WP.gaf.removeEnv("hasVideo"),!this.props.isMobile&&S&&(window.removeEventListener("resize",this.checkResize),window.removeEventListener("resize-end",this.doneResizing),window.removeEventListener("message",this.receiveMessage),clearTimeout(T),clearTimeout(x)))}},{key:"initPlayer",value:function(){var e=this,t=this.props.playerMediaEmbed,n=void 0===t?"":t,r=this.props.content.params;if(r){var o=r.video_url,i=r.autoplay,a=r.mediaEmbed,s=this.props.content.params.mid,u=E.getBoundingClientRect().left-C,l=this.props.index&&this.props.index>5?"btf":"atf",c=o||"https://get.wp.tv/?mid="+s,f=M(document.URL);f.wptv&&(f.mid&&(c="https://wideo.wp.pl/?mid="+f.mid),f.lid&&(c="https://wideo.wp.pl/?lid="+f.lid));var d={target:"#"+(0,m.getVideoTarget)(this.id),autoplay:this.checkAutoplay(i),mediaEmbed:n||a,fold:l,pako:this.isVideoPage,url:c,forcesound:!(!this.isVideoPage&&!this.props.isArticleVideo),extendedrelated:this.isVideoPage&&!this.props.isMobile,floatingplayer:S,floatingplayerposition:{left:u,top:O}};window.WP.push(function(){e.player=WP.player(d),e.setPlayerMounted(e.player),WP.gaf.addEnv("hasVideo",1)})}}},{key:"render",value:function(){var e,t=this.props,n=t.isInSlide,r=t.slideHandler,o=t.inCollection,i=(t.isPremium,t.isMobile),a=t.isMobileFullWidth,u=t.content,l=t.isArticleVideo,c=u.title,f=u.videoParams&&"XNEWS"===u.videoParams.type;return d.default.createElement("div",{className:(0,h.default)(A.default.wrap,(e={},s(e,A.default.desktop,!i),s(e,A.default.isInSlide,n),s(e,A.default.isOnePageGallery,this.props.isOnePageGallery),s(e,A.default.inCollection,o),s(e,A.default.isMobileFullWidth,a),s(e,A.default.videoBackgroundColor,c),s(e,A.default.isArticleVideo,l),s(e,A.default.isXnews,f),e))},c&&d.default.createElement("h2",{className:A.default.title,dangerouslySetInnerHTML:{__html:c}}),d.default.createElement("div",{id:(0,m.getVideoTarget)(this.id)}),d.default.createElement(g.default,{isInSlide:n,slideHandler:r,direction:"prev"}),d.default.createElement(g.default,{isInSlide:n,slideHandler:r,direction:"next"}))}}]),t}(d.default.Component);R.contextTypes={store:d.default.PropTypes.object.isRequired},R.displayName="Video",R.propTypes={playerMediaEmbed:f.PropTypes.string,playerAutoplay:d.default.PropTypes.bool,content:f.PropTypes.object,isInSlide:d.default.PropTypes.bool,isOnePageGallery:d.default.PropTypes.bool,slideHandler:d.default.PropTypes.object,inCollection:d.default.PropTypes.bool,isMobile:d.default.PropTypes.bool,isMobileFullWidth:d.default.PropTypes.bool,isPremium:d.default.PropTypes.bool,isArticleVideo:d.default.PropTypes.bool},R.defaultProps={inCollection:!1},t.default=(0,_.default)(R),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(600),i=r(o),a=n(379),s=r(a),u=n(4),l=(0,u.withConfig)((0,i.default)(s.default));t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchQuizzes=t.fetchQuiz=t.finishQuiz=t.setAnswer=t.fetchStatus=t.cleanQuizStatus=t.names=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(18),u=n(1387),l=n(1398),c=n(96),f=n(609),d=n(42),p=r(d),h=n(230),m=r(h),v=n(2184),y=r(v),g=n(232),b=r(g),A=n(70),w=n(61),_=n(380),E=t.names={QUIZZES_CLEAN_QUIZ_STATUS:"QUIZZES_CLEAN_QUIZ_STATUS",QUIZZES_SET_ANSWER:"QUIZZES_SET_ANSWER",QUIZZES_FETCH_STATUS_SUCCESS:"QUIZZES_FETCH_STATUS_SUCCESS",QUIZZES_FINISH_QUIZ:"QUIZZES_FINISH_QUIZ"},T=(0,s.createAction)(E.QUIZZES_FETCH_STATUS_SUCCESS),x=function(e,t){return e.quizzesStatus[t]&&e.quizzesStatus[t].hasOwnProperty("status")},P=function(e){return Object.keys(Object.values(e.questions).filter(function(e){return!e.hasOwnProperty("data_quiz_id")})).length},S=function(e,t){var n=e.content&&e.content.items&&e.content.items[t];return n&&n.data&&!!n.data.complete},C=function(){var e=i(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),e.abrupt("return",a({},r.content.items[n],{sources:r.sources,authors:r.authors,tags:r.tags}));case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),O=function(e){return!!(e.quizzes&&e.quizzes.quizzes&&e.quizzes.quizzes.edges)},M=function(e){var t=e.match(/[^\/.]*(?=-([0-9])+[a-z])/g);return t?t[0]:""},R=function(e,t){var n=!!e&&e.filter(function(e){return e.productId===t});return n?n[0].url:""},k=function(e){return{city:e.city,result:""+e.result,resolveTime:""+e.resolveTime}},I=function(e){return e.map(function(e){return k(e)})},L=function(e){var t=a({},e,{answerId:e.id}),n=e.flagAnswer;if(n){var r=n.name,i=n.value;t.flag_answer=o({},r,i)}return t},N=function(e){return e.reduce(function(e,t){return e[t.id]=L(t),e},{})},j=function(e){return a({},e,{questionId:e.id,answers:N(e.answers)})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,t){return e[t.id]=j(t),e},{})},F=function(e,t){var n=e.productURLs?R(e.productURLs,t):e.productUrl,r=e.slug?e.slug:M(n),o=Array.isArray(e.questions),i=o?D(e.questions):[],s=o?e.questions.length:e.questions;return a({},e,{id:e.id,type:"quiz",canonical:n,productUrl:n,title:e.title,mainPhoto:e.mainPhoto,tags:e.tags,quizType:e.type,questions:i,questionsCount:s,latestResults:e.latestResults?I(e.latestResults):[],slug:r})},U=function(e,t){var n=t.content.items;return Object.keys(e).reduce(function(t,r){return n.hasOwnProperty(r)?t:a({},t,o({},r,e[r]))},{})},B=function(e,t,n){var r=e.teasers&&e.teasers.lists&&e.teasers.lists[t],o=r?Object.keys(r).length:0;return!!r&&o>=n},z=function(e){return e.reduce(function(e,t){return e[t.quizId]=a({},t,{progress:t.progress.map(function(e){return{questionId:e.questionId,answerId:e.answerId}})}),e},{})},H=function(e,t){return(0,m.default)(e,function(e,n){if(e.progress&&e.progress.length>0){var r=t[n]&&t[n].data.questions&&P(t[n].data)||!1;if(!r)return;var o=(0,y.default)(Object.keys(e.progress).length),i=Object.keys(e.progress).map(function(e){return+e}),s=(0,b.default)(o,i);s&&i.length<=r?((0,m.default)(e.progress,function(e){e.value=(0,f.getQuestionResult)(a({quiz:t[n].data},e))}),i.length===r?(e.status=c.QUIZ_STATUS.FINISHED,e.score=(0,f.getQuizResult)({quiz:t[n].data,progress:e.progress})):e.status=c.QUIZ_STATUS.STARTED):(delete e.progress,e.status=c.QUIZ_STATUS.FINISHED)}else e.status=c.QUIZ_STATUS.CLEAN}),e};t.cleanQuizStatus=function(e){var t=e.quizId,n=e.statId;return function(){var e=i(regeneratorRuntime.mark(function e(r,o){var i,a,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r((0,s.createAction)(E.QUIZZES_CLEAN_QUIZ_STATUS)({quizId:t})),i=(0,l.getUserData)(n),a=i.userId,e.prev=2,e.next=5,(0,u.clearQuizStatus)({id:t,userId:a});case 5:c=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),{quizId:t,user:a,message:e.t0.message,status:e.t0.status};case 11:case"end":return e.stop()}},e,void 0,[[2,8]])}));return function(t,n){return e.apply(this,arguments)}}()},t.fetchStatus=function(e){var t=e.productId,n=e.quizId,r=e.statId;return function(){var e=i(regeneratorRuntime.mark(function e(o,i){var a,s,c,f,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i(),s=(0,p.default)(n)?n:[n],s=s.filter(function(e){return!x(a,e)}),s.length){e.next=5;break}return e.abrupt("return");case 5:return c=(0,l.getUserData)(r),f=c.userId,e.prev=6,e.next=9,(0,u.getProgress)({productId:t,userId:f,ids:s});case 9:d=e.sent,h=d&&d.quizzes&&d.quizzes.quizzesProgress&&z(d.quizzes.quizzesProgress)||{},o(T({quizzesStatus:H(h,i().content.items)})),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(6),{quizId:n,user:f,message:e.t0.message,status:e.t0.status};case 17:case"end":return e.stop()}},e,void 0,[[6,14]])}));return function(t,n){return e.apply(this,arguments)}}()},t.setAnswer=function(e){var t=e.quizId,n=e.questionId,r=e.answerId,o=e.statId,a=e.productId;return function(){var e=i(regeneratorRuntime.mark(function e(i,f){var d,p,h,m,v,y,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i((0,s.createAction)(E.QUIZZES_SET_ANSWER)({quizId:t,questionId:n,answerId:r,quiz:f().content.items[t].data})),d=f().content.items[t]&&f().content.items[t].data,d&&d.quizType===c.QUIZ_TYPE.HOT_OR_NOT&&(d.questions[n].answers[r].votes+=1),p=d.questions[n],h=p.hasOwnProperty("data_quiz_id")?p.data_quiz_id:null,m=p.hasOwnProperty("data_tag_id")?p.data_tag_id:null,v=(0,l.getUserData)(o),y=v.city,g=v.userId,e.prev=7,e.next=10,(0,u.answerQuiz)({quizId:t,productId:a,questionId:n,answerId:r,userId:g,cityId:y,dataQuizId:h,dataTagId:m});case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(7),{quizId:t,questionId:n,answerId:r,message:e.t0.message,status:e.t0.status};case 15:case"end":return e.stop()}},e,void 0,[[7,12]])}));return function(t,n){return e.apply(this,arguments)}}()},t.finishQuiz=function(e){var t=e.quizId;return function(e,n){e((0,s.createAction)(E.QUIZZES_FINISH_QUIZ)({quizId:t,quiz:n().content.items[t].data}))}},t.fetchQuiz=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=i(regeneratorRuntime.mark(function t(n,r){var o,i,s,l,c,f,d,p,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.id,i=e.productId,s=e.userId,l=r(),c=S(l,o),!c){t.next=8;break}return n((0,A.setActive)({id:o})),t.next=7,C(r,o);case 7:return t.abrupt("return",t.sent);case 8:return t.prev=8,n((0,A.fetchRequest)({id:o,silent:!1})),t.next=12,(0,u.getQuiz)({id:o,productId:i,userId:s});case 12:return f=t.sent,d=f.quizzes.quiz,p=F(d),h=(0,_.normalizeMaterial)({data:a({},p,{complete:!0})}),n((0,A.fetchSuccess)(a({id:o},h))),t.next=19,C(r,o);case 19:return t.abrupt("return",t.sent);case 22:t.prev=22,t.t0=t.catch(8),console.error("[action/fetchQuiz]: "+o,t.t0.message);case 25:case"end":return t.stop()}},t,void 0,[[8,22]])}));return function(e,n){return t.apply(this,arguments)}}()},t.fetchQuizzes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=i(regeneratorRuntime.mark(function t(n,r){var o,i,s,l,c,f,d,p,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.sort,i=e.limit,s=r(),l="quizzes",c=l+"/"+o,!B(s,c,i)){t.next=6;break}return t.abrupt("return");case 6:return t.prev=6,n((0,w.fetchRequest)({key:c})),t.next=10,(0,u.getQuizzes)(e);case 10:f=t.sent,O(f)&&(d=f.quizzes.quizzes.edges.map(function(t){return F(t.node,e.productId)}),p=(0,_.normalizeMaterials)({key:c,items:d}),h=U(p.materials,s),n((0,w.fetchSuccess)(a({},p,{materials:h})))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),console.error("[action/fetchQuizzes]: "+o,t.t0.message);case 17:case"end":return t.stop()}},t,void 0,[[6,14]])}));return function(e,n){return t.apply(this,arguments)}}()}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchShares=t.loadFb=t.getSharesFailure=t.getSharesSuccess=t.getSharesRequest=t.loadFbFailure=t.loadFbSuccess=t.loadFbRequest=t.names=void 0;var o=n(18),i=n(1399),a=t.names={REACTIONS_LOAD_FB_REQUEST:"REACTIONS_LOAD_FB_REQUEST",REACTIONS_LOAD_FB_SUCCESS:"REACTIONS_LOAD_FB_SUCCESS",REACTIONS_LOAD_FB_FAILURE:"REACTIONS_LOAD_FB_FAILURE",REACTIONS_GET_SHARES_REQUEST:"REACTIONS_GET_SHARES_REQUEST",REACTIONS_GET_SHARES_SUCCESS:"REACTIONS_GET_SHARES_SUCCESS",REACTIONS_GET_SHARES_FAILURE:"REACTIONS_GET_SHARES_FAILURE"},s=t.loadFbRequest=(0,o.createAction)(a.REACTIONS_LOAD_FB_REQUEST),u=t.loadFbSuccess=(0,o.createAction)(a.REACTIONS_LOAD_FB_SUCCESS),l=t.loadFbFailure=(0,o.createAction)(a.REACTIONS_LOAD_FB_FAILURE),c=t.getSharesRequest=(0,o.createAction)(a.REACTIONS_GET_SHARES_REQUEST),f=t.getSharesSuccess=(0,o.createAction)(a.REACTIONS_GET_SHARES_SUCCESS),d=t.getSharesFailure=(0,o.createAction)(a.REACTIONS_GET_SHARES_FAILURE),p=function(e){return!e.reactions.fb.loaded&&!e.reactions.fb.loading},h=function(e,t){return!!e.reactions.fb.shares[t]},m=(t.loadFb=function(e){return function(){var t=r(regeneratorRuntime.mark(function t(n,r){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return n(l({})),t.abrupt("return");case 3:if(o=r(),!p(o)){t.next=15;break}return n(s({})),t.prev=6,t.next=9,(0,i.load)(e);case 9:n(u({})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),n(l({}));case 15:case"end":return t.stop()}},t,void 0,[[6,12]])}));return function(e,n){return t.apply(this,arguments)}}()},{}),v=void 0,y=function(){var e=r(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object.keys(m),m={},0!==n.length){e.next=4;break}return e.abrupt("return");case 4:return t(c({urls:n})),e.prev=5,e.next=8,(0,i.getShares)(n);case 8:r=e.sent,t(f({urls:n,data:r})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(d({urls:n}));case 15:case"end":return e.stop()}},e,void 0,[[5,12]])}));return function(t){return e.apply(this,arguments)}}();t.fetchShares=function(e){return function(){var t=r(regeneratorRuntime.mark(function t(n,r){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r(),!h(o,e)){t.next=3;break}return t.abrupt("return");case 3:clearTimeout(v),m[e]=!0,v=setTimeout(function(){return y(n)},100);case 6:case"end":return t.stop()}},t,void 0)}));return function(e,n){return t.apply(this,arguments)}}()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.FbShare=t.FbSharePlain=void 0;var i=n(1),a=r(i),s=n(8),u=n(2),l=r(u),c=n(1950),f=r(c),d=n(272),p=n(2250),h=r(p),m=n(2249),v=r(m),y=t.FbSharePlain=function(e){var t,n=e.style,r=e.shares,i=e.onShare,u=e.mobile,c="gray"===n?0:r,d=c>0?c:"Podziel się";return u||"article-bottom"!==n||(d="Podziel się na Facebooku"),"article-bottom"===n?a.default.createElement("div",{onClick:i,className:f.default.facebookIcon},a.default.createElement(s.Icon,{data:h.default,height:16,width:16})):a.default.createElement("div",{onClick:i,className:(0,l.default)(f.default.wrap,f.default[n],(t={},o(t,f.default.desktop,!u),o(t,f.default.zero,!c),t))},a.default.createElement("div",{className:f.default.wrapIn},a.default.createElement("div",{className:f.default.icon},a.default.createElement(s.Icon,{data:v.default})),a.default.createElement("strong",{
className:f.default.amount},d)))};y.displayName="FbShare",y.propTypes={style:i.PropTypes.string,shares:i.PropTypes.number.isRequired,onShare:i.PropTypes.func.isRequired};t.FbShare=(0,d.FbWrapper)(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FbWrapper=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(30),p=n(5),h=n(19),m=n(270),v=n(1437),y=function(e,t){return{fb:e.reactions.fb,content:e.content.items[t.id||e.content.active]}},g=function(e){var t,n;return n=t=function(t){function n(){var e,t,r,s,u=this;i(this,n);for(var l=arguments.length,c=Array(l),f=0;f<l;f++)c[f]=arguments[f];return t=r=a(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(c))),r.fbLoader=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.context.config.FACEBOOK_CONFIG.APP_ID,e.prev=1,e.next=4,r.context.store.dispatch((0,m.loadFb)(t));case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,u,[[1,7]])})),r.share=o(regeneratorRuntime.mark(function e(){var t,n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.props.fb.loaded,e.t0){e.next=5;break}return e.next=4,r.fbLoader();case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=10;break}t=r.getData(),FB.ui(t),e.next=11;break;case 10:(0,v.facebook)({link:r.getData(!0,!1)});case 11:if(n={eventAction:"share",eventLabel:"Facebook"},o=d.ga360Params.customAction("socialShare",n),i=o.getData("customAction"),o.customActionEvent(i),"photo"!==r.props.position){e.next=18;break}return WP.stat.wave("FbShare:Photo"),e.abrupt("return");case 18:WP.stat.wave("FbShare",{dot:{position:r.props.position}}),(0,d.statWaveEvent)({eventName:"FbShareNew"});case 20:case"end":return e.stop()}},e,u)})),r.send=o(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.getData(!0,!1),e.t0=r.props.fb.loaded,e.t0){e.next=6;break}return e.next=5,r.fbLoader();case 5:e.t0=e.sent;case 6:if(!e.t0){e.next=11;break}n={method:"send",link:t},FB.ui(n),e.next=12;break;case 11:(0,v.facebook)({link:t});case 12:WP.stat.wave("FbSend"),(0,d.statWaveEvent)({eventName:"MessengerShare"});case 14:case"end":return e.stop()}},e,u)})),r.getSendUrl=function(){var e=r.getData(!0,!1),t=r.context.config.FACEBOOK_CONFIG.APP_ID;return"fb-messenger://share?link="+encodeURIComponent(e)+"&app_id="+encodeURIComponent(t)},r.getShares=function(){var e=r.props.fb,t=r.getData(!0);return e.shares[t]?Number(e.shares[t].count):0},r.getData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=r.props,o=n.data,i=n.content,a=n.fromStore;if(!(o||i&&i.data||a))return null;if(h.content&&h.content.data)return e?r.getUrl(o,h.content.data,t):r.formatData(o,h.content.data,t);var s=a?r.getDataFromStore():{};return e?r.getUrl(o,s,t):r.formatData(o,s,t)},s=t,a(r,s)}return s(n,t),l(n,[{key:"componentDidMount",value:function(){this.fbLoader();var e=this.getData(!0);this.context.store.dispatch((0,m.fetchShares)(e))}},{key:"componentDidUpdate",value:function(){}},{key:"getDataFromStore",value:function(){var e=this.props.content;return e&&e.data?e.data:{}}},{key:"formatData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.context.config.fbShareCaption;return{method:"feed",link:this.getUrl(e,t,n),caption:e.caption||r,name:e.name||t.title,picture:e.picture||(t.mainPhoto?t.mainPhoto.url:null)}}},{key:"getUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.context.config.BASE_URL,o=e.link||(t.type?r+(0,h.content)(t):null);return o||"undefined"==typeof window||(o=window.location.href),n&&e.anchor&&(o=o+"#"+e.anchor),o}},{key:"render",value:function(){var t=this.getShares();return f.default.createElement(e,u({mobile:this.context.mobile},this.props,{onSend:this.send,getSendUrl:this.getSendUrl,onShare:this.share,shares:t,fbLoaded:this.props.fb.loaded}))}}]),n}(c.Component),t.contextTypes={store:c.PropTypes.object.isRequired,config:c.PropTypes.object.isRequired,mobile:c.PropTypes.bool.isRequired},t.propTypes={data:c.PropTypes.object,content:c.PropTypes.object,position:c.PropTypes.string,fromStore:c.PropTypes.bool,fb:c.PropTypes.object.isRequired},t.defaultProps={fromStore:!0},n};t.FbWrapper=function(e){return(0,p.connect)(y)(g(e))}},function(e,t,n){var r=n(75),o=n(34),i=n(150);e.exports=function(e){return function(t,n,a){var s,u=r(t),l=o(u.length),c=i(a,l);if(e&&n!=n){for(;l>c;)if(s=u[c++],s!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){"use strict";var r=n(14),o=n(3),i=n(65),a=n(148),s=n(126),u=n(143),l=n(142),c=n(22),f=n(20),d=n(278),p=n(181),h=n(393);e.exports=function(e,t,n,m,v,y){var g=r[e],b=g,A=v?"set":"add",w=b&&b.prototype,_={},E=function(e){var t=w[e];i(w,e,"delete"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(y||w.forEach&&!f(function(){(new b).entries().next()}))){var T=new b,x=T[A](y?{}:-0,1)!=T,P=f(function(){T.has(1)}),S=d(function(e){new b(e)}),C=!y&&f(function(){for(var e=new b,t=5;t--;)e[A](t,t);return!e.has(-0)});S||(b=t(function(t,n){l(t,b,e);var r=h(new g,t,b);return void 0!=n&&u(n,v,r[A],r),r}),b.prototype=w,w.constructor=b),(P||C)&&(E("delete"),E("has"),v&&E("get")),(C||x)&&E(A),y&&w.clear&&delete w.clear}else b=m.getConstructor(t,e,v,A),a(b.prototype,n),s.NEED=!0;return p(b,e),_[e]=b,o(o.G+o.W+o.F*(b!=g),_),y||m.setStrong(b,e,v),b}},function(e,t,n){"use strict";n(658);var r=n(65),o=n(64),i=n(20),a=n(98),s=n(33),u=n(401),l=s("species"),c=!i(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var d=s(e),p=!i(function(){var t={};return t[d]=function(){return 7},7!=""[e](t)}),h=p?!i(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[l]=function(){return n}),n[d](""),!t}):void 0;if(!p||!h||"replace"===e&&!c||"split"===e&&!f){var m=/./[d],v=n(a,d,""[e],function(e,t,n,r,o){return t.exec===u?p&&!o?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),y=v[0],g=v[1];r(String.prototype,e,y),o(RegExp.prototype,d,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},function(e,t,n){var r=n(84);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(22),o=n(84),i=n(33)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(33)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){"use strict";e.exports=n(125)||!n(20)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(14)[e]})},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var r=n(179),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){"use strict";var r=n(3),o=n(57),i=n(86),a=n(143);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return o(this),t=void 0!==u,t&&o(u),void 0==e?new this:(n=[],t?(r=0,s=i(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){var r=n(88),o=n(98);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):(i-55296<<10)+(a-56320)+65536)}}},function(e,t,n){for(var r,o=n(14),i=n(64),a=n(151),s=a("typed_array"),u=a("view"),l=!(!o.ArrayBuffer||!o.DataView),c=l,f=0,d=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<d;)(r=o[p[f++]])?(i(r.prototype,s,!0),i(r.prototype,u,!0)):c=!1;e.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:u}},function(e,t,n){var r=n(14),o=r.navigator;e.exports=o&&o.userAgent||""},function(e,t,n){function r(e,t){var n=o(e),r=Number(t),a=n.getMonth()+r,s=new Date(0);s.setFullYear(n.getFullYear(),a,1),s.setHours(0,0,0,0);var u=i(s);return n.setMonth(a,Math.min(u,n.getDate())),n}var o=n(6),i=n(417);e.exports=r},function(e,t,n){function r(e,t){var n=o(e),r=o(t),s=n.getTime()-n.getTimezoneOffset()*i,u=r.getTime()-r.getTimezoneOffset()*i;return Math.round((s-u)/a)}var o=n(154),i=6e4,a=864e5;e.exports=r},function(e,t,n){function r(e,t){var n=o(e),r=o(t);return n.getTime()-r.getTime()}var o=n(6);e.exports=r},function(e,t,n){function r(e,t){var n=t?Number(t.weekStartsOn)||0:0,r=o(e),i=r.getDay(),a=(i<n?7:0)+i-n;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}var o=n(6);e.exports=r},function(e,t){"use strict";function n(e){console&&console.warn&&console.warn(e)}function r(){r.init.call(this)}function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function i(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function a(e,t,r,a){var s,u,l;if(o(r),u=e._events,void 0===u?(u=e._events=Object.create(null),e._eventsCount=0):(void 0!==u.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),u=e._events),l=u[t]),void 0===l)l=u[t]=r,++e._eventsCount;else if("function"==typeof l?l=u[t]=a?[r,l]:[l,r]:a?l.unshift(r):l.push(r),s=i(e),s>0&&l.length>s&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,n(c)}return e}function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=s.bind(r);return o.listener=n,r.wrapFn=o,o}function l(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?p(o):f(o,o.length)}function c(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function d(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function p(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function h(e,t){return new Promise(function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}v(e,t,i,{once:!0}),"error"!==t&&m(e,o,{once:!0})})}function m(e,t,n){"function"==typeof e.on&&v(e,"error",t,n)}function v(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function o(i){r.once&&e.removeEventListener(t,o),n(i)})}}var y,g="object"==typeof Reflect?Reflect:null,b=g&&"function"==typeof g.apply?g.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};y=g&&"function"==typeof g.ownKeys?g.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var A=Number.isNaN||function(e){return e!==e};e.exports=r,e.exports.once=h,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var w=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(e){if("number"!=typeof e||e<0||A(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");w=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||A(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return i(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var s=o[e];if(void 0===s)return!1;if("function"==typeof s)b(s,this,t);else for(var u=s.length,l=f(s,u),n=0;n<u;++n)b(l[n],this,t);return!0},r.prototype.addListener=function(e,t){return a(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return a(this,e,t,!0)},r.prototype.once=function(e,t){return o(t),this.on(e,u(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,u(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,i,a,s;if(o(t),r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():d(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)o=i[r],"removeListener"!==o&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return l(this,e,!0)},r.prototype.rawListeners=function(e){return l(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):c.call(e,t)},r.prototype.listenerCount=c,r.prototype.eventNames=function(){return this._eventsCount>0?y(this._events):[]}},function(e,t){e.exports={reservedSpaceForRightPopular:"i-oM4ssg",desktopNext:"i1jIbOo6",desktop:"iEanFVXt",asideLeft:"i3s-mP2l",sideCenter:"i1t26d10",article:"iuj14Idc",sideCenterHolder:"i3pfaOcG",asideRight:"i2TqTFZv",rightSlotWrapper:"iFVs88n5",rightSlotHolder:"i2ou3Gvs",short:"i36JpBHW",contentRight:"i1g91tuw",contentRightItem:"iHaZqusI",container:"i3LyVlmZ",blurred:"i29oQPO4"}},function(e,t){e.exports={wrap:"iOf50qDO",expandBtn:"i33xH17l",expandWrapBtn:"iwn6fJ8H",wrapExpanded:"i8DhqLIp",isInSlide:"i1YnIrs5",placeholder:"i30WuhEL",wrapIn:"i2dBACuB",center:"i3prd-A6",desktop:"i22APDV5",isOnePageGallery:"iC2iFILe",fb_iframe_widget:"i3s9Lrgq",fbWidget:"iMEzbl80",ttWidget:"i15Ta6u8",ttWidgetMobile:"i2tbPf8V","fb-video":"i2vvu8g8"}},function(e,t){"use strict";function n(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function r(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}function o(){return window.location.href.split("#")[1]||""}function i(e){window.location.replace(window.location.pathname+window.location.search+"#"+e)}function a(){return window.location.pathname+window.location.search+window.location.hash}function s(e){e&&window.history.go(e)}function u(e,t){t(window.confirm(e))}function l(){var e=navigator.userAgent;return(e.indexOf("Android 2.")===-1&&e.indexOf("Android 4.0")===-1||e.indexOf("Mobile Safari")===-1||e.indexOf("Chrome")!==-1||e.indexOf("Windows Phone")!==-1)&&(window.history&&"pushState"in window.history)}function c(){var e=navigator.userAgent;return e.indexOf("Firefox")===-1}t.__esModule=!0,t.addEventListener=n,t.removeEventListener=r,t.getHashPath=o,t.replaceHashPath=i,t.getWindowPath=a,t.go=s,t.getUserConfirmation=u,t.supportsHistory=l,t.supportsGoWithoutReloadUsingHash=c},,,,,function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(2133),i=n(2134),a=n(2135),s=n(2136),u=n(2137);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(229);e.exports=r},function(e,t,n){var r=n(2071),o=n(2108),i=o(r);e.exports=i},function(e,t,n){function r(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(2131);e.exports=r},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t,n){var r=n(166),o=r(Object,"create");e.exports=o},function(e,t,n){function r(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=n(234),i=1/0;e.exports=r},function(e,t,n){(function(e){var r=n(104),o=n(2188),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?r.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||o;e.exports=c}).call(t,n(131)(e))},function(e,t,n){var r=n(2080),o=n(2097),i=n(2147),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},function(e,t,n){function r(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(776);e.exports=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.childNodes=[]}return Object.defineProperty(e.prototype,"innerText",{get:function(){return this.rawText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.rawText},set:function(e){this.rawText=e},enumerable:!1,configurable:!0}),e}();t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"}(n||(n={})),t.default=n},function(e,t){e.exports='<?xml version="1.0" encoding="utf-8"?>\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 34.1 34.6" xml:space="preserve">\n\t<path d="M4.3,1.5l28.3,28.3l-2.8,2.8L1.5,4.3L4.3,1.5z M1.5,30.3L29.8,2l2.8,2.8L4.3,33.1 L1.5,30.3z"/>\n</svg>\n'},function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=p++,f[e[m]]={}),f[e[m]]}var o,i=n(26),a=n(461),s=n(2300),u=n(815),l=n(820),c=n(473),f={},d=!1,p=0,h={topAbort:"abort",topAnimationEnd:l("animationend")||"animationend",topAnimationIteration:l("animationiteration")||"animationiteration",topAnimationStart:l("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:l("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),v=i({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,o=r(n),i=a.registrationNameDependencies[e],s=0;s<i.length;s++){var u=i[s];o.hasOwnProperty(u)&&o[u]||("topWheel"===u?c("wheel")?v.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):c("mousewheel")?v.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):v.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===u?c("scroll",!0)?v.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):v.ReactEventListener.trapBubbledEvent("topScroll","scroll",v.ReactEventListener.WINDOW_HANDLE):"topFocus"===u||"topBlur"===u?(c("focus",!0)?(v.ReactEventListener.trapCapturedEvent("topFocus","focus",n),v.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):c("focusin")&&(v.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),v.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),o.topBlur=!0,o.topFocus=!0):h.hasOwnProperty(u)&&v.ReactEventListener.trapBubbledEvent(u,h[u],n),o[u]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===o&&(o=v.supportsEventPageXY()),!o&&!d){var e=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),d=!0}}});e.exports=v},function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=n(240),i=n(815),a=n(470),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};o.augmentClass(r,s),e.exports=r},function(e,t,n){"use strict";var r=n(23),o=(n(12),{}),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,o,i,a,s,u){this.isInTransaction()?r("27"):void 0;var l,c;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),c=e.call(t,n,o,i,a,s,u),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=o,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()?void 0:r("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i,a=t[n],s=this.wrapperInitData[n];try{i=!0,s!==o&&a.close&&a.close.call(this,s),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}};e.exports=i},function(e,t){"use strict";function n(e){var t=""+e,n=o.exec(t);if(!n)return t;var r,i="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(i+=t.substring(s,a)),s=a+1,i+=r}return s!==a?i+t.substring(s,a):i}function r(e){return"boolean"==typeof e||"number"==typeof e?""+e:n(e)}var o=/["'&<>]/;e.exports=r},function(e,t,n){"use strict";var r,o=n(52),i=n(460),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=n(468),l=u(function(e,t){if(e.namespaceURI!==i.svg||"innerHTML"in e)e.innerHTML=t;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+t+"</svg>";for(var n=r.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(o.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(l=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),a.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}e.exports=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(48),s=r(a),u=n(1),l=r(u),c=n(318),f=(r(c),n(2360)),d=r(f),p=n(129),h=n(49),m=(r(h),l.default.PropTypes),v=m.array,y=m.func,g=m.object,b=l.default.createClass({displayName:"RouterContext",propTypes:{history:g,router:g.isRequired,location:g.isRequired,routes:v.isRequired,params:g.isRequired,components:v.isRequired,createElement:y.isRequired},getDefaultProps:function(){return{createElement:l.default.createElement}},childContextTypes:{history:g,location:g.isRequired,router:g.isRequired},getChildContext:function(){var e=this.props,t=e.router,n=e.history,r=e.location;return t||(t=i({},n,{setRouteLeaveHook:n.listenBeforeLeavingRoute}),delete t.listenBeforeLeavingRoute),{history:n,location:r,router:t}},createElement:function(e,t){return null==e?null:this.props.createElement(e,t)},render:function(){var e=this,t=this.props,n=t.history,r=t.location,a=t.routes,u=t.params,c=t.components,f=null;return c&&(f=c.reduceRight(function(t,s,l){if(null==s)return t;var c=a[l],f=(0,d.default)(c,u),h={history:n,location:r,params:u,route:c,routeParams:f,routes:a};if((0,p.isReactChildren)(t))h.children=t;else if(t)for(var m in t)Object.prototype.hasOwnProperty.call(t,m)&&(h[m]=t[m]);if("object"===("undefined"==typeof s?"undefined":o(s))){var v={};for(var y in s)Object.prototype.hasOwnProperty.call(s,y)&&(v[y]=e.createElement(s[y],i({key:y},h)));return v}return e.createElement(s,h)},f)),null===f||f===!1||l.default.isValidElement(f)?void 0:(0,s.default)(!1),f}});t.default=b,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.canUseMembrane=void 0;var o=n(49),i=(r(o),t.canUseMembrane=!1,function(e){return e});t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(35),i=r(o),a=n(55),s=r(a),u=function(e){return function(t){var n=(0,s.default)(t);return function(t){return n(e(t))}}};t.default=(0,i.default)(u,"mapProps")},function(e,t){"use strict";t.__esModule=!0;var n={fromESObservable:null,toESObservable:null},r=function(e){n=e};t.config={fromESObservable:function(e){return"function"==typeof n.fromESObservable?n.fromESObservable(e):e},toESObservable:function(e){return"function"==typeof n.toESObservable?n.toESObservable(e):e}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(186),i=r(o);t.default=i.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(1),l=n(35),c=r(l),f=n(55),d=r(f),p=function(e,t,n){return function(r){var l=(0,d.default)(r);
return function(r){function u(){var e,t,a;o(this,u);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return e=t=i(this,r.call.apply(r,[this].concat(l))),t.state={stateValue:"function"==typeof n?n(t.props):n},t.updateStateValue=function(e,n){return t.setState(function(t){var n=t.stateValue;return{stateValue:"function"==typeof e?e(n):e}},n)},a=e,i(t,a)}return a(u,r),u.prototype.render=function(){var n;return l(s({},this.props,(n={},n[e]=this.state.stateValue,n[t]=this.updateStateValue,n)))},u}(u.Component)}};t.default=(0,c.default)(p,"withState")},function(e,t,n){function r(){o.call(this)}e.exports=r;var o=n(291).EventEmitter,i=n(47);i(r,o),r.Readable=n(842),r.Writable=n(2392),r.Duplex=n(2389),r.Transform=n(2391),r.PassThrough=n(2390),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function i(){c||(c=!0,e.end())}function a(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===o.listenerCount(this,"error"))throw e}function u(){l.removeListener("data",n),e.removeListener("drain",r),l.removeListener("end",i),l.removeListener("close",a),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this;l.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(l.on("end",i),l.on("close",a));var c=!1;return l.on("error",s),e.on("error",s),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e}},function(e,t,n){(function(e,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(2433),s=o(a);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:r;var u=(0,s.default)(i);t.default=u}).call(t,function(){return this}(),n(131)(e))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="Logger not yet initialized, please use setCustomLogger function first",r={debug:function(){},issue:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)},error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)}},o=function(e){if(!((null===e||void 0===e?void 0:e.debug)&&(null===e||void 0===e?void 0:e.error)&&(null===e||void 0===e?void 0:e.issue)))throw new Error("Incorrect logger supplied");r=e};t.setCustomLogger=o;var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(r)return r.debug.apply(r,e);throw new Error(n)};t.debug=i;var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(r)return r.issue.apply(r,e);throw new Error(n)};t.issue=a;var s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(r)return r.error.apply(r,e);throw new Error(n)};t.error=s},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2441));t.aabDomainsExternal=o.default;var i=r(n(2442));t.aabDomains=i.default;var a=r(n(2443));t.domainMap=a.default;var s=r(n(2444));t.getCephDomain=s.default;var u=r(n(2445));t.getCephIdentifier=u.default;var l=r(n(2446));t.uniformDomains=l.default},function(e,t,n){(function(t){function n(e,n){for(var r=Math.min(e.length,n.length),o=new t(r),i=-1;++i<r;)o.writeUInt8(e[i]^n[i],i);return o}e.exports=n}).call(t,n(32).Buffer)},function(e,t,n){!function(e,r){r(t,n(1660))}(this,function(e){"use strict";function t(e,t,n){var r=this,o=function(){if(e.length>0){var i=e.shift();i&&i.apply(r,[t,o])}else n(t)};o()}function n(e,t){var n;try{n=JSON.stringify(e)}catch(e){throw new Error("Network request failed. Payload is not serializable: "+e.message)}return a({body:n,method:"POST"},t,{headers:a({Accept:"*/*","Content-Type":"application/json"},t.headers||[])})}function r(e,t){var n;throw n=e&&e.status>=300?new Error("Network request failed with status "+e.status+' - "'+e.statusText+'"'):new Error("Network request failed to return valid JSON"),n.response=e,n.parseError=t,n}function o(e){var t=new Error("A batched Operation of responses for ");throw t.response=e,t}function i(e){void 0===e&&(e={});var i=e.constructOptions,s=e.customFetch,u=e.uri||"/graphql",l=[],c=[],f=[],d=[],p=function(e,n){return new Promise(function(r,o){n?t(c.slice(),e,r):t(l.slice(),e,r)})},h=function(e,n){return new Promise(function(r,o){n?t(d.slice(),e,r):t(f.slice(),e,r)})},m=function(e){var t,l={},c=Array.isArray(e),f=c?{requests:e,options:l}:{request:e,options:l};return p(f,c).then(function(e){var t=i||n,r=e.request||e.requests;return t(r,e.options)}).then(function(e){return l=a({},e),(s||fetch)(u,l)}).then(function(e){return e.text().then(function(n){try{var r=JSON.parse(n);return e.raw=n,e.parsed=r,e}catch(r){return t=r,e.raw=n,e}})}).then(function(e){return h({response:e,options:l},c)}).then(function(e){var n=e.response;if(n.parsed){if(!c)return a({},n.parsed);if(Array.isArray(n.parsed))return n.parsed;o(n)}else r(n,t)})};return m.use=function(e){if("function"!=typeof e)throw new Error("Middleware must be a function");return l.push(e),m},m.useAfter=function(e){if("function"!=typeof e)throw new Error("Afterware must be a function");return f.push(e),m},m.batchUse=function(e){if("function"!=typeof e)throw new Error("Middleware must be a function");return c.push(e),m},m.batchUseAfter=function(e){if("function"!=typeof e)throw new Error("Afterware must be a function");return d.push(e),m},m}var a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};e.constructDefaultOptions=n,e.createApolloFetch=i,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){(function(t){"use strict";function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function o(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(496):"undefined"!=typeof t&&(e=n(496)),e}var i=n(68),a=n(898),s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:o(),transformRequest:[function(e,t){return a(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(s)}),e.exports=u}).call(t,n(27))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.goToDataHref=function(e){e.preventDefault(),window.location.href=e.currentTarget.getAttribute("data-href")}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.initialParams={};t.setInitialParams=function(){if(window.location.search){var e=window.location.search.substr(1).split("&");e.forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),window.pakoInitialSearch=n}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Messer=t.setCruxInitialParams4ssr=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(113),u=n(2440);t.setCruxInitialParams4ssr=function(e){},t.Messer=function(){function e(t,n){r(this,e),this.initialParams=null,this.messedLinks={},this.isMessingEnabled=!1,this.shouldGetMessedLinksFromSSR=!0,this.initialParams=n||this.initialParams,this.isMessingEnabled=!!t}return a(e,[{key:"restoreMessedLinks",value:function(e){this.messedLinks=e}},{key:"releaseConstantMessedLinks",value:function(){this.shouldGetMessedLinksFromSSR=!1}},{key:"mess",value:function(e){if(!this.isMessingEnabled)return e;var t=(0,s.get)(window,"WP.crux.mess"),n=t||u.mess,r="";try{return r=n("object"===("undefined"==typeof e?"undefined":i(e))?o({},this.initialParams,e):o({},this.initialParams,{url:e})),this.shouldGetMessedLinksFromSSR?this.messedLinks[e]||r:r}catch(e){}}}]),e}()},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(565),i=function(e){var t=e.videoParams||{},n=t.clipParams||{},o=r({},n,{mid:t.mid,media:{program:n.program}});return{response:{clip:r({},o)},params:e.content.params}},a=function(e,t){return e.concat(t)},s=function(e){var t=e.elements.filter(function(e){var t=e.content,n=t.type,r=t.params;return"video"===n&&r&&"wptv"===r.site});if(t.length>0)return t;var n=e.elements.filter(function(e){return e.parsedContent}).map(function(e){return e.parsedContent}).reduce(a,[]).reduce(a,[]).filter(function(e){return"video"===e.type});return n},u=function(e){var t=e.data;if(!t||!t.elements)return{};try{var n=s(t),r=n.map(i),a={};return r.forEach(function(e){if(e&&e.response){var t={params:{}};t.clip=e.response.clip,a["#"+(0,o.getVideoTarget)(e.params.mid)]=t}}),a}catch(e){return console.log(e),{}}};t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.voteUpdate=t.vote=t.voteUpdateFailure=t.voteUpdateSuccess=t.voteUpdateLoad=t.voteFailure=t.voteSuccess=t.voteRequest=t.names=void 0;var a=n(18),s=n(866),u=r(s),l=n(520),c=t.names={COMMENTS_POST_VOTE_REQUEST:"COMMENTS_POST_VOTE_REQUEST",COMMENTS_POST_VOTE_SUCCESS:"COMMENTS_POST_VOTE_SUCCESS",COMMENTS_POST_VOTE_FAILURE:"COMMENTS_POST_VOTE_FAILURE",COMMENTS_VOTE_UPDATE_LOAD:"COMMENTS_UPDATE_VOTE_LOAD",COMMENTS_UPDATE_VOTE_SUCCESS:"COMMENTS_UPDATE_VOTE_SUCCESS",COMMENTS_UPDATE_VOTE_FAILURE:"COMMENTS_UPDATE_VOTE_FAILURE"},f=function(e,t,n){var r=u.default.get("votes");r=r?[].concat(i(r),[{id:e,type:t,count:n}]):[{id:e,type:t,count:n}];try{u.default.set("votes",r)}catch(e){}},d=function(e){return u.default.get(e)},p=t.voteRequest=(0,a.createAction)(c.COMMENTS_POST_VOTE_REQUEST),h=t.voteSuccess=(0,a.createAction)(c.COMMENTS_POST_VOTE_SUCCESS),m=t.voteFailure=(0,a.createAction)(c.COMMENTS_POST_VOTE_FAILURE),v=t.voteUpdateLoad=(0,a.createAction)(c.COMMENTS_VOTE_UPDATE_LOAD),y=t.voteUpdateSuccess=(0,a.createAction)(c.COMMENTS_UPDATE_VOTE_SUCCESS),g=t.voteUpdateFailure=(0,a.createAction)(c.COMMENTS_UPDATE_VOTE_FAILURE),b=function(e){var t=e.comments.votes.cookie;return!!t&&t.loaded};t.vote=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},arguments.length>3&&void 0!==arguments[3]?arguments[3]:{});return function(){var r=o(regeneratorRuntime.mark(function r(o){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o(p({id:e,type:n.type})),r.prev=1,r.next=4,(0,l.post)(e,n);case 4:i=r.sent,f(e,n.type,t),o(h({id:e,count:t,type:n.type,data:i})),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),o(m({id:e,count:t,type:n.type,message:r.t0.message,status:r.t0.status}));case 12:case"end":return r.stop()}},r,void 0,[[1,9]])}));return function(e){return r.apply(this,arguments)}}()},t.voteUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"votes";return function(t,n){if(!b(n())){t(v({localName:e}));try{var r=d(e);t(y({cookie:r}))}catch(e){t(g({error:e}))}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.top=t.vote=t.report=t.list=t.comment=void 0;var o=n(990),i=r(o),a=n(991),s=r(a),u=n(520),l=r(u),c=n(992),f=r(c),d=n(519),p=r(d);t.comment=i,t.list=s,t.report=p,t.vote=l,t.top=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.counterSelector=t.listSelector=t.topListSelector=t.materialTypeSelector=t.titleSelector=t.enabledSelector=t.itemSelector=t.listIdSelector=t.expandedSelector=t.scrollSwitchSelector=t.contentSelector=t.commentsSelector=void 0;var r=n(25),o=t.commentsSelector=function(e){return e.comments},i=t.contentSelector=function(e){return e.content.items},a=(t.scrollSwitchSelector=function(e){return e.comments.settings.scrollSwitch},t.expandedSelector=function(e,t){return e.comments.settings.expanded||t.expanded},t.listIdSelector=function(e,t){return t.listId}),s=t.itemSelector=(0,r.createSelector)(a,i,function(e,t){return t[e]}),u=(t.enabledSelector=(0,r.createSelector)(s,function(e){return e&&e.data.opinionsEnabled||!1}),t.titleSelector=(0,r.createSelector)(s,function(e){return e&&e.data.title}),t.materialTypeSelector=(0,r.createSelector)(s,function(e){return e&&e.data.type}),t.topListSelector=(0,r.createSelector)(a,o,function(e,t){return t.top[e]}));t.listSelector=(0,r.createSelector)(a,o,function(e,t){return t.lists[e]}),t.counterSelector=(0,r.createSelector)(u,function(e){return e&&e.meta?e.meta.count:0})},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.restoreDarkModeFromCookies=t.closeDarkModeTooltip=t.restoreDarkModeCookies=t.darkModeUpdate=t.names=void 0;var o=n(18),i=n(546),a=n(545),s=n(250),u=t.names={DARK_MODE_UPDATE:"DARK_MODE_UPDATE",DARK_MODE_RESTORE:"DARK_MODE_RESTORE",DARK_MODE_CLOSE:"DARK_MODE_CLOSE"},l=(t.darkModeUpdate=(0,o.createAction)(u.DARK_MODE_UPDATE),t.restoreDarkModeCookies=(0,o.createAction)(u.DARK_MODE_RESTORE));t.closeDarkModeTooltip=(0,o.createAction)(u.DARK_MODE_CLOSE),t.restoreDarkModeFromCookies=function(){return function(){var e=r(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,o=s.ACQUISITION_CAPPING_DEFAULT,e.next=4,(0,i.shouldBeClosedPermanently)(function(){var e=r(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r,e.next=3,(0,a.restoreAcquisition)(function(e){o=e,t(l({isClosedPermanently:n,acquisition:o}))});case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WpjslibRegisterContainer=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(340),f=t.WpjslibRegisterContainer=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={cid:-1},r.registerContainer=function(){if(!r.props.id||""===r.props.id)return!1;var e=(0,c.areaParams)(r.props),t=window.WP.pwp.registerContainer(e);return r.setState({cid:t}),t},a=n,i(r,a)}return a(t,e),s(t,[{key:"getChildContext",value:function(){var e=this.props,t=e.id,n=e.length,r=e.recommendationType,o=e.isSGFirst;return{id:t,length:n,recommendationType:r,isSGFirst:o,containerNumber:this.state.cid}}},{key:"componentDidMount",value:function(){var e=this;window.WP.push(function(){e.registerContainer()})}},{key:"render",value:function(){var e=this.props.children;return e?u.Children.only(e):null}}]),t}(l.default.Component);f.propTypes={id:u.PropTypes.string.isRequired,recommendationType:u.PropTypes.string,length:u.PropTypes.number,isSGFirst:u.PropTypes.bool,children:l.default.PropTypes.element},f.defaultProps={recommendationType:"",length:0,isSGFirst:!1,id:""},f.childContextTypes={id:u.PropTypes.string.isRequired,recommendationType:u.PropTypes.string,length:u.PropTypes.number,isSGFirst:u.PropTypes.bool,containerNumber:u.PropTypes.oneOfType(u.PropTypes.number,u.PropTypes.bool)},t.default=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e?e.replace(/^\/+|\/+$/g,""):""},r=function(e){return{type:"area",areaid:e.id,length:e.length||0,recommendationType:e.recommendationType||"",isSGFirst:e.isSGFirst||!1}},o=function(e,t){return JSON.stringify({type:"button",id:e,index:t,recommendationType:""})},i=function(e){return{type:"textlink",url:e.url,index:e.index,recommendationType:e.recommendationType||"",cid:e.cid||"none",csystem:"NCR",ctype:e.ctype||"none"}},a=function(e){return{type:"teaser",teaserid:e.id,index:e.index,url:n(e.url),img:e.img,recommendationType:e.recommendationType||""}},s=function(e){return{type:"intextTeaser",index:e.index,url:n(e.url),img:e.img,recommendationType:"none",cid:"AAA",csystem:"NCR",ctype:"AAA"}},u=function(e){return{type:"scrollboost",index:e.index,url:n(e.url),img:e.img,recommendationType:"none",cid:"AAA",csystem:"NCR",ctype:"AAA"}},l=function(e){if(!e||"string"!=typeof e)return e;var t={"section/glonews":"section-glonews","dla-ciebie":"section-dla-ciebie",najnowsze:"section-najnowsze",popularne:"section-popularne","section/":"intersection-"};if(e&&t[e])return t[e];var n=new RegExp("^section/[0-9]*$");return e.match(n)?e.replace("section/",t["section/"]):e.replace("/","-")};t.areaParams=r,t.buttonParams=o,t.textlinkParams=i,t.teaserParams=a,t.intextTeaserParams=s,t.scroolbostTeaserParams=u,t.replaceSectionName=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DUMMY_METRICS={utm_source:"xbalpako",utm_campaign:"",utm_medium:""}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(15),f=r(c),d=n(5),p=n(31),h=r(p),m=n(252),v=n(25),y=n(537),g=r(y),b=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.onUnregister=function(){r.isAsynchronouslyUnregistered=!0},r.setSlotRef=function(e){return r.slotRef=e};try{r.config=e.config,r.slot=e.slot,r.classNameSlot=(0,m.genClassName)(r.slot,r.config.isMobile?"n":"e")}catch(e){console.log("SlotComponent",e)}return r.isRegistered=r.isRegisteredAsAdsFirst(),r.isAdsFirst=r.isRegisteredAsAdsFirst(),r.isAsynchronouslyUnregistered=!1,r}return a(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this.context,t=e.config.dynamic.ADS_FIRST_SLOTS,n=void 0===t?{}:t,r=e.isServerSide;r&&(n[this.slot]||(n[this.slot]={placeholder:null,slot:null}),n[this.slot].slot="."+this.classNameSlot)}},{key:"componentDidMount",value:function(){this.isAdsFirst&&PAKO_MANAGER.gaf.slot.setUnregisterCallback(this.slot,this.onUnregister);var e=this.props.isLocked;e||this.isRegistered||this.registerSlot()}},{key:"shouldComponentUpdate",value:function(e,t){return(0,f.default)(this,e,t)}},{key:"componentDidUpdate",value:function(e,t,n){!this.props.isLocked&&this.isAsynchronouslyUnregistered&&this.registerSlot(),this.props.isLocked||this.isRegistered||this.registerSlot()}},{key:"isRegisteredAsAdsFirst",value:function(){var e=this.props.isFirstLoad,t=this.context,n=t.config.dynamic.ADS_FIRST_SLOTS,r=void 0===n?{}:n,o=t.isServerSide;return!o&&e&&!!r[this.slot]&&!("6"===this.slot||6===this.slot)}},{key:"registerSlot",value:function(){if(this.isRegistered=!0,this.isAsynchronouslyUnregistered=!1,this.slot&&this.slotRef){var e={};PAKO_MANAGER.state.nativeSlots[this.slot]&&(e.setNative=PAKO_MANAGER.gaf.setNative(this.slot)||null),PAKO_MANAGER.gaf.slot.register(this.slot,this.slotRef,e,this.onUnregister)}}},{key:"render",value:function(){return l.default.createElement("div",{className:this.classNameSlot,ref:this.setSlotRef})}}]),t}(l.default.Component);b.contextTypes={config:u.PropTypes.object.isRequired,isServerSide:u.PropTypes.bool.isRequired},b.propTypes={config:l.default.PropTypes.object.isRequired,logoutSlot:u.PropTypes.bool};var A=function(e){return e.adv.isLocked},w=function(e){return e.adv.isFirstLoad},_=function(e){return e.view.loadTimestamp},E=(0,v.createSelector)(A,w,_,function(e,t,n){return{isLocked:e,isFirstLoad:t,loadTimestamp:n}});t.default=(0,g.default)((0,h.default)((0,d.connect)(E)(b))),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1),s=r(a),u=n(16),l=n(2),c=r(l),f=n(38),d=r(f),p=n(62),h=r(p),m=n(1830),v=r(m),y=function(e){var t=e.name,n=e.photo,r=e.style,a=e.isMobile,u=e.signature,l=e.elaborator,f=a?56:25,p={width:f,height:f};return s.default.createElement("div",{className:(0,c.default)(v.default.wrap,v.default[r],o({},v.default.desktop,!a))},!a&&!!n&&!u&&s.default.createElement("div",{className:v.default.wrapAvatar},s.default.createElement("div",{className:v.default.wrapAvatarIn},s.default.createElement(d.default,i({wrap:!0,src:n},p,{useIr:!0,mainPhoto:!0,isTeaser:!0})))),!a&&!n&&s.default.createElement("div",{className:v.default.blankPhoto}),s.default.createElement("span",{className:(0,c.default)("signature--author",v.default.author,{desktop:!a})},l?"oprac. ":"",u||t))};y.displayName="Author",y.propTypes={name:a.PropTypes.string,description:a.PropTypes.string,photo:a.PropTypes.string,style:a.PropTypes.string,personObject:a.PropTypes.bool,isMobile:a.PropTypes.bool.isRequired},y.defaultProps={personObject:!1},t.default=(0,u.pure)((0,h.default)(y)),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(9),p=n(2),h=r(p),m=n(4),v=n(21),y=n(19),g=n(343),b=r(g),A=n(1831),w=r(A),_=function(e){function t(){var e,n,r,o;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={visible:!1},r.handleOver=function(){r.hoverTimeout=setTimeout(function(){return r.toggleVisibilty(!0)},10)},r.handleOut=function(){clearTimeout(r.hoverTimeout),r.toggleVisibilty(!1)},r.toggleVisibilty=function(e){r.setState({visible:e})},o=n,a(r,o)}return s(t,e),l(t,[{key:"renderAuthor",value:function(e,t,n,r){return f.default.createElement(v.WpjslibRegisterBox,{type:"textlink",index:n,url:r.BASE_URL+(0,y.author)(e),key:n},f.default.createElement(d.Link,{className:(0,h.default)(w.default.link,w.default.oherAuthor),to:(0,y.author)(e),key:e.slug},f.default.createElement("div",{className:w.default.author},f.default.createElement(b.default,u({key:e.id},e,{style:t?"desktopArticleOthers":null})))))}},{key:"renderAuthors",value:function(){var e,t=this,n=this.props,r=n.authors,i=n.isDesktop,a=n.config;return f.default.createElement("div",{className:(0,h.default)(w.default.wrapOtherAuthors,(e={},o(e,w.default.desktop,i),o(e,w.default.visible,this.state.visible),e))},r.map(function(e,n){return t.renderAuthor(e,i,n+1,a)}))}},{key:"render",value:function(){var e=this.props,t=e.authors,n=e.isDesktop;return!n||!t||t.length<1?f.default.createElement("div",null):f.default.createElement("div",{className:(0,h.default)(w.default.showMore,o({},w.default.desktop,n)),onMouseEnter:this.handleOver,onMouseLeave:this.handleOut},"i inni (",t.length,")",this.renderAuthors())}}]),t}(c.Component);_.propTypes={authors:c.PropTypes.array,isDesktop:c.PropTypes.bool},t.default=(0,m.withConfig)(_),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(62),u=r(s),l=n(2),c=r(l),f=n(16),d=n(1839),p=r(d),h=(0,f.pure)(function(e){var t,n=e.style,r=e.text,i=e.isMobile;return a.default.createElement("div",{className:(0,c.default)("teaserReadMore",n,p.default.wrap,p.default[n],(t={},o(t,p.default.desktop,!i),o(t,"desktop",!i),t))},r)});h.displayName="ReadMore",h.propTypes={style:a.default.PropTypes.string,text:a.default.PropTypes.string},h.defaultProps={text:"Czytaj dalej"},t.default=(0,u.default)(h),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),f=n(9),d=n(2),p=r(d),h=n(21),m=n(4),v=n(62),y=r(v),g=n(8),b=n(19),A=n(1843),w=r(A),_=n(706),E=r(_),T=n(311),x=r(T),P=n(547),S=function(e){function t(){var e,n,r,o;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={visible:!1},r.handleClick=function(){r.props.mobile&&r.toggleOverlay(!r.state.visible)},r.handleOver=function(){r.props.mobile||r.toggleOverlay(!0)},r.handleOut=function(){r.props.mobile||r.toggleOverlay(!1)},r.toggleOverlay=function(e){e?r.hoverTimeout=setTimeout(function(){return r.toggleVisibilty(!0)},1):(clearTimeout(r.hoverTimeout),r.toggleVisibilty(!1))},r.toggleVisibilty=function(e){r.setState({visible:e})},r.renderTagLink=function(e,t){var n=(0,P.extractCollectionLinkFromTag)(e,r.props.config.BASE_URL),o=e.link&&"collectionrecord"===e.link.type,i=e.link&&e.link.productUrl&&e.link.productUrl!==r.props.config.BASE_URL,a=function(){return n?n:o?i?""+e.link.productUrl+(0,b.record)(e.link):(0,b.record)(e.link):(0,b.tag)(e)},s=a();return c.default.createElement(h.WpjslibRegisterBox,{key:e.id,type:"textlink",index:t,url:n?n:i?s:""+r.props.config.BASE_URL+s,external:i},i?c.default.createElement(f.Link,{to:s,className:(0,p.default)("subjectsList--link",w.default.link),external:!0},e.name):c.default.createElement(f.Link,{className:(0,p.default)("subjectsList--link",w.default.link),key:e.id,to:s},e.name))},r.renderTags=function(){var e=r.props.tags;return e.map(function(e,t){if(e&&e.name)return r.renderTagLink(e,t)})},o=n,a(r,o)}return s(t,e),u(t,[{key:"render",value:function(){var e,t=this.props,n=t.tags,r=t.style,i=t.isMobile;if(!n||!n.length)return c.default.createElement("span",null);var a=n.filter(function(e){return e.name});return c.default.createElement("div",{className:(0,p.default)(w.default.wrap,o({},w.default.desktop,!i)),onMouseEnter:this.handleOver,onMouseLeave:this.handleOut},c.default.createElement("div",{className:(0,p.default)("subjectsList--btn",i?"mobile":"desktop",(e={},o(e,w.default.btn,!i),o(e,E.default.wrap,i),o(e,E.default[r],i),o(e,w.default.hovered,this.state.visible),e)),onClick:this.handleClick},"+",n&&n.length),c.default.createElement("div",{className:(0,p.default)(w.default.overlay,o({},w.default.visible,this.state.visible&&a.length))},c.default.createElement("div",{className:w.default.overlayIn0},c.default.createElement("div",{
className:(0,p.default)("subjectsList--overlay",w.default.overlayIn1)},c.default.createElement("div",{className:w.default.overlayIn2},this.renderTags()))),i&&c.default.createElement("div",{className:(0,p.default)("subjectsList--close",w.default.close),onClick:this.handleClick},c.default.createElement(g.Icon,{data:x.default}))))}}]),t}(c.default.Component);S.propTypes={tags:c.default.PropTypes.arrayOf(c.default.PropTypes.object),style:c.default.PropTypes.string,mobile:l.PropTypes.bool.isRequired,isMobile:l.PropTypes.bool.isRequired},t.default=(0,y.default)((0,m.withConfig)(S)),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),a=r(i),s=n(94),u=r(s),l=n(136),c=r(l),f=function e(t){var e=function(e){var n=c.default.browserHistory;return a.default.createElement(t,o({},e,{browserHistory:n}))};return e.displayName="withBrowserHistoryApp("+(0,u.default)(t)+")",e};t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),a=r(i),s=n(63),u=r(s),l=function(e,t){return function(n){if(u.default.isEnabled(t)){var r=u.default.getConfig(t);return a.default.createElement(e,o({},n,{componentConfig:r}))}return null}};t.default=l,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.checkWPCreatorSource=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.some(function(e){return e.wpCreator})},t.getWPCreatorSource=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.find(function(e){return e.wpCreator})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cropText=void 0;var r=n(562);t.cropText=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...",o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!1;if(e.indexOf("\n")>-1){e=(0,r.removeExtraNl)(e);var a=e.split("\n");i=a.length>3,e=a.slice(0,3).join("\n")}if(e.length<t+1)return o?e:{text:e,cropped:i};var s=e.indexOf(" ",t+1);if(s<0)return o?e:{text:e,cropped:i};var u=e.substring(0,s)+n;return o?u:{text:u,cropped:!0}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.declination=function(e,t,n,r){if(e=Math.abs(e),1===e)return t;var o=e%10,i=e%100;return o>4||o<2||i<15&&i>11?r:n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryParamByName=void 0;var r=n(554),o=function(e){var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return!!t.test(e)};t.getQueryParamByName=function(e,t){if("string"==typeof t&&t.length&&o(t)){var n=(0,r.getURL)(t);return n.searchParams.get(e)||""}return""}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new RegExp("^https?://"),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"==typeof e&&null!==n.exec(e)};t.default=r,e.exports=t.default},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.pluralize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;return t[n]}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateMutationObserverData=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(37),s=n(1132),u=n(173),l="undefined"!=typeof window&&!window.location.hostname.includes("pako.dcwp.pl")&&!window.location.hostname.includes("localhost"),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"POP"===e.action&&t.length>0?t.pop():t.length>0&&"REPLACE"===e.action?(t.pop(),t.push(e.pathname)):"PUSH"===e.action&&t.push(e.pathname),t},f=function(e){var t=(0,s.getThemeConfiguration)({by:"name",payload:e});return"undefined"!=typeof document&&(document.body.classList.toggle("theme-dark"),l&&"undefined"!=typeof WP?WP.cookieXD.set("wp_dark",t.cookie):document.cookie="wp_dark="+t.cookie),t},d=function(e){if(!e)return(0,s.getThemeConfiguration)({by:"name",payload:u.THEME_MODE.DEFAULT});var t=(0,s.getThemeCookie)(e);return(0,s.getThemeConfiguration)({by:"cookie",payload:t})};t.calculateMutationObserverData=function(e){return{height:e?Math.round(e.clientHeight):0,top:e?Math.round(e.getBoundingClientRect().top+document.documentElement.scrollTop):0}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{menuVisbile:!1,lastLocations:[],locationState:a.LOCATION_STATE.PUSH,previewTeaserId:null,headerFixed:!1,headerThin:!1,show404:!1,preRendered:{},theme:{},mutationObservers:{}},t=arguments[1];switch(t.type){case a.names.UI_SET_404_INFO:return i({},e,{show404:t.payload});case a.names.UI_SET_PRVIEW_TEASER_ID:return i({},e,{previewTeaserId:t.payload});case a.names.UI_TOGGLE_MENU:return i({},e,{menuVisible:t.payload.value});case a.names.UI_CLOSE_MENU:return i({},e,{menuVisible:!1});case a.names.UI_HIDDEN_HEADER:return i({},e,{hiddenHeader:t.payload});case a.names.UI_THIN_HEADER:return i({},e,{headerThin:t.payload});case a.names.UI_TOGGLE_HEADER:return i({},e,{headerFixed:t.payload.fixed});case a.names.UI_SAVE_LOCATION:return i({},e,{lastLocations:c(t.payload.location,[].concat(o(e.lastLocations)))});case a.names.UI_UPDATE_MUTATION_OBSERVERS:return i({},e,{mutationObservers:i({},e.mutationObservers,r({},t.payload.id,i({},t.payload.data)))});case a.names.UI_SET_PRERENDERED_IMAGE:return i({},e,{preRendered:i({},e.preRendered,r({},t.payload.src,!0))});case a.names.UI_THEME_RESTORE:var n=d(t.payload);return i({},e,{theme:i({},n)});case a.names.UI_THEME_SET:var s=f(t.payload);return i({},e,{theme:i({},s)});case a.names.UI_SET_BACK_WP_MOBILE:return i({},e,{backWpMobile:t.payload});case a.names.UI_SET_FOOTER_FIXED:return i({},e,{footerFixed:t.payload});case a.names.UI_SET_ARTICLE_ARRANGEMENT:return i({},e,{articleArrangement:i({},e.articleArrangement,t.payload)});case a.names.UI_SET_COMPONENTS_STATUS:return i({},e,{componentsStatus:i({},e.componentsStatus,t.payload)});case a.names.UI_SET_LOCATION_STATE:return i({},e,{locationState:t.payload});default:return e}}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchGalleryViewTeasers=t.fetchGalleryViewTeasersFailure=t.fetchGalleryViewTeasersSuccess=t.fetchGalleryViewTeasersRequest=t.names=void 0;var o=n(18),i=n(119),a=n(1141),s=t.names={GALLERY_VIEW_TEASERS_FETCH_REQUEST:"GALLERY_VIEW_TEASERS_FETCH_REQUEST",GALLERY_VIEW_TEASERS_FETCH_SUCCESS:"GALLERY_VIEW_TEASERS_FETCH_SUCCESS",GALLERY_VIEW_TEASERS_FETCH_FAILURE:"GALLERY_VIEW_TEASERS_FETCH_FAILURE"},u=t.fetchGalleryViewTeasersRequest=(0,o.createAction)(s.GALLERY_VIEW_TEASERS_FETCH_REQUEST),l=t.fetchGalleryViewTeasersSuccess=(0,o.createAction)(s.GALLERY_VIEW_TEASERS_FETCH_SUCCESS),c=t.fetchGalleryViewTeasersFailure=(0,o.createAction)(s.GALLERY_VIEW_TEASERS_FETCH_FAILURE),f=function(e,t){return e&&e.recommendations&&e.recommendations[t]&&e.recommendations[t].teasers&&e.recommendations[t].teasers.length},d=function(e,t,n){return e&&e.galleryViewTeasers&&e.galleryViewTeasers[t]&&e.galleryViewTeasers[t].teasers&&e.galleryViewTeasers[t].teasers.length>=n};t.fetchGalleryViewTeasers=function(e){var t=e.productId,n=e.type,o=e.limit,s=void 0===o?10:o,p=e.recommendationsType;return function(){var e=r(regeneratorRuntime.mark(function e(r,o){var h,m,v,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h=o(),!d(h,p,s)){e.next=3;break}return e.abrupt("return");case 3:return r(u()),e.prev=4,m={productId:t,type:n,limit:s,recommendationsType:p},e.next=8,(0,i.promiseTimeout)(2e3,(0,a.getRecommendationsTeasers)(m));case 8:if(v=e.sent,!f(v,p)){e.next=14;break}y=v.recommendations,r(l(y)),e.next=15;break;case 14:throw new Error("[getRecommendationsTeasers] Missing teasers data");case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),r(c({key:"galleryViewTeasers",message:e.t0.message,status:e.t0.status||e.t0.response&&e.t0.response.status})),console.warn({key:"galleryViewTeasers",message:e.t0.message,status:e.t0.status||e.t0.response&&e.t0.response.status});case 21:case"end":return e.stop()}},e,void 0,[[4,17]])}));return function(t,n){return e.apply(this,arguments)}}()}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchListing=t.fetchListingFailure=t.fetchListingSuccess=t.fetchListingRequest=t.names=void 0;var o=n(18),i=n(119),a=n(361),s=t.names={LISTING_FETCH_REQUEST:"LISTING_FETCH_REQUEST",LISTING_FETCH_SUCCESS:"LISTING_FETCH_SUCCESS",LISTING_FETCH_FAILURE:"LISTING_FETCH_FAILURE"},u=t.fetchListingRequest=(0,o.createAction)(s.LISTING_FETCH_REQUEST),l=t.fetchListingSuccess=(0,o.createAction)(s.LISTING_FETCH_SUCCESS),c=t.fetchListingFailure=(0,o.createAction)(s.LISTING_FETCH_FAILURE);t.fetchListing=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var n=r(regeneratorRuntime.mark(function n(r,o){var s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(u()),n.prev=1,n.next=4,(0,i.promiseTimeout)(2e3,(0,a.getListing)(e,t));case 4:s=n.sent,r(l(s)),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),r(c({key:"collectionlisting",message:n.t0.message,status:n.t0.status||n.t0.response&&n.t0.response.status})),console.warn({key:"collectionlisting",message:n.t0.message,status:n.t0.status||n.t0.response&&n.t0.response.status});case 12:case"end":return n.stop()}},n,void 0,[[1,8]])}));return function(e,t){return n.apply(this,arguments)}}()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.mediaProductsTeasersFetch=t.mediaProductsTeasersFetchFailure=t.mediaProductsTeasersFetchSuccess=t.mediaProductsTeasersFetchRequest=t.names=void 0;var o=n(18),i=n(509),a=n(67),s=r(a),u=t.names={MEDIA_PRODUCTS_TEASERS_FETCH_REQUEST:"MEDIA_PRODUCTS_TEASERS_FETCH_REQUEST",MEDIA_PRODUCTS_TEASERS_FETCH_SUCCESS:"MEDIA_PRODUCTS_TEASERS_FETCH_SUCCESS",MEDIA_PRODUCTS_TEASERS_FETCH_FAILURE:"MEDIA_PRODUCTS_TEASERS_FETCH_FAILURE"},l=t.mediaProductsTeasersFetchRequest=(0,o.createAction)(u.MEDIA_PRODUCTS_TEASERS_FETCH_REQUEST),c=t.mediaProductsTeasersFetchSuccess=(0,o.createAction)(u.MEDIA_PRODUCTS_TEASERS_FETCH_SUCCESS),f=t.mediaProductsTeasersFetchFailure=(0,o.createAction)(u.MEDIA_PRODUCTS_TEASERS_FETCH_FAILURE);t.mediaProductsTeasersFetch=function(e){var t=e.isServer,n=e.endpoint;return function(e){if(e(l()),t)try{var r=i.mediaProductsTeasersFetcher.getResult(n)||[];e(c({endpoint:n,teasers:r}))}catch(t){e(f({error:t}))}else s.default.get("/mediaProductsTeasers/"+n).then(function(t){e(t.data&&t.data.length?c({endpoint:n,teasers:t.data}):c({endpoint:n,teasers:[]}))}).catch(function(t){e(f({error:t}))})}}},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getPaginatedTeasers=t.getQuizzesSection=t.get=t.getRanking=t.getListing=t.getMainSections=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(67),s=r(a),u=n(204),l=r(u),c=n(46),f=n(1149),d=r(f),p=n(39),h=r(p),m=n(1146),v=n(1150),y=function(){s.default.defaults.timeout=c.API_DEFAULT_TIMEOUT},g=(t.getMainSections=function(e){var t=e.productId,n=e.sectionsConfig,r=void 0===n?[]:n;return new Promise(function(e,n){var o=(0,v.getSpecialSections)({productId:t,sectionsConfig:r});o.then(function(t){return e(t)}).catch(function(e){n(e)})})},t.getListing=function(t,n){return new Promise(function(r,o){y();var a=l.default.getHost(e.env.CONTENT_API_HOST);s.default.get(a+"/content/collectionlisting/"+t+"/"+n,{}).then(function(e){r(i({},e.data))}).catch(function(e){o(e)})})},t.getRanking=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,n){y(),d.default.getItemsList(e).then(function(e){return t(e.data)}).catch(function(e){n(e)})})},{tag:"tags",author:"authors",collections:"collections"}),b=function(t,n,r){if(r){var o=l.default.getHost(e.env.CONTENT_API_HOST,"");return o+"/api/v1/materials/aggregated"}var i=l.default.getHost(e.env.CONTENT_API_HOST);return i+"/content/"+t+"/"+n},A=(t.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.full=1,/^quizy\//.test(e))return A(e,t);var r=e.split("/"),o=r[1]&&g[r[0]]||"sections",i=encodeURIComponent(r[1]||r[0]);return new Promise(function(e,r){y(),s.default.get(b(o,i,n),{params:t}).then(function(t){e(t.data)}).catch(function(e){console.log(e),r(e)})})},t.getQuizzesSection=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.default.getHost(e.env.QUIZZES_API_HOST),o="sections",i=t.replace(/^quizy\//,"");return i=i,new Promise(function(e,t){y(),s.default.get(r+"/quiz/"+o+"/"+i,{params:n}).then(function(t){return e(t.data)}).catch(function(e){console.log(e),t(e)})})}),w=function(e,t,n,r,o){return!o.length&&(!(t||n.length||r)&&("najnowsze"!==e&&e))};t.getPaginatedTeasers=function(e){var t=e.productId,n=e.tagName,r=e.tagId,i=e.tagsIds,a=e.authorId,s=e.first,u=e.contentTypes,l=e.offset,c=e.sort,f=e.section,d=e.lifespan,p=(0,m.prepareQueryData)({productId:t,tagName:w(n,r,i,f,d),tagIdGroups:!!i.length&&[].concat(o(i)),authorId:a,first:s,sort:c&&c.toUpperCase()||"NEWEST",contentTypes:u,offset:l,lifespan:!!d.length&&[].concat(o(d))});return h.default.fetch({operationName:"material",query:p.query,variables:p.variables}).then(function(e){var t=e.data,n=e.errors;if(n)throw new Error(n.map(function(e){return e.message}));if(!t)throw new Error("Cannot fetch Pagination");return t}).catch(function(e){throw new Error("[Pagination] "+e)})}}).call(t,n(27))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(2),u=r(s),l=n(4),c=n(156),f=r(c),d=n(183),p=r(d),h=function(e){var t=(e.isPreviewMode,e.isMobile),n=e.isPremium,r=e.isIntroBar,i=e.setTitleRef,a={};return t?(a.className=(0,u.default)(o({},p.default.title,n),"article--title",f.default.title),a.ref=i):a.className=(0,u.default)(o({},p.default.title,n),"article--title",o({},f.default.title,!n),o({},f.default.noIntroBar,!r)),a},m=function(e,t){var n=e.title,r=e.interviewee,o=e.isIntroBar,i=e.setTitleRef,s=e.isMobile,u=e.isPremium,l=t.isPreviewMode,c=void 0!==l&&l,d=c?"span":"h1",p=h({isPreviewMode:c,isMobile:s,isPremium:u,isIntroBar:o,setTitleRef:i}),m=[r?a.default.createElement("span",{className:f.default.interviewee,key:"interviewee"},r):null,u?a.default.createElement("span",{key:"title"},n):n];return a.default.createElement(d,p,m)};m.propTypes={title:i.PropTypes.string.isRequired,interviewee:i.PropTypes.string,isIntroBar:i.PropTypes.bool,isPremium:i.PropTypes.bool,setTitleRef:i.PropTypes.func},m.contextTypes={isPreviewMode:i.PropTypes.bool},t.default=(0,l.withMobile)(m),e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TABS_SCHEMA={popular:{key:"popular",name:"Polecane",stArea:"popular"},newest:{key:"newest",name:"Najnowsze",stArea:"newest"},similar:{key:"similar",name:"Popularne",stArea:"similar"},seenAfterContent:{key:"seenAfterContent",name:"Polecane",stArea:"seenAfterContent"},seenBySimilarUsers:{key:"seenBySimilarUsers",name:"Polecane",stArea:"seenBySimilarUsers"}},t.LOAD_DATA_STATUS={BEFORE_LOAD:0,LOADING:1,LOADED:2}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.mainMediaSocialTypes=t.mainMediaVideoTypes=t.ContentPartMainMediaSubtypes=void 0;var o=n(267),i=r(o),a=n(373),s=n(262),u=r(s);t.ContentPartMainMediaSubtypes={file:i.default,youtube:i.default,dailymotion:i.default,liveleak:i.default,vimeo:i.default,"tvp.pl":i.default,"wideo.wp.pl":i.default,facebook:a.Social,twitter:a.Social,tiktok:a.Social,instagram:a.Social,pinterest:a.Social,telegram:a.Social,giphy:null,twitch:null,reddit:null,spotify:null,photo:u.default},t.mainMediaVideoTypes=["file","youtube","dailymotion","liveleak","vimeo","tvp.pl","wideo.wp.pl"],t.mainMediaSocialTypes=["facebook","twitter","tiktok","instagram","pinterest","telegram"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(10),u=r(s),l=n(2),c=r(l),f=n(1865),d=r(f),p=n(455),h=r(p),m=n(456),v=r(m),y=function(e){return a.default.createElement("div",{className:(0,c.default)(d.default.wrap,d.default[e.kind],d.default[e.type],o({},d.default.hover,e.hover)),style:{backgroundImage:"url("+e.src+")"}},e.ranking?a.default.createElement("div",{className:d.default.ranking},e.index+1):null,e.label?a.default.createElement("div",{className:d.default.label},e.label):null,"bigdata"===e.type&&"nocowanie"===e.kind&&a.default.createElement("div",{className:(0,c.default)(d.default.logoBg,d.default.nocowanie),dangerouslySetInnerHTML:{__html:h.default}}),"bigdata"===e.type&&"wakacje"===e.kind&&a.default.createElement("div",{className:(0,c.default)(d.default.logoBg,d.default.wakacje),dangerouslySetInnerHTML:{__html:v.default}}))};y.displayName="Image",y.propTypes={hover:i.PropTypes.bool.isRequired,index:i.PropTypes.number,kind:i.PropTypes.string,label:i.PropTypes.string,ranking:i.PropTypes.bool,src:i.PropTypes.string.isRequired,type:i.PropTypes.string.isRequired},t.default=(0,u.default)(y),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1),s=r(a),u=n(2),l=r(u),c=n(140),f=r(c),d=n(589),p=r(d),h=n(138),m=n(1873),v=r(m),y=function(e){var t=e.isPremium,n=e.isMobile,r=e.content.params,a=(0,h.getWidth)(n,t,"fullsize"),u=r.photo,c=void 0===u?{}:u,d=r.url,m=r.height,y=r.author,g=r.source,b=r.caption,A={src:c.url||d,height:(c.height||m)+"px",width:a,author:c.author||y,source:c.source||g,caption:c.caption||b,isPremium:t,isMobile:n};return s.default.createElement(f.default,{action:{action:"FullWidthPhoto",dot:{type:"scroll"}}},s.default.createElement("div",{className:(0,l.default)(o({},v.default.premiumFull,t))},s.default.createElement(p.default,i({},A,{speed:0}))))};y.propTypes={isPremium:a.PropTypes.bool,content:a.PropTypes.shape({prams:a.PropTypes.object})},t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),f=n(28),d=r(f),p=n(15),h=r(p),m=n(2),v=r(m),y=n(1876),g=r(y),b=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=d.default.findDOMNode(this),t=e.querySelector("svg");t&&(this.props.height&&t.setAttribute("height",this.props.height),this.props.width&&t.setAttribute("width",this.props.width),this.props.fill&&t.setAttribute("fill",this.props.fill),this.props.preserveAspectRatio&&t.setAttribute("preserveAspectRatio",this.props.preserveAspectRatio))}},{key:"shouldComponentUpdate",value:function(e,t){return(0,h.default)(this,e,t)}},{key:"getStyles",value:function(){return this.hasStyles()?{width:this.props.width,height:this.props.height}:null}},{key:"hasStyles",value:function(){return this.props.width||this.props.height}},{key:"render",value:function(){var e;if(this.props.autofix&&this.props.data.data&&this.props.data.width&&this.props.data.height){var t,n=this.props.data.width*this.props.height/this.props.data.height;return c.default.createElement("div",{className:g.default.wrap,style:{width:n,height:this.props.height}},c.default.createElement("span",{className:(0,v.default)((t={},o(t,g.default.flipX,this.props.flipX),o(t,g.default.flipY,this.props.flipY),t)),dangerouslySetInnerHTML:{__html:this.props.data.data}}))}return c.default.createElement("span",{style:this.getStyles(),className:(0,v.default)((e={},o(e,g.default.flipX,this.props.flipX),o(e,g.default.flipY,this.props.flipY),e),this.props.className),dangerouslySetInnerHTML:{__html:this.props.data}})}}]),t}(c.default.Component);b.displayName="Icon",b.propTypes={autofix:l.PropTypes.bool,data:l.PropTypes.oneOfType([l.PropTypes.object,l.PropTypes.string]).isRequired,fill:l.PropTypes.string,flipX:l.PropTypes.bool,flipY:l.PropTypes.bool,height:l.PropTypes.number,width:l.PropTypes.number},t.default=b,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1232);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.InTextSlot=void 0;var o=n(1),i=r(o),a=n(13),s=n(4),u=n(10),l=r(u),c=t.InTextSlot=function(e){var t=e.index,n=e.addRef,r=e.bunchName,o=e.slot,s=e.isMobile;return i.default.createElement(a.AdvHolder,{bunchName:r,ref:n,key:"adv"+t,slot:o,space:"1",inMobileContent:s})};c.displayName="InTextSlot",c.propTypes={index:o.PropTypes.number.isRequired,firstOffset:o.PropTypes.number,slots:o.PropTypes.array,slotInterval:o.PropTypes.number,addRef:o.PropTypes.func,forceLast:o.PropTypes.bool,bunchName:o.PropTypes.string,max:o.PropTypes.number},t.default=(0,l.default)((0,s.withMobile)(c))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=null,t=new WeakMap,n=function(n){n.forEach(function(n){if(t.has(n.target)){var r=t.get(n.target);(n.isIntersecting||n.intersectionRatio>0)&&(e.unobserve(n.target),t.delete(n.target),r())}})},r=function(t){var r=t.rootMargin,o=void 0===r?"0px 20px 0px 20px":r,i=t.threshold,a=void 0===i?"0.01":i;return e||(e=new IntersectionObserver(n,{rootMargin:o,threshold:a})),e},o=function(n,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=r(i),t.set(n,o),e.observe(n)},i=function(t){e.unobserve(t)};return{createAndObserve:o,unobserve:i}},r=n();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.popUpData=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1258),a=r(i),s={url:"https://wp.pl",cookieName:"PU",StArea:""};t.popUpData=o({},s,(0,a.default)())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),a=r(i),s=(n(5),n(209)),u=r(s),l=n(1893),c=r(l),f=n(241),d=r(f),p=n(322),h=r(p),m=n(852),v=r(m),y=n(31),g=r(y),b=n(16),A=n(9),w=u.default.bind(c.default),_=function(e,t){return function(n){n.preventDefault(),n.stopPropagation(),e(t)}},E=function(e,t){T(e,t.pages)&&(t.setActivePage(e),t.action(e))},T=function(e,t){return e<=t&&e>=1},x=(0,d.default)((0,h.default)("activePage","setActivePage",function(e){return e.initialPage}),(0,v.default)({setPage:function(e){return function(t){t!==e.activePage&&E(t,e)}}}),(0,b.getContext)({location:i.PropTypes.any,params:i.PropTypes.any}),(0,b.lifecycle)({componentDidUpdate:function(e){var t=this;this.props.initialPage!==e.initialPage&&this.setState(function(e){return o({},e,{activePage:t.props.initialPage})})}})),P=x(function(e,t){var n=function(t){return t===parseInt(e.pages)||1===t},r=function(t){return e.activePage-t<=1&&e.activePage-t>=-1},o=function(){return e.hasLinks&&e.location&&e.location.pathname},i=function(t){return e.activePage<4?4===t&&t+1<e.pages:e.activePage>e.pages-3?t===e.pages-4:s(t)},s=function(t){return e.activePage-t===2||e.activePage-t===-2},u=function(t){return e.activePage<4&&t<=4},l=function(t){return e.activePage>e.pages-3&&t>=e.pages-3},f=function(e){return e.replace(/\/$/,"")},d=function(e,t){if(Object.keys(t).includes("page")){var n="(?:\\/"+t.page+")(?=$|\\D)",r=new RegExp(n,"g");return e.replace(r,"")}return e},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=f(e);return d(n,t)},h=function(t){if(o()){var n=e.location.pathname,r=e.params,i=p(n,r),s=t>1?"/"+t:"";return"undefined"!=typeof e.action?a.default.createElement("a",{href:""+i+s,className:w("Button",{ButtonActive:t===e.activePage}),onClick:_(e.setPage,t)},t):a.default.createElement(A.Link,{to:""+i+s,className:w("Button",{ButtonActive:t===e.activePage}),onlyActiveOnIndex:!0},t)}return a.default.createElement("button",{className:w("Button",{ButtonActive:t===e.activePage}),onClick:_(e.setPage,t)},t)},m=function(t){var n=void 0,r=void 0,i=void 0,s=void 0;if("previous"===t?(n=e.activePage-1,r=n>=1,i="prev",s="ButtonArrowLeft"):(n=e.activePage+1,r=n<=e.pages,i="next",s="ButtonArrowRight"),!r)return a.default.createElement("div",null);if(o()){var u=e.location.pathname,l=e.params,c=p(u,l),f=n>1?n:"";return"undefined"!=typeof e.action?a.default.createElement("a",{href:c+"/"+f,className:w(["Button","ButtonArrow",s]),onClick:_(e.setPage,n),rel:i}):a.default.createElement(A.Link,{to:c+"/"+f,className:w(["Button","ButtonArrow",s]),onlyActiveOnIndex:!0,rel:i})}return a.default.createElement("button",{className:w(["Button","ButtonArrow",s]),onClick:_(e.setPage,n)})},v=[];if(!e.isMobile){for(var y=1;y<=e.pages;y++)(r(y)||n(y)||u(y)||l(y))&&v.push(a.default.createElement("li",{className:c.default.Item,key:"pagination-"+y},h(y))),!n(y)&&i(y)&&v.push(a.default.createElement("li",{className:c.default.Item,key:"pagination-dots-"+y},a.default.createElement("p",{className:w(["Button","ButtonDots"])},"...")));return a.default.createElement("div",{className:w("Pagination")},a.default.createElement("ul",{className:c.default.List},a.default.createElement("li",{className:c.default.Item},m("previous")),v,a.default.createElement("li",{className:c.default.Item},m("next"))))}return e.activePage>1&&v.push(a.default.createElement("li",{className:c.default.Item,key:"pagination-1"},h(1))),e.activePage>2&&e.pages>2&&v.push(a.default.createElement("li",{className:c.default.Item,key:"pagination-dots-"+(e.activePage-1)},a.default.createElement("p",{className:w(["Button","ButtonDots"])},"..."))),e.activePage<=e.pages&&e.activePage>=0&&v.push(a.default.createElement("li",{className:c.default.Item,key:"pagination-"+e.activePage},h(e.activePage))),e.activePage<e.pages-1&&v.push(a.default.createElement("li",{className:c.default.Item,key:"pagination-dots-"+(e.activePage+1)},a.default.createElement("p",{className:w(["Button","ButtonDots"])},"..."))),e.activePage<e.pages&&v.push(a.default.createElement("li",{className:c.default.Item,key:"pagination-"+e.pages},h(e.pages))),a.default.createElement("div",{className:w("Pagination","PaginationMobile")},a.default.createElement("ul",{className:c.default.List},a.default.createElement("li",{className:c.default.Item},m("previous")),v,a.default.createElement("li",{className:c.default.Item},m("next"))))});P.displayName="Pagination",P.propTypes={initialPage:i.PropTypes.number,activePage:i.PropTypes.number,pages:i.PropTypes.number,action:i.PropTypes.func,setActivePage:i.PropTypes.func,setPage:i.PropTypes.func},t.default=(0,g.default)(P),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Social=void 0;var o=n(1),i=r(o),a=n(374),s=n(1304),u=r(s),l=n(1301),c=r(l),f=t.Social=function(e){return e.type===a.SOCIAL_TYPE.LIVEBLOG?i.default.createElement(u.default,e):i.default.createElement(c.default,e)};f.displayName="Social"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SOCIAL_TYPE={LIVEBLOG:"liveblog",TWITTER:"twitter",FACEBOOK:"facebook",FB:"fb",INSTAGRAM:"instagram",PINTEREST:"pinterest",TIKTOK:"tiktok",
TELEGRAM:"telegram",DEFAULT:"default"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(4),u=n(91),l=r(u),c=n(2),f=r(c),d=n(46),p=n(9),h=n(202),m=r(h),v=n(265),y=r(v),g=n(377),b=n(139),A=r(b),w=n(76),_=r(w),E=function(e){var t,n=e.index,r=e.id,i=e.title,u=e.slug,l=e.typeWrap,c=e.type,h=e.subtype,v=e.teaserType,b=e.canonical,w=e.mainPhoto,E=e.isMobile,T=e.teaserConfig,x=e.section,P=e.placeholders,S=e.elementsAmount,C=e.alt,O=e.url,M=e.external,R=e.setTeaserRef,k=void 0===R?function(){}:R,I=e.shouldDisplay,L=void 0===I||I,N=e.setBoxRef,j=(0,g.getTagStyle)(T,!1),D={},F={},U="collectionrecord"===c?c.toString():null;return Object.keys(T.styles).forEach(function(e){D[_.default[e]]=!0,F["teaserTitle--"+e]=!0}),a.default.createElement("div",{className:(0,f.default)(_.default.wrap,D,_.default[l],_.default[v],(t={},o(t,_.default.mobile,E),o(t,_.default.desktop,!E),o(t,_.default.hidden,!L),t)),ref:k},a.default.createElement(p.Link,{id:r,to:O,title:i,type:c,slug:u,canonical:b,external:M,className:(0,f.default)(_.default.link),setBoxRef:N},a.default.createElement(A.default,{index:n,teaserType:v,mainPhoto:w,teaserConfig:T,isMobile:!1,placeholders:P,section:x,elementsAmount:S,icon:h===d.TYPE_GALLERY.sub.ranking&&y.default,alt:C}),a.default.createElement("div",{className:(0,f.default)(_.default.wrapTitle)},a.default.createElement("div",{className:(0,f.default)(_.default.title,{teaserBg:T.styles.isVertical})},a.default.createElement("div",{className:(0,f.default)(_.default.titleIn,_.default[U])},a.default.createElement(m.default,{tagName:T.tagName,className:(0,f.default)(_.default.titleTxt,F,{isMobile:E,desktop:!E})},i))))),a.default.createElement("div",{className:_.default.tag},a.default.createElement(s.Tag,{tags:[x],style:j})))};E.displayName="ChosenForYou",E.propTypes={id:i.PropTypes.string.isRequired,slug:i.PropTypes.string,type:i.PropTypes.string.isRequired,typeWrap:i.PropTypes.string.isRequired,teaserType:i.PropTypes.string,canonical:i.PropTypes.string,section:i.PropTypes.object.isRequired,title:i.PropTypes.string.isRequired,mainPhoto:i.PropTypes.object,teaserConfig:i.PropTypes.object,index:i.PropTypes.number.isRequired,placeholders:i.PropTypes.object.isRequired,elementsAmount:i.PropTypes.number,subtype:i.PropTypes.string,alt:i.PropTypes.string,url:i.PropTypes.string,external:i.PropTypes.bool},E.defaultTypes={elementsAmount:0,alt:""},E.defaultProps={section:{}},t.default=(0,l.default)(function(e,t){return e.id!==t.id||e.shouldDisplay!==t.shouldDisplay})(E),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),f=n(9),d=function(e){function t(){var e,n,r,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.setRef=function(e){e&&r.props.blockStat&&(e.isAdv=!0),"function"==typeof r.props.setBoxRef&&r.props.setBoxRef(e)},a=n,i(r,a)}return a(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.children,r=e.url,o=e.external,i=e.className,a=e.target,u=void 0===a||a,l=e.schemaName,d=e.nofollow,p=void 0!==d&&d;return o?u?c.default.createElement("a",s({href:r,className:i,title:t,target:"_blank",ref:this.setRef},l,{rel:p?"nofollow":null}),n):c.default.createElement("a",{href:r,className:i},n):c.default.createElement(f.Link,{to:r,className:i,title:t},n)}}]),t}(c.default.PureComponent);d.displayName="LinkExternal",d.propTypes={url:l.PropTypes.string,title:l.PropTypes.string,children:l.PropTypes.node,className:l.PropTypes.string,target:l.PropTypes.bool,blockStat:l.PropTypes.bool,setBoxRef:l.PropTypes.func},t.default=d,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){var n="",r=e.styles,o=r.isBig,i=r.isChosenForYou;return t?n="listing":(n=o?"listingBig":"listingSmall",i&&(n="listingThin")),n},r=function(e,t){var n=e.styles,r=n.isBig,o=n.isVertical,i=n.isLastSlide;return o||i||!t&&r},o=function(e){var t=e.styles,n=t.isBig,r=t.isVertical,o=t.isGlonews;return o&&!r&&!n};t.getTagStyle=n,t.isTeaserBg=r,t.isTeaserSmallGlonews=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(91),s=r(a),u=n(232),l=r(u),c=n(2),f=r(c),d=n(96),p=n(356),h=n(76),m=r(h),v=function(e){var t=e.teaserConfig,n=e.questionsCount,r=e.quizType,o=t.styles.isBig,a=o&&(t.quizStartText||"Rozpocznij "+d.DEKLINATED_LABEL[r].toLowerCase())||"";return i.default.createElement("div",null,o&&a&&i.default.createElement("div",{className:(0,f.default)(m.default.btnBeginQuiz)},a),o&&n&&i.default.createElement("div",{className:(0,f.default)(m.default.wrapHowManyQuestions)},n+" "+(0,p.pluralize)(n,["pytanie","pytania","pytań"])))};v.displayName="Quiz",v.propTypes={teaserConfig:o.PropTypes.object.isRequired,quizType:o.PropTypes.string,questionsCount:o.PropTypes.number},v.defaultTypes={questionsCount:0},t.default=(0,s.default)(function(e,t){return!(0,l.default)(e,t)})(v),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),f=n(44),d=r(f),p=n(2),h=r(p),m=n(21),v=n(594),y=r(v),g=n(597),b=r(g),A=n(184),w=r(A),_=function(e){function t(){var e,n,r,o;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.description=function(e){return"“"+e.slice(0,3).map(function(e){return e.title}).join("”, “")+"”"},o=n,a(r,o)}return s(t,e),u(t,[{key:"renderMeta",value:function(){var e=this.props.addDescription;if(!e)return null;var t=this.context.config.descriptions,n=[{name:"description",content:t&&t[this.props.id]||this.description(this.props.items)}];return c.default.createElement(d.default,{meta:n})}},{key:"render",value:function(){var e,t=this;if(0===this.props.items.length)return c.default.createElement("div",null);var n=this.props,r=n.title,i=n.customStyle,a=n.stArea,s=n.isSpecial,u=this.context.mobile,l=s?this.props.config.background||this.context.config.sectionsColor:void 0,f=s?{backgroundColor:l}:void 0,d=(0,m.replaceSectionName)(this.props.sectionKey||this.props.id);return c.default.createElement("div",{ref:function(e){t.wrapper=e},className:(0,h.default)("teasersListing",i,w.default.wrap,w.default[i],(e={},o(e,w.default.desktop,!u),o(e,"teasersSpecial",s),o(e,w.default.special,s),e)),style:f},c.default.createElement(m.WpjslibRegisterContainer,{id:d,length:this.props.limit||this.props.items.length||1},c.default.createElement("div",{className:w.default.wrapIn},c.default.createElement(b.default,{title:r,customStyle:i,isMobile:u}),c.default.createElement("div",{className:(0,h.default)(w.default.teasers,"teaserColor"),"data-st-area":a},c.default.createElement("div",{className:w.default.teasersContainer},this.renderItems())))))}}]),t}(y.default);_.propTypes={id:l.PropTypes.string.isRequired,sectionKey:l.PropTypes.string,items:l.PropTypes.arrayOf(l.PropTypes.object).isRequired,title:l.PropTypes.string,limit:l.PropTypes.number,config:l.PropTypes.object,stArea:l.PropTypes.string,customStyle:l.PropTypes.string,addDescription:l.PropTypes.bool,isSpecial:l.PropTypes.bool,isLoadMore:l.PropTypes.bool,loadMore:l.PropTypes.func,hTagName:l.PropTypes.string,isMobile:l.PropTypes.bool.isRequired},_.contextTypes={mobile:l.PropTypes.bool.isRequired,location:l.PropTypes.object.isRequired,config:l.PropTypes.object.isRequired},_.defaultProps={limit:0,config:{},customStyle:"",isSpecial:!1,isLoadMore:!1,isMobile:!1,addDescription:!1},t.default=_,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeMaterial=t.normalizeMaterials=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(783),a=new i.Schema("material"),s=new i.Schema("tag");a.define({tags:(0,i.arrayOf)(s)});t.normalizeMaterials=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"items",n=(0,i.normalize)(e,r({},t,(0,i.arrayOf)(a))),s=n.entities,u=n.result;return o({},u,{materials:s.material,tags:s.tag})},t.normalizeMaterial=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data",s=(0,i.normalize)(e,r({},n,a)),u=s.entities,l=s.result;return o({},l,(t={},r(t,n,u.material[l[n]]),r(t,"tags",u.tag),t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeasersListingCache=t.validateTeasersListingCache=t.validateFirstResponseTimestamp=t.findTeasersListingCache=t.adaptMaterial=t.prepareOffsetByPageNumber=t.isValidRecordsResponse=t.setPayloadRecordsParam=t.setPayloadSchemaOption=t.setPayloadVariable=t.isValidOption=t.getOptionValue=t.getOptionModel=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1364),i=n(45),a=(t.getOptionModel=function(e){return o.QueryOptionsModel[e]||null},t.getOptionValue=function(e,t){return"undefined"!=typeof t[e]?t[e]:null},t.isValidOption=function(e,t){return null!==e&&null!==t},t.setPayloadVariable=function(e,t,n){e.variables[t]=n},t.setPayloadSchemaOption=function(e,t,n){var r="$"+n+": "+t.type;e.schema.push(r)},t.setPayloadRecordsParam=function(e,t,n){t.asRecordsParam&&e.params.push(t.name+": $"+n)},t.isValidRecordsResponse=function(e){return e&&e.collections&&e.collections.records&&e.collections.records.edges&&e.collections.records.edges.length},t.prepareOffsetByPageNumber=function(e){var t=parseInt(e),n=!isNaN(t)&&t>1;return n?(t-1)*i.PAGINATION.FIRST:0},t.adaptMaterial=function(e){var t=e.records,n=e.pageIndex,o=e.teasersPerPage;return t.edges.map(function(e,t){return{authors:e.node.authors.map(function(e){return e.image?r({},e,{photo:e.image.url}):e}),canonical:e.node.canonicalUrl,external:!1,nonIndexable:e.node.nonIndexable,id:e.node.id,lead:e.node.lead,mainPhoto:e.node.image,published:e.node.published,publishedInProducts:e.node.sources||[],section:e.node.tags.filter(function(e){return"category"===e.taxonomy})[0]||null,slug:e.node.slug,sources:e.node.sources||[],sponsored:e.node.sponsored,tags:e.node.tags.filter(function(e){return"tag"===e.taxonomy}),teaserType:"video"===e.node.type.toLowerCase()?"wideo":e.node.type.toLowerCase(),title:e.node.name,type:e.node.type,subtype:e.node.subtype,paginationIndex:parseInt(n)*o+t}})},t.findTeasersListingCache=function(e){var t=e.state,n=e.name,r=e.page;return t[n]&&t[n][r]&&t[n][r].length}),s=t.validateFirstResponseTimestamp=function(e){var t=e.timestamp;return Date.now()-t<=6e4},u=t.validateTeasersListingCache=function(e){var t=e.getState,n=e.name,r=e.page,o=t().teasersListing||{};return a({state:o,name:n,page:r})};t.getTeasersListingCache=function(e){var t=e.getState,n=e.name,r=e.page,o=e.timestamp;return s({timestamp:o})&&u({getState:t,name:n,page:r})}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.reducers=t.containers=t.api=t.actions=void 0;var o=n(70),i=r(o),a=n(574),s=r(a),u=n(122),l=r(u),c=n(1373),f=r(c);t.actions=i,t.api=s,t.containers=l,t.reducers=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(8),u=n(2),l=r(u),c=n(272),f=n(2254),d=r(f),p=n(1943),h=r(p),m=function(){return a.default.createElement("div",{className:h.default.wrapIn},a.default.createElement("div",{className:h.default.icon},a.default.createElement(s.Icon,{data:d.default})),a.default.createElement("strong",{className:h.default.amount},"Wyślij"))},v=function(e){var t=e.style,n=e.onSend,r=e.getSendUrl,i=e.mobile;return"article-bottom"===t?a.default.createElement("div",{onClick:n,className:h.default.messengerIcon},a.default.createElement(s.Icon,{data:d.default,height:16,width:16})):i?a.default.createElement("a",{href:r(),className:(0,l.default)(h.default.wrap,h.default[t],o({},h.default.desktop,!i))},a.default.createElement(m,null)):a.default.createElement("div",{onClick:n,className:(0,l.default)(h.default.wrap,h.default[t],o({},h.default.desktop,!i))},a.default.createElement(m,null))};v.displayName="FbSend",v.propTypes={style:i.PropTypes.string,onSend:i.PropTypes.func.isRequired,getSendUrl:i.PropTypes.func.isRequired},t.default=(0,c.FbWrapper)(v),e.exports=t.default},function(e,t,n){"use strict";var r=n(427),o=n(428),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||r.call(a,i),u=o("%Object.getOwnPropertyDescriptor%",!0),l=o("%Object.defineProperty%",!0),c=o("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}e.exports=function(e){var t=s(r,a,arguments);if(u&&l){var n=u(t,"length");n.configurable&&l(t,"length",{value:1+c(0,e.length-(arguments.length-1))})}return t};var f=function(){return s(r,i,arguments)};l?l(e.exports,"apply",{value:f}):e.exports.apply=f},function(e,t,n){"use strict";var r=n(284)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){"use strict";var r=n(41),o=n(150),i=n(34);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,l=void 0===u?n:o(u,n);l>s;)t[s++]=e;return t}},function(e,t,n){var r=n(1459);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(40),o=n(147);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var r=n(22),o=n(14).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(33)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(14).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(22),o=n(402).set;e.exports=function(e,t,n){var i,a=t.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(e,i),e}},function(e,t,n){var r=n(180),o=n(33)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){"use strict";var r=n(144),o=n(147),i=n(181),a={};n(64)(a,n(33)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(125),o=n(3),i=n(65),a=n(64),s=n(180),u=n(395),l=n(181),c=n(74),f=n(33)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",h="keys",m="values",v=function(){return this};e.exports=function(e,t,n,y,g,b,A){u(n,t,y);var w,_,E,T=function(e){if(!d&&e in C)return C[e];switch(e){case h:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",P=g==m,S=!1,C=e.prototype,O=C[f]||C[p]||g&&C[g],M=O||T(g),R=g?P?T("entries"):M:void 0,k="Array"==t?C.entries||O:O;if(k&&(E=c(k.call(new e)),E!==Object.prototype&&E.next&&(l(E,x,!0),r||"function"==typeof E[f]||a(E,f,v))),P&&O&&O.name!==m&&(S=!0,M=function(){return O.call(this)}),r&&!A||!d&&!S&&C[f]||a(C,f,M),s[t]=M,s[x]=v,g)if(w={values:P?M:T(m),keys:b?M:T(h),entries:R},A)for(_ in w)_ in C||i(C,_,w[_]);else o(o.P+o.F*(d||S),t,w);return w}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){var r=n(14),o=n(407).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(84)(a);e.exports=function(){var e,t,n,l=function(){var r,o;for(u&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(l)}}else n=function(){o.call(r,l)};else{var f=!0,d=document.createTextNode("");new i(l).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=o(t),this.reject=o(n)}var o=n(57);e.exports.f=function(e){return new r(e)}},function(e,t,n){"use strict";var r=n(210),o=RegExp.prototype.exec,i=String.prototype.replace,a=o,s="lastIndex",u=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[s]||0!==t[s]}(),l=void 0!==/()??/.exec("")[1],c=u||l;c&&(a=function(e){var t,n,a,c,f=this;return l&&(n=new RegExp("^"+f.source+"$(?!\\s)",r.call(f))),u&&(t=f[s]),a=o.call(f,e),u&&a&&(f[s]=f.global?a.index+a[0].length:t),l&&a&&a.length>1&&i.call(a[0],n,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)}),a}),e.exports=a},function(e,t,n){var r=n(22),o=n(11),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(86)(Function.call,n(73).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){var r=n(213)("keys"),o=n(151);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(277),o=n(98);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){"use strict";var r=n(88),o=n(98);e.exports=function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r,o,i,a=n(86),s=n(636),u=n(392),l=n(389),c=n(14),f=c.process,d=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,m=c.Dispatch,v=0,y={},g="onreadystatechange",b=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},A=function(e){b.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete y[e]},"process"==n(84)(f)?r=function(e){f.nextTick(a(b,e,1))}:m&&m.now?r=function(e){m.now(a(b,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=A,r=a(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",A,!1)):r=g in l("script")?function(e){u.appendChild(l("script"))[g]=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:d,clear:p}},function(e,t,n){"use strict";function r(e,t,n){var r,o,i,a=new Array(n),s=8*n-t-1,u=(1<<s)-1,l=u>>1,c=23===t?z(2,-24)-z(2,-77):0,f=0,d=e<0||0===e&&1/e<0?1:0;for(e=B(e),e!=e||e===F?(o=e!=e?1:0,r=u):(r=H(V(e)/q),e*(i=z(2,-r))<1&&(r--,i*=2),e+=r+l>=1?c/i:c*z(2,1-l),e*i>=2&&(r++,i/=2),r+l>=u?(o=0,r=u):r+l>=1?(o=(e*i-1)*z(2,t),r+=l):(o=e*z(2,l-1)*z(2,t),r=0));t>=8;a[f++]=255&o,o/=256,t-=8);for(r=r<<t|o,s+=t;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*d,a}function o(e,t,n){var r,o=8*n-t-1,i=(1<<o)-1,a=i>>1,s=o-7,u=n-1,l=e[u--],c=127&l;for(l>>=7;s>0;c=256*c+e[u],u--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=t;s>0;r=256*r+e[u],u--,s-=8);if(0===c)c=1-a;else{if(c===i)return r?NaN:l?-F:F;r+=z(2,t),c-=a}return(l?-1:1)*r*z(2,c-t)}function i(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function a(e){return[255&e]}function s(e){return[255&e,e>>8&255]}function u(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function l(e){return r(e,52,8)}function c(e){return r(e,23,4)}function f(e,t,n){P(e[R],t,{get:function(){return this[n]}})}function d(e,t,n,r){var o=+n,i=T(o);if(i+t>e[Q])throw D(I);var a=e[Y]._b,s=i+e[K],u=a.slice(s,s+t);return r?u:u.reverse()}function p(e,t,n,r,o,i){var a=+n,s=T(a);if(s+t>e[Q])throw D(I);for(var u=e[Y]._b,l=s+e[K],c=r(+o),f=0;f<t;f++)u[l+f]=c[i?f:t-f-1]}var h=n(14),m=n(36),v=n(125),y=n(285),g=n(64),b=n(148),A=n(20),w=n(142),_=n(88),E=n(34),T=n(655),x=n(145).f,P=n(40).f,S=n(386),C=n(181),O="ArrayBuffer",M="DataView",R="prototype",k="Wrong length!",I="Wrong index!",L=h[O],N=h[M],j=h.Math,D=h.RangeError,F=h.Infinity,U=L,B=j.abs,z=j.pow,H=j.floor,V=j.log,q=j.LN2,G="buffer",W="byteLength",X="byteOffset",Y=m?"_b":G,Q=m?"_l":W,K=m?"_o":X;if(y.ABV){if(!A(function(){L(1)})||!A(function(){new L(-1)})||A(function(){return new L,new L(1.5),new L(NaN),L.name!=O})){L=function(e){return w(this,L),new U(T(e))};for(var Z,J=L[R]=U[R],$=x(U),ee=0;$.length>ee;)(Z=$[ee++])in L||g(L,Z,U[Z]);v||(J.constructor=L)}var te=new N(new L(2)),ne=N[R].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||b(N[R],{setInt8:function(e,t){ne.call(this,e,t<<24>>24)},setUint8:function(e,t){ne.call(this,e,t<<24>>24)}},!0)}else L=function(e){w(this,L,O);var t=T(e);this._b=S.call(new Array(t),0),this[Q]=t},N=function(e,t,n){w(this,N,M),w(e,L,M);var r=e[Q],o=_(t);if(o<0||o>r)throw D("Wrong offset!");if(n=void 0===n?r-o:E(n),o+n>r)throw D(k);this[Y]=e,this[K]=o,this[Q]=n},m&&(f(L,W,"_l"),f(N,G,"_b"),f(N,W,"_l"),f(N,X,"_o")),b(N[R],{getInt8:function(e){return d(this,1,e)[0]<<24>>24},getUint8:function(e){return d(this,1,e)[0]},getInt16:function(e){var t=d(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=d(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return i(d(this,4,e,arguments[1]))},getUint32:function(e){return i(d(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return o(d(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return o(d(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){p(this,1,e,a,t)},setUint8:function(e,t){p(this,1,e,a,t)},setInt16:function(e,t){p(this,2,e,s,t,arguments[2])},setUint16:function(e,t){p(this,2,e,s,t,arguments[2])},setInt32:function(e,t){p(this,4,e,u,t,arguments[2])},setUint32:function(e,t){p(this,4,e,u,t,arguments[2])},setFloat32:function(e,t){p(this,4,e,c,t,arguments[2])},setFloat64:function(e,t){p(this,8,e,l,t,arguments[2])}});C(L,O),C(N,M),g(N[R],y.VIEW,!0),t[O]=L,t[M]=N},function(e,t,n){var r=n(14),o=n(85),i=n(125),a=n(656),s=n(40).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(179),o=n(33)("iterator"),i=n(180);e.exports=n(85).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){"use strict";var r=n(124),o=n(639),i=n(180),a=n(75);e.exports=n(396)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t,n){function r(e,t){var n=Number(t),r=7*n;return o(e,r)}var o=n(216);e.exports=r},function(e,t,n){function r(e,t){var n=o(e),r=n.getTime(),i=o(t),a=i.getTime();return r>a?-1:r<a?1:0}var o=n(6);e.exports=r},function(e,t,n){function r(e,t){var n=o(e),r=o(t),s=a(n,r),u=Math.abs(i(n,r));n.setMonth(n.getMonth()-s*u);var l=a(n,r)===-s;return s*(u-l)}var o=n(6),i=n(669),a=n(218);e.exports=r},function(e,t,n){function r(e,t){var n=o(e,t)/1e3;return n>0?Math.floor(n):Math.ceil(n)}var o=n(289);e.exports=r},function(e,t,n){function r(e){var t=o(e);return t.setHours(23,59,59,999),t}var o=n(6);e.exports=r},function(e,t,n){function r(e){var t=o(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}var o=n(6);e.exports=r},function(e,t,n){function r(e){var t=o(e),n=i(t).getTime()-a(t).getTime();return Math.round(n/s)+1}var o=n(6),i=n(155),a=n(219),s=6048e5;e.exports=r},function(e,t){function n(e){return e instanceof Date}e.exports=n},function(e,t,n){function r(e,t,n){var r=o(e,n),i=o(t,n);return r.getTime()===i.getTime()}var o=n(290);e.exports=r},function(e,t,n){var r=n(1736),o=n(1737);e.exports={distanceInWords:r(),format:o()}},function(e,t){e.exports={wrapper:"i2x6c3_T",isMobile:"i3T2UOhH",wrapperInner:"iWuJQs2u",text:"i2gn-xuV",subTitle:"i77DZgTF",iframe:"i1ngikt2",mainParagraph:"i3qOlmB7",desktop:"i1OHj7YY",asideLeft:"i3vGZiZY",sideCenter:"i2vZliC9",sideCenterHolder:"i3f84zYr",asideRight:"icj6ClhR",rightSlotWrapper:"i2EhSZxx",rightSlotHolder:"i2Ck2t3X",short:"i2ZVDYRx",list:"i2PDazPC",mobile:"i2wcpZY4"}},function(e,t){e.exports={tabsHeader:"i27GW-UM",sticky:"i1EEN3yO",mainHeaderFixed:"i3RVVULg",tabHeader:"i3WdvoRN",isActive:"i1EUNLCq",tab:"i3mnaveC",tabs:"i3QNz1XN"}},function(e,t){e.exports={wrap:"iFQN8OU2",inCollection:"ihBtIJCF",desktop:"iYwaUr3X",happens:"i21vc1mc"}},function(e,t){e.exports={wrap:"i2x8vyoZ",inCollection:"iQXlvh8d",figure:"i3Rv_ZbE",img:"i3nJhrGE",title:"i3e2pqSB",icon:"i1PLOi3u",gallery:"i3QZpm0Z",wideo:"i2NpwaL8",desktop:"i15Zj6Id",txt:"i1PAU4e4"}},function(e,t){e.exports={wrap:"i3Xw7shO",mobileWrap:"i23eefDA",sideCenterPlayer:"i2-WMjDs",asideRight:"iPs0uenq",title:"i3eKhnyS",interviewee:"i2BzJGdi",lead:"i3iJTJ6k",button:"i2Ma6dw_",lightButton:"i3B4X1fr",mobileVideo:"i22A_VCH",mobileAuthorDate:"i15fjF8O",desktop:"i1jQnOhQ",noIntroBar:"i1Al8Om1",inCollection:"iEJt7vBa",information:"i2q4tcpr",transcriptionExpanded:"i3P_iYS8",transcriptionCollapsed:"i2u0HiQx",transcriptionExpandedContent:"i1FLOsCE",transcriptionHidden:"i3Hx12L-",transcriptionHeader:"i2sRWlvJ",expandTranscriptionButton:"i1nV8Xew",transcriptionHiddenButton:"iHLNBIr1",transcriptionExpandedButton:"i1vgZG5y",shortLead:"i18Oyg8D",noTranscription:"i3dc1zHa",thumbHorizontal:"ivV74nwF",thumbVertical:"i3aSek3J"}},function(e,t,n){"use strict";var r=n(1974);e.exports=Function.prototype.bind||r},function(e,t,n){"use strict";var r,o=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(e){u=null}var l=function(){throw new a},c=u?function(){try{return arguments.callee,l}catch(e){try{return u(arguments,"callee").get}catch(e){return l}}}():l,f=n(1978)(),d=n(1977)(),p=Object.getPrototypeOf||(d?function(e){return e.__proto__}:null),h={},m="undefined"!=typeof Uint8Array&&p?p(Uint8Array):r,v={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":f&&p?p([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f&&p?p(p([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f&&p?p((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f&&p?p((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f&&p?p(""[Symbol.iterator]()):r,"%Symbol%":f?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":c,"%TypedArray%":m,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(p)try{null.error}catch(e){var y=p(p(e));v["%Error.prototype%"]=y}var g=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){
var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&p&&(n=p(o.prototype))}return v[t]=n,n},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},A=n(427),w=n(1979),_=A.call(Function.call,Array.prototype.concat),E=A.call(Function.apply,Array.prototype.splice),T=A.call(Function.call,String.prototype.replace),x=A.call(Function.call,String.prototype.slice),P=A.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,O=function(e){var t=x(e,0,1),n=x(e,-1);if("%"===t&&"%"!==n)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var r=[];return T(e,S,function(e,t,n,o){r[r.length]=n?T(o,C,"$1"):t||e}),r},M=function(e,t){var n,r=e;if(w(b,r)&&(n=b[r],r="%"+n[0]+"%"),w(v,r)){var i=v[r];if(i===h&&(i=g(r)),"undefined"==typeof i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===P(/^%?[^%]*%?$/,e))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=O(e),i=n.length>0?n[0]:"",s=M("%"+i+"%",t),l=s.name,c=s.value,f=!1,d=s.alias;d&&(i=d[0],E(n,_([0,1],d)));for(var p=1,h=!0;p<n.length;p+=1){var m=n[p],y=x(m,0,1),g=x(m,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new o("property names with quotes must have matching quotes");if("constructor"!==m&&h||(f=!0),i+="."+m,l="%"+i+"%",w(v,l))c=v[l];else if(null!=c){if(!(m in c)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return void r}if(u&&p+1>=n.length){var b=u(c,m);h=!!b,c=h&&"get"in b&&!("originalValue"in b.get)?b.get:c[m]}else h=w(c,m),c=c[m];h&&!f&&(v[l]=c)}}return c}},function(e,t,n){"use strict";var r=n(721);e.exports=function(){return r()&&!!Symbol.toStringTag}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return"string"==typeof e&&"/"===e.charAt(0)}function i(){var e=y.getHashPath();return!!o(e)||(y.replaceHashPath("/"+e),!1)}function a(e,t,n){return e+(e.indexOf("?")===-1?"?":"&")+(t+"="+n)}function s(e,t){return e.replace(new RegExp("[?&]?"+t+"=[a-zA-Z0-9]+"),"")}function u(e,t){var n=e.match(new RegExp("\\?.*?\\b"+t+"=(.+?)\\b"));return n&&n[1]}function l(){function e(){var e=y.getHashPath(),t=void 0,n=void 0;S?(t=u(e,S),e=s(e,S),t?n=g.readState(t):(n=null,t=C.createKey(),y.replaceHashPath(a(e,S,t)))):t=n=null;var r=m.parsePath(e);return C.createLocation(c({},r,{state:n}),void 0,t)}function t(t){function n(){i()&&r(e())}var r=t.transitionTo;return i(),y.addEventListener(window,"hashchange",n),function(){y.removeEventListener(window,"hashchange",n)}}function n(e){var t=e.basename,n=e.pathname,r=e.search,o=e.state,i=e.action,s=e.key;if(i!==h.POP){var u=(t||"")+n+r;S?(u=a(u,S,s),g.saveState(s,o)):e.key=e.state=null;var l=y.getHashPath();i===h.PUSH?l!==u&&(window.location.hash=u):l!==u&&y.replaceHashPath(u)}}function r(e){1===++O&&(M=t(C));var n=C.listenBefore(e);return function(){n(),0===--O&&M()}}function o(e){1===++O&&(M=t(C));var n=C.listen(e);return function(){n(),0===--O&&M()}}function l(e){C.push(e)}function f(e){C.replace(e)}function d(e){C.go(e)}function b(e){return"#"+C.createHref(e)}function _(e){1===++O&&(M=t(C)),C.registerTransitionHook(e)}function E(e){C.unregisterTransitionHook(e),0===--O&&M()}function T(e,t){C.pushState(e,t)}function x(e,t){C.replaceState(e,t)}var P=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];v.canUseDOM?void 0:p.default(!1);var S=P.queryKey;(void 0===S||S)&&(S="string"==typeof S?S:w);var C=A.default(c({},P,{getCurrentLocation:e,finishTransition:n,saveState:g.saveState})),O=0,M=void 0;y.supportsGoWithoutReloadUsingHash();return c({},C,{listenBefore:r,listen:o,push:l,replace:f,go:d,createHref:b,registerTransitionHook:_,unregisterTransitionHook:E,pushState:T,replaceState:x})}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=n(80),d=(r(f),n(48)),p=r(d),h=n(160),m=n(161),v=n(223),y=n(294),g=n(722),b=n(724),A=r(b),w="_k";t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=e(t,n);e.length<2&&n(r)}t.__esModule=!0;var i=n(80);r(i);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){function t(){if(!w){if(null==A&&s.canUseDOM){var e=document.getElementsByTagName("base")[0],t=e&&e.getAttribute("href");null!=t&&(A=t)}w=!0}}function n(e){return t(),A&&null==e.basename&&(0===e.pathname.indexOf(A)?(e.pathname=e.pathname.substring(A.length),e.basename=A,""===e.pathname&&(e.pathname="/")):e.basename=""),e}function r(e){if(t(),!A)return e;"string"==typeof e&&(e=u.parsePath(e));var n=e.pathname,r="/"===A.slice(-1)?A:A+"/",o="/"===n.charAt(0)?n.slice(1):n,a=r+o;return i({},e,{pathname:a})}function o(e){return b.listenBefore(function(t,r){c.default(e,n(t),r)})}function a(e){return b.listen(function(t){e(n(t))})}function l(e){b.push(r(e))}function f(e){b.replace(r(e))}function p(e){return b.createPath(r(e))}function h(e){return b.createHref(r(e))}function m(e){for(var t=arguments.length,o=Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n(b.createLocation.apply(b,[r(e)].concat(o)))}function v(e,t){"string"==typeof t&&(t=u.parsePath(t)),l(i({state:e},t))}function y(e,t){"string"==typeof t&&(t=u.parsePath(t)),f(i({state:e},t))}var g=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=e(g),A=g.basename,w=!1;return i({},b,{listenBefore:o,listen:a,push:l,replace:f,createPath:p,createHref:h,createLocation:m,pushState:d.default(v,"pushState is deprecated; use push instead"),replaceState:d.default(y,"replaceState is deprecated; use replace instead")})}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(80),s=(r(a),n(223)),u=n(161),l=n(431),c=r(l),f=n(162),d=r(f);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return i.isMemo(e)?l:c[e.$$typeof]||a}function o(e,t,n){if("string"!=typeof t){if(v){var i=m(t);i&&i!==v&&o(e,i,n)}var a=d(t);p&&(a=a.concat(p(t)));for(var u=r(e),l=r(t),c=0;c<a.length;++c){var y=a[c];if(!(s[y]||n&&n[y]||l&&l[y]||u&&u[y])){var g=h(t,y);try{f(e,y,g)}catch(e){}}}}return e}var i=n(2340),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},u={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};c[i.ForwardRef]=u,c[i.Memo]=l;var f=Object.defineProperty,d=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,v=Object.prototype;e.exports=o},,,,,,,,function(e,t,n){var r=n(166),o=n(104),i=r(o,"Map");e.exports=i},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(2138),i=n(2139),a=n(2140),s=n(2141),u=n(2142);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e){var t=this.__data__=new o(e);this.size=t.size}var o=n(299),i=n(2155),a=n(2156),s=n(2157),u=n(2158),l=n(2159);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=l,e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}e.exports=n},function(e,t,n){function r(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(762);e.exports=r},function(e,t,n){function r(e,t,n,a,s){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!==e&&t!==t:o(e,t,n,a,r,s))}var o=n(2076),i=n(128);e.exports=r},function(e,t){function n(e,t){var n=typeof e;return t=null==t?r:t,!!t&&("number"==n||"symbol"!=n&&o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?i(n)&&a(t,n.length):"string"==r&&t in n)&&o(n[t],e)}var o=n(229),i=n(112),a=n(448),s=n(78);e.exports=r},function(e,t,n){function r(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(s.test(e)||!a.test(e)||null!=t&&e in Object(t))}var o=n(42),i=n(234),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){function r(e){return"string"==typeof e||!i(e)&&a(e)&&o(e)==s}var o=n(165),i=n(42),a=n(128),s="[object String]";e.exports=r},function(e,t,n){"use strict";function r(e,t){function n(e){return u.some(function(t){return t.test(e)})}function r(e){return s.some(function(t){return t.test(e)})}void 0===t&&(t={lowerCaseTagName:!1,comment:!1});var o,i=t.blockTextElements||{script:!0,noscript:!0,style:!0,pre:!0},a=Object.keys(i),s=a.map(function(e){return new RegExp(e,"i")}),u=a.filter(function(e){return i[e]}).map(function(e){return new RegExp(e,"i")}),l=new y(null,{}),f=l,h=[l],m=-1;e="<"+E+">"+e+"</"+E+">";for(var v=function(){if(m>-1&&m+o[0].length<g.lastIndex){var i=e.substring(m,g.lastIndex-o[0].length);f.appendChild(new c.default(i))}if(m=g.lastIndex,o[2]===E)return"continue";if("!"===o[0][1]){if(t.comment){var i=e.substring(m-3,m-o[0].length+4);f.appendChild(new p.default(i))}return"continue"}if(t.lowerCaseTagName&&(o[2]=o[2].toLowerCase()),!o[1]){for(var a={},s=void 0;s=b.exec(o[3]);)a[s[2].toLowerCase()]=s[4]||s[5]||s[6];var u=f.rawTagName;if(!o[4]&&w[u]&&w[u][o[2]]&&(h.pop(),f=d.default(h)),f=f.appendChild(new y(o[2],a,o[3])),h.push(f),r(o[2])){var l="</"+o[2]+">",v=function(){return t.lowerCaseTagName?e.toLocaleLowerCase().indexOf(l,g.lastIndex):e.indexOf(l,g.lastIndex)}();if(n(o[2])){var i=void 0;i=v===-1?e.substr(g.lastIndex):e.substring(g.lastIndex,v),i.length>0&&f.appendChild(new c.default(i))}v===-1?m=g.lastIndex=e.length+1:(m=g.lastIndex=v+l.length,o[1]="true")}}if(o[1]||o[4]||A[o[2]])for(;;){if(f.rawTagName===o[2]){h.pop(),f=d.default(h);break}var u=f.tagName;{if(!_[u]||!_[u][o[2]])break;h.pop(),f=d.default(h)}}};o=g.exec(e);)v();return h}var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.base_parse=void 0;var s=a(n(1981)),u=a(n(309)),l=a(n(310)),c=a(n(780)),f=a(n(2194)),d=a(n(777)),p=a(n(779)),h=a(n(781)),m=s.default.decode,v=new Map;v.set("DIV",!0),v.set("div",!0),v.set("P",!0),v.set("p",!0),v.set("LI",!0),v.set("li",!0),v.set("TD",!0),v.set("td",!0),v.set("SECTION",!0),v.set("section",!0),v.set("BR",!0),v.set("br",!0);var y=function(e){function t(t,n,r,o){void 0===r&&(r=""),void 0===o&&(o=null);var i=e.call(this)||this;if(i.rawAttrs=r,i.parentNode=o,i.classNames=[],i.nodeType=l.default.ELEMENT_NODE,i.rawTagName=t,i.rawAttrs=r||"",i.childNodes=[],n.id&&(i.id=n.id,r||(i.rawAttrs='id="'+n.id+'"')),n.class&&(i.classNames=n.class.split(/\s+/),!r)){var a='class="'+i.classNames.join(" ")+'"';i.rawAttrs?i.rawAttrs+=" "+a:i.rawAttrs=a}return i}return o(t,e),t.prototype.remove=function(){var e=this;if(this.parentNode){var t=this.parentNode.childNodes;this.parentNode.childNodes=t.filter(function(t){return e!==t})}},t.prototype.removeChild=function(e){this.childNodes=this.childNodes.filter(function(t){return t!==e})},t.prototype.exchangeChild=function(e,t){var n=this.childNodes;this.childNodes=n.map(function(n){return n===e?t:n})},Object.defineProperty(t.prototype,"tagName",{get:function(){return this.rawTagName?this.rawTagName.toUpperCase():this.rawTagName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawText",{get:function(){return this.childNodes.reduce(function(e,t){return e+=t.rawText},"")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.rawText},set:function(e){var t=[new c.default(e)];this.childNodes=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return m(this.rawText)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"structuredText",{get:function(){function e(r){if(r.nodeType===l.default.ELEMENT_NODE)v.get(r.rawTagName)?(t.length>0&&n.push(t=[]),r.childNodes.forEach(e),t.length>0&&n.push(t=[])):r.childNodes.forEach(e);else if(r.nodeType===l.default.TEXT_NODE)if(r.isWhitespace)t.prependWhitespace=!0;else{var o=r.text;t.prependWhitespace&&(o=" "+o,t.prependWhitespace=!1),t.push(o)}}var t=[],n=[t];return e(this),n.map(function(e){return e.join("").trim().replace(/\s{2,}/g," ")}).join("\n").replace(/\s+$/,"")},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var e=this.rawTagName;if(e){var t=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/i.test(e),n=this.rawAttrs?" "+this.rawAttrs:"";return t?"<"+e+n+">":"<"+e+n+">"+this.innerHTML+"</"+e+">"}return this.innerHTML},Object.defineProperty(t.prototype,"innerHTML",{get:function(){return this.childNodes.map(function(e){return e.toString()}).join("")},enumerable:!1,configurable:!0}),t.prototype.set_content=function(e,t){if(void 0===t&&(t={}),e instanceof u.default)e=[e];else if("string"==typeof e){var n=h.default(e,t);e=n.childNodes.length?n.childNodes:[new c.default(e)]}this.childNodes=e},Object.defineProperty(t.prototype,"outerHTML",{get:function(){return this.toString()},enumerable:!1,configurable:!0}),t.prototype.trimRight=function(e){for(var t=0;t<this.childNodes.length;t++){var n=this.childNodes[t];if(n.nodeType===l.default.ELEMENT_NODE)n.trimRight(e);else{var r=n.rawText.search(e);r>-1&&(n.rawText=n.rawText.substr(0,r),this.childNodes.length=t+1)}}return this},Object.defineProperty(t.prototype,"structure",{get:function(){function e(e){n.push("  ".repeat(r)+e)}function t(n){var o=n.id?"#"+n.id:"",i=n.classNames.length?"."+n.classNames.join("."):"";e(""+n.rawTagName+o+i),r++,n.childNodes.forEach(function(n){n.nodeType===l.default.ELEMENT_NODE?t(n):n.nodeType===l.default.TEXT_NODE&&(n.isWhitespace||e("#text"))}),r--}var n=[],r=0;return t(this),n.join("\n")},enumerable:!1,configurable:!0}),t.prototype.removeWhitespace=function(){var e=this,t=0;return this.childNodes.forEach(function(n){if(n.nodeType===l.default.TEXT_NODE){if(n.isWhitespace)return;n.rawText=n.rawText.trim()}else n.nodeType===l.default.ELEMENT_NODE&&n.removeWhitespace();e.childNodes[t++]=n}),this.childNodes.length=t,this},t.prototype.querySelectorAll=function(e){var t,n=this;if(e instanceof f.default)t=e,t.reset();else{if(e.includes(",")){var r=e.split(",");return Array.from(r.reduce(function(e,t){var r=n.querySelectorAll(t.trim());return r.reduce(function(e,t){return e.add(t)},e)},new Set))}t=new f.default(e)}var o=[];return this.childNodes.reduce(function(n,r){for(o.push([r,0,!1]);o.length;){var i=d.default(o),a=i[0];if(0===i[1]){if(a.nodeType!==l.default.ELEMENT_NODE){o.pop();continue}var s=a;if(i[2]=t.advance(s),i[2]&&t.matched){n.push(s),n.push.apply(n,s.querySelectorAll(e)),t.rewind(),o.pop();continue}}i[1]<a.childNodes.length?o.push([a.childNodes[i[1]++],0,!1]):(i[2]&&t.rewind(),o.pop())}return n},[])},t.prototype.querySelector=function(e){var t;e instanceof f.default?(t=e,t.reset()):t=new f.default(e);for(var n=[],r=0,o=this.childNodes;r<o.length;r++){var i=o[r];for(n.push([i,0,!1]);n.length;){var a=d.default(n),s=a[0];if(0===a[1]){if(s.nodeType!==l.default.ELEMENT_NODE){n.pop();continue}if(a[2]=t.advance(s),a[2]&&t.matched)return s}a[1]<s.childNodes.length?n.push([s.childNodes[a[1]++],0,!1]):(a[2]&&t.rewind(),n.pop())}}return null},t.prototype.appendChild=function(e){return this.childNodes.push(e),e instanceof t&&(e.parentNode=this),e},Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.childNodes[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return d.default(this.childNodes)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attrs",{get:function(){if(this._attrs)return this._attrs;this._attrs={};var e=this.rawAttributes;for(var t in e){var n=e[t]||"";this._attrs[t.toLowerCase()]=m(n)}return this._attrs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e={},t=this.rawAttributes;for(var n in t){var r=t[n]||"";e[n]=m(r)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawAttributes",{get:function(){if(this._rawAttrs)return this._rawAttrs;var e={};if(this.rawAttrs)for(var t=/\b([a-z][a-z0-9-_]*)(?:\s*=\s*(?:"([^"]*)"|'([^']*)'|(\S+)))?/gi,n=void 0;n=t.exec(this.rawAttrs);)e[n[1]]=n[2]||n[3]||n[4]||null;return this._rawAttrs=e,e},enumerable:!1,configurable:!0}),t.prototype.removeAttribute=function(e){var t=this.rawAttributes;delete t[e],this._attrs&&delete this._attrs[e],this.rawAttrs=Object.keys(t).map(function(e){var n=JSON.stringify(t[e]);return void 0===n||"null"===n?e:e+"="+n}).join(" ")},t.prototype.hasAttribute=function(e){return e.toLowerCase()in this.attrs},t.prototype.getAttribute=function(e){return this.attrs[e.toLowerCase()]},t.prototype.setAttribute=function(e,t){if(arguments.length<2)throw new Error("Failed to execute 'setAttribute' on 'Element'");var n=e.toLowerCase(),r=this.rawAttributes;for(var o in r)if(o.toLowerCase()===n){e=o;break}r[e]=String(t),this._attrs&&(this._attrs[n]=m(r[e])),this.rawAttrs=Object.keys(r).map(function(e){var t=JSON.stringify(r[e]);return"null"===t||'""'===t?e:e+"="+t}).join(" ")},t.prototype.setAttributes=function(e){this._attrs&&delete this._attrs,this._rawAttrs&&delete this._rawAttrs,this.rawAttrs=Object.keys(e).map(function(t){var n=e[t];return"null"===n||'""'===n?t:t+"="+JSON.stringify(String(n))}).join(" ")},t.prototype.insertAdjacentHTML=function(e,n){var r,o,a,s=this;if(arguments.length<2)throw new Error("2 arguments required");var u=h.default(n);if("afterend"===e){var l=this.parentNode.childNodes.findIndex(function(e){return e===s});(r=this.parentNode.childNodes).splice.apply(r,i([l+1,0],u.childNodes)),u.childNodes.forEach(function(e){e instanceof t&&(e.parentNode=s.parentNode)})}else if("afterbegin"===e)(o=this.childNodes).unshift.apply(o,u.childNodes);else if("beforeend"===e)u.childNodes.forEach(function(e){s.appendChild(e)});else{if("beforebegin"!==e)throw new Error("The value provided ('"+e+"') is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'");var l=this.parentNode.childNodes.findIndex(function(e){return e===s});(a=this.parentNode.childNodes).splice.apply(a,i([l,0],u.childNodes)),u.childNodes.forEach(function(e){e instanceof t&&(e.parentNode=s.parentNode)})}},Object.defineProperty(t.prototype,"nextSibling",{get:function(){if(this.parentNode){for(var e=this.parentNode.childNodes,t=0;t<e.length;){var n=e[t++];if(this===n)return e[t]||null}return null}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextElementSibling",{get:function(){if(this.parentNode){for(var e=this.parentNode.childNodes,n=0,r=!1;n<e.length;){var o=e[n++];if(r){if(o instanceof t)return o||null}else this===o&&(r=!0)}return null}},enumerable:!1,configurable:!0}),t}(u.default);t.default=y;var g=/<!--[^]*?(?=-->)-->|<(\/?)([a-z][-.:0-9_a-z]*)\s*([^>]*?)(\/?)>/gi,b=/(^|\s)(id|class)\s*=\s*("([^"]+)"|'([^']+)'|(\S+))/gi,A={area:!0,AREA:!0,base:!0,BASE:!0,br:!0,BR:!0,col:!0,COL:!0,hr:!0,HR:!0,img:!0,IMG:!0,input:!0,INPUT:!0,link:!0,LINK:!0,meta:!0,META:!0,source:!0,SOURCE:!0,embed:!0,EMBED:!0,param:!0,PARAM:!0,track:!0,TRACK:!0,wbr:!0,WBR:!0},w={li:{li:!0,LI:!0},LI:{li:!0,LI:!0},p:{p:!0,div:!0,P:!0,DIV:!0},P:{p:!0,div:!0,P:!0,DIV:!0},b:{div:!0,DIV:!0},B:{div:!0,DIV:!0},td:{td:!0,th:!0,TD:!0,TH:!0},TD:{td:!0,th:!0,TD:!0,TH:!0},th:{td:!0,th:!0,TD:!0,TH:!0},TH:{td:!0,th:!0,TD:!0,TH:!0},h1:{h1:!0,H1:!0},H1:{h1:!0,H1:!0},h2:{h2:!0,H2:!0},H2:{h2:!0,H2:!0},h3:{h3:!0,H3:!0},H3:{h3:!0,H3:!0},h4:{h4:!0,H4:!0},H4:{h4:!0,H4:!0},h5:{h5:!0,H5:!0},H5:{h5:!0,H5:!0},h6:{h6:!0,H6:!0},H6:{h6:!0,H6:!0}},_={li:{ul:!0,ol:!0,UL:!0,OL:!0},LI:{ul:!0,ol:!0,UL:!0,OL:!0},a:{div:!0,DIV:!0},A:{div:!0,DIV:!0},b:{div:!0,DIV:!0},B:{div:!0,DIV:!0},i:{div:!0,DIV:!0},I:{div:!0,DIV:!0},p:{div:!0,DIV:!0},P:{div:!0,DIV:!0},td:{tr:!0,table:!0,TR:!0,TABLE:!0},TD:{tr:!0,table:!0,TR:!0,TABLE:!0},th:{tr:!0,table:!0,TR:!0,TABLE:!0},TH:{tr:!0,table:!0,TR:!0,TABLE:!0}},E="documentfragmentcontainer";t.base_parse=r},function(e,t,n){(function(t){"use strict";function n(e,n,r,o){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,o)});default:for(i=new Array(s-1),a=0;a<i.length;)i[a++]=arguments[a];return t.nextTick(function(){e.apply(null,i)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=n:e.exports=t.nextTick}).call(t,n(27))},function(e,t){e.exports='<svg version="1.1" id="Warstwa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 419 65" enable-background="new 0 0 419 65" xml:space="preserve">\n\t<path fill="#FF3F00" d="M350.365,45.928c0-3.022,2.592-5.614,5.617-5.614c3.168,0,5.615,2.592,5.615,5.614\n\t\tc0,3.099-2.447,5.688-5.615,5.688C352.957,51.618,350.365,49.026,350.365,45.928z"/>\n\t<path fill="#FF3F00" d="M402.855,33.328c0,11.521-8.568,18.218-18.074,18.218c-2.879,0-5.184-0.287-7.344-1.008v13.25\n\t\tc-1.295,0.287-2.664,0.359-4.031,0.359c-1.369,0-2.666-0.072-4.105-0.359V20.656c3.314-2.736,8.715-5.256,15.191-5.256\n\t\tC394.936,15.399,402.855,21.519,402.855,33.328z M394.646,33.4c0-6.554-4.248-10.514-10.514-10.514\n\t\tc-2.375,0-4.607,0.504-6.695,1.656v18.361c1.943,0.936,4.104,1.368,6.77,1.368C390.398,44.273,394.646,40.169,394.646,33.4z"/>\n\t<path fill="#FF3F00" d="M410.268,50.466V3.229c1.297-0.288,2.666-0.36,4.033-0.36s2.809,0.072,4.176,0.36v47.236\n\t\tc-1.295,0.287-2.736,0.359-4.104,0.359C413.076,50.825,411.709,50.753,410.268,50.466z"/>\n\t<path fill="#0050A0" d="M38.613,4.31v45.797c-2.376,0.574-5.185,0.719-7.561,0.646L9.667,20.08L8.37,17.631l0.146,2.88v29.954\n\t\tc-1.44,0.289-2.664,0.434-4.032,0.434c-1.297,0-2.448-0.145-3.961-0.434V4.742c1.729-0.648,4.969-1.152,7.633-0.72l21.313,30.675\n\t\tl1.297,2.305l-0.146-3.239V4.31c1.514-0.287,2.521-0.432,3.961-0.432C35.949,3.877,37.245,4.022,38.613,4.31z"/>\n\t<path fill="#0050A0" d="M46.817,33.471c0-10.584,7.704-18.145,18.218-18.145c10.514,0,17.931,7.488,17.931,18.145\n\t\tc0,10.515-7.705,18.073-18.219,18.073C54.234,51.544,46.817,44.13,46.817,33.471z M74.756,33.471\n\t\tc0-6.552-3.744-11.088-9.865-11.088c-6.12,0-9.864,4.536-9.864,11.088c0,6.481,3.744,10.944,9.864,10.944\n\t\tC71.012,44.417,74.756,39.954,74.756,33.471z"/>\n\t<path fill="#0050A0" d="M88.288,33.543c0-10.943,7.777-18.216,18.074-18.216c5.112,0,9.433,2.016,11.521,3.889\n\t\tc-0.576,2.305-2.232,4.535-4.394,5.832c-1.728-1.439-3.96-2.664-7.057-2.664c-6.696,0-9.864,5.111-9.864,11.088\n\t\tc0,5.833,3.096,11.02,9.937,11.02c4.032,0,6.121-1.656,7.562-2.882c2.089,1.08,3.601,3.024,4.32,5.546\n\t\tc-2.231,2.159-6.553,4.393-11.953,4.393C95.561,51.546,88.288,44.921,88.288,33.543z"/>\n\t<path fill="#0050A0" d="M121.767,33.471c0-10.584,7.705-18.145,18.218-18.145c10.513,0,17.93,7.488,17.93,18.145\n\t\tc0,10.515-7.705,18.073-18.218,18.073C129.184,51.544,121.767,44.13,121.767,33.471z M149.706,33.471\n\t\tc0-6.552-3.744-11.088-9.863-11.088c-6.121,0-9.865,4.536-9.865,11.088c0,6.481,3.744,10.944,9.865,10.944\n\t\tC145.961,44.417,149.706,39.954,149.706,33.471z"/>\n\t<path fill="#0050A0" d="M213.211,16.912c-3.023,12.529-7.199,24.123-12.673,33.554c-1.297,0.289-2.809,0.359-4.031,0.359\n\t\tc-1.298,0-2.594-0.07-3.89-0.359c-2.16-4.031-4.104-8.424-5.761-13.032c-1.224,4.537-2.952,9.146-4.896,13.032\n\t\tc-1.296,0.289-3.023,0.359-4.248,0.359c-1.296,0-2.663-0.07-3.889-0.359c-6.265-10.439-9.793-21.023-12.673-33.554\n\t\tc1.152-0.36,3.456-0.648,5.545-0.648c1.008,0,2.304,0.072,3.24,0.218c2.23,10.584,5.544,20.881,8.063,26.568l0.217,0.938\n\t\tc0.071-0.287,0.145-0.648,0.287-0.938c1.944-4.465,3.89-10.368,5.112-15.554c-1.008-3.455-1.872-6.984-2.736-10.584\n\t\tc1.152-0.36,3.456-0.648,5.474-0.648c1.008,0,2.088,0.072,3.023,0.218c2.089,10.584,4.752,20.448,7.272,26.568l0.216,1.152\n\t\tc0.072-0.435,0.146-0.793,0.288-1.152c2.952-6.912,5.473-15.769,7.705-26.568c0.936-0.146,2.16-0.218,3.24-0.218\n\t\tC209.972,16.262,211.844,16.479,213.211,16.912z"/>\n\t<path fill="#0050A0" d="M246.764,29.512v18.647c-4.033,1.945-10.012,3.385-15.771,3.385c-10.082,0-15.049-4.248-15.049-11.088\n\t\tc0-7.058,6.119-10.874,14.398-10.801c3.24,0,6.051,0.432,8.426,1.296v-1.944c0-4.104-2.736-6.552-8.207-6.552\n\t\tc-4.105,0-7.564,1.584-9.506,3.023c-2.018-1.009-3.387-2.881-3.744-5.257c2.016-1.944,7.199-4.823,13.824-4.823\n\t\tC240.139,15.399,246.764,19.43,246.764,29.512z M231.711,45.282c2.596,0,4.971-0.435,7.059-1.08v-7.346\n\t\tc-2.23-0.938-4.896-1.367-7.775-1.367c-4.033,0-6.77,1.367-6.77,4.606C224.225,43.193,226.672,45.282,231.711,45.282z"/>\n\t<path fill="#0050A0" d="M287.227,29.512v20.954c-1.369,0.287-2.811,0.359-4.105,0.359c-1.367,0-2.664-0.072-4.104-0.359v-19.01\n\t\tc0-6.265-3.023-8.641-8.279-8.641c-3.168,0-5.979,0.936-7.563,1.872v25.777c-1.295,0.289-2.734,0.359-4.104,0.359\n\t\tc-1.295,0-2.664-0.07-4.031-0.359V20.727c3.023-2.521,9-5.399,16.346-5.399C282.402,15.328,287.227,21.664,287.227,29.512z"/>\n\t<path fill="#0050A0" d="M294.998,6.039c0-2.88,2.377-5.186,5.33-5.186c2.809,0,5.186,2.305,5.186,5.186s-2.377,5.185-5.186,5.185\n\t\tC297.375,11.222,294.998,8.917,294.998,6.039z M296.225,50.466V16.408c1.367-0.289,2.734-0.36,4.104-0.36\n\t\tc1.295,0,2.734,0.071,4.031,0.36v34.058c-1.297,0.289-2.664,0.359-4.031,0.359C299.031,50.825,297.592,50.753,296.225,50.466z"/>\n\t<path fill="#0050A0" d="M344.25,35.632h-24.123c0.648,5.617,4.105,9.072,9.793,9.072c4.971,0,7.852-1.943,10.08-3.527\n\t\tc1.803,1.152,3.24,3.457,3.529,5.545c-2.881,2.306-7.346,4.824-14.186,4.824c-10.227,0-17.57-6.77-17.57-17.931\n\t\tc0-10.584,7.418-18.217,17.139-18.217c9.146,0,15.625,6.264,15.625,15.407C344.537,32.608,344.465,33.76,344.25,35.632z\n\t\t M336.543,30.231c0-4.031-2.088-8.138-7.633-8.208c-5.039,0-8.137,3.527-8.713,8.208H336.543z"/>\n\n</svg>\n'},function(e,t){e.exports='<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 25.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 615.4 230" style="enable-background:new 0 0 615.4 230;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:#0056BC;}\n\t.st1{fill:#FFD41F;}\n</style>\n<path class="st0" d="M80.9,84.7h16.9L78.1,147H61.8l-11.6-37l-12.7,37H22.2L2.5,84.7h16.9l12.7,40.4l11.7-40.4h12.6l11.7,40.4\n\tL80.9,84.7z"/>\n<path class="st0" d="M151.3,84.7h15.1V147h-15.1l-0.4-11.3c-1.8,3.8-4.4,6.8-7.9,9c-3.5,2.2-7.7,3.2-12.8,3.2c-9,0-16.5-3-22.3-8.9\n\tc-5.9-5.9-8.8-13.6-8.8-23.2c0-4.7,0.8-9.1,2.3-13.1c1.6-4,3.7-7.4,6.5-10.2c2.8-2.8,6-4.9,9.9-6.5c3.8-1.5,8-2.3,12.4-2.3\n\tc5.1,0,9.3,1.1,12.8,3.2c3.5,2.2,6.2,5.2,8,9L151.3,84.7z M119.8,128.8c3.1,3.1,7.1,4.6,12.1,4.6c5,0,9.1-1.6,12.2-4.9\n\tc3.1-3.3,4.6-7.5,4.6-12.8c-0.1-5.2-1.7-9.4-4.8-12.6c-3.1-3.2-7.1-4.8-12-4.8c-5,0-9,1.6-12.1,4.7c-3.1,3.1-4.6,7.4-4.6,12.9\n\tC115.2,121.4,116.7,125.7,119.8,128.8z"/>\n<path class="st0" d="M237.1,84.7l-22.4,31.1l22.4,31.1h-17.4l-17.1-23.8h-7.2V147h-16.1V83.8h16.1v24.7h7.2l17.1-23.8H237.1z"/>\n<path class="st0" d="M289,84.7H304V147H289l-0.4-11.3c-1.8,3.8-4.4,6.8-7.9,9c-3.5,2.2-7.7,3.2-12.8,3.2c-9,0-16.5-3-22.3-8.9\n\tc-5.9-5.9-8.8-13.6-8.8-23.2c0-4.7,0.8-9.1,2.3-13.1c1.6-4,3.7-7.4,6.5-10.2c2.8-2.8,6-4.9,9.9-6.5c3.8-1.5,8-2.3,12.4-2.3\n\tc5.1,0,9.3,1.1,12.8,3.2c3.5,2.2,6.2,5.2,8,9L289,84.7z M257.4,128.8c3.1,3.1,7.1,4.6,12.1,4.6c5,0,9.1-1.6,12.2-4.9\n\tc3.1-3.3,4.6-7.5,4.6-12.8c-0.1-5.2-1.7-9.4-4.8-12.6c-3.1-3.2-7.1-4.8-12-4.8c-5,0-9,1.6-12.1,4.7c-3.1,3.1-4.6,7.4-4.6,12.9\n\tC252.8,121.4,254.3,125.7,257.4,128.8z"/>\n<path class="st0" d="M344.3,133.3c3.5,0,6.7-0.9,9.4-2.7c2.7-1.8,4.7-4.3,5.9-7.4l15.2,2.2c-1.7,7-5.4,12.5-11,16.5\n\tc-5.6,4-12.1,6-19.6,6c-5.9,0-11.3-1.3-16.1-3.8c-4.8-2.5-8.7-6.3-11.5-11.2c-2.9-4.9-4.3-10.6-4.3-17.1c0-6.5,1.4-12.1,4.3-17.1\n\tc2.9-4.9,6.7-8.7,11.5-11.2c4.8-2.5,10.2-3.8,16.1-3.8c7.5,0,14,2,19.6,6c5.6,4,9.2,9.5,11,16.5l-15.2,2.2c-1.2-3.1-3.2-5.6-5.9-7.4\n\tc-2.7-1.8-5.9-2.7-9.4-2.7c-4.9,0-8.9,1.6-12,4.9c-3.2,3.2-4.7,7.5-4.7,12.6s1.6,9.4,4.7,12.6C335.4,131.7,339.4,133.3,344.3,133.3z\n\t"/>\n<path class="st0" d="M594.8,124.5c0,3.6,0.7,5.7,2.1,7.3c1.4,1.6,3.7,3.1,6.7,3.5c2.5,0.4,4.6,0,5.9-1l3.3,11\n\tc-3.8,1.7-8.3,2.8-13.6,2.4c-6.3-0.4-11.2-1.9-14.7-5.7c-3.5-3.8-5.2-9.2-5.2-16V84.8h15.4V124.5z"/>\n<path class="st0" d="M473.1,115.9c0,2.1-0.1,3.8-0.3,5.1h-47.5c0.9,4.2,2.7,7.5,5.6,9.9c2.9,2.4,6.3,3.6,10.2,3.6\n\tc6.7,0,11.4-2.8,14.2-8.5l14.5,3.6c-2,5.7-5.6,10.2-10.9,13.5c-5.3,3.3-11.2,5-17.9,5c-5.9,0-11.3-1.3-16.1-3.9\n\tc-4.9-2.6-8.7-6.4-11.6-11.3c-2.9-4.9-4.3-10.5-4.3-16.8s1.4-11.9,4.3-16.8c2.9-4.9,6.7-8.7,11.6-11.3c4.9-2.6,10.2-4,16.1-4\n\tc5.9,0,11.3,1.3,16.2,4c4.9,2.6,8.7,6.4,11.5,11.3C471.7,104,473.1,109.6,473.1,115.9z M441.1,97.3c-3.8,0-7.1,1.1-10,3.4\n\tc-2.8,2.3-4.7,5.4-5.7,9.3h31.5c-0.9-4.1-2.8-7.2-5.5-9.4C448.6,98.4,445.2,97.3,441.1,97.3z"/>\n<path class="st0" d="M492.5,145.7c-1.7,1.7-3.8,2.6-6.2,2.6c-2.4,0-4.5-0.9-6.3-2.6c-1.8-1.8-2.6-3.8-2.6-6.3c0-2.4,0.9-4.5,2.6-6.2\n\tc1.7-1.7,3.8-2.5,6.3-2.5c2.4,0,4.5,0.9,6.2,2.6c1.7,1.7,2.6,3.8,2.6,6.1C495.1,141.9,494.2,144,492.5,145.7z"/>\n<path class="st0" d="M518.8,84.7l0.3,11.3c1.8-3.8,4.5-6.8,7.9-9c3.5-2.2,7.7-3.2,12.8-3.2c4.4,0,8.5,0.8,12.4,2.3\n\tc3.8,1.5,7.1,3.7,9.9,6.5c2.8,2.8,4.9,6.2,6.5,10.2c1.6,4,2.3,8.4,2.3,13.1c0,9.5-2.9,17.2-8.8,23.2c-5.8,5.9-13.3,8.9-22.3,8.9\n\tc-5.1,0-9.3-1.1-12.8-3.2c-3.5-2.2-6.2-5.2-8-9v32.6h-15.5V84.7H518.8z M526.1,128.5c3.1,3.3,7.1,4.9,12.1,4.9c5,0,9.1-1.5,12.1-4.6\n\tc3.1-3.1,4.6-7.4,4.6-12.9c0-5.5-1.5-9.8-4.6-12.9c-3.1-3.1-7.1-4.7-12.1-4.7c-4.9,0-8.9,1.6-12,4.8s-4.7,7.4-4.7,12.5\n\tC521.5,121,523,125.2,526.1,128.5z"/>\n<path class="st0" d="M385.4,84.8v54.7c0,8-2.4,13-10.3,14.4l2.9,10.8c14.2-0.7,22.6-7.7,22.8-26.8l0,0V84.8H385.4z"/>\n<path class="st1" d="M323.9,2.8c-37.4,0-68.5,26.8-75.2,62.2H274c6.2-21.7,26.2-37.6,49.9-37.6c23.7,0,43.7,15.9,49.9,37.6h25.2\n\tC392.4,29.5,361.3,2.8,323.9,2.8z"/>\n</svg>\n';
},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 24">\n  <path d="M16 17.5c-2.523 0-4.5-1.977-4.5-4.5 0-2.523 1.977-4.5 4.5-4.5 2.523 0 4.5 1.977 4.5 4.5 0 2.523-1.977 4.5-4.5 4.5zm0-11c-3.584 0-6.5 2.916-6.5 6.5s2.916 6.5 6.5 6.5 6.5-2.916 6.5-6.5-2.916-6.5-6.5-6.5zm14 15.033c0 .253-.196.467-.429.467H2.429C2.196 22 2 21.786 2 21.533V5.4c0-.253.196-.467.429-.467H9l.228-.013.157-.054c.444-.106 1.623-.388 2.617-1.408L13.422 2h5.155l1.42 1.458C21.171 4.662 22.594 4.933 23 4.933h6.571c.233 0 .429.214.429.467v16.133zm-.429-18.6l-6.531.002c-.178-.018-.971-.216-1.61-.873L20.043.638l-.147-.302L19.6.184C19.492.128 19.204 0 18.857 0h-5.714c-.509 0-.87.313-1.005.451l-1.569 1.611c-.589.605-1.305.776-1.65.859-.017.004-.034.008-.05.012h-6.44C1.089 2.933 0 4.04 0 5.4v16.133C0 22.894 1.089 24 2.429 24h27.142C30.91 24 32 22.894 32 21.533V5.4c0-1.36-1.09-2.467-2.429-2.467z"/>\n</svg>\n'},function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 34.1 34.6" xml:space="preserve">\n\t<path d="M4.3,1.5l28.3,28.3l-2.8,2.8L1.5,4.3L4.3,1.5z M1.5,30.3L29.8,2l2.8,2.8L4.3,33.1 L1.5,30.3z"/>\n</svg>\n'},function(e,t,n){"use strict";function r(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function o(e,t,n){c.insertTreeBefore(e,t,n)}function i(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):m(e,t,n)}function a(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],u(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,r){for(var o=t;;){var i=o.nextSibling;if(m(e,o,r),o===n)break;o=i}}function u(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}function l(e,t,n){var r=e.parentNode,o=e.nextSibling;o===t?n&&m(r,document.createTextNode(n),o):n?(h(o,n),u(r,o,t)):u(r,e,t)}var c=n(194),f=n(2280),d=(n(43),n(79),n(468)),p=n(316),h=n(822),m=d(function(e,t,n){e.insertBefore(t,n)}),v=f.dangerouslyReplaceNodeWithMarkup,y={dangerouslyReplaceNodeWithMarkup:v,replaceDelimitedText:l,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case"INSERT_MARKUP":o(e,s.content,r(e,s.afterNode));break;case"MOVE_EXISTING":i(e,s.fromNode,r(e,s.afterNode));break;case"SET_MARKUP":p(e,s.content);break;case"TEXT_CONTENT":h(e,s.content);break;case"REMOVE_NODE":a(e,s.fromNode)}}}};e.exports=y},function(e,t){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=n},function(e,t,n){"use strict";function r(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(n>-1?void 0:a("96",e),!l.plugins[n]){t.extractEvents?void 0:a("97",e),l.plugins[n]=t;var r=t.eventTypes;for(var i in r)o(r[i],t,i)?void 0:a("98",i,e)}}}function o(e,t,n){l.eventNameDispatchConfigs.hasOwnProperty(n)?a("99",n):void 0,l.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];i(s,t,n)}return!0}return!!e.registrationName&&(i(e.registrationName,t,n),!0)}function i(e,t,n){l.registrationNameModules[e]?a("100",e):void 0,l.registrationNameModules[e]=t,l.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var a=n(23),s=(n(12),null),u={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){s?a("101"):void 0,s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];u.hasOwnProperty(n)&&u[n]===o||(u[n]?a("102",n):void 0,u[n]=o,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return l.registrationNameModules[t.registrationName]||null;if(void 0!==t.phasedRegistrationNames){var n=t.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var o=l.registrationNameModules[n[r]];if(o)return o}}return null},_resetEventPlugins:function(){s=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];l.plugins.length=0;var t=l.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=l.registrationNameModules;for(var o in r)r.hasOwnProperty(o)&&delete r[o]}};e.exports=l},function(e,t,n){"use strict";function r(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e}function o(e){return"topMouseMove"===e||"topTouchMove"===e}function i(e){return"topMouseDown"===e||"topTouchStart"===e}function a(e,t,n,r){var o=e.type||"unknown-event";e.currentTarget=y.getNodeFromInstance(r),t?m.invokeGuardedCallbackWithCatch(o,n,e):m.invokeGuardedCallback(o,n,e),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)a(e,t,n[o],r[o]);else n&&a(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null}function u(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function l(e){var t=u(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)?h("103"):void 0,e.currentTarget=t?y.getNodeFromInstance(n):null;var r=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,r}function f(e){return!!e._dispatchListeners}var d,p,h=n(23),m=n(466),v=(n(12),n(17),{injectComponentTree:function(e){d=e},injectTreeTraversal:function(e){p=e}}),y={isEndish:r,isMoveish:o,isStartish:i,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:l,hasDispatches:f,getInstanceFromNode:function(e){return d.getInstanceFromNode(e)},getNodeFromInstance:function(e){return d.getNodeFromInstance(e)},isAncestor:function(e,t){return p.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return p.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return p.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return p.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,r,o){return p.traverseEnterLeave(e,t,n,r,o)},injection:v};e.exports=y},function(e,t){"use strict";function n(e){var t=/[=:]/g,n={"=":"=0",":":"=2"},r=(""+e).replace(t,function(e){return n[e]});return"$"+r}function r(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"},r="."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1);return(""+r).replace(t,function(e){return n[e]})}var o={escape:n,unescape:r};e.exports=o},function(e,t,n){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink?s("87"):void 0}function o(e){r(e),null!=e.value||null!=e.onChange?s("88"):void 0}function i(e){r(e),null!=e.checked||null!=e.onChange?s("89"):void 0}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=n(23),u=n(105),l=n(2305),c=(n(12),n(17),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),f={value:function(e,t,n){return!e[t]||c[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:u.PropTypes.func},d={},p={checkPropTypes:function(e,t,n){for(var r in f){if(f.hasOwnProperty(r))var o=f[r](t,r,e,"prop",null,l);if(o instanceof Error&&!(o.message in d)){d[o.message]=!0;a(n)}}},getValue:function(e){return e.valueLink?(o(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(i(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(o(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(i(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=p},function(e,t,n){"use strict";var r=n(23),o=(n(12),!1),i={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){o?r("104"):void 0,i.replaceNodeWithMarkup=e.replaceNodeWithMarkup,i.processChildrenUpdates=e.processChildrenUpdates,o=!0}}};e.exports=i},function(e,t,n){"use strict";function r(e,t,n){try{t(n)}catch(e){null===o&&(o=e)}}var o=null,i={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(o){var e=o;throw o=null,e}}};e.exports=i},function(e,t,n){"use strict";function r(e){u.enqueueUpdate(e)}function o(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,r=Object.keys(e);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function i(e,t){var n=s.get(e);if(!n){return null}return n}var a=n(23),s=(n(115),n(239)),u=(n(79),n(90)),l=(n(12),n(17),{isMounted:function(e){var t=s.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){l.validateCallback(t,n);var o=i(e);return o?(o._pendingCallbacks?o._pendingCallbacks.push(t):o._pendingCallbacks=[t],void r(o)):null},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=i(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=i(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){var n=i(e,"setState");if(n){var o=n._pendingStateQueue||(n._pendingStateQueue=[]);o.push(t),r(n)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,r(e)},validateCallback:function(e,t){e&&"function"!=typeof e?a("122",t,o(e)):void 0}});e.exports=l},function(e,t){"use strict";var n=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e};e.exports=n},function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=n},function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=o[e];return!!r&&!!n[r]}function r(e){return n}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=r},function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}e.exports=n},function(e,t,n){"use strict";function r(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function o(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e,t){var n;if(null===e||e===!1)n=l.create(i);else if("object"==typeof e){var s=e,u=s.type;if("function"!=typeof u&&"string"!=typeof u){var d="";d+=r(s._owner),a("130",null==u?u:typeof u,d)}"string"==typeof s.type?n=c.createInternalComponent(s):o(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new f(s)}else"string"==typeof e||"number"==typeof e?n=c.createInstanceForText(e):a("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var a=n(23),s=n(26),u=n(2287),l=n(806),c=n(808),f=(n(2330),n(12),n(17),function(e){this.construct(e)});s(f.prototype,u,{_instantiateReactComponent:i}),e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&o&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var o,i=n(52);i.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=r},function(e,t){"use strict";function n(e,t){var n=null===e||e===!1,r=null===t||t===!1;if(n||r)return n===r;var o=typeof e,i=typeof t;return"string"===o||"number"===o?"string"===i||"number"===i:"object"===i&&e.type===t.type&&e.key===t.key}e.exports=n},function(e,t,n){"use strict";var r=(n(26),n(77)),o=(n(17),r);e.exports=o},function(e,t){"use strict";function n(e,t,n){function r(){return a=!0,s?void(l=[].concat(Array.prototype.slice.call(arguments))):void n.apply(this,arguments)}function o(){if(!a&&(u=!0,!s)){for(s=!0;!a&&i<e&&u;)u=!1,t.call(this,i++,o,r);return s=!1,a?void n.apply(this,l):void(i>=e&&u&&(a=!0,n()))}}var i=0,a=!1,s=!1,u=!1,l=void 0;o()}function r(e,t,n){function r(e,t,r){a||(t?(a=!0,n(t)):(i[e]=r,a=++s===o,a&&n(null,i)))}var o=e.length,i=[];if(0===o)return n(null,i);var a=!1,s=0;e.forEach(function(e,n){t(e,n,function(e,t){r(n,e,t)})})}t.__esModule=!0,t.loopAsync=n,t.mapAsync=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.router=t.routes=t.route=t.components=t.component=t.location=t.history=t.falsy=t.locationShape=t.routerShape=void 0;var i=n(1),a=n(318),s=(o(a),n(170)),u=r(s),l=n(49),c=(o(l),i.PropTypes.func),f=i.PropTypes.object,d=i.PropTypes.shape,p=i.PropTypes.string,h=t.routerShape=d({push:c.isRequired,replace:c.isRequired,go:c.isRequired,goBack:c.isRequired,goForward:c.isRequired,setRouteLeaveHook:c.isRequired,isActive:c.isRequired}),m=t.locationShape=d({pathname:p.isRequired,search:p.isRequired,state:f,action:p.isRequired,key:p}),v=t.falsy=u.falsy,y=t.history=u.history,g=t.location=m,b=t.component=u.component,A=t.components=u.components,w=t.route=u.route,_=(t.routes=u.routes,t.router=h),E={falsy:v,history:y,location:g,component:b,components:A,route:w,router:_};t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function i(e,t){function n(t){var n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=void 0;return n&&n!==!0||null!==r?(t={pathname:t,query:n},o=r||!1):(t=e.createLocation(t),o=n),(0,d.default)(t,o,b.location,b.routes,b.params)}function r(e,n){A&&A.location===e?i(A,n):(0,v.default)(t,e,function(t,r){t?n(t):r?i(a({},r,{location:e}),n):n()})}function i(e,t){function n(n,o){return n||o?r(n,o):void(0,h.default)(e,function(n,r){n?t(n):t(null,null,b=a({},e,{components:r}))})}function r(e,n){e?t(e):t(null,n)}var o=(0,l.default)(b,e),i=o.leaveRoutes,s=o.changeRoutes,u=o.enterRoutes;(0,c.runLeaveHooks)(i,b),i.filter(function(e){return u.indexOf(e)===-1}).forEach(m),(0,c.runChangeHooks)(s,b,e,function(t,o){return t||o?r(t,o):void(0,c.runEnterHooks)(u,e,n)})}function s(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];return e.__id__||t&&(e.__id__=w++)}function u(e){return e.reduce(function(e,t){return e.push.apply(e,_[s(t)]),e},[])}function f(e,n){(0,v.default)(t,e,function(t,r){if(null==r)return void n();A=a({},r,{location:e});for(var o=u((0,l.default)(b,A).leaveRoutes),i=void 0,s=0,c=o.length;null==i&&s<c;++s)i=o[s](e);n(i)})}function p(){if(b.routes){for(var e=u(b.routes),t=void 0,n=0,r=e.length;"string"!=typeof t&&n<r;++n)t=e[n]();return t}}function m(e){var t=s(e,!1);t&&(delete _[t],o(_)||(E&&(E(),E=null),T&&(T(),T=null)))}function y(t,n){var r=s(t),i=_[r];if(i)i.indexOf(n)===-1&&i.push(n);else{var a=!o(_);_[r]=[n],a&&(E=e.listenBefore(f),e.listenBeforeUnload&&(T=e.listenBeforeUnload(p)))}return function(){var e=_[r];if(e){var o=e.filter(function(e){return e!==n});0===o.length?m(t):_[r]=o}}}function g(t){return e.listen(function(n){b.location===n?t(null,b):r(n,function(n,r,o){n?t(n):r?e.replace(r):o&&t(null,o)})})}var b={},A=void 0,w=1,_=Object.create(null),E=void 0,T=void 0;return{isActive:n,match:r,listenBeforeLeavingRoute:y,listen:g}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i;var s=n(49),u=(r(s),n(2358)),l=r(u),c=n(2355),f=n(2362),d=r(f),p=n(2359),h=r(p),m=n(2364),v=r(m);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.createMemoryHistory=t.hashHistory=t.browserHistory=t.applyRouterMiddleware=t.formatPattern=t.useRouterHistory=t.match=t.routerShape=t.locationShape=t.PropTypes=t.RoutingContext=t.RouterContext=t.createRoutes=t.useRoutes=t.RouteContext=t.Lifecycle=t.History=t.Route=t.Redirect=t.IndexRoute=t.IndexRedirect=t.withRouter=t.IndexLink=t.Link=t.Router=void 0;var o=n(129);Object.defineProperty(t,"createRoutes",{enumerable:!0,get:function(){return o.createRoutes}});var i=n(477);Object.defineProperty(t,"locationShape",{enumerable:!0,get:function(){return i.locationShape}}),Object.defineProperty(t,"routerShape",{enumerable:!0,get:function(){return i.routerShape}});var a=n(196);Object.defineProperty(t,"formatPattern",{enumerable:!0,get:function(){return a.formatPattern}});var s=n(2353),u=r(s),l=n(826),c=r(l),f=n(2347),d=r(f),p=n(2366),h=r(p),m=n(2348),v=r(m),y=n(2349),g=r(y),b=n(827),A=r(b),w=n(2351),_=r(w),E=n(2346),T=r(E),x=n(2350),P=r(x),S=n(2352),C=r(S),O=n(2365),M=r(O),R=n(317),k=r(R),I=n(2354),L=r(I),N=r(i),j=n(2363),D=r(j),F=n(832),U=r(F),B=n(2356),z=r(B),H=n(2357),V=r(H),q=n(2361),G=r(q),W=n(829),X=r(W);t.Router=u.default,t.Link=c.default,t.IndexLink=d.default,t.withRouter=h.default,t.IndexRedirect=v.default,t.IndexRoute=g.default,t.Redirect=A.default,t.Route=_.default,t.History=T.default,t.Lifecycle=P.default,t.RouteContext=C.default,t.useRoutes=M.default,t.RouterContext=k.default,t.RoutingContext=L.default,t.PropTypes=N.default,t.match=D.default,t.useRouterHistory=U.default,t.applyRouterMiddleware=z.default,t.browserHistory=V.default,t.hashHistory=G.default,t.createMemoryHistory=X.default},function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||i}var o=n(198),i=n(482),a=(n(836),n(185));n(12),n(17);r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?o("85"):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};e.exports=r},function(e,t,n){"use strict";function r(e){var t=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+t.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var o=t.call(e);return r.test(o)}catch(e){return!1}}function o(e){var t=l(e);if(t){var n=t.childIDs;c(e),n.forEach(o)}}function i(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}function a(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function s(e){var t,n=x.getDisplayName(e),r=x.getElement(e),o=x.getOwnerID(e);return o&&(t=x.getDisplayName(o)),i(n,r&&r._source,t)}var u,l,c,f,d,p,h,m=n(198),v=n(115),y=(n(12),n(17),"function"==typeof Array.from&&"function"==typeof Map&&r(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"==typeof Set&&r(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&r(Set.prototype.keys));if(y){var g=new Map,b=new Set;u=function(e,t){g.set(e,t)},l=function(e){return g.get(e)},c=function(e){g.delete(e)},f=function(){return Array.from(g.keys())},d=function(e){b.add(e)},p=function(e){b.delete(e)},h=function(){return Array.from(b.keys())}}else{var A={},w={},_=function(e){return"."+e},E=function(e){return parseInt(e.substr(1),10)};u=function(e,t){var n=_(e);A[n]=t},l=function(e){var t=_(e);return A[t]},c=function(e){var t=_(e);delete A[t]},f=function(){return Object.keys(A).map(E)},d=function(e){var t=_(e);w[t]=!0},p=function(e){var t=_(e);delete w[t]},h=function(){return Object.keys(w).map(E)}}var T=[],x={onSetChildren:function(e,t){var n=l(e);n?void 0:m("144"),n.childIDs=t;for(var r=0;r<t.length;r++){var o=t[r],i=l(o);i?void 0:m("140"),null==i.childIDs&&"object"==typeof i.element&&null!=i.element?m("141"):void 0,i.isMounted?void 0:m("71"),null==i.parentID&&(i.parentID=e),i.parentID!==e?m("142",o,i.parentID,e):void 0}},onBeforeMountComponent:function(e,t,n){var r={element:t,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};u(e,r)},onBeforeUpdateComponent:function(e,t){var n=l(e);n&&n.isMounted&&(n.element=t)},onMountComponent:function(e){var t=l(e);t?void 0:m("144"),t.isMounted=!0;var n=0===t.parentID;n&&d(e)},onUpdateComponent:function(e){var t=l(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=l(e);if(t){t.isMounted=!1;var n=0===t.parentID;n&&p(e)}T.push(e)},purgeUnmountedComponents:function(){if(!x._preventPurging){for(var e=0;e<T.length;e++){var t=T[e];o(t)}T.length=0}},isMounted:function(e){var t=l(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var n=a(e),r=e._owner;t+=i(n,e._source,r&&r.getName())}var o=v.current,s=o&&o._debugID;return t+=x.getStackAddendumByID(s)},getStackAddendumByID:function(e){for(var t="";e;)t+=s(e),e=x.getParentID(e);return t},getChildIDs:function(e){var t=l(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=x.getElement(e);return t?a(t):null},getElement:function(e){var t=l(e);return t?t.element:null},getOwnerID:function(e){var t=x.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=l(e);return t?t.parentID:null},getSource:function(e){var t=l(e),n=t?t.element:null,r=null!=n?n._source:null;return r},getText:function(e){var t=x.getElement(e);return"string"==typeof t?t:"number"==typeof t?""+t:null},getUpdateCount:function(e){var t=l(e);return t?t.updateCount:0},getRootIDs:h,getRegisteredIDs:f};e.exports=x},function(e,t,n){"use strict";function r(e,t){}var o=(n(17),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){r(e,"forceUpdate")},enqueueReplaceState:function(e,t){r(e,"replaceState")},enqueueSetState:function(e,t){r(e,"setState")}});e.exports=o},function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return o(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function o(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=i;var s=n(171),u=n(215);u.inherits=n(47),u.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,n){(function(t,r){"use strict";function o(){}function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function a(e,t){M=M||n(171),e=e||{},this.objectMode=!!e.objectMode,t instanceof M&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){m(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this),this.corkedRequestsFree.next=new E(this)}function s(e){return M=M||n(171),this instanceof s||this instanceof M?(this._writableState=new a(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),void C.call(this)):new s(e)}function u(e,t){var n=new Error("write after end");e.emit("error",n),T(t,n)}function l(e,t,n,r){var o=!0;if(!P.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var i=new TypeError("Invalid non-string/buffer chunk");e.emit("error",i),T(r,i),o=!1}return o}function c(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new P(t,n)),t}function f(e,t,n,r,o){n=c(t,n,r),P.isBuffer(n)&&(r="buffer");var a=t.objectMode?1:n.length;t.length+=a;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new i(n,r,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,a,n,r,o);return s}function d(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function p(e,t,n,r,o){--t.pendingcb,n?T(o,r):o(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function m(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(h(n),t)p(e,n,r,t,o);else{var i=b(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||g(e,n),r?x(v,e,n,i,o):v(e,n,i,o)}}function v(e,t,n,r){n||y(e,t),t.pendingcb--,r(),w(e,t)}function y(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var a=0;n;)o[a]=n,n=n.next,a+=1;d(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,t.corkedRequestsFree=i.next,i.next=null}else{for(;n;){var s=n.chunk,u=n.encoding,l=n.callback,c=t.objectMode?1:s.length;if(d(e,t,!1,c,s,u,l),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function b(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var n=b(t);return n&&(0===t.pendingcb?(A(e,t),t.finished=!0,e.emit("finish")):A(e,t)),n}function _(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?T(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function E(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var o=r.callback;e.pendingcb--,o(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=s;var T=n(454),x=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:T,P=n(32).Buffer;s.WritableState=a;var S=n(215);S.inherits=n(47);var C,O={deprecate:n(2451)};!function(){try{C=n(323)}catch(e){}finally{C||(C=n(291).EventEmitter)}}();var P=n(32).Buffer;S.inherits(s,C);var M;a.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(a.prototype,"buffer",{get:O.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var M;s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},s.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return"function"==typeof t&&(n=t,t=null),P.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=o),r.ended?u(this,n):l(this,r,e,n)&&(r.pendingcb++,i=f(this,r,e,t,n)),i},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||g(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},s.prototype._write=function(e,t,n){n(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||_(this,r,n)}}).call(t,n(27),n(2434).setImmediate)},function(e,t){"use strict";t.__esModule=!0;var n=function(e){if("string"==typeof e)return e;if(e)return e.displayName||e.name||"Component"};t.default=n},function(e,t){"use strict";t.__esModule=!0;var n=function(e){return Boolean(e&&e.prototype&&"object"==typeof e.prototype.isReactComponent)};t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(35),i=r(o),a=function(e,t){return function(n){return n[e]=t,n}};t.default=(0,i.default)(a,"setStatic",!1)},function(e,t){"use strict";function n(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}t.__esModule=!0;var r=function(e,t){for(var r=n(e,[]),o=0;o<t.length;o++){var i=t[o];r.hasOwnProperty(i)&&delete r[i]}return r};t.default=r},function(e,t){"use strict";t.__esModule=!0;var n=function(e,t){for(var n={},r=0;r<t.length;r++){var o=t[r];e.hasOwnProperty(o)&&(n[o]=e[o])}return n};t.default=n},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){}function n(e,t){this.x=e||0,this.y=t||0}function r(e,t,o,i,a,s,u,l,c,f){Object.defineProperty(this,"id",{value:xs++}),this.uuid=Ts.generateUUID(),this.name="",this.image=void 0!==e?e:r.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:r.DEFAULT_MAPPING,this.wrapS=void 0!==o?o:ba,this.wrapT=void 0!==i?i:ba,this.magFilter=void 0!==a?a:Ta,this.minFilter=void 0!==s?s:Pa,this.anisotropy=void 0!==c?c:1,this.format=void 0!==u?u:za,this.type=void 0!==l?l:Sa,this.offset=new n(0,0),this.repeat=new n(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:hs,this.version=0,this.onUpdate=null}function o(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function i(e,t,n){this.uuid=Ts.generateUUID(),this.width=e,this.height=t,this.scissor=new o(0,0,e,t),this.scissorTest=!1,this.viewport=new o(0,0,e,t),
n=n||{},void 0===n.minFilter&&(n.minFilter=Ta),this.texture=new r(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function a(e,t,n){i.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function s(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function u(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function l(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function c(e,t,n,o,i,a,s,u,l,c,f,d){r.call(this,null,a,s,u,l,c,o,i,f,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:wa,this.minFilter=void 0!==c?c:wa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function f(e,t,n,o,i,a,s,u,l,c){e=void 0!==e?e:[],t=void 0!==t?t:fa,r.call(this,e,t,n,o,i,a,s,u,l,c),this.flipY=!1}function d(){this.seq=[],this.map={}}function p(e,t,n){var r=e[0];if(r<=0||r>0)return e;var o=t*n,i=Cs[o];if(void 0===i&&(i=new Float32Array(o),Cs[o]=i),0!==t){r.toArray(i,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(i,s)}return i}function h(e,t){var n=Os[t];void 0===n&&(n=new Int32Array(t),Os[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function m(e,t){e.uniform1f(this.addr,t)}function v(e,t){e.uniform1i(this.addr,t)}function y(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function g(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function b(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function A(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function w(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Rs.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Rs))}function _(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(Ms.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Ms))}function E(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||Ps,r)}function T(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||Ss,r)}function x(e,t){e.uniform2iv(this.addr,t)}function P(e,t){e.uniform3iv(this.addr,t)}function S(e,t){e.uniform4iv(this.addr,t)}function C(e){switch(e){case 5126:return m;case 35664:return y;case 35665:return g;case 35666:return b;case 35674:return A;case 35675:return w;case 35676:return _;case 35678:case 36198:return E;case 35680:return T;case 5124:case 35670:return v;case 35667:case 35671:return x;case 35668:case 35672:return P;case 35669:case 35673:return S}}function O(e,t){e.uniform1fv(this.addr,t)}function M(e,t){e.uniform1iv(this.addr,t)}function R(e,t){e.uniform2fv(this.addr,p(t,this.size,2))}function k(e,t){e.uniform3fv(this.addr,p(t,this.size,3))}function I(e,t){e.uniform4fv(this.addr,p(t,this.size,4))}function L(e,t){e.uniformMatrix2fv(this.addr,!1,p(t,this.size,4))}function N(e,t){e.uniformMatrix3fv(this.addr,!1,p(t,this.size,9))}function j(e,t){e.uniformMatrix4fv(this.addr,!1,p(t,this.size,16))}function D(e,t,n){var r=t.length,o=h(n,r);e.uniform1iv(this.addr,o);for(var i=0;i!==r;++i)n.setTexture2D(t[i]||Ps,o[i])}function F(e,t,n){var r=t.length,o=h(n,r);e.uniform1iv(this.addr,o);for(var i=0;i!==r;++i)n.setTextureCube(t[i]||Ss,o[i])}function U(e){switch(e){case 5126:return O;case 35664:return R;case 35665:return k;case 35666:return I;case 35674:return L;case 35675:return N;case 35676:return j;case 35678:return D;case 35680:return F;case 5124:case 35670:return M;case 35667:case 35671:return x;case 35668:case 35672:return P;case 35669:case 35673:return S}}function B(e,t,n){this.id=e,this.addr=n,this.setValue=C(t.type)}function z(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=U(t.type)}function H(e){this.id=e,d.call(this)}function V(e,t){e.seq.push(t),e.map[t.id]=t}function q(e,t,n){var r=e.name,o=r.length;for(ks.lastIndex=0;;){var i=ks.exec(r),a=ks.lastIndex,s=i[1],u="]"===i[2],l=i[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===o){V(n,void 0===l?new B(s,e,t):new z(s,e,t));break}var c=n.map,f=c[s];void 0===f&&(f=new H(s),V(n,f)),n=f}}function G(e,t,n){d.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=0;o<r;++o){var i=e.getActiveUniform(t,o),a=i.name,s=e.getUniformLocation(t,a);q(i,s,this)}}function W(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function X(e,t){this.min=void 0!==e?e:new n(+(1/0),+(1/0)),this.max=void 0!==t?t:new n(-(1/0),-(1/0))}function Y(e,t){function r(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);i=h.createBuffer(),a=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,i),h.bufferData(h.ARRAY_BUFFER,e,h.STATIC_DRAW),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,a),h.bufferData(h.ELEMENT_ARRAY_BUFFER,t,h.STATIC_DRAW),d=h.createTexture(),p=h.createTexture(),m.bindTexture(h.TEXTURE_2D,d),h.texImage2D(h.TEXTURE_2D,0,h.RGB,16,16,0,h.RGB,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),m.bindTexture(h.TEXTURE_2D,p),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,16,16,0,h.RGBA,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},l=o(s),c={vertex:h.getAttribLocation(l,"position"),uv:h.getAttribLocation(l,"uv")},f={renderType:h.getUniformLocation(l,"renderType"),map:h.getUniformLocation(l,"map"),occlusionMap:h.getUniformLocation(l,"occlusionMap"),opacity:h.getUniformLocation(l,"opacity"),color:h.getUniformLocation(l,"color"),scale:h.getUniformLocation(l,"scale"),rotation:h.getUniformLocation(l,"rotation"),screenPosition:h.getUniformLocation(l,"screenPosition")}}function o(t){var n=h.createProgram(),r=h.createShader(h.FRAGMENT_SHADER),o=h.createShader(h.VERTEX_SHADER),i="precision "+e.getPrecision()+" float;\n";return h.shaderSource(r,i+t.fragmentShader),h.shaderSource(o,i+t.vertexShader),h.compileShader(r),h.compileShader(o),h.attachShader(n,r),h.attachShader(n,o),h.linkProgram(n),n}var i,a,s,l,c,f,d,p,h=e.context,m=e.state;this.render=function(o,s,v){if(0!==t.length){var y=new u,g=v.w/v.z,b=.5*v.z,A=.5*v.w,w=16/v.w,_=new n(w*g,w),E=new u(1,1,0),T=new n(1,1),x=new X;x.min.set(v.x,v.y),x.max.set(v.x+(v.z-16),v.y+(v.w-16)),void 0===l&&r(),h.useProgram(l),m.initAttributes(),m.enableAttribute(c.vertex),m.enableAttribute(c.uv),m.disableUnusedAttributes(),h.uniform1i(f.occlusionMap,0),h.uniform1i(f.map,1),h.bindBuffer(h.ARRAY_BUFFER,i),h.vertexAttribPointer(c.vertex,2,h.FLOAT,!1,16,0),h.vertexAttribPointer(c.uv,2,h.FLOAT,!1,16,8),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,a),m.disable(h.CULL_FACE),m.buffers.depth.setMask(!1);for(var P=0,S=t.length;P<S;P++){w=16/v.w,_.set(w*g,w);var C=t[P];if(y.set(C.matrixWorld.elements[12],C.matrixWorld.elements[13],C.matrixWorld.elements[14]),y.applyMatrix4(s.matrixWorldInverse),y.applyMatrix4(s.projectionMatrix),E.copy(y),T.x=v.x+E.x*b+b-8,T.y=v.y+E.y*A+A-8,x.containsPoint(T)===!0){m.activeTexture(h.TEXTURE0),m.bindTexture(h.TEXTURE_2D,null),m.activeTexture(h.TEXTURE1),m.bindTexture(h.TEXTURE_2D,d),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGB,T.x,T.y,16,16,0),h.uniform1i(f.renderType,0),h.uniform2f(f.scale,_.x,_.y),h.uniform3f(f.screenPosition,E.x,E.y,E.z),m.disable(h.BLEND),m.enable(h.DEPTH_TEST),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0),m.activeTexture(h.TEXTURE0),m.bindTexture(h.TEXTURE_2D,p),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGBA,T.x,T.y,16,16,0),h.uniform1i(f.renderType,1),m.disable(h.DEPTH_TEST),m.activeTexture(h.TEXTURE1),m.bindTexture(h.TEXTURE_2D,d),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0),C.positionScreen.copy(E),C.customUpdateCallback?C.customUpdateCallback(C):C.updateLensFlares(),h.uniform1i(f.renderType,2),m.enable(h.BLEND);for(var O=0,M=C.lensFlares.length;O<M;O++){var R=C.lensFlares[O];R.opacity>.001&&R.scale>.001&&(E.x=R.x,E.y=R.y,E.z=R.z,w=R.size*R.scale/v.w,_.x=w*g,_.y=w,h.uniform3f(f.screenPosition,E.x,E.y,E.z),h.uniform2f(f.scale,_.x,_.y),h.uniform1f(f.rotation,R.rotation),h.uniform1f(f.opacity,R.opacity),h.uniform3f(f.color,R.color.r,R.color.g,R.color.b),m.setBlending(R.blending,R.blendEquation,R.blendSrc,R.blendDst),e.setTexture2D(R.texture,1),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0))}}}m.enable(h.CULL_FACE),m.enable(h.DEPTH_TEST),m.buffers.depth.setMask(!0),e.resetGLState()}}}function Q(e,t){function n(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);a=h.createBuffer(),l=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,a),h.bufferData(h.ARRAY_BUFFER,e,h.STATIC_DRAW),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),h.bufferData(h.ELEMENT_ARRAY_BUFFER,t,h.STATIC_DRAW),c=o(),f={position:h.getAttribLocation(c,"position"),uv:h.getAttribLocation(c,"uv")},d={uvOffset:h.getUniformLocation(c,"uvOffset"),uvScale:h.getUniformLocation(c,"uvScale"),rotation:h.getUniformLocation(c,"rotation"),scale:h.getUniformLocation(c,"scale"),color:h.getUniformLocation(c,"color"),map:h.getUniformLocation(c,"map"),opacity:h.getUniformLocation(c,"opacity"),modelViewMatrix:h.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:h.getUniformLocation(c,"projectionMatrix"),fogType:h.getUniformLocation(c,"fogType"),fogDensity:h.getUniformLocation(c,"fogDensity"),fogNear:h.getUniformLocation(c,"fogNear"),fogFar:h.getUniformLocation(c,"fogFar"),fogColor:h.getUniformLocation(c,"fogColor"),alphaTest:h.getUniformLocation(c,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var i=n.getContext("2d");i.fillStyle="white",i.fillRect(0,0,8,8),p=new r(n),p.needsUpdate=!0}function o(){var t=h.createProgram(),n=h.createShader(h.VERTEX_SHADER),r=h.createShader(h.FRAGMENT_SHADER);return h.shaderSource(n,["precision "+e.getPrecision()+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),h.shaderSource(r,["precision "+e.getPrecision()+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),h.compileShader(n),h.compileShader(r),h.attachShader(t,n),h.attachShader(t,r),h.linkProgram(t),t}function i(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var a,l,c,f,d,p,h=e.context,m=e.state,v=new u,y=new s,g=new u;this.render=function(r,o){if(0!==t.length){void 0===c&&n(),h.useProgram(c),m.initAttributes(),m.enableAttribute(f.position),m.enableAttribute(f.uv),m.disableUnusedAttributes(),m.disable(h.CULL_FACE),m.enable(h.BLEND),h.bindBuffer(h.ARRAY_BUFFER,a),h.vertexAttribPointer(f.position,2,h.FLOAT,!1,16,0),h.vertexAttribPointer(f.uv,2,h.FLOAT,!1,16,8),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),h.uniformMatrix4fv(d.projectionMatrix,!1,o.projectionMatrix.elements),m.activeTexture(h.TEXTURE0),h.uniform1i(d.map,0);var s=0,u=0,b=r.fog;b?(h.uniform3f(d.fogColor,b.color.r,b.color.g,b.color.b),b.isFog?(h.uniform1f(d.fogNear,b.near),h.uniform1f(d.fogFar,b.far),h.uniform1i(d.fogType,1),s=1,u=1):b.isFogExp2&&(h.uniform1f(d.fogDensity,b.density),h.uniform1i(d.fogType,2),s=2,u=2)):(h.uniform1i(d.fogType,0),s=0,u=0);for(var A=0,w=t.length;A<w;A++){var _=t[A];_.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,_.matrixWorld),_.z=-_.modelViewMatrix.elements[14]}t.sort(i);for(var E=[],A=0,w=t.length;A<w;A++){var _=t[A],T=_.material;if(T.visible!==!1){_.onBeforeRender(e,r,o,void 0,T,void 0),h.uniform1f(d.alphaTest,T.alphaTest),h.uniformMatrix4fv(d.modelViewMatrix,!1,_.modelViewMatrix.elements),_.matrixWorld.decompose(v,y,g),E[0]=g.x,E[1]=g.y;var x=0;r.fog&&T.fog&&(x=u),s!==x&&(h.uniform1i(d.fogType,x),s=x),null!==T.map?(h.uniform2f(d.uvOffset,T.map.offset.x,T.map.offset.y),h.uniform2f(d.uvScale,T.map.repeat.x,T.map.repeat.y)):(h.uniform2f(d.uvOffset,0,0),h.uniform2f(d.uvScale,1,1)),h.uniform1f(d.opacity,T.opacity),h.uniform3f(d.color,T.color.r,T.color.g,T.color.b),h.uniform1f(d.rotation,T.rotation),h.uniform2fv(d.scale,E),m.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst,T.blendEquationAlpha,T.blendSrcAlpha,T.blendDstAlpha,T.premultipliedAlpha),m.buffers.depth.setTest(T.depthTest),m.buffers.depth.setMask(T.depthWrite),T.map?e.setTexture2D(T.map,0):e.setTexture2D(p,0),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0),_.onAfterRender(e,r,o,void 0,T,void 0)}}m.enable(h.CULL_FACE),e.resetGLState()}}}function K(){Object.defineProperty(this,"id",{value:Bl++}),this.uuid=Ts.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Si,this.side=gi,this.shading=_i,this.vertexColors=Ei,this.opacity=1,this.transparent=!1,this.blendSrc=zi,this.blendDst=Hi,this.blendEquation=ki,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Zi,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.needsUpdate=!0}function Z(e){K.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function J(e){K.call(this),this.type="MeshDepthMaterial",this.depthPacking=_s,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function $(e,t){this.min=void 0!==e?e:new u(+(1/0),+(1/0),+(1/0)),this.max=void 0!==t?t:new u(-(1/0),-(1/0),-(1/0))}function ee(e,t){this.center=void 0!==e?e:new u,this.radius=void 0!==t?t:0}function te(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function ne(e,t){this.normal=void 0!==e?e:new u(1,0,0),this.constant=void 0!==t?t:0}function re(e,t,n,r,o,i){this.planes=[void 0!==e?e:new ne,void 0!==t?t:new ne,void 0!==n?n:new ne,void 0!==r?r:new ne,void 0!==o?o:new ne,void 0!==i?i:new ne]}function oe(e,t,r,a){function s(t,n,r,o){var i=t.geometry,a=null,s=E,u=t.customDepthMaterial;if(r&&(s=T,u=t.customDistanceMaterial),u)a=u;else{var l=!1;n.morphTargets&&(i&&i.isBufferGeometry?l=i.morphAttributes&&i.morphAttributes.position&&i.morphAttributes.position.length>0:i&&i.isGeometry&&(l=i.morphTargets&&i.morphTargets.length>0)),t.isSkinnedMesh&&n.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var c=t.isSkinnedMesh&&n.skinning,f=0;l&&(f|=A),c&&(f|=w),a=s[f]}if(e.localClippingEnabled&&n.clipShadows===!0&&0!==n.clippingPlanes.length){var d=a.uuid,p=n.uuid,h=x[d];void 0===h&&(h={},x[d]=h);var m=h[p];void 0===m&&(m=a.clone(),h[p]=m),a=m}a.visible=n.visible,a.wireframe=n.wireframe;var v=n.side;return D.renderSingleSided&&v==Ai&&(v=gi),D.renderReverseSided&&(v===gi?v=bi:v===bi&&(v=gi)),a.side=v,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,r&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(o),a}function c(t,n,o,i){if(t.visible!==!1){var a=t.layers.test(n.layers);if(a&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(!t.frustumCulled||p.intersectsObject(t))){t.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,t.matrixWorld);var u=r.update(t),l=t.material;if(Array.isArray(l))for(var f=u.groups,d=0,h=f.length;d<h;d++){var m=f[d],v=l[m.materialIndex];if(v&&v.visible){var y=s(t,v,i,b);e.renderBufferDirect(o,null,u,y,t,m)}}else if(l.visible){var y=s(t,l,i,b);e.renderBufferDirect(o,null,u,y,t,null)}}for(var g=t.children,A=0,w=g.length;A<w;A++)c(g[A],n,o,i)}}var f=e.context,d=e.state,p=new re,h=new l,m=t.shadows,v=new n,y=new n(a.maxTextureSize,a.maxTextureSize),g=new u,b=new u,A=1,w=2,_=(A|w)+1,E=new Array(_),T=new Array(_),x={},P=[new u(1,0,0),new u(-1,0,0),new u(0,0,1),new u(0,0,-1),new u(0,1,0),new u(0,-1,0)],S=[new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,0,1),new u(0,0,-1)],C=[new o,new o,new o,new o,new o,new o],O=new J;O.depthPacking=Es,O.clipping=!0;for(var M=Ul.distanceRGBA,R=Ns.clone(M.uniforms),k=0;k!==_;++k){var I=0!==(k&A),L=0!==(k&w),N=O.clone();N.morphTargets=I,N.skinning=L,E[k]=N;var j=new Z({defines:{USE_SHADOWMAP:""},uniforms:R,vertexShader:M.vertexShader,fragmentShader:M.fragmentShader,morphTargets:I,skinning:L,clipping:!0});T[k]=j}var D=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vi,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,n){if(D.enabled!==!1&&(D.autoUpdate!==!1||D.needsUpdate!==!1)&&0!==m.length){d.disable(f.BLEND),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var r,o=0,a=m.length;o<a;o++){var s=m[o],u=s.shadow,l=s&&s.isPointLight;if(void 0!==u){var A=u.camera;if(v.copy(u.mapSize),v.min(y),l){var w=v.x,_=v.y;C[0].set(2*w,_,w,_),C[1].set(0,_,w,_),C[2].set(3*w,_,w,_),C[3].set(w,_,w,_),C[4].set(3*w,0,w,_),C[5].set(w,0,w,_),v.x*=4,v.y*=2}if(null===u.map){var E={minFilter:wa,magFilter:wa,format:za};u.map=new i(v.x,v.y,E),u.map.texture.name=s.name+".shadowMap",A.updateProjectionMatrix()}u.isSpotLightShadow&&u.update(s);var T=u.map,x=u.matrix;b.setFromMatrixPosition(s.matrixWorld),A.position.copy(b),l?(r=6,x.makeTranslation(-b.x,-b.y,-b.z)):(r=1,g.setFromMatrixPosition(s.target.matrixWorld),A.lookAt(g),A.updateMatrixWorld(),x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(A.projectionMatrix),x.multiply(A.matrixWorldInverse)),e.setRenderTarget(T),e.clear();for(var O=0;O<r;O++){if(l){g.copy(A.position),g.add(P[O]),A.up.copy(S[O]),A.lookAt(g),A.updateMatrixWorld();var M=C[O];d.viewport(M)}h.multiplyMatrices(A.projectionMatrix,A.matrixWorldInverse),p.setFromMatrix(h),c(t,n,A,l)}}else console.warn("THREE.WebGLShadowMap:",s,"has no shadow.")}var R=e.getClearColor(),k=e.getClearAlpha();e.setClearColor(R,k),D.needsUpdate=!1}}}function ie(e){function t(t,n){var r=t.array,o=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,i=e.createBuffer();e.bindBuffer(n,i),e.bufferData(n,r,o),t.onUploadCallback();var a=e.FLOAT;return r instanceof Float32Array?a=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=e.UNSIGNED_SHORT:r instanceof Int16Array?a=e.SHORT:r instanceof Uint32Array?a=e.UNSIGNED_INT:r instanceof Int32Array?a=e.INT:r instanceof Int8Array?a=e.BYTE:r instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:i,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}function n(t,n,r){var o=n.array,i=n.updateRange;e.bindBuffer(r,t),n.dynamic===!1?e.bufferData(r,o,e.STATIC_DRAW):i.count===-1?e.bufferSubData(r,0,o):0===i.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,i.offset*o.BYTES_PER_ELEMENT,o.subarray(i.offset,i.offset+i.count)),i.count=-1)}function r(e){return e.isInterleavedBufferAttribute&&(e=e.data),a[e.uuid]}function o(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=a[t.uuid];n&&(e.deleteBuffer(n.buffer),delete a[t.uuid])}function i(e,r){e.isInterleavedBufferAttribute&&(e=e.data);var o=a[e.uuid];void 0===o?a[e.uuid]=t(e,r):o.version<e.version&&(n(o.buffer,e,r),o.version=e.version)}var a={};return{get:r,remove:o,update:i}}function ae(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||ae.DefaultOrder}function se(){this.mask=1}function ue(){function e(){o.setFromEuler(r,!1)}function t(){r.setFromQuaternion(o,void 0,!1)}Object.defineProperty(this,"id",{value:zl++}),this.uuid=Ts.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ue.DefaultUp.clone();var n=new u,r=new ae,o=new s,i=new u(1,1,1);r.onChange(e),o.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:o},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new l},normalMatrix:{value:new te}}),this.matrix=new l,this.matrixWorld=new l,this.matrixAutoUpdate=ue.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new se,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function le(){ue.call(this),this.type="Camera",this.matrixWorldInverse=new l,this.projectionMatrix=new l}function ce(e,t,n,r,o,i){le.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==o?o:.1,this.far=void 0!==i?i:2e3,this.updateProjectionMatrix()}function fe(e,t,n,r){le.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function de(e,t,n,r,o,i){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new u,this.vertexNormals=Array.isArray(r)?r:[],this.color=o&&o.isColor?o:new W,this.vertexColors=Array.isArray(o)?o:[],this.materialIndex=void 0!==i?i:0}function pe(){return Hl++}function he(){Object.defineProperty(this,"id",{value:pe()}),this.uuid=Ts.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function me(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Ts.generateUUID(),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function ve(e,t){me.call(this,new Int8Array(e),t)}function ye(e,t){me.call(this,new Uint8Array(e),t)}function ge(e,t){me.call(this,new Uint8ClampedArray(e),t)}function be(e,t){me.call(this,new Int16Array(e),t)}function Ae(e,t){me.call(this,new Uint16Array(e),t)}function we(e,t){me.call(this,new Int32Array(e),t)}function _e(e,t){me.call(this,new Uint32Array(e),t)}function Ee(e,t){me.call(this,new Float32Array(e),t)}function Te(e,t){me.call(this,new Float64Array(e),t)}function xe(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Pe(e){if(0===e.length)return-(1/0);for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function Se(){Object.defineProperty(this,"id",{value:pe()}),this.uuid=Ts.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Ce(e,t,n,r,o,i){he.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:o,depthSegments:i},this.fromBufferGeometry(new Oe(e,t,n,r,o,i)),this.mergeVertices()}function Oe(e,t,n,r,o,i){function a(e,t,n,r,o,i,a,m,v,y,g){var b,A,w=i/v,_=a/y,E=i/2,T=a/2,x=m/2,P=v+1,S=y+1,C=0,O=0,M=new u;for(A=0;A<S;A++){var R=A*_-T;for(b=0;b<P;b++){var k=b*w-E;M[e]=k*r,M[t]=R*o,M[n]=x,c.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=m>0?1:-1,f.push(M.x,M.y,M.z),d.push(b/v),d.push(1-A/y),C+=1}}for(A=0;A<y;A++)for(b=0;b<v;b++){var I=p+b+P*A,L=p+b+P*(A+1),N=p+(b+1)+P*(A+1),j=p+(b+1)+P*A;l.push(I,L,j),l.push(L,N,j),O+=6}s.addGroup(h,O,g),h+=O,p+=C}Se.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:o,depthSegments:i};var s=this;r=Math.floor(r)||1,o=Math.floor(o)||1,i=Math.floor(i)||1;var l=[],c=[],f=[],d=[],p=0,h=0;a("z","y","x",-1,-1,n,t,e,i,o,0),a("z","y","x",1,-1,n,t,-e,i,o,1),a("x","z","y",1,1,e,n,t,r,i,2),a("x","z","y",1,-1,e,n,-t,r,i,3),a("x","y","z",1,-1,e,t,n,r,o,4),a("x","y","z",-1,-1,e,t,-n,r,o,5),this.setIndex(l),this.addAttribute("position",new Ee(c,3)),this.addAttribute("normal",new Ee(f,3)),this.addAttribute("uv",new Ee(d,2))}function Me(e,t,n,r){he.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Re(e,t,n,r)),this.mergeVertices()}function Re(e,t,n,r){Se.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var o,i,a=e/2,s=t/2,u=Math.floor(n)||1,l=Math.floor(r)||1,c=u+1,f=l+1,d=e/u,p=t/l,h=[],m=[],v=[],y=[];for(i=0;i<f;i++){var g=i*p-s;for(o=0;o<c;o++){var b=o*d-a;m.push(b,-g,0),v.push(0,0,1),y.push(o/u),y.push(1-i/l)}}for(i=0;i<l;i++)for(o=0;o<u;o++){var A=o+c*i,w=o+c*(i+1),_=o+1+c*(i+1),E=o+1+c*i;h.push(A,w,E),h.push(w,_,E)}this.setIndex(h),this.addAttribute("position",new Ee(m,3)),this.addAttribute("normal",new Ee(v,3)),this.addAttribute("uv",new Ee(y,2))}function ke(e){K.call(this),this.type="MeshBasicMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=na,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Ie(e,t){this.origin=void 0!==e?e:new u,this.direction=void 0!==t?t:new u}function Le(e,t){this.start=void 0!==e?e:new u,this.end=void 0!==t?t:new u}function Ne(e,t,n){this.a=void 0!==e?e:new u,this.b=void 0!==t?t:new u,this.c=void 0!==n?n:new u}function je(e,t){ue.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Se,this.material=void 0!==t?t:new ke({color:16777215*Math.random()}),this.drawMode=fs,this.updateMorphTargets()}function De(e,t,n,r){function o(t,r,o){var d=t.background;null===d?i(c,f):d&&d.isColor&&(i(d,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&d.isCubeTexture?(void 0===u&&(u=new fe,l=new je(new Oe(5,5,5),new Z({uniforms:Ul.cube.uniforms,vertexShader:Ul.cube.vertexShader,fragmentShader:Ul.cube.fragmentShader,side:bi,depthTest:!1,depthWrite:!1,fog:!1}))),u.projectionMatrix.copy(r.projectionMatrix),u.matrixWorld.extractRotation(r.matrixWorld),u.matrixWorldInverse.getInverse(u.matrixWorld),l.material.uniforms.tCube.value=d,l.modelViewMatrix.multiplyMatrices(u.matrixWorldInverse,l.matrixWorld),n.update(l),e.renderBufferDirect(u,null,l.geometry,l.material,l,null)):d&&d.isTexture&&(void 0===a&&(a=new ce(-1,1,1,-1,0,1),s=new je(new Re(2,2),new ke({depthTest:!1,depthWrite:!1,fog:!1}))),s.material.map=d,n.update(s),e.renderBufferDirect(a,null,s.geometry,s.material,s,null))}function i(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}var a,s,u,l,c=new W(0),f=0;return{getClearColor:function(){return c},setClearColor:function(e,t){c.set(e),f=void 0!==t?t:1,i(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(e){f=e,i(c,f)},render:o}}function Fe(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id;
}function Ue(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Be(){function e(){i=-1,s=-1}function t(e,t,n,r,u){var l,c;n.transparent?(l=a,c=++s):(l=o,c=++i);var f=l[c];f?(f.id=e.id,f.object=e,f.geometry=t,f.material=n,f.program=n.program,f.renderOrder=e.renderOrder,f.z=r,f.group=u):(f={id:e.id,object:e,geometry:t,material:n,program:n.program,renderOrder:e.renderOrder,z:r,group:u},l.push(f))}function n(){o.length=i+1,a.length=s+1}function r(){o.sort(Fe),a.sort(Ue)}var o=[],i=-1,a=[],s=-1;return{opaque:o,transparent:a,init:e,push:t,finish:n,sort:r}}function ze(){function e(e,t){var r=e.id+","+t.id,o=n[r];return void 0===o&&(o=new Be,n[r]=o),o}function t(){n={}}var n={};return{get:e,dispose:t}}function He(e,t,n){function r(e){s=e}function o(e){u=e.type,l=e.bytesPerElement}function i(t,r){e.drawElements(s,r,u,t*l),n.calls++,n.vertices+=r,s===e.TRIANGLES&&(n.faces+=r/3)}function a(r,o,i){var a=t.get("ANGLE_instanced_arrays");return null===a?void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(a.drawElementsInstancedANGLE(s,i,u,o*l,r.maxInstancedCount),n.calls++,n.vertices+=i*r.maxInstancedCount,void(s===e.TRIANGLES&&(n.faces+=r.maxInstancedCount*i/3)))}var s,u,l;this.setMode=r,this.setIndex=o,this.render=i,this.renderInstances=a}function Ve(e,t,n){function r(e){a=e}function o(t,r){e.drawArrays(a,t,r),n.calls++,n.vertices+=r,a===e.TRIANGLES&&(n.faces+=r/3)}function i(r,o,i){var s=t.get("ANGLE_instanced_arrays");if(null===s)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var u=r.attributes.position;u.isInterleavedBufferAttribute?(i=u.data.count,s.drawArraysInstancedANGLE(a,0,i,r.maxInstancedCount)):s.drawArraysInstancedANGLE(a,o,i,r.maxInstancedCount),n.calls++,n.vertices+=i*r.maxInstancedCount,a===e.TRIANGLES&&(n.faces+=r.maxInstancedCount*i/3)}var a;this.setMode=r,this.render=o,this.renderInstances=i}function qe(e,t,n){function r(e){var o=e.target,i=s[o.id];null!==i.index&&t.remove(i.index);for(var a in i.attributes)t.remove(i.attributes[a]);o.removeEventListener("dispose",r),delete s[o.id];var l=u[o.id];l&&(t.remove(l),delete u[o.id]),l=u[i.id],l&&(t.remove(l),delete u[i.id]),n.geometries--}function o(e,t){var o=s[t.id];return o?o:(t.addEventListener("dispose",r),t.isBufferGeometry?o=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Se).setFromObject(e)),o=t._bufferGeometry),s[t.id]=o,n.geometries++,o)}function i(n){var r=n.index,o=n.attributes;null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER);for(var i in o)t.update(o[i],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var i in a)for(var s=a[i],u=0,l=s.length;u<l;u++)t.update(s[u],e.ARRAY_BUFFER)}function a(n){var r=u[n.id];if(r)return r;var o=[],i=n.index,a=n.attributes;if(null!==i)for(var s=i.array,l=0,c=s.length;l<c;l+=3){var f=s[l+0],d=s[l+1],p=s[l+2];o.push(f,d,d,p,p,f)}else for(var s=a.position.array,l=0,c=s.length/3-1;l<c;l+=3){var f=l+0,d=l+1,p=l+2;o.push(f,d,d,p,p,f)}return r=new(Pe(o)>65535?_e:Ae)(o,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),u[n.id]=r,r}var s={},u={};return{get:o,update:i,getWireframeAttribute:a}}function Ge(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new u,color:new W,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":r={position:new u,direction:new u,color:new W,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":r={position:new u,color:new W,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"HemisphereLight":r={direction:new u,skyColor:new W,groundColor:new W};break;case"RectAreaLight":r={color:new W,position:new u,halfWidth:new u,halfHeight:new u}}return e[t.id]=r,r}}}function We(e,t,n){function r(e){var r=n.frame,o=e.geometry,a=t.get(e,o);return i[a.id]!==r&&(o.isGeometry&&a.updateFromObject(e),t.update(a),i[a.id]=r),a}function o(){i={}}var i={};return{update:r,clear:o}}function Xe(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function Ye(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),Xe(n)),r}function Qe(e){switch(e){case hs:return["Linear","( value )"];case ms:return["sRGB","( value )"];case ys:return["RGBE","( value )"];case bs:return["RGBM","( value, 7.0 )"];case As:return["RGBM","( value, 16.0 )"];case ws:return["RGBD","( value, 256.0 )"];case vs:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Ke(e,t){var n=Qe(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ze(e,t){var n=Qe(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Je(e,t){var n;switch(t){case aa:n="Linear";break;case sa:n="Reinhard";break;case ua:n="Uncharted2";break;case la:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function $e(e,t,n){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(nt).join("\n")}function et(e){var t=[];for(var n in e){var r=e[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join("\n")}function tt(e,t,n){for(var r={},o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<o;i++){var a=e.getActiveAttrib(t,i),s=a.name;r[s]=e.getAttribLocation(t,s)}return r}function nt(e){return""!==e}function rt(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function ot(e){function t(e,t){var n=Fl[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return ot(n)}var n=/^[ \t]*#include +<([\w\d.]+)>/gm;return e.replace(n,t)}function it(e){function t(e,t,n,r){for(var o="",i=parseInt(t);i<parseInt(n);i++)o+=r.replace(/\[ i \]/g,"[ "+i+" ]");return o}var n=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(n,t)}function at(e,t,n,r,o){var i=e.context,a=n.extensions,s=n.defines,u=r.vertexShader,l=r.fragmentShader,c="SHADOWMAP_TYPE_BASIC";o.shadowMapType===vi?c="SHADOWMAP_TYPE_PCF":o.shadowMapType===yi&&(c="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(n.envMap.mapping){case fa:case da:f="ENVMAP_TYPE_CUBE";break;case va:case ya:f="ENVMAP_TYPE_CUBE_UV";break;case pa:case ha:f="ENVMAP_TYPE_EQUIREC";break;case ma:f="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case da:case ha:d="ENVMAP_MODE_REFRACTION"}switch(n.combine){case na:p="ENVMAP_BLENDING_MULTIPLY";break;case ra:p="ENVMAP_BLENDING_MIX";break;case oa:p="ENVMAP_BLENDING_ADD"}}var h,m,v=e.gammaFactor>0?e.gammaFactor:1,y=$e(a,o,e.extensions),g=et(s),b=i.createProgram();n.isRawShaderMaterial?(h=[g,"\n"].filter(nt).join("\n"),m=[y,g,"\n"].filter(nt).join("\n")):(h=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,g,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&o.flatShading===!1?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+o.numClippingPlanes,o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+c:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(nt).join("\n"),m=[y,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,g,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+v,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.envMap?"#define "+d:"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+o.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(o.numClippingPlanes-o.numClipIntersection),o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+c:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==ia?"#define TONE_MAPPING":"",o.toneMapping!==ia?Fl.tonemapping_pars_fragment:"",o.toneMapping!==ia?Je("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Fl.encodings_pars_fragment:"",o.mapEncoding?Ke("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Ke("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Ke("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?Ze("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(nt).join("\n")),u=ot(u),u=rt(u,o),l=ot(l),l=rt(l,o),n.isShaderMaterial||(u=it(u),l=it(l));var A=h+u,w=m+l,_=Ye(i,i.VERTEX_SHADER,A),E=Ye(i,i.FRAGMENT_SHADER,w);i.attachShader(b,_),i.attachShader(b,E),void 0!==n.index0AttributeName?i.bindAttribLocation(b,0,n.index0AttributeName):o.morphTargets===!0&&i.bindAttribLocation(b,0,"position"),i.linkProgram(b);var T=i.getProgramInfoLog(b),x=i.getShaderInfoLog(_),P=i.getShaderInfoLog(E),S=!0,C=!0;i.getProgramParameter(b,i.LINK_STATUS)===!1?(S=!1,console.error("THREE.WebGLProgram: shader error: ",i.getError(),"gl.VALIDATE_STATUS",i.getProgramParameter(b,i.VALIDATE_STATUS),"gl.getProgramInfoLog",T,x,P)):""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):""!==x&&""!==P||(C=!1),C&&(this.diagnostics={runnable:S,material:n,programLog:T,vertexShader:{log:x,prefix:h},fragmentShader:{log:P,prefix:m}}),i.deleteShader(_),i.deleteShader(E);var O;this.getUniforms=function(){return void 0===O&&(O=new G(i,b,e)),O};var M;return this.getAttributes=function(){return void 0===M&&(M=tt(i,b)),M},this.destroy=function(){i.deleteProgram(b),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Vl++,this.code=t,this.usedTimes=1,this.program=b,this.vertexShader=_,this.fragmentShader=E,this}function st(e,t){function n(e){var n=e.skeleton,r=n.bones;if(t.floatVertexTextures)return 1024;var o=t.maxVertexUniforms,i=Math.floor((o-20)/4),a=Math.min(i,r.length);return a<r.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+a+"."),0):a}function r(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=hs,n===hs&&t&&(n=vs),n}var o=[],i={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(o,a,s,u,l,c){var f=i[o.type],d=c.isSkinnedMesh?n(c):0,p=e.getPrecision();null!==o.precision&&(p=t.getMaxPrecision(o.precision),p!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",p,"instead."));var h=e.getRenderTarget(),m={shaderID:f,precision:p,supportsVertexTextures:t.vertexTextures,outputEncoding:r(h?h.texture:null,e.gammaOutput),map:!!o.map,mapEncoding:r(o.map,e.gammaInput),envMap:!!o.envMap,envMapMode:o.envMap&&o.envMap.mapping,envMapEncoding:r(o.envMap,e.gammaInput),envMapCubeUV:!!o.envMap&&(o.envMap.mapping===va||o.envMap.mapping===ya),lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:r(o.emissiveMap,e.gammaInput),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,alphaMap:!!o.alphaMap,gradientMap:!!o.gradientMap,combine:o.combine,vertexColors:o.vertexColors,fog:!!s,useFog:o.fog,fogExp:s&&s.isFogExp2,flatShading:o.shading===wi,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:o.skinning&&d>0,maxBones:d,useVertexTexture:t.floatVertexTextures,morphTargets:o.morphTargets,morphNormals:o.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numClippingPlanes:u,numClipIntersection:l,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&a.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,alphaTest:o.alphaTest,doubleSided:o.side===Ai,flipSided:o.side===bi,depthPacking:void 0!==o.depthPacking&&o.depthPacking};return m},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var o in t.defines)r.push(o),r.push(t.defines[o]);for(var i=0;i<a.length;i++)r.push(n[a[i]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(t,n,r,i){for(var a,s=0,u=o.length;s<u;s++){var l=o[s];if(l.code===i){a=l,++a.usedTimes;break}}return void 0===a&&(a=new at(e,i,t,n,r),o.push(a)),a},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},this.programs=o}function ut(e,t,n,r,o,i,a){function s(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n);var o=r.getContext("2d");return o.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function u(e){return Ts.isPowerOfTwo(e.width)&&Ts.isPowerOfTwo(e.height)}function l(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=Ts.nearestPowerOfTwo(e.width),t.height=Ts.nearestPowerOfTwo(e.height);var n=t.getContext("2d");return n.drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function c(e){return e.wrapS!==ba||e.wrapT!==ba||e.minFilter!==wa&&e.minFilter!==Ta}function f(e,t){return e.generateMipmaps&&t&&e.minFilter!==wa&&e.minFilter!==Ta}function d(t){return t===wa||t===_a||t===Ea?e.NEAREST:e.LINEAR}function p(e){var t=e.target;t.removeEventListener("dispose",p),m(t),a.textures--}function h(e){var t=e.target;t.removeEventListener("dispose",h),v(t),a.textures--}function m(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}function v(t){var n=r.get(t),o=r.get(t.texture);if(t){if(void 0!==o.__webglTexture&&e.deleteTexture(o.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var i=0;i<6;i++)e.deleteFramebuffer(n.__webglFramebuffer[i]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[i]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}}function y(t,o){var i=r.get(t);if(t.version>0&&i.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(a.complete!==!1)return void w(i,t,o);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+o),n.bindTexture(e.TEXTURE_2D,i.__webglTexture)}function g(t,l){var c=r.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",p),c.__image__webglTextureCube=e.createTexture(),a.textures++),n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var d=t&&t.isCompressedTexture,h=t.image[0]&&t.image[0].isDataTexture,m=[],v=0;v<6;v++)d||h?m[v]=h?t.image[v].image:t.image[v]:m[v]=s(t.image[v],o.maxCubemapSize);var y=m[0],g=u(y),b=i(t.format),w=i(t.type);A(e.TEXTURE_CUBE_MAP,t,g);for(var v=0;v<6;v++)if(d)for(var _,E=m[v].mipmaps,T=0,x=E.length;T<x;T++)_=E[T],t.format!==za&&t.format!==Ba?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,T,b,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,T,b,_.width,_.height,0,b,w,_.data);else h?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,m[v].width,m[v].height,0,b,w,m[v].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,b,w,m[v]);f(t,g)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}function b(t,o){n.activeTexture(e.TEXTURE0+o),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)}function A(n,a,s){var u;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,i(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,i(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,i(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,i(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===ba&&a.wrapT===ba||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,d(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,d(a.minFilter)),a.minFilter!==wa&&a.minFilter!==Ta&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),u=t.get("EXT_texture_filter_anisotropic")){if(a.type===Ia&&null===t.get("OES_texture_float_linear"))return;if(a.type===La&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,o.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function w(t,r,d){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",p),t.__webglTexture=e.createTexture(),a.textures++),n.activeTexture(e.TEXTURE0+d),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var h=s(r.image,o.maxTextureSize);c(r)&&u(h)===!1&&(h=l(h));var m=u(h),v=i(r.format),y=i(r.type);A(e.TEXTURE_2D,r,m);var g,b=r.mipmaps;if(r.isDepthTexture){var w=e.DEPTH_COMPONENT;if(r.type===Ia){if(!C)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else C&&(w=e.DEPTH_COMPONENT16);r.format===Ga&&w===e.DEPTH_COMPONENT&&r.type!==Ma&&r.type!==ka&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ma,y=i(r.type)),r.format===Wa&&(w=e.DEPTH_STENCIL,r.type!==Fa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Fa,y=i(r.type))),n.texImage2D(e.TEXTURE_2D,0,w,h.width,h.height,0,v,y,null)}else if(r.isDataTexture)if(b.length>0&&m){for(var _=0,E=b.length;_<E;_++)g=b[_],n.texImage2D(e.TEXTURE_2D,_,v,g.width,g.height,0,v,y,g.data);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,v,h.width,h.height,0,v,y,h.data);else if(r.isCompressedTexture)for(var _=0,E=b.length;_<E;_++)g=b[_],r.format!==za&&r.format!==Ba?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(e.TEXTURE_2D,_,v,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,_,v,g.width,g.height,0,v,y,g.data);else if(b.length>0&&m){for(var _=0,E=b.length;_<E;_++)g=b[_],n.texImage2D(e.TEXTURE_2D,_,v,v,y,g);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,v,v,y,h);f(r,m)&&e.generateMipmap(e.TEXTURE_2D),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function _(t,o,a,s){var u=i(o.texture.format),l=i(o.texture.type);n.texImage2D(s,0,u,o.width,o.height,0,u,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(o.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function E(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function T(t,n){var o=n&&n.isWebGLRenderTargetCube;if(o)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),y(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ga)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==Wa)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}function x(t){var n=r.get(t),o=t.isWebGLRenderTargetCube===!0;if(t.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");T(n.__webglFramebuffer,t)}else if(o){n.__webglDepthbuffer=[];for(var i=0;i<6;i++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=e.createRenderbuffer(),E(n.__webglDepthbuffer[i],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),E(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function P(t){var o=r.get(t),i=r.get(t.texture);t.addEventListener("dispose",h),i.__webglTexture=e.createTexture(),a.textures++;var s=t.isWebGLRenderTargetCube===!0,l=u(t);if(s){o.__webglFramebuffer=[];for(var c=0;c<6;c++)o.__webglFramebuffer[c]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(s){n.bindTexture(e.TEXTURE_CUBE_MAP,i.__webglTexture),A(e.TEXTURE_CUBE_MAP,t.texture,l);for(var c=0;c<6;c++)_(o.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);f(t.texture,l)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,i.__webglTexture),A(e.TEXTURE_2D,t.texture,l),_(o.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),f(t.texture,l)&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&x(t)}function S(t){var o=t.texture,i=u(t);if(f(o,i)){var a=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=r.get(o).__webglTexture;n.bindTexture(a,s),e.generateMipmap(a),n.bindTexture(a,null)}}var C="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=y,this.setTextureCube=g,this.setTextureCubeDynamic=b,this.setupRenderTarget=P,this.updateRenderTargetMipmap=S}function lt(){function e(e){var t=e.uuid,n=r[t];return void 0===n&&(n={},r[t]=n),n}function t(e){delete r[e.uuid]}function n(){r={}}var r={};return{get:e,remove:t,clear:n}}function ct(e,t,n){function r(){var t=!1,n=new o,r=null,i=new o;return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){s===!0&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),i.equals(n)===!1&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(0,0,0,1)}}}function i(){var t=!1,n=null,r=null,o=null;return{setTest:function(t){t?p(e.DEPTH_TEST):h(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case Yi:e.depthFunc(e.NEVER);break;case Qi:e.depthFunc(e.ALWAYS);break;case Ki:e.depthFunc(e.LESS);break;case Zi:e.depthFunc(e.LEQUAL);break;case Ji:e.depthFunc(e.EQUAL);break;case $i:e.depthFunc(e.GEQUAL);break;case ea:e.depthFunc(e.GREATER);break;case ta:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){o!==t&&(e.clearDepth(t),o=t)},reset:function(){t=!1,n=null,r=null,o=null}}}function a(){var t=!1,n=null,r=null,o=null,i=null,a=null,s=null,u=null,l=null;return{setTest:function(t){t?p(e.STENCIL_TEST):h(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&o===n&&i===a||(e.stencilFunc(t,n,a),r=t,o=n,i=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,o=null,i=null,a=null,s=null,u=null,l=null}}}function s(t,n,r){var o=new Uint8Array(4),i=e.createTexture();e.bindTexture(t,i),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);return i}function u(){R.setClear(0,0,0,1),k.setClear(1),I.setClear(0),p(e.DEPTH_TEST),k.setFunc(Zi),g(!1),b(ci),p(e.CULL_FACE),p(e.BLEND),v(Si)}function l(){for(var e=0,t=N.length;e<t;e++)N[e]=0}function c(n){if(N[n]=1,0===j[n]&&(e.enableVertexAttribArray(n),j[n]=1),0!==D[n]){var r=t.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,0),D[n]=0}}function f(n,r){if(N[n]=1,0===j[n]&&(e.enableVertexAttribArray(n),j[n]=1),D[n]!==r){var o=t.get("ANGLE_instanced_arrays");o.vertexAttribDivisorANGLE(n,r),D[n]=r}}function d(){for(var t=0,n=j.length;t!==n;++t)j[t]!==N[t]&&(e.disableVertexAttribArray(t),j[t]=0)}function p(t){F[t]!==!0&&(e.enable(t),F[t]=!0)}function h(t){F[t]!==!1&&(e.disable(t),F[t]=!1)}function m(){if(null===U&&(U=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)U.push(n[r]);return U}function v(t,r,o,i,a,s,u,l){t!==Pi?p(e.BLEND):h(e.BLEND),t===Ri||t===B&&l===X||(t===Ci?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===Oi?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===Mi?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),
e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),B=t,X=l),t===Ri?(a=a||r,s=s||o,u=u||i,r===z&&a===q||(e.blendEquationSeparate(n(r),n(a)),z=r,q=a),o===H&&i===V&&s===G&&u===W||(e.blendFuncSeparate(n(o),n(i),n(s),n(u)),H=o,V=i,G=s,W=u)):(z=null,H=null,V=null,q=null,G=null,W=null)}function y(t){t.side===Ai?h(e.CULL_FACE):p(e.CULL_FACE),g(t.side===bi),t.transparent===!0?v(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):v(Pi),k.setFunc(t.depthFunc),k.setTest(t.depthTest),k.setMask(t.depthWrite),R.setMask(t.colorWrite),w(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function g(t){Y!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),Y=t)}function b(t){t!==li?(p(e.CULL_FACE),t!==Q&&(t===ci?e.cullFace(e.BACK):t===fi?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):h(e.CULL_FACE),Q=t}function A(t){t!==K&&(ne&&e.lineWidth(t),K=t)}function w(t,n,r){t?(p(e.POLYGON_OFFSET_FILL),Z===n&&J===r||(e.polygonOffset(n,r),Z=n,J=r)):h(e.POLYGON_OFFSET_FILL)}function _(){return $}function E(t){$=t,t?p(e.SCISSOR_TEST):h(e.SCISSOR_TEST)}function T(t){void 0===t&&(t=e.TEXTURE0+ee-1),re!==t&&(e.activeTexture(t),re=t)}function x(t,n){null===re&&T();var r=oe[re];void 0===r&&(r={type:void 0,texture:void 0},oe[re]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||se[t]),r.type=t,r.texture=n)}function P(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function S(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function C(t){ie.equals(t)===!1&&(e.scissor(t.x,t.y,t.z,t.w),ie.copy(t))}function O(t){ae.equals(t)===!1&&(e.viewport(t.x,t.y,t.z,t.w),ae.copy(t))}function M(){for(var t=0;t<j.length;t++)1===j[t]&&(e.disableVertexAttribArray(t),j[t]=0);F={},U=null,re=null,oe={},B=null,Y=null,Q=null,R.reset(),k.reset(),I.reset()}var R=new r,k=new i,I=new a,L=e.getParameter(e.MAX_VERTEX_ATTRIBS),N=new Uint8Array(L),j=new Uint8Array(L),D=new Uint8Array(L),F={},U=null,B=null,z=null,H=null,V=null,q=null,G=null,W=null,X=!1,Y=null,Q=null,K=null,Z=null,J=null,$=null,ee=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),te=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),ne=parseFloat(te)>=1,re=null,oe={},ie=new o,ae=new o,se={};return se[e.TEXTURE_2D]=s(e.TEXTURE_2D,e.TEXTURE_2D,1),se[e.TEXTURE_CUBE_MAP]=s(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:R,depth:k,stencil:I},init:u,initAttributes:l,enableAttribute:c,enableAttributeAndDivisor:f,disableUnusedAttributes:d,enable:p,disable:h,getCompressedTextureFormats:m,setBlending:v,setMaterial:y,setFlipSided:g,setCullFace:b,setLineWidth:A,setPolygonOffset:w,getScissorTest:_,setScissorTest:E,activeTexture:T,bindTexture:x,compressedTexImage2D:P,texImage2D:S,scissor:C,viewport:O,reset:M}}function ft(e,t,n){function r(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var i,a=void 0!==n.precision?n.precision:"highp",s=o(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=n.logarithmicDepthBuffer===!0&&!!t.get("EXT_frag_depth"),l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),h=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=c>0,g=!!t.get("OES_texture_float"),b=y&&g;return{getMaxAnisotropy:r,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:h,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:g,floatVertexTextures:b}}function dt(e){fe.call(this),this.cameras=e||[]}function pt(e){function t(){if(r.isPresenting){var t=r.getEyeParameters("left"),o=t.renderWidth,i=t.renderHeight;h=e.getPixelRatio(),p=e.getSize(),e.setDrawingBufferSize(2*o,i,1)}else n.enabled&&e.setDrawingBufferSize(p.width,p.height,h)}var n=this,r=null,i=null;"VRFrameData"in window&&(i=new window.VRFrameData);var a=new l,s=new l,u=new l,c=new fe;c.bounds=new o(0,0,.5,1),c.layers.enable(1);var f=new fe;f.bounds=new o(.5,0,.5,1),f.layers.enable(2);var d=new dt([c,f]);d.layers.enable(1),d.layers.enable(2);var p,h;window.addEventListener("vrdisplaypresentchange",t,!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e)},this.getCamera=function(e){if(null===r)return e;r.depthNear=e.near,r.depthFar=e.far,r.getFrameData(i);var t=i.pose;null!==t.position?e.position.fromArray(t.position):e.position.set(0,0,0),null!==t.orientation&&e.quaternion.fromArray(t.orientation),e.updateMatrixWorld();var n=r.stageParameters;if(this.standing&&n&&(s.fromArray(n.sittingToStandingTransform),u.getInverse(s),e.matrixWorld.multiply(s),e.matrixWorldInverse.multiply(u)),r.isPresenting===!1)return e;d.matrixWorld.copy(e.matrixWorld),d.matrixWorldInverse.copy(e.matrixWorldInverse),c.matrixWorldInverse.fromArray(i.leftViewMatrix),f.matrixWorldInverse.fromArray(i.rightViewMatrix),this.standing&&n&&(c.matrixWorldInverse.multiply(u),f.matrixWorldInverse.multiply(u));var o=e.parent;null!==o&&(a.getInverse(o.matrixWorld),c.matrixWorldInverse.multiply(a),f.matrixWorldInverse.multiply(a)),c.matrixWorld.getInverse(c.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),c.projectionMatrix.fromArray(i.leftProjectionMatrix),f.projectionMatrix.fromArray(i.rightProjectionMatrix),d.projectionMatrix.copy(c.projectionMatrix);var l=r.getLayers();if(l.length){var p=l[0];null!==p.leftBounds&&4===p.leftBounds.length&&c.bounds.fromArray(p.leftBounds),null!==p.rightBounds&&4===p.rightBounds.length&&f.bounds.fromArray(p.rightBounds)}return d},this.getStandingMatrix=function(){return s},this.submitFrame=function(){r&&r.isPresenting&&r.submitFrame()}}function ht(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function mt(){function e(){l.value!==r&&(l.value=r,l.needsUpdate=o>0),n.numPlanes=o,n.numIntersection=0}function t(e,t,r,o){var i=null!==e?e.length:0,a=null;if(0!==i){if(a=l.value,o!==!0||null===a){var c=r+4*i,f=t.matrixWorldInverse;u.getNormalMatrix(f),(null===a||a.length<c)&&(a=new Float32Array(c));for(var d=0,p=r;d!==i;++d,p+=4)s.copy(e[d]).applyMatrix4(f,u),s.normal.toArray(a,p),a[p+3]=s.constant}l.value=a,l.needsUpdate=!0}return n.numPlanes=i,a}var n=this,r=null,o=0,i=!1,a=!1,s=new ne,u=new te,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,a){var s=0!==e.length||n||0!==o||i;return i=n,r=t(e,a,0),o=e.length,s},this.beginShadows=function(){a=!0,t(null)},this.endShadows=function(){a=!1,e()},this.setState=function(n,s,u,c,f,d){if(!i||null===n||0===n.length||a&&!u)a?t(null):e();else{var p=a?0:o,h=4*p,m=f.clippingState||null;l.value=m,m=t(n,c,h,d);for(var v=0;v!==h;++v)m[v]=r[v];f.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=p}}}function vt(e){function t(){return null===ee?me:1}function n(){Ne.init(),Ne.scissor(le.copy(ve).multiplyScalar(me)),Ne.viewport(fe.copy(ge).multiplyScalar(me))}function r(){$=null,se=null,ae="",ne=-1,Ne.reset()}function i(e){e.preventDefault(),r(),n(),je.clear(),Xe.clear()}function a(e){var t=e.target;t.removeEventListener("dispose",a),s(t)}function s(e){f(e),je.remove(e)}function f(e){var t=je.get(e).program;e.program=void 0,void 0!==t&&Ye.releaseProgram(t)}function d(e,t,n){e.render(function(e){J.renderBufferImmediate(e,t,n)})}function p(e,t){return Math.abs(t[0])-Math.abs(e[0])}function h(e,t,n,r){if(n&&n.isInstancedBufferGeometry&&null===Ie.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===r&&(r=0),Ne.initAttributes();var o=n.attributes,i=t.getAttributes(),a=e.defaultAttributeValues;for(var s in i){var u=i[s];if(u>=0){var l=o[s];if(void 0!==l){var c=l.normalized,f=l.itemSize,d=Ue.get(l),p=d.buffer,h=d.type,m=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var v=l.data,y=v.stride,g=l.offset;v&&v.isInstancedInterleavedBuffer?(Ne.enableAttributeAndDivisor(u,v.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=v.meshPerAttribute*v.count)):Ne.enableAttribute(u),Re.bindBuffer(Re.ARRAY_BUFFER,p),Re.vertexAttribPointer(u,f,h,c,y*m,(r*y+g)*m)}else l.isInstancedBufferAttribute?(Ne.enableAttributeAndDivisor(u,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):Ne.enableAttribute(u),Re.bindBuffer(Re.ARRAY_BUFFER,p),Re.vertexAttribPointer(u,f,h,c,0,r*f*m)}else if(void 0!==a){var b=a[s];if(void 0!==b)switch(b.length){case 2:Re.vertexAttrib2fv(u,b);break;case 3:Re.vertexAttrib3fv(u,b);break;case 4:Re.vertexAttrib4fv(u,b);break;default:Re.vertexAttrib1fv(u,b)}}}}Ne.disableUnusedAttributes()}function m(e,t,n){if(e.visible){var r=e.layers.test(t.layers);if(r)if(e.isLight)q.push(e);else if(e.isSprite)e.frustumCulled&&!be.intersectsSprite(e)||K.push(e);else if(e.isLensFlare)Z.push(e);else if(e.isImmediateRenderObject)n&&Te.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ee),W.push(e,null,e.material,Te.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||be.intersectsObject(e))){n&&Te.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ee);var o=Xe.update(e),i=e.material;if(Array.isArray(i))for(var a=o.groups,s=0,u=a.length;s<u;s++){var l=a[s],c=i[l.materialIndex];c&&c.visible&&W.push(e,o,c,Te.z,l)}else i.visible&&W.push(e,o,i,Te.z,null)}for(var f=e.children,s=0,u=f.length;s<u;s++)m(f[s],t,n)}}function v(e,t,n,r){for(var o=0,i=e.length;o<i;o++){var a=e[o],s=a.object,u=a.geometry,l=void 0===r?a.material:r,c=a.group;if(n.isArrayCamera){ue=n;for(var f=n.cameras,d=0,p=f.length;d<p;d++){var h=f[d];if(s.layers.test(h.layers)){var m=h.bounds,v=m.x*pe,g=m.y*he,b=m.z*pe,A=m.w*he;J.setViewport(v,g,b,A),J.setScissor(v,g,b,A),J.setScissorTest(!0),y(s,t,h,u,l,c)}}}else ue=null,y(s,t,n,u,l,c)}}function y(e,t,n,r,o,i){if(e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.onBeforeRender(J,t,n,r,o,i),e.isImmediateRenderObject){Ne.setMaterial(o);var a=b(n,t.fog,o,e);ae="",d(e,a,o)}else J.renderBufferDirect(n,t.fog,r,o,e,i);e.onAfterRender(J,t,n,r,o,i)}function g(e,t,n){var r=je.get(e),o=Ye.getParameters(e,Ce,t,Ae.numPlanes,Ae.numIntersection,n),i=Ye.getProgramCode(e,o),s=r.program,u=!0;if(void 0===s)e.addEventListener("dispose",a);else if(s.code!==i)f(e);else{if(void 0!==o.shaderID)return;u=!1}if(u){if(o.shaderID){var l=Ul[o.shaderID];r.shader={name:e.type,uniforms:Ns.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader),s=Ye.acquireProgram(e,r.shader,o,i),r.program=s,e.program=s}var c=s.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<J.maxMorphTargets;d++)c["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var d=0;d<J.maxMorphNormals;d++)c["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var p=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&e.clipping!==!0||(r.numClippingPlanes=Ae.numPlanes,r.numIntersection=Ae.numIntersection,p.clippingPlanes=Ae.uniform),r.fog=t,r.lightsHash=Ce.hash,e.lights&&(p.ambientLightColor.value=Ce.ambient,p.directionalLights.value=Ce.directional,p.spotLights.value=Ce.spot,p.rectAreaLights.value=Ce.rectArea,p.pointLights.value=Ce.point,p.hemisphereLights.value=Ce.hemi,p.directionalShadowMap.value=Ce.directionalShadowMap,p.directionalShadowMatrix.value=Ce.directionalShadowMatrix,p.spotShadowMap.value=Ce.spotShadowMap,p.spotShadowMatrix.value=Ce.spotShadowMatrix,p.pointShadowMap.value=Ce.pointShadowMap,p.pointShadowMatrix.value=Ce.pointShadowMatrix);var h=r.program.getUniforms(),m=G.seqWithValue(h.seq,p);r.uniformsList=m}function b(e,t,n,r){de=0;var o=je.get(n);if(we&&(_e||e!==se)){var i=e===se&&n.id===ne;Ae.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,o,i)}n.needsUpdate===!1&&(void 0===o.program?n.needsUpdate=!0:n.fog&&o.fog!==t?n.needsUpdate=!0:n.lights&&o.lightsHash!==Ce.hash?n.needsUpdate=!0:void 0===o.numClippingPlanes||o.numClippingPlanes===Ae.numPlanes&&o.numIntersection===Ae.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(g(n,t,r),n.needsUpdate=!1);var a=!1,s=!1,u=!1,l=o.program,f=l.getUniforms(),d=o.shader.uniforms;if(l.id!==$&&(Re.useProgram(l.program),$=l.id,a=!0,s=!0,u=!0),n.id!==ne&&(ne=n.id,s=!0),a||e!==se){if(f.setValue(Re,"projectionMatrix",e.projectionMatrix),Le.logarithmicDepthBuffer&&f.setValue(Re,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),se!==(ue||e)&&(se=ue||e,s=!0,u=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var p=f.map.cameraPosition;void 0!==p&&p.setValue(Re,Te.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&f.setValue(Re,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){f.setOptional(Re,r,"bindMatrix"),f.setOptional(Re,r,"bindMatrixInverse");var h=r.skeleton;if(h){var m=h.bones;if(Le.floatVertexTextures){if(void 0===h.boneTexture){var v=Math.sqrt(4*m.length);v=Ts.nextPowerOfTwo(Math.ceil(v)),v=Math.max(v,4);var y=new Float32Array(v*v*4);y.set(h.boneMatrices);var b=new c(y,v,v,za,Ia);h.boneMatrices=y,h.boneTexture=b,h.boneTextureSize=v}f.setValue(Re,"boneTexture",h.boneTexture),f.setValue(Re,"boneTextureSize",h.boneTextureSize)}else f.setOptional(Re,h,"boneMatrices")}}return s&&(f.setValue(Re,"toneMappingExposure",J.toneMappingExposure),f.setValue(Re,"toneMappingWhitePoint",J.toneMappingWhitePoint),n.lights&&R(d,u),t&&n.fog&&T(d,t),(n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshNormalMaterial||n.isMeshDepthMaterial)&&A(d,n),n.isLineBasicMaterial?w(d,n):n.isLineDashedMaterial?(w(d,n),_(d,n)):n.isPointsMaterial?E(d,n):n.isMeshLambertMaterial?x(d,n):n.isMeshToonMaterial?S(d,n):n.isMeshPhongMaterial?P(d,n):n.isMeshPhysicalMaterial?O(d,n):n.isMeshStandardMaterial?C(d,n):n.isMeshDepthMaterial?n.displacementMap&&(d.displacementMap.value=n.displacementMap,d.displacementScale.value=n.displacementScale,d.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&M(d,n),void 0!==d.ltcMat&&(d.ltcMat.value=Ls.LTC_MAT_TEXTURE),void 0!==d.ltcMag&&(d.ltcMag.value=Ls.LTC_MAG_TEXTURE),G.upload(Re,o.uniformsList,d,J)),f.setValue(Re,"modelViewMatrix",r.modelViewMatrix),f.setValue(Re,"normalMatrix",r.normalMatrix),f.setValue(Re,"modelMatrix",r.matrixWorld),l}function A(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;if(t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var r=n.offset,o=n.repeat;e.offsetRepeat.value.set(r.x,r.y,o.x,o.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function w(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function _(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function E(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*me,e.scale.value=.5*he,e.map.value=t.map,null!==t.map){var n=t.map.offset,r=t.map.repeat;e.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}function T(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function x(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function P(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function S(e,t){P(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function C(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function O(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,C(e,t)}function M(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function R(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function k(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e[n];o.castShadow&&(Ce.shadows[t]=o,t++)}Ce.shadows.length=t}function I(e,t){var n,r,o,i,a,s,u,l,c=0,f=0,d=0,p=t.matrixWorldInverse,h=0,m=0,v=0,y=0,g=0;for(n=0,r=e.length;n<r;n++)if(o=e[n],a=o.color,s=o.intensity,u=o.distance,l=o.shadow&&o.shadow.map?o.shadow.map.texture:null,o.isAmbientLight)c+=a.r*s,f+=a.g*s,d+=a.b*s;else if(o.isDirectionalLight){var b=Qe.get(o);b.color.copy(o.color).multiplyScalar(o.intensity),b.direction.setFromMatrixPosition(o.matrixWorld),Te.setFromMatrixPosition(o.target.matrixWorld),b.direction.sub(Te),b.direction.transformDirection(p),b.shadow=o.castShadow,o.castShadow&&(i=o.shadow,b.shadowBias=i.bias,b.shadowRadius=i.radius,b.shadowMapSize=i.mapSize),Ce.directionalShadowMap[h]=l,Ce.directionalShadowMatrix[h]=o.shadow.matrix,Ce.directional[h]=b,h++}else if(o.isSpotLight){var b=Qe.get(o);b.position.setFromMatrixPosition(o.matrixWorld),b.position.applyMatrix4(p),b.color.copy(a).multiplyScalar(s),b.distance=u,b.direction.setFromMatrixPosition(o.matrixWorld),Te.setFromMatrixPosition(o.target.matrixWorld),b.direction.sub(Te),b.direction.transformDirection(p),b.coneCos=Math.cos(o.angle),b.penumbraCos=Math.cos(o.angle*(1-o.penumbra)),b.decay=0===o.distance?0:o.decay,b.shadow=o.castShadow,o.castShadow&&(i=o.shadow,b.shadowBias=i.bias,b.shadowRadius=i.radius,b.shadowMapSize=i.mapSize),Ce.spotShadowMap[v]=l,Ce.spotShadowMatrix[v]=o.shadow.matrix,Ce.spot[v]=b,v++}else if(o.isRectAreaLight){var b=Qe.get(o);b.color.copy(a).multiplyScalar(s/(o.width*o.height)),b.position.setFromMatrixPosition(o.matrixWorld),b.position.applyMatrix4(p),Pe.identity(),xe.copy(o.matrixWorld),xe.premultiply(p),Pe.extractRotation(xe),b.halfWidth.set(.5*o.width,0,0),b.halfHeight.set(0,.5*o.height,0),b.halfWidth.applyMatrix4(Pe),b.halfHeight.applyMatrix4(Pe),Ce.rectArea[y]=b,y++}else if(o.isPointLight){var b=Qe.get(o);b.position.setFromMatrixPosition(o.matrixWorld),b.position.applyMatrix4(p),b.color.copy(o.color).multiplyScalar(o.intensity),b.distance=o.distance,b.decay=0===o.distance?0:o.decay,b.shadow=o.castShadow,o.castShadow&&(i=o.shadow,b.shadowBias=i.bias,b.shadowRadius=i.radius,b.shadowMapSize=i.mapSize),Ce.pointShadowMap[m]=l,Ce.pointShadowMatrix[m]=o.shadow.matrix,Ce.point[m]=b,m++}else if(o.isHemisphereLight){var b=Qe.get(o);b.direction.setFromMatrixPosition(o.matrixWorld),b.direction.transformDirection(p),b.direction.normalize(),b.skyColor.copy(o.color).multiplyScalar(s),b.groundColor.copy(o.groundColor).multiplyScalar(s),Ce.hemi[g]=b,g++}Ce.ambient[0]=c,Ce.ambient[1]=f,Ce.ambient[2]=d,Ce.directional.length=h,Ce.spot.length=v,Ce.rectArea.length=y,Ce.point.length=m,Ce.hemi.length=g,Ce.hash=h+","+m+","+v+","+y+","+g+","+Ce.shadows.length}function L(){var e=de;return e>=Le.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+Le.maxTextures),de+=1,e}function N(e){var t;if(e===ga)return Re.REPEAT;if(e===ba)return Re.CLAMP_TO_EDGE;if(e===Aa)return Re.MIRRORED_REPEAT;if(e===wa)return Re.NEAREST;if(e===_a)return Re.NEAREST_MIPMAP_NEAREST;if(e===Ea)return Re.NEAREST_MIPMAP_LINEAR;if(e===Ta)return Re.LINEAR;if(e===xa)return Re.LINEAR_MIPMAP_NEAREST;if(e===Pa)return Re.LINEAR_MIPMAP_LINEAR;if(e===Sa)return Re.UNSIGNED_BYTE;if(e===Na)return Re.UNSIGNED_SHORT_4_4_4_4;if(e===ja)return Re.UNSIGNED_SHORT_5_5_5_1;if(e===Da)return Re.UNSIGNED_SHORT_5_6_5;if(e===Ca)return Re.BYTE;if(e===Oa)return Re.SHORT;if(e===Ma)return Re.UNSIGNED_SHORT;if(e===Ra)return Re.INT;if(e===ka)return Re.UNSIGNED_INT;if(e===Ia)return Re.FLOAT;if(e===La&&(t=Ie.get("OES_texture_half_float"),null!==t))return t.HALF_FLOAT_OES;if(e===Ua)return Re.ALPHA;if(e===Ba)return Re.RGB;if(e===za)return Re.RGBA;if(e===Ha)return Re.LUMINANCE;if(e===Va)return Re.LUMINANCE_ALPHA;if(e===Ga)return Re.DEPTH_COMPONENT;if(e===Wa)return Re.DEPTH_STENCIL;if(e===ki)return Re.FUNC_ADD;if(e===Ii)return Re.FUNC_SUBTRACT;if(e===Li)return Re.FUNC_REVERSE_SUBTRACT;if(e===Di)return Re.ZERO;if(e===Fi)return Re.ONE;if(e===Ui)return Re.SRC_COLOR;if(e===Bi)return Re.ONE_MINUS_SRC_COLOR;if(e===zi)return Re.SRC_ALPHA;if(e===Hi)return Re.ONE_MINUS_SRC_ALPHA;if(e===Vi)return Re.DST_ALPHA;if(e===qi)return Re.ONE_MINUS_DST_ALPHA;if(e===Gi)return Re.DST_COLOR;if(e===Wi)return Re.ONE_MINUS_DST_COLOR;if(e===Xi)return Re.SRC_ALPHA_SATURATE;if((e===Xa||e===Ya||e===Qa||e===Ka)&&(t=Ie.get("WEBGL_compressed_texture_s3tc"),null!==t)){if(e===Xa)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Ya)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Qa)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Ka)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===Za||e===Ja||e===$a||e===es)&&(t=Ie.get("WEBGL_compressed_texture_pvrtc"),null!==t)){if(e===Za)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Ja)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===$a)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===es)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===ts&&(t=Ie.get("WEBGL_compressed_texture_etc1"),null!==t))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===Ni||e===ji)&&(t=Ie.get("EXT_blend_minmax"),null!==t)){if(e===Ni)return t.MIN_EXT;if(e===ji)return t.MAX_EXT}return e===Fa&&(t=Ie.get("WEBGL_depth_texture"),null!==t)?t.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",si),e=e||{};var j=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),D=void 0!==e.context?e.context:null,F=void 0!==e.alpha&&e.alpha,U=void 0===e.depth||e.depth,B=void 0===e.stencil||e.stencil,z=void 0!==e.antialias&&e.antialias,H=void 0===e.premultipliedAlpha||e.premultipliedAlpha,V=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,q=[],W=null,X=new Float32Array(8),K=[],Z=[];this.domElement=j,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=aa,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var J=this,$=null,ee=null,te=null,ne=-1,ae="",se=null,ue=null,le=new o,ce=null,fe=new o,de=0,pe=j.width,he=j.height,me=1,ve=new o(0,0,pe,he),ye=!1,ge=new o(0,0,pe,he),be=new re,Ae=new mt,we=!1,_e=!1,Ee=new l,Te=new u,xe=new l,Pe=new l,Ce={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Oe={geometries:0,textures:0},Me={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Me,memory:Oe,programs:null};var Re;try{var ke={alpha:F,depth:U,stencil:B,antialias:z,premultipliedAlpha:H,preserveDrawingBuffer:V};if(Re=D||j.getContext("webgl",ke)||j.getContext("experimental-webgl",ke),null===Re)throw null!==j.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Re.getShaderPrecisionFormat&&(Re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),j.addEventListener("webglcontextlost",i,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var Ie=new ht(Re);Ie.get("WEBGL_depth_texture"),Ie.get("OES_texture_float"),Ie.get("OES_texture_float_linear"),Ie.get("OES_texture_half_float"),Ie.get("OES_texture_half_float_linear"),Ie.get("OES_standard_derivatives"),Ie.get("ANGLE_instanced_arrays"),Ie.get("OES_element_index_uint")&&(Se.MaxIndex=4294967296);var Le=new ft(Re,Ie,e),Ne=new ct(Re,Ie,N),je=new lt,Fe=new ut(Re,Ie,Ne,je,Le,N,Oe),Ue=new ie(Re),Be=new qe(Re,Ue,Oe),Xe=new We(Re,Be,Me),Ye=new st(this,Le),Qe=new Ge,Ke=new ze,Ze=new De(this,Ne,Xe,H),Je=new pt(this);this.info.programs=Ye.programs;var $e=new Ve(Re,Ie,Me),et=new He(Re,Ie,Me);n(),this.context=Re,this.capabilities=Le,this.extensions=Ie,this.properties=je,this.renderLists=Ke,this.state=Ne,this.vr=Je;var tt=new oe(this,Ce,Xe,Le);this.shadowMap=tt;var nt=new Q(this,K),rt=new Y(this,Z);this.getContext=function(){return Re},this.getContextAttributes=function(){return Re.getContextAttributes()},this.forceContextLoss=function(){var e=Ie.get("WEBGL_lose_context");e&&e.loseContext()},this.getMaxAnisotropy=function(){return Le.getMaxAnisotropy()},this.getPrecision=function(){return Le.precision},this.getPixelRatio=function(){return me},this.setPixelRatio=function(e){void 0!==e&&(me=e,this.setSize(pe,he,!1))},this.getSize=function(){return{width:pe,height:he}},this.setSize=function(e,t,n){var r=Je.getDevice();return r&&r.isPresenting?void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(pe=e,he=t,j.width=e*me,j.height=t*me,n!==!1&&(j.style.width=e+"px",j.style.height=t+"px"),void this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:pe*me,height:he*me}},this.setDrawingBufferSize=function(e,t,n){pe=e,he=t,me=n,j.width=e*n,j.height=t*n,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){ge.set(e,he-t-r,n,r),Ne.viewport(fe.copy(ge).multiplyScalar(me))},this.setScissor=function(e,t,n,r){ve.set(e,he-t-r,n,r),Ne.scissor(le.copy(ve).multiplyScalar(me))},this.setScissorTest=function(e){Ne.setScissorTest(ye=e)},this.getClearColor=Ze.getClearColor,this.setClearColor=Ze.setClearColor,this.getClearAlpha=Ze.getClearAlpha,this.setClearAlpha=Ze.setClearAlpha,this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=Re.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Re.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=Re.STENCIL_BUFFER_BIT),Re.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.resetGLState=r,this.dispose=function(){j.removeEventListener("webglcontextlost",i,!1),Ke.dispose()},this.renderBufferImmediate=function(e,t,n){Ne.initAttributes();var r=je.get(e);e.hasPositions&&!r.position&&(r.position=Re.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=Re.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=Re.createBuffer()),e.hasColors&&!r.color&&(r.color=Re.createBuffer());var o=t.getAttributes();if(e.hasPositions&&(Re.bindBuffer(Re.ARRAY_BUFFER,r.position),Re.bufferData(Re.ARRAY_BUFFER,e.positionArray,Re.DYNAMIC_DRAW),Ne.enableAttribute(o.position),Re.vertexAttribPointer(o.position,3,Re.FLOAT,!1,0,0)),e.hasNormals){if(Re.bindBuffer(Re.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&n.shading===wi)for(var i=0,a=3*e.count;i<a;i+=9){var s=e.normalArray,u=(s[i+0]+s[i+3]+s[i+6])/3,l=(s[i+1]+s[i+4]+s[i+7])/3,c=(s[i+2]+s[i+5]+s[i+8])/3;s[i+0]=u,s[i+1]=l,s[i+2]=c,s[i+3]=u,s[i+4]=l,s[i+5]=c,s[i+6]=u,s[i+7]=l,s[i+8]=c}Re.bufferData(Re.ARRAY_BUFFER,e.normalArray,Re.DYNAMIC_DRAW),Ne.enableAttribute(o.normal),Re.vertexAttribPointer(o.normal,3,Re.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(Re.bindBuffer(Re.ARRAY_BUFFER,r.uv),Re.bufferData(Re.ARRAY_BUFFER,e.uvArray,Re.DYNAMIC_DRAW),Ne.enableAttribute(o.uv),Re.vertexAttribPointer(Ue.uv,2,Re.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==Ei&&(Re.bindBuffer(Re.ARRAY_BUFFER,r.color),Re.bufferData(Re.ARRAY_BUFFER,e.colorArray,Re.DYNAMIC_DRAW),Ne.enableAttribute(o.color),Re.vertexAttribPointer(o.color,3,Re.FLOAT,!1,0,0)),Ne.disableUnusedAttributes(),Re.drawArrays(Re.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,n,r,o,i,a){Ne.setMaterial(o);var s=b(e,n,o,i),u=r.id+"_"+s.id+"_"+(o.wireframe===!0),l=!1;u!==ae&&(ae=u,l=!0);var c=i.morphTargetInfluences;if(void 0!==c){for(var f=[],d=0,m=c.length;d<m;d++){var v=c[d];f.push([v,d])}f.sort(p),f.length>8&&(f.length=8);for(var y=r.morphAttributes,d=0,m=f.length;d<m;d++){var v=f[d];if(X[d]=v[0],0!==v[0]){var g=v[1];o.morphTargets===!0&&y.position&&r.addAttribute("morphTarget"+d,y.position[g]),o.morphNormals===!0&&y.normal&&r.addAttribute("morphNormal"+d,y.normal[g])}else o.morphTargets===!0&&r.removeAttribute("morphTarget"+d),o.morphNormals===!0&&r.removeAttribute("morphNormal"+d)}for(var d=f.length,A=X.length;d<A;d++)X[d]=0;
s.getUniforms().setValue(Re,"morphTargetInfluences",X),l=!0}var g=r.index,w=r.attributes.position,_=1;o.wireframe===!0&&(g=Be.getWireframeAttribute(r),_=2);var E,T=$e;null!==g&&(E=Ue.get(g),T=et,T.setIndex(E)),l&&(h(o,s,r),null!==g&&Re.bindBuffer(Re.ELEMENT_ARRAY_BUFFER,E.buffer));var x=0;null!==g?x=g.count:void 0!==w&&(x=w.count);var P=r.drawRange.start*_,S=r.drawRange.count*_,C=null!==a?a.start*_:0,O=null!==a?a.count*_:1/0,M=Math.max(P,C),R=Math.min(x,P+S,C+O)-1,k=Math.max(0,R-M+1);if(0!==k){if(i.isMesh)if(o.wireframe===!0)Ne.setLineWidth(o.wireframeLinewidth*t()),T.setMode(Re.LINES);else switch(i.drawMode){case fs:T.setMode(Re.TRIANGLES);break;case ds:T.setMode(Re.TRIANGLE_STRIP);break;case ps:T.setMode(Re.TRIANGLE_FAN)}else if(i.isLine){var I=o.linewidth;void 0===I&&(I=1),Ne.setLineWidth(I*t()),i.isLineSegments?T.setMode(Re.LINES):i.isLineLoop?T.setMode(Re.LINE_LOOP):T.setMode(Re.LINE_STRIP)}else i.isPoints&&T.setMode(Re.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&T.renderInstances(r,M,k):T.render(M,k)}},this.compile=function(e,t){q=[],e.traverse(function(e){e.isLight&&q.push(e)}),I(q,t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)g(t.material[n],e.fog,t);else g(t.material,e.fog,t)})},this.animate=function(e){function t(){e(),(Je.getDevice()||window).requestAnimationFrame(t)}(Je.getDevice()||window).requestAnimationFrame(t)},this.render=function(e,t,n,r){if(!t||!t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");ae="",ne=-1,se=null,e.autoUpdate===!0&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Je.enabled&&(t=Je.getCamera(t)),Ee.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),be.setFromMatrix(Ee),q.length=0,K.length=0,Z.length=0,_e=this.localClippingEnabled,we=Ae.init(this.clippingPlanes,_e,t),W=Ke.get(e,t),W.init(),m(e,t,J.sortObjects),W.finish(),J.sortObjects===!0&&W.sort(),we&&Ae.beginShadows(),k(q),tt.render(e,t),I(q,t),we&&Ae.endShadows(),Me.frame++,Me.calls=0,Me.vertices=0,Me.faces=0,Me.points=0,void 0===n&&(n=null),this.setRenderTarget(n),Ze.render(e,t,r);var o=W.opaque,i=W.transparent;if(e.overrideMaterial){var a=e.overrideMaterial;o.length&&v(o,e,t,a),i.length&&v(i,e,t,a)}else o.length&&v(o,e,t),i.length&&v(i,e,t);nt.render(e,t),rt.render(e,t,fe),n&&Fe.updateRenderTargetMipmap(n),Ne.buffers.depth.setTest(!0),Ne.buffers.depth.setMask(!0),Ne.buffers.color.setMask(!0),t.isArrayCamera&&J.setScissorTest(!1),Je.enabled&&Je.submitFrame()},this.setFaceCulling=function(e,t){Ne.setCullFace(e),Ne.setFlipSided(t===pi)},this.allocTextureUnit=L,this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),Fe.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),Fe.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Fe.setTextureCube(t,n):Fe.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return ee},this.setRenderTarget=function(e){ee=e,e&&void 0===je.get(e).__webglFramebuffer&&Fe.setupRenderTarget(e);var t,n=e&&e.isWebGLRenderTargetCube;if(e){var r=je.get(e);t=n?r.__webglFramebuffer[e.activeCubeFace]:r.__webglFramebuffer,le.copy(e.scissor),ce=e.scissorTest,fe.copy(e.viewport)}else t=null,le.copy(ve).multiplyScalar(me),ce=ye,fe.copy(ge).multiplyScalar(me);if(te!==t&&(Re.bindFramebuffer(Re.FRAMEBUFFER,t),te=t),Ne.scissor(le),Ne.setScissorTest(ce),Ne.viewport(fe),n){var o=je.get(e.texture);Re.framebufferTexture2D(Re.FRAMEBUFFER,Re.COLOR_ATTACHMENT0,Re.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,o.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,o,i){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var a=je.get(e).__webglFramebuffer;if(a){var s=!1;a!==te&&(Re.bindFramebuffer(Re.FRAMEBUFFER,a),s=!0);try{var u=e.texture,l=u.format,c=u.type;if(l!==za&&N(l)!==Re.getParameter(Re.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Sa||N(c)===Re.getParameter(Re.IMPLEMENTATION_COLOR_READ_TYPE)||c===Ia&&(Ie.get("OES_texture_float")||Ie.get("WEBGL_color_buffer_float"))||c===La&&Ie.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Re.checkFramebufferStatus(Re.FRAMEBUFFER)===Re.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-o&&Re.readPixels(t,n,r,o,N(l),N(c),i):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&Re.bindFramebuffer(Re.FRAMEBUFFER,te)}}}}function yt(e,t){this.name="",this.color=new W(e),this.density=void 0!==t?t:25e-5}function gt(e,t,n){this.name="",this.color=new W(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function bt(){ue.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function At(e,t,n,r,o){ue.call(this),this.lensFlares=[],this.positionScreen=new u,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,o)}function wt(e){K.call(this),this.type="SpriteMaterial",this.color=new W(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function _t(e){ue.call(this),this.type="Sprite",this.material=void 0!==e?e:new wt}function Et(){ue.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Tt(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new l)}}function xt(){ue.call(this),this.type="Bone"}function Pt(e,t){je.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new l,this.bindMatrixInverse=new l;var n=this.initBones(),r=new Tt(n);this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}function St(e){K.call(this),this.type="LineBasicMaterial",this.color=new W(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Ct(e,t,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ot(e,t)):(ue.call(this),this.type="Line",this.geometry=void 0!==e?e:new Se,void(this.material=void 0!==t?t:new St({color:16777215*Math.random()})))}function Ot(e,t){Ct.call(this,e,t),this.type="LineSegments"}function Mt(e,t){Ct.call(this,e,t),this.type="LineLoop"}function Rt(e){K.call(this),this.type="PointsMaterial",this.color=new W(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function kt(e,t){ue.call(this),this.type="Points",this.geometry=void 0!==e?e:new Se,this.material=void 0!==t?t:new Rt({color:16777215*Math.random()})}function It(){ue.call(this),this.type="Group"}function Lt(e,t,n,o,i,a,s,u,l){function c(){requestAnimationFrame(c),e.readyState>=e.HAVE_CURRENT_DATA&&(f.needsUpdate=!0)}r.call(this,e,t,n,o,i,a,s,u,l),this.generateMipmaps=!1;var f=this;c()}function Nt(e,t,n,o,i,a,s,u,l,c,f,d){r.call(this,null,a,s,u,l,c,o,i,f,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function jt(e,t,n,o,i,a,s,u,l){r.call(this,e,t,n,o,i,a,s,u,l),this.needsUpdate=!0}function Dt(e,t,n,o,i,a,s,u,l,c){if(c=void 0!==c?c:Ga,c!==Ga&&c!==Wa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ga&&(n=Ma),void 0===n&&c===Wa&&(n=Fa),r.call(this,null,o,i,a,s,u,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:wa,this.minFilter=void 0!==u?u:wa,this.flipY=!1,this.generateMipmaps=!1}function Ft(e){Se.call(this),this.type="WireframeGeometry";var t,n,r,o,i,a,s,l,c,f,d=[],p=[0,0],h={},m=["a","b","c"];if(e&&e.isGeometry){var v=e.faces;for(t=0,r=v.length;t<r;t++){var y=v[t];for(n=0;n<3;n++)s=y[m[n]],l=y[m[(n+1)%3]],p[0]=Math.min(s,l),p[1]=Math.max(s,l),c=p[0]+","+p[1],void 0===h[c]&&(h[c]={index1:p[0],index2:p[1]})}for(c in h)a=h[c],f=e.vertices[a.index1],d.push(f.x,f.y,f.z),f=e.vertices[a.index2],d.push(f.x,f.y,f.z)}else if(e&&e.isBufferGeometry){var g,b,A,w,_,E,T,x;if(f=new u,null!==e.index){for(g=e.attributes.position,b=e.index,A=e.groups,0===A.length&&(A=[{start:0,count:b.count,materialIndex:0}]),o=0,i=A.length;o<i;++o)for(w=A[o],_=w.start,E=w.count,t=_,r=_+E;t<r;t+=3)for(n=0;n<3;n++)s=b.getX(t+n),l=b.getX(t+(n+1)%3),p[0]=Math.min(s,l),p[1]=Math.max(s,l),c=p[0]+","+p[1],void 0===h[c]&&(h[c]={index1:p[0],index2:p[1]});for(c in h)a=h[c],f.fromBufferAttribute(g,a.index1),d.push(f.x,f.y,f.z),f.fromBufferAttribute(g,a.index2),d.push(f.x,f.y,f.z)}else for(g=e.attributes.position,t=0,r=g.count/3;t<r;t++)for(n=0;n<3;n++)T=3*t+n,f.fromBufferAttribute(g,T),d.push(f.x,f.y,f.z),x=3*t+(n+1)%3,f.fromBufferAttribute(g,x),d.push(f.x,f.y,f.z)}this.addAttribute("position",new Ee(d,3))}function Ut(e,t,n){he.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Bt(e,t,n)),this.mergeVertices()}function Bt(e,t,n){Se.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,o,i=[],a=[],s=[],l=[],c=1e-5,f=new u,d=new u,p=new u,h=new u,m=new u,v=t+1;for(r=0;r<=n;r++){var y=r/n;for(o=0;o<=t;o++){var g=o/t;d=e(g,y,d),a.push(d.x,d.y,d.z),g-c>=0?(p=e(g-c,y,p),h.subVectors(d,p)):(p=e(g+c,y,p),h.subVectors(p,d)),y-c>=0?(p=e(g,y-c,p),m.subVectors(d,p)):(p=e(g,y+c,p),m.subVectors(p,d)),f.crossVectors(h,m).normalize(),s.push(f.x,f.y,f.z),l.push(g,y)}}for(r=0;r<n;r++)for(o=0;o<t;o++){var b=r*v+o,A=r*v+o+1,w=(r+1)*v+o+1,_=(r+1)*v+o;i.push(b,A,_),i.push(A,w,_)}this.setIndex(i),this.addAttribute("position",new Ee(a,3)),this.addAttribute("normal",new Ee(s,3)),this.addAttribute("uv",new Ee(l,2))}function zt(e,t,n,r){he.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Ht(e,t,n,r)),this.mergeVertices()}function Ht(e,t,r,o){function i(e){for(var n=new u,r=new u,o=new u,i=0;i<t.length;i+=3)d(t[i+0],n),d(t[i+1],r),d(t[i+2],o),a(n,r,o,e)}function a(e,t,n,r){var o,i,a=Math.pow(2,r),s=[];for(o=0;o<=a;o++){s[o]=[];var u=e.clone().lerp(n,o/a),l=t.clone().lerp(n,o/a),c=a-o;for(i=0;i<=c;i++)0===i&&o===a?s[o][i]=u:s[o][i]=u.clone().lerp(l,i/c)}for(o=0;o<a;o++)for(i=0;i<2*(a-o)-1;i++){var d=Math.floor(i/2);i%2===0?(f(s[o][d+1]),f(s[o+1][d]),f(s[o][d])):(f(s[o][d+1]),f(s[o+1][d+1]),f(s[o+1][d]))}}function s(e){for(var t=new u,n=0;n<y.length;n+=3)t.x=y[n+0],t.y=y[n+1],t.z=y[n+2],t.normalize().multiplyScalar(e),y[n+0]=t.x,y[n+1]=t.y,y[n+2]=t.z}function l(){for(var e=new u,t=0;t<y.length;t+=3){e.x=y[t+0],e.y=y[t+1],e.z=y[t+2];var n=m(e)/2/Math.PI+.5,r=v(e)/Math.PI+.5;g.push(n,1-r)}p(),c()}function c(){for(var e=0;e<g.length;e+=6){var t=g[e+0],n=g[e+2],r=g[e+4],o=Math.max(t,n,r),i=Math.min(t,n,r);o>.9&&i<.1&&(t<.2&&(g[e+0]+=1),n<.2&&(g[e+2]+=1),r<.2&&(g[e+4]+=1))}}function f(e){y.push(e.x,e.y,e.z)}function d(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function p(){for(var e=new u,t=new u,r=new u,o=new u,i=new n,a=new n,s=new n,l=0,c=0;l<y.length;l+=9,c+=6){e.set(y[l+0],y[l+1],y[l+2]),t.set(y[l+3],y[l+4],y[l+5]),r.set(y[l+6],y[l+7],y[l+8]),i.set(g[c+0],g[c+1]),a.set(g[c+2],g[c+3]),s.set(g[c+4],g[c+5]),o.copy(e).add(t).add(r).divideScalar(3);var f=m(o);h(i,c+0,e,f),h(a,c+2,t,f),h(s,c+4,r,f)}}function h(e,t,n,r){r<0&&1===e.x&&(g[t]=e.x-1),0===n.x&&0===n.z&&(g[t]=r/2/Math.PI+.5)}function m(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}Se.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:o},r=r||1,o=o||0;var y=[],g=[];i(o),s(r),l(),this.addAttribute("position",new Ee(y,3)),this.addAttribute("normal",new Ee(y.slice(),3)),this.addAttribute("uv",new Ee(g,2)),0===o?this.computeVertexNormals():this.normalizeNormals()}function Vt(e,t){he.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new qt(e,t)),this.mergeVertices()}function qt(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Ht.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Gt(e,t){he.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Wt(e,t)),this.mergeVertices()}function Wt(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ht.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Xt(e,t){he.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Yt(e,t)),this.mergeVertices()}function Yt(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ht.call(this,r,o,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Qt(e,t){he.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Kt(e,t)),this.mergeVertices()}function Kt(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],i=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ht.call(this,o,i,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Zt(e,t,n,r,o,i){he.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:o},void 0!==i&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Jt(e,t,n,r,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Jt(e,t,r,o,i){function a(){for(d=0;d<t;d++)s(d);s(i===!1?t:0),c(),l()}function s(n){var i=e.getPointAt(n/t),a=f.normals[n],s=f.binormals[n];for(p=0;p<=o;p++){var u=p/o*Math.PI*2,l=Math.sin(u),c=-Math.cos(u);m.x=c*a.x+l*s.x,m.y=c*a.y+l*s.y,m.z=c*a.z+l*s.z,m.normalize(),g.push(m.x,m.y,m.z),h.x=i.x+r*m.x,h.y=i.y+r*m.y,h.z=i.z+r*m.z,y.push(h.x,h.y,h.z)}}function l(){for(p=1;p<=t;p++)for(d=1;d<=o;d++){var e=(o+1)*(p-1)+(d-1),n=(o+1)*p+(d-1),r=(o+1)*p+d,i=(o+1)*(p-1)+d;A.push(e,n,i),A.push(n,r,i)}}function c(){for(d=0;d<=t;d++)for(p=0;p<=o;p++)v.x=d/t,v.y=p/o,b.push(v.x,v.y)}Se.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:o,closed:i},t=t||64,r=r||1,o=o||8,i=i||!1;var f=e.computeFrenetFrames(t,i);this.tangents=f.tangents,this.normals=f.normals,this.binormals=f.binormals;var d,p,h=new u,m=new u,v=new n,y=[],g=[],b=[],A=[];a(),this.setIndex(A),this.addAttribute("position",new Ee(y,3)),this.addAttribute("normal",new Ee(g,3)),this.addAttribute("uv",new Ee(b,2))}function $t(e,t,n,r,o,i,a){he.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:o,q:i},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new en(e,t,n,r,o,i)),this.mergeVertices()}function en(e,t,n,r,o,i){function a(e,t,n,r,o){var i=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);o.x=r*(2+u)*.5*i,o.y=r*(2+u)*a*.5,o.z=r*Math.sin(s)*.5}Se.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:o,q:i},e=e||100,t=t||40,n=Math.floor(n)||64,r=Math.floor(r)||8,o=o||2,i=i||3;var s,l,c=[],f=[],d=[],p=[],h=new u,m=new u,v=new u,y=new u,g=new u,b=new u,A=new u;for(s=0;s<=n;++s){var w=s/n*o*Math.PI*2;for(a(w,o,i,e,v),a(w+.01,o,i,e,y),b.subVectors(y,v),A.addVectors(y,v),g.crossVectors(b,A),A.crossVectors(g,b),g.normalize(),A.normalize(),l=0;l<=r;++l){var _=l/r*Math.PI*2,E=-t*Math.cos(_),T=t*Math.sin(_);h.x=v.x+(E*A.x+T*g.x),h.y=v.y+(E*A.y+T*g.y),h.z=v.z+(E*A.z+T*g.z),f.push(h.x,h.y,h.z),m.subVectors(h,v).normalize(),d.push(m.x,m.y,m.z),p.push(s/n),p.push(l/r)}}for(l=1;l<=n;l++)for(s=1;s<=r;s++){var x=(r+1)*(l-1)+(s-1),P=(r+1)*l+(s-1),S=(r+1)*l+s,C=(r+1)*(l-1)+s;c.push(x,P,C),c.push(P,S,C)}this.setIndex(c),this.addAttribute("position",new Ee(f,3)),this.addAttribute("normal",new Ee(d,3)),this.addAttribute("uv",new Ee(p,2))}function tn(e,t,n,r,o){he.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:o},this.fromBufferGeometry(new nn(e,t,n,r,o)),this.mergeVertices()}function nn(e,t,n,r,o){Se.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:o},e=e||100,t=t||40,n=Math.floor(n)||8,r=Math.floor(r)||6,o=o||2*Math.PI;var i,a,s=[],l=[],c=[],f=[],d=new u,p=new u,h=new u;for(i=0;i<=n;i++)for(a=0;a<=r;a++){var m=a/r*o,v=i/n*Math.PI*2;p.x=(e+t*Math.cos(v))*Math.cos(m),p.y=(e+t*Math.cos(v))*Math.sin(m),p.z=t*Math.sin(v),l.push(p.x,p.y,p.z),d.x=e*Math.cos(m),d.y=e*Math.sin(m),h.subVectors(p,d).normalize(),c.push(h.x,h.y,h.z),f.push(a/r),f.push(i/n)}for(i=1;i<=n;i++)for(a=1;a<=r;a++){var y=(r+1)*i+a-1,g=(r+1)*(i-1)+a-1,b=(r+1)*(i-1)+a,A=(r+1)*i+a;s.push(y,g,A),s.push(g,b,A)}this.setIndex(s),this.addAttribute("position",new Ee(l,3)),this.addAttribute("normal",new Ee(c,3)),this.addAttribute("uv",new Ee(f,2))}function rn(e,t){he.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new on(e,t)),this.mergeVertices()}function on(e,t){"undefined"!=typeof e&&(Se.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function an(e,t){he.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new sn(e,t)),this.mergeVertices()}function sn(e,t){t=t||{};var n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new he;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),on.call(this,r,t),this.type="TextBufferGeometry"}function un(e,t,n,r,o,i,a){he.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:o,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new ln(e,t,n,r,o,i,a)),this.mergeVertices()}function ln(e,t,n,r,o,i,a){Se.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:o,thetaStart:i,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?i:0,a=void 0!==a?a:Math.PI;var s,l,c=i+a,f=0,d=[],p=new u,h=new u,m=[],v=[],y=[],g=[];for(l=0;l<=n;l++){var b=[],A=l/n;for(s=0;s<=t;s++){var w=s/t;p.x=-e*Math.cos(r+w*o)*Math.sin(i+A*a),p.y=e*Math.cos(i+A*a),p.z=e*Math.sin(r+w*o)*Math.sin(i+A*a),v.push(p.x,p.y,p.z),h.set(p.x,p.y,p.z).normalize(),y.push(h.x,h.y,h.z),g.push(w,1-A),b.push(f++)}d.push(b)}for(l=0;l<n;l++)for(s=0;s<t;s++){var _=d[l][s+1],E=d[l][s],T=d[l+1][s],x=d[l+1][s+1];(0!==l||i>0)&&m.push(_,E,x),(l!==n-1||c<Math.PI)&&m.push(E,T,x)}this.setIndex(m),this.addAttribute("position",new Ee(v,3)),this.addAttribute("normal",new Ee(y,3)),this.addAttribute("uv",new Ee(g,2))}function cn(e,t,n,r,o,i){he.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:i},this.fromBufferGeometry(new fn(e,t,n,r,o,i)),this.mergeVertices()}function fn(e,t,r,o,i,a){Se.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:o,thetaStart:i,thetaLength:a},e=e||20,t=t||50,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,r=void 0!==r?Math.max(3,r):8,o=void 0!==o?Math.max(1,o):1;var s,l,c,f=[],d=[],p=[],h=[],m=e,v=(t-e)/o,y=new u,g=new n;for(l=0;l<=o;l++){for(c=0;c<=r;c++)s=i+c/r*a,y.x=m*Math.cos(s),y.y=m*Math.sin(s),d.push(y.x,y.y,y.z),p.push(0,0,1),g.x=(y.x/t+1)/2,g.y=(y.y/t+1)/2,h.push(g.x,g.y);m+=v}for(l=0;l<o;l++){var b=l*(r+1);for(c=0;c<r;c++){s=c+b;var A=s,w=s+r+1,_=s+r+2,E=s+1;f.push(A,w,E),f.push(w,_,E)}}this.setIndex(f),this.addAttribute("position",new Ee(d,3)),this.addAttribute("normal",new Ee(p,3)),this.addAttribute("uv",new Ee(h,2))}function dn(e,t,n,r){he.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new pn(e,t,n,r)),this.mergeVertices()}function pn(e,t,r,o){Se.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:o},t=Math.floor(t)||12,r=r||0,o=o||2*Math.PI,o=Ts.clamp(o,0,2*Math.PI);var i,a,s,l=[],c=[],f=[],d=1/t,p=new u,h=new n;for(a=0;a<=t;a++){var m=r+a*d*o,v=Math.sin(m),y=Math.cos(m);for(s=0;s<=e.length-1;s++)p.x=e[s].x*v,p.y=e[s].y,p.z=e[s].x*y,c.push(p.x,p.y,p.z),h.x=a/t,h.y=s/(e.length-1),f.push(h.x,h.y)}for(a=0;a<t;a++)for(s=0;s<e.length-1;s++){i=s+a*e.length;var g=i,b=i+e.length,A=i+e.length+1,w=i+1;l.push(g,b,w),l.push(b,A,w)}if(this.setIndex(l),this.addAttribute("position",new Ee(c,3)),this.addAttribute("uv",new Ee(f,2)),this.computeVertexNormals(),o===2*Math.PI){var _=this.attributes.normal.array,E=new u,T=new u,x=new u;for(i=t*e.length*3,a=0,s=0;a<e.length;a++,s+=3)E.x=_[s+0],E.y=_[s+1],E.z=_[s+2],T.x=_[i+s+0],T.y=_[i+s+1],T.z=_[i+s+2],x.addVectors(E,T).normalize(),_[s+0]=_[i+s+0]=x.x,_[s+1]=_[i+s+1]=x.y,_[s+2]=_[i+s+2]=x.z}}function hn(e,t){he.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new mn(e,t)),this.mergeVertices()}function mn(e,t){function n(e){var n,s,l,c=o.length/3,f=e.extractPoints(t),d=f.shape,p=f.holes;if(ql.isClockWise(d)===!1)for(d=d.reverse(),n=0,s=p.length;n<s;n++)l=p[n],ql.isClockWise(l)===!0&&(p[n]=l.reverse());var h=ql.triangulateShape(d,p);for(n=0,s=p.length;n<s;n++)l=p[n],d=d.concat(l);for(n=0,s=d.length;n<s;n++){var m=d[n];o.push(m.x,m.y,0),i.push(0,0,1),a.push(m.x,m.y)}for(n=0,s=h.length;n<s;n++){var v=h[n],y=v[0]+c,g=v[1]+c,b=v[2]+c;r.push(y,g,b),u+=3}}Se.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],o=[],i=[],a=[],s=0,u=0;if(Array.isArray(e)===!1)n(e);else for(var l=0;l<e.length;l++)n(e[l]),this.addGroup(s,u,l),s+=u,u=0;this.setIndex(r),this.addAttribute("position",new Ee(o,3)),this.addAttribute("normal",new Ee(i,3)),this.addAttribute("uv",new Ee(a,2))}function vn(e,t){Se.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,o,i,a=[],s=Math.cos(Ts.DEG2RAD*t),u=[0,0],l={},c=["a","b","c"];e.isBufferGeometry?(i=new he,i.fromBufferGeometry(e)):i=e.clone(),i.mergeVertices(),i.computeFaceNormals();for(var f=i.vertices,d=i.faces,p=0,h=d.length;p<h;p++)for(var m=d[p],v=0;v<3;v++)n=m[c[v]],r=m[c[(v+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),o=u[0]+","+u[1],void 0===l[o]?l[o]={index1:u[0],index2:u[1],face1:p,face2:void 0}:l[o].face2=p;for(o in l){var y=l[o];if(void 0===y.face2||d[y.face1].normal.dot(d[y.face2].normal)<=s){var g=f[y.index1];a.push(g.x,g.y,g.z),g=f[y.index2],a.push(g.x,g.y,g.z)}}this.addAttribute("position",new Ee(a,3))}function yn(e,t,n,r,o,i,a,s){he.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:o,openEnded:i,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new gn(e,t,n,r,o,i,a,s)),this.mergeVertices()}function gn(e,t,r,o,i,a,s,l){function c(){var n,a,c=new u,f=new u,w=0,_=(t-e)/r;for(a=0;a<=i;a++){var E=[],T=a/i,x=T*(t-e)+e;for(n=0;n<=o;n++){var P=n/o,S=P*l+s,C=Math.sin(S),O=Math.cos(S);f.x=x*C,f.y=-T*r+b,f.z=x*O,h.push(f.x,f.y,f.z),c.set(C,_,O).normalize(),m.push(c.x,c.y,c.z),v.push(P,1-T),E.push(y++)}g.push(E)}for(n=0;n<o;n++)for(a=0;a<i;a++){var M=g[a][n],R=g[a+1][n],k=g[a+1][n+1],I=g[a][n+1];p.push(M,R,I),p.push(R,k,I),w+=6}d.addGroup(A,w,0),A+=w}function f(r){var i,a,c,f=new n,g=new u,w=0,_=r===!0?e:t,E=r===!0?1:-1;for(a=y,i=1;i<=o;i++)h.push(0,b*E,0),m.push(0,E,0),v.push(.5,.5),y++;for(c=y,i=0;i<=o;i++){var T=i/o,x=T*l+s,P=Math.cos(x),S=Math.sin(x);g.x=_*S,g.y=b*E,g.z=_*P,h.push(g.x,g.y,g.z),m.push(0,E,0),f.x=.5*P+.5,f.y=.5*S*E+.5,v.push(f.x,f.y),y++}for(i=0;i<o;i++){var C=a+i,O=c+i;r===!0?p.push(O,O+1,C):p.push(O+1,O,C),w+=3}d.addGroup(A,w,r===!0?1:2),A+=w}Se.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:o,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:l};var d=this;e=void 0!==e?e:20,t=void 0!==t?t:20,r=void 0!==r?r:100,o=Math.floor(o)||8,i=Math.floor(i)||1,a=void 0!==a&&a,s=void 0!==s?s:0,l=void 0!==l?l:2*Math.PI;var p=[],h=[],m=[],v=[],y=0,g=[],b=r/2,A=0;c(),a===!1&&(e>0&&f(!0),t>0&&f(!1)),this.setIndex(p),this.addAttribute("position",new Ee(h,3)),this.addAttribute("normal",new Ee(m,3)),this.addAttribute("uv",new Ee(v,2))}function bn(e,t,n,r,o,i,a){yn.call(this,0,e,t,n,r,o,i,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:i,thetaLength:a}}function An(e,t,n,r,o,i,a){gn.call(this,0,e,t,n,r,o,i,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:i,thetaLength:a}}function wn(e,t,n,r){he.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new _n(e,t,n,r)),this.mergeVertices()}function _n(e,t,r,o){Se.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:o},e=e||50,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI;var i,a,s=[],l=[],c=[],f=[],d=new u,p=new n;for(l.push(0,0,0),c.push(0,0,1),f.push(.5,.5),a=0,i=3;a<=t;a++,i+=3){var h=r+a/t*o;d.x=e*Math.cos(h),d.y=e*Math.sin(h),l.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(l[i]/e+1)/2,p.y=(l[i+1]/e+1)/2,f.push(p.x,p.y)}for(i=1;i<=t;i++)s.push(i,i+1,0);this.setIndex(s),this.addAttribute("position",new Ee(l,3)),this.addAttribute("normal",new Ee(c,3)),this.addAttribute("uv",new Ee(f,2))}function En(e){Z.call(this,{uniforms:Ns.merge([Ls.lights,{opacity:{value:1}}]),vertexShader:Fl.shadow_vert,fragmentShader:Fl.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}}),this.setValues(e)}function Tn(e){Z.call(this,e),this.type="RawShaderMaterial"}function xn(e){K.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new W(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Pn(e){xn.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Sn(e){K.call(this),this.type="MeshPhongMaterial",this.color=new W(16777215),this.specular=new W(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=na,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Cn(e){Sn.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function On(e){K.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Mn(e){K.call(this),this.type="MeshLambertMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=na,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Rn(e){K.call(this),this.type="LineDashedMaterial",this.color=new W(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}function kn(e,t,n){var r=this,o=!1,i=0,a=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,o===!1&&void 0!==r.onStart&&r.onStart(e,i,a),o=!0},this.itemEnd=function(e){i++,void 0!==r.onProgress&&r.onProgress(e,i,a),i===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)}}function In(e){this.manager=void 0!==e?e:Yl}function Ln(e){this.manager=void 0!==e?e:Yl,this._parser=null}function Nn(e){this.manager=void 0!==e?e:Yl,this._parser=null}function jn(e){this.manager=void 0!==e?e:Yl}function Dn(e){this.manager=void 0!==e?e:Yl}function Fn(e){this.manager=void 0!==e?e:Yl}function Un(e,t){ue.call(this),this.type="Light",this.color=new W(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Bn(e,t,n){Un.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ue.DefaultUp),this.updateMatrix(),this.groundColor=new W(t)}function zn(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.matrix=new l}function Hn(){zn.call(this,new fe(50,1,.5,500));
}function Vn(e,t,n,r,o,i){Un.call(this,e,t),this.type="SpotLight",this.position.copy(ue.DefaultUp),this.updateMatrix(),this.target=new ue,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==o?o:0,this.decay=void 0!==i?i:1,this.shadow=new Hn}function qn(e,t,n,r){Un.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new zn(new fe(90,1,.5,500))}function Gn(){zn.call(this,new ce(-5,5,5,-5,.5,500))}function Wn(e,t){Un.call(this,e,t),this.type="DirectionalLight",this.position.copy(ue.DefaultUp),this.updateMatrix(),this.target=new ue,this.shadow=new Gn}function Xn(e,t){Un.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Yn(e,t,n,r){Un.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Qn(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Kn(e,t,n,r){Qn.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Zn(e,t,n,r){Qn.call(this,e,t,n,r)}function Jn(e,t,n,r){Qn.call(this,e,t,n,r)}function $n(e,t,n,r){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=Ql.convertArray(t,this.TimeBufferType),this.values=Ql.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function er(e,t,n,r){$n.call(this,e,t,n,r)}function tr(e,t,n,r){Qn.call(this,e,t,n,r)}function nr(e,t,n,r){$n.call(this,e,t,n,r)}function rr(e,t,n,r){$n.call(this,e,t,n,r)}function or(e,t,n,r){$n.call(this,e,t,n,r)}function ir(e,t,n){$n.call(this,e,t,n)}function ar(e,t,n,r){$n.call(this,e,t,n,r)}function sr(e,t,n,r){$n.apply(this,arguments)}function ur(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Ts.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function lr(e){this.manager=void 0!==e?e:Yl,this.textures={}}function cr(e){this.manager=void 0!==e?e:Yl}function fr(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function dr(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Yl,this.withCredentials=!1}function pr(e){this.manager=void 0!==e?e:Yl,this.texturePath=""}function hr(e,t,n,r,o){var i=.5*(r-t),a=.5*(o-n),s=e*e,u=e*s;return(2*n-2*r+i+a)*u+(-3*n+3*r-2*i-a)*s+i*e+n}function mr(e,t){var n=1-e;return n*n*t}function vr(e,t){return 2*(1-e)*e*t}function yr(e,t){return e*e*t}function gr(e,t,n,r){return mr(e,t)+vr(e,n)+yr(e,r)}function br(e,t){var n=1-e;return n*n*n*t}function Ar(e,t){var n=1-e;return 3*n*n*e*t}function wr(e,t){return 3*(1-e)*e*e*t}function _r(e,t){return e*e*e*t}function Er(e,t,n,r,o){return br(e,t)+Ar(e,n)+wr(e,r)+_r(e,o)}function Tr(){this.arcLengthDivisions=200}function xr(e,t){Tr.call(this),this.v1=e,this.v2=t}function Pr(){Tr.call(this),this.curves=[],this.autoClose=!1}function Sr(e,t,n,r,o,i,a,s){Tr.call(this),this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=i,this.aClockwise=a,this.aRotation=s||0}function Cr(e){Tr.call(this),this.points=void 0===e?[]:e}function Or(e,t,n,r){Tr.call(this),this.v0=e,this.v1=t,this.v2=n,this.v3=r}function Mr(e,t,n){Tr.call(this),this.v0=e,this.v1=t,this.v2=n}function Rr(e){Pr.call(this),this.currentPoint=new n,e&&this.fromPoints(e)}function kr(){Rr.apply(this,arguments),this.holes=[]}function Ir(){this.subPaths=[],this.currentPath=null}function Lr(e){this.data=e}function Nr(e){this.manager=void 0!==e?e:Yl}function jr(e){this.manager=void 0!==e?e:Yl}function Dr(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fe,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fe,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Fr(e,t,n){ue.call(this),this.type="CubeCamera";var r=90,o=1,i=new fe(r,o,e,t);i.up.set(0,-1,0),i.lookAt(new u(1,0,0)),this.add(i);var s=new fe(r,o,e,t);s.up.set(0,-1,0),s.lookAt(new u(-1,0,0)),this.add(s);var l=new fe(r,o,e,t);l.up.set(0,0,1),l.lookAt(new u(0,1,0)),this.add(l);var c=new fe(r,o,e,t);c.up.set(0,0,-1),c.lookAt(new u(0,-1,0)),this.add(c);var f=new fe(r,o,e,t);f.up.set(0,-1,0),f.lookAt(new u(0,0,1)),this.add(f);var d=new fe(r,o,e,t);d.up.set(0,-1,0),d.lookAt(new u(0,0,-1)),this.add(d);var p={format:Ba,magFilter:Ta,minFilter:Ta};this.renderTarget=new a(n,n,p),this.renderTarget.texture.name="CubeCamera",this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,i,n),n.activeCubeFace=1,e.render(t,s,n),n.activeCubeFace=2,e.render(t,l,n),n.activeCubeFace=3,e.render(t,c,n),n.activeCubeFace=4,e.render(t,f,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,e.render(t,d,n),e.setRenderTarget(null)}}function Ur(){ue.call(this),this.type="AudioListener",this.context=rc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Br(e){ue.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function zr(e){Br.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Hr(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Vr(e,t,n){this.binding=e,this.valueSize=n;var r,o=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":o=Array,r=this._select;break;default:r=this._lerp}this.buffer=new o(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function qr(e,t,n){var r=n||Gr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Gr(e,t,n){this.path=t,this.parsedPath=n||Gr.parseTrackName(t),this.node=Gr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Wr(e){this.uuid=Ts.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var o=this;this.stats={objects:{get total(){return o._objects.length},get inUse(){return this.total-o.nCachedObjects_}},get bindingsPerObject(){return o._bindings.length}}}function Xr(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,o=r.length,i=new Array(o),a={endingStart:us,endingEnd:us},s=0;s!==o;++s){var u=r[s].createInterpolant(null);i[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=i,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rs,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Yr(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Qr(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Kr(){Se.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Zr(e,t,n,r){this.uuid=Ts.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}function Jr(e,t){this.uuid=Ts.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function $r(e,t,n){Jr.call(this,e,t),this.meshPerAttribute=n||1}function eo(e,t,n){me.call(this,e,t),this.meshPerAttribute=n||1}function to(e,t,n,r){this.ray=new Ie(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function no(e,t){return e.distance-t.distance}function ro(e,t,n,r){if(e.visible!==!1&&(e.raycast(t,n),r===!0))for(var o=e.children,i=0,a=o.length;i<a;i++)ro(o[i],t,n,!0)}function oo(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function io(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function ao(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function so(e,t){je.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r="__default",o=0,i=n-1,a=n/1;this.createAnimation(r,o,i,a),this.setAnimationWeight(r,1)}function uo(e){ue.call(this),this.material=e,this.render=function(e){}}function lo(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var o=void 0!==n?n:16711680,i=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new Se,l=new Ee(2*a*3,3);u.addAttribute("position",l),Ot.call(this,u,new St({color:o,linewidth:i})),this.matrixAutoUpdate=!1,this.update()}function co(e){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new Se,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1,i=32;r<i;r++,o++){var a=r/i*Math.PI*2,s=o/i*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}t.addAttribute("position",new Ee(n,3));var u=new St({fog:!1});this.cone=new Ot(t,u),this.add(this.cone),this.update()}function fo(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,fo(e.children[n]));return t}function po(e){for(var t=fo(e),n=new Se,r=[],o=[],i=new W(0,0,1),a=new W(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(i.r,i.g,i.b),o.push(a.r,a.g,a.b))}n.addAttribute("position",new Ee(r,3)),n.addAttribute("color",new Ee(o,3));var l=new St({vertexColors:xi,depthTest:!1,depthWrite:!1,transparent:!0});Ot.call(this,n,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.onBeforeRender()}function ho(e,t){this.light=e,this.light.updateMatrixWorld();var n=new ln(t,4,2),r=new ke({wireframe:!0,fog:!1});r.color.copy(this.light.color),je.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function mo(e){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new St({color:e.color}),n=new Se;n.addAttribute("position",new me(new Float32Array(15),3)),this.add(new Ct(n,t)),this.update()}function vo(e,t){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var n=new Wt(t);n.rotateY(.5*Math.PI);var r=new ke({vertexColors:xi,wireframe:!0}),o=n.getAttribute("position"),i=new Float32Array(3*o.count);n.addAttribute("color",new me(i,3)),this.add(new je(n,r)),this.update()}function yo(e,t,n,r){e=e||10,t=t||10,n=new W(void 0!==n?n:4473924),r=new W(void 0!==r?r:8947848);for(var o=t/2,i=e/t,a=e/2,s=[],u=[],l=0,c=0,f=-a;l<=t;l++,f+=i){s.push(-a,0,f,a,0,f),s.push(f,0,-a,f,0,a);var d=l===o?n:r;d.toArray(u,c),c+=3,d.toArray(u,c),c+=3,d.toArray(u,c),c+=3,d.toArray(u,c),c+=3}var p=new Se;p.addAttribute("position",new Ee(s,3)),p.addAttribute("color",new Ee(u,3));var h=new St({vertexColors:xi});Ot.call(this,p,h)}function go(e,t,n,r,o,i){e=e||10,t=t||16,n=n||8,r=r||64,o=new W(void 0!==o?o:4473924),i=new W(void 0!==i?i:8947848);var a,s,u,l,c,f,d,p=[],h=[];for(l=0;l<=t;l++)u=l/t*(2*Math.PI),a=Math.sin(u)*e,s=Math.cos(u)*e,p.push(0,0,0),p.push(a,0,s),d=1&l?o:i,h.push(d.r,d.g,d.b),h.push(d.r,d.g,d.b);for(l=0;l<=n;l++)for(d=1&l?o:i,f=e-e/n*l,c=0;c<r;c++)u=c/r*(2*Math.PI),a=Math.sin(u)*f,s=Math.cos(u)*f,p.push(a,0,s),h.push(d.r,d.g,d.b),u=(c+1)/r*(2*Math.PI),a=Math.sin(u)*f,s=Math.cos(u)*f,p.push(a,0,s),h.push(d.r,d.g,d.b);var m=new Se;m.addAttribute("position",new Ee(p,3)),m.addAttribute("color",new Ee(h,3));var v=new St({vertexColors:xi});Ot.call(this,m,v)}function bo(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var o=void 0!==n?n:16776960,i=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new Se,l=new Ee(2*a*3,3);u.addAttribute("position",l),Ot.call(this,u,new St({color:o,linewidth:i})),this.matrixAutoUpdate=!1,this.update()}function Ao(e,t){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var n=new Se;n.addAttribute("position",new Ee([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new St({fog:!1});this.add(new Ct(n,r)),n=new Se,n.addAttribute("position",new Ee([0,0,0,0,0,1],3)),this.add(new Ct(n,r)),this.update()}function wo(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){i.push(0,0,0),a.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(i.length/3-1)}var r=new Se,o=new St({color:16777215,vertexColors:Ti}),i=[],a=[],s={},u=new W(16755200),l=new W(16711680),c=new W(43775),f=new W(16777215),d=new W(3355443);t("n1","n2",u),t("n2","n4",u),t("n4","n3",u),t("n3","n1",u),t("f1","f2",u),t("f2","f4",u),t("f4","f3",u),t("f3","f1",u),t("n1","f1",u),t("n2","f2",u),t("n3","f3",u),t("n4","f4",u),t("p","n1",l),t("p","n2",l),t("p","n3",l),t("p","n4",l),t("u1","u2",c),t("u2","u3",c),t("u3","u1",c),t("c","t",f),t("p","c",d),t("cn1","cn2",d),t("cn3","cn4",d),t("cf1","cf2",d),t("cf3","cf4",d),r.addAttribute("position",new Ee(i,3)),r.addAttribute("color",new Ee(a,3)),Ot.call(this,r,o),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function _o(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),o=new Se;o.setIndex(new me(n,1)),o.addAttribute("position",new me(r,3)),Ot.call(this,o,new St({color:t})),this.matrixAutoUpdate=!1,this.update()}function Eo(e,t,n,r,o,i){ue.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===o&&(o=.2*n),void 0===i&&(i=.2*o),void 0===oc&&(oc=new Se,oc.addAttribute("position",new Ee([0,0,0,0,1,0],3)),ic=new gn(0,.5,1,5,1),ic.translate(0,-.5,0)),this.position.copy(t),this.line=new Ct(oc,new St({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new je(ic,new ke({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,o,i)}function To(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Se;r.addAttribute("position",new Ee(t,3)),r.addAttribute("color",new Ee(n,3));var o=new St({vertexColors:xi});Ot.call(this,r,o)}function xo(){function e(e,i,a,s){t=e,n=a,r=-3*e+3*i-2*a-s,o=2*e-2*i+a+s}var t=0,n=0,r=0,o=0;return{initCatmullRom:function(t,n,r,o,i){e(n,r,i*(r-t),i*(o-n))},initNonuniformCatmullRom:function(t,n,r,o,i,a,s){var u=(n-t)/i-(r-t)/(i+a)+(r-n)/a,l=(r-n)/a-(o-n)/(a+s)+(o-r)/s;u*=a,l*=a,e(n,r,u,l)},calc:function(e){var i=e*e,a=i*e;return t+n*e+r*i+o*a}}}function Po(e){Tr.call(this),e.length<2&&console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries."),this.points=e||[],this.closed=!1}function So(e,t,n,r){Tr.call(this),this.v0=e,this.v1=t,this.v2=n,this.v3=r}function Co(e,t,n){Tr.call(this),this.v0=e,this.v1=t,this.v2=n}function Oo(e,t){Tr.call(this),this.v1=e,this.v2=t}function Mo(e,t,n,r,o,i){Sr.call(this,e,t,n,n,r,o,i)}function Ro(e,t,n,r,o,i,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new de(e,t,n,o,i,a)}function ko(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Io(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Lo(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new kt(e,t)}function No(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new _t(e)}function jo(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new kt(e,t)}function Do(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Rt(e)}function Fo(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Rt(e)}function Uo(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Rt(e)}function Bo(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new u(e,t,n)}function zo(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new me(e,t).setDynamic(!0)}function Ho(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new ve(e,t)}function Vo(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ye(e,t)}function qo(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ge(e,t)}function Go(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new be(e,t)}function Wo(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Ae(e,t)}function Xo(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new we(e,t)}function Yo(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new _e(e,t)}function Qo(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ee(e,t)}function Ko(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Te(e,t)}function Zo(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Po.call(this,e),this.type="catmullrom",this.closed=!0}function Jo(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Po.call(this,e),this.type="catmullrom"}function $o(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Po.call(this,e),this.type="catmullrom"}function ei(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new _o(e,t)}function ti(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ot(new vn(e.geometry),new St({color:void 0!==t?t:16777215}))}function ni(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ot(new Ft(e.geometry),new St({color:void 0!==t?t:16777215}))}function ri(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new In(e)}function oi(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Nn(e)}function ii(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function ai(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}}(),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var o=r.indexOf(t);o!==-1&&r.splice(o,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var r=n.slice(0),o=0,i=r.length;o<i;o++)r[o].call(this,e)}}}});var si="86",ui={LEFT:0,MIDDLE:1,RIGHT:2},li=0,ci=1,fi=2,di=3,pi=0,hi=1,mi=0,vi=1,yi=2,gi=0,bi=1,Ai=2,wi=1,_i=2,Ei=0,Ti=1,xi=2,Pi=0,Si=1,Ci=2,Oi=3,Mi=4,Ri=5,ki=100,Ii=101,Li=102,Ni=103,ji=104,Di=200,Fi=201,Ui=202,Bi=203,zi=204,Hi=205,Vi=206,qi=207,Gi=208,Wi=209,Xi=210,Yi=0,Qi=1,Ki=2,Zi=3,Ji=4,$i=5,ea=6,ta=7,na=0,ra=1,oa=2,ia=0,aa=1,sa=2,ua=3,la=4,ca=300,fa=301,da=302,pa=303,ha=304,ma=305,va=306,ya=307,ga=1e3,ba=1001,Aa=1002,wa=1003,_a=1004,Ea=1005,Ta=1006,xa=1007,Pa=1008,Sa=1009,Ca=1010,Oa=1011,Ma=1012,Ra=1013,ka=1014,Ia=1015,La=1016,Na=1017,ja=1018,Da=1019,Fa=1020,Ua=1021,Ba=1022,za=1023,Ha=1024,Va=1025,qa=za,Ga=1026,Wa=1027,Xa=2001,Ya=2002,Qa=2003,Ka=2004,Za=2100,Ja=2101,$a=2102,es=2103,ts=2151,ns=2200,rs=2201,os=2202,is=2300,as=2301,ss=2302,us=2400,ls=2401,cs=2402,fs=0,ds=1,ps=2,hs=3e3,ms=3001,vs=3007,ys=3002,gs=3003,bs=3004,As=3005,ws=3006,_s=3200,Es=3201,Ts={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0;return function(){for(var o=0;o<36;o++)8===o||13===o||18===o||23===o?n[o]="-":14===o?n[o]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,n[o]=t[19===o?3&e|8:e]);return n.join("")}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,o){return r+(e-t)*(o-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ts.DEG2RAD},radToDeg:function(e){return e*Ts.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}};Object.defineProperties(n.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(n.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new n,t=new n;return function(n,r){return e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),o=this.x-e.x,i=this.y-e.y;return this.x=o*n-i*r+e.x,this.y=o*r+i*n+e.y,this}});var xs=0;r.DEFAULT_IMAGE=void 0,r.DEFAULT_MAPPING=ca,Object.defineProperty(r.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Object.assign(r.prototype,t.prototype,{constructor:r,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){function t(e){var t;return void 0!==e.toDataURL?t=e:(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=Ts.generateUUID()),void 0===e.images[r.uuid]&&(e.images[r.uuid]={uuid:r.uuid,url:t(r)}),n.image=r.uuid}return e.textures[this.uuid]=n,n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===ca){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case ga:e.x=e.x-Math.floor(e.x);break;case ba:e.x=e.x<0?0:1;break;case Aa:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ga:e.y=e.y-Math.floor(e.y);break;case ba:e.y=e.y<0?0:1;break;case Aa:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.assign(o.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){
return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,o=this.w,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12]*o,this.y=i[1]*t+i[5]*n+i[9]*r+i[13]*o,this.z=i[2]*t+i[6]*n+i[10]*r+i[14]*o,this.w=i[3]*t+i[7]*n+i[11]*r+i[15]*o,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,o,i=.01,a=.1,s=e.elements,u=s[0],l=s[4],c=s[8],f=s[1],d=s[5],p=s[9],h=s[2],m=s[6],v=s[10];if(Math.abs(l-f)<i&&Math.abs(c-h)<i&&Math.abs(p-m)<i){if(Math.abs(l+f)<a&&Math.abs(c+h)<a&&Math.abs(p+m)<a&&Math.abs(u+d+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var y=(u+1)/2,g=(d+1)/2,b=(v+1)/2,A=(l+f)/4,w=(c+h)/4,_=(p+m)/4;return y>g&&y>b?y<i?(n=0,r=.707106781,o=.707106781):(n=Math.sqrt(y),r=A/n,o=w/n):g>b?g<i?(n=.707106781,r=0,o=.707106781):(r=Math.sqrt(g),n=A/r,o=_/r):b<i?(n=.707106781,r=.707106781,o=0):(o=Math.sqrt(b),n=w/o,r=_/o),this.set(n,r,o,t),this}var E=Math.sqrt((m-p)*(m-p)+(c-h)*(c-h)+(f-l)*(f-l));return Math.abs(E)<.001&&(E=1),this.x=(m-p)/E,this.y=(c-h)/E,this.z=(f-l)/E,this.w=Math.acos((u+d+v-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new o,t=new o),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Object.assign(i.prototype,t.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.isWebGLRenderTargetCube=!0,Object.assign(s,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,o,i,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],f=o[i+0],d=o[i+1],p=o[i+2],h=o[i+3];if(c!==h||s!==f||u!==d||l!==p){var m=1-a,v=s*f+u*d+l*p+c*h,y=v>=0?1:-1,g=1-v*v;if(g>Number.EPSILON){var b=Math.sqrt(g),A=Math.atan2(b,v*y);m=Math.sin(m*A)/b,a=Math.sin(a*A)/b}var w=a*y;if(s=s*m+f*w,u=u*m+d*w,l=l*m+p*w,c=c*m+h*w,m===1-a){var _=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=_,u*=_,l*=_,c*=_}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}}),Object.defineProperties(s.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(s.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,o=e._z,i=e.order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(o/2),f=s(n/2),d=s(r/2),p=s(o/2);return"XYZ"===i?(this._x=f*l*c+u*d*p,this._y=u*d*c-f*l*p,this._z=u*l*p+f*d*c,this._w=u*l*c-f*d*p):"YXZ"===i?(this._x=f*l*c+u*d*p,this._y=u*d*c-f*l*p,this._z=u*l*p-f*d*c,this._w=u*l*c+f*d*p):"ZXY"===i?(this._x=f*l*c-u*d*p,this._y=u*d*c+f*l*p,this._z=u*l*p+f*d*c,this._w=u*l*c-f*d*p):"ZYX"===i?(this._x=f*l*c-u*d*p,this._y=u*d*c+f*l*p,this._z=u*l*p-f*d*c,this._w=u*l*c+f*d*p):"YZX"===i?(this._x=f*l*c+u*d*p,this._y=u*d*c+f*l*p,this._z=u*l*p-f*d*c,this._w=u*l*c-f*d*p):"XZY"===i&&(this._x=f*l*c-u*d*p,this._y=u*d*c-f*l*p,this._z=u*l*p+f*d*c,this._w=u*l*c+f*d*p),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],o=n[4],i=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],f=n[10],d=r+s+f;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-u)*t,this._y=(i-l)*t,this._z=(a-o)*t):r>s&&r>f?(t=2*Math.sqrt(1+r-s-f),this._w=(c-u)/t,this._x=.25*t,this._y=(o+a)/t,this._z=(i+l)/t):s>f?(t=2*Math.sqrt(1+s-r-f),this._w=(i-l)/t,this._x=(o+a)/t,this._y=.25*t,this._z=(u+c)/t):(t=2*Math.sqrt(1+f-r-s),this._w=(a-o)/t,this._x=(i+l)/t,this._y=(u+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new u,n=1e-6;return function(r,o){return void 0===t&&(t=new u),e=r.dot(o)+1,e<n?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,o),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,o=e._z,i=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+i*a+r*u-o*s,this._y=r*l+i*s+o*a-n*u,this._z=o*l+i*u+n*s-r*a,this._w=i*l-n*a-r*s-o*u,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,o=this._z,i=this._w,a=i*e._w+n*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=i,this._x=n,this._y=r,this._z=o,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(i+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(o+this._z),this;var u=Math.atan2(s,a),l=Math.sin((1-t)*u)/s,c=Math.sin(t*u)/s;return this._w=i*l+this._w*c,this._x=n*l+this._x*c,this._y=r*l+this._y*c,this._z=o*l+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(u.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new s;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new s;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6]*r,this.y=o[1]*t+o[4]*n+o[7]*r,this.z=o[2]*t+o[5]*n+o[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,o=e.elements,i=1/(o[3]*t+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*n+o[8]*r+o[12])*i,this.y=(o[1]*t+o[5]*n+o[9]*r+o[13])*i,this.z=(o[2]*t+o[6]*n+o[10]*r+o[14])*i,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,o=e.x,i=e.y,a=e.z,s=e.w,u=s*t+i*r-a*n,l=s*n+a*t-o*r,c=s*r+o*n-i*t,f=-o*t-i*n-a*r;return this.x=u*s+f*-o+l*-a-c*-i,this.y=l*s+f*-i+c*-o-u*-a,this.z=c*s+f*-a+u*-i-l*-o,this},project:function(){var e=new l;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new l;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r,this.y=o[1]*t+o[5]*n+o[9]*r,this.z=o[2]*t+o[6]*n+o[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new u,t=new u;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,o=this.z;return this.x=r*e.z-o*e.y,this.y=o*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,o=e.z,i=t.x,a=t.y,s=t.z;return this.x=r*s-o*a,this.y=o*i-n*s,this.z=n*a-r*i,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new u;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new u;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Ts.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(l.prototype,{isMatrix4:!0,set:function(e,t,n,r,o,i,a,s,u,l,c,f,d,p,h,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=o,v[5]=i,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=f,v[3]=d,v[7]=p,v[11]=h,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new l).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new u;return function(t){var n=this.elements,r=t.elements,o=1/e.setFromMatrixColumn(t,0).length(),i=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*o,n[1]=r[1]*o,n[2]=r[2]*o,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,o=e.z,i=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(o),c=Math.sin(o);if("XYZ"===e.order){var f=i*l,d=i*c,p=a*l,h=a*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=d+p*u,t[5]=f-h*u,t[9]=-a*s,t[2]=h-f*u,t[6]=p+d*u,t[10]=i*s}else if("YXZ"===e.order){var m=s*l,v=s*c,y=u*l,g=u*c;t[0]=m+g*a,t[4]=y*a-v,t[8]=i*u,t[1]=i*c,t[5]=i*l,t[9]=-a,t[2]=v*a-y,t[6]=g+m*a,t[10]=i*s}else if("ZXY"===e.order){var m=s*l,v=s*c,y=u*l,g=u*c;t[0]=m-g*a,t[4]=-i*c,t[8]=y+v*a,t[1]=v+y*a,t[5]=i*l,t[9]=g-m*a,t[2]=-i*u,t[6]=a,t[10]=i*s}else if("ZYX"===e.order){var f=i*l,d=i*c,p=a*l,h=a*c;t[0]=s*l,t[4]=p*u-d,t[8]=f*u+h,t[1]=s*c,t[5]=h*u+f,t[9]=d*u-p,t[2]=-u,t[6]=a*s,t[10]=i*s}else if("YZX"===e.order){var b=i*s,A=i*u,w=a*s,_=a*u;t[0]=s*l,t[4]=_-b*c,t[8]=w*c+A,t[1]=c,t[5]=i*l,t[9]=-a*l,t[2]=-u*l,t[6]=A*c+w,t[10]=b-_*c}else if("XZY"===e.order){var b=i*s,A=i*u,w=a*s,_=a*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=b*c+_,t[5]=i*l,t[9]=A*c-w,t[2]=w*c-A,t[6]=a*l,t[10]=_*c+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,r=e._y,o=e._z,i=e._w,a=n+n,s=r+r,u=o+o,l=n*a,c=n*s,f=n*u,d=r*s,p=r*u,h=o*u,m=i*a,v=i*s,y=i*u;return t[0]=1-(d+h),t[4]=c-y,t[8]=f+v,t[1]=c+y,t[5]=1-(l+h),t[9]=p-m,t[2]=f-v,t[6]=p+m,t[10]=1-(l+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new u,t=new u,n=new u;return function(r,o,i){var a=this.elements;return n.subVectors(r,o),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(i,n),0===e.lengthSq()&&(1===Math.abs(i.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(i,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,o=this.elements,i=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],f=n[9],d=n[13],p=n[2],h=n[6],m=n[10],v=n[14],y=n[3],g=n[7],b=n[11],A=n[15],w=r[0],_=r[4],E=r[8],T=r[12],x=r[1],P=r[5],S=r[9],C=r[13],O=r[2],M=r[6],R=r[10],k=r[14],I=r[3],L=r[7],N=r[11],j=r[15];return o[0]=i*w+a*x+s*O+u*I,o[4]=i*_+a*P+s*M+u*L,o[8]=i*E+a*S+s*R+u*N,o[12]=i*T+a*C+s*k+u*j,o[1]=l*w+c*x+f*O+d*I,o[5]=l*_+c*P+f*M+d*L,o[9]=l*E+c*S+f*R+d*N,o[13]=l*T+c*C+f*k+d*j,o[2]=p*w+h*x+m*O+v*I,o[6]=p*_+h*P+m*M+v*L,o[10]=p*E+h*S+m*R+v*N,o[14]=p*T+h*C+m*k+v*j,o[3]=y*w+g*x+b*O+A*I,o[7]=y*_+g*P+b*M+A*L,o[11]=y*E+g*S+b*R+A*N,o[15]=y*T+g*C+b*k+A*j,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new u;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],o=e[12],i=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],f=e[10],d=e[14],p=e[3],h=e[7],m=e[11],v=e[15];return p*(+o*s*c-r*u*c-o*a*f+n*u*f+r*a*d-n*s*d)+h*(+t*s*d-t*u*f+o*i*f-r*i*d+r*u*l-o*s*l)+m*(+t*u*c-t*a*d-o*i*c+n*i*d+o*a*l-n*u*l)+v*(-r*a*l-t*s*c+t*a*f+r*i*c-n*i*f+n*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,o=r[0],i=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],f=r[7],d=r[8],p=r[9],h=r[10],m=r[11],v=r[12],y=r[13],g=r[14],b=r[15],A=p*g*f-y*h*f+y*c*m-l*g*m-p*c*b+l*h*b,w=v*h*f-d*g*f-v*c*m+u*g*m+d*c*b-u*h*b,_=d*y*f-v*p*f+v*l*m-u*y*m-d*l*b+u*p*b,E=v*p*c-d*y*c-v*l*h+u*y*h+d*l*g-u*p*g,T=o*A+i*w+a*_+s*E;if(0===T){var x="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t===!0)throw new Error(x);return console.warn(x),this.identity()}var P=1/T;return n[0]=A*P,n[1]=(y*h*s-p*g*s-y*a*m+i*g*m+p*a*b-i*h*b)*P,n[2]=(l*g*s-y*c*s+y*a*f-i*g*f-l*a*b+i*c*b)*P,n[3]=(p*c*s-l*h*s-p*a*f+i*h*f+l*a*m-i*c*m)*P,n[4]=w*P,n[5]=(d*g*s-v*h*s+v*a*m-o*g*m-d*a*b+o*h*b)*P,n[6]=(v*c*s-u*g*s-v*a*f+o*g*f+u*a*b-o*c*b)*P,n[7]=(u*h*s-d*c*s+d*a*f-o*h*f-u*a*m+o*c*m)*P,n[8]=_*P,n[9]=(v*p*s-d*y*s-v*i*m+o*y*m+d*i*b-o*p*b)*P,n[10]=(u*y*s-v*l*s+v*i*f-o*y*f-u*i*b+o*l*b)*P,n[11]=(d*l*s-u*p*s-d*i*f+o*p*f+u*i*m-o*l*m)*P,n[12]=E*P,n[13]=(d*y*a-v*p*a+v*i*h-o*y*h-d*i*g+o*p*g)*P,n[14]=(v*l*a-u*y*a-v*i*c+o*y*c+u*i*g-o*l*g)*P,n[15]=(u*p*a-d*l*a+d*i*c-o*p*c-u*i*h+o*l*h)*P,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,o=e.z;return t[0]*=n,t[4]*=r,t[8]*=o,t[1]*=n,t[5]*=r,t[9]*=o,t[2]*=n,t[6]*=r,t[10]*=o,t[3]*=n,t[7]*=r,t[11]*=o,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),o=1-n,i=e.x,a=e.y,s=e.z,u=o*i,l=o*a;return this.set(u*i+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*i,0,u*s-r*a,l*s+r*i,o*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new u,t=new l;return function(n,r,o){var i=this.elements,a=e.set(i[0],i[1],i[2]).length(),s=e.set(i[4],i[5],i[6]).length(),u=e.set(i[8],i[9],i[10]).length(),l=this.determinant();l<0&&(a=-a),n.x=i[12],n.y=i[13],n.z=i[14],t.copy(this);var c=1/a,f=1/s,d=1/u;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=f,t.elements[5]*=f,t.elements[6]*=f,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,r.setFromRotationMatrix(t),o.x=a,o.y=s,o.z=u,this}}(),makePerspective:function(e,t,n,r,o,i){void 0===i&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*o/(t-e),u=2*o/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),f=-(i+o)/(i-o),d=-2*i*o/(i-o);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,o,i){var a=this.elements,s=1/(t-e),u=1/(n-r),l=1/(i-o),c=(t+e)*s,f=(n+r)*u,d=(i+o)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.prototype.isDataTexture=!0,f.prototype=Object.create(r.prototype),f.prototype.constructor=f,f.prototype.isCubeTexture=!0,Object.defineProperty(f.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ps=new r,Ss=new f,Cs=[],Os=[],Ms=new Float32Array(16),Rs=new Float32Array(9);H.prototype.setValue=function(e,t){for(var n=this.seq,r=0,o=n.length;r!==o;++r){var i=n[r];i.setValue(e,t[i.id])}};var ks=/([\w\d_]+)(\])?(\[|\.)?/g;G.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},G.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},G.upload=function(e,t,n,r){for(var o=0,i=t.length;o!==i;++o){var a=t[o],s=n[a.id];s.needsUpdate!==!1&&a.setValue(e,s.value,r)}},G.seqWithValue=function(e,t){for(var n=[],r=0,o=e.length;r!==o;++r){var i=e[r];i.id in t&&n.push(i)}return n};var Is={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(W.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=Ts.euclideanModulo(t,1),n=Ts.clamp(n,0,1),r=Ts.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var o=r<=.5?r*(1+n):r+n-r*n,i=2*r-o;this.r=e(i,o,t+1/3),this.g=e(i,o,t),this.b=e(i,o,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,o=n[1],i=n[2];switch(o){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(r[1],10))/255,
this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(e&&e.length>0){var l=Is[e];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,n,r=e||{h:0,s:0,l:0},o=this.r,i=this.g,a=this.b,s=Math.max(o,i,a),u=Math.min(o,i,a),l=(u+s)/2;if(u===s)t=0,n=0;else{var c=s-u;switch(n=l<=.5?c/(s+u):c/(2-s-u),s){case o:t=(i-a)/c+(i<a?6:0);break;case i:t=(a-o)/c+2;break;case a:t=(o-i)/c+4}t/=6}return r.h=t,r.s=n,r.l=l,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var Ls={common:{diffuse:{value:new W(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new o(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new W(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new W(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new o(0,0,1,1)}}},Ns={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var o in r)t[o]=r[o]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var o=e[n][r];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture)?t[n][r]=o.clone():Array.isArray(o)?t[n][r]=o.slice():t[n][r]=o}}return t}},js="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",Ds="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",Fs="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",Us="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",Bs="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",zs="\nvec3 transformed = vec3( position );\n",Hs="\nvec3 objectNormal = vec3( normal );\n",Vs="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",qs="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",Gs="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",Ws="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",Xs="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",Ys="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",Qs="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",Ks="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",Zs="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Js="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",$s="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",eu="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",tu="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",nu="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",ru="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",ou="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",iu="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",au="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",su="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",uu="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = asin( flipNormal * reflectVec.y ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",lu="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",cu="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",fu="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",du="\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",pu="#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",hu="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",mu="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",vu="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",yu="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",gu="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",bu="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",Au="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",wu="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",_u="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",Eu="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",Tu="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",xu="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",Pu="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",Su="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",Cu="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",Ou="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",Mu="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",Ru="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",ku="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",Iu="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",Lu="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",Nu="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",ju="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",Du="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",Fu="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",Uu="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",Bu="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",zu="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",Hu="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",Vu="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",qu="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",Gu="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",Wu="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",Xu="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",Yu="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Qu="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",Ku="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",Zu="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",Ju="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",$u="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",el="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",tl="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",nl="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",rl="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",ol="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",il="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",al="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",sl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",ul="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",ll="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",cl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",fl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",dl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",pl="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",hl="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",ml="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",vl="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",yl="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",gl="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",bl="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",Al="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",wl="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",_l="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",El="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",Tl="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",xl="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",Pl="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",Sl="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",Cl="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",Ol="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",Ml="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",Rl="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",kl="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",Il="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",Ll="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Nl="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",jl="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",Dl="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Fl={
alphamap_fragment:js,alphamap_pars_fragment:Ds,alphatest_fragment:Fs,aomap_fragment:Us,aomap_pars_fragment:Bs,begin_vertex:zs,beginnormal_vertex:Hs,bsdfs:Vs,bumpmap_pars_fragment:qs,clipping_planes_fragment:Gs,clipping_planes_pars_fragment:Ws,clipping_planes_pars_vertex:Xs,clipping_planes_vertex:Ys,color_fragment:Qs,color_pars_fragment:Ks,color_pars_vertex:Zs,color_vertex:Js,common:$s,cube_uv_reflection_fragment:eu,defaultnormal_vertex:tu,displacementmap_pars_vertex:nu,displacementmap_vertex:ru,emissivemap_fragment:ou,emissivemap_pars_fragment:iu,encodings_fragment:au,encodings_pars_fragment:su,envmap_fragment:uu,envmap_pars_fragment:lu,envmap_pars_vertex:cu,envmap_vertex:fu,fog_vertex:du,fog_pars_vertex:pu,fog_fragment:hu,fog_pars_fragment:mu,gradientmap_pars_fragment:vu,lightmap_fragment:yu,lightmap_pars_fragment:gu,lights_lambert_vertex:bu,lights_pars:Au,lights_phong_fragment:wu,lights_phong_pars_fragment:_u,lights_physical_fragment:Eu,lights_physical_pars_fragment:Tu,lights_template:xu,logdepthbuf_fragment:Pu,logdepthbuf_pars_fragment:Su,logdepthbuf_pars_vertex:Cu,logdepthbuf_vertex:Ou,map_fragment:Mu,map_pars_fragment:Ru,map_particle_fragment:ku,map_particle_pars_fragment:Iu,metalnessmap_fragment:Lu,metalnessmap_pars_fragment:Nu,morphnormal_vertex:ju,morphtarget_pars_vertex:Du,morphtarget_vertex:Fu,normal_flip:Uu,normal_fragment:Bu,normalmap_pars_fragment:zu,packing:Hu,premultiplied_alpha_fragment:Vu,project_vertex:qu,dithering_fragment:Gu,dithering_pars_fragment:Wu,roughnessmap_fragment:Xu,roughnessmap_pars_fragment:Yu,shadowmap_pars_fragment:Qu,shadowmap_pars_vertex:Ku,shadowmap_vertex:Zu,shadowmask_pars_fragment:Ju,skinbase_vertex:$u,skinning_pars_vertex:el,skinning_vertex:tl,skinnormal_vertex:nl,specularmap_fragment:rl,specularmap_pars_fragment:ol,tonemapping_fragment:il,tonemapping_pars_fragment:al,uv_pars_fragment:sl,uv_pars_vertex:ul,uv_vertex:ll,uv2_pars_fragment:cl,uv2_pars_vertex:fl,uv2_vertex:dl,worldpos_vertex:pl,cube_frag:hl,cube_vert:ml,depth_frag:vl,depth_vert:yl,distanceRGBA_frag:gl,distanceRGBA_vert:bl,equirect_frag:Al,equirect_vert:wl,linedashed_frag:_l,linedashed_vert:El,meshbasic_frag:Tl,meshbasic_vert:xl,meshlambert_frag:Pl,meshlambert_vert:Sl,meshphong_frag:Cl,meshphong_vert:Ol,meshphysical_frag:Ml,meshphysical_vert:Rl,normal_frag:kl,normal_vert:Il,points_frag:Ll,points_vert:Nl,shadow_frag:jl,shadow_vert:Dl},Ul={basic:{uniforms:Ns.merge([Ls.common,Ls.aomap,Ls.lightmap,Ls.fog]),vertexShader:Fl.meshbasic_vert,fragmentShader:Fl.meshbasic_frag},lambert:{uniforms:Ns.merge([Ls.common,Ls.aomap,Ls.lightmap,Ls.emissivemap,Ls.fog,Ls.lights,{emissive:{value:new W(0)}}]),vertexShader:Fl.meshlambert_vert,fragmentShader:Fl.meshlambert_frag},phong:{uniforms:Ns.merge([Ls.common,Ls.aomap,Ls.lightmap,Ls.emissivemap,Ls.bumpmap,Ls.normalmap,Ls.displacementmap,Ls.gradientmap,Ls.fog,Ls.lights,{emissive:{value:new W(0)},specular:{value:new W(1118481)},shininess:{value:30}}]),vertexShader:Fl.meshphong_vert,fragmentShader:Fl.meshphong_frag},standard:{uniforms:Ns.merge([Ls.common,Ls.aomap,Ls.lightmap,Ls.emissivemap,Ls.bumpmap,Ls.normalmap,Ls.displacementmap,Ls.roughnessmap,Ls.metalnessmap,Ls.fog,Ls.lights,{emissive:{value:new W(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Fl.meshphysical_vert,fragmentShader:Fl.meshphysical_frag},points:{uniforms:Ns.merge([Ls.points,Ls.fog]),vertexShader:Fl.points_vert,fragmentShader:Fl.points_frag},dashed:{uniforms:Ns.merge([Ls.common,Ls.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Fl.linedashed_vert,fragmentShader:Fl.linedashed_frag},depth:{uniforms:Ns.merge([Ls.common,Ls.displacementmap]),vertexShader:Fl.depth_vert,fragmentShader:Fl.depth_frag},normal:{uniforms:Ns.merge([Ls.common,Ls.bumpmap,Ls.normalmap,Ls.displacementmap,{opacity:{value:1}}]),vertexShader:Fl.normal_vert,fragmentShader:Fl.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Fl.cube_vert,fragmentShader:Fl.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Fl.equirect_vert,fragmentShader:Fl.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new u}},vertexShader:Fl.distanceRGBA_vert,fragmentShader:Fl.distanceRGBA_frag}};Ul.physical={uniforms:Ns.merge([Ul.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Fl.meshphysical_vert,fragmentShader:Fl.meshphysical_frag},Object.assign(X.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new n;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new n;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new n;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var r=t||new n;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var r=t||new n;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new n;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Bl=0;Object.assign(K.prototype,t.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):"overdraw"===t?this[t]=Number(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var n=void 0===e;n&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Si&&(r.blending=this.blending),this.shading!==_i&&(r.shading=this.shading),this.side!==gi&&(r.side=this.side),this.vertexColors!==Ei&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),r.skinning=this.skinning,r.morphTargets=this.morphTargets,r.dithering=this.dithering,n){var o=t(e.textures),i=t(e.images);o.length>0&&(r.textures=o),i.length>0&&(r.images=i)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var o=0;o!==r;++o)n[o]=t[o].clone()}return this.clippingPlanes=n,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Z.prototype=Object.create(K.prototype),Z.prototype.constructor=Z,Z.prototype.isShaderMaterial=!0,Z.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ns.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Z.prototype.toJSON=function(e){var t=K.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},J.prototype=Object.create(K.prototype),J.prototype.constructor=J,J.prototype.isMeshDepthMaterial=!0,J.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Object.assign($.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=+(1/0),n=+(1/0),r=+(1/0),o=-(1/0),i=-(1/0),a=-(1/0),s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],f=e[s+2];l<t&&(t=l),c<n&&(n=c),f<r&&(r=f),l>o&&(o=l),c>i&&(i=c),f>a&&(a=f)}return this.min.set(t,n,r),this.max.set(o,i,a),this},setFromBufferAttribute:function(e){for(var t=+(1/0),n=+(1/0),r=+(1/0),o=-(1/0),i=-(1/0),a=-(1/0),s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),f=e.getZ(s);l<t&&(t=l),c<n&&(n=c),f<r&&(r=f),l>o&&(o=l),c>i&&(i=c),f>a&&(a=f)}return this.min.set(t,n,r),this.max.set(o,i,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new u;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new u;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new u;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e=new u;return function(t){var n=this;return t.updateMatrixWorld(!0),t.traverse(function(t){var r,o,i=t.geometry;if(void 0!==i)if(i.isGeometry){var a=i.vertices;for(r=0,o=a.length;r<o;r++)e.copy(a[r]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}else if(i.isBufferGeometry){var s=i.attributes.position;if(void 0!==s)for(r=0,o=s.count;r<o;r++)e.fromBufferAttribute(s,r).applyMatrix4(t.matrixWorld),n.expandByPoint(e)}}),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var n=t||new u;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new u;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){var n=t||new u;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new u;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new u;return function(t){var n=t||new ee;return this.getCenter(n.center),n.radius=.5*this.getSize(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new u,new u,new u,new u,new u,new u,new u,new u];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(ee.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new $;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).getCenter(r);for(var o=0,i=0,a=t.length;i<a;i++)o=Math.max(o,r.distanceToSquared(t[i]));return this.radius=Math.sqrt(o),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new u;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new $;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(te.prototype,{isMatrix3:!0,set:function(e,t,n,r,o,i,a,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=o,l[5]=s,l[6]=n,l[7]=i,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new u;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,o=this.elements,i=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],f=n[2],d=n[5],p=n[8],h=r[0],m=r[3],v=r[6],y=r[1],g=r[4],b=r[7],A=r[2],w=r[5],_=r[8];return o[0]=i*h+a*y+s*A,o[3]=i*m+a*g+s*w,o[6]=i*v+a*b+s*_,o[1]=u*h+l*y+c*A,o[4]=u*m+l*g+c*w,o[7]=u*v+l*b+c*_,o[2]=f*h+d*y+p*A,o[5]=f*m+d*g+p*w,o[8]=f*v+d*b+p*_,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*i*l-t*a*u-n*o*l+n*a*s+r*o*u-r*i*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,o=n[0],i=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],f=n[7],d=n[8],p=d*u-l*f,h=l*c-d*s,m=f*s-u*c,v=o*p+i*h+a*m;if(0===v){var y="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t===!0)throw new Error(y);return console.warn(y),this.identity()}var g=1/v;return r[0]=p*g,r[1]=(a*f-d*i)*g,r[2]=(l*i-a*u)*g,r[3]=h*g,r[4]=(d*o-a*c)*g,r[5]=(a*s-l*o)*g,r[6]=m*g,r[7]=(i*c-f*o)*g,r[8]=(u*o-i*s)*g,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}),Object.assign(ne.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new u,t=new u;return function(n,r,o){var i=e.subVectors(o,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(i,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e),r=t||new u;return r.copy(this.normal).multiplyScalar(n)},intersectLine:function(){var e=new u;return function(t,n){var r=n||new u,o=t.delta(e),i=this.normal.dot(o);if(0!==i){var a=-(t.start.dot(this.normal)+this.constant)/i;if(!(a<0||a>1))return r.copy(o).multiplyScalar(a).add(t.start)}else if(0===this.distanceToPoint(t.start))return r.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new u;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new u,t=new te;return function(n,r){var o=this.coplanarPoint(e).applyMatrix4(n),i=r||t.getNormalMatrix(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(re.prototype,{set:function(e,t,n,r,o,i){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(o),a[5].copy(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],f=n[8],d=n[9],p=n[10],h=n[11],m=n[12],v=n[13],y=n[14],g=n[15];return t[0].setComponents(a-r,c-s,h-f,g-m).normalize(),t[1].setComponents(a+r,c+s,h+f,g+m).normalize(),t[2].setComponents(a+o,c+u,h+d,g+v).normalize(),t[3].setComponents(a-o,c-u,h-d,g-v).normalize(),t[4].setComponents(a-i,c-l,h-p,g-y).normalize(),t[5].setComponents(a+i,c+l,h+p,g+y).normalize(),this},intersectsObject:function(){var e=new ee;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new ee;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,o=0;o<6;o++){var i=t[o].distanceToPoint(n);if(i<r)return!1}return!0},intersectsBox:function(){var e=new u,t=new u;return function(n){for(var r=this.planes,o=0;o<6;o++){var i=r[o];e.x=i.normal.x>0?n.min.x:n.max.x,t.x=i.normal.x>0?n.max.x:n.min.x,e.y=i.normal.y>0?n.min.y:n.max.y,t.y=i.normal.y>0?n.max.y:n.min.y,e.z=i.normal.z>0?n.min.z:n.max.z,t.z=i.normal.z>0?n.max.z:n.min.z;var a=i.distanceToPoint(e),s=i.distanceToPoint(t);if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}),ae.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ae.DefaultOrder="XYZ",Object.defineProperties(ae.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(ae.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Ts.clamp,o=e.elements,i=o[0],a=o[4],s=o[8],u=o[1],l=o[5],c=o[9],f=o[2],d=o[6],p=o[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-f,i),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,i))):"ZYX"===t?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(u,i)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-f,i)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new l;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new s;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new u(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(se.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var zl=0;ue.DefaultUp=new u(0,1,0),ue.DefaultMatrixAutoUpdate=!0,Object.assign(ue.prototype,t.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new s;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new u(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new u(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new u(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new u;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new u(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new u(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new u(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new l;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new l;return function(t){this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return n!==-1&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var o=this.children[n],i=o.getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){var t=e||new u;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new u,t=new u;return function(n){var r=n||new s;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,r,t),r}}(),getWorldRotation:function(){var e=new s;return function(t){var n=t||new ae;return this.getWorldQuaternion(e),n.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new u,t=new s;return function(n){
var r=n||new u;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(){var e=new s;return function(t){var n=t||new u;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){function t(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}function n(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var r=void 0===e||""===e,o={};r&&(e={geometries:{},materials:{},textures:{},images:{}},o.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(i.geometry=t(e.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var a=[],s=0,u=this.material.length;s<u;s++)a.push(t(e.materials,this.material[s]));i.material=a}else i.material=t(e.materials,this.material);if(this.children.length>0){i.children=[];for(var s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(r){var l=n(e.geometries),c=n(e.materials),f=n(e.textures),d=n(e.images);l.length>0&&(o.geometries=l),c.length>0&&(o.materials=c),f.length>0&&(o.textures=f),d.length>0&&(o.images=d)}return o.object=i,o},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),le.prototype=Object.assign(Object.create(ue.prototype),{constructor:le,isCamera:!0,copy:function(e,t){return ue.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new s;return function(t){var n=t||new u;return this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){ue.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),ce.prototype=Object.assign(Object.create(le.prototype),{constructor:ce,isOrthographicCamera:!0,copy:function(e,t){return le.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,o,i){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:o,height:i},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=n-e,i=n+e,a=r+t,s=r-t;if(null!==this.view){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,f=(this.top-this.bottom)/this.view.height;o+=c*(this.view.offsetX/u),i=o+c*(this.view.width/u),a-=f*(this.view.offsetY/l),s=a-f*(this.view.height/l)}this.projectionMatrix.makeOrthographic(o,i,a,s,this.near,this.far)},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),fe.prototype=Object.assign(Object.create(le.prototype),{constructor:fe,isPerspectiveCamera:!0,copy:function(e,t){return le.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ts.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ts.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ts.RAD2DEG*Math.atan(Math.tan(.5*Ts.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,o,i){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:o,height:i},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ts.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,o=-.5*r,i=this.view;if(null!==i){var a=i.fullWidth,s=i.fullHeight;o+=i.offsetX*r/a,t-=i.offsetY*n/s,r*=i.width/a,n*=i.height/s}var u=this.filmOffset;0!==u&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-n,e,this.far)},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Object.assign(de.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Hl=0;Object.assign(he.prototype,t.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=(new te).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){var o=this.vertices[n];o.applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var a=0,s=i.vertexNormals.length;a<s;a++)i.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new l;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new l;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new l;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new l;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new l;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ue;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,n,o){var i=void 0!==s?[d[e].clone(),d[t].clone(),d[n].clone()]:[],a=void 0!==l?[r.colors[e].clone(),r.colors[t].clone(),r.colors[n].clone()]:[],u=new de(e,t,n,i,a,o);r.faces.push(u),void 0!==c&&r.faceVertexUvs[0].push([p[e].clone(),p[t].clone(),p[n].clone()]),void 0!==f&&r.faceVertexUvs[1].push([h[e].clone(),h[t].clone(),h[n].clone()])}var r=this,o=null!==e.index?e.index.array:void 0,i=e.attributes,a=i.position.array,s=void 0!==i.normal?i.normal.array:void 0,l=void 0!==i.color?i.color.array:void 0,c=void 0!==i.uv?i.uv.array:void 0,f=void 0!==i.uv2?i.uv2.array:void 0;void 0!==f&&(this.faceVertexUvs[1]=[]);for(var d=[],p=[],h=[],m=0,v=0;m<a.length;m+=3,v+=2)r.vertices.push(new u(a[m],a[m+1],a[m+2])),void 0!==s&&d.push(new u(s[m],s[m+1],s[m+2])),void 0!==l&&r.colors.push(new W(l[m],l[m+1],l[m+2])),void 0!==c&&p.push(new n(c[v],c[v+1])),void 0!==f&&h.push(new n(f[v],f[v+1]));var y=e.groups;if(y.length>0)for(var m=0;m<y.length;m++)for(var g=y[m],b=g.start,A=g.count,v=b,w=b+A;v<w;v+=3)void 0!==o?t(o[v],o[v+1],o[v+2],g.materialIndex):t(v,v+1,v+2,g.materialIndex);else if(void 0!==o)for(var m=0;m<o.length;m+=3)t(o[m],o[m+1],o[m+2]);else for(var m=0;m<a.length/3;m+=3)t(m,m+1,m+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new l;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new u,t=new u,n=0,r=this.faces.length;n<r;n++){var o=this.faces[n],i=this.vertices[o.a],a=this.vertices[o.b],s=this.vertices[o.c];e.subVectors(s,a),t.subVectors(i,a),e.cross(t),e.normalize(),o.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,n,r,o,i,a;for(a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new u;if(e){var s,l,c,f=new u,d=new u;for(r=0,o=this.faces.length;r<o;r++)i=this.faces[r],s=this.vertices[i.a],l=this.vertices[i.b],c=this.vertices[i.c],f.subVectors(c,l),d.subVectors(s,l),f.cross(d),a[i.a].add(f),a[i.b].add(f),a[i.c].add(f)}else for(this.computeFaceNormals(),r=0,o=this.faces.length;r<o;r++)i=this.faces[r],a[i.a].add(i.normal),a[i.b].add(i.normal),a[i.c].add(i.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,o=this.faces.length;r<o;r++){i=this.faces[r];var p=i.vertexNormals;3===p.length?(p[0].copy(a[i.a]),p[1].copy(a[i.b]),p[2].copy(a[i.c])):(p[0]=a[i.a].clone(),p[1]=a[i.b].clone(),p[2]=a[i.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,o;for(n=0,r=this.faces.length;n<r;n++)for(o=this.faces[n],o.__originalFaceNormal?o.__originalFaceNormal.copy(o.normal):o.__originalFaceNormal=o.normal.clone(),o.__originalVertexNormals||(o.__originalVertexNormals=[]),e=0,t=o.vertexNormals.length;e<t;e++)o.__originalVertexNormals[e]?o.__originalVertexNormals[e].copy(o.vertexNormals[e]):o.__originalVertexNormals[e]=o.vertexNormals[e].clone();var i=new he;for(i.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a,s,l=this.morphNormals[e].faceNormals,c=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)a=new u,s={a:new u,b:new u,c:new u},l.push(a),c.push(s)}var f=this.morphNormals[e];i.vertices=this.morphTargets[e].vertices,i.computeFaceNormals(),i.computeVertexNormals();var a,s;for(n=0,r=this.faces.length;n<r;n++)o=this.faces[n],a=f.faceNormals[n],s=f.vertexNormals[n],a.copy(o.normal),s.a.copy(o.vertexNormals[0]),s.b.copy(o.vertexNormals[1]),s.c.copy(o.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)o=this.faces[n],o.normal=o.__originalFaceNormal,o.vertexNormals=o.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ee),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var r,o=this.vertices.length,i=this.vertices,a=e.vertices,s=this.faces,u=e.faces,l=this.faceVertexUvs[0],c=e.faceVertexUvs[0],f=this.colors,d=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new te).getNormalMatrix(t));for(var p=0,h=a.length;p<h;p++){var m=a[p],v=m.clone();void 0!==t&&v.applyMatrix4(t),i.push(v)}for(var p=0,h=d.length;p<h;p++)f.push(d[p].clone());for(p=0,h=u.length;p<h;p++){var y,g,b,A=u[p],w=A.vertexNormals,_=A.vertexColors;y=new de(A.a+o,A.b+o,A.c+o),y.normal.copy(A.normal),void 0!==r&&y.normal.applyMatrix3(r).normalize();for(var E=0,T=w.length;E<T;E++)g=w[E].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),y.vertexNormals.push(g);y.color.copy(A.color);for(var E=0,T=_.length;E<T;E++)b=_[E],y.vertexColors.push(b.clone());y.materialIndex=A.materialIndex+n,s.push(y)}for(p=0,h=c.length;p<h;p++){var x=c[p],P=[];if(void 0!==x){for(var E=0,T=x.length;E<T;E++)P.push(x[E].clone());l.push(P)}}},mergeMesh:function(e){return e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),void this.merge(e.geometry,e.matrix)):void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,o,i,a,s,u={},l=[],c=[],f=4,d=Math.pow(10,f);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d),void 0===u[t]?(u[t]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[t]];var p=[];for(n=0,r=this.faces.length;n<r;n++){o=this.faces[n],o.a=c[o.a],o.b=c[o.b],o.c=c[o.c],i=[o.a,o.b,o.c];for(var h=0;h<3;h++)if(i[h]===i[(h+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var m=p[n];for(this.faces.splice(m,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(m,1)}var v=this.vertices.length-l.length;return this.vertices=l,v},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,n=t.length,r=0;r<n;r++)t[r]._id=r;t.sort(e);var o,i,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(o=[]),s&&s.length===n&&(i=[]);for(var r=0;r<n;r++){var u=t[r]._id;o&&o.push(a[u]),i&&i.push(s[u])}o&&(this.faceVertexUvs[0]=o),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==d[t]?d[t]:(d[t]=f.length/3,f.push(e.x,e.y,e.z),d[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==h[t]?h[t]:(h[t]=p.length,p.push(e.getHex()),h[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==v[t]?v[t]:(v[t]=m.length/2,m.push(e.x,e.y),v[t])}var o={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),void 0!==this.parameters){var i=this.parameters;for(var a in i)void 0!==i[a]&&(o[a]=i[a]);return o}for(var s=[],u=0;u<this.vertices.length;u++){var l=this.vertices[u];s.push(l.x,l.y,l.z)}for(var c=[],f=[],d={},p=[],h={},m=[],v={},u=0;u<this.faces.length;u++){var y=this.faces[u],g=!0,b=!1,A=void 0!==this.faceVertexUvs[0][u],w=y.normal.length()>0,_=y.vertexNormals.length>0,E=1!==y.color.r||1!==y.color.g||1!==y.color.b,T=y.vertexColors.length>0,x=0;if(x=e(x,0,0),x=e(x,1,g),x=e(x,2,b),x=e(x,3,A),x=e(x,4,w),x=e(x,5,_),x=e(x,6,E),x=e(x,7,T),c.push(x),c.push(y.a,y.b,y.c),c.push(y.materialIndex),A){var P=this.faceVertexUvs[0][u];c.push(r(P[0]),r(P[1]),r(P[2]))}if(w&&c.push(t(y.normal)),_){var S=y.vertexNormals;c.push(t(S[0]),t(S[1]),t(S[2]))}if(E&&c.push(n(y.color)),T){var C=y.vertexColors;c.push(n(C[0]),n(C[1]),n(C[2]))}}return o.data={},o.data.vertices=s,o.data.normals=f,p.length>0&&(o.data.colors=p),m.length>0&&(o.data.uvs=[m]),o.data.faces=c,o},clone:function(){return(new he).copy(this)},copy:function(e){var t,n,r,o,i,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)this.colors.push(u[t].clone());var l=e.faces;for(t=0,n=l.length;t<n;t++)this.faces.push(l[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,o=c.length;r<o;r++){var f=c[r],d=[];for(i=0,a=f.length;i<a;i++){var p=f[i];d.push(p.clone())}this.faceVertexUvs[t].push(d)}}var h=e.morphTargets;for(t=0,n=h.length;t<n;t++){var m={};if(m.name=h[t].name,void 0!==h[t].vertices)for(m.vertices=[],r=0,o=h[t].vertices.length;r<o;r++)m.vertices.push(h[t].vertices[r].clone());if(void 0!==h[t].normals)for(m.normals=[],r=0,o=h[t].normals.length;r<o;r++)m.normals.push(h[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var y={};if(void 0!==v[t].vertexNormals)for(y.vertexNormals=[],r=0,o=v[t].vertexNormals.length;r<o;r++){var g=v[t].vertexNormals[r],b={};b.a=g.a.clone(),b.b=g.b.clone(),b.c=g.c.clone(),y.vertexNormals.push(b)}if(void 0!==v[t].faceNormals)for(y.faceNormals=[],r=0,o=v[t].faceNormals.length;r<o;r++)y.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(y)}var A=e.skinWeights;for(t=0,n=A.length;t<n;t++)this.skinWeights.push(A[t].clone());var w=e.skinIndices;for(t=0,n=w.length;t<n;t++)this.skinIndices.push(w[t].clone());var _=e.lineDistances;for(t=0,n=_.length;t<n;t++)this.lineDistances.push(_[t]);var E=e.boundingBox;null!==E&&(this.boundingBox=E.clone());var T=e.boundingSphere;return null!==T&&(this.boundingSphere=T.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(me.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Object.assign(me.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,o=e.length;r<o;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new W),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,r=0,o=e.length;r<o;r++){var i=e[r];t[n++]=i.a,t[n++]=i.b,t[n++]=i.c}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,o=0,i=e.length;o<i;o++){var a=e[o];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),a=new n),t[r++]=a.x,t[r++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,o=e.length;r<o;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new u),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new o),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=o,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),ve.prototype=Object.create(me.prototype),ve.prototype.constructor=ve,ye.prototype=Object.create(me.prototype),ye.prototype.constructor=ye,ge.prototype=Object.create(me.prototype),ge.prototype.constructor=ge,be.prototype=Object.create(me.prototype),be.prototype.constructor=be,Ae.prototype=Object.create(me.prototype),Ae.prototype.constructor=Ae,we.prototype=Object.create(me.prototype),we.prototype.constructor=we,_e.prototype=Object.create(me.prototype),_e.prototype.constructor=_e,Ee.prototype=Object.create(me.prototype),Ee.prototype.constructor=Ee,Te.prototype=Object.create(me.prototype),Te.prototype.constructor=Te,Object.assign(xe.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,o=e.faces,i=0;i<o.length;i++){var a=o[i];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*i-t.start,n.push(t)),t={start:3*i,materialIndex:r})}void 0!==t&&(t.count=3*i-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,r=e.faces,o=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,u=e.morphTargets,l=u.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]=[];this.morphTargets.position=t}var f,d=e.morphNormals,p=d.length;if(p>0){f=[];for(var c=0;c<p;c++)f[c]=[];this.morphTargets.normal=f}for(var h=e.skinIndices,m=e.skinWeights,v=h.length===o.length,y=m.length===o.length,c=0;c<r.length;c++){var g=r[c];this.vertices.push(o[g.a],o[g.b],o[g.c]);var b=g.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var A=g.normal;this.normals.push(A,A,A)}var w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var _=g.color;this.colors.push(_,_,_)}if(a===!0){var E=i[0][c];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new n,new n,new n))}if(s===!0){var E=i[1][c];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new n,new n,new n))}for(var T=0;T<l;T++){var x=u[T].vertices;t[T].push(x[g.a],x[g.b],x[g.c])}for(var T=0;T<p;T++){var P=d[T].vertexNormals[c];f[T].push(P.a,P.b,P.c)}v&&this.skinIndices.push(h[g.a],h[g.b],h[g.c]),y&&this.skinWeights.push(m[g.a],m[g.b],m[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}}),Se.MaxIndex=65535,Object.assign(Se.prototype,t.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Pe(e)>65535?_e:Ae)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new me(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new te).getNormalMatrix(e);r.applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new l;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new l;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new l;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new l;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new l;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ue;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Ee(3*t.vertices.length,3),r=new Ee(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var o=new Ee(t.lineDistances.length,1);this.addAttribute("lineDistance",o.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var r;return t.verticesNeedUpdate===!0&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new xe).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new me(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new me(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new me(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var o=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new me(o,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var i=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new me(i,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var a=Pe(e.indices)>65535?Uint32Array:Uint16Array,s=new a(3*e.indices.length);this.setIndex(new me(s,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var u in e.morphTargets){for(var l=[],c=e.morphTargets[u],f=0,d=c.length;f<d;f++){var p=c[f],h=new Ee(3*p.length,3);l.push(h.copyVector3sArray(p))}this.morphAttributes[u]=l}if(e.skinIndices.length>0){var m=new Ee(4*e.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var v=new Ee(4*e.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new $,t=new u;return function(){null===this.boundingSphere&&(this.boundingSphere=new ee);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var o=0,i=0,a=n.count;i<a;i++)t.x=n.getX(i),t.y=n.getY(i),t.z=n.getZ(i),o=Math.max(o,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new me(new Float32Array(r.length),3));else for(var o=t.normal.array,i=0,a=o.length;i<a;i++)o[i]=0;var s,l,c,f=t.normal.array,d=new u,p=new u,h=new u,m=new u,v=new u;if(e){var y=e.array;0===n.length&&this.addGroup(0,y.length);for(var g=0,b=n.length;g<b;++g)for(var A=n[g],w=A.start,_=A.count,i=w,a=w+_;i<a;i+=3)s=3*y[i+0],l=3*y[i+1],c=3*y[i+2],d.fromArray(r,s),p.fromArray(r,l),h.fromArray(r,c),m.subVectors(h,p),v.subVectors(d,p),m.cross(v),f[s]+=m.x,f[s+1]+=m.y,f[s+2]+=m.z,f[l]+=m.x,f[l+1]+=m.y,f[l+2]+=m.z,f[c]+=m.x,f[c+1]+=m.y,f[c+2]+=m.z}else for(var i=0,a=r.length;i<a;i+=9)d.fromArray(r,i),
p.fromArray(r,i+3),h.fromArray(r,i+6),m.subVectors(h,p),v.subVectors(d,p),m.cross(v),f[i]=m.x,f[i+1]=m.y,f[i+2]=m.z,f[i+3]=m.x,f[i+4]=m.y,f[i+5]=m.z,f[i+6]=m.x,f[i+7]=m.y,f[i+8]=m.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var o=n[r],i=o.array,a=e.attributes[r],s=a.array,u=a.itemSize,l=0,c=u*t;l<s.length;l++,c++)i[c]=s[l];return this},normalizeNormals:function(){for(var e,t,n,r,o=this.attributes.normal,i=0,a=o.count;i<a;i++)e=o.getX(i),t=o.getY(i),n=o.getZ(i),r=1/Math.sqrt(e*e+t*t+n*n),o.setXYZ(i,e*r,t*r,n*r)},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Se,t=this.index.array,n=this.attributes;for(var r in n){for(var o=n[r],i=o.array,a=o.itemSize,s=new i.constructor(t.length*a),u=0,l=0,c=0,f=t.length;c<f;c++){u=t[c]*a;for(var d=0;d<a;d++)s[l++]=i[u++]}e.addAttribute(r,new me(s,a))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var o=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:o}}var i=this.attributes;for(var n in i){var a=i[n],o=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:o,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e},clone:function(){return(new Se).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var o=e.index;null!==o&&this.setIndex(o.clone());var i=e.attributes;for(t in i){var a=i[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var u=[],l=s[t];for(n=0,r=l.length;n<r;n++)u.push(l[n].clone());this.morphAttributes[t]=u}var c=e.groups;for(n=0,r=c.length;n<r;n++){var f=c[n];this.addGroup(f.start,f.count,f.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ce.prototype=Object.create(he.prototype),Ce.prototype.constructor=Ce,Oe.prototype=Object.create(Se.prototype),Oe.prototype.constructor=Oe,Me.prototype=Object.create(he.prototype),Me.prototype.constructor=Me,Re.prototype=Object.create(Se.prototype),Re.prototype.constructor=Re,ke.prototype=Object.create(K.prototype),ke.prototype.constructor=ke,ke.prototype.isMeshBasicMaterial=!0,ke.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.assign(Ie.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new u;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new u;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new u;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new u;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new u,t=new u,n=new u;return function(r,o,i,a){e.copy(r).add(o).multiplyScalar(.5),t.copy(o).sub(r).normalize(),n.copy(this.origin).sub(e);var s,u,l,c,f=.5*r.distanceTo(o),d=-this.direction.dot(t),p=n.dot(this.direction),h=-n.dot(t),m=n.lengthSq(),v=Math.abs(1-d*d);if(v>0)if(s=d*h-p,u=d*p-h,c=f*v,s>=0)if(u>=-c)if(u<=c){var y=1/v;s*=y,u*=y,l=s*(s+d*u+2*p)+u*(d*s+u+2*h)+m}else u=f,s=Math.max(0,-(d*u+p)),l=-s*s+u*(u+2*h)+m;else u=-f,s=Math.max(0,-(d*u+p)),l=-s*s+u*(u+2*h)+m;else u<=-c?(s=Math.max(0,-(-d*f+p)),u=s>0?-f:Math.min(Math.max(-f,-h),f),l=-s*s+u*(u+2*h)+m):u<=c?(s=0,u=Math.min(Math.max(-f,-h),f),l=u*(u+2*h)+m):(s=Math.max(0,-(d*f+p)),u=s>0?f:Math.min(Math.max(-f,-h),f),l=-s*s+u*(u+2*h)+m);else u=d>0?-f:f,s=Math.max(0,-(d*u+p)),l=-s*s+u*(u+2*h)+m;return i&&i.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(u).add(e),l}}(),intersectSphere:function(){var e=new u;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),o=e.dot(e)-r*r,i=t.radius*t.radius;if(o>i)return null;var a=Math.sqrt(i-o),s=r-a,u=r+a;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return n*t<0},intersectBox:function(e,t){var n,r,o,i,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,f=this.origin;return u>=0?(n=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(n=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),l>=0?(o=(e.min.y-f.y)*l,i=(e.max.y-f.y)*l):(o=(e.max.y-f.y)*l,i=(e.min.y-f.y)*l),n>i||o>r?null:((o>n||n!==n)&&(n=o),(i<r||r!==r)&&(r=i),c>=0?(a=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(a=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new u;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new u,t=new u,n=new u,r=new u;return function(o,i,a,s,u){t.subVectors(i,o),n.subVectors(a,o),r.crossVectors(t,n);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}e.subVectors(this.origin,o);var f=l*this.direction.dot(n.crossVectors(e,n));if(f<0)return null;var d=l*this.direction.dot(t.cross(e));if(d<0)return null;if(f+d>c)return null;var p=-l*e.dot(r);return p<0?null:this.at(p/c,u)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Le.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new u;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new u;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new u;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new u,t=new u;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var o=t.dot(t),i=t.dot(e),a=i/o;return r&&(a=Ts.clamp(a,0,1)),a}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),o=n||new u;return this.delta(o).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(Ne,{normal:function(){var e=new u;return function(t,n,r,o){var i=o||new u;i.subVectors(r,n),e.subVectors(t,n),i.cross(e);var a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new u,t=new u,n=new u;return function(r,o,i,a,s){e.subVectors(a,o),t.subVectors(i,o),n.subVectors(r,o);var l=e.dot(e),c=e.dot(t),f=e.dot(n),d=t.dot(t),p=t.dot(n),h=l*d-c*c,m=s||new u;if(0===h)return m.set(-2,-1,-1);var v=1/h,y=(d*f-c*p)*v,g=(l*p-c*f)*v;return m.set(1-y-g,g,y)}}(),containsPoint:function(){var e=new u;return function(t,n,r,o){var i=Ne.barycoordFromPoint(t,n,r,o,e);return i.x>=0&&i.y>=0&&i.x+i.y<=1}}()}),Object.assign(Ne.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new u,t=new u;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new u;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return Ne.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new ne;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return Ne.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Ne.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new ne,t=[new Le,new Le,new Le],n=new u,r=new u;return function(o,i){var a=i||new u,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(o,n),this.containsPoint(n)===!0)a.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var l=0;l<t.length;l++){t[l].closestPointToPoint(n,!0,r);var c=n.distanceToSquared(r);c<s&&(s=c,a.copy(r))}}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),je.prototype=Object.assign(Object.create(ue.prototype),{constructor:je,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ue.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var o=r.morphAttributes,i=Object.keys(o);if(i.length>0){var a=o[i[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){function e(e,t,n,r,o,i,a){return Ne.barycoordFromPoint(e,t,n,r,g),o.multiplyScalar(g.x),i.multiplyScalar(g.y),a.multiplyScalar(g.z),o.add(i).add(a),o.clone()}function t(e,t,n,r,o,i,a){var s,u=e.material;if(s=u.side===bi?n.intersectTriangle(i,o,r,!0,a):n.intersectTriangle(r,o,i,u.side!==Ai,a),null===s)return null;A.copy(a),A.applyMatrix4(e.matrixWorld);var l=t.ray.origin.distanceTo(A);return l<t.near||l>t.far?null:{distance:l,point:A.clone(),object:e}}function r(n,r,o,i,a,u,l,d){s.fromBufferAttribute(i,u),c.fromBufferAttribute(i,l),f.fromBufferAttribute(i,d);var p=t(n,r,o,s,c,f,b);return p&&(a&&(m.fromBufferAttribute(a,u),v.fromBufferAttribute(a,l),y.fromBufferAttribute(a,d),p.uv=e(b,s,c,f,m,v,y)),p.face=new de(u,l,d,Ne.normal(s,c,f)),p.faceIndex=u),p}var o=new l,i=new Ie,a=new ee,s=new u,c=new u,f=new u,d=new u,p=new u,h=new u,m=new n,v=new n,y=new n,g=new u,b=new u,A=new u;return function(n,u){var l=this.geometry,g=this.material,A=this.matrixWorld;if(void 0!==g&&(null===l.boundingSphere&&l.computeBoundingSphere(),a.copy(l.boundingSphere),a.applyMatrix4(A),n.ray.intersectsSphere(a)!==!1&&(o.getInverse(A),i.copy(n.ray).applyMatrix4(o),null===l.boundingBox||i.intersectsBox(l.boundingBox)!==!1))){var w;if(l.isBufferGeometry){var _,E,T,x,P,S=l.index,C=l.attributes.position,O=l.attributes.uv;if(null!==S)for(x=0,P=S.count;x<P;x+=3)_=S.getX(x),E=S.getX(x+1),T=S.getX(x+2),w=r(this,n,i,C,O,_,E,T),w&&(w.faceIndex=Math.floor(x/3),u.push(w));else for(x=0,P=C.count;x<P;x+=3)_=x,E=x+1,T=x+2,w=r(this,n,i,C,O,_,E,T),w&&(w.index=_,u.push(w))}else if(l.isGeometry){var M,R,k,I,L=Array.isArray(g),N=l.vertices,j=l.faces,D=l.faceVertexUvs[0];D.length>0&&(I=D);for(var F=0,U=j.length;F<U;F++){var B=j[F],z=L?g[B.materialIndex]:g;if(void 0!==z){if(M=N[B.a],R=N[B.b],k=N[B.c],z.morphTargets===!0){var H=l.morphTargets,V=this.morphTargetInfluences;s.set(0,0,0),c.set(0,0,0),f.set(0,0,0);for(var q=0,G=H.length;q<G;q++){var W=V[q];if(0!==W){var X=H[q].vertices;s.addScaledVector(d.subVectors(X[B.a],M),W),c.addScaledVector(p.subVectors(X[B.b],R),W),f.addScaledVector(h.subVectors(X[B.c],k),W)}}s.add(M),c.add(R),f.add(k),M=s,R=c,k=f}if(w=t(this,n,i,M,R,k,b)){if(I&&I[F]){var Y=I[F];m.copy(Y[0]),v.copy(Y[1]),y.copy(Y[2]),w.uv=e(b,M,R,k,m,v,y)}w.face=B,w.faceIndex=F,u.push(w)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Vl=0;dt.prototype=Object.assign(Object.create(fe.prototype),{constructor:dt,isArrayCamera:!0}),yt.prototype.isFogExp2=!0,yt.prototype.clone=function(){return new yt(this.color.getHex(),this.density)},yt.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},gt.prototype.isFog=!0,gt.prototype.clone=function(){return new gt(this.color.getHex(),this.near,this.far)},gt.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},bt.prototype=Object.assign(Object.create(ue.prototype),{constructor:bt,copy:function(e,t){return ue.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),At.prototype=Object.assign(Object.create(ue.prototype),{constructor:At,isLensFlare:!0,copy:function(e){ue.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,r,o,i){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===i&&(i=1),void 0===o&&(o=new W(16777215)),void 0===r&&(r=Si),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:i,color:o,blending:r})},updateLensFlares:function(){var e,t,n=this.lensFlares.length,r=2*-this.positionScreen.x,o=2*-this.positionScreen.y;for(e=0;e<n;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+o*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),wt.prototype=Object.create(K.prototype),wt.prototype.constructor=wt,wt.prototype.isSpriteMaterial=!0,wt.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},_t.prototype=Object.assign(Object.create(ue.prototype),{constructor:_t,isSprite:!0,raycast:function(){var e=new u,t=new u,n=new u;return function(r,o){t.setFromMatrixPosition(this.matrixWorld),r.ray.closestPointToPoint(t,e),n.setFromMatrixScale(this.matrixWorld);var i=n.x*n.y/4;if(!(t.distanceToSquared(e)>i)){var a=r.ray.origin.distanceTo(e);a<r.near||a>r.far||o.push({distance:a,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),Et.prototype=Object.assign(Object.create(ue.prototype),{constructor:Et,copy:function(e){ue.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var o=t[n];this.addLevel(o.object.clone(),o.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new u;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new u,t=new u;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var o=e.distanceTo(t);r[0].object.visible=!0;for(var i=1,a=r.length;i<a&&o>=r[i].distance;i++)r[i-1].object.visible=!1,r[i].object.visible=!0;for(;i<a;i++)r[i].object.visible=!1}}}(),toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,o=n.length;r<o;r++){var i=n[r];t.object.levels.push({object:i.object.uuid,distance:i.distance})}return t}}),Object.assign(Tt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new l;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new l,t=new l;return function(){for(var n=this.bones,r=this.boneInverses,o=this.boneMatrices,i=this.boneTexture,a=0,s=n.length;a<s;a++){var u=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(u,r[a]),e.toArray(o,16*a)}void 0!==i&&(i.needsUpdate=!0)}}(),clone:function(){return new Tt(this.bones,this.boneInverses)}}),xt.prototype=Object.assign(Object.create(ue.prototype),{constructor:xt,isBone:!0}),Pt.prototype=Object.assign(Object.create(je.prototype),{constructor:Pt,isSkinnedMesh:!0,initBones:function(){var e,t,n,r,o=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)t=this.geometry.bones[n],e=new xt,o.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)t=this.geometry.bones[n],t.parent!==-1&&null!==t.parent&&void 0!==o[t.parent]?o[t.parent].add(o[n]):this.add(o[n])}return this.updateMatrixWorld(!0),o},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];e=1/n.lengthManhattan(),e!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new o,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),e=1/r.lengthManhattan(),e!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){je.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),St.prototype=Object.create(K.prototype),St.prototype.constructor=St,St.prototype.isLineBasicMaterial=!0,St.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Ct.prototype=Object.assign(Object.create(ue.prototype),{constructor:Ct,isLine:!0,raycast:function(){var e=new l,t=new Ie,n=new ee;return function(r,o){var i=r.linePrecision,a=i*i,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(l),r.ray.intersectsSphere(n)!==!1){e.getInverse(l),t.copy(r.ray).applyMatrix4(e);var c=new u,f=new u,d=new u,p=new u,h=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var m=s.index,v=s.attributes,y=v.position.array;if(null!==m)for(var g=m.array,b=0,A=g.length-1;b<A;b+=h){var w=g[b],_=g[b+1];c.fromArray(y,3*w),f.fromArray(y,3*_);var E=t.distanceSqToSegment(c,f,p,d);if(!(E>a)){p.applyMatrix4(this.matrixWorld);var T=r.ray.origin.distanceTo(p);T<r.near||T>r.far||o.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(var b=0,A=y.length/3-1;b<A;b+=h){c.fromArray(y,3*b),f.fromArray(y,3*b+3);var E=t.distanceSqToSegment(c,f,p,d);if(!(E>a)){p.applyMatrix4(this.matrixWorld);var T=r.ray.origin.distanceTo(p);T<r.near||T>r.far||o.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(s.isGeometry)for(var x=s.vertices,P=x.length,b=0;b<P-1;b+=h){var E=t.distanceSqToSegment(x[b],x[b+1],p,d);if(!(E>a)){p.applyMatrix4(this.matrixWorld);var T=r.ray.origin.distanceTo(p);T<r.near||T>r.far||o.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ot.prototype=Object.assign(Object.create(Ct.prototype),{constructor:Ot,isLineSegments:!0}),Mt.prototype=Object.assign(Object.create(Ct.prototype),{constructor:Mt,isLineLoop:!0}),Rt.prototype=Object.create(K.prototype),Rt.prototype.constructor=Rt,Rt.prototype.isPointsMaterial=!0,Rt.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},kt.prototype=Object.assign(Object.create(ue.prototype),{constructor:kt,isPoints:!0,raycast:function(){var e=new l,t=new Ie,n=new ee;return function(r,o){function i(e,n){var i=t.distanceSqToPoint(e);if(i<d){var s=t.closestPointToPoint(e);s.applyMatrix4(l);var u=r.ray.origin.distanceTo(s);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(i),point:s.clone(),index:n,face:null,object:a})}}var a=this,s=this.geometry,l=this.matrixWorld,c=r.params.Points.threshold;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(l),n.radius+=c,r.ray.intersectsSphere(n)!==!1){e.getInverse(l),t.copy(r.ray).applyMatrix4(e);var f=c/((this.scale.x+this.scale.y+this.scale.z)/3),d=f*f,p=new u;if(s.isBufferGeometry){var h=s.index,m=s.attributes,v=m.position.array;if(null!==h)for(var y=h.array,g=0,b=y.length;g<b;g++){var A=y[g];p.fromArray(v,3*A),i(p,A)}else for(var g=0,w=v.length/3;g<w;g++)p.fromArray(v,3*g),i(p,g)}else for(var _=s.vertices,g=0,w=_.length;g<w;g++)i(_[g],g)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),It.prototype=Object.assign(Object.create(ue.prototype),{constructor:It}),Lt.prototype=Object.create(r.prototype),Lt.prototype.constructor=Lt,Nt.prototype=Object.create(r.prototype),Nt.prototype.constructor=Nt,Nt.prototype.isCompressedTexture=!0,jt.prototype=Object.create(r.prototype),jt.prototype.constructor=jt,Dt.prototype=Object.create(r.prototype),Dt.prototype.constructor=Dt,Dt.prototype.isDepthTexture=!0,Ft.prototype=Object.create(Se.prototype),Ft.prototype.constructor=Ft,Ut.prototype=Object.create(he.prototype),Ut.prototype.constructor=Ut,Bt.prototype=Object.create(Se.prototype),Bt.prototype.constructor=Bt,zt.prototype=Object.create(he.prototype),zt.prototype.constructor=zt,Ht.prototype=Object.create(Se.prototype),Ht.prototype.constructor=Ht,Vt.prototype=Object.create(he.prototype),Vt.prototype.constructor=Vt,qt.prototype=Object.create(Ht.prototype),qt.prototype.constructor=qt,Gt.prototype=Object.create(he.prototype),Gt.prototype.constructor=Gt,Wt.prototype=Object.create(Ht.prototype),Wt.prototype.constructor=Wt,Xt.prototype=Object.create(he.prototype),Xt.prototype.constructor=Xt,Yt.prototype=Object.create(Ht.prototype),Yt.prototype.constructor=Yt,Qt.prototype=Object.create(he.prototype),Qt.prototype.constructor=Qt,Kt.prototype=Object.create(Ht.prototype),Kt.prototype.constructor=Kt,Zt.prototype=Object.create(he.prototype),Zt.prototype.constructor=Zt,Jt.prototype=Object.create(Se.prototype),Jt.prototype.constructor=Jt,$t.prototype=Object.create(he.prototype),$t.prototype.constructor=$t,en.prototype=Object.create(Se.prototype),en.prototype.constructor=en,tn.prototype=Object.create(he.prototype),tn.prototype.constructor=tn,nn.prototype=Object.create(Se.prototype),nn.prototype.constructor=nn;var ql={area:function(e){for(var t=e.length,n=0,r=t-1,o=0;o<t;r=o++)n+=e[r].x*e[o].y-e[o].x*e[r].y;return.5*n},triangulate:function(){function e(e,t,n,r,o,i){var a,s,u,l,c,f,d,p,h;if(s=e[i[t]].x,u=e[i[t]].y,l=e[i[n]].x,c=e[i[n]].y,f=e[i[r]].x,d=e[i[r]].y,(l-s)*(d-u)-(c-u)*(f-s)<=0)return!1;var m,v,y,g,b,A,w,_,E,T,x,P,S,C,O;for(m=f-l,v=d-c,y=s-f,g=u-d,b=l-s,A=c-u,a=0;a<o;a++)if(p=e[i[a]].x,h=e[i[a]].y,!(p===s&&h===u||p===l&&h===c||p===f&&h===d)&&(w=p-s,_=h-u,E=p-l,T=h-c,x=p-f,P=h-d,O=m*T-v*E,S=b*_-A*w,C=y*P-g*x,O>=-Number.EPSILON&&C>=-Number.EPSILON&&S>=-Number.EPSILON))return!1;return!0}return function(t,n){var r=t.length;if(r<3)return null;var o,i,a,s=[],u=[],l=[];if(ql.area(t)>0)for(i=0;i<r;i++)u[i]=i;else for(i=0;i<r;i++)u[i]=r-1-i;var c=r,f=2*c;for(i=c-1;c>2;){if(f--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?l:s;if(o=i,c<=o&&(o=0),i=o+1,c<=i&&(i=0),a=i+1,c<=a&&(a=0),e(t,o,i,a,c,u)){var d,p,h,m,v;for(d=u[o],p=u[i],h=u[a],s.push([t[d],t[p],t[h]]),l.push([u[o],u[i],u[a]]),m=i,v=i+1;v<c;m++,v++)u[m]=u[v];c--,f=2*c}}return n?l:s}}(),triangulateShape:function(e,t){function n(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function r(e,t,n){return e.x!==t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function o(e,t,n,o,i){var a=t.x-e.x,s=t.y-e.y,u=o.x-n.x,l=o.y-n.y,c=e.x-n.x,f=e.y-n.y,d=s*u-a*l,p=s*c-a*f;if(Math.abs(d)>Number.EPSILON){var h;if(d>0){if(p<0||p>d)return[];if(h=l*c-u*f,h<0||h>d)return[]}else{if(p>0||p<d)return[];if(h=l*c-u*f,h>0||h<d)return[]}if(0===h)return!i||0!==p&&p!==d?[e]:[];if(h===d)return!i||0!==p&&p!==d?[t]:[];if(0===p)return[n];if(p===d)return[o];var m=h/d;return[{x:e.x+m*a,y:e.y+m*s}]}if(0!==p||l*c!==u*f)return[];var v=0===a&&0===s,y=0===u&&0===l;if(v&&y)return e.x!==n.x||e.y!==n.y?[]:[e];if(v)return r(n,o,e)?[e]:[];if(y)return r(e,t,n)?[n]:[];var g,b,A,w,_,E,T,x;return 0!==a?(e.x<t.x?(g=e,A=e.x,b=t,w=t.x):(g=t,A=t.x,b=e,w=e.x),n.x<o.x?(_=n,T=n.x,E=o,x=o.x):(_=o,T=o.x,E=n,x=n.x)):(e.y<t.y?(g=e,A=e.y,b=t,w=t.y):(g=t,A=t.y,b=e,w=e.y),n.y<o.y?(_=n,T=n.y,E=o,x=o.y):(_=o,T=o.y,E=n,x=n.y)),A<=T?w<T?[]:w===T?i?[]:[_]:w<=x?[_,b]:[_,E]:A>x?[]:A===x?i?[]:[g]:w<=x?[g,b]:[g,E]}function i(e,t,n,r){var o=t.x-e.x,i=t.y-e.y,a=n.x-e.x,s=n.y-e.y,u=r.x-e.x,l=r.y-e.y,c=o*s-i*a,f=o*l-i*u;if(Math.abs(c)>Number.EPSILON){var d=u*s-l*a;return c>0?f>=0&&d>=0:f>=0||d>=0}return f>0}function a(e,t){function n(e,t){var n=g.length-1,r=e-1;r<0&&(r=n);var o=e+1;o>n&&(o=0);var a=i(g[e],g[r],g[o],s[t]);if(!a)return!1;var u=s.length-1,l=t-1;l<0&&(l=u);var c=t+1;return c>u&&(c=0),a=i(s[t],s[l],s[c],g[e]),!!a}function r(e,t){var n,r,i;for(n=0;n<g.length;n++)if(r=n+1,r%=g.length,i=o(e,t,g[n],g[r],!0),i.length>0)return!0;return!1}function a(e,n){var r,i,a,s,u;for(r=0;r<b.length;r++)for(i=t[b[r]],a=0;a<i.length;a++)if(s=a+1,s%=i.length,u=o(e,n,i[a],i[s],!0),u.length>0)return!0;return!1}for(var s,u,l,c,f,d,p,h,m,v,y,g=e.concat(),b=[],A=[],w=0,_=t.length;w<_;w++)b.push(w);for(var E=0,T=2*b.length;b.length>0;){if(T--,T<0){console.log("Infinite Loop! Holes left:"+b.length+", Probably Hole outside Shape!");break}for(l=E;l<g.length;l++){c=g[l],u=-1;for(var w=0;w<b.length;w++)if(d=b[w],p=c.x+":"+c.y+":"+d,void 0===A[p]){s=t[d];for(var x=0;x<s.length;x++)if(f=s[x],n(l,x)&&!r(c,f)&&!a(c,f)){u=x,b.splice(w,1),h=g.slice(0,l+1),m=g.slice(l),v=s.slice(u),y=s.slice(0,u+1),g=h.concat(v).concat(y).concat(m),E=l;break}if(u>=0)break;A[p]=!0}if(u>=0)break}}return g}n(e),t.forEach(n);for(var s,u,l,c,f,d,p={},h=e.concat(),m=0,v=t.length;m<v;m++)Array.prototype.push.apply(h,t[m]);for(s=0,u=h.length;s<u;s++)f=h[s].x+":"+h[s].y,void 0!==p[f]&&console.warn("THREE.ShapeUtils: Duplicate point",f,s),p[f]=s;var y=a(e,t),g=ql.triangulate(y,!1);for(s=0,u=g.length;s<u;s++)for(c=g[s],l=0;l<3;l++)f=c[l].x+":"+c[l].y,d=p[f],void 0!==d&&(c[l]=d);return g.concat()},isClockWise:function(e){return ql.area(e)<0}};rn.prototype=Object.create(he.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(Se.prototype),on.prototype.constructor=on,on.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],n=this.getAttribute("uv"),r=n?Array.prototype.slice.call(n.array):[],o=this.index,i=o?Array.prototype.slice.call(o.array):[];return{position:t,uv:r,index:i}},on.prototype.addShapeList=function(e,t){var n=e.length;t.arrays=this.getArrays();for(var r=0;r<n;r++){var o=e[r];this.addShape(o,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new Ee(t.arrays.position,3)),this.addAttribute("uv",new Ee(t.arrays.uv,2))},on.prototype.addShape=function(e,t){function r(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function o(e,t,r){var o,i,a,s=e.x-t.x,u=e.y-t.y,l=r.x-e.x,c=r.y-e.y,f=s*s+u*u,d=s*c-u*l;if(Math.abs(d)>Number.EPSILON){var p=Math.sqrt(f),h=Math.sqrt(l*l+c*c),m=t.x-u/p,v=t.y+s/p,y=r.x-c/h,g=r.y+l/h,b=((y-m)*c-(g-v)*l)/(s*c-u*l);o=m+s*b-e.x,i=v+u*b-e.y;var A=o*o+i*i;if(A<=2)return new n(o,i);a=Math.sqrt(A/2)}else{var w=!1;s>Number.EPSILON?l>Number.EPSILON&&(w=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(w=!0):Math.sign(u)===Math.sign(c)&&(w=!0),w?(o=-u,i=s,a=Math.sqrt(f)):(o=s,i=u,a=Math.sqrt(f/2))}return new n(o/a,i/a)}function i(){var e=A.length/3;if(C){var n=0,r=K*n;for($=0;$<Z;$++)Q=H[$],c(Q[2]+r,Q[1]+r,Q[0]+r);for(n=M+2*S,r=K*n,$=0;$<Z;$++)Q=H[$],c(Q[0]+r,Q[1]+r,Q[2]+r)}else{for($=0;$<Z;$++)Q=H[$],c(Q[2],Q[1],Q[0]);for($=0;$<Z;$++)Q=H[$],c(Q[0]+K*M,Q[1]+K*M,Q[2]+K*M)}D.addGroup(e,A.length/3-e,void 0!==t.material?t.material:0)}function a(){var e=A.length/3,n=0;for(s(V,n),n+=V.length,N=0,j=B.length;N<j;N++)L=B[N],s(L,n),n+=L.length;D.addGroup(e,A.length/3-e,void 0!==t.extrudeMaterial?t.extrudeMaterial:1)}function s(e,t){var n,r;for($=e.length;--$>=0;){n=$,r=$-1,r<0&&(r=e.length-1);var o=0,i=M+2*S;
for(o=0;o<i;o++){var a=K*o,s=K*(o+1),u=t+n+a,l=t+r+a,c=t+r+s,d=t+n+s;f(u,l,c,d,e,o,i,n,r)}}}function l(e,t,n){E.push(e),E.push(t),E.push(n)}function c(e,t,n){d(e),d(t),d(n);var r=A.length/3,o=I.generateTopUV(D,A,r-3,r-2,r-1);p(o[0]),p(o[1]),p(o[2])}function f(e,t,n,r,o,i,a,s,u){d(e),d(t),d(r),d(t),d(n),d(r);var l=A.length/3,c=I.generateSideWallUV(D,A,l-6,l-3,l-2,l-1);p(c[0]),p(c[1]),p(c[3]),p(c[1]),p(c[2]),p(c[3])}function d(e){w.push(A.length/3),A.push(E[3*e+0]),A.push(E[3*e+1]),A.push(E[3*e+2])}function p(e){_.push(e.x),_.push(e.y)}var h,m,v,y,g,b=t.arrays?t.arrays:this.getArrays(),A=b.position,w=b.index,_=b.uv,E=[],T=void 0!==t.amount?t.amount:100,x=void 0!==t.bevelThickness?t.bevelThickness:6,P=void 0!==t.bevelSize?t.bevelSize:x-2,S=void 0!==t.bevelSegments?t.bevelSegments:3,C=void 0===t.bevelEnabled||t.bevelEnabled,O=void 0!==t.curveSegments?t.curveSegments:12,M=void 0!==t.steps?t.steps:1,R=t.extrudePath,k=!1,I=void 0!==t.UVGenerator?t.UVGenerator:rn.WorldUVGenerator;R&&(h=R.getSpacedPoints(M),k=!0,C=!1,m=void 0!==t.frames?t.frames:R.computeFrenetFrames(M,!1),v=new u,y=new u,g=new u),C||(S=0,x=0,P=0);var L,N,j,D=this,F=e.extractPoints(O),U=F.shape,B=F.holes,z=!ql.isClockWise(U);if(z)for(U=U.reverse(),N=0,j=B.length;N<j;N++)L=B[N],ql.isClockWise(L)&&(B[N]=L.reverse());var H=ql.triangulateShape(U,B),V=U;for(N=0,j=B.length;N<j;N++)L=B[N],U=U.concat(L);for(var q,G,W,X,Y,Q,K=U.length,Z=H.length,J=[],$=0,ee=V.length,te=ee-1,ne=$+1;$<ee;$++,te++,ne++)te===ee&&(te=0),ne===ee&&(ne=0),J[$]=o(V[$],V[te],V[ne]);var re,oe=[],ie=J.concat();for(N=0,j=B.length;N<j;N++){for(L=B[N],re=[],$=0,ee=L.length,te=ee-1,ne=$+1;$<ee;$++,te++,ne++)te===ee&&(te=0),ne===ee&&(ne=0),re[$]=o(L[$],L[te],L[ne]);oe.push(re),ie=ie.concat(re)}for(q=0;q<S;q++){for(W=q/S,X=x*Math.cos(W*Math.PI/2),G=P*Math.sin(W*Math.PI/2),$=0,ee=V.length;$<ee;$++)Y=r(V[$],J[$],G),l(Y.x,Y.y,-X);for(N=0,j=B.length;N<j;N++)for(L=B[N],re=oe[N],$=0,ee=L.length;$<ee;$++)Y=r(L[$],re[$],G),l(Y.x,Y.y,-X)}for(G=P,$=0;$<K;$++)Y=C?r(U[$],ie[$],G):U[$],k?(y.copy(m.normals[0]).multiplyScalar(Y.x),v.copy(m.binormals[0]).multiplyScalar(Y.y),g.copy(h[0]).add(y).add(v),l(g.x,g.y,g.z)):l(Y.x,Y.y,0);var ae;for(ae=1;ae<=M;ae++)for($=0;$<K;$++)Y=C?r(U[$],ie[$],G):U[$],k?(y.copy(m.normals[ae]).multiplyScalar(Y.x),v.copy(m.binormals[ae]).multiplyScalar(Y.y),g.copy(h[ae]).add(y).add(v),l(g.x,g.y,g.z)):l(Y.x,Y.y,T/M*ae);for(q=S-1;q>=0;q--){for(W=q/S,X=x*Math.cos(W*Math.PI/2),G=P*Math.sin(W*Math.PI/2),$=0,ee=V.length;$<ee;$++)Y=r(V[$],J[$],G),l(Y.x,Y.y,T+X);for(N=0,j=B.length;N<j;N++)for(L=B[N],re=oe[N],$=0,ee=L.length;$<ee;$++)Y=r(L[$],re[$],G),k?l(Y.x,Y.y+h[M-1].y,h[M-1].x+X):l(Y.x,Y.y,T+X)}i(),a(),t.arrays||(this.setIndex(w),this.addAttribute("position",new Ee(A,3)),this.addAttribute("uv",new Ee(t.arrays.uv,2)))},rn.WorldUVGenerator={generateTopUV:function(e,t,r,o,i){var a=t[3*r],s=t[3*r+1],u=t[3*o],l=t[3*o+1],c=t[3*i],f=t[3*i+1];return[new n(a,s),new n(u,l),new n(c,f)]},generateSideWallUV:function(e,t,r,o,i,a){var s=t[3*r],u=t[3*r+1],l=t[3*r+2],c=t[3*o],f=t[3*o+1],d=t[3*o+2],p=t[3*i],h=t[3*i+1],m=t[3*i+2],v=t[3*a],y=t[3*a+1],g=t[3*a+2];return Math.abs(u-f)<.01?[new n(s,1-l),new n(c,1-d),new n(p,1-m),new n(v,1-g)]:[new n(u,1-l),new n(f,1-d),new n(h,1-m),new n(y,1-g)]}},an.prototype=Object.create(he.prototype),an.prototype.constructor=an,sn.prototype=Object.create(on.prototype),sn.prototype.constructor=sn,un.prototype=Object.create(he.prototype),un.prototype.constructor=un,ln.prototype=Object.create(Se.prototype),ln.prototype.constructor=ln,cn.prototype=Object.create(he.prototype),cn.prototype.constructor=cn,fn.prototype=Object.create(Se.prototype),fn.prototype.constructor=fn,dn.prototype=Object.create(he.prototype),dn.prototype.constructor=dn,pn.prototype=Object.create(Se.prototype),pn.prototype.constructor=pn,hn.prototype=Object.create(he.prototype),hn.prototype.constructor=hn,mn.prototype=Object.create(Se.prototype),mn.prototype.constructor=mn,vn.prototype=Object.create(Se.prototype),vn.prototype.constructor=vn,yn.prototype=Object.create(he.prototype),yn.prototype.constructor=yn,gn.prototype=Object.create(Se.prototype),gn.prototype.constructor=gn,bn.prototype=Object.create(yn.prototype),bn.prototype.constructor=bn,An.prototype=Object.create(gn.prototype),An.prototype.constructor=An,wn.prototype=Object.create(he.prototype),wn.prototype.constructor=wn,_n.prototype=Object.create(Se.prototype),_n.prototype.constructor=_n;var Gl=Object.freeze({WireframeGeometry:Ft,ParametricGeometry:Ut,ParametricBufferGeometry:Bt,TetrahedronGeometry:Vt,TetrahedronBufferGeometry:qt,OctahedronGeometry:Gt,OctahedronBufferGeometry:Wt,IcosahedronGeometry:Xt,IcosahedronBufferGeometry:Yt,DodecahedronGeometry:Qt,DodecahedronBufferGeometry:Kt,PolyhedronGeometry:zt,PolyhedronBufferGeometry:Ht,TubeGeometry:Zt,TubeBufferGeometry:Jt,TorusKnotGeometry:$t,TorusKnotBufferGeometry:en,TorusGeometry:tn,TorusBufferGeometry:nn,TextGeometry:an,TextBufferGeometry:sn,SphereGeometry:un,SphereBufferGeometry:ln,RingGeometry:cn,RingBufferGeometry:fn,PlaneGeometry:Me,PlaneBufferGeometry:Re,LatheGeometry:dn,LatheBufferGeometry:pn,ShapeGeometry:hn,ShapeBufferGeometry:mn,ExtrudeGeometry:rn,ExtrudeBufferGeometry:on,EdgesGeometry:vn,ConeGeometry:bn,ConeBufferGeometry:An,CylinderGeometry:yn,CylinderBufferGeometry:gn,CircleGeometry:wn,CircleBufferGeometry:_n,BoxGeometry:Ce,BoxBufferGeometry:Oe});En.prototype=Object.create(Z.prototype),En.prototype.constructor=En,En.prototype.isShadowMaterial=!0,Tn.prototype=Object.create(Z.prototype),Tn.prototype.constructor=Tn,Tn.prototype.isRawShaderMaterial=!0,xn.prototype=Object.create(K.prototype),xn.prototype.constructor=xn,xn.prototype.isMeshStandardMaterial=!0,xn.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Pn.prototype=Object.create(xn.prototype),Pn.prototype.constructor=Pn,Pn.prototype.isMeshPhysicalMaterial=!0,Pn.prototype.copy=function(e){return xn.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Sn.prototype=Object.create(K.prototype),Sn.prototype.constructor=Sn,Sn.prototype.isMeshPhongMaterial=!0,Sn.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Cn.prototype=Object.create(Sn.prototype),Cn.prototype.constructor=Cn,Cn.prototype.isMeshToonMaterial=!0,Cn.prototype.copy=function(e){return Sn.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},On.prototype=Object.create(K.prototype),On.prototype.constructor=On,On.prototype.isMeshNormalMaterial=!0,On.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Mn.prototype=Object.create(K.prototype),Mn.prototype.constructor=Mn,Mn.prototype.isMeshLambertMaterial=!0,Mn.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Rn.prototype=Object.create(K.prototype),Rn.prototype.constructor=Rn,Rn.prototype.isLineDashedMaterial=!0,Rn.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Wl=Object.freeze({ShadowMaterial:En,SpriteMaterial:wt,RawShaderMaterial:Tn,ShaderMaterial:Z,PointsMaterial:Rt,MeshPhysicalMaterial:Pn,MeshStandardMaterial:xn,MeshPhongMaterial:Sn,MeshToonMaterial:Cn,MeshNormalMaterial:On,MeshLambertMaterial:Mn,MeshDepthMaterial:J,MeshBasicMaterial:ke,LineDashedMaterial:Rn,LineBasicMaterial:St,Material:K}),Xl={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Yl=new kn;Object.assign(In.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var o=this,i=Xl.get(e);if(void 0!==i)return o.manager.itemStart(e),setTimeout(function(){t&&t(i),o.manager.itemEnd(e)},0),i;var a=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(a);if(s){var u=s[1],l=!!s[2],c=s[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var f,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":f=new ArrayBuffer(c.length);for(var p=new Uint8Array(f),h=0;h<c.length;h++)p[h]=c.charCodeAt(h);"blob"===d&&(f=new Blob([f],{type:u}));break;case"document":var m=new DOMParser;f=m.parseFromString(c,u);break;case"json":f=JSON.parse(c);break;default:f=c}window.setTimeout(function(){t&&t(f),o.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),o.manager.itemEnd(e),o.manager.itemError(e)},0)}}else{var v=new XMLHttpRequest;v.open("GET",e,!0),v.addEventListener("load",function(n){var i=n.target.response;Xl.add(e,i),200===this.status?(t&&t(i),o.manager.itemEnd(e)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(i),o.manager.itemEnd(e)):(r&&r(n),o.manager.itemEnd(e),o.manager.itemError(e))},!1),void 0!==n&&v.addEventListener("progress",function(e){n(e)},!1),v.addEventListener("error",function(t){r&&r(t),o.manager.itemEnd(e),o.manager.itemError(e)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var y in this.requestHeader)v.setRequestHeader(y,this.requestHeader[y]);v.send(null)}return o.manager.itemStart(e),v},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Ln.prototype,{load:function(e,t,n,r){function o(o){u.load(e[o],function(e){var n=i._parser(e,!0);a[o]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=Ta),s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,r)}var i=this,a=[],s=new Nt;s.image=a;var u=new In(this.manager);if(u.setPath(this.path),u.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,c=0,f=e.length;c<f;++c)o(c);else u.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,o=0;o<r;o++){a[o]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[o].mipmaps.push(n.mipmaps[o*n.mipmapCount+u]),a[o].format=n.format,a[o].width=n.width,a[o].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=Ta),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,r);return s},setPath:function(e){return this.path=e,this}}),Object.assign(Nn.prototype,{load:function(e,t,n,r){var o=this,i=new c,a=new In(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=o._parser(e);n&&(void 0!==n.image?i.image=n.image:void 0!==n.data&&(i.image.width=n.width,i.image.height=n.height,i.image.data=n.data),i.wrapS=void 0!==n.wrapS?n.wrapS:ba,i.wrapT=void 0!==n.wrapT?n.wrapT:ba,i.magFilter=void 0!==n.magFilter?n.magFilter:Ta,i.minFilter=void 0!==n.minFilter?n.minFilter:Pa,i.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(i.format=n.format),void 0!==n.type&&(i.type=n.type),void 0!==n.mipmaps&&(i.mipmaps=n.mipmaps),1===n.mipmapCount&&(i.minFilter=Ta),i.needsUpdate=!0,t&&t(i,n))},n,r),i}}),Object.assign(jn.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var o=this,i=Xl.get(e);if(void 0!==i)return o.manager.itemStart(e),setTimeout(function(){t&&t(i),o.manager.itemEnd(e)},0),i;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){Xl.add(e,this),t&&t(this),o.manager.itemEnd(e)},!1),a.addEventListener("error",function(t){r&&r(t),o.manager.itemEnd(e),o.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Dn.prototype,{load:function(e,t,n,r){function o(n){a.load(e[n],function(e){i.images[n]=e,s++,6===s&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}var i=new f,a=new jn(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var s=0,u=0;u<e.length;++u)o(u);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Fn.prototype,{load:function(e,t,n,o){var i=new jn(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);var a=new r;return a.image=i.load(e,function(){var n=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);a.format=n?Ba:za,a.needsUpdate=!0,void 0!==t&&t(a)},n,o),a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Un.prototype=Object.assign(Object.create(ue.prototype),{constructor:Un,isLight:!0,copy:function(e){return ue.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Bn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Bn,isHemisphereLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(zn.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Hn.prototype=Object.assign(Object.create(zn.prototype),{constructor:Hn,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Ts.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;n===t.fov&&r===t.aspect&&o===t.far||(t.fov=n,t.aspect=r,t.far=o,t.updateProjectionMatrix())}}),Vn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Vn,isSpotLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),qn.prototype=Object.assign(Object.create(Un.prototype),{constructor:qn,isPointLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Gn.prototype=Object.assign(Object.create(zn.prototype),{constructor:Gn}),Wn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Wn,isDirectionalLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Xn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Xn,isAmbientLight:!0}),Yn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Yn,isRectAreaLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Un.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var Ql={arraySlice:function(e,t,n){return Ql.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,r=new Array(n),o=0;o!==n;++o)r[o]=o;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,o=new e.constructor(r),i=0,a=0;a!==r;++i)for(var s=n[i]*t,u=0;u!==t;++u)o[a++]=e[s+u];return o},flattenJSON:function(e,t,n,r){for(var o=1,i=e[0];void 0!==i&&void 0===i[r];)i=e[o++];if(void 0!==i){var a=i[r];if(void 0!==a)if(Array.isArray(a)){do a=i[r],void 0!==a&&(t.push(i.time),n.push.apply(n,a)),i=e[o++];while(void 0!==i)}else if(void 0!==a.toArray){do a=i[r],void 0!==a&&(t.push(i.time),a.toArray(n,n.length)),i=e[o++];while(void 0!==i)}else do a=i[r],void 0!==a&&(t.push(i.time),n.push(a)),i=e[o++];while(void 0!==i)}}};Object.assign(Qn.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],o=t[n-1];e:{t:{var i;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<o)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,o)}if(n===a)break;if(o=r,r=t[++n],e<r)break t}i=t.length;break n}{if(e>=o)break e;var s=t[1];e<s&&(n=2,o=s);for(var a=n-2;;){if(void 0===o)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=o,o=t[--n-1],e>=o)break t}i=n,n=0}}for(;n<i;){var u=n+i>>>1;e<t[u]?i=u:n=u+1}if(r=t[n],o=t[n-1],void 0===o)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,o,e)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=e*r,i=0;i!==r;++i)t[i]=n[o+i];return t},interpolate_:function(e,t,n,r){throw new Error("call to abstract method")},intervalChanged_:function(e,t,n){}}),Object.assign(Qn.prototype,{beforeStart_:Qn.prototype.copySampleValue_,afterEnd_:Qn.prototype.copySampleValue_}),Kn.prototype=Object.assign(Object.create(Qn.prototype),{constructor:Kn,DefaultSettings_:{endingStart:us,endingEnd:us},intervalChanged_:function(e,t,n){var r=this.parameterPositions,o=e-2,i=e+1,a=r[o],s=r[i];if(void 0===a)switch(this.getSettings_().endingStart){case ls:o=e,a=2*t-n;break;case cs:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case ls:i=e,s=2*n-t;break;case cs:i=1,s=n+r[1]-r[0];break;default:i=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=o*l,this._offsetNext=i*l},interpolate_:function(e,t,n,r){for(var o=this.resultBuffer,i=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,f=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),h=p*p,m=h*p,v=-f*m+2*f*h-f*p,y=(1+f)*m+(-1.5-2*f)*h+(-.5+f)*p+1,g=(-1-d)*m+(1.5+d)*h+.5*p,b=d*m-d*h,A=0;A!==a;++A)o[A]=v*i[l+A]+y*i[u+A]+g*i[s+A]+b*i[c+A];return o}}),Zn.prototype=Object.assign(Object.create(Qn.prototype),{constructor:Zn,interpolate_:function(e,t,n,r){for(var o=this.resultBuffer,i=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(n-t)/(r-t),c=1-l,f=0;f!==a;++f)o[f]=i[u+f]*c+i[s+f]*l;return o}}),Jn.prototype=Object.assign(Object.create(Qn.prototype),{constructor:Jn,interpolate_:function(e,t,n,r){return this.copySampleValue_(e-1)}});var Kl;Kl={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:as,InterpolantFactoryMethodDiscrete:function(e){return new Jn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Zn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Kn(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case is:t=this.InterpolantFactoryMethodDiscrete;break;case as:t=this.InterpolantFactoryMethodLinear;break;case ss:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrackPrototype:",n)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return is;case this.InterpolantFactoryMethodLinear:return as;case this.InterpolantFactoryMethodSmooth:return ss}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,o=0,i=r-1;o!==r&&n[o]<e;)++o;for(;i!==-1&&n[i]>t;)--i;if(++i,0!==o||i!==r){o>=i&&(i=Math.max(i,1),o=i-1);var a=this.getValueSize();this.times=Ql.arraySlice(n,o,i),this.values=Ql.arraySlice(this.values,o*a,i*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrackPrototype: Track is empty.",this),e=!1);for(var i=null,a=0;a!==o;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,a,s),e=!1;break}if(null!==i&&i>s){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,a,s,i),e=!1;break}i=s}if(void 0!==r&&Ql.isTypedArray(r))for(var a=0,u=r.length;a!==u;++a){var l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,a,l),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===ss,o=1,i=e.length-1,a=1;a<i;++a){var s=!1,u=e[a],l=e[a+1];if(u!==l&&(1!==a||u!==u[0]))if(r)s=!0;else for(var c=a*n,f=c-n,d=c+n,p=0;p!==n;++p){var h=t[c+p];if(h!==t[f+p]||h!==t[d+p]){s=!0;break}}if(s){if(a!==o){e[o]=e[a];for(var m=a*n,v=o*n,p=0;p!==n;++p)t[v+p]=t[m+p]}++o}}if(i>0){e[o]=e[i];for(var m=i*n,v=o*n,p=0;p!==n;++p)t[v+p]=t[m+p];++o}return o!==e.length&&(this.times=Ql.arraySlice(e,0,o),this.values=Ql.arraySlice(t,0,o*n)),this}},er.prototype=Object.assign(Object.create(Kl),{constructor:er,ValueTypeName:"vector"}),tr.prototype=Object.assign(Object.create(Qn.prototype),{constructor:tr,interpolate_:function(e,t,n,r){for(var o=this.resultBuffer,i=this.sampleValues,a=this.valueSize,u=e*a,l=(n-t)/(r-t),c=u+a;u!==c;u+=4)s.slerpFlat(o,0,i,u-a,i,u,l);return o}}),nr.prototype=Object.assign(Object.create(Kl),{constructor:nr,ValueTypeName:"quaternion",DefaultInterpolation:as,InterpolantFactoryMethodLinear:function(e){return new tr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),rr.prototype=Object.assign(Object.create(Kl),{constructor:rr,ValueTypeName:"number"}),or.prototype=Object.assign(Object.create(Kl),{constructor:or,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:is,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ir.prototype=Object.assign(Object.create(Kl),{constructor:ir,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:is,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ar.prototype=Object.assign(Object.create(Kl),{constructor:ar,ValueTypeName:"color"}),sr.prototype=Kl,Kl.constructor=sr,Object.assign(sr,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=sr._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],r=[];Ql.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Ql.convertArray(e.times,Array),values:Ql.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rr;case"vector":case"vector2":case"vector3":case"vector4":return er;case"color":return ar;case"quaternion":return nr;case"bool":case"boolean":return ir;case"string":return or}throw new Error("Unsupported typeName: "+e)}}),Object.assign(ur,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),o=0,i=n.length;o!==i;++o)t.push(sr.parse(n[o]).scale(r));return new ur(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t},o=0,i=n.length;o!==i;++o)t.push(sr.toJSON(n[o]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var o=t.length,i=[],a=0;a<o;a++){var s=[],u=[];s.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);var l=Ql.getKeyframeOrder(s);s=Ql.sortedArray(s,1,l),u=Ql.sortedArray(u,1,l),r||0!==s[0]||(s.push(o),u.push(u[0])),i.push(new rr(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new ur(e,-1,i)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var o=0;o<n.length;o++)if(n[o].name===t)return n[o];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},o=/^([\w-]*?)([\d]+)$/,i=0,a=e.length;i<a;i++){var s=e[i],u=s.name.match(o);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var f=[];for(var l in r)f.push(ur.CreateFromMorphTargetSequence(l,r[l],t,n));return f},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,o){if(0!==n.length){var i=[],a=[];Ql.flattenJSON(n,i,a,r),0!==i.length&&o.push(new e(t,i,a))}},r=[],o=e.name||"default",i=e.length||-1,a=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},f=0;f<l.length;f++)if(l[f].morphTargets)for(var d=0;d<l[f].morphTargets.length;d++)c[l[f].morphTargets[d]]=-1;for(var p in c){for(var h=[],m=[],d=0;d!==l[f].morphTargets.length;++d){var v=l[f];h.push(v.time),m.push(v.morphTarget===p?1:0)}r.push(new rr(".morphTargetInfluence["+p+"]",h,m))}i=c.length*(a||1)}else{var y=".bones["+t[u].name+"]";n(er,y+".position",l,"pos",r),n(nr,y+".quaternion",l,"rot",r),n(er,y+".scale",l,"scl",r)}}if(0===r.length)return null;var g=new ur(o,i,r);return g}}),Object.assign(ur.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var o=this.tracks[n];t=Math.max(t,o.times[o.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(lr.prototype,{load:function(e,t,n,r){var o=this,i=new In(o.manager);i.load(e,function(e){t(o.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===r[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),r[e]}var r=this.textures,o=new Wl[e.type];if(void 0!==e.uuid&&(o.uuid=e.uuid),void 0!==e.name&&(o.name=e.name),void 0!==e.color&&o.color.setHex(e.color),void 0!==e.roughness&&(o.roughness=e.roughness),void 0!==e.metalness&&(o.metalness=e.metalness),void 0!==e.emissive&&o.emissive.setHex(e.emissive),void 0!==e.specular&&o.specular.setHex(e.specular),void 0!==e.shininess&&(o.shininess=e.shininess),void 0!==e.clearCoat&&(o.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(o.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(o.uniforms=e.uniforms),void 0!==e.vertexShader&&(o.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(o.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(o.vertexColors=e.vertexColors),void 0!==e.fog&&(o.fog=e.fog),void 0!==e.shading&&(o.shading=e.shading),void 0!==e.blending&&(o.blending=e.blending),void 0!==e.side&&(o.side=e.side),void 0!==e.opacity&&(o.opacity=e.opacity),void 0!==e.transparent&&(o.transparent=e.transparent),void 0!==e.alphaTest&&(o.alphaTest=e.alphaTest),void 0!==e.depthTest&&(o.depthTest=e.depthTest),void 0!==e.depthWrite&&(o.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(o.colorWrite=e.colorWrite),void 0!==e.wireframe&&(o.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(o.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(o.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(o.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(o.skinning=e.skinning),void 0!==e.morphTargets&&(o.morphTargets=e.morphTargets),void 0!==e.size&&(o.size=e.size),void 0!==e.sizeAttenuation&&(o.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(o.map=t(e.map)),
void 0!==e.alphaMap&&(o.alphaMap=t(e.alphaMap),o.transparent=!0),void 0!==e.bumpMap&&(o.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(o.bumpScale=e.bumpScale),void 0!==e.normalMap&&(o.normalMap=t(e.normalMap)),void 0!==e.normalScale){var i=e.normalScale;Array.isArray(i)===!1&&(i=[i,i]),o.normalScale=(new n).fromArray(i)}return void 0!==e.displacementMap&&(o.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(o.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(o.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(o.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(o.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(o.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(o.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(o.specularMap=t(e.specularMap)),void 0!==e.envMap&&(o.envMap=t(e.envMap)),void 0!==e.reflectivity&&(o.reflectivity=e.reflectivity),void 0!==e.lightMap&&(o.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(o.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(o.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(o.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(o.gradientMap=t(e.gradientMap)),o}}),Object.assign(cr.prototype,{load:function(e,t,n,r){var o=this,i=new In(o.manager);i.load(e,function(e){t(o.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new Se,n=e.data.index;if(void 0!==n){var r=new Zl[n.type](n.array);t.setIndex(new me(r,1))}var o=e.data.attributes;for(var i in o){var a=o[i],r=new Zl[a.type](a.array);t.addAttribute(i,new me(r,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var l=0,c=s.length;l!==c;++l){var f=s[l];t.addGroup(f.start,f.count,f.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var p=new u;void 0!==d.center&&p.fromArray(d.center),t.boundingSphere=new ee(p,d.radius)}return t}});var Zl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};fr.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var o=t[n],i=t[n+1];if(o.test(e))return i}return null}},Object.assign(fr.prototype,{crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,n){for(var r=[],o=0;o<e.length;++o)r[o]=this.createMaterial(e[o],t,n);return r},createMaterial:function(){var e={NoBlending:Pi,NormalBlending:Si,AdditiveBlending:Ci,SubtractiveBlending:Oi,MultiplyBlending:Mi,CustomBlending:Ri},t=new W,n=new Fn,r=new lr;return function(o,i,a){function s(e,t,r,o,s){var l,c=i+e,f=fr.Handlers.get(c);null!==f?l=f.load(c):(n.setCrossOrigin(a),l=n.load(c)),void 0!==t&&(l.repeat.fromArray(t),1!==t[0]&&(l.wrapS=ga),1!==t[1]&&(l.wrapT=ga)),void 0!==r&&l.offset.fromArray(r),void 0!==o&&("repeat"===o[0]&&(l.wrapS=ga),"mirror"===o[0]&&(l.wrapS=Aa),"repeat"===o[1]&&(l.wrapT=ga),"mirror"===o[1]&&(l.wrapT=Aa)),void 0!==s&&(l.anisotropy=s);var d=Ts.generateUUID();return u[d]=l,d}var u={},l={uuid:Ts.generateUUID(),type:"MeshLambertMaterial"};for(var c in o){var f=o[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=f;break;case"blending":l.blending=e[f];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":l.color=t.fromArray(f).getHex();break;case"colorSpecular":l.specular=t.fromArray(f).getHex();break;case"colorEmissive":l.emissive=t.fromArray(f).getHex();break;case"specularCoef":l.shininess=f;break;case"shading":"basic"===f.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===f.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===f.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=s(f,o.mapDiffuseRepeat,o.mapDiffuseOffset,o.mapDiffuseWrap,o.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=s(f,o.mapEmissiveRepeat,o.mapEmissiveOffset,o.mapEmissiveWrap,o.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=s(f,o.mapLightRepeat,o.mapLightOffset,o.mapLightWrap,o.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(f,o.mapAORepeat,o.mapAOOffset,o.mapAOWrap,o.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(f,o.mapBumpRepeat,o.mapBumpOffset,o.mapBumpWrap,o.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=f;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(f,o.mapNormalRepeat,o.mapNormalOffset,o.mapNormalWrap,o.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[f,f];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(f,o.mapSpecularRepeat,o.mapSpecularOffset,o.mapSpecularWrap,o.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=s(f,o.mapMetalnessRepeat,o.mapMetalnessOffset,o.mapMetalnessWrap,o.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=s(f,o.mapRoughnessRepeat,o.mapRoughnessOffset,o.mapRoughnessWrap,o.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=s(f,o.mapAlphaRepeat,o.mapAlphaOffset,o.mapAlphaWrap,o.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=bi;break;case"doubleSided":l.side=Ai;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=f;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[c]=f;break;case"vertexColors":f===!0&&(l.vertexColors=xi),"face"===f&&(l.vertexColors=Ti);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,f)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),r.setTextures(u),r.parse(l)}}()}),Object.assign(dr.prototype,{load:function(e,t,n,r){var o=this,i=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:fr.prototype.extractUrlBase(e),a=new In(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var u=o.parse(r,i);t(u.geometry,u.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(e,t){function r(e,t){return e&1<<t}var o,i,a,s,l,c,f,d,p,h,m,v,y,g,b,A,w,_,E,T,x,P,S,C,O,M,R,k=e.faces,I=e.vertices,L=e.normals,N=e.colors,j=e.scale,D=0;if(void 0!==e.uvs){for(o=0;o<e.uvs.length;o++)e.uvs[o].length&&D++;for(o=0;o<D;o++)t.faceVertexUvs[o]=[]}for(s=0,l=I.length;s<l;)_=new u,_.x=I[s++]*j,_.y=I[s++]*j,_.z=I[s++]*j,t.vertices.push(_);for(s=0,l=k.length;s<l;)if(h=k[s++],m=r(h,0),v=r(h,1),y=r(h,3),g=r(h,4),b=r(h,5),A=r(h,6),w=r(h,7),m){if(T=new de,T.a=k[s],T.b=k[s+1],T.c=k[s+3],x=new de,x.a=k[s+1],x.b=k[s+2],x.c=k[s+3],s+=4,v&&(p=k[s++],T.materialIndex=p,x.materialIndex=p),a=t.faces.length,y)for(o=0;o<D;o++)for(C=e.uvs[o],t.faceVertexUvs[o][a]=[],t.faceVertexUvs[o][a+1]=[],i=0;i<4;i++)d=k[s++],M=C[2*d],R=C[2*d+1],O=new n(M,R),2!==i&&t.faceVertexUvs[o][a].push(O),0!==i&&t.faceVertexUvs[o][a+1].push(O);if(g&&(f=3*k[s++],T.normal.set(L[f++],L[f++],L[f]),x.normal.copy(T.normal)),b)for(o=0;o<4;o++)f=3*k[s++],S=new u(L[f++],L[f++],L[f]),2!==o&&T.vertexNormals.push(S),0!==o&&x.vertexNormals.push(S);if(A&&(c=k[s++],P=N[c],T.color.setHex(P),x.color.setHex(P)),w)for(o=0;o<4;o++)c=k[s++],P=N[c],2!==o&&T.vertexColors.push(new W(P)),0!==o&&x.vertexColors.push(new W(P));t.faces.push(T),t.faces.push(x)}else{if(E=new de,E.a=k[s++],E.b=k[s++],E.c=k[s++],v&&(p=k[s++],E.materialIndex=p),a=t.faces.length,y)for(o=0;o<D;o++)for(C=e.uvs[o],t.faceVertexUvs[o][a]=[],i=0;i<3;i++)d=k[s++],M=C[2*d],R=C[2*d+1],O=new n(M,R),t.faceVertexUvs[o][a].push(O);if(g&&(f=3*k[s++],E.normal.set(L[f++],L[f++],L[f])),b)for(o=0;o<3;o++)f=3*k[s++],S=new u(L[f++],L[f++],L[f]),E.vertexNormals.push(S);if(A&&(c=k[s++],E.color.setHex(N[c])),w)for(o=0;o<3;o++)c=k[s++],E.vertexColors.push(new W(N[c]));t.faces.push(E)}}function t(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=n){var a=e.skinWeights[r],s=n>1?e.skinWeights[r+1]:0,u=n>2?e.skinWeights[r+2]:0,l=n>3?e.skinWeights[r+3]:0;t.skinWeights.push(new o(a,s,u,l))}if(e.skinIndices)for(var r=0,i=e.skinIndices.length;r<i;r+=n){var c=e.skinIndices[r],f=n>1?e.skinIndices[r+1]:0,d=n>2?e.skinIndices[r+2]:0,p=n>3?e.skinIndices[r+3]:0;t.skinIndices.push(new o(c,f,d,p))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}function r(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var r=0,o=e.morphTargets.length;r<o;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var i=t.morphTargets[r].vertices,a=e.morphTargets[r].vertices,s=0,l=a.length;s<l;s+=3){var c=new u;c.x=a[s]*n,c.y=a[s+1]*n,c.z=a[s+2]*n,i.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var f=t.faces,d=e.morphColors[0].colors,r=0,o=f.length;r<o;r++)f[r].color.fromArray(d,3*r)}}function i(e,t){var n=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var o=0;o<r.length;o++){var i=ur.parseAnimation(r[o],t.bones);i&&n.push(i)}if(t.morphTargets){var a=ur.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}return function(n,o){void 0!==n.data&&(n=n.data),void 0!==n.scale?n.scale=1/n.scale:n.scale=1;var a=new he;if(e(n,a),t(n,a),r(n,a),i(n,a),a.computeFaceNormals(),a.computeBoundingSphere(),void 0===n.materials||0===n.materials.length)return{geometry:a};var s=fr.prototype.initMaterials(n.materials,o,this.crossOrigin);return{geometry:a,materials:s}}}()}),Object.assign(pr.prototype,{load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var o=this,i=new In(o.manager);i.load(e,function(n){var i=null;try{i=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=i.metadata;return void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase()?void console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead."):void o.parse(i,t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){void 0!==t&&t(a)}),o=this.parseTextures(e.textures,r),i=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,n,i);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new dr,r=new cr,o=0,i=e.length;o<i;o++){var a,s=e[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Gl[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Gl[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Gl[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Gl[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Gl[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Gl[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":a=new Gl[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Gl[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"T