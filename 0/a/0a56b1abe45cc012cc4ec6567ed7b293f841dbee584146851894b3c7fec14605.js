(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{1265:function(e,t,s){"use strict";s.r(t);var i=s(5),a=s(1101),r=s(819),o=s(509),n=s(870),l=s(589),c=s(564),u=s(87),d=s(155),h=s(17),m=s(809),p=s(828),k=s(843),v=s(844),b=s(1115),f={components:{BaseButton:s(507).a,FormRow:o.o,ThreadDuplicates:r.a,FormMessageList:o.m,ControlLoader:n.a,FormInputLabeled:o.i,FormInputIcon:o.h,ControlLinkErrors:m.a,CheckVoucherCodeDuplicates:p.a,CheckBlockedLinks:k.a,GetLinkMerchantSuggestion:v.a,EventTrigger:b.a},mixins:[l.b],data:()=>Object.assign({},Object(u.d)({thread:{namespace:"threadForm",path:"thread",deep:!0}}),{submitLink:"",submitCode:"",hasErrors:!1,hasDuplicates:!1}),computed:{canSubmit(){return!this.hasDuplicates&&!this.hasErrors},voucherType:()=>h.o,inlineLinkErrorsMessages(){return this.$v?this.$v.messages.link.filter((e=>!e.title)):[]},duplicatesFilter:()=>({type:{ne:h.g}})},validations:()=>({link:[Object(c.n)(!0)],voucherCode:[Object(c.o)("voucherCode")]}),watch:{"thread.link"(){this.resetData()},"thread.voucherCode"(){this.resetData()}},methods:{resetLink(){this.thread.link="",this.thread.voucherCode="",this.resetData(),this.validateLink()},resetCode(){this.thread.voucherCode="",this.resetData()},resetData(){this.hasErrors=!1,this.hasDuplicates=!1,this.submitLink="",this.submitCode="",this.$v.clear("link")},async validateLink(){await this.$v.validate("link",this.thread.link)},async submit(){const{link:e,voucherCode:t}=this.thread;this.resetData(),await this.validateLink(),!this.$v.error.link&&e&&(this.submitLink=e,this.submitCode=t)},showFullForm(){this.$emit("show-full-form")},submitVoucher(){Object(d.b)({type:"submit",target:this.$el}),this.showFullForm()},submitWithoutLink(){this.thread.link="",this.thread.voucherCode="",this.thread.merchant={},this.showFullForm()},continueWithCode(){this.showFullForm()},setLinkErrors(e){let{hasErrors:t}=e;this.hasErrors=t},setDuplicates(e){let{hasDuplicates:t}=e;this.hasDuplicates=t}}},C=s(45),g=Object(C.a)(f,(function(){var e=this,t=e._self._c;return t("section",{directives:[{name:"track",rawName:"v-track:linkForm.view",value:{type:e.voucherType},expression:"{ type: voucherType }",arg:"linkForm",modifiers:{view:!0}}],staticClass:"flex flex--dir-col flex--grow-1 space--fromW2-h-4 space--h-3 space--t-3 space--b-2"},[t("div",{staticClass:"flex--grow-1 space--mb-3"},[t("h1",{staticClass:"size--all-xxxl size--fromW2-xxl text--b text--color-charcoalTint space--t-3"},[e._v(" "+e._s("Deel een kortingscode met miljoenen mensen")+" ")]),t("p",{staticClass:"size--all-l text--color-greyShade space--mt-3 space--fromW2-mt-1 space--mb-3"},[e._v(" "+e._s("Vul de code en link in waar andere mensen het kunnen inwisselen")+" ")]),t("form",{staticClass:"width--all-12",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"flex boxAlign-ai--all-c"},[t("div",{staticClass:"flex--grow-1"},[t("ol",{staticClass:"flex flex--dir-col flex--fromW2-dir-row"},[t("FormRow",{staticClass:"space--fromW2-r-2 flex--grow-1 width--fromW2-10",attrs:{error:e.$v.error.link}},[t("FormInputLabeled",{attrs:{id:"link",name:"link",placeholder:"https://www.site.com/greatvoucher...",inputmode:"url"},on:{input:e.resetData,change:e.validateLink},scopedSlots:e._u([{key:"prependIcon",fn:function(){return[t("FormInputIcon",{attrs:{name:"link"}})]},proxy:!0}]),model:{value:e.thread.link,callback:function(t){e.$set(e.thread,"link","string"==typeof t?t.trim():t)},expression:"thread.link"}}),t("FormMessageList",{staticClass:"hide--fromW2",attrs:{messages:e.$v.messages.link}})],1),t("FormRow",{attrs:{error:e.$v.error.voucherCode}},[t("FormInputLabeled",{staticClass:"space--t-2 space--fromW2-t-0",attrs:{id:"voucherCode",name:"voucherCode",placeholder:"Kortingscode"},on:{input:e.resetData},scopedSlots:e._u([{key:"prependIcon",fn:function(){return[t("FormInputIcon",{attrs:{name:"scissors"}})]},proxy:!0}]),model:{value:e.thread.voucherCode,callback:function(t){e.$set(e.thread,"voucherCode",t)},expression:"thread.voucherCode"}}),t("FormMessageList",{attrs:{messages:e.$v.messages.voucherCode}})],1)],1)]),e.canSubmit?t("div",{staticClass:"space--l-2 hide--toW2"},[t("BaseButton",{staticClass:"width--all-12",attrs:{type:"submit",variant:"primary",mode:"brand",disabled:!e.thread.link}},[e._v(" "+e._s("Ga verder")+" ")])],1):e._e()]),e.submitLink?t("CheckBlockedLinks",{attrs:{link:e.submitLink},on:{request:e.setLinkErrors},scopedSlots:e._u([{key:"default",fn:function({isLoading:s,hasErrors:i,errors:a}){return[i?t("ControlLinkErrors",{attrs:{"error-messages":a},on:{cancel:e.resetLink}}):t("CheckVoucherCodeDuplicates",{attrs:{link:e.submitLink,code:e.submitCode,"thread-id":e.thread.threadId,filter:e.duplicatesFilter},on:{request:e.setDuplicates},scopedSlots:e._u([{key:"default",fn:function({isLoading:a,hasDuplicates:r,duplicates:o}){return[t("div",[t("GetLinkMerchantSuggestion",{attrs:{link:e.submitLink,"keep-alive":!s}}),s||a?t("ControlLoader",[e._v(" "+e._s("Controleren op dubbelposts")+" ")]):r?t("ThreadDuplicates",{attrs:{type:e.voucherType,threads:o},on:{cancel:e.resetCode,continue:e.continueWithCode}}):e._e(),t("EventTrigger",{attrs:{"is-loading":s||a,"has-errors":i||r},on:{trigger:e.submitVoucher}})],1)]}}],null,!0)})]}}],null,!1,4143734887)}):e._e(),t("FormMessageList",{staticClass:"hide--toW2",attrs:{messages:e.$v.messages.link}}),e.canSubmit?t("div",{staticClass:"hide--fromW2 space--mt-3"},[t("BaseButton",{directives:[{name:"track",rawName:"v-track:submitWithLink.click",arg:"submitWithLink",modifiers:{click:!0}}],staticClass:"width--all-12 space--mb-3",attrs:{variant:"primary",mode:"brand",type:"submit",disabled:!e.thread.link}},[e._v(" "+e._s("Ga verder")+" ")])],1):e._e()],1)]),e.canSubmit?t("div",{staticClass:"hAlign--all-c"},[t("BaseButton",{directives:[{name:"track",rawName:"v-track:submitWithoutLink.click",arg:"submitWithoutLink",modifiers:{click:!0}}],attrs:{variant:"tertiary",mode:"default"},on:{click:e.submitWithoutLink}},[e._v(" "+e._s("Ik heb geen link")+" ")])],1):e._e()])}),[],!1,null,null,null),L=g.exports,_=Object(i.defineComponent)({__name:"voucher-submission-wizard",setup:e=>({__sfc:!0,ThreadSubmissionWizardContent:a.a,VoucherSubmissionLinkForm:L,VOUCHER_TYPE:h.o})}),w=Object(C.a)(_,(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t(s.ThreadSubmissionWizardContent,{attrs:{"thread-type":s.VOUCHER_TYPE}},[t(s.VoucherSubmissionLinkForm,{staticClass:"flex--grow-1",on:{"show-full-form":function(t){return e.$emit("show-full-form")}}})],1)}),[],!1,null,null,null);t.default=w.exports},828:function(e,t,s){"use strict";var i=s(5),a=s(544),r=s(616),o=s(715);const n=()=>{let e=null;const t=Object(i.ref)([]),{isLoading:s,setLoader:n}=Object(a.a)(),l=()=>{t.value=[],s.value&&Object(o.a)(e)};return{duplicates:t,checkDuplicates:(s,i,a)=>{i&&(l(),(s=>{let{link:i,code:a,filter:o}=s;e=Object(r.b)(i,a,o),e.request.then((e=>{e&&(t.value=e)})).finally(n())})({link:s,code:i,filter:a}))},resetDuplicates:l,isLoading:s}};var l=Object(i.defineComponent)({__name:"check-voucher-code-duplicates",props:{link:null,code:null,filter:null},setup(e){const t=e,{duplicates:s,isLoading:a,checkDuplicates:r,resetDuplicates:o}=n(),l=Object(i.computed)((()=>!!s.value.length));return Object(i.watch)((()=>t.code),(()=>{t.code?r(t.link,t.code,t.filter):o()}),{immediate:!0}),Object(i.onBeforeUnmount)((()=>{o()})),{__sfc:!0,props:t,duplicates:s,isLoading:a,checkDuplicates:r,resetDuplicates:o,hasDuplicates:l}}}),c=s(45),u=Object(c.a)(l,(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",[e._t("default",null,{isLoading:s.isLoading,duplicates:s.duplicates,hasDuplicates:s.hasDuplicates,reset:s.resetDuplicates})],2)}),[],!1,null,null,null);t.a=u.exports}}]);ck:submissionNavigation",value:{source:"reviewInfo"},expression:"{ source: 'reviewInfo' }",arg:"submissionNavigation"}],on:{submit:function(e){return n.emit("submit")}}}):e._e()],1)}),[],!1,null,null,null).exports,w=n(514),k=n(21),C=n(4),B=n(995),I=n.n(B);var N=n(100);var A=n(1126),E=Object(r.defineComponent)({__name:"form-wizard-multi-step",props:{steps:null},setup(e){const t=e,n=Object(r.inject)("$v"),o=Object(r.ref)(!1),c=Object(r.ref)(null),u=Object(w.a)(),l=Object(p.j)(),{currentStep:b,currentStepIndex:f,goToNextStep:v,goToPrevStep:m,selectStepByIndex:g,validateCurrentStep:x}=Object(A.a)(t.steps),{isReview:h,isEditing:S,showReview:y,discardChanges:_,goToEditStep:B}=((e,t)=>{const n=Object(p.j)(),a=Object(r.ref)(!!n.value.threadId),i=Object(r.ref)(!1),s=Object(r.ref)(null),o=Object(r.ref)(null);return{isReview:a,isEditing:i,showReview:async()=>{a.value=!0,i.value=!1},discardChanges:()=>{C.a.commit("threadForm/UPDATE_FIELD",{path:"thread",value:s.value}),localStorage.setItem("redactor-restore",o.value),t.clear()},goToEditStep:t=>{a.value=!1,i.value=!0,s.value=I()(n.value),o.value=localStorage.getItem("redactor-restore"),e(t)}}})(g,n),{isMobileMenuVisible:E,toggleMobileNav:T,selectStep:F}=(e=>{const t=Object(r.ref)(!1),n=()=>{t.value=!t.value};return{isMobileMenuVisible:t,toggleMobileNav:n,selectStep:(r,a)=>{e(r,a.currentTarget),t.value&&n()}}})(g),z=Object(r.computed)((()=>!l.value.threadId)),D=Object(r.computed)((()=>{var e,t,n;return!(null!==(e=c.value)&&void 0!==e&&null!==(t=e.$refs)&&void 0!==t&&null!==(n=t.form)&&void 0!==n&&n.isLinkCheckingProcess)})),W=Object(r.computed)((()=>o.value||!b.value.isStepValid||z.value&&S.value));async function L(){await x(),b.value.isStepValid&&Object(p.c)(u,n)}function V(e){const{linkValue:t,voucherValue:n,submit:r,submitWithoutLink:a}=c.value.$refs.form;t||n?r():a(e),o.value=!1}return Object(p.i)(!0),{__sfc:!0,props:t,$v:n,isDisabled:o,stepComponent:c,route:u,thread:l,currentStep:b,currentStepIndex:f,goToNextStep:v,goToPrevStep:m,selectStepByIndex:g,validateCurrentStep:x,isReview:h,isEditing:S,showReview:y,discardChanges:_,goToEditStep:B,isMobileMenuVisible:E,toggleMobileNav:T,selectStep:F,isNew:z,isLinkCheckedAndValidated:D,isNavigationLockedOnCurrentStep:W,nextStep:async function(e){const t=e.currentTarget;await x(),b.value.isStepValid&&("link"!==b.value.name?S.value?l.value.threadId?L():y():v(t):V(t))},submit:L,prevStep:async function(e){b.value.isStepValid?m(e.currentTarget):await x()},cancelEditing:function(){if(l.value.threadId){const{threadId:e,titleSlug:t,threadTypeId:n}=l.value;k.l.push(Object(N.n)({threadId:e,titleSlug:t,threadTypeId:n}))}else _(),y()},linkFormSubmit:V,continueSubmission:function(e){if(S.value)return void(z.value?y():Object(p.c)(u,n));const t=e.currentTarget||e;o.value=!1,v(t)},disableSteps:function(){o.value=!0},validateAndShowReview:async function(){await x(),b.value.isStepValid&&y()},ThreadSubmissionLoader:a.a,FormWizardPagination:i.a,FormWizardNavigation:s.a,FormWizardEditStepButtons:d,FormWizardNavigationButtons:j,SummaryThread:O}}}),T=Object(c.a)(E,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"bg--color-white height--all-full flex--grow-1 flex flex--dir-col aGrid"},[t(n.ThreadSubmissionLoader,{attrs:{"has-bar":!1}}),n.isReview?t(n.SummaryThread,{attrs:{"thread-type":n.thread.type,"is-new":n.isNew,steps:e.steps},on:{edit:n.goToEditStep,submit:n.submit}}):t("form",{staticClass:"flex flex--grow-1 width--all-12 height--all-full aGrid",on:{submit:function(e){e.preventDefault()}}},[t(n.FormWizardNavigation,{attrs:{steps:e.steps,"current-step-index":n.currentStepIndex,trap:n.isNavigationLockedOnCurrentStep,"is-non-visited-steps-blocked":n.isNew,"is-mobile-menu-visible":n.isMobileMenuVisible,"is-all-steps-completed":n.isEditing,"is-editing":n.isEditing},on:{"select-item":n.selectStep,"hide-nav":n.toggleMobileNav},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("titleSidebar")]},proxy:!0}],null,!0)}),t("div",{staticClass:"flex flex--grow-1 flex--dir-col"},[t("div",{staticClass:"flex flex--grow-1 flex--dir-col aGrid"},[e.$breakpoint.smAndDown?t(n.FormWizardPagination,{staticClass:"flex--grow-0 space--v-2 space--h-2 space--mv-3 space--mh-3 bRad--a-xl clickable",attrs:{steps:e.steps,"current-step-index":n.currentStepIndex,"is-all-steps-completed":n.isEditing},on:{click:n.toggleMobileNav}}):e._e(),t("div",{staticClass:"flex flex--grow-1"},[t(n.currentStep.component,{ref:"stepComponent",tag:"Component",class:n.currentStep.cept,attrs:{"is-editing":n.isEditing,"current-step":n.currentStep},on:{continue:n.continueSubmission,trap:n.disableSteps}})],1)],1),n.isEditing?t(n.FormWizardEditStepButtons,{attrs:{"has-errors":!n.currentStep.isStepValid||!n.isLinkCheckedAndValidated},on:{save:n.nextStep,cancel:n.cancelEditing}}):0!==n.currentStepIndex||1!==n.currentStep.visitedCount?t(n.FormWizardNavigationButtons,{attrs:{steps:e.steps,"current-step-index":n.currentStepIndex,"has-errors":!n.currentStep.isStepValid||!n.isLinkCheckedAndValidated},on:{prev:n.prevStep,next:n.nextStep,review:n.validateAndShowReview,submit:n.submit}}):e._e()],1)],1)],1)}),[],!1,null,null,null);t.a=T.exports},728:function(e,t,n){var r=n(329),a=n(732),i=n(246);e.exports=function(e){return r(e,i,a)}},732:function(e,t,n){var r=n(250),a=n(251),i=n(320),s=n(330),o=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=a(e);return t}:s;e.exports=o},767:function(e,t,n){var r=n(210),a=n(790),i=n(322),s=n(791),o=n(792),c=n(332),u=n(334),l=n(793),d=n(794),p=n(328),b=n(728),f=n(245),v=n(795),m=n(796),j=n(335),g=n(79),x=n(183),h=n(800),S=n(86),y=n(802),_=n(209),O=n(246),w="[object Arguments]",k="[object Function]",C="[object Object]",B={};B[w]=B["[object Array]"]=B["[object ArrayBuffer]"]=B["[object DataView]"]=B["[object Boolean]"]=B["[object Date]"]=B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Map]"]=B["[object Number]"]=B[C]=B["[object RegExp]"]=B["[object Set]"]=B["[object String]"]=B["[object Symbol]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B["[object Error]"]=B[k]=B["[object WeakMap]"]=!1,e.exports=function e(t,n,I,N,A,E){var T,F=1&n,z=2&n,D=4&n;if(I&&(T=A?I(t,N,A,E):I(t)),void 0!==T)return T;if(!S(t))return t;var W=g(t);if(W){if(T=v(t),!F)return u(t,T)}else{var L=f(t),V=L==k||"[object GeneratorFunction]"==L;if(x(t))return c(t,F);if(L==C||L==w||V&&!A){if(T=z||V?{}:j(t),!F)return z?d(t,o(T,t)):l(t,s(T,t))}else{if(!B[L])return A?t:{};T=m(t,L,F)}}E||(E=new r);var M=E.get(t);if(M)return M;E.set(t,T),y(t)?t.forEach((function(r){T.add(e(r,n,I,r,t,E))})):h(t)&&t.forEach((function(r,a){T.set(a,e(r,n,I,a,t,E))}));var R=W?void 0:(D?z?b:p:z?O:_)(t);return a(R||t,(function(r,a){R&&(r=t[a=r]),i(T,a,e(r,n,I,a,t,E))})),T}},790:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},791:function(e,t,n){var r=n(314),a=n(209);e.exports=function(e,t){return e&&r(t,a(t),e)}},792:function(e,t,n){var r=n(314),a=n(246);e.exports=function(e,t){return e&&r(t,a(t),e)}},793:function(e,t,n){var r=n(314),a=n(320);e.exports=function(e,t){return r(e,a(e),t)}},794:function(e,t,n){var r=n(314),a=n(732);e.exports=function(e,t){return r(e,a(e),t)}},795:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},796:function(e,t,n){var r=n(321),a=n(797),i=n(798),s=n(799),o=n(333);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return a(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return o(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return i(e);case"[object Symbol]":return s(e)}}},797:function(e,t,n){var r=n(321);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},798:function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},799:function(e,t,n){var r=n(160),a=r?r.prototype:void 0,i=a?a.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},800:function(e,t,n){var r=n(801),a=n(247),i=n(319),s=i&&i.isMap,o=s?a(s):r;e.exports=o},801:function(e,t,n){var r=n(245),a=n(120);e.exports=function(e){return a(e)&&"[object Map]"==r(e)}},802:function(e,t,n){var r=n(803),a=n(247),i=n(319),s=i&&i.isSet,o=s?a(s):r;e.exports=o},803:function(e,t,n){var r=n(245),a=n(120);e.exports=function(e){return a(e)&&"[object Set]"==r(e)}},995:function(e,t,n){var r=n(767);e.exports=function(e){return r(e,5)}}}]);