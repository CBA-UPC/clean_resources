(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[43447],{805912:t=>{t.exports={"overlap-manager-container":"overlap-manager-container-txdnDvZo",compact:"compact-txdnDvZo","on-chart":"on-chart-txdnDvZo","toast-portal":"toast-portal-txdnDvZo",added:"added-txdnDvZo","no-overflow":"no-overflow-txdnDvZo",wrapper:"wrapper-txdnDvZo","location-bottom-left":"location-bottom-left-txdnDvZo","location-bottom-right":"location-bottom-right-txdnDvZo",container:"container-txdnDvZo",hidden:"hidden-txdnDvZo","reset-duration":"reset-duration-txdnDvZo"}},239401:(t,e,o)=>{"use strict";var n,a,i;o.d(e,{CloseTrigger:()=>n,ToastAnimationStage:()=>a,ToastPriority:()=>i}),n||(n={})),function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove",t[t.None=2]="None"}(a||(a={})),i||(i={}))},643447:(t,e,o)=>{"use strict";o.d(e,{ToastsLayer:);var n,a=o(50959),i=o(500962),s=o(541558),r=o(351290),c=o(239401);class d{constructor(t){this._animationStage=c.ToastAnimationStage.Add,this._keys=new Map,this._element=null,this.render=t=>this._render(t),this.remove=t=>{const e=this.getStaticData();return this._currentToastsLayer.removeToast(this).then(()};const{priority:e,origin:o,currentLayer:n,onLayerChange:a,render:i,onMouseOver:s,onMouseOut:r,swipeToCloseDirection:d,onRemoveEnd:u}=t;this._staticData=Object.freeze({priority:e,origin:o,onLayerChange:a,swipeToCloseDirection:d,onRemoveEnd:u,onMouseOver:s,onMouseOut:r}),this._currentToastsLayer=n||o,this._render=i}getStaticData(){return this._staticData}etCurrentLayer(){return this._currentToastsLayer}etAnimationStage(){return this._animationStage}setAnimationStage(t){this._animationStage=t}tElement(){return this._element}function u(t,e){const o=(0,a.useRef)({x:0,y:0}),[i,s]=(0,a.useState)(n.Unset);return[i,{onTouchStart:(0,a.useCallback)((,[]),onTouchEnd:(0,a.useCallback)((a=>{s(function(t,e,o,a,i){const s=t.currentTarget,r=Math.abs(o.x-e.x),c=Math.abs(o.y-e.y),d=s.offsetWidth*a,u=s.offsetHeight*i;return r>c&&r>d?o.x>e.x?n.Right:n.Left:c>u?o.y>e.y?n.Down:n.Up:n.Unset}(a,o.current,{x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY},t,e))}),[s,o,t,e])}]}!n||(n={}));var h=o(31341),g=o(497754),l=o(636098),m=o(670797),y=o(56537),_=o(746326),v=o(238718),p=o(662929),f=o(805912);function T(t){const{toasts:e,suggestedLayout:o,location:n,manager:i,layer:s}=t,r=(0,y.useForceUpdate)(),c=(0,a.useRef)(new Map),[d,u]=(0,v.useRefsMap)();return(0,a.useLayoutEffect)((()=>{c.current.forEach((),e.forEach((t=>{if(!d.current.has(t))return;const e=(0,_.outerHeight)(d.current.get(t));c.current.set(t,e)}))})),a.createElement(m.SlotContext.Provider,{value:i},e.map(((t,i)=>a.createElement(L,{key:C(t,i,s),toast:t,toasts:e,layer:s,suggestedLayout:o,location:n,forceRender:r,reference:u(t),toastsHeightsMapRef:c}))))}function L(t){const{toast:e,toasts:o,layer:i,suggestedLayout:s,location:r,forceRender:d,reference:m,toastsHeightsMapRef:y}=t,_=(0,a.useRef)(null),v=(0,p.useMergedRefs)([_,m]),T=e.getStaticData().swipeToCloseDirection,[L,C]=u(.2,.7),S=e.getAnimationStage(),w=S!==c.ToastAnimationStage.None,x=function(t){const{animationStage:e,isHidden:o,toasts:n,toast:i,toastsHeightsMapRef:s,suggestedLayout:r,swipeDirection:d}=t,u=(0,a.useRef)(!1),l=d===i.getStaticData().swipeToCloseDirection,m=l?(0,h.isRtl)()?"100%":"-100%":0,y=e===c.ToastAnimationStage.Add,_=e===c.ToastAnimationStage.Remove;let v=0,p="",T=!1,L=!1;if(!l){n.slice(n.indexOf(i)+1,n.length).forEach((t=>{const e=s.current.get(t);e&&t.getAnimationStage()!==c.ToastAnimationStage.None&&(v+=e,t.getAnimationStage()===c.ToastAnimationStage.Add?T=!0:t.getAnimationStage()===c.ToastAnimationStage.Remove&&(L=!0))})),p=y||_?`calc(100% + ${v}px)`:`${v}px`}const C=!y&&!_&&!L&&u.current,S=T||C,w=g(f.container,o&&f.hidden,S&&f["reset-duration"],y&&f.added,"compact"===r&&f.compact);return(0,a.useLayoutEffect)((),{style:{transform:`translateX(${m}) translateY(${p})`},className:w}}({animationStage:S,isHidden:w,toasts:o,toast:e,toastsHeightsMapRef:y,suggestedLayout:s,swipeDirection:L});return(0,a.useLayoutEffect)((()=>{if(e.getCurrentLayer()!==i||null===_.current||S!==c.ToastAnimationStage.Add)return;const t=e.getElement();null===t||t!==_.current?(e.setElement(_.current),d()):(e.setAnimationStage(c.ToastAnimationStage.None),d())})),(0,a.useEffect)((()=>{L===T&&L!==n.Unset&&e.remove(c.CloseTrigger.Swipe)}),[L,e]),a.createElement(l.Portal,{layerOptions:{position:"relative"},className:f["toast-portal"],"aria-hidden":!0},a.createElement("div",{className:g(f.wrapper,r&&f[`location-${r}`],w&&f["no-overflow"])},a.createElement("div",{onTouchStart:T?C.onTouchStart:void 0,onTouchEnd:T?C.onTouchEnd:void 0,onMouseOver:e.getStaticData().onMouseOver,onMouseOut:e.getStaticData().onMouseOut,ref:v,...x},e.render({onRemove:e.remove,suggestedLayout:s}))))}function C(t,e,o){return t.getKey(o)||e.toString(10)}const S={position:"fixed",bottom:"0",zIndex:145};class w{constructor(t,e,o=S,n,a){this._toasts={[c.ToastPriority.Low]:[],[c.ToastPriority.Medium]:[],[c.ToastPriority.High]:[]},this._container=void 0!==e?e:document.body,this._suggestedLayout=void 0!==t?t:"loose",this._location=null!=n?n:"bottom-left",this._manager=new r.OverlapManager(document),this._overlapManagerContainer=function(t,e={},o,n){const a=t.createElement("div");a.dataset.role="toast-container",a.classList.add(f["overlap-manager-container"]),"compact"===o&&a.classList.add(f.compact);n&&a.classList.add(f["on-chart"]);return M(a,{...S,...e}),a}(document,o,this._suggestedLayout,a),
this._manager.setContainer(this._overlapManagerContainer),this._container.appendChild(this._overlapManagerContainer),this._detachedContainer=document.createElement("div")}showToast(t){const{render:e,priority:o=c.ToastPriority.Medium,index:a,origin:i=this,onLayerChange:s,onRemoveEnd:r,onMouseOver:u,onMouseOut:g}=t,l=function(t){const e=(0,h.isRtl)()?n.Right:n.Left;return void 0===t?e:null!==t?t:void 0}(t.swipeToCloseDirection),m=new d({priority:o,origin:i,currentLayer:this,render:e,onLayerChange:s,swipeToCloseDirection:l,onRemoveEnd:r,onMouseOver:u,onMouseOut:g}),y=this._getNextKey();return m.setKey(this,y),"compact"===this._suggestedLayout&&o===c.ToastPriority.Low?Promise.all(this._toasts[c.ToastPriority.Low].map((t=>this.removeToast(t)))).then(():(this._add(m,a),this._render()),m}showExistingToast(t){const e=this._getNextKey();return t.setKey(this,e),this._add(t),this._render(),t}removeToast(t){return new Promise((e=>{t.setAnimationStage(c.ToastAnimationStage.Remove),this._render(),setTimeout((()=>{this._remove(t),this._render(),e()}),300)}))}update(t){const{suggestedLayout:e,location:o,container:n,rootContainerOptions:a}=t;let i=!1,s=!1;void 0!==e&&e!==this._suggestedLayout&&(this._setSuggestedLayout(e),i=!0),void 0!==o&&(this._setLocation(o),s=!0),void 0!==n&&(this._setContainer(n),s=!0),void 0!==a&&(this._updateRootContainer(a),s=!0),i?"compact"===this._suggestedLayout&&this._toasts[c.ToastPriority.Low].slice(0,-1).forEach(():s&&this._render()}orceRender(){this._render()}merge(t){x(t.getToasts()).forEach((async e=>{const o=e.getStaticData();await e.remove(),e.migrate(this),this.showExistingToast(e),void 0!==o.onLayerChange&&o.onLayerChange(t,this)}))}split(t){x(this._toasts).filter(().forEach((async e=>{const o=e.getStaticData();await e.remove(),e.migrate(t),t.showExistingToast(e),void 0!==o.onLayerChange&&o.onLayerChange(this,t)}))}reset(){this._toasts={[c.ToastPriority.Low]:[],[c.ToastPriority.Medium]:[],[c.ToastPriority.High]:[]},this._render()}removeRootContainer(){i.unmountComponentAtNode(this._detachedContainer),this._detachedContainer.remove(),this._overlapManagerContainer.remove()}_getToastsList(t){const e=t.getStaticData().priority;return this._toasts[e]}_normalizeIndex(t,e){return t<0?0:t>e.length?e.length:t}_add(t,e){const o=this._getToastsList(t);if(void 0!==e){const n=this._normalizeIndex(e,o);o.splice(n,0,t)}else o.push(t)}_remove(t){const e=this._getToastsList(t),o=e.indexOf(t);o>=0&&e.splice(o,1)}_render(){const t=x(this._toasts);i.render(a.createElement(T,{toasts:t,suggestedLayout:this._suggestedLayout,location:this._location,manager:this._manager,layer:this}),this._detachedContainer)}_setSuggestedLayout(t){t!==this._suggestedLayout&&("compact"===t?this._overlapManagerContainer.classList.add(f.compact):this._overlapManagerContainer.classList.remove(f.compact),this._suggestedLayout=t)}_setContainernction x(t){return[...t[c.ToastPriority.Low],...t[c.ToastPriority.Medium],...t[c.ToastPriority.High]]}function M(t,e){const{top:o,right:n,bottom:a,left:i,position:s,zIndex:r}=e;void 0!==s&&(t.style.position=s),void 0!==r&&(t.style.zIndex=String(r)),void 0!==o&&(t.style.top=o),void 0!==n&&(t.style.right=n),void 0!==a&&(t.style.bottom=a),void 0!==i&&(t.style.left=i)}}}]);