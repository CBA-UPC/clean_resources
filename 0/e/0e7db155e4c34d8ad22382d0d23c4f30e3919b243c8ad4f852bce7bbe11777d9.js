(()=>{"use strict";var e={791:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendErrorLog=void 0;var s=r(405),u=r(920),c=a(r(607)),l=r(340),d=a(r(321));t.sendErrorLog=function(e,t,r){return void 0===e&&(e="sdk"),o(void 0,void 0,void 0,(function(){var o,a,f,p,h,g,v;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),c.default.debug(t,t.details),o=[d.default.ERROR_NAME.InvalidAppId,d.default.ERROR_NAME.UnsubscribedFailedFromWorker,d.default.ERROR_NAME.NotPushEngagePayload,d.default.ERROR_NAME.PayloadLessInvalidNotificationPayload,d.default.ERROR_NAME.InvalidNotificationPayload,d.default.ERROR_NAME.PushPayloadParseError,d.default.ERROR_NAME.OfflineError,d.default.ERROR_NAME.OpenNotificationUrlFailed,d.default.ERROR_NAME.SendOptInAnalyticsError,d.default.ERROR_NAME.QuotaExceededError,d.default.ERROR_NAME.DisabledPushSubscriptionError,d.default.ERROR_NAME.UnknownError,d.default.ERROR_NAME.SDKInitOptionsNotFound,"NS_ERROR_FILE_CORRUPTED","NS_ERROR_STORAGE_CONSTRAINT","NS_ERROR_FILE_NO_DEVICE_SPACE","NS_ERROR_STORAGE_IOERR","NS_ERROR_NOT_INITIALIZED",d.default.ERROR_NAME.LocalStorageNotAvailable,d.default.ERROR_NAME.SubscriptionAlreadyInitialized],a=[],o.includes(t.name)||a.includes(t.type||"")?[2]:(f="".concat(l.env.__LOG_API_ENDPOINT__,"/logs"),p=n({sdk:l.env.__SDK_VERSION__,bw:(0,u.detectBrowser)(),app:"service-worker"===e?"new-service-worker":"web-sdk",name:t.name,data:t.details||{},message:t.message,stacktrace:(null===(g=t.stack)||void 0===g?void 0:g.toString())||(null===(v=(new Error).stack)||void 0===v?void 0:v.toString()),type:t.type,url:location.href},r),[4,(0,s.sendHttpRequest)(f,{method:"POST",body:JSON.stringify(p),mode:"no-cors"})]);case 1:return i.sent(),[3,3];case 2:return h=i.sent(),c.default.error("Error occurred while sending error logs",h),[3,3];case 3:return[2]}}))}))}},340:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.skipQueryParamsInWorkerPath=t.brandName=t.quieterUIPermissionImage=t.env=t.workerMessengerCommand=t.database=t.defaultMinStorageDuration=t.poweredByReferralUrl=t.pushEngageHomePageUrl=t.defaultNotificationTitle=t.defaultNotificationTag=t.loadingIcon=t.bellPlusIcon=t.bellCheckIcon=t.bellCircleIcon=t.bellRingIcon=t.bellBadgeIcon=t.bellSettingIcon=t.closeIcon=t.bellIcon=t.defaultServiceWorkerSetting=t.widgetOptInType=t.optInTypes=t.storageName=void 0,t.storageName="PushEngageSDK",t.optInTypes={bell:3,floatingBar:2,largeSafari:6,largeSafariWithSegments:8,safari:1,singleStep:4,sleekOptInBox:9},t.widgetOptInType=127,t.defaultServiceWorkerSetting={scope:!0,workerStatus:!0,worker:"service-worker.js"},t.bellIcon='<svg width="1em" height="1em" viewBox="0 0 18 22" fill="#4642E5" xmlns="http://www.w3.org/2000/svg">\n<path d="M9.0528 0.00546861C9.10255 0.0273431 9.14677 0.0546861 9.19652 0.0765606C9.52267 0.229682 9.71062 0.481238 9.7272 0.842167C9.73826 1.1156 9.73273 1.38903 9.7272 1.66246C9.7272 1.7773 9.76037 1.82652 9.88198 1.84839C12.458 2.31322 14.3762 4.14521 14.9068 6.67171C14.9953 7.10373 15.0174 7.55216 15.0285 7.99511C15.0506 8.91931 15.0119 9.84351 15.0672 10.7622C15.1667 12.3317 15.8466 13.6442 17.0296 14.6996C17.3723 15.0004 17.6321 15.3395 17.6708 15.8043C17.7537 16.7285 17.107 17.4503 16.1672 17.4996C16.1119 17.505 16.0567 17.4996 16.0014 17.4996C11.2308 17.4996 6.45468 17.4996 1.6841 17.4996C1.13131 17.4996 0.666963 17.33 0.324232 16.8925C-0.189863 16.2418 -0.0848327 15.3449 0.584044 14.7653C1.17 14.2567 1.63987 13.6715 1.99919 12.988C2.45248 12.1239 2.65701 11.1943 2.65701 10.2263C2.65701 9.38414 2.64595 8.54744 2.66254 7.70528C2.71782 4.82879 4.90134 2.32416 7.77032 1.85386C7.93063 1.82652 7.97485 1.76636 7.96933 1.61871C7.95827 1.45465 7.98038 1.29059 7.9638 1.12653C7.91405 0.585142 8.11858 0.202339 8.6382 0C8.7764 0.00546861 8.9146 0.00546861 9.0528 0.00546861Z"/>\n<path d="M8.47234 21.0049C8.06881 20.8737 7.64316 20.7862 7.27279 20.5948C6.40491 20.1518 5.87423 19.4245 5.61994 18.4948C5.61441 18.4675 5.61441 18.4401 5.60889 18.3964C7.76477 18.3964 9.91513 18.3964 12.0821 18.3964C12.0102 18.7901 11.8554 19.1511 11.6343 19.4847C11.0815 20.3159 10.3076 20.819 9.30706 20.9721C9.27389 20.9776 9.24625 20.994 9.21308 21.0049C8.96985 21.0049 8.7211 21.0049 8.47234 21.0049Z"/>\n</svg>',t.closeIcon='<svg width="1em" height="1em" viewBox="0 0 11 11" fill="#2A2A2A" xmlns="http://www.w3.org/2000/svg">\n<path d="M10.4583 1.54041L9.45959 0.541664L5.5 4.50125L1.54042 0.541664L0.541672 1.54041L4.50126 5.5L0.541672 9.45958L1.54042 10.4583L5.5 6.49875L9.45959 10.4583L10.4583 9.45958L6.49875 5.5L10.4583 1.54041Z" />\n</svg>',t.bellSettingIcon='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="#2A2A2A"><path d="M19 12C15.13 12 12 15.13 12 19C12 19.34 12.03 19.67 12.08 20H3V19L5 17V11C5 7.9 7.03 5.17 10 4.29V4C10 2.9 10.9 2 12 2S14 2.9 14 4V4.29C16.97 5.17 19 7.9 19 11V12M10 21C10 22.11 10.9 23 12 23C12.39 23 12.75 22.88 13.06 22.69C12.74 22.17 12.5 21.6 12.3 21H10M23.77 20.32C23.87 20.39 23.89 20.53 23.83 20.64L22.83 22.37C22.77 22.5 22.64 22.5 22.53 22.5L21.28 21.97C21 22.17 20.75 22.34 20.44 22.47L20.25 23.79C20.23 23.91 20.13 24 20 24H18C17.88 24 17.77 23.91 17.75 23.79L17.57 22.47C17.25 22.34 17 22.17 16.72 21.97L15.5 22.5C15.37 22.5 15.23 22.5 15.17 22.37L14.17 20.64C14.11 20.53 14.14 20.39 14.23 20.32L15.29 19.5C15.27 19.33 15.25 19.17 15.25 19S15.27 18.67 15.29 18.5L14.23 17.68C14.14 17.61 14.11 17.5 14.17 17.36L15.17 15.64C15.23 15.53 15.37 15.5 15.5 15.53L16.72 16C17 15.83 17.25 15.66 17.57 15.54L17.75 14.21C17.77 14.09 17.88 14 18 14H20C20.13 14 20.23 14.09 20.25 14.21L20.44 15.54C20.75 15.66 21 15.83 21.28 16L22.53 15.53C22.64 15.5 22.77 15.53 22.83 15.64L23.83 17.36C23.89 17.5 23.87 17.61 23.77 17.68L22.72 18.5C22.74 18.67 22.75 18.84 22.75 19S22.74 19.33 22.72 19.5L23.77 20.32M20.75 19C20.75 18.03 19.97 17.25 19 17.25S17.25 18.03 17.25 19 18.04 20.75 19 20.75 20.75 19.97 20.75 19Z" /></svg>',t.bellBadgeIcon='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="#2A2A2A"><path d="M21 6.5C21 8.43 19.43 10 17.5 10S14 8.43 14 6.5 15.57 3 17.5 3 21 4.57 21 6.5M19 11.79C18.5 11.92 18 12 17.5 12C14.47 12 12 9.53 12 6.5C12 5.03 12.58 3.7 13.5 2.71C13.15 2.28 12.61 2 12 2C10.9 2 10 2.9 10 4V4.29C7.03 5.17 5 7.9 5 11V17L3 19V20H21V19L19 17V11.79M12 23C13.11 23 14 22.11 14 21H10C10 22.11 10.9 23 12 23Z" /></svg>',t.bellRingIcon='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="#2A2A2A"><path d="M21,19V20H3V19L5,17V11C5,7.9 7.03,5.17 10,4.29C10,4.19 10,4.1 10,4A2,2 0 0,1 12,2A2,2 0 0,1 14,4C14,4.1 14,4.19 14,4.29C16.97,5.17 19,7.9 19,11V17L21,19M14,21A2,2 0 0,1 12,23A2,2 0 0,1 10,21M19.75,3.19L18.33,4.61C20.04,6.3 21,8.6 21,11H23C23,8.07 21.84,5.25 19.75,3.19M1,11H3C3,8.6 3.96,6.3 5.67,4.61L4.25,3.19C2.16,5.25 1,8.07 1,11Z" /></svg>',t.bellCircleIcon='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="#2A2A2A"><path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M17,16V15L16,14V11.39C16,10.3 15.73,9.34 15.21,8.53C14.7,7.72 13.96,7.21 13,7V6.5A1,1 0 0,0 12,5.5A1,1 0 0,0 11,6.5V7C10.04,7.21 9.3,7.72 8.79,8.53C8.27,9.34 8,10.3 8,11.39V14L7,15V16H17M13.5,17H10.5A1.5,1.5 0 0,0 12,18.5A1.5,1.5 0 0,0 13.5,17Z" /></svg>',t.bellCheckIcon='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="#2A2A2A"><path d="M17.75 21.16L15 18.16L16.16 17L17.75 18.59L21.34 15L22.5 16.41L17.75 21.16M3 20V19L5 17V11C5 7.9 7.03 5.18 10 4.29V4C10 2.9 10.9 2 12 2C13.11 2 14 2.9 14 4V4.29C16.97 5.18 19 7.9 19 11V12.08L18 12C14.69 12 12 14.69 12 18C12 18.7 12.12 19.37 12.34 20H3M12 23C10.9 23 10 22.11 10 21H12.8C13.04 21.41 13.33 21.79 13.65 22.13C13.29 22.66 12.69 23 12 23Z" /></svg>',t.bellPlusIcon='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="#2A2A2A"><path d="M17 14V17H14V19H17V22H19V19H22V17H19V14M12 2A2 2 0 0 0 10 4A2 2 0 0 0 10 4.29C7.12 5.14 5 7.82 5 11V17L3 19V20H12.35A6 6 0 0 1 12 18A6 6 0 0 1 18 12A6 6 0 0 1 19 12.09V11C19 7.82 16.88 5.14 14 4.29A2 2 0 0 0 14 4A2 2 0 0 0 12 2M10 21A2 2 0 0 0 12 23A2 2 0 0 0 13.65 22.13A6 6 0 0 1 12.81 21Z" /></svg>',t.loadingIcon='<svg viewBox="0 0 1024 1024" focusable="false" width="1em" height="1em" fill="currentColor"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg>',t.defaultNotificationTag="welcome_notification",t.defaultNotificationTitle="Click to see updates",t.pushEngageHomePageUrl="https://www.pushengage.com/",t.poweredByReferralUrl="".concat(t.pushEngageHomePageUrl,"?utm_medium=referral&utm_campaign=powered_by&utm_source=pushengage_sdk"),t.defaultMinStorageDuration=7,t.database={name:"PushEngageSDK",stores:[{name:"ids",keyPath:"id"},{name:"failedViewedNotificationTags",keyPath:"id"},{name:"failedClickedNotificationTags",keyPath:"id"}],version:1},t.workerMessengerCommand={ampSubscriptionState:"amp-web-push-subscription-state",ampSubscribe:"amp-web-push-subscribe",ampUnsubscribe:"amp-web-push-unsubscribe"},t.env={__CDN_SERVER_HOST__:"https://clientcdn.pushengage.com",__SERVER_HOST__:"https://web-sdk.pushengage.com",__SAFARI_WEB_PUSH_PACKAGE_URL__:"https://safari.pushengage.com",__SUBSCRIBER_API_ENDPOINT__:"https://clients-api.pushengage.com/p/v1",__ANALYTICS_API_ENDPOINT__:"https://noti-analytics.pushengage.com/p/v1",__LOG_API_ENDPOINT__:"https://notify.pushengage.com/v1",__DOMAIN_NAME__:"pushengage.com",__OPT_IN_ANALYTICS_API_ENDPOINT__:"https://oeqepmcz7a.execute-api.us-east-1.amazonaws.com/beta/streams/optin/records",__SDK_VERSION__:"3.0.37",__WORKER_VERSION__:"3.0.37",__TABOOLA_API_ENDPOINT__:"https://api.taboola.com/1.2",__TABOOLA_API_KEY__:"a460a30141a022c6dc01526bba996da108798fd0",__TRIGGER_API_ENDPOINT__:"https://m4xrk918t5.execute-api.us-east-1.amazonaws.com/beta/streams/production_triggers/records",__STATIC_STORAGE_ENDPOINT__:"https://assetscdn.pushengage.com"},t.quieterUIPermissionImage={firefox:"".concat(t.env.__STATIC_STORAGE_ENDPOINT__,"/react-dashboard/design/reminder-firefox.png"),chrome:"".concat(t.env.__STATIC_STORAGE_ENDPOINT__,"/react-dashboard/design/reminder-chrome.png")},t.brandName="PushEngage",t.skipQueryParamsInWorkerPath=[60413]},225:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(471),s=r(609),u=i(r(607)),c=r(920),l=r(14),d=r(791),f=r(94),p=r(340);n(void 0,void 0,void 0,(function(){var e,t,r,i,h,g,v,m,y,_,b;return o(this,(function(w){switch(w.label){case 0:if(w.trys.push([0,5,,6]),(e=(0,s.getSDKLoadCount)())>1)return u.default.warn("Please include our SDK only once on your page for optimal performance as the web push SDK is included more than once."),u.default.warn("The SDK initialization is exiting to prevent errors caused by double initialization, which has occurred ".concat(e," times.")),[2];t=window.PushEngage,r=window._peq,i=(0,s.getSDKInitOptions)(t,r),h=[{check:message:"Please provide app init options as they are missing.",logType:"error"},{check:function(){return!(null==i?void 0:i.appId)},message:"Please provide a valid appId.",logType:"error"},{check:message:"Your browser does not support push notifications.",logType:"warn"},{check:function(){return n(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,(0,c.isPrivateBrowser)()];case 1:return[2,e.sent()]}}))}))},message:"Your browser is in private mode. Push subscription will not work in private mode.",logType:"warn"}],g=0,v=h,w.label=1;case 1:return g<v.length?[4,(m=v[g]).check()]:[3,4];case 2:if(w.sent())return y=m.logType,_=m.message,u.default[y](_),(0,f.handleSDKMethodErrors)({commands:t,legacyCommands:r,errorMessage:_}),[2];w.label=3;case 3:return g++,[3,1];case 4:return window.__PushEngageSDKInitOptions=i,(0,l.addScriptToPage)("".concat(p.env.__CDN_SERVER_HOST__,"/sdks/pushengage-subscription.js?v=").concat(p.env.__SDK_VERSION__)),(0,l.addStyleToPage)("".concat(p.env.__CDN_SERVER_HOST__,"/sdks/pushengage-sdk-style.css?v=").concat(p.env.__SDK_VERSION__)),[3,6];case 5:return b=w.sent(),u.default.error(b.message),(0,d.sendErrorLog)("sdk",b,{url:location.href}),[3,6];case 6:return[2]}}))}))},321:function(e,t){var r,n=this&&this.__extends||(r=;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var r=t.message,n=t.name,o=void 0===n?"AppError":n,i=t.details,a=void 0===i?{}:i,s=t.type,u=void 0===s?"Error":s,c=e.call(this,r)||this;return c.details=a,c.name=o,c.type=u,c}return n(t,e),t.ERROR_NAME={InvalidAppId:"InvalidAppId",UnsubscribedFailedFromWorker:"UnsubscribedFailedFromWorker",NotPushEngagePayload:"NotPushEngagePayload",PayloadLessInvalidNotificationPayload:"PayloadLessInvalidNotificationPayload",InvalidNotificationPayload:"InvalidNotificationPayload",PushPayloadParseError:"PushPayloadParseError",OfflineError:"OfflineError",OpenNotificationUrlFailed:"OpenNotificationUrlFailed",SendOptInAnalyticsError:"SendOptInAnalyticsError",QuotaExceededError:"QuotaExceededError",DisabledPushSubscriptionError:"DisabledPushSubscriptionError",IndexedDBOpenError:"IndexedDBOpenError",UnknownError:"UnknownError",PayloadLessFetchError:"PayloadLessFetchError",PayloadLessParseError:"PayloadLessParseError",PushPayloadFetchError:"PushPayloadFetchError",NotificationParseError:"NotificationParseError",RequiredSettingsMissing:"RequiredSettingsMissing",SiteDataMissing:"SiteDataMissing",HttpRequestError:"HttpRequestError",UserNotSubscribed:"UserNotSubscribed",ServiceWorkerNotFound:"ServiceWorkerNotFound",ServiceWorkerNotRegistering:"ServiceWorkerNotRegistering",SDKInitOptionsNotFound:"SDKInitOptionsNotFound",RequestPermissionNotSupported:"RequestPermissionNotSupported",SubscriberAdditionServerError:"SubscriberAdditionServerError",SubscriberHashNotAvailableServerError:"SubscriberHashNotAvailableServerError",LocalStorageNotAvailable:"LocalStorageNotAvailable",SubscriptionAlreadyInitialized:"SubscriptionAlreadyInitialized"},t.ERROR_TYPE={IndexedDBError:"IndexedDBError",DexterServerError:"DexterServerError"},t.ERROR_MESSAGE={InvalidAppId:"AppId is not defined.",UserNotSubscribed:"User is not subscribed."},t}(Error);t.default=o},14:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.replaceLastNumberFromIpToZero=t.deepMerge=t.keepLastMaxElements=t.convertStringToArray=t.delay=t.capitalizeFirstLetter=t.uniqueArray=t.isNull=t.isUndefined=t.isWorker=t.toInteger=t.addStyleToPage=t.addScriptToPage=t.isEmptyArray=t.isEmptyObject=t.omit=t.get=t.isObject=t.removeArrayItem=t.safeStringify=t.safeParse=t.hasOwn=t.noop=void 0;var o=r(914);t.noop=t.hasOwn=t.safeParse=function(e){var t=null;try{t=JSON.parse(e)}catch(e){(0,o.logDebug)(e)}return t},t.safeStringify=function(e){var t=null;try{t=JSON.stringify(e)}catch(e){(0,o.logDebug)(e)}return t},t.removeArrayItem=function(e,t){var r=e.indexOf(t);return r>-1&&e.splice(r,1),e},t.isObject=t.get=function(e,t,r){for(var n=e,o=0,i=Array.isArray(t)?t:t.split(".");o<i.length;o++){var a=i[o];if(null==n)return r;n=n[a]}return void 0===n?r:n},t.omit=function(e,t){for(var r=n({},e),o=0,i=t;o<i.length;o++){for(var a=i[o],s=Array.isArray(a)?a:[a],u=r,c=s[0],l=0;l<s.length-1;l++)u=u[c],c=s[l+1];delete u[c]}return r},t.isEmptyObject=function(e){return!(0,t.isObject)(e)||0===Object.keys(e).length},t.isEmptyArray=t.addScriptToPage=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach((function(e){try{var t=document.createElement("script");t.src=e,t.async=!0,t.type="text/javascript",document.head.appendChild(t)}catch(t){throw new Error("Invalid script URL: ".concat(e))}}))},t.addStyleToPage=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach((function(e){try{var t=document.createElement("link");t.rel="stylesheet",t.href=e,t.type="text/css",document.head.appendChild(t)}catch(t){throw new Error("Invalid style URL: ".concat(e))}}))},t.toInteger=function(e){if("string"!=typeof e&&"number"!=typeof e)return 0;e=String(e).trim();var t=parseInt(e,10);return isNaN(t)?0:t},t.isWorker=t.isUndefined=t.isNull=t.uniqueArray=t.capitalizeFirstLetter=t.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t.convertStringToArray=t.keepLastMaxElements=function(e,t){return e.length>t?e.slice(-t):e},t.deepMerge=function(e,r){for(var n in r)"object"==typeof r[n]&&null!==r[n]&&(0,t.hasOwn)(e,n)?(0,t.deepMerge)(e[n],r[n]):e[n]=r[n]},t.replaceLastNumberFromIpToZero=function(e,t){if(!e||!t)return t;var r=t.includes(".")?".":":",n=t.split(r);return n[n.length-1]="0",n.join(r)}},920:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getChromiumStatus=t.getBrowserInfo=t.detectDeviceType=t.isPrivateBrowser=t.detectBrowser=t.isBrowser=void 0;var r=function(){return new Promise((function(e,t){var r,n,o,i="Unknown",a=s=void 0!==(o=navigator.vendor)&&0===o.indexOf("Apple")&&s(37)?(i="Safari",void 0!==navigator.maxTouchPoints?function(){var e=String(Math.random());try{window.indexedDB.open(e,1).onupgradeneeded=function(t){var r,n,o=null===(r=t.target)||void 0===r?void 0:r.result;try{o.createObjectStore("test",{autoIncrement:!0}).put(new Blob),a(!1)}catch(e){var i=e;if(e instanceof Error&&(i=null!==(n=e.message)&&void 0!==n?n:e),"string"!=typeof i)return a(!1);var s=/BlobURLs are not yet supported/.test(i);return a(s)}finally{o.close(),window.indexedDB.deleteDatabase(e)}}}catch(e){return a(!1)}}():)):)?(n=navigator.userAgent,i=n.match(/Chrome/)?void 0!==navigator.brave?"Brave":n.match(/Edg/)?"Edge":n.match(/OPR/)?"Opera":"Chrome":"Chromium",void 0!==self.Promise&&void 0!==self.Promise.allSettled?navigator.webkitTemporaryStorage.queryUsageAndQuota((function(e,t){var r,n=Math.round(t/1048576),o=2*Math.round((void 0!==(r=window).performance&&void 0!==r.performance.memory&&void 0!==r.performance.memory.jsHeapSizeLimit?r.performance.memory.jsHeapSizeLimit:1073741824)/1048576);a(n<o)}),():(0,window.webkitRequestFileSystem)(0,1,(function(){a(!1)}),(function(){a(!0)}))):void 0!==document.documentElement&&void 0!==document.documentElement.style.MozAppearance&&s(37)?(i="Firefox",(r=indexedDB.open("test")).onerror=function(){a(!0)},r.onsuccess=:void 0!==navigator.msSaveBlob&&s(39)?(i="Internet Explorer",a(void 0===window.indexedDB)):/Edge\/\d/.test(navigator.userAgent)?(i="Edge",a(!1)):t(new Error("detectIncognito cannot determine the browser"))}))};t.isBrowser=t.detectBrowser=function(e){var t,r,n,o,i,a,s,u,c,l,d;void 0===e&&(e=navigator.userAgent);var f="Unknown",p="";return/Firefox\/\d/.test(e)?(f="Firefox",p=(null===(t=e.match(/Firefox\/(\d+)/))||void 0===t?void 0:t[1])||""):/OPR\/\d/.test(e)?(f="Opera",p=(null===(r=e.match(/OPR\/(\d+)/))||void 0===r?void 0:r[1])||""):/Edg\/\d/.test(e)?(f="Edge",p=(null===(n=e.match(/Edg\/(\d+)/))||void 0===n?void 0:n[1])||""):/Edge\/\d/.test(e)?(f="Edge",p=(null===(o=e.match(/Edge\/(\d+)/))||void 0===o?void 0:o[1])||""):/EdgA\/\d/.test(e)?(f="Edge",p=(null===(i=e.match(/EdgA\/(\d+)/))||void 0===i?void 0:i[1])||""):/UCBrowser\//.test(e)?(f="Ucbrowser",p=(null===(a=e.match(/UCBrowser\/(\d+)/))||void 0===a?void 0:a[1])||""):/SamsungBrowser\//.test(e)?(f="Samsung",p=(null===(s=e.match(/SamsungBrowser\/(\d+)/))||void 0===s?void 0:s[1])||""):/YaBrowser\//.test(e)?(f="Yandex",p=(null===(u=e.match(/YaBrowser\/(\d+)/))||void 0===u?void 0:u[1])||""):/Chrome\//.test(e)?(f="Chrome",p=(null===(c=e.match(/Chrome\/(\d+)/))||void 0===c?void 0:c[1])||""):/Version\//.test(e)?(f="Safari",p=(null===(l=e.match(/Version\/(\d+)/))||void 0===l?void 0:l[1])||""):/MSIE|Trident/.test(e)&&(f="IE",p=(null===(d=e.match(/(?:MSIE |rv:)(\d+)/))||void 0===d?void 0:d[1])||""),p=p.replace(/[^\d.]/g,"").split(".")[0],{name:f,version:Number(p)}},t.isPrivateBrowser=function(){return new Promise((function(e){r().then(().catch(()}))},t.detectDeviceType=function(e){return void 0===e&&(e=navigator.userAgent),/Mobi/.test(e)?"mobile":"desktop"},t.getBrowserInfo=function(){var e=(0,t.detectBrowser)();return{name:e.name,version:e.version,availableScreen:"".concat(screen.availWidth,"*").concat(screen.availHeight),device:(0,t.detectDeviceType)(),host:location.host,href:location.href,language:navigator.language,pixelDepth:screen.pixelDepth,referrer:document.referrer,screen:"".concat(screen.width,"*").concat(screen.height),userAgent:navigator.userAgent}},t.getChromiumStatus=function(){var e=Boolean(window.chrome),t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return e&&t?{isChromium:!0,version:Number(t[2])}:{isChromium:!1,version:0}}},914:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logDebug=void 0,t.logDebug=,405:function(e,t,r){var n=this&&this.__awaiter||o=this&&this.__generator||i=this&&this.__rest||a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendHttpRequest=void 0;var s=a(r(321)),u=t.sendHttpRequest=function(e,t){return void 0===t&&(t={}),n(void 0,void 0,void 0,(function(){var r,n,a,c,l,d,f,p,h,g,v;return o(this,(function(o){switch(o.label){case 0:r=t.retryDelay,n=void 0===r?1e3:r,a=t.retries,c=void 0===a?0:a,l=t.skipRetryStatusCodes,d=void 0===l?[400,404,403,422]:l,(f=i(t,["retryDelay","retries","skipRetryStatusCodes"])).body&&(f.headers||(f.headers={"Content-Type":"application/json"})),p=void 0,h=0,o.label=1;case 1:if(!(h<c+1))return[3,8];g=n*(h+1),o.label=2;case 2:return o.trys.push([2,5,,7]),[4,fetch(e,f)];case 3:return(p=o.sent()).ok||h>=c||d.includes(p.status)?[3,8]:[4,u(g)];case 4:return o.sent(),[3,7];case 5:if(v=o.sent(),h>=c){if("TypeError"===v.name&&"Failed to fetch"===v.message&&!navigator.onLine)throw new s.default({message:"Browser is offline. Request not sent.",name:s.default.ERROR_NAME.OfflineError,details:{fetchOptions:f,requestUrl:e}});throw new s.default({message:v.message,name:v.name||s.default.ERROR_NAME.HttpRequestError,details:{fetchOptions:f,requestUrl:e}})}return[4,u(g)];case 6:return o.sent(),[3,7];case 7:return h++,[3,1];case 8:if(!p)throw new s.default({message:"Request failed and no response was received.",name:s.default.ERROR_NAME.HttpRequestError,details:{fetchOptions:f,requestUrl:e}});return[2,p]}}))}))}},607:function(e,t,r){var n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var o=r(340),i={debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="undefined"==typeof window;"undefined"!=typeof window&&"undefined"!=typeof sessionStorage&&sessionStorage.getItem("".concat(o.storageName,"Debug"))&&(r=!0),r&&console.debug.apply(console,n(["PushEngage:"],e,!1))},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,n(["PushEngage:"],e,!1))},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,n(["PushEngage:"],e,!1))},error:;t.default=i},241:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSubdomainFromUrl=t.detectSiteType=t.detectProtocol=t.isLocalhost=t.getQueryParamsFromUrl=t.addQueryParamsToUrl=t.safeDecodeURIComponent=t.getValueFromUrlByKey=t.getUrlObject=void 0,t.getUrlObject=function(e){var t,r=function(e){if("function"!=typeof e||"URL"!==e.name)return!1;var t;try{t=new e("http://example.com")}catch(e){return!1}return"search"in t&&"searchParams"in t&&"origin"in t&&"host"in t};if(r(URL))try{return new URL(e)}catch(e){return null}else try{var n=document.createElement("iframe");document.body.appendChild(n);var o=null===(t=n.contentWindow)||void 0===t?void 0:t.URL;return document.body.removeChild(n),r(o)?new o(e):null}catch(e){return null}},t.getValueFromUrlByKey=function(e,r){try{var n=(0,t.getUrlObject)(r);if(!n)return;return new URLSearchParams(n.search).get(e)||void 0}catch(e){return}},t.safeDecodeURIComponent=function(e,t){void 0===t&&(t=0);for(var r=String(e).split(/(%(?:d0|d1)%.{2})/),n="",o=0,i=r.length;o<i;o++){var a=void 0;try{a=decodeURIComponent(r[o])}catch(e){a=t?r[o].replace(/%(?!\d+)/g,"%25"):r[o]}n+=a}return n},t.addQueryParamsToUrl=function(e,r){var n=(0,t.getUrlObject)(e);return n?(Object.keys(r).forEach((),n.toString()):e},t.getQueryParamsFromUrl=function(e){var t={},r=e.indexOf("?");if(-1!==r)for(var n=e.substring(r+1).split("&"),o=0;o<n.length;o++){var i=n[o].split("="),a=decodeURIComponent(i[0]),s=decodeURIComponent(i[1]||"");t[a]=s}return t},t.isLocalhost=function(){var e=location.hostname;return Boolean("localhost"===e||"[::1]"===e||e.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},t.detectProtocol=function(e){if(!e)return location.protocol.slice(0,-1);var t=e.match(/^(\w+):\/\//);return t?t[1]:"http"},t.detectSiteType=function(){return(0,t.isLocalhost)()?"https":(0,t.detectProtocol)()},t.getSubdomainFromUrl=function(e){try{var r=(0,t.getUrlObject)(e);if(!r)return null;var n=r.hostname.split(".");return n.length>=3?n[0]:null}catch(e){return null}}},704:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isPushNotificationSupported=t.handlePushEvent=void 0;var o=n(r(607)),i=r(471),a=r(920);t.handlePushEvent=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;r++){var n=e[r];if("function"==typeof n)try{n()}catch(e){o.default.error(e)}}},t.isPushNotificationSupported=function(){return new Promise((function(e){(0,i.isPushNotificationSupported)()&&(0,a.isBrowser)()||e(!1),(0,a.isPrivateBrowser)().then(().catch(()}))}},94:function(e,t,r){var n=this&&this.__spreadArray||o=this&&this.__importDefault||Object.defineProperty(t,"__esModule",{value:!0}),t.handleSDKMethodErrors=void 0;var i=r(704),a=o(r(607));t.handleSDKMethodErrors=function(e){var t=e.errorMessage,r=e.commands,o=e.legacyCommands;if("undefined"!=typeof Proxy){var s={push:i.handlePushEvent,isPushNotificationSupported:,u=new Proxy(s,{get:function(e,r){return"function"==typeof e[r]?e[r]:});window.PushEngage=Object.freeze(u),r&&Array.isArray(r)&&i.handlePushEvent.apply(void 0,r);var c=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];t.forEach((function(t){if(Array.isArray(t)){var r=t.find((function(e){return"function"==typeof e}));if(r)try{r({statuscode:0,message:e})}catch(e){a.default.error(e)}}}))};window._peq=Object.freeze({push:c.bind(null,t)}),o&&Array.isArray(o)&&c.apply(void 0,n([t],o,!1));var l={get:function(){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.find(();if(n)return n({statuscode:0,message:t})}}};window._pe=Object.freeze(new Proxy({},l))}}},609:function(e,t,r){var n=this&&this.__assign||Object.defineProperty(t,"__esModule",{value:!0}),t.removeSubscriberIdFromTag=t.getColorTheme=t.isHostPushEngageSubDomain=t.getSDKInitOptions=t.isDOMContentLoaded=t.getSDKLoadCount=void 0;var o=r(14),i=r(340);t.getSDKLoadCount=function(){var e=window.__PushEngageSdkLoadCount||0;return window.__PushEngageSdkLoadCount=e+1},t.isDOMContentLoaded=function(){return new Promise((function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",():e()}))},t.getSDKInitOptions=function(e,t){if(void 0===t&&(t=[]),e&&Array.isArray(e)){for(var r,i=0;i<e.length;i+=1){var a=e[i];if(Array.isArray(a)&&a.length>0){var s=a[0],u=a[1];if("init"===s&&"object"==typeof u){r=u;break}}}if(r){if((0,o.isUndefined)(window.dialog_box)||(r.isSubscriptionOnSubDomain=!0),!r.isLegacySDK)return r;if(!Array.isArray(t))return r;var c=!1;for(i=0;i<t.length;i+=1)if(a=t[i],Array.isArray(a)&&a.length>0&&(s=a[0],u=a[1],"init"===s&&(c=!0,("string"==typeof u||Array.isArray(u))&&(r.segment=u)),"config"===s&&"object"==typeof u)){var l={};(0,o.isUndefined)(u.worker)||(l.path=u.worker),(0,o.isUndefined)(u.scope)||(l.scope=u.scope),(0,o.isUndefined)(u.workerStatus)||(l.status=u.workerStatus),(0,o.isEmptyObject)(l)||(r.serviceWorker=l)}return c?r:n(n({},r),{disabledDefaultPrompt:!0})}}},t.isHostPushEngageSubDomain=function(e){return"".concat(e,".").concat(i.env.__DOMAIN_NAME__)===location.host},t.getColorTheme=function(e){var t=e.replace("#","");return(.299*parseInt(t.substring(0,2),16)+.587*parseInt(t.substring(2,4),16)+.114*parseInt(t.substring(4,6),16))/255>.5?"light":"dark"},t.removeSubscriberIdFromTag=function(e){if(!e.includes("-"))return e;var t=e.lastIndexOf("-");return e.substring(0,t)}},471:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTokenRefresh=t.getNotificationPermission=t.isUserGestureRequiredForPermissionPrompt=t.isSupportQuieterUI=t.isPushNotificationSupported=t.supportsVapidPush=t.safariWebPushSupported=t.hasSupportForPushApiInSafari=void 0;var n=r(920),o=r(241),i=r(14);t.hasSupportForPushApiInSafari=function(){return"Safari"===(0,n.detectBrowser)().name&&"serviceWorker"in navigator&&"Notification"in window&&"PushManager"in window},t.safariWebPushSupported=function(){var e=(0,n.detectBrowser)(),t=e.name,r=e.version;return"Safari"===t&&r>=11&&"Notification"in window&&"safari"in window&&"pushNotification"in window.safari},t.supportsVapidPush=function(){var e=(0,n.detectBrowser)(),t=e.name,r=e.version,a=(0,n.detectDeviceType)(),s=(0,o.detectSiteType)();return!("Ucbrowser"===t||"Firefox"===t&&(48===r||49===r)||"Opera"===t&&41===r||"Yandex"===t&&"mobile"===a)&&(!!("http"===s&&"Firefox"===t&&r>=50)||"Notification"in window&&"PushManager"in window&&"undefined"!=typeof PushSubscriptionOptions&&(0,i.hasOwn)(PushSubscriptionOptions.prototype,"applicationServerKey"))},t.isPushNotificationSupported=t.isSupportQuieterUI=function(){var e=(0,n.detectBrowser)(),t=e.name,r=e.version,o=(0,n.detectDeviceType)(),i=(0,n.getChromiumStatus)();return i.isChromium&&i.version>=80||"desktop"===o&&"Firefox"===t&&r>=72},t.isUserGestureRequiredForPermissionPrompt=function(){var e=(0,n.detectBrowser)(),t=e.name,r=e.version;return"Firefox"===t&&r>=72||"Safari"===t||"Yandex"===t},t.getNotificationPermission=function(e){var r=e.safariWebPushId,o=(0,n.detectBrowser)().name;return r&&"Safari"===o&&window.safari&&!(0,t.hasSupportForPushApiInSafari)()?window.safari.pushNotification.permission(r).permission:Notification.permission},t.isTokenRefresh=function(e){var r=e.safariWebPushId;return"granted"===(0,t.getNotificationPermission)({safariWebPushId:r})}}},t={};!225)})();
//# sourceMappingURL=pushengage-web-sdk.js.map