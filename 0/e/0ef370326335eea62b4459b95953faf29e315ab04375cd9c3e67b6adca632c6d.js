(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3145],{60374:function(t){t.exports=[function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUBSCRIPTION_PROMPT_WIDGET_DEFAULT_CONFIG=e.SUBSCRIPTION_WIDGET_USE_CASE_DEFAULT=e.SUBSCRIPTION_WIDGET_USE_CASE_NOT_SET=e.PAGE_VISITED_URL=e.MANUAL_UNSUBSCRIBE=e.EVENT_PW_SITE_OPENED=e.EVENT_GDPR_DELETE=e.EVENT_GDPR_CONSENT=e.EVENT_CLICK_SUBSCRIBE_BUTTON=e.EVENT_SHOW_SUBSCRIBE_BUTTON=e.EVENT_ON_HIDE_SUBSCRIPTION_WIDGET=e.EVENT_ON_SHOW_SUBSCRIPTION_WIDGET=e.EVENT_ON_HIDE_NOTIFICATION_PERMISSION_DIALOG=e.EVENT_ON_SHOW_NOTIFICATION_PERMISSION_DIALOG=e.EVENT_ON_UPDATE_INBOX_MESSAGES=e.EVENT_ON_PUT_NEW_MESSAGE_TO_INBOX_STORE=e.EVENT_ON_CHANGE_COMMUNICATION_ENABLED=e.EVENT_ON_NOTIFICATION_CLOSE=e.EVENT_ON_NOTIFICATION_CLICK=e.EVENT_ON_PUSH_DELIVERY=e.EVENT_ON_SW_INIT_ERROR=e.EVENT_ON_PERMISSION_GRANTED=e.EVENT_ON_PERMISSION_DENIED=e.EVENT_ON_PERMISSION_PROMPT=e.EVENT_ON_REGISTER=e.EVENT_ON_UNSUBSCRIBE=e.EVENT_ON_SUBSCRIBE=e.EVENT_ON_READY=e.EVENT_ON_LOAD=e.PERMISSION_PROMPT=e.PERMISSION_GRANTED=e.PERMISSION_DENIED=e.DEVICE_REGISTRATION_STATUS_UNREGISTERED=e.DEVICE_REGISTRATION_STATUS_REGISTERED=e.MANUAL_SET_LOGGER_LEVEL=e.KEY_SAFARI_PREVIOUS_PERMISSION=e.KEY_DEVICE_REGISTRATION_STATUS=e.KEY_CLICK_SUBSCRIBE_WIDGET=e.KEY_SHOW_SUBSCRIBE_WIDGET=e.DEFAULT_NOTIFICATION_IMAGE=e.DEFAULT_NOTIFICATION_TITLE=e.WAKE_UP_SERVICE_WORKER_INTERVAL=e.MAX_NOTIFICATION_DURATION=e.MIN_NOTIFICATION_DURATION=e.DEFAULT_NOTIFICATION_DURATION=e.PERIOD_GOAL_EVENT=e.PERIOD_SEND_APP_OPEN=e.FACEBOOK_HWID_KEY=e.FACEBOOK_APP_ID=e.DEFAULT_API_URL=e.DEFAULT_SERVICE_WORKER_URL=void 0,e.DEFAULT_SERVICE_WORKER_URL="/pushwoosh-service-worker.js",e.DEFAULT_API_URL="https://cp.pushwoosh.com/json/1.3/",e.FACEBOOK_APP_ID="436711767081797",e.FACEBOOK_HWID_KEY="FACEBOOK_HWID_KEY",e.PERIOD_SEND_APP_OPEN=36e5,e.PERIOD_GOAL_EVENT=864e5,e.DEFAULT_NOTIFICATION_DURATION=10,e.MIN_NOTIFICATION_DURATION=10,e.MAX_NOTIFICATION_DURATION=55,e.WAKE_UP_SERVICE_WORKER_INTERVAL=20,e.DEFAULT_NOTIFICATION_TITLE="Pushwoosh notification",e.DEFAULT_NOTIFICATION_IMAGE="https://cp.pushwoosh.com/img/logo-medium.png",e.KEY_SHOW_SUBSCRIBE_WIDGET="WIDGET_SHOWED",e.KEY_CLICK_SUBSCRIBE_WIDGET="WIDGET_CLICKED",e.KEY_DEVICE_REGISTRATION_STATUS="deviceRegistrationStatus",e.KEY_SAFARI_PREVIOUS_PERMISSION="safariPreviousPermission",e.MANUAL_SET_LOGGER_LEVEL="PW_SET_LOGGER_LEVEL",e.DEVICE_REGISTRATION_STATUS_REGISTERED="registered",e.DEVICE_REGISTRATION_STATUS_UNREGISTERED="unregistered",e.PERMISSION_DENIED="denied",e.PERMISSION_GRANTED="granted",e.PERMISSION_PROMPT="default",e.EVENT_ON_LOAD="onLoad",e.EVENT_ON_READY="onReady",e.EVENT_ON_SUBSCRIBE="onSubscribe",e.EVENT_ON_UNSUBSCRIBE="onUnsubscribe",e.EVENT_ON_REGISTER="onRegister",e.EVENT_ON_PERMISSION_PROMPT="onPermissionPrompt",e.EVENT_ON_PERMISSION_DENIED="onPermissionDenied",e.EVENT_ON_PERMISSION_GRANTED="onPermissionGranted",e.EVENT_ON_SW_INIT_ERROR="onSWInitError",e.EVENT_ON_PUSH_DELIVERY="onPushDelivery",e.EVENT_ON_NOTIFICATION_CLICK="onNotificationClick",e.EVENT_ON_NOTIFICATION_CLOSE="onNotificationClose",e.EVENT_ON_CHANGE_COMMUNICATION_ENABLED="onChangeCommunicationEnabled",e.EVENT_ON_PUT_NEW_MESSAGE_TO_INBOX_STORE="onPutNewMessageToInboxStore",e.EVENT_ON_UPDATE_INBOX_MESSAGES="onUpdateInboxMessages",e.EVENT_ON_SHOW_NOTIFICATION_PERMISSION_DIALOG="onShowNotificationPermissionDialog",e.EVENT_ON_HIDE_NOTIFICATION_PERMISSION_DIALOG="onHideNotificationPermissionDialog",e.EVENT_ON_SHOW_SUBSCRIPTION_WIDGET="onShowSubscriptionWidget",e.EVENT_ON_HIDE_SUBSCRIPTION_WIDGET="onHideSubscriptionWidget",e.EVENT_SHOW_SUBSCRIBE_BUTTON="showSubscribeButton",e.EVENT_CLICK_SUBSCRIBE_BUTTON="clickSubscribeButton",e.EVENT_GDPR_CONSENT="GDPRConsent",e.EVENT_GDPR_DELETE="GDPRDelete",e.EVENT_PW_SITE_OPENED="PW_SiteOpened",e.MANUAL_UNSUBSCRIBE="MANUAL_UNSUBSCRIBE",e.PAGE_VISITED_URL="PAGE_VISITED_URL",e.SUBSCRIPTION_WIDGET_USE_CASE_NOT_SET="not-set",e.SUBSCRIPTION_WIDGET_USE_CASE_DEFAULT="default",e.SUBSCRIPTION_PROMPT_WIDGET_DEFAULT_CONFIG={headerText:"Subscribe to our news",headerTextColor:"#000000",subheaderText:"Don't miss out on the latest news and updates!",subheaderTextColor:"#000000",buttonAcceptText:"Agree",buttonAcceptTextColor:"#1A72E8",buttonAcceptRound:"4px",buttonAcceptBackgroundColor:"#FFFFFF",buttonAcceptBorderColor:"#E3E4E8",buttonCancelText:"Deny",buttonCancelTextColor:"#1A72E8",buttonCancelRound:"4px",buttonCancelBackgroundColor:"#FFFFFF",buttonCancelBorderColor:"#E3E4E8",cappingCount:3,cappingDelay:144e5,backgroundColor:"#FFFFFF"}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(c=,o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},u=this&&this.__rest||Object.defineProperty(e,"__esModule",{value:!0}),e.message=e.log=e.keyValue=e.LogMessage=e.LogLog=e.LogBase=e.getInstance=void 0;var c,p,l=n(10),d=n(11),h=n(6);etInstance=b;var v=function(){function t(){}return t.prototype._add=function(t){var e=this;return g(.then(function(t){return e.getAll().then(function(n){if(Array.isArray(n)){var i=n.map(function(t){return t.id}).sort(function(t,e){return t==e?0:t<e?1:-1});if(i.length>e.maxItems)return Promise.all(i.slice(e.maxItems).map(function(t){return e.delete(t)})).then(function(){return t})}return t})})},t.prototype.delete=t.prototype.getAll=t}();e.LogBase=v;var _=v);e.LogLog=_;var m=v);e.LogMessage=m,e.keyValue=(i=h.STORE_NAME_KEY_VALUE,{get:getAll:extend:set:),e.log=new _,e.message=new m},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Data=void 0;var s=n(1),a=n(0),u=function(){eturn t.prototype.clearAll=t.prototype.setApplicationCode=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.applicationCode",t)];case 1:return e.sent(),[2]}})})},t.prototype.getApplicationCode=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.applicationCode")];case 1:return[2,t.sent()]}})})},t.prototype.setHwid=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.hwid",t)];case 1:return e.sent(),[2]}})})},t.prototype.getHwid=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.hwid")];case 1:return[2,t.sent()]}})})},t.prototype.setDeviceType=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.deviceType",t)];case 1:return e.sent(),[2]}})})},t.prototype.getDeviceType=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.deviceType")];case 1:return[2,t.sent()]}})})},t.prototype.setDeviceModel=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.deviceModel",t)];case 1:return e.sent(),[2]}})})},t.prototype.getDeviceModel=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.deviceModel")];case 1:return[2,t.sent()]}})})},t.prototype.setLanguage=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.language",t)];case 1:return e.sent(),[2]}})})},t.prototype.getLanguage=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.language","en")];case 1:return[2,t.sent()]}})})},t.prototype.setApiEntrypoint=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.apiEntrypoint",t)];case 1:return e.sent(),[2]}})})},t.prototype.getApiEntrypoint=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.apiEntrypoint",a.DEFAULT_API_URL)];case 1:return[2,t.sent()]}})})},t.prototype.setTokens=t.prototype.getTokens=function(){return r(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return[4,this.store.get("API_PARAMS")];case 1:return t=n.sent(),[4,this.store.get("params.tokens")];case 2:return[2,void 0!==(e=n.sent())?e:t]}})})},t.prototype.setApplicationServerKey=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.applicationServerKey",t)];case 1:return e.sent(),[2]}})})},t.prototype.getApplicationServerKey=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.applicationServerKey")];case 1:return[2,t.sent()]}})})},t.prototype.setSenderId=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("GCM_SENDER_ID",t)];case 1:return e.sent(),[4,this.store.set("params.senderId",t)];case 2:return e.sent(),[2]}})})},t.prototype.getSenderId=function(){return r(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return[4,this.store.get("GCM_SENDER_ID")];case 1:return t=n.sent(),[4,this.store.get("params.senderId")];case 2:return[2,void 0!==(e=n.sent())?e:t]}})})},t.prototype.setWebSitePushId=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.webSitePushId",t)];case 1:return e.sent(),[2]}})})},t.prototype.getWebSitePushId=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.webSitePushId")];case 1:return[2,t.sent()]}})})},t.prototype.setDefaultNotificationImage=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.defaultNotificationImage",t)];case 1:return e.sent(),[2]}})})},t.prototype.getDefaultNotificationImage=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.defaultNotificationImage",a.DEFAULT_NOTIFICATION_IMAGE)];case 1:return[2,t.sent()]}})})},t.prototype.setDefaultNotificationTitle=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.defaultNotificationTitle",t)];case 1:return e.sent(),[2]}})})},t.prototype.getDefaultNotificationTitle=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.defaultNotificationTitle",a.DEFAULT_NOTIFICATION_TITLE)];case 1:return[2,t.sent()]}})})},t.prototype.setUserId=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return t?[3,2]:[4,this.store.set("params.userId",void 0)];case 1:case 3:return e.sent(),[2];case 2:return[4,this.store.set("params.userId",t.toString())]}})})},t.prototype.getUserId=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.userId")];case 1:return[2,t.sent()]}})})},t.prototype.setStatusUserIdWasChanged=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.userIdWasChanged",t)];case 1:return e.sent(),[2]}})})},t.prototype.getStatusUserIdWasChanged=t.prototype.setLastPermissionStatus=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.isLastPermissionStatus",t)];case 1:return e.sent(),[2]}})})},t.prototype.getLastPermissionStatus=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.isLastPermissionStatus")];case 1:return[2,t.sent()]}})})},t.prototype.setStatusManualUnsubscribed=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("MANUAL_UNSUBSCRIBE",t)];case 1:return e.sent(),[4,this.store.set("params.isManualUnsubscribed",t)];case 2:return e.sent(),[2]}})})},t.prototype.getStatusManualUnsubscribed=function(){return r(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return[4,this.store.get("MANUAL_UNSUBSCRIBE",!1)];case 1:return t=n.sent(),[4,this.store.get("params.isManualUnsubscribed",!1)];case 2:return[2,void 0!==(e=n.sent())?e:t]}})})},t.prototype.setStatusCommunicationDisabled=t.prototype.getStatusCommunicationDisabled=t.prototype.setStatusDropAllData=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("DEVICE_DATA_REMOVED",t)];case 1:return e.sent(),[4,this.store.set("params.isDropAllData",t)];case 2:return e.sent(),[2]}})})},t.prototype.getStatusDropAllData=t.prototype.setSdkVersion=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.sdkVersion",t)];case 1:return e.sent(),[2]}})})},t.prototype.getSdkVersion=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.sdkVersion")];case 1:return[2,t.sent()]}})})},t.prototype.setServiceWorkerVersion=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("WORKER_VERSION",t)];case 1:return e.sent(),[4,this.store.set("params.serviceWorkerVersion",t)];case 2:return e.sent(),[2]}})})},t.prototype.getServiceWorkerVersion=function(){return r(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return[4,this.store.get("WORKER_VERSION")];case 1:return t=n.sent(),[4,this.store.get("params.serviceWorkerVersion")];case 2:return[2,void 0!==(e=n.sent())?e:t]}})})},t.prototype.setServiceWorkerUrl=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return t?[4,this.store.set("params.serviceWorkerUrl",t)]:[2];case 1:return e.sent(),[2]}})})},t.prototype.getServiceWorkerUrl=t.prototype.setServiceWorkerScope=t.prototype.getServiceWorkerScope=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.serviceWorkerScope")];case 1:return[2,t.sent()]}})})},t.prototype.setLastOpenMessage=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("LAST_OPEN_MESSAGE",t)];case 1:return e.sent(),[4,this.store.set("params.lastOpenMessage",t)];case 2:return e.sent(),[2]}})})},t.prototype.getLastOpenMessage=function(){return r(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return[4,this.store.get("LAST_OPEN_MESSAGE")];case 1:return t=n.sent(),[4,this.store.get("params.lastOpenMessage")];case 2:return[2,void 0!==(e=n.sent())?e:t]}})})},t.prototype.setLastOpenApplicationTime=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.lastOpenApplicationTime",t)];case 1:return e.sent(),[2]}})})},t.prototype.getLastOpenApplicationTime=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.lastOpenApplicationTime")];case 1:return[2,t.sent()]}})})},t.prototype.setFeatures=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.features",t)];case 1:return e.sent(),[2]}})})},t.prototype.getFeatures=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.store.get("params.features")];case 1:return[2,t.sent()]}})})},t.prototype.setInitParams=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.init",t)];case 1:return e.sent(),[2]}})})},t.prototype.getInitParams=t.prototype.setInboxLastRequestCode=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.inbox.lastRequestCode",t)];case 1:return e.sent(),[2]}})})},t.prototype.getInboxLastRequestCode=t.prototype.setInboxLastRequestTime=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.inbox.lastRequestTime",t)];case 1:return e.sent(),[2]}})})},t.prototype.getInboxLastRequestTime=function(){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,this.store.get("params.inbox.lastRequestTime",0)]})})},t.prototype.setInboxNewMessagesCount=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.inbox.newMessagesCount",t)];case 1:return e.sent(),[2]}})})},t.prototype.getInboxNewMessagesCount=function(){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,this.store.get("params.inbox.newMessagesCount",0)]})})},t.prototype.setDelayedEvent=t.prototype.getDelayedEvent=t.prototype.setPromptDisplayCount=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.store.set("params.promptDisplayCount",t)];case 1:return e.sent(),[2]}})})},t.prototype.getPromptDisplayCount=function(){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,this.store.get("params.promptDisplayCount",0)]})})},t.prototype.setPromptLastSeenTime=t.prototype.getPromptLastSeenTime=t}();e.Data=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){eturn Object.defineProperty(t.prototype,"date",{get:function(){return this._date},set:enumerable:!1,configurable:!0}),t.prototype.getUtcTimestamp=t.prototype.getTimestamp=t.prototype.setLocal=t.prototype.addDays=function(t){var e=this._date.getTime()+24*t*36e5;this._date=new Date(e)},t.prototype.getInboxFakeOrder=function(){return(100*this._date.getTime()+9e9).toString()},t}();e.default=i},function(t,e,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.logAndRejectError=e.logAndThrowError=void 0;var r=n(1),o={error:1,info:2,debug:3},s=3;n(5).patchConsole();var a={setLevel:write:;e.Logger=a,Object.keys(o).forEach(function(t){var e=o[t];a[t]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e<=s&&(console.groupCollapsed(t),console.info.apply(console,i([""],n)),console.trace("trace"),console.groupEnd())}}),e.logAndThrowError=e.logAndRejectError=,function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=else{var r=Array(16);t.exports=},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__spreadArrays||Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),a=function(){eturn t.prototype.messageTypeFactory=t.prototype.updateMessagesStatusWithCodes=function(t,e,n){return i(this,void 0,void 0,function(){var o,s,a=this;return r(this,function(u){switch(u.label){case 0:return o=[],s=[],e.forEach(function(e){return i(a,void 0,void 0,function(){return r(this,function(i){return -1===t.indexOf(e.inbox_id)||(e.status=n,o.push(e),s.push(this.api.inboxStatus(e.order,e.status))),[2]})})}),[4,this.inboxModel.putBulkMessages(o)];case 1:return u.sent(),[4,Promise.all(s)];case 2:return u.sent(),[2]}})})},t.prototype.publicMessageBuilder=function(t){var e=t.action_type,n=t.action_params,o=t.image,s=t.title,a=t.send_date,u=t.inbox_id,c=t.text,p=t.status;return i(this,void 0,void 0,function(){var t,i,l,d,h;return r(this,function(r){switch(r.label){case 0:return(i=o)?[3,2]:[4,this.data.getDefaultNotificationImage()];case 1:i=r.sent(),r.label=2;case 2:return t=i,(d=s)?[3,4]:[4,this.data.getDefaultNotificationTitle()];case 3:d=r.sent(),r.label=4;case 4:return l=d,h=JSON.parse(n),this.dateModule.date=new Date(1e3*parseInt(a)),this.dateModule.setLocal(),[2,{title:l,imageUrl:t,code:u,message:c,sendDate:this.dateModule.date.toISOString(),type:this.messageTypeFactory(e,h),link:(null==h?void 0:h.l)||"/",isRead:2===p||3===p,isActionPerformed:3===p}]}})})},t.prototype.messagesWithNoActionPerformedCount=function(){return this.inboxModel.getDeliveredReadMessagesCount()},t.prototype.unreadMessagesCount=function(){return this.inboxModel.getDeliveredMessagesCount()},t.prototype.messagesCount=t.prototype.loadMessages=function(){return i(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return[4,this.inboxModel.getReadOpenMessages()];case 1:return t=e.sent(),[4,this.inboxModel.getDeliveredMessages()];case 2:return[2,Promise.all(o(t,e.sent()).sort(.sort(.map(this.publicMessageBuilder))]}})})},t.prototype.readMessagesWithCodes=t.prototype.performActionForMessageWithCode=function(t){return i(this,void 0,void 0,function(){var e,n,i;return r(this,function(r){switch(r.label){case 0:return[4,this.inboxModel.getMessage(t)];case 1:return n=JSON.parse((e=r.sent()).action_params),2===(i=this.messageTypeFactory(e.action_type,n))&&null!=n.l?document.location.href=n.l:3===i&&null!=n.l&&window.history.go(n.l),e.status=3,[4,this.inboxModel.putMessage(e)];case 2:return r.sent(),[4,this.api.inboxStatus(e.order,e.status)];case 3:return r.sent(),[2]}})})},t.prototype.deleteMessagesWithCodes=function(t){return i(this,void 0,void 0,function(){var e,n;return r(this,function(i){switch(i.label){case 0:return[4,this.inboxModel.getReadOpenMessages()];case 1:return e=i.sent(),[4,this.inboxModel.getDeliveredMessages()];case 2:return n=i.sent(),[4,this.updateMessagesStatusWithCodes(t,o(e,n),4)];case 3:return i.sent(),[2]}})})},t.prototype.syncMessages=t}();e.default=a},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ApiClient=void 0;var o=n(2),s=n(4),a=);e.ApiClient=a},function(t,e,n){var i,r,o=n(8),s=n(9),a=0,u=0;t.exports=function(t,e,n){var c=e&&n||0,p=e||[],l=(t=t||{}).node||i,d=void 0!==t.clockseq?t.clockseq:r;if(null==l||null==d){var h=o();null==l&&(l=i=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=r=16383&(h[6]<<8|h[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),b=void 0!==t.nsecs?t.nsecs:u+1,g=f-a+(b-u)/1e4;if(g<0&&void 0===t.clockseq&&(d=d+1&16383),(g<0||f>a)&&void 0===t.nsecs&&(b=0),b>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,u=b,r=d;var v=(1e4*(268435455&(f+=122192928e5))+b)%4294967296;p[c++]=v>>>24&255,p[c++]=v>>>16&255,p[c++]=v>>>8&255,p[c++]=255&v;var _=f/4294967296*1e4&268435455;p[c++]=_>>>8&255,p[c++]=255&_,p[c++]=_>>>24&15|16,p[c++]=_>>>16&255,p[c++]=d>>>8|128,p[c++]=255&d;for(var m=0;m<6;++m)p[c+m]=l[m];return e||s(p)}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.EventBus=void 0;var r=n(7);e.EventBus=function(){var t=this;this.addEventHandler=this.removeEventHandler=this.dispatchEvent=function(e,n){var o=n.eventId||r.v4(),s=t.savedEventHandlersMap[e];return s&&s.forEach(,o},this.savedEventHandlersMap={}}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Api=void 0;var s=n(2),a=n(14),u=n(0),c=function(){eturn t.prototype.checkDevice=t.prototype.checkDeviceSubscribeForPushNotifications=function(t){return void 0===t&&(t=!0),r(this,void 0,void 0,function(){var e,n,i,r;return o(this,function(o){switch(o.label){case 0:return void 0!==(e=localStorage.getItem(u.KEY_DEVICE_REGISTRATION_STATUS))&&t?[3,2]:[4,this.checkDevice()];case 1:i=(n=o.sent()).exist,r=n.push_token_exist,localStorage.setItem(u.KEY_DEVICE_REGISTRATION_STATUS,i&&r?u.DEVICE_REGISTRATION_STATUS_REGISTERED:u.DEVICE_REGISTRATION_STATUS_UNREGISTERED),e=localStorage.getItem(u.KEY_DEVICE_REGISTRATION_STATUS),o.label=2;case 2:return[2,e===u.DEVICE_REGISTRATION_STATUS_REGISTERED]}})})},t.prototype.getConfig=function(t){return r(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,this.getRequestParams()];case 1:return e=n.sent(),[2,this.apiClient.getConfig(i(i({},e),{features:t}))]}})})},t.prototype.applicationOpen=t.prototype.registerDevice=t.prototype.unregisterDevice=t.prototype.deleteDevice=t.prototype.messageDeliveryEvent=function(t,e,n){return void 0===n&&(n={}),r(this,void 0,void 0,function(){var e;return o(this,function(r){switch(r.label){case 0:return[4,this.getRequestParams()];case 1:return e=r.sent(),[4,this.apiClient.messageDeliveryEvent(i(i({},e),{hash:t,metaData:n}))];case 2:return[2,r.sent()]}})})},t.prototype.pushStat=function(t,e,n){return void 0===n&&(n={}),r(this,void 0,void 0,function(){var e;return o(this,function(r){switch(r.label){case 0:return[4,this.getRequestParams()];case 1:return e=r.sent(),[4,this.apiClient.pushStat(i(i({},e),{hash:t,metaData:n}))];case 2:return[2,r.sent()]}})})},t.prototype.setTags=t.prototype.getTags=t.prototype.registerUser=function(t){return r(this,void 0,void 0,function(){var e,n,r,s;return o(this,function(o){switch(o.label){case 0:return[4,this.getRequestParams()];case 1:return e=o.sent(),[4,this.data.getDeviceType()];case 2:return n=o.sent(),r=""+t,[4,this.apiClient.registerUser(i(i({},e),{userId:r,ts_offset:-(60*(new Date).getTimezoneOffset()),device_type:n}))];case 3:return s=o.sent(),[4,this.data.setUserId(""+t)];case 4:return o.sent(),[4,this.data.setStatusUserIdWasChanged(!0)];case 5:return o.sent(),[2,s]}})})},t.prototype.postEvent=function(t,e){return r(this,void 0,void 0,function(){var n,r,s,a,u,c;return o(this,function(o){switch(o.label){case 0:return[4,this.getRequestParams()];case 1:return n=o.sent(),a=(s=Math.floor((r=new Date).getTime()/1e3))-r.getTimezoneOffset()/60*3600,[4,this.data.getLastOpenMessage()];case 2:if((u=o.sent())&&u.expiry>Date.now()){if(e.msgHash)return[2,Promise.reject("attribute msgHash already defined")];e=i(i({},e),{msgHash:u.messageHash})}return[4,this.data.setLastOpenMessage(void 0)];case 3:return o.sent(),[4,this.apiClient.postEvent(i(i({},n),{event:t,timestampUTC:s,timestampCurrent:a,attributes:e}))];case 4:return(c=o.sent())&&c.code&&this.eventBus.dispatchEvent("receive-in-app-code",{code:c.code}),[2,c]}})})},t.prototype.getInboxMessages=t.prototype.inboxStatus=t.prototype.triggerEvent=t.prototype.pageVisit=function(t){return r(this,void 0,void 0,function(){var e,n,r;return o(this,function(o){switch(o.label){case 0:return[4,this.getRequestParams()];case 1:return e=o.sent(),[4,this.data.getFeatures()];case 2:return(r=(n=o.sent())&&n.page_visit&&n.page_visit.entrypoint)?[2,this.apiClient.pageVisit(i(i({},e),t),r)]:[2]}})})},t.prototype.setPurchase=t.prototype.getParams=Object.defineProperty(t.prototype,"params",{get:enumerable:!1,configurable:!0}),t.prototype.getRequestParams=function(){return r(this,void 0,void 0,function(){var t,e,n,i,r,s,a;return o(this,function(o){switch(o.label){case 0:return[4,this.data.getApplicationCode()];case 1:return t=o.sent(),[4,this.data.getHwid()];case 2:return e=o.sent(),[4,this.data.getUserId()];case 3:return n=o.sent(),[4,this.data.getDeviceType()];case 4:return i=o.sent(),[4,this.data.getDeviceModel()];case 5:return r=o.sent(),[4,this.data.getLanguage()];case 6:return s=o.sent(),[4,this.data.getSdkVersion()];case 7:return a=o.sent(),[2,{application:t,hwid:e,userId:n||e,device_type:i,device_model:r,timezone:-(60*(new Date).getTimezoneOffset()),language:s,v:a}]}})})},t}();e.Api=c},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.PushServiceDefault=void 0;var o=n(7),s=n(4),a=n(0),u=function(){function t(t,e,n){this.api=t,this.data=e,this.config=n}return t.prototype.getPermission=function(){return Notification.permission},t.prototype.checkIsPermissionGranted=function(){return this.getPermission()===a.PERMISSION_GRANTED},t.prototype.checkIsPermissionDefault=function(){return this.getPermission()===a.PERMISSION_PROMPT},t.prototype.checkIsManualUnsubscribed=function(){return i(this,void 0,void 0,function(){return r(this,function(t){return[2,this.data.getStatusManualUnsubscribed()]})})},t.prototype.askPermission=t.prototype.getTokens=function(){return i(this,void 0,void 0,function(){return r(this,function(t){return[2,this.data.getTokens()]})})},t.prototype.subscribe=function(t){return i(this,void 0,void 0,function(){var e,n,i,o,a,u,c,p,l,d,h,f;return r(this,function(r){switch(r.label){case 0:return e=t,this.checkIsPermissionGranted()?e?[3,6]:[4,this.trySubscribe()]:(s.Logger.error("You must have permission granted before subscribe!"),[2]);case 1:return e=r.sent(),[4,this.getSenderIdFromManifest()];case 2:return n=r.sent(),[4,this.checkIsChangeSenderId(n)];case 3:return r.sent()?[4,this.unsubscribe()]:[3,6];case 4:return r.sent(),[4,this.data.setSenderId(n)];case 5:r.sent(),r.label=6;case 6:return[4,this.getApplicationServerKey()];case 7:return i=r.sent(),[4,this.data.getSenderId()];case 8:return o=r.sent(),[4,this.getPushToken(e)];case 9:if(a=r.sent(),u=e.getKey("p256dh"),c=e.getKey("auth"),!u||!c)throw Error("Can't get subscription keys!");return p=btoa(String.fromCharCode.apply(String,new Uint8Array(u))),l=btoa(String.fromCharCode.apply(String,new Uint8Array(c))),[4,this.getFcmKeys({endpoint:e.endpoint,application_pub_key:i,encryption_key:p,encryption_auth:l,authorized_entity:o})];case 10:return h=(d=r.sent()).token,f=d.pushSet,[4,this.data.setTokens({publicKey:p,pushToken:a,authToken:l,fcmPushSet:f,fcmToken:h,endpoint:e.endpoint})];case 11:return r.sent(),[4,this.api.registerDevice()];case 12:return r.sent(),[2]}})})},t.prototype.unsubscribe=t.prototype.checkIsRegister=function(){return i(this,void 0,void 0,function(){return r(this,function(t){return[2,this.api.checkDeviceSubscribeForPushNotifications()]})})},t.prototype.checkIsNeedResubscribe=function(){return i(this,void 0,void 0,function(){var t,e,n,i,o,s,a,u,c,p;return r(this,function(r){switch(r.label){case 0:return[4,this.data.getSenderId()];case 1:return e=void 0!==(t=r.sent()),[4,this.getSenderIdFromManifest()];case 2:return n=r.sent(),i=e&&n!==t,[4,this.data.setSenderId(n)];case 3:return r.sent(),[4,this.data.getLastPermissionStatus()];case 4:return o=r.sent(),s=this.getPermission(),e&&o!==s?[4,this.data.setLastPermissionStatus(s)]:[3,6];case 5:return r.sent(),[2,!0];case 6:return[4,this.getCredentials()];case 7:return a=r.sent(),[4,this.getPushToken(a)];case 8:return u=r.sent(),[4,this.data.getTokens()];case 9:return p=(c=r.sent())&&c.pushToken||"",[2,i||u!==p]}})})},t.prototype.getServiceWorkerRegistration=t.prototype.registerServiceWorker=t.prototype.trySubscribe=function(){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,this.subscribePushManager()];case 1:return[2,t.sent()];case 2:return console.error(t.sent()),[4,this.unsubscribe()];case 3:return t.sent(),[2,this.subscribePushManager()];case 4:return[2]}})})},t.prototype.subscribePushManager=t.prototype.getCredentials=t.prototype.getFcmKeys=t.prototype.getPushToken=t.prototype.getApplicationServerKey=t.prototype.getSenderIdFromManifest=function(){return i(this,void 0,void 0,function(){var t,e,n,i;return r(this,function(r){switch(r.label){case 0:if(!(t=document.querySelector('link[rel="manifest"]')))throw Error("Error: manifest.json not found!");if(!(e=t.getAttribute("href")))throw Error("Error: manifest.json url not found!");return[4,fetch(e,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}})];case 1:if(200!==(n=r.sent()).status)throw Error("Error: Can't load manifest.json! "+n.statusText);return[4,n.text()];case 2:if(!(i=r.sent().match(/("|')?gcm_sender_id("|')?:\s*("|')?(\d+)("|')?/))||"string"!=typeof i[4])throw Error("Error: Can't find gcm_sender_id in manifest.json!");return[2,i[4]]}})})},t.prototype.checkIsChangeSenderId=function(t){return i(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,this.data.getSenderId()];case 1:return[2,t!==e.sent()]}})})},t.prototype.urlBase64ToUint8Array=t}();e.PushServiceDefault=u},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(25),s=n(3),a=n(13),u=function(){eturn t.prototype.getInboxMessages=t.prototype.storeGetInboxMessagesRequestParams=t.prototype.putServerMessages=function(t){return i(this,void 0,void 0,function(){var e=this;return r(this,function(n){return[2,Promise.all(t.map()]})})},t.prototype.putMessage=function(t){return this.storage.put(this.storeName,t)},t.prototype.putBulkMessages=t.prototype.deleteMessages=function(t){var e=this;return Promise.all(t.map()},t.prototype.deleteExpiredMessages=function(){return i(this,void 0,void 0,function(){var t,e;return r(this,function(n){switch(n.label){case 0:return this.dateModule.date=new Date,t=this.dateModule.getTimestamp().toString(),[4,this.storage.getAll(this.storeName)];case 1:return e=n.sent().filter(.map(,[2,this.deleteMessages(e)]}})})},t.prototype.getMessage=t.prototype.getReadOpenMessages=t.prototype.getDeliveredMessages=t.prototype.messagesCount=t.prototype.getDeliveredMessagesCount=function(){return i(this,void 0,void 0,function(){return r(this,function(t){return[2,this.storage.countByIndex(this.storeName,"status",1)]})})},t.prototype.getReadMessagesCount=t.prototype.getDeliveredReadMessagesCount=function(){return i(this,void 0,void 0,function(){var t,e,n,i;return r(this,function(r){return e=(t=[2,3])[0],n=t[1],i=IDBKeyRange.bound(e,n),[2,this.storage.countByIndex(this.storeName,"status",i)]})})},t.prototype.updateMessages=t}();e.default=u},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),s=n(11),a=n(26),u=);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.platformChecker=e.PlatformChecker=void 0;var i=n(5),r=function(){eturn Object.defineProperty(t.prototype,"isEdge",{get:function(){return this._isEdge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSafari",{get:function(){return this._isSafari},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpera",{get:function(){return this._isOpera},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAvailablePromise",{get:function(){return this._isAvailablePromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAvailableServiceWorker",{get:function(){return this._isAvailableServiceWorker},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAvailableNotifications",{get:function(){return this._isAvailableNotifications},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){return this._platform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"browserVersion",{get:enumerable:!1,configurable:!0}),t.prototype.isSafariBrowser=t.prototype.isOperaBrowser=t.prototype.isEdgeBrowser=t.prototype.isFirefoxBrowser=t.prototype.isChromeBrowser=t.prototype.isMacOS=t.prototype.canUseServiceWorkers=t.prototype.canUsePromise=t.prototype.canReceiveNotifications=t.prototype.getPlatformType=t.prototype.getBrowserVersion=function(){var t=navigator.userAgent,e=t.match(/\bOPR\/(\d+)/);if(null!==e)return"Opera "+e[1];var n=t.match(/\bEdge\/(\d+)/);if(null!==n)return"Edge "+n[1];var i=t.match(/\bEdg\/(\d+)/);if(null!==i)return"Edge "+i[1];var r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],o=(r[0],r[1]);if(/trident/i.test(t)){var s=/trident\/([.\d]+)/gi.exec(t)||[];return"IE "+(("7.0"===s[1]?"11":s[1])||"")}r=r[2]?[void 0===o?"":o,r[2]]:[navigator.appName,navigator.appVersion,"-?"];var a=t.match(/version\/([.\d]+)/i);return null!==a&&r.splice(1,1,a[1]),r.join(" ")},t}();e.PlatformChecker=r,e.platformChecker=new r(i.getGlobal())},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(32);Object.defineProperty(e,"Pushwoosh",{enumerable:!0,get:function(){return i.default}}),n(38),n(44),n(46)},function(t,e,n){"use strict";var i=this&&this.__assign||r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(7),a=n(17),u=n(19),c=n(2),p=n(14),l=n(33),d=n(35),h=n(0),f=n(5),b=n(28),g=n(4),v=n(37),_=n(1),m=n(24),w=n(13),E=function(){function t(){var t=this;this.ready=!1,this.addEventHandler=function(e,n){return t.eventBus.addEventHandler(e,n)},this.removeEventHandler=function(e,n){return t.eventBus.removeEventHandler(e,n)},this.dispatchEvent=this.debug={showLog:function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,_.log.getAll()];case 1:return console.log(t.sent()),[2]}})})},showKeyValues:function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,_.keyValue.getAll()];case 1:return console.log(t.sent()),[2]}})})},showMessages:,this.eventBus=new a.EventBus,this.data=new c.Data,this.apiClient=new p.ApiClient(this.data),this.api=new u.Api(this.eventBus,this.data,this.apiClient),this.platformChecker=new b.PlatformChecker(f.getGlobal()),this.inboxModel=new m.default(this.eventBus,this.data,this.api),this.pwinbox=new w.default(this.data,this.api,this.inboxModel),this.onServiceWorkerMessage=this.onServiceWorkerMessage.bind(this),this.subscriptionPromptWidget=new d.SubscriptionPromptWidget(this.eventBus,this)}return t.prototype.push=t.prototype.subscribe=t.prototype.unsubscribe=t.prototype.forceSubscribe=t.prototype.isDeviceRegistered=function(){return localStorage.getItem(h.KEY_DEVICE_REGISTRATION_STATUS)===h.DEVICE_REGISTRATION_STATUS_REGISTERED},t.prototype.isDeviceUnregistered=t.prototype.isSubscribed=function(){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,this.api.checkDeviceSubscribeForPushNotifications()]})})},t.prototype.isCommunicationEnabled=t.prototype.setCommunicationEnabled=t.prototype.removeAllDeviceData=t.prototype.getHWID=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.data.getHwid()];case 1:return[2,t.sent()]}})})},t.prototype.getPushToken=t.prototype.getUserId=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.data.getUserId()];case 1:return[2,t.sent()]}})})},t.prototype.getParams=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.api.getParams()];case 1:return[2,t.sent()]}})})},t.prototype.isAvailableNotifications=t.prototype.sendStatisticsVisitedPage=function(){return r(this,void 0,void 0,function(){var t,e,n,i,r;return o(this,function(o){switch(o.label){case 0:return t=window.document.title,n=(e=window.location).origin,i=e.pathname,r=e.href,[4,this.api.pageVisit({title:t,url_path:""+n+i,url:r})];case 1:return o.sent(),[2]}})})},t.prototype.initialize=function(t){return r(this,void 0,void 0,function(){var e,n,r,a,u,c,p,l,d,b,v,_,m,w,E;return o(this,function(o){switch(o.label){case 0:return e=localStorage.getItem(h.MANUAL_SET_LOGGER_LEVEL),g.Logger.setLevel(e||t.logLevel||"error"),this.platformChecker.isAvailableNotifications?[4,this.data.getApplicationCode()]:[2];case 1:if(n=o.sent(),!t.applicationCode)throw Error("Can't find application code!");return r=!n,a=n&&n!==t.applicationCode,r||a?[4,this.data.clearAll()]:[3,4];case 2:return o.sent(),[4,this.data.setApplicationCode(t.applicationCode)];case 3:o.sent(),o.label=4;case 4:return[4,this.data.getHwid()];case 5:return o.sent()?[3,7]:(u=t.applicationCode+"_"+s.v4(),[4,this.data.setHwid(u)]);case 6:o.sent(),o.label=7;case 7:return[4,this.data.setDeviceType(this.platformChecker.getPlatformType())];case 8:return o.sent(),[4,this.data.setDeviceModel(this.platformChecker.getBrowserVersion())];case 9:return o.sent(),[4,this.data.setLanguage(t.tags&&t.tags.Language||navigator.language)];case 10:return o.sent(),t.pushwooshUrl?[4,this.data.setApiEntrypoint(t.pushwooshUrl)]:[3,12];case 11:o.sent(),o.label=12;case 12:return[4,this.data.setSdkVersion("3.33.0")];case 13:return o.sent(),[4,this.api.getConfig(["page_visit","vapid_key","web_in_apps","events","subscription_prompt"])];case 14:return c=o.sent(),this.onGetConfig(c&&c.features),this.subscribeWidgetConfig=i({enable:!1},t.subscribeWidget),this.inboxWidgetConfig=i({enable:!1},t.inboxWidget),this.subscribePopupConfig=i({enable:!1},t.subscribePopup),p=this,[4,this.data.getStatusCommunicationDisabled()];case 15:return p.isCommunicationDisabled=o.sent(),[4,this.open()];case 16:return o.sent(),[4,this.data.getStatusUserIdWasChanged()];case 17:return l=o.sent(),!t.userId||"user_id"===t.userId||l?[3,19]:[4,this.api.registerUser(t.userId)];case 18:o.sent(),o.label=19;case 19:return t.tags&&this.api.setTags(t.tags),this.platformChecker.isAvailableNotifications?[4,this.initPushNotifications(t)]:[3,21];case 20:o.sent(),o.label=21;case 21:return o.trys.push([21,23,,24]),[4,this.inboxModel.updateMessages()];case 22:return o.sent(),[3,24];case 23:return d=o.sent(),g.Logger.write("error",d),[3,24];case 24:return o.trys.push([24,26,,27]),[4,this.initFacebook(t)];case 25:return o.sent(),[3,27];case 26:return b=o.sent(),g.Logger.write("error",b),[3,27];case 27:return this.ready=!0,this.eventBus.dispatchEvent("ready",{}),[4,this.data.getDelayedEvent()];case 28:return(v=o.sent())?(_=v.type,m=v.payload,[4,this.emitLegacyEventsFromServiceWorker(_,m)]):[3,31];case 29:return o.sent(),[4,this.data.setDelayedEvent(null)];case 30:o.sent(),o.label=31;case 31:return"serviceWorker"in navigator&&(navigator.serviceWorker.onmessage=this.onServiceWorkerMessage),localStorage.setItem("pushwoosh-websdk-status","init"),document.dispatchEvent(new CustomEvent("pushwoosh.initialized",{detail:{pw:this}})),this.platformChecker.isSafari&&(w=/#P(.*)/,E=decodeURIComponent(document.location.hash),w.test(E)&&this.api.pushStat(w.exec(E)[1]).then(f.clearLocationHash)),[2]}})})},t.prototype.defaultProcess=function(t){return r(this,void 0,void 0,function(){var e,n,i,r,s,a,u,c,p,l,d,f;return o(this,function(o){switch(o.label){case 0:return"granted"!==(e=this.driver.getPermission())?[3,2]:[4,this.data.setLastPermissionStatus(e)];case 1:o.sent(),o.label=2;case 2:return[4,this.data.getStatusCommunicationDisabled()];case 3:return n=o.sent(),[4,this.data.getStatusDropAllData()];case 4:return i=o.sent(),[4,this.driver.checkIsNeedResubscribe()];case 5:return r=o.sent(),[4,this.data.getFeatures()];case 6:return a=(s=o.sent()).subscription_prompt&&s.subscription_prompt.use_case,n||i?[4,this.unsubscribe()]:[3,8];case 7:return o.sent(),[2];case 8:return r?[4,this.unsubscribe()]:[3,11];case 9:return o.sent(),[4,this.data.setStatusManualUnsubscribed(!1)];case 10:o.sent(),o.label=11;case 11:return u=t.autoSubscribe,[4,this.data.getStatusManualUnsubscribed()];case 12:return c=o.sent(),[4,this.api.checkDeviceSubscribeForPushNotifications(!1)];case 13:switch(p=o.sent(),e){case h.PERMISSION_PROMPT:return[3,14];case h.PERMISSION_DENIED:return[3,20];case h.PERMISSION_GRANTED:return[3,23]}return[3,28];case 14:return this.eventBus.dispatchEvent("permission-default",{}),p?[4,this.unsubscribe()]:[3,16];case 15:o.sent(),o.label=16;case 16:return[4,this.getWidgetConfig()];case 17:return l=o.sent(),[4,this.checkCanShowByCapping(l)];case 18:return o.sent()?(d=a===h.SUBSCRIPTION_WIDGET_USE_CASE_DEFAULT,f=a===h.SUBSCRIPTION_WIDGET_USE_CASE_NOT_SET&&u,(d||f)&&(this.subscriptionPromptWidget.init(l),this.subscriptionPromptWidget.show()),[4,this.updateCappingParams()]):[3,28];case 19:return o.sent(),[3,28];case 20:return this.eventBus.dispatchEvent("permission-denied",{}),p?[4,this.unsubscribe()]:[3,22];case 21:o.sent(),o.label=22;case 22:return[3,28];case 23:return this.eventBus.dispatchEvent("permission-granted",{}),c&&p?[4,this.unsubscribe()]:[3,25];case 24:o.sent(),o.label=25;case 25:return(p||c)&&!r?[3,27]:[4,this.subscribe(!0)];case 26:o.sent(),o.label=27;case 27:return[3,28];case 28:return[2]}})})},t.prototype.getWidgetConfig=function(){return r(this,void 0,void 0,function(){var t,e,n;return o(this,function(r){switch(r.label){case 0:return[4,this.data.getFeatures()];case 1:return e=(t=r.sent()).subscription_prompt_widget&&t.subscription_prompt_widget.params,n=i({cappingCount:h.SUBSCRIPTION_PROMPT_WIDGET_DEFAULT_CONFIG.cappingCount,cappingDelay:h.SUBSCRIPTION_PROMPT_WIDGET_DEFAULT_CONFIG.cappingDelay},e),[2,e?n:h.SUBSCRIPTION_PROMPT_WIDGET_DEFAULT_CONFIG]}})})},t.prototype.checkCanShowByCapping=function(t){return r(this,void 0,void 0,function(){var e,n,i,r,s;return o(this,function(o){switch(o.label){case 0:return e=(new Date).getTime(),[4,this.data.getPromptDisplayCount()];case 1:return n=o.sent(),[4,this.data.getPromptLastSeenTime()];case 2:return i=o.sent(),r=t.cappingCount>n,s=e-i>t.cappingDelay,[2,r&&s]}})})},t.prototype.updateCappingParams=t.prototype.initFacebook=function(t){var e=i({enable:!1,pageId:"",containerClass:""},t.facebook);if(e&&e.enable)try{new v.default({pageId:e.pageId,containerClass:e.containerClass,applicationCode:t.applicationCode,userId:t.userId||""})}catch(t){g.Logger.error(t,"facebook module initialization failed")}},t.prototype.onServiceWorkerMessage=t.prototype.open=function(t){return r(this,void 0,void 0,function(){var e,n,i;return o(this,function(r){switch(r.label){case 0:return[4,this.data.getLastOpenApplicationTime()];case 1:return e=r.sent(),n=Date.now(),e||(e=0),i=n-e<h.PERIOD_SEND_APP_OPEN,t||!i?[4,this.data.setLastOpenApplicationTime(n)]:[2];case 2:return r.sent(),[4,this.api.applicationOpen()];case 3:return r.sent(),[2]}})})},t.prototype.onGetConfig=t.prototype.initPushNotifications=t.prototype.initDriver=function(){return r(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:return this.platformChecker.isSafari?[4,this.data.getInitParams()]:[3,2];case 1:if(!(t=e.sent().safariWebsitePushID))throw Error("For work with Safari Push Notification add safariWebsitePushID to initParams!");return this.driver=new l.PushServiceSafari(this.api,this.data,{webSitePushId:t}),[2];case 2:return this.platformChecker.isAvailableServiceWorker&&(this.driver=new l.PushServiceDefault(this.api,this.data,{})),[2]}})})},t.prototype.sendPostEventVisitedPage=t.prototype.subscribeToLegacyEvents=function(t,e){var n=this;switch(t){case h.EVENT_ON_LOAD:e();break;case h.EVENT_ON_READY:if(this.ready){e(this.api);break}this.eventBus.addEventHandler("ready",function(){return e(n.api)});break;case h.EVENT_ON_REGISTER:this.eventBus.addEventHandler("register",function(){return e(n.api)});break;case h.EVENT_ON_SUBSCRIBE:this.eventBus.addEventHandler("subscribe",function(){return e(n.api)});break;case h.EVENT_ON_UNSUBSCRIBE:this.eventBus.addEventHandler("unsubscribe",function(){return e(n.api)});break;case h.EVENT_ON_SW_INIT_ERROR:this.eventBus.addEventHandler("initialize-service-worker-error",function(t){var i=t.error;return e(n.api,i)});break;case h.EVENT_ON_PUSH_DELIVERY:this.eventBus.addEventHandler("receive-push",function(t){var i=t.notification;return e(n.api,i)});break;case h.EVENT_ON_NOTIFICATION_CLICK:this.eventBus.addEventHandler("open-notification",function(t){var i=t.notification;return e(n.api,i)});break;case h.EVENT_ON_NOTIFICATION_CLOSE:this.eventBus.addEventHandler("hide-notification",function(t){var i=t.notification;return e(n.api,i)});break;case h.EVENT_ON_CHANGE_COMMUNICATION_ENABLED:this.eventBus.addEventHandler("change-enabled-communication",function(t){var i=t.isEnabled;return e(n.api,i)});break;case h.EVENT_ON_PUT_NEW_MESSAGE_TO_INBOX_STORE:this.eventBus.addEventHandler("receive-inbox-message",function(t){var i=t.message;return e(n.api,i)});break;case h.EVENT_ON_UPDATE_INBOX_MESSAGES:this.eventBus.addEventHandler("update-inbox-messages",function(t){var i=t.messages;return e(n.api,i)});break;case h.EVENT_ON_SHOW_NOTIFICATION_PERMISSION_DIALOG:this.eventBus.addEventHandler("show-notification-permission-dialog",function(){return e(n.api)});break;case h.EVENT_ON_HIDE_NOTIFICATION_PERMISSION_DIALOG:this.eventBus.addEventHandler("hide-notification-permission-dialog",;break;case h.EVENT_ON_SHOW_SUBSCRIPTION_WIDGET:this.eventBus.addEventHandler("show-subscription-widget",function(){return e(n.api)});break;case h.EVENT_ON_HIDE_SUBSCRIPTION_WIDGET:this.eventBus.addEventHandler("hide-subscription-widget",function(){return e(n.api)});break;case h.EVENT_ON_PERMISSION_DENIED:this.eventBus.addEventHandler("permission-denied",function(){return e(n.api)});break;case h.EVENT_ON_PERMISSION_PROMPT:this.eventBus.addEventHandler("permission-default",function(){return e(n.api)});break;case h.EVENT_ON_PERMISSION_GRANTED:this.eventBus.addEventHandler("permission-granted",}},t.prototype.emitLegacyEventsFromServiceWorker=t}();e.default=E},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.PushServiceSafari=void 0;var o=n(4),s=n(0),a=function(){eturn t.prototype.getPermission=t.prototype.checkIsPermissionGranted=function(){return this.getPermission()===s.PERMISSION_GRANTED},t.prototype.checkIsPermissionDefault=t.prototype.checkIsManualUnsubscribed=t.prototype.askPermission=function(){return i(this,void 0,void 0,function(){var t,e,n=this;return r(this,function(i){switch(i.label){case 0:return[4,this.data.getApplicationCode()];case 1:return t=i.sent(),[4,this.data.getHwid()];case 2:return e={application:t,hwid:i.sent()},[2,new Promise(]}})})},t.prototype.getTokens=function(){return i(this,void 0,void 0,function(){return r(this,function(t){return[2,this.data.getTokens()]})})},t.prototype.subscribe=t.prototype.unsubscribe=t.prototype.checkIsRegister=t.prototype.checkIsNeedResubscribe=function(){return i(this,void 0,void 0,function(){var t,e,n;return r(this,function(i){switch(i.label){case 0:return[4,this.data.getWebSitePushId()];case 1:return e=void 0!==(t=i.sent())&&this.config.webSitePushId!==t,[4,this.data.setWebSitePushId(this.config.webSitePushId)];case 2:return i.sent(),[4,this.data.getLastPermissionStatus()];case 3:return i.sent()===(n=this.getPermission())?[3,5]:[4,this.data.setLastPermissionStatus(n)];case 4:return i.sent(),[2,!0];case 5:return[2,e]}})})},t.prototype.getPermissionInfo=t}();e.PushServiceSafari=a},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(5),a=n(1),u=function(){function t(t){this.userRef=s.generateUUID(),this.config=t,this.init()}return t.prototype.init=t.prototype.renderCheckbox=function(){for(var t=this.config,e=t.pageId,n=t.containerClass,i=[{name:"messenger_app_id",value:o.FACEBOOK_APP_ID},{name:"class",value:"fb-messenger-checkbox"},{name:"page_id",value:e},{name:"origin",value:window.location.protocol+"//"+window.location.hostname},{name:"user_ref",value:this.userRef},{name:"allow_login",value:"true"},{name:"size",value:"large"},{name:"skin",value:"light"},{name:"center_align",value:"false"}],r=document.getElementsByClassName(n),s=0;s<r.length;s++)(function(t){var e=document.createElement("div");i.forEach(,r[t].appendChild(e)})(s)},t.prototype.getHWID=function(){return i(this,void 0,void 0,function(){var t,e;return r(this,function(n){switch(n.label){case 0:return[4,a.keyValue.get(o.FACEBOOK_HWID_KEY)];case 1:return(t=n.sent())?[3,3]:(e=this.config.applicationCode+"_"+s.generateUUID()+"_fb",[4,a.keyValue.set(o.FACEBOOK_HWID_KEY,e)]);case 2:return n.sent(),[2,e];case 3:return[2,t]}})})},t.prototype.userConfirm=function(){return i(this,void 0,void 0,function(){var t,e,n,i,s,a;return r(this,function(r){switch(r.label){case 0:return e=(t=this.config).pageId,n=t.applicationCode,i=t.userId,s=window.FB,[4,this.getHWID()];case 1:return a=r.sent(),s&&s.AppEvents.logEvent("MessengerCheckboxUserConfirmation",null,{app_id:o.FACEBOOK_APP_ID,page_id:e,ref:JSON.stringify({applicationCode:n,userId:i,hwid:a}),user_ref:this.userRef}),[2]}})})},t.prototype.initFacebookSDK=function(){var t=this;window.fbAsyncInit=function(){window.FB.init({appId:o.FACEBOOK_APP_ID,xfbml:!0,version:"v3.2"}),window.FB.Event.subscribe("messenger_checkbox",}},t.prototype.loadFacebookSDK=function(){var t,e,n,i,r,o=navigator.language||"en_US";t=document,e="script",n="facebook-jssdk",r=t.getElementsByTagName(e)[0],t.getElementById(n)||((i=t.createElement(e)).id=n,i.src="https://connect.facebook.net/"+o+"/sdk.js",r&&r.parentNode.insertBefore(i,r))},t}();e.default=u},function(t,e,n){"use strict";var i=this&&this.__awaiter||r=this&&this.__generator||Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(28),a=n(30),u=n(39),c=n(40),p=n(1),l=function(){eturn t.prototype.addStylesToElement=t.prototype.createContainer=t.prototype.createStyle=t.prototype.createBell=t.prototype.createTooltip=function(){return i(this,void 0,void 0,function(){var t,e,n,i,o,s;return r(this,function(r){switch(r.label){case 0:return t=document.createElement("div"),n=(e=u.default.getTooltipPosition(this.config.position,this.config.size))[0],i=e[1],t.className="pushwoosh-subscribe-widget__tooltip pushwoosh-subscribe-widget__tooltip__"+i,this.addStylesToElement(n,t),s=(o=t).appendChild,[4,this.createTooltipContent()];case 1:return s.apply(o,[r.sent()]),[2,t]}})})},t.prototype.createTooltipContent=function(){return i(this,void 0,void 0,function(){var t,e;return r(this,function(n){switch(n.label){case 0:return e=t=document.createElement("div"),[4,this.tooltipTextFactory()];case 1:return e.innerText=n.sent(),t.className="pushwoosh-subscribe-widget__tooltip-content",[2,t]}})})},t.prototype.tooltipTextFactory=t.prototype.createPopover=function(){var t=document.createElement("div"),e=document.createElement("div"),n=u.default.getPopoverPosition(this.config.position,this.config.size),i=n[0],r=n[1];e.className="pushwoosh-subscribe-widget__popover pushwoosh-subscribe-widget__popover__"+r,t.className="pushwoosh-subscribe-widget__popover-content-wrapper",this.style.innerHTML+=u.default.getPopoverArrowPosition(this.config.position,this.config.size);var o=Object.assign({maxWidth:"calc(100vw - "+this.config.indent+" - "+this.config.indent+")"},i);return this.addStylesToElement(o,e),t.appendChild(this.createPopoverContent()),e.appendChild(t),e},t.prototype.getBrowserName=t.prototype.createPopoverContent=t.prototype.getImageSrc=function(t){return"https://cdn.pushwoosh.com/webpush/img/"+t+".jpg"},t.prototype.render=t.prototype.addEventListeners=t.prototype.toggleHelpPopover=t.prototype.clickBell=function(){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:switch(this.pw.driver.getPermission()){case o.PERMISSION_GRANTED:return[3,1];case o.PERMISSION_PROMPT:return[3,3];case o.PERMISSION_DENIED:return[3,5]}return[3,6];case 1:case 3:return[4,this.pw.subscribe()];case 2:case 4:return t.sent(),[3,7];case 5:return this.toggleHelpPopover(),[3,7];case 6:console.warn("Unknown browser notification permission"),t.label=7;case 7:return[2]}})})},t.prototype.onSubscribeEvent=function(){return i(this,void 0,void 0,function(){var t,e=this;return r(this,function(n){return null===(t=this.tooltip.querySelector("div"))||(t.innerText=this.config.tooltipText.successSubscribe,this.tooltip.classList.add("pushwoosh-subscribe-widget__tooltip__visible"),setTimeout(2e3)),[2]})})},t.prototype.onPermissionDeniedEvent=t.prototype.clickOutOfPopover=function(t){!this.popover.classList.contains("pushwoosh-subscribe-widget__popover__visible")||t.target.classList.contains("pushwoosh-subscribe-widget__popover")||null!==t.target.closest(".pushwoosh-subscribe-widget__popover")||t.target.classList.contains("pushwoosh-subscribe-widget__bell-button")||null!==t.target.closest(".pushwoosh-subscribe-widget__bell-button")||this.popover.classList.remove("pushwoosh-subscribe-widget__popover__visible")},t.prototype.onUnsubscribeEvent=t}();document.addEventListener("pushwoosh.initialized",},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(30),r=function(){function t(){}return t.getBellPosition=t.getTooltipPosition=function(t,e){var n,r,o=parseInt(e)+12+"px";switch(t){case i.BELL_POSITION_BOTTOM_RIGHT:n={right:o},r="right";break;case i.BELL_POSITION_BOTTOM_LEFT:case i.BELL_POSITION_TOP_LEFT:n={left:o},r="left";break;case i.BELL_POSITION_TOP_RIGHT:default:n={right:o},r="right"}return[n,r]},t.getPopoverPosition=t.getPopoverArrowPosition=t}();e.default=r},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r="/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */";return[n].concat(i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"})).concat([r]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){t.exports=[function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.isElementFixed=e.getGlobal=function(){return globalThis},e.getMessageTime=function(t){var e=new Date(t),n=e.getHours()+e.getTimezoneOffset()/60;e.setHours(n);var r=(new Date).getTime()-e.getTime();return r<=6e4?"Just now":r<i.MILLISECONDS_IN_HOUR&&r>0?Math.floor(r/6e4)+" minutes ago":r<i.MILLISECONDS_IN_DAY&&r>0?Math.floor(r/36e5)+" hours ago":e.getDate()+" "+i.MONTHS[e.getMonth()]+" "+e.getFullYear()+", "+e.getHours()+":"+("0"+e.getMinutes().toString()).slice(-2)},e.getValidColor=function(t){return"transparent"===t?t:i.COLOR_TEST_REGEXP.test(t)?t:"#333"},e.compareBySendDate=,function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=n(1),s=n(0),a=function(){eturn t.prototype.toggle=t.prototype.initTrigger=t.prototype.renderWidget=t.prototype.getStyle=t.prototype.configureStyle=function(t){var e=this,n=t.toString();return o.CONFIG_STYLES.forEach(function(t){var i=RegExp("var\\(--"+t.name+"\\)","ig"),r=e.getStyleFormatter(t);n=n.replace(i,r)}),n},t.prototype.getStyleFormatter=function(t){switch(t.type){case"size":return(this.config[t.name]||0)+"px";case"number":return parseFloat(this.config[t.name].toString()).toString();case"string":return this.config[t.name].toString();case"color":return s.getValidColor(this.config[t.name].toString());default:return"none"}},t.prototype.renderWidgetInner=t.prototype.renderMessages=t.prototype.updateCounter=t.prototype.updateInboxMessages=t.prototype.openWidget=t.prototype.closeWidget=t.prototype.positionWidget=t.prototype.customPlaceWidget=t.prototype.defaultPlaceWidget=t.prototype.alignWidgetTop=function(){var t=this.trigger.getBoundingClientRect(),e=this.widget.getBoundingClientRect();if(document.documentElement){var n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=this.widget.querySelector(".pw-inbox__arrow")||document.createElement("div");this.widget.classList.add("pw-top");var r=pageXOffset+t.left+Math.floor(t.width/2)-Math.floor(e.width/2),o=r<pageXOffset,s=r+e.width>pageXOffset+n;o&&(r=pageXOffset+this.defaultMargin),s&&(r=pageXOffset+n-e.width-this.defaultMargin);var a=pageYOffset+t.top-e.height;this.alignWidgetElement(r,a),i.style.left=t.left+Math.floor(t.width/2)-r+"px";var u=this.widget.getBoundingClientRect().top;if(u<0){var c=this.widget.getBoundingClientRect().height+u-this.defaultMargin,p=this.widget.getBoundingClientRect().top-u+this.defaultMargin;this.widget.style.height=c+"px",this.widget.style.top=p+"px"}}},t.prototype.alignWidgetRight=function(){var t=this.trigger.getBoundingClientRect(),e=this.widget.getBoundingClientRect();if(document.documentElement){var n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=this.widget.querySelector(".pw-inbox__arrow")||document.createElement("div");this.widget.classList.add("pw-right");var o=pageYOffset+t.top+Math.floor(t.height/2)-Math.floor(e.height/2),s=o<pageYOffset,a=pageYOffset+i<o+e.height;s&&(o=pageYOffset+this.defaultMargin),a&&(o=pageYOffset+i-e.height-this.defaultMargin);var u=pageXOffset+t.left+t.width;this.alignWidgetElement(u,o),r.style.top=t.top+Math.floor(t.height/2)-o+"px";var c=n-this.widget.getBoundingClientRect().right;if(c<this.defaultMargin){var p=this.widget.getBoundingClientRect().width+c-this.defaultMargin;this.widget.style.width=p+"px"}}},t.prototype.alignWidgetLeft=function(){var t=this.trigger.getBoundingClientRect(),e=this.widget.getBoundingClientRect();if(document.documentElement){var n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),i=this.widget.querySelector(".pw-inbox__arrow")||document.createElement("div");this.widget.classList.add("pw-left");var r=pageYOffset+t.top+Math.floor(t.height/2)-Math.floor(e.height/2),o=r<pageYOffset,s=pageYOffset+n<r+e.height;o&&(r=pageYOffset+this.defaultMargin),s&&(r=pageYOffset+n-e.height-this.defaultMargin);var a=pageXOffset+t.left-e.width;this.alignWidgetElement(a,r),i.style.top=t.top+Math.floor(t.height/2)-r+"px";var u=this.widget.getBoundingClientRect().left;if(u<0){var c=this.widget.getBoundingClientRect().width+u-this.defaultMargin,p=this.widget.getBoundingClientRect().left-u;this.widget.style.width=c+"px",this.widget.style.left=p+"px"}}},t.prototype.alignWidgetBottom=function(){var t=this.trigger.getBoundingClientRect(),e=this.widget.getBoundingClientRect();if(document.documentElement){var n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=this.widget.querySelector(".pw-inbox__arrow")||document.createElement("div");this.widget.classList.add("pw-bottom");var o=pageXOffset+t.left+Math.floor(t.width/2)-Math.floor(e.width/2),s=o<pageXOffset,a=o+e.width>pageXOffset+n;s&&(o=pageXOffset+this.defaultMargin),a&&(o=pageXOffset+n-e.width-12);var u=pageYOffset+t.top+t.height;this.alignWidgetElement(o,u),r.style.left=t.left+Math.floor(t.width/2)-o+"px";var c=i-this.widget.getBoundingClientRect().bottom;if(c<this.defaultMargin){var p=this.widget.getBoundingClientRect().height+c-this.defaultMargin;this.widget.style.height=p+"px"}}},t.prototype.alignWidgetElement=t.prototype.getDefaultPosition=t.prototype.addListeners=t.prototype.markVisibleItemsAsRead=function(){var t=this;if(0!==this.messages.length){var e=this.list.clientHeight+this.list.scrollTop-50;Object.keys(this.messagesElements).forEach(function(n){if(t.messagesElements[n]&&!(t.messagesElements[n].offsetTop>e)){var i=t.messages.find(;!i||i.isRead||t.readItems.indexOf(n)+1||t.readItems.push(n)}})}},t.prototype.updateReadStatus=t.prototype.updateInbox=t.prototype.performMessageAction=t.prototype.removeMessages=t.prototype.onTriggerClickHandler=t.prototype.onWidgetClickHandler=t.prototype.onWindowScrollHandler=t}();e.default=a},function(t,e,n){var i=n(6);t.exports="string"==typeof i?i:i.toString()},function(t,e,n){(t.exports=n(7)(void 0)).push([t.i,".pw-inbox-trigger {\n  position: relative;\n  cursor: pointer;\n}\n\n.pw-inbox-trigger:after {\n  content: attr(data-pw-count);\n  display: block;\n  position: absolute;\n  right: 0;\n  top: 0;\n  background: var(--badgeBgColor);\n  -webkit-border-radius: 8px;\n          border-radius: 8px;\n  color: var(--badgeTextColor);\n  font-size: 10px;\n  font-weight: normal;\n  line-height: 16px;\n  width: 16px;\n  padding: 0 2px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  text-align: center;\n}\n\n.pw-inbox-trigger.pw-empty:after {\n  display: none;\n}\n\n.pw-inbox-widget * {\n  position: static;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  font-size: 1em;\n  outline: none;\n  font-family: var(--fontFamily);\n}\n.pw-inbox-widget {\n  font-size: 14px;\n  position: absolute;\n  top: 0;\n  left: -1000px;\n  background: var(--bgColor);\n  border: solid 1px var(--borderColor);\n  -webkit-border-radius: var(--borderRadius);\n          border-radius: var(--borderRadius);\n  width: var(--widgetWidth);\n  -webkit-box-shadow: 0 1px 4px 0 rgba(0,0,0,.25);\n          box-shadow: 0 1px 4px 0 rgba(0,0,0,.25);\n  z-index: var(--zIndex);\n  opacity: 0;\n  -webkit-transition: opacity .6s ease;\n  -o-transition: opacity .6s ease;\n  transition: opacity .6s ease;\n  -webkit-transition-delay: 100ms;\n       -o-transition-delay: 100ms;\n          transition-delay: 100ms;\n}\n.pw-inbox-widget.pw-open {\n  opacity: 1;\n  -webkit-transition-delay: 0ms;\n       -o-transition-delay: 0ms;\n          transition-delay: 0ms;\n}\n.pw-inbox-widget.pw-inbox-widget--inset {\n  top: auto;\n  left: auto;\n  display: none;\n}\n.pw-inbox-widget.pw-inbox-widget--inset.pw-open {\n  display: block;\n}\n.pw-inbox-widget.pw-inbox-widget--inset.pw-bottom {\n  top: 100%;\n  left: 50%;\n  -webkit-transform: translateX(-50%);\n      -ms-transform: translateX(-50%);\n          transform: translateX(-50%);\n}\n.pw-inbox-widget.pw-inbox-widget--inset.pw-top {\n  bottom: 100%;\n  left: 50%;\n  -webkit-transform: translateX(-50%);\n      -ms-transform: translateX(-50%);\n          transform: translateX(-50%);\n}\n.pw-inbox-widget.pw-inbox-widget--inset.pw-right {\n  left: 100%;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n      -ms-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n.pw-inbox-widget.pw-inbox-widget--inset.pw-left {\n  right: 100%;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n      -ms-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n.pw-inbox-widget.pw-inbox-widget--empty {\n  max-height: none;\n}\n.pw-inbox-widget .pw-inbox__arrow {\n  display: block;\n  width: 0;\n  height: 0;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent;\n  position: absolute;\n}\n.pw-inbox-widget .pw-inbox__arrow:before {\n  content: \"\";\n  display: block;\n  width: 0;\n  height: 0;\n  border-width: 10px;\n  border-style: solid;\n  border-color: transparent;\n  position: absolute;\n}\n.pw-inbox-widget.pw-top {\n  margin-top: -12px;\n}\n.pw-inbox-widget.pw-top .pw-inbox__arrow {\n  border-top-color: var(--arrowBorderColor);\n  bottom: -21px;\n  left: 50%;\n  -webkit-transform: translateX(-50%);\n      -ms-transform: translateX(-50%);\n          transform: translateX(-50%);\n}\n.pw-inbox-widget.pw-top .pw-inbox__arrow:before {\n  border-top-color: var(--bgColor);\n  top: -11px;\n  left: -10px;\n}\n.pw-inbox-widget.pw-bottom {\n  margin-top: 12px;\n}\n.pw-inbox-widget.pw-bottom .pw-inbox__arrow {\n  border-bottom-color: var(--arrowBorderColor);\n  top: -21px;\n  left: 50%;\n  -webkit-transform: translateX(-50%);\n      -ms-transform: translateX(-50%);\n          transform: translateX(-50%);\n}\n.pw-inbox-widget.pw-bottom .pw-inbox__arrow:before {\n  border-bottom-color: var(--bgColor);\n  bottom: -11px;\n  left: -10px;\n}\n.pw-inbox-widget.pw-left {\n  margin-left: -12px;\n}\n.pw-inbox-widget.pw-left .pw-inbox__arrow {\n  border-left-color: var(--arrowBorderColor);\n  right: -21px;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n      -ms-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n.pw-inbox-widget.pw-left .pw-inbox__arrow:before {\n  border-left-color: var(--bgColor);\n  left: -11px;\n  top: -10px;\n}\n.pw-inbox-widget.pw-right {\n  margin-left: 12px;\n}\n.pw-inbox-widget.pw-right .pw-inbox__arrow {\n  border-right-color: var(--arrowBorderColor);\n  left: -21px;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n      -ms-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n.pw-inbox-widget.pw-right .pw-inbox__arrow:before {\n  border-right-color: var(--bgColor);\n  right: -11px;\n  top: -10px;\n}\n.pw-inbox_inner {\n  overflow: hidden;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  height: 100%;\n}\n.pw-inbox_title {\n  color: var(--textColor);\n  margin: 0;\n  padding: 28px 32px 12px;\n  font-size: 24px;\n  font-weight: 500;\n  line-height: 1.1;\n  text-align: left;\n  -webkit-box-flex: 0;\n      -ms-flex: 0 0 66px;\n          flex: 0 0 66px;\n}\n.pw-inbox_list {\n  overflow-x: hidden;\n  overflow-y: auto;\n  min-width: 200px;\n  max-height: 300px;\n  padding: 0;\n  margin: 0;\n  list-style: none;\n  position: relative;\n  -webkit-box-flex: 1;\n      -ms-flex: 1 1 auto;\n          flex: 1 1 auto;\n}\n\n.pw-inbox_item {\n  position: relative;\n  padding: 8px 32px;\n  margin: 0;\n  text-align: left;\n}\n.pw-inbox_item-inner {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  cursor: pointer;\n}\n.pw-inbox_icon {\n  -webkit-box-flex: 0;\n      -ms-flex: 0 0 40px;\n          flex: 0 0 40px;\n}\n.pw-inbox_message-image {\n  width: 28px;\n}\n.pw-inbox_content {\n  -webkit-box-flex: 0;\n      -ms-flex: 0 1 100%;\n          flex: 0 1 100%;\n}\n.pw-inbox_item-title {\n  color: var(--messageTitleColor);\n  font-size: 14px;\n  line-height: 20px;\n  margin-bottom: 4px;\n}\n.pw-inbox_item-body {\n  color: var(--textColor);\n  font-size: 14px;\n  line-height: 20px;\n  margin-bottom: 4px;\n}\n.pw-inbox_item-time {\n  color: var(--timeTextColor);\n  font-size: 12px;\n  line-height: 17px;\n}\n.pw-inbox_item-remove {\n  position: absolute;\n  z-index: 2;\n  top: 8px;\n  right: 8px;\n  display: none;\n  width: 10px;\n  height: 10px;\n  background: transparent url('https://cdn.pushwoosh.com/webpush/img/iconClose.svg') 50% no-repeat;\n  cursor: pointer;\n}\n.pw-inbox_item:hover .pw-inbox_item-remove {\n  display: block;\n}\n\n.pw-inbox_item.pw-new .pw-inbox_item-title {\n  color: var(--textColor);\n  font-weight: 700;\n}\n\n.pw-inbox_item.pw-new .pw-inbox_item-body {\n  font-weight: 700;\n}\n\n.pw-inbox_list--empty {\n  padding: 50px 16px;\n  text-align: center;\n  max-height: 100%;\n  overflow: auto;\n}\n\n.pw-inbox_list--empty .pw-inbox_list-icon {\n  text-align: center;\n  margin-bottom: 30px;\n}\n.pw-inbox_list--empty .pw-inbox_list-icon img {\n  max-width: 100%;\n}\n\n.pw-inbox_list--empty .pw-inbox_list-title {\n  font-size: 28px;\n  line-height: 36px;\n  color: var(--emptyInboxTitleColor);\n  margin-bottom: 20px;\n}\n\n.pw-inbox_list--empty .ipw-inbox_list-body {\n  font-size: 14px;\n  line-height: 18px;\n  color: var(--emptyInboxTextColor);\n}\n",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r="/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */";return[n].concat(i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"})).concat([r]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}}])},function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CONFIG={text:"Dont miss out on our news and updates! Enable push notifications",askLaterButtonText:"Not now",confirmSubscriptionButtonText:"Subscribe",delay:60,retryOffset:604800,overlay:!1,position:"top",bgColor:"#fff",borderColor:"transparent",boxShadow:"0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)",textColor:"#000",textSize:"inherit",fontFamily:"inherit",subscribeBtnBgColor:"#4285f4",subscribeBtnTextColor:"#fff",askLaterBtnBgColor:"transparent",askLaterBtnTextColor:"#000",theme:"material",viewport:"html"},e.COLOR_TEST_REGEXP=/^(#([\da-f]{3}){1,2}$|(rgb|hsl)a\((\d{1,3}%?,\s?){3}(1|0?\.\d+)\)$|(rgb|hsl)\(\d{1,3}%?(,\s?\d{1,3}%?){2}\)$)/,e.PERMISSION_DENIED="denied",e.PERMISSION_GRANTED="granted",e.CONFIG_STYLES=[{name:"bgColor",type:"color"},{name:"borderColor",type:"color"},{name:"boxShadow",type:"string"},{name:"textColor",type:"color"},{name:"textSize",type:"string"},{name:"fontFamily",type:"string"},{name:"subscribeBtnBgColor",type:"color"},{name:"subscribeBtnTextColor",type:"color"},{name:"askLaterBtnBgColor",type:"color"},{name:"askLaterBtnTextColor",type:"color"}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);e.PWSubscribePopup=i.default},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r=this&&this.__awaiter},o=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n(3),u=n(0),c=n(4),p=function(){function t(t){this.pw=t,this.config=i({},s.DEFAULT_CONFIG,this.pw.subscribePopupConfig),this.onAskLaterClick=this.onAskLaterClick.bind(this),this.onSubscribeClick=this.onSubscribeClick.bind(this)}return t.prototype.initPopup=function(){return r(this,void 0,void 0,function(){var t,e,n,i,r,s,a=this;return o(this,function(o){switch(o.label){case 0:return[4,this.pw.isSubscribed()];case 1:return t=o.sent(),[4,this.pw.data.getStatusManualUnsubscribed()];case 2:return e=o.sent(),t||e?[2]:[4,this.pw.driver.getPermission()];case 3:return(n=o.sent())===u.PERMISSION_GRANTED||n===u.PERMISSION_DENIED||(this.renderPopup(),this.appendStyles(),r=(i=localStorage.getItem("LAST_OPEN_SUBSCRIPTION_POPUP"))?parseInt(i):0,s=(new Date).getTime(),r+1e3*this.config.retryOffset<s&&setTimeou},1e3*this.config.delay)),[2]}})})},t.prototype.toggl},t.prototype.showPopup=function(){this.isShown=!0,this.popup.classList.add("pw-show"),document.body.classList.add("pw-popup-opened");var t=new CustomEvent("showPopup",{bubbles:!1,cancelable:!1,detail:{popup:this.popup}});if(this.popup.dispatchEvent(t),!(541>Math.max(document.documentElement.clientWidth,window.innerWidth||0))){var e=this.config,n=e.theme,i=e.viewport,r=e.position;if("topbar"===n&&"top"===r){var o=document.querySelector(i)||document.createElement("div"),s=window.getComputedStyle(o).marginTop||"0";o.style.transition="margin-top .3s ease-out",o.style.marginTop=parseInt(s)+this.popup.getBoundingClientRect().height+"px"}}},t.prototype.closePopup=function(){this.isShown=!1,this.popup.classList.remove("pw-show"),document.body.classList.remove("pw-popup-opened");var t=new CustomEvent("hidePopup",{bubbles:!1,cancelable:!1,detail:{popup:this.popup}});this.popup.dispatchEvent(t);var e=(new Date).getTime().toString();if(localStorage.setItem("LAST_OPEN_SUBSCRIPTION_POPUP",e),!(541>Math.max(document.documentElement.clientWidth,window.innerWidth||0))){var n=this.config,i=n.theme,r=n.viewport,o=n.position;if("topbar"===i&&"top"===o){var s=document.querySelector(r)||document.createElement("div"),a=window.getComputedStyle(s).marginTop||"0";s.style.marginTop=parseInt(a)-this.popup.getBoundingClientRect().height+"px"}}},t.prototype.renderPopu},t.prototype.appendStyle},t.prototype.getStyleFormatter=function(t){switch(t.type){case"size":return(this.config[t.name]||0)+"px";case"number":return parseFloat(this.config[t.name].toString()).toString();case"string":return this.config[t.name].toString();case"color":return c.getValidColor(this.config[t.name].toString());default:return"none"}},t.prototype.configureStyle=function(t){var e=this,n=t.toString();return s.CONFIG_STYLES.forEac}),n},t.prototype.addListener},t.prototype.onAskLaterClic},t.prototype.onSubscribeClic},t}();e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.innerTemplate=function(t){var e=t.iconUrl,n=t.text,i=t.askLaterButtonText;return'<div class="pw-subscription-popup-inner">\n    <div class="pw-subscription-popup-content">\n      '+(e?'<div class="pw-subscription-popup-icon">\n        <img src="'+e+'">\n      </div>':"")+'\n      <div class="pw-subscription-popup-text">\n        '+n+'\n      </div>\n    </div>\n    <div class="pw-subscription-popup-controls">\n      <button name="pwSubscribe" class="pw-subscribe-popup-button pw-subscribe-popup-button-active">'+t.confirmSubscriptionButtonText+'</button>\n      <button name="pwAskLater" class="pw-subscribe-popup-button">'+i+"</button>\n    </div>\n  </div>"}}])}])}}]);
//# sourceMappingURL=0e61faf0.4850ec0dfd2f8e76.js.map